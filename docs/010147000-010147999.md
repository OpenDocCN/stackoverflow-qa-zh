# StackOverflow 问答 10147000-10147999

# jquery-mobile - 为什么 iframe 的历史记录会被添加到历史记录中

> ID：10147001
> 
> 赞同：1
> 
> 时间：2012-04-13T19:19:29.313
> 
> 标签：jquery-mobile

在 jQuery mobile 中，我使用的是 iframe。当您按下后退按钮（在应用程序或浏览器的后退按钮中）时，iframe 内容会消失。然后，当您再次按下后退按钮时，应用程序将转换到上一页。

iFrame 正在被添加到历史记录中。我认为这不应该发生。

创建了一个[jsFiddle](http://jsfiddle.net/kolban/6achL3ez/)，以尽可能简单的形式说明这个难题。

在其中，您将找到一个 HTML 片段，该片段创建了两个 jQuery Mobile 页面。在第一页有一个链接可以转到第二页。在第二页上，有两个返回按钮（一个在页眉上，一个在页面上作为按钮），还有一个用于重新加载的按钮`<iframe>`。要重现问题：

*   从第 1 页跟随链接到第 2 页
*   在第 2 页上，单击按钮以加载`<iframe>`
*   单击任一后退按钮

您会注意到您**没有**返回到第 1 页。

这是HTML：

```
<div data-role="page">
    <p>This is page 1</p> <a href="#page2">Go to page 2</a>
</div>

<div data-role="page" id="page2">
    <div data-role="header" data-add-back-btn="true">
         <h1>Page 2</h1>
    </div>
    <p>This is page 2</p>
    <p>What follows is the iFrame</p>
    <iframe id="i1" width="500" src="http://www.ibm.com"></iframe>
    <p>This button issues a programmatic back</p>
    <button id="backButton">Go Back</button>
    <p>This button loads new content into the iframe</p>
    <button id="reloadButton">Reload iFrame</button>
</div> 
```

这是JavaScript

```
$(function () {
    $("#backButton").click(function () {
        jQuery.mobile.back();
    });
    $("#reloadButton").click(function() {
        $("#i1").attr("src", "http://www.microsoft.com?x=" + Math.random());
    });
}); 
```

（这是您将在 jsFiddle 中找到的代码）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T04:57:27.680

我猜这是因为 JQM 使用[replaceState](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)以编程方式操纵历史。[您可以在文档](http://jquerymobile.com/demos/1.1.0/docs/pages/page-navmodel.html)中阅读有关他们如何在 ajax 环境中跟踪历史记录的更多信息

给我一些代码或[小提琴](http://jsfiddle.net)，我可能会给你一个更详细的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-01T22:31:18.040

一个似乎有效的答案（到目前为止）**不是**尝试重新加载`<iframe>`via 更改其`src`属性，而是插入一个全新的`<iframe>`元素来替换以前存在的元素。实现这一点的逻辑可能如下所示：

```
$("#frameLocation").html('<iframe id="i1" width="500" src=' + newURL + '"></iframe>'); 
```

一个相应的[jsFiddle](http://jsfiddle.net/kolban/322Lgo6h/)显示它工作是可用的。

这已经在 Chrome 38.0 和 Internet Explorer 11.0 上进行了测试。

# java - 执行代码太快..需要放慢速度，但如何？

> ID：10147005
> 
> 赞同：1
> 
> 时间：2012-04-13T19:19:45.743
> 
> 标签：java

从下面的这段代码

```
 if(!validate_containsNum && !validate_isNumber && !validate_isBlankField){
                a.sendMsgToSlave("DATA:TAKE:PEOPLEs:"+pName_sub);
                appendToGlobalDataLog("SEND : DATA:TAKE:PEOPLEs:"+pID+":"+p_sub);
                String pID = pID_Manage.getText();  
                a.addtoArrayList("DATA:TAKE:PEOPLEs:"+pID+":"+pName_sub);
                at.sendToServer("DATA:TAKE:PEOPLEs:"+pID+":"+pName_sub);

        } 
```

从上面的代码中，我遇到了这一行的问题

```
 a.sendMsgToSlave("DATA:TAKE:PEOPLEs:"+pName_sub); 
```

实际上是在调用我的客户端从 peoples TABLE 中获取数据，以获取 pID 作为回报，这将返回到 JTEXTFIELD 应该执行下一行的地方

```
 String pID = pID_Manage.getText(); 
```

但是至于下一行的工作是将某些字符串添加到具有 pID 和 pName_Sub 组合的数组列表中，但是当执行它时，我发现我的数组列表没有 pID ..so 而不是真正的结果应该是像这样

```
 DATA:TAKE:PEOPLEs:1:ALBERT  (In my arraylist) 
```

它显示为这样

```
 DATA:TAKE:PEOPLEs::ALBERT (the id is missing) 
```

我需要再次重新提交第二次才能获得 ID...似乎代码的执行速度太快，并且存储 ID 以返回 JTEXTFIELD 很慢..有什么办法可以减慢速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:26:43.200

快速而肮脏的解决方案是调用`Thread.Sleep`，但更好的解决方案是修改代码`a.sendMsgToSlave()`以仅在设置 id 后才返回。这样你就可以肯定地知道当执行到之后的语句时，`sendMsgToSlave()`你肯定每次都会准备好 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:34:29.337

您`sendMsgToSlave`启动了一个异步事件链，导致文本字段在稍后更新。您应该修改您的体系结构，以便依赖于设置的 ID 字段的代码运行以响应实际发生的事件。正如其他人所提到的，您可以进行`sendMsgToSlave`同步，但从它的名称来看，我认为这不是一个好主意。您可以做的是将*更改侦听*器附加到将完成其余任务的 ID 字段。我会近似，因为我不知道您将需要的确切听众：

```
pID_Manager.addChangeListener(new ChangeListener() { 
  public void textChanged(ChangeEvent e) {
    pID_manager.removeChangeListener(this);
    String pID = pID_Manage.getText();  
    a.addtoArrayList("DATA:TAKE:PEOPLEs:"+pID+":"+pName_sub);
    at.sendToServer("DATA:TAKE:PEOPLEs:"+pID+":"+pName_sub);
}}; 
```

所以基本思想是侦听器对适当的事件做出反应，并在触发时立即取消注册。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:34:09.187

以下是您的解决方案：
将 changelistener 放在 jtextfield pID_Manage 上
并在其中调用您的数组填充方法，
以便仅在收到 id 并将其分配给 jtextfield 时填充数组。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-13T20:25:45.370

我不确定这是否可行，但是尝试防止散列中的彩虹表和其他安全问题，做类似的事情

```
for(int i = 0; i < 100; i++) {
} 
```

可能会成功。但同样我从未测试过这个，这只是一个建议

# c# - C# HASP 登录代码

> ID：10147006
> 
> 赞同：3
> 
> 时间：2012-04-13T19:19:51.173
> 
> 标签：c#, sentinel, hasp

我想尝试使用 hasp api 来构建我的自定义安全行为，但是当我使用 Sentinel HASP ToolBox 生成的代码时它不起作用。我将此代码从 Toolbox 粘贴到 onLoad Form 方法：

```
HaspFeature feature = HaspFeature.Default;

string vendorCode = 
"AzIceaqfA1hX5wS+M8cGnYh5ceevUnOZIzJBbXFD6dgf3tBkb9cvUF/Tkd/iKu2fsg9wAysYKw7RMAsV" + 
"vIp4KcXle/v1RaXrLVnNBJ2H2DmrbUMOZbQUFXe698qmJsqNpLXRA367xpZ54i8kC5DTXwDhfxWTOZrB" + 
"rh5sRKHcoVLumztIQjgWh37AzmSd1bLOfUGI0xjAL9zJWO3fRaeB0NS2KlmoKaVT5Y04zZEc06waU2r6" + 
"AU2Dc4uipJqJmObqKM+tfNKAS0rZr5IudRiC7pUwnmtaHRe5fgSI8M7yvypvm+13Wm4Gwd4VnYiZvSxf" + 
"8ImN3ZOG9wEzfyMIlH2+rKPUVHI+igsqla0Wd9m7ZUR9vFotj1uYV0OzG7hX0+huN2E/IdgLDjbiapj1" + 
"e2fKHrMmGFaIvI6xzzJIQJF9GiRZ7+0jNFLKSyzX/K3JAyFrIPObfwM+y+zAgE1sWcZ1YnuBhICyRHBh" + 
"aJDKIZL8MywrEfB2yF+R3k9wFG1oN48gSLyfrfEKuB/qgNp+BeTruWUk0AwRE9XVMUuRbjpxa4YA67SK" + 
"unFEgFGgUfHBeHJTivvUl0u4Dki1UKAT973P+nXy2O0u239If/kRpNUVhMg8kpk7s8i6Arp7l/705/bL" + 
"Cx4kN5hHHSXIqkiG9tHdeNV8VYo5+72hgaCx3/uVoVLmtvxbOIvo120uTJbuLVTvT8KtsOlb3DxwUrwL" + 
"zaEMoAQAFk6Q9bNipHxfkRQER4kR7IYTMzSoW5mxh3H9O8Ge5BqVeYMEW36q9wnOYfxOLNw6yQMf8f9s" + 
"JN4KhZty02xm707S7VEfJJ1KNq7b5pP/3RjE0IKtB2gE6vAPRvRLzEohu0m7q1aUp8wAvSiqjZy7FLaT" + 
"tLEApXYvLvz6PEJdj4TegCZugj7c8bIOEqLXmloZ6EgVnjQ7/ttys7VFITB3mazzFiyQuKf4J6+b/a/Y";

Hasp hasp = new Hasp(feature);
HaspStatus status = hasp.Login(vendorCode);

if (HaspStatus.StatusOk != status)
{
    //handle error
    Application.Exit();
} 
```

接下来我插入了演示 HASP HL Net key 10 进行试用。在 Visual Studio 示例项目中使用此代码时，我总是会出错，但是当我在 ToolBox 中尝试时，我会收到正确的答案（HASP_STATUS_OK）。当然，我包括了对 hasp .net 程序集的引用并添加了命名空间。

是什么原因，它无法从 c# 中的运行时 api 登录到 hasp hl 密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:49:12.670

我找到了解决方案。首先，我必须包含对 hasp_windows_demo.dll 的引用，因为 hasp_net_windows.dll 只是 hasp_windows_demo.dll 的包装库。第二：我使用 VirtualBox 进行测试，所以当我将加密狗插入 USB 端口时，usb virtualbox 驱动程序崩溃 - 需要重新安装（仅限 Mac/Linux 问题）。

# ios - 安全会话登录到 phonegap 上的服务器

> ID：10147017
> 
> 赞同：0
> 
> 时间：2012-04-13T19:20:20.843
> 
> 标签：ios, session, cordova

我环顾四周，试图获取有关如何在 ios 的电话间隙应用程序上创建安全登录和会话的一些信息。我正在尝试通过 api 与在线服务器交谈。任何人都可以提供一些提示或一些起点吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:27:26.447

您只想在客户端和服务器之间进行安全登录或安全交互？

如果您想要安全登录，我建议您通过以下方式传输您的用户名和密码。HTTPS 到服务器。在服务器端检查它，如果没问题，你响应一个会话令牌和一个会话 cookie。对于其余的交互，您只发送您的 sessoin-cookie 来识别您自己。当用户关闭应用程序并再次启动它时，您检查您的令牌到期日期，如果它仍然有效，您将您的令牌发送到服务器而不是用户名 + 密码（再次 HTTPS）以获取新的会话 cookie。

通过这种方式，您不必一直传输您的用户数据，并且用户不必在每次启动应用程序时都登录。如果您将用户名和密码存储在手机上，您也可以实现这种行为，但这是非常糟糕的做法。如果你想在客户端和服务器之间建立一个完全安全的连接（比如支付和其他东西），你必须使用 HTTPS 来完成。

基本上你使用标准的网络技术。这种处理方式称为令牌认证。

# arguments - 仅在使用 Intel Visual Fortran 编译时子程序调用堆栈溢出，在使用 Compaq Visual Fortran 编译时正常

> ID：10147028
> 
> 赞同：7
> 
> 时间：2012-04-13T19:20:45.557
> 
> 标签：arguments, fortran, intel-fortran

使用 Fortran .dll 的相同源文件，我可以使用 Compaq Visual Fortran 6.6C 或 Intel Visual Fortran 12.1.3.300 (IA-32) 编译它们。问题是在 Intel 二进制文件上执行失败，但在 Compaq 上运行良好。我在 Windows 7 64 位系统上编译 32 位。.dll 调用驱动程序是用`C#`.

[`_chkstk()`](http://www.codeguru.com/cpp/v-s/debug/article.php/c19241/Adventures-with-chkstk.htm)当调用内部子例程（从 .dll 入口例程调用）时，失败消息来自可怕的调用。（所以回答[`chkstk()`](https://stackoverflow.com/a/9210322/380384)）

有问题的过程被声明为（请原谅固定文件格式）

```
 SUBROUTINE SRF(den, crpm, icrpm, inose, qeff, rev,  
 &               qqmax, lvtyp1, lvtyp2, avespd, fridry, luin,  
 &               luout, lurtpo, ludiag, ndiag, n, nzdepth, 
 &               unit, unito, ier)

  INTEGER*4 lvtyp1, lvtyp2, luin, luout, lurtpo, ludiag, ndiag, n, 
 &          ncp, inose, icrpm, ier, nzdepth
  REAL*8    den, crpm, qeff, rev, qqmax, avespd, fridry           
  CHARACTER*2  unit, unito 
```

并像这样调用：

```
 CALL SRF(den, crpm(i), i, inose, qeff(i), rev(i),  
 &             qqmax(i), lvtyp1, lvtyp2, avespd, fridry, 
 &             luin, luout, lurtpo, ludiag, ndiag, n, nzdepth,  
 &             unit, unito, ier) 
```

具有类似的变量规范，除了,`crpm`和是数组，每次调用只使用其中的元素。`qeff``rev``qqmax``i-th``SRF()`

如果参数超过`8kb`大小，我理解可能的堆栈问题，但在这种情况下，我们`7 x real(64) + 11 x int(32) + 2 x 2 x char(8) = 832 bits`只有传递的参数。

我非常努力地将参数（尤其是数组）移动到模块中，但我一直收到同样的错误

![错误](../Images/1e259e2c6b1300084949c99916a9c73d.png).

来自**Intel** .dll 的反汇编是

![英特尔](../Images/3eec0c316c0b3169631a27648a4ea2a0.png)

**Compaq** .dll的反汇编是

![康柏](../Images/4725f094a1442470425a9050ba47aa3b.png)

任何人都可以就导致 SO 的原因或如何调试它提供任何建议吗？

PS。我已将保留的堆栈空间增加到数百个`Mb`，但问题仍然存在。我尝试`chkstk()`在反汇编程序中跳过调用，但程序崩溃了。堆栈检查从地址开始`0x354000`并向下迭代到`0x2D2000`它在访问保护页面时崩溃的地方。栈底地址为`0x282000`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T18:32:23.773

你正在射击信使。Compaq 生成的代码*也*调用 _chkstk()，不同之处在于它内联了它。常见的优化。这两个片段之间的主要区别是：

```
 mov eax, 0D3668h 
```

对比

```
 sub esp, 233E4h 
```

您在此处看到的值是函数所需的堆栈空间量。Intel 代码需要 0xd3668 字节 = 865869 字节。Compaq 代码需要 0x233e4 = 144356。差别很大。在这两种情况下，这都是相当大的数量，但英特尔的一个变得至关重要，一个程序通常有一个 1 兆字节的堆栈。吞下 0.86 兆字节的内容非常接近，嵌套了几个函数调用，您正在查看该站点的名称。

你需要找出什么，我无能为力，因为它不在你的代码片段中，这就是为什么英特尔生成的函数需要这么多空间来存放它的局部变量。解决方法是使用免费存储为大型数组寻找空间。或者使用链接器的 /STACK 选项来请求更多的堆栈空间（猜测选项名称）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-05T16:50:04.670

问题不在于发生堆栈溢出的函数调用。

在代码的早期，有一些全局矩阵被初始化并被放置在堆栈中，由于代码中的错误，它们仍在范围内并且*几乎*已经填满了堆栈。当函数调用发生时，编译器试图将返回地址存储到堆栈中，导致程序崩溃。

解决方案是制作全局矩阵`allocatable`，并确保“堆数组”选项设置为适当的值。

这真是个兔子洞，当它 100% 是我的错误代码导致问题时。

# c# - 删除任何文件夹中的所有文件

> ID：10147029
> 
> 赞同：2
> 
> 时间：2012-04-13T19:20:49.377
> 
> 标签：c#, system, delete-file

当我使用右键菜单手动删除文件时，它会被删除。

但是当我运行这段代码时：

```
string[] filePaths = Directory.GetFiles(@"c:\My cloud\VM Instances\");
foreach (string filePath in filePaths)
     File.Delete(filePath); 
```

我收到了这个错误：

> “在 mscorlib.dll 中发生了‘System.UnauthorizedAccessException’类型的第一次机会异常访问路径‘c:\My cloud\VM Instances\i-7e3cbb19 (manish).cvm’被拒绝。线程‘’(0xb5c)已以代码 0 (0x0) 退出。在 mscorlib.dll 'cloud_sync.vshost.exe'（托管 (v4.0.30319)）中发生了“System.UnauthorizedAccessException”类型的第一次机会异常：已加载“C:\WINDOWS\Microsoft。 Net\assembly\GAC_MSIL\System.Configuration\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Configuration.dll'，跳过加载符号。模块已优化，调试器选项“仅我的代码”已启用。”

所以我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T19:23:20.907

您的代码正在运行的进程与您的交互式登录进程具有不同的权限。最大的提示是你得到一个`UnauthorizedAccessException`.

这是一个网站吗？如果是这样，默认情况下，ASPNET 工作进程的设计权限非常有限（远离该默认设置会很危险）。

这是 Windows 服务吗？如果是这样，默认情况下，它们也以权限非常有限的用户身份运行。

# c#-4.0 - C#.NET 中的回滚 INSERT 命令

> ID：10147030
> 
> 赞同：1
> 
> 时间：2012-04-13T19:20:50.327
> 
> 标签：c#-4.0

我有一些困惑，我想清除它 - 我正在使用 ADO.NET 将值插入数据库。假设我想插入 10 项，如果我在插入第 5 项的数据时遇到错误，它应该回滚我插入到数据库中的任何内容。

我刚刚阅读了事务和回滚方法的概念，也尝试在程序中实现它，但它仍然插入 4 项并给我第 5 项的错误消息。它不会回滚插入查询。

事务和回滚方法是否解决了我的问题或者我需要使用其他替代方法。

这是我的代码，

```
for (int i = 0; i < itemLength - 1; i++)
            {
                //--- Start local transaction ---
                myTrans = Class1.conn.BeginTransaction();

                //--- Assign transaction object and connection to command object for a pending local transaction ---
                _insertQry = Class1.conn.CreateCommand();
                _insertQry.Connection = Class1.conn;
                _insertQry.Transaction = myTrans;

                _insertQry.CommandText = "INSERT INTO Product_PropertyValue(ItemNo, PropertyNo, ValueNo) VALUES (@ItemNo, @PropertyNo, @ValueNo)";

                //_insertQry = new SqlCommand("INSERT INTO Product_PropertyValue(ItemNo, PropertyNo, ValueNo) VALUES (@ItemNo, @PropertyNo, @ValueNo)", Class1.conn);

                _insertQry.Parameters.AddWithValue("@ItemNo", _itemNo[i]);
                _insertQry.Parameters.AddWithValue("@PropertyNo", _propNo);
                _insertQry.Parameters.AddWithValue("@ValueNo", _propValue);

                _insertQry.ExecuteNonQuery();
                myTrans.Commit();
            } 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:38:41.890

听起来您正在尝试实现原子提交。它要么完全插入，要么根本不插入。

尝试以下内容

```
SqlTransaction objTrans = null;
        using (SqlConnection objConn = new SqlConnection(strConnString))
        {
            objConn.Open();
            objTrans = objConn.BeginTransaction();
            SqlCommand objCmd1 = new SqlCommand("insert into tbExample values(1)", objConn);
            SqlCommand objCmd2 = new SqlCommand("insert into tbExample values(2)", objConn);
            try
            {
                objCmd1.ExecuteNonQuery();
                objCmd2.ExecuteNonQuery();
                objTrans.Commit();
            }
            catch (Exception)
            {
                objTrans.Rollback();
            }
            finally
            {
                objConn.Close();
            } 
```

也看看 [http://www.codeproject.com/Articles/10223/Using-Transactions-in-ADO-NET](http://www.codeproject.com/Articles/10223/Using-Transactions-in-ADO-NET)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:11:07.810

我对你的代码做了 2 处修改

1）将 BeginTransaction() 移到 for 循环之外，以便所有 10 个 INSERt 语句都在一个事务中，如果您希望它们是*原子的，这就是您想要的*

2) 添加了一个 TRY/CATCH 块，以便在出现错误时可以回滚。

```
 //--- Start local transaction ---
        myTrans = Class1.conn.BeginTransaction();
        bool success = true;

        try
        {
            for (int i = 0; i < itemLength - 1; i++)
            {
                //--- Assign transaction object and connection to command object for a pending local transaction ---
                _insertQry = Class1.conn.CreateCommand();
                _insertQry.Connection = Class1.conn;
                _insertQry.Transaction = myTrans;

                _insertQry.CommandText = "INSERT INTO Product_PropertyValue(ItemNo, PropertyNo, ValueNo) VALUES (@ItemNo, @PropertyNo, @ValueNo)";

                //_insertQry = new SqlCommand("INSERT INTO Product_PropertyValue(ItemNo, PropertyNo, ValueNo) VALUES (@ItemNo, @PropertyNo, @ValueNo)", Class1.conn);

                _insertQry.Parameters.AddWithValue("@ItemNo", _itemNo[i]);
                _insertQry.Parameters.AddWithValue("@PropertyNo", _propNo);
                _insertQry.Parameters.AddWithValue("@ValueNo", _propValue);

                _insertQry.ExecuteNonQuery();
            }
        }
        catch (Exception ex)
        {
            success = false;
            myTrans.Rollback();
        }

        if (success)
        {
            myTrans.Commit();
        } 
```

如果这不起作用，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:42:36.607

您走在正确的道路上，ADO.NET 支持事务，因此您将能够回滚错误。

在此处发布您的代码将为您提供更具体的指导；但是，由于您的问题非常笼统，我鼓励您遵循 MSDN 提供的模板

```
using (SqlConnection connection = new SqlConnection(connectionString))
{
    connection.Open();

    // Start a local transaction.
    SqlTransaction sqlTran = connection.BeginTransaction();

    // Enlist a command in the current transaction.
    SqlCommand command = connection.CreateCommand();
    command.Transaction = sqlTran;

    try
    {
        // Execute two separate commands.
        command.CommandText =
          "INSERT INTO Production.ScrapReason(Name) VALUES('Wrong size')";
        command.ExecuteNonQuery();
        command.CommandText =
          "INSERT INTO Production.ScrapReason(Name) VALUES('Wrong color')";
        command.ExecuteNonQuery();

        // Commit the transaction.
        sqlTran.Commit();
        Console.WriteLine("Both records were written to database.");
    }
    catch (Exception ex)
    {
        // Handle the exception if the transaction fails to commit.
        Console.WriteLine(ex.Message);

        try
        {
            // Attempt to roll back the transaction.
            sqlTran.Rollback();
        }
        catch (Exception exRollback)
        {
            // Throws an InvalidOperationException if the connection 
            // is closed or the transaction has already been rolled 
            // back on the server.
            Console.WriteLine(exRollback.Message);
        }
    }
} 
```

# ruby - 将 1.8.7 升级到 1.9.3，回形针 s3 上传不起作用

> ID：10147038
> 
> 赞同：2
> 
> 时间：2012-04-13T19:21:23.213
> 
> 标签：ruby, ruby-on-rails-3, paperclip

当我从 Ruby 1.8.7 迁移到 1.9.3 时，面临一个关于 Paperclip 照片上传的问题。

我们配置了 Paperclip，将 s3 作为存储。当我使用 1.8.7 运行 rails 服务器时它工作正常，但它没有使用 1.9.3 上传文件（没有任何错误）。

请查看配置和日志。

**回形针配置：**

```
has_attached_file :pic,
  :styles => {
    :thumb => "100x100#",
    :one => "118x100#",
    :two => "222x149#",
    :three => "460x345#",
    :popup => "480x360#"
  }, 
  :storage => :s3,
  :s3_credentials => Settings.amazon_s3.to_hash,
  :path => ":attachment/:id/:style/:filename",
  :bucket => Settings.amazon_s3.my_bucket 
```

**上传图片时记录**

```
[paperclip] Duplicate URL for photo with /system/:attachment/:id/:style/:filename. This will clash with attachment defined in Photo class
[paperclip] Duplicate URL for photo with /system/:attachment/:id/:style/:filename. This will clash with attachment defined in User class
Command :: identify -format %wx%h '/tmp/stream20120414-20761-hnqjzj.jpg[0]'
Command :: convert '/tmp/stream20120414-20761-hnqjzj.jpg[0]' -resize "x100" -crop "100x100+30+0" +repage '/tmp/stream20120414-20761-hnqjzj20120414-20761-1e0nflx'
Command :: identify -format %wx%h '/tmp/stream20120414-20761-hnqjzj.jpg[0]'
Command :: convert '/tmp/stream20120414-20761-hnqjzj.jpg[0]' -resize "x100" -crop "118x100+21+0" +repage '/tmp/stream20120414-20761-hnqjzj20120414-20761-h7a0ri'
Command :: identify -format %wx%h '/tmp/stream20120414-20761-hnqjzj.jpg[0]'
Command :: convert '/tmp/stream20120414-20761-hnqjzj.jpg[0]' -resize "x149" -crop "222x149+8+0" +repage '/tmp/stream20120414-20761-hnqjzj20120414-20761-10av65c'
Command :: identify -format %wx%h '/tmp/stream20120414-20761-hnqjzj.jpg[0]'
Command :: convert '/tmp/stream20120414-20761-hnqjzj.jpg[0]' -resize "x345" -crop "460x345+46+0" +repage '/tmp/stream20120414-20761-hnqjzj20120414-20761-13ixq6o'
Command :: identify -format %wx%h '/tmp/stream20120414-20761-hnqjzj.jpg[0]'
Command :: convert '/tmp/stream20120414-20761-hnqjzj.jpg[0]' -resize "x360" -crop "480x360+48+0" +repage '/tmp/stream20120414-20761-hnqjzj20120414-20761-g6turu' 
```

分享你的想法，我是 Ruby 的新手。我错过了一些配置吗？因为它已经在 1.8.7 上运行，所以不应该是这样。

**更新：**

使用 Paperclip 2.7.0、Rails 3.0.11 和 Ruby 1.9.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-15T06:29:50.410

在检查了执行时抛出的异常后，我找到了解决方案`model.save!`。

基本上，上传的图像文件的内容类型验证失败。这适用于回形针 2.70，但对于 >3.0 版本，我们需要进行如下更改。

```
#The old contentType setting is commented out    
#validates_attachment_content_type :photo, :content_type => ['image/jpeg', 'image/pjpeg', 'image/jpg', 'image/png']  

validates_attachment_content_type :photo, :content_type => /image/ 
```

现在，图像已成功上传到亚马逊 s3 服务器。

**参考**

[验证附件内容类型回形针](https://stackoverflow.com/questions/3181845/validate-attachment-content-type-paperclip/3181931#3181931)

# animation - 动画更新 mkannotationview 中的图像属性

> ID：10147040
> 
> 赞同：0
> 
> 时间：2012-04-13T19:21:29.657
> 
> 标签：animation, uiimage, mkannotationview

我想对显示我的 mkannotationview 时使用的图像进行动画更改。

我知道 uiimageview 允许对其图像进行动画处理，但 mkannotationview 只是具有图像属性的 uiview。

我也意识到我可以覆盖 mkannnotationview 的 drawrect 方法，并完全自定义 pin 的显示/更新方式，但如果可能的话，我想避免这种情况，并简单地为图像属性的变化设置动画。

这可能吗，还是drawrect方法是我唯一的选择？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:39:52.933

计时器可用于在设定的时间间隔内更改图像属性，或者 - 您可以将注释视图子类化并将您自己的 uiimageview 添加到视图层次结构中，并将 uiimageview 作为属性公开。

# asp-classic - 托管在网络场上的经典 ASP 中的应用程序范围变量？

> ID：10147044
> 
> 赞同：1
> 
> 时间：2012-04-13T19:21:50.110
> 
> 标签：asp-classic, global-variables, web-farm

我在 global.asa Application_Start 事件中使用以下代码。我的问题是，由于我的经典 ASP 应用程序托管在网络场上，我是否需要做任何特别的事情才能使这个应用程序变量在网络场中可用？

```
Sub Application_OnStart
 companies.add "a", "Athens"
 companies.add "b", "Belgrade"
 companies.add "c", "Cairo"
 set Application("companies") = companies
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T15:03:55.363

假设：

1.  您只是忘记显示对象实例的声明和分配给`companies`变量。
2.  该对象是自由线程的，但具有使对象中的`Application`对象可用所需的 STA 编组代理。
3.  您只需使用缓存数据加载此对象以提高性能。即，您不希望在处理请求期间对其进行更新，并使该数据可用于后续请求。

如果上述假设都是正确的，那么您就可以开始了。如果有任何错误，则说明您有问题。

如果您对前两个有问题，那么无论有没有网络农场都有问题，因此您应该能够在分解之前对其进行测试。

如果您对第三个假设有疑问，那么您将需要后备数据库和其他一些管道的帮助。

# c# - 读取\写入文件的正确方法：大量使用的应用程序

> ID：10147055
> 
> 赞同：2
> 
> 时间：2012-04-13T19:22:23.103
> 
> 标签：c#, asp.net, .net, protobuf-net

我们有一个大量使用的 .Net 3.5 应用程序，它读取“创建成本高”的数据并将其缓存。应用程序基于它而不是“被另一个进程使用”来读取\写入文件。如果其他进程正在读取和写入文件，则应用程序进入睡眠状态（一段时间）并重试。这是读写文件的正确方法吗？请指教。

```
public void Add<T>(string key, CacheItem<T> item)
        {
            bool fileInUse = false;
            while (!fileInUse)
            {
                try
                {
                    using (Stream stream = new FileStream(Path.Combine(cachePath, key+".bin"), FileMode.Create, FileAccess.Write, FileShare.None))
                    {
                        Serializer.NonGeneric.Serialize(stream, item);
                    }
                    fileInUse = true;
                }
                catch (IOException ex)
                {
                    if (ex.Message.Contains("being used by another process"))
                    {
                        //Poll till the file is free to be used by this process
                        Thread.Sleep(100);
                        fileInUse = false;
                    }
                }
            }            
        }        

public CacheItem<T> Get<T>(string key, Type type)
        {
            CacheItem<T> item = null;

            FileInfo fileInfo = new FileInfo(Path.Combine(cachePath, key+".bin"));
            fileInfo.Refresh();
            if (fileInfo.Exists)
            {
                bool fileInUse = false;
                while (!fileInUse)
                {
                    try
                    {
                        using (Stream stream = new FileStream(fileInfo.FullName, FileMode.Open, FileAccess.Read, FileShare.None))
                        {
                            object objectTemp = Serializer.NonGeneric.Deserialize(type, stream);
                            item = (CacheItem<T>)objectTemp;
                        }
                        fileInUse = true;
                    }
                    catch(IOException ex) 
                    {
                        if (ex.Message.Contains("being used by another process"))
                        {
                            //Poll till the file is free to be used by this process
                            Thread.Sleep(100);
                            fileInUse = false;
                        }
                    }
                }               
            }                       
            return item;                                   
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:25:44.713

您可以在其上添加一个**全局**互斥锁，以避免等待超过绝对必要的时间。

全局互斥体是通过将非空值传递`name`给[Mutex Constructor](http://msdn.microsoft.com/en-us/library/f55ddskf.aspx)来创建的。

好处：

*   Mutex 将允许您在文件可用后立即唤醒，而不是平均等待 50 毫秒。
*   互斥锁让你睡**一次**醒**一次**，而不是反复睡觉/醒来。休眠的线程由操作系统非常有效地处理并且几乎不消耗任何资源。
*   获得互斥锁后，打开文件几乎 100% 可能成功，而不是在成功之前可能多次失败。

总而言之，您不仅会*更快*，而且在此过程中可能会消耗*更少的 CPU 周期*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:33:28.997

如果这是您经常做的事情（因此性能是一个问题），我会建议完全不同的设计。

您应该有一个公共静态方法（或单例中的方法），它接受一个字符串（如果这适用于多个文件，还有一个文件名）。在该方法中，它应该将该字符串放入`BlockingCollection<string>`. `Dictionary<string, BlockingCollection<string>>`（通过将文件名映射到该文件的队列，您可以只有一个，或每个文件一个。）

在大多数情况下（即缓冲区未满），想要将某些内容写入文件的任务只需将其添加到队列中，然后立即恢复工作。

然后，您需要有一个单独的线程/任务，它只是坐在那里从阻塞集合中读取（您应该只需要一个，即使您有很多阻塞集合）并将数据写入文件。由于只有一个线程写入文件，因此不需要围绕文件 IO 进行锁定，并且`BlockingCollection`旨在在此生产者/消费者模型中工作，并为您处理所有需要的锁定。

我建议`BlockingColleciton`对所有文件只使用一个，除非您找到一个令人信服的性能理由来尝试处理多个队列。管理起来会容易一些。

# java - 带有负前瞻的 Java 正则表达式

> ID：10147060
> 
> 赞同：0
> 
> 时间：2012-04-13T19:22:44.073
> 
> 标签：java, regex, lookahead, negative-lookahead, regex-lookarounds

我在用 Java 编写正则表达式来解析日志文件中的信息时遇到了一些麻烦。

我有一个字符串，其中结构“timeinstant：一些带有任何字符的字符串”重复了 1 到 N 次。

timeinstant 的格式为“dd/mm/yyyy hh:MM:ss:MMMMMM”（M 为微秒）。

我正在尝试做的是找到传入字符串中包含的最后一个 timeinstant 的微秒。

例如，使用字符串

```
] 2012/04/02 16:28:51:861819: abcdefg : lwersdgsdg remote=xx.xxx.xx.xxx:yyy3f] accepted and identified as: John 2012/04/02 16:28:51:862987: pump: Received data on connection {John} [ 
```

我想 `m.find()`指出`"987: pump..."`。为了得到这个，我使用带有前瞻的正则表达式：

`"(\\d{3}:)(?!\\d{4}/\\d{2}/\\d{2}\\s\\d{2}:\\d{2}:\\d{2}:\\d{6})"`

但是现在`m.find()`指向`819`（包含在`2012/04/02 16:28:51:861819`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:41:54.703

您的正则表达式非常接近您需要的。

在您的负面外观中，您只是忘记了不同的时间戳由几个字符分隔。所以你必须在你的前瞻中添加`.+`or`.*`来指定它。

这是您需要的正则表达式：

```
"(\\d{3}):(?!.+\\d{4}/\\d{2}/\\d{2}\\s\\d{2}:\\d{2}:\\d{2}:\\d{6})" 
```

在您的示例中，它将为您提供您正在寻找的“987”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:30:25.553

如果您只对最后出现的三个数字后跟冒号感兴趣，那`.*(\d{3}:)`行不通？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:30:05.303

你为什么不直接使用

`(\\d{3}: \\w+)`

然后使用 find.next() 直到没有下一个？

# c# - 如何在 asp.net mvc 中创建 DataType.DropDownList 属性

> ID：10147067
> 
> 赞同：1
> 
> 时间：2012-04-13T19:23:07.397
> 
> 标签：c#, asp.net-mvc, attributes, data-annotations

我不想使用/创建扩展助手，例如：

`@Html.EnumDropDownListhtmlHelper(...)`

我的 ViewModel 应该确定它是如何呈现的，而不是视图！

`DataType`属性没有`DropDownList`。

如何在 asp.net mvc 4.0 中创建一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:43:22.457

我完全不同意-您的模型用于表示您的数据和数据访问层，以及用于持久化该数据的任何业务逻辑。您的 DAL 应该可以转移到 MVC 以外的任何其他应用程序（例如 WPF 应用程序）。

您的视图和使用的 HTML 应该决定您的数据如何呈现，而不是模型。

因此，您的 HTML Helper 将处理您的 DropDownList ( `HTML.DropDownListFor`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:44:32.110

您可以创建 EditorTemplate 以使用该**@Html.EnumDropDownListhtmlHelper(...)** 然后您需要使用 UIHint 属性装饰您的模型枚举属性并传递 EditorTemplate 的名称，因为没有 DataType.DropDownList 属性。

# encryption - javax.crypto.IllegalBlockSizeException 的可能原因

> ID：10147072
> 
> 赞同：1
> 
> 时间：2012-04-13T19:23:32.560
> 
> 标签：encryption, amazon-s3, cryptography, checksum

我正在使用亚马逊 S3 存储文件。在存储时，我正在动态加密流。再次在下载时，我即时解密流。此设置运行良好，但有时我会遇到以下异常-

**javax.crypto.IllegalBlockSizeException：使用填充密码解密时，输入长度必须是 16 的倍数**

发生此错误的可能原因是什么。上传/下载过程中的数据损坏是可能性之一吗？如果是，仅当填充字节损坏或文件中的任何字节损坏时才会发生这种情况吗？

[编辑] 但奇怪的是存储在 S3 中的文件大小是正确的，它不像只存储了一半的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:53:38.397

是的。您最有可能收到部分文件。您应该能够检查连接是否在完成之前中止。为确保您获得完整的、未更改的文件，请添加 (H)MAC 或使用具有完整性验证的密码模式（例如 GCM）。

[编辑]：不，这个*特定*的解密异常应该只在完整文件不可用时发生，而不是在文件本身损坏时发生。接收时更好地检查文件处理（忘记关闭流或删除部分文件）。

# android - 显示短信通知

> ID：10147074
> 
> 赞同：0
> 
> 时间：2012-04-13T19:23:50.203
> 
> 标签：android, notifications, sms

我编写了一个假短信发件人，插入后无法显示短信通知，

我使用此代码插入短信：

```
ContentValues values = new ContentValues();
values.put("address", "123456");
values.put("body", "Test !");
values.put("status", -1);
values.put("date", String.valueOf(System.currentTimeMillis()));
getContentResolver().insert(Uri.parse("content://sms/inbox"), values); 
```

并测试了此代码，但电子邮件应用程序返回强制关闭：

```
Intent a = new Intent("android.provider.Telephony.SMS_RECEIVED");
byte[] by =(byte[])(SmsMessage.getSubmitPdu("123456", "123456", "Test !", false).encodedMessage);
Object[] vrs = {by};
a.putExtra("pdus",vrs);
sendBroadcast(a); 
```

# django - 如何使用 Tastypie 按相关模型属性过滤 API 结果？

> ID：10147075
> 
> 赞同：3
> 
> 时间：2012-04-13T19:23:54.943
> 
> 标签：django, tastypie

鉴于以下 API 定义，我需要能够按产品别名过滤事件。

鉴于 Event 属于 Job 并且 Job 属于 Product 我不确定如何指定。

api.py：

```
class ProductResource(ModelResource):

    class Meta:
        queryset = Product.objects.all()
        resource_name = 'product'
        allowed_methods = ['get']
        excludes = ['created_at','updated_at']
        filtering = {
            'alias': ALL
        }

class EnvironmentResource(ModelResource):

    class Meta:
        queryset = Environment.objects.all()
        resource_name = 'environment'
        allowed_methods = ['get']
        excludes = ['created_at','updated_at']

class JobResource(ModelResource):

    product = fields.ForeignKey(ProductResource, 'product')

    class Meta:
        queryset = Job.objects.all()
        resource_name = 'job'
        allowed_methods = ['get']
        excludes = ['created_at','updated_at']

class EventResource(ModelResource):

    environment = fields.ForeignKey(EnvironmentResource, 'environment',full=True)
    job = fields.ForeignKey(JobResource, 'job',full=True)

    class Meta:
        queryset = Event.objects.all()
        resource_name = 'event'
        allowed_methods = ['get']
        excludes = ['created_at','updated_at']
        filtering = {
            HOW DO I FILTER BY PRODUCT ALIAS????
        } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-16T10:36:40.573

给定以下过滤规格：

```
# In EventResource
filtering = { 
   'job' : ALL_WITH_RELATIONS
}

# In JobResource
filtering = { 
   'product' : ALL_WITH_RELATIONS
}

# In ProductResource
filtering = {
    'alias' : ALL
} 
```

你应该能够做到：

```
/api/events/job__product__alias=something 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-21T04:42:59.673

实现此目的的一种简单方法是使用[高级过滤](http://django-tastypie.readthedocs.org/en/latest/resources.html#advanced-filtering)。这避免了很多由tastepie ForeignKey 字段生成的查询。为安全起见，请记住在将数据添加到`orm_filters`.

```
class EventResource(ModelResource):

    class Meta:
        queryset = Event.objects.all()
        resource_name = 'event'
        allowed_methods = ['get']

    def build_filters(self, filters=None):

        if filters is None:
            filters = {}

        orm_filters = super(EventResource, self).build_filters(filters)

        # Your filtering
        if 'job__product__alias' in filters:
            orm_filters['job__product__alias'] = filters.get(
                'job__product__alias')

    return orm_filters 
```

他们应该能够得到过滤后的结果：

```
/api/events/?job__product__alias=something 
```

# c++ - 关于 C++ 返回语句/Win32 API

> ID：10147077
> 
> 赞同：-1
> 
> 时间：2012-04-13T19:24:10.233
> 
> 标签：c++, winapi

我一直在看这里的教程：http: [//msdn.microsoft.com/en-us/library/bb384843.aspx](http://msdn.microsoft.com/en-us/library/bb384843.aspx)，但我在某一点上真的很困惑。

```
MSG msg;
while (GetMessage(&msg, NULL, 0, 0))
{
    TranslateMessage(&msg);
    DispatchMessage(&msg);
}

return (int) msg.wParam; 
```

我不知道他们在那里返回做什么。我知道 return 只适用于一个值。为什么有2个东西？我看过其他教程，他们似乎都在使用`return msg.wParam;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:25:52.337

它将值`msg.wParam`转换为 int。正如您在函数声明中看到的：

```
int WINAPI WinMain(HINSTANCE hInstance,
               HINSTANCE hPrevInstance,
               LPSTR lpCmdLine,
               int nCmdShow) 
```

返回类型是`int`. 我不确切知道该属性的类型是什么`wParam`，但它可能不是一个`int`，所以它必须显式地转换为一个 int 或者它不会编译。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:28:46.813

该代码可能是返回`int`. 由于`msg.wParam`不能隐式转换为`int`，因此需要显式转换。它基本上相当于：

```
int ret = (int)msg.wParam;
return ret; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:32:27.080

*为什么有2件事*

没有两件事：只有变量（类型 为 a ）的`wParam`字段转换为。`msg``MSG``struct``int`

# python - 禁用所有 scons 警告

> ID：10147079
> 
> 赞同：2
> 
> 时间：2012-04-13T19:24:22.277
> 
> 标签：python, build, scons

这应该非常简单。

我在这里找到了手册页：[http ://www.scons.org/doc/HTML/scons-man.html](http://www.scons.org/doc/HTML/scons-man.html)

直接从它说：

```
--warn=all, --warn=no-all     // Enables or disables all warnings. 
```

所以我输入：

```
scons --warn=no-all 
```

而且我在构建时仍然收到一百万条警告。我一定是在搞砸一些简单得可笑的事情=\

在我的终端用完历史之前，我得到了几百个：

```
warning: deprecated conversion from string constant to 'char*' 
```

编辑：发现问题！！这是一个 C/C++ 项目，所以我需要的代码是：

```
 env.Append(CCFLAGS=["-Wno-write-strings"]) 
```

我有什么：

```
 env.Append(CFLAGS=["-Wno-write-strings"]) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T19:27:54.600

您收到的警告来自您的编译器，而不是来自 Scons 本身。Scons 本身并没有太多警告。该`--warn=`开关仅适用于 Scons。

您需要做的是将适当的编译器标志传递给您的编译器以关闭您不想要的警告。您可以使用`CCFLAGS`环境值执行此操作：

```
env.Append(CCFLAGS=["-Wno-write-strings"]) 
```

`CCFLAGS`将该行应用于 C 和 C++ 目标。

上面的标志是用于 Gcc 的。

# android - Android - 更改值并保存它们

> ID：10147087
> 
> 赞同：1
> 
> 时间：2012-04-13T19:25:04.103
> 
> 标签：android, save

我想让我的应用程序的用户决定更改字体和文本大小。但是，如果用户更改它，我该如何保存它，所以 Textsize 或字体设置为默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:27:35.083

使用 SharedPreferences

保存更改 阅读创建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:34:10.587

您可以在首选项中保存用户选择

```
SharedPreferences sPref;
sPref = getPreferences(MODE_PRIVATE);
Editor ed = sPref.edit();
String putString = myEdText.getText().toString(); //users choice
ed.putString("SAVED_TEXT", putString);
ed.commit(); 
```

然后从中读取

```
sPref = getPreferences(MODE_PRIVATE);
String savedText = sPref.getString("SAVED_TEXT", "");

and then dinamicly change properties of TextView
TextView myTextView = (TextView)fidViewByid(...); 
myTextView.setTextSize(Float.valueOf(putString)); 
```

您还可以将数据保存到本地数据库（sql lite）； [http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)

# knockout.js - KnockoutJS - 使用条件语句计算的 observables 如何工作

> ID：10147088
> 
> 赞同：11
> 
> 时间：2012-04-13T19:25:11.403
> 
> 标签：knockout.js

KnockoutJS 有计算 observables 的概念，它是依赖于一个或多个 observables 的函数。Knockout 能够[确定计算的 observable 的依赖关系，如文档中所述](http://knockoutjs.com/documentation/computedObservables.html)：

> 每当你声明一个计算的 observable 时，KO 立即调用它的求值函数来获取它的初始值。当您的评估器功能运行时，KO 会记录您的评估器读取其值的任何可观察对象（或计算的可观察对象）。

现在，我不明白的是，如果您的计算 observable 包含条件逻辑，这是如何工作的。如果 Knockout 调用 evaluator 函数，那么条件逻辑肯定会导致函数所依赖的 observables 未被调用吗？

我创建了这个小提琴来测试：

[http://jsfiddle.net/bJK98/](http://jsfiddle.net/bJK98/)

```
var ViewModel = function(first, last) {
    this.firstName = ko.observable(first);
    this.lastName = ko.observable(last);
    this.condition = ko.observable(false);

    // at the point of evaluation of this computed observabled, 'condition'
    // will be false, yet the dependecy to both firstName and lastName is
    // identified
    this.fullName = ko.computed(function() {
        return this.condition() ? this.firstName() : this.lastName();
    }, this);
}; 
```

但是，不知何故，Knockout 正确地识别出对两者的依赖关系`firstName`和`lastName`。

谁能解释一下如何？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-13T19:56:12.463

每次重新评估dependentObservable 时都会再次跟踪依赖关系。因此，如果您有条件逻辑，那么未命中的分支将不会对依赖项做出贡献。

在您的小提琴中，如果您编辑`firstName`，那么在您切换 之前，该值不会更新`condition`。此时，`lastName`不再是依赖项，因此对它的更改不会触发dependentObservable。

它并不比原始描述更复杂。要记住的基本事项是每次重新评估时都会记录依赖关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-02T04:55:30.983

在淘汰赛中，依赖项是通过它的单个跟踪器变量来跟踪的`ko.dependencyDetection`。

1.  因此，每当您声明一个计算变量时，Knockout 都会立即调用它的求值函数来获取它的初始值和依赖关系。
2.  因此，在第一次调用期间，它将注册它的依赖项`lastName`和`condition`变量。
3.  现在，每当`lastName`更改时，它都会更新它的所有依赖值。
4.  每当`condition`更改时，它将再次运行它的评估器功能并更新所有依赖项。所以它将添加`firstName`为依赖项并删除`lastName`。

所以，这就是依赖跟踪在淘汰赛中的工作方式。

# java - 在 JSF 1.2 自定义组件中指定验证器

> ID：10147090
> 
> 赞同：1
> 
> 时间：2012-04-13T19:25:23.680
> 
> 标签：java, lifecycle, validation, custom-component, jsf-1.2

我已经通过自定义验证器定义（实现 javax.faces.validator.Validator 接口并在 faces-config 中定义）。我需要我的自定义组件在我的组件代码（ Renderer 类）中调用此验证器。我想让我的 xhtml 尽可能干净，并且不想通过嵌入在我的 xhtml 中单独调用验证器

```
<f:validator validatorId='xx' /> 
```

在我的组件标签中。就像我如何实施

```
getConvertedValue(FacesContext context, UIComponent component, Object submittedValue) 
```

在我的渲染器中处理转换，我可以做一些类似的事情来处理渲染器中的验证吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:37:21.800

这是在 UI 组件级别完成的，而不是在渲染器级别。您的自定义输入组件肯定已经扩展[`UIInput`](http://docs.oracle.com/javaee/5/api/javax/faces/component/UIInput.html)，否则您会遇到许多其他（未来）问题和/或您将浪费时间编写重复的代码。如果您的自定义输入组件 extends `UIInput`，那么您只需在组件的构造函数中添加`Validator`继承[`UIInput#addValidator()`](http://docs.oracle.com/javaee/5/api/javax/faces/component/UIInput.html#addValidator%28javax.faces.validator.Validator%29)方法即可。

```
public MyCustomInputComponent() {
    addValidator(new MyCustomValidator());
} 
```

已经实现的[`UIInput#validate()`](http://docs.oracle.com/javaee/5/api/javax/faces/component/UIInput.html#validate%28javax.faces.context.FacesContext%29)方法将自动完成所有转换、验证和消息处理。

# c# - DotNetNuke - 动态加载的子控件上的事件未触发

> ID：10147093
> 
> 赞同：3
> 
> 时间：2012-04-13T19:25:51.250
> 
> 标签：c#, asp.net, user-controls, module, dotnetnuke

我正在创建一个站点遍历模块，该模块将在不同页面上动态加载不同的控件。由于某些原因，子控件上的事件没有触发。

主视图

```
<%@ Control language="C#" Inherits="DotNetNuke.Modules.SiteWalkthrough.View" AutoEventWireup="false"  Codebehind="View.ascx.cs" %>
<%@ Register Src="/DesktopModules/SiteWalkthrough/Controls/Start.ascx" TagPrefix="sw" TagName="start" %>

<asp:MultiView ID="MultiView" runat="server">
    <asp:View ID="mvStart" runat="server">
        <sw:start ID="ucStart" runat="server"></sw:start>
    </asp:View>
</asp:MultiView> 
```

主视图代码隐藏

```
namespace DotNetNuke.Modules.SiteWalkthrough
{
    public partial class View : SiteWalkthroughModuleBase, IActionable
    {
        override protected void OnInit(EventArgs e)
        {
            InitializeComponent();
            base.OnInit(e);
        }

        private void InitializeComponent()
        {
            this.Load += new System.EventHandler(this.Page_Load);
        }

        private void Page_Load(object sender, System.EventArgs e)
        {
            MultiView.SetActiveView(mvStart);
        }
    }
} 
```

用户控制

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="Start.ascx.cs" Inherits="DotNetNuke.Modules.SiteWalkthrough.Controls.Start" %>

<div>
    <span>Welcome!</span>
    <span><asp:Button ID="btnNext" runat="server" Text="Okay" CssClass="btnNext" OnClick="btnNext_Click" /></span>
</div> 
```

用户控制代码隐藏

```
namespace DotNetNuke.Modules.SiteWalkthrough.Controls
{
    public partial class Start : PortalModuleBase
    {
        protected void Page_Load(object sender, EventArgs e) {}

        protected void btnNext_Click(object sender, EventArgs e) 
        {
            // this event never fires
        }
    }
} 
```

此代码适用于标准 ASP.NET 项目，但不适用于 DotNetNuke。我是否必须在主视图的 OnInit 中手动注册事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-16T03:44:14.983

我在这里尝试一下，但我的猜测是您需要在 _init 而不是控件的 _load 中绑定控件和事件。这与页面生命周期有关。

我将关闭控件中的“AutoEventWireup”并手动显式编码所有事件绑定。

# java - 使用 TCP 通过网络传输文件（加速传输）

> ID：10147094
> 
> 赞同：2
> 
> 时间：2012-04-13T19:25:51.687
> 
> 标签：java, performance, sockets, networking

我一直在尝试通过`Socket`连接发送一个大文件，但它运行缓慢，我想知道是否可以通过某种方式优化此代码以提高传输速度。

这是我发送文件的代码：

```
byte[] buffer = new byte[65536];
int number;

while ((number = fileInputStream.read(buffer)) != -1) {
    socketOutputStream.write(buffer, 0, number);
}

socketOutputStream.close();
fileInputStream.close(); 
```

这是我用来在另一台机器上接收文件的方法：

```
byte[] buffer = new byte[65536];

InputStream socketStream= clientSocket.getInputStream();
File f=new File("C:\\output.dat");

OutputStream fileStream=new FileOutputStream(f);

while ((number = socketStream.read(buffer)) != -1) {
    fileStream.write(buffer,0,number);
}

fileStream.close();
socketStream.close(); 
```

我认为写入 fileStream 占用了大部分时间。任何人都可以提供任何建议来加快此代码的速度。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T19:31:56.570

除了缺少语句`finally`块之外，该代码没有任何明显错误。`close`

多少数据需要多长时间？这不太可能`FileOutputStream`是花费时间的原因 - 更有可能是网络速度缓慢。您*可能*会从网络读取并并行写入文件系统，但这需要大量工作才能正确完成，而且不太可能带来那么多好处，IMO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T03:16:33.640

您可以在 FileOutputStream 周围尝试 BufferedOutputStream。无论您从网络读取的计数如何，它都会对所有磁盘写入产生块对齐的效果。我不认为会有很大的不同，但它可能会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-11T07:42:27.437

我在 FTP 处理大文件时遇到了类似的问题。我意识到使用相同的缓冲区从硬盘读取和写入网络是问题所在。文件系统 IO 喜欢更大的缓冲区，因为硬盘驱动器完成所有查找和读取的工作要少得多。另一方面，网络更喜欢使用较小的缓冲区来优化吞吐量。

**解决方案是使用大缓冲区从硬盘读取，然后将该缓冲区以较小的块写入网络流。**

对于任何具有 4mb 读取和 32kb 写入的文件的整个长度，我能够以 100% 的利用率最大化我的 NIC。然后，您可以通过一次读取 32kb 并将其存储在内存中，然后一次将 4mb 写入硬盘驱动器来在服务器上执行镜像版本。

# google-app-engine - 我可以在我的 GAE 应用程序中自定义访问日志吗？

> ID：10147106
> 
> 赞同：0
> 
> 时间：2012-04-13T19:26:43.383
> 
> 标签：google-app-engine

Google App Engine 将每个 HTTP 请求记录在与我过去在 Apache HTTP 或 Tomcat 中看到的类似的行中。以下是日志中的一行：

`198.138.224.81 - - [13/Apr/2012:12:15:05 -0700] "GET /page/1 HTTP/1.1" 200 4290 "http://APP-ID.appspot.com/add/1" "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:11.0) Gecko/20100101 Firefox/11.0" "3.APP-ID.appspot.com" ms=28 cpu_ms=210 api_cpu_ms=187 cpm_usd=0.006356 instance=01cb1aaa653f13c0586eac9964cc136`

是否可以在日志中添加更多内容？[在我的特殊情况下，我的应用程序向BASIC authentication](http://en.wikipedia.org/wiki/Basic_access_authentication)发出了一个挑战，它向 HTTP 请求添加了一个标头，我想记录它。

如何自定义日志以包含来自 HTTP 请求的此标头？

我的应用程序是用 Java 编写的，如果有帮助的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:32:50.387

当然 App Engine[支持日志记录](https://developers.google.com/appengine/docs/java/runtime#Logging)：

```
public class MyServlet extends HttpServlet {
    private static final Logger log = Logger.getLogger(MyServlet.class.getName());

    public void doGet(HttpServletRequest req, HttpServletResponse resp)
        throws IOException {

        log.info("Header your-header-name="+req.getHeader("your-header-name"));
    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T04:39:52.787

没有自定义默认日志的工具。[我在问题跟踪器](http://code.google.com/p/googleappengine/issues/list)上看不到它的功能请求。提交一个，看看它是否有一些吸引力。

# android - 将解析的 Json 数据更新到 Listview

> ID：10147107
> 
> 赞同：4
> 
> 时间：2012-04-13T19:26:47.663
> 
> 标签：android, json, android-listview

我一直在尝试将解析的 Json 数据存储到 Listview 中，但它不起作用。

我从服务器检索了一些数据（以表格的形式），然后将其解析为 Json 对象。整个代码运行良好。当我在我的 android 活动中使用“Toast”时，它会显示检索到的数据。请帮我将解析后的数据存储在 Listview 中。

## 这是我的代码

```
public void clickbutton(View v) {
        try {

            // Log.i(getClass().getSimpleName(), "send  task - start");
            HttpParams httpParams = new BasicHttpParams();
            HttpConnectionParams.setConnectionTimeout(httpParams,
                    TIMEOUT_MILLISEC);
            HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC);
            //
            HttpParams p = new BasicHttpParams();
            // p.setParameter("name", pvo.getName());
            p.setParameter("user", "1");

            // Instantiate an HttpClient
            HttpClient httpclient = new DefaultHttpClient(p);
            String url = "http://bhavit.xtreemhost.com/webservice1.php?user=1&format=json";
            HttpPost httppost = new HttpPost(url);

            // Instantiate a GET HTTP method
            try {
                Log.i(getClass().getSimpleName(), "send  task - start");
                //
                List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(
                        7);
                nameValuePairs.add(new BasicNameValuePair("details", "1"));

                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                ResponseHandler<String> responseHandler = new BasicResponseHandler();
                String responseBody = httpclient.execute(httppost,
                        responseHandler);
                // Parse
                JSONObject json = new JSONObject(responseBody);
                JSONArray jArray = json.getJSONArray("posts");
                ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

                for (int i = 0; i < jArray.length(); i++) {
                    HashMap<String, String> map = new HashMap<String, String>();
                    JSONObject e = jArray.getJSONObject(i);
                    String s = e.getString("post");
                    JSONObject jObject = new JSONObject(s);

                    map.put("time", jObject.getString("time"));
                    map.put("latitude", jObject.getString("latitude"));
                    map.put("longitude", jObject.getString("longitude"));

                    mylist.add(map);

                }
                Toast.makeText(this, responseBody, Toast.LENGTH_LONG).show();
                **String[] columns = new String[] { "Time", "Latitude", "Longitude" };
                int[] renderTo = new int[] { R.id.time, R.id.latitude, R.id.longitude };

                ListAdapter listAdapter = new SimpleAdapter(this, mylist, R.layout.geo_ponts_list, columns, renderTo);
                setListAdapter(listAdapter);**

            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            // Log.i(getClass().getSimpleName(), "send  task - end");

        } catch (Throwable t) {
            Toast.makeText(this, "Request failed: " + t.toString(),
                    Toast.LENGTH_LONG).show();
        }

    }

    private void setListAdapter(ListAdapter listAdapter) {
        // TODO Auto-generated method stub

    }

    public class Data {
        // private List<User> users;
        public List<details> users;

        // +getters/setters
    }

    static class details {
        String latitude;
        String longitude;
        String time;

        public String Longitude() {
            return longitude;
        }

        public String Latitude() {
            return latitude;
        }

        public String Time() {
            return time;
        }

        public void setUserName(String value) {
            longitude = value;
        }

        public void setidusers(String value) {
            latitude = value;
        } 
```

* * *

没有错误，但活动没有显示 Listview 中的值，但可以使用 Toast 看到值。！ [使用 Toast 输出活动](http://i.stack.imgur.com/vQlWR.jpg)

## **这是我的 geo_ponts_list.xml 文件**

```
<TextView android:id="@+id/time"
     android:textSize="16sp"
     android:textStyle="bold"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"/>

 <TextView android:id="@+id/latitude"
     android:textSize="16sp"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"/>

 <TextView android:id="@+id/longitude"
     android:textSize="16sp"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"/> 
```

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-17T05:43:05.600

首先要提的一点：

再次检查您的 HashMap 是否获得正确的值，

将您的值记录在您的 for 循环中，例如`Log.i("item",jObject.getString("time"));`

第二件事是自己`custom list Adapter`上课，

**[使用与您相同的示例](http://saigeethamn.blogspot.in/2010/04/custom-listview-android-developer.html)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-21T03:57:42.663

我试了一下你的代码，正如 Quenton 所说，是大小写问题导致列表视图不显示任何内容。

```
**String[] columns = new String[] { "Time", "Latitude", "Longitude" };
            int[] renderTo = new int[] { R.id.time, R.id.latitude, R.id.longitude };

            ListAdapter listAdapter = new SimpleAdapter(this, mylist, R.layout.geo_ponts_list, columns, renderTo);
            setListAdapter(listAdapter);** 
```

您应该修改 columns 变量以使值以小型大写字母表示。它对我有用。

```
String[] columns =  new String[] {"time", "latitude', 'longitude'}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T19:32:19.043

您使用的 SimpleAdapter 似乎应该区分大小写？您将“时间”、“纬度”和“经度”作为列传递，但您的 JSON 对象包含“时间”、“纬度”和“经度”。

# methods - Cocos2D：无法调用父类中的方法

> ID：10147113
> 
> 赞同：0
> 
> 时间：2012-04-13T19:27:17.567
> 
> 标签：methods, cocos2d-iphone, call, parent, scene

在我的场景中，我有

//。H

```
#import "cocos2d.h"

#import "FixedBackground.h"
@class FixedBackground;

#import "JoinedMapsLayer.h"
@class JoinedMapsLayer;

@interface JoinedMapsScene : CCScene {

    FixedBackground *fixedBackground;
    JoinedMapsLayer *joinedMapsLayer;

}

@property(nonatomic, retain) FixedBackground *fixedBackground;
@property(nonatomic, retain) CCNode *joinedMapsLayer;

+(id) scene;

- (void) moveBG:(float)x andY:(float)y;
- (int) getInt;

@end 
```

//.m

```
#import "JoinedMapsScene.h"

@implementation JoinedMapsScene

@synthesize fixedBackground;
@synthesize joinedMapsLayer;

+(id) scene {

    // 'scene' is an autorelease object.
    CCScene *scene = [CCScene node];

    // 'layers' are an autorelease object.
    JoinedMapsScene *layer1 = [JoinedMapsScene node];

    // add layers as a childs to scene
    [scene addChild: layer1];

    return scene;
}

-(id) init {

    if( (self=[super init] )) {

        fixedBackground = [FixedBackground node];
        joinedMapsLayer  = [JoinedMapsLayer node];

        // add layers as a children of the scene
        [self addChild:fixedBackground];
        [self addChild:joinedMapsLayer];

    }
    return self;
}

- (int)getInt {
    return 100;
}

- (void) dealloc{

    [super dealloc];
}

@end 
```

在joinedMapsLayer init 方法中，我尝试调用getInt 并返回它的值100，但它返回0：

NSLog(@"%d",[(JoinedMapsScene*)self.parent getInt]);

任何线索为什么会发生这种情况？我的场景写错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T22:55:06.697

在您调用 时`[JoinedMapsLayer node]`，您尚未添加`joinedMapsLayer`为 的实例的子级`JoinedMapsScene`，因此它没有父级。

# asp.net - 用于 ASP.NET 的 IIS 6.0 上的默认用户

> ID：10147115
> 
> 赞同：1
> 
> 时间：2012-04-13T19:27:23.900
> 
> 标签：asp.net, iis, iis-6

我收到一个错误，由于权限，我无法写入我的临时文件夹之一。我正在使用 IIS 6.0 和 ASP.NET 3.5，并且我已将写入权限设置为 [COMPUTERNAME]\ASPNET 但仍然没有。如果我将用户设置为具有完全控制权的所有人，它可以工作，但出于安全原因不能这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:47:02.840

IIS_User 是您必须授予权限的用户名

# iphone - 将 CALayer 添加到 UIView 并能够在方向更改时重绘

> ID：10147118
> 
> 赞同：3
> 
> 时间：2012-04-13T19:27:41.437
> 
> 标签：iphone, ios, uitableview, uiview, core-graphics

我有一个分配给`backgroundView`UITableVieCell 的 UIView 子类。在我的 UIView 子类中，我在`initWithFrame:`方法中添加了 2 个 CALayers。

在方向改变时，单元格的高度会改变，我需要重新调整我的 CALayers 的位置；基本上重绘。

由于在方法中添加了 CALayers，`initWithFrame:`我无法通过调用重绘它们`setNeedsDisplay`。

我是使用 CALayers 的新手，不知道这样做的正确方法是什么。如何添加我的 CALayers 以让它们在方向更改/或任何可能改变一般尺寸的事件时重绘？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T17:43:27.460

实际上，更简单的方法是使用 KVO 来观察视图层边界属性的变化。

```
[self.layer addObserver:self forKeyPath:@"bounds" options:0 context:nil]; 
```

`-observeValueForKeyPath:ofObject:change:context:`然后在你的方法中做任何你需要的事情。

完成后不要忘记`removeObserver:self`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T20:52:19.427

在`UIView`子类中实现该`- (void)layoutSubviews;`方法。当视图的几何形状发生变化时，框架会调用它。您可以在那里对图层进行适当的更改。

在 CoreAnimation 中，如果您要对图层进行子类化，那么还有一个`layoutSublayers`方法。

希望这可以帮助。

# eclipse - 是否可以在没有 GUI 部分的情况下构建 Equinox + Eclipse 应用程序？

> ID：10147122
> 
> 赞同：3
> 
> 时间：2012-04-13T19:27:47.113
> 
> 标签：eclipse, osgi, equinox

我正在使用使用 Equinox 和 Eclipse 的[rodin 和 eventb 框架](http://www.event-b.org/)。我们现在正在修改它以支持我的研究团队的新功能，并且我们希望摆脱 GUI 部分（主要是为了能够避免编写 gui 代码并能够在远程服务器上启动繁重的计算）。我们成功地拥有了我们自己的代码包，并且只需要以下 Eclipse 和 Equinox 包（来自 Eclipse 版本 3.7.1）：

*   org.eclipse.ant.runtime
*   org.eclipse.core
*   org.eclipse.core.contenttype
*   org.eclipse.core.expressions
*   org.eclipse.core.jobs
*   org.eclipse.core.resources
*   org.eclipse.equinox
*   org.eclipse.osgi

以及 rodin 和 eventb 捆绑包：

*   org.rodinp.core
*   org.eventb.core
*   org.eventb.ast

在 osgi 容器启动过程中，创建了一个目录工作区，并报告了一些错误`.metadata/.log`，但似乎配置错​​误我可以修复...

问题：在没有 gui 的情况下尝试这样做是个好主意吗？恐怕要花很多时间来发现错误或无法运行整个集合。有没有人对这种配置有一些经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T06:36:28.350

如果您不需要 GUI，为什么要将它包含在您的应用程序中？您可以将 Maven 与[Tycho](http://www.eclipse.org/tycho/)一起用于无头构建 Eclipse 应用程序。

# asp.net - ASP.NET 身份验证要求登录默认页面

> ID：10147128
> 
> 赞同：0
> 
> 时间：2012-04-13T19:28:21.590
> 
> 标签：asp.net, webforms

我在我的 ASP.NET 项目中添加了身份验证表单。主页（在我的例子中是 default.aspx）不应该受密码保护，所以我在 web.config 中添加了这一行：

```
<location path="default.aspx">
<system.web>
  <authorization>
    <allow users="*" />
  </authorization>
</system.web> 
```

问题是当我输入 URL 时，比如[http://mywebapp.university.edu/](http://mywebapp.university.edu/)，我得到了登录页面。果然，如果我输入[http://mywebapp.university.edu/default.aspx](http://mywebapp.university.edu/default.aspx)。然后我无需提供任何凭据即可进入该页面。如果我输入为 default.aspx 页面提供的 URL 而无需在 url 上显式输入它，我该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:39:37.107

In IIS , go to website property as given in below link

```
http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/dc6eb1b4-9028-4308-9935-52b64edfad36.mspx?mfr=true 
```

Move up default.aspx page above the login page , save and test.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:30:42.203

每当用户直接访问`default`他将`verified`使用的页面时，`user.identity`如果不是，他将`redirected`访问`Login page`。

```
protected void Page_Load(object sender, EventArgs e)
{
     if (User.Identity.IsAuthenticated) // if the user is already logged in
     {
          Response.Redirect("~/Default.aspx");
     }
     else
     {    
          Response.Redirect("~/Login.aspx");
     }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-16T16:23:31.780

所以我在 Login.aspx 页面上想出了这个可怕的 hack：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (Request.QueryString["ReturnUrl"] == "/")
        {
            Response.Redirect("default.aspx");
        }
    } 
```

现在它起作用了。如果有人知道如何解决这个问题，我仍然接受答案，谢谢！

# c# - SelectList 不会接受我的 SelectListItem 对象

> ID：10147129
> 
> 赞同：0
> 
> 时间：2012-04-13T19:28:45.330
> 
> 标签：c#, asp.net-mvc-3

我试图用我的 ASP.NET 用户数据库的所有用户填充我的 Html.Listbox。

我创建了一个看起来像这样的 ViewModel：

```
using System;
using System.Collections.Generic;
using System.ComponentModel.DataAnnotations;
using System.Globalization;
using System.Web.Mvc;
using System.Web.Security;

namespace SkyLearn.Areas.Users.Models
{
public class UsersViewModel
    {
        MembershipUserCollection membershipuserscollection { get; set; }
        public List<MembershipUser> membershipuserslist { get; set; }
        public List<SelectListItem> AvailableUsers { get; set; }

        public UsersViewModel()
        {
            availableUsers = new List<SelectListItem>();
        }  
    }
} 
```

一个如下所示的 Actionresult：

```
 public ActionResult Index()
    {
        var users = Membership.GetAllUsers().Cast<MembershipUser>();

        UsersViewModel model = new UsersViewModel();

        foreach (MembershipUser user in users)
        {
            SelectListItem selectuser = new SelectListItem();

            selectuser.Text = user.UserName;
            selectuser.Value = user.UserName;

            model.AvailableUsers.Add(selectuser);
        }

        return View(model);
    } 
```

在我看来，我尝试像这样填充列表：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<SkyLearn.Areas.Users.Models.UsersViewModel>" %>

<%= Html.ListBox("AvailableUsers", Model.AvailableUsers)%> 
```

当我运行代码时，出现以下错误：

CS1579：foreach 语句无法对“SkyLearn.Areas.Users.Models.UsersViewModel”类型的变量进行操作，因为“SkyLearn.Areas.Users.Models.UsersViewModel”不包含“GetEnumerator”的公共定义

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:31:18.963

AvailableUsers 未初始化，例如，您可以在 ViewModel 的构造函数中执行此操作。

```
public class UsersViewModel
     {
     public UsersViewModel {
         AvailableUsers = new List<SelectListItem>();
     }
     MembershipUserCollection membershipuserscollection { get; set; }
     public List<MembershipUser> membershipuserslist { get; set; }
     public List<SelectListItem> AvailableUsers { get; private set; }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:07:09.050

问题是您使用与 ListBox 助手的第一个参数相同的名称作为视图模型 ( `AvailableUsers`) 上的属性。这是不正确的。第一个参数应该代表视图模型上的一个属性，该属性将用于将所选值绑定回来。对于 ListBox 助手，这应该是一个集合，因为用户可以选择多个值。对于 DropDownList 助手，这应该是一个简单的标量属性。第二个参数（在这两种情况下）表示`SelectListItem`将用于呈现可用选项的集合。

因此，让我们举一个例子来说明如何改进视图模型：

```
public class UsersViewModel
{
    public string[] SelectedUsers { get; set; }
    public IEnumerable<SelectListItem> AvailableUsers { get; set; }
} 
```

然后是控制器：

```
public ActionResult Index()
{
    var users = Membership.GetAllUsers().Cast<MembershipUser>();
    var model = new UsersViewModel
    {
        AvailableUsers = users.Select(x => new SelectListItem
        {
            Value = x.UserName,
            Text = x.UserName
        })
    };
    return View(model); 
} 
```

最后是视图：

```
<%@ Page 
    Title="" 
    Language="C#" 
    MasterPageFile="~/Views/Shared/Site.Master" 
    Inherits="System.Web.Mvc.ViewPage<UsersViewModel>" 
%>

<%= Html.ListBoxFor(x => x.SelectedUsers, Model.AvailableUsers) %> 
```

您会注意到，我已经摆脱了您最初在视图模型中拥有的`membershipuserscollection`和属性，这些属性在本示例中没有任何作用。`membershipuserslist`第一个是私有的，第二个是域模型 ( `MembershipUser`) 的集合，因此它在视图模型中绝对没有位置。

# javascript - IE中iframe内部的框架

> ID：10147131
> 
> 赞同：0
> 
> 时间：2012-04-13T19:28:48.340
> 
> 标签：javascript, html, iframe, frame

我有这个环境：

页1.html：

```
<iframe id="ifr" name="nifr" src="Page2.html" enableviewstate="true" width="800" height="600" frameborder="1" style="z-index:0" ><p>Su navegador no soporta iframes.</p></iframe> 
```

页面2.html：

```
<frameset rows="30,*" frameborder="no" framespacing="0">
    <frame id="titleFrame" frameborder="no" marginwidth="0" marginheight="0" scrolling="no" src="title.html">
    <frame id="viewerFrame" frameborder="no" marginwidth="0" marginheight="0" scrolling="no" src="anotherPage.html">
</frameset> 
```

如何使用 javascript 获取框架“viewerFrame”？我只在 Internet Explorer 上工作

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:56:38.590

首先，您将为`name`框架元素添加一个 - 属性。

```
<frameset rows="30,*" frameborder="no" framespacing="0">
<frame name="titleFrame" id="titleFrame" frameborder="no" marginwidth="0" marginheight="0" scrolling="no" src="title.html">
<frame name="viewerFrame" id="viewerFrame" frameborder="no" marginwidth="0" marginheight="0" scrolling="no" src="anotherPage.html">
</frameset> 
```

然后你可以从 Page1.html 试试这个：

`var viewerFrame=document.getElementById('ifr').contentWindow.viewerFrame;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:54:56.650

如果我理解您想要正确执行的操作，您可能正在搜索类似的内容：

```
$("#ifr").contentWindow.$("#viewerFrame").html(); 
```

# php - 这两个 PHP 错误是什么意思？我该如何解决它们？

> ID：10147133
> 
> 赞同：0
> 
> 时间：2012-04-13T19:29:00.497
> 
> 标签：php, permissions, ftp

我收到两个警告，有人可以帮助我更好地了解发生了什么吗？我正在做维护代码工作。

这是第一个 - 据我所知，这是一个许可问题 - 我将如何解决这个问题？我必须更改实际的服务器设置，对吗？

```
Warning: copy(../logos/web_democu.jpg) [function.copy]: failed to open stream: Permission denied in /home/kirby/public_html/members/upload_advanced.php on line 30 
```

这第二个似乎验证失败 - 我相信帐户信息可能必须直接写入页面，对吗？我将不得不对其进行修改以允许身份验证。

```
Warning: ftp_login() [function.ftp-login]: Login authentication failed in /home/kirby/public_html/members/upload_advanced.php on line 33
FTP connection has failed!Attempted to connect to for user 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:32:32.690

你在这两种情况下都是正确的。

对于第一个问题，您很可能必须找到它试图将内容复制到的目录，然后对其进行 chmod 以便复制成功。

第二个可能是密码（或用户名）不正确的情况。您可以通过转到错误中提到的文件并从那里跟踪错误来找到罪魁祸首。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:32:47.540

http 身份验证与第一个错误无关 - 您的网络服务器运行的用户 ID 根本无权在该 copy() 调用中读取源文件或写入目标文件。除非您对源和/或目标使用 URL，否则这纯粹是 LOCAL 文件操作，与用户登录您网站的方式无关。

FTP 错误也是如此 - 您很可能使用丢失或无效的凭据来登录 FTP 服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:33:00.013

第一个问题可能`upload_advance.php`是尝试写入的文件夹中的权限错误。如果您有权访问，您可以通过 FTP 或 SSH 在服务器上修复该问题。

第二个问题是 FTP 连接错误。login/pwd 可能是硬编码在 php 文件中的，看看吧！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T19:33:23.770

第一个确实是权限问题。运行此脚本的人无权从源读取或写入目标，*或者*目标不存在。

第二，看起来您没有指定用户。

# c# - 向 DevExpress GridView 添加行

> ID：10147139
> 
> 赞同：2
> 
> 时间：2012-04-13T19:29:19.017
> 
> 标签：c#, winforms, devexpress

有人可以帮我吗？当常规 GridView 如此简单时，为什么这会如此困难。

我正在尝试以编程方式添加行。在普通的 GridView 中，我只需调用 gridView.Rows 并从那里添加，但我在这里找不到该选项。

我尝试创建一个 DataTable，然后将其绑定到它，如下所示：

```
 DataTable dt = new DataTable();
        dt.Columns.Add("IP", Type.GetType("System.String"));
        dt.Columns.Add("Port", Type.GetType("System.String"));
        dt.Columns.Add("Username", Type.GetType("System.String"));
        dt.Columns.Add("Password", Type.GetType("System.String"));
        dt.Columns.Add("Working?", Type.GetType("System.Boolean"));

        for (int i = 0; i < 20; i++)
        {
                        DataRow dr = dt.NewRow();
                        dr[0] = "Test";
                        dr[1] = "Test";
                        dr[2] = "Test";
                        dr[3] = "Test";
                        dr[4] = true;
                        dt.Rows.Add(dr);
        }

        gcProxies.DataSource = dt; 
```

所有这一切都是在 GridControl 中添加空行。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T16:58:45.067

您的问题是您在设计器中创建了一个列，然后您的代码没有覆盖它。

除了将 DataTable 数据绑定到网格之外，您还可以包含未绑定的列，这些列可以显示任意数据或基于表达式显示数据。下面是创建未绑定列的基本示例：[如何：添加未绑定列](http://documentation.devexpress.com/#WindowsForms/CustomDocument3008)

在您的示例中，您可以在设置数据源后添加未绑定列：

```
gcProxies.DataSource = dt;

// Create an unbound column.
DevExpress.XtraGrid.Columns.GridColumn unbColumn = gridView1.Columns.AddField("Total");
unbColumn.VisibleIndex = gridView1.Columns.Count;
unbColumn.UnboundType = DevExpress.Data.UnboundColumnType.Decimal;
// Disable editing.
unbColumn.OptionsColumn.AllowEdit = false;
// Specify format settings.
unbColumn.DisplayFormat.FormatType = DevExpress.Utils.FormatType.Numeric;
unbColumn.DisplayFormat.FormatString = "c";
gridView1.CustomUnboundColumnData += gridView1_CustomUnboundColumnData; 
```

然后，这是填充未绑定列的事件：

```
 void gridView1_CustomUnboundColumnData(object sender,
               DevExpress.XtraGrid.Views.Base.CustomColumnDataEventArgs e)
    {
        if (e.Column.FieldName == "Total" && e.IsGetData) 
            e.Value = 100;
    } 
```

这些示例应该让您开始定制您的确切解决方案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T07:18:22.230

我遇到了与您类似的问题，我已经通过添加解决了

```
gcProxies.PopulateColumns(); 
```

还有一件事是 DataSource 已折旧，所以请改用 ItemSource。

# jquery - 如何覆盖 jquery 的 .serialize 以包含未选中的复选框

> ID：10147149
> 
> 赞同：20
> 
> 时间：2012-04-13T19:30:15.400
> 
> 标签：jquery, serialization, checkbox, overriding

我已经阅读了很多将 html 复选框发布到服务器的不同方法，但我真的希望在不修改任何东西（除了 $.serialize 之外）的情况下做到这一点。理想情况下，我希望将选中的框张贴为打开，将未选中的框张贴为 0、空或空。

我对 jquery 的内部工作有点困惑，但到目前为止我已经有了这个，但是它将未选中的复选框设置为“on”......谁能告诉我如何在下面继续这个修改？

```
$.fn.extend({
    serializeArray: function() {
        return this.map(function(){
            return this.elements ? jQuery.makeArray( this.elements ) : this;
        })
        .filter(function(){
            return this.name && !this.disabled &&
                ( this.checked || !this.checked || rselectTextarea.test( this.nodeName ) || rinput.test( this.type ) );
        })
        .map(function( i, elem ){
            var val = jQuery( this ).val();

            return val == null ?
                null :
                jQuery.isArray( val ) ?
                    jQuery.map( val, function( val, i ){
                        return { name: elem.name, value: val.replace( /\r?\n/g, "\r\n" ) };
                    }) :
                    { name: elem.name, value: val.replace( /\r?\n/g, "\r\n" ) };
        }).get();
    }
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-09-19T12:14:21.003

只需附上数据。在我的保存例程中，提交未选中为空字符串并选中为“on”就足够了：

```
var formData = $('form').serialize();

// include unchecked checkboxes. use filter to only include unchecked boxes.
$.each($('form input[type=checkbox]')
    .filter(function(idx){
        return $(this).prop('checked') === false
    }),
    function(idx, el){
        // attach matched element names to the formData with a chosen value.
        var emptyVal = "";
        formData += '&' + $(el).attr('name') + '=' + emptyVal;
    }
); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-18T21:39:39.500

这将覆盖 jquery.serialize() 方法以发送选中/未选中的值，而不仅仅是选中的值。它使用真/假，但如果您愿意，您可以将“this.checked”更改为“this.checked?'on': 0”。

```
var originalSerializeArray = $.fn.serializeArray;
$.fn.extend({
    serializeArray: function () {
        var brokenSerialization = originalSerializeArray.apply(this);
        var checkboxValues = $(this).find('input[type=checkbox]').map(function () {
            return { 'name': this.name, 'value': this.checked };
        }).get();
        var checkboxKeys = $.map(checkboxValues, function (element) { return element.name; });
        var withoutCheckboxes = $.grep(brokenSerialization, function (element) {
            return $.inArray(element.name, checkboxKeys) == -1;
        });

        return $.merge(withoutCheckboxes, checkboxValues);
    }
}); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2014-02-25T20:13:04.360

我认为 Robin Maben 的解决方案缺少一个步骤，即将框设置为具有“已检查”属性。jQuery 的[关于 serialise() 状态的用户指南说明](https://api.jquery.com/serialize/)只有选中的复选框被序列化，所以我们需要添加一点：

```
$('form').find(':checkbox:not(:checked)').attr('value', '0').prop('checked', true); 
```

此方法的唯一缺点是您的表单会短暂闪现，显示所有框已选中 - 看起来有点奇怪。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-14T01:00:06.983

我喜欢@Robin Maben 的方法（在调用本机 .serialize() 之前预处理复选框），但如果不进行重大修改就无法使其工作。

我想出了这个插件，我称之为“mySerialize”（可能需要一个更好的名字）：

```
$.fn.mySerialize = function(options) {
    var settings = {
        on: 'on',
        off: 'off'
    };
    if (options) {
        settings = $.extend(settings, options);
    }
    var $container = $(this).eq(0),
        $checkboxes = $container.find("input[type='checkbox']").each(function() {
            $(this).attr('value', this.checked ? settings.on : settings.off).attr('checked', true);
        });
    var s = ($container.serialize());
    $checkboxes.each(function() {
        var $this = $(this);
        $this.attr('checked', $this.val() == settings.on ? true : false);
    });
    return s;
}; 
```

*在 Opera 11.62 和 IE9 中测试*。

正如您在此[DEMO](http://jsfiddle.net/airshow/wCwkB/3/)中看到的那样，您可以指定复选框的 ON 和 OFF 状态作为参数传递给的选项对象序列化的方式`mySerialize()`。默认情况下，ON 状态被序列化为“name=on”，OFF 被序列化为“name=off”。所有其他表单元素都按照本机 jQuery 进行序列化`serialize()`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-10-20T06:33:44.220

```
 var x = $('#formname').serializeArray();
 var serialized = $('#formname').find(':checkbox:not(:checked)').map(function () { 
   x.push({ name: this.name, value: this.checked ? this.value : "false" }); 
 }); 
```

试试这个

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-03-24T21:59:55.783

Beetroot-Beetroot 的答案在 jQuery 1.9 及更高版本中对我不起作用。我使用`.val()`and `.prop()`，并摆脱了`.eq(0)`对容器的要求，这将序列化限制为选择器中的一种形式。我有一个罕见的情况，我必须同时序列化多个表单，因此删除该要求解决了这个问题。这是我修改后的解决方案：

```
$.fn.mySerialize = function(options) {
    // default values to send when checkbox is on or off
    var settings = {
        on: 'on',
        off: 'off'
    };

    // override settings if given
    if (options) {
        settings = $.extend(settings, options);
    }

    // set all checkboxes to checked with the on/off setting value
    // so they get picked up by serialize()
    var $container = $(this),
        $checkboxes = $container.find("input[type='checkbox']").each(function() {
            $(this).val(this.checked ? settings.on : settings.off).prop('checked', true);
        });

    var serialized = ($container.serialize());

    $checkboxes.each(function() {
        var $this = $(this);
        $this.prop('checked', $this.val() == settings.on);
    });

    return serialized;
}; 
```

你可以在这里看到相应的[小提琴](http://jsfiddle.net/wCwkB/52/)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-24T18:20:50.363

我做了以下操作，找到未选中的复选框，在调用 serializeArray 之前检查它们，然后取消选中它们，以便表单处于与用户离开它的状态相同的状态：

```
var unchecked = chartCfgForm.find(':checkbox:not(:checked)');
unchecked.each(function() {$(this).prop('checked', true)});
var formValues = chartCfgForm.serializeArray();
unchecked.each(function() {$(this).prop('checked', false)}); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-04-25T09:35:35.123

下面是我如何实现一个简单的覆盖，`$.serializeArray`它修复了复选框的默认序列化行为，并为所有其他类型保留了默认行为。

在下面的代码中，遗漏的复选框被注入到原始序列化数组中。复选框状态返回为`"true"`（而不是`"on"`）或`"false"`取决于是否返回`checked`。

```
(function ($) {
    var _base_serializeArray = $.fn.serializeArray;
    $.fn.serializeArray = function () {
        var a = _base_serializeArray.apply(this);
        $.each(this, function (i, e) {
            if (e.type == "checkbox") {
                e.checked 
                ? a[i].value = "true" 
                : a.splice(i, 0, { name: e.name, value: "false" })
            }
        });
        return a;
    };
})(jQuery); 
```

您可以将其自定义为 return`"on"/"off"`或`true/false`.

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-12-04T13:02:30.217

如果您没有大型表格，另一种方法是。

```
$.fn.serializeForm = function () {
    var form = $(this).clone()
    form.find('input:checkbox:not(:checked)').attr('value', 'off').prop('checked', true);
    return form.serialize();
}; 
```

我也喜欢使用更好的值：

```
$.fn.serializeForm = function () {
    var form = $(this).clone()
    form.find('input:checkbox:checked').attr('value', 'Yes');
    form.find('input:checkbox:not(:checked)').attr('value', 'No').prop('checked', true);
    return form.serialize();
}; 
```

然后

```
$('#yourForm').serializeForm(); 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-04-13T19:37:03.833

这是一个小改动：

```
 .map(function( i, elem ){
        var val = jQuery( this ).val();
        if ((jQuery(this).checked != undefined) && (!jQuery(this).checked)) {
            val = "false";
        } 
```

我没有测试过，但这似乎是最合乎逻辑的方法。祝你好运

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-04-13T20:03:49.233

在调用之前，如果未选中复选框，则`serialize()`需要显式设置值`false`

```
$(form).find(':checkbox:not(:checked)').attr('value', false); 
```

我已经在[这里](http://jsfiddle.net/mrobin/WNCkm/)测试过了。

# c# - 如何在 Mono for Android (monodroid) 和 MonoTouch 中使用原生 C++ 库

> ID：10147151
> 
> 赞同：9
> 
> 时间：2012-04-13T19:30:26.770
> 
> 标签：c#, mono, xamarin.ios, monodevelop, xamarin.android

我有兴趣使用 Mono for Android 和 MonoTouch 来构建可以利用我拥有的大量 C++ 本机库的移动应用程序。我能否获得一些关于如何调用方法或将代码合并到我在 iOS 或 Android 上的最终移动应用程序中的具体说明？

我已经在线查看了 Xamarin 文档，对于刚接触编程移动应用程序（[Android](http://docs.xamarin.com/android/advanced_topics/using_native_libraries)和[MonoTouch](http://docs.xamarin.com/ios/advanced_topics/linking_native_libraries)的 Mono ）的人来说，这对我来说非常神秘。在 Visual Studio 中构建一个 monodroid 应用程序（这是我最熟悉的）的情况下，我需要从我的 MonoDroid 程序调用本机函数的具体步骤是什么。对于 C 库，我可以编译为 .DLL（动态）或 .LIB（静态）形式。我也觉得动态库不能用于移动应用程序。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T21:17:54.030

理论上可以使用 P/Invokes 绑定 C++ 库，但这不是一种特别好的方式（因为您将绑定到损坏的函数名称，这些名称非常难以理解，并且可能会在编译器/操作系统之间发生变化）。

访问 C++ 库的推荐方法是创建一个 C API 并使用 P/Invoke（您可以在网上找到很多关于如何执行 P/Invoking 的信息，这里是一个起点：[http://mono- project.com/Dllimport](http://mono-project.com/Dllimport)）。

此外，对于 MonoTouch，不能使用动态库（这是 Apple 的限制），您必须使用静态库。我不知道 Mono for Android 是否有这样的限制。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-20T21:50:58.603

最好的选择是使用 Swig 为您可以从 C# 访问的 C++ 库创建绑定。

这是一个描述：

[http://www.swig.org/Doc1.3/CSharp.html](http://www.swig.org/Doc1.3/CSharp.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-24T11:42:34.157

Cxxi 不适用于单点触控。当我上周遇到同样的问题时，我写了一篇关于如何让 SWIG 为 monotouch 工作的博客：

[http://blog.reblochon.org/2013/01/c-bindings-for-monotouch-using-swig.html](http://blog.reblochon.org/2013/01/c-bindings-for-monotouch-using-swig.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-14T01:55:14.533

来自 Miguel 的这篇博文是关于该主题的有趣读物。

[CXXI：桥接 C++ 和 C# 世界。](http://tirania.org/blog/archive/2011/Dec-19.html)

不知道这一次CXXI是否可用，但这是一个值得关注和支持的项目。

# c# - Excel选择性粘贴和添加操作

> ID：10147152
> 
> 赞同：1
> 
> 时间：2012-04-13T19:30:40.113
> 
> 标签：c#, excel, range, paste

当我们想向所有 excel 工作表单元格添加一个数字（例如 5）时，您可以复制包含值 5 的单元格，选择我们想要的其他单元格范围（例如 10x10 范围）并右键单击-> 选择性粘贴然后检查添加操作并单击确定。

我想在 C# 中使用 Excel Interop dll 将 5 添加到选定范围内的所有单元格。如何做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T03:20:08.490

执行选择性粘贴 -> 添加操作相当简单。假设您已经有一个`Worksheet`对象，以下将起作用：

```
// Copy the initial value from cell A1

xlWorksheet.get_Range("A1", "A1").Copy(Missing.Value);

// Paste special (with Addition) the value over cells A2 to J11

xlWorksheet.get_Range("A2", "J11").PasteSpecial(Excel.XlPasteType.xlPasteAll,
    Excel.XlPasteSpecialOperation.xlPasteSpecialOperationAdd, false, false); 
```

[您可以在此处](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.pastespecial%28v=office.14%29.aspx)找到 PasteSpecial 方法的完整说明。

# ssl - 每个 Camel+Jetty 路由使用不同的 SSL 证书

> ID：10147156
> 
> 赞同：0
> 
> 时间：2012-04-13T19:31:06.520
> 
> 标签：ssl, https, apache-camel, jetty, apache-servicemix

我使用在 ServiceMix (Fuse) 中运行的 Camel Jetty 组件公开了一系列 Web 服务。就像是：

```
<route>
      <from uri="jetty:http://0.0.0.0:25100/service1"/>
      ...
</route>    
<route>
      <from uri="jetty:http://0.0.0.0:25100/service2"/>
      ...
</route> 
```

我希望能够将它们更改为使用 https/ssl，但我需要能够为每条路由使用不同的密钥/证书。我查看了 Jetty 组件文档，它在描述如何全局配置 Jetty 组件以使用 SSL 方面做得不错，但似乎没有办法为不同的路由指定不同的证书？从[码头组件文档](http://camel.apache.org/jetty.html)：

```
<bean id="jetty" class="org.apache.camel.component.jetty.JettyHttpComponent">
    <property name="sslSocketConnectorProperties">
        <properties>
            <property name="password"value="..."/>
            <property name="keyPassword"value="..."/>
            <property name="keystore"value="..."/>
            <property name="needClientAuth"value="..."/>
            <property name="truststore"value="..."/>
        </properties>
    </property>
</bean> 
```

每条路线是否可以使用不同的证书？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:04:11.307

在任何 HTTPS 服务器上，证书都是只能为整个主机名配置的属性。

HTTPS 是[HTTP over TLS](https://www.rfc-editor.org/rfc/rfc2818#section-2.1)，即在发送任何 HTTP 流量之前（因此在发送任何 URL 路径之前）首先建立 SSL/TLS 连接：

> 充当 HTTP 客户端的代理也应充当 TLS 客户端。它应该在适当的端口上启动与服务器的连接，然后发送 TLS ClientHello 以开始 TLS 握手。当 TLS 握手完成时。然后，客户端可以发起第一个 HTTP 请求。所有 HTTP 数据必须作为 TLS“应用程序数据”发送。

当它可以根据路径做出决定时，证书已经发送并且 SSL/TLS 握手已经结束。

一种允许这样做的方法是使用不同的主机名。

You could do this by configuring different host names and IP addresses on your server to use a different aliases from your keystore, or use a different port.

In principle, you could also do this with distinct host names on the same IP address/port using Server Name Indication (SNI); unfortunately, even Java 7 doesn't support it on the server side ([only on the client side](http://docs.oracle.com/javase/7/docs/technotes/guides/security/enhancements7.html)). A typical workaround for this is to use a single certificate that is valid for multiple hosts, using multiple Subject Alternative Name entries.

# css - CSS打印问题，标题右对齐

> ID：10147157
> 
> 赞同：0
> 
> 时间：2012-04-13T19:31:13.177
> 
> 标签：css, printing, alignment

[我在https://abiusx.com/cv](https://abiusx.com/cv)有我的简历页面，我想修改它，以便当用户想要打印时，菜单不可见，但标题可见。

问题是，在打印页面 (PDF) 上，标题 (AbiusX) 和副标题自动对齐到页面的右侧，这真的让我很烦。无论我用 css 做什么，它都会打印出来。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:29:12.993

将此添加到您的@media 打印中

```
h1.author { 
          text-align:center; 
          margin:auto; 
          margin-top:5px; 
} 
```

当我使用 firebug 和 chrome 开发人员工具检查它时，您的 css 默认媒体显示为屏幕，所以我认为当它被处理以打印时，h1.author 定义被省略了。

你应该得到的@media print 是：

```
/* print media */
 @media print {
.noprint {
    display:none;
}
    h1.author {
        text-align:center;
        margin:auto;
        margin-top:5px;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:40:34.923

在你的 css 文件中使用它

```
@media print
{
  //put here the css you want for printing.
} 
```

例如，您有一个带有 .title 类的标题，它不想在打印时显示。然后您必须在@media 打印中执行此操作：

```
@media print
{
     .title{
            display: none;
      }
} 
```

在这里你可以尝试给你标题和副标题你想要的格式。

# ios - 是否可以在 iOS 预览中为生成的 PDF 禁用“打开方式...”

> ID：10147158
> 
> 赞同：1
> 
> 时间：2012-04-13T19:31:16.937
> 
> 标签：ios, uikit, pdf-generation, qlpreviewcontroller

我有一个我正在为 iPad/iPhone 编写的 iOS 应用程序。我正在生成一个用于打印的 PDF 报告，并且一切正常，应用程序将在 QLPreviewController 中成功打开生成的 PDF，我使用以下代码打开预览：

```
// open a preview of the PDF File. 
    QLPreviewController* preview = [[QLPreviewController alloc] init];
    preview.dataSource = self;
    [self presentModalViewController:preview animated:YES]; 
```

在预览中打开 PDF 后，预览工具栏上有标准按钮。按钮是“完成”和“操作按钮”，用于在其他应用程序中打印/打开 pdf。

我附上了我正在谈论的内容的屏幕截图。

![在此处输入图像描述](../Images/1504382a4c16f55ee5297bab5da24d5c.png)

我的问题是，有没有一种快速的方法来禁用/禁止“在‘iBooks’中打开”和“在…中打开”选项？我只想允许用户打印 pdf。我知道我可以在不打开预览的情况下直接发送 pdf 进行打印，但我想让用户在打印之前预览 pdf。所以真的，我只需要禁用“打开方式”选项。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T01:11:11.107

是的，这是可以做到的。您需要创建一个子类`QLPreviewController`并将您自己的按钮分配给`self.rightBarButtonItem`in`viewWillAppear`和`viewDidAppear`。此外，您的类应该在这些通知的回调方法中侦听`UIApplicationDidEnterBackgroundNotification`并`UIApplicationWillEnterForegroundNotification`执行相同的操作。

您可以使用 复制打印按钮功能[`UIPrintInteractionController`](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIPrintInteractionController_Class/Reference/Reference.html)。

# ravendb - 如何在 RavenDb 中搜索转义字符

> ID：10147160
> 
> 赞同：0
> 
> 时间：2012-04-13T19:31:23.643
> 
> 标签：ravendb

首先，我发现[这篇文章](http://daniellang.net/searching-on-string-properties-in-ravendb/)对一般的搜索/索引很有帮助，[这篇](http://old.ravendb.net/documentation/how-indexes-work)文章让我了解了正确的索引。因此，在我的描述中使用了关键字分析器后，我无法在描述中找到带有“*”（星号）的字符串。例如，我有很多以“* note”开头的描述。所以我想找到：

```
item.Description.StartsWith("*"); 
```

我也试过：

```
.Where( x => x.Description.StartsWith( RavenQuery.Escape( "*" ) ) ) 
```

但这似乎不起作用。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T15:01:25.020

这实际上应该有效，无论是在 StartsWith 中还是不需要进行转义。你可以尝试创建一个失败的测试吗？

# java - 在 Spring 3.1 中通过 IP 地址进行身份验证：最聪明的方法是什么？

> ID：10147161
> 
> 赞同：12
> 
> 时间：2012-04-13T19:31:27.950
> 
> 标签：java, authentication, spring-security, ip

我已经使用 Spring Security 3.1 实现了 LDAP 身份验证。我的 security.xml 文件发布在下面。

我需要更改我的身份验证过程，以便如果用户从“白名单”（保存在数据库表中）上的 IP 地址访问该站点，则该用户应自动使用 Spring 3.1 进行身份验证，然后重定向远离登录屏幕（不是我的主意，有人告诉我这样做）。

如果用户不是来自白名单 IP 地址之一，那么她/他应该被强制通过登录页面上的 LDAP 身份验证。

我是 Spring 和 Spring Security 的新手，所以我去了[Spring 3.1 参考文档](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity.html)并阅读了所有部分 I。在那里，我阅读了建议，如果您有任何特殊的身份验证需求，您应该阅读 [Section II Architecture and Implementation](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/overall-architecture.html)。我这样做了，非常缓慢并记笔记。

但是，由于我对这一切都不熟悉，我不确定我是否完全理解我需要做什么以及最聪明的方法是什么。

* * *

**更新 3：我得到了骨架代码，这是我最终得到的文件**

* * *

**我的自定义 AuthenticationProvider 实现，用于通过 IP 地址进行身份验证**

```
// Authentication Provider To Authenticate By IP Address With Allowed IPs
// Stored in a db table

package acme.com.controller.security;

//import acme.com.controller.security.CustomUserInfoHolder;

import org.springframework.security.authentication.AuthenticationProvider;
import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;
import org.springframework.security.core.Authentication;
import org.springframework.security.core.AuthenticationException;
import org.springframework.security.web.authentication.WebAuthenticationDetails;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.core.authority.mapping.GrantedAuthoritiesMapper;
import org.springframework.security.core.authority.mapping.NullAuthoritiesMapper;
import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;
import org.springframework.security.core.userdetails.UserDetails;

import org.apache.log4j.Logger;

public class CustomIPAddressAuthenticationProvider implements AuthenticationProvider
{

    private static final Logger logger = Logger.getLogger(CustomIPAddressAuthenticationProvider.class);
    private GrantedAuthoritiesMapper authoritiesMapper = new NullAuthoritiesMapper();

    @Override
    public Authentication authenticate(Authentication authentication)
    throws AuthenticationException {

        WebAuthenticationDetails wad = null;
        String userIPAddress         = null;
        boolean isAuthenticatedByIP  = false;

        // Get the IP address of the user tyring to use the site
        wad = (WebAuthenticationDetails) authentication.getDetails();
        userIPAddress = wad.getRemoteAddress();

        logger.debug("userIPAddress == " + userIPAddress);

        // Compare the user's IP Address with the IP address in the database
        // stored in the USERS_AUTHENTICATED_BY_IP table & joined to the
        // USERS tabe to make sure the IP Address has a current user
        //isAuthenticatedByIP =  someDataObject.hasIPAddress(userIPAddress);
        isAuthenticatedByIP = true;

        // Authenticated, the user's IP address matches one in the database
        if (isAuthenticatedByIP)
        {

            logger.debug("isAuthenticatedByIP is true, IP Addresses match");
            UserDetails user = null;

            UsernamePasswordAuthenticationToken result = null;

            result = new UsernamePasswordAuthenticationToken("John Principal",
                                                              "PlaceholderPWE"); 

            result.setDetails(authentication.getDetails());

            return result;
        }

        // Authentication didn't happen, return null to signal that the 
        // AuthenticationManager should move on to the next Authentication provider
        return null;
    }

    @Override
    public boolean supports(Class<? extends Object> authentication)
    {
        // copied it from AbstractUserDetailsAuthenticationProvider
        return(UsernamePasswordAuthenticationToken.class.isAssignableFrom(authentication));
    }

} 
```

**我的 *-security.xml 文件**

```
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:s="http://www.springframework.org/schema/security"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/security
    http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <s:http pattern="/login*" security="none"/>
    <s:http pattern="/search*" security="none"/>
    <s:http pattern="/css/**" security="none"/>
    <s:http pattern="/js/**" security="none"/>
    <s:http pattern="/images/**" security="none"/>

    <s:http auto-config="true" use-expressions="true">
        <s:intercept-url pattern="/**" access="isAuthenticated()" />

        <s:form-login login-page="/login"
          authentication-failure-url="/loginfailed" />
        <s:logout logout-success-url="/logout" />
    </s:http>

    <s:ldap-server url = "ldap://ldap-itc.smen.acme.com:636/o=acme.com"/>

    <bean id="customIPAddressAuthenticationProvider" class="com.acme.controller.security.CustomIPAddressAuthenticationProvider" />

    <s:authentication-manager>
        <!-- Proposed: Custom Authentication Provider: Try To Authenticate BY IP Address First, IF NOT, Authenticate WiTh THE LDAP Authentication Provider -->
        <s:authentication-provider ref="customIPAddressAuthenticationProvider" />
        <s:ldap-authentication-provider user-dn-pattern="uid={0},ou=People"/>
    </s:authentication-manager>

</beans> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-18T18:33:53.423

您的方法似乎很合理，您认为 Spring 会尝试每个 AuthenticationProvider 直到获得成功的结果是正确的，因此在您的情况下，您将在 LDAP 提供程序之前定义基于 IP 的提供程序。

根据您的设置，您可能无法在 authentication.getDetails() 调用中获得 WebAuthenticationDetails 对象。如果是这种情况，您应该将 Spring 的[RequestContextListener](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/)或[RequestContextFilter](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/)添加到您的 web.xml。然后，您将能够通过使用 RequestContextHolder 类并调用 RequestContextHolder.getRequestAttributes() 来获取源 IP 地址。

您应该只需要实现一个 AuthenticationProvider，不需要实现 UserDetailsS​​ervice、UserDetails 或 Authentication 类。如果您无法通过用户的 IP 地址对用户进行身份验证，则应返回 null。在这种情况下，Spring 将尝试 LDAP 提供程序。如果由于某种原因您不想将尝试传递给 LDAP，您应该抛出一个 AuthenticationException ，这将停止该过程并最终导致用户出现 403 错误。

我希望这有帮助 ：）

# perl - 如何使用 perl 索引语料库中的所有唯一词

> ID：10147164
> 
> 赞同：1
> 
> 时间：2012-04-13T19:31:39.373
> 
> 标签：perl, indexing

```
.i 1
.t
 effici machineindepend procedur 
garbag collect  variou list structur
.w
 method  return regist   free
list   essenti part   list process
system.   paper past solut   recoveri
problem  review  compar.  new algorithm
 present  offer signific advantag  speed
 storag util.  routin  implement
 algorithm   written   list languag 
       insur  degre
 machin independ. final  applic  
algorithm   number  differ list structur
appear   literatur  indic.
.b
cacm august 1967
.a
schorr h.
wait w. m.
.n
ca670806 jb februari 27 1978 428 pm
.x
1024 4 1549

1024 4 1549

1050 4 1549

.i 2
.t
 comparison  batch process  instant turnaround
.w
 studi   program effort  student
  introductori program cours  present
  effect  have instant turnaround   minut
 oppos  convent batch process
 turnaround time    hour  examin. 
 item compar   number  comput
run  trip   comput center program prepar
time keypunch time debug time
number  run  elaps time    run
   run   problem.   
result  influenc   fact  bonu point
 given  complet   program problem
    specifi number  run 
 evid  support instant  batch.
.b
cacm august 1967
.a
smith l. b.
.n
ca670805 jb februari 27 1978 432 pm
.x
1550 4 1550

1550 4 1550

1304 5 1550

1472 5 1550 
```

现在上面的文本是 2 个文件的内容，这两个文件既停止又停止，新文件从 .i 开始（后跟一个数字）需要对 .t & .b 、 .b & 之间的文本中的单词进行索引。 a , .a & .n, .n &.x 并忽略 .x 和新文档开头之间的所有文本。即.I（后跟一个数字）

所有文件的内容都存储在一个文件中，比如“语料库”。需要对所有唯一单词进行索引，以及它们在语料库中出现的次数以及在每个文档中出现的次数，可能在文档中的哪些位置。

```
open FILE, '<', 'sometext.txt' or die $!;
my @texts = <FILE>;
foreach my $text(@texts) {
        my @lines = split ("\n",$text);
        foreach my $line(@lines) {
            my @words = split (" ",$text);
            foreach my $word(@words) {
                $word = trim($word);
                my $match = qr/$word/i;

                open STFILE, '<', 'sometext.txt' or die $!;
                my $count=0;

                while (<STFILE>) {
                    if ($_ =~ $match) {
                        my @mword = split /\s+/, $_;
                        $_ =~ s/[A-Za-z0-9_ ]//g;
                        for my $i (0..$#mword) {
                            if ($mword[$i] =~ $match) {
                                #print "match found on line $. word ", $i+1,"\n";
                                $count++
                            }
                        }
                    }
                }
                print "$word appears $count times \n";
                close(STFILE) or die "Couldn't close $file: $!\n\n";
            }
        }
    }

    close(FILE) or die "Couldn't close $file: $!\n\n";

    sub trim($)
{
    my $string = shift;
    $string =~ s/^\s+//;
    $string =~ s/\s+$//;
    return $string;
} 
```

上面的代码计算语料库中每个单词的出现次数。如何更改它，以便它还计算单个文档中单词的出现次数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T09:14:28.173

怎么样：

**编辑**为每个文档添加不同的计数器：

```
#!/usr/bin/perl
use strict;
use warnings;
use Data::Dumper;

my $words;
my $doc;
my $file = 'path/to/file';
open my $fh, '<', $file or die "unable to open '$file' for reading:$!"
while(<$fh>) {
    chomp;
    $doc = $_ if /^\.i/;
    next if (/^\.x\b/ .. /^\.i\b/);
    next if /^\./;
    my @words = split;
    for(@words) {
        $words->{$_}{$doc}++;
    }
}
close $fh;
print Dumper $words; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:47:47.167

使用散列，散列值包含每个单词的当前计数。循环遍历所有行和所有单词。使用基于哑（标志变量）的状态机来忽略 .t 和 .b 之间的文本

如果您在编写上述任何代码时遇到困难，请发布有关您遇到什么问题的具体问题。

# hibernate - JPA：代理对象的平等断言

> ID：10147172
> 
> 赞同：1
> 
> 时间：2012-04-13T19:32:10.213
> 
> 标签：hibernate, jakarta-ee, jpa, junit, persistence

我有一个类 User，它充当数据库中用户表的持久性模型：

```
public class User {
@Id
@Basic(optional = false)
@Column(name = "USER_ID")
private Long userId;

@JoinColumn(name = "LAST_CHANGED_USER_ID", referencedColumnName = "USER_ID")
@ManyToOne(fetch = FetchType.LAZY)
private User lastChangedUser;
...

@Override
public int hashCode() {
    int hash = 0;
    hash += (userId != null ? userId.hashCode() : 0);
    return hash;
}

@Override
public boolean equals(Object object) {
    if (!(object instanceof User)) {
        return false;
    }

    User other = (User) object;
    if ((this.userId == null && other.userId != null) || 
        (this.userId != null && !this.userId.equals(other.userId))) {
        return false;
    }
    return true;
}

@Override
public String toString() {
    return "User[userId=" + userId + "]";
}
} 
```

每当对 User 实例进行更改时，都会更新字段 lastChangedUser。考虑以下方法：

```
private void setUsername(string username, User lastChangedUser){
    this.username = username;
    this.lastChangedUser = lastChangedUser;
}

public void updateUserName(Long userId, Long lastChangedUserId, String username){
    EntityManager em = PersistenceManager.getPersistenceManager()
       .getEntityManager();
    EntityTransaction transaction = em.getTransaction();

    User user = em.find(User.class, userId);
    User lastChangedUser = em.find(User.class, lastChangedUserId);

    transaction.begin();
    user.setUsername(username, lastChangedUser);
    transaction.commit();
} 
```

和单元测试：

```
public void testUpdateUsername(){
    UserFacade instance = new UserFacade();
    User john = instance.getUserByUserId(new Long(1));
    User jane = instance.getUserByUserId(new Long(2));

    // make the update and persist
    instance.updateUsername("JANE M. DOE", jane.userId, john.userId);

    // assert that john made the change to jane
    jane = instance.getUserByUserId(new Long(2));

    assertTrue(jane.username.equals("JANE M. DOE"));

    User actual = jane.lastChangedUser;
    User expected = john;

    // this assertion passes...
    assertTrue(actual.equals(expected));

    // yet this assertion fails!
    assertTrue(expected.equals(actual));

    // this fails as well.
    assertEquals(expected, actual);
} 
```

使用 Netbeans 7.1.1，测试结果屏幕返回错误消息：

`FAILED: expected: User[id=1], but was: User[id=1].`

经检查，该对象`actual`不是 type `User`，而是 Proxy 对象的类型。我认为这是由于 LAZY fetch 注释。因此，对象的 userid 的值为`null`并`expected.equals(actual)`返回`false`。然而，`actual.equals(expected)`回报`true`。让我更加困惑的是，失败消息显示`actual.userId`不是`null`，而是等于预期的 id！

Hibernate 或 JUnit 的什么怪癖导致实际的 User 对象在失败后出现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T16:28:23.457

由于[一个关于在不获取整个对象的情况下获取 ids 的问题](https://stackoverflow.com/questions/2593722/hibernate-one-to-one-getid-without-fetching-entire-object)，我和一些朋友找到了解决方案。由于该对象是一个代理，直接引用该字段`userid`会`equals`产生一个空值。但是**，对用户 ID 使用 getter 方法会**导致从数据库中获取实际值。因此，该`equals`方法应如下所示：

```
@Override
public boolean equals(Object object){
    if (!(object instanceof User)) {
        return false;
    }
    User other = (User) object;
    if ((this.getUserId() == null && other.getUserId() != null) || 
        (this.getUserId() != null && 
        !this.getUserId().equals(other.getUserId()))) {
        return false;
    }
    return true;
} 
```

现在断言将成立。

# c# - 为什么我在这段代码中出现格式异常？它只有一个参数

> ID：10147173
> 
> 赞同：0
> 
> 时间：2012-04-13T19:32:11.567
> 
> 标签：c#

```
public override string ToString()
{
    string val;
    if (blower)
        val = "Yes";
    else
        val = "No";
    return string.Format(
                   "With Blower \t:\t {0} \n" +
                   val);
} 
```

我在这些方面遇到了一个例外： -

```
 return string.Format(
                "With Blower \t:\t {0} \n" +
                val); 
```

例外是：

> 索引（从零开始）必须大于或等于零且小于参数列表的大小。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-13T19:33:05.457

以这种方式使用它：

```
string.Format("With Blower \t:\t {0} \n", val); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-13T19:33:45.893

我想你的意思是

```
return string.Format("With Blower \t:\t {0} \n", val);
                                               ^ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T19:44:58.040

您可以简化整个方法：

```
public override string ToString()
{
    return string.Format("With Blower \t:\t {0} \n", blower ? "Yes" : "No");
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-13T19:33:31.010

您的意思是使用逗号而不是串联吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T19:33:43.303

我认为您可能需要用逗号替换 + ：

```
 return string.Format(
                "With Blower \t:\t {0} \n",
                val); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-13T19:34:06.967

尝试用逗号分隔：

return string.Format("With Blower \t:\t {0} \n", val);

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-13T19:40:14.643

使用逗号代替连接

```
return string.Format("With Blower \t:\t {0} \n",  val); 
```

# asp.net-mvc-3 - 尝试启动新的 MVC 3 项目时出现 Visual Studio 错误

> ID：10147185
> 
> 赞同：0
> 
> 时间：2012-04-13T19:33:01.787
> 
> 标签：asp.net-mvc-3

![MVC 3 错误](../Images/2cb98f65523416b99d65d79b02001971.png)

我已经卸载并重新安装了 MVC 3 并修复了我的 VS 2010 安装。没有任何工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T13:09:01.560

我最终卸载并进行了全新安装，它似乎已经纠正了这个问题。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T15:18:17.123

好的，我终于让它工作了。不幸的是，我无法解释清楚的解决方案。我有一个朋友给我发了一个他创建的空白 MVC 3 项目。当我第一次打开它时，我遇到了一些错误，最终导致我的 VS 崩溃。我重新启动它并再次打开它，它工作了！然后我能够创建一个没有错误的新项目。我猜我把东西弄松了

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T19:57:26.217

好的，官方的解决方案是我必须创建另一个 Windows 配置文件......由于某种原因，我的旧配置文件已损坏并且不知何故影响了一切，不知道如何，但是当我使用新配置文件登录时，一切都按预期工作。

# sql - 在多对多 SQL 表中查找数据关系或图形

> ID：10147186
> 
> 赞同：3
> 
> 时间：2012-04-13T19:33:02.457
> 
> 标签：sql, database, relational-database, data-mining, graph-databases

我的工作中有几种类型的多对多表。我有将单词与其他单词（ngram）相关联的应用程序，以及可以将用户与其他用户（朋友/关注者）相关联的数据库。

**我想知道如何与这些数据建立关系，以便为我的应用程序推荐和我的用户找到有用的联系。**

采用以下简单的数据库表，其中包含将节点链接到另一个节点的外键。

```
id | node1  | node2 
--------------------
1  |   1    |   2
2  |   1    |   3
3  |   1    |   4
4  |   2    |   1
5  |   2    |   3
6  |   2    |   5
7  |   3    |   1 
```

例如，在上表中，很明显“1”是最受欢迎的，因为它被链接到最多（2 和 3）。很明显，也许“2”应该与“4”相关联，因为“2”与“1”有很多关系（并且“1”与“4”相关联）。

因此，例如，我可以找到：

*   将节点连接到其他节点的路径。
*   基于相似性的有益联系（建议）
*   共享相关连接的节点组

`user <=> friends`其他常见的关系形式有or 之类的东西`blog_post <=> tags`。

**我正在寻找可以由前端直接运行的 SQL 查询，或者可以在每晚运行以从这些数据中提取关系的 map-reduce 作业。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T18:28:15.843

正如 ffriend 指出的那样，您的数据结构非常适合您尝试做的事情。这更像是一个前端问题，例如，您将如何呈现信息？

需要研究的是一些节点遍历技术，以确定节点之间的跳数（相关性）、连接到单个节点的节点数（宽度）、有意义的路径可以走多少跳（深度）。我唯一会考虑的另一件事是用于帮助确定相关性。这或多或少是在使用期间节点路径已经经过多少次的计数器。这是您可以开始为特定路径分配权重的地方。例如，如果从 1 到 5 (1 -> 2 -> 5) 的路径作为第一次遍历，它可能看起来像这样......

```
id | node1  | node2  | count
------------------------------
1  |   1    |   2    |   1
2  |   1    |   3    |   0
3  |   1    |   4    |   0
4  |   2    |   1    |   0
5  |   2    |   3    |   0
6  |   2    |   5    |   1
7  |   3    |   1    |   0 
```

**该方法可以通过使用计数器作为权重因子来帮助识别节点之间的含义关系。**

请记住，使用这种数据结构，您将需要一个方法去每个方向（1 -> 5 和 5 -> 1）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T14:39:24.063

也许寻找 NOSQL 数据库将是解决您问题的更好方法。更具体地说，首先使用像 neo4j 这样的图形数据库来表示您的 sql 数据，而不是简单地遍历图形以查找您想要的关系和组。

在您的用例中，使用图形数据库总是更好，因为性能比在表上使用具有多个连接的 sql 时快几倍。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:34:55.923

[Powergagets](http://www.softwarefx.com/powergadgets/)可以使用 SQL 数据制作图形和图表。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-23T17:57:32.613

根据我对图的记忆，Dijkstra-Prinn 和 Kruskal 的算法在这里可能对你有用。它们都是搜索算法（我不记得它们是 BFS 还是 DFS……已经有一段时间了：p），这将帮助您获取整个图形并找到最佳遍历路径。

他们不会为您提供 SQL 查询，但他们会提供一个数学“跳板”来帮助您获得适合您的 SQL 查询的逻辑。

正如水上乐园所说的他的计数器系统，您可以利用上述程序获取一个起点，然后使用计数器系统进行双重检查。

另外，正如 ffriend 之前所说，我不确定您是出于优化目的还是出于其他用途收集这些数据，所以我认为如果您重组您的问题，您可能会得到更好的帮助。

祝你好运。

# magento - Magento：以编程方式加载产品的属性 - 如何？

> ID：10147187
> 
> 赞同：2
> 
> 时间：2012-04-13T19:33:02.570
> 
> 标签：magento, collections, attributes, load, product

请原谅之前是否有人问过这个问题。我发现了几篇关于加载属性的帖子，但我无法根据我所阅读的内容加载我需要的那些。

我正在尝试创建一个选择框以在应用程序内但不属于它的页面上显示自定义属性的值（只是一个自定义 PHP 产品显示页面）。我知道我很接近，我只是不知道调用这个的正确方法是什么。

这是我到目前为止所拥有的：

```
$attributeInfo = Mage::getResourceModel('eav/entity_attribute_collection')
                            ->setCodeFilter('color_attribute')
                            ->getFirstItem(); 
```

如果我打印 $attributeInfo 我会得到一个包含属性信息的数组，但我不知道如何仅显示仅适用于当前产品的 color_attribute 的名称和值。

```
echo "<pre>"; print_r($attributeInfo->getData()); echo "</pre>"; 
```

基本上，我想在选择框中加载适用于特定产品的所有“color_attribute”。这样，用户可以查看产品并通过从选择中选择颜色来选择其颜色。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T12:41:04.617

最好使用属性配置。

```
/* @var $attr Mage_Eav_Model_Entity_Attribute */
$entityType = 'catalog_product';
$attrCode   = 'some_attr';
$attr = Mage::getModel('eav/config')->getAttribute($entityType,$attrCode);

var_dump($attr->getSource()->getAllOptions()); 
```

# encryption - 为 16 位系统编写 RC4

> ID：10147191
> 
> 赞同：2
> 
> 时间：2012-04-13T19:33:14.083
> 
> 标签：encryption, assembly, 16-bit, dcpu-16, rc4-cipher

我正在为 DCPU-16 编写 RC4，但是在开始之前我有一些问题。

RC4算法：

```
//KSA
for i from 0 to 255
    S[i] := i
endfor
j := 0
for i from 0 to 255
    j := (j + S[i] + key[i mod keylength]) mod 256
    swap values of S[i] and S[j]
endfor

//PRGA
i := 0
j := 0
while GeneratingOutput:
    i := (i + 1) mod 256
    j := (j + S[i]) mod 256
    swap values of S[i] and S[j]
    K := S[(S[i] + S[j]) mod 256]
    output K
endwhile 
```

由于我正在使用 16 位字，因此每个元素的`S[]`范围都可以是 0-65535，而不是预期的 0-255。K 需要为 0-65535，处理这个问题的最佳方法是什么？

我看到的选项（及其问题）是：

1.  仍然`Mod 255`在任何地方使用并用连接的两轮填充输出（运行时间更长，我想保持我的[CPB](http://en.wikipedia.org/wiki/Cycles_per_byte)尽可能低）
2.  调整 RC4 所以`K`将是一个 16 位的数字，同时仍然使用长度为 255 的数组`S[]`（我想做正确的加密，所以我担心在修补 RC4 时会出错。）

我最好的选择是什么？我觉得我可能必须做#1，但我希望这里的人们能给我灌输信心去做#3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:56:19.533

我看不出问题，因为 DCPU16 有 16 位字。RC4 在`mod 256`密钥调度和 PRGA 中都运行（它的输出是字节流——同样，没有问题）。如果您的问题是节省空间，您可以使用一个单词来存储 的两个相邻单元格`S`，仅此而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:27:36.417

选项 2 将使加密更弱

你可以做

```
loop: add i,1 ;2 cycles
and i,0xff ;-- &0xff is the same as %256 ;2 cycles
add j,[i+arr];3 cycles
and j,0xff;3 cycles
set o,[j+arr];-- using overflow reg as swap var;2 cycles
set [j+arr],[i+arr];3 cycles
set [i+arr],o;2 cycles
set a,[i+arr];-- calc index;2 cycles
add a,[j+arr];3 cycles
and a,0xff;3 cycles
set b,[a+arr];2 cycles

;-- second octet
add i,1
and i,0xff
add j,[i+arr]
and j,0xff
set o,[j+arr] 
set [j+arr],[i+arr]
set [i+arr],o
set a,[i+arr]
add a,[j+arr]
and a,0xff
shl b,8
bor b,[a+arr]
;--output b
set pc,loop 
```

这大约是您可以做到的最快速度（每个 16 位字 57 个周期，除非我错过了什么）这假设它`S`是静态的（我的代码中的 arr 值）并且`i`存储`j`在寄存器中（您可以在之前/之后存储它们`S`当您在代码之外时）

trying to pack the array will make everything slower as you need to unpack it each time

# ruby-on-rails-3 - Rails 3.2.3：如何批量分配关联模型？

> ID：10147198
> 
> 赞同：0
> 
> 时间：2012-04-13T19:33:37.670
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1

我有一个 rails 3.2.3，我有一个包含两个嵌套模型的表单，当我尝试提交表单时，我收到此错误：

```
ActiveModel::MassAssignmentSecurity::Error in ExperimentsController#create

Can't mass-assign protected attributes: descriptions_attributes, circuits_attributes 
```

这是我的模型：

```
class Experiment < ActiveRecord::Base
  attr_accessible :title, :intro_text

  has_many :circuits, :dependent => :destroy
  has_many :descriptions, :dependent => :destroy

  accepts_nested_attributes_for :descriptions, :reject_if => lambda { |a| a[:data].blank? }, :allow_destroy => true
  accepts_nested_attributes_for :circuits, :reject_if => lambda { |a| a[:data].blank? }, :allow_destroy => true

end

class Circuit < ActiveRecord::Base
  attr_accessible :data, :title

  belongs_to :experiment
end

class Description < ActiveRecord::Base
  attr_accessible :data, :title

  belongs_to :experiment
end 
```

我可以添加`attr_accessible`一个字段，但是，嵌套模型呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:41:28.150

尝试添加：

```
class Experiment < ActiveRecord::Base
  attr_accessible :title, :intro_text, :descriptions_attributes, :circuits_attributes
  [...] 
```

在你的实验模型中。

# blackberry - 即使在 .KEY 文件生成之后，也会引发 ControlledAccessException

> ID：10147200
> 
> 赞同：0
> 
> 时间：2012-04-13T19:33:41.367
> 
> 标签：blackberry, blackberry-eclipse-plugin

目前正在使用Eclipse Blackberry插件进行开发，并且我已经从RIM获得了我的代码签名密钥，并且可以在设备上成功调试。

我遇到问题的地方是在设备上生成一个 SQLite 数据库（没有 SD 卡）。每次尝试使用该行时都会引发 ControlledAccessException `if(DatabaseFactory.exists(dbURI))`。

我使用 RIM 提供的文件签名工具来创建我自己的 .KEY 文件。我已将 .KEY 文件设置为公共和非公共类以及我的应用程序中的其他包的默认值。我的手机 (Torch 9810) 上的安全设置为应用程序权限下的所有内容提供了应用程序允许状态。我也试过辞职申请无济于事。

我知道我的应用程序正在获取 .KEY 文件，因为`key = CodeSigningKey.get(moduleHandle,"Key_Name");`它返回了一个值。那么有人知道发生了什么吗？

更新：所以我的签名工具告诉我，我生成的密钥在状态下是“未注册”，在详细信息下：“请联系签名者并在签名机构注册。” 但既然我是签名者，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:16:24.447

[ControlledAccessException](http://www.blackberry.com/developers/docs/7.1.0api/net/rim/device/api/system/ControlledAccessException.html)的文档说：

> 当线程试图在没有适当权限的情况下访问 ControlledAccess 对象时，将引发此异常。

您需要检查用户是否已授予访问文件系统的适当权限才能使用数据库 API。 `ApplicationPermissions.PERMISSION_FILE_API`是可能需要的，但可能还有更多。

# javascript - 可观察数组中项目属性的自定义绑定，如何访问该项目？

> ID：10147204
> 
> 赞同：2
> 
> 时间：2012-04-13T19:34:04.980
> 
> 标签：javascript, jquery, knockout.js, knockout-2.0

**背景**

我有一个 GalleryImages 可观察数组，其中每个项目都有与图像相关的属性（名称、描述、路径等）。淘汰赛 foreach 遍历对象数组以生成包含图像、名称和描述的跨度。如果用户单击图像名称或描述，他们可以编辑值并按保存/取消以更新视图模型。

**问题**

鉴于自定义绑定绑定到可观察数组中某个项目的属性，您如何在自定义绑定的定义中访问该属性所属的项目？我想获取刚刚编辑的项目并将其传递给一个函数，该函数将通过更改更新服务器。

我尝试查看 allBindingsAccessor()，但它返回项目的属性，而不是项目本身。

**HTML**

```
<div data-bind="foreach: GalleryImages">
    <span class="img">
        <a data-bind="attr: { href: URL}">
            <img data-bind="attr: { src: URL}"/>
        </a>
        <div>
            <h4 data-bind="text: ItemName"></h4>
            <input type="text" data-bind="clickEditor: ItemName"/>
        </div>
        <div>
            <span data-bind="text: Description"></span>
            <textarea data-bind="clickEditor: Description"></textarea>
        </div>
    </span>
</div> 
```

**knockoutJS**这是 clickEditor 的自定义绑定

```
ko.bindingHandlers.clickEditor = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        var $element = $(element).hide();
        var $text = $element.prev();
        var $parent = $element.parent();

        var $editElements = $("<div class='editConfirm'> \
            <button class='saveEdit' type='button'>Save</button> \
            <button class='cancelEdit' type='button'>Cancel</button> \
        </div><span class='placeHolder'></span>").hide().insertAfter($element).add($element);

        var _toggle = function (edit) {
            $text[edit ? 'hide' : 'show']();
            $editElements[edit ? 'show' : 'hide']();
        };

        $text.click(function (e) {
            _toggle(true);              
        });

        $editElements.find('.saveEdit').click(function () {
            _toggle(false);

            //update clientside viewModel
            valueAccessor()($element.val());

            // this var needs to contain the item in the observable array that was updated
            var imageUpdated;

            //update server with changes
            saveModel(imageUpdated);
        });

        $editElements.find('.cancelEdit').click(function () {
            _toggle(false);
            $(element).val(ko.utils.unwrapObservable(valueAccessor()));
        });
    }
    , update: function (element, valueAccessor) {
        $(element).val(ko.utils.unwrapObservable(valueAccessor()));
    }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:51:37.893

从数据绑定属性中，您可以使用 访问当前范围的数据`$data`。

如果您在绑定中，则`viewModel`参数（第 4 个参数）实际上是当前绑定的数据（因此在这种情况下是您的数组项）。实际上在 KO 2.0 中还有第 5 个参数，即上下文。上下文包含`$data`、`$parent`、`$parents`和`$root`。

因此，最好的办法是`viewModel`在绑定中使用 arg。

# javascript - 如何获取最后一个和上一个附加的 div 属性和内容 onclick？

> ID：10147210
> 
> 赞同：1
> 
> 时间：2012-04-13T19:34:46.157
> 
> 标签：javascript, jquery

我使用 jQuery 添加新的 div `append()`，并且我希望能够获得最后一个 div 和以前的 div 的各个内容和属性`onclick`。

```
<!DOCTYPE html>

<script type='text/javascript'>
$(document).ready(function(){

$('#ClickDiv').live("click",function(){

IaNm=prompt("Enter Name","Name here...");
IaLang=prompt("Enter Lang","Lang here...")

$('.box:last').append('<div class="box" lang="'+IaLang+'">'+IaNm+'</div>')
})
$('.box').click(function(){
LstNm=$(this).text()
LstT=$(this).attr('lang')
$('b').html(LstNm+' : '+LstT)

})
})    

</script> 
<input type='button' value='New Div' id='ClickDiv'>
<div class='box' lang='en'>one</div>
<div class='box' lang='fr'>two</div>
<div class='box' lang='de'>three</div>

<b></b> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:39:55.687

您需要更改此行：

```
$('.box').click(function(){ 
```

到

```
$('.box').live( "click", function(){ 
```

如果您想捕获在文档加载事件之后添加的新元素的单击事件

编辑：更改`$('.box:last').append( ... )`为，`$('.box:last').after(... )`以便在 las elment 之后添加新元素，而不是在其中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T07:54:02.303

要创建代码块或其他预格式化文本，请缩进四个空格：

```
This will be displayed in a monospaced font. The first four spaces
will be stripped off, but all other whitespace will be preserved.

Markdown and HTML are turned off in code blocks:
<i>This is not italic</i>, and [this is not a link](http://example.com) 
```

要创建不是块，而是内联代码跨度，请使用反引号：

字符`$`只是. `window.jQuery`如果你想在列表中有一个预先格式化的块，缩进八个空格：

1.  这是正常的文字。
2.  这也是如此，但现在遵循一个代码块：

    ```
    Skip a line and indent eight spaces.
    That's four spaces for the list
    and four to trigger the code block. 
    ```

# python - 如何评估多维数组中的 N 个最大元素？

> ID：10147212
> 
> 赞同：2
> 
> 时间：2012-04-13T19:34:59.560
> 
> 标签：python, arrays, sorting, numpy

numpy 可以评估多维数组中的 N 个最大元素吗？说：

```
import numpy as np
a=[1,2,3]
b=a.max(num_of_max_elements=2) #I know it won't work, and I want it to be 2 and 3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:48:02.017

最简单的方法是排序，然后使用最后的`n`数字。这也可以在不更改原始数组的情况下完成。下面是一个如何在 10x10 数组中查找最大 10 个数字的示例：

```
a = numpy.random.randint(1000, size=100).reshape(10, 10)
indices = a.ravel().argsort()
print a.ravel()[indices[-10:]] 
```

此代码打印类似

```
array([909, 917, 926, 936, 952, 960, 961, 964, 969, 993]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-06T14:08:55.473

完全排序是不必要的。您可以在数组的负数上使用，对前*n 个*[`np.partition`](https://docs.scipy.org/doc/numpy-1.15.0/reference/generated/numpy.partition.html#numpy-partition)元素进行切片，然后取负数来反转初始转换。

 *如果您提供`axis=None`，则数组在排序前被展平。

```
np.random.seed(0)

a = np.random.randint(1000, size=100).reshape(10, 10)

res = -np.partition(-a, kth=10, axis=None)[:10]
# array([961, 999, 932, 937, 976, 916, 984, 910, 908, 901]) 
```

或者，您可以指定负数`kth`：

```
res = np.partition(a, kth=-10, axis=None)[-10:]
# array([901, 908, 910, 916, 984, 932, 937, 999, 961, 976]) 
```

没有指定排序`np.partition`。在最坏的情况下，该解决方案需要 O( *n ) 时间。*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-13T19:49:23.703

[对数组进行反向排序](http://docs.python.org/library/functions.html#sorted)并获取第一个`N`元素可能是最有效的：

```
 a = [1,2,3]
 sorted(a, reverse=True)[:2] 
```

如果要查找多维数组中的最大元素，请使用`a.ravel()`展开到一维的

正如所写，这实际上并没有使用 numpy，但是您可以使用 执行类似的操作`np.sort`，尽管您必须自己反转它，例如，通过使用 索引`[::-1]`，给出相当巴洛克式的外观

```
np.sort(a.ravel())[::-1][:2] 
```*

# android - Android动态壁纸农场

> ID：10147216
> 
> 赞同：0
> 
> 时间：2012-04-13T19:35:22.977
> 
> 标签：android, logic, live-wallpaper

在动态壁纸中，我们有调用方法`onOffsetsChanged`，当用户在手机屏幕上滑动时调用该方法，其值`xOffset`从 0.1 更改为 0.9

现在我想做的是，当值下降小于 0.5 时

它可能会返回不同的值

例如

0.5 --> 0.48

0.4 --> 0.46

0.3 --> 0.44

0.2 --> 0.42

0.1 --> 0.40

但是当它从 0.5 增加时，它保持不变

0.9 --> 0.9

0.8 --> 0.8

0.7 --> 0.7

0.6 --> 0.6

有人可以帮我用这个公式吗？我在这里无法得到任何逻辑

```
@Override
public void onOffsetsChanged(final float xOffset, final float yOffset, final float xOffsetStep, final float yOffsetStep, final int xPixelOffset, final int yPixelOffset) 
{
    super.onOffsetsChanged(xOffset, yOffset, xOffsetStep, yOffsetStep, xPixelOffset, yPixelOffset);
    Runnable offsetsChangedCommand = new Runnable() 
    {
        public void run() {
            if (xOffsetStep != 0f) 
            {
                glRenderer.setParallax(xOffset - 0.5f);
            }
        };
    };
    executor.execute(offsetsChangedCommand);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:44:07.343

可能有更好的方法，但我能想到的最简单的方法是：

```
float actualOffset;
if(xOffset>0.5f)
{
    actualOffset=xOffset;
}
else
{
    actualOffset=0.38f+(xOffset*0.2f);
}

glRenderer.setParallax(actualOffset- 0.5f); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:44:14.483

```
float myXOffset;
if(xOffset <= 0.5) 
{
    myXOffset = 0.38 + (xOffset / 5);
} else {
    myXOffset = xOffset;
} 
```

# linux - Firefox 上的 SVG，Linux 方式

> ID：10147218
> 
> 赞同：0
> 
> 时间：2012-04-13T19:35:31.097
> 
> 标签：linux, firefox, animation, svg

我偶然发现了[这里](http://doctype.com/firefox-linux-svg-support)和[那里](https://stackoverflow.com/questions/6186335/how-to-display-interactive-svg-in-a-window-on-linux)描述的 SVG 问题，但我还没有找到答案，所以我在这里改写一下：

> 在 Firefox、Linux 下，来自本地文件的 SVG 动画效果不如使用在线托管的相同文件。

让我们从[彼得的网站上看](http://www.petercollingridge.co.uk/sites/files/peter/hover3_set_attribute.svg)`<set />`这个精彩的基于动画的教程。（将鼠标放在绿色方块上以淡化蓝色方块，[此处](http://www.petercollingridge.co.uk/data-visualisation/mouseover-effects-svgs)为整页）。

如您所见，它运行良好。保存在磁盘上并在本地用 Firefox 打开，它在 Linux 上失败（似乎在 Windows 上工作）！

你可以在家里试一试......关于缺少什么的任何线索？

在 ubuntu oneiric 上用 firefox 11.0 和 winXP 用相同的 firefox 测试

**编辑**：检查了我的 /etc/mime.types，发现：`image/svg+xml svg svgz`

**编辑**：建议接受船长 Halfer

**类似于**：[stackoverflow 2304488 why-doesnt-svg-work-on-local-html-files](https://stackoverflow.com/questions/2304488/why-doesnt-svg-work-on-local-html-files)除了我不使用嵌入的 html 文件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T11:35:00.357

根据 Firefox 邮件列表人员的明智建议，我再次尝试使用空的 Firefox 配置文件，并且成功了。

一旦我发现我的插件/配置有什么问题，我会立即提供更多详细信息

# jquery - 使用输入键/隐藏提交按钮提交表单

> ID：10147219
> 
> 赞同：1
> 
> 时间：2012-04-13T19:35:31.253
> 
> 标签：jquery

我正在制作一个带有单个输入字段的小 jquerymobile 页面来进行数据库搜索。输入是由条形码阅读器完成的，该阅读器最后按 Enter。我想隐藏提交按钮并使用回车键提交表单。

我试过在其他线程中读取一些代码片段，但无济于事。当谈到 javascript 时，我是个笨蛋。

```
<script type="text/javascript" language="JavaScript">
    $(document).ready(function() {
        $('#submit').hide();
    });
$('.noEnterSubmit').keypress(function(e){
    if ( e.which == 13 ) 
    $('form#search').submit();
    e.preventDefault();
    return false;
});
</script> 
```

最重要的是，我有一个按钮，按下时专注于输入字段（因为在 iOS 设备上你不能强制专注于加载）

```
<form action="#CGI.SCRIPNAME#" method="post" name="search">
<label for="season_pass_id">Season Pass ID</label>
<input class="noEnterSubmit" type="password" name="season_pass_id">
<input id="submit" type="submit" name="submit" value="submit" >
<input type="button" name="mybutton" value="Scan New" OnClick="document.search.season_pass_id.focus();">
</form> 
```

最终我很想隐藏输入字段和提交按钮，只有“扫描新”按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:40:08.413

尝试将您的按键代码移动到`document.ready`处理程序中。我怀疑在附加事件时没有加载 dom 元素。

```
$(document).ready(function() {
    $('#submit').hide();
    $('.noEnterSubmit').keypress(function(e){
       e.preventDefault(); 
       if ( e.which == 13 ) 
        $('form#search').submit();    
    });
}); 
```

# css - CSS 颜色影响文本渲染

> ID：10147220
> 
> 赞同：1
> 
> 时间：2012-04-13T19:35:41.447
> 
> 标签：css

我发誓我首先尝试在其他地方找到这个答案，我讨厌自己问这个问题。

我似乎遇到的问题是，当我使用这种字体更改为另一种颜色时，它看起来很粗糙。下面这两个屏幕截图之间唯一不同的变量是颜色属性......

[http://personal.nekonook.net/wp-content/uploads/2012/04/help.jpg](http://personal.nekonook.net/wp-content/uploads/2012/04/help.jpg)

顶部 - 颜色：#000000；

底部 - 颜色：#808080；

我能得到的任何帮助都将不胜感激，如果它有所作为，它是一种嵌入式字体。

注意：我想为我的回复延迟道歉 - 我错误地期待一封电子邮件通知我答案。经验教训 - 我还想感谢 BoltClock 的独角兽，我相信它嵌入了我的图像，我会记住该代码以供将来参考，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:41:13.423

尝试

```
 font-weight:100; //may lighten it up 
```

也可以试试 text-shadow，让阴影成为你的背景色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:02:23.460

你在使用@fontface CSS 属性吗？您可能想尝试 Paul Irish 的这篇博文中提到的方法：

[http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)

# c++ - 函数“未在此范围内声明”

> ID：10147223
> 
> 赞同：2
> 
> 时间：2012-04-13T19:35:51.103
> 
> 标签：c++, compiler-errors

我是 C++ 新手，我正在尝试编写一个模拟足球比赛的程序。我收到一个编译器错误，指出函数 get_rank、get_player 和 get_name 未在此范围内声明。任何帮助是极大的赞赏！

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

class Player {
    int playerNum;
    string playerPos;
    float playerRank;
    public:
        void set_values(int, string, float);
        float get_rank(){ return playerRank; };
};

class Team {
    Player team[];
    string teamName;
    public:
        void set_values(Player[],string);
        Player get_player(int a) { return team[a]; };
        string get_name() { return teamName; };
};

void play(Team t1, Team t2){
    float t1rank = 0.0;
    float t2rank = 0.0;
    for(int i=0; i<11; i++){
        t1rank += get_rank(get_player(t1, i));
    }
    for(int j=0; j<11; j++){
        t2rank += get_rank(get_player(t2, j));
    }
    if(t1rank>t2rank){
        cout << get_name(t1) + " wins!";
    }
    else if(t2rank>t1rank){
        cout << get_name(t2) + " wins!";
    }
    else{
        cout << "It was a tie!";
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T19:37:13.427

看起来你想做类似的事情：

```
 t1rank += t1.get_player(i).get_rank(); 
```

在 C++ 中，方法调用的形式为`object.method(args)`. 在您的情况下，您有两个方法调用，一个 where `object`is`t1`和 method is `get_player`，第二个 object 是前一个调用的返回值，并且方法是`get_rank`.

# powershell - PowerShell 使用 GetEventLog CmdLet 出错

> ID：10147225
> 
> 赞同：0
> 
> 时间：2012-04-13T19:35:59.567
> 
> 标签：powershell, cmdlet

我正在尝试运行 PowerShell 脚本并尝试按消息过滤。

```
param($server, $message)
Try
{
    Invoke-Command -computername $server {Get-Eventlog -logname application -source "source" -message $message | Format-List}
}
Catch [Exception]
{
    Write-Host $_.Exception.ToString()
} 
```

我正在尝试使用以下参数运行脚本：

```
GetEventLog.ps1 "SERVERNAME" "TEXT_TO_FIND" 
```

> 无法验证参数“消息”上的参数。参数为 null 或空。提供一个不为 null 或空的参数，然后再次尝试该命令。+ CategoryInfo : InvalidData: (:) [Get-EventLog], ParameterBindingValidationException + FullyQualifiedErrorId : ParameterArgumentValidationError,Microsoft.PowerShell.Commands.GetEventLogCommand

由于某种原因，它可以很好地处理 $server 参数，但如果抱怨 $message 变量。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:50:59.630

您可以在没有 Invoke-Command 的情况下获取事件：

```
Get-EventLog -ComputerName $server -LogName application -source "source" -message $message 
```

如果命令生成错误，您将无法捕获它，因为它可能不是终止错误。要使错误终止，请使用 ErrorAction 参数：

```
 Get-EventLog -ComputerName $server -LogName application -ErrorAction Stop ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:43:39.333

试试这个方法：

```
Invoke-Command -computername $server {Get-Eventlog -logname application -source "source" -message $args[0] | Format-List} -ArgumentList $message 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:39:26.810

您需要使用 -ArgumentList 参数将 $message 作为参数传递。查看手册页的示例 9：

*[调用命令](https://docs.microsoft.com/en-us/previous-versions//dd347578(v=technet.10))*

```
invoke-command -computername server01 -scriptblock {param($log, $num) get-eventlog -logname $log -newest $num} -ArgumentList $MWFO_Log, 10 
```

# c# - 如何找出所有可能抛出的异常（特别是实体框架）

> ID：10147229
> 
> 赞同：2
> 
> 时间：2012-04-13T19:36:37.710
> 
> 标签：c#, entity-framework, exception-handling

*我认为这确实是一个通用的 C# 问题，但我在使用ObjectContext*特别是**SaveChanges()**持久化数据时尝试处理实体框架时想到了它

 **现在通常我只会遵循 MSDN 文档的建议以及所需异常的适当 try/catch 逻辑。SaveChanges() 的示例如下：

[http://msdn.microsoft.com/en-us/library/bb336792.aspx](http://msdn.microsoft.com/en-us/library/bb336792.aspx)

现在提出这个问题，因为阅读上面的链接，列出了一个异常，称为**OptimisticConcurrencyException**，这很好。现在阅读他们给出的示例，其中列出了另一个**UpdateException**。现在我希望它会列在“例外”标题中。

那么回到最初的问题，“我如何知道可能从对象或其方法抛出的所有异常”？

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:43:24.763

不幸的是，我不相信你可以。但是，如果您查看[OptimisticConcurrencyException](http://msdn.microsoft.com/en-us/library/system.data.optimisticconcurrencyexception.aspx)的继承结构，它继承自：

```
System.Object
  System.Exception
    System.SystemException
      System.Data.DataException
        System.Data.UpdateException
          System.Data.OptimisticConcurrencyException 
```

如果你抓住`System.Data.DataException`它应该抓住两者而不必做一个全面的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T19:42:34.590

我认为，当您指出**OptimisticConcurrencyException**时，只有一个例外。如果您仔细查看代码，您会注意到*SaveChanges()*仅抛出此异常。

**UpdateException**不是针对*SaveChanges()*而是针对

```
ObjectQuery<SalesOrderHeader> orders =
            context.SalesOrderHeaders.Where(
            "it.CreditCardApprovalCode IS NULL").Top("100"); 
```

或该示例中的其他代码行。**

# rally - 最高效的 Rally App SDK 查询和数据分组

> ID：10147230
> 
> 赞同：2
> 
> 时间：2012-04-13T19:36:42.383
> 
> 标签：rally

使用 Rally App SDK 获取数据分组的最有效方法是什么？例如，循环遍历每个项目和每次迭代以总结计划点。

1) 单一查询范围内所有项目的所有故事和缺陷，然后循环遍历每个项目和组项。[1 个查询和大量循环]

2) 遍历每个项目并遍历每个迭代，调用该迭代中该项目的故事和缺陷的查询。[许多查询和一些循环]

3）其他一些方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T15:27:19.847

作为一般规则，服务器请求很慢，并且在前端更聪明一点可以提高性能。

我可能会先尝试查询所有迭代。然后，我将根据该迭代列表创建一个巨大的 OR 查询过滤故事和缺陷。

这应该将您请求的数据保持在最低限度。如果您可以将迭代查询限制为只有某个 StartDate 或 State，这也应该有助于减少查询数量。

这是我最好的猜测，但不知道我们在谈论多少次迭代、故事和缺陷。

# policy - 如何部署 TFS2010 自定义策略而不需要在每台客户端机器上安装它

> ID：10147235
> 
> 赞同：3
> 
> 时间：2012-04-13T19:37:05.170
> 
> 标签：policy

我一直在研究 TFS 自定义策略，我对部署非常失望。我们如何保证新开发人员（可能在或不在同一个地方）将为他的机器上安装的某个项目定义所有自定义策略？

在我看来，在 TFS2010 项目中定义一个新策略是可能的，当一个新的开发人员与这个项目相关联时，在一个新的签入中，他会被要求下载所有应用的策略。

你认为有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T00:12:52.803

**您可以使用安装下载的自定义组件**在您的团队中分发签入策略，请参阅以下链接

[http://bartwullems.blogspot.com/2010/12/distributing-check-in-policies-across.html](http://bartwullems.blogspot.com/2010/12/distributing-check-in-policies-across.html)

# c# - 从客户端向服务器端发送数据 - 无效 JSON PRIMITIVE：位置

> ID：10147239
> 
> 赞同：1
> 
> 时间：2012-04-13T19:37:14.300
> 
> 标签：c#, jquery, asp.net, json

目前，我有一个用户在 ajax bing 地图上创建了很多点。当用户按下“提交”按钮时，我想获取存储在 map.entities 中的所有位置，我构建了一个 xml 格式的字符串，我想将它保存在我的数据库中：

```
<locations> <location><lat><lon>1.234</lon></lat></location>.....</locations> 
```

，所以在构建我的 XML 字符串之后，这不是问题，我将它存储在可变位置并执行以下操作：

```
$. ajax({ 
type: "POST",
url: "myPage.aspx/saveLocations"
data: {"xmlLoc: x"},
async: true,
cache: false,
success: alert ("success" + msg)
error: .... 
```

但不幸的是，这似乎不是传递我的数据的方式。这是我唯一一次成功，但味精是未定义的！！！

如果我写 data: x, <-- 我会遇到的问题是我收到了来自客户端的潜在危险请求

我的服务器端代码：

```
[Web Method]
public static string saveLocations(string s)
{
    return s; //just for testing purposes
} 
```

我不确定如果我必须使用 json 或其他东西，我是一个初学者，所以我不知道从哪里开始！非常感谢

* * *

编辑：我正在尝试另一种解决方法，但我总是得到无效的 json 原始错误！！！

```
var locations = '{ "location" : [';
function createBoundary() {                        
            for (x = 0; x < map.entities.getLength(); x++) {
                var pin = map.entities.get(x);
                locations += '{ "latitude": "' + pin.getLocation().latitude +'", "longitude": "' + pin.getLocation().longitude + '"},';
            }
locations += ']}';
jQuery.ajax({
                type: "POST",
                url: "Profiles_Schedules.aspx/GetXmlLoc",
                data:  eval("(" + locations + ")"),
                contentType: "application/json;charset=utf-8",
                datatype: "json",
                async: true,
                cache: false,
                success: function (msg) {
                    alert("Success " + msg.d);
                },
                error: function (x, e) {
                    alert("The call to the server side failed. " + x.responseText);
                }
            });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:40:41.050

尝试添加数据类型：

```
dataType: "json", 
```

另外我认为您的数据应该是“s”而不是“xmlLoc”，因为这就是您在行动中要寻找的。

并尝试更改您的操作：

```
[HttpPost]
public static string saveLocations(string s)
{
    return s; //just for testing purposes
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:45:06.887

我不确定接收端，但您的数据未以可识别的格式传递。 `jQuery.ajax()`对数据格式进行[智能猜测](http://api.jquery.com/jQuery.ajax/)，但对您来说最快的转换是 JSON：

```
data: '{"xmlLoc":"x"}' 
```

正确的 JSON 格式需要引号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T20:00:30.613

尝试将您的代码更改为以下内容：

```
data: {"s":"x"} 
```

[即使在 JSON 的网站上](http://json.org/)，如果您想要字符串到字符串，也必须使用引号格式化您的键/值对。我建议您将密钥命名为与您的参数相同。

根据[WebMethod 上的 MSDN，](http://msdn.microsoft.com/en-us/library/byxd99hx%28v=vs.90%29.aspx)我最初认为这可能无法通过 WebMethodAttribute 工作，因为它使用 SOAP 调用。但是，[这个 SO 问题](https://stackoverflow.com/questions/625250/webmethod-response-format)很有趣，因为它指出 JSON 将被格式化为适当的 SOAP 格式。有点好:)

**但是，**以上确实让我感觉更强烈的是，您的 json 密钥需要匹配您的方法签名的命名才能使序列化工作

# android - 在 Thread Android 中停止计时器

> ID：10147240
> 
> 赞同：0
> 
> 时间：2012-04-13T19:37:19.087
> 
> 标签：android, multithreading, timer

我有一个在线程中运行的计时器。这是代码：

```
timer = new Timer();
start_timer = new Thread(new Runnable() {
  public void run() {
    timer.schedule(new TimerTask() {

      @Override
      public void run() {
        myHandler.post(new Runnable() {
          public void run() {
            Log.e("asd", String.valueOf(tmp_chiamata_id)); 

            //do somethings

            Toast.makeText(getApplicationContext(), start_timer.getState().toString(), Toast.LENGTH_LONG).show();
          }
        });
      }
    }, 0, 1000);
  }
});
start_timer.start(); 
```

为了停止计时器，我写了这个：

```
if(timer != null){
        timer.cancel();
        start_timer.interrupt();
} 
```

问题是 logcat 停止显示 asd 但 toast 继续显示消息中断。我也尝试使用 start_timer.stop() 停止线程，但它无论如何都不起作用。我能怎么做？谢谢， 马蒂亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:41:15.530

使用处理程序和发送延迟消息更稳定、更容易

[http://www.tutorialforandroid.com/2009/01/using-handler-in-android.html](http://www.tutorialforandroid.com/2009/01/using-handler-in-android.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:45:23.217

也许从计时器对象调用 purge() 方法会有所帮助。正如文件所说，

“从任务队列中删除所有取消的任务。如果任务上没有其他引用，则在此调用之后，它们可以自由地被垃圾收集。”

# dns - 域名的赎回期持续时间

> ID：10147245
> 
> 赞同：4
> 
> 时间：2012-04-13T19:38:15.123
> 
> 标签：dns

下午好！

我已经阅读了一些有关域的文章，`redemptionPeriod`但仍然找不到明确的答案。这段时间的持续时间是多少？有人说 30 天，另一个保证 45 天。也许这取决于域注册器、区域等参数？我想在`.com`此处购买该域名，并提供一些相关信息：

状态：redemptionPeriod
更新日期：2012 年 4 月 4 日
创建日期：2009 年 2 月 24 日
到期日期：2012 年 2 月 24 日

那么什么时候可以购买呢？

还有一个问题：获得它的唯一方法是在拍卖会上出价，这是真的吗？也许可以像普通域名一样购买它？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-24T20:51:18.323

对于 .com，您应该有 30 天的赎回期。在此期间，旧所有者可以以高价恢复域。几天后将被删除。

.com 市场非常活跃，因此如果您想要的名称具有任何附加价值，它可能会在被删除后的几秒钟内被拍卖平台抢购，您只能从他们那里购买。

# tcl - 通过将记录存储在变量中来逐一显示记录

> ID：10147246
> 
> 赞同：0
> 
> 时间：2012-04-13T19:38:16.620
> 
> 标签：tcl

我有一个选择查询（查询返回 4 条记录，每条记录 7 行），它返回如下输出：

```
{HD 208 {} 2012-04-13 25 21 4} {SD 208 {} 2012-04-13 100 97 3} {HD 2072 {} 2012-04-13 5 4 1} {SD 2072 {} 2012-04-13 50 45 6} 
```

现在我想设置将它们存储在一个变量中并一一显示，以便我可以使用 html 表显示它，记录在 $get_record 中返回。所以这就是我正在做的

```
foreach record $get_record {
    foreach item [lindex $record 0] {

        set event_name [ lindex $item 0]
        puts $event_name
        set event_date [ lindex $item 1]
        put $event_date
        set attempts_cnt [ lindex $item 2]
        put $attempts_cnt
        set success_cnt [ lindex $item 3]
        put $success_cnt

  }
} 
```

不幸的是，这不起作用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:52:32.573

如果您使用的是 Tcl 8.5 或更高版本

```
foreach record $get_record {
    lassign $record event_name event_date attemts_cnt success_cnt
    puts $event_name
    puts $event_date
    puts $attempts_cnt
    puts $success_cnt
} 
```

如果您有 Tcl 8.4 或更早版本

```
foreach record $get_record {
    foreach {event_name event_date attemts_cnt success_cnt} $record {break}
    puts $event_name
    puts $event_date
    puts $attempts_cnt
    puts $success_cnt
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:08:32.040

扩展格伦的答案：

问题是您以错误的方式进行迭代：

1.  在外部循环中，变量“record”被一一分配到返回的行集中的每一行。
2.  然后你引入一个未知原因的内部循环，它的工作原理是这样的：
    1.  从包含在“记录”变量中的行中提取第一个元素；
    2.  将该元素解释为列表并对其进行迭代。使用您的数据，该元素将类似于“HD”，它被解释为一个元素的列表（毫不奇怪，“HD”）。

这个错误现在应该很清楚了。

因此 Glenn 提供的修复很简单：

*   只保留外部循环，它遍历结果集的行。
*   对于每一行，将该行的“列值”的值分配给一组命名变量。已经为您提供了惯用的方法（或使用+`lassign`的技巧），但您也可以保留您的+方法（但它更冗长且不那么优雅）。`foreach``break``lindex``set`

# android - 通过 UDP 套接字发送 android 传感器数据

> ID：10147249
> 
> 赞同：1
> 
> 时间：2012-04-13T19:38:41.540
> 
> 标签：android, sockets, udp, sensors

我正在编写一个应用程序来从我的 Android 手机（GPS 位置、加速度计、方向）获取传感器数据，并通过 UDP 将数据发送到服务器（顺便说一下，我计划为此使用 Python）。

现在，我已经设法获取传感器数据并显示它们，但有点卡在想办法将各种传感器数据组合成一个数据包，并通过 UDP 发送数据包。我不知道如何“合并”数据，使其仍然可以被服务器识别，例如它来自加速器，或者它是 GPS 坐标等。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:02:52.697

如果您在服务器端使用 Python，您可以将值打包成 JSON 字符串，例如 { "sensor": somedata, "gps": somedata }

*（因为使用json.loads*将 JSON 对象反序列化为字典非常容易）

然后将此字符串放入UDP数据包

要创建 JSON 字符串，您可以使用这些类[http://developer.android.com/reference/org/json/package-summary.html](http://developer.android.com/reference/org/json/package-summary.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T00:34:17.497

JSON 很好，或者您可以使用 Jython 让您利用 Java 的序列化库。这样做的好处是您不必做任何工作来将您的类转换为可序列化的格式，实际上只需实现可序列化并添加一个 serialVersionUID。

复制自[Jython 提示](http://onlamp.com/pub/a/python/2002/04/11/jythontips.html?page=2)：

9 序列化

Java 对象不能使用标准的 Python pickle 和 cPickle 模块进行序列化。Java 和 Jython 对象都可以使用普通的 Java 序列化进行序列化。但是，在反序列化 Jython 对象时，您不能使用普通的 java.io.ObjectInputStream 类，您必须使用 Jython 特定的 org.python.util.PythonObjectInputStream，如下所示：

```
import java.io as io
import org.python.util as util

class TestClass(io.Serializable):
    def __init_ _(self, value=0):
        self.value = value
        self.message = "Serialized"

    def toString(self):
        return "Message: %(message)s value: 
          is %(value)s" % self.__dict_ _

instance = TestClass(3)

outFile = io.FileOutputStream("test.ser")
outStream = io.ObjectOutputStream(outFile)
outStream.writeObject(instance)
outFile.close( )

inFile = io.FileInputStream("test.ser")
inStream = util.PythonObjectInputStream(inFile)

readInstance = inStream.readObject( )
print readInstance.toString( )
Message: Serialized value: is 3 
```

如果不使用 PythonObjectInputStream，则会出现运行时错误，因为普通的 Java ObjectInputStream 很难找到和重新创建用于 Jython 的 Java 继承的动态加载的代理类。

# php - 外部 wsdl 的 file_get_contents 权限被拒绝

> ID：10147253
> 
> 赞同：2
> 
> 时间：2012-04-13T19:38:54.580
> 
> 标签：php, http

我的网络中有三个盒子

Box#1 - 一个带有 apache 和 php 的 RHEL 盒子（基本上是一个 LAMP 盒子）
Box#2 - 一个带有 JBoss 的 windows 盒子，它使用 apache 轴 2 托管一个 WSDL
Box#3 - 另一个 windows 盒子（基本上是一个 XAMPP 盒子——更多关于之后的第三个盒子）

当我尝试在 box#1 上运行 PHP 脚本时，该脚本使用 SoapClient 对象在浏览器中访问 box#2 的 WSDL，它返回：

> > 致命错误：未捕获的 SoapFault 异常：[WSDL] SOAP-ERROR：解析 WSDL：无法从“http://XXX.XXX.XXX.XXX:8080/axis2/services/TheService?wsdl”加载：无法加载外部实体

然后我尝试使用 box#2 只是为了简单地返回我返回的 wsdl 文件的 file_get_contents：

> > 警告：file_get_contents(http://XXX.XXX.XXX.XXX:8080/axis2/services/TheService?wsdl)：无法打开流：第 4 行 /application/test.php 中的权限被拒绝

然而！当我以运行 apache 的同一用户身份登录时通过 telnet（命令行）运行最后一个脚本（file_get_contents）时，它返回 WSDL 的内容......（！）

--

我尝试在 Windows 框（框 #3）上运行相同的代码，如果 PHP.ini 设置与框 #2 不太相同，我可以使用 wsdl 并获取内容WSDL 文件没有问题。

--

我搜索了（stackoverflow 和 google），发现其他人也有同样的问题，并尝试了列出的解决方案，包括：

*   我的 PHP.ini 的 max_file_size 设置为 128M（大于 wsdl）
*   allow_url_fopen 设置为 on

只是为了看看它是否适用于 box#1，我尝试使用 cURL 来获取文件的内容，但它没有返回任何内容。

如果有人能给我任何见解，将不胜感激。我确定在 PHP.ini 中有一个我缺少的设置或一些非常小的设置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-24T06:52:32.730

我今天遇到了同样的问题，几个小时后，在尝试`file_get_contents`了我的 WSDL URL 之后，我注意到我的 apache 错误日志中出现了权限被拒绝错误。我发现 SELinux 是罪魁祸首。我相信默认情况下，SELinux 会阻止 httpd 发出自己的网络请求（至少在 Fedora 上）。

修复是：`setsebool -P httpd_can_network_connect 1`，然后允许 Apache 连接到远程服务（它适用于 SSL 和非 SSL 请求）。

还在这里回答：[SOAP-ERROR: Parsing WSDL: Couldn't load from url](https://stackoverflow.com/questions/9532790/soap-error-parsing-wsdl-couldnt-load-from-url/)

# c++ - 将代码块用于 const unsigned long 时出现 GCC 错误

> ID：10147256
> 
> 赞同：3
> 
> 时间：2012-04-13T19:39:02.503
> 
> 标签：c++, gcc

考虑这段代码

```
class Reflect : public flemax::annotation::XAnnotation {
  public:
    Reflect(const unsigned long id, const std::string& home, const char type, const std::string& name = "me", const int value = 4, const bool valid = false, const signed char gender = 'M') : id_(id), home_(home), type_(type), name_(name), value_(value), valid_(valid), gender_(gender){} 
    ~Reflect() {}

    const unsigned long id() { return id_; }
    const std::string& home() { return home_; }
    const char type() { return type_; }
    const std::string& name() { return name_; }
    const int value() { return value_; }
    const bool valid() { return valid_; }
    const signed char gender() { return gender_; }

  private:
    const unsigned long id_;
    const std::string home_;
    const char type_;
    const std::string name_;
    const int value_;
    const bool valid_;
    const signed char gender_;

}; // class Reflect 
```

它没有编译，编译器给了我这个奇怪的错误。

```
||=== flemax_base, DebugAnnotator ===|
/programming/cpp-projects/flemax/flemax_base/base/xannottest.cc|21|error: expected ‘,’ or ‘...’ before ‘long’|
/programming/cpp-projects/flemax/flemax_base/base/xannottest.cc|24|error: expected ‘;’ before ‘long’|
/programming/cpp-projects/flemax/flemax_base/base/xannottest.cc|25|error: expected ‘;’ before ‘const’|
/programming/cpp-projects/flemax/flemax_base/base/xannottest.cc|33|error: expected ‘;’ before ‘long’|
/programming/cpp-projects/flemax/flemax_base/base/xannottest.cc||In constructor ‘flemax::test::Reflect::Reflect(int)’:|
/programming/cpp-projects/flemax/flemax_base/base/xannottest.cc|21|error: class ‘flemax::test::Reflect’ does not have any field named ‘id_’|
/programming/cpp-projects/flemax/flemax_base/base/xannottest.cc|21|error: ‘id’ was not declared in this scope|
/programming/cpp-projects/flemax/flemax_base/base/xannottest.cc|21|error: argument of type ‘const int (flemax::test::Reflect::)()’ does not match ‘const int’|
/programming/cpp-projects/flemax/flemax_base/base/xannottest.cc|21|error: argument of type ‘const bool (flemax::test::Reflect::)()’ does not match ‘const bool’|
/programming/cpp-projects/flemax/flemax_base/base/xannottest.cc|21|error: argument of type ‘const signed char (flemax::test::Reflect::)()’ does not match ‘const signed char’|
||=== Build finished: 12 errors, 0 warnings ===| 
```

当我删除 unsigned 修饰符时，一切正常。可能我在过去的 24 小时里一直在编码，所以我看不出有什么问题，我很震惊。在该代码按原样编译之前，我不想睡觉。

我在 ubuntu 和 gcc 4.4.3 上使用代码块

谢谢男人

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T20:21:14.713

我敢打赌，你有一个`#define unsigned WHATEVER`地方。或者，也许您正在使用`-Dunsigned=WHATEVER`.

所以编译器`const WHATEVER long x`到处可见，`long`类型在那里毫无意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:58:35.210

此代码使用 gcc 4.6.3 在我的计算机上编译。解决方案是将编译器版本更改为最新版本。

但是，这是一个奇怪的错误，可能存在编译器错误。如果您不想更改编译器版本，请尝试将私有部分放在类的开头。希望有所帮助。

# iphone - iOS 获取用户 iTunes 邮寄地址？在应用程序中购买真实产品以发货？

> ID：10147258
> 
> 赞同：1
> 
> 时间：2012-04-13T19:39:09.413
> 
> 标签：iphone, objective-c, ios

我有一个应用程序，我希望用户在其中触摸“立即购买”。发生这种情况时，Apple 将获得 30% 的分成，然后将实物商品运送到用户的邮寄地址。

*   有没有办法检索用户的邮寄地址？
*   人们在应用程序中购买现实世界的消耗品有什么问题吗？

同样，用例是：用户看到他们想要购买的物品（即烤面包机）。他们在应用程序中单击“立即购买”。发生应用内购买。一旦购买发生，我们的团队就会收到我们应该发货的通知。我们以某种方式收到用户的邮寄地址（我想我们可以在购买前手动收集）。然后我们运送物品。

关于如何解决这个问题的任何想法？

阅读所有这些评论，我怎样才能让用户购买真实世界的商品并将其运送给他们？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T19:45:45.877

> 使用应用内购买使您的用户能够购买在应用内使用的积分。**您不能使用应用内购买来提供在您的应用之外使用的实物商品和服务。**

来自[Apple 的应用内购买文档](https://developer.apple.com/appstore/in-app-purchase/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:49:52.577

我相信 iTunes 信用只能用于购买虚拟商品。在这一点上，您可能需要仔细检查 App Store 提交指南。此外，我相信您根本无法获得任何个人身份信息——当然不是用户的姓名和地址。您可以提示，但如果您收集 PII，则应考虑提供使用条款。

# jsf-2 - JSF f:事件执行顺序

> ID：10147261
> 
> 赞同：4
> 
> 时间：2012-04-13T19:39:22.147
> 
> 标签：jsf-2

假设我有多个 f:event 标签来处理同一种事件：

```
<f:event type="preRenderView" listener="#{myBean.action1()} />
<f:event type="preRenderView" listener="#{myBean.action2()} /> 
```

执行顺序是否有保证？

**编辑：**
为了阐明为什么我需要按特定顺序执行它们，这是我的用例：

myBean#action1 实际上是一个 setter

myBean#action2 是对 action1 设置的字段进行操作的方法

在我看来，这个顺序是不可靠的，这就是为什么我简单地将它们`EL expressions`放在我的 facelet 中，如下所示：

```
<p:ouputPanel>
  #{myBean.action1()}
  #{myBean.action2()}
</p:ouputPanel> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T20:07:52.100

该[规范](http://jcp.org/aboutJava/communityprocess/final/jsr314/index.html)似乎没有在任何地方明确说明这一点。

[`Application#publishEvent()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/Application.html#publishEvent%28javax.faces.context.FacesContext,%20java.lang.Class,%20java.lang.Object%29)API 提到它们是作为[`List`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html)自然有序的获取和处理的。Mojarra和[MyFaces](http://grepcode.com/file/repo1.maven.org/maven2/org.apache.myfaces.core/myfaces-api/2.1.6/javax/faces/component/UIViewRoot.java#1247)实现都通过将它们分别存储在 a和中[来](http://grepcode.com/file/repo1.maven.org/maven2/com.sun.faces/jsf-api/2.1.7/javax/faces/component/UIViewRoot.java#1557)证实这一点。`CopyOnWriteArrayList``ArrayList`

因此，逻辑上基于 API 和这两个实现，如果添加到同一个父 UI 组件，它们确实是按顺序执行的。

# c++ - char数组声明中字符串文字周围的大括号有效吗？（例如 char s[] = {"Hello World"}）

> ID：10147264
> 
> 赞同：50
> 
> 时间：2012-04-13T19:39:40.770
> 
> 标签：c++, c, string, arrays, array-initialization

偶然我发现该行`char s[] = {"Hello World"};`已正确编译并且似乎与`char s[] = "Hello World";`. 第一个 ( `{"Hello World"}`) 不是一个包含一个元素的数组，它是一个 char 数组，所以 s 的声明应该是 s`char *s[]`吗？实际上，如果我将其更改为`char *s[] = {"Hello World"};`编译器，也会像预期的那样接受它。

寻找答案，我发现唯一提到这个的地方就是[这个](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/aryin.htm)，但没有引用标准。

所以我的问题是，`char s[] = {"Hello World"};`尽管左侧是 type`array of char`而右侧是type ，但为什么要编译该行`array of array of char`？

以下是一个工作程序：

```
#include<stdio.h>
int main() {
    char s[] = {"Hello World"};
    printf("%s", s); // Same output if line above is char s[] = "Hello World";
    return 0;
} 
```

感谢您的任何澄清。

PS 我的编译器是 gcc-4.3.4。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-04-13T19:50:10.193

这是允许的，因为标准是这样说的：C99 第 6.7.8 节，第 14 节：

> 字符类型的数组可以由字符串字面量初始化，可选地用大括号括起来。字符串文字的连续字符（如果有空间或数组大小未知，则包括终止的空字符）初始化数组的元素。

这意味着两者

```
char s[] = { "Hello World" }; 
```

和

```
char s[] = "Hello World"; 
```

只不过是语法糖

```
char s[] = { 'H', 'e', 'l', 'l', 'o', ' ', 'W', 'o', 'r', 'l', 'd', 0 }; 
```

在相关说明（同一部分，§11）中，C 还允许在标量初始化器周围使用大括号，例如

```
int foo = { 42 }; 
```

顺便说一句，它非常适合复合文字的语法

```
(int){ 42 } 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-13T19:45:10.227

大括号是可选的，表达式仅相当于一个 char 数组。

你也可以这样写：

```
 int a = {100}; //ok 
```

演示：http: [//ideone.com/z0psd](http://ideone.com/z0psd)

事实上，`C++11`概括了这种语法，统一初始化非数组和数组。所以在 中`C++11`，你可以拥有这些：

```
int a{}; //a is initialized to zero, and it is NOT an array

int b[]{1,2,3,4}; //b is an array of size 4 containing elements 1,2,3,4

int c[10]{}; //all 10 elements are initialized to zero

int *d{}; //pointer initialized to nullptr

std::vector<int> v{1,2,3,4,5}; //vector is initialized uniformly as well. 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-13T19:46:21.660

`int`( ,等) 中的任何变量`char`都只是一个长度为 1 的数组。

```
char s = {0}; 
```

也可以。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T19:45:43.640

我可能错了，但我认为这不是一个字符数组数组，而是一个块包含一个字符数组。`int a = {1};`也可以工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T20:19:44.620

> [...] 实际上，如果我将其更改为 char *s[] = {"Hello World"}; 正如预期的那样，编译器也接受它

编译器接受它，因为实际上，您正在制作一个包含未定义大小元素的二维数组，其中仅存储一个元素，即`"Hello World"`字符串。像这样的东西：

```
char* s[] = {"Hello world", "foo", "baa" ...}; 
```

`bracets`在这种情况下，您不能省略。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-29T10:56:17.020

C++ 标准也允许这样做，引用：

> [[dcl.init.string] §1](http://eel.is/c++draft/dcl.init.string#1)
> 
> 窄字符类型的数组 ([basic.fundamental])、char16_t 数组、char32_t 数组或 wchar_t 数组可以分别由窄字符串文字、char16_t 字符串文字、char32_t 字符串文字或宽字符串文字初始化，**或者**通过**括在大括号中**的适当类型的字符串文字([lex.string])。[剪辑]

# iphone - 在 UIAutomation 的 UINavigationBar 中访问 UIToolbar 中的 UISearchBar

> ID：10147266
> 
> 赞同：0
> 
> 时间：2012-04-13T19:39:58.020
> 
> 标签：iphone, ui-automation, ios-ui-automation

我们只支持横向模式，由于某种原因，当我们推送到不同的视图控制器，旋转应用程序，然后弹出时，我们的 UISearchBar 将占据整个导航栏，甚至将标题推送到 LHS。所以我们最终将 UISearchBar 包装在 UIToolbar 中，这似乎解决了这个问题。

因此，在第二个被推入堆栈的视图控制器上，我们在 UINavigationBar 的 UIToolbar 中有一个 UISearchbar。我似乎无法访问它。我想编写一个脚本来输入一些搜索项并单击这些项，这样当我们的数据模型发生变化时，我们就不会崩溃。

我遇到的问题是我不确定如何访问它。我假设

```
UIATarget.localTarget().frontMostApp().mainWindow() 
```

可以在不仅仅是 rootViewController 的屏幕上使用。所以我试着做

```
UIATarget.localTarget().frontMostApp().mainWindow().navigationBar().toolBar().tap(); 
```

但这不起作用。我假设 navigationBar().buttons()[---] 也不会提供任何用途，因为它不是我要访问的按钮。当我做

```
window.logElementTree(); 
```

我懂了：

```
UIAWindow
-> UIANavigationBar
-> -> UIAButton
-> -> UIAToolbar  // (I'm trying to show the disclosure triangles in how it looks like in the log. 
```

所以我可以看到我需要的导航栏，以及它下面的工具栏，但不知道如何到达它。

我也试过这个

```
var navBarElements = window.navigationBar().elements();

for (var elem in navBarElements) {
    if (elem["Toolbar"]) {
        UIALogger.logMessage("toolbar");            
    }
} 
```

在我创建工具栏时的代码 viewDidLoad 中，我有这个：

```
UIToolbar *toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 160, 44)];
toolbar.accessibilityIdentifier = @"Toolbar"; 
```

但是我从来没有得到表明我有正确的项目的 logMessage。我是否一直试图只使用屏幕并点击它？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T18:08:06.813

尝试使用返回 UIAElementArray 对象而不是 UIAElement 的函数

```
UIATarget.localTarget().frontMostApp().mainWindow().navigationBar().toolBars()[<LabelOfToolBarOrIndexStartingFromZero>].tap(); 
```

甚至

```
UIATarget.localTarget().frontMostApp().mainWindow().navigationBars()[<NameOfNavigationBarOrIndexStartingFromZero>].toolBars()[<LabelOfToolBarOrIndexStartingFromZero>]].tap(); 
```

顺便说一句，尝试更换

```
if (elem["Toolbar"]) 
```

和

```
if (elem["object UIAToolbar"]) 
```

# google-app-engine - Google Cloud Storage 不适用于 Google Apps？

> ID：10147267
> 
> 赞同：5
> 
> 时间：2012-04-13T19:40:01.237
> 
> 标签：google-app-engine, google-cloud-storage

我正在尝试使用现在在 App Engine 站点的文档部分下发布的 Google Cloud Storage API。文档说明您必须将 appengine 服务帐户添加为 API 控制台中的团队成员。但是，我们在 Google Apps 域中使用 Cloud Storage，它只允许将该域中的用户添加为团队成员。那么，不可能添加服务帐户（即@appspot.gserviceaccount.com）吗？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T19:42:15.920

是的，您可以使用[GSUtil](https://developers.google.com/storage/docs/gsutil)将服务帐户添加到存储桶的 ACL。
请参阅我[关于该主题的相关答案](https://stackoverflow.com/questions/9450117/allowing-publicly-shared-files-on-google-cloud-storage/9451195#9451195)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:52:10.160

这是我昨天对类似问题的回答 - 这里的优势是更容易访问其他开发人员 API，这些 API 使用在开发人员控制台中配置的团队和 App Engine 应用程序。

您可以使用 google 组来为您的自定义域进行这项工作。

在用于管理您的域的 cpanel 中，转到“组”选项卡并添加一个用于您的应用的新组。
将服务帐户 *.gserviceaccount.com 作为成员添加到您创建的组中。[在https://code.google.com/apis/console](https://code.google.com/apis/console)
将组添加到您的项目的团队中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-18T00:22:40.120

除了发布的其他解决方案之外，如果您使用 gmail.com 帐户创建新项目，您可以将 Apps 帐户添加为项目的所有者，甚至删除原始 gmail 帐户，同时仍保留将任何帐户添加到该项目。

# sql - 复杂的 sql：包括产品表中的记录，其中连接值已在连接表中设置为已删除值

> ID：10147268
> 
> 赞同：1
> 
> 时间：2012-04-13T19:40:02.753
> 
> 标签：sql, sql-server

我有一个提供移动应用程序的网络服务。出于多种原因，我通过服务将数据发送到应用程序，并通过查询将产品、类别产品和类别连接到产品所在的每个类别的单个记录中：

```
 SELECT * FROM
    (SELECT ROW_NUMBER() OVER(ORDER BY Products.ItemID, Products.ManufacturerID) AS RowNum,
         Products.ProductID, Products.ItemID, Products.ManufacturerID, Categories.CategoryID, Categories.CategoryName, CategoryProducts.CategoryProductID,  Products.ItemName, Products.Description, Products.Notes, 
                      Products.Dimensions, Products.BasePrice, Products.OrderMinimumQuantity, 
                      ContainerMinimumQuantity = 
                        CASE  COALESCE(Products.ContainerMinQty, 0)
                            WHEN 0 THEN Products.OrderMinimumQuantity
                            ELSE Products.ContainerMinQty
                        END 
                      , Products.OrderMultipleQuantity, Products.OnHandQuantity, 
                      Products.Category, Products.IntroDate, Products.BackOrderDate, Products.UPC, Products.PriceLevel1, Products.PriceLevel2, Products.PriceLevel3, 
                      Products.PriceLevel4, Products.PriceLevel5, Products.PriceLevel6, Products.PriceLevel7, Products.PriceLevel8, Products.PriceLevel9, Products.PieceBox, 
                      Products.Cubes, Products.UnitOfMeasure, Products.UDF1, Products.UDF2, Products.UDF3, Products.UDF4, Products.UDF5, Products.AdditionalImageCount, 
                     PhotoName= LOWER(Products.PhotoName),  Products.Discontinued, Products.ModifiedOn, 
                        CategoryProducts.IsDeleted, Products.PriceLevel10, Products.PriceLevel11, Products.PriceLevel12, Products.PriceLevel13, 
                      Products.PriceLevel14, Products.PriceLevel15, Products.PriceLevel16, Products.PriceLevel17, Products.PriceLevel18, Products.PriceLevel19, Products.PriceLevel20, 
                      Products.Weight, Products.DimensionsMetric, Products.Source, Products.InventoryStatus, Products.CatalogCode, Products.CatalogName, 
                       CategoryProducts.SortOrder
 JOIN
                Categories INNER JOIN
                      CategoryProducts ON Categories.CategoryID = CategoryProducts.CategoryID RIGHT OUTER JOIN
                      Products ON CategoryProducts.ManufacturerID = Products.ManufacturerID AND CategoryProducts.ItemID = Products.ItemID
WHERE     (Products.ManufacturerID = @ManufacturerID)
            AND 
            (Products.ModifiedOn > @tStamp OR  CategoryProducts.ModifiedOn > @tStamp)
) AS Products
    WHERE RowNum >= @StartRow AND RowNum <= @EndRow 
```

这让我的所有产品都变得扁平化，包括不属于任何类别的产品，这正是我想要的。这样做的问题是，如果产品已在某个类别中并且该类别产品已被删除，则 IsDeleted 标志设置在归结为设备的单个展平记录上。这是一个问题，因为产品本身并没有被删除，而是产品类别，但我的设备只看到一条记录，其中设置了 IsDeleted 标志以将其删除。因此，在这种情况下，我既需要包含已删除信息的展平产品的行，也需要该产品的行，就好像它没有被删除一样，以便用户仍然可以在设备上搜索该产品。

希望我清楚地解释了这一点，我已经为此苦苦挣扎了一个星期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:38:15.427

If you need to see two rows, then I would expect to see a UNION ALL in the subquery. I think you need to include all products as well as all non-deleted product categories.

# vim - Vim：如何使用函数调用导致：提示命令

> ID：10147270
> 
> 赞同：1
> 
> 时间：2012-04-13T19:40:06.760
> 
> 标签：vim

例如，假设我在 vim 中打开了几个窗口：

```
:echo winnr()
:argument 5 
```

... 将打印出当前窗口编号，然后切换到命令行上传递给 vim 的第 5 个文件。假设`winnr() == 5`，那么我会期望...

```
:argument winnr() 
```

... 打开第 5 个文件进行编辑。但是，vim 将其视为我没有输入`argument`任何参数。

我可以使用函数调用结果作为上面尝试的 vim 命令的参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:50:07.270

终于找到了答案。我想删除这个问题，但有人可能想知道答案。

```
:execute 'argument ' . winnr() 
```

# ms-access - MS Access 中的编程复选框

> ID：10147280
> 
> 赞同：0
> 
> 时间：2012-04-13T19:40:59.227
> 
> 标签：ms-access, checkbox

我正在 MS Access 中编写一个简单的复选框。事情是这样的：

1.  我有一个组合框，其中包含用户可以选择的值的下拉列表。（例如 b1、b2、c1、d1、d2、d3、e0、e2 等）它们只是 2 个字符的文本字符串。
2.  当用户想要修改下拉列表中的值时，我有一个复选框可供使用。基本上它所做的就是，当复选框被选中时，它会将任何值更改为“ds（下拉值）”，所以它只是添加“ds（）”。（例如ds（b1），ds（b2） , ds(c1) 等)
3.  如果用户取消选中该复选框，则该值将保留为 2 个字符的文本字符串。

这是我第一次涉足 Access 编程。我的伪代码如下：

```
Private Sub distchk_Click()
if distchk is checked then
   Me.ECOSITE = "ds(" & Me.ECOSITE & ")"
else:
   Me.Ecosite
End Sub 
```

我测试过：

```
Private Sub distchk_Click()
Me.ECOSITE = "ds(" & Me.ECOSITE & ")"
End Sub 
```

但它会在我检查它时不断添加额外的 ds() ，如果我取消选中它就不会删除它。

任何建议都会很棒！

麦克风

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T20:53:42.647

您正在为自己做不必要的工作，并为您的用户带来更混乱的界面。您正在收集两个*离散*的数据：LandCoverType（文本字段）和 IsDisturbed（是/否字段，也称为布尔值或位字段），因此我认为没有理由将它们组合到输入表单中。通过将土地覆盖类型包装在“ds()”中，您不会向用户提供任何附加信息。我建议两种替代方法：

**两个单独的字段** *（首选方法）*

*   创建一个 LandCoverType 字段（文本）；将您的组合框绑定到此字段（在 ComboBox ControlSource 中输入`LandCoverType`）
*   创建一个 IsDisturbed 字段（是/否）；将您的复选框绑定到此字段（与上述相同）
*   如果您想在报告中显示“ds()”，则将其作为报告字段格式的一部分（例如，`=IIf([IsDisturbed], "ds(" & [LandCoverType] & ")", [LandCoverType])`）

**一个联合领域**

*   创建单个 LandCoverType 字段（文本）
*   更改组合框的 RowSource 以包括所有带和不带的 LandCoverType `ds()`（例如，如果您的 RowSource 是值列表`b1, b2, c1, ds(b1), ds(b2), ds(c1)`：）

# jquery - 跳转到锚标签而不在 URL 中显示主题标签

> ID：10147283
> 
> 赞同：8
> 
> 时间：2012-04-13T19:33:18.157
> 
> 标签：jquery

`onload`当用户单击帖子标题时，我目前正在使用 jQuery 加载特定主题标签的页面（通过body 类中的函数）。主题标签显然显示在网址中。我想知道是否有办法隐藏主题标签以免弄乱 URL。做了一些搜索，并没有想出太多。

```
function goToAnchor() {
    location.href = "#post";
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-13T19:44:38.183

如此处所示：http: [//djpate.com/2009/10/07/animated-scroll-to-anchorid-function-with-jquery/](http://djpate.com/2009/10/07/animated-scroll-to-anchorid-function-with-jquery/)

```
function goToByScroll(id){
    $('html,body').animate({scrollTop: $("#"+id).offset().top},'slow');
} 
```

只需传递您希望滚动到的元素的 id。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T19:44:50.273

您可以将单击事件绑定到这种特定类型的锚点，并防止其出现默认值：

```
$('.anchorClass').on('click', function(e) {
  e.preventDefault();
  // rest of stuff
}); 
```

“其余的东西”意味着找到某种会跳转页面的插件或代码示例。如果你想让它顺利滚动，有一个非常流行的 scrollTo 插件。甚至可能是 scrollTo 插件负责默认预防。

[更新]

杰夫的建议（假设它有效）是“其余的东西”，并且是两个答案中更有用的。;-) 但是防止违约仍然很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-22T09:54:30.293

我认为您可以只使用 .htaccess 文件。在那里，您可以将一些 url 链接放在同一个地址。

例如`fff.com/fff`and `fff.com`and`fff.com#anchor`可以显示`fff.com`在浏览器的选项卡上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-18T08:17:40.653

跳转/平滑滚动到锚标签而不在 URL 中显示主题标签

[试用演示](https://codepen.io/ProgrammingDIY/pen/XBvQQq)

```
function scrollSmoothTo(elementId) {
  var element = document.getElementById(elementId);
  element.scrollIntoView({
    block: 'start',
    behavior: 'smooth'
  });
}
```

```
#userdiv {
  margin-top: 200px;
  width: 200px;
  height: 400px;
  border: 1px solid red;
}

a {
  color: #337ab7;
  cursor: pointer;
}

a:hover {
  text-decoration: underline;
}
```

```
<a onclick="scrollSmoothTo('userdiv')">
  Scroll to userdiv
</a>

<div id="userdiv">
  Lorem ipsum this is a random text
</div>
```

# php - 最小化 php 进程

> ID：10147288
> 
> 赞同：-1
> 
> 时间：2012-04-13T19:41:38.197
> 
> 标签：php, jquery

我有一个页面定期发出大量 jQuery ajax 请求，要求来自 php 函数的响应，如下所示：

```
$.ajax({
      url: "functions.php",
      type: "POST",
      data: {action : 'getData', id : draftid},
      dataType: "html"
    }).done(function(output) {
        $("#myDiv").html(output);
    }); 
```

现在，当我在打开这一页的同时查看机器上正在运行的任务时，我会看到四五个 php 任务正在运行。我计划让这个页面在多个页面上同时运行，我觉得我的主人不会对此感到太高兴。

是否有另一种方法可以让 jQuery 获取我从 php 脚本（主要是 MySQL 请求）中获取的信息，以最大限度地减少任务数量和 CPU 使用率？

编辑：functions.php 文件基本上只是一个 switch 语句，它调用请求的函数，该函数发出 SQL 请求并返回相关数据。

我不知道 PHP 任务的具体细节。当我运行 top 时，我看到许多带有命令 'php' 的进程。我不是 Linux 专业人士，所以也许我可以运行一个命令来找出这些进程更具体地在做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:47:16.803

您可以将任何请求组合成一个请求吗？您必须以某种方式解析返回数据，但这没什么大不了的。你对服务器有控制权吗？如果是这样，您可以尝试使用 fast-cgi 的 Web 服务器来控制正在运行的进程数和池数据库连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:48:26.713

优化的 SQL 查询，可能在可能的情况下构建缓存系统？（不知道你在那里编程！）

您也可以切换到另一个性能更高的 Web 服务器（我更喜欢 Litespeed，它比 Apache 快大约 60%）

也不要怀疑 Apache 是否同时运行多个实例，这在 apache 上是正常的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:50:41.990

在不知道更多信息的情况下，我不能说太多，但你不能直接从 javascript 连接到 mysql 服务器。根据您需要的数据，可能有一些方法可以显着减少后端处理。

一些通用的想法：

*   将您的 ajaxs 请求组合成一个“心跳”/更新请求，这样您就只有 1 个进程正在运行

*   如果您可以使用 memcache 之类的东西对数据库数据进行一些后端缓存

*   使用 XDEBUG 和 webgrind 分析和优化您的 ajax 请求

# sql - Rails 嵌套 SQL 查询

> ID：10147289
> 
> 赞同：21
> 
> 时间：2012-04-13T19:41:39.427
> 
> 标签：sql, ruby-on-rails

我有一个数据库模型`Position(lat,lon)`，它拥有`latitudes`并且`longitudes.`

我有一个名为的控制器操作`show_close_by`，它接收一个以度为单位的位置`(my_lat, my_lon)`，一个公差（以公里为单位），并且应该返回数据库中在公差范围内的位置列表。

为此，我使用 hasrsine_distance 公式计算两个坐标之间的距离（以公里为单位）（在地球表面）`(lat1, lon1, lat2, lon2)`。

为了使查询更快，我在查询中编写了整个`haversine_distance`公式：

```
... WHERE 2*6371*asin(sqrt( power( sin( (:lat2-latitude)*pi()/(180*2) ) ,2) + cos(latitude*pi()/180)*cos(:lat2*pi()/180)*power(sin( (:lon2-longitude)*pi()/(180*2) ),2) )) < tolerance 
```

查询的细节无关紧要。我的疑问是：是否有必要为数据库中的每个位置计算这个巨大的函数？我可以用更简单的功能过滤掉一些明显太远的位置吗？

好吧，我可以：使用嵌套 SQL 查询，我可以在数据库中查询大“正方形”（在纬度/经度空间中）内的位置，然后使用成本更高的三角函数过滤这些位置。类似于以下内容：

```
SELECT * FROM ( SELECT * FROM Positions WHERE lat-latitude < some_reasonable_upper_bound AND lon-longitude < same_upper_bound ) WHERE costly_haversine_distance < tolerance 
```

最后，我的问题是：如何在 Rails 中实现这一点（无需自己编写整个查询）？是否`Positions.where(reasonable_upper_bound).where(costly_but_accurate_restriction)`进行嵌套查询？如果没有，怎么办？

非常感谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-13T20:39:53.737

Here's how to make nested queries:

```
LineItem.where(product_id: Product.where(price: 50)) 
```

It makes the following request:

```
SELECT "line_items".* FROM "line_items" 
WHERE "line_items"."product_id" IN 
(SELECT "products"."id" FROM "products" WHERE "products"."price" = 50) 
```

Note that **only** `id`s will be fetched from the `products` table. If you are trying to make another way to connect two entities and this magic isn't suitable, use `Product.select(:some_field).where(...)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-16T03:21:41.500

我想建议一个更新的答案。在 Rails v5.0.x 中，您可以使用`select`id 以外的属性，同时仍然执行嵌套查询。

```
LineItem.where(product_id: Order.where(price: 50).select(:product_id)) 
```

# java - 使用通用 Java 工具/api 导航 XSD 和 XML 文件

> ID：10147290
> 
> 赞同：0
> 
> 时间：2012-04-13T19:41:41.220
> 
> 标签：java, xml, xpath, xsd

导航 XSD 和 XML 文件的最佳方式是什么？我想查找 XSD 和 XML 是否在输入元素的上方或下方都具有相同的元素。有可能是 XPath 吗？如果是，请提供一个很好的教程，因为我找不到任何使用 XPath 导航 XSD 的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T17:21:48.020

在源代码级别处理 XML Schema 文档一点也不容易，因为编写相同的模式有很多不同的方法——例如，使用属性组、模型组、扩展和限制等。所以除非你知道你是处理 XSD 的受限子集，我不推荐它。

Xerces 提供了一个 API 来访问“编译的”模式模型，这可能是一种前进的方式。Saxon 还提供了将编译后的模式模型导出为 XML 的选项，如果您想要基于 XML 的表示，这比原始 XSD 文件更容易处理。

# c# - 指定泛型返回类型的 C# 接口

> ID：10147292
> 
> 赞同：19
> 
> 时间：2012-04-13T19:41:44.560
> 
> 标签：c#, generics, interface

我有类似的东西：

```
public interface IExample
{
  int GetInteger()
  T GetAnything(); //How do I define a function with a generic return type???
^^^^^
} 
```

这可能吗？？？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-13T19:44:59.663

如果整个接口应该是通用的：

```
public interface IExample<T>
{
  int GetInteger();
  T GetAnything();
} 
```

如果只有方法需要是通用的：

```
public interface IExample
{
  int GetInteger();
  T GetAnything<T>();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T19:43:05.793

```
public interface IExample<T>
{
   int GetInteger()
   T GetAnything();
} 
```

多田 :) ！

或者，您可以只返回 System.Object 并将其转换为您想要的任何内容。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T19:48:19.647

如果您不希望整个界面（IExample）是通用的，那么您也可以这样做

```
public interface IExample
{
  int GetInteger();
  T GetAnything<T>();     
} 
```

# c# - 如何显示 Windows 元文件？

> ID：10147293
> 
> 赞同：11
> 
> 时间：2012-04-13T19:41:46.950
> 
> 标签：c#, .net, wpf, .emf, metafile

我需要使用 WPF 显示[Windows 图元文件](http://en.wikipedia.org/wiki/Windows_Metafile)(EMF)，我该怎么做？

## 编辑：

我会保持图像矢量为基础。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-13T19:49:45.890

看看第[3 方库 Ab2d.ReadWmf](http://www.wpf-graphics.com/ReaderWmf.aspx)。

**更新 #1：概述**

首先，[这篇文章](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/7010cefa-e596-45af-b193-40206451dd90/)指出微软不打算在 WPF 中支持 EMF 文件。这并不意味着它不能完成，只是他们不会支持他们。

查看有关 WMF/EMF 格式的[Wikipedia 页面](http://en.wikipedia.org/wiki/Windows_Metafile)，我看到它将 EMF 描述为：

> 本质上，WMF 文件存储了必须向 Windows 图形设备接口 (GDI) 层发出的函数调用列表，以在屏幕上显示图像。由于某些 GDI 函数接受指向回调函数的指针以进行错误处理，因此 WMF 文件可能错误地包含可执行代码。

如果您使用过 WPF，您就会知道 WPF 从根本上不同于 GDI。[此处](http://www.leadtools.com/help/leadtools/v15/dh/wpf/to/leadtools.wpf.topics~leadtools.wpf.topics.differencesbetweengdiandwpf.html)提供了快速概览。这意味着您需要读取 EMF 文件并将 GDI 调用转换为 WPF 调用。这是他们讨论该过程[的线程。](http://social.msdn.microsoft.com/Forums/en/netfxbcl/thread/4848cd92-5b15-4d25-adbd-7b30ef3677bc)这对我来说听起来像是很多工作。

幸运的是，Microsoft 提供了一个用于读取 Windows 元文件的界面。看一下[这个线程](http://social.msdn.microsoft.com/Forums/en/winforms/thread/bce89dc7-78f8-4965-8d01-a9f7afc86544)的例子和[可用的文档here](http://msdn.microsoft.com/en-us/library/system.drawing.imaging.metafile)，但这只会让你走到一半，因为它不是 WPF Visual。在这一点上，我认为最简单的解决方案是在您的 WPF 应用程序中创建一个 WinForms 控件并将其托管在 WindowsFormsHost 控件中。

**更新 #2：代码示例**

在 WPF 应用程序中显示 EMF 文件：

1.  创建一个 WinForms 用户控件
2.  将您的 EMF 文件加载到 MetaFile 对象中并在 OnPaint 处理程序中绘制它。
3.  添加对 WindowsFormsIntegration 库的引用
4.  在 WindowsFormsHost 元素中托管您的 WinForms 控件

用户控制：

```
public partial class UserControl1 : UserControl
{
     private Metafile metafile1;

     public UserControl1()
     {
         InitializeComponent();
         metafile1 = new Metafile(@"C:\logo2.emf");
     }

     protected override void OnPaint(PaintEventArgs e)
     {
         e.Graphics.DrawImage(metafile1, 0, 0);
     }
} 
```

XAML：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
    xmlns:app="clr-namespace:WpfApplication1" 
    Title="MainWindow" Height="200" Width="200">

     <Grid>
         <WindowsFormsHost>
             <app:UserControl1/>
         </WindowsFormsHost>
     </Grid>
 </Window> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-19T14:05:10.440

这是一个实用程序函数，它加载 EMF 文件并将其转换为 WPF [BitmapSource](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.bitmapsource.aspx)：

```
public static class Emfutilities
{
        public static BitmapSource ToBitmapSource(string path)
        {
            using (System.Drawing.Imaging.Metafile emf = new System.Drawing.Imaging.Metafile(path))
            using (System.Drawing.Bitmap bmp = new System.Drawing.Bitmap(emf.Width, emf.Height))
            {
                bmp.SetResolution(emf.HorizontalResolution, emf.VerticalResolution);
                using (System.Drawing.Graphics g = System.Drawing.Graphics.FromImage(bmp))
                {
                    g.DrawImage(emf, 0, 0);
                    return System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(bmp.GetHbitmap(), IntPtr.Zero, Int32Rect.Empty, BitmapSizeOptions.FromEmptyOptions());
                }
            }
        }
} 
```

您只需像这样使用它：

```
namespace WpfApplication1
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            // img is of Image type for example
            img.Source = Emfutilities.ToBitmapSource("SampleMetafile.emf");
        }
    }

} 
```

缺点是您需要将 System.Drawing.dll (GDI+) 引用到您的 WPF 应用程序中，但这应该不是什么大问题。

# java - 从休眠中的多个表中检索数据

> ID：10147294
> 
> 赞同：0
> 
> 时间：2012-04-13T19:41:47.823
> 
> 标签：java, database, hibernate, multiple-tables

我有 2 个表，即订阅者和联系人。表看起来像这样：

```
subscriber -> id, contact_id //contact_id is a foreign key
contact -> id, firstName, lastName, email, contactType 
```

我的 Contact.hbm.xml 文件如下所示：

```
<hibernate-mapping>
    <class name="com.DBNAME.model.Contact" table="contact" >

        <id name="id" type="int">
            <column name="id" />
            <generator class="identity" />
        </id>

        <property name="contactType" type="int">
            <column name="contactType" sql-type="TINYINT"></column>
        </property>
        <property name="firstName" type="string">
            <column name="firstName"></column>
        </property>
        <property name="lastName" type="string">
            <column name="lastName"></column>
        </property>
    </class>
</hibernate-mapping> 
```

我的 Subscriber.hbm.xml 文件如下所示：

```
<hibernate-mapping>
    <class name="com.DBNAME.model.Subscriber" table="subscriber" >

        <id name="id" type="int">
            <column name="id" />
            <generator class="identity" />
        </id>

        <many-to-one name="contact" class="com.DBNAME.model.Contact" column="contact_id" unique="true" fetch="join"/>
    </class>

</hibernate-mapping> 
```

现在我想检索一个简单的订阅者对象，其中联系人会自动映射。所以我在 Java 代码中所做的是：

```
/**
     * get Subscribers
     */
    @SuppressWarnings("unchecked")
    private void getSubscribersWithContactDetails() {
        Session session = HibernateUtils.getSessionFactory().getCurrentSession();
        session.beginTransaction();
        try {
            setSubscribers((List<Subscriber>)session.createQuery("from Subscriber").list());
        } catch (HibernateException e) {
            session.getTransaction().rollback();
        } finally {
            session.getTransaction().commit();
        }
        }

/**
     * @param subscribers the subscribers to set
     */
    public void setSubscribers(List<Subscriber> subscribers) {
        this.subscribers = subscribers;
    } 
```

我的数据类如下所示：

```
 public class Contact implements Serializable {

        private static final long serialVersionUID = 1L;

        private int id;
        private int contactType;
        private String firstName;
        private String lastName;
    // Getters Setters and constructors
    }

public class Subscriber implements Serializable {
    private static final long serialVersionUID = 1L;

    private int         id;
    private Contact     contact; //Foreign Key from Contact -> id
    private int         contactId;
//Constructors, Getters and Setters
} 
```

我的 Hibernate 生成的查询如下所示：

```
select subscriber0_.id as id1_, subscriber0_.contact_id as contact2_1_ from subscriber subscriber0_ 
```

我没有从联系人表中获取联系方式。我将如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:43:15.370

尝试使用这个：

```
 <many-to-one name="contact" 
     class="com.DBNAME.model.Contact" column="contact_id" 
     unique="true" lazy="false"/> 
```

即`lazy="false"`没有`fetch`属性。

# batch-file - 批处理文件和可变 USB 驱动器号

> ID：10147302
> 
> 赞同：2
> 
> 时间：2012-04-13T19:42:39.117
> 
> 标签：batch-file, usb-drive, drive-letter

我正在尝试创建一个备份批处理文件来自动化 Acronis True Image 和备份维护。

USB 驱动器号会根据我要备份的机器和/或连接的设备数量以及使用驱动器号的不同而有所不同...

我的批次驻留在`C:\` 我的批次将调用 ATI。ATI 将图像转储到`C:\` 批次上，然后根据其卷序列号查找我的外部，如下所示：

```
SET SN=30BC-F5A4
SET found=

0>NUL SET /P=Searching for external drive...
TIMEOUT 3 /NOBREAK >NUL

FOR %%N IN (D E F G H I J K L M O P Q R S T U V W X Y Z) DO (
IF defined found CALL :MOVE
VOL %%N: 2>NUL | FIND "%sn%" >NUL && CALL :MOVE %%N
)

ECHO  Fail^^!
TIMEOUT 3 /NOBREAK >NUL

ECHO.
ECHO Connect it now and cancel "Autoplay".
TIMEOUT 3 /NOBREAK >NUL

ECHO.
ECHO Press any key to try again...
PAUSE >NUL

CALL: EXTERNAL

:: ***MOVE BACKUP***

:MOVE 
```

好的，那工作得很好，但我现在需要的是类似的东西；

根据序列号查找正确的外部设备。（如上）获取正确的驱动器号并将其转换为变量。找到驱动器号后跳出`FOR IN DO`循环并将其设为变量。使用变量检查文件夹是否存在。如果该文件夹不存在，请创建它。如果文件夹确实存在，请检查其中是否`MyBackup.tib`存在。如果是这样，请删除该文件。 `CHDIR`或者一些这样的回到批处理所在的位置，（`C:\`）和`MOVE`新创建的备份到外部文件夹中。

我在这个问题上连续工作了十个小时，而且我没有比一开始更接近找到正确的语法/命令。

拜托，你能帮忙吗！？我给你一块饼干，哈哈！

如果有帮助，我正在运行 Windows 7 Ultimate...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-14T00:35:18.553

序列号是十六进制表示的数字（在十进制数字中使用逗号作为千位分隔符）。

`WMIC volume get driveLetter, serialNumber`可用于获取所有驱动器号及其十进制序列号的列表。您的 30BC-F5A4 序列号等于十进制 817690020。我在命令行中使用以下命令将您的十六进制 SN 转换为十进制形式：`set /a 0x30BCF5A4`.

因此，以下命令将为您的外部驱动器的驱动器号（带冒号）设置一个变量。

```
set SN=817690020
set "extDrive="
for /f %%D in ('wmic volume get driveLetter^, serialNumber ^| find "%sn%"') do set extDrive=%%D
if not defined extDrive echo Error finding external drive & exit /b 
```

我不明白你所说的文件夹名称来自哪里。我假设您有一个变量，其值以某种方式定义。我将简单地将变量命名为“文件夹”。

```
set folder=someFolderName
if not exist "%extDrive%\%folder%\" mkdir "%extDrive%\%folder%" 
```

您可以使用 MOVE 命令将新创建的备份移动到外部驱动器上的文件夹中，如果现有备份已经存在，则会自动覆盖它。

```
move /y "c:\MyBackup.tib" "%extDrive%\%folder%\" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-25T04:20:26.887

您可以要求驱动器号，如下所示：

假设您需要备份的一些照片在我们驱动器上的目录 a\b\c 中，其字母在计算机之间会发生变化。并且，您要将照片备份到主驱动器，主驱动器上的目录 x\y\z（驱动器 C:)

```
set /p Path="Enter the drive letter for your drive on this computer. No symbols, just the capital letter"
xcopy /e /v  %Path%:\a\b\c c:\x\y\z 
```

你甚至可以要求备份的路径，像这样......

```
set /p Path="Enter the drive letter for your removable drive on this computer. No symbols, just the capital letter."
set /p PathBackUp="Enter the path to where you want your data to be backed up on this computer. Start with a backslash."
set /p BackupDrive="Enter the drive letter for your data to be backed up to on this    computer. No symbols, just the capital letter."
xcopy /e /v  %Path%:\a\b\c %BackupDrive%:%PathBackUp% 
```

或两者...

```
set /p Path="Enter the drive letter for your removable drive on this computer. No symbols, just the capital letter."
set /p DataPath="Enter the path where your data to be backed up is. Start with a backslash, and don't include the drive letter.
set /p PathBackUp="Enter the path to where you want your data to be backed up on this computer. Start with a backslash, and don't include the drive letter."
set /p BackupDrive="Enter the drive letter for your data to be backed up to on this    computer. No symbols, just the capital letter."
xcopy /e /v  %Path%:%DataPath% %BackupDrive%:%PathBackUp% 
```

我猜这种破坏自动化的目的，但只是一个想法；也许这会有所帮助。

有关 xcopy 命令和修饰符的更多信息，请参阅[http://www.computerhope.com/xcopyhlp.htm](http://www.computerhope.com/xcopyhlp.htm)

有关 set 命令的更多信息，请参阅[http://www.computerhope.com/sethlp.htm](http://www.computerhope.com/sethlp.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-23T03:41:16.047

这将简单地找到连接到系统的所有 USB 驱动器。

```
@echo off

for /F "usebackq tokens=1,2,3,4 " %%i in (`wmic logicaldisk get caption^,description^,drivetype 2^>NUL`) do (

if %%l equ 2 (
echo %%i is a USB drive.
        )
        ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-19T23:11:14.983

我到处搜索并尝试了很多东西 - 这是最快和最简单的驱动器号切换命令行选项

```
echo off

set /p Path="Enter the Drive Letter of the source File then press enter___"

set /p Pathde="Enter the Drive Letter of the Destination File then press enter___"

echo on

COPY %path%:\Users\Dell\Desktop\test.txt %pathde%:\test.txt 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-05-21T21:40:44.500

我编写了一个小 C 程序 ( **lpath.exe** ) 来解决更改可移动设备驱动器号的问题。

这个想法是在相关的 USB 设备上创建一个目录（可以隐藏），或者使用使用 Windows 资源管理器设置的驱动器/磁盘名称。

如果目录或磁盘名称存在，**lpath**程序会检查所有可用磁盘，并返回要在批处理文件中使用的当前驱动器号：

在 U 盘上创建目录：

```
mkdir f:\USB-DISK1 
```

要解析驱动器号：

```
lpath USB-DISK1:\myImages\House 
```

当 USB 磁盘当前分配给驱动器号 g 时，这将返回**g:\myImages\House** **：**

例如在脚本中使用：

```
setlocal EnableDelayedExpansion
set input=USB-DISK1:\exports\weekly
for /f "tokens=*" %%r in ('echo !input!^| lpath') do set input=%%r
echo resolved directory is: !input! 
```

更方便的方法是在 lpath.exe 程序旁边创建一个**lset.cmd**

```
@echo off
rem
rem lset.cmd - set variable with resolved label path
rem
rem [00] 01.05.2019 CWa Initial Version
rem [02] 15.06.2019 CWa ++
rem
if not {%COMPUTERNAME%}=={!COMPUTERNAME!} echo %~n0-ERROR: use this function with 'setlocal EnableDelayedExpansion' only & exit /b 7

rem USAGE: lib\lset variable "path"    - set variable with resolved label path

set __lset_path=%~2
if {!__lset_path!}=={} set %1=& exit /b
for /f "tokens=*" %%r in ('echo !__lset_path!^| "%~dp0lpath"') do set %1=%%r
set __lset_path= 
```

并在主批处理脚本中使用它，如：

```
setlocal EnableDelayedExpansion
call lset input USB-DISK1:\exports\weekly
echo resolved directory is: !input! 
```

有关更详细的手册，请参阅：[lpath - 扩展包含标签的路径](http://wa2l-wintools.sourceforge.net/man3/lpath.3.html)

**lpath.exe**和**lset.cmd**的编译版本可以在[WA2L/WinTools](https://sourceforge.net/projects/wa2l-wintools/)包的**WA2LWinTools\lib**中找到。

此解决方案的缺点是，您至少需要一个附加文件才能与脚本一起分发。

# objective-c - NSMUtableArray 通过单击按钮添加对象

> ID：10147315
> 
> 赞同：0
> 
> 时间：2012-04-13T19:43:43.060
> 
> 标签：objective-c, ios5, nsmutablearray

我在 UITextView 中显示一些数据时遇到问题。这是问题所在。我有一个包含两个组件的pickerview：一个包含产品，另一个包含要销售的数量。

我还创建了一个 NSMutableArray 并存储了每个产品的价格。添加了一个按钮来进行计算，实际上这部分到目前为止工作得很好，因为当我单击按钮时结果显示在 UITextView 中。

问题是我想以 U$ 显示所选产品的总金额，例如，我选择了三个产品，当我单击按钮时，结果将显示在 TextView 中。

我尝试这样做，但它不起作用：我想我会创建另一个 NSMutableArray 来存储产品选择，当用户单击按钮时它会给我结果..但我无法添加产品到 nsmutablearray，因为我不知道该怎么做..

那么，有人可以帮忙吗？？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:42:17.937

要将对象添加到 NSMutableArray，您必须使用方法“addObject”。

```
[yourMutableArray addObject:yourObject]; 
```

编辑：

将您的可变数组声明为属性。

在你的标题中。

```
NSMutableArray *yourMutableArray; 
```

然后你可以在你的 .m init 中使用它作为：

```
yourMutableArray = [[NSMutableArray alloc] init]; 
```

然后当您处理按钮单击操作时，添加对象（无需再次启动它）。

运气！

# c - printf 在内存分配中有什么作用吗？

> ID：10147316
> 
> 赞同：0
> 
> 时间：2012-04-13T19:43:43.903
> 
> 标签：c, memory-management, malloc, printf

对于此代码

```
#include <stdio.h>
#include <stdlib.h>
int main()
{
int i, j, k, l;
int *ii = (int *)malloc(sizeof(int));
int *jj = (int *)malloc(sizeof(int));
int *kk = (int *)malloc(sizeof(int));
int m, n, o, p;
// Call below line as star line
printf("%u %u %u %u %u %u %u %u %u %u %u\n",&i,&j,&k,&l,&ii,&jj,&kk,&m,&n,&o,&p);
// Call below line as delta line
printf("%u %u %u %u %u %u %u %u %u %u %u\n",&i,&j,&k,&l,ii,jj,kk,&m,&n,&o,&p);
 return 0;
} 
```

我得到这个输出

```
2293516 2293512 2293508 2293504 2293500 2293496 2293492 2293488 2293484 2293480 2293476
2293516 2293512 2293508 2293504 3739288 3739320 3739336 2293488 2293484 2293480 2293476 
```

到目前为止一切都很清楚，但是当我评论星线输出时

```
2293520 2293516 2293512 2293508 4525720 4525752 4525768 2293504 2293500 2293496 2293492 
```

我的问题是为什么在这种情况下内存位置不连续。在第一种情况的第二行中，值的常规差异为 4 个字节，即 516、512、508、504，然后是三个位置，然后是 488、484、480 ......但在第二种情况下，值是 520、516、512、508 ，然后是三个位置，然后是 504、500、496。为什么 508 之后的下一个值是 504 而应该是 492？printf 在这里有什么作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:49:22.673

编译器可以自由地在内存中安排局部变量，但它认为合适。

不能保证局部变量是连续存储的，或者它们之间没有未命名的填充，或者它们以特定顺序存储在内存中。

也不能保证一个局部变量在运行时确实存在。例如，当您注释掉第一个`printf`，局部变量`ii`,`jj`和`kk`永远不会用作*左*值（基本上，您永远不会做任何需要对象地址的事情），因此编译器可能会选择完全消除这些变量。

在您的具体示例中，编译器可能决定将所有三个变量存储在内存中的同一位置，或者 - 因为您从未初始化变量 - 它可能只是使用内存中某个其他位置的随机内容，这将同样“有效”的行为。

# android - Android：查找手机操作过程中按下的按钮的文本名称

> ID：10147317
> 
> 赞同：0
> 
> 时间：2012-04-13T19:43:47.353
> 
> 标签：android, user-interface, logcat, android-button

我正在尝试创建一些东西，允许用户/开发人员连接他们的手机，手动与应用程序交互，并查看有关他们交互完成的各种信息。

有很多关于使用 logcat/ActivityManager 进行交互的结果的可用信息，但我的问题是，我无法查看在与应用程序交互期间特别按下了哪些按钮。我希望能够看到按钮文本，或者至少是按钮 ID。

我探索过各种记录器，但所有这些记录按钮都只是通过屏幕触摸的坐标进行触摸，这对于查看实际按下了哪些按钮没有用处。

我希望在不对源代码进行重大更改的情况下完成这项工作。例如，让开发人员在每次按下按钮后调用 Log.d() 并不理想。我听说制作仪器可以让您单独将东西添加到源代码中，这可能会起作用，但我不太了解如何实现仪器。

我该如何找出按下了哪个按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:52:51.820

我不知道有什么工具可以帮助你做到这一点，但你可以做的是继承 Button 类并制作你自己的自定义 Button。然后在您的自定义按钮中创建一个执行您想要的任何操作的 onTouchListener。现在您可以用您的自定义按钮替换所有按钮实例，您应该能够更密切地跟踪您的事件。

# jquery - Firefox & Chrome，尝试使用可访问的折叠内容

> ID：10147319
> 
> 赞同：1
> 
> 时间：2012-04-13T19:44:06.197
> 
> 标签：jquery, accessibility, jaws-screen-reader

我正在使用 JAWS 屏幕阅读器在我的页面中测试[JQuery 可折叠插件](http://filamentgroup.com/lab/expand_and_collapse_content_accessibly_with_progressive_enhancement_jquery/)，但是当我单击链接以显示隐藏数据并使用`p`关键字时，会读取隐藏数据之外的下一个元素。

我在 Chrome（最新版本）、Firefox 11 和 Internet Explorer 8 中进行了测试。只有 IE 才能正确读取数据。

我尝试了链接中的演示，效果很好。

我的标记是：

```
<div class='well' id="dialogDadosFuncionario" aria-describedby="dialogDescription">
  <div role="group" aria-describedby="dialogDescription">
    <h4 id="dialogDescription">
      My Data
    </h4>
    <table summary='My data...'>
    ...
    </table>
  </div>
</div>
<!-- In Chrome and FF this table is readed instead of the table above -->
<table summary='something...'>
</table> 
```

我`$('#dialogDescription').collapsible();`用来触发插件。

我在这里缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T15:59:36.350

你能用 p 关键字澄清一下吗？我浏览了长丝链接，我会尝试以下方法：

```
<table summary="My Data">
  <capton>
   <h4 class="...">My Data</h4> <!--use the hide/show classes -->
  </caption>
...
</table> 
```

标题将标题放在桌子上。给摘要和标题赋予相同的值是不好的，我假设您只是出于示例目的而这样做。这将被宣布为表格，标题级别 4，我的数据，我的数据，[继续阅读表格]。

您可能需要在 div 周围包裹一个 div`<h4>`才能正确显示/隐藏。

## **新解决方案**

看起来您正在为函数提供 ID 而不是 HTML 标记。尝试： `$('h4').collapsible();`

# javascript - 使用 jquery 检查 *any* 字段是否有值？

> ID：10147323
> 
> 赞同：0
> 
> 时间：2012-04-13T19:44:16.087
> 
> 标签：javascript, jquery, forms, validation

从这样的事情开始

```
 $('#report-form').submit( function(){
    if ( ! $('#datetime, :checkbox, :radio, textarea').val() ){
            alert('not posted');
            return false;
        } else  {
            alert('posted');
        }

} ); 
```

除了在任何字段为空时不发布，*我希望它发布，除非**所有**列出的字段/字段类型都是空的*。有没有办法使用选择器字符串而不是手动检查每个项目？

我想运行一个 .each() 函数，它在变量为空时递增一个变量，并且仅在 # 小于字段 # 时才提交它，但理想情况下我正在寻找更通用的东西（这将适用于复选框和单选按钮以及文本输入和文本区域）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:50:03.560

您可以使用`$.grep`返回满足条件的元素数组。

在这里，如果任何元素有值，它将`true`从回调中返回，并且`length`将至少`1`，强制为`true`。

```
var any = !!$.grep($('#datetime, :checkbox, :radio, textarea'), function(el) { 
    return !!el.value;
}).length;

if (any) {
    // there was at least one
} 
```

* * *

另一种可能性是使用*attribute-not-equals-selector*，尽管我不推荐它。

```
if (!!$('input[value!=""]').length) 
```

它声称检查属性，但似乎实际上检查了`.value` *属性*。这对我来说似乎是错误的。由于文档声称检查属性，我可能会避免它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:48:27.057

您可以遍历所有需要的输入和文本区域，并将变量设置为`true`（最初设置为`false`）并在遇到非空输入时中断循环。然后，您只需在循环完成后检查变量是否为真。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:50:11.053

您可以使用方法[valid()](http://docs.jquery.com/Plugins/Validation/valid)直接调用验证器。

```
$("#myform").validate();
$("a.check").click(function() {
    alert("Valid: " + $("#myform").valid());
    return false;
}); 
```

# java - 在没有源代码的类中替换方法

> ID：10147324
> 
> 赞同：0
> 
> 时间：2012-04-13T19:44:19.367
> 
> 标签：java

我有一些`A`没有源代码的类，这个类使用一些`B`具有 2 种方法的类，例如**标准 Java 库中的**`#get(): int`设置！`#set(int value): void`

 **我可以用这两种方法或所有类来改变这个类的一些功能`A`吗？

例如，这个类`A`使用标准类`B`来保存一些信息，但我想用这个另一个容器来进行一些操作。有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:50:29.930

您可以使用一些字节码操作库，例如[java-bytecode-asm](/questions/tagged/java-bytecode-asm "显示标记为“java-bytecode-asm”的问题")。然而，更简单的方法是使用[aspectj](/questions/tagged/aspectj "显示标记为“aspectj”的问题")和 weave 类，无论是静态的还是动态的。AspectJ 甚至可以编织标准 Java 库 ( `rt.jar`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:50:04.213

我不确定，但我相信您要做的是扩展类，然后覆盖该方法。

正如 kirk woll 所说，这看起来不像 java。**

# javafx - 在 javafx 中设置字体

> ID：10147325
> 
> 赞同：4
> 
> 时间：2012-04-13T19:44:22.223
> 
> 标签：javafx

如何在 java fx 中将字体设置为表视图中的列。我有一个包含 3 列的表格，我想为每一列设置不同的字体。另外，是否可以在运行时更改字体。请帮助提供一些示例代码。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-13T22:20:34.690

# **更改表格列样式：**

您应该使用[TableColumn#setCellFactory()](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TableColumn.html#setCellFactory%28javafx.util.Callback%29)自定义单元格项目呈现。
例如，具有这样的[Person 类](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm#CJADAHAH)的数据模型：

```
// init code vs..
TableColumn firstNameCol = new TableColumn("First Name");
firstNameCol.setMinWidth(100);
firstNameCol.setCellValueFactory(new PropertyValueFactory<Person, String>("firstName"));
firstNameCol.setCellFactory(getCustomCellFactory("green"));

TableColumn lastNameCol = new TableColumn("Last Name");
lastNameCol.setMinWidth(100);
lastNameCol.setCellValueFactory(new PropertyValueFactory<Person, String>("lastName"));
lastNameCol.setCellFactory(getCustomCellFactory("red"));

table.setItems(data);
table.getColumns().addAll(firstNameCol, lastNameCol);

// scene create code vs.. 
```

和常用`getCustomCellFactory()`方法：

```
private Callback<TableColumn<Person, String>, TableCell<Person, String>> getCustomCellFactory(final String color) {
        return new Callback<TableColumn<Person, String>, TableCell<Person, String>>() {

            @Override
            public TableCell<Person, String> call(TableColumn<Person, String> param) {
                TableCell<Person, String> cell = new TableCell<Person, String>() {

                    @Override
                    public void updateItem(final String item, boolean empty) {
                        if (item != null) {
                            setText(item);
                            setStyle("-fx-text-fill: " + color + ";");
                        }
                    }
                };
                return cell;
            }
        };
    } 
```

# **更改表格列标题样式：**

`TableView`像 JavaFX 的其他控件一样，使用一个名为的内置样式表`caspian.css`，它与 jfxrt.jar 捆绑在一起。请参阅[“JavaFX 2 和 CSS 类”的答案](https://stackoverflow.com/a/9905730/682495)。
要更改列字体样式，您可以覆盖默认样式或自定义它：
覆盖：

```
.table-view .column-header{
    -fx-text-fill: -fx-selection-bar-text;
    -fx-font-size: 16;
    -fx-font-family: "Arial";
} 
```

定制：

```
#my-custom .table-view .column-header {
    -fx-text-fill: red;
    -fx-font-size: 26;
    -fx-font-family: "Arial";
} 
```

覆盖所有`TableView`应用程序中的效果。因此，如果您更喜欢自定义，那么一旦您定义了多个样式，您就可以在运行时将自定义样式应用于任何 tableview，如下所示，

```
myTableView.setId("my-custom");
...
// Apply another style at runtime
myTableView.setId("my-custom2"); 
```

要了解如何定义样式表文件并将其加载到应用程序，请查看[“JavaFX 如何设置场景背景图像”的帖子](https://stackoverflow.com/a/9739698/682495)。

但是，我认为将不同的样式应用于不同的列需要更多的努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-28T03:31:15.620

您可以使用 fxml 或 css 文件来设置字体颜色......

```
 # .mainFxmlClass {
 -fx-font-family:nyala,Tahoma,Arial,Helvetica,sans-serif;   
 -fx-font-size:1.13em;  
 }

 .label{
 -fx-font-size:1.3em;
  } 
```

并在 fxml 文件中调用和使用 .lable 或 .mainFxmlClass

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-16T19:37:50.700

> 什么样式（语法）指定第 1 列使用此样式 1，第 2 列使用样式 2

[提供一个自定义单元工厂](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TableColumn.html#setCellFactory%28javafx.util.Callback%29)，该工厂提供已应用您在 css 中定义的样式类的[单元。](http://docs.oracle.com/javafx/2/api/javafx/scene/control/Cell.html)链接的文档包含示例，这些示例应该为您提供足够的信息来实现这一点。

# java - 安卓：java TextView 颜色

> ID：10147331
> 
> 赞同：0
> 
> 时间：2012-04-13T19:44:56.997
> 
> 标签：java, android, colors, textview

我需要一点帮助。我需要使用 java 代码更改文本视图的颜色。我尝试了不同的方法，但它总是给我一个错误：

```
java.lang.NullPointerException 
```

我试过：

```
TextView sts;
sts = (TextView) findViewById(R.id.stato);
sts.setTextColor(Color.rgb(12,255,0)); 
```

或者..

```
sts.setTextColor(android.graphics.Color.GREEN); 
```

但是这两种方式在开始时都会给我同样的错误。我的类扩展了 ListActivity

我如何？提前致谢

完整代码：

```
public class ProvaDatabase extends ListActivity{

    TextView sts;   
    private DatabaseHelper databaseHelper;

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        sts = (TextView) findViewById(R.id.stato);
        sts.setTextColor(android.graphics.Color.GREEN);
        //sts.setTextColor(Color.rgb(12,255,0));

        super.onCreate(savedInstanceState);
        databaseHelper = new DatabaseHelper(this);
        SQLiteDatabase db = databaseHelper.getWritableDatabase();
        databaseHelper.insertdb(db, "sta", "25/11/2016", "SUCCESS", null, null, null);
        databaseHelper.insertdb(db, "ssis", "25/11/2016", "WAITING", null, null, null);
        databaseHelper.insertdb(db, "AAAAAAAA", "25/11/2016", "FAILED", null, null, null);
        databaseHelper.insertdb(db, "BBBB", "bBBBBBB", "SUCCESS", null, null, null);
        Cursor c = databaseHelper.getDB();
        startManagingCursor(c);
        setListAdapter(new SimpleCursorAdapter(this, R.layout.registryvista, c, new String[]
        { TabellaRegistry.TYPE, TabellaRegistry.DATE, TabellaRegistry.STATUS }, new int[]
        { R.id.tipo, R.id.data, R.id.stato }));

        setContentView(R.layout.main2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:51:10.240

似乎您的视图 R.id.stato 未找到，因此*sts == null*。尝试检查*sts*不为空，或者需要一些额外的代码

编辑：

如果您无法访问列表中项目的布局而不是执行

```
setListAdapter(new SimpleCursorAdapter(this, R.layout.registryvista, c, new String[]
    { TabellaRegistry.TYPE, TabellaRegistry.DATE, TabellaRegistry.STATUS }, new int[]
    { R.id.tipo, R.id.data, R.id.stato })); 
```

您可以像这样编写自己的适配器：

```
public class MyAdapter extends SimpleCursorAdapter
{
    //here goes methods that should be overriden

    //and method getView in which we can access layout of our list item
    @Override
    public View getView (int position, View convertView, ViewGroup parent)
    {
        View view = super.getView(postition, convertView, parent);
        TextView sts = (TextView) view.findViewById(R.id.stato);
        sts.setTextColor(android.graphics.Color.GREEN);
    }
} 
```

我希望你明白我的想法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:54:59.800

您是否在尝试获取 sts 之前设置了内容视图？您需要在活动中设置内容视图，然后才能从中检索视图。

# facebook - Heroku 是否存在可移植性风险？

> ID：10147342
> 
> 赞同：1
> 
> 时间：2012-04-13T19:45:32.267
> 
> 标签：facebook, heroku

我正在尝试开发一个简单的 Facebook Web 应用程序，而且我对 FB 应用程序开发和一般的 Web 应用程序开发都很陌生。我一直在寻找一种快速入门和学习的方法，结果遇到了 Heroku。对于我来说，这似乎是一个学习 Facebook 应用程序开发技巧的好平台，但我担心的是，如果我希望我的应用程序继续增长，或者我想开始用它做更高级的事情，那么我将不得不转向亚马逊的网络服务之类的东西以使其经济，对吗？那样的话，这样的举动会不会非常难做？换句话说，如果我开始在 Heroku 上学习 Facebook 应用程序开发，我会被“束缚”吗？到平台并且无法在任何其他平台上构建/运行 Facebook 应用程序？或者你认为 Heroku 是像我这样的初学者开始学习的好方法，一旦我足够熟练，就可以选择将我的应用程序移到其他地方？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:19:59.240

> 总的来说，我对 FB 应用程序开发和 Web 应用程序开发都很陌生。

那么您不必担心被困在平台中。您最终获得的平台将是您遇到的各种障碍以及在您的特定应用程序上工作的经验的利弊的结果。

Facebook API 和所有官方 SDK 均独立于平台。代码也永远不会只写一次，你会遇到重构。因此，转移您的申请是流程的一部分，有些转移路线会比其他路线更难，但您会一路学习。

Heroku 很好，你将能够学习 git、unix 命令和 web 开发。

所以不，学习 Facebook 开发的人没有可移植性风险。

# c++ - QSqlRecord 在查询中将具有默认值的列设置为空

> ID：10147343
> 
> 赞同：2
> 
> 时间：2012-04-13T19:45:40.163
> 
> 标签：c++, qt, postgresql, qsqltablemodel

我在将新的 QSqlRecord 插入 Postgresql 数据库时遇到问题。目标表定义如下：

```
create table samochod(
  samochod_id integer primary key default nextval('samochod_id_seq'),
  marka varchar(30),
  poj_silnika numeric,
  typ_silnika silnik_typ,
  liczba_osob smallint
); 
```

记录插入代码为：

```
 QSqlRecord rec = model->record();

  rec.setGenerated("samochod_id", false);
  rec.setValue("marka", ui.brandEdit->text());
  rec.setValue("poj_silnika", ui.volSpin->value());
  rec.setValue("typ_silnika", ui.engineCombo->currentText());
  rec.setValue("liczba_osob", ui.passengersSpin->value());

  bool ok = model->insertRecord(-1,rec); 
```

我想要做的就是插入一条新记录，并让 sql`samochod_id`为我设置它，但尽管我设置`isGenerated`为 false，但它会因消息而崩溃：

```
"ERROR:  null value in column "samochod_id" violates not-null constraint
QPSQL: Unable to create query" 
```

我应该怎么做才能使 QSqlRecord 离开`samochod_id`数据库的生成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:16:43.957

我找到了一个奇怪的解决方案来解决这个问题。线：

```
rec.setGenerated("samochod_id", false); 
```

上面的 int 方法似乎没有效果，但是当我将它移到模型的信号处理程序时，它开始按预期工作：

```
CarsModel::CarsModel(QObject * parent, QSqlDatabase db)
  : SqlModel(parent, db, "samochod")
{
  engineTypes << "Diesel" << "Na gaz" << "Benzynowy" << "Elektryczny";

  connect(this, SIGNAL(beforeInsert(QSqlRecord &)), this,
      SLOT(beforeInsertRec(QSqlRecord &)));
}

void CarsModel::beforeInsertRec(QSqlRecord & rec){
  rec.setGenerated(0, false);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T19:19:03.410

您可以使用`removeColumn(int)`之前`QSqlRecord rec = model->record()`，它应该工作。如果`model`关联到一个视图（例如 QTableView 实例），那么您将有效地隐藏该`samochod_id`列。

试试这个：

```
 // get the index of the id column
  int colId = model.fieldIndex("samochod_id");
  // remove the column from the model
  model.removeColumn(colId);

  QSqlRecord rec = model->record();

  // rec.setGenerated("samochod_id", false); /// not needed anymore
  rec.setValue("marka", ui.brandEdit->text());
  rec.setValue("poj_silnika", ui.volSpin->value());
  rec.setValue("typ_silnika", ui.engineCombo->currentText());
  rec.setValue("liczba_osob", ui.passengersSpin->value());

  bool ok = model->insertRecord(-1,rec); 
```

我能理解你为什么更喜欢以这种方式插入记录（避免手动编写 SQL）。`QSqlTableModel`我认为仅出于插入记录的目的使用实例太昂贵（模型是复杂的野兽），所以我更喜欢使用普通的`QSqlQuery`. 使用这种方法，`QSqlTableModel`如果您需要在事务中的多个表中插入记录，则无需实例化多个 s，一个`QSqlQuery`就足够了：

```
 QSqlDatabase::database("defaultdb").transaction();
  QSqlQuery query(QSqlDatabase::database("defaultdb"));

  query.prepare(QString("INSERT INTO table1 (field1, field2) VALUES(?,?)"));
  query.bindValue(0,aString);
  query.bindValue(1,anotherString);
  query.exec();

  // insert in another table
  query.exec(QString("INSERT INTO table2 (field1, field2) VALUES(...)");

  bool ok = QSqlDatabase::database("defaultdb").commit();
  query.finish();

  if(!ok){
      // do something
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:03:28.183

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-10T19:06:19.400

这是自 Qt 4.8 以来的一个已知错误：

[https://bugreports.qt-project.org/browse/QTBUG-23592](https://bugreports.qt-project.org/browse/QTBUG-23592)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-01T18:55:02.767

这是 Qt 的一个已知错误。在 Qt 5 中修复。

# c# - 将数据插入excel电子表格并打印

> ID：10147347
> 
> 赞同：0
> 
> 时间：2012-04-13T19:45:51.973
> 
> 标签：c#, .net, excel

***我的问题是：***

我得到了一个电子表格，它模拟了人们想要从应用程序中打印的内容。Excel 工作表单元格映射到数据网格视图单元格。用户将单击数据网格中的一个单元格，然后程序会将新数据插入到 Excel 工作表单元格中。

然后应该打印该表。

***我的问题是：***

1- 是否可以将 DB/datagridview 数据写入电子表格字段，然后通过代码打印电子表格？2-或者我最好从头开始用C#创建一个报告？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T02:21:25.100

您可以使用 excel 互操作。只需添加对您项目的引用（在 com 部分中）。然后，您可以写入文件。

```
using Excel = Microsoft.Office.Interop.Excel;

Excel.Application xlApp; 
Excel.Workbook xlWorkBook; 
Excel.Worksheet xlWorkSheet; 
object misValue = System.Reflection.Missing.Value; 

xlApp = new Excel.ApplicationClass(); 
xlWorkBook = xlApp.Workbooks.Open(_filename, 0, true, 5, "", "", true, Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0); 
xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets.get_Item(1); 

//Attribute a value to a cell
var cell = (Range)xlWorkSheet .Cells[row, column];
cell.Value2 = "Test";

//This should print
xlWorkBook.PrintOut (Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value, Missing.Value);

xlWorkBook.Close(false, misValue, misValue); 
xlApp.Quit(); 
```

# python - 如何将动态数量的参数传递给函数？

> ID：10147352
> 
> 赞同：2
> 
> 时间：2012-04-13T19:46:15.003
> 
> 标签：python

我有一本可能有不同数量的键的字典。键的值是一个数字列表。我想比较这些列表中的每一个并获取列表中所有项目的最大值的列表。

如果我以以下方式传递它，内置的 max() 函数将为我提供所有项目的最大值：

最大值（列表，列表b，列表c）

列表的数量各不相同，我的字典看起来像这样：

myDict = {1:lista,2:listb:3:listc,...}

我在想或类似的事情：

maxlist = max(对于 myDict.keys() 中的项目：myDict[item])

但我认为这行不通。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:50:06.213

生成器表达式的正确语法是

```
maxlist = max(myDict[item] for item in myDict.keys()) 
```

在这种情况下，首先使用会容易得多`myDict.values()`：

```
maxlist = max(myDict.values()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T19:50:21.220

怎么样：

```
>>> p = {1: [2,3], 4: [5,6,7]}
>>> max(p.values())
[5, 6, 7] 
```

对于字典，`values()`返回值，因此您不需要显式迭代字典中的所有键/值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T19:51:17.400

给定字典垃圾邮件，您可以找到最大值

```
max(spam.values(),key=len) 
```

现在你的问题有点模棱两可，你想找到的最大值是多少

以上将返回您具有最大元素的列表的长度（又名长度是最大的）

相反，如果您想获取所有列表的最大元素（单个最大元素），您也可以这样做

```
max(itertools.chain(*spam.values())) 
```

相反，如果你想找到你可以做的最大值的列表

```
max(spam.values()) 
```

# python - 如何从 Python 运行命令行程序

> ID：10147354
> 
> 赞同：1
> 
> 时间：2012-04-13T19:46:29.893
> 
> 标签：python, command-line

我有一个原子模拟程序（用 Fortran 编写，我没有源代码）提示用户输入温度、每个原子的质量、迭代次数等，然后运行给定输入文件的模拟（指定所有原子的初始位置）。在所有迭代之后，程序输出一个包含原子最终位置的文本文件，然后关闭。

我试图在不同的温度下运行相同的模拟，所以我希望通过 Python 自动化输入过程。因此，Python 程序将：

1.  打开模拟程序（'sim.exe'）
2.  自动将温度、质量、迭代次数等输入命令行
3.  将生成输出文件并将其复制到另一个名称不同的文件中，以免被覆盖。
4.  回到数字 1，在不同的温度下，但质量、迭代等相同。

我的主要问题是第二个问题。我不知道如何从 Python 输入命令行程序。甚至可能吗？我读过它与 os 或 subprocess 模块有关，但我不清楚它们是如何工作的。

注意：我使用 Windows。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T20:19:05.880

如果不用等待具体提示就可以盲目输入数据，问题应该很容易解决：

```
import os
import shutil
import subprocess
import time

proc = subprocess.Popen(["sim.exe"], stdin=subprocess.PIPE)
while True:
    proc.communicate(input="line1\nline2\nline3\n")
    while not os.path.exists(outputfilepath):
        time.sleep(1)
    shutil.move(outputfilepath, uniq_outputfilepath) 
```

当然，扫描程序的 stdout 和 stderr 以查找预期和意外模式以继续或中止会更安全。这也可以通过将 Popen() 的 stdout 和 stderr 参数设置为 subprocess.PIPE 并像这样调用通信来实现：

```
stdout, stderr = proc.communicate(input="line1\nline2\nline3\n") 
```

查看[communicate() 文档](http://docs.python.org/library/subprocess.html?highlight=popen#subprocess.Popen.communicate)了解详细信息。

如果使用 Python3，必须将输入字符串转换为字节字符串，以防止通信引发*"TypeError: 'str' does not support the buffer interface"*：

```
 proc.communicate(input=bytes("line1\nline2\nline3\n", "UTF-8")) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T19:49:54.607

```
import sys
import subprocess

theproc = subprocess.Popen([sys.executable, "myCMDscript"])
theproc.communicate() 
```

# xpages - 以编程方式获取 XPage 按钮的 clientId

> ID：10147355
> 
> 赞同：5
> 
> 时间：2012-04-13T19:46:31.130
> 
> 标签：xpages

当我在表单上创建提交按钮时，会在 HTML 中生成以下内容

```
XSP.attachEvent("view:_id1:_id2:_id38:_id55", 
    "view:_id1:_id2:_id38:button1", "onclick", null, true, 2);
}); 
```

"view:_id1:_id2:_id38:_id55" = eventHandler的clientId

"view:_id1:_id2:_id38:button1" = 按钮客户端 ID（一点也不混乱）

尽管我很喜欢便携式命令指南 - 我无法确定如何以编程方式获取 eventHandler clientId。

我需要 clientID 使用 $$xspsubmitid 字段值通过 ajax 提交表单

这可以通过面部来完成吗？和SSJS？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T20:19:54.340

深入了解您想要做什么，我认为看看我以前写的这篇文章会让您更深入地了解正在发生的事情。您尝试获取的 ID，clientId，而不是 targetClientId，是事件处理程序的 id，您可以通过分配一个 id 来获得，例如：

```
<xp:eventHandler id="foo"> 
```

这将强制运行时使用指定的 ID 而不是自动生成的 ID，从而允许您对其进行处理。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T19:48:35.517

```
getComponent("button1").getClientId(facesContext) 
```

# xcode - XCode 4.3.2 不会附加到调试器

> ID：10147356
> 
> 赞同：2
> 
> 时间：2012-04-13T19:46:33.517
> 
> 标签：xcode, ios-simulator, osx-lion

我终于升级到了 Lion（从 SL 和 Xcode 4.2）。我现在正在运行：

*   当前的狮子 10.7.3
*   当前 Xcode 4.3.2
*   已安装当前模拟器 5.1、5.0 和 4.3。

我已经放弃了我当前的生产应用程序，并创建了一个简单的单视图通用 hello world 应用程序，以尝试让某种形式的模拟器调试工作。

使用我的新简单应用程序，我仍然可以在设备上进行调试，但不能在我安装的任何模拟器上进行调试。它启动模拟器，最终安装被测应用程序，但从不附加到它，并且应用程序永远不会通过启动图像。（请注意，我可以从模拟器启动应用程序......所以，它确实构建和安装正确，虽然比我习惯使用 SL 和 4.2 花费的时间要长一些）

Xcode 只是坐在那里等待连接。令人担忧的是我根本无法停止这个（停止按钮，尝试关闭项目，停止任务），并且必须强制退出 Xcode。

有谁知道发生了什么？任何帮助将不胜感激！

-埃里克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T09:12:00.017

通过编辑方案将调试选项从 LLDB 更改为 GDB。另见[http://vandadnp.wordpress.com/2012/03/18/xcode-4-3-1-cannot-attach-to-ios-simulator/](http://vandadnp.wordpress.com/2012/03/18/xcode-4-3-1-cannot-attach-to-ios-simulator/)

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T21:11:45.887

我已经准备好为同样的问题尖叫，虽然在我的情况下，当我连接到路由器时，模拟器在家里工作，但是当我在小屋并连接到个人热点时，它挂在“正在连接到...”。但是，它可以毫无问题地在 iPad 上运行。

我的网络设置是唯一改变的东西。我昨天在模拟器中运行该应用程序没有任何问题，并且从那时起没有进行任何代码更改。

苹果在这个话题上保持沉默，尽管他们的开发论坛上有几十个问题，这令人愤怒。

# ruby-on-rails-3 - 将进程信息添加到 Rails 记录器

> ID：10147360
> 
> 赞同：4
> 
> 时间：2012-04-13T19:46:50.380
> 
> 标签：ruby-on-rails-3, logging

我目前有一个 Rails 应用程序，它有多个进程：由 Redis 触发的 Web 服务进程和后台工作进程。

问题是有时很难检查日志文件并确定给定行为发生的位置——是在 Web 部分还是在 Resque 工作人员上？

有没有办法包含进程名称甚至进程 ID 或允许我按进程区分每个日志条目的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T19:15:02.830

看起来有一些选择：

*   子类缓冲记录器并改用它：[https://gist.github.com/krutten/1091611](https://gist.github.com/krutten/1091611)（来自[http://help.papertrailapp.com/discussions/suggestions/18-include-pids-in-rails-productionlog](http://help.papertrailapp.com/discussions/suggestions/18-include-pids-in-rails-productionlog)）
*   创建您自己的中间件，使 pid 可用并将其与 config.log_tags 一起使用：[http ://www.peterboling.com/2012/4/5/rails-3-2-custom-logging](http://www.peterboling.com/2012/4/5/rails-3-2-custom-logging)
*   这样做：（`config.log_tags = [:subdomain, :uuid, :remote_ip, Proc.new { "PID-%.5d" % $$ }]`上一个链接说很慢）
*   或这个：`config.log_tags = [Proc.new { "PID: %.5d" % Process.pid }]`
*   改为记录请求 uuid

这是一篇相关的 SO 文章： - [Rails 3.2.2 日志文件无序，请求交织在一起](https://stackoverflow.com/questions/11561846/rails-3-2-2-log-files-unordered-requests-intertwined)

对我来说最好的选择似乎是使用 :uuid 。当您有多个进程记录到同一个文件时，它传达相同的信息以让您区分请求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-18T03:40:50.380

如果您需要控制器上下文之外的进程 ID（例如延迟作业），您可以将其放入初始化程序中：

```
class ActiveSupport::BufferedLogger
  def formatter=(formatter)
    @log.formatter = formatter
  end
end

class Formatter
  SEVERITY_TO_COLOR_MAP   = {'DEBUG'=>'0;37', 'INFO'=>'32', 'WARN'=>'33', 'ERROR'=>'31', 'FATAL'=>'31', 'UNKNOWN'=>'37'}

  def call(severity, time, progname, msg)
    formatted_severity = sprintf("%-5s","#{severity}")

    formatted_time = time.strftime("%Y-%m-%d %H:%M:%S.") << time.usec.to_s[0..6].ljust(6)
    color = SEVERITY_TO_COLOR_MAP[severity]

    "\033[0;37m#{formatted_time} (pid:#{$$})\033[0m [\033[#{color}m#{formatted_severity}\033[0m] #{msg.strip}\n"
  end

end

Rails.logger.formatter = Formatter.new 
```

更多信息：http: [//www.software-thoughts.com/2013/08/adding-process-id-and-timestamps-to.html](http://www.software-thoughts.com/2013/08/adding-process-id-and-timestamps-to.html)

原帖在这里：[http ://cbpowell.wordpress.com/2012/04/05/beautiful-logging-for-ruby-on-rails-3-2/](http://cbpowell.wordpress.com/2012/04/05/beautiful-logging-for-ruby-on-rails-3-2/)

# asp.net - asp.net dropdownlist AutoPostBack URL 问题

> ID：10147361
> 
> 赞同：0
> 
> 时间：2012-04-13T19:46:51.537
> 
> 标签：asp.net, url, drop-down-menu, autopostback

编码员，

我有一个带有 AutoPostBack=True 的 asp.net 下拉列表控件。该控件放置在默认页面 URL 为 /Default.aspx 的 html/javascript 选项卡容器上。为了与下拉列表交互并触发 AutoPostBack，用户必须选择选项卡项#2，它将页面的 URL 更改为 /default.aspx#content-tab-1-2-tab。这是因为下拉列表放置在选项卡项 #2 中，并且用户访问 /default.aspx 时看不到它。

现在的问题是，每当页面回发时，由于下拉列表中的选择更改，页面将指向 /default.aspx URL 而不是 /default.aspx#content-tab-1-2-tab URL。这会导致下拉列表不可见，并且用户必须单击选项卡项#2 才能再次与下拉列表交互。

如何强制下拉列表中的 AutoPostBack 操作指向 /default.aspx#content-tab-1-2-tab 而不是 /default.aspx ？

这是我的代码片段

```
protected void Page_Load(object sender, EventArgs e)
{
    DropDownList_City.Enabled = false;
    DropDownList_District.Enabled = false;

    GMap_main.addControl(new GControl(GControl.extraBuilt.MarkCenter));
    GMap_main.addControl(new GControl(GControl.extraBuilt.TextualCoordinatesControl));
    GMap_main.enableGoogleBar = true;
    GMap_main.Language = "ar";

    if (!IsPostBack)
    {
        var countries = from x in db.Countries select x.name_ar;

        //BINDING THE DROP DOWN LIST
        DropDownList_Country.DataSource = countries;
        DropDownList_Country.DataBind();

        DropDownList_City.Enabled = false;
        DropDownList_District.Enabled = false;
    }

}

/// <summary>
/// EVENT HANDLING FOR THE DROP DOWN LIST
/// </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
protected void DropDownList_Country_SelectedIndexChanged(object sender, EventArgs e)
{
    var city = from x in db.Cities where x.Country.name_ar == DropDownList_Country.SelectedValue select x.name_ar;

    DropDownList_City.DataSource = city;
    DropDownList_City.DataBind();

    DropDownList_City.Enabled = true;

} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:14:42.107

因为 URL 的片段部分（包括 # 之后的部分）没有发送到服务器，所以解决这个问题的时间比看起来应该的要难。解决它的一种方法是添加一些 javascript，当您更改选项卡时设置隐藏字段的值。然后，当它回发时，您会知道您所在的页面，并且您可以将片段作为重定向的一部分包含在内。

# c++ - C++ 编程和最终的移动

> ID：10147370
> 
> 赞同：0
> 
> 时间：2012-04-13T19:47:40.133
> 
> 标签：c++, android-ndk

我想构建最终完全原生的 android C++ 应用程序，可以转移到 iOS，我应该从哪里开始

首先，为了更容易回答这个问题，我认为我自己几乎是一个中级 C++ 程序员，我还没有脱离命令行程序，但我了解向量、数组、指针、OOP 以及我还没有达到 100 岁的基础知识%，这就是我问这个问题的原因。

我已经用 java 中的 sdk 编写了一些 android 应用程序，但是我的老板现在想要 iOS 应用程序，他不想给我买 mac，（这就是为什么我坚持使用 c++ 中的完全原生 android 而不是去 iOS )

1）首先我很困惑买什么书可以让我从初级 C++ 编程到下一步，...我应该专注于学习 windows API 如果是这样的话，我应该买什么书和教程，因为我厌倦了购买 Kindle 书籍，这些书籍要么是高级的，要么是我已经理解的东西（我在中间找不到一本来挑战我继续使用我的 C++）所以，你们建议我应该直接去学习 android in c++ 还是我应该尝试去其他地方并首先在 C++ 上变得更好

2）如果我应该进入android或ndk，除了一本名为“ANDROID NDK”（大声笑）的kindle书之外，还有什么真正支持android ndk的好书。那本书我能够理解，但整个设置 Eclipse 令人困惑，因为它告诉我需要设置 cygwin，但后来它告诉我不必设置 cygwin，因为 ndk r7 支持命令行，所以我对 eclipse 的设置感到困惑，我使用 eclipse for java，但从来没有使用过 C++，我必须在项目菜单中将我的代码转换为 C++，所以有没有比那本书更好的 android ndk 教程。

如果你们能回答这两个问题，我将不胜感激，是的，我知道我可能应该从 iOS 而不是 android 开始，但我没有 Mac，因此我不会从 iOS 开始，（如果我错了，但是！））我想如果我可以编写 android 本机 C++ 代码，那么如果我使用 Xcode 4 在 iOS 上用 C++ 编写代码，那么过渡到 iOS 就不会那么难了。

我应该读的书我也应该去的教程会非常有帮助，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:54:51.843

我不确定您是否仍要构建 iOS 应用程序。我不明白学习 android C++ 对 iOS 应用程序有什么帮助。你仍然需要一个 mac 来编译和提交你的应用程序到应用商店（至少你可能需要借一个 mac 来构建和提交）。

另外，我建议对您的问题采用不同的方法（又名与 c++ 解决方案无关，但仍可能对您有所帮助）。

您可以使用 phonegap（将 html、css、javascript 转换为原生 iOS/Android/等应用程序的库）。您可以在 html、css 和 javascript（还有 jquerymobile）中编写简单的代码，并且可以轻松地将您的应用程序转移到不同的平台。

注意：Phonegap 的新名称是 Cordova。

您可以在这里找到更多信息：[http ://www.phonegap.com](http://www.phonegap.com)

希望这可以帮助！-c0d3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:08:08.920

好吧，我该怎么说呢？

1) 关于 C++ 的书籍：你试过参考书吗？

[http://www.amazon.com/Programming-Principles-Practice-Using-C/dp/0321543726/ref=sr_1_2?s=books&ie=UTF8&qid=1334347108&sr=1-2](https://rads.stackoverflow.com/amzn/click/com/0321543726)

你也可以得到这个。它涵盖了基础知识并介绍了该语言的更多实际用法：

[http://www.amazon.com/Programming-Principles-Practice-Using-C/dp/0321543726/ref=sr_1_2?s=books&ie=UTF8&qid=1334347108&sr=1-2](https://rads.stackoverflow.com/amzn/click/com/0321543726)

Herbert Shildt 有一本很棒的 C++ 书籍：

[http://www.amazon.com/Beginners-Guide-Second-Edition/dp/0072232153/ref=sr_1_3?s=books&ie=UTF8&qid=1334347407&sr=1-3](https://rads.stackoverflow.com/amzn/click/com/0072232153)

请记住，所有这些书籍**都没有涵盖**C++ 新标准 C++0x（或 C++11）。

2）由于您计划进行多平台开发，因此我建议您使用移动框架。为两个系统（iOS 和 Android）编写多平台 C++ 代码并非易事。此外，iOS 的主要语言是 Objective C，顺便说一句，寻找 C++（甚至 Java）开发人员可能会很尴尬。不幸的是，大多数移动框架都是基于 Web 的。如果您的应用程序需要低级别的访问权限，那么您可能会不走运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:11:26.427

您最好的选择是将所有特定于平台的代码隐藏在实现公共接口的本机库中。您的代码将仅通过公开的接口使用库，并且实现在编译时通过平台特定标志绑定到接口

我不知道任何android-iOS原生跨平台开发库，也许应该有一个？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T19:23:13.747

我以果酱发誓。我已经将它用于视频游戏开发。您可以从 Visual Studio 中完成整个 ios 开发、android 开发。

您将需要 iTunes 为 ios 部署，但仅此而已。

# jquery - jquery 移动弹出窗口不起作用？

> ID：10147371
> 
> 赞同：14
> 
> 时间：2012-04-13T19:47:53.080
> 
> 标签：jquery, mobile, popup

我正在使用 jquery mobile。我试图创建一个弹出窗口。我发现这个简单的代码应该可以工作。[http://jquerymobile.com/branches/popup-widget/docs/pages/popup/index.html](http://jquerymobile.com/branches/popup-widget/docs/pages/popup/index.html)

我尝试了示例中的代码

```
<a href="#popupBasic" data-rel="popup">Tooltip</a>

<div data-role="popup" id="popupBasic">
    This is a completely basic popup, no options set.
</div> 
```

但是当我把它放在我自己的代码中时，div 仍然会显示，当我点击按钮时，它会转到另一个页面，而不是弹出窗口。有人能帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T21:19:29.713

嗯......我已经让它工作了（下面的示例代码，很抱歉我无法让它显示在代码块中的混乱字符串）......但我想知道你是如何找到这个页面的？这似乎不是最新的 jQuery Mobile 候选版本的一部分......所以我猜它对你不起作用，因为你的 JS 和 CSS 引用没有指向实际包含相应代码的文件？

```
<!DOCTYPE html>
<html class="ui-mobile-rendering">
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1"/>
        <title>JQM popup test</title>
        <link rel="stylesheet"
            href="http://jquerymobile.com/branches/popup-widget/css/themes/default/jquery.mobile.css"/>
        <script src="http://jquerymobile.com/branches/popup-widget/js/jquery.js"></script>
        <script src="http://jquerymobile.com/branches/popup-widget/js/"></script>
    </head>
    <body>
        <a href="#popupBasic" data-rel="popup">Tooltip</a>
        <div data-role="popup" id="popupBasic">This is a completely basic popup, no options set.</div>
        <div>Other</div>
        <div>Random</div>
        <div>Text</div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-16T08:08:20.030

似乎弹出窗口计划在 1.2 版本中发布（请参阅[github 上的此页面](https://github.com/jquery/jquery-mobile/issues/3218)）。我认为 url 页面中的“分支”表明该页面来自 jQuery mobile 未发布的开发分支。如果您查看 1.1 版本的文档页面，则没有记录此功能。

它可以通过添加之前 github 链接中的 jquery.mobile.popup.js 和 css 或使用包含弹出窗口小部件和其他小部件的[web-ui-fw 项目来添加到 1.0。](https://github.com/web-ui-fw/web-ui-)

我使用 web-ui-fw 在 jQuery mobile 1.1 中弹出窗口；该插件对 data-rel 和 data-role 使用“popupwindow”而不是“popup”

# iphone - cocos2d CCSprite + 动画重复？

> ID：10147372
> 
> 赞同：0
> 
> 时间：2012-04-13T19:47:53.917
> 
> 标签：iphone, objective-c, cocos2d-iphone, ccsprite

我正在开发一个游戏，我给用户开火炮的机会。火动画被缓存，但它的宽度为 25 像素，有时火会达到 150 像素。

所以，如果我发射 4 门大炮，宽度为 150 像素（类似于第 6 级），我目前正在动态创建 4x6 = 24 个 CCSprite，并运行 24 个每个 10 帧的动画（缓存帧）......问题是它变得非常慢，火焰动画不会同时开始/结束，游戏中的其他动画变得更慢......你明白了......有什么想法可以改进吗？谢谢你们！

这是代码：

```
NSMutableArray *sprites = [[NSMutableArray alloc] init];
NSMutableArray *anims = [[NSMutableArray alloc] init];

int spr = 0;
for( int i=0; i< [cannons count]; i++ ) {
   CCSprite *cannon = [cannons objectAtIndex:i];
   for( int j=1; j<=cannonRange; j++ ) {

        [sprites addObject:[[CCSprite alloc]init]];
        NSString *anim = @"cannon/fire";
        if( j == cannonRange )
            anim = @"cannon/fire_end";
        [anims addObject:[[Animation findAnimation:anim] getAnimation]];

        float x=cannon.position.x, y=cannon.position.y+25*j;

        ((CCSprite *)[sprites objectAtIndex:spr]).position = ccp(x,y);
        [layer addChild:((CCSprite *)[sprites objectAtIndex:spr]) z:50];

        spr++;
    }
}
for( int k=0; k<[sprites count]; k++){
    [[sprites objectAtIndex:k] runAction:[anims objectAtIndex:k]];
} 
```

（抱歉，我忘了这个[anims addObject:[[Animation findAnimation:anim] getAnimation]]的解释；）

```
-(CCAnimate *) getAnimation {

    NSMutableArray *animFrames = [[NSMutableArray alloc]init];
    for(int i = 1; i < size; ++i)
        [animFrames addObject:[[CCSpriteFrameCache sharedSpriteFrameCache] spriteFrameByName:[self fileName:i]]];

    CCAnimation *animation = [[CCAnimation alloc] initWithFrames:animFrames delay:[self getDelay]];

    CCAnimate *animate = [[CCAnimate alloc] initWithAnimation:animation restoreOriginalFrame:NO];

    return animate;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T15:47:03.813

`CCAnimate actionWithDuration: animation: restoreOriginalFrame:`已弃用，请使用此：

创建精灵：

```
CCSprite *sprite = [CCSprite spriteWithFile:@"img.png"];
[self addChild:sprite]; 
```

创建动画：

```
CCAnimation* animation = [CCAnimation animation];   
[animation addSpriteFrameWithFilename:@"frame1.png"];
[animation addSpriteFrameWithFilename:@"frame2.png"];
[animation addSpriteFrameWithFilename:@"frame3.png"];
animation.delayPerUnit = 0.3f;
animation.restoreOriginalFrame = YES; 
```

创建动作：

```
id action = [CCAnimate actionWithAnimation:animation]; 
```

添加到精灵：

永远重复：

```
[sprite runAction:[CCRepeatForever actionWithAction:action]]; 
```

正常与反向：

```
[sprite runAction: [CCSequence actions: action, [action reverse], nil]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:32:34.333

首先，创建你的精灵

```
CCSprite *sprite = [[CCSprite alloc] init]; 
```

现在创建动画

```
anim = [[CCAnimation animation] retain];
[anim addFrameWithFilename:@"frame1.png"];
[anim addFrameWithFilename:@"frame2.png"];
[anim addFrameWithFilename:@"frame3.png"];
... 
```

现在当你想播放动画时，创建一个动画动作

```
id animateAction = [CCAnimate actionWithDuration:2.0f animation:anim restoreOriginalFrame:NO]; 
```

并告诉你的精灵运行动画

```
[sprite runAction:animateAction]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:26:32.670

在 cocos2d 中使用/创建 CCSprites 很容易无意中获得糟糕的性能。考虑到这一点，我建议遵循 cocos2d 动画编程指南：http: [//www.cocos2d-iphone.org/wiki/doku.php/prog_guide :animation](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide:animation)

# objective-c - 当 ID 号与我在文本字段中输入的相同时尝试打印名称

> ID：10147373
> 
> 赞同：0
> 
> 时间：2012-04-13T19:47:58.040
> 
> 标签：objective-c, xcode, macos, cocoa, object

我想知道的是如何使用附加的 ID 号显示客户的名称（它是客户对象的对象实例）。这是我迄今为止尝试过的，但它不起作用：

```
int number = [nunmber intValue];
Customer *customer = [list objectAtIndex:(memberNumber == number)];
NSLog(@"member:%@",customer.name);
NSLog(@"number:%i",number); 
```

所有这一切都是它打印表格中第一个人的名字，
感谢您的帮助。
我正在为 osx 使用 xcode 4 编程

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:30:14.380

您必须对列表进行迭代（快速枚举）：

```
for (Customer *c in list) {
  if ([c memberNumber]==nunmber) {
    NSLog(@"member %@ with number %@ found",[c name],[c memberNumber]);
  }  
} 
```

前提是`nunmber`和`memberNumber`是同一类型。您的方法`...:(memberNumber==number)`将为您提供索引为 0 的第一个元素（如果 memberNumber!=number）或第二个元素（如果 memberNumber==number），因为您有效地执行了测试并因此得到一个带有 0 或 1 的布尔值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:04:58.467

尝试这个：

```
Customer *customer = [list objectAtIndex:number]; 
```

**编辑**

您可以使用 的实例`NSPredicate`根据成员编号过滤数组，如下所示：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"memberNumber == %@", [NSNumber numberWithInt:memberNumber]];
NSArray *matchingMembers = [members filteredArrayUsingPredicate:predicate];

Customer *customer = [matchingMembers lastObject];
NSLog(@"%@", customer.name); 
```

# c# - 如何获取 Facebook 访问令牌以将应用程序发布到公司墙上？

> ID：10147375
> 
> 赞同：0
> 
> 时间：2012-04-13T19:48:01.487
> 
> 标签：c#, facebook, facebook-access-token

所以这就是我想要做的。我已经创建了我的 Facebook 应用程序，并且能够使用 Graph API 资源管理器在右上角指定应用程序。

一些更详细的信息，我正在使用 C# 对我们内部应用程序的功能进行编码，以使其正常工作。

之后，我转到 url 部分并输入以下地址。

[https://graph.facebook.com/MyCompanyPage](https://graph.facebook.com/MyCompanyPage)

然后点击提交。它将在资源管理器中导航并显示该页面下方的信息。那么为了获得我的应用程序的access_token，我上去点击获取访问令牌->指定我的扩展权限->然后再次点击获取访问令牌。一切都很好，我可以使用我们的 Facebook 应用程序成功发布到 Facebook。

问题是 access_token 即将过期，我正在使用手动检索方法来获取访问令牌。

这是我尝试使用 GIT 中的一个示例进行的操作。

```
FacebookClient client = new FacebookClient();
dynamic parameters = new ExpandoObject();
parameters.client_id = "MYAPPID"; // Or does this need to be my CompanyPage ID??
parameters.redirect_uri = "https://www.facebook.com/connect/login_success.html";
// The requested response: an access token (token), an authorization code (code), or both (code token).
parameters.response_type = "token";
// list of additional display modes can be found at http://developers.facebook.com/docs/reference/dialogs/#display
parameters.display = "popup";
// add the 'scope' parameter only if we have extendedPermissions.
parameters.scope = "publish_stream,manage_pages,status_update";
// when the Form is loaded navigate to the login url.
Uri LoginURL = client.GetLoginUrl(parameters);

// whenever the browser navigates to a new url, try parsing the url.
// the url may be the result of OAuth 2.0 authentication.
FacebookOAuthResult oauthResult;
if (client.TryParseOAuthCallbackUrl(LoginURL, out oauthResult)) {
     // The url is the result of OAuth 2.0 authentication
} else {
     // The url is NOT the result of OAuth 2.0 authentication.
} 
```

现在，当我尝试为自己获取应用程序的访问令牌时，这对我有用。但是，我需要该行为以与 Graph API Explorer 相同的方式运行。我需要它像 Explorer 一样工作的原因是因为我想在实际的公司页面下使用 Facebook 应用程序发布帖子，所以看起来公司页面实际上是在发布 Facebook 帖子而不是用户。就像我上面所说的，我可以通过 Graph API Explorer 成功地做到这一点，但在 C# 中没有成功做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:01:04.337

为了代表页面使用 Graph API，您需要获取页面访问令牌 - 请参阅此处了解更多详细信息：[https ://developers.facebook.com/docs/authentication/pages/](https://developers.facebook.com/docs/authentication/pages/)

1.  验证用户并请求**manage_pages**权限
2.  获取用户管理的页面列表
3.  解析列表并获取令牌 - 并使用它发布到提要。

# ios - 新 iPad 上的 CoreGraphics（很多）慢吗？

> ID：10147382
> 
> 赞同：9
> 
> 时间：2012-04-13T19:48:27.073
> 
> 标签：ios, drawing, core-graphics, ipad-3

我刚拿到新的 iPad(3)，目前正在测试我的使用 CoreGraphics 的绘图应用程序的高分辨率版本。

在正常的 1024x768 模式下，iPad 在性能上或多或少相似——快速绘图时只有轻微的延迟。

但是，当我尝试在高分辨率画布 (2048x1536) 上绘画时，应用程序变得异常缓慢和滞后。这是因为 CoreGraphics 主要由 CPU 计算（我相信它并不比 iPad2 快多少）并且必须多做 4 倍的工作？

我基本上改变了我的绘画程序

```
UIGraphicsBeginImageContext(CGSizeMake(1024, 768)); 
```

至

```
UIGraphicsBeginImageContextWithOptions(CGSizeMake(1024, 768), NO, 0.0); 
```

启用视网膜绘图，线条非常漂亮和清晰，图像以 2048x1536 格式保存。但如前所述，延迟和滞后使其无法用作绘图工具。

除了在 openGL 中重写我的应用程序（由于时间限制和早期在关键混合模式下的失败尝试，这不是一个选项），我能做些什么来优化在新 iPad 上以视网膜模式运行的 CoreGraphics 应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-10T23:43:32.877

如果该应用程序是您制作的并且使您的 iPad 变慢，您应该通过作为 xcode 一部分的 Instruments 对其运行测试。我认为它可以帮助您找出问题所在。我不认为你的 iPad 有故障或类似的东西。

# java - 如何找出将本地 unix 服务器用作 SMTP 服务器的属性配置

> ID：10147384
> 
> 赞同：1
> 
> 时间：2012-04-13T19:48:32.970
> 
> 标签：java, spring, smtp

如何找出将本地 unix 服务器用作 SMTP 服务器的属性配置

由于 GMAIL 和其他 SMTP 服务器不允许更改配置中经过身份验证的电子邮件地址以外的“FROM”电子邮件地址，因此我需要使用托管 linux 服务器作为 SMTP 服务器。

我需要什么属性配置以及如何找到它们的值？

有人可以在上下文中解释我对 GMAIL 的 bean 配置吗？

```
<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
<property name="host" value="smtp.gmail.com" />
<property name="port" value="587" />
<property name="username" value="xxxxxx@gmail.com" />
<property name="password" value="xyxyxyxyx" />

<property name="javaMailProperties">
    <props>
        <prop key="mail.smtp.auth">true</prop>
        <prop key="mail.smtp.starttls.enable">true</prop>
    </props>
</property> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-21T04:44:55.177

最后，我想我得到了答案（如果这可以帮助某人）；发现它对我有用

```
<bean id="mailSender" class="org.springframework.mail.javamail.JavaMailSenderImpl">
   <property name="host" value="localhost" />
   <property name="port" value="25" />
</bean> 
```

# c# - 空字符串是空引用吗？

> ID：10147387
> 
> 赞同：3
> 
> 时间：2012-04-13T19:48:37.357
> 
> 标签：c#, string, winforms, nullreferenceexception, versioninfo

为什么这段代码（在我的表单`_Load()`事件中）：

```
FileVersionInfo vi = FileVersionInfo.GetVersionInfo(_fullPath);
String VersionInfo = vi.FileVersion;
if (VersionInfo.Trim().Equals(String.Empty)) {
    VersionInfo = NO_VERSION_INFO_AVAILABLE;
}
textBoxVersionInfo.Text = VersionInfo; 
```

...给我以下错误消息什么时候`VersionInfo == ""`是真的？

> System.NullReferenceException 未处理消息=对象引用未设置为对象的实例。*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T19:53:10.860

你应该`String.IsNullOrEmpty`在这里使用方法。[见 MSDN](http://msdn.microsoft.com/en-us/library/system.string.isnullorempty.aspx)

```
if (String.IsNullOrEmpty(VersionInfo)) {
    VersionInfo = NO_VERSION_INFO_AVAILABLE;} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T19:56:08.360

Well, since I was getting a ridiculous number of down votes on my other question, here it is again in a more blunt and less lighthearted fashion:

*   **`null` represent the *lack* of an object**; and
*   **all strings are objects**; thus
*   **there is no string, of any length, which is `null`**; thus
*   ***an empty string is never `null`.***

That's it, nothing more. *Examine the stack-trace* and/or *attach a debugger* to find out *where* the `null` (which is *not* an empty string) is coming from.

The exception is the result of using `expr.somePropertyFieldOrMethod` where `expr` evaluates to `null`¹ hence the ***Null Reference*** *Exception*.

It is the job of *you*, the developer, to find out *which* `expr` was `null` instead of waiting to see what others suggest might be wrong. As such, I am closing this as "too localized" after answering the question in the title, which is the only question present.

(As in my previous answer, I note that `textBoxVersionInfo` being `null` could cause this exception, even when `VersionInfo == ""` is true. The other alternative is, of course, that *that* `VersionInfo` does *not* represent the empty string.)

* * *

¹ Technically this exception could be raised arbitrarily, perhaps justified in an Extension Method. However, raising this exception wantonly is *not* common or good practice or found in the .NET framework and is thus generally a dismissible cause when debugging.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T19:52:58.050

如果`VersionInfo is NULL`为真，则**VersionInfo.Trim()**将给出错误。

请使用`String.IsNullOrEmpty`.

如果 VersionInfo 为空，那么您可以使用

```
if(VersionInfo == null) 
```

或者

`String.IsNullOrEmpty(VersionInfo)`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T20:00:16.147

有一种`null`安全的方法可以做到这一点：而不是

```
VersionInfo.Trim().Equals(String.Empty) 
```

写

```
string.IsNullOrWhiteSpace(VersionInfo) 
```

如果为null，它不会崩溃，如果修剪导致空字符串 `VersionInfo`，它将返回true 。`VersionInfo`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T19:57:38.903

After your response to my comment, you know that `VersionInfo` is null. The call to Trim() is failing because that will execute before the check if it equals `String.Empty`.

You should use `(string.IsNullOrEmpty(VersionInfo) || VersionInfo.Trim().Length < 1)` instead (or `string.IsNullOrWhiteSpace(VersionInfo)` if you're in .NET 4).

**EDIT:**

After seeing your response to another answer that you removed Trim() and it still doesn't work...at that point, it's the Equals call that will break. Try the code mentioned above and it should work fine.

# ios - 在 iOS 中通过 Adob e 的 Typekit 使用自定义字体

> ID：10147394
> 
> 赞同：2
> 
> 时间：2012-04-13T19:49:22.170
> 
> 标签：ios, fonts, typekit

我知道可以通过在应用程序中使用自定义字体，方法是在应用程序中添加 .tff 并更改 info.plist，但是是否可以使用 typekit.com 中的字体？我的客户想要一种名为 Omnes Pro 的特定字体。但该网站似乎只面向 HTML 开发人员。我不是这样的。有帮助吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-01T10:07:24.763

TypeKit 字体仅供网络使用，因此这是不可能的

[http://help.typekit.com/customer/portal/articles/6854-using-fonts-in-desktop-applications](http://help.typekit.com/customer/portal/articles/6854-using-fonts-in-desktop-applications)

**编辑**

看起来 TypeKit 桌面同步意味着字体不再是“仅限网络”，但截至 2014 年 2 月，它们的许可证仍然不允许嵌入本机应用程序：

来自[http://help.typekit.com/customer/portal/articles/1341590](http://help.typekit.com/customer/portal/articles/1341590)：

**我可以在我正在构建的移动或桌面应用程序中嵌入 Typekit 桌面字体吗？**

不可以。Typekit 同步字体许可证或 Web 字体许可证都不允许您将字体嵌入移动或桌面应用程序中。目前，这需要直接从代工厂或其授权经销商之一购买适当的许可证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:05:16.137

我没有使用 TypeKit 的经验，但通过简单地检查他们的网站，我找到了以下链接：[Now serving truetype fonts to iOS 4.2 devices](http://blog.typekit.com/2011/01/10/now-serving-truetype-fonts-to-ios-4-2-devices/)

这非常可靠地暗示他们确实在购买后提供 OpenType 和/或 TrueType 字体格式的文件。

# android - 是否可以使用 Android SDK 选择备用 USB 接口？

> ID：10147399
> 
> 赞同：2
> 
> 时间：2012-04-13T19:49:43.997
> 
> 标签：android, sdk, usb

我有一个带有接口的 USB 设备，它的端点使用备用设置。如何使用“android.hardware.usb”包中的类选择这些设置？

在本机代码中，我使用来自 libUsb 的“libusb_set_interface_alt_setting”函数，它本质上是 IOCTL。但是，我不想为此使用 NDK。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:41:31.570

只是为了结束这个问题。

我通过为我的设备编写内核驱动程序并将其用作字符设备解决了这个问题。

作为旁注，我可以说`set_interface_alt_settings`在`libusbhost`库中实现并通过 JNI 在“android.hardware.usb”包中使用它会很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T21:19:11.217

[根据USB 规范](http://www.usb.org/developers/docs/usb_20_101111.zip)(usb_2.0.pdf)中的第 9.4 章，启用接口的替代设置只不过是**标准设备请求。**

所以这：

```
UsbDeviceConnection.controlTransfer(UsbConstants.USB_DIR_OUT | 0x01, SET_INTERFACE, _alternate_setting_, _interface_nr_, null, 0, _timeout_); 
```

应该管用。SET_INTERFACE (= 11 = 0x0B) 是 USB 规范常量。我在 android API 中找不到它作为 Java const。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-30T12:21:30.853

我也遇到了这个问题-在这里检查我的解决方案：

[API 级别 21 之前的 Android USB 主机 DeviceConnection.setInterface](https://stackoverflow.com/questions/38102677/android-usb-host-deviceconnection-setinterface-prior-to-api-level-21/)

我首先按照上面的建议尝试了使用 controlTransfer 的方法，但它对我来说也失败了。SET_INTERFACE 命令没问题，我读回的 GET_INTERFACE 返回了预期的备用值，因此设备得到了正确的接口集。即便如此，对端点的读写还是失败了：-/

我通过 libusb、usbfs 和内核跟踪了 libusb_set_interface_alt_setting()。在内核中，除了简单地将 SET_INTERFACE 发送到 USB 设备之外，还有更多代码，例如关于“9.1.1.5：在新的 altsetting 中为所有端点重置切换”的注释。libusb 的 libusb_set_interface_alt_setting() 文档还说：

> 您应该始终使用此函数，而不是制定自己的 SET_INTERFACE 控制请求。这是因为底层操作系统需要知道何时发生此类更改。

所以我想我最好这样做。长话短说：查看上面链接中的代码。

# javascript - 模块模式内的回调函数中的“this”指的是什么

> ID：10147422
> 
> 赞同：2
> 
> 时间：2012-04-13T19:51:12.507
> 
> 标签：javascript

其中`Ajax.use`，回调函数内部的this指的是回调函数。

然而，在回调定义之外`this`将引用 Ajax 的特定实例。

这就是我使用`this`in `Ajax.invoke`->`this.use()`从另一个成员方法调用成员方法的方式。

我还需要在回调函数内部调用一个成员方法。

我猜到并输入

```
this.invoke() 
```

但我不认为这是指回调函数中的正确对象。我认为它指的是回调函数对象。

```
/**
 *    Ajax
 */

var Ajax = ( function () 
{
    var Ajax = function (element) 
    {
        this.object = this.create();
    };
    Ajax.prototype.create = function() 
    {
        var request;
        try
        {
            request = new window.XMLHttpRequest();
        }
        catch( error )
        {
            try 
            {
                request = new window.ActiveXObject( "Msxml2.XMLHTTP" );
            }
            catch( error )
            {
                try
                {
                    request = new window.ActiveXObject( "Microsoft.XMLHTTP" );
                }
                catch( error )
                {
                    request = false;
                }
            }
        }
        // alert("Object Created Successfully");
        return request;
    };

    Ajax.prototype.use = function( param, ajax_func )
    {
        alert("Ajax.prototype.use Called");
        this.object.open( "POST", Global.GATEWAY, true );
        this.object.setRequestHeader( "Content-type", "application/x-www-form-urlencoded" );
        this.object.setRequestHeader( "Content-length", param.length );
        this.object.setRequestHeader( "Connection", "close" );
        this.object.onreadystatechange = function()
        {
            if( this.readyState === 4 )
            {
                if( this.status === 200 )
                {
                    ajax_func( this.responseText );
                    return true;
                }
                else
                {
                    this.invoke( param, ajax_func );
                    return false;
                }
            }
        };
        this.object.send( param );
        return true;
    };

    Ajax.prototype.invoke = function( param, ajax_func )
    {
        var state = false,
            count = 1;
        while( state === false && count <= 5 )
        {
            if( count !== 1 )
            {
                alert( 'Ajax Object Use Failed | Try Again ');
            }
            state = this.use( param, ajax_func );
            count++;
        }
        return state;
    };

    return Ajax;

} () ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T19:54:40.920

您完全正确，您的回调内部`this`不再是对 Ajax 对象的引用。您需要创建一个可以在回调中使用的引用：

```
Ajax.prototype.use = function( param, ajax_func )
{
    alert("Ajax.prototype.use Called");
    var self = this;
    this.object.open( "POST", Global.GATEWAY, true );
    this.object.setRequestHeader( "Content-type", "application/x-www-form-urlencoded" );
    this.object.setRequestHeader( "Content-length", param.length );
    this.object.setRequestHeader( "Connection", "close" );
    this.object.onreadystatechange = function()
    {
        if( this.readyState === 4 )
        {
            if( this.status === 200 )
            {
                ajax_func( this.responseText );
                return true;
            }
            else
            {
                self.invoke( param, ajax_func );
                return false;
            }
        }
    };
    this.object.send( param );
    return true;
}; 
```

请注意，我是在定义`var self = this;`和使用`self`而不是`this`在回调内部。

# c++ - 动态编程/记忆（计数三元组）

> ID：10147423
> 
> 赞同：1
> 
> 时间：2012-04-13T19:51:15.163
> 
> 标签：c++, python, dynamic-programming, memoization

我有一个这样的数字列表（随机生成，在每个子组中排序的数字。这些组是不相交的，这意味着您不会在多个组中找到给定的数字）：

```
L=[[19,18,14,9,4],[15,12,11,10,6,5],[8],[16,13,3,2],[17,7,1]] 
```

我正在尝试**计算**可以创建递减三元组的方法数量。

递减三元组是一个三元组，我们从左到右扫描列表并从一组中取出元素 1，然后从另一组中取出元素 2，然后从另一组中取出元素 3，其中最终结果自然应该按递减顺序排列。

例如，(19,11,7) 是一个有效的递减三元组，因为这些数字来自不同的子列表并且按递减的自然顺序排列（19 在主列表中的 11 之前，在 7 之前）。

用一个反例来澄清：(15, 9, 8) 不会是一个递减的三元组，因为 9 来自比 15 更早的子列表。

我正在尝试使用动态编程或某种记忆来计算递减三元组的数量。像这样设置循环结构很容易：

```
for i in xrange(0,len(L)-2):
    for j in xrange(i+1, len(L)-1):
        for k in xrange(j+1, len(L)):
            for item1 in L[i]:
                for item2 in L[j]:
                    if item1>item2:
                        for item3 in L[k]:
                            if item2>item3:
                                count+=1 
```

但是对于较大的列表，它不能很好地扩展。我觉得应该有一些方法可以通过遍历列表一次来计算三胞胎。例如，如果我知道一个数字大于另一个数字（或者如果我知道它大于多少个数字），我觉得我应该能够在以后重新使用该信息。

例如，我知道 16 可以在有效的三元组中出现在 7 或 1 之前。那是2个“对”。因此，如果我想在列表中倒退时创建一个三元组，例如，我查看 19，我应该能够说“它大于 16，因此您可以从中创建两个三元组，因为我们知道16 大于 2 个数字。” 等等。

我只是在大声思考，但希望能得到一些见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:01:35.207

尝试以下 itertool 解决方案

```
import itertools
import time

L= [
    {19, 18, 14, 9, 4},
    {15, 12, 11, 10, 6, 5},
    {8},
    {16, 13, 3, 2},
    {17, 7, 1},
]

start = time.time()
for i in xrange(20000):
    count = 0
    for i in xrange(0,len(L)-2):
        for j in xrange(i+1, len(L)-1):
            for k in xrange(j+1, len(L)):
                for item1 in L[i]:
                    for item2 in L[j]:
                        if item1>item2:
                            for item3 in L[k]:
                                if item2>item3:
                                    count+=1

print
print time.time() - start

# result: 3.1542930603

start = time.time()
for i in xrange(20000):
    sum(1 for l1, l2, l3 in itertools.combinations(L, 3) for a, b, c in itertools.product(l1, l2, l3) if a > b > c)

print
print time.time() - start

# result: 1.94973897934 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:11:29.647

`i`在和之间使用索引`0`而`n`不是嵌套循环。跟踪当前三元组的最后一个元素。并使用备忘录使其高效。

```
L=[[19,18,14,9,4],[15,12,11,10,6,5],[8],[16,13,3,2],[17,7,1]]

n=len(L)

memo = {}
def f(i,j,last):
  if (i,j,last) in memo:
    return memo[(i,j,last)]
  if j==3:
    return 1
  if i==n:
    return 0
  res=0
  # take one from L[i]
  for x in L[i]:
    if last > x:
      res+=f(i+1,j+1,x)
  # don't take any element from L[i]
  res += f(i+1,j,last)
  memo[(i,j,last)] = res
  return res

BIG = 10**9
print f(0,0,BIG) 
```

# java - Java：string.replace 不支持变量？

> ID：10147428
> 
> 赞同：-3
> 
> 时间：2012-04-13T19:51:34.013
> 
> 标签：java, string, replace, indexof

当我使用：

```
mString = mString.replace(" hello 123 everyone", "Yo"); 
```

它工作正常。但是，如果我混合使用整数和字符串，`" "`然后 printLn 它会显示相同的输出，但不会替换！同样的事情`indexOf`，如果我使用很多像“”+变量+更多的东西，它不会找到它。

输出是相同的，这一定是Java中的一个错误。

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:00:44.927

```
public static void main(String[] args) {

    String s = "<h3>Fredag 20 april</h3>";
    int day = 20;   

    System.out.println(s);

    s = s.replace(" " + day, "hello!");

    System.out.println(s);
} 
```

输出：

```
<h3>Fredag 20 april</h3>
<h3>Fredaghello! april</h3> 
```

为我工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:01:20.513

你说这行不通？

```
String mString = " hello 123 everyone";<br>
mString = mString.replace(" " + "hello " + 123 + " everyone", "Yo");<br>
System.out.println(mString); 
```

确保原始字符串上没有任何多余的空格。

# html - CSS：强制三列表的两列宽度相同

> ID：10147430
> 
> 赞同：1
> 
> 时间：2012-04-13T19:51:44.247
> 
> 标签：html, css, width, tabular

给定一个三列表，我希望前两列始终具有相同的动态宽度——即尽可能小，但两列需要始终共享宽度。第三列应填充可用容器宽度的其余部分。

例子：

```
+----+----+--------------+
|  A |  B |      C       |
+----+----+--------------+
|1234|  12|           foo|
+----+----+--------------+
|   a|   b|           bar|
+----+----+--------------+ 
```

请注意，B 的宽度为 4 个字符，尽管它的内容适合 2 个字符的列。

硬编码 A 列和 B 列的宽度不是解决方案，因为内容大小不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:06:59.883

我认为它不可能只使用 css，它可能使用 javascript，但这绝不是一个好的选择。有一种方法可以做到这一点，它不是很漂亮，但它可能会起作用：如果您使用 php 向表格提供数据，您可以在第二行创建一个不可见的 div，该 div 与第一行具有完全相同的数据。例如：

```
<div class="NoSelect" style="display: inline-block; height: 1px; overflow: hidden;">
--echo here the same data as in the first row--
</div> 
```

要使里面的文本无法选择，您可以添加：

```
<style type="text/css">
    .NoSelect {
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        -o-user-select: none;
        user-select: none;
        cursor: default;
    }
</style>
<script language="javascript" type="text/javascript">
    jQuery.fn.extend({ 
        disableSelection : function() {
            return this.each(function() {
                this.onselectstart = function() { return false; };
                this.unselectable = 'on';
            });
        }
    });
    $(document).ready(function() {
        $('.NoSelect').disableSelection();
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T19:56:53.693

will force the first two columns to be small as possible [http://jsfiddle.net/DYeyp/](http://jsfiddle.net/DYeyp/)

```
​&lt;table border=1 style='width:100%;'>
​&lt;tr>
 ​   <td style='width:1%;'>1111</td>
  ​  <td style='width:1%;'>1111</td>
  ​  <td>1</td>
​&lt;/tr>
​&lt;tr>
 ​   <td>1</td>
  ​  <td>1</td>
  ​  <td>1</td>
​&lt;/tr>
​&lt;tr>
 ​   <td>1</td>
  ​  <td>1</td>
  ​  <td>1</td>
​&lt;/tr>
​&lt;/table>​​​​​​​​​​​ 
```

# c# - 在 Windows 窗体应用程序上使用的最佳 Web 浏览器控件是什么？

> ID：10147434
> 
> 赞同：6
> 
> 时间：2012-04-13T19:52:06.697
> 
> 标签：c#, .net, visual-studio-2010, web, webbrowser-control

我正在寻找可以更快地在 Windows 窗体应用程序上呈现网页的 Web 浏览器控件或任何技术。有什么建议么？我正在使用.Net，内置的网络浏览器控件对我来说不是一个选项，因为它有很多问题而且速度很慢。我已经尝试过 GeckoFX，到目前为止我认为它已经足够好了。它比 .Net 网络浏览器控件慢但速度快，而且它也有很多好的功能。

**更新**

我一直在测试很多 Web 浏览器控件，最终我们使用了 Awesomium。适用于 Windows 应用程序的出色 Web 浏览器控件而且速度也很快。这是链接[http://awesomium.com/](http://awesomium.com/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T19:58:17.093

你有没有试过这些：

[**WebKit .NET**](http://webkitdotnet.sourceforge.net/)
它是用 C# 编写的 WebKit 的 WinForms 控件库包装器。其目的是使开发人员可以轻松地将 WebKit 合并到他们的 .NET 应用程序中。

[**GeckoFX**](http://code.google.com/p/geckofx/)
它是一个用干净的注释 C# 编写的 Windows 窗体控件，它在任何 Windows 窗体应用程序中嵌入了 Mozilla Gecko 浏览器控件。它还包含一个简单的类模型，提供对 HTML 和 CSS DOM 的访问。

[**MozNet**](http://se7en-soft.com/moznet/getmoznet.aspx)
它是 Gecko 的替代包装器，声称比 GeckoFX 更活跃。

# c - FCFS 调度代码中的分段错误

> ID：10147435
> 
> 赞同：0
> 
> 时间：2012-04-13T19:52:13.187
> 
> 标签：c, linux, segmentation-fault, system-calls

我正在为 FCFS 调度编写此代码。但在 Linux 中，这会给出“分段错误”。如何纠正这样的错误？

```
 #include<stdio.h>
#include<string.h>
float fxn();

int main()
{

float avgwt;
int n,i,at[10],bt[10];
printf("\n\nEnter the number of processes:");
scanf("%d",&n);
printf("\n\n BURST TIME and ARRIVAL TIME of thr process");
for(i=0;i<n;i++)
{
printf("\n ARRIVAL TIME :");
scanf("%d",&at[i]);
printf(" BURST TIME : ");
scanf("%d",&bt[i]);
}

avgwt=fxn(at,bt,n);

printf("\n\nAverage waiting time=%f",avgwt);
return 0;

}

float fxn( int at[], int bt[], int n)

{

int i,j,t,wt[n],sum,tt[n],q;

float avgwt;

 for(j=i+1;j<n;j++)
  {
   if(at[i]>at[j])

    {
t=at[i];
at[i]=at[j];
at[j]=t;
q=bt[i];
bt[i]=bt[j];
bt[j]=q;
    }
   }

wt[0]=0;

for(i=0;i<n;i++)
{

wt[i+1]=wt[i]+bt[i];
sum=sum+(wt[i+1]-at[i]);

}

avgwt=sum/n;

return avgwt;

} 
```

另一个问题----我将编辑这段代码以在linux中进行系统调用。

如果 ac 程序将从用户那里获取输入并将其传递给内核进行进一步计算，那么数组的传递会起作用吗？

（例如 - 这里 main() 函数用于将输入和 fxn() 函数带入内核

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:07:53.603

您在下面遇到缓冲区溢出

```
for(i=0;i<n;i++)
{

  wt[i+1]=wt[i]+bt[i];
   sum=sum+(wt[i+1]-at[i]);
  } 
```

它也应该是`i < n -1`你需要`i=0`在函数中初始化`fxn`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:09:16.543

分段错误/错误是您的程序访问内存（读取或写入）的指标，它不属于您的程序（意味着它没有访问它的“权利”）。这包括对数组成员的访问。

现在，我在您的代码中看到了一个可能且明确的问题：

1.  您读取了许多进程并填充`n`了数组`at`和值。只要最多有 10 个进程，这才是正确的，因为您声明数组的长度只有 10。`bt``n`

2.  在你的函数`fxn`中（顺便说一句：你确定你不能更好地命名这个函数吗？）你正在创建一个`wt`长度数组`n`（你也创建了一个`tt`你甚至不使用的数组）。技术上正确`wt`的是所谓的 VLA 或可变长度数组，它尤其只存在于 C99 中，这是大多数编译器仍然不完全支持的 C 标准，因此您可能希望避免这些（例如使用`malloc`和`free`）。那么真正的问题是什么？

这：

```
for(i=0;i<n;i++)
{

wt[i+1]=wt[i]+bt[i];
sum=sum+(wt[i+1]-at[i]);

} 
```

`i`可以具有从`0`to的值`n-1`，因此`i+1`可以具有`n`超出数组范围的值，从而`wt`导致段错误。

您可能还会考虑您的数组`wt`；你甚至不需要它！只是一个提示。

# c# - 从 VB6 和 C# 调用 DLL 在双精度下的结果略有不同

> ID：10147436
> 
> 赞同：3
> 
> 时间：2012-04-13T19:52:14.727
> 
> 标签：c#, vb6, migration, double, floating-point-precision

我在 DLL 中有一个专有库（我没有代码），它在 VB6 中已使用多年。我正在尝试将 VB6 代码升级到 C#，并希望使 C# 代码完全复制 VB6 行为。当从每个环境调用时，我无法使在 DLL 中完成的某些计算的双精度结果完全匹配。

在VB6中我有这样的东西（注意文件读写是为了确保使用和生成完全相同的值）：

```
Dim a As Double, b As Double, c As Double, d As Double
Open "C:\input.txt" For Binary As #1
Get #1, , a
Get #1, , b
Get #1, , c
Get #1, , d
Close #1
Dim t As New ProprietaryLib.Transform
t.FindLine a, b, c, d
Open "C:\output.txt" For Binary As #1
Put #1, , t.Slope
Put #1, , t.Intercept
Close #1 
```

在 C# 中，我有这样的东西：

```
System.IO.BinaryReader br = new System.IO.BinaryReader(System.IO.File.Open(@"C:\input.txt", System.IO.FileMode.Open));
double a, b, c, d;
a = br.ReadDouble();
b = br.ReadDouble();
c = br.ReadDouble();
d = br.ReadDouble();
br.Close();
ProprietaryLib.Transform t = new ProprietaryLib.Transform();
t.FindLIne(a, b, c, d);
System.IO.BinaryWriter bw = new System.IO.BinaryWriter(System.IO.File.Open(@"C:\output2.txt", System.IO.FileMode.Create));
bw.Write(t.Slope);
bw.Write(t.Intercept);
bw.Close(); 
```

我已经验证输入的读取方式相同（通过将二进制值重写到文件来验证），因此将相同的双精度数字提供给 DLL。输出值非常相似，但不完全相同（有时值在数字的最不重要部分是关闭的，在小数点后 15-17 位的噪音中，并且二进制写入文件验证它们是不同的二进制值） . 有没有人对为什么这些值的计算可能不完全相同或者我如何修复或调试这个有任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T19:57:12.967

这可能是因为用于双精度的不同标准

*   出于（当时）性能原因，VB6 默认使用不太精确的内部标准。
*   .NET 符合二进制浮点运算的 IEEE 754 标准

您可以使用选项来编译 VB6 应用程序`/OP`以提高浮点一致性。

> 默认情况下，编译器使用协处理器的 80 位寄存器来保存浮点计算的中间结果。这提高了程序速度并减小了程序大小。但是，由于计算涉及在内存中以少于 80 位表示的浮点数据类型，因此通过冗长的计算携带额外的精度位（80 位减去较小浮点类型中的位数）可能会产生结果不一致。（来源：[MSDN](http://msdn.microsoft.com/en-us/library/aa278532%28v=vs.60%29.aspx)）

# python - python：无法指定 dll 导入的相对路径

> ID：10147440
> 
> 赞同：0
> 
> 时间：2012-04-13T19:52:40.313
> 
> 标签：python, dll, import, loadlibrary

我正在尝试在 python 中加载 dll，并且只有在输入绝对路径时才能这样做。我想使用相对路径或环境变量。唯一有效的是，如果我指定了确切的路径（C:...），我什至试图让 dll 直接在与 py 文件相同的文件夹中构建，但它仍然不起作用。
是）我有的：

```
MY_DLL = r'c:\full_path\output\Win32\Debug\my.dll'
#MY_DLL = r'my.dll'   #this doesn't work but it is what I want
#MY_DLL = r'$(env_var)\dir\output\$(Platform)\$(Configuration)\my.dll'   #this doesn't work either but would be good too 
```

帮助 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:28:28.413

我不太了解 Windows 上的 cdll 或一般的 ctypes，但是，您可以使用 os.path 很容易地操作路径：

```
import os.path
p1="path.dll"
print (os.path.abspath(p1))
p2="${env_var}/path.dll"  #Make sure you set env_var in the calling environment...Otherwise it won't be expanded...
print (os.path.expandvars(p2)) 
```

# php - AJAX 返回数据 PHP/MySQL

> ID：10147443
> 
> 赞同：0
> 
> 时间：2012-04-13T19:52:58.097
> 
> 标签：php, ajax

我的页面上有一个插入函数，它使用 AJAX/PHP 将数据插入到 myMySQL 表中，当添加一行数据时，我的一行数据被返回并在里面打印出来......

```
 <div id="bills"></div> 
```

然后我可以添加另一行数据，但是当我这样做时它会覆盖#bills 的内容，有没有办法将它添加到那里的信息中而不是覆盖它？

***AJAX***

```
function insertBill()
{
    $.post('insert_bill.php', $('form').serialize(), 
        function(data) {***
        $("#bills").html(data); 
    });
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T19:54:57.060

```
$('#bills').append(data); 
```

[jQuery.fn.append 文档](http://api.jquery.com/append/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T19:55:42.837

是的：

```
$("#bills").append(data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T19:55:23.293

而不是`.html()`使用`.append()`

```
$("#bills").append(data); 
```

`data`可以包含 html 标签，jQuery 会做正确的事情。

# git - github：向现有拉取请求添加提交

> ID：10147445
> 
> 赞同：99
> 
> 时间：2012-04-13T19:53:08.527
> 
> 标签：git, github, pull-request

我使用**Fork & Edit this file** file 按钮在 github 上打开了一个 pull request 到[rails repo。](https://github.com/rails/rails)

 **现在，在获得关于我的 PR 的反馈后，我想添加更多提交。所以这就是我所做的

```
$ git clone git@github.com:gaurish/rails.git #my forked repo
$ git rebase -i 785a2e5 #commit hash of my commit using which PR was opened
$ git checkout patch-3 #branch name I had to send my commits under to be shown in that PR
$ git commit -am "Changes done as per feedback"
$ git push origin patch-3 
```

这工作得很好，但似乎是一个相当复杂的工作流程。也许我错了？

我的问题是：我这样做是否正确？如果不是，那么正确的方法是什么？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-04-13T20:20:42.420

由于您使用的是 GitHub 的工具并且只更改了一个文件，您还可以[浏览到](https://github.com/gaurish/rails/blob/1294624d395f558f60949c2c86c40e2c1a70812d/railties/lib/rails/generators/rails/app/templates/app/views/layouts/application.html.erb.tt)GitHub 上的文件，从左上角的“树：”下拉菜单（`patch-3`在您的情况下）下选择正确的分支，然后选择“编辑这个文件”。现在您的更改将提交到此分支，并将显示在您的拉取请求中

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2020-05-21T15:31:19.500

是的 - 你做的工作比你需要的要多得多。只需进行额外的提交，然后强制推送它。当您在浏览器中刷新 github 时，您将看到原始提交以及新推送的提交。

```
$ git commit -m "These changes are in response to PR comments"
$ git push -f origin HEAD 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-13T18:41:42.813

我最近刚刚写了一篇关于这个主题的[博客：](http://ginsys.eu/git-and-github-keeping-a-feature-branch-updated-with-upstream/)

我们如何使这个功能分支保持最新？合并最新的上游提交很容易，但是您希望避免创建合并提交，因为当推送到上游时不会受到赞赏：然后您将有效地重新提交上游更改，并且这些上游提交将获得一个新的哈希 (因为他们有了一个新的父母）。这一点尤其重要，因为当您将这些更新推送到您的个人 GitHub 功能分支时，这些合并的提交将反映在您的 GitHub 拉取请求中（即使您在发出拉取请求之后这样做。）

这就是为什么我们需要变基而不是合并：

```
git co devel #devel is ansible's HEAD aka "master" branch
git pull --rebase upstream devel
git co user-non-unique
git rebase devel 
```

git 的 rebase 选项和 rebase 命令都将保持你的树干净，并避免合并提交。但请记住，那些是你的第一个提交（你发出你的第一个拉取请求）正在被重新设置，并且现在有一个新的提交哈希，这与仍然在你的远程 github repo 分支中的原始哈希不同.

现在，将这些更新推送到您的个人 GitHub 功能分支将在这里失败，因为两个分支不同：本地分支树和远程分支树“不同步”，因为这些不同的提交哈希。Git 会告诉你先`git pull --rebase`，然后再推，但这不会是一个简单的快进推，因为你的历史被改写了。不要那样做！

这里的问题是您将再次获取最初更改的提交，并且这些提交将合并到您的本地分支之上。由于处于不同步状态，此拉取并不完全适用。你会得到一个破碎的历史，你的提交出现了两次。当您将所有这些推送到您的 GitHub 功能分支时，这些更改将反映在原始拉取请求中，这将变得非常非常难看。

AFAIK，实际上没有完全干净的解决方案。我发现的最佳解决方案是强制将您的本地分支推送到您的 GitHub 分支（实际上是强制进行非快进更新）：

根据 git-push(1)：

```
Update the origin repository’s remote branch with local branch, allowing non-fast-forward updates. This can leave unreferenced commits dangling in the origin repository. 
```

所以不要拉，像这样强制推动：

```
git push svg +user-non-unique 
```

或者：

```
git push svg user-non-unique --force 
```

这实际上会用本地分支中的所有内容明显覆盖您的远程分支。远程流中的提交（并导致失败）将保留在那里，但将是悬空提交，最终将被 git-gc(1) 删除。没什么大不了的。

正如我所说，这是 AFAICS 最干净的解决方案。这样做的缺点是，您的 PR 将使用那些最新提交进行更新，这些提交将在以后获得，并且可能在 PR 的评论历史记录中显得不同步。没什么大问题，但它可能会令人困惑。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-04-13T20:09:01.070

您还可以创建一个绑定到`master`而不是特定`abc1234`修订版的新拉取请求。

这样，任何新的提交/推送到您的存储库都将添加到拉取请求中。**

# java - 如何检查数据库中是否存在 Oracle 视图？在执行查询之前

> ID：10147448
> 
> 赞同：6
> 
> 时间：2012-04-13T19:53:28.770
> 
> 标签：java, database, oracle

在执行查询之前，我需要知道一种从 Java 桌面应用程序中检查的方法，如果 Oracle 的视图存在于当前数据库中，否则我会遇到很多麻烦......

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T20:02:17.877

您可以随时查询 Oracle 数据字典。就像是

```
SELECT COUNT(*)
  FROM all_views
 WHERE view_name = <<the name of the view>>
   AND owner     = <<the owner of the view>> 
```

将告诉您是否有权访问具有指定名称的指定用户拥有的视图。

或者，您可以使用更加以 Java 为中心的方法。您可以从您的和调用创建一个[`DatabaseMetaData`](http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html)对象，以获取您有权访问的所有表和视图的列表。您可以传递特定的表或视图名称（或模式）来限制结果。`Connection``getTables``getTables`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-13T19:56:32.480

```
SELECT count(*)
FROM user_views
WHERE view_name = 'MY_VIEW' 
```

手册中的更多详细信息：

[http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_5499.htm#i1635848](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_5499.htm#i1635848)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-14T06:57:29.570

如果您不仅想查看视图是否存在以及是否为当前用户启用了视图，而且如果查看 VALID 或 INVALID，您可以使用 select from all_objects table

```
SELECT count(*)
FROM all_objects t
WHERE 
t.object_type = 'VIEW' 
and t.object_name = 'VIEW_NAME'
and t.status = 'VALID' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-16T13:06:13.350

感谢大家，终于找到了解决这个问题的方法，感谢大家的建议，代码如下：

```
 public boolean existViewInDB(String viewName) {
    logger.debug("[boolean existViewInDB(String viewName[" + viewName
        + "])]");
    boolean existView = false;
    try {
        String sql =
            "SELECT count(*) FROM user_views WHERE view_name = :viewName";
        SQLQuery query = getSession().createSQLQuery(sql);
        query.setString("viewName", viewName);
        BigDecimal totalOfViews = (BigDecimal) query.uniqueResult();
        existView = (totalOfViews.longValue() > 0);
    } catch (Exception e) {
        logger.error(e, e);
    }
    logger.debug("Exist View [" + viewName + "] ? -> " + existView);
    return existView;
} 
```

这行得通！:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T19:58:41.323

如果是一次性检查，我会说没问题，但如果您反复对该视图执行查询，我会说一次又一次检查是个坏主意。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-13T20:01:00.857

您可以将 user_views 用于您拥有的所有视图，或者将 ALL_VIEWS 用于您有权访问的所有视图。我会使用 all_views

```
SELECT COUNT(*)
FROM ALL_VIEWS
WHERE VIEW_NAME = '[YOUR VIEW NAME'] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-16T06:17:46.507

随便查询一下。如果它不存在，或者您的会话没有必要的权限，Oracle 将引发一个合适的异常。

# php - SQL 仅在其中一个值 <= 4 时执行

> ID：10147449
> 
> 赞同：0
> 
> 时间：2012-04-13T19:53:32.193
> 
> 标签：php, mysql, sql, prepared-statement

我正在尝试将订单输入 MySQL 数据库。它在订单表中为每个订单添加一条记录，然后遍历购物篮中的所有商品。然后它选择每个项目的信息，更改该项目的承诺库存，然后将信息添加到ordered_products 表。这就是问题所在。通过 PHP 执行 SQL 时，它不会添加到 ordered_products 表中，除非 product_id 小于或等于 4。如果我从 phpMyAdmin 执行 SQL，情况并非如此。下面是PHP。

```
$error = false;
for ($i = 0; $i < count($basket); $i++) {
        $productid = $basket[$i]['id'];
        $quantity = $basket[$i]['quantity'];
        $postage = $basket[$i]['postage'];
        $stmt->prepare("SELECT bodywork, wheels, seat, mechanical, batteries, `range`, `keys`, charger, serial_number FROM products WHERE product_id = ?");
        $stmt->bind_param('i', $productid);
        $stmt->execute();
        $stmt->bind_result($bodywork, $wheels, $seat, $mechanical, $batteries, $range, $keys, $charger, $serialnumber);
        $stmt->fetch();
        echo 'Product id = ' . $productid . '<br />';
        $stmt->prepare("INSERT INTO ordered_products (order_id, product_id, quantity, postage, bodywork, wheels, seat, mechanical, batteries, `range`, `keys`, charger, serial_number) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)");
        $stmt->bind_param('iiiisssssiiis', $orderid, $productid, $quantity, $postage, $bodywork, $wheels, $seat, $mechanical, $batteries, $range, $keys, $charger, $serialnumber);
        $stmt->execute();
        $stmt->prepare("UPDATE products SET committed_stock = committed_stock + ? WHERE product_id = ?");
        $stmt->bind_param('ii', $quantity, $productid);
        $stmt->execute();
    if ($stmt->error) {
        echo 'An error occured, please try again. error = ' . $stmt->error;
        $error = true;
    } 
}
$stmt->close();
$db->close();
if (!$error) {
    //unset($_SESSION['basket']);
    echo 'Your order has been completed, thank you!';
} 
```

我希望我在这里提供了足够的信息。因为我可以直接输入超过 4 的值，所以我排除了数据库配置错误（我希望这是正确的！）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:14:56.897

:) 如 i<= basket 时的 for 循环中所述。从那里结果，篮子有 4 个元素 :) 这就是为什么你的 sql 在 <=4 时执行。我认为您的数据库插入限制是因为您的 for 循环。抱歉，如果我理解错了您的问题，但我在前 3 行中迷路了 :)。

PS 如果您对 phpmyadmin 没有任何限制，并且您的动态插入/更新（php 脚本）有限制，那么这显然与您的脚本逻辑有关。我认为这与任何 db 约束无关。检查您的 php 代码约束:)

PPS 检查您的购物篮数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T17:01:48.663

这里的实际问题是键和充电器字段不接受空值，所以我将默认值设置为 0。我很惊讶它没有给我这个错误。我想我需要提高发现此类错误的技能。

# c# - 应用程序的健康监测

> ID：10147450
> 
> 赞同：2
> 
> 时间：2012-04-13T19:53:37.150
> 
> 标签：c#, .net, wcf, monitoring, wcf-data-services

我们的应用程序是一个平台，它包含基于 WinForms 的胖客户端 UI、窗口服务、WCF 服务和 Web 服务。我们想开发一个集中的门户，我们可以在其中验证各种感兴趣的组件的状态；例如，所有服务是否都已启动，服务是否正在消耗大量内存。我们想知道任何服务是否有问题，例如它正在下降，主动结束异常。

你能推荐你们在.net中使用过的任何工具、方法、功能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:15:25.040

您可以将您的应用程序与 Microsoft System Center Operation manager (SCOM - [http://www.microsoft.com/en-us/server-cloud/system-center/operations-manager.aspx](http://www.microsoft.com/en-us/server-cloud/system-center/operations-manager.aspx) ) 集成。可能这个解决方案太重了，但无论如何你应该考虑到它。

# json - Grails文件上传json响应

> ID：10147453
> 
> 赞同：0
> 
> 时间：2012-04-13T19:54:09.283
> 
> 标签：json, grails, file-upload

我正在尝试在 grails 中上传文件，然后处理从上传返回的 json 响应，但我没有取得多大成功。我的观点如下：

```
<script type="text/javascript">
  function addData(e) {
  alert('adding data');
  }
</script>

<g:form name="upload-form" url="[controller: 'dataset', action:'handleUpload']"
enctype="multipart/form-data" target="hidden-upload-frame">
  File: <input type="file" name="myFile" />
  <button type="submit">Upload</button>
</g:form>
<iframe id="hidden-upload-frame" name="hidden-upload-frame" style="display: none"   onload="addData"></iframe> 
```

在我的控制器中，我有

```
def handleUpload() {
  def file = request.getFile('myFile')
  def result
  // do some fileprocessing to create the result
  render results as JSON 
```

}

但是当我提交表单时，浏览器只会提示我下载 JSON 响应。我也尝试过使用 formRemote，但 request.getFile 似乎对 formRemote 无效。

我需要做什么才能`addData`使用 json 响应调用该方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T02:20:33.043

在写入 iframe 时，对于某些浏览器来说，似乎需要将其写入为文本或 html，而不是 json。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-13T21:22:10.940

如果您想在您的 handleUpload 操作中返回 JSON，您的返回（最后一行）必须是：

```
 render result as JSON 
```

您还需要以下导入：

```
 import grails.converters.JSON 
```

# python - 如何使用 Python 以 Gmail 作为提供商发送电子邮件？

> ID：10147455
> 
> 赞同：313
> 
> 时间：2012-04-13T19:54:18.263
> 
> 标签：python, email, smtp, gmail, smtp-auth

我正在尝试使用 python 发送电子邮件（Gmail），但出现以下错误。

```
Traceback (most recent call last):  
File "emailSend.py", line 14, in <module>  
server.login(username,password)  
File "/usr/lib/python2.5/smtplib.py", line 554, in login  
raise SMTPException("SMTP AUTH extension not supported by server.")  
smtplib.SMTPException: SMTP AUTH extension not supported by server. 
```

Python 脚本如下。

```
import smtplib
fromaddr = 'user_me@gmail.com'
toaddrs  = 'user_you@gmail.com'
msg = 'Why,Oh why!'
username = 'user_me@gmail.com'
password = 'pwd'
server = smtplib.SMTP('smtp.gmail.com:587')
server.starttls()
server.login(username,password)
server.sendmail(fromaddr, toaddrs, msg)
server.quit() 
```

* * *

## 回答 #1

> 赞同：316
> 
> 时间：2012-09-14T12:19:26.740

```
def send_email(user, pwd, recipient, subject, body):
    import smtplib

    FROM = user
    TO = recipient if isinstance(recipient, list) else [recipient]
    SUBJECT = subject
    TEXT = body

    # Prepare actual message
    message = """From: %s\nTo: %s\nSubject: %s\n\n%s
    """ % (FROM, ", ".join(TO), SUBJECT, TEXT)
    try:
        server = smtplib.SMTP("smtp.gmail.com", 587)
        server.ehlo()
        server.starttls()
        server.login(user, pwd)
        server.sendmail(FROM, TO, message)
        server.close()
        print 'successfully sent the mail'
    except:
        print "failed to send mail" 
```

如果要使用端口 465，则必须创建一个`SMTP_SSL`对象：

```
# SMTP_SSL Example
server_ssl = smtplib.SMTP_SSL("smtp.gmail.com", 465)
server_ssl.ehlo() # optional, called by login()
server_ssl.login(gmail_user, gmail_pwd)  
# ssl server doesn't support or need tls, so don't call server_ssl.starttls() 
server_ssl.sendmail(FROM, TO, message)
#server_ssl.quit()
server_ssl.close()
print 'successfully sent the mail' 
```

* * *

## 回答 #2

> 赞同：224
> 
> 时间：2012-04-13T19:57:54.350

`EHLO`在直接运行之前你需要说`STARTTLS`：

```
server = smtplib.SMTP('smtp.gmail.com:587')
server.ehlo()
server.starttls() 
```

* * *

此外，您应该真正创建`From:`,`To:`和`Subject:`消息头，用空行与消息正文分隔并`CRLF`用作 EOL 标记。

例如

```
msg = "\r\n".join([
  "From: user_me@gmail.com",
  "To: user_you@gmail.com",
  "Subject: Just a message",
  "",
  "Why, oh why"
  ]) 
```

**笔记：**

为了使其正常工作，您需要在您的 gmail 帐户配置中启用“允许安全性较低的应用程序”选项。否则，当 gmail 检测到非 Google 应用程序正在尝试登录您的帐户时，您将收到“严重安全警报”。

* * *

## 回答 #3

> 赞同：146
> 
> 时间：2014-12-16T23:27:25.317

我遇到了类似的问题并偶然发现了这个问题。我收到 SMTP 身份验证错误，但我的用户名/密码正确。这是修复它的方法。我读到这个：

[https://support.google.com/accounts/answer/6010255](https://support.google.com/accounts/answer/6010255)

简而言之，谷歌不允许你通过 smtplib 登录，因为它已将这种登录标记为“不太安全”，所以你要做的就是在你登录到你的谷歌帐户时转到这个链接，并允许访问：

[https://www.google.com/settings/security/lesssecureapps](https://www.google.com/settings/security/lesssecureapps)

一旦设置好（参见下面的屏幕截图），它应该可以工作。

![在此处输入图像描述](../Images/92d10a9678b91d56f156f5fa08e99faf.png)

登录现在有效：

```
smtpserver = smtplib.SMTP("smtp.gmail.com", 587)
smtpserver.ehlo()
smtpserver.starttls()
smtpserver.ehlo()
smtpserver.login('me@gmail.com', 'me_pass') 
```

更改后的响应：

```
(235, '2.7.0 Accepted') 
```

之前的回应：

```
smtplib.SMTPAuthenticationError: (535, '5.7.8 Username and Password not accepted. Learn more at\n5.7.8 http://support.google.com/mail/bin/answer.py?answer=14257 g66sm2224117qgf.37 - gsmtp') 
```

**还是行不通？**如果您仍然收到 SMTPAuthenticationError 但现在代码是 534，那是因为位置未知。按照这个链接：

[https://accounts.google.com/DisplayUnlockCaptcha](https://accounts.google.com/DisplayUnlockCaptcha)

单击继续，这应该会给您 10 分钟的时间来注册您的新应用程序。因此，现在继续进行另一次登录尝试，它应该可以工作。

**更新**：这似乎无法立即工作，您可能会在 smptlib 中遇到此错误一段时间：

```
235 == 'Authentication successful'
503 == 'Error: already authenticated' 
```

消息说使用浏览器登录：

```
SMTPAuthenticationError: (534, '5.7.9 Please log in with your web browser and then try again. Learn more at\n5.7.9 https://support.google.com/mail/bin/answer.py?answer=78754 qo11sm4014232igb.17 - gsmtp') 
```

启用“lesssecureapps”后，去喝杯咖啡，回来，然后再次尝试“DisplayUnlockCaptcha”链接。根据用户体验，更改可能需要一个小时才能生效。然后再次尝试登录过程。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2018-08-03T01:26:14.437

# 这个作品

## [创建Gmail APP密码！](https://support.google.com/accounts/answer/185833?hl=en)

创建之后，然后创建一个名为`sendgmail.py`

[然后添加此代码](https://github.com/JayRizzo/Random_Scripts/blob/master/sendgmail.py)：

```
#!/usr/bin/env python3
# -*- coding: utf-8 -*-
# =============================================================================
# Created By  : Jeromie Kirchoff
# Created Date: Mon Aug 02 17:46:00 PDT 2018
# =============================================================================
# Imports
# =============================================================================
import smtplib

# =============================================================================
# SET EMAIL LOGIN REQUIREMENTS
# =============================================================================
gmail_user = 'THEFROM@gmail.com'
gmail_app_password = 'YOUR-GOOGLE-APPLICATION-PASSWORD!!!!'

# =============================================================================
# SET THE INFO ABOUT THE SAID EMAIL
# =============================================================================
sent_from = gmail_user
sent_to = ['THE-TO@gmail.com', 'THE-TO@gmail.com']
sent_subject = "Where are all my Robot Women at?"
sent_body = ("Hey, what's up? friend!\n\n"
             "I hope you have been well!\n"
             "\n"
             "Cheers,\n"
             "Jay\n")

email_text = """\
From: %s
To: %s
Subject: %s

%s
""" % (sent_from, ", ".join(sent_to), sent_subject, sent_body)

# =============================================================================
# SEND EMAIL OR DIE TRYING!!!
# Details: http://www.samlogic.net/articles/smtp-commands-reference.htm
# =============================================================================

try:
    server = smtplib.SMTP_SSL('smtp.gmail.com', 465)
    server.ehlo()
    server.login(gmail_user, gmail_app_password)
    server.sendmail(sent_from, sent_to, email_text)
    server.close()

    print('Email sent!')
except Exception as exception:
    print("Error: %s!\n\n" % exception) 
```

所以，如果你成功了，会看到这样的图像：

我通过向自己发送电子邮件进行了测试。

[![成功发送电子邮件。](../Images/d4da0bb6416c23b5122003a27673fd76.png)](https://i.stack.imgur.com/SSrZB.png)

> 注意：我的帐户启用了**两步验证。**应用密码适用于此！（对于 gmail smtp 设置，您必须访问[https://support.google.com/accounts/answer/185833?hl=en](https://support.google.com/accounts/answer/185833?hl=en)并按照以下步骤操作）
> 
> 此设置不适用于启用两步验证的帐户。此类帐户需要特定于应用程序的密码才能访问不太安全的应用程序。

[![应用访问安全性较低... 此设置不适用于启用两步验证的帐户。](../Images/f676a096ab52dde1d0706c5769ad0a39.png)](https://i.stack.imgur.com/1yPnO.png)

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2014-06-23T11:16:51.607

## 你对 OOP 失望了吗？

```
#!/usr/bin/env python

import smtplib

class Gmail(object):
    def __init__(self, email, password):
        self.email = email
        self.password = password
        self.server = 'smtp.gmail.com'
        self.port = 587
        session = smtplib.SMTP(self.server, self.port)        
        session.ehlo()
        session.starttls()
        session.ehlo
        session.login(self.email, self.password)
        self.session = session

    def send_message(self, subject, body):
        ''' This must be removed '''
        headers = [
            "From: " + self.email,
            "Subject: " + subject,
            "To: " + self.email,
            "MIME-Version: 1.0",
           "Content-Type: text/html"]
        headers = "\r\n".join(headers)
        self.session.sendmail(
            self.email,
            self.email,
            headers + "\r\n\r\n" + body)

gm = Gmail('Your Email', 'Password')

gm.send_message('Subject', 'Message') 
```

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2019-09-18T17:42:58.833

这是一个 Gmail API 示例。虽然更复杂，但这是我发现的唯一在 2019 年有效的方法。此示例取自并修改自：

[https://developers.google.com/gmail/api/guides/sending](https://developers.google.com/gmail/api/guides/sending)

您需要通过他们的网站使用 Google 的 API 接口创建一个项目。接下来，您需要为您的应用启用 GMAIL API。创建凭据，然后下载这些凭据，将其保存为 credentials.json。

```
import pickle
import os.path
from googleapiclient.discovery import build
from google_auth_oauthlib.flow import InstalledAppFlow
from google.auth.transport.requests import Request

from email.mime.text import MIMEText
import base64

#pip install --upgrade google-api-python-client google-auth-httplib2 google-auth-oauthlib

# If modifying these scopes, delete the file token.pickle.
SCOPES = ['https://www.googleapis.com/auth/gmail.readonly', 'https://www.googleapis.com/auth/gmail.send']

def create_message(sender, to, subject, msg):
    message = MIMEText(msg)
    message['to'] = to
    message['from'] = sender
    message['subject'] = subject

    # Base 64 encode
    b64_bytes = base64.urlsafe_b64encode(message.as_bytes())
    b64_string = b64_bytes.decode()
    return {'raw': b64_string}
    #return {'raw': base64.urlsafe_b64encode(message.as_string())}

def send_message(service, user_id, message):
    #try:
    message = (service.users().messages().send(userId=user_id, body=message).execute())
    print( 'Message Id: %s' % message['id'] )
    return message
    #except errors.HttpError, error:print( 'An error occurred: %s' % error )

def main():
    """Shows basic usage of the Gmail API.
    Lists the user's Gmail labels.
    """
    creds = None
    # The file token.pickle stores the user's access and refresh tokens, and is
    # created automatically when the authorization flow completes for the first
    # time.
    if os.path.exists('token.pickle'):
        with open('token.pickle', 'rb') as token:
            creds = pickle.load(token)
    # If there are no (valid) credentials available, let the user log in.
    if not creds or not creds.valid:
        if creds and creds.expired and creds.refresh_token:
            creds.refresh(Request())
        else:
            flow = InstalledAppFlow.from_client_secrets_file(
                'credentials.json', SCOPES)
            creds = flow.run_local_server(port=0)
        # Save the credentials for the next run
        with open('token.pickle', 'wb') as token:
            pickle.dump(creds, token)

    service = build('gmail', 'v1', credentials=creds)

    # Example read operation
    results = service.users().labels().list(userId='me').execute()
    labels = results.get('labels', [])

    if not labels:
        print('No labels found.')
    else:
        print('Labels:')
    for label in labels:
        print(label['name'])

    # Example write
    msg = create_message("from@gmail.com", "to@gmail.com", "Subject", "Msg")
    send_message( service, 'me', msg)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #7

> 赞同：15
> 
> 时间：2012-04-13T20:28:42.010

你可以在这里找到它：http: [//jayrambhia.com/blog/send-emails-using-python](http://jayrambhia.com/blog/send-emails-using-python)

```
smtp_host = 'smtp.gmail.com'
smtp_port = 587
server = smtplib.SMTP()
server.connect(smtp_host,smtp_port)
server.ehlo()
server.starttls()
server.login(user,passw)
fromaddr = raw_input('Send mail by the name of: ')
tolist = raw_input('To: ').split()
sub = raw_input('Subject: ')

msg = email.MIMEMultipart.MIMEMultipart()
msg['From'] = fromaddr
msg['To'] = email.Utils.COMMASPACE.join(tolist)
msg['Subject'] = sub  
msg.attach(MIMEText(raw_input('Body: ')))
msg.attach(MIMEText('\nsent via python', 'plain'))
server.sendmail(user,tolist,msg.as_string()) 
```

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2015-04-18T16:58:21.917

不直接相关但仍然值得指出的是，我的包试图使发送 gmail 消息变得非常快速和轻松。它还尝试维护错误列表并尝试立即指出解决方案。

从字面上看，它只需要这段代码就可以完全按照您的编写：

```
import yagmail
yag = yagmail.SMTP('user_me@gmail.com')
yag.send('user_you@gmail.com', 'Why,Oh why!') 
```

或者一个班轮：

```
yagmail.SMTP('user_me@gmail.com').send('user_you@gmail.com', 'Why,Oh why!') 
```

对于包/安装，请查看[git](https://github.com/kootenpv/yagmail)或[pip](https://pypi.python.org/pypi/yagmail/)，可用于 Python 2 和 3。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2020-02-27T16:06:27.040

在您的 gmail 帐户上启用[不太安全的应用程序并使用 (Python>=3.6)：](https://myaccount.google.com/lesssecureapps?pli=1)

```
import smtplib
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText

gmailUser = 'XXXXX@gmail.com'
gmailPassword = 'XXXXX'
recipient = 'XXXXX@gmail.com'

message = f"""
Type your message here...
"""

msg = MIMEMultipart()
msg['From'] = f'"Your Name" <{gmailUser}>'
msg['To'] = recipient
msg['Subject'] = "Subject here..."
msg.attach(MIMEText(message))

try:
    mailServer = smtplib.SMTP('smtp.gmail.com', 587)
    mailServer.ehlo()
    mailServer.starttls()
    mailServer.ehlo()
    mailServer.login(gmailUser, gmailPassword)
    mailServer.sendmail(gmailUser, recipient, msg.as_string())
    mailServer.close()
    print ('Email sent!')
except:
    print ('Something went wrong...') 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-10-31T04:12:18.443

现在有一个 gmail API，它可以让你通过 REST 发送电子邮件、阅读电子邮件和创建草稿。与 SMTP 调用不同，它是非阻塞的，这对于在请求线程中发送电子邮件的基于线程的网络服务器（如 python 网络服务器）来说是一件好事。API 也很强大。

*   当然，电子邮件应该交给非网络服务器队列，但有选项也不错。

如果您在域上拥有 Google Apps 管理员权限，则设置起来最简单，因为这样您就可以向您的客户授予一揽子权限。否则，您必须摆弄 OAuth 身份验证和权限。

这是一个证明它的要点：

[https://gist.github.com/timrichardson/1154e29174926e462b7a](https://gist.github.com/timrichardson/1154e29174926e462b7a)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-08-01T22:56:11.687

@David 的回答很好，这里是针对没有通用 try-except 的 Python 3：

```
def send_email(user, password, recipient, subject, body):

    gmail_user = user
    gmail_pwd = password
    FROM = user
    TO = recipient if type(recipient) is list else [recipient]
    SUBJECT = subject
    TEXT = body

    # Prepare actual message
    message = """From: %s\nTo: %s\nSubject: %s\n\n%s
    """ % (FROM, ", ".join(TO), SUBJECT, TEXT)

    server = smtplib.SMTP("smtp.gmail.com", 587)
    server.ehlo()
    server.starttls()
    server.login(gmail_user, gmail_pwd)
    server.sendmail(FROM, TO, message)
    server.close() 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2022-01-03T19:56:58.937

意识到通过 Python 发送电子邮件有多么痛苦，因此我为它制作了一个广泛的库。它还预先配置了 Gmail（因此您不必记住 Gmail 的主机和端口）：

```
from redmail import gmail
gmail.user_name = "you@gmail.com"
gmail.password = "<YOUR APPLICATION PASSWORD>"

# Send an email
gmail.send(
    subject="An example email",
    receivers=["recipient@example.com"],
    text="Hi, this is text body.",
    html="<h1>Hi, this is HTML body.</h1>"
) 
```

当然你需要配置你的Gmail账户（不用担心，很简单）：

1.  [设置两步验证](https://support.google.com/accounts/answer/185839?hl=en&co=GENIE.Platform%3DAndroid)（如果尚未设置）
2.  [创建应用程序密码](https://support.google.com/accounts/answer/185833?hl=en)
3.  将应用程序密码放入`gmail`对象并完成！

Red Mail 实际上相当广泛（包括附件、嵌入图像、使用 cc 和 bcc 发送、使用 Jinja 的模板等），并且希望能够满足您对电子邮件发件人的所有需求。它也经过了很好的测试和记录。希望对你有帮助。

安装：

```
pip install redmail 
```

文档：[https ://red-mail.readthedocs.io/en/latest/](https://red-mail.readthedocs.io/en/latest/)

源代码：[https ://github.com/Miksus/red-mail](https://github.com/Miksus/red-mail)

请注意，Gmail 不允许更改发件人。发件人地址始终是您。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-04-13T20:04:01.930

似乎是旧的问题`smtplib`。在`python2.7`一切工作正常。

**更新**：是的，`server.ehlo()`也可以提供帮助。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2022-02-06T15:30:43.487

## 2022 年 2 月更新：

尝试**2 件事**以使用**Python发送****Gmail**。

 **1.  允许安全性较低的应用：**开启**↓↓↓</p>

    [https://myaccount.google.com/lesssecureapps](https://myaccount.google.com/lesssecureapps)

2.  允许访问您的 Google 帐户：**开**（点按“继续”）↓↓↓</p>

    [https://accounts.google.com/DisplayUnlockCaptcha](https://accounts.google.com/DisplayUnlockCaptcha)

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2016-06-14T18:52:39.793

```
 import smtplib

    fromadd='from@gmail.com'
    toadd='send@gmail.com'

    msg='''hi,how r u'''
    username='abc@gmail.com'
    passwd='password'

    try:
        server = smtplib.SMTP('smtp.gmail.com:587')
        server.ehlo()
        server.starttls()
        server.login(username,passwd)

        server.sendmail(fromadd,toadd,msg)
        print("Mail Send Successfully")
        server.quit()

   except:
        print("Error:unable to send mail")

   NOTE:https://www.google.com/settings/security/lesssecureapps that                                                         should be enabled 
```

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2015-12-04T14:01:16.787

```
import smtplib
server = smtplib.SMTP('smtp.gmail.com', 587)
server.ehlo()
server.starttls()
server.login("fromaddress", "password")
msg = "HI!"
server.sendmail("fromaddress", "receiveraddress", msg)
server.quit() 
```**

# android - Android中的Phonegap captureAudio - 录音格式

> ID：10147457
> 
> 赞同：1
> 
> 时间：2012-04-13T19:54:30.597
> 
> 标签：android, cordova

当我使用 PhoneGap 的 captureAudio API 时，录音以 .3ga 文件的形式存储在 Android 手机上。我可以将此录音存储为 AMR 格式吗？我正在尝试将此录音传递到语音识别 http api 中，并且该 api 需要 AMR 格式。

从[PhoneGap 的文档](http://docs.phonegap.com/en/1.6.0/cordova_media_capture_capture.md.html#capture.captureAudio)中，Android 的录音是使用 AMR 格式编码的，但我看到文件创建为 .3ga 文件。关于如何以 AMR 格式记录的任何建议

# iphone - 为 ZBarReaderViewController 添加一个 uibarbutton

> ID：10147458
> 
> 赞同：2
> 
> 时间：2012-04-13T19:54:39.470
> 
> 标签：iphone

我正在研究 ZBarReader，到目前为止我所拥有的是

```
ZBarReaderViewController *controller = [[ZBarReaderViewController alloc] init];
controller.navigationController.navigationBarHidden = NO;
// Add Edit button to the right and handle click event UIBarButtonItem *manualButton = [[UIBarButtonItem alloc] initWithTitle:@"Manual" style:UIBarButtonItemStyleBordered target:self action:@selector(EditMode:)];
[controller.navigationItem setRightBarButtonItem:manualButton];
controller.readerDelegate = self;
[self presentModalViewController:controller animated:YES]; 
```

我的问题是我们可以在上面做这样的事情：设置工具栏可见并在其上为 ZBarReaderViewController 添加按钮。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T20:16:35.967

是的，您首先为您的 ZBarReaderViewController 设置了一些属性

```
 self.zReader.showsCameraControls = NO;
 self.zReader.showsZBarControls=NO; 
```

然后你必须设置你的 custom `cameraOverlayView`，例如这个`UIToolBar`用左键设置一个来关闭选择器和一个`UISwitch`来控制 flashMode：

```
 self.zReader.cameraOverlayView=[self setOverlayPickerView];

- (UIView *)setOverlayPickerView{
    UIView *v=[[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
    [v setBackgroundColor:[UIColor clearColor]];
    UIToolbar *myToolBar = [[UIToolbar alloc] init];
    UIBarButtonItem *backButton=[[UIBarButtonItem alloc] initWithTitle:@"back" style:UIBarButtonItemStyleBordered target:self action:@selector(dismissOverlayView:)];
    UISwitch *sw=[[UISwitch alloc] init];
    [sw setOn:NO];
    UIBarButtonItem *switchButton=[[UIBarButtonItem alloc] initWithCustomView:sw];
    UIBarButtonItem *fixed=[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:nil action:nil];  
    [sw addTarget:self action:@selector(handleSwitchFlash:) forControlEvents:UIControlEventValueChanged];
    [myToolBar setItems:[NSArray arrayWithObjects:backButton,fixed,switchButton,nil]];
    [myToolBar setBarStyle:UIBarStyleDefault];
    CGRect toolBarFrame;
    toolBarFrame = CGRectMake(0, 436, 320, 44);
    [myToolBar setFrame:toolBarFrame];
    [v addSubview:myToolBar];
    return  v;
}

- (void)dismissOverlayView:(id)sender{ 
    [self dismissModalViewControllerAnimated: YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T01:06:28.743

除了@Mat 答案，应该在 `[self.zReader.view setFrame:[UIScreen mainScreen].bounds];` 之前 添加`self.zReader.cameraOverlayView=[self setOverlayPickerView];`

因为，默认情况下，self.zReader 的大小是 (320, 480)。

顺便说一句，如果不需要兼容iOS6.0，你可以使用[AVCaptureDevice]：[https ://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVCaptureDevice_Class/Reference/Reference.html](https://developer.apple.com/library/mac/documentation/AVFoundation/Reference/AVCaptureDevice_Class/Reference/Reference.html)

# qt4 - 连接来自 QTableWidget 的 CommanLinkBut tons 的各种信号

> ID：10147460
> 
> 赞同：0
> 
> 时间：2012-04-13T19:54:50.447
> 
> 标签：qt4, qtablewidget

我已经将一些带有循环的 CommandLinkBut​​tons 放入 QTableWidget：

```
QCommandLinkButton *MysticalButton = new QCommandLinkButton;

QueryReturn = ModHandling->ModuleXML("attribute",ModuleList.at(iMod),"Settings","Icon");
QIcon Icon(QueryReturn);
QSize IconSize;
IconSize.scale(48, 48, Qt::KeepAspectRatio);
MysticalButton->setIconSize(IconSize);
MysticalButton->setIcon(Icon);

QueryReturn = ModHandling->ModuleXML("search", ModuleList.at(iMod), "Title");
MysticalButton->setText(QueryReturn);

QueryReturn = ModHandling->ModuleXML("search", ModuleList.at(iMod), "Description");
MysticalButton->setStatusTip(QueryReturn);

// I use the Tooltip to get the Command of this Button:
QueryReturn = ModHandling->ModuleXML("search", ModuleList.at(iMod), "Exec");
MysticalButton->setToolTip(QueryReturn);

ui->tableWidget_Main->setCellWidget(iRow, iCol, MysticalButton); 
```

如何将信号连接到将从按钮执行命令的插槽？顺便说一句，命令设置为工具提示。

如果您知道将命令设置为按钮的更好方法，请告诉我（=

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-20T13:11:17.570

看看[QSignalMapper](http://qt-project.org/doc/qt-4.8/qsignalmapper.html)，或者只是`qobject_cast<QCommandLinkButton *>(sender())`在你点击的插槽中使用

```
QSignalMapper * signalMapper = new QSignalMapper(this);

QCommandLinkButton *MysticalButton = new QCommandLinkButton;

QueryReturn = ModHandling->ModuleXML("attribute",ModuleList.at(iMod),"Settings","Icon");
QIcon Icon(QueryReturn);
QSize IconSize;
IconSize.scale(48, 48, Qt::KeepAspectRatio);
MysticalButton->setIconSize(IconSize);
MysticalButton->setIcon(Icon);

QueryReturn = ModHandling->ModuleXML("search", ModuleList.at(iMod), "Title");
MysticalButton->setText(QueryReturn);

QueryReturn = ModHandling->ModuleXML("search", ModuleList.at(iMod), "Description");
MysticalButton->setStatusTip(QueryReturn);

// I use the Tooltip to get the Command of this Button:
QueryReturn = ModHandling->ModuleXML("search", ModuleList.at(iMod), "Exec");
MysticalButton->setToolTip(QueryReturn);

ui->tableWidget_Main->setCellWidget(iRow, iCol, MysticalButton);

connect(MysticalButton, SIGNAL(clicked()), signalMapper, SLOT(map()));
signalMapper->setMapping(MysticalButton, QueryReturn);

connect(signalMapper, SIGNAL(mapped(const QString &)),
         this, SIGNAL(executeCommand(const QString &))); 
```

# php - 为 zend_form_element 设置默认值（使用视图语法时）

> ID：10147467
> 
> 赞同：0
> 
> 时间：2012-04-13T19:55:03.513
> 
> 标签：php, zend-framework, zend-form, zend-form-element, zend-view

我知道我可以使用`new Zend_Form_Element_MultiCheckbox()`. 但是，我没有使用这种语法。我在视图中使用表单视图帮助器语法，如下所示：

```
echo $this->formMultiCheckbox('boxes', null, null, $possible_vals_array, null); 
```

我的问题是如何使用这种语法为需要默认检查的值添加一个数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:07:08.260

的第二个参数`$this->formMultiCheckbox()`应该是要检查的值数组。

所以如果你`$possible_vals_array`看起来像这样：

```
$possible_vals_array = array(
    'Value A' => 'Label A',
    'Value B' => 'Label B',
    'Value C' => 'Label C',
); 
```

...并假设您希望默认检查值 A 和 C，您将传递一个像这样的数组作为第二个参数：

```
$checked_vals_array = array('Value A', 'Value C'); 
```

因此，您对助手的调用将如下所示：

```
echo $this->formMultiCheckbox(
    'boxes', $checked_vals_array, null, $possible_vals_array, null
); 
```

# backup - How to automate restoration of Cpanel backup to another server

> ID：10147472
> 
> 赞同：0
> 
> 时间：2012-04-13T19:55:42.930
> 
> 标签：backup, cpanel, mirroring, whm

Cpanel has a built-in feature that allows automatic backup of accounts. Is there a way to automate restoration of it to another geographically separated server?

For example:

1.  You setup daily backups from Server A.
2.  You restore those daily backups to Server B as they come, overwriting previous restores.

Basically it's like having a standby server except the backup server's data is one day late.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T14:03:31.850

最好的解决方案不是备份/恢复覆盖。

最佳解决方案是故障转移解决方案。

结合 rsync (对于系统上的任何文件和文件 cpanel (usr(local7cpanel & /var/cpanel/) + MySQL on mode Master-Slave

在这种情况下，您在其他服务器上拥有系统的克隆副本....

美好的一天。

# git - git checkout 标签，git pull 在分支中失败

> ID：10147475
> 
> 赞同：138
> 
> 时间：2012-04-13T19:55:46.290
> 
> 标签：git, git-pull, git-checkout

我克隆了一个 git 存储库，然后签出了一个标签：

```
# git checkout 2.4.33 -b my_branch 
```

这没关系，但是当我尝试`git pull`在我的分支中运行时，git 会吐出这个错误：

> 当前分支没有跟踪信息。请指定要合并的分支。详见 git-pull(1)
> 
> ```
> git pull <remote> <branch> 
> ```
> 
> 如果您希望为此分支设置跟踪信息，您可以这样做：
> 
> ```
> git branch --set-upstream new origin/<branch> 
> ```

我只想`git pull`更新主分支，不理会我当前的分支（无论如何它是一个标签）。这样的事情可能吗？

我需要这个的原因是我有一个自动脚本，它总是 git 拉存储库，当然由于上面的错误而失败..

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2013-04-11T13:13:49.530

**编辑：**对于较新版本的 Git，`--set-upstream master`已弃用，您应该`--set-upstream-to`改用：

```
git branch --set-upstream-to=origin/master master 
```

* * *

按照提示，您可以运行：

```
git branch --set-upstream master origin/master 
```

之后，您可以简单地运行`git pull`以更新您的代码。

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2013-01-09T10:08:18.390

我有同样的问题并用这个命令修复它：

```
$ git push -u origin master 
```

从帮助文件中， -u 基本上设置了拉取的默认值：

```
-u, --set-upstream`

  For every branch that is up to date or successfully pushed, add 
  upstream (tracking) reference, used by argument-less git-pull(1) and
  other commands. For more information, see branch.<name>.merge in 
  git-config(1). 
```

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2013-03-27T09:14:39.107

试试这些命令：

```
git pull origin master
git push -u origin master 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-04-13T20:23:35.290

使用切换回主分支

```
$ git checkout master 
```

然后运行`git pull`操作

```
$ git pull origin/master 
```

之后，您可以再次切换回您的`my_branch`。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-13T15:58:47.043

[@alesko](https://stackoverflow.com/q/10147475/2098832)：不可能只`git pull`在结帐后才`my_branch`更新`master`分支。
因为`git pull`也会合并到**当前**分支 -> 在你的场景中`my_branch`

[@Simon](https://stackoverflow.com/a/14232729/2098832)：那也可以推动。这是为什么？

```
$ git branch -u origin/master
Branch master set up to track remote branch master from origin. 
```

并根据文档：

```
-u <upstream>
  Set up <branchname>'s tracking information so <upstream> is considered  
  <branchname>'s upstream branch. If no <branchname> is specified,  
  then it defaults to the current branch. 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-10-07T14:00:54.900

首先，确保您在正确的分支上。
然后（仅一次）：

```
git branch --track 
```

之后，这再次起作用：

```
git pull 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2014-11-12T04:30:07.887

您可能有多个分支。而且您当前的分支没有将其上游设置为远程。

解决此问题的步骤：

```
git checkout branch_name
git branch --set-upstream-to=origin/remote_branch_name local_branch_name 
```

例如

```
// this set upstream of local branch develop to remote branch  origin/develop,
git branch --set-upstream-to=origin/develop develop 
```

这样做之后，当你这样做时`git pull`，它会从指定的分支中拉取。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2017-11-23T11:19:31.253

您可以指定要提取的分支：

```
git pull origin master 
```

或者您可以设置它，以便您的本地主分支跟踪 github 主分支作为上游：

```
git branch --set-upstream-to=origin/master master
git pull 
```

当您克隆存储库（仅适用于默认分支）时，会自动为您设置此分支跟踪，但如果您将远程添加到现有存储库，则必须自己设置跟踪。值得庆幸的是，git 给出的建议让你很容易记住如何去做。

--set-upstream 显然在 git 1.9.x 中已被弃用。展望未来，你会想要使用类似的东西

```
git branch -u origin/master 
```

假设您已经签出了 master 。如果没有， `git branch -u origin/master master`将工作

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-02-18T16:33:15.077

如果您像我一样需要一直这样做，您可以通过将以下内容添加到文件中来设置别名以自动执行此`.gitconfig`操作：

```
[alias]
    set-upstream = !git branch --set-upstream-to=origin/`git symbolic-ref --short HEAD` 
```

当您看到消息`There is no tracking information...`时，只需运行`git set-upstream`，然后`git push`再次运行。

感谢[https://zarino.co.uk/post/git-set-upstream/](https://zarino.co.uk/post/git-set-upstream/)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-11-14T12:47:45.093

试试这个

```
git checkout master

git pull origin master 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-05-16T15:59:13.793

您需要为当前分支设置跟踪（上游）

```
git branch --set-upstream master origin/master 
```

已弃用，而不是您可以使用 --track 标志

```
git branch --track master origin/master 
```

我也喜欢@casey 注意到的文档参考：

```
-u <upstream>
  Set up <branchname>'s tracking information so <upstream> is considered  
  <branchname>'s upstream branch. If no <branchname> is specified,  
  then it defaults to the current branch. 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-09-19T13:48:53.887

对我有用的是： git branch --set-upstream-to=origin master 当我再次拉动时，我只得到了来自 master 的更新并且警告消失了。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-04-13T21:55:57.117

为了只下载更新：

```
git fetch origin master 
```

但是，这只是更新了一个名为`origin/master`. 更新本地的最佳方式`master`是在另一条评论中提到的结帐/合并。**如果**您可以保证您的本地`master`没有偏离主干`origin/master`，您*可以*使用`git update-ref`将您的当前映射`master`到新点，但这可能不是定期使用的最佳解决方案......

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-07-01T17:40:24.500

此命令已弃用：`git branch --set-upstream master origin/master`

因此，在尝试设置跟踪时，这是对我有用的命令：

```
git branch --set-upstream-to=origin/master master 
```

# javascript - Javascript onclick dropdown menu

> ID：10147476
> 
> 赞同：0
> 
> 时间：2012-04-13T19:55:57.650
> 
> 标签：javascript, jquery, navigation, drop-down-menu

I'm struggling with this javascript at the moment.

```
$(document).ready(function () {
        var visible = false;
        var body = false;

        $("body").mouseup(function () {
            if (visible) {
                $(this).parent().find("ul.subnav").slideUp('slow');
                visible = false;
                $(this).removeClass("clicked-background");
                body = true;
            }
        });

        $("ul.topnav li a").click(function () { //When trigger is clicked...
            var menu = $(this).parent().find('ul.subnav');

            if (!visible && !body) {
                $(this).parent().find("ul.subnav").slideDown('fast').show();
                visible = true;
                $(this).addClass("clicked-background");
            }
            // else if (visible) 
            //{
            //   $(this).parent().find("ul.subnav").slideUp('slow');
            //   visible = false;
            //   $(this).removeClass("clicked-background");
            // }

            body = false;
        });

    }); 
```

I wanted to add the feature, so if you clicked outside the menu/navigation the dropdown would hide. The current problem with this code is, that if you click the menu and then click outside the menu - you have to double click the menu again to get it showen. This is caused by the body variable is set too 'True' ofc.

I made the body variable trying to fix the problem if you clicked the menu - and then clicked the same link again. The menu would first open correctly, and then close and open again. Soo main problem is. My navigation open -> closes -> open

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T20:00:56.983

不要使用全局变量。通过检查检查实际元素是否可见

```
.is(':visible'); 
```

您可以在现有的各种选择器上使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:03:36.047

我很想使用“现在可见”菜单的 onmouseout 作为选择事件..

我不认为在 body 标签之外运行事件是一个好方法。

流量应该是..

```
click (menu button or link)
show menu
set onmouseout for button and menu on click
onmouseout, remove onmouseout events 
```

# php - $me = $facebook->api('/me'); 返回空字符串

> ID：10147484
> 
> 赞同：0
> 
> 时间：2012-04-13T19:56:23.540
> 
> 标签：php, facebook, facebook-graph-api

这段代码曾经按预期工作，但现在我似乎无法以同样的方式检索用户名：

```
 $uid = $facebook->getUser(); // returns the facebook id of the user
 $me = $facebook->api('/me'); // returns empty. why? 
```

由于一些 facebook api 更新，我不得不将 getSession 从：

```
$session = $facebook->getUser(); 
```

到

```
$session = $facebook->getUser()>0; 
```

那么如何在 facebook 中检索用户名呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T19:59:18.890

> 那么如何在 facebook 中检索用户名呢？

**那这个呢 ：**

```
$pageContent = file_get_contents('http://graph.facebook.com/USERID');
$parsedJson  = json_decode($pageContent);
echo $parsedJson->name; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T17:43:13.317

Facebook 使用 CURL 向服务器发送请求，可能服务器上的 curl 无法正常工作或 curl_exec 已禁用

# c# - How do you redirect to an anchor within a particular action

> ID：10147487
> 
> 赞同：2
> 
> 时间：2012-04-13T19:56:42.743
> 
> 标签：c#, asp.net, .net, asp.net-mvc

I tried using

```
return RedirectToAction("List#"+Name.Substring(0,1)); 
```

but I get a 404 error and the address bar suggest that I am looking for List%23A.

**EDIT** "List" is the action name, and I would like to redirect directly to the First Letter anchor.

How do I pass the number sign?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T06:53:03.880

您可以使用[GenerateUrl](http://msdn.microsoft.com/en-us/library/ee703653.aspx)静态方法：

```
public ActionResult Foo()
{
    string url = UrlHelper.GenerateUrl(
        null,                     // routeName
        "List",                   // actionName
        null,                     // controllerName
        null,                     // protocol
        null,                     // hostName
        "abc",                    // fragment <- that's what you are interested in
        null,                     // routeValues
        RouteTable.Routes,        // routeCollection
        Request.RequestContext,   // requestContext
        true                      // includeImplicitMvcValues
    );
    return Redirect(url);
} 
```

应该重定向到：

```
/currentController/List#abc 
```

# java - 如何更改鼠标上的图标？

> ID：10147488
> 
> 赞同：2
> 
> 时间：2012-04-13T19:56:49.323
> 
> 标签：java, swing, icons, mouse, mouseover

我有白色图标，当我遇到该图标时，我想制作不同的颜色。

这是我的白色图标：

```
hint.setIcon(newjavax.swing.ImageIcon(getClass().getResource ("white.png"))); 
```

当您将鼠标拖到图标上以更改颜色时，我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T20:06:20.467

我怀疑这个问题的答案是在一个未装饰的按钮中。将白色图像设置为图标，将黄色图像设置为[翻转图标](https://docs.oracle.com/javase/8/docs/api/javax/swing/AbstractButton.html#setRolloverIcon-javax.swing.Icon-)。像这样：

```
import java.awt.*;
import javax.swing.*;
import java.net.URL;
import javax.imageio.ImageIO;

class HoverImage {

    HoverImage(Image img1, Image img2) {
        JButton b = new JButton(new ImageIcon(img1));
        b.setRolloverIcon(new ImageIcon(img2));

        b.setBorderPainted(false);
        b.setContentAreaFilled(false);

        JOptionPane.showMessageDialog(null, b);
    }

    public static void main(String[] args) throws Exception {
        URL url1 = new URL("https://i.stack.imgur.com/XZ4V5.jpg");
        URL url2 = new URL("https://i.stack.imgur.com/7bI1Y.jpg");
        final Image img1 = ImageIO.read(url1);
        final Image img2 = ImageIO.read(url2);
        //Create the frame on the event dispatching thread
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run() {
                new HoverImage(img1, img2);
            }
        });
    }
} 
```

# c# - Create a new list containing references to elements from other lists?

> ID：10147490
> 
> 赞同：0
> 
> 时间：2012-04-13T19:57:01.103
> 
> 标签：c#, list, inheritance

Assuming I have a class like this:

```
class Base { }
class A : Base { }
class B : Base { }
class C : Base { } 
```

And objects like this:

```
A a = new A();
List<B> bs = new List<B>();
List<C> cs = new List<C>(); 
```

Is it possible to create a new list containing references to the other lists (So that changes are reflected in the original items? Such as:

```
void modifyContents(List<Base> allItems) {
  //modify them somehow where allItems contains a, bs and cs
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T20:00:12.947

您不能添加/删除/替换其他列表中的项目，但可以修改其他列表中的项目。

```
List<Base> baseList = new List<Base>();
baseList.Add(a);
baseList.AddRange(bs);
baseList.AddRange(cs);
// now you can modify the items in baseList 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T20:04:47.873

1.  使用 LINQ [Concat()](http://msdn.microsoft.com/en-us/library/bb302894.aspx)将两个列表连接到一个列表中`IEnumerable<Base>`
2.  `List<Base>`然后通过传入之前加入的构造函数创建一个新实例

**样本**

```
class Base
{
     public string Id { get; set; }
}

List<B> bs = new List<B>() { new B() };
List<C> cs = new List<C> { new C(), new C() };
var common = new List<Base>(bs.OfType<Base>().Concat(cs.OfType<Base>()));

// bs[0] will be updated
common[0].Id = "1";

// cs[0] will be updated
common[1].Id = "2";

// cs[1] will be updated
common[2].Id = "3"; 
```

# gwt - How Build GWT Application using MVP

> ID：10147492
> 
> 赞同：-2
> 
> 时间：2012-04-13T19:57:38.330
> 
> 标签：gwt, gwt-rpc, gwt-mvp

I have great experience in programming by using java and other languages. I need anyone who has great experience in using GWT with MVP to explain how to build GWT Application using MVP:

**View package** : explain what should be in view class.

**Client Package**: explain what java files are supposed to be here and what is the benefit from each file.

**Server Package**: I think here all services files( RPC ).

**Activity Package**: Explain what is the benefit from the classes here , I think here we we connect events with controls in view classes( Am I correct?).

**Place Package:** I need to understand this very well.

**Also what is the benefit from Clientfactory java file?**

**what is eventbus?**

**what is placecontroller?**

**please if you can order which file should be coded one after another?**

Thank you in advance,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T02:29:42.807

1) View 是一个带有指向其演示者的链接的小部件。它应该通知演示者应该处理的 ui 事件。

2) 视图、演示者、客户端（不与服务器端共享）模型、地点、活动、PlaceHistoryMapper、ActivityMapper。关于福利见下文。

你了解主持人吗？根据您的问题，我假设您将其与活动混淆了。1.1 ) Presenter 创建和管理视图，制作 rpc 和大部分“逻辑”内容。

3）你是对的，服务器包只是一个java服务器逻辑。

4) 活动链接场所和演示者。我将回到下面描述活动。

5) Place 有名称、token 和自己的 Tokenizer，它可以将其 place 转换为 token 和其他方式。

6) 我没有使用 ClientFactory。我更喜欢使用 google-gin（guice 的 gwt 客户端版本）进行依赖注入

7) 事件总线是......我无法比官方 javadoc 更好地描述 :)

> 向相关方发送事件。通过允许对象交互而不直接依赖于彼此，并且不需要事件源来处理维护处理程序列表，从而简化了解耦。每个应用程序通常会有一个 EventBus，广播可能普遍感兴趣的事件。

8) PlaceController 知道您在哪里（在应用程序中:) 并且可能会更改当前位置。（显然，它有 getWhere() 和 goTo(Place) 方法）

9) 首先，您需要编写应用程序的单例代码，例如 PlaceHostoryMapper 和 ActivityMapper。PlaceHostoryMapper 通过隔离所有 PlaceTokenizer 来提供历史记录并将令牌转换为地点。ACtivityMapper 隔离所有地点和活动，并提供第二个和第一个。

视图和演示者基于界面。接下来我会声明这样的接口。然后写地方。然后您可以编写活动代码，因为您拥有演示者的位置和界面。然后以任意顺序实现视图和演示者，将活动映射到 ActivityMapper 中的位置，并在 PlaceHistoryMapper 中注册 PlaceTokenizer。

我假设现在您有更多问题，请随时在评论中或通过我的个人资料中的联系人提问 :)

# c# - string.Join throws an exception

> ID：10147494
> 
> 赞同：3
> 
> 时间：2012-04-13T19:57:43.973
> 
> 标签：c#, .net, string, .net-4.0, .net-3.5

I am converting a working .NET 3.5 application to .NET 4.0 and after changing the target framework I'm getting an error I've never seen before.

> Member 'string.Join(string, params string[])' cannot be accessed with an instance reference; qualify it with a type name instead.

Here is the code:

```
/// <summary>
/// 
/// </summary>
/// <returns>command arguments as single line</returns>
public virtual string ToLine()
{
    List<string> argumentsList = new List<string>();
    CollectArguments(argumentsList);
    String args = null;
    foreach (string s in argumentsList)
        args = args.Join(" ", s);

    return ComandName().Join(" ", args);            
} 
```

Obviously something changed from 3.5 to 4.0 but I'm having a hard time figuring out how I should modify this code to get it to compile.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T19:59:27.063

`Join`是一个静态方法`String`，所以使用类型而不是像这样的实例调用它

```
args = string.Join(" ", s); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T20:00:49.687

```
 public virtual string ToLine()
    {
        List<string> argumentsList = new List<string>();
        CollectArguments(argumentsList);
        String args = null;
        args = string.Join(" ", argumentsList);
        return string.Join(" ", ComandName(), args);
    } 
```

# php - Making a Dynamic Page Using PHP

> ID：10147495
> 
> 赞同：1
> 
> 时间：2012-04-13T19:57:46.050
> 
> 标签：php, html, dom

I'm trying to make a page that once someone logs in, they can view the contents of the database that is associated with them in a clear, concise and organized way. Currently, I just have PHP echoing HTML and variables to make the page. i.e. I did what I knew would work.

I am new to everything programming and have done Javascript DOM manipulation so I can't see this echo thing can't being the right.

```
while($row = mysql_fetch_array($result))
{

echo "<tr>";
echo "<td>" . $row['First_Name'] . "</td>";
echo "<td>" . $row['Last_Name'] . "</td>";
echo "<td>" . $row['Employee_No'] . "</td>";
echo "<td>" . $row['Job_No'] . "</td>";
echo "<td>" . $row['Job_Name'] . "</td>";
echo "</tr>";
 }
echo "</table>"; 
```

I know that technically, this will work, but I am just looking for basic information on how to do this properly, preferably in an easy to understand format.

[http://php.net/manual/en/book.dom.php](http://php.net/manual/en/book.dom.php)

I found this, it looks like it is potentially what I need, but I am not experienced enough to know and it's not the most beginner friendly documentation.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:16:55.713

如果你愿意，你也可以通过这种方式将你的 php 代码和 html 代码分开：

phpcode.php

```
while($row = mysql_fetch_array($result))
{
    global $firstName, $lastName;
    $firstName=$row['First_Name'];
    $lastName=$row['Last_Name'];
    include('htmlcode.php');
} 
```

htmlcode.php

```
<?php global $firstName, $lastName; ?>
<tr>
<td><?php echo $firstName; ?></td>
<td><?php echo $lastName; ?></td>
<tr> 
```

大多数情况下这不是必需的，但如果您想要更好的可读代码，在某些情况下可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:04:15.737

在 PHP 中，当您创建 HTML 输出时，您不会被绑定到 DOM。因为与 javascript 不同，没有 DOM 可以与浏览器共享。相反，您可以像`echo`在您的问题中一样创建文本输出。这完全没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:08:11.543

只需`echo "<table>";`在 while 循环之前添加，表格应该可以正确呈现。您可能需要使用 CSS 样式来进一步美化表格

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T20:18:45.710

我总是喜欢以下，使用 pinouchon 的代码。

```
<table>
<?php foreach ($conn->query($query) as $row): ?>
<tr>
 <td> <?= $row['First_Name'];?></td>
 <td> <?= $row['Last_Name'];?></td>
 <td> <?= $row['Employee_No'];?></td>
 <td> <?= $row['Job_No'];?></td>
 <td> <?= $row['Job_Name'];?></td>
</tr>
<?php endforeach;?>
</table> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T20:08:41.597

看看[PHP PDO](http://php.net/manual/fr/book.pdo.php)。与数据库交互时会更容易。您的代码将如下所示：

```
echo "<table>";
foreach ($conn->query($query) as $row) {
  echo "<tr>";
  echo "<td>" . $row['First_Name'] . "</td>";
  echo "<td>" . $row['Last_Name'] . "</td>";
  echo "<td>" . $row['Employee_No'] . "</td>";
  echo "<td>" . $row['Job_No'] . "</td>";
  echo "<td>" . $row['Job_Name'] . "</td>";
  echo "</tr>";
}
echo "</table>"; 
```

# asp.net - How do I make a shoppingcart in asp.net when I have loaded some items in a gridview and want to add the selected one to my shoppingcart?

> ID：10147498
> 
> 赞同：0
> 
> 时间：2012-04-13T19:58:03.933
> 
> 标签：asp.net, gridview, shopping-cart

I have tried to make the selectbutton an templatefield and insert the selected item in a accesdatabase via a SQL insert commant but it didn't work. I am sorry if this is bad english. Regards Pieter

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:09:13.627

您最好通过 asp.net 服务器端间接执行此操作。如果您不知道如何处理它，您应该放置服务器端按钮（来自工具箱），然后双击该按钮，然后将其传递给服务器端代码以处理单击事件。在这种方法中，您可以做更强大的事情，包括通过 Ado.Net 更新数据库。

# jquery - $.parseXML not working with valid xml

> ID：10147499
> 
> 赞同：9
> 
> 时间：2012-04-13T19:58:04.287
> 
> 标签：jquery, html, null, xml-parsing

XML:

```
<?xml version="1.0"?>
<choices>
    <choice>
        <start>39</start>
        <duration>6</duration>
        <path>
            <name></name>
            <complete></complete>
        </path>
        <path>
            <name></name>
            <complete></complete>
        </path>
    </choice>
</choices>

$.ajax({
    url: 'choices.xml',
    context: this,
    async: false,
    success: function(response) {
        var xmlDoc = $.parseXML(response);
        console.log(xmlDoc); // null
    }
}); 
```

The XML is reported as valid, and no error is thrown. I know I can use $(response), but I don't need that.

*   jQuery 1.7.2

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-13T20:02:06.283

> dataType
> 默认值：智能猜测（xml、json、脚本或 html）
> 
> “xml”：返回一个可以通过 jQuery 处理的 XML 文档。
> 
> $.ajax() 函数依赖于服务器来提供有关检索数据的信息。如果服务器将返回数据报告为 XML，则可以使用普通的 XML 方法或 jQuery 的选择器来遍历结果。如果检测到另一种类型，例如上例中的 HTML，则将数据视为文本。

结果应该已经被解析了。

如果您特别不希望它被解析，请使用不同的`dataType`.

# ios - Passing array to a segue

> ID：10147500
> 
> 赞同：0
> 
> 时间：2012-04-13T19:58:11.133
> 
> 标签：ios, arrays, segue

I'm trying to pass an array from view A to segue B, here's the code:

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([[segue identifier] isEqualToString:@"B"]) {
        BViewController *B = [segue destinationViewController];
        [B setBArray:self.AArray];
} 
```

I've declared BArray as property in BViewCOntroller:

```
 @property (retain) NSMutableArray *BArray; 
```

and **synthesized** it....

and the error is

```
NSInvalidArgumentException', reason: '-[UINavigationController setBArray:]: unrecognized selector sent to instance... 
```

where am i wrong? Thank you in advance,

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T20:44:10.943

destinationViewController 返回的是 UINavigationController，而不是 BViewController。您是否正在使用新的 UINavigationController？可能是您的故事板中的错误。

# c++ - 使用 runge kutta 的 2D 刚体物理

> ID：10147507
> 
> 赞同：2
> 
> 时间：2012-04-13T19:58:45.507
> 
> 标签：c++, physics, runge-kutta

有谁知道使用 runge kutta 的 2D 刚体物理的任何 c++/opengl 源代码演示？

我想构建一个物理引擎，但我需要一些参考代码来更好地理解其他人是如何实现的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T20:22:39.753

你必须注意很多事情才能很好地做到这一点。我将专注于集成器的实施以及我发现的对我有用的东西。

对于系统中的所有自由度，实现一个函数以将加速度`a`作为时间`t`、位置`x`和速度的函数返回`v`。这应该对数量的数组或向量进行操作，而不仅仅是标量。

```
a = accel(t,x,v); 
```

在每`RK`一步之后评估加速度，为下一步做好准备。然后在循环中执行以下操作：

```
{
   // assume t,x[],v[], a[] are known
   // step time t -> t+h and calc new values
   float h2=h/2;
   vec q1 = v + h2*a;
   vec k1 = accel(t+h2, x+h2*v, q1);
   vec q2 = v + h2*k1;
   vec k2 = accel(t+h2, x+h2*q1, q2);
   vec q3 = v + h*k2;
   vec k3 = accel(t_h, x+h*q2, q3);
   float h6 = h/6;
   t = t + h;
   x = x + h*(v+h6*(a+k1+k2));
   v = v + h6*(a+2*k1+2*k2+k3);
   a = accel(t,x,v);
} 
```

为什么？那么标准`RK`方法需要你制作一个`2xN`状态向量，但是第一个元素的导数`N`等于最后一个`N`元素。如果您将问题拆分为两个`N`状态向量并稍微简化一下，您将得到上述二阶方案`RK`。

我已经这样做了，结果与具有`N=6`自由度的计划系统的商业软件相同。

# c - 从单链表中删除一个节点 C

> ID：10147509
> 
> 赞同：-1
> 
> 时间：2012-04-13T19:58:47.470
> 
> 标签：c, linked-list

我很难弄清楚为什么我的删除功能不起作用。它是一个布尔值，如果项目被删除，则需要返回。任何帮助，将不胜感激

```
boolean delete(SLL *list, String str){
    NODE *current, *previous,*temp;
    temp=malloc(sizeof(Employee));
    previous=NULL;
    current = list -> head;

    while(current->next!=NULL) {
        if(strcmp(current->anEmployee->name, str) == 0){
            if(current=list->head){
                list->head=current->next;
            }

            if(previous->next == NULL){//item not found in list
                return 0;
            }
        else { //current is to be deleted
            temp->next=current->next;
            previous->next=temp->next;

            return 1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:03:59.667

您将 current 与 list->head （最初是列表的根节点）进行比较的 if 语句是将节点分配给 current，而不是进行比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:04:16.313

在编写代码之前，您需要了解在删除链表中的节点时应处理的各种情况。以下内容可能对您有所帮助。

1.  [从链表中删除节点](https://stackoverflow.com/questions/8634327/delete-node-from-linkedlist/8635324#8635324)

2.  [删除链表中具有特定值的所有节点](https://stackoverflow.com/questions/8615912/removing-all-nodes-with-a-certain-value-in-a-linked-list/8616233#8616233)

# mysql - 这个触发器有什么问题？

> ID：10147510
> 
> 赞同：2
> 
> 时间：2012-04-13T19:58:49.967
> 
> 标签：mysql, ide, triggers, syntax-error, heidisql

我将 MySql 与 HeidiSql 一起用作 IDE。我有以下触发器：

```
BEGIN
declare blobpassed blob(50);
declare gid integer(10);
select lt.groupid into gid, GROUP_CONCAT(passed) into blobpassed from latest_tests lt
    left join testcaseresults tcr on tcr.testcaseresultsid = lt.tcrid
    left join grouping g on g.groupid = lt.groupid

    where lt.tcrid = NEW.testcaseresultsid
group by lt.groupid;

if blobpassed REGEXP '[1,]+' THEN 
update grouping g
set g.haspassed = 1
where g.groupid = gid;
END; 
```

但它一直说`GROUP_CONCAT(passed) into blobpassed from latest_tests lt`. 通常，这些错误意味着在此之前存在错误（因此，在这种情况下，使用 gid）。但我不明白我做错了什么。

有人可以告诉我我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:31:23.393

在[SELECT ... INTO](http://dev.mysql.com/doc/refman/5.6/en/select-into.html)中，“into”部分只写一次，带有一个变量列表，所以正确的查询是：

```
select lt.groupid, GROUP_CONCAT(passed) into gid, blobpassed from latest_tests lt
    left join testcaseresults tcr on tcr.testcaseresultsid = lt.tcrid
    left join grouping g on g.groupid = lt.groupid
    where lt.tcrid = NEW.testcaseresultsid 
```

“进入”部分也可以放在查询之后：

```
select lt.groupid, GROUP_CONCAT(passed) from latest_tests lt
    left join testcaseresults tcr on tcr.testcaseresultsid = lt.tcrid
    left join grouping g on g.groupid = lt.groupid
    where lt.tcrid = NEW.testcaseresultsid
    into gid, blobpassed 
```

# c# - 为什么我得到 NullReferenceException？

> ID：10147512
> 
> 赞同：0
> 
> 时间：2012-04-13T19:59:06.860
> 
> 标签：c#, winforms, generics, interface

我有一个界面

```
public interface IConfig
{
    string name { get; set; }
    string address { get; set; }
    int phone { get; set; }

    List<string> children { get; set; }
} 
```

这是我的配置文件，它只有三个应用程序设置，而不是我在界面中的四个。

```
<add key="name" value="abc" />
<add key="address" value="100 Norin Street" />
<add key="phone" value="709-111-111111" /> 
```

现在在启动时，我使用 DictionaryAdapterFactory 来填写 app.config 文件值。我在这里成功获取了 app.config 的值。

```
private readonly IConfig _config;
private readonly DictionaryAdapterFactory _factory;
_factory = new DictionaryAdapterFactory();
_config = _config.GetAdapter<IConfig>(ConfigurationManager.AppSettings); 
```

现在在运行时我需要填写子列表类型的值。但我得到空异常。为什么？

```
//loop
_config.children.Add(item.values); 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T20:01:19.467

在某处缺少列表初始化？

```
_config.children = new List<string>() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:16:06.527

会像下面这样吗？

```
_config.children.AddRange(item.values); 
```

当然，也需要初始化。

```
_config.children = new List<string>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-27T23:43:09.860

您在界面中将“电话”定义为 int，而 AppSettings 中的电话值不能转换为 int。将其更改为字符串：

```
 string phone { get; set; } 
```

# python - Python：在不同的命名空间中动态导入模块

> ID：10147519
> 
> 赞同：2
> 
> 时间：2012-04-13T19:59:39.713
> 
> 标签：python, namespaces, import

```
import v_framework as framework
framework.loadModules(["Maintenance"])
framework.Maintenance.showPage() 
```

在`framework`我有：

```
def loadModules(aModules):
    d_utility = {"Maintenance":"COOl_M_PAGE"}
    for module in a_aModules:
        exec("import " + d_utility[module] + " as " + module) 
```

执行时`loadModules`，它会导入`v_framework`命名空间中的模块。由于我正在导入`v_framework`as `framework`，我想我应该能够使用导入的模块`framework.Maintenance`。但它不是那样工作的。有没有办法做我想做的事情？或者，除了执行的名称空间之外，还有什么方法可以在名称空间中导入模块`exec`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:18:51.220

有用于动态导入模块的库。您可以使用[importlib](http://docs.python.org/dev/library/importlib.html)（另一个可能有用的是[pkgutil](http://docs.python.org/library/pkgutil.html)）。现在，对于您的情况，我想这可以完成这项工作：

```
import importlib
mods = {}
def loadModules(aModule):
    global mods
    mods[module] = importlib.import_module(d_utility[module])
    # or maybe globals()[module] = ... would work also (exactly as you expect it to 
```

更新： exec 修改函数的本地命名空间，而不是全局命名空间（我认为）。

希望能帮助到你。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:22:27.630

当您`import`在函数内部时，模块会正常导入/执行，但您导入的名称是函数的本地名称，就像在函数内部分配的任何其他变量一样。

```
>>> def test_import():
...    import os
...    print os
...
>>> test_import()
<module 'os' from '/usr/lib/python2.7/os.pyc'>
>>> os
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
NameError: name 'os' is not defined 
```

`os`虽然已经导入，您仍然可以通过以下方式访问它`sys.modules`：

```
>>> import sys
>>> sys.modules['os']
<module 'os' from '/usr/lib/python2.7/os.pyc'>
>>> os = sys.modules['os']
>>> os
<module 'os' from '/usr/lib/python2.7/os.pyc'> 
```

一种快速而肮脏的方式来做你想做的事情是这样的；`exec`采用可选映射作为局部和全局变量。所以你可以做

```
def loadModules(aModules):
    d_utility = {"Maintenance":"COOl_M_PAGE"}
    for module in aModules:
        exec ('import %s as %s' % (d_utility[module], module)) in globals() 
```

虽然这很丑陋并且可能具有安全隐患或其他东西。正如 jadkik94 所提到的，有些库提供了更简洁的方法来处理这个问题。

# git - 在 GitHub 上设置 repo - push -u origin master 时出错

> ID：10147521
> 
> 赞同：2
> 
> 时间：2012-04-13T19:59:47.530
> 
> 标签：git, github, git-bash

我正在尝试在 GitHub 上设置我的第一个 Git 存储库。我一直在关注 GitHub 网站上的[文档](http://help.github.com/create-a-repo/)。直到最后一个命令：`git push -u origin master`. 它给了我以下错误：

```
FATAL ERROR: Disconnected: No supported authentication methods available (server sent: publickey)
fatal: The remote end hung up unexpectedly 
```

我不知道这是什么意思。这是我得到的唯一与文档指示不同的输出。我似乎无法在网上找到任何有同样错误的东西，并解释了它的含义，同样重要的是我需要做些什么来修复它。我希望建立一个甜蜜的 Java Helper Library，所以任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T20:06:19.127

错误消息告诉您无法正确连接。

尝试使用以下命令登录 GitHub：

```
$ ssh -T git@github.com 
```

也许您忘记了使用 SSH 密钥`ssh-add path/to/key`？

为此，请使用以下代码（避免“无法打开与您的身份验证代理的连接。”问题）：

```
$ exec ssh-agent bash
bash$ ssh-add /path/to/key 
```

[请参阅http://help.github.com/ssh-issues/](http://help.github.com/ssh-issues/)上的 GitHub 文档以解决 SSH 问题。

在 Windows 上，使用**openssh**作为“GitHub 仅提供对 openssh 的支持。”，可在此处获得：[http ://sshwindows.sourceforge.net/](http://sshwindows.sourceforge.net/)

# sql - 两个 TSQL 连接有什么区别？

> ID：10147522
> 
> 赞同：3
> 
> 时间：2012-04-13T19:59:51.837
> 
> 标签：sql, sql-server, tsql

我想知道以下查询（使用两种不同的连接语法）之间的区别是什么。我在一些我继承的代码中看到了这一点，并且很好奇结果是否总是相同的。如果没有，为什么你会使用一个而不是另一个。

查询 #1 示例：

```
SELECT * FROM TableA a
  INNER JOIN TableB b
    INNER JOIN TableC c
      ON b.TableBId = c.TableCId
     ON b.TableBId = a.TableAId 
```

查询 #2 示例：

```
SELECT * FROM TableA a
  INNER JOIN TableB b
     ON b.TableBId = a.TableAId
  INNER JOIN TableC c
     ON b.TableBId = c.TableCId 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:11:46.083

如前所述，您可以查看[执行计划](http://msdn.microsoft.com/en-us/library/ms178071.aspx)以验证这些确实是相同的查询。我几乎可以肯定他们是，虽然

更多关于你为什么会选择一个而不是另一个的问题。我会说这归结为风格偏好。大多数情况下，您会看到查询 #2，因为它对未来的读者有更清晰的定义。如果您创建一个真正复杂的查询，那么您获得的好处会大大增加。

我不能真正保证另一种方法，因为我真的相信它变得太难以理解并且永远不应该使用。同样，这是我的观点，推理归结为观点/风格。

**但是**，标准方法是 query2，所以我会坚持使用 :)...但同样，只有我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:19:10.470

您的查询的执行计划完全相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:09:13.487

尝试预览[执行计划](http://www.simple-talk.com/sql/performance/execution-plan-basics/)。它很可能会完全一样。

# c - 使用 ncurses 显示数独网格

> ID：10147524
> 
> 赞同：2
> 
> 时间：2012-04-13T20:00:01.590
> 
> 标签：c, ncurses, lines, sudoku

我已经编写了 ac 程序来解决数独问题，我想知道我是否可以绘制网格并使用 ncurses 库填充它。我只是想知道如何控制 ncurses 中框的线条和边框

非常感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:48:36.360

是的，您可以使用`hline`一系列函数来绘制网格。

有关详细信息，请参阅[http://osr600doc.sco.com/en/man/html.CURSES/hline.CURSES.html](http://osr600doc.sco.com/en/man/html.CURSES/hline.CURSES.html)。

# asp.net - 在后面的代码中访问会话变量

> ID：10147525
> 
> 赞同：1
> 
> 时间：2012-04-13T20:00:09.077
> 
> 标签：asp.net

这是我的代码：

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (!Session["Authenticated"] )
        {
            Response.Redirect( "index.aspx", false );
        }
    } 
```

他们登录后，我将会话设置为 true。基本上，如果他们没有活动会话，我希望他们重新定向回索引/登录页面。我该如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:05:44.673

使用此检查

```
if(Session["Authenticated"] == null || !(bool)Session["Authenticated"]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:04:43.837

如果您使用 cookie，您可以在 cookie 中存储一个标记，以便区分**“新浏览器 + 新会话”和“旧浏览器 + 过期会话”**。

下面是在会话过期时将用户重定向到过期页面的示例代码。

```
void Session_OnStart(Object sender, EventArgs e) 
{ 
  HttpContext context = HttpContext.Current;
  HttpCookieCollection cookies = context.Request.Cookies; 
  if (cookies["starttime"] == null) { 
    HttpCookie cookie = new HttpCookie("starttime", DateTime.Now.ToString()); 
    cookie.Path = "/"; 
    context.Response.Cookies.Add(cookie); 
  } 
  else { 
    context.Response.Redirect("expired.aspx"); 
  } 
} 
```

如果您尝试实现会话，这可能会对您有所帮助[http://aspalliance.com/1621_Implementing_a_Session_Timeout_Page_in_ASPNET.2](http://aspalliance.com/1621_Implementing_a_Session_Timeout_Page_in_ASPNET.2)

# .net - 我需要计算一堆每行值：如何避免在 t-sql 中循环遍历表的行

> ID：10147534
> 
> 赞同：1
> 
> 时间：2012-04-13T20:00:44.600
> 
> 标签：.net, tsql

我有一张设施表和一张传输表。我想计算各种东西，例如，设施 X 在 2011 年 4 月发送了 10124321409 次传输，其中 9959 次丢失了 SSN。这些是巨大的表，所以我会将这些计算值存储在一个“缓存”表中，以便当用户使用 UI 查看我们的系统时可以轻松访问它们（例如选择日期范围）。我有一堆用户定义的函数，它们采用设施名称和日期范围并计算一个值，就像这样

```
 set @s = dbo.getPctMissingSSNs(facilityX, 1/1/2012, 1/15/2012) //returns pct missing ssn from 1/1/12 to 1/15/12 at facilityX 
```

从stackoverflow，我了解到

1.  循环遍历表的行是一个坏主意 循环遍历表的行[的最佳方法是什么？](https://stackoverflow.com/questions/3910421/what-is-the-best-way-to-loop-over-a-tables-rows)
2.  最好使用存储过程进行这些类型的计算，而不是将数据从服务器调用到客户端，计算值，然后将输出上传回服务器的缓存。

有没有一种方法可以更新每个设施的缓存，用于一堆日期范围，而无需（1）循环遍历 T-SQL 中的行（坏）或（2）循环遍历 VB.net 中的行以下载来自服务器的值，然后再次上传回来（也很糟糕）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T01:00:17.990

使用更新查询。T-SQL 会将字段名称解释为输入参数。因此，如果您有一个包含两列的表：facilityName 和 cacheValue 字段，您可以执行类似的操作来更新 cacheValue 字段，使其等于 scalarUserDefinedFunction(facilityName)

```
Update cacheTable set cacheValue=scalarUserDefinedFunction(cacheTable.FacilityName) 
```

# matlab - Matlab移动图像

> ID：10147542
> 
> 赞同：1
> 
> 时间：2012-04-13T20:00:58.097
> 
> 标签：matlab, matlab-figure, matlab-guide

如何通过单击按钮沿 x 或 y 轴移动图像？

我已经使用 'image = imread('image.jpg');' 导入了图像 然后使用'Left = uicontrol（'Parent'，gcf，'Style'，'pushbutton'，'String'，'Left'，...'，但我被困在那里。我想将图像移动到任何位置方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T04:35:21.277

您可以为按钮创建一个简单的回调函数，该函数会更改显示图像的轴`XLim`的`YLim`属性。

保存原始限制：

```
xl = xlim;
yl = ylim; 
```

例如将图像向左移动：

```
step = 5; %# move by 5 pixels
xlim(xlim+step) 
```

向上移动：

```
ylim(ylim+step) 
```

要恢复原始位置：

```
xlim(xl)
ylim(yl) 
```

**更新**：

这是一个工作示例代码（不使用 GUIDE）：

```
im = imread('pout.tif');
imshow(im);
step = 5;
xl = xlim;
yl = ylim;
pbLeft = uicontrol('Parent', gcf, 'Style', 'pushbutton', 'String','Left', ...
    'Units','norm', 'Position', [0.4 0.05 0.1 0.05], 'Callback', 'xlim(xlim+step)');
pbReset = uicontrol('Parent', gcf, 'Style', 'pushbutton', 'String','Reset', ...
    'Units','norm', 'Position', [0.5 0.05 0.1 0.05], 'Callback', 'xlim(xl);ylim(yl);');
pbRight = uicontrol('Parent', gcf, 'Style', 'pushbutton', 'String','Right', ...
    'Units','norm', 'Position', [0.6 0.05 0.1 0.05], 'Callback', 'xlim(xlim-step)');
pbUp = uicontrol('Parent', gcf, 'Style', 'pushbutton', 'String','Up', ...
    'Units','norm', 'Position', [0.5 0.1 0.1 0.05], 'Callback', 'ylim(ylim+step)');
pbDown = uicontrol('Parent', gcf, 'Style', 'pushbutton', 'String','Down', ...
    'Units','norm', 'Position', [0.5 0.0 0.1 0.05], 'Callback', 'ylim(ylim-step)'); 
```

# javascript - 当用户选择 DropDownList 的值时强制提交，除非该值是自定义

> ID：10147549
> 
> 赞同：0
> 
> 时间：2012-04-13T20:01:28.293
> 
> 标签：javascript, jquery, asp.net-mvc-3

一旦用户为 DropDownList 选择了一个值，只要它不是“自定义”，我就会强制提交。如果是“自定义”，我不希望提交表单。相反，我希望显示起始日期和结束日期。但是，除非选择自定义，否则我不希望显示起始日期或结束日期。我认为这必须使用 jQuery 或 JavaScript 来完成。谁能告诉我如何实现这一目标？

这是我在控制器中的代码，用于将下拉列表的开始日期、结束日期和列表传递给视图：

```
List<SelectListItem> rangeList = new List<SelectListItem>();
rangeList.Add(new SelectListItem { Text = "Today", Value = "Today" });
rangeList.Add(new SelectListItem { Text = "Yesterday", Value = "Yesterday" });
rangeList.Add(new SelectListItem { Text = "Past 7 Days", Value = "Past 7 Days" });
rangeList.Add(new SelectListItem { Text = "Past 30 Days", Value = "Past 30 Days" });
rangeList.Add(new SelectListItem { Text = "Last Month", Value = "Last Month" });
rangeList.Add(new SelectListItem { Text = "Custom", Value = "Custom" });

ViewBag.rangeList = rangeList;
ViewBag.startingDate = startingDate;
ViewBag.endingDate = endingDate;
ViewBag.specifiedRange = specifiedRange; 
```

**编辑**

我修改了我的代码以显示添加脚本的尝试。下面是我现在在视图中的代码。它什么也没做。

```
<script type="text/javascript">
    $("#range").change(function () 
    {
        if ($(this).val() == "Custom") 
        {
            $("p.down").toggle();
        }
        else 
        {
            $("form").submit();
        }
    });
</script>

@using (Html.BeginForm())
{
    <p>
        @Html.DropDownList("specifiedRange", new SelectList(
                    ViewBag.rangeList as System.Collections.IEnumerable, 
                    "Text", 
                    "Value", 
                    new { @Id = "range" }))
    </p>
    <p class = "down">
        Starting Date: @(Html.Telerik().DateTimePicker().Name("startingDate")) 
        Ending Date: @(Html.Telerik().DateTimePicker().Name("endingDate"))
        <input type="submit" value="GO" />
    </p>
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:05:28.933

是的，它需要用 jquery 来完成。这样的事情：

```
$(document).ready(function(){
    $("#idofyourdropdown").change(function(){
       if($(this).val() == "Custom")
       {
        $("p.down").toggle();
       }
        else{
       $("form").submit();
    }

    });
}); 
```

`<p>`并将您想要展示的“向下”归类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:04:24.627

这是你想要的？

```
$('#specifiedRange').change(function() {
    if($(this).val() !== 'Custom') $(this).closest('form').submit();
}) 
```

# jquery - jQuery post 的进度条

> ID：10147551
> 
> 赞同：0
> 
> 时间：2012-04-13T20:01:42.107
> 
> 标签：jquery

我正在使用 jQuery Ajax 发出 POST 请求。有没有办法在进度条中显示进度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:09:30.433

遗憾的是，这无法完成，但是您可以采取一个小技巧来实现这一点..您可以显示一个不断增加的进度条-这只是一个重要的图像-（比如说 90），然后当查询成功时进行显示 100% 完成的图像..

所以只是把它包装起来：- 两个动画图像一个计数到 90% 相当快，因为​​那些不会花费很长时间，另一个只是跳到 100% ......我真的不知道是否有其他方式，但我相信没有

# c++ - 如何在 C++ 中将文本文件读入二维动态向量？

> ID：10147554
> 
> 赞同：0
> 
> 时间：2012-04-13T20:02:06.313
> 
> 标签：c++, linux

我有一个包含两列和未知行数的文本文件。所以我想将两列加载到动态二维向量中。这是我到目前为止所拥有的，它不起作用。如果这是一维的，我知道该怎么做。空格分隔两列。由于我正在阅读 2 列，因此我只需要 2 个大小为 n 的向量。

```
vector<vector<string> > component;
ifstream in_file("/tmp/FW.txt", ios::binary);

//Check if the file is open
if(!in_file.is_open()) 
{
   cout << "File not opened..." << endl;
   exit (1);
}

for(int i=0; !in_file.eof(); i++)
{
   in_file >> component.push_back();  
   //component.push_back(in_file);
} 
```

有人可以告诉我如何让它工作吗？另外，如果您能告诉我如何将二维矢量打印回来，使其看起来像原始文件，那也很好。这需要在 Linux(Red hat) 上运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:23:29.427

怎么样：

```
vector< vector<string> > component;
ifstream in_file("/tmp/FW.txt"); // N.B., not ios::binary since you're reading text strings
vector<string> vs( 2 );
// Assume they are separated by just whitespace
while( in_file >> vs[0] >> vs[1] )
{
    component.push_back( vs );
} 
```

# drupal - 将用户配置文件中的用户图像链接到图像而不是用户配置文件，drupal 7

> ID：10147557
> 
> 赞同：0
> 
> 时间：2012-04-13T20:02:20.337
> 
> 标签：drupal

当我在 drupal 中访问带有图片的用户个人资料时，图片再次链接到用户个人资料。通过单击用户图像，我希望显示完整的图像，例如使用灯箱。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T11:21:55.920

[如果您无法挂钩用户的节点https://drupal.org/node/1911650](https://drupal.org/node/1911650)，您仍然可以使用 profile2 为用户配置文件做任何事情

# mysql - 我们可以在 FROM 之后选择表来做一个 mySQL CASE 吗？

> ID：10147559
> 
> 赞同：1
> 
> 时间：2012-04-13T20:02:31.773
> 
> 标签：mysql, sql, case

我正在尝试根据另一个表中的输入值来选择一个表。让我们说

```
SELECT tale0.*,class.*,hamburger.* 
FROM 
    CASE tale0.id=1 
        THEN class 
    END 
        CASE tale0.id=2 
            THEN hamburger 
```

这是要走的路还是有不同的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:08:25.250

不，您不能在 FROM 子句中使用 CASE 语句。您需要加入两个表，然后根据值从相关表中提取字段：

```
SELECT
    tale0.*,
    CASE WHEN tale0.id = 1 THEN class.Column1 ELSE hamburger.Column1 END as Column1,
    CASE WHEN tale0.id = 1 THEN class.Column2 ELSE hamburger.Column2 END as Column2,
    ...
FROM
    table0, class, hamburger
-- include join conditions 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-10T00:54:54.083

另一种解决方法是

```
SELECT TALE0.*, CLASS.*, NULL AS HF1, NULL AS HF2, NULL AS HF3
  FROM TALE0
  INNER JOIN CLASS
    ON CLASS.whatever = TALE0.whatever
UNION ALL
SELECT TALE0.*, NULL AS CF1, NULL AS CF2, NULL AS CF3, HAMBURGER.*
  FROM TALE0
  INNER JOIN HAMBURGER
    ON HAMBURGER.whatever = TALE0.whatever 
```

您需要拥有与 HAMBURGER 中的字段一样多的 HF1、HF2、HF3 等字段 - 并使用 HAMBURGER 中的字段名称而不是 HF1、HF2、HF3 等。同样 - 应替换 CF1、CF2 等通过 CLASS 中的字段名称。

祝你好运。

# c# - 我需要一个正则表达式来提取图像和 HTML 文档

> ID：10147562
> 
> 赞同：0
> 
> 时间：2012-04-13T20:02:47.310
> 
> 标签：c#, wpf, regex

我有各种 HTML 文档，我正在尝试提取以下链接：(1) 其他 html 文档，(2) 图像文件，例如 .jpg、.png 和 .bmp。我需要一个正则表达式来做到这一点，但似乎无法弄清楚。

每个 html 页面都有类似于以下的代码：

* * *

IMG style="MARGIN-BOTTOM: 20px; MARGIN-LEFT: 20px" align=right src="images/sample001.jpg">

IMG style="MARGIN-BOTTOM: 25px; MARGIN-LEFT: 25px" align=right src="images/sample002.png">

IMG style="MARGIN-BOTTOM: 20px; MARGIN-LEFT: 20px" align=right src="images/sample003.bmp">

href="javascript:parent.POPUP({url:'testDoc001.htm',type:'shared',width:600,height:645})">

href="javascript:parent.POPUP({url:'testDoc002.html',type:'shared',width:700,height:712})">

* * *

例如，正则表达式将对上述 HTML 进行操作并生成结果数组：

图片/sample001.jpg

图片/sample002.png

图像/sample003.bmp

testDoc001.htm

testDoc002.html

有人可以帮我吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:44:36.857

避免您在尝试使用正则表达式解析 HTML 时遇到的挫折和错误。使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)之类的 HTML 解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:40:31.757

in Perl

```
my $x = "your html";

#$1 - is a first group in match - (.+\.(jpg|png))
while ($x =~ /<img .* src="(.+\.(jpg|png))"/ig) {
    print "$1\n";
}

while ($x =~ /<a( .)* href=".*url:('|")(.+\.htm(l)?)('|").*/ig) {
    print "$3\n";
} 
```

output:

```
images/sample001.jpg
images/sample002.png
testDoc001.htm
testDoc002.html 
```

regexps `<img .* src="(.+\.(jpg|png))"` and `<a( .)* href=".*url:('|")(.+\.htm(l)?)('|").*` are similar in most languages. `ig` defines that search is case-insensitive and multiple matches

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:18:19.493

可能是图像的某些内容（使用组）：

```
IMG[^>]*src="([^"]*)" 
```

弹出窗口是这样的：

```
url:'([^']*)' 
```

*   另见：正则表达式测试工具：[http ://rubular.com/r/W5aSrgMD8B](http://rubular.com/r/gbpze4VqlB)

# android - Android mediarecorder 停止失败

> ID：10147563
> 
> 赞同：14
> 
> 时间：2012-04-13T20:02:47.313
> 
> 标签：android, video, camera, mediarecorder

我遇到了一个非常奇怪的行为：有时我的 mediarecorder 因错误“停止失败”而崩溃，有时它工作正常。是我的错还是系统的错误？我不明白出了什么问题。

```
private void stopRecording(){
        ticker.cancel();
        ticker.purge();

        recorder.stop();

        startBtn.setText("Start");
        recordInProcess = false;

        markList = locWriteTask.getMarkArray();

    mCamera.lock();
        recorder.release();
    }

 private void startRecording(){

         startBtn.setText("Stop");

         recordInProcess = true;

             recorder = new MediaRecorder();

         mCamera.unlock();
         recorder.setCamera(mCamera);

         recorder.setPreviewDisplay(mSurfaceHolder.getSurface());
         recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
         recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
         recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
         recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
         recorder.setVideoEncoder(MediaRecorder.VideoEncoder.MPEG_4_SP);
         recorder.setMaxDuration((int) 10000000); 
         recorder.setVideoSize(320, 240); 
         recorder.setVideoFrameRate(15); 
         recorder.setOutputFile(FULL_PATH_TO_LOCAL_FILE + counter + MP4);

         try{
             recorder.prepare();
         } catch (Exception e){
             finish();
         }

         lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);

         ticker = new Timer();
         locWriteTask = new WriteTimeLocationTimerTask(ll);
         ticker.schedule(locWriteTask, 0, DELAY);   

         recorder.start();
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T06:51:28.487

您可能会在 MediaRecorder.stop() 方法中捕获 RuntimeException。

例子：

```
MediaRecorder mRecorder = new MediaRecorder();
File mFile = new File("The output file's absolutePath");

... //config the mRecorder
mRecorder.setOutputFile(mFile.getAbsolutePath());

... //prepare() ...
mRecorder.start();

try {
    mRecorder.stop();
} catch(RuntimeException e) {
    mFile.delete();  //you must delete the outputfile when the recorder stop failed.
} finally {
    mRecorder.release();
    mRecorder = null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-20T22:32:42.127

如果记录器未处于记录状态，则停止可能会失败。

见 [http://developer.android.com/reference/android/media/MediaRecorder.html](http://developer.android.com/reference/android/media/MediaRecorder.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-23T11:20:32.320

在 SurfaceCreated（SurfaceHolder 支架）中添加以下内容：

```
CamcorderProfile camcorderProfile = CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);  //get your own profile   
 Camera.Parameters parameters = mCamera.getParameters();  
 parameters.setPreviewSize(camcorderProfile.videoFrameWidth,camcorderProfile.videoFrameHeight);   
 mCamera.setParameters(parameters); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-07-12T06:34:15.200

遇到同样的错误：*有时我的 MediaRecorder 因错误“停止失败”而崩溃，有时它工作正常。*添加这个解决了我的问题：

```
@Override
public void onStop() {
    super.onStop();
    if (mRecorder != null) {
        mRecorder.release();
        mRecorder = null;
    }
} 
```

# mysql - CREATE TABLE LIKE A1 as A2

> ID：10147565
> 
> 赞同：64
> 
> 时间：2012-04-13T20:02:58.047
> 
> 标签：mysql

我想创建一个具有旧表属性且没有重复项的新表。我想做这样的事情：

```
CREATE TABLE New_Users  LIKE Old_Users, 
AS
(SELECT * FROM Old_Users GROUP BY ID) ; 
```

但上述方法不起作用。任何人都可以修改它来工作吗？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-07-11T13:18:39.750

你的尝试并没有那么糟糕。你必须这样做`LIKE`，是的。

在[手册](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)中它说：

> 使用 LIKE 根据另一个表的定义创建一个空表，包括在原始表中定义的任何列属性和索引。

所以你也是：

```
CREATE TABLE New_Users  LIKE Old_Users; 
```

然后你插入

```
INSERT INTO New_Users SELECT * FROM Old_Users GROUP BY ID; 
```

但是你不能在一个声明中做到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T20:09:40.807

基于[http://dev.mysql.com/doc/refman/5.0/en/create-table-select.html](http://dev.mysql.com/doc/refman/5.0/en/create-table-select.html)

关于什么：

```
Create Table New_Users Select * from Old_Users Where 1=2; 
```

如果这不起作用，只需选择一行并在创建后截断：

```
Create table New_Users select * from Old_Users Limit 1;
Truncate Table New_Users; 
```

编辑：

我注意到您在下面关于需要索引等的评论。尝试：

```
show create table old_users;
#copy the output ddl statement into a text editor and change the table name to new_users
#run the new query
insert into new_users(id,name...) select id,name,... form old_users group by id; 
```

那应该这样做。看来您这样做是为了消除重复项？在这种情况下，您可能希望在 id 上放置一个唯一索引。如果它是主键，则应该已经存在。您可以：

```
#make primary key
alter table new_users add primary key (id);
#make unique
create unique index idx_new_users_id_uniq on new_users (id); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T20:12:31.970

对于 MySQL，您可以这样做：

```
CREATE TABLE New_Users   SELECT * FROM Old_Users group by ID; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-21T14:16:00.780

CREATE TABLE new_table LIKE old_table;

或者你可以用这个

CREATE TABLE new_table as SELECT * FROM old_table WHERE 1 GROUP BY [删除重复项的列]；

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-18T14:33:33.667

您可以使用以下查询来创建表并将不同的值插入到该表中：

```
Select Distinct Column1, Column2, Column3 into New_Users from Old_Users 
```

# php - Facebook 集成：链接到本地 站点配置文件页面？

> ID：10147566
> 
> 赞同：0
> 
> 时间：2012-04-13T20:03:01.243
> 
> 标签：php, facebook, api

我需要做一个小型会员网站，用户可以在其中对一些文章发表评论。为此，我想使用 Facebook 评论插件。但问题是，从评论中，用户名链接到他的 facebook 个人资料，我想将其链接到本地​​个人资料页面。例如，我想连接到 mysite.com/username，而不是链接到 facebook.com/username。有没有可能实现这一目标？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T03:51:05.727

带有 Buddypress 选项的 wordpress 网站怎么样？[在http://wordpress.org/extend/plugins/buddypress/](http://wordpress.org/extend/plugins/buddypress/)阅读更多内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:04:18.160

不，您无法调整 Facebook 评论小部件的任何内容。如果需要，您需要实现自己的评论系统。

# jquery - 如果值长度 < n，则使用 jquery 恢复初始 textarea 值

> ID：10147567
> 
> 赞同：1
> 
> 时间：2012-04-13T20:03:09.487
> 
> 标签：jquery, focus, textarea, blur

我是 jquery 和 javascript 编码的新手，我尝试编写一个函数，如果其值的长度小于“n”个字符，则在 textarea 上恢复初始值。它不起作用。你能解释一下怎么做吗？

这是代码：

```
$("textarea").focus(function() {
    var text = $(this).val();
    $(this).val('');
    $(this).blur(function() {
        if($(this).val().lenght<20)
        {
            $(this).val(text);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T20:12:20.030

虽然效率不高，但这可以完成工作：

```
var text='';

$("textarea").focus(function() {
    text = $(this).val();
});

$("textarea").blur(function() {
    if($(this).val().length<20)
    {
        $(this).val(text);
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T20:07:15.020

`lenght`应该是`length`。

一旦你解决了这个问题，你会发现你`blur`每次都重新附加事件但从不删除它，这意味着你将附加大量的侦听器。尝试`one`或更通用的`blur`只附加一次。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:07:04.010

您需要创建一个具有本地范围的闭包并传入您的变量，以便它在该范围内是本地的：

```
$("textarea").focus(function() {
    var text = $(this).val();
    $(this).val('');
    (function(initialText) {
        $(this).blur(function() {
            if($(this).val().length < 20)
            {
                $(this).val(initialText);
            }
        });
    })(text);
}); 
```

如果您不使用闭包创建这样的本地范围，那么您传递给的事件处理程序`.blur()`将不知道是什么`text`，因为它不在此函数的范围内。

阅读更多关于 js 闭包的信息，例如：http: [//jibbering.com/faq/notes/closures/](http://jibbering.com/faq/notes/closures/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T20:07:11.473

对于这种情况，您可以使用`.data`函数。见下文，

```
$("textarea").one('focus', function() {      //will be executed once
    $(this).data('init_val', $(this).val()); //set data with initial value
    $(this).val('');                         //clear the textarea
}).blur(function() {
    if($(this).val().length<20) {            //Check if entered text val is < 20
       $(this).val($(this).data('init_val'));//If yes, update with initial val
    }
}); 
```

# javascript - Javascript导航菜单仅显示在某些Div中

> ID：10147571
> 
> 赞同：0
> 
> 时间：2012-04-13T20:03:29.623
> 
> 标签：javascript, html, css, navigation, fixed

我正在创建一个带有固定导航菜单的单页寻呼机。我希望一个子导航出现在滚动过去某个 div 上。那么是否有可能只为页面的一部分设置一个固定的子导航，所以说有 10 个 div。来自 2-5 的 div 需要弹出子导航，然后在 div 5 之后消失。任何示例、代码或文章都会非常有帮助！先感谢您！

*   迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:17:11.720

这应该是您最需要的。

[http://jsfiddle.net/XyxkW/](http://jsfiddle.net/XyxkW/)

运行它时，向下滚动到第五个 div，当它到达窗口顶部以及滚动超过 div 5 的上方和下方时，您将看到“子导航”淡入淡出。您可以替换任何值与您需要的任何值。

# c# - 如何让 C# Windows 程序中的对话框看起来与 Visual Studio 2010 中的对话框不同？

> ID：10147574
> 
> 赞同：0
> 
> 时间：2012-04-13T20:03:55.190
> 
> 标签：c#, winforms, styles

Visual Studio 2010 的子对话框具有完全不同的视觉风格，您可以在程序中四处移动和调整大小。

如何在我自己的程序中为对话框和控件创建和实现自定义样式？我需要手动重绘它们还是有一些更简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:08:22.070

仅供参考：

Visual Studio 2010 是用 WPF 编写的：[关于 VS2010 及其构建方式的博客](http://blogs.msdn.com/b/visualstudio/archive/2010/02/16/wpf-in-visual-studio-2010-part-1.aspx) 这几乎意味着他们可以完全控制 IDE 的完整外观。有许多来自不同公司的控制包可以为您提供相似的外观、感觉和能力，实际上也有一些免费的。

我会在[Codeplex](http://www.codeplex.com/)上查找与 WPF（控件等）相关的内容，此外还有诸如[Telerik](http://www.telerik.com/products/wpf/overview.aspx)之类的商业网站。还有很多其他商业的，只是谷歌为他们，你应该找到一个很好的数量。我希望这有助于为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:08:31.770

用于[`Form.FormBorderStyle`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.formborderstyle.aspx)设置窗口边框/标题的样式。

`yourForm.FormBorderStyle = System.Windows.Forms.FormBorderStyle.SizableToolWindow;`如果您想要工具窗口样式，请设置。

如果您也需要对接支持，您可能需要使用像[DockPanel Suite](http://sourceforge.net/projects/dockpanelsuite/)这样的库。

# java - android drawPoint() 不画任何东西

> ID：10147578
> 
> 赞同：1
> 
> 时间：2012-04-13T20:04:11.980
> 
> 标签：java, android, graphics2d, ondraw

我是一名业余程序员，一直在玩android开发。我目前正在尝试生成分形高度图。为了测试地图是否正确生成，我需要能够将地图绘制到屏幕上。这就是我遇到麻烦的地方。

这是我的 MainActivity、DrawMap 类（我的 onDraw() 所在的位置）和 CanvasThread() 类的代码。

主要活动：

```
package com.psstudios.HMG;

import android.app.*;
import android.os.*;
import android.view.*;
import android.widget.*;
import android.view.View.OnClickListener;
import android.util.Log;

public class MainActivity extends Activity
{
/** Called when the activity is first created. */
Button Startgen = null;
Boolean run=true;

private void log(String text) {
    Log.d("heightmap",text);
    AppendLog app = new AppendLog(text);
}

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.main);

    Startgen = (Button) findViewById(R.id.startgen);

    log("loop");
    Startgen.setOnClickListener(new  View.OnClickListener(){
        public void onClick(View v){
            log("Starting world generation");
            WorldGen world=new WorldGen(200,200);
            log("World generation complete, drawing heightmap");
            setContentView(new DrawMap(MainActivity.this, world));
            log("Went too far");
        }
    });
    run=false;

}   

} 
```

绘制地图：

```
package com.psstudios.HMG;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Bitmap;
import android.graphics.Bitmap.*;
import android.graphics.Paint;
import android.graphics.Color;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.View;

import android.util.Log;
import android.util.*;

public class DrawMap extends SurfaceView implements SurfaceHolder.Callback
{
int drawtype=1;             //variable for which type of map to draw 
Bitmap drawbitmap=null;
CanvasThread canvasThread=null;
Boolean run= true;

int Worldx=200;
int Worldy=200;

WorldGen _world=null;

public void log(String text){
    Log.d("Heightmap", text);
    AppendLog app = new AppendLog(text);    
}

public void init(){
    log("init();");
    canvasThread=new CanvasThread(getHolder(), this);
    setFocusable(true);
    log("Post-CanvasThread");
}

public DrawMap(Context context){
    super(context);
    log("DrawMap(Context context)");
    getHolder().addCallback(this);
    init();
}

public DrawMap(Context context, AttributeSet attrs) {
    super(context, attrs);
    log("DrawMap(Context context, AttributeSet attrs)");
    getHolder().addCallback(this);
    init();

}

public DrawMap(Context context,WorldGen world){
    super(context); 
    log("DrawMap(Context context, WorldGen world)");
    getHolder().addCallback(this);
    _world=world;
    init();
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format,int width, int height){
    log("surfaceChanged()");
}
@Override
public void surfaceCreated(SurfaceHolder holder){
    log("Surface Created");
    canvasThread.setRunning(true);
    canvasThread.run();
}
@Override
public void surfaceDestroyed(SurfaceHolder holder){
    log("Surface Destroyed");
    Boolean retry = true;
    canvasThread.setRunning(false);
    while(retry){
        try {
            canvasThread.join();
            retry=false;
        } catch (InterruptedException e) {
            //we will try again and again
        }
    }
}

@Override
public void onDraw(Canvas canvas){
    log("onDraw()");
    Paint paint = new Paint();
    Paint paint2 = new Paint();
    //canvas.drawColor(Color.BLACK);

    paint.setColor(Color.WHITE);
    paint.setStrokeWidth(10);
    paint2.setColor(Color.BLUE);

    for(int x=0; x<Worldx-1; x++){
        for(int y=0; y<Worldy-1; y++){
            //log(x + " : " + y);
            canvas.drawPoint(x+20, y+20, paint);
            canvas.drawPoint(x+220, y+220, paint2);
        }
    }
}
} 
```

画布线程：

```
package com.psstudios.HMG;

import android.graphics.Canvas;
import android.view.*;
import android.util.Log;

public class CanvasThread extends Thread
{
    private SurfaceHolder _surfaceHolder;
    private DrawMap _drawMap;
    private Boolean _run = false;

    private void log(String text){
        Log.d("HeightmapGen",text);
        AppendLog app = new AppendLog(text);
    }

    public CanvasThread(SurfaceHolder surfaceHolder, DrawMap drawMap){
        _surfaceHolder=surfaceHolder;
        _drawMap=drawMap;
        log("CanvasThread()");
    }

    public void setRunning(Boolean run){
        log("setRunning()");
        _run=run;
    }

    @Override
    public void run() {
        log("run()");
        Canvas c;
        while(_run){
            c=null;
            try{
                c=_surfaceHolder.lockCanvas(null);
                synchronized (_surfaceHolder) {
                    _drawMap.onDraw(c);
                }
            } finally {
                if(c != null){
                    _surfaceHolder.unlockCanvasAndPost(c);
                }
            }
        }
    }
} 
```

该程序使其进入 onDraw(); 函数，并通过 for 循环运行，但屏幕上没有显示任何内容。我想我错过了一些非常愚蠢的东西，但我似乎无法弄清楚出了什么问题。

提前感谢你们可以给我的任何帮助。

# msbuild - MSDeploy 错误：找不到库 DbSqlPackage

> ID：10147582
> 
> 赞同：2
> 
> 时间：2012-04-13T20:04:20.103
> 
> 标签：msbuild, msdeploy

注意：我是一个完全的 MSDeploy 菜鸟。事实上，这是我第一次尝试创建 msbuild 脚本，而且我最近才开始研究 msdeploy。

现在已经解决了，我正在编写一个构建脚本来编译和打包我的 ASP.Net webforms 应用程序。该脚本可以编译解决方案，但是，尝试打包时出现以下错误：

**Microsoft.Web.Deployment.DeploymentException：无法加载库“Microsoft.Data.Tools.Schema.DbSqlPackage，版本=10.3.0.0，...”。**

我在网上搜索过，但似乎找不到此问题的任何实例（特定于丢失的 DbSqlPackage.dll）。我认为这与打包和部署解决方案中引用的数据库的能力有关。

我正在使用 MSDeploy V3 和 MSBuild v4.0.30319。.build 文件的 Package 目标如下：

```
<Target Name="Package" DependsOnTargets="Compile">
<PropertyGroup>
  <PackageDir>%(PackageFile.RootDir)%(PackageFile.Directory)</PackageDir>
  <Source>%(Website.FullPath)</Source>
  <Destination>%(PackageFile.FullPath)</Destination>
</PropertyGroup>
<MakeDir Directories="$(PackageDir)" />
<Exec Command='"@(MsDeploy)" -verb:sync -source:iisApp="$(Source)" -dest:package="$(Destination)"' /> 
```

我不想包含任何数据库，如果有一个可以设置为一起绕过错误的开关，我会很高兴。但是，如果有人知道如何修复而不只是避免问题，那将是首选。

提前致谢。

文尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T06:08:00.397

我试图修复 MS Web Deploy 的安装，但没有骰子。除了，我的过滤器术语“web deploy”在我安装的程序中出现了另一个项目：“Web Deploy dbSqlPackage Provider”（或类似的东西......它已经晚了）。删除此程序后构建/打包完成。

我只花了半天时间就找到了这个解决方案……哦，好吧！

# regex - 正则表达式 (Regex)

> ID：10147587
> 
> 赞同：1
> 
> 时间：2012-04-13T20:04:44.737
> 
> 标签：regex, notepad++

我需要在我的 Notepad++ 中重新格式化一个文本文件，我有这样的文本：

> 这是一些示例文本。这是一些示例文本。这是一些示例文本。
> - 这是一些示例文本。
> - 这是一些示例文本。
> - 这是一些示例文本。
> - 这是一些示例文本。

因此，正如您在上面的文本中看到的那样，有两种类型的“-”前面的文本，一种在“-”之后有空格，另一种没有，我只需要找到没有空格的，并将其添加到“-”和“文本”

如果我在下面运行一段代码

-[A-Za-z0-9]

它在它之后找到破折号和第一个字母，这没有用，因为当我替换文本时它会更改第一个字母，这总是不同的（取决于所写的内容）所以我需要找到它并只选择“-”和然后用“-”替换它，除非有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:22:02.773

出于演示目的：

```
Find what: -([A-Za-z0-9])(.+)
Replace with: - \1\2 
```

括号表示捕获组。在*替换为*行中，您使用反斜杠和组数来添加它。

也就是说，您真正想要匹配的是一个 NOT 组，例如`-([^\s])`（匹配破折号后不紧跟空格的匹配）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:23:53.170

搜索

```
-([^ ]) 
```

并替换为

```
- \1 
```

`[^ ]`是一个否定字符类，匹配除空格以外的所有字符。由于模式周围的`\1`括号，该字符被存储在其中。`()`

# c# - C# 从 DataTable 或 BindingSource 获取值

> ID：10147588
> 
> 赞同：0
> 
> 时间：2012-04-13T20:04:46.737
> 
> 标签：c#, binding, datatable, datarow, bindingsource

我有一个需要从数据库中检索值的标签。

我能够查询数据库，但如何从 DataTable 中提取值并将它们放在适当的标签中

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:09:17.533

如何从第一行和名为“MyFirstColumn”的列中检索值的示例：

```
label1.Text = myDataTable.Rows[0]["MyFirstColumn"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:09:44.750

在 DataTable 中，您有行和列。要选择特定单元格，您需要执行以下操作：

```
label1.Text = dataTable[0][0]; 
```

这会将 label1 文本设置为第 0 行第 0 列值。

要遍历每一行，请使用：

```
foreach(DataRow row in dataTable.Rows)
{
Console.WriteLine(row["ColumnName1"]);
Console.WriteLine(row["ColumnName2"]);
Console.WriteLine(row["ColumnName3"]);
Console.WriteLine(row["ColumnName4"]);
} 
```

这将针对每一行打印列的值。在此代码中，您需要将列名的字符串（例如 ColumnName1）替换为您的列名

# javascript - 在 IE8 中调试 MooTools 滑块“SlideItMoo”

> ID：10147589
> 
> 赞同：0
> 
> 时间：2012-04-13T20:04:47.357
> 
> 标签：javascript, internet-explorer-8, mootools, slider

我在让这个 mooTools 滑块脚本（SlideItMoo）与 IE8 一起使用时遇到问题。它在所有其他浏览器中都可以正常工作，但是 IE8 会在下面的第 3 行中显示“对象不支持此属性或方法”的错误。任何见解或帮助将不胜感激！

```
initialize: function(options){
        this.setOptions(options);
ERROR>> this.elements = $(this.options.thumbsContainer).getElements(this.options.itemsSelector);
        this.totalElements = this.elements.length;
        if( this.totalElements <= this.options.itemsVisible ) return;
        // width of thumbsContainer children
        this.elementWidth = this.options.itemWidth || this.elements[0].getSize().x;
        this.currentElement = 0;
        this.direction = this.options.direction;
        this.autoSlideTotal = this.options.autoSlide + this.options.duration;
        this.begin();
    }, 
```

这是供参考的完整脚本：

```
var SlideItMoo = new Class({

Implements: [Options],
options: {
    overallContainer: null,
    elementScrolled: null,
    thumbsContainer: null,      
    itemsVisible:5,
    elemsSlide: null,
    itemsSelector: null,
    itemWidth: null,
    showControls:1,
    transition: Fx.Transitions.linear,
    duration: 800,
    direction: 1,
    autoSlide: false,
    mouseWheelNav: false
},

initialize: function(options){
    this.setOptions(options);
    this.elements = $(this.options.thumbsContainer).getElements(this.options.itemsSelector);
    this.totalElements = this.elements.length;
    if( this.totalElements <= this.options.itemsVisible ) return;
    this.elementWidth = this.options.itemWidth || this.elements[0].getSize().x;
    this.currentElement = 0;
    this.direction = this.options.direction;
    this.autoSlideTotal = this.options.autoSlide + this.options.duration;
    this.begin();
},

begin: function(){  
    this.setContainersSize();

    this.myFx = new Fx.Morph(this.options.thumbsContainer, { 
        wait: true, 
        transition: this.options.transition,
        duration: this.options.duration
    });     

    this.addControls();
    if( this.options.mouseWheelNav && !this.options.autoSlide ){
        $(this.options.thumbsContainer).addEvent('mousewheel', function(ev){
            new Event(ev).stop();
            this.slide(-ev.wheel);                              
        }.bind(this));
    }

    if( this.options.autoSlide )
        this.startAutoSlide();      
},

setContainersSize: function(){
    $(this.options.overallContainer).set({
        styles:{
            'width': this.options.itemsVisible * this.elementWidth + 50 * this.options.showControls
        }
    });
    $(this.options.elementScrolled).set({
        styles:{
            'width': this.options.itemsVisible * this.elementWidth
        }
    });
    $(this.options.thumbsContainer).set({
        styles:{
            'width': this.totalElements * (this.elementWidth + 10)  
        }
    });
},

addControls: function(){
    if( !this.options.showControls ) return;

    this.fwd = new Element('div', {
        'class': 'SlideItMoo_forward',
        'events':{
            'click':this.slide.pass(1, this)
        }
    });
    this.bkwd = new Element('div', {
        'class': 'SlideItMoo_back',
        'events':{
            'click': this.slide.pass(-1, this)
        }
    });
    $(this.options.overallContainer).adopt(this.fwd, this.bkwd);        
},

slide: function( direction ){

    if(this.started) return;
    this.direction = direction;
    var currentIndex = this.currentIndex();

    if( this.options.elemsSlide && this.options.elemsSlide>1 && this.endingElem==null ){
        this.endingElem = this.currentElement;          
        for(var i = 0; i < this.options.elemsSlide; i++ ){
            this.endingElem += direction;
            if( this.endingElem >= this.totalElements ) this.endingElem = 0;
            if( this.endingElem < 0 ) this.endingElem = this.totalElements-1;
        }
    }   

    if( this.direction == -1 ){
        this.rearange();
        $(this.options.thumbsContainer).setStyle('margin-left', -this.elementWidth);            
    }
    this.started = true;
    this.myFx.start({ 
        'margin-left': this.direction == 1 ? -this.elementWidth : 0 
    }).chain( function(){           
        this.rearange(true);            
        if(this.options.elemsSlide){
            if( this.endingElem !== this.currentElement ) this.slide(this.direction);
            else this.endingElem=null;  
        }
    }.bind(this)  );
},

rearange: function( rerun ){

    if(rerun) this.started = false;
    if( rerun && this.direction == -1 ) {
        return;
    }
    this.currentElement = this.currentIndex( this.direction );
    //$('debug').innerHTML+= this.currentElement+'<br>';

    $(this.options.thumbsContainer).setStyle('margin-left',0);

    if( this.currentElement == 1 && this.direction == 1 ){
        this.elements[0].injectAfter(this.elements[this.totalElements-1]);
        return;
    }
    if( (this.currentElement == 0 && this.direction ==1) || (this.direction==-1 && this.currentElement == this.totalElements-1) ){
        this.rearrangeElement( this.elements.getLast(), this.direction == 1 ? this.elements[this.totalElements-2] : this.elements[0]);
        return;
    }

    if( this.direction == 1 ){
        this.rearrangeElement( this.elements[this.currentElement-1], this.elements[this.currentElement-2]);
    }
    else{
        this.rearrangeElement( this.elements[this.currentElement], this.elements[this.currentElement+1]);
    }       
},

rearrangeElement: function( element , indicator ){
    this.direction == 1 ? element.injectAfter(indicator) : element.injectBefore(indicator);
},

currentIndex: function(){
    var elemIndex = null;
    switch( this.direction ){
        case 1:
            elemIndex = this.currentElement >= this.totalElements-1 ? 0 : this.currentElement + this.direction;             
        break;
        case -1:
            elemIndex = this.currentElement == 0 ? this.totalElements - 1 : this.currentElement + this.direction;
        break;
    }
    return elemIndex;
},

startAutoSlide: function(){
    this.startIt = this.slide.bind(this).pass(this.direction||1);
    this.autoSlide = this.startIt.periodical(this.autoSlideTotal, this);
    this.elements.addEvents({
        'mouseover':function(){
            $clear(this.autoSlide);                     
        }.bind(this),
        'mouseout':function(){
            this.autoSlide = this.startIt.periodical(this.autoSlideTotal, this);
        }.bind(this)
    })
} 
```

})

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T03:15:28.640

您可能会发现选择器没有返回有效的元素。在假设之前尝试测试变量是否已设置。

```
this.elements = $(this.options.thumbsContainer);
if(this.elements)this.elements.getElements(this.options.itemsSelector); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T08:44:47.730

它说 Object 不支持`this`属性或方法，而不是 this =>`property`或`mothod`，它是指`this`或所选元素所在的功能范围`undefined`。

# .net - 带有 DOCTYPE 声明的 XPathDocument 行为

> ID：10147592
> 
> 赞同：1
> 
> 时间：2012-04-13T20:05:10.077
> 
> 标签：.net, xml-parsing, doctype, xpathdocument

我使用[XPathDocument](http://msdn.microsoft.com/en-us/library/system.xml.xpath.xpathdocument.aspx)解析 XML 文件，但如果有[doctype 声明](http://www.w3schools.com/tags/tag_doctype.asp)，当我初始化 XPathDocument 类的新实例时，将包含 XML 数据的文件路径传递给它的构造函数，我的应用程序尝试连接到互联网（可能是为了验证 XML 数据的正确性）并且长时间保持阻塞状态。如果我从 XML 文件中删除 doctype 声明，则不会发生这种情况。[XmlDocument.Load](http://msdn.microsoft.com/en-us/library/875kz807.aspx)方法具有相同的行为。我该如何解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-14T11:23:43.773

如果使用将 XmlReader 作为其输入的 XPathDocument 构造函数，则可以在 XmlReader 上设置[XmlResolver](http://msdn.microsoft.com/en-us/library/system.xml.xmlurlresolver.aspx)。然后，您可以设置解析器以识别 SVG 文档类型并提供 SVG DTD 的本地副本。

同样，也可以在调用 Load 方法之前给 XmlDocument 一个 XmlResolver。

# ruby - 如何构建一个允许在安装时链接不同本机库的 gem？

> ID：10147597
> 
> 赞同：0
> 
> 时间：2012-04-13T20:05:47.970
> 
> 标签：ruby, rubygems, dependencies, native

Nokogiri 通过在安装命令中指定库来实现这一点：

```
gem install nokogiri -- --with-xml2-lib=/home/joe/builds/lib 
                    --with-xml2-include=/home/joe/builds/include/libxml2 
                    --with-xslt-lib=/home/joe/builds/lib 
                    --with-xslt-include=/home/joe/builds/include 
```

我对 Nokogiri 的源代码做了一些挖掘，试图找出它们如何允许这些选项从命令传递到实际的构建/安装。

我注意到 Rake::ExtensionTask 和 mini_portile 的使用，但是它们的使用似乎仅限于在其代码中在 Windows 系统上进行交叉编译。

我可以在我的 gem 中添加一些代码来允许用户在安装时指定他们想要链接的库吗？nokogiri 是如何允许这样做的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:42:23.287

这是使用库的[`dir_config`](http://ruby-doc.org/stdlib-1.9.3/libdoc/mkmf/rdoc/Object.html#method-i-dir_config)方法[`mkmf`](http://ruby-doc.org/stdlib-1.9.3/libdoc/mkmf/rdoc/index.html)。

该[`gem install`](http://guides.rubygems.org/command-reference/#gem_install)命令使用后面的任何参数`--`作为 build 命令的参数，因此它们会传递给您的`extconf.rb`.

请注意，您仍然需要使用[`have_library`](http://ruby-doc.org/stdlib-1.9.3/libdoc/mkmf/rdoc/Object.html#method-i-have_library)or[`find_library`](http://ruby-doc.org/stdlib-1.9.3/libdoc/mkmf/rdoc/Object.html#method-i-find_library)才能实际链接到库。

# mysql - 一个属性是外键。外键可以引用三个不同的表吗

> ID：10147598
> 
> 赞同：-1
> 
> 时间：2012-04-13T20:05:55.987
> 
> 标签：mysql, sql, database

我正在考虑数据库设计。我有一个表，其列是外键。我希望外键可以引用到三个不同表的列。可能吗？我将如何为此编写创建表查询？示例三表：Movie、Book、TV.. 每一个都有一个称为 URL 的列。另一个表 People 的列 URL 可以引用三个表中任何一个的 URL 这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:11:37.940

如果你需要这样的东西，这应该表明你的设计有问题。

处理这种性质的最佳方法是制作一张`URL`表格，并将所有`URL`引用指向该表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:08:50.807

为此，您可以使用两列：一列包含另一表中行的 id，另一列包含项目的类型（例如，电影、书籍、电视）。

要回答您的问题，是的，这是可能的，但只是数量还不够，因为不同表中可能有多行具有相同的 id。

# java - 如何在没有尾随/前导空格或空值的情况下使用 String.split() 拆分字符串？

> ID：10147599
> 
> 赞同：5
> 
> 时间：2012-04-13T20:06:13.617
> 
> 标签：java, regex

如何在没有尾随/前导空格或空值的情况下使用 String.split() 拆分字符串？

假设我有字符串，例如`" ol-ga@assf-rrt.ru ; sdf.an@dfgdfg.com; sdfsdf@fdfd.erff, privet@vvv.fff "`.

我曾经通过调用来拆分它，`String.split("[;, ]+")`但缺点是你会得到需要在额外循环中忽略的空数组元素。

我还尝试`String.split("\\s*[;,]+\\s*")`了不提供空元素但在第一封电子邮件中保留前导空格并在最后一封电子邮件中保留尾随空格的方法，以便生成的数组看起来像因为这些电子邮件旁边没有逗号或分号：

```
[0] = {java.lang.String@97}"  ol-ga@assf-rrt.ru"
[1] = {java.lang.String@98}"sdf.an@dfgdfg.com"
[2] = {java.lang.String@99}"sdfsdf@fdfd.erff"
[3] = {java.lang.String@100}"privet@vvv.fff  " 
```

**是否可以仅使用正则表达式和拆分（不使用对 String.trim() 的额外调用）**来获取“干净”电子邮件的数组？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T20:13:14.423

```
String input = " ol-ga@assf-rrt.ru ; sdf.an@dfgdfg.com; sdfsdf@fdfd.erff, privet@vvv.fff ";
input = input.replace(" ", "");
String[] emailList = input.split("[;,]+"); 
```

我假设你很确定你的输入字符串只包含电子邮件地址，只需要修剪/重新格式化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T20:10:06.933

像这样：

```
String.split("\\s*(;|,|\\s+)\\s*"); 
```

但它在开头给出了一个空字符串（无法仅使用拆分来摆脱它）。

因此，只有这样的事情才能有所帮助：

```
String.trim().split("\\s*(;|,)\\s*"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T21:21:04.963

只是把它扔在那里：如果你使用 Guava，[`Splitter`](http://code.google.com/p/guava-libraries/wiki/StringsExplained#Splitter)这会比使用正则表达式更简单。

```
Iterable<String> splitStrings = Splitter
 .onPattern("[;,]+")
 .trimResults()
 .split(string); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T20:09:51.370

尝试`String.trim()`在拆分结果中使用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T20:12:07.733

首先，正如 DGomez 指出的那样：

```
 String.trim() 
```

在输入字符串中使用它，这样前导和尾随空格就消失了。

现在，使用这个正则表达式来拆分电子邮件：

```
 String.split("[,;]+\\s*") 
```

我认为应该这样做。

# objective-c - 与自定义 UITableViewCell 混淆的语法

> ID：10147604
> 
> 赞同：1
> 
> 时间：2012-04-13T20:06:29.900
> 
> 标签：objective-c, uitableview

我找到了自定义 UITableViewCell 的代码：

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) 
{
    NSArray* views = [[NSBundle mainBundle] loadNibNamed:@"MyCustomCell" owner:nil options:nil];

    MyCustomCell *customCell = [[MyCustomCell alloc]init];

    MyCustomCell.cellImage = [arrayImages objectAtIndex:indexPath.row];

    for (UIView *view in views) 
    {
        if([view isKindOfClass:[UITableViewCell class]])
        {                
            cell = (MyCustomCell *)view;

        }
    }
} 
```

我无法弄清楚这个特定部分是如何工作的：`cell = (MyCustomCell *)view;`

我想为我之前创建的 MyCustomCell (customCell) 实例更改它...我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:16:05.540

`UITableViewCell`有时人们会使用 Interface Builder创建自定义。这个人只是加载他们的自定义`UITableViewCell`子类并将其分配给单元格。这行：`cell = (MyCustomCell *)view;`presumable 有效，因为`MyCustomCell`它是`UITableViewCell`.

这只是另一种创建自定义单元格的技术，有时您会看到使用标签完成类似的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:09:16.370

首先，它遍历一个`UIView`s 或`UIView`子类的集合。它将每次迭代的变量存储到一个名为`view`.

然后它只是将当前`view`变量转换为`MyCustomCell`. 大概是`MyCustomCell`extends `UIView`，所以这是合法的。

如果您想使用特定于 的方法，这很有用`MyCustomCell`，因为 Xcode 不会知道它们存在，如果您没有显式[类型](http://en.wikipedia.org/wiki/Typecasting)转换您的对象。

# ruby - 如何恢复到 Mac OSX Lion 服务器上的默认 Ruby 安装

> ID：10147606
> 
> 赞同：1
> 
> 时间：2012-04-13T20:06:51.150
> 
> 标签：ruby, rubygems, osx-lion

我按照 Redmine 网站上的安装指南在我的 OSX Lion 服务器上安装了 Redmine。它告诉我更新/安装一些 RubyGems。Redmine 的安装很顺利，但该程序杀死了我的配置文件管理器和 Wiki 服务。

在网络上环顾四周，我找到了 Apple 支持网页[http://support.apple.com/kb/TS4042](http://support.apple.com/kb/TS4042)

基本上它说不要更新或安装 Ruby Gems，因为它会导致问题，但如果您已经更新或安装了任何 Ruby Gem，它不会给出解决方案。

有没有办法在不完全重新安装系统的情况下恢复到 OSX Lion Server (10.7.3) 上的默认 Ruby 安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:44:12.417

I'm looking for a solution for this same exact issue as well. I'll post anything additional that I find.

So, in addition wikid/collabd not working, I was also seeing gobs of error messages in /var/log/system.log from sandboxd regarding ruby:

```
Apr 17 11:34:07 reddwarf sandboxd[3890] ([3887]): ruby(3887) deny 
   file-read-metadata /private/var/folders/zz/zyxvpxvq6csfxvn_n00000vm00006x 
```

I found a thread in Apple Communities (https://discussions.apple.com/thread/3216408?start=0&tstart=0) that showed a possible solution:

> ```
> Can you uninstall the newer version of Rack, 1.2.2?   
>     sudo gem uninstall rack
>     sudo gem install rack --version 1.2.1 
> This is a bug we're aware of. 
> ```

I decided to do this since I had originally got mired in this mess after updating ruby. First off, stop the wiki server...

```
sh-3.2# serveradmin stop wiki
wiki:state = "STOPPED" 
```

I found I had multiple versions of rack installed (1.4.1 and 1.3.5), but 1.2.1 did not show as installed, which evidently is the version of this gem that wikid depends on.

```
sh-3.2# gem uninstall rack

Select gem to uninstall:
 1\. rack-1.3.5
 2\. rack-1.4.1
 3\. All versions
> 2 
```

I uninstalled both of these, trying to start the wiki server after each was removed. The wiki was still not working up to this point. Then I installed 1.2.1...

```
sh-3.2# gem install rack --version 1.2.1
Successfully installed rack-1.2.1
1 gem installed
Installing ri documentation for rack-1.2.1...
Installing RDoc documentation for rack-1.2.1... 
```

After that, another attempt at starting the wiki...

```
sh-3.2# serveradmin start wiki
wiki:state = "STARTING"
sh-3.2# serveradmin status wiki
wiki:state = "RUNNING" 
```

And guess what? It actually worked! My wiki is now functional again.

# php - PHP中的authz svn文件解析器

> ID：10147608
> 
> 赞同：0
> 
> 时间：2012-04-13T20:06:55.847
> 
> 标签：php, linux, svn

我在 PHP 中创建 Web 界面来管理 svn 存储库和 svn 用户。我需要生成[dav_svn.authz](http://davidwinter.me/articles/2006/03/03/access-control-for-subversion-with-apache2-and-authz)文件，您可以在其中将某些用户和权限分配给 svn 存储库。是否有任何现有的 PHP 库可以为我做到这一点，或者我必须自己编写？我的目标不仅是为其用户添加新的存储库，而且还要修改任何现有的存储库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T18:27:49.740

它看起来像标准的 .ini 语法，因此您可能可以使用 [parse_ini_file()](http://php.net/manual/en/function.parse-ini-file.php "parse_ini_file()")函数。

# knockout.js - 使用 Knockout，为什么我的计算的 observables 数组没有更新？

> ID：10147610
> 
> 赞同：0
> 
> 时间：2012-04-13T20:06:57.450
> 
> 标签：knockout.js

我有一个值表，我需要对行和列进行总计。行总计很简单`computed observable`并且工作正常，但`computed observables`用于存储列总计的数组不会更新。

在我的示例中，当更改网格中的值时，monthTotals 数组不会更新。

为什么这些更改不更新？我应该以不同的方式做这件事吗？

[http://jsfiddle.net/MYMtH/5/](http://jsfiddle.net/MYMtH/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:06:14.023

monthNumber in 的值`val += parseFloat(self.resourceCategories[i].monthAmounts[monthNumber].amount());`始终设置为其最后一个值 (11)，因为 computed 在事后评估，并使用为 monthNumber 设置的最后一个值。

这是一个更新的 jsfiddle，计算更改为需要一个月才能计算的常规函数​​：

[http://jsfiddle.net/MYMtH/7/](http://jsfiddle.net/MYMtH/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-14T14:36:38.273

Tuan 关于您当前使用 monthNumber 导致问题的原因是正确的。如果要保留当前样式，可以将 MonthTotal 封装在一个单独的对象中，该对象将保留计算重新计算时的月份编号：

[http://jsfiddle.net/jearles/MYMtH/8/](http://jsfiddle.net/jearles/MYMtH/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:18:55.680

**更新**

我又看了你的代码，想知道哪里出了问题。在 JS 小提琴中，这就是我所看到的：

![在此处输入图像描述](../Images/53ac19ce07ca4d9d71e7152967a1ff4e.png)

它应该显示什么？

你应该看看

[https://github.com/ericmbarnard/KoGrid](https://github.com/ericmbarnard/KoGrid)

# graphviz - 如何反转 Graphviz（点语言）图中每条边的方向？

> ID：10147619
> 
> 赞同：9
> 
> 时间：2012-04-13T20:07:18.473
> 
> 标签：graphviz, dot

我有一个用 Graphviz`dot`语言指定的有向图，例如

```
digraph G { A -> B [label="foo"]; A -> B [label="bar"]; B -> A; C; } 
```

我想自动将其处理成一个边缘反转的图形，即

```
digraph G { B -> A [label="foo"]; B -> A [label="bar"]; A -> B; C; } 
```

我想使用一个健壮的解决方案（即理解图形因此可能不使用的解决方案`sed`）来保留任何现有的边缘标签和其他属性。请注意，我不仅仅是在谈论`dot`用指向后的箭头来渲染我的图表；我真的需要一个边缘反转的图。（在这种情况下，我打算反转边缘，应用`prune`，然后再次反转边缘。）

如何反转 Graphviz ( `dot`-language) 图中每条边的方向？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-11T00:15:50.853

最简单的方法是包含一个图形级`dir`语句，您可以在其中反转箭头的方向。默认情况下，方向是`forward`。如果您在图表顶部反转它，则无需更改任何其他线，图表将按照您想要的方式显示。

你现在拥有的是这样的：

```
digraph G
{
    edge [dir="forward"]; /* implied */
    A -> B [label="foo"];
    A -> B [label="bar"];
    B -> A;
    C;
} 
```

你想要的是这样的：

```
digraph G
{
    edge [dir="back"]; /* note the change to this line */
    A -> B [label="foo"];
    A -> B [label="bar"];
    B -> A;
    C;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T20:13:36.240

到目前为止我想出的最好的是

```
BEG_G {
    graph_t g = graph($.name + " reversed", "D");
    int edge_id = 0;
}

N {
    clone(g, $);
}

E {
    node_t newHead = clone(g, $.head);
    node_t newTail = clone(g, $.tail);
    edge_t newEdge = edge_sg(g, newHead, newTail, edge_id);
    copyA($, newEdge);
    edge_id++;
}

END_G {
    $O = g;
} 
```

然后我用`gvpr`.

这确实为所有结果边缘添加了一个“关键”属性，但我不确定如何避免这种情况并仍然保留同一对节点之间的多个边缘。

当我这样做时`echo 'digraph G { A -> B [label="foo"]; A -> B [label="bar"]; B -> A; C; }' | gvpr -f reverseAllEdges.gvpr`，我得到：

```
digraph "G reversed" {
    A -> B [key=2];
    B -> A [key=0, label=foo];
    B -> A [key=1, label=bar];
    C;
} 
```

我不知道这将证明有多强大，但它看起来很有希望。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T11:45:23.603

Python 库 NetworkX 有一个有向多图类型 MultiDiGraph，它有一个[reverse](http://networkx.lanl.gov/reference/generated/networkx.MultiDiGraph.reverse.html) () 方法。它还使用 pydot 来加载和写入 DOT 文件。

# android - 如何相互更改日期选择器的按钮...？

> ID：10147621
> 
> 赞同：1
> 
> 时间：2012-04-13T20:07:33.420
> 
> 标签：android, datepicker

我有一个日期选择器，我想交换设置和取消按钮。

当我尝试时，两个按钮都只能用于设置。

如何避免这种情况和互换按钮。

这是我的代码。

```
@Override
    protected Dialog onCreateDialog(int id) {
        Calendar c = Calendar.getInstance();
        int cyear = c.get(Calendar.YEAR);
        int cmonth = c.get(Calendar.MONTH);
        int cday = c.get(Calendar.DAY_OF_MONTH);
        switch (id) {
        case DATE_DIALOG_ID:
            final DatePickerDialog datePicker = new DatePickerDialog(this,
                    mDateSetListener, cyear, cmonth, cday);
            datePicker.setButton(DatePickerDialog.BUTTON_NEGATIVE,
                    this.getString(R.string.set), datePicker);
            datePicker.setButton(DatePickerDialog.BUTTON_POSITIVE,
                    this.getString(R.string.cancel), datePicker);           
            return datePicker;
        }
        return null;
    }

    private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() {
        public void onDateSet(DatePicker view, int year, int monthOfYear,
                int dayOfMonth) {
            selectedDay = Integer.parseInt(String.valueOf(dayOfMonth));
            selectedMonth = Integer.parseInt(String.valueOf(monthOfYear + 1));
            selectedYear = Integer.parseInt(String.valueOf(year));
            String date_selected = String.valueOf(monthOfYear + 1) + " /"
                    + String.valueOf(dayOfMonth) + " /" + String.valueOf(year);

            textView.setText(date_selected);

        }
    }; 
```

提前致谢...！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:40:06.020

setButton() 方法的第三个参数是将处理按钮按下的侦听器 (DialogInterface.OnClickListener)。如果您将 DatePickerDialog 作为此参数传入，按下按钮将调用在 Dialog 初始化时附加的侦听器，在本例中为 mDateSetListener。这两个按钮都在调用您的“设置”函数，因为您将 datePicker 作为侦听器传递给两个按钮。尝试创建一个调用 datePicker.dismiss() 的新 DialogInterface.OnclickListener 并在设置肯定按钮时将其用作第三个参数。

# javascript - Google Chrome 用户脚本参考 window.open

> ID：10147623
> 
> 赞同：2
> 
> 时间：2012-04-13T20:07:38.637
> 
> 标签：javascript, google-chrome, userscripts, window.open

我一直在尝试解决这个问题，但是当我尝试引用一个打开的窗口时，句柄总是未定义的。

值得注意的是，这是在用户脚本中使用的，这是有**问题**的代码段：

```
var donateWindow;

// ######################################################################
// # Show the donation popup and open a window to paypal site
// ######################################################################
function showDonateWindow()
{
    if (window.confirm("Question here"))
    {
      if (! (typeof(donateWindow) == 'undefined' || donateWindow.closed)) window.donateWindow.close();
      window.donateWindow = window.open("http://somesite.com/","tabName");
    }
} 
```

对此的任何帮助将不胜感激。看起来无论我做什么 window.open 都会返回值“未定义”。

我的目标是显示一个弹出窗口，但如果一个已经打开，它应该只是替换旧的。这在 FF 中按预期工作，但对于我的生活，我无法在 Chrome 中使用它。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-14T12:50:42.690

为什么要在打开新窗口之前关闭现有窗口？你不需要这样做。

如果您只是在打开窗口时使用相同的名称，它将替换现有的窗口（如果有）。

这意味着您无需查找是否有打开的窗口。

```
function showDonateWindow()
{
    if (window.confirm("Question here"))
    {
        window.open("http://somesite.com/","donateWindowName");
    }
} 
```

# iphone - 无法让 presentViewController 工作

> ID：10147625
> 
> 赞同：35
> 
> 时间：2012-04-13T20:07:44.500
> 
> 标签：iphone, xcode, ipad, presentmodalviewcontroller

我将一个工作视图控制器类从另一个项目复制到一个新项目中。我无法在新项目中加载视图。在旧项目中，我使用了 presentModalViewController。在新版本中，我无法使用 presentModalViewController 或 presentViewController 加载视图

我正在尝试从我的主视图控制器加载当前视图。

这是我的主视图控制器界面的样子......

```
//  ViewController.h
#import <UIKit/UIKit.h>
#import "RequestDialogViewController.h"

@interface ViewController : UIViewController <RequestDialogViewControllerDelegate> {

}

- (void)requestDialogViewDidDismiss:(RequestDialogViewController *)controller withResponse:(NSString*)response; 
```

我正在使用这样的 presentModalViewController ...

```
RequestDialogViewController *requestIPViewController = [[RequestDialogViewController alloc] initWithNibName:@"RequestDialogViewController"  bundle:nil];
navigationController = [[UINavigationController alloc] initWithRootViewController:requestIPViewController];
[self presentModalViewController:navigationController animated:YES]; 
```

和这样的presentViewController ...

```
RequestDialogViewController *requestIPViewController = [[RequestDialogViewController alloc] initWithNibName:@"RequestDialogViewController"  bundle:nil];    
[self presentViewController:requestIPViewController animated:YES completion:nil]; 
```

我在新项目中缺少什么？init 方法会触发，但 viewDidLoad 不会触发，因此不会显示任何内容。

谢谢

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-04-14T05:55:11.537

如果`ViewController`是根视图控制器，它就不能从它自己的内部呈现模态视图控制器`viewDidLoad`，因为此时它没有像屏幕大小这样的信息。

如果其他视图控制器已经显示，这将起作用。如果根视图控制器是 a `UINavigationController`，您将看到一个视图从右侧滑入，而模态视图从底部向上滑动。

无论如何，对于您`ViewController`的 ，您最快可以在它变得可见之后呈现它。为此使用计时器是不可靠的；较旧和较慢的设备的加载时间要长得多。

为了获得更高的可靠性，请实施`viewDidAppear:`for `ViewController`。仍然使用您的计时器系统来增加额外的延迟；几分之一秒就足够了。尽管`viewDidAppear`在 iOS 5.1 模拟器中从内部呈现模态视图控制器对我有用，但[在加载另一个 ViewController 时呈现模态视图控制器](https://stackoverflow.com/q/6405507/1318452)说有时不会发生。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T04:52:38.523

我已经解决了。我试图从视图中呈现视图确实加载了主视图控制器。不知道为什么它在那里不起作用，但我现在正在设置一个计时器，它调用一个方法来在主视图加载后呈现视图控制器，现在使用它可以正常工作......

```
[self presentViewController:requestIPViewController animated:YES completion:nil]; 
```

感谢那些回答的人。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-05T05:03:46.533

正如@Dondragmer 所说，如果你想在根视图的viewDidLoad 中展示你的viewController，它将失败。一旦你的viewController 准备好了，你就可以展示你的新viewController。所以，你可以做到这一点

```
- (void)viewDidLayoutSubviews {
    //present here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-18T01:13:40.383

我遇到了同样的问题。但我的情况是在另一个 ViewController`presentViewController`之后调用`dismissViewControllerAnimated`。我的解决方案是`presentViewController`将`dismissViewControllerAnimated`.

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-13T21:18:29.760

呈现一个modalViewController：

为了所有初学者的利益，请键入它而不是复制粘贴。

```
myVC *viewController = [[myVC alloc]initWithNibName:@"myVC" bundle:nil];
viewController.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
[self presentModalViewController:viewController animated:YES];
[viewController release]; 
```

看起来您试图在第一个示例中将导航控制器呈现为视图控制器，然后您在第二个示例中使用了错误的方法。

# java - 页面未刷新或未从我的文本字段中获取输入

> ID：10147628
> 
> 赞同：-1
> 
> 时间：2012-04-13T20:08:01.740
> 
> 标签：java, swing, jpanel

> **可能重复：**
> [我不确定如何从我的文本字段中获取数据](https://stackoverflow.com/questions/10145493/im-not-sure-how-to-get-the-data-from-my-text-field)

我在文本字段中输入一个数字并使用该输入来更改一个 int，这将改变一个矩形的大小，我不确定是否有问题，我没有从该文本字段中获取该数据或页面只是没有重新加载在它得到那个数据之后。

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;
import java.io.*;
import javax.imageio.*;
import javax.swing.*;
import java.net.*;
import java.sql.*;
import java.lang.Object;
import java.awt.Graphics;
import java.awt.Graphics2D;

public class Test extends JPanel implements ActionListener{

    JTextField textField;
    JFrame f=new JFrame();
    int x=77, y=441, w=23, h=10, entry;
    BufferedImage img=null;

   // BufferedImage img;

   public static void main(String[] args) {
        BufferedImage img =new BufferedImage(100, 50,BufferedImage.TYPE_INT_ARGB); 
        //textField = new JTextField();
        JFrame f = new JFrame("Load Image Sample");
        JTextField textField=new JTextField();
        f.add(textField);
        textField.setBounds(10,10,40,30);
        textField.setVisible(true);

        f.addWindowListener(new WindowAdapter(){
                public void windowClosing(WindowEvent e) {
                    System.exit(0);
                }
            });

        f.add(new Test());
        f.pack();
        f.setVisible(true);
    }

    public void paintComponent(Graphics g) {
        g.drawImage(img, 0, 0, null);

        Graphics2D i = img.createGraphics();
       Color myColor = Color.decode("#32004b");
       i.setColor(myColor);
       i.fillRect(x,y,w,h);

           // g.fillRect(10,10,10,10);
    }

    public Test() {

       try {
           img = ImageIO.read(new File("sales-goal.png"));
       } catch (IOException e) {}

                //77,441,23,10
    }

    public Dimension getPreferredSize() {
        if (img == null) {
             return new Dimension(100,100);
        } else {
           //return new Dimension(img.getWidth(null), img.getHeight(null));
            return new Dimension(300,600);
       }
    }

    public void actionPerformed(ActionEvent e) {

        Graphics g= getGraphics();
        textField.addActionListener(this);

               if (e.getSource() == textField) {
                   entry= Integer.parseInt(textField.getText());
                   g.drawString("Test",50,50);

                   entry=h;

                }         
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:11:05.577

你在做

```
JTextField textField=new JTextField(); 
```

在创建新局部变量但`JTextField textField;`从未分配全局变量的主要方法中。在您的 actionPerformed 中，您使用的`textField`是从未初始化的全局变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:20:33.703

将变量声明为

```
 private static JTextField textField; 
```

删除“JTextField”并将其用作

```
 textField = new JTextField(); 
```

在你的主要方法中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:13:07.493

我会在你的主要方法中替换这一行：

```
JTextField textField=new JTextField(); 
```

用这些：

```
textField=new JTextField();
textField.addActionListener(this); 
```

然后我会从你的`actionPerformed`方法中删除这一行：

```
textField.addActionListener(this); 
```

# java - java.lang.NullPointerException 调用 int 数组时

> ID：10147630
> 
> 赞同：0
> 
> 时间：2012-04-13T20:08:11.567
> 
> 标签：java, nullpointerexception

我对java很陌生，现在我已经坚持了几个小时。每当我尝试调用organizeBallots() 时，我都会遇到异常。根据我阅读的内容，我没有正确初始化 regionBallots 或者某些内容为空。对我来说，看起来我已经正确初始化了数组，因为它是一个 int，它应该是 0，而不是 null。...但我想我错了，非常感谢任何帮助！

编辑：正如我所说，我是新人，所以我不确定它是否有帮助，但是另一个类中的另一个方法正在调用organizeBallots()。

```
int[] regionBallots;        
regionBallots = new int[9];

public int[] organizeBallots( int incoming )
{

    if ( incoming >= 1 && incoming <= 10 )
        regionBallots[0]++;    // I get the exception here

    else if ( incoming >= 11 && incoming <= 20 )
        regionBallots[1]++;

    return regionBallots;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:11:17.440

让它像这样：`int[] regionBallots = new int[9];`

您不能在方法之外编写代码，除了在初始化程序中。要使用初始化程序，请编写：

```
{
  //here the initializing code
} 
```

要使用静态初始化程序，请编写：

```
static {
    //here the static initializing code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:50:07.967

这段代码对我有用，没有任何问题：

```
public class T {

    int[] regionBallots;

    public T() {
        regionBallots = new int[9];
    }

    public int[] organizeBallots(int incoming) {

        if (incoming >= 1 && incoming <= 10)
            regionBallots[0]++; //

        else if (incoming >= 11 && incoming <= 20)
            regionBallots[1]++;

        return regionBallots;

    }

    public static void main(String[] args) {
        T t = new T();
        for (int i = 0; i < 100; i++) {         
              System.out.println(t.organizeBallots(i));
              System.out.println(t.organizeBallots(i)[0]);
              System.out.println(t.organizeBallots(i)[1]); 
        }
    }

} 
```

# jquery - 我们可以用 jquery 检查 url 的有效性吗？

> ID：10147637
> 
> 赞同：1
> 
> 时间：2012-04-13T20:08:36.980
> 
> 标签：jquery

> **可能重复：**
> [在没有验证插件的情况下使用 jQuery 验证 url？](https://stackoverflow.com/questions/2723140/validating-url-with-jquery-without-the-validate-plugin)

是否有任何 jquery 方法来检查 url 是否有效？

或者 jquery 可以得到`http header`吗？像这样的一些代码方法。

js代码：

```
$('#submit').click(function(){
  var url = $('#url').val();
  // check a url is valid?
}); 
```

html代码：

```
<input id="url" name="url" type="text">
<input type="submit" name="submit" id="submit" value="submit" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:21:59.813

以下是我找到的一些信息：

```
 <script type="text/javascript">
        $(document).ready(function() {
           $("#commentForm").validate({
              rules: {
                 field: {
                    required: true,
                    url : true
                 }
              }
           });
        });
        </script> 
```

[信息来源](http://www.roseindia.net/tutorial/ajax/jquery/url.html)

[另一个人已经在stackoverflow上回答了这个问题](https://stackoverflow.com/a/2568852/1332394)

[链接到 jQuery URL 方法](http://docs.jquery.com/Plugins/Validation/Methods/url)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:16:15.523

好吧，如果我没听错，您可以`$.ajax()`对 url 执行操作并查看响应状态代码。

您可以为获得的状态设置不同的方法。

检查此链接：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

# c# - 文本框更改时如何动态更新标签文本

> ID：10147638
> 
> 赞同：4
> 
> 时间：2012-04-13T20:08:39.070
> 
> 标签：c#, winforms, textbox, label

我在更新标签文本时遇到问题。不知道我该怎么做。

我有一个标签 (lable1) 和一个文本框 (secondTextBox)，我有一个树形视图，用户需要从中选择项目。过程是这样的：

用户在树视图中选择一个元素，label1 显示默认文本，并且出现 secondTextBox。当用户更改 secondTextBox 内的默认文本时， label1 内的文本应自动更新，而无需用户按任何操作（请记住，我有大约 45 个节点需要它处于活动状态，有没有快速的方法来做到这一点或我必须编辑 45 个节点的代码？）。

到目前为止，我能够进行第一次更改，但是无论何时用户输入任何内容，标签都不会自动更新，用户必须从树视图中选择其他内容并返回到原始选择以更新文本。

到目前为止，这是我的代码：

```
namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void treeView1_AfterSelect(object sender, TreeViewEventArgs e)
    {
        if (treeView1.SelectedNode.FullPath == @"Node0/Node1")
        {
            label1.Text = String.Format("Whatever default text there is {0}"
     textBox1.Text);
        }
     }
} 
```

}

这是处于默认模式时的屏幕截图。

[http://i.stack.imgur.com/0NOlP.jpg](http://i.stack.imgur.com/0NOlP.jpg)

这是我输入文本时的屏幕截图，但标签框中没有变化：

[http://i.stack.imgur.com/3uX53.jpg](http://i.stack.imgur.com/3uX53.jpg)

非常感谢您提前。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T20:20:44.917

看起来您只需要向您的控件添加一个`TextChanged`事件处理程序。`textbox1`试着把它放在你的`Form1`构造函数中：

```
textBox1.TextChanged += new System.EventHandler(this.textBox1_TextChanged); 
```

接下来，添加此方法：

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    label1.Text = String.Format("Whatever default text there is {0}", textBox1.Text)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:15:52.387

如果要在文本框更改时更新标签，则应连接文本框的 TextChanged 事件：

```
private void textBox1_TextChanged(object sender, EventArgs e)
{
    label1.Text = String.Format("Whatever default text there is {0}", textBox1.Text); 
} 
```

使用表单设计器或在加载表单时动态设置事件。

# linux-kernel - 生成 ioctl 编号的 asm/ioctl.h 宏的强制性程度如何？

> ID：10147640
> 
> 赞同：1
> 
> 时间：2012-04-13T20:08:49.557
> 
> 标签：linux-kernel, kernel, ioctl

我环顾四周，我注意到有些驱动程序使用`_IO _IOR _IOW _IORW`宏声明其 ioctl 编号，而有些驱动程序使用`#define`s 手动声明它们。文档表明我必须使用这些宏，但现在我很困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T06:37:37.417

根据 Rubini 的书，宏的存在是为了不让不同的驱动程序有相同的编号，也不会导致人们在不同的节点上用相同的编号做完全不同的事情。我的理解是它们被推荐为良好的做法。

# css - 引导程序不显示工具提示

> ID：10147643
> 
> 赞同：0
> 
> 时间：2012-04-13T20:09:03.163
> 
> 标签：css, tooltip, twitter-bootstrap

我按照引导主页示例在我的页面中设置了一些工具提示，但它们不起作用。我试过这个：

```
<script type="text/javascript" src="vendor/js/jquery.js"></script>    
<script type="text/javascript" src="vendor/js/bootstrap.js"></script>
        <script type="text/javascript">

        var options ;
        $('.tip').tooltip();
    </script>

    <a href="#" rel="tooltip" class="tip" title="first tooltip" data-original-title="Logout"> 
```

为什么它不起作用并且没有显示任何控制台错误？我正在使用最新的 boostrap 版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:11:20.513

您应该将脚本移动到它引用的 HTML 下方或将其包装在：

```
$(document).ready(function() {
  $('.tip').tooltip();
}); 
```

在调用 tooltip() 方法之前确保 DOM 已加载。

# r - 转换为字符时填充数字

> ID：10147644
> 
> 赞同：4
> 
> 时间：2012-04-13T20:09:05.687
> 
> 标签：r, parsing, format

我需要将单个数字的向量（例如`c(1, 2, 3, 45)`）转换为每个项目的长度为 2 的字符向量，并且在实际数字之前填充零（例如`c("01", "02", "03", "45")`.

我可以发誓我以前在 R 中用一些聪明的功能做过这个，但我一辈子都找不到它或记住它是什么......我不认为它是`format()`，但我可能会感到惊讶。

**TL;博士：**

我需要什么功能来转换它：

```
c(1, 2, 3, 45) 
```

对此：

```
c("01", "02", "03", "45") 
```

?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T20:17:14.637

`sprintf`带有填充字符：

```
sprintf("%02d",c(1,2,3,45)) 
```

您也可以使用`formatC`，它使用基本相同的一组格式化约定（来自 C 标准库）：

```
formatC(c(1,2,3,45),flag=0,width=2) 
```

另外，几乎重复（对不起，在我回答之前没有看到它）：

[将数字格式化为固定宽度，前导零](https://stackoverflow.com/questions/8266915/format-number-as-fixed-width-with-leading-zeros)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T20:44:56.560

正则表达式怎么样

```
sub('(^[0-9]$)','0\\1',c(1,2,3,45)) 
```

# java - Java EE WEB-INF 安全性

> ID：10147651
> 
> 赞同：2
> 
> 时间：2012-04-13T20:09:23.300
> 
> 标签：java, security, jakarta-ee

我有一个非常基本的登录表单，它接受用户名和密码。提交数据时，控制器类实质上验证用户名和密码，如果凭据正确，则将用户转发到位于 java EE 项目的 WEB-INF 中的 membersOnly.jsp。由于 WEB-INF 中的内容只能通过转发而不是重定向来访问，我假设有人可以访问此信息的唯一方法是通过服务器端转发。

我的问题是，这种方法有多安全，我应该使用其他形式的安全吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T02:03:56.140

您正在使用某种基于自定义的身份验证，但[Java EE 标准](http://docs.oracle.com/javaee/5/tutorial/doc/bncbe.html#bncbn)定义了几种身份验证机制：

*   HTTP 基本身份验证
*   基于表单的身份验证
*   HTTPS 客户端身份验证

使用基于表单的身份验证，您仍然可以使用自定义表单，并将密码验证委托给您的 Java EE 容器。几乎每个供应商都提供针对 LDAP 服务器、数据库表和其他存储库的凭据验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:34:13.907

大多数容器将为您处理身份验证。

例如，使用 Glassfish，您可以简单地告诉容器哪个数据库表包含用户和密码。

它会为你做剩下的事情。

您还可以让容器控制对不同页面的访问。

希望这可以帮助。

# c# - Linq 选择不同的两个属性

> ID：10147654
> 
> 赞同：3
> 
> 时间：2012-04-13T20:09:38.013
> 
> 标签：c#, linq, linq-to-entities, distinct

我有一个相当复杂的 LINQ 查询，它连接了几个表，并选择了一个新的匿名类型，即三个 IEnumerable's `{Users, JobProviders, Jobs}`。它返回一个 IQueryable 以维持延迟执行，从而消除了 DistintBy[这个问题](https://stackoverflow.com/questions/520030/why-is-there-no-linq-method-to-return-distinct-values-by-a-predicate)。

其中一列是排名，我需要确保只有每个职位的排名最低的记录（另一列，许多职位将被选中）被选中。Distinct 不起作用，因为排名显然会使行唯一。

我认为 group 子句可能对此有所帮助，但它将返回类型更改为 IGrouping。我不完全理解小组是如何运作的，所以我可能是错的，但它看起来不起作用。有没有办法说每个工作只取最低的等级？

就像是

```
let jobRank = JobProvider.Rank
...where min(rank) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T20:36:45.283

您可以使用分组，尽管它让我畏缩使用 groupBy 来做一个独特的。您只需调用即可`First`从`IGrouping`组中取出一个项目，这实际上是一个不同的项目。它看起来像这样：

```
var distinctItems = data.GroupBy(item => new{
  //include all of the properties that you want to 
  //affect the distinct-ness of the query
  item.Property1
  item.Property2
  item.Property3
})
.Select(group => group.Key);
//if it's important that you have the low rank use the one below.
// if you don't care use the line above
//.Select(group => group.Min(item => item.Rank)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-15T19:40:44.277

这里很好的解决方案：

[LINQ 在特定属性上的 Distinct()](https://stackoverflow.com/questions/489258/linq-distinct-on-a-particular-property)

你需要的是一个有效的“distinct-by”。我不相信它是 LINQ 的一部分，尽管它很容易编写：

```
What you need is a "distinct-by" effectively. I don't believe it's part of LINQ as it stands, although it's fairly easy to write:

public static IEnumerable<TSource> DistinctBy<TSource, TKey>
    (this IEnumerable<TSource> source, Func<TSource, TKey> keySelector)
{
    HashSet<TKey> seenKeys = new HashSet<TKey>();
    foreach (TSource element in source)
    {
        if (seenKeys.Add(keySelector(element)))
        {
            yield return element;
        }
    }
} 
```

# java - 更新对话框内的edittext，值会更新但文本不会更新

> ID：10147657
> 
> 赞同：2
> 
> 时间：2012-04-13T20:09:46.153
> 
> 标签：java, android, dialog

我有一个在对话框中显示的edittext，但后来（在对话框关闭之前）我正在更新其中的值，但是当我这样做时，我可以从 .gettext() 读取正确的新值，但 edittext 仍然空的，为什么？

这是我的代码：

```
public void setText(String url) {
    response.setText("http://xxxx/" + url);
    response.invalidate();
    response.selectAll();
} 
```

感觉就像我已经尝试了一切，寻找了几个小时的答案，但我尝试过的任何方法都没有奏效。:(

这个问题有什么快速的解决方案，还是我真的需要重绘整个自定义对话框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-16T12:36:00.360

如果你简单地看，

一切正常，

```
 EditText input;
@Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);

        input = new EditText(this); 

        AlertDialog alertDialog = new AlertDialog.Builder(this).create(); 
        alertDialog.setTitle("Title"); 
        alertDialog.setMessage("Message"); 
        alertDialog.setView(input, 10, 0, 10, 0); // 10 spacing, left and right 

        alertDialog.show(); 

        input.setText("Raja");
        setText("Hindustani");

    }

    public void setText(String url) { 
        input.setText("http://xxxx/" + url); 
        input.invalidate(); 
        input.selectAll(); 
    } 
```

这组代码工作得很好。。那里没有问题。。再检查一次。

你需要把你的完整代码放在这里，让我们知道你是怎么得到这个问题的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T11:26:35.737

如果您在完成某些任务后尝试从单独的线程更改 TextView 的文本，那么您应该使用 Handler，否则您可能会遇到奇怪的错误。

```
EditText input;
Thread myWorkerThread;
AlertDialog alertDialog;

Handler successHandler = new Handler()
{
    @Override
    public void handleMessage(Message message)
    {
        setText("Success Message");
    }
};

public void setText(String url)
{
    input.setText("http://xxxx/" + url);
    input.invalidate();
    input.selectAll();
}

@Override
public void onCreate(Bundle icicle)
{
    super.onCreate(icicle);
    setContentView(R.layout.main);

    input = new EditText(this);

    myWorkerThread = new Thread()
    {
        public void run()
        {
            // do your tasks here

            // after task is done, call the handler
            successHandler.sendEmptyMessage(0);
        }
    };
} 
```

现在在启动 myWokerThread 之前显示您的警报对话框。

```
alertDialog = new AlertDialog.Builder(MyActivity.this).create();
alertDialog.setTitle("Title");
alertDialog.setMessage("Message");
alertDialog.setView(input, 10, 0, 10, 0); // 10 spacing, left and right
alertDialog.show();
myWorkerThread.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-21T06:40:48.723

```
AlertDialog alertDialog = new AlertDialog.Builder(this).create(); 
alertDialog.setTitle("Title"); 
alertDialog.setMessage("Message"); 

EditText input = new EditText(YourActivity.this);
input.setText("NAME");

alertDialog.setView(input, 10, 0, 10, 0); // 10 spacing, left and right 
alertDialog.setPositiveButton("ok", new DialogInterface.OnClickListener() {
   public void onClick(DialogInterface dialog, int whichButton) {
      //some_string_instance = input.getText().toString();
   }
});
alertDialog.setNegativeButton(R.string.alert_dialog_cancel, new DialogInterface.OnClickListener() {
   public void onClick(DialogInterface dialog, int whichButton) {

   }
});

alertDialog.show(); 
```

您可以使用带有两个按钮的警报对话框，并在正面按钮上单击您将 edittext 的值保存到某个字符串变量，并可以稍后在您的代码中使用它...假设您的方法是 setText(some_string_instance)..

参考这个[链接](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/AlertDialogSamples.html)

# c - C、操纵服务器/客户端代码使其在接受时写入消息？

> ID：10147660
> 
> 赞同：0
> 
> 时间：2012-04-13T20:09:54.877
> 
> 标签：c, client

此问题使用[此处找到的 server.c 和 client.c 的代码。](http://www.linuxhowtos.org/C_C++/socket.htm)

我希望服务器在客户端连接后向客户端发送消息。

正如您从文章中看到的那样，代码所做的就是让服务器等待客户端连接，监听它，然后打印出客户端给它的消息，并向客户端发出警报。

这是我试图解决我的问题的方法（其他一切都完全相同）。服务器：

```
 ...
 newsockfd = accept(sockfd, 
             (struct sockaddr *) &cli_addr, 
             &clilen);
 if (newsockfd < 0) 
      error("ERROR on accept");
 else
 {
      write(newsockfd,"I got your message",18);
 }
 .... 
```

在客户端，（同样，其他一切都一样）：

```
...
if (connect(sockfd,(struct sockaddr *) &serv_addr,sizeof(serv_addr)) < 0) 
    error("ERROR connecting");
bzero(buffer,256);
read(sockfd,buffer,255);
... 
```

看来我应该能够用这几行来做到这一点。但是代码的行为与原来的完全一样！这是怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:41:00.210

对于服务器，插入

```
 bzero(buffer,256);
 n = write(newsockfd,"Client connected", 16);
 if (n < 0) error("ERROR writing to socket"); 
```

之后`accept()`。

对于客户，插入

```
bzero(buffer,256);
n = read(sockfd,buffer,255);
if (n < 0) 
     error("ERROR writing to socket");
printf("%s\n", buffer); 
```

之后`connect()`。

这是你想要的吗？我认为您应该能够从现有代码的其余部分进行推断。

# javascript - Javascript/CSS 背景定位/拖动

> ID：10147661
> 
> 赞同：2
> 
> 时间：2012-04-13T20:10:03.647
> 
> 标签：javascript, jquery, css, draggable

我正在使用以下代码：

```
 <div style="width: 150px; height: 125px; background: #fff; -webkit-border-radius: 10px;-moz-border-radius: 10px;border-radius: 10px; padding: 7px; border: 1px solid #999; cursor: pointer;">
    <div style="width: 100%; background: url(IMAGE NAME) no-repeat; cursor: pointer; background-position: center; background-size: 170px; height: 125px;">
    </div>
</div> 
```

我想这样做，以便用户可以将他们的照片定位到准确的位置，而无需保存另一张图像的副本。我知道你可以制作一个可拖动的元素，让你拖动背景，只是不确定如何。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:37:55.973

```
<script>
  $(function() {
    $( "#draggable_parent" ).draggable();
  });
</script>
<div id="draggable_parent" style="width: 450px; height: 450px; background: #fff; -webkit-border-radius: 10px;-moz-border-radius: 10px;border-radius: 10px; padding: 7px; border: 1px solid #999; cursor: pointer;">
  <div id="draggable" style="width: 184px; background: url(IMG_URL) no-repeat; cursor: pointer; background-position: center; border:1px solid; background-size: 170px; height: 125px;">
  </div>
</div> 
```

I have edited the code, with the above code, the outer div will move.

# java - 在 Play Framework 上使用 YAML 初始化一些测试数据

> ID：10147663
> 
> 赞同：0
> 
> 时间：2012-04-13T20:10:11.650
> 
> 标签：java, playframework, yaml

我已经创建了一个带有播放框架的学习应用程序，我想使用从 yaml 加载的测试数据。但是我的数据在mysql中只是空的，例如

```
@Entity
public class DiningTable extends Model{

Integer number;

public DiningTable(Integer number) {
    super();
    this.number = number;
}

} 
```

这是我的diningTable 课程，这是我的测试数据；

```
DiningTable(tab1):
 number: 1
DiningTable(tab2):
 number: 2
DiningTable(tab3):
 number: 3
DiningTable(tab4):
 number: 4 
```

我正在启动我的应用程序，它调用加载 yaml 数据的引导程序，不会出现错误，但在我的 phpmyadmin，餐桌表中，它包含这些数据；

```
id  number
1   NULL
2   NULL
3   NULL
4   NULL 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T21:48:52.737

或者：将值保密：

```
private Integer number; 
```

并添加 Getter/Setter。

```
public Integer getNumber(){ return number;}
public void setNumber(Integer num){this.number = num;} 
```

引导加载程序通过反射找到值......所以要么公开这些值，要么使用 getter/setter。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-15T11:34:08.750

我解决了这个问题，在模型中改变了这个

```
 Integer number 
```

至

```
 public Integer number 
```

# wpf - XAML 获取所有未命名控件

> ID：10147666
> 
> 赞同：1
> 
> 时间：2012-04-13T20:10:36.950
> 
> 标签：wpf, xml, unit-testing, parsing, xaml

我想在我的项目的 xaml 文件中命名所有未命名的控件，以支持自动化 UI 测试。

谁能想到在没有定义*x:Name*属性的项目中的所有 .xaml 文件中报告所有控件的方法？

命名控件将是手动的，但如果任何 .xaml 文档包含未命名的控件，我希望能够进行失败的测试。

# jquery - 使用 对于动态表格

> ID：10147667
> 
> 赞同：0
> 
> 时间：2012-04-13T20:10:40.163
> 
> 标签：jquery, html, forms, styling

我正在构建一个表单，当您单击另一个是/否输入时，我有一些元素需要出现或消失。我需要一些造型帮助。

看到这个 JS 小提琴：http: [//jsfiddle.net/TdnZp/11/](http://jsfiddle.net/TdnZp/11/)

从技术上讲，一切都按我想要的方式工作。请注意，当您单击是/否时，另一个表单元素会显示或隐藏，并且该元素占用的空间会消失。这很好，但我还需要将输入框和标签放在漂亮的列中，上下排列，而不是像现在这样交错排列。

另外，当新元素进来时，我希望它下面的所有元素都平滑地向下滑动以腾出空间，而不是瞬间跳下，当元素消失时也是如此，下面的元素平滑地向上滑动填充。

有谁知道如何做这两件事？如果我应该使用不同的 HTML 元素，`<ul>`请告诉我。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T20:12:43.317

你想要的间距可以通过设置标签的宽度来实现，你想要的滑动效果可以使用slideDown而不是fadeIn来实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T20:13:09.803

如果您希望新表单滑入，则需要使用`.slideUp`和动画。`.slideDown`

[**演示**](http://jsfiddle.net/skram/TdnZp/12/)

见下文，

```
$('[name="label"]').change(function(){
    if ($('[name="label"]:checked').val() == "yes"){
        $('#bl').slideDown('slow');
    }else{
        $('#bl').slideUp('slow');
    }
}); 
```

**编辑：**您需要修改标记和 css 的对齐和样式。请参阅下面的代码并根据需要对其进行修改..

[**演示**](http://jsfiddle.net/skram/TdnZp/15/)

**CSS：**

```
#list li { padding: 2px; }
#list input { margin: 1px; }
div.form-label { display: inline-block; width: 100px; font-weight: bold;} 
```

**HTML：**

```
<form>
    <ul id="list">
        <li>
            <div class="form-label">
                <label for="label">Label:</label>
            </div>
            <input type="radio" name="label" value="yes" />Yes
            <input type="radio" name="label" value="no" />No
        </li>
        <li id="bl">
            <div class="form-label">
                <label for="label_cost">Cost:</label>
            </div>
            <input name="label_cost" />
        </li>
        <li>
            <div class="form-label">
                <label for="another_one">Another One:</label>
            </div>
            <input name="another_one" />
        </li>
    </ul>
</form> 
```

# c - 分配给变量会导致完全不相关的函数出现分段错误

> ID：10147670
> 
> 赞同：1
> 
> 时间：2012-04-13T20:10:58.523
> 
> 标签：c, string, segmentation-fault, variable-assignment

我复制了一些代码，这些代码只是将文件读取到字符串并从旧程序打印字符串。它工作正常，所以我决定对其进行一些修改。新程序是

```
#include <stdio.h>
#include <string.h>

int main() {
    FILE *itemlist = fopen("itemlist", "r");
    char *currentstring, charbuffer[2];
    // char itemstart = 0;
    while (fgets(charbuffer, 2, itemlist)) {
        strcat(currentstring, charbuffer);
    }
    printf("%s", currentstring);
    return 0; 
} 
```

它按预期工作。但是当我取消注释该`itemstart`行时，它会出现分段错误。我什至没有使用它，就我而言，将 char 初始化为 0 并不违法。我认为这是类型的问题，然后我将其更改为 short ，然后更改为 int ，它仍然给出段错误。

但后来我删除了这`= 0`部分，它又开始工作了。然后我决定把它放回去，用 gdb 调试二进制文件，段错误在`strcat`.

这怎么可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T20:14:15.180

`currentstring`是一个悬空指针，因此`strcat(currentstring, charbuffer);`会导致未定义的行为。

可能取消注释`char itemstart = 0`会初始化一些内存`0`并且访问冲突是可见的，但这只是一个猜测。未定义的行为意味着任何事情都可能发生。

您应该为以下内容分配内存`currentstring`：

```
currentstring = malloc(10); //or whatever length you need 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:36:16.917

您必须为变量分配空间`currentstring`并控制其大小以避免段错误/堆损坏。

```
#define MAX_BUFFER_SIZE 32
//...
FILE *itemlist = fopen("itemlist", "r");
char *currentstring = malloc(MAX_BUFFER_SIZE+1);
char *tmpbuf;
char charbuffer[2];
// char itemstart = 0;
int bytesloaded = 0;
while (fgets(charbuffer, 2, itemlist)) {

    if(bytesloaded + 2 > buf_size) {
       /* call realloc() */
        buf_size += MAX_BUFFER_SIZE;
        tmpbuf = realloc(currentstring, buf_size);
        if(tmpbuf == NULL) { /* Get off loop. Using break or return. */
             break; 
        } 
        currentstrig = tmpbuf;
     }
    memcpy(currentstring + bytesloaded, charbuffer, 2);
    bytesloaded += 2;
}
//... 
free(currentstring); 
```

我没有测试过，但我相信它有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T20:17:06.273

C 语言的不安全性使得取消注释不相关行时的段错误成为可能。错误程序的最终行为是由编译器做出的细微选择决定的。

当面对这样的疯狂时，你应该首先尝试更正你的代码。当然，这并不总是那么容易。在一个 8 行的程序上，你应该没问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-13T20:13:51.200

您需要为 currentstring 分配一些空间。

# svn - 如何在 SVN 中查找错过的修订内容？

> ID：10147678
> 
> 赞同：0
> 
> 时间：2012-04-13T20:11:34.273
> 
> 标签：svn

我有两个使用 STS 完成合并的分支。现在我们发现有一些内容没有被合并。所以我们使用这个命令找到缺失的版本

svn mergeinfo --show-revs 合格[http://mybase.branch.1](http://mybase.branch.1) http://mytrunk.branch

我得到一个修订列表。现在我想查看未合并的内容，不包括某些文件，如 pom.xml 、属性文件。

svn diff 无法提供帮助。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T22:56:54.263

对分支进行全新且干净的结帐。合并此分支上主干的所有更改。不要犯任何事情！还原您不感兴趣的文件。检查工作目录中的更改。例子：

```
svn checkout http://svn.example.org/svn/foobar/branches/0.42 foobar
cd foobar
svn merge ^/trunk 
```

在这些命令之后，工作目录包含尚未合并到分支的所有更改（未提交）。您可以使用大多数 SVN 客户端来检查更改 - 并还原其中一些以忽略它们。

您可以从命令行执行很多操作。以下命令行（bash、Linux）恢复对名为“pom.xml”的文件所做的所有更改：

```
svn revert $( find -name pom.xml ) 
```

以下命令行恢复除 Java 文件（bash、Linux）以外的所有文件：

```
svn revert $( find -type f ! -name \*.java ) 
```

您还可以使用命令行工具检查剩余的更改，例如：

```
svn status
svn diff 
```

# php - PhpMailer 抛出致命异常

> ID：10147684
> 
> 赞同：0
> 
> 时间：2012-04-13T20:12:09.173
> 
> 标签：php, try-catch, phpmailer

我有一个循环的邮件脚本，处理从我的服务器传出的电子邮件。有时它会因以下错误而挂起。

`PHP Fatal error: Uncaught exception 'phpmailerException' with message 'SMTP Error: Data not accepted.'`

这会导致我的脚本在消息提醒完成之前终止。

这是启动电子邮件的代码。

```
$message = new \PHPMailer(true);
$message -> IsSMTP();
try
{
    $message -> SMTPAuth = true;
    $message -> Host = Config::HOST;
    $message -> Port = Config::PORT;
    $message -> Username = $account;
    $message -> Password = Config::PASS;
    $message -> AddReplyTo($account, Config::NAME);
    $message -> SetFrom($account, Config::NAME);
    $message -> AddAddress($recipient[0], $recipient[1]." ".$recipient[2]);
    $message -> Subject = $recipient,$this->subject;
    $message -> AltBody = 'Please enable HTML viewing in order to view this message. Thank you.';
    $message -> MsgHTML($recipient,$this->body);
    if($attachment !== false)
        $message->AddAttachment($attachment);
    $message -> Send();
}
catch (phpmailerException $e)
{
    return $error -> errorMessage();
}
catch (Exception $e)
{
    return $error -> getMessage();
}
```

我似乎没有发现异常。我怎样才能优雅地从这件事中恢复过来？

**编辑**

这是一个命名空间问题，如下所示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T06:07:02.137

很可能是命名空间错误 - 最狡猾的错误。

```
catch (\phpmailerException $e) 
```

# elisp - 如何自动导航到默认找到的标签？

> ID：10147686
> 
> 赞同：1
> 
> 时间：2012-04-13T20:12:16.267
> 
> 标签：elisp

我试图通过始终导航到默认的找到标签来稍微增强查找标签功能。

就像 find-tag 一样，当我按 M- 时。当光标位于函数名上时，emacs 会打印以下消息： Find tag (default fun_name):

它等着我按 RET 或去另一场比赛。问题是，我总是按 RET。所以我只想通过让emacs自动“按RET”来跳过这一步。我想在按 M- 后立即自动导航到该功能。

如何从我的 .emacs 文件中设置此行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T02:26:32.003

```
(defun sm-find-tag ()
  (interactive)
  (find-tag (funcall (or find-tag-default-function
                         (get major-mode 'find-tag-default-function)
                         'find-tag-default)))) 
```

# android - 生成 R 文件时的问题

> ID：10147687
> 
> 赞同：0
> 
> 时间：2012-04-13T20:12:18.430
> 
> 标签：android

在android中生成R文件时遇到一些问题。我的 src 文件夹 com.mydomain 和 net.mydomain 中有两个包。现在只生成 net.mydomain.R 文件而不是 com.mydomain.R 文件。我的 com.mydomain 中的 java 文件无法访问像 R.id R.layout 这样的 id。它仅填充 net.mydomain。那么我怎样才能生成 com.mydomain.R 文件。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:15:03.410

确保您使用的包与清单中的包相同，检查行包，例如，在您的情况下，包是 com.mydomain，所以：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mydomain"
    android:versionCode="1"
    android:versionName="1.0" > 
```

为什么不添加像 com.mydomain.net 这样的 net.mydomain？，使用这种方式，您可以解决您的问题。

# java - for循环中的if else语句？

> ID：10147690
> 
> 赞同：3
> 
> 时间：2012-04-13T20:12:28.820
> 
> 标签：java, if-statement

在我为学校做的一个项目的最后一部分，我应该`if-else`在循环中使用一个语句`for`，但我不知道该怎么做。我可以使用大量的`if-else`语句来做同样的事情，但我认为我的老师不会欣赏它。

这是作业最后一部分的说明...

> 计算成绩（A、B、C、D 或 F）并使用 if-else 循环和 for 循环内的以下截止值存储在另一个名为 Grades 的 Array8 中以分配成绩。
> 
> ```
> 1\.    Average                        Grade
> 2\.    >= 90                          A
> 3\.    >=80 and <90                   B
> 4\.    >=70 and <80                   C
> 5\.    >=60 and <70                   D
> 6\.    <60                            F 
> ```

到目前为止，这是我的代码...

```
public class Proj5 {
    public static void main (String[] args) {
        String[] Array1= {new String("Adam"),new String("Smith"),new String("Jones"),new String("Becky"),new String("Taylor")};
        Integer[] Array2={new Integer(90),new Integer(89),new Integer(86),new Integer(76),new Integer(95)};
        Integer[] Array3={new Integer(92),new Integer(79),new Integer(85),new Integer(90),new Integer(87)};
        Integer[] Array4={new Integer(93),new Integer(80),new Integer(90),new Integer(87),new Integer(92)};
        Integer[] Array5={new Integer(90),new Integer(77),new Integer(86),new Integer(92),new Integer(89)};

        double av1 = (((Array2[0]+Array3[0]+Array4[0])/3));
        double av2 = (((Array2[1]+Array3[1]+Array4[1])/3));
        double av3 = (((Array2[2]+Array3[2]+Array4[2])/3));
        double av4 = (((Array2[3]+Array3[3]+Array4[3])/3));
        double av5 = (((Array2[4]+Array3[4]+Array4[4])/3));

        double[] Array6 = {(av1),(av2),(av3),(av4),(av5)};

        double avf1 = (av1*.30)+(Array5[0]*.7);
        double avf2 = (av2*.30)+(Array5[1]*.7);
        double avf3 = (av3*.30)+(Array5[2]*.7);
        double avf4 = (av4*.30)+(Array5[3]*.7);
        double avf5 = (av5*.30)+(Array5[4]*.7);

        double[] Array7 = {(avf1),(avf2),(avf3),(avf4),(avf5)};

        System.out.println("Report for Spring Semester 2009"+
        "\n-------------------------------------------");
        System.out.println("Name Test1 Test2 Test3 Final Average Grade");

        for (int column = 0; column<Array1.length; column++){
            System.out.printf("%s ", Array1[column]);
            System.out.printf("%s   ", Array2[column]);
            System.out.printf("%s    ", Array3[column]);
            System.out.printf("%s    ", Array4[column]);
            System.out.printf("%s    ", Array5[column]);
            System.out.printf("%s    ",  Array7[column]);
            System.out.println(); //start new line of output
        } 
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T20:15:46.883

`if/else`不是一个循环。如果您必须在循环中使用`if/else`语句，只需执行以下操作：`for`

```
for(int i = 0; i < Array8.length; i++) {
    if(...) {
        ...
    } else {
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-14T19:18:38.297

```
char[] Array8 = new char[5];

for (int i = 0; i < Array8.length;i++ ) {
    if (Array6[i] >= 90)
        Array8[i] = 'A';
    else if (Array6[i] >= 80)
        Array8[i] = 'B';
    else if (Array6[i] >= 70)
        Array8[i] = 'C';
    else if (Array6[i] >= 60)
        Array8[i] = 'D';
    else
        Array8[i] = 'F';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T20:20:20.767

似乎任务要求您在循环中编写一个`if/else` *链。*`for`

```
for (...) {
    if (average >= 90)
        grade = 'A';
    else if (average >= 80)
        grade = 'B';
    else if (average >= 70)
        grade = 'C';
    else if (average >= 60)
        grade = 'D';
    else
        grade = 'F';
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T20:20:31.577

如果别的？

如果他的意思是他在循环中需要它，那么我猜它是一个 if 语句和一个 for 循环内的 else 语句。或者它可能是一个 else if 循环，除了 else 有额外的条件之外几乎一样。像这样的东西：

```
for(int i = 0; i < 10; i++) {
    if(i < 5) {
        System.out.println("I am smaller than five");
    }
    else /*Or perhaps if an else if, 'else if(i > 7){System.out.println('I am bigger than seven');}'*/{
        System.out.println("I am bigger than five");
    }
} 
```

# c# - C#接口函数定义具体实现

> ID：10147692
> 
> 赞同：0
> 
> 时间：2012-04-13T20:12:36.240
> 
> 标签：c#, generics, interface, implementation

如何实现下面接口中定义的功能？当我在 VS2010 中实现时，如下所示。MyType 变灰并且不再识别类型？谢谢！

```
public interface IExample
{
  T GetAnything<T>();
}

public class MyType
{
  //getter, setter here
}

public class Get : IExample
{
 public MyType GetAnything<MyType>()
 {      ^^^^^^^            ^^^^^^
   MyType mt = new MyType();
   ^^^^^^^^^^^^^^^^^^^^^^^^^^    /* all greyed out !!*/
 }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:15:21.083

创建一个泛型`interface IExample<T>`，然后使用具体类型实现它`class Get : IExample<MyType>`，如下例所示。

```
public interface IExample<T> where T : new()
{
    T GetAnything();
}

public class Get : IExample<MyType>
{
    public MyType GetAnything()
    {
        MyType mt = new MyType();
        return mt;
    }
}

public class MyType
{
    // ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:21:00.183

丹尼斯的回答看起来像你*想要*的，但万一不是，为了让*你的*代码正常工作，你可以这样做，但我不确定这真的有多少价值......

```
public class Get : IExample
{
    public T GetAnything<T>()
    {
        return default(T);
    }
}

public void X()
{
    var get = new Get();
    var mt = get.GetAnything<MyType>();
} 
```

# javascript - 使用javascript单击没有href的项目

> ID：10147699
> 
> 赞同：0
> 
> 时间：2012-04-13T20:13:19.677
> 
> 标签：javascript, dom-events, greasemonkey

基本上我正在使用名为“greasemonkey”的 Firefox 插件，我正在尝试编写一个脚本，其目的是在每个页面上找到一个特定的类指定图像并单击它。如果要“点击”的项目有一个href，这很容易完成，因为这里有几个其他帖子，有些使用锚等，但假设没有href，有没有办法“点击”图像或按钮？

例如，假设我想完成一项调查，他们有几个复选框或单选按钮。有没有办法使用greasemonkey中的脚本来选择按钮？

作为参考，这是我过去所做的“单击”具有 href 属性的按钮的操作。

```
$("a.tip").each(function(){
if($(this).attr("caption")=="captionName"){
$.get("http://www.website.com" +$(this).attr("href"),window.location.reload());
return;
    }
}); 
```

*至于greasemonkey的能力，我不确定它能做什么，不能做什么。diveintogreasemonkey.org 似乎不再被托管，因此很难获得文档。

此外，这与单击侦听器不同，因为我希望脚本进行单击。您可能拥有的任何可以为我指明正确方向的参考材料也将不胜感激。

最后一点，我对“网络代码”这个领域相当陌生，所以如果你能像我什么都不知道一样解释它，我根本不会被冒犯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T04:19:04.017

由于您使用的是 JQuery，我假设有一个 @require 是您的脚本。
`// @require http://code.jquery.com/jquery.min.js`

现在，为什么不`click()`适合你？
您是否在控制台中收到任何错误？

我试过这段代码

```
setTimeout(function(){
    alert('about to click/select a radio button')
    $('#radio2').prop('checked', true);
    alert('ready to click images with class .imagem ?')
    $('.imagem').click()
}, 2000) 
```

这里：http: [//jsfiddle.net/QkCs4/5/](http://jsfiddle.net/QkCs4/5/)

对我来说很好。
看看它是否适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T12:25:52.507

您可以通过生成实际的点击事件来点击任何东西。不需要href，这种技术非常适合在“web 2.0”网站上激活现代的、由javascript驱动的控件。

即使`.click()`jQuery 的 `.click() 不可用，此方法也有效。（但是，没有一种方法适用于*每个*控件。）

**纯 JavaScript**（适用于 Firefox、Chrome、Greasemonkey 等）：

```
var clickTarget = document.querySelector ("Any valid CSS selector");
var clickEvent  = document.createEvent ('MouseEvents');
clickEvent.initEvent ('click', true, true);
clickTarget.dispatchEvent (clickEvent); 
```

**jQuery版本：**

```
var clickTarget = $ ("Any valid jQuery selector");
var clickEvent  = document.createEvent ('MouseEvents');
clickEvent.initEvent ('click', true, true);
clickTarget[0].dispatchEvent (clickEvent); 
```

请注意，这两个片段都用于一个链接/按钮/等。一次。
在 AJAX 驱动的页面上，请确保首先检查目标节点是否存在，并在必要时等待。

# javascript - YQL JSON 脚本没有返回？

> ID：10147705
> 
> 赞同：2
> 
> 时间：2012-04-13T20:14:03.510
> 
> 标签：javascript, jquery, ajax, json, yql

我这里有一个脚本，几乎直接从[这个](http://net.tutsplus.com/tutorials/javascript-ajax/quick-tip-cross-domain-ajax-request-with-yql-and-jquery/). 为什么下面列出的代码不返回任何内容？

`ajax.html`：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
  "http://www.w3.org/TR/html4/strict.dtd">

<html dir="ltr" lang="en-US">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Cross-Domain Ajax Demo</title>
    </head>
    <body>
        <div id="container">
            <form>
                <p><label>Type a URL:</label><input type="text" name="sitename" id="sitename"/></p>
                <p><input type="submit" name="submit" id="submit" value="Make Cross Domain Ajax request"</p>
            </form>
        </div>

        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js" charset="utf-8"></script>
        <script type="text/javascript" src="cross-domain-requests.js"></script>

        <script type="text/javascript">
            $('form').submit(function() {
                var path = "www.google.com";
                requestCrossDomain(path, function(results) {
                    $('#container').html(results);
                });
                return false;
            });
        </script>
    </body>
</html> 
```

`cross-domain-requests.js`：

```
// Accepts a URL and a callback function to run.
function requestCrossDomain( site, callback ) {

    // If no URL was passed, exit.
    if ( !site ) {
        alert('No site was passed.');
        return false;
    }

    // Take the provided URL, and add it to a YQL query. Make sure you encode it!
    var yql = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from html where url="' + site + '"') + '&format=xml&callback=cbFunc';

    // Request that YSQL string, and run a callback function.
    // Pass a defined function to prevent cache-busting.
    $.getJSON( yql, cbFunc );

    function cbFunc(data) {
    // If we have something to work with...
    if ( data.results[0] ) {
        // Strip out all script tags, for security reasons.
        // BE VERY CAREFUL. This helps, but we should do more.
        data = data.results[0].replace(/<script[^>]*>[\s\S]*?<\/script>/gi, '');

        // If the user passed a callback, and it
        // is a function, call it, and send through the data var.
        if ( typeof callback === 'function') {
            callback(data);
        }
    }
    // Else, maybe we requested a site that doesn't exist, and nothing returned.
    else throw new Error('Nothing returned from getJSON.');
    }
} 
```

（我对脚本和 Ajax 比较陌生，所以如果我做了任何愚蠢的事情，我提前道歉。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T20:16:23.353

尝试将 var yql 中的回调更改为 callback=? 和'from xml'的select语句如下：

```
var yql = 'http://query.yahooapis.com/v1/public/yql?q=' + encodeURIComponent('select * from xml where url="' + site + '"') + '&format=xml&callback=?'; 
```

# scorm - scorm 1.2 + 声明目标

> ID：10147710
> 
> 赞同：0
> 
> 时间：2012-04-13T20:14:21.897
> 
> 标签：scorm

我一直在互联网上寻找资源，但我似乎找不到任何描述我正在寻找的东西。我正在尝试找出如何在 scorm 1.2 中创建学习目标（“cmi.objectives.n.id”）。我不知道它们是否需要像在 scorm 2004 中那样在 imsmanifest 文件中声明，或者它们是否是在运行时创建的。无论哪种方式都迫切需要知道如何创建它们。我找到了很多关于如何为 scorm 2004 执行此操作的资源，但我找不到任何针对 scorm 1.2 的资源。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-14T18:15:05.207

*如果我*在 SCORM 1.2 中没有记错你没有在 imsmanifest.xml 文件中声明目标，你只能在运行时 LMSSetValue() 它们。请记住，LMS 不需要永久存储它们，而只是在 SCORM 会话期间（在 LMSInitialize() 和 LMSFinish() 之间）。SCORM 1.2 中的交互也是如此

# java - 为什么这总是返回-99？

> ID：10147712
> 
> 赞同：1
> 
> 时间：2012-04-13T20:14:26.773
> 
> 标签：java

我已经有一段时间没有使用 java 了，对此我感到有些沮丧......它总是返回 -99 但我不知道逻辑哪里出错了。

```
public static void main(String[] args){
    System.out.println(shippingCost('P',10));
}

public static int shippingCost(char packageType, int weight)
{
    String e1 = "Legal Values: Package Type must be P or R";
    String e2 = "Legal Values: Weight < 0";
    int cost = 0;
        if((packageType != 'P')||(packageType != 'R'))
        {
             //throw new Exception(e1);
             return -99;
        } else {
            return -1;
        } 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T20:16:00.843

您的 if() 应该使用`AND`. 既然是`OR`现在，那么您的 packageType 既不是 P 也不是 R 总是正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T20:16:29.073

你的如果是错误的。((Not P) 或 (Not R)) 将永远为真，因为其中一个不永远为真。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T20:16:28.727

您的 if 语句正在检查 packageType 是否不等于“P”或不等于“R”。这将始终解析为 true，这意味着您的函数将始终返回 -99。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T20:17:27.583

我认为您的意思是使用`AND`而不是`OR`. 尝试

```
if((packageType != 'P') && (packageType != 'R'))
                        ^^ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T20:15:58.627

因为包类型不是'R'！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-13T20:33:24.927

我认为您的问题出在 if 语句中。由于您的条件是“不是 P 或不是 R”，那么如果您将 P 传递给该方法，它将评估为真。这是因为它不是 P 但也不是 R，因此它的计算结果为真。

桑尼

# parsing - 使用 flex/bison 创建解析器

> ID：10147713
> 
> 赞同：-1
> 
> 时间：2012-04-13T20:14:28.387
> 
> 标签：parsing, bison, flex-lexer

您好我需要创建一个解析器来解析搜索引擎高级查询语言：例如：“食物”语言：es

我想使用 Flex 和 Bison，但我从未使用过它们。我想知道是否有人可以向我指出一个好的在线教程，那么它会非常有帮助。我一直在网上寻找，但我没有找到任何有用的东西。

另外，如果有人可以提供任何示例 flex/bison 代码，我将不胜感激。

非常感谢提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-24T14:07:33.153

我很惊讶您一直无法在网上找到好的教程，因为世界各地的大量计算机科学大学课程都使用了 flex 和 bison 以及类似的编译工具。由于许多人正在学习它们，因此有大量可用资源。您一定没有使用正确的搜索词。YouTube 上也有许多有用的教程视频（包括我的）。

当我搜索时，这是第一个结果：[http ://aquamentus.com/flex_bison.html](http://aquamentus.com/flex_bison.html)

@Bart Kiers [http://dinosaur.compilertools.net/](http://dinosaur.compilertools.net/)建议的页面也不错。

# c# - 给定一个绝对位数（例如 24），如何在字数组中设置适当的位？

> ID：10147718
> 
> 赞同：0
> 
> 时间：2012-04-13T20:14:58.340
> 
> 标签：c#, arrays, bit

我有一个 16 位字的数组，我想在给定位数时计算要在正确字中设置的位。例如，第 24 位设置第 2 个字的第 8 位。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T20:19:32.853

只需使用除法来获取数组中的索引，余数就是要设置的位数。

```
int N = 24;
int index = N / 16;
int bit = N % 16;

words[index] |= (1 << bit); 
```

# centos - “rpmbuild -bb package.spec”产生错误：包已经存在：%package debuginfo

> ID：10147720
> 
> 赞同：3
> 
> 时间：2012-04-13T20:15:16.387
> 
> 标签：centos, rpm, rpmbuild

当我在 centos 上运行命令 rpmbuild -bb mypackage.spec 时，出现错误

```
error: Package already exists: %package debuginfo 
```

以下是规范文件的一部分：

```
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}
BuildRequires: gcc = 4.1.2
BuildRequires: make >= 3.81
BuildRequires: postgresql84-devel = 8.4.9

%description
ElementalCORE 

%prep
%setup -qn pcore

%build
%{__make}

%install
mkdir -p %{_tmppath}/%{name}-%{version}-%{release}
mkdir -p %{name}
mkdir -p %{_bindir}
install -d %{name}
#This is to ensure that the BuildRoot will be created fresh during the %install section. 
#mkdir -p %{buildroot}
#install -p -m 0755 $RPM_BUILD_ROOT/%{name}/obj/ggsnc/ggsnc %{_bindir}

%clean

%files
%defattr(-,root,root)
%doc NEWS 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T09:58:42.170

问题出`%install`在评论里。将其替换为`%_install`。

# php - 使用纯文本的 PHP 验证码

> ID：10147721
> 
> 赞同：1
> 
> 时间：2012-04-13T20:15:18.037
> 
> 标签：php, captcha

这是我第一次在这里发帖，因为这也是我第一次决定为自己从头开始建立一个网站。我正在使用基本的验证码脚本创建一个联系页面。由于您可能认为很疯狂的原因，我想将验证码显示为文本。我决定反对 png，因为（抗）锯齿在透明背景下非常糟糕，而且我认为我的网站不会引起太多不必要的关注。

这是我的验证码.php

```
<?php 

session_start();

$characters_on_image = 4;

$possible_letters = '0123456789';

$code = '';

$i = 0;
while ($i < $characters_on_image) { 
$code .= substr($possible_letters, mt_rand(0, strlen($possible_letters)-1), 1);
$i++;
}

echo $code;

header('Content-Type: text/plain');

$_SESSION['code'] = $code;
?> 
```

我遇到的问题是，如果我使用`<?php print $_SESSION['code']; ?>`它将打印以前的代码。我的编程非常复杂，我想知道是否有办法在标签中显示当前生成的代码`<label>`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:27:46.820

[考虑使用FIGlet](http://www.figlet.org/examples.html)字体，而不是纯文本：

```
Font: big
 __  __             
|  \/  |            
| \  / | ___   ___  
| |\/| |/ _ \ / _ \ 
| |  | | (_) | (_) |
|_|  |_|\___/ \___/ 
```

这是一个PHP库来做到这一点

[http://bolknote.ru/files/figlet/](http://bolknote.ru/files/figlet/)

不幸的是页面是俄语的，所以[这里](http://translate.google.com/translate?sl=ru&tl=en&js=n&prev=_t&hl=en&ie=UTF-8&layout=2&eotf=1&u=http://bolknote.ru/files/figlet/&act=url)是谷歌翻译的一个（请注意，翻译器破坏了代码示例的布局，因此您可能需要返回原始代码示例）：

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-14T10:31:28.343

您还可以输出看起来像常规字符（但不是）的 Unicode 字符并要求用户重复它们。西里尔字母有许多拉丁字母看起来很熟悉的字符，但编码不同：

```
А vs A    В vs B    Е vs E    Ѕ vs S    І vs I    К vs K
М vs M    Н vs H    О vs O    Р vs P    Т vs T    Х vs X 
```

这将很容易破解，但易于实施且易于用户解决。

（关于您的代码示例：跳过整个会话，只需从您的 captcha.php 文件中回显 CAPTCHA。确保包含解决方案的哈希。）

# sql-server - 如何通过 SQL Server 查询 LDAP 中的嵌套成员

> ID：10147724
> 
> 赞同：0
> 
> 时间：2012-04-13T20:15:25.103
> 
> 标签：sql-server, ldap

我想通过经理的名字查询团队中的所有成员。例如，如果经理 A 有两个直接下属：经理 B 和雇员 1。managerB 有两个直接下属：employee2 和employee3。我想获取经理 A 团队中的所有成员：经理 B、雇员 1、雇员 2 和雇员 3。

如果我使用下面的查询，我只能得到成员：managerB 和employee1。如何查询嵌套成员？谢谢！

```
Select * from openquery
(
      ADSI,'Select CN from ''LDAP://mydomain.com''
      WHERE objectCategory = ''Person'' AND objectClass = ''user''
      AND manager = ''CN=managerA,OU=Users,OU=Accounts,DC=mydomain,DC=com''
      order by CN
'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T04:49:43.633

如果将 LDAP 数据拉入 SQLServer 成本低（而且有意义！），也许您可​​以先这样做，然后在 SQLServer 中运行递归查询。这实际上对于您要完成的工作来说是完美的。如果您需要一些想法的样本，我[在这里](https://stackoverflow.com/questions/9170857/sql-server-select-query-help-for-stored-procedure-needed/9173040#9173040)回答了另一个递归问题。

# sharepoint - 如何使用 Excel VBA 将项目添加到 Sharepoint 列表？

> ID：10147731
> 
> 赞同：4
> 
> 时间：2012-04-13T20:15:50.473
> 
> 标签：sharepoint, ms-access, vba, excel

我有一个基于 Excel 的应用程序，它收集一些用户输入，并根据该用户输入进行一些计算。应用程序本身不存储任何用户输入或计算；当前，每当用户运行应用程序时，它都会将数据发送到 Access 数据库，并将一行插入到`xlTable`链接到 Sharepoint 列表的 Access 表中。相关代码为：

```
sub sendToSharepoint(userName as string, folderPath as string, calculatedValue as long)

dim db as DAO.database
dim insertStr as string

'open connection to Access db
set db=OpenDatabase(myDatabasePath)

'build insert string
insertStr="insert into xlTable (userName,folderPath,calculatedValue,workDate) values (""" & userName & """,""" & folderPath & """," & calculatedValue & ","#" & Now & "#)"

'insert values into xlTable, which adds them to the Sharepoint list
db.execute insertStr,dbFailonError

end sub 
```

因为我们在 Access 与 Sharepoint 断开连接时遇到了一些问题，因此没有填充列表，并且通常希望简化我们的数据传输过程，我想直接将数据从 Excel 发送到 Sharepoint，而不使用 Access。我已经阅读了一些关于使用 Web 服务更新 Sharepoint 的内容，但我无法弄清楚这些是如何工作的，或者如何在 VBA 中实现它们。

我需要关于我的 Sharepoint 列表的哪些信息才能从类似于上述代码的 Excel VBA 操作它？我需要添加任何参考资料吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T18:27:53.730

您可以使用 Camelot .NET 连接器使用下一版本 (2.0) 附带的 COM+ 组件直接从 VB/ASP 查询 SharePoint。请参阅[http://bendsoft.com/net-sharepoint-connector/](http://bendsoft.com/net-sharepoint-connector/)。

```
'define connection string
Dim connectionString
connectionString = "Server=mysharepointserver.com;Database=sites/test;Domain=;User=xxxx;Password=xxxx;Authentication=Ntlm;TimeOut=50;RecursiveMode=RecursiveAll;DecodeName=True;NoListFilters=False;ExpandUserFields=False;StrictMode=true;DefaultLimit=1000"

'activate connector com+
Dim connector
Set Connector = CreateObject("Camelot.SharePointConnector.Com.Connector")

' your query
Dim sql
sql = "insert into sharepointlist (userName, folderPath, calculatedValue, workDate) values ('" & userName & "', '" & folderPath & "', " & calculatedValue & ", '" & Now & "')"

' execute query
connector.ExecuteNonQuery(sql, connectionString) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-14T17:37:58.307

所有数据操作都可以通过[名为](http://msdn.microsoft.com/en-us/library/lists.lists_members%28v=office.12%29.aspx). `lists.asmx`您必须调用该网络服务。例如[`UpdateListItems`方法](http://msdn.microsoft.com/en-us/library/lists.lists.updatelistitems%28v=office.12%29.aspx)应该做 MS Access 现在所做的。

您可以用来访问列表网络服务的一个选项是“Microsoft SOAP Toolkit”，它必须作为办公组件安装（从未这样做过，但这里有一篇描述它的文章：http: [//oreilly.com/pub/h /1306](http://oreilly.com/pub/h/1306)

另一种选择是使用 MSXML 库（始终可用）并将 SOAP 请求作为简单的 HTTP 请求发送。然后将结果解析为xml。有一篇文章展示了如何做到这一点：http: [//blogs.msdn.com/b/jpsanders/archive/2007/06/14/how-to-send-soap-call-using-msxml-replace-stk .aspx](http://blogs.msdn.com/b/jpsanders/archive/2007/06/14/how-to-send-soap-call-using-msxml-replace-stk.aspx)

# performance - 站点地图请求是否应该快速加载？

> ID：10147740
> 
> 赞同：0
> 
> 时间：2012-04-13T20:16:13.480
> 
> 标签：performance, sitemap

鉴于访问站点站点地图的唯一客户端是搜索引擎蜘蛛，让这些站点地图请求快速加载是否有意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T23:00:48.507

如果您担心这些事情，您可以随时选择压缩它们 (.gz) - 由于压缩的 XML 站点地图文件要小得多，因此可以最大限度地减少负载。

# c++ - 如何更改地图中的元素并获取其位置？

> ID：10147746
> 
> 赞同：2
> 
> 时间：2012-04-13T20:16:43.807
> 
> 标签：c++, stl, std

当我有一个 std::map 时，是否有一种优雅的方式可以同时：

1.  插入/编辑给定键的元素
2.  获取插入元素的迭代器

我发现防止在地图中进行 2 次查找的最佳方法是：

```
std::map<int, int> myMap;
//do some stuff with the map
std::map<int,int>::iterator  it = myMap.insert(std::pair<int, int>(0,0)).first;
it->second = 0; //necessary because insert does not overwrite the values 
```

是否可以在单个语句/行中同时完成这两件事？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T20:40:40.117

唉，STL 函数和容器并不总是如您所愿。这是两个通用版本，第一个更像您上面的代码：

```
template<class Map>
inline typename Map::iterator ForceInsert1( 
    Map&                           m, 
    const typename Map::key_type&  k, 
    const typename Map::data_type& d )
{
    typename Map::iterator it = m.insert( 
        typename Map::value_type( k, d ) ).first;
    it->second = d; // only necessary if the key already exists
    return it;
}

template<class Map>
inline typename Map::iterator ForceInsert2( 
    Map&                           m, 
    const typename Map::key_type&  k, 
    const typename Map::data_type& d )
{
    typename Map::iterator it = m.find( k );
    if( it != m.end() )
    {
        it->second = d;
    }
    else
    {
        it = m.insert( typename Map::value_type( k, d ) ).first;
    }
    return it;
}

typedef std::map<int, int> MyMap;
void Foo( MyMap& myMap )
{
    ForceInsert1( myMap, 42, 100 );
    ForceInsert2( myMap, 64, 128 );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:33:42.860

你可以这样做：

```
map<int, int> m;
map<int, int>::iterator iter;
(iter = (m.insert(make_pair(1,1))).first)->second = 5; 
```

显然，第二个值`make_pair`是无关紧要的（只要它是正确的类型）。在这里，您将迭代器指向的值设置为 5。

有点厚脸皮，从技术上讲，这也是一种说法：

```
iter = myMap.insert(make_pair(0,0)).first, iter->second = 0; 
```

逗号 ( `,`) 运算符保证所有副作用发生在评估 rhs 之前，因此`iter`具有正确的值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T21:22:45.417

如果您只想要该值而不是该对：

```
int& value = myMap[0] = 0; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T20:20:12.683

```
myMap[0] = 0; 
```

如果不存在，此行将插入一个键为 0 的值，并且在任何一种情况下，它都会将该键的值设置为 0。

这与您所拥有的大致相似，可以将其制成一行：

```
myMap.insert(std::make_pair(0,0)).first->second = 0; 
```

# python - DJANGO：如何允许用户更改密码？

> ID：10147749
> 
> 赞同：1
> 
> 时间：2012-04-13T20:17:00.727
> 
> 标签：python, django, passwords, django-templates, authentication

所以我有用户（从 django.contrib.auth.models 导入用户）和 UserProfiles。在我的 UserProfile 视图中有一个编辑链接。此编辑链接允许用户更改其用户设置。在表单的密码部分，我看到帮助文本：

```
"Use '[algo]$[salt]$[hexdigest]' or use the change password form." 
```

“更改密码表单”实际上是指向[http://127.0.0.1:8000/user/1/user_edit/password/](http://127.0.0.1:8000/user/1/user_edit/password/)的链接，当我单击该链接时，我收到一条错误消息：

```
ViewDoesNotExist at /user/1/user_edit/password/

Could not import testdb.views.django.contrib.auth.views. Error was: No module named django.contrib.auth.views 
```

我一直在关注文档：[https ://docs.djangoproject.com/en/dev/topics/auth/](https://docs.djangoproject.com/en/dev/topics/auth/)

我究竟做错了什么？我听说这应该使用 djangos 模板，我需要将它们复制到我的应用程序模板文件夹吗？如果有，他们在哪里？

URLS.PY

```
from django.conf.urls.defaults import patterns, include, url
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('testdb.views',
url(r'^$', 'index'),
url(r'^^user/(?P<user_id>\d+)/$', 'user_detail'),
url(r'^user/(?P<user_id>\d+)/user_edit/$', 'user_edit'),
url(r'^user/(?P<user_id>\d+)/user_edit/password/$', 'django.contrib.auth.views.password_change', {'template_name': 'password_change_form'}),
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:39:24.020

You have a wrong URL pattern defined: Django tries to find `testdb.views.django.contrib.auth.views` as you define the password_change view inside `patterns('testdb.views',`.

Add a second pattern:

```
urlpatterns += patterns('django.contrib.auth.views',
  url(r'^user/(?P<user_id>\d+)/user_edit/password/$', 'password_change')
) 
```

That should resolve your issue.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:41:43.223

cfedermann 为您的问题提供了解决方案，但我对您为什么首先定义 password_change URL 感到困惑。此功能内置于管理员，并且 - 与所有其他管理员页面一样 - URL 已由管理员代码本身定义。

# javascript - 使用 Team Foundation Server 构建的 JavaScript 单元测试

> ID：10147753
> 
> 赞同：7
> 
> 时间：2012-04-13T20:17:25.277
> 
> 标签：javascript, tfs, jasmine, tfsbuild

我们使用的是 Team Foundation Server 2010，并且我们使用[Jasmine](http://pivotal.github.com/jasmine/)在本地机器上运行了一些 JavaScript 单元测试。

我们正在使用基于工作流的构建。

有没有人在构建期间成功运行 Jasmine 测试？如果 Jasmine 测试失败，你能破坏构建吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T21:07:23.053

我看到的方法是使用 CodePlex 上提供的 Chutzpah Test Runner：http: [//chutzpah.codeplex.com/](http://chutzpah.codeplex.com/)

这允许您从命令行运行 Jasmine/QUnit 测试，然后可以使用 InvokeProcess Activity 轻松地将其与 TFSBuild 集成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-19T07:07:36.590

你应该结帐[http://www.codit.eu/blog/2015/03/18/continuous-integration-with-javascript-nunit-on-tfsbuild-(part-23)/](http://www.codit.eu/blog/2015/03/18/continuous-integration-with-javascript-nunit-on-tfsbuild-(part-23)/)

博文描述了如何在 Team Foundation Build 服务器上执行 JavaScript 单元测试的完整场景。基本上它使用 Grunt (taskrunner) 和 Powershell。它还有一个您可以使用的代码覆盖率报告示例。

# php - Symfony 1.4 - PDO 连接错误：safe_mode/open_basedir 禁止打开

> ID：10147756
> 
> 赞同：1
> 
> 时间：2012-04-13T20:17:37.800
> 
> 标签：php, sqlite, symfony-1.4

我正在使用薄荷 12，

我正在尝试访问浏览器中的 symfony1 模块，并收到下一条错误消息：500 | 内部服务器错误 | Doctrine_Connection_Exception PDO 连接错误：safe_mode/open_basedir 禁止打开 /home/user/projects/sf/form/symfony/data/database.db 我正在关注这个实用的 [http://www.symfony-project.org/jobeet/1_4/Doctrine /zh/13](http://www.symfony-project.org/jobeet/1_4/Doctrine/en/13)

google 中没有太多相关信息。我找到了这个链接，但它没有解释如何解决这个问题。 [http://devzone.zend.com/597/sqlite-lean-mean-db-machine/](http://devzone.zend.com/597/sqlite-lean-mean-db-machine/)

我尝试在我的 php.ini 文件中设置 safe_mode=On/Off，但没有任何反应。我真的不知道如何解决这个问题。你能帮忙的话，我会很高兴。据我所知，访问数据库没有问题，它的 sqlite 和其他模块在 Symfony 1.4 中没有问题

非常感谢您

# ibm-mq - 远程 MQ 服务器身份验证

> ID：10147757
> 
> 赞同：2
> 
> 时间：2012-04-13T20:17:40.593
> 
> 标签：ibm-mq

我试图弄清楚我们将如何配置/设置身份验证、队列和队列管理器，以连接位于服务器/域上的 MQ 客户端，该服务器/域与将消息转发到的 MQ 服务器完全分开。

我假设在正常的组织环境中，您可以只使用 Active Directory（如果托管在 Windows 服务器上）进行身份验证/AD 查找。但是，在这种情况下，因为它们是不同的组织，您不能这样做吗？

您可以简单地将 SSL 证书应用于客户端/服务器并将其用作身份验证吗？如果是这样，那是否仅适用于连接中使用的通道？

不知道如何继续进行。

任何建议将不胜感激。

谢谢，

小号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:27:53.167

查看用于 v7.0 及更早版本的[强化 WebSphere MQ演示文稿。](http://t-rob.net/links)要记住的是 WMQ 不验证任何内容。它基于操作系统身份和组进行授权，但没有进行密码检查。

对于 QMgrs 和客户端位于 Windows 网络上的情况，连接使用 SID，因此似乎执行了一些有用的身份验证。但是，如果尝试来自非 Windows 平台的连接，Windows QMgr 将使用 ID 的字符串表示。例如，如果某人的桌面上有一个 Linux VM，他们可以轻松创建一个名为 MUSR_MQADMIN 的用户 ID，Windows QMgr 将接受该连接。有一个设置会导致 Windows QMgr 只接受与它可以解析的 SIDS 的连接，但即使在那里，它也只是知道 SID 值是什么来在连接上欺骗它们的问题。

这里的教训是，**任何**QMgr，甚至是 Windows 上的 QMgr，都必须配置为对远程连接进行身份验证。对于 WMQ v7.1 及更高版本，QMgr 具有将 X.509 证书 DN 映射到用户 ID 或执行 IP 过滤的功能。在 v7.1 之前，这些功能需要一个出口，例如[BlockIP2](http://mrmq.dk)。Capitalware 销售的[MQAUSX](http://www.capitalware.biz/mqausx_overview.html)具有BlockIP2 的功能，并且会进行ID 和密码认证，并得到支持。

第一个建议是使用 v7.1 QMgr，以便获得`CHLAUTH`映射和过滤规则。即使您不使用证书 v7.1 也会限制管理连接，因此攻击者更难获得完整的管理员权限。然后，如果您需要密码验证，请结合使用 SSL 通道（加密密码并防止简单的重放攻击）以及您可以自己编写或购买的出口。

请注意，允许来自域外的连接不会带来任何新的挑战。未在通道定义中或通过出口设置 MCAUSER 的 v7.1 之前的 Windows QMgr 允许远程管理访问，即使来自本地 Windows 域的连接也是如此。始终需要加强 QMgr，即使如果管理员没有为诚实的用户设置身份验证，他们也会收到授权错误*。*

**摘要：**
对于来自您的管理域之外的客户端，我建议使用相互验证的 TLS/SSL 通道。我在上面链接到的同一页面还包含 WMQ 安全实验室指南和脚本，它们展示了如何编写 WMQ 证书的创建和交换脚本以及使用它们配置 WMQ Explorer。

无论您做什么，`MCAUSER`任何合法通道上的 都必须在配置中或通过退出设置。如果允许客户端指定 ID，则没有什么可以阻止它指定管理 ID。对于未使用的通道，例如`SYSTEM.DEF.*`and `SYSTEM.AUTO.*`，将 MCAUSER 设置为一个不能是本地 ID 的值，例如`no!body`v7.1 和更高版本的 or `*NOACCESS`。

# c++ - C++ 符号：" 可能重复： C 扩展名：？运营商 我在破译一些 C++ 代码时遇到了麻烦，并且无法通过搜索找到任何东西。任何人都 问问题 问问题 2012-04-13T20:18:11.890 173 次 This question shows research effort; it is useful and clear 4 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 可能重复： C 扩展名：？运营商 我在破译一些 C++ 代码时遇到了麻烦，并且无法通过搜索找到任何东西。任何人都可以使用“<”帮助我使用下面的代码吗？符号？ int maximumLength(int countA, int countB, int maxA, int maxB) { long long ca=countA,cb=countB,ma=maxA,mb=maxB; if(ma==0) ca=0; if(mb==0) cb=0; long long res=ca+cb; // any help on the below two lines is appreciated! res]*src="([^"]*)" 弹出窗口是这样的： url:'([^']*)' 另见：正则表达式测试工具：http ://rubular.com/r/W5aSrgMD8B c++ 4 0 回答 0 Related 1 jquery - 带有css精灵的jQuery背景位置动画不起作用 2 android - 在 Android 设备上调用以前的布局？ 1 ruby-on-rails - 如何在 ActiveAdmin 的仪表板中使用自定义查询自定义可排序表 1 c - 使用链表实现后缀的中缀 0 php - 消息代理和消息队列 1 c# - 如何检测彼此靠近的两个窗口 1 mysql - 如何检索触发器中select语句返回的多个值？ 1 php - 神秘的 url 重写 apache/php 2 javascript - 在 extjs4 如何在另一个函数中调用函数？ 1 css - table, td, div heigth 100% 不起作用 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：10147761
> 
> 赞同：4
> 
> 时间：
> 
> 标签：c++

> **可能重复：**
> [C 扩展名：<? 和>？运营商](https://stackoverflow.com/questions/3437410/c-extension-and-operators)

我在破译一些 C++ 代码时遇到了麻烦，并且无法通过搜索找到任何东西。任何人都可以使用“<”帮助我使用下面的代码吗？符号？

```
int maximumLength(int countA, int countB, int maxA, int maxB) { 
    long long ca=countA,cb=countB,ma=maxA,mb=maxB; 
    if(ma==0) ca=0; 
    if(mb==0) cb=0; 
    long long res=ca+cb; 

    // any help on the below two lines is appreciated!
    res<?=(cb+1)*ma+cb;
    res<?=(ca+1)*mb+ca;

    return (int)(res); 
} 
```

# ruby - 在 Nokogiri 中的特定 XML 标记之后插入文本

> ID：10147762
> 
> 赞同：0
> 
> 时间：2012-04-13T20:18:13.143
> 
> 标签：ruby, nokogiri

我想创建以下 XML：

```
<?xml version="1.0">
<foo>
  <bar/>
  TEXT GOES HERE
</foo> 
```

使用 Nokogiri 构建结构非常简单：

```
builder = Nokogiri::XML::Builder.new do |xml|
  xml.foo { 
    xml.bar {}
  }
end
puts builder.to_xml 
```

我想不通的是*如何*`TEXT GOES HERE`在.`<foo>` *`<bar/>`*

 *显然，`xml.foo("TEXT GOES HERE")`产生之前的文本`<bar>`。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:53:55.523

你想要的[`text`](http://nokogiri.org/Nokogiri/XML/Builder.html#method-i-text)方法：

```
require 'nokogiri'
builder = Nokogiri::XML::Builder.new do |xml|
  xml.foo { 
    xml.bar
    xml.text "TEXT GOES HERE"
  }
end

puts builder.doc
#=> <?xml version="1.0"?>
#=> <foo><bar/>TEXT GOES HERE</foo> 
```*

# python - 为什么 PyRun_SimpleString 的“从导入”失败？

> ID：10147774
> 
> 赞同：4
> 
> 时间：2012-04-13T20:19:08.113
> 
> 标签：python, c, python-c-api, python-embedding

我正在开发一个简单的（？）嵌入式 Python 项目。我有一个自定义包，它已通过“setup.py install”安装到站点包中，例如：

在 C:\Python27\Lib\site-packages\:

 `````
mypackage\
    __init__.py
    subpackage\
        __init__.py
        subpackage.py
    .... 
    mymodule.py 
````  `只是做了一些简单的嵌入调用，我得到的一些行为与我在运行 Python 的 cmd 窗口中得到的行为不匹配。具体来说：

```
PyRun_SimpleString("import mypackage") //Success (return == 0)
PyRun_SimpleString("from mypackage import subpackage") //Success
PyRun_SimpleString("from mypackage import mymodule") //Fail (return == -1) 
```

...而所有这些在 cmd 窗口中都可以正常工作（没有 ImportError，我可以在例如`dir(mymodule)`

我知道由此产生的解释器与`Py_Initialize()`您在 cmd 窗口中获得的解释器略有不同，特别是 sys.path ...在阅读了一些其他答案后，我尝试将 '' 作为第一个元素插入 sys .path： `PyRun_SimpleString("import sys\nsys.path.insert(0,'')")`在导入失败之前，但没有运气，仍然返回-1。还尝试将 sys.path 附加到“C:\Python27\Lib\site-packages\mypackage”，但导入“mymodule”（mymodule.py）仍然没有运气。

基于 SO 和其他网站上的其他示例，我在导入时尝试了一些变体，例如

```
__import__('mypackage',globals(), locals(), fromlist=['mymodule'])
__import__('mypackage.mymodule',globals(), locals(), fromlist=['mymodule']) 
```

也尝试过`PyImport_ImportModuleEx`，与 PyRun_SimpleString 一样，它适用于除“from mypackage import mymodule”之外的所有内容。

此外：此方案在 MacOS/Python 2.7 下运行良好。它只是在Windows下失败了。

Any ideas where this could be going off the rails?

**UPDATE**: some additional information: 'subpackage.py' imports an extension library (let's call it 'utilites.pyd'). I'm able to import other ".py" modules that do not import this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T20:56:12.443

Taking the rare opportunity to answer my own question...

Once I narrowed the problem down to modules that were importing the utilities.pyd extension, I did some digging around with the Dependency Walker tool and discovered that there was an error loading MSVCR90.DLL (file not found). In the old days, you could just drop that DLL into your application's path and it would usually work.

But nowadays (Vista and after), it's a bit more involved. After reading [this interesting blog post](http://www.davidlenihan.com/2007/07/winsxs.html) about an older MSVCR DLL, I figured I would try updating the `<dependency>` section of the manifest of my .pyd file to point to the same MSVCR90.DLL as Python27.DLL which resides in the \Windows\WinSxS (side-by-side) folder.

After that, it worked like a charm. Now I just need to figure out how to automatically include the dependency section during `python setup.py mypackage`, but that's another question :-)``

# xcode - 动画时如何检测两个图像帧的相交？

> ID：10147788
> 
> 赞同：1
> 
> 时间：2012-04-13T20:20:22.623
> 
> 标签：xcode, animation, uiview, uiimageview, intersect

在我的 UIView 中，我创建了一个名为**targetView**的 UIImageView，并在其中将其设置为一系列动画：

```
[UIView animateWithDuration:1.0
                 animations:^{self.targetView.center = CGPointMake(220,20);}
                 completion:^(BOOL finished){
                                             //another animation will begin;
                                            }]; 
```

我还创建了另一个名为**shootView**的 UIImageView ，它会在手指滑动时移动到目标方向。它的运动也被实现为动画。在其动画结束时，检测与 targetView 的相交：

```
[UIView animateWithDuration:1.0
                 animations:^{
                 self.shootView.center = CGPointMake(destX, destY);}
                 completion:^(BOOL finished){
                            if (CGRectIntersectsRect(self.targetView.frame, self.shootView.frame)) {
                            //do something
                             }]; 
```

现在有一个问题：intersect 命令只有在 targetView 已经到达当前动画的终点并且 shootView 恰好在那里时才能正常工作。当 targetView 在动画中间某处移动时，即使在视觉上很明显两帧相交，也无法检测到相交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-18T15:31:54.620

这种方法可能很棘手，因为您只能在 UIView 动画的开始和结束时获得回调。在您的示例中，仅在动画完成后调用 CGRectIntersectRect 方法。

一种解决方案可能是使用 NSTimer 为拍摄视图的位置设置动画，并随着位置的每次变化进行碰撞检测。IE

```
[NSTimer timerWithTimeInterval: 0.03 target: self selector: @selector(timerTicked:) userInfo: nil repeats: YES];

-(void) timerTicked: (NSTimer*) timer {

  // do move
  // check for colisions
  // optional invalidation of timer
} 
```

# ruby-on-rails - 如何从执行请求的地方检索 URL 的值？

> ID：10147789
> 
> 赞同：1
> 
> 时间：2012-04-13T20:20:22.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, url, request

我正在使用 Ruby on Rails (3.2.2)，我想检索执行请求的 URL 的值。也就是说，假设我在`http://stackoverflow.com/questions/10147789`网页上，并且在该页面内容中有一个链接，该链接具有指向我的应用程序的 URL `http://my_application.com`，当我访问该 URL 时，我想检索该`http://stackoverflow.com/questions/10147789`字符串。

**是否可以？如果是这样，怎么做？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:28:52.883

是的。您可以使用[HTTP_REFERER](http://en.wikipedia.org/wiki/HTTP_referer)

```
request.referer 
```

# mysql - mysql UPDATE WHERE x<(SELECT WHERE)

> ID：10147794
> 
> 赞同：-1
> 
> 时间：2012-04-13T20:20:46.850
> 
> 标签：mysql, sql, subquery

我想要这样的更新，但它有一个问题：

```
UPDATE table
SET data=1
WHERE data2 < (
    SELECT MIN(data2)
    FROM table
    WHERE data2 < int
    AND data=0
) 
```

错误：您不能在 FROM 子句中指定目标表“表”进行更新

这个怎么运作？

我想在表中将数据设置为 1，其中同一表中的 data2(timestamp) 低于实际时间戳，并且它是最低的，并且该行中的数据为 0

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:24:19.567

从您的示例中很难看出，但如果 data 和 data2 是一致的，为什么不这样做：

```
UPDATE table SET data=1 WHERE data2 < int AND data = 0 
```

# ruby-on-rails - Rails 页面重新加载 - 如何控制 URL？

> ID：10147796
> 
> 赞同：1
> 
> 时间：2012-04-13T20:21:00.533
> 
> 标签：ruby-on-rails

我在rails 中有一个修改ActiveRecord 的页面。自然，如果用户重新加载页面，我们将尝试重复修改，但失败了。我想重定向用户将“重新加载”的 URL（使用浏览器的“重新加载当前页面”按钮）。我想使用相同的控制器、相同的 ID、不同的操作（不是“更新”而是“编辑”）重新加载谢谢。

添加了更新方法

```
 # PUT /machines/<uuid> - a catch-all path for machine and channel modifications

  def update

    puts "machines:update #{params.to_s}" if @@debug_machines
    @id = params[:id]
    @machine = Machine.find_by_uuid(@id)

    puts "machines:update #{@machine.to_s_full}" if @@debug_machines

    session[:machine_id] = @id

    if params[:delete_channel]
      first = params[:delete_channel].keys.first.to_i
      puts "machines:update delete_channel #{first.to_s}" if @@debug_machines
      last = @machine.last_light_index(first)
      if last
        last.downto(first) do |i|
          @machine.channels.delete(@machine.channels[i])
        end
      else
        @machine.channels.delete(@machine.channels[first])if @machine.channels[first]
      end

    elsif params[:delete_filter]
      i = params[:delete_filter].keys.first.to_i
      puts "machines:update delete_filter  #{i.to_s}" if @@debug_machines
      channel = @machine.channels[i]
      puts "machines:update delete_filter  #{channel.to_s}" if @@debug_machines
      @machine.channels.delete(channels) if channel

    elsif params[:add_filter]
      i = @machine.last_light_index(params[:add_filter].keys.first.to_i)
      puts "machines:update add_filter channel #{i.to_s}" if @@debug_machines
      light = @machine.channels[i].light
      puts "machines:update add_filter light #{light.to_s}" if @@debug_machines
      @machine.channels.insert(i + 1, Channel.new(:light => light))

    elsif params[:commit]

... lots more similar stuff here ...

    end

    puts "machines:update after update #{@machine.to_s_full}" if @@debug_machines

    render :action => :edit
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:37:59.323

It's as simple as

```
redirect_to :action => :edit 
```

# php - Propel ORM中左连接的连接递归问题

> ID：10147802
> 
> 赞同：1
> 
> 时间：2012-04-13T20:21:15.900
> 
> 标签：php, orm, propel

使用 Propel ORM (1.6.5)，当我 joinWith() 一个表“A”到表“B”，然后在结果 PropelObjectCollection 上调用 toArray() 时，每个 A 记录中 B 的条目包含 A 的所有记录再次（见下面的转储）。

A 是 B 的 LEFT JOINd。A 中的每条记录都指向 B 中的一条。我正在使用的代码：

```
$oAQuery = AQuery::create()
  ->joinB('b', Criteria::LEFT_JOIN)
    ->useBQuery()
        ->_if(strlen($sB))
          ->filterByBField1(str_replace(' ', '%', $sCity))
        ->_endif()
      ->endUse()
  ->with('b');

$oCollection = $oAQuery->find();
$aArray = $oAQuery->toArray(); 
```

toArray() 转储：

```
Array
(
    [0] => Array
        (
            [Field1] => 29
            [Field2] => 0
            [B] => Array
                (
                    [BField1] => 7
                    [BField2] => 10
                    [As] => Array
                        (
                            [A_0] => *RECURSION*
                            [A_1] => Array
                                (
                                    [Field1] = 234
                                    [Field2] = 3424
                                    ... 
```

我想停止这个，主要是因为有很多记录，并且通过递归，我很容易超过 PHP 的 512m memory_limit（我什至做了 2048m 的测试，仍然过去了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T09:02:06.203

您可以编写自己的格式化程序，以便决定如何处理结果集： http: [//www.propelorm.org/reference/model-criteria.html#using_an_alternative_formatter](http://www.propelorm.org/reference/model-criteria.html#using_an_alternative_formatter)。

使用自定义格式化程序需要额外的方法调用：

```
$aArray = $oAQuery->setFormatter('MyCustomFormatter')->find();
// instead of $aArray = $oAQuery->toArray(); 
```

# android - android webview布局以占用剩余空间

> ID：10147803
> 
> 赞同：5
> 
> 时间：2012-04-13T20:21:16.340
> 
> 标签：android, android-layout

我想创建一个看似简单的布局，但我遇到了一些问题。布局由标题、作为 web 视图的正文和底部的页脚横幅组成，如所附草图所示。

![在此处输入图像描述](../Images/06d976a747ee3e3db258533ef14ab7ab.png)

**我需要 webview 来占用页眉和页脚之间的所有剩余空间。**

我试过这个：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
 xmlns:android="http://schemas.android.com/apk/res/android"
 android:orientation="vertical"
 android:background="@drawable/back"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent">
 <ImageView  
android:id="@+id/banner"
     android:layout_height="wrap_content"
     android:layout_width="wrap_content" 
     android:src="@drawable/banner" /> 
<WebView  
    android:id="@+id/webview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bck"
    android:layout_weight="2"
    android:layout_gravity="center"/>
  <RelativeLayout   
     android:layout_width="wrap_content"   
     android:layout_height="wrap_content"
     android:layout_weight="4"> 
        <com.mobclix.android.sdk.MobclixMMABannerXLAdView 
                android:id="@+id/banner_adview"
                android:layout_width="320dip"
                android:layout_height="50dip"
                android:layout_gravity="center"
                android:layout_alignParentBottom="true" />
   </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T20:27:20.737

将它们全部放在 RelativeLayout 中，并在 webview 中使用 layout_below="@id/header_banner" 和 layout_above="@+id/footer_banner"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:30:05.410

这将为您工作：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/ddd"
    android:orientation="vertical" >
     <ImageView  
     android:id="@+id/banner1"
     android:layout_height="wrap_content"
     android:layout_width="fill_parent" 
     android:src="@drawable/atm" /> 
    <WebView  xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/webview1"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1" 
    />
    <ImageView  
     android:id="@+id/banner2"
     android:layout_height="wrap_content"
     android:layout_width="fill_parent"
     android:layout_weight="0" 
     android:src="@drawable/atm" /> 
</LinearLayout> 
```

# entity-relationship - yEd 到 MySQL Workbench

> ID：10147805
> 
> 赞同：0
> 
> 时间：2012-04-13T20:21:22.700
> 
> 标签：entity-relationship, mysql-workbench

yEd 是一款免费的建模软件工具。我真的很喜欢使用这个建模软件工具，因为它的简单性和快速部署。

在我的工作中，我会在这里和那里休息一下，只是梦想我在 yEd 中的一些副项目实体关系。所以在一段时间内构建了一些东西之后，我想把它转移到 mysql 中。

经过几次搜索后，我找不到与 mysql workbench 和 yEd 相关的任何内容。有没有办法将 yEd 模型导入 mysql 工作台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:08:16.993

嗯，yEd 生成的 XML 文件非常容易理解。我最终设法构建了一些 XSLT 文件，这些文件能够读取源 yEd 文件并将它们转换为我需要的任何输出。（我正在生产类似于 XProc 标准中使用的管道）

我在这个领域的开发非常符合我的需求，但只要您现在具备一些 XML/XSLT 基础知识，这就是一件容易的事。

如果您需要这方面的帮助，请随时提出更多问题。

# javascript - 传递参数

> ID：10147808
> 
> 赞同：1
> 
> 时间：2012-04-13T20:21:38.150
> 
> 标签：javascript, html, asp.net-mvc-3

我如何传递所选类型的值？我想从这里传递它：

```
 @Html.DropDownListFor(model => model.SelectedType, Model.Types, new { @onchange = "getSpecificFields(value in here)",}) 
```

问题是，在我进行第一次初始下拉选择后，一切都正常加载。但是，如果我去更改我的选择，页面不会更新到新的选择。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:23:51.577

```
@Html.DropDownListFor(
    model => model.SelectedType, 
    Model.Types, 
    new { 
        onchange = "getSpecificFields(this.value)"
    }
) 
```

进而：

```
<script type="text/javascript">
    function getSpecificFields(value) {
        $.get('@Url.Action("CreateSpecific", "Employee")', { type: value },
            function(data) {
                $("#specificFields").replaceWith(data);
            }
        );
    }
</script> 
```

或使用完全不显眼的 javascript：

```
@Html.DropDownListFor(
    model => model.SelectedType, 
    Model.Types, 
    new { 
        id = "myddl",
        data_url = Url.Action("CreateSpecific", "Employee")
    }
) 
```

然后在一个完全独立的 javascript 文件中：

```
$(function() {
    $('#myddl').change(function() {
        var data = { type: $(this).val() };
        var url = $(this).data('url');
        $.get(url, data, function(result) {
                $("#specificFields").replaceWith(result);
        });
    });
}); 
```

# ruby-on-rails - Node.js 从 Rails 应用中消费 json

> ID：10147810
> 
> 赞同：0
> 
> 时间：2012-04-13T20:21:49.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, node.js, ruby-on-rails-3.1

我有一个 json 字符串（来自我的 Rails 应用程序）：

```
http://localhost:3000/employees/1.json 
```

如何让我的 Node.js 应用程序使用这些数据？

这是我现在在 Node.js 应用程序中的代码：

```
var employees = JSON.parse("http://localhost:3000/employees.json") 
```

这是我得到的错误：

```
提示 $ 节点 app.js

节点.js:201
        扔 e; // process.nextTick 错误，或第一次滴答时的 'error' 事件
              ^
SyntaxError：意外的标记 h
    - 在 Object.parse (native)
    - 在对象。(/Documents/Coding/dustin/employees.js:19:22)
    - 在 Module._compile (module.js:441:26)
    - 在 Object..js (module.js:459:10)
    - 在 Module.load (module.js:348:31)
    - 在 Function._load (module.js:308:12)
    - 在 Module.require (module.js:354:17)
    - 在需要时（module.js:370:17）
    - 在对象。(/Documents/Coding/dustin/app.js:34:17)
    - 在 Module._compile (module.js:441:26)

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T13:06:54.667

看到这个问题：

[使用 Node.JS，如何将 JSON 对象读入（服务器）内存？](https://stackoverflow.com/questions/10011011/using-node-js-how-do-i-read-a-json-object-into-server-memory/10011078#10011078)

您应该先读取文件，然后再解析它。

```
var employees = JSON.parse(fs.readFileSync('employees.json', 'utf8')); 
```

如果由于某种原因您的 Rails 应用程序在其他机器上运行，您需要为此发出 http 请求。你可以试试这个：

```
var site = http.createClient(port, host);

var request = site.request("GET", pathname, {'host' : host});
request.end();

request.on('response', function(response) {
  var json = '';

  response.on('data', function(chunk) {
    json += chunk;
  });

  response.on('end', function () {
    employees = JSON.parse(json);
  });
}); 
```

# css - 已知祖父父子模式时父的隐式 css 样式

> ID：10147815
> 
> 赞同：2
> 
> 时间：2012-04-13T20:22:06.713
> 
> 标签：css

我在html和css中有这种情况：

css

```
.heading-border{ border-bottom:2px groove; } 
```

html（为简洁而编辑）

```
 <tr class="heading-border">
  <th>Some Label</th> 
```

是否有某种方法可以`<tr>`从 css**而不是 javascript**定位到这里，而不必显式定义类（换句话说，将此样式分配给任何`<tr>`包含 a的样式`<th>`？原因是这种情况存在于许多地方，我不希望必须在每个地方标记一个班级。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T20:27:18.330

目前这是不可能的，但我们可能会在 4 级选择器中使用它。将来，您将能够通过在其前面加上美元符号来显式声明选择器的主题：

```
$div p {
  /* div is the subject, not p */
} 
```

上面符号的一个注意事项是它似乎仍然在空中。我读过报告说它会是这样`?`，其他人则认为它会是这样`!`。底线，看规格:)

[http://www.w3.org/TR/selectors4/#subject](http://www.w3.org/TR/selectors4/#subject)
[http://dev.w3.org/csswg/selectors4/#subject](http://dev.w3.org/csswg/selectors4/#subject)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:24:50.050

不幸的是，没有。不仅仅是 CSS。它不够聪明，不能像小孩子那样倒着工作。您只能嵌套一种方式。

# encoding - 如何更改 MemoryStream 中的编码（使用它来创建 pdf）

> ID：10147817
> 
> 赞同：0
> 
> 时间：2012-04-13T20:22:12.497
> 
> 标签：encoding, character-encoding, itextsharp

有如下代码：

```
 var workStream = new MemoryStream();
    var doc = new Document(PageSize.LETTER, 10, 10, 42, 35);
    PdfWriter.GetInstance(doc, workStream).CloseStream = false;
    doc.Open();
    var builder = new StringBuilder();
    builder.Append("MY LONG HTML TEXT");
    var parsedHtmlElements = HTMLWorker.ParseToList(new StringReader(builder.ToString()), null);
    foreach (var htmlElement in parsedHtmlElements)
        doc.Add(htmlElement);
    doc.Close();
    byte[] byteInfo = workStream.ToArray();
    workStream.Write(byteInfo, 0, byteInfo.Length);
    workStream.Position = 0;
    return new FileStreamResult(workStream, "application/pdf") 
```

还有问题 - 我想在我的 pdf 中加入一些波兰语字母（如“ą”、“ę” 等）怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T04:06:40.187

您需要注册字体，然后使用样式表指定编码：

```
FontFactory.Register("c:\\windows\\fonts\\tahoma.ttf");

StyleSheet styles = new StyleSheet();
styles.LoadTagStyle(HtmlTags.BODY, HtmlTags.FONTFAMILY, "tahoma");
styles.LoadTagStyle(HtmlTags.BODY, HtmlTags.ENCODING, "Identity-H");               

var html = @"data";
var parsedHtmlElements = HTMLWorker.ParseToList(new StringReader(html), styles); 
```

# json - 脚本 json 文件在地图上创建标记和显示标记

> ID：10147818
> 
> 赞同：1
> 
> 时间：2012-04-13T20:22:17.857
> 
> 标签：json, markers

对不起->但我很满意

我只想将我的 cooord.json 文件（来自 php/mysql 请求）放入 javascript 的参数中以创建标记并将其显示在地图上

*   首先我的html代码
*   两个myjson文件

谢谢 Desbutes

```
 <!DOCTYPE html>
<html>
<head>
<title>Développez avec les API Google Maps</title>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<style type="text/css">
    html {
    height: 100%;
    }
    body {
    height: 100%;
    margin: 0px;
    padding: 0px;
    }
    #map_canvas {
    height: 100%;
    }
</style>
        <!-- http://www.fsupoitiers.fr/mouvement/coorrdon.json -->
   <script type="text/javascript"
        src="http://maps.google.com/maps/api/js?sensor=false" ></script>
<script type="text/javascript">
function initialize() {
    var latlng = new google.maps.LatLng(46.587953, 0.34611);
    var myOptions = {
    zoom: 11,
    center: latlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
    };
 //var url = 'http://www.fsupoitiers.fr/mouvement/coorrdon.json';

  $.getJSON('http://www.fsupoitiers.fr/mouvement/coorrdon.json', function(data) {

    map= new google.maps.Map(document.getElementById("map_canvas"), myOptions);
    var bounds=new google.maps.LatLngBounds();
    infowindow = new google.maps.InfoWindow({
                    content: 'ec_ville'
                  });

    $.each(data, function(index, c) {   

          var latlng = new google.maps.LatLng(c.fields['lat'],c.fields['lng']); 

          var marker = new google.maps.Marker({
                          map: map,
                          position: latlng,
                          title:'ec_nom:'+c.ec_nom
                      });
          bounds.extend(latlng);

          google.maps.event.addListener(marker, 'click', function() {
              infowindow.close();
              infowindow.setContent('ec_nom:'+c.ec_nom);
              infowindow.open(map, marker);
          });

    });//close each
    map.fitBounds(bounds);  
    });//close getjson

    }//close initialize
</head>
<body onload="initialize()">
<div id="map_canvas" style="width: 100%; height: 100%;"></div>

</body>
</html> 
```

现在我的 coord.json 文件

```
{"lat":"46.8529510","lng":"0.5433920","ec_nom":"ANTRAN","ec_type":"ECOLE       ELEM","ec_adresse":"PLACE DE L EGLISE","ec_ville":"ANTRAN","ec_cp":"86100"} 
```

如果你读到这里，那是你读过代码所以......再次感谢

# jquery - jQuery / Colorbox - 将一个变量传递给

> ID：10147819
> 
> 赞同：0
> 
> 时间：2012-04-13T20:22:21.177
> 
> 标签：jquery, colorbox

我对 jQuery 一无所知，并且已经尝试了一个多星期。看来我需要专业的建议。在我们的教会网站上，我们有一个包含成员生日的页面。如果我可以将成员 ID 号放入 inline_content 块中，我可以通过一些参考获得我需要的所有数据。前任。$memberid=$_REQUEST['memberid']; 这是我正在使用的：

blanknew.php（页面标题）

大量的PHP代码

头
链接 rel="stylesheet" href="_css/colorbox.css" script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" /script> script src="_js/jquery.colorbox.js" /script> 脚本 $(document).ready(function(){ $(".inline").colorbox({inline:true, href:"#inline_content", width: "300px"}); }); /script
/head

body
这里我有一个包含成员名称（和成员 ID）的表

td nowrap="nowrap" align="left" a class="inline" href="#inline_content?memberid=' . $ID .'"' 。$fname 。'/a /td; （我很确定这是错误的）

```
<div style='display:none'>
    <div id='inline_content' style='padding:10px; background:#fff;'>
      <?php 
echo $_REQUEST['memberid']; (this gives me nothing)
?> 
      </div>
</div> 
```

我并不懒惰，但我只是不知道从哪里开始。如果有人能给我我需要的代码以及确切的放置位置，我将不胜感激。（我不能说我对代码的自动格式化印象深刻——这已经够糟糕了）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:45:28.137

我不完全确定您可以使用什么或您的最终目标是什么，但这里有一些我的想法。

如果它们包含在`$(document).ready()`函数中，您可以将这样的脚本函数放在页面顶部。听起来您想要做的是将成员 ID 放入您显示的 div 中。您可以为页面上的每个成员设置一个事件，这样当他们被点击时，无论您存储了他们的“成员 ID”，都可以显示在您的内联内容中。（您的意思是用 隐藏内联内容`display:none`吗？您可以将其应用于内部 div 并具有相同的结果 - 如果`$_REQUEST['memberid']`已填充，`display:none`除非您有更改该属性的操作，否则您将看不到它。）

这是一个可能对您有用的想法：

```
<script>
    $(document).ready(function() {
       // Specify a class for all your members and then 
       $(".some_clickable_element_with_member_id").click(function() {
           $("#inline_content").html( $(this).attr("id") );
           return false; // if you don't want the click to go anywhere (assuming you're using an <a> tag.
       });
    });
</script> 
```

您是否尝试设置一个表格，以便您希望通过超链接传递到后续页面的成员 ID 的隐藏属性？你不需要 jQuery。您可以在 php 中使用 memberid 作为目标页面的查询字符串的一部分来构建链接。例如：

```
<a href="processThisMember.php?member_id=<?php echo $id; ?>">
    <?php echo $fname; ?>
</a> 
```

**编辑**

在尝试集成插件之前，您可能希望等待对 jQuery 和 HTML 更加熟悉。阅读有关[选择器](http://api.jquery.com/category/selectors/)和[操作](http://api.jquery.com/category/manipulation/)的 jQuery 文档，一旦您了解或部分吸收了如何查找元素并对其进行操作，您将能够更好地解决这个问题和未来的场景。

要为您的链接访问此人的 id，只需询问 id：

```
$(this).attr("id"); 
```

`$(this)`根据上下文变化。我假设您正在对链接进行操作`$(".memberid").click(function() {`。此时，$(this) 指的是被点击的超链接。

要访问名称，只需请求 html(); 这将获取开头和结尾之间的内容

```
$(this).html(); 
```

把这一切放在一起，

```
$("#inline_content").html( $(this).attr("id") + " " + $(this).html() ); 
```

我不熟悉颜色框，所以我不知道您应该或应该如何将值传递给它。我建议给出 # 的 href，但看起来*这*就是颜色框被激活的方式。将链接更改回 href

```
<a href="#inline_content" id=...></a> 
```

将课程和 id 留在那里，希望您能够接受这些想法并产生您正在寻找的行为。当你问这个问题时，你仍然有可能留下关于你如何拥有它的href，但希望这会让你到达你想去的地方。一次改变一件事并观察行为如何变化。

`$("#inline_content").html();`删除仅包含我不打算让您使用该信息的脚本标签。

当您更改背面时，您应该会再次看到您的颜色框弹出。

# html - HTML5 自定义数据属性。每个元素有多少？

> ID：10147823
> 
> 赞同：0
> 
> 时间：2012-04-13T20:22:49.300
> 
> 标签：html

每个元素允许多少个自定义数据标签。每个元素可以有多个数据属性吗？我可以做这样的事情吗？

```
<img data-longDescription="This is my really long description that would be longer than this." data-anotherCustomData="Hi Mom" src="mysrc.jpg" alt="my image" /> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T20:24:36.180

您可以拥有任意数量的`[data-]`属性。重要的是它们不共享相同的名称，并且它们的前缀为`data-`.

我建议查看[HTML5 规范](http://dev.w3.org/html5/spec/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:26:27.167

您可以拥有任意数量的`data-*`属性，并且每个属性都可以随心所欲。

# php - PHP在require_once上失败

> ID：10147824
> 
> 赞同：7
> 
> 时间：2012-04-13T20:22:53.620
> 
> 标签：php, include

我有一个 PHP 脚本，其中包括（或“需要”）一组其他脚本。这对于导入我的所有课程非常有效。我遇到的是 HTTP 500 错误。我已经筛选并逐个注释掉代码，以确定它在我的一个文件中的 require_once 上失败。

这是代码：

索引.php：

```
<?php
require_once("std/classes.php");
?> 
```

和标准/classes.php：

```
<?php
RequireStandards();
RequireAddons();

function RequireStandards( )
{
    $ClassFiles = scandir("classes/standard");

    foreach( $ClassFiles as $ClassFile )
    {
        if( $ClassFile == "." || $ClassFile == ".." )
            continue;

        //require_once("classes/standard/" . $ClassFile );
    }
}

function RequireAddons()
{
    $ClassFiles = scandir("classes");

    foreach( $ClassFiles as $ClassFile )
    {
        if( $ClassFile == "." || $ClassFile == ".." || $ClassFile == "standard" )
            continue;

        //require_once("classes/" . $ClassFile );
    }
}

?> 
```

此代码将按原样运行，但一旦我取消注释需求，它就会失败。令我感到奇怪的是，我在此服务器上还有许多其他站点，它们的行为方式几乎相同。

我觉得好像我以某种方式关闭了我的 PHP 错误报告......我不知道如何重新打开；因为我刚刚升级到 PHP 5.3。如果 PHP 失败，我通常会期望在我的浏览器中出现“无法打开文件”或类似内容。

也许有人可以告诉我为什么这会触发 HTTP 500，或者只是如何重新启用错误报告。将不胜感激；这似乎没有多大意义。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-13T20:30:44.257

要启用错误报告：

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', 1);
require_once("std/classes.php");
?> 
```

希望这应该有效。

编辑：如果这确实有效，请记住在将任何内容放入实时、面向公众的环境之前关闭显示错误！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T20:33:52.697

您可以使用 error_reporting() 函数暂时重新打开错误报告，例如，为了显示所有错误，请将以下代码放入您的文件中：

`error_reporting(E_ALL);`

当然，要永久更改它，您应该编辑您的 php.ini 文件，并确保您启用了 error_reporting 以及 display_errors（至少如果这不是生产环境）。你也可以试试：

`ini_set('display_errors', 1);`

虽然如果页面上有致命错误，这可能不起作用。同样，要永久启用此功能，您必须修改 php.ini 文件。

通常建议您仅在非生产系统上启用 display_errors，以便用户不会通过您的错误消息获得潜在的敏感信息。

无论哪种情况，您都应该能够在 apache 错误日志中找到 php 错误，在 ubuntu 上，它位于此处：

`/var/log/apache2/error.log`

尽管它可能会根据您的分布而有所不同。

# asp.net-mvc-3 - 无法将模型传递到布局页面内的局部视图

> ID：10147827
> 
> 赞同：2
> 
> 时间：2012-04-13T20:23:25.580
> 
> 标签：asp.net-mvc-3, partial-views

我在该布局中有一个布局页面我使用了局部视图，局部视图包含我构建的菜单功能，我将菜单拆分为局部视图以确保它易于维护。菜单被故意放置在布局中，因为它在每个页面中都使用，但是菜单中有条件元素，因此某些选项仅出现在某些页面上。

我偶然发现了对我前进的问题，菜单使用 ajax 调用来呈现包含内容的部分视图（减少页面加载）我只是在一个包含公司的页面上工作，公司包含联系人列表，单击时菜单选项应显示联系人列表。我已经加载了公司模式下的联系人列表，但是！我无法从应该呈现联系人列表的新局部视图访问它，因为菜单是包含在布局页面中的局部视图，因此无法接受模型，因此我无法将模型传递到局部视图中我正在尝试加载，因为菜单部分视图位于布局页面中。

这是一个棘手的情况，我显然可以更改布局以呈现一个包含菜单的新部分，这样我就可以将一个新的视图模型传递给它，但是我构建的每个页面都需要引用菜单（真是个害虫！）我必须在这里遗漏一些东西（考虑到这是我可能的第一个 MVC3 应用程序）。有什么建议么？

**编辑：**我自己更进一步，简而言之，我的布局页面将始终能够访问使用它的页面模型，因此包含菜单的部分视图也可以访问该数据。我在我的菜单部分视图中编写了一些条件逻辑来检查页面，然后根据需要传入数据。

```
<div class="menu">    
    <ul>
        <li><a href="@Url.Action("Create", "Contact")">New Contact </li>
        <li><a href="@Url.Action("Index", "Contact")">Contact List </a></li>
    </ul>
    @if (Request.Url.PathAndQuery.Contains("/Contact/Details/"))
    {
        <ul>
            <li>@Html.ActionLink("New Activity", "Create", "Activity", new { companyid = 0, contactid = Model.contact.id }, null)</li>
        </ul>
    }
</div> 
```

以上是菜单部分视图的一个小示例，但包含一个示例，其中菜单是为**联系人/详细信息**页面构建的，并且能够传入**model.contact.id**。它的工作原理是我的菜单和布局没有明确包含模型，但感觉不是很整洁。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T20:33:27.947

如果我正确理解了您的问题，那么您的问题是您认为您的局部视图不能有模型，因为您不希望您的布局有模型。所以问题是如何在不需要每个操作来扩展布局将使用的基本模型类型的情况下将模型放入布局中。

1）而不是`Html.Partial`在您的布局中使用菜单使用`Html.Action`，然后您将拥有一个获取菜单数据的操作方法。

2) 编写一个自定义 WebViewPage 并包含一个类似的属性

```
return ((BaseController)ViewContext.Controller).MenuData; 
```

现在您甚至不需要局部视图中的模型，它可以直接访问数据。

这两者都需要一个包含基本模型中可用的所有菜单信息的 Menu 属性，但是如果您网站中的每个页面都需要访问这些数据，那么这似乎是合适的。

**编辑：**为了回应您对整洁的关注，听起来您想要部分，这使您能够在适当的视图页面或子布局中自定义菜单的各个部分。

有关部分的概述，请参见[http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx和](http://weblogs.asp.net/scottgu/archive/2010/12/30/asp-net-mvc-3-layouts-and-sections-with-razor.aspx)[http:// blogs.msdn.com/b/marcinon/archive/2010/12/15/razor-nested-layouts-and-redefined-sections.aspx](http://blogs.msdn.com/b/marcinon/archive/2010/12/15/razor-nested-layouts-and-redefined-sections.aspx)了解嵌套布局/部分的信息。

# ruby-on-rails-3 - Rails 3 自定义验证

> ID：10147832
> 
> 赞同：1
> 
> 时间：2012-04-13T20:23:56.140
> 
> 标签：ruby-on-rails-3, validation, model

我正在尝试创建一个自定义验证来验证计划的 start_date 和 end_date 不与另一个计划重叠

```
class Schedule < ActiveRecord::Base
#has many scheduleTimes (fk in scheduleTime)
has_many :scheduletimes, :inverse_of => :schedule 

validate :dateOverlaps?

scope :active, lambda {
 where('? between start_date and end_date', Date.today)
}
def dateOverlaps?
  results = ActiveRecord::Base.connection.execute("Select (start_date::DATE, end_date::DATE) OVERLAPS ('#{self.start_date}'::DATE, '#{self.end_date}'::DATE) from schedules;")
  errors.add_to_base("Date ranges cannot overlap with another schedule") if                   results.first["overlaps"] == 't'
end 
```

然而，这会导致

```
NoMethodError: undefined method `add_to_base' 
```

我尝试创建自定义验证器并使用私有验证方法无济于事。有人可以为我阐明这一点吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-13T21:53:57.207

尝试替换这个：

```
errors.add_to_base("Date ranges cannot overlap with another schedule") 
```

有了这个：

```
errors.add(:base, "Date ranges cannot overlap with another schedule") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:11:51.833

代替：

```
errors.add_to_base 
```

尝试使用：

```
errors.add 
```

# jquery - jquery 有机标签超出限制

> ID：10147833
> 
> 赞同：1
> 
> 时间：2012-04-13T20:23:57.457
> 
> 标签：jquery, plugins, tabs

我正在使用有机标签插件[http://css-tricks.com/4530-organic-tabs/](http://css-tricks.com/4530-organic-tabs/)我需要解决一个问题。

我正在使用这个效果：

```
$("#tab").organicTabs().organicTabs({
                "speed": 100,
                "param": "tab"
}); 
```

我有两个这样的标签：

```
<div id="tab">

    <ul class="nav">
        <li class="nav-one"><a href="#one" class="current">One</a></li>
        <li class="nav-two last"><a href="#two">Two</a></li>

    </ul>
    <div class="list-wrap">

        <ul id="one">
            <a href="#add" id="add">Add</a><br />
            <div class="input">
                <input type="text" name="birth" class="birth" /><br />
            </div>
        </ul>

        <ul id="two" class="hide">
      </ul>
     </div>   
</div> ​​​​​​​​​​​​​​​​​​​​​ 
```

以及一个用于添加更多文本字段的 jquery 函数：

```
$('#add').click(function() {

    $('<div class="input"><input type="text" name="birth" class="birth" /><br /></div>').hide().appendTo('.input').fadeIn('slow');
}); 
```

但是当我引入更多文本字段时，它超出了选项卡的大小。通过选择选项卡二并返回一来解决此问题。我希望标签调整大小，因为它们会引入更多文本字段.. 可能吗？

# ruby-on-rails-3 - apn_on_rails 突然抛出 sslv3 警报证书被撤销

> ID：10147834
> 
> 赞同：1
> 
> 时间：2012-04-13T20:24:01.280
> 
> 标签：ruby-on-rails-3, apple-push-notifications

导轨：3.0.5 红宝石：1.9.2 apn_on_rails：0.5.1

突然开始收到异常：来自 apn_on_rails gem 的“sslv3 alert certificate revoked”。但是，通知仍会发送到设备，并且证书有效期至 2013 年。

重现：

1.  导轨控制台。
2.  为现有设备之一创建通知。

    not1 = APN::Notification.create(:device_id => devices[0].id, :sound => true, :badge => 1, :alert => "测试")

3.  执行`APN::App.send_notifications`。（注意：APN::Notification.send_notifications 根本不发送任何通知，而是调用 APN::App.send_notifications）

*预期输出：*要发送到设备的通知。没有抛出异常。

*实际输出：*发送到设备的通知。抛出异常。以下异常的完整堆栈跟踪：

```
ruby-1.9.2-p0 > APN::App.send_notifications
SSL_connect returned=1 errno=0 state=SSLv3 read finished A: sslv3 alert certificate revoked
OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv3 read finished A: sslv3 alert certificate revoked
    from /gems/apn_on_rails-0.5.1/lib/apn_on_rails/libs/connection.rb:59:in `connect'
    from /gems/apn_on_rails-0.5.1/lib/apn_on_rails/libs/connection.rb:59:in `open'
    from /gems/apn_on_rails-0.5.1/lib/apn_on_rails/libs/connection.rb:23:in `open_for_delivery'
    from /gems/apn_on_rails-0.5.1/lib/apn_on_rails/app/models/apn/app.rb:48:in `send_notifications_for_cert'
    from /gems/apn_on_rails-0.5.1/lib/apn_on_rails/app/models/apn/app.rb:36:in `send_notifications' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T10:23:12.267

正如堆栈跟踪所示 - 问题出在 /gems/apn_on_rails-0.5.1/lib/apn_on_rails/app/models/apn/app.rb

在 App.rb 中，在 self.send_notifications 方法中：

```
def self.send_notifications
    apps = APN::App.all
    apps.each do |app|
      app.send_notifications
    end
    if !configatron.apn.cert.blank?
      global_cert = File.read(configatron.apn.cert)
      send_notifications_for_cert(global_cert, nil)
    end
end 
```

注意： ( `if !configatron.apn.cert.blank?`) 代码检查全局证书，无论您是否定义了它，它都会检查“config/apple_push_develpment_certification.pem”并使用此证书发送通知。

就我而言，我有这个文件“ **config/apple_push_develpment_certification.pem** ”，我还为我的 iPhone 和 iPad 应用程序添加了两个不同的证书，这些证书由两个 configatron 变量定义。因此我遇到了证书撤销问题，并且我的通知也被发送到设备。

要解决此问题：定义“configatron.apn.cert”以指向您在 development.rb 和 production.rb 文件中的新证书

# android - Ellipsize 在 TableLayout 的 TextView 中无法正常工作

> ID：10147835
> 
> 赞同：0
> 
> 时间：2012-04-13T20:24:02.590
> 
> 标签：android, textview, tablelayout

我有一个包含多行的表，类似于：

```
<TableRow
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="text"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textSize="12sp"
        android:layout_gravity="right|center_vertical"
        android:layout_margin="4dip" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:text="some text"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textSize="13sp"
        android:textStyle="bold"
        android:layout_gravity="left|center_vertical"
        android:layout_margin="4dip"
        android:ellipsize="end"
        android:lines="1"
        android:scrollHorizontally="true"
        android:layout_weight="1" />

    <ImageView
        android:src="@drawable/disclosure_indicator"
        android:contentDescription="@string/emptyString"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:scaleType="fitXY" />

</TableRow> 
```

但是如果文本视图中的任何行比剩余空间宽，则第二个文本视图将其最后一个“单词”替换为“...”。

所以使用类似的东西：

```
"Some sort string"
"Some string that is a little bit longer"
"Singleword" 
```

该表将呈现如下：

```
text | Some short...                       | >
text | Some string that is a little bit... | >
text |                                     | > 
```

当显然有足够的空间显示第一行的整个字符串时。我怎样才能得到它，以便截断/省略对每一行都正确工作？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-20T22:27:04.693

@MarSara9 更改第二个文本视图的布局重力。此解决方案适用于您的示例代码：

android:layout_gravity="center_vertical"

# eclipse-plugin - Eclipse 插件：持久标记不持久

> ID：10147839
> 
> 赞同：2
> 
> 时间：2012-04-13T20:24:26.230
> 
> 标签：eclipse-plugin, markers, eclipse-pde

我开发了一个快速简单的插件，它基于“带有增量项目构建器的插件”模板为包含文本“TODO”的行添加行标记。

它可以工作，但标记*不会*在 Eclipse 会话（重新启动）之间保留。

我的 plugin.xml 中有以下元素：

```
<extension
     id="todoTask"
     name="TODO Task"
     point="org.eclipse.core.resources.markers">
  <super type="org.eclipse.core.resources.taskmarker">
  </super>
  <persistent value="true"/>
</extension> 
```

同样，该插件工作正常，因此已处理，但如果我将`persistent value`属性设置为`true`or似乎并不重要`false`，它只是不保留标记。

为什么标记没有保留，我该如何解决这个问题？我是否需要执行额外的编程/配置来持久化它们？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T16:06:50.637

我通过反复试验发现了问题所在。标记 id 中需要有一个点才能实际算作标记类型。因此，在您的情况下，请尝试设置`id="todoTask.marker"`，然后调用`someResource.createMarker("todoTask.marker")`. 哦，为了安全起见，也许用小写字母写 id

# c# - 无法访问要在 HandleRequest 中使用的 EventArgs e 值

> ID：10147843
> 
> 赞同：1
> 
> 时间：2012-04-13T20:24:48.067
> 
> 标签：c#, events, eventargs

我只是在学习事件、代表和订阅者。在过去的两天里，我一直在研究和思考这一切。我无法访问在 EventArgs e 值中传递的信息。我有一个想要打开的已保存项目。必要形式的状态被反序列化成字典。命中一个循环，引发 UnpackRequest 传递键/值。

ProjectManager.cs 文件：

```
public delegate void EventHandler<TArgs>(object sender, TArgs args) where TArgs : EventArgs;
public event EventHandler<UnpackEventArgs> UnpackRequest; 
```

然后再往下：

ProjectManager.cs 文件：

```
//Raise a UnpackEvent //took out virtual
protected  void RaiseUnpackRequest(string key, object value)
{
    if (UnpackRequest != null) //something has been added to the list?
    {
        UnpackEventArgs e = new UnpackEventArgs(key, value);
        UnpackRequest(this, e);
    }
} 
```

然后在 open 方法中，在字典填充了每种形式的状态之后：

ProjectManager.cs 文件：

```
foreach (var pair in dictPackState) {
    string _key = pair.Key;
    dictUnpackedState[_key] = dictPackState[_key];
    RaiseUnpackRequest(pair.Key, pair.Value); //raises the event.
    } 
```

我有一个活动课程：

```
public class UnpackEventArgs : EventArgs
{
    private string strKey;
    private object objValue;

    public UnpackEventArgs(string key, object value)
    {
        this.strKey = key;
        this.objValue = value;
    }
    //Public property to read the key/value ..and get them out
    public string Key
    {
        get { return strKey; }  
    }
    public object Value
    { 
        get { return objValue; }
    }
} 
```

我仍在研究添加订阅者的代码以及项目组件如何在各个表单中重新构成。但是我现在尝试处理的部分是在 MainForm.cs 中，我使用通过的争论来处理 Unpacked Request。我的 e 包含键值，键表示将值发送到哪里（即表单对象）。

```
private void HandleUnpackRequest(object sender, EventArgs e)
{
    //reflection happens here. turn key into object
    //why can't i get e.key ??? 
    object holder = e; //holder = VBTools.UnpackEventArgs key... value...all info

    //object goToUnpack = (e.key).GetType();
    //goToUnpack.unpackState(e.value);
} 
```

我想我包括了所有必要的部分以获得任何帮助？！谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T20:28:54.620

改变这个：

```
private void HandleUnpackRequest(object sender, EventArgs e) 
```

对此：

```
private void HandleUnpackRequest(object sender, UnpackEventArgs e) 
```

记住您的事件处理程序声明：

```
public event EventHandler<UnpackEventArgs> UnpackRequest; 
```

# magento - Creating attribute sets and attributes programmatically

> ID：10147847
> 
> 赞同：1
> 
> 时间：2012-04-13T20:25:20.647
> 
> 标签：magento, attributes

I am using the code listed on the following link:

[http://www.magentocommerce.com/wiki/5_-_modules_and_development/catalog/programmatically_adding_attributes_and_attribute_sets](http://www.magentocommerce.com/wiki/5_-_modules_and_development/catalog/programmatically_adding_attributes_and_attribute_sets)

Everything works until the point:

```
 // Just add a default group.
    else
    {
        $this->logInfo("Creating default group [{$this->groupName}] for set.");

        $modelGroup = Mage::getModel('eav/entity_attribute_group');
        $modelGroup->setAttributeGroupName($this->groupName);
        $modelGroup->setAttributeSetId($id);

        // This is optional, and just a sorting index in the case of
        // multiple groups.
        // $modelGroup->setSortOrder(1);

        $model->setGroups(array($modelGroup));
    } 
```

I am unsure where the object reference would need to be set from - I am attempting to have this as a separate file that can be automated - I am running this file by doing a

```
require_once 'app/Mage.php'; 
Mage::app(); 
```

Any help in this would be greatly appreciated

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-16T14:22:48.283

You will need to have a block in your modules config.xml that looks like so

```
<resources>
    <namespace_module_setup><!-- becomes folder under sql dir -->
        <setup>
            <module>Namespace_Module</module>
            <class>Mage_Eav_Model_Entity_Setup</class>
        </setup>
    </namespace_module_setup>
</resources> 
```

This will allow you to place your installer code in the directory that is in your XML. You need to make sure that the version listed on the installer file matches the `<version>1.2.0</version>` of your module otherwise Magento will not be able to run your installer. To add an attribute Set, you can use the following data, I have never use it, but the entityTypeId defines whether it is a customer, shipping, category, product entity, each 1, 2, 3, 4 respectively.

```
/**
     * Add Attribute Set
     *
     * @param mixed $entityTypeId
     * @param string $name
     * @param int $sortOrder
     * @return Mage_Eav_Model_Entity_Setup
     */
    public function addAttributeSet($entityTypeId, $name, $sortOrder = null)
    {
        $data = array(
            'entity_type_id'        => $this->getEntityTypeId($entityTypeId),
            'attribute_set_name'    => $name,
            'sort_order'            => $this->getAttributeSetSortOrder($entityTypeId, $sortOrder),
        );

        $setId = $this->getAttributeSet($entityTypeId, $name, 'attribute_set_id');
        if ($setId) {
            $this->updateAttributeSet($entityTypeId, $setId, $data);
        } else {
            $this->_conn->insert($this->getTable('eav/attribute_set'), $data);

            $this->addAttributeGroup($entityTypeId, $name, $this->_generalGroupName);
        }

        return $this;
    } 
```

This is the code for adding an attribute to a set, just change the attribute set data

```
//app/code/local/Namespace/Module/sql/Namespace_Module_setup/mysql4-install-1.0.0.php
    $installer = $this;
    /* @var $installer Mage_Eav_Model_Entity_Setup */

    $installer->startSetup();

        $data= array (
            'attribute_set' =>  'Default',
            'group' => 'General',
            'label'    => 'Some Label',
            'visible'     => true,
            'type'     => 'varchar', // multiselect uses comma-sep storage
            'input'    => 'text',
            'system'   => true,
            'required' => false,
            'user_defined' => 1, //defaults to false; if true, define a group
        );

        $installer->addAttribute('catalog_product','attriute_code',$data)

        $installer->endSetup(); 
```

The above is a working example of an attribute installation for a module.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-30T19:08:06.413

There is an easier one-liner for this. Just extend Mage_Eav_Model_Entity_Setup for your install script and use something like this in your installer:

```
$installer = $this;
/* @var $installer Mage_Eav_Model_Entity_Setup */

$installer->startSetup();
$installer->addAttributeSet(Mage_Catalog_Model_Product::ENTITY, 'New Attribute Set Name');
$installer->endSetup(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T23:24:48.777

You should implement this as an installer, so Magento loads it when the module is installed (or upgraded). `$this`, in the example, means that installer class.

You could create the module and the installer using [https://bitbucket.org/alexsiri7/qbmagemoduleshell](https://bitbucket.org/alexsiri7/qbmagemoduleshell), and then adding that code there. That tool is a module creator I developed.

# php - 调度 php mysql db 设计

> ID：10147849
> 
> 赞同：0
> 
> 时间：2012-04-13T20:25:28.333
> 
> 标签：php, mysql, database

我们正在尝试设计一个程序，允许用户根据导师的可用性预订导师。因此，我们希望导师告诉我们他们何时（什么时间、哪天等）他们有空/没有空，当用户预订特定日期和时间时，我们只想向该用户显示该特定日期有空的导师和时间。

例如，导师可以告诉我们他们在晚上 9 点到 5 点有 MW。

我怎么能设计出这样的桌子？

我正在考虑做以下事情

```
non-availability:
(this allows tutors to tell me they are not available on a specific date ... say 4/15/2012 10PM)
date date 
time_start datetime
time_end datetime

recurring_non-availability
(this allows tutors to tell me that they are not available every Monday from 9-5pm)
dayOfWeek enum
time_start
time_end 
```

所以基本上，导师可以为一周中的每一天指定他们不可用的时间。他们还可以指定他们不可用的特定日期。如果用户想要一个特定日期的导师，例如 4/20 10AM，我将首先查询 non-availability 表以确保 4/20 10 AM 没有冲突，然后查询 recurring_non_availability 表以确保它们是星期五没有冲突（4/20 是星期五）上午 10 点。我不确定这种设计是否能给我最好的导师可用性的图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:31:19.927

也许设置一个表，一周中的所有日子都可以使用导师，然后像这样存储他们的时间？

```
Tutor monday tuesday wednesday thursday friday 

bob     9-5    9-5      9-5       10-3    9-12 
```

# delphi - 使用 Delphi Open Tools API 将我自己的项目添加到 Delphi IDE Insight (F6)

> ID：10147850
> 
> 赞同：7
> 
> 时间：2012-04-13T20:25:28.850
> 
> 标签：delphi, delphi-xe, toolsapi

我想使用或添加一个条目到 Delphi 中的 IDE 洞察功能`INTAIDEINsightService`。`AddItem``AddActionList`

根据 Delphi OTA wiki， `INTAIDEINsightService` 允许您注册自己的操作。我能找到的唯一参考是[here](http://docwiki.embarcadero.com/RADStudio/en/Tools_API_Changes_for_XE)，它提到了API 的名称，并且它根本存在。Delphi 帮助中没有关于它的内容。Delphi XE 中的`ToolsAPI.pas`单元在此界面中显示了两个方法，可让您注册操作：

```
function AddActionList(  Actions: TCustomActionList; ... ): Integer;
procedure RemoveActionList(const Index: Integer); 
```

评论说“项目将显示为[描述|]类别| TCustomAction.Caption。不指定类别的包含操作将不会显示。”。

我无法使用操作找到任何其他文档或示例。一个简单的“hello world”示例，其中一个操作或只是一个项目，使用描述或类别“helloworld”注册，然后可以搜索并在您按下 F6 时显示，这将是完美的，但首选操作。

看起来必须实现这样的向导才能`INTAIDEInsightItem`在 IDE 洞察力中呈现自身，但我不确定这是否是 hello-world 示例的“必需”。我不确定您是否必须使用操作，或者是否定期添加“项目”就足够了。

（我的最终目标是创建一个新的 gExperts 风格的专家来“通过使用 IDE 洞察力按名称搜索来打开我的库路径中的任何单元”，但我将首先将单元名称添加到 ide 洞察力中，一次一个项目.)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-14T11:49:00.727

下面显示了“命令”下的“你好”类别：

![IDE 洞察截图](../Images/84b887c0acfebc68eb45e948dcb30904.png)

```
unit Unit1;

interface

uses
  SysUtils, Classes, ActnList, ImgList, Controls;

type
  TDataModule1 = class(TDataModule)
    ActionList1: TActionList;
    ImageList1: TImageList;
    ActionHello: TAction;
    procedure ActionHelloExecute(Sender: TObject);
  private
  public
  end;

var
  DataModule1: TDataModule1;

implementation

{$R *.dfm}

uses
  ToolsAPI, Dialogs;

procedure TDataModule1.ActionHelloExecute(Sender: TObject);
begin
  ShowMessage('Hello, world!');
end;

var
  Index: Integer = -1;

initialization
  DataModule1 := TDataModule1.Create(nil);
  Index := (BorlandIDEServices as INTAIDEInsightService).AddActionList(DataModule1.ActionList1);

finalization
  if Index <> -1 then
    (BorlandIDEServices as INTAIDEInsightService).RemoveActionList(Index);
  FreeAndNil(DataModule1);

end. 
```

dfm 只是一个带有动作列表、图像列表和动作的数据模块：

```
object DataModule1: TDataModule1
  OldCreateOrder = False
  Left = 218
  Top = 134
  Height = 215
  Width = 306
  object ActionList1: TActionList
    Images = ImageList1
    Left = 24
    Top = 16
    object ActionHello: TAction
      Category = 'Hello'
      Caption = 'Hello, World!'
      ImageIndex = 0
      OnExecute = ActionHelloExecute
    end
  end
  object ImageList1: TImageList
    Left = 88
    Top = 16
    Bitmap = {
      494C010101000C000C0010001000FFFFFFFFFF10FFFFFFFFFFFFFFFF424D3600
      0000000000003600000028000000400000001000000001002000000000000010
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000800080008000800086868600000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000008000800080008000FFFFFF00FFFFFF00C0C0C000868686000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000008000
      800080008000FFFFFF00FFFFFF000000000000000000C0C0C000C0C0C0008686
      8600000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      000000000000000000000000000000000000868686008000800080008000FFFF
      FF00FFFFFF000000000000000000800080008000800000000000C0C0C000C0C0
      C000868686000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000008686860080008000FFFFFF000000
      000000000000800080008000800080008000800080008000800000000000C0C0
      C000C0C0C0008686860000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000008686860000000000000000008000
      800080008000800080000080800000FFFF008000800080008000800080000000
      0000C0C0C000C0C0C00086868600000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000008686860080008000800080008000
      8000800080008000800080008000008080008000800080008000800080008000
      800000000000C0C0C00000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000080008000FFFFFF008000
      80008000800080008000800080008000800000FFFF0000FFFF00800080008000
      8000800080000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      000000000000000000000000000000000000000000000000000080008000FFFF
      FF0080008000800080008000800080008000800080000080800000FFFF0000FF
      FF00800080008000800000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000008000
      8000FFFFFF00800080008000800080008000008080008000800000FFFF0000FF
      FF00800080008000800080008000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      000080008000FFFFFF00800080008000800000FFFF0000FFFF0000FFFF008000
      8000800080008000800000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      00000000000080008000FFFFFF00800080008000800080008000800080008000
      8000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000080008000FFFFFF008000800080008000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000800080008000800000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      0000000000000000000000000000000000000000000000000000000000000000
      000000000000000000000000000000000000424D3E000000000000003E000000
      2800000040000000100000000100010000000000800000000000000000000000
      000000000000000000000000FFFFFF00FFFF000000000000FE3F000000000000
      F81F000000000000E00F00000000000080070000000000000003000000000000
      0001000000000000000000000000000000010000000000008001000000000000
      C001000000000000E000000000000000F000000000000000F803000000000000
      FC0F000000000000FE3F00000000000000000000000000000000000000000000
      000000000000}
  end
end 
```

在这里，我将可选参数`Description`和方法`Category`的`AddActionList`默认空字符串保留为“**命令**”和`Category`操作列表中的值，但您可以指定自己的值，这些值将覆盖这些默认值。

# android - JSON 字符串数组（无对象），提取数据

> ID：10147851
> 
> 赞同：2
> 
> 时间：2012-04-13T20:25:42.203
> 
> 标签：android, json, android-listview, arrays

我有一个长 JSON 字符串，表示从 WCF 服务返回的 string[] 数组。数组元素只是字符串，它们不是对象。这是返回数据的示例

```
 ["1|ArrayElement1","2|ArrayElement2","3|ArrayElement3"..."n|ArrayElementn"] 
```

我不介意字符串中包含索引，但我需要将字符串解析为 Android 中的 ArrayList，以便将其调整为 ListView。

由于这些在技术上不是 JSONObjects，我如何遍历它们并从每个数组元素中提取字符串？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-13T20:37:51.527

这是一个有效的 JSON 字符串数组，您可以像这样正常解析它

```
JSONArray jsonStrings = json.getJSONArray("items");
String strings[] = new String[jsonStrings.length()];
for(int i=0;i<strings.length;i++) {
strings[i] = jsonStrings.getString(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:30:06.160

也许这篇文章可以帮助你：

[Android/Java 中的 JSON 数组迭代](https://stackoverflow.com/questions/3408985/json-array-iteration-in-android-java)

```
 HashMap<String, String> applicationSettings = new HashMap<String,String>();
    for(int i = 0; i < settings.length(); i++){
        String value = settings.getJSONObject(i).getString("value");
        String name = settings.getJSONObject(i).getString("name");
        applicationSettings.put(name, value);
    }

 JSONArray names= json.names();
    JSONArray values = json.toJSONArray(names);
    for(int i = 0 ; i < values.length(); i++){
        if(names.getString(i).equals("description")){
            setDescription(values.getString(i));
        }
        else if(names.getString(i).equals("expiryDate")){
            String dateString = values.getString(i);
            setExpiryDate(stringToDateHelper(dateString)); 
        }
        else if(names.getString(i).equals("id")){
            setId(values.getLong(i));
        }
        else if(names.getString(i).equals("offerCode")){
            setOfferCode(values.getString(i));
        }
        else if(names.getString(i).equals("startDate")){
            String dateString = values.getString(i);
            setStartDate(stringToDateHelper(dateString));
        }
        else if(names.getString(i).equals("title")){
            setTitle(values.getString(i));
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:49:18.230

澄清一下，据我了解，您正在接收一个 JSON 字符串数组，这些字符串是以数组索引和管道字符为前缀的有效 JSON 字符串？

首先，我建议联系这个可憎的创造者，并就违反标准的行为进行教育。如果他们不听，就和他们的老板谈谈。这种事情在我看来是不可接受的，需要停止。

其次，我建议做这样的事情：

```
string[] element_strings = JSON.deserialize(WCF_string_result);
object[] elements = new object[element_strings.length];
for(int x = 0; x < elements.length; x++)
{
    int pipeIndex = element_strings.indexOf("|");
    elements[x] = JSON.deserialize(element_strings[x].substr(pipeIndex + 1));
} 
```

当然，这假设您有某种反序列化 JSON 对象字符串的方法。如果您不这样做，我建议您使用 Android 中提供的内置库：

[http://developer.android.com/reference/org/json/package-summary.html](http://developer.android.com/reference/org/json/package-summary.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-30T16:44:39.377

如果您想使用 JSONArray 上的 Java8 流从中提取特定值。那么这段代码会有所帮助。

```
import java.util.stream.Collectors;
import java.util.stream.IntStream;

import org.json.JSONArray;

public class JsonArrayTest {

    public static void main(String[] args) {
        System.out.println("Output - "+ getValue("[{\"id\":\"11\",\"username\":\"ABC\"},{\"id\":\"12\",\"username\":\"ABC\"}]\""));
        System.out.println("Output - "+ getValue("[{\"id\":\"13\",\"username\":\"XYZ\"}]\""));
    }

    private static String getValue(String input) {
        JSONArray jsonArray = new JSONArray(input);

        return IntStream
                .range(0, jsonArray.length()).mapToObj(obj -> jsonArray.getJSONObject(obj))
                .filter(filterObj -> filterObj.getString("id") != null && "12".equals(filterObj.getString("id")))
                .map(finalObj -> finalObj.getString("username")).collect(Collectors.joining(""));
    }

} 
```

**注意：**这只是一个示例，您如何使用流 API 从 JSONArry 中提取特定值。您可以根据需要更改过滤条件或将其删除。

# java - onOptionsItemSelected(MenuItem item) 奇怪的行为

> ID：10147853
> 
> 赞同：0
> 
> 时间：2012-04-13T20:25:59.660
> 
> 标签：java, android, android-menu

我创建了一个意图访问不同活动的菜单，但是我有一个奇怪的行为，它总是在选择语句之后遍历 switch 语句的所有情况，我已经查看了变量 item 的值并且是正确的，有什么想法可能是错的吗？

代表菜单的代码片段是：

```
 public static final int wiifidi = 0;
    public static final int cuentaint = 1;
    public static final int cajerosint = 2;
    public static final int indicadoresint = 3;
    public static final int promoint = 5;
    public static final int contactoint = 4; 
```

……

……

……

```
@Override
    //add the items to the menu on the class
    public boolean onCreateOptionsMenu(Menu menu) {
        boolean result = super.onCreateOptionsMenu(menu);
        menu.add(0,wiifidi, 0, R.string.menu_wifi);
        menu.add(0,cuentaint, 0, R.string.menu_cuenta);
        menu.add(0,cajerosint,0,R.string.menu_cajeros);
        menu.add(0,indicadoresint,0,R.string.menu_indicadores);
        menu.add(0,contactoint,0,R.string.menu_contacto);
        menu.add(0,promoint,0,R.string.menu_promo);

        return result;
    }

    @Override
    //handle everything that happens when an item of menu is selected 
    public boolean onOptionsItemSelected(MenuItem item) {
        Toast.makeText(getApplicationContext(), "el item es " +item.getItemId(), Toast.LENGTH_LONG).show();
        switch (item.getItemId()) {     

        case wiifidi:
            wifistatus();
        case cuentaint:{
            consulta();
        }
        case cajerosint:{
            cajero();
        }
        case indicadoresint:{   
            indicador();
        }
        case contactoint:{
            contacto();
            }
        case promoint:{
            promocion();
        }

        }

        return super.onOptionsItemSelected(item);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T20:31:13.060

记得断开你的开关。

```
switch (item.getItemId()) 
    {     
        case wiifidi:
            wifistatus();
            break;
        case cuentaint:
            consulta();
            break;
        case cajerosint:
            cajero();
            break;
        case indicadoresint:   
            indicador();
            break;
        case contactoint:
            contacto();
            break;
        case promoint:
            promocion();
            break;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T20:30:11.823

指定中断

```
 case wiifidi:
            wifistatus();
            break; 
```

# php - CakePHP 2.x 翻译行为未保存到 i18n 表

> ID：10147855
> 
> 赞同：0
> 
> 时间：2012-04-13T20:26:12.137
> 
> 标签：php, cakephp, behavior, translate, cakephp-2.1

我已经按照手册中的说明使用 CakePHP 2.1 设置翻译行为，以及[Stack 上的这个问题](https://stackoverflow.com/questions/90949/how-do-i-use-the-translatebehavior-in-cakephp)。我没有收到任何错误，但我翻译的帖子没有保存到我的 i18n 表中。

这是我的 PostModel.php：

```
class Post extends AppModel {

    public $title = 'Post';
    public $name = 'Post';
    public $body = 'Post';

    public $actAs = array(
        'Translate' => array(
            'title' => 'titleTranslation', 
            'body' => 'bodyTranslation'
        )
    );

    public $validate = array(
        'title' => array(
            'rule' => 'notEmpty'
        ),
        'body' => array(
            'rule' => 'notEmpty'
        )
    );

} 
```

这是我在 PostsController.php 中的添加和编辑函数：

```
public function add() {
        if ($this->request->is('post')) {
            $this->Post->locale = 'fre';
            $this->Post->create();

        if ($this->Post->save($this->request->data)) {
            $this->Session->setFlash(__('Your post has been saved.', true));
            $this->redirect(array('action' => 'admin'));
        } else {
            $this->Session->setFlash(__('Unable to add your post.', true));
        }
    }
}

public function edit($id = null) {
    $this->Post->id = $id;
    if ($this->request->is('get')) 
    {
        $this->Post->locale = 'fre';
        $this->request->data = $this->Post->read();
    } 
    else 
    {
        if ($this->Post->save($this->request->data)) 
        {
            $this->Post->locale = 'fre';
            $this->Session->setFlash(__('Your post has been updated.', true));
            $this->redirect(array('action' => 'admin'));
        } 
        else 
        {
            $this->Session->setFlash(__('Unable to update your post.', true));
        }
    }
} 
```

我使用控制台初始化了 i18n 表。我应该放下桌子并尝试重新初始化吗？不知道为什么会有问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T17:39:24.133

更可重用的解决方案是添加到您的 AppModel：

```
class AppModel extends Model {
    public $actsAs = array('Containable');

    /**
     * Converts structure of translated content by TranslateBehavior to be compatible
     * when saving model
     *
     * @link http://rafal-filipek.blogspot.com/2009/01/translatebehavior-i-formularze-w.html
     */
    public function afterFind($results, $primary = false) {
        if (isset($this->Behaviors->Translate)) {
            foreach ($this->Behaviors->Translate->settings[$this->alias] as $value) {
                foreach ($results as $index => $row) {
                    if (array_key_exists($value, $row)) {
                        foreach($row[$value] as $locale) {
                            if (isset($results[$index][$this->alias][$locale['field']])) {
                                if (!is_array($results[$index][$this->alias][$locale['field']])) {
                                    $results[$index][$this->alias][$locale['field']] = array();
                                }
                                $results[$index][$this->alias][$locale['field']][$locale['locale']] = $locale['content'];
                            }
                        }
                    }
                }
            }
        }
        return $results;
    }
} 
```

此代码自动将返回 TranslateBehavior 的内容转换为能够创建多语言表单，例如：

```
echo $this->Form->input('Category.name.eng');
echo $this->Form->input('Category.name.deu');
echo $this->Form->input('Category.name.pol'); 
```

在 CakePHP 2.3 上测试。我发现 now`Model->saveAssociated()`是必需的，而不是`Model->save()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-01T10:09:53.653

使用 saveMany instedof 保存。它对我来说很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-17T21:51:58.097

尝试在 add.ctp 的表单中添加它：

```
<?php
     echo $this->Form->create('Post');
     echo $this->Form->input('Post.title.fre');
     echo $this->Form->input('Post.body.fre');
     //Something more...
     echo $this->Form->end(__('Submit'));
?> 
```

在您的 edit.ctp 中：

```
<?php
     echo $this->Form->create('Post');
     echo $this->Form->input('id');
     echo $this->Form->input('Post.title.fre', array('value'=>$this->request->data['titleTranslation'][0]['content'));
     echo $this->Form->input('Post.body.fre', array('value'=>$this->request->data['bodyTranslation'][0]['content'));
     //Something more...
     echo $this->Form->end(__('Submit'));
?> 
```

假设 data['titleTranslation'][0] 的索引是法语，为了在视图中轻松查看数组，我建议使用 DebugKit [https://github.com/cakephp/debug_kit](https://github.com/cakephp/debug_kit)

我希望这个能帮上忙

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-21T13:55:08.837

对于那些有同样问题的人：正确的变量是`$actsAs`，不是`$actAs`。

# javascript - 如何添加一个-Element to a document using DOM manipulating functions in JavaScript?

> ID：10147856
> 
> 赞同：0
> 
> 时间：2012-04-13T20:26:18.600
> 
> 标签：javascript, html, dom, map

我尝试将 a 添加到 HTML 文档并使用以下代码将其链接到图像：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="de">
<head>
    <title>Website</title>
    <script type="text/javascript">
    function addArea(map, xstart, ystart, xende, yende, idCol, col) {
        area = document.createElement("area");

        area.shape  = "rect";
        area.coords = "" + xstart + ", " + ystart + ", " + xende + ", " + yende + "";
        area.href   = "#" + idCol;
        area.title  = col;
        area.alt    = col;
/*
        area.shape  = "\"rect\"";
        area.coords = "xstart + \", \" + ystart + \", \" + xende + \", \" + yende";
        area.href   = "\"#\" + idCol";
        area.title  = "col";
        area.alt    = "col";

*/      area.setAttribute(
            "onclick",
            "alert(\"Color: \" + col); return false;"
        );

        // append the area to the map
        map.appendChild(area);
    }

    function showMap() {
        idCol = "text";

        // generate the map
        mapCol      = document.createElement("map");
        mapCol.name = "map_" + idCol;
        mapCol.id   = "map_" + idCol;
        addArea(mapCol, 1, 1, 25, 13, idCol, "00FF00");
        addArea(mapCol, 25, 1, 49, 13, idCol, "00FF33");

        imgCol              = document.createElement("img");
        imgCol.src          = "https://www.google.de/images/srpr/logo3w.png";
        imgCol.width        = 275;
        imgCol.height       = 95;
        imgCol.style.border = "1px solid #000";
        imgCol.usemap       = "#name_und_raute_sind_notwendig_bunt_" + idCol;
        imgCol.alt          = "Farbe auswählen";

        imgColArea      = document.createElement("p");
        imgColArea.appendChild(imgCol);

        testcol = "ffffff";
        testlink    = document.createElement("a");
        testlink.appendChild(document.createTextNode("testlink"));
        testlink.setAttribute(
            "onclick",
            "alert(\"Color: \" + testcol); return false;"
        );

        document.getElementById("area").appendChild(imgColArea);
        document.getElementById("area").appendChild(testlink);

        alert("map added with " + mapCol.areas.length + " entries.");

    }

    </script>
</head>
<body onLoad="showMap()">
<div>
before
<div id="area"></div>
after
</div>
</body> 
```

图像应包含链接区域，在单击它们时会提醒文本。不幸的是，这些区域没有出现。有人发现我的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T20:58:23.257

首先，您的地图标识符不匹配。属性名称也是`useMap`，不是`usemap`。采用

```
imgCol.setAttribute('usemap',"#" + mapCol.name); 
```

或者

```
imgCol.useMap = "#" + mapCol.name; 
```

反而。您还必须将地图添加到文档中：

```
/* ... */
imgColArea.appendChild(imgCol);
imgColArea.appendChild(mapCol);
/* ... */ 
```

[**JSFiddle 演示**](http://jsfiddle.net/UFVcA/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:59:24.853

我不确定这一点，但我认为您应该`MAP`在分配子项之前将您的 -element 附加到文档中。创建新元素不同于为非附加元素创建属性。

# wordpress - 记住从 WordPress 密码保护页面登录

> ID：10147862
> 
> 赞同：0
> 
> 时间：2012-04-13T20:26:56.553
> 
> 标签：wordpress

我知道如何使用密码保护页面并检查它是否已使用 post_password_required 输入。我需要知道的是，我是否可以继续知道用户是否在离开此受密码保护的页面后登录。这样做的原因是因为我想显示一个站点范围的导航侧边栏，允许用户返回该页面，但只有在他们之前登录过该页面时才会显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:30:17.290

如果他们连续登录到给定页面，则设置一个会话变量，然后当他们稍后在另一个页面上时，如果设置了该会话变量，则让侧边栏回显链接。

session var 的值可以是创建链接的 url，如果您尝试使用多个页面进行此操作。

# sql - SQL 查询 - 需要从不同的表中获取信息

> ID：10147868
> 
> 赞同：0
> 
> 时间：2012-04-13T20:27:29.660
> 
> 标签：sql, join, count, max

我正在尝试编写一个查询以获取一份报告，该报告显示哪本书被借出最多。我有一个查询要借出最多的实际书，但我需要能够显示该书的标题，该书名位于另一个表中。

```
SELECT * FROM LOAN;

LOANID     BOOKID     CUSTID OUTDATE   INDATE    DUEDATE

SELECT * FROM BOOK;

AUTHORID     BOOKID   BKISBN   BKSTATUS   BKTITLE  BKSERIES  BKTYPE   BKNUMBER 
```

以下查询是我目前所拥有的并且正在获取 bookid。：

```
SELECT Q1.* FROM
(SELECT BOOKID, COUNT(*)
    AS BOOK_COUNT
  FROM LOAN
  GROUP BY LOAN.BOOKID) Q1,
(SELECT MAX(Q2.BOOK_COUNT)
    AS HIGH_COUNT
  FROM (SELECT BOOKID, COUNT(*)
    AS BOOK_COUNT
  FROM LOAN
  GROUP BY LOAN.BOOKID) Q2) Q3
WHERE Q1.BOOK_COUNT = Q3.HIGH_COUNT; 
```

结果：

```
 BOOKID BOOK_COUNT
---------- ----------
       387          3 
```

现在我需要 Book Table 中的 BkTitle。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:31:13.463

尝试

```
select b.bookid, b.BKTITLE , count(l.loanid) as cnt_loan
from book b
inner join loan l on l.bookid = b.bookid
WHERE ROWNUM < 2
group by b.bookid
order by cnt_loan desc 
```

# c# - DateTime.Now 是否受更改系统时钟的影响？

> ID：10147873
> 
> 赞同：7
> 
> 时间：2012-04-13T20:27:38.680
> 
> 标签：c#, datetime

如果我使用 DateTime.Now 作为软件许可身份验证的一部分来强制软件可以使用的天数，是否可以通过简单地更改系统时钟来规避？

如果是这样，有没有更好的方法来获得真正的 UTC 时间？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T20:30:07.987

> 如果我使用 DateTime.Now 作为软件许可身份验证的一部分来强制软件可以使用的天数，是否可以通过简单地更改系统时钟来规避？

DateTime.Now 使用系统时钟，所以是的，它可以被规避。

> 如果是这样，有没有更好的方法来获得准确的系统时间？

是的，您可以通过 www 查询时间服务器。但是您知道，即使这样也可以避免，因为用户可以修改他的主机文件并用他自己的代理替换您正在使用的地址，并在他喜欢的任何时间返回。因此，这完全取决于您希望在保护软件方面走多远。如果您真的关心软件的知识产权，最好购买商业许可软件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-13T20:29:43.820

每次我使用这种方法进行测试时，它都会影响到这一点，所以答案是肯定的，它确实会影响它

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T20:30:25.463

是的，当然，DateTime.Now 从系统时钟获取它的值。
更好的方法是使用 Internet 上的 NTP 服务器。

在[这篇](http://www.codeproject.com/Articles/1005/SNTP-Client-in-C)关于 codeproject 的文章中，您可以找到允许客户端连接到 NTP 服务器的代码

# mysql - 空闲时间过长时，任何 post 脚本都会出现超时错误

> ID：10147876
> 
> 赞同：0
> 
> 时间：2012-04-13T20:28:12.027
> 
> 标签：mysql, timeout, php

我正在为用户使用 cookie；没有会话数据。在您发布数据的任何表单上，当您空闲 2 到 3 分钟时，都会出现超时错误。

这就是您登录时发生的情况。

```
$_COOKIE['user_id'] = 1;
$expire = time() + 60 * 60 * 24 * 365;
setcookie('user_login', $_COOKIE['user_id'], $expire); 
```

这是php.ini；适用于该问题的东西...

```
max_input_time = 10080
max_execution_time = 10080
session.gc_maxlifetime = 10080
memory_limit = 100M 
```

我正在使用共享的 GoDaddy 共享主机，据说他们已经解决了所有问题。但是，我已经尽一切努力解决这个问题，但没有解决。这是错误的屏幕截图...

![在此处输入图像描述](../Images/0abc844e4f8c8b5f1b51063ac66313cd.png)

我快要疯了。我有 20 位作家，当这种情况偶尔发生时，这太可怕了。关于可能导致这种情况的任何想法？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:37:12.430

try and set your cookie expiration to 1 hour and see if that helps:

```
$expire = time()+3600;  /* expire in 1 hour */ 
```

# mysql - 如何显示一张表的所有结果并检查条件

> ID：10147878
> 
> 赞同：0
> 
> 时间：2012-04-13T20:28:17.487
> 
> 标签：mysql, database, left-join

嗨，我需要一些有关 mysql 查询的帮助。无论如何，我想显示表 A 中的所有数据，同时显示表 B 是否已通过当前日期，即使日期已过，我仍然想显示所有表 A 结果。

```
TABLE A
AID
NAME
ADDRESS

TABLE B
BID
DETAIL
DATE
AID

SELECT a.*, b.bid
FROM TABLE A
LEFT JOIN TABLE B
ON A.AID = B.AID
WHERE date > DATE_SUB(CURDATE(), INTERVAL 1 DAY) //how to play with this? 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T20:30:12.370

```
SELECT v.*, b.bid
FROM TABLE A
LEFT JOIN TABLE B
ON A.AID = B.AID AND B.date > DATE_SUB(CURDATE(), INTERVAL 1 DAY) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T23:42:58.360

A`LEFT JOIN`还可以为每一行返回多行`A`-您的问题中没有任何内容表明其中不能有多行`B`与条件匹配。您必须`GROUP BY`（或使用`DISTINCT`）来避免这种情况。就像是：

```
SELECT a.*, max(b.date) AS last_date
FROM   a
LEFT   JOIN b ON a.aid = b.aid AND b.date >= curdate()
GROUP  BY a.aid 
```

# android - Android 中的两个进程如何使用相同的 SQLite 数据库？

> ID：10147880
> 
> 赞同：2
> 
> 时间：2012-04-13T20:28:27.377
> 
> 标签：android, sqlite, android-service

一个应用程序中的两个进程，一个是活动，另一个是服务，如何使用一个通用的 SQLite 数据库？这不是一个针对非常具体问题的问题，但我正在寻找最后三个的解决方案，但没有帮助。

感谢帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T20:53:32.747

您可以编写一个 ContentProvider，它将使用 SQLite 完成所有工作，并且两个应用程序都将使用它来访问数据库。

[http://developer.android.com/guide/topics/providers/content-providers.html](http://developer.android.com/guide/topics/providers/content-providers.html)

# android - 迭代数组列表时垃圾收集器减慢应用程序的速度

> ID：10147882
> 
> 赞同：0
> 
> 时间：2012-04-13T20:28:33.483
> 
> 标签：android

我使用以下代码将元素从 ArrayList 转换为字符串：

```
public static List<Location> GPSLocalLocations = new ArrayList<Location>(1);
String mystr = "";
for (int i=0; i<GPSService.GPSLocalLocations.size(); i++)
{
mystr += "\n" + GPSService.GPSLocalLocations.get(i).toString();
} 
```

将我的代码更改为以下内容：

```
for (int i=0; i<GPSService.GPSLocalLocations.size(); i++)
{
    gpslog.append("\n").append(GPSService.GPSLocalLocations.get(i).toString());
} 
```

它会导致更少的 GC Free 消息:)。我的错误，应用程序并没有因此而挂起......我想是因为我多次运行了我的 ASyncTask ......

但仍然迭代超过 1000 个元素的 ArrayList 需要一些时间 [大约 10 秒]。那样行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:32:18.600

我建议使用[StringBuilder](http://developer.android.com/reference/java/lang/StringBuilder.html)。

从这里[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/location/Location.java#Location.toString%28%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.2_r1.1/android/location/Location.java#Location.toString%28%29)：

```
@Override public String  [More ...] toString() {
    return "Location[mProvider=" + mProvider +
        ",mTime=" + mTime +
        ",mLatitude=" + mLatitude +
        ",mLongitude=" + mLongitude +
        ",mHasAltitude=" + mHasAltitude +
        ",mAltitude=" + mAltitude +
        ",mHasSpeed=" + mHasSpeed +
        ",mSpeed=" + mSpeed +
        ",mHasBearing=" + mHasBearing +
        ",mBearing=" + mBearing +
        ",mHasAccuracy=" + mHasAccuracy +
        ",mAccuracy=" + mAccuracy +
        ",mExtras=" + mExtras + "]";
} 
```

我建议您自己按照以下方式编写：

```
public static List<Location> GPSLocalLocations = new ArrayList<Location>(1);
StringBuilder gpslog = new StringBuilder();
for (int i=0; i<GPSService.GPSLocalLocations.size(); i++)
{
    Location location = GPSService.GPSLocalLocations.get(i); 
    gpslog.append("\n")
        .append("Location[Provider=").append(location.getProvider(())())
        .append(",Time=").append(location.getTime())
        .append(",Latitude=").append(location.getLatitude())
        .append(",Longitude=").append(location.getLongitude())
        .append(",HasAltitude=").append(location.getHasAltitude())
        .append(",Altitude=").append(location.getAltitude())
        .append(",HasSpeed=").append(location.getHasSpeed())
        .append(",Speed=").append(location.getSpeed())
        .append(",HasBearing=").append(location.getHasBearing())
        .append(",Bearing=").append(location.getBearing())
        .append(",HasAccuracy=").append(location.getHasAccuracy())
        .append(",Accuracy=").append(location.getAccuracy())
        .append(",Extras=").append(location.getExtras()).append("]");
} 
```

# c++ - 基于从两个不同线程获取的时间戳匹配图像

> ID：10147886
> 
> 赞同：2
> 
> 时间：2012-04-13T20:28:53.463
> 
> 标签：c++, multithreading, opencv

对于我正在处理的项目，我使用两个不同的线程从使用 Opencv 和 C++ 的 Windows 系统上的不同硬件获取图像。出于本文的目的，我们将它们称为 camera1 和 camera2。由于不同的帧速率，我无法在同一线程上同时从 camera1 和 camera2 捕获或尝试一次捕获一个图像。相反，我为两个相机设置了缓冲区。Camera1 的运行速度是 camera2 的两倍以上。

第三个线程从 camera2 获取帧并尝试将其与 camera1 在最近时间点拍摄的图像相匹配。我遇到的问题是我找不到一种好方法来将来自一个来源的图像与在另一个来源中大致同时获取的图像进行匹配。

当在非高优先级的单独线程中使用时，是否有一种方法可以为这些图像分配准确的时间戳？如果没有，是否有另一种更适合这样的系统的设计方法。

当在不同 CPUS 上的单独线程中使用时，我很难找到任何关于在 Windows 中跟踪时间的方法（如 clock() 和 queryperformancecounter ）有多远的信息。我已经读到它们在单独的线程中使用时并不准确，但我以大约每秒 20 帧的速度获取帧，所以即使它们关闭，它也可能足够接近，仍然可以正常工作。

先感谢您！让我知道我是否应该澄清任何事情或更好地解释。

**编辑：**

不幸的是，我认为我没有任何方法可以从驱动程序或硬件中获取时间戳。我想我已经找到了一种方法，可以非常准确地确定相对于每个线程实际捕获图像的时间。我真的不知道如何处理的部分是如果我在不同内核上执行的两个线程中使用时钟（）或类似的东西，时间戳可能有多远。如果我可以指望两个不同内核上的时间戳彼此相距大约 25 毫秒，那将是理想的。我只是还没有真正找到衡量两者之间差异的好方法。我做了更多的研究，似乎 Windows API 中的 timeGetTime 并没有受到单独的 cpu 内核调用的太大影响。我要试试看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T22:18:51.943

要获得满意的答案，您需要先回答以下问题：

*   图像需要匹配多近？
*   您可以忍受多少时间戳的抖动/错误？
*   从图像被捕获到你的线程接收到图像并可以时间戳之间，你期望有多少延迟？
*   两个摄像头的延迟预期是否大致相同？

如果你有一个大部分是静态的场景，那么你可以忍受比你有一个非常动态的场景更高的时间戳抖动和延迟。

的精度`clock()`不会成为时间戳错误的主要因素——毕竟，您应该关心相对误差（两个线程之间的时间戳有多接近），而不是绝对误差（时间戳与真正的原子有多接近）时间）。

另一方面，硬件和线程之间的延迟，尤其是延迟的抖动，将导致时间戳中的大部分错误。如果您能找到一种在硬件或至少在驱动程序中获取时间戳的方法，那么它将大大有助于提高时间戳的准确性。

# android - SQLiteOpenHelper“onCreate”没有被调用？（数据库不存在）

> ID：10147888
> 
> 赞同：4
> 
> 时间：2012-04-13T20:29:00.063
> 
> 标签：android, sqlite, sqliteopenhelper

从我以这种方式实例化的片段

```
fmdata = new FileManagerData(getActivity()); 
```

下面的课。我不明白为什么没有调用 onCreate() 并且没有创建我的数据库。

```
public class FileManagerData {
public static final String TAG = FileManagerData.class.getSimpleName();;

Context context;
DBHelper dbHelper;

public FileManagerData (Context context){
    this.context = context;
    dbHelper = new DBHelper();
}

private class DBHelper extends SQLiteOpenHelper{

    private static final String DB_NAME = "filename.db";
    private static final String DB_SQL = "filename.sql";
    private static final int DB_VERSION = 1; // internal number

    public DBHelper() {
        super(context, DB_NAME, null, DB_VERSION);  
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
            // this is NEVER called and my DB does not exist yet
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }   
} 
```

***编辑***：诀窍是必须使用数据库（读取或写入）所以 onCreate() 被调用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-13T21:24:32.937

该`onCreate`方法**将在首次访问 DB 后调用**。对数据库进行查询`onCreate`并将被调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T20:31:52.277

数据库可能存在于较早的尝试中。

卸载您的应用，然后重试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T23:54:01.343

我知道这个线程已经接受了答案。尽管如此，这是我必须补充的：

我有：

```
 protected class OpenHelper extends SQLiteOpenHelper {

    @Override
    public void onCreate(SQLiteDatabase db) {
        try {
             MHSqlDb.this.createTables(db);
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

我这样称呼：

```
 iOpenHelper = new OpenHelper(iDbFileName, DATABASE_VERSION ); 
```

数据库文件在这个阶段不存在。

然后我对应用程序进行一些调试。我从不打电话

```
 iOpenHelper.getReadableDatabase(); 
```

我也不打电话

```
 iOpenHelper.getWritableDatabase(); 
```

数据库文件仍然不存在。现在，当我从调试器中终止应用程序时，我突然可以看到创建的数据库文件（名称在 iDbFileName 中）。从不调用 OpenHelper 的 onCreate 方法。

因此，虽然我同意 onCreate 方法的意图似乎是在数据库文件不存在并且调用 getReadableDatabase() 或 getWritableDatabase() 时调用，但显然并非总是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-01T21:32:16.037

卸载应用程序将删除数据库，因此将在下次运行时调用 onCreate。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T21:11:16.740

你应该把 onCreate 这个：

```
sqLiteDatabase.execSQL("create table" + DB_NAME + " ( _id integer primary key autoincrement, " + fieldOne + "INTEGER, " + fieldTwo + "INTEGER);"); 
```

其中 fieldOne 和 fieldTwo 是表列的名称。也看这里： [http ://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)

# visual-studio-2010 - 从 Visual Studio（2010 或 11）添加对静态文件夹的引用

> ID：10147898
> 
> 赞同：0
> 
> 时间：2012-04-13T20:29:57.473
> 
> 标签：visual-studio-2010, visual-studio-2012, code-organization

我想包括一些在许多项目和解决方案之间共享的静态文件文件夹。

这些文件可以是许多项目之间共享的图像、脚本库或 css。

我不想每次都复制项目结构中的文件夹，而是引用它，就像我们可以在同一解决方案中的项目之间链接文件一样，因此如果引用文件夹中的任何文件发生更改，则链接到它的所有项目都将具有更新版本.

我知道我可以把它放在一个共享的 dll 中并在其中嵌入资源，但我希望能够选择要包含的女巫文件夹。

这对 Vs2010 或 Vs11 可行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:49:25.137

当然，这是可能的，甚至没有那么难。将文件放在硬盘驱动器中一个众所周知的位置，然后将它们作为链接添加到每个项目中。请参阅以下文章的第二部分：

[http://msdn.microsoft.com/en-us/library/9f4t9t92.aspx](http://msdn.microsoft.com/en-us/library/9f4t9t92.aspx)

如果您使用源代码管理，我强烈建议您为每个解决方案文件至少有一个单独的文件夹，并将该文件夹嵌套在您的解决方案根目录下的某处。如果您的解决方案文件包含当前工作空间之外的位置，则 TFS 尤其会变得焦躁不安。（它会起作用，但您可能会收到奇怪的警告或错误，尤其是当其他人第一次尝试获得解决方案时。）

# python - pgu setup.py 安装回溯错误

> ID：10147907
> 
> 赞同：0
> 
> 时间：2012-04-13T20:30:19.117
> 
> 标签：python, installation, pygame, pgu

我在 Mac 上运行 pgu setup.py 安装文件时遇到问题。在 IDLE 中运行文件时出现的错误是：

```
Traceback (most recent call last):
  File "/Developer/Python/pgu-0.18/setup.py", line 72, in <module>
    main()
  File "/Developer/Python/pgu-0.18/setup.py", line 69, in main
    setup(**setup_args)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/core.py", line 140, in setup
    raise SystemExit, gen_usage(dist.script_name) + "\nerror: %s" % msg
SystemExit: usage: setup.py [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]
   or: setup.py --help [cmd1 cmd2 ...]
   or: setup.py --help-commands
   or: setup.py cmd --help

error: no commands supplied 
```

我无法解释错误的含义。谢谢。

我现在意识到我应该运行：

```
python setup.py install 
```

但是，我在 Mac 上运行。在终端中运行该脚本会导致找不到文件的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T07:16:34.987

```
svn checkout http://pgu.googlecode.com/svn/trunk/ pgu
cd pgu
**python setup.py install** 
```

# android - 安卓实时更新？

> ID：10147908
> 
> 赞同：0
> 
> 时间：2012-04-13T20:30:21.940
> 
> 标签：android, json, live, live-update

我正在创建一个使用 JSON 与 Web 服务器通信的 android 游戏。当有人与另一个用户开始新游戏时，我希望该用户立即收到通知。到目前为止，我已经发出通知并且它们工作了，但它只在我登录游戏时检查，我如何创建一个实时更新，即使游戏关闭也可能每隔一分钟检查一次？

* * *

c2dm.php

```
<?

function googleAuthenticate($username, $password, $source="Company-AppName-Version", $service="ac2dm") {

    session_start();
    if( isset($_SESSION['google_auth_id']) && $_SESSION['google_auth_id'] != null)
        return $_SESSION['google_auth_id'];

    // get an authorization token
    $ch = curl_init();
    if(!ch){
        return false;
    }

    curl_setopt($ch, CURLOPT_URL, "https://www.google.com/accounts/ClientLogin");
    $post_fields = "accountType=" . urlencode('HOSTED_OR_GOOGLE')
        . "&Email=" . urlencode($username)
        . "&Passwd=" . urlencode($password)
        . "&source=" . urlencode($source)
        . "&service=" . urlencode($service);
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post_fields);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_FRESH_CONNECT, true);
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);

    // for debugging the request
    //curl_setopt($ch, CURLINFO_HEADER_OUT, true); // for debugging the request

    $response = curl_exec($ch);

    //var_dump(curl_getinfo($ch)); //for debugging the request
    //var_dump($response);

    curl_close($ch);

    if (strpos($response, '200 OK') === false) {
        return false;
    }

    // find the auth code
    preg_match("/(Auth=)([\w|-]+)/", $response, $matches);

    if (!$matches[2]) {
        return false;
    }

    $_SESSION['google_auth_id'] = $matches[2];
}

function sendMessageToPhone($authCode, $deviceRegistrationId, $msgType, $messageText) {

    $headers = array('Authorization: GoogleLogin auth=' . $authCode);
    $data = array(
        'registration_id' => $deviceRegistrationId,
        'collapse_key' => $msgType,
        'data.message' => $messageText //TODO Add more params with just simple data instead           
    );

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, "https://android.apis.google.com/c2dm/send");
    if ($headers)
    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

    $response = curl_exec($ch);

    curl_close($ch);

    return $response;
}
?> 
```

C2DM注册接收器

```
public class C2DMRegistrationReceiver extends BroadcastReceiver
{

@Override
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    Log.w("C2DM", "Registration Receiver called");
    if ("com.google.android.c2dm.intent.REGISTRATION".equals(action)) {
        Log.w("C2DM", "Received registration ID");
        final String registrationId = intent
                .getStringExtra("registration_id");
        String error = intent.getStringExtra("error");

        Log.d("C2DM", "dmControl: registrationId = " + registrationId
                + ", error = " + error);
        // TODO Send this to my application server
    }
}

public void sendRegistrationIdToServer(String deviceId, String registrationId) {

    Log.d("C2DM", "Sending registration ID to my application server");
    HttpClient client = new DefaultHttpClient();
    HttpPost post = new HttpPost("myserverpage");
    try {
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(1);
        // Get the deviceID
        nameValuePairs.add(new BasicNameValuePair("deviceid", deviceId));
        nameValuePairs.add(new BasicNameValuePair("registrationid", registrationId));

        post.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        HttpResponse response = client.execute(post);
        BufferedReader rd = 
            new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        String line = "";
        while ((line = rd.readLine()) != null) {
            Log.e("HttpResponse", line);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
}
} 
```

C2DM消息接收器

```
public class C2DMMessageReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    Log.w("C2DM", "Message Receiver called");
    if ("com.google.android.c2dm.intent.RECEIVE".equals(action)) {
        Log.w("C2DM", "Received message");
        final String payload = intent.getStringExtra("payload");
        Log.d("C2DM", "dmControl: payload = " + payload);
        // Send this to my application server
    }
}
}

public void register(View view) {
    Intent intent = new Intent("com.google.android.c2dm.intent.REGISTER");
    intent.putExtra("app",PendingIntent.getBroadcast(this, 0, new Intent(), 0));
    intent.putExtra("sender", "app-name@gmail.com");
    startService(intent);
} 
```

现在，如果我开始与某人进行游戏，我有一个将信息发送到服务器的类。那我该如何进行呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:42:21.660

你可以通过实现一个`Service`. 但是，每分钟发出一个 HTTP 请求来获取状态将消耗电池电量。我建议研究[C2DM](http://code.google.com/android/c2dm/)以便向客户端发送推送通知。

# sendmail - 我的网络应用服务器发送电子邮件。我还使用 Google Apps 来托管我的电子邮件。我无法向自己的用户发送消息？

> ID：10147910
> 
> 赞同：0
> 
> 时间：2012-04-13T20:30:34.047
> 
> 标签：sendmail, exim4

请原谅可怕的标题。整个下午我一直在努力解决这个问题，结果才意识到我是在疯狂追逐。

简而言之：

*   设置 Google Apps 以处理我的域的传入电子邮件 ( `foobar.org`)
*   在我的 Linode 上设置 exim4 为我的网络应用程序发送外发电子邮件
*   通过将电子邮件发送到我的私人电子邮件 ( `julian@otherdomain.net`) 和工作电子邮件 ( `julian@foobar.org`) 进行测试。

3 小时后，我仍然无法弄清楚为什么在 收到电子邮件`otherdomain.net`，但在 没有收到电子邮件`foobar.org`。

所以我放弃了。**`Ctrl`+`D`**退出超级用户帐户，然后看到：`You have new mail in /var/mail/julian`

*掌心*

* * *

因此，发送的任何传出电子邮件`foobar.org`都会传递到本地用户帐户。说得通。我如何告诉`exim4`将电子邮件发送到互联网，所以当它返回到我的 DNS 时，它会被路由到 Google 的服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:42:48.527

您的本地邮件服务需要设置为使用您的域的 MX 记录。使用 Plesk 或 Cpanel 之类的工具是关闭电子邮件服务并确保本地 DNS 记录包括外部邮件交换器 (Google) 的 A 记录和指向它的合适 MX 记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T15:50:26.307

最后，我在设置服务器时添加了不正确的主机文件条目。

我有以下条目：

```
public-ip    domain.tld    machinename 
```

虽然以下更合适

```
public-ip    machinename.domain.tld    machinename 
```

从那时起，所有发送到的电子邮件`domain.tld`最终都被发送出服务器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T12:25:59.733

这对我有用。

[https://serverfault.com/a/341779/80240](https://serverfault.com/a/341779/80240)

# java - JComponent.setBounds 最后一个 JComponent 放错地方

> ID：10147912
> 
> 赞同：2
> 
> 时间：2012-04-13T20:30:56.053
> 
> 标签：java, swing, user-interface

我最近在使用 Swing 时遇到了一些问题。我正在尝试制作类似于下图中的内容，以说明算法的数据结构。

[![笔记本图片](../Images/c3191e5572af4ed5778919859dee8738.png)](https://i.stack.imgur.com/tyEer.jpg)
[（来源：[ius.edu](http://homepages.ius.edu/rwisman/C201/html/ch4-2.jpg)）]

在接下来的课程中，我所做的只是画出一些带有数字的矩形。并平移它们，但是最后一个矩形绘制在 0,0 处。我难住了。

如果`JPanel`在循环之后添加（注释掉），那么它会按预期绘制。

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.RenderingHints;

import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class DrawingRect {

    public static void main(String[] args) {
        DrawingRect d = new DrawingRect();
    }

    public DrawingRect() {

        JFrame frame = new JFrame("Drawing a rect");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        JPanel swingPanel = new JPanel();
        swingPanel.setPreferredSize(new Dimension(500, 500));

        swingPanel.setVisible(true);

        swingPanel.setLayout(new BorderLayout(0, 0));

        int base = 15;
        for (int i = 1; i <= 25; i++) {
            Graphic re = new Graphic(i);

            //translating the graphic
            re.setBounds(base + 30 * i, base + 20 * i, 110, 110);

            swingPanel.add(re);
        }

        // if say I add a JPanel in here as the last element
        // then the boxes will draw correctly.
        //swingPanel.add(new JPanel());

        swingPanel.setPreferredSize(new Dimension(800, 600));

        frame.getContentPane().add(swingPanel);

        frame.pack();
        frame.setVisible(true);
    }

    public class Graphic extends JComponent {

        private static final long serialVersionUID = 1L;
        private static final int PREF_W = 100;
        private static final int PREF_H = 100;
        int id;

        public Graphic(int id) {
            this.id = id;
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            Graphics2D g2 = (Graphics2D) g;
            g2.setColor(Color.black);

            g2.setColor(Color.black);
            g2.drawRoundRect(0, 0, 30, 30, 20, 20);

            g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);

            Font font = new Font("", Font.PLAIN, 13);
            g2.setFont(font);

            g2.drawString("" + id, 15, 20);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(PREF_W, PREF_H);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T21:01:38.797

的默认[布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)是，但是您将组件定位为就好像布局`JPanel`是。此外，您正在绘制嵌套组件可以自动执行的内容。`FlowLayout``null`

相反，将几个`JPanel`包含`JLabel`'s 的 s 添加到具有`GridLayout`. 根据需要使用空面板。在外部面板中覆盖`paintComponent()`以绘制连接线。

附录：任何时候都想使用[*绝对定位*](http://docs.oracle.com/javase/tutorial/uiswing/layout/none.html)，[`JInternalFrame`](http://docs.oracle.com/javase/tutorial/uiswing/components/internalframe.html)可能是另一种选择。相关示例可在[此处](https://stackoverflow.com/a/3952082/230513)和[此处](https://stackoverflow.com/a/8392620/230513)找到。

附录：如果项目超出原型阶段，还可以考虑使用[*自定义布局管理器*](http://docs.oracle.com/javase/tutorial/uiswing/layout/custom.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:20:34.797

这是因为您使用的是 BorderLayout。您可以通过更改添加行以包含特定布局位置来测试这一点：`swingPanel.add(re,BorderLayout.SOUTH)`.

至于解决方案，为什么不在图片上绘制所有矩形并在循环结束时对其进行更新？或者添加到 JPanel 是您演示的一部分吗？

# ruby - Ruby 在特定目录中运行 shell 命令

> ID：10147913
> 
> 赞同：60
> 
> 时间：2012-04-13T20:31:02.750
> 
> 标签：ruby, shell, command

我知道如何在 Ruby 中运行 shell 命令，例如：

```
%x[#{cmd}] 
```

但是，我如何指定一个目录来运行这个命令？

是否有类似的脱壳方式，类似于`subprocess.Popen`Python：

```
subprocess.Popen(r'c:\mytool\tool.exe', cwd=r'd:\test\local') 
```

谢谢！

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-04-13T21:07:09.483

您可以使用`Dir.chdir`. 在块内，您位于请求的目录中，在块之后您仍在上一个目录中：

```
Dir.chdir('mydir'){
  %x[#{cmd}]
} 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-13T20:45:45.513

Ruby 1.9.3（阻塞调用）：

```
require 'open3'
Open3.popen3("pwd", :chdir=>"/") {|i,o,e,t|
  p o.read.chomp #=> "/"
}

Dir.pwd #=> "/home/abe" 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-14T10:53:24.957

还有，走shell路线

```
%x[cd #{dir} && #{cmd}] 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-08-26T08:10:08.217

我看到的最接近安全更改目录的回招是`capture2`：

```
require 'open3'
output, status = Open3.capture2('pwd', :chdir=>"/tmp") 
```

您可以在 ruby​​ 文档中看到其他有用的 Open3 方法。一个缺点是对的`jruby`支持`open3`相当破碎。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-13T20:46:17.260

也许这不是最好的解决方案，但尝试使用 Dir.pwd 获取当前目录并将其保存在某处。之后使用 Dir.chdir(destination)，其中destination 是您要从中运行命令的目录。运行命令后再次使用 Dir.chdir，使用以前保存的目录来恢复它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-12-03T17:21:43.060

我遇到了同样的问题，并通过将两个命令放在反引号中并用'&&'分隔来解决它：

```
`cd \desired\directory && command` 
```

# php - 页面加载时间非常长

> ID：10147914
> 
> 赞同：-2
> 
> 时间：2012-04-13T20:31:06.087
> 
> 标签：php, javascript, jquery, performance

我正在尝试调查我的网站运行缓慢的原因。

这里我附上萤火虫截图：

![在此处输入图像描述](../Images/27d584b243b21a47e281505451c7ece3.png)

如您所见，所有内容仅在 2.92 秒内加载完毕，但 javascript onload 事件在 17.67 秒后触发。

如果您想查看网站本身： http: [//maylashop.com](http://maylashop.com)。我曾尝试使用 YSlow，我得到了 A 级，但它没有帮助。

如果有人修复或知道是什么原因造成的，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:40:31.803

很确定这与javascript无关。仅请求您的主页大约需要 2 秒钟。在linux机器上运行这个：

```
date ; lynx -source http://maylashop.com/ > /dev/null ; date
Fri Apr 13 22:38:19 CEST 2012
Fri Apr 13 22:38:21 CEST 2012 
```

这是主机生成索引页面太慢或存在网络传输问题的独立确认。

对 /index.php 或 /index.html 甚至是我动态创建的 404 页面做同样的事情会产生相同的约 2 秒延迟。

**编辑**：检查图像下载速度，那个是 <1 秒。接近于 0。

您的 PHP 代码中的某些东西可能会造成问题（导致延迟）。其中之一可能是连接到 MySQL 服务器（或您正在使用的任何东西）的延迟。数据库服务器是在同一台机器上，还是在远程? 您是在每次通话时都连接到它，还是有缓存系统？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:42:03.443

为什么[http://cf.addthis.com](http://cf.addthis.com)？[http](http://platform.twitter.com) ://platform.twitter.com，plusone.google.com .... 我没看到你在哪里使用它们？如果您正在使用，请在需要时添加它们

按照指南[Yslow](http://developer.yahoo.com/yslow/)，获取一些矩阵并检查瓶颈是什么

你会很乐意遵守[这些规则](http://developer.yahoo.com/performance/rules.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:44:36.623

这不是 JavaScript 问题。您的 PHP 脚本需要很长时间才能执行（见屏幕截图）。该页面正在加载的所有其他资源（JS、CSS、图像等）的加载时间不到一秒。我 95% 确定这是由`zlib.output_compression`. 尝试将以下代码添加到脚本顶部，看看禁用它是否有用：

```
ini_set('zlib.output_compression', 0); 
```

如果这样可以解决问题，那么您可以考虑不使用`zlib.out_compression`或弄清楚代码中的哪些特定内容导致它出现问题（通常是输出缓冲）。

![在此处输入图像描述](../Images/8c75f50e99cc071a96320ef3f6b1f718.png)

# android - 使用 Android SDK 建立 HTTPConnection

> ID：10147917
> 
> 赞同：1
> 
> 时间：2012-04-13T20:31:11.440
> 
> 标签：android, httpclient

我需要使用同样使用基本身份验证的参数连接到一个 url。根据我的谷歌搜索，这就是我所拥有的：

```
String param = "?LS_ACCOUNT_SECRET=" + 
    URLEncoder.encode("dafsd","UTF-8") + 
    "&LS_ACCOUNT_SALT=" + URLEncoder.encode("dasfds","UTF-8");
url = new URL(com.jcs.toolbox.SitterMaticApi.API_REGISTER + param);
urlConnection = (HttpURLConnection) url.openConnection();
urlConnection.setDoOutput(true);
urlConnection.setRequestMethod("GET");
urlConnection.setRequestProperty("Authorization", 
    "Basic pass:word");
urlConnection.setRequestProperty("Content-Type", 
    "application/x-www-form-urlencoded");
OutputStreamWriter wr = new OutputStreamWriter(
    urlConnection.getOutputStream());
wr.write(param);
wr.flush(); 

// Get the response
responseInputStream = urlConnection.getInputStream();
rd = new BufferedReader(new InputStreamReader(
    urlConnection.getInputStream())); 
String line; 
while ((line = rd.readLine()) != null) { 
    acct +=  line;
}

//wr.close(); 
rd.close();
File acctfile = new File("maticacct.dat");
acctfile.createNewFile();
BufferedWriter buf = new BufferedWriter(new FileWriter(acctfile,true));
buf.append(acct);
buf.newLine();
buf.close();
new AlertDialog.Builder(this).setTitle("New Account").
    setMessage("New Account: " + acct).
    setNeutralButton("Close", null).show(); 
```

我尝试了 HTTPGet，但我得到“不允许获取方法”：

```
HttpGet request = new HttpGet(sb.toString());
HttpResponse response = httpClient.execute(request);
int status = response.getStatusLine().getStatusCode();
InputStream content = response.getEntity().getContent();
BufferedReader rd = new BufferedReader(new InputStreamReader(content)); 
String line = null;
String acct = null;
while ((line = rd.readLine()) != null) { 
    acct +=  line;
}

rd.close();
content.close(); 
```

我已经添加了应用程序使用互联网的权限。所以任何帮助表示赞赏。

# asp.net-mvc - 应用程序/xhtml+xml 内容类型的 GZip 压缩在 IIS 7.5/MVC 中不起作用

> ID：10147923
> 
> 赞同：3
> 
> 时间：2012-04-13T20:31:33.163
> 
> 标签：asp.net-mvc, iis, iis-7.5, gzip

我有一个在启用压缩的 IIS 7.5 上运行的 MVC3 站点。

GZip 压缩正在站点的所有页面上工作，除了我`application/xhtml+xml`在控制器中手动将内容类型更改为（出于各种原因这是必要的）`Response.ContentType = "application/xhtml+xml";`的几个页面（

这种内容类型会导致 GZip 无法工作，有什么办法可以解决吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-14T22:21:15.500

`application/xhtml+xml`不是 IIS 压缩知道要压缩的内置 mime 类型之一。您必须明确启用此 mime 类型的压缩。

我假设您希望启用压缩，无论它是静态文件还是动态生成的。为此，您必须将 mime-type 添加到机器级配置和部分。使用部署脚本执行此操作的一种更简单的方法是像这样使用：[`system.webServer/httpCompression`](http://www.iis.net/ConfigReference/system.webServer/httpCompression) `staticTypes``dynamicTypes``appcmd.exe`

**添加对压缩静态内容的支持**

```
appcmd.exe set config -section:system.webServer/httpCompression /+"staticTypes.[mimeType='application/xhtml%%2bxml',enabled='True']" /commit:apphost 
```

**添加对压缩动态内容的支持**

```
appcmd.exe set config -section:system.webServer/httpCompression /+"dynamicTypes.[mimeType='application/xhtml%%2bxml',enabled='True']" /commit:apphost 
```

显然，您可以对可能想要压缩的任何其他内容类型使用相同的方法。

# jquery - 需要帮助将事件绑定到 jQuery 模板

> ID：10147926
> 
> 赞同：1
> 
> 时间：2012-04-13T20:31:47.677
> 
> 标签：jquery

当我单击减号按钮时，我希望文本框中的值减少，当我单击加号按钮时，我希望文本框中的值增加。我正在使用一个 jQuery 模板，它接受 JSON 来自动填充。

```
<script id="template" type="text/x-jquery-tmpl">
   <div style="display:block;" id="${getNextId()}">
     <div class="adjuster">
       <button id='minusbutton'>-</button>
       <input id='quantityText' class="enterQuantity" type=text 
             style="width:40px; margin-left:5px;margin-right:5px" />
       <button id='plusbutton'>+</buton>
     </div> 
     <div class="productName">
       <div>${productname}</div>
     </div>
     <div class="quantity">
         <span style="font-weight:bold;">${quantity}</span>
         <span> Remaining</span>
     </div>
   </div>
</script> 
```

如果我将 onclick 事件添加到标记中的按钮，我该如何实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T20:59:24.493

这是一个简单的实现：http: [//jsfiddle.net/GAfyW/4/](http://jsfiddle.net/GAfyW/4/)

HTML：

```
<div id="plusOne">Click to Increment</div>
<div id="minusOne">Click to Decrement</div>
<span type="text" id="valueContainer"/>0</span> 
```

JS 放置在 onload 块中：

```
$('#plusOne').bind('click', function() {
  var value = $('#valueContainer').html();
  // Increment the value
  $('#valueContainer').html(parseInt(value)+1);
});

$('#minusOne').bind('click', function() {
  var value = $('#valueContainer').html();
  // Decrement the value
  $('#valueContainer').html(parseInt(value) - 1);
}); 
```

在这里：

*   'plusOne' = 'plusButton';
*   'minusOne' = '减号按钮';
*   'valueContainer' = 你用来容纳数量的跨度。

# delphi - 如何更改 32 位 TBitmap 中特定颜色的 alpha 值？

> ID：10147932
> 
> 赞同：1
> 
> 时间：2012-04-13T20:32:28.767
> 
> 标签：delphi, bitmap, tbitmap

当像素包含 32 位 TBitmap 的特定颜色时，我需要更改 alpha 分量的值，我知道[ScanLine](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TBitmap.ScanLine)属性以访问位图数据，但我不知道如何更改每个的 alpha 分量像素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T20:41:54.580

这是一个基本的实现

首先你需要定义一个记录来保存 ARGB 结构

```
 TRGB32 = record
    B, G, R, A: byte;
  end; 
```

然后，您必须定义一个 TRGB32 数组来投射扫描线并获取和设置值。

检查此示例方法

```
procedure SetAlphaBitmap(const Dest: TBitmap;Color : TColor;Alpha:Byte);
type
  TRGB32 = record
    B, G, R, A: byte;
  end;
  PRGBArray32 = ^TRGBArray32;
  TRGBArray32 = array[0..0] of TRGB32;
var
  x, y:    integer;
  Line, Delta: integer;
  ColorRGB : TColor;
begin
  if Dest.PixelFormat<>pf32bit then  exit;

  ColorRGB:=ColorToRGB(Color);
  Line  := integer(Dest.ScanLine[0]);
  Delta := integer(Dest.ScanLine[1]) - Line;
  for y := 0 to Dest.Height - 1 do
  begin
    for x := 0 to Dest.Width - 1 do
      if TColor(RGB(PRGBArray32(Line)[x].R, PRGBArray32(Line)[x].G, PRGBArray32(Line)[x].B))=ColorRGB then
        PRGBArray32(Line)[x].A := Alpha;
    Inc(Line, Delta);
  end;
end; 
```

你也可以看看我写的[这个单元](http://code.google.com/p/vcl-styles-utils/source/browse/trunk/Common/uHSLUtils.pas)来操作 32 位图

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T20:40:15.750

For each 32 bits pixel the highest byte contains the alpha value.

```
var
  P: Cardinal;
  Alpha: Byte;
...
begin
...
  P := bmp.Canvas.Pixels[x, y];         // Read Pixel
  P := P and $00FFFFFF or Alpha shl 24; // combine your desired Alpha with pixel value
  bmp.Canvas.Pixels[x, y] := P;         // Write back
...
end; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T23:11:25.803

我将对 RRUZ 的回答进行以下调整：

```
procedure SetAlphaBitmap(Dest: TBitmap; Color: TColor; Alpha: Byte); 
type 
  TRGB32 = packed record 
    B, G, R, A: Byte; 
  end; 
  PRGBArray32 = ^TRGBArray32; 
  TRGBArray32 = array[0..0] of TRGB32; 
var 
  x, y: Integer; 
  Line: PRGBArray32; 
  ColorRGB: Longint; 
  Red, Green: Blue: Byte;
begin 
  if Dest.PixelFormat <> pf32bit then Exit; 

  ColorRGB := ColorToRGB(Color); 
  Red := GetRValue(ColorRGB);
  Green := GetGValue(ColorRGB);
  Blue := GetBValue(ColorRGB);

  for y := 0 to Dest.Height - 1 do 
  begin 
    Line := PRGBArray32(Dest.ScanLine[y]);
    for x := 0 to Dest.Width - 1 do
    begin
      with Line[x] do
      begin
        if (R = Red) and (G = Green) and (B = Blue) then 
          A := Alpha; 
      end;
    end;
  end; 
end; 
```

# c# - 如何反序列化 JSON 并提取某个值？

> ID：10147933
> 
> 赞同：-2
> 
> 时间：2012-04-13T20:32:32.447
> 
> 标签：c#, json

我有一个字符串中的 JSON。如何使用 JavascriptSerializer 对其进行反序列化并找到 SSOID 的值？

```
{
"Addresses":  [
    {
        "Address": "123 Test Road",
        "State": "Mississippi"
    }
],
"Birthdate": "April 12 2012",
"CreateDate": "April 13 2012",
"IDs": [
    {
        "isDefault": false,
        "PurchaseID": "883"
    }
],
"Sex": "Male",
"SSOID": 23444,
"Suffix": null,
"BoardID": 4324
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:42:55.797

在这种特殊情况下：

```
string s = "your json string";   
System.Web.Script.Serialization.JavaScriptSerializer js = new System.Web.Script.Serialization.JavaScriptSerializer();
var obj = js.DeserializeObject(s) as Dictionary<string,object>;
int ssoid = (int)obj["SSOID"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T20:44:14.487

```
var js = new JavaScriptSerializer();
var deserialized = (Dictionary<string, object>) js.DeserializeObject(json);
var ssoid = (int) deserialized["SSOID"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:45:10.553

```
 var SSOID = new JavaScriptSerializer()
                    .Deserialize<Dictionary<string, object>>(json)["SSOID"]; 
```

或者

```
dynamic jObj = new JavaScriptSerializer().DeserializeObject(json);
var SSOID = jObj["SSOID"]; 
```

# javascript - 如何将 match() 用于字符白名单？

> ID：10147935
> 
> 赞同：1
> 
> 时间：2012-04-13T20:32:42.560
> 
> 标签：javascript

我使用 preg_match 进行服务器端验证，但我也想有一个客户端。

对于我的 PHP，我允许这些字符：

```
'/^[A-Za-z][a-zA-Z0-9 .:-,!?]+$/' 
```

如何`match()`在 JavaScript 中创建白名单？

编辑：

我试过这个，但由于某种原因它不起作用：

我的调试器在 if 语句之前说：

`218SyntaxError: Invalid regular expression: range out of order in character class`

```
$('#title').blur(function(){
      input = $('#title').val();
      var invalidChars = /^[^a-z][^a-z\d .:-,!?]+$/i;
    if (!invalidChars.test(input)){
         alert('true');     
         }
      else {
           alert('false');
           }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T20:38:19.760

以上所有答案都是正确的，尽管只是一个旁注：而不是写作`[A-Za-z]`，一个简单的`/[a-z]/i`就足够了。这`i`是一个不区分大小写的标志...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T20:34:09.033

尝试以下

```
var text = ...;
if (text.match(/^[A-Za-z][a-zA-Z0-9 .:-,!?]+$/)) {
 ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-13T20:35:12.323

```
var validChars = /^[a-z][a-z\d .:\-,!?]+$/i;
if (validChars.test(myText)){ ... } 
```

如果您只想知道匹配是否存在，则使用`regex.test(str)`的性能略高。`str.match(regex)`

或者，如果您看到任何无效字符，您可以提前退出：

```
var invalidChars = /^[^a-z][^a-z\d .:\-,!?]+$/i;
if (!invalidChars.test(myStr)){
  // we passed
} 
```

这允许正则表达式测试在看到不允许的字符时停止。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-13T20:35:55.037

其实恰恰相反：

```
var regexp = /^[A-Za-z][a-zA-Z0-9 .:-,!?]+$/;

if (regexp.test(text)) {

} 
```

# facebook - Facebook Open Graph 如何与我喜欢的页面不同？

> ID：10147936
> 
> 赞同：1
> 
> 时间：2012-04-13T20:32:55.427
> 
> 标签：facebook, facebook-graph-api, facebook-like

好吧，这些年来我有几千页我喜欢的页面，我不能去编辑喜欢的页面并按 TAB + DEL 数千次手动删除我的喜欢。

难道没有更自动的方法可以通过使用开放图来删除我多年来喜欢的所有页面吗？

让您希望有一个与所有不同的按钮！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:10:09.683

在[User 对象](http://developers.facebook.com/docs/reference/api/user)文档中，在[Likes 连接](http://developers.facebook.com/docs/reference/api/user/#likes)下，没有任何关于更改/删除甚至添加喜欢的内容，它只是有一种读取用户喜欢的方式。

所以看起来，目前您无法自动执行此操作，您必须手动转到要删除的每个页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T21:12:00.163

这是不可能的，就像不可能为类似的东西做一个 HTTP POST 一样；对于安全漏洞，它可以被用作对 Facebook 用户的攻击。

# c# - C# 中从类型到接口的隐式转换——基本示例有效，但实际实现存在编译时错误

> ID：10147944
> 
> 赞同：1
> 
> 时间：2012-04-13T20:34:11.637
> 
> 标签：c#, interface, implementation

举个简单的例子：

```
interface IVehicle {
}

class Car : IVehicle {
} 
```

现在我应该能够做到以下几点：

```
IVehicle vehicle = new Car(); 
```

事实上，如果我像上面那样创建这些基类，我不会收到任何编译错误（并且代码会运行。）

但是在我的项目中，无论我在做什么基本上是这样的（据我所知），我都会收到以下错误：

```
Cannot implicitly convert type 'Namespace.Path.Car' to 'IVehicle'. An explicit conversion exists (are you missing a cast?) 
```

有时（如在不同的代码位置，不是不同的编译）显式转换工作，有时它编译但创建运行时异常（无效转换）。为什么基本示例没有问题，而更详细的类（但仍然是直接实现接口的单个​​类）有所有这些问题？

在某些情况下，它实际上会出现这个编译时错误：

```
Cannot implicitly convert type 'Namespace.Path.IVehicle' to 'IVehicle'. An explicit conversion exists (are you missing a cast?) 
```

我想我错过了这个隐式强制转换工作所需的一些重要条件，但我还没有发现什么区别导致简单示例工作和更详细的类如此奇怪地失败。我看到的唯一需要注意的是编译时错误只包括第一种类型的命名空间（如上面两个错误所示），但我不记得这是否正常。

为了消除任何环境原因，我只使用以下代码创建了一个测试用例：

```
ISimpleInterface simple = new SimpleImplementation();
IComplexInterface complex = new ComplexImplementation(); 
```

以上导致第二行出现编译时错误（表明它无法进行隐式转换）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-14T08:50:27.833

您要么有两种类型，要么有两种`IComplexInterface` *在*`ComplexImplementation`不同命名空间中命名的类型。

删除[using 语句](http://msdn.microsoft.com/en-us/library/aa664736%28v=vs.71%29.aspx)并使用类型的完整限定符，看看它是否解决了问题。导航到实现类仔细检查，以便它实现与您分配的相同接口。注意接口和类所在的*命名空间。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T20:45:59.447

间接接口实例化是正常的。正如您在问题中为简洁而定义的那样，该示例将编译并运行。

```
public interface ICar{}
public class Viper : ICar{}

ICar fun = new Viper(); 
```

非常基本的东西，虽然通常这会被包装在某种工厂模式中。无论哪种方式，该过程都很常见，因此问题必须出在您的实施中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-16T15:21:37.117

找出是什么原因造成的。此接口用作 WCF 服务合同。Svcutil 显然是在全局命名空间中创建接口的副本。由于它们位于不同的命名空间中，因此没有编译错误。关于错误指示两个不同名称（一个带有命名空间，一个没有命名空间）的部分表明这是导致它的原因。

# java - 来自反射调用的方法的 RuntimeException 传播

> ID：10147945
> 
> 赞同：4
> 
> 时间：2012-04-13T20:34:18.877
> 
> 标签：java, exception, reflection, exception-handling

我从代码开始。这个调用使用反射的方法

```
try {
    Method method = states.getClass().getDeclaredMethod(
            getCurrentStateId() + "_" + request.getEvent());
    states.setData(request, dataManager);
    method.invoke(states);
} catch (NoSuchMethodException e) {
    logger.debug("Method " + getCurrentStateId() + "_" + request.getEvent()
            + " cannot be found - invocation not performed.", e);
} catch (IllegalArgumentException e) {
    throw new InternalException("Method invocation with reflection failed.", e);
} catch (IllegalAccessException e) {
    throw new InternalException("Method invocation with reflection failed.", e);
} catch (InvocationTargetException e) {
    throw new InternalException("Method invocation with reflection failed.", e);
} 
```

并使用以下代码调用该方法，该代码抛出`PropertiesDontMatchException`（运行时）。

```
...
if (totalCredits < minimumCredits || totalCredits > maximumCredits) {
    throw new PropertiesDontMatchException("Minimum amount of credits=" + minimumCredits
            + ", maximum amount of credits=" + maximumCredits + ". Your amount of credits="                 + totalCredits + ". You have to modify your set of subjects.");
}
... 
```

问题是我的运行时异常被包装到`InvocationTargetException`第一个代码片段中并被捕获。这不是我想要的。但是根据文档，这是正确的行为。

所以我想出了这个解决方案

```
...
} catch (InvocationTargetException e) {
    if (e.getCause() instanceof PropertiesDontMatchException) {
        throw (PropertiesDontMatchException) e.getCause();
    }
    throw new InternalException("Method invocation with reflection failed.", e);
}
... 
```

这是传播我的运行时异常的正确方法还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T20:44:10.897

是的，在这种情况下，这是正确的错误处理。我只会将您的测试扩展到任何`RuntimeException`：

```
} catch (InvocationTargetException e) {
    if (e.getCause() instanceof RuntimeException) {
        throw (RuntimeException) e.getCause();
    }
    if (e.getCause() instanceof Error) {
        throw (Error) e.getCause();
    }
    throw new InternalException("Method invocation with reflection failed.", e);
} 
```

或者，如果您不介意使用而不是自定义检查异常，请使用来自[guava的](/questions/tagged/guava "显示标记为“番石榴”的问题")[`Throwables`实用程序类：](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Throwables.html)`RuntimeException``InternalException`

```
} catch (InvocationTargetException e) {
    throw Throwables.propagate(e.getCause());
} 
```

额外的包装是必要的，以区分您的方法抛出`IllegalAccessException`和反射机制本身抛出它。

可以观察到类似的 API 设计选择[`Future.get()`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#get%28long,%20java.util.concurrent.TimeUnit%29)- 如果从异步作业抛出异常，[`ExecutionException`](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutionException.html)则抛出包装实际异常。

# iphone - iphone输入类型（带两位小数的数字）

> ID：10147947
> 
> 赞同：6
> 
> 时间：2012-04-13T20:34:38.513
> 
> 标签：iphone, html, cordova, keyboard

我正在使用phonegap 开发一个iphone 应用程序，这意味着我的应用程序是html5、javascript 和css。我有一个带有物体重量字段的表格。我正在尝试获得类似于的输入类型；

```
<input type="time"/> 
```

Html5 支持不同类型的输入，这将为 iphone 切换不同的键盘，例如数字的数字键盘。我正在寻找的是可以垂直滚动数字的那个。就像你在 iPhone 上设置闹钟一样，下面的例子。

[http://blog.ringtonefeeder.com/wp-content/uploads/2009/01/iphone-alarm.png](http://blog.ringtonefeeder.com/wp-content/uploads/2009/01/iphone-alarm.png)

输入 type="time" 给了我这个，但它仅限于 24 小时窗口和 1-59 分钟窗口。

无论如何要自定义此输入类型，以便我可以获得 2 个十进制数？在 0-999.99 公斤的范围内。

我意识到这是一个模糊的问题，但很难解释。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-05-24T13:48:39.157

看看`inputmode="decimal"`属性。

[https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/inputmode](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/inputmode)

尚未得到广泛支持，但它在 iOS 12.2 中可用。

[https://caniuse.com/#feat=input-inputmode](https://caniuse.com/#feat=input-inputmode)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T21:17:23.247

据我所知，在PhoneGap 世界中没有办法做到这一点。[您可以在此处](http://conecode.com/news/2011/12/mobile-safari-uiwebview-input-types/)查看可用的键盘。如果你有能力使用 Objective-C，你可能会自己动手，但是你会为它创建一个插件，以便 PhoneGap 可以看到它。

该页面上未显示的键盘之一是：*UIKeyboardTypeDecimalPad*，这是一个只有数字和小数点的电话键盘，它也可能适用于您的应用程序。此处显示：

![UIKeyboardTypeDecimalPad](../Images/3fb669a5ad648aa336ac4047999eee0b.png)

但是，我一直无法弄清楚如何通过 HTML 显示它。

如果你想要电话键盘，你会使用：

```
<input type="tel"> 
```

同样，如果你想要一个数字键盘，它会是：

```
<input type="number"> 
```

据我所知（如果我错了，请有人纠正我），UIKeyboardTypeDecimalPad 没有类似这样的组成类型：

```
<input type="decimalNumber"> 
```

# php - 更新查询 MySQL PHP

> ID：10147951
> 
> 赞同：0
> 
> 时间：2012-04-13T20:35:02.600
> 
> 标签：php, mysql

我正在尝试使用以下查询更新我的表...

```
 $query = mysql_query("UPDATE `outgoings` (id, user_id, bill, bill_name, bill_description, bill_colour ) VALUES ('$id', '$uid', '$bill', '$billname', '$billdescription', '$billcolour') WHERE id = '$id'") or die(mysql_error()); 
```

它返回...

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '(id, user_id, bill, bill_name, bill_description, bill_colour ) VALUES ('', '8464' at line 1 
```

我试过在我的变量周围删除 ' 并在谷歌上搜索替代方法，但似乎无法弄清楚我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-13T20:37:59.590

`update`对语句使用此语法：

```
UPDATE `outgoings` set id = '$id', user_id = '$uid' ... where ... 
```

`insert`我猜你把它和声明混在一起了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:37:30.917

您的 ID 似乎为空 ( `...VALUES ('',...`)。那里应该有身份证吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:39:09.447

您的 $id 似乎为空或尚未定义。阅读 mysql.error() 直到最后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T20:39:56.467

更新查询具有不同的语法，例如：

```
UPDATE `outgoings` SET user_id='$uid', bill='$bill' WHERE id = '$id' 
```

# python - 仅将信息级别条目记录到单独的文件中

> ID：10147952
> 
> 赞同：2
> 
> 时间：2012-04-13T20:35:06.583
> 
> 标签：python, logging

所以我使用python内置的日志记录模块来执行日志记录。总的来说，我真的很喜欢它的工作方式，但我想知道是否有一种简单的方法可以执行以下操作：

我想在脚本执行时将数据记录到文件和控制台，最好使用 logger.info()。我还想将警告/错误记录到控制台，最好使用 logger.warning() 和 logger.error()。那部分很容易。但是，如果警告/错误也没有进入信息日志，我也想知道。

现在根据我的理解，如果我在信息级别设置了一个处理程序，它总是会在信息级别和更高级别传递任何东西。

我能想到的唯一解决方案是将我的日志记录分离到两个单独的记录器，但我想避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:44:35.920

我相信更简洁的方法是根据日志记录的级别在处理程序中以不同的方式处理日志消息。`LogRecord`对象具有`levelno`和`levelname`属性，因此您几乎拥有与 和 区分开来所需的`logging.error()`一切。`logging.warning()``logging.debug()`

更多细节：[http ://docs.python.org/library/logging.html#logrecord-objects](http://docs.python.org/library/logging.html#logrecord-objects)

# java - 选中复选框时如何突出显示整行

> ID：10147955
> 
> 赞同：1
> 
> 时间：2012-04-13T20:35:31.273
> 
> 标签：java, javascript, jquery, html, jsf-2

我有一个 JSF 数据表。当我选择相应的复选框时，我想突出显示该行。我必须如何编辑 JavaScript 代码才能达到这种效果？

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"    
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head>
        <ui:insert name="header">           
            <ui:include src="header.xhtml"/>         
        </ui:insert>
        <script type="text/javascript" src="resources/js/jquery-1.7.2.min.js"></script>
    </h:head>
    <h:body>

        <h1><img src="resources/css/images/icon.png" alt="NVIDIA.com" /> History Center</h1>
        <!-- layer for black background of the buttons -->
        <div id="toolbar" style="margin: 0 auto; width:1180px; height:30px; position:relative;  background-color:black">
            <!-- Include page Navigation -->
            <ui:insert name="Navigation">           
                <ui:include src="Navigation.xhtml"/>         
            </ui:insert>

        </div>  

        <div id="greenBand" class="ui-state-default ui-corner-allh" style="position:relative; top:35px; left:0px;"> 
            <h:graphicImage alt="Dashboard"  style="position:relative; top:-20px; left:9px;"  value="resources/images/logo_sessions.png" />
        </div>
        <div id="main" style="margin: 0 auto; width:1190px; height:700px; position:absolute;  background-color:transparent; top:105px">

            <div id="mainpage" style="margin: 0 auto; width:1190px; height:500px; position:absolute;  background-color:transparent; top:80px">

                <div id="settingsHashMap" style="width:750px; height:400px; position:absolute;  background-color:r; top:20px; left:1px">

                    <h:form id="form">

                        <!-- The sortable data table -->
                        <h:dataTable id="dataTable" value="#{SessionsController.dataList}" var="item">

                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Account Session ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Account Session ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.aSessionID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="User ID" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="User ID" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.userID}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity Start Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity Start Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityStart}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity End Time" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity End Time" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activityEnd}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">
                                    <h:commandLink value="Activity" actionListener="#{SessionsController.sort}">
                                        <f:attribute name="sortField" value="Activity" />
                                    </h:commandLink>
                                </f:facet>
                                <h:outputText value="#{item.activity}" />
                            </h:column>
                        </h:dataTable>

                        <!-- The paging buttons -->
                        <h:commandButton value="first" action="#{SessionsController.pageFirst}"
                                         disabled="#{SessionsController.firstRow == 0}" />
                        <h:commandButton value="prev" action="#{SessionsController.pagePrevious}"
                                         disabled="#{SessionsController.firstRow == 0}" />
                        <h:commandButton value="next" action="#{SessionsController.pageNext}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                        <h:commandButton value="last" action="#{SessionsController.pageLast}"
                                         disabled="#{SessionsController.firstRow + SessionsController.rowsPerPage >= SessionsController.totalRows}" />
                        <h:outputText value="Page #{SessionsController.currentPage} / #{SessionsController.totalPages}" />
                        <br />

                        <!-- The paging links -->
                        <ui:repeat value="#{SessionsController.pages}" var="page">
                            <h:commandLink value="#{page}" actionListener="#{SessionsController.page}"
                                           rendered="#{page != SessionsController.currentPage}" />
                            <h:outputText value="#{page}" escape="false"
                                          rendered="#{page == SessionsController.currentPage}" />
                        </ui:repeat>
                        <br />

                        <!-- Set rows per page -->
                        <h:outputLabel for="rowsPerPage" value="Rows per page" />
                        <h:inputText id="rowsPerPage" value="#{SessionsController.rowsPerPage}" size="3" maxlength="3" />
                        <h:commandButton value="Set" action="#{SessionsController.pageFirst}" />
                        <h:message for="rowsPerPage" errorStyle="color: red;" />

                    </h:form>                  

                </div>   

                <div id="settingsdivb" style="width:350px; height:400px; position:absolute;  background-color:transparent; top:20px; left:800px">

                </div>   
            </div>  
        </div>

        <script type="text/javascript">
              $("tr").not(':first').hover(
              function () {
                $(this).css("background","#787878");
              }, 
              function () {
                $(this).css("background","");
              }
            );
        </script>

    </h:body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-13T21:20:39.660

我真的不知道您的复选框在哪里或它们的名称是什么，但是，我确实注意到您在脚本中使用了 jQuery。我创建了一个快速的***[jsFiddle 小演示](http://jsfiddle.net/DotNetScott/xGaRv/)***来向您展示您可以使用 jQuery 做什么。在我的示例中，我创建了一个`.highlight`类，在其中将 设置为`background-color`我想要的颜色。在 jQuery 中，我对所有的复选框进行分组，并***[`.change()`](http://api.jquery.com/change/)***为它们附加一个处理程序，我在每次单击时都会打开/关闭突出显示类。

***[查看 jsFiddle 演示](http://jsfiddle.net/DotNetScott/xGaRv/)***

## HTML：

```
<div id="row-1"><input type="checkbox" id="chk-1" />Row 1</div>
<div id="row-2"><input type="checkbox" id="chk-2" />Row 2</div>
<div id="row-3"><input type="checkbox" id="chk-3" />Row 3</div>
<div id="row-4"><input type="checkbox" id="chk-4" />Row 4</div> 
```

## CSS：

```
div
{
    display: block;
    height: 20px;
    padding: 20px;
    border-bottom: dashed 1px #000;
}

input
{
    margin-right: 10px;
}

.highlight
{
    background-color: yellow;
} 
```

## jQuery：

```
$("input[type=checkbox]").on("change", function() {

    var $chk = $(this),
        num = $chk.attr("id").substring(4),
        $row = $("#row-" + num);

    $row.toggleClass("highlight");

}); 
```

## 输出：

![在此处输入图像描述](../Images/5859a257c53bf5f0fa8f5502a0fff181.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-13T21:36:38.440

Well my approach with jQuery is this :

```
 <p:column >
                <h:selectBooleanCheckbox onclick="highlight(this)" />
            </p:column> 
```

Create `.highlighted` class in your CSS file:

```
.highlighted {
    background-color: red;
} 
```

And finally actual function:

```
 function highlight(param) {  
            var row = jQuery(param).parent().parent(); //children() available as well
                row.toggleClass('highlighted');
          } 
```

You just get the `row` of the clicked `checkbox` and handle assigning of the `CSS class`. Straight and simple.

**EDIT**: Of course number of `.parent()` depends on your html elements composition. Edited the function to fit on your case, I've tried it with different composition of elements.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-13T21:02:54.210

以下是我在选中复选框时为让 Javascript 更改背景颜色所做的示例：

```
<html>
    <body>
        <table>
            <tr id="changeme1">
                <td><input type="checkbox" onclick="highlight('changeme1');" /></td>
                <td>Test Box</td>
            </tr>
            <tr id="changeme2">
                <td><input type="checkbox" onclick="highlight('changeme2');" /></td>
                <td>Test2</td>
            </tr>
        </table>
        <script>
        function highlight(id)
        {
            object = document.getElementById(id).style.backgroundColor;
            if(object == "yellow")
            {
                document.getElementById(id).style.backgroundColor = "white";
            }else{
                document.getElementById(id).style.backgroundColor = "yellow";
            }
        }
        </script>
    </body>
</html> 
```

# java - 不将 TextField 添加到 jFrame

> ID：10147956
> 
> 赞同：0
> 
> 时间：2012-04-13T20:35:37.360
> 
> 标签：java, swing

我的文本字段没有被添加到我的 Jframe 中，我希望这个文本字段可用，以便我可以使用它来更改我在油漆中绘制的矩形的高度。在 actionperformred 中，我试图从该字段中获取值，并希望它会用正确的值重新绘制图像

```
import java.awt.*;
import java.awt.event.*;
import java.awt.image.*;
import java.io.*;
import javax.imageio.*;
import javax.swing.*;
import java.net.*;
import java.sql.*;
import java.lang.Object;
import java.awt.Graphics;
import java.awt.Graphics2D;

public class Test extends JPanel implements ActionListener{

    JTextField textField;
    JFrame f=new JFrame();
    int x=77, y=441, w=23, h=10, entry;
    BufferedImage img=null;

    public void init(){
        JTextField textField=new JTextField(); 
        f.add(textField);
        textField.setBounds(10,10,40,30);
        textField.setVisible(true);
        textField.addActionListener(this);
    }

   // BufferedImage img;

   public static void main(String[] args) {
        BufferedImage img =new BufferedImage(100, 50,BufferedImage.TYPE_INT_ARGB); 
        //textField = new JTextField();
        JFrame f = new JFrame("Load Image Sample");

       /*textField=new JTextField();
        textField.addActionListener(this);
        f.add(textField);
        textField.setBounds(10,10,40,30);
        textField.setVisible(true);*/

        f.addWindowListener(new WindowAdapter(){
                public void windowClosing(WindowEvent e) {
                    System.exit(0);
                }
            });

        f.add(new Test());
        f.pack();
        f.setVisible(true);
    }

    public void paintComponent(Graphics g) {
        g.drawImage(img, 0, 0, null);

        Graphics2D i = img.createGraphics();
       Color myColor = Color.decode("#32004b");
       i.setColor(myColor);
       i.fillRect(x,y,w,h);

           // g.fillRect(10,10,10,10);
    }

    public Test() {

       try {
           img = ImageIO.read(new File("sales-goal.png"));
       } catch (IOException e) {}

                //77,441,23,10
    }

    public Dimension getPreferredSize() {
        if (img == null) {
             return new Dimension(100,100);
        } else {
           //return new Dimension(img.getWidth(null), img.getHeight(null));
            return new Dimension(300,600);
       }
    }

    public void actionPerformed(ActionEvent e) {

        Graphics g= getGraphics();

               if (e.getSource() == textField) {
                   entry= Integer.parseInt(textField.getText());
                   g.drawString("Test",50,50);

                   entry=h;

                }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T21:51:49.227

调用你的 init 方法，你会没事的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:46:38.653

我想这是因为你从不调用方法 init

# c# - IEnumerable.except 错误

> ID：10147958
> 
> 赞同：1
> 
> 时间：2012-04-13T20:35:53.893
> 
> 标签：c#, asp.net

我有两个`IEnumerable<dynamic>`从数据库表中检索到的数据，称为`FullSet`和`InScopeSubSet` 。

第二个`IEnumerable<dynamic>`是第一个集合的子集（两个集合都具有`ChildID`其唯一 ID）

我想创建一个`IEnumerable<dynamic>`仅包含 x 中未出现在 y 中的项目的新项目

我已经尝试了以下，但它不会编译。它说： *“扩展方法不能动态调度。考虑强制转换动态参数或调用扩展方法而不使用扩展方法语法”*

```
 var sql = "SELECT ChildID, FirstName, Surname FROM Child ORDER BY ChildID ASC";
 var FullSet =  DB.Query(sql);

 sql = "
 SELECT UserScope.ChildID, Child.FirstName, Child.Surname 
 FROM UserScope 
 INNER JOIN Child ON UserScope.ChildID=Child.ChildID 
 WHERE UserAccountID = @0 ORDER BY ChildID ASC
    ";
 var InScopeSubSet = DB.Query(sql, UserAccount.UserAccountID);

 var OutScopeSubSet  = FullSet .Except(InScopeSubSet ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:41:07.577

要解决编译器错误，请使用它的第二个建议：

```
var OutScopeSubSet = Enumerable.Except(FullSet, InScopeSubSet); 
```

> Enumerable 运行正常，但返回整个第一组而不取出任何项目。

如果是这种情况，您可能会得到不同对象的参考比较。您可以通过实现自定义 IEqualityComparer 来做到这一点。通话变成

```
var OutScopeSubSet = Enumerable.Except(FullSet, InScopeSubSet, new DynamicChildIdComparer()); 
```

DynamicChildIdComparer 是：

```
class DynamicChildIdComparer : IEqualityComparer<object>
{
    public bool Equals(object x, object y)
    {
        return ((dynamic)x).ChildID.Equals(((dynamic)y).ChildID);
    }

    public int GetHashCode(object obj)
    {
        return ((dynamic)obj).ChildID.GetHashCode();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T21:05:08.347

您是否正在寻找“不在”SQL 类型的操作

LINQ 中的“不在”可以这样实现：

```
var filterData = new List { "ListA", "ListB" };
var data= context.table.Select( c => c.id ).Except( filterData ); 
```

# c# - C# Vector2 如何将对象移向某个角度

> ID：10147960
> 
> 赞同：0
> 
> 时间：2012-04-13T20:35:56.607
> 
> 标签：c#, xna-4.0

我想将一个物体移动到给定的角度，但它只能上下移动，只有 Y 轴。
`Vector2 unitV = new Vector2((float)Math.Sin(player.angle), (float)Math.Cos(player.angle));
unitV.Normalize();
player.model.Position += Vector2.Multiply(unitV,player.model.Speed) * (float)gameTime.ElapsedGameTime.TotalSeconds;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:40:15.050

我只是在练习时遇到了这个问题，但这是我找到的解决方案。我希望这对你有用。使用 XNA 4 C 锐利。

宣言：

```
Texture2D sprite;
Vector2 spritePosition = Vector2.Zero;
Vector2 spriteOriginalPos;
float spriterotation = 0;
float anglecorrection = (Math.PI * 90 / 180.0);
float speed = 1; 
```

请注意，需要进行角度校正才能将对象移向其“向上”角度。

加载：

```
//Load basic texture to make it recognizable :)
sprite= Content.Load<Texture2D>("spritetexture");
//Default position in middle
spritePosition = new Vector2(
                    (graphics.GraphicsDevice.Viewport.Width / 2) - (sprite.Width / 2),
                    (graphics.GraphicsDevice.Viewport.Height / 2) - (sprite.Height / 2));
//Sprite centering
spriteOriginalPos.X = sprite.Width / 2;
spriteOriginalPos.Y = sprite.Height / 2; 
```

更新：

```
if (Keyboard.GetState(PlayerIndex.One).IsKeyDown(Keys.Up))
{
    spritePosition.X += speed * (float)Math.Cos(spriterotation - anglecorrection);
    spritePosition.Y += speed * (float)Math.Sin(spriterotation - anglecorrection);
} 
```

画：

```
spriteBatch.Draw(sprite, spritePosition, null, Color.Black, spriterotation, spriteOriginalPos, 1.0f, SpriteEffects.None, 0f); 
```

# php - 在我的mysql数据库中连接到localhost中的网页 - php

> ID：10147964
> 
> 赞同：0
> 
> 时间：2012-04-13T20:36:16.327
> 
> 标签：php, mysql, hyperlink, localhost, webpage

我遇到的问题是我想在他们的数据库表中为用户放置一个特定的网页链接，但是该网页在我的本地主机上。

我还没有找到一种在网页上显示连接到特定本地主机网页的链接的方法。

我已经能够显示其他网站的链接（例如 google 并连接到它们），但我无法使用我的本地主机上的页面来做到这一点。

问题没有通过，所以我包含了一些虚拟代码。

```
 $res=mysql_query("SELECT * FROM facultytable order by id");
        echo "<select facultyname=myselect>";
        while($row=mysql_fetch_assoc($res)) {
        echo "<option value=$row[id]>$row[facultyname]</a></option>";
        }
        echo "</select>";
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T17:07:29.237

我在网上找到了解决问题的方法

[将超链接添加到 mysql 结果](http://www.daniweb.com/web-development/php/threads/189068/add-hyperlink-to-mysql-results-in-php)

# javascript - 将 jQuery UI Sortable 的顺序保存到 Backbone.js 集合

> ID：10147969
> 
> 赞同：46
> 
> 时间：2012-04-13T20:36:48.453
> 
> 标签：javascript, jquery-ui, backbone.js, backbone.js-collections

我有一个 Backbone.js 集合，我希望能够使用 jQuery UI 的 Sortable 对其进行排序。没什么特别的，我只是有一个我希望能够排序的列表。

问题是我不确定如何在排序后获取项目的当前顺序并将其传达给集合。Sortable 可以自行序列化，但这不会给我需要提供给集合的模型数据。

理想情况下，我希望能够仅获取集合中模型的当前顺序的数组并使用集合的重置方法，但我不确定如何获取当前顺序。请分享任何想法或示例以获取具有当前模型顺序的数组。

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-04-13T23:50:13.180

我已经通过使用 jQuery UI Sortable 在删除项目时触发项目视图上的事件来完成此操作。然后我可以在项目视图上触发另一个事件，该事件包括模型作为集合视图绑定到的数据。然后集合视图可以负责更新排序顺序。

# 工作示例

[http://jsfiddle.net/7X4PX/260/](http://jsfiddle.net/7X4PX/260/)

# jQuery UI 可排序

```
$(document).ready(function() {
    $('#collection-view').sortable({
        // consider using update instead of stop
        stop: function(event, ui) {
            ui.item.trigger('drop', ui.item.index());
        }
    });
}); 
```

[停止](http://api.jqueryui.com/sortable/#event-stop)事件绑定到一个函数，该函数在项目的 DOM 节点上触发`drop`，项目的索引（由 jQuery UI 提供）作为数据。

# 项目视图

```
Application.View.Item = Backbone.View.extend({
    tagName: 'li',
    className: 'item-view',
    events: {
        'drop' : 'drop'
    },
    drop: function(event, index) {
        this.$el.trigger('update-sort', [this.model, index]);
    },        
    render: function() {
        $(this.el).html(this.model.get('name') + ' (' + this.model.get('id') + ')');
        return this;
    }
}); 
```

drop 事件绑定到在项目视图的 DOM 节点上使用 data`drop`触发事件的函数。这意味着我们将当前模型及其索引（从 jQuery UI 排序）传递给绑定到事件的任何人。`update-sort``[this.model, index]``update-sort`

# 项目（集合）视图

```
Application.View.Items = Backbone.View.extend({
    events: {
        'update-sort': 'updateSort'
    },
    render: function() {
        this.$el.children().remove();
        this.collection.each(this.appendModelView, this);
        return this;
    },    
    appendModelView: function(model) {
        var el = new Application.View.Item({model: model}).render().el;
        this.$el.append(el);
    },
    updateSort: function(event, model, position) {            
        this.collection.remove(model);

        this.collection.each(function (model, index) {
            var ordinal = index;
            if (index >= position) {
                ordinal += 1;
            }
            model.set('ordinal', ordinal);
        });            

        model.set('ordinal', position);
        this.collection.add(model, {at: position});

        // to update ordinals on server:
        var ids = this.collection.pluck('id');
        $('#post-data').html('post ids to server: ' + ids.join(', '));

        this.render();
    }
}); 
```

`Items`视图绑定到`update-sort`事件，函数使用事件传递的数据（模型和索引）。从集合中删除模型，`ordinal`更新每个剩余项目的属性，并将按 id 的项目顺序发送到服务器以存储状态。

# 收藏

```
Application.Collection.Items = Backbone.Collection.extend({
    model: Application.Model.Item,
    comparator: function(model) {
        return model.get('ordinal');
    },
}); 
```

该集合具有定义的[比较器](http://backbonejs.org/#Collection-comparator)函数，该函数按 . 对集合进行排序`ordinal`。这使项目的呈现顺序保持同步，因为集合的“默认顺序”现在由`ordinal`属性的值决定。

请注意，有一些重复的工作：如果集合具有像 jsfiddle 那样的比较器功能，则不需要删除模型并将其添加回集合中。此外，视图可能不需要重新渲染自身。

**注意**：与其他答案相比，我的感觉是通知项目的模型实例需要更新它而不是直接收集更正确。两种方法都有效。这里的另一个答案直接指向集合，而不是采用模型优先的方法。选择对您更有意义的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-19T12:37:55.537

[http://jsfiddle.net/aJjW6/2/](http://jsfiddle.net/aJjW6/2/)

### HTML：

```
`<div class="test-class">
     <h1>Backbone and jQuery sortable - test</h1>
     <div id="items-collection-warper"></div>
</div>` 
```

### JavaScript：

```
$(document).ready(function(){

var collection = [
    {name: "Item ", order: 0},
    {name: "Item 1", order: 1},
    {name: "Item 2", order: 2},
    {name: "Item 3", order: 3},
    {name: "Item 4", order: 4}
];
var app = {};

app.Item = Backbone.Model.extend({});
app.Items = Backbone.Collection.extend({
    model: app.Item,
    comparator: 'order',

});

app.ItemView = Backbone.View.extend({
    tagName: 'li',
    template: _.template('<span><%= name %> - <b><%= order %></b></span>'),
    initialize: function(){

    },
    render: function(){
        var oneItem = this.$el.html(this.template(this.model.attributes));
        return this;
    }
});

app.AppView = Backbone.View.extend({
    el: "#items-collection-warper",
    tagName: 'ul',
    viewItems: [],
    events:{
        'listupdate': 'listUpdate'
    },
    initialize: function(){
        var that = this;

        this.$el.sortable({
             placeholder: "sortable-placeholder",
            update: function(ev, ui){
               that.listUpdate();
            }
        });            
    },
    render: function(){
        var that= this;
        this.collection.each(function(item){
            that.viewItems.push(that.addOneItem(item));
            return this;
        });

    },
    addOneItem: function(item){
        var itemView = new app.ItemView({model: item});
        this.$el.append(itemView.render().el);

        return itemView;
    },

    listUpdate: function(){

        _.each(this.viewItems, function(item){
            item.model.set('order', item.$el.index());
        });
        this.collection.sort({silent: true})
         _.invoke(this.viewItems, 'remove');
        this.render();
    }
});

var Items = new app.Items(collection)
var appView = new app.AppView({collection: Items});
appView.render();
}); 
```

### CSS：

```
.test-class{
    font-family: Arial;
}
.test-class li{
    list-style:none;
    height:20px;

}
.test-class h1{
    font-size: 12px;
}
.ui-sortable-helper{
    opacity:0.4;
}
.sortable-placeholder{
    background: #ddd;
    border:1px dotted #ccc;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-10T19:33:35.237

只需使用[Backbone.CollectionView](http://rotundasoftware.github.io/backbone.collectionView/)！

```
var collectionView = new Backbone.CollectionView( {
  sortable : true,
  collection : new Backbone.Collection
} ); 
```

瞧！

# jquery - JQuery - 从选定的表行中获取值

> ID：10147971
> 
> 赞同：1
> 
> 时间：2012-04-13T20:37:06.067
> 
> 标签：jquery, jquery-ui

我有一个包含多个元素的表格。第一个元素是一个复选框，它将触发 Javascript 中的事件。我需要做的是： 1\. 检查复选框值是否为真 2\. 如果为真，则从表元素中获取值 a。一些列值是文本 b。某些列包含文本框（

```
 <table class="rowClick" id="page" width="100%">                 
<thead>
    <tr id="p_1">                         
        <th colspan=9 align=center >Select/Change and Update Selections</th>
    </tr>
    <tr id="p_2">
        <th>Select</th>
        <th class="table-sortable:default">Class</th>                    
        <th class="table-sortable:default">Desc</th>
        <th class="table-sortable:default">Weight</th>                         
        <th class="table-sortable:currency">Pott Dia</th>                         
        <th class="table-sortable:currency">Pott Ht</th>                         
        <th class="table-sortable:currency">Pott Stack Ht</th>                         
        <th class="table-sortable:currency">Tower Width</th>
        </tr>
        </thead>                 
        <tbody>
        <tr id="p_3">                             
        <td align=center>
        <input class = "prodSel" type="checkbox" id="chk[]"></td>                             
        <td align=center>00100</td>                             
        <td align=center>C100</td>                             
        <td align=center>XL</td>                             
        <td align=center><input size=5 type="text" value=4.75></td>                             
        <td align=center><input size=5 type="text" value=4.68></td>                             
        <td align=center><input size=5 type="text" value=0.33></td>                             
        <td align=center><input size=5 type="text" value=40.40></td>                             
        </tr>
        <tr id="p_4">                             
        <td align=center><input class = "prodSel" type="checkbox" id="chk[]"></td>                             
        <td align=center>00140</td>                             
        <td align=center>C200S</td>                             
        <td align=center>CL</td>                             
        <td align=center><input size=5 type="text" value=6.00></td>                             
        <td align=center><input size=5 type="text" value=5.43></td>                             
        <td align=center><input size=5 type="text" value=0.43></td>                             
        <td align=center><input size=5 type="text" value=42.00></td>                             
        </tr>
        <tr id="p_5">                             
        <td align=center><input class = "prodSel" type="checkbox" id="chk[]"></td>                             
        <td align=center>00140</td>                             
        <td align=center>C200S</td>                             
        <td align=center>CU</td>                             
        <td align=center><input size=5 type="text" value=6.00></td>                             
        <td align=center><input size=5 type="text" value=5.43></td>                             
        <td align=center><input size=5 type="text" value=0.43></td>                             
        <td align=center><input size=5 type="text" value=42.00></td>
        </tr>
    </tbody>
  </table> 
```

目前，我有以下内容：

```
 rowSelect: function(event) {
      var work = [];
      //        var rowIndex =   $(this).parent().parent().children().index($(this).parent());
      var chkbox = $(this).closest('tr').find('td:eq(0)').child(0);
      if(null != chkbox && true == chkbox.checked){
        for(var i=0;i<17;i++){
            if(i<3){
                var s = $(this).closest('tr').find('td:eq(i)').text();
            }
            else{
                var s = $(this).closest('tr').find('td:eq(i)').val();
            }
            work[i]=s;
        }
      }
    } 
```

问题出在我试图获取复选框的值的一开始（选中与否）。我想我可以抓住对象然后检查 val()，或者只是从孩子那里得到 val()，但还没有任何工作。我需要的是一种获取复选框值并从文本输入框中获取值的方法。

我在这里有一个解决方案：http: [//jsfiddle.net/radi8/tCh3P/19/](http://jsfiddle.net/radi8/tCh3P/19/)

**----> 解决方案 <----**

好的，这是我使用下面提供的功能和其他一些简洁属性的最终解决方案，供任何想看看的人使用。我将其更改为填充 JSON 而不是使用数组，但整体功能是有效的。

```
 var proddta =
  {
   init: function(){
    // hook into the get delete/update buttons
    var del = $("#delete");
    for (var i = 0, ii = del.length; i < ii; i++){
        $(del).bind("click", proddta.deleteListener2);
    }
    var upd = $("#update");
    for (var i = 0, ii = upd.length; i < ii; i++){
        $(upd).bind("click", proddta.updateListener);
    }
},

updateListener: function(event){
    myJSON = new Object();
    $('.prodSel:checked').each(function() {
        proddta.getArrays(this, myJSON);
        var dataString = JSON.stringify(myJSON);
        alert('dastring: '+dataString);
        /*
            var url = 'http://'+window.location.hostname+'/truck/webServices/products.svc.php?update=1';
            $.post(url, {data: dataString}, function(res){
                proddta.showResult(res);
        });
        */
    });

},

deleteListener2: function(event){
    myJSON = new Object();
    $('.prodSel:checked').each(function(){
        proddta.getArrays(this, myJSON);
        var dataString = JSON.stringify(myJSON);
        /*
           var url = 'http://'+window.location.hostname+'/truck/webServices/products.svc.php?update=0';
        $.post(url, {data: dataString}, function(res){
            var obj = $.evalJSON(res);
            if(obj.somebool === true)
            $("#result").html(obj.hello + ' ' + obj.array[1] + obj.worked + ". Message from PHP: "+obj.php_message);
        });
        */
        alert('dastring: '+dataString);
    });
},

getArrays: function(evt, myjson){
    var val = proddta.getColumnCount(this);
    $closestTr = $(evt).closest('tr');
    var chkbox = $closestTr.find('td:eq(0)').find(':checkbox');
    if (null !== chkbox && true === chkbox.is(':checked')) {
        var s = '';
        var id = '';
        for (var i = 1; i < val; i++) {
            if (i >= 1 && i < 4) {
                s = $closestTr.find('td:eq(' + i + ')').text();
                id = $closestTr.find('td:eq(' + i + ')').attr('id');
            } else {
                s = $closestTr.find('td:eq(' + i + ')').find(':input').val();
                id = $closestTr.find('td:eq(' + i + ')').find(':input').attr('id');
            }
            myjson[id] = s;
        }
    }
    else {
    // handle this exception...
    }
},

getColumnCount: function(evt){
    var colCount = 0;
    $('tr:nth-child(1) td').each(function () {
        if ($(this).attr('colspan')) {
            colCount += +$(this).attr('colspan');
        } else {
            colCount++;
        }
    });
    alert(colCount);
    return colCount;
 },
 }
 proddta.init(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T20:44:41.643

要找到复选框：

```
var checkbox = $(this).closest().find('input:checkbox:first');
if (checkbox.is(':checked')){
    // checkbox is checked
} 
```

参考：

*   [`:checkbox`选择器](http://api.jquery.com/checkbox-selector/)。
*   [`:checked`选择器](http://api.jquery.com/checked-selector/)。
*   [`find()`](http://api.jquery.com/find/).
*   [`:first`选择器](http://api.jquery.com/first-selector/)
*   [`.is()`](http://api.jquery.com/is/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:08:22.617

您的代码需要进行大量修复，最终成功了。见下文，

[**演示**](http://jsfiddle.net/skram/tCh3P/5/)

```
rowSelect: function(event) {
    alert('hello 1');
    var work = [];
    var $closestTr = $(this).closest('tr');
    var chkbox = $closestTr.find('td:eq(0)').find(':checkbox');

    alert('hello 2 ' + chkbox.is(':checked'));
    if (null !== chkbox && true === chkbox.is(':checked')) {
        alert('hello 3');
        var s = '';
        for (var i = 0; i < 17; i++) {
            if (i != 0 && i < 4) {
                s = $closestTr.find('td:eq(' + i + ')').text();
            } else {
                s = $closestTr.find('td:eq(' + i + ')').find(':input').val();
            }
            work.push(s);
        }
    }
    else {
        alert('hello 99');
    }
    alert('hello 4 ' + work.join(' '));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T20:43:07.937

`chkbox`将您的变量声明更改为：

```
var chkbox = $(this).parents('tr').find('input[type=checkbox]').get(0); 
```

# jquery - 提交时刷新 Ajax/JQuery 表单

> ID：10147973
> 
> 赞同：0
> 
> 时间：2012-04-13T20:37:09.500
> 
> 标签：jquery, ajax, forms, refresh

我有一个页面，其中包含三个简单的 html 表单，它们提交到数据库中的各种表（使用 AJAX 和 JQuery）。提交表单后，它当前会消失，并且会发布一条消息：

```
<div class="success_m" style="display:none;">
   <p>Manufacturer has been added!</p>
   <h4><a href="path/to/the/forms/page">Add another Manufacturer!</a></h4>
</div> 
```

要将另一个制造商发布到数据库，我单击“添加另一个制造商！” 链接并刷新整个页面。我试图设置它，以便在提交表单时消失，显示成功消息一秒钟，然后清除的表单返回......它可以工作，除了现在表单根本没有消失，并且消息只是在它下面闪烁。

我的尝试如下，谢谢你的建议！！

麦克风

```
$(document).ready(function(){
    $("form#submit_m").submit(function() {
    // we want to store the values from the form input box, then send via ajax below
    var manu_name       = $('#manu_name').attr('value');
    var manu_web        = $('#manu_web').attr('value');
    var manu_email      = $('#manu_email').attr('value');
    var manu_phone      = $('#manu_phone').attr('value'); 
    var manu_phone_ext  = $('#manu_phone_ext').attr('value');
    var manu_info       = $('#manu_info').attr('value'); 

        $.ajax({
            type: "POST",
            url: "process_m.php",
            data:"manu_name="+ manu_name+"&manu_web="+manu_web+"&manu_email="+manu_email+"&manu_phone="+ manu_phone
            +"&manu_phone_ext="+manu_phone_ext+"&manu_info="+manu_info,
            success: function(){
                // reset form, success message, refresh form 
                resetForm($('#submit_m'));
                $('form#submit_m').hide();
                $('div.success_m').fadeIn(250).delay(1000).fadeOut(250);
                $('form#submit_m').show();
            }
        });
    return false;
    });
}); 
```

成功队列中的 resetform 函数来自[THIS](https://stackoverflow.com/questions/680241/resetting-a-multi-stage-form-with-jquery) SO post。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:38:34.067

您在调用时缺少左括号和右括号`show()` `function`

```
...
$('div.success_m').fadeIn(250).delay(1000).fadeOut(250);
$('form#submit_m').show(); // add parenthesis here
... 
```

要使表单隐藏并重新出现，您需要像成功 div 一样将其淡出或使用`setTimeout()`. 您现在处理它的方式只是隐藏然后显示，中间没有中断。所以它看起来是瞬间的......

例子：

```
setTimeout(function() { $('form#submit_m').show(); }, 1000); 
```

[这是一个 jsFiddle 示例](http://jsfiddle.net/PzSQj/)

# matlab - MATLAB: how to darken an image? (use to make toggle button image look toggled)

> ID：10147976
> 
> 赞同：1
> 
> 时间：2012-04-13T20:37:12.783
> 
> 标签：matlab, matlab-guide

I have a toggle buttons with custom images on them. I want them to look 'pressed' when the button is toggled.

I've tried to use brighter(fig, s)

but that doesn't darken the white areas of the icon.

I've also tried to do cdata = cdata+50; and then setting it back but that obviously complaines about values being too large for image. I could work around that I suppose but it there a know function that would just darken the image for me?

thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T20:24:13.297

[伽玛校正](http://en.wikipedia.org/wiki/Gamma_correction)可能适合这里。

# django - Django / User access in ManyToMany field

> ID：10147979
> 
> 赞同：5
> 
> 时间：2012-04-13T20:37:26.017
> 
> 标签：django, many-to-many

I am making a django app using the `User` class from `django.contrib.auth.models`.

I have defined a model, called a *group* with a M2M relationship to users. I have difficulty retrieving the groups a given user belongs to.

Here's the *group* definition:

```
class group(models.Model):
    user = models.ForeignKey(User,related_name = 'owner') # the owner
    name = models.CharField(max_length=100) # name of the group 

    # members of the group
    members = models.ManyToManyField(User,related_name = 'member')

    def __unicode__(self):
        return str(self.name) 
```

I would like to retrieve the groups for which the user belongs to the *members* field of the groups.

Here is the command that fails, trying to retrieve the groups that a particular user belongs to - I am not sure why - could you let me know ? (`user` is a `User` instance)

```
user_groups = user.group_set.all() 
```

The error I get is:

```
 'User' object has no attribute 'group_set' 
```

What's wrong here?

**SOLUTION**

I eventually found the solution. I had to make the query with the `related_name`, so here it is:

```
groups_member = user.member.all() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-13T21:09:25.707

因为多对多关系是通过`members`属性，而这个属性有`related_name`属性，所以正确的语法是：

```
user_groups = user.member.all() 
```

（如果没有相关的名称属性，它将是`user_groups = user.members_set.all()`）

而相反的关系是：

```
group_users = group.members.all() 
```

# jpanel - How do i switch a jpanel when a variable becomes true?

> ID：10147983
> 
> 赞同：0
> 
> 时间：2012-04-13T20:37:42.537
> 
> 标签：jpanel

I am making a rpg style game when the character can walk around using the arrowkeys. When the character walks to a door the variable inside would change to true or false. In my main class i put a logic statement

```
if (inside == true) {
add (new inside());
} else if (inside == false) {
add(new outside()); 
```

this didn't work. I have done a lot of research and found cardlayout everywhere but as far as i know cardlayout can't draw graphics. In addition to second and inside there is also an outside class but it is the same as inside except for graphics and the door's location.

this is my inside class

```
public class inside extends JPanel implements ActionListener, KeyListener{

import java.awt.Color;
import java.awt.Component;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.awt.geom.Rectangle2D;
import javax.swing.JComponent;
import javax.swing.JPanel;
import javax.swing.Timer;

public class inside extends JPanel implements ActionListener, KeyListener{

Timer timer = new Timer(5, this);

int x = 10;
int y = 10; 

public inside() {

timer.start();
addKeyListener(this);
setFocusable(true);
setFocusTraversalKeysEnabled(false);
}

public void paint(Graphics g) {

super.paint(g);
Graphics2D g2 = (Graphics2D) g;
g2.setColor(Color.red);
g2.fill(new Rectangle2D.Double(x, y, 30, 30)); //player
g2.setColor(Color.blue);
g2.fill(new Rectangle2D.Double(135, 85, 30, 30)); //old man
g2.setColor(Color.darkGray);
g2.fill(new Rectangle2D.Double(290, 0, 10, 300)); //wall
g2.fill(new Rectangle2D.Double(0, 0, 300, 10)); //wall
g2.fill(new Rectangle2D.Double(0, 0, 10, 300)); //wall
g2.fill(new Rectangle2D.Double(0, 290, 300, 10)); //wall
g2.setColor(Color.white);
g2.fill(new Rectangle2D.Double(290, 135, 10, 30)); //door
g2.setColor(Color.black);
g2.drawString(second.inside + "", 15, 15);
}

public void actionPerformed(ActionEvent e) {

repaint();
}

public void keyPressed(KeyEvent e) {

int code = e.getKeyCode();

if (code == KeyEvent.VK_UP) {
if (y <= 10) {
y = 10;
} else {
y -= 5;
}
} else if (code == KeyEvent.VK_DOWN) {
if (y >= 260) {
y = 260;
} else {
y += 5;
}
} else if (code == KeyEvent.VK_LEFT) {
if (x <= 10) {
x = 10;
} else {
x -= 5;
}
} else if (code == KeyEvent.VK_RIGHT) {
if (x >=260) {
x = 260;
if (second.inside == true && x == 260 && y == 135) {
second.inside = false;
}
} else {
x += 5;
}
}
}

public void keyReleased(KeyEvent e) {
}

public void keyTyped(KeyEvent e) {
}
} 
```

and this is the class that is supposed to switch between panels

```
import javax.swing.JFrame;

public class second extends JFrame {

public static boolean inside = true;

public second() {

if (inside == true) {
add(new inside());
} else if (inside == false) {
add(new outside());
}
setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
setSize(316, 338);
setLocationRelativeTo(null);
setTitle("Test Game 3");
setVisible(true);
}

public static void main(String[] args) {
new second();
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T21:28:22.527

我看到的第一个问题是您没有先删除现有面板。第二个问题是交换面板的逻辑在 JFrame 的构造函数中。理想情况下，在 JFrame 中你会有这样的循环

```
while(true) 
{
    updateGameLogic();
    repaint();
    try{
      System.sleep(30);
    } catch(Exception e) {}
} 
```

updateGameLogic() 可以做很多事情，其中​​之一是检查布尔值以确定是否交换 JPanel。Thread.sleep() 方法是必要的，因此 UI 不会阻塞其他线程（输入）。我会在 Second 类中放置一个名为 mainLoop() 的方法，并在创建对象后调用该方法。

# sql - SSIS 2005 - Have UPDATE *and* SELECT in OLE DB Source in Data Flow

> ID：10147989
> 
> 赞同：1
> 
> 时间：2012-04-13T20:38:07.233
> 
> 标签：sql, ssis, dataflowtask

This might be a dumb question, but I have a data flow task, OLE DB Source and Flat File Destination.

In my OLE DB Source I'd like to have an UPDATE statement, and then a SELECT. When I do that, I don't seem to get any rows written to my Flat File. I'm doing this, by the way, to help ensure that my update does not happen if my select fails. (I was going to put the two statements between a BEGIN TRAN and COMMIT.)

Unfortunately I can't use SSIS transactions because the server the SSIS is running on doesn't have the DTC service running.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T17:34:32.720

你必须更新你的控制流。

使用更新命令添加执行 SQL 任务，将绿色箭头从任务拖到数据流组件，在数据流中，您将拥有 oleDBSource 和平面文件目标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T22:11:16.580

假设您想要的顺序是 SELECT -> UPDATE -> WRITE_TO_FLAT_FILE，请使用您的 OLE DB 源进行选择，然后使用 OLE DB 命令进行更新。最后，使用您的平面文件目标将数据写出。

在 OLE DB 源中，将错误输出设置为“失败组件”或“重定向行”；任何一个都可以让您避免后续的更新命令。

# c - How to create directory with right permissions using C on Posix

> ID：10147990
> 
> 赞同：8
> 
> 时间：2012-04-13T20:38:11.867
> 
> 标签：c, posix, mkdir, umask

I am trying to write a simple C program that creates directories (a mkdir clone.). This is what I have so far:

```
#include <stdlib.h>
#include <sys/stat.h> // mkdir
#include <stdio.h> // perror

mode_t getumask()
{
    mode_t mask = umask(0);
    umask (mask);
    return mask;
}

int main(int argc, const char *argv[])
{
    mode_t mask = getumask();
    printf("%i",mask);

    if (mkdir("trial",mask) == -1) {
        perror(argv[0]);
        exit(EXIT_FAILURE);
    }
    return 0;
} 
```

This code creates directory with `d---------` but I want it to create it with `drwxr-xr-x` like mkdir do? What am I doing wrong here?

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-13T21:01:24.947

You seem to be misunderstanding what `umask` is used for. It sets/retrieves the process's file mode creation mask, which in turn is used to *turn off* bits in the file mode you specify in calls like `mkdir`, like this (pseduo-code):

```
real_mode = requested_mode & ~umask 
```

So in your code, since you pass in the value of the umask itself, you end up specifying permissions as zero, which is exactly what you see.

Instead, you should specify the permissions you want in the call to `mkdir`, like this:

```
mkdir("trial", 0755) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-13T21:08:09.903

As Eric says, umask is the complement of the actual permission mode you get. So instead of passing mask itself to `mkdir()`, you should pass `0777-mask` to `mkdir()`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-19T11:21:23.393

[**Disclaimer**: I extracted this answer from the OPs question. [Answers should not be contained in the question itself](https://meta.stackexchange.com/a/309555/316262).]

* * *

### Answer provided by [yasar](https://stackoverflow.com/users/886669/yasar):

This is the working solution for me:

```
int main(int argc, const char *argv[])
{
    if (mkdir("trial",0777) == -1) {
        perror(argv[0]);
        exit(EXIT_FAILURE);
    }
    return 0;
} 
```

Setting right permissions according to umask is automatically handled. So I only needed to call mkdir with full permissions, and that gets chopped according to current umask.

# ios - why doesn't https://graph.facebook.com/me/friends/myApp:myAction work?

> ID：10147991
> 
> 赞同：0
> 
> 时间：2012-04-13T20:38:12.723
> 
> 标签：ios, facebook, facebook-graph-api, batch-file, facebook-fql

I created an action that also publishes an object. I enabled publish_actions permissions. I can get my list of actions via: [https://graph.facebook.com/me/myApp:myAction](https://graph.facebook.com/me/myApp:myAction)

but i can't get: [https://graph.facebook.com/me/friends/myApp:myAction](https://graph.facebook.com/me/friends/myApp:myAction)

Or do i need to just directly get a list of objects and somehow filter myself out? I actually can't figure out how to get the object list without calling it through the associated action. Is that just how it is?

WORKAROUND: First, I fql.query "select uid, name, is_app_user from user where uid in (select uid2 from friend where uid1=me()) and is_app_user=1" and get back friends who have the app installed...

Second, I get back that query and use it to batch the following:

```
for (NSDictionary *d in friendsWithApp) {
NSString *jsonRequest = [NSString stringWithFormat:@"{ \"method\": \"GET\", \"relative_url\": \"%@/myApp:myAction/myObject\" }", [d objectForKey:@"uid"]];
    jsonRequestsArray = [jsonRequestsArray stringByAppendingString:jsonRequest];

    setCount++;
    if (setCount!=[presets count]) {
        jsonRequestsArray = [jsonRequestsArray stringByAppendingString:@", "];
    }
}
jsonRequestsArray = [jsonRequestsArray stringByAppendingString:@" ]"];
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObject:jsonRequestsArray forKey:@"batch"];
[facebook requestWithGraphPath:@"me" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

Ugh. I also got a usable list with this fql.query:

"SELECT post_id, actor_id, attribution FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid=me() AND type='newsfeed') AND app_id = MY_APP_ID"

But it doesn't return many items since it competes with the last 50 news items. Maybe it will be the way to go if the app is used enough, but it seems like use would drop off and then you couldn't get at the older posts easily.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T21:26:58.177

在[权限](http://developers.facebook.com/docs/authentication/permissions/)的文档中，您可以清楚地看到两个额外的权限，除了您已经拥有的“publish_actions”：

> user_actions:APP_NAMESPACE

和

> Friends_actions:APP_NAMESPACE

它指出：

> 允许您检索由应用程序命名空间指定的另一个应用程序发布的操作。例如，要请求检索由具有命名空间 awesomeapp 的应用程序发布的操作的能力，请提示用户输入 users_actions:awesomeapp 和/或 friends_actions:awesomeapp 权限。

# java - 如何使用 GlassFish 自动部署战争文件——来自 David Geary、Cay S. Horstmann 的“Core JavaServerFaces”

> ID：10147995
> 
> 赞同：4
> 
> 时间：2012-04-13T20:38:39.933
> 
> 标签：java, jsf, glassfish, autodeploy

*幼稚的问题，但这是我在 JSF 中的第一步，所以请原谅我 ;-)*

我正在遵循 David Geary、Cay S. Horstmann（第 3 版）的“Core JavaServerFaces”中第一个示例的所有步骤。

一般有效的方法：

*   java作品
*   玻璃鱼作品
*   我可以编译附加的代码
*   我可以创建 .war 文件

当我将 war 文件复制到 GlassFish 的 autodeploy 子目录并尝试在 GF 中显示适当的页面时，问题就开始了。作为回报，我得到 404 错误，在日志中我发现：

> 选择文件 /opt/glassfish3/glassfish/domains/domain1/autodeploy/login.war 进行自动部署。
> 
> 模块 /opt/glassfish3/glassfish/domains/domain1/applications/login 无法识别模块类型
> 
> 没有安装的容器能够处理此应用程序登录
> 
> 自动部署失败：/opt/glassfish3/glassfish/domains/domain1/autodeploy/login.war。

glassfish 3.1.2，java 1.6.0_29，opensuse 11.4。

**问题是**如何使这段代码工作？

## 更新

> jar tvf login.war

```
 0 Thu Apr 12 22:24:24 CEST 2012 META-INF/
    71 Thu Apr 12 22:24:24 CEST 2012 META-INF/MANIFEST.MF
     0 Mon Jun 27 10:13:54 CEST 2011 src/
     0 Mon Jun 27 10:13:54 CEST 2011 src/java/
     0 Mon Jun 27 10:13:54 CEST 2011 src/java/com/
     0 Thu Apr 12 22:16:32 CEST 2012 src/java/com/corejsf/
   603 Thu Apr 12 22:16:32 CEST 2012 src/java/com/corejsf/UserBean.java
     0 Mon Jun 27 10:13:54 CEST 2011 web/
     0 Thu Apr 12 21:24:56 CEST 2012 web/WEB-INF/
   877 Mon Jun 27 10:13:54 CEST 2011 web/WEB-INF/web.xml
     0 Thu Apr 12 22:21:38 CEST 2012 web/WEB-INF/classes/
     0 Thu Apr 12 22:21:38 CEST 2012 web/WEB-INF/classes/com/
     0 Thu Apr 12 22:21:38 CEST 2012 web/WEB-INF/classes/com/corejsf/
   704 Thu Apr 12 22:21:38 CEST 2012 web/WEB-INF/classes/com/corejsf/UserBean.class
     0 Mon Jun 27 10:13:54 CEST 2011 web/WEB-INF/beans.xml
   786 Mon Jun 27 10:13:54 CEST 2011 web/index.xhtml
   394 Mon Jun 27 10:13:54 CEST 2011 web/welcome.xhtml 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-13T20:58:35.583

您的 WAR 文件已损坏。

而是将其打包在 web 文件夹中。WEB-INF 应该在根目录中。

# c++ - 在 Ctrl+Z (EOF) 之后从 iostream::cin 继续读取？（“忽略”不起作用）

> ID：10147996
> 
> 赞同：4
> 
> 时间：2012-04-13T20:38:49.917
> 
> 标签：c++, stdin

当我们只为内循环提供 ctrl+z 时，为什么下面程序中的外循环会终止？

```
#include<iostream>
int main()
{
    string s1,s2;

    while(cin >> s1)
    {
        cout<<"In loop1\n";
        while(cin>>s2)
            cout<<"In loop 2\n";
        cin.ignore();
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-13T20:41:36.580

按 Ctrl+z（在 Windows 上）关闭标准输入流。一旦关闭，它就会保持关闭状态。一旦内部循环完成，它就不会神奇地重新打开。只是没有理由这样做。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-13T20:52:38.250

Ctrl-Z 将 cin 置于错误状态，因此 cin.ignore 不会。尝试 cin.Clear() 代替。

# python - 获取文件大小并附加到 CSV 文件的新列

> ID：10147998
> 
> 赞同：0
> 
> 时间：2012-04-13T20:39:07.730
> 
> 标签：python, csv

Python 2.4 对于我的示例，我有一个 2 列 csv 文件

例如：

```
HOST, FILE
server1, /path/to/file1
server2, /path/to/file2
server3, /path/to/file3 
```

我想在 PATH 中为 csv 文件中的每一行获取对象的文件大小，然后将该值添加到新列上的 csv 文件中。进行中：

```
 HOST, PATH, FILESIZE
 server1, /path/to/file1, 6546542
 server2, /path/to/file2, 46546343
 server3, /path/to/file3, 87523 
```

我尝试了几种方法，但没有取得很大的成功。

下面的代码在 PATH 上执行 fileSizeCmd (du -b) 并正确输出 filezie，但我还没有弄清楚如何使用数据添加到 csv 文件

```
 import datetime
 import csv
 import os, time
 from subprocess import Popen, PIPE, STDOUT

 now = datetime.datetime.now()
 fileSizeCmd = "du -b"
 SP = " "

 # Try to get disk size and append to another row after entry above
 #st = os.stat(row[3])
 #except IOError:
 #print "failed to get information about", file
 #else:
 #print "file size:", st[ST_SIZE]
 #print "file modified:", time.asctime(time.localtime(st[ST_MTIME]))

 incsv = open('my_list.csv', 'rb')
 try:
     reader = csv.reader(incsv)
     outcsv = open('results/results_' + now.strftime("%m-%d-%Y") + '.csv', 'wb')
     try:
         writer = csv.writer(outcsv)

         for row in reader:
         p = Popen(fileSizeCmd + SP + row[1], shell=True, stdin=PIPE, stdout=PIPE, stderr=PIPE)
         stdout, empty = p.communicate()

         print 'Command: %s\nOutput: %s\n' % (fileSizeCmd + SP + row[1], stdout)

         #  Results in bytes example
         #
         #  Output:
         #  8589935104      /path/to/file
         #

     #  Write 8589935104 to new column of csv FILE

   finally:
      outcsv.close()

 finally:
incsv.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T20:52:12.533

没有错误处理的草图：

```
#!/usr/bin/env python

import csv
import os

filename = "sample.csv"
# localhost, 01.html.bak
# localhost, 01.htmlbak
# ...

def filesize(filename):
    # no need to shell out for filesize
    return os.stat(filename).st_size

with open(filename, 'rb') as handle:
    reader = csv.reader(handle)
    # result is written to sample.csv.updated.csv
    writer = csv.writer(open('%s.updated.csv' % filename, 'w'))
    for row in reader:
        # need to strip filename, just in case
        writer.writerow(row + [ filesize(row[1].strip()) ])

# result
# localhost, 01.html.bak,10021
# localhost, 01.htmlbak,218982
# ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T20:48:20.957

你可以

1) 将 cvs 内容读入 (server, filename) 的元组列表

2) 收集此列表中每个元素的文件大小

3）将结果打包到另一个元组（服务器，文件名，文件大小）到另一个列表（'result'）中

4) 将结果写入新文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-13T20:50:19.980

首先，获取文件大小比使用容易得多`subprocess`（参见[os.stat](http://docs.python.org/library/os.html#os.stat)）：

```
>>> os.stat('/tmp/file').st_size
100 
```

其次，您的`writer`对象写入不同的文件是正确的，但您只需要在`row`从 中返回的列表中添加一列`reader`，然后将它们提供给`writerow`（`writer`请参见[此处](http://docs.python.org/library/csv.html#csv.writer)）。像这样的东西：

```
>>> writerfp = open('out.csv', 'w')
>>> writer = csv.writer(writerfp)
>>> for row in csv.reader(open('in.csv', 'r')):
...     row.append('column')
...     writer.writerow(row)
...
>>> writerfp.close() 
```