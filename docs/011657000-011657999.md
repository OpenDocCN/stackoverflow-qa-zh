# StackOverflow 问答 11657000-11657999

# vim - 如何在 Mac 上的 vim 中获得视觉铃声？

> ID：11657000
> 
> 赞同：5
> 
> 时间：2012-07-25T19:19:44.833
> 
> 标签：vim, macvim

我从 Lion OS X 上的终端调用 vim。我想摆脱音频铃声，只使用视觉铃声。文档似乎表明我可以使用`:set vb`. 一旦我发出`:set vb`以下设置结果：

```
:set vb? t_vb? 
```

给

```
visualbell
t_vb= 
```

并且闪光灯显然不起作用。文档表明默认情况下`t_vb`应该是`<Esc>|f`。它不是。我试过`t_vb`直接设置，但我不知道应该用什么来制作闪光灯。

另请注意，它也不适用于 mvim。但在 mvim 的情况下，它默认`t_vb=^[|f`无效。

有人在 Mac 上安装了可视铃吗？如果是这样，这是如何实现的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-30T16:16:19.037

如果您愿意在整个 OS X 中不发出警报声（我当然愿意），请执行以下操作：

1.  打开*系统偏好设置 -> 辅助功能 -> 音频*
2.  *出现警报时*选中闪烁屏幕旁边的框
**   点击`Open Sound Preferences…</kbd> button.`*   将警报音量向下滑动至静音。*

 *我刚刚在 Mountain Lion 10.8.3 上找到了这个。我不确定该功能在那里存在多长时间。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T07:54:45.003

您在终端中使用 MacVim GUI 还是 Vim？

如果您在终端中运行 Vim，则无需在 Vim 中执行任何操作。这严格来说是一个终端仿真器设置：

*   iTerm2.app

    在 iTerm > Preferences... > Profiles > Terminal 中，取消选中*Silence Bell*并选中*Flash Visual Bell*

    使用此设置，您会在终端窗口上看到一个漂亮、大且快速褪色的铃铛。

*   终端应用程序

    在终端 > 首选项... > 设置 > 高级中，检查*Visual Bell*

    使用此设置，您会得到一个……闪烁的终端窗口。

我不知道如何在 MacVim GUI 中获得铃声，视觉或音频。*

# cocoa-touch - 无登录客户端/服务器架构 (iOS)

> ID：11657004
> 
> 赞同：0
> 
> 时间：2012-07-25T19:19:53.947
> 
> 标签：cocoa-touch, security, web-applications, ssl, login

我目前正在规划一个涉及无登录服务的项目。

用户将通过在客户端 (ios) 上创建的唯一设备 ID 来识别。

有哪些安全问题？防止攻击的常见模式是什么？

*   套接字将用 ssl 包裹
*   创建一个私有证书来验证客户端？（如果有人反编译二进制文件并获得它呢？）

任何想法表示赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:18:11.077

谁是这个场景中的“攻击者”？您是在保护您的用户免受攻击，还是将您的用户视为攻击者？任何将用户视为攻击者的方案都是 DRM 方案，而不是安全方案。安全和 DRM 有完全不同的问题，DRM 问题是无解的。它只能通过不断的努力和补丁来缓解。

在 iOS 中创建唯一 id 很简单（请参阅 参考资料`CFUUIDCreate`），但它只与特定的安装相关，而不是与设备相关。如果用户删除了程序并且您没有将 UUID 保存在其他地方（例如 iCloud），那么下次您创建 UUID 时，它会有所不同。

可以对用户进行身份验证。他们有他们心中的秘密。无法以授权用户无法伪造的方式对 iPHone 等通用设​​备进行身份验证。这是一种非常复杂的说法，即越狱问题是无法解决的，如果你不是苹果公司，不值得花很多钱去解决。（他们在阻止越狱上花费的钱比你整个开发预算中可能花费的钱多得多，而且他们无法阻止越狱；你将无法更好地分层。）

有一些方法可以弱识别设备。特别是您可以使用 MAC 地址。苹果很有可能在未来将其拿走。他们取消了唯一标识设备的其他方法，因为它们太容易被滥用而无法监视用户。

创建一个私有证书来验证*用户*是很棒的。验证程序？这只是混淆，如果你的程序值得麻烦，它会很快被拉出来。

这个一般性话题已经在 SO 上讨论过很多次。有关几个讨论的链接，请参见以下内容。如果您有以前未涵盖的更具体的问题，请告诉我们。

[iOS 应用程序安全性的最佳实践](https://stackoverflow.com/questions/9448632/best-practices-for-ios-applications-security)

# php - htaccess 用于多个 PHP 文件

> ID：11657006
> 
> 赞同：0
> 
> 时间：2012-07-25T19:20:03.820
> 
> 标签：php, apache, .htaccess

我被困在正确设置我的 htaccess 中。目前我有以下情况：

```
1). mydomain.com/my/details.php?pid=top-news-around

2). mydomain.com/my/toplinks/link.php?id=top-news-around 
```

声明 .htaccess 与**mydomain.com/details.php?pid=1111**一起工作正常，但不适用于**mydomain.com/toplinks/link.php?id=top-news-around**。请让我知道.htaccess 有什么问题。

```
RewriteEngine On

RewriteRule ^([a-zA-Z0-9-/]+)$ my/details.php?pid=$1
RewriteRule ^([a-zA-Z0-9-/]+)/$ my/details.php?pid=$1

RewriteRule ^([a-zA-Z0-9-/]+)$ my/toplinks/link.php?id=$1
RewriteRule ^([a-zA-Z0-9-/]+)/$ my/toplinks/link.php?id=$1 
```

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:25:59.167

再次，你的条件是一样的。更改它们以访问不同的文件。喜欢：

```
RewriteEngine On

RewriteRule ^details/([a-zA-Z0-9-/]+)$ my/details.php?pid=$1
RewriteRule ^details/([a-zA-Z0-9-/]+)/$ my/details.php?pid=$1

RewriteRule ^link/([a-zA-Z0-9-/]+)$ my/toplinks/link.php?id=$1
RewriteRule ^link/([a-zA-Z0-9-/]+)/$ my/toplinks/link.php?id=$1 
```

像`mydomain.com/details/top-news-around`和`mydomain.com/link/top-news-around`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:58:50.553

为了理解这个问题，我们来看看当请求到达服务器时 Apache 在做什么。

1.  浏览器请求`http://mydomain.com/an/example/page`. 为此，它使用 HTTP 连接到 mydomain.com 上的服务器并发送`GET /an/example/page`请求（连同所有常见的 HTTP 请求标头）。 `/an/example/page`是*请求路径*。

2.  Web 服务器 (Apache) 现在必须决定使用哪个文件来处理请求。这里发生了很多事情，但最终它会读取`.htaccess`文件，从文档根目录中的文件开始。

3.  Apache 到达表示`RewriteRule ^([a-zA-Z0-9-/]+)$ my/details.php?pid=$1`并根据给定正则表达式检查请求路径的行。正则表达式将匹配完全由类中的一个或多个字符组成的任何字符串`[a-zA-Z0-9-/]`。 `an/example/page`匹配正则表达式，因此 Apache 将*相对*URL 重写为`my/details.php?pid=an/example/page`.

4.  由于您尚未设置`[L]`标志，Apache 将继续尝试将*新*URL 与其他规则进行匹配。新 URL 包含一个点，因此不匹配。`my/details.php`使用查询字符串调用该文件，`pid=an/example/page`并将运行该脚本的输出返回给浏览器。

现在，因为 .htaccess 中的第一个正则表达式非常宽泛，它几乎可以匹配***任何***没有点的请求 URL。这意味着您提出的*每个*不带点的请求都将被第一条规则重写。请注意，即使是`/an/example/page/`（注意尾部斜杠）之类的也会被重写为`my/details.php?pid=an/example/page/`（*包括*尾部斜杠），因为它在 Apache 甚至查看第二个正则表达式之前匹配第一个正则表达式（它似乎已被设计为删除尾部斜杠 - 但它不会，因为它永远不会有机会与 URL 匹配）。

我希望这能解释为什么你的 .htaccess 文件没有像你期望的那样工作。为了让它按需要工作，您需要使用更具体的模式匹配，正如其他人所展示的示例。但是，如果不知道您所有的 URL 是什么样子以及您希望它们都去哪里，没有人能够给您正确的答案。

# regex - 如何个性化 FOSUser Bundle：安全文件，我需要写一个 Regex

> ID：11657015
> 
> 赞同：0
> 
> 时间：2012-07-25T19:20:40.447
> 
> 标签：regex, symfony, fosuserbundle

我需要告诉我的 FOSUSer 管理员，我希望在由管理员启动的网站的每个部分中只允许管理员用户。默认情况下，在文档中，为 security.yml 文件提供代码：

```
security:
    encoders:
        "FOS\UserBundle\Model\UserInterface": sha512

    providers:
        fos_userbundle:
            id: fos_user.user_manager
    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false

        # Firewall pour les pages de connexion, inscription, et récupération de mot de passe
        login:
            pattern:   ^/(login$|register|resetting)  # Les adresses de ces pages sont login, register et resetting
            anonymous: true                           # On autorise bien évidemment les anonymes sur ces pages !

        # Firewall principal pour le reste de notre site
        main:
            pattern: ^/                      # ^/ = tout ce qui commence par / = tout notre site
            form_login:                      # On définit notre méthode d'authentification
                provider:    fos_userbundle  # On lit l'authentification au provider définit plus haut
                remember_me: true            # On active la possibilité du "Se souvenir de moi" (désactivé par défaut)
            remember_me:
                key:         %secret%        # On définit la clé pour le remember_me (%secret% est un parametre de parameters.ini)
            anonymous:       true            # On autorise les utilisateurs anonymes (non identifiés)
            logout:          true            # On autorise la déconnexion manuelle (désactivé par défaut) 
```

我只想修改那行：

```
pattern: ^/  # ^/ = tout ce qui commence par / = tout notre site 
```

这样我就可以看到：对于所有地址，例如“ [http://www.mywebsite.com/web/app_dev.php/admin/](http://www.mywebsite.com/web/app_dev.php/admin/) ”

我该如何写这个正则表达式？我试过：

```
pattern: ^/(admin)  # ^/ = tout ce qui commence par / = tout notre site 
```

但这不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:48:53.490

要在每个以 admin 开头的页面中只允许管理员用户，您需要编辑 security.yml 文件的 access_control 部分：

```
access_control:
    #List of pages only accessible by administrator
    - { path: ^/admin, role: ROLE_ADMIN } 
```

# playframework - playframework 1.x 是否处理跨站点脚本 (xss)？

> ID：11657016
> 
> 赞同：0
> 
> 时间：2012-07-25T19:20:45.583
> 
> 标签：playframework, xss, playframework-1.x

我正在使用版本 1.2.5 的 playframework，我只有一个简单的问题。

如果我使用例如：

```
public static User findByUsername(String username) {
    return User.find("username = ?", username).first();
} 
```

因此，如果我执行此调用，“JPAQuery find()”或 playframework 是否会阻止跨站点脚本和此类事情？

如果没有，我可以轻松地做些什么来防止它在我的所有数据库交互中发生？

非常感谢。

干杯，

马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:45:16.510

从 1.0.1 版本开始，Play 的模板引擎自动转义字符串。此页面上的更多详细信息：[playframework owasp top 10](https://stackoverflow.com/questions/6382900/playframework-owasp-top-10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T07:08:09.483

跨站点脚本并不完全适用于您发布的代码，所以我想您的意思是 SQL 注入。在这种情况下，您发布的代码应该是安全的。（错误的方法是通过将字符串与`+`运算符连接来构建查询。）

见这里：[http ://www.playframework.org/documentation/1.2.5/security#sql](http://www.playframework.org/documentation/1.2.5/security#sql)

# xcode - xcode 4.2 BTStack

> ID：11657019
> 
> 赞同：0
> 
> 时间：2012-07-25T19:20:52.660
> 
> 标签：xcode, ios5, bluetooth

我已经从 Google 代码页下载了 BTStack。编译它并通过 x 代码安装演示。甚至用我的开发人员签名来签名。一切正常，我没有 Wii 遥控器，但更改了其中一个文件以查找我的 mac 书，然后连接，mac 要求我输入密钥，所以一切都很好。

问题是我现在想开始一个新项目并实施 BTStack。谁能告诉我我需要什么标题以及如何导入它们，因为我完全被卡住了..

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:49:47.517

您将需要 BTstack 源代码树的 include 文件夹中的标头。最简单的方法是添加常规 CFLAGS，例如 -I/Path/To/BTstack/Folder/include 和 LDFLAGS，例如 -L/Path/to/BTstack/Folder/src -lBTstack

# iphone - 数据不在 ViewController 之间传递

> ID：11657021
> 
> 赞同：0
> 
> 时间：2012-07-25T19:20:54.037
> 
> 标签：iphone, objective-c, ios, uiviewcontroller

我需要在两个视图控制器之间传递数据。这是我的代码。

对于第一个视图控制器

```
-(void)editBotton {

    Carttable *second=[[Carttable alloc]init];

    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:second];
    nav.modalTransitionStyle=UIModalTransitionStyleCrossDissolve;

    [self.navigationController pushViewController:second animated:YES];

    NSString *temp=titlela.text;//titlela is UILabel

    NSLog(@"%@",temp);
    self.cart=second;
    cart.cnftitle=temp;
} 
```

在我的 cartable 视图 controller.h

```
@property(nonatomic,retain)NSString *cnftitle; 
```

我也合成了

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSLog(@"%@",cnftitle);
} 
```

一个 NSlog 在标签中打印我的文本，而另一个打印为 NULL....

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:23:36.360

您在视图加载后分配值。

将您的作业移到之前`pushViewController:`（因为那是加载视图的点）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:43:06.967

检查此代码，

```
-(void)editBotton {

    Carttable *second=[[Carttable alloc]init];
    [second.view setAlpha:1.0f];

    second.cnftitle = titlea.text;

    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:second];
    nav.modalTransitionStyle=UIModalTransitionStyleCrossDissolve;

    [self.navigationController pushViewController:second animated:YES];
} 
```

希望这对你有用。

享受编码:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T07:04:52.507

```
 ****in xode 4.5.1**  storyboard**
      we assume wee want to passed data between  
    viewcontroller1 to viewcontroller2
    in the viewcontroller1 in .h class we import viewcontroller2.h
    then we declare variable in viewcontroller2 ex: Nsstring *data;
    then we can passed data like this..
    in the viewcontroller1 we can code like this(in button event)

        ViewController3 *vc3=[self.storyboard instantiateViewControllerWithIdentifier:@"ViewController2"];

       vc3.data=textfield1.text;
        vc3.image=imageview.image;
        [self presentViewController:vc3 animated:YES completion:nil];

note=set the storyboard id of viewcontroller2 as ViewController2
        it is on the right hand side utility menu 3rd tab
(select viewcontroller2 and set storyboard id) 
```

# r - R 中的 read.csv/write.csv 同步

> ID：11657022
> 
> 赞同：1
> 
> 时间：2012-07-25T19:20:56.607
> 
> 标签：r, synchronization, read.csv

我有多个在一堆项目上运行的代码实例。项目列表包含在 projList.csv 中。当 R 实例选择一个项目时，它会在 projList.csv 中的项目名称前写入 1，以防止其他实例重做已经完成的工作。

我想避免以下同步问题： - 我不想在另一个进程正在写入列表文件时读取列表文件。- 当另一个进程正在写入或读取它时，我不想允许写入。

有没有办法做到这一点？

谢谢

# hadoop - Hadoop 0.20 中没有 KeyValueTextInputFormat（新的 MapReduce API）。*

> ID：11657025
> 
> 赞同：-1
> 
> 时间：2012-07-25T19:21:01.687
> 
> 标签：hadoop, mapreduce

我刚刚使用 Hadoop 0.20.205 设置了一个单节点集群 Hadoop（伪分布式模式），并运行了一些用新 MapReduce API 编写的作业。

我在 KeyValueTextInputForma 类（org.apache.hadoop.mapreduce .lib.input.KeyValueTextInputFormat）上遇到了一些没有找到类的错误**，**然后意识到 hadoop 0.20.205（不是 CDH 发行版）似乎不支持完全相同的 MapReduce API CDH3。0.20.205 中新 API 的 KeyValueTextInputFormat 的替代类是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T22:04:27.750

我想我必须自己使用 TextInputFormat 并拆分值部分。

# javascript - 为什么 jQuery 会出现此函数范围错误？

> ID：11657026
> 
> 赞同：0
> 
> 时间：2012-07-25T19:21:01.437
> 
> 标签：javascript, jquery, scope

我有以下功能：

```
function updateStatuses() {
    $.each($('.status-badge'), function (i, value) {
        value.removeClass('badge-known');
    });
    $.post("/Diagnostics/Update", {  }, function(data) {
        $.each(data, function() {
            setStatus(this.Id, this.Infos, this.Errors, this.Warnings);
        });
    });
    window.setTimeout(function () {
        $.each($('.status-badge:not(.badge-known)'), function(i, value) {
            value.addClass('badge-unknown');
        });
    }, 1000);
} 
```

基本上，我正在通过 AJAX 调用更新一组徽章。如果在 1000 毫秒后，任何某个徽章没有被更新，它就会获得`badge-unknown`该类。

上面的函数是这样调用的：

```
$(function () { updateStatuses(); }); 
```

我的问题是`value.removeClass('badge-known');`出现以下错误：

```
TypeError: value.removeClass is not a function 
```

如果我将该行注释掉，超时函数会引发相同的错误`value.removeClass('badge-unknown');`

令人困惑的是，`addClass`并且`removeClass`用于`setStatus`，它在上述函数下方定义。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:24:09.933

`.each`调用标准 jQuery 方法时无需使用。大多数这样的方法将愉快地直接迭代一组元素。

此外，您的主处理程序不需要匿名函数包装器`document.ready`：

你的整个代码可以是这样的：

```
function updateStatuses() {
    $('.status-badge').removeClass('badge-known');

    $.post("/Diagnostics/Update", {  }, function(data) {
        $.each(data, function() {
            setStatus(this.Id, this.Infos, this.Errors, this.Warnings);
        });
    });

    window.setTimeout(function () {
        $('.status-badge:not(.badge-known)').addClass('badge-unknown');
    }, 1000);
}

$(updateStatuses); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T19:23:58.627

`value`是一个 dom 节点，而不是一个 jQuery 对象。尝试

```
$(value).removeClass('badge-known'); 
```

# android - Android/NFC：从智能卡 (EMV) 读取 ATR

> ID：11657028
> 
> 赞同：3
> 
> 时间：2012-07-25T19:21:05.397
> 
> 标签：android, nfc, emv

我有一张 EMV 智能卡，我想用我的手机与之通信。通过 IsoDep 通信本身没有问题，但我不知道如何获得 ATR。据我所知，意图应该包含 ATR，有人可以告诉我我需要的代码吗？

或者，如果这不可能，也许有人知道如何使用 SELECT 之类的命令对卡进行热重置，其中答案是 ATR。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T11:18:35.303

非接触式卡没有 ATR。不过，您可能对 ATS（选择答案）的历史字节感兴趣。您可以通过调用来检索这些[`getHistoricalBytes()`](http://developer.android.com/reference/android/nfc/tech/IsoDep.html#getHistoricalBytes%28%29)：

```
Tag tag = (Tag) intent.getParcelableExtra(NfcAdapter.EXTRA_TAG));
IsoDep iso = IsoDep.get(tag);
NfcA nfcA = NfcA.get(tag);
if (nfcA == null || iso == null)
   return; // not an IsoDep+NfcA tag
byte[] histBytes = iso.getHistoricalBytes();
... 
```

请记住，这只适用于 ISO 14443 A 类标签 ( `NfcA`)。对于 B 类标签 ( `NfcB`)，您可能需要调查[`getHiLayerResponse()`](http://developer.android.com/reference/android/nfc/tech/IsoDep.html#getHiLayerResponse%28@%29).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-30T19:00:40.207

非接触式卡确实返回 ATR。但是，您无法从当前的 android NFC API 获取 ATR。Android NFC API 仅从 ATR 返回历史字节。

非接触式卡返回 ATR 的原因： 请注意 ATR 是 7816 重置答案。读卡器（本例中为 nfc 电话）使用 ISO 7816 (T=CL) APDU 交换与智能卡通信，该交换通过非接触式接口 ISO 14443-4 传输。由于在这种情况下有 ISO 7816，您将获得 ATR。

# ruby - Kernel.lambda() 在 Ruby 1.9 中没有返回 lambda Proc

> ID：11657035
> 
> 赞同：0
> 
> 时间：2012-07-25T19:21:31.723
> 
> 标签：ruby, lambda, block, ampersand, ruby-1.9.3

我正在编写一个简单的事件总线以在应用程序中使用。这部分工作正常：

```
#!/usr/bin/env ruby

module EventBus
  @callbacks = {}

  module_function

  def on event, &callback
    @callbacks[event] ||= []
    @callbacks[event].push callback
  end

  def fire event, *data
    @callbacks[event].each do |callback|
      callback.call *data
    end
  end
end

EventBus.on :foo do |x| puts x end
EventBus.fire :foo, "test"
# => test 
```

由于我的程序的复杂性，以及`Proc`s 以非常松散的方式接受参数的事实，我希望对我的事件进行一些参数检查。`lambda`是显而易见的选择：

```
EventBus.on :bar, &(lambda do |x| puts x end)

# Will raise an ArgumentError, since the event was fired without any arguments
# Remember that this is the desired behavior
EventBus.fire :bar 
```

显然，`on`由于`&(lambda do ... end)`. 我宁愿能够只使用`do ... end`（即只需将其传递给没有一元与符运算符的普通块）并将其转换为 lambda。我尝试了明显的：

```
...
  def on_lambda event, &callback
    @callbacks[event] ||= []
    @callbacks[event].push(lambda &callback)
    # check if the added callback is lambda. (spoiler alert: it isn't)
    puts @callbacks[event].last.lambda?
  end
end

EventBus.on_lambda :baz do |x| puts x end
# I would expect the callback to be a lambda, and thus throw an ArgumentError,
# but neither of these holds.
EventBus.fire :baz 
```

据我了解，`on_lambda`需要一个块，将其转换为（通过）`Proc`本地引用的块。我正在将调用with convert 的结果推回一个块。我希望这会返回一个派生自 的 lambda ，所以我的问题是：**为什么数组上的元素是一个 normal** **。**?`callback``&``lambda``callback``callback` `Proc`**`Proc`**

```
ruby 1.9.3p194 (2012-04-20 revision 35410) [x86_64-linux] 
```

* * *

*更新：* 在 megas 提到的提示下，`{ }`我研究了`->() { }`语法（我已经看到它被称为“stab”运算符）。它从指定的块中生成一个 lambda。它可能与我想要的普通块语法和参数检查的混合一样接近。我所要做的就是调整`on`方法：

```
def on event, callback
  @callbacks[event] ||= []
  @callbacks[event].push callback
end 
```

然后像这样附加回调：

```
EventBus.on :bam, ->(x) do
  puts x
end 
```

但是，我仍然对原始问题感到好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:57:19.100

我建议阅读以下内容：[http ://ruby-doc.org/core-1.9.3/Proc.html#method-i-lambda-3F](http://ruby-doc.org/core-1.9.3/Proc.html#method-i-lambda-3F)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:17:38.260

传递给方法调用的块总是打包为 Procs。如果你想要 lambdas，你必须明确地构造它们，通过说 lambda {|...| ... }。顺便提一句。我也比 procs 更喜欢 lambdas，但如果我没记错的话，Matz 在他的教程中将 procs 介绍为​​比 lambdas“更具特色”（procs“有技巧”适应可变数量的参数等，而 lambdas 没有）。

你必须做这样的事情来传递 lambdas：

```
def on_lambda event, callback
  (@callbacks[event] ||=[]) << callback
  puts @callbacks[event].last.lambda?
end

EventBus.on_lambda :baz, lambda do |x| puts x end
EventBus.fire :baz 
```

# objective-c - ios 解码图像的一部分

> ID：11657040
> 
> 赞同：9
> 
> 时间：2012-07-25T19:22:01.063
> 
> 标签：objective-c, ios, core-graphics

我有一个大图像，它太大而无法加载到内存中，但我只对该大图像中的一组像素感兴趣。是否可以仅将这个像素子集解码到内存中？我知道在Android中，API中有一个类可以做到这一点，叫做BitmapRegionDecoder 就是这样

我找到了 CGDataProviderCreateSequential 但它需要构造函数中的原始像素......

现在我正在做这样的事情：

```
UIImage* srcImage = ...;
    CFDataRef cgImgDataRef = CGDataProviderCopyData(CGImageGetDataProvider(srcImage.CGImage));//After this call, all pixels are decoded into memory and the app crashes
char* imageData = (char*)CFDataGetBytePtr(cgImgDataRef); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T19:37:57.903

这可能起作用的唯一可能方法是，如果您创建一个`CGImageSourceCreateWithData()`（或任何 URL），然后创建一个`CGImageRef`using`CGImageCreateWithJPEGDataProvider`或`CGImageCreateWithPNGDataProvider`. 有了它`CGImageRef`，您可以尝试使用`CGImageCreateWithImageInRect()`并拉出大图像的一部分。

如果您要做的是平铺图像，请澄清您的问题，因为那时我会为您提供更多信息。

# c# - 数据绑定和默认值

> ID：11657042
> 
> 赞同：0
> 
> 时间：2012-07-25T19:22:04.897
> 
> 标签：c#, wpf, data-binding, datagrid

我拥有的是一个 DataGrid（在**WPF**中），并且我已将它绑定到我制作的自定义类的列表中。

为了简单起见，让我们说，类如下：

```
public class MyClass{

   int val;
   string str;
   static const int alwaysSetValue = 10;

} 
```

有没有办法（在数据绑定或类本身）说“如果 val = -1，在数据网格中而不是显示 -1，只显示一个空白，或者''？

我正在查看 Binding 的 IsTargetNull 值，如果 int 是可空类型，那会很好，但我宁愿不使用 int？如果可能的话。

有没有办法做到这一点？某种覆盖 ToString() 之类的？

**解决方法** 见下面的答案。我所做的唯一更改是在代码中设置绑定和转换：

```
DataGrid.Columns.Add(new DataGridTextColumn() { Header = "Value", Binding = new Binding("val") { Converter = new MyValConverter() } }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:34:49.037

这是示例：

XAML 文件：

```
<Window x:Class="DataGridConverter.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525"
        xmlns:local="clr-namespace:DataGridConverter"
        >
    <Window.Resources>
        <local:MyValConverter x:Key="myCon" />
    </Window.Resources>
    <Grid>
        <DataGrid Name="grid" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Val" Binding="{Binding val, Converter={StaticResource myCon}}" />
                <DataGridTextColumn Header="Str" Binding="{Binding str}" />               
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window> 
```

代码隐藏文件：

```
using System;
using System.Collections.Generic;
using System.Windows;
using System.Windows.Data;
using System.Windows.Documents;

namespace DataGridConverter
{
    /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            List<MyClass> _source = new List<MyClass>();
            for (int i = 0; i < 5; i++)
            {
                _source.Add(new MyClass { val = 1, str = "test " + i });
            }

            _source[2].val = -1;

            grid.ItemsSource = _source;
        }
    }

    public class MyClass
    {
        public int val { get; set; }
        public string str { get; set; }
        const int alwaysSetValue = 10;
    }

    public class MyValConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            return (int)value == -1 ? string.Empty : value;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

# java - 找不到jdk

> ID：11657045
> 
> 赞同：0
> 
> 时间：2012-07-25T19:22:29.950
> 
> 标签：java, android, sdk

我正在尝试安装 android sdk，但我遇到了问题。首先，我安装了 java (JDK) 7u5，然后我尝试安装 android sdk 20.exe，然后出现以下错误。我该如何解决这个问题？

![错误](../Images/c6a2b454ae31dc05ff845135f519196f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:36:19.247

*   首先，找出您机器上 JAVA 文件夹的位置。
*   其次，确保它有 JDK，而不仅仅是 JRE。
*   三、创建环境变量--计算机右键-->属性-->高级设置--创建JAVA_HOME变量并设置JAVA文件夹路径。确保 bin 文件夹不包含在类路径中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:28:10.480

安装 JDK 后，您必须在 eclipse 中设置 JDK 所在的路径。请完成以下步骤：http: [//developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

# java - 基于配置的启用/禁用 JUnit 测试

> ID：11657049
> 
> 赞同：3
> 
> 时间：2012-07-25T19:22:37.550
> 
> 标签：java, junit

基于 Config 参数启用/禁用 junit 测试的最佳方法是什么？假设我有一个 Config 类，它指示使给定测试集无效的软件的某些状态。

我可以将测试主体放在测试方法中的 if 语句中，例如：

```
@Test
public void someTest() {
   if(Config.shouldIRunTheTests()) {
      //do the actual test
   }
} 
```

这似乎很糟糕，因为当我实际上希望跳过这些测试时，我实际上获得了这些情况的测试通过。想要类似的东西：

```
@Test[Config.shouldIRunTheTests()] 
public void someTest() {
    //do the actual test
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:27:26.893

实际上，看起来我在谷歌上找到了这个：http: [//old.nabble.com/How-to-enable-disable-JUnit-tests-programatically---td23732375.html](http://old.nabble.com/How-to-enable-disable-JUnit-tests-programatically---td23732375.html)

编辑：

这对我有用：

```
@Test 
public void someTest() {
   org.junit.Assume.assumeTrue(Config.shouldIRunTheTests());
   //do the actual test
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T19:51:00.953

实际上，我认为这种情况下最好的解决方案是编写自己的`org.junit.Runner`. 它并不像看起来那么复杂。一个简单的示例是：

跑步者：

```
package foo.bar.test;

import org.junit.runner.Description;
import org.junit.runner.Runner;
import org.junit.runner.notification.Failure;
import org.junit.runner.notification.RunNotifier;
import org.junit.runners.JUnit4;
import org.junit.runners.model.InitializationError;

public class MyRunner extends Runner {

    private final Runner runner;

    public MyRunner(final Class<?> klass) throws InitializationError {
        super();
        this.runner = new JUnit4(klass);
    }

    @Override
    public Description getDescription() {
        return runner.getDescription();
    }

    @Override
    public void run(final RunNotifier notifier) {
        for (Description description : runner.getDescription().getChildren()) {
            notifier.fireTestStarted(description);
            try {
                // here it is possible to get annotation:
                // description.getAnnotation(annotationType)
                if (MyConfiguration.shallExecute(description.getClassName(), description.getMethodName())) {
                    runner.run(notifier);
                }
            } catch (Exception e) {
                notifier.fireTestFailure(new Failure(description, e));
            }
        }
    }

} 
```

测试用例：

```
package foo.bar.test;

import org.junit.Test;
import org.junit.runner.RunWith;

@RunWith(MyRunner.class)
public class TestCase {

    @Test
    public void myTest() {
        System.out.println("executed");
    }

} 
```

和配置类：

```
package foo.bar.test;

public class MyConfiguration {

    public static boolean shallExecute(final String className, final String methodName) {
        // your configuration logic
        System.out.println(className + "." + methodName);
        return false;
    }

} 
```

这里很酷的是您可以实现自己的注释，例如：`@TestKey("testWithDataBase")`，请参阅上面示例源的注释。您的配置对象可以定义测试是否应该运行，因此您可以对测试进行分组，这在您有很多需要分组的测试时非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-13T10:30:51.103

看着类似的问题，我发现了另一个解决方案：[Conditionally ignoring tests in JUnit 4](https://stackoverflow.com/questions/1689242/conditionally-ignoring-tests-in-junit-4)

它介绍了 org.junit.Assume 和（Junit-ext 的另一个解决方案）@RunIf 注释的使用。

我希望该链接可以缩短任何在这里查看的人的搜索时间：)

# batch-file - 批处理脚本：从程序到变量的输出列？

> ID：11657062
> 
> 赞同：1
> 
> 时间：2012-07-25T19:23:29.247
> 
> 标签：batch-file

我以前写过 bash 脚本，但我对如何使用批处理执行此操作有点困惑：

我有一个输出的程序：

```
aaa boo
bbb boo
ccc boo
ddd boo 
```

我想遍历第一列，并对每个字符串执行一个操作。我该怎么做？

```
var=OUTPUT
for col1 in var
    echo col1 
```

我可能可以弄清楚 for 循环部分，但我不知道如何将输出列存储为字符串。

**编辑：**澄清一下，我正在寻找一个用 BATCH 编写的 Windows 解决方案。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:27:27.890

对于 MS 批处理可以使用 FOR /F

处理命令的输出：

```
FOR /F "tokens=1 delims= " %%A IN ('command') DO ( 
    echo %%A
) 
```

或处理变量的内容：

```
FOR /F "tokens=1 delims= " %%A IN ("%VARIABLE%") DO ( 
    echo %%A
) 
```

[http://www.robvanderwoude.com/ntfortokens.php](http://www.robvanderwoude.com/ntfortokens.php)

# cygwin - 运行 FreeTDS 配置文件时出现语法错误

> ID：11657064
> 
> 赞同：0
> 
> 时间：2012-07-25T19:23:38.917
> 
> 标签：cygwin, freetds

我正在尝试运行 Ruby on Rails 并连接到 MS SQL DB。我已经安装了 RoR，并且我已经创建了我将要连接的数据库。我创建并测试模型，在尝试 $ rake db:migrate 时出现 rake aborted 错误（没有要加载的此类文件 -- tiny_tds）。此时我下载并解压缩了 FreeTDS。当我提交 $ ./configure 时，问题就出现了。

以下是命令和产生的错误消息（Windows 7 Pro OS 盒子上的 Cygwin 终端）：

```
$ ./configure

./configure: line 31: syntax error near unexpected token `newline'

'/configure: line 31: `;; 
```

这是来自 FreeTDS 配置文件的代码（第 19-33 行）：

```
 if test -n "${ZSH_VERSION+set}" && (emulate sh) >/dev/null 2>&1; then :
  emulate sh

  NULLCMD=:

  # Pre-4.2 versions of Zsh do word splitting on ${1+"$@"}, which

  # is contrary to our usage.  Disable this feature.

  alias -g '${1+"$@"}'='"$@"'

  setopt NO_GLOB_SUBST

else

  case `(set -o) 2>/dev/null` in #(

  *posix*) :

    set -o posix ;; #(

  *) : 

    ;;

esac

fi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:05:17.013

错误消息中的这一行：

```
'/configure: line 31: `;; 
```

在行的开头有`'`字符，因为它抱怨的令牌中实际上有一个返回字符：`;;\r`。

该`configure`脚本具有 Windows 样式的 CR-LF 行尾，shell 无法识别；它需要 Unix 风格的 LF 行结尾，并将 CR 视为普通字符，从而导致语法错误。

过滤`configure`脚本`dos2unix`用于将其转换为 Unix 样式的行尾。

请务必先阅读`dos2unix`手册页；与大多数文本过滤器不同，它默认覆盖其输入文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T14:03:31.013

解决了！！最初，我使用 Winzip 解压缩了 freetds 下载。在解决了上述问题后，我删除了下载。重新下载，然后使用 UNIX 命令解压缩。现在工作正常。

# javascript - 在可拖动的 div 中设置正确的位置

> ID：11657066
> 
> 赞同：2
> 
> 时间：2012-07-25T19:23:44.597
> 
> 标签：javascript, jquery, position, draggable

我正在尝试做什么：

将 div 设置为 draggable ，然后制作一个按钮以将其位置重置为默认值。

问题是，为什么我`right`设置为可拖动后，我不能设置绝对 div 的位置？

**编辑：**先拖动 div，然后单击按钮。

```
$('div').draggable();
$('#button').click(function(){
   $('div').draggable('destroy').css({ // destroy was only a test
       top: 0,
       right: 0 // nothing happens
   });
}); 
```

[**jsfiddle 演示**](http://jsfiddle.net/9uLCY/5/)。

这个位置只有在我使用时才有效`left`。

**编辑2：**我不使用左侧位置的原因是因为如果我放大，会覆盖其他东西。任何提示，做我的客人。

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:28:10.997

这是因为在您拖动 div 时设置，并且在您调用后保持`$.draggable()`设置`left``$.draggable('destroy')`

只需使用`left: auto;` [http://jsfiddle.net/9uLCY/7/向左重置](http://jsfiddle.net/9uLCY/7/)

```
$('div').draggable();
$('#button').click(function(){
   $('div').draggable('destroy').css({
        top: 0,
        left: 'auto',
        right: 0
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:26:48.823

因为您的可拖动元素上仍然有一个“左”值，它优先于“右”值。您需要“取消设置”左值

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:28:39.980

首先将左侧位置重置为`auto`，因为可拖动方法仍有左侧位置，然后设置右侧位置。

# css - 使用背景位置的 CSS 背景图像具有故障效果

> ID：11657067
> 
> 赞同：1
> 
> 时间：2012-07-25T19:23:46.460
> 
> 标签：css, background-image, background-position

有问题的代码是：

```
/* footer */
#footerwrapper {
    height: 225px;
    background-color: #000000;
    background-image: url('../images/footbgRight.jpg');
    background-position: top right;
    background-repeat: no-repeat;
} 
```

图像底部显示了一个奇怪的条，我无法理解。如果我将它定位为“正确”，它会在图像的顶部和底部显示相同的条。

谁能帮我理解为什么显示栏，以及如何处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:30:54.410

您指定了不重复的背景。由于背景图像不会重复并且比您指定的高度短，因此浏览器会将背景的其余部分渲染为您的背景颜色，即黑色。这就是你看到的酒吧。

编辑：我现在看到了。@Musa 之前的评论是正确的。它似乎在图像本身中，而不是 CSS 东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:32:28.233

它继承了`#headborder {}`第 15 行 styleNew.css 中声明的背景颜色

您可以尝试添加`background:none;`到开头，`#footerwrapper`但这不太可能解决问题，您将不得不重复背景`#footerwrapper` 或取消背景颜色`#headborder`，您也可以尝试`background-color:white;`添加`#footerwrapper`

# java - 线程中的Android全局变量

> ID：11657071
> 
> 赞同：0
> 
> 时间：2012-07-25T19:24:08.190
> 
> 标签：java, android, multithreading, variables, global

我有个问题。这是我的代码：

```
public String getXmlFromUrl(String url) {
    String xml = null;

        new Thread(new Runnable() {

            @Override
            public void run() {
                try {
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                xml = EntityUtils.toString(httpEntity);
                } catch (UnsupportedEncodingException e) {
                    e.printStackTrace();
                } catch (ClientProtocolException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }).run();
    // return XML
    return xml;
} 
```

那么，如何在我的 Thread 中使用 url 以及如何返回 xml？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:33:30.050

Android 提供了一个 AsyncTask，它完全符合您的目标。

例子：

```
private class XMLTask extends AsyncTask<String, String, String> {
    @Override
    protected void onPreExecute() {
        // Do stuff
        // For example showing a Dialog to give some feedback to the user.
    }

    @Override
    protected String doInBackground(.. parameters..) {
        try {
            // defaultHttpClient
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);

            HttpResponse httpResponse = httpClient.execute(httpGet);
            HttpEntity httpEntity = httpResponse.getEntity();
            xml = EntityUtils.toString(httpEntity);
            } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
            } catch (ClientProtocolException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } 
        return xml;
    }

    @Override
    protected void onPostExecute(String xml) {
        // If you have created a Dialog, here is the place to dismiss it.
        // The `xml` that you returned will be passed to this method
        xml.Dowhateveryouwant

        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:29:59.040

2件事：

*   此方法是同步调用，因此最好使用 AsyncTask。
*   使用 Thread.start() 启动线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:30:34.360

`url`最终使用它 。

如果您不介意在另一个线程完成之前阻塞，请`xml`进入 a `AtomicReference`，并在调用后`Thread.start()`（注意您应该“不”调用`Thread.run()`- 这不会产生另一个线程），使用一些同步工具（例如 a `CountdownLatch`）等到线程在返回之前完成`xml`。

但是如果你不介意阻塞，为什么不直接在没有单独线程的情况下执行代码呢？如果你不能阻塞，那么你就不能返回`xml`值——你必须改变设计，也许执行一个`AsyncTask`并异步提供结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T19:35:12.150

您可以将您的 URL 标记为`final`并在 Runnable 中使用它，如下所示：

```
public String getXmlFromUrl(final String url) {
    // ...
} 
```

您可能想要定义一个无状态回调方法或类，您可以调用它来处理您的 XML 响应。你会这样称呼它：

```
xml = EntityUtils.toString(httpEntity);
handleXmlResponse(xml); 
```

如果您愿意，可以将该方法定义`handleXmlResponse`为包含该`getXmlFromUrl`方法的类的私有方法。

您可能要考虑的一件事是使用`Executors`该类来获取 a`newSingleThreadExecutor`并将您的 Runnable 传递给该类，而不是每次您想要获取一些 XML 时都创建一个新线程：

[https://developer.android.com/reference/java/util/concurrent/Executors.html#newSingleThreadExecutor%28%29](https://developer.android.com/reference/java/util/concurrent/Executors.html#newSingleThreadExecutor%28%29)

这是一个例子：

```
ExecutorService mThreadPool = Executors.newSingleThreadExecutor();
public String getXmlFromUrl(String url) {
    String xml = null;

        // Note the change here. Everything else remains the same.
        mThreadPool.execute(new Runnable() {

            @Override
            public void run() {
                try {
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                xml = EntityUtils.toString(httpEntity);
                } catch (UnsupportedEncodingException e) {
                    e.printStackTrace();
                } catch (ClientProtocolException e) {
                    e.printStackTrace();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        });
    // return XML
    return xml;
} 
```

# c# - DataGridView 在运行时更改显示

> ID：11657077
> 
> 赞同：0
> 
> 时间：2012-07-25T19:24:24.707
> 
> 标签：c#, winforms, .net-4.0, datagridview, propertygrid

我在属性网格中显示一个包含几个成员（每个成员都是自己的类）的类。我有以下情况（简化，这不是实际的设计和/或类）：

```
public class DataType1
{
    public int Value1 { get; }
    public int Value2 { get; }
}

public class DataType2
{
    public int ValueA { get; }
    public int ValueB { get; }
}

public class DisplayedData
{
    [TypeConverter(typeof(ExpandableObjectConverter))]
    [ReadOnly(true)]
    public DataType1 Data1 { get; }

    [TypeConverter(typeof(ExpandableObjectConverter))]
    [ReadOnly(true)]
    public DataType2 Data2 { get; }
} 
```

如您所见，每个成员（Data1、Data2）都显示为可展开的对象，因此我可以看到它的所有成员。

现在，问题是这样的：这些数据类中的每一个都是从远程源单独读取的，并且每次读取都可能失败（带有特定错误）。

我希望能够`DisplayedData`在属性网格中显示组合对象 ( )，如果读取成功，每个成员都可以展开，否则显示错误代码（只是一个字符串）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T15:07:20.467

正如 Arif 建议的那样，我最终基于 ExpandableObjectConverter 创建了自己的 TypeConverter。我的解决方案有点简单（我认为）。

我更改`DataType1`并`DataType2`继承自同一个基类（我们称之为它`BaseDataType`），它包含一个错误代码（以及是否有错误）。

然后在我的类型转换器中，我做了类似的事情（再次简化）：

```
public class MyDynamicTypeConverter : ExpandableObjectConverter
{
    public override object ConvertTo(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value, Type destinationType)
    {
        if (destinationType.Equals(typeof(string)))
        {
            BaseDataType baseDisplay = GetBaseDisplay(context);
            if (baseDisplay.ReadFailed)
            {
                // Display the error message
                return baseDisplay.ErrorMessageReadFailed;
            }
        }
        return base.ConvertTo(context, culture, value, destinationType);
    }

    public override bool GetPropertiesSupported(ITypeDescriptorContext context)
    {
        BaseDataType baseDisplay = GetBaseDisplay(context);
        if (baseDisplay.ReadFailed)
        {
            // If read failed, do not expand the display for this object
            return false;
        }
        return base.GetPropertiesSupported(context);
    }

    private BaseDataType GetBaseDisplay(ITypeDescriptorContext context)
    {
        // Extract base data type using reflections
        object obj = context.Instance.GetType().GetProperty(context.PropertyDescriptor.Name).GetValue(context.Instance, null);
        return (BaseDataType)obj;
    }
} 
```

这样，转换器本身会查询读取的数据对象，并根据是否存在错误代码来决定如何显示它。

当然涉及的代码更多（例如在需要时设置相关的错误代码等），但这是主要思想。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T08:15:25.203

我认为如果您基于 ExpandableObjectConverter 实现自己的 TypeConverter，您可能可以处理这种情况。例如。假设您无法获取 Data2 的数据，所以我假设 Data2 将为 Null。您可以使用自己的转换器在网格中显示属性，但我想知道如何在其前面显示“错误”文本。基本上，对于 Expandable 对象，该类的 ToString() 用于在组中显示文本。

我有一个你可以使用的技巧，可能不是最优雅的解决方案，但我希望它会起作用......你可以做的是在你的类 DisplayedData 添加另一个属性，这样你的类就变成这样了......

```
public class DisplayedData
{
    [TypeConverter(typeof(ExpandableObjectConverter))]
    [ReadOnly(true)]
    public DataType1 Data1 { get;  }

    [TypeConverter(typeof(ExpandableObjectConverter))]
    [ReadOnly(true)]
    [DisplayName("Data2")]
    [Browsable(true)]
    public DataType2 Data2 { get;  } //We have Browsable set to true for this

    [DisplayName("Data2")]
    [Browsable(false)]
    public string Data2Error { get;  } //An additional property with Browsable set to false
} 
```

（上面的类没有设置器，我想知道您将如何填充它们，但这可能是部分代码）

现在，当您在此类的对象中填充数据时，您会看到您无法读取 Data2 的值，因此 Data2 为 Null。那你写这个...

```
 if (data.Data2 ==  null)//data is an object of DisplayedData class that we are showing in PropertyGrid
        {
            PropertyDescriptor descriptor = TypeDescriptor.GetProperties(data.GetType())["Data2"];
            BrowsableAttribute attribute = (BrowsableAttribute)descriptor.Attributes[typeof(BrowsableAttribute)];
            FieldInfo fieldToChange = attribute.GetType().GetField("Browsable",
                                  BindingFlags.NonPublic | BindingFlags.IgnoreCase | BindingFlags.Public |
                                  BindingFlags.Instance);
            fieldToChange.SetValue(attribute, false);

            data.Data2Error = "Error";
            descriptor = TypeDescriptor.GetProperties(data.GetType())["Data2Error"];
            attribute = (BrowsableAttribute)descriptor.Attributes[typeof(BrowsableAttribute)];
            fieldToChange = attribute.GetType().GetField("Browsable",
                                  BindingFlags.NonPublic | BindingFlags.IgnoreCase | BindingFlags.Public |
                                  BindingFlags.Instance);
            fieldToChange.SetValue(attribute, true);
        }

        propertyGrid1.SelectedObject = data; //Reassign object to PropertyGrid 
```

基本上在运行时我们试图隐藏属性 Data2 并显示属性 Data2Error，这两个属性具有相同的显示名称，因此在属性网格中显示相同的名称。为此，我们使用反射并获取属性“Browsable”并设置其属性。

# php - 使用 ion auth 激活帐户后自动登录

> ID：11657081
> 
> 赞同：0
> 
> 时间：2012-07-25T19:24:41.633
> 
> 标签：php, codeigniter, authentication, ion-auth

我在我的代码点火器中使用 ion-auth。我想在通过电子邮件激活帐户后自动登录。我可以简单地将哈希密码传递给电子邮件 tpl 并将其隐藏并用于`$this->ion_auth->login()`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T00:51:45.413

在 register() 函数内部，只需调用 login() 函数，并提交未散列的普通密码。

你有这个，因为它是你用来提交散列的变量 - 只需重用原始 var

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T02:08:17.620

如果您激活帐户，无论如何您都应该检索用户数据，只需手动设置该帐户的会话数据并在 activate() 内重定向

# windows-phone-7 - 固定页面上的页眉和页脚？

> ID：11657090
> 
> 赞同：2
> 
> 时间：2012-07-25T19:25:11.043
> 
> 标签：windows-phone-7

windows phone 页面上是否可以有固定的页眉和页脚？我使用的是纯 XAML，而不是使用任何第三方控件。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T19:50:15.197

当然，这是代码和布局

```
<Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="100"/>
        <RowDefinition Height="*"/>
        <RowDefinition Height="100"/>
    </Grid.RowDefinitions>

    <TextBlock Text="I AM HEADER" Grid.Row="0" FontSize="56"/>
    <StackPanel Grid.Row="1" >
        <TextBlock Text="Main content goes here. Main content goes here. " TextWrapping="Wrap" FontSize="56"/>
    </StackPanel>
    <TextBlock Text="I AM FOOTER" Grid.Row="2" FontSize="56"/>

</Grid> 
```

![在此处输入图像描述](../Images/040cd47c4596753ee7f5be944be5d2a8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:55:40.450

如果您想要可以反复使用的东西，我建议您创建一个自定义控件。您的任何页面都可以轻松使用此控件。

自定义控件：

```
public class HeaderFooterControl : ContentControl
{
    public object Header
    {
        get { return (object)GetValue(HeaderProperty); }
        set { SetValue(HeaderProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Header.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty HeaderProperty =
        DependencyProperty.Register("Header", typeof(object), typeof(HeaderFooterControl), new PropertyMetadata(null));

    public object Footer
    {
        get { return (object)GetValue(FooterProperty); }
        set { SetValue(FooterProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Header.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty FooterProperty =
        DependencyProperty.Register("Footer", typeof(object), typeof(HeaderFooterControl), new PropertyMetadata(null));

    // TODO: Templates for Header and Footer
} 
```

用于自定义控件的 Xaml：

```
<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:MyLocalNamespace">
    <Style TargetType="controls:HeaderFooterControl">
        <Setter Property="Header" Value="Header info"/>
        <Setter Property="Footer" Value="Footer info"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="controls:HeaderFooterControl">
                    <Grid Background="{TemplateBinding Background}">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <ContentPresenter Content="{TemplateBinding Header}"/>
                        <ContentPresenter Content="{TemplateBinding Content}" Grid.Row="1"/>
                        <ContentPresenter Content="{TemplateBinding Footer}" Grid.Row="2"/>

                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ResourceDictionary> 
```

然后，如果您像这样进行页面，您将使用该控件：

```
<phone:PhoneApplicationPage
    xmlns:controls="clr-namespace:MyLocalNamespace"
    <!-- Other parts of the page to declare (eg: FontSize, Foreground, etc)
    <controls:HeaderFooterControl Header="Hello Header!" Footer="Bottom of page!">
        <!-- Other content for your page here! -->
    </controls:HeaderFootControl> 
```

您还可以通过设置可以设置的 HeaderTemplate 和 FooterTemplate 来添加到此解决方案。[您可以在此处](http://www.sharpgis.net/post/2012/02/06/Why-Custom-Controls-are-underrated.aspx)找到有关自定义控件的更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:34:40.403

确保页面上的默认网格是 2 行。使其 3.. 顶部和底部行设置为自动高度.. 中间设置为 *

# apache - 如何编写这个 RewriteCond？

> ID：11657092
> 
> 赞同：0
> 
> 时间：2012-07-25T19:25:19.183
> 
> 标签：apache, .htaccess, mod-rewrite, redirect

我想将 url 从 stockpicks.php 重写为 stock-picks。当我访问 www.website.com/stock-picks 时会显示 stockpicks.php 页面。我使用以下规则。

```
RewriteRule ^stock-picks /stockpicks.php [PT] 
```

我还想让搜索引擎知道我以前的页面 stockpicks.php 永久移动到 stock-picks。我使用以下规则，但 301 重定向似乎不起作用。我猜 RewriteCond 是不对的。

```
RewriteCond %{THE_REQUEST} stockpicks.php$
RewriteRule ^stockpicks.php$ /stock-picks [R=301,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:28:54.470

插入符号 ^ 表示当前目录下 URL 的开始。该目录是 .htaccess 文件所在的任何目录。您将使用插入符号开始几乎所有匹配项。

美元符号 $ 表示要匹配的字符串的结尾。您应该添加它以阻止您的规则匹配较长 URL 的第一部分。

```
 RewriteEngine on
    RewriteRule ^stock-picks$ stockpicks.php 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T00:19:11.967

匹配实际的`%{THE_REQUEST}`HTTP 请求，可能如下所示：

```
GET /stockpicks/ HTTP/1.1

GET /stockpicks.php?some=stuff HTTP/1.1

HEAD /stockpicks.php

POST /stockpicks.php HTTP/1.0 
```

等等

所以你希望你`RewriteCond`的正则表达式看起来像这样（注意空格需要转义）：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /stockpicks.php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:43:24.707

@Johndave 的帖子满足您的第一个要求。

您还需要重定向到请求 stockpicks.php 的请求，以便他们将来使用 /stock-picks/ （因为这是您要发布的此资源的新位置）。

```
 Redirect permanent /stockpicks.php http://hostname.com/stock-picks/ 
```

我会为此使用 Redirect 指令，因为这是让 Apache 发送“HTTP 301 Moved Permanently”响应的最简单方法。

请注意，这不会陷入循环，因为@Johndave 提出的重写规则不会重新启动 URL 映射过程，因为在您最初的尝试中指定 [PT] 标志。

如果您确实需要使用 [PT] 标志（为了让 Apache 处理 .php 文件），那么我认为您可能有相互冲突的要求。

# sql - 光标查询慢，但个别查询快

> ID：11657093
> 
> 赞同：1
> 
> 时间：2012-07-25T19:25:31.303
> 
> 标签：sql, sql-server, tsql, stored-procedures

我有一个接受三个参数并使用游标收集数据的存储过程。奇怪的是运行 SP 所需的时间。有时运行需要 5 到 10 分钟，然后只返回 300 行。通过在游标中运行单个查询，数据似乎很快返回。我对为什么将它作为一个整体运行需要这么长时间感到有些困惑。如果有人可以指出我可能需要对我的查询提出的任何错误或修复，将不胜感激。

```
USE [AW]
GO
/****** Object:  StoredProcedure [dbo].[Issue_Report]    Script Date: 07/25/2012   15:06:04 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER PROCEDURE [dbo].[Issue_Report]
  @MinDate DateTime,
  @MaxDate DateTime,
  @PSNumParam varchar(50)
AS
BEGIN
-- SET NOCOUNT ON added to prevent extra result sets from
-- interfering with SELECT statements.
SET NOCOUNT ON;

-- Setup Temp Table
DECLARE @TempIssueData TABLE
(
    [Date]                  datetime,
    [SerialNum]             varchar(MAX),
    [LotNum]                varchar(MAX),
    [CatalogNum]            varchar(MAX),
    [PSNum]                 varchar(MAX),
    [Description]           varchar(MAX),
    [ORCaseNum]             varchar(MAX),
    [UserName]              varchar(MAX),
    [Issued_From]           varchar(MAX),
    [Issued_To]             varchar(MAX),
    [Surgical_Specalty]     varchar(MAX),
    [surgeon]               varchar(50),
    [SurgeryEndDate]        datetime
)

-- Declare Variables (easier for debugging)
DECLARE @StartDate          datetime = @MinDate
DECLARE @EndDate            datetime = @MaxDate
DECLARE @Date               datetime
DECLARE @SurgeryEndDate     datetime
DECLARE @SerialNum          varchar(MAX)
DECLARE @LotNum             varchar(MAX)
DECLARE @CatalogNum         varchar(MAX)
DECLARE @PSNum              varchar(MAX)
DECLARE @Description        varchar(MAX)
DECLARE @ORCaseNum          varchar(MAX)
DECLARE @UserName           varchar(MAX)
DECLARE @Issued_From        varchar(MAX)
DECLARE @Issued_To          varchar(MAX)
DECLARE @Surgical_Specialty varchar(MAX)
DECLARE @Surgeon            varchar(50)
DECLARE @ItemID             uniqueidentifier
DECLARE @LocationID         uniqueidentifier
DECLARE @UserID             uniqueidentifier
DECLARE @UnitLocation       uniqueidentifier 

-- Fix EndDateTime to include the whole day
IF(SELECT CONVERT(varchar,@MaxDate, 108) AS TimeOnly) = '00:00:00'
BEGIN
    SET @EndDate = DATEADD(SECOND, 86400,@MaxDate)
END   

-- Setup Parameters
IF (@PSNumParam ='') BEGIN SET @PSNumParam = NULL END

-- Setup Cursor
DECLARE curs_GetIssueData CURSOR FOR
    SELECT item.ID, item.SerialNumber, item.LotNumber, items.PartNumber, items.CrossRefID, items.Description, item.LocationID
    FROM  dbo.item WITH (INDEX(Stat_LastUpdated))  INNER JOIN dbo.items ON item.ItemID = items.ID 
    WHERE  (dbo.item.Stat = 3) AND (dbo.item.LastUpdated BETWEEN @StartDate AND @EndDate) AND Tracking='1'
    AND CrossRefID = ISNULL(@PSNumParam, CrossRefID)

    OPEN curs_GetIssueData

    -- Start Reading
    FETCH NEXT FROM curs_GetIssueData INTO @ItemID, @SerialNum, @LotNum, @CatalogNum, @PSNum, @Description, @LocationID
        WHILE (@@FETCH_STATUS = 0)
            -- BEGIN WHILE
            BEGIN

                SET @Issued_From = NULL 
                BEGIN
                    SELECT @Issued_From = ISNULL(Locations.Name, 'N/A')
                    FROM dbo.Locations
                    WHERE Locations.ID = @LocationID
                END

                BEGIN
                    -- Setup Cursor
                    DECLARE curs_GetTransData CURSOR FOR
                        SELECT TOP 1 ORCaseNumber, SurgicalSpecialty, UserID, ORNumber, TransDate, Surgeon, EndDateTime 
                        FROM dbo.transactions 
                        WHERE transactions.ItemID = @ItemID AND transactions.TransactionTypeID in (8,9,10) AND transactions.TransDate BETWEEN @StartDate and @EndDate
                        ORDER BY transactions.TransDate desc

                        OPEN curs_GetTransData

                        -- Start Reading
                        FETCH NEXT FROM curs_GetTransData INTO @ORCaseNum, @Surgical_Specialty, @UserID, @Issued_To, @Date, @Surgeon, @SurgeryEndDate
                            WHILE (@@FETCH_STATUS = 0)
                                -- BEGIN GetTransData WHILE
                                BEGIN
                                    -- Reset UserName
                                    SET @UserName = NULL
                                    SET @UnitLocation = NULL

                                    BEGIN
                                        SELECT @UnitLocation = Unit.LocationID
                                        FROM dbo.Unit
                                        WHERE UnitType='4' and Unit.LocationID = @LocationID
                                    END

                                    -- Check to see if UserID is NULL
                                    IF @UserID IS NULL AND @UnitLocation IS NOT NULL 
                                    BEGIN
                                        SET @UserName = 'CORONA'    
                                    END

                                    ELSE
                                    BEGIN
                                        SELECT @UserName = dbo.users.LastName + ', ' + dbo.users.FirstName
                                        FROM dbo.users
                                        WHERE users.ID = @UserID
                                    END

                                FETCH NEXT FROM curs_GetTransData INTO @ORCaseNum, @Surgical_Specialty, @UserID, @Issued_To, @Date, @Surgeon, @SurgeryEndDate
                                -- END GetTransData WHILE
                                END

                        -- CLEANUP
                        CLOSE curs_GetTransData
                        DEALLOCATE curs_GetTransData
                END

                BEGIN
                    INSERT INTO @TempIssueData
                    VALUES(
                        @Date,
                        @SerialNum,
                        @LotNum,
                        @CatalogNum,
                        @PSNum,
                        @Description,
                        @ORCaseNum,
                        @UserName,
                        @Issued_From,
                        @Issued_To,
                        @Surgical_Specialty,
                        @Surgeon,
                        @SurgeryEndDate
                    )
                END

            -- Fetch next record    
            FETCH NEXT FROM curs_GetIssueData INTO @ItemID, @SerialNum, @LotNum, @CatalogNum, @PSNum, @Description, @LocationID

            -- END WHILE
            END

        -- CLEANUP
        CLOSE curs_GetIssueData
        DEALLOCATE curs_GetIssueData

SELECT * FROM @TempIssueData ORDER BY [Date] Desc, [Issued_From]
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-04T20:31:25.697

显然，您创建了一个临时表，对于临时表
**1\. 选择查询执行时间
2\. 在光标中
插入查询执行时间 3\. 在 TempTeble+Cursor 运行时中插入查询执行时间
4\. 选择与 1 相同的临时表执行时间**

尝试删除游标并使用连接而不是游标选择您的查询，它可能会生成这样的 sql 选择查询

# javascript - Javascript 静态成员

> ID：11657096
> 
> 赞同：2
> 
> 时间：2012-07-25T19:25:44.313
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 中的静态变量](https://stackoverflow.com/questions/1535631/static-variables-in-javascript)

我有 javascript 的问题。我打算做的是模拟一个名为 Tooltip 的类。前任：

```
var Tooltip = function(){
    this.draw = .....;
    /////////// other members and methods

    this.Static = ...; // this one I want to be static } 
```

问题是我找不到声明静态方法/成员的方法。而且我认为上述方式行不通。是否有任何方法可以模拟具有静态成员的类？（最好使用对象字面量）

LE：我忘了说我想从类的实例中访问静态成员。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:30:16.963

Javascript 是一种原型语言。它不是 C

话虽如此.. 观看 David Crockford 的一些视频，看看[这个 SO 解决方案](https://stackoverflow.com/questions/1535631/static-variables-in-javascript)是否适合您的账单。

祝你好运！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:30:05.890

在这里，tooltip.sam() 将是“sam”，您无法更改它。

我相信这被称为“显示模块模式”。

```
var tooltip = function() {
        var _sam = "sam";

        var sam : function()
           { 
             return _sam;
           }

        return { 
           sam :  sam 
        };
 })(); 
```

# c++ - 这个未定义的行为或实现是否已定义？

> ID：11657100
> 
> 赞同：0
> 
> 时间：2012-07-25T19:26:12.973
> 
> 标签：c++, undefined-behavior

以下是未定义的还是实现定义的：

```
 int x = 0;
 printf("%d%d", ++x, x); 
```

未指定评估参数的顺序，因此：

*   如果`++x`首先评估，则打印`11`.
*   如果`x`首先评估，则打印`10`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:36:32.120

```
printf("%d%d", ++x, x); 
```

这显然是 C++ 中未定义的行为。

> (C++11, 1.9p15) “如果标量对象的副作用相对于同一标量对象的另一个副作用或使用同一标量对象的值的值计算是未排序的，则行为未定义。”

C 相同（强调我的）：

> （C99，6.5.p2）“在前一个和下一个序列点之间，对象的存储值最多只能通过表达式的评估修改一次。72）**此外，应只读先前的值以确定要被存储**0.73"

请注意，C11 现在的措辞与 C++11 中的类似：

> （C11，6.5p2）“如果标量对象的副作用相对于同一标量对象的不同副作用或使用相同标量对象的值的值计算是未排序的，则行为未定义。”

# windows - 自 Windows XP 以来的 Windows 任务计划支持

> ID：11657102
> 
> 赞同：0
> 
> 时间：2012-07-25T19:26:20.293
> 
> 标签：windows, task, scheduler

我有一个 python 脚本需要在每次重启后运行。我所知道的是它将安装在 Windows 操作系统上，并且支持的最旧版本将是 XP。

可能还有一些奇怪的非消费者版本的 Windows，例如 POS 就绪的嵌入式窗口 (http://www.microsoft.com/windowsembedded/en-us/evaluate/windows-embedded-pos-ready-2009.aspx) 或窗口服务器。我希望广泛支持这些版本的 Windows。

我正在 Windows 7 上开发脚本，我现在正在使用任务计划程序 GUI 进行测试。

我用“control schedtasks”命令把它拉起来。

我担心的是旧版本的 Windows 不会有这个任务计划程序 GUI，甚至没有命令版本 (schtasks)。

有人知道它们与 Windows 的默认安装捆绑了多长时间吗？

捆绑 schtasks.exe 是个好主意吗？那还能用吗？

我想到的解决方案有更好的替代方案吗？

这里的任何见解都将受到高度赞赏。我有点迷失在 Windows 的世界里。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:36:33.320

将适当的调用放入批处理文件中（确保 python 在您的 PATH 变量中）并将其放在“启动”文件夹中

Windows 7：C:\ProgramData\Microsoft\Windows\开始菜单\程序\启动

Windows XP：C:\Documents and Settings\所有用户\开始菜单\程序\启动

# python - 如何在jinja2模板中调用没有参数的python函数

> ID：11657108
> 
> 赞同：4
> 
> 时间：2012-07-25T19:26:59.700
> 
> 标签：python, jinja2

我已经设法通过使用自定义过滤器从 jinja2 调用 python 函数，但我似乎只能调用带有一个或多个参数的函数。在下文中，我必须传递一个垃圾参数才能将 ctest 视为函数而不是变量。

如果我只是打电话也行不通`{{ ctest() }}`。

有没有不同的方法可以强制它成为函数调用，还是我应该使用不同的方法？

代码：

```
def ctest(stuff):
    return "yeah!"

template_env = jinja2.Environment (loader = jinja2.FileSystemLoader(template_file_root))
#custom filters
template_env.filters['ctest'] = ctest 
```

模板：

```
Working? {{ junk|ctest }} 
```

输出：

```
working? yeah! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T22:22:39.957

Summarizing the comments into an answer:

The ability to call functions by adding it to filters isn't really the correct way of going about this since (as Wooble pointed out) I'm not looking to filter anything.

Instead the function just needs to be added to the template_env.globals:

```
template_globals.filters['ctest'] = ctest 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:34:53.027

好吧，他们是过滤器，所以他们希望过滤一些东西。如果动机是您希望在不传递任何参数的情况下从模板外部调用函数，请将签名更改为：

```
def ctest(*args): 
```

然后忽略这些论点；如果它没有传递任何参数或任何数量的参数，它将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-26T13:20:15.500

`{{func()}}`呈现输出。 带参数`{% call func() %}{%endcall%}`调用。`func()``caller`

在 jinja 中，似乎没有直接的方法可以在模板中调用 python 函数而不渲染它或其他模板副作用。我想出的解决方法是：

```
{% if func() %}{% endif %} 
```

# c# - linq .ToList() 返回所有记录忽略where子句？

> ID：11657109
> 
> 赞同：-1
> 
> 时间：2012-07-25T19:27:04.657
> 
> 标签：c#, linq

下面的 linq 查询向我显示了所有结果集，而不是使用 where 子句 premalink.PremalinkID == id 过滤它？

```
 lstpremalink = dalpremalink.GetUserNewsFeed(UserID);
 var premalinkid = (from p in lstpremalink select p.PremalinkID).Distinct();

    foreach (Int64 id in premalinkid)
    {
   lstprema = (from premalinktags in lstpremalink
                   where premalinktags.PremalinkID == id
                   select premalinktags).ToList(); 
} 
```

lstprema 显示下面的所有结果集

![在此处输入图像描述](../Images/516928c1d634fa81d0568707d4229c50.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:30:29.420

```
lstprema = (from premalinktags in lstpremalink 
            where premalink.PremalinkID == id select premalinktags).ToList(); 
```

您迭代，`premalinktags`但您的`where`子句不包含该变量！不应该`premalinktags.PremalinkID == id`取而代之吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:30:52.567

```
 lstpremalink = dalpremalink.GetUserNewsFeed(UserID);

 var premalinkid = (from p in lstpremalink 
                    where p.PremalinkID == lstpremaLink.ID 
                    select p).Distinct(); 
```

您必须使用 where 条件

# javascript - javascript测试一个值是否是一个数字和一个大于0的数字

> ID：11657110
> 
> 赞同：2
> 
> 时间：2012-07-25T19:27:21.573
> 
> 标签：javascript

我有一个对象属性，它可能包含也可能不包含数字，并且该数字可能等于也可能不等于`0`. 目前，我有这个：

```
var TheVar = parseInt(SomeObject.SomeVar, 10);

if (!TheVar > 0) {
   TheVar = "-";
} 
```

我想`TheVar`成为一个正数或`"-"`. 我只是想知道我的条件语句是否会涵盖所有情况？

感谢您的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T19:30:03.197

不，您缺少括号。

```
if( !(TheVar > 0)) 
```

`NaN > 0`返回 false，因此`if`条件将通过。

# jquery - 附加后未触发 JQuery 事件

> ID：11657117
> 
> 赞同：2
> 
> 时间：2012-07-25T19:27:56.940
> 
> 标签：jquery, razor

好的，如果这会影响答案，我正在使用 Razor 和 jquery 1.5.1。

我有一些从本网站的另一篇文章中复制的简单 jquery。我有使用 Razor 引擎呈现的可变数量的部分。

我希望能够隐藏/显示每个部分下的数据（包含在一个 div 中。）

所以 HTML 是

```
<div>Course 1<a class="toggle" href="javascript:void(0);">Click</a>
<div class="contentHidden" style="display:none;"> content here </div></div>
<div>Course 2<a class="toggle" href="javascript:void(0);">Click</a>
<div class="contentHidden" style="display:none;"> content here </div></div> 
```

jquery是；

```
<script type="text/javascript">
$(document).ready(function(e) {
  $(".toggle").click(function (e) {
    e.preventDefault();
    $(this).children("div").toggle();
  });
}); 
```

jquery 位于视图的底部，我已添加该`document.ready`位以确保`<a>`标签确实存在。

我考虑过的一件事是我正在使用 razor 创建页面内容`@foreach()`，但是在内容流式传输到浏览器之前必须在服务器上发生，所以我不相信我在创建链接之前这样做，并且不需要使用 live 或委托。

但是我现在被困住了，所以任何人都可以建议我如何追踪它（或者更好地修复它:-)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:30:19.293

`a`元素没有`div`子元素。相反，它是下一个元素：

```
$(this).next("div").toggle(); 
```

视觉上`div`可能在`a`元素之下。然而，重要的是 DOM 结构，`div`其中`a`.

# visual-c++ - 为什么我的 vb6 应用程序的窗口在调用用 C 编写的函数时会停止？

> ID：11657118
> 
> 赞同：0
> 
> 时间：2012-07-25T19:27:59.650
> 
> 标签：visual-c++, vb6

我正在使用 3.9.7 cURL 库从 Internet 下载文件，所以我创建了一个动态 bibioteca of viculo。使用 VC++ 6.0 用 C 语言编写的 dll 问题是，当我从我的 vb6 应用程序窗口中调用我的函数时，只有在你下载了文件后才会锁定和解锁，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:20:03.933

问题是，当您从 DLL 调用该函数时，它会“阻止”您的应用程序的执行，直到它完成。基本上，执行从进行函数调用的一段代码，到函数调用内部的代码，然后在函数内部的代码完成运行后才返回到函数调用之后的下一行。事实上，这就是所有函数调用的工作方式。您可以通过在 VB 6 开发环境中单步执行代码来亲自了解这一点。

您通常不会注意到这一点，因为在将控制权返回给调用者之前，被调用函数内部的代码不会花费很长时间来执行。但是在这种情况下，由于您从 DLL 调用的函数正在执行大量处理，因此需要一段时间才能执行，因此它会“阻塞”您的应用程序代码的执行一段时间。

对于您的应用程序窗口似乎被冻结的原因，这是一个很好的一般解释。从技术上讲，这是因为负责处理用户与屏幕元素交互的消息泵没有运行（它是您的代码的一部分，在您调用的函数完成处理之前暂时挂起）。对于 VB 程序员来说，这有点难以理解，因为这些细节都没有在 VB 世界中暴露出来。这一切都发生在幕后，就像在 C 程序中一样，但您通常不必处理任何事情。但是，有时抽象会泄漏，细节会抬起丑陋的脑袋。这是其中一种情况。

正如其他人所暗示的那样，这个一般问题的正确解决方案是在后台线程上运行冗长的操作。这使您的主线程（现在，您唯一拥有的一个，您的应用程序正在运行的那个）可以自由地继续处理用户输入，而另一个线程可以处理数据并将处理过的数据返回给主线程完成的。当然，计算机*实际上*一次只能做一件事，但操作系统在一项任务和另一项任务之间快速切换的魔力意味着你可以模拟这一点。这样做的机制涉及线程。

问题在于 VB 6 环境不支持创建多线程。你只会得到一个线程，这就是你的应用程序运行的主线程。如果您冻结该程序的执行，即使是暂时的，您的应用程序也会冻结——正如您已经发现的那样。

但是，如果您已经在编写 C++ DLL，那么您没有理由不能在 VB 6 应用程序中创建多个线程。您只需要自己处理所有事情，就好像您在使用另一种较低级别的语言（如 C++）一样。在后台线程上运行 C++ 代码，只有在完全完成后才将其结果返回给主线程。同时，您的主线程是免费的。

不过，这仍然是一项相当多的工作，尤其是当您在 Win32 编程和围绕多线程的问题方面缺乏经验时。找到支持开箱即用的异步函数调用的不同库可能会更容易。[Antagony 建议](https://stackoverflow.com/a/11658157/366904)使用 VB 的[`AsyncRead`方法](http://msdn.microsoft.com/en-us/library/aa277589.aspx)。这可能是一个不错的选择；正如 Karl Peterson 在链接文章中所说，它将所有内容都保存在纯 VB 6 代码中，这可以节省时间，也可以为未来的维护程序员带来福音。唯一的问题是，一旦获得数据，您仍然必须以某种方式*处理数据。*如果这很慢，那么您就回到了起点……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:34:05.203

查看[这篇文章](http://visualstudiomagazine.com/articles/2008/03/27/simple-asynchronous-downloads.aspx)，它演示了如何在用户控件中使用鲜为人知的方法异步传输大文件。

# facebook - 是否可以在流中自定义内置的类似动作故事？

> ID：11657119
> 
> 赞同：0
> 
> 时间：2012-07-25T19:28:03.010
> 
> 标签：facebook, facebook-opengraph

通过自定义操作，可以自定义故事。您有一个标题和 4 行自定义文本和数据。这对于内置的like动词是否可行？能够在时间轴中使用“喜欢”动词并传递更多关于喜欢什么的信息会非常好。

在仪表板中，似乎所有构建操作的故事根本无法自定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:49:50.097

这些故事是基于可用于所有类型的 Open Graph 对象的相同 Open Graph 元标记进行定制的。使用内置对象时，您可以使用其中一种[内置对象类型](https://developers.facebook.com/docs/opengraph/objects/builtin/)（例如文章、博客、书籍等），也可以[创建自己的自定义对象](https://developers.facebook.com/docs/opengraph/define-objects/)（例如配方或运行）。

无论哪种方式，您都将通过在 HTML 中包含 Open Graph 元标记来包含此对象的详细信息，例如以下厨师示例：

`<meta property="fb:app_id" content="YOUR_APP_ID" />
<meta property="og:type" content="recipebox:recipe" />
<meta property="og:title" content="Chocolate Chip Cookies" />
<meta property="og:image" content="http://www.example.com/cookies.png" />
<meta property="og:description" content="Best Cookies on Earth!" />
<meta property="recipebox:chef" content="http://www.example.com/john_smith"/>`

一旦针对这样的对象发布了 Like 操作，您将在 Newsfeed 中看到一个故事，它代表所提供的 OG 数据，例如：

![https://developers.facebook.com/attachment/OGLikes_SocialCookbook_NewsFeed.png](../Images/f6a1e2ad9f410e116b3baac31a5fd7ea.png)

关于内置喜欢的完整文档在这里：[https ://developers.facebook.com/docs/opengraph/actions/builtin/likes/](https://developers.facebook.com/docs/opengraph/actions/builtin/likes/)

Open Graph 对象在这里有更详细的解释： [https ://developers.facebook.com/docs/opengraph/objects/](https://developers.facebook.com/docs/opengraph/objects/)

# php - 发布选中和未选中的复选框

> ID：11657123
> 
> 赞同：3
> 
> 时间：2012-07-25T19:28:12.070
> 
> 标签：php, jquery, checkbox, webforms

我正在尝试在 Web 表单中制作一系列复选框，这些复选框将根据是否选中它们将“true”或“false”发布到下一个 php 页面。我决定，对于每个复选框（值=“ true”），我将拥有一个隐藏的复选框（value =“ false”），这总是相反的（在选中复选框时，没有选中隐藏的复选框等。）我正在使用jQuery去做这个。

'td' 元素的数量是未知的（'td' 可以使用按钮无限次克隆，以提交多个值）。我将警报添加到 jQuery 以进行测试。

当我将 jQuery 代码和隐藏的复选框添加到我的源代码中时（我将其设置为可见以用于测试目的），代码将无法正常工作，并且我网页上的所有其他 jQuery 都停止工作了！

jQuery代码：

```
$(document).ready(function(){
    /***post all 'required' checkboxes instead of just checked ones***/
    $(".required").click(function(event){
        event.preventDefault();
        alert("test");
        nextIndex = this.index() + 1;
        alert(nextIndex);
        $(".required:eq(nextIndex)").attr("checked", !.required:eq(nextIndex).attr("checked"));
    });
}); 
```

HTML：

```
<td>
    <input type="checkbox" class="required" name="required[]" value="true">
    <input type="checkbox" class="required" name="required[]" value="false" style="display: none;" checked>
</td> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T19:33:00.043

您不必隐藏其中一个复选框。这是一个应该完成您想要的解决方案：

```
<input type="hidden" name="required" value="false" />
<input type="checkbox" name="required" value="true" /> 
```

如果未选中该复选框，则隐藏字段将与该`false`值一起提交。如果复选框被选中，则`true`复选框中的值将覆盖`false`隐藏输入中的值。

只要您可以将每个复选框命名为稍有不同，它就可以工作。

以下内容也适用于值数组：

```
<input type="hidden" name="required[0]" value="false" />
<input type="checkbox" name="required[0]" value="true" />

<input type="hidden" name="required[n]" value="false" />
<input type="checkbox" name="required[n]" value="true" /> 
```

这样，您不需要任何客户端 javascript 来切换隐藏的复选框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:31:29.707

这条线可能导致事情中断：

```
$(".required:eq(nextIndex)").attr("checked", !.required:eq(nextIndex).attr("checked")); 
```

你可能的意思是：

```
$(".required:eq(" + nextIndex + ")").attr("checked", !$('.required:eq(' + nextIndex + ')').attr("checked")); 
```

另请注意，您需要`nextIndex`去掉引号。

我的猜测是你的 javascript 控制台会抛出一些与此相关的错误。

**编辑：**

我注意到的另一个错误是：

```
nextIndex = this.index() + 1; 
```

`.index()`是一个 jQuery 函数，必须在 jQuery 对象上调用。`this`是被点击的元素，所以你需要说：

```
nextIndex = $(this).index() + 1; 
```

顺便说一句，您可能想查看[jQuery 的`.next()`功能。](http://api.jquery.com/next/)它将使您摆脱所有这些`nextIndex`胡言乱语。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T23:21:11.887

如果您像这样命名您的复选框，则不一定要使用索引：

```
<input type="checkbox" name="checkbox_name[]" /> 
```

那么这个 jQuery 片段应该适合你，假设你可以依赖 javascript。

```
$('form').submit(function(){

    $(":checkbox:not(:checked)").each(function(element, index){
        $(this).attr({value: 'false', checked:'checked'});
    });

    return true;
}); 
```

这将遍历所有未选中的复选框，选中它们，并将它们的值设置为`false`。这是你在 PHP 中得到的：

```
[checkbox_name] => Array
    (
        [0] => off
        [1] => on
        [2] => off
    ) 
```

代替：

```
[checkbox_name] => Array
    (
        [0] => on
    ) 
```

# mysql - 统计转发推文的数量和已转发推文的总数

> ID：11657124
> 
> 赞同：0
> 
> 时间：2012-07-25T19:28:15.420
> 
> 标签：mysql

考虑下表

```
users                                tweets
---------------------------------    ---------------------------
user_id num_retweets sum_retweets    tweet_id user_id retweeted
---------------------------------    ---------------------------
1                                    1        1       3
2                                    2        1       0
3                                    3        1       4
                                     4        2       0
                                     5        2       0
                                     6        3       1
                                     7        3       2
                                     8        3       0 
```

我想计算`num_retweets`：用户撰写已被转发的转发`sum_retweets`的次数和：所有用户推文被转发的次数。查询后的预期`users`表`UPDATE`是：

```
users
---------------------------------
user_id num_retweets sum_retweets
---------------------------------
1       2            7 <-- 3 + 4
2       0            0
3       2            3 <-- 1 + 2 
```

对构建这两个查询的任何帮助都会非常感激:-) 我一直在`UPDATE`跨表执行 s 时遇到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:30:52.960

```
UPDATE
USERS u
JOIN (
SELECT 
    tweets.user_id,
    COUNT(IF(tweets.retweeted > 0, 1, null)) as num_retweets,
    SUM(tweets.retweeted) as sum_retweets
FROM tweets
GROUP BY tweets.user_id
) as t ON t.user_id = u.user_id
SET u.num_retweets = t.num_retweets, u.sum_retweets = t.sum_retweets 
```

# security - 别名文件夹的站点核心权限

> ID：11657125
> 
> 赞同：0
> 
> 时间：2012-07-25T19:28:24.657
> 
> 标签：security, permissions, sitecore, sitecore6

我创建了一个角色，并在文件夹内`/Sitecore/System/Aliases`为需要创建或编辑网页别名的用户添加了读取、写入和创建权限。但是，在编辑这些权限时，安全编辑器将系统文件夹显示为灰色，我无法将其设置为读取。当我以具有此角色的用户身份登录时，我无法导航到别名文件夹

我需要向此角色添加哪些权限/角色才能访问别名文件夹？

我正在使用 sitecore 6.5.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:27:59.280

系统项目默认受保护，因此您需要以 root 管理员身份登录并在进行这些更改之前取消保护它。但是，一旦您进行了更改，我建议您再次保护它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-20T15:11:08.833

系统文件夹应该受到保护，并且只有管理员和开发人员可以访问恕我直言。为了控制对创建别名的访问，您应该控制演示功能区中的别名菜单项。为此，请拒绝访问给定角色的 CORE DB 中的以下块...

/sitecore/content/Applications/内容编辑器/功能区/块/页面网址

# vim - Vim 在特定数量的分隔符后插入

> ID：11657128
> 
> 赞同：6
> 
> 时间：2012-07-25T19:28:44.703
> 
> 标签：vim

我希望通过以下方式使一些代码更易于阅读：

```
0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44 .... 
```

并添加新行以创建 8 的增量：

```
0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44,
0x44, 0x44 .... 
```

任何人都知道任何 vim 魔法可以让我用特别选择的行来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T20:11:49.743

这不是最漂亮的解决方案，我相信它可以被清理/简化一些。首先选择文本，然后输入以下命令：

```
:'<,'>s/\(\S\+,\s*\)\{8}/&\r/g 
```

这会输出如下内容：

```
0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44,
0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44, 0x44,
0x44, 0x44, 0x44, 0x44, ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:16:00.903

一种作弊方法是：

1.  `set textwidth=48`
2.  突出显示（在可视模式下）要换行的行
3.  `gq`

只要 textwidth 大致是您想要换行的位置，那将可以正常工作。如果列表中的所有项目的宽度相同，则此方法应该是完美的。

另一种更稳健的方法是定义一个宏。

1.  将光标移动到行首
2.  `qw`开始在寄存器 w 中录制宏（您可以使用任何寄存器）
3.  `8f,a`按回车键，离开插入模式，然后再按`q`一次
4.  `@w`根据需要多次重播宏。我确信有一种聪明的方法可以自动重播宏的次数，但我不确定如何。您也可以按`@@`运行最近运行的宏。

正如@zanegray 所发布的，正则表达式也有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T22:15:14.450

这不会赢得任何 vim 高尔夫比赛，但我喜欢用简单的步骤来思考这样的问题。

1.  将每个元素放在自己的行上。
2.  一次加入 8 条线路
3.  进行任何必要的手工清理

为此，请运行以下命令：

```
:s/, /,\r/g
:'[,']g/./j 8 
```

解释：

*   `:s/, /,\r/g`用返回 ( `\r`)替换逗号后的所有空格
*   `'[,']`是最近修改文本的范围。
*   `g/./{cmd}``{cmd}`将在匹配的所有行`.`（任何非空行）上执行命令
*   `j 8`是`join 8`表示加入 8 行的缩写

现在警告一句：即使超过了替换文本的结尾，这也会加入 8 行，`']`. 这可以通过更复杂的命令来克服，例如：`:'[,']g/./.,+6/,$/j 8`，但这对我的口味来说还不够简单。如果这个问题是一个真正的问题，我会将原始文本移动到一个新的缓冲区（通过`:new`），或者至少是当前缓冲区的底部。完成转换后将其移回原位。

了解更多信息

```
:h range
:h :j
:h :s
:h :g
:h '[ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T20:17:40.467

你可以用一个多部分的命令来做到这一点，这可能更容易让你绕着头……

制作一个在第 8 个逗号后添加分号的宏。

```
qq8f,lr;qu 
```

选择文本，然后执行该宏 1000 次（如果每行超过 8000 次，则执行更多）

```
:'<,'>norm 1000@q 
```

用换行符重新选择区域`gv`并将所有分号替换为换行符。

```
gv
:'<,'>s/;/\r/g 
```

这将在第 8 个逗号后添加一个分号，然后用换行符替换该分号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T12:43:24.227

所以这个解决方案是基于**Zanegray 的**解决方案和我的一些小调整：

```
:s/\(\w\+,\s\)\{8}/&\r/g 
```

Zanegray 的解决方案也可以像这样工作：

```
:s/\(\S\+\s\)/&\r/g 
```

因为空格的否定`\S`会包括`,`.

# javascript - 使用变量来搜索数组而不是静态字符串

> ID：11657131
> 
> 赞同：0
> 
> 时间：2012-07-25T19:28:55.203
> 
> 标签：javascript, arrays

好的，我所拥有的基本上是三个动态下拉框和一个二维数组。我让每个框将它们的值相加，然后我希望通过数组搜索值的总和，以在该值所在的行中提取第五个值。

```
var shape = document.getElementById("shape").value;
var dimension_one = document.getElementById("dimension_One").value;
var x = 'x';
var dimension_two = document.getElementById("dimension_Two").value;
var selected_beam = shape + dimension_one + x + dimension_two; // combine all values from text boxes 
alert(selected_beam);

for (i = 0; i < array_shapes.length; i++)
{
    if (array_shapes[i][2] == selected_beam) {
        alert('Area=' + array_shapes[i][5]);
        //Area= array_shapes[i][5]);
    }
} 
```

我知道选定的 _beam 给了我我想要的值，而且我也知道数组循环返回我想要的数组，但前提是我替换

```
if (array_shapes[i][2] == selected_beam) 
```

和

```
if (array_shapes[i][2] == "value I want to search for") 
```

所以我真正需要知道的是 - 为什么它只接受它作为一个字符串而不是我的 selected_beam 变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:44:54.680

根据您的数组值，您似乎需要将 var x 设为大写，例如：

```
var x = 'X'; 
```

如果我正确读取了您的阵列，那么光束大小看起来也位于阵列的元素 0 和 1 中，而不是 1 和 2，因此您可能不需要查找 array_shapes[i][2]，而是查找 array_shapes[i ][0] 或 array_shapes[i][1]

数组中的第一项位于索引值 = 0 处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:43:53.083

你需要做一些调试。

首先，您需要知道为什么`selected_beam`!== **"your value"**。

我建议你使用这个函数来比较字符串：

```
function compare( s1, s2 ){
  alert("s1: " + s1.toString());
  alert("s2: " + s2.toString());
  if (s1.toString() == s2.toString())
    return alert("true");
  return alert("false");
}

>>> compare(selected_beam,"your value"); 
```

问题可能就像在您的`selected_beam`.

因此，在您拥有`alert(selected_beam)`的地方，尝试比较字符串并查看它是否返回 true 或 false。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T19:35:21.213

您正在连接从文本框中解析的值。结果将是一个字符串

尝试做：

```
var selected_beam = parseInt(shape) + parseInt(dimension_one) + parseInt(x) + parseInt(dimension_two); 
```

# php - php gd 替代 alpha 通道？

> ID：11657134
> 
> 赞同：4
> 
> 时间：2012-07-25T19:28:57.907
> 
> 标签：php, image, alpha, gd2

由于某种原因，php gd 中的 alpha 通道被限制在 0-127 范围内，而 rgba 应该是 0-255。

现在，如果我们创建一个 alpha 大于 127 的颜色（例如，使用 imagecolorallocatealpha），它将改为使用默认的黑色......

我想知道是否有任何替代方法来制作可以充分利用 Alpha 通道的图片。我无法理解为什么 gd 会将 alpha 通道截断为 7 位，然后再次输出一个 8 位/通道的 png。

我也会考虑逐像素输出png。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T06:13:16.520

您需要检查 Imagemagick。 [http://www.imagemagick.org/](http://www.imagemagick.org/)

据我了解，GD 旨在生成图形，然后它被扩展为包括此类图像处理任务。Imagemagick 也广泛用于在线图像处理。

# google-drive-api - 在给定 ID 的情况下查找文件的路径

> ID：11657136
> 
> 赞同：7
> 
> 时间：2012-07-25T19:29:04.673
> 
> 标签：google-drive-api

我得到一个文件列表：

```
 String q = "title contains '"+query+"' and trashed = false";
    FileList list = drive.files().list().setQ(q).execute(); 
```

我想在 FileList 中找到每个匹配文件的路径。

我了解同一个文件可以出现在多个文件夹中。

根据我的发现，为文件创建路径的唯一方法是重复调用：

```
 drive.files().get(id).execute() 
```

然后从该文件的父列表中选择一个 ID，沿着树向上直到到达根。

在导航树时，我可以选择第一个父级，或者执行“BFS”直到找到根。

这真的是找到文件路径的唯一方法，还是我错过了 API 的某些部分？

如果这是唯一的方法，文件夹是否也可以有多个父级，从而使循环成为可能？

（/a/b/c => /a/b/c/b/c/b/c... 如果 b 有父母 a 和 c）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T21:12:13.987

由于文件夹（只是具有特定 MIME 类型的特殊驱动器文件）可以有多个父级，因此我建议使用 BFS 方法并确保您处理循环。

对于停止条件，您可以保存可以从[about.rootFolderId](https://developers.google.com/drive/v2/reference/about#rootFolderId)属性中检索的根文件夹的 ID。

# java - 无法在 Netbeans 现有项目中创建 SOAP 客户端

> ID：11657138
> 
> 赞同：1
> 
> 时间：2012-07-25T19:29:26.060
> 
> 标签：java, web-services, soap, netbeans, webservice-client

我正在尝试按照这些教程了解如何让 Netbeans (v 7.1.1) 自动创建 SOAP Web 服务客户端：

*   [http://netbeans.org/kb/docs/websvc/client.html](http://netbeans.org/kb/docs/websvc/client.html)
*   [http://blog.jdevelop.eu/2008/02/27/creating-soap-web-services-with-netbeans-6/](http://blog.jdevelop.eu/2008/02/27/creating-soap-web-services-with-netbeans-6/)

但我似乎在我的一些项目中找不到`Web Service from WSDL`文件类型（如下所示）。 ![来自 WSDL 文件类型的 Web 服务](../Images/7fe3886c718ab1e369cdeae7b24e1440.png)

我的一些项目确实显示了该文件类型，而有些则没有。我需要为其创建 SOAP 客户端的特定项目没有列出该文件类型。为什么会这样？

据我所知，它们都是 Web 应用程序项目（Struts2 + Spring + Hibernate 框架）。我从其他程序员创建的 Netbeans 项目中检查了它们是否存在颠覆性。最初的 Netbeans 项目可能是在以前版本的 Netbeans 中创建的——不确定这是否重要。

如何让`Web Service from WSDL`新文件类型显示在现有项目中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T06:51:29.190

“来自 WSDL 的 Web 服务”选项仅在您选择创建 Web 项目时出现。在桌面项目（Java）中，有一个选项“Web Service Client”，您可以在其中指定 wsdl URL，它将为您创建 Web 服务引用。

# c# - 使用 c# 的输出参数运行存储的 sql 过程

> ID：11657140
> 
> 赞同：3
> 
> 时间：2012-07-25T19:29:32.133
> 
> 标签：c#, sql, parameters

我意识到这个问题以前已经回答过了，我已经浏览了答案，试图找出我的方式的错误，但我处于停滞状态。我有以下应该返回唯一键的存储过程。

```
GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER OFF
GO
ALTER   PROCEDURE [dbo].[newid] @tablename AS CHAR(10), @fieldname AS CHAR(15) = '', @ioffset AS INT, @theID as int = 0 output 
AS
BEGIN
  SET NOCOUNT ON

 DECLARE @value AS INT
 IF @ioffset < 1 SET @ioffset = 1
 IF LEN(@fieldname) > 0
  BEGIN
    UPDATE id SET @value = CONVERT(INT,cvalue)+@ioffset-1, cvalue = CONVERT(CHAR,(CONVERT(INT,cvalue)+@ioffset)) WHERE UPPER(ctablename) = UPPER(@tablename) AND UPPER(cfieldname) = UPPER(@fieldname)
   SELECT @value
  END
 ELSE
  BEGIN
   UPDATE id SET @value = CONVERT(INT,cvalue)+@ioffset-1, cvalue = CONVERT(CHAR,(CONVERT(INT,cvalue)+@ioffset)) WHERE UPPER(ctablename) = UPPER(@tablename)
   SELECT @value 
  End
 SET NOCOUNT OFF
set @theID = @value
END 
```

我正在使用以下代码尝试访问该过程：

```
using(SqlConnection connection = new SqlConnection(connectionString))
using(SqlCommand command = new SqlCommand("dbo.NewID", connection)
     { CommandType = CommandType.StoredProcedure } )
{
     command.Parameters.Add( new SqlParameter("@tablename",table));
     command.Parameters.Add( new SqlParameter("@fieldname",field));
     command.Parameters.Add( new SqlParameter("@ioffset",1));
     SqlParameter key = new SqlParameter("@theID", SqlDbType.Int);
     key.Direction = ParameterDirection.Output;
     command.Parameters.Add(key);

     connection.Open();
     result = command.ExecuteNonQuery();
     connection.Close();
} 
```

key.Value 返回为空，结果为 -1，暗示运行该过程时出错。如果有人看到我可能做错了什么，我将非常感谢您的帮助。

请注意：我无法编辑实际过程，因为有几个类已经使用它。

非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:46:48.880

我将尝试更改此行：

```
command.Parameters.Add(new SqlParameter("@ioffset",1)); 
```

在

```
SqlParameter pOffset = command.Parameters.Add( new SqlParameter("@ioffset", SqlDbType.Int)); 
pOffset.Value = 1; 
```

您正在使用的构造函数中有一个已知错误。看看[MSDN 上的社区评论](http://msdn.microsoft.com/en-us/library/0881fz2y.aspx)
这个问题已经通过`SqlParameter.AddWithValue`去除标准构造函数歧义的新方法得到了一定程度的解决

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T19:26:43.137

* * *

解决

感谢我收到的所有回复。我接受了史蒂夫的建议，并从 SQL Management Studio 运行了该过程，但在那里也遇到了问题。在摆弄了我的输入之后，我发现我正在使用

`String table = "dbo.tablename";`

当我将其更改为

`String table = "tablename";`

一切都开始按预期工作。

这对我来说是一个愚蠢的错误，原因是对 SQL 的掌握不够牢固。再次感谢大家的精彩建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:50:19.810

```
 command.Parameters.Add( new SqlParameter("@tablename",table));
 command.Parameters.Add( new SqlParameter("@fieldname",field));
 command.Parameters.Add( new SqlParameter("@ioffset",1)); 
```

如果您像这样添加到参数列表中，您应该指定参数的类型。

或者你可以这样做，这可能会起作用：

```
 command.Parameters.AddWithValue("@tablename",table);
 command.Parameters.AddWithValue("@fieldname",field);
 command.Parameters.AddWithValue("@ioffset",1); 
```

尝试一下。

# wordpress - xampp apache没有运行

> ID：11657150
> 
> 赞同：0
> 
> 时间：2012-07-25T19:30:09.273
> 
> 标签：wordpress, xampp

我想在 localhost 上安装 wordpress

我已经下载并安装了**XAMPP**。

我已经下载了 wordpress 3.4.1 并将其放在 htdocs 文件夹中。我将其重命名为 demo_folder。

当我在导航栏**localhost/demo_folder**中键入时， 它显示**无法连接**页面。

如您所见，apache 没有运行，如图所示。

![在此处输入图像描述](../Images/464269f2d6175bd3ae42978653c560ed.png)

当我点击开始时它没有开始

我不知道为什么？

谁能帮我吗？？？

**编辑1**

下面是 netstat -an cmd 截图

![在此处输入图像描述](../Images/c820ca85f6cd3155dd2f8fc3ece692c6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:40:16.837

这是 XAMPP/Windows 的一个相当普遍的问题。通常的怀疑是在端口 80 上运行了另一个应用程序，您应该终止它。也请使用[网络](https://www.google.com/search?q=xampp%20apache%20wont%20start)，有关此主题的信息非常丰富。

要查看所有当前打开的端口和使用该端口的进程的 PID，请打开**cmd**并运行

```
> netstat -o 
```

这应该有助于更改 Apache 运行的端口：[http](http://www.geckoandfly.com/7491/xampp-apache-wont-start-change-port-to-listen-85/) ://www.geckoandfly.com/7491/xampp-apache-wont-start-change-port-to-listen-85/ 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:41:40.900

如果您使用的是 Windows 7，请关闭 Web 部署代理服务。那应该清除端口 80。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:42:19.343

XAMPP 在 Windows 上确实存在一些问题。您也可以尝试使用 WAMP。它似乎更容易安装和使用。

至于 XAMPP，请尝试确保没有其他任何东西在使用端口 80。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T20:57:42.720

您似乎已尝试多次安装 XAMP 或 PORT 80 已被其他应用程序使用。如果您确定其他应用程序未使用端口 80，请尝试以下操作：

关闭 XAMP 并运行并输入 services.msc 并找到名为 Apache 2.xx 的服务，然后转到其属性并获取它的确切名称。例如，mysql 服务名称是 mysql。

找到服务名称后，以管理员权限打开 cmd 并键入 sc delete apache 这里是删除服务名称的手册： [http://technet.microsoft.com/en-us/library/cc742045(v=ws. 10).aspx](http://technet.microsoft.com/en-us/library/cc742045(v=ws.10).aspx)

删除服务名称后，尝试打开 XAMP 并单击 Apache 旁边的开始，希望它现在可以运行。

如果上面没有任何效果，我见过的大多数情况 Skype 都是问题所在：

转到工具>选项>高级>连接

取消勾选使用端口 80 进行传入连接

# paypal - paypal沙盒设置卖家账户立即购买

> ID：11657159
> 
> 赞同：1
> 
> 时间：2012-07-25T19:30:26.160
> 
> 标签：paypal, sandbox

好的，所以我在沙盒中创建了我的买家和卖家账户，我选择卖家账户并按下底部“进入沙盒测试站点”的黄色按钮 - 一个新窗口打开并显示我已登录，我想去商家服务创建一个立即购买按钮来测试我的网站，但是当我按下顶部的“业务”选项卡时，它说找不到页面。

（我已经尝试注销，然后使用新电子邮件登录，其中包含他们制作的数字，以及他们给你的密码，但 id 无法识别它）

这是一个错误还是我做错了什么？

# mysql - 为什么 Rails (3+) 仍然不支持存储过程？

> ID：11657160
> 
> 赞同：10
> 
> 时间：2012-07-25T19:30:25.983
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, stored-procedures, software-design

我熟悉 Ruby on Rails、DB(MS) 驱动程序和存储过程之间长期存在的爱恨交织关系，我从 2.3.2 版开始就一直在开发 Rails 应用程序。

但是，每隔一段时间就会出现这样一种情况，即 SP 只是比在（慢得多的）应用程序级别上组合数据更好的选择。具体来说，运行结合了来自多个表的数据的报告通常更适合 SP。

为什么存储过程仍然如此糟糕地集成到 Rails 或 MySQL gem 中。我目前正在使用 Rails 3.0.10 和 MySQL2 gem 0.2.13 开发一个项目，但据我所知，即使是最新的 Edge Rails 和 MySQL gem 0.3+ 在使用 SP 时仍然会发脾气。

一直存在并且仍然存在的问题是调用 SP 后数据库连接丢失。

```
>> ActiveRecord::Base.connection.execute("CALL stored_proc")
=> #<Mysql::Result:0x103429c90>
>> ActiveRecord::Base.connection.execute("CALL stored_proc")
ActiveRecord::StatementInvalid: Mysql::Error: Commands out of sync; 
[...]
>> ActiveRecord::Base.connection.active?
=> false
>> ActiveRecord::Base.connection.reconnect!
=> nil
>> ActiveRecord::Base.connection.execute("CALL proc01")
=> #<Mysql::Result:0x1034102e0>
>> ActiveRecord::Base.connection.active?
=> false 
```

从技术上讲，这是一个很难解决的问题，还是 Rails 的设计选择？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T09:17:06.953

rails 支持存储过程。您得到的不同步错误是因为`MULTI_STATEMENTS`在 Rails 中默认情况下未启用 MySQL 的标志。此标志允许过程返回超过 1 个结果集。

有关如何启用它的代码示例，请参见此处：[https ://gist.github.com/wok/1367987](https://gist.github.com/wok/1367987)

存储过程可与 MS SQL Server 一起使用。

我在几乎所有基于 mySQL 和 SQL Server 的 rails 项目中都使用了存储过程，但没有任何发布。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-27T17:13:42.793

这是为了让 postgres 执行一个返回 MyClass 实例的存储过程。

```
sql=<<-SQL
select * from my_cool_sp_with_3_parameters(?, ?, ?) as 
foo(
  column_1 <type1>,
  column_2 <type2>
)
SQL

MyClass.find_by_sql([sql, param1, param2, param3]); 
```

将 foo() 中的列列表替换为模型中的列和存储过程结果。我确信这可以通过检查类的列来通用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-17T22:42:49.773

那些遇到同步错误的人可能有产生多个结果的程序。你需要做这样的事情来处理它们：

```
raise 'You updated Rails. Check this duck punch is still valid' unless Rails.version == "3.2.15"
module ActiveRecord
  module ConnectionAdapters
    class Mysql2Adapter
      def call_stored_procedure(sql)
        results = []
        results << select_all(sql)
        while @connection.more_results?
          results << @connection.next_result
        end
        results
      end
    end
  end
end 
```

像这样调用：

```
ActiveRecord::Base.connection.call_stored_procedure("CALL your_procedure('foo')") 
```

# php - 显示数据库中的条目，从最新到最旧列出它们并在一定数量后停止？

> ID：11657162
> 
> 赞同：-1
> 
> 时间：2012-07-25T19:30:26.487
> 
> 标签：php, mysql, database, post, blogs

我的数据库中有以下表格：

1.  ID
2.  标题
3.  标题
4.  内容
5.  日期
6.  标签
7.  用户名
8.  像
9.  不喜欢
10.  评论

我已经连接了数据库，以便它显示行中的内容，但我不知道如何制作它，以便每次创建新条目时它都会生成并列出一个“发布块”。我还想将它们从最新帖子到最旧帖子列出，同时将帖子限制为每页 10-20 个。

```
<?php

$connect = mysql_connect('localhost','root','','andrewryan') or die('error connection');

mysql_select_db('andrewryan');

$query = "Select * FROM entry";
$result = mysql_query($query);
$row = mysql_fetch_array($result);

$username = $row['username'];
$title = $row['title'];
$heading = $row['heading'];
$content = $row['content'];
$tags = $row['tags'];
$like = $row['like'];
$dislike = $row['dislike'];
$comment = $row['comment'];
$date = $row['date'];
?> 
```

我还有另一个页面，只有一个 html 块。这是 post 框架，所有变量都在需要的地方给出。如果有帮助，可以在此链接中找到有关我要做什么的任何参考：[这里](http://andrewryan.me)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:43:21.587

1.  选择您有兴趣获取的所有字段。
2.  使用 DATE_FORMAT 函数格式化日期字段并分配给新别名。我将其命名为 ndate。
    1.  然后按日期订购

SELECT username,title,heading,content,tags,like,dislike,comment,DATE_FORMAT(date, '%d-%M-%Y') AS ndate FROM entry ORDER BY ndate

获取日期为 $row['ndate']

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:45:32.507

至于查询：

```
// Tildes on date since it is a keyword and some databases will error out without them
// Order by date is if you are using a compatible storing: unix timestamp or DateTime field
$query = "Select * FROM entry ORDER BY `date` DESC";
$result = mysql_query($query);
$rowCount = 0;
while($row = mysql_fetch_array($result)) {
    $username[$rowCount] = $row['username'];
    $title[$rowCount] = $row['title'];
    $heading[$rowCount] = $row['heading'];
    $content[$rowCount] = $row['content'];
    $tags[$rowCount] = $row['tags'];
    $like[$rowCount] = $row['like'];
    $dislike[$rowCount] = $row['dislike'];
    $comment[$rowCount] = $row['comment'];
    $date[$rowCount] = $row['date'];
    $rowCount++;
} 
```

这是就显示帖子而言：

```
// limit is used to show the max posts per page.
$limit = 20;

//The following for is for paging
for($i = 1; $i <= $numofpages; $i++){
    if($i == $page){
        echo $i . " ";
    }else{
        echo "<a href='page.php?page=" . $i . "'>" . $i . "</a> ";
    }
}

// The following is to show your post blocks
for($j = 0; $j < $limit; $j++){
    //This will give you the appropriate post for the page
    $temp = $j + (($page * $limit) - $limit);
    // Your code to show your post blocks
    echo $username[$temp]; //For example, just format for your site layout.
} 
```

# ios - 右键单击菜单图标

> ID：11657163
> 
> 赞同：2
> 
> 时间：2012-07-25T19:30:27.907
> 
> 标签：ios, cocoa-touch

我将如何做到这一点，以便当用户在菜单项上单击鼠标右键、控制单击或命令单击时，它会显示一个菜单，但如果他们只是单击执行一个操作

我希望它做的类似于咖啡因： [咖啡因](http://itunes.apple.com/us/app/caffeine/id411246225?mt=12)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-10T06:08:46.243

可以根据需要创建鼠标事件并在那里添加选项。更多详情搜索[http://net4attack.blogspot.com/](http://net4attack.blogspot.com/)

# jquery - Fancybox 左右拖动窗口

> ID：11657167
> 
> 赞同：-2
> 
> 时间：2012-07-25T19:30:44.000
> 
> 标签：jquery, fancybox, drag

如何通过单击标题元素来拖动fancybox 灯箱窗口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:51:35.917

是的，这是可能的。这是一个可以帮助您入门的好资源：[draggable fancybox](http://jquery.diaz-cornen.com/fancybox/index_dragfancybox.html)

# iphone - iPhone - 使用触摸自定义动态绘图，如“绘图”游戏 OpenGL 或核心图形？

> ID：11657170
> 
> 赞同：0
> 
> 时间：2012-07-25T19:30:50.130
> 
> 标签：iphone, opengl-es, drawing, core-graphics, quartz-2d

我正在尝试进行动态绘图，在手指沿屏幕移动的任何地方绘制一个粒子，就像在游戏“Draw Something”中一样。

我的目的不是制作游戏，但我需要这种行为用于我正在制作的另一个应用程序。

基本上，我正在寻找的行为是 Apple 示例代码 GLPaint 所做的，用手指进行简单绘图。

现在的问题是，我知道这可以通过 OpenGL 来完成（GLPaint 示例应用程序可以做到这一点），但是我是 OpenGL 的新手，我想使用 Core Graphics，因为它只是 2D 绘图。

是否可以仅使用核心图形来执行此操作？如果是这样，性能会受到影响吗？一些使用 Core Graphics 的示例代码将不胜感激。

在 Core Graphics 中执行此操作以一遍又一遍地绘制粒子的最佳方法是什么？

谢谢，

奥斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:12:08.683

你有没有考虑过使用 Cocos2D 之类的东西来实现 OpenGL 绘图？上手非常直观。

很抱歉，我不知道使用 CoreGraphics 会变得多么容易/困难/性能。

# android - 如何在没有用户交互的情况下在 Android 上以编程方式安装 CA 证书

> ID：11657172
> 
> 赞同：25
> 
> 时间：2012-07-25T19:30:50.073
> 
> 标签：android, android-intent, x509certificate, android-wifi

我正在尝试在不提示用户的情况下安装证书。我知道这不是好的做法，但这就是 PM 想要的。

使用[`KeyChain.createInstallIntent()`](http://developer.android.com/reference/android/security/KeyChain.html#createInstallIntent%28%29)，我可以通过调用 Android 来启动证书安装对话框`startActivity`。但是，当我将意图传递给 时`sendBroadcast`，什么也没有发生。也许出于安全原因该平台不支持此功能？

```
String CERT_FILE = Environment.getExternalStorageDirectory() + "/test/IAT.crt";
Intent intent = KeyChain.createInstallIntent();
try {
    FileInputStream certIs = new FileInputStream(CERT_FILE);
    byte [] cert = new byte[(int)certFile.length()];
    certIs.read(cert);
    X509Certificate x509 = X509Certificate.getInstance(cert);
    intent.putExtra(KeyChain.EXTRA_CERTIFICATE, x509.getEncoded()); 
    intent.putExtra(KeyChain.EXTRA_NAME, "IAT Cert");
    EapActivity.this.startActivityForResult(intent, 0);  // this works but shows UI
    EapActivity.this.sendBroadcast(intent);  // this doesn't install cert
} catch (IOException e) { 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-26T03:11:45.190

如果您具有系统权限，则只能静默安装证书。显示确认对话框是故意的，因为信任证书可能会产生严重后果——Android 可以愉快地打开网络钓鱼站点而不会发出警告等。也就是说，ICS/JB 中的对话框非常糟糕——它不会告诉你什么您正在安装的证书以及谁颁发的证书，只是它是 CA 证书，这很明显。

因此，要么使用公共`KeyChain`API 并用于`startActivity()`获取确认对话框，要么在将设备处理给用户之前预先配置设备。

更新：在 Android 4.4 中，`DevicePolicyManager`有一个隐藏的 API ( `installCaCert`)，允许您静默安装证书。您需要`MANAGE_CA_CERTIFICATES`权限，即`signature|system`，因此对于用户安装的应用程序仍然不可行。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-25T20:01:45.967

> 使用[KeyChain.createInstallIntent()](http://developer.android.com/reference/android/security/KeyChain.html#createInstallIntent%28%29)，我可以通过调用 startActivity 让 Android 启动证书安装对话框。但是，当我将意图传递给 sendBroadcast 时，什么也没有发生。

`Intent`您将传递给的对象很少`startActivity()`会与`sendBroadcast()`. 它们是作为系统的准消息总线的独立通道`Intent`。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-07-08T02:16:54.913

对于非系统应用程序开发人员 - 简单的答案是没有用户交互就无法完成。

对于系统应用程序开发人员，我找到了以下解决方案，注意您必须使用系统用户 ID 运行应用程序并使用系统密钥对应用程序进行签名，否则服务将拒绝您安装证书的尝试。

**第 1 步**-*创建接口*

在您的项目中创建一个新包：***android.security***，然后将[IKeyChainService.aidl](https://github.com/android/platform_frameworks_base/blob/master/keystore/java/android/security/IKeyChainService.aidl)复制到此包中。

**第 2 步**-*绑定到服务并安装证书*

Activity 给出了如何安装 CA 证书的示例：

```
public class KeyChainTest extends Activity {

    private final Object mServiceLock = new Object();
    private IKeyChainService mService;
    private boolean mIsBoundService =false;

    private ServiceConnection mServiceConnection = new ServiceConnection() {
        @Override public void onServiceConnected(ComponentName name, 
                                                    IBinder service) {
            synchronized (mServiceLock) {
                mService = IKeyChainService.Stub.asInterface(service);
                mServiceLock.notifyAll();
                try {

                    byte[] result = YOUR_CA_CERT_AS_BYTE_ARRAY

                    //The next line actually installs the certificate
                    mService.installCaCertificate(result);

                } catch (Exception e) {
                    //EXception handling goes here
                }
            }
        }

        @Override public void onServiceDisconnected(ComponentName name) {
            synchronized (mServiceLock) {
                mService = null;
            }
        }
    };

    private void bindService() {
        mIsBoundService = bindService(new Intent(IKeyChainService.class.getName()),
                mServiceConnection,
                Context.BIND_AUTO_CREATE);
    }

    private void unbindServices() {
        if (mIsBoundService) {
            unbindService(mServiceConnection);
            mIsBoundService = false;
        }
    }

    @Override public void onDestroy () {
        unbindServices();
    }

    @Override
    protected void onStart() {
        super.onStart();
        // Bind to KeyChainService
        bindService();
    }
} 
```

我希望这对某人有所帮助-我花了很长时间才解决这个问题:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-02T14:54:30.657

根据[@ospider](https://stackoverflow.com/users/1061155/ospider)的回答，我设法以这种方式成功安装了证书：

```
adb shell mkdir -p /data/misc/user/0/cacerts-added
adb push certificate.cer /data/misc/user/0/cacerts-added/807e3b02.0

# Maybe these two lines are not strictly necessary...
adb shell chmod 644 /data/misc/user/0/cacerts-added/807e3b02.0
adb shell chown system:system /data/misc/user/0/cacerts-added/807e3b02.0 
```

我`807e3b02.0`通过手动安装我想要自动化的证书并查看Android如何保存它（whith `adb shell ls -l /data/misc/user/0/cacerts-added/`）获得了复制文件的名称（）

* * *

希望这有帮助。

问候。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-03-26T14:30:40.630

如果您有 root 权限，您可以将 certs 文件复制到`/data/misc/user/0/cacerts-added/`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-07-22T13:04:01.953

这个线程已经有点过时了，但是因为我偶然发现了同样的问题并且找不到任何适用于 Android O 或更高版本的“开箱即用”解决方案，我想我会分享我想出的并且效果很好的解决方案对我来说，在尝试将证书（CA 和其他证书）安装到 Android 受信任的凭据“用户”存储时：

```
// Supply context, e.g. from "Context context = getApplicationContext();"
// String fileName points to the file holding the certificate to be installed. pem/der/pfx tested.
RandomAccessFile file = new RandomAccessFile(fileName, "r");
byte[] certificateBytes = new byte[(int)file.length()];
file.read(certificateBytes);

Class<?> keyChainConnectionClass = Objects.requireNonNull(context.getClassLoader()).loadClass("android.security.KeyChain$KeyChainConnection");
Class<?> iKeyChainServiceClass  = Objects.requireNonNull(context.getClassLoader()).loadClass("android.security.IKeyChainService");

Method keyChainBindMethod = KeyChain.class.getMethod("bind", Context.class);
Method keyChainConnectionGetServiceMethod = keyChainConnectionClass.getMethod("getService");
Object keyChainConnectionObject = keyChainBindMethod.invoke(null, context);
Object iKeyChainServiceObject = keyChainConnectionGetServiceMethod.invoke(keyChainConnectionObject);

Method installCaCertificate = iKeyChainServiceClass.getDeclaredMethod("installCaCertificate", byte[].class);
installCaCertificate.invoke(iKeyChainServiceObject, certificateBytes); 
```

请注意，如果您想以这种方式静默安装证书，您的应用程序需要是系统应用程序，即它需要具有

```
android:sharedUserId="android.uid.system" 
```

在它的清单中声明。

干杯!

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-08-21T21:45:20.173

只有系统用户应用程序可以静默安装 CA 证书。不过，在 Lollipop 上，Google 通过 DevicePolicyManager 引入了静默证书管理 API，但您必须是 Android-for-Work 配置文件所有者或设备所有者。

# video-streaming - Kohana 3.2 冻结流媒体视频

> ID：11657176
> 
> 赞同：0
> 
> 时间：2012-07-25T19:30:53.803
> 
> 标签：video-streaming, kohana

我的麻烦是当我开始通过 kohana 3.2 孔网站流式传输视频时被冻结。换句话说：

1) 我通过输入 domain.com/stream/file.flv 开始流式传输

2）文件开始下载（或在flowplayer中播放）

3) 我无法在视频中搜索，我无法访问任何页面，例如 domain.com、domain.com/foo、domain.com/bar，我对我的域无能为力。

4）解决问题的唯一方法是重新启动浏览器或等待文件完全下载。

我的流功能在扩展控制器的分离控制器中。在这个函数中，我唯一要做的就是加载一个文件（没有会话，没有授权）。

谢谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:10:12.230

我想说这不是 Kohana 的问题，而是您的 Web 服务器的特定配置的问题。例如，它在任何时候只允许一个连接。

如果您有权访问它，则需要检查服务器配置，或询问服务器管理员。

您可以使用 Firebug 或 Chrome 的开发工具在 Network 选项卡上查看加载流程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T16:18:28.980

如果您使用本机会话处理程序，问题是每个`session_open()`客户端一次只能调用一个页面。因此，在流请愿结束之前，“冻结”请愿不会完成。

一种解决方案是使用数据库会话的插件（默认情况下在 Kohana 上提供），或者不要在流请求上激活会话（仅在可以公开的情况下应用）。

希望能帮助到你。

# jquery - 如何在选择器中使用“AndAlso”？

> ID：11657178
> 
> 赞同：4
> 
> 时间：2012-07-25T19:30:59.123
> 
> 标签：jquery, jquery-selectors

我希望选择输入和选择类型的所有元素，但前提是它们的 id 不为空。

我得到了这个：

```
$('input, select') 
```

对于元素类型和这个：

```
$(*[id]) 
```

对于非空 ID。我不知道如何将它们组合成：

```
((isSelect || isInput) && id != null) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T19:33:23.710

您可以在每个元素选择器之后添加属性选择器：

```
var elems = $('input[id], select[id]'); 
```

这是一个[工作示例](http://jsfiddle.net/jamesallardice/jCgat/)。

另请注意（`querySelectorAll`至少在支持 的浏览器中）这应该比使用[快得多](http://jsperf.com/jq-attrselector-vs-filter)`.filter()`：

![在此处输入图像描述](../Images/8430271bcc8dac21f435026ec8b547e5.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T19:33:36.533

选择所有输入并选择元素，然后将它们过滤为仅具有 id 的输入和选择。

```
$("input,select").filter("[id]"); 
```

# sas - 创建垂直明细表

> ID：11657179
> 
> 赞同：1
> 
> 时间：2012-07-25T19:31:00.217
> 
> 标签：sas

我正在寻找一种在 SAS 中创建垂直表的方法，其中每个变量都被视为行（而不是每行都是观察值）。

例如，假设我有一些公司的数据，其中一些比其他更重要。很容易让 proc 报告吐出一个包含一些变量的汇总表，如下所示：

```
Name Price Shares MarketCap
co1    $5    100    $500
co2    $1    100    $100
co3    $2    200    $400 
```

在此之后我想做的是为每家公司打印一页详细信息，该页面本质上是一个表格，其中有一列用于描述，一列用于值（可能还有第三列用于计算）。

```
Company 1

   Location:   CA
        CEO:   Bob Johnson
   Industry:   Semiconductors

     Shares:   100
Share Price:   $5
 Market Cap:   $500 
```

我能想到在 SAS 中执行此操作的唯一方法是基本上转置所有内容，创建一个具有标签（位置、股票价格等）的新字符变量和具有该值的第二个字符变量，然后创建一个两列按公司报告以获取每个页面。这很混乱，因为有些值是数字，而另一些是字符，因此要让它们显示在一列上，需要创建一个新的字符变量并用数字变量的文本版本填充它。

我认为必须有一种更简单的方法来创建垂直表，因为有很多简单的方法可以创建水平表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T18:13:52.313

还有这个解决方案可能更适合您的需求。

首先创建一个将用作模板的 HTML 文件。无论您想在哪里放置值，都可以使用宏变量作为占位符，如下所示：

```
<html>
<h1> My title is &title </h1><br>
Name: &name <br>
Value of Blah: &blah
</html> 
```

让它看起来像你喜欢的那样有吸引力。

接下来创建一个将导入 HTML 模板的宏，将占位符替换为实际值并将结果保存到新文件中：

```
/*****************************************************************************
**  PROGRAM: MACRO.RESOLVE_FILE.SAS
**
**  READS IN A FILE AND REPLACES ANY MACRO REFERENCES IN THE FILE WITH THE 
**  ACTUAL MACRO VALUES.  EG.  IF THE FILE WAS AN HTML FILE AND IT CONTAINED 
**  THE FOLLOWING HTML:
**
**    <TITLE>&HTML_TITLE</TITLE>
**
**  THEN THE PROGRAM WOULD READ THE FILE IN AND RESOLVE IT SO THAT THE OUTPUT
**  LOOKED LIKE THIS:
**
**    <TITLE>ROB</TITLE>
**  
**  ... WHEN THE MACRO VARIABLE "HTML_TITLE" EXISTED AND CONTAINED A VALUE OF 
**  "ROB".  THIS IS USEFUL WHEN YOU NEED TO CREATE "DYNAMIC" HTML FILES FROM 
**  SAS BUT DONT WANT TO DO IT FROM A DATASTEP USING PUT STATEMENTS.  DOING
**  IT THIS WAY IS MUCH CLEANER.
**
**  PARAMETERS: NONE
**
******************************************************************************
**  HISTORY:
**  1.0 MODIFIED: 22-JUL-2010  BY:RP
**  - CREATED. 
**  1.1 MODIFIED: 18-FEB-2011  BY:RP
**  - ADDED LRECL OF 32K TO STOP TRUNCATION
*****************************************************************************/
%macro resolve_file(iFileIn=, iFileOut=);
  data _null_;
    length line $32767;
    infile "&iFileIn" truncover lrecl=32767;
    file   "&iFileOut" lrecl=32767;
    input; 
    line = resolve(_infile_);
    len = length(line);
    put line $varying. len;
  run;
%mend; 
```

创建一些测试数据。还要创建一些命令来调用上述宏并传入数据集中的值：

```
data mydata;
  attrib name length=$10 format=$10\.    label='FirstName'
         blah length=6   format=comma6\. label='SomeValue'
         cmd1  length=$1000
         cmd2  length=$1000
         ;

  title = 1; 
  name = "Rob" ; 
  blah = 1000; 
  cmd1 = cats('%let title=',title,';',
              '%let name=',name,';',
              '%let blah=',blah,';');
  cmd2 = cats('%resolve_file(iFileIn=c:\template.html, iFileOut=c:\result',title,'.html);');
  output;

  title = 2; 
  name = "Pete"; 
  blah = 100 ; 
  cmd1 = cats('%let title=',title,';',
              '%let name=',name,';',
              '%let blah=',blah,';');
  cmd2 = cats('%resolve_file(iFileIn=c:\template.html, iFileOut=c:\result',title,'.html);');
  output;
run; 
```

用于`call execute`运行我们在之前的数据集中创建的 cmd1 和 cmd2。我们必须一次只在 1 行上执行调用执行，以便使用正确的宏变量，所以使用循环来执行。首先使用您喜欢的技术计算数据集中的行数：

```
proc sql noprint;      
  select count(*) into :nobs from mydata;
quit; 
```

然后遍历数据集，一次执行一个命令，并将每一行构建到一个新文件中：

```
%macro publish;
  %local tmp;
  %do tmp = 1 %to &nobs;
    data _null_;
      set mydata(firstobs=&tmp obs=&tmp);
      call execute (cmd1);
      call execute (cmd2);
    run;
  %end;
%mend;
%publish; 
```

这应该够了吧。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:37:08.663

也许我错过了一些东西，但你没有回答你自己的问题吗？它应该很简单：

创建一些示例数据。确保每一列都应用了格式和标签：

```
data mydata;
  attrib name length=$10 format=$10\.    label='FirstName'
         blah length=6   format=comma6\. label='SomeValue';

  bygroup = 1; name = "Rob" ; blah = 1000; output;
  bygroup = 2; name = "Pete"; blah = 100 ; output;
run; 
```

转置数据使其变高：

```
proc transpose data=mydata out=trans;
  by bygroup;
  var _all_;
run; 
```

打印出来：

```
data _null_;
  set trans2;
  by bygroup;

  if first.bygroup then do;
    put bygroup;
    put "------";
  end;
  put _label_ ":" value;
run; 
```

结果：

```
1
------
FirstName :Rob
SomeValue :1,000
2
------
FirstName :P
SomeValue :100 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-27T15:10:49.413

那么这些解决方案之一怎么样......在 Bases SAS 中打开一个表以查看它。转到视图-> 表单视图。这会将其置于您要求的布局中。它可能看起来不完全是您想要的方式，但它是一个快速的选择。

另一种方法是自己编写。创建一个宏，该宏将数据集和您想要指定的任何其他参数作为参数，并使用 ODS、put 语句或您想要的任何其他技术显示它。

我不知道 SAS 中有任何其他内置方法可以做到这一点。

# objective-c - 在objective-c中显示和选择支持的分辨率？

> ID：11657185
> 
> 赞同：0
> 
> 时间：2012-07-25T19:31:15.340
> 
> 标签：objective-c, cocoa, nsstatusitem

我有点恼火的是，Mountain Lion 中的显示菜单不再允许您调整屏幕分辨率。

所以我正在使用 NSStatusItem 开发一个简单的 menulet，但我从未真正深入研究过调整显示分辨率的世界。

如何创建一个简单的菜单来列出屏幕支持的分辨率并在您选择它时更改为该分辨率？

# javascript - 简单的javascript onclick不起作用

> ID：11657186
> 
> 赞同：-2
> 
> 时间：2012-07-25T19:31:16.440
> 
> 标签：javascript

这是小提琴：

[http://jsfiddle.net/5UXkA/](http://jsfiddle.net/5UXkA/)

HTML：

```
<html>
<body>
<input type="button" value="button" onclick="test()" />
</body>
</html>​ 
```

JavaScript：

```
function test() {
    alert('hi');
}​ 
```

正如预期的那样，它没有提醒数据！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T19:35:57.150

抛弃 html 和 body 标签，从 onload 更改为 nowrap。见[http://jsfiddle.net/5UXkA/5/](http://jsfiddle.net/5UXkA/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:38:35.593

我发现的问题在小提琴中。当你的小提琴调用它时，你的函数`test()`没有定义。

我将您的 javascript 放在 html 中的新头标签中，它可以正常工作。出于使用小提琴的目的，只需使用 ' `onDomReady`' 而不是`onLoad`. [http://jsfiddle.net/5UXkA/10/](http://jsfiddle.net/5UXkA/10/)

# java - 如何通过暂停/恢复支持上传到 S3？

> ID：11657187
> 
> 赞同：7
> 
> 时间：2012-07-25T19:31:27.133
> 
> 标签：java, ruby-on-rails, django, amazon-s3, amazon-web-services

我想知道如何通过“暂停和恢复”支持将文件上传到 Amazon S3？（通过网络浏览器）。

是否有可用的示例 Web 应用程序？任何编程语言/框架都可以。

提前致谢。

**解决方案**

我实现了以下应用程序。[Github 链接](https://github.com/interpegasus/condo_example)。

它基于[Condominios](http://cotag.github.com/Condominios/)的示例应用程序和 gem 。

归功于[https://github.com/cotag/](https://github.com/cotag/)伟大的宝石和工作。

特征：

```
- Pause / Resume support ~ 5MB chunks
- Large File Upload
- Progress Bar
- No Java Applet / No Flash
- Registration system via devise 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-29T03:44:30.700

您应该使用分段上传 API 构建它。这是Java的链接：

[http://docs.amazonwebservices.com/AmazonS3/2006-03-01/dev/mpListPartsJavaAPI.html](http://docs.amazonwebservices.com/AmazonS3/2006-03-01/dev/mpListPartsJavaAPI.html)

这个想法是启动多部分上传，开始上传部分（其大小将基于客户端的传输速率），并且每当用户暂停上传时，停止上传部分。您不会有逐字节的暂停粒度，但我怀疑用户不会注意到这一点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-08T00:19:48.987

我实现了以下应用程序。Github 链接：

```
https://github.com/interpegasus/condo_example 
```

它基于以下示例应用程序和 gem：

```
http://cotag.github.com/Condominios/ 
```

归功于[https://github.com/cotag/](https://github.com/cotag/)伟大的宝石和工作。

特征：

*   暂停/恢复支持 ~ 5MB 块
*   大文件上传
*   进度条
*   没有 Java 小程序/没有 Flash
*   通过设计注册系统

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-26T05:54:34.167

那一个很大。很长一段时间以来，我一直在寻找一个干净的答案。我什至构建了一些东西，但它总是归结为为您的应用程序使用一种媒介。我认为我找到的最佳解决方案是使用它。这确实是一个非常简单的想法，最重要的是它只使用少量的闪存来使用。

[S3 Heroku Flash 上传器](http://s3swfuploader.heroku.com/)

[Github 源代码](https://github.com/nathancolgate/s3-swf-upload-plugin)

但是，不利的一面是您将无法成功上传超过 512 MB 的任何内容，在那之后会出现某种兑现。松动的轨道什么的。我认为我能想到的唯一其他解决方案是构建一个处理上传到服务器的 Java 应用程序。至少那时你有一个更稳定的连接，不必担心浏览器的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-11T20:26:20.240

Evaporate js 是一个非常适合这个特定任务的插件。

看看这里：

[https://github.com/TTLabs/EvaporateJS](https://github.com/TTLabs/EvaporateJS)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-29T02:34:01.737

你需要一个像这样的客户端：[https ://github.com/23/resumable.js](https://github.com/23/resumable.js)

和一个服务器：

1.  将块写入某处（本地或 S3）
2.  将完全组装的文件上传到 S3。

您将无法直接从浏览器到 S3。

更新：S3 现在支持 CORS。 [http://aws.amazon.com/about-aws/whats-new/2012/08/31/amazon-s3-announces-cross-origin-resource-sharing-CORS-support/](http://aws.amazon.com/about-aws/whats-new/2012/08/31/amazon-s3-announces-cross-origin-resource-sharing-CORS-support/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T05:36:57.087

您是否尝试过[S3Fox](https://addons.mozilla.org/en-US/firefox/addon/amazon-s3-organizers3fox/) firefox 插件？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-01T11:07:52.853

它具有 S3 的前端和后端实现

[https://medium.com/@selvakumar.ponnusamy/resumable-file-upload-with-s3-ce039cbc8865](https://medium.com/@selvakumar.ponnusamy/resumable-file-upload-with-s3-ce039cbc8865)

# android - 使用内存中的sqlite android

> ID：11657191
> 
> 赞同：19
> 
> 时间：2012-07-25T19:31:36.773
> 
> 标签：android, sqlite, in-memory

我一直在阅读，浏览，搜索很多关于此的内容，我已经多次来回交叉使用stackoverflow，并且我设法尽可能地缩小我的问题。

我唯一不明白的是如何充分使用内存中的 SQLite 数据库。

这是我的情况 - 我有一个加密的 SQLite 数据库，我在加载我的应用程序期间解密它（这部分肯定有效）。我与数据库交互的类肯定适用于普通数据库。因此，简而言之，从手机内部存储器加载的普通数据库完美无缺，但我不确定如何或在何处将解密的数据库存储在内存中，以便将其解释为普通数据库。

我想我应该输入`null`而不是名称`super(context, null, null, 3);`并使用`:memory:`而不是路径`SQLiteDatabase.openDatabase()`，但我仍然不完全理解。它说它找不到`android_metadata`表，但我确定数据库应该是这样。

希望我对此很清楚:)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-25T20:08:05.713

`name`如果是[.SQLiteOpenHelper()](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#SQLiteOpenHelper%28android.content.Context,%20java.lang.String,%20android.database.sqlite.SQLiteDatabase.CursorFactory,%20int%29)将创建一个内存数据库`null`。请注意，它将在您调用时创建`getWritableDatabase()`。

然后你应该插入你的数据。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-25T20:37:54.593

**您（或框架）使用以下**方法之一创建数据库：

*   `SQLiteDatabase.create()`
*   `SQLiteDatabase.openDatabase()`
*   `SQLiteDatabase.openOrCreateDatabase()`

第一个选项是创建仅内存数据库的唯一方法，其他两个打开或创建数据库文件。

因此，如果您正在使用`SQLiteOpenHelper()`并传递`name`as `null`，框架调用`SQLiteDatabase.create(null)`，因此您将获得一个仅存在于内存中的数据库（它在被调用时死亡`close()`）。无需调用其他直接方法之一。而是致电`getReadableDatabase()`或`getWritableDatabase()`从您的助手那里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-27T08:52:49.910

您必须小心使用内存，因为一旦数据库连接丢失，您的数据就会丢失。确保您的数据库实例未关闭

[https://www.sqlite.org/inmemorydb.html](https://www.sqlite.org/inmemorydb.html)

# javascript - Chrome 的分析器中作为主要时间接收器显示的“获取长度”是什么？

> ID：11657193
> 
> 赞同：3
> 
> 时间：2012-07-25T19:31:44.717
> 
> 标签：javascript, google-chrome

我有一个加载时间过长的大型网页（内部，正在开发中）。具体来说，加载 2.3MB 的 HTML 页面会在大约 3 秒内显示样式化的内容，然后浏览器会锁定超过 20 秒，然后才能进行交互。

使用 Chrome 的时间轴，我可以看到这完全是由于脚本作为`load`事件的一部分被启动： [![30 秒的时间线视图](../Images/0d8d2e53e69ad9d74cce7d0a2359a00d.png)](https://i.stack.imgur.com/bH4hH.png)

但是，当我分析页面加载时，我看到了这个（点击查看完整尺寸）： [![轮廓](../Images/59d08644ec157d4e0b30316caec7acb3.png)](https://i.stack.imgur.com/4zDSF.png)

32.01 秒用于一些没有相关源代码的匿名函数。作为其中的一部分，函数“get length”（也没有相关的源代码）花费了 18.87 秒。

是什么`get length`？探查器是否没有提供关于时间花费的更好信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:35:33.933

这是对表单的长度属性（或任何其他具有本机长度属性的 DOM 元素）的调用。

这是我使用的示例代码

```
<!DOCTYPE html>
<html>
<head>
    <title></title>
    <script type="text/javascript" src="js/lib/jquery.js"></script>
    <script type="text/javascript">
        var doStop = false;

        $(function(){
            //recursively append dot-button to the form and show its length    
            function a(counter) {
                var $w = $('#wrapper').append($('<button>.</button>'));
                $('#txt')[0].innerHTML = 'Form length: '+$w[0].length;
                if (!doStop)
                    setTimeout(function(){ a(counter+1)}, 3);
            }

            $('#stopper').click(function(){ doStop = true; });

            a(0); //let's go now
        });
    </script>
</head>
<body>
<button id="stopper">stop it</button>
<div id="txt"> </div>
<form id="wrapper"></form>
</body>
</html> 
```

我在 Chrome 分析器中得到以下信息：

```
| 0.08% | 0.08% | get length | 
```

我在它下面确实有一个箭头可以向下钻取函数 a()。

# php - php imap headersr message_id 到 FT_UID 或 in_reply_to 到 FT_UID

> ID：11657195
> 
> 赞同：0
> 
> 时间：2012-07-25T19:31:56.073
> 
> 标签：php, imap, procmail

如果我有原始**message_id ，有什么方法可以找到消息 FT_UID**

*   `(bfd14a45-88ef-4404-b7fd-dbbf8ec8241b@domain.com)`?
    或**in_reply_to**原始 id
    `(20120717101453.4074313004BD@zumance.pregmatch.org) to FT_UID?`

或者有什么方法可以让我通过**procmail**以某种方式传递消息并跟踪这些事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-06T10:21:30.533

尝试返回消息的 UID 号的 imap_uid 函数

```
int imap_uid ( resource $imap_stream , int $msg_number ) 
```

在这里，$imap_stream 由 imap_open 返回

有关更多信息，请点击此链接[http://php.net/manual/en/function.imap-uid.php](http://php.net/manual/en/function.imap-uid.php)

# ruby-on-rails - 错误简单登录“未定义的方法‘键？’ 对于零：NilClass”

> ID：11657197
> 
> 赞同：0
> 
> 时间：2012-07-25T19:32:04.797
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

请帮我，我做了一个简单的登录，当我测试这个时出现这个错误。请问我如何解决这个错误？

UserController#login 中的 NoMethodError

未定义的方法“键？” 对于零：NilClass

```
 def login
    if request.post?
      if session[:user] = User.authenticate(params[:user][:login],params[:user][:password])
        flash[:message] = 'Voce esta Logado !'
        redirect_to_stored
      else
        flash[:warning] = 'Usuario e/ou Senha incorreta !'
      end
    end
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:38:39.780

这类问题已经得到解答。你应该在这里找到你的答案的解决方案。确保您阅读了所有步骤并检查您的用户模型以获取导致问题的所需验证。

[未定义的方法“键？” 对于零：NilClass](https://stackoverflow.com/questions/9952568/undefined-method-key-for-nilnilclass)

# sql-server-2008 - 优化使用函数的 SQL Server 存储过程？

> ID：11657201
> 
> 赞同：1
> 
> 时间：2012-07-25T19:32:24.093
> 
> 标签：sql-server-2008, tsql, query-optimization

我需要一些帮助来优化以下查询：

```
SELECT DISTINCT TOP (@NumberOfResultsRequested) dbo.FilterRecentSearchesTitles(OriginalSearchTerm) AS SearchTerms
FROM UserSearches
WHERE WebsiteID = @WebsiteID
AND LEN(OriginalSearchTerm) > 20
--AND dbo.FilterRecentSearchesTitles(OriginalSearchTerm) NOT IN (SELECT KeywordUrl FROM PopularSearchesBaseline WHERE WebsiteID = @WebsiteID)
GROUP BY OriginalSearchTerm, GeoID 
```

如果没有注释掉的行，它运行良好。我在 UserSearches.OriginalSearchTerm、WebsiteID 和 PopularSearchesBaseline.KeywordUrl 上设置了一个索引，但是在此行中查询仍然运行缓慢。

-- UPDATE -- 使用的函数如下：

```
 ALTER FUNCTION [dbo].[FilterRecentSearchesTitles]
(
    @SearchTerm VARCHAR(512)
)

RETURNS VARCHAR(512)

AS
BEGIN
    DECLARE @Ret VARCHAR(512)

    SET @Ret = dbo.RegexReplace('[0-9]', '', REPLACE(@SearchTerm, '__s', ''), 1, 1)
    SET @Ret = dbo.RegexReplace('\.', '', @Ret, 1, 1)
    SET @Ret = dbo.RegexReplace('\s{2,}', ' ', @Ret, 1, 1)
    SET @Ret = dbo.RegexReplace('\sv\s', ' ', @Ret, 1, 1)

    RETURN(@Ret)
END 
```

使用正[则表达式工作台](http://www.simple-talk.com/sql/t-sql-programming/tsql-regular-expression-workbench/)代码。

但是，正如我所提到的 - 如果没有当前注释掉的行，它运行良好。

还有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:38:44.053

我猜这`dbo.FilterRecentSearchesTitles(OriginalSearchTerm)`是一个函数。我的建议是查看将其重写为[表值函数](http://msdn.microsoft.com/en-us/library/ms191165%28v=sql.105%29.aspx)，以便您可以返回一个可以连接的表。

否则，您将为尝试返回的每一行调用该函数，这将导致您的问题。

如果你不能重写函数，那么为什么不创建一个只执行一次的存储过程，类似于这样：

```
SELECT DISTINCT TOP (@NumberOfResultsRequested) dbo.FilterRecentSearchesTitles(OriginalSearchTerm) AS SearchTerms
INTO #temp
WHERE WebsiteID = @WebsiteID

SELECT *
FROM #temp
WHERE SearchTerms NOT IN (SELECT KeywordUrl 
                            FROM PopularSearchesBaseline 
                            WHERE WebsiteID = @WebsiteID) 
```

然后在执行一次函数后将记录放入临时表中，然后在临时表上进行选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:24:36.370

在这种情况下，我可能会尝试使用[持久计算列：](http://msdn.microsoft.com/en-us/library/ms191250.aspx)

```
ALTER TABLE UserSearches ADD FilteredOriginalSearchTerm AS dbo.FilterRecentSearchesTitles(OriginalSearchTerm) PERSISTED 
```

您可能必须`WITH SCHEMABINDING`像这样添加到您的函数（和 RegexReplace 函数）中：

```
ALTER FUNCTION [dbo].[FilterRecentSearchesTitles]
(
    @SearchTerm VARCHAR(512)
)

RETURNS VARCHAR(512)

WITH SCHEMABINDING -- You will need this so the function is considered deterministic

AS
BEGIN
    DECLARE @Ret VARCHAR(512)

    SET @Ret = dbo.RegexReplace('[0-9]', '', REPLACE(@SearchTerm, '__s', ''), 1, 1)
    SET @Ret = dbo.RegexReplace('\.', '', @Ret, 1, 1)
    SET @Ret = dbo.RegexReplace('\s{2,}', ' ', @Ret, 1, 1)
    SET @Ret = dbo.RegexReplace('\sv\s', ' ', @Ret, 1, 1)

    RETURN(@Ret)
END 
```

这使您的查询看起来像这样：

```
SELECT DISTINCT TOP (@NumberOfResultsRequested) FilteredOriginalSearchTerm AS SearchTerms
FROM UserSearches
WHERE WebsiteID = @WebsiteID
AND LEN(OriginalSearchTerm) > 20
AND FilteredOriginalSearchTerm NOT IN (SELECT KeywordUrl FROM PopularSearchesBaseline WHERE WebsiteID = @WebsiteID)
GROUP BY OriginalSearchTerm, GeoID 
```

可以使用连接而不是`not in`，或者不同的索引（可能在计算列或某些覆盖索引上）来优化速度（如有必要）。此外，`DISTINCT`a`GROUP BY`对我来说有点代码味道，但它可能是合法的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T15:50:53.810

我没有使用 on 函数`SELECT`，而是修改了`INSERT`查询以包含此函数。这样，当我以后想要检索数据时，我就避免为每一行调用该函数。

# ajax - Ajax 功能不工作

> ID：11657206
> 
> 赞同：2
> 
> 时间：2012-07-25T19:32:34.037
> 
> 标签：ajax

我需要`id = txtName`使用 ajax 函数在文本框中显示一个名称，但它不起作用。以下是我的ajax函数：

```
function showName(str) {
    if (str.length == 0) {
        document.getElementById("txtName").innerHTML = "";
        return;
    }
    if (window.XMLHttpRequest) {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else {
        // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById("txtName").innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.open("GET", "getname.php?q="+str, true);
    xmlhttp.send();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:36:24.503

您必须将 innerHTML 更改为 value，因为前者将更改 id 为“txtName”的元素的值。

希望这可以帮助。

```
function showName(str)
{
if (str.length==0)
  {
  document.getElementById("txtName").innerHTML="";
  return;
  }
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtName").value=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","getname.php?q="+str,true);
xmlhttp.send();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-27T17:27:01.567

尝试使用 jquery ，为什么还要使用老式的 ajax

# python - 如何仅打印包含子字符串的行

> ID：11657209
> 
> 赞同：2
> 
> 时间：2012-07-25T19:32:42.150
> 
> 标签：python, list

我有一个带字符串的文件：

```
REALSTEP 12342 {2012-7-20   15:10:39};[{416 369 338};{423 432 349};{383 380 357};{399 401 242};{0 454 285};{457 433 115};{419 455 314};{495 534 498};][{428 377 336};{433 456 345};{386 380 363};{384 411 
REALSTEP 7191 {2012-7-20    15:10:41};[{416 370 361};{406 417 376};{377 368 359};{431 387 251};{0 461 366};{438 409 134};{429 411 349};{424 505 364};][{423 372 353};{420 433 374};{379 365 356};{431 387 2
REALSTEP 12123 {2012-7-20   15:10:42};[{375 382 329};{386 402 347};{374 378 357};{382 384 259};{0 397 357};{442 424 188};{398 384 356};{392 420 355};][{404 405 359};{420 432 372};{405 408 383};{413 407 
REALSTEP 27237 {2012-7-20   15:10:44};[{431 375 329};{416 453 334};{387 382 349};{397 403 248};{0 451 300};{453 422 131};{433 401 317};{434 505 326};][{443 384 328};{427 467 336};{391 386 344};{394 413 
FAKE 32290 {2012-7-20   15:10:48};[{424 399 364};{408 446 366};{397 394 389};{415 409 261};{0 430 374};{445 428 162};{432 416 375};{431 473 380};][{424 398 376};{412 436 372};{401 400 390};{417 409 261}
FAKE 32296 {2012-7-20   15:10:53};[{409 326 394};{445 425 353};{401 402 357};{390 424 250};{0 420 353};{447 423 143};{404 436 351};{421 527 420};][{410 332 400};{450 429 356};{402 403 356};{391 425 250}
FAKE 32296 {2012-7-20   15:10:59};[{381 312 387};{413 405 328};{320 387 376};{388 387 262};{0 402 326};{417 418 177};{407 409 335};{443 502 413};][{412 336 417};{446 437 353};{343 417 403};{417 418 258}
FAKE 32295 {2012-7-20   15:11:4};[{377 314 392};{416 403 329};{322 388 375};{385 391 261};{0 403 329};{425 420 168};{414 393 330};{458 502 397};][{408 338 421};{449 435 355};{345 418 403};{413 420 257};
FAKE 32295 {2012-7-20   15:11:9};[{371 318 411};{422 385 333};{342 379 352};{394 395 258};{0 440 338};{418 414 158};{420 445 346};{442 516 439};][{401 342 441};{456 415 358};{367 407 377};{420 420 255};
FAKE 32296 {2012-7-20   15:11:15};[{373 319 412};{423 386 333};{344 384 358};{402 402 257};{0 447 342};{423 416 151};{422 450 348};{447 520 442};][{403 342 442};{456 416 358};{366 409 379};{422 421 255}
REALSTEP 7191 {2012-7-20    15:10:41};[{416 370 361};{406 417 376};{377 368 359};{431 387 251};{0 461 366};{438 409 134};{429 411 349};{424 505 364};][{423 372 353};{420 433 374};{379 365 356};{431 387 2
REALSTEP 12123 {2012-7-20   15:10:42};[{375 382 329};{386 402 347};{374 378 357};{382 384 259};{0 397 357};{442 424 188};{398 384 356};{392 420 355};][{404 405 359};{420 432 372};{405 408 383};{413 407 
REALSTEP 27237 {2012-7-20   15:10:44};[{431 375 329};{416 453 334};{387 382 349};{397 403 248};{0 451 300};{453 422 131};{433 401 317};{434 505 326};][{443 384 328};{427 467 336};{391 386 344};{394 413 
```

我使用 readlines() 读取文件，然后希望循环遍历这些行并仅在存在大于 3 的连续行块时打印，其中包含字符串“REALSTEP”。因此，在示例中，预期结果是：

```
REALSTEP 12342 {2012-7-20   15:10:39};[{416 369 338};{423 432 349};{383 380 357};{399 401 242};{0 454 285};{457 433 115};{419 455 314};{495 534 498};][{428 377 336};{433 456 345};{386 380 363};{384 411 
REALSTEP 7191 {2012-7-20    15:10:41};[{416 370 361};{406 417 376};{377 368 359};{431 387 251};{0 461 366};{438 409 134};{429 411 349};{424 505 364};][{423 372 353};{420 433 374};{379 365 356};{431 387 2
REALSTEP 12123 {2012-7-20   15:10:42};[{375 382 329};{386 402 347};{374 378 357};{382 384 259};{0 397 357};{442 424 188};{398 384 356};{392 420 355};][{404 405 359};{420 432 372};{405 408 383};{413 407 
REALSTEP 27237 {2012-7-20   15:10:44};[{431 375 329};{416 453 334};{387 382 349};{397 403 248};{0 451 300};{453 422 131};{433 401 317};{434 505 326};][{443 384 328};{427 467 336};{391 386 344};{394 413 
```

我试过这个：

```
lines = f.readlines()
idx = -1
#loop trough all lines in the file
for i, line in enumerate(lines):
    if idx > i:
        continue
    else:
        if "REALSTEP" in line:
            steps = lines[i:i+3]
          #check for blokc of realsteps
            if is_block(steps, "REALSTEP") == 3:
                #prints the block up to the first next "FAKE STEP"
                lst = get_block(lines[i:-1])
                for l in lst:
                    print l[:200]
                idx =  i + len(lst)
                print "next block============" 
```

函数 is_block 是这样的：

```
def is_block(lines, check):
    #print len(lines)
    bool = 1
    for l in lines:
        if check in l:
            bool = 1
        else:
            bool = 0
        bool = bool + bool
    return bool 
```

和函数get_block：

```
def get_block(lines):
    lst = []
    for l in lines:
        if "REALSTEP" in l:
            #print l[:200]
            lst.append(l)
        else:
            break
    return lst 
```

虽然这有效，但它会打印包含字符串“REALSTEPS”的所有行。is_block(lines) 中的 print len(lines) 在调用函数时始终为 10，所以不是这样。

我很困惑，请在这里帮助我！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T19:41:27.323

这是一个包含您需要的逻辑的简单解决方案：

```
to_print = []
count = 0
started = False
for line in f.readlines():
    if "REALSTEP" in line:
        if not started: 
            started = True
        to_print.append(line)
        count += 1
    else:
        if count > 3: print('\n'.join(to_print))
        started = False
        count = 0
        to_print = [] 
```

它将任何包含字符串“REALSTEP”的行视为有效行。产生所需的输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:36:41.413

这部分：

```
...
    if "REALSTEP" in line:
        steps = lines[i:i+3]
        for s in steps:
            print s[:200]  # <- right here
... 
```

每当您`"REALSTEP"`在一行中找到时，您都会检索以下三行并立即打印它们。这可能不是你想要的。

# c - 在 C 中播种 If Else 条件

> ID：11657211
> 
> 赞同：-2
> 
> 时间：2012-07-25T19:32:49.180
> 
> 标签：c, if-statement

我用 C 语言编写这个程序，当我编译它时遇到了一个大问题，一旦我到了这个部分，我问用户他是否在 21 岁以下，如果答案是肯定的，我会问更多关于这个的问题，但是当我编译时它，程序基本上回答了它自己。我该如何解决这个问题？这是一个屏幕截图，橙色框，我没有回答任何这些问题。 [http://i.imgur.com/4H3nl.png](http://i.imgur.com/4H3nl.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:42:14.847

除了第一个问题之外，您忘记在每个问题之后要求用户输入。就`scanf("%c", &a);`在每个问题之后做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:41:10.953

在您遇到问题的分支中，您忘记提示用户输入。因此，它会重用用户最后给出的答案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:41:26.750

您正在重用相同的变量 ，`a`而实际上并没有要求用户输入放入`a`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T19:42:02.793

您只从用户那里读取信息一次。你需要在每个之前做一个 scanf

```
if (a == 'y') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-26T03:25:07.347

只有一个 scanf() 函数正在使用，这意味着只有一次输入可以从标准输入流中接受。对于scanf()，当按“enter”时，流堆栈到“a”。那么标准输入流是NULL。所以在每个问题之前，应该使用 scanf() 一次。

# android - 如何在 Android 应用程序中从 Internet 获取特定信息

> ID：11657213
> 
> 赞同：0
> 
> 时间：2012-07-25T19:32:59.480
> 
> 标签：android

我很新在 Android 应用程序开发中，我需要一些帮助。我正在创建这个简单的字典应用程序，它会提示用户输入一个单词，按下按钮后它将将该单词带到互联网上，可能是 wikipedia.org 并将该信息返回给用户。我使用 XML 开发应用程序文本字段和按钮。并创建了一段文本（ansa），它将使用 OnClickListener 设置为任何答案，我不想设置 webview 我只想将文本设置为字典答案。到目前为止，这是我能够做到的。有这个类可以从谷歌获取数据。

```
public class GetMethod {

public String getInternetData() throws Exception{
    BufferedReader in = null;
    String data = null;
    try{
        HttpClient client = new DefaultHttpClient();
        URI website = new URI("http://www.google.com");
        HttpGet request = new HttpGet();
        request.setURI(website);
        HttpResponse response = client.execute(request);
        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        StringBuffer sb = new StringBuffer("");
        String l = "";
        String nl = System.getProperty("line.separator");
        while((l = in.readLine()) !=null){
            sb.append(l + nl);
        }
        in.close();
        data = sb.toString();
        return data;
    }finally{
        if (in !=null){
            try{
                in.close();
                return data;
            }catch(Exception e){
                e.printStackTrace();
            }
        }
    }
} 
```

还有另一个实现 XML 的类

```
public class Dictionary extends Activity {

TextView ansa;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dictionary);

    Button Search = (Button) findViewById(R.id.search);

    ansa = (TextView) findViewById(R.id.ansa);   

    final GetMethod test = new GetMethod();

    Search.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
             String returned;
                try {
                    returned = test.getInternetData();
                    ansa.setText(returned);

                } catch (Exception e) {
                    ansa.setText("Failed");
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

        }   
    });

} 
```

当它执行时，我得到了整个网站的 HTML

因此，我需要有关如何将用户的话带到 wiki 网站的帮助，并且只获取 ansa 的文本，可能会对其进行解析并将其存储到某个字符串中。十分感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:15:38.673

您可以使用[Google Dictionary](http://googlesystem.blogspot.com/2009/12/on-googles-unofficial-dictionary-api.html "谷歌字典")或[dictionary.com](http://developers.dictionary.com/help/faq)之类的 API 。

但是您必须实现 HTTP 客户端并解析响应。然后显示所需的数据。

# android - Android如何检查数据库是否存在

> ID：11657215
> 
> 赞同：2
> 
> 时间：2012-07-25T19:33:02.643
> 
> 标签：android, database

我想检查数据库是否存在，我从互联网上找到了一些代码。

```
 private boolean checkDataBase(){

        SQLiteDatabase checkDB = null;

        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null,SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){

            //database does't exist yet.

        }

        if(checkDB != null){

            checkDB.close();

        }

        return checkDB != null ? true : false;
    } 
```

但我得到一个错误..无法打开文件为什么它不能工作？

```
: sqlite returned: error code = 14, msg = cannot open file at line 27703 of [8609a15dfa], db=/data/data/com.testing.abcde/databases/scj
: sqlite returned: error code = 14, msg = os_unix.c: open() at line 27703 - "" errno=2 path=/data/data/com.testing.abcde/databases/scj, db=/data/data/com.testing.abcde/databases/scj
: sqlite3_open_v2("/data/data/com.testing.abcde/databases/scj", &handle, 1, NULL) failed
: Failed to open the database. closing it.
: android.database.sqlite.SQLiteCantOpenDatabaseException: unable to open database file
:   at android.database.sqlite.SQLiteDatabase.dbopen(Native Method)
:   at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1013)
:   at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:986)
:   at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:962)
:   at com.lkland.softkeyboard.easytype.SQLite.checkDataBase(SQLite.java:80)
:   at com.lkland.softkeyboard.easytype.SQLite.createDataBase(SQLite.java:55) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:38:05.767

我使用这段代码，它似乎运行良好：

```
// Where DB_PATH is /data/data/com.testing.abcde/databases/scj
// and DB_NAME is name.db
public boolean checkDBExists() {
     File dbFile = new File(DB_PATH + DB_NAME);
     return dbFile.exists();
} 
```

您将需要`import java.io.File;`或提供对 File 类的完整引用。

# windows-ce - 下载适用于 windows ce 的 Internet 浏览器

> ID：11657216
> 
> 赞同：2
> 
> 时间：2012-07-25T19:33:12.087
> 
> 标签：windows-ce, motorola

我有一个运行 CE6 的摩托罗拉 MC2180 设备，由于某种原因，它没有附带 Internet Explorer。我在哪里可以下载在 CE 上运行的 Internet 浏览器版本。请，如果可能的话，请指导我下载，而不仅仅是建议一个可以工作的浏览器。一段时间以来，我一直在尝试不同的浏览器，但它们都没有可以在 CE 上运行的 .cab 文件安装程序。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T17:49:01.363

您不会找到 IE 的下载，因为 Windows CE 是模块化操作系统。仅仅提供 IE 是不够的，因为它需要许多其他操作系统级别的依赖项，这些依赖项可能存在也可能不存在。没有办法在下载中提供包含这些所需部分的新 coredll.dll，它必须针对您的目标进行构建和修复。IE 在 6.0 中还将许可证 SKU 从 Core 更改为 Pro，因此这也是一个许可问题。

如果您想要 IE，您必须向摩托罗拉索要创建它的新操作系统映像。如果您不关心您使用的是哪种浏览器，请遵循@yms 的建议并查看[Opera Mobile](http://www.operamini.com/mobile/download/versions/)、[MiniMo](http://www-archive.mozilla.org/projects/minimo/)或[其他支持 CE 的浏览器](https://superuser.com/questions/24263/is-there-a-free-internet-browser-available-for-windows-ce)之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-19T12:34:04.950

MC2180没有IE，因为自带Windows CE CORE版，本版。不包含 IE，MC2180 是一个经济范围的解决方案。它们是根据您的需要提供的其他解决方案。

-摩托罗拉技术支持工程师

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T17:26:43.650

你可以试试[Opera Mobile](http://www.operamini.com/mobile/download/versions/)。它可能适用于您的 Windows CE 6.0。

# sql - 插入 - SQL Server 查询

> ID：11657221
> 
> 赞同：0
> 
> 时间：2012-07-25T19:33:36.113
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我正在努力将一个表源（来自链接服务器）的内容推送到另一个表，即`dbo.dest`

```
insert into [dbo].[dest]
  select * 
  from OPENQUERY(LINKEDSERVER,'select * from source') 
```

源表有 50 列。

有什么方法可以`dbo.dest`为源列动态创建表（）？

任何输入都会有所帮助。

谢谢 ！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:35:29.213

尝试：

```
select *
into dbo.test
from OPENQUERY(LINKEDSERVER,'select * from source') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T19:35:56.040

试试这个，可能有用：

```
 select * into [dbo].[dest]
 from OPENQUERY(LINKEDSERVER,'select * from source') 
```

NB [dbo].[dest] 在您运行此查询时不存在。

# html - XPath:: 获取以下同级

> ID：11657223
> 
> 赞同：96
> 
> 时间：2012-07-25T19:33:43.070
> 
> 标签：html, xpath, siblings, scraper

我有以下 HTML 结构：我正在尝试构建一个强大的方法来提取第二个颜色摘要元素，因为 DOM 中会有很多这样的标签。

```
<table>
  <tbody>
    <tr bgcolor="#AAAAAA">
    <tr>
    <tr>
    <tr>
    <tr>
      <td>Color Digest </td>
      <td>AgArAQICGQMVBBwTIRQHIwg0GUMURAZTBWQJcwV0AoEDAQ </td>
    </tr>
    <tr>
      <td>Color Digest </td>
      <td>2,43,2,25,21,28,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,25,0,0,0,0,0,0,0,0,0,0,0,0,0,0,20,6,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0, </td>
    </tr>
  </tbody>
</table> 
```

我正在尝试提取具有解码值的第二个“颜色摘要”td 元素。

我编写了以下 xpath，但没有得到第二个，我没有得到第二个 td 元素。

```
//td[text() = ' Color Digest ']/following-sibling::td[2] 
```

当我将它更改为 td[2] 到 td[1] 时，我得到了这两个元素。

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-07-25T19:43:24.923

您应该寻找 td 等于“Color Digest”的第二个 tr，然后您需要查看 tr 中第一个 td 的以下同级或第二个 td。

尝试以下操作：

```
//tr[td='Color Digest'][2]/td/following-sibling::td[1] 
```

或者

```
//tr[td='Color Digest'][2]/td[2] 
```

[http://www.xpathtester.com/saved/76bb0bca-1896-43b7-8312-54f924a98a89](http://www.xpathtester.com/saved/76bb0bca-1896-43b7-8312-54f924a98a89)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-12-04T07:25:04.297

您可以使用 xPath 识别元素列表：

```
//td[text() = ' Color Digest ']/following-sibling::td[1] 
```

这将为您提供两个元素的列表，而不是您可以将第二个元素用作您想要的元素。例如：

```
List<WebElement> elements = driver.findElements(By.xpath("//td[text() = ' Color Digest ']/following-sibling::td[1]")) 
```

现在，您可以使用第二个元素作为您想要的元素，即*elements.get(1)*

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-25T19:36:35.443

`/html/body/table/tbody/tr[9]/td[1]`

在 Chrome（也可能是 Safari）中，您可以检查一个元素，然后右键单击要为其获取 xpath 的标签，然后您可以复制 xpath 以选择该元素。

# php - 在 PHP 中为计算转换日期格式

> ID：11657224
> 
> 赞同：0
> 
> 时间：2012-07-25T19:33:48.467
> 
> 标签：php, time

我以 m/d/y 格式显示任务的截止日期。我在“发布 X $name(s) ago”中显示任务发布的日期（例如，“Posted 6 day(s) ago”）。

我正在努力为时间戳（发布日期和截止日期）提供不同的 CSS 类，具体取决于从今天到截止日期的天数。（所以“Posted X”时间戳不太相关，我只是想给出一个更好的图片。）

到目前为止，我有以下内容：

```
$cdate = $this->data['due'];
$today = time();
$dovi = date('m/d/Y', $today);
$difference = $cdate - $dovi;
$upcoming= floor($difference/60/60/24); 
```

$cdate 以 m/d/y 格式从数据库中提取到期日期。$today 告诉我们今天是什么（使用 UNIX 时间戳）。$dovi 正在将 time() 转换为 m/d/y 格式。$difference 告诉我们今天和到期日之间的差异。从理论上讲，$upcoming 应该把这种差异化为一个简单的数字。

我认为要使计算工作，我需要将 $cdate 转换为 UNIX 时间戳，或者以某种方式将 $today 和 $cdate 都转换为 m/d/y 以外的其他匹配格式。

有人对完成这项工作的最佳方法有建议吗？我已经有一些代码来运行 CSS 更改，我唯一坚持的是这个转换/计算问题，以确定从现在 (time()) 到到期日的天数。谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:36:38.877

也许是这样的？假设 $this->data['due'] 是 m/d/Y 格式。

```
$this->data['due'] = '7/28/2012';
$diff = strtotime($this->data['due']) - strtotime(date('m/d/Y'));
var_dump(date('d',$diff)); // 3 
```

您可以将任何有效参数传递给 php 的 date 函数，以便按照您的意愿对其进行格式化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:45:30.520

它很长，但有效...

```
 $datetime = new DateTime("2012-07-22 02:03:50");   // your date in datetime type
    $curr_stamp = time();
    $act_stamp = mktime($datetime->format('H'), $datetime->format('i'), $datetime->format('s'), $datetime->format('n'), $datetime->format('j'), $datetime->format('Y'));

    $diff=$curr_stamp-$act_stamp;
    $day_diff = floor($diff / 86400);

    if($day_diff < 7)
        echo $day_diff." days ago"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T22:24:02.803

**相当优雅和正确的解决方案（在UNIX 时代**结束后也是可行的）。

```
$today = new DateTime(); // creating `today` DateTime object
$expiry = DateTime::createFromFormat('m/d/Y', $this->data['due']) // creating DateTime object from already formatted date

$difference = $today->diff($expiry); // 1st variant to calculate difference between dates
$difference = date_diff($today, $expiry); // and 2nd variant

echo $difference->format('Interval (difference) is %R% days'); 
```

请记住，**UNIX epoch** ( `timestamp`) 将“很快”“结束”，基于时间戳的代码可能会遇到一些问题（*也许我们将来会找到解决方案来避免这种情况，但是......*），最好使用`DateTime`class，bec . 如果您不记得日期**1970.01.01**并尝试使用时间戳来计算**1970 年之前**出生的人的年数，甚至会成为一个问题（*顺便说一句，这是广泛的数据库实践*:)）。

 ****永远不要为非常古老的日期这样做（时间戳），并展望未来，`DateTime`并将 SaveOurSouls。****

# vba - VBA 文件对话框 .FileName 从文件名末尾删除 .1

> ID：11657234
> 
> 赞同：0
> 
> 时间：2012-07-25T19:34:23.957
> 
> 标签：vba, autodesk

我正在使用 Visual Basic 为 Autodesk Inventor 编写宏。我创建了一个调用文件对话框的宏，请参见下面的代码。一切正常，除非用户将文件名放入一个句点和一个大于零的数字。

例如，如果用户将 testfile.test 放入框中并点击确定。当我询问他们使用 .FileName 放在那里的内容时，我得到“testfile.test”。就像我应该的那样。

但是，如果用户放置 testfile.1 或 testfile.10 或 testfile.1mdksj 或任何大于零的数字，则直接跟随我返回“testfile”的句点。由于某种原因，期间和期间之后的所有内容都会被删除。

这是什么原因？这是 Visual Basic 中的错误还是我做错了什么？

```
'Set up the file dialog
Dim oFileDlg As FileDialog
' Create a new FileDialog object.
Call ThisApplication.CreateFileDialog(oFileDlg)
'Define the filter to select part and assembly files or any file.
oFileDlg.Filter = "All Files (*.*)|*.*"
'Define the part and assembly files filter to be the default filter.
oFileDlg.FilterIndex = 1
'Set the title for the dialog.
oFileDlg.DialogTitle = "Save File As"
'Tell the dialog box to throw up and error when cancel is hit by user
oFileDlg.CancelError = True

'Show the file dialog
On Error Resume Next
oFileDlg.ShowSave

'save the user specified file
Dim newFileName As String
newFileName = oFileDlg.FileName 
```

**更新：**

我最终做了以下“hack”以使事情在处理一段时间时仍然有效：

```
oFileDlg.fileName = sFname & "."
oFileDlg.ShowSave
fullName = Left$(oFileDlg.fileName, Len(oFileDlg.fileName) - 1) 
```

这在 Windows 7 和 Windows 10 上运行了很长一段时间。不幸的是，Windows 10 Creative 更新似乎改变了文件对话框的工作方式。使用上面的代码，如果名称中没有句点，则 fullName 将返回空白，如果名称中有句点，则会从左边的第一个句点截断所有内容。

我不太确定 Windows 10 发生了什么变化，但它几乎摧毁了我的 hack。Windows 7 仍然可以正常工作，而创意更新之前的 Windows 10 可以正常工作。我最终做了以下操作，以使一切在我上面提到的 Windows 版本中再次正常工作。

```
oFileDlg.fileName = sFname & ".00"
oFileDlg.ShowSave
fullName = Left$(oFileDlg.fileName, Len(oFileDlg.fileName) - 3) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:51:12.163

这是一个 VB 属性，但它也可以扩展到 VBA。您是否尝试过设置保存设置以支持多点扩展？尝试这样的事情：

```
SupportMultiDottedExtensions = True 
```

此设置旨在允许使用点分扩展名 - 意味着在文件名中使用句点。有关文档和信息，请参阅此 MSDN 参考：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.supportmultidottedextensions.aspx#Y129](http://msdn.microsoft.com/en-us/library/system.windows.forms.filedialog.supportmultidottedextensions.aspx#Y129)

这篇 SO 文章也可能会进一步阐明：[文件名中带有句点的 SaveAs Dialog does not return extension](https://stackoverflow.com/questions/9593305/saveas-dialog-with-a-period-in-the-filename-does-not-return-extension)

**编辑**

在检查了 Autodesk 文档之后——在我看来，这是一项艰巨且令人不快的任务——似乎确实不支持 MultidottedExtensions。但是，我确实在 VBAExpress 上找到了一个我非常熟悉的函数。该函数可用于过滤包含不可接受字符的字符串。Jimmy Pena 的博客为此目的提供了出色的功能：[http](http://www.jpsoftwaretech.com/excel-vba/validate-filenames/) ://www.jpsoftwaretech.com/excel-vba/validate-filenames/ 。我只是在代码中添加了一个句点和一个替换：

```
'A function for filtering strings, with a focus on filenames.
Function FilterFileNameString(stringToScrub As String) As String
'Filters a filename string - or any string for that matter.
Dim FilteredString As String

  'A highly nested replace function.
  FilteredString = Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(Replace(stringToScrub, ".","|", ""), ">", ""), "<", ""), Chr(34), ""), "?", ""), "*", ""), ":", ""), "/", ""), "\", "") 

  'Returns filtered string.
  FilterFileNameString = FilteredString 
End Function 
```

Jimmy Pena 的博客也包含递归版本，尽管他不推荐这样做。

您可以过滤任何字符串以用作具有另一个字符的文件名 - 在这种情况下为空格。但是，您可以使用下划线或您认为令人愉快的任何其他字符。

一般来说，如果您尝试使用句点进行版本控制或类似目的，而发明者不会让您这样做，我强烈建议您使用可以提供此类指示的另一个字符或一组字符，例如下划线“_”，数字系统，“001”，“002”，字母系统，“AAA”，“AAB”，或者任何对你的焦点有意义的东西。

如果您只是使应用程序对用户友好，我建议在将输入的字符串保存为所需的文件类型之前对其进行过滤，如果句点过滤让您感到悲伤，则将字符串的过滤与保存对话框分开。它可能会增加一个额外的步骤，但它可能是过滤掉讨厌的无效字符的最佳和最简单的方法，而不会给您的用户带来不必要的额外麻烦。

~乔尔

# java - Swing 对话框布局：运行方法还是构造函数？

> ID：11657236
> 
> 赞同：2
> 
> 时间：2012-07-25T19:34:29.637
> 
> 标签：java, multithreading, swing

当我启动我的 Swing 对话框布局时，是否在类的 run 方法中执行它会有所不同：

```
    公共无效运行（）
    {
        框架 = 新的 JFrame();
        ...
        框架.setVisible（真）；
    }

```

还是类构造函数？

```
    公共我的班级
    {
        框架 = 新的 JFrame();
        ...
        框架.setVisible（真）；
    }
    公共无效运行（）
    {
    }

```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T19:46:44.437

是的，这很重要，原因是您应该在 Swing 事件线程（事件调度线程或 EDT）上调用大多数 Swing 代码，包括创建 JFrame。为此，您通常在 Runnable 中创建 Swing GUI，并通过调用以下内容在事件线程上排队 Runnable：

```
SwingUtilities.invokeLater(new Runnable(){
  public void run() {
     // create your Swing GUI here
     frame = new JFrame();
     ...
     frame.setVisible( true );
  }
}); 
```

例外是在 API 中记录为线程安全的 Swing 方法调用，例如`repaint()`组件的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T20:41:56.497

这是上下文相关的。正如@hovercraftfullofeels 指出的那样，您需要确保您的所有 UI 代码都在 中执行`EDT`，包括初始化。

`EDT`如果您已经`InvokeLater`在`EDT`.

最好检查一下`EventQueue.isDispatchingThread`

# mod-rewrite - Mod Rewrite 丢失查询参数

> ID：11657238
> 
> 赞同：0
> 
> 时间：2012-07-25T19:34:36.530
> 
> 标签：mod-rewrite

在一个简单的 PHP 站点上使用了以下重写规则 .htaccess：

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /test/
RewriteRule ^index\.php$ - [L]
RewriteRule ^([a-zA-Z-]+)/?$ /test/index.php?m=$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /test/index.php [L]
</IfModule> 
```

以下 URL 正常工作：

```
domain.com/test/index.php?m=profile
domain.com/test/profile
domain.com/test/profile/ 
```

但是，重写会丢失其他查询参数：

```
domain.com/test/index.php?m=profile&id=2000   ==> works
domain.com/test/profile?id=2000  ==> does not work
domain.com/test/profile?id=2000  ==> does not work 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:39:58.793

更改此行：

```
RewriteRule ^([a-zA-Z-]+)/?$ /test/index.php?m=$1 [L] 
```

包括`QSA`标志：

```
RewriteRule ^([a-zA-Z-]+)/?$ /test/index.php?m=$1 [L,QSA] 
```

它告诉 apache 将现有的查询字符串附加到新的 ( `m=$1`) 中。

# linux - 如何打印运行过程的链接图？

> ID：11657242
> 
> 赞同：2
> 
> 时间：2012-07-25T19:34:49.953
> 
> 标签：linux, dynamic-linking

如何以一种不错的方式打印 Linux 中运行进程的动态加载程序链接图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:40:49.320

看看`/proc/<pid>/maps`。

# c# - 寻找具有一对一唯一依赖关系的数据结构

> ID：11657248
> 
> 赞同：3
> 
> 时间：2012-07-25T19:35:12.057
> 
> 标签：c#, .net, winforms, data-structures, relational-database

> **可能重复：**
> [C# 中的双向 1 到 1 字典](https://stackoverflow.com/questions/268321/bidirectional-1-to-1-dictionary-in-c-sharp)

我很好奇标准.net库中是否存在可以表示1-1关系的数据结构，例如以下

```
1-a
4-b
6-c
5-d 
```

我可以在哪里说：

```
thisstructure[1] // returns "a"
thisstructure.GetKey["d"] // return 5 
```

我知道所有键都必须是唯一的，是否存在类似的东西？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:42:21.083

是的 - 它被称为[KeyedCollection](http://msdn.microsoft.com/en-us/library/ms132438.aspx)。它旨在被子类化并提供索引访问以及通过从添加的项目派生的属性进行的访问。我通常做一个通用的子类：

```
public class GenericKeyedCollection<TKey, TValue> : KeyedCollection<TKey, TValue> {

    private readonly Func<TValue, TKey> _keyGenerator;

    public GenericKeyedCollection(Func<TValue, TKey> keyGenerator) {
        _keyGenerator = keyGenerator;
    }

    protected override int GetKeyForItem(TValue item)
   {
      return _keyGenerator(item);
   }
} 
```

要使用它：

```
var myCollection = new GenericKeyedCollection<String, Car>(c=>c.Model);
myCollection.Add(new Car("Ford", "Mustang"));
var byIndex = myCollection[0];
var byModel = myCollection["Mustang"]; 
```

唯一需要注意的是，在添加项目后，派生属性（“键”）不得更改。

如果您的键不是值的属性，那么您可以使用 a`Tuple<T1, T2>`来组合键和值：

```
var myCollection = new GenericKeyedCollection<String, Tuple<String, Car>>(t=>t.Item1);
myCollection.Add(new Tuple<String, Car>("Foo", Car("Ford", "Mustang")));
var byIndexCar = myCollection[0].Item2;
var byItem1Car = myCollection["Foo"].Item2; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:42:28.347

`Dictionary`....or`IDictionary`界面是我能想到的最接近您想要的界面。它没有那么简单的搜索操作，因为搜索值可以返回键，但我知道您可以搜索键来获取值。在自定义扩展类中提供反向功能一点也不难。

[MSDN 词典页面](http://msdn.microsoft.com/en-us/library/s4ys34ea.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T19:53:55.917

这种方法能满足您的需求吗？

```
public static class Extensions
{
    public static TKey GetKey<TKey, TValue>(this Dictionary<TKey, TValue> dict, TValue value)
    {
        int index = dict.Values.ToList().IndexOf(value);

        if (index == -1)
        {
            return default(TKey); //or maybe throw an exception
        }

        return dict.Keys.ToList()[index];
    }
} 
```

然后你可以像这样使用它：

```
Dictionary<int, char> dict = new Dictionary<int, char>();
dict.Add(1, 'a');
dict.Add(4, 'b');
dict.Add(6, 'c');
dict.Add(5, 'd');

Console.WriteLine(dict.GetKey('d')); //5 
```

# python - Python 存储动态数据

> ID：11657251
> 
> 赞同：0
> 
> 时间：2012-07-25T19:35:26.273
> 
> 标签：python

我不知道标题是否有意义......但这就是我正在尝试使用列表做的事情

```
>>> x = 5
>>> l = [x]
>>> l
[5]
>>> x = 6
>>> l
[5] # I want l to automatically get updated and wish to see [6]
>>> 
```

dict，tuple也是如此。有没有可以存储变量动态值的python对象？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:43:19.340

由于赋值运算符在 Python 中的工作方式，没有办法让它工作。`x = WHATEVER`将始终将本地名称重新绑定`x`到`WHATEVER`，而不修改`x`以前绑定到的内容。(*)

您可以通过将整数替换为容器数据类型（例如单元素列表）来解决此问题：

```
>>> x = [5]
>>> l = [x]
>>> l
[[5]]
>>> x[0] = 6
>>> l
[[6]] 
```

但这确实是一个 hack，除了实验之外，我不会推荐它。

(*) 当引用计数降至零时，重新绑定实际上可能会修改先前绑定的对象，例如它可能会关闭文件。不过，您不应该依赖它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:41:59.663

您可以使用`numpy`模块来完成。

```
>>> from numpy import array
>>> a = array(5)
>>> a
array(5)
>>> l = [a]
>>> l
[array(5)]
>>> a.itemset(6)
>>> a
array(6)
>>> l
[array(6)] 
```

通常可以将 0-D numpy 数组视为任何常规值，如下所示：

```
>>> a + 3
9 
```

但是，如果需要，您可以这样访问底层对象：

```
>>> a.item()
6 
```

* * *

这是一种动态访问的 hacky 方法，在其给定的形式中不是非常可扩展/灵活，但可以用作更好的基础。

```
>>> a = 7
>>> class l:
    def a_get(self):
        global a
        return a
    def a_set(self, value):
        global a
        a = value
    a = property(a_get, a_set)

>>> c = l()
>>> c.a
7
>>> a = 4
>>> c.a
4
>>> c.a = 6
>>> a
6 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:37:02.667

变量是存储数据的地方。数据结构是存储数据的地方。选择满足您需求的那一款。

# .net - 未处理的句柄异常？

> ID：11657252
> 
> 赞同：0
> 
> 时间：2012-07-25T19:35:28.610
> 
> 标签：.net, winforms, exception, c++-cli, unhandled

我对 C++ 和 .Net/WinForms 感到困惑。我编写了代码来启动后台工作程序以检查用户输入对 Web 服务器。代码如下：

```
 try {
        loginworker->RunWorkerAsync();                       
    }
    catch(System::InvalidOperationException^) {} 
```

现在，当我运行程序并多次单击登录按钮（从而触发“后台工作人员已在运行任务”错误）时，我在该行代码处收到未处理的 System::InvalidOperationException。我在这里缺少什么吗？

我已经以隐藏登录按钮的方式编写了代码，直到后台工作程序上的代码执行完成，但它不应该捕获异常吗？

科林

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:49:24.170

您是否将调试器设置为中断所有异常？如果将 RunWorkerAsync 行替换为`throw gcnew InvalidOperationException();`，然后单击一次按钮，会发生什么情况？

# java - 分类变量还是不分类变量？

> ID：11657255
> 
> 赞同：0
> 
> 时间：2012-07-25T19:35:41.230
> 
> 标签：java, class-variables

我有一个类`Foo`，它有一个`doSomething`使用两个与类相关的变量的方法，`b`而且`c`获取/创建的成本很高。我的第一个版本如下所示：

```
public class Foo {

    private final A a;

    public Foo(A a) {
        this.a = a;
    }

    public void doSomething() {
        final B b = a.getB();
        final C c = b.getC();

        for (int i = 0; i < 1000; i++) {
            // do something with b and c
        }
    }
} 
```

所以我`B`通过类变量获得第一个对象（type），通过第一个对象获得`a`第二个对象（type `C`）。

现在，由于这些变量与类相关，并且该方法*总是*只调用一次（尽管不一定在创建 type 的对象时`Foo`），所以我考虑将它们设为类变量：

```
public class Foo {

    private final A a;
    private final B b;
    private final C c;

    public Foo(A a) {
        this.a = a;
        b = a.getB();
        c = b.getC();
    }

    public void doSomething() {
        for (int i = 0; i < 1000; i++) {
            // do something with b and c
        }
    }
} 
```

如果这两个中的任何一个，我不确定使用哪个版本。由于可以从现有的类变量中检索它们，因此我对将这两个变量作为类成员感到不舒服`a`。但是，它将增加 IMO 方法的可读性。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:41:48.160

你是绝对正确的。如果它增加了可读性，那么一定要这样做。但是，我会问你：在课堂上引用 A 的目的是什么？只是为了获得B和C吗？在这种情况下，我只需在 Foo 的构造函数中输入 B 和 C！

*通过这种方式，您甚至可以通过打破对 A 的依赖并使*对 B 和 C 的依赖更加明确来使其更具可读性。

另外，请考虑您是否在类的其他方法中使用这些变量。如果答案是肯定的，则表明它们应该是类成员，但是，如果该类包含许多*不*使用这些变量的方法，则可能表明相反。

您应该在这里遵循的一般原则是[高内聚原则](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T19:39:45.440

一般来说，如果可以使用局部变量，则最好使用字段。

使用局部变量

*   将变量限制在使用它的位置。
*   使用更少的内存。
*   是线程安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:44:27.630

为什么不在你的类 Foo 中存储 B 和 C 的实例？你在课堂上的某个地方引用 A 吗？否则，将 B 和 C 都存储为实例变量不会降低内存效率，因为存储一个 A 对象包含一个 B 和 C 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T19:46:15.643

根据我的经验，静态（或类变量|字段|方法）通常会在一段时间后变得邪恶，需要重构，除非这些东西本质上是静态的（Math.PI 或 Math.max() 是示例或此类静态事物）。如果这些方法基于任何动态进行一些计算，我会将它们作为实例。

# java - 如何在 NamedQuery 中编写 NamedQuery hasrsine 公式？

> ID：11657256
> 
> 赞同：1
> 
> 时间：2012-07-25T19:35:41.807
> 
> 标签：java, mysql, web-services, named-query, haversine

我想在作为 NamedQuery 的 hasrsine 公式查询下运行，但我不知道如何更正它。

```
set @orig_lat = 37.334542;
set @orig_lon = -121.890821;
set @dist = 10;

select  *,
        3956 * 2 * ASIN(SQRT(POWER(SIN((@orig_lat - abs(mlatitude)) * pi() / 180 / 2), 2) 
          + COS(@orig_lat * pi() / 180) * COS(abs(mlatitude) * pi() / 180) * POWER(SIN((@orig_lon - mlogitude) * pi() / 180 / 2), 2))) as distance
from user_gps_location
having distance < @dist
ORDER BY distance 
```

我将此查询运行到 mysql 中，它对我来说很好，但是当我在下面的查询中写为 NamedQuery 时，它给了我错误：

```
UserGpsLocation users = (UserGpsLocation)em.createQuery("select (3956*2*ASIN(SQRT(POWER(SIN((?1-abs(u.mlatitude))*pi()/180/2),2)+COS(?1*pi()/180) * COS(abs(u.mlatitude)* pi()/180) *POWER(SIN((?2 -u.mlogitude)* pi()/180/2),2)))) as distance from UserGpsLocation u having distance < :dist ORDER BY distance")
      .setParameter(1, mlatitude)
      .setParameter(2, mlogitude)
      .setParameter("dist", 10)
      .getResultList(); 
```

例外：

```
javax.servlet.ServletException: java.lang.IllegalArgumentException: An exception occurred while creating a query in EntityManager: 
Exception Description: Syntax error parsing the query [select (3956*2*ASIN(SQRT(POWER(SIN((?1-abs(u.mlatitude))*pi()/180/2),2)+COS(?1*pi()/180) * COS(abs(u.mlatitude)* pi()/180) *POWER(SIN((?2 -u.mlogitude)* pi()/180/2),2)))) as distance from UserGpsLocation u having distance < :dist ORDER BY distance], line 1, column 19: unexpected token [(].
Internal Exception: NoViableAltException(83@[()* loopback of 383:9: (d= DOT right= attribute )*]) 
```

谁能帮助我并告诉我它有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T22:26:17.523

终于能找到解决办法了。我使用 createNativeQuery 而不是 createQuery，这解决了我的问题。

# facebook - 带有打开图的 HTTP 错误 500（内部服务器错误）

> ID：11657257
> 
> 赞同：2
> 
> 时间：2012-07-25T19:35:53.493
> 
> 标签：facebook, facebook-graph-api

我使用内置的 Open Graph 操作和对象（阅读、文章）创建了应用程序。当我单击“编辑打开图”，然后尝试单击“读取操作”链接时，我收到服务器错误“服务器错误网站在检索[https://developers.beta.facebook.com/apps/498561990169275/opengraph/action_type时遇到错误/197470933617653](https://developers.beta.facebook.com/apps/498561990169275/opengraph/action_type/197470933617653)。它可能因维护而关闭或配置不正确。以下是一些建议：稍后重新加载此网页。HTTP 错误 500（内部服务器错误）：服务器尝试完成请求时遇到意外情况。

问题是什么

谢谢你

# android - Android 将带有 httpPost 的图像发送到 Servlet 多部分

> ID：11657259
> 
> 赞同：0
> 
> 时间：2012-07-25T19:35:56.273
> 
> 标签：android, jakarta-ee, servlets, multipart, servlet-3.0

我尝试使用多部分发送图像，就像我在这里读到的那样[https://stackoverflow.com/a/2937140/1552648](https://stackoverflow.com/a/2937140/1552648)但是当它到达 servlet 时它不需要任何东西。

这是 android java 代码，我在其中发送一些文本和图像，我有来自 de SD 卡的 IMG_URL

```
private void enviarAlServidorConFoto(Incidencia incide, String IMG_URL){

    HttpClient httpClient = new DefaultHttpClient();

    HttpPost httpPost = new HttpPost(urlservidor + "AnyadirIncidenciaAndroid");

    try {
        //MultipartEntity multiPart = new MultipartEntity();
        MultipartEntity multiPart = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);

        multiPart.addPart("usuario", new StringBody(incide.getUsuario()));
        multiPart.addPart("latitud", new StringBody(incide.getLatitud()+""));
        multiPart.addPart("longitud", new StringBody(incide.getLongitud()+""));
        multiPart.addPart("descripcion", new StringBody(incide.getDescripcion()));
        multiPart.addPart("tipo", new StringBody(incide.getTipo()));
        // YA la pongo desde la web a normal postParametros.add(new BasicNameValuePair("prioridad", value));
        multiPart.addPart("foto", new StringBody(incide.getFoto()));
        //no se pasa el nombre de la foto, puesto que ya lo extraera cuando se mande la foto sola
        multiPart.addPart("FotoIncidenciaAndroid", new FileBody(new File(IMG_URL)));

        httpPost.setEntity(multiPart);
    } catch (UnsupportedEncodingException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

    try{    
        HttpResponse res = httpClient.execute(httpPost);
        res.getEntity().getContent().close();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    }catch (IOException e){
        e.printStackTrace();
        Log.d("EnviadoAweb", e.toString());
    }
} 
```

然后，这里也是带有 multipart 的 servlet。

```
@WebServlet(name="AnyadirIncidenciaAndroid", urlPatterns={"/android/AnyadirIncidenciaAndroid"}, loadOnStartup=1) 
```

@MultipartConfig(location="c:\temp", fileSizeThreshold=1024*1024, maxFileSize=1024*1024*5, maxRequestSize=1024*1024*5*5) 公共类 AnyadirIncidenciaAndroid 扩展 HttpServlet {

```
private static final long serialVersionUID = -6704540377265399620L;

/**
 * @see HttpServlet#HttpServlet()
 */
public AnyadirIncidenciaAndroid() {
    super();
    // TODO Auto-generated constructor stub
}

/**
 * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
 */
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    doPost(request, response);
}

/**
 * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
 */
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

    final String usuario = request.getParameter("usuario");

    System.out.println("Usuario recuperado al dar la incidencia desde movil: " + usuario);

    IncidenciaDAO idao = new IncidenciaDAO();
    Timestamp fechaalta = new Timestamp(System.currentTimeMillis());
    Timestamp fechafin = null;
    double latitud = Double.parseDouble(request.getParameter("latitud"));
    double longitud = Double.parseDouble(request.getParameter("longitud"));
    String descripcion = request.getParameter("descripcion");
    String tipo = request.getParameter("tipo");
    String estado = "Nueva";
    String prioridad = "Normal";
    String empleado = null; //al tratarse de una incidencias nueva, aun no tenemos ningun empleado que la halla resuelto
    String foto = request.getParameter("foto");
    String nombrefoto = null;

    /* 
     * Si tenemos foto creada en la aplicacion movil, entonces tendremos que guardar el nuevo
     * nombre de la incidencia, en caso, de no tener foto, pondremos una string vacio,
     * y pondremos la imagen por defecto de sin imagen.
     */
    Part p1 = request.getPart("FotoIncidenciaAndroid");

    if(foto.equalsIgnoreCase("Si")){
        try {
            nombrefoto = idao.RenombrarFoto();
            // guardamos la foto con su nombre
            p1.write(nombrefoto);
        } catch (SQLException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
    }

    try {
        idao.anyadirIncidenciaMapaWeb(fechaalta, fechafin, latitud, longitud, descripcion, tipo, estado, prioridad, usuario, empleado, foto, nombrefoto);
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

}

我该怎么做才能从我的请求发送的内容中获取？因为那告诉我变量 usuario 是空的

最终字符串 usuario = request.getParameter("usuario"); System.out.println("Usuario recuperado al dar la incidencia desde movil:" + usuario);

服务器的日志还说它可以发出请求，因为它发送的不是多部分的

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:04:00.133

我正在使用这些组件将图像发送到我的服务器：

```
 public static void uploadPhoto(Uri imageUri, Activity activity, String restaurantId, String itemId) throws Exception{
    File imageToUpload = convertImageUriToFile (imageUri, activity);
    executeMultipartPost(imageToUpload.getAbsolutePath(),restaurantId, itemId);
} 
```

其中 imageUri 是图像的完整路径：

图像转换器：

```
 public static File convertImageUriToFile(Uri imageUri, Activity activity) {
    Cursor cursor = null;
    try {
        String[] proj = { MediaStore.Images.Media.DATA,
                MediaStore.Images.Media._ID,
                MediaStore.Images.ImageColumns.ORIENTATION };
        cursor = activity.managedQuery(imageUri, proj, // Which columns to
                                                        // return
                null, // WHERE clause; which rows to return (all rows)
                null, // WHERE clause selection arguments (none)
                null); // Order-by clause (ascending by name)
        int file_ColumnIndex = cursor
                .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
        Log.v("App engine Manager", "File colum index:"+file_ColumnIndex);
        //  int orientation_ColumnIndex = cursor
        //  .getColumnIndexOrThrow(MediaStore.Images.ImageColumns.ORIENTATION);
        if (cursor.moveToFirst()) {
            //String orientation = cursor.getString(orientation_ColumnIndex);
            return new File(cursor.getString(file_ColumnIndex));
        }
        return null;
    } finally {
        if (cursor != null) {
            cursor.close();
        }
    }
} 
```

服务器通讯：

```
 public static void executeMultipartPost(String path, String restaurantId, String itemId) throws Exception {
    try {

        Bitmap bm = BitmapFactory.decodeFile(path);
        String URL = "", imageId = "";

        URL = "your server's URL to handle multipart data ";
        ByteArrayOutputStream bos = new ByteArrayOutputStream();
        bm.compress(CompressFormat.JPEG, 75, bos);
        byte[] data = bos.toByteArray();
        HttpClient httpClient = new DefaultHttpClient();
        HttpPost postRequest = new HttpPost(URL);
        ByteArrayBody bab = new ByteArrayBody(data, imageId+".jpg");
        MultipartEntity reqEntity = new MultipartEntity(
                HttpMultipartMode.BROWSER_COMPATIBLE);
        reqEntity.addPart("uploaded", bab);
        reqEntity.addPart("photoCaption", new StringBody("sfsdfsdf"));
        postRequest.setEntity(reqEntity);
        HttpResponse response = httpClient.execute(postRequest);
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                response.getEntity().getContent(), "UTF-8"));
        String sResponse;
        StringBuilder s = new StringBuilder();

        while ((sResponse = reader.readLine()) != null) {
            s = s.append(sResponse);
        }
        System.out.println("Response: " + s);
    } catch (Exception e) {
        // handle exception here
        Log.e(e.getClass().getName(), e.getMessage());
    }
} 
```

# javascript - 错误类型对象不支持 Internet Explorer 上的此类属性或方法

> ID：11657262
> 
> 赞同：1
> 
> 时间：2012-07-25T19:35:57.813
> 
> 标签：javascript, internet-explorer, firefox

为什么我的以下代码在 Internet Explorer 中不起作用？它在 Firefox 中运行良好。我得到“对象不支持这种属性或方法。” 请帮忙。以下是代码。

```
<script type="text/javascript">
    function calcmrc() {
        var inputs = document.getElementsByClassName('mrc');
        var sum = 0;
        for (var i = 0; i < inputs.length; i++) {
            var input = inputs[i];
            var num = Number(input.value);
            if (isNaN(num)) {
                alert('Please Enter a valid number: ' + input.value);
                num = 0;
            }
            sum += num;
        }
        document.getElementById('mrcresult').value = '$' + sum;
    }
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:37:56.813

`getElementsByClassName`早期浏览器不支持：

```
var inputs = document.getElementsByClassName('mrc'); 
```

[IE8及更早版本不支持](http://caniuse.com/getelementsbyclassname)

如果您是 javascript 新手，您可以使用[jQuery](http://jquery.com/)来帮助解决这个问题

使用jQuery：

```
var inputs = $('.mrc'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:50:01.213

IE[不](http://caniuse.com/#search=getelementsbyclassname)支持[`getElementsByClassName`](https://developer.mozilla.org/En/DOM/document.getElementsByClassName)。

要在 IE8 中支持，请参阅[此答案](https://stackoverflow.com/a/10484509/1048572)，对于早期版本，请参阅[getElementsByClassName() 在 IE6、IE7、IE8 等旧 Internet Explorer 中不起作用](https://stackoverflow.com/q/6584635/1048572)

# android - Android：如何使以编程方式创建的按钮居中？

> ID：11657263
> 
> 赞同：9
> 
> 时间：2012-07-25T19:36:03.187
> 
> 标签：android

我需要以编程方式创建一个按钮，并将其置于布局的中心，水平和垂直。我正在尝试使用以下代码：

```
LinearLayout ll = (LinearLayout)findViewById(R.id.layoutItem);
Button b = new Button(this);        
b.setBackgroundDrawable(getResources().getDrawable(R.drawable.button));
b.setLayoutParams(new LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT)); 
b.setGravity(Gravity.CENTER_HORIZONTAL|Gravity.CENTER_VERTICAL);
ll.addView(b); 
```

但它不起作用。该按钮出现在最左侧。

关于如何解决这个问题的任何线索？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-25T19:58:08.417

我会做类似的事情：

```
LinearLayout.LayoutParams ll = (LinearLayout.LayoutParams)b.getLayoutParams();    
ll.gravity = Gravity.CENTER;
b.setLayoutParams(ll); 
```

看看这是否有效。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-25T20:02:08.183

或者您可以使用 a`RelativeLayout`作为您的父母`View`并执行以下操作：

```
this.testButton= (Button) this.findViewById(R.id.testButton);

RelativeLayout.LayoutParams testLP = new RelativeLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);

testLP.addRule(RelativeLayout.CENTER_IN_PARENT);

this.testButton.setLayoutParams(testLP); 
```

您可以为`RelativeLayout`.

# android - 如何从 Android 的设备电话簿中获取有关哪些联系人被删除或更新的通知

> ID：11657266
> 
> 赞同：2
> 
> 时间：2012-07-25T19:36:14.930
> 
> 标签：android, android-contacts, contentobserver

使用**ContentObserver**我知道联系人数据库中发生了一些变化，但我需要知道哪个联系人已从设备联系人列表中删除或更新。有没有可以实现相同的工作示例？任何帮助，将不胜感激。

**编辑**

在电话簿中的所有联系人中，只有一个特定的联系人需要知道其内容是否已更改。在这种情况下，我可以只为一个特定的联系人而不是整个电话簿设置一个观察员吗？

# linux - Grep : 在文本文件中查找模式

> ID：11657267
> 
> 赞同：1
> 
> 时间：2012-07-25T19:36:17.170
> 
> 标签：linux, grep

我必须在文本文件中找到以下模式

```
\xc2d 
d\xa0 
\xe7 
\xc3\ufffdd 
\xc3\ufffdd 
\xc2\xa0 
\xc3\xa7 
\xa0\xa0 
```

我从查找`\x`事件开始并执行此操作

```
 grep "\\x" *.log | more 
```

什么都没有返回，这个查询是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:52:51.763

我想你会想要使用单引号而不是双引号。

`grep '\\x' *.log | more`

您的 shell 可能会[在处理双引号中的字符串时剥离第一个反斜杠](https://stackoverflow.com/questions/3008423/quotes-when-using-grep)，这是 grep 需要的。

# css - 防止包含 CSS 菜单的 div 在不破坏菜单下拉菜单的情况下换行

> ID：11657270
> 
> 赞同：0
> 
> 时间：2012-07-25T19:36:24.477
> 
> 标签：css

我正在实现一个基于这个的菜单：

[http://www.jankoatwarpspeed.com/post/2009/01/19/Create-Vimeo-like-top-navigation.aspx](http://www.jankoatwarpspeed.com/post/2009/01/19/Create-Vimeo-like-top-navigation.aspx)

（[演示](http://www.jankoatwarpspeed.com/examples/vimeo_navigation/)）

该菜单使用 UL / LI 结构和 CSS 进行适当的渲染。

问题是，如果浏览器不够宽，主菜单项就会换行。

![菜单包装](../Images/27ae12dd2ca345e6df1da85e46f7b47a.png)

我已经将菜单包围在一个 DIV 中。

当我申请

```
overflow-x: auto; 
```

对于该 DIV，将鼠标悬停在菜单项上会导致 DIV 周围出现滚动条（大概是为了容纳下拉菜单）。

如何在保留下拉菜单的同时防止 DIV 换行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:42:32.840

您可以简单地为 div 标签添加一个固定宽度，就像这样`width: 700px;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T03:06:41.850

我能想到的最佳解决方案是 The Jonas Persson 的回答中的评论中建议的解决方案。它正在使用`white-space: nowrap`. 但是，要使其正常工作，您必须使用`display: inline-block`而不是`float:left/right`水平对齐菜单的元素。

我使用 chrome 的 web 开发人员玩弄了你的演示并使它工作。

只需将 every 替换`float: left`为`display: inline-block`Add `font-size: 0`to`ul#menu`并将其覆盖`ul#menu li`为`font-size:12px`- 这就是您使用的大小。（使用`display: inline-block`在块之间添加了一些空格。这些`font-size`东西会处理它。）。

接下来确保内联块与容器顶部垂直对齐 - 添加`vertical-align: top`到`li`'s.

最后，将`whitespace: no-wrap`div 添加到 wrapping`ul#menu`中。而已。

# python - 如何根据 UTC 偏移量选择时区？

> ID：11657273
> 
> 赞同：4
> 
> 时间：2012-07-25T19:36:32.127
> 
> 标签：python, datetime, timezone, pytz

我有一个愚蠢的问题。我正在解析 Facebook 用户数据，并将时区作为数字获取：

> 时区：用户的时区与 UTC 的偏移量

对我来说（`'America/Argentina/Buenos_Aires'`）是-3。

现在，我怎样才能将该数字转换为`pytz.timezone`？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T19:47:17.457

没有 1:1 的对应关系，因此如果不做出一些必然无效的假设，就无法做到这一点。

您可以创建自己的[`tzinfo`](http://docs.python.org/library/datetime.html#tzinfo-objects)类来直接对偏移进行编码，而无需尝试将其绑定回区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-13T16:58:00.700

正如[@Mark Ransom 所说](https://stackoverflow.com/a/11657463/4279)，多个`pytz.timezone`在给定日期可能具有相同的 UTC 偏移量。您可以打印特定日期的映射：

```
#!/usr/bin/env python
from collections import defaultdict
from datetime import datetime

import pytz # $ pip install pytz

dt = datetime.now(pytz.utc) # current time in UTC
zone_names = defaultdict(list)
for tz in pytz.common_timezones:
    zone_names[dt.astimezone(pytz.timezone(tz)).utcoffset()].append(tz)

for offset, zone in sorted(zone_names.items()):
    print("%.1f %s" % (offset.total_seconds() / 3600, zone))
# -> -11.0 ['Pacific/Midway', 'Pacific/Niue', 'Pacific/Pago_Pago']
# ... 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-07-25T19:40:53.293

您可以使用[tzinfo.tzname](http://docs.python.org/library/datetime.html#datetime.tzinfo.tzname)获取区域名称。

# c++ - 带有“新”数组参数的 C++ 函数调用

> ID：11657275
> 
> 赞同：1
> 
> 时间：2012-07-25T19:36:33.710
> 
> 标签：c++, arrays, argument-passing

我想调用一个需要整数数组的函数。每次我想调用函数时，如果不创建一个新的整数数组，我怎么能做到这一点？

这就是我想要做的：

```
someFunction(new int[]{obj[0].getInt(), obj[1].getInt()}); 
```

而不是这样做：

```
int intArray[2] = {obj[0].getInt(), obj[1].getInt()};    
someFunction(intArray); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T20:06:44.940

假设您可以使用 C++11，您可以定义`somefunction`采用`std::vector`(或 a `std::vector const &`) 而不是实际数组，然后使用：

```
somefunction({obj[0].getInt(), obj[1].getInt()}); 
```

与 Java 不同，您不需要*在*`new`C++ 中定期使用。事实上，在大多数编写良好的代码中，这是相当不寻常的。

顺便说一句，您通常希望避免使用 C++ 的内置数组，而 C++11 使这样做更容易，以至于根本没有充分的理由使用它们。

# c# - C# 多用户应用程序中的技术，其中所有客户端都从中央数据库获取最新数据

> ID：11657277
> 
> 赞同：8
> 
> 时间：2012-07-25T19:36:36.487
> 
> 标签：c#, database, ef-code-first, multi-user

在多用户环境中：如何确保所有客户端都能看到彼此的变化？做这个的最好方式是什么？

过去我创建了一个 C# 应用程序并将其安装在 2 台电脑上。它连接到中央 SQL Express 服务器（客户端应用程序使用 Entity Framework Code First 作为 ORM）。当客户端 1 向数据库添加一条记录时，客户端 2 无法直接看到。仅当 client2 再次获取所有数据（硬刷新）时，更改才可见。

现在我正在寻找一个解决方案来解决这个“同步”（？）可以或应该如何完成。我喜欢首先使用实体​​框架代码，如果有一个解决方案可以保留这一点，那就太好了。此外，该应用程序仍处于非常早期的阶段。我想通过有一个中央数据库和多个客户端连接到它，但我不确定这是否是一个好的解决方案。如果您的建议/解决方案需要客户端连接到的中央服务器应用程序（以及服务器应用程序执行数据库处理的位置），这将没有问题。

如果可能的话，一个基本的示例解决方案或一些显示如何始终使用最新数据的基本代码可能会非常有帮助！

类似的问题：

*   [实体框架 - 基础数据（在数据库中）更改通知](https://stackoverflow.com/questions/4852564/entity-framework-underlying-data-in-database-change-notification?lq=1)
*   [具有中央数据库的多用户环境中的实体框架数据更新](https://stackoverflow.com/questions/11627959/entity-framework-data-updates-in-a-multi-user-environment-with-central-database)
*   [实体框架数据上下文与数据库不同步？](https://stackoverflow.com/questions/5462620/entity-framework-data-context-not-in-sync-with-database?rq=1)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:59:59.357

这取决于您的环境、您管理的数据以及您想要的架构。

如果让客户端拥有可以使用的数据副本是可以/可以接受的，那么他们需要在未连接到中央服务器时使用数据，那么您可以使用同步框架。

您将像往常一样拥有中央 SQL Server，并使用同步框架与客户端同步。

您将编写一个“提供者”来决定如何解决不同客户端对相同数据所做的更改等。

您必须将 SQL Express（或者可能是 LocalDB（SQLCE 的新名称））放到客户端机器上。

然后执行您的实体框架模型/代码来访问本地数据库而不是中央数据库。

[http://blogs.msdn.com/b/sync/archive/2008/06/24/sample-sql-express-client-synchronization-using-sync-services-for-ado-net.aspx](http://blogs.msdn.com/b/sync/archive/2008/06/24/sample-sql-express-client-synchronization-using-sync-services-for-ado-net.aspx)

否则就归结为设计和实现一些“层”并遵循分布式 Internet/数据库架构/SOA。

一个不错的免费资源：

[http://msdn.microsoft.com/en-us/library/ff650706.aspx](http://msdn.microsoft.com/en-us/library/ff650706.aspx)

[http://mtechsoa2011.blogspot.co.uk/2011/04/soa-vs-distributed-internet_27.html](http://mtechsoa2011.blogspot.co.uk/2011/04/soa-vs-distributed-internet_27.html)

一些有用的书：

[http://www.amazon.co.uk/Service-Oriented-Architecture-Concepts-Technology-Computing/dp/0131858580/ref=sr_1_1?s=books&ie=UTF8&qid=1343295432&sr=1-1](http://www.amazon.co.uk/Service-Oriented-Architecture-Concepts-Technology-Computing/dp/0131858580/ref=sr_1_1?s=books&ie=UTF8&qid=1343295432&sr=1-1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-28T10:05:11.957

其他解决方案是为您的数据库创建一个“接口”，并且来自某个客户端的每个放置数据操作都可以通知其他客户端。您可以通过 WCF 使用它的回调来实现这样的接口。对于整个架构解决方案，我没有简单的代码...如果您提出有关使用 WCF 构建 n 层应用程序的更具体问题，我会尽力提供帮助。

# url - Tigase XMPP 服务器 BOSH URL

> ID：11657278
> 
> 赞同：-1
> 
> 时间：2012-07-25T19:36:38.347
> 
> 标签：url, xmpp, tigase

请帮我确定 Tigase XMPP 服务器 BOSH URL

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:49:33.717

Tigase 中没有用于 Bosh 连接的特殊 XMPP url。只需确保连接到正确的 TCP/IP 端口 - 默认为 5280，HTTP url 并不重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T10:53:56.643

我正在使用 ejabberd 并且不知道 tigase，但是使用 ejabberd 它默认设置为：

```
http://localhost:5280/http-bind/ 
```

也许它有帮助。

# java - 小程序中的图像

> ID：11657282
> 
> 赞同：1
> 
> 时间：2012-07-25T19:36:48.513
> 
> 标签：java, japplet

我编写了这段代码来在小程序屏幕上显示一些简单的图片，但是在我调整小程序窗口大小之前，图片不会显示，我该怎么做才能克服它？

```
public class Test extends JApplet {
    public void init () {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createGUI();
            }
        });
    }
    public void start() {
    }
    public void createGUI() {
        getContentPane().add(new GUIThing(getImage(getCodeBase(), "gladiator.gif")));
    }
}

public class GUIThing extends JPanel {
    Image image;
    public GUIThing(Image i2) {
        image=i2;
    }
    public void paintComponent(Graphics g) {
        Graphics2D g2=(Graphics2D) g;
        g2.drawImage(image,100,100,100, 100, null);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:30:31.030

尝试将小程序上下文传递给该`drawImage`方法，这允许在加载图像时通知小程序，并且它将重新绘制自己

```
g2.drawImage(image,100,100,100, 100, this); 
```

而且，如果您真的很绝望，请调用`invalidate()` `repaint()`该`start`方法

**更新示例**

这是我使用的代码。我加载图像没有问题：

```
public class TestApplet extends JApplet {

    public void init() {

        System.out.println("Init..." + EventQueue.isDispatchThread());

        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                createGUI();
            }
        });

    }

    public void start() {

        System.out.println("Start..." + EventQueue.isDispatchThread());

    }

    public void createGUI() {

        URL documentBase = getDocumentBase();

        System.out.println(documentBase);
        System.out.println(getCodeBase());

//        file:.../build/TestApplet.html
//        file:.../build/classes/        
        Image image = getImage(documentBase, "MT-vol-6-STOP-image-Kogumiko-megatokyo-11434773-1559-1852.jpg");

        System.out.println("image = " + image);

        getContentPane().add(new GUIThing(image));
    }

    public class GUIThing extends JPanel {

        Image image;

        public GUIThing(Image i2) {
            image = i2;
        }

        public void paintComponent(Graphics g) {

            super.paintComponent(g);

            Graphics2D g2 = (Graphics2D) g;
            g2.drawImage(image, 0, 0, this);

            g2.setColor(Color.RED);
            g2.drawLine(0, 0, getWidth(), getHeight());

        }
    }

} 
```

哇，好久没玩小程序了。我将您的代码从使用代码库更改为似乎有效的文档库。我正在加载 1559x1852 像素的图像，几乎没有延迟（本地）

仔细检查您的 HTML 文件中的小程序标签。我正在使用

```
<APPLET codebase="classes" code="stack/TestApplet.class" width=350 height=200></APPLET> 
```

通过小程序查看器。注意代码库与文档库不同！！

我的图像与 HTML 文件位于同一位置

# ruby-on-rails - 如何按 _id 分组？

> ID：11657286
> 
> 赞同：1
> 
> 时间：2012-07-25T19:37:12.930
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb

我正在使用聚合框架。到目前为止，一切都很好。

```
conn = Mongo::Connection.new
db   = conn['foobar_development']

cmd = {
  aggregate: 'live_daily_stats',
  pipeline: [
    # { '$match' => { :_id => "20120725/foobar/song/custom-cred" } },
    { '$project' => {
      :visits => 1,
    } },
    { '$unwind' => '$visits' },
    # { '$group' => {
    #   :_id => '$_id'
    # } },
    { '$match' => { 'visits.minute' => { '$gt' => 224 } } },
    { '$sort' => { 'visits.minute' => 1 } },
    # { '$group' => { :_id => '$_id' } },
  ]
}

res = db.command(cmd)['result'] 
```

`results`返回以下内容。如您所见，有 4 个结果。即落入二下`_ids`。我如何将`visits`这些分组`_ids`？

```
[
    [0] {
           "_id" => "20120725/foobar/song/custom-cred",
        "visits" => {
                                          "country_name" => "UK",
                           "iso_two_letter_country_code" => "UK",
                                               "referer" => "http://localhost:3000/cfazzini/songs/custom-cred",
                                                "minute" => 251,
                                              "token_id" => "134318948211lzyqexgo"
        }
    },
    [1] {
           "_id" => "20120725/foobar/song/custom-cred",
        "visits" => {
                                          "country_name" => "UK",
                           "iso_two_letter_country_code" => "UK",
                                               "referer" => "http://localhost:3000/cfazzini/songs/custom-cred",
                                                "minute" => 1118,
                                              "token_id" => "134324148411hsrxvakn"
        }
    },
    [2] {
           "_id" => "20120725/foobar/song/test-pg3-long-title-here-test-lorem-ipsum-dolor-lo",
        "visits" => {
                                          "country_name" => "UK",
                           "iso_two_letter_country_code" => "UK",
                                               "referer" => "http://localhost:3000/",
                                                "minute" => 1121,
                                              "token_id" => "13432416893tlfsmmgh"
        }
    },
    [3] {
           "_id" => "20120725/foobar/song/custom-cred",
        "visits" => {
                                          "country_name" => "UK",
                           "iso_two_letter_country_code" => "UK",
                                               "referer" => "http://localhost:3000/",
                                                "minute" => 1121,
                                              "token_id" => "134324169011hmtkxrgt"
        }
    }
] 
```

其次，如何使用 rails 模型运行相同的命令，而无需定义`conn`and `db`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:58:14.100

1）您需要使用[$push](http://docs.mongodb.org/manual/reference/aggregation/#_S_push)运算符 - 例如：

```
cmd = {
  aggregate: 'live_daily_stats',
  pipeline: [
    { '$project' => {
        :visits => 1,
      }
    },
    { '$unwind' => '$visits' },
    { '$match' => { 'visits.minute' => { '$gt' => 224 } } },
    { '$sort' => { 'visits.minute' => 1 } },
    { '$group' => { :_id => '$_id', 
                    :visits => { '$push' => '$visits' }},
    }
  ]
} 
```

2）您可以像这样获取连接：`Mongoid.database.connection`而不必定义数据库和连接。聚合助手即将推出 - 目前正在进行中。按照这张票：[https ://jira.mongodb.org/browse/RUBY-455](https://jira.mongodb.org/browse/RUBY-455)

# c# - asp.net 模拟不起作用

> ID：11657287
> 
> 赞同：1
> 
> 时间：2012-07-25T19:37:15.443
> 
> 标签：c#, asp.net, impersonation

我需要在我的网络服务器的共享路径（在不同的服务器中）上写。我通过模拟一个有权在该服务器上写入的网络帐户来尝试此操作。当我通过从我的 Visual Studio 运行来尝试此操作时，它可以工作。但是当我在 Web 服务器的 IIS 中发布它时，它不起作用。

有人可以提供一些见解吗？

# java - 用于 ？在回报声明

> ID：11657289
> 
> 赞同：1
> 
> 时间：2012-07-25T19:37:21.240
> 
> 标签：java, return

在 Java 的 String.class 中，我看到了这个

```
public String substring(int beginIndex, int endIndex){
   //if statements
   return ((beginIndex == 0) && (endIndex == count)) ? this:
     new String (offset + beginIndex, endIndex - beginIndex, value);
} 
```

是什么 '？' 正在做？当我们讨论这个主题时，任何人都可以解释 return 语句中那个“新字符串”发生了什么吗？这是某种条件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T19:38:54.210

它是一个[*三元运算符*](http://en.wikipedia.org/wiki/%3F%3a)，相当于：

```
if((beginIndex == 0) && (endIndex == count)) {
  return this;
} else { 
  return new String (offset + beginIndex, endIndex - beginIndex, value);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T19:42:09.330

这是一个三元运算符。

```
Cake mysteryCake = isChocolate() ? new Cake("Yummy Cake") : new Cake("Gross Cake"); 
```

把它想象成：

*如果此条件为真，则分配第一个值，否则，分配第二个值。*

对于 return 语句，它变为：

*如果此条件为真，则返回第一个，否则返回第二个。*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T19:39:18.983

```
return boolValue ? a : b; 
```

`a`如果`boolValue`为真则返回，`b`否则返回。它是 的缩写形式`if` `else`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T19:39:38.950

```
return ((beginIndex == 0) && (endIndex == count)) ? this:
 new String (offset + beginIndex, endIndex - beginIndex, value); 
```

是相同的：

```
if ((beginIndex == 0) && (endIndex == count)) 
    return this;
else 
    return new String (offset + beginIndex, endIndex - beginIndex, value); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T19:41:57.453

`?:`is*三元运算符*:`a ? b : c`等价于：

```
if (a) then b; else c; 
```

> 任何人都可以解释返回语句中的“新字符串”发生了什么

三元运算符是此`return`语句中的条件，但`new String`不是一种条件，它只是构造一个新的`String`：根据条件，此`return`语句返回：

*   `this`， 或者
*   一个新`String`对象

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T19:41:20.983

它是一个[三元运算符](http://en.wikipedia.org/wiki/Ternary_operation)，用于许多编程语言，而不仅仅是 Java。将所有内容放在一行中非常有用，基本上它等于：

```
if (endIndex == count && beginIndex == 0)
{
    return this;
}
else
{
   return new String (offset + beginIndex, endIndex - beginIndex, value);
} 
```

New String 只是一个构造函数。

# sitecore - 在 Sitecore 中更改窗口对话框的大小？

> ID：11657290
> 
> 赞同：1
> 
> 时间：2012-07-25T19:37:23.143
> 
> 标签：sitecore

在 Sitecore 6.5 解决方案中，是否可以在后端更改窗口对话框的默认大小？例如“插入链接”对话框？我有一个包含许多项目的相当大的解决方案，并且在窗口的当前大小下，由于所有级别，在树侧快速显示水平滚动条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T05:54:09.153

我相信这可以通过 contentManager.css 文件进行更改？

# git - 计算 Git 分支上的提交次数

> ID：11657295
> 
> 赞同：240
> 
> 时间：2012-07-25T19:37:52.220
> 
> 标签：git

我已经找到了这个答案：[git 中分支上的提交数，](https://stackoverflow.com/questions/10913892/number-of-commits-on-branch-in-git) 但假设分支是从 master 创建的。

如何在*不*依赖该假设的情况下计算分支的提交次数？

在 SVN 中这是微不足道的，但由于某种原因，在 git 中真的很难弄清楚。

* * *

## 回答 #1

> 赞同：446
> 
> 时间：2012-07-25T19:58:39.000

要计算您所在分支的提交：

```
git rev-list --count HEAD 
```

对于一个分支

```
git rev-list --count <branch-name> 
```

如果您想计算自创建分支以来在分支上所做的提交

```
git rev-list --count HEAD ^<branch-name> 
```

这将计算所有不在分支名称上的提交。

# 例子

```
git checkout master
git checkout -b test
<We do 3 commits>
git rev-list --count HEAD ^master 
```

结果：3

如果您的分支来自一个名为`develop`：

```
git checkout develop
git checkout -b test
<We do 3 commits>
git rev-list --count HEAD ^develop 
```

结果：3

# 忽略合并

如果您在没有快进的情况下将另一个分支合并到当前分支并执行上述操作，则合并也会被计算在内。这是因为对于 git 来说，合并就是一次提交。

如果您不想计算这些提交，请添加`--no-merges`：

```
git rev-list --no-merges --count HEAD ^develop 
```

* * *

## 回答 #2

> 赞同：66
> 
> 时间：2013-03-05T13:53:13.400

要查看提交的总数，您可以按照 Peter 上面的建议进行操作

```
git rev-list --count HEAD 
```

如果您想查看每个人提交的数量，请尝试此行

```
git shortlog -s -n 
```

会产生这样的输出

```
135  Tom Preston-Werner
15  Jack Danger Canty
10  Chris Van Pelt
7  Mark Reid
6  remi 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2014-03-29T05:36:29.453

它可能需要一个相对较新的 Git 版本，但这对我来说很有效：

```
git rev-list --count develop..HEAD 
```

这为我提供了基于 master 的当前分支中提交的准确计数。

彼得回答中的命令`git rev-list --count HEAD ^develop`包括更多提交，在我当前的项目中是 678 对 97。

我的提交历史在这个分支上是线性的，所以 YMMV，但它给了我想要的确切答案，即“到目前为止，我在这个特性分支上添加了多少次提交？”。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2018-03-30T03:01:05.677

### **自历史开始以来对当前分支完成了多少提交，不包括来自合并分支的提交：**

```
git rev-list HEAD --count --first-parent 
```

从文档*git rev-list --help*：

> `--first-parent`
> 
> 在看到合并提交时，仅关注第一个父提交。在查看特定主题分支的演变时，此选项可以提供更好的概览，因为合并到主题分支往往只是不时调整到更新的上游，并且此选项允许您忽略引入的单个提交通过这样的合并你的历史。不能与 --bisect 结合使用。

*注意：*浅克隆会缩小历史记录大小。例如，如果您使用 克隆`--depth 1`，将返回 1。

### **自**其他一些提交后完成的提交数：

```
git rev-list HEAD abc0923f --count --first-parent 
```

或相同：

```
git rev-list abc0923f.. --count --first-parent 
```

或使用任何其他[git 参考](https://git-scm.com/book/en/v2/Git-Internals-Git-References)：

```
git rev-list master tag-v20 --count --first-parent 
```

* * *

### 计算**自 2018 年以来完成的提交**

```
git rev-list HEAD --count --first-parent --since=2018-01-01 
```

01-01-2018、01.01.2018、2018.01.01 也有效。

* * *

## [`git rev-label`](https://gitlab.com/kyb/git-rev-label/)

我编写了一个脚本来从 Git 获取版本修订，`'$refname-c$count-g$short$_dirty'`其格式类似于扩展为`master-c137-gabd32ef`.
脚本本身包含帮助。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-25T19:40:59.887

怎么样`git log --pretty=oneline | wc -l`

从当前分支的角度来看，这应该计算所有提交。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-06-22T08:56:01.450

如果您使用的是 UNIX 系统，您可以这样做

```
git log|grep "Author"|wc -l 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-09-20T16:44:15.843

我喜欢做`git shortlog -s -n --all`。为您提供名称和提交次数的“排行榜”样式列表。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-25T19:43:19.377

一种方法是列出您的分支的日志并计算行数。

```
git log <branch_name> --oneline | wc -l 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-11-06T09:35:09.887

`master`好吧，如果您将分支从非特定分支（即 not or `develop`）中分叉出来，则所选答案不起作用。

在这里，我提供了另一种在我的`pre-push`git 挂钩中使用的方法。

```
# Run production build before push
echo "[INFO] run .git/hooks/pre-push"

echo "[INFO] Check if only one commit"

# file .git/hooks/pre-push
currentBranch=$(git symbolic-ref HEAD | sed -e 's,.*/\(.*\),\1,')

gitLog=$(git log --graph --abbrev-commit --decorate  --first-parent HEAD)

commitCountOfCurrentBranch=0
startCountCommit=""
baseBranch=""

while read -r line; do

    # if git log line started with something like "* commit aaface7 (origin/BRANCH_NAME)" or "commit ae4f131 (HEAD -> BRANCH_NAME)"
    # that means it's on our branch BRANCH_NAME

    matchedCommitSubstring="$( [[ $line =~ \*[[:space:]]commit[[:space:]].*\((.*)\) ]] && echo ${BASH_REMATCH[1]} )"

    if [[ ! -z ${matchedCommitSubstring} ]];then

      if [[  $line =~ $currentBranch ]];then
        startCountCommit="true"
      else
        startCountCommit=""

        if [[ -z ${baseBranch} ]];then
          baseBranch=$( [[ ${matchedCommitSubstring} =~ (.*)\, ]] && echo ${BASH_REMATCH[1]} || echo ${matchedCommitSubstring} )

        fi

      fi

    fi

    if [[ ! -z ${startCountCommit} && $line =~ ^\*[[:space:]]commit[[:space:]] ]];then
      ((commitCountOfCurrentBranch++))
    fi

done <<< "$gitLog"

if [[ -z ${baseBranch} ]];then

  baseBranch="origin/master"

else

  baseBranch=$( [[ ${baseBranch} =~ ^(.*)\, ]] && echo ${BASH_REMATCH[1]} || echo ${baseBranch} )

fi

echo "[INFO] Current commit count of the branch ${currentBranch}:  ${commitCountOfCurrentBranch}"

if [[ ${commitCountOfCurrentBranch} -gt 1 ]];then
  echo "[ERROR] Only a commit per branch is allowed. Try run 'git rebase -i ${baseBranch}'"
  exit 1
fi 
```

更多分析请访问[我的博客](https://www.xiaofang.me/2017/11/06/how-to-count-commits-in-a-specific-branch-%E5%A6%82%E4%BD%95%E8%AE%A1%E7%AE%97%E4%B8%80%E4%B8%AAgit-%E5%88%86%E6%94%AF%E9%87%8C%E7%9A%84-commit%E6%95%B0%E9%87%8F%EF%BC%9F/)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-04-01T13:41:29.740

作为 OP 引用[Number of commits on branch in git](https://stackoverflow.com/questions/10913892/number-of-commits-on-branch-in-git)我想补充一点，那里的给定答案也适用于任何其他分支，至少从 git 版本 2.17.1 开始（并且似乎比 Peter van der 的答案更可靠）：

正常工作：

```
git checkout current-development-branch
git rev-list --no-merges --count master..
62
git checkout -b testbranch_2
git rev-list --no-merges --count current-development-branch..
0 
```

由于我刚刚创建了分支，最后一个命令按预期给出了零提交。之前的命令给了我开发分支上的实际提交数减去合并提交

无法正常工作：

```
git checkout current-development-branch
git rev-list --no-merges --count HEAD
361
git checkout -b testbranch_1
git rev-list --no-merges --count HEAD
361 
```

在这两种情况下，我都得到了开发分支和主分支中所有提交的数量（间接地）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-08-12T06:08:39.970

您可以使用在 git bash/unix 上使用 awk 的命令来获取提交次数。

```
 git shortlog -s -n | awk '/Author/ { print $1 }' 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2017-03-19T06:56:10.403

你也可以做 git log | grep 提交 | wc -l

并取回结果

# c# - DataGridView 未绑定到我的 linq 查询

> ID：11657308
> 
> 赞同：1
> 
> 时间：2012-07-25T19:38:38.937
> 
> 标签：c#, linq, binding, datagridview

我在将 DataGridView 绑定到基于强类型数据表的 LINQ 结果时遇到问题。直接绑定到 DataTable 工作正常。工作示例：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        // TODO: This line of code loads data into the 'MYDSDataSet.MYTABLE' table. You can move, or remove it, as needed.
        this.MYTABLETableAdapter.Fill(this.MYDSDataSet.MYTABLE);

        this.dataGridView1.DataSource = this.MYDSDataSet.MYTABLE;
    }
} 
```

使用以下行不起作用：

```
 this.dataGridView1.DataSource = this.MYDSDataSet.MYTABLE.Select(x => x); 
```

通过工作/不工作，我的意思是在第一个示例中，我的 datagridview 将自动生成数据表的所有列并向我显示所有结果。在第二个示例中，我不会收到任何错误，但我的 datagridview 将完全为空，就好像我根本没有为其分配 DataSource 一样。

从我在本网站和其他网站上阅读的内容来看，我应该对我正在做的事情没有任何问题，但无论如何我都无法获得正确的结果。有任何想法吗？如果您需要更多可以提供帮助的信息，请告诉我。

编辑 1：其他详细信息。

我尝试了以下几行，但均未成功：

```
this.dataGridView1.DataSource = this.MYDSDataSet.Tables["MYTABLE"].AsEnumerable().Select(x => x);
this.dataGridView1.DataSource = this.MYDSDataSet.MYTABLE.AsEnumerable().Select(x => x);
this.dataGridView1.DataSource = this.MYDSDataSet.MYTABLE.Select(x => x).ToList();
this.dataGridView1.DataSource = from x in this.MYDSDataSet.MYTABLE select x; 
```

调试时，上面的所有结果数据子集都包含正确的数据/行数。

我的强类型数据表是由 Visual Studio 2010 数据源向导提供的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:56:39.467

使用以下方式编写：

```
this.MYDSDataSet.MYTABLE.AsEnumerable().Select(x => x) 
```

DataTable RowCollection 没有实现 IEnumerable，因此除非使用 AsEnumerable() 对其进行转换，否则无法对其运行查询

编辑 - 无法在其他答案中添加评论以进行讨论。

在 VS2010 中使用 MYTABLE.Select(x => x) 对我不起作用。它返回以下错误：无法将 lambda 表达式转换为类型“字符串”，因为它不是委托类型。Select() 需要一个字符串表达式，而不是 lambda。

# jquery - 检索表格单元格值，其中每个行的一个单元格有一个输入框（JQUERY）

> ID：11657312
> 
> 赞同：0
> 
> 时间：2012-07-25T19:38:52.413
> 
> 标签：jquery, asp.net, vb.net

```
var values = [];

            $('#Route1 td').each(function () {
                //  values.push($(this).text());

                values.push($(this).html());

            }); 
```

在上面的代码中，我试图将表中的所有列加载到数组中。但是，每一行的一个表格单元格中都有一个输入框。如何加载文本框的实际值而不是加载整个 html 。

单元格如下所示。

```
 "<td><input type=text id=text1 value="I am input"/></td>" 
```

我遇到的另一个问题是，即使我更改了文本框中的值，当我从 JQUERY 检索它时，第一次加载页面时它仍然保持不变并且不采用输入框的最新值。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T19:36:19.637

我在下面找到了答案

```
 $(".start").keyup(function(){
        $(this).closest('tr').find("input").each(function() {
             alert(this.value)
        });
    }); 
```

虽然我最终使用了一种完全的方法，在我的表中有链接，一旦单击一个带有文本框的弹出窗口，就会出现并将值发送到表数据。

# apache - 为每个用户设置不同的 apache 目录权限

> ID：11657315
> 
> 赞同：1
> 
> 时间：2012-07-25T19:38:56.873
> 
> 标签：apache, ubuntu, permissions

在我的 ubuntu Web 服务器上，我有多个虚拟主机，例如：

```
/var/www/website1/html
/var/www/website2/html
/var/www/website3/html 
```

我有 3 个不同的用户，我只希望每个用户都能够编辑自己的网站文件。我不在乎他们是否可以看到彼此的文件。所有人只需要确保他们只能编辑自己的文件。

我已经研究过编辑 sshd_config 但使用 ssh 似乎也限制了他们可以看到的内容，而且我不想搞砸一些东西，所以我不能再通过 ssh 进入我的服务器。

我可以通过文件夹的基本用户权限完成我想要的吗？例如，将所有者设置为 user1，将组设置为 www-data。或者这会给apache带来问题吗？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:41:48.310

我相信只要文件具有对 apache 的读取权限就可以读取它们。所以一个简单的“chown -R 用户目录”应该可以解决问题。

# sql-server-2012 - SQL Server Management Studio Express 2012 - 需要登录数据库“msdb”

> ID：11657317
> 
> 赞同：1
> 
> 时间：2012-07-25T19:38:59.873
> 
> 标签：sql-server-2012

我使用**SQL Server 2008 – Developer Edition**几年只是为了使用**SQL Server Management Studio**和**导入和导出数据**工具，不需要 SQL Server 实例，因为我总是使用远程服务器。

现在，我尝试了**SQL Server Management Studio Express 2012**，它包含了**导入和导出数据**工具，这正是我所需要的，但现在我遇到了一个问题，当我右键单击数据库以访问**生成脚本**向导时，我收到以下消息：

```
Cannot open database "msdb" requested by the login. The login failed.
Login failed for user 'stocks'. (Microsoft SQL Server, Error: 4060) 
```

我从来没有遇到过 SQL Server 2008、2005 和 2000 的这个问题。任何人都知道为什么需要登录到数据库“msdb”来执行此操作？是否有其他方法可以访问“**生成脚本**”向导？

# c# - Asp.Net 应用程序正确使用 .RowFilter 到文本框

> ID：11657319
> 
> 赞同：1
> 
> 时间：2012-07-25T19:39:09.160
> 
> 标签：c#, asp.net, if-statement, ado.net, switch-statement

在我正在编写的应用程序中，我正在连接到 SQL 数据库，然后使用 an`Adapter`来保存返回的结果，但现在我想过滤结果`.RowFilter`三次，每次将过滤后的结果返回到 Textbox。我不确定这是否最好使用`if`语句或某些`Switch`语句来执行。继承人的代码更好地了解我想要做什么。

```
using (con)
{
    con.Open();
    SqlCommand cmd = new SqlCommand(selectSQL, con);
    cmd.Parameters.AddWithValue("@num", IDnumber);
   //SQLConnection Established and Opened
    SqlDataAdapter adapter = new SqlDataAdapter(selectSQL, con);
    DataTable dt = new DataTable();
    adapter.Fill(dt);
   //Adapter Created and Filled

    DataView dvQ = dt.DefaultView;

    dvQ.RowFilter = "AccountType = Q"; 
    QualVol.Text = "TotalVolume".ToString();
   //First Filter then Change QualVol textbox text to Column data TotalVolume

    dvQ.RowFilter = "AccountType = N";
    NonVol.Text = "TotalVolume".ToString();
    //Filter original DataView then Change NonVol textbox text to Column data TotalVolume

    dvQ.RowFilter = "AccountType = M";
    MidVol.Text = "TotalVolume".ToString();
    //Filter original DataView then Change NonVol textbox text to Column data TotalVolume
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:55:51.613

根据 dotnetperls 的性能 a`switch`优于 an`if`但也提供了一个很好的线索，说明 if 的性能优于 switch

[http://www.dotnetperls.com/if-switch-performance](http://www.dotnetperls.com/if-switch-performance)

# c# - 如何配置网格视图列以自己保存超链接？

> ID：11657320
> 
> 赞同：1
> 
> 时间：2012-07-25T19:39:12.613
> 
> 标签：c#, asp.net

我正在用所有必要的数据填写一个 DataTable。我希望“进程”列包含一个超链接，以便在单击时指向特定页面（基于进程名称。

这是我到目前为止的代码：

```
Object[] row = new Object[7];
HyperLink link = new HyperLink();
link.Text = Process.ToString();
link.NavigateUrl = String.Format("~/IndexSummary?Process={0}", Process.ToString());
row[0] = link;

//...Fill in rest of row

dt.LoadDataRow(row,false);

GridView1.DataSource = dt;
GridView1.DataBind(); 
```

当我执行此代码时，每一行都会显示“System.Web.UI.WebControls.HyperLink”。这是我的 GridView 代码：

```
<asp:GridView ID="GridView1" runat="server" CellPadding="3"
        ForeColor="#333333" GridLines="None"
        AllowSorting="True" SortedAscendingHeaderStyle-CssClass="sortasc-header" 
        SortedDescendingHeaderStyle-CssClass="sortdesc-header" AutoGenerateSelectButton="True"
        AllowPaging="True" PageSize="17" PagerSettings-Mode="NextPreviousFirstLast" 
        ShowHeaderWhenEmpty="True" PagerStyle-Font-Names="WebDings" PagerStyle-Font-Size="Medium"
        PagerSettings-FirstPageText=" 7 " PagerSettings-PreviousPageText=" 3 " 
        PagerSettings-NextPageText=" 4 " PagerSettings-LastPageText=" 8 " 
          Font-Size="Small" onselectedindexchanged="GridView1_SelectedIndexChanged" 
          onpageindexchanging="GridView1_PageIndexChanging" 
    onsorting="GridView1_Sorting">
        <AlternatingRowStyle BackColor="White" ForeColor="#333333" />
        <EditRowStyle BackColor="#999999" />
        <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />

<PagerSettings FirstPageText=" 7 " LastPageText=" 8 " Mode="NextPreviousFirstLast"     NextPageText=" 4 " PreviousPageText=" 3 "></PagerSettings>

        <PagerStyle BackColor="#5D7B9D" ForeColor="White" HorizontalAlign="Center" />
        <RowStyle BackColor="#DCE2E8" ForeColor="#333333" />
        <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />

<SortedAscendingHeaderStyle CssClass="sortasc-header"></SortedAscendingHeaderStyle>

<SortedDescendingHeaderStyle CssClass="sortdesc-header"></SortedDescendingHeaderStyle>
     </asp:GridView> 
```

如何更改它以正确显示超链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T14:59:47.943

只是回来回答我的问题，以防它可以帮助其他人：

我必须像这样在 RowDataBound 事件中添加超链接：

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
       {
        String Process = e.Row.Cells[0].Text;
        HyperLink link = new HyperLink();
        link.Text = Process;
        link.NavigateUrl = String.Format("~/IndexSummary.aspx?Process={0}&Machine={1}&Date={2}", Process, Request.QueryString["Machine"], Request.QueryString["Date"]);
        e.Row.Cells[0].Controls.Add(link);

       } 
```

# python - python类型错误：a未定义

> ID：11657323
> 
> 赞同：0
> 
> 时间：2012-07-25T19:39:17.593
> 
> 标签：python, variables, types

Python新手在这里。我正在编写一个程序来计算子字符串是字符串的次数，但一直收到错误消息：TypeError：a 未定义。我看过 /google 过类似的线程，但代码通常很复杂，很难理解。

这是我的代码：

```
def stringcount(char, word):
for eachChar in word:
    if char==eachChar:
        count=count+1
        return count
    print count

stringcount('a', 'apple') 
```

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:44:02.613

```
def stringcount(c, word):
    count = 0
    for eachChar in word:
        if c==eachChar:
            count=count+1

    return count

>>> stringcount('a', 'apple')
1
>>> 
```

但在这种情况下，您可以简单地使用：

```
>>> 'apple'.count('a')
1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T19:46:27.260

这段代码很危险。您没有初始化`count`，因此如果`count`作为变量存在于命名空间中，您每次都可以获得不同的结果。例如，如果您多次调用该函数，`count`将不会重置，并且第二次调用该函数将返回`2`. 以下代码更安全且有效。

```
def stringcount(char, word):
    count = 0
    for eachChar in word:
        if char==eachChar:
            count += 1
    return count

>>> stringcount('a', 'apple')
1 
```

另请注意，您可以简单地做`'apple'.count('a')`同样的事情。

一个不错的单线做同样的事情：

```
def stringcount(char, word):
    return sum(x==char for x in word)
>>> stringcount('p', 'apple')
2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:47:09.143

如果你不是为了编程练习而写的，你可以这样做：

```
def stringcount(c, word):
    return word.count(c)

print stringcount("a", "apple") 
```

文档：[http ://docs.python.org/library/string.html#string.count](http://docs.python.org/library/string.html#string.count)

# jquery - jquery .val for textarea 变成空白

> ID：11657334
> 
> 赞同：0
> 
> 时间：2012-07-25T19:40:07.343
> 
> 标签：jquery, html

这是我的第一篇文章……就这样吧！

我试图在单击按钮时获取文本区域的值 - 2之一 - >它注册按钮单击并很好地触发我的 php 脚本，但不会注册 textarea 内容，它显示为空。我使用过 .val、.text 和 .html。我不确定出了什么问题...

HTML：

```
<div> <textarea id="comments_box" placeholder="Reasoning for your decision ..." style="width:99%" ></textarea> </div> 
```

jQuery

```
$("#reject").click(function(){
        var comments = $("#comments_box").val();
                    alert(comments);
 });

$("#accept").click(function(){
        var comments = $("#comments_box").val();
                    alert(comments);
 }); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T19:42:36.000

你忘了`()`后面`val`。应该是`var comments = $("#comments_box").val();`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:43:15.810

```
$("#reject").click(function(){
        var comments = $("#comments_box").val;
                    alert(comments);

$("#accept").click(function(){
        var comments = $("#comments_box").val;
                    alert(comments); 
```

需要是...

```
$("#reject").click(function(){
        var comments = $("#comments_box").val();
        alert(comments);
});
$("#accept").click(function(){
        var comments = $("#comments_box").val();
        alert(comments);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:45:31.320

而不是`.val;`使用`.val();`将解决您的问题的使用。请务必经常检查浏览器控制台是否存在 javascript 语法错误，这一点也很重要。

* * *

只是添加一些东西，如果您的 textarea 在 DOM 中，请使用以下内容：

```
$('#reject').on('click', function(){ /*your code*/ }); 
```

# asp.net - Asp.net MVC3：如何从数据库中输入用户名文本

> ID：11657337
> 
> 赞同：1
> 
> 时间：2012-07-25T19:40:13.497
> 
> 标签：asp.net, asp.net-mvc-3, layout

我正在使用以下任何视图加载用户 id 的名称：

```
var oUser = db.User.FirstOrDefault(x => x.ID == User.Identity.Name.Remove(0, 6));
    if (oUser == null || (oUser.firstname == null|| oUser.lastname == null))
        ViewBag.User = User.Identity.Name.Remove(0, 6);
    else
        ViewBag.User = oUser.firstname + " " + oUser.lastname; 
```

但我希望每次都在 _layout 中使用用户名字符串，而不是每次都加载它。将其加载到 viewbag 可能是一种可能性，但我不知道将代码放在哪里以将字段传递给布局。

顺便说一句，这行不通，这不是我要找的：

```
 @if(Request.IsAuthenticated) {
        <text>Welcome <b>@Context.User.Identity.Name</b>!
        [ @Html.ActionLink("Log Off", "LogOff", "Account") ]</text>
    }
    else {
        @:[ @Html.ActionLink("Log On", "LogOn", "Account") ]
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T15:47:02.030

好的，从控制器注册 javascript 的最简单解决方案非常明显，但对于不熟悉该模式的人来说令人沮丧：

使用命名部分，我们找到了放置 javascript 的地方

您可以使用**[命名部分][1]。**

**_Layout.cshtml**

```
<head>
    <script type="text/javascript" src="@Url.Content("/Scripts/jquery-1.6.2.min.js)">
    @RenderSection("JavaScript", required: false)
</head> 
```

和这个视图代码

**_SomeView.cshtml**

```
@section JavaScript
{
    @Html.Raw(ViewBag.message)
} 
```

**在我们放置的控制器中**

```
ViewBag.message = @"<script type='text/javascript' language='javascript'>alert(""Hello World!"")</script>"; ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:55:26.723

按照你说的：

将此代码移动到 _layout

```
@{
  var oUser = db.User.FirstOrDefault(x => x.ID == User.Identity.Name.Remove(0, 6));
     if (oUser == null || (oUser.firstname == null|| oUser.lastname == null))
        ViewBag.User = User.Identity.Name.Remove(0, 6);
     else
        ViewBag.User = oUser.firstname + " " + oUser.lastname;
 }

 @ViewBag.User 
```

现在第一位在 _layout 中作为代码运行。最后一行只是告诉它将 Viewbag.User 中的字符串写入屏幕。

# java - 在 for 语句的初始化中可以初始化多少个变量？

> ID：11657341
> 
> 赞同：4
> 
> 时间：2012-07-25T19:40:23.730
> 
> 标签：java, for-loop, initialization

一个简单的 for 语句是：

```
 for(int i = 0/*A Optional*/; i < 10/*B Optional*/; i++/*C Optional*/) {
 } 
```

现在我可以在 for 语句的初始化代码（A）中初始化多少个变量？另外，我将如何在 for 语句的初始化代码（A）中初始化这些变量？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T19:44:27.560

你想写多少就写多少，但*声明*仅限于同一类型。（对于*初始化*，请参见下面的扩展和 Wugs 的回答。）

```
for (int a = 1, b = 2, c = 3 ; ; ) {
    break;
} 
```

* * *

（可选）[ForInit](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.1.1)部分可以是：

> 1.  如果 ForInit 代码是**语句表达式列表**（第 14.8 节），则表达式按从左到右的顺序计算；它们的值（如果有）将被丢弃。
>     
>     
> 2.  如果 ForInit 代码是**一个局部变量声明**，它的执行就好像它是一个出现在块中的局部变量声明语句（第 14.4 节）。
>     
>     
> 3.  如果 ForInit 部分**不存在**，则不执行任何操作。

上面带有声明的示例代码的格式为`for(LocalVariableDeclaration;;)`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T19:47:30.423

您可以初始化任意类型的任意数量，但如果您使用内联声明，则所有声明的变量必须是相同的类型，就像 pst 提到的那样。

```
for (int i = 1, j = 0, k = -1; ; );

string s;
double d;

for (s = "", d = 1.5; ; ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T19:50:51.330

您可以使用逗号分隔 for 循环中的语句，因此您可以根据需要初始化任意数量的变量。如果你想初始化几个变量，你的 for 循环应该是这样的：

```
 for(int i = 0, x = 1, d = 2; i < 10; i++, x++) {
 } 
```

它们必须是同一类型。

# android - 基于浏览器的移动应用程序可以检测传入的电话号码吗？

> ID：11657343
> 
> 赞同：-3
> 
> 时间：2012-07-25T19:40:24.947
> 
> 标签：android, iphone, mobile, blackberry

从理论上讲，是否有可能编写一个基于 Web 浏览器的移动应用程序（即不是本机应用程序）来检测来电的电话号码并根据数据库检查该电话号码？它只需要在最新版本的 BlackBerry、iPhone 和 Android 手机浏览器上运行。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:46:14.940

不，这不会暴露给浏览器，也不应该暴露给浏览器。

# postgresql - PlPgsql 函数返回数据库的结果集

> ID：11657344
> 
> 赞同：0
> 
> 时间：2012-07-25T19:40:27.440
> 
> 标签：postgresql, plpgsql

我在 PL/PGSQL 中遇到了函数问题。基本上，我有一个查询：

```
SELECT nspname AS schemaname,relname,reltuples
FROM pg_class C
LEFT JOIN pg_namespace N ON (N.oid = C.relnamespace)
WHERE 
  nspname NOT IN ('pg_catalog', 'information_schema') AND
  relkind='r' and nspname='1' 
ORDER BY relname; 
```

此查询派生表中已打开行的数据库统计信息。但是我们的数据库有大量的模式。我必须编写函数，使用该查询遍历所有方案，获取每个方案中表中打开的行数。我试图用谷歌搜索这个问题，但我找不到任何相关的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T06:16:04.670

使用武力，阅读......错误......手册！

*   [返回 TABLE 的 SQL 函数](http://www.postgresql.org/docs/current/static/xfunc-sql.html#XFUNC-SQL-FUNCTIONS-RETURNING-TABLE)（也适用于 PL/pgSQL 函数）
*   [SQL 函数返回集](http://www.postgresql.org/docs/current/static/xfunc-sql.html#XFUNC-SQL-FUNCTIONS-RETURNING-SET)（也适用于 PL/pgSQL 函数）
*   PL/pgSQL 控制结构：[从函数返回](http://www.postgresql.org/docs/current/static/plpgsql-control-structures.html#PLPGSQL-STATEMENTS-RETURNING)

但是，在这种情况下，不需要花哨的逻辑，只需将单个 SQL 查询包装在一个函数中，这样一个普通的[SQL 函数](http://www.postgresql.org/docs/current/static/xfunc-sql.html)就可以了。

这里使用的唯一额外功能是[复制类型](http://www.postgresql.org/docs/current/static/plpgsql-declarations.html#PLPGSQL-DECLARATION-TYPE)。

```
create or replace function get_my_database_status2()
returns table(schemaname pg_namespace.nspname%type, 
              relname    pg_class.relname%type, 
              reltuples  pg_class.reltuples%type)
as $$
  SELECT N.nspname, C.relname, C.reltuples
    FROM pg_class C
    LEFT JOIN pg_namespace N ON N.oid = C.relnamespace
   WHERE N.nspname NOT IN ('pg_catalog', 'information_schema') 
     AND C.relkind = 'r' -- here maybe some filtering
   ORDER BY relname;
$$ language sql; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T20:41:10.143

您可以在函数中定义返回值，只需记住具有正确的数据类型或准备进行一些类型转换。

```
创建或替换函数 get_my_database_status()
返回 TABLE(schemaname name, relname name, reltuples real)AS
$$
开始
   返回查询（SELECT N.nspname AS schemaname，C.relname，C.reltuples
       FROM pg_class C
       左连接 pg_namespace N ON (N.oid = C.relnamespace)
       WHERE N.nspname NOT IN ('pg_catalog', 'information_schema')
       AND C.relkind='r' - 这里可能有一些过滤
       按 relname 排序）；
结尾
$$
语言'plpgsql'；
```

# c# - 如何在 DataGridViewComboBoxCell 中选择一个值？

> ID：11657345
> 
> 赞同：8
> 
> 时间：2012-07-25T19:40:35.817
> 
> 标签：c#, winforms, datagridview

我有 DataGridViewComboBoxCell 和一个 DataTable。表中的数据我使用DataSource与DataGridViewComboBoxCell绑定，并设置ValueMember和DisplayMember。

```
private void Form1_Load(object sender, EventArgs e)
{         
    DataGridViewComboBoxCell comboBoxCell = new DataGridViewComboBoxCell();

    dataGridView1.Rows[0].Cells[0] = comboBoxCell;

    comboBoxCell.DataSource = dataTable;
    comboBoxCell.ValueMember = "ID";
    comboBoxCell.DisplayMember = "Item";
} 
```

如何在表单加载时以编程方式设置单元格中的值？在简单的 ComboBox 中，我知道一个属性 SelectedIndex。我试过 comboBoxCell.Value = ...; 但它给出了一个例外。并尝试过

```
private void dataGridView1_CellFormatting(object sender, 
    DataGridViewCellFormattingEventArgs e)
{
    e.Value = 1;
} 
```

它在单元格中设置了一个新值，但我需要选择一个值。

表单已加载，我有空单元格。

![表单已加载，我有空单元格。](../Images/15776c34fce09f11a842e2306858b2a5.png)

以及 ComboBox 中的一些数据。

![以及 ComboBox 中的一些数据。](../Images/d567f52d94672448a010a8fc95341987.png)

当我将此代码放在`dataGridView1.Rows[0].Cells["ComboColumn"].Value = "1";`comboBoxCell.DisplayMember = ...（见上文）之后，它工作正常。

ID 列中的值“1”对应于 Items 列中的值“Second”。所以，我得到了正确的结果。

![价值](../Images/fc91214ae35eb8b85bbe53f6c487845b.png)

对不起我的英语和我的新手代码:)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-25T19:43:01.280

不要在网格中添加单元格，而是添加一`DataGridViewComboBox`列。

```
DataGridViewComboBoxColumn c = new DataGridViewComboBoxColumn();
c.Name = "ComboColumn";
c.DataSource = dataTable;
c.ValueMember = "ID";
c.DisplayMember = "Item";
dataGridView1.Columns.Add(c); 
```

要选择特定值，请设置给定单元格的 Value 属性。

```
dataGridView1.Rows[rowIndexYouWant].Cells["ComboColumn"].Value = 1; 
```

*   注意这里的类型很重要！在评论中你说你得到一个`System.FormatException`. 这可能是由于为该值设置了错误的类型。

    当您将值设置为 1 时，您正在分配一个 int - 如果由于某种原因您在 ID 列中有字符串，您将得到`System.FormatException`您所看到的异常。

    如果类型不同，您需要更新 DataTable 定义或将值设置为字符串：

    ```
    dataGridView1.Rows[rowIndexYouWant].Cells["ComboColumn"].Value = "1"; 
    ```

*   另请注意，此值**必须存在**于您已设置为网格源的 DataTable 的 ID 列中。

* * *

`DataGridView`当它有它的 DataSource 集时，通常最容易使用它。在这种情况下，您可以使用 DataPropertyName 属性将 ComboBoxColumn 绑定到网格的 DataSource。

```
c.DataPropertyName = "GridDataSourceColumnName"; 
```

这允许从网格数据源中获取列值，并对列进行更改以直接更改该数据源。

* * *

最后，不要在此处使用 CellFormatting 事件 - 此事件不适用于此类用途。通常最好在 DataBindingComplete 事件（如果您只希望它完成一次）中或在需要 DefaultValues 或 RowValidating 之类的某些事件中执行此类工作。

通过使用 CellFormatting，您可能会使用户无法手动编辑组合框。

# html - 悬停的CSS特异性

> ID：11657348
> 
> 赞同：4
> 
> 时间：2012-07-25T19:40:48.237
> 
> 标签：html, css, css-specificity

我有css特异性问题。

`<td>`如果“没有账单”，我希望样式的颜色不同，所以我用 if 语句设置样式。如果没有票据，则样式为`style = "id=\"no-bills\"";`。我得到了这个与css一起工作。现在，如果用户将鼠标悬停在它上面，我希望背景变为红色 - 所以我修改了 css 并添加了，当你将鼠标悬停在它上面时`#bill-list #no-bills td:hover`，它必须添加一些额外的特异性。`td:hover`不幸的是，这不起作用（背景保持不变）。

这是我的CSS：

```
#bill-list
{
    font-family: "Lucida Sans Unicode", "Lucida Grande", Sans-Serif;
    font-size: 12px;
    /*margin: 45px;*/
    width: 100%;
    text-align: left;
    border-collapse: collapse;
}
#bill-list th
{
    font-size: 13px;
    font-weight: normal;
    padding: 8px;
    background: #b9c9fe;
    border-top: 4px solid #aabcfe;
    border-bottom: 1px solid #fff;
    color: #039;
}
#bill-list td
{
    padding: 8px;
    background: #e8edff; 
    border-bottom: 1px solid #fff;
    color: #669;
    border-top: 1px solid transparent;
}
#bill-list tr:hover td
{
    background: #d0dafd;
    color: #339;
}

#bill-list #bill td
{
    background: white;
}

#bill-list #no-bills
{
    background: #FFCC99;
}
#bill-list #no-bills td:hover
{
    color: orange;
    background: red /*#FFCC66*/;
} 
```

这是我的代码（片段）：

```
<table id="bill-list">
<thead>
    <tr>
        <% for (int i=0; i<vecHeader.size(); i++) { %>
            <th><%=vecHeader.get(i) %></th>
        <% } %>
    </tr>
</thead>

<tbody>
    <%  int uniqueId = 0;
        for (int i=0; i < vecValue.size(); i++) { 
        boolean hasBills = true;
        String style = "";
        if ( vecBills.get(i) == null || vecBills.get(i).size() == 0 ) {
            hasBills = false;
            style = "id=\"no-bills\"";
        }
        %>
        <tr id="bill<%=i%>" onclick="javascript:showBillDetails(<%=i%>)">
            <% for (int j=0; j < vecHeader.size(); j++) {
                prop = (Properties)vecValue.get(i);
                %>
                <td <%=style%>><%=prop.getProperty((String)vecHeader.get(j), "&nbsp;") %>&nbsp;</td>
            <% } %>
        </tr>
...
... 
```

有人有想法么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:46:08.243

您应该发布 HTML 代码，而不是生成它的代码，这在这里无关紧要。

`no-bills`第一个问题：您确定同一页面上不能有 2 个id 吗？

然后是您的问题：您正在尝试将样式`td:hover`设置为`#no-bills`. 后者是同一个td，不是一个升天！然后你应该 style `#bill-list #no-bills:hover`，这似乎是一个`td`被悬停的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:00:02.477

尝试

```
#bill-list #no-bills:hover 
```

代替

```
#bill-list #no-bills td:hover 
```

如果有多个无账单，您应该使用 class over id。

# html - 如何修复 IE 的 background-size:cover 问题？

> ID：11657350
> 
> 赞同：1
> 
> 时间：2012-07-25T19:40:51.593
> 
> 标签：html, internet-explorer, css

我在网上搜索了解决方案，但他们都在谈论如何为整个页面设置背景......但我需要填写页面的某个部分......我该怎么做？

这是我们所拥有的......在我们的页面上，我们有几个不同的部分，在其中一个部分中，我需要将图像的背景大小设置为“cover”（这是我唯一一次使用此属性）。这是我用来生成 img 标签的 php 函数：

```
function getRandomFeatureVideo()
{
// Youtube feed
$xml = simplexml_load_file('https://gdata.youtube.com/feeds/api/playlists/A4F160EDF82713A2?v=2');
.
.
.
.
$media = $entry->children('http://search.yahoo.com/mrss/');

  // get video player URL
  $attrs = $media->group->player->attributes();
  $watch = $attrs['url'];

  $attrs = $media->group->thumbnail[1]->attributes();
  $thumbnail = $attrs['url'];
  $counter++;

  if($counter == $rand)
    { break; }

  $result .='<a rel="prettyVideos"  href="'.$watch.'">
                <img alt="" style="background:url('.$thumbnail.')" src="/images/ytIndex_overlay.png" />
       </a> ';      

echo $result;                    
} 
```

和 CSS：

```
.slideshow .video img
{   
cursor:pointer;
width:550px !important;     
height:340px !important;     
background-repeat:no-repeat;    
background-size:cover;
-webkit-background-size: cover; 
-moz-background-size: cover; 
-o-background-size: cover;
-ms-interpolation-mode: bicubic;
} 
```

到目前为止，它的工作方式与我在 Chrome、Safari、Firefox 和 Opera 中所希望的完全一样。 ![在此处输入图像描述](../Images/6a29d11051d33433a7ddeacacd1cd7b4.png)

然而，像往常一样，它在 IE 中搞砸了 (7/8) ![在此处输入图像描述](../Images/1fe3674b6a284c3baba2ad4457c60f6f.png)

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:00:03.547

IE7 不支持`background-size`任何方式。它只能以自然大小显示图像。

解决这个问题的唯一方法是切换到使用`<img>`标签，并将其放在元素后面，使其看起来好像是背景。

你可以在你的代码中做到这一点；这并不难。但是`background-size`在其他所有浏览器中浪费该功能的存在将是一种耻辱。

所以我首选的解决方案是使用 polyfill Javascript，它将回填旧版本 IE 中的功能，以便您可以继续使用标准 CSS。

你可以试试这个：[https ://github.com/louisremi/jquery.backgroundSize.js](https://github.com/louisremi/jquery.backgroundSize.js)

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T21:36:20.277

我不得不放弃这个问题来处理其他事情，但我认为应该给你们一个关于这个的更新。这个问题是（某种）固定的......不是一个可靠的解决方案，但它正在使用这个简单的解决方案。

所以这是修改后的CSS...

`.slideshow .video img { cursor:pointer; width:550px !important;
height:340px !important; -moz-background-size:cover; -webkit-background-size: cover; -o-background-size: cover; background-size: cover; background-position:center;}`

和IMG标签...

`<img alt="" style="background:url('.$thumbnail.')" src="/images/ytIndex_overlay.png" style="background-repeat: no-repeat" style="background-size:cover"/>`

（我知道这很混乱！）感谢 Spudley、Shadowizoo、BoltClock 和 Ben 的时间和建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:51:13.327

我发现有人有类似的问题。也许你可以检查一下：[internet explorer 7 中的 css background-size cover](https://stackoverflow.com/questions/5895571/css-background-size-cover-in-internet-explorer-7)

# python - 是否存在两层 CRUD python appengine 演示？

> ID：11657352
> 
> 赞同：0
> 
> 时间：2012-07-25T19:40:56.550
> 
> 标签：python, google-app-engine, python-2.7, authentication, crud

我开发了一些 appengine 应用程序，我终于意识到它们是 CRUD 之上的 CRUD 示例。也就是说，我作为管理员，将我的应用程序提供给用户，以便他们可以自己使用该应用程序（例如记笔记应用程序），或者可以邀请其他熟人（通常是非用户）来使用最终应用程序（例如，[ParticiPoll，](http://ParticiPoll.appspot.com)使用 google appengine 数据存储且无 SQL[的参与式问卷调查）。](http://ParticiPoll.appspot.com)我唯一的、非常年轻的孙子要求我制作一个截屏视频，展示如何创建这样的 2 层 CRUD，以便他可以开发这样的应用程序，但我什至没有一个编码演示可以开始。

我已经研究并练习[了单层笔记 CRUD 演示](https://github.com/fRuiApps/cpfthw/tree/master/webapp2)，并且对它的简单性和清晰度印象深刻。我想在该演示之上构建另一个 CRUD 层，格式大致相同，能够验证用户并让他们能够控制最终用户所需的安全程度（例如验证码或不验证码，以及当），他们的“熟人”。

我想知道其他演示是否已经存在。我找到了替代方案，例如 [django 管理员站点](http://www.djangobook.com/en/2.0/chapter06/)，该站点过于复杂且与 django、imo 过于相关。（此外，Django 对我来说也变得相当单一。）所以这是我的主要问题：这样一个简单的演示是否已经存在，如果存在，在哪里？

我还在为如何在 appengine 上编码 open_id 而苦苦挣扎，并且可能不会在这样的演示中包含这个非常理想的功能。这是一个好的决定吗？

布赖恩在亚特兰大

# ruby-on-rails - 偶尔成功的黄瓜测试

> ID：11657358
> 
> 赞同：1
> 
> 时间：2012-07-25T19:41:14.703
> 
> 标签：ruby-on-rails, cucumber, capybara

我有一个涉及以下内容的黄瓜步骤：

```
When /^I select from the Open table project with details "([^"]*)"$/ do |details|
  find('.details', :text => details).click
end 
```

它失败并显示以下错误消息`Unable to find css ".details" (Capybara::ElementNotFound)`

这一步在我运行它的大约 90% 的时间里都失败了，但偶尔它会起作用。我检查了页面源代码，该页面确实有一个 css 类 .details ，其中包含与详细信息相对应的文本。

这是某种时间问题还是黄瓜问题？还是更有可能的是，既然 Cucumber 已经把我逼疯了，我没有正确看待事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:29:08.137

基于这篇文章：[为什么似乎 Capybara“等待页面加载”计时器适用于匹配器而不适用于查找器？](https://stackoverflow.com/questions/7690624/why-does-it-seem-like-the-capybara-wait-for-page-to-load-timer-works-for-match)

似乎 find 方法在执行此操作之前不会等待页面加载。这意味着你有一个竞争条件，黄瓜大约 90% 的时间都在流失。

您可以在 wait_until 块中对其进行变形以指定您自己的超时并通过测试

```
page.wait_until(5) { find('.details', :text => details) }
find('.details', :text => details).click 
```

# .htaccess - 多个内部重定向到文件夹中的不同索引

> ID：11657373
> 
> 赞同：1
> 
> 时间：2012-07-25T19:42:00.310
> 
> 标签：.htaccess, redirect, internal

我是 htaccess 的新手，我正在寻找一种方法来获得内部重定向以将 2 个 URL 设置到不同的文件夹。

`example.com/cms/` /cms/ 后面的所有内容都需要转到
`rootfolder`->`cms`

`example.com/`（其余页面）
需要转到
`rootfolder`->`public`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T00:13:59.813

尝试将此添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/cms
RewriteCond %{REQUEST_URI} !^/public
RewriteCond %{REQUEST_URI} !-f
RewriteCond %{REQUEST_URI} !-d
RewriteRule ^(.*)$ /public/$1 [L] 
```

本质上：

*   如果请求是 for `/cms`，让它`/cms`直接解决
*   如果请求已经是 for `/public`，让它直接解决
*   如果请求是针对现有文件或目录，则让它解析
*   否则，重写请求`/public`，在 URI 前附加 a

# java - 如何在 mvn test 命令中使用正则表达式

> ID：11657376
> 
> 赞同：1
> 
> 时间：2012-07-25T19:42:05.070
> 
> 标签：java, maven

我正在尝试使用以下命令。我有

*   Mytest1_test.java,
*   Mytest2_test.java,
*   Mytest3_test.java,
*   Mytest4_test.java,
*   Mytest5_test.java,

我想一次运行前 4 个。

```
mvn test -Dtest=Mytest[1-4]_test 
```

但它没有给我任何测试。

有人可以建议...吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:43:48.467

利用：

```
mvn -Dtest=Mytest*_test test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-18T11:10:21.280

诀窍是使用 * 字符并使用 ! 排除其他测试 字符如下。

```
mvn test -Dtest=Mytest*_test,!Mytest5_test 
```

根据 Maven surefire 插件的[官方文档](https://maven.apache.org/surefire/maven-surefire-plugin/examples/single-test.html)，下面的命令应该使用正则表达式，但它似乎不起作用（没有执行测试）。

```
mvn test -Dtest=%regex[Mytest[1-4]_test] 
```

使用 Maven Surefire 插件 3.x 在 Windows 7 上测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-13T14:58:04.557

如果您在目录中有测试，则可以通过编写正则表达式从其中一个启动所有测试，例如。对于 qa/src/test/java/com/frax/doc/ 中的子目录“/doc”中的所有测试：

```
mvn -Dtest=*/doc/* test 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-10T08:25:22.443

为了匹配正则表达式，您可能需要添加包名称 - 只需前缀 with`.*`可能就足够了（您可以尝试使用和不使用`.*`后缀 - 我用它来匹配 JUnit4 下的“.class”）：

```
mvn test "-Dtest=%regex[.*Mytest[1-4]_test.*]" 
```

请注意，当我们添加更多测试组合时，我在整个*-Dtest*参数周围使用了引号以使其更具可读性。

**添加有问题的测试**

当我们有一个仅在某些组合中失败的有问题的测试时，我们可以在引号 ( `"`) 内但在`]`.

假设`Mytest5_test`测试 1、2 和 3 失败。我们可以对前 3 个使用正则表达式，然后是逗号和标准匹配`Mytest5_test`，如果我们需要捕获任何包，则使用 *：

```
mvn test "-Dtest=%regex[.*Mytest[1-3]_test.*], *Mytest5_test" 
```

*严格来说，我们不需要引号，但如果没有引号，我们需要删除不同测试之间的空格，这会降低命令的可读性。*

**查找有冲突的测试**

当我们的测试在与其他人组合运行时失败（静态模拟通常是罪魁祸首），我们也可以使用正则表达式来帮助找到冲突的测试。

要在以 my.co.[am] 开头的包中运行所有测试，`Mytest5_test`我们可以使用：

```
mvn test "-Dtest=%regex[.*my.co.[a-m].*], *Mytest5_test" 
```

如果我没记错的话，JUnit 4 需要斜杠分隔符，JUnit 5 需要点分隔符，而 Spock 只是有没有包的类名。使用`.*`和上面正则表达式中的通配符单个字符`.`将起作用，无论测试名称是否包含斜杠或点作为包名称。

然后更改正则表达式以运行其他测试（例如 [nz]）并继续缩小范围，直到获得所需的组合。

# r - 是否有 ggplot2 的美学表或目录？

> ID：11657380
> 
> 赞同：66
> 
> 时间：2012-07-25T19:42:12.620
> 
> 标签：r, ggplot2

我是 ggplot2 的新手，并且一直在尝试找到一个全面的美学列表。我想我理解他们的目的，但很难知道哪些可以在各种情况下使用（主要是 geoms？）。Hadley 的网站偶尔会在页面上列出各个 geoms 的可用美学，而 R doc 偶尔（尽管很少）也会这样做。我什至发现了一个两者不太匹配的geom。

我在这里的评论中搜索了答案，甚至买了这本书！唉，没有帮助。

我认为拥有一张表格，其中所有美学都列在一个维度中，所有几何图形（和其他对象？）都列在另一个维度中，这将是非常棒的。

有谁知道这样的事情？

R中是否有一种简单的方法（命令）来列出可以应用于对象的所有美学？

以下是表格的开始方式：

```
List           x       y       fill      size    colour   linetype . . .
geom_point    Yes     Yes      Yes       Yes      Yes        No
geom_abline   Yes     Yes      No        Yes      Yes       Yes
.
.
. 
```

美学定义/参数目录也将是一个非常有用的参考。

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2012-07-27T07:32:05.933

下面是`default_aes`每个几何图形，

```
 colour size linetype alpha   fill weight shape width height angle hjust vjust family fontface lineheight
abline       black  0.5        1   yes     --     --    --    --     --    --    --    --     --       --         --
area           yes  0.5        1   yes grey20     --    --    --     --    --    --    --     --       --         --
bar            yes  0.5        1   yes grey20      1    --    --     --    --    --    --     --       --         --
bin2d          yes  0.5        1   yes grey60      1    --    --     --    --    --    --     --       --         --
boxplot     grey20  0.5    solid   yes  white      1    16    --     --    --    --    --     --       --         --
contour    #3366FF  0.5        1   yes     --      1    --    --     --    --    --    --     --       --         --
crossbar     black  0.5        1   yes    yes     --    --    --     --    --    --    --     --       --         --
density      black  0.5        1   yes    yes      1    --    --     --    --    --    --     --       --         --
density2d  #3366FF  0.5        1   yes     --      1    --    --     --    --    --    --     --       --         --
errorbar     black  0.5        1   yes     --     --    --   0.5     --    --    --    --     --       --         --
errorbarh    black  0.5        1   yes     --     --    --    --    0.5    --    --    --     --       --         --
freqpoly     black  0.5        1   yes     --     --    --    --     --    --    --    --     --       --         --
hex            yes  0.5       --   yes grey50     --    --    --     --    --    --    --     --       --         --
hline        black  0.5        1   yes     --     --    --    --     --    --    --    --     --       --         --
linerange    black  0.5        1   yes     --     --    --    --     --    --    --    --     --       --         --
path         black  0.5        1   yes     --     --    --    --     --    --    --    --     --       --         --
point        black    2       --   yes    yes     --    16    --     --    --    --    --     --       --         --
pointrange   black  0.5        1   yes    yes     --    16    --     --    --    --    --     --       --         --
polygon         NA  0.5        1   yes grey20     --    --    --     --    --    --    --     --       --         --
quantile   #3366FF  0.5        1   yes     --      1    --    --     --    --    --    --     --       --         --
raster          --   --       --   yes grey20     --    --    --     --    --    --    --     --       --         --
rect           yes  0.5        1   yes grey20     --    --    --     --    --    --    --     --       --         --
ribbon         yes  0.5        1   yes grey20     --    --    --     --    --    --    --     --       --         --
rug          black  0.5        1   yes     --     --    --    --     --    --    --    --     --       --         --
segment      black  0.5        1   yes     --     --    --    --     --    --    --    --     --       --         --
smooth     #3366FF  0.5        1   0.4 grey60      1    --    --     --    --    --    --     --       --         --
step         black  0.5        1   yes     --     --    --    --     --    --    --    --     --       --         --
text         black    5       --   yes     --     --    --    --     --     0   0.5   0.5               1        1.2
tile           yes  0.1        1   yes grey20     --    --    --     --    --    --    --     --       --         --
violin      grey20  0.5    solid   yes  white      1    --    --     --    --    --    --     --       --         --
vline        black  0.5        1   yes     --     --    --    --     --    --    --    --     --       --         -- 
```

还有我用来破解这个的丑陋代码，

```
find_aes <- function(geom="point"){

  tryCatch({
  Geom <- getFromNamespace(paste("Geom", ggplot2:::firstUpper(geom), sep=""),
                           "ggplot2")

  tmp <- unclass(Geom$default_aes)
  tmp[is.na(tmp)] <- "yes"
  data.frame(tmp, stringsAsFactors=FALSE)
  }, error = function(e) {})
}

funs <- grep("^geom_", ls("package:ggplot2"),val=T)

geoms <- gsub("^geom_", "", funs)

all <- lapply(geoms, find_aes)
names(all) <- geoms
relevant <- sapply(all, function(x) !is.null(x) && nrow(x) > 0)
library(plyr)
results = do.call("rbind.fill",all)
rownames(results) <- names(relevant[relevant])
results[is.na(results)] <- "--"

options(width=9999)
capture.output(print(results), file="aes.txt") 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-02-17T18:31:40.813

看看Hadley Wickham 的[Aesthetic Specifications](http://ggplot2.tidyverse.org/articles/ggplot2-specs.html)的小插图：

*这个小插曲总结了网格绘图功能采用的各种格式。大多数此类信息散布在整个 R 文档中。本附录将所有内容集中在一个地方。*

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-10-24T12:25:12.637

接受的答案仅详细说明了默认美学，以下是如何获取所有这些：

## 获取所有 Geom* 函数

```
 library(tidyverse)
env <- asNamespace("ggplot2")
all_Geoms <- ls(envir = env, pattern = "^Geom.+")
all_Geoms <- mget(all_Geoms, env) 
```

## 获得所有美学

```
all_aes <- map(all_Geoms, ~.$aesthetics())

# change Geom* to geom_*
names(all_aes) <- 
  names(all_aes) %>%
  substr(5,nchar(.)) %>% 
  tolower() %>% 
  paste0("geom_",.)

# remove if geom_* doesn't exist
all_aes[!names(all_aes) %in% ls(envir = env)] <- NULL
head(all_aes, 3)
#> $geom_abline
#> [1] "slope"     "intercept" "colour"    "size"      "linetype"  "alpha"    
#> [7] "group"    
#> 
#> $geom_area
#> [1] "x"        "y"        "colour"   "fill"     "size"     "linetype"
#> [7] "alpha"    "group"   
#> 
#> $geom_bar
#> [1] "x"        "y"        "colour"   "fill"     "size"     "linetype"
#> [7] "alpha"    "group" 
```

## 摆在一张长桌上

```
all_aes_long <- all_aes %>%
  enframe("fun","aes") %>%
  unchop(aes)

all_aes_long
#> # A tibble: 325 x 2
#>    fun         aes      
#>    <chr>       <chr>    
#>  1 geom_abline slope    
#>  2 geom_abline intercept
#>  3 geom_abline colour   
#>  4 geom_abline size     
#>  5 geom_abline linetype 
#>  6 geom_abline alpha    
#>  7 geom_abline group    
#>  8 geom_area   x        
#>  9 geom_area   y        
#> 10 geom_area   colour   
#> # ... with 315 more rows 
```

## 摆在一张宽桌子上

我建议使用`View()`可视化这个。

```
all_aes_wide <-
  all_aes_long%>%
  mutate(val = 1) %>%
  spread(aes,val,fill = 0)

all_aes_wide
#> # A tibble: 38 x 38
#>    fun   alpha angle colour family  fill fontface geometry group height
#>    <chr> <dbl> <dbl>  <dbl>  <dbl> <dbl>    <dbl>    <dbl> <dbl>  <dbl>
#>  1 geom~     1     0      1      0     0        0        0     1      0
#>  2 geom~     1     0      1      0     1        0        0     1      0
#>  3 geom~     1     0      1      0     1        0        0     1      0
#>  4 geom~     0     0      0      0     0        0        0     1      0
#>  5 geom~     1     0      1      0     1        0        0     1      0
#>  6 geom~     1     0      1      0     1        0        0     1      0
#>  7 geom~     1     0      1      0     0        0        0     1      0
#>  8 geom~     1     0      1      0     1        0        0     1      0
#>  9 geom~     1     0      1      0     0        0        0     1      0
#> 10 geom~     1     0      1      0     1        0        0     1      0
#> # ... with 28 more rows, and 28 more variables: hjust <dbl>,
#> #   intercept <dbl>, label <dbl>, lineheight <dbl>, linetype <dbl>,
#> #   lower <dbl>, map_id <dbl>, middle <dbl>, radius <dbl>, shape <dbl>,
#> #   size <dbl>, slope <dbl>, stroke <dbl>, subgroup <dbl>, upper <dbl>,
#> #   vjust <dbl>, weight <dbl>, width <dbl>, x <dbl>, xend <dbl>,
#> #   xintercept <dbl>, xmax <dbl>, xmin <dbl>, y <dbl>, yend <dbl>,
#> #   yintercept <dbl>, ymax <dbl>, ymin <dbl> 
```

## 奖金：aes的频率

```
table(all_aes_long$aes)
#> 
#>      alpha      angle     colour     family       fill   fontface 
#>         37          3         36          2         20          2 
#>   geometry      group     height      hjust  intercept      label 
#>          1         38          2          2          1          2 
#> lineheight   linetype      lower     map_id     middle     radius 
#>          2         33          1          1          1          1 
#>      shape       size      slope     stroke   subgroup      upper 
#>          4         35          1          4          2          1 
#>      vjust     weight      width          x       xend xintercept 
#>          2          6          2         30          2          1 
#>       xmax       xmin          y       yend yintercept       ymax 
#>          2          2         27          2          1          8 
#>       ymin 
#>          8 
```

# c# - .NET 执行超时未在 MVC Web 项目中生效

> ID：11657381
> 
> 赞同：8
> 
> 时间：2012-07-25T19:42:12.820
> 
> 标签：c#, asp.net, asp.net-mvc-3, iis-7

我们正在尝试设置超时，而请求只是没有超时。我们尝试了几种设置方式：

通过将它放在 web.config 中（在应用程序的 web.config 和视图文件夹中）

```
<httpRuntime executionTimeout="5" /> 
```

我们确保我们没有处于调试模式

```
<compilation debug="false" targetFramework="4.0"> 
```

我们甚至尝试在代码中设置脚本超时（即使它应该是同一件事）并添加了一个 Thread.Sleep 3 分钟（以确保我们远高于默认超时）并且此操作仍然没有超时：

```
public ActionResult Index()
{
    Server.ScriptTimeout = 5;
    Thread.Sleep(60 * 1000 * 3);
    return View();
} 
```

它发生在多台机器上，我什至去创建一个全新的解决方案，只对模板进行上述更改，以及一个全新的 IIS 网站应用程序池......仍然无法超时。

我们缺少一些简单的配置设置吗？这似乎应该很容易做到......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T20:41:11.050

添加到最终解决方案：上面的链接有一种方法可以强制 MVC 遵守当前 HttpContext 的超时

```
System.Web.HttpContext.Current.GetType().GetField("_timeoutState", System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic).SetValue(System.Web.HttpContext.Current, 1); 
```

因为我们希望它在每个请求上运行，我们为它创建了一个全局操作过滤器

```
public class Timeoutter : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        System.Web.HttpContext.Current.GetType().GetField("_timeoutState", System.Reflection.BindingFlags.Instance | System.Reflection.BindingFlags.NonPublic).SetValue(System.Web.HttpContext.Current, 1);
        base.OnActionExecuting(filterContext);
    }
} 
```

然后在应用程序的 global.asax 中注册它：

```
 public static void RegisterGlobalFilters(GlobalFilterCollection filters)
    {
        filters.Add(new Timeoutter());
    } 
```

请记住，此解决方案仍然需要 web.config 中的上述 2 行

```
<httpRuntime executionTimeout="5" />
<compilation debug="false" targetFramework="4.0"> 
```

# django - 如何在 Django 中更改代理模型中的字段值

> ID：11657384
> 
> 赞同：1
> 
> 时间：2012-07-25T19:42:19.293
> 
> 标签：django, django-models

我有一个基本模型和代理模型。我想更改“image”字段的upload_to 值，这取决于“file_type”字段。我不确定如何执行此操作，是否需要在我的 .Manager 类或 Proxy 类中指定它。你能否给我同样的细节如何做到这一点。

```
class FileDescription(models.Model):

    class Meta:
        ordering = ['file_creation_time']

    TYPE_CHOICES = (
        ('homework', 'Homework'),
        ('class', 'Class Papers'),
        ('random', 'Random Papers')                    
    )

    subject = models.ForeignKey('Subjects', null=True, blank=True, primary_key=True)
    subject_name = models.CharField(max_length=100, unique=False)
    file_type = models.CharField(max_length=100, choices=TYPE_CHOICES) 
    ....
    ....
    image = models.ImageField(upload_to= ???????????      blank=True, null=True, max_length=255)

    def __unicode__(self):
        return u'%s' % (self.file_name)

class HomeworkManager(models.Manager):
    def get_query_set(self):
        qs = super(HomeworkManager, self).get_query_set().filter(file_type='homework')
        return qs

class ClassPapersManager(models.Manager):
    def get_query_set(self):
        qs = super(HomeworkManager, self).get_query_set().filter(file_type='class')
        return qs

class RandomPapersManager(models.Manager):
    def get_query_set(self):
        qs = super(HomeworkManager, self).get_query_set().filter(file_type='random')
        return qs

class Homework(FileDescription):

    class Meta:
        proxy = True 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T21:09:20.700

不要担心替换只是修改方法来处理不同的子类（如果你还没有`upload_to`使用方法）。`upload_to`

```
def my_upload_to(instance, filename):
    if instance._meta.module_name == 'homework':
        return '/path/to/homework/files/%s' % filename
    if instance._meta.module_name == 'classpaper':
        return '/path/to/classpaper/files/%s' % filename
    if instance._meta.module_name == 'randompaper':
        return '/path/to/randompaper/files/%s' % filename 
```

# ruby-on-rails - rails - 如何在带有请求规范的调试器中显示页面的 HTML 源代码？

> ID：11657386
> 
> 赞同：0
> 
> 时间：2012-07-25T19:42:24.503
> 
> 标签：ruby-on-rails, ruby, rspec, capybara, shoulda

我已经尝试过`p page`并且`p page.source`还：

```
(rdb:1) 查找 ('页面')
(rdb:1) 找到 ('bosy')
(rdb:1) 找到 ('body')
(rdb:1) 找到
(rdb:1) p 页
(rdb:1) p html
(rdb:1) p 源
(rdb:1) p page.source

```

但我得到的只是以下方面的变化：

```
*** Unknown command: "page".  Try "help". 
```

代码：

```
describe "For a user who is not logged in." do

  context "Visiting the home page." do
    before(:each) { visit root_path }

    describe "The page." do
      subject { page }

      debugger
      1   

      it "Has a 'login' link." do
        should have_link('Sign In')
      end 

      it "does NOT have a 'logout' link." do
        should have_no_link('Logout')
      end 

    end 

  end

end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:54:31.290

当前`debugger`行所在的位置不会在`page`定义的范围内执行。也许`before(:each) { visit root_path; debugger }`会奏效。完全未经测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:55:11.923

嗯。我无法回答您的问题，但如果您的目标是查看页面，您可以使用

save_and_open_page

这需要测试和开发范围内的启动 gem。

（假设您使用的是水豚？）

# linux - kmalloc() 分配的内存是否会自动释放？

> ID：11657387
> 
> 赞同：8
> 
> 时间：2012-07-25T19:42:25.443
> 
> 标签：linux, linux-kernel, device-driver, kernel, kmalloc

我正在编写一个设备驱动程序，除其他外，它使用`kmalloc`. 当用户程序关闭文件时，该内存被释放。在我的一项实验中，用户程序在没有关闭文件的情况下崩溃了。

有什么东西可以释放这段记忆吗？

在另一个实验中，我将函数`kfree()`从`close()`函数移到`module_exit()`函数。当我连续两次运行用户程序时，我`kmalloc`再次使用与以前相同的指针再次调用，而没有先释放它。因此，我丢失了指向该内存的指针，并且无法释放它。

在我重新启动之前，这个内存是否会丢失给系统，或者当我卸载驱动程序时它会被释放？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T20:58:58.753

内核内存永远不会自动释放。这包括`kmalloc`.

关闭文件时，应释放与打开的文件描述符相关的所有内存。
当进程退出时，无论出于何种原因（包括`kill -9`），所有打开的文件描述符都将关闭，并调用驱动程序的关闭函数。因此，如果您在那里释放，则该进程无法做的任何事情都不会在进程死亡后使内存保持不变。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T21:16:27.043

请不要将您的用户空间体验与内核编程联系起来。

我这是什么意思？

正常进程一旦退出就会为它们进行清理，内核模块并非如此，因为它们不是真正的进程。

从技术上讲，当您加载一个模块然后调用 kmalloc 时，您所做的是您要求内核在内核空间中为您分配一些内存，从技术上讲，它是整个内核的新内存，因此即使您卸载模块，除非显式释放，否则分配的内核内存就在那里。

简单来说，回答您的问题：每个 kmalloc 都需要一个 kfree，否则只要系统启动，内存就会保留在那里。

# grails - 如何嵌套插件 URL？

> ID：11657392
> 
> 赞同：1
> 
> 时间：2012-07-25T19:42:32.120
> 
> 标签：grails, grails-plugin, grails-2.0

我想创建一个 Grails 项目的“外壳”，该项目在插件中托管功能，URL 按插件名称分隔。

**因此，Shell 项目中使用的博客**插件的 URL可能如下所示：`/shell/blog/viewBlogPost`

但我实际上看到的是所有插件的控制器都表现得好像它们是 shell 项目本身的一部分：`/shell/viewBlogPost`

有没有办法声明博客插件的控制器只能在 `/blog`URL 中的路径下访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T13:48:46.637

似乎 Grails 插件无法做到这一点。问题是它们缺乏封装性和可组合性，导致工件冲突：

*   来自插件的 URL 路由只是简单地合并在一起，不能嵌套
*   控制器没有命名空间
*   服务没有命名空间

我打开了一个问题：[GRAILS-9300](http://jira.grails.org/browse/GRAILS-9300)

Grails 团队已经[初步计划](https://github.com/grails/grails-core/wiki/Artifact-Namespaces)在 2.2 中解决这个问题，方法是使用插件名称作为工件的命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:18:07.073

是的，您的插件可以像“shell”应用程序的其余部分一样注册 URL 映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T01:22:47.480

您可以通过在插件中创建一个名称以 UrlMappings 结尾的文件（例如`BlogPluginUrlMappings.groovy`），在插件中声明 UrlMappings，这些文件将合并到主应用程序的 UrlMappings 中。您可以设置从`/blog/`路由到插件控制器的映射。

# php - 更改数组的索引

> ID：11657394
> 
> 赞同：-1
> 
> 时间：2012-07-25T19:42:40.053
> 
> 标签：php, arrays

我想更改数组的索引，但我不知道该怎么做.. 以下数组

```
array(
0 => array ( 'id' => 33, 'name' => 'test' )
1 => array ( 'id' => 37, 'name' => 'test2' )
) 
```

应该变成 - 如果我想要索引

```
array(
33 => array ( 'id' => 33, 'name' => 'test' )
37 => array ( 'id' => 37, 'name' => 'test2' )
) 
```

或者如果我想要名字

```
array(
test => array ( 'id' => 33, 'name' => 'test' )
test2 => array ( 'id' => 37, 'name' => 'test2' )
) 
```

也适用于多维数组

```
array(
0 => array ( 'id' => 33, 'details' => array (name => 'test' , age ='50' ) )
1 => array ( 'id' => 37, 'details' => array (name => 'test2' , age ='60' ) )
) 
```

用名称索引替换 0 和 1 - test 或 test2

现在我做了一个函数，但没有使用多维数组

```
function index_array( $array, $index ){

$new_array = array();
foreach($array as $key => $value){
    $new_array[$index] = $array[$key];  
}

return $new_array;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:43:51.263

```
$array = array(33 => $oldarray[0], 37 => $oldarray[1]);
$array = array('test' => $oldarray[0], 'test2' => $oldarray[1]); 
```

由于表达式的右侧是在赋值之前评估的，因此您也可以`$array`在两侧使用而不是不同的变量名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:51:27.233

我会为第一部分使用映射表，或者`foreach`为第二部分使用简单的映射表：

```
<?php

$arr = array(
    0 => array( 'id' => 33, 'name' => 'test' ),
    1 => array( 'id' => 37, 'name' => 'test2' )
);

/* Convert to other indexes */
$mapping = array(
    0 => 33,
    1 => 37
);

foreach($arr as $k => $v){
    unset($arr[$k]);
    $arr[$mapping[$k]] = $v;
}

print_r($arr);

/* Convert key to name field */
foreach($arr as $k => $v){
    unset($arr[$k]);
    $arr[$v['name']] = $v;
}

print_r($arr); 
```

**编辑**：现在我再次阅读了您的问题，第一部分实际上与第二部分相同，但只是使用`id`字段而不是`name`字段。

**EDIT2**：请注意，您必须使用另一个数组来写入，以避免覆盖，当该`id`字段用作替换时会发生这种情况。

# javascript - 从 iframe 调用非全局 javascript 函数

> ID：11657395
> 
> 赞同：0
> 
> 时间：2012-07-25T19:42:59.140
> 
> 标签：javascript, jquery, iframe, scope

嗨，我正在使用 parent.myFunction() 方法从同一个域 iframe 调用一些 javascript 函数。唯一的问题是函数似乎需要在全局范围内才能以这种方式访问​​。我想把我所有的函数都放在 jQuery 的 document.ready 包装函数中

我可以以某种方式从 iframe 访问 jQuery 的 document.ready 包装器中的函数吗？我知道这是一个范围问题，但是如果 myFunction 在同一个域 iframe 的 jQuery 的 document.ready 包装器中，我将如何访问它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:56:22.133

不，你不能。只需将它们放在本地范围之外`$.ready`，最好是命名空间以避免全局范围污染。

如果您想在文档就绪时定义它们，您仍然可以将它们放在全局范围内：

```
jQuery(function($) {
    window.someFunc = function(){ ... };
    // or better
    window.namespace = {
        func: function(){ ... }
    };
}); 
```

# gwt - GWT 的可编辑文本小部件？

> ID：11657401
> 
> 赞同：0
> 
> 时间：2012-07-25T19:43:10.717
> 
> 标签：gwt, web-applications, textarea

我在 GWT 中有一个应用程序，它提供了很多小段落，让用户编辑它们。现在我只有一个查看模式、一个 HTML 段落和一个编辑模式，为此我使用标准的 HTML TextArea。

是否有不需要使用 TextArea 或在模式之间切换的流畅 GWT 段落编辑小部件？请注意，我*不需要*富文本小部件，因为我不需要粗体、斜体、项目符号等。

我愿意使用 jQuery 或其他 JavaScript 库解决方案，只要它真的很健壮并且与我正在做的所有其他事情完全分离。我不想照看/破解 JavaScript。

不知何故，我认为这个问题很难，因为 Google Docs 做得不好，甚至 stackoverflow 也让我使用一个非常类似于 TextArea 的框来编辑稍后显示为 HTML 段落的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:49:58.823

我会使用 HTML ContentEditable。[http://html5demos.com/contenteditable/](http://html5demos.com/contenteditable/)

```
<div contenteditable="true">
</div> 
```

您可以使用 JS 框架来绑定更改。我注意到 JS 'change' 事件存在问题，但 'blur' 事件运行良好。

# ios - XCode 4.2 中的慢故事板版本

> ID：11657410
> 
> 赞同：1
> 
> 时间：2012-07-25T19:43:34.490
> 
> 标签：ios, xcode4.2, storyboard

使用 XCode 4.2 编辑一个带有 TabViewController 和 5 个选项卡的简单应用程序。我刚刚启动应用程序，因此每个应用程序都没有太多组件。

但是，仅从查看代码切换到查看 XCode 中的 Storyboard 大约需要 1 分钟。任何改变都是那么缓慢......就像每次我触摸某些东西时它都会重建所有组件的内部层次结构。

有没有其他人经历过这个？任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:44:53.137

这是一个重复的问题。请参见此处：[Xcode 4 - 性能缓慢](https://stackoverflow.com/questions/6355667/xcode-4-slow-performance)

如果您删除工作区，它应该会提高您的速度。（这应该是该问题的公认答案）。

资料来源：我过去使用过这个答案，它有很大帮助。

如果没有，请在此处阅读有关 xcode 4 性能缓慢的常见问题的答案：[为什么 xcodebuild 和 Xcode 4.2 这么慢？](https://stackoverflow.com/questions/7780663/why-are-xcodebuild-and-xcode-4-2-so-slow/7781175#7781175)

# css - 从导航溢出的项目

> ID：11657411
> 
> 赞同：0
> 
> 时间：2012-07-25T19:43:42.270
> 
> 标签：css, html-lists, overflow

这是我在这个网站上的第一篇文章，如果我不够清楚，请原谅。

我目前正在开发一个 使用 wordpress 构建的[网站](http://linda-navarro-coaching.com/)，但我遇到了 CSS 问题。

我的菜单栏是用 ul 制作的，当我在导航器中增加文本大小时（例如，使用 ctrl+scroll），li 项会从 div 溢出，就像[这张图片](http://lindanavarrocoaching.files.wordpress.com/2012/07/bug.jpg)一样。

在这种情况下，我希望将 li 分成两部分，并放入 div 中，但我没有找到如何实现这一点。我已经尝试过“断字”解决方案，但我想我做错了。

因为我的网站是由 Wordpress 托管的，所以设计时使用了两种不同的 CSS 表，有点乱。

这是我工作表的一部分：

```
#access {
display:inline-block;
width:27%;
font-size:100%;
margin:2.5% auto 6px;
border:none;
padding-top:10px;
padding-bottom:10px;
overflow:hidden;}

#access a {
display:inline-block;
max-width:100%;
color:rgb(0,102,138);
font-size:22px;
padding:none;
line-height:30px;}

#access li {
display:block;
padding:4px;
float:none;}

#access ul {
list-style:none;
font-size:100%;
margin:0;} 
```

我不能发布主题的 CSS 链接，因为作为新成员，我只能通过发布 2 个超链接。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:56:37.477

这些菜单项包含不间断的空格。：

教练专业人士

辅导父母

```
Coaching&nbsp;professionnel
Coaching&nbsp;parental 
```

这意味着当文本大小增加时，它们都将保留在一行上。

此外，您的 #access 有溢出：隐藏；删除它，并删除不间断的空格 - (" ") 你的话应该正确换行

# ruby-on-rails - 用于保护 SOAP Web 服务的非对称密钥加密

> ID：11657413
> 
> 赞同：4
> 
> 时间：2012-07-25T19:43:48.153
> 
> 标签：ruby-on-rails, ruby, windows, linux, encryption-asymmetric

我想在 XML 请求中使用一些加密标签来验证我的 SOAP Web 服务的调用者（在 Ruby 1.8.7/Rails 2.3.5 中使用 Red Hat Enterprise linux 5 中的 datanoise gem 部署）。通常，客户端是一个 Windows 程序（可能是 C#/.Net Windows 程序——不是 Java/Ruby），它应该在每次调用基于密钥/盐的 web 服务时生成一个不同的加密密钥——而我的服务器端总是能够用私钥对其进行解码。网络上加密令牌的知识不应允许第三方程序简单地复制完全加密的令牌并访问 Web 服务。我正在研究 OpenSSL，但我是密码学的新手。为识别而加密的字符串可以是（除其他项目外）受信任客户端的 MAC ID，

我在 Ruby 端发现了很多可能性，但理想情况下需要确保该解决方案不会在 Windows 客户端强加（或最小化）任何库或安装要求。我最苦苦挣扎的是一种在每次调用时生成新密钥的方法，这样任何嗅探流量的人都不能简单地通过访问密钥来推断创建加密标签的模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T03:41:36.163

由于您在这里验证调用者，而不仅仅是他们发送的内容，因此无需将验证机制放入 SOAP 请求中。[其他人已尝试使用WS-Security](http://en.wikipedia.org/wiki/WS-Security)来完成您所追求的事情，所以如果有的话，我会这样做。

尽管该方案的安全性存在问题，但可能最大的交易破坏者是 Ruby 中没有对它的支持（至少我知道，如果我错了，请纠正我！）。

在两端实现客户端身份验证的最简单方法可能是使用相互身份验证的 TLS（以前的 SSL）。这将确保传输级别的身份验证，这在您的情况下就足够了。实际身份验证将首先检查客户端发送的证书的有效性（Ruby OpenSSL 会为您处理），一旦建立，您将根据您维护的已知证书的白名单检查它你的服务器。

请不要发明自己的方案，加密协议是最难解决的问题（这就是 WS-Security 存在问题的原因），TLS 可能和现在一样好，并且它在任何语言中都有广泛的支持。

# java - 在整个 Android Java 项目中读取和修改我的 List 的正确方法是什么？

> ID：11657419
> 
> 赞同：0
> 
> 时间：2012-07-25T19:44:00.730
> 
> 标签：java, android

我有以下列表：

```
List<Map<String, String>> items = new ArrayList<Map<String, String>>(); 
```

它填充了有关我的应用程序负载的数据。我需要在整个应用程序中，在大多数活动和片段上使用它，同时读取和修改数据。

在没有太多复杂性的情况下，最好和最简单的方法是什么？

注意：由于 Stack Overflow 上无法解释的原因，这主要是使用 List 而不是作为具有属性的自定义对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:47:44.780

我会创建一个类来保存您的数据（类似于 Singleton 方法），并将变量设为静态。

```
class NewClass {

    public static List<Map<String, String>> items = new ArrayList<Map<String,String>>();

} 
```

您可以随意将 getter/setter/modifier 方法添加到上述类中。

然后在您的其他类中，您可以创建局部变量，您可以将其定义为其他类的列表。

```
class OldClass {
    private List<Map<String, String>> myItems;

    public OldClass() {
        myItems = NewClass.items;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T20:05:03.190

其他帖子没有抓住重点。当然，他可以将列表存储为实例成员并使用 getter 和 setter 访问它，但是什么对象拥有该成员？

您可以按照建议使用静态，但有更好的方法......只需将其挂在您的应用程序类中即可。创建一个扩展类`Application`，并在那里添加实例，

```
public class MyApplication extends Application { 
    private List<Map<String, String>> items = new ArrayList<Map<String, String>>();

    public List<Map<String, String>> getItems() {
        return items;
    }

    public void setItems(List<Map<String, String>> items) {
      this.items = items;
    }
} 
```

将应用程序类配置到您的清单中，

```
<application
    android:name=".MyApplication"
    ... 
```

现在，在您的活动或服务中，只需这样做，

```
List<Map<String, String>> items = ((MyApplication)getApplication()).getItems(); 
```

从你的碎片中，做这个，

```
List<Map<String, String>> items = ((MyApplication)getActivity().getApplication()).getItems(); 
```

好消息是该对象与您的应用程序具有相同的生命周期。它在您的应用程序的任何部分处于活动状态时存在，并与您的应用程序一起被 GC 处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:46:30.990

创建一个抽象助手类并将您的列表粘贴在那里，这样您就可以从任何您喜欢的地方访问它。

```
public abstract class HelperClass() {

    public static List<Map<String, String>> items 
                                = new ArrayList<Map<String,String>>();

    static {
        //populate the list with anything you need when the class is loaded.
    }

} 
```

使您的类抽象将阻止某人实例化它。如果您在应用程序首次运行时需要列表中的任何元素，那么您可以在静态初始化程序块中执行此操作，如上所示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T19:48:39.023

这将允许您在应用程序中的任何位置访问它。

```
private List<Map<String, String>> items = new ArrayList<Map<String, String>>();

public List<Map<String, String>> getItems() {
    return items;
}

public void setItems(List<Map<String, String>> items) {
    this.items = items;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T19:52:44.007

实现此目的的首选方法是使用 getter 和 setter。将列表本身设为私有，并创建公共 getList 和 publi setList 方法以从应用程序的任何位置获取和设置列表。

```
public List getList() {
    return items;
}

public void addItems(String item) {
    //code to add items
} 
```

# javascript - 用 2 个链接切换 2 个 div

> ID：11657425
> 
> 赞同：0
> 
> 时间：2012-07-25T19:44:25.850
> 
> 标签：javascript, jquery

我对 jquery 很陌生，这就是我想要做的：

我有两个链接：link1 - link2 和 2 个 div：div1, div2

我想做的事：

如果你点击link1它会滑动div1，如果你再次点击link1，它会滑动div1但是如果你点击link1然后点击link2我希望div1先滑动然后div2向下滑动

这是我正在玩的代码：

```
$(document).ready(function(){

   $("#div1").hide();
   $("#div2").hide();
   $('.link1').click(function(){
       $("#div2").slideUp();
       $("#div1").slideToggle();
   });
   $('.link2').click(function(){
       $("#div1").slideUp();
       $("#div2").slideToggle();
   });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:53:20.277

这是否符合您的要求？

[http://jsfiddle.net/dJLK3/1/](http://jsfiddle.net/dJLK3/1/)

如果是这样，请查看有关动画功能的文档，例如[slideUp](http://api.jquery.com/slideUp/)。在那里你可以看到回调是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:53:52.427

参考**[现场演示](http://jsfiddle.net/SivaCharan/mNyeS/)**

实际上你的代码工作正常。目前我已经申请了班级。

## HTML：

```
<div class="link1">Link1</div>
<div class="link2">Link2</div>

<div class="div1">DIV1</div>
<div class="div2">DIV2</div>
​ 
```

## JS：

```
$(".div1").hide();
$(".div2").hide();
$('.link1').click(function(){
    $(".div2").slideUp();
    $(".div1").slideToggle();
});
$('.link2').click(function(){
$(".div1").slideUp();
$(".div2").slideToggle();
});​ 
```

# magento - Magento 分层导航块。移动到中心

> ID：11657433
> 
> 赞同：1
> 
> 时间：2012-07-25T19:45:11.243
> 
> 标签：magento, block, layered-navigation

在`category.xml`我将参考名称更改为：

```
 <reference name="left">
        <block type="catalog/layer_view" name="catalog.leftnav" before="-" template="catalog/layer/view.phtml"/>
    </reference> 
```

`content`我假设将分层放置`nav`在中心。但是，它仍然停留在左侧。事实上，即使我更改`left`为`right`，它仍然没有从左侧边栏移动。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-28T10:20:58.987

我设法通过注释掉或删除以下调用来解决此问题（对于遇到此问题的任何其他人）`catelog.xml`：

```
<reference name="left">
    <block type="catalog/layer_view" name="catalog.leftnav" before="-" template="catalog/layer/view.phtml"/>
</reference> 
```

`name="product_list"`然后在下面的块中添加这一行。

```
<block type="catalog/layer_view" name="filter" template="catalog/layer/view.phtml"/> 
```

然后在`list.phtml`echo 它像：`<?php echo $this->getChildHtml('filter');?>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:07:34.923

您能否提供更多信息，例如您在哪个包/主题中进行此更改，以及该包/主题是否也在管理员中实际选择。

当它启用时，它也可能是一个缓存问题。你试过冲进去`System > Cache management`吗？

也许有点话题：但最佳实践是始终通过 local.xml 文件而不是直接在例如`base/default`XML 文件中进行 XML 布局更改。但也许你已经知道了。

# php - PHP - 在文件夹中创建文件夹

> ID：11657443
> 
> 赞同：0
> 
> 时间：2012-07-25T19:45:53.247
> 
> 标签：php, mkdir

我很确定我根本没有权限。无论如何，谢谢您的回答！我将切换到自托管，所以我知道我有权限！

（我会删除它，但它说我不能 b/c 有答案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:05:15.373

首先，实际值是`$username`多少？你确认它不是空的吗？

像这样处理文件系统可能会导致几个不同的问题。我喜欢做很多额外的检查，所以如果出现故障，我会更容易知道原因。我也喜欢尽可能处理绝对目录名，所以我不会遇到相对路径的问题。

```
$filesDir = '/path/to/files';
if (!file_exists($filesDir) || !is_dir($filesDir)) {
    throw new Exception("Files directory $filesDir does not exist or is not a directory");

} else if (!is_writable($filesDir)) {
    throw new Exception("Files directory $filesDir is not writable");
}

if (empty($username)) {
    throw new Exception("Username is empty!");
}

$userDir = $filesDir . '/' . $username;

if (file_exists($userDir)) {
    // $userDir should be all ready to go; nothing to do.
    // You could put in checks here to make sure it's 
    // really a directory and it's writable, though.

} else if (!mkdir($userDir)) {
    throw new Exception("Creating user dir $userDir failed for unknown reasons.");
} 
```

`mkdir()`有一些非常有用的选项来设置权限和使文件夹更深。如果您还没有，请查看[PHP 的 mkdir 页面。](http://us.php.net/mkdir)

为了安全起见，请确保您的异常不会向最终用户泄露系统路径。当您的代码进入公共服务器时，您可能希望从错误消息中删除文件夹路径。或者配置一些东西，以便记录您的异常但不显示在网页上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:58:32.103

这是这种场景的算法。

1.  检查文件夹是否存在。
2.  如果文件夹存在，则将该文件夹命名为其他名称或添加一个随机数。
3.  创建新文件夹。

    [http://pastebin.com/VefbrzRS](http://pastebin.com/VefbrzRS)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:00:08.013

尝试这个。

```
mkdir ("./files/$username"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T20:00:23.317

不是同一个文件夹吗？files/Alex 和 files/Alex/ 是一样的。你的意思是 files/$username 和 files/$username/files 吗？你做了两次相同的目录所以这是错误

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T20:04:54.910

如果您使用的是 Linux 或 MacO，还有另一种情况，即调用 shell 的 mkdir 函数。

它看起来像：

```
system('mkdir -p yourdir/files/$username') 
```

# html - 如何从 zip 文件中打开 html 文件？

> ID：11657446
> 
> 赞同：6
> 
> 时间：2012-07-25T19:46:05.313
> 
> 标签：html, zip

有没有办法从包含 html 引用的图像的 zip 文件中打开 html 文件？我生成具有资源相对路径的 html，浏览器在 zip 文件中找不到它们，我必须先将其解压缩。从拉链打开它是理想的。有什么办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:48:53.240

你必须提取它。当您双击 zip 文件中的 html 时，它会在后台提取并显示给您，读取压缩文件中任何内容的唯一方法是提取它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-16T14:02:15.640

据我所知，只有 Firefox 可以通过 `jar:file://c:/myfolder/myzip.zip!/index.html`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-01T06:15:33.803

您的目标是将所有这些数千个 htm、gif... 文件保存在一个容器中？考虑使用 ISO 文件，它不会被压缩，但现在 HDD 已经足够大了……如果您喜欢打开 CD/DVD 的窗口，请在根目录添加一个 autorun.inf。CDburnerXP 是一个免费软件，可以为您做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-18T12:20:42.937

1.  Falkon 必须启用用于 KDE 集成的插件，该插件允许使用以下 URL 浏览 kio-slave：

    ```
    zip:/home/user/path/to/archive.zip
    info:ls
    fish://benutzername@rechnername
    ... 
    ```

    *   [https://en.wikipedia.org/wiki/Falkon](https://en.wikipedia.org/wiki/Falkon)
    *   [https://en.wikipedia.org/wiki/KIO](https://en.wikipedia.org/wiki/KIO)
2.  至少 Firefox 可以为打包在 addon-xpi-file 中的文档和配置页面做到这一点，该文件基本上也是一个 zip-archive。但我不知道在位置栏中提供任意 zip 的任何方式。

3.  Eclipse 还可以将它的集成浏览器指向压缩的 java-doc。

# asp.net - 如何使用vb在asp.net中实现倒计时

> ID：11657457
> 
> 赞同：2
> 
> 时间：2012-07-25T19:46:53.280
> 
> 标签：asp.net, vb.net, timer, countdown

**默认.aspx**

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
    <ContentTemplate>
        <asp:Label ID="Label1" runat="server">2:00:00</asp:Label>
        <asp:Timer ID="Timer1" runat="server" Interval="1000" OnTick="Timer1_Tick">
        </asp:Timer>
    </ContentTemplate>
</asp:UpdatePanel> 
```

**默认.aspx.vb**

```
Dim timer, timer_arr() As String
timer = Label1.Text
timer_arr = timer.Split(":")
Dim seconds = Integer.Parse(timer_arr(2))
Dim minutes = Integer.Parse(timer_arr(1))
Dim hours = Integer.Parse(timer_arr(0))
If seconds = 0 And minutes = 0 And hours = 0 Then
    Timer1.Enabled = False
Else
    seconds = seconds - 1
End If
If (seconds < 0) Then
    seconds = 59
    minutes = minutes - 1
End If
If minutes < 0 Then
    minutes = 59
    hours = hours - 1
End If

Label1.Text = hours & ":" & minutes & ":" & seconds 
```

上面的代码显示了预期的结果，我的意思是，我需要倒数计时器，它将向客户端显示倒数计时器`2:45:34`。但问题是秒的值减少了两倍。我的意思是`2:45:34`在下一秒之后而不是显示`2:45:33`，它显示`2:45:32`等等。我很困惑，从我的角度来看，一切都很好。需要帮忙 ！！

**更新**

我相信，客户端脚本，即 javascript 将是另一种选择，但我需要在线考试系统的计时器，这意味着每当客户端向服务器发送请求时，计时器应该继续计时。但是，如果我将使用 javascript，则计时器值将中断并显示意外值，即可能会再次初始化，以及其他原因。所以，我相信服务器端脚本将是最好的。如果有人有其他建议，那么我将不胜感激。！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:54:50.197

为什么不使用 TimeSpan 对象？

```
Dim ts as new TimeSpan(Integer.Parse(timer_arr(0)),Integer.Parse(timer_arr(1)),Integer.Parse(timer_arr(2)))
dim oneSecond as new TimeSpan(0,0,1) ' hours,min,sec
ts=ts.Subtract(oneSecond)
Label1.Text=ts.ToString("hh:mm:ss") 
```

我没有测试过，但应该很棒

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T22:48:37.297

这可以（并且可能应该）使用 javascript 来完成，但是如果您需要使用服务器端代码，那么我首先建议您将时间间隔减少到半秒而不是一秒，以适应服务器和服务器之间的一些延迟客户端机器。其次，我会确保来回发送的页面的唯一部分是计时器标签本身，以使传递的数据包尽可能小。代码本身看起来不会超过几毫秒，所以我认为您看到 2 秒跳跃的原因主要是因为计时器间隔。

如前所述，您可以将字符串解析为日期时间变量，然后使用 addseconds 函数减去一秒（通过传入 -1），而不是拆分字符串并手动操作每个字段。我比时间跨度更熟悉日期时间对象，但它确实是个人喜好。如果您使用 datetime 对象，则需要调用`.toshorttimestring`or ，`.tolongtimestring`具体取决于您要查找的格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T17:43:36.163

我知道，现在分享这个问题的答案为时已晚，因为，我找到了这个解决方案，我觉得，其他人可以从我的解决方案中受益。

这就是我所做的......

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server">
<ContentTemplate>
<asp:Label ID="questionText" runat="server"></asp:Label>
<asp:HiddenField ID="txt_timer" Value="00:30:00" runat="server" />
<asp:Timer ID="Timer1" runat="server" Interval="1830" OnTick="Timer1_Tick"></asp:Timer>
</ContentTemplate>
</asp:UpdatePanel> 
```

我使用了隐藏字段，它会不断更新计时器，现在，我正在使用`<div>`它来显示计数器

```
<div id="counter" style="position: absolute; top: 165px; left: 850px;"></div> 
```

现在我将我的 javascript 和 css 代码添加到我的文件中，以便更好地查看倒数计时器

**计时器.js**

```
<script src="../ajax/jquery.min.js" type="text/javascript" charset="utf-8"></script>
    <script src="../js/jquery.countdown.js" type="text/javascript" charset="utf-8"></script>
    <script type="text/javascript">
      $(function(){
        $('#counter').countdown({
          image: '../images/digits.png',
          startTime: document.getElementById('<%= txt_timer.ClientID %>').value,
        //  timerEnd: function(){ //alert('end!'); },        
           });           
      });
    </script> 
```

**计时器.CSS**

```
<style type="text/css">
    .cntSeparator
    {
        font-size: 55px;
        margin: 5px 2px;
        color: #000;
    }
</style> 
```

**[你可以在这里](http://jquery-countdown.googlecode.com/svn/trunk/index.html)看到倒数计时器的演示**

# android - 在图像视图中加载 gif

> ID：11657458
> 
> 赞同：0
> 
> 时间：2012-07-25T19:46:55.150
> 
> 标签：android, load, imageview

在我的应用程序中，有一部分将从服务器获取图像。问题是，在应用程序中加载图像时，空间仍然是空的。如何获得该 gif 以警告用户图像正在加载？

示例：http: [//goo.gl/mwFCC](http://goo.gl/mwFCC)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T12:26:52.170

您可以在空白处使用进度条（自定义进度条），并在下载图像后立即将其删除。

在Drawable中创建一个Xml如下

```
<?xml version="1.0" encoding="utf-8"?>
<animation-list xmlns:android="http://schemas.android.com/apk/res/android">  
   <item android:drawable="@drawable/image1" android:duration="200" />
   <item android:drawable="@drawable/image2" android:duration="200" />
</animation-list> 
```

现在您的进度条将如下所示

```
// Put this in Your vacant space
 <ProgressBar 
android:id="@+id/myId"
android:indeterminateDrawable="@drawable/my_progress_indeterminate" 
        android:layout_height="50dp"
 android:layout_width="50dp">
</ProgressBar> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:55:14.680

在下载远程图像[时](http://androidosbeginning.blogspot.se/2010/09/gif-animation-in-android.html)，在应该保存远程图像的视图。下载完成后，通知主线程并告诉它使用下载的图像更新视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:55:27.653

您可以使用 android中的 buit`ProgressDialog`来实现此目的，例如，使用 an`AsynchronousTask`下载 onPreExecute() 上的图像，在`doInBackground()` 进程下载时`onPostExecute()`显示对话框并关闭对话框并显示结果。您也可以查看`frame animation`是否要使用自定义对话框。

# sql-server - SQL Server 几何：多个多边形的交集

> ID：11657462
> 
> 赞同：3
> 
> 时间：2012-07-25T19:47:16.520
> 
> 标签：sql-server, geometry, polygon, spatial

我在一个表中有多个多边形 ( `ImageId int, Quality float, Border geometry`)。

如何使用性能更高的 T-SQL 函数找到多边形的所有交点？是否有任何功能可以帮助查找交叉点而无需迭代并且无需将每个多边形与每个多边形或任何样本进行比较如何做到这一点。谁能帮我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T02:41:46.413

我现在无法测试这个，但如果空间聚合像其他聚合（即字符串 + 字符串）一样工作，让我们试试这个：

```
declare @intersection geometry;
select top 1 @intersection = border
from #polygons;

select @intersection = border.STIntersects(@intersection)
from #polygons;

select @intersection.STIsEmpty(); 
```

如果我的工作正确，@intersection 应该包含表中所有多边形的交集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:45:37.290

除了将每个多边形与其他多边形进行比较之外，我认为您无法做到这一点。

```
select p1.id, p2.id, p1.border.STIntersects(p2.border)
from #polygons p1
    inner join #polygons p2 on p1.id<p2.id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-29T14:59:32.857

通过使用 podiluska 的代码作为我的基本代码，我已经实现了您正在寻找的东西。但是它的性能不是很好。我希望有人可以提供更快的查询。

```
select geometry::UnionAggregate(inter_geometry) as intersection_union
from
(
    select p1.id as id1, p2.id as id2, p1.border.STIntersection(p2.border) as inter_geometry
    from #polygons p1
    inner join #polygons p2 on p1.id < p2.id
    where p1.border.STIntersects(p2.border) = 1
) t
where t.inter_geometry.STArea() > 0 --for some cases STIntersects returns 1 but the area is 0 
```

*顺便说一下，UnionAggregate 是 SQL Server 2012 的函数。*

# scripting - 用于查找和替换目录名称中的字符串的批处理命令

> ID：11657466
> 
> 赞同：1
> 
> 时间：2012-07-25T19:47:52.470
> 
> 标签：scripting, batch-file, rename

我创建了一个名为 XYZ 的模板项目。

我正在寻找一个批处理文件来复制项目目录锁存货和桶，然后用实际项目名称替换“XYZ”。我已经让它适用于所有文件名及其内容，唯一剩下的是目录名（例如，将 C:\Development\Foo\ZYZ.Web\ 重命名为 C:\Development\Foo\Foo.Web）。

有没有人知道一个命令行实用程序（或本机命令）来实现这一点？

这是我到目前为止所拥有的（借助[http://fart-it.sourceforge.net/](http://fart-it.sourceforge.net/)上的“查找和替换工具” ）

```
REM Copy Template to destination (C:\Development\ProjectName where ProjectName is specified by the first argument)
cd C:\Development\Template\
xcopy . C:\Development\%1 /E /I

cd C:\Development\%1
REM In the destination directory, use FART to search for XYZ (within files) and replace with ProjectName 
fart --recursive *.* XYZ %1
REM In the destination directory, use FART to search for XYZ (in filenames) and replace with ProjectName
fart --recursive --filename  *.* XYZ %1 
```

# google-plus - 如果用户 +1 页面，我可以在 iframe 中呈现网站并获得回调吗？

> ID：11657468
> 
> 赞同：0
> 
> 时间：2012-07-25T19:48:07.743
> 
> 标签：google-plus, google-plus-one

我想在我的页面上的 iframe 中嵌入一个网站，并在用户 +1 网站（iframe 中的那个）时获得回调。

这可能吗？我试图用谷歌搜索没有有趣的结果，也许有人事先知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:46:43.290

由于安全限制，您将无法从 <iframe> 获取跨域内容。请参阅[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:59:04.373

您可以使用 postMessage 在不同域的 iframe 之间进行对话。

# python - Python CSV：根据字典映射写入行

> ID：11657471
> 
> 赞同：0
> 
> 时间：2012-07-25T19:48:18.320
> 
> 标签：python, csv, dictionary, mapping, rules

我有一个`dict`描述我想应用于 CSV 文件中每一行的映射。

```
dict1 = {"key1":["value1", "value2"], "key2":["value3"]} 
```

我的程序*应该读取*一行并将特定列中的键映射到`dict`. 如果每个键只有一个值，则脚本应将包含新值的行写入新文件。如果一个键有多个值，那么每个值应该写入一个新行。

例如，`csvin`包含 2 行。一行有一列，其中`key1`存在，另一行有`key2`。在这种情况下，输出文件`csvout`应该包含比*更多*的行`csvin`，实际上是 3。*除了一个值之外，其中*`key1`两行（与 关联）将是相同的。

 *我当前的脚本是这样的：

```
def convSan(sfin, cfout):
    with open(sfin, "rb") as fin:
        with open(cfout, "wb") as fout:
            csvin = csv.reader(fin)
            csvout = csv.writer(fout, delimiter=",")
            fline = csvin.next()
            csvout.writerow(fline)

        for row in csvin:
            row[25] = dict1[row[25]]
            csvout.writerow(row) 
```

这会生成一个与输入文件具有相同列数的输出文件，但会使用正确的新值填充每个字段（某些字段现在是值列表）。

@sr2222 提供的答案适用于简单列表，但我无法让它在我的特定情况下工作。

帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:06:45.233

第一的：

```
for index, value in enumerate(list1):
    list1[index] = list2[index] 
```

是格式化您的第一个循环的一种更简洁的方法。但是，这相当于`list1 = copy.copy(list2)`。我认为你想要做的是：

```
normalized_values = ['123', '456']
content = ['a123', '123', 'b456', '789']
for index, value in enumerate(content):
    for normalized_value in normalized_values:
        if normalized_value in value:
            content[index] = normalized_value 
```

这会给你留下：

```
content = ['123', '123', '456', '789'] 
```

问题更新后编辑：

```
replacement_map = {'123' : ('a123', '1234'), '456' : ('00456',)}
input = ['123', '456', '234', '123', '789']
output = []
for value in input:
    try:
        output.extend(replacement_map[value])
    except KeyError:
        output.append(value) 
```

try/except 相当于：

```
if value in replacement_map:
    output.extend(replacement_map[value])
else:
    output.append(value) 
```

作为对上述从 2 个列表构建地图的评论的回应（请注意，只有当您始终可以假设 list1 和 list2 的长度相同时，这才会正确运行）：

```
replacement_map = {}
for key, value in zip(list1, list2):
    try:
        replacement_map[key].append(value)
    except KeyError:
        replacement_map[key] = [value] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T01:31:06.487

对于有兴趣的人，我能够使它像这样工作：

```
def convSan(sfin, cfout):
    with open(sfin, "rb") as fin:
        with open(cfout, "wb") as fout:
            csvin = csv.reader(fin)
            csvout = csv.writer(fout, delimiter=",")
            fline = csvin.next()
            csvout.writerow(fline)
            buff = []

            for row in csvin:
                dl = ce.dict1200[row[25]]
                if len(dl) == 1:
                    row[25] = dl[0]
                    csvout.writerow(row)
                else:
                    for i in range(len(dl)-1):
                        row[25] = dl[i]
                        csvout.writerow(row) 
```

转换成功，并且根据需要，我的输入文件包含的行数少于输出文件。*

# php - static 关键字对常量有影响吗？

> ID：11657474
> 
> 赞同：4
> 
> 时间：2012-07-25T19:48:34.653
> 
> 标签：php, class, static, constants

```
class A{
  const FOO = 1;
}

class B extends A{

  const FOO = 5;

  function foo(){
    print self::FOO;
    print static::FOO;
  }
}

$b = new B;
$b->foo(); 
```

在这两种情况下都会打印 5。

那么在常量上使用 static 和 self 没有区别吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:06:05.093

在[后期静态绑定](http://php.net/manual/en/language.oop5.late-static-bindings.php)的上下文中存在差异。

考虑这段代码：

```
<?php

class A {
    const FOO = 1;

    function bar() {
        print self::FOO;
        print "\n";
        print static::FOO;
    }
}

class B extends A {
    const FOO = 5;
}

$b = new B;
$b->bar();  // 1 5 
```

如果运行此代码，输出将是：

```
1
5 
```

引用`self::FOO`时，会打印 的值`1`（即使`bar()`在 class 上调用了`B`，但是当使用`static`关键字时，后期静态绑定生效，并且它引用了`FOO`常量 from`B`而不是`A`使用 static 关键字时。

这与 PHP 5.3 及更高版本有关。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T19:57:34.283

在您的示例中，没有足够的继续看到差异。但是，如果您有：

```
class Foo
{
  protected static $FooBar = 'Foo';

  public function FooBar()
  {
    echo "static::\$FooBar = " . static::$FooBar . PHP_EOL;
    echo "self::\$FooBar = " . self::$FooBar . PHP_EOL;
  }
}

class Bar extends Foo
{
  protected static $FooBar = 'Bar';
}

$bar = new Bar();
$bar->FooBar(); 
```

您会看到差异（范围和正在解析的实例 [继承与基础]）

[**self** , **parent**和**static**关键字](http://php.net/manual/en/language.oop5.static.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T21:02:54.687

是，有一点不同。在您的示例代码中，两者都`self`引用`static`相同的`const FOO`声明。

用户“drew010”发送的示例显示了差异。

# java - Tomcat：自定义错误页面不起作用

> ID：11657475
> 
> 赞同：7
> 
> 时间：2012-07-25T19:48:35.077
> 
> 标签：java, eclipse, tomcat, web.xml

好吧，这应该很简单。我修改了项目的 web.xml 以显示我自己的 500 错误页面：

```
<error-page>
    <error-code>500</error-code>
    <location>/error.jsp</location>
</error-page> 
```

然后我写了一个最简单的servlet来测试它：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
} 
```

然后完全忽略自定义页面（位于根目录），我得到默认的 Tomcat 错误页面。

我正在使用 MyEclipse 调试器附带的 Tomcat 6 版本。我已经三倍地检查了这个是否有错别字，但我找不到任何不寻常的地方。我想知道*错误页面*标签是否需要位于文档的某个部分。有谁知道可能出了什么问题？

*编辑：这是请求的完整 web.xml：

```
 <?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" 

    xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

<display-name></display-name>

<jsp-config> 
   <jsp-property-group> 
      <url-pattern>/js/base.js</url-pattern>
      <url-pattern>/js/catalog.base.js</url-pattern>
      <url-pattern>/js/minicatalog.base.js</url-pattern>
      <url-pattern>/js/addresses.js</url-pattern>
   </jsp-property-group> 
</jsp-config>

<mime-mapping>
    <extension>pdf</extension>
    <mime-type>application/pdf</mime-type>
</mime-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath:/applicationContext.xml</param-value>
</context-param>

<!-- error-page>
    <error-code>403</error-code>
    <location>/index.jsp?redirect=1</location>
</error-page-->

<error-page>
    <error-code>500</error-code>
    <location>/error.jsp</location>
</error-page>

<!-- BASE -->
<servlet>
    <description>User entity methods.</description>
    <display-name>User</display-name>
    <servlet-name>UserServlet</servlet-name>
    <servlet-class>com.sitei.base.servlet.UserServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>UserServlet</servlet-name>
    <url-pattern>/servlet/UserServlet</url-pattern>
</servlet-mapping>

<servlet>
    <description>Person entity methods.</description>
    <display-name>Person</display-name>
    <servlet-name>PersonServlet</servlet-name>
    <servlet-class>com.sitei.base.servlet.PersonServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>PersonServlet</servlet-name>
    <url-pattern>/servlet/PersonServlet</url-pattern>
</servlet-mapping>

<servlet>
    <description>Company entity methods.</description>
    <display-name>Company</display-name>
    <servlet-name>CompanyServlet</servlet-name>
    <servlet-class>com.sitei.base.servlet.CompanyServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>CompanyServlet</servlet-name>
    <url-pattern>/servlet/CompanyServlet</url-pattern>
</servlet-mapping>

<servlet>
    <description>Module entity methods.</description>
    <display-name>Module</display-name>
    <servlet-name>ModuleServlet</servlet-name>
    <servlet-class>com.sitei.base.servlet.ModuleServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>ModuleServlet</servlet-name>
    <url-pattern>/servlet/ModuleServlet</url-pattern>
</servlet-mapping>

<servlet>
    <description>Profile entity methods.</description>
    <display-name>Profile</display-name>
    <servlet-name>ProfileServlet</servlet-name>
    <servlet-class>com.sitei.base.servlet.ProfileServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>ProfileServlet</servlet-name>
    <url-pattern>/servlet/ProfileServlet</url-pattern>
</servlet-mapping>

<servlet>
    <description>Address entity methods.</description>
    <display-name>Address</display-name>
    <servlet-name>AddressServlet</servlet-name>
    <servlet-class>com.sitei.base.servlet.AddressServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>AddressServlet</servlet-name>
    <url-pattern>/servlet/AddressServlet</url-pattern>
</servlet-mapping>
<!-- END BASE -->

<!-- PUSH -->
<servlet>
    <servlet-name>icepush</servlet-name>
    <servlet-class>org.icepush.servlet.ICEpushServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>icepush</servlet-name>
    <url-pattern>*.icepush</url-pattern>
</servlet-mapping>
<!-- END PUSH -->

<!-- TRUCKS -->
<servlet>
    <description>Employee entity methods.</description>
    <display-name>Employee</display-name>
    <servlet-name>EmployeeServlet</servlet-name>
    <servlet-class>com.sitei.trucks.servlet.EmployeeServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>EmployeeServlet</servlet-name>
    <url-pattern>/servlet/EmployeeServlet</url-pattern>
</servlet-mapping>

<servlet>
    <description>Vehicle entity methods.</description>
    <display-name>Vehicle</display-name>
    <servlet-name>VehicleServlet</servlet-name>
    <servlet-class>com.sitei.trucks.servlet.VehicleServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>VehicleServlet</servlet-name>
    <url-pattern>/servlet/VehicleServlet</url-pattern>
</servlet-mapping>

<servlet>
    <description>VehicleBrand entity methods.</description>
    <display-name>VehicleBrand</display-name>
    <servlet-name>VehicleBrandServlet</servlet-name>
    <servlet-class>com.sitei.trucks.servlet.VehicleBrandServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>VehicleBrandServlet</servlet-name>
    <url-pattern>/servlet/VehicleBrandServlet</url-pattern>
</servlet-mapping>

<servlet>
    <description>Report methods.</description>
    <display-name>Report</display-name>
    <servlet-name>ReportServlet</servlet-name>
    <servlet-class>com.sitei.trucks.servlet.ReportServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>ReportServlet</servlet-name>
    <url-pattern>/servlet/ReportServlet</url-pattern>
</servlet-mapping>

<servlet>
    <description>ExpenseLog methods.</description>
    <display-name>ExpenseLog</display-name>
    <servlet-name>ExpenseLogServlet</servlet-name>
    <servlet-class>com.sitei.trucks.servlet.ExpenseLogServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>ExpenseLogServlet</servlet-name>
    <url-pattern>/servlet/ExpenseLogServlet</url-pattern>
</servlet-mapping>

<servlet>
    <description>IncomeLog methods.</description>
    <display-name>IncomeLog</display-name>
    <servlet-name>IncomeLogServlet</servlet-name>
    <servlet-class>com.sitei.trucks.servlet.IncomeLogServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>IncomeLogServlet</servlet-name>
    <url-pattern>/servlet/IncomeLogServlet</url-pattern>
</servlet-mapping>

<servlet>
    <description>FileExport methods.</description>
    <display-name>FileExport</display-name>
    <servlet-name>FileExportServlet</servlet-name>
    <servlet-class>com.sitei.trucks.servlet.FileExportServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>FileExportServlet</servlet-name>
    <url-pattern>/servlet/FileExportServlet</url-pattern>
</servlet-mapping>
<!-- END TRUCKS -->

<session-config>
  <session-timeout>15</session-timeout> 
</session-config>

<!--security-constraint>
    <web-resource-collection>
        <web-resource-name>LOGIN</web-resource-name>
        <url-pattern>/*</url-pattern>
    </web-resource-collection>
    <user-data-constraint>
        <transport-guarantee>CONFIDENTIAL</transport-guarantee>
    </user-data-constraint>
</security-constraint-->

<welcome-file-list>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-26T07:34:34.740

在 servlet 中，您应该调用：

```
response.sendError(HttpServletResponse.SC_INTERNAL_SERVER_ERROR); 
```

代替：

```
response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR); 
```

setStatus 用于设置没有错误时的返回状态码（例如，对于状态码`SC_OK`或`SC_MOVED_TEMPORARILY`）。如果有错误，`sendError`则应使用该方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T22:20:32.083

```
response.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR); 
```

将发送一个带有 http 状态 500 的响应。这说明了一个内部错误，但不会在您的应用程序中发出一个。

尝试

```
throw new ServletException(); 
```

相反，您会看到您的配置按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:03:36.497

你的 web.xml 是什么样的？特别是 servlet/过滤器映射？您可能需要添加`<dispatcher>ERROR</dispatcher>`到您的 servlet/过滤器映射。

# php - PHP中针对LDAP属性/关联数组的未定义索引警告？

> ID：11657478
> 
> 赞同：2
> 
> 时间：2012-07-25T19:48:41.130
> 
> 标签：php, multidimensional-array, ldap

我无法从 PHP 中的 LDAP 属性中检索一些数据。

我连接到 LDAP，执行查询，并将结果存储在 var 中，如下所示：

`$info = ldap_get_entries($connect, $sr);`

现在，我可以将所需的大部分 LDAP 属性存储在会话变量中，如下所示：

```
 $_SESSION['accountFirstName'] = $info[0]['givenname'][0];
        $_SESSION['accountLastName'] = $info[0]['sn'][0];
        $_SESSION['accountEmail'] = $info[0]['mail'][0]; 
```

这些工作正常..没问题。但是，我需要存储另一个变量。我相信它是一个关联数组。出于某种原因，无论我做什么，我都会收到`NOTICE: Undefined index`针对该特定属性的警告。我已经尝试像上面的演示一样存储它，但老实说，我不完全确定属性名称两端的 [0] 索引是什么意思。我不熟悉 LDAP，坦率地说，设置非常混乱.

所以我想我的问题是：

*   如何访问从 LDAP 查询返回的关联数组？

*   “未定义的索引”是什么意思？这是否意味着该属性不存在，或者它在提供的索引中不存在？

*   如何测试我的 LDAP 查询以查看变量是否存在？

*   执行查询的帐户可能没有足够的 LDAP 访问权限（该项目是针对一所大学的，并且有很多繁文缛节）。我有什么方法可以通过代码验证吗？

谢谢！对于所提供的信息含糊不清，我深表歉意，我现在不能太张嘴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:54:14.807

问题不在于`ldap_get_entries()`方法或 LDAP，而是返回的数据。

该`NOTICE: Undefined index`错误表明您的数组中的索引不存在。在这种情况下，您收到的数据很可能没有诸如`givenname`or之类的值`mail`，但它也可能是`[0]`其中一个数组中的（或“第一条记录”）。

文本/字符串索引值，例如`givenname`or `sn`，将被定义为“关联数组”。您正在正确访问该数据`$info[0]['givenname'];`

要检查 PHP 中是否存在索引，可以使用`isset()`，例如：

```
if (isset($info[0]['givenname'])) {
    // process data here
} 
```

作为一种快速完成任务的方法，您可以使用以下方法：

```
if (count($info) > 0) {
    $_SESSION['accountFirstName'] = (isset($info[0]['givenname']) && isset($info[0]['givenname'][0])) ? $info[0]['givenname'][0] : '';
} 
```

如果您需要一长串值，我建议您编写类似于以下内容的内容来为您自动处理它：

```
$fields = array(
    'accountFirstName' => 'givenname',
    'accountLastName' => 'sn',
    'accountEmail' => 'mail'
);

$info = $info[0];
foreach ($fields as $field => $ldapField) {
    // check if the value exists; otherwise set it to an empty-string
    $_SESSION[$field] = (isset($info[$ldapField]) && isset($info[$ldapField][0])) ? $info[$ldapField][0] : '';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T19:52:14.760

做

```
echo '<pre>';
var_dump($info);
echo '</pre>'; 
```

看看数据的结构，然后你就会知道如何访问它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T19:53:50.953

解释未定义索引的最佳方法是举例：

```
$myArray = array(
    0 => 'val 1',
    1 => 'val 2',
    'apple' => 'cucumber',
);

// If I try to access $myArray['lemon'] I'm going to get an "undefined index" error because that index IS NOT DEFINED (similar to "array index out of bounds"). 
```

如果索引 0 给您此错误，则您尝试访问的数组可能未定义或为空。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T19:55:09.733

0 只是它试图在 $info 数组上访问的索引。第一个元素是一个索引为“givenname”（与数字索引相对的字符串）的数组，并且该数组包含另一组数组，您正在尝试访问其中的第一个元素。所以你的结构必须是这样的

```
$info = array(
  [0] => array(
      'givenname' => array(
          [0] => 'test',
          [1] => 'other data or possibly an array'
      ) 
   )
); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T19:58:28.627

LDAP 的特点是一个属性可以“指向”另一个属性。这就是条目以这种方式表示的原因：

```
//$ldapResults = ldap_get_entries(xxx)
//$ldapResults['count'] = 1
//$ldapResults[0] = array('dn' => array('count' => 1, array('CN=XXXX')) 
```

因此，当您想要查看 ldap 结果时，您需要知道从 LDAP 中提取的数据类型。您可以直接访问数据，也可以简单地循环访问`$ldapResults[0]`包含我认为最重要信息的数据。

未定义的索引可能意味着该属性不存在或不在您指定的索引处。您可以使用简单的`isset`. 现在，如果您不知道要返回什么样的结果，您可能想要转储结果。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-26T01:31:42.130

属性可以是多值的，因此是数组。一个属性是否可以在一个条目中多次出现在模式属性定义中定义。LDAP 客户端应该访问模式以确定语法、匹配规则、排序规则以及属性是否是多值的。例如，如果使用标准模式，“givenName”是多值的。

# ios - *不*使用导航控制器在视图中保存和恢复图像？

> ID：11657479
> 
> 赞同：0
> 
> 时间：2012-07-25T19:48:50.090
> 
> 标签：ios, opengl-es, uinavigationcontroller, push, segue

我正在编写一个 OpenGL 应用程序，它通过不逐帧清除帧缓冲区来绘制轨迹/笔划（它只是让所有内容都累积在自身之上，这就是我想要的）。

该应用程序有一个设置屏幕。您可以通过点击一个按钮来访问它。完成设置后，它会返回到图形。

这就是问题所在：我无法弄清楚如何在不丢失帧缓冲区中的内容的情况下从设置转换回图形。该应用程序是一种绘画玩具。您希望能够绘画，进入设置，然后返回您正在做的事情，而无需清除屏幕并删除您的工作！

如果我使用 NavigationController，所有这些都会得到解决（我已经尝试过了——效果很好！）

问题是，我不希望屏幕顶部出现丑陋、笨重的导航栏。但是，如果您想要导航控制器，则必须使用导航栏。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:56:09.300

您的解决方案很简单。隐藏导航栏。

```
navController.navigationBar.hidden = YES; 
```

看这里：

[UINavigationController 没有导航栏？](https://stackoverflow.com/questions/5765946/uinavigationcontroller-without-navigation-bar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T09:59:13.157

在您离开进行设置之前，请使用 glReadPixels 保存帧缓冲区中的内容。当您返回时，将该数据加载到纹理中并将其绘制在屏幕上。

# java - 使用带有 JCheckBox 的图标

> ID：11657481
> 
> 赞同：8
> 
> 时间：2012-07-25T19:49:04.513
> 
> 标签：java, swing, jcheckbox

我有一个摇摆应用程序，我想在其中使用带有图标的 JCheckbox。我构建的图标如下：

```
 JCheckBox unsubmit = new JCheckBox("Unsubmit",applet.undo); 
```

当我这样做时，标签和图标会出现在我的 GUI 中，但找不到框本身。如果我构造没有图标的 JCheckBox，则该框会返回。我试过调整按钮的首选大小，但没有效果。

有人知道这里发生了什么吗？

谢谢，

艾略特

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-25T19:51:23.390

图标被用来代替盒子。考虑创建一个 JCheckBox 和一个 JLabel 并紧挨着放置，并让 JLabel 保存 ImageIcon。

# c# - 将属性反序列化为抽象基引用

> ID：11657482
> 
> 赞同：2
> 
> 时间：2012-07-25T19:49:06.970
> 
> 标签：c#, protobuf-net

是否可以将具有属性的聚合类型反序列化为作为引用的抽象基类型，请参阅 Aggregate.Base？如果没有，最好的解决方法是什么？

```
[ProtoContract]
[ProtoInclude(1, typeof(Derived))]
public abstract class Base { }

[ProtoContract]
public class Derived : Base
{
    [ProtoMember(1)]
    public int SomeProperty { get; set; }
}

[ProtoContract]
public class Aggregate
{
    [ProtoMember(1, AsReference = true)]
    public Base Base { get; set; }
}

[TestClass]
public class UnitTest
{
    [TestMethod]
    public void TestMethod1()
    {
        var value = new Aggregate { Base = new Derived() };
        using (var stream = new MemoryStream())
        {
            Serializer.Serialize(stream, value);
            stream.Position = 0;

            // Raises an exception
            // Unable to create type Sage.Estimating.Data.Base: Cannot create an abstract class.
            Serializer.Deserialize<Aggregate>(stream);
        }
    }
} 
```

在引发异常时调用堆栈：

> protobuf-net.dll!ProtoBuf.BclHelpers.ReadNetObject(object value, ProtoBuf.ProtoReader source, int key, System.Type type, ProtoBuf.BclHelpers.NetObjectOptions options) Line 428 + 0xda bytes C# protobuf-net.dll!ProtoBuf.Serializers .NetObjectSerializer.Read(object value, ProtoBuf.ProtoReader source) Line 45 + 0x9f bytes C# protobuf-net.dll!ProtoBuf.Serializers.TagDecorator.Read(object value, ProtoBuf.ProtoReader source) Line 66 + 0x18 bytes C# protobuf-net .dll!ProtoBuf.Serializers.PropertyDecorator.Read(object value, ProtoBuf.ProtoReader source) Line 74 + 0x18 bytes C# protobuf-net.dll!ProtoBuf.Serializers.TypeSerializer.Read(object value, ProtoBuf.ProtoReader source) Line 205 + 0xf 字节 C# protobuf-net.dll!ProtoBuf.Meta.RuntimeTypeModel.Deserialize(int key, object value, ProtoBuf.ProtoReader source) Line 562 + 0xf bytes C# protobuf-net.dll!ProtoBuf.Meta.TypeModel.DeserializeCore(ProtoBuf.ProtoReader reader, System.Type type, object value, bool noAutoCreate) Line 634 + 0x14 bytes C# protobuf-net.dll !ProtoBuf.Meta.TypeModel.Deserialize(System.IO.Stream source, object value, System.Type type, ProtoBuf.SerializationContext context) Line 555 + 0x14 bytes C# protobuf-net.dll!ProtoBuf.Meta.TypeModel.Deserialize(System .IO.Stream source, object value, System.Type type) Line 534 + 0x13 bytes C# protobuf-net.dll!ProtoBuf.Serializer.Deserialize(System.IO.Stream source) Line 78 + 0x5a bytes C#Meta.TypeModel.Deserialize(System.IO.Stream source, object value, System.Type type, ProtoBuf.SerializationContext context) Line 555 + 0x14 bytes C# protobuf-net.dll!ProtoBuf.Meta.TypeModel.Deserialize(System.IO. Stream source, object value, System.Type type) Line 534 + 0x13 bytes C# protobuf-net.dll!ProtoBuf.Serializer.Deserialize(System.IO.Stream source) Line 78 + 0x5a bytes C#Meta.TypeModel.Deserialize(System.IO.Stream source, object value, System.Type type, ProtoBuf.SerializationContext context) Line 555 + 0x14 bytes C# protobuf-net.dll!ProtoBuf.Meta.TypeModel.Deserialize(System.IO. Stream source, object value, System.Type type) Line 534 + 0x13 bytes C# protobuf-net.dll!ProtoBuf.Serializer.Deserialize(System.IO.Stream source) Line 78 + 0x5a bytes C#

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T11:30:43.873

谢谢你的精彩场景；不知道我是怎么忽略的。基本上，它归结为关键跟踪，这在循环图中变得特别复杂。为了尽快注册密钥，它*曾经*做的是（对于新对象）：

*   创建对象的实例
*   根据已知密钥注册它
*   将有效负载反序列化为新创建的对象

显然第一步是在继承的情况下出错，*不管*基类型是抽象的/不可创建的。它现在所做的是：

*   针对已知键注册一个虚拟（不可提取）值
*   反序列化从`null`
*   在创建对象时捕获对象（更新虚拟对象）（这段代码几乎已经存在，尽管它专门用于“根对象”场景；现在变得更通用）

这样做的结果是：它现在可以工作了；您的测试通过了，并且对象的类型正确：

```
var obj = Serializer.Deserialize<Aggregate>(stream);
Assert.AreEqual(typeof(Derived), obj.Base.GetType()); 
```

需要修订版 556 或更高版本。

# vb.net - IDispose 是必需的，垃圾收集器是否在循环结束时工作等

> ID：11657483
> 
> 赞同：0
> 
> 时间：2012-07-25T19:49:10.397
> 
> 标签：vb.net, garbage-collection, idisposable

我的问题是关于 IDisposable 的实现。据我所知，当代码或部分完成时，变量或实例被释放；如果陈述有误，请纠正我。以下是我的程序的一部分：

```
 If Con.State = ConnectionState.Closed Then Con.Open()
        Cmd = New SqlCeCommand("Select * from BillItem", Con)
        Rdr = Cmd.ExecuteReader()
        While Rdr.Read = True
            Dim x As New Classes.StockRoster
            x.BillID = Rdr("BillID")
            x.IsSales = Rdr("IsSales")
            x.Quantity = Rdr("Quantity")
            x.ContactBase = (From t As CommonCodes.ItemBase In ContactsbaseDict Where t.ID = BillContactDict(x.BillID)).First
            x.StockEntityBase = StockEntitydict(Rdr("StockID"))
            x.BillDate = Rdr("BillDate")
            result.AddRange(x)
        End While
        Con.Close()
 End IF 
```

如果此处使用 X 变量，如果 I x（或 StockRoster）使用 IDisposable 接口，是否会改善内存？

默认情况下，资源不能在每个循环结束时处理吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:02:27.450

`IDisposable`是关于处置非托管资源，例如数据库连接。它与垃圾收集没有任何关系。

你的`StockRoster`类似乎没有非托管资源，所以它不需要实现`IDisposable`. 即使这样做了，在循环中处理它也没有意义`for`，因为您将实例添加到稍后将使用的结果列表中。在`for`循环中处理它会使实例在调用代码中不可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:04:21.617

首先，如果连接打开，您将永远不会输入`If-clause`发生异常时可能发生的情况。

实际上，连接是最好的例子。始终尽快关闭连接。最简单的方法是在最后使用`using-statement`which 调用`Dispose`（即使出现异常）。所以它类似于`Try/Catch/Finally`. `Connection.Dispose`也会隐式关闭它。

作为一个经验法则：使用`using-statement`任何实现`IDisposable`（如`SqlCeCommand`上面）。

回答你的实际问题：

> 如果我 x（或 StockRoster）将使用 IDispose 类，是否会有任何内存改进，资源不能在每个循环结束时默认处理吗？

什么是*内存改进*，`IDisposable`是一个接口，即使类没有实现，你也可以调用 dispose 或 close `IDisposable`。这只是暗示它可能使用非托管资源并应尽快处理。

# sql-server-2008 - SQL Server 查询更新

> ID：11657488
> 
> 赞同：3
> 
> 时间：2012-07-25T19:49:41.783
> 
> 标签：sql-server-2008, select

我有 2 张桌子。我需要更新数据中的数据`tableB`，用来自的数据填充它`tableA`。

但问题在于设计（注意：我无法更改设计，因为它是一个现成的系统。我只需要处理失败）。

可以说`tableA`（2列）数据源的结构如下：

```
ID | NAME
1    dude
2    dud
3    bro
4    broo
5    killa
6    whale
--ID is an index and NAME is UNIQUE 
```

现在`tableB`（6列）目的地（对我来说很难）：

```
ID1 | NAME1 | ID2 | NAME2 | ID3 | NAME3
1     dude    2     dud     3     bro
4     broo    5     killa   6     whale
--All columns here has UNIQUE data though it is not set on the design.
--and so on until the end. 
```

现在我要做的是与那里的 ID 对应`UPDATE`的名称中`tableA`的名称。`tableB`

例子：

```
ID from TableA is 1
Find ID=1 on TableB
If ID=1 then UPDATE the next column to 'dude' 
```

TableA 的示例结尾是：

```
ID | Name
9997 sweet
9998 jess
9999 grape
--The END 
```

TableB 的示例结尾是：

```
ID1 | NAME1 | ID2 | NAME2 | ID3 | NAME3
9997  sweet1  9998  jess1   9999  grape1
--The END 
```

请帮我。

笔记：

*   所有给定的表名和列名仅用于示例目的。
*   表中有更多列，但它们不需要更改/更改，因此我没有包含它们的示例。
*   原因是其中的数据`TableB`已更改，不再匹配正确的数据。
*   所以我需要用正确的数据重新填充`TableB`，而正确数据的唯一来源是`TableA`.
*   最后，我使用的是 SQL Server 2008。

- - - 编辑 - - -

这是我的最终查询，效果很好：

```
UPDATE CHAR_INFOR
SET
    CHARID0=(SELECT CONVERT(VARCHAR,substring(char_data, 9, 16)) from CHAR_DATA0 A WHERE A.CHAR_KEY=CHAR0_KEY), 
CHARID1=(SELECT CONVERT(VARCHAR,substring(char_data, 9, 16)) from CHAR_DATA0 A WHERE A.CHAR_KEY=CHAR1_KEY), 
CHARID2=(SELECT CONVERT(VARCHAR,substring(char_data, 9, 16)) from CHAR_DATA0 A WHERE A.CHAR_KEY=CHAR2_KEY); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:58:05.870

似乎标准 SQL 应该可以工作：

```
UPDATE TableB B 
SET Name1=(SELECT Name from TableA A where A.ID=ID1), 
Name2=(SELECT Name from TableA A where A.ID=ID2), 
Name3=(SELECT Name from TableA A where A.ID=ID3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:56:01.267

这取决于您使用的 MSSQL 版本，但如果您使用的版本支持[PIVOT](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)关键字，我强烈建议您使用它。基本上，您可以“透视”一个表格并使用它将您的行变成列。

如果您没有这个，那么替代方法是使用临时表并自己进行数据透视。这是一个漫长的过程，但相当直截了当。这是一篇关于[在 sql server 中使用临时表进行动态旋转](http://www.codeproject.com/Articles/27776/Dynamic-Pivoting-in-SQL-Server)的文章。希望这可以帮助！

# c# - 处理返回（int），到另一个程序

> ID：11657489
> 
> 赞同：0
> 
> 时间：2012-07-25T19:49:47.087
> 
> 标签：c#

下午好，

我有一个进程（控制台），其中 main 它将返回一个整数。

我将以这种方式从另一个开始这个过程：

```
Process processo = new Process();

processo.StartInfo.FileName = caminhoExecutavel;
processo.StartInfo.WindowStyle = ProcessWindowStyle.Minimized;
processo.Start(); 
```

我如何测试这个返回（整数）第一个过程？

解释：

我有一个程序 (1) 将调用上面的可执行文件 (2)。

需要测试这个程序（1）返回（int）这个可执行文件（2）。因为 main 它返回一个整数。

我无法找到如何/在哪里可以获得此回报。

注意：即使通过程序中的代码 (1)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:52:24.603

如果您等待进程退出，则可以读取该`ExitCode`属性。请参阅[文档](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exitcode.aspx)。

# javascript - 网站的 Javascript 计数器

> ID：11657492
> 
> 赞同：6
> 
> 时间：2012-07-25T19:49:55.860
> 
> 标签：javascript

我正在尝试为网站编写命中计数器。作为一种偏好，不是必需的，我正在尝试使用 Javascript 来执行此操作。在网站的 html 文件中，我正在从 javascript 文件中读取一个数字并将其输出。每次点击发生时，我怎样才能让它“计数”？

抱歉问了这么模糊的问题。我在正确的轨道上吗？任何提示、代码或参考将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T19:52:06.033

使用 Javascript，您只能计算当前用户的点击次数，因为您必须将计数保存在 cookie 或客户端技术中。

要获得更准确的方式，您必须使用服务器端语言，并且可能添加像数据库这样的存储引擎以使其工作。

我建议您从这里开始[Php 对于初学者](https://ss23.github.io/php-tutorial/)，该链接可能很旧，但它涵盖了创建计数器所需了解的所有基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:52:44.877

Javascript 无法在没有安全问题的情况下更改服务器或客户端计算机上的文件。您可能还想考虑使用`PHP`或另一种服务器端脚本语言将另一个页面加载为空白图像。然后可以毫无问题地更新文件的计数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:55:44.767

我看到有大量流量的计数器的大多数站点都使用定时计数器并使用 ajax 在加载时获取实数。

这样做的好处是您没有静态计数器，刷新后您会得到实数，但就像之前所说的那样，仅使用 javascript 是不可能的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T20:04:24.020

Javascript 是一种客户端脚本语言 - 它在客户端 PC 上运行。计数器本身必须在服务器端实现，因为您必须计算 http 请求。尽管 javascript 代码可能会请求服务器更新客户端电脑上显示的 html 页面上的计数器。

# c# - 阶乘函数对高参数产生不正确的值

> ID：11657494
> 
> 赞同：0
> 
> 时间：2012-07-25T19:49:58.537
> 
> 标签：c#, console, console-application, factorial

这个小程序测试了计算阶乘的两种方法——通过迭代和递归。

阶乘.cs：

```
using System;

namespace Functions
{
    public class Factorial
    {
        public static ulong CalcRecursively(int number)
        {
            if (number > 1)
                return (ulong)number * CalcRecursively(number - 1);
            if (number <= 1)
                return 1;

            return 0;
        }

        public static ulong Calc(int number)
        {
            ulong rValue=1;

            for (int i = 0; i < number; i++)
            {
                rValue = rValue * (ulong)(number - i);                
            }

            return rValue;

        }

    }
} 
```

主程序.cs：

```
using System;

using Functions;
class FunctionClient
{

    public static void Main()
    {

        Console.WriteLine("{0}\n", Functions.Factorial.CalcRecursively(TESTED_VALUE));
        Console.WriteLine("{0}\n", Functions.Factorial.Calc(TESTED_VALUE));

        Console.ReadKey();

    }

    const int TESTED_VALUE = 60;

} 
```

安慰：

> 9727775195120271360
> 9727775195120271360

[根据互联网上最可靠的来源，](http://pl.wikisource.org/wiki/Silnia)可以使用低数字，但否则（例如 60）它会输出不正确的值。你能指出我的错误吗？对我来说，这两种完全不同的方法以完全相同的方式出错，这让我难以置信。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T19:57:43.270

您遇到了 C# 的 ulong 数据类型的限制。[根据MSDN](http://msdn.microsoft.com/en-us/library/t98873t4%28v=vs.100%29.aspx)，它是一个 64 位数据结构，将其限制为最大值 18,446,744,073,709,551,615 。

如果您确实想探索更大的数字，.NET 4 引入了您可能感兴趣的[BigInteger 结构。](http://msdn.microsoft.com/en-us/library/system.numerics.biginteger.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:05:53.530

```
using System.Numerics;

public static BigInteger Calc(int number)
{
    BigInteger rValue = 1;
    for (int i = 0; i < number; i++)
    {
        rValue = rValue * (ulong)(number - i);
    }
    return rValue;
} 
```

并添加对 System.Numerics 的引用

# python - Python 2.7：访问列表的函数

> ID：11657496
> 
> 赞同：0
> 
> 时间：2012-07-25T19:50:07.960
> 
> 标签：python, list, for-loop

我正在使用带有 SimPy 模块的 Python2.7，第一次在这里发帖。我只是在学习他们两个，所以我希望我能正确解释这一点。我的程序的目标：创建一个需求对象并每周生成一个数字。将其存储在列表中。根据需求对象创建的数字，创建一个 Supply 对象并每周生成一个数字。我似乎能够创建我的 52 个数字，并将它们附加到一个列表中，但我无法成功地让 Supply 对象通读该列表。我的代码如下：

```
from SimPy.Simulation import *
import pylab as pyl
from random import Random
import matplotlib.mlab as mlab
import matplotlib.pyplot as plt
# Model components
runLength = 51

## Lists for examination
D1Vals = []
S1Vals = []

.... other code lines

class Demander(Process):

# This object creates the demand, and stores the values in the 'D1Vals' list above

def weeklyDemand(self):  # Demand Weekly
    while True:
            lead = 1.0      # time between demand requests
            demand = random.triangular(20,110,370)  # amount demanded each increment
            #yield put, self, orderBook, delivery
            print('Week'+'%6.0f: Need %6.0f units: Total Demand = %6.0f' %
                    (now(), demand, orderBook.amount))
            yield hold, self, lead
            yield put, self, orderBook, demand
            D1Vals.append(demand)

# This object is trying to read each value iteratively in D1Vals, 
  and create a supply value and store in a list 'S1Vals'

class Supplier(Process):

def supply_rate(self):
    lead = 1.0
    for x in D1Vals:
            supply = random.triangular(x - 30, x , x + 30)               
            yield put, self, stocked, supply
            print('Week'+'%6.0f: Gave %6.0f units: Inv. Created = %6.0f' %
                    (now(), supply,stocked.amount))
            yield hold, self, lead
            S1Vals.append(stocked.amount)

..... other misc coding .....

# Model
demand_1 = Demander()
activate(demand_1, demand_1.weeklyDemand())
supply_1 = Supplier()
activate(supply_1, supply_1.supply_rate())
simulate(until=runLength) 
```

当我运行我的程序时，它会创建我的需求并将每周和累积值输出到控制台，它还会为我打印 D1Vals 列表以查看它是否为空。

任何人都可以请指导我成功地从供应商对象和功能读取列表的正确路径。谢谢，请原谅我对 python 的明显“新鲜”展望；）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:09:13.577

`D1Vals`并`S1Vals`在模块范围内定义；您应该能够 `x=S1Vals[-7:]`在该模块中的任何位置编写表达式而不会出现问题。

这适用于访问这些变量的值和改变这些变量的值，因此

```
def append_supply( s ):
    S1Vals.append(s) 
```

应该管用。

但是，要分配给它们，您需要将它们声明为全局

```
def erase_supply():
    '''Clear the list of supply values'''
    global S1Vals
    S1Vals = [] 
```

如果`global S1Vals`省略该行，结果将是函数局部变量`S1Vals`由赋值语句定义，从而遮蔽了同名的模块级变量。

避免使用 global 语句的一种方法是使用实​​际的模块名称来引用这些变量。我假设您的代码是在 `SupplyAndDemandModel.py`.

在这个文件的顶部，你可以把

```
import SupplyAndDemandModel 
```

然后使用模块名称引用那些模块范围的变量：

```
SupplyAndDemandModel.S1Vals = [] 
```

这提供了一种明确指示您正在访问/修改模块级变量的方法。

# php - Facebook - 使用 PHP SDK 将 .swf 发布到用户的墙上

> ID：11657501
> 
> 赞同：0
> 
> 时间：2012-07-25T19:50:29.827
> 
> 标签：php, facebook, facebook-graph-api, flash, facebook-php-sdk

我曾经使用该方法来执行此操作，在该`stream.publish`方法中，我为我的 .swf 指定了源文件以及其他参数来呈现媒体，但现在已弃用。如何使用 Graph API 做到这一点？特别是 Facebook PHP SDK。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:29:52.777

使用 php sdk，您可以像这样发布它们：

```
$facebook->api('/me/feed', 'post', array(
    'type'=>'video',
    'source'=>'http://www.hackerdude.com/channels-test/swfscout_VideoSample.swf',
    'picture'=> 'http://fbrell.com/f8.jpg',
    'name'=> 'Facebook Dialogs',
    'caption'=> 'Reference',
    'description'=> 'Using Dialogs to interact with users.',
); 
```

您应该能够将`link`属性添加到组合中，但此时 facebook 的 api 中似乎存在一个[错误](http://developers.facebook.com/bugs/502967809730190)，使得其中的帖子`link`阻止嵌入`swf`. 这样它将被嵌入，但结果帖子中的名称将指向`swf`不好的文件。[与通过FB.ui](http://developers.facebook.com/docs/reference/javascript/FB.ui/)发布的链接相同的值`js sdk`不会表现出此行为。

一种解决方法是使用正确的 opengraph 元标记创建链接，并将其发布为`type => 'link'`.

**html 文件**（youtube 带给你的视频）

```
<html>
<head>
    <title>Fly, you fools!</title>
    <meta property="og:title" content="Fly, you fools!" />
    <meta property="og:type" content="website"/>
    <meta property="og:description" content="Content for Description" />
    <meta property="og:image" content="http://i2.ytimg.com/vi/meOCdyS7ORE/mqdefault.jpg" />
    <meta property="og:site_name" content="Content for caption"/>
    <meta property="og:video" content="http://www.youtube.com/v/meOCdyS7ORE?version=3&autohide=1">
    <meta property="og:video:type" content="application/x-shockwave-flash">
    <meta property="og:video:width" content="640">
    <meta property="og:video:height" content="360">
</head>
<body>
<script>
    window.location = 'http://disney.com'; // redirecting users who's clicking on the link, wont affect crawlers since its in js.
</script>
</body>
</html> 
```

**php sdk 调用分享**

```
$this->facebook->api('/me/feed', 'post', array(
    'type' => 'link',
    'link' => 'http://.../', // put the html file's location here
)); 
```

# php - SQL/PHP实时更改网站

> ID：11657502
> 
> 赞同：1
> 
> 时间：2012-07-25T19:50:33.140
> 
> 标签：php, sql

如何允许用户在页面上输入以更改 HTML 或 CSS 或任何内容。有这方面的技术吗？即如果它是客户端网页设计，我如何才能将表单中的输入移动到某个页面并显示以替换以前的内容。假设有一个包含四个链接的主页：主页、关于、链接、联系。在 admin-edit 页面中，有一个表单可以输入、编辑、删除链接。我需要一个带有链接值的 SQL 数据库来填充这个页面和另一个页面吗？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:55:55.057

您正在寻找的是我相信的 javascript。您可以使用任意数量的 Javascript 或 Jquery（一个 javascript 库），以便在页面加载后在页面上执行各种操作。在 Jquery 中，您将“Listners”附加到 div 和 span 以及您希望以不同方式做出反应的任何 HTML 元素，例如鼠标悬停、点击等。

你可以在这里找到 jquery 的 API：http: [//jquery.com/](http://jquery.com/)

如果您想对某些设置进行永久性更改，那么是的，您需要 PHP 和 SQL 数据库来存储结果。您必须制作面板，以便使用 SQL 插入、更新和选择语句将内容添加到数据库、编辑和检索它们。[您可以在http://www.w3schools.com/](http://www.w3schools.com/)上阅读有关这些东西如何工作的大量信息，祝您 好运 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:00:54.860

您想使用“第二”页面实时更改“第一”页面中的值吗？

您可以使用 javascript 执行此操作，因为“第二”页是由“第一”页使用**window.open('second.html','second_page') 打开的**

然后在“第二”页中，您可以使用类似**opener.getElementById('someDiv').innerHTML = 'some text here'; 之类的东西来操作“第一”页。**

# elasticsearch - 在 elasticSearch 中查询时定义分析器

> ID：11657505
> 
> 赞同：35
> 
> 时间：2012-07-25T19:50:48.320
> 
> 标签：elasticsearch

我对弹性搜索很陌生，只需要澄清一下：我们可以在查询搜索服务器时定义分析器吗？我用“文本”和“字段”查询尝试了它，它工作正常：

询问：

```
curl -XPOST http://localhost:9200/test/user/_search? -d '{ "query" : {
"text" : {"_all" : {"query" :"Vaibhav","analyzer" :
"lowercase_keyword" }} } }' 
```

结果：

```
{"took":144,"timed_out":false,"_shards":{"total":5,"successful":5,"failed":0},"hits":{"total":1,"max_score":0.10848885,"hits":{"_index":"test","_type":"user","_id":"1","_score":0.10848885,
"_source" : {
   "first_name": "Vaibhav",
   "last_name":"saini",
   "password":"pwd" 
```

但是当我尝试对术语/前缀/通配符查询做同样的事情时，我得到了异常：

询问：

```
curl -XPOST http://localhost:9200/test/user/_search? -d '{
"query" : { "term" : {"_all" : {"query" :"Vaibhav","analyzer" :
"lowercase_keyword" }} } }' 
```

结果：

```
{"error":"SearchPhaseExecutionException[Failed to execute phase [query], total failure; shardFailures
{[kws9J6tbQtWCMNKBm3Gpkw][test][4]: SearchParseException[[test][4]:
from[-1],size[-1]: Parse Failure [Failed to parse source
[\n{\n\"query\" : {\n\"term\" : {\"_all\" : {\"query\"
:\"Vaibhav\",\"analyzer\" : \"lowercase_keyword\" }}\n}\n}]]]; nested:
QueryParsingException[[test] [term] query does not support [query]];
}{[kws9J6tbQtWCMNKBm3Gpkw][test][1]: SearchParseException[[test][1]:
from[-1],size[-1]: Parse Failure [Failed to parse source
[\n{\n\"query\" : {\n\"term\" : {\"_all\" : {\"query\"
:\"Vaibhav\",\"analyzer\" : \"lowercase_keyword\" }}\n}\n}]]]; nested:
QueryParsingException[[test] [term] query does not support [query]];
}{[kws9J6tbQtWCMNKBm3Gpkw][test][2]: SearchParseException[[test][2]:
from[-1],size[-1]: Parse Failure [Failed to parse source
[\n{\n\"query\" : {\n\"term\" : {\"_all\" : {\"query\"
:\"Vaibhav\",\"analyzer\" : \"lowercase_keyword\" }}\n}\n}]]]; nested:
QueryParsingException[[test] [term] query does not support [query]];
}]","status":500} 
```

那么是不是我们不能在查询弹性搜索服务器的某些类型的查询时定义分析器，而对于其他类型的查询我们可以？如果没有，我做错了什么吗？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-25T20:05:47.810

、和查询期望查询`term`中指定的值已经被分析。`prefix``wildcard`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-08-22T14:57:15.067

这种语法对我有用：

```
GET /_search
{
  "query": {
    "match_phrase": {
      "controller": {
        "analyzer": "keyword",
        "query": "api/v2/test"
      }
    }
  }
} 
```

[在文档](https://www.elastic.co/guide/en/elasticsearch/reference/1.4/query-dsl-match-query.html#_phrase)中查找更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-18T16:23:01.323

您可以设置自定义[搜索分析器](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-analyzer.html)以用于查询。

从文档：

> 通常，在索引时和搜索时应使用相同的分析器，以确保查询中的术语与倒排索引中的术语格式相同。
> 
> 但是，有时在搜索时使用不同的分析器可能是有意义的，例如在使用 analysis-edgengram-tokenizer 进行自动完成时。
> 
> 默认情况下，查询将使用`analyzer`字段映射中定义的，但这可以用`search_analyzer`设置覆盖

文档还列出了一个示例。[https://www.elastic.co/guide/en/elasticsearch/reference/current/search-analyzer.html](https://www.elastic.co/guide/en/elasticsearch/reference/current/search-analyzer.html)

# objective-c - 未调用 mkmapview 委托方法 -calloutaccessorycontroltapped

> ID：11657506
> 
> 赞同：1
> 
> 时间：2012-07-25T19:50:48.933
> 
> 标签：objective-c, ios, delegates, mkmapview, cs193p

我正在尝试完成 cs193p 作业 5 的最后一部分（[链接](http://www.stanford.edu/class/cs193p/cgi-bin/drupal/system/files/assignments/Assignment%205_3.pdf)）

该应用程序从 Flickr 中选择热门地点，并将这些地点的照片绘制在地图上。

任务 5c 说

> 地图上的每个注释都应该有一个标注，显示以下内容： c. 一个显示按钮，显示所选照片的​​完整图像（就像用户从桌子上选择照片一样）或显示该位置的照片列表（再次，就像用户选择了那个地方从表中）。

我已经完成了前面显示标注的部分，并将缩略图加载到标注中。

我已经将我的 mapViewController 设置为 mapView 的委托，并且我知道它正在工作，因为当我单击图钉时，它会调用 didSelectAnnotationView 方法，该方法也在我的 mapViewController 中，并且运行正常，并且实际上显示标注中的披露附件。

但是，我还定义了方法 calloutAccessoryControlTapped （相同的 VC），并且不会调用此方法。完全没有。目前我刚刚在其中获得了一个 NSLog，但什么也没有出现。

好吧，我什么也不说，只是为了让它更奇怪，有一个注释适用于数百个不起作用的注释。

从一开始就有一个注释会触发按钮，但没有其他任何作用。是因为它是第一个注释吗？按钮只是为此而触发吗？

我想发布代码，但不确定它的相关性：

```
 @interface flickrthingMapViewController ()<MKMapViewDelegate>
    @property (weak, nonatomic) IBOutlet MKMapView *mapview;

    @end

    @implementation flickrthingMapViewController
    @synthesize delegate = _delegate;

    @synthesize mapview = _mapview;
    @synthesize annotations = _annotations;

    - (void)viewDidLoad
    {
        [super viewDidLoad];
        self.mapview.delegate = self; //remembered to set the delegate

    }
-(void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)aView
{
    if (![aView.annotation isKindOfClass:[flickrthingPlaceAnnotation class]])
    {
        UIImage *image = [self.delegate flickrthingMapViewContoller:self imageForAnnotation:aView.annotation];

        [(UIImageView *)aView.leftCalloutAccessoryView setImage:image];
    }
    UIButton *buttonToViewDetails = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    aView.rightCalloutAccessoryView=buttonToViewDetails;

}

-(void)mapView:(MKMapView *)mapView annotationView:(MKAnnotationView *)aView calloutAccessoryControlTapped:(UIControl *)control
{

    NSLog(@"hello");
} 
```

我问过的所有其他问题都证明我做了一些愚蠢的事情，我希望这里就是这种情况。但是我已经坐在那里看它很久了，看不到它！

感谢您的见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T08:53:44.763

事实证明，在 didSelectAnnotationView 中添加按钮为时已晚！

我以为我试图通过不创建按钮来提高效率，除非有人实际选择了注释，但事实证明（出于某种原因？）如果按钮是在 didSelectAnnotationView 中创建的，它不会触发委托方法。

我已经将它移到 viewForAnnotation 方法中并且它有效！

# php - PHP 或 Linux Shell：将超过 10 行的文本文件减少到只有最后 10 行的最快方法

> ID：11657509
> 
> 赞同：1
> 
> 时间：2012-07-25T19:50:58.507
> 
> 标签：php, linux

我需要知道在 PHP 或 Linux Command Shell 中最快的方法，以将超过 10 行的文本文件减少到只有最后 10 行。我想在这个例子中使用 10 行。

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T19:55:14.310

将文件减少到最后一个然后行

```
tail -n 10 /path/to/file > /path/to/file.tmp && rm /path/to/file && mv /path/to/file.tmp /path/to/file 
```

解释：

`tail`输出`n`文件的最后几行。 `>`将其写入文件。 `&&`用于链接命令。 `rm`删除一个文件。 `mv`重命名文件（或移动到不同的位置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T21:38:27.290

如果您真的不想生成新文件，那么您可以尝试

```
echo "$(tail -n 10 path/to/file)" >path/to/file 
```

`$()`就像反引号一样工作（它评估内部的任何内容并等同于所述命令的输出），但它在字符串中效果更好。`tail`在我的 Linux 机器上，字符串在输出到文件之前被评估（意思是运行）（这是导致问题的原因`tail file >file`；文件被打开 - 并被截断 - 只要命令启动）。 ~~我在想这是因为它`echo`是内置的，但不要引用我的话。~~

**编辑：** 实际上，我仔细看了看。这是因为`tail`在字符串中。有几个阶段——在这里，我们关心的是插值、重定向和执行——总是以特定的定义顺序发生（即，刚刚给出的顺序）。在插入字符串的过程中，Bash 必须在其中运行命令。在完成任何重定向之前。使用直行`tail file >file`，`tail`程序是实际生成输出的东西，因此在执行命令之前不会发生输出 - 但在此之前已经打开文件进行写入（由于重定向），并且打开该文件进行写入会截断它。 )

```
phase          tail file >file                   echo "$(tail file)" >file
-------------+---------------------------------+-------------------------------
interpolate   nothing                           run "tail file"; get output (+)
redirect      open file for write; set stdout   open file for write; set stdout
execute       run "tail file" (*)               run 'echo "line\nline\n..."' 
```

`(*)`：请注意，由于`file`此时已打开以供写入，因此现在已被截断。所以`tail`读取 0 个字节。
`(+)`：由于在重定向打开它进行写入*之前*`file`被读入，因此可以看到所有数据。*`tail`*

 *尽管行为显然是定义和可预测的，但这对我来说仍然有点骇人听闻。它依赖于 bash arcana，如果您尝试获取太多或太长的行，很可能会导致内存问题。（我测试了大约 500 个字符行，没有发现任何问题。但还没有测试超过 10 行。）除非您需要保留相同的 inode 编号，否则使用临时文件可能会更好出于某种奇怪的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:55:36.287

```
tail -n 10 yourfile > yourfile.tmp && mv yourfile.tmp yourfile 
```

编辑为仅给出文件的最后 10 行，可能超过 10 行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T19:55:38.053

在linux中你可以做

```
tail -n 10 path/to/file > path/to/output/file 
```

这将获取文件的最后十行（由 -n 之后的值指定的行数），然后将它们附加到另一个文件。

如果您只想用最后十行覆盖现有文件，请执行

```
tail -n 10 path/to/file > path/to/output/file && mv path/to/output/file path/to/file 
```

注意第一个示例输出到不同的文件，而第二个示例覆盖现有文件。

您也可以在 PHP 中通过使用 exec() 和内部的 shell 命令来执行此操作，或者更费力的方法是使用 file() 将整个文件读入一个数组，然后取出数组的最后十个元素并将它们添加回带有 fwrite() 或类似文件的文件。*

# ruby-on-rails - 使用 Authlogic 实现不区分大小写的密码

> ID：11657511
> 
> 赞同：0
> 
> 时间：2012-07-25T19:51:10.387
> 
> 标签：ruby-on-rails, authentication, authlogic, case-insensitive

我在我的应用程序中使用 Authlogic，我想通过在我检查他们的密码时忽略大写来让我的用户更方便（类似于[facebook 所做的](http://www.labnol.org/internet/facebook-account-passwords/21241/)）

实现这一点的最佳方法是什么？

另外，如何将现有用户转换为不区分大小写的密码？即，我假设我必须重新保存现在`crypt(password)`的内容`crypt(password.downcase)`？

# html - chrome中的多个文件上传冻结

> ID：11657516
> 
> 赞同：2
> 
> 时间：2012-07-25T19:51:19.000
> 
> 标签：html, google-chrome, uploading

我正在使用我在我的网站上实现的uploadifive（html5）jquery插件。在我添加文件后立即开始上传 - 在firefox中，但是当我在开始上传过程之前添加文件时，chrome会冻结2-4秒。我上传的文件大小约为 4-10 mb/文件。我可以做些什么来防止这种情况发生吗？任何帮助或建议将不胜感激。

代码：

```
$('#music_upload').uploadifive({
                                    'auto' :true,
                                    'queueID':'uploadqueue',
                                    'simUploadLimit': 1,
                                    'multi': true,
                                    'queueSizeLimit' : 50,
                                    'dnd': true,
                                    'width': 80,
                                    'height' : 23,
                                    'fileSizeLimit' : 20000,
                                    'buttonText' : 'Upload files',
                                    'formData'      : {'user' : $.cookie("username"),'key' : currentsession},
                                    'uploadScript' : '<?php echo site_url('home/upload_music_handler'); ?>',
                                    'removeCompleted' : false,
                                    'onCancel'     : function(file) {
                                       // remove song from database
                                       var username = $.cookie('username');
                                       //check if song extension
                                       if(checkFileExtension(file.name) == 'audio'){
                                            //remove file and remove from db
                                           $.post('<?php echo site_url('home/removesong'); ?>',
                                                    {ajax : 1, username : username, song_title : file.name},
                                                    function(data) {

                                                    },"json");

                                        }
                                        if(checkFileExtension(file.name) == 'image'){
                                            //else remove from album cover art
                                            $.post('<?php echo site_url('home/removealbumcover'); ?>',
                                                    {ajax : 1, username : username, song_title : file.name},
                                                    function(data) {

                                                    },"json");
                                            //remove from display

                                        }

                                       //remove file

                                       //remove li from song settings or album cover.
                                    },
                                    'onQueueComplete' : function(uploads) {

                                        $(".album-settings-section").show();

                                       //add sortable for queue-items
                                       $( "#uploadqueue").sortable({
                                            revert: true

                                        });
                                        $( ".uploadifive-queue-item" ).draggable({
                                            connectToSortable: "#uploadqueue",
                                            containment: "#uploadqueue",
                                            handle: ".song_drag",
                                            revert: "invalid"
                                        });

                                    },
                                    'onUploadComplete' : function(file, data) {

                                        $(file.queueItem).find('.songname').text(data);
                                        $( ".songname" ).disableSelection();
                                        $('.songname').bind('dblclick',
                                        function(e){
                                            e.preventDefault();
                                            $(this).attr('contentEditable',true);
                                        });
                                        //get and set the songname
                                        $(".public_or_private_album li a,.download_or_stream_album li a,.download_or_stream li a").click(function(e){
                                            e.preventDefault();
                                            $(this).parent().parent().find('.active').removeClass('active')
                                            $(this).parent().addClass('active');
                                        })
                                    }

                                }); //end of upload 
```

上传音乐处理程序请求仅在我选择文件后 2-4 秒发送。

![在此处输入图像描述](../Images/67170045dd136e03d43d94c6a82ab684.png)

# android - TriggerIO 1.4 打破了 Android盒子功能？我正在使用适用于 Android 3.2 的 TriggerIO 编写应用程序，并在 Motorola Xyboard (Xoom 2) 平板电脑上进行测试。迁移到 1.4 后，我的 HTML 选择框在尝试更改值时生成错误，并且应用程序被强制关闭。为了测试，我创建了一个带有两个测试选项的普通静态 HTML 选择框，当我点击更改值时它仍然会产生错误。使用 1.3 重建时，此错误消失。编辑：我想我应该添加 - 迁移有点棘手，使用 Tr

> ID：11657526
> 
> 赞同：2
> 
> 时间：2012-07-25T19:51:38.940
> 
> 标签：android, trigger.io

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T18:56:55.810

最新的 1.4 平台 (1.4.3) 修复了这个问题。

# python - 向 Twitter API 发送请求时出现 500 服务器错误

> ID：11657527
> 
> 赞同：0
> 
> 时间：2012-07-25T19:51:38.730
> 
> 标签：python, api, twitter

我正在向 Twitter API 发送以下请求，它收到以下错误：

```
http://search.twitter.com/search.json?q=feel%2BOR%2Bi%27m%2BOR%2Bi+am%2BOR%2Bim%2BOR%2Bmakes+me%2BOR%2Bmade+me%2BOR%2Bmaking+me%2BOR%2Bmaking+me+feel%2BOR%2Bmy+mood%2BOR%2Bi%27m+so%2BOR%2Bim+so&rpp=99&page=14

Traceback (most recent call last):
  File "C:\Users\andrew\Downloads\twitterthingv5test.py", line 95, in <module>
    moodParser()
  File "C:\Users\andrew\Downloads\twitterthingv5test.py", line 93, in moodParser
    query()
  File "C:\Users\andrew\Downloads\twitterthingv5test.py", line 37, in query
    main(columns)
  File "C:\Users\andrew\Downloads\twitterthingv5test.py", line 52, in main
    response = urllib2.urlopen(twiturl)
  File "C:\Python27\lib\urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "C:\Python27\lib\urllib2.py", line 400, in open
    response = meth(req, response)
  File "C:\Python27\lib\urllib2.py", line 513, in http_response
    'http', request, response, code, msg, hdrs)
  File "C:\Python27\lib\urllib2.py", line 438, in error
    return self._call_chain(*args)
  File "C:\Python27\lib\urllib2.py", line 372, in _call_chain
    result = func(*args)
  File "C:\Python27\lib\urllib2.py", line 521, in http_error_default
    raise HTTPError(req.get_full_url(), code, msg, hdrs, fp)
HTTPError: HTTP Error 500: Internal Server Error 
```

我用来生成 URL 的代码是这样的：

```
twiturl = "http://search.twitter.com/search.json?q=" + urlinfo + "&rpp=99&page=14" 
```

这是怎么回事？这会是一次发送太多请求的实例吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:09:23.503

在第一次尝试时它对我做同样的事情，所以它可能不是速率限制。反复缩短查询：

*   [http://search.twitter.com/search.json?q=feel%2BOR%2Bi%27m%2BOR%2Bi+am%2BOR%2Bim%2BOR%2Bmakes+me%2BOR%2Bmade+me%2BOR%2Bmaking+ me%2BOR%2Bmaking+me+feel%2BOR%2Bmy+mood%2BOR%2Bi%27m+so%2BOR%2Bim+so&rpp=99&page=14](http://search.twitter.com/search.json?q=feel%2BOR%2Bi%27m%2BOR%2Bi+am%2BOR%2Bim%2BOR%2Bmakes+me%2BOR%2Bmade+me%2BOR%2Bmaking+me%2BOR%2Bmaking+me+feel%2BOR%2Bmy+mood%2BOR%2Bi%27m+so%2BOR%2Bim+so&rpp=99&page=14)失败
*   [http://search.twitter.com/search.json?q=feel%2BOR%2Bi%27m%2BOR%2Bi+am%2BOR%2Bim%2BOR%2Bmakes+me%2BOR%2Bmade+me%2BOR%2Bmaking+ me%2BOR%2Bmaking+me+feel%2BOR%2Bmy+mood%2BOR%2Bi%27m+so&rpp=99&page=14](http://search.twitter.com/search.json?q=feel%2BOR%2Bi%27m%2BOR%2Bi+am%2BOR%2Bim%2BOR%2Bmakes+me%2BOR%2Bmade+me%2BOR%2Bmaking+me%2BOR%2Bmaking+me+feel%2BOR%2Bmy+mood%2BOR%2Bi%27m+so&rpp=99&page=14)失败
*   [http://search.twitter.com/search.json?q=feel%2BOR%2Bi%27m%2BOR%2Bi+am%2BOR%2Bim%2BOR%2Bmakes+me%2BOR%2Bmade+me%2BOR%2Bmaking+ me%2BOR%2Bmaking+me+feel%2BOR%2Bmy+mood&rpp=99&page=14](http://search.twitter.com/search.json?q=feel%2BOR%2Bi%27m%2BOR%2Bi+am%2BOR%2Bim%2BOR%2Bmakes+me%2BOR%2Bmade+me%2BOR%2Bmaking+me%2BOR%2Bmaking+me+feel%2BOR%2Bmy+mood&rpp=99&page=14)失败
*   [http://search.twitter.com/search.json?q=feel%2BOR%2Bi%27m%2BOR%2Bi+am%2BOR%2Bim%2BOR%2Bmakes+me%2BOR%2Bmade+me%2BOR%2Bmaking+ me%2BOR%2Bmaking+me+feel&rpp=99&page=14](http://search.twitter.com/search.json?q=feel%2BOR%2Bi%27m%2BOR%2Bi+am%2BOR%2Bim%2BOR%2Bmakes+me%2BOR%2Bmade+me%2BOR%2Bmaking+me%2BOR%2Bmaking+me+feel&rpp=99&page=14)成功

这让我觉得这是对查询长度的限制。添加字母直到它再次失败，这是单词的一部分`mood`：

*   [http://search.twitter.com/search.json?q=feel%2BOR%2Bi%27m%2BOR%2Bi+am%2BOR%2Bim%2BOR%2Bmakes+me%2BOR%2Bmade+me%2BOR%2Bmaking+ me%2BOR%2Bmaking+me+feel%2BOR%2Bmy+m&rpp=99&page=14](http://search.twitter.com/search.json?q=feel%2BOR%2Bi%27m%2BOR%2Bi+am%2BOR%2Bim%2BOR%2Bmakes+me%2BOR%2Bmade+me%2BOR%2Bmaking+me%2BOR%2Bmaking+me+feel%2BOR%2Bmy+m&rpp=99&page=14)有时会成功

然而，一个 260 个字符的查询字符串成功了：

*   [http://search.twitter.com/search.json?q=abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz&rpp=99&page=14](http://search.twitter.com/search.json?q=abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyz&rpp=99&page=14) succeeds

[文档说](https://dev.twitter.com/docs/api/1/get/search)关于参数`q`：

> 一个 UTF-8、URL 编码的搜索查询，最多 1,000 个字符，包括运算符。查询可能还受到复杂性的限制。

奇怪的是，将一个单词剪掉一半算作额外的复杂性，但是你去吧。

# c# - 绑定文本框显示数据库值，但“文本”属性为空字符串

> ID：11657528
> 
> 赞同：1
> 
> 时间：2012-07-25T19:51:40.340
> 
> 标签：c#, winforms, data-binding, textbox

对于我认为非常基本的问题，我似乎找不到任何答案。我有一个文本框，它绑定到在表单加载时填充的数据集。当我运行程序时，数据库中的值显示在文本框中。

但是，text 属性是一个空字符串。如果我单击该字段然后离开它，则设置文本值。通过表适配器读取甚至写入数据库工作正常。我似乎无法在 text 属性中获取值。

这是相关的代码...

当我通过用户界面绑定字段时，Visual Studio 添加的代码：

```
this.appSettingsBindingSource.DataMember = "AppSettings";
this.appSettingsBindingSource.DataSource = this.dSAppSettings;
this.tbUsername.DataBindings.Add(new System.Windows.Forms.Binding("Text", this.appSettingsBindingSource, "Username", true)); 
```

这是表单加载方法中的一行：

```
this.appSettingsTableAdapter.Fill(this.dSAppSettings.AppSettings, CompanyID); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:30:13.457

尝试添加`DataSourceUpdateMode.OnPropertyChanged`到绑定语句的末尾。我相信默认是`OnValidation`.

```
this.tbUsername.DataBindings.Add(new System.Windows.Forms.Binding("Text", this.appSettingsBindingSource, "Username", true, DataSourceUpdateMode.OnPropertyChanged)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:36:38.633

好吧，我已经解决了这个问题，但我确信我错过了导致这个问题的一些基本步骤。

我的绑定控件位于两个不同的选项卡上。因此，我激活了每个选项卡，然后将焦点设置到选项卡上的每个控件：

```
// Workaround: Focus() forces the dataset value into the bound property of a control

tabCtlSettings.SelectedTab = tabAccountSettings;  // Activate second tab
foreach (Control ctl in tabAccountSettings.Controls)
  ctl.Focus();

tabCtlSettings.SelectedTab = tabOptions;  // Activate first tab
foreach (Control ctl in tabOptions.Controls)
    ctl.Focus(); 
```

我知道这是一个糟糕的修复工具，但必须完成项目才能完成！

# c++ - 如何从 llvm::Module 生成可执行文件？

> ID：11657529
> 
> 赞同：19
> 
> 时间：2012-07-25T19:51:40.697
> 
> 标签：c++, llvm, clang

我想编写一个 C++ 函数，它接受一个`llvm::Module`已经链接的 ，并将其输出到一个可执行文件。它应该使用 llvm/clang API，而不是分叉一个进程并调用命令行 clang。

查看 llvm/clang 源代码后，我发现最接近的是将 a 输出`Module`到 .o 文件。例如，llc 工具 (tools/llc/llc.cpp) 通过调用`TargetMachine::addPassesToEmitFile(...)`.

另一种方法是将`Module`.bc 文件写入，然后创建一个`CompilerInstance`并调用`ExecuteCompilerInvocation`（如在 tools/clang/tools/driver/cc1_main.cpp 中）。但是还有文件 I/O 的开销。

那么，我是在要求一些可能的东西，还是我必须求助于替代方案？

**编辑：（**当然这是可能的。它发生在clang源代码的*某个地方*，我只是找不到它。）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-27T17:11:20.510

不可能！`clang`不会创建可执行文件本身。它调用`ld`.

在 tools/clang/lib/Driver/Tools.cpp 中找到它。在`ConstructJob`各种平台（ 、 等）的函数中`darwin::Link::ConstructJob`，`solaris::Link::ConstructJob`它执行以下操作：

```
const char *Exec =
    Args.MakeArgString(getToolChain().GetProgramPath("ld"));
  C.addCommand(new Command(JA, *this, Exec, CmdArgs)); 
```

（对于`visualstudio::Link::ConstructJob`，它改为调用`link.exe`。）

**编辑：**回想起来，通过使用(Mac) 或(Linux)跟踪`clang`系统调用来发现这一点会更快。`dtruss``strace`

**编辑：**我最终使用 Clang 驱动程序 API 进行构建和链接。我写了一些[示例代码](http://fdiv.net/2012/08/15/compiling-code-clang-api)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T15:44:06.053

~~`llvm-ld``-native`通过标志时做你需要的事情。~~

`llvm-ld`已在 LLVM 3.1 中删除，但`clang`驱动程序[应该能够替换其功能](http://llvm.org/releases/3.1/docs/ReleaseNotes.html#tools_changes)。你可以从那里开始。

# xui - 徐js输入值

> ID：11657531
> 
> 赞同：0
> 
> 时间：2012-07-25T19:51:54.107
> 
> 标签：xui

我正在使用 xui.js (v 2.3.2) 并尝试返回输入文本字段的值。

```
x$('#field-email').value -> return undefined
x$('#field-email').attr('value') -> return ['name@domain.com'] including bracket and quote. 
```

我不明白为什么第一个样本返回未定义。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T12:44:54.440

保罗是对的。如果你通过 x$('#field-email')[0] 得到一个元素，你可以使用简单的 JS 函数，比如 x$('#field-email')[0].tagName。这将返回标签名称..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:31:12.180

`x$('#field-email')`不返回 DOMElement，它返回带有由 css 选择器选择的元素的 xui 对象。您可以通过这种方式访问​​输入值：`x$('#field-email')[0].value`.

# python - Django：调用元类库时出错

> ID：11657532
> 
> 赞同：9
> 
> 时间：2012-07-25T19:51:54.823
> 
> 标签：python, django, metaclass

这是错误

> TypeError：调用元类基类时出错元类冲突：派生类的元类必须是其所有基类的元类的（非严格）子类

我的models.py中有问题的类

```
class Business(models.Model, forms.Form):
    name = models.CharField(max_length=128)
    tel_no = models.CharField(max_length=11)
    address_ln1 = models.CharField(max_length=128)
    address_ln2 = models.CharField(max_length=128)
    city = models.CharField(max_length=64)
    county = GBCountySelect()
    postcode = GBPostcodeField()
    website = models.URLField(max_length=128)
# Logging Info
    slug = models.SlugField()
    date_added = models.DateField(auto_now_add=True)
    time_added = models.TimeField()
    added_by_user = models.CharField(max_length=64)
    last_edit_time = models.TimeField(auto_now=True)
    last_edit_date = models.DateField(auto_now=True) 
```

我收到错误的那一行：

```
name = models.CharField(max_length=128) 
```

但我（认为）这意味着这个：

```
class Business(models.Model, forms.Form): 
```

我不确定这到底是什么意思，如何从同一个类中的 models.Model 和 forms.Form 继承我的模型？创建课程时我不能传递两个值吗？如果有怎么办？

另一个编辑

```
All my imports
from django.db import models
from django import forms
from django.contrib.localflavor import generic
from django.contrib.localflavor.gb.forms import GBPostcodeField, GBCountySelect 
```

完整追溯：

```
Traceback (most recent call last):
  File "manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/home/jws1000/.virtualenvs/glutenfree/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/home/jws1000/.virtualenvs/glutenfree/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/home/jws1000/.virtualenvs/glutenfree/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/home/jws1000/.virtualenvs/glutenfree/lib/python2.7/site-packages/django/core/management/base.py", line 231, in execute
    self.validate()
  File "/home/jws1000/.virtualenvs/glutenfree/lib/python2.7/site-packages/django/core/management/base.py", line 266, in validate
    num_errors = get_validation_errors(s, app)
  File "/home/jws1000/.virtualenvs/glutenfree/lib/python2.7/site-packages/django/core/management/validation.py", line 30, in get_validation_errors
    for (app_name, error) in get_app_errors().items():
  File "/home/jws1000/.virtualenvs/glutenfree/lib/python2.7/site-packages/django/db/models/loading.py", line 158, in get_app_errors
    self._populate()
  File "/home/jws1000/.virtualenvs/glutenfree/lib/python2.7/site-packages/django/db/models/loading.py", line 64, in _populate
    self.load_app(app_name, True)
  File "/home/jws1000/.virtualenvs/glutenfree/lib/python2.7/site-packages/django/db/models/loading.py", line 88, in load_app
    models = import_module('.models', app_name)
  File "/home/jws1000/.virtualenvs/glutenfree/lib/python2.7/site-packages/django/utils/importlib.py", line 35, in import_module
    __import__(name)
  File "/home/jws1000/envs/glutenfree/glutenfree/glutenfree/listings/models.py", line 9, in <module>
    class Business(models.Model, forms.Form):
  File "/home/jws1000/.virtualenvs/glutenfree/lib/python2.7/site-packages/django/db/models/base.py", line 41, in __new__
    new_class = super_new(cls, name, bases, {'__module__': module})
TypeError: Error when calling the metaclass bases
    metaclass conflict: the metaclass of a derived class must be a (non-strict) subclass of the metaclasses of all its bases 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T20:07:11.330

这就是问题：

```
class Business(models.Model, forms.Form): 
```

您正在尝试从模型和表单继承。你不能，也不应该。

您不能，因为派生类的元类必须是其所有基类的元类的（非严格）子类。表单有一个元类：

```
__metaclass__ = DeclarativeFieldsMetaclass 
```

模型也有一个元类：

```
__metaclass__ = ModelBase 
```

如果要这样做，则需要设置一个派生自这两者的元类。

但是，您不应该这样做，因为 django 有 ModelForms，它的存在是为了创建模型模型的表单，从而为您省去了这里复杂性的麻烦。停止从 Form 继承。

# javascript - 访问 jquery 注释器注释

> ID：11657534
> 
> 赞同：0
> 
> 时间：2012-07-25T19:52:04.260
> 
> 标签：javascript, jquery, annotations

我正在使用[jquery 注释](https://github.com/okfn/annotator)器在网站上进行注释和记笔记。如果用户添加了注释，我需要添加其他样式。

我正在尝试创建一个小插件，如果该突出显示存在注释，它将向突出显示添加一个类，但我似乎无法从我的插件中访问该注释。

任何帮助将不胜感激！

编辑：

到目前为止，这是我的插件，只是能够查看注释器对象的开始。我在注释器对象的日志中找不到任何可以为我提供有关附加到突出显示的注释的信息的信息。

```
Annotator.Plugin.Milestone = function(element) {
   var milestoneAnnotator = {
        pluginInit: function() {
            console.log(this.annotator);
        }
    };

    return milestoneAnnotator;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T11:15:44.443

[根据Annotator 自述](https://github.com/okfn/annotator)文件，订阅该`annotationsLoaded`事件将使您能够访问所有存储的注释，当它们被加载到 DOM 中时。

现在，至于将类添加到突出显示中，我假设您的意思是 CSS 类？这是一个在将所有注解加载到 DOM 时将 CSS 类添加到它们的[示例。](http://jsfiddle.net/gh/gist/jquery/1.7.2/3181343/)

要仅将类添加到带有注释的注释，您只需检查`text`注释上的属性。

# php - Linux 下我的 PHP 脚本中的 iMacros

> ID：11657540
> 
> 赞同：0
> 
> 时间：2012-07-25T19:52:24.293
> 
> 标签：php, linux, console, imacros

我制作了一个宏并让它正常工作。到目前为止，我可以使用命令行从我的 PHP 脚本中播放宏：

```
exec('firefox  http://run.imacros.net/?m=my_macro.iim'); 
```

现在我想通过使用脚本界面来改进我的程序。我已经阅读了我需要 COM 类的文档，该类在 Linux 版本的 PHP 上不可用。那么您知道如何使用 PHP 来运行我的脚本吗？实际上，我不希望每次启动脚本时都显示 Firefox，所以我真正想要的是一种“隐藏”它的方法。

谢谢。

# javascript - 在不使用 HTML 的情况下对字符串中的换行符进行编码

> ID：11657546
> 
> 赞同：3
> 
> 时间：2012-07-25T19:52:57.380
> 
> 标签：javascript, string, dojo, line-breaks, gfx

有没有办法在不使用任何 HTML 实体或标签的情况下将换行符编码为字符串？具体来说，我想要一个传递给 dojox.gfx 渲染器的字符串来显示换行符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:59:08.700

您可以使用`\n`or对其进行转义`\u000A`，请参见：

[如何在 JavaScript 中的多行代码中拆分字符串？](https://stackoverflow.com/questions/508269/)

# objective-c - Lumberjack 源文件中的不同日志级别

> ID：11657551
> 
> 赞同：0
> 
> 时间：2012-07-25T19:53:17.537
> 
> 标签：objective-c, xcode, cocoa, nslog, cocoalumberjack

我开始使用[Lumberjack](https://github.com/robbiehanson/CocoaLumberjack/)日志框架。`ddLogLevel`它需要在我调用其中一个日志宏的任何地方定义一个整数变量。我可以写

```
static const int ddLogLevel = LOG_LEVEL_INFO 
```

在每个文件的顶部来实现这一点。但是我不想写任何东西，除了日志宏，就像我写`NSLog`. [我可以通过在项目的前缀标头](http://en.wikipedia.org/wiki/Prefix_header)中定义上述变量来做到这一点。这种方法的问题是，如果我想在我的一些文件中使用不同的日志级别，那么我不能重新声明那个静态变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-05T14:10:17.173

使用 DynamicLogLevels 允许您完成在不同文件中分配不同日志级别的任务。看看：[https](https://github.com/robbiehanson/CocoaLumberjack/wiki/DynamicLogLevels) ://github.com/robbiehanson/CocoaLumberjack/wiki/DynamicLogLevels 。

# soundcloud - 附加子错误

> ID：11657553
> 
> 赞同：0
> 
> 时间：2012-07-25T19:53:33.210
> 
> 标签：soundcloud

不太确定我是否理解为什么最简单的 HTML 会给我这个错误： Line: 1 Error: Unable to get value of the property 'appendChild': object is null or undefined

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<TITLE>Sound Cloud demo</TITLE>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<script src="http://connect.soundcloud.com/sdk.js"></script>
<script>
SC.initialize({
  client_id: 'DMAlex'
});

SC.stream("/test", function(sound){
  sound.play();
});

function SoundCloudCheck(){
alert('Ponit 1');

SC.stream("/test", function(sound){
  sound.play();
});

alert('Ponit 2');

var track_url = 'http://soundcloud.com/forss/flickermood';
SC.oEmbed(track_url, { auto_play: true }, function(oEmbed) {
  console.log('oEmbed response: ' + oEmbed);
});

}
</script>
</head>
<BODY>
Calling local application demo
<INPUT TYPE=BUTTON VALUE="Click me" NAME="Clk"  onclick="SoundCloudCheck();" >
</BODY>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:13:46.910

添加

SC.connect(函数() {

```
 SC.get('/me', function(me) { 

  }); 
```

似乎摆脱了错误。

# box2d - 使 box2d 对象的速度永不改变

> ID：11657560
> 
> 赞同：2
> 
> 时间：2012-07-25T19:53:57.163
> 
> 标签：box2d

我在屏幕上有几个圆圈，放置在不同的位置（所有动态 box2d 主体）。

我想添加另一个圆圈，初始速度为 say `x, y`。我希望这个身体可以自由移动，就好像没有重力一样。使所有的碰撞 100% 有弹性。

我尝试将弹性设置为 1，但如果我从顶部放下它，它就不会再次触及天花板。我希望它继续朝着设定的方向移动，**除非碰撞改变了它的方向**。

为了进一步解释这一点，我想要的一个简单实现是，在一个方形容器中，带有一个圆形主体。

```
when collides ->
  set body.velocityX to -body.velocityX
  set body.velocityY to -body.velocityY 
```

当然，如果我中间有尸体，这不起作用。

使用 box2d 框架或伪代码的任何语言的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:01:39.827

除了设置弹性之外，您还需要将 body 的阻尼设置为 0，以消除您现在看到的速度降低效果。

[从 Box2d 手册](http://www.box2d.org/manual.html#_Toc258082973)：

> 阻尼用于降低物体的世界速度。阻尼不同于摩擦，因为摩擦只发生在接触中。阻尼不是摩擦的替代品，这两种效果应该一起使用。
> 
> 阻尼参数应介于 0 和无穷大之间，0 表示无阻尼，无穷大表示完全阻尼。
> 
> ...
> 
> ```
> bodyDef.linearDamping = 0.0f;
> 
> bodyDef.angularDamping = 0.01f; 
> ```
> 
> 阻尼是为了稳定性和性能而近似的。在较小的阻尼值下，阻尼效果主要与时间步长无关。在较大的阻尼值下，阻尼效果将随时间步长而变化。如果您使用固定时间步长（推荐），这不是问题。

此外，如手册中所述，阻尼与摩擦力不同......因此您可能也希望将身体的摩擦力设置为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T09:46:17.577

设置 b2BodyDef::type = b2_kinematicBody。

Box2D 手册说：

> 运动体根据其速度在模拟下移动。运动学物体不响应力。它们可以由用户手动移动，但通常运动体通过设置其速度来移动。运动物体的行为就好像它具有无限质量，但是，Box2D 将质量和反质量存储为零。运动实体不会与其他静态或运动实体发生碰撞。

# facebook - Facebook 帖子分享通知

> ID：11657562
> 
> 赞同：0
> 
> 时间：2012-07-25T19:54:00.343
> 
> 标签：facebook, facebook-graph-api

我一直在寻找一种方式来确定当有人分享我在公司 Facebook 页面上发布的帖子时接收通知的方式。理想情况下，我希望看到此人的姓名或电子邮件地址，以便我可以让他们参加比赛。

有谁知道这是否可能？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:02:22.443

我害怕没有办法做到这一点，如果他们在 facebook.com 下分享。如果他们在您的域上执行此操作，您可以使用 Javascript sdk 的[事件](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)来捕捉用户点击赞的时间，但是您仍然不会收到包含此内容的电子邮件。

### 但

即使您可以获得这些信息，facebook 也不允许您使用他们的频道作为您的促销的入口机制，查看[促销指南并查看](http://www.facebook.com/page_guidelines.php#promotionsguidelines)[指南](http://www.facebook.com/photo.php?v=10100938382101566)和[平台政策](http://www.facebook.com/photo.php?v=10100938363379086)的介绍视频。

# cuda - 如何计算 GPU 的最大值。编号。以编程方式的线程数

> ID：11657564
> 
> 赞同：1
> 
> 时间：2012-07-25T19:54:05.103
> 
> 标签：cuda

您能否展示如何使用 CUDA 计算可以驻留在特定 GPU 中的最大线程数？即我可以分配给内核的最大线程数。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:03:37.200

您可以使用[`cudaGetDeviceProperties()`](http://www.clear.rice.edu/comp422/resources/cuda/html/group__CUDART__DEVICE_g5aa4f47938af8276f08074d09b7d520c.html). 然后将其乘以您卡中的 SM 数量。

虽然这并不一定意味着您应该执行这个数量的线程。请参阅此 SO answer 以[获得很好的解释](https://stackoverflow.com/a/11565637/811001)。

# mysql - 用于将消息与一组特定用户或所有用户相关联的表结构

> ID：11657565
> 
> 赞同：1
> 
> 时间：2012-07-25T19:54:06.147
> 
> 标签：mysql, sql, database, database-design

# 关于我的想法的几句话

从事一些基于网络的教育项目。为这个项目创建问答系统。有一些我无法弄清楚的逻辑困难：

用户之间有老师和学生。每个学生在注册时都会选择一些课程。

我有 5 张桌子：`users`, `courses`, `lessons`, `questions`, `answers`.

可能有两种类型的问题：

1.  `User`基于。例如，当老师想向特定用户发送问题时，反之亦然（用户也可以向老师发布问题）。

2.  `Course-lesson`基于组合。例如，老师想根据课程向所有课程听众发布问题，他们目前正在上课。

# 我做了什么

我创建了`questions from-to`（qft）表

```
CREATE TABLE `questions from-to` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `qid` int(11) unsigned NOT NULL,
  `from_uid` int(11) unsigned NOT NULL,
  `to_uid` int(11) unsigned NOT NULL,
  PRIMARY KEY (`id`),
  KEY `qft.from_uid_users.id` (`from_uid`),
  KEY `qft.to_uid_users.id` (`to_uid`),
  KEY `qft.qid_qe.id` (`qid`),
  CONSTRAINT `qft.from_uid_users.id` FOREIGN KEY (`from_uid`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `qft.qid_qe.id` FOREIGN KEY (`qid`) REFERENCES `questions_and_exercises` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `qft.to_uid_users.id` FOREIGN KEY (`to_uid`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

看起来像这样

![](../Images/87f8567b1cc86ecf30e644a263b451e7.png)

*   `qid`- 是问题 ID，将此表与 连接`questions`，基于`id`
*   `from_uid`- 从用户 ID（问题发件人 ID），将此表与 连接`users`，基于`id`
*   `to_uid`- 到用户 id（问题接收者 id），将此表与 连接`users`，基于`id`

所以我尝试为两者创建一些通用解决方案：

*   学生和老师，以便他们可以互相发布问题。**行**

*   老师可以向一些用户发布具体问题。**行**

但有个问题

# 问题是

如果老师想为所有课程听众发布问题怎么办？我已经有`user-course`关系表，但是，目前我需要将一对一的用户 ID 添加到`questions from-to`表中，以便他们可以接收问题。我不知道，如何为这两种情况设计此表：基于`course-lesson`组合的“大规模提问”和“用户-用户”类型的问题发布（教师向特定学生发送问题，反之亦然）

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:58:13.680

一种可能性是有一个特殊代码`to_uid`，您的应用程序知道将其解释为“向所有用户显示”。当它遇到`to_uid`-1（或您选择的任何内容）时，它会为所有正在听该课程的学生进行选择，并显示问题，就好像他们的 ID 都已单独列在`to_uid`. 根据您的应用程序的组织方式，您应该只需要在少数地方实现此特殊检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T14:39:40.417

有点类似于这里描述的问题。看看建议的解决方案。

[消息系统](https://stackoverflow.com/questions/15571485/how-to-implement-a-messaging-system-between-users/15571700)

# c# - 简单的字符串消息传递客户端/服务器协议

> ID：11657566
> 
> 赞同：1
> 
> 时间：2012-07-25T19:54:05.930
> 
> 标签：c#, multithreading, tcp

我正在寻找一种在 TCP 中实现协议以发送和接收简单字符串消息的方法。我有一个客户端和一个服务器应用程序，当它们第一次开始运行时，我按下客户端上的连接按钮以连接到服务器。服务器的列表框上会弹出一些文本，说明客户端已连接，客户端的列表框上会出现一些文本，说明它已连接到服务器。

那部分工作正常，但现在我希望能够将其他字符串发送到服务器，并且根据我发送的字符串会使服务器执行某个操作，我该怎么做？想到的第一个想法是在某处使用 if-then 语句。我将在下面发布我的代码：

服务器：

```
 private static int port = 8080;
    private static TcpListener listener;
    private static Thread thread;

   private void Form1_Load(object sender, EventArgs e)
    {

        listener = new TcpListener(new IPAddress(new byte[] { 10, 1, 6, 130 }), port);
        thread = new Thread(new ThreadStart(Listen));
        thread.Start(); 

    }

   private void Listen()
    {
        listener.Start();
        listBox1.Invoke(new EventHandler(delegate { listBox1.Items.Add("Listening on: " + port.ToString()); }));

        while (true)
        {              
            listBox1.Invoke(new EventHandler(delegate { listBox1.Items.Add("Waiting for connection...."); }));
            TcpClient client = listener.AcceptTcpClient();
            Thread listenThread = new Thread(new ParameterizedThreadStart(ListenThread));
            listenThread.Start(client);

        }
    }

    //client thread 
    private void ListenThread(Object client)
    {

        NetworkStream netstream = ((TcpClient)client).GetStream();

        listBox1.Invoke(new EventHandler(delegate { listBox1.Items.Add("Request made"); }));

        byte[] resMessage = Encoding.ASCII.GetBytes("Connected to Server");

        netstream.Write(resMessage, 0, resMessage.Length);
        netstream.Flush();

    } 
```

客户：

```
 TcpClient tcpclnt;

 private void buttonConnect_Click(object sender, EventArgs e)
    {
        try
        {
            tcpclnt = new TcpClient();
            userEventBox.Items.Add("Connecting.....");

            try
            {

                tcpclnt.Connect("10.1.6.130", 8080);

            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.ToString());

                return;
            }

            Stream stm = tcpclnt.GetStream();

            byte[] bb = new byte[100];
            int k = stm.Read(bb, 0, 100);

            string returndata = System.Text.Encoding.ASCII.GetString(bb);

            userEventBox.Items.Add(returndata);
            tabControl1.Enabled = true;

           //need a way for the server see this string
            string populateList = "Test";

            ASCIIEncoding asen = new ASCIIEncoding();

            byte[] ba = asen.GetBytes(populateList);
            stm.Write(ba, 0, ba.Length);              
        }

        catch (Exception ex)
        {
            Console.WriteLine("Error..... " + ex.StackTrace);
        }
    } 
```

我很困惑，希望您能在这个问题上提供任何帮助。谢谢你。

来源-> [C# 客户端-服务器协议/模型问题](https://stackoverflow.com/questions/885157/c-sharp-client-server-protocol-model-question)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T20:43:55.663

建立连接后，客户端和服务器都需要持续监控它们的`NetworkStream`对象以获取新数据。收到数据后，应将其附加到某种数据缓冲区，直到您收到足够的数据以构成完整的消息。收到适当数量的数据后，您可以尝试从中解析消息并做出适当的响应。

本质上，您需要设置如下所示的逻辑：

```
var data = new byte[1024];
var dataLength = 0;
var dataBuffer = new MyCustomDataBuffer();
while (true)
{
    while (stream.DataAvailable)
    {
        dataLength = stream.Read(data, 0, data.Length);
        dataBuffer.Append(data, dataLength);
        while (dataBuffer.ContainsCompleteMessage())
        {
            dataBuffer.ProcessMessage();
        }
    }
} 
```

这个例子的控制流程被大大简化了，但它应该可以理解这个想法。我也没有提供 的实现`MyCustomDataBuffer`，但是编写这样一个类并不太复杂；它实际上只是一个字节流。

我们如何知道我们是否收到了完整的消息？好吧，这就是*协议*的重点：建立让我们知道这些事情的规则。让我们考虑一个简单的数据协议示例，其中每条消息都由相同的两部分组成：

*   2 个标头字节，表示消息的总大小（以字节为单位）
*   构成消息字符串的任意字节数

通过这个协议，我们知道所有的消息都至少有两个字节长（理论上最小的有效消息是`00 02`，它代表一个空字符串）。我们还知道消息的前两个字节告诉我们消息的总大小，因此我们将知道何时停止读取数据。

因此，要实现上述`ContainsCompleteMessage()`代码中的方法，我们需要：

*   确保数据缓冲区中至少有 2 个字节；
*   将这两个字节转换为整数；
*   并确定我们的数据缓冲区中是否至少有那么多字节。

一旦我们知道我们有一条有效的消息——并且我们知道它有多大——我们所要做的就是从我们的数据缓冲区中切掉前 N 个字节（其中 N 是消息的大小），然后拉出消息字符串出消息数据的相关段：

```
// here, 'msg' is a byte array that contains just the message data
var msgString = Encoding.UTF8.GetString(msg, 2, msg.Length - 2);
switch (msgString)
{
    case "kill": KillServer(); break;
    // etc. 
} 
```

我在这里描述的协议将满足您在网络上发送短字符串的声明需求。泛化它可以让你发送更复杂的对象；您只需要添加指定消息布局的其他元数据。我把它留给读者作为练习。

# hadoop - MapReduce (Hadoop)：Hive 或 HBase 中表的基本实现

> ID：11657578
> 
> 赞同：-3
> 
> 时间：2012-07-25T19:54:48.730
> 
> 标签：hadoop, mapreduce, hbase, hive

我一直在阅读 Hadoop 文件系统并试图了解它是什么。我有一个基本的了解。我非常了解 RDBMS，我很难理解的是如何在例如 HBase 中实现一个简单的表。

从 Cloudera 免费教程中，我了解到 HBase 是面向列的，如何实现面向列的表（它是否称为表？）？

你如何实现一个简单的用户表，其中包含 id、用户名、密码列（或者你不能做这样的事情吗？）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:11:55.933

我认为首先您需要了解为什么要使用 HBase 以及什么是面向列的方法。
您将随处看到，在为 HBase 创建设计时，您将创建一个
`column`，然后创建一个

```
column family 
```

现在问题是您必须记住，HBase 用于非常大规模的数据，并且当您需要 mapreduce 作业和快速检索时。我不能在这里介绍面向 HBase 列的方法，但我建议您使用[这个链接](http://hbase.apache.org/book/quickstart.html)。我希望它会是对你有帮助:)
如果您有任何困惑，请随时提问

# ruby - 我可以在 rails rake 任务中获取 Instagram access_token 吗？

> ID：11657581
> 
> 赞同：0
> 
> 时间：2012-07-25T19:54:56.780
> 
> 标签：ruby, ruby-on-rails-3, instagram

我想在每天运行一次的 rake 任务中使用 Instagram gem，以获取特定哈希标签的最新帖子。

在查看 Instagram API 的文档时，您需要一个 access_token 来做任何有意义的事情。

该文档提供了一个使用“curl”获取 access_token 的示例，我想知道如何将该示例转换为 ruby​​，因此如果我的 rails 应用程序还没有令牌，我可以通过这种方式获得一个。

这是在 Instagram API 的下一页上给出的 curl 示例

```
 curl \-F 'client_id=CLIENT-ID' \
    -F 'client_secret=CLIENT-SECRET' \
    -F 'grant_type=authorization_code' \
    -F 'redirect_uri=YOUR-REDIRECT-URI' \
    -F 'code=CODE' \https://api.instagram.com/oauth/access_token

If successful, this call will return a neatly packaged OAuth Token that you can use to make authenticated calls to the API. We also include the user who just authenticated for your convenience:

{
    "access_token": "fb2e77d.47a0479900504cb3ab4a1f626d174d2d",
    "user": {
        "id": "1574083",
        "username": "snoopdogg",
        "full_name": "Snoop Dogg",
        "profile_picture": "http://distillery.s3.amazonaws.com/profiles/profile_1574083_75sq_1295469061.jpg"
    }
} 
```

我在想我可以使用类似 URI.parse() 的东西，然后在 uri 上使用 open() ，但这似乎不起作用。尝试时我得到一个 404。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:08:39.920

我相信这个问题取决于所使用的 HTTP 动词。我相信 open 将使用 GET 发出请求，而 curl 示例正在发布值。

我没有 Instagram 的 API 凭据，所以我无法对此进行测试，但我相信如果您尝试使用[Net::HTTPSession](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html)，尤其是 post_form 方法，您可能会有更多的运气。

类似于以下内容：

```
require 'net/http'
require 'uri'

form_data = {
  'client_id' => 'CLIENT-ID',
  'client_secret' => 'CLIENT-SECRET',
  'grant_type' => 'authorization_code',
  'redirect_uri' => 'YOUR-REDIRECT-URI',
  'code' => 'CODE'
}

uri = URI('https://api.instagram.com/oauth/access_token')
res = Net::HTTP.post_form(uri, form_data)

puts res 
```

或者，您可以尝试[使用 httparty](https://github.com/jnunemaker/httparty)之类的方法来拨打电话。

# php - 选择查询未显示 $_SESSION 变量

> ID：11657590
> 
> 赞同：0
> 
> 时间：2012-07-25T19:55:17.443
> 
> 标签：php

输出未通过 $userInfo 中的变量显示。当我使用 print_r($_SESSION) 时，它会出于某种原因在 $userInfo 中显示所有输出。我在最后一页设置了 $_SESSION，我知道它正在工作。当我再次使用 print_r 显示会话信息时，所有变量都显示在 $userInfo 中。

```
 <?php
    session_start();
    error_reporting (E_ALL ^ E_NOTICE);
    include "convenienttomysql.php";
    //include "convenientglobal2localhost.php";

    if (isset($_SESSION['userId'])) {
      $pid = $_SESSION['userId'];
       $results = mysql_query("SELECT * FROM register WHERE userId='$pid'")or die(mysql_error());

    while($rowp=mysql_fetch_array($results)){

     $address1=$rowp['address1'];
     $address2=ucfirst($rowp['address2']);
     $city=ucfirst($rowp['city']);
     $region=$rowp['region'];
     $postalCode=$rowp['postalCode'];
     $country=$rowp['country'];
     $shippingRegion=$rowp['shippingRegion'];
     $userInfo='<table id="addressTableOutput">
         <tr>
            <td colspan="2"id="tableTh"> Address Info</td>
         </tr>
        <tr>
            <td>Address 1:</td><td> '.$address1.'</td>
        </tr>
        <tr>
        <td>Address 2:</td><td> '.$address2.'</td>
        </tr>
        <tr>
                <td>City:</td><td> '.$city.'</td>
          </tr>
          <tr>
           <td> Region:</td><td> '.$region.'</td>
          </tr>
          <tr>
           <td>Postal Code:</td><td> '.$postalCode.'</td>
            </tr>
            <tr>
           <td>Country:</td><td>'.$country.'</td>
            </tr><tr>
           <td>Shipping Region:</td><td> '.$shippingRegion.'</td>
          </tr>
            <tr>
               <td id="editTd"><a id="edit" href="convenienteditaddress.php">Edit</a></td>
            </tr>
        </table>';
 }
    }
    $errors= array();

     if (isset($_POST['submit'])){

        $address1=$_POST['address1'];
         $address2 = $_POST['address2'];
        $city = $_POST['city'];
        $region=$_POST['region'];
        $postalCode=$_POST['postalCode'];
        $country=$_POST['country'];
        $shippingRegion=$_POST['shippingRegion'];
        $msg_to_user="";

        if(empty($address1) || empty($city)|| empty($region)|| empty($country)|| empty($shippingRegion)|| empty($postalCode)){

      $errors[] = "<span id='asterisk'>*</span>All fields need to be filled in.<span id='asterisk'>*</span>";
        }
        else{
        if(strlen($postalCode) > 5){
        $errors[] ="<span id='asterisk'>*</span>Postal Code length is 5 characters.<span id='asterisk'>*</span>";
        }
        if(empty($region)){
        $errors[]="<span id='asterisk'>*</span>Select a Region.<span id='asterisk'>*</span>";
        }
        if(empty($shippingRegion)){
        $errors[]="<span id='asterisk'>*</span>Select a shipping region.<span id='asterisk'>*</span>";
        }
        if(strlen($country)< 2){
        $errors[]="<span id='asterisk'>*</span>Please enter a country.<span id='asterisk'>*</span>";
        }
        }

        if(!empty($errors)){
        foreach($errors as $error){
            $msg_to_user2= "$error";
        }
        }
        else{

    $check = mysql_query("UPDATE register SET address1='$address1',address2='$address2',city='$city',region='$region',postalCode='$postalCode',country='$country',shippingRegion='$shippingRegion' WHERE userId='$pid'")or die(mysql_error());
       }
     }

     ?>

    <html>
    <body>
    <?php echo $userInfo;?>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:08:25.060

我注意到的第一件事是您的`echo`声明超出了您定义的范围`$userInfo`。第二个是您在循环`$userInfo`的每次传递中分配。`while`像这样修复这两个问题：

```
//beginning of code; session_start, error_reporting, include;
$userInfo = '';
//in the while loop:
$userInfo .= //... whatever it is 
```

请注意，这基本上是马特试图达到的目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:00:07.797

我注意到的第一件事是在回显它之前您没有向 $userInfo 附加任何内容 - 您只是覆盖了变量的值。

试试这个，看看它是否有帮助：

```
$userInfo = "";
.
.
.
$userInfo .= "<table>...</table>";
.
.
.
<?php echo $userInfo; ?> 
```

# mysql - 在jboss上部署ROO应用（七）

> ID：11657591
> 
> 赞同：0
> 
> 时间：2012-07-25T19:55:22.973
> 
> 标签：mysql, hibernate, spring-roo, jboss7.x

我根据本教程创建了一个 Spring Roo 应用程序：http: [//static.springsource.org/spring-roo/reference/html/beginning.html](http://static.springsource.org/spring-roo/reference/html/beginning.html)

在使用命令行界面创建我的实体后，我将它部署到我的 JBoss (7.1.0.Final)

我调用了 Web 界面，乍一看一切正常。但是，当我尝试获取存储的“标签”时，出现以下错误：

```
org.hibernate.hql.ast.QuerySyntaxException: Labels is not mapped [SELECT o FROM Labels o]; nested exception is java.lang.IllegalArgumentException: org.hibernate.hql.ast.QuerySyntaxException: Labels is not mapped [SELECT o FROM Labels o] 
```

类 Lables 是通过 cli 生成并正确注释的。

当我在 Tomcat 6 上部署完全相同的应用程序时，一切正常......从数据库中获取数据，将数据写入数据库，......

你们有谁知道我必须做什么才能让应用程序在 jboss 上运行？

如果您需要任何进一步的信息，请告诉我，我会提供。

提前谢谢！

BR,

TJ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T17:44:44.043

好的，我找到了解决方案。如果您遇到同样的问题，请看[这里](http://xebee.xebia.in/2011/12/25/deploying-spring-roo-mysql-applications-on-jboss-as7/)

# .htaccess - .htaccess 重写 - 更改可见 URL 并将其发送到某个文件

> ID：11657594
> 
> 赞同：0
> 
> 时间：2012-07-25T19:55:33.277
> 
> 标签：.htaccess, mod-rewrite, url-rewriting, rewrite

我四处搜寻，但找不到这个相对简单问题的答案；如何更改可见 URL，并将其发送到某个文件。

这是我的 .htaccess

```
RewriteEngine On
RewriteRule ^xyz/([A-Za-z0-9\ -]+)$ index.php?xyz=$1 [L] 
```

链接的构建类似于 mydomain.com/xyz/uniquecode

以上 R​​ewriterule 触发文件 index.php?xyz=uniquecode

但我也希望它将**可见**URL 更改为 mydomain.com 或 mydomain.com/someotherfolder

我该怎么做？我想我必须创造一些重写条件，但不知道如何。提前致谢。

..................................................... .....................................................

**编辑 ：**

澄清一下：我想要的是提供个人链接，例如

**mydomain.com/affiliate/users-unique-code-here**，当点击链接时，浏览器中的 url 会显示

**mydomain.com**或

**mydomain.com/somefolder**

虽然它当然会触发我的文件 index.php?affiliate=users-unique-code-here

应该可以在 .htaccess 中完成所有这些操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:14:33.107

是`start_session(); if (isset($_GET['xyz'])){$_SESSION['topost']=$_GET;header('location: mydomain.com');} if (isset($_SESSION['topost'])){$_GET=$_SESSION['topost'];unset($_SESSION['topost']‌​);}` ，如果 isset $_GET 保存它并设置位置，在新位置如果存在保存的数据，将其设置为 $_GET 和新的可见地址，但 $_GET 是相同的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T18:43:10.003

如果我没有误解你，这将对你有所帮助。

在 header 之前放一段这样的代码：

`<?php if (isset($_GET['xyz'])){header('location: /xyz/'+$_GET['xyz'])} ?>`

这将`mydomain.com/index.php?xyz=code`转向`mydomain.com/xyz/code`.

# javascript - 这个 for 循环和计时器有什么问题？

> ID：11657599
> 
> 赞同：0
> 
> 时间：2012-07-25T19:55:44.340
> 
> 标签：javascript, for-loop, settimeout

> **可能重复：**
> [Javascript for loop 和 setTimeout 问题](https://stackoverflow.com/questions/6428091/javascript-for-loop-and-settimeout-issue)

我希望这个循环将#leftValue 中的 html 从 0 更改为 leftValue，从 0 开始并上升到 leftValue 值 - 但它会将 #leftvalue 中的 html 更改为 leftValue 的值，而不是从 0 开始。

知道我在做什么错吗？

```
for (i=0; i<leftValue; i++)
{
    changeLeft(i);
}
function changeLeft(num)
{
    var leftTimer = setTimeout(function(){$('#leftValue').html(num+'%')},1000);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T19:58:29.280

您的所有计时器同时注册，并将在 1000 毫秒后运行（因此也是同时）。您可以将超时设置为例如`num * 1000`。那样的话，某个人`num`出现的时间取决于那个`num`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T19:58:53.837

是的，你的循环正在触发一堆 setTimeouts，它们都将在大约 1000 毫秒内开始。

您可能想`setInterval`改用它，它可以逐渐改变一个值（即简单的动画）。

# javascript - JQPlot 基本图表不显示

> ID：11657607
> 
> 赞同：6
> 
> 时间：2012-07-25T19:56:20.680
> 
> 标签：javascript, jquery, html, rendering, jqplot

我需要将数值数据显示为网页上的图表，我发现 JQPlot 看起来是最简单的 JQuery 库之一，而且它是免费的。然而，尽管我努力查看他们网页上的示例和教程，但我根本无法在页面上显示任何类型的图表。这是我开始使用的基本图表的代码：

```
<html>

<head>
<title>Testing plots functions</title>
<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script type="text/javascript" src="JQPlot/plugins/jqplot.canvasTextRenderer.min.js"></script>
<script type="text/javascript" src="JQPlot/plugins/jqplot.canvasAxisLabelRenderer.min.js"></script>

<script type="text/javascript">

$(document).ready(function(){
  var plot1 = $.jqplot ('chart1', [[3,7,9,1,4,6,8,2,5]]);
});

</script>
</head>

<body>

Here is the start of the page...<br>

<div id="chart1"></div>

</body>

</html> 
```

大部分代码直接取自他们的示例网页（http://www.jqplot.com/tests/line-charts.php），所以我不知道为什么页面上什么都没有发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T00:43:59.807

您需要在渲染器 JS 之前但在 jQuery 包含之后包含主 jqPlot JS，并在放置脚本以渲染图表之前将 div 放置在页面上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T09:32:01.597

尝试将“div”组件放在 Javascript/Jquery 代码之前。

Jquery 可能无法找到“div”。

先定义 div，然后编写显示图表的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T19:59:27.700

这些文件是否存在于您的计算机和此文件夹结构中？

*   JQPlot/plugins/jqplot.canvasAxisLabelRenderer.min.js
*   JQPlot/plugins/jqplot.canvasTextRenderer.min.js

编辑：

确保您也包含基本文件（jquery.jqplot.min.js）（在这些页面上很容易错过）

[http://www.jqplot.com/src/jquery.jqplot.min.js](http://www.jqplot.com/src/jquery.jqplot.min.js)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-25T21:04:11.527

虽然这个线程有点旧，但请考虑以下几点：

将容器（目标）添加到您希望显示绘图的网页。一定要给你的目标一个宽度和一个高度：

```
<div id="chartdiv" style="height:400px;width:300px; "></div> 
```

（取自[本页](http://www.jqplot.com/docs/files/usage-txt.html)）

这是我对您的代码的第一印象。您没有正确定义容器。

希望它会帮助某人。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-26T12:13:46.417

一些额外的点：

1：确保您已按照 jqPlot 网站的相同顺序提供所有必需的 JS 和 CSS 文件的链接。

2：检查 Firebug 控制台，有时它会有所帮助。

希望这可以帮助。

谢谢 ！

# json - 关于采用 RESTful GET JSON 输出并将其重定向到 POST JSON 输入的想法

> ID：11657613
> 
> 赞同：0
> 
> 时间：2012-07-25T19:56:44.270
> 
> 标签：json, rest, redirect, post, get

最近我一直在努力使用 Python 和 Flask 为我们的最终用户公开一个 RESTful API。此时，只有 GET 方法，没有 POSTing ......直到现在。

向我提出的一个有趣请求是确定是否可以接受 GET 请求，该请求输出到 JSON 并将其作为 POST 请求重定向回另一个 Web 服务。

如果有意义的话，可以把它想象成通过 Web 服务复制数据。或者可能像“GET-redirect data-POST”。

为了进一步推动这一点，我有一个简单的 GET 请求：

```
urllib2.Request("http://localhost:5000/request/security/773/20110101") 
```

输出是 JSON，我想获取该数据并将其 POST 回：

```
http://localhost:5000/submit/transaction/773/20110101 
```

假设数据映射是一对一的（确实如此）。有没有办法在服务器端进行一次调用？这甚至是一件聪明的事情吗？只是寻找想法，想法和评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:09:38.917

看起来很简单。为什么不从您的请求/安全处理程序中发布帖子？

```
def request_security_handler():
    ....
    data = "Data"
    urllib2.Request("/submit/transaction/773/20110101", data)
    return data 
```

如果发布是可选的，您可以执行以下操作：

```
urllib2.Request("http://localhost:5000/request/security/773/20110101?RepostResultTo=/submit/transaction/773/20110101") 
```

接着：

```
def request_security_handler(RepostResultTo):
    ....
    data = "Data"
    urllib2.Request(RepostResultTo, data)
    return data 
```

在任何情况下，这都是与服务器的单次往返，服务器将不得不对自己进行 POST。客户端将无法从 GET 获取结果，然后执行 2 次往返的 POST。

# python - 使用 Python 进行模拟时避免使用冗余的 @patch

> ID：11657614
> 
> 赞同：14
> 
> 时间：2012-07-25T19:56:45.007
> 
> 标签：python, mocking, patch, code-duplication

来自静态编程语言背景，我想知道如何最好地在 Python 中进行模拟。我习惯于依赖注入。在测试中，创建模拟并将其传递给被测系统 (SUT)。但是，查看 Mock 和 Python 的其他模拟框架，似乎类型/函数/等。在逐个测试的基础上替换模块中的。

`@patch('some.type.in.the.module.under.test')`特别是，对于 Mock，在您为每种类型/功能/等所说的每个单元测试之上。你想嘲笑。在测试的整个生命周期中，这些东西都会被嘲笑，然后它们会被还原。不幸的是，在测试中，fixture 非常接近，你最终`@patch`会一遍又一遍地重复你的 es。

我想要一种跨单元测试共享补丁集合的方法。我还想以可组合的方式对灯具进行调整。我可以使用上下文管理器而不是装饰器。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-26T08:07:21.310

您可以修补流向该类中每个方法的测试类。然后您可以从超类继承并使用 setUp 和 tearDown 方法。

```
import unittest 

@patch('some.type.in.the.module.under.test')
class MySuperTestCase(unittest.TestCase):
    pass

class MyActualTestCase(MySuperTestCase):

    def test_method(self, mock_function)
        mock_function.return_value = False 
```

不过，这并不像您想象的那么普遍。因为您需要在使用对象的确切位置修补对象。你不修补'sys.stdout'，你修补'my_dir.my_module.sys.stdout'。所以它真的只在测试特定模块时才有用。但是要测试那个特定的模型，你当然只需要一个补丁装饰器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-23T01:41:17.540

我最近遇到了类似的情况，但更极端。我的顶级模块之一必须模拟几个存储库、提供程序和逻辑库。这导致了许多需要`@patch`7 个组件的单元测试。我想避免大量重复的测试代码，所以这是我的解决方案，效果很好：

```
@mock.patch('module.blah1.method1')      # index: 6
@mock.patch('module.blah1.method2')      # index: 5
@mock.patch('module.blah2.method1')      # index: 4
@mock.patch('module.blah2.method2')      # index: 3
@mock.patch('module.blah2.method3')      # index: 2
@mock.patch('module.blah3.method1')      # index: 1
@mock.patch('module.blah4.method1')      # index: 0
class TestsForMyCode(unittest.TestCase):

    def test_first_test(self, *mocks):
        # Arrange

        # setup mocks for only the ones that need specific mocked behaviours

        # idx 2 patches module.blah2.method3
        mocks[2].return_value = 'some value'

        # Act
        target = sut()
        result = target.do_something()

        # Assert
        assert result is False

    def test_second_test(self, *mocks):
        # Arrange

        # setup mocks for only the ones that need specific mocked behaviours

        # idx 0 patches module.blah4.method1
        mocks[0].return_value = 'another value'

        # idx 4 patches module.blah2.method1
        mocks[4].return_value = 'another value'

        # Act
        target = sut()
        result = target.do_something_else()

        # Assert
        assert result is True 
```

类上的`@mock`s 在运行时应用于每个测试，并将所有补丁传递给 *mocks 参数。要记住的重要一点是排序 - 我将索引注释放在我的代码中，以保持头脑清醒。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T20:04:41.567

我不保证这在语法上是正确的，因为我无法测试它，但这里是：

```
COMMON_FUNCTIONS = ('some.type.in.the.module.under.test', 'and.others')
def common_patches(f):
    for item in COMMON_FUNCTIONS:
        f = patch(item)(f) 
```

现在应用它：

```
@common_patches
def something():
    pass # it will be decorated by all the patches in the function 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-06T09:47:40.693

我还推荐**装饰器**，因为您可以避免多余的**补丁**。不仅如此，使用**参数化装饰器**，您可以控制每个装饰器的自定义装置。例子：

```
def patch_example(custom_value=None):
    def _patch(test_func):
        @mock.patch('some.type.in.the.module.under.test')
        def _patch_it(mocked_function):
            mocked_function = custom_value
            return test_func(self)
        return wraps(test_func)(_patch_it)
    return _patch

class ExampleTestCase(object):

    @patch_example(custom_value='new_value')
    def test_method_1(self):
        # your test logic here, with mocked values already defined in decorator

    @patch_example(custom_value='new_value_2')
    def test_method_2(self):
        # your test logic here, with mocked values already defined in decorator 
```

# azure - Azure 网站 WebMatrix 添加现有文件 灰色

> ID：11657616
> 
> 赞同：0
> 
> 时间：2012-07-25T19:56:52.280
> 
> 标签：azure, webmatrix

我在新的 Azure 网站预览版上托管了一个 dotnet nuke 网站。我想添加一个新的徽标图像。我单击了 WebMatrix 图标并安装了 WebMatrix 2.0。我可以在左侧的树形视图中看到我的网站文件列表。我导航到图像文件夹。我想从顶部功能区菜单的“文件”部分单击“添加现有”图标，但它是灰色的。谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T18:12:53.437

一个简单的问题：您在 Webmatrix 的远程视图中吗？

如果是这样，很遗憾，我们还不支持从您的计算机上传现有文件。上传文件的最简单方法可能是单击顶部的下载按钮并在本地下载您的站点。然后，您可以对本地站点进行任何您喜欢的更改并将它们发布备份。

此外，我们非常感谢对我们产品的反馈以及关于我们如何改进它的任何建议。实现您的想法的最佳方式是[对 uservoice 提出建议](http://webmatrix.uservoice.com/)。

# xaml - Metro 应用程序：以编程方式更改 GridView.ItemTemplate

> ID：11657618
> 
> 赞同：1
> 
> 时间：2012-07-25T19:56:56.990
> 
> 标签：xaml, microsoft-metro, winrt-xaml

我的 Xaml 中有一个 GridView，给定的 DataTemplate 设置了一个 StaticResource：

```
<GridView
        x:Name="itemGridView"
        ItemsSource="{Binding Source={StaticResource itemsViewSource}}"
        ItemTemplate="{StaticResource MyItemTemplate }" 
        SelectionMode="None"
        IsItemClickEnabled="True"
        ItemClick="ItemView_ItemClick"/> 
```

通过单击 AppBar 中的按钮，我想通过将另一个 DataTemplate - MyItemTemplateWide 应用于此特定列表来重新设置此模板的样式。

我的数据模板存储在一个引用为 ResourceDictionary 的 Xaml 文件中。

我想在 C# 代码隐藏中加载新的 DataTemplate。

DataTemplateSelector 会在这里帮助我吗（例如通过在 Xaml 中设置任何隐藏值）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-15T06:34:34.237

您可以使用不同的模板创建多个网格视图，并根据需要更改网格的可见性。

使正在使用的网格视图可见并使其他可见性为假

注意：要放置在 xaml 中的 gridview 的位置必须对所有人都相同。意味着如果将其放置在网格中，则每个 gridview 的 gird.row 和 grid.column 必须相同。

# hudson - 如何使用 maven 在 Hudson 构建中连接 PMD + Clover？

> ID：11657620
> 
> 赞同：1
> 
> 时间：2012-07-25T19:56:57.677
> 
> 标签：hudson, maven-3, clearcase, pmd, clover

我们新建立了一个 Hudson（是的.. Hudson，不是 Jenkins）CI。在哈德逊安排的工作执行以下操作

一个。连接到 IBM ClearCase 存储库以下载最新的源代码
b. 编译所有 java 源代码并创建一个 WAR 文件（通过运行项目的 pom.xml）
c。将其部署到 Tomcat6 服务器

现在，我想更进一步，在此过程中引入自动“静态代码分析器”。

我在我的 Hudson 实例中安装了 PMD/Clover/JavaNCSS 插件，但是在查看它的设置时，看起来这些插件不会执行静态代码分析。相反，它们将仅依赖于 Maven-PMD/Clover/JavaNCSS 插件生成的报告，然后显示它们。

但是，我的目标是创建设置，如果 PMD/Clover/JavaNCSS 检查导致超出阈值限制的违规行为**，则构建失败。**

谁能让我知道如何继续？

**注意**：如果这工作正常，接下来我想阻止开发人员将他们的代码签入到 ClearCase 中，以防出现任何违反编码标准的情况。对此有任何指示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:03:29.333

> 阻止开发人员将他们的代码签入到 ClearCase 中，以防违反任何编码标准

这意味着锁定。
锁定 UCM 流（如果您使用 ClearCase UCM）或锁定由 Hudson 监控的分支。
见[`cleartool lock`](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m1/topic/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_lock.htm)。

这个想法是为了防止任何人结帐/检查（如果需要修改任何文件，Hudson 使用的帐户除外）

* * *

在“构建失败”部分，像[Conditional BuildStep Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Conditional+BuildStep+Plugin)这样的插件可能会有所帮助（Jenkins 的插件，但它也可以移植到 Hudson）

# batch-file - 检测或拦截通过鼠标关闭批次的时刻（X 控制台按钮）

> ID：11657622
> 
> 赞同：2
> 
> 时间：2012-07-25T19:57:08.003
> 
> 标签：batch-file

我需要运行批处理“脚本 A”，这仅在通过“您要退出 [y / n] 问题”以编程方式关闭批处理或批处理中的所有脚本都结束时运行。

如果用户决定通过鼠标按钮（控制台右上角的“X”）关闭批处理，如果批处理崩溃，不幸的是，“脚本 A”将不会被执行。

如何以编程方式拦截“X”的任何时刻并启动另一批以完成契约？

亲切的问候，

马莱克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T21:30:42.667

以下简单的方案似乎有效。清理脚本通过带有 /WAIT 选项的 START 命令调用主脚本。这确保即使子进程通过关闭窗口而被终止，控制也会返回。

父清理脚本通常会提示您是否要*“终止批处理作业（Y/N）？”* 如果主脚本被关闭窗口杀死。如果出现该提示，我将 N 输入到 START 命令中以自动回答该提示。stderr 到 nul 的外部块重定向抑制了`^C`在主窗口被杀死时出现的丑陋（Control-C）。

主批处理文件不是直接启动的，而是通过 CMD /C 命令启动的。这确保即使按 Control-C 杀死主脚本，控制也会返回。这也消除了在主脚本中放置 EXIT 命令的需要（可能永远不会以任何方式执行）。

**清理.bat**

```
@echo off
:: Launch the main program and don't continue until it completes (or is killed)
2>nul (
  echo N|start /wait "" cmd /c main.bat
)

:: Cleanup up begins here
echo Time to wrap it up! 
```

这是一个简单的**main.bat**来测试返回功能

```
@echo off
echo This is the main script.
echo(
echo    Press any key to close normally
echo or Close this window via the console window X button
echo or Press Ctrl-C to break out of this script abnormally
pause >nul 
```

***编辑***

当然，没有什么可以阻止用户在主脚本终止之前关闭“cleanup.bat”窗口，这会让你回到第一方:-(

您可以通过 wscript 运行 VBScript 或 Jscript，而无需关闭任何可见窗口。然后（VB/J）脚本可以启动 main.bat 脚本，然后仅在主进程完成（或被杀死）时启动 cleanup.bat 脚本。这将使最终用户更难以干预启动清理脚本的过程。

**大师.vbs**

```
Set WshShell = CreateObject("WScript.Shell")
WshShell.Run "D:\test\main.bat", 1, TRUE
WshShell.Run "D:\test\cleanup.bat", 1, TRUE
Set WshShell = Nothing 
```

但是一旦你越过了这个门槛，为什么不使用 (VB/J) 脚本来完成整个项目呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:14:47.830

批次无法判断它何时从红色 X 关闭。因此，任何处理从 X 关闭的代码都必须来自其他地方。一种可能性是使用另一批`TASKLIST`来监控第一批何时关闭。

# java - 服务器库存的密钥生成器

> ID：11657625
> 
> 赞同：0
> 
> 时间：2012-07-25T19:57:12.350
> 
> 标签：java, ssl

如何以编程方式创建私钥并在 SSL 套接字中使用它？

我在下面尝试将密钥添加到密钥库但没有证书链的地方放了一个注释异常。

```
 KeyPairGenerator keyGen = KeyPairGenerator.getInstance("RSA");
    keyGen.initialize(1024, new SecureRandom());
    KeyPair keypair = keyGen.generateKeyPair();

    System.setProperty("javax.net.ssl.keyStore", System.getProperty("user.home")
        + File.separator +
            + "/keystore.jks");
    System.setProperty("javax.net.ssl.keyStorePassword", "xyz");

    KeyManagerFactory keyManagerFactory = KeyManagerFactory
            .getInstance("SunX509");
    KeyStore keyStore = KeyStore.getInstance("JKS");
    keyStore.load(null, "xyz".toCharArray());

    //setKeyEntry parameter 3 can not be null: 
    //IllegalArgumentException: Private key must be accompanied by certificate chain
    keyStore.setKeyEntry("alias", keypair.getPrivate(),
            "xyz".toCharArray(), null);

    keyManagerFactory.init(keyStore, "xyz".toCharArray());
    // keyStore.load
    SSLContext context = SSLContext.getInstance("TLS");// "SSLv3"
    context.init(keyManagerFactory.getKeyManagers(), null,
            new SecureRandom());
    ServerSocketFactory socketFactory = context.getServerSocketFactory();
    ServerSocket ssocket = socketFactory.createServerSocket(1443);
    Socket socket = ssocket.accept(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:34:54.593

> 如何以编程方式创建私钥并在 SSL 套接字中使用它？

只创建一个私钥，甚至只创建一个私钥/公钥对都没有什么意义。您需要在服务器上设置的是与此私钥关联的证书。

X.509 证书是相当复杂的结构，基于 ASN.1 语法。我强烈建议您使用 BouncyCastle（或多或少如您链接到的博客文章中所述）。手工完成这一切并非易事。（如果您不相信，请查看 BouncyCastle 类的源代码。）

此外，动态创建此证书（及其关联的私钥）几乎没有意义。证书的重点是允许客户端验证它正在与之交谈的服务器的身份。客户端通过根据其拥有的受信任证书列表检查服务器证书来执行此操作（使用 PKI 或通过与手动配置的特定服务器证书进行单独比较）。

如果您动态生成自签名证书，则客户端无法将其与事先知道的内容进行比较。如果您的服务器也是 CA（对于类似于 MITM 代理服务器的应用程序），它可能很有用。

# c - AVR C 编程 - 全局数组

> ID：11657629
> 
> 赞同：1
> 
> 时间：2012-07-25T19:57:25.450
> 
> 标签：c, avr

我正在尝试使用全局数组来存储我知道不会大于 255 字节的数据。但是当我尝试使用阵列传输数据时，似乎没有任何传输。我究竟做错了什么？

```
char responseFrame[255];

int main {
    ...
    while(1){
        getData();
    }

};
void getData(void) {
    int responseLen = USART1_RX();
    // put data in the response frame
    for (int i = 0; i < responseLen; i++){
        recv_data = USART1_RX();
        responseFrame[i]=recv_data;
        //USART0_TX(responseFrame[i]);
    }

    LogOutput(responseFrame, responseLen);
}

void LogOutput(char *msg, int size) {

    int i;
    for (i = 0; i < size; i++) {
        USART0_TX(msg[i]);
    }
} 
```

但是，当我评论我的日志记录函数“LogOutput”并使用“USART0_TX(responseFrame[i])”行使用直接传输时，它会适当地传输信息。

这是我的 USART0_TX 函数：

```
void USART0_TX(uint8_t myData) {
    // Wait if a byte is being transmitted
    while( !(UCSR0A & (1<<UDRE0)) );
    // Transmit data
    UDR0 = myData;
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:07:30.460

您确定您的 LogOutput 函数正在传递有效数据吗？

这应该工作

```
unsigned char* data = responseFrame;
LogOutput(data,255); 
```

另一个想法：

您是否正在运行带有任何优化的编译器？尝试关闭它们以查看问题是否消失。

此外，您可能需要考虑标记全局 volatile。

```
volatile char data[255]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:40:30.477

您可能需要延迟 USART0_TX 函数。

```
// Wait if a byte is being transmitted
while( !(UCSR0A & (1<<UDRE0)) );
// Transmit data
UDR0 = myData;
_delay_ms(250); 
```

这将允许 uC 赶上放在总线上的数据。我在传输数据时遇到了类似的问题，我发现在将数据放在 UDR 后使用短暂的延迟解决了这个问题。

它在您的 getData 函数中起作用的原因是因为其他两个语句作为您的 TX 函数的延迟。

如果您还没有，则需要包含 util/delay.h。请记住，最大延迟为 4294967.295 ms/ F_CPU in MHz

参考：[AVR LibC delay.h](http://www.nongnu.org/avr-libc/user-manual/group__util__delay.html)

# c# - 使用任何类型的 .Net 流（包括 Socket）接收任何网页

> ID：11657632
> 
> 赞同：0
> 
> 时间：2012-07-25T19:57:41.730
> 
> 标签：c#, .net, http, sockets, networking

我需要使用 .net 套接字加载任何网页，这样我就可以自己控制连接和接收数据的方式。

**笔记**

*   在这里使用 WebClient 和 HttpWebRequest 不是一个选项，我需要使用 TcpClient 和 Socket。
*   如果我可以使用它们（HttpWebRequest）但自己控制连接和数据，我会很高兴。
*   我真正的目标是使用我自己的 HTTP 规则使用 Socket 加载任何网页。

> > **更新**
> > 
> > 通过运行 C# HTTP 代理服务器并使用 WebClient 代理地址，可以使用 WebClient 并自己控制连接和数据。 [#心理](http://www.mentalis.org/soft/projects/proxy/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T12:52:55.173

[RFC](https://www.rfc-editor.org/rfc/rfc2616#section-3.6.1)中非常清楚地描述了分块传输编码。每个块存在于：

```
chunk-size[;chunk-extensions]<CRLF>
chunk-data<CRLF> 
```

块大小首先发送，它是一个十六进制数，指定期望的块数据的字节数，可选地后跟块扩展，由 CRLF 或`\r\n`. 在您读取指定数量的字节后，您可以期待另一个 CRLF，因此您必须再读取两个字节。

然后你就可以开始阅读下一个块了。如果`chunk-size`是`0`，则期望再读取两个`CRLF's`（不将其添加到缓冲区），然后您已收到所有数据，因为大小为 0 的块表示最后一个块。

请注意，您不能使用`ReadLine()`读取块，因为响应正文中的换行符（即 in `chunk-data`）将被视为行，因此它可能会在读取整个块之前返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T20:19:13.733

这是使用 C# 加载任何网页的方法，包括分块网页，它适用于 .Net 中可用的所有类型的流

*此代码基于 RFC 2616-Section-3.6*

```
public class HttpStream : Stream
{
    internal readonly Stream InnerStream;
    private long length;
    private bool canRead;

    internal bool Chunked { get; set; }
    internal int ChunkLength { get; set; }
    internal int ChunkReceivedPosition { get; set; }

    internal HttpStream(Stream innerStream)
    {
        InnerStream = innerStream;
        ChunkLength = -1;
        canRead = true;
    }

    public override int Read(byte[] buffer, int offset, int count)
    {
        if (!canRead)
            return -1;

        var bytesReadInCallSession = 0;

        if (Chunked)
        {
            do
            {
                if (ChunkLength == -1)
                {
                    // read next chunked content size
                    string chunkLengthString = InnerStream.ReadLine(returnLineEndBytes: false);
                    ChunkLength = Convert.ToInt32(chunkLengthString, 16);
                }

                // end of HTTP response-body
                if (ChunkLength == 0)
                {
                    canRead = false;
                    break;
                }

                int toRead = ChunkLength;
                if (count + ChunkReceivedPosition - bytesReadInCallSession < ChunkLength)
                    toRead = count + ChunkReceivedPosition - bytesReadInCallSession;

                // read chunked part
                while (ChunkReceivedPosition < toRead)
                {
                    var bytesRead = InnerStream.Read(buffer, offset + bytesReadInCallSession, toRead - ChunkReceivedPosition);
                    ChunkReceivedPosition += bytesRead;
                    bytesReadInCallSession += bytesRead;
                    Position += bytesRead;
                }

                if (ChunkReceivedPosition == ChunkLength)
                {
                    // force to read next chunk size in next loop
                    ChunkLength = -1;
                    ChunkReceivedPosition = 0;

                    // discard anything until we reach after the first CR LF
                    InnerStream.ReadLine();
                }

                if (bytesReadInCallSession == count)
                    break;
            } while (true);

            if (!canRead)
            {
                do
                {
                    string trailer = InnerStream.ReadLine();
                    if (String.IsNullOrWhiteSpace(trailer))
                        break;

                    // TODO: process trailers
                } while (true);
            }

            return bytesReadInCallSession;
        }
        else
        {
            var countRead = InnerStream.Read(buffer, offset, count);
            Position += countRead;
            return countRead;
        }
    }

    public override void SetLength(long value)
    {
        length = value;
    }

    public override bool CanRead
    {
        get { return canRead; }
    }

    public override long Length
    {
        get { return length; }
    }

    public override long Position
    {
        get;
        set;
    }

    public override void Flush()
    {
        throw new NotImplementedException();
    }

    public override long Seek(long offset, SeekOrigin origin)
    {
        throw new NotImplementedException();
    }

    public override void Write(byte[] buffer, int offset, int count)
    {
        throw new NotImplementedException();
    }

    public override bool CanSeek
    {
        get { throw new NotImplementedException(); }
    }

    public override bool CanWrite
    {
        get { throw new NotImplementedException(); }
    }
} 
```

我们需要一个高级的 ReadLine 作为 Stream 类的扩展方法

```
public static class Extensions
{
    public static string ReadLine(this Stream stream, bool returnLineEndBytes = true, byte[] lineEndBytes = null)
    {
        // default end line bytes
        if (lineEndBytes == null)
            lineEndBytes = new byte[2] { 13, 10 };

        StringBuilder stringBuilder = new StringBuilder("");
        var buffer = new byte[lineEndBytes.Length];
        var index = 0;

        do
        {
            var byteRead = stream.ReadByte();

            // end of stream break loop
            if (byteRead == -1)
                break;

            stringBuilder.Append((char)byteRead);

            buffer[index] = (byte)byteRead;

            if (index == lineEndBytes.Length - 1 && buffer.SequenceEqual(lineEndBytes))
                break;

            // shift bytes by one to the left
            if (index == lineEndBytes.Length - 1)
                buffer = buffer.Skip(1).Concat(new byte[] { 0 }).ToArray();

            if (index < lineEndBytes.Length - 1)
                index++;

        } while (true);

        if (!returnLineEndBytes)
            stringBuilder = stringBuilder.Remove(stringBuilder.Length - lineEndBytes.Length, lineEndBytes.Length);

        return stringBuilder.ToString();
    }
} 
```

# regex - 在 htaccess RewriteRule 中使扩展成为可选

> ID：11657634
> 
> 赞同：0
> 
> 时间：2012-07-25T19:57:45.707
> 
> 标签：regex, .htaccess, mod-rewrite, optional

我在 .htaccess 中有以下代码：-

```
Options +FollowSymLinks 
RewriteEngine On 
RewriteRule ^([^/]+)/([^/]+)(.pdf)$ showpdf.pdf?product_code=$1 [NC,QSA,L] 
```

它接受以下格式的请求（例如）：-

```
/ab-cde-123/anything-can-go-here.pdf 
```

并将其重写为： -

```
/showpdf.pdf?product_code=ab-cde-123 
```

这很好用。但是，我想稍微改变它，以便请求中最后一个 / 之后的所有内容都是可选的，例如，所有这 3 个都可以作为请求工作：-

```
/ab-cde-123/anything-can-go-here.pdf
/ab-cde-123/anything-can-go-here
/ab-cde-123/ 
```

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:21:30.640

您可以删除它的匹配项，除非您需要添加一个条件以防止它循环：

```
RewriteCond %{REQUEST_URI} !^/showpdf\.pdf
RewriteRule ^([^/]+)/? showpdf.pdf?product_code=$1 [NC,QSA,L] 
```

# c++ - bundle of invalid errors: C2059, C2143, C2181, C2660

> ID：11657636
> 
> 赞同：0
> 
> 时间：2012-07-25T19:57:53.437
> 
> 标签：c++, visual-studio-2008

This bundle of errors is caused by one function, and none of these errors are valid

> ```
> error C2059: syntax error : '='
> error C2143: syntax error : missing ';' before '{'
> error C2181: illegal else without matching if
> error C2660: 'Lexicon::convertOntology' : function does not take 0 arguments 
> ```

```
string Lexicon::convertOntology(string input, int d, string out, string temp) // C2059; C2143
{
    if (in.length() == 0 && temp.length() == 0) {return out; //check for completed conversion //C2181
    } else {
        int r = 1;
        if (d == 1) r = 0; 
        if (in[0] == '.' || in[0] == '-' || in == "") { //found deliminator or end //C2059; C2143
            return convertOntology(in.substr(1), d, out+=vectorSearch(list, temp, 0, d, r), ""); //convert and check // C2143; C2660
        } else return convertOntology(in.substr(1), d, out, temp); //increment and check
    }
} 
```

I did not place all the errors, they are repeated 14 times - it seems clear that these are not errors but is an issue with the compiler parsing the text; there is something upstream from this that is unmatched. I checked the previous function and checked the lines prior to where this function is called and found nothing.

How do I resolve these errors?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:09:56.437

First of all, you reference `in` throughout your function although you pass a variable called `input`.

Secondly, you should also check this `in[0] == '.' || in[0] == '-' || in == ""` in another order, where you check for *an **empty** string first*. If the string *is* empty, your program will crash here when you try and access the first element `[0]`. Put `in == ""` first.

Thirdly, `list` isn't defined anywhere I can see, and it's being used here, `vectorSearch(list, temp, 0, d, r), "");`

Finally, **eww**. Please don't write c++ like that. ***IMHO*** there is nothing wrong with excusing brackets for one line if statements, but try and make everything readable so the next person doesn't want to *blow their brains out* trying to figure out what's going on.

```
string Lexicon::convertOntology(string input, int d, string out, string temp)
{
  if (input.length() == 0 && temp.length() == 0) 
    return out; 
  else 
  {
    int r = 1;
    if (d == 1) 
      r = 0; 
    if (input[0] == '.' || input[0] == '-' || input == "") 
      return convertOntology(input.substr(1), d, out+=vectorSearch(list, temp, 0, d, r), "");
    else 
      return convertOntology(input.substr(1), d, out, temp);
  }
} 
```

# linux - GDB错误值不能转换为整数

> ID：11657637
> 
> 赞同：3
> 
> 时间：2012-07-25T19:57:59.027
> 
> 标签：linux, debugging, gdb

我正在尝试调试一些应用程序，并且我想使用以下命令传递一些数据，但出现错误。

```
 ....
    ....
    (gdb) x/20x $esp
    Value can't be converted to integer.
    (gdb) 
```

我的 GDB 版本如下：

```
#gdb -v
GNU gdb (GDB) Red Hat Enterprise Linux (7.0.1-23.el5)
Copyright (C) 2009 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.  Type "show copying"
and "show warranty" for details.
This GDB was configured as "x86_64-redhat-linux-gnu".
For bug reporting instructions, please see:
<http://www.gnu.org/software/gdb/bugs/>. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-01-29T14:19:01.410

您从 64 位系统运行它，因此您应该使用寄存器名称作为 rip 而不是 eip 等所有寄存器。

例如：

```
(gdb) x/x $rip
0x4004c8 : 0x4005d8b8

```

获取信息寄存器以查看所有（gdb）信息寄存器

```
rax 0x7ffff7dd9f60 140737351884640

RBX 0x0 0

回复 0x0 0

rdx 0x7ffffffffe188 140737488347528

rsi 0x7ffffffffe178 140737488347512

rdi 0x1 1

rbp 0x7ffffffffe090 0x7ffffffffe090

回复 0x7ffffffffe090 0x7ffffffffe090

r8 0x7ffff7dd8300 140737351877376

r9 0x7ffff7deb9e0 140737351956960

r10 0x7fffffffdee0 140737488346848

r11 0x7ffff7a68be0 140737348275168

r12 0x4003e0 4195296

r13 0x7ffffffffe170 140737488347504

r14 0x0 0

r15 0x0 0

撕裂 0x4004c8 0x4004c8

eflags 0x246 [PF ZF IF]

CS 0x33 51

ss 0x2b 43

ds 0x0 0

es 0x0 0

fs 0x0 0

```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-26T02:05:21.520

> `(gdb) x/20x $esp`
> `Value can't be converted to integer.`

尝试`x/20x $rsp`或`x/20x $sp`

# ruby - ruby 调试器直接进入一个块？

> ID：11657645
> 
> 赞同：9
> 
> 时间：2012-07-25T19:58:31.480
> 
> 标签：ruby, debugging

在以下 Ruby 代码中：

```
#! /usr/bin/env ruby

require 'debugger'

def hello
  puts "hello"
  if block_given?
    yield
  end 
end 

def main
  debugger
  puts "test begin..."
  hello do   # <=  if you are here
    puts "here!" #<= how to get here without setting bp here or step into hello?
  end 
end 

main 
```

在调试的时候很常见，我不关心让出块的函数的实现，我只想直接进入块，而不需要在那里手动设置断点。

ruby-debug19 或调试器中是否存在对这种“步入块”的支持？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-25T23:29:46.120

您是否尝试过使用“ `c`”命令来“[继续](http://bashdb.sourceforge.net/ruby-debug.html#Continue)”？它可以选择使用行号，因此，根据您的代码示例尝试：

```
c 16 
```

# c# - 从 C# 以双面模式打印 pdf

> ID：11657651
> 
> 赞同：0
> 
> 时间：2012-07-25T19:59:00.567
> 
> 标签：c#, pdf, printing

我有一个我想从我的 C# 应用程序打印的 pdf 文件。我能够在代码中确定打印机是否支持双面打印，但可以从我的代码中获取 pdf 以双面打印。这是我的常规单面打印代码。我能够检查 pdf 打印对话框预设为双面的元数据。但它不起作用。

```
 string verbToUse = "PrintTo";
            startInfo.Verb = verbToUse;
            startInfo.Arguments = workCenterPrinterName.Value.ToString();
            Process p = Process.Start(startInfo);
            p.WaitForExit(5000);//random time after which process will be killed
            if (p.HasExited == false)
            {
                p.Kill();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T15:26:06.443

经过大量研究，我编写了这段对我有用的代码。这是应付的整洁副本，我可以写很多研究和摆弄。我找不到更好的解决方案并发布我的工作以帮助他人。我正在打印一个多页 tiff 文件，但此代码也适用于 PDF

```
using( Image img = Image.FromFile(@"c:\temp\testfile1.tif") ) {
printDocument.DocumentName = controlNumber;
printDocument.DefaultPageSettings.Margins = new Margins( 15, 0, 0, 0 );
printDocument.OriginAtMargins = true;
printDocument.PrinterSettings.PrinterName = request_printer;
printDocument.PrinterSettings.Duplex = Duplex.Default;
FrameDimension frames = new FrameDimension( img.FrameDimensionsList[ 0 ] );
int pages = img.GetFrameCount( frames );
if( printDocument.PrinterSettings.IsValid ) {
    try {
        printDocument.PrinterSettings.Duplex = Duplex.Default;
        int page = 0;
        printDocument.PrintPage += ( sender, e ) => {
                    img.SelectActiveFrame( frames, page );
                    Bitmap bmp = new Bitmap( img );
                    pictureBox.Image = bmp;
                    pictureBox.SizeMode = PictureBoxSizeMode.StretchImage;
                    printDocument.DefaultPageSettings.Landscape = false;
                    if( bmp.Width > bmp.Height ) {
                         printDocument.DefaultPageSettings.Landscape = true;
                    }

                    if( printDocument.PrinterSettings.IsValid ) {
                         if( e.PageSettings.PrinterSettings.CanDuplex ) {
                                e.PageSettings.PrinterSettings.Duplex = Duplex.Default;
                         }
                         e.Graphics.DrawImage( img, 0, 0 );
                         e.HasMorePages = page < 1;
                    }
             page++;
        };
        printDocument.Print();
        } catch (Exception ex) { }      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-24T18:27:45.963

我不知道在给定时间过去的情况下发布答案是否正确，但我在这个问题上挣扎了很多，结果发现代码比我们想象的要简单：

```
public static void Printing(string printer, string fileLoc)
        {
            //Set Duplex Settings Session
            PrinterSettings set = new PrinterSettings();
            set.PrinterName = printer;
            set.Duplex = Duplex.Default;

            //Start Printing process
            ProcessStartInfo info = new ProcessStartInfo();
            info.Verb = "print";
            info.FileName = fileLoc;
            //Print and close program immediatly
            info.CreateNoWindow = true;
            info.WindowStyle = ProcessWindowStyle.Hidden;

            Process P = new Process();
            P.StartInfo = info;
            P.Start();

            P.WaitForInputIdle();
            System.Threading.Thread.Sleep(3000);
            set.Duplex = Duplex.Simplex; //It seems setting back printer to normal wasn't thoroughly tested though 
            if (false == P.CloseMainWindow())
                P.Kill();
            //kill process
        } 
```

因此，基本上，当您创建 PrinterSettings 时，它似乎保存在内存中的某个位置并用于下一次打印。它对我来说非常有效。唯一需要注意的是，您必须有一个默认应用程序才能阅读 PDF（例如 Adob​​e Reader），这可以在控制面板->默认应用程序中轻松完成。

# sql - 查询以查找表中不可用的所有日期

> ID：11657654
> 
> 赞同：0
> 
> 时间：2012-07-25T19:59:14.257
> 
> 标签：sql

我想为这个问题写一个查询：

> 显示 1997 年 8 月没有下订单的日子。

我可以找到下订单的天数，但是如何找到没有下订单的天数？

这显示了下订单的日期：

```
SELECT
   o.OrderID,
   day(o.OrderDate) AS 'Date',
   sup.CompanyName 
FROM
   Orders o 
   INNER JOIN OrderDetails od ON o.OrderID = od.OrderID 
   INNER JOIN Products p ON od.ProductID = p.ProductID 
   INNER JOIN Suppliers sup ON p.SupplierID = sup.SupplierID 
WHERE
   sup.CompanyName = 'Tokyo Traders'
   AND o.OrderDate BETWEEN '1/1/1997' AND '1/31/1997' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:10:53.037

您需要一个可以加入的日期表来查找缺失的日期。

假设它的 SQL Server：

您可以加入您的查询以获取结果

```
WITH DatesTable
AS
(
  SELECT CAST('2007-08-01' as datetime) AS [date]
  UNION ALL
  SELECT DATEADD(dd, 1, [date])
  FROM DatesTable
  WHERE DATEADD(dd, 1, [date]) <= '2007-08-31'
)
SELECT [date] FROM DatesTable
OPTION (MAXRECURSION 0); 
```

一些类似的东西

```
WITH DatesTable
AS
(
  SELECT CAST('2007-08-01' as datetime) AS [date]
  UNION ALL
  SELECT DATEADD(dd, 1, [date])
  FROM DatesTable
  WHERE DATEADD(dd, 1, [date]) <= '2007-08-31'
)
SELECT DT.[date]
FROM
   DatesTable DT 
   Left Outer Join Orders o on o.OrderDate = DT.[Date]

WHERE o.OrderDate is null

OPTION (MAXRECURSION 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:11:12.060

执行此操作的*跨数据库*方法是创建一个包含每个日期的行的表，然后将其左连接到您的明细表；空值是没有匹配的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:15:26.363

假设 SQL Server：

```
WITH Dts AS (
   SELECT DateAdd(day, V.number, '19970801') Dt
   FROM master.dbo.spt_values V
   WHERE V.type = 'P'
   AND V BETWEEN 1 AND 31
)
SELECT Dts.Dt
WHERE NOT EXISTS (
   SELECT *
   FROM
      Orders o 
      INNER JOIN Suppliers sup ON p.SupplierID = sup.SupplierID 
   WHERE
      sup.CompanyName = 'Tokyo Traders'
      AND Dts.Dt = o.OrderDat
) 
```

我在 CompanyName 上保留了您的情况，因为我认为您想要`Tokyo Traders`没有下订单的日子。

# php - 如何在 jQuery 变量中转义 JavaScript？

> ID：11657657
> 
> 赞同：0
> 
> 时间：2012-07-25T19:59:23.613
> 
> 标签：php, javascript, jquery, mysql

我正在开发一个 JavaScript/jQuery 可拖动小部件管理器。目前，这在手动移动容器并将排序值保存到数据库（通过 PHP）方面效果很好。我将这些放在一起是为了以一种简单的方式为客户定位各种广告区域。

现在的问题是，当我试图移动我的区域时，当区域内有 JavaScript 广告代码时，jQuery 会崩溃。失败点是当我试图选择类容器来获取区域的 id 时。

```
 var items=[];  
  $('.column').each(function(){  
      var columnId=$(this).attr('id');  
      $('.dragbox', this).each(function(i){ 
          var item={  
              id: $(this).attr('id'),  
              collapsed: 0,  
              order : i,  
              column: columnId  
          };  
          //Push item object into items array  
          items.push(item);  
      });  
  }); 
```

创建此数组后，它通过 JSON 传递给我的更新脚本。问题是当我有广告服务器代码时，没有任何东西被创建到数组中。这是它的外观示例（HTML）

```
<div class="dragbox" id="item1">
<h2><span class="configure" ><a href="#" >Configure</a></span>Handle 1</h2>
<div class="dragbox-content" >
    <!-- Panel Content Here -->
    <script type='text/javascript'><!--//<![CDATA[
var m3_u = (location.protocol=='https:'?'https://ads.mytestsite.com/_ads/delivery/ajs.php':'http://ads.mytestsite.com/_ads/delivery/ajs.php');
var m3_r = Math.floor(Math.random()*99999999999);
if (!document.MAX_used) document.MAX_used = ',';
document.write ("<scr"+"ipt type='text/javascript' src='"+m3_u);
document.write ("?zoneid=24");
document.write ('&cb=' + m3_r);
if (document.MAX_used != ',') document.write ("&exclude=" + document.MAX_used);
document.write (document.charset ? '&charset='+document.charset : (document.characterSet ? '&charset='+document.characterSet : ''));
document.write ("&loc=" + escape(window.location));
if (document.referrer) document.write ("&referer=" + escape(document.referrer));
if (document.context) document.write ("&context=" + escape(document.context));
if (document.mmm_fo) document.write ("&mmm_fo=1");
document.write ("'><\/scr"+"ipt>");
//]]>--></script><noscript><a href='http://ads.mytestsite.com/_ads/delivery/ck.php?n=a7d957c0&cb=&n=a7d957c0' border='0' alt='' /></a></noscript>

</div>
</div> 
```

如果我删除这些`'<script type='text/javascript'>'`东西似乎效果更好。我已经用`< / > ' " ! -- [`字符进行了一些测试，这些似乎都很好。

正如你所看到的，我只是想获取类容器的 id 并将其传递给 JSON，但内容在这个容器中，我认为这很麻烦。我还在 Firefox 中使用错误控制台进行了测试，它没有报告任何错误。

任何建议都非常感谢！

韩吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:13:12.927

每当浏览器在 javascript 解释过程中遇到 a`</script>`时，即使它在字符串中，它也会将其视为结束标记。

相关问题：[JavaScript 字符串中的脚本标记](https://stackoverflow.com/questions/1659749/script-tag-in-javascript-string)

> 一种常用的技术是使用连接运算符：
> 
> var test = '...... `</scr'+'ipt>`......';

# java - 具有安全性的 Barebonds Hello World 示例

> ID：11657660
> 
> 赞同：0
> 
> 时间：2012-07-25T19:59:37.570
> 
> 标签：java, spring, spring-mvc, spring-security, spring-webflow-2

我正在尝试设置一个带安全性的 Barebonds Hello World 示例。但我不断收到错误消息。

这是我的 web.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">
    <display-name>MyFlow</display-name>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>
 <context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>/WEB-INF/spring/root-config.xml</param-value>
 </context-param>

 <listener>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
 </listener>

 <servlet>
  <servlet-name>spring</servlet-name>
  <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
  <init-param>
    <param-name>contextConfigLocation</param-name>
    <param-value></param-value>
  </init-param>
  <load-on-startup>1</load-on-startup>
 </servlet>
 <servlet-mapping>
  <servlet-name>spring</servlet-name>
  <url-pattern>/</url-pattern>
 </servlet-mapping>
<filter>
<filter-name>springSecurityFilterChain</filter-name>
    <filter-class>
        org.springframework.web.filter.DelegatingFilterProxy
</filter-class>
</filter>
</web-app> 
```

这是我的 spring-security.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:security="http://www.springframework.org/schema/security"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/security http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <security:http>
        <security:form-login />
        <security:http-basic />
        <security:logout />
        <security:intercept-url pattern="/**" access="ROLE_MEMBER" />
    </security:http>

    <security:user-service id="userService">
        <security:user name="habuma" password="letmein"
            authorities="ROLE_MEMBER,ROLE_ADMIN" />
        <security:user name="twoqubed" password="longhorns"
            authorities="ROLE_MEMEBER" />
        <security:user name="admin" password="admin"
            authorities="ROLE_ADMIN" />
    </security:user-service>
</beans> 
```

以下是我的错误....请帮帮我：

> 2012-07-25 15:54:46,607 [pool-2-thread-1] 错误 org.springframework.web.context.ContextLoader - 上下文初始化失败
> 
> org.springframework.beans.factory.BeanCreationException：创建名为“org.springframework.security.filterChains”的bean时出错：设置bean属性“sourceList”时无法解析对bean“org.springframework.security.web.DefaultSecurityFilterChain#0”的引用带键 [0]；嵌套异常是
> 
> org.springframework.beans.factory.BeanCreationException：创建名为“org.springframework.security.web.DefaultSecurityFilterChain#0”的bean时出错：无法解析对bean“org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0”的引用使用键 [2] 设置构造函数参数；嵌套异常是
> 
> org.springframework.beans.factory.BeanCreationException：创建名为“org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0”的bean时出错：无法解析对bean“org.springframework.security.authentication.ProviderManager#0”的引用设置 bean 属性“authenticationManager”；嵌套异常是
> 
> org.springframework.beans.factory.BeanCreationException：创建名为“org.springframework.security.authentication.ProviderManager#0”的bean时出错：无法解析对bean“org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0”的引用设置构造函数参数；嵌套异常是
> 
> org.springframework.beans.factory.BeanCreationException：创建名为“org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0”的bean时出错：FactoryBean在创建对象时抛出异常；嵌套异常是
> 
> org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义名为“org.springframework.security.authenticationManager”的bean：您是否忘记在配置中添加一个全局元素（带有子元素）？或者，您可以在 和 元素上使用 authentication-manager-ref 属性。
> 
> 在 org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:328)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:16:06.440

我认为您错过了身份验证管理器声明（[请参阅 spring security docs](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/ns-config.html#ns-minimal)）

```
 <security:authentication-manager>
    <security:authentication-provider
        user-service-ref="userService" />
    </security:authentication-manager> 
```

# sqlite - MIN() 忽略 SQLite 中的空记录

> ID：11657661
> 
> 赞同：0
> 
> 时间：2012-07-25T19:59:39.357
> 
> 标签：sqlite

我有一个表 My_Values，它可能有一些缺失的记录；“缺失”是指记录的内容 = ''。

我想获得一些具有相同名称的行的最小值，但问题是，如果我使用这个：

```
SELECT MIN(my_value) FROM My_Values WHERE name LIKE 'John' 
```

它返回`''`。（一个空白字符串？术语？）

我知道 MIN() 应该忽略 NULL，但它似乎不会忽略 ''。编写查询以告诉它也忽略 '' 的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:24:44.157

`WHERE`在子句中添加额外的条件：

```
SELECT MIN(my_value) FROM My_Values WHERE name LIKE 'John' AND my_value != '' 
```

# java - Ant：从类路径中排除一个 jar。我想让它表现得好像它不存在

> ID：11657662
> 
> 赞同：4
> 
> 时间：2012-07-25T19:59:40.043
> 
> 标签：java, ant, jar, classpath

这是我的第一个 ant 项目，我似乎无法全神贯注。我想有效地删除 jar，然后在运行单元测试后将其恢复。我认为这可以用 exclude 命令来模拟。我也认为应该在`<classpath>`标签下完成。我的想法正确吗？我也希望这个 jar 仍然存在，我只是希望我的构建在我运行这个特定目标时忽略它。我试过这个：

```
<junit fork="no" showoutput="false" printsummary="yes" haltonfailure="false">
     <classpath>
         <fileset dir="${lib.dir}">
             <exclude name="**/*xmlparserv2.jar" />
          </fileset>
     </classpath>
</junit> 
```

但无济于事。谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:19:10.443

排除整个名称的匹配项，尝试：

```
<exclude name="**/*xmlparserv2.jar" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-08T21:29:44.330

我最终在测试期间移动了罐子。一开始，我将其删除，并在我的类路径的根目录中保留一个引用。然后最后，我把它复制回来：例如

```
<delete file="lib/xmlparserv2.jar"/>
<!--run lots of tests-->
<copy todir="lib" file="xmlparserv2.jar"/> 
```

# loops - JMeter，如何为交错控制器中的每个采样器循环一次

> ID：11657663
> 
> 赞同：5
> 
> 时间：2012-07-25T19:59:40.027
> 
> 标签：loops, jmeter

我正在使用 JMeter 自动化一些测试，并且我有一个非常基本的设置，包括登录和注销部分，然后是一些单独的测试。我想要的是让每个测试登录，做它的事情，然后注销。现在，所有测试都在交错控制器中，登录/退出部分在外面。如果我有 10 个测试，我将 ThreadGroup 设置为循环 10 次，一切都按我的预期工作。

但是，我们有 3 个人编写了他们自己的个人测试，这些测试应该进入交错控制器，并且测试的数量正在增长。通过手动计数来确保 ThreadGroup 循环的数量与测试的数量相匹配变得有点麻烦，我正在寻找一种方法来告诉 JMeter 循环的次数与 Interleave 控制器中的子项一样多。有什么建议么？

我也不介意尝试不同的结构，只要它做我想要的并且不强迫人们将登录/退出部分添加到每个测试中。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:50:32.633

关于什么：

*   使用测试片段在他们的单个测试计划中隔离登录/注销

*   每个用户都有自己的测试计划，并通过 IncludeController 使用前一个

*   他会使用 ModuleController 在他的测试中调用它们

我不确定这是正确的答案，但为了让它变得更好，请解释你在 3 人团队中要实现的目标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-20T19:09:12.593

虽然是一个老问题;-)如果我不得不这样做，我可能会这样解决它：

*   循环控制器 [永远]
    *   登录
        *   交错
            *   一次性控制器
                *   测试 1
            *   一次性控制器
                *   测试 2
            *   一次性控制器
                *   测试 x
            *   一次性控制器
                *   登出
                *   测试动作 [停止]
*   登出

将线程组设置为一个线程，运行一次。你会很高兴去的。最后一个测试将是空的（例如，它登录并再次注销）。如果这会成为一个问题，您可以考虑将测试操作添加到任何最后执行的测试中。

从我的角度来看，我不会像这样解决它。只需运行由不同团队成员创建的不同集合。无论如何，在一个 jmx 上工作是一种痛苦......

注意：我很想知道你是如何*解决*它的;-)

# asp.net-mvc - 将文件上传到 IIS 7

> ID：11657665
> 
> 赞同：0
> 
> 时间：2012-07-25T20:00:00.920
> 
> 标签：asp.net-mvc, file-upload, iis-7

在我的 .net MVC3 Web 应用程序中，我试图将 xlsx 文件上传到根目录下的特定文件夹。它在本地工作。在我的网络服务器（IIS 7）上它不起作用。我已经采取的步骤： 1.我将AppPool的Identity设置为ApplicationPoolIdentity；2\. 在 IIS 管理器中，我向用户添加了 DefaultAppPool 和特定的 MyAppPool，并授予他们对特定文件夹的写入权限。

如果我在从服务器本身浏览时尝试上传文件 - 它工作正常。

你能帮我找出问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:25:16.160

~~我会为另一个选项整理一些东西。~~同时，您是否尝试过使用模拟？

请执行下列操作：

在有权访问相关文件夹的服务器上创建一个用户。

把它放在你的 web.config 文件中：

```
<identity impersonate="true" userName="ServerName\UserName", password="Password" /> 
```

其中 ServerName 是您的服务器的名称，Username 是您创建的用户，Password 是相关密码。

有关模拟的更多信息在这里：

[http://msdn.microsoft.com/en-us/library/aa292118(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa292118(v=vs.71).aspx)

# jquery - wait dynamically inserted content to exist

> ID：11657672
> 
> 赞同：0
> 
> 时间：2012-07-25T20:00:13.750
> 
> 标签：jquery, ajax

I am doing an simple get request to get a page which has scripts that dynamically insert content.

When I try to do

```
$.ajax({
   url: url,
   type: "GET",
   success: function(data, status, xhr){
      // triggered before dynamically inserted content is added
   },
   error: function(xhr, status, error) {
      console.log(error); 
   }
}); 
```

The success callback function is triggered and the data returned doesn't contain the dynamically inserted content. Is it possible to wait for it to be loaded? If so, any idea how?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:18:34.220

If i understood correctly the page you are fetching via get contains js code in it that issues other ajax requests whose completion you need to wait for before doing additional stuff. In that case, the best way is to have a callback function defined in your main page which you call from the success handler of the ajax call in your internal page.

If you have control over the content of the second site, you can include in it a script from the main domain. Code in this script should be able to call your callback function without cross domain security issues.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:01:32.003

No, you need to add your content *in* the `success` callback function:

```
$.ajax({
   url: url,
   type: "GET",
   success: function(data, status, xhr){
      // insert dynamic content HERE
   },
   error: function(xhr, status, error) {
      console.log(error); 
   }
}); 
```

JavaScript isn't designed to "wait" because the wait takes an indefinite amount of time and it would prevent the rest of the browser from processing. If you created an infinite loop, for example, that just sits and waits, your web browser would freeze.

**UPDATE**

Be sure you are calling your `ajax` method inside the `ready` event. This will ensure that the document is loaded first.

```
$(document).ready(function(){
    // Your JS here
}); 
```

# c++ - C++ wxwidgets 比较 wxstrings

> ID：11657675
> 
> 赞同：0
> 
> 时间：2012-07-25T20:00:34.987
> 
> 标签：c++, compare, wxwidgets, codeblocks, wxstring

我正在尝试比较 wxstrings 以确定我的程序将做什么。我正在比较的字符串基于我正在读取的文件，并且是文件中的唯一行。

我正在使用激活 wxSmith 的代码块。

这是我正在尝试开始工作的程序部分。

```
void Disc_MasterFrame::OncdiscClick(wxCommandEvent& event)
{
    system("sh detect-disc.sh");

    wxString file;
    file << wxT("detect-disc");
    wxTextFile tfile;
    tfile.Open(file);
    detectdiscw=tfile.GetFirstLine();

    //std::ifstream myfile ("detect-disc");
    //getline (myfile,detectdisc);
    //myfile.close();

    cd << wxT("An audio cd was inserted.");
    dvd << wxT("A dvd was inserted.");

    if (detectdiscw == cd){
        //musicrip->Show();
        //this->Disc_MasterFrame::ripmusic();
        void ripmusic();
    }
    else if (detectdiscw == dvd)
    {
        manipdvd->Show();
        void dvdmanip();
    }
}

void Disc_MasterFrame::ripmusic()
{
    musicrip->Show();
    system("sh disc-info.sh");
    ... 
```

单击按钮时，脚本应该运行，因为它使用 cdde 命令（linux/ubuntu cli 程序）生成一个文件。此命令的结果是“插入了音频 cd”。所以我在测试时有一致性。

然后它打开并读取文件并尝试将其与两个预定义的字符串进行比较。一旦完成，它应该“显示”已经创建的两个面板之一。

我很确定我做错了什么，因为它只是在单击按钮后坐在那里。

任何帮助或指导将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-11T08:05:50.710

The problem lies within your lines

```
void ripmusic(); 
```

and

```
void dvdmanip(); 
```

You intend to call these functions, but those are **function declarations**, not function calls. In other words, they do nothing. Your functions `ripmusic` and `dvdmanip` are never called.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-10T00:26:56.510

在 wxString 中，<< 将字符串附加到现有值（类似于 + 的作用，但如果需要，可以进行方便的类型转换）。我不确定这是你真正想要做的。如果要为字符串分配新值，则应将 << 替换为 =

# scala - 定义闭包时，Scala 如何维护变量的值？

> ID：11657676
> 
> 赞同：15
> 
> 时间：2012-07-25T20:00:36.903
> 
> 标签：scala, closures

scala 是否通过复制或引用来维护变量的值？

例如，在 Ruby 中，“闭包实际上会延长它需要的所有变量的生命周期。它不会复制它们，但会保留对它们的引用，并且变量本身将不符合垃圾回收的条件（如果语言有垃圾收集）而关闭时“。[斯科尔金]

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-25T21:26:57.550

jvm 没有闭包，它只有对象。scala 编译器为代码中每次出现的闭包生成匿名类，实现适当的 Function 特征（取决于签名的参数和结果类型）。

例如，如果对于 some `l : List[Int]`，你写`l.map(i => i + 1)`，它将被转换为

```
class SomeFreshName extends Function[Int, Int] {
  def apply(i: Int) = i + 1
}

l.map(new SomeFreshName()) 
```

在这种情况下，没有真正的闭包，因为在 i => i + 1 中，没有自由变量，只有参数 i 和常量。

如果你关闭了一些局部变量，或者等效的函数参数，它们必须作为构造函数参数传递给闭包实现类：

对于`l.map(i => s + i)`哪里 s 是字符串参数或方法的本地，它会做

```
class SomeFreshName(s: String) extends Function[Int, String] {
  def apply(i: Int) = s + i
}
l.map(new SomeFreshName(s)) 
```

根据需要在构造函数中传递尽可能多的参数。

注意：如果 s 是类的字段而不是方法的局部字段，那么`s + i`实际上是`this.s + i`，并且`this`会被传递给匿名类。

垃圾收集器没有什么特别的（同样，jvm 不知道闭包），简单地说，由于闭包对象具有对 s 的引用，因此 s 将至少与闭包对象一样长。

请注意，在带有匿名类的 java 语言中也会发生完全相同的事情。当匿名类使用封闭方法的局部变量时，这些局部变量会被默默地添加为匿名类的字段，并在构造函数中传递。

在 java 中，只有当本地 are 时才允许这样做`final`，这相当于 scala `val`，而不是`var`.

事实上，通过这个实现，一旦创建了闭包，它就有自己的变量副本，它关闭了其他变量。如果它修改它们，这些修改将不会反映在方法中。如果它们在闭包中被修改，这将不会反映在方法中。

假设你写

```
var i = 0
l.foreach{a => println(i + ": " + a); i = i + 1}
println("There are " + i + " elements in the list") 
```

之前描述的实现将是

```
class SomeFreshName(var i: Int) extends Int => Unit {
   def apply(a: Int) = println(i + ": " + a); i = i + 1
}
var i = 0
l.foreach(new SomeFreshName(i)
println("There are " + i + " elements in the list") 
```

这样做，将有两个变量`i`，一个在方法中，一个在`SomeFreshName`. 只有 SomeFreshName 中的那个会被修改，最后一个 println 总是会报告 0 个元素。

Scala 通过用引用对象替换闭包中的 var 来解决他的问题。给定一个班级

```
class Ref[A](var content: A) 
```

代码首先被替换为

```
val iRef = new Ref[Int](0)
l.foreach{a => 
  println(iRef.content + ": " + a); 
  iRef.content += iRef.content + 1
}
println("There are " + i + " elements in the list") 
```

这当然只针对恰好被闭包占用的 var，而不是针对每个 var。这样做，var 已被 val 替换，实际变量值已移入堆中。现在，关闭可以像往常一样完成，并且可以正常工作

```
class SomeFreshName(iRef: Ref[Int]) ... 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-07-25T20:12:46.530

Scala 中的闭包也不会深度复制对象，它们只会保留对该对象的引用。此外，闭包没有自己的词法范围，而是使用周围的词法范围。

```
class Cell(var x: Int)
var c = new Cell(1)

val f1 = () => c.x /* Create a closure that uses c */

def foo(e: Cell) = () => e.x
  /* foo is a closure generator with its own scope */

val f2 = foo(c)    /* Create another closure that uses c */

val d = c          /* Alias c as d */
c = new Cell(10)   /* Let c point to a new object */
d.x = d.x + 1      /* Increase d.x (i.e., the former c.x) */

println(f1())      /* Prints 10 */
println(f2())      /* Prints 2 */ 
```

我无法评论垃圾收集，但我假设 JVM 的垃圾收集器不会删除由闭包引用的对象，只要该闭包仍然被引用。

# android - Android ICS：无法处理回调；接口未实现，回调：android.view.View$PerformClick@40d80cc8

> ID：11657677
> 
> 赞同：2
> 
> 时间：2012-07-25T20:00:40.290
> 
> 标签：android, android-button

我在 ICS 设备上遇到了非常奇怪的行为。我在布局中有一个按钮，然后单击 Listener，如下所示。

```
 @Override
  public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button b = (Button) findViewById(R.id.button1);
    b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
        // To just demonstrate weird behavior, i am throwing run-time exception 
         throw new RuntimeException("testing weird behavior on ICS");

         //String s = null;   s.length(); You can try this , application does not crash.
        } 
    });
} 
```

在正常情况下，这应该会使应用程序崩溃，但令人惊讶的是，我可以在 logcat 中看到如下所示的崩溃，但应用程序不会崩溃。而是我看到

```
Failed to handle callback; interface not implemented, callback:android.view.View$PerformClick@40d80cc8
java.lang.RuntimeException: testing weird  behaviour
     at com.example.sampleproject.MainActivity$1.onClick(MainActivity.java:21)
     at android.view.View.performClick(View.java:3538)
     at android.view.View$PerformClick.run(View.java:14330)
     at android.os.Handler.handleCallback(Handler.java:608)
     at android.os.Handler.dispatchMessage(Handler.java:92)
     at android.os.Looper.loop(Looper.java:154)
     at android.app.ActivityThread.main(ActivityThread.java:4977)
     at java.lang.reflect.Method.invokeNative(Native Method)
     at java.lang.reflect.Method.invoke(Method.java:511)
     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
     at dalvik.system.NativeStart.main(Native Method) 
```

任何想法为什么我会遇到这种奇怪的行为，任何帮助表示赞赏。

根据@Jen 的建议，我尝试了 b.performClick(); ，并且应用程序显示正常行为，但在 onClickListener 中的行为仍然相同。

我在这里提交的错误是链接 [http://code.google.com/p/android/issues/detail?id=35517&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars](http://code.google.com/p/android/issues/detail?id=35517&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:16:29.950

您是否正在检查按钮`b`是否为空？正如logcat所说`java.lang.NullPointerException`，奇怪的是你遇到了这个问题，我通常是这样的：

```
_btnFoo = (Button)findViewById(R.id.btnFoo);
if (_btnFoo != null){
   _btnFoo.setOnClickListener(new OnClickListener(){
      @Override
      public void onClick(View v){
         ....
      }
   });
} 
```

它的空指针异常像拇指酸痛一样突出，所以周围没有初始化一些东西。

**编辑：** 由于我的回答不够充分，我想挖掘来源，取自 ICS 4.0.3 repo，这是在此处找到的代码的一部分，位于第 14103 行`frameworks/base/core/java/android/view/View.java`

```
private final class PerformClick implements Runnable {
    public void run() {
        performClick();
    }
} 
```

该方法的核心在同一来源的第 3505 行中找到：

```
public boolean performClick() {
        sendAccessibilityEvent(AccessibilityEvent.TYPE_VIEW_CLICKED);

        ListenerInfo li = mListenerInfo;
        if (li != null && li.mOnClickListener != null) {
            playSoundEffect(SoundEffectConstants.CLICK);
            li.mOnClickListener.onClick(this);
            return true;
        }

        return false;
    } 
```

~~我的猜测是`Runnable`内部是有问题的，`PerformClick`因为它似乎是跨线程的，没有任何暗示`runOnUiThread`或类似的保护措施。~~

~~我会在上一句中强调这一点——我会放一个开放式问号，并在单词的意义上松散地使用它，而不是从字面上理解。~~

Jen 的评论被证明是正确的，如下所示，取自第 3010 行：

```
case R.styleable.View_onClick:
    if (context.isRestricted()) {
        throw new IllegalStateException("The android:onClick attribute cannot "
                + "be used within a restricted context");
    }

    final String handlerName = a.getString(attr);
    if (handlerName != null) {
        setOnClickListener(new OnClickListener() {
            private Method mHandler;

            public void onClick(View v) {
                if (mHandler == null) {
                    try {
                        mHandler = getContext().getClass().getMethod(handlerName,
                                View.class);
                    } catch (NoSuchMethodException e) {
                        int id = getId();
                        String idText = id == NO_ID ? "" : " with id '"
                                + getContext().getResources().getResourceEntryName(
                                    id) + "'";
                        throw new IllegalStateException("Could not find a method " +
                                handlerName + "(View) in the activity "
                                + getContext().getClass() + " for onClick handler"
                                + " on view " + View.this.getClass() + idText, e);
                    }
                }

                try {
                    mHandler.invoke(getContext(), View.this);
                } catch (IllegalAccessException e) {
                    throw new IllegalStateException("Could not execute non "
                            + "public method of the activity", e);
                } catch (InvocationTargetException e) {
                    throw new IllegalStateException("Could not execute "
                            + "method of the activity", e);
                }
            }
        });
    }
    break; 
```

在第 3452 行，该`setOnClickListener`方法是注册回调的地方，如下所示：

```
public void setOnClickListener(OnClickListener l) {
    if (!isClickable()) {
        setClickable(true);
    }
    getListenerInfo().mOnClickListener = l;
} 
```

OP 的问题的答案是框架中存在一个错误，正如 Jens 简洁地说*的那样，至少在错误处理方面存在差异。通常不应该抛出异常`onClick`- 但我可以想象，如果在点击处理程序中执行大量工作的应用程序没有报告强制关闭，这将使“在野外”追踪错误变得更加困难.*

# codeigniter - 如何通过 CURL 将图像上传到 Codeigniter REST API

> ID：11657678
> 
> 赞同：2
> 
> 时间：2012-07-25T20:00:42.413
> 
> 标签：codeigniter, rest, curl

我在 Codeigniter 中使用 REST API 并尝试设置图像上传方法。我已经成功地使用多部分表单上传，但使用下面的 REST 客户端出现文件类型错误。我认为问题是“file_type”显示为“application/octet-stream”。

（Codeigniter 上传：[http](http://codeigniter.com/user_guide/libraries/file_uploading.html) ://codeigniter.com/user_guide/libraries/file_uploading.html ）

休息方法

```
function do_upload_post()
{
    $config['upload_path'] = './savefiles/';
    $config['allowed_types'] = 'gif|jpg|png';
    $config['max_size'] = '100';
    $config['max_width']  = '1024';
    $config['max_height']  = '768';
    $this->load->library('upload', $config);

    if ( ! $this->upload->do_upload() )
    {
        print_r($this->upload->display_errors('', ''));
        print_r($this->upload->data());
    }
} 
```

REST 客户端

```
function curl_upload(){
    $url = 'http://localhost/api/file/do_upload';
    $file = 'C:\inetpub\wwwroot\ds_site\designs\pics\file.jpg';
    $ch = curl_init($url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST, true);
    $post = array(
        "userfile" => "@$file"
    );
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post); 
    $response = curl_exec($ch);
    echo $response;

    curl_close($ch);
} 
```

输出

```
The filetype you are attempting to upload is not allowed.
Array
(
    [file_name] => aliens.jpg
    [file_type] => application/octet-stream
    [file_path] => C:/inetpub/wwwroot/ds_site/savefiles/
    [full_path] => C:/inetpub/wwwroot/ds_site/savefiles/aliens.jpg
    [raw_name] => aliens
    [orig_name] => 
    [client_name] => aliens.jpg
    [file_ext] => .jpg
    [file_size] => 103745
    [is_image] => 
    [image_width] => 
    [image_height] => 
    [image_type] => 
    [image_size_str] => 
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:20:32.843

看来我需要定义文件类型。

```
"userfile" => "@$file;type=image/jpeg" 
```

# html - 在 contenteditable 元素中创建可点击的 URL

> ID：11657681
> 
> 赞同：1
> 
> 时间：2012-07-25T20:00:56.013
> 
> 标签：html, hyperlink, contenteditable

我必须在我的 HTML 页面上创建一个区域，其中将显示从数据库加载的文本。它将具有需要可点击的 URL。此外，用户必须能够编辑此文本（不需要将其保存到数据库或任何东西，现在只需编辑）。到目前为止，我在表格单元格中有一个 contenteditable div：

`<td> <div contentEditable="true"> <c:out "whatever" escapeXML="false"/> </div></td>`

还有一个 javascript 方法可以解析任何 http:// 或 www。词成链接：经过测试，有效。这几乎可以工作；文本已加载，该字段是可编辑的，并且链接变为粗体，变为蓝色等，但是当我将鼠标悬停在无法点击的链接上时。有谁知道问题是什么，是否有一个简单的解决方法来实现我需要的？

# python - Django 管理界面：使用带有内联 ManyToMany 字段的 Horizo ntal_filter

> ID：11657682
> 
> 赞同：27
> 
> 时间：2012-07-25T20:00:57.827
> 
> 标签：python, django, django-admin

我有一个想要内联的 Django 模型字段。字段是多对多的关系。所以有“项目”和“用户配置文件”。每个用户配置文件都可以选择任意数量的项目。

目前，我已经让“表格”内联视图正常工作。有没有办法拥有“水平过滤器”，以便我可以轻松地从用户配置文件中添加和删除项目？

请参阅附图中的示例。![在此处输入图像描述](../Images/ccf96badbbb94b523979660817c6b44d.png)

这是用户配置文件的模型代码：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User, unique=True)
    projects = models.ManyToManyField(Project, blank=True, help_text="Select the projects that this user is currently working on.") 
```

以及项目的模型代码：

```
class Project(models.Model):
    name = models.CharField(max_length=100, unique=True)
    application_identifier = models.CharField(max_length=100)
    type = models.IntegerField(choices=ProjectType)
    account = models.ForeignKey(Account)
    principle_investigator = models.ForeignKey(User)
    active = models.BooleanField() 
```

以及视图的管理代码：

```
class UserProfileInline(admin.TabularInline):
    model = UserProfile.projects.through
    extra = 0
    verbose_name = 'user'
    verbose_name_plural = 'users'

class ProjectAdmin(admin.ModelAdmin):
    list_display = ('name', 'application_identifier', 'type', 'account', 'active')
    search_fields = ('name', 'application_identifier', 'account__name')
    list_filter = ('type', 'active')
    inlines = [UserProfileInline,]
admin.site.register(Project, ProjectAdmin) 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-25T20:36:40.290

问题不在于内联；一般来说，它来自`ModelForm`工作方式。他们只为模型上的实际字段构建表单字段，而不是相关的经理属性。但是，您可以将此功能添加到表单中：

```
from django.contrib.admin.widgets import FilteredSelectMultiple

class ProjectAdminForm(forms.ModelForm):
    class Meta:
        model = Project

    userprofiles = forms.ModelMultipleChoiceField(
        queryset=UserProfile.objects.all(),
        required=False,
        widget=FilteredSelectMultiple(
            verbose_name='User Profiles',
            is_stacked=False
        )
    )

    def __init__(self, *args, **kwargs):
        super(ProjectAdminForm, self).__init__(*args, **kwargs)
            if self.instance.pk:
                self.fields['userprofiles'].initial = self.instance.userprofile_set.all()

    def save(self, commit=True):
        project = super(ProjectAdminForm, self).save(commit=False)  
        if commit:
            project.save()

        if project.pk:
            project.userprofile_set = self.cleaned_data['userprofiles']
            self.save_m2m()

        return project

class ProjectAdmin(admin.ModelAdmin):
    form = ProjectAdminForm
    ... 
```

一个小演练可能是为了。首先，我们定义一个`userprofiles`表单域。它将使用 a `ModelMultipleChoiceField`，默认情况下会产生一个多选框。由于这不是模型上的实际字段，我们不能只将其添加到 中`filter_horizontal`，因此我们改为告诉它简单地使用相同的小部件，`FilteredSelectMultiple`如果它在 中列出，它将使用`filter_horizontal`。

我们最初将查询集设置为整个`UserProfile`集合，您不能在这里过滤它，但是，因为在类定义的这个阶段，表单还没有被实例化，因此还没有`instance`设置它。因此，我们重写`__init__`，以便我们可以将过滤后的查询集设置为字段的初始值。

最后，我们重写该`save`方法，以便我们可以将相关管理器的内容设置为与表单的 POST 数据中的内容相同，您就完成了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-30T22:07:22.473

在处理与其自身的多对多关系时的一个小补充。人们可能希望将自己排除在选择之外：

```
if self.instance.pk:
        self.fields['field_being_added'].queryset = self.fields['field_being_added'].queryset.exclude(pk=self.instance.pk)
        self.fields['field_being_added'].initial = """Corresponding result queryset""" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-10T12:25:47.487

有一个更简单的解决方案，只需添加[，](https://stackoverflow.com/a/8043918/4191904)`filter_horizontal`如下所述：

```
class YourAdmin(ModelAdmin)
    filter_horizontal = ('your_many_to_many_field',) 
```

前：[![在此处输入图像描述](../Images/18272cc71b14b5e130820987264505de.png)](https://i.stack.imgur.com/8zu6F.png)

后：[![在此处输入图像描述](../Images/ec9d05e2b34a74c3e68f17d9d7982e51.png)](https://i.stack.imgur.com/WyhBg.png)

# sql - 用于订单的索引列

> ID：11657685
> 
> 赞同：4
> 
> 时间：2012-07-25T20:01:05.250
> 
> 标签：sql, indexing, sql-order-by

可以说我有以下查询：

```
SELECT * FROM table WHERE id = 1 ORDER BY name 
```

为名称添加多列索引（id 和名称）还是单独索引更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:14:20.070

这取决于 的基数`id`。如果它具有高基数（意味着很少有行共享相同的值`id`），则索引`id`是一个好主意。数据库将`id`在基表中查找并查找少数匹配的行。

如果一半的表具有相同`id`的 ，则查询将导致索引扫描。请注意，由于您使用的是`*`，因此不会使用多列索引，除非它包含表中的所有列。因此，只有使用包含排序的所有列的索引才能更快地完成此操作`(name)`。

归根结底，最好不要创建索引，直到遇到特定的性能问题。具体细节将允许您测试和衡量您提出的索引是否有效。这几乎总是比试图猜测正确的索引要好。

# jquery - 在运行时更改 jQuery Mobile 按钮的字体大小

> ID：11657687
> 
> 赞同：2
> 
> 时间：2012-07-25T20:01:24.207
> 
> 标签：jquery, mobile, button, font-size

jQuery Mobile 1.1.1 改变了按钮的形成方式。以前，我可以像这样设置按钮的字体大小：

```
<div id="Button1" data-role='button' data-inline=true data-theme=c 
 data-icon=false data-iconpos=none style="font-size:12px;">Button</div> 
```

字体大小属性在 1.1.1 中被忽略。它使用默认字体大小（16px？）绘制。我可以通过添加这行代码来更改字体大小：

```
$('#Button1').children().children().css('font-size','12px'); 
```

但现在文本的垂直对齐已关闭：它与原始字体大小文本的下边界对齐。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-24T10:48:21.720

这设置字体大小：

```
$('#Button1').children().children().css('font-size','12px') 
```

要使文本居中，您还需要更改填充：

```
$('#Button1').children().css('padding','6px') 
```

（使用 jQuery Mobile 1.2 测试）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:04:56.530

我认为字体大小的冲突可能与 jQuery Mobile 1.1.1 设置的任何行高有关。这会解决它吗？

```
$('#Button1').children().children().css('font-size','12px').css('line-height','12px'); 
```

**编辑**- 尝试在 CSS 中为 #B​​utton 元素的所有子元素设置 line-height：

```
#Button1 *
{
    font-size:12px !important;
    line-height:12px !important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T17:10:04.993

到目前为止我发现的另一个解决方案是添加 { padding: 5px; } 用于特定按钮。这有效，文本垂直对齐，但按钮文本周围出现第二层。不知道如何摆脱它。

[请参阅讨论解决方案的](https://forum.jquery.com/topic/change-button-size)此线程。

# matlab - 如何从多个 .dat 文件（或多个 2d 图形）绘制 3d 图形？

> ID：11657691
> 
> 赞同：0
> 
> 时间：2012-07-25T20:01:39.213
> 
> 标签：matlab, graph, 3d, 2d, data-files

在我的项目中，我基本上需要使用 MATLAB 从多个 .dat 文件“一种文本文件”中获取输入来绘制 3D 彩色编码曲面图。每个 .dat 文件都包含一个 REFLECTION R wrt 的值列表，以启动角度 theta。每个文件都针对特定的 lambda 值（波长）。因此，通过获取多个 .dat 文件，我需要进行绘图。MATLAB 中的 3D 图形，其中 x 轴是 theta，y 轴是 REFLECTION R，z 是 lambda，这对于不同的文件是不同的。每个 .dat 文件都为我提供了 theta 与 REFLECTION R 的 2D 图。每个 2D 图根据 lambda 值而有所不同。我不知何故需要使用不同的 lambda 值作为 z 轴来绘制 3D 图。

在某种程度上，在每个文件中我都有参数 x 和 y，当我获取多个文件时，每个文件都有不同的 z 值，我最终可以绘制一个 2D 图形。那么有谁知道如何从这些多个 .dat 文件中获取输入并在 MATLAB 中绘制 3D 图？

我希望我足够清楚，如果不能随意问你的疑问，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T00:18:30.987

如果您可以提供数据，那么提供帮助会更容易，因为数据的组织方式很重要。尽管如此，这是一个镜头。

我理解的问题是：如果我有多个文件，每个文件都将 theta 和 R 关联到单个 lambda 值，我如何生成所有这些的 3d 图？我将假设每个文件都包含相同的 theta 值。这有点复杂，但如果他们不这样做，那就直截了当。

例如，假设您有三个文件：

*   λ=100：θ1 = [15 30 45 60 75]，R1 = [49 56 61 65 67]
*   λ=200：θ2 = [15 30 45 60 75]，R2 = [41 50 57 62 66]
*   λ=300：θ3 = [15 30 45 60 75]，R3 = [34 45 53 60 65]

在这种情况下，您可以使用 meshgrid 构造 x 和 y 向量并连接 R 值。然后您可以使用任意数量的 3d 绘图命令进行绘图。我显示网格。

```
[theta, lambda] = meshgrid(theta1, [100 200 300]);
R = [R1; R2; R3];
mesh(theta,lambda,R)
xlabel('theta')
ylabel('lambda')
zlabel('R') 
```

![示例网格图](../Images/6ff36502e8b1cfd7f82264dd87db2182.png)

如果我有很多文件，我会通过使用列出目录内容并遍历每个文件的脚本摄取所有文件来自动执行此操作，但您可以手动设置所有文件。这可能看起来像（改编自我的一个文件）：

```
fileNameArray = dir('*.dat');
for i = 1:length(fileNameArray)
    datStruct = importdata(datStruct(i).name;
    theta(:,i) = datStruct.data(:,1);
    R(:,i) = datStruct.data(:,2);
end 
```

这假设数据在列中。将 theta 和 R 放入矩阵中可以检查 theta 并确保所有条目都相同。

我还建议查看 MATLAB 文档中的[3-D 可视化](http://www.mathworks.com/help/techdoc/visualize/bqliccy.html)，尤其是[创建 3-D 图形](http://www.mathworks.com/help/techdoc/visualize/f0-5799.html)。当我开始时，我浏览了很多次。

# iphone - 覆盖ios中UItable View Cell中的内容

> ID：11657695
> 
> 赞同：0
> 
> 时间：2012-07-25T20:01:57.450
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

在我的表格视图单元格中，我需要在单个单元格中显示我的数组元素的内容，如果我插入任何新内容，则不会覆盖以前的内容。以前的内容和我的新内容应该按顺序显示。这里是我的代码

```
- (void)viewDidLoad
{
[super viewDidLoad];

NSArray *arr=[NSArray arrayWithObjects:cnfqty,cnftitle,cnfrate, nil];

//cnfqty,cnftitle,cnfrate are NSString

finarray=[[NSMutableArray alloc]init];
[finarray addObjectsFromArray:arr];
NSLog(@"%@",finarray);

}

- (void)viewDidUnload
{
[super viewDidUnload];

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{

// Return the number of sections.
return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
// Return the number of rows in the section.
return [finarray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

{
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    UILabel *lab=[[UILabel alloc]initWithFrame:CGRectMake(0, 0, 40, 20)];
    lab.text=[finarray objectAtIndex:indexPath.row];
    [cell.contentView addSubview:lab];

}
// Configure the cell...

return cell;
} 
```

我的代码面临的问题是每个字符串都显示在每个单元格中，如果我插入任何新字符串，以前的内容就会消失，只显示新内容。

为了清楚地了解这个问题，我正在尝试为在线购物实施“添加到购物车”服务。根据概念，必须从各种产品中添加项目，它会保存产品信息，并且必须在表格视图中显示详细信息.但我不明白..

请指导..提前谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T11:52:03.467

*   (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    ```
     UITableViewCell *cell = (UITableViewCell*)[self.YourTableName dequeueReusableCellWithIdentifier:nil];        
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil];
    }

        return cell; 
    } 
    ```

    使用 ReusablecellIdentifier nil 使其正常工作.....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:17:00.543

不确定您的 cellForRowAtIndexPath 是否正确。看起来您没有检查单元格是否为零。如果你是（不知何故在括号内），那么你似乎只是在 if(cell == nil) 语句中更新 lab.text 。

它可能应该更像以下内容：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{ 
    static NSString *CellIdentifier = @"Cell";
    UILabel *lab; 
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];  

    if(cell == nil){
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];      
        lab=[[UILabel alloc]initWithFrame:CGRectMake(0, 0, 40, 20)];
        lab.tag = 1; // Really any arbitraty number
        [cell.contentView addSubview:lab];  
    }else{
        lab = [cell.contentView viewWithTag:1]
    }

    // Configure the cell... 
    lab.text=[finarray objectAtIndex:indexPath.row];      

    return cell; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T20:13:14.790

你的代码`cellForRowAtIndexPath`有点不对劲。您应该在初始化之前检查单元格是否为零。好像您从某处复制了括号，但忽略了条件。

除此之外，您没有代码可以更改要重用的单元格的单元格标签。您只需将文本设置在新文本上。一个容易跟踪标签以重复使用它的方法是给它一个标签。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  static NSString *CellIdentifier = @"Cell";
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
  if(cell == nil)
  { // set up brand new cell
      cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
      UILabel *lab=[[UILabel alloc]initWithFrame:CGRectMake(0, 0, 40, 20)];
      lab.tag = 150; // some int you can keep track of, possibly make it a define.
      [cell.contentView addSubview:lab];
  }
  // configure cell
  UILabel *cellLabel = (UILabel *)[cell.contentView viewWithTag:150]; // there's that tag again
  cellLabel.text = [finarray objectAtIndex:indexPath.row];
  return cell;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T20:15:58.487

让你的“finarray”在每个对象中存储一个数组（我的意思是你需要一种二维数组）。`cellForRowAtIndexPath`您将从 中提取数组，并在提取的`finarray`数组中`indexPath.row`循环以填充您的内容。finarray 中的每个数组第一次将仅包含 1 个对象。通过更改单元格中的内容，您实际上将在位于已编辑单元格索引处的数组中添加一个对象。然后，通过重新加载数据，表格将显示新添加的数据。确保管理已编辑单元格的行高，因为它们需要增加。

```
- (void)viewDidLoad
{
[super viewDidLoad];

//bla bla bla whatever you had here

NSMutableArray *arr1=[NSMutableArray arrayWithObjects:cnfqty, nil];
NSMutableArray *arr2=[NSMutableArray arrayWithObjects:cnftitle, nil];
NSMutableArray *arr3=[NSMutableArray arrayWithObjects:cnfrate, nil];

NSMutableArray *arrMain=[NSMutableArray arrayWithObjects:arr1, arr2, arr3, nil];

finarray=[[NSMutableArray alloc]init];
[finarray addObjectsFromArray:arr];

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

//bla bla bla the code to initiate the cell

NSArray *tmpArray = [finarray objectAtIndex:indexPath.row];

for(int i = 0; i<tmpArray.count;i++){
  //create the label
  //set the frame, making sure that origin.y is multiplied by "i"
  //set label's text as [tmpArray objectAtIndex:i]
  //add the label to cell
}

return cell;
} 
```

# php - 正则表达式返回预期结果加上另一行的换行符

> ID：11657697
> 
> 赞同：1
> 
> 时间：2012-07-25T20:02:05.017
> 
> 标签：php, regex, csv

在开始之前，我知道这是 CSV，并且我知道有一个内置 PHP 的函数。我得到了以下模式：

`preg_match_all("/([^\"]|\"[^\"]*\")*?(r\n|\n\r|\r|\n)/i", $CSV, $Matches);`

谁会解析这样的东西：

```
Country,Region/State,City,"Zip/Postal Code\n From","Zip/Postal Code To","Weight From","Weight To","Shipping Price","Delivery Type"\n\r
CAN,*,,,,0.0000,4999.0000,29.7500,Priority\n\r
CAN,*,,,,10000.0000,19999.0000,35.5000,Express\n\r
CAN,*,,,,0.0000,4999.0000,19.7500,Express\n\r
CAN,*,,,,20000.0000,99999999.9999,59.0000,Priority\n\r
CAN,*,,,,5000.0000,9999.0000,34.7500,Priority\n\r
CAN,*,,,,20000.0000,99999999.9999,41.5000,Express\n\r
CAN,*,,,,5000.0000,9999.0000,24.4500,Express\n\r
CAN,*,,,,10000.0000,19999.0000,48.0000,Priority\n\r
CAN,*,,,,10000.0000,19999.0000,29.7500,Standard\n\r
CAN,*,,,,20000.0000,99999999.9999,36.5000,Standard\n\r
CAN,*,,,,500.0000,9999.0000,20.3500,Standard\n\r
CAN,*,,,,90.0000,499.0000,9.7500,Standard\n\r
CAN,*,,,,50.0000,89.0000,1.8000,Standard\n\r
CAN,*,,,,30.0000,49.0000,1.5000,Standard\n\r
CAN,*,,,,0.0000,29.0000,1.0000,Standard\n\r
USA,*,,,,20000.0000,99999999.9999,160.0000,Express\n\r
USA,*,,,,10000.0000,14999.0000,76.0000,Express\n\r
USA,*,,,,1000.0000,4999.0000,42.0000,Express\n\r
USA,*,,,,15000.0000,19999.0000,155.0000,Priority\n\r
USA,*,,,,5000.0000,9999.0000,94.0000,Priority\n\r
USA,*,,,,0.0000,999.0000,75.5000,Priority\n\r
USA,*,,,,15000.0000,19999.0000,98.0000,Express\n\r
USA,*,,,,5000.0000,9999.0000,61.5000,Express\n\r
USA,*,,,,0.0000,999.0000,40.0000,Express\n\r
USA,*,,,,20000.0000,99999999.9999,230.0000,Priority\n\r
USA,*,,,,10000.0000,14999.0000,120.0000,Priority\n\r
USA,*,,,,1000.0000,4999.0000,61.5000,Priority\n\r
USA,*,,,,500.0000,999.0000,25.5000,Standard\n\r
USA,*,,,,90.0000,499.0000,13.3500,Standard\n\r
USA,*,,,,50.0000,89.0000,3.0000,Standard\n\r
USA,*,,,,30.0000,49.0000,1.8000,Standard\n\r
USA,*,,,,0.0000,29.0000,1.5000,Standard\n\r 
```

我得到的结果类似于：

```
[2] => Array
    (
    )

[3] => Array
    (
        [0] => CAN
        [1] => *
        [2] => 
        [3] => 
        [4] => 
        [5] => 10000.0000
        [6] => 19999.0000
        [7] => 35.5000
    )

[4] => Array
    (
    )

[5] => Array
    (
        [0] => CAN
        [1] => *
        [2] => 
        [3] => 
        [4] => 
        [5] => 0.0000
        [6] => 4999.0000
        [7] => 19.7500
    )

[6] => Array
    (
    ) 
```

如果我尝试`?:`在换行组中添加它仍然会这样做。任何人都可以帮助我，我被困在那里。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:09:31.200

不知道 php 匹配的任何细节，我会相信正则表达式的工作方式就像你展示的那样（使用[我喜欢的正则表达式](http://gskinner.com/RegExr/)，我不会以同样的方式捕获）。

*我假设您正在尝试删除那些空白匹配项。*我也相信那些“换行符”实际上被编码到输入中，而不是作为文字`\`'s 和`\r`'s 和`\n`'s。

问题似乎是“换行符”被匹配了两次？就像您只匹配`\n`一次传球，然后匹配`\r`下一次传球？

最简单的解决方案是将换行符限制为您知道文件具有的类型：`/([^\"]|\"[^\"]*\")*?(\n\r)/` 这有帮助吗？

或者，我会在每行输入上**使用正则表达式拆分（用逗号分隔） 。**

# installation - Xcode 4.4：首选项：下载：组件：命令行工具失败并显示“失败，HTTP 状态 403：禁止”

> ID：11657707
> 
> 赞同：9
> 
> 时间：2012-07-25T20:02:33.677
> 
> 标签：installation, command-line-tool, xcode4.4

当我尝试在新下载的 Xcode 4.4 安装中安装命令行工具时，有谁知道我可能需要更改什么（特定文件的权限；清除钥匙串访问项）以解决问题？

![在此处输入图像描述](../Images/34b0372119dafaa41ab0a7a6ef868f84.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:14:55.593

我有同样的问题。*我的猜测是，这与它刚刚*发布的事实有关。它甚至还没有出现在开发者网站上。

[编辑] 它现在似乎按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T01:42:16.497

注册为开发人员允许您下载命令行工具

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T14:34:35.237

一时兴起，今天早上，我又试了一次，现在可以了。

它向我显示一个对话框，询问我的主钥匙串密码，然后开始下载命令行工具。

任何关注此问题的人都可能希望自己再试一次。希望问题得到解决。

# javascript - FB.xx 方法不受 Facebook 官方支持，很快将被删除

> ID：11657710
> 
> 赞同：0
> 
> 时间：2012-07-25T20:02:56.980
> 
> 标签：javascript, facebook

我最近收到了来自 Facebook 的通知，内容如下：

> 正如 Facebook 开发者博客中所宣布的，Facebook 正在从 Javascript SDK 中删除不受官方支持的方法。您的应用程序 " *" (* ) 已被 > 识别为使用此类方法，我们现在通知您这一点，以便您可以 > 进行必要的更改以避免在我们第一次将这些方法设置为空存根时影响您的应用程序，并且随后当我们删除它们时。
> 
> 要了解您需要进行哪些更改，请在运行>您的应用程序时检查开发者控制台，并根据官方文档进行验证。

网络上似乎没有太多关于哪些方法被标记为弃用的具体信息。我从浏览器控制台运行了一个脚本，该脚本基本上执行了 FB 对象上的几乎所有方法，我想出了以下导致警告的方法列表：“Facebook 不正式支持方法 FB.xx 并且可以访问它很快就会被删除。”

该列表可以在这里找到，因为它很长： http: [//www.codesauce.com/facebook_js_sdk_deprecations.html](http://www.codesauce.com/facebook_js_sdk_deprecations.html)

希望它可以帮助别人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:02:56.980

我使用带有以下 JS 片段的 chrome 开发人员工具控制台来执行附加到 FB 对象的任何方法：

```
for (var i in FB) {
    console.log(i);
    if (typeof FB[i] == 'function') { 
        try { FB[i](); } catch (e) { }
    }
    for (var j in FB[i]) {
        if (typeof FB[i][j] == 'function') {
            console.log("\t" + j);
            try { FB[i][j](); } catch (e) { }
        }
    }
    console.log(Array(10).join("-"));
} 
```

然后将此输出复制到文件中.. 清理它以仅获取以“方法”开头的任何内容

`sed -i '/The method/p' console_output`

最后在我的代码库中搜索了该调用：

`grep -iPo "FB\.[a-z]+\.[a-z]+" console_output | xargs -I% ack-grep % path/to/mycodebase`

# c# - c# WinForms - 单击某些项目后保持 ContextMenu 不关闭

> ID：11657712
> 
> 赞同：12
> 
> 时间：2012-07-25T20:03:00.070
> 
> 标签：c#, contextmenu

我正在使用 System.Windows.Forms.ContextMenu。我想这样做，所以当您单击某些按钮时，它不会关闭菜单。现在我让它工作，只要你点击一个，它就会在相同的位置重新打开菜单。唯一的问题是它看起来很糟糕，因为您可以看到菜单闪烁。有没有更好的方法来做到这一点？

WPF 的 ContextMenu 具有 StaysOpen 属性，但 Win Forms 没有。（有什么方法可以使用 WPF 的 ContextMenu 吗？）我不想使用 ContextMenuStrip，它可以做到这一点，因为 ContextMenu 看起来好多了。

编辑：

我不会将此标记为解决方案，因为这样做不好。如果您需要执行我的问题，一种方法是从 WPF 创建一个 UserControl，然后将带有上下文菜单的对象放入其中，然后将上下文菜单添加到其中。现在因为它在 WPF 中，所以在您不想在单击时关闭菜单的按钮上，将 MenuItem 上的属性 StaysOpenOnClick 设置为 true。然后只需将此 UserControl 放入您的 WinForms 应用程序。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-25T20:37:42.503

您可以像这样保持上下文菜单打开：

```
private bool CloseContextMenu = true; //Class Variable 
```

然后将 MouseDown 添加到您的上下文菜单项中：

```
private void menu1ToolStripMenuItem_MouseDown(object sender, MouseEventArgs e)
{
    CloseContextMenu = false;
} 
```

然后在您的上下文菜单关闭事件中：

```
private void contextMenuStrip1_Closing(object sender, ToolStripDropDownClosingEventArgs e)
{
    e.Cancel = !CloseContextMenu;
    CloseContextMenu = true;
} 
```

然后，您可以将 添加`CloseContextMenu = false`到您想要的任何菜单事件中。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T20:51:27.237

`ContextMenu`使用控件没有很好的方法来做到这一点。那个只是原生 Win32 菜单的包装，这就是为什么它看起来好多了。它使用 OS API 绘制，就像所有其他应用程序中的菜单一样。

将其与`ContextMenuStrip`由框架在 C# 代码中完全自定义绘制的控件进行比较。当它第一次发布时，它看起来超级酷（我猜），当时 Windows 和 Office XP 是货架上的最新产品。当 Windows Vista 推出时，它已经过时了。*它*的唯一优点是您可以对菜单进行更细粒度的控制。例如，您可以在菜单中托管自定义控件，并且可以在单击其中一项时阻止菜单关闭。本机 Win32 菜单不支持该功能。

当然，这不仅仅是疏忽或意外遗漏。在用户已经选择了一些东西之后保持上下文菜单打开的愿望是一个很好的线索，表明你的设计是错误的。请记住，上下文菜单的目的是让用户快速访问上下文相关的选项。他们所要做的就是右键单击（或按键盘上的特殊按钮），他们可以看到与他们正在处理或试图完成的任务直接相关的选项菜单。就像常规菜单一样，他们应该能够选择一个选项并让菜单消失。

在 Windows 中，所有菜单都是“自动关闭”的。如果菜单应该是持久的，那么它根本不应该是菜单。考虑改用工具栏、侧边栏或某种类型的自定义控件。Those aren't designed to go away when one of their options are selected, and therefore they're ideal for showing related options that should always be visible.

如果在我选择一个选项后应用程序中的上下文菜单*没有*消失，我会认为这是一个错误。至少，我会假设我的选择没有“接受”并尝试再次单击它。

我一点也不*知道*为什么 WPF 团队决定`StaysOpen`为他们的上下文菜单提供一个选项，或者为什么他们首先重写了自己的上下文菜单类。他们不是从已经做过同样事情的 WinForms 团队那里学到了一些东西吗？

使用控件（以及因此本机菜单）执行您所要求的唯一方法`ContextMenu`是类似于您描述的黑客 - 存储菜单的先前位置，并在选择命令后重新显示弹出窗口-上一个位置的菜单。无论您想出什么治疗闪烁的方法（例如，冻结屏幕并抑制重绘，直到重新显示上下文菜单）几乎都肯定会比疾病更糟。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-01-20T05:09:05.370

我刚刚添加

```
ContextMenuStrip1.Show(); 
```

在我的点击事件中。当我单击上下文菜单时，它会关闭，但会立即打开，因此它实际上保持打开状态。

# jquery - 如果所有 $("option:selected") 都有 $(this).val 做某事

> ID：11657713
> 
> 赞同：1
> 
> 时间：2012-07-25T20:03:01.550
> 
> 标签：jquery

我有一组选择。我正在尝试做类似的事情：

如果每个`$("option:selected")`人都有`$(this).val='equal in all'`做某事。

但我不知道我是否尝试将每个值放入`var`然后比较或计数。

也许应该是 IF ALL has....

此代码有效，但可以查看如何处理它...

它位于 on change 功能中，因此仅在我选择时才会发出警报

```
$("option:selected").each(function () {
    alert ($(this).val();)
}); 
```

* * *

是[这样](http://jsfiddle.net/xGRep/)的。

如果在 value= Show All 的情况下选择了 both(all) 选择，则执行某些操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:05:43.237

```
if ($('option:selected[value="equal in all"]').length > 0){
  // "equal in all" is selected
} 
```

您可以使用[属性 equals selector](http://api.jquery.com/attribute-equals-selector/)，然后检查`length`属性以查看有多少元素与该选择器匹配。

您还可以比较有多少值等于“全部相等”与通过缓存第一个选择器选择的所有元素，然后存储过滤版本（并比较长度）。例如

```
var selectedOptions = $('option:selected'),
    optionsEqualInAll = selectedOptions.filter('[value="equal in all"]');
if (selectedOptions.length == optionsEqualInAll.length){
  // all selected options have the value "equal in all"
} 
```

除此之外，这个问题有点模糊，也许如果你能更明确地说明你要做什么，我可以更新我的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:08:32.640

我假设您仅在页面上的所有选择都选择了特定值时才想执行一些代码。

如果是这种情况，试试这个：

```
var $selects = $("select");
$filteredSelects = $selects.filter(function(el){
    return $(el).val() == 'equal in all';
});
if($selects.length == $filteredSelects.length){
    //Do Something
} 
```

# javascript - 使用变量将 jQuery 处理程序分配给多个 DIV

> ID：11657715
> 
> 赞同：0
> 
> 时间：2012-07-25T20:03:07.183
> 
> 标签：javascript, jquery, variables, html, hover

我在菜单中有一堆不同的 DIV，它们会影响不同的事物，但它们都通过“数字”相关联。当我将它们全部分开但所有 For 和 While 循环尝试都失败时，它工作得很好......悬停在“$（document）.ready（function（）{}）;”期间应用......

我只是想在这里清理代码并更改它：

```
$("#slideMenu1").hover(function () {
  $("#slideMenu1Box").slideToggle("fast");
});

$("#slideMenu2").hover(function () {
  $("#slideMenu2Box").slideToggle("fast");
});

$("#slideMenu3").hover(function () {
  $("#slideMenu3Box").slideToggle("fast");
});

$("#slideMenu4").hover(function () {
  $("#slideMenu4Box").slideToggle("fast");
}); 
```

类似于：

```
for(var i = 1; i < 5; i++) {    
$("#slideMenu"+i).hover(function () {
  $("#slideMenu"+i+"Box").slideToggle("fast");
});
} 
```

但我不能把它拉下来。是否可以？任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:08:57.163

我会这样做的方式是使用类选择器或另一个选择器。

```
 $(".slideMenu").hover(function() {
   $(".slideMenuBox", this).slideToggle("fast")
 });
```

```
 .slideMenu{
   display:block;
   height:20px;
   }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div id="slideMenu1" class="slideMenu">
  <div id="slideMenuBox1" class="slideMenuBox">
    Menu1
  </div>
</div>
<div id="slideMenu2" class="slideMenu">
  <div id="slideMenuBox2" class="slideMenuBox">
    Menu2
  </div>
</div>
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:07:17.933

我建议你给你所有的幻灯片菜单一个名为“slidemenu”的类，然后像这样引用它们：

```
$(".slideMenu").hover(...); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T20:08:42.880

这是可能的，我建议利用事件委托，这样你就没有大量的事件处理程序：

```
$("#someAncestor").on("mouseenter mouseleave", "[id^=slideMenu]", function () {
    $("#" + this.id + "Box").slideToggle("fast");
}); 
```

您可以通过使用通用类名来简化它，并且如果您显示您的标记，将有一种方法可以获取对适当`...Box`元素的引用，而无需通过 ID 找到它。

一些参考资料：

*   [`.on()`方法_](http://api.jquery.com/on/)
*   [属性以选择器开头](http://api.jquery.com/attribute-starts-with-selector/)

还要注意 和 的`mouseenter`使用`mouseleave`。您当前使用的`.hover()`方法只是它们的简写，但您不能将它与 一起使用`.on()`，因此需要显式绑定到两者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T20:17:09.063

你可以为这些元素添加一个公共类吗？

它应该看起来像这样：

```
<html>
    <div class="slideMenu" option="1">
        <div class="slideMenuBox"></div>
    </div>
    <div class="slideMenu" option="2">
        <div class="slideMenuBox"></div>
    </div>
    <div class="slideMenu" option="3">
        <div class="slideMenuBox"></div>
    </div>
    <div class="slideMenu" option="4">
        <div class="slideMenuBox"></div>
    </div>
    <div class="slideMenu" option="5">
        <div class="slideMenuBox"></div>
    </div>
</html> 
```

然后您可以将您的事件处理程序应用于所有这些：

```
$(".slideMenu").hover( 
    function()
    {
        $(".slideMenuBox", this).slideToggle("fast");
    }
); 
```

如果需要，您仍然可以单独引用它们：

```
$(".slideMenu[option='1']") 
```

# wpf - 如何让这个 ShaderEffect 停止改变不透明度

> ID：11657716
> 
> 赞同：0
> 
> 时间：2012-07-25T20:03:10.350
> 
> 标签：wpf, image, directx

我的 WPF 应用程序中有一个显示图像的控件。它使用`ShaderEffect`我从网上找到的代码编写的。这是`ShaderEffect`课程：

```
public class BrightContrastEffect : ShaderEffect {

    public static readonly DependencyProperty BrightnessProperty = 
        DependencyProperty.Register( "Brightness", typeof( double ), typeof( BrightContrastEffect ), 
                                     new UIPropertyMetadata( 0.0, PixelShaderConstantCallback( 0 ) ) );

    public static readonly DependencyProperty ContrastProperty = 
        DependencyProperty.Register( "Contrast", typeof( double ), typeof( BrightContrastEffect ), 
                                     new UIPropertyMetadata( 0.0, PixelShaderConstantCallback( 1 ) ) );

    public static readonly DependencyProperty InputProperty = 
        ShaderEffect.RegisterPixelShaderSamplerProperty( "Input", typeof( BrightContrastEffect ), 0 );

    public float Brightness {
        get { return (float) GetValue( BrightnessProperty ); }
        set { SetValue( BrightnessProperty, value ); }
    }

    public float Contrast {
        get { return (float) GetValue( ContrastProperty ); }
        set { SetValue( ContrastProperty, value ); }
    }

    public Brush Input {
        get { return (Brush) GetValue( InputProperty ); }
        set { SetValue( InputProperty, value ); }
    }

    public BrightContrastEffect() {
        PixelShader = m_shader;
        UpdateShaderValue( InputProperty );
        UpdateShaderValue( BrightnessProperty );
        UpdateShaderValue( ContrastProperty );

    }

    private static PixelShader m_shader = new PixelShader() { 
        UriSource = new Uri( @"pack://application:,,,/CustomControls;component/bricon.ps" ) 
    };

} 
```

这是使用 DirectX SDK 编译的 PixelShader 的代码：

```
sampler2D input : register(s0);
float brightness : register(c0);
float contrast : register(c1);

float4 main(float2 uv : TEXCOORD) : COLOR
{
    float4 color = tex2D(input, uv); 
    float4 result = color;
    result = color + brightness;
    result = result * (1.0 + contrast) / 1.0;

    return result;
} 
```

我的程序中有一个显示`Image`控件的表单，该控件的`Effect`属性设置为上述类的实例。图像旁边有 4 个按钮，其中一个以固定步长增加亮度，另一个以相同固定步长降低亮度，第三个类似地增加控制，第四个减少对比度。

我的问题是这段代码不仅改变了对比度，它还改变了图像的不透明度，因此图像后面的任何东西都开始通过它显示出来。它背后的东西不仅仅是白色背景。

我该如何解决这个问题，这样它就不会改变图像的不透明度？`PixelShader`我对所写的语言一无所知。

托尼

编辑：这是使用此 ShaderEffect 的控件的 XAML。

```
<Grid Background="{Binding Path=Background, RelativeSource={RelativeSource AncestorType={x:Type cs:Channel}}}" 
      MouseLeftButtonDown="MouseLeftButtonDownHandler" 
      MouseLeftButtonUp="MouseLeftButtonUpHandler"
      MouseMove="MouseMoveHandler"
      Name="ChannelGrid">

    <Canvas Name="ChannelCanvas">
        <Rectangle Canvas.Left="0"
                   Canvas.Top="0"
                   Fill="Black"
                   Height="{Binding ElementName=ChannelCanvas, Path=ActualHeight}"
                   Name="MapHider"
                   Width="{Binding ElementName=ChannelCanvas, Path=ActualWidth}" />

        <Image Canvas.Left="0" 
               Canvas.Top="0"
               Height="{Binding ElementName=ChannelCanvas, Path=ActualHeight}" 
               Name="CanvasImage" 
               Stretch="Fill" 
               Width="{Binding ElementName=ChannelCanvas, Path=ActualWidth}">
            <Image.Effect>
                <cs:BrightContrastEffect Brightness="{Binding Mode=TwoWay, Path=Brightness, RelativeSource={RelativeSource AncestorType={x:Type cs:Channel}}}"
                                         Contrast="{Binding Mode=TwoWay, Path=Contrast, RelativeSource={RelativeSource AncestorType={x:Type cs:Channel}}}" />
            </Image.Effect>
        </Image>
        <Rectangle Fill="Transparent" 
                   Name="LicensePlateRectangle"
                   Stroke="Red" 
                   StrokeThickness="1"
                   Visibility="Hidden" />
    </Canvas>
    <Canvas>
        <!-- This canvas is overlaid over the previous canvas and is used to place 
             the rectangle that implements the drag selection box. -->
        <Rectangle Name="ZoomRectangle" 
                   Stroke="White" 
                   StrokeThickness="1" 
                   StrokeDashArray="5 5" 
                   StrokeDashCap="Square" 
                   Visibility="Hidden" />
    </Canvas>
    <ComboBox Background="Transparent"
              BorderBrush="{DynamicResource ComboBoxBorder}"
              FontSize="18" 
              Foreground="{DynamicResource ComboBoxForeground}" 
              HorizontalAlignment="Center" 
              Margin="0,5,0,0" 
              MinHeight="25" 
              Name="CameraPicker" 
              Panel.ZIndex="1" 
              SelectionChanged="Picker_SelectionChanged"
              VerticalAlignment="Top" 
              Visibility="Hidden" />
    <Border BorderBrush="{DynamicResource ControlBorder}"
            BorderThickness="1"
            HorizontalAlignment="Center" 
            Margin="0,5,0,0" 
            MinHeight="35" 
            MinWidth="35"
            Name="NameBorder"
            Padding="5,0"
            Panel.ZIndex="1"
            VerticalAlignment="Top"
            Visibility="Hidden">
        <cs:OutlinedText Fill="White" 
                         FontSize="18" 
                         FontWeight="Bold"
                         HorizontalAlignment="Center" 
                         MinHeight="25" 
                         MinWidth="25"
                         x:Name="CameraName" 
                         Stroke="Black" 
                         StrokeThickness="1"
                         VerticalAlignment="Center" 
                         Visibility="Hidden" />
    </Border>
</Grid> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:07:50.180

更改您的像素着色器以始终返回 alpha = 1

修改这一行

```
 return result; 
```

至

```
 return float4(result.r, result.g, result.b, 1.0); 
```

不确定确切的语法，但你明白了。:)

# javascript - Javascript悬停不起作用

> ID：11657718
> 
> 赞同：0
> 
> 时间：2012-07-25T20:03:21.617
> 
> 标签：javascript, jquery, css, wordpress

我正在尝试实现悬停javascript，因此一旦鼠标悬停在图像上，项目标题就会出现

[http://www.dawaf.co.uk/jj/](http://www.dawaf.co.uk/jj/)

目前它似乎显示项目标题而不是它下面的图像

我错过了什么重要的东西吗？

```
<script type="text/javascript" src="/jj/wp-content/themes/child/scripts/modernizr-2.5.3.min.js"></script>
<script type="text/javascript" src="/jj/wp-content/themes/child/scripts/plugins.js"></script>
<script type="text/javascript" src="/jj/wp-content/themes/child/scripts/script.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/libs/jquery-1.7.1.min.js"><\/script>')</script>
</head>

<body>

  <!--[if lt IE 7]><p class=chromeframe>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p><![endif]-->

<!-- portfolio-catcher -->
<div id="portfolio-catcher">
</div>
<!-- .portfolio-catcher -->

  <header>
    <!-- container -->
    <div class="container">

        <nav id="local">
            <a rel="nofollow" href="#portfolio">Portfolio</a>&nbsp;|&nbsp;
            <a rel="nofollow" href="#contact">Contact</a>
        </nav>

        <h1><a href="#portfolio"><img src="/assets/img/hattie-newman.png" alt="Hattie Newman" /></a></h1>

        <nav id="external">
            <a href="//hattienewman.tumblr.com" target="_blank">News</a>&nbsp;|&nbsp;
            <a href="//twitter.com/hattienewman" target="_blank">Twitter</a>
        </nav>
        <div class="clearfix"></div>

    </div>
    <!-- .container -->

  </header> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:34:15.497

在每个组中的标签之前出现的标签内`height`的`<span>`被`<p>`设置为与元素相同的高度。将其高度设置为零将显示以下内容。悬停似乎工作正常。如果您希望彩色样本完全覆盖图像，则可以完全删除。`<hgroup>``<li>``<hgroup>``<span>``<img>``<p>`

来自萤火虫：

```
<li data-src="http://www.hattienewman.co.uk/images/uploads/madameproject.jpg" style="height: 393px; position: absolute; top: 0px; left: 652px;" class="masonry-brick">
    <p>                 
        <span style="width:308px;height:393px;background:#41bba1" class="cover"></span> 
    </p>
    <hgroup data-project="projects/view/madame-magazine" style="width: 308px; height: 393px; background: none repeat scroll 0% 0% rgb(65, 187, 161); opacity: 0;">
        <div>
            <h3>Editorial</h3>
            <p>                         
                <span class="dash">&mdash;</span>
            </p>
            <p>Madame Magazine</p>
            <p></p>
        </div>
    </hgroup>
    <img alt="xxxxxx" src="http://www.hattienewman.co.uk/images/uploads/madameproject.jpg?Thu Jul 26 2012 01:49:23 GMT+0530 (India Standard Time)">
</li> 
```

# python - 即使“java”在 Windows 命令行中工作，从 Python 调用 Java 也会失败

> ID：11657719
> 
> 赞同：0
> 
> 时间：2012-07-25T20:03:23.477
> 
> 标签：python, windows

```
os.system('java') or os.system('java -jar ...') 
```

返回

```
'java' is not recognized as an internal or external command, operable program or batch file. 
```

但是，当我从命令行调用“java”时，它工作得很好。带有 java.exe 的目录在我的路径中。`os.system('C:\Windows\System32\java.exe')`也不起作用。也，`os.system('find')`或者`os.system('ftp')`也可以工作，即使它们也是 System32 中的 exe。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:22:40.503

这是因为 python 没有与常规命令行相同的路径。您可能遇到转义字符问题 - 尝试使用正斜杠而不是反斜杠，或使用原始字符串。`os.system('C:/Windows/System32/java.exe')`

# c# - C# TCPClient 如何让错误的地址/离线服务器更快地失败

> ID：11657720
> 
> 赞同：2
> 
> 时间：2012-07-25T20:03:25.640
> 
> 标签：c#, tcpclient

我试图弄清楚当我的客户端软件无法连接到远程服务器时如何向用户提供更好的反馈。我认为我想区分以下几种情况：

1.  无效/离线服务器
2.  有效的服务器，但端口已关闭
3.  有效的服务器，但不同的程序正在使用该端口
4.  连接成功

我遇到的问题是 #1 需要超过一分钟才能超时。#2 和 #3 几乎立即失败。有没有办法让#1 更快地失败？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:09:31.797

您可以实现连接超时

[http://www.codeproject.com/Articles/31514/Implementation-of-Connecting-a-Socket-with-Timeout](http://www.codeproject.com/Articles/31514/Implementation-of-Connecting-a-Socket-with-Timeout)

只需确保将连接超时值设置为对您尝试访问的服务器而言合理的值（如果有时需要 5 秒才能到达，请不要将其设置为 1 秒）。

# batch-file - 有人可以解释一下这个 CMD 批处理文件吗？

> ID：11657722
> 
> 赞同：0
> 
> 时间：2012-07-25T20:03:32.973
> 
> 标签：batch-file, cmd

```
set SourceSCMPasswd=abc
set HATCONTESTING=yes 

for /f %%a in ('dir /AD /b')  do VssConverter.exe analyze %%a\settings.xml & move VSSAnalysisReport.xml %%a & move usermap.xml %%a 
```

我知道它执行以下命令：1）在 %%a\settings.xml 上运行 VssConverter.exe 分析 2）将 VSSAnalysisReport.xml 移动到 %%a 3）将 usermap.xml 移动到 %%a

问题是，当目录中的文件夹名称中有空格时，例如 AMEX Mailer，变量 %%a 仅包含 AMEX 但不包含第二部分。如何使它包含全名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:35:48.300

FOR /F 的默认标记分隔符是`<tab>`and `<space>`。您希望将整个字符串保留为单个标记，因此您不需要分隔符 ("DELIMS=") 默认 EOL 选项是`;`. 任何以 开头的行都`;`将被忽略。虽然不太可能，但文件名可能以 . 开头`;`。您想将 EOL 设置为某个不能出现在名称中的字符。好的候选人是`:`,`*`和`?`。

```
for /f "eol=: delims=" %%A in ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:19:06.650

试试这个：

```
for /f "delims=" %%a in ... 
```

# mysql - MySQL错误1064？

> ID：11657726
> 
> 赞同：-1
> 
> 时间：2012-07-25T20:03:52.067
> 
> 标签：mysql, sql, mysql-error-1064

大家好，我正在尝试对我的数据库执行以下插入操作，但是每次尝试它都会失败，并出现 1064 的供应商错误。我有两个用于 lat 和 long 的双字段，以及一个整数 id。有人可以告诉我这里发生了什么吗？

```
INSERT INTO LatLong (lat, long) VALUES (51.53087375, -0.26259048); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T20:05:17.510

该列`long`是[MySQL 保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。用反引号括起来以修复错误：

```
INSERT INTO `LatLong` (`lat`, `long`) VALUES (51.53087375, -0.26259048); 
```

用反引号将所有列名和表名括起来是一种很好的做法，但不是必须的。

# r - 整数变量的气泡图，其中最大气泡的直径为 1（在 x 或 y 轴刻度上）？

> ID：11657729
> 
> 赞同：8
> 
> 时间：2012-07-25T20:03:58.167
> 
> 标签：r, ggplot2

我想实现以下结果：

1.  重新调整气泡的大小，使最大的气泡的直径为 1（以 x 和 y 轴的压缩比例更大者为准）。
2.  重新调整气泡的大小，使最小的气泡直径为 1 毫米
3.  有一个图例，第一个和最后一个点是最小非零频率和最大频率。

我能做的最好的事情如下，但我需要一个更通用的解决方案，其中计算 maxSize 的值而不是硬编码。如果我在传统的 R 图中这样做，我会使用 par("pin") 来计算绘图区域的大小并向后工作，但我无法弄清楚如何使用 ggplot2 访问这些信息。有什么建议么？

```
library(ggplot2)
agData = data.frame(
  class=rep(1:7,3),
  drv = rep(1:3,rep(7,3)),
  freq = as.numeric(xtabs(~class+drv,data = mpg))
)

agData = agData[agData$freq != 0,]
rng = range(agData$freq)
mn = rng[1]
mx = rng[2]
minimumArea = mx - mn
maxSize = 20
minSize = max(1,maxSize * sqrt(mn/mx))
qplot(class,drv,data = agData, size = freq) + theme_bw() + 
  scale_area(range = c(minSize,maxSize), 
             breaks = seq(mn,mx,minimumArea/4), limits = rng) 
```

这是到目前为止的样子： ![在此处输入图像描述](../Images/c680b87db2a2fe2f7e25c5321148c03a.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-16T11:44:53.957

当没有 ggplot、lattice 或其他高级软件包似乎在没有数小时微调的情况下完成这项工作时，我总是恢复到基本图形。下面的代码让你得到你想要的，在它之后我有另一个基于我如何绘制它的例子。

但是请注意，我已将最大*半径*设置为 1 厘米，但只是除以`size.range/2`得到直径。我只是认为半径给了我更好的情节，无论如何你可能想要调整一些东西。

```
size.range <- c(.1, 1) # Min and max radius of circles, in cm

# Calculate the relative radius of each circle
radii <- sqrt(agData$freq)
radii <- diff(size.range)*(radii - min(radii))/diff(range(radii)) + size.range[1]

# Plot in two panels
mar0 <- par("mar")
layout(t(1:2), widths=c(4,1))

# Panel 1: The circles
par(mar=c(mar0[1:3],.5))
symbols(agData$class, agData$drv, radii, inches=size.range[2]/cm(1), bg="black")

# Panel 2: The legend
par(mar=c(mar0[1],.5,mar0[3:4]))
symbols(c(0,0), 1:2, size.range, xlim=c(-4, 4), ylim=c(-2,4),
        inches=1/cm(1), bg="black", axes=FALSE, xlab="", ylab="")
text(0, 3, "Freq")
text(c(2,0), 1:2, range(agData$freq), col=c("black", "white"))

# Reset par settings
par(mar=mar0) 
```

![剧情建议1](../Images/7ef2a177aecb788dc92d5b6abcf40304.png)

现在听从我的建议。最大圆的半径为 1 厘米，圆的面积与 成比例`agData$freq`，而不会强制使用最小圆的大小。我个人认为这更容易阅读（代码和图形）并且看起来更好。

```
with(agData, symbols(class, drv, sqrt(freq),
     inches=size.range[2]/cm(1), bg="black"))
with(agData, text(class, drv, freq, col="white")) 
```

![剧情建议2](../Images/1bc1b4a3a563c51ce7dda988317e9502.png)

# php - 使用 .htaccess 进行 HTTP/浏览器缓存

> ID：11657732
> 
> 赞同：1
> 
> 时间：2012-07-25T20:03:59.187
> 
> 标签：php, html, apache, apache2

我的根目录中有一个 .htaccess ，设置如下。

```
<filesMatch "\.(ico|pdf|flv|jpg|jpeg|png|gif|js|css|swf)$">
Header set Cache-Control "max-age=864000, public, must-revalidate"
</filesMatch> 
```

我认为它缓存了 filesmatch 指令中的任何文件。我不清楚的一件事是浏览器是否缓存了实际输出的 HTML 内容（来自 index.php）。我不希望浏览器缓存 HTML。我只希望浏览器缓存图像、css 和 js。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:06:16.623

根据您的说法，您不确定浏览器是否正在缓存您的 PHP 文件或从中生成的文件，请使用这些标头绝对确定，除非您明确设置规则，否则您永远不会知道：

```
header('Expires: Sat, 26 Jul 1997 05:00:00 GMT'); 
header('Last-Modified: ' . gmdate( 'D, d M Y H:i:s') . ' GMT'); 
header('Cache-Control: no-store, no-cache, must-revalidate'); 
header('Cache-Control: post-check=0, pre-check=0', false); 
header('Pragma: no-cache'); 
```

# python - 在 python 中睡眠准确的时间

> ID：11657734
> 
> 赞同：8
> 
> 时间：2012-07-25T20:04:08.447
> 
> 标签：python, windows, sleep

我需要在我的一个函数中等待大约 25 毫秒。有时，当处理器忙于其他事情时会调用此函数，而其他时候则将处理器全部独占。

我已经尝试过`time.sleep(.25)`，但有时它实际上是 25 毫秒，而其他时候则需要更长的时间。无论处理器可用性如何，有没有一种方法可以让您睡眠一段准确的时间？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-25T20:08:47.090

因为您使用的是[抢占式](http://en.wikipedia.org/wiki/Preemption_(computing))操作系统，所以您无法保证您的进程能够在 25 毫秒内控制 CPU。

如果您仍然想尝试，最好有一个繁忙的循环来轮询直到 25 毫秒过去。像这样的东西可能会起作用：

```
import time
target_time = time.clock() + 0.025
while time.clock() < target_time:
    pass 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-25T20:07:29.770

0.25 秒是 250 毫秒，而不是 25 秒。除此之外，在普通操作系统上没有办法*精确*地等待25 毫秒——你需要一些实时操作系统。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-25T20:30:53.590

你在什么系统上？如果你在 Windows 上，你可能想要做这样的事情来获得准确的时间：

```
import ctypes
kernel32 = ctypes.windll.kernel32

# This sets the priority of the process to realtime--the same priority as the mouse pointer.
kernel32.SetThreadPriority(kernel32.GetCurrentThread(), 31)
# This creates a timer. This only needs to be done once.
timer = kernel32.CreateWaitableTimerA(ctypes.c_void_p(), True, ctypes.c_void_p())
# The kernel measures in 100 nanosecond intervals, so we must multiply .25 by 10000
delay = ctypes.c_longlong(.25 * 10000)
kernel32.SetWaitableTimer(timer, ctypes.byref(delay), 0, ctypes.c_void_p(), ctypes.c_void_p(), False)
kernel32.WaitForSingleObject(timer, 0xffffffff) 
```

这段代码几乎可以保证您的进程将休眠 0.25 秒。但请注意 - 您可能希望将优先级降低到 2 或 3，除非它睡眠 0.25 秒是**绝对关键的。**当然不要将用户端产品的优先级更改得太高。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-19T20:00:14.777

**编辑：**在 Windows 10 中，这种废话似乎是不必要的。像这样尝试：

```
>>> from time import sleep
>>> import timeit
>>> '%.2f%% overhead' % (timeit.timeit('sleep(0.025)', number=100, globals=globals()) / 0.025 - 100)
'0.29% overhead' 
```

0.29% 左右是相当低的开销，而且通常足够准确。

***默认情况下，以前的 Windows 版本***的睡眠分辨率为 55 毫秒，这意味着您的睡眠呼叫将需要 25 到 55 毫秒之间的某个时间。要将睡眠分辨率降低到 1 毫秒，您需要通过调用设置 Windows 使用的分辨率[`timeBeginPeriod`](https://msdn.microsoft.com/en-us/library/windows/desktop/dd757624(v=vs.85).aspx)：

```
import ctypes
winmm = ctypes.WinDLL('winmm')
winmm.timeBeginPeriod(1) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-06-17T17:51:56.797

另一种准确计时和延迟的解决方案是使用模块时间中的 perf_counter() 函数。在 windows 中特别有用，因为 time.sleep 以毫秒为单位不准确。请参见下面的示例，其中函数 accuracy_delay 以毫秒为单位创建延迟。

```
import time

def accurate_delay(delay):
    ''' Function to provide accurate time delay in millisecond
    '''
    _ = time.perf_counter() + delay/1000
    while time.perf_counter() < _:
        pass

delay = 10
t_start = time.perf_counter()
print('Wait for {:.0f} ms. Start: {:.5f}'.format(delay, t_start))

accurate_delay(delay)

t_end = time.perf_counter()
print('End time: {:.5f}. Delay is {:.5f} ms'.
      format(t_end, 1000*(t_end - t_start)))

sum = 0
ntests = 1000
for _ in range(ntests):
    t_start = time.perf_counter()
    accurate_delay(delay)
    t_end = time.perf_counter()
    print('Test completed: {:.2f}%'.format(_/ntests * 100), end='\r', flush=True)
    sum = sum + 1000*(t_end - t_start) - delay

print('Average difference in time delay is {:.5f} ms.'.format(sum/ntests)) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-25T20:09:55.837

您打算做的是一个实时应用程序。Python（可能还有您正在使用的操作系统）并非旨在对时间限制如此严格的此类应用程序进行编程。

为了实现您的目标，您需要一个 RTOS（实时操作系统）并使用合适的编程语言（通常是 C）按照 RT ​​最佳实践来开发您的应用程序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-25T20:12:55.640

从sleep 方法的[文档中：](http://docs.python.org/release/3.0.1/library/time.html#time.sleep)

> 在给定的秒数内暂停执行。该参数可以是一个浮点数，以指示更精确的睡眠时间。实际的挂起时间**可能少于**请求的时间，因为任何捕获的信号都会在执行该信号的捕获例程后终止 sleep()。此外，由于系统中其他活动的调度，暂停时间**可能比**请求的时间长任意量。

事实上，这取决于您的底层操作系统。

# haskell - monad绑定和单元函数的差异？

> ID：11657735
> 
> 赞同：0
> 
> 时间：2012-07-25T20:04:09.463
> 
> 标签：haskell, monads

## 问题

我只是通过[你可以发明单子！](http://blog.sigfpe.com/2006/08/you-could-have-invented-monads-and.html)教程，并在标题为**A Container: Multivalued Functions**的部分中，其中函数类型（复平方根和立方根）为：

```
Complex Float -> [Complex Float] 
```

绑定定义为：

```
bind :: (Complex Double -> [Complex Double]) -> ([Complex Double] -> [Complex Double])
bind f x = concat (map f x)
--shortcut:
f * g = bind f . g 
```

单位和电梯是：

```
unit x = [x]    
lift f = unit . f 
```

现在我很困惑，`f`in函数和in函数`lift`一样吗？换句话说，和函数的类型是什么？`f``bind``unit``lift`

## 悖论

另外，根据我的推理，我遇到了一个奇怪的悖论：如果`lift`可以采用以下功能：

```
realRoot :: Double -> Double
realRoot x =  sqrt(x) 
```

并将其提升到我们的 monad 中，使其成为类型：

```
lift realRoot :: [Complex Double] 
```

我不能做这样的事情：

```
(lift realRoot * imaginaryRoot) -1 
```

在哪里

```
imaginaryRoot :: [Complex Double] 
```

但是我怎样才能得到*复数的**真正*根呢？

 *任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:16:10.310

> 现在我很困惑，`f`in`lift`函数和`f`bind函数一样吗？换句话说，`unit`和`lift`函数的类型是什么？

不，不一样。`lift`的参数是一个函数`Complex Double -> Complex Double`，所以

```
unit :: Complex Double -> [Complex Double]
lift :: (Complex Double -> Complex Double) -> (Complex Double -> [Complex Double]) 
```

因此，您`realRoot`的论点是不可接受的`lift`。*

# .net - 为什么安装 Microsoft Blend SDK 时 `Systems.Windows.Interactivity` 不可用？

> ID：11657740
> 
> 赞同：1
> 
> 时间：2012-07-25T20:04:26.683
> 
> 标签：.net, visual-studio-2010

我的一个项目包含对“System.Windows.Interactivity”的引用

```
<Reference Include="System.Windows.Interactivity, Version=4.0.0.0, 
   Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL">
   <SpecificVersion>False</SpecificVersion>
</Reference> 
```

我已经为 Silverlight 4 安装了 Microsoft Expression Blend SDK，因此该文件存在并且在此位置可用：

> C:\Program Files (x86)\Microsoft SDKs\Expression\Blend\Silverlight\v4.0\Libraries\System.Windows.Interactivity.dll

但是，我在构建时仍然收到以下错误：

> XML 命名空间“http://schemas.microsoft.com/expression/2010/interactivity”中不存在标记“Interaction.Triggers”。

我不知道除了安装 Blend SDK 还能做什么。如何解决我的问题？

# ruby-on-rails - 我怎样才能优雅地重启瘦+ nginx？

> ID：11657741
> 
> 赞同：5
> 
> 时间：2012-07-25T20:04:30.340
> 
> 标签：ruby-on-rails, ruby, nginx, capistrano, thin

我的瘦服务器配置了 nginx，我的 ROR 应用程序正在它们上运行。

`thin restart`在我发布代码更新时运行会给我的应用程序带来一些停机时间。我试图弄清楚如何优雅地重新启动正在运行的瘦实例，但我找不到一个好的解决方案。

有没有人能够做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T21:27:52.633

```
# Restart just the thin server described by that config
sudo thin -C /etc/thin/mysite.yml restart 
```

Nginx 将继续运行和代理请求。如果您将 Nginx 设置为使用多个上游服务器，例如

```
server {
  listen        80;
  server_name  myapp.mysite.com;
  # ...
  location / {
    try_files $uri $uri/index.html /cache$uri.html $uri.html @proxy;
  }
  location @proxy {
    proxy_pass http://myapp.rails;
  }
}

upstream myapp.rails {
   server 127.0.0.1:9001 max_fails=1 fail_timeout=10s;
   server 127.0.0.1:9002 max_fails=1 fail_timeout=10s;
   server 127.0.0.1:9003 max_fails=1 fail_timeout=10s;
} 
```

…然后每个实例将依次重新启动，如果其中一个代理关闭，Nginx 将自动路由请求。

# iphone - addOperationWithBlock:，如何在 while 循环中向队列添加操作

> ID：11657756
> 
> 赞同：0
> 
> 时间：2012-07-25T20:05:24.827
> 
> 标签：iphone, nsoperationqueue

我有一个长时间运行的任务，它从文档目录中读取一个文件，解析它，删除文件，然后从 doc 目录中读取下一个文件，解析，删除。我正在尝试将此代码放在后台，但遇到了麻烦。我到目前为止：

（伪代码）

```
while (fileExistsInDocDirectory) {
                NSOperationQueue *queue = [[NSOperationQueue alloc] init];
                [queue setName:@"LongTask"];
                [queue addOperationWithBlock:^{
                    parseSuccessful = [self doLongTask];                    
                }];
                [queue addOperationWithBlock:^{
                    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
                        [self updateProgress];                    
                    }];

                }];    
} 
```

它仅适用于一个文件，因为我使用的是 FMDB，我的 doLongTask 正在将行插入到数据库中。因此，当下一个队列进入并尝试插入其数据并且数据库已在使用中时，它不起作用。在第一个队列在 while 循环内完成之前，我能否运行第二个队列？我看到了一些关于设置依赖队列的事情，但不确定是否有一种简单的方法可以在不继承 NSOperation 的情况下做到这一点。谢谢！

# python - 在虚拟环境中找不到 pip-python

> ID：11657757
> 
> 赞同：0
> 
> 时间：2012-07-25T20:05:27.790
> 
> 标签：python, virtualenv, pip, virtualenvwrapper

我已经安装了python-virtualenv和python-virtualenvwrapper，并使用mkvirtualenv NAME创建了一个虚拟环境，然后通过workon NAME激活它。通过查看 ~/.virtualenvs/NAME/bin 我看到 pip 安装在那里。

但是，当我尝试通过 pip 安装任何东西时，我被告知 pip-python: command not found

我没有在系统范围内安装 pip，并且认为我不需要安装它，因为它已经安装在虚拟环境中。现在，这一切让我相信我的 $PATH 没有正确设置某些东西，那会是什么？一旦我像这样进入虚拟环境： (NAME)[user@host]$ 我的路径不应该已经修改为在该环境中使用 pip 安装吗？我需要做什么才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:08:07.570

您必须`pip`在您的系统上安装它才能在`virtualenv`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:54:48.587

`pip-python`是某些 Linux 发行版中可执行文件的名称。它在我的 Fedora 机器上。

当`pip`安装在 virtualenv 中时，可执行文件的名称很简单`pip`，而不是`pip-python`. 所以你需要用`~/.virtualenvs/NAME/bin/pip`，而不是来执行它`~/.virtualenvs/NAME/bin/pip-python`。

# ado.net - 替代手动 ADO.NET POCO 映射？

> ID：11657765
> 
> 赞同：4
> 
> 时间：2012-07-25T20:05:59.353
> 
> 标签：ado.net, petapoco, simple.data, massive

我围绕 ADO.NET 的 DbProviderFactory 编写了一个包装器，我在整个应用程序中都广泛使用了它。我还编写了很多将 IDataReader 行映射到 POCO 的代码。然而，由于我有大量的课程，所以要维护整个事情变得很痛苦。

我一直在考虑用像 Petapoco 这样的微型机器来代替整个 she-bang。我有几个疑问：

1.  我有很多 POCO，其中包含其他 POCO 作为属性。Petapoco 对此的支持程度如何？
2.  我应该使用像 Massive 或 Simple.Data 这样返回动态对象并将其映射到 POCO 的 ORM 吗？
3.  我可以采取任何方法将行映射到 POCO 吗？我不能真正使用基于约定的工具，因为我的数据库在设计方式上并不是特别一致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:05:42.113

Simple.Data 自动将其动态类型转换为静态类型。只要嵌套的属性是使用 .With 方法预先加载的，它就会映射它们。所以例如

```
Customer customer = db.Customer.WithOrders().Get(42); 
```

将填充客户对象的 Orders 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T20:21:45.820

使用文本模板/代码生成器构建轻量级持久层怎么样？我有一个久经考验的开源项目[TextMetal](http://code.google.com/p/textmetal/)，它可以根据经过验证的真实架构决策生成必要的持久层。唯一缺少的是对象到对象的关系，但它确实支持查询表达式，并且可以很好地与设计不佳的数据模式配合使用。

您可以看到一个使用上述工具调用[Can Do It For](http://code.google.com/p/candoitfor/)的真实世界项目。

一旦你看了一下，请随时向我询问任何设计决定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-06T15:44:08.160

你可以使用[QueryFirst](https://visualstudiogallery.msdn.microsoft.com/eaf390af-afc1-4994-a442-ec95923dafcb)，还是修改它？它获取您的 sql 并将其包装在设计时生成的 vanilla ADO 代码中。每次保存文件时，您都会从结果架构中获得新的 POCO。此外，您可以通过工具菜单中的选项选择测试所有查询并重新生成所有包装器。它依赖于 Sql Server 和 SqlClient，所以除非你做一些修改，否则你将失去 DbProviderFactory。

# c# - ASP.Net 代码块不返回数据

> ID：11657771
> 
> 赞同：1
> 
> 时间：2012-07-25T20:06:28.930
> 
> 标签：c#, asp.net, oop

我有一个不返回预期数据值的代码块。

```
protected void Page_Load(object sender, EventArgs e)
{
corpEmployee.Employee editEmp = new corpEmployee.Employee();

editEmp.EmployeeID = PatientCustomerID.Value;
corpCustomerMgr.GetEmployeeRecord(editEmp);

tboxFirstName.Text = editEmp.EmpFirstName.ToString();
tboxLastName.Text = editEmp.EmpLastName.ToString();
tboxCity.Text = editEmp.EmpCity.ToString();
tboxAddress.Text = editEmp.EmpAddrLine1.ToString();
}  

public static void GetEmployeeRecord(corpEmployee.Employee QueryData)
{
    try
    {
        List<corpEmployee.Employee> empRecord = new List<corpEmployee.Employee>();
        corpCustomerDAL.GetEmployeeData(empRecord, QueryData);
    }
    catch (Exception ex)
    {
    LogAppError(ex.ToString());
    }
} 
```

执行时`corpCustomerDAL.GetEmployeeData(empRecord, QueryData);` ，empRecord 与具有正确属性值的 Employee 对象一起返回。但是，当代码返回时`corpCustomerMgr.GetEmployeeRecord(editEmp);`，员工对象具有空值。

如何将 Employee 对象值返回给 Page_Load 例程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:11:45.937

您可以在静态方法中返回对象，`GetEmployeeRecord`也可以`ref`在参数前面包含，以便将员工作为参考传递，而不是复制变量。

我建议将您的数据返回与使用`ref`作为您的方法名称似乎具有误导性，以及其他原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:55:38.357

根据您的评论，您似乎正在填充`empRecord`所需的员工数据。最简单的选择是从以下位置返回填充的记录`GetEmployeeRecord`：

```
public static corpEmployee.Employee GetEmployeeRecord(corpEmployee queryData)
{
    List<corpEmployee.Employee> empRecord = new List<corpEmployee.Employee>();
    corpCustomerDAL.GetEmployeeData(empRecord, QueryData);
    return empRecord.Count == 0 ? null : empRecord[0];  //or empRecord.FirstOrDefault()
} 
```

然后，您应该将处理程序的开始更改`Page_Load`为：

```
corpEmployee.Employee queryEmp = new corpEmployee.Employee();
queryEmp.EmployeeID = PatientCustomerID.Value;

corpeEmployee.Employee editEmp = corpCustomerMgr.GetEmployeeRecord(queryEmp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:12:57.100

两个直接的想法出现：

*   您的异常处理需要工作。你不应该捕捉`Exception`，也不应该默默地吞下异常。很可能是抛出了异常，这就是您没有获取数据的原因。

*   你有一个`Get***`方法——应该*返回*数据。看来您希望将结果放入对象中……这是从方法中获取数据的一种令人困惑的方式。如果您的方法签名类似于：

    ```
    public static Employee GetEmployeeRecord(string employeeId) 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T20:18:26.873

最有可能发生的事情是您传入的员工对象正在被复制，并在函数终止时被销毁。为了更好地说明，我添加了一些评论：

```
public static void GetEmployeeRecord(corpEmployee.Employee QueryData)
{
    //QueryData is a newly created Employee here, and is NOT the same one that was passed in.
    try
    {
        List<corpEmployee.Employee> empRecord = new List<corpEmployee.Employee>();
        corpCustomerDAL.GetEmployeeData(empRecord, QueryData);//
        //QueryData now contains the data you want your original object to contain
    }
    catch (Exception ex)
    {
    LogAppError(ex.ToString());
    }
}  //when this function terminates, QueryData ceases to exist. 
```

为了修复它，通过引用传递员工（使用 ref 关键字）而不是通过值传递它，这就是你现在正在做的事情。

# javascript - struts2 瓦片 javascript 加载

> ID：11657777
> 
> 赞同：0
> 
> 时间：2012-07-25T20:06:47.353
> 
> 标签：javascript, jquery, struts2, tiles

我在我的演示项目 strut2-tiles-plugin 中使用，我的瓷砖看起来像

```
<definition name="profileListPanel" extends="basePanel">
<put-attribute name="title" value="menu.adm.pro.title"></put-attribute>
<put-list-attribute name="body-items">
<add-attribute value="/jsp/admin/profile/profileList.jsp"/>
</put-list-attribute>
</definition>
<definition name="profileList" extends="baseLayout">
<put-attribute name="title" value="menu.adm.pro.title" />
<put-list-attribute name="body-items">
<add-attribute value="profileListPanel" type="definition"></add-attribute>
</put-list-attribute>
</definition> 
```

在basePanel中我正在迭代

```
<tiles:importAttribute name="body-items" toName="bodyItems"/>
    <s:iterator var="item" value="%{#attr.bodyItems}">
        <tiles:insertAttribute value="${item}" flush="false"></tiles:insertAttribute>
    </s:iterator> 
```

在 profileList.js 我有

```
var editPopUp;
$(document).ready(function(){
    editPopUp=new PopUp();
    $('.edit-profile').click(function(e) {
        e.preventDefault();
        var url=$(this).attr('href');

        editPopUp.openPopUp(url);
    }); 
}); 
```

问题是：profileList.js 被多次加载并`$('.edit-profile')`附加了多个事件

一些想法？

# python - 使用数组，我得到这个错误： TypeError: an integer is required

> ID：11657779
> 
> 赞同：1
> 
> 时间：2012-07-25T20:06:48.633
> 
> 标签：python, arrays, integer

因此，经过反复试验，我想我的数学终于正确计算了。最初，我将其作为一组复杂的列表开始，但后来发现数组函数更适合我的需要。

现在我已经建立了数组，我得到了这个新错误：

编辑：

```
Traceback (most recent call last):
  File "(stdin)", line 1, in (module)
  File "backandforth3.py", line 118, in (module)
    frames.insert((x+f), (archstartred[x]))
TypeError: list index out of range 
```

当我沮丧地对着电脑大喊所有的数据已经是一个整数时，我放弃了我的电脑显示器，并认为我会在这里尝试。到目前为止，这里的所有帮助都非常棒。

以下是我为数组生成数组和数据的方法： 编辑：将列表生成器添加到程序代码中，因为它似乎正在生成非整数值。

```
#List Generator

archstartred = []
archstartgrn = []
archstartblu = []

##Red List
for x in range (0, cursorsize):
    if len(archstartred) < cursorsize:archstartred.insert(0,cursred)

for x in range (0, (archnodes-cursorsize)):
    if len(archstartred) < archnodes:archstartred.append(backred)

##Green List
for x in range (0, cursorsize):
    if len(archstartgrn) < cursorsize:archstartgrn.insert(0,cursgrn)

for x in range (0, (archnodes-cursorsize)):
    if len(archstartgrn) < archnodes:archstartgrn.append(backgrn)

##Blue List
for x in range (0, cursorsize):
    if len(archstartblu) < cursorsize:archstartblu.insert(0,cursblu)

for x in range (0, (archnodes-cursorsize)):
    if len(archstartblu) < archnodes:archstartblu.append(backblu)

archstartred = [int(value) for value in archstartred]
archstartgrn = [int(value) for value in archstartgrn]
archstartblu = [int(value) for value in archstartblu]

#Frame Creation

from array import *

frames=array('i', (0 for i in range (0,workingframes*archnodes*3)))

#Frame Population

for f in range (0, workingframes):

    if f<=(workingframes/2):

        for x in range (0, (archnodes*3)):
            frames.pop(x+f)
            frames.insert((x+f), (archstartred[x]))
            frames.pop((x+f)+workingframes)
            frames.insert((x+f+workingframes), (archstartgrn[x]))
            frames.pop((x+f)+workingframes*2)
            frames.insert((x+f+workingframes*2), (archstartblu[x]))

        for y in range (0, nodesperframe):
            archstartred.pop()
            archstartgrn.pop()
            archstartblu.pop()
            archstartred.insert(0, backred)
            archstartgrn.insert(0, backgrn)
            archstartblu.insert(0, backblu)

    else:
        for y in range (0, nodesperframe):
            archstartred.pop(0)
            archstartgrn.pop(0)
            archstartblu.pop(0)
            archstartred.append(backred)
            archstartgrn.append(backgrn)
            archstartblu.append(backblu)

        for x in range (0, (archnodes*3)):
            frames.pop(x+f)
            frames.insert((x+f), (archstartred[x]))
            frames.pop((x+f)+workingframes)
            frames.insert((x+f+workingframes), (archstartgrn[x]))
            frames.pop((x+f)+workingframes*2)
            frames.insert((x+f+workingframes*2), (archstartblu[x])) 
```

这与我在其他帖子中处理的程序相同。基本上，它是生成用于 RGB 照明系统的数据。这个“简单”的程序将使用 2 种颜色生成来回效果。其他变量包括效果所需的时间长度、帧大小（我们使用“序列器”生成显示，您可以在序列器中改变帧大小）、“光标”大小等。

当然，一旦我弄清楚了这个效果，我就可以根据数学公式做出更复杂的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:49:48.837

要将引号中的整数列表转换`['255', '255', '255', '255', '0']`为`int`正确使用此代码（您很接近）：

```
archstartred = [int(value) for value in archstartred] 
```

它会产生

```
[255, 255, 255, 255, 0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T22:50:21.270

你似乎没有循环 x 来获得所有的 Archstarted。你写了一个额外的[x]吗？

我的意思是，这里的缩进级别为 0，在所有循环之外：

```
for x in range (0, (archnodes-cursorsize)):
   if len(archstartblu) < archnodes:archstartblu.append(backblu)

archstartred[x] = [int(value) for value in archstartred[x]]
archstartgrn[x] = [int(value) for value in archstartgrn[x]]
archstartblu[x] = [int(value) for value in archstartblu[x]] 
```

因此，您只需“触摸”archstartred、grn、blu 的最后一项（如果有的话）。我本来期望的

```
for x in ...
    archstartred[x] = [int(value) for value in archstartred] 
```

或者

```
archstartred = [int(value) for value in archstartred] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T12:55:21.407

您的新错误意味着您正在尝试访问数组长度之外的值。如果您有一个包含四个项目的数组，`[1, 2, 3, 4]`那么`arr[5]` 您的错误将失败。

所以你很可能循环了太多次。否则，您的数组中没有足够的元素。

# eclipse - 编写一种测试多个浏览器的方法

> ID：11657782
> 
> 赞同：2
> 
> 时间：2012-07-25T20:07:12.210
> 
> 标签：eclipse, selenium, webdriver, testng

我有 WebDriver 并且正在使用 Java。在带有 WatiN 的 C# 中，我能够编写如下内容： 方法

Browser browser = new Browser() 这就是我要用浏览器做的事情。就像导航到 URL

然后我会创建一个测试方法并实际定义浏览器 [TestMethod] Method_IE Method(new IE());

无论如何在 Eclipse 中使用 WebDriver 做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T08:51:58.383

我们想出了一些在页面对象模型中使用的非常简单的东西。

```
public WebDriver GetDriver(String driver, String url){

    WebDriver driver;  

    if( driver == 'firefox'){
       driver = new FirefoxDriver();
    }
    else if(driver == 'chrome'){
       driver = new ChromeDriver();
    }
    else if(driver == 'ie'){
       driver = new InternetExplorerDriver();
    }
    driver.get(url); 
    return driver
} 
```

只要您在源代码中指定类，您的 IDE 就根本不重要。

# playframework-2.0 - 类加载器冲突，不同的类定义

> ID：11657784
> 
> 赞同：0
> 
> 时间：2012-07-25T20:07:20.477
> 
> 标签：playframework-2.0

使用 Play 2.0.2 框架，我遇到了类加载器冲突。看起来在不同的类加载器中有同一个类的两个定义。控制台运行，但是当我发出“运行”命令时，播放响应：

```
java.lang.LinkageError: loader constraint violation in interface itable initialization: when resolving method "play.api.PlayException.cause()Lscala/Option;" 
the class loader (instance of sbt/PlayCommands$$anonfun$61$$anonfun$63$$anon$2) of the current class, play/api/PlayException, 
and the class loader (instance of java/net/URLClassLoader) for interface
play/api/PlayException$UsefulException have different Class objects for the 
type scala/Option used in the signature 
```

任何人都有一个开始调试的好地方吗？或者知道为什么会发生这种情况？显然，该类正在由不同的加载器加载，但我不熟悉播放加载器配置。

我使用端口安装了 scala 和 sbt

```
sbt @0.11.2_0 (active)
scala2.9 @2.9.2_0 (active) 
```

我的 PATH 在端口二进制文件之前已经玩过了。

使用 Java

```
java version "1.6.0_33"
Java(TM) SE Runtime Environment (build 1.6.0_33-b03-424-10M3720)
Java HotSpot(TM) 64-Bit Server VM (build 20.8-b03-424, mixed mode) 
```

奔跑的雪豹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T22:53:19.557

原来端口 sbt 已经创建了一个 ~/.sbt 目录，并且该配置是首选。将该目录删除/移动到其他目录可以解决问题。

# html - 使用 CSS 和 HTML 创建 Sprite 图像

> ID：11657795
> 
> 赞同：0
> 
> 时间：2012-07-25T20:08:06.123
> 
> 标签：html, css

我正在尝试构建一个使用一个大精灵的网页。我不想在 photoshop 或某些第三方软件中合成精灵，而是使用 HTML 和 CSS 来排列图像，然后将编辑呈现为一个单独的 JPEG。

无论如何，是否可以将 HTML 页面准确地呈现为 JPEG？

澄清一下：基本上，我想使用 html 和 css 创建一个网页，将其呈现为一个图像，然后将该图像用作不同网页上的精灵。所以我只是在 HTML 和 CSS 中编译我的“图像”，而不是在 Photoshop 中构建它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T15:07:18.723

是的，它被称为打印屏幕。`PrtScr`

# transactions - 领域驱动设计：处理原子操作和事务

> ID：11657798
> 
> 赞同：4
> 
> 时间：2012-07-25T20:08:21.470
> 
> 标签：transactions, domain-driven-design, atomic

在每个聚合内部，必须保证一致性。在存储库中很容易做到这一点，因为我总是可以使用数据库或框架中的事务。我对存储库之外发生的事情表示怀疑。一项服务可能需要使用多个聚合来处理请求。在服务中的处理过程中或聚合持续存在时可能会出现问题。

如果在服务处理过程中出现问题，我可以引发异常。这样操作将是原子的。这是我的第一个担忧。这是一个好习惯吗？我看到的问题是很难从中恢复过来。没有简单的方法可以让所有聚合保持失败操作之前的状态。

我遇到的另一个问题是，如果其中一个聚合无法持久化，会发生什么。如何保证信息的一致性？我必须在存储库之外使用数据库事务吗？我在想它可能不是最好的解决方案，因为我在设计域模型时不应该考虑数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:24:21.010

工作单元模式提供了解决方案 - [http://martinfowler.com/eaaCatalog/unitOfWork.html](http://martinfowler.com/eaaCatalog/unitOfWork.html)

您可以根据需要将任意数量的聚合根操作封装到单个 UOW 中。然后，工作单元的具体实现可以包含其自己的提交和回滚逻辑，特定于所涉及的持久性方法和技术。例如，如果您在 .NET 中工作，则处理`TransactionScope`对象 ( [http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx )。](http://msdn.microsoft.com/en-us/library/system.transactions.transactionscope.aspx)

这是一篇关于如何实现基本 UOW 模式的不错的文章 - [http://msdn.microsoft.com/en-us/magazine/dd882510.aspx](http://msdn.microsoft.com/en-us/magazine/dd882510.aspx)

# c# - 在一个文件中的 System.Data.Entity 中找不到数据库命名空间

> ID：11657805
> 
> 赞同：0
> 
> 时间：2012-07-25T20:08:37.637
> 
> 标签：c#, asp.net

我不知道。我刚刚创建了一个 Global.asax，我只是想使用 System.Data.Entity.Database，它不知道我想要什么。

```
using System;
using HROpenEnrollment.Model;
using System.Data.Entity;
using HROpenEnrollment.Data.EntityFramework;

namespace HROpenEnrollment
{
public class Global : System.Web.HttpApplication
{

    protected void Application_Start()
    {
        using System.Data.Entity.
    } 
```

恼人的部分是我可以在其他地方使用它。这是同一项目中可以正常工作的另一个文件。

```
using System;
using HROpenEnrollment.Model;
using System.Data.Entity;
using HROpenEnrollment.Data.EntityFramework;

namespace HROpenEnrollment.Data.EntityFramework
{
    public class Populate : DropCreateDatabaseIfModelChanges<OpenEnrollmentContext>
    { 
```

是什么赋予了？我一直到 System.Data.Entity 但在那之后它什么也找不到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:22:03.877

您是否安装了实体框架 5？只有第 4 版的 System.Data.Entity dll 将一无所获。

# php - 是否有网络服务/API 可以在线获取 PDF 的屏幕截图/缩略图？

> ID：11657809
> 
> 赞同：0
> 
> 时间：2012-07-25T20:08:48.927
> 
> 标签：php, web-services, api, pdf

我尝试了许多屏幕截图服务，但到目前为止没有一个可以盖住 PDF 并制作缩略图。

我也看到过为此目的编写脚本，但这一切都依赖于安装 Ghostscript 和 ImageMagick，而且这个应用程序将位于共享服务器上，并且没有安装它们。

该站点的管理员将不断上传新的 PDF，并希望显示第一页的缩略图。有人见过可以产生这些的网络服务吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:25:39.630

您可能真的应该将您的（共享）托管更改为至少可以使用 ImageMagick*转换*的主机：

```
convert -scale '600x600+0+0>' some.pdf[0] some_thumb.png 
```

绕过这样的限制很难，多付几美元（甚至在其他地方支付相同的金额）肯定值得付出努力。

# c# - 使用 xdocument 读取带有重复元素的 xml

> ID：11657820
> 
> 赞同：0
> 
> 时间：2012-07-25T20:09:51.960
> 
> 标签：c#, linq, linq-to-xml

我需要 xml 文件重复的项目。在“项目”内，我有标题、发布日期、描述、dc:creator 和 repeatwp:comment 等字段......请参阅下面的 xml 文件。

```
<channel>
    <item>
        <title>What Messed With My Head: Summit 2011</title>
        <link>http://www.wcablog.com/2011/08/what-messed-with-my-head-summit-2011/</link>
        <pubDate>Fri, 26 Aug 2011 09:10:04 +0000</pubDate>
        <dc:creator>willowcreekassociation</dc:creator>
        <guid isPermaLink="false">http://www.wcablog.com/?p=1706</guid>
        <description></description>
        <content:encoded>
            <![CDATA[text here]]>
        </content:encoded>
        <wp:comment>
            <wp:comment_id>1016</wp:comment_id>
            <wp:comment_author><![CDATA[]]></wp:comment_author>
            <wp:comment_author_email>thelmabowlen@gmail.com</wp:comment_author_email>
            <wp:comment_author_url></wp:comment_author_url>
            <wp:comment_author_IP></wp:comment_author_IP>
            <wp:comment_date>2011-08-26 20:13:00</wp:comment_date>
            <wp:comment_content><![CDATA[some text ]]></wp:comment_content>
        </wp:comment>
        <wp:comment>
            <wp:comment_id>1016</wp:comment_id>
            <wp:comment_author><![CDATA[]]></wp:comment_author>
            <wp:comment_author_email>thelmabowlen@gmail.com</wp:comment_author_email>
            <wp:comment_author_url></wp:comment_author_url>
            <wp:comment_author_IP></wp:comment_author_IP>
            <wp:comment_date>2011-08-26 20:13:00</wp:comment_date>
            <wp:comment_content><![CDATA[some text ]]></wp:comment_content>
        </wp:comment>
    </item>
    <item>
        <title>What Messed With My Head: Summit 2011</title>
        <link>http://www.wcablog.com/2011/08/what-messed-with-my-head-summit-2011/</link>
        <pubDate>Fri, 26 Aug 2011 09:10:04 +0000</pubDate>
        <dc:creator>willowcreekassociation</dc:creator>
        <guid isPermaLink="false">http://www.wcablog.com/?p=1706</guid>
        <description></description>
        <content:encoded>
            <![CDATA[text here]]>
        </content:encoded>
    </item>
    <item>
        <title>What Messed With My Head: Summit 2011</title>
        <link>http://www.wcablog.com/2011/08/what-messed-with-my-head-summit-2011/</link>
        <pubDate>Fri, 26 Aug 2011 09:10:04 +0000</pubDate>
        <dc:creator>willowcreekassociation</dc:creator>
        <guid isPermaLink="false">http://www.wcablog.com/?p=1706</guid>
        <description></description>
        <content:encoded>
            <![CDATA[text here]]>
        </content:encoded>
        <wp:comment></wp:comment>
        <wp:comment></wp:comment>
    </item>
</channel> 
```

我正在使用以下代码来读取 xml ..

```
XDocument xDoc = XDocument.Load("willowcreekassociationblog.wordpress.xml");

        var list = xDoc.Descendants("Occurrence")
        .Select(o => new List.XMLList
        {
            title = (string)o.Element("title"),
            URL = (string)o.Element("link"),
            Descr = (string)o.Element("Description"),
            StartDate = (DateTime)o.Element("pubdate"),
        })
        .ToList(); 
```

但我不知道如何用我上面的代码阅读 wp:comment ......谁能帮助我如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:18:24.960

你还没有说你想对数据做什么，这使得这个问题很难回答。您还没有显示`wp`命名空间别名的定义位置，但是嘿......

在您的通话中，您想要这样的*东西：*`Select`

```
Comments = o.Elements(wp + "comment")
            .Select(comment => Comment.FromXElement(comment))
            .ToList(); 
```

我发现在可以执行转换的域对象中提供静态方法很有帮助`XElement`- 它使事情更清晰。

`FromXElement`然后会是这样的：

```
public static Comment FromXElement(XElement x)
{
    return new Comment((int) x.Element(wp + "comment_id"),
                       (string) x.Element(wp + "author"),
                       ...);
} 
```

# jquery - IE7 和 jquery 的问题

> ID：11657824
> 
> 赞同：0
> 
> 时间：2012-07-25T20:09:57.730
> 
> 标签：jquery, internet-explorer-7

我写了一个函数，我把它绑定到我希望它格式化为 XXX-XXX-XXXX 的电话号码。这在 Chrome、FF 和 IE8+ 中有效，但在 IE7 中无效。想知道是否有人发现代码有任何问题或与 IE7 不兼容。在 IE7 中，每次您输入任何字符时，它都会将其删除，类似于您超过 12 个字符后应该执行的操作

```
(function( $ )
{
// This function formats a text field to a US 
// phone number as the user types the information.

$.fn.usphone = function() 
{
this.bind("change keyup input",function() 
{
 var curchrindex = this.value.length;
 var curval = $(this).val();
 var strvalidchars = "0123456789-";
 var onlyDigits = curval.replace(/\D/g,'');

 for (i =0; i < this.value.length; i++)
 {
      var curchar = curval[i];
      if (strvalidchars.indexOf(curchar) == -1) 
      {
       //delete the character typed if this is not a valid character.
       $(this).val(curval.substring(0, i) + curval.substring(i+1, this.value.length));
       return false;
      }
 }

 if (onlyDigits.length >= 10) {
    var tmpVal = '';
     for (i =0; i < 10; i++)
     {
          tmpVal += onlyDigits[i];
          if (i == 2 || i == 5) {
            tmpVal += '-';
          }
     }
    $(this).val(tmpVal);
 }

});
};
})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:40:36.293

出于[另一个问题](https://stackoverflow.com/questions/8397283/ie7-javascript-and-using-string-as-an-array)中解释的相同原因，IE7 不允许您使用`[]`. 所以你在哪里：

```
var curchar = curval[i]; 
```

IE7 正在返回`undefined`，这会使您的检查失败，然后强制它删除字符并退出。但是，如果您将其更改为：

```
var curchar = curval.charAt(i);
// ~~ OR ~~
var curchar = curval.substring(i,1); 
```

然后，您可以检索单个字符并继续。但是，我会提到您可以在以下方面使用一些重构：

*   `$(this).val()`在和之间交替`this.value`。
*   `this.value`在and之间交替`curval`（如果你要盯着变量中的一个值，但无论如何都要引用元素的原始属性，那么它会引发一个问题，为什么你首先要分配一个变量）。

# typo3 - TYPO3：在 tt_content 和 tt_news 中搜索

> ID：11657825
> 
> 赞同：1
> 
> 时间：2012-07-25T20:10:05.633
> 
> 标签：typo3

我想为我的网站构建一个搜索框，用于查找 tt_content 和 tt_news 中的内容。

谁能推荐我一个 TYPO3 扩展来实现我的目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:11:40.113

您是否尝试过索引搜索？[http://typo3.org/extension-manuals/doc_indexed_search/4.2.1/view/](http://typo3.org/extension-manuals/doc_indexed_search/4.2.1/view/)

# knockout.js - KoGrid JSON 动态小部件，带有嵌套的服务器调用

> ID：11657827
> 
> 赞同：2
> 
> 时间：2012-07-25T20:10:09.417
> 
> 标签：knockout.js

我正在使用 KOGrid 的仪表板上工作，我的想法是动态创建一堆小部件并将数据绑定到每个小部件的 kogrid 中。我有两个控制器（MVC4），其中第一个返回小部件名称列表，第二个返回 JSON 格式的每个小部件的结果（数据表）。我正在使用 JSON.Net JsonConvert 将结果转换为 json 格式，然后作为 JSON 内容结果传递。

我收到“未捕获的错误：初始化可观察数组时传递的参数必须是数组、null 或 undefined”。是嵌套的 JSON 调用有问题吗？处理复杂对象数组并将它们绑定到多个网格的最可靠方法是什么。如果我使用 knockout.mapping 有帮助吗？

var 小部件 = {};

```
var Widget = function (id, data) {
    this.id = ko.observableArray(id || []);     
    this.data = ko.observableArray(data || []);
};

var ViewModel = function (data) {
    var self = this;

    self.widgets = ko.observableArray(
                        ko.utils.arrayMap(data, function (i) {
                            return new Widget(i);
                        }));

    $.getJSON('Widgets/Get', null, function (data) {
        $.each(data, function (index, item) {
            $.getJSON('Home/GetWidgetDetails?widgetName=' + item.WIDGET_NAME,
                    function (result) {
                        self.widgets.push(new Widget({ id: item.WIDGET_NAME, data: result }));                            
                    });
        });
    });

};

 ko.applyBindings(new ViewModel(widgets)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:33:07.703

我猜你`data`在课堂上的道具上遇到了这个错误`Widget`？如果是这样，那么是的，它可能是`data`数组的 JSON 结构。如果它们本身是复杂的对象，您应该重复对 Widget 执行的相同过程。

1.  为这些项目创建一个对象定义。也许`WidgetItem`。
2.  用于`ko.utils.arrayMap`将`data`数组映射到`WidgetItem`.
3.  成功。

虽然没有看到结构`data`，我不能给你更具体的东西。

# javascript - 有没有办法确定 Javascript 客户端是否在移动网络上使用手机而不是 wifi？

> ID：11657828
> 
> 赞同：4
> 
> 时间：2012-07-25T20:10:12.833
> 
> 标签：javascript, mobile

我正在尝试使网站尽可能地响应电话用户，这意味着要删除一些需要带宽的功能。特别是，如果用户在 wifi 上但不在 3g/4g 上，我想加载外部字体。

一个很好的代表是“手机或平板电脑”，平板电脑通常是“良好连接”的分界线。这个有点用，但是有3g/4g的平板，还有wifi上的手机，所以不完美。

我认为这不可能变得更好，但也许 stackoverflow 的集体智慧已经找到了一种方法。这个可以检测吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:16:57.973

不要专注于移动设备，只需进行带宽测试即可。真正确定的唯一方法是测量将文件下载到他们的设备的时间。

在此处尝试接受的答案：[如何在 Javascript 中检测互联网速度？](https://stackoverflow.com/questions/5529718/how-to-detect-internet-speed-in-javascript)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:16:33.097

您可以尝试[此答案](https://stackoverflow.com/a/6823474/383744)中建议的解决方案，即使用`navigator.connection.type`. 但是，这绝对是非标准的，并且似乎仅限于 Android 设备。此外，请参阅[MDN 条目](https://developer.mozilla.org/en/DOM/window.navigator.connection)，其中提到了`metered`同一`navigator.connection`对象上的属性 - 这也可能很有用。

为了获得最佳覆盖：`var connection = navigator.connection || navigator.mozConnection || navigator.webkitConnection;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T20:16:24.483

我知道的唯一方法是在请求时（在 Web 服务器上）对请求的 IP 地址进行反向查找，看看它是否来自无线运营商。这样做的两个问题是；我不知道移动设备是否使用与有线网络不同的网络（无线版本与 Fios 版本），另一个问题是那些可能实际使用有线网络的公司的员工会出现无线网络。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T20:18:39.450

您可以尝试对非常常见的本地地址（只能通过 Wifi 访问）进行网络探测，例如`192.168.1.100`和朋友。就是这样：

*   使用处理程序创建一个`img`元素`onError`。
*   将`src`属性设置为您要“ping”的地址
*   如果你得到一个错误，那么你知道地址不存在
*   没有错误意味着地址存在

[我最初在Ajax Security](https://rads.stackoverflow.com/amzn/click/com/0321491939)（好书）中读到了这项技术。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T20:14:50.023

JavaScript 不提供任何连接到网络级连接类型的钩子。您可以做的最好的事情是下载一个已知的测试文件，并据此做出决定。

如果失败，只需询问用户是否更喜欢高/低带宽设置。

# mysql - ERROR 2002 (HY000): 无法通过套接字 '/var/run/mysqld/mysqld.sock' 连接到本地 MySQL 服务器 (2)

> ID：11657829
> 
> 赞同：548
> 
> 时间：2012-07-25T20:10:15.140
> 
> 标签：mysql, lamp, forgot-password, mysql-error-2002

我在[Ubuntu 12.04 LTS (Precise Pangolin) 上安装了](http://en.wikipedia.org/wiki/List_of_Ubuntu_releases#Ubuntu_12.04_LTS_.28Precise_Pangolin.29)[LAMP](http://en.wikipedia.org/wiki/LAMP_%28software_bundle%29)，然后在[phpMyAdmin](http://en.wikipedia.org/wiki/PhpMyAdmin)上设置了 root 密码。我忘记了密码，现在无法登录。当我尝试通过终端更改密码时，我得到：

> ERROR 2002 (HY000): 无法通过套接字 '/var/run/mysqld/mysqld.sock' 连接到本地 MySQL 服务器 (2)

我怎样才能解决这个问题？我无法打开、卸载或重新安装 LAMP。

* * *

## 回答 #1

> 赞同：333
> 
> 时间：2013-02-23T09:38:34.847

我曾经遇到过这个问题并通过安装解决了它`mysql-server`，因此请确保您已经安装了`mysql-server`，而不是`mysql-client`其他的。

该错误意味着该文件`/var/run/mysqld/mysqld.sock`不存在，如果您没有 install `mysql-server`，则该文件将不存在。所以在这种情况下，安装它

```
sudo apt-get install mysql-server 
```

但是如果`mysql-server`已经安装并且正在运行，那么您需要检查配置文件。

配置文件是：

```
/etc/my.cnf
/etc/mysql/my.cnf
/var/lib/mysql/my.cnf 
```

在`/etc/my.cnf`，socket 文件 config 可能是`/tmp/mysql.sock`，`/etc/mysql/my.cnf`socket 文件中的 config 可能是`/var/run/mysqld/mysqld.sock`. 所以，删除或重命名`/etc/mysql/my.cnf`，让mysql使用`/etc/my.cnf`，那么问题可能就解决了。

* * *

## 回答 #2

> 赞同：267
> 
> 时间：2012-07-25T20:32:49.560

尝试这个：

```
mysql -h 127.0.0.1 -P 3306 -u root -p <database> 
```

另外（查看它是否正在运行）：

```
telnet 127.0.0.1 3306 
```

可能它只是`my.cnf`文件中的错误配置，在`/etc/somewhere`（取决于[Linux 发行版](http://en.wikipedia.org/wiki/Linux_distribution)）。

* * *

## 回答 #3

> 赞同：168
> 
> 时间：2016-02-02T01:18:20.617

我看到了所有这些答案，但**没有一个**提供**重置密码**的选项并且**没有接受的答案**。实际的问题是他**忘记**了密码，所以他需要重置，而不是查看它是否正在运行（安装与否），因为这些答案中的大多数暗示。

* * *

## 重置密码

请按照以下步骤操作（如果您真的忘记了密码会很有帮助，并且您可以随时尝试，即使您目前不在这种情况下）：

1.  停止`mysql`

    ```
    sudo /etc/init.d/mysql stop 
    ```

    或者对于其他发行版本：

    ```
    sudo /etc/init.d/mysqld stop 
    ```

2.  以安全模式启动 MySQL

    ```
    sudo mysqld_safe --skip-grant-tables & 
    ```

3.  使用 root 登录 MySQL

    ```
    mysql -u root 
    ```

4.  选择要使用的 MySQL 数据库

    ```
    use mysql; 
    ```

5.  重置密码

    ```
    -- MySQL version < 5.7
    update user set password=PASSWORD("mynewpassword") where User='root';

    -- MySQL 5.7, mysql.user table "password" field -> "authentication_string"

    update user set authentication_string=password('mynewpassword') where user='root'; 
    ```

6.  刷新权限

    ```
    flush privileges; 
    ```

7.  重启服务器

    ```
    quit 
    ```

8.  停止并重新启动服务器

    Ubuntu 和 Debian：

    ```
    sudo /etc/init.d/mysql stop
    ...
    sudo /etc/init.d/mysql start 
    ```

在 CentOS、Fedora 和 RHEL 上：

```
 sudo /etc/init.d/mysqld stop
    ...
    sudo /etc/init.d/mysqld start 
```

9.  使用新密码登录

    ```
    mysql -u root -p 
    ```

10.  输入新密码并再次享受您的服务器，就像什么都没发生一样

这取自*[Reset a MySQL root password](https://www.rackspace.com/knowledge_center/article/mysql-resetting-a-lost-mysql-root-password)*。

* * *

## 回答 #4

> 赞同：72
> 
> 时间：2012-10-11T06:27:36.797

我尝试了以下步骤：

1.  登录`super user`或使用`sudo`
2.  `/etc/mysql/my.cnf`使用[gedit](http://en.wikipedia.org/wiki/Gedit)打开
3.  查找`bind-address`，并将其值更改为数据库服务器主机的 IP 地址。对我来说，它是`localhost`或`127.0.0.1`
4.  保存并关闭文件。
5.  回到终端并执行`sudo service mysql start`

它对我有用。

* * *

## 回答 #5

> 赞同：63
> 
> 时间：2013-06-19T07:46:08.703

在我的情况下，磁盘已满，mysqld 无法再启动。

尝试重启mysql服务。

```
> service mysql restart 
```

或者

```
> service mysql stop

> service mysql start 
```

如果它不识别`stop`命令，那么它肯定是磁盘空间。您应该在分区`mysql`中分配一些空间或使磁盘更大。

检查磁盘空间

```
> df -h 
```

* * *

## 回答 #6

> 赞同：44
> 
> 时间：2014-02-27T15:45:25.630

我通过执行以下命令解决了这个问题：

```
mysql.server start 
```

如果您在 Mac 上并使用 brew 安装 mysql，只需使用：

```
brew services start mysql 
```

* * *

## 回答 #7

> 赞同：39
> 
> 时间：2012-09-12T16:22:18.300

我有一个类似的问题。mysql 无法启动：

```
sudo service mysql start
start: Job failed to start 
```

如果我禁用 apparmor：

```
sudo aa-complain /etc/apparmor.d/* 
```

问题消失了。问题是 mysqld 试图访问 /run/mysqld/mysqld.sock 但 apparmor 配置文件只授予 /var/run/mysqld/mysqld.sock 权限（/var/run 符号链接到 /run，所以这些实际上是相同）。不知道为什么 mysqld 不使用 var 路径，因为这是在所有配置文件中设置的，但是您可以通过将以下内容添加到 /etc/apparmor.d/usr.sbin.mysqld 来解决问题

```
/run/mysqld/mysqld.pid rw,
/run/mysqld/mysqld.sock rw, 
```

* * *

## 回答 #8

> 赞同：31
> 
> 时间：2014-07-30T09:43:17.430

我通过终止`mysql`进程解决了这个问题：

```
ps -ef | grep mysql
kill [the id] 
```

然后我再次启动服务器：

```
sudo /etc/init.d/mysql restart 
```

但`start`也可以：

```
sudo /etc/init.d/mysql start 
```

然后我以 登录`admin`，我就完成了。

* * *

## 回答 #9

> 赞同：22
> 
> 时间：2012-07-25T20:32:34.100

不知何故，MySQL 服务器进程没有创建套接字，或者客户端在错误的位置寻找套接字。

我的第一个建议是检查 MySQL 服务器是否正在运行。第二个建议可能是，MySQL 服务器是否在另一台主机上运行？如果是这样，请将`-h <hostname>`标志添加到终端中的 MySQL 客户端。

如果 MySQL 确实在运行，并且在本地运行，请检查您的`my.cnf`文件。应该有一条线

```
socket = /var/run/mysqld/mysqld.sock 
```

看看这是否与您在帖子中提到的套接字位置相匹配。

根据经验，我会说最有可能的情况是您的 MySQL 服务器根本没有运行，或者没有在与您从终端运行 MySQL 客户端的主机上运行。

* * *

## 回答 #10

> 赞同：21
> 
> 时间：2015-08-18T00:32:50.967

在我不得不重新启动生产服务器后，我刚刚遇到了同样的问题。我在 DigitalOcean 液滴上运行 Debian 8.1 (Jessie)。

这是我为解决我的问题所做的：

1.  检查文件是否`/var/run/mysqld/mysqld.sock`存在。如果没有，请通过输入手动创建它`touch /var/run/mysqld/mysqld.sock`（这是我必须做的）。

2.  所以 MySQL 进程可以使用这个文件。通过输入更改所述文件的所有权`chown mysql /var/run/mysqld/mysqld.sock`。

3.  `service mysql restart`完成“2”后，输入or重新启动 MySQL 服务`/etc/init.d/mysql restart`。

完成以上步骤后，我的问题就解决了。我很少遇到这个问题，可能有更好的方法，所以如果需要的话，一定要提供建设性的反馈:)。

* * *

## 回答 #11

> 赞同：19
> 
> 时间：2013-11-17T11:02:15.087

检查`"bind-adress"`my.cnf 中的参数。

否则尝试使用以下命令：

```
mysql -h 127.0.0.1 -P 3306 -u root -p 
```

*   -h 代表主机`127.0.0.1`，即 localhost

*   -P （注意 -P 为大写） port `3306`，即 MySQL 的默认端口

* * *

## 回答 #12

> 赞同：15
> 
> 时间：2014-07-18T06:24:29.457

您的 mysql-server 可能没有运行。`mysql.server start`通过在终端中键入来确保它运行。

* * *

## 回答 #13

> 赞同：12
> 
> 时间：2014-03-19T06:38:28.773

我想每当你得到错误

> 错误 2002 (HY000): 无法通过套接字 '/var/lib/mysql/mysql.sock' 连接到本地 MySQL 服务器

我会建议首先检查您的`mysql`守护程序是否正在运行......大多数情况下默认情况下它不会运行。您可以通过`/etc/init.d/mysqld status`.

如果它没有运行，请先启动它：

```
.../etc/init.d/mysqld start. 
```

我敢打赌它会 110% 工作。

* * *

## 回答 #14

> 赞同：12
> 
> 时间：2015-10-30T06:11:09.630

如果您使用的是[Amazon EC2](http://en.wikipedia.org/wiki/Amazon_Elastic_Compute_Cloud)，并且您在实例上遇到此问题，那么您只需执行以下操作：

```
sudo yum install mysql-server
sudo service mysqld restart 
```

Amazon EC2 没有安装服务器（仅安装了客户端），因此如果出现这种情况，您需要在您的实例上安装它，然后尝试

```
 mysql -u root -p 
```

检查是否有效。

* * *

## 回答 #15

> 赞同：11
> 
> 时间：2015-02-25T00:19:04.303

这对我有用：

```
ln -s /var/lib/mysql/mysql.sock /tmp/mysql.sock
service mysql restart 
```

这将创建一个链接。

* * *

## 回答 #16

> 赞同：11
> 
> 时间：2015-10-20T20:43:25.567

而不是使用本地主机：

```
mysql -u myuser -pmypassword -h localhost mydatabase 
```

使用 127.0.0.1

```
mysql -u myuser -pmypassword -h 127.0.0.1 mydatabase 
```

（另请注意，-p 和 mypassword 之间没有空格）

享受 ：）

* * *

## 回答 #17

> 赞同：10
> 
> 时间：2018-10-19T13:45:01.353

我也面临同样的问题，如果您`mysql server`默认情况下未运行，它将在几秒钟后再次停止，因此您再次运行（`$ sudo service mysql start` ）命令，如果知道，您可以更改。

对于那个使用命令

```
$ sudo service mysql start 
```

（如果需要，请输入用户密码，因为我们使用`sudo`）然后运行

```
$ sudo mysql -u root -p          (put user password if required ) 
```

现在你有了你的数据库

* * *

## 回答 #18

> 赞同：9
> 
> 时间：2014-02-03T01:34:11.273

我也遇到了这个问题，但我只是这样做了：

```
sudo service mysql restart 
```

它对我有用。

* * *

## 回答 #19

> 赞同：9
> 
> 时间：2014-11-01T14:29:17.993

确保你有重要数据库的备份，然后**尝试卸载 MySQL**相关的东西：

```
apt-get remove --purge mysql\* 
```

然后**再次安装**：

```
apt-get install mysql-server mysql-client 
```

这对我有用，并且保留了数据。

如果 PHP MySQL 显示错误，您可能需要**重新安装 PHP MySQL**：

```
apt-get install php5-fpm php5-mysql 
```

* * *

## 回答 #20

> 赞同：9
> 
> 时间：2020-02-09T11:05:57.013

看来您的 MYSQL 已停止。使用以下命令再次启动 MySQL

```
sudo service mysql start 
```

* * *

## 回答 #21

> 赞同：8
> 
> 时间：2017-06-20T01:55:54.137

**我找到了解决方案**

***在触发***命令之前：`mysql_secure_installation`

*   步骤1：`sudo systemctl stop mariadb`
*   第2步：`sudo systemctl start mariadb`
*   第 3 步：`mysql_secure_installation`

然后它会询问 root 密码，您只需**按** ***Enter***并设置新的 root 密码。

* * *

## 回答 #22

> 赞同：7
> 
> 时间：2013-01-25T22:07:39.707

如果您的安装是最近的，您应该确认您的安装是否是安装服务器... as mysql-server-5.5 .. 也许您只安装了“mysql” .. 这只是客户端而不是服务器。

* * *

## 回答 #23

> 赞同：7
> 
> 时间：2013-11-01T23:17:47.863

如果您的 Linux 机器上安装了[XAMPP](http://en.wikipedia.org/wiki/XAMPP)，请尝试将`my.cnf`文件`/opt/lampp/etc/my.cnf`从`/etc/my.cnf`.

然后，`mysql -u root`再次运行...您现在应该拥有正确的套接字并能够运行 MySQL 客户端。

* * *

## 回答 #24

> 赞同：6
> 
> 时间：2014-06-13T06:08:25.713

就我而言，它通过一些研发工作：

我可以使用连接到 MySQL

```
root-debian#mysql -h 127.0.0.1 -u root -p 
```

但它不适用于`mysql -u root -p`.

`bind-address`我在*my.cnf*中没有找到任何内容。所以我排除了导致我登录问题的`socket=/var/lib/mysql/mysqld.sock`参数`my.cnf`。

重启服务后一切正常：

```
root@debian:~# mysql -u root -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or \g.
Your MySQL connection id is 5
Server version: 5.6.19 MySQL Community Server (GPL) 
```

* * *

## 回答 #25

> 赞同：6
> 
> 时间：2014-01-21T20:03:40.990

在我的情况下，默认端口 3306 正在被其他进程使用，因此它没有启动。在我停止其他服务并执行之后`sudo service mysql start`，它运行良好。顺便说一句，您可以使用类似的东西`sudo lsof -Pn -iTCP:3306`来查看谁可能正在使用该端口。

* * *

## 回答 #26

> 赞同：6
> 
> 时间：2017-05-09T06:57:30.867

就我而言，当我运行时，似乎我真的无法杀死 mysql 进程

```
sudo service mysql stop
ps -ef | grep mysql 
```

mysql 进程一直在那里，看起来它正在阻塞套接字文件，并且新的 mysql 进程无法自己创建它。

所以这有帮助

```
cd /var/run
sudo cp mysqld/ mysqld.bc -rf
sudo chown mysql:mysql mysqld.bc/
sudo service mysql stop
sudo cp mysqld.bc/ mysqld -rf
sudo chown mysql:mysql mysqld -R
sudo /usr/sbin/mysqld --skip-grant-tables --skip-networking & 
```

现在我可以使用登录数据库

```
mysql -u root 
```

然后更新root密码：

```
UPDATE user SET authentication_string=password('YOURPASSWORDHERE') WHERE user='root';
FLUSH PRIVILEGES; 
```

**PS**：我在更新 root 密码时遇到了问题，似乎是“auth_socket”插件的问题，所以我必须创建具有完全权限的新用户

```
insert into user set `Host` = "localhost", `User` = "super", `plugin` = "mysql_native_password", `authentication_string` = NULL, `password_expired` = "N", `password_lifetime` = NULL, `account_locked` = "N", `Select_priv` = "Y",
`Insert_priv` = "Y", `Update_priv` = "Y", `Delete_priv` = "Y", `Create_priv` = "Y", `Drop_priv` = "Y", `Reload_priv` = "Y", `Shutdown_priv` = "Y", `Process_priv` = "Y", `File_priv` = "Y",
`Grant_priv` = "Y",  `References_priv` = "Y", `Index_priv` = "Y", `Alter_priv` = "Y", `Show_db_priv` = "Y", `Super_priv` = "Y", `Create_tmp_table_priv` = "Y", `Lock_tables_priv` = "Y",
`Execute_priv` = "Y", `Repl_slave_priv` = "Y",  `Repl_client_priv` = "Y",  `Create_view_priv` = "Y", `Show_view_priv` = "Y", `Create_routine_priv` = "Y", `Alter_routine_priv` = "Y",
`Create_user_priv` = "Y",  `Event_priv` = "Y", `Trigger_priv` = "Y", `Create_tablespace_priv` = "Y"; 
```

这将创建没有密码的用户“super”，然后您可以连接`mysql -u super`

* * *

## 回答 #27

> 赞同：6
> 
> 时间：2019-10-26T19:53:08.653

拳头，尝试重新启动它

> 服务 mysql 停止

> 服务 mysql 启动

如果上面没有解决问题，现在让我们去......

完全卸载 MySQL

```
sudo apt-get remove --purge mysql\* 
```

重新安装它

```
sudo apt install mysql-server mysql-client 
```

测试它是否运行

```
sudo mysql 
```

安装php驱动

```
sudo apt install php7.4 php7.4-fpm php7.4-mysql php7.4-cgi php7.4-cli php7.4-common 
```

您可以用 php7.x 或 php8.0.12 或更高版本替换 php7.4 非常好！

* * *

## 回答 #28

> 赞同：6
> 
> 时间：2017-06-01T09:12:03.537

在 Debian 服务器 Jessie 上，我的工作解决方案是简单地做

```
service mysql restart
service mysql reload 
```

作为根用户

* * *

## 回答 #29

> 赞同：6
> 
> 时间：2018-08-16T00:48:21.470

我用重启mysql解决了这个问题

`/etc/init.d/mysql stop`

和

`/etc/init.d/mysql start`

而已。

* * *

## 回答 #30

> 赞同：5
> 
> 时间：2014-11-15T17:54:47.410

打开终端并输入：

```
sudo apt-get purge mysql-client-core-5.6

sudo apt-get autoremove

sudo apt-get autoclean

sudo apt-get install mysql-client-core-5.5

sudo apt-get install mysql-server 
```

MySQL 数据库核心客户端和 MySQL 服务器包都将是相同的 5.5 版本。MySQL Client 5.5 和 MySQL Server 5.5 是 Ubuntu 14.04 中这些包的当前“最佳”版本，由包维护者确定。

如果您希望安装 MySQL Client 5.6 和 MySQL Server 5.6，您还可以在 Ubuntu 软件中心找到 mysql-client-core-5.6 和 mysql-server-5.6 软件包。重要的是客户端和服务器版本号在任何一种情况下都匹配。

这对我有用。

* * *

## 回答 #31

> 赞同：5
> 
> 时间：2014-05-16T20:47:21.767

检查您是否拥有正确的权限：

```
sudo chmod 755 /var/lib/mysql/mysql 
```

我有同样的问题，这对我有用。完成此操作后，我能够启动 MySQL。

* * *

## 回答 #32

> 赞同：5
> 
> 时间：2014-08-07T19:06:19.053

在 Ubuntu 14.04 (Trusty Tahr) 上也是如此。

如果您已经安装了 XAMPP，安装 mysql-server 不是解决方案，因为您将访问另一个 MySQL！

您必须使用正确的套接字才能访问。通常是这样的：

```
/opt/lampp/var/mysql/mysql.sock 
```

相反，将其更改为：

```
/var/run/mysqld/mysqld.sock 
```

* * *

## 回答 #33

> 赞同：5
> 
> 时间：2012-11-01T15:56:37.050

根据经验，我说您需要先检查服务器是否正在运行，然后再尝试配置 MySQL。最后的解决方案是重新安装 MySQL。

* * *

## 回答 #34

> 赞同：5
> 
> 时间：2015-09-08T21:19:32.120

```
mysqld stop
mysql.server start 
```

* * *

## 回答 #35

> 赞同：4
> 
> 时间：2014-02-18T06:39:46.637

我有同样的问题。经过大量搜索，我没有找到任何答案。

最后查看`/tmp`目录，权限是755，改成777，mysqld启动正常，没有任何问题。

* * *

## 回答 #36

> 赞同：4
> 
> 时间：2014-10-21T14:07:32.790

我遇到过同样的问题。如果您的 MySQL 服务被关闭，有时会发生这种情况。

所以你必须启动它：

```
sudo service mysql start 
```

* * *

## 回答 #37

> 赞同：4
> 
> 时间：2016-12-27T11:41:19.497

它现在工作...

我已经按照教程*[在 Mac OS X 上使用 Homebrew 安装 MariaDB 10.1.16](https://mariadb.com/resources/blog/installing-mariadb-10116-mac-os-x-homebrew)*来克服这个问题。

但是不要忘记杀死或卸载旧的 MariaDB 安装。

* * *

## 回答 #38

> 赞同：3
> 
> 时间：2016-07-17T13:16:08.187

对我来说，更新解决了这个问题：

在 Ubuntu 上：

```
sudo apt-get update
sudo apt-get upgrade 
```

在 CentOS 上：

```
sudo yum update 
```

* * *

## 回答 #39

> 赞同：3
> 
> 时间：2019-12-16T16:09:29.793

当我停止 mysql 服务时，我得到了完全相同的错误，这里如何解决它：通过（重新）使用以下命令启动 mysql：

```
sudo systemctl start mysql 
```

或者

```
sudo systemctl restart mysql 
```

* * *

## 回答 #40

> 赞同：3
> 
> 时间：2017-09-05T06:05:58.583

对于 CentOS Linux 7.3 版，mysql.sock 文件路径为`/var/lib/mysql/mysql.sock`

编辑`/etc/my.cnf`文件并放入下面的条目这将解决您的问题。

```
[client]
user=root
password=Passw0rd
port=3306
socket=/var/lib/mysql/mysql.sock
[mysqld]
bind-address=0.0.0.0 
```

在此之后重新启动服务

```
service mysql restart 
```

* * *

## 回答 #41

> 赞同：3
> 
> 时间：2016-10-04T14:26:14.283

尝试重新启动服务器

```
sudo /usr/local/mysql/support-files/mysql.server start 
```

如果有任何错误，请按照以下步骤操作

1.  `mysqld`

您将看到以下日志。请注意此处 MySQL 目录的突出显示部分

> mysqld：无法将目录更改为 **“/usr/local/mysql-5.7.14-osx10.11-x86_64/data/”**（错误代码：13 - 权限被拒绝）2016-10-04T14:09:19.392581Z 0 [警告] 带有隐式 DEFAULT 值的 TIMESTAMP 已弃用。请使用 --explicit_defaults_for_timestamp 服务器选项（有关详细信息，请参阅文档）。2016-10-04T14:09:19.392847Z 0 [警告] --secure-file-priv 的不安全配置：当前值不限制生成文件的位置。考虑将其设置为有效的非空路径。2016-10-04T14:09:19.392921Z 0 [注意] mysqld (mysqld 5.7.14) 从进程 1402 开始 ... 2016-10-04T14:09:19.397569Z 0 [警告] 无法创建测试文件
> /usr /local/mysql-5.7.14-osx10.11-x86_64/data/Sudharshan.lower-test
> 2016-10-04T14:09:19.397597Z 0 [警告] 无法创建测试文件 /usr/local/mysql-5.7.14-osx10.11-x86_64/data/Sudharshan.lower-test
> 2016-10-04T14： 09:19.397712Z 0 [错误] 无法将 datadir 设置为 /usr/local/mysql-5.7.14-osx10.11-x86_64/data/
> 2016-10-04T14:09:19.397776Z 0 [错误] 中止
> 2016-10 -04T14:09:19.397795Z 0 [Note] Binlog end
> 2016-10-04T14:09:19.397925Z 0 [Note] mysqld: 关机完成

2.  `sudo chown -R _mysql:_mysql /usr/local/mysql-5.7.14-osx10.11-x86_64`

注意上一个日志中的 MySQL 文件夹路径***/usr/local***，在我的例子中是***mysql-5.7.14-osx10.11-x86_64***，你必须根据你机器上提供***的日志来更新它***对 MySQL 目录的**读取权限**

3.  `sudo /usr/local/mysql/support-files/mysql.server start`

> 启动 MySQL
> 成功！

* * *

## 回答 #42

> 赞同：3
> 
> 时间：2018-10-30T11:56:10.667

您缺少创建 /var/run/mysqld 目录的权限。所以请创建并授予以下权限。

*   mkdir -p /var/run/mysqld
*   chown mysql:mysql /var/run/mysqld

* * *

## 回答 #43

> 赞同：2
> 
> 时间：2013-06-29T10:16:58.823

您可以首先检查服务是否正在运行，使用：

```
ps ax | grep mysql 
```

我得到了这样的回应：

```
6104 pts/0    S      0:00 /bin/sh /usr/bin/mysqld_safe
6431 pts/0    Sl     0:01 /usr/sbin/mysqld --basedir=/usr --datadir=/var/lib/mysql --plugin-dir=/usr/lib/mysql/plugin --user=mysql --pid-file=/var/run/mysqld/m 
```

没有响应意味着服务没有运行，所以这样做：

```
service  mysql start 
```

* * *

## 回答 #44

> 赞同：2
> 
> 时间：2013-09-19T13:52:49.733

就我而言，问题是我所有数据库中的页面损坏（检查 mysql 错误日志）。

我用[强制 InnoDB Recovery](http://dev.mysql.com/doc/refman/5.5/en/forcing-innodb-recovery.html)解决了它。诀窍是编辑 /etc/mysql/my.cnf 并添加

```
innodb_force_recovery = 4 
```

略低于

```
[mysqld] 
```

然后重启mysql。现在检查一切正常后，再次删除线。

* * *

## 回答 #45

> 赞同：2
> 
> 时间：2014-08-30T21:07:16.273

只需将您的`/opt/lampp/etc/my.cnf`文件复制到`/etc/mysql/my.cnf`.

在终端类型中：

```
mysql -u root 
```

您将收到`mysql>`提示：

```
mysql> Update mysql.user set Password=PASSWORD('your_password') where user='root';

mysql> FLUSH PRIVILEGES; 
```

* * *

## 回答 #46

> 赞同：2
> 
> 时间：2015-05-15T08:21:36.620

安装mysql服务器：

```
sudo apt-get install mysql-server
enter password as root 
```

登录：

```
mysql -u root -p root 
```

这里是安装 MySQL 服务器时给出的`-u user name`。`-p password`它会像对我一样有效。

* * *

## 回答 #47

> 赞同：2
> 
> 时间：2021-02-01T18:38:23.270

对我来说 mysql 没有运行，所以我修复了它

```
sudo /etc/init.d/mysql start 
```

* * *

## 回答 #48

> 赞同：2
> 
> 时间：2018-12-30T11:10:55.573

我的服务器存储已满，这导致 Mysql 无法启动。[从这里](https://bobcares.com/blog/mysql-stop-unknown-instance/)得到想法。增加 HD 并重新启动解决了该问题。

* * *

## 回答 #49

> 赞同：1
> 
> 时间：2013-12-19T11:29:42.097

为防止发生此问题，您必须从命令行正常关闭服务器，而不是关闭服务器电源。

```
shutdown -h now 
```

这将在关闭机器之前停止正在运行的服务。

基于 Centos，当你遇到这个问题时，另一种方法是移动 mysql.sock：

```
mv /var/lib/mysql/mysql.sock /var/lib/mysql/mysql.sock.bak

service mysqld start 
```

重新启动服务会创建一个名为 mqsql.sock 的新条目

* * *

## 回答 #50

> 赞同：1
> 
> 时间：2014-03-12T17:47:24.340

您在本地运行，这意味着您的客户端与您的服务器在同一台机器上运行。

确保您的 Unix 用户实际上可以访问/阅读`/var/run/mysqld/mysqld.sock`：

```
ls -als /var
ls -als /var/run
ls -als /var/run/mysqld
ls -als /var/run/mysqld/mysqld.sock 
```

如果没有，请咨询您的系统管理员或[数据库管理员](http://en.wikipedia.org/wiki/Database_administrator)，以提供对这些目录的足够读取/执行访问权限，或将套接字文件移至其他位置。

* * *

## 回答 #51

> 赞同：1
> 
> 时间：2014-06-15T10:49:57.647

我遇到过同样的问题。我找到了这个。

```
ERROR 2002 (HY000): Can’t connect to local MySQL server through socket ‘/var/lib/mysql/mysql.sock’ 
```

这是因为您`mysqld`在启动 MySQL 客户端之前没有运行守护程序。该文件`/var/lib/mysql/mysql.sock`将在运行 MySQL 的第一个实例时自动创建。

修理：

首先启动 MySQL 守护进程，然后键入`mysql`：

```
/etc/init.d/mysqld start
mysql 
```

### 更改 MySQL 根密码

默认情况下，MySQL 数据库的 root 密码为空。从安全的角度来看，将 MySQL 根密码更改为新密码是个好主意。

```
mysql> USE mysql;
mysql> UPDATE user SET Password=PASSWORD('newpassword') WHERE user='root';
mysql> FLUSH PRIVILEGES; 
```

完成后，通过登录检查：

```
mysql -u root -p
Enter Password: <your new password> 
```

* * *

## 回答 #52

> 赞同：1
> 
> 时间：2014-02-08T08:05:30.297

我现在刚刚遇到这个问题并解决了。

尽管您安装了 mysql-server，但需要运行守护程序才能让客户端连接到它。

首先检查mysql服务器是否正在运行：

```
netstat -tap | grep mysql 
```

您应该看到如下内容：

```
$ sudo netstat -tap | grep mysql
tcp        0      0 localhost:mysql         *:*          LISTEN     6639/mysqld 
```

如果您没有运行服务器，请通过以下命令启动守护程序：

```
/etc/init.d/mysql restart 
```

如果已安装，这应该可以解决您的问题。

* * *

## 回答 #53

> 赞同：1
> 
> 时间：2013-10-05T10:25:36.557

如果您使用的是 Ubuntu，则可能是权限问题。

检查您的目录权限。在根组中是不够的，还要在 MySQL 写入的目录上使用[chmod](https://en.wikipedia.org/wiki/Chmod)（例如，`/var/run/mysqld/`用于创建`mysqld.pid`文件）。

这对我很有帮助。

* * *

## 回答 #54

> 赞同：1
> 
> 时间：2013-03-18T08:51:41.667

我无法解释，但在 kubuntu 12.04.2 之后

> sudo apt-get autoremove linux-headers-3.2.0-37 linux-headers-3.2.0-37-generic

它开始起作用了

* * *

## 回答 #55

> 赞同：1
> 
> 时间：2014-04-18T11:28:20.667

还要检查您的`my.conf`( `/etc/mysql/my.cnf`) 并查看绑定地址是否设置为 127.0.0.1。

如果不是，这可能会导致此问题。

* * *

## 回答 #56

> 赞同：1
> 
> 时间：2015-06-17T11:38:48.853

**这个答案与在具有少量 RAM 的机器上更新到 MySQL 5.6 有关**

在我的 Debian 8 (Jessie) 上从 MySQL 5.5 升级到 5.6 时，我遇到了同样的问题。MySQL 没有启动（状态显示为活动/退出）并且简单地制作`service mysql start`不起作用，因为我从`/var/logs/mysql/error.log`日志文件中发现：

```
InnoDB: Initializing buffer pool, size = 128.0M
InnoDB: mmap(136019968 bytes) failed; errno 12
Cannot allocate memory for the buffer pool 
```

内存不够：我只有 256 MB 的 RAM。

在 MySQL 中有一个设置，`performance_schema`. 默认情况下，它在 MySQL 5.5 中是关闭的。

[https://dev.mysql.com/doc/refman/5.5/en/performance-schema-startup-configuration.html](https://dev.mysql.com/doc/refman/5.5/en/performance-schema-startup-configuration.html)

但是在 MySQL 5.6 中默认是打开的，只需在`/etc/mysql/my.cnf`文件中添加以下行并重新启动，它就可以工作。

```
performance_schema = off 
```

**警告：**关闭此设置您可能会遇到性能问题，但我想在开发环境中不会有问题。

此外，这里有一篇文章可能有助于配置 MySQL 以使用最少的内存，*[配置 MySQL 以使用最少的内存](http://www.tocker.ca/2014/03/10/configuring-mysql-to-use-minimal-memory.html)*（Web 存档链接，以防原始链接将来过期[https://web.archive.org/web/20201112041608/ http://www.tocker.ca/2014/03/10/configuring-mysql-to-use-minimal-memory.html](https://web.archive.org/web/20201112041608/http://www.tocker.ca/2014/03/10/configuring-mysql-to-use-minimal-memory.html)）。

* * *

## 回答 #57

> 赞同：1
> 
> 时间：2021-09-09T14:59:56.840

就我而言，我的问题是我试图从我的 linux 终端访问，而不是从我的带有 mysql 的 docker 容器访问。

* * *

## 回答 #58

> 赞同：1
> 
> 时间：2015-10-01T14:18:53.427

对我来说是：

打开`/etc/mysql/my.cnf`或`/etc/my.cnf`搜索“绑定地址”。它是`127.0.0.1`。我将它转换为 localhost，所以行结果应该是'bind-address = localhost'。

否则，您应该使用存在于 bind-address 指令中的 IP 地址运行 MySQL 服务器，即`mysql -h 127.0.0.1`.

* * *

## 回答 #59

> 赞同：1
> 
> 时间：2021-01-19T06:42:39.427

就我而言，我无法访问 mysql，经过 3 天的研究，我找到了解决方案。这是完美的解决方案，因为我已经搜索过`/var/run/mysqld/mysqld.sock`，但没有找到该文件夹​​。您可以在 putty 上运行下面列出的命令。

```
sudo mkdir /var/run/mysqld/
sudo chown -R mysql:mysql /var/log/mysql
sudo mysqld --basedir=/usr --datadir=/var/lib/mysql --user=mysql --socket=/var/run/mysqld/mysqld.sock
sudo /etc/init.d/mysql restart 
```

您将节省宝贵的时间。

* * *

## 回答 #60

> 赞同：1
> 
> 时间：2019-11-06T11:58:03.107

就我而言，我的 mysql 数据文件夹中的文件已损坏

> mv /var/lib/mysql /var/lib/mysql_old

所以当我有备份时，我将目录移动到“_old”，然后再次启动 docker。它使用干净的数据创建了一个新文件夹 mysql ，并且套接字工作。

* * *

## 回答 #61

> 赞同：1
> 
> 时间：2016-02-20T22:23:16.343

我的服务器上的简单解决方案：在使用我的 MySQL 数据库迁移到新的 Debian 7 服务器后，我的[主机文件](http://en.wikipedia.org/wiki/Hosts_(file))中缺少第二个**本地 IP 地址**。添加这个解决了警告：`127.0.1.1`

```
echo -e "\n127.0.1.1       $(hostname)" >> /etc/hosts 
```

* * *

## 回答 #62

> 赞同：1
> 
> 时间：2020-03-13T13:06:18.267

安装 mysql-server 解决了这个问题

```
sudo apt-get install mysql-server 
```

* * *

## 回答 #63

> 赞同：1
> 
> 时间：2019-05-14T23:10:47.313

在 Ubuntu 18:10 Linode 1GB Ram 中，我遇到了这个错误。在检查 /var/log/mysql/error.log 之后，我遇到了这个：

[注意] InnoDB：innodb_empty_free_list_algorithm 已更改为 legacy，因为缓冲池大小较小。为了使用退避，将缓冲池至少增加到 20MB。

我将我的 linode 升级到 2GB 并使用 sudo mysql 重新启动了 mariadb。接下来 mysql_secure_admin 运行，但没有为用户设置 root 密码-as ususl unitl 将 root 用户更改为使用 mysql_native_password 插件。不确定，但似乎创建了 sock，但由于我的 VPS 内存不足，服务器关闭了。

* * *

## 回答 #64

> 赞同：1
> 
> 时间：2021-10-24T06:16:36.653

如果您的服务器/数据库工作正常并且突然出现此问题，那么只需尝试重新启动您的数据库服务器。对于 Centos，我使用以下命令，并且我的问题“连接被拒绝”“无法通过套接字连接到本地 mysql”已修复

```
sudo systemctl start mysqld 
```

* * *

## 回答 #65

> 赞同：0
> 
> 时间：2014-02-25T12:30:48.680

您应该验证组的所有者`/var/run/mysqld`。如果不是`mysql.mysql`，请执行以下操作：

```
su root
chown mysql.mysql /var/run/mysqld 
```

* * *

## 回答 #66

> 赞同：0
> 
> 时间：2014-06-12T20:41:15.217

```
sudo touch /var/lib/mysql/.force_upgrade
sudo rcmysql restart 
```

当我遇到这个问题时为我工作

* * *

## 回答 #67

> 赞同：0
> 
> 时间：2014-12-04T19:24:18.857

我在 Ubuntu 上有这个，我发现，mysqld 的实例不止一个。

之前的似乎还没有完全停止，而新的已经开始了。运行“/etc/init.d/mysql stop”没有帮助，它总是返回“OK”，之后立即自动启动一个新实例：

```
 $ sudo /etc/init.d/mysql stop
         * Stopping MySQL database server mysqld        [ OK ] 
        $ pgrep mysql
        28315
        $ sudo /etc/init.d/mysql stop
         * Stopping MySQL database server mysqld        [ OK ] 
        $ pgrep mysql
        28570
        $ sudo /etc/init.d/mysql stop
         * Stopping MySQL database server mysqld        [ OK ] 
        $ pgrep mysql
        28763
        ..... etc ... 
```

幸运的是，下面的命令已经解决了这个问题：

```
 $ sudo service mysql stop
    mysql stop/waiting

    $ ps -ef | grep mysql
    29841 26858  0 10:59 pts/8    00:00:00 grep --color=auto mysql <--- IT's gone ! 
```

之后，我能够再次启动 mysql 并看到 mysql.sock 已成功创建。

* * *

## 回答 #68

> 赞同：0
> 
> 时间：2015-03-09T02:41:33.897

我也遇到了这个问题，这些答案都没有帮助我。问题有所不同，但错误是由 OP 描述的。

我检查了 MySQL 的日志`/var/log/mysql`，我看到了这个：

```
150309  5:03:19 [ERROR] /usr/sbin/mysqld: unknown variable   'lower_case_tables_names=1' 
```

我打开了`/etc/mysql/my.cnf`文件并取消了该行的注释`#`。之后，我能够连接到数据库。

老实说，我不知道问题出在哪里。由于维护，linode服务器计划重新启动，并且这个错误突然出现。

* * *

## 回答 #69

> 赞同：0
> 
> 时间：2014-04-23T16:16:53.160

您是否检查过 LAMPP 是否正在运行？

```
sudo bash <path>/lampp start 
```

对我来说，路径是

```
sudo bash /opt/lampp/lampp start 
```

* * *

## 回答 #70

> 赞同：0
> 
> 时间：2013-07-29T09:40:16.897

我通过从我`/etc/mysql/my.conf`的`mysqld`部分（[mysqld]）中删除这一行来解决这个问题：

```
default-character-set=utf8 
```

重新启动，它工作正常。

* * *

## 回答 #71

> 赞同：0
> 
> 时间：2014-03-13T22:36:19.477

升级 MySQL 为我修复了它。在基于 RHEL 的服务器上，只需运行：

```
sudo yum upgrade mysql-server 
```

* * *

## 回答 #72

> 赞同：0
> 
> 时间：2014-05-06T10:29:45.793

可能是配置文件的问题。我遇到了类似的问题，我在网上找不到解决方案。我注意到我有两个`my.cnf`文件，一个`/etc/mysql`在`/etc`. 请按照以下步骤操作：

1.  使用 .检查`my.cnf`计算机上的文件`locate my.cnf`。

2.  如果有两个条目，即`/etc/my.cnf`and `/etc/mysql/my.cnf`，则重命名`/etc/mysql/my.cnf`为其他内容，例如`/etc/mysql/my.cnf.old`

尝试再次运行 MySQL。

* * *

## 回答 #73

> 赞同：0
> 
> 时间：2015-02-26T12:44:19.750

在`/etc/mysql/my.cnf`中，检查最后一行是：

```
!includedir /etc/mysql/conf.d/ 
```

* * *

## 回答 #74

> 赞同：0
> 
> 时间：2015-05-15T19:17:34.840

`D`如果您尝试更改存储数据库的目录，但在配置文件中输入了错误的目录（例如第二个驱动器中的拼写错误而不是准确的） ，也会发生此错误`D_`。它不会告诉您拼写错误目录不存在，而是告诉您您没有访问它的权限（导致您尝试更改拼写错误目录的权限，它会让您这样做）。因此，如果您在更改目录时遇到此错误，请仔细检查配置文件并确保您没有拼写错误。

* * *

## 回答 #75

> 赞同：0
> 
> 时间：2021-08-29T14:22:03.473

我遇到了同样的问题，问题是 mysql-server 已安装但未运行。

试试， service mysql start 或者 systemctl start mysql

* * *

## 回答 #76

> 赞同：0
> 
> 时间：2021-05-04T07:56:47.953

对我来说，在 CentOS 上，我必须`mariadb`像这样重新启动服务：

```
systemctl start mariadb.service 
```

* * *

## 回答 #77

> 赞同：0
> 
> 时间：2017-03-23T09:30:41.077

我的情况只是因为 .mysql 中`/var/log/mysql`定义的缺少文件夹而停止了 mysql `/etc/mysql/my.cnf`。创建它后，我可以启动 mysql 并照常运行。

* * *

## 回答 #78

> 赞同：0
> 
> 时间：2019-11-19T00:47:42.567

解决方案 1 清除（如果要保留数据库，则删除）任何 mysql 包以重新重复安装：

```
sudo apt purge "mysql*" 
```

- 自动删除包

```
sudo apt autoremove 
```

-停止apparmor服务

```
sudo systemctl stop apparmor 
```

- 让 apparmor 删除它的配置文件（我认为 stop 就足够了，但对我来说不是。使用 systemctl 它不起作用）

```
sudo service apparmor teardown 
```

-重新安装mysql服务器

```
sudo apt install mysql-server 
```

-安装apparmor-utils，在apparmor中为mysql创建一个配置文件，允许mysql运行

```
sudo apt install apparmor-utils 
```

-检查mysql-server的状态（必须是Active(running)）

```
sudo systemctl status mysql 
```

- 在 apparmor 中为 mysql 生成配置文件

```
sudo aa-genprof mysql 
```

- 在其他终端运行mysql（输入root密码）

```
mysql -u root -p 
```

- 当 apparmor 在另一个终端中生成配置文件时，在 MySQL 中执行操作

> mysql> 创建数据库 fooDB

-切换到另一个终端并按“s”（提示告诉你这是“扫描”）

- 对您认为合适的 apparmor 政策说“是”（我猜它们都适用于 mysql），说“是”按“a”表示允许

- 按“f”完成 Apparmor 配置文件

-重启apparmor服务

```
sudo systemctl start apparmor 
```

-检查你是否仍然可以在其他终端使用mysql

> mysql>退出

```
mysql -u root -p 
```

如果一切顺利，您可以从命令行使用 mysql。

* * *

## 回答 #79

> 赞同：0
> 
> 时间：2015-07-28T12:38:53.590

一个建议：总是问 MySQL 问题是什么。就我而言，`less /var/log/mysql/error.log`看看这个：

```
2015-07-28 12:01:48 23224 [ERROR] /usr/sbin/mysqld: unknown variable 'log_slow_queries=/var/log/mysql/mysql-slow.log'
2015-07-28 12:01:48 23224 [ERROR] Aborting 
```

它在抱怨，因为我在 中取消了这个选项的注释`my.cnf`，但是在注释了这个选项之后，它开始没有任何问题。

* * *

## 回答 #80

> 赞同：0
> 
> 时间：2015-08-04T17:45:07.290

我不得不说：

```
sudo /etc/init.d/mysqld start 
```

* * *

## 回答 #81

> 赞同：0
> 
> 时间：2019-05-28T09:22:40.313

这个答案很可能在这里被淹没，但也许有人不小心偶然发现了它。

在我的例子中，SELinux 阻止了用户/应用程序连接到 MySQL (MariaDB) 服务器套接字。在 RHEL 上，检查`/var/log/audit/audit.log`您是否启用了 SELinux。

* * *

## 回答 #82

> 赞同：0
> 
> 时间：2020-05-11T14:51:14.497

就我而言，我缺少 mysql-server。因此，通过安装它后，`sudo apt-get install mysql-server`我能够再次连接。

* * *

## 回答 #83

> 赞同：0
> 
> 时间：2021-03-07T05:02:34.160

我以前在 Kubuntu 20.04 中遇到过这个问题。它为我解决的方法是运行：

```
sudo dpkg --configure -a 
```

原因是 dpkg 崩溃了。

我在其他时间遇到了问题，我通过运行解决了它：

```
sudo /etc/init.d/mysql start 
```

认为服务已停止。

* * *

## 回答 #84

> 赞同：0
> 
> 时间：2021-02-03T21:50:50.707

令人惊讶的是，此问题的另一个原因是删除了文件夹 /var/log/mariadb 这是我删除此日志文件夹后的情况。创建后，错误消失了。

# c++ - 在 FreeBSD 下用 c/c++ 复制大文件会冻结系统

> ID：11657830
> 
> 赞同：0
> 
> 时间：2012-07-25T20:10:15.790
> 
> 标签：c++, freebsd

这段代码似乎可以在 Windows 下运行（结果出乎意料）和 Ubuntu。但是当我在 FreeBSD 9.0 AMD 64 下运行它时，它会导致系统死机。我收到这样的错误消息：
ahcich0：插槽 28 端口 0 超时
有人知道问题可能是什么吗？
谢谢。

```
#include <cmath>
#include <cstdlib>
#include <sys/time.h>
#include <iostream>
#include <fstream>
#include <string>
using namespace std;

int main(int argc, char *argv[])
{
    const string FILENAME = "testfile";
    const string COPYNAME = "copy";
    const int FILES = 5;
    const int SIZE_MULTIPLIER = 6;
    const int BUFFER_SIZE = pow(2.0, 16);

    time_t times[2][FILES];

    srand (time(NULL));

    // create test files
    for (int i = 1; i < FILES + 1; i++){
        ofstream os;
        string filename(FILENAME);
        filename += (char)i + 48;
        os.open(filename.c_str(), ios::binary);
        if (os.is_open()){
            cout << "Writing file " << i << " of " << FILES;
            long filesize =pow(2.0, i * SIZE_MULTIPLIER);
            cout << " (" << filesize << " bytes)" <<  endl;

            while(filesize--){
                os << (char)(rand() % 256);
            }
            cout << os.tellp() << " bytes written.\n";
            os.close();
        }else{
            cerr << "Could not create file " << filename;
            cerr << endl;
        }
    }

    // copy the files
    timeval tv;
    time_t start;
    char buffer[BUFFER_SIZE];
    char ci;
    for (int i = 0; i < FILES; i++){
        ci = (char)i + 49;
        string filename(FILENAME);
        filename += ci;
        string copyname("c");
        copyname += COPYNAME;
        copyname += ci;

        cout << "Copying file " << filename.c_str() << endl;

        cout << "the c way: "; 
        cout.flush();

        start = time(NULL);

        FILE *pFile = fopen(filename.c_str(), "rb");
        FILE *pCopy = fopen(copyname.c_str(), "wb");
        if (!(pFile == NULL || pCopy == NULL)){
            do{
                int bytesRead = fread(
                    buffer, 1, BUFFER_SIZE, pFile);

                fwrite(buffer, 1, bytesRead, pCopy);
            }while(!feof(pFile));
            fclose(pFile);
            fclose(pCopy);

            cout << " Done.\n";
        }else{
            cerr << "Could not open either " << filename;
            cerr << " or " << copyname << endl;
        }

        times[0][i] = time(NULL) - start;
        remove(copyname.c_str());

        copyname = "cpp";
        copyname += COPYNAME;
        copyname += ci;

        cout << "the c++ way: ";
        cout.flush();

        start = time(NULL);

        ifstream in;
        in.open(filename.c_str(), ios::binary);
        in.rdbuf()->pubsetbuf(buffer, BUFFER_SIZE);
        ofstream out;
        out.open(copyname.c_str(), ios::binary);
        char copyBuffer[BUFFER_SIZE];
        out.rdbuf()->pubsetbuf(copyBuffer, BUFFER_SIZE);

        if (in.is_open() && out.is_open()){
            out << in.rdbuf();
            in.close();
            out.close();
            cout << " Done.\n";
        }else{
            cerr << "Could not open either " << filename;
            cerr << " or " << copyname << endl;
        }

        times[1][i] = time(NULL) - start ;
        remove(copyname.c_str());
    }

    cout << "Summary:\n";
    cout << "\tc\tc++\n";
    for (int i = 0; i < FILES; i++){
        ci = (char)i + 49;
        cout << "copy" << ci << "\t" << times[0][i];
        cout << "\t" << times[1][i] << endl;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T20:17:24.820

将 FILES 更改为 4 后（因为否则需要很长时间），您的程序在这里运行得很好：

```
Writing file 1 of 4 (64 bytes)
64 bytes written.
Writing file 2 of 4 (4096 bytes)
4096 bytes written.
Writing file 3 of 4 (262144 bytes)
262144 bytes written.
Writing file 4 of 4 (16777216 bytes)
16777216 bytes written.
Copying file testfile1
the c way:  Done.
the c++ way:  Done.
Copying file testfile2
the c way:  Done.
the c++ way:  Done.
Copying file testfile3
the c way:  Done.
the c++ way:  Done.
Copying file testfile4
the c way:  Done.
the c++ way:  Done.
Summary:
        c       c++
copy1   0       0
copy2   0       0
copy3   0       0
copy4   0       0 
```

（FreeBSD 9.0-RELEASE-p3 amd64，用 clang++ 编译）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-31T04:09:19.677

9.0 中的 achi-driver 中可能存在一个错误，该错误会在*重*负载下出现。或者，它可能是一个有问题的控制器，在相同的负载下失败了——在其他操作系统下没有失败，因为他们没有对它征税。

这仍然是 FreeBSD 9.2 的问题吗？

至于你的程序，你不仅应该检查 for `feof()`，还应该检查`ferror()`你的读/写循环中的 for 。此外，在我看来，这种读/写循环已成为过去。如今，当`size_t`和`offset_t`具有相同的宽度（64 位平台）时，您应该将`mmap()`源文件和`fwrite`它一次性放入目的地。看，妈，没有循环！

# c# - 多个提交按钮不会在 aspx 上回发 - 只有最后一个按钮

> ID：11657831
> 
> 赞同：2
> 
> 时间：2012-07-25T20:10:22.110
> 
> 标签：c#, asp.net, postback

在我的 aspx 页面上，我有两个`fieldsets`，每个都用一个`<asp:Panel DefaultButton="...">`有自己的`<input type="submit">`按钮的包装。这是一个缩略版...

```
<div id="content">...</div>
<asp:Panel runat="server" id="formPanel1" DefaultButton="form1SubmitButton"> 
    <fieldset>
        <asp:TextBox runat="server" id="textbox1"/>
        <asp:TextBox runat="server" id="textbox2"/>
        <asp:Button runat="server" id="form1SubmitButton" OnClick="form1SubmitButton_OnClick"/>
    </fieldset>
</asp:Panel>
<asp:Panel runat="server" id="formPanel2" DefaultButton="form2SubmitButton"> 
    <fieldset>
        <asp:TextBox runat="server" id="textbox3"/>
        <asp:TextBox runat="server" id="textbox4"/>
        <asp:Button runat="server" id="form2SubmitButton" OnClick="form2SubmitButton_OnClick"/>
    </fieldset>
</asp:Panel> 
```

只有最后一个提交按钮`form2SubmitButton`会回发，其他按钮在单击时什么也不做。**我已经简化了上面的代码，但我应该提到每个表单，包括面板，都保存在一个单独的用户控件中，该控件在 aspx 上注册。**

**更新：**经过更多研究，我发现由于母版页上另一个字段集上的验证器，提交无法正常工作。该字段集用于登录站点，因此是必需的。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T14:08:41.853

正如 PCasagrande 提到的，确保您的验证组与默认按钮和所有验证器匹配。特别适合您的日志记录部分。

例子：

```
<asp:Panel ID="pnlUpdateInfo" runat="server" DefaultButton="btnUpdateInfo">

  <ASP:TEXTBOX id="txtZip" runat="server"></ASP:TEXTBOX>   
  <asp:RequiredFieldValidator id="reqvalZipSignUp" runat="server"
    ControlToValidate="txtZip" ValidationGroup="btnUpdateInfo" />                       

  <asp:Button ID="btnUpdateInfo" runat="server" ValidationGroup="btnUpdateInfo"  />

</asp:Panel> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T17:42:38.550

原来它与 HTML5 约束验证有关。我想通了，因为在 chrome 中，从控制台，我得到了错误`An invalid form control with name='...' is not focusable`。这导致了我[这篇](https://stackoverflow.com/questions/7183692/google-chrome-cannot-submit-form-with-displaynone)文章。我在提交按钮中添加了 html5 属性`formnovalidate="formnovalidate"`，一切正常（*在 chrome v20.0.1132.57、firefox v14.0.1、IE9 v9.0.8112 中测试）。

回顾一下，这就是答案……

```
<asp:Button runat="server" id="submit1" OnClick="submit1_OnClick" text="Submit" formnovalidate="formnovalidate"/> 
```

# permissions - 在 Bugzilla 3.4.4 中限制用户只能查看他们的组/产品错误

> ID：11657834
> 
> 赞同：2
> 
> 时间：2012-07-25T20:10:49.020
> 
> 标签：permissions, bugzilla

在我`Bugzilla 3.4.4`（也许还有其他人）中，似乎没有分配任何权限的新创建用户可以搜索所有错误。是否可以阻止它，以便用户只有在分配到正确的组时才能看到它们？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T05:57:19.200

是的，这是可能的。

管理/产品/选择要隐藏的产品/按“编辑组访问控制”

如果您将产品组的选项设置为 Mandatory/Mandatory 而不标记任何复选框，则任何不属于该组的用户将根本看不到与其相关的错误。

这适用于新用户，因为新用户不会自动获得该权限（默认情况下）。

提示：您可以将 Administration/Parameters/Group Security/makeproductgroups 设置为 ON，而不是手动为每个产品创建组

注意：这适用于 Bugzilla 4.2.1

# php - 如何得到一个一维标量数组作为一个学说dql查询结果？

> ID：11657835
> 
> 赞同：133
> 
> 时间：2012-07-25T20:10:50.767
> 
> 标签：php, doctrine-orm

我想从 Auction 表的 id 列中获取一组值。如果这是一个原始 SQL，我会写：

```
SELECT id FROM auction 
```

但是当我在 Doctrine 中这样做并执行时：

```
$em->createQuery("SELECT a.id FROM Auction a")->getScalarResult(); 
```

我得到一个这样的数组：

```
array(
    array('id' => 1),
    array('id' => 2),
) 
```

相反，我想得到一个这样的数组：

```
array(
    1,
    2
) 
```

我怎样才能使用 Doctrine 做到这一点？

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2012-12-20T09:45:44.247

### PHP < 5.5

您可以使用`array_map`, 并且由于每个数组只有一个项目，因此您可以优雅地 `'current'`用作回调，而不是编写[闭包](https://stackoverflow.com/a/11685062/2943194)。

```
$result = $em->createQuery("SELECT a.id FROM Auction a")->getScalarResult();
$ids = array_map('current', $result); 
```

> 有关内存使用的更多信息，请参阅[下面的 Petr Sobotka 的回答。](https://stackoverflow.com/a/22424012/133717)

### PHP >= 5.5

正如[jcbwlkr 在下面回答的那样](https://stackoverflow.com/a/26061738/133717)，它的推荐使用方式`array_column`。

* * *

## 回答 #2

> 赞同：175
> 
> 时间：2014-09-26T14:16:40.353

从 PHP 5.5 开始，您可以使用[array_column](http://us2.php.net/manual/en/function.array-column.php)来解决这个问题

```
$result = $em->createQuery("SELECT a.id FROM Auction a")->getScalarResult();
$ids = array_column($result, "id"); 
```

* * *

## 回答 #3

> 赞同：103
> 
> 时间：2015-07-09T12:03:49.887

更好的解决方案是使用`PDO:FETCH_COLUMN`. 为此，您需要一个定制的水合器：

```
//MyProject/Hydrators/ColumnHydrator.php
namespace DoctrineExtensions\Hydrators\Mysql;

use Doctrine\ORM\Internal\Hydration\AbstractHydrator, PDO;

class ColumnHydrator extends AbstractHydrator
{
    protected function hydrateAllData()
    {
        return $this->_stmt->fetchAll(PDO::FETCH_COLUMN);
    }
} 
```

将其添加到教义：

```
$em->getConfiguration()->addCustomHydrationMode('COLUMN_HYDRATOR', 'MyProject\Hydrators\ColumnHydrator'); 
```

你可以像这样使用它：

```
$em->createQuery("SELECT a.id FROM Auction a")->getResult("COLUMN_HYDRATOR"); 
```

更多信息： [http ://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#custom-hydration-modes](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#custom-hydration-modes)

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-03-15T12:49:33.653

Ascarius 的回答很优雅，但要注意内存使用！`array_map()`创建传递数组的副本并有效地使内存使用量翻倍。如果您使用数十万个数组项，这可能会成为一个问题。由于 PHP 5.4 调用时按引用传递已被删除，所以你不能这样做

```
// note the ampersand
$ids = array_map('current', &$result); 
```

在这种情况下，您可以使用明显的

```
$ids = array();
foreach($result as $item) {
  $ids[] = $item['id'];
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-27T09:29:06.667

我认为这在教义中是不可能的。只需使用 PHP 将结果数组转换为您想要的数据结构：

```
$transform = function($item) {
    return $item['id'];
};
$result = array_map($transform, $em->createQuery("SELECT a.id FROM Auction a")->getScalarResult()); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2021-11-06T13:15:43.033

由于**教义/orm 2.10.0**有一个内置的解决方案，请参阅[https://www.doctrine-project.org/projects/doctrine-orm/en/2.10/reference/dql-doctrine-query-language。 html#scalar-column-hydration](https://www.doctrine-project.org/projects/doctrine-orm/en/2.10/reference/dql-doctrine-query-language.html#scalar-column-hydration)

```
use Doctrine\ORM\AbstractQuery;

$query = $em->createQuery("SELECT a.id FROM Auction a");
return $query->getSingleColumnResult();
// Same as:
return $query->getResult(AbstractQuery::HYDRATE_SCALAR_COLUMN); 
```

# c# - 调度程序不执行作业，似乎甚至没有注册它

> ID：11657840
> 
> 赞同：4
> 
> 时间：2012-07-25T20:11:11.810
> 
> 标签：c#, windows-services, quartz-scheduler, quartz.net, quartz.net-2.0

我创建了以下内容：

*   一个**窗口服务**
*   **石英调度**程序类
*   一个`IJob`名为 的实现`Worker`，它包含一组我打算通过 Quartz 调度程序执行的任务。

Windows 服务覆盖*OnStart*以调用调度/设置类，该类尝试在 Quartz 中创建一个我想在给定时间范围内运行的计划任务（目前，这只是每 30 秒一次，例如，用于测试过程）

我使用了与其中一个示例相同的代码来创建作业和触发器 - 触发器包含一串代码，可立即启动并每 30 秒重复一次，直到永远。

然后我调用`Schedule()`并最终调用`Start()`调度程序对象。

我使用 installutil.exe 将服务推入服务列表，我启动服务并看到我的内部日志框架向我显示服务正在启动，正在创建调度程序并安排了作业（因为我'一直有问题...）**问题是**任务*不会*运行一次，也不会重复。该服务在那里愉快地运行，但从不启动执行任何操作。

如果我使用 Exists 方法，传入 JobKey - 它总是说假的。Jobs 的计数为零，在调度和启动调度程序后立即进行测试。

我正在使用这种方法设置 IJobDetail：

```
IJobDetail job = JobBuilder.Create<Worker>()
                .WithIdentity("job1", "group1")
                .Build(); 
```

并使用以下方法创建触发器：

```
TriggerBuilder.Create()
    .WithIdentity("trigger1", "group1")
    .ForJob(job)
    .StartAt(DateTime.Now)
    .WithSimpleSchedule(x => x.WithIntervalInSeconds(30).WithRepeatCount(10))
    .Build(); 
```

然后将其连接起来：

```
sched.ScheduleJob(job, trigger);
sched.Start(); 
```

我不知道为什么会发生这种情况，事件日志中没有任何内容，服务也没有任何问题，并且代码*似乎*运行没有任何问题，因为我已经推送了日志语句（输出到 /bin/ 中的 txtfile debug) 在每一行之后&有很多异常处理。

有任何想法吗？通用 Create 上的 Build() 是否会告诉调度程序我定义的类型是`Execute()`方法所在的位置？

**编辑** 配置部分我从[这篇关于 SO](https://stackoverflow.com/questions/7961235/where-is-the-documentation-for-quartz-net-configuration-files)（@jadenedge 的回答）的帖子中获得，并放置在 Windows 服务的 app.config 中。1.0/2.0 不匹配的可能性？

理想情况下，我想要 app.config 中的配置，并且在其他地方没有其他配置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-27T14:32:02.017

您是否正在启动一个保持进程运行的线程？服务启动后，你的进程还在内存中吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-12T17:46:05.093

我遇到了这个问题，哦，天哪，它把我逼疯了。碰巧我有一个可以随时运行的尖峰项目，但我的主要项目无法运行！

问题：我的项目的命名空间中有点/句点，例如`MyProject.UpdateService`我的尖峰被简单地命名为`QuartzTest`.

通过逐行调试发现，当我将我的 Windows 服务名称设置`MyProjectUpdateService`为 Quartz 作业然后注册。

TL/DR：确保您的 Windows 服务的名称中没有点。

更新：我做了更多的测试，看起来运行 Quartz 的 Windows 服务的服务名称的最大长度是 25 个字符。它不会出错 - 它只是不会启动。

# java - 在网络浏览器中输入表单数据的程序

> ID：11657841
> 
> 赞同：0
> 
> 时间：2012-07-25T20:11:14.807
> 
> 标签：java, browser

我正在尝试构建一个程序，一旦打开浏览器并显示登录窗口（比如 Facebook），它就会输入我的网站用户名和密码。我熟悉 Robot 类，这可以用于该技术，但是这是一个混乱的解决方案。任何人都可以建议一种方法来解决这个问题吗？有什么好课吗？还是仅仅为浏览器构建一个插件更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:16:19.790

插件使您可以直接访问浏览器的 API，因此这将是最好的方法。这就是[Roboform](http://www.roboform.com/)的做法，您可能想看看他们做了什么。

# jquery - JQuery - 使用 hover() 和 on()

> ID：11657844
> 
> 赞同：1
> 
> 时间：2012-07-25T20:11:31.303
> 
> 标签：jquery

我尝试将 jquery 的 on()-Method 与 hover() 结合使用。我希望用户将鼠标悬停在一个 div 上，显示一个值，当将鼠标从该 div 移开时，再次看到旧值，但这不起作用......有人知道吗？

```
$('#content').on('hover', '.player_marktwert_box',
    function() {
    var playerValue = $(this).html();
        $(this).html("test");
    },
    function () {
        $(this).html(playerValue);
    }
); 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T20:13:29.400

`.hover`实际上只是一个快捷方式而不是真正的事件名称。它只是扩展`mouseenter`为第一个函数和`mouseleave`第二个函数。

因此，您可以分别使用`.on("mouseenter", "...",`和`.on("mouseleave", "...",`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:16:23.017

```
$('#content').on({
    mouseenter: function() { ... },
    mouseleave: function() { ... }
},'.player_marktwert_box'); 
```

`hover`这是不使用`$.hover()`快捷方式委托事件的正确方法

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T20:21:41.193

试试这个（只是按照`pimvdb`'的想法）

```
$('#content').on('mouseenter', '.player_marktwert_box', function() {
    var playerValue = $(this).html();
    $(this).html("test").data('playerValue',playerValue);
}).on('mouseleave', '.player_marktwert_box', function() {
    $(this).html($(this).data('playerValue'));
}); 
```

[**演示。**](http://jsfiddle.net/heera/9JHnq/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T20:22:33.550

**这是小提琴：http : [//jsfiddle.net/collabcoders/ses7G/](http://jsfiddle.net/collabcoders/ses7G/)**

```
var originalValue;
$('#content').on('mouseenter', '.player_marktwert_box', function(){
    originalValue = $(this).html();
    $(this).html("test");
}).on('mouseleave', '.player_marktwert_box', function() {
    $(this).html(originalValue);
}); 
```

​</p>

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T20:25:17.650

一个简单的例子：

```
var val=$('#foo').html();
$(document).on('mouseenter mouseleave', '#foo', function(ev) {
    $(this).html((ev.type == 'mouseenter') ? 'test' : val);
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/Max9s/)**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T20:15:46.250

```
var playerValue;

$(".selector").on({
    mouseenter: function () {
        playerValue = $(this).html();
        $(this).html("test");
    }, 
    mouseleave: function () {
        $(this).html(playerValue);
    }
}); 
```

请查看[此](https://stackoverflow.com/questions/9827095/is-it-possible-to-use-jquery-on-and-hover)问题以获取更多详细信息。由于 playerValue 超出了事件的范围，它将具有一个持续存在的值。根据您的脚本，这可能会起作用，具体取决于是否可以一次将鼠标悬停在多个`.selector`元素上。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-25T20:22:53.160

有理由不只使用 .hover 吗？

```
var playerValue = $('.player_marktwert_box').html();
$('.player_marktwert_box').hover(
   function() {
      $(this).html("TEST :)");
   },
   function () {
      $(this).html(playerValue);
   }
); 
```

演示 - [http://jsfiddle.net/M93mM/1/](http://jsfiddle.net/M93mM/1/)

# debugging - 在特定时间后停止函数并调试封闭变量的编程方式

> ID：11657846
> 
> 赞同：2
> 
> 时间：2012-07-25T20:11:37.537
> 
> 标签：debugging, timeout, scheme

像无限循环这样的长期功能：

```
> (define appendInf
      (lambda (lst)
        (appendInf (cons 1 lst))) 
```

在 Chez Scheme 中，make-engine 可以实现 tick 后停止：

```
> (define eng
    (make-engine 
      (lambda ()
        (appendInf '())))) 
```

当然，在 lst 的范围内，我在以下情况下会出错：

```
> (eng 50
        list
        (lambda (new-eng)
          (set! eng new-eng)
          (length lst)))
Exception: variable lst is not bound 
```

如果我想在达到时间限制时在 appendInf 中获取值 'lst'，我使用 set!：

```
> (define lst '())
> (define appendInf
      (lambda (ls)
        (set! lst (cons 1 ls))
        (appendInf lst))) 
```

现在我可以得到：

```
> (eng 50
       list
       (lambda (new-eng)
         (set! eng new-eng)
         (length lst)))
8 
```

因此，对于我要跟踪的函数中的每个变量，都需要添加一个全局变量，并通过添加 (set!...) 再进行一个转换。

1.  这是处理任何封闭变量的正确方法吗？
2.  如果是 1，在方案中是否有更好的方法来实现这一目标？
3.  是否有任何编程语言可以更轻松地实现这种调试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:53:56.553

出色地。我正在使用球拍，它有一个非常好的调试器，可以执行标准 r6rs 和非标准球拍。

```
;; macro to do the heavy work
(define-syntax recdb
  (syntax-rules ()
    ((_ thunk fun a1 ...)
     (let ((orig-fun fun)(ethunk thunk))
       (fluid-let ((fun (lambda args 
                          (if (ethunk)
                              (apply orig-fun args) ;; set breakpoint on this
                              (apply orig-fun args)))))
         (fun a1 ...))))))

;; a time-thunk generator
(define (period-sec sec)
  (let ((time-done (+ sec (current-seconds))))
    (lambda ()
      (if (< time-done (current-seconds))
          (begin 
            (set! time-done (+ sec (current-seconds)))
            #t)
          #f))))

;; a round-thunk generator
(define (rounds n)
  (let ((rounds-to-go n))
    (lambda ()
      (if (zero? rounds-to-go)
          (begin
            (set! rounds-to-go (- n 1))
            #t)
          (begin
            (set! rounds-to-go (- rounds-to-go 1))
            #f)))))

;; my never ending procedure
(define (always n)
  (always (+ n 1)))

;; one of the ones below to implement 
(recdb (rounds 10) always 0))
(recdb (period-sec 1) always 0)

;; functions with auxillary procedures need to have their gut changed for it to work
(define (fib n)
  (define (fib-aux n a b)
    (if (= n 0)
        a
        (fib-aux (- n 1) b (+ a b))))
  (recdb (period-sec 2) fib-aux n 0 1))

 ;; trying it
 (fib 200000) 
```

现在。只需运行调试器并设置断点（在宏中右键单击表达式并选择“此时暂停”），它在代码中指示，您可以每 x 秒或 x 次检查变量。

调试愉快:)

# ruby-on-rails - 未能推送一些裁判

> ID：11657852
> 
> 赞同：0
> 
> 时间：2012-07-25T20:11:58.600
> 
> 标签：ruby-on-rails, github, push

我试图推送到 github 我按照以下步骤操作：（在这些行之前我位于我的应用程序目录中）

```
$ mkdir estaciones
$ cd estaciones
$ git init
>>Initialized empty Git repository in /Users/armandodejesussantoyareales/Documents/project_newbie/Estaciones/estaciones/.git/
$ touch README
$ git add README
$ git commit -m "phase 3 estaciones"
>>[master (root-commit) 4462be3] phase 3 estaciones
0 files changed, 0 insertions(+), 0 deletions(-)
create mode 100755 README 
```

（我不知道那条消息是不是错误）

```
$ git remote add origin git@github.com:asantoya/estaciones.git
$ git push -u origin master 
```

但我总是有同样的问题，迟到我输入我得到下一个错误

```
To git@github.com:asantoya/estaciones.git
! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'git@github.com:asantoya/estaciones.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:24:29.607

这意味着远程存储库已经有一个主分支，并且它在该分支中包含自从您提交到本地副本以来已添加的内容。这是指在[https://github.com/asantoya/estaciones上可见的代码](https://github.com/asantoya/estaciones)

首先从 github 克隆 repo，然后将更改添加到其中，然后推送：

```
git clone https://github.com/asantoya/estaciones.git
git checkout -b nameofyourbranch master 
```

添加一些文件等。

```
git commit -a -m "Your commit message"
git push origin nameofyourbranch 
```

# windows - 在 Windows Server 2003 LocalMachine/My store 中查找公共证书的物理路径

> ID：11657854
> 
> 赞同：2
> 
> 时间：2012-07-25T20:12:13.143
> 
> 标签：windows, windows-server-2003

我正在尝试查找导入到 LocalMachine/My（个人）证书存储中的公钥的文件系统路径，以便我可以向自定义 App_pool 帐户授予读取和执行权限。我尝试使用`findprivatekey.exe`但`winhttpcertcfg.exe`没有运气。这是我到目前为止的路径，只是不知道将权限应用到哪一个。

> C:\Documents and Settings\All Users\Application Data\Microsoft\Crypto\RSA\MachineKeys

`findprivatekey.exe`总是找不到证书。

`winhttpcertcfg -l -c LOCAL_MACHINE\My -s MyCertificate` 返回

> 未成功获取私钥的访问权限。这只能由安装证书的用户完成。

但是，我安装了证书，所以我认为这与它不是私人证书而是公共证书这一事实有关。

有什么建议...？此外，这是在 Windows Server 2003 上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T13:56:43.190

这是我从这个问题中了解到的，当您在 Windows Server 2003 机器上导入 .cer 文件时，会弹出一个（下面的屏幕截图）窗口询问验证。单击是，否则您将有权访问私钥问题。

安全警告截图：

![](../Images/b6548dc3fd891ceb3b0fa65c5041e585.png)

这是我注意到的一件事，因为弹出窗口显示了三分之二的服务器，并且我在为 NETWORKSERVICE 和 ASPNET 分配权限时没有问题。

一种解决方法是使用创建密码的密钥从另一台服务器导出证书。我能够在为其创建证书的服务器上的 IIS 7 中执行此操作。获得 .pfx 后，我在存在此问题的其他两台服务器上导入，并且能够分配权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-18T10:54:35.400

证书通常导入到注册表位置，例如

```
HKEY_CURRENT_USER
   Software
      Microsoft
         SystemCertificates 
```

查看[系统存储位置](https://docs.microsoft.com/en-us/windows/win32/seccrypto/system-store-locations)

如果您正在寻找应用程序的功能，请下载[Microsoft ProcMon](https://docs.microsoft.com/en-us/sysinternals/downloads/procmon)，这将允许您监控系统上哪些文件和注册表位置被触及以进行操作。

# javascript - 带有 JsonRestStore 的响应标头（使用 Dgrid/Dojo）

> ID：11657855
> 
> 赞同：1
> 
> 时间：2012-07-25T20:12:24.080
> 
> 标签：javascript, dojo, dgrid

尝试使用我的 json 存储构建动态网格，但由于某种原因存在范围限制，我猜它是 dgrid/store 实现的一部分，但我应该向下滚动网格并从 dgrid 站点的示例中获得更多结果。

![范围图像](../Images/8ebf3612c6c9da8541e052805e6254a4.png)

我会在这里放一些代码。首先，我试图在我的代码中非常模块化，所以我有一个获取我的商店 (content.js) 的文件，一个构建我的网格 (gridlayout.js) 和 main.js 的文件（创建我的实例并传递我的商店）。

**内容.js**

```
define([
    "dojo/_base/xhr",
    "dojo/store/Memory",
    "dojo/store/JsonRest",
    "dojo/store/Cache"
    ],
function(
    xhr,
    Memory,
    JsonRest,
    Cache
){

    var contentMemoryStore = new Memory();
    var contentJsonRestStore = new JsonRest({target: "http://dev.mpact.tv:30087/rest/contenus/"});

    contentStore = new Cache(contentJsonRestStore, contentMemoryStore);

    return contentStore;
}); 
```

**GridLayout.js**

```
define([
    "dojo/_base/declare",
    "dijit/_WidgetBase",
    "dgrid/OnDemandGrid",
    "dgrid/Keyboard", 
    "dgrid/Selection",
    "dgrid/extensions/ColumnHider",
    "dgrid/editor",
], function(
    declare,
    _WidgetBase,
    Grid,
    Keyboard, 
    Selection,
    Hider,
    editor
){

    return declare([Grid, Keyboard, Selection, Hider], {

    columns: {
        selected: editor({
                    label: " ",
                    autoSave: true,
                    sortable: false
                }, "checkbox"),
        nom: "Name",
        autodelete: "Auto-delete",
        groupe_id: "Groupe ID",
        global: "Global",
        date: "Date",
        duree: "Lenght",
        description: "Description",
        fichier: "Filename",
        pleinecran: "Fullscreen",
        repertoire: "Folder",
        taille: "Size",
        expiration: "Expired",
        id: "id",
        catergorie: "Category",
        brouillon: "Example"
    },

    });
}); 
```

和我的**main.js**：

```
var gridLayout = new GridLayout({}, "placeholder");
gridLayout.set("store", contentStore); 
```

到目前为止，我只有 25 个结果，如果我向下滚动，我不会得到其余的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:21:30.907

浏览器中的答案显示项目 0-24/25。这意味着服务器端的项目总数为 25。因此网格不会尝试获取更多。

如果它返回 0-24/1000，那么当你滚动时会有多个调用。

所以我认为你应该检查服务器端为什么它只返回 25 作为项目**总数**。

检查这个：[http ://dojotoolkit.org/reference-guide/1.7/dojo/store/JsonRest.html#id7](http://dojotoolkit.org/reference-guide/1.7/dojo/store/JsonRest.html#id7)

# sql - SSAS如何将下面的SQL脚本变成MDX？

> ID：11657856
> 
> 赞同：1
> 
> 时间：2012-07-25T20:12:24.230
> 
> 标签：sql, ssas, mdx

我想计算每天的儿童人数作为 SSAS 中的衡量标准。逻辑应该用 SQL 编写如下：

```
Select Count(distinct ChildID)
From Child
Group by CurrentDate 
```

如何将此脚本转换为 MDX 进行计算？我是 SSAS 的新手。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:42:26.383

这在很大程度上取决于您的尺寸是如何设置的，但是从臀部拍摄，您可以设置一个衡量 childid 的度量。为此，请在多维数据集结构下的 SSAS 中创建一个新度量并`count`在`usage`属性下选择，并在`source table`. 您可以将此度量称为 Child Count 或类似的名称。

通过设置不同的子计数度量，MDX 将是这样的：

```
SELECT NON EMPTY 
{ [Measures].[Child Count] } ON COLUMNS, 
{ ([Dim Child].[CurrentDate].[CurrentDate].ALLMEMBERS ) } ON ROWS 
FROM [Your Cube] 
```

# c# - 尝试导出为 pdf 时出现解析器错误异常

> ID：11657858
> 
> 赞同：0
> 
> 时间：2012-07-25T20:12:48.620
> 
> 标签：c#, asp.net, crystal-reports

所以我真的可以使用线索来了解为什么会发生这种情况以及如何解决它。我正在尝试使用以下代码将水晶报告导出为 pdf：

```
protected void ExportRptButton_Click( object sender, EventArgs e )
        {
            Datamart.UI.Reporting.Web.ReportParamsSvc.ReportDefinition rptCfg = SelectedReport;
            if ( null != SelectedReport )
            {
                rptParams.Clear();
                rptParams = null;

                // Get the report document
                // string filePath = Server.MapPath( @"~\Reports\" + SelectedReport.FileName + ".rpt" );
                // Declare a new Crystal Report Document object and load the report file into the report document.
                ReportDocument rptDoc = new CrystalDecisions.CrystalReports.Engine.ReportDocument();
                ConfigureCrystalReports(rptDoc);
                // repDoc.Load(rptFileName);

                // AddParameters();
                // Set the report parameters the report object.
                //LoadReportParameterValues(SelectedReport);
                LoadParameterFields(rptDoc);
                // Set the static text fields in the report object.
                LoadStaticTextFields(rptDoc);

                try
                {
                    if (rptDoc.IsLoaded)
                    {
                        // Stop buffering the response
                        Response.Buffer = false;
                        // Clear the response content and headers
                        Response.ClearContent();
                        Response.ClearHeaders();
                        Response.ContentType = "application/pdf";

                        // Export the Report to Response stream in PDF format and file name Customers
                        rptDoc.ExportToHttpResponse(ExportFormatType.PortableDocFormat, Response, true, "DirectAccessReport");
                        // Response.Filter.Flush();
                        // Response.Flush();
                        // rptDoc.ExportToDisk(ExportFormatType.PortableDocFormat, "~/PDF_Folder");
                        // There are other format options available such as Word, Excel, CVS, and HTML in the ExportFormatType Enum given by crystal reports
                    }
                }
                catch (System.Threading.ThreadAbortException ex)
                {
                    logger.ErrorFormat("Could not export to pdf: threading! {0}", ex);
                }
                catch ( Exception ex )
                {
                    logger.ErrorFormat("Could not export to pdf! {0}", ex);                  
                }
            }
        } 
```

“ConfigureCrystalReports”只是获取报告的文件路径。

“LoadParameterFields”填充报表的参数，我很确定它可以工作，因为它与我在 CRViewer 中打开报表时用来填充参数的代码相同。但是，如果您想看看它的作用，请告诉我，我会添加它。

“LoadStaticTextFields”也是如此，它只获取报告中标签的文本值。

我收到的错误可以在下面的 img 中找到：

![在此处输入图像描述](../Images/2bf6ebdd6d8d2117e2ebb3a05edb443d.png)

关于问题发生在哪里，我最好的猜测是在 try 循环中。正如你所看到的，我已经尝试了几种不同的方法来处理大多数注释掉的代码中的响应字段。

我花了很多时间寻找答案，大多数人说我必须从我的代码中删除所有 Response.Write() 调用，但是我没有在我的任何地方使用 Response.Write()代码。

非常感谢任何帮助或建议。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:26:34.263

尝试不清除标题..

# c++ - 将 C++/Qt4 示例转换为 PyQt4

> ID：11657861
> 
> 赞同：2
> 
> 时间：2012-07-25T20:12:57.810
> 
> 标签：c++, python, qt4, pyqt4, converter

我正在尝试学习 PyQt4，似乎有很多有用的 C++/Qt4 文档（例如：[http](http://doc.qt.nokia.com/4.7-snapshot/model-view-programming.html) ://doc.qt.nokia.com/4.7-snapshot/model-view-programming.html ）。我对 C++ 了解不多，也不想同时学习它，但 C++/Qt4 示例似乎非常有用。

那么有没有办法将 C++ 语法（例如在[http://doc.qt.nokia.com/4.7-snapshot/model-view-programming.html](http://doc.qt.nokia.com/4.7-snapshot/model-view-programming.html)的示例中）转换为 python/PyQt4？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T21:12:02.500

要将 C++ 示例转换为 Python/PyQt4，首先要熟悉 PyQt4 应用程序的一般结构，以及构造 PyQt4 小部件和调用它们的方法的常用语法。

下面我列出了一些资源来帮助你开始学习 PyQt4（没有 C++）。一旦您对 PyQt4 有了基本的熟悉，您应该能够像这样转换 C++ 代码（取自您引用的[教程）：](http://doc.qt.nokia.com/4.7-snapshot/model-view-programming.html)

```
 int main(int argc, char *argv[])
 {
     QApplication app(argc, argv);
     QSplitter *splitter = new QSplitter;

     QFileSystemModel *model = new QFileSystemModel;
     model->setRootPath(QDir::currentPath()); 
```

到等效的 PyQt4 代码：

```
import sys
import PyQt4.QtCore as QtCore
import PyQt4.QtGui as QtGui

def main():
    app = QtGui.QApplication(sys.argv)
    splitter = QtGui.QSplitter()
    model = QtGui.QFileSystemModel()
    model.setRootPath(QtCore.QDir.currentPath()) 
```

谷歌搜索“QSplitter”和“QFileSystemModel”和“QDir”将引导您找到相关的 PyQt4 文档。例如，它会告诉您`QApplication`该类是在`QtGui`模块中定义的。这将帮助您在 C++ 代码和等效的 PyQt4 代码之间建立关联。

当然，[至少了解一点 C++ 语法](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)也很有帮助！

* * *

如果你想在不了解 C++ 的情况下学习 PyQt4，我认为首先阅读[这里列出](http://diotavelli.net/PyQtWiki/Tutorials)的一些教程是最简单的。

根据您的操作系统，您安装的 pyqt4 也可能附带大量示例代码。例如，在 Ubuntu 上，python-qt4-doc 包包括教程和演示启动器 (qtdemo) 以及许多示例。

```
python /usr/share/doc/python-qt4-doc/examples/demos/qtdemo/qtdemo.py 
```

![在此处输入图像描述](../Images/b2dd9b732af2871840b87361c2b20b98.png)

* * *

其他有用的链接：

*   [PyQt4 类](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/classes.html)
*   [PyQt4 模块](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/modules.html)
*   [PyQtWiki 教程](http://diotavelli.net/PyQtWiki/Tutorials)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T16:50:58.690

[http://www.zetcode.com/](http://www.zetcode.com/)

It would benefit you greatly to have a small familiarity with C++ as a Python developer in principle. Anyway this the best Python reference for QT in my opinion.

Also, sorry this is so late

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T18:34:03.187

对此的最终答案是：不，没有办法自动将 Qt C++ 示例转换为 PyQt。

也没有任何将 C++ 代码翻译成 Python 的通用解决方案。正是由于这个原因，各种语言绑定工具如 SWIG、Boost、Sip 等已经被开发出来（PyQt 绑定是由 Sip 生成的）。

但是，正在努力将所有 Qt C++ 示例手动移植到 PyQt。这项工作的当前结果可以在[PyQt 的源包](http://www.riverbankcomputing.com/software/pyqt/download)`examples`目录中找到。

# expression-blend - Expression Blend：从工具箱中拖动控件

> ID：11657869
> 
> 赞同：0
> 
> 时间：2012-07-25T20:13:23.667
> 
> 标签：expression-blend, expression-blend-4

我正在关注一些关于表达式混合的教程，其中许多都告诉我从工具箱中拖动一个 TextBlock。果然我看到了，如果我长按它会显示附加控件。

因此，如果我单击它并拖动它，它应该可以工作，但它会打开其他控件。

如果我双击它，它会将它放在我的设计视图中，但我想拖放它。

我在这里遗漏了什么吗，我正在关注的教程是针对 Expression Blend 4 的，我正在使用 Expression Blend 4。

想一想，您应该能够在设计图面上拖放一个控件，这听起来是正确的，但它在这里不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:26:07.990

好吧，在 Standard Expression Blend 中，我假设只有一个版本的 Expression Blend 4，您实际上无法通过从工具箱拖放到设计表面来放置控件。至少这是我的经验。

如果您想放置一个控件，您所做的就是通过在工具箱中单击鼠标左键选择一个控件，使其成为当前选定的控件。然后，您可以通过在要放置的位置定义其尺寸，将其放置到设计表面上。

AFAIK 没有将控件拖出工具箱的功能。

# string - 合并符号序列

> ID：11657870
> 
> 赞同：5
> 
> 时间：2012-07-25T20:13:25.733
> 
> 标签：string, algorithm, sequence, bioinformatics

我有一个问题，我需要一个算法来解决它。
我找不到它，我不知道问题是否是 NP-Hard。

问题是：我有几个符号序列。我想将它们合并成一个序列，其中包含原始序列的所有符号，保持符号的原始顺序。应删除来自不同序列的重复符号。结果序列必须是可能的最小序列。

如果其中一个序列是“abc”，则结果序列必须是 *a*b*c*，其中 * 是 0 个或多个符号的序列。如果输入序列是 'abc' 和 'cba'，则输出必须是 'abcba'，包含一次 'c' 并保留 *a*b*c* 和 *c*b*a* 属性。

**示例**：

输入：

```
abcde
xbcaf
axdaf 
```

一种合并方式：

```
a-bcde--
-xbc--af
ax--d-af 
```

输出：

```
axbcdeaf 
```

多个输出是可能的，'abcd' 和 'cba' 将产生 'abcdba'、'abcbda' 或 'abcbad'。我只需要一个输出，任何输出都是有效的，如果它的长度是可能的最小长度。

感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T23:05:24.373

这个问题被称为[最短公共超序列](http://www.nada.kth.se/~viggo/wwwcompendium/node165.html)并且已知是NP完全的。如果您对近似值满意，则可以四处搜索并找到类似的内容：[*最短常见超序列问题的近似算法：实验分析*，Barone 等。人 (pdf)](http://www.statistica.unimib.it/~dellavedova/papers/sac2001.pdf) .

# magento - Magento SOAP API v2：获取当前登录的客户电子邮件地址

> ID：11657878
> 
> 赞同：0
> 
> 时间：2012-07-25T20:13:47.210
> 
> 标签：magento, soap

是否可以使用 SOAP API 获取当前登录的客户电子邮件地址？
**我不会有 CustomerID。**

我将从我们的 ExpressionEngine 安装中调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T19:23:56.123

/code/core/Mage/Customer/Model/Customer/Api.php 中的此更改应返回当前登录的客户及其所有信息。我目前无法测试，因为我的 PHP 5.2.14 安装中没有安装 SOAP。

```
public function info($customerId, $attributes = null)
{
    // if we didn't pass a $customerId
    if (!$customerId) {
        // get current customer session
        $custsess = Mage::getSingleton('customer/session');
        // if the customer is logged in
        if($custsess->isLoggedIn() == true) {
            // get their ID to load below
            $customerId = $custsess->getId();
            unset($custsess);
        }
    }

    $customer = Mage::getModel('customer/customer')->load($customerId);

    if (!$customer->getId()) {
        $this->_fault('not_exists');
    }

    if (!is_null($attributes) && !is_array($attributes)) {
        $attributes = array($attributes);
    }

    $result = array();

    foreach ($this->_mapAttributes as $attributeAlias=>$attributeCode) {
        $result[$attributeAlias] = $customer->getData($attributeCode);
    }

    foreach ($this->getAllowedAttributes($customer, $attributes) as $attributeCode=>$attribute) {
        $result[$attributeCode] = $customer->getData($attributeCode);
    }

    return $result;
} 
```

# eclipse-gmf - GMF 改变连接的颜色

> ID：11657882
> 
> 赞同：0
> 
> 时间：2012-07-25T20:14:06.787
> 
> 标签：eclipse-gmf

我目前正在使用 gmf，我想更改连接的颜色。我调试了代码，我看到在设置 createConnectionFigure() 方法后的前景色， AbstractGraphicalEditPart 类中的 refresh() 方法覆盖了这种颜色。有什么特别的方法可以改变颜色吗？我还想为链接的源和目标装饰创建一个圆圈。我知道我必须扩展 Polyline 类，但我对其余部分一无所知。你知道任何可用的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:41:03.873

更改图形颜色的首选方法是通过符号模型（视图）。

创建边缘视图时，您可以在边缘符号中设置边缘的线条颜色。

```
Connector edge = NotationFactory.eINSTANCE.createConnector();
ViewUtil.setStructuralFeatureValue(edge,NotationPackage.eINSTANCE.getLineStyle_LineColor(),new RGB(0,0,0)); 
```

如果您使用 GMF 工具创建了 GMF 编辑器插件，则会有一个 ViewProvider 类。在那里，他们将拥有创造优势的方法。你可以在那里改变它。

或者

在 PreferenceStore 中设置颜色。

或者

在最坏的情况下，您可以覆盖 ConnectionEditPart 中的 refreshForegroundColor() 并设置您自己的颜色。然而，这种方法的缺点是，您无法通过 UI 更改颜色。

至于装饰，在你的连接图中，可以通过 setSourceDecoration & setTargetDecoration 设置装饰

例如：connection.setSourceDecoration(new org.eclipse.draw2d.PolylineDecoration());

# iphone - 设置应用程序中的应用程序标题与主屏幕上的标题不同？

> ID：11657885
> 
> 赞同：0
> 
> 时间：2012-07-25T20:14:17.923
> 
> 标签：iphone, ios, settings

这可能吗？基本上，我想在主屏幕上将我的应用程序命名为 Foo，并在设备上的设置应用程序中命名为 BarFoo。我确实找到[了这个 SO answer](https://stackoverflow.com/questions/1841583/can-i-change-the-icon-title-on-the-iphone-home-screen-without-changing-the-appli)，这表明这是不可能的，不用说那么多话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:25:53.680

This is not possible. Apple uses the same string in both locations.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:28:10.990

我认为您想更改应用程序的捆绑显示名称。您将在 CFBundleDisplayName 下的 info.plist 中找到它。

# find - Grep/Find/Xargs：在文件夹中的两个字符串或 Wget 的结果之间搜索

> ID：11657888
> 
> 赞同：1
> 
> 时间：2012-07-25T20:14:31.460
> 
> 标签：find, grep, wget, xargs

我有一个充满 html 文件的文件夹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T19:38:53.727

将 HTML 中的文本抓取到文件中：如果您的 grep 版本支持它，`-o`开关会告诉它只打印该行的匹配部分。

考虑到这一点，2 次`grep`调用应该可以解决您的问题（前提是您只能唯一标识您希望获取文本的行）；像这样的东西：

```
grep -Rn "var topicName =" html/ | grep -o '"[^"]*"' > topicNames.dat 
```

如果将 " 符号留在其中是不可接受的，则可以在第二个 grep 之后通过 sed 传递它：

```
grep -Rn "var topicName =" html/ | grep -o '"[^"]*"' | sed 's/"//g' > topicNames.dat 
```

# linux - Linux Mint 使 Kohana 的日志和缓存可写

> ID：11657889
> 
> 赞同：1
> 
> 时间：2012-07-25T20:14:38.597
> 
> 标签：linux, kohana, linux-mint, distro

我无法在我的 mint 发行版上正确安装 kohana，因为缓存和日志不可写。我已经尝试过`chmod 777 cache`同样的日志，但它不会改变。`chmod a+w`也没有帮助。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T20:20:29.680

您可能已经拥有一些权限未随`chmod`. 我建议您尝试使用`chmod -R 777 cache`. 另外，尽管我确信您已经检查了这些内容，但请确保这些目录确实存在并且它们没有放错位置。

# matlab - MATLAB：如何获取数字列表

> ID：11657893
> 
> 赞同：0
> 
> 时间：2012-07-25T20:14:48.620
> 
> 标签：matlab, figure

> **可能重复：**
> [如何在 MATLAB 中获取所有打开图形的句柄](https://stackoverflow.com/questions/4540604/how-do-i-get-the-handles-of-all-open-figures-in-matlab)

情况如下。我进行了一些测试，绘制了很多数字。我想将它们转换为 pdf 并编译成一个文件。由于每次我可能会得到不同类型的绘图和不同数量的绘图，我需要获取当前 matlab 会话或工作区中所有图形的列表。这是可行的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T22:31:49.580

```
h = get(0,'Children'); 
```

会将“句柄”放在变量 h 中您当前拥有的数字上。 `get(handle)`并且`set(handle,...)`通常非常有用。手柄`0`指向`root`显示器的 ，所以显示器上的所有数字都是根的`Children`。

# .htaccess - 永久使用 htaccess 重定向域

> ID：11657894
> 
> 赞同：1
> 
> 时间：2012-07-25T20:14:54.350
> 
> 标签：.htaccess, redirect, dns, permanent

我有一个站点，其中有两个域指向同一个站点。让我们说`domain1.com`&`domain2.com`

我想对 to 进行永久重定向`domain1.com`，`domain2.com`以便任何从 domain1 访问该网站的人，即使是 Google 爬虫，也应该将其重定向到 domain2。我想从 htaccess 做到这一点。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:10:31.480

是的，这是可能的。

放入你的 .htaccess

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)domain1.com [NC]
RewriteRule ^(.*)$ http://www.domain2.com/$1 [R=301,L] 
```

# java - 在Java中更改UDP数据包的发送IP和端口

> ID：11657895
> 
> 赞同：0
> 
> 时间：2012-07-25T20:14:55.430
> 
> 标签：java, android, udp, ip, port

我正在为具有 p2p 通话的机器人/计算机开发一个项目，我们正在试验打孔以通过 wifi 的防火墙。然而，wifi 需要 UDP 数据包需要看起来像是来自初始数据包发送到的同一台机器。使用同一台机器上的 netcat（并选择从哪个端口发送），我们可以将信息发送回计算机。但是，如果我们来自不同的设备，我们需要看起来好像我们具有相同的 IP 地址和端口。我想知道您是否可以轻松指定数据包的发送 IP 和端口？我正在考虑使用[DatagramPacket](http://docs.oracle.com/javase/1.4.2/docs/api/java/net/DatagramPacket.html)，但没有找到任何可行的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:27:17.743

你不能在 Java 中做到这一点。您可以使用 Java 加上现有的几个 Jpcaps 之一来做到这一点，但请注意它是一个 JNI 库，其中包含所有风险。

# java - 禁用 Android 上的所有音效（也包括硬件按键）

> ID：11657896
> 
> 赞同：9
> 
> 时间：2012-07-25T20:14:55.860
> 
> 标签：java, android, audio, android-theme

我正在**三星 Galaxy S3**上测试我的应用程序，它有两个触摸按钮，后退按钮和菜单按钮

我设置`soundEffectsEnabled`为我的所有根视图，并尝试制作自定义主题（如在[此处](https://stackoverflow.com/a/5504676/1099432)`false`指出的那样）并在应用程序的清单文件中设置该主题（我也尝试将其添加到每个元素）。没有成功。`Activity`

*这是我在res/values*中的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="MyCustomTheme" parent="@android:style/Theme.NoTitleBar.Fullscreen">
    <item name="android:soundEffectsEnabled">false</item>
</style>
</resources> 
```

我的`Application`元素的开始标签：

```
<application
    android:icon="@drawable/icon"
    android:label="@string/app_name"
    android:theme="@style/MyCustomTheme" > 
```

**它可以正常构建和运行**。`NoTitleBar.Fullscreen`也可以，**但是后退和菜单触摸按钮仍在播放声音**。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-02T00:54:30.097

当您的应用程序或任何活动正在运行时，您可以使用[AudioManager](http://developer.android.com/reference/android/media/AudioManager.html)将所有系统声音静音。

**setStreamMute(int, boolean)**

> 静音或取消静音音频流。
> 
> 静音命令可防止客户端进程死亡：如果在流上具有活动静音请求的进程死亡，则该流将自动取消静音。
> 
> 给定流的静音请求是累积的：AudioManager 可以从一个或多个客户端接收多个静音请求，并且只有在收到相同数量的取消静音请求时才会取消静音。
> 
> 为了更好的用户体验，应用程序必须在 onPause() 中取消静音流，并且如果合适，在 onResume() 中再次静音。

所以，实现看起来像这样

```
@Override
protected void onResume() {
    super.onResume();
    AudioManager audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
    audioManager.setStreamMute(AudioManager.STREAM_SYSTEM, true);
}

@Override
protected void onPause() {
    AudioManager audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);
    audioManager.setStreamMute(AudioManager.STREAM_SYSTEM, false);
    super.onPause();
} 
```

# javascript - 追加时出现的神秘元素

> ID：11657897
> 
> 赞同：0
> 
> 时间：2012-07-25T20:14:57.387
> 
> 标签：javascript

我有以下 PHP 和 JS：

```
<?php
    // Here's where the array of objects is built
    $depthElements = array(
        array('http://placehold.it/300x300',-150,100,0.8),
        array('http://placehold.it/200x300',-270,458,0.7)
    );
?>
<script>
var depthElems = <?php echo(json_encode($depthElements)); ?>;
</script> 
```

它构建了一个多维 PHP 数组，然后将它们打包为 JS：

```
jQuery(document).ready(function($) { 

    // Create and position the elements on the page
    for (element in window.depthElems) {
        var a = window.depthElems[element];
        $('body').append('<img src="' + a[0] +
                         '" style="margin-left: ' + a[1] + 
                         'px; top: ' + a[2] + 
                         'px;" data-velocity="' + a[3] +
                         '" class="depthElem" />'); 
    }

    $(document).scroll(function () {
        var topDist = $(document).scrollTop();
        $('.depthElem').each(function () {
            $(this).css('margin-top', -topDist*($(this).attr('data-velocity')+'px'));
        });
    });
}); 
```

这对我来说似乎很有意义，但由于某种原因，页面上有一堆我没有要求的额外元素：

![令人兴奋的神秘元素！](../Images/619c7a913d18ec46bc70e967414804e3.png)

他们来自哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T20:17:19.197

您正在使用`for...in`循环数组，[这是不推荐](https://stackoverflow.com/questions/500504/javascript-for-in-with-arrays)的。结果，您可能会拾取一堆您不想循环的属性，并因此得到垃圾附加。

改用常规的 for 循环 ( `for (var i = 0; i < array.length; i++)`)，它应该可以按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:17:49.170

`for in ...`正在创建问题，因为它也在迭代 Array 对象的属性。

将 for 循环更改为：

```
$.each(window.depthElems, function(i, a){
    $('body').append('<img src="' + a[0] +
                         '" style="margin-left: ' + a[1] + 
                         'px; top: ' + a[2] + 
                         'px;" data-velocity="' + a[3] +
                         '" class="depthElem" />'); 
}); 
```

# sql - 从参数名称中检索参数值作为 SQL 中的字符串

> ID：11657898
> 
> 赞同：1
> 
> 时间：2012-07-25T20:15:09.680
> 
> 标签：sql, sql-server

我正在尝试使用一些动态 sql。我已经生成了 100 多个参数，为了加快速度，我尝试使用动态 sql 仅将值插入到我必须基于从其他表中检索到的信息的表中。我尝试了很多事情，比如添加演员等。

我的意思的例子：

```
DECLARE @var1 NVARCHAR(MAX)

-- Loop through and add various values
SET @var1 = @var1 + @parameterName
-- The parameter name is retrieved from a table that holds this information 
```

问题是，当我将类似于“@myFirstParameter”的参数名称添加到我的最终表达式中时，如下所示：

```
DECLARE @finalString NVARCHAR(MAX)
SET @finalString = 'INSERT INTO myTableName ([myFirstParameter]) VALUES (@myFirstParameter)'
EXEC(@finalString) 
```

“@myFirstParameter”没有被它的值替换，我收到以下错误：必须声明标量变量“@myFirstParameter”。

有谁知道从参数的字符串名称到实际值的方法？我试图避免对所有值进行硬编码，并且我尝试的任何解决方法都失败了，并且给我的错误似乎比我上面所说的要糟糕得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:22:37.747

第一种方法是将参数的值而不是其名称添加到 SQL 字符串中：

```
SET @finalString = 'INSERT INTO myTableName ([myFirstParameter]) VALUES (' + 
    @myFirstParameter + ')' 
```

这假定参数具有字符串值。如果没有，您必须投射它，例如`cast(@myFirstParameter as varchar(128))`.

第二种方法是使用[`sp_executesql`](http://msdn.microsoft.com/en-us/library/ms188001.aspx)代替`exec`：

```
exec sp_executesql 
    N'INSERT INTO myTableName ([myFirstParameter]) VALUES (@myFirstParameter)',
    N'@myFirstParameter varchar(128)',
    @myFirstParameter = @myFirstParameter; 
```

# php - 最佳实践数据库事务和将文件存储到 PHP 中的文件系统

> ID：11657899
> 
> 赞同：9
> 
> 时间：2012-07-25T20:15:21.987
> 
> 标签：php, transactions, pdo

如果用户将用户数据与用户数据存储在数据库中的文件一起上传并且文件存储到文件系统中，那么关于完整性的最佳实践是什么？

目前，我会使用 PHP 和 PDO 执行以下代码片段（代码未经测试，但我希望你能明白我的意思）。我不喜欢 User::insert 方法中的保存图像部分。有没有解决这个问题的好方法？

```
<?php
User::insert($name, $image, $ext);

Class User{
    static public function insert($name, $image, $ext){
        $conn = DB_config::get();

        $conn->beginTransaction();

        $sth = $conn->prepare("
                                INSERT INTO users (name)
                                values(:name)
                                ;");

        $sth->execute(array(
                                ":name"     =>  $name
                                ));

        if ($conn->lastInsertId() > -1 && Image::saveImage($image, IMAGE_PATH . $conn->lastInsertId(). $ext))
            $conn->commit();
        else
            $conn->rollback();

        return $conn->lastInsertId();
    }
}

Class Image{
    static public function saveimage($image, $filename){
        $ext = self::getExtensionFromFilename($filename);

        switch($ext){
            case "jpg":
            case "jpeg":
                return imagejpeg(imagecreatefromstring($image), $filename);
        }

        return false;
    }
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T20:51:59.910

试试这个。

*   将图像保存到工作区中的磁盘。最好将其保存到与最终目的地在同一卷上的工作区。最好将其放在单独的目录中。

*   启动与数据库的事务。

*   插入您的用户。

*   在用户 ID 之后重命名图像文件。

*   提交事务。

它的作用是首先执行最危险的操作，即保存图像。各种各样的事情都可能发生在这里——系统可能会失败，磁盘可能会填满，连接可能会关闭。这（可能）是您的操作中最耗时的，所以它绝对是最危险的。

完成此操作后，您将启动事务并插入用户。

如果此时系统出现故障，你的插入会被回滚，图像会在临时目录下。但是对于您的真实系统，实际上“什么都没有发生”。可以使用自动功能清理临时目录（即重新启动时清理、清理超过 X 小时/天的所有内容等）。文件在此目录中的时间跨度应该很短。

接下来，将图像重命名为其最终位置。文件重命名是原子的。他们工作或不工作。

如果系统在此之后，用户行将被回滚，但文件将在其最终目的地。但是，如果重新启动后有人尝试添加一个新用户，而该用户恰好与失败的用户具有相同的用户 ID，则他们上传的图像将简单地覆盖现有的图像 - 没有害处，没有犯规。如果用户 id 不能重复使用，您将拥有一个孤立的图像。但这可以通过自动化程序每周或每月一次合理地清理。

最后提交事务。

在这一点上，一切都在正确的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:33:57.270

如果将 Image 和 User 类更改为隐含接口，则可以执行这样的类...

```
class Upload {

    public static function performUpload($name, $image, $ext) {

        $user = new User($name);
        $user->save();

        $img = new Image($image, $ext);
        $img->save();

        $isValid = $user->isValid() && $image->isValid();
        if (!$isValid) {

            $user->delete();
            $img->delete();
        }

        return $isValid;
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T20:50:53.127

这似乎是使用 try/catch 块来控制流执行的最佳时机。您似乎还遗漏了大部分难题，即在用户表中保存在图像保存期间创建的图像路径给用户。

以下代码未经测试，但应该让您走上正轨：

```
Class User{

    static public function insert($name, $image, $ext)
    {
        $conn = DB_config::get();

        // This will force any PDO errors to throw an exception, so our following t/c block will work as expected
        // Note: This should be done in the DB_config::get method so all api calls to get will benefit from this attribute
        $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

        try {

            $conn->beginTransaction();

            $sth = $conn->prepare("
                INSERT INTO users (name)
                values(:name);"
            );

            $sth->execute(array(":name" => $name));

            $imagePath = Image::saveImage($image, IMAGE_PATH . $conn->lastInsertId(). $ext));

            // Image path is an key component of saving a user, so if not saved lets throw an exception so we don't commit the transaction
            if (false === $imagePath) {
                throw new Exception(sprintf('Invalid $imagePath: %s', $imagePath));
            }

            $sth = $conn->prepare("UPDATE users SET image_path = :imagePath WHERE id = :userId LIMIT 1");

            $sth->bindValue(':imagePath', $imagePath, PDO::PARAM_STR);
            $sth->bindValue(':userId', $conn->lastInsertId(), PDO::PARAM_INT);

            $sth->execute();

            // If we made this far and no exception has been thrown, we can commit our transaction
            $conn->commit();

            return $conn->lastInsertId();

        } catch (Exception $e) {

            error_log(sprintf('Error saving user: %s', $e->getMessage()));

            $conn->rollback();
        }

        return 0;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-09T01:14:52.390

我认为您应该使用[命令模式](http://gamedevelopment.tutsplus.com/tutorials/let-your-players-undo-their-in-game-mistakes-with-the-command-pattern--gamedev-1391)，首先调用文件操作，然后再调用数据库操作。因此，您可以使用数据库的事务回滚并为文件操作编写手动回滚，例如您可以将文件的内容存储在内存中或临时存储中以防万一发生故障......这更容易回滚文件然后手动回滚数据库记录...

哦，除非您想要死锁，否则锁定资源始终以相同的顺序...例如，始终按 ABC 顺序锁定文件，并始终在文件操作后使用数据库。顺便说一句，在极少数情况下，您可以使用文件系统事务。这取决于您的服务器的文件系统...

# php - 在 IE 中使用 ajax 上传多个文件

> ID：11657902
> 
> 赞同：0
> 
> 时间：2012-07-25T20:15:32.177
> 
> 标签：php, jquery, upload, multipart

我知道 IE 不支持多文件上传，所以我一直在使用 jQuery (http://jquery.malsup.com/form/)。它适用于 Firefox 和 chrome，但不适用于 IE。它似乎根本无法访问 php 文件。所以我做了这个测试来试一试，但什么都没有打印出来。它似乎卡在某个地方。有什么建议吗？

HTML：

```
<form id='form' method="post" enctype="multipart/form-data">
   <input name="file[]" type="file"/>               
   <input name="file[]" type="file"/>               
</form> 
```

Javascript：

```
$('#form').ajaxSubmit({
   url: "ajax.php",
   success : onUploadComplete,
   data: data
}); 
```

打回来：

```
function onUploadComplete(result) {
   console.log(result)
} 
```

ajax.php：

```
<?php
    exit("HERE");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:28:17.193

查看此资源以：

[让 jQuery Media 插件在 IE9 中工作](http://code.adonline.id.au/jquery-media-plugin-ie9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:20:48.777

看看这个资源。我在所有浏览器中都使用过这段代码，而你在 IE 中失去的只是拖放。非常强大的资源，易于实施。

[jQuery 文件上传](http://blueimp.github.com/jQuery-File-Upload/)

# sharepoint - 如何以编程方式获取管理中心站点 url？

> ID：11657906
> 
> 赞同：5
> 
> 时间：2012-07-25T20:15:41.990
> 
> 标签：sharepoint, sharepoint-2010

我在 SharePoint 场机器上运行了一些代码（控制台应用程序），我需要该应用程序来确定该场的管理中心网站的 url。我记得看到一些 SharePoint API 正是这样做的，但我现在找不到它。

我见过很多人为此使用的黑客，比如在 Windows 注册表中查找它，但我需要一种通过 SharePoint API 的方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T22:28:03.243

在 C# 中

```
Microsoft.SharePoint.Administration.SPAdministrationWebApplication centralWeb =
SPAdministrationWebApplication.Local; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-09-11T01:03:38.157

要扩展@RDeVaney 的答案：

```
Microsoft.SharePoint.Administration.SPAdministrationWebApplication centralWeb =
    SPAdministrationWebApplication.Local;
string centralAdminUrl = centralWeb.Sites[0].Url; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-26T11:18:44.090

这是来自msdn的代码，请参考它是否可以回答您的问题

```
SPWebServiceCollection webServices = new SPWebServiceCollection(SPFarm.Local);

foreach (SPWebService webService in webServices)
{
    foreach (SPWebApplication webApp in webService.WebApplications)
    {
        if (!webApp.IsAdministrationWebApplication)
        {
            get the URL here
        }
    }
} 
```

# javascript - 在谷歌地图上绘制在线数据

> ID：11657908
> 
> 赞同：0
> 
> 时间：2012-07-25T20:15:48.197
> 
> 标签：javascript, jquery, asp.net, google-maps

我正在寻找开发一个可以在地图上绘制客户活动的应用程序。客户是生产车间，分布在世界各地。我想在地图上绘制点并在运行时刷新它们，以便它可以反映客户的生产状态。请您推荐和​​演示或看起来在谷歌地图或任何其他解决方案上这样做。

提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:29:34.510

谷歌在他们的网站上有很多例子：[https ://developers.google.com/maps/documentation/javascript/tutorial](https://developers.google.com/maps/documentation/javascript/tutorial)

您至少需要一个 Web 服务，各个位置都可以提交其生产力状态，然后存储该数据。

那么，你可以

1）动态生成页面，将这些数据点拉入某个数组，然后循环遍历数组，添加标记（并且，在添加每个标记时，您可能会选择使用自定义图标，具体取决于他们的生产力水平是，所以你有一个视觉指示器）

或者

2）创建另一个可以查询的Web服务，并给出响应。这样，您可以让页面定期清除它的标记、请求新数据并绘制它们，这样您就可以拥有一个自我更新的仪表板

这是一个执行类似操作的示例页面（没有自定义标记图标）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>SEPTA Route Map</title>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<style>
#wrap {width:960px;margin-right:auto;margin-left:auto;position:relative;}
#map_canvas {width:100%;height:700px;}
</style>
</head>

<body>
<div id="wrap">
<div id="map_canvas"></div>
</div>
</body>
<script type="text/javascript">
var myOptions = {
        zoom: 5,
        mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById('map_canvas'),myOptions);
var markers=new Array();
var first=0;
update();

function update(){
    var bounds2 = new google.maps.LatLngBounds();
    var xmlhttp;
    xmlhttp=((window.XMLHttpRequest)?new XMLHttpRequest():new ActiveXObject("Microsoft.XMLHTTP"));
    xmlhttp.onreadystatechange=function()
    {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            res=JSON.parse(xmlhttp.responseText);
            //clear existing markers
            for (x=0;x<markers.length;x++) {
                markers[x].setMap(null);
            }
            markers=new Array();
            //draw new markers
            for(i=0;i<res['bus'].length;i++){
                var a=new Object();
                a.lat=res.bus[i]['lat'];
                a.lng=res.bus[i]['lng'];
                var point=new google.maps.LatLng(a.lat,a.lng);
                bounds2.extend(point);
                var marker = new google.maps.Marker({position: point,map: map});
                markers.push(marker);
            }
            if(first==0){
                map.fitBounds(bounds2);
                first++;
            }
            setTimeout(update,2000);

        }
    }
    xmlhttp.open("GET","so_septa_data.php",true);
    xmlhttp.send();
}   

</script>
</html> 
```

您会看到它每 2 秒（该`setTimeout`行）调用一次 so_septa_data.php 并且该文件只是：

```
<?php
$route=(isset($_REQUEST['route']))?$_REQUEST['route']:23;
echo file_get_contents("http://www3.septa.org/transitview/bus_route_data/".$route);
?> 
```

您的可能只包括连接到您的数据库、收集结果、将它们格式化为 JSON 或 XML，然后回显结果。

# php - 如何发送 Akamai 缓存过期标头？

> ID：11657911
> 
> 赞同：2
> 
> 时间：2012-07-25T20:15:59.303
> 
> 标签：php, caching, http-headers, cdn, akamai

我有一个网站，每次您上传图像时，它都会以各种帧大小呈现。一个 cron 作业每 10 分钟运行一次，它会查看在此期间是否上传了任何新图像，如果是，它会生成所有需要的帧。

由于此 cron 每 10 分钟运行一次，因此在内容（例如文章）上线和图像可用之间有一段时间。因此，在此期间会显示带有网站徽标的通用占位符图像。

由于 Akamai 缓存图像，因此当站点用户加载具有尚未由 cron 呈现的图像的页面时，将为该图像路径显示一个静态占位符，并且 Akamai 将缓存此。即使图像稍后渲染并且可用，用户仍会从 Akamai 获得缓存版本。

一种解决方案是在 cron 渲染这些图像时破坏这些图像的“年龄”。但是，Akamai 大约需要 8 分钟才能返回新的。

是否有任何其他解决方案，我可以通过缓存过期标头告诉 Akamai 每 10 秒返回一次，直到收到新图像，一旦完成，就不再返回并继续显示缓存版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T23:37:02.253

是的，在某种程度上。如果您从服务器端和 akamai 设置中结合几个步骤。

概念如下：边缘服务器提供它拥有的内容。如果您使用缓存控制标头，例如来自 php，则相应数字属性的 akamai 配置设置中的 TTL 设置会将它们吹走，而是使用它们。这意味着您通过路径、文件类型、扩展名等告诉它多久访问一次您的源服务器。然后从客户端，它提供给最终用户的任何文件，边缘服务器被请求内容的频率并不重要，除非您不在该级别缓存，将其回滚给您。

使用这些配置设置，您可以指定特定文件具有确切的过期时间 - 或根本不缓存它。

因此，如果在服务器端，如果您在页面上指定 placeholder.jpg 并告诉 akamai 根本不要缓存该图像，那么每次边缘服务器收到请求时它都会返回。一旦图像就位，placeholder.jpg 就不再存在于您的页面上，而是有 sizeA.jpg，它将遵守常规图像缓存时间。

这可能并不完全理想，但除了手动清除页面之外，这是您能做的最好的事情，据我所知，他们没有 API 调用来清除您可以触发的页面（加上它需要 7-无论如何，缓存清除需要 10 分钟才能通过它们的 n/w 传播）。

# c# - resharper 用负等式表达式替换自定义模式

> ID：11657922
> 
> 赞同：6
> 
> 时间：2012-07-25T20:16:29.440
> 
> 标签：c#, resharper

我在 resharper 中有一条规则来查找对 Nullable.HasValue 的调用

```
T? foo; 
//...

if(foo.HasValue)
{}

//And it offers to replace with a comparison directly with null:

if(foo != null)
{} 
```

这很好用，但是当它遇到一个 negate`.HasValue`时，结果有点奇怪。

```
if(!foo.HasValue) {}

//is replaced with
if(!(foo != null)) {} 
```

然后 resharper 想让我把语句简化为`if(foo == null)`

```
//ideally it would automatically get to this without the extra step:
if(foo == null) {} 
```

规则定义为：

```
type:     System.ValueType or derived
nullable: expression of type System.Nullable<$type$>

search pattern:
$nullable$.HasValue

replace pattern:
$nullable$ != null 
```

（“替换后的格式”和“缩短引用”都被选中）

有没有办法可以编写此规则，以便 ReSharper 智能地处理它？我尝试为 制定第二条规则`!$nullable$.HasValue`，但这会导致两个规则匹配，这使得工具提示建议看起来令人困惑：`replace with == null`和`replace with != null`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T08:54:23.490

如果不是真的强制性的，你可以放弃这条规则，因为根据这篇[文章](https://stackoverflow.com/questions/676078/which-is-preferred-nullable-hasvalue-or-nullable-null)：

“编译器将空比较替换为对 HasValue 的调用，因此没有真正的区别。只要对您和您的同事更具可读性/更有意义即可。”

# sql - 用多个分隔符分割字符串

> ID：11657925
> 
> 赞同：4
> 
> 时间：2012-07-25T20:16:34.797
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一组地址：

```
34 Main St Suite 23
435 Center Road Ste 3
34 Jack Corner Bldg 4
2 Some Street Building 345 
```

分隔符是：

```
Suite, Ste, Bldg, Building 
```

我想将这些地址分成`address1`这样的`address2`：

```
+---------------------+--------------+
|      Address1       |   Address2   |
+---------------------+--------------+
| 34 Main St          | Suite 23     |
| 435 Center Road     | Ste 3        |
| 34 Jack Corner      | Bldg 4       |
| 2 Some Street       | Building 345 |
+---------------------+--------------+ 
```

如何以这种方式定义一组分隔符和分隔符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T20:45:16.120

```
SELECT
   T.Address,
   Left(T.Address, IsNull(X.Pos - 1, 2147483647)) Address1,
   Substring(T.Address, X.Pos + 1, 2147483647) Address2 -- Null if no second
FROM
   (
      VALUES
      ('34 Main St Suite 23'),
      ('435 Center Road Ste 3'),
      ('34 Jack Corner Bldg 4'),
      ('2 Some Street Building 345'),
      ('123 Sterling Rd'),
      ('405 29th St Bldg 4 Ste 217')
   ) T (Address)
   OUTER APPLY (
      SELECT TOP 1 NullIf(PatIndex(Delimiter, T.Address), 0) Pos
      FROM (
         VALUES ('% Suite %'), ('% Ste %'), ('% Bldg %'), ('% Building %')
      ) X (Delimiter)
      WHERE T.Address LIKE X.Delimiter 
      ORDER BY Pos
   ) X 
```

我使用`PatIndex()`了像“Sterling Rd”这样的地址不会在“Ste”上给你一个错误的匹配

结果集：

```
Address1         Address2
---------------  --------
34 Main St       Suite 23
435 Center Road  Ste 3
34 Jack Corner   Bldg 4
2 Some Street    Building 345
123 Sterling Rd  NULL
405 29th St      Bldg 4 Ste 217 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:55:44.380

您可以使用分隔符表来执行拆分。在此示例中，我使用 XML 进行解析，但是在您使用可靠的分隔符代替您的集合（Ste、Suite 等）之后，您可以使用许多基于 t-sql 的方法中的任何一种来执行拆分.

```
declare @tab table (s varchar(100))
insert into @tab
    select '34 Main St Suite 23' union all
    select '435 Center Road Ste 3' union all
    select '34 Jack Corner Bldg 4' union all
    select '2 Some Street Building 345' union all
    select '20950 N. Tatum Blvd., Ste 300' union all
    select '1524 McHenry Ave Ste 470';

declare @delimiters table (d varchar(100));
insert into @delimiters
    select 'Suite' union all
    select 'Ste' union all
    select 'Bldg' union all
    select 'Building';

select  s, 
        cast('<r>'+ replace(s, d, '</r><r>'+d) + '</r>' as xml),
        [Street1] = cast('<r>'+ replace(s, d, '</r><r>'+d) + '</r>' as xml).value('r[1]', 'varchar(100)'),
        [Street2] = cast('<r>'+ replace(s, d, '</r><r>'+d) + '</r>' as xml).value('r[2]', 'varchar(100)')
from    @tab t
cross
apply   @delimiters d 
where   charindex(' '+d+' ', s) > 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T07:02:57.073

```
select Addr,CASE WHEN CHARINDEX('suite',addr,1)>0 then LEFT(addr,CHARINDEX('suite',addr,1)-1)
            WHEN CHARINDEX('Ste',addr,1)>0 then LEFT(addr,CHARINDEX('Ste',addr,1)-1) 
            WHEN CHARINDEX('Bldg',addr,1)>0 then LEFT(addr,CHARINDEX('Bldg',addr,1)-1)
            WHEN CHARINDEX('Building',addr,1)>0 then LEFT(addr,CHARINDEX('Building',addr,1)-1)
            END as [Address],

            CASE WHEN CHARINDEX('suite',addr,1)>0 then RIGHT(addr,len(addr)-(CHARINDEX('suite',addr,1)-1))
            WHEN CHARINDEX('Ste',addr,1)>0 then RIGHT(addr,len(addr)-(CHARINDEX('Ste',addr,1)-1))
            WHEN CHARINDEX('Bldg',addr,1)>0 then RIGHT(addr,len(addr)-(CHARINDEX('Bldg',addr,1)-1))
            WHEN CHARINDEX('Building',addr,1)>0 then RIGHT(addr,len(addr)-(CHARINDEX('Building',addr,1)-1))
            END as [Address1]

 from Addr 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-25T20:51:12.837

如果您要尝试解析这些数据，并且它不会被某些东西（即逗号）分隔，那么它将变得更加困难，您将不得不做出一些假设。拥有更大的数据集可以帮助您做出更有力的假设，但它仍然会非常脆弱。

查看您的数据，我认为您可以做出以下假设：1）地址2始终是最后2个单词（用空格分割时），因此您可以根据空格分割地址，并将最后2个用作地址2，其余为地址 1。 2) 您可以假设地址 1 是前 3 个字，其余为地址 2。

要拆分这些数据，我会使用与 split(' ', $data) 等效的 T-SQL 来获取单词数组。或者，使用与 strpos 和 strrpos 等效的 T-SQL 来查找倒数第二个空格，或第三个空格的位置，并将其前后的所有内容替换为适当的变量。

您可以根据可用数据做出决定，以选择更可靠的假设并使用它们。

# javascript - 带有 javascript 的 xsl 超链接

> ID：11657927
> 
> 赞同：0
> 
> 时间：2012-07-25T20:16:47.577
> 
> 标签：javascript, sharepoint, sharepoint-2010, hyperlink, xls

此代码有效，但它将父窗口留空并放置“对象”一词。目标窗口按预期打开。我试过了

```
<a href="javascript: window.open('{$viewUrl}','_blank','height=600,width=800,scrollbars=yes')"> View Info </a> 
```

我无法回答我自己的帖子。这对我有用。（到目前为止。哈哈）

```
<a href="javascript:void window.open('{$viewUrl}','_blank','height=600,width=800,scrollbars=yes,resizable=yes')"> View Info </a> 
```

# qt - Qt Creator 2.4.1 中与 CImg 库相关的链接器错误

> ID：11657928
> 
> 赞同：0
> 
> 时间：2012-07-25T20:16:54.970
> 
> 标签：qt, qmake, cimg

我使用 CImg 库编写了一个小型图像处理算法，并使用 Visual C++ Express 将其捆绑在命令行应用程序中。一切编译都没有错误并且运行良好，直到负责该项目的工程师决定他想要一个 GUI。所以我去了Qt和Qt creator。GUI 本身运行良好，但是当我将图像处理算法移过来时，一切都崩溃了。

```
mainwindow.obj : error LNK2019: unresolved external 
symbol__imp__SHGetSpecialFolderPathA@16 referenced in function "char const * __cdecl 
cimg_library::cimg::programfiles_path(char const * const,bool)" 
(?programfiles_path@cimg@cimg_library@@YAPBDQBD_N@Z)

mainwindow.obj : error LNK2019: unresolved external symbol 
__imp__EnumDisplaySettingsW@12 referenced in function "public: static int __cdecl  
cimg_library::CImgDisplay::screen_width(void)" 
(?screen_width@CImgDisplay@cimg_library@@SAHXZ)

mainwindow.obj : error LNK2019: unresolved external symbol __imp__DestroyWindow@4    
referenced in function "public: struct cimg_library::CImgDisplay & __thiscall  
cimg_library::CImgDisplay::assign(void)" 
(?assign@CImgDisplay@cimg_library@@QAEAAU12@XZ)

mainwindow.obj : error LNK2019: unresolved external symbol   
__imp__ChangeDisplaySettingsW@8 referenced in function "public: void __thiscall 
cimg_library::CImgDisplay::_desinit_fullscreen(void)" 
(?_desinit_fullscreen@CImgDisplay@cimg_library@@QAEXXZ)

mainwindow.obj : error LNK2019: unresolved external symbol __imp__SetWindowPos@28 
referenced in function "public: struct cimg_library::CImgDisplay & __thiscall 
cimg_library::CImgDisplay::resize(int,int,bool)" 
(?resize@CImgDisplay@cimg_library@@QAEAAU12@HH_N@Z)

mainwindow.obj : error LNK2019: unresolved external symbol __imp__AdjustWindowRect@12 
referenced in function "public: struct cimg_library::CImgDisplay & __thiscall 
cimg_library::CImgDisplay::resize(int,int,bool)" 
(?resize@CImgDisplay@cimg_library@@QAEAAU12@HH_N@Z)

mainwindow.obj : error LNK2019: unresolved external symbol __imp__DispatchMessageW@4 
referenced in function "public: static unsigned long __stdcall 
cimg_library::CImgDisplay::_events_thread(void *)" 
(?_events_thread@CImgDisplay@cimg_library@@SGKPAX@Z)

mainwindow.obj : error LNK2019: unresolved external symbol __imp__GetMessageW@16 
referenced in function "public: static unsigned long __stdcall 
cimg_library::CImgDisplay::_events_thread(void *)" 
(?_events_thread@CImgDisplay@cimg_library@@SGKPAX@Z)

mainwindow.obj : error LNK2019: unresolved external symbol __imp__SetWindowLongW@12 
referenced in function "public: static unsigned long __stdcall 
cimg_library::CImgDisplay::_events_thread(void *)" 
(?_events_thread@CImgDisplay@cimg_library@@SGKPAX@Z)

mainwindow.obj : error LNK2019: unresolved external symbol __imp__GetDC@4 referenced 
in function "public: static unsigned long __stdcall  
cimg_library::CImgDisplay::_events_thread(void *)" 
(?_events_thread@CImgDisplay@cimg_library@@SGKPAX@Z)

mainwindow.obj : error LNK2019: unresolved external symbol 
__imp__SetForegroundWindow@4 referenced in function "public: static unsigned long 
__stdcall cimg_library::CImgDisplay::_events_thread(void *)" 
(?_events_thread@CImgDisplay@cimg_library@@SGKPAX@Z)

mainwindow.obj : error LNK2019: unresolved external symbol __imp__GetWindowRect@8 
referenced in function "public: static unsigned long __stdcall 
cimg_library::CImgDisplay::_events_thread(void *)" 
(?_events_thread@CImgDisplay@cimg_library@@SGKPAX@Z)

mainwindow.obj : error LNK2019: unresolved external symbol __imp__CreateWindowExA@48 
referenced in function "public: static unsigned long __stdcall 
cimg_library::CImgDisplay::_events_thread(void *)" 
(?_events_thread@CImgDisplay@cimg_library@@SGKPAX@Z)

mainwindow.obj : error LNK2019: unresolved external symbol __imp__DefWindowProcW@16 
referenced in function "public: static long __stdcall 
cimg_library::CImgDisplay::_handle_events(struct HWND__ *,unsigned int,unsigned 
int,long)" (?_handle_events@CImgDisplay@cimg_library@@SGJPAUHWND__@@IIJ@Z)

mainwindow.obj : error LNK2019: unresolved external symbol __imp__ShowCursor@4 
referenced in function "public: static long __stdcall 
cimg_library::CImgDisplay::_handle_events(struct HWND__ *,unsigned int,unsigned 
int,long)" (?_handle_events@CImgDisplay@cimg_library@@SGJPAUHWND__@@IIJ@Z)

mainwindow.obj : error LNK2019: unresolved external symbol __imp__TrackMouseEvent@4 
referenced in function "public: static long __stdcall 
cimg_library::CImgDisplay::_handle_events(struct HWND__ *,unsigned int,unsigned 
int,long)" (?_handle_events@CImgDisplay@cimg_library@@SGJPAUHWND__@@IIJ@Z)

mainwindow.obj : error LNK2019: unresolved external symbol __imp__PeekMessageW@20 
referenced in function "public: static long __stdcall 
cimg_library::CImgDisplay::_handle_events(struct HWND__ *,unsigned int,unsigned 
int,long)" (?_handle_events@CImgDisplay@cimg_library@@SGJPAUHWND__@@IIJ@Z)

mainwindow.obj : error LNK2019: unresolved external symbol __imp__ShowWindow@8 
referenced in function "public: static long __stdcall 
cimg_library::CImgDisplay::_handle_events(struct HWND__ *,unsigned int,unsigned 
int,long)" (?_handle_events@CImgDisplay@cimg_library@@SGJPAUHWND__@@IIJ@Z)

mainwindow.obj : error LNK2019: unresolved external symbol __imp__GetWindowLongW@8 
referenced in function "public: static long __stdcall 
cimg_library::CImgDisplay::_handle_events(struct HWND__ *,unsigned int,unsigned 
int,long)" (?_handle_events@CImgDisplay@cimg_library@@SGJPAUHWND__@@IIJ@Z)

mainwindow.obj : error LNK2019: unresolved external symbol __imp__SetDIBitsToDevice@48 
referenced in function "public: struct cimg_library::CImgDisplay & __thiscall 
cimg_library::CImgDisplay::paint(void)" (?paint@CImgDisplay@cimg_library@@QAEAAU12@XZ)

debug\final.exe : fatal error LNK1120: 20 unresolved externals

NMAKE : fatal error U1077: '"c:\Program Files (x86)\Microsoft Visual Studio 10.0\VC  
\BIN\link.EXE"' : return code '0x460'

Stop.

NMAKE : fatal error U1077: '"C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC  
\BIN\nmake.exe"' : return code '0x2'

Stop. 
```

我现在的问题是，我不知道为什么我遇到了链接器问题。CImg 库是单个 H 文件。它是项目的一部分并包含在内。我知道 Qt Creator 需要将库添加到项目文件中，但是要添加什么？我的图书馆已经列在标题下。

这是项目文件。

```
QT       += core gui

TARGET = final
TEMPLATE = app

SOURCES += main.cpp\
        mainwindow.cpp

HEADERS  += mainwindow.h \
    C:/includes/CImg.h

FORMS    += mainwindow.ui

INCLUDEPATH += C:\includes\ 
```

感谢您的帮助，我主要是一名嵌入式系统程序员，处理我的 C 和汇编元素变得非常令人沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T02:00:25.560

您需要将 Cimg 库链接到您的 GUI 程序。在 .pro 文件中添加库。

```
LIBS += -L$PATH_TO_CIMG_LIB -l$CIMG_LIB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:24:58.227

尝试将 cimg 头文件编译为静态库并使用 (libs+=...youtstaticlibrary) 我使用 Visual Studio，所以我无法帮助您如何将库添加到 qt 中，请自行解决。

编译为静态库的步骤，例如。创建 CIMG_LIB 项目（控制台项目）（或您喜欢的任何名称）并在您的源文件中包含 cimg 标头。在源代码中使用命名空间 cimg_library（不要在此处添加任何其他内容）将项目编译为静态库

--> 在您的项目中使用 qt 包含头文件创建 GUI 项目添加您之前创建的库.. 并且您很好。

# c# - 精简 switch 语句

> ID：11657930
> 
> 赞同：1
> 
> 时间：2012-07-25T20:16:57.920
> 
> 标签：c#, switch-statement

想知道是否有比我下面的表现差的好的替代品？真正的 switch 语句具有其他非英文字符的附加部分。

请注意，我希望每行放置多个 case 语句，但 StyleCop 不喜欢它，因此会导致我们的发布版本失败。

```
 var retVal = String.Empty;
        switch(valToCheck)
        {
            case "é": 
            case "ê": 
            case "è": 
            case "ë":
                retVal = "e";
                break;
            case "à": 
            case "â": 
            case "ä": 
            case "å":
                retVal = "a";
                break;

            default:
                retVal = "-";
                break;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T20:23:42.593

首先想到的是`Dictionary<char,char>()`
（我更喜欢 char 而不是字符串，因为您正在处理字符）

```
Dictionary<char,char> dict = new Dictionary<char,char>();
dict.Add('å', 'a');
...... 
```

然后你可以移除你的整个开关

```
char retValue;
char testValue = 'å';
if(dict.TryGetValue(testValue, out retValue) == false)
   retVal = '-'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T20:24:03.590

好吧，从做这个转换开始。

```
public class CharacterSanitizer
{
    private static Dictionary<string, string> characterMappings = new Dictionary<string, string>();
    static CharacterSanitizer()
    {
        characterMappings.Add("é", "e");
        characterMappings.Add("ê", "e");
        //...
    }

    public static string mapCharacter(string input)
    {
        string output;
        if (characterMappings.TryGetValue(input, out output))
        {
            return output;
        }
        else
        {
            return input;
        }
    }
} 
```

现在您处于字符映射是数据的一部分而不是代码的位置。我在这里对值进行了硬编码，但此时将映射存储在文件中、读入文件然后相应地填充字典已经足够简单了。这样，您不仅可以通过将 case 语句减少到一位文本文件（代码之外）来大量清理代码，而且您可以修改它而无需重新编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T20:25:10.117

您可以进行小范围检查并查看**ascii*值***。

假设`InRange(val, min, max)`检查一个数字是否，是的，在范围内..

```
if(InRange(System.Convert.ToInt32(valToCheck),232,235))
  return 'e';
else if(InRange(System.Convert.ToInt32(valToCheck),224,229))
  return 'a'; 
```

这使代码有点混乱，并且取决于使用的标准，但也许需要考虑一些事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T20:35:24.413

这个答案假定您将 switch 语句应用于字符串，而不仅仅是单个字符（尽管这也可以）。

最好的方法似乎是[这个 StackOverflow 答案](https://stackoverflow.com/a/249126/1106367)中概述的方法。

我对其进行了调整以使用 LINQ：

```
var chars = from character in valToCheck.Normalize(NormalizationForm.FormD)
            where CharUnicodeInfo.GetUnicodeCategory(character)
                    != UnicodeCategory.NonSpacingMark
            select character;
return string.Join("", chars).Normalize(NormalizationForm.FormC); 
```

你需要一个 using 指令`System.Globalization;`

样本输入：

> ```
> string valToCheck = "êéÈöü"; 
> ```

样本输出：

> ```
> eeEou 
> ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T20:35:59.320

基于 Michael Kaplan 的 RemoveDiacritics()，您可以执行以下操作：

```
static char RemoveDiacritics(char c)
{
    string stFormD = c.ToString().Normalize(NormalizationForm.FormD);
    StringBuilder sb = new StringBuilder();

    for (int ich = 0; ich < stFormD.Length; ich++)
    {
        UnicodeCategory uc = CharUnicodeInfo.GetUnicodeCategory(stFormD[ich]);
        if (uc != UnicodeCategory.NonSpacingMark)
        {
            sb.Append(stFormD[ich]);
        }
    }

    return (sb.ToString()[0]);
}

switch(RemoveDiacritics(valToCheck))
{
    case 'e':
        //...
        break;
    case 'a':
        //...
        break;
        //...
} 
```

或者，甚至可能：

```
retval = RemoveDiacritics(valToCheck); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T20:26:03.687

使用`Contains`而不是`switch`.

```
var retVal = String.Empty;

string es = "éêèë";
if (es.Contains(valToCheck)) retVal  = "e";
//etc. 
```

# php - 每个分支mysql按天显示每周销售额

> ID：11657933
> 
> 赞同：0
> 
> 时间：2012-07-25T20:17:09.217
> 
> 标签：php, mysql, sql

我有 2 张桌子。

**表 1 =包含的**分支****

 **分支 ID 分支名称

**表 2 = sales_data** 包含

sales_id sales_date sales_branch sales_profit

我需要显示每个分支机构的每日总销售额和每日总利润。我知道如何恢复给定一周的结果等我真的很努力如何恢复数据。

我还需要始终显示所有分支机构，如果他们没有出售任何东西来显示 0。

我整理了一张我想要完成的快速图像（ [http://i37.photobucket.com/albums/e71/dannyflap/screen_shot.jpg ）。](http://i37.photobucket.com/albums/e71/dannyflap/screen_shot.jpg)这真的让我发疯:(

更新

```
select sales_branch, WEEKDAY(sales_date), COUNT(sales_profit), SUM(sales_profit)
FROM sales_date
GROUP BY sales_branch, WEEKDAY(sales_date) 
```

这将带回以下示例。数字是组成的。

```
sales_branch, day, units, profit:

| branch1 | 0 (as day) | 16 | 439 |

| branch1 | 1 (as day) | 12 | 651 |

| branch1 | 2 (as day) | 22 | 312 |

| branch1 | 3 (as day) | 61 | 614 |

| branch1 | 4 (as day) | 12 | 541 |

| branch1 | 5 (as day) | 24 | 102 |

| branch1 | 6 (as day) | 21 | 145 | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:29:36.867

`branch_id`我想您必须对表 1和表 2进行外部联接，`sales_branch`然后循环遍历结果以生成表。我认为，通过外部加入，那些没有出售任何东西的分支机​​构将获得一个`NULL`。

是生成您遇到问题的表格吗？我认为为这个问题做一些壮观的 SQL 是不明智的。我的两分钱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:24:20.537

您将需要在 sales_data 中映射到分支的外键。

假设 sales_branch 与 branch_name 或 branch_id 不同，sales_data 应包含：

```
sales_id sales_date sales_branch branch_id sales_profit 
```

另外 - 您应该发布您的代码以获取给定一周的结果，我们可以帮助您在此基础上进行构建，而不是给您完整的答案。

**编辑** 修改您的 sales_data 表以使分支表具有外键 branch_id 好，此查询应该让您更接近您正在寻找的内容。

```
SELECT b.branch_name, WEEKDAY(s.sales_date), COUNT(s.sales_profit), SUM(s.sales_profit)
FROM branch b
LEFT OUTER JOIN sales_data on s.branch_id = b.branch_id
GROUP BY b.branch_id, WEEKDAY(s.sales_date) 
```**

# ruby-on-rails - flash.keep 直到下一个页面才起作用

> ID：11657934
> 
> 赞同：1
> 
> 时间：2012-07-25T20:17:14.957
> 
> 标签：ruby-on-rails, redirect

我写了一个重定向，所以它检查页面是否是 https://，如果是，它会将其定向到 http://。

但是，我想使用从 https:// 传递的 Flash 消息，但在重定向期间它会消失，因此它永远不会向用户显示。所以，我试过`flash[:notice].keep`了，但这也不起作用。重定向发生，什么都没有出现，但是在下一页它最终显示了消息。这是我的代码：

```
 def turn_off_https
    if (request.ssl? && params[:controller] != 'subscriptions')
      flash[:notice].keep
      redirect_to :subdomain => "www", :protocol => "http://"
    end
  end 
```

基本上我的网站只有 1 个页面我想要 https:// 但添加后，用户访问的任何其他页面都有 https://，即使我不想要。这就是为什么我将这个 before_filter 添加到应用程序控制器以确保切换回 http。如何确保在重定向时显示通知？

我还尝试在该方法中将“：notice”添加到redirect_to，但这只是将消息作为参数放在URL中，实际上并没有将其加载到页面上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T15:22:50.410

根据[Rails API](http://api.rubyonrails.org/classes/ActionDispatch/Flash/FlashHash.html#method-i-keep)：

```
flash.keep            # keeps the entire flash
flash.keep(:notice)   # keeps only the "notice" entry, the rest of the flash is discarded 
```

# maven - 是否可以为 CXF 服务实现重用 Axis2 bean？

> ID：11657941
> 
> 赞同：1
> 
> 时间：2012-07-25T20:17:43.313
> 
> 标签：maven, cxf, axis2

我正在向我的 Axis2 Web 应用程序添加一个 CXF 接口，并且想知道是否可以使用所有生成的 Axis2 bean 而不是拥有 2 个集合。

现在，我已经对项目进行了足够的操作，以至于它可以编译（使用 maven），但是在 tomcat 中启动它时，我得到了很多这些错误：

```
@XmlAttribute/@XmlValue need to reference a Java type that maps to text in XML. 
```

这个错误来自 Axis2 bean，我猜这是因为 Axis2 在其生成的源中添加了 @XmlAttribute 注释。我的问题是，有没有更简单的方法可以将 Axis2 bean 与 CXF 一起使用？甚至可能吗？在编译之前注释掉 @XmlAttribute 行会解决我的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T17:56:14.770

添加一个 maven-antrun-plugin 任务来查找和替换`@Xml`似乎`//@Xml`有效。我没有测试独立服务，但它们都运行没有错误。如果有人有更好的解决方案，我会全力以赴。我的似乎有点hacky。

# javascript - 如何在 jqGrid 的组中添加新行？

> ID：11657944
> 
> 赞同：0
> 
> 时间：2012-07-25T20:17:58.420
> 
> 标签：javascript, jquery, jqgrid, editing

我对 jqGrid 完全陌生。我正在从具有数据类型的数组填充网格：本地。

```
var data=[
  {date : "01/01/2012",starttime:"10:15",endtime:"11:15",workfunction:"MA"},
  {date : "01/02/2012",starttime:"11:30",endtime:"12:30",workfunction:"CA"},
  {date : "01/03/2012",starttime:"13:30",endtime:"14:30",workfunction:"FC"},
  {date : "01/01/2012",starttime:"10:15",endtime:"11:15",workfunction:"MA"},
  {date : "01/01/2012",starttime:"11:30",endtime:"12:30",workfunction:"CA"},
  {date : "01/02/2012",starttime:"13:30",endtime:"14:30",workfunction:"FC"},
  {date : "01/02/2012",starttime:"10:15",endtime:"11:15",workfunction:"MA"},
  {date : "01/03/2012",starttime:"11:30",endtime:"12:30",workfunction:"CA"},
  {date : "01/03/2012",starttime:"13:30",endtime:"14:30",workfunction:"FC"}
  ];

$("#gridTable").jqGrid({
    data : data,
    editurl:"clientArray",
    datatype: "local",
    height : 250,
    colNames: [' ','Date','Start Time','End Time','Work Function'],
    colModel : [
                {name: 'myac', width:80, fixed:true, sortable:false, resize:false, formatter:'actions',formatoptions:{keys:true}},
                {name: 'date',index:'date',width: 100,sorttype:'date',editable:true,editoptions : {
                    dataInit : function(element){
                        formatDatepicker(element,data);

                    }
                }},
                {name: 'starttime',index:'starttime',width: 100,sorttype:'date',editable:true},
                {name: 'endtime',index:'endtime',width: 100,sorttype:'date',editable:true},
                {name: 'workfunction',index:'workfunction',width: 100,sorttype:'date',editable:true,edittype:"select",editoptions:{value:"MA:MA;CA:CA;FC:FC"}},
                ],
                pager: "#gridPager",
                caption : "Weekly Details",
                grouping : true,
                groupingView : {
                    groupField:['date']
                }

}).navGrid("#gridPager",{edit:true,add:true,del:false},
        //edit properties
        {
    zIndex : 950,

        }
); 
```

上面给出的是我正在使用的网格。我根据日期对网格进行分组，并且我使用 jsp 作为服务器端技术。我的问题是：

1.  我们可以将一行添加到组而不将其提交到服务器吗？
2.  当使用新日期创建新行时，将形成一个新组。
3.  我们可以编辑多行并一次性提交吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:55:57.750

让我确定我是否理解你的正确... 1。您想在网格中添加一行但不想将数据提交到服务器？有可能... 2。您必须更清楚地了解此要求。3.是的，可以将多行的所有编辑数据发送到服务器。

我将从3开始。

你可以在这里使用 multiselect: true ，它是最简单的选项。选择要编辑的行并使用 onSelectRow 实现一个函数，该函数将使您的行在选择它们时可编辑。

然后你可以有一个按钮，它将你编辑的行数据带到服务器。

如何在选择行时使行可编辑

 `````
onSelectRow: function(id){ 
jQuery('#grid').editRow(id, true); } 
````  `或者还有另一种选择让你的所有行都处于可编辑模式

 `````
gridComplete:OnGridComplete, //add this to your Jqgrid parameters

javascript function

function OnGridComplete(){

            var $this = $(this), rows = this.rows, l = rows.length, i, row;
            for (i = 0; i < l; i++) {
                row = rows[i];
                if ($.inArray('jqgrow', row.className.split(' ')) >= 0) {
                    $this.jqGrid('editRow', row.id, true);
                }
            }

        } 
````  `以及如何一键将编辑后的数据发送到服务器，请参阅我的答案

[https://stackoverflow.com/a/11662959/1374763](https://stackoverflow.com/a/11662959/1374763)

现在问你第一个问题

您应该将editUrl更改为clientarray，

jQuery("#grid_id").jqGrid('saveRow',"rowid", false, 'clientArray');

检查此链接并转到 saveRow 参数，了解更多信息

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing)````

# php - mysqli持久连接不起作用

> ID：11657948
> 
> 赞同：4
> 
> 时间：2012-07-25T20:18:14.863
> 
> 标签：php, mysqli, persistent-connection

我正在使用 php 5.4.4，似乎与**mysqli**的持久连接不起作用。特别是，让我们看一下这个脚本：

```
<?php

$links = array();

for ($i = 0; $i < 15; $i++) {
    $links[] =  mysqli_connect('p:192.168.1.40', 'USER', 'PWD', 'DB', 3306);
}

sleep(15); 
```

然后，当脚本运行时，打开另一个 shell 并：

```
netstat -an | grep 192.168.1.40:3306
tcp        0      0 192.168.1.6:52441       192.168.1.40:3306       ESTABLISHED
tcp        0      0 192.168.1.6:52454       192.168.1.40:3306       ESTABLISHED
tcp        0      0 192.168.1.6:52445       192.168.1.40:3306       ESTABLISHED
tcp        0      0 192.168.1.6:52443       192.168.1.40:3306       ESTABLISHED
tcp        0      0 192.168.1.6:52446       192.168.1.40:3306       ESTABLISHED
tcp        0      0 192.168.1.6:52449       192.168.1.40:3306       ESTABLISHED
tcp        0      0 192.168.1.6:52452       192.168.1.40:3306       ESTABLISHED
tcp        0      0 192.168.1.6:52442       192.168.1.40:3306       ESTABLISHED
tcp        0      0 192.168.1.6:52450       192.168.1.40:3306       ESTABLISHED
tcp        0      0 192.168.1.6:52448       192.168.1.40:3306       ESTABLISHED
tcp        0      0 192.168.1.6:52440       192.168.1.40:3306       ESTABLISHED
tcp        0      0 192.168.1.6:52447       192.168.1.40:3306       ESTABLISHED
tcp        0      0 192.168.1.6:52444       192.168.1.40:3306       ESTABLISHED
tcp        0      0 192.168.1.6:52451       192.168.1.40:3306       ESTABLISHED
tcp        0      0 192.168.1.6:52453       192.168.1.40:3306       ESTABLISHED 
```

我认为这是一个错误：PHP 应该只打开一个持久连接而不是 15 个不同的连接。

这是真的吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-17T13:07:29.567

你在错误的地方寻找好处；使用持久连接不会像在您的测试中那样帮助执行单个 php 脚本 - 它有助于处理一系列请求。

***当您要求 mysqli 建立持久连接时，它会查找与您的连接详细信息（用户名/密码/等）匹配且未被使用***的已建立连接池。 您的循环要求*使用*十五个连接，您将获得十五个连接。每个连接都专用于您的线程。

当你的线程关闭时，你应该在 netstat 中列出 15 个连接，就像你做的那样。

如果再次运行该脚本，您应该看到列出的连接没有变化（即没有建立新的连接）。这就是优势所在 - 在以后的脚本执行中，您可以节省建立连接的开销。

更好的测试是在第一个请求上执行创建一百个持久连接的时间，然后重新运行相同的请求，这应该会更快，因为它不需要创建一百个新连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-16T02:54:21.287

mysqli 持久连接将在调用 mysqli_close 后将链接保留在池中。或运行 RSHUTDOWN。所以你可以使用这段代码来完成它。

```
for ($i = 0; $i < 15; $i++) {
    $links[$i] =  mysqli_connect('p:192.168.1.40', 'USER', 'PWD', 'DB', 3306);
    var_dump(mysqli_thread_id($links[$i]));    //make sure they are the same.
    mysqli_close($links[$i])
}
sleep(15); 
```

结果将是这样的：

```
root@cnxct:/home/cfc4n# netstat -antp |grep 3306|grep -v "php-fpm"
tcp        0      0 192.168.61.150:55148    192.168.71.88:3306      ESTABLISHED 5100/php5   
root@cnxct:/home/cfc4n# /usr/bin/php5 4.php 
int(224218)
int(224218)
int(224218)
int(224218)
int(224218)
int(224218)
int(224218)
int(224218)
int(224218)
int(224218)
int(224218)
int(224218)
int(224218)
int(224218)
int(224218) 
```

你可以阅读更多关于[mysql 和 mysqli 的中文持久连接的一些区别的信息](http://www.cnxct.com/some-differences-between-mysql-and-mysqli-of-persistent-connection/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T21:48:02.137

如果您运行 PHP 所通过的服务器 API 创建多个父进程来运行 PHP，那么这是有道理的。

例如，如果您使用 FastCGI 并将其配置为有 15 个进程，并且每个进程中有 50 个子进程，那么您在任何给定时间最多可以有 15 个持久连接（每个进程 1 个）并且每个进程的 50 个子进程中的每一个进程将使用来自其父进程的 1 个持久链接。

在 Apache 中，我相信[StartServers](http://httpd.apache.org/docs/2.2/mod/mpm_common.html#startservers)指令是相关的，然后对于每个运行的子服务器进程，您有[Th​​readsPerChild](http://httpd.apache.org/docs/2.2/mod/mpm_common.html#threadsperchild)线程正在运行，每个线程都将使用来自其各自父级的持久链接。

我的猜测是，如果您使用的是 Apache，那么您有 15 个子进程正在运行，并且每个子进程都有自己的线程。这就是为什么您会看到 15 个持久连接。

希望有帮助。

# android - 如何跟踪 android 应用程序的安装时间

> ID：11657951
> 
> 赞同：0
> 
> 时间：2012-07-25T20:18:25.220
> 
> 标签：android, installation, google-analytics, tracking

我想知道如何使用“Google Analytics”跟踪应用程序的安装时间。尤其是从 google play 下载/安装。

我一直在查看我的 Google Analytics（分析）帐户，但没有看到此信息（我认为默认情况下会包含一些统计信息。但是.....）

然后我看到了“Google Play Campaign Tracking”（参见[https://developers.google.com/analytics/devguides/collection/android/devguide#campaigns](https://developers.google.com/analytics/devguides/collection/android/devguide#campaigns)）

我有点困惑。那是我应该使用的吗？或者我应该使用“事件跟踪”？（只需在应用程序第一次启动时注册一个事件）

有任何想法吗？提前致谢！

# git - 使用 git 初始化子模块

> ID：11657957
> 
> 赞同：2
> 
> 时间：2012-07-25T20:18:39.497
> 
> 标签：git, github, git-submodules

我将此添加到我的应用程序中：

```
https://github.com/fpotter/juggernaut-cocoa 
```

在说明中，它说：

```
If you have git 1.7+ git clone git://github.com/fpotter/juggernaut-cocoa.git --recursive 
```

它没有说明在哪里克隆它，所以我将它克隆到我的 Documents 文件夹中。然后我将 AsyncSocket.h、AsyncSocket.m、WebSocket.h、WebSocket.m、SocketIoClient.h、SocketIoClient.m、JuggernautClient.h、JuggernautClient.m 文件复制到我在供应商内部创建的名为 juggernaut-cocoa 的文件夹中的项目中.

然而，虽然这些文件在我的本地机器上工作，但当我推送到 github 时，它们永远不会被添加。我看到的只是一个绿色的小文件夹：

[http://i47.tinypic.com/2ajnkzl.jpg](http://i47.tinypic.com/2ajnkzl.jpg)

但是当我尝试从另一台计算机克隆我的存储库时，文件不存在，它们从未添加到 git。

然后我尝试将他们的项目克隆到我的 Vendor 文件夹中，然后运行 ​​git submodule init 但得到了这个：

```
No submodule mapping found in .gitmodules for path 'Vendor/juggernaut-cocoa' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T11:23:05.930

注意`AsyncSocket.m`, `WebSocket.h`, ... 都是[github.com/erichocean/cocoa-websocket](https://github.com/erichocean/cocoa-websocket/tree/master/AsyncSocket)的文件，即：

*   [github.com/fpotter/socketio-cocoa](https://github.com/fpotter/socketio-cocoa)的子模块，
*   它*本身*是[github.com/fpotter/juggernaut-cocoa](https://github.com/fpotter/juggernaut-cocoa)的子模块（因此是 Github 上的绿色小文件夹）

因此，如果您修改子子模块中的任何内容，则必须：

*   将那些修改推送到`erichocean/cocoa-websocket`，但也
*   将该 repo id 提交回`fpotter/socketio-cocoa`（的父 repo `cocoa-websocket`），然后推送它，然后
*   `fpotter/socketio-cocoa`将新的repo id提交回`fpotter/juggernaut-cocoa`（其父 repo），然后推送...

因此，请确保这是您真正想做/可以做的（因为您需要对这些 repo 具有写访问权限，即被声明为协作者）。

关于您的错误消息，请检查[No submodule mapping found in .gitmodule 以获取不是 submodule 的路径](https://stackoverflow.com/a/11474212/6309)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-13T15:22:19.800

如果您手动将文件从另一个项目复制到您的项目中，它们不会成为您的存储库的一部分，除非您添加它们：

```
git add vendor/juggernaut-cocoa/
git commit 
```

如果您想改用子模块，则无法通过手动克隆然后调用“git submodule init”来添加它。相反，您只需调用`git submodule add`.

首先，`cd`到主项目的根目录。然后

```
git submodule add https://github.com/fpotter/juggernaut-cocoa vendor/juggernaut-cocoa
git commit 
```

# python - PyODBC Cursor.fetchall() 导致 python 崩溃（段错误）

> ID：11657958
> 
> 赞同：4
> 
> 时间：2012-07-25T20:18:43.853
> 
> 标签：python, segmentation-fault, pyodbc

我在 Windows XP 上使用 Python 2.7。

我有一个简单的 python 脚本，它使用 pyodbc 从 AR 数据库中获取数据，该数据库一直运行良好，直到今天。一旦光标到达特定行，我就会收到段错误。我在 C++ 中有类似的代码，检索结果没有问题，所以我认为这是 pyodbc 的问题。无论哪种方式，我都想“抓住”这个错误。我尝试使用 subprocess 模块，但它似乎不起作用，因为一旦脚本遇到段错误，它就会挂在“python.exe 遇到问题并需要关闭”上。信息。我想我可以设置一些任意的时间框架来完成它，如果没有，则强制关闭该过程，但这似乎有点蹩脚。

我也在这里报告了这个问题 - [http://code.google.com/p/pyodbc/issues/detail?id=278](http://code.google.com/p/pyodbc/issues/detail?id=278)

@paulsm4 - 我在下面回答了你的问题，谢谢！

> 问：您使用的是 Windows/XP（我想是 32 位）、Python 2.7 和 BMC Remedy AR。正确的？

A: 是的，它在 Win XP 32 位和 Win Server 2008 R2 64 位上失败。

> 问：您（或者您的客户，如果他们购买了 Remedy AR）是否有机会向 BMC 发起支持电话？

答：应该不会……

> 问：你能隔离出是哪一列导致了段错误吗？发生段错误时“有什么不同”？

答：只是这一行......但我现在已经用您的建议将问题隔离在下面。我使用循环来获取每个字段，直到发生段错误。

```
cursor.columns(table="mytable")
result = cursor.fetchall()
columns = [x[3] for x in result]
for x in columns:
    print x
    cursor.execute("""select "{0}"
                      from "mytable"
                      where id = 'abc123'""".format(x))
    cursor.fetchall() 
```

一旦我确定了导致段错误的列，我就尝试查询除该列之外的所有列，并且确定它没有问题。

该列的数据类型是 CHAR(1024)。我使用 C++ 来获取数据，并注意到该行的列中的字符数是所有其他行中最多的...1023！认为 PyODBC 的 C 代码中可能有一个缓冲区被写入超出其边界。

> 2) 启用 ODBC 跟踪：http: [//support.microsoft.com/kb/274551](http://support.microsoft.com/kb/274551)
> 
> 3) 回传结果（包括失败的日志跟踪）

好的，我创建了一个带有 ODBC 跟踪结果的 pastebin - [http://pastebin.com/6gt95rB8](http://pastebin.com/6gt95rB8)。为了保护无辜者，我屏蔽了一些字符串值。

看起来可能是由于数据截断。

这是否为我们提供了有关如何解决问题的足够信息？我认为这是 PyODBC 中的一个错误，因为直接使用 C ODBC API 可以正常工作。

**更新**

所以我编译了 PyODBC 进行调试，我收到了一条有趣的消息——

```
Run-Time Check Failure #2 - Stack around the variable 'tempBuffer' was corrupted. 
```

虽然我目前不明白，但调用堆栈如下 -

```
pyodbc.pyd!GetDataString(Cursor * cur=0x00e47100, int iCol=0)  Line 410 + 0xf bytes C++
pyodbc.pyd!GetData(Cursor * cur=0x00e47100, int iCol=0)  Line 697 + 0xd bytes   C++
pyodbc.pyd!Cursor_fetch(Cursor * cur=0x00e47100)  Line 1032 + 0xd bytes C++
pyodbc.pyd!Cursor_fetchlist(Cursor * cur=0x00e47100, int max=-1)  Line 1063 + 0x9 bytes C++
pyodbc.pyd!Cursor_fetchall(_object * self=0x00e47100, _object * args=0x00000000)  Line 1142 + 0xb bytes C++ 
```

**解决！**

通过确保缓冲区有足够的空间来解决问题。

在线`getdata.cpp`330

```
char tempBuffer[1024]; 
```

改为

```
char tempBuffer[1025]; 
```

编译并替换了站点包中的旧 pyodbc.pyd 文件，我们都很好！

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T02:23:02.840

问：您使用的是 Windows/XP（我想是 32 位）、 [Python 2.7](http://www.python.org/getit/)和[BMC Remedy AR](http://www.bmc.com/products/product-listing/22735072-106757-2391.html)。正确的？

问：您（或者您的客户，如果他们购买了 Remedy AR）是否有机会向 BMC 发起支持电话？

问：你能隔离出是哪一列导致了段错误吗？发生段错误时“有什么不同”？

请执行以下操作：

1) 使用 Python/ODBC 尝试不同的“选择 a、b、c”语句，看看是否可以重现问题（独立于您的程序）并隔离特定列（或者，理想情况下，特定列和行！）

2) 启用 ODBC 跟踪：http: [//support.microsoft.com/kb/274551](http://support.microsoft.com/kb/274551)

3) 回传结果（包括失败的日志跟踪）

4) 如果这不起作用 - 并且您无法获得 BMC 技术支持 - 那么计划 B 可能是在 ODBC 库级别进行调试：

*   [如何在 Windows 上调试 Python 的 C 扩展](https://stackoverflow.com/questions/11713701/how-to-debug-c-extensions-for-python-on-windows)

    问：哪种 C/C++ 编译器最适合您？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-10T20:42:42.190

对于可能收到此错误的任何其他人，请检查返回的数据类型格式。就我而言，它是一个`datetime`专栏。used `select convert(varchar, getdate(), 20) from xxx`，或任何`convert`格式来获得您想要的结果。

# opengl-es - 如何在 libgdx 中为精灵或纹理创建蒙版

> ID：11657964
> 
> 赞同：1
> 
> 时间：2012-07-25T20:19:18.543
> 
> 标签：opengl-es, libgdx, masking, image-masking

我正在为 android 开发 libgdx，问题是我之前（不在 libgdx 中）为我的精灵使用了蒙版来将我的精灵的周围设置为透明，所以当我将它们绘制到屏幕上时，它们会显示背景而不是一个白色的矩形，但我似乎没有在 libdgx 中找到任何方法来做到这一点，你们如何为二维精灵制作蒙版？我是否必须使用 OpenGL，因为我不太了解它，如果可以的话，你能告诉我怎么做吗？我也可以在纹理上做吗？

![在此处输入图像描述](../Images/f564c099a652a4bf14e2db257ab9cf9c.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T21:17:13.783

我只是将 PNG 图像用于具有透明像素的精灵。这些 PNG 图像使用 Texture Packer 或使用 Libgdx 打包成更大的 PNG 纹理文件来制作纹理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T18:18:55.480

您可以像这样使用网格[http://code.google.com/p/libgdx/wiki/MeshColorTexture](http://code.google.com/p/libgdx/wiki/MeshColorTexture)

# php - Yii：更改用于分页的 Sql 请求

> ID：11657966
> 
> 赞同：2
> 
> 时间：2012-07-25T20:19:21.507
> 
> 标签：php, pagination, yii

我正在尝试使用 Yii 的分页，一切正常！但是（总是有一个但是^^）为获取对象数量而执行的请求未优化：在我的控制器中，我有以下代码：

```
<?php
$criteria = new CDbCriteria(array(
                        'with' => array('series', 'author', 'stars'),
                        'condition' => "etat = " . 1,
                ));
$dataProvider = new CActiveDataProvider(News::model(), array(
                        'pagination' => array(
                                'pageSize' => 10,
                        ),
                        'criteria' => $criteria,
                ));
?> 
```

CPagination 对分页执行的请求是：

```
SELECT COUNT(DISTINCT `t`.`id`) 
FROM `news` `t` 
LEFT OUTER JOIN `news_serie` `series_series` ON (`t`.`id`=`series_series`.`id_news`)
LEFT OUTER JOIN `serie` `series` ON (`series`.`id`=`series_series`.`id_serie`)
LEFT OUTER JOIN `user` `user` ON (`t`.`id_user`=`user`.`id`)
LEFT OUTER JOIN `news_stars` `stars_stars` ON (`t`.`id`=`bonhommes_bonhommes`.`id_news`) LEFT OUTER JOIN `stars` `stars` ON (`stars`.`id`=`stars`.`id_stars`) 
WHERE (etat = 1) 
```

在这种情况下，这个请求很复杂，我想使用：

```
SELECT COUNT(DISTINCT `t`.`id`) FROM `news` `t`  WHERE (etat = 1) 
```

所以我的问题是：我如何更改获取新闻总数的请求？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:56:07.450

答案真的很简单！我所要做的就是使用我想要的请求在我的 Provider 中设置 totalitemCount 值：

```
$dataProvider = new CActiveDataProvider(News::model(), array(
                        'pagination' => array(
                                'pageSize' => 10,
                        ),
                        'criteria' => $criteria,
                        'totalItemCount' => News::model()->count('etat = 1'),
                )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:02:20.427

你可以试试这个...

```
$itemCount = $dataProvider->getTotalItemCount(); 
```

# c++ - 如何获取 DLL 中的函数列表（托管和非托管）？

> ID：11657968
> 
> 赞同：8
> 
> 时间：2012-07-25T20:19:29.210
> 
> 标签：c++, windows, dll, unmanaged

所以我玩了一个 DLL (UnityEditor.dll) 我想获取这个托管 DLL 中所有非托管函数的列表（dll 可能由本机 C++ 组成（如果使用的话，使用静态编译的库）核心和托管C++ 包装器全部包装到一个 dll 中。）我想获取该 Dll 中所有非托管函数的列表，例如创建我自己的托管\非托管包装器？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-25T20:21:44.157

[`dumpbin.exe`](http://msdn.microsoft.com/en-us/library/c1h23y6c%28v=vs.90%29.aspx)Visual Studio 附带的实用程序可用于显示导出列表。例如：

> dumpbin.exe /EXPORTS C:\WINDOWS\System32\Kernel32.dll

示例输出：

```
Microsoft (R) COFF/PE 翻车机版本 10.00.30319.01
版权所有 (C) 微软公司。版权所有。

转储文件 C:\Windows\System32\kernel32.dll

文件类型：DLL

  部分包含 KERNEL32.dll 的以下导出

    00000000 个特征
    4E20FBA0 时间日期戳 Sat Jul 16 03:46:56 2011
        0.00 版本
           1 个序数基数
        1390个功能
        1390个名字

    序号提示 RVA 名称

          1 0 AcquireSRWLockExclusive（转发到 NTDLL.RtlAcquireSRWLockExclusive）
          2 1 AcquireSRWLockShared（转发到 NTDLL.RtlAcquireSRWLockShared）
          3 2 00004440 激活ActCtx
          4 3 00066B80 添加原子
          5 4 00066B20 AddAtomW
          6 5 0006ADF0 添加控制台别名A
          7 6 0006AE60 添加控制台别名W

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:22:34.223

[打开 .dll 文件并使用Microsoft 提供](http://msdn.microsoft.com/en-us/windows/hardware/gg463125.aspx)的二进制 PE/COFF 规范查找此 PE 文件的 EXPORT 部分。

但我认为那是矫枉过正。你的问题应该是一个具体的需求。你到底想包装什么，你有什么？只有二​​进制文件，没有源/头文件？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T20:40:08.183

DLL 不包含“函数”。它们包含代码和入口点。除非您有调试数据库，否则无法从优化代码中分辨出函数之间发生转换的位置。

# android - 完成图像转换后做一些事情

> ID：11657969
> 
> 赞同：0
> 
> 时间：2012-07-25T20:19:32.583
> 
> 标签：android

我正在旋转图像，现在想运行 System.out.println("Transformation done!"); 改造完成后。方法是：

```
protected void applyTransformation(float interpolatedTime, Transformation t) {

final float fromDegrees = mFromDegrees;
float degrees = fromDegrees + ((mToDegrees - fromDegrees) * interpolatedTime);

final float centerX = mCenterX;
final float centerY = mCenterY;
final Camera camera = mCamera;

final Matrix matrix = t.getMatrix();

camera.save();
camera.rotateX(degrees);
camera.getMatrix(matrix);
camera.restore();

matrix.preTranslate(-centerX, -centerY);
matrix.postTranslate(centerX, centerY);

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:11:59.953

该问题[在 SO](https://stackoverflow.com/questions/2214735/android-animationdrawable-and-knowing-when-animation-ends)处理。此问题可能与提供链接的帖子中处理的问题重复。

在另一篇文章中，他们建议转播动画的持续时间。或者，如果视图仍在动画中，则检查时间间隔。这些解决方案都不适合您。

编辑：但这可能:-)

使用您想知道结束的动画的 AnimationListener。 [http://developer.android.com/reference/android/view/animation/Animation.html#setAnimationListener%28android.view.animation.Animation.AnimationListener%29](http://developer.android.com/reference/android/view/animation/Animation.html#setAnimationListener%28android.view.animation.Animation.AnimationListener%29)

# c - 分段错误倒带

> ID：11657972
> 
> 赞同：0
> 
> 时间：2012-07-25T20:19:58.837
> 
> 标签：c

你能解释一下为什么在函数“recuperationdeNS”中的 rewind(f) 之后，我有一个 Segmentation Fault 吗？函数“recuperationdeNS”中的第二个 printf 没有出现。分段错误之前停止了程序。我确定文件名没问题。

谢谢

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include"procedurecommune.h"
#include"procedureGenA.h"
#include"procedureGenO.h"
void ouvrir_fic(FILE** f, char* nom,char* type)
{ 
    *f=fopen(nom,type);
    if(f==NULL)
    {
        printf("probleme lecture ou ecriture du fichier : %s\n",nom);
        exit(2);
    }
}
int recuperationdeNS(FILE* fichG)
{
    printf("aloooooooooo\n");
    int i, N;
    char chaine [2000];
    rewind(fichG);
    printf("aloooooooooo\n");
    for(i=0;i<2;i++)       // on saute les lignes de commentaires
    {
        fgets(chaine, sizeof chaine, fichG);
        printf("chaine :%s\n",chaine);
    }
    fscanf(fichG, "%d",&N); // recuperation de N
    return (N);
}

void recuperationnomfichiergena(FILE* fichG, char** NomFichierGenA, int nbligneasauter)
{       
    int i,c,iemecaractereligne;
    rewind(fichG);
    char chaine [Nmcl];
    for(i=0;i<nbligneasauter;i++)       // on saute les lignes de commentaires
    {
        fgets(chaine, sizeof chaine, fichG);
    }
    *NomFichierGenA=(char*) malloc (sizeof(char)*Nmcl);  
    fgets(chaine, sizeof chaine, fichG);
    iemecaractereligne=0;
    c=chaine[iemecaractereligne];
    while(c != '\n')
    {
        c=chaine[iemecaractereligne];
        if(c !='\n')
        {
            (*NomFichierGenA)[iemecaractereligne]=c;
        }
        iemecaractereligne++;

    }
}   

int determinationtypedegenchoisi(FILE* fichG);
int recuperationdeN(FILE* fichG);
void recuperationtabentiergenencours(FILE* fichG,int* genencours, int N);
void recuperationnomfichiergena(FILE* fichG, char ** nomfich,int nbligneasauter);

void main(int args, char **argv)
{

    FILE * fichG=NULL;  
    FILE * fichM=NULL; //fichier contenant le contexte
    FILE * fichMgenParAtt=NULL;     //fichier contenant le contexte pregeneralise par attribut
    FILE * fichGA=NULL; //fichier contenant la matrice de generalisation attribut
    FILE * fichGO=NULL;
    int** Matricegenereextraite;
    int typedegen;
    int i,nbligneMat,nbcolonneMat,nbgroupegeneralisant1,nbgroupegeneralisant2;
    char NomUniqueFichierGen[Nmcm];
    char chaine[Nmcl];
    char* NomFichGenExtraitA;
    char* NomFichGenExtraitO;
    char* NomFichGenExtraitFinale;
    char* NomFichierGenA ;
    char* NomFichierGenO;
    char* chaineNva;
    char* chaineNvo;
    int Na, No;
    int N, Ni;
    int* nbgroupegeneralisant;
    int nbgroupegeneralisantmax;
    const int nbligneenteteGparun = 5;//nombre de ligne pour acces nom fichier de gen attribut
    const int nbligneenteteGpardeux = 8;//nombre de ligne pour acces nom fichier de gen objet
    int* genencours;
    NomFichGenExtraitA=argv[3];
    NomFichGenExtraitO=argv[4];
    NomFichGenExtraitFinale=argv[5];
    chaineNva= argv[6];
    chaineNvo= argv[7];
    char dernierephrase[]="Name_of_dataset\n";
    char* nomsdesobjets;
    char** nomsdesgroupes;
    char* nomsdesattributs;
    int*** Matrice;
    //Nva=chaineNva[0]-'0';
    //Nvo=chaineNvo[0]-'0';
    /// ouverture des fichiers
    ouvrir_fic(&fichG, argv[2],"r");
    ouvrir_fic(&fichM, argv[1],"r");
    ///////////////////////////////////////////////
    //info du fichier Gen.txt
    typedegen=determinationtypedegenchoisi(fichG);
    printf("typedegen: %d\n",typedegen);
    N=recuperationdeN(fichG);
    printf("N: %d\n",N);
    allocationdynamiquetableauunedimdentier(&genencours, N);
    recuperationtabentiergenencours(fichG,genencours,N);
    ///////////////////recuperation choix de gen

    //////////////////////////////////////////////////
    //info du fichier Matrice.txt
    nblignecolonneMat(fichM,&nbligneMat,&nbcolonneMat,dernierephrase);
    printf("nbligneMat :%d, nbcolonneMat :%d\n",nbligneMat, nbcolonneMat);
    ///lecture du noms des objets et des attributs
    objetsetattributs(fichM, &nomsdesobjets,&nomsdesattributs, dernierephrase);
    printf("nomsdesO : %s\n",nomsdesobjets);
    printf("nomsdesA : %s\n",nomsdesattributs);
    //allocation dynamique
    allocationdynamiquetableautroisdimdentier(&Matrice,N,nbligneMat,nbcolonneMat);
    /// recuperation de la matrice de depart
    recuperationmatrice (fichM, Matrice[0], nbligneMat, nbcolonneMat);
    printf("\nMatrice 0:\n");
    affichageMatrice(0, nbligneMat, 0, nbcolonneMat, Matrice[0]);
    typedegen=1;

 if(typedegen==1)
    {
        //////////////////////////////////////////
        //info du fichier genO.txt
        recuperationnomfichiergena(fichG, &NomFichierGenO,nbligneenteteGpardeux);
        printf("fichier de generalisation utilise :%s\n ",NomFichierGenO);
        ouvrir_fic(&fichGO, NomFichierGenO,"r");
        No=recuperationdeNS(fichGO);
        printf("No :%d\n",No);
    }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:27:23.560

您的文件打开签入`ouvrir_fic()`错误：

```
void ouvrir_fic(FILE** f, char* nom,char* type)
{ 
    *f=fopen(nom,type);
    if(f==NULL)
    {
        printf("probleme lecture ou ecriture du fichier : %s\n",nom);
        exit(2);
    }
} 
```

您应该检查是否`*f`为 NULL；`f`您在进行分配时已经假设它不为空。

由于文件无法打开，您在`*f`.

我可能会使用：

```
FILE *ouvrir_fic(const char *nom, const char *mode)
{ 
    FILE *fp = fopen(nom, mode);
    if (fp == NULL)
    {
        fprintf(stderr, "probleme lecture ou ecriture du fichier: %s\n", nom);
        exit(2);
    }
    return(fp);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:27:52.157

这*可能*会导致问题：

```
*f=fopen(nom,type);
if(f==NULL) 
```

该`if`检查不检查文件是否已打开（仅在使用`f`参数后检查参数是否不为空）。如果`fopen()`失败，文件指针将是`NULL`并且它将未被检测到。检查应该是：

```
if (*f == NULL) 
```

# c# - 具有许多上传图像的对象

> ID：11657973
> 
> 赞同：0
> 
> 时间：2012-07-25T20:20:06.080
> 
> 标签：c#, asp.net-mvc-3, domain-driven-design

我正在构建一个简单的网络应用程序。场景如下。

1.  图片上传
2.  选择一张或多张图片创建新对象（之前上传）
3.  显示具有相应图像的对象

我在想创造这样的东西

```
SampleObject.cs
    Guid Id {get; set;}
    string Name {get; set;}

Image.cs
Guid Id {get; set;}
string Name {get; set;}
string ImagePath {get; set;}
SampleObject SampleObject {get; set;} 
```

但另一方面，我只需要带有许多 ImagePath 字符串的 SampleObjects。所以更好的方法是将其简化为只有具有许多字符串的 SampleObjects (ImagePath)。

所以，第二种情况如下

1.  上传图片
2.  创建对象并使用 jquery onclick 选择一个或多个图像（读取 img src 元素）并将这些字符串存储在 SampleObject 字符串列表中。

第二种情况对您来说似乎更好，如果确实如此，您将如何创建这些实体（sampleobject.cs 和 image.cs）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:24:19.720

我会这样处理这个问题：

为您可能拥有的任何图像创建一个简单的模型。

```
public class UploadedImageModel
{
    public string ImagePathUrl { get; set; }
    public string AlternateText { get; set; }
} 
```

创建一个简单的 ViewModel，其中包含您可能想要显示的图像集合。

```
public class ImageGalleryViewModel
{
    public List<UploadedImageModel> Images { get; set; }
} 
```

然后在您的视图中：

```
@model MyApp.WebUI.Models.ImageGalleryViewModel

@foreach(var pic in Model.Images) {

    <img src="pic.ImagePathUrl" alt="pic.AlternateText" /> 

} 
```

# php - Salesforce 检索对象数据

> ID：11657977
> 
> 赞同：0
> 
> 时间：2012-07-25T20:20:35.037
> 
> 标签：php, salesforce, soql

到目前为止，这个查询工作正常`SELECT * FROM Contact`，它从 Contact 对象中检索所有联系人，但现在我试图从 Education__c 中获取数据，所以我尝试了`SELECT * FROM Education__c`。这就是我所拥有的：

```
$query = "SELECT * FROM Education__c";
$response = $mySforceConnection->query($query);
foreach($response->records as $record){
        echo ($record->fields->School_Name__c); 
```

但这不起作用。所以我想我对响应->记录做错了，但我不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:38:15.030

SOQL 不喜欢通配符[SOQL](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_calls_soql.htm)。尝试指定要检索的字段。另外，它会给您带来任何错误吗？

# java - 使用此自定义方法执行 JDBC MySQL 查询

> ID：11657983
> 
> 赞同：0
> 
> 时间：2012-07-25T20:21:09.893
> 
> 标签：java, mysql, database, jdbc

我一直在做我的功课，我决定将我的 vote4cash 类重写为一个名为 MysqlManager 的新类，该类为我的 vote4cash 奖励系统管理 mysql。我制作的 MysqlManager 类需要允许 Commands 类连接到 mysql - 完成并且它需要允许 Commands 类执行查询 - 我需要这部分的帮助。我的新课程取得了更大的进步，但我仍然停留在课程的最后、最重要的部分之一，再次允许命令类执行查询。

在我的 MysqlManager 类中，我将连接到 MySql 的代码放在下面

`public synchronized static void createConnection() {`

现在我只需要将允许 Commands 类执行查询的代码也放在它下面。我已经研究并尝试这样做了一段时间，但我绝对没有运气。

整个 MysqlManager 类：

```
package server.util;

/*
import java.sql.Connection;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
*/
import java.sql.*;
import java.net.*;
import server.model.players.Client;//Will be needed eventually so that I can reward players who have voted.

/**
 * MySQL and Vote4Cash Manager
 * @author Cloudnine
 *
 */

public class MysqlManager {

    /** MySQL Connection */
    public static Connection conn = null;
    public static Statement statement = null;
    public static ResultSet results = null;
    public static Statement stmt = null;
    public static ResultSet auth = null;
    public static ResultSet given = null;

    /** MySQL Database Info */
    public static String DB = "vote4gold";
    public static String URL = "localhost";
    public static String USER = "root";
    public static String PASS = "";
    public static String driver = "com.mysql.jdbc.Driver"; //Driver for JBDC(Java and MySQL connector)

    /** Connects to MySQL Database*/
    public synchronized static void createConnection() {
        try {
            Class.forName(driver);
            conn = DriverManager.getConnection(URL + DB, USER, PASS);
            conn.setAutoCommit(false);
            stmt = conn.createStatement();
            Misc.println("Connected to MySQL Database");
        } 
        catch(Exception e) {            
            //e.printStackTrace();
        }
    }

    public synchronized static void destroyConnection() {
        try {
            statement.close();
            conn.close();
        } catch (Exception e) {
            //e.printStackTrace();
        }
    }

    public synchronized static ResultSet query(String s) throws SQLException {
        try {
            if (s.toLowerCase().startsWith("select")) {
                ResultSet rs = statement.executeQuery(s);
                return rs;
            } else {
                statement.executeUpdate(s);
            }
            return null;
        } catch (Exception e) {
            destroyConnection();
            createConnection();
            //e.printStackTrace();
        }
        return null;
    }
} 
```

我的命令片段：

```
if (playerCommand.equals("claimreward")) {
                try {
                    PreparedStatement ps = DriverManager.getConnection().createStatement("SELECT * FROM votes WHERE ip = hello AND given = '1' LIMIT 1");
                    //ps.setString(1, c.playerName);
                    ResultSet results = ps.executeQuery();
                    if(results.next()) {
                        c.sendMessage("You have already been given your voting reward.");
                    } else {
                        ps.close();
                        ps = DriverManager.getConnection().createStatement("SELECT * FROM votes WHERE ip = hello AND given = '0' LIMIT 1");
                        //ps.setString(1, playerCommand.substring(5));
                        results = ps.executeQuery();
                        if(results.next()) {
                            ps.close();
                            ps = DriverManager.getConnection().createStatement("UPDATE votes SET given = '1' WHERE ip = hello");
                            //ps.setString(1, playerCommand.substring(5));
                            ps.executeUpdate();
                            c.getItems().addItem(995, 5000000); 
                            c.sendMessage("Thank you for voting! You've recieved 5m gold!");
                        } else {
                            c.sendMessage("You haven't voted yet. Vote for 5m gold!");
                        }
                    }
                    ps.close();
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
            return; 
```

命令的工作原理：当玩家输入 ::commandname（在本例中为 claimreward）时，将执行命令函数。这不是整个命令类，只是我认为需要发布的部分，以便我的问题足够详细以获得有用的答案。

注意：我有我所有的进口。

注意：Mysql 连接成功。

注意：我需要使上面的命令代码片段能够执行 mysql 查询。

注意：我更喜欢直接从命令执行查询，而不是从 MysqlManager，但我会尽我所能来解决这个问题。

我觉得我已经足够详细且相关地描述了我的问题，但是如果您需要更多信息或对任何事情的理解，请告诉我，我会尝试更具体。

* * *

感谢您花时间检查我的问题。如果您能提供帮助，请提前致谢。-亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:11:28.450

您的方法在许多不同层面上都被误导了，我什至无法开始意识到应该怎么做。

1）永远不要使用`static`类变量，除非你知道你在那里做什么（我敢肯定，你不知道）

2）我认为您创建自己的 jdbc 连接是有原因的（例如，它是您作业的一部分），如果没有，您不应该这样做。我看到您使用`DriverManager`，并且`PreparedStatement`在一方面，您应该继续使用它们。

3）您的方法似乎打算从相对良好的代码库（您的`command`部分）开始，然后在数据库连接（您的`MysqlManager`）上采用非常低级的粗略方法，除非确实有必要并且您知道自己在做什么，您应该继续相同的抽象级别，并以最适合您需求的抽象为目标。（在这种情况下，写`MysqlManager`你写的方式`Command`）

4）在您之前的问题中（您只是假设这里的每个人都已阅读，事实并非如此）您得到了重新设计您的想法的建议，您应该这样做。真的，参加编码原则课程学习反模式，然后从头开始。

总而言之：至少再次编写 MysqlManager，它的致命故障无法修复。对不起。如果您还有其他问题，请给我写一封电子邮件，我会花时间看看如何为您提供帮助。(an@steamnet.de)

# c# - 如何动态填充网格MVC3

> ID：11657985
> 
> 赞同：0
> 
> 时间：2012-07-25T20:21:19.710
> 
> 标签：c#, asp.net-mvc-3, grid

我的视图中有一个网格：

```
<div id="grid">
    @grid.GetHtml(
        mode: WebGridPagerModes.FirstLast | WebGridPagerModes.NextPrevious,
        firstText: "<<",
        previousText: "<",
        nextText: ">",
        lastText: ">>",
        columns: grid.Columns(
           grid.Column("Column1", header: "Column1", format: @<text>@item.Test1</text>),
           grid.Column("Column2", header: "Column2", format: @<text>@item.Test2</text>)
        )
     )
</div> 
```

当我进入我的窗口时，我可以执行一个查询。但是，当我按下按钮时，如何用数据库中的行填充此列？我的网格很简单，我找不到任何简单网格的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:36:36.737

[http://www.elylucas.net/post/Using-a-grid-that-c​​an-sort-page-and-filter-in-AspNet-MVC3e28093Part-1e28093Using-the-WebGrid-WebHelper.aspx](http://www.elylucas.net/post/Using-a-grid-that-can-sort-page-and-filter-in-AspNet-MVC3e28093Part-1e28093Using-the-WebGrid-WebHelper.aspx)

查看本教程。它是相同的主体，除了你不会搜索你只需要点击一个按钮并且视图重新呈现本身。

# php - PHP - 获取并打印电子邮件的年龄（从联系表发送）

> ID：11657987
> 
> 赞同：1
> 
> 时间：2012-07-25T20:21:37.263
> 
> 标签：php, date, time, date-arithmetic

所以我有一个联系表......它发送的邮件如下所示：

```
<h1>MSG from Website</h1>
<p>Some Text</p>

<table width="100%" border="0" cellspacing="1" cellpadding="10">
  <tr bgcolor="#DFEFF0">
    <th>Name</th>
    <td><?=$name;?></td>
  </tr>
  <tr bgcolor="#BDD8DA">
    <th>Email-Adresse</th>
    <td><?=$email;?></td>
  </tr>
  <tr bgcolor="#DFEFF0">
    <th>Telefonnummer</th>
    <td><?=$phone;?></td>
  </tr>
  <tr bgcolor="#BDD8DA">
    <th>telefonisch erreichbar</th>
    <td>von <?=$r_from;?> bis <?=$r_to;?> Uhr</td>
  </tr>
  <tr bgcolor="#DFEFF0">
    <th>Betreff</th>
    <td><?=$subject;?></td>
  </tr>
  <tr bgcolor="#BDD8DA">
    <th>Nachricht</th>
    <td><?=$msg;?></td>
  </tr>
</table> 
```

我要添加到电子邮件内容中的是两个 php 时间对象。应该显示发送邮件的日期和时间。我使用`<?=date("j.n.Y G:i");?>`...第二个时间对象应该显示电子邮件收件人的当前系统时间...我打算用这两个时间对象做一些数学运算:)

但我的问题是我看不到如何显示当前时间......也许这甚至不可能？例如，我可以在 Gmail 中查看电子邮件，并在邮件正文中显示一行 php，显示我当前的时间吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:37:09.647

当您发送 HTML_Mail 时，您可以嵌入`<img>`标签。图像标签调用服务器上的 php 脚本，将时间作为图像传递。但这只会传递发送服务器的时间，您无法对其进行任何计算。如果客户端允许且可用，另一个选项可能是使用 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:24:37.750

电子邮件只是一些静态文本。无论您使用什么代码来生成它，您最终都会得到一条简单的消息，一旦发送它就无法执行任何其他命令或执行任何其他操作。除非用户的邮件客户端有一些特殊功能，否则无法在电子邮件中添加一行来显示用户查看邮件时的当前时间。

要与用户进行进一步的互动，您需要在电子邮件中放置一个链接，将他们引导至您的网站。该链接可能包含消息的 ID，因此您网站上的页面可以在发送时查找并将其与当前时间进行比较。

# web2py - web2py book 指的是什么设计按钮？

> ID：11657990
> 
> 赞同：0
> 
> 时间：2012-07-25T20:21:42.270
> 
> 标签：web2py

[web2py](http://web2py.com/books/default/chapter/29/3)书说

> “要编辑应用程序，请单击新创建的应用程序的设计按钮。”

但我没有看到任何这样的按钮，文档也没有他们正在谈论的内容的屏幕截图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:07:40.983

该指令已过时 - 该按钮现在标记为“编辑”（当您单击并转到“编辑”页面时，您会在 URL 中注意到用于生成页面的函数的名称是“设计”，但页面本身和按钮现在都标有“编辑”）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T20:55:59.860

在看到编辑按钮之前，您需要登录到管理界面。

# file-io - 将时间序列数据集导入 MATLAB（所有值都显示为 NaN）

> ID：11657991
> 
> 赞同：2
> 
> 时间：2012-07-25T20:21:42.230
> 
> 标签：file-io, csv, matlab, nan

我被困在尝试使用 MATLAB 运行经济模型 - 在数据导入部分。对于我的大部分代码，我使用的是一个名为 IRIS 的免费软件工具箱。

我有包含 14 个变量和 160 个数据点的季度数据集。本质上，数据集是一个 15X161 矩阵——包括日期（col1）和变量名（B1:O1）。

用于在 IRIS 上上传数据的命令是

```
d = dbload('filename.csv') 
```

但这不起作用。尽管 MATLAB 正在创建一个名为 d 的 1X1 数组并在其下创建字段（每个变量一个）。所有单元格都显示`NaN`- 不是数字。

为什么会这样？

我查看了 IRIS 工具箱网站上的教程，并尝试使用此命令从那里运行和加载示例数据集，但它导致了同样的问题。我检查的所有地方 - 包括 MATLAB 帮助，这似乎是使用 IRIS 时使用的正确命令，但不知何故它不起作用。

我还尝试使用 MATLAB 函数而不是 IRIS 直接上传数据。我正在使用的命令是：

```
 d = dataset('XLSFile','filename.xls','ReadVarNames', true). 
```

虽然这是可行的，而且我可以看到所有变量名，但 MATLAB 无法读取日期。我也尝试了 xlsread 和 importdata，但它们不读取变量名。我有什么方法可以上传带有变量名称和日期的整个 Excel 表吗？

如果我能让 IRIS 命令工作，那将是最好的，因为我的其余代码将与它兼容。

数据集看起来有点像这样..

```
HO_GDP     HO_CPI  HO_CPI  HO_RS  HO_ER  HO_POIL....
 4/1/1970  82.33    85.01  55.00  99.87  08.77
 7/1/1970  54.22     8.98  25.22  95.11  91.77
10/1/1970  85.41    85.00  85.22  95.34  55.00
 1/1/1971  85.99   899      8.89  85.1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T23:52:30.107

您可以使用[TEXTSCAN](http://www.mathworks.com/help/techdoc/ref/textscan.html)函数在 MATLAB 中读取 CSV 文件：

```
%# some options
numCols = 15;       %# number of columns
opts = {'Delimiter',',', 'MultipleDelimsAsOne',true, 'CollectOutput',true};

%# open file for reading
fid = fopen('filename.csv','rt');

%# read header line
headers = textscan(fid, repmat('%s',1,numCols), 1, opts{:});

%# read rest of data rows
%# 1st column as string, the other 14 as floating point
data = textscan(fid, ['%s' repmat('%f',1,numCols-1)], opts{:});

%# close file
fclose(fid);

%# collect data
headers = headers{1};
data = [datenum(data{1},'mm/dd/yyyy') data{2}]; 
```

您发布的上述示例的结果（假设值以逗号分隔）：

```
>> headers
headers = 
    'HO_GDP'    'HO_CPI'    'HO_CPI'    'HO_RS'    'HO_ER'    'HO_POIL'
>> data
data =
   7.1962e+05        82.33        85.01           55        99.87         8.77
   7.1971e+05        54.22         8.98        25.22        95.11        91.77
    7.198e+05        85.41           85        85.22        95.34           55
   7.1989e+05        85.99          899         8.89         85.1            0 
```

请注意，在代码的最后一行中，我们如何将日期列转换为[序列日期编号](http://www.mathworks.com/help/techdoc/ref/datenum.html)，以便我们可以将整个数据存储在一个数字矩阵中。您始终可以使用 DATESTR 函数返回日期的字符串表示形式：

```
>> datestr(data(:,1))
ans =
01-Apr-1970
01-Jul-1970
01-Oct-1970
01-Jan-1971 
```

# c# - 当我尝试获取文件计数时，DragQueryFile 返回 0？

> ID：11657996
> 
> 赞同：1
> 
> 时间：2012-07-25T20:21:54.547
> 
> 标签：c#, wpf, clipboard

我正在尝试从剪贴板中获取复制文件的列表。我很清楚 WPF 对此有内置方法，但使用 API 对我来说很重要，因为 WPF 的剪贴板实现是错误的，正如 Web 上的许多地方所描述的那样。

到目前为止，我正在使用`GetClipboardData`返回指向内存中所需数据的指针的函数。现在，为了枚举这些数据，我发现我需要`DragQueryFile`在 Windows 中使用 API。

我的`DragQueryFile`API 声明如下。

```
[DllImport("shell32.dll", CharSet = CharSet.Auto)]
private static extern int DragQueryFile(IntPtr hDrop, int iFile, StringBuilder lpszFile, int cch); 
```

我的`GetClipboardData`API 声明如下。

```
[DllImport("user32.dll")]
static extern IntPtr GetClipboardData(uint uFormat); 
```

现在，如果您查看[DragQueryFile API 的文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776408%28v=vs.85%29.aspx)，它会清楚地说明函数中的参数如下：

> iFile：要查询的文件的索引。**如果此参数的值为 0xFFFFFFFF，则 DragQueryFile 返回已删除文件的计数**。如果此参数的值介于零和删除的文件总数之间，则 DragQueryFile 将具有相应值的文件名复制到 lpszFile 参数指向的缓冲区。

我已经使用了这些信息，并编写了这段代码（您可以复制粘贴它，它也应该在您的端运行）。

```
var dummyFiles = new StringCollection();
dummyFiles.Add(Path.GetTempFileName());
dummyFiles.Add(Path.GetTempFileName());

Clipboard.Clear();
Clipboard.SetFileDropList(dummyFiles);

var dataPointer = GetClipboardData(15); //15 is for CF_HDROP datatype - this does in fact return a pointer, so it's working fine
var fileCount = DragQueryFile(dataPointer, -1, null, 0); 
```

在上面的例子`fileCount`中`0`，虽然我只是在剪贴板中添加了 2 个文件，但我可以通过`Clipboard.GetFileDropList`WPF 中的函数来获取它们。我还检查了格式 15 (CF_HDROP) 是否确实在剪贴板中，并且确实如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:27:49.317

我必须调用 OpenClipboard（因此我也调用了 CloseClipboard）才能从 Win7 x64 上的 GetclipboardData 获取返回值。

我添加了

```
[DllImport("user32.dll", SetLastError = true)]
static extern bool OpenClipboard(IntPtr hWndNewOwner);

[DllImport("user32.dll", SetLastError = true)]
static extern bool CloseClipboard(); 
```

并更改了 DragQueryFile 以匹配我在 pinvoke.net 上找到的内容（uint 而不是 int）

```
[DllImport("shell32.dll", CharSet = CharSet.Auto)]
private static extern int DragQueryFile(IntPtr hDrop, uint iFile, StringBuilder lpszFile, int cch); 
```

并使用

```
 var dummyFiles = new StringCollection();
    dummyFiles.Add(Path.GetTempFileName());
    dummyFiles.Add(Path.GetTempFileName());

    Clipboard.Clear();
    Clipboard.SetFileDropList(dummyFiles);   

    OpenClipboard(IntPtr.Zero);

    IntPtr hDrop = GetClipboardData(15);

    var count = DragQueryFile(hDrop, uint.MaxValue, null, 0);

    // etc.

    CloseClipboard(); 
```

为我工作（计数= 2）。