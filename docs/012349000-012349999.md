# StackOverflow 问答 12349000-12349999

# c++ - 我怎样才能以一种好的和简单的方式定义这个值？

> ID：12349001
> 
> 赞同：0
> 
> 时间：2012-09-10T09:39:30.757
> 
> 标签：c++

我被困在函数参数的转换/定义中，非常感谢一些帮助。我相信这对任何有经验的 c/c++ 人来说都是一件容易的事，但对我来说不是，现在不是。

**问题：**

创建正确的参数以使用 with `myCommmand(uint8 *pAddr)`，它将执行`send(pAddr, 6)`，它将使用这些参数循环以下 6 次：

`write(reinterpret_cast<unsigned char*>(pAddr)[i]);`

我的麻烦是，pAddr 必须指向一个 6 个字节的数组，我最好将其定义为无符号字节值 (0-255) 或十六进制 00-FF。

**限制**

功能不得改变。它只是关于创建参数。

**我的尝试：**

```
uint8 Addr[] = {00,22,122,205,16,04};
uint8 *pAddr = &Addr; 
```

但这会导致错误 C2440（无法将 uint(*)[6] 转换为 uint8 *）。

**所需的解决方案**

我想知道一种*好的*、格式良好的方法来创建这个 Addr-array 或流，或传递给我的函数的对象，通过将它们的字节或十六进制值写入我的代码 - 就像我的尝试一样。我可以使用*boost* -libraries。感谢所有帮助我解决这个问题的人！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:42:42.597

你有没有尝试过

```
uint8 Addr[] = {0x0,0x16,0x7a,0xcd,0x10,0x4};
uint8 *pAddr = Addr; 
```

?

*注意：*不要使用`0`前缀！这意味着数字是八进制的，所以`010`是`8`十进制的。

# python - 解析 python/django 代码以使其在 GUI 中可编辑

> ID：12349004
> 
> 赞同：0
> 
> 时间：2012-09-10T09:39:35.120
> 
> 标签：python, regex, django, parsing

我正在开发一个用于创建/编辑 Django 模型的工具，请参阅[https://github.com/timothyclemans/django-admin-models-editor](https://github.com/timothyclemans/django-admin-models-editor)。

解析 Python 代码的推荐方法是什么？我需要做一堆正则表达式并做很多 if thens 吗？

下面的代码获取模型名称和字段名称。

```
code_from_input = request.POST['code'].split('\n')[0]
def_lines = ''
if '    def' in request.POST['code']:
    for i, line in enumerate(request.POST['code'].split('\n')):
        if line.startswith('    def'):
            def_lines = '\n'.join(request.POST['code'].split('\n')[i:])
            break
last_code_from_input = request.POST['last_code'].split('\n')[0]
# check if model name in source changed
model_name_in_last_source = ''
model_name_in_code = ''
if last_code_from_input.startswith('class'):
    m = re.match(r"class (\w+)\(models.Model\):", last_code_from_input)
    try:
        model_name_in_last_source = m.group(1)
    except:
        pass
if code_from_input.startswith('class'):
    m = re.match(r"class (\w+)\(models.Model\):", code_from_input)
    try:
        model_name_in_code = m.group(1)
    except:
        pass
if model_name_in_last_source != model_name_in_code:
    model_name = model_name_in_code
else:
    model_name = request.POST['name'] 
```

![django admin 模型编辑器](../Images/d21d359ba10e65ffd1a51a40b9c5c6cf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:14:36.937

对于非常简单的用例，您可以使用正则表达式。如果您只想在源代码中找到类，您的方法可能没问题。

或者，查看检查模块，但这只能与导入的 python 模块一起使用，而不是源文件。您可以枚举模块中的类，提取方法名称、源代码和文档。这可能是您想要的最佳方法。

[http://docs.python.org/library/inspect.html](http://docs.python.org/library/inspect.html)

如果您真的深入研究源代码，您可能会尝试 ast 模块。它提供了一个解析函数，该函数接受一个 python 源字符串并返回一个抽象语法树。这是最复杂的库，但也是最强大的。

有关详细信息，请参阅：[http ://docs.python.org/library/ast.html。](http://docs.python.org/library/ast.html)

# javascript - 什么是更好的？使用 iframe 或 jquery 之类的东西在外部网站中加载 html 文件

> ID：12349005
> 
> 赞同：1
> 
> 时间：2012-09-10T09:39:35.017
> 
> 标签：javascript, jquery, html, iframe, external

我希望我的客户在我的 Web 应用程序上创建他们自己的 HTML，并将我的代码复制并粘贴到他们的网站上，以在他们想要的页面中以自定义大小和其他选项显示结果。我的 Web 应用程序的输出 HTML 包含 HTML 标记和 JavaScript 代码（例如，是使用 javascript 创建的 Web 图表）。

我为此找到了两种方法。一用`iframe`二用`jquery .load()`。

**什么更好、更安全？还有其他方法吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:18:08.050

`iframe`更好 - 如果您正在运行 Javascript，那么该脚本不应在与用户站点相同的上下文中执行：您在这里要求用户不需要接受的信任级别，并且您的代码都很好沙盒，因此您不必担心父文档的样式和脚本。

作为一名前端 Web 开发人员和网站管理员，我经常自己决定在 iframe 中沙箱第三方代码。以下是我这样做的一些原因：

*   脚本将使用文档的 DOM。一旦第三方小部件自行为 IE 引入有缺陷且性能密集型的 PNG 修复黑客，`img`跨我们网站的标签和 CSS 中使用的每个 PNG 进行修复。
*   许多脚本会覆盖全局`onload`事件，从而剥夺其他脚本的初始化触发器。
*   读取本地会话信息并将其发送回他们自己的存储库。
*   加载任意数量的资源并执行 CPU 密集型进程，中断并降低我网站的核心体验。

以上都是您可能认为自己如上所述的第三方短视或恶意的例子，但重点是，作为您服务的用户之一，我不应该赌博。如果我将您的代码放在 iframe 中，我知道它可以愉快地做自己的事情，而不会惹恼我的网站或其用户。我还可以选择将加载和执行延迟到我选择的时刻（通过在选择的时刻动态加载 iframe）。

为了方便而不是用户来争论这一点：

*   您不必担心与 XSS 相关的任何信任问题。您可以诚实地告诉您的用户，通过运行您的工具，他们不会让自己面临任何不必要的担忧。
*   您不必付出额外的努力来规避 CSS 和 JS 对用户网站的影响。

# ios - OpenCV的IplImage中imageData每个元素的平方

> ID：12349006
> 
> 赞同：0
> 
> 时间：2012-09-10T09:39:50.710
> 
> 标签：ios, matlab, image-processing, opencv, iplimage

我正在使用 OpenCV C API。现在我需要使用 OpenCV 在 C 中实现以下 Matlab 代码。

Matlab代码：

```
function [cx, cy] = foe(Vx, Vy)

ofs = 10;

% get sub image (using offsets at border) --> STEP 1
subVx = Vx(ofs:end-ofs, ofs:end-ofs);
subVy = Vy(ofs:end-ofs, ofs:end-ofs);

% compute vertical and horizontal magnitudes --> STEP 2
subVx = subVx.^2;
subVy = subVy.^2;

% find index of minimum sums for vertical and horizontal magnitudes --> STEP 3
[v, cy] = min(sum(subVx'));
[v, cx] = min(sum(subVy));

% Calculate the Focus Of Expansion --> STEP 4
cy = cy + ofs;
cx = cx + ofs; 
```

第 1 步很容易完成。我只是设置了图像的 ROI。

现在对于第 2 步，我需要对 IplImage 的 imageData 元素的每个元素进行平方，如下所示：

```
for(i = 0; i < subvx->width * subvx->height; i++) {
    ?????
} 
```

我应该写什么来代替？？？？？？平方imageData的每个元素？imageData 是 char*，因此每个元素的最大限制为 255。每个元素的平方很可能会超过此值。

在这种情况下，如何在 C 中实现上述 Matlab 代码？

同样对于第 3 步，如何创建 imageData 的转置（视为 2-dim 矩阵）？

# sql - Oracle SQL 摘要/数据透视表

> ID：12349013
> 
> 赞同：0
> 
> 时间：2012-09-10T09:40:10.993
> 
> 标签：sql, oracle, pivot, case, crosstab

我有一个如下所示的数据集：

```
 ID      Description                     Team
    A       Missing Name; Missing Gender    Team1
    B       Missing Gender                  Team1
    C       Missing Name                    Team2
    D       Missing Name                    Team2 
```

即每个 ID 有一行，带有一个文本列（描述），用于标识 ID 的任何问题，以及 ID 所属团队的名称。我设法将其总结如下：

```
 Team        Missing Gender      Missing Name
    Team1       2                   1
    Team2       0                   2 
```

通过使用如下所示的 case 语句：

```
 SELECT
    "Team",
    sum(case when "DQ Info" like '%Missing Gender%' then 1 ELSE 0 END) as "Missing Gender",
    sum(case when "DQ Info" like '%Missing Name%' then 1 ELSE 0 END) as "Missing Name"
    FROM
    (*)
    GROUP BY "Team" 
```

我希望能够总结这些数据，使其看起来像这样：

```
 Description         Team1       Team2
    Missing Gender      2           0
    Missing Name        1           2 
```

我知道一定有办法做到这一点，但我目前正在苦苦挣扎 - 只需在上述字段中使用“描述”而不是“团队”就会得到如下结果：

```
 Description                     Team1       Team2
    Missing Name; Missing Gender    1           0
    Missing Gender                  1           0
    Missing Name                    0           2 
```

这不是我所追求的。感谢您提供任何帮助，尽管我会继续修补，所以如果我设法弄清楚，我会更新这篇文章。请注意，这只是数据集的一个示例，而不是它实际上是什么。

编辑：根据 bpgergo 的建议在下面查询。完成一些阅读后，看起来下面会短路，即一旦满足内部案例中的第一个条件，就会终止查询，这意味着它永远无法对一列进行多次计数。很遗憾，但我想我必须坚持我原来的查询。

```
 SELECT
    "Description",
    sum(case when "Team" like 'Team1' then 1 ELSE 0 END) as "Team1",
    sum(case when "Team" like 'Team2' then 1 ELSE 0 END) as "Team2"
    FROM(SELECT
    "Team",
    case when "DQ Info" like '%[Check Role]%' then '[Check Role]'
    ELSE case when "DQ Info" like '%[Client deceased]%' then '[Client deceased]'
    ELSE case when "DQ Info" like '%[2 Parents not recorded]%' then '[2 Parents not recorded]'
    ELSE case when "DQ Info" like '%[Religion not recorded]%' then '[Religion not recorded]'
    ELSE case when "DQ Info" like '%[1st Language not recorded]%' then '[1st Language not recorded]'
    ELSE case when "DQ Info" like '%[Ethnicity not recorded]%' then '[Ethnicity not recorded]'
    ELSE case when "DQ Info" like '%[No Current Worker]%' then '[No Current Worker]'
    ELSE case when "DQ Info" like '%[No Current Team]%' then '[No Current Team]'
    ELSE case when "DQ Info" like '%[Update Gender]%' then '[Update Gender]'
    ELSE case when "DQ Info" like '%[No Plan]%' then '[No Plan]'
    ELSE case when "DQ Info" like '%[Update Plan]%' then '[Update Plan]'
    END END END END END END END END END END END
     as "Description"
    FROM(
    *
    FROM
    (*)WORKLOAD)DATA)
    GROUP BY "Description" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:56:45.700

你已经成功了一半。尝试这样的事情作为内部选择

```
select 
case when "Description" like '%Missing Gender%' then "Missing_gender" 
ELSE case when "Description" like '%Missing Name%' then "Missing_name" ELSE null END
END as "Description",
Team
from your_table 
```

整个选择将是这样的

```
SELECT
"Description",
sum(case when "Team" = 'Team1' then 1 ELSE 0 END) as "Team1",
sum(case when "Team" = 'Team2' then 1 ELSE 0 END) as "Team2",
FROM
(
  select 
  case when "Description" like '%Missing Gender%' then "Missing_gender" 
  ELSE case when "Description" like '%Missing Name%' then "Missing_name" ELSE null END
  END as "Description",
  Team
  from your_table
)
GROUP BY "Description" 
```

# wordpress - 如何在 Wordpress 上为每个页面创建类别

> ID：12349014
> 
> 赞同：0
> 
> 时间：2012-09-10T09:40:11.770
> 
> 标签：wordpress

我想使用 Wordpress 创建 2 页 Dogs 和 Cats。在 Dogs 页面上，我想创建类别以显示 Dogs 名称，在 Cats 页面上，我想创建类别以显示 Cats 名称。那么，如何做到这一点。请帮我解决它。

谢谢阮

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:52:16.440

欢迎来到 Stackoverflow。我会让你开始，但有一个合理的金额供你支付。

创建两个帖子类别，一个用于狗，一个用于猫。将您关于狗和猫的帖子添加到每个类别中。

您创建了两个页面，Dogs 和 Cats。

您创建了两个自定义页面模板，一个用于 Dogs，一个用于 Cats，并将它们应用到相关页面；

[http://codex.wordpress.org/Theme_Development#Custom_Page_Templates](http://codex.wordpress.org/Theme_Development#Custom_Page_Templates)

在每个自定义模板中，您都设置了一个自定义循环。因此，在 Dogs 自定义模板中，您的循环将针对所有 Dogs 帖子，而对于 Cats，您将拉入 Cats 帖子。

为此，您`WP_Query`将`cat`参数用作参数。

[http://codex.wordpress.org/Class_Reference/WP_Query#Category_Parameters](http://codex.wordpress.org/Class_Reference/WP_Query#Category_Parameters)

祝你好运！

# android - 在 Android 应用程序中加入两个 SQLite 表

> ID：12349018
> 
> 赞同：0
> 
> 时间：2012-09-10T09:40:19.050
> 
> 标签：android, sqlite, relational-database, inner-join

我需要将两个表连接成一个关系表。我知道我可以通过内部连接来做到这一点，但我不知道如何开始。

```
TABLE_SOCIO
-----------------
-id

-name

-phone

-email

TABLE QUOTA
-----------------
-id

-name

-description

-value 
```

现在我需要通过每个的 id 将这两个加入到唯一的表中。

```
RELATIONAL TABLE
-----------------
-id_Quota

-id_Socio 
```

我有一个 id_Quota 到 n id's_Socio。这是一个关系 1-n。我有一个包含一组 id_Socio 的数组列表，我需要将其保存在只有一个 id_Quota 的关系表中。

有任何想法吗？我如何从内部联接开始？需要外键吗？有什么例子吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:00:00.283

```
SELECT  t1.name, t1\. phone,
        t2.description, t2.value
FROM    TABLE_SOCIO t1
        INNER JOIN RELATIONALTABLE r ON t1.Id = r.id_Socio
        INNER JOIN TABLE_QUOTA t1 ON t2.Id = r.id_Quota 
```

# php - 是否可以在 html 图像中显示一些 php 内容？

> ID：12349020
> 
> 赞同：-1
> 
> 时间：2012-09-10T09:40:22.253
> 
> 标签：php, html, codeigniter, iframe

是否可以在 HTML 图像中显示一些 php 内容（比如显示在 iPhone 是图像的 iPhone 屏幕上）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T09:48:19.693

好吧，如果您只想在图像上叠加文本，那为什么要创建图像。您可以将 css 背景图像（在这种情况下为 iPhone）用于 div，并将您的 phpp 内容插入为该 div 的子项。使用适当的 css 样式和定位，您将获得所需的外观。它比图像创建方式简单且服务器消耗更少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T09:44:27.667

[您可以使用GD 库](http://php.net/manual/en/book.image.php)在服务器上生成自己的图像，将您的内容叠加到图像上，然后将其发送到客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:08:52.257

可以使用 CSS 来达到同样的效果，不需要任何服务器处理；但是，它必须是图像，您可能需要查看允许您使用 PHP [http://php.net/manual/en/book.image.php](http://php.net/manual/en/book.image.php)操作图像的图像处理库。

# c++ - 将 'const char*' 参数发送到接收 'const char* &' 的函数

> ID：12349021
> 
> 赞同：-2
> 
> 时间：2012-09-10T09:40:27.170
> 
> 标签：c++, pointers, pass-by-reference

为什么这不行？

```
void func(const char* &pointer){...}

//in main
const char* mainPointer = "a word";
func(mainPointer); 
```

我的意图是发送一个指向函数的指针，该函数会更改它（指针）但不会更改它指向的字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:15:55.157

以下代码 (MS Visual C++ 2010) 表明它是完全可能的并且有效。输出是：“世界！”

```
#include "stdafx.h"
#include <iostream>
using namespace std;

void func(const char*& ptr) 
{
    ptr += 6;
}

int _tmain(int argc, _TCHAR* argv[])
{
    const char* Ptr = "Hello World!";
    func(Ptr);
    cout << Ptr << endl;
    return 0;
} 
```

请注意，与 Null Voids 代码相比，我们确实在此处修改了 func 中的指针。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:48:57.577

完全没问题。事实上，它就像一个魅力。

```
#include <iostream>
using namespace std ;

void func(const char* &pointer)
{
  cout<<" \n "<<pointer<<"\n";
}

int main()
{
    const char* mainPointer = "a word";
    func(mainPointer);

    cout<<" \nPress any key to continue\n";
    cin.ignore();
    cin.get();

return 0;
} 
```

程序输出：

```
 a word

Press any key to continue 
```

编译输出：

```
Compiling...
this.cpp
Linking...

this.exe - 0 error(s), 0 warning(s) 
```

# ios - 从相机获取 yuv 平面格式图像 - iOS

> ID：12349025
> 
> 赞同：2
> 
> 时间：2012-09-10T09:40:45.753
> 
> 标签：ios, camera, format

我正在使用 AVFoundation 使用 captureStillImageAsynchronouslyFromConnection 从相机捕获静止图像（捕获静止图像而不是视频帧）。这给了我一个 CMSSampleBuffer 类型的缓冲区，我称之为 imageDataSampleBuffer。

据我了解，这个缓冲区可以包含与媒体相关的任何类型的数据，而数据类型是在我配置输出设置时确定的。

对于输出设置，我制作了一个字典，其值为：AVVideoCodecJPEG，键为：AVVideoCOdecKey。

没有其他编解码器选项。但是当我阅读 AVFoundation Programming Guide>Media Capture 时，我可以看到 420f、420v、BGRA、jpeg 是 iPhone 3gs 支持的可用编码格式（我正在使用）

我想将 yuv420（即 420v）格式的图像数据放入 imageSampleBuffer。那可能吗？

如果我打印 availableImageDataCodecTypes，我只会得到 JPEG 如果我打印 availableImageDataCVPixelFormatTypes，我会得到三个数字 875704422、875704438、1111970369。

这三个数字是否可能映射到 420f、420v、BGRA？

如果是，我应该在输出设置中修改哪个键？我尝试将值：[NSNumber numberWithInt:875704438] 用于键：(id)kCVPixelBufferPixelFormatTypeKey。它会起作用吗？

如果是，我如何从 imageSampleBuffer 中提取这些数据？

另外， UIImage 以哪种格式存储？可以是任何格式吗？只是 NSData 带有一些额外的信息，使其被解释为图像吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:18:47.310

我一直在尝试使用这种方法：

[来自“645 PRO”等相机的原始图像数据](https://stackoverflow.com/questions/11612647/raw-image-data-from-camera-like-645-pro/11615472#11615472)

我正在使用 writeToFile 保存数据，并且我一直在尝试使用 irfan 视图打开它。

但是我无法验证保存的文件是否为 yuv 格式，不是因为 irfan 视图给出了无法读取标题的错误。

# php - 获取一个数组值到一个变量中

> ID：12349028
> 
> 赞同：0
> 
> 时间：2012-09-10T09:40:50.830
> 
> 标签：php, arrays, variables

我有一个数组，我想将值 233 放入我可以使用的变量中。

print_r($myVar) 返回：

```
Array(
  [folders] => Array(
    [0] => Array(
      [project] => 233
    )
  )
) 1 
```

如何将值 233 放入变量中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:42:31.617

如果它在一个数组中，你可以像这样使用它：

```
echo $myVar['folders'][0]['project']; 
```

如果要将其复制到另一个变量中，则非常相似：

```
$var = $myVar['folders'][0]['project']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:42:44.597

`$var = $arrayname["folders"][0]["project"];`

应该将数字 233 存储在`$var`可验证中。

*   只要确保更改`arrayname`为数组名称即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:03:09.337

试试喜欢

```
$value = $my_array["folders"][0]["project"] 
```

你可以 echo this('$value') 得到 "233"

# sql - 使用 SQL 函数将 SQL Server 存储过程转换为 LINQ

> ID：12349031
> 
> 赞同：0
> 
> 时间：2012-09-10T09:40:59.793
> 
> 标签：sql, linq

不久前，我在创建数据透视表方面寻求帮助。你们帮我解决了问题，我现在有一个存储过程，可以创建我的数据透视表并将结果存储在一个新表中。这些列是动态的，因此对于应用程序中的每个事务来说总是不同的。

我遇到的问题是我的应用程序是 MVC 并使用实体框架。因为数据库是建模的，所以我无法动态创建具有动态列名的表。在使用中，EF 永远不会知道它们的存在，我的观点也不会。

看起来我需要将存储过程转换为 LINQ 语句，然后我可以从模型端进行处理。

我的存储过程包含 SQL Server`STUFF`函数，我不知道如何在 LINQ 语句中调用此函数。

带有 SQL STUFF 功能的 SQL 示例：

```
DECLARE @cols AS VARCHAR(MAX), 
@query  AS VARCHAR(MAX); 

SELECT  @cols = STUFF(( SELECT DISTINCT TOP 100 PERCENT 
                            '],[' + convert(varchar(10), t2.date, 101) 
                    FROM    test AS t2 
                    ORDER BY '],[' + convert(varchar(10), t2.date, 101) 
                    FOR XML PATH('') 
                  ), 1, 2, '') + ']' 

set @query = 'select name, ' + @cols + ' 
        from  
        ( 
            select name, date, cast(yesno as tinyint) as yesno 
            from test 
        ) x 
        pivot 
        ( 
            max(yesno) 
            for date in (' + @cols + ') 
        ) p' 

execute(@query) 
```

MSDN有这个方法：

```
[EdmFunctionAttribute("SqlServer", "STUFF")]
public static string Stuff(
    string stringInput,
    Nullable<int> start,
    Nullable<int> length,
    string stringReplacement
) 
```

...但我不知道我将它放在哪里以及如何在 LINQ 中使用它。

希望这是有道理的，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:02:36.327

您可以通过 ADO 调用存储过程，或者使用`ExecuteStoreQuery<DbDataRecord>`

# android - 升级 Eclipse Android 插件后“无法实例化活动”/“ClassNotFound 异常”

> ID：12349032
> 
> 赞同：2
> 
> 时间：2012-09-10T09:41:00.847
> 
> 标签：android

我最近买了一台新电脑，所以我一直在尝试转移我所有的开发工作。我安装了 Eclipse，然后安装了 Android 插件。它告诉我我需要升级我的 SDK。好的，我这样做了。

但是，一旦我移动了所有代码、正确导入等，当我尝试运行应用程序时，我的 LogCat 中会出现以下崩溃：

```
09-10 10:27:42.260: E/AndroidRuntime(17444): FATAL EXCEPTION: main
09-10 10:27:42.260: E/AndroidRuntime(17444): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.bearwaves.uplift/com.bearwaves.uplift.MainActivity}: java.lang.ClassNotFoundException: com.bearwaves.uplift.MainActivity
09-10 10:27:42.260: E/AndroidRuntime(17444):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1993)
09-10 10:27:42.260: E/AndroidRuntime(17444):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2104)
09-10 10:27:42.260: E/AndroidRuntime(17444):    at android.app.ActivityThread.access$600(ActivityThread.java:132)
09-10 10:27:42.260: E/AndroidRuntime(17444):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1157)
09-10 10:27:42.260: E/AndroidRuntime(17444):    at android.os.Handler.dispatchMessage(Handler.java:99)
09-10 10:27:42.260: E/AndroidRuntime(17444):    at android.os.Looper.loop(Looper.java:137)
09-10 10:27:42.260: E/AndroidRuntime(17444):    at android.app.ActivityThread.main(ActivityThread.java:4575)
09-10 10:27:42.260: E/AndroidRuntime(17444):    at java.lang.reflect.Method.invokeNative(Native Method)
09-10 10:27:42.260: E/AndroidRuntime(17444):    at java.lang.reflect.Method.invoke(Method.java:511)
09-10 10:27:42.260: E/AndroidRuntime(17444):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
09-10 10:27:42.260: E/AndroidRuntime(17444):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
09-10 10:27:42.260: E/AndroidRuntime(17444):    at dalvik.system.NativeStart.main(Native Method)
09-10 10:27:42.260: E/AndroidRuntime(17444): Caused by: java.lang.ClassNotFoundException: com.bearwaves.uplift.MainActivity
09-10 10:27:42.260: E/AndroidRuntime(17444):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
09-10 10:27:42.260: E/AndroidRuntime(17444):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
09-10 10:27:42.260: E/AndroidRuntime(17444):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
09-10 10:27:42.260: E/AndroidRuntime(17444):    at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
09-10 10:27:42.260: E/AndroidRuntime(17444):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1984)
09-10 10:27:42.260: E/AndroidRuntime(17444):    ... 11 more 
```

这很奇怪，因为我的代码根本没有改变。我尝试将所有内容转移到一个新项目 - 两次 - 结果相同。当使用默认的“Hello World”活动时，清单适用于我的代码，但不适用于新代码 - 我也怀疑这不是与 SD 卡相关的问题，因为这也发生在模拟器上。

我很困惑什么可能会改变到我的代码不再起作用的地步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:52:56.730

如果您的 Java 构建路径中有任何外部库，则必须将它们包含在 libs 文件夹中。

# java - Java 反射和 RMI

> ID：12349033
> 
> 赞同：0
> 
> 时间：2012-09-10T09:41:04.870
> 
> 标签：java, reflection, rmi

在我的应用程序中，使用了以下代码。有人可以对突出显示的代码进行详细解释吗？

我知道在第一个突出显示的块中，java反射用于调用方法handle_validation..但需要详细解释。

然后在第二个突出显示的块中抛出 RemoteException ..

我的确切问题是为什么他们使用反射来调用 EngineHandlerIF，然后为什么他们在这个 EngineHandlerIF 中使用 RMI 来调用 EngineHandler 中的方法定义？

```
private static EngineHandlerIF init() {
        ApplicationContext ctx = new ClassPathXmlApplicationContext(new String[] { "validation.xml" });
        String[] beans = ctx.getBeanDefinitionNames();
        for (String string : beans) {
            logger.info(string);
        }
        EngineHandlerIF engine = (EngineHandlerIF) ctx.getBean("engine");
        return engine;
    }

private Object callEngineMethod(MiddlewareMessage mmsg) {
        Object resultObj;
        try {
            **String methodName = "handle_validation";
            Method method = EngineHandlerIF.class.getDeclaredMethod(methodName, MiddlewareMessage.class);
            method.setAccessible(true);
            resultObj = method.invoke(engine, new Object[] { mmsg });**
        } catch (Exception e) {
            logger.error("sendMessage Exception: ", e);
            return new Boolean(false);
        }
        return resultObj;
    }

EngineHandlerIF:
----------------
**public abstract String handle_validation(MiddlewareMessage mmsg) throws RemoteException;**

EngineHandler:
--------------
public String handle_validation(MiddlewareMessage mmsg) throws Exception {
//some code
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:44:01.957

> 我知道在第一个突出显示的块中，java反射用于调用方法handle_validation..但需要详细解释。

差不多就是这样。唯一的另一位是

```
 method.setAccessible(true); 
```

这使得调用者可以访问该方法（例如从私有到公共），从而允许您调用它。但是，上述方法似乎已经公开。也许这是重构后的一些遗产？

请注意，这不是*RMI*（远程方法调用），而是*反射*。我在这里看到的唯一 RMI 是`handle_validation()`可能抛出`RemoteException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:47:19.630

也许有人刚刚发现了反思的锤子，所以一切，包括已经公开的方法，都开始看起来像个疯子。

这是垃圾：扔掉。直接调用方法即可。

# php - 按降序对二维数组进行排序，保留原始索引

> ID：12349035
> 
> 赞同：0
> 
> 时间：2012-09-10T09:41:08.397
> 
> 标签：php, arrays, sorting

我需要按降序对二维数组进行排序，以保持原始索引：

```
$arr = array();

for ($i=0; $i<5; $i++) {
    $arr[] = array(rand(0,5), rand(10,100));
} 
```

结果必须是这样的：

```
[0] => array(5, 100)
[1] => array(5, 90)
[2] => array(5, 35)
[3] => array(4, 10)
[4] => array(3, 15) 
```

因此，首先，该数组根据第 1 列进行排序，其次根据第 2 列进行排序。

`arsort`如果我理解正确，该函数适用于向量。

我该如何解决这个任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:43:07.403

见[http://docs.php.net/uasort](http://docs.php.net/uasort)

例如

```
<?php
$arr = array(
    'A'=>array(5, 100),
    'B'=>array(4, 10),
    'C'=>array(5, 35),
    'D'=>array(3, 15),
    'E'=>array(5, 90)
);

uasort($arr, function($a, $b) {
    if ( $a[0] < $b[0] ) return 1;
    else if ( $a[0] > $b[0] ) return -1;
    else if ( $a[1] < $b[1] ) return 1;
    else if ( $a[1] > $b[1] ) return -1;
    else return 0;
});

foreach($arr as $k=>$v) {
    echo $k,'=', join(', ', $v), "\n";
} 
```

印刷

```
A=5, 100
E=5, 90
C=5, 35
B=4, 10
D=3, 15 
```

# magento - Magento 获得价格特色产品

> ID：12349041
> 
> 赞同：0
> 
> 时间：2012-09-10T09:41:39.137
> 
> 标签：magento, magento-1.7, featured

我在 pHtml 中有一个特色产品选择，而不是在 Magento 中创建一个属性集，我所做的只是调用一个特定的类别（然后在主页上使用 XML 添加到前端）。它似乎工作得很好，这很好。但是，当我尝试报出价格时，我什么也没得到，我知道我做的不对，但我只是不确定是什么？这是我的代码：

```
 <?php

$categoryid = 13;

$category = new Mage_Catalog_Model_Category();
$category->load($categoryid);
$collection = $category->getProductCollection();
$collection->addAttributeToSelect('*'); 

?>
<div class="featured-products group">

    <h1 class="featured-header">Featured Products</h1>

    <div >
        <ul class="group multiple"  id="featured-set-home">
 <?php foreach ($collection as $_product) { ?>

            <li>
                <a href="<?php echo $_product->getProductUrl() ?>"><img src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(138); ?>" width="138" height="138" alt="" /></a>             
                <a href="<?php echo $_product->getProductUrl(); ?>"><?php echo $this->getTierPriceHtml(); ?></a> 
                <a href="<?php echo $_product->getProductUrl(); ?>" class="button right" ><span><span>View Item</span></span></a>
            </li>

<?php } ?>
        </ul>
    </div>
</div> 
```

它并不过分复杂。如果有人可以提供帮助，那就太棒了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:24:55.987

```
<?php echo $this->getTierPriceHtml(); ?> 
```

将获得价格块（它必须添加到您创建的自定义页面的 XML 布局中）

如果您只需要显示价格，我会选择：

```
$this->helper('core')->currency(Mage::helper('tax')->getPrice($_product, $_product->getFinalPrice()), true, false)); ?> 
```

# mysql - 当结构不同且数据不同时，将数据作为来自 3 个不同表的不同行加入

> ID：12349048
> 
> 赞同：-3
> 
> 时间：2012-09-10T09:42:00.180
> 
> 标签：mysql, sql

我是新来的`sql`，并且被赋予了加入 3 张桌子的任务。有人可以对此有所了解`sql`。

我有 3 个表，如表 1

```
userID | username | password
 1        user1      user1
 2        user2      user2 
```

表 2

```
userID | order number | order quantity
2           101             100 
```

表3

```
userID | name | address
1        John    xxx
2        Will    xxx
3        Peter   xxx 
```

并且结果表需要显示为：

```
UserID | username | name | address | order number | order quantity        
1         user1     John    xxxxx      0               0
2         user2     Will    xxxxx      101           100
3         user3     Peter   xxxxx      0               0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:45:22.393

您应该在某些列上使用`LEFT JOIN`with ，`COALESCE`

```
SELECT  a.`userid`,
        a.`username`,
        c.`name`,
        c.`address`,
        COALESCE(b.`order number`, 0) `order Number`,
        COALESCE(b.`order quantity`, 0) `order quantity`
FROM    table1 a
        LEFT JOIN table2 b
            on a.userid = b.userid
        LEFT JOIN table3 c
            on a.userid = c.userid 
```

基本上，`LEFT JOIN`所做的是从左表中检索所有行，无论它是否与第二个表匹配。`COALESCE`处理`null`应该是什么样的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:48:13.953

这将有助于

```
select 
    a.userID, 
    c.name, 
    c.address, 
    b.order_number, 
    b.order_quantity 
from 
    table1 a 
        join table3 c 
            on a.userID=c.userID 
        join table2 b 
            on a.userID=c.userID 
```

但是，您可能需要拿起一本 SQL 书籍，因为这是一件非常简单的事情。

# wpf - 使用 ValidatesOnExceptions 在 WPF 中进行数据验证

> ID：12349050
> 
> 赞同：3
> 
> 时间：2012-09-10T09:42:04.830
> 
> 标签：wpf, exception, data-binding, exception-handling, validation

我想使用 WPF 在 WPF 中运行一个基本的数据验证示例`ValidatesOnException`，但它根本不起作用，一旦我的`viewmodel`throws `ValidationException`，我的程序崩溃说，**ValidationException is unhandled by user code**。

我的视图模型是

```
public class MainViewModel : INotifyPropertyChanged
{
    //INotifyPropertyChaned implementation
    //////////////////////////////////////
    private string stringValue;

    public string StringValue
    {
        get { return stringValue; }
        set
        {
            if (value.Length > 6)
            {
                //The below line throws unhandled exception error??
                throw new ValidationException(String.Format("Value's length is greater than {0}.", value.Length));
            }
            stringValue = value;
            this.OnPropertyChanged("StringValue");
        }
    }
} 
```

**我的 XAML 是**

```
<StackPanel x:Name="LayoutRoot" Background="White">
<TextBox x:Name="radMaskedTextInput1" 
                                Width="200"
                                Margin="10"
                                Text="{Binding Path=StringValue, Mode=TwoWay, NotifyOnValidationError=True, ValidatesOnExceptions=True, UpdateSourceTrigger=PropertyChanged}" />
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T15:57:31.613

我运行了您的代码，当在调试器下执行时，是的，VS 调试器在 throw 处停止，因为没有处理该异常的 catch 语句。

但是在没有调试的情况下启动时，应用程序不会崩溃 - 编辑框边框变为红色。

如果您想摆脱异常，您可以更改 ViewModel 以实现 IDataErrorInfo 接口而不是抛出异常。

如果异常干扰了您的调试，例如，您可以开始抛出从 ArgumentException 或 ValidationException 派生的自定义异常，并将 VS 配置为在抛出此自定义异常且用户未处理时不中断

# jquery - jQuery UI：在放置时，将 div 附加到其可放置目标

> ID：12349053
> 
> 赞同：2
> 
> 时间：2012-09-10T09:42:23.380
> 
> 标签：jquery, jquery-ui, draggable, droppable

我是 jQuery 和 jQuery UI 的新手。我正在尝试将 div 从父 div 移动到另一个。到目前为止，我的“文章”是可拖动的。“可放置”库存在文章上方移动时正确识别它，但我似乎无法找到如何将这篇文章附加到库存。

我想我正在操作一个“封装在 jQuery 对象中的 div”，但我在这里有点迷失了。

```
<div id="shelf" class="shelf">
    <div class="article">article</div>
</div>

<div id="stock" class="stock">
</div> 
```

然后我有一个脚本，旨在将文章添加到 stock div，并将其从货架 div 中删除：

```
<script>

    $('.article').draggable();

    var stockArea = $('#stock').droppable();

    stockArea.bind( "drop", function(event, ui) {

        if ($(this).find(".article")){
            console.log('appending ' + ui);
            $(this).append(ui);
        }
    });
</script> 
```

我做错了吗？谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T09:47:38.833

ui 本身包含事件参数。您需要做的是执行您想要的操作：

```
<script>

    $('.article').draggable();

    var stockArea = $('#stock').droppable({
        drop: function (event, ui) {
            var target = $(event.target);
            $(ui.draggable).appendTo(target).remove();
        }
    });
</script> 
```

**更新** [ui.draggable](http://docs.jquery.com/UI/Droppable)是对特定元素的引用。

# ruby - Ruby 中有没有类似于 Pascal 记录的数据结构？

> ID：12349054
> 
> 赞同：2
> 
> 时间：2012-09-10T09:42:24.437
> 
> 标签：ruby, xml, class, record, pascal

Ruby 中有没有类似于 Pascal 记录的数据结构？

我想定义一个记录类型，它有大约 15-20 个字段，它们都是字符串。

我试图为此目的定义一个类，但我意识到我必须定义 getter 和 setter 方法：

```
class Data
   def description
        @description
   end

   def size
        @size
   end

   def address
        @address
   end

   .
   .  all other (about 15 variables...)
   . 

   def description=( value )
        @description = value
   end

   def size=(value)
        @size=value
   end

   def address=(value)
        @address=value
   end
  .
  . more setter method (about 15 times...)
  .

end 
```

以这种方式定义所有 15-20 个字段和 getter/setter 非常烦人。有没有更短的方法来做到这一点？例如：

```
class Data
 desc, size, address=""
end 
```

或类似的东西，然后我将能够创建 Data 类的新实例：

```
d=Data.new 
```

然后设置实例变量：

```
d.desc="bla"
d.size="50.66"
d.address="Bla street 20." 
```

我已经有一个方法，可以使用 XMLSimple gem 解析 XML 文件，我想从解析的数据创建一个记录（或类）并使用“return”关键字将其返回。然后我想简单地访问记录的字段：d.size、d.address、d.description 等等。例如：

```
def data_import(fname="1.xml")
  data = XmlSimple.xml_in(fname,{'SuppressEmpty' => ""})
  d=Data.new()
  d.desc=data['desc'][0]
  d.size=data['size'][0]
  d.address=data['address'][0]
  d. ... =
  d. ... =  (about 15-20 times)
  d. ... =
  return d
end 
```

我的 XML (1.xml)：

```
<entity>
 <desc>bla</desc>
 <size>50.66</size>
 <address>Bla street 20.</address>
 .
 . (15-20 more fields)
 .
</entity> 
```

在 Pascal 语言中（据我所知，在 C++ 中）有一个称为“记录”的数据结构用于此目的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:53:47.900

是的，有，它使用 C/C++ 名称而不是*record* : `Struct`。`Struct`是一个类工厂，如果你调用`Struct.new`，它将返回一个具有所需字段的类：

```
Data = Struct.new(:description, :size, :address, …) 
```

如果需要修改行为，可以将块传递给`Struct.new`：

```
Data = Struct.new(:description, :size, :address, …) do
  def my_custom_method; end
end 
```

或使用继承：

```
class Data < Struct.new(:description, :size, :address, …)
  def my_custom_method; end
end 
```

然后：

```
d = Data.new

d.description = …
d.size = …
d.address = … 
```

或者：

```
d = Data.new(…, …, …) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:55:18.917

您可以使用[Hash](http://www.ruby-doc.org/core-1.9.3/Hash.html)作为属性/属性的存储桶，或者您可以利用 Ruby 的元编程能力使用如下[访问](http://www.rubyist.net/~slagell/ruby/accessors.html)器生成 getter 和 setter ：

```
attr_accessor :desc, :size, :address 
```

您还可以收集数组中的属性，并使用像这样的 splatting 在前面提到的方法所需的列表中扩展数组：

```
attributes = [:desc, :size, :address]
attr_accessor *attributes 
```

# android - 应用程序版本变更规则

> ID：12349060
> 
> 赞同：2
> 
> 时间：2012-09-10T09:42:42.673
> 
> 标签：android

我的 android 应用程序已上传到 google play，现在我想更新我的应用程序，但我对`android:versionCode`and感到困惑`android:versionName`。

我想更改版本，但怎么做？更改应用程序版本的规则是什么？

我是第一次提供更新，这是我的代码：

```
android:versionCode="2"
android:versionName="2.0" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:48:32.017

来自文档：http: [//developer.android.com/tools/publishing/versioning.html](http://developer.android.com/tools/publishing/versioning.html)

> android:versionCode — 一个整数值，表示应用程序代码相对于其他版本的版本。

所以在你的情况下，这需要是`3`，因为这需要是一个**整数值****相*对于你以前的版本。当系统检查更新时，它应该知道您当前的版本高于之前的版本。

> android:versionName — 一个字符串值，代表应用程序代码的发布版本，应该向用户显示。

同样，从文档中，这仅用于用户显示，实际上可以是任何东西。除了向用户显示它之外，系统也不会使用它。您可以在此处放置您自己的任何内部/自定义版本。

例如，如果您正在做 beta 版本，您的 versionCodes 可能是`1,2,3...`，但您的 versionNames 可能是`0.1,0.2,0.3..`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:45:42.020

**versionCodes**和**versionNames**是两个不同的东西。应用商店使用版本代码来跟踪更新，而版本名称是更常见的标识符，如 1.0.0 等。版本代码仅限于整数，而版本名称可以是字母数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T09:48:25.370

**版本代码**

`versionCode`是用于轻松区分应用程序版本的整数值。

应用程序开发人员在 Android Market 中发布应用程序更新时必须增加此值，以便确定用户是否使用旧版本的应用程序，并提供更新。

**版本名称**

这`versionName`是一个字符串，其中包含在其他桌面应用程序中看到的常规“发布版本”，例如“1.4.5”或“3.7”。

versionName 只是一个“人类可读”的版本代码。

有关对应用程序进行版本控制的更多信息，[请查看此](http://developer.android.com/tools/publishing/versioning.html)

# php - 转义函数擦除文本字段/区域中的所有数据

> ID：12349062
> 
> 赞同：0
> 
> 时间：2012-09-10T09:42:44.543
> 
> 标签：php, sql-server, escaping

由于 MSSQL 查询中的错误原因，我试图将 ' 替换为 '。我知道这可能会更安全，我只是在学习，他们会变得更安全。

所以我使用了str_replace。并做到了这一点。

```
$dbTABLE = "Table_Name";
$query_sql = sprintf("UPDATE %s SET PageHTML = ('%s') WHERE PageID = '%d'",
$dbTABLE,
str_replace("'","''",$PageHTML),
$PageID); 
```

工作正常，但为了一致性和易用性，我想编写一个可以包含在所有页面中的函数。函数如下所示：

```
 function SQLencode($svalue) {

str_replace("'","''",$svalue);

} 
```

并像这样实现：

```
SQLencode($PageHTML), 
```

但是，这只会擦除查询中的所有数据，我不明白为什么。之后我所有的数据都是空白的。谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:46:30.363

您需要`return`从函数中获取值`SQLencode(..)`。

```
function SQLencode($svalue) {
    return str_replace("'","''",$svalue);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:49:55.943

与其尝试自己进行转义（sprintf 是一个糟糕的选择），不如使用[mssql_bind](http://www.php.net/manual/en/function.mssql-bind.php)函数将参数绑定到查询。

# .net - 起订量：如何在生成的代理中设置构造函数的行为？

> ID：12349069
> 
> 赞同：1
> 
> 时间：2012-09-10T09:43:06.937
> 
> 标签：.net, unit-testing, mocking, moq

我有一个抽象类（我们称之为`AbstractOutputter`）。当我从它派生时，我在派生类的构造函数中调用一个受保护的方法。

**抽象输出**

```
public abstract class IOutputter<T>
{
  protected void Write(Func<T, string> output)
  {
   ... 
  }
} 
```

**派生类**

```
public class WotsitOutputter: AbstractOutputter<Wotsit>
{
  public WotsitOutputter()
  {
    Write(x => x.Property1.ToString());
    Write(x => x.Property2.ToString());
  }
} 
```

该模式与在 FluentValidation 中创建验证器类相同：

[http://fluentvalidation.codeplex.com/](http://fluentvalidation.codeplex.com/)

我希望 Moq 为我创建一个派生自 . 的类`AbstractOutputter`，以便对它如何响应对 . 的各种调用排列进行单元测试`Write()`。我需要执行以下操作：

```
Mock<AbstractOutputter<Wotsit>> mockOutputter = new Mock<AbstractOutputter<Wotsit>>();
// Instruct Moq to make various calls to protected method in constructor of mock class 
```

是否有可能做到这一点？我可以以某种方式告诉 Moq 在它创建的代理的构造函数中执行某些操作吗？`AbstractOutputter`或者我是否需要为单元测试定义真正的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T14:13:10.220

我要搁置这一点：我得出结论，Moq 无法做到这一点。

最后我只是`AbstractOutputter<Wotsit>`为了测试的目的定义了一些简单的实现。

# android - 如何获取清单中定义的活动描述

> ID：12349083
> 
> 赞同：1
> 
> 时间：2012-09-10T09:43:53.503
> 
> 标签：android, android-activity

我为具有属性“android：description”的活动定义了描述如何以编程方式获取它？

我试过这段代码：

```
PackageManager pm = getPackageManager();

Intent mainIntent = new Intent(Intent.ACTION_MAIN);
mainIntent.addCategory(CATEGORY);

List<ResolveInfo> list = pm.queryIntentActivities(mainIntent, 0);
for (int i = 0; i < len; i++) {
        ResolveInfo info = list.get(i);

        String desc = "";
        try {
            desc = res.getString(info.activityInfo.descriptionRes);
        } catch(NotFoundException e) {
            desc = info.activityInfo.name;
        }
} 
```

此代码引发 NotFoundException。

我在调试模式下观察了这个值，参数“descriptionRes”确实有一个 int 值。

如何获得描述？非常感谢，如果有任何帮助。

# java - Android应用程序的Python AppEngine编码？

> ID：12349086
> 
> 赞同：0
> 
> 时间：2012-09-10T09:44:04.297
> 
> 标签：java, android, python, google-app-engine

我是一个新手**Android Developer**，我的应用程序要求它与服务器交互。

我遇到了**Google AppEngine**，发现它是这个应用程序的一个不错的选择。

如果我用 Java 编写我的 Android 应用程序，并用**Python**为 Google AppEngine 进行服务器编码，我的 Android 应用程序是否能够与服务器通信？

我的意思是这个 Java（客户端）+ Python（服务器）组合会很好用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:58:30.417

与服务器的通信可以完全独立于服务器和客户端使用的语言。

通常，Web 应用程序使用诸如**REST**之类的原则进行通信。这就是为什么您的浏览器使用 HTML 和 JavaScript 运行，而您的服务器可以使用任何东西，包括 python。

这实际上取决于您需要服务器为您的应用程序做什么。

# php - 选择查询的准备语句

> ID：12349098
> 
> 赞同：2
> 
> 时间：2012-09-10T09:44:36.857
> 
> 标签：php, mysql, prepared-statement

我想知道是否应该将准备好的语句用于简单的选择查询？

如：

```
`SELECT * FROM `table_name` 
```

有了这个，这样做不是更好吗：

```
$db->query('SELECT * FROM `table_name`'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:47:02.237

*如果*查询只运行一次（每个脚本）*并且*其中确实没有变量，那么无论您使用准备好的语句还是一次性查询，它确实没有太大的区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T09:50:09.970

@deceze 是对的。但是如果你想使用准备好的语句，请使用这样的东西，

```
<?php
$stmt = $dbh->prepare("SELECT * FROM REGISTRY where name = ?");
if ($stmt->execute(array($_GET['name'])))       // <== passed array of parameters
{
  while ($row = $stmt->fetch()) 
  {
    print_r($row);
  }
}
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:48:52.870

就我而言，这不是必须的，但是为了代码的完整性，您最好这样做。这个简单的选择查询（没有分配）将无法攻击。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T09:53:38.000

1.  如果您的 table_name 是一个变量而不是硬编码项，那么您就是在保护自己免受 SQL 注入。
2.  准备好的语句将准备（即计划）和执行分开。
3.  如果您将一遍又一遍地运行相同的查询，那么您正在提高性能，因为您只计划查询一次。

对于这样的事情，使用准备好的语句而不是直接查询的性能损失实际上是不存在的，因为您以任何一种方式打开连接，并且执行的额外调用是通过同一个连接进行的。

如果您打算仅从表中选择某些字段，则使用 * 进行选择可能会影响性能。

# python - Python 2.7，操作系统检测返回值

> ID：12349100
> 
> 赞同：2
> 
> 时间：2012-09-10T09:44:50.877
> 
> 标签：python, operating-system, cross-platform, python-2.7, detection

我正在研究跨平台实用程序，该实用程序涉及驱动器扫描和为其运行的操作系统自动创建 shell/批处理文件。不幸的是，我找不到一个简单的答案。如这些链接中所述：

1.  [何时使用 os.name、sys.platform 或 platform.system？](https://stackoverflow.com/questions/4553129/when-to-use-os-name-sys-platform-or-platform-system)
2.  [在 Python 中可靠地检测 Windows](https://stackoverflow.com/questions/1387222/reliably-detect-windows-in-python)
3.  [从路径中提取文件名，无论 os/path 格式如何](https://stackoverflow.com/questions/8384737/python-extract-file-name-from-path-no-matter-what-the-os-path-format)
4.  [Python：我在什么操作系统上运行？](https://stackoverflow.com/questions/1854/python-what-os-am-i-running-on)
5.  并在[http://docs.python.org/library/platform.html#module-platform](http://docs.python.org/library/platform.html#module-platform)

各种platform.system()、platform.platform()、sys.platform、os.name()等都面临着未来未必完美的问题。也就是说，如果操作系统开发人员稍作改动，这些可能不起作用（至少在修补或修改之前）。因此，显然最好的解决方案是尝试上述每个方法的一小部分，以及使用 call() 来定位一些特定于操作系统的可执行文件。

这留下了我的问题：由于确定这一点的最佳方法涉及 platform.system、sys.platform 和 os.name（假设只需要广义识别），这些程序的各种可能输出是什么？这些模块中的每一个的 docs.python.org 部分仅列出了一些，并且这些页面并不完全是最新的。具体来说，我想知道最后三个 Mac OS、Win XP-Win 8 上的可能输出，并且只知道 Linux 满足了我的需求。任何人都知道输出是什么或我在哪里可以找到它们？

提前致谢。

澄清：我在这里寻找的是当前已知的值，以便我可以将它们合并到现有项目中，着眼于将来的代码修订使我更容易。所以当前返回值是我正在寻找的（最后 3 代 Mac OS* 和 Win * 因为除此之外可能不再使用太多）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:14:34.057

编辑：对于**所有可能的返回值**的具体问题：

*   来自 sys.platform 的可能值的相关[stackoverflow 答案？](https://stackoverflow.com/a/446215/1431750)
*   **[发布](http://mail.python.org/pipermail/python-list/2006-August/405455.html)**上面指出的答案：

    > ```
    > aix3 aix4 atheos beos5 darwin freebsd2 freebsd3 freebsd4 freebsd5
    > freebsd6 freebsd7 generic irix5 irix6 linux2 mac netbsd1 next3 os2emx
    > riscos sunos5 unixware7 
    > ```

*   还：

    ```
    linux3, freebsd8, win32, dos, os2 
    ```

    和别的。

*   （他们[在 2006 年 8 月问了同样的问题](http://mail.python.org/pipermail/python-list/2006-August/377705.html)。）

笔记：

> 正如其他人所指出的，sys.platform 源自系统供应商为其系统提供的名称。

/编辑。

* * *

不确定是否有可能拥有如此*完美*的未来。如果您只想了解操作系统（mac/win/linux），请查看[sys.platform](http://docs.python.org/library/sys.html#sys.platform)的示例。

`get_os_name`此外，如果您在未来看到很多变化，将事物保存在一个单独的函数中，例如让您控制或映射输入输出 - 每个操作系统每年一次？与您提到的其他功能结合起来也很方便。因此，您可以根据`(os_name, 32/64bit, variant)`（其中变体是 XP、Win8、Darwin 等）返回一个元组，具体取决于它如何影响您的脚本。

> 这些模块中的每一个的 docs.python.org 部分仅列出了一些，并且这些页面并不完全是最新的。

不幸的是真的。但同样，不可能考虑未来的环境或平台，甚至*所有当前*的环境或平台。合乎逻辑的做法是确保它适用于您测试/开发的当前平台。

# yii - Yii 国际化(i18n)

> ID：12349103
> 
> 赞同：0
> 
> 时间：2012-09-10T09:44:58.850
> 
> 标签：yii

```
Yii internationalization(i18n)
protected/config/main.php
'language' => 'en_us',
protected/views/site/index.php

<?php
echo Yii::t('test','user'); 
```

翻译文件应该在那里创建？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:47:33.790

来自 Yii 网站（[http://www.yiiframework.com/doc/guide/1.1/en/topics.i18n#locale-and-language](http://www.yiiframework.com/doc/guide/1.1/en/topics.i18n#locale-and-language)）

信息：Yii 带有几乎所有语言和地区的语言环境数据。数据来自通用区域设置数据存储库 (CLDR)。对于每个语言环境，仅提供 CLDR 数据的子集，因为原始数据包含许多很少使用的信息。用户还可以提供自己定制的区域设置数据。为此，请使用包含自定义语言环境数据的目录配置 CApplication::localeDataPath 属性。请参考 framework/i18n/data 下的语言环境数据文件以创建自定义语言环境数据文件。

# c++ - 调用成员方法时this指针丢失

> ID：12349106
> 
> 赞同：-1
> 
> 时间：2012-09-10T09:45:10.487
> 
> 标签：c++, g++, x86-64

在 Fedora 17 x86_64 机器上使用 64 位 g++ 4.7.0 编译我的程序时遇到了一个奇怪的问题（相同的程序在 32 位 Fedora 上运行良好）。

该程序太复杂了，我想不出一个简单的方法来生成一个小代码示例。但是从下面的gdb记录中，可以看出问题所在。

```
Program received signal SIGSEGV, Segmentation fault.
0x000000000042a4b0 in boost::shared_ptr<cppPNML::details::ddObj>::operator!(this=0x100000007)
    at /usr/include/boost/smart_ptr/detail/operator_bool.hpp:55
55          return px == 0;
Missing separate debuginfos, use: debuginfo-install gnome-keyring-3.4.1-3.fc17.x86_64
(gdb) bt
#0  0x000000000042a4b0 in boost::shared_ptr<cppPNML::details::ddObj>::operator! (this=0x100000007)
    at /usr/include/boost/smart_ptr/detail/operator_bool.hpp:55
#1  0x00000000004202a5 in cppPNML::pnNode::getBBox (this=0xffffffff) at cpp_pnml.cpp:131
#2  0x000000000040eca4 in draw_page (g=..., painter=...) at pnml2pdf.cpp:178
#3  0x000000000040e3b9 in main (argc=2, argv=0x7fffffffe188) at pnml2pdf.cpp:106
(gdb) up
#1  0x00000000004202a5 in cppPNML::pnNode::getBBox (this=0xffffffff) at cpp_pnml.cpp:131
131   if(!p_) return pair<double, double>(0,0);
(gdb) up
#2  0x000000000040eca4 in draw_page (g=..., painter=...) at pnml2pdf.cpp:178
178     boost::tie(w, h) = node.getBBox();
(gdb) p node
$1 = {<cppPNML::pnObj> = {_vptr.pnObj = 0x79a490, p_ = {px = 0x7c40a0, pn = {pi_ = 0x7c4170}}}, <No data fields>}
(gdb) l
173   QRectF bound(0,0,0,0);
174   
175   // nodes
176   for(pnNode node = g.front<pnNode>(); node.valid(); node = node.next()) {
177     double h, w, x, y, wa, ha, xa, ya, angle;
178     boost::tie(w, h) = node.getBBox();
179     angle = atan2(h, w);
180     boost::tie(x, y) = node.getPosition();
181     wa = 0; ha = 0; xa = 0; ya = 0;
182     
(gdb) 
```

正在调试的程序是一个图形打印程序（pnml2pdf），它使用QT4将图形绘制成pdf。对象节点属于pnNode类，由我自己的图形数据结构库定义（相当复杂，[https://github.com/wsong83/cppPNML](https://github.com/wsong83/cppPNML)）。它显示了一个 SEG 错误，其中智能指针未初始化。通过回溯可以看出node.getBBox()的this指针是无效的。但是，从上一层打印节点显示该节点实际上是可以的。

我在这里完全糊涂了。

有人有任何线索或需要更多代码段吗？提前致谢！

更新：感谢@atzz 的建议，我现在确定成员方法 getBBox() 中此指针的计算产生了错误的地址。该问题不是由任何源代码错误引起的（直接链接目标文件会消除段错误），而是由 64 位静态库生成命令“ar”引起的（因为 pnNode 的定义是在静态库中定义的，而不是目标文件）。现在看来静态库是错误的，导致这个计算错误。

仍在挖掘...如果有人仍然有兴趣知道，将更新结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:32:37.420

1.  这是优化构建还是调试构建？在我看来，它应该在第 176 行而不是第 178 行失败。

2.  你确定循环是对的吗？看起来你要结束了。我怀疑您的实现`node.valid()`要么没有做正确的事情，要么是循环测试的错误事情。

该值`0xffffffff`看起来像一个`std::iterator` `end()`值，所以我认为您需要针对该值测试您的循环，或者确保`pnObj::valid() const { return p_ != NULL && p_ != 0xffffffff; }`

此外，您实施的方式`next()`看起来是错误的。创建一个迭代器，搜索字符串 ID，然后调用`next()`迭代器？

# python - 我可以在 Python RegEx 中混合字符类吗？

> ID：12349118
> 
> 赞同：7
> 
> 时间：2012-09-10T09:45:59.657
> 
> 标签：python, regex

Python RegEx 中的特殊序列（字符类）是类似于`\w`或`\d`匹配一组字符的转义。

就我而言，我需要能够匹配除数字之外的所有字母数字字符。

也就是说，`\w`减号`\d`。

我需要使用特殊序列`\w`，因为我正在处理**非 ASCII**字符并且需要匹配“Æ”和“Ø”等符号。

有人会认为我可以使用这个表达式：`[\w^\d]`但它似乎不匹配任何东西，我不知道为什么。

简而言之，如何在 Python 正则表达式中混合（加/减）特殊序列？

* * *

**编辑**：我不小心使用`[\W^\d]`了`[\w^\d]`. 后者确实匹配某些东西，包括就我而言不是字母数字字符的括号和逗号。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-10T10:11:45.030

您可以使用`r"[^\W\d]"`，即。反转非字母数字和数字的并集。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-10T09:48:43.467

你不能减去字符类，不。

您最好的选择是使用新[`regex`模块](http://pypi.python.org/pypi/regex)，设置为替换 python 中的当前`re`模块。它支持基于 Unicode 属性的字符类：

```
\p{IsAlphabetic} 
```

这将匹配 Unicode 规范声明为字母字符的任何字符。

更好的是，`regex` *确实*支持字符类减法；它将此类类视为集合，并允许您与`--`运算符创建差异：

```
[\w--\d] 
```

匹配中的所有内容，`\w`除了也匹配的任何内容`\d`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T10:08:28.070

您可以使用否定的前瞻断言排除类，例如`r'(?!\d)[\w]'`匹配单词字符，不包括数字。例如：

```
>>> re.search(r'(?!\d)[\w]', '12bac')
<_sre.SRE_Match object at 0xb7779218>
>>> _.group(0)
'b' 
```

要排除多个组，您可以`[...]`在前瞻断言中使用常用语法，例如`r'(?![0-5])[\w]'`匹配除数字 0-5 之外的任何字母数字字符。

与 一样`[...]`，上述构造匹配单个字符。要匹配多个字符，请添加重复运算符：

```
>>> re.search(r'((?!\d)[\w])+', '12bac15')
<_sre.SRE_Match object at 0x7f44cd2588a0>
>>> _.group(0)
'bac' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T10:06:01.100

我不认为你可以在一个正则表达式中直接组合（布尔和）字符集，无论一个是否被否定。否则，您可以简单地将 and 结合`[^\d]`起来`\w`。

注意：`^`必须在集合的开头，并且适用于整个集合。来自文档：“如果集合的第一个字符是'^'，那么所有不在集合中的字符都将被匹配。”。您的集合`[\w^\d]`尝试匹配一个字母数字字符，后跟一个插入符号，然后是一个数字。我可以想象那也不匹配任何东西。

我会分两步完成，有效地结合正则表达式。首先通过非数字匹配（内部正则表达式），然后通过字母数字字符匹配：

```
re.search('\w+', re.search('([^\d]+)', s).group(0)).group(0) 
```

或此主题的变体。

请注意，这需要用一个`try: except:`块包围它，因为如果两个正则表达式之一失败，它会抛出一个`AttributeError: 'NoneType' object has no attribute 'group'`。但是，您当然可以将这条单行拆分为几行。

# r - 使用 R 求解二次规划

> ID：12349122
> 
> 赞同：7
> 
> 时间：2012-09-09T22:48:17.090
> 
> 标签：r, machine-learning

我想使用 kernlab 的 ipop 函数求解以下二次规划方程：

```
min 0.5*x'*H*x + f'*x  
subject to:  A*x <= b   
Aeq*x = beq  
LB <= x <= UB 
```

在我们的示例 H 3x3 矩阵中，f 是 3x1，A 是 2x3，b 是 2x1，LB 和 UB 都是 3x1。

**编辑 1** 我的 R 代码是：

```
library(kernlab)
H <- rbind(c(1,0,0),c(0,1,0),c(0,0,1))
f = rbind(0,0,0)
A = rbind(c(1,1,1), c(-1,-1,-1))
b = rbind(4.26, -1.73)
LB = rbind(0,0,0)
UB = rbind(100,100,100)
> ipop(f,H,A,b,LB,UB,0)
Error in crossprod(r, q) : non-conformable arguments 
```

我从matlab知道是这样的：

```
H = eye(3);
f = [0,0,0];
nsamples=3;
eps = (sqrt(nsamples)-1)/sqrt(nsamples);
A=ones(1,nsamples);
A(2,:)=-ones(1,nsamples);
b=[nsamples*(eps+1); nsamples*(eps-1)];

Aeq = [];
beq = [];
LB = zeros(nsamples,1);
UB = ones(nsamples,1).*1000;

[beta,FVAL,EXITFLAG] = quadprog(H,f,A,b,Aeq,beq,LB,UB); 
```

答案是 3x1 的向量等于 [0.57,0.57,0.57]；

但是，当我在 R 上尝试使用 kernlab 库 ipop(f,H,A,b,LB,UB,0)) 中的 ipop 函数时，我*在 crossprod(r, q) 中遇到错误：不符合要求的参数*

我感谢任何评论

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T14:38:39.980

原始问题询问错误消息*Error in crossprod(r, q) : non-conformable arguments*。答案是`r`必须指定与 相同的尺寸`b`。所以如果`b`是 2x1 那么`r`也必须是 2x1。

第二个问题（来自评论）询问为什么原始问题中提出的系统在 Matlab 中有效，但在 R 中无效。答案是 R 和 Matlab 以不同的方式指定问题。Matlab 允许不等式约束与等式约束分开输入。然而，在 R 中，约束必须全部采用这种形式`b<=Ax<=b+r`（至少在`kernlab`函数内`ipop`）。那么我们如何模仿原始的不等式约束呢？简单的方法是制作`b`非常负数并制作`r'=-b+r`，`r'`你的新`r`向量在哪里。现在我们仍然有相同的约束上限，因为`r'+b=-b+r+b=r`. 但是，我们也对约束设置了下限。我的建议是尝试用几个不同的值来解决系统`b`看看解决方案是否一致。

编辑：

这可能是处理解决程序的更好方法：

```
library(quadprog);  
dvec <- -f;  
Dmat <- H;  
Amat <- -t(A);  
bvec <- -rbind(4.26,-1.73);  
solve.QP(Dmat, dvec, Amat, bvec) 
```

其中这些定义取决于先前定义的 R 代码。

# php - Doctrine - ORM - 使用 entityManager 和关联获取所有数据

> ID：12349123
> 
> 赞同：3
> 
> 时间：2012-09-10T09:46:12.547
> 
> 标签：php, doctrine-orm

我有两个实体 user1 和技能，其中一个用户将拥有许多技能。

```
/** @Entity **/
class user1 {
    /** @Id @Column(type="integer") @GeneratedValue **/
    public $id;
    /** @Column(type="string") **/
    public $name;
    /**
     * 
     * @OneToMany(targetEntity="skills", mappedBy="uid")
     */
    public $skillset;
}

/** @Entity **/
class skills {        
    /** @Id @Column(type="integer") @GeneratedValue **/
    public $id;
    /** @Column(type="string") **/
    public $skill;
    /**
     * @ManyToOne(targetEntity="user1", inversedBy="skillset")
     **/
    public $uid;
} 
```

但我想使用 entityManager 和 getrepository 来获取所有记录

```
$usr= $entityManager->getRepository("user1")->findAll(); 
```

但它只给了我表'user1'中的数据。而且我无法从与特定用户关联的“技能”中获取数据。

“uid”是“user1”表中“id”的“技能”表中的外键。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:21:59.607

我想你可能更喜欢`ManyToMany`关系，因为很多用户会有很多技能。

那么您不必将字段称为 ID - ORM 的目的是隐藏对象关系下的关系结构：您的`$uid`字段应该被称为`$user`.

这样说，你的语法是正确的 - 你确定你的数据库模式与实体同步吗？你有正确的数据吗？如果你`var_dump`是单个用户，你会得到什么？

# persistence - JDO：如何使分离的对象瞬态？

> ID：12349124
> 
> 赞同：2
> 
> 时间：2012-09-10T09:46:25.687
> 
> 标签：persistence, jdo, datanucleus, transient

我正在使用 DataNucleus 2 JDO 实现。我有一个必须附加的分离对象，但我不想附加所有字段（在本例中为集合）

```
public class Obj {
    private String key;
    private Collection<String> col;
} 
```

有没有理由不能这样做：

```
tx.begin();
obj.makeTransientAll(obj.getCol()); // Do not persist
pm.makePersistent(obj);
tx.commit(); 
```

或从数据库刷新：

```
tx.begin();
obj.refreshAll(obj.getCol()); // Discard any changes
pm.makePersistent(obj);
tx.commit(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-22T23:45:03.387

我想您应该在刷新对象或使其瞬态**之后**应用您的更改。或者另一方面，做一些我真正想做的事情来了解更多的`JDO`工作原理，但我没有太多时间去调查。为什么不在最初查找对象后，不分离它，而是将其保持在附加状态并在查找方法之外进行修改，然后在另一个方法中使其持久化？

这里让我感到困惑的是，在查找方法中，您不会关闭您`PersistenceManager`的方法，而在后一种方法中保存您的对象，您将使用另一个`PersistenceManager`应该触发异常的方法，因为您正在使用不同的对象管理`PersistenceManager`对象比第一个查找它的那个。

我仍在学习`JDO`，`Datanucleus`所以请期待我的建议可能不起作用。非常感谢您与我的建议分享您的经验。

# javascript - Nodejs - 从对象创建可读流

> ID：12349128
> 
> 赞同：0
> 
> 时间：2012-09-10T09:46:32.123
> 
> 标签：javascript, object, stream

如何从 javascript / nodejs 中的内存对象创建可读流？

我正在使用 2 个库 - pdfkit 和 ftp。PDFKit 生成一个 PDF 对象，我想将其从节点应用程序上传到远程 FTP 服务器。

[https://github.com/mscdex/node-ftp](https://github.com/mscdex/node-ftp)

*   put(<ReadableStream>inStream, <string>filename, <function>callback) - 成功 - 向服务器发送文件。

有很多关于如何从文件创建可读流的资源，但是是否可以在不使用 fs 的情况下从内存对象创建可读流，或者我是否必须使用发射器创建自己的包装器？我不确定如何解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T07:04:51.373

mscdex 更新了 ftp 客户端，因此它也可以接受缓冲区而不是流。

```
connection.put(new Buffer(object, 'binary'), fName, function(){}) 
```

# android - NumberFormatException 在设备中但不在模拟器中

> ID：12349129
> 
> 赞同：1
> 
> 时间：2012-09-10T09:46:36.497
> 
> 标签：android, android-emulator, numberformatexception

我在模拟器中运行我的应用程序，一切正常，但是当我在我的设备（华为 u8650）中运行它时，我得到 NumberFormatException：

```
GraphViewData[] aux2 = new GraphViewData[aux.length];
     for(int i=0;i<aux.length;i++)
     {
         System.out.println("reps "+Repetitions+", dato "+i+" = "+aux[i]);
         if(aux[i] != null)
         {
             try{
         aux2[i]= new GraphViewData(i, Double.parseDouble(aux[i]));
             }catch(Exception w)
         {
                 Toast.makeText(this, "num: "+aux[i], Toast.LENGTH_LONG).show();
                 Toast.makeText(this, w.getMessage(), Toast.LENGTH_LONG).show();
         }
         }
} 
```

例外是： aux2[i]= new GraphViewData(i, Double.parseDouble(aux[i])); 好的，您会认为 aux[i] 解析为 double 的格式不正确，但都是这样的数字：70.5 或类似 84 所以我不知道为什么它只在真实设备中而不是在模拟器中给出该异常.

有什么建议么？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:49:23.823

I 是由不同的语言环境引起的，它指定了与您使用的不同的小数分隔符（通常它期望`,`并且您使用`.`）。只需`,`用`.`之前的电话替换任何，`parseDouble()`你会没事的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:05:08.737

好的，答案是使用以下代码：

```
public double stringToDouble(String s) {

       NumberFormat nf = NumberFormat.getInstance(Locale.getDefault());
    nf.setGroupingUsed(false);
    ParsePosition parsePosition = new ParsePosition(0);
    Number n = nf.parse(s, parsePosition);
    if (n == null || parsePosition.getErrorIndex() >= 0 || parsePosition.getIndex() < s.length())
    {
      /* not a valid number */
    }
    return n.doubleValue();
} 
```

这对我有用

# c# - 打开 Excel 时出现第二个 Excel 插件（功能区）安装，为什么？

> ID：12349132
> 
> 赞同：1
> 
> 时间：2012-09-10T09:46:57.053
> 
> 标签：c#, excel, vsto, ms-office, ribbon

我制作了一个 Excel 插件（功能区）。

当我运行 .vsto 并安装它时，我在 Windows 的程序下安装了一个。

但是，当我打开我的 Excel 程序时，程序列表中会出现另一个安装。

为什么会这样，它不应该是这样的吗？

更新：我注意到`Application`我已经设置`Target framework: ".NET Framework 4 Client Profile"` 并在`Publish - Prerequisites`其中添加了 Microsoft .NET Framework 4 客户端配置文件（x86 和 x64），这与它有什么关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:15:25.987

因为可能在配置中您已将应用程序设置为自动更新。
所以在 Excel 启动后，它会尝试自动更新。

是否可以？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T14:52:23.503

当您在*开发*计算机上安装 VSTO 时，可能会发生这种情况。这是因为在调试 VSTO 时，它会被安装，尽管它不会显示在“程序和功能”列表中。即使在调试停止后，VSTO 仍将保持安装状态。即使执行正确的安装，已调试的 VSTO 的残余仍将保留在注册表中。

我发现解决此问题的最佳方法（尽管并不理想）是在执行正确安装*之前手动删除此位置的注册表项：*

`HKEY_CURRENT_USER\Software\Microsoft\Office\Word\Addins\[YOUR VSTO PROJECT NAME]`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-12T13:22:14.793

在开发机器中的 Excel 应用程序中找到相同加载项的两个实例是很常见的。因为您必须在发布或构建安装项目之前在 IDE 中构建该插件代码。每当 Excel 启动时，它都会自动检测计算机上存在的加载项清单。由于您还安装了插件，您的计算机现在有两个位置可以找到您的插件，一个在项目文件夹中，另一个在您安装插件的位置。 **所以excel会自己添加两个加载项，因为它找到了两个加载项，**就这么简单。

它与您的发布先决条件和目标框架无关。

您可以简单地转到**窗口中的文件->选项->加载项->此处，您会找到一个带有****“管理”**标签的下拉菜单，在该下拉菜单中选择**COM 加载项**，然后单击“开始**”**。

现在在打开的窗口中，您会发现其中列出了两个插件，您可以删除不想在 Excel 应用程序上看到的插件。

但是，无论如何，下次您构建 Excel 加载项并启动 Excel 时，它会再次将该加载项自动添加到您的 Excel 应用程序中。

因此，在您想要测试安装程序或类似的东西之前，最好不要在您的机器上安装您制作的插件。

# java - 使用 Java 和 JSP 流式传输音频 (mp3) 块以通过 servletOutputStream 进行实时播放

> ID：12349134
> 
> 赞同：2
> 
> 时间：2012-09-10T09:47:03.470
> 
> 标签：java, jsp, audio-streaming, outputstream, buffering

我正在尝试播放音频并使其保持连续且没有跳过或空白点。我必须首先以块的形式接收字节并将其转换为 mp3 以由 servletOutputStream 流式传输。我只有在消费者收集到足够的字节后才开始播放，以尝试保持恒定的音频流。如您所见，我已经对这个缓冲区进行了硬编码，但希望它适用于任何大小的音频字节。我想知道是否有人遇到过类似的问题并有任何建议？

提前致谢。任何帮助将不胜感激。

```
public class Consumer extends Thread {

    private MonitorClass consBuf;
    private InputStream mp3InputStream = null;
    private OutputStream OutputStream = null;

    public Consumer (MonitorClass buf, OutputStream servlet) 
        {
        consBuf = buf;
        OutputStream = servlet;
        }

    public void run() 
    {
        byte[] data;
        byte[] tempbuf;
        int byteSize = 60720; //This should be dynamic
        int byteIncrement = byteSize;
        int dataPlayed = 0;
        int start = 0;
        int buffer = 0;
        boolean delay = true;

        AudioFormat generatedTTSAudioFormat = getGeneratedAudioFormat();

        try
        {       
            while(true) 
            {
                try 
                {
                    data = consBuf.get(); //gets data from producer using a shared monitor class

                    if(data.length >= byteSize) //Buffer size hit, start playing
                    {
                        if(delay) //help with buffering
                        {
                            System.out.println("Pre-delay...");
                            consBuf.preDelay();
                            delay = false;
                        }

                        tempbuf = new byte[byteIncrement];

                        arraySwap(data, tempbuf, start, byteSize);

                        System.out.println("Section to play: " + start + ", " + byteSize);

                        mp3InputStream = FishUtils.convertToMP3( new ByteArrayInputStream(tempbuf), generatedTTSAudioFormat);

                        copyStream(mp3InputStream, OutputStream);

                        System.out.println("Data played: " + byteSize);
                        System.out.println("Data collected: " + consBuf.getDownloadedBytes() );
                        dataPlayed = byteSize;
                        start = byteSize;
                        byteSize += byteIncrement;
                    }

                    if( consBuf.getIsComplete() )
                    {
                        if (consBuf.checkAllPlayed(dataPlayed) > 0)
                        {
                            System.out.println("Producer finished, play remaining section...");

                            //mp3InputStream = convertToMP3(new ByteArrayInputStream(tempbuf), generatedTTSAudioFormat);

                            //copyStream(mp3InputStream, OutputStream);
                        }

                        System.out.println("Complete!");
                        break;  

                    }

                }  
                catch (Exception e) 
                {
                    System.out.println(e);
                    return;
                }
            }
        }
        finally
        {
            if (null != mp3InputStream)
            {
                try
                {
                    mp3InputStream.skip(Long.MAX_VALUE);
                }
                catch (Exception e)
                {}
            }

            closeStream(mp3InputStream);
            closeStream(OutputStream);
        }
    }
} 
```

# javascript - 使用 AJAX 将日期从 SQL 服务器传递到 jQuery 日历

> ID：12349135
> 
> 赞同：1
> 
> 时间：2012-09-10T09:47:05.897
> 
> 标签：javascript, jquery, ajax

我正在关注如下所示的 jQuery 日历示例，并尝试从我的 SQL 数据库加载日期而不是示例硬编码值，不确定什么是最好的方法，但我正在使用 Ajax 发布到我的 Web 方法并获取数据。数据库中的数据将被加载到数据表中，但问题是我不确定我的 SQL 中的数据应该以什么格式存储，这样当我检索它并将其返回给我的 Ajax 调用时，它可以替换“new Date( y, m, 2)”。

请协助。谢谢。

```
<script type='text/javascript'>

    $(document).ready(function () {

        var date = new Date();
        var d = date.getDate();
        var m = date.getMonth();
        var y = date.getFullYear();

        var sDate;
        $.ajax({
            type: "POST",
            url: "/WebServices/Services.asmx/GetString",
            contentType: "application/json; charset=utf-8",
            async: false,
            dataType: "json",
            success: function (result) { sDate = result.d; }
        });
        alert(sDate);

        $('#calendar').fullCalendar({
            header: {
                left: 'prev,next today',
                center: 'title',
                right: 'month,basicWeek,basicDay'
            },
            editable: true,
            events: [
                {
                    title: 'Click for Google',
                    start: new Date(y, m, 2), // Hardcoded date
                    url: 'http://google.com/'
                }
            ]
        });
    });

</script>

      [WebMethod]
        public string GetString()
        { // Dump data from SQL database into DataTable
            DataTable table = new DataTable();
            table.Columns.Add("Date", typeof(DateTime));
            table.Rows.Add(DateTime.Now);
            return table;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:58:31.770

[Date()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)构造函数可以采用许多不同的参数。毫秒相当稳定，但如果您的数据库存储 Unix 时间戳，请记住在调用 Date 构造函数之前将其转换为毫秒（将其乘以 1000）。

旁注：您的代码将无法按预期工作，因为`sDate`在 ajax 回调完成之前不可用。您需要执行以下操作：

```
$.ajax({
    type: "POST",
    url: "/WebServices/Services.asmx/GetString",
    contentType: "application/json; charset=utf-8",
    async: false,
    dataType: "json",
    success: onSuccess
});

function onSuccess(result) {
    $('#calendar').fullCalendar({
        header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,basicWeek,basicDay'
        },
        editable: true,
        events: [
            {
                title: 'Click for Google',
                start: new Date( result.d*1000 ), // assuming UNIX time
                url: 'http://google.com/'
            }
        ]
    });
} 
```

# wordpress - WordPress - 删除页面标题？

> ID：12349138
> 
> 赞同：1
> 
> 时间：2012-09-10T09:47:13.187
> 
> 标签：wordpress

我为 WordPress 3.4.1 创建了一个自己的模板，并遇到了 WordPress 自动（？？？）为我创建的每个页面生成标题的问题，但我不希望页面标题作为标题。

我的模板基于 Magento 电子商务的“现代主题”。适应 WordPress 后，它由页脚、页眉和 index.php 以及一个没有页面标题属性的 style.css 组成。- 亲切的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:49:10.710

`<?php get_title() ?>`从 page.php 和 single.php 中删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:53:36.800

既然是显示问题，就应该添加`display:none;`到对应的css类或者id中，不需要去掉`the_title`or `get_title`。

# objective-c - Adwhirl 广告未收到问题

> ID：12349141
> 
> 赞同：0
> 
> 时间：2012-09-10T09:47:28.703
> 
> 标签：objective-c, ios, adwhirl

在我的应用程序中，我集成了 Adwhirl。我已经在 iAd、Admob 和 Google AdSense 等另外 3 个网络中注册。它工作正常。但在某些情况下

```
-(void)adWhirlDidFailToReceiveAd:(AdWhirlView *)adWhirlView usingBackup:(BOOL)yesOrNo
{
    NSLog(@"Ad Not received");
    CGRect tempFrame = adView.frame;
    tempFrame.origin.y = -adView.frame.size.height;
    adView.frame = tempFrame;
} 
```

是执行。某些广告未正确接收我需要知道显示广告的 URL 或网络名称。是否可以？如果是，请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:06:11.833

这可能不是技术问题，这听起来像是广告库存不足的问题。不幸的是，您不会 100% 在您的应用程序中收到广告。如果您检查`yesOrNo`布尔值，您可以判断 AdWhirl 是否在后台请求另一个广告。

# php - 如何在 PHP 中解析 HTML 非类项？

> ID：12349143
> 
> 赞同：-1
> 
> 时间：2012-09-10T09:47:30.193
> 
> 标签：php, html, parsing

```
 <div id="dump-list">    
<div class="dump-row"> 
 <div class="dump-location odd" data-jmapping="{id: 35, point: {lng: -73.00898601, lat: 41.71727402}, category: 'office'}">

    <div class="SingleLinkNoTx">
    <a href="#10" class="loc-link">Acme Software</a><br/><strong>John Doe, MBA</strong><br/>123 Main St.<br />New York, NY 10036<br /><strong class="telephone">(212) 555-1234</strong><br/>
    </div><!-- END.SingleLinkNoTx -->

    <a href="http://www.example.com" target="_blank" class="web_link">Visit Website</a><span><br />(0.3 miles)</span>   
    <div class="loc-info">
             <div class="loc-info-text ">
        John Doe, MBA<br /><a href="http://maps.google.com/?daddr=41.71727402,-73.00898601" target="_blank">Get Directions &raquo;</a>    
         </div>

    </div>

</div> 
```

上面的 HTML 是如何在 PHP 中解析出来的，以便使用 xpath 可以将公司名称、人名（John Doe，MBA）、地址、城市、州邮政编码等非类字段分离到自己的变量中？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:03:51.553

包括以下内容：

```
$xpath->evaluate('//a[@class="loc-link"]//text()'); 
```

`$xpath`[是包含所有 dom 信息的 xpath 对象，您可以在此处](http://php.net/manual/en/class.domxpath.php)阅读有关它的更多信息。评估函数返回所请求表达式的内容。

该表达式`//a[@class="loc-link"]//text()`告诉 xpath 查找任何`a`将 class 属性设置为的锚点，`loc-link`然后在锚点中查找任何（嵌套的）文本节点。

# c# - 在 Metro 应用程序 C# 中重新加载页面

> ID：12349148
> 
> 赞同：21
> 
> 时间：2012-09-10T09:47:45.587
> 
> 标签：c#, xaml, windows-8, windows-runtime

我正在使用 Windows 8 RTM 和 C#(VS 2012 RTM) 开发 Metro 应用程序，我被页面重新加载所困扰，谁能解释我如何重新加载页面而不再次导航到同一页面。 **简介：**我正在开发具有多语言支持的 Metro 应用程序。当用户选择语言时，我将通过以下代码覆盖主要语言

```
Windows.Globalization.ApplicationLanguages.PrimaryLanguageOverride = "de"; 
```

并使用此代码重新加载页面

```
this.Frame.Navigate(this.GetType()); 
```

语言更改为“de”，但是当我在页面上按“返回”时，它导航到同一页面而不是导航到上一页。我错过了什么，有人可以解释一下如何做到这一点。提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T21:16:25.980

这将刷新您的页面：

```
var _Frame = Window.Current.Content as Frame;
_Frame.Navigate(_Frame.Content.GetType());
_Frame.GoBack(); // remove from BackStack 
```

*   处理 OnNavigatingFrom() 可以保存页面的数据和状态。
*   处理 OnNavigatingTo() 您可以加载页面的数据和状态。

需要注意的是，我的示例不考虑页面参数，您可能需要。另外，另一个警告，我的示例会重新加载您的页面两次。但是 GoBack() 是从 BackStack 中删除新条目所必需的。与 WP 不同，Frame 没有 Refresh()。此外，BackStack 没有 Remove()。

**更新**

我不再使用上述方法。我用这个：

```
public bool Reload() { return Reload(null); }
private bool Reload(object param)
{
    Type type = this.Frame.CurrentSourcePageType;
    if (this.Frame.BackStack.Any())
    {
        type = this.Frame.BackStack.Last().SourcePageType;
        param = this.Frame.BackStack.Last().Parameter;
    }
    try { return this.Frame.Navigate(type, param); }
    finally { this.Frame.BackStack.Remove(this.Frame.BackStack.Last()); }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:01:02.717

我不确定我是否完全理解您要执行的操作，因此这可能是错误的。

通过在刷新页面时调用该行代码，您正在创建当前类型的全新对象并导航到它，因此这不会保存用户在当前页面上所做的更改。

您是否使用任何类型的设计模式？对于这样的事情，我使用 MVVM（使用 MVVM 灯光库），它实现了一个非常酷的导航服务，可以控制这样的事情。

# excel - grep 信息并保存为 Excel 可读的文件？

> ID：12349149
> 
> 赞同：4
> 
> 时间：2012-09-10T09:47:47.523
> 
> 标签：excel, csv, awk, grep

我有以下文件

```
There is a group of Lion in the forest. There are 3 active. There are 1 sleeping

  Lion1 is talking to Lion2
  Lion2 is talking to Lion3
  Lion3 is touching Lion1

There is a group of Turtle in the forest. There are 1 active. There are 0 sleeping

There is a group of Monkey in the forest. There are 4 active. There are 0 sleeping

  Monkey1 is talking to Monkey3
  Monkey4 is jumping about

There is a group of Panda in the forest. There are 2 active. There are 1 sleeping

There is a group of Owl in the forest. There are 5 active. There are 4 sleeping 
```

我使用了以下命令：

```
grep "There is a group" | awk '{print substr($0,10)}' 
```

我得到以下信息

```
Lion in the forest. There are 3 active. There are 1 sleeping
Turtle in the forest. There are 1 active. There are 0 sleeping
Monkey in the forest. There are 4 active. There are 0 sleeping
Panda in the forest. There are 2 active. There are 1 sleeping
Owl in the forest. There are 5 active. There are 4 sleeping 
```

**问题**

我应该如何修改我的 grep 和 awk 命令以获得以下结果：

```
Lion, 3, 1
Turtle, 1, 0
Monkey, 4, 0
Panda, 2, 1
Owl, 5, 4 
```

结果将存储到 Microsoft Excel 将读取的文件中。在 Microsoft Excel 中，我将能够看到如下三列：

```
============================
| 狮子 | 3 | 1 |
| 龟 | 1 | 0 |
| 猴子 | 4 | 0 |
| 熊猫 | 2 | 1 |
| 猫头鹰 | 5 | 4 |
============================

```

感谢任何帮助渲染。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T09:56:11.430

根据数据的规律性，您可以直接通过替换来处理字段：

```
grep "There is a group" | awk '{print substr($0,10)}' 
```

和

```
awk -v OFS=', ' '/There is a group/ { print $6, $12, $16 }' 
```

输出：

```
Lion, 3, 1
Turtle, 1, 0
Monkey, 4, 0
Panda, 2, 1
Owl, 5, 4 
```

# asp.net - 从 asp.net 的数据库中获取菜单项

> ID：12349163
> 
> 赞同：0
> 
> 时间：2012-09-10T09:48:35.057
> 
> 标签：asp.net, c#-4.0, menu

我正在尝试从 SQL Server 2008 数据库中获取菜单项。

我尝试过这样的事情，因为我在谷歌上搜索并首先找到 了[这些](http://www.codeproject.com/Tips/354696/Dynamically-populating-menu-items-from-the-databas)[教程](http://www.codeproject.com/Articles/366450/Permissions-and-Levels-in-ASP-Menu?msg=4361548#xx4361548xx)：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;
using System.Configuration;
using System.Text;

namespace MenuDriven
{
    public partial class MenuDB : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            menuBar.MaximumDynamicDisplayLevels = 3;

            if (!IsPostBack)
            {

                SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["MyConnection"].ConnectionString);

                con.Open();
                DataSet ds = new DataSet();
                DataTable dt = new DataTable();
                string sql = "Select * from MenuItems";
                SqlDataAdapter da = new SqlDataAdapter(sql, con);
                da.Fill(ds);
                dt = ds.Tables[0];
                DataRow[] drowpar = dt.Select("ParentID=" + 0);

                foreach (DataRow dr in drowpar)
                {
                    menuBar.Items.Add(new MenuItem(dr["MenuName"].ToString(),
                            dr["MenuID"].ToString(), "",
                            dr["MenuLocation"].ToString()));
                }

                foreach (DataRow dr in dt.Select("ParentID >" + 0))
                {
                    MenuItem mnu = new MenuItem(dr["MenuName"].ToString(), dr["MenuID"].ToString(),
                    "", dr["MenuLocation"].ToString());

                    //Code for Multiple Menu Levels
                    string valuePath = getValuePath(Convert.ToInt32(dr["ParentID"].ToString()), dt);
                    //menuBar.FindItem(dr["ParentID"].ToString()).ChildItems.Add(mnu);
                    menuBar.FindItem(valuePath).ChildItems.Add(mnu);**NullReferenceException was handled by the code**
                    //End Code for Multiple Menu Levels
                }
                con.Close();
            }

        }
        private string getValuePath(Int32 Parent, DataTable dt)
        {
            int predecessor = Parent;
            StringBuilder valuePath = new StringBuilder();
            valuePath.Append(Parent.ToString());
            DataRow[] drPar;
            while (true)
            {
                drPar = dt.Select("MenuID=" + predecessor);
                if (drPar[0]["ParentID"].ToString().Equals("0"))**//Index out of range exception**
                    break;
                valuePath.Insert(0, '/');
                valuePath.Insert(0, drPar[0]["ParentID"].ToString());
                predecessor = Convert.ToInt32(drPar[0]["ParentID"].ToString());
            }
            return valuePath.ToString();
        }

    }
} 
```

这段代码有两个错误：

1.  索引超出范围异常
2.  `NullReferenceException`由代码处理

我已经指出了产生错误的代码。

这是我的数据库以及标题。

```
MenuID  MenuName    MenuLocation    ParentID    Value
1        Parent1      NULL            0             p1
2        Parent2      NULL            0             p2
3        Parent3      NULL            0             p3
11       SubMenuItem1     NULL            1             s1
12       SubMenuItem2     NULL            1             s1
21       SubMenuItem3     NULL            2             s1
111      SubSubMenuItem4  NULL            1             ss1
211      SubSubMenuItem5  NULL            2             ss1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T05:21:41.207

我已经为菜单项中的任意数量的级别提供了解决方案。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;
using System.Configuration;

namespace MenuDriven
{
    public partial class AnotherMenuTest : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            populateMenuItem();
        }
        private void populateMenuItem()
        {

            DataTable menuData = GetMenuData();
            AddTopMenuItems(menuData);

        }

        private DataTable GetMenuData()
        {
            using (SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["ServerString"].ConnectionString))
            {
                using (SqlCommand cmd = new SqlCommand("SELECT MenuID,MenuName,ParentID FROM MenuItems", con))
                {
                    SqlDataAdapter da = new SqlDataAdapter(cmd);
                    DataTable dt = new DataTable();
                    da.Fill(dt);
                    return dt;
                }

            }
        }

        /// Filter the data to get only the rows that have a
        /// null ParentID (This will come on the top-level menu items)

        private void AddTopMenuItems(DataTable menuData)
        {
            DataView view = new DataView(menuData);
            view.RowFilter = "ParentID = 0";
            foreach (DataRowView row in view)
            {
                MenuItem newMenuItem = new MenuItem(row["MenuName"].ToString(), row["MenuID"].ToString());
                menuBar.Items.Add(newMenuItem);
                AddChildMenuItems(menuData, newMenuItem);
            }

        }

        //This code is used to recursively add child menu items by filtering by ParentID

        private void AddChildMenuItems(DataTable menuData, MenuItem parentMenuItem)
        {
            DataView view = new DataView(menuData);
            view.RowFilter = "ParentID=" + parentMenuItem.Value;
            foreach (DataRowView row in view)
            {
                MenuItem newMenuItem = new MenuItem(row["MenuName"].ToString(), row["MenuID"].ToString());
                parentMenuItem.ChildItems.Add(newMenuItem);
                AddChildMenuItems(menuData, newMenuItem);
            }
        }
    }
} 
```

感谢 KnowledgeSeeker 和 Antonio 的回复。

数据库是这样的。

这是我的数据库以及标题。

```
MenuID  MenuName    MenuLocation    ParentID    
1          Parent1             NULL           0             
2          Parent2             NULL           0             
3          Parent3             NULL           0             
11         SubMenuItem1    NULL           1             
12         SubMenuItem2    NULL           1             
21         SubMenuItem3    NULL           2             
111        SubSubMenuItem4     NULL           1             
211        SubSubMenuItem5     NULL           2 
```

解决方案是：在数据库本身内设置父节点。

例如：插入 dbo.MenuItems 值（333，'SubSubMenuItem8'，NULL，21）

这会将`SubSubMenuItem8`作为子节点设置为父节点`SubMenuItem3`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:39:27.400

按照以下示例修改您的代码。我正在使用 [以下](http://www.dynamicdrive.com/dynamicindex1/ddsmoothmenu.htm)菜单。它正在工作您可能需要根据需要修改代码

```
 String sqlQuery = "SELECT * FROM pMenuItems";

            dsMenu = DataProvider.Connect_Select(sqlQuery);

            DataTable tableMenu = dsMenu.Tables[0];
            DataView dvMenu = new DataView(tableMenu);
            //dvMenu.RowFilter = "PageInheritance is NULL";
            dvMenu.RowFilter = "PageInheritance = 0";
            int dsMenuRowCount = dsMenu.Tables[0].Rows.Count;
            //Create Top Menu
            //StringBuilder sb = new StringBuilder();
            StringBuilder sbMenuFooter = new StringBuilder();
            if (dsMenu != null && dsMenu.Tables.Count > 0 && dsMenu.Tables[0].Rows.Count > 0)
            {
                foreach (DataRowView row in dvMenu)
                {
                   // MenuItem menuItem = new MenuItem(row["MenuName"].ToString().ToUpper(), row["MenuID"].ToString());
                    MenuItem menuItem = new MenuItem(row["PageName"].ToString(), row["PageId"].ToString());
                    bool PageInternalLink = bool.Parse(row["PageInternalLink"].ToString());
                    if (PageInternalLink == true)
                    {
                        menuItem.NavigateUrl = row["PageURL"].ToString() + "?PageId=" + row["PageId"];
                    }
                    else
                    {
                        menuItem.NavigateUrl = row["PageURL"].ToString();
                        menuItem.Target = row["PageWindow"].ToString();
                    }
                    //menuItem.Target = 
                    Menu1.Items.Add(menuItem);
                    AddChildItems(tableMenu, menuItem, PageInternalLink );
                }

private static void AddChildItems(DataTable table, MenuItem menuItem, bool PageInternalLink)
{
    DataView viewItem = new DataView(table);
    viewItem.RowFilter = "PageInheritance = " + menuItem.Value;
    //foreach (DataRowView row in dvMenu)
    foreach (DataRowView childView in viewItem)
    {
        MenuItem childItem = new MenuItem(childView["MenuName"].ToString(), childView["MenuID"].ToString());
        childItem.NavigateUrl = childView["PageURL"].ToString() + "?PageId=" + childView["PageId"];
        if (PageInternalLink == true)
        {
            childItem.NavigateUrl = childView["PageURL"].ToString() + "?PageId=" + childView["PageId"];
        }
        else
        {
            childItem.NavigateUrl = childView["PageURL"].ToString();
            childItem.Target = childView["PageWindow"].ToString();
        }
        menuItem.ChildItems.Add(childItem);
        AddChildItems(table, childItem, PageInternalLink);
    }

} 
```

HTML

```
 <script type="text/javascript">
    $(document).ready(function () {
        $('#<%=Menu1.ClientID %> ul', '#<%=Menu1.ClientID %> li').removeClass();
    });
    $(document).ready(function () {
        $("#dMenuContainer").delay(500).fadeIn(500);
        $('#smoothmenu1 ul, #smoothmenu1 li').removeClass();
    });
    ddsmoothmenu.init({
        mainmenuid: "<%=Menu1.ClientID %>", //menu DIV id
        orientation: 'h', //Horizontal or vertical menu: Set to "h" or "v"
        classname: 'ddsmoothmenu', //class added to menu's outer DIV
        customtheme: ["", ""], //78AC1B
        contentsource: "markup" //"markup" or ["container_id", "path_to_menu_file"]
    })
</script>
...
    <table align="center" cellpadding="0" cellspacing="0" align="center" >
        <tr>
            <td align="center" valign="middle"><div id="smoothmenu1" class="ddsmoothmenu">
                 <asp:Menu ID="Menu1"  runat="server"  Orientation="Horizontal" CssClass="ddsmoothmenu" IncludeStyleBlock="False" DisappearAfter="500" >

                 </asp:Menu> 
                 </div>
            </td>
        </tr>
    </table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:29:23.740

您必须按 ParentID 对数据进行排序，然后循环槽表，并为每个项目找到父项目并将其添加到它的 ChildItems，如果您没有找到父项将项目添加到根。

获取数据：

```
string sql = "Select * from MenuItems Order By ParentID";
DataTable data = GetTable(sql); 
```

然后填写菜单：

```
 foreach (DataRow rw in data.Rows)
  {
    IEnumerable<MenuItem> menuItems = Extensions.GetItems<MenuItem>(menuBar.Items, item => item.ChildItems);

    MenuItem parent = menuItems.FirstOrDefault(mi => mi.Value == rw.Field<int>("ParentID").ToString());
    MenuItem newItem = new MenuItem(rw.Field<string>("MenuName"), rw.Field<int>("MenuID").ToString());
    if (parent == null)
      menuBar.Items.Add(newItem);
    else
      parent.ChildItems.Add(newItem);
  } 
```

这是将返回所有树节点的 GetItems 方法，取自此处：[https ://stackoverflow.com/a/1815600/351383](https://stackoverflow.com/a/1815600/351383)

```
 public static class Extensions
  {
    public static IEnumerable<T> GetItems<T>(this IEnumerable collection, Func<T, IEnumerable> selector)
    {
      Stack<IEnumerable<T>> stack = new Stack<IEnumerable<T>>();
      stack.Push(collection.OfType<T>());

      while (stack.Count > 0)
      {
        IEnumerable<T> items = stack.Pop();
        foreach (var item in items)
        {
          yield return item;

          IEnumerable<T> children = selector(item).OfType<T>();
          stack.Push(children);
        }
      }
    }
  } 
```

# simulink - Simulink 中 M 文件的初始参数

> ID：12349165
> 
> 赞同：1
> 
> 时间：2012-09-10T09:48:39.257
> 
> 标签：simulink

[http://www.edaboard.com/attachments/79848d1347097103-255.png](http://www.edaboard.com/attachments/79848d1347097103-255.png) 亲爱的，我通过 Matlab 函数在 Simulink 上使用了 m-file，如附图所示，在 m-fie 中我编写了一个带有参数的代码初始化值，例如代码是：

```
[HTML]
function out=control(in)
rin=in(1);
for j=1:1:6
h(j)=exp(-norm(x-ci(:,j))^2/(2*bi(j)*bi(j)));
end
x(1)=h;
x(2)=rin; 
```

需要将初始值 fr x 设置为 [0 , 0]，但是在 Simulink 中怎么可能呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T17:28:26.280

尝试这个：

```
x = zeros(1,2,'double'); % after function out=control(in) 
```

如果抛出错误，请适当更改数据类型。

# linux - uc_mcontext 定义在哪里？

> ID：12349169
> 
> 赞同：4
> 
> 时间：2012-09-10T09:48:58.707
> 
> 标签：linux, signals

sa_sigaction 的第三个参数是一个指向机器相关的指针`struct ucontext`，我想知道我可以从中转储什么`struct ucontext`。

```
void (*sa_sigaction)(int signum, siginfo_t *info, void *ucontext)

struct ucontext {
        unsigned long     uc_flags;
        struct ucontext  *uc_link;
        stack_t           uc_stack;
        struct sigcontext uc_mcontext;
        sigset_t          uc_sigmask;   /* mask last for extensibility */
}; 
```

特别是通过 uc_mcontext （如果你能告诉我在哪里我可以了解更多关于其他数据成员的信息，那就太好了），因为人们通常`uc_mcontext`用来转储这样的主机寄存器，

```
ucontext->uc_mcontext.gregs[REG_EIP] 
```

因为`uc_mcontext`类型是`struct sigcontext`，我`struct sigcontext`在看`arch/x86/include/asm/sigcontext.h`。

```
struct sigcontext {
        unsigned short gs, __gsh;
        unsigned short fs, __fsh;
        unsigned short es, __esh;
        unsigned short ds, __dsh;

        ... snip ...
}; 
```

`gregs`它是正确的，因为我没有看到`struct sigcontext`吗？欢迎任何建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T10:30:50.010

您正在查看 sigcontext 的 Linux 内核定义。您应该查看 struct ucontext 的 C 库头文件。它在 /usr/include/sys/ucontext.h 文件中定义

请注意，它是特定于体系结构的——例如，x86 和 PPC 的字段是完全不同的！

# return - NSIS 当某些东西返回特定值时，我如何取消隐藏部分？

> ID：12349173
> 
> 赞同：0
> 
> 时间：2012-09-10T09:49:14.087
> 
> 标签：return, hide, nsis

我有一个使用 HM NIS Edit 创建的安装程序。如果我的检查发现它没有安装，我希望能够取消隐藏名为 VDF 的部分。并在安装时隐藏它，也不执行该嵌入安装程序。

我希望我说清楚了。

这是功能：

```
Function .onInit #Check's wether the installer is in your installation folder. onInit means that it checks for that even before the installer is initialized.
  ${If} ${FileExists} "$EXEDIR\VDF2012-17.0.22.8.Client.exe"
    MessageBox MB_OK "VDF found"

  ${Else}
    MessageBox MB_OK "The Visual DataFlex setup was not found in the installation folder. However the installation of $(^Name) will still continue."

  ${EndIf} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:13:46.097

要隐藏某个部分，您必须[将其名称更改](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#sectionsettext)为空字符串。

要选中/取消选中某个部分，您应该使用 section.nsh 中的辅助[宏](http://nsis.sourceforge.net/Include/Sections.nsh)。

```
!include sections.nsh

Section "VDF" SID_VDF
#Install VDF
SectionEnd

Function .onInit
${IfNot} ${FileExists} "$EXEDIR\VDF2012-17.0.22.8.Client.exe"
  !insertmacro UnselectSection ${SID_VDF}
  SectionSetText ${SID_VDF} ""
${EndIf}
FunctionEnd 
```

要取消隐藏，您可以给它一个非空名称，但默认情况下显示它并在需要时隐藏它通常会减少工作量......

# c# - 如何在 C# 中监视用户何时启动诸如 Excel 之类的 Windows 应用程序

> ID：12349174
> 
> 赞同：3
> 
> 时间：2012-09-10T09:49:15.023
> 
> 标签：c#, windows

> **可能重复：**
> [跟踪 Windows 中启动的应用程序](https://stackoverflow.com/questions/162444/track-started-applications-in-windows)

我喜欢在 C# 中创建一个程序或服务，用于监控用户何时启动某个应用程序，如 excel 或 access。使用 System.Diagnostics.Process 我可以获得正在运行的进程，但我想在用户启动应用程序时监视事件。我们想创建某种使用历史。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T09:52:55.873

您可以使用 WMI 来做到这一点：

```
private ManagementEventWatcher WatchForProcessStart(string processName)
{
    string queryString =
        "SELECT TargetInstance" +
        "  FROM __InstanceCreationEvent " +
        "WITHIN  10 " +
        " WHERE TargetInstance ISA 'Win32_Process' " +
        "   AND TargetInstance.Name = '" + processName + "'";

    // The dot in the scope means use the current machine
    string scope = @"\\.\root\CIMV2";

    // Create a watcher and listen for events
    ManagementEventWatcher watcher = new ManagementEventWatcher(scope, queryString);
    watcher.EventArrived += ProcessStarted;
    watcher.Start();
    return watcher;
}

private void ProcessStarted(object sender, EventArrivedEventArgs e)
{
    ManagementBaseObject targetInstance = (ManagementBaseObject)e.NewEvent.Properties["TargetInstance"].Value;
    string processName = targetInstance.Properties["Name"].Value.ToString();
    Console.WriteLine(String.Format("{0} process started", processName));
} 
```

它监视 10 个最新进程的数组，并在事件发生变化时调用事件

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T10:03:04.953

我做了一个小例子，使用[**WqlEventQuery**](http://msdn.microsoft.com/en-us/library/system.management.wqleventquery.aspx)对象来检查是否有一个*新的进程实例*。然后检查名称并按照您的意愿进行操作。如果您想改进我的查询，请随意查看相应的[**语法说明**](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393277%28v=vs.85%29.aspx)。

```
private static void lookForExcel()
{
    WqlEventQuery query = new WqlEventQuery("__InstanceCreationEvent", new TimeSpan(0, 0, 1), "TargetInstance isa \"Win32_Process\"");
    ManagementEventWatcher watcher = new ManagementEventWatcher(query);
    watcher.EventArrived += new EventArrivedEventHandler(watcher_EventArrived);
    watcher.Start();
    Console.ReadLine();
    watcher.Stop();
}

static void watcher_EventArrived(object sender, EventArrivedEventArgs e)
{
    string instanceName = ((ManagementBaseObject)e.NewEvent["TargetInstance"])["Name"].ToString();
    if (instanceName.ToLower()=="excel.exe")
    {
        Debug.WriteLine("Excel has been started ...");    
    }            
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:52:48.547

最简单的方法是定期检查正在运行的进程，并与之前的列表进行比较。

但是，您可以在进程开始时收到通知。此处的文档：

*   [http://msdn.microsoft.com/en-us/library/windows/desktop/aa393013(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa393013(v=vs.85).aspx)

您还可以在安全事件日志中打开“详细跟踪”，然后它将显示系统上启动和结束的每个进程。不过那可能太多了。

# sql - 如何在oracle中对逗号分隔值应用过滤器？

> ID：12349183
> 
> 赞同：0
> 
> 时间：2012-09-10T09:49:46.933
> 
> 标签：sql, oracle

当我运行以下查询时，我得到 3 行而不是 4 行，

```
SELECT *
FROM freelook
WHERE done_type IN ('14','27','28') 
```

因为在 1 行中的值是这样`1,14,27`的。这是一列中逗号分隔的单个值。像这样，我有很多行有逗号分隔的值`done_type`。

我希望它应该分隔值，然后检查它是否与给定值匹配。

我的查询是如何在值是逗号分隔值的字符串的此类行上应用过滤器。请指导。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T10:03:31.513

例如，要搜索 14，您可以：

```
...
WHERE
    done_type = '14'
    OR done_type LIKE '14,%'
    OR done_type LIKE '%,14'
    OR done_type LIKE '%,14,%' 
```

冲洗并重复 27、28 和您想要搜索的任何其他数字...

但是，这将执行得非常糟糕（全表扫描）。

与其把油漆涂在锈上，不如解决根本问题¹并通过拆分为两个表来规范化数据。

* * *

*¹违反[原子性](http://en.wikipedia.org/wiki/1NF#Atomicity)原则，因此违反 1NF。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:58:43.103

您可以使用以下 SQL（假设“id”是您的 PK 列）。

```
WITH tokens as (
SELECT distinct id, token
FROM        
(SELECT  
id,
SUBSTR (csv,
  INSTR (csv, ',', 1, LEVEL  ) + 1,
  INSTR (csv, ',', 1, LEVEL+1) - INSTR (csv, ',', 1, LEVEL) -1 
  ) AS token
FROM (
  SELECT  id, ','||trim(done_type||',') csv FROM freelook) 
  CONNECT BY LEVEL <= LENGTH(csv)-LENGTH(REPLACE(csv,',',''))+1)
  WHERE token is not NULL)

SELECT id FROM tokens
WHERE token in ('14','27','28')
ORDER BY id, token 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:59:12.957

如果您正在寻找这些值之一：使用 LIKE：

```
 SELECT *
FROM freelook
WHERE done_type LiKE '%14%'
OR done_type LiKE '%27%'
OR done_type LiKE '%28%' 
```

使用正则表达式：

```
 SELECT *
FROM freelook
WHERE REGEXP_LIKE(done_type, '[^14,|,14,|,14$|^27,|,27,|,27$|^28,|,28,|,28$|]') 
```

如果您正在寻找完全匹配：

使用正则表达式：

```
 SELECT *
FROM freelook
WHERE REGEXP_LIKE(done_type, '^14,27,28$') 
```

编辑：正则表达式更新

# javascript - 在javascript中换行正则表达式？

> ID：12349184
> 
> 赞同：1
> 
> 时间：2012-09-10T09:49:48.480
> 
> 标签：javascript, regex, literals

由于下面显示的正则表达式文字中有些缺乏可读性，我想将它分成几行。我将如何做到这一点以及需要更改/逃避什么？

```
regex = /\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/i; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:01:49.470

JavaScript 不支持多行正则表达式。但是，您可以从字符串构造正则表达式：

```
r = new RegExp( 
"\\b" + 
"(" + 
"(?:[a-z][\\w-]+:(?:/{1,3}|[a-z0-9%])|www\\d{0,3}[.]|[a-z0-9.\\-]+[.][a-z]{2,4}/)" + 
"(?:[^\\s()<>]+|\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\))+" + 
"(?:\\(([^\\s()<>]+|(\\([^\\s()<>]+\\)))*\\)|[^\\s`!()\\[\\]{};:'\".,<>?«»“”‘’])" + 
")", "i") 
```

（我希望我的字符串构建语法是正确的——我不是 JavaScript 人，所以如果这不起作用，请告诉我）

# java - java：如何初始化整数键和对象值的 ConcurrentHashMap

> ID：12349188
> 
> 赞同：1
> 
> 时间：2012-09-10T09:49:57.760
> 
> 标签：java

我想要一个具有整数键和对象值的 ConcurrentHashMap（地图的一些值是整数，另一个是字符串）。这是初始化和使用我的表的正确方法吗？

```
ConcurrentHashMap table=new ConcurrentHashMap<Integer, Comparable>();
        table.put(new Integer(1), new String("nodata"));
        table.put(new Integer(2), new Integer(23)); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T09:57:25.877

几点

*   您不需要自动装箱`int`值并且包装字符串文字是没有意义的。
*   您需要将泛型类型保留在左侧，但首选使用接口。
*   您只会使用 Comparable 来比较对象。但是，您通常无法比较不同类型的对象，因此这更令人困惑而不是有用。

.

```
Map<Integer, Object> table = new ConcurrentHashMap<>();
table.put(1, "nodata");
table.put(2, 23); 
```

如果您需要 ConcurrentMap 提供的其他方法，您可能需要以下内容。

```
ConcurrentMap<Integer, Object> table = new ConcurrentHashMap<>(); 
```

这似乎是一个对象拒绝的情况。使用 Object 可能是更好的选择。

```
class MyData {
    private String text;
    private int number;

    MyData(String text, int number) {
        this.text = text;
        this.number = number;
    }

    public synchronized String getText() {
        return text;
    }

    public synchronized void setText(String text) {
        this.text = text;
    }

    public synchronized int getNumber() {
        return number;
    }

    public synchronized void setNumber(int number) {
        this.number = number;
    }
}

MyData data = new MyData("nodata", 23); 
```

* * *

对于相同的并发版本。

```
class MyData {
    private final AtomicReference<String> text;
    private final AtomicInteger number;

    MyData(String text, int number) {
        this.text = new AtomicReference<String>(text);
        this.number = new AtomicInteger(number);
    }

    public String getText() {
        return text.get();
    }

    public void setText(String text) {
        this.text.set(text);
    }

    public int getNumber() {
        return number.get();
    }

    public void setNumber(int number) {
        this.number.set(number);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T09:54:22.757

[您可以使用初始化块](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)、[自动装箱](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)和[匿名类](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)很好地做到这一点：

```
Map table = new ConcurrentHashMap<Integer, Comparable>() {
  {
    this.put(1, "nodata");
    this.put(2, 23);
  }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T09:52:22.133

是的，但不要调用所有这些构造函数（String#new 真的很糟糕，其余的可以自动装箱）：

```
 ConcurrentHashMap<Integer, Comparable> table=
        new ConcurrentHashMap<Integer, Comparable>();
    table.put(1, "nodata");
    table.put(2, 23); 
```

回到你原来的问题，如果你`table`在这三个语句之后引用另一个线程，它将看到它的最新和最好的版本。在调用两个看跌期权之前不要共享参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T09:52:58.203

您编写的代码是正确的。请注意，您应该使用

```
 table.put(Integer.valueOf(1), "nodata");
    table.put(Integer.valueOf(2), Integer.valueOf(23)); 
```

甚至只是

```
 table.put(1, "nodata");
    table.put(2, 23); 
```

因为两者`Integer.valueOf`和`new String`都有更好的性能，或者至少等于`new Integer`和`new String`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T09:53:08.110

您所做的将起作用，但您可能不需要使用所有这些构造函数：

```
table.put(1, "nodata");
table.put(2, 23); 
```

为了使代码更紧凑（但可能更难理解），您可以这样做：

```
Map<Integer, Comparable> table=new ConcurrentHashMap<Integer, Comparable>(){{
    put(1, "nodata");
    put(2, 23);
}}; 
```

`ConcurrentHashMap`它创建了一个带有初始化块的匿名子类，该块调用该`put`方法来初始化地图。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T09:55:27.683

按照 Thilo 的回答，您可以进一步执行此操作：

```
ConcurrentHashMap<Integer, Comparable> table=
        new ConcurrentHashMap<Integer, Comparable>() {{
    put(1, "nodata");
    put(2, 23)
  }} 
```

它创建一个派生自您的匿名类`HashMap`，并从静态初始化程序调用它。它减少了打字，但请注意，它是匿名类的非显而易见的创建。有些人认为这是对匿名类的滥用，以上内容可能应该在有限的场景中使用（例如为单元测试设置数据等）

# c# - 类型“System.IDisposable”在未引用的程序集中定义

> ID：12349189
> 
> 赞同：32
> 
> 时间：2012-09-10T09:50:02.027
> 
> 标签：c#, .net, windows

我在Windows 8上的Visual Studio 2012中创建了一个Windows Form应用程序，目标.NET框架是4.5，我想使用Windows SDK的Datagramsocket库，所以我在编译时将目标操作系统版本更改为8。

我收到以下错误：

> “错误 1 ​​类型 'System.IDisposable' 在未引用的程序集中定义。您必须添加对程序集 'System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' 的引用。”

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-26T02:59:27.217

如果您的目标是 Windows 8，则[MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/apps/jj856306.aspx)有以下说明：

> 也就是说，您的桌面应用程序不能从 Windows 运行时消耗大量任何内容，除非您使用一个基本参考来准备您的项目。Windows 运行时在 中定义了一些标准类和接口`System.Runtime`，例如`IEnumerable`在整个 Windows 运行时库中使用。默认情况下，您的托管桌面应用将无法找到这些类型，因此您必须手动引用 System.Runtime，然后才能对 Windows 运行时类执行任何有意义的操作。要创建此手册参考：
> 
> 1.  在解决方案资源管理器中导航到您的托管桌面应用程序项目。
> 2.  右键单击引用节点，然后单击添加引用。
> 3.  单击浏览选项卡。
> 4.  单击浏览...。
> 5.  导航到 System.Runtime.dll 外观。您通常可以在类似于以下的路径中找到它：`%ProgramFiles(x86)%\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\Facades\System.Runtime.dll`

希望有帮助。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-01-08T23:28:37.167

如果您在使用 4.5.2 和 Unity 时遇到此问题，Microsoft 已发布修复，知识库文章：http: [//support.microsoft.com/kb/2971005](http://support.microsoft.com/kb/2971005)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-03T14:48:16.643

我刚刚在 Windows 10、TeamCity 和 VS2015 中遇到了这个问题：

**症状：**

Visual Studio 可以很好地构建项目，但 TeamCity 却遇到了编译问题。

**原因：**

向现有解决方案添加了一个新项目 - 忘记更改 TargetRuntimeVersion。

**解决方案：**

卸载项目

编辑该项目的 .csproj 文件

改变：

```
<TargetFrameworkVersion>v4.5.1</TargetFrameworkVersion> 
```

无论您的其他项目是什么，或者服务器上安装了什么。

对我来说是：

```
<TargetFrameworkVersion>v4.5</TargetFrameworkVersion> 
```

希望这可以帮助其他遇到这种情况的人。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-15T12:50:09.983

看起来您的应用正在尝试加载`System.Runtime`4.0 版，但您没有安装该版本。您说您已安装 .NET 4.5，因此您可以提供一些配置以在运行时[重定向程序集绑定](http://msdn.microsoft.com/en-us/library/2fc472t2%28v=vs.71%29.aspx)。

尝试将此添加到您的`App.config`or`Web.config`文件中：

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <dependentAssembly>
      <assemblyIdentity name="System.Runtime" publicKeyToken="b03f5f7f11d50a3a" />
      <bindingRedirect oldVersion="4.0.0.0" newVersion="4.5.0.0" />
    </dependentAssembly>
  </assemblyBinding>
</runtime> 
```

我还没有测试过这个确切的场景，但是这个配置在类似的情况下帮助了我。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-05T21:08:39.933

在使用 TFS 构建代理时，我一直在下面看到此错误，但仅在安装了 4.5.2 的 Windows 2012 R2 服务器上。我们的 Visual Studio 机器都没有编译错误。

> “错误 1 ​​类型 'System.IDisposable' 在未引用的程序集中定义。您必须添加对程序集 'System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' 的引用。”

正如其他人指出的那样，原因与便携式类库有关，正如其他人所指出的那样。但至于解决方案，有些人建议`System.Runtime.dll`在我不同意的情况下参考外观，`%ProgramFiles(x86)%\Reference Assemblies\Microsoft\Framework\.NETFramework\v4.5\Facades\System.Runtime.dll`因为其他机器上的路径和版本可能不同。

相反，我发现的最佳解决方案是在构建机器上安装[Windows SDK 。](https://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx)

我从这里的帖子中找到了这个解决方案，[并且](https://stackoverflow.com/questions/14517873/what-install-files-in-location-program-files-x86-reference-assemblies-micros/14517992#14517992)非常清楚地描述了为什么会出现这个[问题](https://stackoverflow.com/questions/16675171/what-does-the-web-config-compilation-assemblies-element-do/19942274)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-08-10T15:00:56.177

将 Unity 4.0.1 添加到面向 .NET Framework 4.6.1 的项目后，我在 TeamCity 中收到此错误消息。我最终将 C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework 中缺少的文件夹从我的开发机器复制到了构建服务器。两者都运行 Windows 7。之后构建成功。

[![在此处输入图像描述](../Images/e25572d60e51a0f044d56f978485ac82.png)](https://i.stack.imgur.com/OM4PT.png)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-03-10T13:28:58.880

**基于 TFS 2015 构建服务器**

我不知道此错误消息是否通用，并且每个唯一错误的答案/解决方案可能是唯一的。但我有类似的错误`the type 'System.IDisposable' is defined in an assembly that is not referenced. You must add a reference to assembly 'System.Runtime, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a'`

我意识到该项目正在使用`Microsoft.Practices.Unity`并具有`IUnityContainer`实现`IDisposable`. 原来没有配置TFS Build Definition NuGet Installer Build Step，它负责`Microsoft.Practices.Unity`在TFS Build Server上恢复NuGet包。如果您遇到此错误，请检查您的 TFS 构建定义并将 NuGet 安装程序构建步骤路径指向您的解决方案完整路径，包括 . `sln`扩大

[![在此处输入图像描述](../Images/b5718018fc5bc230a5cbbb80b7f383a7.png)](https://i.stack.imgur.com/pSSwz.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-09-18T21:30:27.733

正如 Josh 所提到的，我在一个包含 Web API 项目和几个库项目的解决方案中遇到了这个问题，其中一个库项目正在构建中，错误表明 Unity 属性不是“有效”属性，然后是一个的错误说`The type 'System.Attribute' is defined in an assembly that is not referenced. You must add a reference to assembly System.Runtime.`

建议的“更新”4.5.2 开发包是我已经安装的，所以这对我没有帮助。我预感可能只是版本不匹配。因此，我查看了每个项目的属性，其中一个基础库的目标是 4.5，而其他所有库的目标都是 4.5.2。我将其更改为也针对 4.5.2 并且错误消失了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-05-30T13:58:52.543

我在 VS 2015 的一些解决方案中遇到了这个问题，甚至在一个工作站上的相同解决方案中，但在另一个工作站上没有。将 .NET 版本更改为 4.6 后开始出现错误。

解决方法很简单：关闭解决方案并删除与解决方案相同文件**夹中的隐藏 .vs 文件夹。**

按照其他答案中的建议添加缺少的引用也可以解决问题，但是即使您再次删除引用，错误仍然可以解决。

# css - Codeigniter Base url 在标头中不起作用

> ID：12349191
> 
> 赞同：0
> 
> 时间：2012-09-10T09:50:05.530
> 
> 标签：css, codeigniter, url, stylesheet

我正在使用 codeigniter 框架，无法将样式表链接到页面！我创建了一个 header 和 fotter 文件，以便在每个页面中加载样式表。内容正在传递，但没有样式被传递。我的文件布局如下：

应用资产 index.php 系统等

在我的资产文件夹中，我有：

assets/ css 图片 js 包括

在我的标题中，我有：

```
 <!DOCTYPE html>
    <html lang="en">
    <head>
<meta charset="utf-8">
    <meta name="viewport" content="">
<title>Site Name</title>
    <link rel="stylesheet" href="<?php echo base_url();?> assets/css/style.css"  type="text/css" media="screen" />

    </head>
    <body> 
```

在我的主页中，我使用以下命令加载页眉和页脚： $this->load->view('header');, $this->load->view('footer');

我检查了我的基本 url 并设置了一个 htaccess 文件并自动加载 url 帮助程序。我尝试在没有基本 url（标准程序）的情况下访问我的 css 文件，但仍然没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:52:28.340

我的错误 - 在 assets/css/style.css 旁边留了一个空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:59:39.260

你这样编辑

```
<link rel="stylesheet" href="<?php echo base_url();?>/assets/css/style.css"  type="text/css" media="screen" />               "you are missing '/'" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-25T10:23:28.973

我的解决方案是，您必须在调用主页视图（页眉、主页内容和页脚）的控制器中加载 url 帮助程序。如果有人有更好的，请发布它。

```
$this->load->helper("url"); 
```

# java - 使用 # 字符进行 LDAP 搜索

> ID：12349194
> 
> 赞同：3
> 
> 时间：2012-09-10T09:50:29.960
> 
> 标签：java, jakarta-ee, ldap

我正在尝试在 Active Directory (Window Server 2003) 上搜索组织单位。这是我的代码

```
package com.test;

import java.io.IOException;
import java.util.Properties;

import javax.naming.CompositeName;
import javax.naming.Context;
import javax.naming.NamingEnumeration;
import javax.naming.NamingException;
import javax.naming.directory.DirContext;
import javax.naming.directory.SearchControls;
import javax.naming.directory.SearchResult;
import javax.naming.ldap.Control;
import javax.naming.ldap.InitialLdapContext;
import javax.naming.ldap.LdapContext;
import javax.naming.ldap.PagedResultsControl;

public class Main {
    Properties ENV = new Properties();
    private DirContext CTX;
    private static final String BIN_ENV = "java.naming.ldap.attributes.binary";
    private static final String CTX_CLASS = "com.sun.jndi.ldap.LdapCtxFactory";

    String host = "127.0.0.1";
    String port = "389";

    String OU = "OU=b#,DC=domain,DC=local";

    public int getConnection() {
        int result = 0;
        ENV.clear();
        String username = "Administrator@domain.local";
        String password = "admin-123";

        if ((username != null) && (password != null)) {
            ENV.put(Context.SECURITY_AUTHENTICATION, "simple");
            ENV.put(Context.SECURITY_PRINCIPAL, username);
            ENV.put(Context.SECURITY_CREDENTIALS, password);
        }

        ENV.put(Context.INITIAL_CONTEXT_FACTORY, CTX_CLASS);

    ENV.put(Context.PROVIDER_URL, "ldap://" + host + ":" + port);       

        // some attributes must be retrieved in binary format
        ENV.put(BIN_ENV, "userCertificate");
        ENV.put(BIN_ENV, "objectGUID");
        try {
            CTX = new InitialLdapContext(ENV, null);
        } catch (NamingException ex) {
            ENV.clear();
            result = -4;
            if (ex.toString().indexOf("AuthenticationException") > 0) {
                result = -1;
            } else if (ex.toString().indexOf("ConnectException") > 0) {
                result = -2;
            } else if (ex.toString().indexOf("UnknownHostException") > 0) {
                result = -3;
            }
        }
        return result;
    }

    public static void main(String args[]) {
        Main a = new Main();

        String filter = "(&(objectClass=user)(!(objectCategory=computer)))";
        String[] availAttrs = { "objectGUID", "name", "sAMAccountName",
                "distinguishedName", "userCertificate", "userPrincipalName" };

        SearchControls cons = new SearchControls();
        cons.setSearchScope(SearchControls.ONELEVEL_SCOPE);
        cons.setReturningAttributes(availAttrs);

        int result = a.getConnection();

        if (result != 0)
            System.exit(-1);
        try {
            ((LdapContext) a.CTX)
                    .setRequestControls(new Control[] { new PagedResultsControl(
                            1000, Control.CRITICAL) });

            String jndi_dn = new CompositeName().add(a.OU).toString();
            NamingEnumeration<SearchResult> ne = (NamingEnumeration<SearchResult>) a.CTX
                    .search(jndi_dn, filter, cons);

            if ((ne != null) && ne.hasMoreElements()) {

                SearchResult sr = (SearchResult) ne.next();
                String name = sr.getAttributes().get(availAttrs[1]).get(0)
                        .toString();

                System.out.println(name);
            }

        } catch (NamingException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

如果AD上的Organization Unit是“b#”，那么它可以运行良好。但如果 OU 是“#b”，那么我将遇到 javax.naming.InvalidNameException：问题 2006 (BAD_NAME)。我可以通过将 OU 值用作“\\#b”来解决这个问题，但我仍然不知道为什么我需要一个双反溅。我怎样才能摆脱所有这些特殊字符？有一个通用的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T11:27:24.653

这种情况是由 JNDI 中的软件缺陷引起的，并且是 JNDI 中的许多缺陷之一。一般来说，JNDI 不应该用于新代码。JNDI 不支持所有 LDAP 标准，使用不推荐的配置，并且存在许多软件缺陷。

请改用[UnboundID LDAP SDK](https://www.unboundid.com/products/ldap-sdk/)。

### 也可以看看

*   [LDAP：编程实践](http://www.ldapguru.info/ldap/ldap-programming-practices.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T10:25:33.403

> 但我仍然不知道为什么我需要一个双反溅。

一个反斜杠是为了转义 LDAP 查询语言中磅（#）的特殊含义，另一个反斜杠是为了转义 Java 语言中较早的反斜杠。

> 我怎样才能摆脱所有这些特殊字符？

仅使用反斜杠字符。如果您想在 Java 程序的查询中使用反斜杠，则需要用四个反斜杠替换该反斜杠（从上面的解释中您会明白为什么）。

# c - 字典类型“电话簿”打开散列？和可能的链接列表？

> ID：12349197
> 
> 赞同：0
> 
> 时间：2012-09-10T09:50:41.357
> 
> 标签：c, data-structures

我正在做一个自己的项目或随便你怎么称呼它，我正在创建一个电话簿 - 字典类型，它允许**无限**的唯一名称和每个名称允许**无限**的电话号码，这么多链接列表一直对吗？是的，没有静态数组...：/因为可以说数据是无限的..所以我的问题是...有更好的方法吗？有人有什么想法吗？无限但唯一的人名，那么每个人都可以拥有无​​限的电话号码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:13:11.960

您可以尝试使用自平衡二叉搜索树或某种哈希表。

更多信息见下文。

[自平衡二叉搜索树](http://en.wikipedia.org/wiki/Self-balancing_binary_search_tree)

[哈希表](http://en.wikipedia.org/wiki/Hash_table)

如果您以前从未这样做过，将其实现为哈希表可能会更简单。我建议阅读有关算法和数据结构的书。一些资源如下。

[算法设计手册](http://www.amazon.co.uk/Algorithm-Design-Manual-Steven-Skiena/dp/1848000693)

[Sedgewick 的算法](https://rads.stackoverflow.com/amzn/click/com/032157351X)

[C中的算法](https://rads.stackoverflow.com/amzn/click/com/0201756080)

当然，如果你对细节不感兴趣，你可以使用现有的库来存储这个或某种数据库。

# css - 以响应式、基于百分比的布局分隔 DIV

> ID：12349205
> 
> 赞同：0
> 
> 时间：2012-09-10T09:51:27.707
> 
> 标签：css

到目前为止，我有这个**[JsFiddle](http://jsfiddle.net/AndyMP/2zND2/7/)** - 使用媒体查询的 DIV 排列随着区域宽度的减小而变化，并保持适合 100% 容器宽度的布局。

我遇到的问题是试图分开，`DIV`因为布局是基于百分比的。

到目前为止，我为包含边距所做的努力未能使所有内容保持完美格式。

在这里的任何帮助将不胜感激。

这是CSS...

```
#photos {
   /* Prevent vertical gaps */
   line-height: 0;
   width: 100%;
}
#photos img {
  /* Just in case there are inline attributes */
  width: 20%;
  height: auto;
  float:left;
  overflow:hidden;
}

@media (max-width: 1200px) {
    #photos img {
    /* Just in case there are inline attributes */
    width: 20%;
    }
}

@media (max-width: 800px) {
    #photos img {
    /* Just in case there are inline attributes */
    width: 25%;
    }
}
@media (max-width: 400px) {
    #photos img {
    /* Just in case there are inline attributes */
    width: 50%;
    }
}
@media (max-width: 300px) {
    #photos img {
    /* Just in case there are inline attributes */
    width: 100%;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:58:05.263

如果您知道要连续查看多少张图像，您也可以使用百分比作为边距。

例如。连续 5 张图片：

```
img { width: 15% ; margin: 0 10% 10% 0;}

img:nth-child(5n+5) { margin: 0 0 10% 0; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:00:09.993

我通常使用 1-2% 的边距来处理基于整页宽度的设计的边距。例如，如果我有一排 5 张图片，我有 18% 的宽度和 1% 的边距，所以一个项目的水平宽度（包括边距）是 20%。23% + 1%(*2) = 25% 相同。

3 项行更棘手。您无法完美调整它们的大小，但您可以尝试 32% + 0.5% 的边距。幸运的是，您不想拥有这样的行大小！

对于您的响应式设计，像 18% + 1%、21 + 2%、42 + 4% 和 88 + 6% 这样的值会使边距保持在一定范围内。

# c# - 用于构建正确英语句子的 C# 库

> ID：12349211
> 
> 赞同：11
> 
> 时间：2012-09-10T09:51:56.050
> 
> 标签：c#, nlp, artificial-intelligence

我正在开发一个 C# 应用程序。我需要正确地构建英语句子。我会给它名词动词和宾语，我需要构建一个正确的英语短语。例如，我想做这样的事情：

```
PhraseBuilder p = new PhraseBuilder ();
p.Subject("Tom");
p.Verb("eat");
p.Object("the apple"); 
```

然后使用

```
p.BuildPhrase() 
```

我需要把它作为输出：

> 汤姆吃苹果。

注意添加到吃的“s”和末尾的句号

上面有没有可以做的库？我需要它有正确的英语和标点符号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:19:02.170

如果你还没有，也许你应该看看[SharpNLP](http://sharpnlp.codeplex.com/)。

# .net - 实体框架有没有办法查看缓存中的内容？

> ID：12349215
> 
> 赞同：1
> 
> 时间：2012-09-10T09:52:07.423
> 
> 标签：.net, entity-framework

有没有办法查看缓存中已经存在的内容？我只是想确保我不会进行重复的数据库调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:58:04.207

是的，当然，您可以使用：

```
context.<YourSet>.Local 
```

查看上下文当前跟踪的所有实体

# objective-c - 比较小时和分钟与当前时间

> ID：12349221
> 
> 赞同：3
> 
> 时间：2012-09-10T09:52:21.607
> 
> 标签：objective-c, ios, compare, nsdate

我收到两个字符串： "from"="12:30" 和 "to"="14:30" 这是两个 NSString 对象。我想检查当前时间是否在两个收到的时间之间。最好的方法是什么？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:59:43.847

从输入日期获取小时/分钟组件：

```
NSCalendar *gregorianCal = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
NSDateComponents *dataComps = [gregorianCal components: (NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:yourDate];

NSInteger minutes = [dateComps minute];
NSInteger hours = [dateComps hour]; 
```

然后拆分时间字符串并比较分钟和小时。另一种方法是将字符串转换为`NSDate`s 并比较日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:09:01.627

Aravindhanarvi 提出的第二个解决方案可能如下所示......

```
NSString *time1 = @"12:30";
NSString *time2 = @"14:30";

NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
formatter.dateFormat = @"HH:mm";
// ignore time zone of device
formatter.timeZone = [NSTimeZone timeZoneForSecondsFromGMT:0]; 

NSDate *date1 = [formatter dateFromString:time1];
NSDate *date2 = [formatter dateFromString:time2];
NSDate *now   = [NSDate date];

BOOL inBetween = ([now compare:date1] == NSOrderedDescending 
               && [now compare:date2] == NSOrderedAscending); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T09:58:38.477

```
- (BOOL)date:(NSDate*)date isBetweenDate:(NSDate*)beginDate andDate:(NSDate*)endDate
{
    if ([date compare:beginDate] == NSOrderedAscending)
        return NO;

    if ([date compare:endDate] == NSOrderedDescending) 
        return NO;

    return YES;
} 
```

# css - 图片库媒体查询

> ID：12349227
> 
> 赞同：0
> 
> 时间：2012-09-10T09:52:36.597
> 
> 标签：css, slider, gallery

是否可以设置图像库，例如 WOWSlider，以便从 css 媒体查询加载图像？这样我可以为智能手机加载较小的图像，为桌面加载更大的图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T09:58:49.853

我建议给每张幻灯片一个唯一的 ID，然后为每张幻灯片设置一个背景图像。这样，您可以使用媒体查询加载不同的背景图像

# php - 捕获从 Postgresql 到 PHP 的错误

> ID：12349230
> 
> 赞同：9
> 
> 时间：2012-09-10T09:52:39.513
> 
> 标签：php, sql, postgresql, error-handling

我想使用 php 在网页上捕获并显示错误（以我选择的方式）。所以代替下面的代码

```
$result=pg_query($connection,$query);

if($result){
    //success

}
else{
    echo pg_last_error($connection);
} 
```

我可以使用错误代码匹配之类的方法或其他方法来实现诸如

```
if(error equals duplicate value error){
 echo "this value already exists";
}
else if(error equals different type error){
 echo "You should enter wrong type for column blabla"
} 
```

注意我正在使用 postgresql

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-10T12:08:21.200

可以检索所需的标准[SQLSTATE](http://www.postgresql.org/docs/current/static/errcodes-appendix.html)错误代码，但有一个技巧：查询必须通过异步[pg_send_query()](http://www.php.net/manual/en/function.pg-send-query.php)而不是同步发送`pg_query()`。这是因为`pg_query()`返回`false`错误而不是查看错误详细信息所需的资源。

当[pg_get_result()](http://www.php.net/manual/en/function.pg-get-result.php)在 之后调用`pg_send_query`时，它无论如何都会阻塞，直到查询完成，因此与同步情况相比，它并没有真正使事情复杂化。它返回的结果可以被充分利用以进行精确的错误处理。

例子：

```
if (pg_send_query($db, $query)) {
  $res=pg_get_result($db);
  if ($res) {
    $state = pg_result_error_field($res, PGSQL_DIAG_SQLSTATE);
    if ($state==0) {
      // success
    }
    else {
      // some error happened
      if ($state=="23505") { // unique_violation
        // process specific error
      }
      else {
       // process other errors
      }
    }
  }  
} 
```

此外，如果传递给的参数`pg_query`可能包含**多个 SQL 语句**（用分号分隔），则应扩展上述示例以检索循环中的所有结果，如 @user1760150 的评论中所述。与`pg_query`仅返回最后一个结果相比，`pg_get_result`在循环中可以访问组合查询的每个语句的结果。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-10T09:58:52.367

您应该解析返回`pg_last_error`以了解错误的类型。所以我会这样去做：

```
$result = pg_query($connection,$query);

if($result)
{
  //success
}
else
{
  $error = pg_last_error($connection);

  // you need to adapt this regex
  if (preg_match('/duplicate/i', $error))
  {
    echo "this value already exists";
  }
  // you need to adapt this regex
  elseif(preg_match('/different type/i', $error))
  {
    echo "You should enter wrong type for column blabla"
  }
  else
  {
    // different error
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T11:27:36.310

您*可以*通过两个主要驱动程序访问 SQLSTATE。

[http://uk3.php.net/manual/en/function.pg-result-error-field.php](http://uk3.php.net/manual/en/function.pg-result-error-field.php)

[http://www.php.net/manual/en/pdo.errorcode.php](http://www.php.net/manual/en/pdo.errorcode.php)

# css - 在服务器上读取 IE css

> ID：12349231
> 
> 赞同：1
> 
> 时间：2012-09-10T09:52:42.003
> 
> 标签：css, wordpress, internet-explorer

我有一个基于 wordpress 的网站，当我在 localhost 上工作时，我使用这段代码来阅读 css：

```
<link rel="stylesheet" href="<?php bloginfo('stylesheet_url'); ?>">
<!--[if IE]>
    <link rel="stylesheet" href="<?php echo get_stylesheet_directory()."/ie.css"; ?>" media="screen" type="text/css" />
<![endif]--> 
```

如您所见，代码的第二部分是在我在 Internet Explorer 上查看网站时更改 css。碰巧这在 xampp 上运行良好，但现在，在迁移到在线服务器后，代码的第二部分不起作用，当我在 IE 上看到在线页面时，样式不适用。

任何提示为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:59:47.417

```
 <?php get_stylesheet_directory() ?> 
```

返回一个绝对的服务器路径；

[http://codex.wordpress.org/Function_Reference/get_stylesheet_directory](http://codex.wordpress.org/Function_Reference/get_stylesheet_directory)

将您的代码更改为；

```
 <link rel="stylesheet" href="<?php bloginfo('stylesheet_url'); ?>">
 <!--[if IE]>
    <link rel="stylesheet" href="<?php bloginfo('stylesheet_directory'); ?>/ie.css"; ?>" media="screen" type="text/css" />
 <![endif]--> 
```

它应该适合你。

# php - eBay API CompleteSale 调用多个项目

> ID：12349235
> 
> 赞同：2
> 
> 时间：2012-09-10T09:52:53.330
> 
> 标签：php, xml, ebay-api

目前我有一个系统可以从 eBay 检索订单列表（使用`GetOrders`API 调用）来进行一些处理。系统将显示订单列表供用户检查以将状态更新为已发货（使用`CompleteSale`API 调用）。

我现在遇到的问题是使用 API 更新状态的过程有点慢，因为`CompleteSale`每个订单都会调用它（可能用户检查 1000 条记录以一次将状态更新为已发货）。是否可以在一次`CompleteSale`调用中发送多个项目，或者是否有其他 API 调用能够发送？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T16:06:01.183

您只需将几个 ItemID 和 TransactionID 添加到这样的一个请求中（对于 php）

```
$item_id_1 = 1234567890;
$item_id_2 = 0987654321;
$feedback = 'Thanks for a smooth transaction!';

$transaction_id_1 = 771234567819;
$transaction_id_2 = 770987654319;

$requestXmlBody = '<?xml version="1.0" encoding="utf-8" ?>';
$requestXmlBody .= '<CompleteSaleRequest xmlns="urn:ebay:apis:eBLBaseComponents">';

$requestXmlBody .= "<ItemID>$item_id_1</ItemID>";
$requestXmlBody .= "<ItemID>$item_id_2</ItemID>";

$requestXmlBody .= "<FeedbackInfo>";
$requestXmlBody .= "<CommentText>$feedback_text</CommentText>";
$requestXmlBody .= "<CommentType>Positive</CommentType>";
$requestXmlBody .= "</FeedbackInfo>";

$requestXmlBody .= "<Shipped>true</Shipped>";
$requestXmlBody .= "<TransactionID>$transaction_id_1</TransactionID>";
$requestXmlBody .= "<TransactionID>$transaction_id_2</TransactionID>";

$requestXmlBody .= "<RequesterCredentials><eBayAuthToken>$userToken</eBayAuthToken></RequesterCredentials>";
$requestXmlBody .= '</CompleteSaleRequest>'; 
```

我认为如果您改用 orderID，它也应该有效！请注意，您不能使用多个买家用户 ID（对于收件人）。仅使用 itemID/transactionID 对。

这是基于此处提供的 eBay PHP 示例代码：

[https://ebay.custhelp.com/app/answers/detail/a_id/1876/~/getorders-php-code-sample](https://ebay.custhelp.com/app/answers/detail/a_id/1876/~/getorders-php-code-sample)

只需将呼叫更改为您需要的！

希望这可以帮助！

# php - 从登录页面后面的页面获取内容失败

> ID：12349240
> 
> 赞同：0
> 
> 时间：2012-09-10T09:53:12.540
> 
> 标签：php, curl

我正在尝试从正在登录的页面中获取内容。

我已经通过浏览器登录了，我可以通过浏览器访问页面没有问题。

但是，当我想使用 curl 或 file_get_contents 时，我会得到登录页面内容。

基本上，它重定向到登录页面。

但是，我不知道为什么我会遇到这个问题。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:04:48.647

您应该使用任何支持 cookie 和会话的 cUrl-wrapper。有了这个，您应该通过第一个请求登录到该站点，然后获取 cookies/session_id 并在第二个 cUrl-request 中使用它来获取目标页面。这是可能的算法之一。

另一种方法是在浏览器控制台（网络选项卡）中窥视 cookie 和 session_id（通常保存在 cookie 中）并将其添加到 curl 脚本的标题中。

# jakarta-ee - 如何从 Vaadin 中的 Java EE 应用程序远程查看活动日志？

> ID：12349241
> 
> 赞同：0
> 
> 时间：2012-09-10T09:53:12.837
> 
> 标签：jakarta-ee, logging, glassfish, vaadin

我想远程监控我的 Java EE 应用程序（部署在 glassfish 服务器上）的活动。基本上，我希望我的客户端使用 Vaadin 实现以显示有关服务器端活动的日志。

用户想知道服务器端发生了什么......这些日志应该只是高级信息消息

我想这真的取决于使用的日志框架（如果有的话）。我见过 log4j 的 Chainsaw 但这本身就是一个客户端。否则，我可以逐行远程读取文件（如`tail -f`）......但我也不知道该怎么做。

实现这种事情的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:26:49.347

一般来说，您可以做的只是使用 Vaadin 标签，无限读取日志文件（或更确切地说直到停止）并将文件内容附加到标签。这是一个 for 的代码，它正是这样做的：

```
 Thread t = new Thread() {
        @Override
        public void run() {

            BufferedReader reader = null;
            try {
                reader = new BufferedReader(new FileReader(LOGFILE));
                String line;
                while (running) {
                    line = reader.readLine();
                    if (line == null) {
                        // wait until there is more lines in the file
                        Thread.sleep(POLL_MS);
                    } else {
                        // append to the log Label
                        synchronized (MyApplication.this) {
                            log.setValue(log.getValue() + line + "<br />");
                        }
                    }
                }
            } catch (IOException e) {
                // TODO: handle me
                e.printStackTrace();
            } catch (InterruptedException e) {
                // TODO: handle me
                e.printStackTrace();
            } finally {
                running = false;
                if (reader != null) {
                    try {
                        reader.close();
                    } catch (IOException ignore) {
                    }
                }
            }

        }
    };
    t.start(); 
```

为此，您需要一个[“RAW”模式标签](https://vaadin.com/book/-/page/components.label.html)和一个轮询服务器的[ProgressIndicator](https://vaadin.com/book/-/page/components.progressindicator.html)：

```
 ProgressIndicator pi = new ProgressIndicator();
    pi.setPollingInterval(POLL_MS);
    pi.setIndeterminate(true);
    layout.addComponent(pi); 
```

免责声明：此代码来自非关键应用程序，例如缺少错误处理和 HTML 转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T16:57:18.013

我看到您想在您的应用程序中执行此功能。我不确定您是否可以利用 Chainsaw 在 Vaadin 中使用的部分，但如果您好奇，可以查看 VFSLogFilePatternReceiver。

无论如何，如果你想试试电锯信息，看看它是否适合你：

Chainsaw 可以从 Commons VFS 支持的一个文件系统（http、ssh、ftp、smb）读取日志文件、事件远程文件。

如果您愿意，请尝试最新的开发人员快照 - 配置屏幕有望让您清楚地了解如何跟踪日志文件，并且具有当前发布版本中不可用的大量功能。

可在此处获取快照：http: [//people.apache.org/~sdeboy](http://people.apache.org/~sdeboy)

# hibernate - 现在我在使用 resultTransformer 的相关实体属性时遇到错误

> ID：12349244
> 
> 赞同：0
> 
> 时间：2012-09-10T09:53:21.280
> 
> 标签：hibernate

假设：

```
Criteria criteria = session.createCriteria(TramiteTrafico.class);
criteria.createAlias("contrato","contrato");
criteria.createAlias("contrato.provincia","provincia"); 
```

其中 tramiteTrafico 与 contrato 相关，并且它确实具有将 contrato 对象设置为 TramiteTrafico 实体的设置器。

我正在尝试这样做：

```
proList.add(Projections.property("provincia.nombre"),"contrato.provincia.nombre"); 
```

我得到这个错误：在类 estadisticas.beans.entities.TramiteTrafico 上找不到 contrato.provincia.nombre 的设置器

如何为实体的相关属性修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T09:26:03.650

我的猜测是您使用transformers.aliastobean 投影到模型类中。但是 AliasToBean 不能像这样设置级联属性，`address.street`因为它首先不知道如何创建地址对象，并假设`address.street`在根类上有一个名称为属性的属性。

为了解决这个问题，使用扁平化的 Dto 投影或加载完整的 TramiteTrafico 对象（不要设置投影和变压器）。

# android - TextView 字体大小自动缩放

> ID：12349246
> 
> 赞同：0
> 
> 时间：2012-09-10T09:53:32.260
> 
> 标签：android, xml, layout, scale

我有布局，其中包含两部分：标题和正文。标题包含 TextView 和图像。标题高度可以通过编程方式更改。并且标题的图像和文本必须分别缩放。图像缩放可以，但文本不需要缩放。是否有可能在 Android 上以及如何做到这一点？

我的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:tools="http://schemas.android.com/tools"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="center"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/header"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        tools:ignore="UseCompoundDrawables" >

        <TextView
            android:id="@+id/title_text"
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/app_name" />

        <ImageView
            android:id="@+id/edit_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:contentDescription="@string/edit"
            android:src="@drawable/widget_edit" />
    </LinearLayout>

    <TextView
        android:id="@+id/content_text"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T09:59:06.183

我不认为这对于默认的 TextView 是可行的——至少在没有一些黑客攻击的情况下是不可行的。

我会尝试为此使用自定义 View 类，并在其 Canvas 上绘制文本。在绘图调用期间，您知道画布的确切宽度和高度，并使用适当的字体大小绘制文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:05:16.123

如果您以编程方式更改高度，您可以定义一个公式并计算文本的大小。我认为这是独特的方式。

您可以实现自定义视图并在父级高度的函数中定义大小。

存在一种单位，可以是util，sp（Scale-independent Pixels）。但这个比例与系统中设置的文本大小有关。

# c# - ASP.NET Web API 中的多个 PUT 方法

> ID：12349247
> 
> 赞同：6
> 
> 时间：2012-09-10T09:53:34.640
> 
> 标签：c#, .net, asp.net-web-api

我有一个`Groups`具有以下操作的控制器：

```
public GroupModel Get(int ID)

public GroupModel Post(CreateGroupModel model)

public void Put(PublicUpdateGroupModel model)

public void PutAddContacts(UpdateContactsModel model)

public void PutRemoveContacts(UpdateContactsModel model)

public void Delete(int ID) 
```

而我想做的是使用标准的 REST 路由来调用标准的 get、post、put、delete 方法。但如果操作名称附加到 url，请调用`PutAddContacts`and `PutRemoveContacts`，例如：

GET groups/ - 调用 Get 方法

POST 组/ - 调用 Post 方法

PUT 组/ - 调用 Put 方法

DELETE groups/ - 调用 Delete 方法

PUT 组/添加联系人 - 调用 PutAddContacts 方法

PUT groups/removecontacts - 调用 PutRemoveContacts 方法

是否可以设置路由来执行此操作，或者如果我想在我的 URL 中使用操作名称，我是否需要沿着 RPC 路由进行路由？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-10T11:58:15.483

**您现在拥有**
的 要使用上述方法，您需要使用 RPC。那是因为您的示例已经一半沉浸在 RPC 做事风格中。默认的 WebAPI 路由鼓励 RESTful 设置，但是如果您对路由进行了微小的更改，一切都会开始工作。例如，您可以将默认路由更改为典型的 MVC 路由：

```
routes.MapRoute( name    : "Default",       
                 url     : "{controller}/{action}/{id}",
                 defaults: new { controller = "Home", 
                                 action     = "Index", 
                                 id         = UrlParameter.Optional }); 
```

添加路由后，以典型的 MVC 方式调用事物，使用控制器名称和操作。然而，从你的问题来看，我怀疑你实际上想要成为 RESTful，而不是让它工作，所以请继续阅读......

**成为 RESTful**
REST[不需要 HTTP](http://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven)，尽管这两者经常一起讨论。REST 实际上是关于具有语义准确表示的每个资源。使用 HTTP 时，这意味着尊重 HTTP 语义的唯一 URI。例如，使用 HTTP GET 的调用不应该修改数据，因为这违反了 HTTP 对 GET 的定义，并混淆了缓存等 HTTP 基础设施。

**POST/PUT 与 MERGE/PATCH**
我们都熟悉 GET、POST、PUT、HEAD 等 HTTP 方法。*通常*，GET 用于检索，POST 用于添加，PUT 用于修改（尽管有很多争论）。但是，您有两种类型的修改：添加项目和从集合中删除项目。那么这些都是 PUT 还是其他？社区[还没有完全确定](http://www.dehora.net/journal/2009/02/03/just-use-post/)如何做到这一点。

*   *选项 1：自定义媒体类型* - HTTP 规范确实允许各种方法，是浏览器真正将我们限制在熟悉的子集中。因此，您可以创建[MERGE（一种 Roy Fielding 解决方法）或 PATCH（一种 oData 解决方法）](https://stackoverflow.com/questions/2443324/best-practice-for-partial-updates-in-a-restful-service)方法并定义这种新媒体类型的行为——可能一个用于添加，一个用于删除。

*   *选项 2：使用 POST/PUT* - 使用 PUT 添加和删除联系人。只需将 ID 列表视为切换（如果存在，则删除，如果缺少添加）或交替包含足够的信息以知道该做什么。然后返回一个 HTTP 303 向客户端指示它具有陈旧状态并刷新。

*   *选项 3：完整列表*- 如果您的集合大小合理，您可以在每次想要更新时传递完整的联系人列表。这种方式的逻辑是一个超级简单的擦除和替换。

从 RESTful 的角度来看，真正重要的是您的应用程序在所有方法中都以一致的方式运行。因此，如果 MERGE 意味着添加，它应该始终意味着添加。如果您希望将一组完整的 ID 传递给 PUT，则始终传递一组完整的 ID。

**控制器设计**
如果是我，我会把你的控制器分成多个控制器。一个控制器处理组，另一个处理联系人（作为一个组），第三个处理组内的一个联系人。就像是 ...

```
//api/Group/
public List<GroupModel> Get()
public GroupModel Get(int ID)
public GroupModel Post(GroupModel model)  //add a group
public GroupModel Put(GroupModel model)   //update a group (see comments above)
public void Delete(int ID)

//api/GroupContacts/
public ContactsModel Get()                    //gets complete list
public void PostContacts(ContactsModel model) //pushes a COMPLETE new state
public void Delete()                          //delete entire group of contacts

//api/GroupContact/354/
public ContactModel Get(int id)             //get contact id #354
public void PostContact(ContactModel model) //add contact (overwrite if exits)
public void Delete(int id)                  //delete contact if exists 
```

如果您希望您的 URL 显示为嵌套的（例如：`/api/Group/Contacts`、、`/api/Group/Contact`），您可以查看[我写的其他帖子](https://stackoverflow.com/a/10471854/215068)。恕我直言，asp.net 的路由需要调整以更轻松地支持嵌套......但这是一个不同的问题；-)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T15:08:21.663

呼应 EBarr 所说的，在 Web API 中进行分层路由可能有点痛苦。我在我的服务中经常使用它，所以我为 Web API 构建了一个替代路由服务。Nuget 在[这里](http://nuget.org/packages/Tavis.ApiRouter)，源代码在[GitHub 上](https://github.com/tavis-software/ApiRouter)

这种路由方法要求您将 URI 命名空间构建为路径段的层次结构。不是将完整的 URI 模式与控制器匹配，而是将控制器附加到路径段树中的任意点。

只是为了让您了解它的外观，我创建了一个小型自托管示例，其 URI 与您尝试做的类似：

```
internal class Program
{
   private static void Main(string[] args)
   {
    var baseAddress = new Uri("http://oak:8700/");

    var configuration = new HttpSelfHostConfiguration(baseAddress);
    var router = new ApiRouter("api", baseAddress);

    // /api/Contacts
    router.Add("Contacts", rcs => rcs.To<ContactsController>());

    // /api/Contact/{contactid}
    router.Add("Contact", rc =>
                          rc.Add("{contactid}", rci => rci.To<ContactController>()));

    // /api/Group/{groupid}
    // /api/Group/{groupid}/Contacts
    router.Add("Group", rg =>
                        rg.Add("{groupid}", rgi => rgi.To<GroupController>() 
                                                       .Add("Contacts", rgc => rgc.To<GroupContactsController>())));

    configuration.MessageHandlers.Add(router);

    var host = new HttpSelfHostServer(configuration);
    host.OpenAsync().Wait();

    Console.WriteLine("Host open.  Hit enter to exit...");

    Console.Read();

    host.CloseAsync().Wait();
  }
}

public class GroupController : TestController { }
public class ContactsController : TestController { }
public class ContactController : TestController { }
public class GroupContactsController : TestController { }

public class TestController : ApiController
{
    public HttpResponseMessage Get()
    {
        var pathRouteData = (PathRouteData) Request.GetRouteData();

        var paramvalues = new StringBuilder();

        foreach (KeyValuePair<string, object> keyValuePair in pathRouteData.Values)
        {
            paramvalues.Append(keyValuePair.Key);
            paramvalues.Append(" = ");
            paramvalues.Append(keyValuePair.Value);
            paramvalues.Append(Environment.NewLine);
        }

        var url = pathRouteData.RootRouter.GetUrlForController(this.GetType());

        return new HttpResponseMessage()
                   {
                       Content = new StringContent("Response from " + this.GetType().Name + Environment.NewLine
                                                   + "Url: " + url.AbsoluteUri
                                                   + "Parameters: " + Environment.NewLine
                                                   + paramvalues.ToString())
                   };
    }
} 
```

您应该能够将此代码粘贴到控制台应用程序中并添加对 Microsoft.AspNet.WebApi.SelfHost 和 Tavis.WebApiRouter nuget 的引用并尝试一下。如果您对这种路由能走多远感到好奇，这里有一个更复杂的[示例](https://github.com/tavis-software/ApiRouter/blob/master/src/GitHubApi/GitHubApiRouter.cs)。

# user-interface - 图表加载时显示 HighCharts 工具提示

> ID：12349249
> 
> 赞同：3
> 
> 时间：2012-09-10T09:53:36.823
> 
> 标签：user-interface, highcharts

我正在唱 Highcharts 来显示年份与贷款保费金额的对比。当用户将鼠标悬停在图表区域时，我会显示十字准线和工具提示。但是，我想在图表最初加载时显示这一点（没有/在移动鼠标之前）。有没有办法做到这一点？为了使工具提示具有粘性，我使用了下面的代码并且它可以工作（IE8 除外）。同样，寻找在加载时显示它。

```
chart.tooltip.hide = function () { }; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-10T10:44:43.033

使用您希望在加载时显示工具提示的点刷新工具提示

```
chart.tooltip.refresh(chart.series[1].points[2]);

// If the tooltip.shared=true, the parameter is array of points
chart.tooltip.refresh([chart.series[1].points[2]]); 
```

[在加载时显示工具提示@jsFiddle](http://jsfiddle.net/jugal/t9hf1j46/)

阅读更多 @[自定义 Highcharts - 工具提示可见性](http://ahumbleopinion.com/customizing-highcharts-tooltip-visibility/)

# node.js - 通过 IP 地址限制对基于 Node.js 的 HTTP 服务器的访问

> ID：12349251
> 
> 赞同：27
> 
> 时间：2012-09-10T09:53:39.697
> 
> 标签：node.js

如何在 Node.js HTTP 服务器应用程序中通过 IP 地址限制访问？

我正在寻找这样的东西：

```
Deny from all
Allow from .. 
```

我只需要允许几个 IP 地址访问该站点。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-10T10:07:21.970

我不确定这种方法有多防弹，但这里是从网络上收集的答案：

```
var http = require('http');
http.createServer(function (req, res)
{
    var ip = req.ip || req.connection.remoteAddress || req.socket.remoteAddress || req.connection.socket.remoteAddress;
    if (ip == '127.0.0.1') // exit if it's a particular ip
        res.end();
... 
```

请更精通节点的人-纠正我

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-09-01T23:10:15.980

如果您通过**网络地址**限制对**整个服务器**的访问，最好将这些规则放在防火墙中。如果您出于某种原因（易于配置、动态授权等）想在应用层处理它，那么最好在连接时立即执行此操作，而不是等待 HTTP 请求。

 **Node.js 的[http.Server 发出一个`connection`事件](http://nodejs.org/api/http.html#http_event_connection)，您可以使用它来确定远程地址并在实际 HTTP 请求之前（或期间）终止连接。此代码未经测试，但应该可以帮助您入门：

```
var server = http.createServer(function (req, res) {
  // Your normal request handling goes here
});

server.on('connection', function (sock) {
  console.log(sock.remoteAddress);
  // Put your logic for what to do next based on that remote address here
});

server.listen(80); 
```**

# r - 从R中的数据框中提取特定行

> ID：12349252
> 
> 赞同：0
> 
> 时间：2012-09-10T09:53:45.410
> 
> 标签：r, extract

*我在名为original*的制表符分隔的文本文件中有以下类似数据

 *```
Name     Symbol       Value
abcd       A            56   
de45       C            67
ji98       H            90
k9ug       K            43
phzt       L            98
prex       P            21
kadf       T            32 
```

*我也有存储在另一个名为重复*的制表符分隔的文本文件中的选定符号列表

 *```
Symbol     Description
 K            Intel
 P            Diary
 C            Cape
 S            Sheath
 A            Aim 
```

我想从具有相同 Symbol 和*duplicate的**原始*文件中提取行。我希望我的输出如下：

 *```
Name     Symbol       Value
abcd       A            56   
de45       C            67
k9ug       K            43
prex       P            21 
```

我尝试使用以下代码，但有些我无法获得任何结果或只有*A*行。这是我使用过的代码

```
result <- original[original$Symbol %in% duplicate$Symbol,] 
```

谁能帮帮我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T10:02:55.157

这可以通过简单的方式完成`merge`：

```
merge(original, duplicate, by.x="Symbol", by.y="symbol")
#   Symbol Name Value Description
# 1      A abcd    56         Aim
# 2      C de45    67        Cape
# 3      K k9ug    43       Intel
# 4      P prex    21       Diary 
```

`Description`如果不相关，您可以在合并之前或之后手动删除列。

另外，我不知道这是发布的问题的问题，还是您的代码有问题，但是：

```
original[original$Symbol %in% duplicate$symbol, ]
#   Name Symbol Value
# 1 abcd      A    56
# 2 de45      C    67
# 4 k9ug      K    43
# 6 prex      P    21 
```

当然，您必须`original`正确拼写，而您没有！

### 假设

1.  单词“symbol”的正确大小写`names(original)`显示为大写的 S ( `Symbol`)。
2.  单词“symbol”的正确大小写`names(duplicate)`以小写的 s ( `symbol`) 显示。

如果两者都大写，那么您可以使用以下任一解决方案：

```
merge(original, duplicate)
original[original$Symbol %in% duplicate$Symbol, ] 
```***

# ios - ios 弹出 [WEPopoverController] 崩溃

> ID：12349253
> 
> 赞同：-1
> 
> 时间：2012-09-10T09:53:47.557
> 
> 标签：ios, memory-management, uipopovercontroller

我在我的应用程序 WEPopoverController 中显示一个弹出窗口，

它在用户点击按钮后出现和消失，

它有时可以正常工作，但有时它会崩溃，比如如果我打开 i 并关闭它很多次它会崩溃，所以我不知道我在这个对象的内存管理中缺少什么，

```
- (void)showPopOver 
{

    if(!self.navPopover) {
          CGRect frame ;
        frame = CGRectMake(0, 0, 270, 132);

        UIViewController *viewCon = [[UIViewController alloc] init];

         viewCon.contentSizeForViewInPopover = frame.size;

        self.navPopover = [[WEPopoverController alloc] initWithContentViewController: viewCon];

        [self.navPopover setDelegate:self];

    } 

    if([self.navPopover isPopoverVisible]) {
        [self.navPopover dismissPopoverAnimated:YES];
        [self.navPopover setDelegate:nil];
        //[self.navPopover autorelease];
        self.navPopover = nil;

        [self.navPopover release];

        //[_navPopover release];
         NSLog(@"sconda");
    } else if (![self.navPopover isPopoverVisible]){

        [self.navPopover presentPopoverFromRect:CGRectMake(134,440, 50, 96)

                                         inView:self.view
                       permittedArrowDirections: UIPopoverArrowDirectionDown

        animated:YES];

        NSLog(@"tanga");
    }

} 
```

多谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:40:33.860

回复：内存管理，这肯定是错误的：

```
self.navPopover = nil; 
[self.navPopover release]; 
```

通过 niling 指针，您不会释放对象。颠倒这些代码行的顺序

```
[self.navPopover release]; 
self.navPopover = nil; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:17:12.230

你有 DidDismissPopover 吗？

```
 - (void)popoverControllerDidDismissPopover:(UIPopoverController *)popoverController {
self.navPopover = nil;
} 
```

你应该以这种方式解雇而不是在 showPopover 上解雇

啊，不要在这里发布

```
 [self.navPopover release];
 NSLog(@"sconda"); 
```

# jsf - 有条件渲染的输入组件不更新值

> ID：12349255
> 
> 赞同：4
> 
> 时间：2012-09-10T09:53:50.247
> 
> 标签：jsf, jsf-2, primefaces

使用 jsf 2 和 Primefaces 3.4

我知道有很多类似的问题，但没有一个可以解决这个问题。

当 panelGrid "inner" 以**"true"** ( `<h:panelGrid id="inner" rendered="true">`) => 的固定值呈现时，在单击命令按钮后，输入组件会**正确更新**#{tableMatchesBean.mergedAuthorAjax} 的值，

但是当这个面板的呈现是**有条件**的时：`<h:panelGrid rendered="#{spellCheckBean.renderInputMerge}">` => 然后输入组件是**静默**的（没有跟踪 tableMatchesBean.mergedAuthorAjax 已被调用）。

注意：我使用嵌套的 panelGrids 将渲染条件放在需要条件渲染的组件（输出和输入组件）的父元素中。任何帮助表示赞赏。

[评论后编辑：] **xhtml 页面的作用：**
- 当用户单击 selectOnebutton 中的“合并”选项时，ajax 更新将“renderInputMerge”切换为 true，从而显示“外部”组件。它工作正常。在这个组件中，有一个输入字段，显示OK。
- 用户单击 commandLink 按钮后，我需要检索此输入字段的值。如上所述，我对此有疑问。

xhtml：

```
<h:body style ="width:100%">

    <h:form id = "currMatch">

        <h:panelGrid>

            <p:selectOneButton id ="selection" value="#{spellCheckBean.optionChosen}">
                <f:selectItem itemLabel="keep both" itemValue="1" />
                <f:selectItem itemLabel="delete both" itemValue="2" />
                <f:selectItem itemLabel="merge" itemValue="3" />
                <p:ajax update="outer" />
            </p:selectOneButton>

        </h:panelGrid>

         <h:panelGrid id="outer" >
            <h:panelGrid id="inner" rendered="#{spellCheckBean.renderInputMerge}">
            <!-- **the line above does not update**, this one does    <h:panelGrid rendered="true">-->

                <h:outputText value="our suggestion:  "  style ="margin-left: auto; margin-right: auto"/> 
                     <h:inputText id ="testinput" value="#{tableMatchesBean.mergedAuthorAjax}">
                     </h:inputText>
                </h:panelGrid>    
        </h:panelGrid>

        <p:commandButton action="#{tableMatchesBean.next_()}" 
                         title="Add"
                         value="next"
                         update ="currMatch"
                         >

        </p:commandButton>

    </h:form>
</h:body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T11:02:34.457

您的`rendered`条件显然取决于请求范围的变量，例如请求范围的托管 bean 的属性或请求参数。表单提交帐户作为一个完全独立的全新请求，其中所有请求范围的托管 bean 都是新重新创建的，所有属性都设置为默认值。如果该`rendered`属性`false`在收集提交的值期间评估为（表单提交的应用请求值阶段），那么它们根本不会被收集。

基本上有两种方法可以解决这个问题：

1.  确保`rendered`属性背后的条件在请求范围 bean 的 (post) 构造函数中正确预初始化，以便它在处理表单提交的请求期间返回与将表单显示到请求期间完全相同的值最终用户。

2.  而是将 bean 放在视图范围内。这样，只要您通过 ajax 或通过 return `void`or `null`in action 方法与同一视图交互，bean 实例就会存在。

### 也可以看看：

*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)（第 5 点适用于您）。
*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/7031941#7031941)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-09-25T10:56:33.637

尝试 jstl`c:if` 标记代替`rendered`. 这对我行得通。

# objective-c - 根据objective-c中实现的类别调用特定实用程序方法的替代设计

> ID：12349256
> 
> 赞同：0
> 
> 时间：2012-09-10T09:53:56.683
> 
> 标签：objective-c, objective-c-category

我正在使用类别向我的班级添加功能。但是，我想在主类中共享一个通用方法，如果调用该方法，它将调用特定的类别方法。

我解释得更好，假设我有两个类别。

```
@interface MyClass(CategoryA) 

-(void)specificCategoryA;

@end

@interface MyClass(CategoryB) 

-(void)specificCategoryB;

@end 
```

然后，在我的主要课程中，我想拥有：

```
@implementation MyClass

    -(void)utilityMethod {

      // choose one of the two...
      // -(void)specificCategoryB;
      // -(void)specificCategoryA;

    }

@end 
```

我知道上面做不到，从某种意义上说，类别不能自省，所以我正在寻找另一种方法。对于我正在开发的应用程序，可以在编译时解决这个问题，但我愿意接受任何建议。我也试图覆盖一个通用方法名称，但我显然得到了警告

> 类别正在实现一个方法，该方法也将由其主类实现

这并不意味着事情不会起作用，但我不想使用类别作为继承。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:50:32.227

如果是编译时决定，您可以使用预处理器

```
#if some-constant-condition
  [mc specificCategoryA];
#else
  [mc specificCategoryB];
#endif 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:30:03.520

```
if ([object respondsToSelector:@selector(specificCategoryA)]) {
   [object specificCategoryA];
}
else if ([object respondsToSelector:@selector(specificCategoryB)]) {
   [object specificCategoryB];
} 
```

但是，在我看来，您的设计存在问题 - 预处理器不是更好吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:25:31.003

不太确定你的问题是为什么你不能使用 if 语句两个选择调用哪个方法。

此外，您正在尝试做的事情看起来您可以使用实现通用实用程序方法代码的抽象基类，然后有两个覆盖实用程序方法的子类，例如

```
-(void)utilityMethod
{
    [super utilityMethod];
    // subclass specific code.
} 
```

然后让您的子类在另一个子类的一个子类 specificCategoryB 逻辑中实现 specificCategoryA 逻辑。

您可以通过将 MyClass 实现为 Cluster 类来隐藏子类的使用。您的 MyClass 的 init 方法释放创建的对象，然后根据您的条件创建一个子类，或者您可以创建一个 Class 方法，为您创建一个初始化 MyClass 的子类。用户不需要知道它是哪个子类，它只是某种 MyClass。

# java - 使用 Gson 解析嵌套的 json 字符串

> ID：12349263
> 
> 赞同：3
> 
> 时间：2012-09-10T09:54:50.803
> 
> 标签：java, json, gson

```
[{"body":"{\"id\":\"act_105099966308460\",\"account_id\":105099966308460,\"name\":\"\",\"account_status\":2,\"currency\":\"USD\",\"timezone_id\":1,\"timezone_name\":\"America\\\/Los_Angeles\",\"timezone_offset_hours_utc\":-7,\"is_personal\":0,\"business_name\":\"\",\"business_street\":\"44916
Winding
Lane\",\"business_street2\":\"\",\"business_city\":\"Fremont\",\"business_state\":\"CA\",\"business_zip\":\"94539\",\"business_country_code\":\"US\",\"vat_status\":0,\"daily_spend_limit\":25000,\"users\":[{\"uid\":100004253709632,\"permissions\":[1,2,3,4,5,7],\"role\":1001}],\"notification_settings\":{\"100004253709632\":{\"1000\":{\"1\":1},\"1001\":{\"1\":1},\"1002\":{\"1\":1,\"2\":60},\"1003\":{\"1\":1,\"2\":60},\"1004\":{\"1\":1},\"1005\":{\"1\":1},\"1006\":{\"1\":1},\"1009\":{\"1\":1},\"1010\":{\"1\":1},\"1011\":{\"1\":1},\"2000\":{\"1\":1,\"2\":60},\"2001\":{\"1\":1,\"2\":60},\"2002\":{\"2\":60},\"2003\":{\"1\":1,\"2\":60},\"2004\":{\"1\":1,\"2\":60},\"2005\":{\"1\":1,\"2\":60},\"3000\":{\"1\":1,\"2\":60},\"3001\":{\"1\":1,\"2\":60},\"3002\":{\"2\":60},\"3003\":{\"2\":60},\"5000\":{\"1\":1},\"6000\":{\"1\":1},\"6001\":{\"1\":1},\"9000\":{\"1\":1,\"2\":60},\"8000\":{\"1\":1,\"2\":60}}},\"account_groups\":[{\"account_group_id\":344615332296926,\"name\":\"my
test
group\",\"status\":1},{\"account_group_id\":218621204934411,\"name\":\"inmobi
Ads
group\",\"status\":1},{\"account_group_id\":267052626739836,\"name\":\"Test
ad account
group1\",\"status\":1}],\"capabilities\":[2],\"balance\":0,\"moo_default_conversion_bid\":1000,\"amount_spent\":0}"}] 
```

我想将此字符串解析为对象，但它失败了。Pojo 和我正在使用的代码：

```
Type listType = new TypeToken<List<BatchAccounts>>(){}.getType();

Gson gson = new Gson();

List<BatchAccounts> results = gson.fromJson(response1, listType);

public class BatchAccounts
{
    private Account body;

    public Account getBody()
    {
        return body;
    }

}

public class Account
{

    private String id;

    private String account_id;

    public String getId()
    {
        return id;
    }

    public String getAccount_id()
    {
        return account_id;
    }

} 
```

例外：

```
线程“main” com.google.gson.JsonParseException 中的异常：找到预期对象：“{\”id\”：\“act_105099966308460\”，\“account_id\”：105099966308460，\“name\”：\“\” ,\"account_status\":2,\"currency\":\"USD\",\"timezone_id\":1,\"timezone_name\":\"America\\/Los_Angeles\",\"timezone_offset_hours_utc\" :-7,\"is_personal\":0,\"business_name\":\"\",\"business_street\":\"44916 Winding Lane\",\"business_street2\":\"\",\" business_city\":\"Fremont\",\"business_state\":\"CA\",\"business_zip\":\"94539\",\"business_country_code\":\"US\",\"vat_status\ ":0,\"daily_spend_limit\":25000,\"users\":[{\"uid\":100004253709632,\"permissions\":[1,2,3,4,5,7],\"role\":1001} ],\"notification_settings\":{\"100004253709632\":{\"1000\":{\"1\":1},\"1001\":{\"1\":1},\" 1002\":{\"1\":1,\"2\":60},\"1003\":{\"1\":1,\"2\":60},\"1004\ ":{\"1\":1},\"1005\":{\"1\":1},\"1006\":{\"1\":1},\"1009\": {\"1\":1},\"1010\":{\"1\":1},\"1011\":{\"1\":1},\"2000\":{\ "1\":1,\"2\":60},\"2001\":{\"1\":1,\"2\":60},\"2002\":{\"2 \":60},\"2003\":{\"1\":1,\"2\":60},\"2004\":{\"1\":1,\"2\":60},\"2005\":{\"1\":1,\"2\":60} ,\"3000\":{\"1\":1,\"2\":60},\"3001\":{\"1\":1,\"2\":60},\ "3002\":{\"2\":60},\"3003\":{\"2\":60},\"5000\":{\"1\":1},\"6000 \":{\"1\":1},\"6001\":{\"1\":1},\"9000\":{\"1\":1,\"2\": 60},\"8000\":{\"1\":1,\"2\":60}}},\"account_groups\":[{\"account_group_id\":344615332296926,\"name\" :\"我的测试组\",\"status\":1},{\"account_group_id\":218621204934411,\"name\":\"inmobi Ads group\",\"status\":1}, {\"account_group_id\":267052626739836,\"name\":\"Test ad account group1\",\"status\":1}],\"capabilities\":[2],\"balance\":0,\"moo_default_conversion_bid\" :1000,\"amount_spent\":0}"
    在 com.google.gson.JsonObjectDeserializationVisitor.visitFieldUsingCustomHandler(JsonObjectDeserializationVisitor.java:100)
    在 com.google.gson.ReflectingFieldNavigator.visitFieldsReflectively（ReflectingFieldNavigator.java:63）
    在 com.google.gson.ObjectNavigator.accept(ObjectNavigator.java:120)
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:25:15.353

由于您在另一个 JSON 对象中嵌套了一个 JSON 字符串，因此您需要两个解析步骤来解析此结构，如下所示：

```
Gson gson = new Gson();

List<BodyHolder> bodies = gson.fromJson(response1, 
   new TypeToken<List<BodyHolder>>() {}.getType());

List<BatchAccounts> result = new ArrayList<BatchAccounts>(bodies.size());
for (BodyHolder holder: bodies) {
    BatchAccounts a = new BatchAccounts();
    a.setBody(gson.fromJson(holder.getBody(), Account.class);
    result.add(a);
}

public class BodyHolder
{
    private String body;
    ...    
} 
```

您也可以将第二步实现为自定义[`JsonDeserializer`](http://google-gson.googlecode.com/svn/trunk/gson/docs/javadocs/com/google/gson/JsonDeserializer.html).

# mdx - MDX 从顶部查询第 N、N+1 条记录

> ID：12349264
> 
> 赞同：1
> 
> 时间：2012-09-10T09:54:59.793
> 
> 标签：mdx

我想构建一个 MDX 查询，以便从结果集中从顶部获取第 6 到第 10 条记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:27:32.640

您可以使用[子集](http://msdn.microsoft.com/en-us/library/ms144767)：

```
Subset('your set', 5, 5) 
```

# java - 使用 HTTPUrlConnection 时如何保留 cookie？

> ID：12349266
> 
> 赞同：27
> 
> 时间：2012-09-10T09:55:15.897
> 
> 标签：java, android, cookies, httpurlconnection

我已经开始使用推荐`HTTPUrlConnection`并远离`DefaultHTTPClient`. 我无法重新组合在一起的一件事是使用持久性 cookie 存储。我想简单地将自定义 cookie 处理程序/管理器附加到我的连接以存储 cookie。Android 文档并不是很有帮助，因为它将有关 cookie 的主题包含在两行中。

我之前一直在使用 LoopJ `PersistentCookieStore`，效果很好。

关于如何在 Android 中设置持久性 cookie 存储的任何想法，我可以将其附加到我`HTTPUrlConnection`的自动保存和检索 cookie 上？

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-10T13:37:13.550

Its' taken me a few hours but I managed to build a custom cookie storage myself.

You have to attach this by doing this:

```
public class application extends Application {
    @Override
    public void onCreate() {
        super.onCreate();
       CookieManager cmrCookieMan = new CookieManager(new MyCookieStore(this.objContext), CookiePolicy.ACCEPT_ALL);
       CookieHandler.setDefault(cmrCookieMan);
       }
    } 
```

Here's the actual storage:

```
/*
 * This is a custom cookie storage for the application. This
 * will store all the cookies to the shared preferences so that it persists
 * across application restarts.
 */
class MyCookieStore implements CookieStore {

    /*
     * The memory storage of the cookies
     */
    private Map<URI, List<HttpCookie>> mapCookies = new HashMap<URI, List<HttpCookie>>();
    /*
     * The instance of the shared preferences
     */
    private final SharedPreferences spePreferences;

    /*
     * @see java.net.CookieStore#add(java.net.URI, java.net.HttpCookie)
     */
    public void add(URI uri, HttpCookie cookie) {

        System.out.println("add");
        System.out.println(cookie.toString());

        List<HttpCookie> cookies = mapCookies.get(uri);
        if (cookies == null) {
            cookies = new ArrayList<HttpCookie>();
            mapCookies.put(uri, cookies);
        }
        cookies.add(cookie);

        Editor ediWriter = spePreferences.edit();
        HashSet<String> setCookies = new HashSet<String>();
        setCookies.add(cookie.toString());
        ediWriter.putStringSet(uri.toString(), spePreferences.getStringSet(uri.toString(), setCookies));
        ediWriter.commit();

    }

   /*
    * Constructor
    * 
    * @param  ctxContext the context of the Activity
    */
    @SuppressWarnings("unchecked")
    public MyCookieStore(Context ctxContext) {

        spePreferences = ctxContext.getSharedPreferences("CookiePrefsFile", 0);
        Map<String, ?> prefsMap = spePreferences.getAll();

        for(Map.Entry<String, ?> entry : prefsMap.entrySet()) {

            for (String strCookie : (HashSet<String>) entry.getValue()) {

                if (!mapCookies.containsKey(entry.getKey())) {

                    List<HttpCookie> lstCookies = new ArrayList<HttpCookie>();
                    lstCookies.addAll(HttpCookie.parse(strCookie));

                    try {

                        mapCookies.put(new URI(entry.getKey()), lstCookies);

                    } catch (URISyntaxException e) {

                        e.printStackTrace();

                    }

                } else {

                    List<HttpCookie> lstCookies = mapCookies.get(entry.getKey());
                    lstCookies.addAll(HttpCookie.parse(strCookie));

                    try {

                        mapCookies.put(new URI(entry.getKey()), lstCookies);

                    } catch (URISyntaxException e) {

                        e.printStackTrace();

                    }

                }

                System.out.println(entry.getKey() + ": " + strCookie);

            }

        }

    }

    /*
     * @see java.net.CookieStore#get(java.net.URI)
     */
    public List<HttpCookie> get(URI uri) {

        List<HttpCookie> lstCookies = mapCookies.get(uri);

        if (lstCookies == null)
            mapCookies.put(uri, new ArrayList<HttpCookie>());

        return mapCookies.get(uri);

    }

    /*
     * @see java.net.CookieStore#removeAll()
     */
    public boolean removeAll() {

        mapCookies.clear();
        return true;

    }        

    /*
     * @see java.net.CookieStore#getCookies()
     */
    public List<HttpCookie> getCookies() {

        Collection<List<HttpCookie>> values = mapCookies.values();

        List<HttpCookie> result = new ArrayList<HttpCookie>();
        for (List<HttpCookie> value : values) {                
            result.addAll(value);                
        }

        return result;

    }

    /*
     * @see java.net.CookieStore#getURIs()
     */
    public List<URI> getURIs() {

        Set<URI> keys = mapCookies.keySet();
        return new ArrayList<URI>(keys);

    }

    /*
     * @see java.net.CookieStore#remove(java.net.URI, java.net.HttpCookie)
     */
    public boolean remove(URI uri, HttpCookie cookie) {

        List<HttpCookie> lstCookies = mapCookies.get(uri);

        if (lstCookies == null)
            return false;

        return lstCookies.remove(cookie);

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-20T14:27:54.313

`CookieStore`许多自定义实现中存在一些基本问题。

第一个问题是`HttpCookie`序列化为字符串 - 该`HttpCookie.toString()`方法不可接受，因为它的结果不适合该`HttpCookie.parse(String header)`方法。

第二个问题：大多数`CookieStore`实现（例如，[here](https://codereview.stackexchange.com/questions/61494/persistent-cookie-support-using-volley-and-httpurlconnection)）没有考虑`HttpCookie.maxAge`字段的格式。这是 cookie live 的秒数。但是如果你只是坚持它的价值，一段时间后又不坚持它，那就错了。您必须将`maxAge`field 转换为类似的`"expire_at"`内容并将其持久化，而不是`maxAge`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-09T19:07:07.723

我使用了上面的答案，但将我的 add 方法更改为以下方法以处理来自同一 URI 的多个 cookie（这个带有 GAE 的 cookie 存储将会话令牌和记忆令牌视为来自同一 URI 的两个单独的 cookie 出于某种原因） ：

```
public void add(URI uri, HttpCookie cookie) {

    List<HttpCookie> cookies = mapCookies.get(uri);
    if (cookies == null) {
        cookies = new ArrayList<HttpCookie>();
        mapCookies.put(uri, cookies);
    }
    cookies.add(cookie);

    Editor ediWriter = spePreferences.edit();
    HashSet<String> setCookies = new HashSet<String>();
    setCookies.add(cookie.toString());
    HashSet<String> emptyCookieSet = new HashSet<String>();
    if(spePreferences.contains(uri.toString())){
        emptyCookieSet = (HashSet<String>) spePreferences.getStringSet(uri.toString(), emptyCookieSet);
        if(!emptyCookieSet.isEmpty()){
            if(!emptyCookieSet.contains(cookie.toString())){
            emptyCookieSet.add(cookie.toString());
            ediWriter.putStringSet(uri.toString(), emptyCookieSet);
            }
        }
    }
    else{
        ediWriter.putStringSet(uri.toString(), setCookies);
    }
    ediWriter.commit();
} 
```

并访问和创建组合 cookie：

```
MyCookieStore store = new MyCookieStore(this.context, false);
String cookie = TextUtils.join(",", store.get(new URI(URLString))); 
```

附加到连接：

```
URL urlToRequest = new URL(stringPath);
HttpURLConnection urlConnection = (HttpURLConnection) urlToRequest.openConnection();
urlConnection.setRequestProperty("Cookie", cookie); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-31T08:32:55.717

在下面的链接中检查实现。它像原来的 java.net.InMemoryCookieStore 实现一样按主机名保存 cookie。

除此之外，它还包含一个 SerializableHttpCookie，以便能够将完整的 HashMap 序列化为 SharedPreferences。

[https://gist.github.com/jacobtabak/78e226673d5a6a4c4367](https://gist.github.com/jacobtabak/78e226673d5a6a4c4367)

# javascript - 使用 Rhino 和 ASE 执行 Javascript 的区别

> ID：12349271
> 
> 赞同：0
> 
> 时间：2012-09-10T09:55:33.287
> 
> 标签：javascript, android, rhino, ase

用 Rhino 执行 JS 和用 ASE（Android 脚本环境）执行有什么区别？任何人都可以帮助我吗？提前致谢！

使用 Rhino 执行的代码片段：

```
bar();
function bar() {
 var a=20; var b=30; var c = 40;
 average = (a+b+c)/3; 
out.println(average);
} 
```

使用 ASE 执行的代码片段（来自 ASE 网站）：

```
load("/sdcard/com.googlecode.rhinoforandroid/extras/rhino/android.js");
var droid = new Android();
droid.makeToast("Hello, Android!"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:42:33.623

II 选项表示我们正在 Android 手机中执行脚本（使用 SL4A 库）。而第一个选项只是在控制台上打印输出。我们在手机或模拟器中看不到任何输出

# extjs - ExtJS propertygrid 可调整大小的列？

> ID：12349273
> 
> 赞同：5
> 
> 时间：2012-09-10T09:55:52.727
> 
> 标签：extjs, properties, header, resize, grid

我希望用户能够调整我的属性网格的值列的大小，但设置不成功。尝试了我想到的各种网格列属性，例如：

```
fixed: false,
resizable: true 
```

- 他们不工作。谷歌搜索但没有找到与我的问题相关的任何内容。我只能在 afterrender 监听器中使用以下代码以编程方式调整它的大小：

```
this.columns[0].setWidth(160); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T08:34:00.860

尝试使用这个。这对我有用：

```
Ext.require('Ext.grid.property.HeaderContainer', function(){
    Ext.override(Ext.grid.property.HeaderContainer, {
        constructor: function() {
            //enable resizing
            this.enableColumnResize = true;
            this.callParent(arguments);
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T17:17:30.800

正确的配置似乎是[`enableColumnResize: true`](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.grid.property.Grid-cfg-enableColumnResize)，但在我的简短测试中，它似乎并没有改变行为。事实上，该配置被记录为默认为`true`，这意味着默认情况下它不起作用。我认为这可能是 Ext 中的一个错误，所以如果你不能让它工作，你可能想在[Sencha 论坛上](http://www.sencha.com/forum/)跟进。

# c++ - 在 POSIX 中，我可以保存信号以供调用条件等待的其他线程使用。（这些线程来自同一进程）

> ID：12349276
> 
> 赞同：1
> 
> 时间：2012-09-10T09:55:57.263
> 
> 标签：c++, multithreading, unix, posix

POSIX 线程：我有两个使用两个不同线程调用的函数。在线程中正在使用条件等待，而在其他正在发送信号条件。由于任何线程都可以提前执行，因此即使未调用 wait 也可以发送信号。我想保存已发送的信号，以便在调用 wait 时同一进程的其他线程可以使用之前调用的信号。在POSIX中有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:14:42.367

如果没有服务员，POSIX 条件变量信号会丢失。此外，虚假信号可能会提前结束等待。这就是为什么人们应该总是在循环中等待状态变化`while`，而不是单独等待条件变量信号。

对于您的特定任务，您可能可以使用[信号量之](https://stackoverflow.com/a/4793662/412080)类的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T17:54:30.753

仅等待条件不足以同步线程。正如 Maxim 已经说过的，信号可能会丢失或无故发送。

您需要在线程之间传递其他信息。这通常通过队列来完成。但在简单的情况下，当只需要一个触发器时，一个`int`as 计数器可能就足够了。

大概是这样的：

**发件人：**

```
get_lock();
counter++;
release_lock(); 
```

**接收者：**

```
while(1){
  get_lock();
  while(counter==0)
     wait_on_lock();
  counter--;
  release_lock();
  do_work();
} 
```

# java - 将 Jython 与 Java 集成（ImportError：没有名为 Crypto 的模块）

> ID：12349277
> 
> 赞同：2
> 
> 时间：2012-09-10T09:56:01.743
> 
> 标签：java, python, cryptography, jython

我已经在*Eclipse中安装了**Jython 2.5 插件*以将我的*Python*代码与 Java 集成，但我收到了错误，因为. 我不知道如何导入或添加这个加密库。我想将*AES*用于某些解密机制，是否有任何用于此*Crypto*的 jar或某些过程来实现此目的。 **`ImportError: No module named Crypto`** 

 ***请给我提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-12T06:11:10.257

python crypto 模块使用本机 c 代码，因此您可能无法使用它。

但是您可以改用 java crypto api。请参阅下面的此链接。

[http://python.6.x6.nabble.com/TripleDES-encryption-in-Jython-tt5014671.html#a5015276](http://python.6.x6.nabble.com/TripleDES-encryption-in-Jython-tt5014671.html#a5015276)***

# payment - 在 2checkout 支付网关中支付完成后如何重定向到我们的 URL。

> ID：12349278
> 
> 赞同：0
> 
> 时间：2012-09-10T09:56:01.477
> 
> 标签：payment, 2checkout

如何在 2checkout 支付网关中设置 return_url 以在完成支付过程后将页面重定向到我们的网站？

谁能帮帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:10:12.210

您可以在帐户级别（在站点管理页面上）、产品级别（如果您使用 2Checkout 的即插即用购物车）设置您批准的 URL，也可以使用`x_receipt_link_url`参数将其传递给每次销售。

如果您选择为每次销售传递 URL 路径，则您传递的域必须与您在 2Checkout 帐户中注册的域相匹配。

有关 2Checkout 退货流程的更多信息，请参阅退货流程[如何运作？](https://www.2checkout.com/blog/knowledge-base/merchants/tech-support/passbacks-and-returns/how-does-the-return-process-work/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:33:00.320

```
You can setup your approved URL in your 2checkout account using Site Management
click on **Given links back to my website  radio button** Then after setup 
```

批准的网址

```
where is your 2co_ipn.php file and set success file name
http://localhost/payment/success.php 
```

# java - 为什么是 Libgdx Gdx.gl10.glLineWidth(width); 不会对更改投影属性做出反应

> ID：12349284
> 
> 赞同：2
> 
> 时间：2012-09-10T09:56:29.977
> 
> 标签：java, android, opengl-es, libgdx

我有带有 render() 函数的典型 Libgdx 类。

在 render() 函数中，我有 ShapeRenderer 批处理：

```
Gdx.gl10.glLineWidth(width);
renderer.begin(ShapeType.Line);
renderer.setColor(25,0, 0, alpha);
renderer.line(point_x1, point_y1, point_x2, point_y2);
renderer.end(); 
```

在这个函数中，我还有：

```
 camera.update();
        renderer.setProjectionMatrix(camera.combined); 
```

并且当投影属性改变时，线点被正确翻译但**线宽仍然相同**！

由于投影宽度和高度，有什么方法可以改变线宽？

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T10:54:58.790

线宽以像素为单位，不受任何投影变换的影响。因此，没有简单的方法可以使线宽取决于当前的投影变换，并且您不会用真正的二维几何（即旋转的矩形或类似的东西）替换您的线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:50:15.317

您没有指定使用的相机类型，但如果是，`OrthographicCamera`您可以`zoom`根据相机的缩放系数来修改线宽：

例如，当您在未放大/缩小时有一条 1 像素宽度的线时，您可以使用以下命令：

```
OrthographicCamera camera = ...
int lineWidth = 1; // pixels

Gdx.gl10.glLineWidth(lineWidth / camera.zoom); 
```

# c# - ThreadAbortException 有什么特别之处？

> ID：12349287
> 
> 赞同：2
> 
> 时间：2012-09-10T09:56:50.443
> 
> 标签：c#, asp.net, .net-4.0

众所周知，[Server.Transfer](http://msdn.microsoft.com/en-us/library/8z9e2zxx%28v=vs.100%29.aspx)在执行时会抛出*ThreadAbortException 。*

此外， ThreadAbortException 继承 Exception ：

![在此处输入图像描述](../Images/5320fdfc778d21facc87e3e49ee2e440.png)

那么为什么异常不会进入catch块：

```
 try
   {
         Server.Transfer("NoPremissionSell.aspx");
   }

  catch (Exception  e)
   { } 
```

虽然它会在：

```
 try
   {
         Server.Transfer("NoPremissionSell.aspx");
   }

  catch (ThreadAbortException e)
   { } 
```

# 编辑 ，

这在两种情况下都有效。我不知道为什么它以前不起作用。请忽略。

抱歉误导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T10:01:20.537

.NET 运行时（命令语言基础结构，CLI，它是程序集执行的基础）以不同的方式处理许多异常类型。

例如。.NET 代码*根本*[`StackOverflowException`](http://msdn.microsoft.com/en-us/library/system.stackoverflowexception.aspx)无法捕获。

 *其原因取决于异常。在`StackOverflowException`因为 CLI 无法保证进程状态的正确性的情况下。

在特殊处理的情况下，[`ThreadAbortException`](http://msdn.microsoft.com/en-us/library/system.threading.threadabortexception.aspx)因为虽然它可以被捕获，但它必须被重新抛出（自动）所以线程将结束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T10:01:23.703

ThreadAbortException 的特殊之处在于，即使被捕获，也会自动重新抛出。线程已中止。[除非调用 Thread.ResetAbort](http://msdn.microsoft.com/en-us/library/system.threading.thread.resetabort.aspx)，否则代码可以清理但不会停止中止。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.threading.threadabortexception.aspx](http://msdn.microsoft.com/en-us/library/system.threading.threadabortexception.aspx)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T10:08:41.950

不能通过 catch (Exception) 捕获 ThreadAbortException 是不正确的。

下面的代码打印“Handled Exception: Thread was being aborted.”，证明异常确实被捕获：

```
using System;
using System.Threading;

namespace Demo
{
    class Program
    {
        static void Main(string[] args)
        {
            try
            {
                test();
            }

            catch (Exception ex)
            {
                Console.WriteLine("Handled Exception: " + ex.Message);
            }
        }

        static void test()
        {
            Thread.CurrentThread.Abort();
        }
    }
} 
```

你是如何测试异常是否被捕获的？*

# jsf-2 - JSF 2.0：从支持 Bean 进行复合组件属性初始化的问题

> ID：12349289
> 
> 赞同：1
> 
> 时间：2012-09-10T09:57:00.153
> 
> 标签：jsf-2, primefaces

我正在开发一个使用 JSF2 和 Primefaces 作为 WebFrameworks 的 Java Web 应用程序。我的应用程序旨在管理摄像机。所有有关摄像机的数据都存储在 PostgreSQL 数据库中。
我有一个 JSF 视图，在其中我使用 Leaflet 的 Javascript API 显示动态地图。您可以通过以下链接查看此类地图的示例：[Leaflet example](http://leaflet.cloudmade.com/examples/layers-control.html)。

总而言之，我的地图旨在显示相机的标记。标记的位置是使用相机的属性生成的。
我创建了一个复合组件及其支持 Bean 来处理地图。这是视图的源代码：

```
<h:body>
    <!-- INTERFACE -->
    <composite:interface componentType="mapComponent">
    </composite:interface>

    <!-- IMPLEMENTATION -->
    <composite:implementation>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <link rel="stylesheet" href="#{resource['css:leaflet.css']}" />
        <!--[if lte IE 8]><link rel="stylesheet" href="#{resource['css:leaflet.ie.css']}" /><![endif]-->
        <script
            src="#{resource['js:leaflet/Leaflet-v0.4.4-0/dist/leaflet-src.js']}"></script>
        <script
            src="#{resource['js:leaflet/Leaflet-v0.4.4-0/src/leafclusterer.js']}"></script>

        <div id="#{cc.mapId}" style="width: 520px; height: 580px" />

        <script type="text/javascript">
        //<![CDATA[
            var clusterPopup;

            function onClustererClick(cluster, coordinates) {
                var markers = cluster.getMarkers;
                var popupContent = "<p>";
                for (var i = 0; i < cluster.getCluster().getMarkers().length; i++) {
                    var currentMarker = cluster.getCluster().getMarkers()[i];
                    popupContent += currentMarker.marker._popup._content
                    popupContent += "<br/>";
                }
                popupContent += "</p>";
                clusterPopup = new L.Popup();
                clusterPopup.setLatLng(coordinates);
                clusterPopup.setContent(popupContent);
                map.openPopup(clusterPopup);
            };

            var cameraIcon = L.icon({
                iconUrl : "#{resource['img:leaflet/camera.png']}",

                iconSize : [ 48, 48 ],
                shadowSize : [ 48, 48 ],
                iconAnchor : [ 30, 30 ],
                popupAnchor : [ 0, -20 ]
            });

            var marker;
            function onMapClick(e) {
                marker = new L.marker(e.latlng, {
                    draggable : true,
                    icon : cameraIcon
                });
                map.addLayer(marker);
                marker.bindPopup("<b>Hello world!</b><br />I am a popup.");
                map.off('click');
            };

            var osmUrl = '#{cc.osmUrl}';
            var osmAttrib = '#{cc.osmAttrib}';

            var basic = new L.tileLayer(osmUrl, {
                minZoom : #{cc.minZoom},
                maxZoom : #{cc.maxZoom},
                attribution : osmAttrib
            });

            var map = new L.Map('#{cc.mapId}', {
                center : new L.LatLng(#{cc.mapX}, #{cc.mapY}),
                zoom : #{cc.mapDefaultZoom},
                layers : [ basic ]
            });

            var baseMaps = {
                "#{cc.mapBasicLayerName}" : basic
            };

            if(#{cc.mapEnableOnClick}) {
                map.on('click', onMapClick);
            }

            var clusterer = new LeafClusterer(map);
        //]]>
        </script>
        <composite:insertChildren />
    </composite:implementation>
</h:body>
</html> 
```

这是我的支持 bean 的代码：

```
@FacesComponent(value = "mapComponent")
public class MapComponent extends UINamingContainer {

private static final String MAP_ID_PROP = "map_id";
private static final String OSM_URL_PROP = "osm_url";
private static final String OSM_ATTRIB_PROP = "osm_attrib";
private static final String MIN_ZOOM_PROP = "min_zoom";
private static final String MAX_ZOOM_PROP = "max_zoom";
private static final String MAP_X_PROP = "map_x";
private static final String MAP_Y_PROP = "map_y";
private static final String MAP_DEFAULT_ZOOM_PROP = "map_default_zoom";
private static final String MAP_BASIC_LAYER_NAME_PROP = "map_basic_layer_name";
private static final String MAP_ENABLE_ON_CLICK_PROP = "map_enable_on_click";

private String mapId;
private String osmUrl;
private String osmAttrib;
private Integer minZoom;
private Integer maxZoom;
private Double mapX;
private Double mapY;
private Integer mapDefaultZoom;
private String mapBasicLayerName;
private Boolean mapEnableOnClick;

/**
 * Instanties un nouveau map component.
 */
public MapComponent() {
    super();
    mapId = (String) AppUtil.getProperty(MAP_ID_PROP);
    osmUrl = (String) AppUtil.getProperty(OSM_URL_PROP);
    osmAttrib = (String) AppUtil.getProperty(OSM_ATTRIB_PROP);
    minZoom = Integer.parseInt((String) AppUtil.getProperty(MIN_ZOOM_PROP));
    maxZoom = Integer.parseInt((String) AppUtil.getProperty(MAX_ZOOM_PROP));
    mapX = Double.parseDouble((String) AppUtil.getProperty(MAP_X_PROP));
    mapY = Double.parseDouble((String) AppUtil.getProperty(MAP_Y_PROP));
    mapDefaultZoom = Integer.parseInt((String) AppUtil.getProperty(MAP_DEFAULT_ZOOM_PROP));
    mapBasicLayerName = (String) AppUtil.getProperty(MAP_BASIC_LAYER_NAME_PROP);
    setMapEnableOnClick(Boolean.parseBoolean((String) AppUtil.getProperty(MAP_ENABLE_ON_CLICK_PROP)));
}

/**
 * Getter : retourne le map id.
 * 
 * @return le map id
 */
public String getMapId() {
    return mapId;
}

/**
 * Getter : retourne le osm url.
 * 
 * @return le osm url
 */
public String getOsmUrl() {
    return osmUrl;
}

/**
 * Getter : retourne le osm attrib.
 * 
 * @return le osm attrib
 */
public String getOsmAttrib() {
    return osmAttrib;
}

/**
 * Getter : retourne le min zoom.
 * 
 * @return le min zoom
 */
public Integer getMinZoom() {
    return minZoom;
}

/**
 * Getter : retourne le max zoom.
 * 
 * @return le max zoom
 */
public Integer getMaxZoom() {
    return maxZoom;
}

/**
 * Getter : retourne le map x.
 * 
 * @return le map x
 */
public Double getMapX() {
    return mapX;
}

/**
 * Getter : retourne le map y.
 * 
 * @return le map y
 */
public Double getMapY() {
    return mapY;
}

/**
 * Getter : retourne le map default zoom.
 * 
 * @return le map default zoom
 */
public Integer getMapDefaultZoom() {
    return mapDefaultZoom;
}

/**
 * Getter : retourne le map basic layer name.
 * 
 * @return le map basic layer name
 */
public String getMapBasicLayerName() {
    return mapBasicLayerName;
}

/**
 * Setter : affecte le map id.
 * 
 * @param mapId le map id
 */
public void setMapId(String mapId) {
    this.mapId = mapId;
}

/**
 * Setter : affecte le osm url.
 * 
 * @param osmUrl le osm url
 */
public void setOsmUrl(String osmUrl) {
    this.osmUrl = osmUrl;
}

/**
 * Setter : affecte le osm attrib.
 * 
 * @param osmAttrib le osm attrib
 */
public void setOsmAttrib(String osmAttrib) {
    this.osmAttrib = osmAttrib;
}

/**
 * Setter : affecte le min zoom.
 * 
 * @param minZoom le min zoom
 */
public void setMinZoom(Integer minZoom) {
    this.minZoom = minZoom;
}

/**
 * Setter : affecte le max zoom.
 * 
 * @param maxZoom le max zoom
 */
public void setMaxZoom(Integer maxZoom) {
    this.maxZoom = maxZoom;
}

/**
 * Setter : affecte le map x.
 * 
 * @param mapX le map x
 */
public void setMapX(Double mapX) {
    this.mapX = mapX;
}

/**
 * Setter : affecte le map y.
 * 
 * @param mapY le map y
 */
public void setMapY(Double mapY) {
    this.mapY = mapY;
}

/**
 * Setter : affecte le map default zoom.
 * 
 * @param mapDefaultZoom le map default zoom
 */
public void setMapDefaultZoom(Integer mapDefaultZoom) {
    this.mapDefaultZoom = mapDefaultZoom;
}

/**
 * Setter : affecte le map basic layer name.
 * 
 * @param mapBasicLayerName le map basic layer name
 */
public void setMapBasicLayerName(String mapBasicLayerName) {
    this.mapBasicLayerName = mapBasicLayerName;
}

/**
 * Getter : retourne le map enable on click.
 * 
 * @return le map enable on click
 */
public Boolean getMapEnableOnClick() {
    return mapEnableOnClick;
}

/**
 * Setter : affecte le map enable on click.
 * 
 * @param mapEnableOnClick le map enable on click
 */
public void setMapEnableOnClick(Boolean mapEnableOnClick) {
    this.mapEnableOnClick = mapEnableOnClick;
} 
```

}

为了管理我的组件，我还创建了一个支持 bean。这是 xhtml 源代码：

```
<h:body>
    <!-- INTERFACE -->
    <composite:interface componentType="mapMarker">
        <composite:attribute name="longitude" type="java.lang.Float" />
        <composite:attribute name="latitude" type="java.lang.Float" />
        <composite:attribute name="padding" type="java.lang.Integer" />
        <composite:attribute name="popUpContent" type="java.lang.String" />
        <composite:attribute name="maxZoom" type="java.lang.Integer" />
    </composite:interface>

    <!-- IMPLEMENTATION -->
    <composite:implementation>

        <script type="text/javascript">
            //         
            function onPopupClick(padding, lat, lng) {
                map.closePopup(clusterPopup);

                if(map.getZoom() &lt; #{cc.maxZoom}) {
                    var pos = map.latLngToLayerPoint(new L.LatLng(#{cc.latitude}, #{cc.longitude}));
                    var sw = new L.point(pos.x - padding, pos.y + padding);
                    sw = map.layerPointToLatLng(sw);
                    var ne = new L.point(pos.x + padding, pos.y - padding);
                    ne = map.layerPointToLatLng(ne);
                    map.setView(new L.LatLng(lat, lng), #{cc.maxZoom});
                }
            };

            marker = new L.marker([#{cc.latitude}, #{cc.longitude}], {
                    draggable : true,
                    icon : cameraIcon
            });
            var popUpContent = '<span style="cursor:pointer;" id="#{cc.id}Link" onclick="onPopupClick(#{cc.padding},' + #{cc.latitude} + ',' + #{cc.longitude} + ')">#{cc.popUpContent}</span>';
            marker.bindPopup(popUpContent);

            clusterer.addMarker(marker);
        </script>

    </composite:implementation>
</h:body> 
```

这是我的 Backing Bean 的源代码：

```
@FacesComponent(value = "mapMarker")
public class MapMarker extends UINamingContainer {

    private static final String PADDING_PROP = "padding";
    private static final String MAX_ZOOM_MARKER_PROP = "max_zoom_marker";

    private Float longitude;
    private Float latitude;
    private String popUpContent;
    private Integer padding;
    private Integer maxZoom;

    public MapMarker() {
        padding = Integer.parseInt((String) AppUtil.getProperty(PADDING_PROP));
        maxZoom = Integer.parseInt((String) AppUtil.getProperty(MAX_ZOOM_MARKER_PROP));
    }

    public Float getLongitude() {
        return longitude;
    }

    public void setLongitude(Float longitude) {
        this.longitude = longitude;
    }

    public Float getLatitude() {
        return latitude;
    }

    public void setLatitude(Float latitude) {
        this.latitude = latitude;
    }

    public String getPopUpContent() {
        return popUpContent;
    }

    public void setPopUpContent(String popUpContent) {
        this.popUpContent = popUpContent;
    }

    public Integer getPadding() {
        return padding;
    }

    public void setPadding(Integer padding) {
        this.padding = padding;
    }

    public Integer getMaxZoom() {
        return maxZoom;
    }

    public void setMaxZoom(Integer maxZoom) {
        this.maxZoom = maxZoom;
    }

} 
```

组件通过读取包含默认值的属性文件来设置它们的属性。这是文件的内容：

```
# Cartographie OpenStreetMap
map_id=map
osm_attrib=test
min_zoom=1
max_zoom=13
map_x=48.227
map_y=6.611
map_default_zoom=8
map_basic_layer_name=Basique
map_enable_on_click=true
# Cartographie OpenStreetMap

# Marqueur de caméra
padding=20
max_zoom_marker=11
# Marqueur de caméra 
```

我有一个处理包含地图的视图的 bean“ConsultationBean”。bean 使用服务将数据库中包含的所有摄像机存储在 ArrayList 中。在视图中，我通过 prerenderView 事件调用 init 方法，该方法使用摄像机列表创建所有 MapMarker。这是xhtml源代码：

```
<ui:composition template="/xhtml/common/layout.xhtml">
    <ui:define name="headTitle">
        <h:outputText value="#Cartographie#" />
    </ui:define>

    <ui:define name="header">
        <ui:include src="/xhtml/common/header.xhtml">
            <ui:param name="headerClass" value="banner-thin" />
        </ui:include>
    </ui:define>

    <ui:define name="content">
        <f:metadata>
            <f:event type="preRenderView" listener="#{consultationBean.init}"
                update="content,mapPanelGroup"></f:event>
        </f:metadata>
        <div id="content" class="content-home ui-corner-bottom">

            <h2 class="main-title content-title light-bg light-bordered-top">
                <h:outputText value="#Cartographie#" />
            </h2>
            <h:panelGroup id="mapPanelGroup">
                <util:map id="mapContainer">
                    <ui:repeat var="marker" value="#{consultationBean.markers}">
                        <util:mapMarker/> 
                    </ui:repeat>
                </util:map>
            </h:panelGroup>
        </div>
    </ui:define>
</ui:composition>
</html> 
```

这是支持 bean 的源代码：

```
/**
 * Le Class ConsultationBean.
 */
@Controller
@Scope("view")
@SuppressWarnings("serial")
public class ConsultationBean implements Serializable {

/** La constante LOGGER. */
private static final Logger LOGGER = Logger.getLogger(ConsultationBean.class);

/** Le cameras. */
private List<Camera> cameras;

/** Le map. */
private UINamingContainer map;

/** Le markers. */
private List<MapMarker> markers;

/** Le camera service. */
@Autowired
private CameraService cameraService;

/**
 * Initialise le.
 */
public void init() {
    cameras = cameraService.findAll();
    map = (UINamingContainer) FacesUtils.findComponentById(FacesContext.getCurrentInstance(), "mapContainer");
    initMarkers();
}

/**
 * Initialise le markers.
 */
public void initMarkers() {
    markers = new ArrayList<MapMarker>();

    for (Camera camera : cameras) {
        MapMarker mapMarker = new MapMarker();
        mapMarker.setLatitude(camera.getY());
        mapMarker.setLongitude(camera.getX());
        mapMarker.setPopUpContent(camera.toString());
        markers.add(mapMarker);
        map.getChildren().add(mapMarker);
        map.getChildren().add(new HtmlInputText());
    }
}

/**
 * Getter : retourne le markers.
 * 
 * @return le markers
 */
public List<MapMarker> getMarkers() {
    return markers;
}

/**
 * Setter : affecte le markers.
 * 
 * @param markers le markers
 */
public void setMarkers(List<MapMarker> markers) {
    this.markers = markers;
} 
```

}

我的问题是我需要将我的属性设置到 MapMarker 的默认构造函数中。例如，通过使用以下默认构造函数，我的标记将显示在地图上完全相同的点：

```
 public MapMarker() {
        padding = Integer.parseInt((String) AppUtil.getProperty(PADDING_PROP));
        maxZoom = Integer.parseInt((String) AppUtil.getProperty(MAX_ZOOM_MARKER_PROP));
        latitude = (float) 47.67876;
        longitude = (float) 6.97061;
    } 
```

我想做的是使“ConsultationBean”中的“init”方法高效，因为它像默认构造函数一样初始化标记的属性。我必须使用“init”方法，因为这是我使用相机列表的地方。
也许我应该重新渲染视图，这就是我使用 preRender 事件的更新属性的原因，但它不起作用。

如果有人有解决这个问题的想法......

提前致谢。

**更新 1：**

“ConsultationBean”中的“init”方法效率低下。事实上，我创建了“MapMarker”并将它们添加到地图中，但它们从未出现在视图中。但是，视图中包含的标记是由视图和 vi “ui:repeat”标签生成的标记：

```
 <ui:repeat var="marker" value="#{consultationBean.markers}">
                    <util:mapMarker/> 
                </ui:repeat> 
```

我注意到我的 MapMarkers 是在“ConsultationBean”之前构建的。结果，我的相机列表和标记列表为空，但生成的标记数量与存储在数据库中的相机数量相同。

我尝试使用“#{camera.code}# 作为值将 id 添加到标记中，代码如下：

```
 <ui:repeat var="camera" value="#{consultationBean.cameras}">
                    <util:mapMarker id="#{camera.code}"/> 
                </ui:repeat> 
```

不幸的是它失败了，因为列表是空的。我真的很坚持生成我的标记的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T08:01:55.030

我终于找到了解决方案。我所做的是向名为“MapMarkersContainer”的视图添加了一个附加组件。该组件包含摄像机列表，并且在调用 MapMarker 的“encodeBegin”之前填充此列表。我已经修改了“MapMarker”的“encodeBegin”，以便通过“MapMarkersContainer”的列表获取所有相机信息。

```
<h:body>
    <!-- INTERFACE -->
    <composite:interface componentType="mapMarkersContainer">
        <composite:attribute name="cameras" type="java.util.List" />
    </composite:interface>

    <!-- IMPLEMENTATION -->
    <composite:implementation>

    </composite:implementation>
</h:body>
</html> 
```

这是 Backing Bean 的源代码：

```
@FacesComponent(value = "mapMarkersContainer")
public class MapMarkersContainer extends UINamingContainer {
    private List<Camera> cameras;

    private Integer currentIndex = 0;

    public List<Camera> getCameras() {
        currentIndex++;
        return cameras;
    }

    public void setCameras(List<Camera> cameras) {
        this.cameras = cameras;
    }

    public Integer getCurrentIndex() {
        return currentIndex;
    }

    public void setCurrentIndex(Integer currentIndex) {
        this.currentIndex = currentIndex;
    }
} 
```

这是“MapMarker”中发生的修改：

```
@FacesComponent(value = "mapMarker")
public class MapMarker extends UINamingContainer {

    private static final String PADDING_PROP = "padding";
    private static final String MAX_ZOOM_MARKER_PROP = "max_zoom_marker";

    private Float longitude;
    private Float latitude;
    private String popUpContent;
    private Integer padding;
    private Integer maxZoom;
    private Camera camera;

    public MapMarker() {
        padding = Integer.parseInt((String) AppUtil.getProperty(PADDING_PROP));
        maxZoom = Integer.parseInt((String) AppUtil.getProperty(MAX_ZOOM_MARKER_PROP));
    }

    @Override
    public void encodeBegin(FacesContext context) throws IOException {
        padding = Integer.parseInt((String) AppUtil.getProperty(PADDING_PROP));
        maxZoom = Integer.parseInt((String) AppUtil.getProperty(MAX_ZOOM_MARKER_PROP));
        MapMarkersContainer mapMarkersContainer = (MapMarkersContainer) FacesUtils.findComponentById(context,
                "mapMarkersContainer");
        Integer cameraIndex = mapMarkersContainer.getCurrentIndex();
        Camera camera = mapMarkersContainer.getCameras().get(cameraIndex);
        latitude = camera.getY();
        longitude = camera.getX();
        popUpContent = camera.toString();
        setId(camera.getNom());
        super.encodeBegin(context);
    }

    public Float getLongitude() {
        return longitude;
    }

    public void setLongitude(Float longitude) {
        this.longitude = longitude;
    }

    public Float getLatitude() {
        return latitude;
    }

    public void setLatitude(Float latitude) {
        this.latitude = latitude;
    }

    public String getPopUpContent() {
        return popUpContent;
    }

    public void setPopUpContent(String popUpContent) {
        this.popUpContent = popUpContent;
    }

    public Integer getPadding() {
        return padding;
    }

    public void setPadding(Integer padding) {
        this.padding = padding;
    }

    public Integer getMaxZoom() {
        return maxZoom;
    }

    public void setMaxZoom(Integer maxZoom) {
        this.maxZoom = maxZoom;
    }

    public Camera getCamera() {
        return camera;
    }

    public void setCamera(Camera camera) {
        this.camera = camera;
    }

} 
```

以下是“ConsultationBean”视图中的变化：

```
<ui:composition template="/xhtml/common/layout.xhtml">
    <ui:define name="headTitle">
        <h:outputText value="#Cartographie#" />
    </ui:define>

    <ui:define name="header">
        <ui:include src="/xhtml/common/header.xhtml">
            <ui:param name="headerClass" value="banner-thin" />
        </ui:include>
    </ui:define>

    <ui:define name="content">

        <util:mapMarkersContainer id="mapMarkersContainer"/>
        <div id="content" class="content-home ui-corner-bottom">

            <h2 class="main-title content-title light-bg light-bordered-top">
                <h:outputText value="#Cartographie#" />
            </h2>
            <h:panelGroup id="mapPanelGroup">
                <util:map id="mapContainer">
                    <ui:repeat id="repeat" var="camera" value="#{consultationBean.cameras}">
                        <util:mapMarker/> 
                    </ui:repeat>
                </util:map>
            </h:panelGroup>
        </div>
    </ui:define>
</ui:composition>
</html> 
```

这是“ConsultationBean”的Java源代码：

```
 /**
 * Le Class ConsultationBean.
 */
@Controller
@Scope("view")
@SuppressWarnings("serial")
public class ConsultationBean implements Serializable {

    /** Le cameras. */
    private List<Camera> cameras;

    /** Le markers. */
    private List<MapMarker> markers;

    private MapMarkersContainer mapMarkersContainer;

    /** Le camera service. */
    @Autowired
    private CameraService cameraService;

    /**
     * Initialise le.
     * 
     * @throws IOException
     */
    @PostConstruct
    public void init() throws IOException {
        cameras = cameraService.findAll();
        mapMarkersContainer = (MapMarkersContainer) FacesUtils.findComponentById(FacesContext.getCurrentInstance(),
                "mapMarkersContainer");
        mapMarkersContainer.setCameras(cameras);
    }

    /**
     * Getter : retourne le markers.
     * 
     * @return le markers
     */
    public List<MapMarker> getMarkers() {
        return markers;
    }

    /**
     * Setter : affecte le markers.
     * 
     * @param markers le markers
     */
    public void setMarkers(List<MapMarker> markers) {
        this.markers = markers;
    }

    public List<Camera> getCameras() {
        return cameras;
    }

    public void setCameras(List<Camera> cameras) {
        this.cameras = cameras;
    }
} 
```

现在，每个标记都有自己的 ID 和自己的正确值。每次使用相机列表的 getter 方法时都会更新一个计数器，以便您可以在正确的索引处访问正确的相机。

感谢 Guilherme Torres Castro 的回答和“encodeBegin”方法的发现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T12:53:33.977

尝试这个：

```
@Override
public void encodeBegin(FacesContext context) throws IOException{
    padding = Integer.parseInt((String) AppUtil.getProperty(PADDING_PROP));
    maxZoom = Integer.parseInt((String) AppUtil.getProperty(MAX_ZOOM_MARKER_PROP));
    latitude = (float) 47.67876;
    longitude = (float) 6.97061;
    super.encodeBegin(context);
} 
```

# python - 如何抓取更改内容的网页标签 我想抓取一个通过 <select>标签更改其内容的网页。当我选择不同的选项时，页面的内容会动态变化。我想知道是否有一种方法可以从 python 脚本更改选项，以便我可以从</select> 标记中所有不同选项的所有不同页面获取内容。不要指望用户的 ACL。当然，LocalSystem 帐户可能包含高完整性级别 ACL，但这不是获取该 IL ACL 的可靠方法。高 IL SID 是众所周知的 (SID: S-1-16-12288)。将其放

> ID：12349295
> 
> 赞同：3
> 
> 时间：2012-09-10T09:57:19.263
> 
> 标签：python, web-scraping

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:06:17.880

我假设您使用像 urllib 这样的库来进行抓取。您已经知道网站的内容会动态变化。我还假设动态内容使用服务器端交互。这意味着，使用 javascript (ajax) 浏览器根据选择的值从服务器请求新数据）。

如果是这样，那么您可以尝试在您的网络抓取库中模拟对服务器的 ajax 调用。

1.  首先，使用浏览器调试工具找出正在调用的服务器的 url。
2.  拆分ajax调用中的参数部分
3.  执行相同的调用以查找 select 标记中的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:06:27.577

As @Tichodroma said, when the select is changed, either:

1.  以前隐藏在页面上的一些内容变得可见，或者：
2.  进行 ajax 调用以检索一些附加内容并将其添加到 DOM

在这两种情况下，都涉及到 JavaScript。看看它，根据发生的情况（案例 #1 或 #2），您应该：

1.  刮掉整个页面，因为您想要的所有内容都已经在其中，或者：
2.  对通常使用 ajax 调用的文件进行多次调用，以检索您想要的每个值的内容`<select>`

# php - PHP：用于匹配具有特定模式和一个可选通配符的 URL 的正则表达式

> ID：12349307
> 
> 赞同：0
> 
> 时间：2012-09-10T09:58:10.850
> 
> 标签：php, regex, url, wildcard

也许这个问题已经在这个网站的某个地方得到了回答，但我不确定，因为我不擅长正则表达式。事实上，我猜我的问题是非常非常基本的。我需要检查 URL 是否与以下模式匹配：

```
'http://www.my-domain.com/dir/file.htm'
'http://www.my-domain.com/dir/file2.htm'
'http://www.my-domain.com/dir/file3.htm' 
```

所以基本上，我只需要一个简单的正则表达式模式来匹配带有一个可以为空或包含数字的通配符的 URL。

谢谢你，很抱歉我无法解决这个非常基本的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:07:18.210

`/^https?\:\/\/www\.my\-domain\.com\/dir\/file[0-9]*\.htm$/`匹配所有示例字符串：

```
if (preg_match('/^https?\:\/\/www\.my\-domain\.com\/dir\/file[0-9]*\.htm$/',$url,$matches))
{
    var_dump($matches);
} 
```

由于您不清楚（或不清楚）正则表达式：这就是这个表达式的作用：

*   `^https?`: 检查天气是否以 http 开头，并允许一个可选的`s`
*   `\:\/\/www\.my\-domain\.com\/dir\/file`: 验证实际的基本 url，斜线、冒号、点和破折号需要转义，因为它们在正则表达式语法中的特殊含义（斜线是常见的分隔符，点 == 几乎任何字符，冒号后面`?`可以解释为条件的一部分匹配，...）
*   `file[0-9]*\.html$`: 匹配`file`和否，或者字符串后面的任意数量的数字，所以这将匹配`file`，`file1`以及`file0`or `file00000123434`。然后`.htm`匹配，并`$`确保这是您尝试匹配的字符串的结尾。

就是这样，真的。一个非常严格的正则表达式。您也可以添加更多的 flex，方法是（例如）允许 html 和 htm 作为字符串的结尾，就像表达式允许 http 和 https: 一样`\.html?$`。还有其他方法可以编写相同的内容：`\.html{0,1}`: 匹配最后的 0 或 1 l。甚至：匹配*“组”*`.[html]{3,4}` “html”中的 3 个或 4 个字符：htm、html 但也匹配 hhh、htth 等...

 *玩它，玩得开心。一旦你掌握了基础知识，正则表达式就不那么难了*

# mysql - rails activerecord，mysql和mysql2性能下降？

> ID：12349318
> 
> 赞同：3
> 
> 时间：2012-09-10T09:58:40.290
> 
> 标签：mysql, performance, activerecord, ruby-on-rails-3.2, mysql2

我最近才从 Rails 2.3.5 升级到 Rails 3.2.7，并注意到我的一些查询中的一些性能下降。我知道 Rails 3 ActiveRecord 在某些情况下比 Rails 2.3.5 慢，但基准测试令我感到惊讶，我只想确保我没有遗漏任何东西。

我运行了以下在我的应用程序中非常流行的查询作为基准

```
SELECT SQL_NO_CACHE table_name.* FROM table_name WHERE ((string_col = 'value') AND (int_col1 BETWEEN 5 AND 30)) ORDER BY int_col2 DESC LIMIT 1000 
```

我检查了：

*   轨道 3.2.7 与轨道 2.3.5
*   rails 3.2.7 with mysql adapter vs mysql2
*   ActiveRecord.find_by_sql 与 ActiveRecord.connection.select_all

# 结果

### 导轨 3.2.7

rails 3.2.7，mysql 适配器，“select_all”：平均。0.0148 秒
rails 3.2.7，mysql 适配器，“find_by_sql”平均值。0.0555 秒

rails 3.2.7，mysql2 适配器，“select_all”：平均。0.045 秒
rails 3.2.7，mysql2 适配器，“find_by_sql”平均值。0.088 秒

### 导轨 2.3.5

rails 2.3.5，mysql适配器“select_all”：平均。0.013 秒
rails 2.3.5，mysql 适配器“find_by_sql”：平均。0.0177 秒

尽管我的原始代码使用的是 ActiveRecord 查询 api，但我使用硬编码的 sql 作为基准测试，并且还验证了直接从 bash 命令行调用 mysql 是稳定的，并且上述数字来自 rails/mysql 适配器而不是 db。

# 问题

这些差异合理吗？
“find_by_sql”和“select_all”之间的差异在 Rails 3.2.7 中比在 Rails 2.3.5 中大得多。
为什么mysql2比mysql慢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T00:23:03.243

我发现这篇[博客文章](http://www.daniel-azuma.com/blog/archives/216)讨论了如何`connection.select_all`使用较低级别的数据库调用来消除 find_by_sql 使用的一些高级库。

> 标准 ActiveRecord API 中的大多数调用都返回 ActiveRecord“模型”对象。但是，在某些情况下，您可能想要绕过创建这些完整 ActiveRecord 对象的开销，或者您可能想要查询没有相应 ActiveRecord 类的数据。连接适配器的低级查询方法让您可以编写自己的 SQL，并将“普通旧数据”作为原始结果表返回。

关于 mysql v mysql2，[mysql2 gem](https://github.com/brianmario/mysql2#yeah-but-why)将返回值转换为 Ruby 本身使用的更复杂的 Ruby 类型，而不是字符串或 nil。但是，如果您需要这些，流式传输或异步查询 mysql2 gem 会更快。

# java - IE8 GWT 单选按钮不显示

> ID：12349322
> 
> 赞同：1
> 
> 时间：2012-09-10T09:58:49.637
> 
> 标签：java, gwt, internet-explorer-8, radio-button

我对“我的朋友” IE8 和 GWT 感到疯狂。我已经在论坛中寻找解决方案，但我没有找到我正在寻找的确切内容。问题是我已经为两个radioButtons（radioPannel，radioRattachement）声明了一个radioPanel：

```
 // Ajout des listeners et des styles sur les boutons
    radioRole.setStyleName(Constants.RADIO_LISTE_PROJET);
    // radioRole.setst
    radioRole.addListener(Events.OnClick, new ClickFiltreListener(this));
    radioRole.setValue(Boolean.FALSE);
    radioRole.setHideMode(HideMode.VISIBILITY);

    radioRattachement.setStyleName(Constants.RADIO_LISTE_PROJET);
    radioRattachement.addListener(Events.OnClick, new ClickFiltreListener(
            this));
    radioRattachement.setValue(Boolean.TRUE);
    radioRattachement.setHideMode(HideMode.VISIBILITY);

    // Creation du groupe de radio et ajout des 2 boutons dans ce groupe
    radioGroup.add(radioRattachement);
    radioGroup.add(radioRole);
    radioGroup.setOrientation(Orientation.VERTICAL);
    radioGroup.setWidth(80);
    radioGroup.setHeight(80);
    radioGroup.setHideLabel(Boolean.TRUE);

    // Panel contenat le groupe de radio
    final ContentPanel radioGroupPanel = new ContentPanel();
    final FormLayout boutonPosteLayout = new FormLayout();
    // boutonPosteLayout.setPadding(Constants.INT_PADDING_0);
    // boutonPosteLayout.setLabelWidth(Constants.INT_PIXELS_40);
    radioGroupPanel.setLayout(boutonPosteLayout);
    radioGroupPanel.add(radioGroup); 
```

它在 Firefox 中作为一种魅力，但在 Internet Explorer 中，radioButtons 不显示。有什么问题要知道吗？. 提前致谢 。

# c++ - 在不使用流的情况下设置双精度 (ios_base::precision)

> ID：12349323
> 
> 赞同：7
> 
> 时间：2012-09-10T09:58:49.383
> 
> 标签：c++, double, precision

有没有办法在不使用流的情况下做到这一点？例如，像这样：

```
double a = 6.352356663353535;
double b = a.precision(5); 
```

代替：

```
double a = 6.352356663353535;
std::cout.precision(5);
std::cout << a << std::endl; 
```

我是 C++ 新手，我很好奇。提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T10:28:42.247

我已经根据@john、@Konrad 和@KennyTM 的建议修改了代码。我已经检查它是否适用于负数。

```
#include <cmath>
#include <cstdio>
using namespace std;
int main()
{
   double a = 6.352356663353535;
   double  intpart;
   double fractpart = modf (a, &intpart);
   fractpart  = roundf(fractpart * 100000.0)/100000.0; // Round to 5 decimal places
   double b = intpart + fractpart;
   printf("%.5lf", b);
} 
```

输出

```
6.35236 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T10:49:41.327

`double`s 几乎被普遍实现为[IEEE 浮点数](http://en.wikipedia.org/wiki/IEEE_754-2008)。它们的精度仅取决于数字大小（在 的情况下`double`，它是“<a href="http://en.wikipedia.org/wiki/Double_precision" rel="nofollow">双精度浮点数的缩写”，它是 53 位）。无法手动设置浮点数的精度。

显示*精度*始终是输出格式的属性，而不是数字的属性。不要试图通过四舍五入来改变数字，这个操作是没有意义的。您*不需要*降低数字的精度，除非是出于显示目的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:49:39.760

`double`无论您做什么，A始终具有相同的内部精度（很可能是 53 位二进制精度）。只有在以十进制形式将 double 作为文本写出时，您才能控制输出的十进制精度。所以不，您不能将二进制双精度数的精度设置为除本机精度之外的任何其他值（不包括十进制精度）。

如果您想要的只是将一个数字四舍五入到给定的小数位数，那么请查阅*Phillip*的答案（当然，还有*john*和*Konrad*在他们的评论中所做的修改）。但请注意，这不会改变基础类型的精度，并且所有使用此数字的计算都将以二进制双精度执行。此外，这种四舍五入的十进制数不需要在底层二进制浮点类型中精确表示。

如果您真的想执行精确的十进制运算，那么您必须寻找提供实际十进制浮点类型的第三方库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-20T17:51:02.190

使用此功能，但您首先需要将数字转换为`wstring`.

```
INPUT L"6.4400" 
```

```
std::wstring round(std::wstring text) {
    int64_t length = text.length() - 1;
    for (int64_t i = length; i >= 0; i--) {
        if (text[i] != L'0') {
            if (text[i] == L'.') {
                text.replace(i, 1, L"");
                break;
            }
            break;
        }
        text.replace(i, 1, L"");
    }
    return text;
} 
```

```
OUTPUT L"6.44" 
```

# java - 使用 javassist 创建非静态初始化程序

> ID：12349327
> 
> 赞同：1
> 
> 时间：2012-09-10T09:58:58.717
> 
> 标签：java, javassist

从我所见，我可以使用 javassist 在 java 类中创建一个新的静态初始化程序。但我需要的是一个非静态初始化程序。

因此，我不想添加： static{...} 到一个类，我只想添加 {..}

我想这样做的原因是因为我想创建一个类加载器，它返回由 ProxyFactory 包装的类，因为我必须向某些类添加一个处理程序。我的想法是将此代码添加到每个类的非静态初始化程序中： ((javassist.util.proxy.Proxy)this).setHandler(new library.proxy.Handler());

那么，任何想法如何添加非静态初始化程序？或者以不同的方式解决我的问题？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:21:59.443

在字节码级别，Java 中不存在非静态初始化程序。您在源代码中创建的初始化程序 {} 块实际上合并为一个，并成为该类的所有构造函数的一部分。

因此，如果您需要注入非静态块，则必须修补类的构造函数。有点：

```
Constructor[] cs = ctClass.getConstructors();
for(Constructor c: cs) {
  c.insertBefore("your code goes here");
} 
```

# visual-studio-2010 - Visual Studio 2012 产品密钥是否向后兼容

> ID：12349331
> 
> 赞同：1
> 
> 时间：2012-09-10T09:59:12.550
> 
> 标签：visual-studio-2010, visual-studio-2012

有没有人有在 VS2010 中使用 VS2012 产品密钥的经验？

我需要为我当前的项目运行 VS2010（一些设计时组件尚未与 VS2012 兼容），因此需要购买产品密钥。

但是，MS 已停止销售 2010 年的密钥！VS2012 白皮书指出：

> 对于 Visual Studio Professional，许可证中包含的软件是该软件的当前版本，即 Visual Studio Professional 2012，以及同时运行之前您可能有权访问的 Visual Studio Professional 版本的权利。

这实际上并不清楚产品密钥是否向后兼容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T18:34:02.697

Visual Studio 2012 Professional 的零售版不允许您许可以前版本的 Visual Studio。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T16:46:48.633

您可以使用 2012 许可证下载和运行 VS 2010 专业版。

# c# - 从 C# 程序填充电子邮件模板

> ID：12349333
> 
> 赞同：1
> 
> 时间：2012-09-10T09:59:28.243
> 
> 标签：c#, email, templates

我正在寻找执行此类任务的指南。我在 C# 程序中生成主题、正文、收件人，我需要将此信息发送到 Outlook 等默认电子邮件程序，然后根据我发送的内容填充一个新的电子邮件模板。然后用户只需要单击发送，或者，如果需要，修改某些内容并使用该电子邮件执行他想要的操作。问题是我只找到了如何发送电子邮件的各种示例，而不是如何在计算机上打开默认程序并填写数据。任何有关如何搜索的指导表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T10:05:24.967

使用[mailto URI 方案](http://en.wikipedia.org/wiki/Mailto)。

```
Process.Start("mailto:someone@example.com?cc=someone_else@example.com&subject=This%20is%20the%20subject&body=This%20is%20the%20body"); 
```

![在此处输入图像描述](../Images/4dc7d0e42dd6968359697512cee35140.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:06:07.327

```
Outlook.Application oApp    = new Outlook.Application ();
Outlook._MailItem oMailItem = (Outlook._MailItem)oApp.CreateItem ( Outlook.OlItemType.olMailItem );
oMailItem.To    = address;
oMailItem.body    = body;
// body, bcc etc...
oMailItem.Display ( true ); 
```

这与 Outlook 互操作一起使用。

替代方案是 System.Process....

```
Process.Start(String.Format("mailto:{0}?subject={1}&cc={2}&bcc={3}&body={4}", address, subject, cc, bcc, body)) 
```

以上两者都将解决您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:10:42.120

你的意思是这样的？

[http://www.add-in-express.com/creating-addins-blog/2011/09/08/outlook-fill-recipients-programmatically/](http://www.add-in-express.com/creating-addins-blog/2011/09/08/outlook-fill-recipients-programmatically/)

然而，这只是 Outlook，使用 .Net for Office。除非您尝试发送电子邮件的程序具有某种 API（如 Outlook），或者您碰巧有一个程序可以直接控制键盘和鼠标（这将是绝望的），我不明白如何你能行的。无论哪种方式，您都必须为每个外部工具定制程序；也就是说 Outlook 的代码与 Thunderbird 的代码不同。

# sql - 按功能分组的查询错误

> ID：12349334
> 
> 赞同：-2
> 
> 时间：2012-09-10T09:59:29.367
> 
> 标签：sql, sql-server, sql-server-2008

> **可能重复：**
> [Sql 查询抛出错误](https://stackoverflow.com/questions/12348102/sql-query-throwing-error)

我正在尝试查询按部门检索记录并按月份显示，我必须按月汇总工资津贴，并按月显示。

这是我正在尝试的查询：-

```
select  
    pmc.[month] as 'Month', 
    pmc.pd_name_of_project as 'Name of Project',
    tbl_div.name AS 'Name of Advisory Services Division',
    TBL_PMC_UNIT.UNIT_NAME AS 'Name of Unit',
    pmc.pd_project_type as 'Project Type',
    pmc.accepted_tender_cost as 'Accepted Tender Cost',
    pmc.work_order_date as 'Work Order Date',
    pmc.tender_period_months as 'Tender Period',
    pmc.project_completion_date as 'Project Completion Date',
    pmc.per_pmc_charges as '% Of PMC Charges',
    pmc.total_pmc_charges_scheme as 'Total PMC amount   of the Scheme',
    pmc.bill_amount_certified_upto_previous_month as 'Bill amount certified upto previous Month',     
    pmc.total_PMC_charges_upto_previous_month as 'Total PMC charges  upto previous Month',
    pmc.receipt_PMC_charges_upto_previous_month as 'Receipt of PMC Charges upto previous Month',
    pmc.balance_of_PMC_charges_upto_previous_month as 'Balance of PMC charges upto previous Month',
    pmc.bill_amount_certified_current_month as 'Bill amount certified During Current Month',
    pmc.PMC_charges_for_current_month as ' PMC charges  During Current Month',
    pmc.receipt_PMC_charges_current_month as 'Receipt of PMC Charges During Current Monthh',
    pmc.balance_of_PMC_charges_current_month as 'Balance of PMC charges During Current Month',
    SUM(pmc.salary_allowance) as 'Salary & Allowance Division'
FROM 
    TBL_PMC pmc 
        INNER JOIN TBL_DIV 
            ON TBL_DIV.ID = pmc.DIV_ID
        LEFT OUTER JOIN TBL_PMC_UNIT 
            ON TBL_PMC_UNIT.ID=pmc.UNIT_ID  
WHERE 
    pmc.div_id= 17 
    --and pmc.unit_id=@unit_id;
group by  
    pmc.[month] 
```

我有以下错误：- 列“TBL_PMC.pd_name_of_project”在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中。我不想在所有列上使用聚合函数......我必须总结几列！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:05:37.100

你可能不想，但你必须这样做。或将列放在该`GROUP BY`部分中。就像之前的回答告诉你的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:06:59.490

使用 GROUP 语句，您可以使用`SELECT`GROUP BY 中包含的列或具有聚合函数的列。- 正如错误消息所说。

在这种情况下，您可以尝试使用该`SUM...OVER (PARTITION BY ...)`子句。检查[MSDN](http://msdn.microsoft.com/en-us/library/ms189461.aspx)。

因此，删除 Group By 行并像这样更改您的总和：

```
SUM(pmc.salary_allowance) OVER(PARTITION BY pmc.[month]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:08:44.260

将字段放在 a`GROUP BY`中是必需的。您也许可以使用以下方法来查询数据：

```
select  pmc1.[month] as 'Month', 
    pmc2.pd_name_of_project as 'Name of Project',
    tbl_div.name AS 'Name of Advisory Services Division',
    TBL_PMC_UNIT.UNIT_NAME AS 'Name of Unit',
    pmc2.pd_project_type as 'Project Type',
    pmc2.accepted_tender_cost as 'Accepted Tender Cost',
    pmc2.work_order_date as 'Work Order Date',
    pmc2.tender_period_months as 'Tender Period',
    pmc2.project_completion_date as 'Project Completion Date',
    pmc2.per_pmc_charges as '% Of PMC Charges',
    pmc2.total_pmc_charges_scheme as 'Total PMC amount   of the Scheme',
    pmc2.bill_amount_certified_upto_previous_month as 'Bill amount certified upto previous Month',     
    pmc2.total_PMC_charges_upto_previous_month as 'Total PMC charges  upto previous Month',
    pmc2.receipt_PMC_charges_upto_previous_month as 'Receipt of PMC Charges upto previous Month',
    pmc2.balance_of_PMC_charges_upto_previous_month as 'Balance of PMC charges upto previous Month',
    pmc2.bill_amount_certified_current_month as 'Bill amount certified During Current Month',
    pmc2.PMC_charges_for_current_month as ' PMC charges  During Current Month',
    pmc2.receipt_PMC_charges_current_month as 'Receipt of PMC Charges During Current Monthh',
    pmc2.balance_of_PMC_charges_current_month as 'Balance of PMC charges During Current Month',
    pmc1.salary_allowance as 'Salary & Allowance Division'
FROM
(
    SELECT [month] as 'Month',
        SUM(pmc.salary_allowance) salary_allowance
    FROM TBL_PMC
    GROUP BY [month]
) pmc1 
INNER JOIN TBL_PMC pmc2
    ON pmc1.[month] = pmc2.[month]
INNER JOIN TBL_DIV 
    ON TBL_DIV.ID = pmc2.DIV_ID
LEFT OUTER JOIN TBL_PMC_UNIT 
    ON TBL_PMC_UNIT.ID=pmc2.UNIT_ID  
WHERE pmc2.div_id= 17 
    --and pmc.unit_id=@unit_id; 
```

这会将您`SUM()`放在子查询中，然后您将只在子查询中使用几个字段，然后再次从表中获取您`GROUP BY`想要的剩余字段。`TBL_PMC``JOIN`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T10:08:56.303

试试这样：

```
select a.*,b.[Salary & Allowance Division] from 
(select  
    pmc.[month] as 'Month', 
    pmc.pd_name_of_project as 'Name of Project',
    tbl_div.name AS 'Name of Advisory Services Division',
    TBL_PMC_UNIT.UNIT_NAME AS 'Name of Unit',
    pmc.pd_project_type as 'Project Type',
    pmc.accepted_tender_cost as 'Accepted Tender Cost',
    pmc.work_order_date as 'Work Order Date',
    pmc.tender_period_months as 'Tender Period',
    pmc.project_completion_date as 'Project Completion Date',
    pmc.per_pmc_charges as '% Of PMC Charges',
    pmc.total_pmc_charges_scheme as 'Total PMC amount   of the Scheme',
    pmc.bill_amount_certified_upto_previous_month as 'Bill amount certified upto previous Month',     
    pmc.total_PMC_charges_upto_previous_month as 'Total PMC charges  upto previous Month',
    pmc.receipt_PMC_charges_upto_previous_month as 'Receipt of PMC Charges upto previous Month',
    pmc.balance_of_PMC_charges_upto_previous_month as 'Balance of PMC charges upto previous Month',
    pmc.bill_amount_certified_current_month as 'Bill amount certified During Current Month',
    pmc.PMC_charges_for_current_month as ' PMC charges  During Current Month',
    pmc.receipt_PMC_charges_current_month as 'Receipt of PMC Charges During Current Monthh',
    pmc.balance_of_PMC_charges_current_month as 'Balance of PMC charges During Current Month'
FROM 
    TBL_PMC pmc 
        INNER JOIN TBL_DIV 
            ON TBL_DIV.ID = pmc.DIV_ID
        LEFT OUTER JOIN TBL_PMC_UNIT 
            ON TBL_PMC_UNIT.ID=pmc.UNIT_ID  
WHERE 
    pmc.div_id= 17 
    --and pmc.unit_id=@unit_id;
group by  
    pmc.[month]
) a left join 

(select  
       pmc.[month] as 'Month', 
       SUM(pmc.salary_allowance) as 'Salary & Allowance Division'
FROM 
    TBL_PMC pmc 
        INNER JOIN TBL_DIV 
            ON TBL_DIV.ID = pmc.DIV_ID
        LEFT OUTER JOIN TBL_PMC_UNIT 
            ON TBL_PMC_UNIT.ID=pmc.UNIT_ID  
WHERE 
    pmc.div_id= 17 
    --and pmc.unit_id=@unit_id;
group by  
    pmc.[month]) b

on a.month = b.month 
```

# javascript - 使用 jQuery 选项卡显示隐藏附加内容

> ID：12349335
> 
> 赞同：1
> 
> 时间：2012-09-10T09:59:32.817
> 
> 标签：javascript, jquery, tabs

我们在页面的中心栏中使用五个选项卡，用于显示/隐藏内容。

在我们的右侧列中，只有在选择第一个选项卡时才应该出现一些内容（这是页面加载时的默认设置，名为“#overview”）。

如何确保在选择选项卡 2、3、4 或 5 时，此右侧 div 设置为 display:none？不幸的是，我不能在选项卡 1 的内容中包含这将是一个简单的解决方案 - 它必须显示在右栏中。

我要隐藏的类是' `kis-widget`'（选择#overview 时），我们的显示/隐藏代码是：

```
 $(document).ready(function()
    {
      if (window.location.hash)
      {
         show(window.location.hash);
      }
      else
      {
        show('#overview');
      }
    });

    function show(id)
    {
      $('#overview_div, #coursecontent_div, #profiles_div, #requirements_div, #fees_div').hide();
      $('#tabs li a').removeClass("selected");
      $(id + '_div').show();
      $(id + '_link').addClass("selected");
    } 
```

将不胜感激任何帮助。

谢谢

尼尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:04:13.627

> 如何确保在选择选项卡 2、3、4 或 5 时，此右侧 div 设置为 display:none？

沿着这条线：

```
DOM:
   TAB 1 .tab .tab-first 
   TAB 2 .tab 
   TAB 3 .tab
   TAB 4 .tab
   TAB 5 .tab 
```

下面的代码：

```
function hiderighthanddiv(evt)
{
//whatever you want
}

function showrighthanddiv(evt)
{
//whatever you want
}

$('.tab').not('.tab-first').bind('click',hiderighthanddiv);

$('.tab-first').bind('click',showrighthanddiv); 
```

# javascript - 如何使用 AJAX 刷新表格

> ID：12349339
> 
> 赞同：4
> 
> 时间：2012-09-10T09:59:42.813
> 
> 标签：javascript, jquery, ajax, coldfusion, coldfusion-9

我正在尝试从我的数据库中获取要更新的表。我一直在尝试遵循 php 指南，因为它认为它会非常相似，但我可以让它工作。

我有一个单独的文件，它获取数据并将其放入表中。然后我尝试使用 Javascript 来获取文件并刷新它。

这是我的主要文件。

```
<module template="../includes/header.cfm"  pagetitle = "Jaguar Live Capture">   
<div class="container-fluid">
  <div class="row-fluid">
    <div class="span12">
     <h1>Live Capture</h1><br />
     <h2>Pen 1</h2>
     <div id="tableHolder"></div>

    </div><!--/span-->
  </div><!--/row--> 
```

这是我的 getData.cfm

```
 <cfquery name="liveFeed">
SELECT * FROM details LIMIT 0, 10   
</cfquery>

    <style>
    .oddRow{background:#ffffff;}
    .evenRow {background: #DBDBDB;}
    .warn{background:red;}
    </style>

<table cellpadding="2">
<cfoutput query="liveFeed">

     <cfif liveFeed.currentRow mod 2><cfset rowstyle = "oddRow">
    <cfelse><cfset rowstyle = "evenRow">
    </cfif>

    <cfscript>
    if (liveFeed.form_id == "" || liveFeed.first_name =="" || liveFeed.surname =="" || liveFeed.email ==""){ rowstyle = "warn";}
    </cfscript>

    <tr class="#variables.rowstyle#">
        <td onclick="window.open('update.cfm?form_id=#liveFeed.form_id#', 'Update Details', 'width=350, height=350'); return false;">#liveFeed.form_id#</td>
        <td onclick="window.open('update.cfm?form_id=#liveFeed.form_id#', 'Update Details', 'width=350, height=350'); return false;">#liveFeed.title#</td>
        <td onclick="window.open('update.cfm?form_id=#liveFeed.form_id#', 'Update Details', 'width=350, height=350'); return false;">#liveFeed.first_name#</td>
        <td onclick="window.open('update.cfm?form_id=#liveFeed.form_id#', 'Update Details', 'width=350, height=350'); return false;">#liveFeed.surname#</td>
        <td onclick="window.open('update.cfm?form_id=#liveFeed.form_id#', 'Update Details', 'width=350, height=350'); return false;">#liveFeed.email#</td>
    </tr>
</cfoutput>
</table> 
```

我尝试了一些 javascript 和 ajax，但没有成功。谁能帮我创建脚本来刷新页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T12:15:13.920

试试这个...

```
<script type="text/javascript">
    window.setInterval(function(){$('#tableHolder').load('/getData.cfm');}, 6000);
</script> 
```

[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp)用于每 60 秒触发一次匿名函数。

匿名函数使用 jQuery [.load()](http://api.jquery.com/load/)函数从服务器获取文件 HTML 并用它替换选定的元素 HTML。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T11:01:18.543

您可以使用该`cfdiv`标签为您管理 AJAX 请求：

```
<cfdiv id="tableHolder" bind="url:getData.cfm" /> 
```

然后，您可以使用[ColdFusion.navigate](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=JavaScriptFcns_24.html)函数重新加载或更改该 div 的 URL。

```
ColdFusion.navigate('getData.cfm', 'tableHolder'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T12:02:09.697

您可以使用 jQuery load() 非常简单地做到这一点。load() 将向页面发出异步请求，然后将响应加载到指定的元素中。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script>
$(function(){
    $('#tableHolder').load('getData.cfm');
});
</script> 
```

尝试将以上内容复制到您的页面中。

# java - 在struts2中的同一个隐藏变量中传递多个相同类型的值

> ID：12349345
> 
> 赞同：0
> 
> 时间：2012-09-10T10:00:09.587
> 
> 标签：java, jquery, struts2, struts

一开始，我使用 struts2、java 和 javascript 来完成我的工作。我将问题概述如下。

我的页面上有下表 -

```
___________________________
checkbox  |  phone  | Name      
---------------------------
   []     | 123-456 | abcde

   []     | 234-567 | testname
____________________________ 
```

（这是一个大纲，但请留在我身边）

该表的代码如下：

```
<s:if test="reportFilter.huntGroups!=null && reportFilter.huntGroups.size()>0">
    <s:iterator var="huntGroupVO" value="reportFilter.huntGroups" status="huntGroupKey">
      <tr <s:if test="#huntGroupKey.odd">class="oddRows"</s:if>>
        <td width="40px"><s:checkbox id="specHg_checkbox_%{#huntGroupKey.index}" name="reportFilter.selectedHuntGroups"  fieldValue="%{#huntGroupVO.phoneNumber}" value="%{reportFilter.selectedHuntGroups!=null && reportFilter.selectedHuntGroups.contains(#huntGroupVO.phoneNumber)?true:false}" theme="simple"></s:checkbox></td>
      <td>
        <s:if test="#huntGroupVO.phoneNumber.length()>0">
          <s:property value="#huntGroupVO.phoneNumber"/>
        </s:if>
        <s:else>
          <s:property value="#huntGroupVO.userGroupId"/>
        </s:else>
      </td>

      <td class="hntName"><s:property value="#huntGroupVO.name"></s:property></td>
    </tr>
  </s:iterator>
</s:if> 
```

很明显，当我勾选复选框时，我将电话号码作为值传递。问题是，我也想传递名字。

我知道我们可以使用连字符之类的方式将其与电话号码一起传递。

假设我有另一个变量`ArrayList<String> hiddenName`，我想填充与该变量中勾选的复选框相对应的名称。（我想通过一个`s:hidden`参数）

如果这听起来有点令人困惑，我深表歉意，但请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:46:45.030

显然，您只能在任何给定的表单字段中传递单个值。

您有许多选项，从简单的（使用字符串并将其拆分以获取两个值）到中间（传递 ID 并在 Java 中检索适当的值）到复杂的自定义类型转换。

哪个最有意义在很大程度上取决于您的数据在哪里，您的数据*如何*，等等。

* * *

不相关，但我发现 JSP 很难阅读。我会重构大量。以下内容未经测试，但更接近我在代码审查后的预期。

```
<s:if test="reportFilter.showGroups">
  <s:iterator value="reportFilter.huntGroups" status="status">
    <tr>
      <td>
        <s:checkbox id="specHg_checkbox_%{#status.index}" theme="simple"
                    name="reportFilter.selectedHuntGroups" 
                    fieldValue="phoneNumber" 
                    value="%{reportFilter.hasNumber(phoneNumber)}" />
      </td>

      <td>
        <s:set var="num" value="${phoneNumber.length() > 0 ? phoneNumber : userGroupId" />
        <s:property value="#num"/>
      </td>

      <td class="hntName"><s:property value="name"/></td>
    </tr>
  </s:iterator>
</s:if> 
```

有几点需要注意：

*   决定我们是否将显示封装在 Java 中的组的逻辑。也使测试更容易。
*   迭代对象的合理、较短的名称：它是一个组（或 huntGroup）。
*   提取（电话号码|| 组ID）值，消除一堆JSP 标记。
*   （理想情况下，该逻辑将隐藏在 Java 中，无论是在 VO 中还是在装饰器中。）
*   迭代器标签将迭代对象推送到值堆栈上，无需直接按名称引用它。这个有点不确定。这取决于您的需求。
*   在现实生活中，我可能会将整个组事物放入单独的 JSP 或自定义标记中。

# jpa - 将 DB 数据写入二进制文件

> ID：12349346
> 
> 赞同：0
> 
> 时间：2012-09-10T10:00:10.460
> 
> 标签：jpa, data-access-layer, binaryfiles

我正在处理每天都在增长的大型数据库。从该数据库中提取所需的数据涉及一些连接，并且由于数据量大，需要的时间太长。有朋友建议如下：

每天一次从这个数据库中提取所有需要的数据并将其写入一个二进制文件，该文件将驻留在您的源代码控制中。接下来，创建一个将针对这个二进制文件工作的 dal 实现，这样事情应该可以顺利进行。

我不熟悉这种方法，我想知道 - 这是一个好习惯吗？这种做法的优缺点是什么，最后有没有关于这种实现的参考（目前我正在使用 JPA）？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:37:29.397

一些东西，

您可能可以优化查询数据的方式。见，[http://java-persistence-performance.blogspot.com/2010/08/batch-fetching-optimizing-object-graph.html](http://java-persistence-performance.blogspot.com/2010/08/batch-fetching-optimizing-object-graph.html)

如果您在 JPA（或 EclipseLink）中启用缓存，那么您可以避免查询数据库中的数据。见，[http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching](http://wiki.eclipse.org/EclipseLink/UserGuide/JPA/Basic_JPA_Development/Caching)

您可以将数据存档在数据库中以避免它变得很大。或者对数据进行分区，以便表中只有当前数据。

您可以为当前数据使用本地或内存数据库，或使用 Oracle TimesTen 等产品或 Oracle Coherence 等缓存产品。

# c# - 获取 mxf 文件持续时间

> ID：12349347
> 
> 赞同：1
> 
> 时间：2012-09-10T10:00:14.593
> 
> 标签：c#

我试图找到视频文件的持续时间。我能够使用下面提到的 shellconcept 获得 , 等`.mov`的长度。`.mp4`

[C# 从元数据中获取视频文件持续时间](https://stackoverflow.com/questions/1256841/c-sharp-get-video-file-duration-from-metadata)

我没有得到`mxf`文件的持续时间，是否可以在 C# 中计算它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T06:25:10.770

我找到了另一种查找 mxf 文件持续时间的简单方法。

从 Web 下载 MediaInfo.dll 并将其放在“C:\Windows”文件夹中，并将 mediainfoDll.cs 包含在您的项目中。

通过使用以下代码，您将能够获得 .mxf 文件的持续时间

```
MediaInfo aMediaInfoL = new MediaInfo();
aMediaInfoL.Open("C:\Users\\Desktop\\drop\mxf\xdcam-pal-dv25.mxf");
aMediaInfoL.Option("Inform", "General;%Duration%");
string durationL = aMediaInfoL.Inform();
aMediaInfoL.Close();
string  durationminutesL
  = TimeSpan.FromMilliseconds(Convert.ToDouble(durationL)).TotalMinutes; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T05:14:14.287

如果我们在二进制编辑器中打开 mxf 文件，我们可以看到 xml 标头中存在持续时间..如下所示

```
Duration value="89" 
```

在代码中，您可以通过打开文件来阅读它

```
FileStream streamL =
 File.Open("C:\\temp\\test.mxf", FileMode.Open, FileAccess.Read, FileShare.ReadWrite)) 
```

然后循环读取字节，直到找到 Duration

```
int nBytesReadL = streamP.Read(HeaderBufferL, 0, BufferLengthL);
string zTextRepresentationL = 
   System.Text.ASCIIEncoding.Default.GetString(HeaderBufferL, 0, nBytesReadL); 
```

从上面的字符串 xml 你可以得到持续时间

# php - 如何根据浏览器区域设置重定向用户而不丢失任何排名

> ID：12349348
> 
> 赞同：1
> 
> 时间：2012-09-10T10:00:22.850
> 
> 标签：php, redirect, web, seo, multilingual

我目前有一个只有英文的网站。该站点已在搜索引擎中编入索引。我正在翻译它，我的新 URL 是这样的：

*   英文：[http ://www.mywebsite.com/en/controller/method](http://www.mywebsite.com/en/controller/method)
*   法语：[http ://www.mywebsite.com/fr/controller/method](http://www.mywebsite.com/fr/controller/method)

我希望当用户在 URL 中**没有任何区域设置**的站点上加载页面时，他会被重定向到一个新的 URL *，其中包含他的浏览器区域设置*。
我的问题**不是如何做到这一点**，但我不想在搜索引擎中失去任何排名，而且我不知道`301`重定向是否足够，因为搜索引擎将根据他们提供的语言环境被重定向到两个不同的 URL ...

**谷歌会明白吗？**

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:06:06.707

搜索引擎通常不发送浏览器区域设置（Accept-Language HTTP 标头）。这意味着他们只会看到您为没有区域设置信息的请求实施的默认选项，这可能应该是英语，因为它已经被索引了。

有关重定向的所有其他标准规则均适用。

# jquery - 通过 $ajax 传递大量 html 不起作用

> ID：12349349
> 
> 赞同：0
> 
> 时间：2012-09-10T10:00:25.657
> 
> 标签：jquery, ajax

我正在为电子商务制作一个产品添加页面，在提交数据后，ajax 调用将所有数据传递到查询页面，并将信息存储到数据库中。但问题是，当传递大量 html 数据时，它不会传递`description`. 假设在描述区域写一个简短的段落然后它很容易通过 ajax。但每当有长段落或让大量的html数据。它失败 。我使用的代码是

```
function product()
{
var micategory=$('.micatg option:selected').val();
var misubcategory=$('.misubcatg option:selected').val();
var currency=$('.micurrency option:selected').val();
var looking_for=$('input:radio[name=lookingfor]:checked').val();
var title=$('.btitle').val();
var condition=$('input:radio[name=bcondition]:checked').val();
var buy_description=CKEDITOR.instances['textarea_description_add'].getData();

var buy_country=$('.bcountry option:selected').text();
var buy_city=$('.bcity').val();
var zipcode=$(".bzipcode").val();
var price=$(".bprice").val();
var video_link=$("#infolink").val();
var address=$(".baddress").val();
var loguser=$("#loginuser").val();
var product_id=$("#prod_id").val();
var dataString = 'category='+ micategory+'&subcategory='+misubcategory+'&currency='+currency+'&looking_for='+looking_for+'&title='+title+'&condition='+condition+'&country='+buy_country+'&city='+buy_city+'&zipcode='+zipcode+'&price='+price+'&video_link='+video_link+'&address='+address+'&loguser='+loguser+'&product_id='+product_id+'&description='+encodeURIComponent(buy_description);
alert(dataString);

$.ajax({
type: "GET",
url: "modules/buy&sell/add_prod.php",
data: dataString,
cache: false,
success: function(html){
alert(html);
alert("Your Product is Successfully Added");
window.location = "buy.php";
 }
 });
} 
```

由于大量的 html，我`encodeURIComponent`在堆栈中的某个地方使用过阅读。但仍然没有帮助。谁能帮我这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:02:11.530

使用***`POST`而不是`GET`***，因为 的大小限制`GET`。

在 ajax 配置对象中。

所以，它看起来像：

```
$.ajax({
    type: "POST",
    url: "modules/buy&sell/add_prod.php",
    data: dataString,
    cache: false,
    dataType: 'html', // add this if you only passed html, if have other value then remove it
    success: function(html) {
        alert(html);
        alert("Your Product is Successfully Added");
        window.location = "buy.php";
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T10:02:42.220

我认为这是由于使用 GET 方法传递数据时对数据大小的限制。

更多细节[在这里](https://stackoverflow.com/questions/2659952/maximum-length-of-http-get-request)。

您应该改用 POST 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:04:53.110

你应该使用 post 方法，

类型：“发布”，

使用 Get 方法，我们可以发送有限的数据。这取决于浏览器。

# java - Java 搜索模式正则表达式样式

> ID：12349353
> 
> 赞同：2
> 
> 时间：2012-09-10T10:01:05.017
> 
> 标签：java, regex, search

我的问题如下：

**Java中是否有可以输入输入并为其构建搜索/正则表达式模式的Pattern-Builder？**

**这个例子：**

**我所拥有的：** 加载名称列表。开始阅读文件，并使用完整的名称列表检查每一行。（这会创建一个笛卡尔积，但我不想要那个）。

**我想要实现的目标：** 加载正则表达式应考虑的名称列表创建模式并将所有名称加载到模式中。阅读第一个文件并用模式检查它。

所以你可以看到我想将笛卡尔积减少到 O[n] 序列以节省性能。

条件：
正则表达式模式应该从列表中加载，因此它是动态的。
输入可以是任何东西，输出应该是警报，以防任何名称匹配。

如果您认为我没有提供足够的信息，请询问，我很乐意尽我所能提供更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:07:12.670

您可以做的是创建一个带有名称的集合。这将保证您拥有具有 O(1) 访问时间的不同名称列表。然后，您可以检查文件中的行中的名称是否存在于该集中。

但这可能不是完美的解决方案。要获得更多帮助，您应该提供文件预览和示例输入和输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:28:44.493

不幸的是，dasblinkenlight 在评论中给出了答案，

编译这么大的模式结果还可以，我用4.5 MB的模式试了一下。我希望没有限制。

# regex - 否定这个正则表达式 - 如何？

> ID：12349355
> 
> 赞同：0
> 
> 时间：2012-09-10T10:01:06.163
> 
> 标签：regex, replace

我有这个正则表达式：`[A-Z][A-Z] \d\d`

我想用它来替换与空格（或任何其他字符）不匹配的所有内容。我怎样才能做到这一点？我否定字符类在这种情况下不起作用，因为正则表达式本身有 2 个字符类。

字符串的一小部分如下所示：

```
<div class=""></div>CL 17 </a><br> 
```

只有 CL 17 应该保留，其余的应该是空白的。

**注意：**我注意到这似乎很复杂，所以我通过编写一个小的 PHP 脚本来解决它，该脚本获取匹配列表 (preg_match_all) 并以适合我的情况的方式处理这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:14:24.463

在您上次编辑后，我建议：

```
.*?([A-Z]{2} \d{2}).*?(?=[A-Z]{2} \d{2}|$) 
```

然后替换为第一组。

（编辑前回答）：

```
[^A-Z][^A-Z]\S\D{2} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:18:37.423

在最后一个帖子编辑之后，您正在替换字符串中寻找向后引用：

```
pattern:  ^.*?([A-Z][A-Z] \d\d).*$
replace:  $1 
```

也许相当于这个

```
pattern:  ^.*?(?=[A-Z][A-Z] \d\d)|(?<=[A-Z][A-Z] \d\d).*$
replace:  **nothing** 
```

# python - 带有 Mongo 连接错误的 Celerybeat

> ID：12349358
> 
> 赞同：2
> 
> 时间：2012-09-10T10:01:19.477
> 
> 标签：python, mongodb, celery, celeryd, celerybeat

我正在尝试使用 celerybeat 设置一个 celery 任务队列，以便定期更新数据库。我的 celeryd 服务似乎运行良好，但 celerybeat 不断给我一个`Connection error: [Errno 111]`：

```
[2012-09-10 09:40:18,954: INFO/MainProcess] Celerybeat: Starting...
[2012-09-10 09:40:19,001: ERROR/MainProcess] Celerybeat: Connection error: [Errno 111] Connection refused. Trying again in 2.0 seconds...
[2012-09-10 09:40:22,004: ERROR/MainProcess] Celerybeat: Connection error: [Errno 111] Connection refused. Trying again in 4.0 seconds...
[2012-09-10 09:40:32,012: ERROR/MainProcess] Celerybeat: Connection error: [Errno 111] Connection refused. Trying again in 6.0 seconds...
[2012-09-10 09:40:53,030: ERROR/MainProcess] Celerybeat: Connection error: [Errno 111] Connection refused. Trying again in 8.0 seconds...
[2012-09-10 09:41:29,052: ERROR/MainProcess] Celerybeat: Connection error: [Errno 111] Connection refused. Trying again in 10.0 seconds... 
```

这是我的 celeryconfig 文件：

```
from celery.schedules import crontab
import datetime

BROKER_URL = 'mongodb://localhost:27017/tasks'
CELERY_RESULT_BACKEND = 'mongodb'
CELERY_MONGODB_BACKEND_SETTINGS = {
    "host": "127.0.0.1",
    "port": 27017,
    "database": "celery",
    "taskmeta_collection": "celery_taskmeta",
}

CELERYBEAT_SCHEDULE = {
    'update-linked-calendars': {
        'task': 'tasks.initiateUpdate',
        'schedule': crontab(minute=0, hour='*/1')
    },
}

CELERY_IMPORTS = ('tasks',) 
```

我已经为此工作了很长时间，但仍然对为什么会收到此错误感到困惑。我的 MongoDB 没有用户/密码（完美地用于我的应用程序）。任何帮助将不胜感激！

# scala - liftweb - 更改基本网址

> ID：12349360
> 
> 赞同：1
> 
> 时间：2012-09-10T10:01:20.287
> 
> 标签：scala, tomcat, lift

我有一个用 Liftweb 开发的网站，它在端口 80 上的 apache 网络服务器后面的端口 8080 上的 tomcat 6 上运行。apache 服务器将 / 路径绑定到 tomcat 应用程序文件夹（看起来像 /liftweb-application/）。

不幸的是，lift 在我的 HTML 代码中自动添加了 liftWeb.js，并以 tomcat 应用程序文件夹为前缀。因此，我使用不存在的 www.mydomain.com/liftweb-application/ajax_request/liftAjax.js 而不是 www.mydomain.com/ajax_request/liftAjax.js。

我的问题是：有没有办法将基本网址从 www.mydomain.com/liftweb-application/ 更改为 www.mydomain.com/ ？

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:14:14.160

是的，您需要将 WAR 文件部署为 Tomcat 中的 ROOT 上下文。这似乎是一个相当不错的解释：[http ://benhutchison.wordpress.com/2008/07/30/how-to-configure-tomcat-root-context/](http://benhutchison.wordpress.com/2008/07/30/how-to-configure-tomcat-root-context/)

# android - 从 listpreference 中的 sharedpreference 获取向用户显示的文本

> ID：12349369
> 
> 赞同：1
> 
> 时间：2012-09-10T10:01:55.670
> 
> 标签：android, android-preferences

我的问题非常类似于[Android listpreference - 获取值](https://stackoverflow.com/questions/4761126/android-listpreference-fetching-value)

我已经在 Main Activity 上实现了 OnSharedPreferenceChangeListener。偏好活动膨胀preference.xml

在`public void onSharedPreferenceChanged(SharedPreferences pref, String key)`主要活动上，

我可以：

`SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
intensity= Float.valueOf(prefs.getString("VIB_INTENSITY", "1.0"));`

获得价值。但就像链接的问题一样，我希望将值和文本都显示给用户，即来自两个数组的值。

我可以喜欢接受的答案，但我想知道是否还有其他内置方法。

# r - 创建密度图时出错

> ID：12349371
> 
> 赞同：2
> 
> 时间：2012-09-10T10:02:09.453
> 
> 标签：r, for-loop, plot

我想创建 45 个样本的密度图，但有些样本将无法形成密度，因为存在缺失值。我遇到的错误是

> density.default(assayData(data.lair)$lair.predicted[, i], na.rm = TRUE) 中的错误：需要至少 2 个点才能自动选择带宽

有人知道如何在函数中解决这个错误。

数据的名称被提取到位列表：

```
c("00_11242T1.bmp", "00_7T.bmp", "01_677T.bmp", "106T.bmp", "106TV.bmp", 
"108T.bmp", "108TV.bmp", "124T.bmp", "124TV.bmp", "40T.bmp", 
"4497T.bmp", "44T.bmp", "44TV.bmp", "511T.bmp", "511TV.bmp", 
"514T.bmp", "514TV.bmp", "56T.bmp", "92_11145T.bmp", "94_10917T1.bmp", 
"95_549T.bmp", "97_12714T1.bmp", "97_7999T.bmp", "97_8073T2.bmp", 
"99_2221T.bmp", "99_6669T.bmp", "99_7417T1.bmp", "99_7417T2.bmp", 
"R01_80418T2.bmp", "R01_81197T.bmp", "R02_80456T2.bmp", "R03_80356T.bmp", 
"R03_80586T.bmp", "R04_80227T.bmp", "R04_80577T.bmp", "R04_80584T.bmp", 
"R04_81371T.bmp", "R04_81372T1.bmp", "R04_81449T.bmp", "R05_80479T.bmp", 
"R05_80481T.bmp", "R05_80611T.bmp") 
```

我正在使用的功能：

```
for( i in (1:ncol(data.lair))) {
  bmp(filename = bitlist[i], width = 1200, height = 1200, units = "px",bg = "white")
  par(mfrow=c(1,2))
  plot(density(assayData(data.lair)$lair.predicted[,i],na.rm=TRUE),main = bitlist[i])
  plot(density(assayData(data.lair)$predicted[,i],na.rm=TRUE),main = bitlist[i])
  cat(i,"\n")
  dev.off()
} 
```

数据可以在这里下载： [DATA](https://www.dropbox.com/sh/qejohtpkiawn45b/iOKQySJ-Zv/5701data.RData)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T17:09:36.567

获得的错误消息是由包含没有足够值的向量引起的。在您的数据中，某些向量`NA`仅包含。

例如索引的第二个值：

```
i <- 2
dat <- assayData(data.lair)$lair.predicted[ , i]
any(!is.na(dat))
# [1] FALSE 
```

如果您不为这些向量创建密度图，则可以运行循环。检查向量是否包含足够数量的数据点。这是您的代码稍作修改的版本：

```
for( i in (1:ncol(data.lair))) {
  bmp(filename = bitlist[i], width = 1200, height = 1200, units = "px",bg = "white")
  if (sum(!(is.na(assayData(data.lair)$lair.predicted[,i]))) > 1) {
    par(mfrow=c(1,2))
    plot(density(assayData(data.lair)$lair.predicted[,i],na.rm=TRUE))  
  } 
  plot(density(assayData(data.lair)$predicted[,i],na.rm=TRUE))  
  cat(i,"\n")
  dev.off()
} 
```

在某些情况下，您只会获得循环中第二个向量的密度图。

# php - 如何在 Symfony 1.4 中实现移动版本？

> ID：12349375
> 
> 赞同：2
> 
> 时间：2012-09-10T10:02:32.340
> 
> 标签：php, mobile, symfony1, symfony-1.4

实现在 Symfony 1.4 中开发的 Web 应用程序的 MobileVersion 的最佳方式是什么？我在谷歌上搜索但没有成功。

真的不知道如何开始，或者是否有任何标准可以遵循。我应该只实现不同的模板还是完全不同的应用程序（如前端/后端）。

我的第一个问题是实现一个过滤器，它就像一个 onRequest 侦听器，如果用户代理是移动的，则重定向到移动应用程序。但我认为以这种方式（使用不同的应用程序）很难从移动版本迁移到浏览器版本，反之亦然。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T11:15:18.357

这几乎就是 symfony 网站上定义的方式。

查看文章：[How to create an optimization version of your website for iPhone in symfony 1.1](http://symfony.com/blog/how-to-create-an-optimized-version-of-your-website-for-the-iphone-in-symfony-1-1)，特别是这部分：

```
// config/ProjectConfiguration.class.php
class ProjectConfiguration extends sfProjectConfiguration
{
  public function setup()
  {
    // ...

    $this->dispatcher->connect('request.filter_parameters', array($this, 'filterRequestParameters'));
  }

  public function filterRequestParameters(sfEvent $event, $parameters)
  {
    $request = $event->getSubject();

    if (preg_match('#Mobile/.+Safari#i', $request->getHttpHeader('User-Agent')))
    {
      $request->setRequestFormat('iphone');
    }

    return $parameters;
  }
} 
```

现在，来自 iPhone 的每个请求都将使用 *Success.iphone.php 模板而不是 *Success.php 模板。

正如您所说，从一个环境切换到另一个环境会更加困难。就像从 iPhone 上查看完整的网站一样。为此，您应该使用带有参数的 session 来处理它`?doaction=read_on_site`，设置一个 cookie 并在`filterRequestParameters`.

**编辑：**

改用过滤器会更容易。轻松访问请求和响应

```
<?php 

class iPhoneFilter extends sfFilter
{
  public function execute ($filterChain)
  {
    // get the cool stuff
    $context    = $this->getContext();
    $request    = $context->getRequest();
    $response   = $context->getResponse();

    if ($this->isFirstCall())
    {
      $cookies = $response->getCookies();
      if (preg_match('#Mobile/.+Safari#i', $request->getHttpHeader('User-Agent'))
       && ! isset($cookies['doaction']))
      {
        $request->setRequestFormat('iphone');
      }
    }

    // execute next filter
    $filterChain->execute();
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T12:14:44.030

我同意过滤方式，效果很好。

您应该使用[Mobile detect](https://github.com/serbanghita/Mobile-Detect)或类似的库，而不是使用手动检测，它为您提供了更大的灵活性。

您还可以查看[本教程](http://webmozarts.com/2010/09/07/creating-mobile-symfony-sites/)中的 sfView 补丁，当 iPhone 视图未定义时回退到默认视图很有趣。这是非常有用的。

# twitter - 在 iPhone 应用程序中使用的 Twitter SDK

> ID：12349376
> 
> 赞同：0
> 
> 时间：2012-09-10T10:02:37.230
> 
> 标签：twitter, ios5

我是 iphone 应用程序世界的新手。我有一些问题 1.如何在我的应用程序中使用 twitter SDK？2.在iphone app中使用twitter的流程是什么？？

我正在使用 iPhone SDK 5.0 是否有任何可用于简单 twitter SDK 或 API 的运行演示代码？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T08:44:18.510

从 iOS 5.0 的 SDK 开始，您可以使用 Twitter 框架。不过要小心。一些方法在 6.0 中已被弃用。

# google-app-engine - OpenID 登录不再有效

> ID：12349380
> 
> 赞同：0
> 
> 时间：2012-09-10T10:02:43.970
> 
> 标签：google-app-engine, openid

我们有 2 个 AppEngine Python 应用程序，它们通过开放 id api (create_login_url) 进行联合登录。

我们让登录工作了一段时间，但目前在 /_ah/login_redir 上收到 HTTP 204。

流程或 API 最近是否有任何更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T05:46:18.637

经过一些分析，我们发现一些 OpenID 提供程序仍在工作，而其余的问题是由不同的问题引起的（例如更改了端点 url，或者没有正确注册端点）。

我们仍然对 myspace.com 有问题（目前这对我们来说并不那么重要）。

谢谢你的帮助。

# mongodb - 添加实时分析参数

> ID：12349381
> 
> 赞同：1
> 
> 时间：2012-09-10T10:02:46.637
> 
> 标签：mongodb, parameters, profiling

我想将慢速日志参数附加到我的实时 MongoDB 实例，但我不想将其关闭、添加`--profile --slowtime`参数并重新启动我的 MongoDB。有没有办法在直播时添加参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:19:28.440

您可以在 mongod 运行时使用 mongo shell 和 setProfilingLevel 命令启用分析。

```
db.setProfilingLevel(1,20) 
```

将启用 20ms 的慢速分析。

有关更多详细信息，请参见此处：[数据库探查器](http://www.mongodb.org/display/DOCS/Database+Profiler)。

# jquery - jQuery :not/.not 过滤器行为不正确

> ID：12349386
> 
> 赞同：0
> 
> 时间：2012-09-10T10:03:07.140
> 
> 标签：jquery

所以我试图通过javascript（主要是为了优雅的降级目的）等在我的文档的某个部分中将一些代码附加到我的所有图像（用于翻转）等等

在注意到我的功能不起作用之后……我写了一个超小的功能来测试它，但没有用。在这个例子中，我试图做的是提醒一个图像 alt 标签，而**不是**一个特定的按钮 div。本质上，将所述功能应用于父 div (portSecW) 中的所有图像，而不是关闭按钮图像/div。

所以为了这个例子，这里有一些 HTML（伪）：

```
<div id="portSecW">
  <img src="X" alt="something here"></img>
  <img src="a" alt="something here"></img>
  <img src="b" alt="something here"></img>
  <div class="closeXbtn"><img src="g" alt="something here"></img></div>
</div> 
```

这是我尝试过的。

```
$('#portSecW img:not(".closeXbtn")').click(function(){
    alert($(this).attr("alt")); 
    return false;
}); 
```

我也这样做了

```
$('#portSecW img').not('.closeXbtn').click(function(){
    alert($(this).attr("alt")); 
    return false;
}); 
```

我也尝试过这样但不起作用（所以我假设虽然我没有收到错误，但它没有正确构造，因为警报功能不会触发。）

```
$('#portSecW img.not(".closeXbtn")').click(function(){
    alert($(this).attr("alt")); 
    return false;
}); 
```

所以不确定我做错了什么。

提前致谢。

**注意：**以防万一有人在看，标记的“接受的答案”对我有用，但在进一步挖掘后。我上面的所有尝试都有效，问题是我对遍历 DOM 的方式不够精确。所以所有这些都是同样的事情和工作。这是我所做的更改，再次，这些都有效。

```
$('#portSecW a').children('img').click(function(){
    alert($(this).attr("alt")); 
    return false;
});

$('#portSecW img').not(".closeXbtn img").click(function(){
    alert($(this).attr("alt")); 
    return false;
});

$('#portSecW img:not(".closeXbtn img")').click(function(){
    alert($(this).attr("alt")); 
    return false;
}); 
```

谢谢大家的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:04:57.323

尝试删除类周围的引号，例如：

```
$('#portSecW img:not(.closeXbtn)').click(function(){
  alert($(this).attr("alt")); 
  return false;
}); 
```

如果失败，您可以执行以下操作：

```
$('#portSecW img').click(function(){
  if($(this).hasClass('closeXbtn')))  { /* do something */ }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:11:42.093

使用`.children()`：

```
$('#portSecW').children('img').click(function(){
    alert($(this).attr("alt")); 
    return false;
}); 
```

该`.children()`方法允许我们在 DOM 树中搜索这些元素的子元素，并从匹配的元素中构造一个新的 jQuery 对象。

该`.children()`方法的不同之处`.find()`在于`.children()` **它只沿着 DOM 树向下移动一层**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:08:45.127

试试这个：

```
$('#portSecW img').not(".closeXbtn img").click(function(){
    alert($(this).attr("alt")); 
    return false;
}); 
```

或者

```
$('#portSecW > img').click(function(){
    alert($(this).attr("alt")); 
    return false;
}); 
```

第二个更准确。这会将点击事件绑定到`portSecW`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T10:09:02.013

也许这可以帮助你：

```
$('#portSecW > img').click(function(){
    alert($(this).attr("alt")); 
    return false;
}); 
```

...它只会选择主 div 的直接 IMG 后代，省略 closeXbtn div 中的那个。

但是，如果您需要保留功能，也许这可能会更好用：

```
$('#portSecW img:not(:parent(.closeXbtn))').click(function(){
    alert($(this).attr("alt")); 
    return false;
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T10:10:31.887

删除您的“不”并简单地编辑它

```
$('#portSecW img').click(function(){
  if($(this).hasClass('closeXbtn'))
    //Do some play
}) 
```

# java - Java & Excel：值被读取错误

> ID：12349391
> 
> 赞同：0
> 
> 时间：2012-09-10T10:03:25.437
> 
> 标签：java, excel, parsing, apache-poi

我正在解析 Excel 文件中的数据并将其添加到我的数据库中`HSSFCell`，用于解析 Excel 文件，我正在使用以下代码读取文件

```
public void printCellDataToConsole(Vector dataHolder) throws SQLException {
            // this is for the rows in the file, set to one to skip the headings
            List<String> studentInformation = new ArrayList<>();
            for (int i = 1; i < dataHolder.size(); i++) {
                    Vector cellStoreVector = (Vector) dataHolder.elementAt(i);
                    // this is for the colums in the table
                    for (int j = 0; j < cellStoreVector.size(); j++) {
                            HSSFCell myCell = (HSSFCell) cellStoreVector.elementAt(j);
                            String stringCellValue = myCell.toString();
                            System.out.print(stringCellValue + "\t");                  
                    }
                    connectToDatabase.ammendTableInDatabase("INSERT INTO Student VALUES (" + cellStoreVector.get(0) + ",'" + cellStoreVector.get(1) + "','" + cellStoreVector.get(2) + "','" + cellStoreVector.get(3) + "','" + cellStoreVector.get(4) + "'," + cellStoreVector.get(5) + ",'" + cellStoreVector.get(6) + "')");
                    System.out.println();
            }
    } 
```

一切正常，但是当我尝试读取如下任何值时

```
111223361
111223362
111223364
111223363
111223366 
```

它读取它们如下

```
1.11223361E8
1.11223362E8
1.11223364E8
1.11223363E8
1.11223366E8 
```

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:07:47.750

`1.11223361E8`意思是`1.11223361 x (10 ^ 8)`，所以`111223361 = 1.11223361E8`...

如果您想获得*良好的格式*，请使用`Double.valueOf("1.11223361E8").longValue()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:08:36.480

尝试使用：

```
cellValueLong = Long.valueOf(myCell.toString()); 
```

几周前我自己也遇到了同样的问题。发生这种情况是因为您作为字符串提取的数字采用科学记数法格式。并且由于您将其作为字符串而不是 long/int/(whatever) 获取，因此它以该格式返回该数字的字符串值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T12:49:14.027

从 excel 表中获取值。这是最好的解决方案。它可以帮助你。

[https://stackoverflow.com/a/12067137/1211000](https://stackoverflow.com/a/12067137/1211000)

# objective-c - 自定义 ttf 字体在 iPhone 应用程序中不起作用

> ID：12349394
> 
> 赞同：0
> 
> 时间：2012-09-10T10:03:35.623
> 
> 标签：objective-c, ios, fonts, truetype

我在我的应用程序中添加了一个新的 ttf 字体文件。我也已经在 plist 中添加了。它在我的设备上工作，但在其他一些设备上不能正常工作。任何人都可以建议我 - 怎么做？有没有我可以遵循的其他步骤来实现这一目标？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:44:21.697

首先确保您已按照[此处](https://stackoverflow.com/questions/360751/can-i-embed-a-custom-font-in-an-iphone-application)的所有步骤设置自定义字体。如果您的应用程序的早期版本没有在其他设备上安装字体，则您的字体现在无法正常工作，请删除该应用程序，以便您可以确保在构建和运行应用程序时正确复制所有资源包（使用新字体）。

# c# - 我如何从特定的会话变量中检索会话 ID

> ID：12349404
> 
> 赞同：0
> 
> 时间：2012-09-10T10:04:17.680
> 
> 标签：c#, asp.net, c#-4.0

我想在 C# 中检索特定会话变量的会话 ID。

```
Session["OrderDetailList"] = OrderDetailsList; 
```

我正在尝试的是我想将列表保存在会话中，并且还想将其会话 ID 存储在 cookie 中。

此外，当我从 cookie 中检索会话 ID 时，我可以保存具有从 cookie 中检索会话 ID 的会话变量的值。

我们怎么能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:09:19.197

> 如何从特定会话变量中检索会话 ID？

你不能。阅读[MSDN 文档了解更多信息。](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)

默认情况下，Session 使用*cookie*保存，您可以通过服务器代码中的对象`SessionID`获取 SessionID 。`Session`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:21:29.897

```
/ In a user control or page
string sessionId = this.Session.SessionID; 

// In a normal class, running in a asp.net app.
string sessionId = System.Web.HttpContext.Current.Session.SessionID; 
```

除此之外，我还建议您查看这篇好文章

[探索 ASP.NET 中的会话](http://www.codeproject.com/Articles/32545/Exploring-Session-in-ASP-Net)

# asp.net - 如何：对 Flash 嵌入视频进行事件跟踪

> ID：12349406
> 
> 赞同：0
> 
> 时间：2012-09-10T10:04:24.287
> 
> 标签：asp.net, flash, embedded-video, event-tracking

我在带有 C# 网站的 ASP.NET 页面上有一个嵌入式视频。我想使用谷歌分析来跟踪该视频上的事件，例如按下播放按钮的次数。

这是我用来在网页上嵌入视频的代码：

```
<object width="560" height="340"><param name="movie" value="http://www.youtube.com/v/whatever_-M4?fs=1&amp;hl=en_US"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/whatever_-M4?fs=1&amp;hl=en_US" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="560" height="340"></embed></object> 
```

如何在此视频播放器上进行事件跟踪？“播放”按钮嵌入在 Flash 播放器中……我应该使用 Flash API 来执行此操作吗？如果是这样，哪个，以及如何？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:25:29.240

结帐以下链接

[链接一](http://code.google.com/p/ga-youtube-tracker/wiki/HowToTrackEmbeddedYoutubeWithGoogleAnalytics)

[链接二](http://support.google.com/youtube/bin/answer.py?hl=en&answer=147619)

[链接三](http://www.lunametrics.com/blog/2010/11/09/video-tracking-google-analytics-introduction/)

编辑：[示例一](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide#Anatomy) [示例二适用于您的场景](https://developers.google.com/analytics/devguides/collection/other/flashTrackingIntro)

**组件如何工作？**

为了在您的环境中使用 Flash 跟踪组件，您可以使用 Flash 中的可视化工具，或者直接在代码中设置跟踪对象。无论您是通过可视化方式还是通过代码设置组件，都需要提供以下元素：

网络媒体资源 ID - 这也称为跟踪代码的 UA 编号，类似于 UA-xxxxx-yy，其中 x 和 y 替换为与您正在跟踪的对象的帐户和个人资料信息相对应的数字. 有关详细信息，请参阅网络媒体资源。跟踪模式 - 选择桥接模式或 AS3 模式。此模式决定了您的跟踪如何与 Analytics 服务器进行通信，并在下面详细描述。调试模式——无论您使用哪种环境或跟踪模式，您都可以打开调试以验证和测试您的跟踪。

**追踪模式**

根据您分发 Flash 内容的方式，Analytics for Flash 组件通过桥接现有 Analytics 跟踪安装上的 Flash 内容之间的通信或直接与 Analytics 服务器通信来与 Analytics 服务器通信。这两种模式分别称为桥接模式和AS3模式。两种模式都使用相同的 Analytics 跟踪功能，并且很容易将您的 Flash 应用程序从一种模式切换到另一种模式。除了为 Analytics 跟踪选择通信模式外，您还可以使用调试模式来排除故障或验证您的跟踪。

在任一模式下，allowscriptaccess 必须始终等于才能使活动跟踪起作用。此参数打开对 Flash 跟踪代码所需的页面 URL 和引荐来源信息的读取权限。如果没有 allowscriptaccess，Analytics 跟踪代码会优雅地降级。它仍然提供大多数用户活动数据，但不会向 Google Analytics 广告系列归因模型确认。桥接模式

如果您同时控制 HTML 页面和 Flash 内容，请使用此模式。如果您已经在您的网站上实施了 Google Analytics (ga.js) 跟踪并且您希望将跟踪添加到嵌入的 Flash 内容，则此模式是最佳选择。桥接模式通过为 ga.js 代码提供统一的 ActionScript 3 接口来简化 Flash 到 JavaScript 的通信。它提供从 ActionScript 3 调用到 Analytics JavaScript 的连接，以便进行跟踪。

可以通过以下两种方式之一通过网络媒体资源 ID 参数配置与 Google Analytics（分析）跟踪代码的连接：

最常用的方法。Google Analytics 跟踪代码对象已经存在于您的页面上，并具有自己的名称，例如 pageTracker。在这种情况下，您需要提供对跟踪对象的完整 DOM 引用。例如，如果您的对象被称为 pageTracker，您将在代码中将该对象引用为 window.pageTracker。例如，以下代码片段说明了如何使用带有 ActionScript 3 的 Adob​​e Flex 环境进行配置：

```
tracker = new GATracker( this, "window.pageTracker", "Bridge", false ); 
```

替代方法。如果您尚未在页面上创建页面跟踪对象，您只需传入您的网络媒体资源 ID，就会为您创建一个 JavaScript 跟踪代码对象。使用此方法，您的 HTML 页面仍需要引用基本 ga.js javascript 源文件。以下代码片段说明了如何使用带有 ActionScript 3 的 Adob​​e Flex 环境进行配置：

```
tracker = new GATracker( this, "UA-12345-22", "Bridge", false ); 
```

为了使桥接模式正常运行，必须在 ActionScript 3 代码中将 ExternalInterface.available 设置为 true。这也意味着在嵌入 Flash 内容的 HTML 页面中应该将 allowScriptAccess 设置为始终。以下示例说明了为桥接模式配置的 HTML 代码：

```
<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
     id="flex_component" width="800" height="600"
     codebase="http://fpdownload.macromedia.com/get/flashplayer/current/swflash.cab">
     <param name="movie" value="flex_component.swf" />
     <param name="quality" value="high" />
     <param name="bgcolor" value="#869ca7" />
     <param name="allowScriptAccess" value="always" />
     <embed src="flex_component.swf" quality="high" bgcolor="#869ca7"
         width="800" height="600" name="flex_component" align="middle"
         play="true"
         loop="false"
         quality="high"
         allowScriptAccess="always"
         type="application/x-shockwave-flash"
         pluginspage="http://www.adobe.com/go/getflashplayer">
      </embed>
</object> 
```

# asp.net - 不要缩进 HTML 文件中的 asp 部分

> ID：12349408
> 
> 赞同：1
> 
> 时间：2012-09-10T10:04:39.790
> 
> 标签：asp.net, visual-studio-2010, visual-studio, formatting

在 Visual Studio 2010 中，是否可以更改 HTML 文档的格式，使其不缩进`<asp:*>`部分？我正在努力实现这一目标：

```
<asp:content contentplaceholderid="content" runat="server">
<!DOCTYPE html>
<html>
    <head>
    ...
    </body>
</html>
</asp:content> 
```

而不是这样：

```
<asp:content contentplaceholderid="content" runat="server">
    <!DOCTYPE html>
    <html>
        <head>..</head>
        <body>..</body>
    </html>
</asp:content> 
```

因此，最终提供给浏览器的内容在之前没有任何内容`<!DOCTYPE html>`：

```
<!DOCTYPE html>
<html>
    <head>..</head>
    <body>..</body>
</html> 
```

哪个更整洁，我认为可能不太容易出错。

我知道我可以手动格式化文档，然后从不使用自动格式化选项 ( `ctrl+k ctrl+d`)，但这很烦人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:16:34.787

## 对于*特定*的ASP 标签

工具 -> 选项 -> 文本编辑器 -> HTML -> 格式化 -> 然后点击右侧窗格中标记为“标签特定选项”的按钮 -> 然后选择左侧窗格中的 ASP.Net 控件。然后选择您要修改的标签（asp:placeholder）并取消选中标记为“缩进内容”的复选框。

## 对于所有服务器标签

在“标签特定选项”窗口中，在“默认设置”下选择“服务器标签支持内容”并取消选中“缩进内容”。

# ios - 将数据从 iOS 应用程序传输到 Unity3D

> ID：12349412
> 
> 赞同：1
> 
> 时间：2012-09-10T10:05:05.833
> 
> 标签：ios, cocoa-touch, unity3d

使用 c 插件将复杂对象从 iOS 应用程序传输到 Unity3D 的正确方法是什么？例如，我必须转移一个`NSArray`包含 Rewards 的 . 每个 Reward 包含`UIImage`、`NSString`-s、一些`float`值等。

据我所知，我只能向 Unity3D 发送一个字符串。我找到了[一种](https://stackoverflow.com/questions/12282454/any-proper-way-of-sending-byte-data-to-unity3d-from-a-c-plugin)发送带有字节数据的字符串并在 Unity 中对其进行解码的方法。就我而言，这是正确的解决方案吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T16:35:11.117

我决定，数据传输的最佳解决方案是使用 JSON 字符串。在 Unity 中，我使用小型库 litJSON 进行解析。

当我必须传输图像时，我将其保存在设备上并传输图像的路径。

# plugins - 显示访问者数量的 Joomla 插件

> ID：12349413
> 
> 赞同：0
> 
> 时间：2012-09-10T10:05:10.693
> 
> 标签：plugins, joomla, visitor-pattern

我正在寻找一个 Joomla 插件，它可以帮助我显示最近访问过我网站中特定文章的访问者数量.. 任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:26:26.910

使用插件“文章点击”...

在编辑器中使用 {hits}...{/hits} 显示您的文章点击量...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:31:57.827

此选项适用于所有文章。您必须启用点击表单文章选项。

```
Aticle Manager --> Choose the article --> Article Options --> Show Hits(change to yes) 
```

如果您想为所有文章启用此选项，您可以通过以下方式完成...

```
Aticle Manager --> Options(top right side) --> Show hits (change to "show").

                                  (or) 
```

[http://www.tooljoom.com/downloads/plugins/article-hits](http://www.tooljoom.com/downloads/plugins/article-hits)

使用此插件显示文章点击，但它可用于`Joomla 1.5`版本。

格式： `{hits}...{/hits}`

# json - C# 中的 JSON 解析。Json 字符串位于 javascript 文件中

> ID：12349415
> 
> 赞同：0
> 
> 时间：2012-09-10T10:05:11.267
> 
> 标签：json, c#-4.0

我在解析从 javascript 文件（比如 xyz.js）中检索到的 JSON 数据时遇到问题。文件大小约为 10mb，其中只有一个 JSON 字符串。

我们直接使用javascript来解析这个文件，我想知道我们是否有任何C#类来解析这个文件？

JSON 字符串的示例是

```
var JSONString = {
    Level1:{
        DateTime:{
              date:'Wed Sep 14 14:19:32 CDT 2011'
        },
        information:{
              url:'http:\\www.google.com'
        },
        RepetitiveLevel:[
            {
                ids:{
                    courses:[
                        "BE",
                        "MS"
                    ]
                },
                SubRepetitiveLevels:{
                    DetailedLevel:[
                        {
                            name:"Trial 1",
                            type:"blah",
                            latest:"no",
                            version:"1",
                            description:"This is a test 1.",
                            recommendation:"blah",
                            prerequisite:"<strong>WARNING!</strong> xyz",
                            releasedate:"2012-06-18T15:38:55.79",
                            support:{
                                degree:[
                                    "MSC",
                                    "BSC",
                                    "HSE"
                                ]
                            },
                            OperatingSystem:{
                                os:["Win 2008 x64"
                                ]
                            },
                            previousversions:{
                                version:[
                                ]
                            },
                            allversions:{
                                version:[
                                    "1",
                                    "2",
                                    "3"
                                ]
                            },
                            ftppath:"ftp://",
                            files:{
                                file:["note1.txt"
                                ]
                            },
                            filesizes:{
                                filesize:["5MB"
                                ]
                            },
                            checkSum:{
                                md5:["abc"
                                ]
                            },
                            note:"<P><STRONG>NOTE: </STRONG> NOTE 1 </LI></UL></OL>",
                            fix:"<P style=\"MARGIN-TOP: 4pt; FONT-SIZE: 10pt; MARGIN-BOTTOM: 0pt; COLOR: #000000; FONT-FAMILY: Arial\"> xyz <STRONG></P></LI></UL>"                           

                        },
                        {
                            name:"Trial 2",
                            type:"blah",
                            latest:"yes",
                            version:"2",
                            description:"This is a test 2.",
                            recommendation:"blah",
                            prerequisite:"<strong>WARNING!</strong> xyz",
                            releasedate:"2012-06-18T15:38:55.79",
                            support:{
                                degree:[
                                    "MCA",
                                    "BCA",
                                    "BE"
                                ]
                            },
                            OperatingSystem:{
                                os:["Win XP"
                                ]
                            },
                            previousversions:{
                                version:[
                                ]
                            },
                            allversions:{
                                version:[
                                    "4",
                                    "5",
                                    "6"
                                ]
                            },
                            ftppath:"ftp://",
                            files:{
                                file:["Note2.txt"
                                ]
                            },
                            filesizes:{
                                filesize:["2MB"
                                ]
                            },
                            checkSum:{
                                md5:["abc"
                                ]
                            },
                            note:"<P><STRONG>NOTE: </STRONG> NOTE 2 </LI></UL></OL>",
                            fix:"<P style=\"MARGIN-TOP: 4pt; FONT-SIZE: 10pt; MARGIN-BOTTOM: 0pt; COLOR: #000000; FONT-FAMILY: Arial\"> ahahah <STRONG></P></LI></UL>"                           

                        }

                    ]
                }
            }
        ]
    }
}

The tag named "RepetitiveLevel" will be repeating more than 10 times 
Under this tag, there will be repetitions of "SubRepetitiveLevels", which in turn contains more than one entry for "DetailedLevel". 
This kind of JSON string fails for Newtonsoft.Json.JsonConvert.DeserializeObject 

   I know this is a little bit confusing, but we are not finding any other option. 
```

任何帮助就足够了。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:09:26.993

试试[这个](http://james.newtonking.com/pages/json-net.aspx)库。我们在一个 ASP.NET 项目中使用它，它运行良好。

该程序通过序列化/反序列化写入然后读取 100mb 文件。

```
class Program
{
    static void Main(string[] args)
    {
        var lst = new List<string>();
        for (var i = 0; i < 1024 * 1024 * 10; i++)
        {
            lst.Add(i.ToString());
            if(i%(1024 * 1024)==0)Console.WriteLine("+1m");
        }
        var wrt = Newtonsoft.Json.JsonConvert.SerializeObject(lst);
        lst = null;
        File.WriteAllText(@"F:\1.txt",wrt);
        Console.WriteLine("written");
        wrt = "";
        GC.Collect();
        wrt=File.ReadAllText(@"F:\1.txt");
        lst=Newtonsoft.Json.JsonConvert.DeserializeObject<List<string>>(wrt);
        Console.WriteLine("read");
        Console.WriteLine(lst.Count.ToString());
    }
} 
```

# java - 用 , 替换字符串中的空格

> ID：12349417
> 
> 赞同：-5
> 
> 时间：2012-09-10T10:05:12.580
> 
> 标签：java, string

我有一个字符串`"ross rachael"`。

我需要`"ross, rachael"`。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T10:06:31.657

使用[`String#replace`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29)：

```
String s = "ross rachael";
s.replace(" ", ", "); 
```

如果你想用 替换所有出现的空格`", "`，你可以使用[`String#replaceAll`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)：

```
String s = "ross rachael";
s.replaceAll("\\s+", ", "); 
```

请注意，`\s`将匹配多个`" "`，它将匹配[任何](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)空白字符，`[ \t\n\x0B\f\r]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:09:40.333

如果您想要一个更强大的解决方案（也可以处理多空格和制表符），您可以使用[正则表达式](http://docs.oracle.com/javase/tutorial/essential/regex/)，并且[`String.replaceAll()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#replaceAll%28java.lang.String,%20java.lang.String%29)：

```
String s = "ross      racheal";
System.out.println(s.replaceAll("\\s+",", ")); 
```

结果是：

```
ross, racheal 
```

正则表达式的`\\s+`意思是：`\\`打破了特殊的java含义`\`，提供了一个单一`\`的正则表达式引擎。`\s`是任何空白。+ 表示一个或多个。
所以表达式`\\s+`实际上是一个或多个空格。

# git - 为什么我不能将镜像推送到 github？

> ID：12349419
> 
> 赞同：3
> 
> 时间：2012-09-10T10:05:19.350
> 
> 标签：git, version-control, github, git-push

我可以使用同步原点

```
git fetch origin 
```

我在 master 分支上，origin 是一个裸仓库。

我也可以运行将更改推送到 github：

```
git push github  --all
git push github --tags 
```

但是为什么不能将使用 git fetch origin 的最新提交推送到 github？

当我推送时，git 只是回复：一切都是最新的

**这意味着实际上没有发生推送 :( 因为从 origin 获取的最新提交没有推送到 github**，为什么？

// 这是本地镜像，我想把它推送到 github

```
[core]
        repositoryformatversion = 0
        filemode = true
        bare = true
[remote "origin"]
        fetch = +refs/*:refs/*
        mirror = true
        url = http://git.mirror.xxx.xx/xxx/root.git
[remote "github"]
        url = git@github.com:username/xxx.git
        fetch = +refs/heads/*:refs/remotes/github/* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:38:02.483

`git fetch`将获取所有远程跟踪分支`origin`。

但是，如果这些新提交与您当前的本地分支无关，`git push github`则不会更新有关所述（已经是最新的）当前分支的任何内容。
（取决于[当前的 git push 政策](https://stackoverflow.com/questions/4586687/what-is-the-result-of-git-push-origin/9749477#9749477)和你的 git 版本）

您可以尝试`git push --mirror github`, 以便将所有参考推送到 GitHub。
但是您首先需要从 github:**获取**`git fetch github`分支，以便您的本地存储库了解所述匹配分支。

# sql - SQL Server：在同一个表中查找多个列的中位数

> ID：12349426
> 
> 赞同：0
> 
> 时间：2012-09-10T10:05:53.693
> 
> 标签：sql, tsql, sql-server-2008-r2, median

我有一个具有以下结构的表。

```
create table FindMedians 
( GroupByColumn varchar(100) 
, TimeInterval_1 int 
, TimeInterval_2 int 
, TimeInterval_3 int 
); 
```

我需要找到每组每个时间间隔的中位数。我一直在分别计算每列的中位数并将它们联合起来，然后 PIVOTing 得到最终结果：

按列分组 中位数1 中位数2 中位数3

使用[函数在 Sql Server 中计算中位数的解决方案中给出的查询](https://stackoverflow.com/questions/1342898/function-to-calculate-median-in-sql-server)

注意：我只是使用查询，我还没有创建函数。

原始表有接近 500K 行，尝试分别计算每列的中位数很慢。是否有一种性能良好的方法可以在单个查询中为我提供所有列的中位数，而不必为每列单独计算？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:58:40.777

由于计算中位数需要对数据进行排序，除非您的数据是有序的，否则实际上没有任何替代方法可以独立排序和计算中位数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:13:00.577

不用担心性能。排名函数应该只对需要的列进行排序，而不是对整个数据集进行排序。性能将主要受内存中适合多少数据的影响。由于原始数据适合内存，并且每一列的排名应该是内存中的排序，所以性能应该是相当不错的。

作为记录，有 O(n) 算法可以找到中位数。不过，我不知道有任何实现它们的数据库。

# image-processing - 如何在 C# 中将 Emgu.image 转换为图像？

> ID：12349433
> 
> 赞同：0
> 
> 时间：2012-09-10T10:06:23.857
> 
> 标签：image-processing, opencv, emgucv

如何将 Image< Bgr,Byte > 转换为 Image？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T15:35:31.063

Image 类有一个 .ToBitmap() 方法。

所以它应该很简单

```
image1.ToBitmap(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T06:43:50.593

您可以简单地使用 Emgu Image 的 Bitmap 属性。

```
Image<Bgr,Byte> img = ....

Bitmap bmp = img.ToBitmap(); 
```

# python - Python Selenium webdriver 查询

> ID：12349441
> 
> 赞同：1
> 
> 时间：2012-09-10T10:06:52.147
> 
> 标签：python, selenium, selenium-webdriver, webdriver, ui-automation

我对 Python 比较陌生。我正在尝试使用 Python Selenium Web Driver 进行一些网络自动化。我将为不同的场景编写单独的脚本：例如一个用于登录，另一个用于检查登录页面上的工具提示等等。

我的问题是我想对所有测试用例使用相同的 Firefox 实例。这样登录后我的测试脚本将在同一个登录的 FireFox 实例上运行。

请让我知道如何实现这一目标。

谢谢，

莫希马

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:19:07.260

不要编写单独的脚本。而是编写不同的函数：

```
def login(): ...
def check_tooltips(): ... 
```

如果您希望将函数放在不同的文件中，那没问题；您可以从另一个模块导入一个模块（例如 tooltips.py）：

```
import tooltips
def login(): ...
def main():
    login()
    tooltips.check_tooltips() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-27T14:04:58.900

你可以使用@classmethod 装饰器。因此，例如，您的第一个测试验证登录功能，而不是第二个测试验证例如搜索按钮或其他东西等等，所有这些都使用一个浏览器实例。

下面我使用 python 2.7 和 unittest

```
import unittest
from selenium import webdriver

class HomePage(unittest.TestCase):

    @classmethod
    def setUpClass(cls):
        cls.selenium = webdriver.Firefox()
        cls.selenium.maximize_window()

    def test_login(self):
        self.selenium.get('http://...')
        self.selenium.find_element_by_id()
        #and so on

    def test_search_btn(self):
        pass

    @classmethod
    def tearDownClass(cls):
        cls.selenium.quit()

if __name__ == '__main__':
    unittest.main() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-03T09:21:06.863

如果你对 OOP 犹豫不决，你也可以使用非 OOP 方式

```
# your imports
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import WebDriverWait
from selenium.webdriver.support import expected_conditions as EC
import csv
import win32com.client
import time
import os

driver=webdriver.Chrome()
driver.get("your url")
wait=WebDriverWait(driver,30)
# select the username and password fields and enter your details and after that click the login button. after that you will see welcome page in the same instance.
username=wait.until(EC.presence_of_element_located((By.ID, 'LoginEmailOrNickname')))
username.send_keys(email)

passw=wait.until(EC.presence_of_element_located((By.ID, 'login-password')))
passw.send_keys(pas)

submit=wait.until(EC.presence_of_element_located((By.ID, 'SignInButton')))
submit.click()

time.sleep(5)

# here comes welcome page after login
mykijiji=wait.until(EC.presence_of_element_located((By.LINK_TEXT, 'My Kijiji')))
mykijiji.click() 
```

# java - JNotify（Java 文件观察器）的不一致行为

> ID：12349442
> 
> 赞同：2
> 
> 时间：2012-09-10T10:06:55.563
> 
> 标签：java, file-io, java-io, jnotify

在项目中使用[JNotify](http://jnotify.sourceforge.net/sample.html)并满足我的所有要求，但有时它会表现出不一致的行为，例如

有时，当我将任何文件夹剪切并粘贴（拖放）到我的根文件夹时，它只读取文件夹而不是该文件夹的子文件夹（我刚刚粘贴），有时它读取所有子文件和文件夹

有时，当我删除文件夹时，它只会给出删除该文件夹的消息（并删除该文件夹及其所有子文件夹），有时它还会显示其子文件夹。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T11:18:04.600

它看起来像是 JNotify 实现的限制。

查看文件/目录轮询的另一种方法[以检测更改](http://www.rgagnon.com/javadetails/java-0617.html)

# iphone - 如何访问 MainClass 中的子类功能？

> ID：12349445
> 
> 赞同：0
> 
> 时间：2012-09-10T10:07:16.180
> 
> 标签：iphone, xcode, subclass

关于这个问题，我之前的问题是。 [如何访问一个 MainClass 中的多个类数据？](https://stackoverflow.com/questions/12346578/how-to-access-multiple-classes-data-in-one-mainclass) 现在为了让我的问题更清楚，我在这里提供源代码[SourceCode。](http://www.hilbert1862.com/sc/viewtestapp.zip) 正如我的源代码所示，我在我的主类中声明了所有类，并且我的编码在我的主类中。但我想将我的所有主类代码放在我在我的应用程序中创建的相关类中。对于与我想要的第一类相关的 Exp 代码将所有与二等相关的代码放置在二等中。现在对我来说问题是，如果我将所有代码都放在其相关的类中，那么我们如何访问这些类。任何帮助都将得到应用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:16:57.273

如果要添加表，主类/控制器中的视图。然后创建所有其他对象作为子类表/视图，并从 xib 更改类名。

我已经对第一个视图和第二个视图作为 UIView 的子类进行了更改[。](http://dl.dropbox.com/u/58723521/viewtestapp.zip)

以及您在主类中制作的动画，我通过传递所需的视图/对象来执行该功能，从一等或二等制作。

查看我所做的更改。

# windows - 矢量异常处理程序中的异常

> ID：12349450
> 
> 赞同：1
> 
> 时间：2012-09-10T10:07:27.047
> 
> 标签：windows, exception-handling

如何在向量异常处理程序中处理异常？

如果我理解正确，这样的处理程序中的任何异常都会再次调用处理程序函数，尽管函数中有任何 SEH 或 c++ 处理程序——最终导致堆栈溢出。有没有办法在不注销处理程序的情况下防止这种情况？

# php - 无法将 xml 从 as3 传递到 php

> ID：12349451
> 
> 赞同：0
> 
> 时间：2012-09-10T10:07:41.130
> 
> 标签：php, xml, actionscript-3, flash

所以我有这两个脚本可以相互通信以在线创建一个xml文件。我现在的方式是，AS3 swf 将一些变量发送到一个 php 脚本来编写。我得到了创建部分，但由于某种原因，php 没有写入 xml 文件。我尝试将变量更改为简单的“foobar”字符串，它可以工作。但如果我这样做：

```
var temp:XML = new XML(<test></test>); 
```

它不写。那么，这是怎么回事，这正常吗？

AS3

```
function SaveXml(inputxml:XML){
    var temp:XML = <teste></teste>;
    var variables:URLVariables = new URLVariables();
    variables.xmlfile = temp;
    variables.folder = TestProperties.Username;
    var request:URLRequest = new URLRequest("savexml.php");
    request.method = URLRequestMethod.POST;
    request.data = variables;

    var loader:URLLoader = new URLLoader();
    loader.dataFormat = URLLoaderDataFormat.VARIABLES;

    try{
        loader.load(request);
    }
    catch (error:Error) {
        trace("Unable to load URL");
    }

    loader.addEventListener(Event.COMPLETE, completeHandler);

    function completeHandler(e:Event)
    {
                //something when complete;
    }
    } 
```

PHP

```
<?php

date_default_timezone_set('GMT');

$xmlfile = $_POST["xmlfile"];
$folder = $_POST["folder"];
$filename = date('ymdhis').".xml";

if(! file_exists("./user/".$folder."/")){
    mkdir("./user/".$folder."/", 0777);
}

$handle = fopen("user/".$folder."/".$filename, 'w+');
fwrite($handle, $xmlfile );
fclose($handle);

echo "result=success";
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:21:13.420

您不能像以前那样在 Flash 中创建 xml。

```
var temp:XML = <teste></teste>; 
```

因为在您的文件中没有像这样的对象。您需要做的是在实例化 XML 对象时提供一个字符串作为参数。

因此，您应该执行以下操作，

```
var temp:XML = new XML("<teste></teste>"); 
```

现在您的代码可以将 xml 发送到 php。

# css - CSS - DIV 导航菜单替换旧的 TABLE 菜单，元素大小问题

> ID：12349457
> 
> 赞同：2
> 
> 时间：2012-09-10T10:08:00.637
> 
> 标签：css, html, navigation, positioning

在过去的几周里，我一直在花一些时间来更新我的 HTML/CSS 知识。因此，我一直在学习如何实现我以前使用表格完成的布局，而不是使用 DIV。

在大多数情况下它都很好，但我遇到了一些障碍，试图复制一种使用以下代码作为表格的导航菜单样式：

HTML：

```
<div class="navigation">
    <table>
        <tr>
            <td><a href="index.php">home</a></td>
            <td>&nbsp;</td>
            <td><a href="about.php">about</a></td>
            <td>&nbsp;</td>
            <td><a href="music.php">music</a></td>
            <td>&nbsp;</td>
            <td><a href="geeking.php">geeking</a></td>
            <td>&nbsp;</td>
            <td><a href="contact.php">contact</a></td>
        </tr>
    </table>
</div> 
```

CSS：

```
div.navigation{
    text-align: center;
    color: hsla(200,50%,45%,0.6);
    margin: auto;
    font-family: monospace;
    letter-spacing: 2px;
    position: relative;
    top: -13px;
    margin: 20px auto 20px auto;
    width: 60%;
}

.navigation table{
    height: 70px;
}

th{
text-align: center;
color: hsla(180,50%,45%,0.4);
font-size: 1.1em;
}

table{
border-collapse: collapse;
margin: auto;
margin-top: 0px;
}

table,th{
border: 0px solid black;
padding: 5px;
}    

.navigation a{
    text-decoration: none;
    color: hsla(200,50%,45%,0.6);
    background-color: transparent, white;
    text-transform: lowercase;
    font-size: 1.2em;
    -webkit-transition: all 0.4s linear; 
    -moz-transition: all 0.4s linear; 
    -o-transition: all 0.4s linear; 
    -ms-transition: all 0.4s linear; 
    transition: all 0.4s linear;
    letter-spacing: 0px;
    width: 50px;
    height: 100px;
}

.navigation a:hover{
    color: white;
    -webkit-transition: all 0.2s linear; 
    -moz-transition: all 0.2s linear; 
    -o-transition: all 0.2s linear; 
    -ms-transition: all 0.2s linear; 
    transition: all 0.2s linear;
    width: auto;
    height: auto;
    font-size: 2em;
    font-weight: bold;
    letter-spacing: 2px;
    text-shadow:    0 0 20px hsla(180,50%,40%,.6),
                    0 0 40px hsla(200,50%,45%,.8);
} 
```

您可以在此处实时查看此页面：http: [//benjaminsherwood.co.uk/index.php](http://benjaminsherwood.co.uk/index.php) 要清楚 - 这是我希望我的菜单的行为 - 用于增加大小和字母间距的悬停元素, 并左右推动其他元素，但保持在同一垂直平面上。这是我坚持的垂直平原部分。

这是我用来尝试使用 DIV 创建相同菜单的代码：

HTML：

```
<div class="menu">
    <ul>
        <li><a href="index.php">Home</a></li>
        <li><a href="">About</a></li>
        <li><a href="">Music</a></li>
        <li><a href="">Geeking</a></li>
        <li><a href="">Contact</a></li>
    </ul>
</div> 
```

CSS：

```
.menu{
    position: fixed;
    left:0; 
    right:0; 
    top:0;
    margin: auto;
    text-transform: lowercase;
    text-align: center;
}

.navigation table{
    height: 70px;
}

.menu li{
    list-style: none outside none;
    display: inline;
}

.menu a{
    text-decoration: none;
    color: hsla(200,50%,45%,0.6);
    font-size:  1.2em;
    letter-spacing: 0px;
    -webkit-transition: all 0.4s ease; 
    -moz-transition: all 0.4s ease; 
    -o-transition: all 0.4s ease; 
    -ms-transition: all 0.4s ease; 
    transition: all 0.4s ease;
}

.menu a:hover{
    color: white;
    font-size: 2em;
    font-weight: 600;
    letter-spacing: 2px;

    -webkit-transition: all 0.2s ease; 
    -moz-transition: all 0.2s ease; 
    -o-transition: all 0.2s ease; 
    -ms-transition: all 0.2s ease; 
    transition: all 0.2s ease;

    text-shadow:    0 0 20px hsla(180,50%,40%,.6),
            0 0 40px hsla(200,50%,45%,.8);
} 
```

您可以在此处实时查看此页面：http: [//benjaminsherwood.co.uk/test.php](http://benjaminsherwood.co.uk/test.php)

我整个周末都在试图解决这个问题——我一直在寻找解决方案，并应用了不同的方法来创建水平菜单布局，甚至最终去找了一个非常擅长 CSS 的朋友——但是，无论我尝试什么，我都无法弄清楚如何以与 TABLE 相同的方式实现基于 DIV 的布局。

就好像基于 TABLE 的布局是从 TD 元素的中心对元素应用更改，而基于 DIV 的布局是从顶角应用它。结果，基于 DIV 的布局似乎只是向下增长，而不是扩展，因此，它两侧的元素不会在同一水平面上向左和向右流动，就像TABLE 布局，而是向左或向右推，也向下推。

老实说 - 我知道解决方案很可能是要么接受它在 DIV 样式中的不同工作方式，要么继续使用 TABLE 样式......但我相信这应该是可能的，而且我我只是错过了一些东西。

TABLE 样式曾经做类似的事情，直到我定义：

```
.navigation table{
    height: 70px;
} 
```

之后，它开始表现。我不知道在某处的 DIV 布局中做同样的事情是否会解决这个问题......我已经尝试设置各种元素的高度，但似乎没有任何区别。

很抱歉这个超长的问题。我真的避免自己问问题，但我真的只是碰壁了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:33:22.253

```
.menu ul {
    display: table;
    text-align: center;
    height: 70px;
    padding: 0px;
    margin-top: 0px;
    margin-right: auto;
    margin-bottom: 0px;
    margin-left: auto;
    width: auto;
}

.menu li {
    display: table-cell;
    list-style-image: none;
    list-style-type: none;
    text-align: center;
    vertical-align: middle;
    padding-right: 6px;
    padding-left: 6px;
    padding-top: 0px;
    padding-bottom: 0px;
    margin: 0px;
} 
```

[http://jsfiddle.net/Nfs46/](http://jsfiddle.net/Nfs46/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:13:23.323

您尚未为锚点设置高度，因此高度是从字体大小继承的。

如果您为锚点添加高度和行高，它几乎可以工作；尝试玩弄：

```
.menu a {
    height: 50px;
    line-height: 50px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:47:55.467

```
.menu a {
  vertical-align: middle;
} 
```

# jar - 如何在多个 portlet 中共享 jar？

> ID：12349462
> 
> 赞同：6
> 
> 时间：2012-09-10T10:08:07.913
> 
> 标签：jar, liferay, portlet, liferay-6

我在我的portlet 中使用了几个jar，例如c3p0。现在我想避免将罐子放在我的每个 portlets lib 文件夹中。如何在多个 portlet 中共享一个 jar 文件？我应该如何将它们集成到 Eclipse IDE 中？添加一个外部 jar 或将它们放在一个专用项目中并从那里包含它们？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-11T08:09:10.937

另一种解决方案是将它们放在`../liferay-portal-<version>/tomcat-<version>/webapps/ROOT/WEB-INF/lib`

如果将它们放在这里，您可以将 JAR 作为 portlet 的依赖项添加到 portlet 中`liferay-plugin-package.properties`（如果您使用 Liferay Developer Studio 或 Liferay IDE，那么有一个很好的 GUI）。

然后在部署时，Liferay 会将所需的 JARS 复制`ROOT/WEB-INF/lib`到您的 portlet`WEB-INF/lib`

我相信这是 Liferay 的支持机制，并且不需要重新启动，因为 JAR 会在部署时复制到 portlet 类路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T10:52:24.690

我能想到的一种方法是将它们全部放在全局路径中。

例如，在 Tomcat 中，您可以将它们放置在`../liferay-portal-<version>/tomcat-<version>/lib/ext`然后当您在 eclipse 中配置服务器运行时库时，您将在构建路径中拥有这些 jar。

此[链接](http://www.liferay.com/community/forums/-/message_boards/message/15943269#_19_message_15955462 "Liferay 论坛：关于在 portlet 之间共享服务 jars")也可以帮助您做出决定，但它代表了`*-service.jar`但我不确定它是否适用于任何一个 portlet 中的其他 jar。

# c# - RectForMapRect MonoTouch.UIKit.UIKitThreadAccessException

> ID：12349463
> 
> 赞同：2
> 
> 时间：2012-09-10T10:08:18.147
> 
> 标签：c#, ios, xamarin.ios, thread-safety, mapkit

我只有在 MonoTouch 5.4 中才有这个问题。DrawMapRect 是多线程的，但我这里需要使用 RectForMapRect。我可以在没有 InvokeOnMainThread 的情况下做到这一点吗？

错误：

```
MonoTouch.UIKit.UIKitThreadAccessException: UIKit Consistency error: you are calling a UIKit method that can only be invoked from the UI thread.
  at MonoTouch.UIKit.UIApplication.EnsureUIThread () [0x00019] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:49
  at MonoTouch.MapKit.MKOverlayView.RectForMapRect (MKMapRect mapRect) [0x00000] in /Developer/MonoTouch/Source/monotouch/src/MapKit/MKOverlayView.g.cs:146
  at MapTest.MyMKOverlayView.DrawMapRect (MKMapRect mapRect, Single zoomScale, MonoTouch.CoreGraphics.CGContext context) [0x00009] in /Users/kirill/Desktop/MapTest/MapTest/MapTestViewController.cs:38 
```

源代码在这里：

```
using System;
using System.Drawing;

using MonoTouch.Foundation;
using MonoTouch.UIKit;
using MonoTouch.MapKit;

namespace MapTest
{
    public class MyMKMapView : MKMapView
    {
        public MyMKMapView(RectangleF frame) : base(frame)
        {
            GetViewForOverlay = GetViewForOverlayImp;
        }

        private MKOverlayView GetViewForOverlayImp(MKMapView mapView, NSObject overlay)
        {
            return new MyMKOverlayView();
        }

        public void AddNewOverlay()
        {
            AddOverlay(new MyMKOverlay());
        }
    }

    public class MyMKOverlayView : MKOverlayView
    {
        public MyMKOverlayView() : base()
        {

        }

        public override void DrawMapRect(MKMapRect mapRect, float zoomScale, MonoTouch.CoreGraphics.CGContext context)
        {
            base.DrawMapRect(mapRect, zoomScale, context);
            RectForMapRect(new MKMapRect());
        }
    }

    public class MyMKOverlay : MKOverlay
    {
        public override MKMapRect BoundingMapRect
        {
            get
            {
                return new MKMapRect(10 , 10 , 10 , 10);
            }
        }

        public MyMKOverlay() : base()
        {

        }
    }

    public partial class MapTestViewController : UIViewController
    {
        private MyMKMapView _map;

        public MapTestViewController() : base ("MapTestViewController", null)
        {
            _map = new MyMKMapView(View.Bounds);
            View.AddSubview(_map);
        }

        public override void DidReceiveMemoryWarning()
        {
            // Releases the view if it doesn't have a superview.
            base.DidReceiveMemoryWarning();

            // Release any cached data, images, etc that aren't in use.
        }

        public override void ViewDidLoad()
        {
            base.ViewDidLoad();
            // Perform any additional setup after loading the view, typically from a nib.
        }

        public override void ViewDidUnload()
        {
            base.ViewDidUnload();

            // Clear any references to subviews of the main view in order to
            // allow the Garbage Collector to collect them sooner.
            //
            // e.g. myOutlet.Dispose (); myOutlet = null;

            ReleaseDesignerOutlets();
        }

        public override void ViewDidAppear(bool animated)
        {
            base.ViewDidAppear(animated);
            _map.AddNewOverlay();
        }

        public override bool ShouldAutorotateToInterfaceOrientation(UIInterfaceOrientation toInterfaceOrientation)
        {
            // Return true for supported orientations
            return (toInterfaceOrientation != UIInterfaceOrientation.PortraitUpsideDown);
        }
    }
} 
```

行错误`RectForMapRect(new MKMapRect())`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:11:52.017

此检查是 MonoTouch 5.4 的[新功能](http://spouliot.wordpress.com/2012/03/02/linker-vs-bindings-and-ui-thread-checks/)。默认情况下，UI 线程检查仅在**DEBUG**构建上启用。您可以在构建时手动：

*   `--disable-thread-check`使用;禁用它（在 DEBUG 上）或者
*   `--force-thread-check`使用;启用它（在发布时）

您也可以在运行时使用[`CheckForIllegalCrossThreadCalls`](http://iosapi.xamarin.com/?link=F%3aMonoTouch.UIKit.UIApplication.CheckForIllegalCrossThreadCalls).

可能不需要检查*，* Apple 关于线程安全的文档不是很清楚（与 MSDN 不同）。如果您发现这种情况（或只是不确定），请填写[错误报告](http://bugzilla.xamarin.com)。

# c# - 加载程序集会锁定文件

> ID：12349467
> 
> 赞同：0
> 
> 时间：2012-09-10T10:08:32.733
> 
> 标签：c#, .net, vb.net

我正在为我们在多台客户端机器上提供的软件实现一个 .DLL 加载器/更新器。我们需要检查机器上文件的版本，然后将其传递给 SQL 以确定文件是否是最新版本 - 我们有一个这样的文件夹结构：

> - 应用
> 
> --- 文件
> 
> ---- 子文件夹
> 
> ----- 加载器.exe

加载程序 .exe`List(of FileInfo)`从应用程序文件夹中获取一个。此文件夹中有各种程序集并获取程序集的版本以便检查，我正在使用`Assembly.LoadFile(x.FullName).GetName().Version`并通过使用它，如果文件需要更新或稍后访问 loader.exe 有该文件正在使用中。我将信息放入数据表中，然后将其传递给 SQL 中的存储过程。

```
Dim dt As New DataTable("ModuleTableVariable")
dt.Columns.Add("ModuleName")
dt.Columns.Add("ModuleVersion")
Dim rows As List(Of DataRow) = fileList.Select(Function(x)
                                                 Dim row = dt.NewRow()
                                                 row("ModuleName") = x.Name
                                                 If x.Extension = ".dll" Or x.Extension = ".exe" Then
                                                   row("ModuleVersion") = Assembly.LoadFile(x.FullName).GetName().Version
                                                 Else
                                                   row("ModuleVersion") = x.CreationTime
                                                 End If
                                                 Return row
                                               End Function).ToList() 
```

所以很明显，我指的是程序集版本的部分是我需要更改或实施某种使用语句的地方，该语句将处理对相关文件的访问，有什么想法吗？

注意：如果您显示合适的 using 语句或解决方案，我也会接受 C# 中的答案，不必是完整的 LINQ。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:40:00.573

找到了我需要的东西

```
AssemblyName.GetAssemblyName("filename.exe").Version 
```

使用它不会仅加载整个程序集我需要的信息，这意味着它不会锁定文件。谢谢大家的建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:15:45.510

您是否尝试通过调用将程序集加载到[*仅反射上下文*](http://msdn.microsoft.com/en-us/library/ms172331.aspx)[`Assembly.ReflectionOnlyLoadFrom()`](http://msdn.microsoft.com/en-us/library/system.reflection.assembly.reflectiononlyloadfrom)中？

另一种方法是[创建一个新的`AppDomain`](http://msdn.microsoft.com/en-us/library/47e8e141.aspx)，因为[您根本无法卸载程序集](http://msdn.microsoft.com/en-us/library/ms173101.aspx)。将程序集加载到这个新域中，然后[卸载`AppDomain`](http://msdn.microsoft.com/en-us/library/system.appdomain.unload.aspx)。

# python - WordPress XML ParseError：未绑定的前缀？

> ID：12349469
> 
> 赞同：3
> 
> 时间：2012-09-10T10:08:40.730
> 
> 标签：python, wordpress, xml-parsing

我正在尝试使用 Python 的 xml.etree.ElementTree.parse() 函数来解析我通过从 WordPress 博客导出所有内容而创建的 XML 文件。但是，当我这样尝试时：

```
import xml.etree.ElementTree as xml
tree = xml.parse('/path/to/file.xml') 
```

我收到以下错误：

```
 File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py", line 1183, in parse
tree.parse(source, parser)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py", line 656, in parse
parser.feed(data)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py", line 1643, in feed
self._raiseerror(v)
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/xml/etree/ElementTree.py", line 1507, in _raiseerror
raise err
ParseError: unbound prefix: line 189, column 1 
```

这是我的 XML 文件第 189 行的内容：

```
<atom:link rel="search" type="application/opensearchdescription+xml" href="http://blogname.wordpress.com/osd.xml" title="blog name" /> 
```

我已经看到很多关于 Android 开发中出现的这个错误的问题，但我不知道这是否以及如何适用于我的情况。有人能帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-14T05:27:01.520

向所有显然很愚蠢的人道歉，但事实证明我在文档中根本没有“原子”的命名空间定义。我猜“未绑定前缀”意味着前缀“原子”没有“绑定”到命名空间定义？

无论如何，添加上述定义已经解决了这个问题。虽然这让我想知道为什么 WordPress 导出 XML 文件时没有对他们使用的所有命名空间进行正确定义......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-02T11:46:43.273

如果您删除所有名称空间，则工作得很好。

改变

```
<s:home>USA</s:home> 
```

到

```
<home>USA</home> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-16T22:03:43.847

以防万一有一天它对某人有所帮助，我还在 Python 中使用 WordPress XML 导出（WordPress eXtended RSS）文件并且遇到了同样的错误。就我而言，WordPress 包含了*大部分*正确的命名空间定义。但是，XML 也包含 iTunes 播客信息，并且不存在 iTunes 命名空间声明。

`xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd"`我通过添加到 RSS 声明块来修复它。所以这：

```
<!-- generator="WordPress/4.9.8" created="2018-08-06 03:12" -->
<rss version="2.0"
    xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/"
    xmlns:content="http://purl.org/rss/1.0/modules/content/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:wp="http://wordpress.org/export/1.2/"
> 
```

变成了这样：

```
<!-- generator="WordPress/4.9.8" created="2018-08-06 03:12" -->
<rss version="2.0"
    xmlns:excerpt="http://wordpress.org/export/1.2/excerpt/"
    xmlns:content="http://purl.org/rss/1.0/modules/content/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
    xmlns:wp="http://wordpress.org/export/1.2/"
    xmlns:itunes="http://www.itunes.com/dtds/podcast-1.0.dtd"
> 
```

# .htaccess - 使用正则表达式进行 301 重定向

> ID：12349471
> 
> 赞同：2
> 
> 时间：2012-09-10T10:08:43.793
> 
> 标签：.htaccess, redirect, http-status-code-301

我在为我的 .htaccess 文件使用正确的代码时遇到了一些麻烦。我想要完成的是：

我们有一个 QR 码生成器，它会生成如下所示的随机 url'S：

[http://mydomain.com?APP-V2/7091c104-32a8-4680-9c07-a75c3ee61d7a/00](http://mydomain.com?APP-V2/7091c104-32a8-4680-9c07-a75c3ee61d7a/00)

我需要将所有这些 url 重定向到主页[http://mydomain.com](http://mydomain.com)。如何在我的 htaccess 文件中写入通配符？基本上 mydomain.com?APP-V2/ 之后的所有内容都应该被重定向。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:41:06.637

> 基本上 mydomain.com?APP-V2/ 之后的所有内容都应该被重定向。

如果你想：

```
http://mydomain.com/?APP-V2/7091c104-32a8-4680-9c07-a75c3ee61d7a/00 
```

被重定向到：

```
http://mydomain.com/ 
```

然后你只需摆脱查询字符串（例如`?APP-V2/7091c104-32a8-4680-9c07-a75c3ee61d7a/00`）：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^APP-V2/
RewriteRule ^$ /? [L] 
```

但是，如果您想要 之后的所有内容，则`?APP-V2/`需要以下内容：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^APP-V2/(.*)$
RewriteRule ^$ /%1? [L] 
```

# php - PHP mysql 我正在寻找好的格式并消除杂乱的代码

> ID：12349481
> 
> 赞同：2
> 
> 时间：2012-09-10T10:09:12.913
> 
> 标签：php, mysql

`mysql_query`我有这个 php 代码，其中有很多`or die ( mysql_error() )`

我怎样才能减少 mysql_query 或者我的代码真的需要 or die ( mysql_error() ) 吗？

我要在这里粘贴我的代码。

```
$sqlScore = "UPDATE game SET currentTurn = '1', remainingTiles='".$remainingTiles."' WHERE gameID = '".$gameID."'";
mysql_query( $sqlScore ) or die ( mysql_error() );

$ScoreSelect = set_mysql( "SELECT * FROM game WHERE gameID = '".$gameID."'" );
$up_gameID = $ScoreSelect['gameID'];
$set_p1 = $ScoreSelect['player1'];

// CHECK IF GAMEID EXIST FOR SCORE
$checkData = mysql_query( "SELECT * FROM score WHERE gameID = '".$gameID."' " ) or die ( mysql_error() );
$rcd = mysql_fetch_array( $checkData );
$rcd['gameID'] == $gameID 
? mysql_query( "UPDATE score SET score = '".$score."' WHERE gameID = '".$gameID."' " ) or die ( mysql_error() ) 
: mysql_query( "INSERT INTO score VALUE( '', '".$gameID."', '".$player1."', '".$score."')" ) or die ( mysql_error() );

// INSERT SQL WORD DATA
$sqlWD = mysql_query( "INSERT INTO word_data VALUE( '', '".$gameID."', '', '".$worddata."')" ) or die ( mysql_error() );

// CHECK FOR TILE
$sqlCheckRow = mysql_query( "SELECT * FROM wctilerack WHERE gameID = '".$up_gameID."' AND email = '".$up_email_player1."' " ) or die ( mysql_error() );
if ( mysql_num_rows( $sqlCheckRow ) == "1" ) {
    // INSERT wctilerack
    $sqlTileUP = mysql_query( "UPDATE wctilerack SET tiles = '$playerRack' WHERE gameID = '".$up_gameID."' AND email = '".$up_email_player1."' ") or die ( mysql_error() );
} else {
    // INSERT wctilerack
    $sqlTileINSERT = mysql_query( "INSERT INTO wctilerack VALUE('', '".$up_gameID."', '".$up_email_player1."', '$playerRack' ) ") or die ( mysql_error() );
}

// UPDATE lastPlayed
$sqlUpdatePlayed = mysql_query( "UPDATE user SET lastPlayed=NOW() WHERE email = '$up_email_player1' " ) or die ( mysql_error() );
// UPDATE word
$sqlUpdateWord = mysql_query( "UPDATE game SET lastWord = '".$xword[2]."', lastPoints='".$score."' WHERE gameID = '$up_gameID' " ) or die ( mysql_error() );
//$sqlInsertWord = mysql_query( "INSERT INTO word_data VALUE( '', '".$up_gameID."', '', '".$xword[2]."' )" ) or die ( mysql_error() );
/*$sqlCheckSK = mysql_query( "SELECT * FROM gameTileSkins WHERE gameID = '$gameID' AND email = '$up_email_player1' " ) or die ( mysql_error() );
if ( mysql_num_rows( $sqlCheckSK ) == '1' ) {
    $skUP = mysql_query( "UPDATE gameTileSkins SET tileSkin='$tileSkinID' WHERE gameID = '$gameID' AND email = '$up_email_player1' " ) or die ( mysql_error() );
} else {
    // INSERT gameTileSkins
    $sqlSK = mysql_query( "INSERT INTO gameTileSkins VALUE('', '$gameID', '$up_email_player1', '$tileSkinID')" ) or die ( mysql_error() );
}*/ 
```

如果您注意到调用了很多查询。它是一个获取所有记录并更新的游戏应用程序。有没有办法可以清理代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:13:52.807

首先：切换到[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://php.net/manual/en/book.mysqli.php)。不再推荐使用 mysql 函数。来自 PHP 手册：

> 不鼓励使用此扩展 (mysql)。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

在实际清理代码方面，您应该研究[Don't Repeat Yourself](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)的概念。通用操作（连接、查询等）的包装类将帮助您清理一些东西。创建自己的包装类是一种很好的学习方式，它将帮助您抽象大多数常见的数据库查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:16:44.773

如果此代码正常工作并且多年的错误修复，您不应该尽可能少地更改它。我建议您通过代码 grep 并找到“mysql_query”调用。并先将其替换为类似的功能。

```
mysql_query( some text here ) or die(mysql_error()); 
```

应该替换为

```
handle_query( some text here ) 
```

和`handle_query`功能应定义为

```
function handle_query($query){
    mysql_query( $query) or die(mysql_error());
} 
```

之后运行你的测试。如果一切顺利。改变`handle_query`函数体。

> 我怎样才能减少 mysql_query 或者我的代码真的需要 or die ( mysql_error() ) 吗？

您可以使用 sed/grep。假设你的代码在`junk_code.php`你可以使用这个命令来读取那些`or die (mysql_error())`；

```
sed 's/mysql_query/handle_query/g'  junk_code | sed 's/\s*or\s*die\s*(\s*mysql_error(\s*)\s*)\s*//g' 
```

但不要忘记在使用此类遗留代码之前进行备份。这些代码有多年的经验。可能会修复很多错误。你肯定不想打破它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:12:05.910

除非您想开始牺牲错误处理或减少您使用的查询数量，否则您不能。看看只是用更多的换行符清理你的代码库，或者转移到 MVC 样式以有效地将每个数据库查询抽象到它自己的函数中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T10:21:05.943

```
// CHECK IF GAMEID EXIST FOR SCORE
$checkData = mysql_query( "SELECT * FROM score WHERE gameID = '".$gameID."' " ) or die ( mysql_error() );
$rcd = mysql_fetch_array( $checkData );
$rcd['gameID'] == $gameID 
? mysql_query( "UPDATE score SET score = '".$score."' WHERE gameID = '".$gameID."' " ) or die ( mysql_error() ) 
: mysql_query( "INSERT INTO score VALUE( '', '".$gameID."', '".$player1."', '".$score."')" ) or die ( mysql_error() ); 
```

和

```
$sqlCheckRow = mysql_query( "SELECT * FROM wctilerack WHERE gameID = '".$up_gameID."' AND    email = '".$up_email_player1."' " ) or die ( mysql_error() );
if ( mysql_num_rows( $sqlCheckRow ) == "1" ) {
// INSERT wctilerack
$sqlTileUP = mysql_query( "UPDATE wctilerack SET tiles = '$playerRack' WHERE gameID = '".$up_gameID."' AND email = '".$up_email_player1."' ") or die ( mysql_error() );
} else {
// INSERT wctilerack
$sqlTileINSERT = mysql_query( "INSERT INTO wctilerack VALUE('', '".$up_gameID."', '".$up_email_player1."', '$playerRack' ) ") or die ( mysql_error() );
} 
```

除了这些代码，您可以使用 ON DUPLICATE KEY 语法编写一个查询 for(insert/update)。

```
eg:     mysql_query("INSERT INTO score VALUES ('', '".$gameID."', '".$player1."', '".$score."') ON DUPLICATE KEY UPDATE score = '".$score."'") or die ( mysql_error() ); 
```

# windows-phone-7 - 无法解析指定对象上的 TargetProperty (UIElement.RenderTransform).(RotateTransform.Angle)

> ID：12349485
> 
> 赞同：1
> 
> 时间：2012-09-10T10:09:28.913
> 
> 标签：windows-phone-7, xaml, animation

以前有人遇到过这个问题吗？我想在windows phone 7中显示动画，我的sdk版本是7.1，我想在我的应用程序中将图片旋转为动画，但它没有用。

```
<Image.Resources>
    <Storyboard x:Name="myStoryboard">
        <DoubleAnimation
        Storyboard.TargetName="myTransform"
        Storyboard.TargetProperty="Angle"
        From="0" To="360" Duration="0:0:5" 
        RepeatBehavior="Forever" />
    </Storyboard>
</Image.Resources> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T13:52:43.243

WP7 动画与 WPF 不同 - 一个 CompositeTransform 对象而不是几个用于不同目的的对象。首先，我会在`PhoneApplicationPage.Resources`.

您需要指定目标动画和属性。

```
<phone:PhoneApplicationPage.Resources>
<Storyboard x:Name="myStoryboard">
    <DoubleAnimation
        Storyboard.TargetName="myTransformPanel" <!-- Here is a object that
                                           you'd like to move e.g. StackPanel -->
        Storyboard.TargetProperty="(UIElement.RenderTransform).(CompositeTransform.Rotation)"
        From="0" To="360" Duration="0:0:5" 
        RepeatBehavior="Forever" />
    </Storyboard>
</phone:PhoneApplicationPage.Resources> 
```

您还需要为`CompositeTransform`要转换的对象进行设置。

```
<StackPanel x:Name="myTransformPanel" >
         <StackPanel.RenderTransform>
            <CompositeTransform></CompositeTransform>
        </StackPanel.RenderTransform>
</Stackanel> 
```

# java - 将串口输出重定向到套接字

> ID：12349486
> 
> 赞同：0
> 
> 时间：2012-09-10T10:09:33.530
> 
> 标签：java, serial-port, byte

我用 Java 编写了一个小程序，它从串行端口读取信息（一些文本消息和一些二进制数据，混合），然后通过 TCP 套接字发送。

起初我试图将数据放入缓冲区，并在“/n”到达时发送所有内容，但二进制数据不能那样工作。

我的第二个想法是一直按字节发送数据。但是它变得太慢了，我想我在发送数据时会丢失数据，即使我认为我使用了线程。

下一个想法是当我存储达到 100 个字节时发送数据，但这是一个肮脏的修复。

我的串行数据来自 GPS 接收器，这些设备通常每秒发送许多句数据（文本和二进制）（或可配置为 10、50、100Hz，取决于型号）。无论如何，接收数据存在时间间隔，而没有接收到数据的时间间隔则相当大。我想摆脱我的数据的最奇特的方法是检测该间隙并发送所有存储的数据，然后在间隙结束时新数据到达之前。

我怎么能检测到这种事件？

编辑：我使用 RXTX 包来摆脱串口，我正在使用 Windows 7 64bits

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:43:19.657

要检测间隙，只需使用 enableReceiveTimeout 启用超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:34:31.223

只需读取和写入 byte[] 缓冲区，确保只写入 read() 方法返回的实际计数。

# c# - RavenDB Reduce 表达式不支持 SelectMany？

> ID：12349494
> 
> 赞同：0
> 
> 时间：2012-09-10T10:09:54.950
> 
> 标签：c#, linq, mapreduce, ravendb

由于插入性能，我有一个想批量存储小文档的场景。但我当然希望能够搜索单个项目。

```
public class Batch
{
    public Guid Id { get; set; }
    public Item[] Items { get; set; }
}

public class Item
{
    public int Id { get; set; }
    public string Description { get; set; }
} 
```

假设我想按描述搜索并且我希望返回 ID。我创建了以下非常简单的 map/reduce 索引，我希望这样做：

```
Map = batches =>
    from batch in batches
    from item in batch.Items
    select new Result
        {
             Description = item.Description,
             ItemIds = new[] {item.Id}
        };

Reduce = results =>
    from result in results
    group result by result.Description into g
    select new Result
        {
             Description = g.Key,
             ItemIds = g.SelectMany(x => x.ItemIds).ToArray()
        }; 
```

使用此索引的查询不会失败，只是不会返回任何结果。

如果只对索引进行一点修改，使用 string.Join 而不是 SelectMany 来获取 ID，一切正常。

```
Map = batches =>
     from batch in batches
     from item in batch.Items
     select new Result
         {
             Description = item.Description,
             ItemIdsAsString = item.Id.ToString(),
         };

Reduce = results =>
     from result in results
     group result by result.Description into g
     select new Result
         {
             Description = g.Key,
             ItemIdsAsString = string.Join("|", g.Select(x => x.ItemIdsAsString)),
         }; 
```

行为完全相同，只是 ID 现在存储为“2|5|7”而不是这些整数的数组。但是这一次，索引产生了正确的结果。

[完整的测试可以在这里找到](https://gist.github.com/3690005)

SelectMany 在 Reduce 表达式中不起作用的原因是什么？

# java - SWT/JFace如何使标签窗口可滚动

> ID：12349497
> 
> 赞同：0
> 
> 时间：2012-09-10T10:10:17.300
> 
> 标签：java, tabs, swt, jface

使用选项卡窗口并为外壳提供固定大小，如果空间不足，我如何使内容（即整个外壳）可滚动？这是外壳、选项卡主机还是单个选项卡的设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:16:03.710

使用一个[`ScrolledComposite`](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fcustom%2FScrolledComposite.html)包含你全部内容的。这样，如果没有足够的空间来显示它，它将滚动。

以下代码应该让您了解它是如何工作的：

```
public static void main(String[] args) {
    final Display display = new Display();
    final Shell shell = new Shell(display);
    shell.setLayout(new FillLayout());

    // Create the ScrolledComposite to scroll horizontally and vertically
    ScrolledComposite scrolledComp = new ScrolledComposite(shell, SWT.H_SCROLL | SWT.V_SCROLL);

    // Create a child composite for your content
    Composite content = new Composite(scrolledComp, SWT.NONE);
    content.setLayout(new FillLayout());

    // Create some content
    new Button(content, SWT.PUSH).setText("Button1");
    new Button(content, SWT.PUSH).setText("Button2");

    // add content to scrolled composite
    scrolledComp.setContent(content);

    // Set the minimum size (in this case way too large)
    scrolledComp.setMinSize(400, 400);

    // Expand both horizontally and vertically
    scrolledComp.setExpandHorizontal(true);
    scrolledComp.setExpandVertical(true);

    shell.pack();
    shell.open();
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch()) {
            display.sleep();
        }
    }
    display.dispose();
} 
```

运行它，减小窗口大小，您将看到滚动条。

# c# - 表示数字的最小位数

> ID：12349498
> 
> 赞同：5
> 
> 时间：2012-09-10T10:10:21.767
> 
> 标签：c#, integer, bit-manipulation, bit

找出表示某个随机整数需要多少位的最有效方法是什么？例如数字 30,000 用二进制表示

111010100110000

所以它需要15位

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T10:12:45.660

你可以试试：

```
Math.Floor(Math.Log(30000, 2)) + 1 
```

或者

```
(int) Math.Log(30000, 2) + 1 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-10T10:17:45.513

```
int v = 30000; // 32-bit word to find the log base 2 of
int r = 0; // r will be lg(v)

while ( (v >>= 1) != 0) // unroll for more speed...
{
  r++;
} 
```

有关更高级的方法，请参见此处[http://graphics.stanford.edu/~seander/bithacks.html#IntegerLogObvious](http://graphics.stanford.edu/~seander/bithacks.html#IntegerLogObvious)

请注意，这会计算最左边设置位的索引（14 表示 30000）。如果你想要位数，只需加 1。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T10:13:23.543

试试 log(number)/log(2)。然后将其四舍五入到下一个整数。

# jquery - 更新函数内 ajax 中的参数

> ID：12349499
> 
> 赞同：0
> 
> 时间：2012-09-10T10:10:31.100
> 
> 标签：jquery, ajax

我有这个代码

```
<script type="text/javascript">
var nextUrlArticle = null;

$(document).ready(function() {
    $.get("{{ path('next_video_url', { 'id' : article.id })}}", function(result) {
        nextUrlArticle = result.url;
    });

    function getNextVideo(ext) {
        if (nextUrlArticle) {
            window.location.href = nextUrlArticle;
        }
    }
});
</script> 
```

而且它永远不会进入“ `window.location.href`”，这是完全正常的，因为它是用初始化的，`null`并且有一个 ajax 调用来更新参数，但由于它是异步的，因此在处理代码时它没有效果。

但我真的需要检查 nextUrlArticle 是否不为空，所以我无法删除该检查。 **将`getNextVideo`在视频结束时由 Flash 视频播放器调用**。（我不知道这部分代码）

如何使该检查通过？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:12:16.993

AJAX成功后，需要用更新的值调用函数执行；

```
$(document).ready(function() {
    $.get("{{ path('next_video_url', { 'id' : article.id })}}", function(result) {
        nextUrlArticle = result.url;
        getNextVideo(); // call function after update
    });

    function getNextVideo() {
        if (nextUrlArticle) {
            window.location.href = nextUrlArticle;
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:26:44.423

好的，我需要将 OUTSIDE 放在`getNextVideo()`OUTSIDE 中，`$(document).ready(function() {`因为视频播放器无法调用 .ready 中的函数

很高兴知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:21:15.980

我认为视频在 ajax 完成之前调用了该方法。

一种方法是在加载页面时直接传递nexturl，而不是从ajax获取，例如：

```
nextUrlArticle = {{ nexturl }} //django syntax to pass context vars to template
function getNextVideo() {
    if (nextUrlArticle) {
        window.location.href = nextUrlArticle;
    }
 } 
```

# nosql - RavenDB 数据建模

> ID：12349501
> 
> 赞同：2
> 
> 时间：2012-09-10T10:10:34.007
> 
> 标签：nosql, ravendb, document-storage

我最近开始研究 RavenDB，并尝试看看它是否适合我们的某些项目。但是，我遇到了一些关于建模简单数据结构的“正确”方法的问题。我将尝试描述它：

*   有 3 种类型的对象：**指南**、**类别**和**链接**
*   一个“根”**指南**可以包含 0 个或多个子**指南**
*   一个**指南**可以包含 0 个或多个**类别**
*   一个**类别**可以包含 0 个或多个**链接**

从视觉上看，结构将是：

*   根指南（0个或更多）
    *   子指南（0个或更多）
        *   类别（0个或更多）
            *   链接（0个或更多）
    *   类别（0个或更多）
        *   链接（0个或更多）

在实际数据中，大约有20个根Guide，每个根Guide下大约有3-5个子Guide。在每个指南（根指南和子指南）下都有 15-25 个类别。每个类别下有 5 到 20 个链接。

我最初的想法是像这样建模（简化模型）：

```
Guide
---------------
Id
ParentGuideId
Title

Category
---------------
Id
GuideId
Title

Link
---------------
Id
CategoryId
Title 
```

这几乎是关系模型，我意识到这可能不是在 RavenDB 中建模数据的正确方法。那么替代方案是什么？我想问题是我不想像这样存储层次结构：

```
Guide
---------------
Id
Title
SubGuides
Categories

SubGuide
---------------
Title
Categories

Category
---------------
Title
Links

Link
---------------
Title 
```

因为它会导致文档可能包含数千个子对象。请记住，上面的模型是简化的。实际上，每种类型都有更多的数据，因此如果我们采用这种模型，RavenDB 中的 20 个根指南文档将会非常庞大​​。

有没有其他选择？也许这是我多年来对关系数据库的不良教育，但也许这种情况根本不适合 RavenDB，也适合 SQL？

**编辑（添加基本查询）**

访问数据相当简单。我有以下要求：

1.  选择包含所有子指南的根指南列表。
2.  对于特定指南（根或子），获取所有子指南（如果是根）、类别和链接。

这基本上就是我所需要的。但是，评估 RavenDB 或类似数据库的原因之一是添加了一些搜索功能。正如我已经提到的，还有一些关于链接、类别和指南的更多信息，例如描述、标签等，因此能够搜索所有这些信息会很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T12:10:54.997

我会处理事情，使指南成为一个文件。类别和链接嵌入在该文档中。

一个指南可以有一个子指南的集合。

第一个查询是查询所有指南及其子项。你这样做：

```
session.Query<Guide>().Include(x=>x.SubGuides).Where(x=>x.Parent == null).ToList(); 
```

这将在一个服务器查询中为您提供所有内容。

```
session.Include<Guide>(x=>x.SubGuides).Load("guides/123") 
```

这将为您提供所有子指南的指南。

# nhibernate - 在代码中定义连接条件

> ID：12349504
> 
> 赞同：0
> 
> 时间：2012-09-10T10:10:44.133
> 
> 标签：nhibernate

*是否可以在查询CONDITION*后对惰性子列表的 NHibernate 连接条件进行编码（不是映射） ？

```
...
JOIN ChildTable child ON child.ParentID = parent.ID AND <CONDITION> 
```

NHibernate 2.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T19:57:55.637

是的，可以使用标准或 QueryOver API 编写该查询。这是 QueryOver api 的示例

```
Child childAlias = null;     
session.QueryOver<Parent>()
                .JoinAlias(w => w.Children,
                            () => childAlias ,
                            JoinType.None,
                            Restrictions.Where<Child>(s => s.Active)
                ).List(); 
```

# shell - 使用 awk 和/或 shell 构建数组

> ID：12349505
> 
> 赞同：0
> 
> 时间：2012-09-10T10:10:46.370
> 
> 标签：shell, awk

我使用以下行从字符串创建字段数组：

```
var=$(echo $FieldName | awk -F";" '{print $1,$2,$3,$4,$5,$6,$7,$8,$9}') 
```

`$FieldName`是一个字符串，其字段由分号分隔。

当`$FieldName`包含没有空格的字符串时，它的行为正确。问题是当它包含任何嵌入的空格字符时，脚本会将空格视为换行符。

例如：

```
$FieldName = aa;bcd;cal;da;ea;fa;ga;ha;ia 
```

给出了`[aa,bcd,cal,da,ea,fa,ga,ha,ia]`预期的结果。

但`$FieldName = aa;bcd;cal;da;ea;fa;ga;ha;ia <= ia2`

给`[aa,bcd,cal,da,ea,fa,ga,ha,ia] , [<=, , , , , , , , ] and [ia2, , , , , , , , ]`

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:18:08.127

你不需要`awk`：

```
IFS=\;
set $FieldName
var=$@ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:41:01.493

您似乎正在尝试更改 的分隔符`$FieldName`，在这种情况下使用`awk`如下：

```
echo "$FieldName" | awk -v FS=',' -v OFS=';' 1 
```

执行`1`默认块：`{ print $0 }`.

或者`tr`：

```
echo "$FieldName" | tr ';' ',' 
```

输出：

```
aa,bcd,cal,da,ea,fa,ga,ha,ia <= ia2 
```

# ruby-on-rails - 哈希合并和重新排序

> ID：12349506
> 
> 赞同：-2
> 
> 时间：2012-09-10T10:10:51.043
> 
> 标签：ruby-on-rails, ruby, arrays, hash

我希望合并 2 个哈希并将其提供给我，如下面的“预期结果”部分所示。有任何想法吗 ？

示例数据：

```
list1 = { '1' => [item1] }
list2 = { '1' => [item2], '2' => [item3]} 
```

预期结果

```
{ 
  '1' => {:from_list1 => [item1], :from_list2 => [item2]},
  '2' => {:from_list2 => [item3]}
} 
```

注意：这几乎是我在[Best way to combine 2 hashes in this order 中的另一个问题的更新](https://stackoverflow.com/questions/12348105/best-way-to-combine-2-hashes-in-this-order)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:17:30.323

尝试嵌套[注入](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)：

```
list1={'1'=>['item1'],'3'=>['item4']}
list2={"1"=>["item2"], "2"=>["item3"]} 

list2.inject(list1.inject({}) { |c, (k, v)| 
   c[k]=(list2.has_key?(k) ? {:from_list1=>v,:from_list2=>list2[k]} : {:from_list1=>v}) 
   c
   }) { |c, (k, v)| 
      c[k]||={:from_list2=>v}
      c
}

#result:
{"1"=>{:from_list1=>["item1"], :from_list2=>["item2"]}, "3"=>{:from_list1=>["item4"]}, "2"=>{:from_list2=>["item3"]}} 
```

# c# - 为什么在 Vista 64 上 Control.Handle 值为负？

> ID：12349513
> 
> 赞同：2
> 
> 时间：2012-09-10T10:11:46.143
> 
> 标签：c#, handle

我在 Vista 64 环境中遇到了涉及一些负 Control.Handle 值的问题。

所以我做了一个简单的表格来尝试一下。

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        textBox1.Text = this.Handle.ToString();
        textBox2.Text = textBox2.Handle.ToString();
    }
} 
```

我已经尝试过这个程序的 86 和 64 版本，但是在两个句柄上我会得到如下所示：-265484586、-266008916、-266205244 ....

如果我在 Win7 上运行程序，句柄将是正常的。怎么了？假设手柄总是积极的，我错了吗？

# sql - 插入时“违反 PRIMARY KEY 约束”

> ID：12349517
> 
> 赞同：0
> 
> 时间：2012-09-10T10:12:05.427
> 
> 标签：sql, sql-server, insert, primary-key

在我们的一张表上运行插入时出现上述错误。

AdmFormData 有 3 个主键，FormType、KeyField 和 FieldName。

有人知道我做错了什么吗？

```
 set rowcount 0
    go

    INSERT INTO  AdmFormData
    (
    [FormType]
      ,[KeyField]
      ,[FieldName]
      ,[AlphaValue]
      ,[NumericValue]
      ,[DateValue]
    )
    SELECT
     'CUS' AS [FormType]
      ,Customer as [KeyField]
      ,'SAL001' AS [FieldName]
      ,[Customer Territory] AS [AlphaValue]
      ,NULL AS [NumericValue]
      ,NULL AS [DateValue]
    FROM
    dgl_territory a
    LEFT OUTER JOIN AdmFormData f
    on f.FormType = 'CUS' and f.FieldName = 'SAL001' and f.KeyField = a.Customer
    WHERE f.FormType IS NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:15:49.527

该错误告诉您，`AdmFormData`表中已经有一条记录，该记录具有您要尝试的主键`INSERT`

如果您在表上的主键包含`FormType, KeyField and FieldName`，那么您已经有一条包含以下值的记录：

```
'CUS' AS [FormType]
,Customer as [KeyField]
,'SAL001' AS [FieldName] 
```

您不能拥有多个具有相同主键的记录，它们是唯一的。

# android - 单击列表项时如何在 2 秒后隐藏 TextView。？

> ID：12349518
> 
> 赞同：0
> 
> 时间：2012-09-10T10:12:08.740
> 
> 标签：android, adapter

我`TextView`在我的适配器类中使用，当我单击列表项时，我在列表项`TexView`旁边显示一个。但我需要`TextView`在 2 秒后隐藏它..？

我使用`Timer`了功能，但它在适配器类中不起作用。

请帮我找到一个好的解决方案。

**这是我的代码：**

```
static class ViewHolder {
    TextView name;
    TextView time;
    ImageView check;
    TextView full_name;

}

public static class Clockin_Adapter extends ArrayAdapter<DataItem> {

    .
    .
    .
    .
    //in getView() method..

    holder.name.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {

            holder.full_name.setVisibility(View.VISIBLE);
            holder.full_name.setText(employeeList[position]);

            return false;
        }
    });

    // need to hide **holder.full_name** textView after x seconds..

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:16:51.837

在 Handler 类上创建并将您的 textview 隐藏代码放入其中并使用 postDelayed 方法调用该处理程序。

// 声明处理程序

```
private Handler mHandler = new Handler(); 

private Runnable mUpdateTimeTask = new Runnable() 
 {
    public void run() 
    {
         // Code to hide textview          
    }
} 
```

使用 postDelayed 方法调用 Handler。

`mHandler.postDelayed(mUpdateTimeTask, 2000);` // 2 秒

# python - 另一种不受支持的操作数问题（python 3）

> ID：12349519
> 
> 赞同：0
> 
> 时间：2012-09-10T10:12:11.947
> 
> 标签：python, string, operand

你好，我是 python 和一般编程的新手（昨晚才开始！），我写了一个小程序，粘贴在下面：

```
name = str(input("please state your name: ")) 
print ("Welcome %s, your doomesday weapon of impolite mutant pigeons is ready for launch") %name 
```

但是，这会不断返回此错误：

回溯（最近一次调用最后）：文件“prog.py”，第 2 行，打印中（“欢迎 %s，你的不礼貌突变鸽子的末日武器已准备好发射”）%name TypeError: unsupported operand type(s) for %: 'NoneType' 和 'str'

现在我知道此类问题的通常答案是将输入从字符串转换为整数并调整使用的操作数类型以匹配。但是在这种情况下，我实际上想使用字符串形式的输入，那么问题出在哪里？

PS 我正在使用 Ideone.com 来编译这段代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:18:18.390

```
... launch" %name) 
```

代替

```
... launch") %name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:15:22.200

字符串格式`%`需要进入`()`; 该`print`函数返回`None`，并且您正在尝试格式化结果。

假设您使用的是 Python 3，您的初始调用`str()`也是不必要的；`input()`返回一个字符串。（如果你使用的是 Python 2，你应该使用`raw_input()`而不是`input()`，它也返回一个字符串。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:18:26.433

这个问题有两个部分：

```
name = "andy"
print "Welcome %s, your doomesday weapon of impolite mutant pigeons is ready for launch" %name 
```

如果这有效（那么您使用的是 Python 2），如果不是，则因为在 Python 3 中您需要将 print 语句括在括号中，并且会得到一个**`SyntaxError`**.

```
name = "andy"
print ("Welcome %s, your doomesday weapon of impolite mutant pigeons is ready for launch" %name) 
```

第二个是 Ideone.com 不接受用户输入，因此字符串`name`保留为 None （这不是字符串），这解释了`TypeError`.

```
name = None
print ("Welcome %s, your doomesday weapon of impolite mutant pigeons is ready for launch" % name) 
```

# c++ - Inotify 不适用于 etc/passwd

> ID：12349520
> 
> 赞同：2
> 
> 时间：2012-09-10T10:12:12.603
> 
> 标签：c++, linux, inotify

我正在尝试为 /etc 目录中的 passwd 文件设置列表器，并且我只收到第一次密码更改的通知。

```
fd = inotify_init();
wd = inotify_add_watch (fd, "/etc/passwd", IN_MODIFY);
while(1)
{
 read (fd, buff, BUFF_SIZE);
 struct inotify_event *event = ( struct inotify_event * ) &buff[ i ];
 printf("Event Len -  %d  wd %d \n", event->len, event->wd);
} 
```

为什么它是第一次而不是以后？我每次更改密码时都会看到时间戳发生变化。同一组代码适用于其他文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T10:31:39.357

更改时`/etc/passwd`，大多数应用程序会创建一个新文件并重命名它。这给出了一个新的 inode 编号。

# c# - 将 Windows 应用程序转换为基于 Web 的应用程序

> ID：12349522
> 
> 赞同：0
> 
> 时间：2012-09-10T10:12:21.197
> 
> 标签：c#, vb.net, web-services, web-applications

我开发了一个 Windows 应用程序。该应用程序基本上是一个控制台，可帮助用户启动多个第三部分应用程序，例如 MS word.exe、MSExcel.exe、Windows 计算器等。该应用程序目前作为 Windows 应用程序运行良好。一般通过 Process.Start() 方法启动应用程序。

现在，我计划发布我的应用程序的基于 Web 的版本。我的想法是，如果用户可以通过网络访问我的应用程序，他/她可以运行 MSword、Excel 和所有通过我的应用程序可用的应用程序。

请指导我如何实现这一目标。谢谢..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T15:26:32.443

您的 Process.start() 函数试图在服务器上而不是在客户端上打开 MS Word。如果服务器和客户端在同一台机器上，它将打开 word 文件，即文档在您托管 Web 应用程序的同一台机器上。

在客户端打开 word.exe 等的情况下，由于浏览器安全限制，您不能。您可以做一件事，将链接指向可以在客户端下载的某个 word 或 excel 文件，然后客户端可以使用它。希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T15:24:59.763

像这样的事情在 ASP.NET 中并不容易做到。使用 Process.Start() 只是在 ASP.NET Web 服务器上运行应用程序，而不是在客户端上运行。由于浏览器的限制，能够在客户端执行应用程序存在安全隐患。

我建议的一种解决方案是使用 SilverLight。使用 SilverLight，您可以使用以下代码在客户端上运行应用程序：

```
dynamic cmd = AutomationFactory.CreateObject("WScript.Shell");
cmd.Run("calc.exe", 1, true); 
```

请注意，您必须运行 Silverlight 4.0 或更高版本才能运行此代码。

# javascript - jQuery 表单验证在 Mozilla 和 Internet Explorer 中工作，但在 Chrome 或 Safari 中不工作

> ID：12349523
> 
> 赞同：1
> 
> 时间：2012-09-10T10:12:25.193
> 
> 标签：javascript, jquery, google-chrome, safari, validation

我已经获取了现有工作联系表的精确副本…… [http://dev.rapweb.co.uk/rapport-form-test/](http://dev.rapweb.co.uk/rapport-form-test/)

在 Chrome 和 Safari 中，验证无效。

我发现其他有类似问题的人建议尝试其他提交表单的方法，但是在尝试了这些替代方法后，Chrome 和 Safari 中的表单验证仍然失败。

我很困惑......任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:30:41.263

您应该在“文档准备就绪”事件之后分配验证规则所以 js/script.js 的所有代码都必须在 $(function(){ / *contents of js/script.js* / });

# java - 使用 for 循环测试数字是否为奇数

> ID：12349525
> 
> 赞同：0
> 
> 时间：2012-09-10T10:12:34.200
> 
> 标签：java, loops, for-loop

我正在编写一种方法来检查数组中包含多少奇数。这个想法是我使用一个 for 循环来测试一个数字是否为奇数，如果是，它将变量 b 加一，然后返回 b 作为赔率数。我是这样写的：

```
for ( int a = 0, b = 0; values[a]%2==1;a++){
b++;
}

return b; 
```

但它给了我一个错误“返回 b；^ b 无法解决”。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:14:36.913

变量 b 在 for 语句中定义，并且仅在该代码块中可见。

试试这个

```
int b = 0;
for ( int a = 0; values[a]%2==1;a++){
b++;
}

return b; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T10:14:44.850

您已经在循环范围内定义了 b - 它在您的回报之外是不可见的。你可以这样重写：

```
int b = 0
for ( int a = 0; values[a]%2==1;a++){
b++;
}

return b; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T10:15:23.643

当您尝试访问定义它的范围之外的变量时，会出现此错误。

```
// b is defined in this scope and available here only
for ( int a = 0, b = 0; values[a]%2==1;a++){

    b++;
}

// Nothing as b is available outside scope
return b; 
```

要解决此问题，只需`b`在更大范围内声明即可。

```
int b=0;
for ( int a = 0; values[a]%2==1;a++){
    b++;
}

return b; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T10:18:24.423

其他答案指出了导致编译错误的原因。还应该注意，算法是错误的。问题是循环在第一次终止时`values[a]%2==1`是`false`. 换句话说，它计算第一个偶数*之前的奇数个数*......而不是奇数的总数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T10:15:44.053

[http://www.roseindia.net/java/beginners/IfElse.shtml](http://www.roseindia.net/java/beginners/IfElse.shtml)

看看这个教程。它应该告诉你你需要知道的一切，并且比你的方法简单一点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T10:32:32.350

您不需要`b`值来检查数组的末尾。你有类似的东西

```
for (int a = 0; a < values.length;a++)
    if(values[a]%2!=1)
        return a;

// currently throws an exception. 
```

您可能打算计算看起来像这样的奇数值的数量。

```
int count = 0;
for (int a = 0; a < values.length;a++)
    if(values[a] % 2 !=0)
        count++;
return count; 
```

或者

```
int count = 0;
for (int v: values)
    count += v & 1;
return count; 
```

# php - 网络错误 (Tcp_error)

> ID：12349528
> 
> 赞同：0
> 
> 时间：2012-09-10T10:12:36.463
> 
> 标签：php, mysql, networking

我创建了一个网站，并且它运行良好。但有时我会出错

> 网络错误 (tcp_error)。发生通信错误："" Web 服务器可能已关闭、太忙或遇到其他问题，使其无法响应请求。您可能希望稍后再试一次。

请告诉我们确切的原因是什么......所以我们遇到了错误。

语言：PHP、Mysql。引擎 Myisam, Apache , Linux

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T10:17:49.003

您可能会寻找它返回的 http 错误以进行更进一步的跟踪。

# javascript - 在 codemirror 中更改 TextArea 的高度和宽度

> ID：12349529
> 
> 赞同：33
> 
> 时间：2012-09-10T10:12:42.750
> 
> 标签：javascript

我正在开发具有 xml、java 程序的网站。所以我选择 CodeMirror 在 TextArea 中显示程序。我已经成功展示了。它的默认`height`值`300px`在`codemirror.css`. 如何在 codemirror 中以编程方式更改 TextArea 的高度和宽度？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-09-10T10:22:45.290

[CodeMirror 用户手册是您的朋友。](http://codemirror.net/doc/manual.html#setSize)

示例代码：

```
<textarea id="myText" rows="4" cols="10"></textarea>

<script type="text/javascript" language="javascript">
    var myTextArea = document.getElementById('myText');
    var myCodeMirror = CodeMirror.fromTextArea(myTextArea);
    myCodeMirror.setSize(500, 300);
</script> 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-07-06T16:22:49.467

```
myCodeMirror.setSize(null, 500); 
```

您可以为其中任何一个传递 null 以指示不应更改该维度。

[文档：](https://codemirror.net/doc/manual.html)

```
cm.setSize(width: number|string, height: number|string) 
```

> 以编程方式设置编辑器的大小（覆盖适用的 CSS 规则）。宽度和高度可以是数字（解释为像素）或 CSS 单位（例如“100%”）。您可以为其中任何一个传递 null 以指示不应更改该维度。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-06-23T19:49:08.763

尽管克里斯蒂安的回答很好，但请注意：

> 自动调整大小演示。

```
.CodeMirror {
  border: 1px solid #eee;
  height: auto;
} 
```

> 通过将编辑器的`height`样式设置为`auto`并赋予`viewportMargin`值`Infinity`，可以使 CodeMirror 自动调整大小以适应其内容。

来源：[https ://codemirror.net/demo/resize.html](https://codemirror.net/demo/resize.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-25T15:32:29.347

作为正确答案的延伸：

如果您希望它**占用 Parent 元素的整个大小**，您可以使用：

`myCodeMirror.setSize("100%", "100%");`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-16T17:29:47.057

如果你在反应使用中这样做`ref`

```
const codemirrorRef = React.useRef();

React.useEffect(() => {
  const current = codemirrorRef.current.editor.display.wrapper.style.height = "1000px";
});

<CodeMirror
    [...]           
    ref={codemirrorRef}
/> 
```

`codemirrorRef.current.editor.display.wrapper`包含 div 元素。从那里你可以做任何你想做的事情`document.getElementById('#id')`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-25T23:02:10.180

```
<script>
 $(function () {
   // CodeMirror
   CodeMirror.fromTextArea(document.getElementById("codeMirrorDemo"), {
      lineNumbers: true,
      readOnly: true,
      //mode: "htmlmixed",
   }).setSize("100%", 610);
 })
</script> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-02T15:00:26.847

我使用了上面的解决方案，但是当一行太长然后它打破了包装并破坏了布局时，我总是在这个选项上苦苦挣扎。我不想使用 lineBreak 选项，所以我定义了以下内容：

```
<div class="container">
  <textarea id="codemirror">
</div> 
```

风格如下：

```
.container {
  position: relative;
  height: {as you want}
  width: 100%;
}

#codemirror {
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-04-11T11:13:06.720

如果您在 Angular 应用程序中使用 ngx-codemirror 包，下面的博客将对您非常有用

[https://devsuhas.com/2021/04/06/change-height-and-width-of-textarea-in-codemirror/](https://devsuhas.com/2021/04/06/change-height-and-width-of-textarea-in-codemirror/)

# java - Java 返回类型

> ID：12349532
> 
> 赞同：-4
> 
> 时间：2012-09-10T10:12:58.707
> 
> 标签：java, core

如果一个方法的返回类型是 int 并且如果它返回的是 -1 它实际上是什么意思？

```
public int handle_get_multi_leg_net_quote(Message mmsg) throws Exception {          
        if (null != t) {
                     return 1;
        }
        return -1;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T10:14:44.160

Java 中的[`int`](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)eger 是有**符号**的，因此可以返回一个负数。在 Java 中，这通常用于需要返回整数但*还*需要返回*错误*指示的方法。例如，当[`String#indexOf(int ch)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int%29)没有找到某个字符时，它返回`-1`表示它没有找到。

但是，在您的特定方法中，我会说返回 a`boolean`或抛出`Exception`when `t`is会更合适`null`。根据你的例子很难说。

> **`int`**: int 数据类型是一个 32 位有**符号**二进制补码整数。它的最小值为 -2,147,483,648，最大值为 2,147,483,647（含）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:14:54.270

我认为这是用java编写的c代码。我认为这应该抛出一个异常并利用 Java 的异常处理框架。我认为这段代码正在传回 -1 以指示错误。

我认为应该发生的事情是

```
public int handleGetMultiLegNetQuote(Message mmsg) throws Exception {          
    if (null == t) {
         throws new IllegalArugmentExeption("null t");            
    }
     return 1;

} 
```

我还将方法名称更改为 java 标准的 camelCase。没有更多信息，很难看到正在发生的事情。特别是当您检查未传递给方法的 t 时。

虽然我可能完全错了，它可能只是传回 -1 ，它在你的代码中有一些上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:20:18.387

它似乎是用另一种语言编写的代码，也许它应该是布尔值甚至是另一种类型的数据。您可以做的一件事是在将其适应 Java 之前了解它在另一种语言中的作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T10:22:07.730

int 在 Java 中是 32 位。但是，重要的是要意识到这些位中只有 31 个实际上包含该数字。例如，Integer.MAX_VALUE 返回 2^31 - 1，而不是 2^32 - 1。最高有效位（最左边的一位）是“符号”位。它告诉您数字是正数还是负数：0 表示这是一个正数，1 表示这是一个负数。

**所以结论是**
-1是整数。

详情见链接：
[http ://radio.javaranch.com/corey/2004/04/12/1081786778000.html](http://radio.javaranch.com/corey/2004/04/12/1081786778000.html)

# iphone - 如何在 UITableViewCellStyleValue2 样式的表格单元格中垂直居中详细文本？

> ID：12349535
> 
> 赞同：0
> 
> 时间：2012-09-10T10:13:05.877
> 
> 标签：iphone, uitableview, ios4

当我做

```
cell.textLabel.numberOfLines = 2;
cell.detailTextLabel.numberOfLines = 1; 
```

在**UITableViewCellStyleValue2**样式的单元格上，详细文本行是顶部对齐的，即与（主）文本的第一行大致处于相同的垂直位置。但是，我希望它位于单元格的垂直中心。设置`cell.detailTextLabel.baselineAdjustment`为各种值没有帮助。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:23:42.437

使用这两个标签创建**自定义单元格，并根据需要设置****detailtextLabel**（自定义）框架。

# android - Android：为什么第二个活动没有运行？

> ID：12349538
> 
> 赞同：0
> 
> 时间：2012-09-10T10:13:15.337
> 
> 标签：android, android-intent, android-activity, illegalstateexception

我正在制作我的第一个 android 应用程序。我正在尝试`SendMessage`从另一个名为`AskReport`. 我在 SO 上看到过类似的问题，但我找不到与我的问题相匹配的问题。

活动代码`AskReport`如下：

```
public class AskReport extends Activity
{
    Button done;
    RadioButton checkedRadioButton;
    RadioGroup group;
    EditText email, info;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.ask_report);
        done = (Button) findViewById(R.id.Report);
        group = (RadioGroup) findViewById(R.id.radioGroup1);
        checkedRadioButton = (RadioButton) findViewById(group.getCheckedRadioButtonId());
        info = (EditText) findViewById(R.id.Info);
        email = (EditText) findViewById(R.id.Email);
        }

    public void reportClick(View view){
        Intent intent = new Intent(this, SendMessage.class);
/* Line1 */ intent.putExtra("sender_email", email.getText());      
/* Line2 */ intent.putExtra("additional_info", info.getText());    
/* Line3 */ intent.putExtra("checked_button",checkedRadioButton.getText()); 
        startActivity(intent);
    }
} 
```

活动代码`SendMessage`如下：

```
 public class SendMessage extends Activity
    {
    String message = "";
    EditText message_to_send;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.send_message);
        message_to_send = (EditText) findViewById(R.id.message_to_send);
        Intent intent = getIntent();
        message += intent.getStringExtra("sender_email");
        message += intent.getStringExtra("additional_info");
        message += intent.getStringExtra("checked_button");
        message_to_send.setText(message);
        }
} 
```

一旦我注释掉活动中标记的三行`AskReport`，`SendMessage`活动就会成功调用，尽管出现的文本是`nullnullnull`（可以理解的）。

我已在清单中正确标记了活动条目。

另外，我还在这里给出了出现的 logcat 消息：

```
09-10 15:12:57.555: E/AndroidRuntime(1311): FATAL EXCEPTION: main
09-10 15:12:57.555: E/AndroidRuntime(1311): java.lang.IllegalStateException: Could not execute method of the activity
09-10 15:12:57.555: E/AndroidRuntime(1311):     at android.view.View$1.onClick(View.java:3591)
09-10 15:12:57.555: E/AndroidRuntime(1311):     at android.view.View.performClick(View.java:4084)
09-10 15:12:57.555: E/AndroidRuntime(1311):     at android.view.View$PerformClick.run(View.java:16966)
09-10 15:12:57.555: E/AndroidRuntime(1311):     at android.os.Handler.handleCallback(Handler.java:615)
09-10 15:12:57.555: E/AndroidRuntime(1311):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-10 15:12:57.555: E/AndroidRuntime(1311):     at android.os.Looper.loop(Looper.java:137)
09-10 15:12:57.555: E/AndroidRuntime(1311):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-10 15:12:57.555: E/AndroidRuntime(1311):     at java.lang.reflect.Method.invokeNative(Native Method)
09-10 15:12:57.555: E/AndroidRuntime(1311):     at java.lang.reflect.Method.invoke(Method.java:511)
09-10 15:12:57.555: E/AndroidRuntime(1311):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-10 15:12:57.555: E/AndroidRuntime(1311):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-10 15:12:57.555: E/AndroidRuntime(1311):     at dalvik.system.NativeStart.main(Native Method)
09-10 15:12:57.555: E/AndroidRuntime(1311): Caused by: java.lang.reflect.InvocationTargetException
09-10 15:12:57.555: E/AndroidRuntime(1311):     at java.lang.reflect.Method.invokeNative(Native Method)
09-10 15:12:57.555: E/AndroidRuntime(1311):     at java.lang.reflect.Method.invoke(Method.java:511)
09-10 15:12:57.555: E/AndroidRuntime(1311):     at android.view.View$1.onClick(View.java:3586)
09-10 15:12:57.555: E/AndroidRuntime(1311):     ... 11 more
09-10 15:12:57.555: E/AndroidRuntime(1311): Caused by: java.lang.NullPointerException
09-10 15:12:57.555: E/AndroidRuntime(1311):     at com.example.safeworld.AskReport.reportClick(AskReport.java:44)
09-10 15:12:57.555: E/AndroidRuntime(1311):     ... 14 more
09-10 15:13:00.725: I/Process(1311): Sending signal. PID: 1311 SIG: 9 
```

我也把函数放在`android:onClick="XXXXXX"`了对应的layout.xml中。

请帮我弄清楚这三行出了什么问题。谢谢你的帮助！

编辑：

这是我的`ask_report.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/TableLayout2"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/ask"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/ask_report"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:textSize="24dp" />

    <RadioGroup
        android:id="@+id/radioGroup1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" >

        <RadioButton
            android:id="@+id/road_accident"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="12dp"
            android:text="@string/road_accident" />

        <RadioButton
            android:id="@+id/fire"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="12dp"
            android:text="@string/fire" />

        <RadioButton
            android:id="@+id/theft"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="12dp"
            android:text="@string/theft" />

        <RadioButton
            android:id="@+id/other"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="12dp"
            android:layout_marginBottom="12dp"
            android:text="@string/other" />

    </RadioGroup>

    <TextView
        android:id="@+id/AddInfo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/add_detail" />

    <EditText
        android:id="@+id/Info"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="text" >
    </EditText>

    <TextView
        android:id="@+id/AskEmail"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/enter_email"
        android:layout_marginTop="10dp" />

    <EditText
        android:id="@+id/Email"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textEmailAddress" />

    <Button
        android:id="@+id/Report"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/done"
        android:onClick="reportClick" />

</TableLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:39:47.050

这可能是因为您从`EditText`Just do like below 获取文本 -

```
intent.putExtra("sender_email", email.getText().toString());
intent.putExtra("additional_info", info.getText().toString());
intent.putExtra("checked_button",checkedRadioButton.getText().toString()); 
```

你忘了`.toString()`用来获取文本`EditText`

**更新**

好的，最好这样做以从Inside of your方法`radioButton`中获取 Text这样做 -`RadioGroup``Button``onClick`

```
// Gets a reference to our radio group
// rBtnDigits is the name of our radio group (code not shown)
RadioGroup g = (RadioGroup) findViewById(R.id.radioGroup1); 

// Returns an integer which represents the selected radio button's ID
int selected = g.getCheckedRadioButtonId();

// Gets a reference to our "selected" radio button
RadioButton b = (RadioButton) findViewById(selected);

intent.putExtra("sender_email", email.getText().toString());
intent.putExtra("additional_info", info.getText().toString());

// Now you can get the text or whatever you want from the "selected" radio button
intent.putExtra("checked_button",b.getText()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:17:45.687

从堆栈跟踪来看，我会说这些行之一正在返回`null`：

```
checkedRadioButton = (RadioButton) findViewById(group.getCheckedRadioButtonId());
info = (EditText) findViewById(R.id.Info);
email = (EditText) findViewById(R.id.Email); 
```

打印所有三个视图的值，如果其中一个为空，则检查 id 是否正确并且它们在布局中`ask_report`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T19:41:08.940

好吧，我想我会自己回答这个问题，并让所有阅读此内容的人都知道答案。

三个标记线的问题在于，`Line3`因为那是在 中具有`null`价值的线`checkedRadioButton`。

有效的是：

*   我添加`android:checkedButton="@+id/road_accident"`到我的默认`RadioGroup`选择`RoadAccident`。
*   接下来，我添加了`onCheckedChangedListener`成功`RadioGroup`给我的`checkedRadioButton`.

代码如下：

```
group = (RadioGroup) findViewById(R.id.radioGroup1);
        group.setOnCheckedChangeListener(new OnCheckedChangeListener(){

            @Override
            public void onCheckedChanged(RadioGroup group, int checkedId) {
                // TODO Auto-generated method stub
                checkedRadioButton = (RadioButton) group.findViewById(checkedId);
            }
        });

        checkedRadioButton = (RadioButton) group.findViewById(group.getCheckedRadioButtonId()); 
```

现在 Line3 可以正常工作了。

**致谢：** 感谢@marmor 和@SpK 的帮助。抱歉，我无法选择你的一个答案，因为我从你的两个答案中都选了一半。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T10:21:26.763

当您定义

```
android:onClick="someMethod" 
```

# javascript - jquery检查并取消选中所有操作

> ID：12349541
> 
> 赞同：0
> 
> 时间：2012-09-10T10:13:27.000
> 
> 标签：javascript, jquery, html, unchecked

当用户点击它时，我有更多的复选框输入调用函数“boxclick”：

```
<input id="1box" type="checkbox" name="selected[]" onclick="boxclick(this,'1')">
<input id="2box" type="checkbox" name="selected[]" onclick="boxclick(this,'2')">
<input id="3box" type="checkbox" name="selected[]" onclick="boxclick(this,'3')">
<input id="4box" type="checkbox" name="selected[]" onclick="boxclick(this,'4')"> 
```

对于检查/取消选中所有我使用简单的 jquery 脚本：

```
<input type="checkbox" onclick="$('input[name*=\'selected\']').attr('checked', this.checked);" checked="checked"> 
```

我的问题是当我选中/取消选中所有未运行的“boxclick”功能时。

```
 // == a checkbox has been clicked ==
  function boxclick(box,category) {
    if (box.checked) {
      show(category);
    } else {
      hide(category);
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:15:16.503

将复选框的属性设置为选中不会自动为您伪造点击事件！因为您将这些 boxclick 函数调用放在一些“onclick”处理程序中，所以您必须触发一个虚假的 click 事件，以便您的 javascript 认为它**点击**了所有框。要触发虚假点击事件，请使用 $('#whatever').trigger('click')，例如：

```
$('input[name*=\'selected\']').trigger('click'); 
```

如果你想选中/取消选中所有功能，你必须说“好的，主复选框，请在我被选中或取消选中时听取。发生这种情况时，请设置我的从属盒（页面上的其他框）的选中属性以*匹配**主人当前检查的*属性。” 像这样：

```
function checkAllorUncheckAll(event){

    var chiefCheckbx = event.currentTarget;
    var myBoxes = $('input[name*=\'selected\']'); 

    myBoxes.prop( "checked", $(chiefCheckbx).prop("checked") ).trigger('click');

}

$('#masterCheckBox').on('change',checkAllorUncheckAll); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T10:15:48.127

我认为你可以这样做：

***HTML***

```
<input id="1box" type="checkbox" name="selected[]">
<input id="2box" type="checkbox" name="selected[]">
<input id="3box" type="checkbox" name="selected[]">
<input id="4box" type="checkbox" name="selected[]"> 
```

***jQuery***

如果您想选中/取消选中所有`checkbox`：

```
var checkboxes = $('input[type=checkbox][name^=selected]');
checkboxes.on('click', function() {
   checkboxes.prop('checked', this.checked);
}); 
```

如果您想一次选择任何一个：

```
var checkboxes = $('input[type=checkbox][name^=selected]');
checkboxes.on('click', function() {
   checkboxes.prop('checked', false);
   this.checked = !this.checked;
});​ 
```

***[演示](http://jsfiddle.net/7SM7V/)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:19:21.093

我猜

> `$('input[name*=\'selected\']').attr('checked', this.checked).trigger('click');`

应该在这里解决问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T11:29:50.050

演示 [http://jsfiddle.net/H37cb/](http://jsfiddle.net/H37cb/)

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js" /></script>

<script type="text/javascript">
$(document).ready(function(){

$('input[name="all"],input[name="title"]').bind('click', function(){
var status = $(this).is(':checked');
$('input[type="checkbox"]', $(this).parent('li')).attr('checked', status);
});

});
</script>

<div id="wrapper">
 <li style="margin-top: 20px">
  <input type="checkbox" name="all" id="all" /> <label for='all'>All</label>
  <ul>
   <li><input type="checkbox" name="title" id="title_1" /> <label for="title_1"><strong>Title 01</strong></label>
    <ul>
     <li><input type="checkbox" name="selected[]" id="box_1" value="1" /> <label for="box_1">Sub Title 01</label></li>
     <li><input type="checkbox" name="selected[]" id="box_2" value="2" /> <label for="box_2">Sub Title 02</label></li>
     <li><input type="checkbox" name="selected[]" id="box_3" value="3" /> <label for="box_3">Sub Title 03</label></li>
     <li><input type="checkbox" name="selected[]" id="box_4" value="4" /> <label for="box_4">Sub Title 04</label></li>
    </ul>
   </li>
  </ul>
  <ul>
   <li><input type="checkbox" name="title" id="title_2" /> <label for="title_2"><strong>Title 02</strong></label>
    <ul>
     <li><input type="checkbox" name="selected[]" id="box_5" value="5" /> <label for="box_5">Sub Title 05</label></li>
     <li><input type="checkbox" name="selected[]" id="box_6" value="6" /> <label for="box_6">Sub Title 06</label></li>
     <li><input type="checkbox" name="selected[]" id="box_7" value="7" /> <label for="box_7">Sub Title 07</label></li>
    </ul>
   </li>
  </ul>
 </li>
</div> 
```

# maven - 父 POM 版本号小于子 POM 版本号是否有任何影响？

> ID：12349543
> 
> 赞同：2
> 
> 时间：2012-09-10T10:13:36.850
> 
> 标签：maven, maven-3, nexus, pom.xml

我正在将 maven 工件推送到 nexus，是否有版本号小于子 POM 的父 POM 有任何影响？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:18:00.407

据我所知没有。多模块项目中的模块版本可能以任何可能的方式有所不同。但是，我建议为整个反应器（其中的所有模块）保留一个版本。

# arrays - awk 问题（从用户定义的函数返回一个数组）

> ID：12349546
> 
> 赞同：14
> 
> 时间：2012-09-10T10:13:46.540
> 
> 标签：arrays, reference, error-handling, awk, return

我有这个功能（将 WGS84 大地水准面的坐标转换为笛卡尔坐标......没关系）：

```
 function convert_geo_to_enu(coord_geo) { \
    xi=sqrt(1 - e*e*sin(coord_geo[1])*sin(coord_geo[2])); \
        \
        coord_enu[1]=(a/xi + coord_geo[3])*cos(coord_geo[1])*cos(coord_geo[2]); \
        print coord_enu[1] " hhh " ; \
        coord_enu[2]=(a/xi + coord_geo[3])*cos(coord_geo[1])*sin(coord_geo[2]); \
        coord_enu[3]=(a*(1-e*e)/xi0 + coord_geo[3])*sin(coord_geo[1]); \
    \
    return coord_enu \   # <-- here comes the problem
  } \

problem --> mawk: line 64: illegal reference to array coord_enu 
```

作为数组返回有什么问题？有什么不同的语法吗？

我可以使用：

```
 function convert_geo_to_enu(coord_geo, coord_enu) { \
       ...
       coord_enu[1]=...
       ...
  } \ 
```

甚至：

```
 function convert_geo_to_enu(coord_geo) { \
       ...
       coord_enu[1]=...
       ...
  } \ 
```

然后只是将变量`coord_enu`用作全局变量？

但是使用 return 语句看起来更好（尤其是对我来说）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-22T12:52:03.230

有点晚了，但这是我使用的解决方案：

我发送了一个我想要填充的变量作为函数的参数：

```
function myfunct(result, array_size) {
    for(i = 1; i <= array_size; i++) {
        result[i] = ##whatever you want
    }
} 
```

然后，您可以将结果变量视为函数外部的数组

希望这可以帮助寻找答案的人

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-10T10:58:07.683

将数组视为全局。AWK 不能返回数组。

# php - php imagick，如何使区域透明

> ID：12349549
> 
> 赞同：3
> 
> 时间：2012-09-10T10:14:18.563
> 
> 标签：php, imagemagick, transparency, imagick

我想在具有特定宽度、高度和顶部位置的 Imagick 对象中使区域透明。

例如，我需要一个从第 15 像素到顶部的 30 像素 x 30 像素的透明区域，但我找不到办法。

```
$canvas1 = new Imagick();

$canvas1->newImage(30,60,'black','png'); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-23T12:22:56.347

这可能是一种稍微简单的方法。我回收了@AndreKR 的设置代码以开始使用：

```
$im = new Imagick();
$im->newImage(100,100, 'red');
$im->setImageAlphaChannel(Imagick::ALPHACHANNEL_ACTIVATE); // make sure it has an alpha channel
$box=$im->getImageRegion(30,30,15,15);
$box->setImageAlphaChannel(Imagick::ALPHACHANNEL_TRANSPARENT);
$im->compositeImage($box,Imagick::COMPOSITE_REPLACE,15,15); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-23T05:34:02.323

虽然您可以像这样用透明墨水（不是*透明墨水）***填充填充**：

 *```
$im->floodFillPaintImage('#FF000000', 10, '#FFFFFF', 0, 0, false); 
```

在[这篇文章](http://www.imagemagick.org/discourse-server/viewtopic.php?p=27002#p27002)中，安东尼，显然是 ImageMagick 世界中的一些重要人物，他说你不能用透明**进行绘图。**

所以看起来你必须创建一个打孔图像，然后用它在你的实际图像中打出透明区域。为了在此处创建打孔，我在透明背景上绘制了不透明的矩形，然后反转整个图像：

```
$punch = new Imagick();
$punch->newImage(100,100, 'transparent');
$drawing = new ImagickDraw();
$drawing->setFillColor(new ImagickPixel('black'));
$drawing->rectangle(15, 15, 45, 45);
$punch->drawImage($drawing);
$punch->negateImage(true, Imagick::CHANNEL_ALPHA); 
```

[![冲床](../Images/dec0693eb4428759da40bf312562f0ce.png)](https://i.stack.imgur.com/2koQ5.png)

这是打孔前的实际图像：

```
$im = new Imagick();
$im->newImage(100,100, 'red');
$im->setImageAlphaChannel(Imagick::ALPHACHANNEL_ACTIVATE); // make sure it has
                                                           // an alpha channel 
```

[![图片](../Images/fb907c884a3d981f8742fbad23e88934.png)](https://i.stack.imgur.com/vofeU.png)

现在我们可以从我们的打孔图像中复制 Alpha 通道。由于我不知道的原因，明显的方法不起作用：

```
// Copy over the alpha channel from one image to the other

// this does NOT work, the $channel parameter seems to be useless:
// $im->compositeImage($punch, Imagick::COMPOSITE_SRC, 0, 0, Imagick::CHANNEL_ALPHA); 
```

[![不成功的结果](../Images/c51f00f0c9879938ee30786e831632b3.png)](https://i.stack.imgur.com/XHWsu.png)

但是，这两种方法都有效：

```
// Copy over the alpha channel from one image to the other

// $im->compositeImage($punch, Imagick::COMPOSITE_COPYOPACITY, 0, 0);
// $im->compositeImage($punch, Imagick::COMPOSITE_DSTIN, 0, 0); 
```

[![结果](../Images/63741593f8bd0a377cd7e0efb22dbbbb.png)](https://i.stack.imgur.com/dNaCk.png)

（浅蓝色为 Windows 照片查看器的背景，表示透明区域。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:18:02.090

尝试

```
$canvas1->setImageOpacity(0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T10:19:46.980

您可以按如下方式设置不透明度

```
$image->setImageOpacity(0.0); 
```

如果将其设置为 0.0，则您创建的图像将变为透明

有关更多信息，您可以[在 Imagick 中设置不透明度](http://php.net/manual/en/imagick.setimageopacity.php)

如果您想要它用于特定区域部分，那么您需要通过使用 GD 库函数来更改方法，方法是执行一些类似这样的操作

```
 $img = imagecreatefrompng($imgPath); // load the image
 list($width,$height) = getimagesize($imgPath); // get its size
 $c = imagecolortransparent($img,imagecolorallocate($img,255,1,254)); // create      transparent color, (255,1,254) is a color that won't likely occur in your image
 $border = 10;
 imagefilledrectangle($img, $border, $border, $width-$border, $height-$border, $c); // draw transparent box
 imagepng($img,'after.png'); // save 
```

[我可以在此处的另一个论坛](http://www.devnetwork.net/viewtopic.php?f=40&t=98527)中看到类似的要求*

# image - 如何在不使用 SQLite（SQLiteAdmin 工具）表中的查询的情况下添加图像？

> ID：12349551
> 
> 赞同：0
> 
> 时间：2012-09-10T10:14:25.150
> 
> 标签：image, sqlite, blob

如何在不使用 SQLite（SQLiteAdmin 工具）表中的查询的情况下添加图像（作为 BLOB 类型）？

# c++ - 在 OpenCV 中找不到 FREAK 检测器

> ID：12349557
> 
> 赞同：4
> 
> 时间：2012-09-10T10:14:37.393
> 
> 标签：c++, opencv, freak

我正在 OpenCV 2.4 中开发一些代码，我想测试 FREAK 检测器，但出现编译错误。我包括了 feature2d.h，我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T10:16:03.993

FREAK 包含在 OpenCV 版本 2.4.2 中，因此您不能在当前版本中使用它，因为它没有实现。下载并[安装](http://docs.opencv.org/doc/tutorials/introduction/windows_install/windows_install.html)OpenCV2.4.2。

# python - 如何使用rabbitmq路由功能知道消息是否已发布到队列

> ID：12349573
> 
> 赞同：5
> 
> 时间：2012-09-10T10:15:39.933
> 
> 标签：python, rabbitmq, pika

我一直在做一个使用 rabbitmq 进行交流的项目。最近我们发现，如果我们使用兔子路由功能，它将具有很大的可扩展性。所以基本上我们将队列绑定到几个路由键并使用带有类型的交换`direct`。

它的工作方式类似于发布/订阅。因此可以将队列绑定和取消绑定到不同的事件，以便消费者/订阅者只接收他们感兴趣的消息。

当然，生产者/发布者现在使用绑定键（事件名称）将`routing_key`其传递给 pika 实现。但是，当它为不存在的绑定发布某些内容时，消息会丢失，即当没有人为 event 绑定队列时`foo`，但一些发布者调用了`pika.basic_publish(..., routing_key='foo')`。

**所以我的问题是：**

是否可以知道消息是否实际发布在队列中？

**我试过的：**

*   检查 pika.basic_publish 的返回值。它总是返回`None`。

*   检查当我们尝试为不存在的绑定发布时是否有异常。空无一人。

*   有一个额外的队列来进行带外控制（因为所有订阅者都由同一个进程运行）。这种方法对我来说并不理想。

**附加信息**

*   由于我正在使用此路由功能，因此队列名称是由 rabbit 生成的。如果新方法必须命名队列本身，我没有任何问题。

*   如果提出了一种需要绑定到交换而不是队列的新方法，我想听听它们，但我更愿意避免它们，因为它们实际上不是 AMQP，而是由 rabbitmq 实现的扩展。

*   鼠兔版本是 0.9.5

*   rabbitmq 版本是 2.8

非常感谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T13:22:23.813

我相信您的问题的答案是 RabbitMQ 中的 Mandatory 标志：

> 如果消息无法路由到队列，该标志告诉服务器如何反应。具体来说，如果设置了强制并且在运行绑定之后，消息被放置在零队列中，那么消息将返回给发送者（使用 basic.return）。如果在相同情况下未设置强制，服务器将静默丢弃该消息。

这基本上意味着，将消息排入队列，如果无法路由，则将其返回给我。查看规范中的[basic_publish](http://pika.github.com/communicating.html)以将其打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:03:47.670

可能可以使用死信交换来存储尚未消费的消息[http://www.rabbitmq.com/dlx.html](http://www.rabbitmq.com/dlx.html)

我不确定这是否正是您正在寻找的，但可以用于解决方案。

# model-view-controller - 用于记录 MVC Web 应用程序的工具

> ID：12349579
> 
> 赞同：1
> 
> 时间：2012-09-10T10:15:57.870
> 
> 标签：model-view-controller, architecture

我正在制作一个 Web 应用程序，它比我过去制作的其他应用程序要复杂得多。我想在我走得更远之前，我应该尝试为我目前拥有的应用程序制定一个计划。

我最近参加了一门 UML 课程，但这在这里似乎并不特别合适——因为当我使用面向对象的框架时，它实际上是我正在寻找的模型、控制器、动作、视图和 URL 映射之间的关系记录。

所以我的问题是 -**是否有任何软件设计应用程序对记录 MVC 应用程序的结构/功能特别有用？**

在此基础上，我希望编写一个测试计划。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:51:10.860

文档不是用于创建“测试计划”（无论对您意味着什么）。如果你想测试你的应用程序，你应该一直在编写单元测试。

这种文档旨在减轻大规模应用程序中的混乱。在这种情况下使用 UML 是合适的，尽管没有规定必须使用所有图表。但是在您的情况下，类或组件图可能会非常有用，使用一些序列图来说明应用程序中更令人困惑的部分。

如果你有一个复杂的数据库结构，一些 ER 图可能会有所帮助。

# android - 引导接收器在 froyo 上工作，但在 ICS 上不工作

> ID：12349581
> 
> 赞同：0
> 
> 时间：2012-09-10T10:16:02.733
> 
> 标签：android, broadcastreceiver, android-4.0-ice-cream-sandwich, boot

> **可能重复：**
> [ICS 中的广播接收器](https://stackoverflow.com/questions/9892002/broadcastreceivers-in-ics)

我有一个启动接收器，它在收到启动时调用另一个应用程序，这在 froyo 上运行良好。但是当我尝试在 ICS 上运行它时它不起作用，并且从未调用过意图！这是在我的清单中注册的引导接收器。

```
 <receiver android:name=".MyBroadCastReceiver" >
        <intent-filter>
           <action android:name="android.intent.action.BOOT_COMPLETED" />
            <action android:name="android.intent.action.QUICKBOOT_POWERON" />

        </intent-filter>
    </receiver> 
```

这是我的广播接收器类

公共类 MyBroadCastReceiver 扩展 BroadcastReceiver {

```
@Override
public void onReceive(Context context, Intent intent) {
    // TODO Auto-generated method stub

     if(intent.getAction().equals(Intent.ACTION_BOOT_COMPLETED)){
            Intent i = new Intent(context, BootActivity.class);
          i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            context.startActivity(i);

    }else{

    }
}} 
```

为什么这不起作用...有没有其他方法可以使它在 ICS 上工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:21:35.077

> 从 3.1 开始，当安装应用程序时，它们处于“停止”状态，因此在用户明确启动它们之前它们将无法运行。按下强制停止将使它们返回此状态。
> 
> 因此，当应用程序首次安装时，系统会完全忽略它们，除非用户手动启动某些东西：很可能是单击启动器活动或添加应用程序小部件。
> 
> 一直依赖于在没有用户干预的情况下获得某种系统广播的开发人员将需要针对 Android 3.1 调整他们的应用程序。

# javascript - 如何在 ASP.Net 中为用户控件添加 Javascript 对象

> ID：12349584
> 
> 赞同：1
> 
> 时间：2012-09-10T10:16:03.060
> 
> 标签：javascript, javascript-objects, microsoft-ajax

我有一个用户控件，并且我有一个方法 isDirty() 添加到这个用户控件中。此用户控件用于许多地方。

如何使用 javascript 访问此方法。如何为这个特定的用户控件创建一个 javascript 对象，然后使用 find 方法访问它？

$find('__用户控件的id') ? 我试过得到 null .???

谢谢和问候，弗朗西斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:19:19.727

js对象是这样创建的：

```
var myobject = { prop1: 'hello', 
               prop2: function(){//whatever}, 
              prop3:'yay'};

myobject.prop1; //'hello'
myobject.prop2(); //that's right, it runs that function(){//whatever} in prop2 
```

您不能直接使用 JS 访问任何服务器端方法。使用 JSON 对象发出 AJAX 请求，在 ASP.NET 中对其进行解析，然后在 ASP.NET 中，根据对象中的内容调用所需的函数。

Flash 可以使用 ExternalInterface.addCallback 进行直接 JS 访问，但我不确定 ASP.NET 是否有这样的东西（我强烈建议不要使用“Flash 的黑盒 JS 访问”样式）。

如果您已经通过执行 javascript 以某种方式将 JS 对象添加到您的用户控件服务器端，您只需像这样访问它：

```
myUserControlAssociatedJSObject.myFunction(); //it runs it! 
```

# gcc - GCC -g 文件格式

> ID：12349586
> 
> 赞同：0
> 
> 时间：2012-09-10T10:16:14.807
> 
> 标签：gcc, gdb

GCC -g 使用本机文件格式（stabs、COFF、XCOFF 或 DWARF）。 [http://gcc.gnu.org/onlinedocs/gcc-3.4.4/gcc/Debugging-Options.html](http://gcc.gnu.org/onlinedocs/gcc-3.4.4/gcc/Debugging-Options.html)

Linux 上使用哪种格式？如何证明使用了哪种文件格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:20:13.453

你可以尝试类似的东西

```
readelf --debug-dump ./a.out 
```

或类似的

```
readelf --debug-dump ./a.out | grep -i dwarf 
```

# android - onBackpressed 不适用于列表视图

> ID：12349589
> 
> 赞同：0
> 
> 时间：2012-09-10T10:16:17.347
> 
> 标签：android, android-listview, android-tabactivity

我正在使用 android 版本 8 和我的模拟器 2.2 我有带有 Activity 组的 tabview 和多个子项，它们都是 listview 但一个是 Activity onbackPressed 方法不适用于我搜索的 List Activity 我找到了这段代码

```
@Override
 public boolean onKeyDown(int keyCode, KeyEvent event) {
   if (event.getKeyCode() == KeyEvent.KEYCODE_BACK && CatalogGroup.group != null) {
       CatalogGroup.group.popView();
       return true;
   }
   return super.onKeyDown(keyCode, event);
 } 
```

问题是 popView() 在 Group Activity 类型中未定义，这是我的代码

```
public class TabsGroup extends ActivityGroup {
public static TabsGroup group;
// additional Code
} 
```

这是后面的代码

```
public void back() {
    if(history.size() > 0) {
        history.remove(history.size()-1);
        if (history.size() > 0)
            setContentView(history.get(history.size()-1));
    }else {
        finish();
    }
}

   public void onBackPressed() {
   CatalogGroup.group.back();
    return;
} 
```

如何使后退按钮适用于 ListView ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:15:32.197

你应该像这样覆盖`onKeyDown`自己：

```
public boolean onKeyDown(int keyCode, KeyEvent event) {

    if (keyCode==KeyEvent.KEYCODE_BACK) {
        // Your stuff
    } else {
        return super.onKeyDown(keyCode, event);
    }
} 
```

# c# - 在 C# 文件中查找 LINQ 查询

> ID：12349591
> 
> 赞同：-9
> 
> 时间：2012-09-10T10:16:21.607
> 
> 标签：c#, linq

`LINQ`我需要在解析`C#`文件时找出查询（使用**Irony Codeparser**），因为解析器不支持`LINQ`- 因此我必须排除或修改`LINQ`出现的此类文件。

`StreamReader`在解析文件或在缓存中写入此类文件的修改副本之前，我可以使用 a 浏览文件。

有没有人对这个问题有任何建议或解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:20:04.773

一般来说，这是不可能的。您将如何识别`.Select(...)`LINQ 或具体类的方法（使用简单的解析器）？

# android - 即使模式从纵向更改为横向，如何维护数据，反之亦然？

> ID：12349592
> 
> 赞同：0
> 
> 时间：2012-09-10T10:16:24.547
> 
> 标签：android, mode, data-loss

我对我的活动有 25 条`edittexts`和其他意见。我在 和 中创建了不同的`main.xml`文件，因此将根据**切换的模式**（**纵向**或**横向）显示相应的****UI**。`layout``layout-land`

 ******但是在填充值之后`edittexts`，如果我从**纵向**更改为**横向**，以前的值就会**丢失**。因此，我的疑问是即使在**更改**为其他模式后，如何从中**获取**值`edittexts`并**恢复**它们各自的值。`edittexts`

 **当然，我知道当我们**切换**模式时，会**重新创建**活动，这会导致**数据丢失**。我什`Handling Runtime changes`至在开发人员指南中都进行了修改，但是作为一个新手，我无法清楚地理解像`onRetainNonConfigurationInstance()`在返回对象时保存数据的方法一样，但是在我的应用程序中，即使在**切换**`edittexts`之后，我也需要输入的数字在它们各自的位置上.`edittexts`

 ****即使在stackoverflow**上也提到了很多问题，例如[链接](https://stackoverflow.com/questions/5913130/dont-reload-application-when-orientation-changes "可选标题")等，但我无法找到解决问题的方法。请为此提出解决方案。

 **甚至我还有另一个问题。我有一个在第一次启动`dialog`时弹出的窗口`activity`，我不希望`popup`在**切换**模式时也出现这种情况。请为这两个提出解决方案。如果有人需要代码片段以获得更多说明，请告诉我。我将使用代码编辑我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:07:56.443

如果您的数据较少，您可以保存并使用它`onSavedInstanceState`和`onRestoreInstanceState`.. 有关详细信息，请通过此链接[保存数据](https://stackoverflow.com/questions/151777/saving-activity-state-in-android)

但是如果您有大量数据，那么我必须说您不应该允许方向更改，您可以通过在清单文件中添加以下行来限制它：

`android:configChanges="orientation|keyboardHidden"`

上面的行修复了方向，但在这种情况下，您`layout-land`将无法工作，但您可以在`onConfigurationChanged()`方法内动态处理或重新定位您的视图

```
 @Override
public void onConfigurationChanged(Configuration newConfig)
{
    super.onConfigurationChanged(newConfig);

    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) {
        align_landscape(); // align your view dynamically here for landscape
    } else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT) {
        align_portrait(); // align your view dynamically here for portrait
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:43:55.837

您可以在方向更改时存储编辑文本值，然后切换到新布局并分配保存的值。

通过在清单中指定以下条件，您可以检测方向变化。

```
android:configChanges="orientation" 
```

在您的 onConfigurationChanged() 方法中，存储各个字段的值，然后您可以使用`setRequestedOrientation(int requestedOrientation)`将更新为自定义布局的方法更改方向，然后恢复字段的值。************

# c# - 如何在 C# 中执行此正则表达式？

> ID：12349598
> 
> 赞同：0
> 
> 时间：2012-09-10T10:16:53.150
> 
> 标签：c#, regex

我一直在尝试这样做很长一段时间，但由于某种原因从来没有做对。

会有这样的文字：

*   第12325章
*   34523 公斤
*   29302 MMKSEIE
*   49504EFDF

**规则是，在1 个空格**（或根本没有空格）之后会有**5 位数字**（不多或少），后面会有一些文本，如上所示。我想使用正则表达式模式进行 MATCH 并提取**THE NUMBER 和 SPACE 和 THE TEXT**。

 ****这可能吗？非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:23:18.957

由于从您的措辞看来，您似乎需要能够在成功匹配时获得输入文本的每个组成部分，那么这里有一个将为您提供命名的 groups `number`，因此如果正则表达式匹配`space`，`text`您可以轻松获得它们：

```
(?<number>\d{5})(?<space>\s?)(?<text>\w+) 
```

在返回`Match`时，如果`Success==true`您可以这样做：

```
string number = match.Groups["number"].Value;
string text = match.Groups["text"].Value;
bool hadSpace = match.Groups["space"] != null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:20:03.947

表达式比较简单：

```
^([0-9]{5}) ?([A-Z]+)$ 
```

即 5 位数字、一个可选空格和一个或多个大写字母。两端的anchors确保整个输入匹配。

数字模式和字母模式周围的括号指定*捕获组*一和二。访问它们以获取数字和单词。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T10:24:04.027

```
string test = "12345 SOMETEXT";
string[] result = Regex.Split(test, @"(\d{5})\s*(\w+)"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T10:22:37.253

您可以使用[拆分](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.split.aspx)方法：

```
public class Program
{
    static void Main()
    {
        var values = new[] 
        { 
            "12325 NHGKF", 
            "34523 KGJ", 
            "29302 MMKSEIE", 
            "49504EFDF" 
        };
        foreach (var value in values)
        {
            var tokens = Regex.Split(value, @"(\d{5})\s*(\w+)");
            Console.WriteLine("key: {0}, value: {1}", tokens[1], tokens[2]);
        }
    }
} 
```****

# c++ - .odt 格式的库

> ID：12349604
> 
> 赞同：2
> 
> 时间：2012-09-10T10:17:12.557
> 
> 标签：c++, c, odt

是否有任何可用的 C/C++ 库可用于创建、加载和保存 .odt 格式的文件？

或者，我在哪里可以找到有关实施 .odt(/ODF) 规范的类似教程的信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:10:24.250

此站点：[OASIS OpenDocument Essentials](http://books.evc-cit.info/odbook/book.html)似乎涵盖了该问题，包括操作方法示例和快捷方式。
它做得很好，很容易理解。

> 灵活性可以被视为复杂性。如果您不需要灵活性，请创建模板 ODT 并根据需要填写内容。如前所述，存在实际处理 IO 的 XML 解析器。ODT 不是纯文本文件，因此预计会有一些复杂性/难度。– 艾恩

从链接：

> 作弊的美德
> 
> 当您开始使用 OpenDocument 文件时，您可能想要编写一个程序来构建具有本书中未解释的某些特性的文档 — 毕竟，这是一本“基本”书。只需启动 OpenOffice.org 或 KOffice，创建具有所需功能的文档，解压缩文件，然后查找实现它的 XML。为了更好地理解事情是如何工作的，请更改 XML、重新打包文档并重新加载它。一旦您了解了某个功能的工作原理，请不要犹豫，将 OpenDocument 文件中的 XML 复制并粘贴到您的程序中。换句话说，作弊。当我写这本书的时候，它对我有用，它也对你有用！

# android - 如何检测来自外部扫描仪的蓝牙输入

> ID：12349607
> 
> 赞同：4
> 
> 时间：2012-09-10T10:17:17.003
> 
> 标签：android, bluetooth

我有一个问题。

我正在尝试将扫描仪（其作用类似于外部蓝牙键盘）集成到我的 android 应用程序中。

**问题是**我无法弄清楚**如何检测键盘何时将消息发送到我的应用程序。**

扫描仪正在工作，文本显示在任何编辑文本中，但我想对其进行一些修改。

我试图搜索一个意图过滤器，以便为蓝牙设备发送消息时触发的事件启用接收器，但我找不到一个好的。

谁能给我指个方向？

谢谢，阿克德

# php - PHP escapeshellarg() 问题，使用 CodeIgniter

> ID：12349608
> 
> 赞同：0
> 
> 时间：2012-09-10T10:17:21.183
> 
> 标签：php, file-upload

> **可能重复：**
> [escapeshellarg() 出于安全原因已被禁用](https://stackoverflow.com/questions/10384336/escapeshellarg-has-been-disabled-for-security-reasons)

我用 PHP 创建了一个图像上传系统，一切正常，但我仍然收到警告：

```
A PHP Error was encountered

Severity: Warning

Message: escapeshellarg() has been disabled for security reasons

Filename: libraries/Upload.php

Line Number: 1066 
```

有谁知道如何在不联系托管服务提供商的情况下摆脱这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:19:15.740

你不能。您必须联系您的系统管理员为您启用该功能，或者使用其他东西（不涉及执行 shell 命令）来完成您想要完成的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:20:39.623

尝试替换`escapeshellarg`为`@escapeshellarg`.

因为，那么您将抑制函数调用给出的任何警告。

自从

> 一切正常

~~这样做对您的工作代码来说应该不是问题。~~

注意：`@`不推荐使用来抑制警告或错误。

# c# - 为什么双 a = 8/3 返回 2？

> ID：12349609
> 
> 赞同：0
> 
> 时间：2012-09-10T10:17:26.193
> 
> 标签：c#, .net, double

我有以下代码：

```
double a = 8/ 3;
Response.Write(a); 
```

它返回值 2。为什么？我需要至少一位十进制数字。2.6 或 2.66 之类的东西。我怎样才能得到这样的结果？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T10:18:22.560

尝试

```
double a = 8/3.0d; 
```

或者

```
double a = 8.0d/3; 
```

以获得准确的答案。

**由于在表达式中`a = 8/3`两个操作数都是`int`如此，因此结果`int`与它存储在`double`. 结果总是在较高数据类型的操作数中**

## 编辑

回答

> 8 和 3 是从变量中获得的。我可以做某种演员吗？

如果值来自变量，您可以将其中一个操作数转换为`double`：

```
int b = 8;
int c = 3;
double a = ((double) b) /c; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T10:19:04.850

因为计算是以整数类型而不是双精度进行的。要使其双重使用：

```
double a = 8d/ 3d;
Response.Write(a); 
```

或者

```
double a = 8.0/ 3.0;
Response.Write(a); 
```

您的操作数之一应通过使用`d`或指定小数点显式标记为双精度`0`

或者，如果您需要，您可以在计算之前将它们转换为双倍。您可以将一个或两个操作数转换为 double。

```
double a = ((double) 8)/((double)3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:23:58.197

因为 8 和 3 是整数，解释器将其四舍五入为 2。您可以简单地建议解释器您的数字是浮点数：

```
double a = (double)8 / 3; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T10:19:36.967

因为它对负数进行四舍五入，所以它是在框架中实现的方式。但是，如果您使用上面的示例指定精度：

```
double a = 8/3.0d; 
```

然后不再执行舍入。

或者简单来说，您将整数值分配给双精度数，这就是首先执行舍入的原因。它看到了一个整数运算。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T10:33:59.607

因为 8 和 3 都是整数。并且 int 的除法运算符包含两个 int 也返回 int。（当光标在斜杠上时 F12）。

# c# - 如何在 C# WinRT/winmd 中调整图像大小？

> ID：12349611
> 
> 赞同：15
> 
> 时间：2012-09-10T10:17:36.477
> 
> 标签：c#, windows-8, windows-runtime

我有一个简单的问题，但到目前为止我还没有找到答案：如何在 C# WinRT/WinMD 项目中调整 jpeg 图像的大小并将其保存为新的 jpeg？

我正在开发 Windows 8 Metro 应用程序，用于从某个站点下载每日图像并将其显示在 Live Tile 上。问题是图像必须小于 1024x1024 且小于 200kB，否则它不会显示在磁贴上：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465403.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465403.aspx)

如果我得到更大的图像，如何调整它以适应动态磁贴？我正在考虑简单的调整大小，如宽度/2 和高度/2，同时保持纵横比。

这里的具体要求是代码必须作为 Windows 运行时组件运行，因此 WriteableBitmapEx 库在这里不起作用 - 它仅适用于常规 WinRT 项目。甚至还有一个WriteableBitmapEx 分支作为winmd 项目，但还远远没有准备好。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-10T12:42:26.070

[从此处](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/490b9c01-db4b-434f-8aff-d5c495e67e55)获取的如何缩放和裁剪的示例：

```
async private void BitmapTransformTest()
{
    // hard coded image location
    string filePath = "C:\\Users\\Public\\Pictures\\Sample Pictures\\fantasy-dragons-wallpaper.jpg";

    StorageFile file = await StorageFile.GetFileFromPathAsync(filePath);
    if (file == null)
        return;

    // create a stream from the file and decode the image
    var fileStream = await file.OpenAsync(Windows.Storage.FileAccessMode.Read);
    BitmapDecoder decoder = await BitmapDecoder.CreateAsync(fileStream);

    // create a new stream and encoder for the new image
    InMemoryRandomAccessStream ras = new InMemoryRandomAccessStream();
    BitmapEncoder enc = await BitmapEncoder.CreateForTranscodingAsync(ras, decoder);

    // convert the entire bitmap to a 100px by 100px bitmap
    enc.BitmapTransform.ScaledHeight = 100;
    enc.BitmapTransform.ScaledWidth = 100;

    BitmapBounds bounds = new BitmapBounds();
    bounds.Height = 50;
    bounds.Width = 50;
    bounds.X = 50;
    bounds.Y = 50;
    enc.BitmapTransform.Bounds = bounds;

    // write out to the stream
    try
    {
        await enc.FlushAsync();
    }
    catch (Exception ex)
    {
        string s = ex.ToString();
    }

    // render the stream to the screen
    BitmapImage bImg = new BitmapImage();
    bImg.SetSource(ras);
    img.Source = bImg; // image element in xaml

} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-08T08:30:46.110

更简单的代码来重新调整图像大小，而不是裁剪。下面的代码将图像重新调整为 80x80

```
using (var sourceStream = await sourceFile.OpenAsync(FileAccessMode.Read))
{
    BitmapDecoder decoder = await BitmapDecoder.CreateAsync(sourceStream);
    BitmapTransform transform = new BitmapTransform() { ScaledHeight = 80, ScaledWidth = 80 };
    PixelDataProvider pixelData = await decoder.GetPixelDataAsync(
        BitmapPixelFormat.Rgba8,
        BitmapAlphaMode.Straight,
        transform,
        ExifOrientationMode.RespectExifOrientation,
        ColorManagementMode.DoNotColorManage);

    using (var destinationStream = await destinationFile.OpenAsync(FileAccessMode.ReadWrite))
    {
        BitmapEncoder encoder = await BitmapEncoder.CreateAsync(BitmapEncoder.PngEncoderId, destinationStream);
        encoder.SetPixelData(BitmapPixelFormat.Rgba8, BitmapAlphaMode.Premultiplied, 80, 80, 96, 96, pixelData.DetachPixelData());                        
        await encoder.FlushAsync();
    }
} 
```

[资源](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/1dda3a15-d299-40e0-b668-ec690a683f6e)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-10T20:10:10.883

所以这是我经过大量谷歌搜索和试错编码后得到的解决方案：

这里的目标是找出如何在 WinRT 中操作图像，特别是在[后台任务](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=27411)中。后台任务比普通的 WinRT 项目更受限制，因为它们必须是[Windows 运行时组件](http://msdn.microsoft.com/en-us/library/windows/apps/hh441572.aspx)类型。NuGet 上针对 WinRT 的 99% 可用库仅针对默认 WinRT 项目，因此它们不能在 Windows 运行时组件项目中使用。

起初我尝试使用[著名的 WriteableBitmapEx 库](http://writeablebitmapex.codeplex.com/)——将必要的代码移植到我的 winmd 项目中。WBE 项目甚至还有[针对 winmd 的分支](http://writeablebitmapex.codeplex.com/SourceControl/changeset/view/94114)，但尚未完成。我在将 [ReadOnlyArray]、[WriteOnlyArray] 属性添加到数组类型的方法参数以及将项目命名空间更改为不以“Windows”开头的东西之后编译它 - winmd 项目限制。

即使我能够在我的后台任务项目中使用此库，它也无法正常工作，因为正如我发现的那样，WriteableBitmap 必须在 UI 线程中实例化，而据我在后台任务中所知，这是不可能的。

与此同时，我还发现了[这篇关于 WinRT 中的图像处理的 MSDN 文章](http://msdn.microsoft.com/fr-fr/library/windows/apps/windows.graphics.imaging.aspx)。大多数示例仅在 JavaScript 部分中，因此我必须先将其转换为 C#。我还在[StackOverflow 上找到了这篇关于 WinRT 中的图像处理的有用文章](https://stackoverflow.com/questions/10013799/winrt-image-handling)。

```
internal static async Task LoadTileImageInternalAsync(string imagePath)
{
    string tileName = imagePath.GetHashedTileName();
    StorageFile origFile = await ApplicationData.Current.LocalFolder.GetFileAsync(imagePath);

    // open file for the new tile image file
    StorageFile tileFile = await ApplicationData.Current.LocalFolder.CreateFileAsync(tileName, CreationCollisionOption.ReplaceExisting);
    using (IRandomAccessStream tileStream = await tileFile.OpenAsync(FileAccessMode.ReadWrite))
    {
        // get width and height from the original image
        IRandomAccessStreamWithContentType stream = await origFile.OpenReadAsync();
        ImageProperties properties = await origFile.Properties.GetImagePropertiesAsync();
        uint width = properties.Width;
        uint height = properties.Height;

        // get proper decoder for the input file - jpg/png/gif
        BitmapDecoder decoder = await GetProperDecoder(stream, imagePath);
        if (decoder == null) return; // should not happen
        // get byte array of actual decoded image
        PixelDataProvider data = await decoder.GetPixelDataAsync();
        byte[] bytes = data.DetachPixelData();

        // create encoder for saving the tile image
        BitmapPropertySet propertySet = new BitmapPropertySet();
        // create class representing target jpeg quality - a bit obscure, but it works
        BitmapTypedValue qualityValue = new BitmapTypedValue(TargetJpegQuality, PropertyType.Single);
        propertySet.Add("ImageQuality", qualityValue);
        // create the target jpeg decoder
        BitmapEncoder be = await BitmapEncoder.CreateAsync(BitmapEncoder.JpegEncoderId, tileStream, propertySet);
        be.SetPixelData(BitmapPixelFormat.Rgba8, BitmapAlphaMode.Straight, width, height, 96.0, 96.0, bytes);

        // crop the image, if it's too big
        if (width > MaxImageWidth || height > MaxImageHeight)
        {
            BitmapBounds bounds = new BitmapBounds();
            if (width > MaxImageWidth)
            {
                bounds.Width = MaxImageWidth;
                bounds.X = (width - MaxImageWidth) / 2;
            }
            else bounds.Width = width;
            if (height > MaxImageHeight)
            {
                bounds.Height = MaxImageHeight;
                bounds.Y = (height - MaxImageHeight) / 2;
            }
            else bounds.Height = height;
            be.BitmapTransform.Bounds = bounds;
        }

        // save the target jpg to the file
        await be.FlushAsync();
    }
}

private static async Task<BitmapDecoder> GetProperDecoder(IRandomAccessStreamWithContentType stream, string imagePath)
{
    string ext = Path.GetExtension(imagePath);
    switch (ext)
    {
        case ".jpg":
        case ".jpeg":
            return await BitmapDecoder.CreateAsync(BitmapDecoder.JpegDecoderId, stream);
        case ".png":
            return await BitmapDecoder.CreateAsync(BitmapDecoder.PngDecoderId, stream);
        case ".gif":
            return await BitmapDecoder.CreateAsync(BitmapDecoder.GifDecoderId, stream);
    }
    return null;
} 
```

在此示例中，我们打开一个文件，将其解码为字节数组，然后将其编码回具有不同大小/格式/质量的新文件。

结果是即使在 Windows 运行时组件类且没有 WriteableBitmapEx 库的情况下，图像操作也能完全正常工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-09-29T09:33:07.077

这是更短的版本，没有访问像素数据的开销。

```
using (var sourceFileStream = await sourceFile.OpenAsync(Windows.Storage.FileAccessMode.Read))
using (var destFileStream = await destinationFile.OpenAsync(FileAccessMode.ReadWrite))
{
    BitmapDecoder decoder = await BitmapDecoder.CreateAsync(sourceFileStream);
    BitmapEncoder enc = await BitmapEncoder.CreateForTranscodingAsync(destFileStream, decoder);
    enc.BitmapTransform.ScaledWidth = newWidth;
    enc.BitmapTransform.ScaledHeight = newHeight;
    await enc.FlushAsync();
    await destFileStream.FlushAsync();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-04T06:00:10.613

我刚刚花了最后一个半小时试图弄清楚这个问题，我有一个 JPG 字节数组并尝试了给出的答案......我无法让它工作，所以我提出了一个新的答案......希望这对其他人有所帮助...我正在将 JPG 转换为 250/250 像素

```
private async Task<BitmapImage> ByteArrayToBitmapImage(byte[] byteArray)
    {
        BitmapImage image = new BitmapImage();
        using (InMemoryRandomAccessStream stream = new InMemoryRandomAccessStream())
        {
            using (DataWriter writer = new DataWriter(stream.GetOutputStreamAt(0)))
            {
                writer.WriteBytes((byte[])byteArray);
                writer.StoreAsync().GetResults();
            }
            image.SetSource(stream);
        }
        image.DecodePixelHeight = 250;
        image.DecodePixelWidth = 250;

        return image;            
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-02-01T10:09:54.330

如果您想要高质量的图像 **，请在 BitmapTransform 添加 InterpolationMode = BitmapInterpolationMode.Fant ，** 这是示例

` 公共静态异步任务 ResizeImage(Windows.Storage.StorageFile imgeTOBytes, int maxWidth, int maxHeight) {

```
 using (var sourceStream = await imgeTOBytes.OpenAsync(FileAccessMode.Read))
        {
            BitmapDecoder decoder = await BitmapDecoder.CreateAsync(sourceStream);

            double widthRatio = (double)maxWidth / decoder.OrientedPixelWidth;
            double heightRatio = (double)maxHeight / decoder.OrientedPixelHeight;

            double scaleRatio = Math.Min(widthRatio, heightRatio);
            uint aspectHeight = (uint)Math.Floor((double)decoder.OrientedPixelHeight * scaleRatio);
            uint aspectWidth = (uint)Math.Floor((double)decoder.OrientedPixelWidth * scaleRatio);

            BitmapTransform transform = new BitmapTransform() { InterpolationMode = BitmapInterpolationMode.Fant, ScaledHeight = aspectHeight, ScaledWidth = aspectWidth };
            PixelDataProvider pixelData = await decoder.GetPixelDataAsync(
                BitmapPixelFormat.Rgba8,
                BitmapAlphaMode.Premultiplied,
                transform,
                ExifOrientationMode.RespectExifOrientation,
                ColorManagementMode.DoNotColorManage);

            using (var destinationStream = await imgeTOBytes.OpenAsync(FileAccessMode.ReadWrite))
            {
                BitmapEncoder encoder = await BitmapEncoder.CreateAsync(BitmapEncoder.PngEncoderId, destinationStream);
                encoder.SetPixelData(BitmapPixelFormat.Rgba8, BitmapAlphaMode.Straight, aspectWidth, aspectHeight, 96, 96, pixelData.DetachPixelData());
                await encoder.FlushAsync();
            }
        }` 
```

# c# - 在 MonoTouch 中实现委托回调方法

> ID：12349612
> 
> 赞同：1
> 
> 时间：2012-09-10T10:17:37.707
> 
> 标签：c#, delegates, xamarin.ios

> **可能重复：**
> [在 MonoTouch 中缩放 UIScrollView](https://stackoverflow.com/questions/5011243/zooming-a-uiscrollview-in-monotouch)

我需要在我的应用程序中实现这个objective-c委托回调：

```
-(UIView *) viewForZoomingInScrollView:(UIScrollView *)inScroll {
  return imageView;
} 
```

但是我使用 MonoTouch 来开发我的应用程序，如何在 MonoTouch 中实现委托？（我知道关于“在 MonoTouch 中实现代表”我可能没有使用正确的术语，请告知）。

这是我需要委托回调的代码（我需要滚动视图中的图像视图是可缩放的）：

```
public override void ViewDidLoad ()
    {
        base.ViewDidLoad ();

        Loader loader = new Loader("/Users/jacknutkins/Documents/ARCSDev");
        loader.LoadChart("2");
        CGBitmapContext context = loader.GetHiResImage(loader.PaletteFile.RGBPaletteDay);
        UIImage image = UIImage.FromImage(context.ToImage());
        this.View.BackgroundColor = UIColor.Red;
        RectangleF rect = new RectangleF(0.0f, 0.0f, image.Size.Width, image.Size.Height);
        //RectangleF rect = new RectangleF(scrollView.Frame.Location, scrollView.Frame.Size);
        UIImageView imageView = new UIImageView(rect);
        imageView.Image = image;
        scrollView.ContentSize = image.Size;
        scrollView.AddSubview(imageView);
        scrollView.ClipsToBounds = true;
        scrollView.SetZoomScale(0.5f, true);
        Console.WriteLine("View Did Load Done.");
        // Perform any additional setup after loading the view, typically from a nib.
    } 
```

泰辛

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T12:21:01.860

您只需向 ViewForZoomingInScrollView 事件添加一个事件处理程序：

```
scrollView.ViewForZoomingInScrollView += (UIScrollView sv) => 
{
    return null;
}; 
```

# hadoop - 从逗号分隔的绝对文件路径列表中加载数据

> ID：12349614
> 
> 赞同：2
> 
> 时间：2012-09-10T10:17:42.700
> 
> 标签：hadoop, hbase, hive, partitioning, oozie

参考以下 hive 命令：

`LOAD DATA [LOCAL] INPATH 'filepath' [OVERWRITE] INTO TABLE tablename [PARTITION (partcol1=val1, partcol2=val2 ...)]`

我可以给出一个逗号分隔的绝对文件路径列表吗？
`LOAD DATA INPATH 'hdfs://foo/bar1,hdfs://foo/bar2' INTO TABLE foo1`

我正在寻找的实际用例：

使用时

```
<datasets>
      <dataset name="input1">
         <uri-template>hdfs://foo/bar/a</uri-template>
      </dataset>
</datasets>
<input-events>
      <data-in name="coordInput1" dataset="input1">
          <start-instance>${coord:current(-23)}</start-instance>
          <end-instance>${coord:current(0)}</end-instance>
      </data-in>
</input-events>
<action>
  <workflow>
         ...
     <configuration>
       <property>
          <name>input_files</name>
          <value>${coord:dataIn('coordInput1')}</value>
       </property>
     </configuration>
  </workflow>
 </action> 
```

在 co-ordinator.xml 中，假设有一组合格的 24 个 hdfs 位置作为我的输入。如果我的配置单元查询是将数据从所有这些位置加载到表中，我想像这样使用它： CREATE TABLE table1( col1 STRING )LOCATION (${input_files});

但是，这在蜂巢中无法正常工作。假设： input_files 解析为`hdfs://foo/bar/1,hdfs://foo/bar/2,hdfs://foo/bar/3`这不是蜂巢中的有效位置。

我理解实现这一点的唯一方法是运行一个 java 映射器，它将`input_files`作为输入并输出一个运行的动态配置单元脚本

```
`LOAD DATA INPATH 'hdfs://foo/bar/1' INTO TABLE foo1`
`LOAD DATA INPATH 'hdfs://foo/bar/2' INTO TABLE foo1` 
```

分别地。

所以，最后，我的问题是，当我能够解决我感兴趣的整个数据集时，我可以将其用作`${coord:dataIn('coordInput1')}`，我不能利用它来配置蜂巢，避免单独的个人`LOAD DATA..`或`ALTER TABLE ADD PARTITIONS..`陈述吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-24T11:25:06.527

使用 java 操作节点来执行此逻辑。您可以使用逗号拆分 input_files，并使用 hive jdbc 连接在循环中为所有输入位置执行 hive 命令。

# iphone - viewDidLoad 中的异常 animateWithDuration 行为

> ID：12349617
> 
> 赞同：1
> 
> 时间：2012-09-10T10:17:48.403
> 
> 标签：iphone, objective-c, ios, ipad, animation

在`UIImageView`. 下面方法中的代码使图像看起来像是左右摇摆：

```
-(void) shakeAnimation
{
    float degrees = 30; //the value in degrees
    imgShake.autoresizingMask = UIViewAutoresizingNone;
    [UIView animateWithDuration:0.20f delay:0 options:(UIViewAnimationOptionCurveLinear | UIViewAnimationOptionAllowUserInteraction | UIViewAnimationOptionAutoreverse | UIViewAnimationOptionRepeat) animations:^{
        imgShake.transform = CGAffineTransformMakeRotation(degrees*M_PI/180);
    } completion:^(BOOL finished) {
        imgShake.transform = CGAffineTransformMakeRotation(1*M_PI/180);
        NSLog(@"Shake finished");
    }];
} 
```

问题出在我调用该方法的位置。如果我在`viewDidAppear`动画中调用该方法似乎可以正常工作......但由于其他原因我需要调用它`viewDidLoad`。当我从`viewDidLoad`动画函数调用该方法但不是以`animateWithDuration`. 它可能要慢得多`0.70f`。这里有什么我可能会丢失的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T10:20:15.453

你永远不需要调用它`viewDidLoad`。这完全是错误的，它不会起作用。将代码移入`viewDidAppear`. 如果您有理由将其放入`viewDidLoad`，请解决原因！

编辑：您永远不知道何时`viewDidLoad`调用 - 它甚至可以为一个控制器调用多次。通常动画慢的问题是由两个动画之间的碰撞引起的。例如，如果您的控制器通过 a 动画显示到屏幕上`UINavigationController`，您的动画将与“推”动画发生冲突，并且它们会变慢。这就是您应该使用的`viewDidAppear`原因，因为当调用此方法时，您知道控制器已显示并且“出现”动画已经结束。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:14:29.253

使用一些延迟调用该方法。

`[self performSelector:@selector(shakeAnimation) withObject: afterDelay:2.0]`

# android - Android：Spinner 项目的圆角

> ID：12349618
> 
> 赞同：4
> 
> 时间：2012-09-10T10:17:51.607
> 
> 标签：android, android-layout, rounded-corners, android-spinner

我创建了一个像这样的Android“Spinner”元素：

```
<Spinner
    android:id="@+id/choice"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_span="2"
    android:background="@drawable/cell_shape"
    android:gravity="center"
    android:padding="3dp"
    android:text="Choice"
    android:textColor="@android:color/holo_orange_dark"  /> 
```

cell_shape.xml 如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="#99CC3300"/>
    <corners android:radius="10px"/>
    <padding android:left="0dp" android:top="0dp" android:right="0dp" android:bottom="0dp" /> 
</shape> 
```

我创建了一个“custom_spinner.xml”文件来显示带有圆角的“Spinner-Elements”：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/custom_spinner"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/cell_shape"
    android:textColor="#988767" >
</TextView> 
```

要显示“Spinner-Element”，我使用以下代码：

```
Spinner spinner = (Spinner) table.findViewById(R.id.choice);
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
        R.array.planets_array, R.layout.custom_spinner);
adapter.setDropDownViewResource(R.layout.custom_spinner);
spinner.setAdapter(adapter); 
```

现在的问题是微调器的元素项也有方角。似乎只有“TextView”有圆角，但微调器元素本身没有。

这里有什么问题？我只是使用了错误的元素类型吗？

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:55:04.093

```
Spinner spinner = (Spinner) table.findViewById(R.id.choice);
spinner.setAdapter(new MyCustomSpinnerAdapter(SearchScreen.this, R.layout.custom_dropDown_spinner, List)); 
```

布局：custom_dropDown_spinner

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"

    android:gravity="center"
    android:id="@+id/title" >

    <TextView
        android:id="@+id/custom_spinner"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/cell_shape"
        android:textColor="#988767" />

</LinearLayout> 
```

Java代码：-

```
private class MyCustomSpinnerAdapter extends ArrayAdapter<ArrayList> {
        private ArrayList<String> objectsList = new ArrayList<String>();

        public MyCustomSpinnerAdapter(Context context, int textViewResourceId,
                ArrayList objects) {
            super(context, textViewResourceId, objects);
            this.objectsList = objects;
            // System.out.println("mak" + objectsList.size());
        }

        @Override
        public View getDropDownView(int position, View convertView,
                ViewGroup parent) {
              //view show after click spinner
            return getCustomView(position, convertView, parent);
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) {
            return getCustomView1(position, convertView, parent);
        }

        public View getCustomView(int position, View convertView,
                ViewGroup parent) {
            LayoutInflater inflater = getLayoutInflater();
            View rowView = inflater.inflate(R.layout.custom_dropDown_spinner, parent,
                    false);
            LinearLayout rowTitle = (LinearLayout) rowView
                    .findViewById(R.id.title);
                          rowTitle.setBackgroundResource(R.drawable.cell_shape);

            TextView textView = (TextView) rowView.findViewById(R.id.custom_spinner);

            textView.setText(objectsList.get(position).toString().trim());
            return rowView;
        }

        public View getCustomView1(int position, View convertView,
                ViewGroup parent) {
            LayoutInflater inflater = getLayoutInflater();
            View rowView = inflater.inflate(R.layout.custom_dropDown_spinner, parent,
                    false);
            LinearLayout rowTitle = (LinearLayout) rowView
                    .findViewById(R.id.title);

            TextView textView = (TextView) rowView.findViewById(R.id.custom_spinner);
            textView.setText(objectsList.get(position).toString().trim());
            textView.setTypeface(typeFace);
            // System.out.println("position " + position);
            return rowView;
        }
    } 
```

# r - ggplot2中的订购问题

> ID：12349622
> 
> 赞同：0
> 
> 时间：2012-09-10T10:18:02.253
> 
> 标签：r, ggplot2

用于绘图的数据如下：

```
mdfr3 <- read.table(textConnection("
name  stadio    variable    value   rating
541B    2   start_date  22/02/2011  5
541B    4   start_date  24/05/2011  5
541B    5   start_date  01/06/2011  5
541B    7   start_date  20/09/2011  5
579B    2   start_date  07/06/2011  5
579B    4   start_date  08/02/2012  5
579B    5   start_date  09/02/2012  5
579B    7   start_date  24/04/2012  5
700B    2   start_date  29/02/2012  5
700B    4   start_date  29/02/2012  5
700B    5   start_date  29/02/2012  5
700B    7   start_date  08/05/2012  5
719B    2   start_date  29/06/2012  5
719B    4   start_date  10/07/2012  5
719B    5   start_date  19/07/2012  5
719B    7   start_date  16/10/2012  5
737B    2   start_date  22/06/2012  5
737B    4   start_date  25/07/2012  5
737B    5   start_date  01/08/2012  5
737B    7   start_date  23/10/2012  5
635B    2   start_date  03/05/2012  5
635B    4   start_date  29/06/2012  5
635B    5   start_date  05/07/2012  5
635B    7   start_date  11/09/2012  5
558B    2   start_date  30/05/2011  5
558B    4   start_date  17/10/2011  5
558B    5   start_date  27/01/2012  5
558B    7   start_date  06/04/2012  5
734B    2   start_date  16/03/2012  5
734B    4   start_date  16/03/2012  5
734B    5   start_date  16/03/2012  5
734B    7   start_date  25/04/2012  5
727B    2   start_date  23/12/2011  5
727B    4   start_date  03/02/2012  5
727B    5   start_date  16/02/2012  5
727B    7   start_date  18/05/2012  5
725B    2   start_date  28/12/2011  5
725B    4   start_date  23/02/2012  5
725B    5   start_date  02/03/2012  5
725B    7   start_date  31/05/2012  5
733B    2   start_date  30/12/2011  5
733B    4   start_date  23/02/2012  5
733B    5   start_date  02/03/2012  5
733B    7   start_date  07/06/2012  5
541B    2   end_date    24/05/2011  5
541B    4   end_date    01/06/2011  5
541B    5   end_date    20/09/2011  5
541B    7   end_date    28/09/2012  5
579B    2   end_date    08/02/2012  5
579B    4   end_date    09/02/2012  5
579B    5   end_date    24/04/2012  5
579B    7   end_date    29/10/2012  5
700B    2   end_date    29/02/2012  5
700B    4   end_date    29/02/2012  5
700B    5   end_date    08/05/2012  5
700B    7   end_date    12/11/2012  5
719B    2   end_date    10/07/2012  5
719B    4   end_date    19/07/2012  5
719B    5   end_date    16/10/2012  5
719B    7   end_date    28/02/2013  5
737B    2   end_date    25/07/2012  5
737B    4   end_date    01/08/2012  5
737B    5   end_date    23/10/2012  5
737B    7   end_date    28/02/2013  5
635B    2   end_date    29/06/2012  5
635B    4   end_date    05/07/2012  5
635B    5   end_date    11/09/2012  5
635B    7   end_date    04/02/2013  5
558B    2   end_date    17/10/2011  5
558B    4   end_date    27/01/2012  5
558B    5   end_date    06/04/2012  5
558B    7   end_date    09/09/2012  5
734B    2   end_date    16/03/2012  5
734B    4   end_date    16/03/2012  5
734B    5   end_date    25/04/2012  5
734B    7   end_date    04/07/2012  5
727B    2   end_date    03/02/2012  5
727B    4   end_date    16/02/2012  5
727B    5   end_date    18/05/2012  5
727B    7   end_date    19/11/2012  5
725B    2   end_date    23/02/2012  5
725B    4   end_date    02/03/2012  5
725B    5   end_date    31/05/2012  5
725B    7   end_date    30/11/2012  5
733B    2   end_date    23/02/2012  5
733B    4   end_date    02/03/2012  5
733B    5   end_date    07/06/2012  5
733B    7   end_date    30/11/2012  5
")->con,header=T);close(con)

mdfr4 <- read.table(textConnection("
name    stadio  variable    value   rating
541A    1   start_date  22/02/2011  3
541A    3   start_date  24/05/2011  3
541A    6   start_date  01/06/2011  3
541A    8   start_date  20/09/2011  3
579A    1   start_date  07/06/2011  3
579A    3   start_date  08/02/2012  3
579A    6   start_date  09/02/2012  3
579A    8   start_date  08/05/2012  3
700A    1   start_date  22/03/2012  3
700A    3   start_date  22/03/2012  3
700A    6   start_date  22/03/2012  3
700A    8   start_date  12/06/2012  3
719A    1   start_date  10/07/2012  3
719A    3   start_date  17/07/2012  3
719A    6   start_date  26/07/2012  3
719A    8   start_date  09/10/2012  3
737A    1   start_date  01/07/2012  3
737A    3   start_date  06/07/2012  3
737A    6   start_date  26/07/2012  3
737A    8   start_date  16/10/2012  3
635A    1   start_date  03/05/2012  3
635A    3   start_date  31/07/2012  3
635A    6   start_date  31/07/2012  3
635A    8   start_date  23/10/2012  3
558A    1   start_date  30/05/2011  3
558A    3   start_date  17/10/2011  3
558A    6   start_date  27/01/2012  3
558A    8   start_date  06/04/2012  3
734A    1   start_date  16/03/2012  3
734A    3   start_date  16/03/2012  3
734A    6   start_date  16/03/2012  3
734A    8   start_date  25/04/2012  3
727A    1   start_date  23/12/2011  3
727A    3   start_date  03/02/2012  3
727A    6   start_date  16/02/2012  3
727A    8   start_date  18/05/2012  3
725A    1   start_date  28/12/2011  3
725A    3   start_date  23/02/2012  3
725A    6   start_date  02/03/2012  3
725A    8   start_date  31/05/2012  3
733A    1   start_date  30/12/2011  3
733A    3   start_date  23/02/2012  3
733A    6   start_date  02/03/2012  3
733A    8   start_date  07/06/2012  3
541A    1   end_date    24/05/2011  3
541A    3   end_date    01/06/2011  3
541A    6   end_date    20/09/2011  3
541A    8   end_date    17/01/2013  3
579A    1   end_date    08/02/2012  3
579A    3   end_date    09/02/2012  3
579A    6   end_date    08/05/2012  3
579A    8   end_date    19/12/2012  3
700A    1   end_date    22/03/2012  3
700A    3   end_date    22/03/2012  3
700A    6   end_date    12/06/2012  3
700A    8   end_date    18/12/2012  3
719A    1   end_date    17/07/2012  3
719A    3   end_date    26/07/2012  3
719A    6   end_date    09/10/2012  3
719A    8   end_date    21/12/2012  3
737A    1   end_date    06/07/2012  3
737A    3   end_date    26/07/2012  3
737A    6   end_date    16/10/2012  3
737A    8   end_date    28/12/2012  3
635A    1   end_date    31/07/2012  3
635A    3   end_date    31/07/2012  3
635A    6   end_date    23/10/2012  3
635A    8   end_date    22/03/2013  3
558A    1   end_date    17/10/2011  3
558A    3   end_date    27/01/2012  3
558A    6   end_date    06/04/2012  3
558A    8   end_date    10/01/2013  3
734A    1   end_date    16/03/2012  3
734A    3   end_date    16/03/2012  3
734A    6   end_date    25/04/2012  3
734A    8   end_date    20/09/2012  3
727A    1   end_date    03/02/2012  3
727A    3   end_date    16/02/2012  3
727A    6   end_date    18/05/2012  3
727A    8   end_date    19/11/2012  3
725A    1   end_date    23/02/2012  3
725A    3   end_date    02/03/2012  3
725A    6   end_date    31/05/2012  3
725A    8   end_date    30/11/2012  3
733A    1   end_date    23/02/2012  3
733A    3   end_date    02/03/2012  3
733A    6   end_date    07/06/2012  3
733A    8   end_date    30/11/2012  3
")->con,header=T);close(con)

mdfr3$name <- factor(mdfr3$name,levels(factor(mdfr3$name))[c(1,3,5,6,11,4,2,10,8,7,9)])
mdfr3$rating <- factor(mdfr3$rating)
mdfr4$name <- factor(mdfr4$name,levels(factor(mdfr4$name))[c(1,3,5,6,11,4,2,10,8,7,9)])
mdfr4$rating <- factor(mdfr4$rating) 
```

该`p`图显示了 y 轴上的值，它们完全按照我想要的方式排序。

```
p <- ggplot(mdfr3, aes(as.Date(value, "%d/%m/%Y"), name, colour = factor(stadio))) +
  geom_line(size = 5) +
  scale_size_manual(breaks = c("3","5"),  values = c(3,5), guide = "none") +
  labs(colour="Legend:", x = "", y = "") +
  scale_colour_brewer(palette="BrBG",breaks = c("2", "4", "5","7"),
                      labels = c("Level 1", "Level 2", "Level 3","Level 4")) 
```

但是当我给出以下命令时，顺序会发生变化。

```
 p + geom_line(data=mdfr4,aes(size = rating, colour = factor(stadio))) 
```

为什么最后一行改变了 y 轴上标签的顺序？我怎样才能防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:09:49.877

我怀疑 ggplot 会在`geom_line`通话之间放弃您未使用的因素 - 然后会填满您的订单。

我认为一个简单的解决方法是：

```
mdfr = rbind(mdfr3, mdfr4)
p <- ggplot(mdfr, aes(as.Date(value, "%d/%m/%Y"), name, colour = factor(stadio))) + ... 
```

这意味着您不需要最终结果`geom_line`，并且您的订单被保留。

# c# - TCP客户端服务器问题

> ID：12349625
> 
> 赞同：0
> 
> 时间：2012-09-10T10:18:10.627
> 
> 标签：c#, tcpclient, tcpserver

> **可能重复：**
> [TCP 客户端问题](https://stackoverflow.com/questions/12352125/tcp-client-side-issue)

我在使用 c# TCP 客户端和服务器应用程序时遇到了很大的麻烦。一切正常...但是在某些情况下，当 TCP 服务器同时向 TCP 客户端发送响应时，客户端可以认为服务器发送的两条消息实际上都是一条消息。我不知道为什么会发生这种情况......如果有人知道请帮助我。我的 TCP 客户端和服务器是用 c# 编写的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:25:52.383

这是 TCP 的正常行为。它向您保证顺序（如果服务器发送 A，然后 B，客户端将永远不会收到 B，然后 A），但它对您的“消息”一无所知。

要在客户端将数据分解为消息，您需要一些基于 TCP 的应用程序协议。例如，HTTP 使用 CRLFCRLF 来确定 HTTP 消息的结束。
您可以使用现有的或自己制作，这取决于您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:26:23.513

不能保证`Write`TCP 连接一端的调用与另一端的调用之间存在 1-1 对应关系`Read`。每次调用到`Read`

您可以执行任何适当的工作以将这些数据块重新转换为消息 - 或者如果您想要其他东西来完成这项艰苦的工作，则可以切换到更高级别的技术（例如 WCF）。

# spring - intellij 没有使用 spring 获取继承的类注释

> ID：12349626
> 
> 赞同：1
> 
> 时间：2012-09-10T10:18:17.033
> 
> 标签：spring, annotations, intellij-idea

我有 BaseUnitTest，它看起来像这样

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"/applicationContext-test.xml"})
@Transactional
public abstract class BaseInitUser { 
```

我的实际测试类对此进行了扩展，一切正常。除了 intellij 突出显示 bean 注入错误，即使它确实有效： ![在此处输入图像描述](../Images/52f793a4794a418d3ea27f18a17dad79.png)

但是，当我添加指定上下文配置的注释以子类化时，错误消失了：

```
@ContextConfiguration(locations = {"/applicationContext-test.xml"})
public class RegistrationControllerTest extends BaseInitUser { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:55:01.560

看起来像一个[已知的错误](http://youtrack.jetbrains.com/issue/IDEA-84470)。在 YouTrack 中加注星标/投票以接收进度通知。

# spring - LDAP 身份验证

> ID：12349628
> 
> 赞同：2
> 
> 时间：2012-09-10T10:18:18.883
> 
> 标签：spring, ldap

我需要针对 ADS 对用户进行身份验证。在此之前，我需要从 ADS 获取用户和用户详细信息。我正在使用弹簧和 LDAP。谁能建议我这样做的好方法？一个例子会很有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:23:41.767

我们需要所有必要的库。您可以使用此链接下载所有 jar 文件。`http://hotfile.com/dl/9807349/836e03e/final_jar_col.rar.html`这包含了我们需要的所有文件，包括公共库、log4j 等。

创建以下类。所有的类都可以放在一个包目录中，您可以按照自己的方式将其添加到包中。

定义两个函数。一个是获取所有联系人姓名，另一个是获取联系人详细信息。

```
import java.util.List;

public interface ContactDAO {

    public List getAllContactNames();

    public List getContactDetails(String commonName);

} 
```

LDAPContactDAO 实现定义的接口。

```
import java.util.List;

import javax.naming.NamingException;
import javax.naming.directory.Attributes;
import javax.naming.directory.BasicAttribute;
import javax.naming.directory.BasicAttributes;

import org.springframework.ldap.AttributesMapper;
import org.springframework.ldap.LdapTemplate;
import org.springframework.ldap.support.DistinguishedName;
import org.springframework.ldap.support.filter.AndFilter;
import org.springframework.ldap.support.filter.EqualsFilter;

public class LDAPContactDAO implements ContactDAO{
    private LdapTemplate ldapTemplate;

    public void setLdapTemplate(LdapTemplate ldapTemplate) {
        this.ldapTemplate = ldapTemplate;
    }

    public List getAllContactNames() {
        return ldapTemplate.search("", "(objectClass=person)",
                new AttributesMapper() {
                    public Object mapFromAttributes(Attributes attrs)
                            throws NamingException {
                        return attrs.get("mail").get();
                    }
                });
    }

    public List getContactDetails(String objectclass){
        AndFilter andFilter = new AndFilter();
        andFilter.and(new EqualsFilter("objectClass",objectclass));
        System.out.println("LDAP Query " + andFilter.encode());
        return ldapTemplate.search("", andFilter.encode(),new ContactAttributeMapper());

    }
} 
```

springldap.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN 2.0//EN" "http://www.springframework.org/dtd/spring-beans-2.0.dtd">
<beans>
    <bean id="contextSource"
        class="org.springframework.ldap.support.LdapContextSource">
        <property name="url" value="ldap://your.ldap.url:389" />
        <property name="base" value="base, be careful to put it right" />
        <property name="userName" value="your username" />
        <property name="password" value="password" />
    </bean>
    <bean id="ldapTemplate" class="org.springframework.ldap.LdapTemplate">
        <constructor-arg ref="contextSource" />
    </bean>
    <bean id="ldapContact"
        class="com.javaworld.sample.LDAPContactDAO">
        <property name="ldapTemplate" ref="ldapTemplate" />
    </bean>
</beans> 
```

联系人属性映射器

```
import javax.naming.NamingException;
import javax.naming.directory.Attribute;
import javax.naming.directory.Attributes;

import org.springframework.ldap.AttributesMapper;

public class ContactAttributeMapper implements AttributesMapper{

    public Object mapFromAttributes(Attributes attributes) throws NamingException {
        ContactDTO contactDTO = new ContactDTO();

        Attribute mail = attributes.get("mail");
        Attribute sap = attributes.get("employeeNumber");
        if(mail != null)
            contactDTO.setMail((String)mail.get());
        if(sap != null)
            contactDTO.setSap((String)sap.get());

        return contactDTO;
    }

} 
```

联系DTO

```
public class ContactDTO {

    String mail;
    String sap;
    public String getSap() {
        return sap;
    }
    public void setSap(String sap) {
        this.sap = sap;
    }
    public String getMail() {
        return mail;
    }
    public void setMail(String mail) {
        this.mail = mail;
    }

    public String toString() {
        StringBuffer contactDTOStr = new StringBuffer("Person=[");

        contactDTOStr.append(" mail = " + mail);
        contactDTOStr.append(" ]");
        return contactDTOStr.toString();
    }
} 
```

测试类：SpringFrameworkLDAPClient

```
import java.util.List;
import org.springframework.beans.BeansException;
import org.springframework.beans.factory.BeanFactory;
import org.springframework.beans.factory.xml.XmlBeanFactory;
import org.springframework.core.io.ClassPathResource;
import org.springframework.core.io.FileSystemResource;
import org.springframework.core.io.Resource;
import org.springframework.dao.DataAccessException;

public class SpringFrameworkLDAPClient {

    public static void main(String[] args) {
        //Resource resource = new ClassPathResource("/SpringLDAPClient/src/com/javaworld/sample/springldap.xml");
        //System.out.println(resource.toString());
        try {
            Resource resource = new ClassPathResource("springldap.xml");
            BeanFactory factory = new XmlBeanFactory(resource);
            System.out.println(factory.toString() + "\n");

            ContactDAO ldapContact = (LDAPContactDAO)factory.getBean("ldapContact");    

            List contactList = ldapContact.getContactDetails("30662");
            //List contactList =ldapContact.getAllContactNames();
            //System.out.println(contactList.size());
            int count = 0;
            for( int i = 0 ; i < contactList.size(); i++){
                System.out.print("Email: " + ((ContactDTO) contactList.get(i)).getMail() + "  ");
                System.out.println("SAP: " + ((ContactDTO) contactList.get(i)).getSap());
                count++;
            }
            System.out.println("\n" + count);

        } catch (DataAccessException e) {
            System.out.println("Error occured " + e.getCause());
        }
    }
} 
```

首先使用活动目录资源管理器获取您的域的详细信息。然后相应地执行上述操作。

# mysql - mysql中的只读表

> ID：12349640
> 
> 赞同：7
> 
> 时间：2012-09-10T10:18:40.387
> 
> 标签：mysql, database

我正在使用mysql数据库。在那我有一个表，`tbl_user`我需要将它更改为每个用户的只读表。如何将表格更改为只读？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T10:31:40.357

要授予所有用户选择，请使用 public 而不是完整的用户列表

```
REVOKE ALL ON tbl_user FROM PUBLIC
GRANT SELECT ON tbl_user TO PUBLIC 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-17T04:58:09.590

除了撤销权限，还有一种方法是使用trigger

```
/* triggers */
delimiter //

DROP TRIGGER IF EXISTS stop_table_insert;
CREATE TRIGGER stop_table_insert
  BEFORE INSERT ON `table`
FOR EACH ROW
BEGIN
   SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Database maintainance';
END;//

DROP TRIGGER IF EXISTS stop_table_update;
CREATE TRIGGER stop_table_update
  BEFORE UPDATE ON `table`
FOR EACH ROW
BEGIN 
   SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Database maintainance';
END;//

DROP TRIGGER IF EXISTS stop_table_delete;
CREATE TRIGGER stop_table_delete
  BEFORE DELETE ON `table`
FOR EACH ROW
BEGIN
   SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Database maintainance';
END;//

delimiter ; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-10T10:22:40.233

使用该`REVOKE`命令并从该表中撤消用户的 INSERT / UPDATE / DELETE 权限

```
REVOKE
    priv_type [(column_list)]
      [, priv_type [(column_list)]] ...
    ON [object_type] priv_level
    FROM user [, user] ... 
```

参考[文档](http://dev.mysql.com/doc/refman/5.0/en/revoke.html)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-10T10:22:45.717

您需要 REVOKE 更新/修改/授予所有用户对该表的权限并添加 SELECT。

```
REVOKE ALL ON readonly_table FROM tbl_user ;
GRANT SELECT ON readonly_table TO tbl_user; 
```

如果用户在 readonly_table 上有授权选项，请执行以下操作：

```
REVOKE GRANT OPTION ON readonly_table FROM tbl_user; 
```

阅读[MySQL 访问权限系统](https://dev.mysql.com/doc/refman/5.5/en/privilege-system.html) 和[REVOKE 文档](http://dev.mysql.com/doc/refman/5.0/en/revoke.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-10T10:21:39.837

```
GRANT SELECT ON tbl_user TO user;
GRANT SELECT, INSERT, UPDATE, DELETE ON tbl_user TO user; 
```

# mathml - 转换后如何保留mathml标签？

> ID：12349641
> 
> 赞同：0
> 
> 时间：2012-09-10T10:18:52.430
> 
> 标签：mathml

转换后如何保留 mathml 标签？我正在使用这个：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:m="http://www.w3.org/1998/Math/MathML"> 
```

顺便说一句，我正在使用 m 命名空间。转换成html后，mathml标签就没有了。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T14:55:23.520

您正在使用 XSLT，以便接受一些未指定的输入并生成任何 XML 输出。由于您没有给出输入或转换的指示，因此很难提供帮助，但只是一个疯狂的猜测

```
<xsl:template match="m:*">
<xsl:copy-of select="."/>
</xsl:template> 
```

如果将模板应用于 mathml 元素，则会将 mathml 从输入复制到输出。

# asp.net - ASP.NET MVC 和 Instagram 实时 API 更新

> ID：12349643
> 
> 赞同：0
> 
> 时间：2012-09-10T10:19:01.280
> 
> 标签：asp.net, .net, asp.net-mvc, instagram

我将使用 Instagram 实时 api 订阅具有特定标签的图像。API 看起来很简单，但有一件事困扰着我。

> 此外，您应该在 2 秒超时内确认 POST - 如果您需要对接收到的信息进行更多处理，您可以在异步任务中执行此操作。

什么是在请求进入时仅响应 Instagram 的最佳方式，但仍以相同的操作从 Instagram 获取实际图像并在我的数据库中创建一个新文档？

我正在使用 ASP.NET MVC 4。

编辑：动作开始时一个简单的 Response.Flush() 就足够了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:27:59.637

如果您使用的是.NET 4.5，您可以使用`async`and`await`关键字先处理返回，然后等待图像下载。[请参阅 Microsoft 的这篇文章](http://www.asp.net/mvc/tutorials/mvc-4/using-asynchronous-methods-in-aspnet-mvc-4)。

# c# - NHibernate - 获取引用的列值

> ID：12349646
> 
> 赞同：0
> 
> 时间：2012-09-10T10:19:03.517
> 
> 标签：c#, nhibernate

我有这个 NHibernate 模型：

```
public class RootTable
{
    public virtual string Name { get; set; }
    public virtual string Description { get; set; }
    public virtual DateTime? Start { get; set; }
    public virtual DateTime? Finish { get; set; }
    public virtual IList<Leaf1> ChildCollection1 { get; set; }
}

public class Leaf1
{
    public virtual int ID { get; set; }
    public virtual string Info1 { get; set; }
    public virtual string Info2 { get; set; }
    public virtual RootTable Parent { get; set; }
}

public class RootMapping : ClassMap<RootTable>
{
    public RootMapping()
    {
        Table("RootTable");
        Id(c => c.Name);
        Map(c => c.Description, "Desc").Length(20);
        Map(c => c.Start).Length(20);
        Map(c => c.Finish).Length(20);
        HasMany(c => c.ChildCollection1)
            .Cascade.All()
            .LazyLoad()
            .Inverse();
    }
}

public class Leaf1Mapping : ClassMap<Leaf1>
{
    public Leaf1Mapping()
    {
        Table("LeafTable1");
        Id(c => c.ID, "RowID").GeneratedBy.Identity();
        Map(c => c.Info1).Length(20);
        Map(c => c.Info2).Length(20);
        References(c => c.Parent).Column("Parent").LazyLoad();
    }
} 
```

我想要做的是访问Leaf1 中引用列的*值*而不延迟加载 RootTable。

换句话说，我有这个：

```
this.LogMessage("Loading leaves...");
var allleafs = session.CreateCriteria(typeof(Leaf1)).List<Leaf1>();
this.LogMessage("Loaded leaves...");
var leaf = allleafs[0];

this.LogMessage("Leaf metadata:");
// This causes a lazy-load of the RootTable object.
this.LogMessage("Leaf parent is " + leaf.Parent); 
```

现在我真正想要的是“父”的*值*，因为它存储在底层数据库中——我不关心父对象，我不想加载它，我想做的就是获取原始值。我无法访问包含值（即`leaf.Parent.Name`）的字段，因为我希望它以通用方式工作......

**[背景]** 最终，这是插入到使用 NHibernate 拦截器的审计框架中，因此这需要以通用方式工作，以便对于传入的任何对象，我都可以报告更改的值。子节点完全有可能在根节点没有变化的情况下发生了变化，所以当拦截器`OnFlushDirty()`被调用时，我*不*希望拦截器导致其他对象的延迟加载。

我知道我可以直接引用父属性（例如，我可以说“leaf.Parent.Name”），这将使我得到没有延迟加载的值，但似乎没有一种快速的方法来确定“名称”是我要返回的关键属性。

**[编辑添加...]**
因为我得到一个空引用异常，所以走树似乎不起作用：

```
var theType = leaf.Parent.GetType();

// This line returns a NULL due to the proxy class.
var metadata = factory.GetClassMetadata(theType);
var idProp = metadata.IdentifierPropertyName;

var prop = theType.GetProperty(idProp);
var val = prop.GetValue(leaf.Parent, null);

this.LogMessage("Leaf parent is " + val); 
```

现在， theType 返回为`RootTableProxy`，因此只是一个占位符，因为未加载主类。这意味着`metadata`为空，因为没有类元数据，因此`idProp`因空引用异常而失败。

所以我实际上看不到如何在没有延迟加载的情况下获取引用的列值：这肯定不对吗？

**编辑添加（更多！）**
我认为使用 session.GetIdentifier() 找到了一个简单的解决方案。然而，这似乎并不适用于所有情况：在调用`session.GetIdentifier(state[i])`某些对象的拦截器中导致异常指出该对象不是当前会话的一部分，因此仍在寻找不诉诸反射的更可靠的解决方案. 欢迎任何想法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:10:00.163

向您的 Leaf1 类添加另一个属性怎么样。

例如

```
public class Leaf1
{
    public virtual int ID { get; set; }
    public virtual string Info1 { get; set; }
    public virtual string Info2 { get; set; }
    public virtual RootTable Parent { get; set; }
    public virtual int ParentId { get; set; }
} 
```

然后地图是只读的

```
public class Leaf1Mapping : ClassMap<Leaf1>
{
    public Leaf1Mapping()
    {
        Table("LeafTable1");
        Id(c => c.ID, "RowID").GeneratedBy.Identity();
        Map(c => c.Info1).Length(20);
        Map(c => c.Info2).Length(20);
        References(c => c.Parent).Column("Parent").LazyLoad();
        Map(c => c.ParentId).Column("Parent").ReadOnly();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:09:06.527

您可以让您的实体实现接口（会更简洁），但如果您想获取代理的实际类型，请使用 NHibernateUtil.GetClass(proxy) 它将返回您正在寻找的基础类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-11T09:38:54.200

它`ISession`有一个方法`GetIdentifier`可以返回属性的缓存值。以我原来的帖子为例，代码更改为：

```
this.LogMessage("Loading leaves...");
var allleafs = session.CreateCriteria(typeof(Leaf1)).List<Leaf1>();
this.LogMessage("Loaded leaves...");
var leaf = allleafs[0];

this.LogMessage("Leaf metadata:");
this.LogMessage("Leaf parent is " + session.GetIdentifier(leaf.Parent)); 
```

现在在测试中，这似乎工作得很好，并且可以从`OnFlushDirty`currentState 和 previousState 对象的拦截器中调用。

我一直在尝试查找有关 的更多信息`GetIdentifier`，但遗憾的是缺少 NH 文档，而且似乎很少（如果有的话）博客文章提到了这一点。如果有人知道我需要知道的与此方法相关的任何警告、问题或“有趣”，我会很高兴听到他们的消息……

**[编辑添加]** ...事实证明，如果对象不是代理对象（！），这将不起作用。仍在寻找一种可靠的方法来做到这一点，它不涉及反射或用属性装饰对象来识别字段。

# jquery - 如何返回从 html5 数据库中找到的总条目？

> ID：12349647
> 
> 赞同：0
> 
> 时间：2012-09-10T10:19:02.987
> 
> 标签：jquery, html, sqlite

嗨，我正在尝试返回 no 的长度。在数据库中找到的行，但我越来越不确定。由于我对 jquery 有点陌生，他们有什么其他方式可以返回吗？

```
var add_access_db = {"add_access" : function(id, table)                                             //get id of equipment 
    {    
            db.transaction(function (tx) { 

            tx.executeSql('SELECT * FROM '+ table +' WHERE id=? AND Access=?', [id,"0"],            //Check access (table is the table name passed though variable)
            function (tx, results) {
            var len = results.rows.length, i;                                                       //Get row length for access
            return len;

            });
        });
    }
} 
```

我打电话给它

```
function checkDetails(){
    var len=add_access_db.add_access(id, table);            //check access
    alert(len);
} 
```

我在这里做错了什么？如果我`return`在函数的开头插入它会返回值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:35:16.793

当查询完成时调用您的回调函数，这可能是在 add_access() 已经返回之后。

如果您想对查询结果做任何事情，您必须在回调函数或从那里调用的函数中进行。

像这样的东西：

```
tx.executeSql('SELECT ...', [...],
              function (tx, results) {
                  alert(results.rows.length);
                  // ...
              }); 
```

# c# - 如何使用 JNI 从 C# 获取返回值到 Java

> ID：12349651
> 
> 赞同：1
> 
> 时间：2012-09-10T10:19:13.530
> 
> 标签：c#, java, c++, java-native-interface

我需要将 C# 中的方法返回的值获取到 java 类中的变量，所以我使用了 JNI。它适用于仅在 C# 中调用一个方法，但是当我修改相同的方法和那些将值传递给 java 的相应调用时它不起作用......它显示了一个致命错误并创建了以下日志文​​件。

```
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  Internal Error (0xe0434f4d), pid=4252, tid=4236
#
# JRE version: 7.0_07-b10
# Java VM: Java HotSpot(TM) Client VM (23.3-b01 mixed mode, sharing windows-x86 )
# Problematic frame:
# C  [kernel32.dll+0x1eb33]  RaiseException+0x52
#
# Failed to write core dump. Minidumps are not enabled by default on client versions of Windows
#
# If you would like to submit a bug report, please visit:
#   http://bugreport.sun.com/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x009e8800):  JavaThread "main" [_thread_in_native, id=4236, stack(0x00ad0000,0x00b20000)]

siginfo: ExceptionCode=0xe0434f4d, ExceptionInformation=0x80070002 

Registers:
EAX=0x00b1ed44, EBX=0xe0434f4d, ECX=0x00000000, EDX=0x00000028
ESP=0x00b1ed40, EBP=0x00b1ed94, ESI=0x00b1edd0, EDI=0x000c5570
EIP=0x7c81eb33, EFLAGS=0x00000202

Top of Stack: (sp=0x00b1ed40)
0x00b1ed40:   00b1edcc e0434f4d 00000001 00000000
0x00b1ed50:   7c81eb33 00000001 80070002 02000038
0x00b1ed60:   00b1ed70 79e80024 00b1ed78 02000038
0x00b1ed70:   00b1ed7c 79e80687 79330ba0 00b1ed8c
0x00b1ed80:   79eda76f 793171fc 0000012f 00b1ed9c
0x00b1ed90:   79eda796 00b1edf4 79eda91c e0434f4d
0x00b1eda0:   00000001 00000001 00b1edcc 4f14bdac
0x00b1edb0:   00000000 03b85780 00b1ee80 00ad3000 

Instructions: (pc=0x7c81eb33)
0x7c81eb13:   f9 0f 0f 87 69 5a 02 00 85 c9 89 4d c0 74 07 57
0x7c81eb23:   8d 7d c4 f3 a5 5f 8d 45 b0 50 ff 15 04 15 80 7c
0x7c81eb33:   5e c9 c2 10 00 85 ff 0f 8e e6 d0 fe ff 8b 55 fc
0x7c81eb43:   89 55 0c 0f b7 16 8b 7d f8 8a 14 3a 88 11 8b 78 

Register to memory mapping:

EAX=0x00b1ed44 is pointing into the stack for thread: 0x009e8800
EBX=0xe0434f4d is an unknown value
ECX=0x00000000 is an unknown value
EDX=0x00000028 is an unknown value
ESP=0x00b1ed40 is pointing into the stack for thread: 0x009e8800
EBP=0x00b1ed94 is pointing into the stack for thread: 0x009e8800
ESI=0x00b1edd0 is pointing into the stack for thread: 0x009e8800
EDI=0x000c5570 is an unknown value

Stack: [0x00ad0000,0x00b20000],  sp=0x00b1ed40,  free space=315k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [kernel32.dll+0x1eb33]  RaiseException+0x52
C  [mscorwks.dll+0x6a91c]  GetMetaDataInternalInterface+0x84a9
C  [mscorwks.dll+0xc9e44]  CopyPDBs+0x39f8
C  [mscorwks.dll+0x26154b]  CorLaunchApplication+0x15d35
C  [mscorjit.dll+0x2ea6]
C  [mscorjit.dll+0x717d]
C  [mscorjit.dll+0x43a1]
C  [mscorjit.dll+0x44d6]
C  [mscorjit.dll+0x465c]
C  [mscorjit.dll+0x5b8e]
C  [mscorjit.dll+0x5d33]
C  [mscorjit.dll+0x6448]
C  [mscorwks.dll+0x157198]  StrongNameErrorInfo+0x22d0c
C  [mscorwks.dll+0x15722d]  StrongNameErrorInfo+0x22da1
C  [mscorwks.dll+0x1572a0]  StrongNameErrorInfo+0x22e14
C  [mscorwks.dll+0x157019]  StrongNameErrorInfo+0x22b8d
C  [mscorwks.dll+0x156ddb]  StrongNameErrorInfo+0x2294f
C  [mscorwks.dll+0x111a3]  DllUnregisterServerInternal+0x5187
C  [mscorwks.dll+0x11363]  DllUnregisterServerInternal+0x5347
C  0x0324fb2e
C  0x0352e109
C  0x03250081
j  Test1.displayHelloWorld()Z+0
j  Test1.main([Ljava/lang/String;)V+12
v  ~StubRoutines::call_stub
V  [jvm.dll+0x12a39a]
V  [jvm.dll+0x1d962e]
V  [jvm.dll+0x12a41d]
V  [jvm.dll+0xaee94]
V  [jvm.dll+0xb9217]
C  [java.exe+0x1fd8]
C  [java.exe+0xa0cb]
C  [java.exe+0xa155]
C  [kernel32.dll+0xb50b]  GetModuleFileNameA+0x1b4

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  Test1.displayHelloWorld()Z+0
j  Test1.main([Ljava/lang/String;)V+12
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x02c7c000 JavaThread "Service Thread" daemon [_thread_blocked, id=2376, stack(0x03010000,0x03060000)]
  0x02c76400 JavaThread "C1 CompilerThread0" daemon [_thread_blocked, id=608, stack(0x02fc0000,0x03010000)]
  0x02c74800 JavaThread "Attach Listener" daemon [_thread_blocked, id=4308, stack(0x02f70000,0x02fc0000)]
  0x02c73000 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=4292, stack(0x02f20000,0x02f70000)]
  0x02c64400 JavaThread "Finalizer" daemon [_thread_blocked, id=4304, stack(0x02ed0000,0x02f20000)]
  0x02c5f400 JavaThread "Reference Handler" daemon [_thread_blocked, id=4288, stack(0x02e80000,0x02ed0000)]
=>0x009e8800 JavaThread "main" [_thread_in_native, id=4236, stack(0x00ad0000,0x00b20000)]

Other Threads:
  0x02c5dc00 VMThread [stack: 0x02e30000,0x02e80000] [id=4244]
  0x02c86c00 WatcherThread [stack: 0x03060000,0x030b0000] [id=4320]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 def new generation   total 4928K, used 281K [0x22cc0000, 0x23210000, 0x28210000)
  eden space 4416K,   6% used [0x22cc0000, 0x22d064f0, 0x23110000)
  from space 512K,   0% used [0x23110000, 0x23110000, 0x23190000)
  to   space 512K,   0% used [0x23190000, 0x23190000, 0x23210000)
 tenured generation   total 10944K, used 0K [0x28210000, 0x28cc0000, 0x32cc0000)
   the space 10944K,   0% used [0x28210000, 0x28210000, 0x28210200, 0x28cc0000)
 compacting perm gen  total 12288K, used 112K [0x32cc0000, 0x338c0000, 0x36cc0000)
   the space 12288K,   0% used [0x32cc0000, 0x32cdc128, 0x32cdc200, 0x338c0000)
    ro space 10240K,  42% used [0x36cc0000, 0x370ff150, 0x370ff200, 0x376c0000)
    rw space 12288K,  54% used [0x376c0000, 0x37d3fad8, 0x37d3fc00, 0x382c0000)

Card table byte_map: [0x02cd0000,0x02d80000] byte_map_base: 0x02bb9a00

Polling page: 0x00b20000

Code Cache  [0x00b50000, 0x00be8000, 0x02b50000)
 total_blobs=133 nmethods=5 adapters=64 free_code_cache=32187Kb largest_free_block=32959808

Compilation events (10 events):
Event: 0.110 Thread 0x02c76400    1             java.lang.String::hashCode (55 bytes)
Event: 0.110 Thread 0x02c76400 nmethod 1 0x00bdfcc8 code [0x00bdfdc0, 0x00bdfea0]
Event: 0.122 Thread 0x02c76400    2             java.lang.String::charAt (29 bytes)
Event: 0.123 Thread 0x02c76400 nmethod 2 0x00be0288 code [0x00be0390, 0x00be04bc]
Event: 0.126 Thread 0x02c76400    3             java.lang.String::indexOf (70 bytes)
Event: 0.127 Thread 0x02c76400 nmethod 3 0x00be0608 code [0x00be0720, 0x00be085c]
Event: 0.127 Thread 0x02c76400    4             java.io.Win32FileSystem::normalize (143 bytes)
Event: 0.128 Thread 0x02c76400 nmethod 4 0x00be0988 code [0x00be0ad0, 0x00be0d6c]
Event: 0.128 Thread 0x02c76400    5             java.lang.Object::<init> (1 bytes)
Event: 0.128 Thread 0x02c76400 nmethod 5 0x00be10c8 code [0x00be11c0, 0x00be1250]

GC Heap History (0 events):
No events

Deoptimization events (0 events):
No events

Internal exceptions (2 events):
Event: 0.017 Thread 0x009e8800 Threw 0x22cc11d8 at C:\jdk7u1_32P\jdk7u7\hotspot\src\share\vm\prims\jni.cpp:3994
Event: 0.123 Thread 0x009e8800 Threw 0x22cf9b00 at C:\jdk7u1_32P\jdk7u7\hotspot\src\share\vm\prims\jvm.cpp:1166

Events (10 events):
Event: 0.124 loading class 0x02ca2820
Event: 0.125 loading class 0x02ca2820 done
Event: 0.125 loading class 0x02ca24a0
Event: 0.125 loading class 0x02ca24a0 done
Event: 0.125 loading class 0x383bd170
Event: 0.125 loading class 0x382f3788
Event: 0.125 loading class 0x382f3788 done
Event: 0.125 loading class 0x383bd170 done
Event: 0.127 loading class 0x382caa28
Event: 0.127 loading class 0x382caa28 done

Dynamic libraries:
0x00400000 - 0x0042f000     C:\windows\System32\java.exe
0x7c900000 - 0x7c9b0000     C:\windows\system32\ntdll.dll
0x7c800000 - 0x7c8f4000     C:\windows\system32\kernel32.dll
0x77dd0000 - 0x77e6b000     C:\windows\system32\ADVAPI32.dll
0x77e70000 - 0x77f01000     C:\windows\system32\RPCRT4.dll
0x77d40000 - 0x77dd0000     C:\windows\system32\USER32.dll
0x77f10000 - 0x77f56000     C:\windows\system32\GDI32.dll
0x773d0000 - 0x774d2000     C:\windows\WinSxS\x86_Microsoft.Windows.Common-Controls_6595b64144ccf1df_6.0.2600.2180_x-ww_a84f1ff9\COMCTL32.dll
0x77c10000 - 0x77c68000     C:\windows\system32\msvcrt.dll
0x77f60000 - 0x77fd6000     C:\windows\system32\SHLWAPI.dll
0x76390000 - 0x763ad000     C:\windows\system32\IMM32.DLL
0x629c0000 - 0x629c9000     C:\windows\System32\LPK.DLL
0x74d90000 - 0x74dfb000     C:\windows\System32\USP10.dll
0x6d590000 - 0x6d596000     C:\PROGRA~1\KASPER~1\KASPER~1.0FO\kloehk.dll
0x6d020000 - 0x6d035000     C:\PROGRA~1\KASPER~1\KASPER~1.0FO\adialhk.dll
0x78aa0000 - 0x78b5e000     C:\Program Files\Java\jre7\bin\msvcr100.dll
0x6e750000 - 0x6ea9c000     C:\Program Files\Java\jre7\bin\client\jvm.dll
0x71ad0000 - 0x71ad9000     C:\windows\System32\WSOCK32.dll
0x71ab0000 - 0x71ac7000     C:\windows\System32\WS2_32.dll
0x71aa0000 - 0x71aa8000     C:\windows\System32\WS2HELP.dll
0x76b40000 - 0x76b6d000     C:\windows\System32\WINMM.dll
0x76bf0000 - 0x76bfb000     C:\windows\System32\PSAPI.DLL
0x6e6a0000 - 0x6e6ac000     C:\Program Files\Java\jre7\bin\verify.dll
0x6d480000 - 0x6d4a0000     C:\Program Files\Java\jre7\bin\java.dll
0x6e730000 - 0x6e743000     C:\Program Files\Java\jre7\bin\zip.dll
0x10000000 - 0x1000d000     C:\module\supporting\HelloWorld.dll
0x79000000 - 0x7904a000     C:\windows\system32\mscoree.dll
0x10200000 - 0x10320000     C:\windows\WinSxS\x86_Microsoft.VC80.DebugCRT_1fc8b3b9a1e18e3b_8.0.50727.42_x-ww_f75eb16c\MSVCR80D.dll
0x03110000 - 0x03212000     C:\windows\WinSxS\x86_Microsoft.VC80.DebugCRT_1fc8b3b9a1e18e3b_8.0.50727.42_x-ww_f75eb16c\msvcm80d.dll
0x774e0000 - 0x7761c000     C:\windows\system32\ole32.dll
0x603b0000 - 0x60416000     C:\windows\Microsoft.NET\Framework\v4.0.30319\mscoreei.dll
0x79e70000 - 0x7a400000     C:\windows\Microsoft.NET\Framework\v2.0.50727\mscorwks.dll
0x78130000 - 0x781cb000     C:\windows\WinSxS\x86_Microsoft.VC80.CRT_1fc8b3b9a1e18e3b_8.0.50727.3053_x-ww_b80fa8ca\MSVCR80.dll
0x7c9c0000 - 0x7d1d4000     C:\windows\system32\shell32.dll
0x790c0000 - 0x79bb7000     C:\windows\assembly\NativeImages_v2.0.50727_32\mscorlib\9adb89fa22fd5b4ce433b5aca7fb1b07\mscorlib.ni.dll
0x79060000 - 0x790bb000     C:\windows\Microsoft.NET\Framework\v2.0.50727\mscorjit.dll
0x5e3a0000 - 0x5e42d000     C:\windows\Microsoft.NET\Framework\v2.0.50727\diasymreader.dll
0x0ffd0000 - 0x0fff8000     C:\windows\System32\rsaenh.dll
0x7a440000 - 0x7abc5000     C:\windows\assembly\NativeImages_v2.0.50727_32\System\aa7926460a336408c8041330ad90929d\System.ni.dll
0x59a60000 - 0x59b01000     C:\windows\System32\dbghelp.dll
0x77c00000 - 0x77c08000     C:\windows\system32\VERSION.dll

VM Arguments:
java_command: Test1
Launcher Type: SUN_STANDARD

Environment Variables:
JAVA_HOME=C:\Program Files\Java\jdk1.7.0_01
PATH=C:\windows\System32;C:\wamp\bin\php\php5.3.0;C:\wamp\bin\php\php5.3.0;C:\Program Files\Java\jdk1.6.0_18\bin;C:\windows\system32;C:\windows;C:\windows\system32\WBEM;C:\strawberry\c\bin;C:\strawberry\perl\site\bin;C:\strawberry\perl\bin;C:\wamp\bin\php\php5.3.0;C:\wamp\bin\php\php5.3.0;C:\Program Files\Java\jdk1.6.0_18\bin;C:\windows\system32;C:\windows;C:\windows\system32\WBEM;C:\strawberry\c\bin;C:\strawberry\perl\site\bin;C:\strawberry\perl\bin;C:\wamp\bin\php\php5.3.0;C:\wamp\bin\php\php5.3.0;C:\Program Files\Java\jdk1.6.0_18\bin;C:\windows\system32;C:\windows;C:\windows\system32\WBEM;C:\strawberry\c\bin;C:\strawberry\perl\site\bin;C:\strawberry\perl\bin;C:\wamp\bin\php\php5.3.0;C:\wamp\bin\php\php5.3.0;C:\Program Files\Java\jdk1.6.0_18\bin;C:\windows\system32;C:\windows;C:\windows\system32\WBEM;C:\strawberry\c\bin;C:\strawberry\perl\site\bin;C:\strawberry\perl\bin;C:\wamp\bin\php\php5.3.0;C:\wamp\bin\php\php5.3.0;C:\Program Files\Java\jdk1.6.0_18\bin;C:\windows\system32;C:\windows;C:\windows\system32\WBEM;C:\strawberry\c\bin;C:\strawberry\perl\site\bin;C:\strawberry\perl\bin;ATALINA_HOME\bin
USERNAME=sathishkumarkk
OS=Windows_NT
PROCESSOR_IDENTIFIER=x86 Family 6 Model 23 Stepping 6, GenuineIntel

---------------  S Y S T E M  ---------------

OS: Windows XP Build 2600 Service Pack 2

CPU:total 2 (2 cores per cpu, 1 threads per core) family 6 model 23 stepping 6, cmov, cx8, fxsr, mmx, sse, sse2, sse3, ssse3, sse4.1, tsc

Memory: 4k page, physical 2028972k(797208k free), swap 4915092k(3478568k free)

vm_info: Java HotSpot(TM) Client VM (23.3-b01) for windows-x86 JRE (1.7.0_07-b10), built on Aug 28 2012 19:49:22 by "java_re" with unknown MS VC++:1600

time: Thu Sep 06 09:45:18 2012
elapsed time: 0 seconds 
```

[这个链接](http://www.codeproject.com/Articles/378826/How-to-wrap-a-Csharp-library-for-use-in-Java)我曾经尝试过 JNI，它可以工作，但是当我尝试从 C# 返回 int 或 bool 或 String 时...发生上述致命错误。

**CSharpHelloWorld.cs**

```
using System;
using System.Windows.Forms;

public class CSharpHelloWorld
{
    public CSharpHelloWorld() { }

    public int displayHelloWorld()
    {
       // MessageBox.Show("Hello Java, I'm C#!", "Sample");
       return 1;
    }
} 
```

后来我创建了 CSharpHelloWorld.netmodule

> csc /t:module CSharpHelloWorld.cs

接下来我写了Test1.java

```
public class Test1 { 
private native int displayHelloWorld();
    static {
        try{
            System.loadLibrary("HelloWorld");
            //System.load("D://HelloWorld.dll");
            //System.loadLibrary("CallApi");
            System.out.println("Loaded");
        }catch(UnsatisfiedLinkError e){
            //nothing to do
            System.out.println("Couldn't load");
            System.out.println(e.getMessage());
        }
    }

    public static void main (String[] args) {
        Test1 t = new Test1();
       System.out.println(t.displayHelloWorld());
    }
} 
```

我编译它并使用 Test1.class 文件通过运行来获取 Test1.h

> javah测试1

然后我写了 HelloWorldC.h ，我只是从我提到的教程中复制了它。

```
#using <mscorlib.dll>
#using "MCPP\CSharpHelloWorld.netmodule"

using namespace System;

public __gc class HelloWorldC
{
    public:
        // Provide .NET interop and garbage collecting to the pointer.
        CSharpHelloWorld __gc *t;
        HelloWorldC() {
            t = new CSharpHelloWorld();
            // Assign the reference a new instance of the object
        }

     // This inline function is called from the C++ Code
       int callCSharpHelloWorld() {
            int i=t->displayHelloWorld();
            printf(i);
            return i;
        }
}; 
```

最后我写了 HelloWorld.cpp

```
#include <jni.h>
#include "Java\Test1.h"

// The Managed C++ header containing the call to the C#
#include "MCPP\HelloWorldC.h"

// This is the JNI call to the Managed C++ Class
// NOTE: When the java header was created, the package name was not include in the JNI call.
// This naming convention was corrected by adding the 
// "helloworld" name following the following syntax: 
// Java_<package name>_<class name>_<method name>
JNIEXPORT jint JNICALL Java_Test1_displayHelloWorld  (JNIEnv *jn, jobject jobj) {

    // Instantiate the MC++ class.
    HelloWorldC* t = new HelloWorldC();

    // The actual call is made. 
    return t->callCSharpHelloWorld();
} 
```

然后我用 Visual Studio 2005 构建它，后来我得到了 dll 文件，我复制了那个 dll 并将它传递到我的 java 类附近，然后我运行了 Test1.class

> java测试1

运行后，我得到了上面提到的致命错误。

注意：我遵循了我提到的教程中提到的相同结构。

# symfony - Symfony2 已知错误和问题

> ID：12349656
> 
> 赞同：0
> 
> 时间：2012-09-10T10:19:35.083
> 
> 标签：symfony

正如帖子的名称所说，我想知道 symfony2 包的已知问题是什么。

这是因为我正在考虑在我的公司中从**Symfony 1.4**切换到**2 。**

但是当我的公司为大客户开发高质量的大型项目时，我很想知道我可能会发现什么问题。

我知道一年前 symfony2 在形式和原则方面存在重大问题，但一年过去了，我想知道我能数什么以及是否值得做出改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:17:40.560

[Symfony GitHub-repo](https://github.com/symfony/symfony)是一个很好的信息来源：

所有问题：[https](https://github.com/symfony/symfony/issues)
://github.com/symfony/symfony/issues 打开错误：[https ://github.com/symfony/symfony/issues?labels=Bug&page=1&state=open](https://github.com/symfony/symfony/issues?labels=Bug&page=1&state=open)

# jquery - 交替两个 jQuery 对象

> ID：12349661
> 
> 赞同：0
> 
> 时间：2012-09-10T10:19:49.820
> 
> 标签：jquery, each, alternate

我正在尝试从我的旧站点中提取旧的常见问题解答系统并将其重新编码为`<dl>`.

到目前为止，这是我的 jQuery 代码：

```
$accordion = $('.accordion');
$headers = $accordion.find('h3.trigger-h3-accordion a');
$content = $accordion.find('div.toggle-accordion-large');

out = "<dl>\n";
$headers.each(function(k,v) {
    out += "<dt>" + $(this).text() + "</dt>\n";
    out += "<dd>" + $content[k].html() + "</dd>\n";
    // I also tried $content.k.html() and $content{k}.html()
    // and .text() on all of those options
});
out += "</dl>\n";
console.log(out); 
```

我得到错误：`TypeError: $content[k].html is not a function`

在线的：`out += "<dd>" + $content[k].html() + "</dd>\n";`

```
<div class="accordion">
    <div class="trigger-accordion-large trigger-accordion-active">
        <h3 class="trigger-h3-accordion"><a href="#" onclick="return stopAccordionRefresh();">Header Text</a></h3>
    </div>
    <div style="display: block;" class="toggle-accordion-large">
        <div class="block-large">
            <div class="body-content-textarea">
                <p>Content Text.</p>
            </div>
        </div>
    </div>
</div> 
```

如何输出循环中每个 $content 对象的内容以创建`<dl><dt><dd>`我所追求的有效内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:32:26.367

使用数组索引访问 jQuery 对象的元素会返回底层 DOM 元素，而不是 jQuery 对象；要访问元素的 jQuery 引用，请改用以下[`.eq()`](http://api.jquery.com/eq/)方法：

```
out += "<dd>" + $content.eq(k).html() + "</dd>\n"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T10:47:38.157

我将通过制作 jQuery 对象而不是 HTML-String 来处理转换：

```
var $accordion = $('.accordion'),
    $headers = $('h3.trigger-h3-accordion a', $accordion),
    $content = $('div.toggle-accordion-large', $accordion),
    $out = $('<dl/>')
    $dt = $('<dt/>'),
    $dd = $('<dd/>');

$headers.each(function(k,v) {
    var contents = $($content[k]).html();
    $dt.clone().html(v.innerHTML).appendTo($out);
    $dd.clone().html(contents).appendTo($out);
});

console.log(out); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T10:22:05.467

试试这个：

```
$($content[k]).html(); 
```

因为，`.html()`仅适用于 jQuery 对象，根据您的错误，它似乎`$content[k]`不是 jQuery 对象，可能是一个元素。

因此，将其包装在其中`$()`将使其成为 jQuery 对象，然后您就可以对其使用任何 jQuery 方法。

如果`$content[k]`是一个元素，那么您可以使用：

```
$content[k].innerHTML = 'your_all_html'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T10:25:01.390

这是因为`$content[k]`是原生元素，而不是 jQuery 对象。您可以将它包装在一个新的 jQuery 对象中，正如 codeparadox 所建议的那样，或者使用`$content[k].html`( `String`, not `Function`)。

[] 的文档在这里：[http ://api.jquery.com/get/](http://api.jquery.com/get/)

`.get()`返回 jQuery 对象中所有 dom 元素的原生数组。
`.get(n)`返回第 n 个元素，从零开始。
`.get(-n)`返回第 n 个最后一个元素，从 1 开始。
jQuery 对象在某种意义上就像一个数组，其中
`[n]`包含第 n 个元素
`.length`包含元素的数量

可以在此处找到本机 dom 元素的文档：

[http://www.w3schools.com/jsref/dom_obj_all.asp](http://www.w3schools.com/jsref/dom_obj_all.asp) [http://www.javascriptkit.com/domref/elementproperties.shtml](http://www.javascriptkit.com/domref/elementproperties.shtml)

# objective-c - NSButton 中的图像没有显示？

> ID：12349662
> 
> 赞同：1
> 
> 时间：2012-09-10T10:19:51.583
> 
> 标签：objective-c, xcode, cocoa, interface-builder, nsbutton

我已经尝试了几次，似乎有一些错误（Xcode 4.3.3 - OS X 10.7）：

*   `NSButton`在 Interface Builder 中放置一个
*   将其设置为“仅图像”
*   拖放系统图标（例如`NSAddTemplate`）

但是图标无法显示（虽然我完全可以看到图标不是系统图标，而是由我添加的）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T14:16:59.703

我刚刚尝试过，它以一种奇怪的方式工作。尝试在 NSButton 检查器中设置*图像*和*交替。*直接从下拉菜单中选择图像，而不是拖放它。

它有效，但这只是一种解决方法......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-19T17:06:18.590

替代答案：确保图像文件包含在目标的 Copy Bundle Resources 阶段（特别是如果您的 Xcode 项目中有多个目标）。如果您指定的映像不在捆绑包中，则不会出现构建时错误或警告。（有一个运行时警告）。

# apache-camel - 如何集成各种应用程序并提供通用接口来访问它们的数据？

> ID：12349663
> 
> 赞同：0
> 
> 时间：2012-09-10T10:19:50.407
> 
> 标签：apache-camel, esb

我们有几个不同的应用程序来存储它的数据，我们需要一个通用的服务来提供对这些数据的访问。

我的意思是应用程序，例如 Atlassian Jira、Confluence、SVN、Git、LDAP、一些内部 mysql 数据库等。其中一些为您提供 SOAP API、REST API、各种命令行客户端，对于一些您必须直接访问数据库才能获取数据。

我们想要的是一个通用的 REST API 接口，用于访问所有可能的数据源。当然，我们必须解决身份验证和授权、缓存以及更多任务。

似乎 ESB（企业服务总线）和 EIP（企业集成模式）之类的东西可以满足我们的需求。

首先，我们正在玩并实际深入研究 Apache Camel——它不是完整的 EIP 堆栈，它“只是”一个集成框架。但我想现在对我们来说已经足够了。

我的问题是-您对解决方案的意思是什么？我们走在好的路上吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:52:13.657

Camel 有很多连接器，所以这将是一个很好的开始。

如果您担心它太薄，那么看看 Apache ServiceMix，它为骆驼路由（和其他东西）提供了一个部署 (OSGi) 容器。Camel 捆绑在开箱即用的标准服务组合版本中。

艰巨的任务可能是设计出足以涵盖您的用例的通用 API。

GIT 存储库和数据库非常不同，这是非常通用的吗？你只想访问“文本”数据还是什么？

我非常喜欢骆驼的方法，因为它在这些场景中相当通用和灵活。你需要的

# .htaccess - mod_rewrite：如何禁用重写规则的不干净 urls 导航

> ID：12349664
> 
> 赞同：0
> 
> 时间：2012-09-10T10:19:57.177
> 
> 标签：.htaccess, mod-rewrite

我已经启用了 mod_rewrite 模块，一切正常。

我为 url 创建了简单的规则，但是如何使用参数禁用 url 导航（重写）？

例子：

```
# rewrite rule for cleaning
RewriteRule ^bookstore/([0-9]+)?$ /bookstore/book.php?id=$1 [L] 
```

现在，如果我导航到[http://mydomine.com/bookstore/123](http://mydomine.com/bookstore/123)一切都完成了，但网址[http://mydomine.com/bookstore/book.php?id=123](http://mydomine.com/bookstore/book.php?id=123)也是可导航的。

我怎样才能使第一个可见和可访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:09:24.347

不是 100% 确定这一点，但我认为如果你将 A 重写为 B，那么 A 和 B 都可以工作。

我想问一下**为什么**[http://mydomine.com/bookstore/book.php?id=123](http://mydomine.com/bookstore/book.php?id=123)也可以导航是一个问题？如果该链接也有效，那么问题是什么，并且用户可以同时使用这两个链接......尽管他们需要一些时间和运气才能发现第二个选项。他们这样做会*得到*什么？你会*失去*什么？如果这两种情况的答案都是“没有”，那就别担心了。:) 如果您以前使用旧链接，现在用新链接替换，那么您客户的旧书签仍然可以使用是一件好事*。*

但是，假设您有充分的理由禁用旧 URL，那么如何同时更改它们。例如，将“book.php”重命名为“xyz.php”，然后将[http://mydomine.com/bookstore/123](http://mydomine.com/bookstore/123)重定向到[http://mydomine.com/bookstore/xyz.php?id=123——](http://mydomine.com/bookstore/xyz.php?id=123)然后旧的[http://mydomine.com/bookstore/book.php?id=123](http://mydomine.com/bookstore/book.php?id=123)将停止工作。

好的，*这*是一个*丑陋*的解决方案，但如果不是重命名文件，而是将它们移动到子目录，例如[http://mydomine.com/xyz/bookstore/book.php?id=123](http://mydomine.com/xyz/bookstore/book.php?id=123) ，您可以做得更好。或者，您可以使用重定向添加“秘密”参数，然后在 PHP 文件中检查它，例如将 http://mydomine.com/bookstore/123 重写[为](http://mydomine.com/bookstore/123)http://mydomine.com/bookstore/book [。 php?id=123&secret=xyz](http://mydomine.com/bookstore/book.php?id=123&secret=xyz)。当然，这只是一种“默默无闻的安全”，但同样......任何人通过发现您的真实 URL究竟会*获得什么？*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:14:48.923

将此添加到相同的 htaccess 文件中：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /bookstore/book\.php\?id=([0-9]*)
RewriteRule ^bookstore/book\.php$ /bookstore/%1? [L,R=301] 
```

这将对带有查询字符串的 URI 的 301 请求重定向到没有的请求。

# xpages - 从 Java 向其 Notes 用户名中包含国际字符的用户发送邮件

> ID：12349665
> 
> 赞同：0
> 
> 时间：2012-09-10T10:20:00.270
> 
> 标签：xpages

我正在从 Java bean（[来自 Tony McGuckin 的电子邮件 bean](http://openntf.org/XSnippets.nsf/snippet.xsp?id=emailbean-send-dominodocument-html-emails-cw-embedded-images-attachments-custom-headerfooter)）发送邮件。

我的用户的 Notes 名称中有国际字符（丹麦语 æ、ø 和 å）。将 Notes 名称传递给 Java bean .setSendTo() 方法时出现问题，导致电子邮件 bean 无法发送邮件。Java 异常指出：

```
NotesException: Unable to send mail, no match found in Name & Address Book(s) 
```

如果主题包含国际字符，我也会在邮件主题中看到问题。

如何确保国际字符与 Java bean 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:38:15.700

看看[MimeUtility](http://docs.oracle.com/javaee/6/api/javax/mail/internet/MimeUtility.html)。特别是 encodeWord 或 encodeText。

例如

```
MimeUtility.encodeWord( sendToAddress ) 
```

# asp.net - Ajax 响应为空 ASP.NET

> ID：12349672
> 
> 赞同：0
> 
> 时间：2012-09-10T10:20:14.843
> 
> 标签：asp.net, ajax, cookies, asp.net-session

我的 asp.net 页面上有一些 ajax 请求另一个完整的 asp.net 页面。如果没有随该请求发送 cookie（cookie 包含 sessionID），则来自服务器的响应为空。

这是为什么？我该如何解决。

# c# - Display DateTime like Gmail

> ID：12349673
> 
> 赞同：0
> 
> 时间：2012-09-10T10:20:16.933
> 
> 标签：c#, asp.net, datetime, gridview

I need to Display the Time In my GridView taking Data from Database. I have the Time in the Format

```
2012-03-07 11:51:45.000 
```

How can I show the DateTime In the following way Like Gmail Does?

![enter image description here](../Images/9095c58dfaf1693d3fe97ba48e685e31.png)

If it is Todays Date the Time Should be displayed. Or else The Date Should be Displayed in this Format.

Can you Help Me?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:23:26.367

You can use the [DateTime Formatters](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx) to do something like this

```
public string ShowEmailAsGmail(DateTime dt)
{
    DateTime now = DateTime.UtcNow;

    if (dt.Date == now.Date)
        return dt.ToString("hh:mm tt");

    return dt.ToString("MMM dd");
} 
```

You could have this as a property of your custom object like:

```
public class EmailItem { 

    public DateTime SentDate { get; set; }

    public string ShowEmailAsGmail { get {
    {
        DateTime now = DateTime.UtcNow;

        if (this.SentDate.Date == now.Date)
            return this.SentDate.ToString("HH:mm");

        return this.SentDate.ToString("MMM dd");
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T10:30:50.870

Create a function in code behind that will cast your `DateTime` to the required format, and then render it using `TemplateField`.

Code:

```
protected string GetCustomDateFormat(object dateTimeObj)
{
    DateTime dateTime = (DateTime)dateTimeObj;

    if (dateTime.Date == DateTime.Today)
    {
        return dateTime.ToString("hh:mm tt", CultureInfo.InvariantCulture);
        //This Gives the Time in the Format (ex: 8:30 PM)

        //return dateTime.ToShortTimeString();
        // or you can specify format: dateTime.ToString("t")
    }
    else
    {
        return dateTime.ToShortDateString();
        // or you can specify format: dateTime.ToString("m")
    }
} 
```

Markup:

```
<asp:GridView ID="GridView1" runat="server" ...
    <Columns>
        ...
        <asp:TemplateField HeaderText="Header text here">
             <ItemTemplate>
                 <%# this.GetCustomDateFormat(Eval("DateTimeFieldName")) %>
             </ItemTemplate>
        </asp:TemplateField>
        ...
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T10:36:07.597

```
DateTime time = DateTime.Now;
Console.WriteLine(time.ToString("d"));
Console.WriteLine(time.ToString("D"));
Console.WriteLine(time.ToString("f"));
Console.WriteLine(time.ToString("F"));
Console.WriteLine(time.ToString("g"));
Console.WriteLine(time.ToString("G"));
Console.WriteLine(time.ToString("m"));
Console.WriteLine(time.ToString("M"));
Console.WriteLine(time.ToString("o"));
Console.WriteLine(time.ToString("O"));
Console.WriteLine(time.ToString("s"));
Console.WriteLine(time.ToString("t"));
Console.WriteLine(time.ToString("T"));
Console.WriteLine(time.ToString("u"));
Console.WriteLine(time.ToString("U"));
Console.WriteLine(time.ToString("y"));
Console.WriteLine(time.ToString("Y")); 
```

output:-

d 09/10/2012
D Monday, September 10, 2012
f Monday, September 10, 2012 12:11 PM
F Monday, September 10, 2012 12:12:22 PM
g 2/10/2012 12:12 PM
G 2/10/2012 12:12:22 PM
m September 10
M September 10
o 2012-02-10T12:12:22.1020000-08:00
O 2012-02-10T12:12:22.1020000-08:00
s 2012-02-10T12:12:22
t 12:12 PM
T 12:12:22 PM
u 2012-02-10 12:12:22Z
U Monday, September 10, 2012 8:12:22 PM
y September, 2012
Y September, 2012

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T11:07:28.750

Checkout following

```
 // create date time 2008-03-09 16:05:07.123
    DateTime dt = new DateTime(2008, 3, 9, 16, 5, 7, 123);

    String.Format("{0:y yy yyy yyyy}", dt);  // "8 08 008 2008"   year
    String.Format("{0:M MM MMM MMMM}", dt);  // "3 03 Mar March"  month
    String.Format("{0:d dd ddd dddd}", dt);  // "9 09 Sun Sunday" day
    String.Format("{0:h hh H HH}",     dt);  // "4 04 16 16"      hour 12/24
    String.Format("{0:m mm}",          dt);  // "5 05"            minute
    String.Format("{0:s ss}",          dt);  // "7 07"            second
    String.Format("{0:f ff fff ffff}", dt);  // "1 12 123 1230"   sec.fraction
    String.Format("{0:F FF FFF FFFF}", dt);  // "1 12 123 123"    without zeroes
    String.Format("{0:t tt}",          dt);  // "P PM"            A.M. or P.M.
    String.Format("{0:z zz zzz}",      dt);  // "-6 -06 -06:00"   time zone

// date separator in german culture is "." (so "/" changes to ".")
String.Format("{0:d/M/yyyy HH:mm:ss}", dt); // "9/3/2008 16:05:07" - english (en-US)
String.Format("{0:d/M/yyyy HH:mm:ss}", dt); // "9.3.2008 16:05:07" - german (de-DE)

// month/day numbers without/with leading zeroes
String.Format("{0:M/d/yyyy}", dt);            // "3/9/2008"
String.Format("{0:MM/dd/yyyy}", dt);          // "03/09/2008"

// day/month names
String.Format("{0:ddd, MMM d, yyyy}", dt);    // "Sun, Mar 9, 2008"
String.Format("{0:dddd, MMMM d, yyyy}", dt);  // "Sunday, March 9, 2008"

// two/four digit year
String.Format("{0:MM/dd/yy}", dt);            // "03/09/08"
String.Format("{0:MM/dd/yyyy}", dt);          // "03/09/2008"

String.Format("{0:t}", dt);  // "4:05 PM"                         ShortTime
String.Format("{0:d}", dt);  // "3/9/2008"                        ShortDate
String.Format("{0:T}", dt);  // "4:05:07 PM"                      LongTime
String.Format("{0:D}", dt);  // "Sunday, March 09, 2008"          LongDate
String.Format("{0:f}", dt);  // "Sunday, March 09, 2008 4:05 PM"  LongDate+ShortTime
String.Format("{0:F}", dt);  // "Sunday, March 09, 2008 4:05:07 PM" FullDateTime
String.Format("{0:g}", dt);  // "3/9/2008 4:05 PM"                ShortDate+ShortTime
String.Format("{0:G}", dt);  // "3/9/2008 4:05:07 PM"             ShortDate+LongTime
String.Format("{0:m}", dt);  // "March 09"                        MonthDay
String.Format("{0:y}", dt);  // "March, 2008"                     YearMonth
String.Format("{0:r}", dt);  // "Sun, 09 Mar 2008 16:05:07 GMT"   RFC1123
String.Format("{0:s}", dt);  // "2008-03-09T16:05:07"             SortableDateTime
String.Format("{0:u}", dt);  // "2008-03-09 16:05:07Z"            UniversalSortableDateTime 
```

[http://www.dotnetperls.com/datetime-format](http://www.dotnetperls.com/datetime-format)

[http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T10:21:33.357

How about:

```
if(myDate.Date == DateTime.Today) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T10:26:43.417

You should use date time formatters - for a comprehensive list (including samples), you can refer to: [http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

# c# - 无法在 Outlook 2010 中删除通讯簿

> ID：12349676
> 
> 赞同：1
> 
> 时间：2012-09-10T10:20:24.743
> 
> 标签：c#, outlook, outlook-addin

我正在运行下面的代码，我**的**印象是它做了它应该做的事情。但是，Outlook 似乎从不删除通讯簿文件夹。它只是设置`.ShowAsOutlookAB`为假。这意味着当我在下次启动 Outlook 时检查该文件夹是否存在时，该文件夹就在那里（虽然我没有意识到，因为它没有显示在 UI 中）。

```
Outlook.MAPIFolder defaultContactsFolder = 
  this.Application.GetNamespace("MAPI").GetDefaultFolder(
    Outlook.OlDefaultFolders.olFolderContacts);
defaultContactsFolder.Folders["My AB"].Delete(); 
```

我还尝试了以下代码，以确保它与我选择的库无关。

```
Outlook.Folder defaultContactsFolder = 
  this.Application.Session.GetDefaultFolder(
    Outlook.OlDefaultFolders.olFolderContacts) as Outlook.Folder;
Outlook.Folders contactFolders = defaultContactsFolder.Folders;
if (contactFolders.Cast<Outlook.Folder>().Where(
  element => element.Name == _CrmkAddressBookName).Count() > 0)
    contactFolders["My AB"].Delete(); 
```

在每种情况下，`Delete`都会执行**，但**结果只是从用户界面**隐藏地址簿。**我希望愚蠢的事情永远消失！

我怎样才能**真正**删除带有地址簿的文件夹？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T16:11:44.140

我犯了这样的错误，但使用了不同的实体，尽管仍在 Outlook 中。我得到的建议只是忽略这个问题。该`Deleted`目录充满了同名的项目，用户在发现它时被黑客攻击。

我的解决方案，主要是为了让客户平静下来，是重命名我知道最终用户通常检查并添加文本“*由 Outlook 维护安全存储*”的字段。然后用户很高兴。

不过，据我所知，您的问题的简短回答是“抱歉，您不能”。

冗长的答案使我们可以选择删除帐户并创建一个新帐户，但是如果所有内容都重新出现，我不会感到惊讶。:)

# c++ - 使用 bind2nd() 的奇怪编译器错误：“成员函数已定义或声明”而不是“引用引用”

> ID：12349677
> 
> 赞同：8
> 
> 时间：2012-09-10T10:20:29.520
> 
> 标签：c++, templates, compiler-errors, bind2nd

`func()`我最近在这段代码中调用时花了一些时间来理解错误消息：

```
int main()
{
    vector< vector<double> > v;

    double sum = 0;
    for_each( v.begin(), v.end(), 
        bind2nd( ptr_fun(func), &sum ) );

    return 0;
} 
```

当`func()`像这样声明时，代码编译得很好：

```
void func( vector<double> v, double *sum )
{
} 
```

当我使用这个声明（为了提高效率）时，我得到了一个编译器错误：

```
void func( const vector<double> &v, double *sum )
{
} 
```

由于 binder2nd 的 operator() 的定义，我希望看到的错误类似于**引用到引用的**错误，

```
result_type operator()(const argument_type& _Left) const 
```

相反，令我惊讶的是，Visual C++ (VS2012) 编译器给我的错误是：

> 错误 C2535：'void std::binder2nd<_Fn2>::operator ()(const std::vector<_Ty> &) const'：成员函数已定义或声明

我无法破译。

*   你能解释一下已经定义的`operator()`机制*吗*？

我得到的完整错误是：

```
error C2535: 'void std::binder2nd<_Fn2>::operator ()(const std::vector<_Ty> &) const' : member function already defined or declared
with
[
     _Fn2=std::pointer_to_binary_function<const std::vector<double> &,double *,void,void (__cdecl *)(const std::vector<double> &,double *)>,
      _Ty=double
]
c:\vc\include\xfunctional(319) : see declaration of 'std::binder2nd<_Fn2>::operator ()' 
with
[
      _Fn2=std::pointer_to_binary_function<const std::vector<double> &,double *,void,void (__cdecl *)(const std::vector<double> &,double *)>
] 
c:\consoleapplication1.cpp(31) : see reference to class template instantiation 'std::binder2nd<_Fn2>' being compiled 
with 
[
       _Fn2=std::pointer_to_binary_function<const std::vector<double> &,double *,void,void (__cdecl *)(const std::vector<double> &,double *)>
]

Build FAILED. 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T11:18:36.787

这种行为是明确定义的（每个正确的 C++ 编译器都无法编译您的代码）。

`D.9.3`从类模板的标准（N3376）部分`binder2nd`，存在这两个定义`operator()`：

```
typename Fn::result_type
operator()(const typename Fn::first_argument_type& x) const;

typename Fn::result_type
operator()(typename Fn::first_argument_type& x) const; 
```

如果`first_argument_type`已经是 a `const T&`，那么它们将是冲突的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:02:12.477

这不是一个答案，但我只想记录现代 C++11 解决方案，其中所有小型绑定助手都被弃用，取而代之的是通用`std::bind`：

```
#include <functional>
#include <vector>
#include <algorithm>

void func(std::vector<double> const & v, double * sum) { /* ... */ }

int main()
{
    std::vector<std::vector<double>> v;
    double sum = 0;
    std::for_each(v.begin(), v.end(), std::bind(func, std::placeholders::_1, &sum));
} 
```

C++11 的可变参数模板，以及更全面的类型修改特征集合，提供`std::bind`了比`<functional>`.

# wpf - ContextMenu 与 Menu 的焦点行为差异

> ID：12349681
> 
> 赞同：2
> 
> 时间：2012-09-10T10:20:50.253
> 
> 标签：wpf, menu, focus, contextmenu

我希望上下文菜单在焦点方面与主菜单的行为方式相同。

例如，如果键盘焦点在列表框中，并且我按 F10 将我带到主菜单并使用箭头键在菜单中导航，则列表框中的当前项目保持突出显示。但是，如果我右键单击弹出上下文菜单的列表框中的项目，则列表框项目失去焦点并且不再突出显示。

以下是一些演示该行为的示例 XAML。

```
 <Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.Resources>
            <ContextMenu x:Key="ContextMenu" >
                <MenuItem Header="Item 1" />
                <MenuItem Header="Item 2" />
            </ContextMenu>
        </Grid.Resources>

        <Grid.RowDefinitions>
            <RowDefinition Height="20" />
            <RowDefinition Height="100" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Menu Grid.Row="0">
            <MenuItem Header="_File">
                <MenuItem Header="Item 1" />
                <MenuItem Header="Item 2" />
            </MenuItem>
        </Menu>

        <ListBox Grid.Row="2" ContextMenu="{StaticResource ResourceKey=ContextMenu}">
            <ListBoxItem Content="List Item 1"/>
            <ListBoxItem Content="List Item 2"/>
            <ListBoxItem Content="List Item 3"/>
            <ListBoxItem Content="List Item 4"/>
        </ListBox>
    </Grid>
</Window> 
```

我尝试在 ContextMenu 中的 ContextMenu 和 MenuItem 上设置 Focusable="False"，然后我可以右键单击 ListBoxItem 并突出显示 MenuItem，而 ListBoxItem 不会失去焦点。但是，如果我尝试使用向上和向下箭头导航 ListBoxItems，则列表框中的当前项目会更改，因为列表框仍然具有键盘焦点。

我试图模拟 Windows 7 Explorer 的行为，用户可以在列表视图中弹出上下文菜单并使用键盘或鼠标选择菜单项，同时在列表视图中选择的任何项目保持突出显示。

非常感谢任何帮助。

问候，乔尔·戈登。

# ruby - ruby 和 IRB 找到已安装的 gem，但 eclipse 不能

> ID：12349682
> 
> 赞同：3
> 
> 时间：2012-09-10T10:20:51.037
> 
> 标签：ruby, eclipse

我是 Ruby 开发的初学者，所以很抱歉，这是一个面相问题。

在 mac OSX 上，我安装了 ruby​​ 1.9.3，然后通过命令“gem install selenium-webdriver”安装了 gem，然后我将 eclipse 安装为 IDE。

然后我编写了一个需要“selenium-webdriver”gem 的简单类。

```
class Cheese
  require 'rubygems'
  require 'selenium-webdriver'
  ... rest of code class. 
```

我可以使用 irb 或 ruby​​（即 ruby​​ ./path to file/cheese.rb）'从命令行运行 cheese.rb 而不会出现问题，但是通过 eclipse GUI 运行脚本时出现错误：

```
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require': no such file to load -- selenium-webdriver (LoadError)
from /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rubygems/custom_require.rb:31:in `require'
from /Users/bryan/Documents/workspace/New Se Project/Cheese.rb:3 
```

这表明 Eclipse 存在配置问题。请注意，安装的默认 ruby​​ 版本是 rvm - list 中的 1.9.3，但 Eclipse 仍然“绑定”到 1.8。谷歌搜索表明这可能是一个 PATH 问题，但我不熟悉 Mac OSx 上的环境变量。

**如何重新配置​​ Eclipse（或 Aptana）以“查看”已安装的 gem？**

更多信息：

```
Bryans-MacBook-Air:Library bryan$ which ruby
/Users/bryan/.rvm/rubies/ruby-1.9.3-p194/bin/ruby

Bryans-MacBook-Air:Library bryan$ gem env
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2012-04-20 patchlevel 194) [x86_64-darwin11.4.0]
  - INSTALLATION DIRECTORY: /Users/bryan/.rvm/gems/ruby-1.9.3-p194
  - RUBY EXECUTABLE: /Users/bryan/.rvm/rubies/ruby-1.9.3-p194/bin/ruby
  - EXECUTABLE DIRECTORY: /Users/bryan/.rvm/gems/ruby-1.9.3-p194/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - x86_64-darwin-11
  - GEM PATHS:
     - /Users/bryan/.rvm/gems/ruby-1.9.3-p194
     - /Users/bryan/.rvm/gems/ruby-1.9.3-p194@global
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
    - :backtrace => false
    - :bulk_threshold => 1000
 - REMOTE SOURCES:
    - http://rubygems.org/

Bryans-MacBook-Air:Library bryan$  echo $PATH
/Users/bryan/.rvm/gems/ruby-1.9.3-p194/bin:/Users/bryan/.rvm/gems/ruby-1.9.3-p194@global/bin:/Users/bryan/.rvm/rubies/ruby-1.9.3-p194/bin:/Users/bryan/.rvm/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/git/bin 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T13:17:15.160

我遇到了同样的问题。我首先尝试了本教程： http: [//net.tutsplus.com/tutorials/ruby/how-to-install-ruby-on-a-mac/](http://net.tutsplus.com/tutorials/ruby/how-to-install-ruby-on-a-mac/)

这没有帮助。

然后我在超级用户中看到了这个条目：[https](https://superuser.com/questions/154292/ruby-rubygems-why-do-i-always-get-error-messages-when-trying-to-install-gems) ://superuser.com/questions/154292/ruby-rubygems-why-do-i-always-get-error-messages-when-trying-to-install-gems并运行 gem使用 sudo 安装帮助了我。

# security - SSL：不安全的内容 IE

> ID：12349685
> 
> 赞同：1
> 
> 时间：2012-09-10T10:21:06.553
> 
> 标签：security, internet-explorer, ssl

我目前正在为我们的业务建立一个网站，预计该网站可以完美运行，甚至可以追溯到早期的 IE 低至 7。

网址 - [https://secure.marietta.at](https://secure.marietta.at)

该页面不会在 Chrome 中加载任何不安全的内容，但我可以在 IE 中看到有一个 GET 参数发送到[http://marietta.at](http://marietta.at)，然后重定向到[http://en.marietta.at](http://en.marietta.at)

我不知道我在哪里指定了这个。我尝试删除脚本，检查 css，使用 IE 自己的调试工具和 HttpWatch Studio 进行调试。我找不到有问题的代码。

IE 中是否有任何可能触发此警告的特殊陷阱？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:00:14.197

您的 HTML 源代码包含该行

```
<script type="text/javascript" src="js/jquery.min.js"></script> 
```

这使浏览器尝试获取 URL [https://secure.marietta.at/js/jquery.min.js](https://secure.marietta.at/js/jquery.min.js)。但是，此 URL 实际上并没有像您期望的那样返回任何 JavaScript 代码，而是重定向到[http://marietta.at/](http://marietta.at/)。

您稍后从另一个 URL 加载另一个 jQuery 工作副本的事实隐藏了这个问题。

我会建议以下任一解决方案：

*   从页面中删除损坏的 jQuery URL。
*   将 jQuery 的实际副本放在该 URL 上，以便它工作（并从页面中删除另一个，现在是多余的副本）。

我还建议配置您的网络服务器，使其不会从 HTTPS 重定向到 HTTP URL，因为这通常可能违反用户的安全期望。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:40:51.047

在 IE 中加载您的页面并查看源代码。有相当多的硬编码引用`http://en.marietta.at`。似乎您的一些 jQuery 调用可能正在加载“不安全”的内容

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:56:36.783

好的，我已经想通了 - 永远不要加载 JQuery 两次（尤其是来自无效 URI）。我错误地将它留在了导致 SSL 错误`<head>`的标签的正上方。`<body>`删除了一个，它摆脱了错误。

# java - JRE 经常崩溃。我在 Linux 中使用 RXTX 和 Java (1.6) 进行串行通信。例外

> ID：12349687
> 
> 赞同：0
> 
> 时间：2012-09-10T10:21:12.873
> 
> 标签：java, linux, rxtx

```
An unexpected error has been detected by Java Runtime Environment:

SIGSEGV (0xb) at pc=0xb7e50e81, pid=18299, tid=2909465488

 Java VM: Java HotSpot(TM) Client VM (10.0-b22 mixed mode linux-x86)
 Problematic frame:
 C  [libc.so.6+0x68e81]

 An error report file with more information is saved as:
 /home/user/hs_err_pid18299.log

 If you would like to submit a bug report, please visit:
  http://java.sun.com/webapps/bugreport/crash.jsp
 The crash happened outside the Java Virtual Machine in native code.
 See problematic frame for where to report the bug.

Experimental:  JNI_OnLoad called. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:24:58.273

我会尝试通过[使用 hs_err 文件诊断发生的](http://weblogs.java.net/blog/kohsuke/archive/2009/02/crash_course_on.html)情况来获取更多信息。

# clearcase - Cleartool 从具有 rmname 的文件夹中删除签出文件

> ID：12349688
> 
> 赞同：1
> 
> 时间：2012-09-10T10:21:13.557
> 
> 标签：clearcase, cleartool

如何使用 cleartool rmname 从文件夹中删除由其他人签出的文件？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:43:14.043

`cleartool rname -force`仅当文件在另一个分支中签出时才需要命令行。

这允许绕过错误消息：'file' has checkouts

![错误信息](../Images/f940fb108e2333fb106baaa4e20f06d9.png)

在这种情况下，您需要先签出父目录，`rmname`然后不要忘记签入父目录，否则其他人仍然可以看到您的文件。

[在技​​术说明“关于 cleartool rmname 和结帐”](http://www-01.ibm.com/support/docview.wss?uid=swg21232758)中查看更多信息

> 命令行有一个`-force`可用的选项，`cleartool rmname`即使在有结帐时也可以执行命令。
> 
> 当元素至少有一次检出时，此选项会强制从目录中删除名称，但它实际上不会取消元素的任何检出。

# c# - WCF - NetMsmqBinding 与 NetTcpBinding

> ID：12349690
> 
> 赞同：8
> 
> 时间：2012-09-10T10:21:19.790
> 
> 标签：c#, wcf

我正在阅读这篇文章[http://weblogs.asp.net/spano/archive/2007/10/02/choosing-the-right-wcf-binding.aspx](http://weblogs.asp.net/spano/archive/2007/10/02/choosing-the-right-wcf-binding.aspx) 来选择绑定选项。

我对什么意思有一个不寻常的疑问

> 离线或断开交互，选择 NetMsmqBinding

这是否意味着即使服务没有运行仍然客户端使用该服务？

你能分享一些实时的例子吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T10:52:02.553

2个绑定是完全不同的。

*   `NetTcpBinding`可以被认为是一种 MS 专有格式（通常是二进制），在概念上类似于`RPC`（例如，可用于替换`.NET Remoting`）。它是同步的，即客户端和服务器必须同时在线，并且客户端（几乎）立即收到响应。

*   `MSMQ`是微软的一个面向消息的中间件解决方案，它围绕异步队列展开——例如，如果在客户端发送消息时目标服务器处于脱机状态，则消息将在客户端排队，直到服务器重新联机。每个队列只是一种方式，尽管可以通过从服务器到客户端的第二个队列来实现双向通信。发送 WCF MSMQ 消息需要`MSMQ`在客户端上安装服务。队列上的消息可以有一个传递“超时”，否则将被放置在一个适用的死信队列中。

现实世界的例子：

*   我将使用`NetTcpBinding`二进制序列化来满足 Microsoft WCF 客户端和服务器之间的高性能、同步通信需求，例如上传文件、媒体等无用的地方`Xml`（否则，我将`wsHttpBinding`用于同步`Xml`/`SOAP`消息传递）
*   我将使用`MSMQBinding`启用 DTC 来确保 2 个或多个系统（例如财务）之间的可靠消息传递，其中至少一个端点位于 .Net 中，以及“兼容”服务器（不一定`WCF`，例如`BizTalk`，或其他`EAI`集线器或`ESB`总线）有适配器`MSMQ`，例如，之间存在桥梁`MSMQ and MQSeries`）。消息通常采用某种`Xml`格式。

**TL;博士**

> 这是否意味着即使服务没有运行仍然客户端使用该服务

是的。如果`MSMQ`在本地运行，客户端将立即返回~~成功响应~~（表示消息已排队）。然而，这并不意味着该消息已被服务器成功接收。

# css - 使用 Chrome 的开发者工具使用新的全局 CSS 规则实时编辑页面

> ID：12349691
> 
> 赞同：4
> 
> 时间：2012-09-10T10:21:23.307
> 
> 标签：css, google-chrome, live, developer-tools

在[Chrome 开发人员工具](https://developers.google.com/chrome-developer-tools/docs/overview)中检查元素并[编辑应用于该元素的现有 CSS 规则](https://developers.google.com/chrome-developer-tools/docs/elements-styles#styles_edit)很容易，但是如果您想创建一个全新的样式规则怎么办？

就我而言，我想做的是应用以下样式规则：

br {display: none} hr {margin-top: 20px} font {font-size: 18px}

致[敏捷宣言背后的原则，](http://agilemanifesto.org/principles.html)以便我可以直接从浏览器将其打印在一张 A4 纸上。

我已经链接到的关于 Chrome 开发人员工具的官方文档确实有一个关于[添加新规则和属性](https://developers.google.com/chrome-developer-tools/docs/elements-styles#styles_add_new)的部分，但是它已经过时并且在最新版本的 Chrome 中不能像这样工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T10:21:23.307

`Styles`“新样式规则”窗格中现在有一个专用按钮。它看起来像一个加号（+）：

![新样式按钮](../Images/53bb464fa52cc257673454792ce6469f.png)

这将创建一个新的样式块，允许您自己定义选择器：

![新样式按钮的效果](../Images/d838e6e644ceb69b9658b9589884a49f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T22:09:10.977

尝试使用[CSS Brush](https://chrome.google.com/webstore/detail/css-brush/mamnhhinmmdpcipjnhflillmhnogoobj?hl=en-US)，一个 chrome 插件来实时创建 CSS。您可以从页面创建选择器。您可以拥有完整的 CSS 路径或对其进行过滤以制作更短的路径。在实时编辑 CSS 属性时，上下文相关菜单非常有用。您甚至可以打开/关闭属性或选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T13:34:08.113

这对于即时进行少量修改很方便，但是对于需要额外花括号的 CSS3 媒体查询或粘贴整个 CSS 部分进行测试时效果不佳。

解决方案是首先单击**+**按钮添加新样式，然后按 Enter（或单击相邻的空格）。

这将显示一个名为**inspector-stylesheet:1的检查器样式表的链接**

如果单击该链接，它会打开一个完整的实时样式表，您可以在其中编写复杂的规则，也可以将整个外部样式表粘贴到其中进行测试。

# r - 如何在 R 中绘制这个复杂的积分？

> ID：12349700
> 
> 赞同：-3
> 
> 时间：2012-09-10T10:21:41.140
> 
> 标签：r

我目前正在努力解决我想在 R 中绘制的复杂函数。基本上它是分布和其他相关概率的组合，所以我必须修改正态分布。

最终公式将如下所示：

![不可缺少的](../Images/9275e864c964fe2e6b7be29f11f8bd14.png)

我怎样才能在R中绘制它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T11:20:17.957

由于积分是正态分布的累积 PDF（除了缺少的归一化因子），您可以使用 来计算它`pnorm`。

```
sf <- 1
mf <- 0
f <- function(x) 1/(2*sf^2*pi)*exp(-.5*((x-mf)/sf)^2) *
                 (1 - sf*sqrt(2*pi)*pnorm(x, mf, sf))
curve(f, from=-2, to=2) 
```

该`sf*sqrt(2*pi)`因素是为了补偿丢失的归一化。我不是 100% 确定我的数学是正确的，所以也请自己验证。

**编辑：**正如[Ben Bolker](https://stackoverflow.com/users/190277/ben-bolker)指出的，第一部分`f`可以用 进行简化`dnorm`，使代码更具可读性。

```
f <- function(x) dnorm(x, mf, sf)/(sqrt(2*pi)*sf) *
                 (1 - sf*sqrt(2*pi)*pnorm(x, mf, sf)) 
```

![曲线](../Images/ea421c9d7b254538936ec946449f355a.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T11:16:21.093

你有方程，所以用它来计算你定义`stats::integrate`中的定积分项。`f(x)`然后，作为一个例子： `plot(0:1000, f(0:1000),t='l')`.

# xpath - 使用 Selenium Webdriver+Java 的 primefaces selectOneMenu 值

> ID：12349703
> 
> 赞同：6
> 
> 时间：2012-09-10T10:21:57.770
> 
> 标签：xpath, jsf-2, selenium, primefaces

我需要使用 webdriver 为 primefaces 或 JSF selectOneMenu 设置值。

我可以使用索引来实现这一点，但无法直接设置值。

以下代码与索引一起使用：

```
driver.findElement(By.name("LNSYNDGLP0_SL_CCY_editableInput")).click();
driver.findElement(By.xpath("//div[@id='LNSYNDGLP0_SL_CCY_panel']/ul/li[7]")).click(); 
```

有人可以建议一种方法来使用 Selenium webdriver 来实现 selectonemenu 的设置值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T13:03:53.777

您可以使用`[text()='item value']`XPath 中的选择器通过其节点值来选择元素。

```
driver.findElement(By.xpath("//div[@id='LNSYNDGLP0_SL_CCY_panel']/ul/li[text()='item value']")).click(); 
```

# codeigniter - Codeigniter 删除 index.php

> ID：12349704
> 
> 赞同：0
> 
> 时间：2012-09-10T10:22:00.920
> 
> 标签：codeigniter

我正在使用 CodeIgniter 2.1.1 我的网站结构就像

```
mysite/
    application/
        controllers/
            backend/
                welcome.php

            welcome.php

        views/
            backend/
            frontend/

        .htaccess 
```

我可以访问后端

```
http://localhost/mysite/index.php/backend 
```

但我想要

```
http://localhost/mysite/backend 
```

同样对于我想要的前端

```
http://localhost/mysite/ 
```

在 config/config.php 我设置

```
$config['base_url'] = '';
$config['index_page'] = ''; 
```

并在 .htaccess 中试验许多代码，最新的是

```
<IfModule mod_rewrite.c>
    RewriteEngine On

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
    RewriteCond %{REQUEST_URI} ^system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
    RewriteCond %{REQUEST_URI} ^application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
    RewriteCond %{REQUEST_FILENAME} !-f 
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ /index.php?/$1 [L]
</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:24:27.080

您`.htaccess`应该位于站点的根目录中，比`application`文件夹高一级。

# c# - 我们如何访问已安装打印机的属性

> ID：12349706
> 
> 赞同：1
> 
> 时间：2012-09-10T10:22:01.733
> 
> 标签：c#

我们如何访问已安装打印机的属性

开始->打印机和传真->右键单击打印机名称->该打印机的属性对话框

使用 C# 代码更改打印机设置，就像我们使用上述过程一样。我想通过给出打印机的名称直接打开属性对话框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:37:55.793

尝试[如何](http://www.codeproject.com/Articles/14379/How-to-show-a-popup-window-for-printer-properties)从 CodeProject 显示打印机属性教程的弹出窗口。

如果可以让用户看到所有打印机的列表，您可以使用[`System.Windows.Forms.PrintDialog`](http://msdn.microsoft.com/en-us/library/system.windows.forms.printdialog.aspx).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:28:41.433

您可以使用 DocumentProperties Win API 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T23:38:40.487

要直接打开属性对话框，可以[使用 printui.dll](http://www.autoitscript.com/forum/topic/37367-how-to-access-to-printer-properties-dialog-box-directly/)：

```
rundll32 printui.dll,PrintUIEntry /p /n "printer name" 
```

在 c# 中，这将是：

```
Process.Start("rundll32", "printui.dll,PrintUIEntry /p /n \"printer name\""); 
```

# regex - 正则表达式的否定

> ID：12349710
> 
> 赞同：3
> 
> 时间：2012-09-10T10:22:24.540
> 
> 标签：regex, computation-theory

我不知道它是怎么称呼的：否定、互补或倒置。这个概念是这样的。例如有字母“ab”

```
R = 'a'
!R = the regexp that matche everyhting exept what R matches 
```

在这个简单的例子中，它应该是这样的

```
!R = 'b*|[ab][ab]+' 
```

这样的正则表达式如何调用？我记得在我的研究中，有一种计算方法，但它很复杂，而且通常很难手工制作。是否有一个不错的在线工具（或常规软件）可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-11T23:48:01.313

jbo5112 的回答提供了很好的实际帮助。但是，在理论上：正则表达式对应于正则语言，因此您正在寻找的术语是补充。

要补充正则表达式：

1.  转换为等效的 NFA。这是一个[众所周知的定义过程。](http://www.cse.msu.edu/~torng/360Book/RegLang/RtoN/)
2.  [通过powerset 构造](http://en.wikipedia.org/wiki/Powerset_construction)将 NFA 转换为 DFA
3.  通过使接受状态不接受来补充 DFA，反之亦然。
4.  [将 DFA 转换](http://lambda.uta.edu/cse5317/spring01/notes/node9.html)为正则表达式。

您现在有了原始正则表达式的补码！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-19T05:59:56.223

如果您所做的只是搜索，那么一些用于正则表达式的软件/语言可以否定内置的匹配。例如，使用 grep 您可以使用“-v”选项来获取不匹配的行和我见过的 SQL 变体允许您使用“非”限定符来否定匹配。

一些/大多数/所有正则表达式方言支持的另一个选项是使用“负前瞻”。您可能需要查看您的特定语法，但它是一个有趣的工具，非常值得一读。通常它是这样的：如果`R='<regex>'`，那么`Negative_of_R='(?!<regex>)'`。不幸的是，它会随着你的语言特性而变化（例如 vim 使用`\(<regex>\)\@!`）。

提醒一句：如果你不小心，否定的正则表达式会比你预期的更多。如果您有文本`This doesn't match 'mystring'.`并搜索`(?!mystring)`，那么它将匹配除 mystring 中的 'm' 之外的所有内容。

# facebook - Facebook 登录社交插件停止工作

> ID：12349712
> 
> 赞同：2
> 
> 时间：2012-09-10T10:22:38.120
> 
> 标签：facebook, xfbml, facebook-login

上周突然[XFBML 登录按钮](https://developers.facebook.com/docs/reference/plugins/login/)在我们的网站上停止工作。它没有显示一个漂亮的 FB 登录按钮，而是显示按钮文本。在 Firebug 中，我收到一个错误：

类型错误：k.root 为空

奇怪的是，问题出现在我们的生产环境、测试环境和我自己的开发环境。生产环境已经有一段时间没有更新或更改了，所以这不是我们的代码更改。所有三个环境还连接到单独的 Facebook 应用程序，每个应用程序都有不同的 appID，因此它也不会是 Facebook 应用程序的（意外）配置错误。

有谁知道这是否可能是 Facebook 的问题？他们确实在 9 月 5 日进行了兼容性破坏更新，但据我所知，这些更改与登录按钮无关。

有谁知道这可能是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T17:31:07.453

我上周也开始面对这个问题。我设法使用以下选项之一解决：

1）应用程序的“应用程序域”配置错误（它应该是域名而不是完整的 URL）：来源：[https ://developers.facebook.com/bugs/225729134220754](https://developers.facebook.com/bugs/225729134220754)

或者

2）只需将div（包含类fb-login-button）替换为常规按钮即可调用FB.login，所有事情都会重新开始工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T01:12:32.050

如果您在定义 document.body 之前调用 FB.init（如在 HEAD 中），则会出现此错误，现在已解决。

# colors - colorpicker 出现在我的 ajax 控件工具包模式弹出窗口后面

> ID：12349718
> 
> 赞同：0
> 
> 时间：2012-09-10T10:23:01.157
> 
> 标签：colors, popup, ajaxcontroltoolkit, picker, behind

我的模态CSS设置是：

```
.ModalWindow {
  background-color: #FFFFFF;
  position: absolute;
  top: -1000px;
  display: block;
  z-index: 1000;
  border: 0px solid #000000;
  border-radius: 6px;
} 
```

我在 y 模态弹出窗口中有一个文本框，颜色选择器就在它旁边。但是当我单击颜色选择器时，它会出现在模式弹出窗口的后面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:45:08.277

添加以下css样式规则：`.ajax__colorPicker_container { z-index: 1001 !important; }`或将类的`z-index`属性更改`.ModalWindow`为999；

# javascript - 如何使用 Greasemonkey 检测页面中特定链接的点击？

> ID：12349721
> 
> 赞同：1
> 
> 时间：2012-09-10T10:23:13.650
> 
> 标签：javascript, hyperlink, click, greasemonkey

好的...我的一个虚拟宠物网站已关闭，所以我决定为另一个网站调整 Greasemonkey 脚本...当您找到一个鸡蛋时，原始脚本只会弹出一个警报，所以您不会点击它 - 我想计算我遇到了多少鸡蛋很简单。2小时后，我终于找到了一种方法来保持过去页面重新加载的变量 - 成功！然后我决定我要跟踪我走了多少“步骤”...... ARGGGG！！！！应该很简单，但不是！
在页面上有三个可能的探索链接可供单击（显示图像而不是链接）。3 小时后，我找到了事件侦听器，并且当我点击页面上的任何位置时可以弹出警报，但是如何仅检查这 3 个链接中的 1 个的点击？所有 3 个链接都具有相同的一般格式： `http://unicreatures.com/explore.php?area=***&id=***&key=****`其中`*`是可变的。

目标页面`http://unicreatures.com/explore.php?area=grassland`应该可以在没有帐户的情况下访问，如果没有让我知道，我会获取源代码。

```
// ==UserScript==
// @name Unicreatures Egg pop-up
// @namespace Unicreatures Egg pop-up
// @description Unicreatures Egg pop-up
// @include http://unicreatures.com/explore.php*
// @include http://www.unicreatures.com/explore.php*
// ==/UserScript==

var y = document.body.innerHTML;

//document.addEventListener('click', function(){alert('page clicked')}, true);

if(y.indexOf("You find a Noble")> 0)
{
alert('Noble Egg Alert');
}

if(y.indexOf("You find an Exalted")> 0)
{
localStorage.exaltedEggCount=Number(localStorage.exaltedEggCount)+1;
alert('Exalted Egg Alert '+localStorage.exaltedEggCount);
}

if(y.indexOf("egg nearby!")> 0)
{
localStorage.eggCount=Number(localStorage.eggCount)+1;

alert('Egg Alert '+localStorage.eggCount);
} 
```

我确实意识到 if 语句的编写方式是，如果前 2 个触发器中的任何一个触发器（我没有写那部分，只是使警报唯一），我会收到双重警报......我现在很好。我确实阅读了有关获取元素 ID 或其他内容的内容，但我找不到任何足以让我“获取”的内容。
请仅使用javascript，不要使用jquery ...我目前仍然几乎没有使用javascript ...请解释答案，以便我了解某些工作原理-我不只是想要让我回到类似问题的代码片段，因为我不明白为什么要使用一些代码。

还有一个问题，除非我应该为它打开另一个问题......当你找到一个鸡蛋时，文字会说`You find an Exalted *** egg nearby`or `You find a *** egg nearby`。有没有办法`***`从页面中获取部分？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:44:27.723

您可以将事件处理程序添加到页面上的特定元素。如果元素有一个`id`属性，这很容易：

```
var element = document.getElementById( 'whatever' );

element.addEventListener( 'click', function () {
    alert( 'element clicked' );
}, true ); 
```

这会将事件侦听器添加到 ID 为“whatever”的元素。

如果元素没有 ID 属性，则您需要更有创意。这是一种方法：

```
var links = document.getElementsByTagName( 'a' );

for ( var i = 0; i < links.length; i++ ) {
    var link = links[i];
    if ( /area=grassland/.test( link.href ) ) {
        link.addEventListener( 'click', function () {
             alert( 'grassland link clicked' );
        }, true );
    }
} 
```

这`/area=grassland/`是一个正则[表达式](http://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)，它匹配包含“area=grassland”作为子字符串的字符串。（如果需要，您可以[使用正则表达式做更多事情](http://www.javascriptkit.com/javatutors/re.shtml)。）我们针对`a`页面上的每个链接（元素）对其进行测试，并将点击处理程序添加到`href`属性与正则表达式匹配的那些。

`link.textContent`根据需要，如果您希望与之匹配，您可以使用 获取链接中的文本。但是，它不适用于图像链接。（但你总能找到，比如说，链接中的第一个图像标签，`link.getElementsByTagName( 'img' )[0]`并从那里开始工作。）

* * *

至于你的第二个问题，正则表达式也是你的朋友：

```
var regexp = /You find an? (Exalted )?(.*?) egg nearby/;
var match = regexp.exec( document.body.textContent );
if ( match ) {
    if ( match[1] ) {
        alert( "Exalted egg found: " + match[2] );
    } else {
        alert( "Normal egg found: " + match[2] );
    }
} 
```

请参阅我上面给出的链接，了解该正则表达式的工作原理以及如何修改它以更好地满足您的需求。

（Ps.警告：我实际上并没有测试上面的任何代码，因为我不想为此在游戏网站上创建一个试用帐户。我希望它是正确的，但其中可能存在错误或拼写错误.)

# php - 在不安装任何数据库的情况下将具有 IP 地址的大型数据库转换为国家/地区的最有效方法是什么？

> ID：12349727
> 
> 赞同：0
> 
> 时间：2012-09-10T10:23:22.000
> 
> 标签：php, database, ip

我想知道有多少游客来自我的国家。

在不安装任何数据库的情况下将具有 IP 地址的大型数据库转换为国家/地区的最有效方法是什么？或者有没有其他解决方案？

我使用了这个 api 但服务器响应太长了......

```
 foreach ($loc as $row) {
        $ip = $row->last_ip;

         $country = file_get_contents('http://api.hostip.info/country.php?ip='.$ip);
        if ($country == 'RO') {
            $num++;
        } 
     } 
```

cURL 可以帮助我解决服务器响应问题吗？如果是，我该如何使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:31:17.703

我会去测试运行良好的 Geo::IP。
[http://metacpan.org/pod/Geo::IP](http://metacpan.org/pod/Geo::IP)

# python - ElementTree 和 unicode

> ID：12349728
> 
> 赞同：21
> 
> 时间：2012-09-10T10:23:25.667
> 
> 标签：python, unicode, encoding, utf-8, elementtree

我在 xml 文件中有这个字符：

```
<data>
  <products>
      <color>fumè</color>
  </product>
</data> 
```

我尝试使用以下代码生成 ElementTree 的实例：

```
string_data = open('file.xml')
x = ElementTree.fromstring(unicode(string_data.encode('utf-8'))) 
```

我收到以下错误：

```
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe8' in position 185: ordinal not in range(128) 
```

*（注意：位置不准确，我从一个较大的 xml 中取样）。*

如何解决？谢谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-12-29T13:00:20.067

您可能在使用[Requests (HTTP for Humans)](http://docs.python-requests.org/en/latest/index.html)时偶然发现了这个问题`response.text`，默认情况下会解码响应，您可以使用它`response.content`来获取未解码的数据，因此 ElementTree 可以自行解码。请记住使用正确的编码。

更多信息：[http ://docs.python-requests.org/en/latest/user/quickstart/#response-content](http://docs.python-requests.org/en/latest/user/quickstart/#response-content)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-10T10:30:52.070

您需要将utf-8 字符串**解码为 un​​icode 对象。**所以

```
string_data.encode('utf-8') 
```

应该

```
string_data.decode('utf-8') 
```

假设`string_data`实际上是一个 utf-8 字符串。

总结一下：要从 unicode 对象中获取 utf-8 字符串，您可以对 unicode**进行编码**（使用 utf-8 编码），并将字符串转换为 unicode 对象，您可以使用相应的编码对字符串进行解码**。**

有关这些概念的更多详细信息，我建议阅读[每个软件开发人员绝对、肯定必须了解 Unicode 和字符集](http://www.joelonsoftware.com/articles/Unicode.html)（不是特定于 Python）的绝对最小值。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-09-10T10:35:18.630

您*无需*为 ElementTree 解码 XML 即可工作。XML 带有自己的编码信息（默认为 UTF-8），ElementTree 为您完成工作，输出 unicode：

```
>>> data = '''\
... <data>
...   <products>
...       <color>fumè</color>
...   </products>
... </data>
... '''
>>> x = ElementTree.fromstring(data)
>>> x[0][0].text
u'fum\xe8' 
```

如果您的数据包含在文件（类似）对象中，只需将文件名或文件对象直接传递给`ElementTree.parse()`函数：

```
x = ElementTree.parse('file.xml') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-10T10:34:52.160

您是否尝试过使用该`parse`功能，而不是打开文件......（顺便说一句，它需要`.read()`在它之后`.fromstring()`才能工作......）

```
import xml.etree.ElementTree as ET

tree = ET.parse('file.xml')
root = tree.getroot()
# etc... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-10T10:28:56.943

您的文件很可能不是 UTF-8。`è`例如，字符可以来自其他编码`latin-1`。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-03-10T10:07:35.070

函数`open()`不返回`string`. 而是使用`open('file.xml').read()`.

# eclipse - eclipse中的Liquibase自动完成（maven项目）

> ID：12349738
> 
> 赞同：0
> 
> 时间：2012-09-10T10:23:59.700
> 
> 标签：eclipse, maven, liquibase

我正在尝试对 liquibase 进行自动完成。

我的项目适用于 liquibase，但无法完成。

在从 liquibase 下载 javadoc/sources 之后，我很确定它上周确实有效。

现在，每当我尝试让 eclipse 自动完成一个 changelog xml 时，我都可以看到：

> 加载参考语法（睡眠）。

然后它消失了，自动完成功能不起作用。

这是一个示例变更集标头：

```
<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
     xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

    <!--  This changelog is used to validate that liquibase works -->
    <changeSet id="1" author="majoros" >
    </changeSet>

</databaseChangeLog> 
```

**编辑：**很可能是代理问题。我短暂地完全连接到互联网（不要问......），它现在正在工作。尽管如此，我的同事也应该让它工作（我想理解）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T12:29:26.823

Eclipse 应该能够对具有描述符（或任何名称）的 XML 文件使用自动完成功能。

[Liquibase 的 wiki](http://www.liquibase.org/manual/databasechangelog)有一些数据库更改集的示例。这些都包括对 xsd 文件的引用。这些提供有关 XML 结构的信息。

1.9 的示例 XML：

```
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog/1.9"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog/1.9
        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-1.9.xsd">
</databaseChangeLog> 
```

2.0 的示例 XML：

```
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd
    http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">
</databaseChangeLog> 
```

Eclipse 从 Web 获取 xsd 文件，因此需要 Internet 连接。如果您使用代理，则必须将 Eclipse 配置为使用代理。这也许可以解释为什么它一开始不起作用。

在 Eclipse 中配置代理：

窗口 > 首选项 > 常规 > 网络连接

# java - 如何在 Android 中将 JSON 响应转换为字符串？

> ID：12349742
> 
> 赞同：-1
> 
> 时间：2012-09-10T10:24:13.343
> 
> 标签：java, android, json, web-services, arrays

> **可能重复：**
> [Android/Java 中的 JSON 数组迭代](https://stackoverflow.com/questions/3408985/json-array-iteration-in-android-java)

我正在开发一个使用以下[JSONWeb 服务代码](http://lukencode.com/2010/04/27/calling-web-services-in-android-using-httpclient/)的应用程序。一切正常，并以 JSON 数组的形式获得响应。我不知道如何将 JSON 数组转换为字符串。我得到的响应是以下模式..

Json 响应

```
[
{
     "Id":101,
     "Movie":"xxxxx",
     "Available":
        [             
            {
              "date":"31-08-2012",
              "timings":
                  [
                   "10:15",
                   "10:30",
                   "10:40"
                   ]
            },
            {
                "date":"1-09-2012",
                "timings":
                    [
                     "10:15",
                     "10:30",
                     "10:40"
                     ]
            }
        ]
}
] 
```

这是我得到的回应。谁能建议我如何将以下 Json 响应转换为 android 中的字符串，我想在 android 本机的 listview 中显示该数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:32:48.463

检查[链接](http://www.helloandroid.com/tutorials/connecting-mysql-database)

它显示了与服务器通信并以 Json 格式获取响应的完整示例。

虽然在这个 PHP 中使用了 MySql，但我猜你得到的 json 响应对于所有语言都是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:26:48.017

查看此示例并根据您的需要进行转换

ps：一个json数组是以[开头并以]结尾的一个json对象以{开头并以}结尾，所以在你的情况下可用的是一个json数组，它的第一个对象包含一个json字符串日期和另一个json数组计时

```
JSONArray ja =jso.getJSONArray("Available");

            for (int i = 0; i < ja.length(); i++) {
                JSONObject jobj=ja.getJSONObject(i);
                xyz[i]=jobj.getString("date");
                abcd[i]=jobj.getJSONArray("timings").tostring;

            }

            } 
```

编辑：

```
 ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
   JSONParser jParser = new JSONParser(); 
   JSONArray json = jParser.getJSONFromUrl(url);
   try { for (int i=0; i< json.length(); i++) {
    JSONObject details = json.getJSONObject(i);
    String id = details.getString("Id");
    String name = details.getString("Name");
    HashMap<String, String> map = new HashMap<String, String>(); 
   map.put(TAG_ID, id); map.put(TAG_NAME, name);

    contactList.add(map)
    JSONArray ja=details.getJSONArray("Available");

        for (int i = 0; i < ja.length(); i++) {
            JSONObject jobj=ja.getJSONObject(i);
           String a =jobj.getString("date");
          String b   =jobj.getJSONArray("timings").tostring;
    HashMap<String, String> map2 = new HashMap<String, String>(); 
   map2.put("a", a); map2.put("b", b);
    contactList.add(map2)

        }

     } 
```

# regex - 正则表达式不允许字符串有任何特殊字符，除了+加号和字母

> ID：12349744
> 
> 赞同：0
> 
> 时间：2012-09-10T10:24:20.517
> 
> 标签：regex

我必须验证一个描述电话号码的简单文本。如果用户输入，它应该只允许数字和加号。不允许使用字母、其他特殊字符和空格。我需要一个带有正则表达式的 java 脚本来仅匹配 + 和数字。请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:27:03.997

这是一个基本的，它将接受一个可选的 + 和一个或多个数字 \+?[0-9]+

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:28:06.443

这应该这样做：

```
var myRegex = /^[0-9+]+$/; 
```

如果您只想`+`在开始时允许，请尝试以下操作：

```
var myRegex = /^\+?\d+$/; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:29:26.610

电话号码因国家/地区而异。所以您需要非常具体地了解国家和电话号码模式。例如，长度、区号、电话号码等。之后可以设计正则表达式。

# php - 评估代码不起作用

> ID：12349745
> 
> 赞同：0
> 
> 时间：2012-09-10T10:24:23.517
> 
> 标签：php, eval

我尝试制作 e eval 代码，但出了点问题，我找不到错误。

我有这个：

> 解析错误：语法错误，/Applications/XAMPP/xamppfiles/htdocs/classes/databasehandler.php(57) 中的意外“，”：第 1 行的 eval() 代码

这是代码：

```
eval("$s->bind_param('".$binds."', ".$values.");");

$BINDS ARE: ss
$VALUES ARE: 'testing','hej123' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:27:50.413

你为什么用`eval()`这个？它可以实现如下：

```
$binds = 'si';
$values = array('a string', 4609);
$args = array($binds) + $values;
call_user_func_array(array($s, 'bind_param'), $args); 
```

上面的代码更快（不调用新的执行上下文），更安全（变量直接传递，没有转义的假设）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:29:10.170

双引号由 PHP 解析，因此`eval("$s->bind_param...");`等于`eval($s."->bind_param...');`. 用单引号替换双引号，您的***EVIL***代码将起作用。

If you're sure your values are delimited by comma's why not create the array yourself?

```
$values = explode(',',preg_replace('/[\'"]/g','',$values)); 
```

Or something like that?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:27:53.277

不要使用 Eval，当然也不要用于将参数绑定到查询这样琐碎的事情！

# macos - 更改 VirtualBox 的 MacOS X 访客屏幕分辨率

> ID：12349757
> 
> 赞同：7
> 
> 时间：2012-09-10T10:25:18.557
> 
> 标签：macos, virtual-machine, virtualbox

我已经尝试了我在互联网上找到的所有替代方案和资源来改变我的 MacOS X 客户机的屏幕分辨率。我有最新的 VirtualBox 版本（4.1.22），我有 MacOS X 10.6.3 Snow Leopard 在 vm 来宾中运行。

一些对我不起作用的解决方案是：

*   调整虚拟机设置：

在 .vbox 文件中添加和，或者运行这两个命令：

```
vboxmanage setextradata "MAC OS X" "CustomVideoMode1" "1360x768x32"
vboxmanage setextradata "MAC OS X" "GUI/CustomVideoMode1" "1360x768x32" 
```

*   编辑来宾操作系统引导配置：

使用以下几行修改 /Library/Preferences/SystemConfiguration/com.apple.boot.plist：

```
<key>Kernel Flags</key>
<string>"Graphics Mode"="1360x768x32"</string>
<key>Graphics Mode</key>
<string>1360x768x32</string> 
```

任何其他建议，我缺少的东西。

提前致谢，

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-10T22:56:43.610

我也在和这个作斗争。我[在某些地方](http://www.sysprobs.com/increase-mac-os-virtual-machine-screen-resolution-virtualbox-vmware-player)看到了第三个选项：除了`CustomVideoMode1`有一个`VBoxInternal2/EfiGopMode`参数可以设置为六个固定分辨率之一：

`VBoxManage setextradata "vmname" VBoxInternal2/EfiGopMode 3`

EfiGopMode 的可能值为：

```
0: 640x480  
1: 800x600  
2: 1024x768  
3: 1280x1024 
4: 1440x900
5: 1920x1200 
```

我自己还没有尝试过这种方法，因为我想去 1600x1200 ......

# android - Android SlidingDrawer 用自定义动画关闭

> ID：12349759
> 
> 赞同：2
> 
> 时间：2012-09-10T10:25:23.487
> 
> 标签：android, animation, slidingdrawer

我想以编程方式用动画关闭slidingDrawer。我有以下代码：

```
SliderAnimationDown = new TranslateAnimation(0, 0, Animation.RELATIVE_TO_SELF, sliderHeight - handleHeight);
SliderAnimationDown.setDuration(1000);

SliderAnimationDown.setAnimationListener(new AnimationListener(
{
    public void onAnimationEnd(Animation animation) 
    {
        slide.close();
    }
});

slide.startAnimation(SliderAnimationDown); 
```

它正在工作，但您可以看到闪烁（在动画结束之后和幻灯片实际关闭之前）。我尝试调用 slide.setAnimation(SliderAnimationDown) 然后 slide.animateClose() - 但它什么也没做。我应该怎么做才能在 SlidingDrawer 关闭时执行自定义动画？

# ssas - 如何复用固定数据的处理结果

> ID：12349765
> 
> 赞同：0
> 
> 时间：2012-09-10T10:25:54.837
> 
> 标签：ssas, olap

在金融系统中，每年的交易都存储在一个单独的表中。因此，系统中有 Transactions2007、Transactions2008、...、Transactions2012 表。它们都有相同的桌子设计。往年表格中的数据永远不会改变。但是当前年份的数据每天都会更新。我想在所有年份的表格的联合上建立一个立方体。问题是如何防止 SSAS 重新处理前几年。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T23:01:16.887

处理多维数据集时，您可以将多维数据集进程选项设置为增量处理，然后在配置对话框中，您可以选择一个查询以仅从最近的表中选择数据。这是更多信息的[链接](http://bennyaustin.wordpress.com/2011/10/29/ssas-process-incremental/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T16:29:34.560

我通过对多维数据集（按时间维度）进行分区并仅处理最近的分区来处理它。

# sql - 如何以字符串格式检索 sql server SID？

> ID：12349768
> 
> 赞同：2
> 
> 时间：2012-09-10T10:26:06.317
> 
> 标签：sql, bytearray, converter, sid

您好，自从今天早上尝试使用 SQl 查询检索我的计算机的 SID 以来，我就崩溃了。我只能检索字节数组中的 SID！

是否可以通过强制转换检索字符串？我试过但不可能。

这是我的 sql 查询

```
SqlDataSource data = new SqlDataSource(
System.Configuration.ConfigurationManager.ConnectionStrings["myDbConnection"].ToString(), 
"Select sid FROM sys.server_principals where Name='##MS_SQLAuthenticatorCertificate##'");

DataView viewData = data.Select(DataSourceSelectArguments.Empty) as DataView;

//Get S.I.D in byte
byte[] tabSid = (byte[]) viewData[0][0] ;
//Get S.I.D in String format (not working)
string varSid = viewData[0][0].toString() ; 
```

非常感谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T10:46:02.027

如果你这样做：

```
SELECT master.dbo.fn_varbintohexstr(sid)  AS 'SID'
 FROM sys.server_principals where Name='##MS_SQLAuthenticatorCertificate##' 
```

然后 .ToString() 将正常工作

# java - Querydsl 更新子句填充跳过 bean 空值属性

> ID：12349781
> 
> 赞同：3
> 
> 时间：2012-09-10T10:26:48.847
> 
> 标签：java, querydsl

在使用带有 bean 的空值属性的填充调用时，我遇到了 SQLUpdateClause 的问题。它只是从生成的更新 SQL 中跳过空值属性，而不是将相应的字段设置为 NULL。

例子：

```
public class Bean {

    private Long id;

    private String value;

    private String value2;

    ...
}

Bean bean = ...

bean.setValue(null);
bean.setValue("value2");

SQLUpdateClause update = new SQLUpdateClause(connection, dialect, qBean);

update.populate(bean).where(qBean.id.eq(...)).execute(); 
```

将产生 SQL：

```
update bean set value2 = 'value2' where bean.id = ... 
```

而不是想要的：

```
update bean set value = null, value2 = 'value2' where bean.id = ... 
```

这里有什么帮助吗？... 请

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T11:02:50.577

检查querydsl源代码时，找到了解决方案：

```
...
update.populate(bean, DefaultMapper.WITH_NULL_BINDINGS)
      .where(qBean.id.eq(...))
      .execute();
... 
```

希望它可以帮助某人

# c# - c# - ListBox + type item name 选择它？

> ID：12349783
> 
> 赞同：-2
> 
> 时间：2012-09-10T10:27:07.160
> 
> 标签：c#

我是一个学习 c# 的初学者，我正在玩 Windows 窗体。

我正在使用 Microsoft.visualbasic.Compatibility.FileListbox，我希望能够键入要访问的项目的名称。即选择它。

我在表单上启用了“KeyPreview”，但这对我不起作用。

你能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:39:29.223

您必须添加一些代码才能做到这一点。只需转到 ListBox 的事件面板，双击 KeyUp 事件并将您的搜索代码添加到将自动生成的函数中。通常，您将搜索 ListBox 的 Items 集合中的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:31:25.627

不确定我是否理解你的问题。您想向列表中添加一个元素吗？如果是这样，你可以试试这个：

```
String name = "MyName"; 
listBox.Items.Add(name); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T11:14:20.760

我假设您想根据您作为输入获得的字符串在 listBox 中选择一个项目。我会做这样的事情：

```
String name;

//Code....

for (int i = 0; i < listBox.Items.Count; i++)
    {
     if(name.Equals(listBox.Items[i].Text)){
        listbox.setSelected(i,true);
     }
 } 
```

# python - 为什么 Django 使用元组进行设置而不是列表？

> ID：12349784
> 
> 赞同：19
> 
> 时间：2012-09-10T10:27:08.613
> 
> 标签：python, django, list, tuples, semantics

引用[这个答案](https://stackoverflow.com/questions/626759/whats-the-difference-between-list-and-tuples-in-python)：

> 除了元组是不可变的之外，还有一个语义区别应该指导它们的使用。元组是异构数据结构（即它们的条目具有不同的含义），而列表是同构序列。元组有结构，列表有顺序。

这对我来说很有意义。但是为什么 Django 使用元组而不是列表进行设置呢？例子：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
) 
```

这（以及所有其他设置）在语义上不是列表的完美案例吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-03-08T19:08:00.717

这在 Django 1.9 中有所改变：

> ## 元组的默认设置现在是列表
> 
> **django.conf.global_settings**中的默认设置是列表和元组的组合。以前是元组的所有设置现在都是列表。

[https://docs.djangoproject.com/en/1.9/releases/1.9/#default-settings-that-were-tuples-are-now-lists](https://docs.djangoproject.com/en/1.9/releases/1.9/#default-settings-that-were-tuples-are-now-lists)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-11T05:00:43.860

根据 user1474837 在这个问题上对[Django 票证](https://code.djangoproject.com/ticket/8846)的有用链接，很明显，元组用于向后兼容从一开始就完成设置的方式，因为相信元组比列表更快，所以使用元组。（根据票务讨论中引用的数据，它们是，但只是非常轻微。）

具体来说，Django 文档曾经说过：

> 对于序列的设置，使用元组而不是列表。这纯粹是为了性能。

在讨论的后面，一位 Django 核心开发人员指出：

> 我们当然不会从元组转移到那里的列表，因为它会破坏已经期望事物是元组的现有代码。但是，我将删除性能说明，因为它不值得吓唬人。

请注意原始文档中的“纯粹”一词——如果从表面上看，这意味着表明设置是不可变的，这*不是*使用元组的原因。另请注意，票务讨论中的某些人将设置称为“某种”不可变的，因此甚至不清楚设置实际上是不可变的。

PS出于兴趣，请注意票务解决方案以：

> 更改了“编写您自己的设置”建议以提及 Django 使用元组，但未将其作为建议。这可能会阻止无休止的元组与列表辩论。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-11T04:03:33.783

我认为部分原因是元组是只读的，它更安全，更适合设置。

# java - 将 latin1 编码为 UTF8 失败

> ID：12349786
> 
> 赞同：1
> 
> 时间：2012-09-10T10:27:27.257
> 
> 标签：java, encoding, character-encoding, websphere

我们有一个用于导入的测试文件（csv），编码为 latin1（如 vim 报告）。

我们已将 websphere 中的 file.encoding 和 client.file.encoding 更改为 UTF-8。

现在同一个文件在 sun.io.ByteToCharUTF8.convert 中被“MalformedInputException”拒绝

为什么？

我假设 UTF8 是 latin1 的超集。所以也许有些字节可能会被误解，但不应该有例外，因为我们扩大了字符集？

这个“MalformedInputException”还有什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:33:32.007

UTF-8 是 ASCII 的超集，但不是 latin-1（它是 ASCII 的不同超集）。0-127 范围内的所有字符在 UTF-8 和 ASCII 中都是相等的，但 Latin-1 还定义了 128-255 范围内的许多字符，这些在解释为 UTF-8 时可能会导致问题。

# erlang - 使用 ssl:send 发送消息时出现问题

> ID：12349788
> 
> 赞同：1
> 
> 时间：2012-09-10T10:27:45.557
> 
> 标签：erlang

我正在编写一些通过 ssl 套接字发送数据的代码。发送部分位于 gen_server:call/3 中，如下所示：

```
handle_call({send, Data}, _From, #state{socket=Socket} = State) ->
    Reply = case ssl:send(Socket, Data) of
       ok ->
          ok;
       {error, Error} ->
          {error, Error}
    end,
    {reply, Reply, State}. 
```

问题是，如果我在连接的另一端终止充当服务器的应用程序，则调用结果为“正常”，但未发送数据。这是否意味着在进程接收到 {ssl_closed, S} 之前，套接字被视为活动的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T07:46:36.650

这是我的错误，数据实际上已发送但从未被对等方恢复。

# wcf - iisreset 后的 WCF 服务调用

> ID：12349789
> 
> 赞同：0
> 
> 时间：2012-09-10T10:27:47.283
> 
> 标签：wcf

iisreset 后，当我调用我的 WCF 服务时，第一次单独需要很长时间。谁能帮忙找出原因。我使用 fiddler 来查找服务调用所花费的时间。iisreset 后的第一次几乎是 55 到 65 秒。随后的呼叫在不到 15 到 20 秒内发出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:49:30.087

这是正常行为。由于内部任务（加载框架、编译一些程序集、验证配置……），第一次调用总是需要将近 15 秒。所有其他呼叫都会更快。如果你想有一个更快的“拳头呼叫”，你必须使用 AppFabric AutoStart 功能。

# css - 删除 span 和 text 元素之间的空格

> ID：12349791
> 
> 赞同：2
> 
> 时间：2012-09-10T10:27:52.007
> 
> 标签：css, text, html

我正在尝试通过添加文本元素 ◥ 使标题的背景颜色看起来像一个矩形气泡。您可以在下面看到背景形状的跨区文本和 ◥ 的样式。但这会在边框底部和 ◥ 之间创建一个空白区域，我希望两者对齐以便看起来像一个对话气泡。

行动失败的形象。 [http://i.imgur.com/1T09F.png](http://i.imgur.com/1T09F.png)

```
{block:Link}      
    <h1><span class="Headers"><a href="{URL}" {Target}>{Name} ☞&lt;/a></span>
        <div class="triangle">◥&lt;/div>
    </h1>
{block:Description}{Description}{/block:Description}    
{/block:Link}

.triangle{
    margin-left: 10px;
    font-size: 35px;
    color: #123033;
}
span.Headers{
    display: block;
    background-color: #123033;
    padding: 8px
} 
```

我尝试了添加字体大小为 0 的父组的技巧，但没有奏效。也没有将页眉的边距设置为 0。将 ◥ div 放在同一行也没有做任何事情。我花了大约一个小时查看其他问题，看看我能做什么，但我找不到解决方案，但如果我错过了一些明显的事情，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:09:06.093

使用文本来创建效果是不可靠的。不同的设备会以不同的方式呈现它，这不是你想要的。

在您的情况下，最好使用相同颜色的图像，将其放在`<div/>`标题下方，确保它们相互接触。然后，在左侧添加一些填充，就像您对`.triangle`样式所做的那样。

我创建了一个图像供您使用：[在此处获取](http://ge.tt/4vM16SN/v/0?c)

总而言之，您的标记将如下所示：

HTML：

```
{block:Link}   
    <div class="header">
        <h1><a href="{URL}" {Target}>{Name} ☞&lt;/a></h1>
        <div class="triangle"></div>
    </div>  
{block:Description}{Description}{/block:Description}    
{/block:Link} 
```

CSS：

```
div.header > h1 {
    background-color: #123033;
    padding: 8px
}

div.header > div.triangle {
    background: url('Arrow.png') top left no-repeat;
    height: 50px;
    padding-left: 10px
} 
```

如果这对你有用，请告诉我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:05:55.713

如果您能够使用生成的内容（我想这取决于您网站的用户），那么我建议（出于演示目的，使用稍微修改的 HTML）：

```
<h1><span class="Headers"><a href="#something">a name</a></span></h1>​ 
```

下面的 CSS：

```
h1 {
    display: block;
    position: relative;
    background-color: #ffa;
    padding: 0.5em;
}

h1::after {
    content: '';
    border: 1em solid #ffa;
    position: absolute;
    top: 100%;
    left: 2em;
    border-bottom-color: transparent;
    border-left-color: transparent;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/QzajU/1/)。

在兼容性方面，[caniuse](http://caniuse.com/)建议从版本 8 开始，IE 支持生成的内容。

参考：

*   [CSS 生成的内容兼容性，来自 caniuse.com](http://caniuse.com/css-gencontent)。

# string - 如何在 XQuery 中的一定数量的字符串字符之后插入一个字符串？

> ID：12349793
> 
> 赞同：2
> 
> 时间：2012-09-10T10:27:57.783
> 
> 标签：string, insert, xquery

我想`\L`在 25 个字符后插入一个字符串（在本例中为换行符，），但**只能**在下一个可用空格处插入，以避免拆分如下所示的单词：

```
This is the example sente\L nce for you. 
```

正确的输出应该是这样的：

```
This is the example sentence\L for you. 
```

换行应该出现在每行大约 25 个字符之后，因此更长的示例如下所示：

```
This is a longer example\L
for you; it actually contains\L
more than 50 characters. 
```

在 XQuery 中实现这一点的最简单方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T13:40:43.803

**这是一个 XSLT 2.0 解决方案——只需将其转换为 XQuery**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:my="my:my" xmlns:xs="http://www.w3.org/2001/XMLSchema">
    <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="/">
  <xsl:value-of select="my:splitAtWords(/*, 25, '\L&#xA;')"/>
 </xsl:template>

 <xsl:function name="my:splitAtWords" as="xs:string?">
  <xsl:param name="pText" as="xs:string?"/>
  <xsl:param name="pMaxLen" as="xs:integer"/>
  <xsl:param name="pRep" as="xs:string"/>

  <xsl:sequence select=
  "if($pText)
    then
     (for $line in replace($pText, concat('(^.{1,', $pMaxLen,'})\W.*'), '$1')
       return
          concat($line, $pRep,
                 my:splitAtWords(substring-after($pText,$line),$pMaxLen,$pRep))
      )
    else ()
  "/>
 </xsl:function>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<t>This is a longer example for you; it actually contains more than 50 characters.</t> 
```

**产生了想要的结果**：

```
This is a longer example\L
 for you; it actually\L
 contains more than 50\L
 characters\L
.\L 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:47:44.037

我最终使用了[这里](https://stackoverflow.com/questions/3767452/xquery-word-wrap)提出的解决方案：

```
let $text := 'This is a longer example for you; it actually contains more than 50 characters.'
let $text-output := replace(concat($text,' '),'(.{0,25}) ','$1\\L')
return $text-output 
```

它返回的结果与上面 @dimitre-novatchev 的 XSLT 相同：

```
This is a longer example\L
for you; it actually\L
contains more than 50\L
characters.\L 
```

# c# - 创建新表单，使用按钮在新旧表单之间切换焦点

> ID：12349795
> 
> 赞同：1
> 
> 时间：2012-09-10T10:28:01.827
> 
> 标签：c#, winforms

我有一个表单，我想获得与下面代码中所述相同的表单的实例。而且我有一个按钮：每次按下此按钮时，如果创建了一个新表单，我希望它聚焦到那个窗口，如果没有，我想创建一个新表单。

我设法创建了一个新表单，但如果我想专注于它，代码不起作用，有什么想法吗？

```
private void btn_Click(object sender, EventArgs e)
{
  if (opened == false)
  {
    Text = "form1";
    var form = new myformapp();
    form.Show();
    opened = true;
    form.Text = "form2";
  }
  else
  {
    if (Application.OpenForms[1].Focused)
    {
      Application.OpenForms[0].BringToFront();
      Application.OpenForms[0].Focus();
    }
    if (Application.OpenForms[0].Focused)
    {
      Application.OpenForms[1].BringToFront();
      Application.OpenForms[1].Focus();
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:41:46.237

You can try shortening your code without the need to introduce more variables with this example:

```
void button1_Click(object sender, EventArgs e) {
  bool found = false;
  for (int i = 0; i < Application.OpenForms.Count; ++i) {
    if (Application.OpenForms[i].GetType() == typeof(myformapp) &&
        Application.OpenForms[i] != this) {
      Application.OpenForms[i].Select();
      found = true;
    }
  }

  if (!found) {
    myformapp form = new myformapp();
    form.Show();
  }
} 
```

Updated code from Francesco Baruchelli's comment.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T14:30:07.637

如果我正确理解您要执行的操作，您可以在打开的表单中保留一个静态列表。每次打开您的表单实例时，您都将其添加到列表中，每次关闭时您都将其删除。当您按下按钮时，您可以检查列表的大小。如果是 1，则创建一个新表单，打开它并将焦点设置在它上面。如果大小已经是 2，则在列表中查找与执行单击事件的实例不同的实例。代码可能是这样的：

```
 private static List<Form1> openForms = new List<Form1>();

    private void button1_Click(object sender, EventArgs e)
    {
        Form1 frm = null;
        if (openForms.Count == 2)
        {
            foreach (Form1 aForm in openForms)
                if (aForm != this)
                {
                    frm = aForm;
                    break;
                }
        }
        else
        {
            frm = new Form1();
            frm.Show();
        }
        frm.Focus();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        openForms.Add(this);
    }

    private void Form1_FormClosed(object sender, FormClosedEventArgs e)
    {
        openForms.Remove(this);
    } 
```

# wpf - 如何在 listview.background 中同时使用实体画笔和图像画笔

> ID：12349796
> 
> 赞同：0
> 
> 时间：2012-09-10T10:28:01.757
> 
> 标签：wpf, user-controls, wpf-controls, brush

我遇到的问题是如何在 listview.bakcground 中同时使用实体画笔和图像画笔标签？我已在列表视图中将图像设置为背景，但我无法为背景设置任何颜色？

```
 <ListView.Background>
   <ImageBrush  ImageSource="Images\ViewIcons\cls.png" Opacity="0.05" />
 </ListView.Background> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:25:18.027

如果您将设置相同的属性，即`Background`稍后将覆盖前者的值，请这样做

```
<Border Background="Red">
        <ListView >

        <ListView.Background>
            <ImageBrush  ImageSource="Images\Q3.png" Opacity=".05" />
        </ListView.Background>
        </ListView>
        </Border> 
```

我希望这会给你一个想法。

# jquery - Media Element.js - 更改视频海报图像

> ID：12349803
> 
> 赞同：1
> 
> 时间：2012-09-10T10:28:39.487
> 
> 标签：jquery, mediaelement.js

我已将 MediaElement.js 视频播放器集成到我的 MVC 4 应用程序中。在该视图中，我有一个按钮，在按钮单击中我想更改视频源和海报图像。我从 mediaelementjs.com 中提供的代码中找到了更改按钮单击视频源的属性。但它不包含任何更改海报图像的属性。是否可以像视频源一样更改海报图像？

这是我的代码：

```
<div class="videoplayer">    
            <video width="436" height="331" id="player2" poster="../../Images/pix.jpg" controls="controls" preload="none">

            <!-- MP4 source must come first for iOS -->
            <source type="video/mp4" src="http://127.0.0.1:10000/devstoreaccount1/videos/video2.mp4" />

            <!-- Fallback flash player for no-HTML5 browsers with JavaScript turned off -->
                <object width="436" height="331" type="application/x-shockwave-flash" data="../build/flashmediaelement.swf">        
                    <param name="movie" value="../build/flashmediaelement.swf" /> 
                    <param name="flashvars" value="controls=true&amp;file=http://127.0.0.1:10000/devstoreaccount1/videos/video2.mp4" />         
                    <!-- Image fall back for non-HTML5 browser with JavaScript turned off and no Flash player installed -->
                    <img src="../../Images/pix.jpg" width="436" height="331" alt="No video playback capabilities" 
                        title="No video playback capabilities" />
                </object>   
            </video>
        </div>
        <script>

            $('audio,video').mediaelementplayer({
                success: function (player, node) {
                    debugger;
                    $('#' + node.id + '-mode').html('mode: ' + player.pluginType);
                }
            });

    </script>

    <input type="button" id="changevideo" value="Change Video" />

    <script type="text/javascript">
        $('#changevideo').click(function () {
            $('video, audio').each(function () {
                $(this)[0].player.setSrc("http://127.0.0.1:10000/devstoreaccount1/videos/video1.mp4");
                $(this)[0].player.play();
            });
        });

    </script> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T11:58:55.913

```
$('#changeposter').click(function() {
    $('video, audio').each(function() {
        $(this).attr("poster", "../../Images/new_pix.jpg");
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T20:46:57.233

更改海报后最好重新加载播放器才能生效。

```
var player = new MediaElementPlayer('#your-player-element-id');
player.load();
player.play();
player.pause(); 
```

# javascript - 具有模块化构建支持的 JS 混淆器

> ID：12349807
> 
> 赞同：1
> 
> 时间：2012-09-10T10:28:51.507
> 
> 标签：javascript, obfuscation

有谁知道是否有任何支持模块化混淆的 JS 混淆器？

我基本上希望将大约 1000 个 JS 文件最小化为 5 或 10 个混淆的 JS 模块。

这样做的主要原因是我可以继续修补我的应用程序（而不是重新部署整个应用程序）。如果需要调试，我还可以将一些模块换成未混淆的版本。

似乎 YUI 和 Closure Compiler 等许多混淆器非常基础，除了对一堆文件进行混淆之外，不支持太多。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T12:39:21.503

顺便说一句 - 找到了解决方案。

google 闭包编译器实际上允许您编译模块。

我找不到任何文档，但是如果您检查代码，您会看到它是如何实现的。

# hash - SAS 散列连接形式为 LIKE 或 =：

> ID：12349809
> 
> 赞同：1
> 
> 时间：2012-09-10T10:28:52.617
> 
> 标签：hash, sas, datastep

是否可以对部分子字符串进行 SAS 哈希查找？

所以哈希表键将包含：'LongString' 但我的目标表键有：'LongStr'

（目标表键字符串长度可能不同）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:04:07.547

你可以，但它并不漂亮，而且你可能无法获得你正在寻找的性能优势。此外，根据字符串的长度和表格的大小，您可能无法将所有哈希表元素放入内存中。

诀窍是首先生成所有可能的子字符串，然后在哈希表上使用“多数据”选项。

创建一个包含我们要匹配的单词的数据集：

```
data keys;
  length key  $10 value $1;
  input key;
  cards;
LongString
LongOther
;
run; 
```

生成所有可能的子串：

```
data abbreviations;
  length abbrev $10;
  set keys;
  do cnt=1 to length(key);
    abbrev = substr(key,1,cnt);
    output;
  end;
run; 
```

创建一个包含我们要搜索的术语的数据集：

```
data match_attempts;
  length abbrev  $10;
  input abbrev ;
  cards;
L
Long
LongO
LongSt
LongOther
;
run; 
```

执行查找：

```
data match;
  length abbrev key $10;

  set match_attempts;

  if _n_ = 1 then do;
    declare hash h1(dataset:'abbreviations', multidata: 'y');
    h1.defineKey('abbrev');
    h1.defineData('abbrev', 'key');
    h1.defineDone();

    call missing(abbrev, key);
  end;

  if h1.find() eq 0 then do;
    output;
    h1.has_next(result: r);
    do while(r ne 0);
      h1.find_next();
      output;
      h1.has_next(result: r);
    end;
  end;

  drop r;
run; 
```

输出（注意 'Long' 如何返回 2 个匹配项）：

```
Obs abbrev    key 
=== ========= ==========
1   Long      LongString 
2   Long      LongOther 
3   LongO     LongOther 
4   LongSt    LongString 
5   LongOther LongOther 
```

还有一些笔记。散列表不支持`like`运算符之类的原因是因为它在将记录插入散列表之前对键进行“散列”。执行查找时，要查找的值是“散列”，然后对散列值执行匹配。当一个值被散列时，即使值的微小变化也会产生完全不同的结果。以下面的例子为例，散列 2 个几乎相同的字符串会产生 2 个完全不同的值：

```
data _null_;
  length hashed_value $16;
  hashed_value = md5("String");
  put hashed_value= hex32.;
  hashed_value = md5("String1");
  put hashed_value= hex32.;
run; 
```

输出：

```
hashed_value=27118326006D3829667A400AD23D5D98
hashed_value=0EAB2ADFFF8C9A250BBE72D5BEA16E29 
```

因此，哈希表不能使用`like`运算符。

最后，感谢@vasja 提供的一些示例数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:18:21.740

您必须使用 Iterator 对象循环遍历键并自己进行匹配。

```
 data keys;
length key  $10 value $1;
input key value;
cards;
LongString A
LongOther B
;
run;

proc sort data=keys;
by key;
run;

data data;
length short_key  $10;
input short_key ;
cards;
LongStr
LongSt
LongOther
LongOth
LongOt
LongO
LongSt
LongOther
;
run;

data match;
    set data;
    length key $20 outvalue value $1;
    drop key value rc;
    if _N_ = 1 then do;
       call missing(key, value);
       declare hash h1(dataset:"work.keys", ordered: 'yes');
       declare hiter iter ('h1');
       h1.defineKey('key');
       h1.defineData('key', 'value');
       h1.defineDone();
    end;
    rc = iter.first();/* reset to beginning */
    do while (rc = 0);/* loop through the long keys and find a match */
        if index(key, trim(short_key)) > 0 then do;
            outvalue = value;
            iter.last(); /* leave after match */
        end;
        rc = iter.next(); 
    end; 
run; 
```

# c# - C#中按键之间的延迟

> ID：12349810
> 
> 赞同：3
> 
> 时间：2012-09-10T10:28:55.940
> 
> 标签：c#, key

我有一个方法，在 KeyPress 事件上搜索 DataGridView 中的一些数据，然后将焦点放在找到输入字符串的行（如果找到）。

```
private string input;
    private void Find_Matches()
    {            
        if (input.Length == 0) return;

        for (int x = 0; x < dataGridViewCustomers.Rows.Count; x++)
            for (int y = 0; y < dataGridViewCustomers.Columns.Count; y++)
                if (dataGridViewCustomers.Rows[x].Cells[y].Value.ToString().Contains(input))
                    dataGridViewCustomers.Rows[x].Selected = true;

     }

private void dataGridViewCustomers_KeyPress(object sender, KeyPressEventArgs e)
    {            
        input += e.KeyChar.ToString();
        Find_Matches();
    } 
```

如何计算按键之间的延迟，如果超过 1 秒，清除“输入”字符串？这是不间断搜索所必需的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:33:39.140

您必须使用 System.Threading.Timer。将回调传递给将清除输入的计时器。每次引发 KeyPress 事件时，您都必须将计时器的间隔更新为 1000 毫秒

```
timer.Change(0,1000); 
```

或者

```
timer.Change(1000,0); 
```

我不记得 Change 方法的正确参数序列，试试看

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:46:04.230

利用`System.Timers.Timer`它是这样完成的：

```
private Timer myTimer = new Timer(1000); //using System.Timers, 1000 means 1000 msec = 1 sec interval

public YourClassConstructor()
{
    myTimer.Elapsed += TimerElapsed;
}

private void TimerElapsed(object sender, EventArgs e)
{
    input = string.Empty;
    myTimer.Stop();
}

// this is your handler for KeyPress, which will be edited
private void dataGridViewCustomers_KeyPress(object sender, KeyPressEventArgs e)
{            
    if (myTimer.Enabled) myTimer.Stop(); // interval needs to be reset
    input += e.KeyChar.ToString();
    Find_Matches();
    myTimer.Start(); //in 1 sec, "input" will be cleared
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:41:00.473

首先新建一个`System.Windows.Forms.Timer`并配置如下：

```
_TimerFilterChanged.Interval = 800;
_TimerFilterChanged.Tick += new System.EventHandler(this.OnTimerFilterChangedTick); 
```

然后在您的代码中添加以下方法：

```
private void OnTimerFilterChangedTick(object sender, EventArgs e)
{
    _TimerFilterChanged.Stop();
    Find_Matches();
} 
```

您的按键事件处理程序应更改如下：

```
private void dataGridViewCustomers_KeyPress(object sender, KeyPressEventArgs e)
{            
    input += e.KeyChar.ToString();
    _TimerFilterChanged.Stop();
    _TimerFilterChanged.Start();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T10:33:25.297

您可以使用设置为 1 秒间隔的计时器，并在 KeyPress() 方法中重置计时器。还要为它重置处理程序中的计时器。这将导致在自上次击键后经过一秒时调用计时器的处理程序。

在计时器的处理程序中，在自上次击键后经过一秒后执行您需要执行的任何操作。

我建议使用这个计时器：http: [//msdn.microsoft.com/en-us/library/system.timers.timer.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)

您可以通过将 SynchronizingObject 设置为您的表单/控件来使其回调 UI 线程（我认为您会想要）：

[http://msdn.microsoft.com/en-us/library/system.timers.timer.synchronizingobject.aspx](http://msdn.microsoft.com/en-us/library/system.timers.timer.synchronizingobject.aspx)

# ios - iOS Facebook SDK 3.0 登录未重定向到原始应用程序

> ID：12349813
> 
> 赞同：1
> 
> 时间：2012-09-10T10:29:01.327
> 
> 标签：ios, facebook-login

我最近将我的 ios 应用程序更新为 facebook sdk 3.0。

我做了这里描述的一切： [https ://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/)

当我点击使用 Facebook 登录按钮时，一切正常。FB 应用程序即将出现，向我询问权限但 -> 它不会重定向返回到我的应用程序。它只保留在 FB 应用程序中。

使用旧的 SDK 一切正常。是不是新的 SDK 不适用于 iOS 5？

我什至不知道如何调试这个......

感谢您提供任何帮助！

更新

它与我的 URL 方案有关。似乎 ios SDK 3 不喜欢 id 中的字符。我以前的方案条目是 fb0000000new，其中 0 被应用程序 ID 替换。当我将其更改为 fb0000000 时，它可以工作。

不过，在文档中有一个链接会很好！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-10T11:08:38.283

试试这个它对我有用

[http://www.icodeblog.com/2011/03/28/facebook-sdk-posting-to-user-news-feed/](http://www.icodeblog.com/2011/03/28/facebook-sdk-posting-to-user-news-feed/)

# java - 我们可以在 JUNIT 4 中编写自定义测试套件吗？

> ID：12349815
> 
> 赞同：0
> 
> 时间：2012-09-10T10:29:10.937
> 
> 标签：java, junit4

我是 JUNIT 4 的新手，我想编写代码，例如测试套件从 excelsheet 获取输入并基于输入测试套件调用不同的测试用例。根据 JUNIT 4，我们可以在其中定义所有测试用例，`@SuiteClasses({ ParameterSampleTest.class,SampleJUnitTest.class })`但这是我们预定义测试用例的时候。但是在这里我想使用根据输入做出决定的custome JUNIT runner？有人可以帮助解决这个问题吗？

```
@RunWith(Suite.class) 
 public class AllTests {
  public static TestSuite suite() {
        TestSuite suite = new TestSuite();
        suite.addTest(new JUnit4TestAdapter(ParameterSampleTest.class));
        suite.addTest(new JUnit4TestAdapter(SampleJUnitTest.class));
        return suite;
  }
} 
```

谢谢，普里扬克·沙阿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:35:57.547

这应该工作...

```
@RunWith(Suite.class) 
public class AllTests {
public static TestSuite suite() {
        TestSuite suite = new TestSuite();
        //if(your logic based decision) {
            suite.addTest(new JUnit4TestAdapter(ParameterSampleTest.class));
        //}
        suite.addTest(new JUnit4TestAdapter(SampleJUnitTest.class));
        return suite;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:38:18.057

您可以实现自己的测试运行器。这并不难。您只需要创建扩展`org.junit.runner.Runner`并实现其`getDescription()`和`run()`方法的类。运行者可以根据自己的业务逻辑找到子案例并运行。

# ios - 如何通过iOS中的json链接打开模拟器或设备中可用但不在应用商店中的应用程序？

> ID：12349822
> 
> 赞同：0
> 
> 时间：2012-09-10T10:29:52.047
> 
> 标签：ios, json, url

在我的应用程序中，我必须通过 json 数据从一个应用程序转到另一个应用程序。如果应用程序在应用程序商店中可用，那么用户不会遇到任何问题，但如果应用程序在应用程序商店中不可用并且如果我们尝试调用 json，那么它不会打开我通过以前的应用程序获得的 json url。有什么方法可以打开应用商店中不可用但可以通过构建或其他方式获得的应用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:34:15.200

您可以使用自定义 URL 方案打开任何应用程序。要求应用程序制造商添加一个并相应地调整 JSON 和启动器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:43:52.220

是的，您可以从您的应用程序中打开另一个应用程序。但是您需要知道该应用程序的 URlscheme。例如，我想打开一个带有一些链接的 URl，然后我将使用以下内容从我的应用程序中打开该 URL。，

```
 NSURL *myURL = [NSURL URLWithString:@"http://www.google.co.in/"];
   [[UIApplication sharedApplication] openURL:myURL]; 
```

如果您想了解有关 URLScheme 的更多信息，请参阅以下链接。它可能会对您有所帮助

[https://developer.apple.com/library/IOs/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW18](https://developer.apple.com/library/IOs/#documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/AdvancedAppTricks/AdvancedAppTricks.html#//apple_ref/doc/uid/TP40007072-CH7-SW18)

# php - PHP通过引用修改数组元素

> ID：12349824
> 
> 赞同：0
> 
> 时间：2012-09-10T10:30:10.573
> 
> 标签：php, arrays, byref

我有一个大型数据集，我正在检查其中的内容；我在创建数据的内部数组时进行此验证；为避免以后再次循环数组，我希望验证更改数组的内容。现在的问题是我通过 call_user_func 调用验证例程，这似乎给通过引用传递带来了一些问题。或者也许我做错了什么。

这是一个精简的示例：

```
public function index( )
{
    $arr = array( 
        array('a' => 'aap', 'n' => 'noot', 'm' => 'mies'), 
        array('a' => 'ding', 'b' => 'flof', 'c' => 'bips'), 
        array( 'd' => 'do', 'e' => 're', 'c' => 'mi') 
    );

    $func = array( $this, '_user_func' );

    $errors = 0;
    $new_arr = array();
    foreach ($arr as $key => &$value) {
        $new_arr[$key] = &$value; // Simulate production-code manipulation
        //if ( !$this->_do_callback($func, $new_arr[$key], $key) ) $errors++; // No exception but array not modified afterwards
        if ( !call_user_func( $func, $new_arr[$key], $key ) ) $errors++; // Exception: Parameter 1 to TestRef::user_func() expected to be a reference, value given
    }
    unset($value);
    var_dump($new_arr);
    print_r('Errors: '.$errors);
}

private function _do_callback( $func, array &$row, $row_id )
{
    if ( is_callable( $func ) )
    {
        return call_user_func( $func, $row, $row_id );
    }
    else
    {
        throw new Exception( "Error doing callback. Callback empty or not a callable function." );
    }
}

private function _user_func( &$arr, $index = 0 )
{
    // "Validation" routine
    foreach ($arr as $key => &$value) {
        if ($key == 'b') return FALSE; // Simulate validation error for error count
        $arr[$key] = 'replaced';
    }
    unset($value);
    //var_dump($arr); // Works!
    return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:49:30.120

**要么**：

尝试将您的 foreach 循环更改为：

```
foreach ($arr as $key => &$value) {
    $this->_do_callback($func, $value, $key); // No exception but array not modified afterwards
    //call_user_func( $func, $value, $key ); // Exception: Parameter 1 to TestRef::user_func() expected to be a reference, value given
}

unset($value); // avoid memory leak 
```

**或者**：

在调用之前将变量包装在数组中`call_user_func`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:06:48.903

我认为您正在尝试重新定义现有的 php 函数，即 array_walk。特别是在您的情况下，您将需要[array_walk_recursive](http://fr.php.net/manual/en/function.array-walk-recursive.php)。

这是您的代码的重写（简化？）版本。

```
 public function index( )
    {
        $arr = array( 
            array('a' => 'aap', 'n' => 'noot', 'm' => 'mies'), 
            array('a' => 'ding', 'b' => 'flof', 'c' => 'bips'), 
            array( 'd' => 'do', 'e' => 're', 'c' => 'mi') 
        );

        $func = array( $this, '_user_func' );

        var_dump($arr); // BEFORE WALK
        array_walk_recursive($arr, $func);
        var_dump($arr); // AFTER WALK
    }

    /**
     *  Does something to a row from an array (notice the reference)
     */
    private function _user_func( &$rowValue, $rowIndex )
    {
            $rowValue = 'replaced';
    } 
```

你可以在这里看到这个代码——> [http://ideone.com/LcZKo](http://ideone.com/LcZKo)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:42:12.353

你有没有这样尝试过：？

```
foreach ($arr as $key => &$value) {
        $this->_do_callback($func, $value, $key); // No exception but array not modified afterwards
        //call_user_func( $func, $value, $key ); // Exception: Parameter 1 to TestRef::user_func() expected to be a reference, value given
    } 
```

# android - 获取列表视图上选定的数组列表自定义对象项以传递花药活动？

> ID：12349825
> 
> 赞同：-2
> 
> 时间：2012-09-10T10:30:15.877
> 
> 标签：android, object

我在列表视图中获取选定的数组列表项时遇到了问题。这是我的代码：

```
ArrayList<Doctor> doctorList = new ArrayList<Doctor>();//this is the resources of my List.
setListAdapter(new ArrayAdapter<String>(this,
                    android.R.layout.simple_list_item_1, doctorList));
@Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);

        LinkedHashMap<String, Object> obj = new LinkedHashMap<String, Object>();

        Doctor aDoc=(Doctor)l.getItemAtPosition(position);//this line show error

        obj.put("hashmapkey", aDoc);
        Intent inew = new Intent(DoctorsListActivity.this,
                DoctorBioDataActivity.class);
        Bundle b = new Bundle();

        b.putSerializable("bundleobj", obj);
        inew.putExtras(b);

        startActivity(inew);
    }` 
```

**我只是获取选定的数组列表项对象来传递下一个活动 ** 请帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:44:58.220

而不是使用

```
Doctor aDoc=(Doctor)l.getItemAtPosition(position); 
```

像这样使用你`ArrayList doctorList;`的：`Object`

```
Doctor aDoc = doctorList.get(position); 
```

# php - 我应该在 switch 语句中使用 continue 吗？

> ID：12349826
> 
> 赞同：44
> 
> 时间：2012-09-10T10:30:22.537
> 
> 标签：php, c++, language-agnostic, switch-statement

我注意到您确实可以`continue`在 switch 语句中使用关键字，但是在 PHP 上它并没有达到我的预期。

如果 PHP 失败了，谁知道还有多少其他语言也失败了？如果我经常在语言之间切换，如果代码的行为不像我期望的那样，这可能是个问题。

我应该避免`continue`在 switch 语句中使用吗？

PHP (5.2.17) 失败：

```
for($p = 0; $p < 8; $p++){
    switch($p){
        case 5:
            print"($p)";
            continue;
            print"*"; // just for testing...
        break;
        case 6:
            print"($p)";
            continue;
            print"*";
        break;
    }
    print"$p\r\n";
}
/*
Output:
0
1
2
3
4
(5)5
(6)6
7
*/ 
```

C++ 似乎按预期工作（跳转到 for 循环的结尾）：

```
for(int p = 0; p < 8; p++){
    switch(p){
        case 5:
            cout << "(" << p << ")";
            continue;
            cout << "*"; // just for testing...
        break;
        case 6:
            cout << "(" << p << ")";
            continue;
            cout << "*";
        break;
    }
    cout << p << "\r\n";
}
/*
Output:
0
1
2
3
4
(5)(6)7
*/ 
```

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-10-22T14:13:19.187

尝试使用`continue 2`继续围绕 switch 语句的循环的下一次迭代。

编辑：

```
 $foo = 'Hello';

    for ($p = 0; $p < 8; $p++) {
         switch($p) {
             case 3:
                 if ($foo === 'Hello') {
                     echo $foo;
                     break;
                 } else {
                      continue 2;
                 }

             default:
                 echo "Sleeping...<br>";
                 continue 2;

         }

         echo "World!";
         break;
    } 
```

`//This will print: Sleeping... Sleeping... Sleeping... Hello World!`

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-09-10T10:35:10.367

## PHP 7.3 或更新版本：

不推荐使用`continue`中断`switch`语句，并且会触发警告。

要退出`switch`语句，请使用`break`.

要继续围绕当前`switch`语句的循环的下一次迭代，请使用`continue 2`.

## PHP 7.2 或更早版本：

`continue`并且`break`可以在 PHP 的`switch`语句中互换使用。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-10T10:36:57.923

[PHP`continue`语句](http://php.net/manual/en/control-structures.continue.php)的文档清楚地说明了这一点：

> **注意：**请注意，在 PHP 中 switch 语句被认为是用于***continue***的循环结构。

您应该知道，不同的语言赋予相同的关键字略有不同的含义，而不是假设 PHP`continue`的行为与 C++ 相同`continue`。

如果在无法在 C++ 中工作`continue`的 PHP 中有意义`switch`，请使用它。

如果在 PHP 中不起作用`continue`的 C++ 中有意义，请使用它。`switch`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-10T10:35:26.340

正如[PHP 手册](http://php.net/manual/en/control-structures.continue.php)中所警告的那样：

“请注意，在 PHP 中，switch 语句被认为是用于 continue 的循环结构。”

所以使用 continue 会跳出 switch 语句，而不是 for 循环。跨语言假设相似语法的危险。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-08-21T22:26:41.477

重要的是要注意，`continue`当语句嵌套在循环中时，它`break`的行为并不相同。`switch`如果您正在使用`switch`语句来评估某些内容，并且如果满足条件，并且想要移动到循环中的下一个项目，则应该使用`continue 2`. 在这种情况下使用`break 2`将跳出整个`for`循环，这可能不是所需的操作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T10:37:50.220

在 C 和 C++ 中，该`switch`语句只是`if/else if`和 labels/的一种奇特组合`goto`，所以使用`continue`inside`switch`是可以的。但正如您注意到的那样，它并没有按照您在其他*类似于*C 或 C++ 的语言中的预期工作。那是因为它们仅在语法方面相似，对于语义规则，它们是非常不同的野兽。因此，即使语言看起来相似，在一种语言中工作的东西也绝对不会在另一种语言中工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-10T10:35:29.510

`switch / case`在嵌入循环的 C++ 构造中使用 continue是完全可以的。你不应该仅仅因为在其他编程语言中出现不当行为而限制你在 C++ 中的风格。

# php - fpdf分页问题

> ID：12349827
> 
> 赞同：7
> 
> 时间：2012-09-10T10:30:38.997
> 
> 标签：php, pdf, pdf-generation, fpdf

我有这个循环打印 6 行（多单元格）大约 30 次。问题是，当它到达底部页面时，它会从多单元格中打印 2 或 3 行，而在下一页上它会打印其他 3 行。如果当前页面上的所有 6 行没有足够的空间，我想让它在下一页上打印所有 6 行。我使用这段代码：

```
$height_of_cell = 60; mm
$page_height = 279.4; // mm (portrait letter)
$bottom_margin = 20; // mm
$space_left = $page_height - $p->GetY(); // space left on page
$space_left -= $bottom_margin; // less the bottom margin
if ( $height_of_cell >= $space_left) {
$p->Ln();                        
$p->AddPage(); // page break
$p->Cell(100,5,'','B',2); // this creates a blank row for formatting reasons
} 
```

但它不起作用。有什么解决办法吗？谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-10T12:20:36.900

使用[GetY](http://www.fpdf.org/en/doc/gety.htm)获取当前位置，从文档的高度中减去它。如果这小于多单元格高度的 6 倍（您有 6 行），则使用[AddPage](http://www.fpdf.org/en/doc/addpage.htm)强制分页。

我知道你解决了这个问题，但为了其他人的利益，这应该给出一个广泛的想法。

```
<?php
$p = new FPDF();
$p->AddPage();
$p->SetFont('Arial','B',16);
$p->SetAutoPageBreak(false);
$height_of_cell = 60; // mm
$page_height = 286.93; // mm (portrait letter)
$bottom_margin = 0; // mm
  for($i=0;$i<=100;$i++) :
    $block=floor($i/6);
    $space_left=$page_height-($p->GetY()+$bottom_margin); // space left on page
      if ($i/6==floor($i/6) && $height_of_cell > $space_left) {
        $p->AddPage(); // page break
      }
    $p->Cell(100,10,'This is a text line - Group '.$block,'B',2);
  endfor;
$p->Output();
?> 
```

# sql - 如何将查询表值写入列名？

> ID：12349829
> 
> 赞同：0
> 
> 时间：2012-09-10T10:30:47.517
> 
> 标签：sql, sql-server-2008

我的 Sql 表类似如下

```
Code  Value  ID
A     100    1
A     200    2
A     300    3
B     200    1
B     500    2
B     600    3
C     800    1 
C     700    2
C     200    3 
```

如何在 sql server 2008 中编写查询以获取以下格式的值。

```
ID A    B    C
1  100  200  800
2  200  500  700
3  300  600  200 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:41:44.683

您可以[`SUM`](http://msdn.microsoft.com/en-us/library/ms187810.aspx)为此使用函数：

```
SELECT ID,
        SUM(CASE Code when 'A' then Value else 0 end)as A,
        SUM(CASE Code when 'B' then Value else 0 end)as B,
        SUM(CASE Code when 'C' then Value else 0 end)as C
FROM myTable
GROUP BY ID; 
```

[看到这个 SQLFiddle](http://sqlfiddle.com/#!3/5fc68/7)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T10:35:00.463

使用枢轴

```
select ID,[A],[B],[C]
from your_table T
PIVOT (MAX(Value) FOR Code in ([A],[B],[C]) )P 
```

如果代码不固定的数字，您可以使用**动态枢轴**

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(Code) 
                    from your_table
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT ID,  ' + @cols + '  
                from your_table
            pivot 
            (
                MAX([Value])
                for Code in (' + @cols + ')
            ) p '
print(@query)
execute(@query) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T10:52:38.260

答案是[枢轴](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)

```
DECLARE @t TABLE (Code varchar(10), Value int, Id int)

INSERT INTO @t VALUES
                    ('A',100,1),
                    ('A',200,2),
                    ('A',300,3),
                    ('B',200,1),
                    ('B',500,2),
                    ('B',600,3),
                    ('C',800,1),
                    ('C',700,2),
                    ('C',200,3);

SELECT ID,[A],[B],[C]
FROM @t
PIVOT (SUM(Value) FOR Code IN ([A],[B],[C]))P 
```

**结果**

```
ID  A   B   C
1   100 200 800
2   200 500 700
3   300 600 200 
```

# .net - 创建一个可以充当服务的应用程序（使用 topshelf）和一个交互式应用程序

> ID：12349830
> 
> 赞同：0
> 
> 时间：2012-09-10T10:30:49.130
> 
> 标签：.net, topshelf

以前，当我在 .NET 中创建 Windows 服务时，我创建了应用程序，以便它可以作为服务或交互式应用程序运行（它根据命令行参数的存在确定它应该如何运行 - 例如 --service .

我正在考虑使用 TopShelf，并想知道它是否具有此功能。我还没有找到任何东西，但想知道是否有人知道？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T12:34:57.193

运行 Topshelf 服务时，会自动处理上下文。只需在没有任何参数的情况下运行它，它就会作为控制台应用程序运行。当您执行`myService.exe install`时，它将设置作为服务运行所需的一切。然后，您只需通过服务管理器执行服务。

# struts2 - Struts2 访问“原始”模型对象

> ID：12349834
> 
> 赞同：1
> 
> 时间：2012-09-10T10:30:51.943
> 
> 标签：struts2

我有一个应用程序，我需要对更改进行一些审核。实际上，这意味着当我更新它时，我需要知道原始模型对象是什么。在我的代码中，我（显然）可以访问具有修改值的模型对象，但不能访问原始值（首先用于呈现编辑页面。为此推荐的做法是什么，将 originasl 模型对象放入渲染之前的会话存储？还有什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T11:18:56.513

您要么需要重新检索对象（如果它是持久的），要么将其保留在对话中（例如，会话，但仅限于所需的持续时间）。

这可能由持久层更好地处理，具体取决于您使用的内容。合理的缓存解决方案意味着重新查询对性能的影响非常低。

# android - GridView 与文本和图像的绑定

> ID：12349836
> 
> 赞同：-1
> 
> 时间：2012-09-10T10:31:14.707
> 
> 标签：android

我正在解析一个 xml 文件，它返回一个包含名称地址和图像的对象。现在我想在网格视图中显示文本和图像，但不在同一列中。任何建议将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:23:56.593

如果您只想将 gridView 用于 2 列，那么您可以使用 tableLayout 并以编程方式添加 tableRows。就像是 ：

```
<TableLayout
    android:orientation="vertical"
    android:stretchColumns:"0">
    <TableRow>
        <TextView
            android:id=@+id/name />
        <ImageView
            android:id=@+id/image />
    </TableRow>
<TableLayout> 
```

# android - 多点触控：ACTION_POINTER_DOWN & ACTION_POINTER_UP

> ID：12349837
> 
> 赞同：-1
> 
> 时间：2012-09-10T10:31:15.613
> 
> 标签：android, touch, ontouchlistener, motionevent

我正在尝试使用多点触控作为同时按下两件事的方法。

这是我的代码：

```
TouchHandle.setOnTouchListener(new OnTouchListener () {
              public boolean onTouch(View view, MotionEvent event) {
                  int actions = event.getActionMasked();
                  switch (actions)
                  {
                  case MotionEvent.ACTION_DOWN:

                  case MotionEvent.ACTION_POINTER_DOWN:
                      SendKeyCode(Server, "keydec.down");
                  case MotionEvent.ACTION_POINTER_UP:
                      SendKeyCode(Server, "keydec.up");
                  case MotionEvent.ACTION_UP:

                  }
              return true;
                  }
        }); 
```

问题是当我触摸屏幕时，服务器正在检索“keydec.down”和“keydec.up”，即使我还没有从触摸屏上移开手指。因此，即使**我还没有拉起手指**，当我的手指触摸屏幕时，视图`TouchHandle`也会检测到。有什么想法吗？`ACTION_POINTER_DOWN``ACTION_POINTER_UP`

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T19:28:49.803

```
int actions = event.getAction();
switch (actions)
                  {
                  case MotionEvent.ACTION_DOWN:
                  break;
                  case MotionEvent.ACTION_POINTER_DOWN:
                      SendKeyCode(Server, "keydec.down");
                  break;
                  case MotionEvent.ACTION_POINTER_UP:
                      SendKeyCode(Server, "keydec.up");
                  break;
                  case MotionEvent.ACTION_UP:
                  break;

                  } 
```

您应该在案例之间使用中断。而且我还认为这些 MotionEvent 常量可能适用于`event.getAction()`尝试那个。**

# javascript - 如何使用phonegap在iphone中创建联系人

> ID：12349841
> 
> 赞同：4
> 
> 时间：2012-09-10T10:31:28.293
> 
> 标签：javascript, html, ios5, ios4, cordova

我也是 iPhone 开发和 phonegap 的新手。现在我想使用 phonegap 在 iPhone 中创建联系人。我得到了使用编码在 iPhone 中创建联系人的链接。但是有一种使用 JavaScript 的 HTML 编码。但是当我运行编码时，模拟器和设备只显示 HTML 标记内容。我只遵循以下链接：

```
 "http://docs.phonegap.com/en/2.0.0/cordova_contacts_contacts.md.html#Contacts" 
```

我附上了编码和屏幕短片：

```
 <!DOCTYPE html>
    <html>
      <head>
        <title>Contact Example</title>

        <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
        <script type="text/javascript" charset="utf-8">

        // Wait for Cordova to load
        //
        document.addEventListener("deviceready", onDeviceReady, false);

        // Cordova is ready
        //
        function onDeviceReady() {
    var myContact = navigator.contacts.create({"displayName": "Test User"});
    myContact.note = "This contact has a note.";
    navigator.contacts.save(myContact);  //HERE
    console.log("The contact, " + myContact.displayName + ", note: " + myContact.note);
}

        </script>
      </head>
      <body>
        <h1>Example</h1>
        <p>Create Contact</p>
      </body>
    </html> 
```

短屏幕： ![在此处输入图像描述](../Images/b4ce3937e62c0e00f849ec1f4d7e8ada.png)

请帮我解决问题。我已按照上述链接中的所有说明进行操作。但我没有得到解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:43:38.743

您需要保存您的联系人。

该文件指出：

contacts.create 是一个同步函数，它返回一个新的 Contact 对象。

此方法不会将 Contact 对象持久保存到设备联系人数据库中。要将 Contact 对象持久保存到设备，**请调用 Contact.save 方法。**

```
function onDeviceReady() {
    var myContact = navigator.contacts.create({"displayName": "Test User"});
    myContact.note = "This contact has a note.";
    navigator.contacts.save(myContact);  //HERE
    console.log("The contact, " + myContact.displayName + ", note: " + myContact.note);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:01:23.233

```
var myContact = navigator.contacts.create({"displayName": "Test User"}); 
```

完整示例

```
<!DOCTYPE html>
<html>
  <head>
    <title>Contact Example</title>

    <script type="text/javascript" charset="utf-8" src="phonegap-1.0.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    // Wait for PhoneGap to load
    //
    document.addEventListener("deviceready", onDeviceReady, false);

    // PhoneGap is ready
    //
    function onDeviceReady() {

    try {

        var contact = navigator.contacts.create();
        contact.displayName = "Plumber";
        contact.nickname = "Plumber";       //specify both to support all devices

        // populate some fields
        var name = new ContactName();
        name.givenName = "Jane";
        name.familyName = "Doe";
        contact.name = name;

        // save to device
        contact.save(function(){
            alert("Save Success");
        },function(){
            alert("Error...");
        });

    } catch(_err) {
        alert(_err)
    }

}    

    </script>
  </head>
  <body>
    <h1>Example</h1>
    <p>Create Contact</p>
  </body>
</html> 
```

或者您可以找到更多联系人 API 选项。

我想你还没有阅读文档。我还编辑了我的答案，请再次检查。

**说明：** contacts.create 是一个同步函数，它返回一个新的 Contact 对象。

此方法不会将 Contact 对象持久保存到设备联系人数据库中。要将 Contact 对象持久保存到设备，请调用 Contact.save 方法。

[http://docs.phonegap.com/en/1.0.0/phonegap_contacts_contacts.md.html#contacts.create](http://docs.phonegap.com/en/1.0.0/phonegap_contacts_contacts.md.html#contacts.create)

# entity-framework - EntityFramework - Delete Many to Many relationship

> ID：12349843
> 
> 赞同：0
> 
> 时间：2012-09-10T10:31:36.163
> 
> 标签：entity-framework, entity

I have the following entity tree:

```
ParameterDefinition-->ParameterOperation
ParameterDefinition-->ParameterGroup-->Parameter 
```

Also there is a many to many relationship (mapped to a FK-FK table) between `ParameterOperation` and `Parameter`. All associations are declared as Delete cascade (only the many to many is not Delete cascade). The thing is that when I `MarkAsDeleted` `Parameter` Object through `ParameterOperation` (`ParameterDefinition.ParameterOperations[0].Parameters[0].MarkAsDeleted`) it is deleted from DB and the map table is updated as well (row is deleted), but when I try to delete `Parameter` From `ParameterGroup` (`ParameterDefinition.ParameterGroups[0].Parameters[0].MarkAsDeleted`) it is not deleted at all (no delete query is executed on DB). What might be the problem?

Also how do i delete a many to many relationship? for example I want to keep all Parameters and all `ParameterOperations` but I want to delete the relationship between `Parameters[0]` and `ParameterOperations[0]`.

How can I do it?

if I set the NavigationProperty - `ParameterDefinition.ParameterOperations[0].Parameters.MarkAsDeleted` it actually deleted the Parameter from DB what I don't want

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:35:55.870

Simply removing the `Parameter` Entity from the `ParameterOperation's` collection, and then saving your context should be enough to delete the many to many relationship that exists in the junction table.

```
ParameterDefinition.ParameterOperations[0].Parameters.Remove(ParameterDefinition.ParameterOperations[0].Parameters[0]);
Context.SaveChanges(); 
```

# ruby - 石墨烯：ruby bundler 安装失败

> ID：12349859
> 
> 赞同：1
> 
> 时间：2012-09-10T10:32:57.467
> 
> 标签：ruby, linux, graphite

我在我的 Debian 6.0 linux 服务器上安装了[`graphene`](https://github.com/jondot/graphene)来自 github的最新版本。`/opt/graphene`我正在尝试用 编写[`graphite`](http://graphite.wikidot.com/)仪表板[`graphene`](https://github.com/jondot/graphene)，但我遇到了 ruby​​ 的问题[`bundler`](http://gembundler.com/)

1.  当我遵循[github markdown`README.md`](https://github.com/jondot/graphene/blob/master/README.md)时，我成功安装了[`ruby`](http://www.ruby-lang.org/en/)debian 包以及`rubygems`.
2.  接下来，我`sudo gem install serve`没有问题。
3.  我可以浏览端口 4000 上的示例站点，所以我知道`ruby`并且`rubygems`正在工作......

![成功的石墨烯红宝石服务](../Images/1888a986a44499efbab122660012201a.png)

接下来，我按照石墨烯的自述文件的要求[`bundler`](http://gembundler.com/)安装；`sudo gem install bundler`但是，当我采取下一步行动时`README.md`，`bundle install`失败了......

```
[mpenning@tsunami graphene]$ sudo /var/lib/gems/1.8/gems/bundler-1.2.0/bin/bundle install
[sudo] password for mpenning: 
/var/lib/gems/1.8/gems/bundler-1.2.0/bin/bundle:2:in `require': no such file to load -- bundler (LoadError)
    from /var/lib/gems/1.8/gems/bundler-1.2.0/bin/bundle:2
[mpenning@tsunami graphene]$ 
```

我并不完全不知道`ruby`，但令人困惑的是为什么这在第 2 行失败

```
[mpenning@tsunami graphene]$ sudo head /var/lib/gems/1.8/gems/bundler-1.2.0/bin/bundle
#!/usr/bin/env ruby
require 'bundler'
# Check if an older version of bundler is installed
$:.each do |path|
  if path =~ %r'/bundler-0.(\d+)' && $1.to_i < 9
    err = "Please remove Bundler 0.8 versions."
    err << "This can be done by running `gem cleanup bundler`."
    abort(err)
  end
end
[mpenning@tsunami graphene]$ 
```

安装是不言而喻`bundler`的。我的`ruby`-fu 很弱，但是这失败对我来说没有意义。拥有超过 1000 个 github 星和 76 个分叉，我怀疑`README.md`这一步是错误的；我怀疑这是我当地环境中的东西。

有人可以帮助我正确的工作步骤`bundle install`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:53:37.143

使用`/var/lib/gems/1.8/bin/bundle`.

如果需要，您还可以将其链接到`/usr/local/bin`：

```
ln -s /var/lib/gems/1.8/bin/bundle /usr/local/bin/bundle 
```

# ruby-on-rails - 在 Rails 中手动发送邮件的示例

> ID：12349860
> 
> 赞同：0
> 
> 时间：2012-09-10T10:33:05.127
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个网络应用程序，我想添加撰写邮件功能，以便用户可以将邮件发送给其他人。我已经搜索过了，发现只有注册后发送的确认邮件，但我希望用户登录，然后他应该能够发送邮件。我怎样才能做到这一点？请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:36:41.440

你必须使用action mailer来发送邮件，访问rails [guilde](http://guides.rubyonrails.org/action_mailer_basics.html)。如果你知道一点rails很简单

# windows - 为什么当我的计算机处理器繁忙时，flash 视频跳过的视频似乎少于 HTML5 视频？

> ID：12349864
> 
> 赞同：0
> 
> 时间：2012-09-10T10:33:29.870
> 
> 标签：windows, performance, flash, google-chrome, html5-video

当计算机超载和忙碌时，Flash 视频似乎更稳定，播放卡顿的可能性更小。为什么会这样？如果有的话，我希望本机浏览器视频播放*更加*稳定和高性能。

我在 Google Chrome 和 Windows 中，FWIW。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:13:36.480

Flash 早在 HTML 之前就已经确立了播放视频的能力，所以如果有的话，我希望浏览器支持不太稳定。毕竟，Flash 中的视频要成熟很多年。

此外，Chrome 显然默认不使用硬件加速视频解码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-10T14:38:46.777

这取决于视频的流式传输方式。您正在使用的 Flash 播放器也可能正在压缩文件，或者以不同于原生 html5 视频的方式进行流式传输。

# objective-c - 多播委托 - 多个类从 iOS 中的 UI 控件接收通知

> ID：12349865
> 
> 赞同：6
> 
> 时间：2012-09-10T10:33:30.793
> 
> 标签：objective-c, ios, delegates

我了解 UI 控件（例如 UITextField）通过其委托通知客户端交互/事件，该委托被定义为支持所需协议的类。

我经常发现自己希望在不止一个类中接收 UI 事件的通知，因此希望支持多播。例如，为一个 UI 控件指定多个委托。我很确定没有支持此功能的 iOS 框架功能。我想知道是否有人提出了一个体面的解决方案来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T10:44:17.043

有一个可可功能可以让您相对轻松地构建多播委托 - 它是框架中内置的[*消息转发系统。*](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtForwarding.html)

创建一个覆盖 的类`forwardInvocation:`，并返回对象的实例而不是委托。这就是有时被称为*“蹦床物体”*的东西。您的实现中的逻辑`forwardInvocation:`现在可以决定哪些“真实”对象应该接收消息，并将调用转发给其中一个或多个。

作为对这个已接受答案的更新，我在这里创建了自己的多播委托实现：

[http://www.scottlogic.co.uk/blog/colin/2012/11/a-multicast-delegate-pattern-for-ios-controls/](http://www.scottlogic.co.uk/blog/colin/2012/11/a-multicast-delegate-pattern-for-ios-controls/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-16T23:24:40.050

支持多播的一种技术是为您的委托类提供以下方法：

`@interface Delegator : NSObject - (void)addDelegate:(id<MyProtocol>)delegate; - (void)removeDelegate:(id<MyProtocol>)delegate; @end`

并将对代表的引用存储在`NSHashTable`.

在这里查看实现：http: [//arielelkin.github.io/articles/objective-c-multicast-delegate/](http://arielelkin.github.io/articles/objective-c-multicast-delegate/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T11:03:12.917

您可以在您的类中实现您的 UI 控件，然后您的类将从该 UI 接收通知，您可以向另一个类发送消息（使用相同的委托技术 - 在第一类中实现委托属性，然后在第二类中实现委托方法从一等）。例如，对于 UITextField 方法 -textFieldDidEndEditing：

头等舱——

1）实现协议：

```
@protocol TextControllerDelegate <NSObject>

@optional // Delegate protocols
- (void)textFieldDidEndEditing:(UITextField *)textField;

@end 
```

2)`@property (nonatomic, unsafe_unretained, readwrite) id <TextControllerDelegate> delegate;`

3)in method -`(void)textFieldDidEndEditing:(UITextField *)textField`在类内部，调用`[delegate textFieldDidEndEditing:textField]`

二等舱：

1）实现第一类的对象，将委托设置为自我（第二类）。

2）实现方法 -`(void)textFieldDidEndEditing:(UITextField *)textField`

# jquery - 从 jQuery POST 中删除一些文本

> ID：12349872
> 
> 赞同：1
> 
> 时间：2012-09-10T10:34:11.673
> 
> 标签：jquery, ajax, post, replace

我有以下内容`HTML`：

```
<input type='text' name='af_student_startdate' id='start115'>
<input type='text' name='af_student_startdate' id='start116'> 
```

以及以下`jQuery`

```
$('#save').click(function() {

    var values = {};

    $('input[name="af_student_startdate"]').each(function(n, el){
        values [ $(el).attr('id') ] = $(el).val();
    });

    $.ajax( {
    type : 'POST',
    url : '/update.php',
    data : {af_student_startdate: values}
  });

}) 
```

`POST`例如，这将：

```
af_student_startdate[start115]  2012-09-01
af_student_startdate[start116]  2012-09-25 
```

如何删除文本“开始”，以便仅将`INT`值发布到 update.php？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:35:18.250

尝试这个：

```
values [ $(el).attr('id').match(/\d+/g) ] = $(el).val(); 
```

您还可以编码：

```
values [ this.id.match(/\d+/g) ] = this.value; 
```

这比创建不必要的 jQuery 对象更快更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:40:08.757

或者你可以这样做

```
<form method="POST" action="/update.php" id="af_student_startdate_update_form" onsubmit="return false;">
<input type='text' name='af_student_startdate[115]' id='start115'>
<input type='text' name='af_student_startdate[116]' id='start116'>
</form>

$.ajax({
    type : 'POST',
    url : '/update.php',
    data : $('#af_student_startdate_update_form').serialize();
}) 
```

# bash - awk 嵌入脚本问题（意外字符“\”）

> ID：12349873
> 
> 赞同：1
> 
> 时间：2012-09-10T10:34:14.320
> 
> 标签：bash, syntax, floating-point, awk, escaping

我在 shell 脚本中使用嵌入式 awk 代码：

我在它的 BEGIN 部​​分有一些变量赋值：

```
\
BEGIN { FS=","; OFS=","; service_not="false"; end_of_line="\n"; is_setup_gps="false"; \
  \
  a=6378137.0 ; \
  b=6356752.3142 ; \
  f=(a-b)/a ; \
  e=sqrt(f*(2-f)) ; \
} \
\ 
```

所以我需要在每一行的末尾加上 '\' （将整个 awk 脚本嵌入到 .sh 中）。

但是：对于这些行： a=...; b=...; f=...; '\' 导致错误...：mawk：57：意外字符'\'

为什么？

UPD：在 bash 脚本中嵌入 awk：

```
 #!/bin/bash
 ... all shell commands ...
 mawk '... ; \
 ... ; \
 ... ; \
 ' file_to_parse 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T10:55:11.510

AWK 脚本周围的引号保护换行符。其中不需要反斜杠。

# asp.net-mvc - 为什么不带参数调用 Controller.View 不会清除 ViewData.Model

> ID：12349876
> 
> 赞同：0
> 
> 时间：2012-09-10T10:34:20.947
> 
> 标签：asp.net-mvc, unit-testing

我在所有测试中都使用相同的控制器实例，并且刚刚发现（因为我的测试以任意顺序运行）如果您`Controller.View`不带参数调用，它将传回`ViewDataDictionary`由先前调用创建的`Controller.View`具有参数的相同！

一个简单的例子（使用 NUnit 和 MvcContrib）

```
<Test()> _
Public Sub Test_A()
    Dim r As ViewResult = MockController.MethodWhichReturnsViewData().AssertViewRendered()

    Assert.IsNotNull(r.Model)
End Sub

<Test()> _
Public Sub Test_B()
    Dim r As ViewResult = MockController.MethodWhichDoesNotReturnViewData().AssertViewRendered()

    Assert.IsNull(r.Model) '<==== fails, has the same view data as Test_A!
End Sub 
```

这对我的测试不利（显然）。我可以想象两种解决方案，我都不喜欢，有什么建议吗？（作为奖励，有人能理解为什么 MS 会这样设计吗？）

1.  明确指定`Nothing`所有空调用的模型`Controller.View`
2.  添加`TestSetUp`清除模型的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:37:46.167

确保为每个单元测试创​​建一个新的 SUT（被测对象）实例。在 NUnit 中，这将在用[`[Setup]`](http://www.nunit.org/index.php?p=setup&r=2.4)属性修饰的方法内完成：

```
<Setup()> _
Public Sub Init()
    ' Instantiate the SUT here
    MockController = ...
End Sub 
```

不要使用任何静态字段。`MockController`应该是您的测试夹具类的私有实例字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:37:50.877

我相信在真正的 Web 应用程序（即不是测试模拟）中，会为每个请求创建一个单独的控制器实例。因此，在您的测试中，您可能应该这样做。

# java - 为什么 LinkedBlockingQueue#poll() 可能会挂断？

> ID：12349881
> 
> 赞同：21
> 
> 时间：2012-09-10T10:34:46.280
> 
> 标签：java, multithreading, concurrency, openjdk

这是我的代码：

```
// in constructor
BlockingQueue<Node> queue = new LinkedBlockingQueue<Node>();
// later in another thread
Node node = queue.poll(1, TimeUnit.SECONDS); 
```

通常它可以工作，但有时，在某些情况下（仍然不知道何时以及为什么）`poll()`方法不会返回`NULL`，而是永远保持其线程处于`WAITING`状态。为什么以及如何发生这种情况？

我试过`ArrayBlockingQueue`了——同样的效果。我在 Mac OS 上使用 OpenJDK：

```
java version "1.7.0_05" 
Java(TM) SE Runtime Environment (build 1.7.0_05-b06)
Java HotSpot(TM) 64-Bit Server VM (build 23.1-b03, mixed mode) 
```

相同的代码在 Mac OS 上与 Oracle Java 1.6 一起工作得很好。这是线程卡住的地方：

```
sun.misc.Unsafe.park(Native Method)
java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:834)
java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireInterruptibly(AbstractQueuedSynchronizer.java:894)
java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireInterruptibly(AbstractQueuedSynchronizer.java:1221)
java.util.concurrent.locks.ReentrantLock.lockInterruptibly(ReentrantLock.java:340)
java.util.concurrent.LinkedBlockingQueue.poll(LinkedBlockingQueue.java:462) 
```

有趣的是，当我再次`interrupt()`尝试此线程并再次尝试时`poll()`，我会立即遇到相同的情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T10:21:32.890

这是在 Java 7 的早期版本中已解决的 [讨厌的] 问题。如果您迁移到较新的 JVM，您将不会遇到该问题（似乎该修复尚未向后移植到 Java 6）。

见[这里](http://bugs.sun.com/view_bug.do?bug_id=6871697 "错误报告")和[这里](http://bugs.sun.com/view_bug.do;jsessionid=e32efec12fe4e451c185b227194b?bug_id=6815766 "错误报告")。

# .net - DotNetZip 在不解压缩整个流的情况下获取未压缩的流

> ID：12349887
> 
> 赞同：0
> 
> 时间：2012-09-10T10:35:00.217
> 
> 标签：.net, dotnetzip

我有一个 ZipEntry 记录，我需要读取它的几个字节（整个大小是几百兆字节）。有 ZipEntry.Extract 方法，但据我了解，它提取了整个记录。有没有办法得到一些只解压缩我需要的数据的流。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:37:31.127

你不能那样做。压缩方案不允许您仅读取条目中包含的数据的特定部分。您只能通过从头开始并一直工作来阅读它。

编辑：如果您只想从文件的开头读取一个段，您可以使用 ZipEntry.OpenReader() 来获取一个流，但它可能是不可搜索的，因此您无法从中间读取数据。（或者如果可以的话，解压缩时会有性能损失）

# asp.net-mvc - 在 ASP.NET MVC 或 web.config 中重写 URL

> ID：12349890
> 
> 赞同：1
> 
> 时间：2012-09-10T10:35:13.953
> 
> 标签：asp.net-mvc, url-rewriting

忽略基本问题。在查找资源时，我自定义构建的 javascript 库是愚蠢的。好吧，是我，但我不在乎。在这一点上，我正在寻找一个丑陋的解决方法。

客户端请求

```
http://localhost/Activities/Index/dojo/resources/blank.gif 
```

我想说，你是我牙缝里的白痴，但面带微笑并服务于当然位于的形象

```
http://localhost/dist/dojo/resources/blank.gif 
```

没有重定向。我想这就是所谓的重写。请帮我解决这个问题。在路由表或 web.config 中，以性能最佳者为准。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:50:46.670

这可以通过[IIS 7.0 重写模块](http://www.iis.net/downloads/microsoft/url-rewrite)轻松实现：

```
<rewrite>
  <rules>
    <rule name="resources">
      <match url="Activities/Index/(.*)" />
      <action type="Rewrite" url="dist/{R:1}" />
    </rule>
  </rules>
</rewrite> 
```

# c++ - wxPanel 显示功能在 wxThreads 中不起作用

> ID：12349891
> 
> 赞同：1
> 
> 时间：2012-09-10T10:35:14.693
> 
> 标签：c++, wxwidgets, messagebox

```
#include "MessageBoxThread.h"

MessageBoxThread::MessageBoxThread(NfcUIConfirmProcessUC* dialogUC)
{
    this->dialogUC = dialogUC;
}

MessageBoxThread::~MessageBoxThread(void)
{
}

void* MessageBoxThread::Entry()
{
    this->dialogUC->Show(true);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T11:13:29.880

引用 wxThread[文档](http://docs.wxwidgets.org/trunk/classwx_thread.html#thread_secondary)：

> GUI 调用，例如对 wxWindow 或 wxBitmap 的调用在辅助线程中根本不安全，并且可能会过早结束您的应用程序。这是由于几个原因，包括底层的原生 API 以及 wxThread 不运行类似于 MFC 的其他 API 的 GUI 事件循环这一事实。[...] 推荐的方法是通过 wxQueueEvent() 发布的事件在主线程中简单地处理 GUI 调用

所以基本上解决这个问题的最好方法是，而不是调用 Show 来创建一个事件（例如 wxThreadEvent）将其发布回对话框，然后使用事件宏或绑定将其连接到显示对话框的对话框成员。

# iphone - iPhone 的 Youtube 视频下载器

> ID：12349899
> 
> 赞同：2
> 
> 时间：2012-09-10T10:35:28.137
> 
> 标签：iphone, ios, ios4, uiwebview, youtube

我需要为 iPhone 创建一个下载的应用程序。许多应用程序已经在 itune 中具有相同的目的。当 UIWebView 播放器中播放任何视频时，我必须显示下载视频的选项。为了下载视频，我需要在 Player 中播放的 URL。

我尝试过的

我什么也没找到，我收到通知，告诉我播放器是否全屏（UIMoviePlayerControllerDidEnterFullscreenNotification）。我已经尝试使用 URL 的 Web 视图委托方法，但它没有给我任何视频 URL。它在控制台上打印“设置电影路径：”但它没有提供完整的下载路径

# c# - Unity 无法解析动态模拟的类

> ID：12349902
> 
> 赞同：0
> 
> 时间：2012-09-10T10:35:36.230
> 
> 标签：c#, vb.net, prism, unity-container

**设置**

*   解决方案使用棱镜
*   用VB编写的模块项目
*   用 C# 编写的测试项目

在我的单元测试中，我模拟了模块使用的服务并传递它们，但是当模块尝试解析时，它失败并出现以下异常

```
 {"Resolution of the dependency failed, type = "UnderwritingWorkflow.Common.Services.IValidationService", name = "(none)".
Exception occurred while: while resolving.
Exception is: InvalidOperationException - The current type, UnderwritingWorkflow.Common.Services.IValidationService, is an interface and cannot be constructed. Are you missing a type mapping? 
```

* * *

在异常发生时，容器是：

解决 UnderwritingWorkflow.Common.Services.IValidationService,(none) "}

下面是使用 UnityContainer 注册对象的代码：

```
var validationService = new Mock<IValidationService>(MockBehavior.Strict);

validationService.Setup(x => x.Validate(Moq.It.IsAny<object>()))
                 .Returns(() => new ValidationResults());

Container.RegisterInstance(validationService.Object); 
```

此外，如果尝试在注册后直接从 c# 解析 IServiceValidation（从构造函数中）似乎有效：

```
Container.Resolve<IValidationService>(); 
```

任何想法为什么会发生这种情况？

注意：我正在使用在运行时创建类的 Moq 模拟框架，我想知道是不是 VB 的限制不允许我使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T09:03:17.867

我发现是什么导致了这个问题，这是 Moq 框架的限制。Aparently Moq 不能模拟静态方法，包括扩展方法和 Container.Resolve 是扩展方法，因此它失败了。

# java - 如何打包 JUnit 测试

> ID：12349906
> 
> 赞同：2
> 
> 时间：2012-09-10T10:35:45.467
> 
> 标签：java, osgi

如何将 JUnit 测试打包到 OSGI 包中，以便使用 Apache Felix 运行它们？是否有标准实现或一些解决方法来为 JUnit 测试创建单独的包并在激活方法中运行它们？

编辑：我忘了说这个项目是用 Maven 创建的。

更新：感谢您的回答。我使用了 junit4osgi 框架，它非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T07:48:34.933

[Apache Sling 测试工具](http://sling.apache.org/site/sling-testing-tools.html)的org.apache.sling.junit.core 包允许您在 OSGi 实例中运行 JUnit 测试。它是 Sling 项目的一部分，因为它是在那里创建的，但应该在没有任何 Sling 依赖项的任何 OSGi 环境中运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:38:48.147

如果它用于运行单元测试，您可能想看看[Pax Exam](http://team.ops4j.org/wiki/display/paxexam/Pax+Exam)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T12:40:57.447

您可能想看看[BndTools](http://bndtools.org/)是如何做到这一点的。它允许您创建可以在 OSGi 容器中执行的集成 OSGi 测试。

# javascript - 如何触发 jQuery 中的 URL 更改？

> ID：12349907
> 
> 赞同：23
> 
> 时间：2012-09-10T10:35:53.020
> 
> 标签：javascript, jquery

URL 更改时如何触发函数？我尝试类似：

```
$(windows.location).change(function(){
   //execute code
}); 
```

所以我的 URL 类似于`http://www.mysite.com/index.html#/page/1`. 当 URL 变成类似的东西时，我如何执行 jQuery 或 JavaScript 代码`http://www.mysite.com/index.html#/page/2`？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-10T10:38:33.620

那将是一个`hashchange`事件，所以我建议：

```
$(window).on('hashchange', function(e){
    // do something...
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/wzeTY/)。

参考：

*   [`on()`](http://api.jquery.com/on/).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T10:37:58.667

试试这个`hashchange`事件，它正是为此而构建的 - [http://benalman.com/projects/jquery-hashchange-plugin/](http://benalman.com/projects/jquery-hashchange-plugin/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T10:43:50.907

您也可以尝试使用[http://www.asual.com/jquery/address/](http://www.asual.com/jquery/address/)

```
$(function(){
    $.address.strict(false);

    $.address.internalChange(function(e) {
        // do something here
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-24T23:21:55.130

```
var current_href = location.href;
setInterval(function(){
    if(current_href !== location.href){
        // if changed Do ...
        current_href = location.href;
    }else{
        // Do ...
    }
},500); 
```

这对我有用^^

$(window).on('hashchange') // 不触发

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-18T08:30:53.053

仅检测用于流行的 URL 更改

window.onpopstate = function (event) { // `enter code here` }

# mysql - 查找数据库更新的来源

> ID：12349910
> 
> 赞同：0
> 
> 时间：2012-09-10T10:35:56.873
> 
> 标签：mysql, database

我有一个正在从不同服务器更新的 mysql 数据库表。我需要找出更新发生的地方。除了对 mysql 端口使用`netstat`to之外，我还有哪些其他选择？netstat 没有帮助`grep``3306`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:54:23.363

[一般查询日志](http://dev.mysql.com/doc/refman/5.6/en/query-log.html)应该记录您所追求的信息。

# http - Erlang 中的并行 HTTP 网络爬虫

> ID：12349916
> 
> 赞同：3
> 
> 时间：2012-09-10T10:36:18.277
> 
> 标签：http, erlang

我正在编写一个简单的网络爬虫，并生成了一堆 gf 静态文件，我尝试通过底部的代码进行爬取。我有两个我不知道的问题/问题：

1.) 遍历序列 1..200 会*在*抓取 100 个页面后引发错误：

```
** exception error: no match of right hand side value {error,socket_closed_remotely}
     in function  erlang_test_01:fetch_page/1 (erlang_test_01.erl, line 11)
     in call from lists:foreach/2 (lists.erl, line 1262) 
```

2.) 如何并行化请求，例如 20 cincurrent reqs

```
-module(erlang_test_01).
-export([start/0]).

-define(BASE_URL, "http://46.4.117.69/").

to_url(Id) ->
  ?BASE_URL ++ io_lib:format("~p", [Id]).

fetch_page(Id) ->
  Uri = to_url(Id),
  {ok, {{_, Status, _}, _, Data}} = httpc:request(get, {Uri, []}, [], [{body_format,binary}]),
  Status,
  Data.

start() ->
  inets:start(),
  lists:foreach(fun(I) -> fetch_page(I) end, lists:seq(1, 200)). 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T15:11:08.937

**1.错误信息**

`socket_closed_remotely`表示服务器关闭了连接，可能是因为您在短时间内发出了太多请求。

**2.并行化**

创建 20 个工作进程和一个持有 URL 队列的进程。让每个进程向队列询问 URL（通过向其发送消息）。这样你就可以控制工人的数量。

一种更“Erlangy”的方式是为*每个*URL 生成一个进程！这样做的好处是您的代码将非常简单。缺点是您无法以简单的方式控制带宽使用或与同一远程服务器的连接数。

# tree - 遍历树时如何扩展它？

> ID：12349917
> 
> 赞同：0
> 
> 时间：2012-09-10T10:36:25.560
> 
> 标签：tree, breadth-first-search

我正在制作一个程序来解决 3-puzzle(with 3 blocks and a blank) ，它是 8-puzzle 的较小版本。我试图通过将与黑色相邻的块移动到空白空间来构建一棵树；因此每个状态都可以给出 2 个状态（分支因子 = 2）。我正在使用广度优先搜索来解决树，但要遍历树，首先必须制作（扩展）它。由于我不能永远继续扩展树，我必须有一些方法将树扩展到一定深度然后遍历它。所以当遍历到最后一层时，会调用expand()函数进一步展开。谁能给我一个清晰的方法或算法来实现这个想法？还是有其他方法可以解决我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:42:40.063

保留`set`所有不同的董事会状态。如果两个棋盘状态在任何位置有不同的棋子（空白算作棋子），则它们是不同的。您可以通过使用一致的顺序连接所有数字来构建一个字符串来描述状态；大多数语言/库直接支持字符串集。

您应该只 expand() 未访问的棋盘状态。每当您第一次访问某个州时，都应将其添加到“已访问状态”`set`中。在扩展任何状态之前，请检查它是否已经存在。

完整的算法（对于一般的广度优先，无重复搜索）是：

```
place initial state into "pending" (a queue)
place initial state into "visited" (a set)
while "pending" is not empty,
   extract its first state, called "next"
   if it is not present in "visited",
      if it is the goal, report success, ending the algorithm
      otherwise, add all its children at the end of "pending"    
if you reach this point, there is no way to reach a goal state from a start state 
```

# android - 自动重置视频录制Android

> ID：12349919
> 
> 赞同：0
> 
> 时间：2012-09-10T10:36:30.670
> 
> 标签：android, save, mediarecorder

我正在开发一个应用程序，我需要通过单击预定义长度的按钮来录制视频，例如 15 秒。15 秒后，我想自动重置 MediaRecorder 而无需手动干预 我的代码在这里。

```
public void initMediaRecorder(){ 

mRecorder = new MediaRecorder(); 

mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC); 
mRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA); 
mRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP); 
mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB); 
mRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.H263); 
mRecorder.setPreviewDisplay(mHolder.getSurface()); 
mRecorder.setMaxDuration(15000);
mRecorder.setOutputfile("blahblah On SD card")
mRecorder.setOutputFile(mOutputFile); 

} 
```

现在录制已完成，但 15 秒后我的 UI 冻结，我需要手动重置录音机。我需要知道在 15 秒时间完成后我应该重置记录器的事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T06:10:01.827

我找到了解决方案。也许这个答案会对某人有所帮助。

使用以下监听器

recorder.setOnInfoListener(new medialistener());

```
 class medialistener implements MediaRecorder.OnInfoListener {     
         public void onInfo(MediaRecorder recorder, int what, int extra)
         { 
             if(what==MediaRecorder.MEDIA_RECORDER_INFO_MAX_DURATION_REACHED)
             {

             }

        // Log.i("video test", "Video Info: "+what+", "+extra);  
         } 
         } 
```

干杯。

# sql - 使用 SQL 查询连接日期和时间变量

> ID：12349920
> 
> 赞同：0
> 
> 时间：2012-09-10T10:36:36.577
> 
> 标签：sql, sql-server, sql-server-2008, datetime

我的 SQL 表中有两列。一个是 DateTime，另一个是 Time 它们的格式 `DateTime - 2012-04-05 16:58:56.000`和 Time -`21:30:00.00000`

我需要编写一个查询，它将返回一个列作为 -`2012-04-05 21:30:00.000`

你能帮助我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T10:54:40.710

~~在 SQL-Server 2008 中，您可以通过以下方式添加值：~~

 ~~```
select cast(dt as date) + cast(tm as datetime)
from yourtable 
```~~ 

~~请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/65645/3)~~

以上不再有效，这是一个可以在 SQL Server 中工作的更新版本。这也可以[编辑以包括额外的精度](https://dba.stackexchange.com/a/51443/9003)：

```
SELECT dateadd(day, datediff(day,'19000101',dt), CAST(tm AS DATETIME))
from yourtable 
```

[请参阅演示](https://data.stackexchange.com/stackoverflow/query/516769)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T11:01:47.757

这对我有用。

```
Select DateAdd(d, DateDiff(d, 0, Cast(OrderDate As datetime)), Cast(Delivery_Time as datetime))   From myTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-19T20:07:44.163

```
SELECT CAST(date_col AS DATETIME)+CAST(time_col AS DATETIME) FROM your_table 
```

在 SQL SERVER 2012 上测试

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-10T10:40:24.903

试试这个：：

```
Select CONCAT(DATE(column_dateTIME),column_Time) from my Table 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-10T10:55:21.277

对于 MySQL

```
Select CONCAT_WS(" ", date(dattime_columnname), time(time_column)) from table_name; 
```

对于 SQL Server 2008：

```
select convert(varchar, datetime_column, 103) + ' ' + convert(varchar, time_column, 114) 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-10T10:54:20.790

试试这个：

这应该在 SQL SERVER 中工作

```
select CONVERT(varchar(10),dt_col,121)+' '+cast(t_col as varchar(20)) 
from your_table 
```

# delphi - Window 7 & Windows Server 2008 R2：运行时间显着增加

> ID：12349922
> 
> 赞同：2
> 
> 时间：2012-09-10T10:36:38.557
> 
> 标签：delphi, windows-7, delphi-7, windows-server-2008-r2

我们正在使用 Delphi 7 开发控制台软件。

为简化起见，该软件使用嵌入式 TCP 服务器来响应来自 CGI 的外部请求。这些答案包含生成的带有 Techart 图表的 HTML 页面，以及使用 DbExpress 从数据库中提取的数据。

在 Windows 7 和 Windows 2008 R2 服务器上，我们注意到我们的软件运行时间显着增加 - 是 Windows XP 或 Windows Server 2003 上原始处理时间的 2 或 3 倍 - 在标准执行环境中：作为服务启动的软件系统用户帐户。

但是，当我们的软件以简单用户身份、从命令提示符或直接从 IDE（调试模式）启动时，问题就消失了。

**我的第一个问题是：有人已经注意到这个问题了吗？**

使用 ProcessExplorer，我们还注意到当软件作为服务启动时，没有创建 GDI 句柄，也没有创建用户句柄。但是当使用用户帐户启动软件时，会创建其中一些句柄。在 Windows XP 和 Windows Server 2003 中，无论是软件作为服务启动还是使用简单的用户帐户启动，这些句柄总是被创建。

**这个观察可以与我们的问题联系起来吗？**

**如果您已经注意到这些行为，您是如何解决问题的？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T05:32:31.850

由于我们在很多地方都依赖于 Windows API CompareString 函数，因此我们无法用非 Windows 版本替换它。但是，我们发现 API 工作正常，而不是通过使用 LOCALE_INVARIANT($07) 来使用 LOCAL_USER_DEFAULT。因此，我们决定破解 Windows 中定义的常量值，并在用于比较目的的任何地方重写它，并使用如下条件编译：

```
{$IFDEF OVERLOAD_LUD}
const
  LOCALE_INVARIANT = $7;
  LOCALE_USER_DEFAULT = LOCALE_INVARIANT;
{$ENDIF} 
```

这解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T07:18:14.103

我想我们找到了问题的根源。因此，对于那些正在寻找解决方案的人，这就是我们所做的：

延迟是由于使用本地函数使用 Win32 API 函数。现在不推荐使用区域设置标识符函数，而支持使用区域设置名称函数（请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/dd319091%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319091%28v=vs.85%29.aspx)）。

我们的开发大量使用“CompareString”（http://msdn.microsoft.com/en-us/library/windows/desktop/dd317759%28v=vs.85%29.aspx），包括使用 indexOf 方法TStringList 。当在用户上下文系统中运行时（在会话 0 中），此方法（内核 132 的 CompareStringA）的执行速度会减慢。

为了解决这个问题，我们用CompareStr 重载了TStringList 而不是CompareString。此解决方法适合我们的上下文，但 CompareStr 会逐位进行比较，并且与 CompareString 不同，它不区分大小写。（更不用说这种方法快了大约 10 倍...... [http://www.gefvert.org/blog/archives/651](http://www.gefvert.org/blog/archives/651)）

另一种解决方案是切换到更新版本的 IDE，但我们都知道这是另一个故事......

# algorithm - 绘制标尺的非递归程序

> ID：12349927
> 
> 赞同：-3
> 
> 时间：2012-09-10T10:36:56.700
> 
> 标签：algorithm

我正在阅读 Robert Sedwick 的算法。

**[这里是书](http://tinyurl.com/cu8s88r)**

页码：214。

下面的文字参考了数字的二进制表示。

在这里，Robert Sedwick 提到以下程序的灵感来自与二进制数的对应关系。绘制标尺的非递归程序如下所述

```
void rule(int l, int r, int h)
  { 
    for (int t = 1, j = 1; t <= h; j += j, t++)
      for (int i = 0; l+j+i <= r; i += j+j)
        mark(l+j+i, t);
  } 
```

在图 5.10 中，作者提到要以非递归方式绘制尺子，我们交替使用长度为 1 的绘图标记和跳过位置，然后交替使用长度为 2 的绘图标记和跳过剩余位置，依此类推。

我在上面有以下问题。

1.  我的问题是作者如何提到该程序是受二进制数对应的启发？
2.  图 5.10 中作者跳位是什么意思？这里指的是什么职位？
3.  Fig5.10 中第一图中的标记是什么？

请用规则（0,8,3）解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T19:15:14.970

对于#1，如果你用二进制写下一系列数字，并屏蔽除低 x 位之外的所有内容，你会得到一个重复模式（例如 x=4）：

```
 0 = 0000
 1 = 0001
 2 = 0010
 3 = 0011
 4 = 0100
 5 = 0101
...
14 = 1110
15 = 1111
16 = 0000
17 = 0001
... 
```

如果您查找以 1 字符串结尾的数字，您会看到一个有趣的模式。将上面逆时针旋转90度以节省空间：

```
010101010101010101010101010101010101010101010101
001100110011001100110011001100110011001100110011 ....
000011110000111100001111000011110000111100001111
000000001111111100000000111111110000000011111111 
```

（仅）用 ! 替换 1 的结尾字符串：

```
0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!0!
001!001!001!001!001!001!001!001!001!001!001!001! ....
0000111!0000111!0000111!0000111!0000111!0000111!
000000001111111!000000001111111!000000001111111! 
```

用空格替换其他所有内容，您会得到一个重复的标尺图案。

```
 ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! ! !
   !   !   !   !   !   !   !   !   !   !   !   ! ....
       !       !       !       !       !       !
               !               !               ! 
```

如果您考虑一下，您会看到 1 的字符串的长度（对应于标记的长度）如何对应于它的出现频率以及它如何导致上述模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:58:03.733

我觉得这里遗漏了什么是这篇文章的作者，而不是读者。书中发布的代码缺少注释 - 特别是 @param 标记以准确指示三个参数的含义。发布的解释似乎也缺少一些东西。

这是我对 #2 的猜测：当您查看尺子时，0.5 英寸的标记比 0.25 或 0.75 英寸的标记更大。所以首先我们可以放置半英寸标记，然后当我们放置 1/4" 标记时，我们会“跳过位置”，因为不需要绘制一半的 1/4" 标记。例如，当我们填写 1" 和 3" 之间的标记时，按 1/4" 计数，我们有：

1.25 [跳过] 1.75 [跳过] 2.25 [跳过],,...

换句话说，当放置 1/4" 标记时，我们实际上是按 0.5" 而不是四分之一来计算的。在书中发布的代码中，这可能就是您`j+j`在内部循环中看到的原因。这表明 j 是当前标记值（先是 1/4，然后是 1/2，然后是 1/8）。由于一切都是用整数完成的，也许 j=1 对应于 1/16"，然后 2j、4j、8j 是标记值。

# git - 什么先出现：git subtree 合并策略或 git submodule？

> ID：12349931
> 
> 赞同：1
> 
> 时间：2012-09-10T10:37:03.690
> 
> 标签：git, history, git-submodules, git-subtree

什么是最近的发明——git subtree 合并策略（不是新的 git-subtree 命令）或 git submodule 命令（或者如果有一个单独的与 git subtree 命令与合并策略对称的底层机制）。

Git 发行版中首先包含了什么？

相关 Git ML 帖子链接的奖励积分。

我尝试从 Git 提交历史中挖掘该信息，但在 2007-2008 年的某个地方迷失了这两个功能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T12:37:22.927

子树合并似乎有点旧：

由 Junio Hamano 于 2007 年 2 月介绍[`68faf68938ee943fc251c702f2027e4dfda354db`](https://github.com/git/git/commit/68faf68938ee943fc251c702f2027e4dfda354db)»添加新的合并策略 [原文如此]'子树'«（文件`git-merge.sh`）

Git 子模块由 Lars Hjemli 于 2007 年 5 月在提交[`70c7ac22de681a83621bda03e676348170c8d8a2`](https://github.com/git/git/commit/70c7ac22de681a83621bda03e676348170c8d8a2)»添加 git-submodule 命令«（文件`git-submodule.sh`）中引入

要获取首先包含特定功能的版本，请`git describe --contains`在其提交时运行。对于上述提交，这分别意味着`v1.5.2-rc0`和`v1.5.3-rc0`。

# maven - Tycho 解决了我自己的清单优先工件的错误版本

> ID：12349934
> 
> 赞同：5
> 
> 时间：2012-09-10T10:37:18.703
> 
> 标签：maven, tycho

考虑以下场景：我的应用程序有一些依赖于我自己的 POM 优先工件（使用纯 Maven 构建）和一些依赖于我自己的清单优先工件（使用 Tycho 构建）。对于 POM-first 工件，Tycho 准确解析了我在 POM 中指定的版本。对于 manifest-first 工件，Tycho 解析可能具有更高版本的本地构建单元。

在我的具体情况下，我在 pom.xml 中指定了对版本 1.2.0 中清单优先工件的依赖关系，但我收到警告“以下本地构建的单元已用于解决项目依赖关系”版本为 1.3.0.2012xxx .

我已经发现了以下错误和讨论，但我不明白为什么 Tycho 在解决 POM-first 和 manifest-first 依赖项方面存在差异。

*   [https://bugs.eclipse.org/bugs/show_bug.cgi?id=355367](https://bugs.eclipse.org/bugs/show_bug.cgi?id=355367)
*   [http://dev.eclipse.org/mhonarc/lists/tycho-user/msg01673.html](http://dev.eclipse.org/mhonarc/lists/tycho-user/msg01673.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T12:05:56.867

在 Tycho 中，依赖解析是一个两步过程：

*   首先，Tycho 计算所谓的[目标平台](http://wiki.eclipse.org/Tycho/Target_Platform)，它是被考虑用于依赖解析的工件集。在这一步中，Tycho 根据 Maven 规则评估 POM 依赖关系并将结果添加到目标平台。此外，您在本地构建的所有 Tycho 工件`mvn install`都将添加到目标平台。

*   然后，Tycho 根据 OSGi 规则解析您项目的依赖项（来自 MANIFEST.MF、feature.xml 等）。与 Maven 依赖项不同，OSGi 依赖项通常指定为版本范围。所以如果你写

    ```
    Require-Bundle: my.bundle;bundle-version="1.2.0" 
    ```

    你是说你想要 1.2.0 或更高版本。您通常不想在此处指定确切的版本，因为这会对运行时产生影响。但是您确实想控制构建时发生的事情，这就是为什么有多种方法可以控制目标平台的内容。

在您的特定情况下，您在 POM 中指定的版本的目标平台中拥有 POM 优先工件。然后，您似乎还为您的 Tycho 工件指定了 POM 依赖项（这并不常见，但没关系），因此您将在目标平台**的指定版本中拥有 Tycho 工件。**但是由于您还使用 本地构建了**较新版本**的 Tycho 工件`mvn install`，因此这些也将在目标平台中。因此，依赖关系解析（第 2 步）可以在**两个版本**之间进行选择，通常会选择较新的版本。

为了防止本地构建的工件被添加到目标平台，您可以删除文件`~/.m2/repository/.meta/p2-local-metadata.properties`. （我假设您已经知道这一点，但只是为了确定[。Bug 355367](https://bugs.eclipse.org/bugs/show_bug.cgi?id=355367)还将在 0.16.0 中带来一个替代的、更方便的选项。）

现在我终于回答了你的问题，为什么 POM 优先工件的行为与 Tycho 工件的行为不同：

*   假设多个第谷工件在同一个反应器中一起构建。然后每个工件可以使用其他工件作为依赖项，而不需要任何特定的目标平台配置，例如，您不需要 POM 依赖于同一反应器中的工件。（或者换句话说：来自同一反应器的上游工件自动成为模块目标平台的一部分。）因此，为了支持第谷反应器部分的重新构建（在`mvn install`整个反应器之后），本地安装的第谷工件需要被添加到每个模块的目标平台。第谷不知道它们最初是否属于同一个反应堆，所以它只是将它们全部添加。

*   对于 POM 优先的工件，对工件的引用始终存在（通过 Maven 配置继承），即使只构建了 Tycho 反应器的一部分。因此，不需要任何机制来获取本地构建的 POM 优先工件的任何版本，但 Tycho 可以将精确指定的版本添加到目标平台。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-19T07:42:46.253

对于那些有兴趣在解析目标平台时强制 tycho 忽略本地工件的人，请添加 CLI tycho.localArtifacts=ignore，例如

```
mvn clean install -Dtycho.localArtifacts=ignore 
```

更多细节可以在[Tycho-Target Eclipse Wiki上找到](http://wiki.eclipse.org/Tycho/Target_Platform#Effective_content_of_the_target_platform)

# ruby-on-rails - 如何在表示为符号的方法中传递参数？

> ID：12349938
> 
> 赞同：0
> 
> 时间：2012-09-10T10:37:21.637
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个动作：

```
def get_data
  @people = Person.all

  respond_to do |format|
    format.json do
      render :json => {
        :success => true, 
        :people => @people.as_json({
          :only => [:person_name, :text_description, :text_heading],
          :methods => [:title,:age_group],
        })
      }
    end
  end
end 
```

这里 title 和 age_group 是我在模型 Person 中的方法

```
def age_group
  self.name
end 
```

现在我想方法看起来像这样

```
def age_group(age)
  # ...      
end 
```

我如何从控制器传递这个参数作为方法表示作为符号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:58:11.630

嗨，根据我的建议，您可以覆盖方法或创建实例方法，具体取决于它将生成哈希或 json 的选项。如果您想使用 as_json，那么您可以挖掘代码这一行有助于挖掘代码[https://github.com /rails/rails/blob/2-3-stable/activerecord/lib/active_record/serialization.rb#L33](https://github.com/rails/rails/blob/2-3-stable/activerecord/lib/active_record/serialization.rb#L33)这将为您提供如何传递方法。

# ios - 渲染 epub 中的字体大小不均匀

> ID：12349945
> 
> 赞同：1
> 
> 时间：2012-09-10T10:37:54.880
> 
> 标签：ios, uiwebview, epub

我正在使用 aepubreader 代码在我的应用程序中呈现 epub。我面临的问题是第一本书加载完美，但是当我从菜单切换到另一本书时，这本书的字体大小不均匀，格式完全扭曲。但是，如果在新启动应用程序期间打开同一本书，则该书会正确呈现。该问题似乎与 Webview 中的 css 文件缓存有关。有没有人遇到过这种问题？请提出在 webview 中忽略 css 缓存的方法。我已将缓存策略设置为`NSURLRequestReloadIgnoringCacheData`另外我已将缓存大小设置为零，如下所示

```
 NSURLCache *sharedCache = [[NSURLCache alloc] initWithMemoryCapacity:0 diskCapacity:0 diskPath:nil];
    [NSURLCache setSharedURLCache:sharedCache];
    [sharedCache release]; 
```

但仍然没有帮助解决问题。

# hibernate - Hibernate 关系和 SmartGWT RESTDataSources 的解决方法

> ID：12349947
> 
> 赞同：0
> 
> 时间：2012-09-10T10:37:56.487
> 
> 标签：hibernate, gwt, datasource, smartgwt

我迷失了我必须实现在 Hibernate 中定义的多对多关系的方式。在客户端，我们使用 SmartGWT LGPL 版本和 RESTDataSources 在一些后端 Web 服务上运行良好。

这种关系是在典型的角色和权限之间建立的。在 Rol.class 中：

```
...
@ManyToMany
@JoinTable(name = "ROL_PERMISO", joinColumns = @JoinColumn(name = "ROL_ID"), inverseJoinColumns = @JoinColumn(name = "PERMISO_ID"))
private Set<Permiso> permisos;
... 
```

在客户端，我有两个“视图”。第一个是权限管理。另一个用于角色管理，它有一个显示角色的 ListGrid 和一个带有权限 CheckBoxTree 的 DynamicForm，用于选择与角色关联的权限，以及名称和描述等其他字段。

如何在数据源中建立角色和权限之间的关系？有什么推荐的解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T08:24:49.740

在搜索它之后，我已经解决了使用嵌套数据源的问题：

在 Rol 数据源中：

```
...
// One to Many relationship
DataSourceField permisos = new DataSourceField("permisos", FieldType.TEXT, locale.permisos());
permisos.setTypeAsDataSource(PermisoDS.getInstance());
... 
```

关键是创建一个 DatSourceField 并将类型设置为 DataSource。然后，为了访问数据，您可以在 Rol DataSource 的记录中使用**getAttributeAsRecordArray("permisos")**

希望这对某人有帮助！

# mysql - 无法使用 VB6 连接到远程 MySQL (10060)

> ID：12349948
> 
> 赞同：1
> 
> 时间：2012-09-10T10:37:57.837
> 
> 标签：mysql, vb6, remote-access

我从 GKG.net 获得了一个托管计划，并且我有一个 VB6 连接字符串可以远程访问其中的 MySQL 数据库。我遵循了有关如何远程访问 MySQL 服务器的所有说明和教程。一切都很好，直到我收到一条错误消息：

> [MySQL][ODBC 3.51 驱动程序] 无法连接到 'xxx.xxx.xxx.xxx' 上的 MySQL 服务器 (10060)

我在网上搜索了几个小时的解决方案，但仍然没有任何意义。我仔细检查了我的连接。我可以ping到我的静态IP，但无法访问其中的MySQL服务器。

从 CPanel 我可以使用 phpMyAdmin 访问我的数据库。我测试了我的数据库，没有任何问题。一切似乎都是正确的。除了我仍然收到 VB6 的错误消息

我的连接字符串：

```
Dim conn As ADODB.Connection
Dim constr As String
Private Sub OpenServer()
    Set conn = New ADODB.Connection
    constr = "Driver={MySQL ODBC 3.51 Driver};" & _
             "PORT=" & db_port & ";" & _
             "SERVER=" & db_server & ";" & _
             "DATABASE=" & db_name & ";" & _
             "UID=" & db_user & ";" & _
             "PWD=" & db_pass & ";" & _
             "OPTION=3;" & _
             "STMT=;"
    conn.Open constr
End Sub 
```

那么我该如何解决这个该死的连接问题呢？导致这种情况的几率是多少？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T00:06:18.103

您访问其数据库服务器的主机很少允许从其托管环境之外远程访问数据库（我从未见过）。

如果您自己设置 MySql 数据库（在专用或虚拟服务器计划上），那么您应该能够将其设置为接受远程主机。在这种情况下，您需要修改 my.con 文件以允许远程主机（您也可以通过 MySql 管理工具进行操作），并且您需要授予您尝试使用远程 IP 访问权限的登录名：

[http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html](http://www.cyberciti.biz/tips/how-do-i-enable-remote-access-to-mysql-database-server.html)

您之前对 SQLyog 的评论是一个非常好的主意。我可以担保该产品。这是一个很棒的工具。MySql 的免费管理工具（Workbench - [http://www.mysql.com/downloads/workbench/](http://www.mysql.com/downloads/workbench/)）也很不错，还可以让您测试远程访问。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T10:46:23.543

当您收到错误 10060 时，请检查此远程连接解决方​​案

[http://forums.mysql.com/read.php?34,49742,239961](http://forums.mysql.com/read.php?34,49742,239961)

[http://www.bigresource.com/VB-Remote-MySQL-Server-h6Z8Cbaszz.html#](http://www.bigresource.com/VB-Remote-MySQL-Server-h6Z8Cbaszz.html#)

MySQL 设置为非常容易地处理远程连接。但是，您必须设置 MySQL 以允许您的用户进入。另一件事是确保在主机上打开端口 3306。如果不是，那么您将无法连接到 MySQL。最简单的方法是...

远程登录我的主机 3306

如果你得到类似...的东西，3.23.54-log▬I_&:309i☻</p>

然后端口 3306 是打开的，MySQL 正在监听。

接下来，确保您的用户 ID 设置为允许访问 MySQL 服务器。您可以使用 mysql 客户端软件或 mysqlcc 软件来执行此操作。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-27T04:39:14.377

我有这个问题。我可以从本地主机连接，但不能从客户端计算机连接。我关闭了 Windows 防火墙（Windows 8）。然而，没有喜悦。然后，我在防火墙高级设置中创建了一个新规则，并且它起作用了。新规则只允许在我的专用网络上的端口 3306 上进行传入连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-03T10:01:59.533

VB6 的另一种方法。我在我所有的应用程序中都这样使用它，并且它已经工作了多年。

> 将 StoreDB 调暗为 ADODB.Connection
> 
> 出错时继续下一步
> 
> 设置 StoreDB = New ADODB.Connection
> 
> StoreDB.Open "Driver={MySQL ODBC 3.51 Driver};Server=000.000.000.000;Port=3306;Database=yourDBName;User=Someusername;Password=Somepassword;OPTION=8;"
> 
> > 如果 Err.Number = 0 那么
> > 
> > > [要执行的VB6代码]
> > > 
> > > 别的
> > > 
> > > myErrorString = Err.Description
> > 
> > 万一
> 
> StoreDB.关闭
> 
> 设置 StoreDB = 无

如前所述，确保端口为 3306。我有一台使用 3307 的主机。我认为您的代码没有问题。您可能需要与主机进行排序。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-02T13:25:31.700

将 mysqlid.exe 添加到您的 Windows 防火墙设置中以远程访问您的服务器

# android - 传递两个参数以使用来自 android 的 Web 服务

> ID：12349957
> 
> 赞同：0
> 
> 时间：2012-09-10T10:38:34.233
> 
> 标签：android, web-services

如何通过 SOAP 方法传递两个参数以使用来自 android 的 Web 服务。我已经尝试过了，但我无法从 android 使用该 Web 服务。

建议？

这是我试图使用“http://54.251.60.177/TMSOrdersService/TMSDetails.asmx”的确切网络服务

此 Web 服务的输入值是

FromDate : 01/01/2012

截止日期 : 07/07/2012

**参考来源**

**Webservice_.java**

```
public class Webservice_ extends Activity 
{

public static String rslt="";    /** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button b1=(Button)findViewById(R.id.button1);
    final  AlertDialog ad=new AlertDialog.Builder(this).create();

     b1.setOnClickListener(new OnClickListener() {

public void onClick(View arg0) 
{

try
{ 
EditText ed1=(EditText)findViewById(R.id.editText1);
EditText ed2=(EditText)findViewById(R.id.editText2); 

int a=Integer.parseInt(ed1.getText().toString());
int b=Integer.parseInt(ed2.getText().toString()); rslt="START";

Caller c=new Caller(); 

c.FromDate=a;
c.ToDate=b; 

c.ad=ad;

c.join();
c.start();

while(rslt=="START") 
{
try {
Thread.sleep(10); 

}catch(Exception ex) {

 }
} ad.setTitle(+a +b);
ad.setMessage(rslt); 

}catch(Exception ex) {
ad.setTitle("Error!"); ad.setMessage(ex.toString());
}
ad.show();  
} });
}} 
```

**CallSoap.java**

```
public class CallSoap 
{
public  final String METHOD_NAME = "GetTMSChart"; 
public  final String NAMESPACE = "http://tempuri.org/";
public final String SOAP_ACTION = "http://tempuri.org/GetTMSChart";
public  final String URL = "http://54.251.60.177/TMSOrdersService/TMSDetails.asmx";

public CallSoap() 
{ 

}
public String Call(int FromDate,int ToDate)
{

SoapObject request = new SoapObject(NAMESPACE,SOAP_ACTION);
PropertyInfo pi=new PropertyInfo();

pi.setName("FromDate");
pi.setValue(FromDate);

pi.setType(Date.class);
request.addProperty(pi);

pi=new PropertyInfo();

pi.setName("ToDate");
pi.setValue(ToDate);
pi.setType(Date.class);
request.addProperty(pi);

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
envelope.dotNet = true;

envelope.setOutputSoapObject(request);

HttpTransportSE httpTransport = new HttpTransportSE(URL);
Object response=null;
try
{
httpTransport.call(SOAP_ACTION, envelope);
  response = envelope.getResponse();
}
catch (Exception exception)
{
response=exception.toString();
}
return response.toString();
}  
} 
```

**调用者.java**

```
 public class Caller extends Thread  

{ 
public CallSoap cs;
public int FromDate,ToDate;
protected AlertDialog ad; 

public void run()
{
 try
 {
 cs=new CallSoap();
 String resp=cs.Call(FromDate, ToDate);

 Webservice_.rslt=resp;
 }
 catch(Exception ex)
{
 Webservice_.rslt=ex.toString();
}    
}
} 
```

感谢您宝贵的时间！..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:51:16.117

核心代码将类似于您的javafile中的以下内容......

```
SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE,OPERATION_NAME);
PropertyInfo pi=new PropertyInfo();
pi.setName("a");
pi.setValue(a);
pi.setType(Integer.class);
request.addProperty(pi);
pi=new PropertyInfo();
pi.setName("b");
pi.setValue(b);
pi.setType(Integer.class);
request.addProperty(pi);

SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
SoapEnvelope.VER11);
envelope.dotNet = true;

envelope.setOutputSoapObject(request); 
```

[这里](http://www.codeproject.com/Articles/304302/Calling-Asp-Net-Webservice-ASMX-From-an-Android-Ap)是完整的一步一步来制作相同的。

希望这可以帮助。

最重要的是，您可以[看到](http://www.android.net/forum/beginning-developers/78662-how-call-net-asmx-webservice-android.html)此链接，

谢谢， 吉格

# jquery - 带有纯 jQuery 动画的特殊颜色过渡效果 // 没有 ui 或其他库

> ID：12349958
> 
> 赞同：2
> 
> 时间：2012-09-10T10:38:35.620
> 
> 标签：jquery, jquery-ui, colors, jquery-animate, jquery-effects

我正在尝试在没有任何外部插件的情况下创建 jQuery 颜色动画。到目前为止，我可以设法用 jQuery-ui 做到这一点，但我想用这种方式学习`pure jQuery animate()`

在1.8 上是否可以**用更少的代码**和**没有任何外部 jQuery 插件**来做到这**一点？**

[**这是带有 jQ​​uery 1.7.2 和 ui**的 jsFiddle 示例](http://jsfiddle.net/2EECN/15/)

 ****jQuery：**

```
var Text = $('h1');
var Box = $('.box');

Text.click(function() {
    Text.animate({'color':'#f00'},600)
        .delay(200).animate({'color':'#ff0'},600)
        .delay(200).animate({'color':'#000'},600);
});

Box.click(function() {
    Box.animate({'background-color':'#f00'},600)
        .delay(200).animate({'background-color':'#ff0'},600)
        .delay(200).animate({'background-color':'#000'},600);
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T12:38:38.187

您要求的代码更少，所以这里是我使用[Google Closure Compiler](http://closure-compiler.appspot.com/home)缩小的[相关代码](https://github.com/jquery/jquery-color/blob/master/jquery.color.js)：

```
(function(h,m){function n(a,b,c){var d=r[b.type]||{};if(null==a)return c||!b.def?null:b.def;a=d.floor?~~a:parseFloat(a);return isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a}function s(a){var b=f(),c=b._rgba=[],a=a.toLowerCase();j(v,function(d,g){var e,i=g.re.exec(a);e=i&&g.parse(i);i=g.space||"rgba";if(e)return e=b[i](e),b[k[i].cache]=e[k[i].cache],c=b._rgba=e._rgba,!1});return c.length?("0,0,0,0"===c.join()&&h.extend(c,o.transparent),b):o[a]}function p(a,b,c){c=(c+1)%1;return 1>6*c?
a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}var w=/^([\-+])=\s*(\d+\.?\d*)/,v=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),
parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],f=h.Color=function(a,b,c,d){return new h.Color.fn.parse(a,b,c,d)},k={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,
type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},r={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},t=f.support={},u=h("<p>")[0],o,j=h.each;u.style.cssText="background-color:rgba(1,1,1,.5)";t.rgba=-1<u.style.backgroundColor.indexOf("rgba");j(k,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});f.fn=h.extend(f.prototype,{parse:function(a,b,c,d){if(a===m)return this._rgba=[null,null,null,null],this;if(a.jquery||a.nodeType)a=
h(a).css(b),b=m;var g=this,e=h.type(a),i=this._rgba=[];b!==m&&(a=[a,b,c,d],e="array");if("string"===e)return this.parse(s(a)||o._default);if("array"===e)return j(k.rgba.props,function(d,c){i[c.idx]=n(a[c.idx],c)}),this;if("object"===e)return a instanceof f?j(k,function(c,d){a[d.cache]&&(g[d.cache]=a[d.cache].slice())}):j(k,function(d,c){var b=c.cache;j(c.props,function(d,e){if(!g[b]&&c.to){if(d==="alpha"||a[d]==null)return;g[b]=c.to(g._rgba)}g[b][e.idx]=n(a[d],e,true)});if(g[b]&&h.inArray(null,g[b].slice(0,
3))<0){g[b][3]=1;if(c.from)g._rgba=c.from(g[b])}}),this},is:function(a){var b=f(a),c=!0,d=this;j(k,function(a,e){var i,h=b[e.cache];h&&(i=d[e.cache]||e.to&&e.to(d._rgba)||[],j(e.props,function(a,d){if(null!=h[d.idx])return c=h[d.idx]===i[d.idx]}));return c});return c},_space:function(){var a=[],b=this;j(k,function(c,d){b[d.cache]&&a.push(c)});return a.pop()},transition:function(a,b){var c=f(a),d=c._space(),g=k[d],e=0===this.alpha()?f("transparent"):this,i=e[g.cache]||g.to(e._rgba),h=i.slice(),c=c[g.cache];
j(g.props,function(a,d){var g=d.idx,e=i[g],f=c[g],j=r[d.type]||{};null!==f&&(null===e?h[g]=f:(j.mod&&(f-e>j.mod/2?e+=j.mod:e-f>j.mod/2&&(e-=j.mod)),h[g]=n((f-e)*b+e,d)))});return this[d](h)},blend:function(a){if(1===this._rgba[3])return this;var b=this._rgba.slice(),c=b.pop(),d=f(a)._rgba;return f(h.map(b,function(a,b){return(1-c)*d[b]+c*a}))},toRgbaString:function(){var a="rgba(",b=h.map(this._rgba,function(a,d){return null==a?2<d?1:0:a});1===b[3]&&(b.pop(),a="rgb(");return a+b.join()+")"},toHslaString:function(){var a=
"hsla(",b=h.map(this.hsla(),function(a,d){null==a&&(a=2<d?1:0);d&&3>d&&(a=Math.round(100*a)+"%");return a});1===b[3]&&(b.pop(),a="hsl(");return a+b.join()+")"},toHexString:function(a){var b=this._rgba.slice(),c=b.pop();a&&b.push(~~(255*c));return"#"+h.map(b,function(a){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}});f.fn.parse.prototype=f.fn;k.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,
null,null,a[3]];var b=a[0]/255,c=a[1]/255,d=a[2]/255,a=a[3],g=Math.max(b,c,d),e=Math.min(b,c,d),i=g-e,h=g+e,f=0.5*h;return[Math.round(e===g?0:b===g?60*(c-d)/i+360:c===g?60*(d-b)/i+120:60*(b-c)/i+240)%360,0===f||1===f?f:0.5>=f?i/h:i/(2-h),f,null==a?1:a]};k.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],a=a[3],c=0.5>=d?d*(1+c):d+c-d*c,d=2*d-c;return[Math.round(255*p(d,c,b+1/3)),Math.round(255*p(d,c,b)),Math.round(255*p(d,c,b-1/3)),
a]};j(k,function(a,b){var c=b.props,d=b.cache,g=b.to,e=b.from;f.fn[a]=function(a){g&&!this[d]&&(this[d]=g(this._rgba));if(a===m)return this[d].slice();var b,q=h.type(a),k="array"===q||"object"===q?a:arguments,l=this[d].slice();j(c,function(a,d){var b=k["object"===q?a:d.idx];null==b&&(b=l[d.idx]);l[d.idx]=n(b,d)});return e?(b=f(e(l)),b[d]=l,b):f(l)};j(c,function(d,b){f.fn[d]||(f.fn[d]=function(c){var e=h.type(c),g="alpha"===d?this._hsla?"hsla":"rgba":a,f=this[g](),j=f[b.idx];if("undefined"===e)return j;
"function"===e&&(c=c.call(this,j),e=h.type(c));if(null==c&&b.empty)return this;"string"===e&&(e=w.exec(c))&&(c=j+parseFloat(e[2])*("+"===e[1]?1:-1));f[b.idx]=c;return this[g](f)})})});f.hook=function(a){a=a.split(" ");j(a,function(a,c){h.cssHooks[c]={set:function(a,b){var e,i="";if("string"!==h.type(b)||(e=s(b))){b=f(e||b);if(!t.rgba&&1!==b._rgba[3]){for(e="backgroundColor"===c?a.parentNode:a;(""===i||"transparent"===i)&&e&&e.style;)try{i=h.css(e,"backgroundColor"),e=e.parentNode}catch(j){}b=b.blend(i&&
"transparent"!==i?i:"_default")}b=b.toRgbaString()}try{a.style[c]=b}catch(k){}}};h.fx.step[c]=function(a){a.colorInit||(a.start=f(a.elem,c),a.end=f(a.end),a.colorInit=!0);h.cssHooks[c].set(a.elem,a.start.transition(a.end,a.pos))}})};f.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor");h.cssHooks.borderColor={expand:function(a){var b={};j(["Top","Right","Bottom","Left"],function(c,d){b["border"+
d+"Color"]=a});return b}};o=h.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery); 
```

它在 UTF8 中大约 7kb，没有 gzip 或其他压缩，并且允许您像以前使用 jQuery UI 一样为颜色设置动画。这意味着，它允许您在保留相同代码的同时删除 jQuery UI。

[**小提琴**](http://jsfiddle.net/ult_combo/2EECN/23/)

我还建议优先考虑您的开发时间。第一次加载 7kb 对任何最终用户来说都不会是一个明显的变化，即使是拨号用户也不会。这就是为什么我认为重构这是浪费时间。无需花费数小时/数天重新发明轮子。`=]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T10:48:41.890

据我所知，如果没有插件或 jquery ui 就无法做到这一点，当然不会达到同样的准确度。当然，除非您愿意使用需要大量编码但会产生与插件相同的结果但需要更多努力和工作的大型自定义编写函数。

有很多插件可以使用，我很喜欢[jquery-color](https://github.com/jquery/jquery-color)。

我个人会说 jquery ui 是实现这一目标的最佳方式。

抱歉，如果这不是我们希望的答案

**编辑：**

*正如 gautamdharmapuri 所说，您可以简单地使用 css 函数和时间延迟或超时来更改颜色，但是为了实现动画效果，您需要计算出两者之间的所有颜色，并使其看起来平滑，您需要一个很多过渡。*

**有一个工作演示，我在这里[http://jsfiddle.net/2EECN/21/](http://jsfiddle.net/2EECN/21/)汇总了这个想法， 它表明实际实现将是相当密集的代码。**

**jQuery：**

```
$(function() {
    var textElem = $('h1');
    var box = $('.box');

    //Set up colour array    
    colors = ["#000000", "#080000", "#100000", "#180000", "#200000", "#280000", "#300000", "#380000", "#400000", "#480000", "#500000", "#580000", "#600000", "#680000", "#700000", "#780000", "#800000", "#880000", "#900000", "#980000", "#A00000", "#A80000", "#B00000", "#B80000", "#C00000", "#C80000", "#D00000", "#D80000", "#E00000", "#E80000", "#F00000", "#F80000", "#FF0000"];

    //Click event for text color     
    textElem.click(function() {
        $.each(colors, function(index, color) {
            setTimeout(function() {
                textElem.css("color", color);
            }, 20 * index);

        });
    });

    //Click event for background color.        
    box.click(function() {
        colors = ["#000000", "#080000", "#100000", "#180000", "#200000", "#280000", "#300000", "#380000", "#400000", "#480000", "#500000", "#580000", "#600000", "#680000", "#700000", "#780000", "#800000", "#880000", "#900000", "#980000", "#A00000", "#A80000", "#B00000", "#B80000", "#C00000", "#C80000", "#D00000", "#D80000", "#E00000", "#E80000", "#F00000", "#F80000", "#FF0000"];
        $.each(colors, function(index, color) {
            setTimeout(function() {
                box.css("backgroundColor", color);
            }, 20 * index);

        });
    });

});​ 
```

*在此示例中，这些颜色仅用于 w3schools 上的十六进制颜色图表。* [http://www.w3schools.com/cssref/css_colors.asp](http://www.w3schools.com/cssref/css_colors.asp)

**改进的答案：**

*好的，所以这实际上让我对它如何完成很感兴趣，并且您实际上可以通过以下示例看到，如果您明确设置动画可以通过的周期，您可以获得更多控制权。* [http://jsfiddle.net/2EECN/21/](http://jsfiddle.net/2EECN/21/)。

*它看起来也不错！所以我现在要说这肯定是可能的并且是可以实现的，但是你最好将它打包到一个扩展动画功能的小插件中。***

# java - Java 多线程概念

> ID：12349963
> 
> 赞同：1
> 
> 时间：2012-09-10T10:39:37.727
> 
> 标签：java, multithreading

在我的代码中，这个 setMultiLegNetQuote() 方法在一个线程中，然后如果您看到突出显示的块，它正在调用另一个线程..

我的问题是..

(1) 第一个线程被调用如下......

```
Thread t = custStreamerMap.get(mmsg.getCustomerId());
if (null != t) {
            return t.setQuote(mmsg.getMessageBody());
        } 
```

在这种情况下，线程运行方法是否在我们创建 thred 对象时被调用，但我们直接调用 t.setQuote(mmsg.getMessageBody());

```
synchronized int setQuote(String multiLegData) {

                            NetQuoteTuple netQuoteTuple = new NetQuoteTuple();                          
                            if (some checking) { 
                                netQuoteTuple.setSide(1);
                            } else if (some checking) {
                                netQuoteTuple.setSide(2);
                            }
                            netQuoteList.add(netQuoteTuple);                        
                    **dataBufferThread.setNetQuoteList(netQuoteList);
                    dataBufferThread.setCnt(20000);**
                    return 1;
    } 
```

(2) 然后 dataBufferThread 我的意思是从第一个线程调用第二个线程。当我们这样调用线程时，是否调用了第二个线程的run方法？

```
dataBufferThread.setNetQuoteList(netQuoteList) ?????????? 
```

然后这`dataBufferThread.setCnt(20000);` 在线程的情况下会做什么？这是一个以这种方式声明的 AtomicInteger`AtomicInteger cnt = new AtomicInteger(0)`

这里实际上这个 dataBufferThread 和 Thread 都是单独的线程，运行方法扩展了 Thread ...

这就是我问我们是否为线程创建一个对象并访问它的某些方法的原因......是否调用了线程的运行方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:42:15.700

我不会使用您也描述为 a 的对象，`Thread`因为这更有可能令人困惑而不是有用。

`Thread`调用它的唯一方法是`start()` 从那一点开始它独立运行。

1.  这会调用`Thread`对象的方法。这对该线程没有任何作用，甚至不必运行。

    ```
    return t.setQuote(mmsg.getMessageBody()); 
    ```

2.  您所做的只是设置两个值，仅此而已。涉及一个线程也只是混淆恕我直言。

# mysql - 你能给我一些关于db中表结构的建议吗？

> ID：12349964
> 
> 赞同：0
> 
> 时间：2012-09-10T10:39:37.650
> 
> 标签：mysql, sql

全部。

现在我正在为网站创建 mysql 表的设计。下面你可以看到它。我有 3 张桌子：

1.  **tbl_user** - 对于用户；
2.  **tbl_session** - 用于会话和
3.  **tbl_block** - 用于阻止用户 - 它的工作方式如下：
    *   如果`block == 0`您可以登录，
    *   如果`block == 1`您无法登录： login_number - 递增计数（默认 == 1）如果用户输入 3 次错误密码（login_number == 4），它将被阻止 1 小时（阻止将更改为“1”并且 time_blocked 将设置）
    *   如果`block == 2`您因其他原因无法登录。

* * *

```
-- -----------------------------------------------------
-- Table `mydb`.`tbl_user`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `mydb`.`tbl_user` (
  `user_id` INT NOT NULL AUTO_INCREMENT ,
  `username` VARCHAR(200) NULL ,
  `password` VARCHAR(200) NULL ,
  `salt` VARCHAR(200) NULL ,
  `info` VARCHAR(200) NULL ,
  `date_created` DATETIME NULL ,
  PRIMARY KEY (`user_id`) ,
  UNIQUE INDEX `username_UNIQUE` (`username` ASC) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `mydb`.`tbl_session`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `mydb`.`tbl_session` (
  `session_id` INT NOT NULL AUTO_INCREMENT ,
  `user_id` VARCHAR(200) NULL ,
  `data` VARCHAR(200) NULL ,
  `info` VARCHAR(200) NULL ,
  `date_created` DATETIME NULL ,
  `date_expired` DATETIME NULL ,
  PRIMARY KEY (`session_id`) ,
  UNIQUE INDEX `user_id_UNIQUE` (`user_id` ASC) )
ENGINE = InnoDB;

-- -----------------------------------------------------
-- Table `mydb`.`tbl_user_block`
-- -----------------------------------------------------
CREATE  TABLE IF NOT EXISTS `mydb`.`tbl_user_block` (
  `block_id` INT NOT NULL AUTO_INCREMENT ,
  `user_id` VARCHAR(45) NULL ,
  `block` TINYINT NULL DEFAULT 0 ,
  `login_number` TINYINT NULL DEFAULT 1 ,
  `info` VARCHAR(200) NULL ,
  `date_blocked` DATETIME NULL ,
  PRIMARY KEY (`block_id`) ,
  UNIQUE INDEX `user_id_UNIQUE` (`user_id` ASC) )
ENGINE = InnoDB; 
```

可以吗？我需要改进或改变什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:49:38.200

我会使用它变为 UNBLOCKED 的时间而不是它被阻塞的时间（简化解锁逻辑），但你所拥有的支持你所描述的。

# c++ - Doxygen 产生奇怪的命名空间

> ID：12349966
> 
> 赞同：1
> 
> 时间：2012-09-10T10:39:42.940
> 
> 标签：c++, doxygen

在过去的 3 个小时里，我一直在尝试特别确定.. doxygen 的有趣问题。

问题是，Doxygen为每个匿名命名空间生成了一些有趣**的 @number命名空间（@114、@347、@91 等）。**这些数量有时很重要（所以有些地方，我有大约 20 个 @something 命名空间，只有两个真正的命名空间）。

我的设置已经排除了匿名命名空间。我一一修改了命名空间设置；实际上启用匿名命名空间会为这些 @ 项目生成“编译器可读”名称。我禁用了我的输入过滤器，以排除我注入这些过滤器的可能性。基本上没有任何帮助。

是否可能与某些几乎未被注意到的标志进行交互，从而强制生成这些项目？我如何“杀死”它？该网站充满了@项目，使用它几乎毫无意义。

谢谢束！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T20:41:54.620

@123 标记在 doxygen 内部使用。它们不应出现在输出中。如果您在最新版本（当前为 1.8.2）中看到它们，请在错误跟踪器中提交错误报告。

# .net - .NET Web Api - 几种 GET 和 POST 方法

> ID：12349967
> 
> 赞同：1
> 
> 时间：2012-09-10T10:39:43.953
> 
> 标签：.net, rest, asp.net-web-api

我正在编写一个 REST API 并遇到以下问题：

使用资源 /messages/，我的 MessageController 中有以下方法：

```
[HttpGet]
// retrieves all messages for a user
public HttpResponseMessage GetMessages(Guid RecordId) {}

[HttpGet]
// retrieves only a single messages, specified by guid
public HttpResponseMessage GetMessage(Guid RecordId) {} 
```

在我的 WebApiConfig.cs 中，我有以下路由：

```
config.Routes.MapHttpRoute(
    name: "MessageRouting",
    routeTemplate: "messages/{RecordId}/",
    defaults: new { controller = "Message", RecordId= RouteParameter.Optional }
); 
```

当然，这会失败，因为路由不知道要调用哪个方法。这里的问题是，为了保持 RESTful，我想避免使用额外的查询参数，例如

```
GET /messages/?userid=1 
```

我是否应该从 AccessToken 中提取 userId 并按如下方式调用 GetMessages？

```
GET /messages
AccessToken=foo 
```

我也会在使用 [HttpPost] 和 [HttpPut] 时遇到同样的问题 - 我总是有一个集合或一个我想使用的项目，所以对于每个 Http 方法，我至少有 2 个方法可以调用.

我没有将 GetMessages() 方法移动到 UserController 的选项，因为在那里我会遇到同样的问题 - 似乎使用 Web Api，控制器只能将**每个 HTTP 方法定义一次**，这使得处理集合与单个项目非常困难。

我在保留 RESTful 和让 URL**唯一**标识资源之间有点纠结，但似乎 .NET 在这里没有给我选择，因为我无法在路由中指定 HTTP 方法。或者我可以吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T10:15:28.137

找到解决方案 - 在 WebApiConfig.cs 中，您可以为路由指定“名称”属性。该属性可用于注释方法，例如：

```
public class MessageController() {

    [ActionName("MultipleMessages")]
    [HttpGet]
    public HttpResponseMessage GetMessages(Guid UserId) {}

    [ActionName("SingleMessage")]
    [HttpGet]
    public HttpResponseMessage GetMessage(Guid MessageId) {}

} 
```

这样，您可以在同一个控制器中拥有多个 GET 或 POST 方法。调用这些方法的路由如下所示：

```
// multiple messages, will call MessageController.GetMessages()
config.Routes.MapHttpRoute(
    name: "MultipleMessages",
    routeTemplate: "users/{UserId}/messages",
    defaults: new { controller = "Message", UserId = RouteParameter.Optional }
);

// single messages, will call MessageController.GetMessage()
config.Routes.MapHttpRoute(
    name: "SingleMessage",
    routeTemplate: "messages/{MessageId}/",
    defaults: new { controller = "Message", MessageId = RouteParameter.Optional }
); 
```

# python - 检查缓存是否过时的算法

> ID：12349970
> 
> 赞同：4
> 
> 时间：2012-09-10T10:39:53.687
> 
> 标签：python, algorithm, caching

我的 python 脚本做了一些繁重的计算。为了提高性能，它将计算的数据缓存在磁盘上，这样下次我运行它时，它就不会浪费时间计算同样的东西了。然而，在从缓存中提取数据之前，它需要做一些检查以确保缓存不是陈旧的。这是我卡住的部分。

我的第一个想法是比较缓存的创建时间和python脚本的修改时间，如果后者比前者更大（即更新），我会认为缓存是陈旧的，否则不是。但是，由于 linux 内核不存储文件的创建时间，所以我被困在这一点上。

类似情况：
当 python 解释器从 .py 文件创建 .pyc 文件时，它会执行类似的操作 --> 如果我在创建 .pyc 文件后修改我的 .py 文件，它会创建一个新的 .pyc 文件，否则不会。它是如何做到的？我想知道算法。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T16:56:38.820

只需检查缓存文件的最后修改时间。

更好的是，无论如何这都是您真正想要检查的内容，因为当您更新缓存以存储*新*的计算值时，您想知道最后一次完成的时间，而不是第一次完成的时间。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:45:28.130

您可以拥有一个元数据文件，该文件将包含所有缓存实体的列表及其创建时间

# selenium - 使用 Yii 进行 PHPUnit 敏捷 Web 开发

> ID：12349973
> 
> 赞同：2
> 
> 时间：2012-09-10T10:40:05.873
> 
> 标签：selenium, yii, phpunit

我在阅读了其他类似的帖子之后，我觉得我已经按照信函进行了所有操作，因此我感到困惑和这篇文章：

我正在运行： - Windows 7 64 位 - 带有 php 5.2.5 的 Wamp Server 2.0

我正在阅读 Packt Agile Web Development with Yii and PHP5

迄今为止的行动：

1.  在 c:\wamp\bin\php5.2.5\PEAR\pear 中安装 PEAR（它在“PEAR”中创建了一个子文件夹）
2.  安装和设置 Selenium RC
3.  为环境变量添加了 PEAR_ENV.reg 文件
4.  重新启动并确认 PEAR 正在通过在命令提示符中键入“pear”来工作（也可以在任何子文件夹中使用）
5.  通过 PEAR 安装 PHPUnit 并确认 'phpunit' 正在通过命令提示符工作。在 'functional/SiteTest.php' 处为 Yii 测试用例测试了带有 selenium 的 phpunit
6.  将 php.ini 文件（在 php5.2.5 文件夹和 apache 文件夹中）中的 include_path 更改并测试为 'c:\wamp\bin\php5.2.5\PEAR\pear'。事实证明两者都需要相同才能使 phpunit 和 pear 工作（？）

问题：当我通过命令提示符键入时，以下命令有效：

```
cd c:\wamp\www\yiidemo\protected\tests
phpunit functional\SiteTest.php 
```

phpunit 与 selenium 一起使用 Firefox 测试站点。

但是当我按照书中的说明创建一个空的测试类并运行它时：

```
phpunit unit\MessageTest.php 
```

我明白了：

```
"Warning: require(PHPUnit/Autoload.php): failed to open stream: No such file or directory in c:\wamp\www\yiidemo\protected\tests\unit\MessageTest.php" 
```

但是如果我进入单元文件夹并尝试命令：

```
phpunit MessageTest.php 
```

我收到一条错误消息说明

```
"Fatal Error: Class 'CTestCase' not found in "c:\wamp\www\yiidemo\protected\tests\unit\MessageTest.php" on line 3

<?php 
class MessageTest extends CTestCase
    {

    }
?> 
```

知道我做错了什么。到目前为止，我已经走了很长一段路，并且由于命令行正在工作而陷入困境。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T22:11:13.187

**更新。问题解决了。**

**问题持续存在的详细原因：**

*   我使用的 phpunit 版本中没有 Autoload.php 文件，因此从 github 复制最新版本并将其转储到 pear 文件夹中并从那里进行修补不适用于 setup/install（缺少参考）。

*   即使我只从 github 文件夹中复制了 Autoload.php 文件（看看会发生什么），进一步丢失的引用使我确信 Yii 的预期与我安装的有很大不同。

*   不幸的是，PEAR 根据您的 PHP 版本决定了要安装哪个版本的 phpunit。由于我使用的是 php5.2.5，因此它将安装的 phpunit 的最高版本是没有 Autoload.php 的版本，即使您使用了 --force --alldeps 选项

**向前进。**

*   至少升级您的设置 PHP5.3.4

*   在 \path\to\php\php5.3.4 中运行 go-pear.phar 并接受默认参数

*   将 PEAR_ENV.reg 添加到注册表

*   安装 phpunit

*   安装 phpunit/硒

Wampserver 用户注意（重要！！）升级到 ONLYwampserver 2.1，而不是 2.2！2.2 似乎没有它的 curl 扩展工作，这在安装 phpunit selenium 时会出现问题。即使使用 Wamp 2.1（我是从 2.0 升级的），您也必须在 php 和 apache 文件夹中的 php.ini 文件中手动启用 curl 扩展（据我测试，PEAR 使用 PHP 的 php.ini 而 phpunit 使用 apache 的 php.ini 文件）。尼）。

即使通过 php.ini 启用 curl，使用 WAMP 2.2 也会给我“并排”配置错误。见链接： [Wamp Server 2.2 Windows 7 64-bit and curl not working side-by-side configuration不正确](http://pioneear.wordpress.com/2012/06/11/wamp-server-2-2-windows-7-64-bit-and-curl-not-working-side-by-side-configuration-incorrect/)

为 PHPUnit 安装 Selenium 需要 curl 扩展

考虑到这一切，你不应该有问题！

# iphone - EXC_BAD_ACCESS：mySKPaymentTransaction.payment.productIdentifier

> ID：12349974
> 
> 赞同：-2
> 
> 时间：2012-09-10T10:40:07.953
> 
> 标签：iphone, ios, ios5

我在以下代码中收到 EXC_BAD_ACCESS 错误

```
[self provideContent:mySKPaymentTransaction.payment.productIdentifier ]; 
```

我正在为 mySKPaymentTransaction 赋值，如下所示

```
- (void)recordTransaction:(SKPaymentTransaction *)transaction {

  mySKPaymentTransaction = transaction;
} 
```

请告诉我为什么它会崩溃...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T10:47:42.840

我认为 mySKPaymentTransaction 的范围不存在

```
[self provideContent:mySKPaymentTransaction.payment.productIdentifier ]; 
```

如果您在分配之前没有初始化 mySKPaymentTransaction 变量，请使用 mySKPaymentTransaction = [[SKPaymentTransaction alloc] init]; 进行初始化 然后赋值。

如果不是这种情况，请尝试保留事务变量，而不是直接分配它。

```
mySKPaymentTransaction = [transaction retain]; 
```

# android - 点击地图后创建一个按钮

> ID：12349976
> 
> 赞同：0
> 
> 时间：2012-09-10T10:40:09.350
> 
> 标签：android, google-maps

我想在点击我的谷歌地图后创建一个按钮，就像这样： ![在此处输入图像描述](../Images/1379c748b5bccec773d9a8f2ee9d4901.png)

我怎样才能做到这一点 ？请帮助伙计们。

这是显示地图的方法：

```
public void showMap() {
    View zoomView = mapView.getZoomControls();
    zoomLayout.addView(zoomView, new LinearLayout.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    mapView.displayZoomControls(true);
            latitude = 23.765764900000000000;
            longitude = 90.391317200000000000;
    mapController = mapView.getController();
    point = new GeoPoint(
            (int) (latitude*1E6),
            (int) (longitude*1E6));
    mapController.animateTo(point);
    mapController.setZoom(17);
    mapView.invalidate(); } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T11:27:26.403

```
mapview.onTouchListener(this); 
```

然后确保您的 mapactivity 实现了 ontouchlistener。您将能够从触摸事件中获取 x 和 y 位置。

然后，您使用 mapview.getProjection() 将您的 x 和 y 转换为地理编码坐标。

# css - 带分隔线的引导按钮

> ID：12349979
> 
> 赞同：4
> 
> 时间：2012-09-10T10:40:20.660
> 
> 标签：css, web-applications, twitter-bootstrap

我想创建一个带有分隔线的引导按钮。

在分隔线的左侧，按钮文本将与左侧对齐。在分隔线的右侧，将有一个与中心对齐的加/减图标。分隔线将始终放置在距离按钮右侧 33px 的位置。分隔线将涂成白色。

创造这种效果的最佳技术是什么？（我更喜欢在图像上使用 css 和字体）。

我无法上传示例图片，因为我没有足够的声誉，但我希望你明白了 :)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T12:44:32.333

我最终在按钮内定义了一个跨度（这是一个标签）。跨度位于按钮的右侧并包含图标。我把它的左边框涂成白色，并给了右边的填充，这样它会给图标足够的空间并伸展到按钮的顶部。

CSS代码：

```
.btn-blue {
    /* Button definintion*/
}

.btn-blue-right-section {
    text-align:center;
    padding: 4px 0 5px 10px;
    margin-left: 10px;
    border-left: 1px solid #86c7fe;
}

.btn-blue-icon {
    color: white;
    width: 13px;
} 
```

结果图像： ![在此处输入图像描述](../Images/847c1227c603c63af6cf1f1315ae1a69.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T11:11:44.267

[http://twitter.github.com/bootstrap/components.html#buttonGroups](http://twitter.github.com/bootstrap/components.html#buttonGroups)

```
<div class="btn-group">
<a class="btn" href="#">Button text</a>
<a class="btn" href="#"><i class="icon-plus"></i></a>
</div> 
```

并且只是覆盖颜色。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-09T07:39:30.677

我在这里使用 glyphicon。

因为`bootstrap button`有填充，我们必须删除 并将其`padding`移动到 each `span`。

```
.btn-nopadding{
    padding: 0px;
    font-size: 24px; /* optional */
}
.btn-padding{
    padding: 20px 20px 25px 20px;
}

/* if you want divider to left / logo at right */
.btn-divider-left{
    border-left: 1px solid #1e4d76; /* set your color here */
}

/* if you want divider to right / logo at left */
.btn-divider-right{
    border-right: 1px solid #1e4d76; /* set your color here */
} 
```

这是html

```
<!-- example for left divider / logo at right -->

<a href="#" class="btn btn-primary btn-lg btn-nopadding">
    <span class="btn-padding">BUTTON NAME</span>
    <span class="glyphicon glyphicon-plus btn-divider-left btn-padding"></span>
</a>

<!-- example for right divider / logo at left -->

<a href="#" class="btn btn-primary btn-lg btn-nopadding">
    <span class="glyphicon glyphicon-plus btn-padding btn-divider-right"></span>
    <span class="btn-padding">BUTTON NAME</span>
</a> 
```

小提琴中的示例：[小提琴预览](https://jsfiddle.net/c13u5t90/6/)

在图像中预览：

[![在此处输入图像描述](../Images/a00f4a8ece3990608adff3a9efc24042.png)](https://i.stack.imgur.com/1kaGi.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-24T06:41:18.863

尝试这个

## html

```
<button type="button" class="btn bg-blue fs-it-btn text-uppercase" aria-label="Left Align">Click me <span class="fs-it-btn-vertical-line"></span><i class="fa fa-plus" aria-hidden="true"></i></button> 
```

## css

```
.fs-it-btn {
  margin-top: 10px;
  border: 1px solid #a2a2a2;
  border-radius: 0;
  color: #fff;
  font-weight: bold;
}
.fs-it-btn-vertical-line {
  text-align:center;
  padding: 4px 0 5px 10px;
  margin-left: 10px;
  border-left: 1px solid #a2a2a2;
}
.bg-blue {
    background-color: #2c9deb;
}
.text-uppercase {
    text-transform: uppercase;
} 
```

我使用 fontawesome 作为图标。

# javascript - 如何创建新闻代码

> ID：12349985
> 
> 赞同：10
> 
> 时间：2012-09-10T10:40:28.483
> 
> 标签：javascript, jquery, html

我想要一个从右到左滚动的新闻自动收报机，很容易添加删除项目。

如果必须的话，如果我可以使用 jQuery 或原始 JavaScript，那将是理想的。

有没有 jQuery 插件或我可以获取新闻代码的方法？

经过研究，我注意到其中很多都是从上到下滚动，而不是从右到左滚动。

新闻代码的重点是添加或删除项目很容易，当您将鼠标悬停时，代码会停止，然后在鼠标未悬停时恢复。

# 更新

我刚刚找到了 liScroll - [http://www.gcmingati.net/wordpress/wp-content/lab/jquery/newsticker/jq-liscroll/scrollanimate.html](http://www.gcmingati.net/wordpress/wp-content/lab/jquery/newsticker/jq-liscroll/scrollanimate.html)

[http://htmlmarquee.com/](http://htmlmarquee.com/)看起来也不错

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-10T10:45:57.887

如果您需要像 Ticker 这样的功能，可能是从左到右或从上到下，您可以简单地使用 html`marquee`标签。使用[javascript](/questions/tagged/javascript "显示标记为“javascript”的问题")或[jquery](/questions/tagged/jquery "显示标记为“jquery”的问题")来动态更新它的内容，因为你喂得舒服。

您还可以使用`onmouseover`和`onmouseout`事件更改其运动行为，例如

```
 <marquee behavior="scroll" direction="right" 
        onmouseover="this.stop();" 
        onmouseout="this.start();">
            Hover to stop!
    </marquee>
```

[你可以在htmlmarquee.com](http://www.htmlmarquee.com/)上玩这个。核实。[您可以在此处](http://www.htmlcodes.me/marquees/stop-marquee.cfm)
查看其他可用的运动控制选项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T11:08:29.107

尽管`<marquee>`mtk 建议的 - 元素可以在大多数浏览器中使用，但它不是标准的 HTML，如果标准合规性是一个问题，则不应使用它。然后，您应该使用[适当的 CSS](http://www.w3.org/TR/css3-marquee/)样式！

然后，您可以将您的内容放入几乎任何 HTML 元素中，然后随意“选取”它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T10:42:26.473

你试过[jQuery News Ticker](http://www.jquerynewsticker.com/)吗？

# c++ - 使用自定义序列点绘制轮廓？

> ID：12349988
> 
> 赞同：4
> 
> 时间：2012-09-10T10:40:52.017
> 
> 标签：c++, opencv

我正在使用 OpenCV 使用 cvFindContours() 查找图像的轮廓区域。然后，我想用不同的坐标（和不同的像素对应）绘制这个轮廓......

因此，我使用 cvGetSeqElem() 获取所有轮廓元素点并转换像素对应关系并创建自定义 cvSeq 并将每个元素加载到自定义 cvSeq。但是，当我尝试使用自定义 cvSeq 绘制轮廓时，图像中没有响应。

出于这项工作的目的，我想使用轮廓来掩盖图像。

代码是这样的：

```
<!-- language: c++ -->

CvMemStorage *memStorage = cvCreateMemStorage(0);
CvSeq* seq = cvCreateSeq(0, sizeof(CvSeq), sizeof(CvPoint), memStorage);

void  SetMaskingPoints(CvPoint point)
{ cvSeqPush(seq, &regionPoint); }
void DrawMaskingPoints()
{ cvDrawContours(maskingImage, seq, cvScalar(255,255,255), cvScalar(0,0,0), 0, 1, 8); } 
```

我的代码首先获取轮廓元素并按顺序加载到 SetMaskingPoints()，然后通过 DrawMasingPoints() 绘制轮廓。

我还尝试打印输出，发现 cvSeq 包含点值，但无法绘制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T07:26:04.277

尝试用这个替换`0`in ：。`cvCreateSeq``(CV_SEQ_KIND_CURVE|CV_SEQ_ELTYPE_POINT|CV_SEQ_FLAG_CLOSED)`

# php - 如何在 Symfony2 中为 2 个单独的控制器提供 2 个具有相同模式的动态路由？

> ID：12349994
> 
> 赞同：0
> 
> 时间：2012-09-10T10:41:10.810
> 
> 标签：php, symfony

我有一个生成如下 URL 的博客：

```
/article-name
/my-article
/other-article 
```

然后是一个论坛，其中包含使用以下 URL 的主题：

```
/thread-name
/my-thread
/what-do-you-think 
```

我怎样才能让路由器来处理这种情况？我不想再使用任何 URL 参数（如`/blog/article-name and /forum/thread-name`）。最好的方法是首先询问博客控制器是否有带有此 URL 的文章，如果没有，请询​​问论坛控制器。但是怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:50:33.723

路由器基于正则表达式，因此您不能直接这样做。但是一种可能对您有所帮助的解决方案是指定一条到某个操作的路线，该路线检查是否有文章“某些名称”以及是否存在重定向（或转发）到 ArticleController，如果不存在则重定向/转发到 ForumController。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T10:51:43.927

你必须定义你的事件监听器。

```
services:
    kernel.listener.subdomain_listener:
        class: Path\To\YourListener\RequestListener
        scope: request
        tags:
           - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest } 
```

然后，在你的`RequestListener`你应该定义`onKernelRequest()`方法并将你的路线处理放在那里，例如

```
public function onKernelRequest(GetResponseEvent $event)
{
    if ($event->getRequestType() !== \Symfony\Component\HttpKernel\HttpKernel::MASTER_REQUEST) {
        return;
    }

    //... check if article exists, otherwise forward to blog controller
} 
```

有关事件侦听器的更多信息，您可以参考文档：

[http://symfony.com/doc/current/cookbook/service_container/event_listener.html](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)
[http://symfony.com/doc/2.0/cookbook/doctrine/event_listeners_subscribers.html](http://symfony.com/doc/2.0/cookbook/doctrine/event_listeners_subscribers.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T10:53:16.810

您可以使用控制器的[重定向功能](http://symfony.com/doc/current/book/controller.html#redirecting)。例如：

```
//BlogController.php

public function indexAction ($articleName) {
    // ...
    // If article $articleName exists
    if ($article = $repo->findOneByName($articleName) {
        // ...
    // else let the forum controller handle request
    } else {
        return $this->redirect($this->generateUrl('forum_index', array('articleName' => $articleName)));
    }
    // ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T20:08:13.140

有一个允许链式路由的捆绑包：

[http://symfony-cmf.readthedocs.org/en/latest/reference/routing-extra.html](http://symfony-cmf.readthedocs.org/en/latest/reference/routing-extra.html)

有人在 symfony2 邮件对话中向我推荐了它。

# oop - 我应该扩展我的接口还是我的类的具体实现？

> ID：12349999
> 
> 赞同：0
> 
> 时间：2012-09-10T10:41:33.070
> 
> 标签：oop

假设我有一个`ArticleInterface`和一个`VoteableInterface`。

在声明我`ArticleInterface`应该使用 扩展新接口时，`VoteableInterface`还是应该在 的具体实现中进行`ArticleInterface`？

## 选项1。

```
interface ArticleInterface extends VoteableInterface {} 
```

## 选项 2。

```
interface ArticleInterface {}

class Article implements ArticleInterface, VoteableInterface {} 
```

**哪个更好，为什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T10:45:12.427

答案取决于在概念上是否`ArticleInterface`是`VoteableInterface`- 如果它是扩展是合适的（选项 1），但如果它们不同，则分别实现它们（选项 2）。