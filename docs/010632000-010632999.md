# StackOverflow 问答 10632000-10632999

# jquery - 在文本区域中，将当前行的方向从“rtl”更改为“ltr”

> ID：10632006
> 
> 赞同：6
> 
> 时间：2012-05-17T08:09:40.823
> 
> 标签：jquery, css

我有一个方向从右到左的文本区域

```
#myTextarea
{
    direction: rtl; 
} 
```

在一个事件中，使用 jquery，我将方向从左向右更改：

```
$('#myTextarea').css('direction', 'ltr'); 
```

这会将 textarea 的全部内容从右向左移动。

我只想移动当前行，并让前面的行按默认方向移动。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:16:40.443

这是不可能的，文本方向只能应用于整个`textarea`元素，而不是其中的行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:28:27.540

您可以尝试`'\u202E'`在行首插入字符，这将改变方向。

另请注意，这更像是一种 hack，而不是真正的解决方案，它可能不适用于所有浏览器和所有平台，我会努力思考这是否真的是我想要的。也许使用富文本编辑器会更好。

[小提琴](http://jsfiddle.net/NrHBF/)

# sencha-touch - 如何更改无线电场样式

> ID：10632010
> 
> 赞同：1
> 
> 时间：2012-05-17T08:10:06.607
> 
> 标签：sencha-touch, radio-button, extjs, sencha-touch-2

我正在创建一个单选字段，它为我提供了一个可供选择的复选框。我想要一个带有圆圈和点的标准无线电场。

谁能帮我？

使用的代码是

```
{
                    xtype: 'radiofield',
                    ui:'plain',
                    name: 'sendDoc',
                    value: 'Default',
                    label: 'Default',
                    labelWidth: '50%',
                    checked:true
                },
                {
                    xtype: 'radiofield',
                    name: 'sendDoc',
                    id:'workset',
            //      ui:'radio',
                    value: 'Source Workstep',
                    label: 'Source Workstep',
                    labelWidth: '50%'
                    //disabled:true

        } 
```

# nhibernate - 来自 ICriteria 的 IQueryOver

> ID：10632015
> 
> 赞同：1
> 
> 时间：2012-05-17T08:10:24.680
> 
> 标签：nhibernate, icriteria, queryover

我有这种情况：

1.  `var query = Session.QueryOver<T>()`
2.  `var criteria = query.UnderlyingCriteria.SomethingThereAddCriterion()`

如何将条件转换回 IQueryOver()？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T09:22:55.493

您的条件已添加到 的`UnderlyingCriteria`中`query`。所以你不需要转换`criteria`为 IQueryOver()。再用`query`一次。

# php - 让我的导航菜单与 CodeIgniter 一起工作

> ID：10632016
> 
> 赞同：2
> 
> 时间：2012-05-17T08:10:29.500
> 
> 标签：php, codeigniter

基本上，我有两个控制器使用 CodeIgniter 为学校的一个项目编写一个简单的博客。一个是首页，即登录页面。另一个是当他们登录时的成员。在这个成员控制器中，我正在为 add_post()、view_users_posts() 等创建函数。 Member.php

```
class Member extends CI_Controller{

function __construct(){
    parent::__construct();
    $is_logged_in = $this->session->userdata('is_logged_in');
    if (!isset($is_logged_in) || $is_logged_in !== true) {
        redirect('home');
    }
}

public function index() {
    $this->load->library('pagination');

    $config['base_url'] = base_url() . 'index.php/member/index/';
    $config['total_rows'] = $this->db->get('posts')->num_rows();
    $config['per_page'] = 5;
    $config['num_links'] = 20;

    $this->pagination->initialize($config);

    $data['posts'] = $this->posts_model->get_all_posts($config['per_page'], $this->uri->segment(3));
    $this->load->view('member_view', $data);
}

public function add_post() {
    $this->load->view('add_post_view');
} 
```

我的会员视图有一个导航菜单，其中包含指向这些功能的链接，如下所示：member_view.php

```
 <li><a href="member">Home</a></li>
      <li><a href="member/add_post">Add Post</a></li>
      <li><a href="member/view_users_posts">My Posts</a></li>
      <li><a href="member/reset_pass">Reset Password</a></li>
      <li><a href="member/logout">Logout</a></li> 
```

我还没有完成它们，因为我不知道要编码什么。基本上，如果用户单击 Add Post，它是否应该引用控制器中的函数 add_post，该函数将加载一个名为 add_post 的视图？还是应该直接指向一个名为 Add_post 的新控制器来加载视图？

我的原因是，如果我点击添加帖子，它会将我带到成员/添加帖子，但是当我点击回家时，我得到成员/成员，然后再次添加帖子，我得到成员/成员/添加帖子。

我希望这是有道理的，我完全不知所措。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T08:26:20.453

你需要使用`base url`.

假设您的基本网址是（在配置中），www.example.com/

那么你的代码将是

```
<li><a href="<?php echo base_url('member/add_post');?>">Add Post</a></li> 
```

对其他项目做同样的事情。

**注意：**记住配置文件中的斜线。否则将其包含在`base_url('/member/add_post')`

[参考](http://codeigniter.com/user_guide/helpers/url_helper.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:28:50.287

你在正确的轨道上。对于您拥有的菜单项，您必须完成以下控制器功能：

```
class Member extends CI_Controller {

    function __construct()
    {
        parent::__construct();
        $is_logged_in = $this->session->userdata('is_logged_in');
        if (!isset($is_logged_in) || $is_logged_in !== true) {
            redirect('home');
    }

    function add_post()
    {
        // for example:
        $this->load->view('header');  // standard header and menu view
        $this->load->view('add_post');  // input form view
        $this->load->view('footer');   // standard footer, adverts, etc.
    }

    function view_users_posts()
    {
        $data ['posts'] = $this->model->get_all_posts( ...(etc)... );
        $this->load->view('header');  // standard header and menu view
        $this->load->view('view_users_posts', $data);
        $this->load->view('footer');   // standard footer, adverts, etc.
    }

    function reset_pass()
    {
        ...
    }

    function logout()
    {
        ...
    }
} 
```

第一个新函数引用`views/header.php`、`views/add_post.php`和`views/footer.php`。其他“成员”函数可能也应该加载页眉和页脚（以获得一致的站点外观），但加载不同的主体功能，可能称为与函数非常相似的东西。

我假设`view_users_posts()`访问一些新的模型函数来检索帖子，将其传递给视图以适当地格式化。请注意，应该根据我上面编写的方式`view/view_users_posts.php`访问变量。`$posts`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T11:35:42.193

前段时间我有同样的问题。我的解决方案是将基本 url 设置为 index.php 的路径。例如

```
$config['base_url'] = "http://localhost/codeigniter/index.php/" 
```

所以你可以像这样使用它

```
<a href="<?php echo base_url() ?>Controller/Action/Param1/Param2">Link Text</a> 
```

# google-app-engine - Blobstore 与 GAE 中的其他输入一起使用

> ID：10632018
> 
> 赞同：0
> 
> 时间：2012-05-17T08:10:37.047
> 
> 标签：google-app-engine, blobstore

我知道在 Google App Engine 中上传 blob 是这样的：

```
<%
    BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
%>

<form action="<%= blobstoreService.createUploadUrl("/upload") %>" method="post" enctype="multipart/form-data">
    <input type="file" name="myFile">
    <input type="submit" value="Submit">
</form> 
```

是否可以保存其他输入字段？假设我们在表单中有其他输入。

```
<input type="text" name="str" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:58:17.970

答案是肯定的，这是可能的。我成功地完成了您所要求的事情 - 在 GAE 中上传文件和文本的同一请求。您只需在请求处理程序中处理请求及其参数。

# postgresql - 如何在 Postgres（或 MySql）中创建和查询只读快照？

> ID：10632021
> 
> 赞同：2
> 
> 时间：2012-05-17T08:10:50.423
> 
> 标签：postgresql, snapshot

我想在每天结束时创建一个数据库的只读快照，并将它们保留几个月。

然后，我希望能够针对特定（命名）快照运行查询。

这是否可以优雅地实现并以最少的资源使用（数据库更改非常缓慢，但有几 GB 的数据 - 所以几乎所有数据对所有快照都是通用的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:49:15.767

在 PostgreSQL 中创建快照的常用方法是使用 pg_dump/pg_restore。

一种更快的方法是简单地使用 CREATE DATABASE 来克隆您的数据库。

```
CREATE DATABASE my_copy_db TEMPLATE my_production_db; 
```

这将比转储/恢复快得多。此解决方案的唯一缺点是源数据库不得有任何打开的连接。

默认情况下，该副本不是只读的，但您可以简单地撤销用户的相应权限以确保

# c - PIC单片机的FTP客户端

> ID：10632028
> 
> 赞同：4
> 
> 时间：2012-05-17T08:11:11.883
> 
> 标签：c, pic, microchip

有谁知道我可以与 PIC 微控制器一起使用的 FTP 客户端的源代码？最好在 C 中，我使用的是 PIC 18F97J60。即使源是不同的 PIC 也没关系，我可以修改它以支持我的需要。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T13:41:10.223

从[这个](http://www.microchip.com/stellent/idcplg?IdcService=SS_GET_PAGE&nodeId=2505&param=en535724)页面：

Microchip 提供针对 PIC18、PIC24、dsPIC 和 PIC32 微控制器系列优化的免费许可 TCP/IP 堆栈。如下图所示，堆栈分为多层，每一层都从其正下方的一层或多层访问服务。根据规范，许多 TCP/IP 层是“实时的”，因为它们不仅在请求服务时起作用，而且在发生超时或新数据包到达等事件时也起作用。Microchip 的 TCP/IP 堆栈包括以下主要特性：

*   针对所有 PIC18、PIC24、dsPIC 和 PIC32 系列进行了优化
*   支持的协议：ARP、IP、ICMP、UDP、TCP、DHCP、SNMP、HTTP、FTP、TFTP

编辑：这个包不包括 FTP 客户端的源；只有一个FTP服务器。所以这可以让你大部分时间到达那里。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-17T10:20:28.120

有很多开源代码，例如（从google获取）： [http ://www.thefreecountry.com/webmaster/freeftpclients.shtml](http://www.thefreecountry.com/webmaster/freeftpclients.shtml)

# iis-7 - 在 IIS7 的 URL 重写中优先考虑文件夹

> ID：10632029
> 
> 赞同：-1
> 
> 时间：2012-05-17T08:11:14.460
> 
> 标签：iis-7, community-server

我们目前正在为我们的网站使用 CommunityServer。

最近的一项更改要求创建一个较短的 URL 来访问用户的个人资料页面。因此，如果我们的网站是 www.example.com，我们希望用户个人资料页面可以通过 www.example.com/username 访问。

为了确保现有文件夹/路径的优先级，我将重写规则放在 SiteUrls.config 的最后：

```
<Override xpath = "/SiteUrls/locations/location[@path='/']" mode="add" where="end">
       <url name="userslug" path="" pattern="/([a-zA-Z0-9\-]+$)" physicalPath="/user/" vanity="{2}?slug=$1" page="userprofile.aspx"  />
</Override> 
```

通过 VS2010 Debug 在我的本地环境中进行测试时，这非常有效。访问 www.example.com/folder 被重定向到 www.example.com/folder/ 并且默认页面正确显示。

但是，当我们将更改部署到 live 时，访问 www.example.com/folder 会返回一个 user not found 错误，这意味着查找现有文件夹没有以某种方式优先考虑。

我不确定要从我们的实时服务器中提供哪些相关信息，但是我应该看看有什么东西可以让 URL 访问像在 VS2010 Debug 中一样工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:05:00.143

显然，您所要做的就是创建一个 URL 重写规则，以通过 IIS 向目录添加尾部斜杠。

# javascript - Javascript 适用于 chrome 但不适用于 Firefox

> ID：10632030
> 
> 赞同：-2
> 
> 时间：2012-05-17T08:11:16.840
> 
> 标签：javascript, cross-browser

单击网站上的按钮会在 Chrome 中隐藏元素，但在 Firefox 中不会，这是为什么呢？

-http://209.236.124.197/smart/

页面上的javascript：

```
var TimeToFade = 1000.0;

function fade(eid)
{
  var element = document.getElementById(eid);
  if(element == null)
    return;

  if(element.FadeState == null)
  {
    if(element.style.opacity == null || element.style.opacity == '' 
       || element.style.opacity == '1')
      element.FadeState = 2;
    else
      element.FadeState = -2;
  }

  if(element.FadeState == 1 || element.FadeState == -1)
  {
    element.FadeState = element.FadeState == 1 ? -1 : 1;
    element.FadeTimeLeft = TimeToFade - element.FadeTimeLeft;
  }
  else
  {
    element.FadeState = element.FadeState == 2 ? -1 : 1;
    element.FadeTimeLeft = TimeToFade;
    setTimeout("animateFade(" + new Date().getTime() + ",'" + eid + "')", 33);
  }  
}

function animateFade(lastTick, eid)
{  
  var curTick = new Date().getTime();
  var elapsedTicks = curTick - lastTick;

  var element = document.getElementById(eid);

  if(element.FadeTimeLeft <= elapsedTicks)
  {
    element.style.opacity = element.FadeState == 1 ? '1' : '0';
    element.style.filter = 'alpha(opacity = ' + (element.FadeState == 1 ? '100' : '0') + ')';
    element.FadeState = element.FadeState == 1 ? 2 : -2;
    return;
  }

  element.FadeTimeLeft -= elapsedTicks;
  var newOpVal = element.FadeTimeLeft/TimeToFade;
  if(element.FadeState == 1)
    newOpVal = 1 - newOpVal;

  element.style.opacity = newOpVal;
  element.style.filter = 'alpha(opacity = ' + (newOpVal*100) + ')';

  setTimeout("animateFade(" + curTick + ",'" + eid + "')", 33);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:31:52.457

您的问题与浏览器无关 - 此代码在 Firefox 中有效。您是否尝试过移位+刷新？

# objective-c - 如何在 Mac 应用程序中传递命令行参数

> ID：10632033
> 
> 赞同：0
> 
> 时间：2012-05-17T08:11:24.393
> 
> 标签：objective-c, xcode, macos, command-line-arguments

我已经创建了一个命令行工具应用程序（ Xocde --> New App --> 命令行工具）并且它的运行没有任何问题，现在我想通过终端运行它并传递一些命令行参数，像这样

```
int main(int argc, const char * argv[])
{

    std::cout << "got "<<argc<<" arguments";

    for ( int i = 0; i<argc;i++){
        std::cout << "argument:"<<i<<"= "<<argv[i];
    }

//// some other piece of code 
} 
```

如果我在终端上输入

```
>open VisiMacXsltConverter --args fdafsdfasf i am getting output 

got 1 argumentsargument:0= /Applications/VisiMacXsltConverte 
```

我想通过命令行知道传递参数的方法是什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:44:58.110

如果您只使用一个 -（连字符），这些值将进入一个易失的 UserDefaults 字典（还将在整个过程中覆盖其他键）。

`./program -Param 4`

```
int main(int argc, const char * argv[])
{

    @autoreleasepool {
        NSLog(@"param = %@", [[NSUserDefaults standardUserDefaults] valueForKey:@"Param"]);        
    }
    return 0;
} 
```

或者您可以将这些传递给您想要的任何方式并使用以下内容，这将为您提供 NSStrings 的 NSArray。

```
[[NSProcessInfo processInfo] arguments]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:24:50.117

Why you want to run it with *open*?

I would run it with (if you have it in you $PATH you should omit the './'):

```
./VisiMacXsltConverter arg1 arg2 arg3 arg4 
```

Hope I have not misunderstood you question.

# javascript - jQuery ajax 发布成功 - 将数据保存到变量

> ID：10632038
> 
> 赞同：1
> 
> 时间：2012-05-17T08:11:35.647
> 
> 标签：javascript, jquery

我有这个功能：

```
function getReport(name,x) {
    var xArr = [];
    var yArr = [];
    $.ajax({
        async: false,
        type: "POST",
        //async: false,
        //dataType: "json",
        url: "reportAjax.php",
        data: "name="+ name,
        success: function(data){
            var json = $.parseJSON(data);
            var chartDesc = json.INFO.DESC;
            $.each(json.RESULT, function(i, object) {
                $.each(object, function(property, value) {
                    //alert(property + "=" + value);
                    if (property == x) {
                        xArr.push(value);
                    }
                    else {
                        yArr.push(parseInt(value));
                    }

                });
            });                
        }
    }); 
    console.log(xArr);
    console.log(yArr);
    console.log(chartDesc);
    drawChart(xArr,yArr,chartDesc);
} 
```

出于某种原因，我可以看到and`console.log`的值，但我得到了.`xArr``yArr``chartDesc is not defined``chartDesc`

如果我将这条线移动`console.log(chartDesc)`到这条线的下方，`var chartDesc = json.INFO.DESC`我可以正确地看到它。

这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:13:39.587

您`chartDesc`在 AJAX 回调函数中声明变量，因此它超出了您以后引用它的范围。

要解决此问题，请`var`从行首删除 ，而是在函数顶部使用`xArr`and`yArr`变量声明它：

```
var xArr = [];
var yArr = [];
var chartDesc = ""; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:13:59.910

`chartDesc`变量范围与`success`函数相关联，这就是为什么在它之外，变量是`undefined`. 在`Javascript`函数中为定义的变量创建范围`var`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T08:13:49.543

做你的

```
console.log(xArr);
console.log(yArr); 
```

功能内`success`。并`chartDesc`在成功函数之外删除变量，

`xArr`成功函数外的控制台日志在函数调用时立即执行，但`yArr`由于成功函数执行，插入值需要一些时间。所以你在日志中什么也得不到。

# ios - iOS：如何通过 NSNotification 发送 UIInterfaceOrientation 对象

> ID：10632040
> 
> 赞同：0
> 
> 时间：2012-05-17T08:11:51.710
> 
> 标签：ios, uiinterfaceorientation, nsnotifications

我想在 NSNotification 的 userinfo 字典中传递一个 UIInterfaceOrientation 对象。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:21:01.897

将其包裹在一个 NSNumber 中：

```
id orientationObject = [NSNumber numberWithInteger:UIInterfaceOrientationPortrait];
[userinfo setObject:orientationObject forKey:@"orientation"];

// pass around ...

UIInterfaceOrientation orientation = (UIInterfaceOrientation)[[userinfo objectForKey:@"orientation"] integerValue]; 
```

# iphone - 如何使用 coreplot ios 中的不同点绘制平滑曲线？

> ID：10632043
> 
> 赞同：5
> 
> 时间：2012-05-17T08:12:05.167
> 
> 标签：iphone, ios, core-plot

我能够绘制一条曲线，但它并不平滑。事实上，它完全是分心和波动的。任何人都可以帮助我或建议一种使曲线平滑的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-18T01:57:22.390

在 1.0 版本之后，Core Plot 框架中添加了一个新选项，该选项使用平滑线绘制散点图。您需要使用 Mercurial 获取最新代码或等待下一个版本，目前未计划。

```
plot.interpolation = CPTScatterPlotInterpolationCurved; 
```

# .net - 数字/电子签名基本概念和示例

> ID：10632049
> 
> 赞同：1
> 
> 时间：2012-05-17T08:12:41.113
> 
> 标签：.net, digital-signature, electronic-signature

我在这个领域完全是新手，我必须用这个做一个小项目。谁能告诉我一些链接以获取有关如何实现简单数字签名的基本示例。该项目非常简单，创建一个带有链接的网站，我必须在其中发送一个名为票证的参数（我不知道这张票证是什么或如何创建它）和其他带有该票证验证器的网站 ASP.NET。他们给了我一个带有验证方法的 dll 库，所以它会变得更容易：D 我正处于项目的恐慌阶段：S

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T09:26:10.247

在您的 html 中，您可以尝试[http://thomasjbradley.ca/lab/signature-pad/](http://thomasjbradley.ca/lab/signature-pad/)。根据您所在的司法管辖区，有一些关于如何呈现和捕获数字签名的重要规则。你提到了简单的签名，这就是它，有许多不同类型的签名，所以我会提醒你注意你需要什么形式的签名，以防你需要基于公钥/私钥的方法。

# algorithm - 算法的有效性与效率

> ID：10632056
> 
> 赞同：6
> 
> 时间：2012-05-17T08:13:19.643
> 
> 标签：algorithm

请问有人能告诉我算法的有效性与什么有关吗？我了解效率组件的含义

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T08:22:46.260

有效性与产生预期结果的能力有关。

有些任务本身并没有严格的定义——例如，两种人类语言之间的机器翻译。存在不同的算法来翻译，例如，从英语到西班牙语；它们的*有效性*衡量这些算法产生的结果有多好。另一方面，他们的*效率*衡量他们产生结果的速度，他们使用多少内存，他们需要多少磁盘空间等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:23:31.237

这个问题表明您已经阅读了一些关于算法有效性的内容，并且没有理解作者对该术语的解释——如果作者提供了的话。我不认为对该术语有一个普遍接受的解释，我认为它是属于 Humpty-Dumpty 规则“一个词意味着我所说的意思”的那些术语之一。

它*可能*指的是某些算法的一个方面，这些算法只返回问题的近似解。例如，我们都知道旅行商问题具有 NP 时间复杂度，“解决” TSP 的实际算法可能会在它可以找到的解决方案与可能需要很长时间才能找到的最优解决方案之间的差异上提供一些界限。

# javascript - 本地存储多键存储

> ID：10632058
> 
> 赞同：2
> 
> 时间：2012-05-17T08:13:33.737
> 
> 标签：javascript, html, api, local-storage

我想知道我是否可以在 localStorage 上存储多个密钥？例如 ：

```
localStorage.setItem("a_key", a_value);
localStorage.setItem("another_key", another_value); 
```

有可能这样做吗？如果不是，您建议我采取什么解决方法，因为我需要在客户端存储两个键或变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T08:15:36.483

是的。您可以在本地存储（和会话存储）中存储多个键/值对。从[网络存储规范](http://www.w3.org/TR/webstorage/)（强调添加）：

> 每个 Storage 对象都提供**对键/值对列表的**访问，这些键/值对有时称为项目。键是字符串。任何字符串（包括空字符串）都是有效的键。值是类似的字符串。
> 
> ...
> 
> length 属性必须返回 与对象关联的列表中当前存在**的键/值对的数量。**

# gdb - 在地址获取符号

> ID：10632063
> 
> 赞同：0
> 
> 时间：2012-05-17T08:13:48.617
> 
> 标签：gdb

我正在寻找一种方法来获取位于特定地址中的符号。
我知道我可以使用命令“信息符号 [地址]”。问题是我得到了最近的符号而不是正确的符号。例如，我得到的答案是：a + 28 in section....
相反的方式有效： print &c 给出了我在“信息符号”命令中使用的地址。我正在使用包含包含变量 C 的结构 B 的 A 类，并且我希望“信息符号”命令将返回 C 而不是 A + 偏移量。
有什么办法吗？也许有一个脚本可以完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T14:29:36.103

> 我正在寻找一种方法来获取位于特定地址中的符号。我正在使用包含包含变量 C 的结构 B 的 A 类，并且我希望“信息符号”命令将返回 C 而不是 A + 偏移量。

问题是*没有*这样的符号。也就是说，给定以下代码：

```
struct Foo { int x; };
struct Bar { int y; struct Foo xx; };

struct Bar bb; 
```

存在一个全局符号`bb`，但符号表中*不*存在任何符号`bb.xx`。

因此，您不应该问“符号位于什么位置”，而是“符号位于`&bb.xx`哪个字段”。我认为 GDB 没有简单的方法来回答这个问题。`bb``&bb.xx`

您能做的最好的事情是`maintenance print type bb`，它将打印（除其他外）：

```
nfields 2 0x2877c70
  [0] bitpos 0 bitsize 0 type 0x2877a70 name 'y' (0x287a9ba)
    type node 0x2877a70
    name 'int' (0x287a9a9)
    tagname '<NULL>' (0x0)
    code 0x8 (TYPE_CODE_INT)
    length 4
    ...
  [1] bitpos 32 bitsize 0 type 0x2877570 name 'xx' (0x287a9c6)  << this is the address you want
    type node 0x2877570
    name '<NULL>' (0x0)
    tagname 'Foo' (0x287a98e)
    code 0x3 (TYPE_CODE_STRUCT)
    length 4
    objfile 0x273cc10
    ... 
```

# ruby - 无法更改 RVM 默认值

> ID：10632066
> 
> 赞同：9
> 
> 时间：2012-05-17T08:14:01.637
> 
> 标签：ruby, rvm

我在更改默认红宝石时遇到问题。运行 OS X Lion。

```
macbook:~ work$ rvm list
rvm rubies

=* ruby-1.9.2-p290 [ x86_64 ]
   ruby-1.9.2-p318 [ x86_64 ] 
```

如您所见，1.9.2-p290 是默认值。

```
macbook:~ work$ rvm use --default ruby-1.9.2-p318
Using /usr/local/rvm/gems/ruby-1.9.2-p318
macbook:~ work$ rvm list

rvm rubies

* ruby-1.9.2-p290 [ x86_64 ]
=> ruby-1.9.2-p318 [ x86_64 ] 
```

运行 rvm use --default ruby​​-1.9.2-p318 后，Ruby 发生了变化，但默认仍然是 p290。下次我重新打开 shell 时，使用的 ruby​​ 是 p290。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T18:30:33.217

您有多用户安装，但我还提供用户安装的信息/说明。

# 对于多用户安装：

多用户安装使用 /etc/profile.d/rvm.sh - 每次生成任何 shell 时都会获取此文件，这包括登录时，您所做的任何事情都已经在加载的较早默认值的上下文中工作。

您需要重新启动计算机才能使其生效。

# 对于用户安装：

您需要更新**.*rc**配置文件`--default`才能生效：

```
rvm get stable --auto 
```

并重新启动计算机。

# 两者都需要重新启动

需要重新启动，因为在登录之前/登录时加载了早期的默认值，随着更新的配置文件，加载点移动到适当的位置，并且更改默认值应该没有更多问题。

# 脚本中的默认值

当 RVM 用作 $rvm_path/bin/rvm 中的二进制文件时，它无法设置`--default`，因为它已绑定`use`并且无法在脚本模式下使用，您可以使用以下命令来管理默认值：

```
rvm alias delete default 
rvm alias create default 1.9.3 
```

并使其有效（替换为`rvm use default`）：

```
source $(rvm default do rvm env --path) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-16T16:23:28.743

我遇到了同样的问题，发现这让我很开心：

```
sudo rvm alias create default <ruby-version> 
```

和/或

```
rvm use <ruby-version> --default 
```

这对我有用，将默认值更改为 1.9.3

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T09:57:38.333

尝试 rvm --default （不是 rvm 使用 --default ）。它对我有用

```
rvm list

rvm rubies

ruby-1.9.2-p318 [ x86_64 ]
=* ruby-1.9.3-p125 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

可以看到现在默认的是 1.9.3

```
rvm --default ruby-1.9.2-p318

rvm list

rvm rubies

=* ruby-1.9.2-p318 [ x86_64 ]
   ruby-1.9.3-p125 [ x86_64 ]

# => - current
# =* - current && default
#  * - default 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-11T15:29:39.690

当 RVM 对 ~/.rvm 没有写权限时，您会得到此行为

像这样修复它：（当然在切换您的用户代码/组之后）

sudo chown -R nick:staff ~/.rvm

# c# - 在 DateTime.TryParse() C# MVC3 Web 应用程序中忽略 CurrentCulture？

> ID：10632068
> 
> 赞同：0
> 
> 时间：2012-05-17T08:14:28.590
> 
> 标签：c#, asp.net-mvc-3, localization, formatting, regional

即使我有

```
<globalization uiCulture="en" culture="en-GB" requestEncoding="utf-8" /> 
```

在 web.config 中 `DateTime.TryParse`，没有通过 CultureInfo，忽略了我当前的 Culture。

应用程序是一个 C# MVC3 Web 应用程序。

有什么解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:26:36.740

@Smileek 对，但你总是可以尝试这样的事情

```
DateTime dateResult;
dateString = "03/01/2009 10:00 AM";
culture = CultureInfo.CreateSpecificCulture("en-US");
styles = DateTimeStyles.None;
DateTime.TryParse(dateString, culture, styles, out dateResult); 
```

# eclipse - 如何在绑定到特定 IP 地址的 Tomcat 上通过 Eclipse 部署 RESTful Jersey Web 服务

> ID：10632072
> 
> 赞同：0
> 
> 时间：2012-05-17T08:14:44.637
> 
> 标签：eclipse, tomcat, jersey, web-deployment

我有一个绑定到我机器的 IP 地址（10.100.10.63）的 Tomcat 实例，如下所示：-

```
 <Connector address="10.100.10.63" connectionTimeout="20000" port="8080"  protocol="HTTP/1.1" redirectPort="8443"/> 
```

我有一个使用 Jersey 开发的 RESTful Web 服务。Web 服务是使用 Eclipse 作为动态 Web 项目创建的，并使用 Tomcat 6.0 作为目标运行时服务器。

当我在 Eclipse 中右键单击 Web 服务项目并选择 Run As->Run on Server 时，服务器无法启动。

但是，当我从 server.xml 中删除地址绑定时，如下所示，服务器成功启动并且我能够使用 localhost 使用 Web 服务。

```
 <Connector connectionTimeout="20000" port="8080"  protocol="HTTP/1.1" redirectPort="8443"/> 
```

我如何部署 web 服务，以便我可以将 Tomcat 绑定到我的机器的 IP 地址，以便我的网络中的其他机器也可以访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:13:01.623

尝试在 server.xml 中更改引擎 defaultHost 属性而不是连接器中的地址：

```
<Engine name="Catalina" defaultHost="10.100.10.63">
   <Host name="10.100.10.63" appBase="webapps"
       unpackWARs="true" autoDeploy="true"
       xmlValidation="false" xmlNamespaceAware="false">
   </Host> 
```

# data-structures - 为文档绘制图像

> ID：10632073
> 
> 赞同：0
> 
> 时间：2012-05-17T08:14:44.880
> 
> 标签：data-structures, documentation, drawing

我需要为文档绘制一些图表。像表格、流程图、树等一样思考。

我通常在 Linux 环境中工作，使用 Latex 编写文本和编写数学公式和方程式。你还用什么来画上面的东西？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T13:39:23.147

我通常喜欢的未分类工具列表：

*   [PGF](http://ftp.univie.ac.at/packages/tex/help/Catalogue/entries/pgf.html)：一个非常有用的 LaTeX 宏包，用于绘制各种专业图形。
*   [Graphviz](http://www.graphviz.org/)：一种工具，用于“编程”有向图和其他具有自动布局的东西。
*   [Balsamique](http://www.balsamiq.com/) : 用于通过 PDF 导出制作 GUI 原型的 Web 工具。
*   [像Ditaa](http://ditaa.sourceforge.net/)或[aafigure](https://launchpad.net/aafigure)这样的 Ascii-Art-Tools
*   [Dia Diagram Editor](http://dia-installer.de/)：用于绘制图表的旧但有用的 GUI

# php - 如何只选择一行？

> ID：10632074
> 
> 赞同：-2
> 
> 时间：2012-05-17T08:14:53.740
> 
> 标签：php, mysql, sql, sql-server

我有 2 张桌子

```
 NAME
   +----+---------+
   | id |   name  |
   +----+---------+
   |  1 |   ABC   |
   |  2 |   CCC   |
   +----+---------+

   TBL_STATUS
   +----+-----------+--------+
   | id |  name_id  | status |
   +----+-----------+--------+
   |  1 |     1     |   KU   |
   |  2 |     1     |   HP   |
   |  3 |     1     |   HK   |
   |  4 |     2     |   KU   |
   |  5 |     2     |   HP   |
   +----+-----------+--------+ 
```

我选择并连接在一起（INNER JOIN）这两个表。这是我查询的结果。

```
 +---------+--------+
   |   name  | status |
   +---------+--------+
   |   ABC   |   HK   |
   |   ABC   |   HP   |
   |   ABC   |   KU   |
   |   CCC   |   HP   |
   |   CCC   |   KU   |
   +---------+--------+ 
```

每个名称可以有 3 个状态。HK、HP 或 KU。对于最新状态，我只希望每个名称都有一行。例如：

```
 +---------+--------+
   |   name  | status |
   +---------+--------+
   |   ABC   |   HK   |
   |   CCC   |   HP   |
   +---------+--------+ 
```

状态优先级应先显示 HK（如果有），然后如果没有 HK 显示 HP，依此类推。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:38:14.213

您的最终输出是正确的

```
 +----+---------+--------+
   | id |   name  | status |
   +----+---------+--------+
   |  1 |   ABC   |   HK   | -- Need to remove
   |  2 |   ABC   |   HP   | -- Need to remove
   |  3 |   ABC   |   KU   |
   |  5 |   CCC   |   HP   | -- Need to remove
   |  6 |   CCC   |   KU   | 
   +----+---------+--------+ 
```

您只需要将其限制为每个名称的最大 ID，这是在下面使用`INNER JOIN`聚合查询实现的。

```
SELECT  Name, Status
FROM    Name
        INNER JOIN tbl_Status
            ON tbl_Status.Name_ID = Name.ID
        INNER JOIN
        (   SELECT  MAX(ID) AS MaxStatusID
            FROM    Tbl_Status
            GROUP BY Name_ID
        ) MaxStatus
            ON MaxStatusID = tbl_Status.ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:24:59.287

您必须从中找到 max(id) `TBL_STATUS`，然后将所有数据连接在一起，例如：

```
SELECT n.name, st3.status 
FROM name AS n 
LEFT JOIN 
  (SELECT st1.name_id, MAX(st1.id) AS max_id
     FROM TBL_STATUS st1 
     GROUP BY name_id) AS st2
  ON n.id=st2.name_id
LEFT JOIN 
  TBL_STATUS st3
  ON st2.max_id = st3.id 
```

# asp.net - ASP.NET 4.0 Web 窗体 URL 重写中的最佳实践（屏蔽 URL 地址链接）

> ID：10632083
> 
> 赞同：1
> 
> 时间：2012-05-17T08:15:41.177
> 
> 标签：asp.net, c#-4.0, url-rewriting, url-masking

ASP.NET 4.0 中 URL 重写（屏蔽 URL）的方法和最佳实践是什么？

我们有一个 ASP.NET 4 网站，在客户端上进行测试时，他想隐藏或简化我们的 URL 地址，这意味着他希望隐藏服务器的查询字符串和 url 路径。

如何在 ASP.NET 4 Web 窗体中实现类似的功能？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:25:42.640

您可以使用 IIS 模块来实现此目的

[http://www.iis.net/download/urlrewrite](http://www.iis.net/download/urlrewrite)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-17T08:27:32.767

在 asp.net 4 中，您可以使用 Asp.Net 路由。
请访问[MSDN：ASP.NET Routing](http://msdn.microsoft.com/en-us/library/cc668201.aspx)
希望对您有所帮助。祝你好运。

# excel - 检测excel中的重复项

> ID：10632084
> 
> 赞同：0
> 
> 时间：2012-05-17T08:15:45.003
> 
> 标签：excel

我在 Excel 2003 中有一个客户表，需要将来自同一公司的代表分组。在下面的示例中，如果 A 行中的数据重复，我想将 A 列复制到 D 列。

非常感谢！

![在此处输入图像描述](../Images/e995eebbc51dacc1224737edbc8f3d2b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:01:05.743

在 D2 中放置
`=IF(COUNTIF($A$2:A2,A2)>1,A2,"")`
并复制下来以提取所有重复项（但不是原件）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:08:11.213

我建议您只使用 excel 中的“排序”功能并按 A 列按字母顺序排序。还是我错过了什么？

参考： http: [//office.microsoft.com/en-us/excel-help/sort-a-range-HP005202954.aspx](http://office.microsoft.com/en-us/excel-help/sort-a-range-HP005202954.aspx)

# asp.net-mvc-3 - MVC 3 路线中的 hypen

> ID：10632092
> 
> 赞同：1
> 
> 时间：2012-05-17T08:16:43.000
> 
> 标签：asp.net-mvc-3, routing, custom-routes

这是我想要的网址格式：**/product-24-hid-35wh4-cx-dsgtx**

如何将此 URL 映射到我的操作方法：

```
public ActionResult Product(int id) 
```

这是我的路由代码：

```
 routes.MapRoute(
       "ProductDetail",
       "product-{id}-{name}",
        new { controller = "product", action = "detail", name = UrlParameter.Optional },
        new string[] { "SphereLight.Controllers" }
  ); 
```

但是，它不起作用；我使用了 phil haack 的 routedebugger 来测试这条路线，结果如下：

```
 Key    Value
 name   dsgtx 
 id         24-hid-35wh4-cx 
 controller product 
 action detail 
```

只有*id = 24*是正确的。

总之，我需要一条路线来匹配：

```
 /product-24
   /product-24-
   /product-24-hid-35wh4-cx-dsgtx 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:32:40.423

尝试在 MapRoute 中添加约束：

```
 routes.MapRoute(
       "ProductDetail",
       "product-{id}-{name}",
        new { controller = "product", action = "detail", name = UrlParameter.Optional },
        new { id = @"\d+" }, // <-- change it for @"[^-]+", if it can be non-digit
        new string[] { "SphereLight.Controllers" }
  ); 
```

**更新：**
终于明白了。
主要问题是您不能使用包含相同分隔符的参数。例如，上面的示例适用于`/product-24-nm`，但不适用于`product-24-nm-smth`。

所以，让我们试试这个解决方案：
我已经在默认路由上做了，你可以按照自己的方式

```
 routes.MapRoute(
        "Default",
        "{controller}/{action}/{id}",
        new { controller = "Home", action = "Index", id = UrlParameter.Optional }, 
        new MyRouteHandler()
        ).RouteHandler = new MyRouteHandler(); 
```

实施`MyRouteHandler`：

```
public class MyRouteHandler : MvcRouteHandler
{
    private static readonly Regex ProductPattern = new Regex(@"product\-(\d+)\-?(.*)");

    protected override IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        var match = ProductPattern.Match(requestContext.RouteData.Values["controller"].ToString());
        if (match.Length > 0)
        {
            requestContext.RouteData.Values["controller"] = "Home";
            requestContext.RouteData.Values["action"] = "Detail";
            requestContext.RouteData.Values["id"] = match.Groups[1].Value;
            requestContext.RouteData.Values["name"] = match.Groups[2].Value;
        }
        return base.GetHttpHandler(requestContext);
    }
} 
```

因此，主要思想是检查值是否与我们`product-id-name`在处理程序中的模式匹配，而不是尝试在`MapRoute`. 希望这可以帮助。

# prolog - prolog 问题每 2 个元素输出一次

> ID：10632099
> 
> 赞同：2
> 
> 时间：2012-05-17T08:17:04.800
> 
> 标签：prolog

编写一个 Prolog 谓词`everynth(N, X)`，输出列表中的每个`N`^(元素)`X`。

```
?- everynth(1, [1, 2, 3, 4, 5, 6]).
1 2 3 4 5 6
true.
?- everynth(2, [1, 2, 3, 4, 5, 6]).
2 4 6
true. 
```

这是我尝试过的，虽然我不知道正确使用递归：

```
everynth(1, [X|_]) :-
    write(X),
    write(' ').
everynth(N, [_|H]) :-
    M is N - 1,
    everynth(M, H). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T12:32:21.117

```
:- use_module(library(dialect/hprolog)).

everynth(N,X) :- nth1(N,X,Elem),
                 write(Elem),
                 write(' '),
                 split_at(N,X,_,NewX),
                 everynthHelper(N,NewX).

everynthHelper(N,X) :- length(X,LengthX),
                       N > LengthX, !. 
everynthHelper(N,X) :- nth1(N,X,Elem),
                       write(Elem),
                       write(' '),
                       split_at(N,X,_,NewX),
                       everynthHelper(N,NewX). 
```

我实现了一个单独的帮助程序，因为对 everynthHelper/2 的第一次成功调用确保我们将`true`在最后输出。

# actionscript-3 - 如何运行已在系统托盘中运行的 AIR 应用程序实例？

> ID：10632102
> 
> 赞同：0
> 
> 时间：2012-05-17T08:17:30.113
> 
> 标签：actionscript-3, apache-flex, air, flash-builder

我有一个 AIR 应用程序已经在运行，并在系统托盘中最小化。现在，如果用户尝试从桌面图标或开始菜单启动应用程序，则系统托盘中停靠/最小化的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:32:09.343

看看这篇博文： [所有 AIR 应用程序都是单实例的](http://noclevercode.santacruzsoftware.com/blog/archives/500)

# javascript - 我怎样才能开始通过触摸几个绘制的画布之一来拖动那个画布

> ID：10632104
> 
> 赞同：0
> 
> 时间：2012-05-17T08:17:45.313
> 
> 标签：javascript, html

我正在尝试制作游戏。我想移动两个画布元素之一。我画了一个圆和一个矩形，我想拖动矩形。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:19:46.377

HTML5 Canvas 实际上就像一个位图。您可以设置其中像素的颜色。所以无论你画什么都会变成像素。即不会创建对象。因此，如果您需要 Canvas 上的对象并通过修改对象的属性（x、y、旋转等）来修改 Canvas 内容，您必须开发自己的系统，该系统使用对象管理 Canvas 上的图形。该系统应使用对象的属性清除和更新画布像素。您还必须创建一个显示列表来正确管理对象。

还有一些库可用于相同目的

[http://createjs.com/#!/EaselJS](http://createjs.com/#!/EaselJS)

[http://www.kineticjs.com/](http://www.kineticjs.com/)

# clearcase - 如何查找与 ClearCase UCM 活动相关的文件？

> ID：10632109
> 
> 赞同：3
> 
> 时间：2012-05-17T08:18:26.640
> 
> 标签：clearcase

有人可以帮我解决以下问题：如何找到通过某些活动签入的文件。

例如：

我正在研究一个名为的视图`syoffe_my_product_view`，过去我创建了一个活动 - `BUG123_activity`.
现在我需要找到通过此活动签入的所有文件

您推荐什么命令/选项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T09:15:04.903

请参阅[cleartool lsactivity 手册页](https://www.ibm.com/support/knowledgecenter/SSSH27_7.1.2/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_lsactivity.htm)：

```
 cleartool lsactivity -l activity-id@\aPVob      # (windows)
 cleartool lsactivity -l activity-id@/vobs/aPVob # (unix) 
```

您还有[fmt_ccase的描述选项](https://www.ibm.com/support/knowledgecenter/SSSH27_8.0.1/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)

```
 cleartool describe -fmt "%[versions]CQp"  activity-title@\aPVob 
```

在这两种情况下，请确保使用活动**ID**并拒绝活动“ `headline`”：

![在此处输入图像描述](../Images/c660b6da91d00af4f431839d53c4fe68.png)

例如，上面的活动将需要`test1_24342`，而不是`test1`（它的“标题”）

如果你执行它：

*   **在您的视图之外**，您将获得此活动中记录的所有*版本*的扩展路径。
*   **在您的视野**中，您将获得路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:34:35.517

```
cleartool lsact -l 
```

还有另一种选择，但这是一个很好的开始......

塔米尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-22T07:17:22.357

如果您有 ClearTeam Explorer，请按照以下步骤操作，

*   打开 ClearTeam 导航器。
*   单击**我的视图**- > [*某些视图*]->**我的活动**。
*   清除团队详细信息选项卡将打开，其中包含您创建的活动列表。
*   右键单击特定活动并选择显示更改集。
*   ClearCase Change Set 选项卡将打开并列出特定活动下的签入文件。

# javascript - 带有从对象调用的参数的函数

> ID：10632110
> 
> 赞同：2
> 
> 时间：2012-05-17T08:18:30.180
> 
> 标签：javascript

我是 javascript 新手，我正在尝试一些不同的东西。以下面的例子为例：

```
function obj(){
    this.execute = function(codeToExecute){
        codeToExecute();
    }
}

// Object init and function call

var obj = obj();
obj.execute(function(){
    alert("G'Day!");
} 
```

这将执行`alert`消息。到目前为止一切都很好，但现在我正在尝试`alert`通过参数传输的消息：

```
var obj = obj();
obj.execute(function(message){
    alert(message);
} 
```

`function obj()`现在我必须在某处插入该参数的结构应该是什么？

我在谷歌上找不到任何有用的东西，因为老实说我不知道​​我应该寻找什么。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T08:20:57.853

您可以扩展`execute`，以便将任何其他参数传递给提供的函数：

```
function Obj() {
    this.execute = function(f) {
        var args = [].slice.call(arguments, 1);
        f.apply(this, args);
    }
}

var obj = new Obj();
obj.execute(function(message){
    alert(message);
}, "boo!"); 
```

这条线是“神奇”的一条：

```
var args = [].slice.call(arguments, 1); 
```

它使用`Array.prototype.slice`用于复制数组的函数，但是（有点）欺骗函数使用`arguments`伪数组作为源数组（而不是提供的`[]`），复制除第一个元素之外的所有元素。

您不能只使用它`arguments.slice(1)`，因为`arguments`它不是*真正的*JS 数组。它有一个`.length`属性，您可以访问`arguments[n]`，但它没有`prototype`真正数组所具有的所有额外功能。虽然它的实现`.slice()`并不好，但它已经足够接近了。

注意：您应该使用`new`创建一个对象实例 - 在您的原始代码中，您只是立即*调用* `obj()`，然后将（未定义的）结果重新分配回`obj`- 该代码根本不可能工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T08:28:55.930

你可以这样做：

```
function obj(){
 this.execute = function(codeToExecute, arg){
     codeToExecute(arg);
   }
} 

var obj = new Obj(); 
obj.execute(function(message){
               alert(message);},
           "yourmessage"); 
```

本质上，您将 2 个参数传递给 obj.execute：函数和该函数的参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T08:38:52.697

您可以使用良好的旧 set/get 方法。下面我将消息传递到对象构造函数中，并且可以使用`getMessage`函数访问它。如果您不想传递给构造函数，可以包含一个 set 函数

```
function Obj(message){
this.getMessage = function(){
return message;
}
    this.execute = function(codeToExecute){
        codeToExecute();
    }
}

var obj = new Obj("hello");
obj.execute(function(){
    alert(obj.getMessage());
}); 
```

# python - python - 如何在python中将异类列表扁平化为单个列表？

> ID：10632111
> 
> 赞同：4
> 
> 时间：2012-05-17T08:18:36.450
> 
> 标签：python, list, flatten

我有一个对象列表，其中对象可以是列表或标量。我想要一个只有标量的扁平列表。例如：

```
L = [35,53,[525,6743],64,63,[743,754,757]]
outputList = [35,53,525,6743,64,63,743,754,757] 
```

PS 这个问题的答案不适用于异构列表。[在 Python 中展平一个浅列表](https://stackoverflow.com/questions/406121/flattening-a-shallow-list-in-python)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-17T08:36:41.573

这是一个相对简单的递归版本，它将展平任何深度的列表

```
l = [35,53,[525,6743],64,63,[743,754,757]]

def flatten(xs):
    result = []
    if isinstance(xs, (list, tuple)):
        for x in xs:
            result.extend(flatten(x))
    else:
        result.append(xs)
    return result

print flatten(l) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T08:33:02.387

它可以整齐地在一行中使用`numpy`

```
import numpy as np
np.hstack(l) 
```

你最终得到一个 ndarray

```
array([  35,   53,  525, 6743,   64,   63,  743,  754,  757]) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T08:40:45.210

```
>>> data = [35,53,[525,6743],64,63,[743,754,757]]
>>> def flatten(L):
        for item in L:
            if isinstance(item,list):
                for subitem in item:
                    yield subitem
            else:
                yield item

>>> list(flatten(data))
[35, 53, 525, 6743, 64, 63, 743, 754, 757] 
```

这是用于代码高尔夫目的的单行版本（看起来不太好：D）

```
>>> [y for x in data for y in (x if isinstance(x,list) else [x])]
[35, 53, 525, 6743, 64, 63, 743, 754, 757] 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-17T08:22:56.383

```
l = [35,53,[525,6743],64,63,[743,754,757]]
outputList = []

for i in l:
    if isinstance(i, list):
        outputList.extend(i)
    else:
        outputList.append(i) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-17T08:24:35.010

这是一个oneliner，基于[您提到的问题](https://stackoverflow.com/questions/406121/flattening-a-shallow-list-in-python)：

```
list(itertools.chain(*((sl if isinstance(sl, list) else [sl]) for sl in l))) 
```

**更新：**以及完全基于迭代器的版本：

```
from itertools import imap, chain
list(chain.from_iterable(imap(lambda x: x if isinstance(x, list) else [x], l))) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-17T08:24:41.787

```
outputList = []
for e in l:
    if type(e) == list:
        outputList += e
    else:
        outputList.append(e)

>>> outputList
[35, 53, 525, 6743, 64, 63, 743, 754, 757] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-17T08:28:36.740

```
def nchain(iterable):
    for elem in iterable:
        if type(elem) is list:
            for elem2 in elem:
                yield elem2
        else:
            yield elem 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-17T08:39:27.937

允许无限树深度的递归函数：

```
def flatten(l):
    if isinstance(l,(list,tuple)):
        if len(l):
            return flatten(l[0]) + flatten(l[1:])
        return []
    else:
        return [l]

>>>flatten([35,53,[525,[1,2],6743],64,63,[743,754,757]])
[35, 53, 525, 1, 2, 6743, 64, 63, 743, 754, 757] 
```

我试图避免 isinstance 以允许泛型类型，但旧版本会在字符串上无限循环。现在它正确地展平了字符串（现在不是字符，而是假装字符串是标量）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-17T13:50:16.777

```
>>> L = [35,53,[525,6743],64,63,[743,754,757]]
>>> K = []
>>> [K.extend([i]) if type(i) == int else K.extend(i) for i in L ]
[None, None, None, None, None, None]
>>> K
[35, 53, 525, 6743, 64, 63, 743, 754, 757] 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-02-26T21:00:10.367

此解决方案仅适用于您的特定情况（列表中的标量）并假定标量是整数。这是一个糟糕的解决方案，但它非常短。

```
outputlist = map(int,",".split(str(L).replace("[","").replace("]",""))) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-02-10T06:13:02.733

答案很简单。利用递归。

```
def flatten(nst_lst, final_list):

    for val in nst_lst:
        if isinstance(val, list):
            flatten(val, final_list)
        else:
            final_list.append(val)
    return final_list

#Sample usage
fl_list = []
lst_to_flatten = [["this",["a",["thing"],"a"],"is"],["a","easy"]]

print(flatten(lst_to_flatten, fl_list)) 
```

# java - 空白字符序列到空白

> ID：10632112
> 
> 赞同：5
> 
> 时间：2012-05-17T08:19:00.930
> 
> 标签：java, whitespace

我正在寻找一种解决方案，将 '\''n' 之类的字符序列转换为 '\n'，而无需为所有可能的空白命令（如 ('\t'、'\r'、'\n' 等）编写开关.)

有什么内置的或聪明的技巧可以做到这一点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:21:48.993

不，一旦编译，与afaik`"\\n"`无关。`"\n"`我建议执行以下操作：

**纯Java：**

```
String input = "\\n hello \\t world \\r";

String from = "ntrf";
String to   = "\n\t\r\f";
Matcher m = Pattern.compile("\\\\(["+from+"])").matcher(input);
StringBuffer sb = new StringBuffer();
while (m.find())
    m.appendReplacement(sb, "" + to.charAt(from.indexOf(m.group(1))));
m.appendTail(sb);

System.out.println(sb.toString()); 
```

**使用 Apache Commons StringEscapeUtils：**

```
import org.apache.commons.lang3.StringEscapeUtils;

...

System.out.println(StringEscapeUtils.unescapeJava(input)); 
```

# php - 如何在 PHP 中加密和解密图像文件？

> ID：10632114
> 
> 赞同：4
> 
> 时间：2012-05-17T08:19:12.143
> 
> 标签：php, encryption

如何使用**PHP加密上传的图像文件（如**[www.yahoo.com/images/image1.jpg](http://www.yahoo.com/images/image1.jpg) ）并在浏览器中显示时解密？我想将它保存在文件夹中而不是数据库中。

 *** * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-17T09:26:49.240

所有上传的文件都由 PHP 存储在一个临时文件夹中。

在提交表单后，可以通过 PHP 设置的 $_FILES["file"]["tmp_name"] 变量访问此临时文件路径。

然后，您可以使用 base64_encode() 等编码（非加密）算法对图像数据进行编码，然后使用 base64_decode() 对其进行解码以进行显示。

```
<?php
      $image_binary = fread(fopen($_FILES["file"]["tmp_name"], "r"), 
                                filesize($_FILES["file"]["tmp_name"]));

       $encoded_image =  base64_encode($image_binary);
       //Save the image file with file data set as $encoded_image
?> 
```

要记住的另一件事是，任何具有管理员访问权限的人（例如您的主机）都可以看到您的 PHP 脚本。这样他们就会知道您使用了哪种加密方法，并且可能会找到解密加密文件的方法。

更好的加密策略：[使用 PHP 加密和解密密码的最佳方法？](https://stackoverflow.com/questions/1289061/best-way-to-use-php-to-encrypt-and-decrypt)**

# c# - n 层架构的单元测试

> ID：10632117
> 
> 赞同：3
> 
> 时间：2012-05-17T08:19:18.850
> 
> 标签：c#, visual-studio, unit-testing, stub

我正在使用 3 层架构：控制器、业务和数据层。在我的数据层中，我通过传递连接字符串和其他必要参数来调用 Sql Server 数据库。

我必须为控制器层和业务层编写单元测试。我想编写一个存根（假存储库），从中返回硬编码的值/结果。当我为业务层编写测试时，逻辑应该调用这个存根而不是真正的数据库。

如何在业务层编写代码来实现这一点？

业务层：

```
public string GetValues(string xmlData)
{
    DataObject do = new DataObject ();
    string result = do.GetValues(xmlData);
    return result;
} 
```

数据访问：

```
public static string GetValues(string xmlData)
{
    return SqlHelper.ExecuteScalar(
        ConfigurationManager.AppSettings["ConnectionString"].ToString(),     
        "DBO.usp_GetDetail",
        xmlData
    ).ToString();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:39:19.070

为了测试您的场景，您的代码必须是可测试的。如果它遵循[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则，则很可能是这样。但是让我们专注于进行这种单元测试的必要条件：

1.  您的业​​务层应该依赖于抽象（这在大多数情况下意味着接口）而不是具体的类。这样，在单元测试中，您可以为这些依赖项提供存根。
2.  业务层的依​​赖项应该通过依赖项注入（例如构造函数注入）提供，以便在单元测试中您可以轻松地向它们传递存根对象。

相同的原则应该适用于控制器 - 业务层交互。当你坚持这两条规则（本质上缩小到 SOLID 的*依赖倒置原则*）时，你的代码将比其他方式更具单元测试性（坚持 SOLID 原则总体上是个好主意）。

由于您最终可能会编写模拟/存根，因此我建议使用现有的模拟框架，例如[Moq](http://code.google.com/p/moq/)或[FakeItEasy](https://github.com/FakeItEasy/FakeItEasy)。

**编辑**- 如果代码紧密耦合，您的选择仅限于：

*   重构（这很明显，但使用遗留系统可能不可能/值得努力）
*   使用**付费工具**，例如 TypeMock Isolator。Isolator 使用编译器 API 来拦截方法调用，因此可以*存根/模拟*对静态方法、私有成员和所有免费框架不允许的东西的调用。
*   使用[微软鼹鼠](http://research.microsoft.com/en-us/projects/moles/)。鼹鼠利用动态装配生成生成假类型。这为您提供了类似 Isolator 的灵活性，但它是免费的。请注意，它是一个*更重*的框架（额外的程序集、文件等）。

# php - MongoDB GridFS 嵌入图像 (PHP/HTML)

> ID：10632118
> 
> 赞同：0
> 
> 时间：2012-05-17T08:19:21.223
> 
> 标签：php, html, mongodb, image, nosql

我正在使用 MongoDB 和 GridFS，但我希望能够将其包含在名为 display 的页面上的图像标记中，getimage.php 是从 Mongo 获取图像的页面，例如`<img src='getimage.php' height='100px' width='100px'>`

这是可能的吗？如果是这样，这将是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:47:32.973

仅使用`getimage.php`是不够的。您还应该为要检索的图像提供标识符。这样，您可以将此技术用于无限数量的图像。

```
<img src='getimage.php?oid=4rf55...' height='100px' width='100px'> 
```

如果您使用文件 OID，您可以轻松地从 GridFS 获取图像。您只需根据param`getimage.php`提供的值获取图像。`oid=....``$oid = $_GET['oid']`

# android - ANR 什么时候移动其他活动？

> ID：10632123
> 
> 赞同：0
> 
> 时间：2012-05-17T08:19:48.293
> 
> 标签：android

当我们单击gridView Item时出现ANR问题。我的代码在这里..

```
@Override
public void onCreate(Bundle savedInstanceState)
 {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);  
    setContentView(R.layout.mainscreen);
    setTheValue();
    roll_dialog = new ProgressDialog(MainScreen.this);
    roll_dialog.setMessage(" please wait while loading............");
    roll_dialog.show(); 
    startservice();

    // Getting Current Location 
    LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    LocationListener mlocListener = new MyLocationListener();
    mlocManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 1000, 10, mlocListener);

    profile.setOnClickListener(new OnClickListener() {
        public void onClick(View v) 
        {
            // TODO Auto-generated method stub
            Intent intent=new Intent(MainScreen.this,MyProfile.class);
            intent.putExtra("lat", latLoc);
            intent.putExtra("long", longLoc);
            startActivity(intent);
        }
    });

    message.setOnClickListener(new OnClickListener() 
    {   

        public void onClick(View v) 
        {
            // TODO Auto-generated method stub
            if(ChatScreen.kvp.size()!=0)
            {

                Intent intent=new Intent(MainScreen.this,GetOfflineMessages.class);
                startActivity(intent);
            }
            else
            {
                showDialog(1);
            }
        }
    });

    chatroom.setOnClickListener(new OnClickListener() 
    {

        public void onClick(View v) 
        {
            showDialog(3);
        }
    });

    if(nearBySelected.equals("NearBy"))
    {
        nearBySelected="";
        roll_dialog.setMessage(" please wait while loading............");
        roll_dialog.show(); 
        new Thread()
        {
            @Override
            public void run()
            {
                Looper.prepare();
                getUsers("NEARBY");
            }
        }.start();
    }
    else //if(Near.equals("1")|| Near.equals(""))
    {
        new Thread()
        {
            public void run()
            {
                getUsers("");
            }
        }.start();  
    }

    checkInBtn.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {

                 Bundle mbundle = new Bundle();
                   Intent mintent =new Intent(MainScreen.this, CheckInScreen.class);

                    mbundle.putDouble("lat", latLoc);
                    mbundle.putDouble("langit", longLoc);
                    mbundle.putString("userId", prefName);
                    mintent.putExtras(mbundle);
                startActivity(mintent);

        }
    });

    adMob.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            startActivity(new Intent(MainScreen.this, AdMobScreen.class));
        }
    });

}

@Override
public void onResume() 
{
    super.onResume();
    Near="";
    Far="";
    // do my stuff
    Log.e("resumed","wassup");
    if(ChatScreen.kvp.size()!=0)
    {

        message.setText(""+ChatScreen.kvp.size());
    }
} 

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ((keyCode == KeyEvent.KEYCODE_BACK))
    {
        timer.cancel();
      new WebServiceCallTask().execute();
    }
    return super.onKeyDown(keyCode, event);
}

@Override
protected void onRestart() {
      super.onRestart();

         }

@Override
protected void onDestroy() {
    // TODO Auto-generated method stub
    super.onDestroy();
    //goOffline();
}

public void goOffline()
{
    SharedPreferences myPrefs = this.getSharedPreferences("myPrefs",
            MODE_WORLD_READABLE);
    String prefName = myPrefs.getString(MY_ID, "0");

    String url = "http://dotnet4.peaceofmind.in/ms/ChestMeetAndMeet/ChestMeetAndMeatServices.asmx/GetUserListSpecificUser";
    Log.e("url", "" + url);
    HttpClient httpclient = new DefaultHttpClient();
    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("userid",""+prefName));
        nameValuePairs.add(new BasicNameValuePair("onlinestatus","false"));
        HttpPost httppost = new HttpPost(url);
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);
        HttpEntity entity = response.getEntity();

    }catch(Exception e)
    {
        e.printStackTrace();
    }

}

                              /*it is main web services all app running from here*/
public void getUsers(final String getNearBy)
{
    String flag="";     
    LocationManager lm;
    LocationListener locationListener;
    Location location = null, gps_loc;
    SharedPreferences myPrefs = getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
     prefName = myPrefs.getString(MY_ID, "0");

    if(getNearBy.equalsIgnoreCase("NEARBY"))
     {

        try 
        {
            //mapController = mapView.getController();
            myLocation = new MyLocation()
            {
                public void locationClick() 
                {
                    myLocation.getLocation(MainScreen.this, locationResult);
                }

                LocationResult locationResult = new LocationResult()
                {
                    @Override
                    public void gotLocation(final Location location)
                    {
                        if(location != null)
                        {                           
                            neabylatitude = location.getLatitude();//*1E6
                            nearbylongitute = location.getLongitude();//*1E6
                             origin1 = Double.toString(neabylatitude);
                             origin2=  Double.toString(nearbylongitute);
                            url="http://dotnet4.peaceofmind.in/ms/ChestMeetAndMeet/ChestMeetAndMeatServices.asmx/UserListNearByWithSpecificUserId?sLatitude="+neabylatitude+"&sLongitude="+nearbylongitute+"&iRadius=10"+"&userid="+prefName;
                            System.out.println("near url"+url);
                            if(getNearBy.equalsIgnoreCase("NEARBY"))
                                 handelLocation("NEARBY");
                        }
                    }
                };
            };

            myLocation.locationClick(); 
        } catch (Exception e) 
        {

        }
    }
    else
        handelLocation(getNearBy);

}

private void handelLocation(String getNearBy)
{
    Message msg = handler.obtainMessage();
    if(getNearBy.equalsIgnoreCase("FRIEND"))
    {
        url="http://dotnet4.peaceofmind.in/ms/ChestMeetAndMeet/ChestMeetAndMeatServices.asmx/GetUserFriendList?sUserId="+prefName;  
    }
    if(!getNearBy.equalsIgnoreCase("NEARBY") && !getNearBy.equalsIgnoreCase("FRIEND"))
    {
        url="http://dotnet4.peaceofmind.in/ms/ChestMeetAndMeet/ChestMeetAndMeatServices.asmx/GetUserListSpecificUser?userid="+prefName+"&onlinestatus=true";
    }
    try
    {
        int i;
        char[] buffer = new char[1024];
        Writer writer = new StringWriter();
        URL url1= new URL(url);

        HttpClient client = new DefaultHttpClient();
        //HttpEntity entity;
        HttpGet method= new HttpGet();
        method.setURI(new URI(url));

        //HttpRequest request=new           
        HttpResponse response=client.execute(method);           
        HttpEntity entity=response.getEntity();         
        InputStream stream=entity.getContent();

        //InputStreamReader reader=new InputStreamReader(entity.getContent());
        Log.e("b4 execute in login","aditya");

        SAXParserFactory spf = SAXParserFactory.newInstance(); 
        SAXParser sp = spf.newSAXParser(); 
        //   Get the XMLReader of the SAXParser we created.  
        XMLReader xr = sp.getXMLReader(); 
        //   Create a new ContentHandler and apply it to the XML-Reader 
        //UserListHandler myExampleHandler = new UserListHandler(); 
        MainScreenHandler myExampleHandler = new MainScreenHandler();
        xr.setContentHandler(myExampleHandler); 
        //  Parse the xml-data from our URL.  
        xr.parse(new InputSource(stream)); 
        //  Parsing has finished.  

        ArrayList<MainScreenObject>  nearByArray = myExampleHandler.getnearbydicSearch();
        msg.obj = nearByArray;
        msg.arg1 = SUCCESS;
    }
    catch(Exception e)
    {
        msg.arg1 = FAILURE;
        Log.e("inside catch","io exception"+e.getStackTrace());     
        Log.e("inside catch","io exception"+e.getMessage());        
    }

    handler.sendMessage(msg);
}

//recieve Message here
public void receiveMessage()
{
    Message msg = receivedhandler.obtainMessage();
    String flag="";
    SharedPreferences myPrefs = getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
    String prefName = myPrefs.getString(MY_ID, "0");
    Log.e("getlogin id ","1:"+prefName);

    String url="http://dotnet4.peaceofmind.in/ms/ChestMeetAndMeet/ChestMeetAndMeatServices.asmx/ReceiveMessage?iReceiverId="+prefName;

    try
    {
        Log.d("url","1"+url);
        int i;
        char[] buffer = new char[1024];
        Writer writer = new StringWriter();
        URL url1= new URL(url);

        HttpClient client = new DefaultHttpClient();
        HttpGet method= new HttpGet();
        method.setURI(new URI(url));

        //HttpRequest request=new 
        Log.e("b4 execute in login","1");
        HttpResponse response=client.execute(method);
        Log.e("b4 execute in login","2");
        HttpEntity entity=response.getEntity();
        Log.e("b4 execute in login","3");
        InputStream stream=entity.getContent();

        Log.e("b4 execute in login","3");
        SAXParserFactory spf = SAXParserFactory.newInstance(); 
        SAXParser sp = spf.newSAXParser(); 

        //   Get the XMLReader of the SAXParser we created.  
        XMLReader xr = sp.getXMLReader(); 
        ReceiveMessageHandler myExampleHandler = new ReceiveMessageHandler(); 
        xr.setContentHandler(myExampleHandler); 
        xr.parse(new InputSource(stream)); 
        msg.arg1 = RECIEVESUCCESS;
        msg.obj = myExampleHandler.getReciveMessageList();

    }
    catch(Exception e)
    {
        msg.arg1=RECIEVEFAILURE;
        Log.e("inside catch","io exception");
    }   
    Log.d("getReturn",""+RegistrationSiteList.registrationResponse);
    //return flag;
    receivedhandler.sendMessage(msg);
}

public class ImageAdapter extends BaseAdapter 
{
    private Context mContext;
    private Activity activity;
    private String[] data;
    public ImageLoader imageLoader; 
    private LayoutInflater inflater;
    public ImageAdapter(Context c,Activity a,String[] d) 
    {
        mContext = c;
        data=d;
        activity=a;
        imageLoader=new ImageLoader(a);
        inflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    public int getCount() 
    {
        return data.length;
    }

    public Object getItem(int position)
    {
        return data[position];
    }

    public class ViewHolder
    {
        public TextView name,onlinestatusgreen;
        public ImageView image;
    }

    public long getItemId(int position) 
    {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) 
    {
        View vi=convertView;
        String onlinestauts ="";
        ViewHolder holder;
        String  Username="";
        if(convertView==null)
        {

            vi = inflater.inflate(R.layout.loginstatus, null);
            holder=new ViewHolder();

            holder.name=(TextView)vi.findViewById(R.id.mainname);
            holder.name.setTextColor(R.color.black);

            holder.image=(ImageView)vi.findViewById(R.id.image);
            holder.onlinestatusgreen = (TextView)vi.findViewById(R.id.onlinesataus);
            vi.setLayoutParams(new GridView.LayoutParams(85, 85));
            vi.setPadding(8, 8, 8, 8);
            vi.setBackgroundResource(R.color.white);
            vi.setTag(holder);
        }
        else
        holder=(ViewHolder)vi.getTag();

        if(userlist.size()>position)
        {
            String msgstatus = userlist.get(position).getMaritalStatus();
            String str ="1"+msgstatus;

            if(str.equals("1No Friend List Available"))
            {
                nofriendlistfound=true;
                onlinestauts ="1";

            }
            else
            {
                onlinestauts = userlist.get(position).getOnline();
                Username =userlist.get(position).getFirstName();
            }

        }
        holder.name.setText(Username);
        onlinestauts =onlinestauts+"1";

        if(onlinestauts.equalsIgnoreCase("true1"))
        {
            holder.onlinestatusgreen.setVisibility(View.VISIBLE);
        }
        else
        {
            holder.onlinestatusgreen.setVisibility(View.INVISIBLE);
        }

        if(data.length!=0 && data[position]!=null  && !data[position].equals(""))
        {
            holder.image.setTag(data[position]);
            imageLoader.DisplayImage(data[position],MainScreen.this,holder.image);
        }
        else
        {
            holder.image.setVisibility(View.INVISIBLE);
        }

        return vi;
    }
}

@Override
public boolean onTouch(View v, MotionEvent event) {
    switch (v.getId()) {
    case R.id.meat:
        if(event.getAction() == MotionEvent.ACTION_DOWN){
            meat.setBackgroundResource(R.drawable.meat_h);

            Intent intent=new Intent(MainScreen.this,MeatAnimation.class);
            startActivity(intent);
        finish();   
        }

        else{
            if(event.getAction() == MotionEvent.ACTION_UP)
                meat.setBackgroundResource(R.drawable.meat);
    }
        break;

    case R.id.mainglobal:
        if(event.getAction() == MotionEvent.ACTION_DOWN){
            global.setBackgroundResource(R.drawable.far_h);

                // TODO Auto-generated method stub
                roll_dialog.setMessage(" please wait while loading............");
                roll_dialog.show(); 
                new Thread()
                {
                    @Override
                    public void run()
                    {
                        getUsers("");   
                    }
                }.start();

        }

        else{
            if(event.getAction() == MotionEvent.ACTION_UP)
                global.setBackgroundResource(R.drawable.far);
    }
        break;

    case R.id.friend:
        if(event.getAction() == MotionEvent.ACTION_DOWN){
            friends.setBackgroundResource(R.drawable.friends_h);
            SharedPreferences myPrefs = this.getSharedPreferences("myPrefs",
                    MODE_WORLD_READABLE);
            String prefName = myPrefs.getString(MY_ID, "0");
            if(prefName.equals("0"))
            {

                AlertDialog alertDialog = new AlertDialog.Builder(MainScreen.this).create();
                alertDialog.setMessage("Please First make your account");
                alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int which) {
                      // here you can add functions
                   }
                });
                //alertDialog.setIcon(R.drawable.icon);
                alertDialog.show();
            }
            else
            {
                roll_dialog.setMessage(" please wait while loading............");
                roll_dialog.show(); 
                new Thread()
                {
                    @Override
                    public void run()
                    {
                        Looper.prepare();
                        getUsers("FRIEND");
                    }
                }.start();  
            }
            }

            else{
                if(event.getAction() == MotionEvent.ACTION_UP)
                    friends.setBackgroundResource(R.drawable.freinds);
        }

        break;

    case R.id.mainmrpec:
        if(event.getAction() == MotionEvent.ACTION_DOWN){
            mrPec.setBackgroundResource(R.drawable.pec_h);

            Intent intent=new Intent(MainScreen.this,SendMail.class);
            startActivity(intent);  
            finish();
        }

        else{
            if(event.getAction() == MotionEvent.ACTION_UP)
                mrPec.setBackgroundResource(R.drawable.pec);
    }
    break;
    case R.id.mainnearby:   
        if(event.getAction() == MotionEvent.ACTION_DOWN){
        nearBy.setBackgroundResource(R.drawable.near_h);

            roll_dialog.setMessage(" please wait while loading............");
            roll_dialog.show(); 
            new Thread()
            {
                @Override
                public void run()
                {
                    Looper.prepare();
                    getUsers("NEARBY");
                }
            }.start();
        }

        else{
            if(event.getAction() == MotionEvent.ACTION_UP)
                nearBy.setBackgroundResource(R.drawable.near);
    }
    }
    return false;
    }

protected Dialog onCreateDialog(int id) 
   {        
    if(id == NO_NEW_MESSAGES)//Show message on Sign out button click.
    {
        return new AlertDialog.Builder(this)
        .setTitle("Sorry")
        .setMessage("No messages")
        .setPositiveButton("OK", new DialogInterface.OnClickListener()
        {
            public void onClick(DialogInterface dialog, int which) 
            {

            }
        }
        )
        .create();
    }
    if(id ==3)
    {
        return new AlertDialog.Builder(this)
        .setMessage("'Please buy our full version to unlock SCHNACK,\n undress all men,and help us \n with the cost,it's only 2$'")
        .setPositiveButton("OK", new DialogInterface.OnClickListener()
        {
            public void onClick(DialogInterface dialog, int which) 
            {

            }
        }
        )
        .create();
    }
    if(id ==10)
    {
        return new AlertDialog.Builder(this)
        .setMessage("Please,First Create Profile")
        .setPositiveButton("OK", new DialogInterface.OnClickListener()
        {
            public void onClick(DialogInterface dialog, int which) 
            {

            }
        }
        )
        .create();
    }
    if(id ==4)
    {
        return new AlertDialog.Builder(this)
        .setMessage("No Friend List Available")
        .setPositiveButton("OK", new DialogInterface.OnClickListener()
        {
            public void onClick(DialogInterface dialog, int which) 
            {

            }
        }
        )
        .create();
    }
    return null;
}

private void setTheValue()
  {
    meat=(Button)findViewById(R.id.meat);
    meat.setOnTouchListener(this);
    chatroom=(ImageView)findViewById(R.id.chatroom);
    friends=(Button)findViewById(R.id.friend);
    friends.setOnTouchListener(this);
    profile=(TextView)findViewById(R.id.profile);
    nearBy=(Button)findViewById(R.id.mainnearby);
    nearBy.setOnTouchListener(this);
    mrPec=(Button)findViewById(R.id.mainmrpec);
    mrPec.setOnTouchListener(this);
    global=(Button)findViewById(R.id.mainglobal);
    global.setOnTouchListener(this);
    message=(TextView)findViewById(R.id.messages);      
    checkInBtn = (ImageButton) findViewById(R.id.checkInBtn);
    adMob= (TextView) findViewById(R.id.adMob);

}

private void startservice() 
{
    timer.scheduleAtFixedRate(new TimerTask() 
    {
        public void run() 
        {
            new Thread()
            {
                public void run()
                {
                    Looper.prepare();
                    SharedPreferences myPrefs = getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
                    String prefName = myPrefs.getString(MY_ID, "0");
                    if(!prefName.equalsIgnoreCase("0"))
                    {
                        receiveMessage();
                    }
                }
            }.start();
            Log.e("b4 setmessage","1:"+ChatScreen.kvp.size());

    }

    }, 0, INTERVAL);
}

public void getMeassageDetails()
{
    if(objrReceiveMessageSiteList.size()!=0)
    {
        for(int i=0;i<objrReceiveMessageSiteList.size();i++)
        {
            KeyValuePair keysValues=new KeyValuePair();
            Log.e("added","2");
            keysValues.setLatitude(objrReceiveMessageSiteList.get(i).getLatitude());
            keysValues.setLongitude(objrReceiveMessageSiteList.get(i).getLongitude());
            keysValues.setSenderId(objrReceiveMessageSiteList.get(i).getSenderId());
            keysValues.setMessageType(objrReceiveMessageSiteList.get(i).getMessageType());
            keysValues.setMessage(objrReceiveMessageSiteList.get(i).getMessage());
            keysValues.setTimeStamp(objrReceiveMessageSiteList.get(i).getTimeStamp());
            keysValues.setSenderUserName(objrReceiveMessageSiteList.get(i).getSenderUserName());
            keysValues.setSenderFirstName(objrReceiveMessageSiteList.get(i).getSenderFirstName());
            ChatScreen.kvp.add(keysValues);
            Log.e("added","kvp size"+ChatScreen.kvp.size());
        }
        message.setText(""+ChatScreen.kvp.size());
    }   
}

public void showUsers()
{
    //site=new UserListSiteList();
    imageurl = new String[userlist.size()];//[(site.getProfileImage().size())];              
    int size=userlist.size();//site.getProfileImage().size();
    //Log.e("size",""+size);
    int matchUserId;
    for (int i = 0; i<size; i++) 
    {           
        imageurl[i] =userlist.get(i).getProfileImage(); ;//site.getProfileImage().get(i);
    } 

    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this,MainScreen.this,imageurl));

    gridview.setOnItemClickListener(new OnItemClickListener()
    {

        public void onItemClick(AdapterView<?> arg0, View arg1, int position,long arg3)
        {
            String seletedmemberUserID="";
            String seletedmemberUserName="";
            String statusvalue="";
            if(userlist.size()>position)
            {
                 seletedmemberUserID = userlist.get(position).getUserId();
                 seletedmemberUserName = userlist.get(position).getFirstName();
                 statusvalue = userlist.get(position).getOnline();  
            }

            Bundle objbundle = new Bundle();
            Intent intent=new Intent(MainScreen.this,ProfileScreen.class);
            objbundle.putInt("position",position);
            objbundle.putString("selectuserid",seletedmemberUserID);
            objbundle.putString("selectusername",seletedmemberUserName);
            objbundle.putDouble("userlattiute",latLoc);
            objbundle.putDouble("userlongitute",longLoc);
            objbundle.putString("status",statusvalue);
            intent.putExtras(objbundle);
            startActivity(intent);
        }
    });
}

private class MyLocationListener implements LocationListener {
    @Override
    public void onLocationChanged(Location loc) {
        String lat_long = loc.getLatitude() + "," + loc.getLongitude();

        lat_long =  "28.6146643,77.3714361";

        MyConstant.GlobalURL = MyConstant.CHECK_IN_URL+lat_long+"&radius=500&sensor=false&key=05qzDuEPI79pO6b_3kbDiikhFYO6uSQFo94qQpA";         

        latLoc=loc.getLatitude();
        longLoc=loc.getLongitude();

    }
    public void onProviderDisabled(String provider) {
    }       
    public void onProviderEnabled(String provider) {

    }       
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }

}/* End of Class MyLocationListener */

class WebServiceCallTask extends AsyncTask<Void, Void, Void>
{
     private final ProgressDialog dialog = new ProgressDialog(MainScreen.this);
    // can use UI thread here
      protected void onPreExecute() {

      }

    @Override
    protected Void doInBackground(Void... params) {
        goOffline();
        return null;
    }

     // can use UI thread here
      protected void onPostExecute(final String result) {

      }
   }

private Handler handler = new Handler() 
{
    @Override
    public void handleMessage(Message msg) 
    {

        super.handleMessage(msg);
        if(msg.arg1==SUCCESS)
        {
            roll_dialog.dismiss();
            userlist = (ArrayList<MainScreenObject>)msg.obj;
            String value = userlist.get(0).getMaritalStatus();
            String str="1"+value;
            showUsers();
            if(userlist.size()==0 || str.equalsIgnoreCase("1No Friend List Available"))
            {
                showDialog(4);
            }

        }
    }
};

private Handler receivedhandler = new Handler() 
{
    @Override
    public void handleMessage(Message msg) 
    {
        super.handleMessage(msg);
        if(msg.arg1!=RECIEVEFAILURE)
        {
            objrReceiveMessageSiteList =(ArrayList<ReceiveMessageSiteList>)msg.obj;
            if(objrReceiveMessageSiteList.size()!=0)
            {

                for(int i=0;i<objrReceiveMessageSiteList.size();i++)
                {
                    KeyValuePair keysValues=new KeyValuePair();
                    Log.e("added","2");
                    keysValues.setLatitude(objrReceiveMessageSiteList.get(i).getLatitude());
                    keysValues.setLongitude(objrReceiveMessageSiteList.get(i).getLongitude());
                    keysValues.setSenderId(objrReceiveMessageSiteList.get(i).getSenderId());
                    keysValues.setMessageType(objrReceiveMessageSiteList.get(i).getMessageType());
                    keysValues.setMessage(objrReceiveMessageSiteList.get(i).getMessage());
                    keysValues.setTimeStamp(objrReceiveMessageSiteList.get(i).getTimeStamp());
                    keysValues.setSenderUserName(objrReceiveMessageSiteList.get(i).getSenderUserName());
                    keysValues.setSenderFirstName(objrReceiveMessageSiteList.get(i).getSenderFirstName());
                    ChatScreen.kvp.add(keysValues);

                }
                message.setText(""+ChatScreen.kvp.size());
            }
        }

    }
}; 
```

我已经使用 AsyncTask 而不是接收由 Timer 9 以固定间隔调用的处理程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:03:28.003

可能在某个地方您正在阻塞主 UIThread 或在没有线程的情况下执行繁重的操作。没有线程的繁重任务可能会导致 ANR

要了解 ANR 可能导致的位置，请执行以下步骤

> 1）选择android api级别为9
> 
> 2) 请在 setContentView() 之后的 onCreate() 中的以下几行

```
StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder()
    .detectDiskReads().detectDiskWrites().detectNetwork() 
    .penaltyLog().build());
StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()
    .detectLeakedSqlLiteObjects().detectLeakedSqlLiteObjects()
    .penaltyLog().penaltyDeath().build()); 
```

> 3）从logcat的下拉列表中选择Debug

您将获得严格模式日志，该日志指的是您必须采取行动的地方

# php - PHP：从 SQL 查询中读取数据到数组中

> ID：10632128
> 
> 赞同：0
> 
> 时间：2012-05-17T08:20:42.813
> 
> 标签：php, sql, arrays

我是 PHP 新手。我编写了下面给出的代码来创建数组“数据”。它应该有 10 行，但由于某种原因，只有最后（第 10）行被填充。SQL 查询肯定没问题，因为我在 MySQL 查询管理器中检查了它（查询返回 10 行）。

```
$query1="SELECT * FROM tab1, tab2 WHERE tab1.column1=tab2.column2;";
    $result1=DatabaseConnector::ExecuteQueryArray($query1);
    $data = array();
    $i = 0;
    foreach ($result1 as $row):
        $data = array(
            array($i,array("xxx",' EE112',$row['column3'],'FT445'),"2004-03-01 10:00","2004-03-01 14:00"));
        $i++;
    endforeach; 
```

更新 1：我有另一个与我最初的问题有关的问题。当我尝试从数组中读取数据时，出现错误“未定义的偏移量：1”。有趣的是，当我使用`$data =`and not填充“数据”数组`$data[] =`时，没有错误，只是填充了最后一行。

```
for($i=0; $i<count($data); ++$i) {
        $bar = new GanttBar($data[$i][0],$data[$i][1],$data[$i][2],$data[$i][3]);
        $graph->Add($bar);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:22:53.063

那是因为您在每次迭代时都覆盖了整个 $data 变量。利用

```
$data[] = array(... 
```

至于最新的错误 - 你应该`foreach`用来迭代一个数组。这就是它的目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T08:24:11.833

应该喜欢这个附加到一个数组。

```
$data[] = array($i,array("xxx",' EE112',$row['column3'],'FT445'),"2004-03-01 10:00","2004-03-01 14:00"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T08:28:08.363

```
$data = array(...); // Typecasts $data to a new array with given keys and values
$data[] = array(...); // Typecasts a new array to the next array pointer in $data 
```

上面，第 1 行将创建一个全新的数组，用于`$data`覆盖所有以前的数据。在第 2 行，新数组将存储在已经存在的数组`$data`中。

# android - Android 是否支持通过 PayPal 进行应用内支付模式？

> ID：10632130
> 
> 赞同：6
> 
> 时间：2012-05-17T08:20:56.703
> 
> 标签：android, paypal, in-app-purchase, google-checkout

> **可能重复：**
> [如何将 Paypal 集成到 android 应用程序中？](https://stackoverflow.com/questions/7631841/how-integrate-paypal-in-android-application)

android 是否支持通过 PayPal 进行应用内付款，或者我们需要使用 Google Checkout。谁能帮我解决这个问题......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T09:38:44.683

有两点需要注意：

1.  PayPal 有一个[可在 Android 上运行的应用内支付系统](https://www.x.com/developers/paypal/documentation-tools/quick-start-guides/mobile-payment-libraries)。
2.  Google Market***不允许***[使用不是 Google Checkout](http://www.android.com/us/developer-distribution-agreement.html)的应用内付款。

因此，只要您不通过 Google Play 分发应用程序，您就可以使用 PayPal 添加应用程序内付款。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T10:26:02.677

是的，Android 支持通过 Paypal 购买应用程序。我已经在我的应用程序中完成了。

首先，您必须在 Paypal Sandbox 上创建测试帐户。使用它，您可以测试您的应用程序是否正常工作。测试后，您可以将 Live Application ID 添加到源代码中。如果你需要我可以给我的源代码。

# asp.net - ASP.NET 4 Web 表单路由和页面资源

> ID：10632133
> 
> 赞同：2
> 
> 时间：2012-05-17T08:21:12.813
> 
> 标签：asp.net, localization, routing, globalization, multilingual

我正在创建一个多语言的 ASP.NET 4 Web 表单应用程序。一切顺利，我一直在为每个应用程序文件夹的 App_LocalResources 子文件夹中的每个页面创建本地资源文件，这一切都很好。

但是，我现在添加了一些使用路由的额外表单，这些表单不再拾取资源文件。

例如，如果我有一个文件 /application/project/edit.aspx，我通常会在 /application/project 文件夹中放置一个 App_LocalResources 文件夹并创建 edit.aspx.resx 等。但是，如果通过路由访问此页面，例如。/application/project/1/edit 然后不再使用本地资源文件，我猜是因为 URL 与资源文件不匹配。

除了在 App_GlobalResources 中为路由页面创建资源文件之外，有什么办法可以解决这个问题吗？例如，您能否在其代码隐藏中定义用于页面的资源文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:40:03.427

我的错。

我一定是瞎了眼，因为我实际上将页面的 resx 文件放入了错误的 App_LocalResource 文件夹（目录级别更高）。

我需要睡觉...

# c# - asp.net MVC3 razor webgrid EditColumn

> ID：10632135
> 
> 赞同：1
> 
> 时间：2012-05-17T08:21:26.477
> 
> 标签：c#, asp.net-mvc-3, razor, webgrid

我有一个有界的*Webgrid*，还有一个编辑“LinkBut​​ton”列。

我想要它，以便当用户单击“LinkBut​​ton”时，它将用数据库中的一些值填充一个文本框（在 WebGrid 下方）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T09:20:57.580

您可以为此使用 jquery，单击链接按钮调用 jquery。

从 jquery 调用一个动作并使该动作执行您想要的任何工作并将该值返回给 jquery，然后使用该值填充文本框。

这是一个链接，它显示了如何从 jquery 调用操作

[http://yassershaikh.com/how-to-call-an-action-from-javascript-or-jquery-in-mvc-3-razor/](http://yassershaikh.com/how-to-call-an-action-from-javascript-or-jquery-in-mvc-3-razor/)

# android - Android：拍照后调用裁剪活动

> ID：10632137
> 
> 赞同：9
> 
> 时间：2012-05-17T08:21:44.707
> 
> 标签：android, crop

我在将拍摄照片的 uri 解析为作物活动时遇到问题。在我的应用程序中，用户可以拍照或从图库中选择一张，然后裁剪并上传。一切听起来都很简单。

从图库中选择时，图库应用会返回所选照片的​​ uri，如下所示：

```
content://media/external/images/media/20 
```

我通过以下代码使用此 uri 开始裁剪活动，一切似乎都很好：

```
Intent intent = new Intent("com.android.camera.action.CROP");
intent.setData(uri);
intent.putExtra("outputX", 96);
intent.putExtra("outputY", 96);
intent.putExtra("aspectX", 1);
intent.putExtra("aspectY", 1);
intent.putExtra("scale", true);
intent.putExtra("return-data", true);            
startActivityForResult(intent, REQUEST_CODE_CROP); 
```

但是当我拍照时，我只能像这样知道照片的路径：

```
file:///mnt/sdcard/iBet88.us/IMAGE_20120517_151606.jpg 
```

并且 Crop Activity 将不接受此 uri。我尝试了另一种使用 Content Provider 的方法：将新捕获的照片添加到 ContentProvider，然后从以下代码中获取 sheme "content://..." 中的新 uri：

```
// TODO insert to Content Provider
ContentResolver cr = getContentResolver();
ContentValues contentValues = new ContentValues();
contentValues.put(MediaStore.Images.Media.DATA, avatarFilePathTmp.getPath());
contentValues.put(MediaStore.Images.Media.IS_PRIVATE, 0);
cr.insert(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, contentValues);

// TODO get id from Content Provider
String[] projection = { 
    MediaStore.Images.Media._ID,
    MediaStore.Images.Media.DATA
};
String selectionClause = "" + MediaStore.Images.Media.DATA + " = ?";

String[] selectionArgs = {avatarFilePathTmp.getPath()};
Cursor mCursor = getContentResolver().query(
    MediaStore.Images.Media.EXTERNAL_CONTENT_URI,
    projection,
    selectionClause,
    selectionArgs,
    "");

Uri uri = null;    
if (null == mCursor) {

} else if (mCursor.getCount() < 1) {

} else {
    mCursor.moveToFirst();
    int id = mCursor.getInt(mCursor.getColumnIndex(MediaStore.Images.Media._ID));

    String u = "content://media/external/images/media/" + id;

    // create new Uri
    uri = Uri.parse(u);
} 
```

我的新 Uri 类似于 Gallery 应用程序中的 uri，但是当我使用新 Uri 启动 Crop Activity 时，我得到了这个异常：

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.android.camera.action.CROP dat=content://media/external/images/media/20 (has extras) } 
```

***我的问题：***
1\. 为什么 Crop Activity 拒绝使用我的新 Uri，尽管我的新 Uri 和 Gallery App 中的 uri 是相同的“content://...”
2.我如何调用 Crop Activity 来裁剪照片我只知道它的路径的sdcard？

我试图谷歌，但仍然没有运气。
对不起，我的英语不好。谢谢你。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-13T20:52:55.357

我有`intent.setType("image/*");`，它仍然没有工作......

为我解决的问题是使用： `intent.setDataAndType(tempImageURI, "image/*");`

祝你好运！

# c++ - 一些 C++ 代码在一个项目中出错，而在另一个项目中编译得很好？

> ID：10632142
> 
> 赞同：1
> 
> 时间：2012-05-17T08:22:04.513
> 
> 标签：c++, xcode

以下代码在一个 C++ 项目中编译良好`RenderingEngine.cpp`：

```
IRenderingEngine* CreateRenderer1()
{
    return new RenderingEngine1();
} 
```

但是如果我在 Xcode 4.3.2 中开始一个新项目，它会给出错误：

> 分配抽象类类型“RenderingEngine1”的对象

定义在`IRenderingEngine.hpp`

```
struct IRenderingEngine {
    virtual void Initialize(int width, int height) = 0;    
    virtual void Render() const = 0;
    virtual void UpdateAnimation(float timeStep) = 0;
    virtual void OnRotate(DeviceOrientation newOrientation) = 0;
    virtual ~IRenderingEngine() {}
}; 
```

如何解决这个问题？（这是[iPhone 3D Programming](http://shop.oreilly.com/product/9780596804831.do)在其[项目 1](http://examples.oreilly.com/9780596804831/HelloArrow/)中的一部分）。

**更新：在`RenderingEngine.cpp`：**

```
public:
    RenderingEngine1();
    void Initialize(int width, int height);
    void Render() const;
    void UpdateAnimation(float timeStep);
    void onRotate(DeviceOrientation newOrientation);

private:
    GLuint m_framebuffer;
    GLuint m_renderbuffer;

}; 
```

并且这5个功能都已定义。（最后两个是虚拟的——现在都是空的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:45:20.023

猜测一下，我会说这取决于您如何使用返回的`IRenderingEngine`指针。当项目在一个项目中编译时，您必须已经从基类中实现了所有必要的纯虚函数。在失败的编译中，您必须缺少一两个实现。

为什么它在“书”示例中编译，但不是您的示例，很难用您提供的信息来说明。我将检查构建输出以确保您正在编译的源文件（两个类的头文件和实现）正是您认为的那些。您可能正在选择另一个`IRenderingEngine`没有所有必需的纯虚拟实现的版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:22:49.277

这可以通过为**所有**纯虚拟基础方法提供实现来解决。

我假设`RenderingEngine1`继承自`IRenderingEngine`. 所以覆盖并实施

```
virtual void Initialize(int width, int height) = 0;    
virtual void Render() const = 0;
virtual void UpdateAnimation(float timeStep) = 0;
virtual void OnRotate(DeviceOrientation newOrientation) = 0; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T05:24:35.443

我在阅读第一章时遇到了同样的问题。这非常令人沮丧。

我刚刚发现你可以点击**红色**的错误信息（右侧），上面写着，

> 分配抽象类类型的对象...

Xcode 将直接切换到该 IRenderingEngine.hpp 文件并以**灰色**显示问题所在。

# nfc - 开放式 nfc 是如何组织的，开放式 API 在应用程序编程中是如何使用的？

> ID：10632143
> 
> 赞同：0
> 
> 时间：2012-05-17T08:22:08.103
> 
> 标签：nfc

我已经下载并阅读了 Open NFC 最新核心包的源文件夹，但我对 Open NFC 程序的结构和 Open NFC API 非常好奇，我是本节的初学者，请帮助，谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-18T05:59:23.533

你可以在 android 和 blackberry 中创建你的 nfc 标签（版本 os 应该是 7.1.0）在 android 和 blackberry 中检查这个链接

[http://supportforums.blackberry.com/t5/Java-Development/Reading-and-Writing-NFC-Smart-Tags/ta-p/1379453](http://supportforums.blackberry.com/t5/Java-Development/Reading-and-Writing-NFC-Smart-Tags/ta-p/1379453)

[http://developer.android.com/guide/topics/nfc/advanced-nfc.html](http://developer.android.com/guide/topics/nfc/advanced-nfc.html)

# javascript - jquery 颜色选择器插件

> ID：10632149
> 
> 赞同：2
> 
> 时间：2012-05-17T08:22:49.133
> 
> 标签：javascript, jquery, html, css, jquery-plugins

我在我的 Web 应用程序中使用这个 jquery 颜色选择器插件[http://www.eyecon.ro/colorpicker/ 。](http://www.eyecon.ro/colorpicker/)一切都很完美，但是当我尝试在**onBeforeShow**上的调色板中设置原始颜色时，它不起作用。

HTML

```
<div id="ncolor"></div><div id="ncolorpicker"><span id="ncpicker"></span></div> 
```

jQuery

```
$("#ncolor").click(function(){
    var a = $("#ncolor").css("background-color");
    $("#ncolorpicker").show();
    $("#ncpicker").show().ColorPicker({
    flat: true,
    onBeforeShow: function () {
                  alert("yes");
                  $(this).ColorPickerSetColor(a);
    },
    });
}); 
```

我正在使用**onChange**，**onSubmit**两者都在工作，但不适用于**onBeforeShow**。我什至没有在**onBeforeShow中收到****警报消息**。

 **我需要的是在显示之前在调色板中设置**#ncolor的****背景颜色。**为什么它甚至没有进入**onBeforeShow**？有人可以指导我吗？

 ****谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:35:11.747

似乎 onBeforeShow 在平面模式下不会触发。

在平面模式下，您可以使用`color`属性设置初始颜色：

```
.ColorPicker({flat: true, color: '#00ff00'}); 
```

请注意，在 Firefox 中，$("#ncolor").css("background-color") 返回 rgb(,,) 格式的字符串。 `color`接受 # 个字符串 (#00ff00) 或像这样的 rgb 对象 {r: 0, g: 255, b: 0}

因此，您可能需要先进行一些转换。

此外，在您的代码中，您`.ColorPicker()`每次点击都会调用。这是不必要的。

相反，您可以调用`.ColorPicker()`一次来设置 ColorPicker。然后点击你只需要调用`.ColorPickerSetColor()`和你的显示/隐藏功能。

例如：

```
$(document).ready(function(){
    $("#ncpicker").ColorPicker({
        flat: true,
        // Initial colour here:
        color: '#0000ff'
    });
    $("#ncolor").click(function(){
        // Use your dynamic colour here - may change each time:
        $('#ncpicker').ColorPickerSetColor('#00ffff');

        // Put here your showing/hiding functionality.
    });
}); 
```

Quick example here: [http://jsfiddle.net/jfrej/853bv/](http://jsfiddle.net/jfrej/853bv/) (with showing & hiding taken from the [http://www.eyecon.ro/colorpicker/](http://www.eyecon.ro/colorpicker/) example).******

# jquery - 如何将 id 添加到动态创建的 jquery 选项卡

> ID：10632155
> 
> 赞同：0
> 
> 时间：2012-05-17T08:23:10.350
> 
> 标签：jquery, jquery-ui, tabs, jquery-ui-tabs, jquery-tabs

我正在创建动态 jQuery 选项卡。我想将 id 分配给每个选项卡。

```
$("#addTab").live('click', function() {
    index++;
    var title = 'Tab.....  ' + index;
    var url = '#fragment-' + index;

    addTab(url, title, index);
    $('li[class=ui-state-default]').id(this)=1; // this line to add id

}); 
```

但 id 没有分配给选项卡..

[JS小提琴](http://jsfiddle.net/gP3YZ/6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:26:48.410

```
 $('li[class=ui-state-default]').id(this)=1 
```

应该成为

```
 $('YOUR_NEW_TAB_SELECTOR').attr('id',1) 
```

您使用 .attr 方法将属性“id”设置为“1”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:28:16.697

```
$('li.ui-state-default:last').attr('id', 'some_' + index); // only Numeric id not allowed 
```

**[演示](http://jsfiddle.net/thecodeparadox/2SZgR/3/)**

**注意：** `$('li.ui-state-default').attr('id', 'some_' + index);`更改了所有 li 的 id 有 class `ui-state-default`，但当前代码只会更改最后一个的 id。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T08:32:43.337

嗨**演示**:) [http://jsfiddle.net/gP3YZ/7/](http://jsfiddle.net/gP3YZ/7/)

**代码**

```
$(document).ready(function() {
    $("#tabs").tabs({
        tabTemplate: "<li><a href='#{href}'>#{label}</a> <p title='close' id='removeTab' style='cursor:pointer;display:inline'>x</p></li>"
    });
});

$(function() {
    var index = 0;
    $("#addTab").live('click', function() {
        index++;
        var title = 'Tab.....  ' + index;
        var url = '#fragment-' + index;

        addTab(url, title, index);
        $('li.ui-state-default').attr("id","1");
        alert($('li.ui-state-default').attr("id"));

    });

    function addTab(url, title, index) {

        $('#tabs').tabs("add", url, title, [index]);
    }
    $('#removeTab').live('click', function() {
    selected = $('p[id=removeTab]').index(this); // this line to add id
      $('#tabs').tabs("remove", [selected]);

    });

     $('#appendText').live('click', function() {
        $('#tabs .ui-tabs-panel').each(function(index) {

             if(!($(this).hasClass('ui-tabs-hide'))){
                 //do the dew!
                 $(this).append("Bla Bla!!!");

             }
        });
    });

});

​ 
```

# iphone - 如何检测删除按钮 UItableviewcell 是否被隐藏？

> ID：10632162
> 
> 赞同：5
> 
> 时间：2012-05-17T08:23:59.003
> 
> 标签：iphone, objective-c, ios, cocoa-touch, ios5

我有一个包含 UITableView 的视图。当用户滑动时，我可以在单元格上显示删除按钮。

如果用户触摸删除按钮，将触发一个方法（这工作正常）。但是，如果用户决定不删除单元格并且他触摸视图中的任何位置以隐藏删除按钮。

我怎样才能检测到呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:27:40.147

`[UITableViewCell showingDeleteConfirmation]`

或者

`[UITableViewCell willTransitionToState:]`作为`UITableViewCellStateShowingDeleteConfirmationMask`参数

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T08:27:52.253

当用户在单元格中的删除标记之外点击时，您的程序应该会收到`tableView:didEndEditingRowAtIndexPath:`对表格视图委托的调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T08:33:41.137

在你的 UITableViewCell 子类中实现 willTransitionToState: 方法。当单元格被转换到/从编辑状态时，UITableView 会调用此方法。

在您的类的实现中，您将需要有条件地检查传递给方法的掩码参数的值，以确定单元格正在转换到/从什么状态。掩码的可能值是...

```
enum {
    UITableViewCellStateDefaultMask                     = 0,
    UITableViewCellStateShowingEditControlMask          = 1 << 0,
    UITableViewCellStateShowingDeleteConfirmationMask   = 1 << 1
}; 
```

在您的情况下，您将需要观察到 UITableViewCellStateDefaultMask 的转换，因此您的实现将如下所示......

```
- (void)willTransitionToState:(UITableViewCellStateMask)state {
    if (state == UITableViewCellStateDefaultMask) {
        // User has switched back to default state...
        // ...
    }
} 
```

# jquery - jquery ajax 并调用脚本函数

> ID：10632165
> 
> 赞同：0
> 
> 时间：2012-05-17T08:24:09.410
> 
> 标签：jquery

我的javascript中有一个下拉onchane函数。我希望调用一个异步进程，该进程将在另一个 javascript 中调用一个函数。在进行处理的同时，我想显示一个进行中的图像。当用户在下拉菜单中进行选择时，会发生很多功能。我编写了以下代码，但脚本中的函数在发送前调用，因此进度图像未显示

```
 $.ajax(
        {
            type: "POST",
            url: GetUserDetails(), //note this is a function in a seperate javascript
            data: JSON.stringify({ id: isVal }),
            async: true,
            contentType: "application/json;charset=utf-8",
            dataType: "json",
        beforeSend: function () {
            $('[id$=divAjaxLoader]').show();
        },
        complete: function () {
            $('[id$=divAjaxLoader]').hide(); },
            success: function(response) {
                if ( /\bFailed\b/.test(response.d) == false) {
                   //details...
                    }
            }
        } 
```

在我的母版页中，我加载了脚本，其中一个脚本具有 GetUserDetails() 函数。这是一个漫长的过程......

但是 url 在 beforesend 之前执行，因此 inprogress 永远不会显示..

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:21:37.867

```
var userDetailsUrl = GetUserDetails();

$.ajax({
   url: userDetailsUrl,
   ...
}) 
```

我认为这应该有效。

# html - 带有 CSS 选择器的斑马条纹

> ID：10632167
> 
> 赞同：0
> 
> 时间：2012-05-17T08:24:26.733
> 
> 标签：html, css, css-selectors

我有以下代码片段：

```
<div class="data">
    <h2>Some Title</h2>
    <div id="aPanel75" class="aPanel">
        <span>
            <div class="nameValueHelp field">
                <span class="name">Field Label 1</span>
                <span class="value"><span>Value 1</span></span>
                <span class="help">...</span>
            </div>
        </span>
        <span>
            <div class="nameValueHelp field">
                <span class="name">Field Label 2</span>
                <span class="value"><span>Value 2</span></span>
                <span class="help">...</span>
            </div>
        </span>
        <span>
            <div class="nameValueHelp field">
                <span class="name">Field Label 3</span>
                <span class="value"><span>Value 3</span></span>
                <span class="help">...</span>
            </div>
        </span>
    </div>
</div> 
```

用一点 jQuery 和 CSS 得到斑马条纹：

```
$('.data .field').filter(':even').addClass('odd'); 
```

和

```
.data .odd {
    background-color: #EDF0F5;
} 
```

我想摆脱添加“奇数”类的jQuery，只使用CSS。我尝试了 CSS nth-child 选择器（也是 nth-of-type）的各种组合。但似乎没有任何效果，我得到了所有的灰色，没有白色。

我认为 div.field 周围那些多余的 span 标签是问题所在，但不幸的是，我无法轻松更改底层 HTML 结构或更改任何标签类。

请问有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:19:46.963

您不能使用`.field:nth-child(odd)`or `.field:nth-of-type(odd)`，因为 every是其 parent`.field`的第一个也是唯一的孩子。那可能是你被卡住的地方。`div``span`

由于每个`.field`都嵌入在其自己的 parent`span`中，并且每个`span`都是您的 panel 的子级`div`，因此您可以使用以下命令：

```
.data > .aPanel > span:nth-child(odd) > .field 
```

尽管我应该说，尽管您不能更改标记，但将`div`s 嵌入到`span`s 中仍然是相当不寻常的......即使浏览器会愉快地相应地构造 DOM，请记住，依赖它是不明智的这种行为一直存在。

# ruby-on-rails - Rails 的活动 UI 日期选择器

> ID：10632174
> 
> 赞同：1
> 
> 时间：2012-05-17T08:25:01.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery-ui

我对 Rails 比较陌生。我正在使用 Rails 3，带有 UI Datepicker 的简单表单，它是 jquery 日期时间选择器的包装器。在[https://github.com/kristianmandrup/ui_datepicker-rails3](https://github.com/kristianmandrup/ui_datepicker-rails3)的自述文件中，有几行

```
Activate it like this:

UiDatePickerRails3.activate :simple_form

This can be done fx from inside an initializer. You can pass either :simple_form, :formtastic or :active_admin to the #activate method. 
```

我不知道在哪里放置或运行 UiDatePickerRails3.activate :simple_form 来激活它。

我的查看代码

```
%h2
 Create new task
= simple_form_for @task do |f|
 = f.input :name, :wrapper_html => { :id => 'name' }
 = f.input :description, :wrapper_html => { :id => 'description' }
 = f.input :price, :wrapper_html => { :id => 'price' }
 = f.association :task_type
 = f.input :content, :as => :ckeditor, :label => "Nội dung task", :input_html => {:toolbar => 'Full' }
 = f.input :expired_at, :wrapper_html => {:id => 'expired_at', :class => 'ui-date-picker'}
 -#= f.input :expired_at, :as => :date_picker
 = f.button :submit 
```

这是我的 application.js 文件

```
// This is a manifest file that'll be compiled into application.js, which will include all the files
// listed below.
//
// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,
// or vendor/assets/javascripts of plugins, if any, can be referenced here using a  relative path.
//
// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the
// the compiled file.
//
// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD
// GO AFTER THE REQUIRES BELOW.
//
//= require jquery
//= require jquery-ui
//= require jquery_ujs
//= require bootstrap
//= require_tree .
//= require ckeditor/init 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:43:47.157

初始化程序应该在您的 config/initializers 目录中。
此 .rb 文件是在您运行安装生成器 ( `rails generate jquery:install --ui`)时创建的

更新：好的，您收到该消息的原因是您的 rails 版本是 3.1，它使用资产管道来压缩、连接您的 javascript 和 css。
对于 rails 3.1，资产流水线默认启用。

所以你有两个选择：

**`Option 1: Disable asset pipelining`**
转到 config/environments/development.rb（在需要时对 production.rb 执行相同操作）并设置`config.assets.digest`为 false。

**`Option 2: Follow the workaround as mentioned in the documentation:`**
*（摘自存储库的自述页面）*

在 Rails 3.1 中，当使用资产管道时，不推荐使用此生成器，因此您需要在 app/assets/javascripts/application.js 文件中添加一行：
`//= require jquery-ui`

**更多更新**在开始学习更 高级的 ajax 内容之前，您必须了解 Ajax 的基础知识以及如何使用 rails 来实现它。看看 [这个 railscasts 插曲](http://railscasts.com/episodes/136-jquery)。这是一个很好的教程。

至于您的问题，您错过了很多事情：要让 jquery 工作，您需要适当的 JQuery CSS 和 Javascript 文件，可以从这里下载：[jquery-ui](http://jqueryui.com/)。

接下来，您需要通知您的应用程序在遇到这种情况时要采取什么措施：
`:class => 'ui-date-picker'`

但是，要理解这个概念，您需要了解 Ajax 和 jquery 的工作原理。

现在，只需创建一个新的 .js，将其命名为 datepicker.js 并添加以下内容
`$(document).ready(function(){`
`$('input.ui-date-picker').datepicker();`
`$('input.ui-datetime-picker').datetimepicker();`
`});`

[这些步骤在此处](https://github.com/kristianmandrup/ui_datepicker-rails3)的配置部分中有所提及。

我建议你安装rails 3.0.9，它相对简单。另外，初学者最好使用内置的表单生成器，在开始使用 simple_form 或 formtastic 之前先习惯它。

# java - Logback - 如何通过配置文件设置新的开始和新的一天

> ID：10632175
> 
> 赞同：1
> 
> 时间：2012-05-17T08:25:08.523
> 
> 标签：java, logging

嗨，有什么方法可以在应用程序启动时设置滚动日志，或者如果是新的一天，并通过配置文件将历史记录保存 30 天或 1 个月（不是 30 个文件）。我找了几个小时，但一无所获。可能这种方式不存在，需要编写。

```
<configuration>
    <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>%d [%thread] %-5level %logger{50} - %msg%n
            </pattern>
        </encoder>
    </appender>

    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>/logs/server.log</file>
        <encoder>
            <pattern>%d [%thread] %-5level %logger{50} - %msg%n
            </pattern>
        </encoder>

        <!-- Join this time based rolling with-->
        <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
            <fileNamePattern>/logs/server.%d{yyyy-MM-dd}.log.zip</fileNamePattern>
            <!-- Mean 30 days not 30 files -->
            <maxHistory>30</maxHistory> 
        </rollingPolicy>

        <!-- New start baser Rolling-->
        ...
    </appender>

    <root level="INFO">
    <appender-ref ref="STDOUT" />
        <appender-ref ref="FILE" />
    </root>

</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-06-12T11:23:13.030

这个问题由[https://stackoverflow.com/a/30801658/844648复制和回答](https://stackoverflow.com/a/30801658/844648)

我终于弄明白了。我可以按大小、时间和启动滚动。这是解决方案：

第一次创建你自己的班级

```
@NoAutoStart
public class StartupSizeTimeBasedTriggeringPolicy<E> extends SizeAndTimeBasedFNATP<E> {

    private boolean started = false;

    @Override
    public boolean isTriggeringEvent( File activeFile, E event ) {
        if ( !started ) {
            nextCheck = 0L;
            return started = true;
        }

        return super.isTriggeringEvent( activeFile, event );
    };
} 
```

2、配置lockbax

```
<appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
    <file>${LOGS_DIR}/${FILE_NAME}.log</file>
    <encoder>
        <pattern>%d [%thread] %-5level %logger{50} - %msg%n</pattern>
    </encoder>
    <rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
        <fileNamePattern>${LOGS_DIR}/${FILE_NAME}.%d{yyyy-MM-dd}_%d{HHmmss,aux}.%i.log.zip</fileNamePattern>
        <maxHistory>30</maxHistory>
        <TimeBasedFileNamingAndTriggeringPolicy class="my.StartupSizeTimeBasedTriggeringPolicy">
            <MaxFileSize>250MB</MaxFileSize> 
        </TimeBasedFileNamingAndTriggeringPolicy>
    </rollingPolicy>
</appender> 
```

# java-me - 应用关闭时的 J2ME 蓝牙服务注册表

> ID：10632176
> 
> 赞同：1
> 
> 时间：2012-05-17T08:25:17.833
> 
> 标签：java-me, bluetooth

S40 不允许应用程序在后台运行，因此我可以知道手机是否具有给定 BT 服务的唯一方法是让应用程序运行

是否可以将服务注册到蓝牙注册表，以便即使在应用程序关闭时也可以看到它？

# javascript - 如何在javascript中动态地将项目添加到数组中

> ID：10632180
> 
> 赞同：1
> 
> 时间：2012-05-17T08:25:58.417
> 
> 标签：javascript, jquery, highcharts

首先，我是一个 JavaScript 新手，所以请多多包涵。我有以下脚本来使用 Highchart 框架绘制饼图

```
$(function() {
    var options = {
        colors: ["#66CC00", "#FF0000", "#FF6600"],
        chart: {
            renderTo: 'container',
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: true
        },
        title: {
            text: 'Host Status'
        },
        tooltip: {
            formatter: function() {
                return '<b>' + this.point.name + '</b>: ' + this.total;
            }
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    color: '#000000',
                    connectorColor: '#000000',
                    formatter: function() {
                        return '<b>' + this.point.name + '</b>';
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: 'service status',
            data: []
        }]
    }

    var chart;
    options.series.data.push('['
    Service Ok ',   45.0]')
    $(document).ready(function() {
        chart = new Highcharts.Chart(options)
    });

});​ 
```

我想要做的是将值`series.data`作为对象数组动态加载到数组中。这里做错了什么，有没有更好的方法将数据加载到数据数组中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T08:31:35.810

**series**属性是一个数组，因此您需要像这样编写它（将单个数据点添加到该系列）：

```
options.series[0].data.push( ["Service Ok", 45.0 ]); 
```

我在看[这个 JS Fiddle](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/series/data-array-of-name-value/)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T17:23:48.770

你的代码有一个错误：
你说你想动态加载值，对吗？
但是您的代码只是设置初始系列数据，然后渲染它。
因此，在您的情况下，如果您想“动态地”更改您的系列数据，您必须销毁当前图表，更新它的数据，然后再次渲染它。**可能你损失性能**。

正确的**做法**是使用 highstock api，不要手动更新。如果这样做，在使用图表缩放时可能会出现一些错误，因为要更新图表点，此 api 必须再次计算点，并且它是在您使用上述函数时生成的。
正如您在[**系列参考中看到的那样**](http://www.highcharts.com/stock/ref/#series-object)要更新图表数据，您必须使用以下功能：
设置新数据：`chart.series[0].setData(newData, redraw);` [示例](http://jsfiddle.net/ebuTs/16/)
添加新点：`chart.series[0].addPoint(arrayOfPoints, redraw);` [示例](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/stock/members/series-addpoint/)

**看这个[小提琴](http://jsfiddle.net/MNb7c/1/)**，这里我手动更新图表系列，不使用api函数，会发生什么？没有。

为了获得最佳性能，您可以使用以下代码：

```
 function createChart() {
        chart = new Highcharts.Chart(options);
    }

    // when you want to update it's data
    $(element).yourEvent(function() {
        var newData = ['Service Ok', 50.0];
        if(chart.hasRendered) {
            chart.series[0].setData(newData, true);
        } else {
            // only use it if your chart isn't rendered
            options.series[0].data.push(newData);
            createChart();
        }
    });

$(function() {
    var options = {
        colors: ["#66CC00", "#FF0000", "#FF6600"],
        chart: {
            renderTo: 'container',
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: true
        },
        title: {
            text: 'Host Status'
        },
        tooltip: {
            formatter: function() {
                return '<b>' + this.point.name + '</b>: ' + this.total;
            }
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    color: '#000000',
                    connectorColor: '#000000',
                    formatter: function() {
                        return '<b>' + this.point.name + '</b>';
                    }
                }
            }
        },
        series: [{
            type: 'pie',
            name: 'service status',
            data: ['Service Ok ',   45.0]
        }]
    }

    var chart;
    $(document).ready(function() {
        createChart();
    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T08:31:29.320

我认为它可能对你有帮助 [JavaScript push() 方法规范](http://www.w3schools.com/jsref/jsref_push.asp)

和 [Highcharts 控制规范](http://www.highcharts.com/demo/line-basic)

***Series***是一个对象数组，所以你应该这样做：

```
options.series[0].data.push(["Service Ok", 45.0 ]) 
```

在这种情况下，你会得到

```
series: [{

    type: 'pie',

    name: 'service status',

    data: [
             ["Service Ok", 45.0 ]
          ]

    }] 
```

[**带有饼图的演示**](http://jsfiddle.net/gh/get/jquery/edge/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/pie-basic/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T08:37:32.130

试试这个

```
$(function() {
var options = {   
    series: [{
        type: 'pie',
        name: 'service status',
        data: []
        }]
};    
    var objData={ "type":'bar','name':'second','data':[]};
    options.series.push(objData);
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T08:39:08.573

尝试

```
options.series[0]data[0]= 'Service Ok';
options.series[0]data[1]= 45.0; 
```

# ruby-on-rails - 为什么我在安装 bson_ext 时会出错？

> ID：10632181
> 
> 赞同：2
> 
> 时间：2012-05-17T08:26:03.917
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, mongoid, bson

当我在 Rails 项目文件夹中执行以下命令时：

```
gem install bson_ext 
```

我得到这个错误：

```
#result
Building native extensions.  This could take a while...
ERROR:  Error installing bson_ext:
    ERROR: Failed to build gem native extension.

    /home/absolute/.rvm/rubies/ruby-1.9.3-p0/bin/ruby extconf.rb
checking for asprintf()... yes
checking for ruby/st.h... yes
checking for ruby/regex.h... yes
checking for ruby/encoding.h... yes
creating Makefile

make
compiling bson_buffer.c
compiling cbson.c
cbson.c: In function ‘write_element’:
cbson.c:439:17: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-    after-statement]
cbson.c: In function ‘write_doc’:
cbson.c:608:5: warning: implicit declaration of function ‘bson_buffer_get_max_size’     [-Wimplicit-function-declaration]
cbson.c: In function ‘objectid_generate’:
cbson.c:911:9: warning: implicit declaration of function ‘htonl’ [-Wimplicit-function-declaration]
cbson.c:919:5: warning: implicit declaration of function ‘htons’ [-Wimplicit-function-declaration]
compiling encoding_helpers.c
linking shared-object bson_ext/cbson.so

make install
/bin/install -c -m 0755 cbson.so /home/absolute/.rvm/gems/ruby-1.9.3-p0/gems/bson_ext-1.6.2/ext/bson_ext
make: /bin/install: Command not found
make: *** [/home/absolute/.rvm/gems/ruby-1.9.3-p0/gems/bson_ext-1.6.2/ext/bson_ext/cbson.so] Error 127

Gem files will remain installed in /home/absolute/.rvm/gems/ruby-1.9.3- p0/gems/bson_ext-1.6.2 for inspection.
Results logged to /home/absolute/.rvm/gems/ruby-1.9.3-p0/gems/bson_ext-1.6.2/ext/cbson/gem_make.out 
```

我在我的 Rails 项目中使用 mongoid。安装 bson_ext gem，它给了我上面的错误。

谁能告诉我有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-06-25T07:49:21.170

如果您使用的是捆绑安装，则需要运行

```
bundle config build.bson_ext --with-cflags="-Wno-error=implicit-function-declaration" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:17:43.237

不知道为什么你`make`没有使用正确的`install`. 但是很容易快速修复：

```
sudo ln -s /usr/bin/install /bin/install 
```

这会将现有安装链接到`/bin`并应该能够`make`继续。

# c - 在 C 中使用 OpenCV 定义图像 ROI

> ID：10632195
> 
> 赞同：4
> 
> 时间：2012-05-17T08:27:28.743
> 
> 标签：c, opencv, roi

我有一个关于如何使用 OpenCV 定义 ROI 的问题。我知道函数的定义是什么，`cvSetImageROI`但我想知道是否可以使用 OpenCV 定义与矩形不同的 ROI。例如，以圆形或不同形式定义 ROI。

有可能做到这一点吗？

> cvSetImageROI(img1, cvRect(a, b, c, d));

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T08:25:45.807

以下代码，您可以在[此处](http://nashruddin.com/OpenCV_Circular_ROI)甚至[此处](http://comments.gmane.org/gmane.comp.lib.opencv/24171)找到，使用图像上的位掩码设置圆形 ROI。

```
#include "cv.h"
#include "highgui.h"

int main(int argc, char** argv)
{
    IplImage* src, * res, * roi;

    /* usage: <prog_name> <image> */
    if (argc < 2)
    {
        fprintf(stderr, "Usage: %s <image>\n", argv[0]);
        return 1;
    }

    src = cvLoadImage(argv[1], 1);
    res = cvCreateImage(cvGetSize(src), 8, 3);
    roi = cvCreateImage(cvGetSize(src), 8, 1);

    /* prepare the 'ROI' image */
    cvZero(roi);

    /* Note that you can use any shape for the ROI */
    cvCircle(
        roi,
        cvPoint(130, 100),
        50,
        CV_RGB(255, 255, 255),
        -1, 8, 0
    );

    /* extract subimage */
    cvAnd(src, src, res, roi);

    /*
     * do the main processing with subimage here.
     * in this example, we simply invert the subimage
     */
    cvNot(res, res);

    /* 'restore' subimage */
    IplImage* roi_C3 = cvCreateImage(cvGetSize(src), 8, 3);
    cvMerge(roi, roi, roi, NULL, roi_C3);
    cvAnd(res, roi_C3, res, NULL);

    /* merge subimage with original image */
    cvNot(roi, roi);
    cvAdd(src, res, res, roi);

    /* show result */
    cvNamedWindow(argv[1], 1);
    cvNamedWindow("res", 1);
    cvShowImage(argv[1], src);
    cvShowImage("res", res);

    cvWaitKey(0);

    /* be tidy */
    cvDestroyAllWindows();
    cvReleaseImage(&src);
    cvReleaseImage(&res);
    cvReleaseImage(&roi);

    return 0;
} 
```

对于五边形或六边形，只需对其进行调整以更改面罩的几何形状。检查这个 SO 问题：[在 OpenCV 中使用 ROI？](https://stackoverflow.com/questions/7946383/using-roi-in-opencv).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:30:30.443

您应该使用掩码来模拟非矩形 ROI。

# sql-server - 奇怪的@@IDENTITY 范围行为？

> ID：10632201
> 
> 赞同：2
> 
> 时间：2012-05-17T08:27:48.300
> 
> 标签：sql-server, identity-column

这不是一个完整的瓶子，但我的印象是@@IDENTITY 给出了在数据库中创建的最后一个身份的值，无论在哪里。SCOPE_IDENTITY() 给出当前语句范围内的值。

我有一个带有标识列的表。没有触发器，只有一个普通表和主索引。我已在两个单独的浏览器选项卡中运行此 Web 应用程序代码：

```
Dim connDb As New SqlConnection(myconnectionstring)
Dim transDb As SqlTransaction = connDb.BeginTransaction()
Dim cmdInsert As New SqlCommand("INSERT INTO mytable (somecolumn) VALUES (somevalue)", conn, transDb)
Dim cmdGetIdentity As New SqlCommand("SELECT @@IDENTITY", connDb, transDb)
' Add the record, pause, get identity.
Dim iNewHosp As Int32 = cmdInsert.ExecuteNonQuery() ' Returns 1 correctly.
Threading.Thread.Sleep(5000) ' Give the other tab time to add a record.
Dim iNewID As Int32 = cmdGetIdentity.ExecuteScalar ' Returns the new ID.
' Commit trans, close, dispose, etc.. 
```

请注意，这都是在事务中完成的，不确定这是否会有所不同。在这里使用 SQL Server 2000（不幸的是）。在 SQL2008 中也尝试过，同样的事情发生了。

因此，我在一个浏览器选项卡中运行该页面，然后在它处于睡眠状态时，在另一个选项卡中再次运行它，这会添加另一条记录。我看到的“问题”是第一个选项卡随后返回其 INSERT的*正确ID，另一个选项卡也是如此。*我认为第一个选项卡会返回*最近*插入的 ID，即。在第二个选项卡中完成的那个？

我最初尝试为此使用 SCOPE_IDENTITY()，但它返回 NULL，因此我尝试@@IDENTITY 只是为了看看发生了什么。所以我有 2 个问题 - 为什么 SCOPE_ 返回 NULL，为什么 @@IDENTITY 返回特定于范围的结果？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T08:32:24.010

不，`@@IDENTITY`仍然仅限于在同一会话中生成的身份值。请参阅中的讨论[`SCOPE_IDENTITY`](http://msdn.microsoft.com/en-us/library/ms190315.aspx)：

> `SCOPE_IDENTITY`并返回**当前会话**`@@IDENTITY`中任何表中生成的最后一个标识值。但是，返回仅在当前范围内插入的值；不限于特定范围。**`SCOPE_IDENTITY``@@IDENTITY`**

 **（重点补充）

范围≠会话。在这里，范围指的是例如将返回由触发器内的一个`@@IDENTITY`生成的标识值。`INSERT`您还应该看到，您的最终选择是[`IDENT_CURRENT`](http://msdn.microsoft.com/en-us/library/ms175098.aspx)让您查询特定表中的最新标识值，而不管会话如何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:35:31.917

您正在 Transacation 中插入记录，因此`SCOPE_IDENTITY`仅限于该交易。因此，您无法看到从其他交易中插入的价值。

当为第二个选项卡提交事务时，您将能够看到第二个选项卡插入的标识。

```
SELECT SCOPE_IDENTITY() 
```

它返回连接上和同一范围内的语句生成的最后一个 IDENTITY 值，而不管生成该值的表是什么。SCOPE_IDENTITY() 与@@IDENTITY 一样，将返回在当前会话中创建的最后一个身份值，但它也会将其限制在您当前的范围内。换句话说，它将返回您显式创建的最后一个身份值，而不是由触发器或用户定义的函数创建的任何身份。**

# iphone - Phonegap 1.7中的Childbrowser插件只能第一次打开

> ID：10632203
> 
> 赞同：4
> 
> 时间：2012-05-17T08:27:53.500
> 
> 标签：iphone, cordova, childbrowser

Phonegap 1.7 中的Childbrowser 插件只能第一次打开。我正在使用 Phonegap 1.7 和 Childbrowser。只有第一次子浏览器工作。在我关闭 Childbrowser（按下完成按钮）后，当我尝试打开它时它不再打开。

我的代码是这样的：

```
$("a[target=_blank]").bind('click', function(e) {
  e.preventDefault();
  var thisUrl = $(this).attr('href');
  cb.showWebPage(thisUrl);
  alert("click");
}); 
```

当我单击一个链接时，Childbrowser 会弹出并显示该页面。我单击“完成”并返回。但是当我单击链接或其他链接时，Childbrowser 不再弹出，但每次都会显示警报“单击”。

[ps 我从这里](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/ChildBrowser)下载了 Childbrowser 插件

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-07T05:03:09.940

Cordova 2.0.0 与 jQuery Mobile 1.1.1 结合使用时，我也遇到了这个问题。我设置链接的代码如下所示：

```
$(document).bind("pageinit", function() {
  onDeviceReady();
});
function onDeviceReady(){
  var root = this;
  cb = window.plugins.childBrowser;
  if (cb != null) {
    $('a[target="_blank"]').click(function(event){
      cb.showWebPage($(this).attr('href'));
      event.preventDefault();
    });
  }
} 
```

*注意：该[`pageinit`事件](http://jquerymobile.com/test/docs/api/events.html)与往常一样，`$(document).ready()`但针对 jQuery Mobile。*

这样一来，ChildBrowser 在第一次链接单击时打开，但在关闭后不再打开。为了解决这个问题，我在后面添加了这两行`event.preventDefault();`：

```
event.stopImmediatePropagation();
return false; 
```

那是为我做的！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T13:51:24.600

我在使用[https://github.com/phonegap/phonegap-plugins/blob/master/iPhone/ChildBrowser/](https://github.com/phonegap/phonegap-plugins/blob/master/iPhone/ChildBrowser/)时遇到了同样的问题。

我解决了它破解 ChildBrowser.js 评论 4 行，如下所示。我意识到这两种方法被调用，所以可能会发生某种冲突。我希望这会有所帮助。

```
ChildBrowser.prototype.showWebPage = function(loc) { 
//  if (typeof PhoneGap !== "undefined")
//  {
//      PhoneGap.exec("ChildBrowserCommand.showWebPage", loc);
//  }
    if (typeof Cordova !== "undefined")
    {
        Cordova.exec("ChildBrowserCommand.showWebPage", loc);
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-27T08:38:10.637

我对科尔多瓦 1.9 有同样的问题。

我使用的插件版本对 showWebPage 函数有不同的代码：

```
// Show a webpage, will result in a callback to onLocationChange
ChildBrowser.prototype.showWebPage = function(loc)
{
    cordovaRef.exec("ChildBrowserCommand.showWebPage", loc);
}; 
```

我在日志中注意到，当子浏览器出现故障时，javascript 'click' 函数会快速连续调用两次。有时会在第一次点击时发生，有时会在 5 或 6 次之后发生。

```
2012-07-27 09:27:12.155 XX[10562:707] [INFO] JS :: Should open in childBrowser
2012-07-27 09:27:12.158 XX[10562:707] Opening Url : http://www.google.co.uk/
2012-07-27 09:27:12.160 XX[10562:707] [INFO] JS :: Should open in childBrowser
2012-07-27 09:27:12.161 XX[10562:707] *** WebKit discarded an uncaught exception in the webView:decidePolicyForNavigationAction:request:frame:decisionListener: delegate: <NSInvalidArgumentException> Application tried to present modally an active controller <MainViewController: 0x157e50>. 
```

我尝试在单击按钮后从按钮中删除单击事件，然后将其重新应用于 childBrowser.onClose 事件，这似乎确实有助于解决子浏览器崩溃问题。

# svn - svn：服务器发送了意外的返回值（405 Method Not Allowed）以响应 DELETE 请求

> ID：10632207
> 
> 赞同：2
> 
> 时间：2012-05-17T08:28:21.173
> 
> 标签：svn

提交时出现以下错误。

`svn: Server sent unexpected return value (405 Method Not Allowed) in response to DELETE request for '/repository/XXREPOXX/!svn/act/d8f0d94a-8a6c-4986-b757-7a3e469190b9'`

如果我`svn update`在错误之后这样做，我会得到带有新修订号和状态 G 的提交。

我的其他队友可以毫无问题地进行提交，并且他们在 Windows 上。我在 Ubuntu 11.04 上使用 subversion 版本 - 版本 1.6.12 (r955767)。但我可以毫无问题地工作/提交到其他服务器上的其他存储库

任何解决此问题的帮助都将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T05:28:06.690

回答我自己。这是因为我的 ISP 的代理设置造成的。不是我或 svn 服务器的错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:38:10.400

确保您没有提交已锁定的文件

# java - 带有 persistence.xml 和属性映射的 JPA EntityManagerFactory

> ID：10632215
> 
> 赞同：4
> 
> 时间：2012-05-17T08:29:07.253
> 
> 标签：java, jpa, connection-string, java-7, persistence.xml

我可以将*一些*属性传递给`EntityManagerFactory`代码，同时仍保持`persistence.xml`作为主要配置源吗？使用`createEntityManager`带有 a 的重载`Map`似乎`persistence.xml`完全覆盖：

```
Map<String, String> propertyMap;
factory.createEntityManager(propertyMap); 
```

我想在 中配置 JPA `persistence.xml`，但传入自定义连接字符串。我正在使用 HSQL，我想用当前用户目录组成一个自定义 DB 文件路径，我必须通过代码（据我所知）获取。

如果我能保留就太好`persistence.xml`了，因为我不必编写自定义配置机制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:54:16.983

你的意思是

```
Persistence.createEntityManagerFactory(puName, props); 
```

除非您的意思是您首先创建了 EMF 并想在此之后应用道具？

# php - mysql更新查询不起作用？

> ID：10632216
> 
> 赞同：1
> 
> 时间：2012-05-17T08:29:16.177
> 
> 标签：php, mysql, html

**编辑：现在修复了！感谢您的帮助！**

对于初学者的问题，我很抱歉，我正在创建一个简单的页面来为我的团队网站编辑另一个页面。

这是我正在使用的代码，但它没有更新数据库。

不正确的代码：

```
mysql_query("UPDATE pages SET `pagename` = $pagename, `pagedesc` = $pagedesc, 
`agekey` = $pagekey, `pagecont` = $pagecont WHERE `pages_id` = $pages_id") or die(mysql_error()); 
```

**正确代码：**

```
mysql_query("UPDATE pages SET pagename = '$pagename', pagedesc = '$pagedesc', pagekey = '$pagekey', pagecont = '$pagecont' WHERE pages_id = $pages_id") or die(mysql_error()); 
```

使用 `` 根本不起作用。但是加还是死(mysql_error()); 对我的查询有所帮助。我应该首先想到的！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:37:18.233

你的mysql查询不应该是

```
mysql_query("UPDATE pages SET pagename = '$pagename', pagedesc = '$pagedesc', pagekey = '$pagekey', pagecont = '$pagecont' WHERE pages_id = $pages_id"); 
```

代替

```
mysql_query("UPDATE pages SET 'pagename' = $pagename, 'pagedesc' = $pagedesc, 'pagekey' = $pagekey, 'pagecont' = $pagecont, WHERE 'pages_id' = $pages_id"); 
```

您在字段名称中使用了 '（单引号）。当数据为 varchar 类型时使用单引号

例如，如果表的字段为 myField02 varchar2(20)，则在插入查询时将

```
INSERT INTO myTable values ('myValue'); 
```

如果该字段不是 varchar 则不要使用单引号

```
INSERT INTO myTable values (myValue); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:31:11.560

您的 SQL 语句中有一个额外的“，”。

```
agecont, WHERE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T08:32:32.057

将此添加到具有 mysql_query 的行：

```
mysql_query("<QUERY GOES HERE>") or die(mysql_error()); 
```

这将向您显示查询中的确切错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T08:36:44.673

您的问题是您没有检查您的查询是否真的成功。编辑：认为你得到了这个。

您的 SQL 查询中有一些语法错误：

例如

```
// Your code
UPDATE pages SET 'pagename' = $pagename

// How SQL expects
UPDATE pages SET pagename = '$pagename' 
```

请注意仅在我们要放入的变量周围的单引号。

重写你的 SQL 查询：

```
mysql_query("UPDATE pages 
             SET pagename = '{$pagename}',
                 pagedesc = '{$pagedesc}',
                 agekey   = '{$pagekey}',
                 pagecont = '{$pagecont}' 
             WHERE pages_id = '{$pages_id}'") or die(mysql_error()); 
```

请注意，列名周围没有 ` 或 '，只有用于运行更新的变量。

编辑：更新答案以显示操作他的错误在哪里

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T08:38:53.677

> mysql_query("UPDATE pages SET `pagename`= '$pagename', `pagedesc`= '$pagedesc', `pagekey`= '$pagekey' , = '$pagecont `pagecont`' WHERE `pages_id`= $pages_id");

在字段中使用 `(accent) 而不是 ' 并且在 where 之前有额外的 ,(comma)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T08:41:26.720

您的查询中有两个错误，一个是`comma`在 where 之前，另一个是您用于`single quotes`字段名的错误。对字段名使用反引号而不是单引号。使用此查询。还要注意 sql 注入。采用`mysql_real_escape_string().`

```
mysql_query("UPDATE pages SET `pagename` = $pagename, `pagedesc` = $pagedesc, 
`agekey` = $pagekey, `pagecont` = $pagecont WHERE `pages_id` = $pages_id"); 
```

# php - 如何通过ajax加载tinymce文本区域

> ID：10632219
> 
> 赞同：2
> 
> 时间：2012-05-17T08:29:37.700
> 
> 标签：php, ajax, tinymce

我有这个 tinymce 文本区域，它使用 Ajax 来调用它并从数据库中调用内容

```
<form class="form">
    <table cellspacing="20">
        <tr>
            <td>
                <label>Select Page :</label>
            </td>
            <td>
                <select name="cms" id="cms" onchange="page_get_content(this.options[selectedIndex].value);">
                    <option value="">Select Page to be edited</option>
                    <option value="3">Home Page</option>
                    <option value="1">About us</option>
                    <option value="2">Agents</option>
                </select>
            </td>
        </tr>
        <tr>
            <td></td>
            <td>
                <div id="content" style="display: none;">
                    <textarea id="newsdesc" name="content"></textarea>
                </div>
            </td>
        </tr>
    </table>
</form> 
```

这是调用它的 JavaScript

```
function page_get_content(id) {
    if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    } else {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function () {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById('content').style.display = "block";
            document.getElementById('newsdesc').innerHTML = xmlhttp.responseText;
        }
    }
    xmlhttp.open('GET', 'forms/cms_get.php?page_id=' + id, true);
    xmlhttp.send();
} 
```

这里是 cms_get.php：

```
<?php
$page_id = $_GET['page_id'];
if(!empty($page_id)){
    $cms = new CMS();
    $page = $cms -> find_by_id($page_id);
    if($page) {
?>
<?php echo $page -> content; ?>
<?php 
    } 
} 
?> 
```

一切正常，但 tinymce 加载为空，当我检查带有火虫的元素时，我得到了我的文本区域，但它被隐藏了，我试图将它显示为块，它向我显示常规 html 文本区域我的意思是我想用里面的内容来展示它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:32:05.030

不要编辑`.innerHTML`，而是使用`tinyMCE.get(id).setContent(text);`

更多信息：[http ://www.tinymce.com/wiki.php/API3:method.tinymce.Editor.setContent](http://www.tinymce.com/wiki.php/API3:method.tinymce.Editor.setContent)

# xml - 使用 VB 脚本修改 XML PARENT NODE

> ID：10632220
> 
> 赞同：-1
> 
> 时间：2012-05-17T08:29:43.657
> 
> 标签：xml, vbscript

我正在尝试修改 XML 节点名称而不是其值。我不能这样做。而且我必须修改父节点名称。请帮助它。

示例 XML 在这里。在这个 XML 中，我需要将 ICOSTx 修改为 ICOS_ORDER_TX。请有人帮助做到这一点。我必须修改大约 50K xmls。尽快帮助我。如果可能的话，把代码寄给我。ipand.19@gmail.com。如果还有 VBscript 以外的代码，请告诉我。

```
 <ICOSTx SOURCETYPE="XX" >
    <HEADER>
    <ID>                        49909171</ID>
    <EMP>P9004952</EMP>
    <STARTDT>10/04/2012 14:23:04</STARTDT>
    <TOTAL>5849.59</TOTAL>
    <CNP>1</CNP>
    </HEADER>
   </ICOSTx> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T12:43:51.730

根据来自[这里](https://stackoverflow.com/q/475293/603855)的信息：

由于 .tagName 是只读的，因此您必须创建一个具有合适名称的新节点，克隆要更改的节点，然后用新节点替换旧节点。在代码中：

```
 Dim sFSpec : sFSpec    = resolvePath( "..\data\00.xml" )
  WScript.Echo goFS.OpenTextFile(sFSpec).ReadAll()
  Dim oXDoc  : Set oXDoc = CreateObject( "Msxml2.DOMDocument" )
  oXDoc.setProperty "SelectionLanguage", "XPath"
  oXDoc.async = False
  oXDoc.load sFSpec

  If 0 = oXDoc.ParseError Then
     WScript.Echo sFSpec, "looks ok"
     Dim sXPath, ndFnd
     sXPath    = "/ICOSTx"
     Set ndFnd = oXDoc.selectSingleNode( sXPath )
     If ndFnd Is Nothing Then
        WScript.Echo "|", sXPath, "| not found"
     Else
        WScript.Echo "found   |" & ndFnd.tagName & "|"
       On Error Resume Next
        ndFnd.tagName = "ICOS_ORDER_TX"
        WScript.Echo "** Bingo:", Err.Description
       On Error Goto 0
        Dim ndParent : Set ndParent = ndFnd.parentNode
        Dim ndNew    : Set ndNew    = oXDoc.createElement("ICOS_ORDER_TX")
        ndNew.appendChild ndFnd.firstChild.cloneNode(True)
        ndParent.removeChild ndFnd
        ndParent.appendChild ndNew
        sFSpec = resolvePath( "..\data\02.xml" )
        oXDoc.save sFSpec
        WScript.Echo goFS.OpenTextFile(sFSpec).ReadAll()
     End If
  Else
     WScript.Echo oXDoc.ParseError.Reason
  End If 
```

输出：

```
<ICOSTx SOURCETYPE="XX">
 <HEADER>
  <ID>49909171</ID>
  <EMP>P9004952</EMP>
  <STARTDT>10/04/2012 14:23:04</STARTDT>
  <TOTAL>5849.59</TOTAL>
  <CNP>1</CNP>
 </HEADER>
</ICOSTx>

E:\trials\SoTrials\answers\10632220\data\00.xml looks ok
found   |ICOSTx|
** Bingo: Wrong number of arguments or invalid property assignment
<ICOS_ORDER_TX><HEADER>
                <ID>49909171</ID>
                <EMP>P9004952</EMP>
                <STARTDT>10/04/2012 14:23:04</STARTDT>
                <TOTAL>5849.59</TOTAL>
                <CNP>1</CNP>
        </HEADER>
</ICOS_ORDER_TX> 
```

# c# - 在主页中检索值

> ID：10632222
> 
> 赞同：1
> 
> 时间：2012-05-17T08:29:51.700
> 
> 标签：c#, silverlight, web-services, asynchronous

我正在使用使用 Windows 身份验证的 Silverlight 业务应用程序。

当用户登录计算机并访问 Silverlight URL 时，他们所看到的数据基于他们的 Windows 登录详细信息。用户名是从页面上的登录状态中检索的，如下所示 -

```
string fullUserName = WebContext.Current.User.DisplayName;
string userName = fullUserName.Substring(fullUserName.IndexOf('\\') + 1); 
```

因此，例如`fullUserName`这里将是“machineName\UserName”，然后第二行去掉“machineName\”，只留下用户名。

从页面中提取了一个用户名，它用于 web 服务调用以根据该用户帐户带回数据-

```
void OnLoad(object sender, RoutedEventArgs e)
    {
        string fullUserName = WebContext.Current.User.DisplayName;
        string userName = fullUserName.Substring(fullUserName.IndexOf('\\') + 1);

        WebService.Service1SoapClient client = new WebService.Service1SoapClient();

        client.IDReturnCompleted += new EventHandler<IDReturnCompletedEventArgs>(client_IDReturnCompleted);
        client.IDReturnAsync(userName);
    } 
```

这在 Silverlight 的所有页面上都可以正常工作，除了主页，这是加载时的第一页。我相信这是由于回调是异步的，因此值用户名尚未初始化。但是当用户点击一个新链接时，该值已经加载。

是否可以在主页中获取此值？我已经在主页上的加载事件和 InitializeComponent 中尝试过，但该值尚未从 Web 服务返回。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:52:34.930

我认为用纯silverlight 获取当前域用户是不可能的。您可以检查这个问题，为什么它不能直接实现； [在 Silverlight 中获取当前 Windows 用户名](https://stackoverflow.com/questions/1176566/get-current-windows-user-name-within-silverlight)

另一方面，您可以将此值从 aspx 文件注入到 silverlight，请参阅[此链接](http://www.codeproject.com/Articles/47520/Silverlight-Windows-User-Identity-Name)。

# c# - 如何在c#的安装向导中输入一些值

> ID：10632226
> 
> 赞同：0
> 
> 时间：2012-05-17T08:30:15.250
> 
> 标签：c#, windows, installation

所以我需要制作安装向导，在用户安装产品之前提示用户输入一些值。例如，我需要设置 COM 端口，因此我需要用户输入正确的 COM 端口，并且我想将该值传递给 C#。

这可能吗？例如，序列密钥也是如此。如何做到这一点？有什么工具吗？我需要使用什么技术等等..所以请给我你的想法和经验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:21:36.247

您可以使用[WiX](http://wix.sourceforge.net/ "Windows 安装程序 XML (WiX) 工具集")在设置向导中创建自定义对话框。（VS中的Setup项目不支持。）

请参阅WiX 教程[*的链*](http://wix.tramontana.co.hu/tutorial/user-interface/new-link-in-the-chain)文章中的新链接，它解决了添加新对话框以收集注册信息。

同样，如有必要，您可以将其他对话框添加到设置向导中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:42:05.690

我使用了 VS 安装程序项目，它们很好，但是在自定义操作方面有点困难。我切换到 Wix，我能够做很多自定义的事情（包括 UI 自定义、网站安装、COM 注册、MSMQ 等），这对于 VS 安装程序来说是很困难的。然而，Wix 有相当长的学习曲线。

# python - 在金字塔下为jinja2添加自定义过滤器

> ID：10632232
> 
> 赞同：5
> 
> 时间：2012-05-17T08:30:56.427
> 
> 标签：python, pyramid, jinja2

之前已经提出[过](https://stackoverflow.com/questions/8339899/jinja2-custom-filter-templateassertionerror-no-filter-named-format-number)这个问题，但接受的解决方案（由问题发布者本人给出）说我们可以直接将新过滤器添加到 jinja2.filter.FILTER。

但在[jinja2 文档](http://jinja.pocoo.org/docs/api/#custom-filters)中，建议将过滤器添加到环境中。

我正在金字塔下开发一个应用程序，需要定义我的自定义过滤器并执行以下操作。

```
from jinja2 import Environment

#Define a new filter
def GetBitValue(num,place):
    y = (num >> (place-1)) & 1
    return y

env = Environment()
env.filters['getbitvalue'] = GetBitValue 
```

这个代码片段应该放在哪里？

我尝试将它放在视图文件中，但这显然不起作用。

如果我把它`__init__.py`放进去，我如何确保 jinja2 把它捡起来？我的意思是如何将`env`金字塔下的 jinja2 设置发回？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-17T08:57:32.793

假设您正在使用[`pyramid_jinja2`](http://docs.pylonsproject.org/projects/pyramid_jinja2/en/latest/?awesome)，您可以`pyramid_jinja2.get_jinja2_environment()`通过`configurator`实例使用来访问环境。

但是，显然您也可以[通过金字塔配置文件注册它们，](http://docs.pylonsproject.org/projects/pyramid_jinja2/en/latest/?awesome#jinja2-filters)而无需直接访问 env：

```
[app:yourapp]
    # ... other stuff ...
    jinja2.filters =
        # ...
        getbitvalue = your_package.your_subpackage:GetBitValue 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-27T16:56:51.323

为了完整起见，这将是您在代码中注册过滤器的方式。

```
# __init__.py
def main(global_config, **settings):
    #....
    config = Configurator(settings=settings)
    config.include('pyramid_jinja2')
    config.commit() # this is needed or you will get None back on the next line
    jinja2_env = config.get_jinja2_environment()
    jinja2_env.filters['getbitvalue'] = GetBitValue 
```

# android - “您的 APP_BUILD_SCRIPT 指向一个未知文件：./jni/Android.mk”

> ID：10632234
> 
> 赞同：7
> 
> 时间：2012-05-17T08:31:05.667
> 
> 标签：android, windows, android-ndk

我搜索了所有的网络（我认为）。以及它所说的我尝试过但没有运气仍然无法正常工作。我在 cygwin 和 windows 下都对其进行了测试，
这是我的项目文件/目录：

```
D:\Java_2\workspace_indigo\JniTest\.classpath
D:\Java_2\workspace_indigo\JniTest\.project
D:\Java_2\workspace_indigo\JniTest\AndroidManifest.xml
D:\Java_2\workspace_indigo\JniTest\assets
D:\Java_2\workspace_indigo\JniTest\bin
D:\Java_2\workspace_indigo\JniTest\files
D:\Java_2\workspace_indigo\JniTest\gen
D:\Java_2\workspace_indigo\JniTest\native
D:\Java_2\workspace_indigo\JniTest\proguard.cfg
D:\Java_2\workspace_indigo\JniTest\project.properties
D:\Java_2\workspace_indigo\JniTest\res
D:\Java_2\workspace_indigo\JniTest\src
D:\Java_2\workspace_indigo\JniTest\bin\classes
D:\Java_2\workspace_indigo\JniTest\bin\res
D:\Java_2\workspace_indigo\JniTest\bin\classes\com
D:\Java_2\workspace_indigo\JniTest\bin\classes\jni
D:\Java_2\workspace_indigo\JniTest\bin\classes\com\testjni
D:\Java_2\workspace_indigo\JniTest\bin\classes\com\testjni\JniTestActivity.class
D:\Java_2\workspace_indigo\JniTest\bin\classes\com\testjni\R$attr.class
D:\Java_2\workspace_indigo\JniTest\bin\classes\com\testjni\R$drawable.class
D:\Java_2\workspace_indigo\JniTest\bin\classes\com\testjni\R$layout.class
D:\Java_2\workspace_indigo\JniTest\bin\classes\com\testjni\R$string.class
D:\Java_2\workspace_indigo\JniTest\bin\classes\com\testjni\R.class
D:\Java_2\workspace_indigo\JniTest\bin\classes\jni\Natives.class
D:\Java_2\workspace_indigo\JniTest\gen\com
D:\Java_2\workspace_indigo\JniTest\gen\com\testjni
D:\Java_2\workspace_indigo\JniTest\gen\com\testjni\R.java
D:\Java_2\workspace_indigo\JniTest\native\Android.mk
D:\Java_2\workspace_indigo\JniTest\native\Application.mk
D:\Java_2\workspace_indigo\JniTest\native\include
D:\Java_2\workspace_indigo\JniTest\native\lib.c
D:\Java_2\workspace_indigo\JniTest\native\main.c
D:\Java_2\workspace_indigo\JniTest\native\Makefile
D:\Java_2\workspace_indigo\JniTest\native\testlib
D:\Java_2\workspace_indigo\JniTest\native\testlib.c
D:\Java_2\workspace_indigo\JniTest\native\include\jni_Natives.h
D:\Java_2\workspace_indigo\JniTest\native\include\jni_Natives.h_orig
D:\Java_2\workspace_indigo\JniTest\res\drawable-hdpi
D:\Java_2\workspace_indigo\JniTest\res\drawable-ldpi
D:\Java_2\workspace_indigo\JniTest\res\drawable-mdpi
D:\Java_2\workspace_indigo\JniTest\res\layout
D:\Java_2\workspace_indigo\JniTest\res\values
D:\Java_2\workspace_indigo\JniTest\res\drawable-hdpi\ic_launcher.png
D:\Java_2\workspace_indigo\JniTest\res\drawable-ldpi\ic_launcher.png
D:\Java_2\workspace_indigo\JniTest\res\drawable-mdpi\ic_launcher.png
D:\Java_2\workspace_indigo\JniTest\res\layout\main.xml
D:\Java_2\workspace_indigo\JniTest\res\values\strings.xml
D:\Java_2\workspace_indigo\JniTest\src\com
D:\Java_2\workspace_indigo\JniTest\src\jni
D:\Java_2\workspace_indigo\JniTest\src\com\testjni
D:\Java_2\workspace_indigo\JniTest\src\com\testjni\JniTestActivity.java
D:\Java_2\workspace_indigo\JniTest\src\jni\Natives.java 
```

这是我的 ndk NDK_LOG=1 输出：

```
D:\Java_2\workspace_indigo\JniTest>ndk-build NDK_LOG=1
Android NDK: NDK installation path auto-detected: 'D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8'
Android NDK: GNU Make version 3.81 detected
Android NDK: Host OS was auto-detected: windows
Android NDK:  Host operating system detected: windows
Android NDK: Host CPU was auto-detected: x86
Android NDK: HOST_TAG set to windows
Android NDK: Host tools prebuilt directory: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/prebuilt/windows/bin
Android NDK: Host 'echo' tool: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/prebuilt/windows/bin/echo.exe
Android NDK: Host 'awk' tool: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/prebuilt/windows/bin/awk.exe
Android NDK: Host 'awk' test returned: Pass
Android NDK:  This NDK supports the following target architectures and ABIS:
Android NDK:    arm: armeabi armeabi-v7a
Android NDK:    mips: mips
Android NDK:    x86: x86
Android NDK:  This NDK supports the following toolchains and target ABIs:
Android NDK:    arm-linux-androideabi-4.4.3:  armeabi armeabi-v7a
Android NDK:    mipsel-linux-android-4.4.3:  mips
Android NDK:    x86-4.4.3:  x86
Android NDK: Found platform root directory: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms
Android NDK: Found supported platforms: android-14 android-3 android-4 android-5 android-8 android-9
Android NDK: PLATFORM android-14 supports: arm mips x86
Android NDK:   ABI arm sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-14/arch-arm
Android NDK:   ABI mips sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-14/arch-mips
Android NDK:   ABI x86 sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-14/arch-x86
Android NDK: PLATFORM android-3 supports: arm mips x86
Android NDK:   ABI arm sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-3/arch-arm
Android NDK:   ABI mips sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-3/arch-mips
Android NDK:   ABI x86 sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-3/arch-x86
Android NDK: PLATFORM android-4 supports: arm mips x86
Android NDK:   ABI arm sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-4/arch-arm
Android NDK:   ABI mips sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-4/arch-mips
Android NDK:   ABI x86 sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-4/arch-x86
Android NDK: PLATFORM android-5 supports: arm mips x86
Android NDK:   ABI arm sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-5/arch-arm
Android NDK:   ABI mips sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-5/arch-mips
Android NDK:   ABI x86 sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-5/arch-x86
Android NDK: PLATFORM android-8 supports: arm mips x86
Android NDK:   ABI arm sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-8/arch-arm
Android NDK:   ABI mips sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-8/arch-mips
Android NDK:   ABI x86 sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-8/arch-x86
Android NDK: PLATFORM android-9 supports: arm mips x86
Android NDK:   ABI arm sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-9/arch-arm
Android NDK:   ABI mips sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-9/arch-mips
Android NDK:   ABI x86 sysroot is: D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/platforms/android-9/arch-x86
Android NDK: Found stable platform levels: 14 3 4 5 8 9
Android NDK: Found max platform level: 14
Android NDK: Found project path: .
Android NDK: Ouput path: ./obj
Android NDK: Parsing D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/build/core/default-application.mk
Android NDK:   Found APP_PLATFORM=android-8 in ./project.properties
Android NDK: Your APP_BUILD_SCRIPT points to an unknown file: ./jni/Android.mk
D:/cpp/Android/android-ndk-r8-windows/android-ndk-r8/build/core/add-application.mk:133: *** Android NDK: Aborting...    .  Stop. 
```

和我的 Android.mk

```
LOCAL_PATH:= $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := Hello
LOCAL_CFLAGS    := -Werror
LOCAL_SRC_FILES := lib.c

include $(BUILD_SHARED_LIBRARY)

and my Application.mk
APP_PROJECT_PATH := D:/Java_2/workspace_indigo/JniTest 
```

就像它在文档中所说的那样简单，但仍然无法正常工作..为什么它无法正常工作我缺少什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T09:26:45.150

显然，您的 Android.mk 文件位于错误的位置，因为它的当前位置是：

```
native/Android.mk 
```

并且您的构建脚本期望它在

```
src/jni/Android.mk 
```

您必须更改脚本或复制/移动文件。

# c++ - 无法在 Windows 7 上的 Eclipse CDT 中运行应用程序

> ID：10632235
> 
> 赞同：1
> 
> 时间：2012-05-17T08:31:06.373
> 
> 标签：c++, eclipse, windows-7, mingw

当我尝试使用 MinGW 在 Windows 7 上的 Eclipse CDT Indigo 中运行“Hello World”时，我遇到了以下问题：

**调试时：**
我可以遍历所有代码行，但最终得到消息：

> 警告：FTH：（6052）：容错堆填充程序应用于当前进程。这通常是由于以前的崩溃造成的。
> 退出（程序恢复时期待信号 SIGINT）

**正常运行时：**
没有任何反应，我只`<terminated>`进入状态栏。

不幸的是，我无法在运行程序的计算机上修改寄存器，因此无法全局禁用 FTH 服务。

有没有人遇到过同样的问题？

# c - 任何“==”计算结果大于1的C编译器？

> ID：10632237
> 
> 赞同：11
> 
> 时间：2012-05-17T08:31:09.253
> 
> 标签：c, undefined-behavior

由于任何非零都表示为真，但`>`,`<`等`==`运算符返回`1`为真，我很好奇是否有任何值得注意的 C 编译器，其中这些运算符可以产生大于`1`.

换句话说，是否有任何编译器 int `i = (a==b)`; `i`如果我不打算将其用作布尔值，而是用作整数，并且假设它是`0`or ，则会导致未定义的`1`行为

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-17T08:33:15.527

不，如果有，它们不是 C 编译器 :-) 标准要求关系运算符和相等运算符返回 1 表示真，0 表示假。

* * *

*C 将整数值解释*为布尔值的规则规定`0`为假，任何其他值都为真。请参阅处理 的 C11 部分`if/while/do/for`，它们都包含类似`"while the expression compares unequal to zero"`. 具体来说：

> `6.8.4.1/2: In both forms [of the if statement, one with and one without an else clause], the first substatement is executed if the expression compares unequal to 0\. In the else form, the second substatement is executed if the expression compares equal to 0.`
> 
> `6.8.5/4: An iteration statement [while, do and for] causes a statement called the loop body to be executed repeatedly until the controlling expression compares equal to 0.`

* * *

但是，对于比较类型的表达式，您将得到什么结果是非常明确的，您要么`0`得到`1`. 这些C11标准的相关位都在`6.5 Expressions`：

> `6.5.8/6: Each of the operators < (less than), > (greater than), <= (less than or equal to), and >= (greater than or equal to) shall yield 1 if the specified relation is true and 0 if it is false.`
> 
> `6.5.9/3: The == (equal to) and != (not equal to) operators are analogous to the relational operators except for their lower precedence. Each of the operators yields 1 if the specified relation is true and 0 if it is false.`
> 
> `6.5.13/3: The && operator shall yield 1 if both of its operands compare unequal to 0; otherwise, it yields 0.`
> 
> `6.5.14/3: The || operator shall yield 1 if either of its operands compare unequal to 0; otherwise, it yields 0.`
> 
> `6.5.3.3/5: The result of the logical negation operator ! is 0 if the value of its operand compares unequal to 0, 1 if the value of its operand compares equal to 0.`

* * *

这种行为可以*追溯到*C99 和 C89（ANSI 时代）。处理关系和相等运算符的 C99 部分还声明返回值为 0 或 1。

而且，虽然 C89 草案没有*明确*规定相等运算符的返回值，但它确实说：

> ==（等于）和 !=（不等于）运算符类似于关系运算符，只是它们的优先级较低。

关系运算符部分*确实*指出：

> 如果指定的关系为真，则每个运算符 <（小于）、>（大于）、<=（小于或等于）和 >=（大于或等于）应产生 1，如果是，则应产生 0错误的。

参考： http: [//flash-gordon.me.uk/ansi.c.txt](http://flash-gordon.me.uk/ansi.c.txt)因为我没有任何 C89 标准的副本。我*确实*有 K&R 的第二版（1988 年的 ANSI 版本），在参考手册附录 A 的 A7.9 和 A7.10 部分中基本上说了同样的话。如果您想从第一版中得到明确的答案，那必须来自一个妻子不太容易扔掉旧垃圾的人。

* * *

**附录：**

根据迈克尔·伯尔（Michael Burr）的说法，在保存旧书方面，他要么没有结婚，要么有一个比我更乐于助人的妻子 :-)

> K&R 1st Edition (1978) 在 7.6 和 7.7 中也有同样的说法：“如果指定的关系为假，则 [关系运算符] 都产生 0，如果为真，则产生 1。” ...“[等式运算符] 与关系运算符完全相同，只是它们的优先级较低。”

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-17T08:34:48.283

他们保证返回`0`或`1`。

参考：
**C99 标准：6.5.9 等式运算符**

**第 3 段：**

> ==（等于）和!=（不等于）运算符类似于关系运算符，除了它们的优先级较低。108）**如果指定的关系为真，则每个运算符产生 1，如果为假，则返回 0。**结果的类型为 int。对于任何一对操作数，其中一个关系是正确的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T09:01:35.010

I don't think people here are answering the question. Question was *not* about what the standard says, the question was about if there are any notable compilers out there that do not obey the standard in that regard.

No, as far as I know, there are not.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-17T08:34:13.413

我无权访问 C 标准，但根据[Wikipedia](http://en.wikipedia.org/wiki/Boolean_data_type)：

> C 使用整数类型，其中 i > j 等关系表达式和由 && 和 || 连接的逻辑表达式 被定义为如果为真则值为 1，如果为假则为 0，而 if、while、for 等的测试部分将任何非零值视为真。

幸运的是，维基百科确实有正确的引用，但由于它们是对书籍的引用，因此不确定这有多大帮助:)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-05-17T08:34:59.030

据我所知，这是来自C99 标准的**6.5.9**第**3段**

> ==（等于）和!=（不等于）运算符类似于关系运算符，除了它们的优先级较低。108）如果指定的关系为真，则每个运算符产生 1，如果为假，则返回 0。结果的类型为 int。对于任何一对操作数，其中一个关系是正确的。

因此~~，评估值似乎~~应该**是 1 或 0**

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-17T08:35:56.803

按照规范，要被视为 C 语言，条件运算符必须返回 0 表示假，1 表示真。

俳句形式：

```
Specification
Disallows this behavior,
Otherwise not C. 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-17T08:49:03.553

在 c89/c90/ANSI-C 之前，比较运算符保证在“假”条件下产生零值，否则不等于零。c89 引入的真正“标准化”的*替代品 1*`a = (b==c) ? 1 : 0;`很少需要，如果需要，可以使用.

# c# - NPOI 将范围复制到另一个工作表

> ID：10632240
> 
> 赞同：3
> 
> 时间：2012-05-17T08:31:26.447
> 
> 标签：c#, excel, copy, range, npoi

我正在使用 NPOI 在 C# 中使用 Excel。但是没有完整的文档如何使用它。我需要将一些范围复制到另一个工作表。有人知道怎么做这个吗？也许您正在使用另一个 dll（不是互操作）来提供此类功能。如果是这样，请告诉我。

在 excel 中，一切都非常简单：

```
Worksheets(2).rows(2).copy newsheet.Range("A1") 
```

感谢您的回答！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2019-05-21T13:03:34.790

NPOI 不支持开箱即用，但实现很简单。这里有两个函数感兴趣：`CopyColumn()`和`CopyRange()`。

`CopyRangeExample()`打开一个工作簿，创建一个新的输出表并将单元格（数据和样式）从一个工作表复制到另一个工作表。

```
void CopyRangeExample()
{
  var workbook = OpenWorkbook("test.xlsx");

  var destinationSheetName = "destination" + (workbook.NumberOfSheets + 1).ToString();
  workbook.CreateSheet(destinationSheetName);

  ISheet sourceSheet = workbook.GetSheet("source");
  ISheet destinationSheet = workbook.GetSheet(destinationSheetName);

  CopyColumn("I", sourceSheet, destinationSheet);
  CopyRange(CellRangeAddress.ValueOf("C6:E15"), sourceSheet, destinationSheet);

  SaveWorkbook(workbook, "test.xlsx");
} 
```

其余代码：

```
void CopyRange(CellRangeAddress range, ISheet sourceSheet, ISheet destinationSheet)
{
  for (var rowNum = range.FirstRow; rowNum <= range.LastRow; rowNum++)
  {
    IRow sourceRow = sourceSheet.GetRow(rowNum);

    if (destinationSheet.GetRow(rowNum)==null)
      destinationSheet.CreateRow(rowNum);

    if (sourceRow != null)
    {
      IRow destinationRow = destinationSheet.GetRow(rowNum);

      for (var col = range.FirstColumn; col < sourceRow.LastCellNum && col<=range.LastColumn; col++)
      {
        destinationRow.CreateCell(col);
        CopyCell(sourceRow.GetCell(col), destinationRow.GetCell(col));
      }
    }
  }
}

void CopyColumn(string column, ISheet sourceSheet, ISheet destinationSheet)
{
  int columnNum = CellReference.ConvertColStringToIndex(column);
  var range = new CellRangeAddress(0, sourceSheet.LastRowNum, columnNum, columnNum);
  CopyRange(range, sourceSheet, destinationSheet);
}

void CopyCell(ICell source, ICell destination)
{
  if (destination != null && source != null)
  {
    //you can comment these out if you don't want to copy the style ...
    destination.CellComment = source.CellComment;
    destination.CellStyle = source.CellStyle;
    destination.Hyperlink = source.Hyperlink;

    switch (source.CellType)
    {
        case CellType.Formula:
            destination.CellFormula = source.CellFormula; break;
        case CellType.Numeric:
            destination.SetCellValue(source.NumericCellValue); break;
        case CellType.String:
            destination.SetCellValue(source.StringCellValue); break;
    }
  }
}

IWorkbook OpenWorkbook(string path)
{
  IWorkbook workbook;
  using (FileStream fileStream = new FileStream(path, FileMode.Open, FileAccess.Read))
  {
    workbook = WorkbookFactory.Create(fileStream);
  }
  return workbook;
}

void SaveWorkbook(IWorkbook workbook, string path)
{
  using (var fileStream = new FileStream(path, FileMode.Create, FileAccess.Write))
  {
    workbook.Write(fileStream);
  }
} 
```

请记住在您的项目中包含 NPOI 和 System.IO：

```
using NPOI.SS.UserModel;
using NPOI.SS.Util;
using System.IO; 
```

# java - 升级到 Cassandra 1.1.0 并找不到 CassandraStorage()

> ID：10632246
> 
> 赞同：0
> 
> 时间：2012-05-17T08:31:56.783
> 
> 标签：java, hadoop, cassandra, apache-pig

**这个问题似乎已在最新的 Cassandra 1.1.2 中得到解决，但我将把它留给那些仍在使用 1.1.0 的人......**

我刚刚升级到Cassandra 1.1.0，从源代码编译，现在在任何地方都找不到CassandraStorage() 类，contrib 目录也不见了！

我可以知道在哪里可以找到它吗？这个类对于通过 Cassandra 操作 Pig 和 Hadoop 来说非常重要且至关重要。

此外，从示例目录执行 pig_cassandra 会产生找不到 CassandraStorage() 的错误。有没有解决的办法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T21:14:44.750

org.apache.cassandra.hadoop.pig.CassandraStorage

# ruby-on-rails-3 - 在开发/生产模式下处理 Rails 中的异常

> ID：10632250
> 
> 赞同：1
> 
> 时间：2012-05-17T08:32:06.627
> 
> 标签：ruby-on-rails-3, exception-handling

为了处理异常，我决定使用`Exception_notifier`gem。这是我使用的代码`/config/enviroments/development.rb`

```
 config.middleware.use ExceptionNotifier,
    :email_prefix => "[ERROR] ",
    :sender_address => '"dev-Notifier" <error@my_emails.com>',
    :exception_recipients => ['error@my_emails.com'] 
```

如果我犯了一些语法错误，例如：

```
@article = Article.fixnd(params[:id]) 
```

我将收到有关它的错误电子邮件。

但是，如果我将这个地址设置为 URL 行：

```
http://localhost:3001/articlesssssss 
```

我会收到错误消息，但未发送电子邮件。如果我设置为 url 错误地址（404 错误），则会出现相同的行为。

如果我想收到有关应用程序中每个错误的电子邮件（以及上面的最后 2 个错误），我必须设置什么？

这是我使用的部分`ApplicationController`：

```
 unless Rails.application.config.consider_all_requests_local
    rescue_from Exception, with: :render_500
    rescue_from ActionController::RoutingError, with: :render_404
    rescue_from ActionController::UnknownController, with: :render_404
    rescue_from ActionController::UnknownAction, with: :render_404
    rescue_from ActiveRecord::RecordNotFound, with: :render_404
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-04T20:00:43.610

在 Exception_notification 文档中有一个答案：

[https://github.com/smartinez87/exception_notification/#rack-x-cascade-header](https://github.com/smartinez87/exception_notification/#rack-x-cascade-header)

> ## 机架 X 级联接头
> 
> 一些机架应用程序（尤其是 Rails）利用“X-Cascade”标头将请求处理职责传递给堆栈中的下一个中间件。
> 
> Rails 的路由中间件使用这种策略，而不是引发异常，来处理路由错误（例如 404）；要在发生 404 时收到通知，请将此选项设置为“false”。
> 
> ### `:ignore_cascade_pass`
> 
> *布尔值，默认值：true*
> 
> 设置为 false 以在另一个机架中间件将“X-Cascade”标头设置为“通过”时触发通知。

# c++ - 对模板函数的未定义引用

> ID：10632251
> 
> 赞同：112
> 
> 时间：2012-05-17T08:32:06.870
> 
> 标签：c++, qt, boost, undefined-reference

我有三个文件。main.cpp 的内容是

```
#include<iostream>
#include<QString>

#include "util.h"

int main()
{
    using Util::convert2QString;

    using namespace std;
    int n =22;
    QString tmp = convert2QString<int>(n);

    return 0;
} 
```

实用程序.h

```
namespace Util
{
    template<class T>
    QString convert2QString(T type , int digits=0);
} 
```

实用程序.cpp

```
namespace Util
{
    template<class T>
        QString convert2QString(T type, int digits=0)
        {
            using std::string;

            string temp = (boost::format("%1%") % type).str();

            return QString::fromStdString(temp);
        }
} 
```

当我尝试使用以下命令编译这些文件时，出现未定义的引用错误

```
vickey@tb:~/work/trash/template$ g++ main.cpp  util.cpp -lQtGui -lQtCore  -I. -I/usr/local/Trolltech/Qt-4.8.0/include/QtCore -I/usr/local/Trolltech/Qt-4.8.0/include/QtGui -I/usr/local/Trolltech/Qt-4.8.0/include
/tmp/cca9oU6Q.o: In function `main':
main.cpp:(.text+0x22): undefined reference to `QString Util::convert2QString<int>(int, int)'
collect2: ld returned 1 exit status 
```

模板声明或实现有问题吗？为什么 MI 会出现这些链接错误：？

* * *

## 回答 #1

> 赞同：177
> 
> 时间：2012-05-17T08:32:59.647

非专用模板的实现必须对使用它的翻译单元可见。

编译器必须能够看到实现，以便为代码中的所有特化生成代码。

这可以通过两种方式实现：

1）将实现移动到标题内。

2）如果您想将其分开，请将其移动到您包含在原始标题中的不同标题中：

**实用程序.h**

```
namespace Util
{
    template<class T>
    QString convert2QString(T type , int digits=0);
}
#include "util_impl.h" 
```

**util_impl.h**

```
namespace Util
{
    template<class T>
        QString convert2QString(T type, int digits=0)
        {
            using std::string;

            string temp = (boost::format("%1") % type).str();

            return QString::fromStdString(temp);
        }
} 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-05-17T08:39:14.990

你有两种方法：

1.  `convert2QString`在 util.h 中实现。

2.  在 util.cpp 中手动实例化`convert2QString`并`int`在 util.h 中将此特化定义为 extern 函数

实用程序.h

```
namespace Util
{
    template<class T>
    QString convert2QString(T type , int digits=0);

    extern template <> QString convert2QString<int>(int type , int digits);
} 
```

实用程序.cpp

```
 namespace Util {
     template<class T>
     QString convert2QString(T type, int digits)
     {
         using std::string;

         string temp = (boost::format("%1") % type).str();

         return QString::fromStdString(temp);
     }

     template <> QString convert2QString<int>(int type , int digits); 
} 
```

# cygwin - 将 cygwin bash 转换为 tcsh

> ID：10632255
> 
> 赞同：2
> 
> 时间：2012-05-17T08:32:29.427
> 
> 标签：cygwin

我怎样才能将我的 cygwin bash 转换为 ac Shell。
我尝试通过更改`.bat`安装目录中的文件，例如： 请帮助。 是正确的过程吗？ 虽然它对我有点用...... 有什么想法......？
`@echo off
@echo ----Welcome NAME----
@echo 'have a nice day'
cygdrive\
chdir \
set HOME=\cygwin\home\
tcsh -i`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T16:04:28.273

要更改 Cygwin shell，您可以更改`/etc/passwd`文件。每一行都是用户帐户的分隔列表，其中最后一个条目是该用户的外壳。只需更改读取的行，例如：

```
abhisek:[some other stuff]:/usr/bin/bash 
```

至：

```
abhisek:[some other stuff]:/usr/bin/tcsh 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-20T03:07:14.350

当前版本的 Cygwin 没有 **/etc/passwd** 文件，并且我正在使用的系统在域数据库中具有不受我控制的 Windows 帐户信息。因此， 不再支持**chsh 。**

我还发现 **bash** 没有硬编码到 **startxwin** 脚本中，也没有硬编码在任何 **.bat**文件中。事实证明，您根本不需要摆弄 **.bat** 文件。

搜索如何更改我的 shell，我发现了一些关于 **mkpasswd 的建议**

我把它加到混合物中。

手册页说：

> ```
> SYNOPSIS
>    mkpasswd [OPTIONS]...
> 
> OPTIONS
>    Don't use this command to generate a local /etc/passwd file, unless you
>    really need one.  See the Cygwin User's Guide for more information.
> 
>    -c,--current
>           Print current user.
> 
>   DESCRIPTION
>         The   mkpasswd  program can be used to create a        /etc/passwd
>    file.  Cygwin doesn't need  this  file,        because  it  reads  user
>    information  from  the Windows account databases,       but you can add
>    an  /etc/passwd file, for instance       if your machine is often  dis‐
>    connected from its domain controller.
> 
>         Note  that this information is static, in contrast to the informa‐
>    tion       automatically gathered by Cygwin from  the  Windows  account
>    databases.  If        you  change  the user information on your system,
>    you'll need to regenerate       the passwd file for it to have the  new
>    information.
> 
>         For  very  simple needs, an entry for the current user can be cre‐
>    ated       by using the option  -c. 
> ```

（我不知道为什么间距如此“关闭”......）

然后我使用了以下命令：

**mkpasswd -c | sed -e 'sX/bashX/tcshX' | tee -a /etc/passwd**

瞧！下次我打开 Cygwin 终端时，它直接进入 tcsh

就是这样（嗯，嗯，嗯！）我喜欢它。

# blackberry - 黑莓：在 Ant 脚本中从 JAR 源文件创建 COD

> ID：10632262
> 
> 赞同：5
> 
> 时间：2012-05-17T08:32:43.433
> 
> 标签：blackberry, ant

如何使用 Ant ( [bb-ant-tools](http://bb-ant-tools.sourceforge.net) ) 将**JAR 文件编译为 COD**？即没有其他源文件

* * *

## 原因

最终，我需要一个在构建期间运行[Jar Jar Links (jarjar)](https://code.google.com/p/jarjar/)的脚本，以解决在多个应用程序中使用我们的 sdk 的命名空间问题。Jarjar 将一个 JAR 文件作为输入，我假设它输出一个 JAR 文件。

因此，要在 bb-ant-tools 构建中运行 jarjar，我需要知道**如何将该输出 JAR 编译为 COD**。

我只关注问题的这一部分，以尽量减少其他可能的错误来源。一旦我能够掌握将 JAR 构建到 COD 中，我将尝试 jarjar 步骤。

## 进步

1）我可以将我的项目构建成一个有效的 COD，签名并在设备上运行。

2）为了包含sdk代码，我目前将源文件夹添加到主项目构建中。（将来我想知道如何将库作为 JAR- [BlackBerry-Ant 脚本包含在构建中，以将 JAR 包含在项目中而无需外部依赖](https://stackoverflow.com/questions/10582450/blackberry-ant-script-to-include-jar-in-project-without-external-dependancies)）

3) 此步骤的输出包括常用文件：

*   MyApp.cod（如果我签名，它会在设备上完美运行）
*   我的应用程序.csl
*   我的应用程序.cso
*   MyApp.debug
*   我的应用程序.jad
*   **MyApp.jar**（我想在这个上运行 jarjar）
*   我的应用程序.rapc

4) 我尝试运行第二次构建，采用上述 JAR 文件并将其用作`rapc`调用中的唯一源文件。我通过将`src`标签指向`rapc`仅包含我的 JAR 文件的文件夹来做到这一点。

在构建的最后部分，当 rapc 是`adding`文件时，我收到错误：

```
 java.util.zip.ZipException: duplicate entry: MyApp-1.cod 
```

*（编辑后的构建输出中的完整错误详情）*

我可以看到这是**rapc 第二次尝试添加此文件**。我不明白为什么，因为 JAR 中只有该文件的一份副本。

* * *

## 构建输出（编辑`...etc`使其可读）

```
build:
    [mkdir] Skipping C:\development\ant\new_test\MyApp\build because it already exists.
     [copy] Copying 1 file to C:\development\ant\new_test\MyApp\build
     [copy] Copying C:\development\ant\new_test\MyApp\icon.png to C:\development\ant\new_test\MyApp\build\icon.png
     [rapc] Compiling 1 source files to MyApp.cod
     [rapc] Executing 'C:\Java\jdk1.6.0_24\jre\bin\java.exe' with arguments:
     [rapc] '-classpath'
     [rapc] 'C:\Java\jdk1.6.0_24\lib\tools.jar;C:\development\tools\bb-jde\jde5.0\components\bin\rapc.jar'
     [rapc] 'net.rim.tools.compiler.Compiler'
     [rapc] '-verbose'
     [rapc] 'import=C:\development\tools\bb-jde\jde5.0\components\lib\net_rim_api.jar'
     [rapc] 'codename=MyApp'
     [rapc] 'MyApp.rapc'
     [rapc] '@sources.txt'
     [rapc]
     [rapc] The ' characters around the executable and arguments are
     [rapc] not part of the command.
     [rapc] Setting environment variable: PATH=........etc
     [rapc] Reading resource: MyApp.cod
...etc
     [rapc] Parsing classfile: com/MyApp/ui/views/WelcomeBar.class
...etc
     [rapc] Parsing import: C:\development\tools\bb-jde\jde5.0\components\lib\net_rim_api.jar(net_rim_amms.cod)
...etc
     [rapc] Resolving
...etc
     [rapc] Optimizing
     [rapc] Utilities.java:449: Warning!: local variable(s) { finished } initialized but not used in: com.cobi.library.Utilities.split(String,String)
...etc
     [rapc] Populating
     [rapc] Invoking: jar -cfmv C:\development\ant\new_test\MyApp\build\MyApp.jar C:\Users\Richard\AppData\Local\Temp\rapc_598c0c5a.dir\META-INF\MANIFEST.MF MyApp.cod MyApp-1.cod MyApp-2.cod MyApp.csl MyApp.cso -C C:\Users\Richard\AppData\Local\Temp\rapc_598c2ad7.dir .
     [rapc] added manifest
     [rapc] adding: MyApp.cod(in = 63208) (out= 41042)(deflated 35%)
     [rapc] adding: MyApp-1.cod(in = 75448) (out= 42559)(deflated 43%)
     [rapc] adding: MyApp.csl(in = 91) (out= 69)(deflated 24%)
     [rapc] adding: MyApp.cso(in = 157) (out= 93)(deflated 40%)
...etc - adding all files I can see in the JAR...

     [rapc] adding: MyApp-1.cod

     java.util.zip.ZipException: duplicate entry: MyApp-1.cod
     [rapc]     at java.util.zip.ZipOutputStream.putNextEntry(ZipOutputStream.java:175)
     [rapc]     at java.util.jar.JarOutputStream.putNextEntry(JarOutputStream.java:92)
     [rapc]     at sun.tools.jar.Main.addFile(Main.java:713)
     [rapc]     at sun.tools.jar.Main.create(Main.java:466)
     [rapc]     at sun.tools.jar.Main.run(Main.java:180)
     [rapc]     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
     [rapc]     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
     [rapc]     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
     [rapc]     at java.lang.reflect.Method.invoke(Method.java:597)
     [rapc]     at net.rim.tools.compiler.c.e.if(Unknown Source)
     [rapc]     at net.rim.tools.compiler.c.e.a(Unknown Source)
     [rapc]     at net.rim.tools.compiler.Compiler.a(Unknown Source)
     [rapc]     at net.rim.tools.compiler.Compiler.a(Unknown Source)
     [rapc]     at net.rim.tools.compiler.Compiler.compile(Unknown Source)
     [rapc]     at net.rim.tools.compiler.Compiler.main(Unknown Source)

     [rapc] java.io.IOException: jar command failed: jar -cfmv C:\development\ant\new_test\MyApp\build\MyApp.jar C:\Users\Richard\AppData\Local\Temp\rapc_598c0c5a.dir\META-INF\MANIFEST.MF MyApp.cod MyApp-1.cod MyApp-2.cod MyApp.csl MyApp.cso -C C:\Users\Richard\AppData\Local\Temp\rapc_598c2ad7.dir .
     [rapc]     at net.rim.tools.compiler.Compiler.a(Unknown Source)
     [rapc]     at net.rim.tools.compiler.Compiler.a(Unknown Source)
     [rapc]     at net.rim.tools.I/O Error: jar command failed: jar -cfmv C:\development\ant\new_test\MyApp\build\MyApp.jar C:\Users\Richard\AppData\Local\Temp\rapc_598c0c5a.dir\META-INF\MANIFEST.MF MyApp.cod MyApp-1.cod MyApp-2.cocompiler.Compiler.compile(Unknown Source)
     [rapc]     at net.rim.tools.compiler.Compiler.main(Unknown Source)
     [rapc] d MyApp.csl MyApp.cso -C C:\Users\Richard\AppData\Local\Temp\rapc_598c2ad7.dir .

BUILD FAILED
C:\development\ant\new_test\MyApp\build.xml:65: Java returned: -1
        at org.apache.tools.ant.taskdefs.Java.execute(Java.java:111)
        at ca.slashdev.bb.tasks.RapcTask.executeRapc(RapcTask.java:583)
        at ca.slashdev.bb.tasks.RapcTask.execute(RapcTask.java:401)
        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
        at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
        at org.apache.tools.ant.Task.perform(Task.java:348)
        at org.apache.tools.ant.Target.execute(Target.java:390)
        at org.apache.tools.ant.Target.performTasks(Target.java:411)
        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
        at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
        at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
        at org.apache.tools.ant.Main.runBuild(Main.java:809)
        at org.apache.tools.ant.Main.startAnt(Main.java:217)
        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)

Total time: 9 seconds

C:\development\ant\new_test\MyApp> 
```

* * *

## 解决方法

[Esaj](https://stackoverflow.com/users/594183/esaj)在下面有一个[很好的答案，](https://stackoverflow.com/a/10680873/383414)`replace`即在进行编译之前在源代码上运行 Ant任务。这意味着不需要运行`jarjar`任何生成的 JAR 文件来解决命名空间问题。

这对我有用，因为我有 SDK 源代码。它不适用于我的客户，因为我以 JAR 格式分发我的 SDK。所以我仍然希望得到这个问题的答案。

* * *

## 有关的

这是[[如何使用 Ant Build 将 JAR 文件转换为 COD 文件]](https://stackoverflow.com/questions/5241872/how-to-convert-jar-file-to-cod-file-using-ant-build)**的副本**，但该问题尚未得到解答，我添加了更多细节。

这**不是**以下内容的重复：

*   [[使用 bb-ant 将 .jar 文件转换为 .cod 文件](https://stackoverflow.com/questions/3094043/convert-a-jar-file-into-a-cod-file-using-bb-ant)] - 我使用了公认的答案，但我的错误是不同的。
*   [ [BlackBerry - Ant script to include JAR in project without external dependencies](https://stackoverflow.com/questions/10582450/blackberry-ant-script-to-include-jar-in-project-without-external-dependancies) ] - 这个问题是关于将库作为 JAR 添加而不是像上面那样使用源代码。在某种程度上，这是一个前导步骤，因为它的输出仍然需要通过 jarjar 运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T07:12:05.697

根据@RichardLeMesurier 的要求，从 BlackBerry 复制此答案[- Ant 脚本以将 JAR 包含在没有外部依赖项的项目中：](https://stackoverflow.com/questions/10582450/blackberry-ant-script-to-include-jar-in-project-without-external-dependancies/10634911#comment13859539_10634911)

去年我遇到了类似的问题，我创建了一个“框架”，用作多个 BB 应用程序的基础，但遇到了多个 COD 的问题（我不记得具体是什么，比如设备拒绝安装具有相同外部 COD 的多个应用程序，如果没有先单独安装外部 COD，然后是应用程序）。由于应用程序可以单独安装（一个人可能只安装应用程序 A，另一个人可能只安装应用程序 B，而另一个人可能同时安装 A 和 B），整个框架需要包含在所有使用它的应用程序中。我使用 bb-ant-tools 编写了这个 Ant 脚本（希望我没有破坏任何东西，删除一些特定于我们的应用程序的东西和混淆包名等）：

```
<?xml version="1.0" encoding="UTF-8"?>

<project name="${description}" default="build" basedir=".">

    <taskdef resource="bb-ant-defs.xml" classpath="lib/bb-ant-tools.jar" />

    <!-- rapc and sigtool require the jde.home property to be set -->
    <!-- NOTE: You may need to copy the signature files from Eclipse\plugins\net.rim.ejde\vmTools to the components\bin -dir 
        if the keys were installed using the Eclipse-plugin     -->
    <property name="jdehome" value="C:\BB\Eclipse\plugins\net.rim.ejde.componentpack5.0.0_5.0.0.25\components" />

    <!-- Framework source locations, these must be set correctly -->
    <property name="frameworkRes.dir" value="C:\BB\workspace\BB_Framework\res" />
    <property name="frameworkSrc.dir" value="C:\BB\workspace\BB_Framework\src\com\whatever\frame" />

    <!-- Locations for simulator, binaries, jde home, don't touch these -->
    <property name="simulator" value="${jdehome}\simulator" />
    <property name="bin" value="${jdehome}\bin" />
    <property name="jde.home" location="${jdehome}" />

    <!-- directory of simulator to copy files to -->
    <property name="simulator.home" location="${simulator}" />

    <property name="src.dir" location="src" />
    <property name="build.dir" location="build" />
    <property name="temp.dir" location="C:\tempsrc" />

    <!-- Project specific -->
    <!-- Application title -->
    <property name="app.title" value="Application Name" />
    <property name="app.version" value="1.0.0" />
    <!-- Value to prepend before frame-class packages -->
    <property name="frame.prefix" value="appname" />
    <!-- Name of the COD to produce --> 
    <property name="cod.name" value="Appname" />

    <target name="build">
        <mkdir dir="${build.dir}" />
        <delete dir="${temp.dir}" />
        <mkdir dir="${temp.dir}" />
        <mkdir dir="${temp.dir}\${frame.prefix}" />

        <copy toDir="${temp.dir}">
            <fileset dir="${src.dir}">
                <include name="**/*.java" />
            </fileset>
        </copy>

        <copy toDir="${temp.dir}\${frame.prefix}">
            <fileset dir="${frameworkSrc.dir}">
                <include name="**/*.java" />
            </fileset>
        </copy>

        <copy toDir="${temp.dir}\res">
            <fileset dir="${frameworkRes.dir}">
                <include name="**/*" />
            </fileset>
        </copy>

        <copy toDir="${temp.dir}\res">
            <fileset dir="res">
                <include name="**/*" />
            </fileset>
        </copy>

        <!-- This replaces the package names for classes copied from under 
            framework-directory to ${frame.prefix} -directory as well as changing any 
            imports using the classes in framework-package -->  
        <replace dir="${temp.dir}" value="${frame.prefix}">
            <include name="**/*.java"/>
            <replacetoken>com.whatever.frame</replacetoken>
        </replace>

        <rapc output="${cod.name}" srcdir="${temp.dir}" destdir="${build.dir}">
            <jdp title="${app.title}" 
                version="${app.version}" 
                vendor="Your Company"
                icon="../res/img/icon.png"
            />
        </rapc>
    </target>

    <target name="sign">
        <sigtool codfile="${build.dir}/${cod.name}.cod" />
    </target>

    <target name="clean">
        <delete dir="${build.dir}" />
    </target>

    <target name="load-simulator" depends="build">
        <copy todir="${simulator.home}">
            <fileset dir="${build.dir}" includes="*.cod,*.cso,*.debug,*.jad,*.jar" />
        </copy>
    </target>

</project> 
```

它的作用是从当前项目复制所有 java 文件和资源，然后从框架项目复制到临时目录，在框架文件的途中替换包名称（因为它们被单独放入命名目录），这与设备也拒绝安装在相同包下具有相同类的多个应用程序有关（即，框架类，对于您的情况，这可能不是必需的）。复制和替换完成后，应用程序将使用 rapc 构建到目标构建目录。对应用程序进行签名、清理和加载到模拟器有不同的任务。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T17:05:15.587

从您的控制台输出中，失败的命令：

> jar -cfmv C:\development\ant\new_test\MyApp\build\MyApp.jar C:\Users\Richard\AppData\Local\Temp\rapc_598c0c5a.dir\META-INF\MANIFEST.MF MyApp.cod MyApp-1。鳕鱼 MyApp-2.cod MyApp.csl MyApp.cso -CC:\Users\Richard\AppData\Local\Temp\rapc_598c2ad7.dir 。

[在jar 工具文档](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/windows/jar.html)中查找这些选项：

> **-C** *dir*
> 在执行 jar 命令期间临时更改目录 (cd dir)，同时处理以下 inputfiles 参数。其操作旨在类似于 UNIX tar 实用程序的 -C 选项。

基于此，我认为 rapc 将解压后的 cod 文件放在 C:\Users\Richard\AppData\Local\Temp\rapc_598c2ad7.dir 中，这会导致与命令行上指定的 cod 文件发生冲突。那个目录还在吗？看看里面有什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:21:10.593

用一些细节回答我自己的问题......

不能`rapc`多次调用 - 它会创建太多的 COD 文件。这就是我收到该错误的原因。

按照[迈克尔的回答](https://stackoverflow.com/a/10667230/383414)，正确的方法是使用普通的 java 工具（javac 和 jar）以及 RIM 的`preverify`命令来构建最终的 JAR 文件。

仅`rapc`用于最后一步 - 将该 JAR 文件转换为 COD。

一个完整的 ANT 构建框架来处理这个问题太大了，不能放在这里，但是下面列出了创建它所需的步骤。每个步骤都可以在这个网站（或一些谷歌）上轻松研究。每一步都非常简单，可以单独调试。

**步骤**：

1.  `javac`用于创建 CLASS 文件的 SDK
2.  `preverify`类文件
3.  `jar`开发工具包
4.  将 SDK JAR 文件复制到项目中
5.  `javac`项目 - 使用 SDK JAR 作为*类路径*
6.  `preverify`*项目 CLASS 文件（同样，在类路径*中使用 SDK JAR ）
7.  `jar`项目 - 将 SDK JAR 添加为*zipfileset*
8.  `jarjar`此项目 JAR 根据需要重构包名称
9.  最后，`rapc`在这个 JAR 上运行 - 它不会发现重复的 COD 文件并且应该可以正常运行。

**注意**：步骤 1-3 可以通过`rapc`在 SDK 上使用来组合（如果您需要在 SDK 代码上运行预处理器标签，则需要这样做）。

通过将其分解为像这样的简单步骤，我了解了普通 java 工具如何链接到 RIM 的工具链（通常，当您简单地`rapc`在源文件夹上调用时，这一切都是隐藏的）。

当然，您仍然需要使用`sigtool`.

我在 ANT 中完成所有这些工作。我使用不同的文件夹来存储每个步骤的输出。这样我最终得到了 5 个临时文件夹，但它使我可以轻松地调试这些步骤。

* * *

我现在终于明白为什么很少有人能够对我的各种 BB ANT 构建脚本问题提供确凿的答案。这个过程很费力，很长，而且很难解释。

完成此任务的完整 ANT 构建框架可以跨越许多不同的文件（在我的情况下，我认为我现在使用 8 个包括属性文件）。它需要良好的 ANT 工作知识、普通的 java 构建工具和 RIM 的`rapc`命令。

我想我已经在我的问题中很好地记录了这个过程的每一步，并从中得到了一些很好的答案。有关更多详细信息，请查看其他问题和答案。每个都包含有用的链接，以及来自该社区其他开发人员的一些很好的见解

# java - 每晚构建 - 我们是否首先删除“目标”中的文件？

> ID：10632265
> 
> 赞同：1
> 
> 时间：2012-05-17T08:32:55.983
> 
> 标签：java, maven

伙计们，

作为 Java 应用程序的夜间构建的一部分，我执行以下操作：

```
$ cd dirContainingPOM.XML
$ svn更新
$ rm -rf 目标
$ mvn 包

```

本质上，我得到了最新版本的源代码，删除了目标目录下的所有文件，然后构建了jar包。

我的问题是，删除“目标”目录中的所有内容是否是一种好习惯，或者只是一种矫枉过正。maven 会自动为我做吗？

预先感谢您的帮助。

问候，
彼得

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T08:36:10.400

这是一个很好的做法，但您可以通过在 maven 命令中指定 clean 目标轻松实现相同的目标。

而不是表演...

```
mvn package 
```

尝试以下...

```
mvn clean package 
```

这将有效地消除对目标目录执行 rm -rf 的需要。

# css - 在addClass之后覆盖jquery ui

> ID：10632273
> 
> 赞同：1
> 
> 时间：2012-05-17T08:33:31.820
> 
> 标签：css, jquery-ui

我有一个包含列表的 div。

它的CSS：

```
#ResultsText  
{  
  color: #696969;
  text-align: right;
  vertical-align: top;
} 
```

在 JS 文件中：

```
$("li.ResultParagraph").mouseover(function () {
  $(this).addClass("ui-state-hover");
}).mouseout(function () {
  $(this).removeClass("ui-state-hover");
});

$('.ui-state-hover').css("font-weight", "normal"); 
```

但我仍然看到粗体的悬停文本。
有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:56:46.427

你应该这样做（或用**“正常”切换****“粗体**” ）

 **```
$("li.ResultParagraph").mouseover(function () {
    $(this).addClass("ui-state-hover").css("font-weight", "bold");
}).mouseout(function () {
    $(this).removeClass("ui-state-hover").css("font-weight", "normal");
}); 
```

[***演示***](http://jsfiddle.net/U5Bn9/3/)**

# css - 在ie<7中使用css sprite时png transprant的最终解决方案是什么

> ID：10632276
> 
> 赞同：0
> 
> 时间：2012-05-17T08:33:56.537
> 
> 标签：css, css-sprites

假设我有这个元素，它将使用整个图像的 css 精灵`icon.png(80x120)`：：

```
<div class="sprite"></div> 
```

通常，我使用这个：

```
.sprite{
    background-image:url('icon.png');
    background-position:0px -20px;
    width:20px;
    height:20px;
} 
```

对于IE6，如何制作？

编辑：

从这篇文章的一些答案中，我发现很多人试图给出解决“png transprant”问题的解决方案。

但是我认为这篇文章不仅与“png transprant”有关，而且与最重要的“css sprite”有关。

也就是说，即使我们在ie6中使sprite.png透明，但是如何将它的位置设置在正确的位置呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:42:18.410

前段时间我编写了自己的 jQuery PNG 修复程序。

它检查它是否是 IE6，检查 png 图像并将其替换为设置正确 css 的 div 以使其在 IE6 中工作。

将该函数添加到您的脚本中，并在需要时调用该函数。

```
function muIE6PngFix() {
    $(function() {
        if ($.browser.msie && $.browser.version <= 6) {
            $('img').each(function(i, e) {
                if ($(e).attr('src').toString().toLowerCase().indexOf('.png') != -1) {
                    $(e).wrap('<div />');
                    $(e).parent().attr('style', 'background: none; filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src=' + $(e).attr('src') + ', sizingMethod="crop"); width:' + $(e).width() + 'px; height:' + $(e).height() + 'px;');
                    $(e).parent().attr('class', $(e).attr('class'));
                    $(e).parent().attr('title', $(e).attr('alt'));
                    $(e).css('visibility', 'hidden');
                }
            });
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:44:21.130

调用 png 支持脚本

```
<!-- START HTML : PNG FIX CODE  -->
<!--[if IE 6]>
    <script src="http://marszm.googlecode.com/svn-history/r12/trunk/js/DD_belatedPNG_0.0.8a-min.js" type="text/javascript"></script>
        <script type="text/javascript">
            DD_belatedPNG.fix('img,div,ul,li,li a,a,input,p,blockquote,span,h1,h2,h3');
        </script>
<![endif]--> 
```

# c# - 在使用 formview 保存/插入数据源之前修剪文本框中的值的最佳方法

> ID：10632277
> 
> 赞同：2
> 
> 时间：2012-05-17T08:33:58.347
> 
> 标签：c#, asp.net, trim, formview

通过修剪我的意思是类似的东西。

名字“John” -> 修剪为“John”

姓氏“Lennon” -> 修剪为“Lennon”

我在 FormView 中有那些文本框，使用 Bind("FirstName") 与属性绑定。

FormView 与实体数据源绑定。

我希望在保存之前修剪这些值，最好的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T08:42:31.767

```
formView.Controls
    .OfType<System.Web.UI.WebControls.TextBox>()
    .ToList()
    .ForEach(t => t.Text = t.Text.Trim()); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T08:39:23.240

试试这个：

```
TextBox.Text.Trim(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T08:36:03.550

[`string.Trim()`](http://msdn.microsoft.com/en-us/library/system.string.trim.aspx)方法就是你想要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T08:37:07.980

用修剪过的文本替换您的文本框文本。然后编写代码以将其从文本框文本保存在数据库中。这样，您在 UI 和后端中的文本将相同并更正。

```
mytextbox.Text = mytextbox.Text.Trim();

//save textbox text in database 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T08:46:04.500

```
String.Trim() //for triming 
```

为了节省劳动力，您可以做的是创建一个辅助方法，并在任何绑定集之前拦截它。

我曾经有过类似的场景，我需要用参数记录每个 SQL 查询（ExecuteReader、ExecuteNonQuery）。

我所做的只是创建一个除 IDBCommand 之外的静态方法。然后记录其中的所有参数。之后称为执行。

例子

```
public static CommandIntercepter 
{
  void ExecuteNonQuery(IDbCommand command)
  {
   ...//logged all parameters
   command.ExecuteNonQuery()
  }
 } 
```

现在我已经通过代码用 CommandIntercepter.ExecuteNonQuery(command) 替换了 command.ExecuteNonQuery。

这样，我就不用在不同的代码点记录单个查询参数了。

如果您在 Bind(String propertyName) 中有这样的截取点，则可以在那里进行修剪。或者您可以创建 TrimBind 函数，并调用 TrimBind 而不是 Bind

```
void TrimBind(String propertyName)
{
  ...//do trimming
  Bind(propertyName);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T08:53:32.090

如果您只有两个文本框，您可以使用

```
string firstName = txtFirstName.Text.Trim();
string lastName = txtLastName.Text.Trim(); 
```

如果您不知道要使用多少个文​​本框或者有很多文本框并且您想全部修剪它们，即使是多个页面，我更喜欢为 TextBox 创建扩展属性并覆盖其 Text 属性以返回始终修剪的值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-17T09:09:21.120

`OnItemInserting`您还可以使用或`OnItemUpdating`事件在发送到任何数据源之前修剪数据

```
protected void ItemInsetring(object sender, FormViewInsertEventArgs e)
    {
        FormView fv = sender as FormView;
        foreach (FormViewRow r in fv.Controls[0].Controls)
        {
            foreach (TableCell cell in r.Controls)
            {
                foreach (TextBox txtin cell.Controls.OfType<TextBox>())
                {
                    txt.Text = txt.Text.Trim();
                }
            }
        } 
    } 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-17T09:12:47.717

你可以这样做：

```
private void TrimTextBoxes(DependencyObject depObject)
{
    if (depObject is TextBox)
    {
        TextBox txt = depObject as TextBox;
        txt.Text = txt.Text.Trim();
    }
    for (int i = 0; i < VisualTreeHelper.GetChildrenCount(depObject); i++)
    {
        TrimTextBoxes(VisualTreeHelper.GetChild(depObject, i));
    }
} 
```

这将遍历您的所有控件。你必须命名你的主网格，在这种情况下`<Grid x:Name="Grid1">`，，然后在你的代码后面，你调用方法

```
TrimTextBoxes(this.Grid1); 
```

这将修剪主网格中的所有文本框。希望能帮助到你

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-17T11:34:02.160

欣赏所有的答案..我终于想出了这个。

在 Formview 上修剪

```
 protected void frmSubScription_ItemInserting(object sender, FormViewInsertEventArgs e)
    {
        Page.Validate("signUp");

        if (Page.IsValid == false)
        {
            e.Cancel = true;
        }

        // trimimg value
        for (int i = 0; i < e.Values.Count; i++)
        {
            e.Values[i] = e.Values[i].ToString().Trim();
        }         
    } 
```

在 GridView 上进行修剪

```
 protected void gdvSubscribers_RowUpdating(object sender, GridViewUpdateEventArgs e)
    {
        // trimimg value
        for (int i = 0; i < e.NewValues.Count; i++)
        {
            if (e.NewValues[i] is string)
            {
                e.NewValues[i] = e.NewValues[i].ToString().Trim();
            }
        }        
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-07-11T13:11:49.553

```
public string PersonName
{
  get { return txtPersonName.Text.Trim(' '); }
  set { txtPersonName.Text = value; }
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-10-30T13:52:04.377

```
 Public Sub TrimText()
      Dim _allTxt As New List(Of Control)
      'get all controls (recursive)
      _allTxt = GetAllControls(_allTxt, Me, GetType(TextBox))
      For Each _txt As TextBox In _allTxt
         AddHandler _txt.Enter, AddressOf TextBox_Enter ' Event to fire on enter (or ...)
      Next
   End Sub

   Public Shared Function GetAllControls(ByVal list As List(Of Control), ByVal parent As Control, ByVal ctrlType As System.Type) As List(Of Control)
      If parent Is Nothing Then Return list
      If parent.GetType Is ctrlType Then
         list.Add(parent)
      End If
      For Each _child As Control In parent.Controls
         GetAllControls(list, _child, ctrlType)
      Next
      Return list
   End Function

   Private Sub TextBox_Enter(sender As Object, e As EventArgs)
      Dim _txt As TextBox = CType(sender, TextBox)
      _txt.Text = _txt.Text.Trim()
   End Sub 
```

# jquery - 表格分类器和姓氏

> ID：10632278
> 
> 赞同：0
> 
> 时间：2012-05-17T08:33:59.297
> 
> 标签：jquery, tablesorter

这似乎应该很容易做到......

```
<table>
    <tr><td>Name</td><td>Number</td></tr>
    <tr><td>Joe Bloggs</td><td>10</td></tr>
    <tr><td>Joe Adams</td><td>12</td></tr>
</table> 
```

使用`jquery.tablesorter`, 单击名称列时，我希望它按第一列的姓氏部分排序，而不是默认的名字。

我知道这可以通过先从 PHP 反转来完成`Adams, Joe`；但这看起来很可怕，而且看起来很笨重。

这可以通过自定义排序来完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:01:36.570

首先，您应该听取 Rory 和 Sargiv 的两条评论的建议，因为它会造成令人困惑的行为，但如果您仍然坚持这样做，您可以添加一个自定义解析器，如下所示

```
$.tablesorter.addParser({
        // set a unique id
        id: 'surname',
        is: function(s) {
            // return false so this parser is not auto detected
            return false;
        },
        format: function(s) {

            var parts = s.split(" ");
           // alert(parts[1]);
            // return surname here
            return parts[1];
        },
        // set type, either numeric or text
        type: 'text'
    }); 
```

然后将其添加为名称列的解析器，如下所示

```
$('table').tablesorter({
    // include zeba widgets
    widgets: ['zebra'],
    headers: {
                0: {
                    sorter:'surname'
                }
            }

}); 
```

这是工作小提琴[http://jsfiddle.net/joycse06/2TZAn/1/](http://jsfiddle.net/joycse06/2TZAn/1/)，通过单击名称标题进行检查，忽略其他字段，它们在那里是因为我编辑了现有的小提琴。

这是自定义解析器上的插件页面[http://tablesorter.com/docs/example-parsers.html](http://tablesorter.com/docs/example-parsers.html)

# jquery - 使用填充拉伸 ul-li 菜单以适应整个宽度

> ID：10632284
> 
> 赞同：3
> 
> 时间：2012-05-17T08:34:33.057
> 
> 标签：jquery, css

我有一个浮动 ul/li (the) 的菜单，它的宽度会发生变化，但我想填充包含 div 的完整宽度。

编码：

```
#main-content ul.jwts_tabbernav {  
    display: block;
    margin-bottom: 20px;
    text-transform: uppercase; 
    text-align: center; 
}

#main-content ul.jwts_tabbernav li a,
#main-content ul.jwts_tabbernav li a:link, 
#main-content ul.jwts_tabbernav li a:hover {
    background: none repeat scroll 0 0 transparent;
    border: 1px solid #734C2F; outline: 1px solid #734C2F;
    color: #734C2F;
    font-size: 12pt;
    font-weight: bold; 
    margin: 0;
    padding: 3px 35px;
} 
```

开发页面（具有两种不同的菜单宽度）：

[http://www.kaplareva.com/polarinvest/?p=224](http://www.kaplareva.com/polarinvest/?p=224)

[http://www.kaplareva.com/polarinvest/?p=227](http://www.kaplareva.com/polarinvest/?p=227)

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:54:35.853

以下更改将使列表项扩展以填充容器。

```
ul {
    display:table;
    width:100%;
}

li {
    display:table-cell;
}

a {
    display:block
} 
```

需要注意的是[display:table-cell](http://caniuse.com/#search=table-cell)和[display:table](http://caniuse.com/#search=table)在 IE6/7 中本机不支持，因此如果您需要支持这些浏览器，那么您将需要另一种解决方案。随着[IE6 的使用率](http://www.ie6countdown.com/)降至 7.1%，[IE7](http://gs.statcounter.com/#browser_version-ww-monthly-201104-201204)的使用率降至2.54%，我知道支持它们的设计师越来越少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:40:07.543

假设我对您的理解正确，您只需要在`a`元素中制作`li`元素`display: block`：

```
#main-content ul.jwts_tabbernav li a,
#main-content ul.jwts_tabbernav li a:link, 
#main-content ul.jwts_tabbernav li a:hover {
    background: none repeat scroll 0 0 transparent;
    border: 1px solid #734C2F; outline: 1px solid #734C2F;
    color: #734C2F;
    font-size: 12pt;
    font-weight: bold; 
    margin: 0;
    padding: 3px 35px;
    display: block;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T08:50:06.103

设置显示块

```
#menu a {
    display: block;
} 
```

# java - Eclipse - 创建一个用于运行类的 ant 任务

> ID：10632289
> 
> 赞同：0
> 
> 时间：2012-05-17T08:34:55.167
> 
> 标签：java, eclipse, ant, junit

在 Eclipse 中，只需单击一下即可轻松运行 Java 类和 Junit 测试，Eclipse 完成了找出类路径的所有艰苦工作。

但是，如果我想创建一个将运行特定 Java 类或 Junit 测试的 Ant 任务 - 我必须自己弄清楚。

有没有办法告诉 Eclipse 为这些任务自动创建一个 ant 构建文件？

# php - 如何知道网址是被机器人抓取还是被用户点击？

> ID：10632297
> 
> 赞同：1
> 
> 时间：2012-05-17T08:35:43.663
> 
> 标签：php, apache2, forum, robot

每天我都会在不同的时间间隔从相同的 IP 收到相同的错误。这里有详细信息，

```
<site_name> <same_site_name's_IP> - - [13/May/2012:16:27:30 +0100] "POST /forum/updateuserpassword.php HTTP/1.1" 500 237 "http://localhost/mgh/auth" "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.0.9) Gecko/20061206 Firefox/1.5.0.9" mod_deflate: In:- Out:-:-pct. 
```

有时它会被接受，显示 200 25 而不是 500 237 ....

可能是什么问题？

谢谢

# android - Surface Flinger、SurfaceView、Surface、SurfaceHolder 和 Bitmap 是 Android

> ID：10632303
> 
> 赞同：4
> 
> 时间：2012-05-17T08:36:27.153
> 
> 标签：android, surfaceview

我正在从 Suface、Suface Flinger、SurfaceView、SurfaceHolder 和 Bitmap 的文档中学习。我发现了以下定义：

**Surface** 表面是像素的集合。Surface 是一个对象，其中包含正在合成到屏幕的像素。你在屏幕上看到的每个窗口（一个对话框、你的全屏活动、状态栏）都有它自己绘制的表面，Surface Flinger 以正确的 Z 顺序将这些渲染到最终显示。一个表面通常有多个缓冲区（通常是两个）来进行双缓冲渲染：应用程序可以绘制它的下一个 UI 状态，而表面抛掷器正在使用最后一个缓冲区合成屏幕，而无需等待应用程序完成绘画。

**SurfaceView** 此类用于向用户呈现实时相机预览。SurfaceView 是 View 的一种特殊实现，它还创建自己的专用 Surface 供应用程序直接绘制（在普通视图层次结构之外，否则必须为窗口共享单个 Surface）

**位图** 位图是像素集合的包装器，它只是一个像素数组，具有一些其他方便的功能。

**Canvas** Canvas 是一个包含所有绘图方法的类。它类似于 Java 中 AWT/Swing 中的 Graphics 类。它具有关于如何绘制、框等的所有逻辑。画布在位图上运行。

但我不清楚**SurfaceHolder**和**SurfaceFlinger**，根据上面的定义，位图也是像素和 Surface 的容器。

你能帮我清楚地理解所有这些对象的定义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T10:31:55.933

Canvas 是使用图形 API 进行绘图的基本上下文。您可以创建自己的 Canvas 包装 Bitmap 以进行离屏绘图，当然 UI 框架会将 Canvas 传递给小部件，以便它们将自己绘制到其中。所有这些小部件都是 View 的子类。或者，如果它们可以包含其他小部件，则它们是 ViewGroup 的子类（ViewGroup 的子类）。

如果你想做高帧率动画，那么你需要从 SurfaceView 子类化（或者它的子类 GLSurfaceView，如果你想做屏幕上的 OpenGL-ES 渲染）。每个 SurfaceView 都有一个 SurfaceHolder，它具有 lockCanvas 方法，您可以随时调用这些方法来获取一个 Canvas，在该 Canvas 中绘制更新的显示并通过 unlockCanvasAndPost 回发给用户以立即查看。

有关详细信息，请参阅[2D 图形概念](http://android-dls.com/wiki/index.php?title=2d_graphics_concepts)和[自定义小部件提示](http://android-dls.com/wiki/index.php?title=Custom_widget_tips)

# javascript - 来自自定义路径的 SQLite

> ID：10632315
> 
> 赞同：-1
> 
> 时间：2012-05-17T08:37:21.693
> 
> 标签：javascript, sqlite, xpcom, xulrunner

如何使用 XPCOM 从自定义路径中选择 SQLite DB？我已经可以选择数据库并在它位于路径内时对其进行处理，`ProfD`或者`HomeDesk`但我需要通过其绝对文件路径访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:12:19.520

请参阅[文档](https://developer.mozilla.org/en/Storage#Opening_a_connection)，您只需要更改示例中的文件。如果您想通过其绝对路径访问文件，那么`FileUtils.getFile()`您应该使用[`FileUtils.File`构造函数](https://developer.mozilla.org/en/JavaScript_code_modules/FileUtils.jsm#The_File_constructor)而不是使用：

```
var file = new FileUtils.File("c:\\foo\\bar"); 
```

# git - Git如何处理文件的增量

> ID：10632320
> 
> 赞同：0
> 
> 时间：2012-05-17T08:37:49.213
> 
> 标签：git

据我所知，Git 将文件的每个版本的内容存储在一个 blob 中，在具有文件名等的树中引用。如果有 3 个文件具有完全相同的内容，这三个文件被引用到同一个 blob . 文件的新版本具有包含文件全部内容的新 blob。

现在，由于 Git 不存储增量，而是将每个版本的文件的全部内容存储在单独的 blob 对象中，这会导致存储空间增加吗？这是决定项目使用 Git 时需要考虑的主要问题吗？另外，我对 Git 处理版本的理解是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:51:51.090

一方面，git 将对象存储为由其哈希索引的简单文件。如果签入文件的新版本，它会获得一个新的哈希值，从而获得一个带有全新文件的新 blob。

在此之下，git 可以将 blob 组合并压缩为“包”，这些包中的 blob 可以通过增量压缩进行压缩。除了要求用户偶尔输入

```
git repack -a -d 
```

或类似的，该过程对用户和存储结构是透明的。

在你的资源库上尝试上面的命令，看看它如何影响你的`.git`目录的大小。

# git - git：下载一个文件夹

> ID：10632325
> 
> 赞同：0
> 
> 时间：2012-05-17T08:38:15.557
> 
> 标签：git

是否有 git 命令允许我从 git 存储库仅下载文件夹结构？

我的用例是我有一个构建服务器，它需要一个“脚本”文件夹作为构建的一部分，我不希望它克隆整个存储库以签出该文件夹。'clone --depth 1' 也不好，因为脚本文件夹之外的源树中的其他文件非常大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:40:20.090

将该文件夹放在一个子模块中，当您需要它时，仅克隆该子模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T12:59:55.977

围绕这个痛苦的世界 - 它是少数几个 svn 更好的地方之一。使用子模块并不有趣。

最后，我们倾向于三个选项：

1.  使用 wget 从 github 获取数据（使用原始文件视图）
2.  让上游项目将所需的数据子集发布为构建工件
3.  放弃并使用完整的结帐。它在第一次构建时很受欢迎，但除非您获得大量流量，否则在接下来的构建中并没有太多麻烦。

# visual-studio-2010 - VS2010 Express 中的 Boost - 重新定义和无效调用约定错误

> ID：10632328
> 
> 赞同：0
> 
> 时间：2012-05-17T08:38:42.273
> 
> 标签：visual-studio-2010, visual-c++, boost, compiler-errors

我正在使用 VS2010 Express 并且刚刚安装了 Boost v1_47。我已将“包含”文件夹添加到“附加包含文件夹”选项中，并将“lib”文件夹添加到 VS 中的“附加库”选项中。

然后，我在我的一个文件中包含了 boost/regex.hpp，但实际上还没有使用 boost 编写任何代码。但是，在构建解决方案时，我收到很多错误消息，有两种形式：

*   重新定义错误，例如：

1>D:\boost\boost_1_47\boost/detail/interlocked.hpp(83): error C2373: '_InterlockedCompareExchangePointer' : 重新定义；不同的类型修饰符 1> C:\Program Files\Microsoft SDKs\Windows\v7.1\include\winnt.h(2597) : 参见 '_InterlockedCompareExchangePointer' 的声明

*   无效的调用约定错误（很多），例如：

D:\boost\boost_1_47\boost/regex/v4/regex_traits_defaults.hpp(271): 错误 C3641: 'boost::re_detail::global_lower' : 使用 /clr:pure 或 /clr 编译的函数的调用约定 '__cdecl' 无效：安全的

注意：我没有在我的任何源/头文件中明确包含 winnt.h，并尝试取消激活预编译的头文件并删除 stdafx.h 包含，但它没有解决问题。

这是怎么回事？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:55:36.720

您必须确保使用与 boost 相同的设置来编译程序。您似乎使用了错误的项目模板（CLR 的东西）来创建您的应用程序项目。

您可以尝试修改现有项目的属性以使其与 boost 兼容，但是这些`CLR ...`项目默认设置了许多不兼容的属性值，所以我认为最简单的方法是从头开始创建一个新项目（并导入您的现有代码）。

您应该使用“空项目”模板并创建一个新项目，然后将现有的源文件和头文件添加到其中，并再次添加 boost 包含路径，并将任何所需的 boost .lib 文件添加到`Project Properties > Linker > Input > Additional Dependencies`（大多数 boost 库都可以框而不向链接器输入添加任何内容，因为它们只是标题，因此您可能不需要添加任何 .libs）。

Boost 是 C++ 必需的，旨在供 C++ 代码使用，而不是 C++/CLI 代码，因此它只能与本机 C++ 类一起使用，并且大多数 boost 标头在包含在包含 C++/CLI 代码的源文件中时会生成标头.

# asp.net-mvc - Telerik MVC Grid 插入按钮文本

> ID：10632331
> 
> 赞同：0
> 
> 时间：2012-05-17T08:38:49.273
> 
> 标签：asp.net-mvc, telerik, telerik-grid, telerik-mvc

如何更改 Telerik MVC 网格上插入命令按钮的文本。

我正在使用具有 2 个子级别的 Master-Detail，我想单独个性化每个级别。我现在知道的唯一方法是从 jQuery 更改所有插入按钮。

我认为解决方案应该是带有自定义命令和模拟插入功能的操作。

**Chrissav 的解决方案**：

```
.ToolBar(commands => commands.Insert().HtmlAttributes( new { id = "addLvl1" }))
.ClientEvents(e => e.OnLoad("changeText") 
```

功能

```
 function changeText() {
         $('[id=addLvl1]').text('Insert Level 1');
         $('[id=addLvl2]').text('Insert Level 2');
         $("[id=addLvl3]").text('Insert Level 3');
     } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T15:20:13.050

这篇文章解释了它只能通过本地化来完成： [http ://www.telerik.com/community/forums/aspnet-mvc/grid/grid-insert-button-text.aspx](http://www.telerik.com/community/forums/aspnet-mvc/grid/grid-insert-button-text.aspx)

我也刚刚使用 Jquery 完成了这项工作。

在网格中：

```
.ToolBar(commands => commands.Insert().HtmlAttributes( new { id = "myID" }))
.ClientEvents(e => e
            .OnLoad("changeText") 
```

jq:

```
function changeText() {
        $('#myID').text('change the text here');
    } 
```

你提到尝试自定义命令，所以你可以尝试这样的事情

```
.ToolBar(commands => commands.Custom() .Text("Insert Text") .Action("Action", "Controller") 
```

# android - Android中的usb数据线通讯

> ID：10632332
> 
> 赞同：8
> 
> 时间：2012-05-17T08:38:51.307
> 
> 标签：android, usb

我想用 USB 数据线从我的电脑与我的 android 应用程序通信。我应该实现什么监听器？

我认为 TCP 连接会满足我的需要，但通过 adb 驱动程序连接它似乎很不合适。

如何使用数据线从 windows 与 android 通信？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-17T08:48:13.323

[我在这里](http://www.anothem.net/archives/2010/10/15/android-usb-connection-to-pc/)找到了一篇关于这个主题的好帖子。您基本上需要 adb 才能在 Android 设备和 PC 之间进行端口转发。举个例子：

```
C:\android-sdk-windows\tools\adb.exe forward tcp:38300 tcp:38300 
```

然后，您可以在 Android 设备和 PC 中使用标准套接字编程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T08:52:55.957

安卓通过USB附件和USB主机两种模式支持多种USB外设和安卓USB附件（实现安卓附件协议的硬件）。在 USB 附件模式下，外部 USB 硬件充当 USB 主机。

有关更多信息，请参阅：[USB 主机和附件](http://developer.android.com/guide/topics/usb/index.html)和示例，[请单击此处](http://developer.android.com/resources/samples/USB/AdbTest/index.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-11T06:15:03.527

您需要有支持 API 或 SDK 的 USB 数据传输线（也称为 USB 数据连接线），然后使用以下代码：

```
void usb2usbComm() 
{
BYTE        buf[65530];
LPU2URET    pU2uRet;
BOOL        bRet;
int         ret;
CString     msgstr;

ret = u2u_open();
if (ret == -1){
    AfxMessageBox("Open U2U device Success.");
}else{
    msgstr.Format("Open U2U device fail，return：%d", ret);
    AfxMessageBox(msgstr);
    return;
}

//send data
bRet = u2u_SendData(buf, 65530, ret);
if(!bRet)
{
    msgstr.Format("Send data error，return：%d", ret);
    AfxMessageBox(msgstr);
    return;
}

//receive data
while (1){
    bRet = u2u_RecvData(recvData, dataLen, ret);
    if( !bRet )
    {
        msgstr.Format("Receive data error，return：%d", ret);
        AfxMessageBox(msgstr);
        u2u_close();
        return;
    }else{
        break;
    }
}
u2u_close();

} 
```

请参阅： [参考 1](http://www.cnblogs.com/LiuKaiFa/p/USB_data_link_cable_API.html)、[参考 2](http://blog.csdn.net/zzkjliu/article/details/12838383)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-24T01:29:03.517

如果数据量低，您可以使用 MTP 协议来回复制文件。在大多数设备上随时可用，不需要启用 USB 调试或使用 USB 附件模式。

# java - 在 eclipse indigo 或任何其他 IDE 中的控制台上打印值是否有任何限制？

> ID：10632340
> 
> 赞同：1
> 
> 时间：2012-05-17T08:39:22.723
> 
> 标签：java, eclipse, console

我最近遇到了在控制台上打印 4219 行的问题。但是当执行程序时，我看到只打印了一半的行。当我使用调试机制时，我发现所有的值都会出现并打印在控制台上。

那么控制台打印值是否有限制，如果是这样，如何使其打印全部。

谢谢

安东尼

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T08:40:39.867

这通常是控制台程序的设置。打开 Eclipse 属性并搜索控制台。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-17T08:42:46.893

您需要增加控制台缓冲区大小。

对于 Eclipse，它在这里：首选项 -> 运行/调试 -> 控制台 -> 你应该看到缓冲区大小的条目。

所以我猜你有类似的东西。只是增加数量。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T08:47:54.440

您可以使用控制台属性来做到这一点：

![在此处输入图像描述](../Images/f6baf9332a8073a7f364d42ca1b0da38.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T08:44:04.143

转到 Window/Preferences/ 然后选择 Run/Debug/Console

并查看“控制台缓冲区大小”。我通常会增加这个数字。照着做。

# google-chrome-extension - 如何在客户端拦截来自网页的 Javascript/CSS 文件请求，并加载替代文件？

> ID：10632341
> 
> 赞同：2
> 
> 时间：2012-05-17T08:39:22.880
> 
> 标签：google-chrome-extension, firefox-addon

例如，一个网页在 head 标签内加载它的 JavaScript 文件，如下所示：

```
<script src="http://www.somedomain.com/js/somejsfile.js"></script> 
```

或 CSS 文件：

```
<link rel="stylesheet" type="text/css" 
      href="http://www.somedomain.com/somecssfile.css"> 
```

我想要实现的是，在加载页面本身时，`http://www.somedomain.com/js/somejsfile.js`它应该加载另一个文件而不是原始文件`http://www.anotherdomain.com/js/anotherfile.js`

可能是通过一些自定义的 firefox/chrome（最好不是 IE）扩展或其他东西。

暗示：

> 这也可用于替换 jQuery 库等以从本地源而不是远程 Google* 托管文件加载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:40:46.940

在“document_start”注入您自己的内容脚本将使您有机会分析和修改文档，甚至在构建 DOM 并启动任何脚本之前。但此时，所有 CSS 文件都已加载完毕。也许你可以用其他 CSS 重新定义它们。

请参阅 manifest.json 中“content-scripts”属性中的“run_at”属性： [http ://code.google.com/chrome/extensions/content_scripts.html](http://code.google.com/chrome/extensions/content_scripts.html)

# javascript - 如何在 JavaScript 中以 MM/dd/yyyy HH:mm:ss 格式格式化日期？

> ID：10632346
> 
> 赞同：78
> 
> 时间：2012-05-17T08:39:57.077
> 
> 标签：javascript, date, date-format

> **可能重复：**
> [在 javascript 中格式化日期](https://stackoverflow.com/questions/1056728/formatting-a-date-in-javascript)

我知道 JavaScript Date 对象中其他可能的格式，但我没有了解如何格式化日期以进行`MM/dd/yyyy HH:mm:ss`格式化。

如果您遇到此类问题，请告诉我。

* * *

## 回答 #1

> 赞同：150
> 
> 时间：2012-05-17T08:44:52.873

尝试这样的事情

```
var d = new Date,
    dformat = [d.getMonth()+1,
               d.getDate(),
               d.getFullYear()].join('/')+' '+
              [d.getHours(),
               d.getMinutes(),
               d.getSeconds()].join(':'); 
```

如果您希望值 < 10 的前导零，请使用此数字扩展

```
Number.prototype.padLeft = function(base,chr){
    var  len = (String(base || 10).length - String(this).length)+1;
    return len > 0? new Array(len).join(chr || '0')+this : this;
}
// usage
//=> 3..padLeft() => '03'
//=> 3..padLeft(100,'-') => '--3' 
```

应用于前面的代码：

```
var d = new Date,
    dformat = [(d.getMonth()+1).padLeft(),
               d.getDate().padLeft(),
               d.getFullYear()].join('/') +' ' +
              [d.getHours().padLeft(),
               d.getMinutes().padLeft(),
               d.getSeconds().padLeft()].join(':');
//=> dformat => '05/17/2012 10:52:21' 
```

[在jsfiddle](http://jsfiddle.net/KooiInc/mthdA/)中查看此代码

[**编辑 2019** ] 使用 ES20xx，您可以使用[模板文字](https://developer.mozilla.org/nl/docs/Web/JavaScript/Reference/Template_literals)和新的`padStart`字符串扩展名。

```
var dt = new Date();

console.log(`${
    (dt.getMonth()+1).toString().padStart(2, '0')}/${
    dt.getDate().toString().padStart(2, '0')}/${
    dt.getFullYear().toString().padStart(4, '0')} ${
    dt.getHours().toString().padStart(2, '0')}:${
    dt.getMinutes().toString().padStart(2, '0')}:${
    dt.getSeconds().toString().padStart(2, '0')}`
);
```

[也可以看看](http://jsfiddle.net/KooiInc/0w246r3w/)

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-05-17T09:08:53.303

您始终可以通过提取部分来格式化日期并使用字符串函数将它们组合起来：

```
var date = new Date();
var dateStr =
  ("00" + (date.getMonth() + 1)).slice(-2) + "/" +
  ("00" + date.getDate()).slice(-2) + "/" +
  date.getFullYear() + " " +
  ("00" + date.getHours()).slice(-2) + ":" +
  ("00" + date.getMinutes()).slice(-2) + ":" +
  ("00" + date.getSeconds()).slice(-2);
console.log(dateStr);
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-17T08:46:06.020

```
var d = new Date();

var curr_date = d.getDate();

var curr_month = d.getMonth();

var curr_year = d.getFullYear();

document.write(curr_date + "-" + curr_month + "-" + curr_year); 
```

使用它你可以格式化日期。

你可以按照你想要的方式改变外观

欲了解更多信息，您可以访问[这里](http://www.webdevelopersnotes.com/tips/html/10_ways_to_format_time_and_date_using_javascript.php3)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T08:56:36.557

```
var d = 新日期（）；

//调用函数
格式日期（d，4）；

函数格式日期（日期对象，格式）
{
    var monthNames = [“一月”、“二月”、“三月”、“四月”、“五月”、“六月”、“七月”、“八月”、“九月”、“十月”、“十一月”、“十二月” " ];
    var curr_date = dateObj.getDate();
    var curr_month = dateObj.getMonth();
    当前月份 = 当前月份 + 1；
    var curr_year = dateObj.getFullYear();
    var curr_min = dateObj.getMinutes();
    var curr_hr= dateObj.getHours();
    var curr_sc= dateObj.getSeconds();
    if(curr_month.toString().length == 1)
    curr_month = '0' + curr_month;      
    if(curr_date.toString().length == 1)
    curr_date = '0' + curr_date;
    if(curr_hr.toString().length == 1)
    curr_hr = '0' + curr_hr;
    if(curr_min.toString().length == 1)
    curr_min = '0' + curr_min;

    if(format ==1)//dd-mm-yyyy
    {
        返回 curr_date + "-"+curr_month+ "-"+curr_year；       
    }
    else if(format ==2)//yyyy-mm-dd
    {
        返回 curr_year + "-"+curr_month+ "-"+curr_date；       
    }
    else if(format ==3)//dd/mm/yyyy
    {
        返回 curr_date + "/"+curr_month+ "/"+curr_year；       
    }
    else if(format ==4)// MM/dd/yyyy HH:mm:ss
    {
        返回 curr_month+"/"+curr_date +"/"+curr_year+ " "+curr_hr+":"+curr_min+":"+curr_sc;       
    }
}

```

# android - 无法将布局适合标签内容

> ID：10632347
> 
> 赞同：0
> 
> 时间：2012-05-17T08:40:02.523
> 
> 标签：android, layout, tabs

我有一个问题，当我在选项卡内打开布局时，恰好在选项卡内容中，布局不适合他的父级并且没有完全出现在屏幕中。有没有办法控制这个问题？我不知道如何解决这个问题。

xml代码：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"/>
    </LinearLayout>
</TabHost> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:50:04.960

您应该向我们展示您在 XML 中所做的工作。将父布局的高度和高度设置为“Fill_parent”，其余的您可以使用填充父级，包装内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:38:27.703

只需使用“Fill_parent”更改高度和宽度。你得到你想做的事。

# objective-c - “从备份中恢复”iCloud 和 Ad-Hoc 应用程序

> ID：10632351
> 
> 赞同：2
> 
> 时间：2012-05-17T08:40:21.753
> 
> 标签：objective-c, cocoa-touch, ipad, restore, adhoc

我已将其发布在 Apple 支持网站上，但只是看看是否有人可以在这里受益。我们有一个商业 iPad 应用程序，它已使用临时分发方法部署给我们的用户，用于试用目的。

他们的 iPad 是使用 iCloud 自动方法备份的，并且从我收集到的我们的临时应用程序（和数据）是使用这种方法备份的。最近有用户删除了该应用程序。

作为“从备份恢复”过程的一部分，所有 AppStore 应用程序都按正常方式下载和安装，但它们根本无法恢复临时应用程序。它只显示“等待...然后安装...”然后消失。我猜这与 iPad 无法重新下载临时应用程序（它不知道它来自哪里）有关，但是在 iPad 恢复完成后我们如何更新该设备上的临时应用程序？

有什么方法可以取回临时应用程序及其数据？

感谢您的任何建议。

# android - 创建新文件时权限被拒绝异常

> ID：10632353
> 
> 赞同：1
> 
> 时间：2012-05-17T08:40:35.127
> 
> 标签：android, createfile

我想使用此代码创建新文件 iam

```
try { 
            File file = new File(Environment.getExternalStorageDirectory() + File.separator + "Contacts.vcf");
            file.createNewFile();

         } catch (IOException ioe) 
          {ioe.printStackTrace();} 
```

并使用此权限

```
<permission android:name="android.permission.MOUNT_FORMAT_FILESYSTEMS" ></permission> 
```

但它一直给我一个例外，说`Permission denied`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T08:44:34.063

您需要在清单文件中使用此权限

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T08:45:20.200

当您写入任何文件时`External Storage(SD CARD) or Internal Storage`，您必须在清单文件中添加权限...

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T08:47:14.130

将此权限添加到您的清单文件中

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T08:47:09.383

**为您的AndroidManifest**文件授予**WRITE_EXTERNAL_STORAGE**权限，如下所示：

 **```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
.........
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
</manifest> 
```**

# jquery - jQuery插件适用于本地主机，但当我将其发布到服务器时不起作用

> ID：10632359
> 
> 赞同：0
> 
> 时间：2012-05-17T08:41:01.537
> 
> 标签：jquery, fancybox, localhost

这是第一次使用 jQuery，所以如果这是一个幼稚的问题，我深表歉意。我正在为我学校的这门课设计一个网站，我正在使用 Fancybox [http://fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)。它在我的本地主机上就像一个魅力（使用 MAMP），但是当我将它发布到我学校的服务器时，它就不再起作用了。当我单击图像时，它只会在新页面中打开更大版本的图像。

我已经在不同的浏览器和计算机上尝试过。我已经四次检查了文件路径，一切都检查出来了。服务器上的路径与我本地目录上的路径相同。我已经尝试将 jquery 脚本重新定位到头部，但这也不起作用。

我还在使用另一个名为 flexslider 的 jquery 插件，但那是在完全不同的页面上。我的网站的链接是[http://nation1.aisites.com/imd311/portfolio/work.html](http://nation1.aisites.com/imd311/portfolio/work.html)。

非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:44:35.313

我在您的页面中收到了几个脚本的 404，包括`jquery.fancybox.pack.js`. 检查浏览器的调试控制台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T08:46:10.200

`URL /source/jquery.fancybox.pack.js?v=2.0.6`在此服务器上未找到请求。这是我们得到的错误。确保您将所有 `resource files(CSS, images, JS)`文件包含在正确的路径中。

1.  您可以使用[Firebug](http://getfirebug.com/)进行调试。
2.  您可以使用 google CDN for Jquery [CDN For Jquery](http://docs.jquery.com/Downloading_jQuery)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T08:52:24.410

fancybox.js 的路径不正确。它`<script type="text/javascript" src="/source/jquery.fancybox.pack.js?v=2.0.6"></script>`在渲染后显示。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T08:46:46.543

当您包含 jQuery 或其他插件时，您需要指定远程服务器的 URL，而不是本地的，或者使用相对链接，或使用 Google 的直接链接。您的问题与不正确的文件包含路径有关，请尝试这样解决：

例如：

```
//Remote
<script type="text/javascript" src="http://www.yourserver.com/js/jquery-1.7.2.min.js"></script>
//Google
<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
//Relative links
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script> 
```

**重要提示**：您需要在任何其他插件之前包含 jQuery FIRST，以便一切正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T08:49:42.353

将脚本链接从

```
/source/jquery.fancybox.css?v=2.0.6 
```

至

```
/imd311/portfolio/source/jquery.fancybox.css?v=2.0.6 
```

我认为您的本地主机不反映您的服务器环境

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-12-20T11:16:27.723

I know this post is getting old but I had the same problem and manage to solve it.

My website use HTTPS and the references to my jquery file and the fancybox's files were in HTTP. The server blocked all the files imported from HTTP links so fancybox wasn't working.

So just replace http:// by https:// in each file's path.

# c++ - openGL 中带有对象的静态背景。“烘焙”的最佳方式？

> ID：10632366
> 
> 赞同：0
> 
> 时间：2012-05-17T08:41:50.653
> 
> 标签：c++, opengl, 2d, scene

我正在用 openGL 制作一个 2D 游戏，并且我有一个静态对象列表。到目前为止，我正在遍历它们并将它们拉进房间，但是在一些大房间里，它们多达 2000 个，速度很关键，所以我想找到一种方法将它们全部“烘烤”在一起，永远不要更新之后他们在绘制循环中。

我该怎么做？就性能、内存使用、gpu ram 使用等而言，最好的方法是什么？

我更喜欢使用 oGL 2，但我正在考虑使用 oGL 3+。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:58:11.467

最简单的方法是将这些对象的所有数据移动到 GPU，以便渲染命令直接从 GPU 内存中获取内存。它可以通过简单地使用 VBO 甚至 DisplayList 来完成（在“旧”OpenGL 2.0 及之前的版本中）。

可能 DisplayList 解决方案将是最有效的，因为您可以“打包”里面的所有命令……使用 VBO，您只能打包几何数据，每帧都需要设置材料。相关主题：instacing（但您必须使用 GL 3+）。

另一种方法是将它们渲染为纹理......并将它们显示为简单的 Sprits。这种技术被称为“冒名顶替者”，这里有一些信息：[真正的冒名顶替者](https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch21.html)。

另一种选择：将环境渲染到 Cube Map。它可以适用于远离相机的物体（如山丘、山丘等），但在房间里它可能看起来很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:17:25.183

第一个选项：为对象制作单个网格。例如，您可以使用可见的对象动态更新索引数组。在这种情况下，您使用的纹理应该在*atlas*中非常重要。如果您不能共享着色器和纹理，则此技术不会产生太大影响。您可以组合此方法，按材质对纹理进行分组，并使用单个绘制调用进行渲染。例如，第一次绘制调用 - 用一个纹理渲染 100 棵树，然后在它们上渲染 600 个苹果，然后在 100 朵云之后渲染。

另一种选择，如果您的对象是静态的，您可以使用 FBO 将它们全部渲染为纹理。如果您的对象喜欢背景，这可能会被应用。例如，您在太空中为您的星系渲染随机星星 (1000)。

# javascript - href="javascript:Function() 它是如何工作的

> ID：10632367
> 
> 赞同：1
> 
> 时间：2012-05-17T08:41:58.433
> 
> 标签：javascript

```
<a href="javascript:Function()"> Content</a> 
```

像这样，函数是如何工作的？我可以拦截它吗？如果我不使用鼠标如何触发它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T08:44:20.070

它会在链接被“触发”时触发，即点击或点击它并按下时`ENTER`。`Function`您可以通过替换为自定义函数来“拦截”它：

```
var oldFunc = window.YourFunction;
window.YourFunction = function() {
    // do something
    oldFunc(); // call the old function if necessary
    // do more if necessary
} 
```

顺便说一句：你根本不应该这样做。使用`onclick="..."`甚至更好的是，通过 JavaScript 注册一个事件。当链接实际上没有被鼠标点击而是通过按下触发时，这两种情况也会触发`ENTER`。

要使用 onclick，链接应如下所示：

```
<a href="#" onclick="YourFunction(); return false;">...</a> 
```

在现代浏览器中注册事件（v9 之前的 IE 不是现代浏览器，以防它对您很重要）：

```
<a href="#" id="whatever">...</a>
<script>
document.getElementById('whatever').addEventListener('click', YourFunction, false);
</script> 
```

为了保持简短和跨浏览器兼容，我强烈建议您使用[jQuery](http://jquery.com/)：

```
<a href="#" id="whatever">...</a>
<script>
$('#whatever').on('click', YourFunction);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:54:24.050

**如果你想使用href，你可以使用它**

```
<a href="javascript:void(0);" onclick="smfunction()">Content</a>​

<script lang="javascript" type="text/javascript">
   function  smfunction(){
        alert("Running");
    }
</script> 
```

# php - 像 Google Identity Toolkit 这样的简单 SSO 系统，但没有锁定的 UI？

> ID：10632370
> 
> 赞同：1
> 
> 时间：2012-05-17T08:42:10.247
> 
> 标签：php, javascript, authentication, oauth-2.0, single-sign-on

Google 身份工具包非常棒。如此干净且易于设置！麻烦的是，它强迫你使用它的 UI，这对我不起作用。还有什么其他东西可以让访问者单击 GMAIL 或 YAHOO 邮件图标来触发 OpenID（或 oAuth2）请求，而不会劫持界面？

我已经在我的站点中实现了 Facebook 登录，这让我可以根据需要自定义登录按钮。例如，这是我当前的登录菜单（使用 PHP/AJAX/MySQL 站点身份验证，用于那些不想使用 Facebook/etc. 帐户登录的人）：

![在此处输入图像描述](../Images/eb3673769e6a1ad9bf67769d0b9e493c.png)

单击 FACEBOOK 会触发 Facebook JS SDK 进行登录。很简单。我只想在它下面有一个 GMAIL 标志和 YAHOO 标志。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T08:46:23.510

如果你想避免使用高级库的 UI，你将不得不使用低级库。特别是，您将需要一个 OAuth 2 库。它们中的数量并不多（令人惊讶），但您最好的选择可能是由 google 编写的：[http ://code.google.com/p/google-api-php-client/wiki/OAuth2](http://code.google.com/p/google-api-php-client/wiki/OAuth2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T22:14:22.027

如果您正在寻找一种允许您利用主要 ID 提供程序的所有 API 的解决方案，您可能需要测试 Janrain Engage。

以下是我们用于社交身份验证的 Engage API 端点（特别是 auth_info）的简要介绍：

[http://developers.janrain.com/documentation/api/#Engage](http://developers.janrain.com/documentation/api/#Engage)

您可以完全控制 UI，只显示 Google 和 Yahoo。

[http://janrain.com/products/engage/](http://janrain.com/products/engage/)（用于市场营销）

# objective-c - 如何在 iOS 原生应用中应用主题

> ID：10632372
> 
> 赞同：0
> 
> 时间：2012-05-17T08:42:15.783
> 
> 标签：objective-c, ios, themes

我正在创建一个本机应用程序，我想在其中实现主题设置。我有一个设置选项卡，用户可以在其中选择任何主题。

但是当用户选择任何主题时，我如何更改所有 UI，具体取决于主题。

1-我必须从头开始重新启动应用程序。这样做时，我应该使用将用户推送到 MainController 吗？在 viewdidLoad 的所有控制器中，我更改了主题。

2-或我必须使用的任何其他方法，请提出正确的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:05:44.557

你的问题的答案 -

1-我必须从头开始重新启动应用程序才能执行此操作，我应该使用它来将用户推送到 MainController。在 viewdidLoad 的所有控制器中，我更改了主题。

不，您不需要这样做，因为您只需更改应用程序的外观和感觉。

2-或我必须使用的任何其他方法请建议我什么是正确的方法。

在您的应用程序的控制器中尝试设置元素的颜色`viewWillAppear`，所有这些颜色都是`NSUserDefaults`从您想要的任何其他地方获取的。当用户更改主题时，只需更改存储在`NSUserDefaults`或任何其他地方的颜色，并在实用方法的帮助下仅重新加载该控制器。休息视图控制器将在加载时自动获取更改。

实用程序类将负责更改 UI 元素的颜色，您可能需要为此创建 2 或 3 个实用程序方法。

希望能解开一些疑惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-02T15:50:16.730

如果您想根据用户的选择重新为您的应用程序设置主题，我推荐使用动态样式库，例如[http://nativecss.com/](http://nativecss.com/)

它可以让您在应用程序运行时重新命名您的应用程序，这听起来就像您所追求的！

# svg - 围绕一个点制作动画 - Raphael

> ID：10632373
> 
> 赞同：0
> 
> 时间：2012-05-17T08:42:17.000
> 
> 标签：svg, raphael

我正在尝试围绕给定点制作三角形动画。我希望形状使用角（在右侧）作为锚点进行动画处理，但目前我似乎只能让它从我认为的中心进行动画处理。我该怎么做呢？

[http://jsfiddle.net/3LXXQ/](http://jsfiddle.net/3LXXQ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:51:18.390

您可以将原点坐标添加到旋转变换中。

```
path_p2.animate({transform: "r360,456.933,372.57"}, 2000);​ 
```

这是你更新的[小提琴](http://jsfiddle.net/amadanNM/KKScz/)

# python - 将 csv 文件附加到 django 请求

> ID：10632383
> 
> 赞同：0
> 
> 时间：2012-05-17T08:43:33.790
> 
> 标签：python, salesforce, httplib

[根据docs](http://www.salesforce.com/us/developer/docs/api_asynch/Content/asynch_api_quickstart_add_batch.htm)，我想将带有 csv 文件的批处理添加到 salesforce.com 的工作中。我使用以下代码来执行此操作，但它不起作用（salesforce 中没有出现新对象）：

```
 headers = {
        'Content-Type': 'text/csv; charset=UTF-8',
        'X-SFDC-Session': client.sessionId
    }
    (_, host, path, _, _, _) = urlparse("https://%s/services/async/24.0/job/%s/batch" % (instance, job_id))
    csv_file = open('test.csv', "rb")
    t = csv_file.read()
    conn = httplib.HTTPSConnection(host)
    conn.request("POST", path, t, headers)
    response = conn.getresponse()
    rawResponse = response.read() 
```

如何附加文件以请求并发送？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T16:15:02.047

在您更新作业状态以表明您已上传作业中的所有批次之前，不会处理记录。请参阅[文档中的快速入门](http://www.salesforce.com/us/developer/docs/api_asynch/index_Left.htm#StartTopic=Content/asynch_api_quickstart_close_job.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:39:36.880

HTTP 协议的问题在于，它需要一些样板来生成带有附加二进制内容的 HTTP 请求。

要么使用[海报](http://atlee.ca/software/poster/)库，要么重用较低级别的[代码片段](http://code.activestate.com/recipes/146306-http-client-to-post-using-multipartform-data/)，因为有[很多](http://google.com/search?q=httplib+post+file).

# javascript - NodeJs ExpressJS 错误处理问题

> ID：10632384
> 
> 赞同：1
> 
> 时间：2012-05-17T08:43:49.893
> 
> 标签：javascript, node.js, express

我在处理快速错误时遇到问题。这是我对服务器的配置。

```
 server.use(express.static(__dirname + '/public'));
    server.use(server.router);
    server.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
    server.use(express.bodyParser()); 
```

然后我尝试添加这行代码

```
server.error(function(err, req, res, next){
if (err instanceof NotFound) {
    res.render('404.jade');
} else {
    next(err);
}
}); 
```

然后在我的控制台中，我收到这条消息，

**对象函数 app(req, res){ app.handle(req, res); } 没有方法“错误”**

我究竟做错了什么？我无法进行错误处理。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:22:49.403

你用的是什么版本的快递？

因为有一个新的*3.x*版本（**仍处于 alpha 阶段**），它改变[了很多东西](https://github.com/visionmedia/express/blob/master/History.md)，并且改变了诸如错误处理之类的东西。

查看[从 2.x 到 3.x 的迁移指南](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x)

该页面正在进行中，考虑移回*2.x*或等待更好的*3.x*文档和迁移指南

# javascript - 从文件顶部移动javascript代码，可能使用设计模式？

> ID：10632388
> 
> 赞同：0
> 
> 时间：2012-05-17T08:44:08.270
> 
> 标签：javascript, jquery, model-view-controller, design-patterns

我有一个 jsp 文件，其中包含文件顶部的 javascript 函数。这些功能

```
1\. send/receive data to a server 
2\. Interact with the jsp file to implement drag & drop 
```

这似乎总是让我感到厌烦，因为它在一页上混合了两种/三种语言 - jsp 和 javascript/jquery。是否有更好地实现此功能的设计模式或只是最佳实践？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:01:58.177

JSP 是服务器端，javascript 是客户端。Javascript 可以完成您希望在浏览器（客户端）上发生的所有事情。JSP 是服务器端的，因此计算是在服务器上完成的。这可以是数据库调用、xml 解析或其他计算

如果您想从服务器发送和接收数据，那么您将使用 AJAX。对于这两种语言，您不应该使用特定的设计模式。您需要更好地理解客户端-服务器交互。简而言之 - 浏览器向服务器发送请求。服务器执行某种计算并准备响应以发送回客户端。客户端收到此响应并执行它需要做的任何事情

我不确定您使用拖放的目的是什么，但我将给出一个非常简单的示例，让您了解客户端-服务器交互。

向 JSP 发送请求以获取拖动速度。JSP 访问一些包含拖动速度数据的属性。JSP 将此作为 JSON 响应发送回客户端。Javascript 解析 JSON 响应并设置速度值。

# jquery - 将 id 动态添加到 jquery 选项卡

> ID：10632394
> 
> 赞同：1
> 
> 时间：2012-05-17T08:44:39.120
> 
> 标签：jquery, jquery-ui, tabs, jquery-ui-tabs, jquery-tabs

我正在动态创建 jquery 选项卡。我想将 id 关联到每个选项卡。

```
$(function() {
    var index = 0;
    $("#addTab").live('click', function() {
        index++;
        var title = 'Tab.....  ' + index;
        var url = '#fragment-' + index;

        addTab(url, title, index);
        $('li.ui-state-default').attr("id",index);
}); 
```

此代码成功分配了 id。但是当我创建一个新标签时。它将 id 分配给整个班级。我不想这样做。我只想为每个班级分配唯一的ID

JS小提琴

[http://jsfiddle.net/gP3YZ/9/](http://jsfiddle.net/gP3YZ/9/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T08:51:46.810

```
$('li.ui-state-default:last').attr("id",index).attr('id'); 
```

**[演示](http://jsfiddle.net/thecodeparadox/DsA8T/)**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T08:52:13.470

```
$('li.ui-state-default').each( function(){
    $(this).attr("id",index++);
}); 
```

顺便说一句，使用数字作为 DOM 元素的 id 是不好的做法，使用类似`("item-"+index)`属性`id`的东西。

# entity-framework - 实体框架搜索表达式

> ID：10632397
> 
> 赞同：1
> 
> 时间：2012-05-17T08:44:48.307
> 
> 标签：entity-framework

我必须通过字段 EmployeeId 进行搜索。我也有参数**empId**，它可以是这样的：'123' 在我的数据库中有下一个值：

```
'0123' - what I need 
'10123'
'1234' 
```

等等。我的目标 - 获取以**empId 结尾**并且没有或有一个或多个前导 0 的记录。我试着写这样的东西：

```
var result = from member in MembersSet
             where SqlMethods.Like(member.EmployeeId, "%" + empId) &&
                   !(SqlMethods.Like(member.EmployeeId, "%[^0]%" + empId))
             select member.Id; 
```

但我得到一个错误 `LINQ to Entities does not recognize the method 'Boolean Like(System.String, System.String)' method, and this method cannot be translated into a store expression.`

可能有解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:33:53.887

SqlMethods 用于 Linq-To-Sql，而不是 EntityFramework。EF 有一个等效项 - SqlFunctions (System.Data.Objects.SqlClient.SqlFunctions)。您可以使用[PatIndex](http://msdn.microsoft.com/en-us/library/system.data.objects.sqlclient.sqlfunctions.patindex.aspx)函数来做您想做的事情。值得注意的是，这将使您的代码特定于 SQL Server。

您可以使用标准的 String EndsWith 函数在不使用 PatIndex 的情况下执行初始表达式，该函数将由 EF 自动翻译。

```
var result = from member in MembersSet
             where member.Id.EndsWith("123")
                 && SqlFunctions.PatIndex("[^0]%123", member.Id) == 0
             select member.Id; 
```

如果 Id 的值始终是数字（即使带有前导零），您可以尝试将它们转换为服务器上的整数，方法是定义一个额外的方法来处理解析为 int（EF 不会翻译 Int32.Parse） - 看到[这个问题](https://stackoverflow.com/questions/5971521/linq-to-entities-does-not-recognize-the-method-double-parsesystem-string-met)的详细信息。

# php - iphone检测php

> ID：10632400
> 
> 赞同：3
> 
> 时间：2012-05-17T08:44:55.323
> 
> 标签：php, iphone, redirect, detection

我有几个 Index.php 文件，例如（index.php、index2.php、index3.php 等），我还有一个具有不同 ID URL 的数据库。当有人输入索引文件时，看到的登录页面是动态的，只有数据库中的指定参数会更改显示的一些参数，假设我输入 domain.com/index.php?id=2 - 这是为了X 城市和域 domain.com/index2.php?id=112 将显示 Y 城市的页面。

到目前为止，一切都很好..

现在我正在尝试插入一个 Iphone 检测代码，该代码会将正在输入 url 从 iphone 的用户重定向到对 iphone 友好的设计。所以我创建了一个 i-index.php 将以下代码插入到 index.php 页面中：

```
<?
if(strstr($_SERVER['HTTP_USER_AGENT'],'iPhone') || strstr($_SERVER['HTTP_USER_AGENT'],'iPod'))
{
  header('Location: http://www.mydomain.com/mobile/i-index.php');
  exit();
}
?> 
```

现在，当我从我的 iphone 输入 url mydomain.com/index.php?id=1 时，我被重定向到 i-index.php 文件，而不是指定的 ID (?id=1)。

我希望我的解释不会令人困惑。谁能建议它重定向到指定ID的方法（原始索引和移动索引都正确连接到数据库）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T08:48:13.270

```
<?
if(strstr($_SERVER['HTTP_USER_AGENT'],'iPhone') || strstr($_SERVER['HTTP_USER_AGENT'],'iPod'))
{
  header('Location: http://www.mydomain.com/mobile/i-index.php?id='.$_GET['id']);
  exit();
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T08:52:48.263

继续在网上搜索

```
<?php

function isIphone($user_agent=NULL) {
    if(!isset($user_agent)) {
        $user_agent = isset($_SERVER['HTTP_USER_AGENT']) ? $_SERVER['HTTP_USER_AGENT'] : '';
    }
    return (strpos($user_agent, 'iPhone') !== FALSE);
}

if(isIphone()) {
    header('Location: http://www.yourwebsite.com/phone');
    exit();
}

// ...THE REST OF YOUR CODE HERE

?> 
```

在javascript中你说

```
var agent = navigator.userAgent;
var isIphone = ((agent.indexOf('iPhone') != -1) || (agent.userAgent.indexOf('iPod') != -1)) ;
if (isIphone) {
    window.location.href = 'http://www.yourwebsite.com/phone';
} 
```

[检测 iPhone 浏览器](https://stackoverflow.com/questions/3827466/detect-iphone-browser)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T08:53:44.487

这会将整个查询字符串添加到`i-index.php`. 因此，您收到的任何查询字符串也将传递给 i-Phone 版本。如果您需要添加更多参数而`index.php`不必再次更改此代码，这对将来的更改很有用。

```
<?

if(strstr($_SERVER['HTTP_USER_AGENT'],'iPhone') || strstr($_SERVER['HTTP_USER_AGENT'],'iPod'))
{
  header('Location: http://www.mydomain.com/mobile/i-index.php?' . $_SERVER['QUERY_STRING']);
  exit();
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T08:58:15.507

我建议不要在 PHP 中这样做，而是[在 .htaccess 文件中使用 RewriteEngine](http://www.easymodrewrite.com/guide-syntax)。这可能看起来像这样：

```
RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} iPhone
RewriteCond %{REQUEST_URI} !^/mobile/i-index.php
RewriteRule .* /mobile/i-index.php [R,QSA] 
```

`QSA`正在处理查询字符串并将原始参数添加到新 url，因此为您提供了更大的灵活性。

[在不同的线程中](https://stackoverflow.com/questions/5131158/ipad-iphone-browser-sniffer-with-mod-rewrite-and-redirection-too-many-redirect)还有一个更复杂的版本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T08:48:36.650

> 所以我创建了一个插入的 i-index.php

...

> header('位置：[http](http://www.mydomain.com/mobile/i-index.php) ://www.mydomain.com/mobile/i-index.php ');

因此，如果 iphone 请求 i-index.php，该脚本将重定向到 i-index.php

?

> 不是指定的 ID (?id=1)。

它在您的代码中在哪里说“？id = 1”？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-17T08:48:43.690

```
header('Location: http://www.mydomain.com/mobile/i-index.php?id='.$_GET['id']); 
```

# maven - Maven 可以在不暴露我的密钥库密码的情况下访问存储库吗？

> ID：10632401
> 
> 赞同：1
> 
> 时间：2012-05-17T08:44:55.900
> 
> 标签：maven, keystore, client-certificates

我用作主镜像的工件存储库刚刚从 HTTP 切换到 HTTPS。[根据本指南](http://maven.apache.org/guides/mini/guide-repository-ssl.html)，我必须添加一个带有颁发服务器证书的 CA 的信任库，以及一个包含我的客户端证书的密钥库。

在[这个问题](https://stackoverflow.com/questions/5252040/can-i-avoid-putting-key-store-password-on-command-line-with-jsse)中，评论者提到让 Maven 访问 OSX 密钥环，但不知道在 Linux 中该做什么。去年+这方面有什么动静吗？

据我所知，“最先进的技术”仍然是将您的个人证书放入密钥库中，然后将密钥库密码以纯文本`.bashrc`形式放入您的 . 是否没有足够的客户证书用户来关心？

# wpf - My.Settings.Save 调试干净

> ID：10632407
> 
> 赞同：0
> 
> 时间：2012-05-17T08:45:21.657
> 
> 标签：wpf, vb.net, build, my.settings

我正在尝试在 My.Settings 中创建一个 string1 并使用 My.Settings.Save 方法，它运行良好。问题是默认值是“我的名字是 X”并且在运行时给定的保存值是“我的名字是 Z”，当我下次在 VS2010 中使用 F5 键运行调试器时，我得到的只是新值没有原来的 x，我试图清理，重建应用程序，但新值仍然只显示出来，如何使用原始值进行调试？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:16:12.883

我认为您必须在每个调试会话中删除生成的设置文件（存储在 C:/Users/... 中），或者在初始化部分的代码中，您可以执行以下操作：

```
#if Debug
     YourApp.Properties.Settings.Default.String1 = "My name is X";
     YourApp.Properties.Settings.Default.Save();
#endif 
```

# java - java：通过单击按钮动态生成的文本框

> ID：10632408
> 
> 赞同：0
> 
> 时间：2012-05-17T08:45:31.213
> 
> 标签：java, swing

我在单击“添加”按钮时创建了文本字段和标签。我已经给出了 x 和 y 坐标，但文本框出现的方式不正确。如何纠正它？以及如何增加文本框的宽度？？？

```
import java.awt.Dimension;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.border.LineBorder;

public class SS 
{
// Field members
 static JPanel panel = new JPanel();
static Integer indexer = 1;
static List<JLabel> listOfLabels = new ArrayList<JLabel>();
static List<JTextField> listOfTextFields = new ArrayList<JTextField>();

public static void main(String[] args)
{       
    // Construct frame
    JFrame frame = new JFrame();
    frame.setLayout(new GridBagLayout());
    frame.setPreferredSize(new Dimension(800, 800));
    frame.setTitle("My Example");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    // Frame constraints
    GridBagConstraints frameConstraints = new GridBagConstraints();

    // Construct button
    JButton addButton = new JButton("Add");
    addButton.addActionListener(new ButtonListener());

    // Add button to frame
    frameConstraints.gridx = 0;
    frameConstraints.gridy = 0;
    frame.add(addButton, frameConstraints);

    // Construct panel
    panel.setPreferredSize(new Dimension(400, 400));
    panel.setLayout(new GridBagLayout());
    panel.setBorder(LineBorder.createBlackLineBorder());

    // Add panel to frame
    frameConstraints.gridx = 0;
    frameConstraints.gridy = 1;
    frameConstraints.weighty = 20;
    frame.add(panel, frameConstraints);

    // Pack frame
    frame.pack();

    // Make frame visible
    frame.setVisible(true);
}

static class ButtonListener implements ActionListener
{
    @Override
    public void actionPerformed(ActionEvent arg0) 
    {       
        // Clear panel
        panel.removeAll();

        // Create label and text field
        listOfTextFields.add(new JTextField());
        listOfLabels.add(new JLabel("Name " + indexer));

        // Create constraints
        GridBagConstraints textFieldConstraints = new GridBagConstraints();
        GridBagConstraints labelConstraints = new GridBagConstraints();

        // Add labels and text fields
        for(int i = 0; i < indexer; i++)
        {
            // Text field constraints
            textFieldConstraints.gridx = 20;
            textFieldConstraints.gridy = i;

            // Label constraints
            labelConstraints.gridx = 1;
            labelConstraints.gridy = i;

            // Add them to panel
            panel.add(listOfTextFields.get(i), textFieldConstraints);
            panel.add(listOfLabels.get(i), labelConstraints);
        }

        // Align components top-to-bottom
        GridBagConstraints c = new GridBagConstraints();
        c.gridx = 0;
        c.gridy = indexer;
        c.weighty =  1;
        panel.add(new JLabel(), c);

        // Increment indexer
        indexer++;
    }
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:43:40.530

要使用文本框刷新框架，您需要在 actionPerformed 方法的底部调用 pack。

```
frame.pack(); 
```

为此，您需要将 frame 作为类变量。

```
static JFrame frame; 
```

对于尺寸，网格袋布局将覆盖您的 setSize，因此您可以给它一个权重并使其伸展以填充空间。这可以在您的其他 textFieldContraints 调用之后进行。

```
textFieldConstraints.weightx = 1;
textFieldConstraints.fill = GridBagConstraints.HORIZONTAL; 
```

当您按下按钮并拿起框时，这应该会使文本框出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:43:04.337

增加文本字段的宽度。

```
listOfTextFields.add(new JTextField(null,10)); 
```

# objective-c - 新手IOS类方法

> ID：10632410
> 
> 赞同：1
> 
> 时间：2012-05-17T08:45:47.720
> 
> 标签：objective-c, ios, cs193p

在斯坦福 CS193P 课程的作业 2 中，它指出我必须添加一个带有以下签名的 runProgram 类方法：

```
+ (double)runProgram:(id)program
usingVariableValues:(NSDictionary *)variableValues; 
```

但是，我不认识或不知道如何使用这种语法，因为到目前为止，方法已经写得更简单了：

```
+ (double)performOperation:(NSString *)operation 
```

有人可以解释这个签名吗？方法应该写在一行上吗？如何获取/设置我的字典？

对不起，基本问题，但我是一个完整的初学者！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:48:16.707

```
+ (double)runProgram:(id)program
 usingVariableValues:(NSDictionary *)variableValues; 
```

是相同的：

```
+ (double)runProgram:(id)program usingVariableValues:(NSDictionary *)variableValues; 
```

它被格式化为两行以便于阅读。

在此声明中，您的选择器是: `runProgram:usingVariableValues:`，冒号后面是参数名称及其类型，即`program`type`id`和`variableValues`type `NSDictionary *`。

你用它来称呼它

```
[ClassName runProgram:myProgram usingVariableValues:myVariables]; 
```

要创建字典，请使用如下代码：

```
NSDictionary *myDict = [NSDictionary dictionaryWithObjectsAndKeys:@"value1",
                        @"key1", @"value2", @"key2", nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:20:52.363

```
+ (double)runProgram:(id)program usingVariableValues:(NSDictionary *)variableValues; 
```

只是一种采用两个参数的方法，一个是 id 类型，一个是字典。在 Objective-C 中，参数被交错到选择器中。所以要调用这个方法，你会做

```
[MyClass runProgram: aProgram usingVariableValues: aDictionary]; 
```

aDictionary 是您在调用该方法之前需要构建的字典。最简单的方法是创建一个可变字典并逐个添加项目。

```
NSMutableDictionary* aDictionary = [[NSMutableDictionary alloc] init];
[aDictionary setObject: @"foo" forKey: @"bar"];
[aDictionary setObject: @"baz" forKey: @"fizz"];
// etc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T08:50:42.273

类方法不是任何新方法，这里的基本区别 - 1\. 在方法的签名中 2\. 可以通过 ClassName 而不是 Class Object 访问

```
+ (double)runProgram:(id)program usingVariableValues:(NSDictionary *)variableValues; 
```

与 -

```
+ (double)runProgram:(id)program
 usingVariableValues:(NSDictionary *)variableValues; 
```

调用此方法时-

```
[ClassName runProgram:someProgram usingVariableValues:someVar]; 
```

或以格式化方式 -

```
[ClassName runProgram:someProgram 
  usingVariableValues:someVar]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T08:48:26.330

为了便于阅读，应该放在一行上：

```
+ (double)runProgram:(id)program usingVariableValues:(NSDictionary *)variableValues; 
```

用法与您期望的一样：

```
[MyCustomClass runProgram:myProgram usingVariableValues:myDictionary]; 
```

# python - 使用Python测试文件中是否存在字符串

> ID：10632415
> 
> 赞同：-2
> 
> 时间：2012-05-17T08:45:59.577
> 
> 标签：python

我只想添加文件中当前不存在的服务器

我当前的代码：

```
 f = open(filename,'a')
 for server in cmo.getServers() :
    print >>f, server.getListenAddress() 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:06:56.223

构建文件中已存在的服务器列表：

```
present = [l.strip() for l in open(filename)] 
```

（假设文件格式是每行只有一个服务器，没有其他符号）。

然后检查地址是否在列表中：

```
for server in cmo.getServers():
    address = server.getListenAddress()
    if address not in present:
        print >>f, address 
```

这假设您从中获得的地址`getServers()`不会重复。如果这也是可能的，那么首先构建一组：

```
new = set(server.getListenAddress() for server in cmo.getServers())
for address in new:
    if address not in present:
        print >>f, address 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:09:48.967

试试这个：

```
data = set( [i.strip() for i in open( filename, 'r' ).readlines()] )

for server in cmo.getServers() :
    data.add( server.getListenAddress() )

open( filename, 'w' ).write('\n'.join(data)) 
```

# wsdl - 如何管理同一服务的两个版本？

> ID：10632418
> 
> 赞同：0
> 
> 时间：2012-05-17T08:46:07.457
> 
> 标签：wsdl, wso2, wso2carbon

我们正在为我们的公司寻找服务注册中心和存储库。我们现在正在评估 WSO2 注册表。

我们如何管理同一服务的两个版本？版本是指相同的逻辑服务（相同的名称），但在每个版本中具有不同的 WSDL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T08:09:31.347

我相信对此有开箱即用的支持。如果添加服务，然后增加版本并更改任何属性（包括 WSDL），新版本将被创建和链接。我找不到确切过程的文档，但希望您可以尝试一下，看看是否可以使其正常工作。

有关添加服务的文档，请查看[此](http://docs.wso2.org/display/Governance411/Adding+Services)。

# iphone - iPhone 多点触控与 CorePlot 交互

> ID：10632421
> 
> 赞同：11
> 
> 时间：2012-05-17T08:46:13.600
> 
> 标签：iphone, objective-c, xcode, core-plot

我正在开发一个带有核心图图表的 iPhone 应用程序。在一些教程的帮助下，我设法通过单点触摸和拖动来做到这一点。如何通过多次触摸和拖动来制作它？有人请帮帮我吗？

![在此处输入图像描述](../Images/9b3270a87441e3eb57933573e82b398f.png)

**视图控制器.m**

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    EskPlotTheme *defaultTheme = [[EskPlotTheme alloc] init];
    linePlot = [[EskLinePlot alloc] init];
    linePlot.delegate = self;
    [linePlot renderInLayer:lineHostingView withTheme:defaultTheme]; 
    [defaultTheme release];    
} 
```

**EskLinePlot.m**

```
- (id)init
{
    self = [super init];
    if (self) 
    {
        // setting up the sample data here.
        sampleData = [[NSArray alloc] initWithObjects:[NSNumber numberWithInt:6000],
                                                      [NSNumber numberWithInt:3000],
                                                      [NSNumber numberWithInt:2000],
                                                      [NSNumber numberWithInt:5000],
                                                      [NSNumber numberWithInt:7000],
                                                      [NSNumber numberWithInt:8500],
                                                      [NSNumber numberWithInt:6500], nil];

    }
    return self;
}

- (void)renderInLayer:(CPTGraphHostingView *)layerHostingView withTheme:(CPTTheme *)theme
{
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    CGRect bounds = layerHostingView.bounds;

    // Create the graph and assign the hosting view.
    graph = [[CPTXYGraph alloc] initWithFrame:bounds];
    layerHostingView.hostedGraph = graph;
    [graph applyTheme:theme];

    graph.plotAreaFrame.masksToBorder = NO;

    // chang the chart layer orders so the axis line is on top of the bar in the chart.
    NSArray *chartLayers = [[NSArray alloc] initWithObjects:[NSNumber numberWithInt:CPTGraphLayerTypePlots],
                                                            [NSNumber numberWithInt:CPTGraphLayerTypeMajorGridLines], 
                                                            [NSNumber numberWithInt:CPTGraphLayerTypeMinorGridLines],  
                                                            [NSNumber numberWithInt:CPTGraphLayerTypeAxisLines], 
                                                            [NSNumber numberWithInt:CPTGraphLayerTypeAxisLabels], 
                                                            [NSNumber numberWithInt:CPTGraphLayerTypeAxisTitles], 
                                                            nil];
    graph.topDownLayerOrder = chartLayers;    
    [chartLayers release];

    // Add plot space for horizontal charts
    graph.paddingLeft = 60.0;
    graph.paddingTop = 70.0;
    graph.paddingRight = 20.0;
    graph.paddingBottom = 20.0;

    // Setup plot space
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
    plotSpace.allowsUserInteraction = YES;
    plotSpace.delegate = self;
    int sampleCount = [sampleData count]-1;
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0f) length:CPTDecimalFromFloat(sampleCount)];
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0f) length:CPTDecimalFromFloat(10000)];

    // Setup grid line style
    CPTMutableLineStyle *majorXGridLineStyle = [CPTMutableLineStyle lineStyle];
    majorXGridLineStyle.lineWidth = 1.0f;
    majorXGridLineStyle.lineColor = [[CPTColor whiteColor] colorWithAlphaComponent:0.25f];

    CPTMutableTextStyle *whiteTextStyle = [[[CPTMutableTextStyle alloc] init] autorelease];
    whiteTextStyle.color = [CPTColor whiteColor];    

    // Setup x-Axis.
    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;
    CPTXYAxis *x = axisSet.xAxis;
    x.majorGridLineStyle = majorXGridLineStyle;
    x.labelTextStyle = whiteTextStyle;
    x.majorIntervalLength = CPTDecimalFromString(@"1");
    x.minorTicksPerInterval = 1;

    NSArray *exclusionRanges = [NSArray arrayWithObjects:[CPTPlotRange plotRangeWithLocation:CPTDecimalFromInt(0) length:CPTDecimalFromInt(0)], nil];
    x.labelExclusionRanges = exclusionRanges;

    // Setup y-Axis.
    CPTMutableLineStyle *majorYGridLineStyle = [CPTMutableLineStyle lineStyle];
    majorYGridLineStyle.lineWidth = 1.0f;
    majorYGridLineStyle.lineColor = [[CPTColor whiteColor] colorWithAlphaComponent:0.25];

    CPTMutableLineStyle *minorYGridLineStyle = [CPTMutableLineStyle lineStyle];
    minorYGridLineStyle.lineWidth = 1.0f;
    minorYGridLineStyle.lineColor = [[CPTColor blackColor] colorWithAlphaComponent:0.1];

    CPTXYAxis *y = axisSet.yAxis;
    y.majorGridLineStyle = majorYGridLineStyle;
    y.minorGridLineStyle = minorYGridLineStyle;
    y.labelTextStyle = whiteTextStyle;
    y.majorIntervalLength = CPTDecimalFromString(@"1000");
    y.minorTicksPerInterval = 1;
    y.orthogonalCoordinateDecimal = CPTDecimalFromString(@"0");
    NSArray *yExlusionRanges = [NSArray arrayWithObjects:
                                [CPTPlotRange plotRangeWithLocation:CPTDecimalFromFloat(0.0) length:CPTDecimalFromFloat(0.0)],
                                nil];
    y.labelExclusionRanges = yExlusionRanges;

    // Create a high plot area
    CPTScatterPlot *highPlot = [[[CPTScatterPlot alloc] init] autorelease];
    highPlot.identifier = kHighPlot;

    CPTMutableLineStyle *highLineStyle = [[highPlot.dataLineStyle mutableCopy] autorelease];
    highLineStyle.lineWidth = 2.f;
    highLineStyle.miterLimit        = 1.0f;
    highLineStyle.lineColor = [CPTColor whiteColor];
    highPlot.dataLineStyle = highLineStyle;
    highPlot.dataSource = self;

    CPTColor *areaColor1       = [[CPTColor whiteColor] colorWithAlphaComponent:0.8f];
    CPTGradient *areaGradient1 = [CPTGradient gradientWithBeginningColor:areaColor1 endingColor:[[CPTColor whiteColor]  colorWithAlphaComponent:0.2f]];
    areaGradient1.angle = -90.0f;
    CPTFill *areaGradientFill = [CPTFill fillWithGradient:areaGradient1];
    highPlot.areaFill       = areaGradientFill;
    highPlot.areaBaseValue = [[NSDecimalNumber zero] decimalValue];
    [graph addPlot:highPlot];

    // Create the Savings Marker Plot
    selectedCoordination = 2;

    touchPlot = [[[CPTScatterPlot alloc] initWithFrame:CGRectNull] autorelease];
    touchPlot.identifier = kLinePlot;
    touchPlot.dataSource = self;
    touchPlot.delegate = self;
    [self hideTouchPlotColor];
    [graph addPlot:touchPlot];

    [pool drain];

}

- (void)hideTouchPlotColor
{
    CPTColor *touchPlotColor = [CPTColor clearColor];

    CPTMutableLineStyle *savingsPlotLineStyle = [CPTMutableLineStyle lineStyle];
    savingsPlotLineStyle.lineColor = touchPlotColor;

    CPTPlotSymbol *touchPlotSymbol = [CPTPlotSymbol ellipsePlotSymbol];
    touchPlotSymbol.fill = [CPTFill fillWithColor:touchPlotColor];
    touchPlotSymbol.lineStyle = savingsPlotLineStyle;
    touchPlotSymbol.size = CGSizeMake(12.0f, 12.0f);

    CPTMutableLineStyle *touchLineStyle = [CPTMutableLineStyle lineStyle];
    touchLineStyle.lineColor = [CPTColor clearColor];
    touchLineStyle.lineWidth = 1.0f;

    CPTMutableLineStyle *symbolLineStyle = [CPTMutableLineStyle lineStyle];
    symbolLineStyle.lineColor = [CPTColor clearColor];
    CPTPlotSymbol *plotSymbol = [CPTPlotSymbol ellipsePlotSymbol];
    plotSymbol.fill = [CPTFill fillWithColor:[CPTColor clearColor]];
    plotSymbol.lineStyle = symbolLineStyle;
    plotSymbol.size = CGSizeMake(10.0, 10.0);
    touchPlot.plotSymbol = plotSymbol;

    touchPlot.dataLineStyle = touchLineStyle;
}

// Assign different color to the touchable line symbol.
- (void)showTouchPlotColor
{
    CPTColor *touchPlotColor = [CPTColor orangeColor];

    CPTMutableLineStyle *savingsPlotLineStyle = [CPTMutableLineStyle lineStyle];
    savingsPlotLineStyle.lineColor = touchPlotColor;

    CPTPlotSymbol *touchPlotSymbol = [CPTPlotSymbol ellipsePlotSymbol];
    touchPlotSymbol.fill = [CPTFill fillWithColor:touchPlotColor];
    touchPlotSymbol.lineStyle = savingsPlotLineStyle;
    touchPlotSymbol.size = CGSizeMake(12.0f, 12.0f); 

    CPTMutableLineStyle *touchLineStyle = [CPTMutableLineStyle lineStyle];
    touchLineStyle.lineColor = [CPTColor orangeColor];
    touchLineStyle.lineWidth = 1.0f;

    CPTMutableLineStyle *symbolLineStyle = [CPTMutableLineStyle lineStyle];
    symbolLineStyle.lineColor = [CPTColor blackColor];
    CPTPlotSymbol *plotSymbol = [CPTPlotSymbol ellipsePlotSymbol];
    plotSymbol.fill = [CPTFill fillWithColor:[CPTColor orangeColor]];
    plotSymbol.lineStyle = symbolLineStyle;
    plotSymbol.size = CGSizeMake(10.0, 10.0);
    touchPlot.plotSymbol = plotSymbol;

    touchPlot.dataLineStyle = touchLineStyle;
}

// This method is call when user touch & drag on the plot space.
- (BOOL)plotSpace:(CPTPlotSpace *)space shouldHandlePointingDeviceDraggedEvent:(id)event atPoint:(CGPoint)point
{
    // Convert the touch point to plot area frame location
    CGPoint pointInPlotArea = [graph convertPoint:point toLayer:graph.plotAreaFrame];

    NSDecimal newPoint[2];
    [graph.defaultPlotSpace plotPoint:newPoint forPlotAreaViewPoint:pointInPlotArea];
    NSDecimalRound(&newPoint[0], &newPoint[0], 0, NSRoundPlain);
    int x = [[NSDecimalNumber decimalNumberWithDecimal:newPoint[0]] intValue];

    if (x < 0)
    {
        x = 0;
    }
    else if (x > [sampleData count])
    {
        x = [sampleData count];
    }

        selectedCoordination = x;
        if ([delegate respondsToSelector:@selector(linePlot:indexLocation:)])
            [delegate linePlot:self indexLocation:x];
        [touchPlot reloadData];

    return YES;
}

- (BOOL)plotSpace:(CPTPlotSpace *)space shouldHandlePointingDeviceDownEvent:(id)event 
          atPoint:(CGPoint)point
{
    [self showTouchPlotColor];
    return YES;
}

- (BOOL)plotSpace:(CPTPlotSpace *)space shouldHandlePointingDeviceUpEvent:(id)event atPoint:(CGPoint)point
{
    [self hideTouchPlotColor];
    touchPlotSelected = NO;
    return YES;
}

#pragma mark - 
#pragma mark Scatter plot delegate methods

- (void)scatterPlot:(CPTScatterPlot *)plot plotSymbolWasSelectedAtRecordIndex:(NSUInteger)index
{
    if ([(NSString *)plot.identifier isEqualToString:kLinePlot]) 
    {
        touchPlotSelected = YES;
        [self applyHighLightPlotColor:plot];
        if ([delegate respondsToSelector:@selector(linePlot:indexLocation:)])
            [delegate linePlot:self indexLocation:index];
    } 
}

#pragma mark -
#pragma mark Plot Data Source Methods

- (NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot 
{
    if ([(NSString *)plot.identifier isEqualToString:kLinePlot]) 
    {
        return kNumberOfMarkerPlotSymbols;
    }
    else {
        return [sampleData count];
    }
}

- (NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index 
{
    NSNumber *num = nil;
    if ( [(NSString *)plot.identifier isEqualToString:kHighPlot] )
    {
        if ( fieldEnum == CPTScatterPlotFieldY ) 
        {
            num = [sampleData objectAtIndex:index];
        } 
        else if (fieldEnum == CPTScatterPlotFieldX) 
        {
            num = [NSNumber numberWithInt:index];
        }
    }
    else if ([(NSString *)plot.identifier isEqualToString:kLinePlot]) 
    {
        if ( fieldEnum == CPTScatterPlotFieldY ) 
        {
            switch (index) {
                case 0:
                    num = [NSNumber numberWithInt:-1000];
                    break;
                case 2:
                    num = [NSNumber numberWithInt:12700];
                    break;
                default:
                    num = [sampleData objectAtIndex:selectedCoordination];
                    break;
            }
        } 
        else if (fieldEnum == CPTScatterPlotFieldX) 
        {
            num = [NSNumber numberWithInt:selectedCoordination];
        }
    }

    return num;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T15:31:20.883

我最近遇到了同样的问题，找不到任何解决方案。经过一段时间的研究和编码，我找到了一些解决方案，并想分享一个，非常简单的一个，所以它可以帮助您了解如何解决这个问题。

我创建了透明的 UIView，我把它放在 CPTGraphHostingView 之上。此视图正在处理所需的触摸事件。让我们将其命名为 TestView

TestView.h 文件看起来像

```
@protocol TestViewDelegate <NSObject>
- (void)myTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)myTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event;
- (void)myTouchesEnded:(NSSet *)touches withEvent:(UIEvent *)event;

@end

@interface TestView : UIView
@property (nonatomic, weak) id <TestViewDelegate>delegate;
@end 
```

测试视图.m

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{
    [self.delegate myTouchesBegan:touches withEvent:event];
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    [self.delegate myTouchesMoved:touches withEvent:event];
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event{
    [self.delegate myTouchesEnded:touches withEvent:event];
} 
```

TestView 委托，在我的例子中，包含 corePlot 托管视图的 viewController 将实现这些方法并查看下面的代码示例

```
- (void)myTouchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{
    if (touches.count == 1) {
        UITouch *touch = (UITouch *)[[touches allObjects] objectAtIndex:0];
        CGPoint point = [touch locationInView:nil];
        [self plotSpace:self.plotSpace shouldHandlePointingDeviceDraggedEvent:event atPoint:point];
    }
    if (touches.count == 2) {
        UITouch *touch = (UITouch *)[[touches allObjects] objectAtIndex:1];
        CGPoint point = [touch locationInView:nil];
        [self plotSpace:self.plotSpace shouldHandlePointingDeviceDraggedEvent:event atPoint:point];
    }
} 
```

viewController 中的 CPTPlotSpace 委托方法看起来像

```
- (BOOL)plotSpace:(CPTPlotSpace *)space shouldHandlePointingDeviceDraggedEvent:(id)event atPoint:(CGPoint)point{
    NSSet *allTouches = [event allTouches];
    if ([allTouches count] >0 ) {
        UITouch *touch1 = [[allTouches allObjects] objectAtIndex:0];
        if (touch1){
            CGPoint pointInPlotArea = [self.graph convertPoint:[touch1 locationInView:self.view] toLayer:self.graph.plotAreaFrame];
//              padding
            pointInPlotArea.x -=10;
            NSDecimal newPoint[2];
            [self.graph.defaultPlotSpace plotPoint:newPoint forPlotAreaViewPoint:pointInPlotArea];
            NSDecimalRound(&newPoint[0], &newPoint[0], 0, NSRoundPlain);
            int x = [[NSDecimalNumber decimalNumberWithDecimal:newPoint[0]] intValue];
            x--;

            if (x <= 0)
                x = 0;
            else if (x >= [self.currentDatapoints count])
                x = [self.currentDatapoints count] - 1;

            selectedCoordination = x;
            self.label.text = [NSString stringWithFormat:@"%@", [self.currentDatapoints objectAtIndex:x]];
            self.differenceLabel.text = @"";
            [touchPlot reloadData];
        }
        if ([allTouches count] > 1){
            secondTouchPlot.hidden = NO;
            UITouch *touch2 = [[allTouches allObjects] objectAtIndex:1];
            if (touch2) {
                CGPoint pointInPlotArea = [self.graph convertPoint:[touch2 locationInView:self.view] toLayer:self.graph.plotAreaFrame];
                pointInPlotArea.x -= 10;
                NSDecimal newPoint[2];
                [self.graph.defaultPlotSpace plotPoint:newPoint forPlotAreaViewPoint:pointInPlotArea];
                NSDecimalRound(&newPoint[0], &newPoint[0], 0, NSRoundPlain);
                int x = [[NSDecimalNumber decimalNumberWithDecimal:newPoint[0]] intValue];
                x--;
                if (x <= 0)
                    x = 0;
                else if (x >= [self.currentDatapoints count])
                    x = [self.currentDatapoints count] - 1;

                selectedCoordination2 = x;
                self.secondLabel.text = [NSString stringWithFormat:@"%@", [self.currentDatapoints objectAtIndex:x]];
                [secondTouchPlot reloadData];
                float first = [self.label.text floatValue];
                float second = [[self.currentDatapoints objectAtIndex:x] floatValue];
                self.differenceLabel.textColor = (first - second) > 0 ? [UIColor greenColor] : [UIColor redColor];
                self.differenceLabel.text = [NSString stringWithFormat:@"%f", first - second];

            }
        }
    }
    return YES;
} 
```

结果就是这样……

![在此处输入图像描述](../Images/2ff8ec53c23907ea7b2ff94acc6c5441.png)

这不是优化的代码，这只是我上面提到的如何解决这个问题的想法。

希望能帮助到你...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T16:22:34.220

我很可能最终会在多个回答中回答这个问题，但我将在这一点上开始：

您可能会认为 Apple 会在其手势识别对象中提供 API 来辅助多种手指跟踪算法等...，但到目前为止还没有。在我开发的游戏中，我还需要有多个手指，最多 4 个甚至更多，所有手指都在屏幕上，同时移动/跟踪。我发现我必须实现自己的手指跟踪/向下/向上算法来完成简单的单指滑动和捏拉缩放操作以外的事情。让我们深入研究：

我相信您的 EskLinePlot.m 文件“应该处理向下事件”，您将需要实现“向下多少手指”的增量器。这样，如果您在另一个手指已经放下时又放下另一个手指，您将对其进行计数。同样，您将需要在“应该处理事件”例程中实现减量器。在这一切的中间，还需要一个（尽管）小型数据库（可能是一个 NSMutableArray）。该数据库将用于将拖动事件与手指相关联。那么最终如何配合这项工作。在向下事件中，您将： 1）在触摸数据库中创建新记录（数组编号可以作为您的唯一标识符 2）记录新触摸' s 当前位置到您在步骤 1 中创建的（新）触摸记录中作为最新（或数组位置 0）位置。触摸数据库中的每个触摸项目都应该有 4 到 10 个手指最后位置的历史记录（我倾向于将位置记录为 0 = 最新到 3 或 9 作为最旧）。3) 不要简单地打开您创建的单条（图形）线，而是在向下事件发生时添加一条新的（图形）线（对屏幕手指位置执行与图形数字位置相同的关联）

对于“应该处理拖动事件”：1）查看在拖动事件中被中继的手指的屏幕位置，并将其与内部持有的触摸数据库中的触摸相关联（触摸数据库中的触摸最接近被此时提出）。2) 将相关触地的所有先前位置点移动 1。0 变为 1，1 变为 2，等等……通过所有，当然放弃最后一个。3) 将新点添加到相关触摸的先前点列表中作为最新点。4）适当移动与该手指相关的（图形）线

对于向上事件：1) 关联触摸数据库中手指的位置。2）从您的触摸数据库中删除相关触摸。3）从屏幕上删除您分配给该手指的（图形）线

我希望这会有所帮助，我应该能够在某处找到一些示例代码，但我目前不在我的开发机器前。

# .net - 使用库 jabber-net 在 GoogleChat 中发送消息

> ID：10632422
> 
> 赞同：2
> 
> 时间：2012-05-17T08:46:19.470
> 
> 标签：.net

请帮帮我

我使用实验室 jabber-net 在谷歌聊天中发送消息。Sometines 我有自动化和发送消息（运行应用程序时），但几乎总是我不能自动化也不发送消息......

使用代码 C#：

私有静态字符串消息；公共静态字符串 _message { 获取 { 返回消息；} 设置 { 消息 = 值；} }

```
 private static string emailToSend;
    public static string _emailToSend
    {
        get { return  emailToSend; }
        set { emailToSend = value; }
    }

    static JabberClient jc = new JabberClient();

    static void SendMessageToGoogleTalk(string message, string emailToSend)
    {
        jc.User = "***@gmail.com";
        jc.Server = "gmail.com";
        jc.Password = "****";
        _message = message;
        _emailToSend = emailToSend;
        jc.Connect();
        jc.OnError += client_OnError;
        jc.OnAuthenticate += client_OnAuthenticate;
        jc.Close();
    }

    static void client_OnAuthenticate(object sender)
    {
        jc.Message(emailToSend, message);
    }

    static void client_OnError(object sender, Exception exception)
    {
        isRecieveMessage = false;
    } 
```

大家都知道，我怎么会导致这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:20:42.333

这似乎是一个常见的错误，基本上它说你应该尝试用户名而不`@gmail.com`在用户字段中。

也许尝试以下方法：

```
jc.User = "username";
jc.Server = "gmail.com"; 
```

# python - 将“列表格式”的字符串更改为字符串

> ID：10632424
> 
> 赞同：2
> 
> 时间：2012-05-17T08:46:31.713
> 
> 标签：python

我有以下清单；

```
lst = ["['atama', 'karada', 'kami', 'kao', 'hitai', 'me', 'mayu', 'mabuta', 'matsuge', 'hana']", 
       "['head', 'body', 'hair', 'face', 'forehead', 'eye', 'eyebrow', 'eyelid', 'eyelash', 'nose']"] 
```

我需要将每个项目的内容设置为一个列表，以便我可以单独打印这些项目。例如。

```
for item in lst:
    for word in list(item):
        print word

>>

atama
karada
kami
kao
etc. 
```

有什么想法可以再次将 str(item)|s 格式化为列表吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:50:16.720

```
>>> import ast
>>> L = ["['atama', 'karada', 'kami', 'kao', 'hitai', 'me', 'mayu', 'mabuta', 'matsuge', 'hana']", 
       "['head', 'body', 'hair', 'face', 'forehead', 'eye', 'eyebrow', 'eyelid', 'eyelash', 'nose']"]
>>> for item in L:
        for word in ast.literal_eval(item):
            print word

atama
karada
kami
kao
hitai
me
mayu
mabuta
matsuge
hana
head
body
hair
face
forehead
eye
eyebrow
eyelid
eyelash
nose 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:53:55.053

我可以想到几种方法：

1）手动提取每个列表项：

```
lst = [[item.strip()[1:-1] for item in element[3:-3].split(',')] for element in lst] 
```

2）使用`eval`：

```
lst[:] = eval(lst[0]), eval(lst[1]) 
```

3）使用`json`：

```
import json
lst = [json.loads(i) for i in lst] 
```

优选方法1或3。`eval`是不安全的，因为任何传递给的字符串都`eval`将被（惊喜，惊喜）评估。仅`eval`当您完全控制传递给它的内容时才使用。

4）我想到的另一种解决方案，使用正则表达式：

```
import re
lst = [re.findall("['\"](\w+)['\"]", item) for item in lst] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:30:02.737

```
(one, two) = (list(lst[0]), list(lst[1])) 
```

# python - 如何对存储为嵌套列表的巨大矩阵 (100000x100000) 进行操作？

> ID：10632427
> 
> 赞同：1
> 
> 时间：2012-05-17T08:47:11.543
> 
> 标签：python, list, matrix

**情况**

我有一个程序将使用给定的值列表构造一个矩阵！并且列表开始变得越来越大，例如列表中的 10 万或百万个值，这反过来又会产生百万 x 百万大小的矩阵。

在此过程中，我正在对矩阵进行一些加/减/除/乘法运算，基于行、列或仅基于元素。

**问题**

因为矩阵太大了，我认为在内存中进行整个操作是行不通的。

**问题**

因此，我的问题是：我应该如何操作这个巨大的矩阵和巨大的价值列表？比如，在哪里存储它，如何读取它等等，这样我就可以在矩阵上执行我的操作并且计算机不会卡住或任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:55:56.393

我建议使用[NumPy](http://numpy.scipy.org/)。它在算术运算上相当快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:55:21.680

你考虑过用字典吗？如果矩阵非常稀疏，则可以将其存储为

```
matrix = {
 (101, 10213) : "value1",
 (1099, 78933) : "value2"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T08:55:37.550

首先，这样的矩阵将有 10G 个元素。考虑到对于任何有用的操作，您将需要 30G 个元素，每个元素占用 4-8 个字节，您根本不能假设在使用任何类型的内存技术的 32 位计算机上执行此操作。为了解决这个问题，我会使用 a) 真正的 64 位机器，b) 用于存储的内存映射二进制文件，以及 c) 抛弃 python。

## 更新

正如我在下面计算的那样，如果您有 2 个输入矩阵和 1 个输出矩阵，即 100000 x 100000 32 位浮点/整数元素，即 120 GB（虽然不是 GiB）的数据。假设，在家用计算机上，您可以实现恒定的 100 MB/s I/O 带宽，矩阵的每个元素都需要访问以进行任何运算，包括加法和减法，运算的绝对下限为 120 GB / (100 MB/s) = 1200 秒或 20 分钟，对于单个矩阵运算。用 C 语言编写，尽可能高效地使用操作系统，内存映射 IO 等等。对于百万个元素，每个操作需要 100 倍的时间，即 1.5 天。并且由于硬盘在此期间饱和，计算机可能完全无法使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T21:14:45.047

您的数据结构无法使用数组，它太大了。例如，如果矩阵是二进制矩阵，您可以查看其存储的表示形式，例如将较大的零块散列到同一个桶中。

# wpf - 调整大小时出现黑色边框

> ID：10632440
> 
> 赞同：2
> 
> 时间：2012-05-17T08:48:33.627
> 
> 标签：wpf, graphics, resize, drawing

我开始了我学习 WPF 的旅程。经过几天的编码后，我发现每当我调整任何 WPF 表单的大小时，我都会在调整大小时在底部和右侧出现黑色边框，就像一个神器，好像屏幕太慢了。在使用 winforms 时，我从未注意到这一点。

像这样：

![在此处输入图像描述](../Images/508ada9890f3c96cbd156abc48533652.png)

这是一个已知问题吗？任何简单的解决方法？

编辑1：

似乎它与图形驱动程序有关，我只在 gfx 卡较弱的笔记本电脑上工作，所以其他人有这个问题吗？（我也在使用 Win7 SP1）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T13:40:04.807

这是一个已知问题，而且不太可能修复。如果您的背景足够均匀，有一种解决方法可以减少此问题的影响：[https ://stackoverflow.com/a/14309002/33080](https://stackoverflow.com/a/14309002/33080)

我对根本原因的理解是 WPF 控件在调整大小方面滞后：WPF 将它们短暂地绘制在“错误”的位置。请参阅链接的问题以进行演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:12:22.773

如果您调整窗口大小，它必须重绘。这需要一些时间，而且它发生*在*窗口管理器已经调整窗口大小并显示它之后；在这种情况下，您将在 WPF 中获得黑色边框，在 Windows 窗体中获得具有正常窗口背景（通常为灰色）的边框。

通常，您所希望的只是计算机速度足够快，重绘不会显示它。

# javascript - 这个特定 csv 数据集的 MongoDB 模式？（用于数据可视化目的）

> ID：10632443
> 
> 赞同：1
> 
> 时间：2012-05-17T08:48:44.223
> 
> 标签：javascript, mongodb

我有一个 csv 文件，其中包含有关学校的数据：它们的位置、名称和每个指标值的数量：

> County_id、County_name、Municipality_id、Municipality_name、School_id、School_name、Year、Indicator_1、Indicator_2、Indicator_3 [...]

我正在围绕这些数据构建一个交互式 JavaScript 可视化，并希望使用 MongoDB 来提供它。

一些典型的查询是：（伪）

*   获取所有学校及其各自位置的列表
*   获取特定位置学校所有年份的所有 Indicator_1 值
*   计算特定位置的学校数量

**1\. 根据给定的数据，我应该如何设置我的 MongoDB 文档/集合以能够回答上述查询？** （也欢迎提示我应该采取哪些中间步骤来导入和构建模式。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:52:13.303

对于聚合查询，请查看 MongoDB 的[MapReduce](http://www.mongodb.org/display/DOCS/MapReduce)。默认情况下，这将根据您的 map/reduce 函数创建新集合（但也可以在内存中运行）。

您可以使用[mongoimport](http://www.mongodb.org/display/DOCS/Import+Export+Tools)将 CSV 数据导入数据库，然后利用 map/reduce 获取所需的数据。

# windows-phone-7 - 如何在更新 windows phone 时解决错误 80072F76？

> ID：10632444
> 
> 赞同：0
> 
> 时间：2012-05-17T08:48:46.207
> 
> 标签：windows-phone-7

更新 windows phone 时出现错误 80072F76。回复 引用 编辑 在 zune 中将 windows phone 7 更新到 7.5 时，我收到以下错误：

目前无法检查更新。请稍后再试。发生错误 80072F76

请告诉我 ....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:24:38.290

此[MSDN 文章](http://support.microsoft.com/kb/836941)表明问题可能是防火墙或防病毒软件阻止您正确连接。如果您在工作中尝试这样做，那么您可能需要联系您的管理员来纠正此问题。

如果这两个都已被检查和禁用（在很短的时间内）或修复，那么它可能是您的 ISP 甚至 Microsoft 的临时问题。在那种情况下，我会给它半个小时，然后再次尝试更新

# ipad - Kinvey Javascript 方法在 iPad 中不起作用，但在模拟器中起作用

> ID：10632446
> 
> 赞同：0
> 
> 时间：2012-05-17T08:48:48.407
> 
> 标签：ipad, jquery-mobile, cordova

我正在使用 PhoneGap 和 jQueryMobile 以及 Kinvey 的 Javascript 数据存储方法开发一个 iPad 应用程序。它在模拟器中运行良好，但我无法让它在 iPad 中运行。我在下面附上 index.html 代码

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<meta name="viewport" content="initial-scale=1.0,maximum-scale=1.0,width=device-width, user-scalable=no;" />
<meta charset="utf-8">
<link rel="stylesheet" href="jquery.mobile-1.1.0.css"/>
<link rel="stylesheet" href="jquery.mobile.structure-1.1.0.css"/>
<link rel="stylesheet" href="jquery.mobile.theme-1.1.0.css"/>
<link rel="stylesheet" href="datetime/jquery.mobile.datebox.min.css" type="text/css"/>
<script type="text/javascript" charset="utf-8" src="phonegap-1.2.0.js"></script>
<script type="text/javascript" src="jquery-1.7.1.min.js"></script>
<script type="text/javascript" src="jquery.mobile-1.1.0.min.js"></script>
<script type="text/javascript" src="datetime/jquery.mobile.datebox.min.js"/>
<script async src="kinvey-js.js"></script>
<script type="text/javascript">
   $(document).ready(function()
   {
     if(typeof Kinvey != 'undefined')
     {
          alert('Kinvey is there');
     }
     else
     {
          alert('Kinvey is not there');
     }
   });
</script>
</head>
<body>
   Test
</body>
</html> 
```

当我在模拟器上运行时，我收到警报消息“Kinvey 在那里”，并且在我的 iPad 上收到警报消息“Kinvey 不在那里”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:19:50.883

您是否尝试过加载非异步库？，更改

```
<script async src="kinvey-js.js"></script> 
```

至：

```
<script type="text/javascript" src="kinvey-js.js"></script> 
```

由于您没有从我们的 AWS 存储桶中提取库，因此您不需要异步加载库。看看这是否有助于使加载更可预测。

# java - 无法访问网址

> ID：10632448
> 
> 赞同：0
> 
> 时间：2012-05-17T08:48:56.777
> 
> 标签：java, json, url

我正在构建一个从 URL 检索 JSON 的应用程序。起初，我使用模拟器，并在 localhost 上连接 URL。（它工作得很好）然后我想从外部服务器访问 URL。现在有问题了。

logcat 总是这样：

```
05-17 15:36:48.049: W/System.err(330): java.net.UnknownHostException: culigui.16mb.com
05-17 15:36:48.049: W/System.err(330):  at java.net.InetAddress.lookupHostByName(InetAddress.java:513)
05-17 15:36:48.049: W/System.err(330):  at java.net.InetAddress.getAllByNameImpl(InetAddress.java:278)
05-17 15:36:48.059: W/System.err(330):  at java.net.InetAddress.getAllByName(InetAddress.java:242)
05-17 15:36:48.059: W/System.err(330):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:136)
05-17 15:36:48.059: W/System.err(330):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
05-17 15:36:48.059: W/System.err(330):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
05-17 15:36:48.059: W/System.err(330):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:348)
05-17 15:36:48.059: W/System.err(330):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
05-17 15:36:48.059: W/System.err(330):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
05-17 15:36:48.059: W/System.err(330):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
05-17 15:36:48.069: W/System.err(330):  at last.project.CuliGUI.JSONParser.getJSONFromUrl(JSONParser.java:30)
05-17 15:36:48.069: W/System.err(330):  at last.project.CuliGUI.MenuPromotion.onCreate(MenuPromotion.java:54)
05-17 15:36:48.069: W/System.err(330):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-17 15:36:48.069: W/System.err(330):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
05-17 15:36:48.069: W/System.err(330):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-17 15:36:48.069: W/System.err(330):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-17 15:36:48.069: W/System.err(330):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-17 15:36:48.069: W/System.err(330):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-17 15:36:48.069: W/System.err(330):  at android.os.Looper.loop(Looper.java:123)
05-17 15:36:48.069: W/System.err(330):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-17 15:36:48.080: W/System.err(330):  at java.lang.reflect.Method.invokeNative(Native Method)
05-17 15:36:48.080: W/System.err(330):  at java.lang.reflect.Method.invoke(Method.java:521)
05-17 15:36:48.080: W/System.err(330):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-17 15:36:48.080: W/System.err(330):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-17 15:36:48.080: W/System.err(330):  at dalvik.system.NativeStart.main(Native Method)
05-17 15:36:48.080: E/Buffer Error(330): Error converting result java.lang.NullPointerException
05-17 15:36:48.089: E/JSON Parser(330): Error parsing data org.json.JSONException: End of input at character 0 of 
05-17 15:36:48.089: D/AndroidRuntime(330): Shutting down VM
05-17 15:36:48.099: W/dalvikvm(330): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-17 15:36:48.118: E/AndroidRuntime(330): FATAL EXCEPTION: main
05-17 15:36:48.118: E/AndroidRuntime(330): java.lang.RuntimeException: Unable to start activity ComponentInfo{last.project.CuliGUI/last.project.CuliGUI.MenuPromotion}: java.lang.NullPointerException
05-17 15:36:48.118: E/AndroidRuntime(330):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
05-17 15:36:48.118: E/AndroidRuntime(330):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-17 15:36:48.118: E/AndroidRuntime(330):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-17 15:36:48.118: E/AndroidRuntime(330):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-17 15:36:48.118: E/AndroidRuntime(330):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-17 15:36:48.118: E/AndroidRuntime(330):  at android.os.Looper.loop(Looper.java:123)
05-17 15:36:48.118: E/AndroidRuntime(330):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-17 15:36:48.118: E/AndroidRuntime(330):  at java.lang.reflect.Method.invokeNative(Native Method)
05-17 15:36:48.118: E/AndroidRuntime(330):  at java.lang.reflect.Method.invoke(Method.java:521)
05-17 15:36:48.118: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-17 15:36:48.118: E/AndroidRuntime(330):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-17 15:36:48.118: E/AndroidRuntime(330):  at dalvik.system.NativeStart.main(Native Method)
05-17 15:36:48.118: E/AndroidRuntime(330): Caused by: java.lang.NullPointerException
05-17 15:36:48.118: E/AndroidRuntime(330):  at last.project.CuliGUI.MenuPromotion.onCreate(MenuPromotion.java:58)
05-17 15:36:48.118: E/AndroidRuntime(330):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-17 15:36:48.118: E/AndroidRuntime(330):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

我注意到 java.net.UnknownHostException 有问题。我读过一些关于它的文章，但老实说我不明白。

这是我的活动，以防你们中的一些人需要它：

```
// connect to external server
private static String url = "http://culigui.16mb.com/getdataresto.php";

ListView Listview;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.menu_view_all);

    // Hashmap for ListView
    ArrayList<HashMap<String, String>> userList = new ArrayList<HashMap<String, String>>();

    // Creating JSON Parser instance
    JSONParser jParser = new JSONParser();

    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(url);

    try {
        // Getting JSONArray of listresto
        JSONArray  listresto = json.getJSONArray("listresto");

        // looping through All listresto
        for(int i = 0; i < listresto.length(); i++){
            HashMap<String, String> map = new HashMap<String, String>();    
            JSONObject list = listresto.getJSONObject(i);

            // insert String to Local Variable
            map.put("KEY_ID", list.getString("id_resto"));
            map.put("KEY_NAME", list.getString("nama_resto"));
            map.put("KEY_ADDRESS", list.getString("alamat_resto"));
            map.put("KEY_THUMB", list.getString("thumb_img"));
            map.put("KEY_ABOUT", list.getString("about_resto"));
            map.put("KEY_PHONE", list.getString("no_telp"));
            map.put("KEY_LAT", list.getString("loc_lat"));
            map.put("KEY_LONG", list.getString("loc_long"));
            userList.add(map);

            //for checking value
            //System.out.println("output: " +map);

        }
    } catch (JSONException e) {
        e.printStackTrace();
    }

    /**
     * Updating parsed JSON data into ListView
     * */

    //this is new custom adapter
    Listview = (ListView) findViewById (R.id.list);
    adapter = new LazyAdapter(this, userList); 
    Listview.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:50:54.597

看起来它根本无法从运行它的机器上访问该 URL。您可以浏览到运行应用程序的外部服务器上的 URL 吗？

要进行故障排除：

*   确保您可以从与当前连接的不同网络的外部计算机访问 URL。
*   If working, check that the device/emulator you are using can access the same URL, if not - then you have a problem with the proxy that the emulator is using (they should normally route through the same network connection used by the host OS).
*   If the device/emulator is failing, then try switching it to a different network, or review their own help documentation.

# android - 从 Internet 解析 XML 文件并存储到 SQLite

> ID：10632450
> 
> 赞同：0
> 
> 时间：2012-05-17T08:49:13.080
> 
> 标签：android, database, sqlite, xml-parsing

如何在 SQLite 中存储从 Internet 解析的 xml 文件？我想保存一个 xml 文件，因为即使没有连接，我也想使用 xml 进行解析以供进一步使用。有谁知道怎么做？

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T03:54:16.363

3个步骤：

1.  进行 HTTP 调用
2.  获取 XML 格式的响应
3.  解析 XML 并将数据插入数据库。

您可以去搜索如何单独实施这些步骤，如果您遇到任何问题，请发布它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:04:13.520

1.发出HTTP请求

2.制作数据模型

3.获取响应并投放模型

4.将模型放入数据库

# java - 在 Thread.join() 之前调用 Thread.interrupt() 会导致 join() 立即抛出 InterruptedException 吗？

> ID：10632451
> 
> 赞同：14
> 
> 时间：2012-05-17T08:49:13.710
> 
> 标签：java, multithreading, concurrency, interrupt, interrupted-exception

基本上，问题标题所说的。

```
Thread t = new Thread(someRunnable);
t.start();
t.interrupt();
t.join(); //does an InterruptedException get thrown immediately here? 
```

从我自己的测试来看，似乎是，但只是想确定一下。我猜在执行“等待”例程之前`Thread.join()`检查线程的状态？`interrupted`

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-17T11:38:02.973

> 在 Thread.join() 之前调用 Thread.interrupt() 会导致 join() 立即抛出 InterruptedException 吗？

不，它不会抛出。只有在调用该方法的*当前*`join()`线程被中断时才会`join()`抛出`InterruptedException`. `t.interrupt()`正在中断您刚刚启动的线程，而只有在执行连接的线程（可能是主线程？）本身被中断时`t.join()`才会抛出。`InterruptedException`

```
 Thread t = new Thread(someRunnable);
 t.start();
 t.interrupt();
 t.join();  // will _not_ throw unless this thread calling join gets interrupted 
```

同样重要的是要意识到中断线程不会取消它*，并且* `join()`不像 a`Future`那样它将返回线程抛出的异常。

当您中断一个线程时，该线程对`sleep()`、`wait()`、`join()`和其他可中断方法的任何调用都将抛出`InterruptedException`。如果没有调用这些方法，那么线程将继续运行。如果线程*确实*抛出 a`InterruptedException`以响应被中断然后退出，那么除非您使用`t.setDefaultUncaughtExceptionHandler(handler)`.

在您的情况下，如果线程因为返回而被中断并完成，那么连接将完成——它不会引发异常。正确处理中断的常用线程代码如下：

```
 public void run() {
    try {
       Thread.sleep(10000);
    } catch (InterruptedException e) {
       // a good pattern is to re-interrupt the thread when you catch
       Thread.currentThread().interrupt();
       // another good pattern is to make sure that if you _are_ interrupted,
       // that you stop the thread
       return;
    }
 } 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-17T08:52:19.480

`interrupt()`中断您中断的线程，而不是执行中断的线程。

参考

```
Thread.currentThread().interrupt();
t.join(); // will throw InterruptedException 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-10T09:42:16.967

`interrupt()`将中断引用线程的执行，如果它受`sleep()`or`wait()`或影响`join()`。

1.  由于没有在 main 上调用 sleep /join /wait，这只会更新`interrupted`标志。
2.  验证语句 1
3.  `t1.join()`暂停执行`MAIN thread`并允许 t1 在`MAIN thread`继续之前执行。但是，似乎主要`Thread.currentThread().isIntercepted()`通过引发异常进行内部检查和处理。
4.  验证语句 3
5.  验证语句 3，并且由于异常已引发`intercepted`标志设置回 false

**示例代码：**

```
 t1.start();
        System.out.println(Thread.currentThread().getName()+" isInterrupted(): "+Thread.currentThread().isInterrupted());
        try {
            Thread.currentThread().interrupt(); // -- 1
            System.out.println(Thread.currentThread().getName()+" isInterrupted(): "+Thread.currentThread().isInterrupted()); // -- 2
            t1.join(); // -- 3
            System.out.println("This is never called as exception is raised"); // -- 4
        }catch(InterruptedException ex){
            System.out.println(Thread.currentThread().getName()+" isInterrupted(): "+Thread.currentThread().isInterrupted()); -- 5
        }
        System.out.println("Main continues"); 
```

**输出：**

```
main isInterrupted(): false
Thread-0: 0
main isInterrupted(): true
main isInterrupted(): false
Main continues
Thread-0: 1
Thread-0: 2
Thread-0: 3 
```

以上电话来自`main()`

我希望这将有助于更好地理解

# stream - MJPEG 流信息

> ID：10632454
> 
> 赞同：7
> 
> 时间：2012-05-17T08:49:18.437
> 
> 标签：stream, jpeg, codec, mjpeg, ip-camera

我从我的相机接收到一个 MJPEG 流。当我用十六进制编辑器查看视频数据时，它似乎不包含任何流媒体信息。我只看到一个又一个原始JPEG，但没有关于帧率等的信息。。

缺少 MJPEG 的任何元信息是否正常，还是仅与我使用的相机有关？如果没有关于流的信息，播放器如何知道播放视频的速度？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-22T21:22:25.270

缺少元数据是正常的。IP 摄像机通常会发送 MJPEG，一个接一个的 JPEG 图像作为流。这是最基本的有效 MJPEG 文件。如果您要获取一堆 jpeg，将它们组合成一个大文件，然后将其提供给 ffmpeg，它会将其视为有效的 mjpeg 格式文件。一些相机会添加一个额外的标题来包含音频数据，但不需要将其视为有效的运动 jpeg。

许多相机会在最初发送流时的 HTTP 标头中包含 X-Framerate 之类的标头，或者您可以将其设置为相机配置的一部分。但是，当摄像机仅发送 jpeg 时，无法从流本身判断帧速率是多少。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-01T17:22:25.177

> 缺少 MJPEG 的任何元信息是否正常，还是仅与我使用的相机有关？如果没有关于流的信息，播放器如何知道播放视频的速度？

为了补充已经回答的问题，IP 摄像机是一个实时视频源，帧通常在它们从摄像机到达时立即呈现。稀有的 IP 摄像机会附加额外的每帧信息，而不是成名大小（有些甚至不这样做！他们只发送数据和分隔符）。还有一些确实附加了时间戳和额外的数据，如运动检测状态。

大多数 IP 摄像机不执行恒定帧速率。也就是说，帧速率可能会有所不同，尤其是。在低光照条件下降低。在将数据多路复用为容器格式时，接收方负责附加每帧时间戳。时间戳可以从元数据（很少存在）中恢复，或者 - 更频繁地 - 接收器使用本地接收时间标记帧。

这是播放器以适当的速率播放视频序列的方式。实时馈送通常以“尽快显示接收到的帧”为基础呈现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T14:04:07.487

通常，MJPEG 数据在流媒体包装器中发送，例如 AVI 或 MOV（快速时间）。包装格式将包含帧率和有关可选音频数据的信息。

# c# - 检查位置是否在矩形周边内的有效方法？

> ID：10632457
> 
> 赞同：3
> 
> 时间：2012-05-17T08:49:50.107
> 
> 标签：c#, java, blackberry, geolocation, geometry

我将首先介绍这个问题：我正在开发一个应用程序，我必须在其中显示一个地图字段，并覆盖标记和线条。但是，在 BlacBerry OS 5.0 中，唯一`MapField`可用的 API 不提供覆盖内容的方法，仅在某个位置显示地图。它还提供了将屏幕坐标（像素）转换为 WGS84 坐标或从 WGS84 坐标转换的方法。这些方法可能在计算上很昂贵。

所以要绘制我自己的项目，我需要扩展这个类并覆盖它的 paint() 方法。扩展类还将保存一组位置。这就是被覆盖方法的样子（我将在这里使用 Java）：

```
 public void paint (Graphics g) {
            super.paint(g); //draws the map

            //TODO
            //Draw placemarks. The placemarks are basically holder objects
            //(for latitude and longitude) stored in a collection in this class.
        } 
```

然而，要在屏幕上绘制这些对象，我们应该首先将地标位置（纬度、经度）转换为屏幕坐标（x，y，以像素为单位）。这不能提前完成，因为地图不是静态的，所以它可以滚动和放大。这就是为什么在每个绘制循环中我们至少应该绘制可见对象。也就是说，我的问题是：

***给定一个矩形周长，其中角是地理位置（当前显示的地图部分的转换后的四个角），是否有一种快速的方法可以循环遍历集合中的每个地标并确定它们是否可见？***

我不需要这个测试是 100% 准确的，我不介意屏幕外的几个位置是否被绘制。但是由于地标集合可以包含许多元素（< 100），并且每次屏幕重绘都会调用paint方法，因此尝试在不检查是否可见的情况下绘制集合中的每个位置可能会影响性能并在用户与地图交互。

在您尝试提供一个天真的答案之前，请注意这不是一个简单的几何问题：我们使用的是地理坐标，而不是整数屏幕坐标。世界的尽头不是经度+180，也不是纬度+90。这个函数应该在两极和 ecuator 中工作，所以当我们有一条与矩形相交的过渡线（从 -180 到 +180，或从 -90 到 +90，或两条线）时，我也需要它工作。由于逻辑可能变得复杂，我想知道是否存在已经完成和测试的现有算法或开源库，而不是实现我自己的。

我也可以首先将集合中的每个位置转换为屏幕坐标，然后轻松检查仅由正屏幕坐标（从 x=0，y=0 开始）组成的矩形，但我认为转换函数可能很昂贵每次刷新时只转换 4 个点（可见的地图角）比不确定数量的地标要好。

任何其他方法或想法也将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T10:46:11.873

只是一个原始的想法：取“矩形”的两个对角，例如左上角和右下角。通过以下方式将两个角转换为笛卡尔空间坐标`(x,y,z)`：

```
x = cos[long] cos[lat]
y = sin[long] cos[lat]
z = sin[lat] 
```

两个`(x,y,z)`坐标都是单位向量（想象球体的中心在 中`(0,0,0)`，向量是从那里到表面的箭头）。找到地图区域的“中间”作为两个角向量的规范平均值（添加为向量，然后除以总和向量的长度以确保您有一个新的单位向量）。当你有 middle`(xMiddle,yMiddle,zMiddle)`时，对于每个转换为笛卡尔坐标的地标坐标`(x,y,z)`，使用点积 with`(xMiddle,yMiddle,zMiddle)`作为接近中间的度量。

现在包括每个与 的点积`(xMiddle,yMiddle,zMiddle)`大于左上角与 的点积的地标`(xMiddle,yMiddle,zMiddle)`。

这应该为您提供以“中间”为中心的圆形磁盘内的所有地标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T09:42:04.057

您至少可以通过在地图坐标空间中进行简单的复选框检查来排除大量候选人。这里可能有三种主要情况。矩形中要么有一个极点，要么没有。如果看不到极点，则矩形与 +/-180 度线相交或不相交。不可能有任何 +/-90 线，因为这会将北极和南极放在一起，而您没有使用 4D 地图，是吗？;-)

案例1，一个极点是可见的：如果它是北极，找出哪个角落的纬度最小。任何小于该值的纬度都可能在屏幕外。如果是南极，则将逻辑颠倒过来，即使用最大纬度并排除纬度较大的任何项目。我知道，将极点放在一个角落，将赤道放在另一个角落意味着您仍然包括整个半球。但至少你可以廉价地排除另一半。

案例 2，无极点，不越过 +/-180 经线：找到最小/最大经度和纬度值，并将其用于简单的复选框检查。框外的任何东西都在屏幕外。

情况 3，无极点，但穿过 +/-180 经线：纬度与上述相同。对于经度，分别找到距离 +180 和 -180 最远的经度。排除纬度超出最小/最大或在您找到的两个最远经度之间的任何项目。

案例 2 和 3 应该能够排除足够多的候选人，以便对其他人进行暴力检查。案例 1 可能需要进一步的后处理，但如果你想要一些复杂的东西，恐怕这部分对我来说有点太复杂了。我想如果柱子离屏幕中心更远，你可以以某种方式找到离柱子最近的屏幕外点。然后以某种方式构造一个在该点有一个角的三角形形状，并使其尽可能大而不触及屏幕矩形。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:24:48.573

I think you just need to **Convert your rectengular perimeter to geographic coordinates**. Instead of trying to convert the geogrpahic coordinates to screen coordinates.

I'm sorry that the answer is naive - but you do you ask about logic. And so the logical thing I visualize is a window sliding on a spehere and that means you need to have that window geographical coordinates as your points of reference.

After you process that "3d" information you can start rendering your view.

# css - 如何将css添加到treegrid GXT 3中的选定行

> ID：10632458
> 
> 赞同：3
> 
> 时间：2012-05-17T08:49:56.847
> 
> 标签：css, gxt, treegrid

我使用 GXT 3 创建了一个树形网格。现在我想更改所选行的背景颜色，并且我想更改根节点的背景（叶行，即父行）。

我正在使用 GXT 3.0 和 eclipse 3.7

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-28T07:24:13.360

我也遇到了同样的问题，我想根据某些条件为行的背景着色。最后，我找到了解决方案：

您需要创建一个`GridViewConfig`并覆盖该`getColumnStyle`方法以返回所需的颜色，我花了一段时间才发现，但覆盖该`getRowStyle`方法并不能解决问题，至少对我来说不是。

```
grid.getView().setViewConfig(new GridViewConfig<Model>() {

    @Override
    public String getColStyle(  Model model, 
                                ValueProvider<? super Model, ?> valueProvider,
                                int rowIndex, int colIndex)
    {
        if ("Other2".equals(model.getName())){
            return "bold";
        }else if ("Other".equals(model.getName())){
            return "red-row";
        }
        return null;
    }

    @Override
    public String getRowStyle(Model model, int rowIndex) {
        return null;
    }
}); 
```

注意：相应地修改 CSS 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T15:32:39.517

我认为这与 GXT 2.x 相同

只需在 ColumnConfig 上添加您自己的 CellRenderer ：

```
List<ColumnConfig> columns = new ArrayList<ColumnConfig>();
ColumnConfig levelColumnConfig = new ColumnConfig("level", "Level", 50);
levelColumnConfig.setRenderer(getGridCellRenderer());
columns.add(levelColumnConfig);
ColumnModel cm = new ColumnModel(columns);

private GridCellRenderer<BeanModel> getGridCellRenderer() {
        if (gridCellRenderer == null) {
            gridCellRenderer = new GridCellRenderer<BeanModel>() {
                @Override
                public Object render(BeanModel model, String property, ColumnData config, int rowIndex, int colIndex,
                    ListStore<BeanModel> store, Grid<BeanModel> grid) {

                    //add some logic for example

                    String color = "#000000";
                    MyBean mybean = (MyBean) model.getBean();
                    switch (mybean.getLevel()) {
                    case TRACE:
                        color = "#f0f0f0";
                        break;
                    default:
                        color = "#000000";
                    }

                    // add some background-color

                    config.style = config.style + ";background-color:" + color + ";";
                    Object value = model.get(property);
                    return value;
                }
            };
        }
        return gridCellRenderer;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-24T08:02:30.953

我发现你也可以像这样调整 CSS：

```
grid.getCellFormatter().addStyleName(0, colNo - 1, MC_GWT.MC_STYLE_VERTICAL_ICON_HOLDER); 
```

我认为这更容易:) 尤其是当您想要设置其中的图标的 , fe 对齐方式时。就我而言，我需要在垂直行中显示图标。所以我需要将单元格显示更改为“阻止”；

# php - PHP上传图片时如何显示进度条

> ID：10632467
> 
> 赞同：1
> 
> 时间：2012-05-17T08:50:20.090
> 
> 标签：php, jquery, ajax, image-uploading

这是我的代码：

```
$(function(){

var btnUpload=$('#browse');
var adinfoid=$('#adinfoid').val();
new AjaxUpload(btnUpload, {
    action: '<?php echo base_url()?>index.php/post/upload_editmainimage/'+adinfoid,
    name: 'uploadfile',
    onSubmit: function(file, ext){

        $("#progressid").css("display","block");
        if (! (ext && /^(jpg|png|jpeg|gif|JPG|PNG|JPEG|GIF)$/.test(ext))){
            $("#mainphotoerror").html('Only JPG, PNG, GIF, files are allowed');
            $("#mainphotoerror").css('display','block');
            return false;
        }           
    },
    onComplete: function(file, response){ //alert(response);

        if(response){
                /*$(".main_image").html('');
                $(".main_image").html(response);*/
                $("#progressid").css("display","none");
                $("#image"+<?php echo $mainimage->intphotoid; ?>).css('display','block');
                $("#imagemainicon"+<?php echo $mainimage->intphotoid; ?>).css('display','block');

                $("#mainimageicon").attr("src",response);   
                $("#mainimageicon").attr("width",55);
                $("#mainimageicon").attr("height",55);
                $("#mainimageicon1").attr("src",response);  
        }else{
        alert("error");
        }
    }
}); 
```

});

```
<input type="button" id="browse" class="browse_media" value="Browse">
        <div id="progressid" class="displayNone">
            <img src="//s3.amazonaws.com/s3.racingjunk.com/102/images/procesing.gif" width="117" height="20" />
            Uploading.....
        </div> 
```

当我单击浏览按钮时，我需要显示一个进度条 5 分钟。5 分钟后，进度条将隐藏或不显示。进度条隐藏后，图像将显示。

我怎样才能做到这一点？这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:04:21.653

试试这个
[http://www.9lessons.info/2012/04/file-upload-progress-bar-with-jquery.html](http://www.9lessons.info/2012/04/file-upload-progress-bar-with-jquery.html)

我自己没试过，但今晚工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:16:29.930

你必须这样做： -

```
<div id="popup1" class="popup_block">
    <?php echo $this->Html->image('ajax-loader2.gif'); ?>
    <h4>Processing Please Wait...! </h4>
</div> 
```

在脚本中：- 使用 Jquery

```
 //Fade in Background
            jQuery('body').append('<div id="fade"></div>'); //Add the fade layer to bottom of the body tag.
            jQuery('#fade').css({'filter' : 'alpha(opacity=80)'}).fadeIn(); //Fade in the fade layer
            var popID = 'popup1';
            //var popWidth = 500;
            //Fade in the Popup and add close button
            jQuery('#' + popID).css({ 'width': '250' }); 
```

有时间你可以提供你的 Jquery 或这样做：-

```
window.setInterval(function() {
    // this will execute every 5 minutes => show the alert here
}, 300000); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:15:37.090

您无法使用您共享的代码来实现这一点。你看，你需要知道有多少数据已经发送到服务器，这样你才能显示实际进度。

人们是如何做到的？1\. 他们使用第三方插件，如 java Applet 或 Flash 来上传文件 2\. 他们使用动画图片来显示文件发送时的进度（不是实际进度）。3\. 他们使用 HTML 5。

要获得关于已发送到服务器的文件量的实时反馈，您将需要 3rd 方插件（如果您使用的是旧版浏览器）或 HTML5 XMLHttpRequest 对象

请参阅带有上传状态/进度条的[html5 文件上传。](http://www.matlus.com/html5-file-upload-with-progress/)

# css - 使用 CSS 样式化电子邮件链接 / href="mailto:"

> ID：10632468
> 
> 赞同：20
> 
> 时间：2012-05-17T08:50:31.880
> 
> 标签：css, email, href, mailto

多亏了 StackOverflow，我终于找到了一种设置电子邮件链接样式的方法，但我想知道为什么如果没有我在这里找到的解决方案它就不起作用。

由于链接是属性类“about”的跨度的一部分，它定义了字体大小和样式，电子邮件链接不应该以 11px 和无衬线显示吗？

而同时

```
a[href^="mailto:"]

{ 
  font-family: sans-serif;
  color: black;
  font-size: 11px;
} 
```

效果很好，只要我尝试将其更改为

```
.about a[href^="mailto:"]

{ 
  font-family: sans-serif;
  color: black;
  font-size: 11px;
} 
```

它也没有按预期运行。

标签不听跨度格式或类嵌套吗？

```
 <!DOCTYPE html>
<html>
<head>
<style type="text/css">

html {
    height:100%;
}

body {
    height: 100%;
    margin-left: 20px;
    margin-top:0px;
}

.bottom-left {

    position: absolute;
    font:sans-serif;
    bottom: 15px;
    left: 15px;
}

.bold {
    font-family: serif;
}

.about {
    font-size: 11px;
    font-family: sans-serif;
}

/*a[href^="mailto:"]

{ 
  font-family: sans-serif;
  color: black;
  font-size: 11px;
}*/

.address {
font-size: 11px;
border-bottom: 1px grey dotted;
}

</style>

<title>TEMP</title>

</head>
<body>

<div class="bottom-left">
        <span class="about">
            <span class="bold">XYZ</span> is a project space .&nbsp;&nbsp;&#124;&nbsp;
            <span="address">Website Information</span> &mdash; <a href="mailto:info@info.eu">info@info.eu</a>
        </span>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-17T08:59:24.687

嗨，实际上您已经评论了您的电子邮件链接 css：-

所以现在像这种方法一样编写css它工作正常......

```
a[href^="mailto:"]
{ 
  font-family: sans-serif;
  color: red;
  font-size: 11px;
} 
```

看演示：- [http://jsbin.com/ijofoq/edit#html,live](http://jsbin.com/ijofoq/edit#html,live)

**更新**

现在它工作正常...编辑您的 HTML 并添加您的 HTML

```
<div class="bottom-left">
    <div class="about">
        <span class="bold">XYZ</span> is a project space .&nbsp;&nbsp;&#124;&nbsp;
        <span="address">Website Information</span> &mdash; <a href="mailto:info@info.eu">info@info.eu</a>
    </div> 
```

**基本上**你必须从 . **关于**上课。

检查这个：- [http://jsbin.com/ijofoq/2/edit](http://jsbin.com/ijofoq/2/edit)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-23T13:19:03.563

我认为`.about`优先`a`。参看。[Css 规则特异性](https://developer.mozilla.org/en-US/docs/Web/CSS/Specificity)。

基本上，一个 css 规则集被分配一个优先级，如版本号，如下所示：

```
{#id}.{#class}.{#element}.{order} 
```

和

*   {#id} : id 选择器的数量
*   {#class} ：类、伪类、属性的数量
*   {#element} : 元素数量，伪元素
*   {order} ：此规则在所有文件中的索引

所以，我们有以下顺序：

1.  **0.2.1.*** `.about a[href^="mailto:"]` *(0 id, 1 class + 1 attr, 1 element)*
2.  **0.1.1.a** `span.about` *（0 id，1 类，1 元素）*
3.  **0.1.1.b** `a[href^="mailto:"]` *(0 id, 1 attr, 1 元素)*
4.  **0.1.0.*** `.about` *（0 id，1 类，0 元素）*

`span.about`并且`a[href^="mailto:"]`具有相同的特殊性（1个类或属性和1个元素），所以顺序很重要，最后一个获胜。

如果你删除了，`span`那么规则就不那么具体和松散了。

（另外，区分直接应用于元素的规则和其他从父元素继承的规则......）

# iphone - 如何使用 Core Graphics/Quartz 创建实心圆的一部分

> ID：10632469
> 
> 赞同：3
> 
> 时间：2012-05-17T08:50:33.487
> 
> 标签：iphone, ios, objective-c, core-graphics, quartz-graphics

我已经创建了 UIView 的一个子类，我试图在我的 drawRect 方法中绘制一个圆圈的一部分。

我尝试过使用`bezierPathWithArcCenter`和填充它，但这只会产生一个饼形（图 3），这不是我想要的。**我想画出你在图 1 和图 2 中看到的东西**。

也许我可以以某种方式剪辑一个完整的圆圈？圆圈周围的区域需要是透明的。

![界](../Images/2dac1c1fadb18d258a134f62e343c41d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:10:35.283

TompaLompas 的回答为我指明了正确的方向（使用弧线绘制部分）。然而完整的解决方案和答案是这样的：

```
#define   DEGREES_TO_RADIANS(degrees)  ((M_PI * degrees)/ 180)
- (void)drawRect:(CGRect)rect
{
    [super drawRect:rect];

    CGContextRef ctx = UIGraphicsGetCurrentContext();
    int radius = self.frame.size.width / 2;
    CGPoint center = CGPointMake(self.frame.size.width / 2, self.frame.size.height / 2);
//Image 2 
    CGContextSetFillColorWithColor(ctx, [UIColor redColor].CGColor);
    CGContextAddArc(ctx, center.x, center.y, radius, DEGREES_TO_RADIANS(225), DEGREES_TO_RADIANS(315), NO);
    CGContextDrawPath(ctx, kCGPathFill);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T09:20:54.390

尝试用这个覆盖drawRect：

```
- (void)drawRect:(CGRect)rect
{
    [super drawRect:rect];
    CGContextRef context = UIGraphicsGetCurrentContext();
    float radius = 50.0f;
    float x_left = rect.origin.x;
    float x_left_center = x_left + radius;
    float y_top = rect.origin.y;
    float y_top_center = y_top + radius;
    /* Begin path */
    CGFloat white[4] = {0.0f, 204.0f/255.0f, 1.0f, 0.8f};
    CGContextSetFillColor(context, white);
    CGContextSetLineWidth(context, 1.0);
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, x_left, y_top_center);
    CGContextAddArcToPoint(context, x_left, y_top, x_left_center, y_top, radius);
    CGContextAddLineToPoint(context,x_left, y_top + radius);

    CGContextFillPath(context);
} 
```

它将绘制一个旋转的图像编号 2

# asp.net - 以编程方式应用主题，以便将其应用于尚未定义的控件属性

> ID：10632470
> 
> 赞同：0
> 
> 时间：2012-05-17T08:50:35.060
> 
> 标签：asp.net, .net, visual-studio-2010, c#-4.0

我正在为 Web 开发人员的 Microsoft 考试（asp.net 4.0）学习，我遇到了这个问题：

> 您需要以编程方式应用名为 Fabrikam 的主题，以便将其应用于尚未定义的控件属性。换句话说，您不希望主题覆盖控件属性。以下哪个代码示例正确地做到了这一点？

（一个）

```
void Page_PreInit(object sender, EventArgs e)

{

this.StyleSheetTheme = "Fabrikam";

} 
```

(乙)

```
public override String StyleSheetTheme

{ get { return "Fabrikam"; }

}* 
```

选项 B 被选为答案者。

为什么选项 A 不能作为答案，StyleSheetTheme 不会覆盖控件属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:15:30.893

它是 page_init 事件，其中主题应用于控件

每个控件首先使用 .aspx 标记中设置的属性创建，然后分配存储在主题文件中的设置。这样，主题设置会覆盖相应的标记设置。非主题属性保留在 .aspx 文件中设置的原始值。

因此，如果您不在 Page_Init 中分配主题，它们将不会获得优先权，也不会覆盖现有的控件属性。

# jquery - 如何以编程方式构造对象数组

> ID：10632477
> 
> 赞同：1
> 
> 时间：2012-05-17T08:51:01.517
> 
> 标签：jquery, arrays, coffeescript

我想以编程方式构造一个对象数组。我期待的最终结果是这样的

```
[{"nickname":"xxx"},{"nickname":"yyy"},{"nickname":"zzz"}] 
```

这是我的代码

```
@tagged_user_array = []
//pingUsers is the array which stored the list or nicknames 'xxx', 'yyy' and 'zzz'
$.each @pingUsers, (index, nick) =>
   @tagged_user_array.push(nick) 
```

使用上面的代码，我无法获得预期的结果。为了获得预期的结果，我需要修改什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T15:43:12.263

由于您使用的是 CoffeeScript 并且循环是 CoffeeScript 中的表达式，因此您可以改用推导[式](http://coffeescript.org/#loops)：

```
pingUsers = ["xxx", "yyy", "zzz"]
tagged_user_array = ({nickname: value} for value in pingUsers) 
```

演示：http: [//jsfiddle.net/ambiguous/w4ugV/1/](http://jsfiddle.net/ambiguous/w4ugV/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:55:28.817

试试这个：

```
var pingUsers = ["xxx", "yyy", "zzz"];
var tagged_user_array = [];

$.each(pingUsers, function(index, value)  {
    tagged_user_array.push({ "nickname" : value });
}); 
```

[**示例小提琴**](http://jsfiddle.net/qPaDL/)

我不确定你为什么在变量前面加上前缀，`@`因为这在 javascript 中是无效的。

# c# - 使用基于 C# 的 WPF 在登录表单中散列密码

> ID：10632482
> 
> 赞同：0
> 
> 时间：2012-05-17T08:51:20.340
> 
> 标签：c#, mysql, hash

我正在尝试使用 MySQL 在基于 C# 的 WPF 中实现 logIn 表单。贝娄是我的代码。当我尝试运行程序时，一切似乎都很好，但是当我尝试填写信息时，我在线收到错误：

```
salt = cmd.ExecuteScalar() as string; 
```

它说：'字段列表'中的未知列'盐'就行了。我试图做的是在我的表中创建列盐。首先我没有输入数据并得到“错误的详细信息”，然后我插入了与密码相同的数据并得到了相同的错误：“错误的详细信息”。您是否有任何想法可以解决我的问题？

这是我替换敏感数据的代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using MySql.Data.MySqlClient;
using System.Security.Cryptography;
using System.Security.Authentication;
using System.Security.Permissions;
using System.Security.AccessControl;
using System.Security.Policy;
using System.Security.Principal;
using System.Security.Util;

namespace ECBSRecruitmentAgencySoftware
{
    public partial class LogIn : Form
    {

        public LogIn()
        {

            InitializeComponent();

        }

    static byte[] GenerateSaltedHash(string plainText, string salt)
    {
       HashAlgorithm algorithm = new SHA256Managed();

       byte[] plainTextBytes = System.Text.Encoding.Unicode.GetBytes(plainText);
       byte[] saltBytes = Convert.FromBase64String(salt);

       byte[] plainTextWithSaltBytes = new byte[plainTextBytes.Length + saltBytes.Length];
       saltBytes.CopyTo(plainTextWithSaltBytes, 0);
       plainTextBytes.CopyTo(plainTextWithSaltBytes, salt.Length); 

       byte[] hash = algorithm.ComputeHash(plainTextWithSaltBytes);

       return hash;
    }

        public bool tryLogin(string username , string password)
        {
             using (var con = new MySqlConnection("host=tara.rdb.superhosting.bg;user=sozopouk;password=27051996;database=sozopouk_test2;"))
             {
                 con.Open();

                 var salt = string.Empty;

                 using (var cmd = new MySqlCommand("Select salt From niki where user_name = @username", con))
                 {
                     cmd.Parameters.AddWithValue("@username", username);

                     salt = cmd.ExecuteScalar() as string;
                 }

                 if (string.IsNullOrEmpty(salt)) return false;

                 var hashedPassword = GenerateSaltedHash(password, salt);

                 using (var cmd = new MySqlCommand("Select * FROM niki WHERE user_name = @username and user_password = @password", con))
                 {
                    cmd.Parameters.AddWithValue("@username", username);
                    cmd.Parameters.AddWithValue("@password", hashedPassword);

                    using (var reader = cmd.ExecuteReader())
                    {
                         return reader.Read();
                    }
                 }
             }
             }

        private void button1_Click(object sender, EventArgs e)
        {
            if (tryLogin(user.Text, pass.Text) == true)
            {
                MainScreen F2 = new MainScreen();
                F2.Show();
                this.Hide();
            }

            else MessageBox.Show("Wrong details!");
        }
        }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:54:40.193

似乎 Niki 表没有字段名称作为盐。

以下代码在`salt`变量中返回 NULL。

```
salt = cmd.ExecuteScalar() as string; 
```

因此，在下一条语句中，您正在检查盐的空值或空值。

```
if (string.IsNullOrEmpty(salt)) return false; 
```

如果 salt 为空或 null，您将从代码中返回 false。因此`tryLogin`函数返回 false，您会看到“错误详细信息！”的不需要的消息框。

您可以放置​​一个消息框以显示从`ExecuteScalar()`验证返回的盐值

# jquery - pushState() 和 popState()：操纵浏览器的历史

> ID：10632483
> 
> 赞同：6
> 
> 时间：2012-05-17T08:51:20.460
> 
> 标签：jquery, html, pushstate, history.js, popstate

我正在做一个小项目，我想在其中创建一个 Ajax 风格的网站。内容使用 jQuery 加载`load()`。正如你们中的一些人所知，这样做的不利方面是 URL 不会根据显示的内容而相应更改。要完成这项工作，您可以使用`pushState()`. 因为这不支持跨浏览器，所以我使用了插件`history.js`.

这工作得很好，但问题是我的后退和前进按钮没有正常工作，我不知道我做错了什么。URL 正在正确更改，内容也在更改，但标题根本没有更改。标题我的意思是显示为浏览器窗口的窗口（或选项卡）的标题。即`<title>`加载的页面或指向该页面的链接的标题属性（它们是相同的）。我认为这与我只调用我需要其标题的页面部分（即通过添加`#content`到`load()`）这一事实有关。我仍然想要那个页面的标题。这是我到目前为止的测试用例。（自 2013 年 12 月 28 日起不再可用。）jQuery 文件：

```
$(document).ready(function () {
    var firstLink = $("ul > li:first-child > a");
    var menuLink = $("ul > li > a");
    var firstLoadedHtml = firstLink.attr("href") + " #content";

    $("#sectionContainer").hide().load(firstLoadedHtml).fadeIn("fast");
    firstLink.addClass("active");   

    menuLink.click(function(e) {
        history.pushState(null, null, this.href);

        e.preventDefault();
        e.stopImmediatePropagation();

        var CurLink = $(this);
        var newLoadedHtml = CurLink.attr("href") + " #content";
        var oldSection = $(".contentPage");

        $("#sectionContainer").hide().load(newLoadedHtml).fadeIn("fast");
        menuLink.removeClass("active");
        CurLink.addClass("active");
    });

    $(window).bind('popstate', function() {
            var returnLocation = history.location || document.location;

            $('#sectionContainer').load(returnLocation + "#content");
    });
}); 
```

我还注意到，当返回到基本页面（即 /sectionLoaderTest/）时，它会暂时变为空白，并且仅在一段时间后才会加载第一页的内容。有没有办法优化这个？

此外，我正在使用 jQuery 向已单击的链接添加一个活动类。我怎样才能确保这会随着历史的变化而改变？以便在用户导航返回时突出显示正确的链接？

所以这三个问题是：

1.  前进和后退时使标题正常工作
2.  优化首页加载时间
3.  前进后退时修正active-class

欢迎大家帮忙！

**注意 1**：我想在 history.js 和我自己的脚本上构建，因此保持对`< HTML5`浏览器的支持。我更喜欢这个，因为 1\. 我知道这必须有效，只是出了点问题。2\. 如果我能看到一个解决方案并在我已经编写的脚本中实现它，而不是找出一个全新的脚本，这将节省时间。

**注意 2**：赏金只会提供给能够回答我所有问题 (3) 的人！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-19T16:37:14.407

**答案 1 - 在前进和后退时使标题正常工作**

据我了解，您想从链接更改文档标题 html 加载到 div 中。当您通过 jQuery 在 div 中加载文件时，`.load`您只是在其中的 ajax 请求之后插入完整的响应文本。因此，所有不应该在 div 中的东西，如`title`or`meta`标签。但是，当前文档 ( `http://bramvanroy.be/sectionLoaderTest/index.html`) 的标题是在标签内的`title`which 中定义的，`head`而不是在`title`div 内的标签中定义的，这就是文档标题不会改变的原因。

*那么我该如何解决呢？*

好问题，因为`title`元素内的`div`元素是无效的，大多数浏览器会删除它，所以你不能只使用这个：

```
document.title = $("#sectionContainer title").text(); 
```

因为该`title`元素可能不存在。

所以我们需要的是来自 jQuery`.load`函数的直接响应。我可以通过向函数添加回调参数来获得它：

```
$("#sectionContainer")
    .hide()
    .load(newLoadedHtml, function(responseText) {
        document.title = $(responseText).filter("title").text();
    })
    .fadeIn("fast"); 
```

你可能不明白为什么我使用的是`.filter`而不是`.find`函数。这是因为 jQuery 是一种解析`html`，`head`并且`body`标签从 html 中取出，但没有删除那里的子元素。

**答案 2 - 优化主页的加载时间**

正在从上到下加载文档。

所以首先应该加载 css、JavaScript 等，然后是主文档。因为 jQuery 在执行之前总是在等待文档，所以将所有`script`元素放在正文末尾之前并不是一个坏主意，这样您的 HTML 就可以在之前加载。

顺便说一句，在所有内容都被缓存并且文档加载速度非常快之后，我第一次遇到了这个问题。

**答案 3 - 在前进和后退时修复活动类**

我会说循环遍历元素的`href`属性`a`并将其与来自`History.getState()`. 应该很容易。

**您在代码中犯了一些错误 - 您的固定代码：**

您将哈希附加`#content`到所有 URL .. 它没有意义，它将再次被 jQuery 删除：[https](https://github.com/jquery/jquery/blob/master/src/ajax.js#L617) ://github.com/jquery/jquery/blob/master/src/ajax.js#L617 （来自行：158、190、337、617 - rhash 在第 6 行）

```
$(document).ready(function () {
    var firstLink = $("ul > li:first-child > a");
    var menuLink = $("ul > li > a");
    var firstLoadedHtml = firstLink.attr("href");

    $("#sectionContainer").hide().load(firstLoadedHtml).fadeIn("fast");
    firstLink.addClass("active");   

    menuLink.click(function(e) {

        e.preventDefault();
        e.stopImmediatePropagation();

        var newLoadedHtml = $(this).attr("href");

        History.pushState(null, newLoadedHtml, newLoadedHtml);

        $("#sectionContainer")
            .hide()
            .load(newLoadedHtml, function(responseText) {
                document.title = $(responseText).filter("title").text();
            })
            .fadeIn("fast");
    });

    History.Adapter.bind(window, "statechange", function() {
        menuLink.removeClass("active");
        $("a[href='" + History.getState().title + "']").addClass("active");
        $('#sectionContainer').load(document.location.href, function(responseText) {
            document.title = $(responseText).filter("title").text();
        }); 
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T07:05:00.783

您还可以尝试可用的路由插件，如**davis.js**或**jQuery Pusher** [https://github.com/salvan13/jquery-pusher](https://github.com/salvan13/jquery-pusher)

# actionscript-3 - 如何在 Flex 分组集合上维护开放节点

> ID：10632484
> 
> 赞同：0
> 
> 时间：2012-05-17T08:51:21.400
> 
> 标签：actionscript-3, apache-flex, mxml

我有一个 Flex 应用程序，它有一个包含分组集合的高级数据网格。我希望屏幕最初关闭所有节点。从那里，用户可以选择打开一个或两个并查看其中的信息。如果单击其中一个节点子项，则会使用视图堆栈将视图更改为包含有关该子项的更多信息的屏幕。但是，当我们返回初始屏幕时，它会再次关闭所有节点。

我希望应用程序记住哪些节点保持打开状态以及最后单击的项目是什么，并将其突出显示。

我已经尝试使用 IHierarchicalCollectionView(dataProviderName).openNodes 并将其分配给一个对象，当视图发生变化时以及当它返回 Assisning 这个对象给 IHierarchicalCollectionView(dataProviderName).openNodes 时。但该应用程序似乎进入了一个循环，IE 停止响应。

这是我的 DataGrid 的代码。任何帮助，将不胜感激。

```
 public class SummaryGridBase extends AdvancedDataGrid
{

    [Bindable]
    protected var _modelLocator:ModelLocator = ModelLocator.getInstance();

    [Bindable]
    override public function set dataProvider(value:Object):void
    {
        super.dataProvider = value;
    }

    override protected function collectionChangeHandler(event:Event):void
    {
        super.collectionChangeHandler(event);
        trace("Summary Grid Trace 1");
        if( event is CollectionEvent && (event as CollectionEvent).kind == CollectionEventKind.REFRESH )
        {
            trace("Summary Grid Trace 2");
            this.validateGridAndExpand();
        }           
    }

    private function validateGridAndExpand():void
    {
        this.validateNow();
        var rootLevel:ArrayCollection = ModelLocator.getInstance().groupingCollection.getRoot() as ArrayCollection;
        for each( var item:Object in rootLevel )
        {
            this.expandItem( item, true, false );
        }
    }

    protected function changeHandler(event:ListEvent):void
    {
        trace("Change in Summary Data Selection" +(this.selectedItem.Business));
        if( this.selectedItem.Business == null )
        {
            trace("Im Null");
            Alert.show( "Please Expand a Vendor Using The Arrow Beside it \nand Select a Polymer From the List", 'Warning', mx.controls.Alert.OK);
        }
        else
        {
            var summaryEvent:SummaryEvent = new SummaryEvent( SummaryEvent.SELECT_SUMMARY, (this.selectedItem.Business as String), (this.selectedItem.Op_Site as String),(this.selectedItem.Vendor as String),(this.selectedItem.Item_Desc as String) );
            summaryEvent.dispatch();
        }
    }

    public function SummaryGridBase()
    {
        super();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T11:04:02.310

我只是偶然发现了这个问题，最近遇到了同样的问题。我知道为时已晚，但为了互联网，这对我有用。

[我（最终）在这里](http://techrays.wordpress.com/2008/11/19/preserving-the-open-nodes-in-advanceddatagrid-after-re-grouping/)找到了答案

所以有两个部分，首先更新数据的地方，您首先获取打开哪些节点的分层视图，并在更新分组集合后恢复它：

```
var hierarchical:IHierarchicalCollectionView = advDatagrid.dataProvider as IHierarchicalCollectionView;

var openNodes:Object = hierarchical.openNodes;

grpCollection.refresh();

advDatagrid.dataProvider = grpCollection;
advDatagrid.validateNow();
IHierarchicalCollectionView(advDatagrid.dataProvider).openNodes = openNodes; 
```

但另一部分是设置分组对象功能。

所以在你的分组定义中：

```
<mx:GroupingCollection2 id="grpCollection" source="{data}">
<mx:Grouping groupingObjectFunction="grpObjFunc">
    <mx:GroupingField name="name"/>
</mx:Grouping> 
```

还有一个返回唯一 id 的简单函数：

```
 private function grpObjFunc(value:String):Object
{
    return {uid:value};
} 
```

# javascript - 如何为国家动态添加标记？

> ID：10632485
> 
> 赞同：2
> 
> 时间：2012-05-17T08:51:25.417
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3, jqvmap

有人用过[http://jqvmap.com/](http://jqvmap.com/)吗？

有没有办法在地图上动态添加点（或某种标记）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T07:48:57.950

尝试使用新版本的 jVectorMap。它有这个功能。这是一个[例子](http://jvectormap.com/examples/markers-world/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:19:16.993

jqvmap 使用 svg 图像来显示地图。您可以根据自己的需要编辑 svg 图像并添加点。这是 svg 编辑器的链接[http://svg-edit.googlecode.com/svn/branches/2.5.1/editor/svg-editor.html](http://svg-edit.googlecode.com/svn/branches/2.5.1/editor/svg-editor.html)

在 FF 中安装 firebug 并执行以下步骤

1.  打开上面的链接。（svg编辑器）
2.  在另一个选项卡中打开[http://jqvmap.com/](http://jqvmap.com/)。（或呈现地图的页面）
3.  用萤火虫检查地图。您会发现有一个`<svg>`包含所有地图数据的标签。
4.  在`<svg>`标签中有一个`g`标签。在 firebug 中，`<g>`标记并复制 svg 代码。
5.  回到第一个窗口（svg 编辑器）
6.  单击第二个菜单按钮以查看 svg 源。（或按`U`）
7.  `<g>`用您复制的代码替换标签。
8.  应用更改
9.  现在你可以在你想要的地方放置点。（只需探索该工具）

# spring - 如何捕获 PSQLException 值对于类型字符变化太长

> ID：10632487
> 
> 赞同：0
> 
> 时间：2012-05-17T08:51:29.153
> 
> 标签：spring, hibernate, postgresql, plpgsql

我目前正在测试我在 spring 中创建的数据访问层（注入了 PersistenceContext）。所以我有一个无状态的 EJB，它调用一个服务，例如 UserService，它在数据库中插入/删除/更新数据。

该服务工作正常，我能够插入数据库。但是当我在测试并且我输入的字符串值比我得到的设定长度长时：

```
javax.transaction.RollbackException: Transaction marked for rollback.
WARNING: DTX5014: Caught exception in beforeCompletion() callback:
javax.persistence.PersistenceException: org.hibernate.exception.DataException: ERROR: value too long for type character varying(20)
Caused by: org.hibernate.exception.DataException: ERROR: value too long for type character varying(20)
Caused by: org.hibernate.exception.DataException: ERROR: value too long for type character varying(20) 
```

我的部分代码：

```
@PersistenceContext
protected EntityManager entityManager;

try {
    entityManager.persist(e);
} catch(Exception e) {
  //log message here
} 
```

然后我尝试了一切来捕捉这些错误，但我无法做到。关于如何解决问题的任何建议？

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:14:38.480

我使用以下代码找出在您的情况下引发了哪个错误：

```
BEGIN;
CREATE TABLE t(v varchar(5));
DO $body$
BEGIN
  INSERT INTO t VALUES ('1234567');
EXCEPTION WHEN OTHERS THEN
  RAISE NOTICE '!!! %, %', SQLSTATE, SQLERRM;
END;$body$;
ROLLBACK; 
```

你会看到，那个错误代码是`22001`，错误是`string_data_right_truncation`根据[PostrgeSQL 的错误代码列表](http://www.postgresql.org/docs/current/interactive/errcodes-appendix.html)命名的。

我不知道如何在 Hibernate 中捕获此错误，但在[PL/pgSQL 级别](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-ERROR-TRAPPING)上，您可以使用：

```
EXCEPTION WHEN SQLSTATE '22001' THEN
    -- your code follows
END; 
```

我希望这能帮到您。

# photoshop - 如何在不让其他人下载的情况下在线显示 PSD？

> ID：10632488
> 
> 赞同：-1
> 
> 时间：2012-05-17T08:51:35.247
> 
> 标签：photoshop, psd

我有大约 20 个 PSD，需要向一些程序员展示。是否可以将它们上传到他们可以查看但不能下载的地方？

还是唯一的选择是将它们全部转换为JPG？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T20:50:31.310

使用 Photoshop 操作将许多 psd 批量转换为 jpg 并上传 jpg。如果您担心他们也会滥用 jpg，请在您的 jpg 图像上添加水印。

执行此操作的管道可能是：

1.  窗口 -> 动作
2.  打开你的 PSD 文件
3.  单击“操作”窗口中右下角的按钮“创建新操作”
4.  命名您的操作
5.  点击记录
6.  现在正在记录您的操作。
7.  图层->展平图像（现在要小心 - 不要意外地将您的 PSD 保存为展平！）
8.  如果是cmyk，则将其转换为rgb，如果有出血，则裁剪掉出血部分
9.  如果需要，调整图像大小 image -> image resize
10.  文件 -> 另存为...JPG
11.  关闭图片
12.  停止录制动作。

现在您可以在您的 PSD-s 所在的整个文件夹上运行该操作：

1.  文件 -> 自动化 -> 批处理
2.  选择您的操作，然后选择您的文件夹。
3.  选择你的源文件夹……稍微调整一下……魔法就会开始发生！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T19:33:09.603

您可以使用 google docs 在线查看 .psd。将其上传到 docs.google.com，选择要查看的文件，然后在共享之前单击“文件”并切换“阻止查看者下载”

![在此处输入图像描述](../Images/bc8e843cb89d518511526c46ac5e3693.png)

# javascript - 如何从 href 值中获取明确的 url？

> ID：10632489
> 
> 赞同：2
> 
> 时间：2012-05-17T08:51:38.093
> 
> 标签：javascript, jquery, url-routing

我有一些带有各种hrefs的链接，并希望获得此值的最终网址，例如：

```
http://localhost/   -> http://localhost/
localhost           -> http://mysite.example/localhost
firstpage           -> http://mysite.example/firstpage
/anotherpage        -> http://mysite.example/anotherpage
#anchor1            -> http://mysite.example/currentpage#anchor1
/#anchor2           -> http://mysite.example/#anchor2 
```

顺便说一句，我不想​​要点击处理的代码。我能做到。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T08:54:36.873

`$("a:first").prop("href")`将为您提供第一个锚标记的完整 URL，而不是为`$("a:first").attr("href")`您提供 href 属性中的文本。

# php - 如何在 PHP 中获取复选框值

> ID：10632490
> 
> 赞同：-1
> 
> 时间：2012-05-17T08:51:45.487
> 
> 标签：php, html, forms, checkbox

> **可能重复：**
> [从复选框中检索值](https://stackoverflow.com/questions/1032456/retrieving-values-from-a-checkbox)

在以下脚本中，我只能返回复选框的最后一个选定值。如何返回其余值以进行验证。

HTML 表单

```
Qualification: <input type="checkbox" name="qual" value="10" /> 10th Std
<input type="checkbox" name="qual" value="12" /> 12th Std
<input type="checkbox" name="qual" value="grad" /> Graduation 
```

PHP 代码

```
 $qual = array();
 $qual = $_GET['qual'];

 print_r ($qual); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-17T08:55:02.793

试试这个。这可能会帮助你....

```
<input type="checkbox" name="qual[]" value="10" /> 10th Std
<input type="checkbox" name="qual[]" value="12" /> 12th Std
<input type="checkbox" name="qual[]" value="grad" /> Graduation 
```

PHP 编码：

```
$qualfication = $_GET['qual'];
print_r($qualfication); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:53:24.847

尝试将复选框输入的名称更改为`qual[]`，如下所示：

```
<input type="checkbox" name="qual[]" value="10" /> 10th Std
<input type="checkbox" name="qual[]" value="12" /> 12th Std
<input type="checkbox" name="qual[]" value="grad" /> Graduation 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T08:53:27.513

换成`name="qual"`_`name="qual[]"`

这会给你一个数组：

```
$qual = $_GET['qual'];
print_r($qual); 
```

# facebook - 为什么我的应用程序获得不同的 Facebook 访问令牌到期时间？

> ID：10632494
> 
> 赞同：1
> 
> 时间：2012-05-17T08:52:02.007
> 
> 标签：facebook, oauth, access-token

我有一个 Web 应用程序，它需要用户的 Facebook 权限，并在后台执行一些操作。对于大多数用户来说，这个应用程序可以通过 oAuth 过程获得一个有效期为 2 个月的访问令牌。但是今天我发现它只从少数人那里获得了一天的过期时间访问令牌。

由于应用程序仍在开发中，测试人员都是我的同事。因此，我检查了他们的 Facebook 权限设置，但没有发现会影响我从 oAuth 获得的过期时间的特定内容。那么，是否有任何可能的原因为什么有些人可以获得更长的到期时间，而另一些人只会获得更短的到期时间？

# php - 我可以将 mysql_real_escape_string 与 strip_tags 一起使用吗？

> ID：10632495
> 
> 赞同：2
> 
> 时间：2012-05-17T08:52:03.267
> 
> 标签：php, mysql-real-escape-string, strip-tags

抱歉，如果这是一个愚蠢的问题，但我目前有以下内容，它似乎可以在浏览器中工作，但 Dreamweaver 告诉我存在语法错误：

```
$formdescription = mysql_real_escape_string(strip_tags($_POST['form_description'])); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T08:56:09.773

是的，没关系 :) 忘记 Dreamweaver！

您还可以拆分上述内容：

```
$formdescription = $_POST['form_description'];
$formdescription = strip_tags($formdescription);
$formdescription = mysql_real_escape_string($formdescription); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T09:05:59.437

```
string mysql_real_escape_string ( string $unescaped_string [, resource $link_identifier = NULL ] ) 
```

该函数的操作取决于当前mysql连接的编码，必须传递第二个参数`[, resource $link_identifier = NULL ]`以避免DW中的警告。

# extjs - sencha 触摸图表工具提示显示

> ID：10632496
> 
> 赞同：1
> 
> 时间：2012-05-17T08:52:04.687
> 
> 标签：extjs, sencha-touch-2

我正在使用 Sencha 触摸甜甜圈图。现在我正在寻找甜甜圈图表部分中的工具提示显示。在互联网上搜索后，我发现 sencha 触摸图表中没有像我们在 EXTJS 中那样的工具提示库。

请让我知道我们是否可以在 sencha 触摸图表中使用 EXTJS 工具提示代码，如果不能，请帮助我提供一些链接，sencha 触摸图表工具提示的示例。

我在我的 sencha touch 甜甜圈图表 JS 中使用此代码，但这不起作用：

```
 var tip = Ext.create('Ext.tip.ToolTip', {
        target: 'donut-chart',
        html: '<font size="2" color="white"><span style="padding-left:2px"><B>Electronics &nbsp;&nbsp; $15.3m</B></span> <br><br> <span style="padding-left:2px">%Total &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;13%</span></font>',
        width: 150,
        height: 6,
        Border: 'false',
        bodyStyle: 'background-color: teal;',
        style: 'background-color: white;opacity: 0.5;'
     }); 
     tip.showAt(200, 100); 
```

请帮忙...

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:11:43.840

在[`Sencha Touch Pie Charts`](http://docs.sencha.com/touch-charts/1-0/#!/api/Ext.chart.series.Pie)中，有一个属性`donut`可以将*饼图*设置为*圆环图*。

默认值为`false`。您可以将此属性设置为`true`

```
donut: true, 
```

然后使用这样的`tips`属性`PieChart`，

```
tips: {
  trackMouse: true,
  width: 140,
  height: 28,
  renderer: function(storeItem, item) {
    this.setTitle(storeItem.get('name') + ': ' + storeItem.get('data1') + ' views');
  }
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T03:33:53.103

这是一个旧线程，但发布我的解决方案可能对某人有帮助。

我正在使用甜甜圈图，所以这个解决方案对我有用。我所做的是使用 HTML 中的 DIV 元素完成的自定义工具提示，并根据 PIE 的中心定位它。

一旦 DIV 准备好并设置样式，

在 下`Items:[]`，创建 piegrouping 并在`onSelectionChange`分组事件上重新定位工具提示，如下所示：

```
{
    type: 'piegrouping',
    onSelectionChange: function(me, items) {
        if (items.length) {
            if(items.length<2)
            {
                var tipX=items[0].middle.x - 35;
                var tipY=items[0].middle.y - 35;

                $('.tooltip').css('left', tipX + 'px');
                $('.tooltip').css('top', tipY + 'px');

                $('.tooltip h1').html(sum);
                $('.tooltip').fadeIn(500);
            } else {
                $('.tooltip').hide();
            }
        }
        else {
            $('.tooltip').hide();
        }
} 
```

# ipad - 在 ipad 上查看 sqlite 文件

> ID：10632497
> 
> 赞同：0
> 
> 时间：2012-05-17T08:52:05.080
> 
> 标签：ipad, sqlite

我开发了一个应用程序，它使用核心数据并在 ipad 上创建一个 sqlite 数据库。出于调试原因，我想访问 ipad 上的 sqlite 文件。

我知道 ipad 上的“fileURLwithPath”，但不知道如何到达那里。

在模拟器上这很容易，因为我可以使用 firefox sqlite 扩展名访问 mac 上的任何 sqlite 文件。

但是我怎样才能访问 ipad 文件呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T15:03:13.167

尝试使用它先将其复制到您的 mac：

[http://www.macroplant.com/iexplorer/](http://www.macroplant.com/iexplorer/)

# java - java.util.HashMap 实现中“2的幂”的意义

> ID：10632506
> 
> 赞同：7
> 
> 时间：2012-05-17T08:52:20.097
> 
> 标签：java, hashmap

> **可能重复：**
> [Java HashMap 默认初始容量](https://stackoverflow.com/questions/8352378/java-hashmap-default-initial-capacity)

我正在阅读 java.util.HashMap 中 HashMap 的实现。初始容量、最大容量等是 2 的幂。

***从 java.util.HashMap 复制的部分声明***

```
/**
 * The default initial capacity - MUST be a power of two.
 */
static final int DEFAULT_INITIAL_CAPACITY = 16;

 /**
 * The maximum capacity, used if a higher value is implicitly specified
 * by either of the constructors with arguments.
 * MUST be a power of two <= 1<<30.
 */
static final int MAXIMUM_CAPACITY = 1 << 30;

/**
 * The table, resized as necessary. Length MUST Always be a power of two.
 */
transient Entry[] table; 
```

评论表明尺寸必须是 2 的幂。为什么二的力量如此重要？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-17T08:55:49.043

使用 2 的幂可以简化实现并提高其性能。

例如，从它可以使用的哈希码中找到一个桶，`hash & (SIZE -1)`而不是`abs(hash) % SIZE`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:04:31.533

从理论上讲，只有当操作随着地图中元素数量的增加而变得可以忽略不计时，我们才能摊销扩展列表的成本。每次达到负载因子时将大小加倍是确保分摊条目扩展和重新加载的一种方法。

它最初是 2 的幂的原因是，当我们散列一个元素时，得到的整数（32 位）可以截断到前 k 位，其中 k 是对数 (N)，其中 N 是当前容量。

# ios5 - 从纵向切换到横向时，iPhone 和 iPad 上的页面放大

> ID：10632508
> 
> 赞同：0
> 
> 时间：2012-05-17T08:52:24.797
> 
> 标签：ios5, meta-tags

当我将 iPad 的方向从纵向模式更改为横向模式时，我的页面看起来被放大了。

目前我在我的网站中使用这个元标记 `<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0;">` 这允许我在 iPad 和 iPhone 上缩放我的网站，但在方向上存在缩放问题。

所以我尝试使用下面提到的元标记，在这里我没有遇到方向问题，但无法缩放我的网站。

```
<meta name="viewport" content="width=device-width, user-scalable=1.0, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0;"> 
```

我尝试了[链接](http://www.ternstyle.us/blog/reset-iphone-zoom-on-orientation-change-to-landscape)中提到的所有东西。没有什么对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T19:20:33.390

这是一个移动 Safari 错误。这是一个广为人知的问题，并已在 iOS 6 中得到纠正。使用您以前的元标记，您现在应该很好了。

[http://filamentgroup.com/examples/iosScaleBug/](http://filamentgroup.com/examples/iosScaleBug/)

另外，我强烈建议不要使用`maximum-scale=1.0`，特别是对于平板电脑。这不利于可访问性，而且坦率地说，这是一个令人讨厌的功能。

# c# - 如何在同一台 PC 上安装同一应用程序的两个版本？

> ID：10632513
> 
> 赞同：1
> 
> 时间：2012-05-17T08:52:42.510
> 
> 标签：c#

我有同一个应用程序的两个版本。我想将它们安装到同一台 PC 上。安装时出现错误：

> 该产品的另一个版本已安装。此版本的安装无法继续。要配置或删除本产品的现有版本，请使用控制面板上的添加/删除程序。

我可以在版本设置中做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:06:33.383

这个[MSDN 博客](http://blogs.msdn.com/b/pusu/archive/2009/06/10/understanding-msi.aspx)很好地解释了 UpgradeCode、ProductCode 和 PackageCodes 的用途。看起来您需要更改 UpgradeCode。

从上面的链接

> Windows 安装程序将使用 UpgradeCode 来确定该产品的先前版本是否已存在于系统中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:44:52.630

我不确定为什么需要在同一台 PC 上安装两个版本。

如果需要，您可以更改版本（请在下面找到截图，例如 2.7 => 2.8）。将会有一个弹出窗口要求您更改 ProductCode。如果您对对话框说“是”。VS 将为您更改您的产品代码。您可以安装更新的版本。

![在此处输入图像描述](../Images/c79657e756875a0e495262b794368c86.png)

# android - 当ListView中嵌入了ExpandableListView时如何调整ListView的高度

> ID：10632517
> 
> 赞同：4
> 
> 时间：2012-05-17T08:52:56.643
> 
> 标签：android, listview, expandablelistview

在一个活动中，有一个带有相关适配器的 ListView。此 ListView 中的每个项目都有一个 ExpandableListView，以及相关的适配器。

一开始ListView只有两个item，所有可展开的listview都没有展开。此时ListView的高度不大于屏幕的高度（假设屏幕的高度为800，ListView的高度为600，ListView下方有一个高度为200的空白区域）。![在此处输入图像描述](../Images/43b1f932b956ed6ca831da8243e5fd15.png)

然后我单击第一项中的可扩展列表视图，可扩展列表视图被展开。但是，ListView 的高度没有改变（空白区域仍然存在）。![在此处输入图像描述](../Images/3906a8f4410f1b1fb4c0cef6a21126ec.png)

是否有一种方法可以调整列表视图的高度，以便在我单击展开可扩展列表视图时可以删除空白区域？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T05:49:25.777

[http://www.java2s.com/Code/Android/UI/setListViewHeightBasedOnChildren.htm](http://www.java2s.com/Code/Android/UI/setListViewHeightBasedOnChildren.htm)

这帮助了我。您基本上必须跟踪布局高度。并在您和您的方法中使用`setLayoutParams()`和`requestLayout()`调整它。`onGroupExpand``onGroupCollapseListener`

# python - hashlib.sha256 在 python 中返回了一些奇怪的字符

> ID：10632520
> 
> 赞同：0
> 
> 时间：2012-05-17T08:53:19.390
> 
> 标签：python, encryption, sha, hmac

在javascript中，下面的代码返回

**eec097af19ad461ac825ccce57a012543da33c986e4607475e1fe5c6dc098d0a**

```
<script src="http://crypto-js.googlecode.com/svn/tags/3.0.1/build/rollups/hmac-sha512.js"></script>
<script>
   var hash = CryptoJS.HmacSHA256("Message", "Secret");
</script> 
```

在 python 中，相同的逻辑返回了一些奇怪的字符，例如 ����F�%��W�T=�<�nFG^��� �</p>

```
import hmac
import hashlib
import base64
hash = hmac.new('Secret', "Message", hashlib.sha256).digest() 
```

我认为他们应该返回相同的哈希，因为我对两者都使用了相同的算法。有什么建议么 ？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T08:58:25.760

试试 hexdigest()

```
import hmac
import hashlib
import base64
hash = hmac.new('Secret', "Message", hashlib.sha256).hexdigest() 
```

# javascript - 为给定的 object_id 获取和呈现集合的最佳方式

> ID：10632527
> 
> 赞同：1
> 
> 时间：2012-05-17T08:53:48.130
> 
> 标签：javascript, backbone.js, backbone-events, backbone-views

我正在尝试实现一个简单的应用程序，它能够获取给定的集合`object_id`。
从`GET response`服务器看起来像这样：

```
[
    {object_id: 1, text: "msg1"}, 
    {object_id: 1, text: "msg2"}, 
    {object_id: 1, text: "msg3"},
    .......
] 
```

我的目标是：
**当用户选择一个`object_id`**.

我的代码的起点如下：

```
this.options = {object_id: 1};
myView = new NeView(_.extend( {el:this.$("#myView")} , this.options)); 
```

我的问题是：
*** 最好的方法是什么：1
) 设置2 ) 触发MyCollection 然后 3) 触发?*中的函数`object_id value``MyModel`
`fetch`
`render``myView`**或激活我的目标？

* * *

PS：

我的基本代码如下所示：

```
// My View
define([
    "js/collections/myCollection",
    "js/models/myFeed"
], function (myCollection, MyModel) {
    var MyView = Backbone.View.extend({

        initialize: function () {

            var myModel = new MyModel();

            _.bindAll(this, "render");

            myModel.set({
                object_id: this.options.object_id
            }); // here I get an error: Uncaught TypeError: Object function (){a.apply(this,arguments)} has no method 'set'
        }
    });

    return MyView;
}); 
```

* * *

```
// MyCollection
define([
    "js/models/myModel"
], function (MyModel) {

    var MyCollection = Backbone.Collection.extend({

        url: function () {
            return "http://localhost/movies/" + myModel.get("object_id");
        }
    });

    return new MyCollection
}); 
```

* * *

```
//MyModel
define([
], function () {

    var MyModel = Backbone.Model.extend({
    });

    return MyModel
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T09:21:29.540

您对 Backbone 内部结构的基本理解即使不是根本上的问题，也有一些问题。

首先，定义您的默认模型 idAttribute，这是标识您在集合中查找模型的键

```
//MyModel
define([
], function () {

    var MyModel = Backbone.MyModel.extend({
        idAttribute: 'object_id'
    });

    return MyModel
}); 
```

在您的收藏中，无需以您定义的方式定义您的 URL，您需要更改两件事，首先是为您的收藏定义默认模型，其次是坚持使用您的基本 url收藏

```
// MyCollection
define([
    "js/models/myModel"
], function (MyModel) {

    var MyCollection = Backbone.MyCollection.extend({
        model: MyModel, // add this
        url: function () {
            return "http://localhost/movies
        }
    });

    return MyCollection // don't create a new collection, just return the object
}); 
```

然后你的观点可能是这样的，但当然不限于这种实施方式

```
// My View
define([
    "js/collections/myCollection",
    "js/models/myFeed"
], function (MyCollection, MyModel) {
    var MyView = Backbone.View.extend({

        tagName: 'ul',

        initialize: function () {
            this.collection = new MyCollection();
            this.collection.on('add', this.onAddOne, this);
            this.collection.on('reset', this.onAddAll, this);
        },

        onAddAll: function (collection, options)
        {
            collection.each(function (model, index) {
                that.onAddOne(model, collection);
            });
        },

        onAddOne: function (model, collection, options)
        {
            // render out an individual model here, either using another Backbone view or plain text
            this.$el.append('<li>' + model.get('text') + '</li>');
        }

    });

    return MyView;
}); 
```

**放轻松，一步一步走**

我强烈建议仔细查看 Backbone.js github wiki 上详尽的教程列表：[https](https://github.com/documentcloud/backbone/wiki/Tutorials%2C-blog-posts-and-example-sites) ://github.com/documentcloud/backbone/wiki/Tutorials%2C-blog-posts-and-example-sites 。 .. 在添加 require.js 的额外复杂性之前尝试了解 Backbone 的基础知识

# sql-server - 在 SQL 存储过程中将表的一个值传递给另一个表

> ID：10632528
> 
> 赞同：0
> 
> 时间：2012-05-17T08:53:48.507
> 
> 标签：sql-server, stored-procedures

我从用户那里获取了这些变量

```
@KullaniciAdi nvarchar(30),
@KullaniciSoyadi nvarchar(30),
@KullaniciMailAdresi nvarchar(max),
@KullaniciTelNo tinyint,
@KullaniciSehir nvarchar(30) 
```

但我的桌子想让我`KullaniciSehirID`从另一张`Sehir`桌子上拿。

所以我宣布

```
declare @KullaniciSehirID int 
```

这个变量，我想通过这个

```
Select Sehir.SehirID 
FROM Sehir 
WHERE Sehir.SehirAdi = @KullaniciSehir 
```

选择返回到我的变量，但我做不到。

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:05:47.487

```
Select @KullaniciSehirID = SehirID FROM Sehir WHERE Sehir.SehirAdi=@KullaniciSehir 
```

@KullaniciSehirID 将包含正确的值，您可以在其余查询中使用它

# iphone - 让精灵平滑地跟踪接触点

> ID：10632529
> 
> 赞同：0
> 
> 时间：2012-05-17T08:53:49.887
> 
> 标签：iphone, ios, xcode, cocos2d-iphone

我正在尝试制作我的精灵脸并在它移动时跟随一个接触点，到目前为止我已经成功了。基本上，每当用户触摸屏幕时，我的精灵都会旋转以面向触摸点，并朝它移动。这是我的基本代码：

```
-(void)handlePan:(UIPanGestureRecognizer *)recognizer{

    //calculate tapPosition + angle, then rotate the sprite and move it to the tapPosition:

    [fish runAction:[CCRotateTo actionWithDuration:0 angle:angle]];
    [fish runAction:[CCMoveTo actionWithDuration:0.8 position:tapPosition]];
} 
```

现在的问题是，因为这是在 a 中`UIPanGesture`，所以只要手指触摸屏幕，此方法就会不断运行。这实际上使旋转和移动非常不稳定，因为以前的动作总是被新的动作覆盖。

它不光滑和流畅。我怎样才能使它顺利？我是否需要以某种方式延迟我的一些行动或什么？任何想法表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:38:23.640

当你需要不断地改变方向和运动时，不要使用动作。动作对此不利，甚至可能导致您的对象在每帧停止/运行新动作时根本不移动。

相反，您必须逐帧计算对象的速度并将该速度添加到位置。您还可以根据速度计算角度（方向也称为旋转）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:33:22.397

使用 CCSequence 并在 CCSequence 对象中添加这 2 个动画。并在您的 Sprite 中添加此 CCSequence 动画。

我希望这项工作对你有好处。

# objective-c - beginSheetModalForWindow 的 NSAlert 错误

> ID：10632530
> 
> 赞同：1
> 
> 时间：2012-05-17T08:53:52.193
> 
> 标签：objective-c

摘要：当该方法`beginSheetModalForWindow:modalDelegate:didEndSelector:contextInfo`为*contextInfo*提供一个 NSArray 或 NSDictionary 的对象时，它实际上将成为指向内存中任何位置的任意指针。什么是正确的解决方案？

下图说明了问题：

```
- (IBAction)testbutton:(id)sender {
    NSAlert *alert = [[NSAlert alloc] init];
    [alert beginSheetModalForWindow:theWindow
                      modalDelegate:self 
                      idEndSelector:@selector(alertDidEnd:returnCode:contextInfo:) 
                        contextInfo:[NSArray arrayWithObject:@"bla bla"]]; 
```

}

```
- (void) alertDidEnd:(NSAlert *)alert 
          returnCode:(NSInteger)returnCode 
         contextInfo:(NSArray *)contextInfo {
    NSLog(@"contextInfo: %@", contextInfo); 
```

}

NSLog 将输出内存中的任意内容，包括指针为空时的崩溃。但是，如果 contextInfo 是更简单的东西，例如 NSString、NSNumber，甚至是 NSTextField 之类的出口，它就可以正常工作。此外，如果我提供一个 NSArray 或 NSDictionary 的实例变量，那么它就可以工作。

在 Apple 的文档中，*contextInfo*被声明为 (void *)，因此它可以是任何东西（甚至是任意指针）。但是因为我知道这个类，所以在这个例子中我将它声明为 NSArray。然而，问题并不取决于我声明的 contextInfo 是什么。

当我有垃圾收集时，Lion 中会出现问题。

在消息[Using NSAlert beginSheetModalForWindow with contextInfo](https://stackoverflow.com/q/6855573/1268345) 'noa' 中说“*如果您正在使用垃圾收集，请存储在实例变量中 - 任何地方都无所谓 - 所以它不会在运行循环结束时释放。你需要坚持直到 didEndSelector 可以对其采取行动*。”

这是一个很好的解决方法，但它很奇怪，而且很丑陋。没有更优雅的解决方案吗？

这种行为真的是苹果想要的吗？还是一个明显的错误？NSString 和 NSNumber 等简单对象可以，但 NSArray 不行。如果它真的不是一个错误，是否应该指定 contextInfo 的限制，并且不应该准确指定何时以及如何以某种方式显式保留它？*或者除非contextInfo*是一个实例变量，否则 GC 是否根本不会用这种方法保证任何事情？

# c# - IXamlType 接口实现 - 奇怪的行为

> ID：10632535
> 
> 赞同：1
> 
> 时间：2012-05-17T08:54:01.350
> 
> 标签：c#, .net, windows-8, windows-runtime, winrt-xaml

IXamlType**接口**定义如下：

```
[Guid(0x7920eab1, 0xa2e5, 0x479a, 0xbd, 80, 0x6c, 0xef, 60, 11, 0x49, 0x70), Version(0x6020000), WebHostHidden]
public interface IXamlType
{
    // Methods
    object ActivateInstance();
    void AddToMap([In] object instance, [In] object key, [In] object value);
    void AddToVector([In] object instance, [In] object value);
    object CreateFromString([In] string value);
    IXamlMember GetMember([In] string name);
    void RunInitializer();

    // Properties
    IXamlType BaseType { get; }
    IXamlMember ContentProperty { get; }
    string FullName { get; }
    bool IsArray { get; }
    bool IsBindable { get; }
    bool IsCollection { get; }
    bool IsConstructible { get; }
    bool IsDictionary { get; }
    bool IsMarkupExtension { get; }
    IXamlType ItemType { get; }
    IXamlType KeyType { get; }
    TypeName UnderlyingType { get; }
} 
```

编译 Metro 应用程序时，会生成一个**XamlTypeInfo.g.cs**，其中包含此接口的实现，如下所示：

```
[System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.Windows.UI.Xaml.Build.Tasks", "4.0.0.0")]    
[System.Diagnostics.DebuggerNonUserCodeAttribute()]
internal class XamlSystemBaseType : IXamlType
{
    string _fullName;
    Type _underlyingType;

    public XamlSystemBaseType(string fullName, Type underlyingType)
    {
        _fullName = fullName;
        _underlyingType = underlyingType;
    }

    public string FullName { get { return _fullName; } }

    public Type UnderlyingType
    {
        get
        {
            return _underlyingType;
        }
    }

    virtual public IXamlType BaseType { get { throw new NotImplementedException(); } }
    virtual public IXamlMember ContentProperty { get { throw new NotImplementedException(); } }
    virtual public IXamlMember GetMember(string name) { throw new NotImplementedException(); }
    virtual public bool IsArray { get { throw new NotImplementedException(); } }
    virtual public bool IsCollection { get { throw new NotImplementedException(); } }
    virtual public bool IsConstructible { get { throw new NotImplementedException(); } }
    virtual public bool IsDictionary { get { throw new NotImplementedException(); } }
    virtual public bool IsMarkupExtension { get { throw new NotImplementedException(); } }
    virtual public bool IsBindable { get { throw new NotImplementedException(); } }
    virtual public IXamlType ItemType { get { throw new NotImplementedException(); } }
    virtual public IXamlType KeyType { get { throw new NotImplementedException(); } }
    virtual public object ActivateInstance() { throw new NotImplementedException(); }
    virtual public void AddToMap(object instance, object key, object item)  { throw new NotImplementedException(); }
    virtual public void AddToVector(object instance, object item)  { throw new NotImplementedException(); }
    virtual public void RunInitializer()   { throw new NotImplementedException(); }
    virtual public object CreateFromString(String input)   { throw new NotImplementedException(); }
} 
```

* * *

奇怪的是，一些接口实现并不一致。如果您尝试在独立的 VS 项目中编译此实现，则会按预期给出以下错误：

**错误 CS0738：“ConsoleApplication28.XamlSystemBaseType”未实现接口成员“ConsoleApplication28.IXamlType.UnderlyingType”。“ConsoleApplication28.XamlSystemBaseType.UnderlyingType”无法实现“ConsoleApplication28.IXamlType.UnderlyingType”，因为它没有“ConsoleApplication28.TypeName”的匹配返回类型。**

* * *

我的问题是 .g.cs 是如何编译的——我通过在 Reflector 中打开编译的程序集来确认——它还显示了相同的实现，其中某些属性/方法的签名类型不匹配。

**更新：**

为了确认我所看到的，我使用了 Reflector 并看到了以下内容：

IXamlType.UnderlyingType（来自程序集 Windows，Version=255.255.255.255）定义为：

```
TypeName UnderlyingType { get; } 
```

在任何 Metro 应用程序中找到的 XamlSystemBaseType 将 UnderlyingType 定义为：

```
 public Type UnderlyingType { get; } 
```

鉴于上述情况，我不明白它是如何工作的！

**更新#2**

好的 - 当您在 Reflector 中打开 Windows.winmd 文件时，您会看到：

```
TypeName UnderlyingType { get; } 
```

但是，如果您在 Visual Studio 中执行以下操作：

将光标放在以下行的**IXamlType**上：

内部类 XamlSystemBaseType：IXamlType

然后**按F12，**打开的自动生成的定义文件有：

```
 public Type UnderlyingType { get; } 
```

所以在我不知道的场景下肯定发生了一些事情！

什么（如果？？）某些类型自动映射到其他类型的文档以及与此相对应的规则/属性将有很大帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T16:03:45.677

您的问题似乎是您找到的接口定义将 UnderlyingType 属性声明为

```
TypeName UnderlyingType { get; } 
```

虽然生成的基本实现将其定义为：

```
public Type UnderlyingType ... 
```

好吧，我在 VS 中打开 XamlTypeInfo.g.cs 并导航到 IXamlType 接口的定义，它实际上将其定义为

```
Type UnderlyingType { get; } 
```

似乎您找到的接口定义无效。查看[UnderlyingType](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.markup.ixamltype.underlyingtype.aspx)属性的文档，它说该属性的类型是 C# 中的 Type，但 C++ 中的 TypeName - 这可能是您的差异的来源。

更大的问题是 - 你为什么要尝试在控制台应用程序中编译它？控制台应用程序不使用 WinRT。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T09:12:20.947

似乎这是因为所谓的“投影类型”而发生的，但是我无法找到任何正式的文档。我在这里开始了另一个问题：

[WinRT 投影类型文档](https://stackoverflow.com/questions/10679515/winrt-projected-types-documentation)

# asp.net-mvc - MVC 3 - _Layout.cshtml。向网站添加徽标

> ID：10632544
> 
> 赞同：7
> 
> 时间：2012-05-17T08:54:40.400
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我是 MVC 3 的新手，我正在尝试将图像添加到 _Layout.cshtml 文件中。我试过了

```
<img runat="server" id="img_logo" alt="Logo" src="Content/Images/mailworks.png" /> 
```

没有成功。徽标仅出现在某些视图上。由于某种原因，在其他视图上，图像应该位于其他位置 - 使用萤火虫找到它。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-17T09:03:04.600

Try this:

```
<img id="img_logo" alt="Logo" src="@Url.Content("~/Content/Images/mailworks.png")" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T09:07:05.090

用这个：

```
<img src="@Url.Content("~/Content/Images/mailworks.png")"... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-03-04T18:58:33.817

我找到了另一个快速解决方案：只需在 src 路径的开头附加“/”即可。

# android - Libgdx - Hiero 工具创建镜像字体

> ID：10632545
> 
> 赞同：1
> 
> 时间：2012-05-17T08:54:45.137
> 
> 标签：android, libgdx

我尝试使用 Hiero 工具 ( v2.0 ) 为我的 Android - libgdx 游戏构建字体，但它总是产生镜像字体:((。你能帮我吗？

PS：我在win7上运行Hiero v 2.0，当我关闭它时，它总是以“无响应程序”错误结束:)。

![在此处输入图像描述](../Images/a330689a67cb60b48d47c4e6319b6d14.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:43:14.903

看起来这是众所周知的错误[http://cocos2d-central.com/topic/259-problem-with-hiero-font-creator/](http://cocos2d-central.com/topic/259-problem-with-hiero-font-creator/)

尝试使用像 Gimp 这样的图像编辑软件水平翻转图像

# java - 在 SWT 中包装 List 的内容

> ID：10632546
> 
> 赞同：1
> 
> 时间：2012-05-17T08:54:56.177
> 
> 标签：java, eclipse-plugin

我创建了固定大小`List`。如果列表中的一项大于其自身的列表大小，则应将该项换成多行。

`SWT.WRAP`不能使用，因为它只支持`Label`和`Text`控制。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-21T17:52:42.587

对于 List 的项目自定义，您需要创建自己的小部件。

检查例如[http://www.snip2code.com/Snippet/11489/Custom-SWT-List-Box](http://www.snip2code.com/Snippet/11489/Custom-SWT-List-Box)

通过这种方式，您将完全控制不同项目的渲染

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:55:37.217

如果您想在列表中的每个项目的标签中有多行，那么您可以使用表格。有关相关代码，请参见 SWT 片段“[在一个表项中绘制多行](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet231.java)”。

坏消息是所有物品必须具有相同的高度......

# c# - 在 2 个单独的实体集合中查找公共实体

> ID：10632547
> 
> 赞同：1
> 
> 时间：2012-05-17T08:54:59.360
> 
> 标签：c#, linq, collections, entities

我有两个集合，客户和电子邮件。Customer 有一个 Customer.Email 字段，Email 实体有一个 Email.From 字段。我需要从电子邮件集合中获取 Customer.Email 等于 Email.From 的所有实体，但我需要它来返回电子邮件实体而不仅仅是 Email.From 字段。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:00:52.683

```
List<Email> result =  emails.Where(p => customers.Any(q => q.Email == p.From)).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T08:58:39.593

这将影响效率，因为对于电子邮件中的每个条目，它必须匹配 Customer 中的每个条目，直到找到正确的条目。

仍然

```
var results = Emails.Where(e => e.From == customers.Select (c => c.Email)); 
```

**或者**

```
var results = Emails.Where(e => Customers.Any(c => c.Email == e.From)); 
```

# asp.net-mvc - 跨域使用 Forms 身份验证

> ID：10632551
> 
> 赞同：6
> 
> 时间：2012-05-17T08:55:18.413
> 
> 标签：asp.net-mvc, asp.net-web-api, cross-domain, forms-authentication

这是我们的问题。我们已经构建了一个**MVC Web-api**，它使用带有 cookie 的**表单身份验证**来处理会话。当我们在与 web-api 相同的域（localhost 或 web-server）上使用前端网页时，一切正常。（我们使用 JQuery $.get 和 $.post 与 web-api 进行通信）。

虽然前端在未来应该是一个独立的 html5 应用程序，但与 web-api 不在同一个域中。不幸的是，这不起作用。

web-api 确实向客户端返回了一个身份验证 cookie，但是当前端发送它的请求时，cookie 并没有被带回 web-api。当 web-api 和前端在同一个域中时，cookie 会自动随请求一起发送。

我们尝试在 web-api webconfig 文件中设置“Access-Control-Allow-Origin: *”和“Access-Control-Allow-Authentication: true”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T09:31:40.990

您需要的是单点登录 (SSO) 功能。

浏览器只会 cookie 到同一个域，这就是为什么当应用程序位于不同域时它无法工作的原因。

CodeProject 中有一篇关于在 ASP.NET 中实现 SSO 的好文章 - [http://www.codeproject.com/Articles/106439/Single-Sign-On-SSO-for-cross-domain-ASP-NET-applic](http://www.codeproject.com/Articles/106439/Single-Sign-On-SSO-for-cross-domain-ASP-NET-applic)它适用于ASP.Net MVC 也是。

# android - 为什么 Dismiss keyguard 在三星 Galaxy 选项卡中不起作用？

> ID：10632553
> 
> 赞同：1
> 
> 时间：2012-05-17T08:55:21.593
> 
> 标签：android, keyguard, keyguardlock

我有一个应用程序，它会在服务器上发出任何警报时通知用户，所以当警报响起时，应用程序会播放哔声并打开活动，即使设备处于睡眠模式，它也会唤醒关闭键盘保护并用哔声显示活动声音。此功能在其他选项卡中运行良好，但在三星 Galaxy 选项卡中，它不会关闭键盘锁。蜂鸣声响起，当您手动释放设备的键盘锁时，您可以看到警报生成时必须显示的活动。

我正在使用下面的代码来解除活动的 onCreate 方法中的键盘保护：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON);
getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD); 
```

不知道为什么这段代码在三星 Galaxy 选项卡中不起作用。谁能给我一些线索？问候， 皮克斯

# wpf - 使用 Viewbox 调整我的 wpf 窗口的纵横比

> ID：10632564
> 
> 赞同：0
> 
> 时间：2012-05-17T08:55:56.717
> 
> 标签：wpf, xaml, viewbox

我想使用 viewbox 来维护我的 wpf 窗口的纵横比。即，如果我将我的应用程序放在大显示器上，它应该自动适应该屏幕，如果在我的笔记本电脑上运行它，它应该适应它的屏幕。请帮我解决这个问题。它应该完全使用视图框在 xaml wpf 上完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:16:44.117

视图框有什么问题？只需将视图框包裹在您的根视图[Stretch](http://msdn.microsoft.com/ru-ru/library/system.windows.media.stretch.aspx)属性为您喜欢的一个。如果您想要不同的缩放比例，您需要编写自己的视图框实现。

例子：

```
<Window x:Class="stackoverflowviewbox.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Viewbox Stretch="Uniform">
    <Grid>
        <Label>
            Hello world.Hello world.Hello world.Hello world.Hello world.Hello world.
        </Label>
    </Grid>
</Viewbox> 
```

但是可以编写 xaml，以便在没有 viewbox 的情况下，视图在不同的分辨率下看起来不错，没有任何问题。

# php - 在codeigniter 2.1中处理控制器类中的段

> ID：10632565
> 
> 赞同：0
> 
> 时间：2012-05-17T08:56:02.067
> 
> 标签：php, codeigniter-2

我被困在codeigniter中，因为它对我来说是新的，我的**登录表单**
有问题。

 **我在行动中给出了 url，`action="blog/login/getLog"`我
的登录表单显示在 url 中，比如`blog/login`

我知道在控制器类中我只是创建了一个类似名称的函数，`login`但我创建了这样的控制器文件：

```
class Blog extends CI_Controller{
function __construct(){
    parent::__construct();
}

// Now See
function _remap( $method ){
    $this->load->view('header');

    switch( $method ){
        case 'about':
            $this->load->view('about');
            break;
        case 'login':
            $this->load->view('login');
            break;
        case 'services':
            $this->load->view('service');
            break;
    }

    $this->load->view('footer');
}
}//Close Class 
```

但现在不知道如何处理`login`和`login/getLog`.

**编辑：**究竟发生了什么，当我点击登录按钮时，我只看到登录表单`_remap()`和 url `blog/login`，当我提交表单和 url 看起来像`blog/login/getLog`时，登录表单仍在寻找，但我想重定向它成功..或者`getLog`如果可能的话，如果可能的话想检测段`case 'login':`。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:13:43.203

如果您通过 URL 发送，只需使用 uri 类：

```
$var = $this->uri->segment(3); 
```

如果您以表格形式发送，请通过表格发送变量。也许是一个隐藏的领域？

```
$var = $this->input->post('var_name'); 
```

**编辑**：我不太清楚你为什么使用 _remap 来进行这个没有路由到另一个函数的操作（你只是想调用一个视图文件）

这就是我希望看到登录表单的方式：

```
<?php echo form_open('blog/login');?>
<input type="hidden" name="getLog" value"true" />
<input type="submit" value="Login" />
</form> 
```

然后在你的博客类中我宁愿放一个函数

```
public function login() {
    if($this->input->post('getLog') === "true") {
        //the form was submitted, let's check the login?
    }
    else {
        //probably don't need an else, but form isn't submitted
    }
} 
```

**编辑2：**

万一有混淆，你真的想使用重映射。您也可以这样做以获取变量。

```
function _remap( $method ) {
  if ($method == ‘something’) {
     $this->something();
  } 
  else {
      $this->somethingelse();
  }
}

function something() {
  $var1 = $this->uri->segment(3);
  $var2 = $this->input->post('some_variable_name');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:28:55.073

```
class Blog extends CI_Controller{
function __construct(){
    parent::__construct();
}

// Now See
function _remap( $method ){

    switch( $method ){
        case 'about':
            $this->about(); <---------- here method (Add header, content, footer inside respective functions)
            break;
        case 'login':
            $this->login(); <------- here too
            break;
        case 'services':
            $this->service(); <----- here too
            break;
    }

}
}//Close Class 
```

您在这里所做的是，您通过`_remap`函数覆盖了 URI 的默认行为。

> 被覆盖的函数调用（通常是 URI 的第二段）将作为参数传递给 _remap() 函数：

简单地说，在大多数情况下，第 2 段将成为`_remap`函数中的 $method。

所以你的表单动作会变成。

```
action = "<?php echo base_url('blog/login');?>" 
```

`index.php`如果您没有通过 htaccess 从您的 url 中删除 index.php，请添加。

* * *

**编辑：**

根据你的问题，

> 但现在不知道如何处理 login 和 login/getLog 这样的段。

这就是你的处理方式。

方法名称之后的任何额外段都作为可选的第二个参数传递给 _remap()。

```
public function _remap($method, $params = array())
{
   // all other segments will be in $paramas array
} 
```**

# jsp - 从其他浏览器选项卡自动注销

> ID：10632566
> 
> 赞同：0
> 
> 时间：2012-05-17T08:56:09.483
> 
> 标签：jsp, servlets

我正在尝试在 JSP-Servlets 中开发一项功能，当用户从同一浏览器的其他选项卡注销时，我需要在该功能中注销用户。

如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T08:59:30.253

通常，如果浏览器打开一个新选项卡，它会共享相同的会话。因此，如果会话无效，它将自动从另一个选项卡中注销用户。

我希望你有一个安全过滤器来检查用户会话是否仍然有效。如果用户会话无效，则重定向到登录屏幕。

# php - 在magento中在哪里更改订单状态消息？

> ID：10632568
> 
> 赞同：2
> 
> 时间：2012-05-17T08:56:17.760
> 
> 标签：php, magento

我想将 magento 中的订单状态消息（如待处理、处理和完成）更改为我的自定义消息。有人可以建议我怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T14:02:58.747

您可以直接从管理员更改订单状态标签只需进入管理系统选择订单状态并从此处更改订单状态

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:47:10.517

有一个`sales_order_status`包含订单状态标签的数据库表。您可以使用翻译系统修改这些。

在主题的语言环境目录中创建一个`translate.csv`CSV。[例子](http://developer.practicalecommerce.com/articles/1442-Tutorial-Use-Magento-s-Translation-CSV-File-to-Change-Site-Labels)

然后为要更改的每个标签创建一行。

因此，如果您想将“已取消”更改为“已取消订单”，您将在 CSV 中创建一个如下所示的行

```
"Cancelled", "Order Cancelled" 
```

第一项是要匹配的字符串，第二项是替换字符串。

我建议使用这种方法，而不是更改数据库中的字符串，因为它更便携，并且可以防止任何与数据库混淆的意外副作用。

# php - 如何在PHP中获取类的任何方法的输入参数？

> ID：10632576
> 
> 赞同：2
> 
> 时间：2012-05-17T08:56:47.947
> 
> 标签：php, class, methods, parameters

假设我有一个包含 10 个方法的类，每个方法都有不同的参数。

我想记录所述类的所有方法的输入参数，而不必编辑每个方法来插入该记录代码。有没有办法做到这一点 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T09:06:42.030

只需用魔法装饰器包裹它`__call` [http://ideone.com/n9ZUD](http://ideone.com/n9ZUD)

```
class TargetClass
{
    public function A($a, $b) {}
    public function B($c, $d) {}
    public function C($e, $f) {}
}

class LoggingDecorator
{
    private $_target;

    public function __construct($target)
    {
        $this->_target = $target;
    }

    public function __call($name, $params)
    {
        $this->_log($name, $params);

        return call_user_func_array(array($this->_target, $name), $params);
    }

    private function _log($name, $params)
    {
        echo $name . ' has been called with params: ' . implode(', ', $params) . '<br>';
    }
}

$target = new TargetClass();
$logger = new LoggingDecorator($target);

$logger->A(1, 2);
$logger->A(3, 4); 
```

这种方法的唯一缺点是您将丢失装饰类的类型，例如，您将无法用它来满足类型提示。如果这是一个问题，提炼 TargetClass 的接口并在 LoggingDecorator 中实现它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T09:01:47.243

不直接，不。

您可以将所有方法重命名为具有下划线后缀，例如：

```
myFunction() -> _myFunction() 
```

然后，编写添加魔术[`__call()`](http://sg.php.net/manual/en/language.oop5.overloading.php#object.call)方法来拦截对先前（无前缀）方法的调用。然后，您将记录请求并将所有参数传递给原始方法。

这有点难看，仍然需要更改所有方法名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T09:01:41.487

我可能过度简化了这一点 - 但您可以使用检索函数的所有参数

```
func_get_args(); 
```

> 返回一个包含函数参数列表的数组
> [http://www.php.net/manual/en/function.func-get-args.php](http://www.php.net/manual/en/function.func-get-args.php)

```
<?php
  function foo() {
    $args = func_get_args();
    var_export($args);
  }
  foo('arg1', 'arg1');
?> 
```

那会输出这样的东西 -

```
array (
  0 => 'arg1',
  1 => 'arg2',
) 
```

* * *

这里要添加一些注释-您应该阅读我提供的文档链接-一个“限制”是-

> **注意：**
> 此函数仅返回传递参数的副本，不考虑默认（未传递）参数。

# objective-c - iPhone - 唤醒我的应用程序窗口

> ID：10632578
> 
> 赞同：-1
> 
> 时间：2012-05-17T08:56:58.257
> 
> 标签：objective-c, ios5

我的应用程序在后台运行。收到一些信息后，我需要将其唤醒 - 调出显示屏。怎么做？

谢谢，那鸿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:10:02.200

一些解决方案：

1）您可以发送推送通知。用户只需滑动，您的应用程序就会打开

2) 如果您的 iOS 设备越狱，那么在 Cydia 中存在一个 Veency 应用程序。也许[他](http://www.simonblog.com/2008/10/19/how-to-use-veency-to-remote-control-your-iphone/)会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:07:45.900

我会在这里查看更多本地“预定”通知或“推送通知”。 [http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)

Urban Airship [http://urbanairship.com/](http://urbanairship.com/)我认为为推送通知提供免费服务，但应该可以正常工作。或者 Parse.com 会做类似的事情，如果你不想推出自己的推送通知服务器。如果您获得一百万次下载，您将获得现金，您不必担心每月几百美元。

# c# - 不实现接口成员（C#）

> ID：10632585
> 
> 赞同：-1
> 
> 时间：2012-05-17T08:57:30.877
> 
> 标签：c#

> “StringToVisibilityConverter”未实现接口成员“System.Windows.Data.IValueConverter.Convert(object, System.Type, object, System.Globalization.CultureInfo)”

知道这有什么问题吗？据我所知，我的进口是正确的

```
public class StringToVisibilityConverter : IValueConverter
{
    public object Convert(object value, Type targetType, 
                          object parameter, CultureInfo culture)
    {
        if (value != null && value is string)
        {
            var input = (string)value;
            if (string.IsNullOrEmpty("Name"))
            {
                return Visibility.Collapsed;
            }
            else
            {
                return Visibility.Visible;
            }
        }

        return Visibility.Visible;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:00:42.873

您还需要实现 ConvertBack 方法。[值转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)

```
public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
{
 //Your code goes here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:02:03.530

从文档[http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)我看到必须实现和 ConvertBack。

如果类 CultureInfo 不是来自 System.Globalization.CultureInfo 并且是自定义类，则可能会出现此问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T09:03:17.350

是的，你在继承 IValueConverter 时也需要有这个方法：

```
public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture) 
```

# mysql - 无法删除外键

> ID：10632587
> 
> 赞同：26
> 
> 时间：2012-05-17T08:57:39.570
> 
> 标签：mysql, foreign-keys, foreign-key-relationship, mysql-error-1025

我想在我的表中删除外键但进入此错误消息

```
mysql> alter table customers drop foreign key customerid;
ERROR 1025 (HY000): Error on rename of '.\products\customers' to '.\products\#sql2-7ec-a3' (errno: 152)
mysql> 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-02-04T21:18:46.193

The solution described [here by Chris White](http://lists.mysql.com/mysql/204199) worked for me.

The root problem is that MySQL creates both an index and a foreign key. Both must be removed (the foreign key first contrary to what Chris said).

1.  show create table table_name;

    ```
    SHOW CREATE TABLE `table_name`:

    | table_name | CREATE TABLE `table_name` (
      `id` int(20) unsigned NOT NULL auto_increment,
      `key_column` smallint(5) unsigned default '1',
      KEY `column_tablein_26440ee6` (`key_column`),  <--- shows key name
      CONSTRAINT `table_name_ibfk_1` FOREIGN KEY (`key_column`) REFERENCES <--- shows foreign key constraint name
    `second_table` (`id`) ON DELETE SET NULL
    ) ENGINE=InnoDB DEFAULT CHARSET=utf8 | 
    ```

2.  Delete the foreign key constraint:

    ```
    ALTER TABLE table_name DROP FOREIGN KEY `table_name_ibfk_1`; 
    ```

3.  Delete the key

    ```
    ALTER TABLE table_name DROP KEY `column_tablein_26440ee6`; 
    ```

That did it for me.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-17T09:04:32.980

它看起来像 MySQL 的错误消息中的一个错误。( [http://bugs.mysql.com/bug.php?id=10333](http://bugs.mysql.com/bug.php?id=10333) )

使用 SHOW CREATE TABLE`table_name`查看外键的*实际名称*。生成外键名称拼写错误的查询时，看起来可能是 mysql 查询浏览器问题。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-17T09:34:36.990

为避免在尝试删除外键时出现此错误，请使用约束名称而不是外键的列名。

当我尝试

```
mysql> ALTER TABLE mytable DROP PRIMARY KEY; 
```

我得到了错误

```
ERROR 1025 (HY000): Error on rename of '.\database\#sql-454_3' to '.\database\mytable' (errno: 150). 
```

我使用以下方法解决了它：

```
mysql> ALTER TABLE mytable DROP PRIMARY KEY, ADD PRIMARY KEY (column1,column2,column3); 
```

一些对您有帮助的链接。

[链接 1](http://www.xaprb.com/blog/2006/08/22/mysqls-error-1025-explained/)

[link 2](http://dev.mysql.com/doc/refman/5.0/en/innodb-error-codes.html) [look for Posted by Alex Blume on November 7 2008 5:09pm & Posted by Hector Delgadillo on January 21 2011 4:57am]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T09:02:54.930

为避免在尝试删除外键时出现此错误，请使用约束名称而不是外键的列名称

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-07T05:20:29.900

You should try with the foreign key name as Fahim Parkar suggested. Actually that does not work always either.

In my case I used the

```
FOREIGN KEY `fk`(`col1`) REFERENCES `table2`(`col1`) 
```

code to add the fk by creation.

The problem with this code that it is not valid and should throw some kind of syntax error, but still it added a foreign key with a random name.

When I added the fk with the right syntax:

```
CONSTRAINT `fk` FOREIGN KEY (`col1`) REFERENCES `table2`(`col1`) 
```

the following code dropped it properly:

```
ALTER TABLE `table1` DROP FOREIGN KEY `fk` 
```

So this kind of error can happen too if you try to remove a foreign key with an invalid name. It is important to view the table properties with

```
SHOW CREATE TABLE `table1` 
```

and check the foreign key names if you get this kind of errors.

# javascript - 将价值 10 mb 的数据发送到客户端网格的最佳方式是什么？

> ID：10632588
> 
> 赞同：1
> 
> 时间：2012-05-17T08:57:39.883
> 
> 标签：javascript, asp.net-mvc-3, jqgrid-asp.net

我有一个 JqGrid，我需要将大约 10Mb 的数据作为 json 发送给它以填充网格。我将 Json 作为内容结果发送，如下所示：

```
 public ContentResult GetDynamicColumnData(int? fieldListId)
    {
        var serializer = new JavaScriptSerializer();
        serializer.MaxJsonLength = Int32.MaxValue;

        IList<FieldListView> fieldListValues = null;
        if (fieldListId != null)
        {
            fieldListValues = fieldListService.GetFieldListValues(fieldListId.Value);
        }
        var resultData = new { fieldListValues };
        var result = new ContentResult
        {
            Content = serializer.Serialize(resultData),
            ContentType = "application/json"
        };
        return result;
    } 
```

名为 fieldListvalues 的列表有大约 50000 个对象。问题是我的 Jqgrid 需要大约 3 分钟才能在 Chrome 中加载，而它根本没有在 Firefox 中加载。

那么将大量数据发送到客户端并将其呈现在网格中的最佳方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:09:23.540

答案是真的不要这样做。如此多的数据将使网格本身难以与如此多的行一起使用。您可以将 jqGrid 配置为分页。您需要将 C# 中的方法签名设置为类似

```
public ContentResult GetDynamicColumnData(int? fieldListId, 
                                 string sidx, string sord, 
                                 bool _search, string searchField, 
                                 string searchOper, string searchString, 
                                 int page = 1, int rows = 100) 
```

然后，您可以遍历您的字段列表值，跳过 pageIndex * pageSize 的总数，它应该会提供良好的用户体验。

当我这样做时，我发现这篇[Phil Haack](http://haacked.com/archive/2009/04/14/using-jquery-grid-with-asp.net-mvc.aspx)文章是一个很好的起点。我还发现这是一个[有用的例子](http://blogs.teamb.com/craigstuntz/2009/04/17/38229/)。

您可以使用 _search 和 search 操作数通过允许进一步过滤网格来提供积极的用户体验。因为这个搜索是动态的，所以我通过构建 Predicates 来实现它，然后将其应用于 LINQ 表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:04:01.593

我建议分页。

您还可以使用增量数据加载。这样您就可以继续获取更多记录，但用户能够看到屏幕并使用当前数据集。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:04:34.780

您需要在滚动/分页（我相信 JqGrid 实现）上实现数据的自动加载，以便网格只请求用户“可查看”的行数的数据。一次将 10MB 的数据加载到网格中是行不通的。我会质疑为什么用户实际上一次需要这么多的数据。您可以通过预过滤等方式减少数据量。

# html - Jquery 工具提示错位

> ID：10632589
> 
> 赞同：2
> 
> 时间：2012-05-17T08:57:39.993
> 
> 标签：html, css, tooltip, jquery-tools

我遇到了 Jquery Tools Tooltip 的问题。你可以看到：[http ://www.toulousehoopsummit.com/l-ecole-en-basket](http://www.toulousehoopsummit.com/l-ecole-en-basket)

底部的 3 张图片有一个工具提示。在 IE9 和 FF12 中，右侧的工具提示太多了。在 Safari 中，它的位置正确。

我必须添加 `offset: [0, -450]` 以解决 IE 和 FF 上的问题，但 Safari 用户现在面临相反的问题。

你知道我为什么会得到这个以及如何解决它吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:10:17.320

试试[CSS 浏览器选择器](http://rafael.adm.br/css_browser_selector/)- 这已经多次保存了我的项目。

只需将 JS 文件放入，您`<html>`将添加诸如`.ie` `.safari3`etc 之类的 css 选择器，而无需实际调试 jQuery Tools Tooltip。

它可以让你根据浏览器版本和操作系统调整你的 CSS。

如果您需要任何帮助，请发表评论！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T02:22:29.310

如果你对新想法和一些好看的插件持开放态度，你应该尝试：

[提示 jQuery 插件](http://code.drewwilson.com/entry/tiptip-jquery-plugin)

我已经使用它一段时间了，它很棒！

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T22:24:49.517

这是一个固定版本： http: [//pastehtml.com/view/bymzdgvhv.html](http://pastehtml.com/view/bymzdgvhv.html)

这在所有浏览器中都适用于我。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-19T21:27:28.300

我现在在 iPad 上，所以我无法真正测试这一点。但是为什么不使用 jquery 获取图像的顶部和左侧位置，并与图像位置相比偏移工具提示位置呢？

# python - 文字是python中的对象吗？

> ID：10632597
> 
> 赞同：-2
> 
> 时间：2012-05-17T08:58:25.103
> 
> 标签：python

我来自 Java 编程，不熟悉 Python。我是否应该将整数、浮点数和字符串文字也视为 python 编程的对象？

例如：`2`, `4.3`,`'stackoveflow'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:02:05.427

[Everything in python is an object.](http://docs.python.org/reference/datamodel.html) Even functions and plain numbers/booleans.

> *Objects* are Python’s abstraction for data. All data in a Python program is represented by objects

This has quite some advantages, for example, you can easily subclass a type such as `str` or `unicode` if you need a custom type with the default behaviour but additional features (often done in template engines to mark strings as HTML-safe).
Another more common thing is the `join()` method on strings. While most languages have such a methods on arrays, Python has it as a string method which is used like this, allowing you to pass *any* iterable/sequence to it: `', '.join(some_iterable)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:02:09.267

Yes, every value is an object in Python. For example:

```
>>> dir(3)
['__abs__', '__add__', '__and__', '__bool__', '__ceil__', '__class__', '__delattr__', '__divmod__', '__doc__', '__eq__', '__float__', '__floor__', '__floordiv__', '__format__', '__ge__', '__getattribute__', '__getnewargs__', '__gt__', '__hash__', '__index__', '__init__', '__int__', '__invert__', '__le__', '__lshift__', '__lt__', '__mod__', '__mul__', '__ne__', '__neg__', '__new__', '__or__', '__pos__', '__pow__', '__radd__', '__rand__', '__rdivmod__', '__reduce__', '__reduce_ex__', '__repr__', '__rfloordiv__', '__rlshift__', '__rmod__', '__rmul__', '__ror__', '__round__', '__rpow__', '__rrshift__', '__rshift__', '__rsub__', '__rtruediv__', '__rxor__', '__setattr__', '__sizeof__', '__str__', '__sub__', '__subclasshook__', '__truediv__', '__trunc__', '__xor__', 'bit_length', 'conjugate', 'denominator', 'from_bytes', 'imag', 'numerator', 'real', 'to_bytes']
>>> (3).__str__()
'3' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T09:03:41.577

[在 Python 中，每个值都是一个对象](http://docs.python.org/reference/datamodel.html#objects-values-and-types)。`42`, `"stackoverflow"`, 和`(1,)`都是对象并且有一个[类型](http://docs.python.org/library/functions.html#type)：

```
>>> (42).bit_length() # parentheses necessary for syntactic reasons
6
>>> "stackoverflow".upper()
'STACKOVERFLOW'
>>> type((1,))
<type 'tuple'> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-17T09:04:16.353

是的。事实上，这样做是一些常见习语的核心——尤其是字符串格式：

```
>>> "Hello {}".format("name")
'Hello name' 
```

并加入一个序列的项目：

```
>>> a = ['one', 'two', 'three']
>>> ' + '.join(a)
'one + two + three' 
```

这两者都依赖于作为对象的字符串文字，因此能够在它们上调用方法。

# iphone - 如何在iphone中每次从启动页面加载应用程序

> ID：10632600
> 
> 赞同：0
> 
> 时间：2012-05-17T08:58:29.720
> 
> 标签：iphone, xcode

我有适用于 iphone 的应用程序，我想始终从启动页面打开它，但是当我在 ipad 上加载第一次应用程序时，它会从启动页面加载，但是当我关闭应用程序并第二次在 ipad 上运行时，它会从我所在的同一屏幕打开离开我想再次它也应该从启动页面打开。当我单击按钮时，我有带有输入按钮的启动页面，我移动到计算屏幕，在那里我执行计算。如果我在计算屏幕上关闭应用程序，当我再次打开它时从计算屏幕而不是从启动屏幕打开

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:09:23.793

在 plist 文件中再添加一个字段

应用程序不在后台运行：让它成为现实

这是你的完美答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:08:50.293

第二次应用程序将在后台，这就是为什么它没有从启动应用程序页面开始。不允许应用程序在后台运行。在 info.plist 文件中设置键“”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:06:34.133

您应该在您的 plist 中添加该属性：

```
UIApplicationExitsOnSuspend 
```

这将允许您的应用程序“重新启动”而不是保存其状态。这将允许您每次加载启动页面。（[文档](http://developer.apple.com/library/ios/#documentation/general/Reference/InfoPlistKeyReference/Articles/iPhoneOSKeys.html)）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T09:06:32.420

根据它的文档，苹果不鼓励它：-

没有提供用于优雅终止 iOS 应用程序的 API。

在 iOS 中，用户按下 Home 按钮来关闭应用程序。如果您的应用程序存在无法提供其预期功能的情况，推荐的方法是向用户显示警报，指出问题的性质以及用户可能采取的措施——打开 WiFi、启用定位服务等。允许用户自行决定终止应用程序。

警告 不要调用退出函数。调用 exit 的应用程序将在用户看来已经崩溃，而不是执行正常终止并动画返回主屏幕。

这是它的[链接](https://developer.apple.com/library/ios/#qa/qa2008/qa1561.html)。无论如何，没有人阻止你使用 `exit(0)`，但不鼓励。

另一种方法是简单地将应用程序的 pList 属性更改`"Application does not run in background"`为 true。

# php - 这段代码是使用 Bcrypt 还是纯河豚？

> ID：10632605
> 
> 赞同：0
> 
> 时间：2012-05-17T08:58:47.817
> 
> 标签：php, hash, passwords, blowfish, bcrypt

我正在在线学习 php 安全性（使用 php 5.4），并遇到了以下我想了解/使用的代码。以下代码是否使用 bcrypt，它是河豚的良好实现吗？如果存在问题，您能否建议修复或资源。谢谢。

```
 class PassHash {  

    // blowfish  
    private static $algo = '$2a';  

    // cost parameter  
    private static $cost = '$10';  

    // mainly for internal use  
    public static function unique_salt() {  
        return substr(sha1(mt_rand()),0,22);  
    }  

    // this will be used to generate a hash  
    public static function hash($password) {  

        return crypt($password,  
                    self::$algo .  
                    self::$cost .  
                    '$' . self::unique_salt());  

    }  

    // this will be used to compare a password against a hash  
    public static function check_password($hash, $password) {  

        $full_salt = substr($hash, 0, 29);  

        $new_hash = crypt($password, $full_salt);  

        return ($hash == $new_hash);  

    }  

} 
```

这是用户注册期间的用法：

```
// include the class 
require ("PassHash.php");
// ...
// read all form input from $_POST
// ...
// do your regular form validation stuff
// ...
// hash the password
$pass_hash = PassHash::hash($_POST['password']);
// store all user info in the DB, excluding $_POST['password']
// store $pass_hash instead
// ... 
```

这是用户登录过程中的用法：

```
// include the class  
require ("PassHash.php");        
// read all form input from $_POST
// ...
// fetch the user record based on $_POST['username']  or similar  
// ...
// ... 
// check the password the user tried to login with  
if (PassHash::check_password($user['pass_hash'], $_POST['password']) {  
    // grant access  
    // ...  
} else {  
    // deny access  
    // ...  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T00:32:40.213

> 简短的回答：

是的，它确实使用了 bcrypt 河豚（在 PHP 中，河豚是 bcrypt 的当前算法）

> 正确答案 ：

为什么不使用像[这样的受信任的 PHP 兼容性库？](https://github.com/ircmaxell/password_compat)

与您发布的相比，使用它的好处是什么？：

1.  它被许多人广泛使用（必须被社区信任和接受）

2.  允许与 php 5.5 本机 bcrypt 函数（因此命名为 passwd_compat）向前兼容更多信息：[信息在这里！](https://wiki.php.net/rfc/password_hash)

3.  允许进行天才的重新哈希（几乎如果您决定提高算法的成本，您可以轻松地这样做并检查成本是否与库文件中的成本匹配，否则您可以更新密码）

底线：如果您不知道自己在做什么，那么您只能使用 bcrypt 出错。要记住的一件事是：如果已经有轮子，就不要重新发明轮子。

希望这个答案可以帮助您/扩展您的知识。

# android - 当满足某些其他条件时，单击时更改网格视图中的图像

> ID：10632607
> 
> 赞同：1
> 
> 时间：2012-05-17T08:58:58.320
> 
> 标签：android, gridview

当我收到以下错误时，如何在我的特定网格视图中更改图像。我在其他地方也遵循了类似的例子，但没有成功。即在尝试以下操作时，我得到“无法从整数更改为图像视图”，从（参见[Android GridView - update View based on position](https://stackoverflow.com/questions/2217491/android-gridview-update-view-based-on-position)），即：

```
int tempid = v.getId();
ImageView imgView = FruitToChooseFromImages.get(tempid);
imgView.setBackgroundResource(R.drawable.blank); 
```

我也试过：

```
{   // remove viewable image / make blank
ImageView imageView = (ImageView) v;
imageView.setImageResource(R.drawable.blank);
} 
```

如果您需要，下面的完整代码：

主要JAVA代码：

```
public class game1mainscreen extends Activity {

private MyGridviewAdapter1 mAdapter; 
private GridView gridview;  

private ArrayList<Integer> FruitToChooseFromImages; 
private ArrayList<Integer> tempintarray;

int Totalfruit = 11; // starting from 0 of course (so an 11=12 fruit) this means there are 6 pairs of fruit to select
int fruitleft = 12;
int fruitstilltoadd = Totalfruit + 1;
int numberOfFruitToRemove = 6;   
int puthere = 0; 
int imagesSelectedThusFar = 0;
int Fruitleft = 0;

int firstfruitselected = R.drawable.blank; int firstfruitselpos;
int secondfruitselected = R.drawable.blank; int secondfruitselpos;

int removefirstimage = 0;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gameonemenu);

    {        
        FruitToChooseFromImages = new ArrayList<Integer>();

        FruitToChooseFromImages.add(R.drawable.fruit0);
        .....etc....
        FruitToChooseFromImages.add(R.drawable.fruit11);

        }

    ...code removed which randomly sorts FruitToChooseFromImages (ie arraylist of images) into 6 duplicate pairs of images...

    // prepared arraylist is passed to the Adapter class  
    mAdapter = new MyGridviewAdapter1(this, FruitToChooseFromImages);  

    // Set custom adapter to gridview  
    gridview = (GridView) findViewById(R.id.gridView1);
    gridview.setAdapter(mAdapter);

    // DO THIS WHEN CLICKED
    gridview.setOnItemClickListener(new OnItemClickListener() 
    {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) 
        { 
            int fruitselected = (int)FruitToChooseFromImages.get(position);     
            // start
            if (fruitselected == R.drawable.blank)
            {  
            // if blank/empty icon clicked on then DO NOTHING
            }

            else 
            { // firstly, say fruit name
                int soundtoplaynow = getrightsound(position, fruitselected);
                SoundManager.playSound(soundtoplaynow, 1);
              // next
                if (imagesSelectedThusFar == 0) 
                    {
                    imagesSelectedThusFar = 1;
                    firstfruitselected = fruitselected; firstfruitselpos = position;
                    //both switch fruit image to blank in the array and display blank at position clicked
                    FruitToChooseFromImages.set(position, R.drawable.blank);
                        {   // remove viewable image / make blank
                        ImageView imageView = (ImageView) v;
                        imageView.setImageResource(R.drawable.blank);
                        }
                    }
                else // so two images have been selected! do they match?
                    {
                    imagesSelectedThusFar = 0; // has reached 2, so reset to zero
                    secondfruitselected = fruitselected; secondfruitselpos = position;
                    if (firstfruitselected == secondfruitselected)
                        {
                    GeneralSoundManager.playSound(0, 1);// play happy sound - change code to GeneralSoundManager

                        //switch fruit image to blank and display blank at position clicked **
                        FruitToChooseFromImages.set (position, R.drawable.blank);
                    {   // remove viewable image / make blank
                        ImageView imageView = (ImageView) v;
                        imageView.setImageResource(R.drawable.blank);
                        }

                        int tempid = v.getId();
                        ImageView imgView = FruitToChooseFromImages.get(tempid);
                        imgView.setBackgroundResource(R.drawable.blank);

                        fruitleft = (fruitleft - 2);
                        }

                    else
                        { // you selected the wrong fruit, sorry.
                    GeneralSoundManager.playSound(1, 1); 
                        FruitToChooseFromImages.set (firstfruitselpos, firstfruitselected);
                        // 
                        }   
                    }
            }    

             // end

            if (fruitleft == 0)
                {
                //end game - add code here
                }
        }
    });
}

// returns the sound to play depending on what image was clicked on
public int getrightsound(Integer position, Integer switchused) {
...etc.... 
    return soundtoplay;
} 
```

}

我的gridview适配器代码：

```
public class MyGridviewAdapter1 extends BaseAdapter  
{  
private ArrayList<Integer> FruitToChooseFromImages;

private Activity activity;  

public MyGridviewAdapter1(Activity activity,ArrayList<Integer> FruitToChooseFromImages) 
{  
    super();  

    this.FruitToChooseFromImages = FruitToChooseFromImages;  
    this.activity = activity;  
}  

public int getCount() {  
    return FruitToChooseFromImages.size();  
}  

public Integer getItem(int position) {  
    return FruitToChooseFromImages.get(position);  
}  

public long getItemId(int position) {  
    return 0;  
}  

public static class ViewHolder  
{  
    public ImageView imgViewFlag;  

}  

public View getView(int position, View convertView, ViewGroup parent) {   
    ViewHolder view;  
    LayoutInflater inflator = activity.getLayoutInflater();  

    if(convertView==null)  
    {  
        view = new ViewHolder();  
        convertView = inflator.inflate(R.layout.gridview_row, null);  

        view.imgViewFlag = (ImageView) convertView.findViewById(R.id.imageView1);  

        convertView.setTag(view);  
    }  
    else  
    {  
        view = (ViewHolder) convertView.getTag();  
    }  

    view.imgViewFlag.setImageResource(FruitToChooseFromImages.get(position));  

    return convertView;  
}  
} 
```

我的主要 xml 代码 - gameonemenu：

```
<?xml version="1.0" encoding="utf-8"?>  
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_height="fill_parent"
android:layout_width="fill_parent"
android:gravity="center"
android:layout_gravity="center"
android:background="@drawable/tree">
<GridView  

android:id="@+id/gridView1"  
android:layout_width="fill_parent"     
android:layout_height="wrap_content"
android:numColumns="4"
android:verticalSpacing="1dp"
android:horizontalSpacing="1dp"
android:stretchMode="columnWidth"
android:gravity="center" />
</LinearLayout> 
```

我的 Gridview_row xml 代码：

```
<ImageView  

    android:layout_height="64dp"  
    android:id="@+id/imageView1"  
    android:layout_width="64dp"  
    android:src="@drawable/blank"  
    android:layout_alignParentTop="true"  
    android:layout_centerHorizontal="true">  
</ImageView>  

</RelativeLayout> 
```

PS 我使用了最初显示文本的 Grirdview_row xml，但我不需要仅显示文本图像，但这会导致问题吗？PSS 请将您的建议保持在 COMPLETE 初学者级别，并尽可能包含代码以匹配解释。我不能强调这一点。谢谢。

# asp.net - 如何在 MVC 中找到用户名和角色？

> ID：10632610
> 
> 赞同：0
> 
> 时间：2012-05-17T08:59:20.443
> 
> 标签：asp.net, asp.net-mvc-3

有什么方法可以在 MVC 中找到用户和用户的角色吗？.Net 中的用户还可以同时拥有多个角色吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:10:46.117

采用

```
string username = Page.User.Identity.Name;
string[] roles =Roles.GetRolesForUser(username); 
```

希望能帮助到你。祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:00:49.080

标准 ASP.NET 方式：

```
 public ActionResult Test()
  {
    if (User.IsInRole("role name"))
    {
      //do something
    }
    return View();
  } 
```

是的，一个用户可以担任多个角色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:10:07.967

您将在对象中找到用户及其角色（身份和原则）对象`HttpContext`，如下所示

```
HttpContext.User
HttpContext.User.Identity 
```

您将不得不覆盖 basecontroller 上的 onauthorize 方法，如下所示

```
public class HomeController : Controller
    {
        protected override void OnAuthorization(AuthorizationContext filterContext)
        {
            //filterContext.HttpContext.User.Identity  
            base.OnAuthorization(filterContext);
        }
} 
```

# android - 在 Android 中显示图像预览

> ID：10632612
> 
> 赞同：2
> 
> 时间：2012-05-17T08:59:26.507
> 
> 标签：android, image, gallery

我想向用户显示手机上的图像。但我想向用户展示图像的预览。

![在此处输入图像描述](../Images/e7f7a3af18cabb5e001f82d8ebb27232.png)

当用户触摸图像时，我想显示图像的路径。

我的布局中有一个按钮。单击按钮时如何显示图像。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" android:orientation="vertical" android:background="@drawable/back_default">

    <Button android:layout_width="wrap_content" android:layout_height="wrap_content" android:background="@drawable/button_pickimage" android:id="@+id/btn_pickimage"></Button>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:05:39.997

[http://developer.android.com/resources/tutorials/views/hello-gallery.html](http://developer.android.com/resources/tutorials/views/hello-gallery.html)

这应该提供一个很好的起点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:03:50.190

我认为你应该看看 [Android Gallery](http://developer.android.com/resources/tutorials/views/hello-gallery.html)和[Android GridView](http://developer.android.com/guide/tutorials/views/hello-gridview.html)

当您单击按钮时，只需将 Intent 定向到 GridView。

关于单击图像以显示其路径是另一回事。您可以构建自定义布局或 Toast 或其他任何内容来满足您显示路径的需要。将 onClick 侦听器放在 Image 上以执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:24:14.743

据我了解，您想首先显示缩略图（如链接中所示），然后单击任何图像应在不同视图中放大该特定图像，

然后简单的方法..

```
1.Make two separate activity for preview and large image
2\. Store all your image in a array(If you have diff images for preview and large image then place accordingly).
3\. set id for each imageview (In preview mode)
4\. send id of selected imageview to next activity using putextra
5\. Use id to access the array 
```

# spring - Using spring in a stand alone jar for dependency injectection

> ID：10632614
> 
> 赞同：0
> 
> 时间：2012-05-17T08:59:43.823
> 
> 标签：spring

Am a total beginner with spring framework and trying to know if it even fits my use case, before investing time learning it.

I'm responsible for a stand alone java project(used as a jar by a server) which basically serves requests from a server, and in turn makes service calls to various internal services. This standalone java project, currently has all of its service calls hard coded. I want to use Spring to inject dependencies so I can make this stuff testable.

I have no idea how spring works. Does it even hold for standalone jars or is it only for 'running applications'?

If I make my standalone project 'spring enabled', when the server uses my jar, will it automagically work by creating beans or is there some requirement from the server side?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:49:45.130

简而言之，是的，您可以在独立的 jar 应用程序（“控制台应用程序”，如果您愿意的话）中使用 Spring，我们一直在工作。您只需要在应用程序启动时自己创建 ApplicationContext，请参见此处的示例：http: [//www.devdaily.com/blog/post/java/load-spring-application-context-file-java-swing-application](http://www.devdaily.com/blog/post/java/load-spring-application-context-file-java-swing-application)

这只是我直接从 Google 中提取的一个示例，可能还有很多其他示例。不过，您确实需要至少阅读[Spring 文档](https://spring.io/docs/)中的基础知识才能开始使用，否则您可能很快就会碰壁。

# jquery - 用于刷新选择框时，编辑选项中的 dataUrl 在 JqGrid 中不起作用

> ID：10632615
> 
> 赞同：0
> 
> 时间：2012-05-17T08:59:51.300
> 
> 标签：jquery, jqgrid, data-url

我是 jqGrid 的新手。我正在尝试在 editoptions 中使用 dataUrl 来为每个行编辑刷新选择框选项值（在显示编辑表单之前）。

但是我没有看到刷新发生，我确实看到了在 jqGrid 中编辑一行时在 firebug 中发出的任何 http 请求。

我在名为的列中调用一个 php 文件，在`"loadPoleManagers.php"`php文件中我返回带有选项的选择 html 标记，即纯 html 标记。`dataUrl``Pole_manager`

如果我遗漏了什么，你能请任何人给我建议吗？

下面是我的 jqGrid 代码。

```
$('#groups_grid').jqGrid({
    caption: 'Groups',
    hidegrid:false,
    height:'100%',
    width:1024,
    imgpath: 'style/jquery.plugins/jqgrid/steel/images',
    loadui:'disable',
    forceFit:true,
    pager: jQuery('#pagerGroups'),
    viewrecords:true,
    url:'data/xml/grid/groups.php',
    datatype: "xml",
    mtype:'POST',
    ajaxSelectOptions: { cache: false },
    colNames:['ID','Name', 'Complete day compulsory', 'Pole manager',
        'Support Leader', 'Itrack group name'],
    colModel:[
        {name:'id_group',index:'id_group', width:40, align:"center"},
        {name:'name',index:'name', width:70, resizable:true, editable:true,
            editoptions: {size:'20', maxlength:'45'}},
        {name:'complete_day_compulsory',index:'complete_day_compulsory',
            width:110, align:"center", resizable:true, sortable:true,
            editable:true, edittype:'select', editoptions: {value:"0:No;1:Yes"}},
        {name:'pole_manager',index:'pole_manager->last_name', width:100,
            resizable:true, sortable:true, editable:true,
            edittype:'select',editoptions:{dataUrl:'loadPoleManagers.php'}},
        {name:'support_leader',index:'support_leader->last_name', width:100,
            resizable:true, sortable:true, editable:true, edittype:'select',
            editoptions: {value:support_leaders}},
        {name:'itrack_group_name',index:'itrack_group_name', width:100,
            resizable:true, editable:true, edittype:'text'}
    ],
    rowNum:15,
    rowList:[5, 10, 15, 25],
    imgpath: 'style/jquery.plugins/jqgrid/steel/images',
    sortname: 'id_group',
    multiselect: false,
    onSelectRow: rowSelectedHandler,
    ondblClickRow: function(id){
        if(id){
            jQuery('#groups_grid').restoreRow(lastEditedGroup);
            jQuery('#groups_grid').editRow(id,true);
            lastEditedGroup=id;
        }
    },
    loadComplete: function(){
        lastEditedGroup = null;
        lastSelectedGroup = null;
    },
    editurl: 'data/forms_handle/edit_group.php'
    }).navGrid("#pagerGroups",
        {refresh: true, edit: true, add: true, del: true, search: true, view: false},
        {height:220, width:690, closeAfterEdit:true, recreateForm:true},
        {height:220, width:690, closeAfterAdd:true,recreateForm:true},
        {height:140, width:380},
        {height:80, width:450, closeAfterSearch:true,closeOnEscape:true,
            multipleSearch:true}
    ); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:36:12.060

我使用该`beforeShowForm`功能解决了这个问题。

以下是在选择并单击行进行编辑时刷新选择框选项列表的完整代码。

```
$("#groups_grid").jqGrid({
    caption: "Groups",
    hidegrid:false,
    height:'100%',
    width:1024,
    imgpath: 'style/jquery.plugins/jqgrid/steel/images',
    loadui:"disable",
    forceFit:true,
    pager: jQuery('#pagerGroups'),
    viewrecords:true,
    url:'data/xml/grid/groups.php',
    datatype: "xml",
    mtype:'POST',
    ajaxSelectOptions: { cache: false },
    colNames:['ID','Name', 'Complete day compulsory', 'Pole manager', 'Support Leader', 'Itrack group name'],
    colModel:[                                          
        {name:'id_group',index:'id_group', width:40, align:"center"},
        {name:'name',index:'name', width:70, resizable:true, editable:true, editoptions: {size:'20', maxlength:'45'}},
        {name:'complete_day_compulsory',index:'complete_day_compulsory', width:110, align:"center", resizable:true, sortable:true, editable:true, edittype:'select', editoptions: {value:"0:No;1:Yes"}},
        {name:'pole_manager',index:'pole_manager->last_name', width:100,  resizable:true, sortable:true, editable:true, edittype:'select',editoptions: {value:pole_managers}},
        {name:'support_leader',index:'support_leader->last_name', width:100,  resizable:true, sortable:true, editable:true, edittype:'select', editoptions: {value:support_leaders}},
        {name:'itrack_group_name',index:'itrack_group_name', width:100,  resizable:true, editable:true, edittype:'text'}
    ],
    rowNum:15,
    rowList:[5, 10, 15, 25],
    imgpath: 'style/jquery.plugins/jqgrid/steel/images',
    sortname: 'id_group',
    multiselect: false,
    onSelectRow: rowSelectedHandler,
    ondblClickRow: function(id){ 
        if(id){
            jQuery('#groups_grid').restoreRow(lastEditedGroup);
            jQuery('#groups_grid').editRow(id, true);
            lastEditedGroup = id;
        }
    },
    loadComplete: function(){
        lastEditedGroup = null;
        lastSelectedGroup = null;
    },

    editurl: 'data/forms_handle/edit_group.php'
}).navGrid("#pagerGroups", 
    {
        refresh: true, edit: true, add: true, del: true, search: true, view: false},
    {
        height:220, 
        width:690, 
        closeAfterEdit:true, 
        recreateForm:true,
        beforeShowForm:function(formID) {
            $.post("data/xml/loadPoleManagers.php?group="+lastSelectedGroup, {},
                function(response){
                    //alert(response);
                    jQuery('#pole_manager',formID).empty().append(response);
                },
                 "text"
            );
        }
    },
    {height:220, width:690, closeAfterAdd:true,recreateForm:true},
    {height:140, width:380},
    {height:80, width:450, closeAfterSearch:true,closeOnEscape:true, multipleSearch:true}
); 
```

在我的 data/xml/loadPoleManagers.php 文件中，我只返回 html 选项标签

```
"<"option>one"</"option">"
"<"option">"Two"</"option">" 
```

# c++ - How to remove black part from the image?

> ID：10632617
> 
> 赞同：13
> 
> 时间：2012-05-17T09:00:18.173
> 
> 标签：c++, image-processing, opencv, image-stitching

I have stitched two images together using OpenCV functions and C++. Now I am facing a problem that the final image contains a large black part.

The final image should be a rectangle containing the effective part. My image is the following:

![enter image description here](../Images/29189f0b0d7d178046432306044d1d3a.png)

How can I remove the black section?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-18T05:29:27.537

`mevatron`的答案是在保留完整图像的同时最小化黑色区域数量的一种方法。

另一种选择是删除完整的黑色区域，您也会丢失图像的某些部分，但结果将是一个看起来整洁的矩形图像。下面是 Python 代码。

在这里，您可以找到图像的三个主要角，如下所示：

![在此处输入图像描述](../Images/e801a671bb1ec9ba10c367f63542b4a5.png)

我已经标记了这些值。`(1,x2), (x1,1), (x3,y3)`. 它基于您的图像从 (1,1) 开始的假设。

**代码 ：**

第一步与`mevatron`'s 相同。模糊图像以去除噪声，对图像进行阈值处理，然后找到轮廓。

```
import cv2
import numpy as np

img = cv2.imread('office.jpg')
img = cv2.resize(img,(800,400))

gray = cv2.cvtColor(img,cv2.COLOR_BGR2GRAY)
gray = cv2.medianBlur(gray,3)

ret,thresh = cv2.threshold(gray,1,255,0)
contours,hierarchy = cv2.findContours(thresh,cv2.RETR_LIST,cv2.CHAIN_APPROX_SIMPLE) 
```

现在找到你的图像的最大轮廓。这是为了避免噪音，以防万一（很可能不会有任何噪音）。或者你可以使用`mevatron`' 方法。

```
max_area = -1
best_cnt = None

for cnt in contours:

    area = cv2.contourArea(cnt)
    if area > max_area:
        max_area = area
        best_cnt = cnt 
```

现在近似轮廓以删除找到的轮廓值中不必要的点，但它保留所有角值。

```
approx = cv2.approxPolyDP(best_cnt,0.01*cv2.arcLength(best_cnt,True),True) 
```

现在我们找到了角落。

首先，我们找到 (x3,y3)。这是最远的点。所以`x3*y3`会很大。因此，我们找到所有点对的乘积，并选择乘积最大的对。

```
far = approx[np.product(approx,2).argmax()][0] 
```

下一个（1，x2）。这是第一个元素是一个，然后第二个元素是最大值的点。

```
ymax = approx[approx[:,:,0]==1].max() 
```

下一个 (x1,1)。它是第二个元素为 1，然后第一个元素为最大值的点。

```
xmax = approx[approx[:,:,1]==1].max() 
```

现在我们发现`minimum values in (far.x,xmax) and (far.y, ymax)`

```
x = min(far[0],xmax)
y = min(far[1],ymax) 
```

如果你用 (1,1) 和 (x,y) 画一个矩形，你会得到如下结果：

![在此处输入图像描述](../Images/fe1208bfe7abce2baeb057bb406d204d.png)

所以你裁剪图像以纠正矩形区域。

```
img2 = img[:y,:x].copy() 
```

结果如下：

![在此处输入图像描述](../Images/4949882f4afa2c9868f5438eb5fb1cfb.png)

`See, the problem is that you lose some parts of the stitched image.`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-17T18:09:42.397

您可以使用[threshold](http://opencv.itseez.com/modules/imgproc/doc/miscellaneous_transformations.html?cv2.threshold#threshold)、[findContours](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontour#void%20findContours%28InputOutputArray%20image,%20OutputArrayOfArrays%20contours,%20OutputArray%20hierarchy,%20int%20mode,%20int%20method,%20Point%20offset%29)和[boundingRect](http://opencv.itseez.com/modules/imgproc/doc/structural_analysis_and_shape_descriptors.html?highlight=findcontour#boundingrect)来做到这一点。

因此，这是一个使用 python 界面执行此操作的快速脚本。

```
stitched = cv2.imread('stitched.jpg', 0)
(_, mask) = cv2.threshold(stitched, 1.0, 255.0, cv2.THRESH_BINARY);

# findContours destroys input
temp = mask.copy()
(contours, _) = cv2.findContours(temp, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)

# sort contours by largest first (if there are more than one)
contours = sorted(contours, key=lambda contour:len(contour), reverse=True)
roi = cv2.boundingRect(contours[0])

# use the roi to select into the original 'stitched' image
stitched[roi[1]:roi[3], roi[0]:roi[2]] 
```

最终看起来像这样： ![在此处输入图像描述](../Images/825ee4bbef9e8d80680ea6efeda2a3f1.png)

**注意：**原始图像可能不需要排序，但使用压缩图像会导致在使用低阈值时出现一些压缩伪影，这就是我对排序进行后处理的原因。

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T15:23:12.970

您可以使用活动轮廓（气球/蛇）来准确选择黑色区域。可以在[此处](http://www.youtube.com/watch?v=o5gqYY41HJA)找到演示。OpenCV 中提供了活动轮廓，请检查[cvSnakeImage](http://opencv.willowgarage.com/documentation/motion_analysis_and_object_tracking.html?highlight=snake#cvSnakeImage)。

# vim - vim: FuzzyFinder and the numbers of the list of the matching file names

> ID：10632619
> 
> 赞同：3
> 
> 时间：2012-05-17T09:00:35.793
> 
> 标签：vim

I'm using FuzzyFinder, when I start to write the name of a file to open it, a list of files that match the letters are shown. On the left of each of those files there is a number.

What do those number mean? Is there maybe any way to open a file from the list using that number?

Or what way do you use for selecting the files from the list apart from using the cursor keys?

Javi

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T19:28:08.877

如果您在 - 之后附加这些数字，则可以使用这些数字，`;`因此如果您键入`ab`并最终得到一个包含 10 个文件的列表，您可以使用 . 选择第 5 个`ab;5`。

您也可以从列表中选择一个文件，而无需输入任何模式，直接以列表中的数字开头`;`并跟随。更多信息在`:h fuf-search-patterns`。

当所需文件距顶部最多三个或四个位置时，我使用`Ctrl-p`/选择匹配项，类似于光标键。`Ctrl-n`

# merge - Diff merge : view difference between two folders and ignore file version number

> ID：10632626
> 
> 赞同：2
> 
> 时间：2012-05-17T09:00:55.120
> 
> 标签：merge, diff, version

I need some help. I have to view difference between two folders, but I need to ignore the file version number (project version number) which is in the header of the file. Like that:

```
@version Release: $Revision: 9939 $ 
```

And do you know the best diff merge software for doing that in Mac OSX and the most beautiful. I know diff merge and Kaleidoscope. I love Kaleidoscope but, it cannot make some difference between two folders.

Many thanks before.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-21T15:28:57.490

尝试进入**DiffMerge** → **Preferences** → **File Windows** → **Rulesets**。您可以为您的文件类型修改现有规则集（如果不存在规则集，则添加新规则集）。

编辑您感兴趣的规则集，然后转到**Lines to Omit**。在那里您可以添加一个正则表达式来匹配该行`@version`。

我遇到的麻烦是让文件夹差异来兑现这一点。我发现根据我的规则没有差异的文件仍然以不匹配的形式出现在文件夹差异中，但是当我打开文件差异窗口时，它说`Files are identical or equivalent under the current RuleSet.` 不确定这是一个错误还是我仍然配置了错误的东西。如果我进入**文件夹 Windows** →**等效模式**并在那里深入了解帮助，我想我已经正确设置了所有文件夹差异属性以遵守我的规则集，但仍然没有运气。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-17T09:10:07.960

可惜你需要MacOS。对于 Win32，WinMerge 可以通过 Tools/Filters/Linefilters 轻松配置，您只需在其中输入要忽略的正则表达式。

[http://manual.winmerge.org/Filters.html](http://manual.winmerge.org/Filters.html)

> 例如，您可以使用行过滤器来忽略注释或某些类型的生成代码，例如版本控制系统时间戳

WinMerge 3 将基于 Qt，因此 MacOS 也是积极的，但当前的 2.x 还没有。

# .net - What are the available approaches to calculate expressions using .Net library for a bulk data in Oracle?

> ID：10632632
> 
> 赞同：1
> 
> 时间：2012-05-17T09:01:40.297
> 
> 标签：.net, oracle

In an Oracle database, I have a bulk of expressions that should be calculated using a .Net library. What I've done so far is creating a windows service that fetches the expressions from a queue, processes them and the write the result.

I wonder if I could find a more efficient way, since many records could be inserted every second, so I'm afraid of a performance issues later.

I though about moving this processing to an Oracle Job, but calculating the expression should be made in a .Net library; and I have no clue whether it's possible to use a .Net library in an Oracle procedure.

Is the .Net service with the queue the best option, or is there any other options?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:43:32.397

根据评论，我认为您将能够使用 Oracle Database Extensions for .NET ( [docs.oracle.com/cd/B28359_01/win.111/b28376/intro.htm](http://docs.oracle.com/cd/B28359_01/win.111/b28376/intro.htm) )。这允许您以与 UDF 类似的方式使用 .NET，并且应该可以完成您所需要的。仔细评估性能并确保 .NET 代码足够健壮，不会对 Oracle 服务器本身造成问题。我已经看到使用一些非托管对象与 MSSQL 一起使用的类似方法，它会导致问题。

# c# - C# winService calling webService via http GET

> ID：10632635
> 
> 赞同：0
> 
> 时间：2012-05-17T09:01:46.850
> 
> 标签：c#, http, windows-services, get

I want to write a c# winService (console application?)

that will send a HTTP GET request from some url.

What library should I use to call this url?

`System.Web` ?

# visual-c++ - UpdateData function in VC++

> ID：10632638
> 
> 赞同：3
> 
> 时间：2012-05-17T09:02:01.513
> 
> 标签：visual-c++, textbox

i am not so familiarize with the VC++ programming. i have heard that, while reading/writing to window text box, we have to use the update data function.(UpdateData(true), UpdateData(false)). Other wisw we can't perform the read/write operation on the text box.

Why we are using this function? What this function does?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:19:15.397

该机制称为动态数据交换。当您调用 UpdateData 方法时，它会设置类 CDataExchange 的成员并调用 DoDataExchange。DDX 只不过是内部调用 SetDlgItemText 或 GetDlgItemText 的全局函数。

设置/获取窗口文本的另一种方法是直接调用这些函数，例如

```
CEdit* pBoxOne;
pBoxOne = (CEdit*) GetDlgItem(IDC_EDIT1);
pBoxOne->SetDlgItemText("asd"); 
```

# zend-framework - Aptana Studio 3 + Zend Framework SETUP

> ID：10632644
> 
> 赞同：1
> 
> 时间：2012-05-17T09:02:12.500
> 
> 标签：zend-framework, aptana

I am just starting out with php and I decided to try and use zend framework too. I would like to use Aptana Studio 3 as my IDE (I am using windows 7), and I am trying to get everything setup so I can start developing.

Can anyone point me to a guide on how to setup this environment? I have tried following lots of guides and can't get it to work. I have installed wamp which gave me php and apache. I then installed ZF and added the zf.bat etc to my php directory and can run the zf commands from the console. I have generated a quicstart project but when I start debugging my browser opens

```
http://127.0.0.1:8020/MyProject/quickstart/public/index.php 
```

and the page just shows bootstrap() ->run();

I don't really know what to do now, can anyone help?

# matplotlib - Adding a grid on top of a tif image in python

> ID：10632652
> 
> 赞同：4
> 
> 时间：2012-05-17T09:02:57.367
> 
> 标签：matplotlib

Hi I was wondering how to add a grid on top of my image then display it in python. Here is a picture of what I want to do. NOTE: I also want to specify the line type and color for some of the blocks in the image just like the image below. Thanks a lot. ![this image was generated in matlab](../Images/66f6cfee919e67b7502e98a275319e7b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T21:51:24.243

下面的示例展示了如何显示 .tif 文件、创建网格，以及如何将网格放在其他绘图元素下方，以便您可以在图像和网格上绘制框和线。

```
import matplotlib.pyplot as plt
from PIL import Image
import matplotlib.patches as mpatches

im = Image.open('stinkbug.tif')

# Flip the .tif file so it plots upright
im1 = im.transpose(Image.FLIP_TOP_BOTTOM)

# Plot the image
plt.imshow(im1)
ax = plt.gca()

# create a grid
ax.grid(True, color='r', linestyle='--', linewidth=2)
# put the grid below other plot elements
ax.set_axisbelow(True)

# Draw a box
xy = 200, 200,
width, height = 100, 100
ax.add_patch(mpatches.Rectangle(xy, width, height, facecolor="none",
    edgecolor="blue", linewidth=2))

plt.draw()

plt.show() 
```

您可以使用 matplotlib.patches 在图像上绘制所有类型的形状。要绘制单独的线条，我喜欢使用以下线条，但您也可以使用 matplotlib.lines.Line2D。

```
plt.axvline(x=0.069, ymin=0, ymax=40, linewidth=4, color='r') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:08:25.227

有`imshow`显示图像的功能。在轴的顶部显示网格很简单`grid(True).`

# vba - 将录制的宏设置为动态代码

> ID：10632657
> 
> 赞同：0
> 
> 时间：2012-05-17T09:03:24.230
> 
> 标签：vba, excel

我已经录制了这个宏。它用于插入图表。如何创建图表形状并将其签名到变量以供以后参考？我想将变量传递给范围。我只想更改（52）号。所以如果变量是`row`我如何在下面的代码中使用它。我试过这个

```
("'Simpson'!$K$3:$L$row") 
```

但它不起作用

```
ActiveSheet.Shapes.AddChart.Select
ActiveChart.SetSourceData Source:=Range("'Simpson'!$K$3:$L$52")
ActiveChart.ChartType = xlXYScatterSmooth
ActiveChart.ChartTitle.Select
ActiveSheet.ChartObjects("Chart 5").Activate
ActiveChart.ChartTitle.Text = "integrated function chart"
ActiveSheet.ChartObjects("Chart 5").Activate
ActiveChart.Axes(xlValue).Select
ActiveChart.SetElement (msoElementPrimaryValueAxisTitleHorizontal)
ActiveSheet.ChartObjects("Chart 5").Activate
ActiveChart.SetElement (msoElementPrimaryCategoryAxisTitleAdjacentToAxis)
ActiveSheet.ChartObjects("Chart 5").Activate
ActiveChart.Axes(xlValue, xlPrimary).AxisTitle.Text = "x values"
ActiveSheet.ChartObjects("Chart 5""""").Activate
'How can I delete the legend in one. combining the next two
ActiveChart.Legend.Select
Selection.Delete 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:05:49.250

> 我试过了，它 ("'Simpson'!$K$3:$L$row") 不起作用

试试这个

```
Dim LRow as Long

LRow = 52 '<~~ Change this as required.

ActiveChart.SetSourceData Source:=Range("'Simpson'!$K$3:$L$" & LRow) 
```

# grails - Spring Security message codes are sometimes not replaced

> ID：10632658
> 
> 赞同：2
> 
> 时间：2012-05-17T09:03:27.290
> 
> 标签：grails, user-interface, spring-security

The spring security message codes are sometimes not replaced by the code and appears as it is.. like

> spring.security.ui.forgotPassword.description

instead of the content. This is very occasional. Is this a problem of spring security not loading up?

# php - 带有打印报告的移动 Web 应用程序

> ID：10632664
> 
> 赞同：0
> 
> 时间：2012-05-17T09:03:57.553
> 
> 标签：php, mysql, jquery-mobile

我将在 html5 和 jquery mobile 中使用 php 和 mysql 开发一个 web 应用程序，用于注册餐厅订单以与 android palm 和台式计算机一起使用！

我的问题是服务员挂单的时候直接打印厨房的点单报告；我想使用[谷歌云打印](https://developers.google.com/cloud-print/docs/sendJobs?hl=it)设置厨房打印机..

你怎么看这个？？你有什么例子吗？

另一个问题：是否有“迷你打印机”可以直接使用而不连接到电脑？我希望进一步打印到 A6 页面类型或更小。

提前感谢您的关注，请原谅我的英语不好！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:16:15.407

您可以编写一个桌面应用程序，每隔 x 分钟/秒检查一次数据库中的新订单，如果发现有新订单，则将其发送到打印机。

# javascript - 在 setTimeout 函数方法中使用具有变化值的变量？

> ID：10632666
> 
> 赞同：2
> 
> 时间：2012-05-17T09:04:06.273
> 
> 标签：javascript

如果我以错误的角度来到这个街区，请告诉我。我有一系列我想启动的功能，我希望能够将它们全部设置在一个循环中。

```
for(var jj = 0; jj<monster.frames.length;jj++){
    setTimeout(
        functionName(jj),
        1000*jj
    );
} 
```

问题是，当执行时`functionName(jj)`，它被传递的值`jj`到那时已更改为最后一个循环迭代值。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T09:07:14.647

您需要确保内部函数每次迭代都有一个新变量。最简单的方法是创建一个自执行匿名函数，该函数接收变量作为参数。您还需要修复调用函数的方式 - 现在您将返回值注册`functionName(jj)`为回调。仅当该函数实际返回一个函数时才可以。

```
for(var jj = 0; jj<monster.frames.length;jj++){
    (function(jj) {
        setTimeout(
            function() { functionName(jj); },
            1000*jj
        );
    })(jj);
} 
```

您还可以使用*部分应用程序*来创建新功能。但是，旧浏览器不支持`Function.prototype.bind`，因此您必须为其添加 shim。

```
for(var jj = 0; jj<monster.frames.length; jj++){
    setTimeout(functionName.bind(this, jj), 1000*jj);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:05:52.907

试一试：

```
for(var jj = 0; jj < monster.frames.length; jj++)
{
    (function(x)
    {
        setTimeout(function()
        {
            functionName(x)
        }, 1000 * x);
    })(jj);
} 
```

# algorithm - Haskell：递归定义函数值的有效计算

> ID：10632667
> 
> 赞同：3
> 
> 时间：2012-05-17T09:04:10.783
> 
> 标签：algorithm, haskell, functional-programming, complexity-theory, recurrence

我想计算递归定义的函数值`r(i,j)`，它们由

```
r i j  | i<0 || j<0   = 0
       | i==0 && j==0 = 1
       | otherwise    = (i-1) * r (i-2) j + r (i-1) (j-1) 
```

显然，`NxN`这些系数的表可以在 中计算`O(N^2)`。不幸的是，直截了当的评价，就像

```
[[r i j | j <-[0..50]]| i <- [0..50]] 
```

以极其无效的方式执行（指数复杂性）。显然，Haskell 为每个构建整个递归树`r i j`并忽略先前计算的值`r (i-1) (j-1)`等。

计算这样一个表的优雅有效的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:41:56.413

正如 FUZxxl 所说，这是一个记忆问题。

```
r i j | i < 0 || j < 0 = 0
      | otherwise      = rss !! i !! j

rss = [[r' i j | j <- [0..]] | i <- [0..]]
  where r' 0 0 = 1
        r' i j = (i-1) * r (i-2) j + r (i-1) (j-1) 
```

如果您需要一个精确到 50 的值的显式表，您可以使用`take 51 (map (take 51) rss)`, 或`[[r i j | j <-[0..50]]| i <- [0..50]]`您提到的。否则，您可以直接调用`r`或引用`rss`。

# vim - Vim：函数复制

> ID：10632669
> 
> 赞同：18
> 
> 时间：2012-05-17T09:04:14.460
> 
> 标签：vim

是否有复制完整功能的命令？（不是通过鼠标选择）

例如： --> 将从光标位置`10yy`复制行。 我不知道函数的行数，但想复制整个函数。 `10`

有没有复制整个函数的命令？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-17T11:40:09.333

这就是我在 JavaScript 和 PHP 中所做的：

```
va{Vy 
```

1.  将光标放在我的方法中的某个位置，
2.  `va{`直观地选择代码块，
3.  `V`将选择从按字符转换为按行，
4.  `y`拉扯

如果你太深了，`va{`只选择了你的功能的一部分，你可以做更多`a{`，直到你选择你想要的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-17T09:09:49.567

如果您使用的是 VIM，并且编程语言中的函数体恰好用大括号括起来，您只需将光标放在其中一个大括号上并键入`y%`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-08-19T16:22:51.777

鉴于您的函数被换行符包围，您可以使用`yip`

这将：
`y`- 拉
`i`- 内部
`p`- 段落

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-17T09:51:12.770

花括号语言（如 Java）可以使用`]m`命令导航到函数；一些文件类型也`]]`为此定义。有了这个，您可以使用`[mV]My`（转到函数的开头，开始逐行可视模式，转到函数的结尾，猛拉）。

许多文件类型还定义了函数的折叠。有了它，您可以使用`zCyyzO`（关闭所有折叠，拉动光标下的整个折叠，打开折叠）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-11-04T15:10:31.770

如果你的函数体中有多个嵌套的 {} 对，提取完整函数体的最简单方法是在你的 vimrc 中包含它

```
nn yaf ?function<CR>$V%y<CR> 
```

将光标放在函数体内的任意位置，然后按 yaf。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-06-18T14:51:26.430

我也在分享我的。这适用于 C# 和 Js 代码。

```
" copy method
nnoremap <silent> yaf ?public\|protected\|private\|function<CR>Vj%y
" copy method and paste below
nnoremap <silent> yafp ?public\|protected\|private\|function<CR>Vj%yj%o<ESC>p
" cut method
nnoremap <silent> daf ?public\|protected\|private\|function<CR>Vj%d 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-24T19:39:55.777

老问题，但这是我保留在我的 vimrc 中的一些东西，它适用于将函数体包装在花括号或括号中的语言（Java、PHP 等）：

```
nnoremap <silent> yaf [m{jV]m%y 
```

这映射了键绑定`yaf`（yank 一个函数），它将在函数体内的任何地方工作。它的工作原理如下：

*   `[m`: 转到函数声明的末尾
*   `{j`: 向上移动一段然后向下移动一行，这有助于多行函数声明。`{`只要你的函数声明里面没有空行就可以工作。
*   `V]m`：开始视觉选择（逐行），然后将光标移动到函数体的左括号
*   `%y`: 将光标移动到函数体的右括号，然后猛拉

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-03-06T11:55:45.450

将光标放在函数的起点，然后使用`yap`或`yip`。

*   yip: yank 内段
*   yap：拉一段

# sql - MongoDB中的关系条件

> ID：10632676
> 
> 赞同：0
> 
> 时间：2012-05-17T09:04:44.590
> 
> 标签：sql, mongodb, mongoid, nosql

假设我有一个 mongodb 集合 A 和 B。而 A 对 B 有一个称为 b_id 的外键。

我如何在 MongoDB 中（甚至在 ruby​​ 中更好）执行以下查询：

```
select * from A where b_id not in (select id from B where <some_condition> ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:17:57.917

MongoDB 不执行关系查询（它不是无缘无故地称为*NoSQL*）——但还有其他方法可以完成此任务。

1.  在 Mongo 客户端中运行两步查询，首先获取内部数组，然后使用[$nin 运算符](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24nin)：

    var ids = db.B.find( 条件 ); db.A.find( { b_id: { $nin: ids } } );

2.  如果您仍处于设计阶段，您可以考虑为您的模式使用嵌套文档。例如，如果**B**有很多**A ，那么您可以将****A**数组添加到每个**B**作为属性。（但请记住，[MongoDB 中的文档大小是有限制的](http://www.mongodb.org/display/DOCS/Documents)，因此如果任何给定**B中的****A**的数量可能非常大，这不是一个好的解决方案。）

# ruby-on-rails-3.1 - 如何使用活动记录进行此查询

> ID：10632680
> 
> 赞同：0
> 
> 时间：2012-05-17T09:05:02.930
> 
> 标签：ruby-on-rails-3.1, where

我有三个模型。

```
Mailing

  has_many :trackers, :as => :trackable
  has_many :links

Link

  belongs_to :mailing
  has_many :trackers, :as => :trackable

Tracker

belongs_to :trackable, :polymorphic => true 
```

跟踪器表具有以下列

trackable_id trackable_type

假设我有一个 id 为 1 的邮件对象。

我想获取“链接”和“邮件”类型的所有可跟踪对象

```
mailing = Mailing.find(1) 
```

mailing.trackers 给了我所有匹配 trackable_type = "Mailing" trackable_id = 1 的对象

我想从两种可跟踪类型的跟踪器中获取此邮件的所有记录。

当我做

```
mailing.trackers.where(:tracker_id => mailing.links, :trackable_type => "Link") 
```

我什么都得不到。

我怎样才能得到这些数据？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T05:41:04.107

我能够做到这一点，如下所示：

邮寄.rb

```
Tracker.where("trackable_id = ? and trackable_type = ? or trackable_id in (?) and trackable_type = ?",self.id, "Mailing", self.links, "Link") 
```

这将返回给定 id 的所有邮件类型和链接类型的记录。

# opencv - cvDecodeImage 在 cgi 程序中失败

> ID：10632685
> 
> 赞同：0
> 
> 时间：2012-05-17T09:05:36.180
> 
> 标签：opencv, cgi

在单个应用程序中，下面的代码是可以的

```
CvMat src_image_mat;
cvInitMatHeader(&src_image_mat,1,src_image_data.size(), \
                CV_8U,(void *)src_image_data.c_str());
m_pSrcImage = cvDecodeImage(&src_image_mat, 0); 
```

其中 src_image_data 包含给定 jpeg 文件中的所有字节，调用后，m_pSrcImage 不为 NULL。

但是当这段代码在cgi程序中运行时，cvDecodeImage返回的值为NULL，src_image_data与单个应用程序中的相同。

顺便说一句：在 cgi 上下文中，图片是由一些用户上传的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T07:41:26.483

确保文件已被读入内存为大小为 nSize 的 pData。

```
 CvMat cm = cvMat(1, nSize, CV_8UC1, pData);
    pImage = cvDecodeImage(&cm); 
```

# php - 检测复选框数组是否已被 Smarty 2 勾选

> ID：10632693
> 
> 赞同：0
> 
> 时间：2012-05-17T09:05:50.113
> 
> 标签：php, templates, smarty, smarty2

在我的 Smarty 模板中，我有一系列名为“region_codes”的复选框，其中包含“GB”、“US”、“EU”等值……

这是我的 Smarty 模板中的代码：

```
<input type="checkbox" name="region_codes[]" value="{$region_code}" {if isset($smarty.request.region_codes.$region_code)}checked="yes"{/if} /> 
```

正如您从代码片段中看到的那样，我试图检测提交表单时是否选中了复选框。这是如何在 Smarty 中完成的，因为上面的代码不起作用。它不会抛出错误，但看不到提交的值。

编辑：当我打印出`region_codes`来自 Smarty 模板中的请求的参数时，我得到以下信息：

`[region_codes] => Array ( [0] => EU [1] => RW )`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:16:34.357

```
{if $region_code|in_array:$smarty.request.region_codes}checked="yes"{/if} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:08:58.670

将条件更改为

```
{if $smarty.request.region_codes|in_array:$region_code}checked="yes"{/if} 
```

# python - Matplotlib 和 Pyplot.close() 不释放内存？- 后端相关的 Qt4Agg

> ID：10632694
> 
> 赞同：39
> 
> 时间：2012-05-17T09:05:50.403
> 
> 标签：python, memory, backend, matplotlib

**编辑：如果我明确地将 matplotlib 的后端从“Qt4Agg”更改为“Agg”，那么我就可以毫无错误地运行我的代码。**我认为这是后端的错误？

我正在编写一些代码来自动处理大量数据。代码首先解析我的数据文件并存储所有相关位。然后我有不同的函数来生成我需要的每个图表（总共大约有 25 个）。但是，我一直遇到某种内存错误，我认为这是因为 Matplotlib / PyPlot 没有正确释放内存。

每个绘图函数都以 pyplot.close(fig) 命令结束，因为我只想保存图形而不是立即查看它们，所以它们*不*包含 pyplot.show()。

如果我在解释器中单独运行绘图函数，那么我不会遇到任何问题。但是，如果我创建一个单独的函数来依次调用每个绘图函数，那么我会遇到“MemoryError：无法为路径分配内存”。

有没有人遇到过这样的问题？在循环中绘图时，它似乎与[Matplotlib 内存不足](https://stackoverflow.com/questions/2364945/matplotlib-runs-out-of-memory-when-plotting-in-a-loop-edited)有关，但 pyplot.close() 并不能解决我的问题。

这是我的代码中典型的绘图函数的样子：

```
def TypicalPlot(self, title=None, comment=False, save=False, show=True):

    if title is None:
        title = self.dat.title

    fig = plt.figure()
    host = SubplotHost(fig, 111)
    fig.add_subplot(host)
    par = host.twinx()
    host.set_xlabel("Time (hrs)")
    host.set_ylabel("Power (W)")
    par.set_ylabel("Temperature (C)")
    p1, = host.plot(self.dat.timebase1, self.dat.pwr, 'b,', label="Power",
                    markevery= self.skip)
    p2, = par.plot(self.dat.timebase2, self.dat.Temp1, 'r,', 
                   label="Temp 1", markevery= self.skip)
    p3, = par.plot(self.dat.timebase2, self.dat.Temp2, 'g,', 
                   label="Temp 2", markevery= self.skip)
    p4, = par.plot(self.dat.timebase2, self.dat.Temp3, 'm,', 
                   label="Temp 3", markevery= self.skip)
    host.axis["left"].label.set_color(p1.get_color())
    # par.axis["right"].label.set_color(p2.get_color())
    #host.legend(loc='lower left')
    plt.title(title+" Temperature")

    leg=host.legend(loc='lower left',fancybox=True)
    #leg.get_frame().set_alpha(0.5)
    frame  = leg.get_frame()
    frame.set_facecolor('0.80')

    ### make the legend text smaller
    for t in leg.get_texts():
        t.set_fontsize('small')

    ### set the legend text color to the same color as the plots for added
    ### readability
    leg.get_texts()[0].set_color(p1.get_color())
    leg.get_texts()[1].set_color(p2.get_color())
    leg.get_texts()[2].set_color(p3.get_color())    
    leg.get_texts()[3].set_color(p4.get_color())        

    if show is True and save is True:
        plt.show()
        plt.savefig('temp.png')
    elif show is True and save is False:
        plt.show()
    elif show is False and save is True:
        plt.savefig('temp.png')
        plt.clf()
        plt.close(fig) 
```

如果我现在在终端中运行

```
MyClass.TypicalPlot(save=True, show = False) 
```

然后我没有得到任何错误。我所有的绘图功能也是如此。

如果我创建一个执行此操作的新函数：

```
def saveAllPlots(self, comments = False):

        if self.comment is None: comment = False
        else: comment = True
        self.TypicalPlot(save=True, show=False, comment=comment)
        self.AnotherPlot(save=True, show=False)
        self.AnotherPlot2(save=True, show=False)
        self.AnotherPlot3(save=True, show=False)
        ...etc, etc, etc 
```

然后它遍历大约一半的图表，然后我得到“MemoryError：无法为路径分配内存”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-22T18:07:28.497

我认为它这样做的原因是因为当它遍历所有不同的图表时它会耗尽内存，可能是因为它没有正确释放它。

您为什么不尝试创建大约 3 个左右的程序，每个程序都会做一些图表，而不是一个程序来做所有的图表：

程序 1：图 1-8

程序 2：图 9-16

程序 3：图 17-25

希望这有助于@FakeDIY :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-24T00:35:37.790

我曾经遇到过一个非常相似的问题。我假设 matplotlib 在内部保留每个图的引用。给定以下代码，创建三个单独的图形：

```
import matplotlib.pyplot as plt
import numpy as np

# block 1
f, ax = plt.subplots(1)
plt.plot(np.arange(10), np.random.random(10))
plt.title("first")
print 'first', sys.getrefcount(f), sys.getrefcount(ax)

# bock 2
f, ax = plt.subplots(1)
plt.plot(np.arange(10), np.random.random(10)+1)
plt.title("second")
print 'second', sys.getrefcount(f), sys.getrefcount(ax)

# block 3
f, ax = plt.subplots(1)
plt.plot(np.arange(10), np.random.random(10)+2)
plt.title("third")
print 'third', sys.getrefcount(f), sys.getrefcount(ax)

plt.show()

print 'after show', sys.getrefcount(f), sys.getrefcount(ax) 
```

**输出：**

```
first 69 26
second 69 26
third 69 26
after show 147 39 
```

* * *

这是反直觉的，因为我们多次重新`f`定义`ax`。对于每个块，我们都创建了一个新图形，可以通过`plt`. 创建另一个图形会更改可访问的最顶层引用`plt`。但是必须有一些内部参考，可以`plt.show()`显示所有数字。这些引用似乎是持久的，因此 gc 不会收集这些数字。

我解决的解决方法是更改​​绘图的数据。事后看来，无论如何，这是一种更好的方法：

```
plt.ion()
f, ax = plt.subplots(1)
line = ax.plot(np.arange(10), np.random.random(10))[0]
plt.title('first')
plt.show()

for i, s in [(2, 'second'), (3, 'third')]:
    x = np.arange(10)
    y = np.random.random(10)+i
    line.set_data(x, y)
    ax.set_xlim(np.min(x), np.max(x))
    ax.set_ylim(np.min(y), np.max(y))
    plt.title(s)
    plt.draw()
    raw_input(s) 
```

唯一的缺点是您必须在图形打开的情况下保持窗口。没有这个`raw_input`程序只会运行

# c# - WPF 树视图事件

> ID：10632697
> 
> 赞同：-2
> 
> 时间：2012-05-17T09:05:53.933
> 
> 标签：c#, wpf

我想在 WPF 中创建一个与 windows 应用程序相同的应用程序。当我在 wpf 中使用 treeview 事件时，我没有找到任何类似于 WIndows 应用程序的 treeview_NodeMouseClick 的事件。

//Windows 应用程序代码

```
 private void tv_NodeMouseClick(object sender, TreeNodeMouseClickEventArgs e)
    {
        if (e.Node != null)
        {
            GetAllchield(e.Node, e.Node.Level);

        }

    } 
```

// GetAllchield

```
 public void GetAllchield(TreeNode clickednode, int indexDepth)
    {
        if (clickednode.Nodes.Count > 0 && !clickednode.IsExpanded)
        {
            clickednode.Collapse();
            return;
        }
        string[] FullPath = clickednode.FullPath.Split('\\');
        string rootnode = FullPath[0].ToString();
        //get all market for root event type
        int eventTypeID = DictionaryAllActiveEventTypes[rootnode];
        string[] allMarkets = GetAllMarketForEventID(eventTypeID);

        //selecting unque chield node and populating in tree

        for (int i = 0; i < allMarkets.Length; i++)
        {

            if (allMarkets[i].Contains(clickednode.Text))
            {

                string[] marketDetails = allMarkets[i].Split('~');
                int marketID = Convert.ToInt32(marketDetails[0]);
                string MarketName = marketDetails[1].ToString();
                string MarketStatus = marketDetails[3].ToString();
                string EventHeirarchy = marketDetails[6].ToString();

                string Menupath = marketDetails[5].ToString();
                string[] Arrmenupath = Menupath.Trim(':').Split('\\');

                string chieldText = "";

                if (indexDepth == 0)
                {
                    if (rootnode == "Cricket" || rootnode == "Tennis" || rootnode == "Golf" || rootnode == "Rugby")
                    {
                        if (Arrmenupath[2].Contains("Group") && Arrmenupath[2].Length == 7)
                        {
                            if ((indexDepth + 3) <= Arrmenupath.Length - 1)
                            {
                                chieldText = Arrmenupath[indexDepth + 3].ToString();
                            }
                        }
                        else
                        {
                            if ((indexDepth + 2) <= Arrmenupath.Length - 1)
                                chieldText = Arrmenupath[indexDepth + 2].ToString();
                        }
                    }
                    else
                        if ((indexDepth + 2) <= Arrmenupath.Length - 1)
                            chieldText = Arrmenupath[indexDepth + 2].ToString();
                }
                else
                {
                    if (Arrmenupath[Arrmenupath.Length - 1] == clickednode.Text)
                        chieldText = MarketName;
                    else
                    {

                        if (allMarkets[i].Contains(clickednode.Text) && allMarkets[i].Contains(clickednode.Parent.Text) && allMarkets[i].Contains(rootnode))
                        {
                            if (rootnode == "Cricket" || rootnode == "Tennis" || rootnode == "Golf" || rootnode == "Rugby")
                            {
                                if (Arrmenupath[2].Contains("Group") && Arrmenupath[2].Length == 7)
                                {
                                    if ((indexDepth + 3) <= Arrmenupath.Length - 1)
                                    {
                                        chieldText = Arrmenupath[indexDepth + 3].ToString();
                                    }
                                }
                                else
                                {
                                    if ((indexDepth + 2) <= Arrmenupath.Length - 1)
                                        chieldText = Arrmenupath[indexDepth + 2].ToString();
                                }
                            }
                            else
                                if ((indexDepth + 2) <= Arrmenupath.Length - 1)
                                    chieldText = Arrmenupath[indexDepth + 2].ToString();
                        }
                    }
                }

                //check whether node is already added

                //if (chieldText.Contains("MiWay"))
                //{ }

                if (!string.IsNullOrEmpty(chieldText))
                {
                    if (clickednode.Nodes.Count >= 1)
                    {
                        bool doesNodeAlreadyExist = false;
                        foreach (TreeNode node in clickednode.Nodes)
                        {
                            if (node.Text == chieldText)
                            {
                                doesNodeAlreadyExist = true;
                                break;
                            }
                        }
                        if (!doesNodeAlreadyExist)
                        {
                            clickednode.Nodes.Add(chieldText);
                        }
                    }
                    else
                    {
                        clickednode.Nodes.Add(chieldText);
                    }
                }

            }
        }
        clickednode.Expand();
    } 
```

我想在 WPF 中使用相同的。请帮助我，或者如果你明白了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T11:33:23.220

您可以使用 MouseLeftButtonDown 并检查 sender 参数或使用 SelectedItemChanged

# python-imaging-library - 如何使用 python 图像库打开图像？

> ID：10632698
> 
> 赞同：0
> 
> 时间：2012-05-17T09:05:55.007
> 
> 标签：python-imaging-library

我第一次使用带有 python 的图像库，并试图在我的电脑上打开一个图像。所以我输入

```
Image.open(C:\Users\laurence\Google Drive\INB347 web 2.0) 
```

我不断得到这个：

`SyntaxError: invalid syntax:`C 后面的冒号以红色突出显示。

我正在遵循的手册中没有提到这一点。该示例使用了一个更简单的文件位置：('bride.jpg')。请问怎么打开图片文件？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T00:45:51.010

尝试这个：

```
Image.open(r'C:\Users\laurence\Google Drive\INB347 web 2.0') 
```

即，用引号将您的完整路径括起来，并放在`r`它前面以表示它是一个“原始”字符串，这意味着 Python 不会尝试将它解释为除了引号之间的任何内容之外的任何内容。[您可以在此处](http://docs.python.org/reference/lexical_analysis.html#string-literals)阅读有关原始字符串的更多信息。

# symfony - Symfony2 形式。使用 2 个表单字段和 3 个表来为第 4 个表的记录返回一个 id？

> ID：10632699
> 
> 赞同：0
> 
> 时间：2012-05-17T09:05:57.477
> 
> 标签：symfony

我有 3 个提供地理位置数据的表（针对这篇文章进行了简化）。

```
countries:
  id:
  name:

country_regions:
  id:
  country_id: (fk to countries:id)
  name:

country_region_cities:
  id:
  country_region_id: (fk to country_regions:id)
  postal_code:
  name: 
```

当有人去添加地址时，我希望他们选择一个国家并输入他们的邮政编码。由于世界上多个城市可能有相同的邮政编码，这使我们能够找出它们的位置。在 country_region_cities 表中。使用与此类似的查询。

```
SELECT 
  crc.id as crc_id
FROM
  countries c,
  country_regions cr,
  country_region_cities crc
WHERE 
  c.id=231 and
  crc.postal_code='02199' and
  cr.country_id = c.id and
  cr.id = crc.country_region_id 
```

这是存储在 crc.id 上的任何需要地址数据的表中，而不是存储完整地址。我不确定如何将 2 个字段（country_id 和 postal_code）添加到表单中，并将 country_region_city:id 存储在需要它的表的数据库字段中。

我有一种感觉，我需要创建一个 AbstractType 并将其链接到需要存储关系的表单，但是我是否需要为涉及的其他 2 个表创建更多 AbstractTypes？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T13:54:08.560

这样做的方法是通过 Symfony 食谱中描述的自定义数据转换器对象。

[http://symfony.com/doc/current/cookbook/form/data_transformers.html](http://symfony.com/doc/current/cookbook/form/data_transformers.html)

一旦我意识到这一点，我在几个小时内就完成了任务，而且工作很愉快！

# ios - 如何在 MFMailComposeController 中实现类似于电子邮件文本字段的 UITextField

> ID：10632703
> 
> 赞同：1
> 
> 时间：2012-05-17T09:06:11.917
> 
> 标签：ios, uitextfield, mfmailcomposeviewcontroller

在`MFMailComposeController`中，一旦我们开始输入，就会显示电子邮件地址列表。选择后，TextField 会以小的椭圆形背景显示用户名。然后我们可以继续打字。如果我们想删除它，然后按退格键选择椭圆背景，然后在第二个退格键上删除电子邮件地址。这怎么可能实现。

我对搜索部分不感兴趣。我对实施它很好。但我更感兴趣的是让 TextField 在 MFMailComposeController 中工作。为已输入的电子邮件设置蓝色椭圆背景的方式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T10:45:16.217

您可以使用许多开源实现，其中一个名称是[TITokenFieldView](https://github.com/enriquez/TITokenFieldView)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:20:50.960

如果你只是想搜索一组地址、字符串或任何你可以实现的东西，你就会完成你的工作。这是[UISearchDisplayController iPhone](http://ygamretuta.me/2011/08/10/ios-implementing-a-basic-search-uisearchdisplaycontroller-and-interface-builder/)`UISearchDisplayController`上的链接。

否则，如果您想拥有自己，则必须拥有一个带有 UITableView 的 UITextField，并且您必须实现 UITextField 的委托方法才能通过 tableview 的数据源搜索自动完成功能。使用 UITableView 和 UITexField 的委托来实现您的逻辑。

# c# - mvc3 多行编辑器

> ID：10632704
> 
> 赞同：2
> 
> 时间：2012-05-17T09:06:28.190
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3, razor

我有一个与模型紧密绑定的视图。该模型有一个字符串属性[语句]，并且我使用该属性来捕获用户数据。在视图中，我希望 [statement] 成为多行 EditorFor 字段。在我的模型中，我对属性应用了属性/数据注释，属性为 [DataType(DataType.MultiLineText)] 但它似乎不起作用？请帮忙

```
 @item.EditorFor(m => m.UserName)
    @item.EditorFor(m => m.Email)
    @item.PasswordFor(m => m.Password)
    @item.PasswordFor(m => m.ConfirmPassword)
    @item.EditorFor(m => m.statement)
    <span id="admin">
    @item.CheckboxFor(m => m.IsAdmin)
    </span> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T11:05:22.190

你[`TextAreaFor`](http://msdn.microsoft.com/en-us/library/ee703551.aspx)不需要`EditorFor`：

```
@item.TextAreaFor(m => m.MyField) 
```

# ruby-on-rails - Rails 查询对象类有什么不同？

> ID：10632719
> 
> 赞同：2
> 
> 时间：2012-05-17T09:07:30.533
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

```
@category = Category.where(:category_name => 'cricket')
@category.class 
```

这里@category 的类是“ActiveRecord::Relation” 但是，

```
@category = Category.all(:conditions => { :category_name => 'cricket' })
@category.class 
```

在这种情况下，@category 的类是“Array”

两个查询的结果是相同的，那么类也是不同的。 **为什么？**

还有一件事......在第一种情况下，我可以做@category.title 或@category.body 等。但在第二种情况下，这是不可能的。 **为什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:17:52.247

在第一种情况下，您实际上是在使用默认范围并将其与`where`部件一起归因。这意味着，当您要使用此 Relation 的项目时，它将按需运行 SQL 查询。将其视为已准备好但尚未运行查询，这将在需要时产生值，并且您可以进一步指定参数，例如您可以附加另一个 where 子句或其他内容。当然它比简单的数组更聪明，因为这背后的实现更复杂。

在第二种情况下，您立即从数据库中获取所有记录，因此结果是一个包含结果的数组。与另一部相比，它非常愚蠢。

# c# - C#：使用枚举将一个对象强制转换为特定对象

> ID：10632724
> 
> 赞同：0
> 
> 时间：2012-05-17T09:08:03.903
> 
> 标签：c#, .net, enums

编辑：希望这会有所帮助，了解我想要做什么。

我返回了一个 Object 类型的对象，在这个对象中我有一个 int 值，基于这个 int 值，我希望能够使用枚举来告诉我应该将该对象应用于哪个特定对象。

Enum 包含所有可能的大小写。

我将收到一个通用对象（对象类型），在这种类型的模型中，它可以是许多不同的更具体的对象之一。我希望能够在对象内部查看一个 int 值，它会告诉我要使用哪个强制转换。

例如，一个有 objectA 并且它在对象内有一个 int 值设置为“2”，我想根据我的枚举值 2 将此对象转换为我的特定对象，该值设置为特定类型。

这可能非常简单，但无法弄清楚您将如何做到这一点，如果可能的话，谢谢。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:10:02.433

如果您的意思是要在执行时更改`objectA` *变量*的类型，答案是否定的。*编译器需要知道在编译时*完成的各种事情的变量类型。

如果您使用的是 C# 4，您可能可以使用`dynamic`来帮助您 - 但目前还不清楚您想要实现的目标。在许多情况下，最好创建一个所有类型都实现的通用接口，然后将变量的类型设置为接口类型。这不是普遍适用的，但是当它起作用时它是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T09:12:27.093

您是否尝试将一个枚举类型转换为另一个枚举？

```
 Enum Type1
    {
      A
      B
    };

    Enum Type2
    {
      A,
      B
    };

    Type1 type1 = Type1.A;
    if(Enum.IsDefined(typeof(Type2), type1.A.ToString())
    {
       Type2 type2 = (Type2)Enum.Parse(typeof(Type2), type1.A.ToString());
       //type2 now holds Type2.A
    } 
```

**编辑**

如果您想在运行时更改对象的类型，这是不可能的。

如果您只是指强制转换，（相同的对象不同的表示对应于实现的接口、基类等），这是可能的，但这里的对象类型不会改变。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T09:36:39.550

有点难以理解你想要什么。但这是我的看法。您的所有类都需要实现接口`ITypeContainer`才能提取枚举值。

```
void Main()
{
    ....
    ....
    CastToType((ITypeContainer)myObject);
}

public void CastToType(ITypeContainer obj)
{
    switch (obj.ObjectType)
    {
        case TypeEnum.Test1:
            var o1 = (Test1)obj;
            break;
        case TypeEnum.Test2:
            var o2 = (Test2)obj;
            break;
    }
}

public class Test1 : ITypeContainer
{
    public TypeEnum ObjectType{ get; set; }  
}

public class Test2 : ITypeContainer
{
    public TypeEnum ObjectType{ get; set; }  
}

public enum TypeEnum
{
    Test1,
    Test2,
    Test3
}

public interface ITypeContainer
{
    TypeEnum ObjectType{ get; set; }  
} 
```

# azure - 开发人员是否必须为在 Windows Azure Marketplace 上发布 SaaS 应用程序付费？

> ID：10632728
> 
> 赞同：4
> 
> 时间：2012-05-17T09:08:22.167
> 
> 标签：azure, azure-marketplace

目前我正在构建一个简单的 SaaS 驱动的 TMS。目的是在 Windows Azure Marketplace 中发布它。我找不到任何定价。Microsoft 是否向开发人员收取发布费用？是按月计算的吗？还是所有托管在 Windows Azure 上的应用程序都可以在市场上发布（如果这只是一个词）？

或者......他们是否会收取您要求的订阅价格的百分比？

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T11:05:46.950

我不知道 TMS 是什么，但是... Windows Azure Marketplace 允许您发布您的应用程序并销售每月订阅。您可以选择定价层和对这些层的限制（可能是存储量、报告等）。市场处理服务的收款激活/停用（通过发送您的应用程序特殊消息），并在市场本身推广应用程序。

任何 Windows Azure 应用程序都可能在市场中*列出*，但通过市场计费的应用程序必须是 SaaS 应用程序。

发布没有成本，但市场收取佣金（我不记得百分比）。

编辑：这是您在发布时必须签署的[协议。](https://publishing.marketplace.windowsazure.com/Agreement)它包含付款和费用结构的完整详细信息。

# ios - iOS 应用的新用户与更新用户

> ID：10632739
> 
> 赞同：0
> 
> 时间：2012-05-17T09:09:21.577
> 
> 标签：ios, flurry

我们在 Apple 应用商店上运行了几个月的应用程序，但该应用程序不包含 Flurry 分析。

我们最近使用新版本更新了该应用程序，并将 Flurry 分析功能包含在该应用程序中。

与新用户 iTunes 销售和趋势报告相比，Flurry 仪表板正确报告了“新用户”，但是，iTunes 还报告了已下载的应用程序的数百个“更新”——但这些不包括在“新用户”中“指望Flurry。

这是否意味着 Flurry 只报告实际的新应用下载量，而根本不将应用更新视为新用户？

我们正在使用 Flurry 的 Appcelerator 模块。

请您帮助我了解在将 Flurry SDK 集成到应用程序时是否需要做任何特殊/额外的事情，以确保更新应用程序的用户也包含在 Flurry 的新用户计数中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T00:59:38.663

一个有趣的事实。

尝试使用具有通用名称的参数创建事件（查看事件参数中圆圈中的事件计数），并从每个设备一次发送。

然后，您可以计算所有活跃用户。但是如果用户重新安装应用程序，那么他可以在第二次发送，这是不好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T01:03:42.283

Flurry 不能将更新用户报告为“更新用户”，因为它只是发现了他们。就 Flurry 而言，您的*所有*用户都是新用户，因为它以前从未见过他们中的任何一个。当您使用 Flurry 发布第二个版本时，您将获得正确的指标。（当然，希望从 1.0 版本直接更新的少数人除外。）

**编辑：**我想我完全误解了你的问题。我认为您的不匹配可能是由于 Flurry 只能报告至少启动过您的应用程序[新版本] 一次的用户，而 iTunes Connect 将报告*所有*新用户和更新用户。

# javascript - 测试日期是否与 iCalendar 重复事件匹配

> ID：10632740
> 
> 赞同：1
> 
> 时间：2012-05-17T09:09:22.867
> 
> 标签：javascript, php, icalendar, rfc5545

我正在寻找一种[iCalendar](https://www.rfc-editor.org/rfc/rfc5545)规则匹配算法，该算法将允许我验证用户输入的特定日期是否落在由 iCal 重复事件规则确定的日期。

例如：

*   用户输入`Nov 1, 2014`（假设我可以解析日期）
*   ical事件的重复规则为`FREQ=MONTHLY;BYMONTHDAY=1`（这基本上意味着该事件发生在每个月的第一天）

很明显，2014 年 11 月 1 日确实是该事件中的某个日期。我怎样才能以编程方式解决这个问题？在给定开始日期的情况下，如何获取由重复规则确定的日期列表？

有没有这样做的示例或库？

我主要在寻找 JS 和 PHP 库/片段，但任何类型的伪代码都应该没问题。

**澄清**：iCalendar 指的是 RFC 5545 Internet Calendaring and Scheduling Core Object Specification

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:02:09.153

对于 PHP：phpicalendar（[此处](http://phpicalendar.net/)），问题是该算法不容易与 JS 的其余代码隔离，有一些尝试，但我从未检查它们是否真的与 rfc5545 足够兼容。

这完全取决于您需要多少合规性：例如，添加时区支持将使您能够解决国家失去一天的罕见情况（例如萨摩亚岛，它在 2011 年 12 月 29 日至 12 月 31 日跳过）。

# google-chrome - Chrome -> 检查元素 -> 网络 (XHR) -> 预览选项卡 (HTML) 问题

> ID：10632748
> 
> 赞同：7
> 
> 时间：2012-05-17T09:09:54.537
> 
> 标签：google-chrome, xmlhttprequest, response, preview, inspect-element

我在网络部分的预览选项卡有问题。返回 HTML 时，我会在预览和响应中看到原始 HTML。有时，但很少，我的 HTML 在预览选项卡中正确呈现。

我做错了什么还是只是一些 Chrome 错误？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T16:26:36.257

我也在测试这个。对我来说是添加 http 标头。

```
header('HTTP/1.1 500 Internal Server Error'); 
```

然后当然是一些适当的标记格式。但是状态码是我说服 chrome 渲染预览所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T11:27:21.000

`Content-Type`添加适当的标题后问题就解决了。如果是`text-html`，那么无论您从服务器发送什么内容，它都会像普通文本一样显示内容。我遇到了同样的问题，并通过在 $.ajax 选项中强制输出类型来解决它。当我把它改成现在`application/json`它的格式很好。

# jquery-ui - Cakephp 2.0 实现 jquery UI

> ID：10632749
> 
> 赞同：1
> 
> 时间：2012-05-17T09:09:58.537
> 
> 标签：jquery-ui, cakephp-2.0

好的，所以我正在使用 cake PHP 2.0 ..刚开始使用它，所以我完全是菜鸟。我想使用对话框来显示应用程序的一些消息，这样我就可以为 jquery UI 包含必要的 javascript 文件和 css。

但是当我定义函数时，它不起作用，而是当我查看源代码时，我定义函数的脚本块看起来不完整，因为结束标记 '' 没有突出显示。我希望我说得通。这是代码片段：

```
<script>
$(function() {
    $( "#dialog" ).dialog();
});
</script>
<div id="dialog" title="Basic dialog">
<p>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the 'x' icon.</p>
</div> 
```

在“index.ctp”中。我确定 js 源文件已正确加载，我是从 jqueryUi 站点获取的。如果有人能帮助我开始在 cakePHP2.0 中编写 javascript，我将不胜感激。万分感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-22T11:04:19.317

您应该考虑使用 cake's [block](http://book.cakephp.org/2.0/en/views.html#view-blocks "堵塞")或[Element](http://book.cakephp.org/2.0/en/views.html#elements "元素") “迷你视图”。为此，我会使用一个元素。

在 app/view/Elements/loginDialog.ctp 中放置类似的内容。我将在下一节解释变量在哪里贴花。

```
<div id="dialog" title="Basic dialog">
 <?php echo $this->Form->create($ModelName); ?>
 <?php
     $this->Form->input('username');
     $this->Form->input('password');
   ?>
 <?php $this->Form->end('Login'); ?>      
</div> 
```

在您的 app/View/ControllerName/action_name.ctp 中，包含类似这样的内容。请注意，我能够传入变量（就像我用于第一种形式参数的变量一样）。

```
 //in the view file
 echo $this->element('loginDialog', array('ModelName'=>'User')); 
```

最后，您需要添加 js。你可以把它放在你的 app/View/Layout/default.ctp 中。例如，假设您的导航中有一个登录链接，您想触发此对话框：

```
<script>
$(document).ready(function(){
  $("#loginNavLink").on("click", function(event){
    $('#dialog').dialog();
  });      
})
</script> 
```

希望这可以帮助！

# entity-framework - 合并自跟踪实体

> ID：10632752
> 
> 赞同：0
> 
> 时间：2012-05-17T09:10:02.843
> 
> 标签：entity-framework, merge, self-tracking-entities

存储在数据库中的对象图和相同的对象图被序列化成二进制包。包通过网络传输到客户端，然后需要合并来自包的数据和来自数据库的数据。

合并源代码：

```
 //objList - data from package
        var objectIds = objList.Select(row => row.ObjectId).ToArray();

        //result - data from Database
        var result = SomeService.Instance.LoadObjects(objectIds);

        foreach (var OSobj in objList)
        {
            var obj = result.Objects.ContainsKey(OSobj.ObjectId)
                ? result.Objects[OSobj.ObjectId]
                : result.Objects.CreateNew(OSobj.ObjectId);

            var targetObject = result.DataObjects.Where(x => x.ObjectId == OSobj.ObjectId).FirstOrDefault();

            targetObject.StopTracking();
            var importedProperties = ImportProperties(targetObject.Properties, OSobj.Properties);
            targetObject.Properties.Clear();
            foreach (var property in importedProperties)
            {
                targetObject.Properties.Add(property);
            }
            targetObject.StartTracking();
        }

        return result; 
```

ImportProperties 方法的代码：

```
static List<Properties> ImportProperties(
        IEnumerable<Properties> targetProperties,
        IEnumerable<Properties> sourceProperties)
    {
        Func<Guid, bool> hasElement = targetProperties
            .ToDictionary(e => e.PropertyId, e => e)
            .ContainsKey;

        var tempTargetProperties = new List<Properties>();
        foreach (var sourceProperty in sourceProperties)
        {
            if (!hasElement(sourceProperty.PropertyId))
            {
                sourceProperty.AcceptChanges();
                tempTargetProperties.Add(sourceProperty.MarkAsAdded());
            }
            else
            {
                sourceProperty.AcceptChanges();
                tempTargetProperties.Add(sourceProperty.MarkAsModified());
            }
        }

        return tempTargetProperties;
    } 
```

服务器保存传入的更改，如下所示：

```
_context.ApplyChanges("OSEntities.Objects", entity);
_context.SaveChanges(SaveOptions.DetectChangesBeforeSave); 
```

当服务器尝试保存更改时发生异常：

> AcceptChanges 无法继续，因为对象的键值与 ObjectStateManager 中的另一个对象冲突。在调用 AcceptChanges 之前确保键值是唯一的。

但是如果我更改 ImportProperties 方法的代码，则不会发生错误并且更改已成功保存：

```
static List<Properties> ImportProperties(
        IEnumerable<Properties> targetProperties,
        IEnumerable<Properties> sourceProperties)
    {
        Func<Guid, bool> hasElement = targetProperties.ToDictionary(e => e.PropertyId, e => e).ContainsKey;

        var tempTargetProperties = new List<Properties>();
        foreach (var sourceProperty in sourceProperties)
        {
            if (!hasElement(sourceProperty.PropertyId))
            {
                var newProp = new Properties
                                  {
                                      ElementId = sourceProperty.ElementId,
                                      Name = sourceProperty.Name,
                                      ObjectId = sourceProperty.ObjectId,
                                      PropertyId = sourceProperty.PropertyId,
                                      Value = sourceProperty.Value
                                  };

                tempTargetProperties.Add(newProp);
            }
            else
            {
                var modifiedProp = new Properties
                                       {
                                           ElementId = sourceProperty.ElementId,
                                           Name = sourceProperty.Name,
                                           ObjectId = sourceProperty.ObjectId,
                                           PropertyId = sourceProperty.PropertyId,
                                           Value = sourceProperty.Value
                                       };

                modifiedProp.MarkAsModified();
                tempTargetProperties.Add(modifiedProp);
            }
        }

        return tempTargetProperties;
    } 
```

为什么会有例外？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T07:35:34.787

当您将对象图（具有 n 级深度导航属性的实体）传输到客户端应用程序时，实体将记录在其各自的更改跟踪器中所做的任何更改。当实体（或对象图）被发送回应用程序的服务器端时，基本上您需要做的就是：

```
try
{
  using(Entities context = new Entities())
  {
    context.ApplyChanges(someEntity);
    context.SaveChanges();
  }
}
catch
{
  ...
} 
```

我认为不需要您发布的所有代码。你想用那个代码实现什么？

# java - 用 XSL 转换 XSL

> ID：10632759
> 
> 赞同：-2
> 
> 时间：2012-05-17T09:10:39.957
> 
> 标签：java, xml, xslt, xalan

关于马丁答案的问题：Martin Honnen 的答案效果很好，但不适用于根元素。假设我有“汽车”作为根元素：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="foo">
        <cars>
            <car1 />
            <car2 />
        </cars>
    </xsl:template>
</xsl:stylesheet> 
```

我想获得：

```
<xsl:template match="foo">
    <cars>
        <car1 />
        <car2 />
        <TANK />
    </cars>
</xsl:template> 
```

为此，我会使用：

```
<xsl:template match="cars" >
  <xsl:copy>
    <xsl:apply-templates/>
    <TANK />
  </xsl:copy>
</xsl:template> 
```

它输出准确的输入，而不改变任何东西。我可以试试：

```
<xsl:template match="/" >
  <xsl:copy>
    <xsl:apply-templates/>
    <TANK />
  </xsl:copy>
</xsl:template> 
```

但它会将 TANK 节点放在样式表之外，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="order">
    <cars>
        <car1/>
        <car2/>
    </cars>
</xsl:template>
</xsl:stylesheet><TANK/> 
```

如何获得汽车内部的坦克元素？

原始问题：我有一个用于转换 XML 的 XSL：

`XML_format1 -> XSL1 -> XML_format2`

我需要转换第一个 XSL 文件（使用第二个 XSL）以获得第三个 XSL 文件，该文件将输出第三种格式的 XML。简而言之：

```
XSL1 -> XSL2 -> XSL3

XML_format1 -> XSL3 -> XML_format3 
```

使用以下样式表，我可以复制第一个 XSL 的内容并跳过某些节点：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 

<xsl:template match="@*|node()">
   <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
   </xsl:copy>
</xsl:template>

<xsl:template match="//skipThisNode"/>

</xsl:stylesheet> 
```

我的问题：除此之外，我还需要更改一些节点的结构（添加一些东西），从这个：

```
<car>
    <color>green</color>
    <fuel>petrol</fuel>
</car> 
```

对此：

```
<car>
    <color>green</color>
    <fuel>petrol</fuel>
    <topSpeed>99</topSpeed>
</car> 
```

LE：我可以创建一个模板来匹配我需要添加子节点的特定节点，如下所示：

```
<xsl:template match="car">
    <color>
        <!-- existing value-of -->  
    </color>
    <fuel>
         <!-- existing value-of --> 
    </fuel>
    <topSpeed>
        <!-- * new value-of * -->  
    </topSpeed>
</xsl:template> 
```

但这似乎有点过头了。有没有更简单的方法来实现我想要的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:31:08.403

我宁愿用

```
<xsl:param name="newSpeed" select="99"/>

<xsl:template match="car">
  <xsl:copy>
    <xsl:apply-templates/>
    <topSpeed>
      <xsl:value-of select="$newSpeed"/>
    </topSpeed>
  </xsl:copy>
</xsl:template> 
```

这使处理链保持正常，允许您添加模板以`car`在需要时转换或删除元素的子元素和后代。

[编辑] 我不确定我是否理解您的最新要求，因为输入似乎是一个完整的样式表，但作为想要的输出，您只显示了一个模板。所以假设你有输入

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="order">
        <cars>
            <car1 />
            <car2 />
        </cars>
    </xsl:template>
</xsl:stylesheet> 
```

并且您想要转换`xsl:template`我将使用的模板正文中的 match 属性以及文字结果元素

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="xsl:template[@match = 'order']/@match">
    <xsl:attribute name="{name()}">
      <xsl:text>foo</xsl:text>
    </xsl:attribute>
  </xsl:template>

  <xsl:template match="xsl:template[@match = 'order']/cars">
    <xsl:copy>
      <xsl:apply-templates/>
      <TANK/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

这样我得到（用 Saxon 6.5.5 测试）结果

```
<?xml version="1.0" encoding="utf-8"?><xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:template match="foo">
        <cars>
            <car1/>
            <car2/>
        <TANK/></cars>
    </xsl:template>
</xsl:stylesheet> 
```

希望这是您想要的（可能缺少适当的缩进）。

# java - EJB 是否适合游戏服务器？

> ID：10632760
> 
> 赞同：2
> 
> 时间：2012-05-17T09:10:41.220
> 
> 标签：java, ejb

我必须做一个由 EJB 应用程序和一些远程客户端组成的大学项目。我正在考虑开发一款多人游戏，最好是回合制。它将在移动设备上运行，应用服务器将协调游戏、配对、统计等。

EJB 是一个可行的解决方案吗？我在这里看到的最大问题是在不同的客户端（会话 bean）之间共享游戏状态。当玩家在游戏中移动时，我将如何将状态更改推送给其他客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:21:37.390

如果您不需要实时体验，它可以工作。它是可靠的，并且设计为可在网络上使用。您可以简单地尝试从每个客户端获取游戏状态更改，就像在基于常规浏览器的游戏中所做的那样。

# objective-c - 访问另一类的财产

> ID：10632764
> 
> 赞同：0
> 
> 时间：2012-05-17T09:11:01.977
> 
> 标签：objective-c, xcode4

如何从另一个类访问 ViewController 属性？
（ViewController 是由 XCode 创建的）

这是 ViewController.h 的代码：

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"

@interface ViewController : UIViewController{
    AppDelegate *appDelegate; //il delegate disponibile per tutta la classe
    int numPag; //indice array (sulle pagine html da visualizzare)

    NSString *path;
    NSURL *baseURL;

    NSString *file;
    NSString *contentFile;

}

- (IBAction)sottrai:(id)sender;

- (IBAction)aggiungi:(id)sender;

@property (strong, nonatomic) IBOutlet UILabel *valore;
@property (strong, nonatomic) IBOutlet UIWebView *web;

@end 
```

谢谢！

[编辑]

我使用 Xcode 4.3.2 和 AppDelegate.m 的代码找不到类似的东西：

```
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil]; 
```

现在，我在方法 didFinishLaunchingWithOptions:(into AppDelegate.m) 中输入了这段代码：

```
 viewController = [[UIViewController alloc] initWithNibName:@"ViewController" bundle:nil];

[viewController.web loadHTMLString:contentFile baseURL:baseURL]; 
```

在文件 AppDelegate.h 中添加变量 viewController：

```
#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate>{
    NSArray *pageInItalian;
    NSArray *pageInEnglish;
    UIViewController *viewController; 

}

@property (strong, nonatomic) NSArray *pageInLanguage;
@property (strong, nonatomic) UIWindow *window;

@end 
```

我做对了吗？错误是：在“UIViewController *”类型的对象上找不到属性“web”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:14:24.783

我想这篇文章可能会回答你的问题

[如何访问另一个类的变量？](https://stackoverflow.com/questions/658697/how-can-i-access-variables-from-another-class)

您需要使您的变量可以从外部类（使用@property 和@synthesize）访问，然后您的外部类需要知道您的 ViewController 实例

**[编辑]**

在您的 AppDelegate.m 中，必须有这样一行：

```
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil]; 
```

这是您的 ViewController 实例化的地方。从那里，您可以访问 ViewController 的每个属性。

**[编辑]**

您需要在实施开始时添加以下内容

```
@implementation ViewController

@synthesize web; 
```

# android - Android - 从 http 下载压缩答案

> ID：10632766
> 
> 赞同：0
> 
> 时间：2012-05-17T09:11:25.507
> 
> 标签：android, compression, gzip

我正在尝试从服务器获取压缩数据。编写服务器程序的人告诉我，他在 iPhone 上使用 ZLIB 库，在服务器上使用 gzcompress。我试图找到任何合适的方法来获取该数据，但它在创建 GZIPInputStream 对象时以信息“java.io.IOException：未知格式（幻数 9c78）”结束。最后，我达到了将数据作为字符串的地方。它被压缩了，所以我用那个答案来解压：[https](https://stackoverflow.com/a/6963668/419308) ://stackoverflow.com/a/6963668/419308 。但是该代码不起作用。"in.read()" 在开头返回 -1。

任何人都知道为什么有 -1 ？或者也许是获取压缩数据的更好方法？

编辑：我尝试将文件添加到项目并从该文件中读取。in.read() 没有返回 -1

EDIT2：根据[jJ的回答](https://stackoverflow.com/a/10633482/419308 "jJ的回答")我试过这个代码：

```
HttpGet request = new HttpGet( urlTeam );
HttpResponse response = new DefaultHttpClient().execute( request );
HttpEntity entity = response.getEntity();

InputStream stream = AndroidHttpClient.getUngzippedContent( entity );

InputStreamReader reader = new InputStreamReader( stream );
BufferedReader buffer = new BufferedReader( reader );

StringBuilder sb = new StringBuilder();
sb.delete( 0, sb.length() );
String input;
while ( ( input = buffer.readLine() ) != null )
{
     sb.append( input );
} 
```

但是答案仍然是压缩的（或不可读的）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:58:51.143

在 android 上，您应该使用[HttpURLConnection](http://developer.android.com/reference/java/net/HttpURLConnection.html)为您处理来自 GingerBread 的解压缩（和 http 编码标头），或者使用具有 getUngzippedContent 和 modifyRequestToAcceptGzipResponse 等辅助方法的[AndroidHttpClient](http://developer.android.com/reference/android/net/http/AndroidHttpClient.html)（对于较旧的 android 版本）。

这是一个很好的总结[Android HTTP 客户端](http://android-developers.blogspot.com/2011/09/androids-http-clients.html)

# asp.net - asp.net 中的电子邮件发送方法

> ID：10632769
> 
> 赞同：0
> 
> 时间：2012-05-17T09:11:37.897
> 
> 标签：asp.net, email

在我的项目中，必须向我的经理建议电子邮件发送方法。作为设计文件的一部分。

以下是可用的方法。请分享您对这些方法的利弊的看法

方法 1：使用第三方 SMTP 优点：随时可用 缺点：成本

方法 2：在 Windows Azure 上托管自己的 SMTP 优点： 缺点：

方法 3：使用公共电子邮件帐户优点：没有额外的成本或依赖性。缺点：在设计和实施方面需要更多的努力。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T06:43:00.037

这完全取决于每天发送的电子邮件的数量。如果您每天有大量的电子邮件（例如... 20000+），则方法 1 是理想的选择。第三方邮件服务器旨在处理大量电子邮件。

如果您有中小型电子邮件操作，我建议您使用 Windows 虚拟服务器托管...

优点：它具有成本效益（每月 15 到 20 美元）、编码的极大灵活性和对环境的完全控制。

如果您的电子邮件操作非常小（每天少于几百封电子邮件），请尝试共享主机......它几乎不会花费一些错误，但您可以很好地控制您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T14:23:03.280

根据我的经验，优缺点主要取决于您提供的任何可用电子邮件选项的总使用量以及您使用公共电子邮件服务的舒适程度。我看到一些合作伙伴想使用 Azure + Office 365 捆绑解决方案，但其他合作伙伴选择 Azure + 3rd 方服务提供商。

如果您每天发送几封电子邮件，每月发送几百封电子邮件，那么与拥有自己的 SMTP 服务器做这项工作相比，公共服务是不错的选择。如果您正在考虑创建大量电子邮件，使用您自己的 SMTP 将节省您的资金，但会花费您的维护费用。你也可以使用 Office365 更高的帐户，你可能会得到一些中间的东西。

代码方面，您将在 Windows Azure 应用程序中添加几乎相同数量的代码，因此我认为这不是什么大问题，并且忘记在 Azure 中托管 SMTP 服务器不是一个好的选择，也不建议这样做。

# android - 检查条件仅显示并动态列出所有具有不同高度的项目

> ID：10632770
> 
> 赞同：1
> 
> 时间：2012-05-17T09:11:39.457
> 
> 标签：android, listview

**1.检查条件只显示**

```
public View getView(final int position, View convertView, ViewGroup parent) {
    View vi = convertView;
    if (convertView == null)
        vi = inflater.inflate(R.layout.main_alllatestnewslist, parent,
                false);     
    ImageView imageview = (ImageView) vi
            .findViewById(R.id.image_alllatestnewstitle);
    imageview.setVisibility(View.INVISIBLE);
    TextView titletext = (TextView) vi
            .findViewById(R.id.text_particularlatestnewstitle);
    TextView categorytext = (TextView) vi
            .findViewById(R.id.text_newscategorytitle);
    TextView datetext = (TextView) vi.findViewById(R.id.text_newsdate);

    if (!imagepath[position].toString().equals("no picture")) {
        imageLoader.DisplayImage(imagepath[position], imageview);
        imageview.setVisibility(View.VISIBLE);          
        titletext.setWidth(460 - imageview.getWidth() - 5); <-- this line   
    } else {
        imageview.setVisibility(View.INVISIBLE);
        imageview.setImageDrawable(null);
    }
    titletext.setText(title[position].toString());
    categorytext.setText(category[position].toString());
    datetext.setText(date[position].toString());

    return vi;
} 
```

当第一次查看列表并导致 textview 与 imageview 堆栈时，无法检查该语句。滚动一次或多次后，它只会向左移动。

怎么去在这条语句之前显示呢？

**2\. 根据条件以编程方式设置列表视图中所有项目的高度**

```
RelativeLayout childlayout = (RelativeLayout)vi.findViewById(R.id.layout_childlist); 
```

这是一个项目的布局。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/layout_childlist"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@color/list_bg"
android:minHeight="?android:attr/listPreferredItemHeight" >
<LinearLayout
    android:id="@+id/test"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_marginBottom="5px"
    android:layout_marginLeft="10px"
    android:layout_marginRight="10px"
    android:layout_marginTop="5px" >

    <ImageView
        android:id="@+id/image_alllatestnewstitle"
        android:layout_width="140px"
        android:layout_height="80px"
        android:scaleType="centerCrop" />
</LinearLayout>
....
</RelativeLayout> 
```

例如，其中一项需要 80px 才能显示，但其他项仅需要 40px。但是，其他项目不会换行到 40px 并换行到 80px 并使所有项目具有相同的高度。

如何为所有具有不同高度的项目设置高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:16:51.923

尝试`imageview.setVisibility(View.GONE);`

`INVISIBLE``GONE`仅在“删除”视图时隐藏视图

# c++ - 检查位还是使用布尔值？

> ID：10632772
> 
> 赞同：0
> 
> 时间：2012-05-17T09:11:49.450
> 
> 标签：c++, optimization

我在二维平面 (x,y) 中得到一个点作为输入。现在我必须检查它在哪个象限，做一些关于 X 轴和 Y 轴的反射，并多次重复检查它在哪个象限。

我有两种方法，但不确定哪个更好

1.  我最初可以将 x,y 存储为布尔值，然后在反射时进行布尔运算，因此这很容易。要判断该点在哪个象限，只需检查该值是真还是假。
2.  或者我可以用 int 做正常的方法，然后检查第一位以找到该点在哪个象限

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:13:29.173

也不是，只需将您的坐标与`0`.

如果您将它们存储为布尔值，除了丢失信息之外，您可能会因为转换而获得一些开销。

如果您检查第一位，它的可读性会降低。

编译器将自行优化这些调用，怀疑你会从不同的方法中获得什么。

# ios - SOAPRequest 反序列化为自定义对象的 NSMutableArray 的 SudzC 解决方法

> ID：10632773
> 
> 赞同：0
> 
> 时间：2012-05-17T09:11:55.157
> 
> 标签：ios, xcode, touchxml

这是我的肥皂请求：

```
SoapRequest* _request = [SoapRequest create: _target action: _action service: self soapAction: @"" postData: _envelope deserializeTo: /*[[DMDDmdInfo alloc] autorelease]*/ [NSMutableArray array]]; 
```

我应该收到 DMDDmdInfo 对象的 NSMutableArray。相反，我收到 NSDictionaries 的 NSMutableArray。

这就是我在 SoapRequest:connectionDidFinishLoading 中的内容：

```
CXMLNode* element = [[Soap getNode: [doc rootElement] withName: @"Body"] childAtIndex:0];
    if(deserializeTo == nil) {
        output = [Soap deserialize:element];
    } else {
        if([deserializeTo respondsToSelector: @selector(initWithNode:)]) {
            //element = [element childAtIndex:0];
            output = [deserializeTo initWithNode: element];
        } else {
            NSString* value = [[[element childAtIndex:0] childAtIndex:0] stringValue];
            output = [Soap convert: value toType: deserializeTo];
        }
    } 
```

您能否帮我解决这个问题，以获得所需的结果：NSMutableArray of DMDDmdInfo objects？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:16:38.210

以下代码对我有用，我们需要为param指定`SoapArray`对象`deserializeTo`

```
SoapRequest* _request = [SoapRequest create: _target action: _action service: self soapAction: @"" postData: _envelope deserializeTo: [[[SoapArray alloc] init] autorelease]]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-05T10:18:03.833

虽然我仍在努力，但在我的项目中，我使用以下代码来获取返回对象的 NSMutableArray。我还对 SoapRequest.m 做了一些调整，但你应该先尝试一下这个小改动，看看它是否有效

```
SoapRequest* _request = [SoapRequest create: _target action: _action service: self soapAction: @"" postData: _envelope deserializeTo: [[[NSMutableArray alloc] init] autorelease]]; 
```

# c# - JSON.Net 反序列化特定对象

> ID：10632774
> 
> 赞同：2
> 
> 时间：2012-05-17T09:12:06.547
> 
> 标签：c#, json, json.net, deserialization

我在试验中使用 JSON.Net 来序列化/反序列化格式不太好的 JSON。

具体来说，我正在尝试使用 js 变量作为值来序列化属性，如下所示：

```
{ ..., mapTypeId: google.maps.MapTypeId.ROADMAP, ... } 
```

我的 c# 课程是

```
public enum MapTypeId
{
    HYBRID, ROADMAP, SATELLITE, TERRAIN
}

[JsonObject]
public class MapOptions
{
    ...

    [JsonProperty]
    [JsonConverter(typeof(MapTypeConverter))]
    public MapTypeId mapTypeId { get; set; }

    ...
} 
```

通过自定义`JsonConverter`，我已经能够控制序列化：

```
public class MapTypeConverter : JsonConverter
{
    ...

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        writer.WriteRawValue("google.maps.MapTypeId." + ((MapTypeId)value).ToString());
    }

    ...
} 
```

并且序列化有效。但是当我试图反序列化字符串时：

```
JsonConvert.DeserializeObject<MapOptions>(ser); 
```

我得到错误：`Unexpected character encountered while parsing value: g. Path 'mapTypeId', line 1, position 169.`

在我的 MapTypeConverter 中，我还尝试覆盖 ReadJson 方法：

```
public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
{
    // no parse by now, just a try
    return MapTypeId.TERRAIN;
} 
```

没有运气。

建议？

# c# - 通过 lambda 从列表<> 中删除重复值的最快方法

> ID：10632776
> 
> 赞同：73
> 
> 时间：2012-05-17T09:12:20.197
> 
> 标签：c#, list, c#-4.0, lambda, generic-list

从列表中删除重复值的最快方法是什么。假设`List<long> longs = new List<long> { 1, 2, 3, 4, 3, 2, 5 };`所以我对使用 lambda 删除重复并返回 : 很感兴趣`{1, 2, 3, 4, 5}`。你的建议是什么？

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-05-17T09:14:10.810

获取*新*列表的最简单方法是：

```
List<long> unique = longs.Distinct().ToList(); 
```

这对你来说足够好，还是你需要改变*现有的*列表？后者明显更啰嗦。

请注意，[`Distinct()`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx)不能*保证*保留原始顺序，但在当前实现中它会 - 这是最*自然*的实现。有关更多信息，请参阅我的[Edulinq 博客文章`Distinct()`](http://codeblog.jonskeet.uk/2010/12/30/reimplementing-linq-to-objects-part-14-distinct.aspx)。

如果您不需要它是 a `List<long>`，则可以将其保留为：

```
IEnumerable<long> unique = longs.Distinct(); 
```

此时，它会在您每次迭代时进行重复数据删除`unique`。好不好就看你的要求了。

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-11-05T12:02:12.593

您可以将此扩展方法用于包含更复杂类型的枚举：

```
IEnumerable<Foo> distinctList = sourceList.DistinctBy(x => x.FooName);

public static IEnumerable<TSource> DistinctBy<TSource, TKey>(
    this IEnumerable<TSource> source,
    Func<TSource, TKey> keySelector)
{
    var knownKeys = new HashSet<TKey>();
    return source.Where(element => knownKeys.Add(keySelector(element)));
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-17T09:14:09.400

有 Distinct() 方法。它应该有效。

```
List<long> longs = new List<long> { 1, 2, 3, 4, 3, 2, 5 };
var distinctList = longs.Distinct().ToList(); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-05-27T08:55:46.753

如果您想坚持使用原始列表而不是创建新列表，您可以使用类似于`Distinct()`扩展方法在内部执行的操作，即使用 HashSet 来检查唯一性：

```
HashSet<long> set = new HashSet<long>(longs.Count);
longs.RemoveAll(x => !set.Add(x)); 
```

List 类提供了这种方便的`RemoveAll(predicate)`方法，可以删除所有不满足谓词指定条件的元素。谓词是一个委托，它接受列表元素类型的参数并返回一个布尔值。HashSet 的`Add()`方法仅在集合不包含该项目时才返回 true。因此，通过从列表中删除任何无法添加到集合中的项目，您可以有效地删除所有重复项。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-17T09:14:19.600

```
List<long> distinctlongs = longs.Distinct().OrderBy(x => x).ToList(); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-04-19T09:12:25.113

一个简单直观的实现

```
public static List<PointF> RemoveDuplicates(List<PointF> listPoints)
{
    List<PointF> result = new List<PointF>();

    for (int i = 0; i < listPoints.Count; i++)
    {
        if (!result.Contains(listPoints[i]))
            result.Add(listPoints[i]);
    }

    return result;
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2016-11-28T14:53:22.963

到位：

```
 public static void DistinctValues<T>(List<T> list)
    {
        list.Sort();

        int src = 0;
        int dst = 0;
        while (src < list.Count)
        {
            var val = list[src];
            list[dst] = val;

            ++dst;
            while (++src < list.Count && list[src].Equals(val)) ;
        }
        if (dst < list.Count)
        {
            list.RemoveRange(dst, list.Count - dst);
        }
    } 
```

# arrays - c# 通过属性返回数组

> ID：10632781
> 
> 赞同：0
> 
> 时间：2012-05-17T09:12:34.583
> 
> 标签：arrays, c#-4.0, properties

我想首先为一个看似愚蠢的问题道歉，但我对以下内容感到困惑。

我正在编写一个不会在 UI 线程上运行的类库。在 CL 内部，我需要一个数组，该数组将填充从存储过程调用接收到的数据。然后我需要通过事件将此数据传递回 UI 线程。

本来我打算写下面的。

```
public class ColumnInformation
{
    public string[] columnHeaderNames;
    public string[] columnDataTypes;
} 
```

但我很确定这会不受欢迎，我应该使用属性。

```
public class ColumnInformation
{
    public string[] columnHeaderNames {get; set;}
    public string[] columnDataTypes {get; set;}
} 
```

但后来我遇到了以下情况。 [MSDN](http://msdn.microsoft.com/en-us/library/0fss9skc.aspx)

所以我假设我实际上应该如下声明是正确的：

```
public class ColumnInformation    
{        
    private string[] _columnHeaderNames;         

    public Names(string[] headerNames)        
    {            
        _columnHeaderNames = headerNames;        
    }         

    public string[] GetNames()        
    {            
        // Need to return a clone of the array so that consumers            
        // of this library cannot change its contents            
        return (string[])_columnHeaderNames.Clone();        
    }    
} 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:27:56.557

如果您关心的是指南[CA1819: Properties should not return arrays](http://msdn.microsoft.com/en-us/library/0fss9skc.aspx)，
无论您将 Array 公开为 Public Field 还是 Property 都将是相同的（在这里设置 readonly 无关紧要）。一旦你的原始数组暴露出来，它的内容就可以被修改。

为避免这种情况，如链接所示，将 Field 设为私有，并从 Getter 返回 Clone。然而，主要的担忧是，如果多次检索，您的数组可能会有多个副本。它不利于性能和同步。

更好的解决方案是[ReadOnlyCollection](http://msdn.microsoft.com/en-us/library/ms132474.aspx)。

使用 ReadOnlyCollection，您可以将集合公开为无法修改的只读。也将反映对基础集合的任何更改。

# java - 在项目“jyxxw”中找不到测试类“junit.test.DepartmentTest”

> ID：10632782
> 
> 赞同：0
> 
> 时间：2012-05-17T09:12:43.857
> 
> 标签：java, eclipse, junit4

当我运行配置时，但我的 Eclipse 显示

> 在项目“jyxxw”中找不到测试类“junit.test.DepartmentTest”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T13:42:07.560

这是 Eclipse 在不将类识别为测试类时给出的消息。你的课堂上有@Test 注释吗？（我意识到这听起来像是一个愚蠢的问题，但它们可能在超类中。在这种情况下，Eclipse 看不到它们。）

你可以尝试用一个非常简单的测试暂时替换你的测试代码，看看错误是否消失了吗？

```
package junit.test;
import org.junit.*;
public class DepartmentTest {
  @Test public void myTest() {}
} 
```

如果这有效，您可以查看您的课程中缺少的内容。如果它不起作用，则可能是类路径问题。

# c# - 使用 Windows 服务、Web 服务和网站时，我应该在哪里进行配置？

> ID：10632785
> 
> 赞同：0
> 
> 时间：2012-05-17T09:12:49.527
> 
> 标签：c#, asp.net, config

**问题：** 我正在使用 C# 在 ASP .NET 中进行开发，并且我想验证电子邮件。为此，我正在使用正则表达式（我们称之为 EmailRegularExpressionValidator），我的问题是如果我想要/需要的话，我应该把正则表达式放在哪里轻松更改它们，而无需重新编译代码。验证是在业务层的“IntermediateServices”中进行的，所有的事情都来做他们的事情。

**解决方案1：** web.config

我有很多 Windows 服务，其中一个有自己的配置。如果我将 EmailRegularExpressionValidator 放入其中，我必须全部写入，当我更改一个时，我必须全部更改。不好。

**解决方案 2：**数据库

有时，我必须验证 1000 封邮件（甚至更多），如果我将 EmailRegularExpressionValidator 放入数据库中，我必须进行 1000 次查询才能知道 EmailRegularExpressionValidator 的值。我想把它放在内存中，但我有网络服务。不是一个好主意。

**解决方案 3：**资源

只有在网站中才能轻松更改资源。当我将它们放在业务层时，我无法轻易更改它们。

**解决方案4：** BD + Session

就像我之后说的，我正在使用网络服务....

希望我是明确的，希望你能帮助我。

对不起我的英语（来自葡萄牙的问候）。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:21:44.230

在你的情况下，我会推荐配置文件。.NET 配置文件有一个层次结构，它都从 machine.config 开始，所有 .NET 应用程序都从该配置中读取设置。

如果您不覆盖应用程序配置文件中的键，应用程序将使用 machine.config 中的设置。它是最核心的点，可用于所有应用程序，更改一次，它会更改所有应用程序。

它可以在这里找到：C:\Windows\Microsoft.NET\Framework\

然后取决于您使用的框架，

C:\Windows\Microsoft.NET\Framework\v2.0.50727\CONFIG

或在这里：

C:\Windows\Microsoft.NET\Framework\v4.0.30319\Config

示例：只需将其`<configuration>`放在 machine.config 中的标记之后。

```
<appSettings><add key="myParameter" value="myValue"/></appSettings> 
```

然后在你的代码中，

```
Configuration con = ConfigurationManager.OpenMachineConfiguration();
ConfigurationSection consec = con.Sections["myParameter"]; 
```

您必须添加对 System.Configuration 的引用

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T15:46:07.997

我用了一个更聪明的方法......

相反，按照建议编辑 machine.config 我只是使用缓存来做我想要的魔法！

你可以在这里找到一篇关于如何使用它的好文章：http: [//codemaverick.blogspot.pt/2007/01/caching-in-windows-application-i-was_8639.html](http://codemaverick.blogspot.pt/2007/01/caching-in-windows-application-i-was_8639.html)

# java - 如何在 playn 中将侦听器添加到 GroupLayer？

> ID：10632787
> 
> 赞同：0
> 
> 时间：2012-05-17T09:13:12.157
> 
> 标签：java, gwt, listener, playn

我已将 Pointer.Listener 和 Mouse.Listener 与 ImageLayer 一起使用，并且有效。但是当我使用 Pointer.Listener 到 GroupLayer 时，它不会监听点击或触摸。我怎样才能做到这一点？

我正在使用以下代码。

```
myGroupLayer.addListener(new Pointer.Listener() {
  @Override
  public void onPointerEnd(Event event) {
    System.out.println("click registered");
    myMethodToRun();
  }
  @Override
  public void onPointerDrag(Event event) { }
  @Override
  public void onPointerStart(Event event) { }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T04:37:10.157

GroupLayer 本身永远不会被鼠标单击“击中”。GroupLayer 的其中一个孩子可能会被击中，但这不会触发在组层上注册的侦听器，只会在孩子本身上触发。

如果您有一个包含多个子级的 GroupLayer，并且您希望在单击任何这些子级时将事件分派到 GroupLayer 的侦听器，那么您必须在 GroupLayer 上使用自定义命中测试器：

```
myGroupLayer.setHitTester(new Layer.HitTester() {
  public Layer hitTest(Layer l, Point p) {
    Layer hitLayer = myGroupLayer.hitTestDefault(p);
    return (hitLayer != null) ? myGroupLayer : null;
  }
}); 
```

这将导致您的 GroupLayer 对其所有子层进行命中测试，如果有任何子层被命中，它将*自身*作为命中层返回。然后在您的图层组上注册的侦听器将像单击图层组本身一样运行。

# python - 如何在 lxml 解析中获取确切日期？

> ID：10632791
> 
> 赞同：1
> 
> 时间：2012-05-17T09:13:32.317
> 
> 标签：python, xpath, lxml

解析 html 文档时，我遇到了一个奇怪的问题。html 文档的跨度如下所示：

```
<span class="time">Thu May 17, 2012 12:20 pm</span> 
```

当我解析它时（它在 td 内）：

```
row.xpath('string(./td/span/text())') 
```

我得到以下信息：

```
Wed May 16, 2012 11:20 pm 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:20:20.797

可能，`./td/span`匹配多个元素。当您使用`string()`XPath 时，仅处理第一个结果：

```
>>> html = """<html>
...             <td><span class="time">Wed May 16, 2012 11:20 pm</span></td>
...             <td><span class="time">Thu May 17, 2012 12:20 pm</span></td>
...           </html>"""
>>> t = etree.fromstring(html)
>>> t.xpath('string(./td/span)')
'Wed May 16, 2012 11:20 pm' 
```

您应该编写一个更具体的 XPath 来获取您想要的行，或者遍历这些行：

```
>>> for row in t.xpath("./td/span"):
...     print(row.xpath("string(.)"))
...     
Wed May 16, 2012 11:20 pm
Thu May 17, 2012 12:20 pm 
```

（注意：我已经删除了`text()`，因为在这种情况下不需要它。`text()` [可能不会像你认为的那样做](http://community.marklogic.com/blog/text-is-a-code-smell)。）

# google-apps - 在 Google Apps 中创建 CSV 文件

> ID：10632792
> 
> 赞同：1
> 
> 时间：2012-05-17T09:13:32.630
> 
> 标签：google-apps, google-apps-script

我尝试使用 Google Apps（脚本）通过 API 上传 .csv 文件。

我在 API URL 的一部分中给出了以下属性。

**"ZOHO_FILE":file.csv**

有没有办法在 Google Apps Script 中创建 .csv 文件？

如果可能，请告诉我们，如何在 Google Apps 中创建 .csv 文件？

对不起我的英语不好 ：-（

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T10:36:50.253

您可以使用它来转换数据范围：

```
function convertRangeToCsvFile(dataRange) {

  try {
    var data = dataRange.getValues();

    var csvFile = undefined;

    // Loop through the data in the range and build a string with the CSV data
    if (data.length > 1) {
      var csv = "";
      for (var row = 0; row < data.length; row++) {
        for (var col = 0; col < data[row].length; col++) {
          if (data[row][col].toString().indexOf(",") != -1) {
            data[row][col] = "\"" + data[row][col] + "\"";
          }
        }

        // Join each row's columns
        // Add a carriage return to end of each row, except for the last one
        if (row < data.length-1) {
          csv += data[row].join(",") + "\r\n";
        }
        else {
          csv += data[row];
        }
      }
      csvFile = csv;
    }
    return csvFile;
  }
  catch(err) {
    Logger.log(err);
    Browser.msgBox(err);
  }
} 
```

或者这个下载整张纸

```
function downloadSpreadsheet(){
  //This function generates a pdf of your current spreadsheet and emails it to yourself as attachment
  //Make sure your spreadsheet is not too big. The pdf size tends to be 200kb/page and if too large
  //if the pdf is too large the urlFetch might timeout

  var AUTH_TOKEN = "xxxxxxxxxxxxxx"; //Enter your AUTH_TOKEN
  //You can receive it from https://appscripts.appspot.com/getAuthToken

  var ssID=SpreadsheetApp.getActiveSpreadsheet().getId()+"&gid="+SpreadsheetApp.getActiveSpreadsheet().getActiveSheet().getSheetId();
  var url = "https://spreadsheets.google.com/feeds/download/spreadsheets/Export?key="
      + ssID + "&exportFormat=csv"; 
  //Add &gid=x at the end of above url if you only want a particular sheet
  //gid of a sheet can be obtained by the undocumented function getSheetId()
  //ex: SpreadsheetApp.getActiveSpreadsheet().getActiveSheet().getSheetId();
  //exportFormat=xls did not work when I tried. I dont know why

  var auth = "AuthSub token=\"" + AUTH_TOKEN + "\"";

  var res = UrlFetchApp.fetch(url, {headers: {Authorization: auth}});
  var content=res.getContentText();
  return content
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T11:04:03.240

我希望您要求提供 Apps 脚本；

下面文章的第 2 节和第 3 节讲述了如何导入和导出 CSV

[https://developers.google.com/apps-script/articles/docslist_tutorial#section2](https://developers.google.com/apps-script/articles/docslist_tutorial#section2)

# android - 如何在android中的Gallery小部件内添加视图

> ID：10632793
> 
> 赞同：0
> 
> 时间：2012-05-17T09:13:34.710
> 
> 标签：android, android-widget

天！

我想做下一个：

```
<Gallery ...>
    <TextView ... />
    <TextView ... /> <!-- and etc -->
</Gallery> 
```

我已经完成了一个自定义 TextViewAdapter，其中包含内部列表并将该适配器设置为画廊。

在这种情况下，我有那个错误：**java.lang.UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:24:54.313

您不能在 xml 文件的画廊中添加任何视图。

使用`Adapter`你可以在gallery.so中添加视图

```
public class GalleryAdapter extends BaseAdapter 
```

并在`getView(...) method inflate row`.And 行中包含您想要添加到画廊中的所有视图。并使用`Inflator`膨胀行。

和 setadapter 到画廊...`gallery.setAdapter(new GalleryAdapter())`

# java - 如何从 JSON 格式的文件中使用 Sphinx 进行搜索？

> ID：10632796
> 
> 赞同：0
> 
> 时间：2012-05-17T09:13:53.910
> 
> 标签：java, php, python, sphinx

我有格式良好的 JSON 文件。从 Sphinx 搜索中，我首先将其转换为 sphinx xml 格式的文件。然后在新生成的 xml 文件上使用 xml 管道，我进行 Sphinx 搜索。有没有直接搜索json而不转换为特定xml文件的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T13:01:25.680

没有狮身人面像不能直接读取 json。转换为 xml 似乎是最简单的方法。

请注意，您不必转换为文件，sphinx 可以读取脚本的输出。所以脚本可能只是读取 josn 文件，并直接输出 xml。实际上不需要中间文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:09:34.907

Sphinx 只有 2 种类型的数据源，它们是 sql 数据源和 xmlpipe 数据源。目前你不能直接搜索 json 文件

我能想到的一种解决方案是将 json 数据存储在数据库中，然后使用 sql 数据源。在存储 json 数据和索引它时要有创意。

# c# - 使用大字符串

> ID：10632800
> 
> 赞同：0
> 
> 时间：2012-05-17T09:14:14.263
> 
> 标签：c#, string, performance, optimization

我正在使用 C# 中的一个大字符串。例如，我的字符串长度是 2.000.000 个字符。我必须加密这个字符串。我必须将其保存为硬盘上的文本文件。我尝试使用 XOR 进行最快和基本的文本加密，但加密时间仍然太长。使用 2.13 GHz 双核 CPU 和 3 GB RAM 需要 1 小时。此外，保存文件（使用 StreamWriter Write 方法）和读取文件（使用 StreamReader ReadToEnd 方法）花费的时间太长。

编码：

```
public static string XorText(string text) 
{   
   string newText = ""; 
   int key = 1; 
   int charValue; 
   for (int i = 0; i < text.Length; i++) 
   {
     charValue = Convert.ToInt32(text[i]); //get the ASCII value of the character 
     charValue ^= key; //xor the value 
     newText += char.ConvertFromUtf32(charValue); //convert back to string 
   } 
   return newText; 
} 
```

您对这些操作有何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T09:17:43.687

我建议[`StringBuilder`](http://msdn.microsoft.com/en-us/library/system.text.stringbuilder%28v=vs.100%29.aspx)对大字符串使用而不是字符串，也最好显示您的代码以查看是否可以进行任何其他优化。例如，对于读取/写入文件，您可以使用缓冲区。

**更新：**正如我在您的代码中看到的最大问题（使用此代码）在这一行：

```
newText += char.ConvertFromUtf32(charValue); 
```

`String`是[不可变](http://en.wikipedia.org/wiki/Immutable_object)的对象，并且`+=`操作员每次都会创建一个新实例，`newText`并且当长度很大时，这会导致时间和内存问题，因此，`string`如果您使用`StringBuilder`这行代码而不是这样：

```
newText.Append(char.ConvertFromUtf32(charValue)); 
```

并且此功能将运行得非常快。

# ruby-on-rails - 如何找到本地 postgres 数据库的 URL 路径？

> ID：10632801
> 
> 赞同：12
> 
> 时间：2012-05-17T09:14:16.697
> 
> 标签：ruby-on-rails, postgresql

我有一个在 postgres 数据库上运行的 Rails 应用程序。我正在设置一个在数据库上运行的后台任务队列，我需要指定数据库 URL。

我尝试过的各种排列，并期望全部返回`FATAL: database "database-name" does not exist`。

是否有将打印此 URL 的命令？

或者，如果我的 database.yml 看起来像这样，URL 应该是什么样子

```
development:
    adapter: postgresql
    encoding: unicode
    database: db/database-name 
```

感谢您的建议。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-17T09:38:35.877

格式似乎是

```
postgres://username:password@host/database 
```

您的数据库名称中有一个`/`，并且（显然）postgres 将接受`/`数据库名称，因此您需要使用

```
postgres:///db/database-name 
```

或者

```
postgres:///db%2Fdatabase-name 
```

随意取出`db/`您的数据库名称的一部分 - 只有像 SQLite 这样将数据库存储在本地文件中并需要文件名的数据库才需要保证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:26:55.000

不确定您如何尝试访问数据库，但如果您尝试创建一个使用与 rails 相同的数据库但单独运行的脚本，请考虑使用在 rails 中运行的脚本。在 unix/linux 中，如果添加这一行：

```
#! script/rails runner 
```

到脚本的第一行，然后使用以下命令使其可执行：

```
chmod +x myscript 
```

然后你可以简单地运行它

```
./myscript 
```

它可以像你的控制器一样使用你的模型类并在rails中查看代码。那么就不需要手动访问数据库了。

# php - 为什么我会收到 500 内部服务器错误？

> ID：10632803
> 
> 赞同：0
> 
> 时间：2012-05-17T09:14:19.273
> 
> 标签：php, jquery, codeigniter

到目前为止我一直在学习，但是这种 db ajax 通信总是让我头疼不已。

这是控制器：

```
function become_teacher()
{   
    $this->load->model('class_model');
    $data = array('user_id' => $this->input->post('user_id'),
        'group_id' => $this->input->post('user_group') 
    );
    $this->class_model->change_to_teacher($data);
} 
```

这是模型：

```
function change_to_teacher($data)
{
    $this->db->insert('user_groups', $data);
    return;     
} 
```

这是脚本：

```
<p>Om du vill kunna skapa lektionen bli lärare. </p>
<button class="btn teacher">Bli lärare</button>

<script type="text/javascript">
    var user_id = $('.meta').text().trim();
    var user_group = '4';
    $('.teacher').on('click', function() {
        $.ajax({
            type: "POST",
            url: "http://localhost:8888/testing/index.php/cours/become_teacher",
            data: "{ user_id: user_id, user_group: user_group }",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
        });
    });
</script> 
```

`var user_id`正在从头文件中获取其数据，此处未包含。任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:18:05.287

不知道细节，但是

```
data: "{ user_id: user_id, user_group: user_group}", 
```

应该

```
data: { "user_id": user_id, "user_group": user_group}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:38:52.740

我在定义表格时错过了一封信。现在它的工作...

# c# - 从函数返回值时出错

> ID：10632806
> 
> 赞同：0
> 
> 时间：2012-05-17T09:14:22.040
> 
> 标签：c#, asp.net, function

我创建了一个函数来返回设备类型的 int 值，如下所示；

```
public int getDeviceType(string device)
    {
        int temp;
        if (device.ToLower() == "android")
        {
            temp = 1;
        }
        else if (device.ToLower() == "ios")
        {
            temp = 2;
        }
        return temp;

    } 
```

我想返回设备的类型。

但这给了我一个错误

```
 "Use of unassigned variable temp" 
```

我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T09:15:44.817

只需使用默认值初始化 temp ，如下所示

```
public int getDeviceType(string device)
{
    int temp = 0;
    if (device.ToLower() == "android")
    {
        temp = 1;
    }
    else if (device.ToLower() == "ios")
    {
        temp = 2;
    }
    return temp;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:17:23.500

初始化`temp`为，`0`因为如果它在任何情况下都不去，那么它将返回什么值 temp 。

我知道`int`默认值是`0`，但在这些情况下你仍然必须初始化它。到那时它不会运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:20:57.777

整型变量默认值为0时该行为的根本原因分析以及为什么需要对其进行初始化。

对于局部变量，编译器对流程有一个很好的了解——它可以看到变量的“读取”和变量的“写入”，并证明（在大多数情况下）第一次写入将发生在第一次读取之前.

实例变量并非如此。考虑一个简单的属性——你怎么知道有人在得到它之前是否会设置它？这使得强制执行明智的规则基本上是不可行的——所以要么你必须确保所有字段都在构造函数中设置，要么允许它们具有默认值。C# 团队选择了后一种策略。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T11:36:17.277

基本上，编译器希望确保您初始化所有变量。本地和实例。所以理论上，你总是必须初始化所有的变量。

但是，由于编译器无法确定实例变量在第一次被读取之前是否已初始化，因此编译器会将所有实例变量隐式初始化为其默认值。

所以例外不是局部变量没有自动初始化，例外是实例变量*确实*自动初始化。

# xml - 从 XML 数据中读取 URL

> ID：10632808
> 
> 赞同：2
> 
> 时间：2012-05-17T09:14:27.390
> 
> 标签：xml, delphi, delphi-2010, msxml6, txmldocument

使用 Delphi 2010，我想使用 TXMLDocument 从以下 XML 示例数据（我省略了不需要的部分）中读取 Location、Smartcard_Location 和 Integrated_Location 的 URL：

```
<?xml version="1.0" encoding="UTF-8"?>
<PNAgent_Configuration xmlns:xsi="http://www.w3.org/2000/10/XMLSchema-instance">
    <Request>
        <Enumeration>
            <Location replaceServerLocation="true" modifiable="true" forcedefault="false" RedirectNow="false">http://2003xa/Citrix/PNAgent/enum.aspx</Location>
            <Smartcard_Location replaceServerLocation="true">https://2003xa/Citrix/PNAgent/smartcard_enum.aspx</Smartcard_Location>
            <Integrated_Location replaceServerLocation="true">http://2003xa/Citrix/PNAgent/integrated_enum.aspx</Integrated_Location>
            <Refresh>
                <OnApplicationStart modifiable="false" forcedefault="true">true</OnApplicationStart>
                <OnResourceRequest modifiable="false" forcedefault="true">false</OnResourceRequest>
                <Poll modifiable="false" forcedefault="true">
                    <Enabled>true</Enabled>
                    <Period>6</Period>
                </Poll>
            </Refresh>
        </Enumeration>
    </Request>
</PNAgent_Configuration> 
```

数据已经从网络服务器加载到 TXMLDcoument 中。解析这些数据并将 URL 转换为字符串值的最简单方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-17T10:02:22.063

最简单的方法是使用`getElementsByTagName`：

```
lx1.Items.Add(XMLDocument1.DOMDocument.getElementsByTagName('Location').item[0].firstChild.nodeValue);
lx1.Items.Add(XMLDocument1.DOMDocument.getElementsByTagName('Smartcard_Location').item[0].firstChild.nodeValue);
lx1.Items.Add(XMLDocument1.DOMDocument.getElementsByTagName('Integrated_Location').item[0].firstChild.nodeValue); 
```

如果您想`XPath`改用，您可以[在 Delphi 的 XmlDom](http://delphi.about.com/od/delphi-tips-2011/qt/select-single-node-ixmlnode-txmlnode-xpath-delphi-xmldom.htm)文章中使用 Select Single IXMLNode / TXmlNode Using XPath 中的此功能：

```
class function TXMLNodeHelper.SelectNode(xnRoot: IXmlNode; const nodePath: WideString): IXmlNode;
var
  intfSelect : IDomNodeSelect;
  dnResult : IDomNode;
  intfDocAccess : IXmlDocumentAccess;
  doc: TXmlDocument;
begin
  Result := nil;
  if not Assigned(xnRoot)
    or not Supports(xnRoot.DOMNode, IDomNodeSelect, intfSelect) then
    Exit;

  dnResult := intfSelect.selectNode(nodePath);
  if Assigned(dnResult) then
  begin
    if Supports(xnRoot.OwnerDocument, IXmlDocumentAccess, intfDocAccess) then
      doc := intfDocAccess.DocumentObject
    else
      doc := nil;
    Result := TXmlNode.Create(dnResult, nil, doc);
  end;
end; 
```

这边走：

```
lx1.Items.Add(TXMLNodeHelper.SelectNode(XMLDocument1.DocumentElement, '//Location').NodeValue); 
```

# c# - System.NullReferenceException – 对象引用未设置为对象的实例

> ID：10632811
> 
> 赞同：0
> 
> 时间：2012-05-17T09:14:36.033
> 
> 标签：c#, wpf

当我尝试运行程序时，它会抛出这个错误：对象引用未设置为对象的实例。代码有问题吗？帮助！

```
private void InitSpeechRecognition()
        {

            _audioSource = new KinectAudioSource
            {
                FeatureMode = true,
                AutomaticGainControl = false,
                SystemMode = SystemMode.OptibeamArrayOnly
            };
            var ri =
              SpeechRecognitionEngine.InstalledRecognizers().
                Where(r => r.Id == RecognizerId).FirstOrDefault();
            _engine = new SpeechRecognitionEngine(ri.Id);
            var gb = new GrammarBuilder { Culture = new CultureInfo("en-US") };

            gb.Append(CommandMessage.Choices);

            var g = new Grammar(gb);
            _engine.LoadGrammar(g);
            _engine.SpeechRecognized += SreSpeechRecognized;

            _audioStream = _audioSource.Start();
            _engine.SetInputToAudioStream(_audioStream,
                                          new SpeechAudioFormatInfo(
                                          EncodingFormat.Pcm, 16000, 16, 1,
                                          32000, 2, null));
            _engine.RecognizeAsync(RecognizeMode.Multiple);
        }

        private void SreSpeechRecognized(object sender, SpeechRecognizedEventArgs e)
        {

            if (CommandMessage.Commands.ContainsKey(e.Result.Text))
            {
                Application.Current.Dispatcher.Invoke(DispatcherPriority.Normal,
                  new Action(() =>
                    Messenger.Default.Send(
                       new CommandMessage { Command = CommandMessage.Commands[e.Result.Text] })));
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:22:38.103

```
var ri = SpeechRecognitionEngine.InstalledRecognizers().
            Where(r => r.Id == RecognizerId).FirstOrDefault(); 
```

在这里，FirstOrDefault() 要么返回序列中的第一个对象，要么返回 null 如果未找到匹配项。然后在下一行中，您尝试访问对象的 Id 属性，该属性可能为空。

赋值后检查是否为空，如果它不为空，则仅使用 ri。例如

```
 if (ri != null)
  {
    ...
  } 
```

或者使用 First() 方法而不是 FirstOrDefault() 并用 try catch 块包围代码以处理序列为空时的情况。

但是你得到 null 的原因可能是真正的问题所在。ri 为空，因为没有安装的识别器 ID 为 RecognizerId。我没有看到你设置它的代码，所以看看那部分。

此外，请查看此页面上的示例，它可能包含您需要的内容：http: [//msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.installedrecognizers.aspx](http://msdn.microsoft.com/en-us/library/system.speech.recognition.speechrecognitionengine.installedrecognizers.aspx)

# xcode - git 合并后（在 Xcode 上）两个分支有什么关系？

> ID：10632813
> 
> 赞同：1
> 
> 时间：2012-05-17T09:14:42.927
> 
> 标签：xcode, git, merge, branch, cherry-pick

假设我有一个分支 A。然后我创建分支 B，进行大量更改并提交。然后我将 B 合并到 A 中，但选择为某些文件的某些部分保留 A 版本。（我正在使用 Xcode 来执行这些操作，但不确定 git 命令行等效项）

此时A和B之间是什么关系，git知道我没有合并B中的一些变化吗？稍后，我能否以某种方式将我在第一次将 B 合并到 A 时选择忽略的更改合并？

（我认为我想要的是类似于 git cherry-pick 的东西，但是“樱桃采摘”是一个被误导的大提交的一部分）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:44:10.903

> 此时A和B之间是什么关系，git知道我没有合并B中的一些变化吗？

不，Git 只知道 B 的某个提交已合并到 A。
您如何选择合并其*内容*是您的事。Git 只记录合并。
（这不依赖于 XCode）

> 稍后，我能否以某种方式将我在第一次将 B 合并到 A 时选择忽略的更改合并？

不是直接的。如果在第二次合并时部分合并的文件`A`未更改，则不会再次合并这些文件。
此时，来自`A`和的文件之间的差异`B`，然后是一个补丁`B`可能是一个解决方案。

# android - 为 Activity 淡入动画

> ID：10632814
> 
> 赞同：2
> 
> 时间：2012-05-17T09:14:46.340
> 
> 标签：android, animation

我是安卓新手。当我打开一个新活动时，我需要为打开的活动创建一个淡入淡出的动画。例如：目前我在活动“A”中，现在我想通过单击按钮打开另一个活动“B”。现在我可以打开一个没有任何动画的活动。但我想给一个淡入动画。现在，以下代码用于打开活动。

```
Intent profileActivity = new Intent(Login.this, Profile.class);
startActivityForResult(profileActivity, 0); 
```

这里“profileActivity”应该以淡入动画打开。我可以在上面的代码中做什么来制作动画。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-17T09:23:47.997

This is the code of fade animation R.anim.fade

```
 <alpha xmlns:android="http://schemas.android.com/apk/res/android"
           android:interpolator="@android:anim/accelerate_interpolator"
           android:fromAlpha="0.0" android:toAlpha="1.0"
           android:duration="@android:integer/config_longAnimTime" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-17T09:21:15.360

只需将此行添加到您的呼叫意图：

```
overridePendingTransition(R.anim.slide_in_left, R.anim.slide_out_left); 
```

它看起来像这样：

```
Intent intent = new Intent(ActivityA.this, ActivityB.class);
        startActivity(intent);
        overridePendingTransition(R.anim.slide_in_left, R.anim.slide_out_left); 
```

然后在“res”文件夹下创建一个“anim”文件夹并添加这两个 xml 文件

slide_in_left.xml

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
     android:duration="@android:integer/config_mediumAnimTime"
    android:fromXDelta="100%"
    android:toXDelta="0%" /> 
```

slide_out_left.xml

```
<?xml version="1.0" encoding="utf-8"?>
<translate xmlns:android="http://schemas.android.com/apk/res/android"
     android:duration="@android:integer/config_mediumAnimTime"
    android:fromXDelta="0"
    android:toXDelta="-100%" /> 
```

如您所见，如果您想添加淡入淡出效果，我只是在制作翻译动画，只需添加

```
android:fromAlpha="0.0" android:toAlpha="1.0" 
```

希望它会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-17T09:32:14.967

感谢@moujib 的回答，我以前从来不知道。我所做的是在第二个活动开始后立即手动应用动画。使用 overridePendingTransition() 更简洁（它在 api 5 或更高版本中可用）。除了@moujib 的回答，您不必自己定义动画的淡入淡出，因为Android 已经定义了它。看看这里[http://developer.android.com/reference/android/R.anim.html](http://developer.android.com/reference/android/R.anim.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T09:20:06.153

[安卓动画](http://www.vogella.com/articles/AndroidAnimation/article.html)

您可以将您的欢迎页面与进度条放在上面的链接将帮助您如何在活动中添加动画

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-27T18:33:01.523

只需使用这行代码即可从一个活动平滑过渡到另一个活动：

```
startActivity(Intent(this, DestinationActivity::class.java),ActivityOptions.makeCustomAnimation(this,R.anim.abc_fade_in, R.anim.abc_fade_out).toBundle()) 
```

# asp.net - 数据绑定列表到 asp.net 下拉控件

> ID：10632816
> 
> 赞同：0
> 
> 时间：2012-05-17T09:15:01.423
> 
> 标签：asp.net, vb.net, drop-down-menu

早上好。I have a dropdown list control which when a particular item is selected, another dropdown's list is populated based on that selection. 后面的代码如下。

```
Imports System.IO
Partial Class Data
Inherits System.Web.UI.Page
Private Property _futureslist As List(Of String)
Property FuturesList As List(Of String)
    Get
        Return _futureslist
    End Get
    Set(value As List(Of String))
        Dim strText As String =    File.ReadAllText(HttpContext.Current.Server.MapPath("~/DataFiles/AvailableFutures.txt"))
        Dim arytext() As String = strText.Split(",")
        For i As Integer = 0 To arytext.Count - 1
            value.Add(arytext(i))
        Next
        _futureslist = value
    End Set

End Property
Protected Sub ddlMain_SelectedIndexChanged(sender As Object, e As System.EventArgs) Handles ddlMain.SelectedIndexChanged
    If Not IsPostBack Then

        If ddlMain.SelectedItem.Text = "Futures" Then
            ddlMainsub1.DataSource = _futureslist
            ddlMainsub1.DataBind()

        End If
    End If
End Sub
End Class 
```

它为创建列表属性而读取的文件格式如下；玉米、小麦、咖啡

因此，当主下拉选择项是“Futures”时，第二个下拉值将数据绑定到 FuturesList 属性。任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:33:09.913

一组`AutoPostBack=True`“ddlMain”，然后在

```
Protected Sub ddlMain_SelectedIndexChanged(sender As Object, e As System.EventArgs) Handles ddlMain.SelectedIndexChanged
 ddlMainsub1.Items.Clear()
 'bound items here to DropDownList2
End Sub 
```

希望能帮助到你。祝你好运。

# php - 在多个页面上使用的外部 PHP 脚本

> ID：10632817
> 
> 赞同：0
> 
> 时间：2012-05-17T09:15:03.470
> 
> 标签：php

我一直在寻找一段时间，似乎无法找到我需要的东西。我正在尝试以与使用 .css 文件相同的方式使用 externa php 文件，目的是能够轻松更改整个网站的功能。我已经通过在带有普通 html 脚本的普通文本文件上使用 fopen() 和 fgets() 来实现这一点，但我想知道这是否也可以使用 php 脚本。这是我尝试使用的代码：

```
 $open=fopen("site name", "r");

                while(!feof($open)){

                $arr=explode("seperationtext1324",fgets($open));

                echo "<p id='newcomment1'><span class='Uname'>".$arr[0]."</span>".shorten_text($arr[1], 65)."<br/><a class='newcommentlink' href='".$arr[3]."'>".$arr[2]."</a></p>";

                echo "<p id='newcomment2'><span class='Uname'>".$arr[4]."</span>".shorten_text($arr[5], 65)."<br/><a class='newcommentlink' href='".$arr[7]."'>".$arr[6]."</a></p>";

                echo "<p id='newcomment3'><span class='Uname'>".$arr[8]."</span>".shorten_text($arr[9], 65)."<br/><a class='newcommentlink' href='".$arr[11]."'>".$arr[10]."</a></p>";

                echo "<p id='newcomment4'><span class='Uname'>".$arr[12]."</span>".shorten_text($arr[13], 65)."<br/><a class='newcommentlink' href='".$arr[15]."'>".$arr[14]."</a></p>";

                echo "<p id='newcomment5'><span class='Uname'>".$arr[16]."</span>".shorten_text($arr[17], 65)."<br/><a class='newcommentlink' href='".$arr[19]."'>".$arr[18]."</a></p>";}

                fclose($open);

            ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:42:43.350

您可能正在寻找[`include()`](http://ch2.php.net/manual/en/function.include.php).

# sharepoint-2010 - Sharepoint DateTimeControl 空白时不触发事件

> ID：10632821
> 
> 赞同：0
> 
> 时间：2012-05-17T09:15:27.863
> 
> 标签：sharepoint-2010

我已将 datetimecontrol 添加到屏幕（直接在标记中而不是动态地），并且 DateChanged 事件在选择不同的日期时触发，但在日期为空白时不会触发。请问有没有办法解决这个问题？我真的需要在日期空白时触发该事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:38:17.213

设法使其工作如下：

```
 private void HookUpEvents()
            {            
                this.DateTimeControl.DateChanged += DateTimeControl_DateChanged;
                ((TextBox)this.DateTimeControl.Controls[0]).TextChanged += RxDatePicker_TextChanged;
            }

            void RxDatePicker_TextChanged(object sender, EventArgs e)
            {
                if (string.IsNullOrEmpty(((TextBox)this.DateTimeControl.Controls[0]).Text))
                {
                    if (this.OnValueChanged != null)
                    {
                        this.OnValueChanged(sender, e);
                    }
                }
            }
 void DateTimeControl_DateChanged(object sender, EventArgs e)
        {
            if (this.OnValueChanged != null)
            {
                this.OnValueChanged(sender, e);
            }
        } 
```

# sql-server - 如何在 SQL Server 上的同一外键下拥有唯一标识符

> ID：10632823
> 
> 赞同：0
> 
> 时间：2012-05-17T09:15:28.887
> 
> 标签：sql-server, sql-server-2008, identity

我有两个表，一个案例表和一个消息表。
一个案例可能有许多消息。
但是，消息应该有一个参考字段，例如“Case No/Msg No”，对于同一案例下的所有消息，Msg No 应该从 1 开始。

*示例：*
案例 1 消息 1 --> 参考：1/1
案例 1 消息 2 --> 参考：1/2
案例 2 消息 1 --> 参考：2/1

Message No 应该是一个序列，但只针对同一案例下的消息。
我的问题是如何创建 MsgNo？
系统将是多用户的，所以我不能使用 get max 函数来执行此操作。
只是提到我正在使用 SQL Server 2008。
是否有任何其他方法可以使用 IDENTITY 函数来实现这一点？
欢迎任何想法

感谢您提前提供任何
帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:31:52.573

创建主/从表结构。两个表都应该有自己的 ID（使用规范化数据库总是更好）。然后在 Detail 表中创建“LineNumber”，并按照 Master Table id 递增。这类似于 Document 行中的 LineNumber。例如，您有 Invoice 和 Invoice 行，每一行都有自己的 id，并且有多个字段来标识 Invoice Line。

# jsf - 如何从primefaces中的javascript触发组件刷新？

> ID：10632830
> 
> 赞同：32
> 
> 时间：2012-05-17T09:15:54.187
> 
> 标签：jsf, jsf-2, primefaces

是否可以从 javascript 更新 PrimeFaces 组件以便强制刷新？

我正在使用对话框中的此按钮进行 ajax 保存调用。我已在 oncomplete 事件上附加了我的自定义 javascript。

```
<p:growl life="1500" id="showmessage"/>
<p:dialog id="addMemberDialog" widgetVar="addMemberDlg">
    <!-- More Code -->
    <p:commandButton value="Save"
        actionListener="#{memberManagedBean.save}"
        oncomplete="handleSaveNewMember(xhr, status, args)"
        update=":memberListForm:membersTable createupdateform "
        process="@form" />
</p:dialog> 
```

..在保存按钮期间，我在此处添加一条消息以使用咆哮组件将其显示给客户端。

```
public void save(ActionEvent event) {
    FacesMessage message = new FacesMessage(FacesMessage.SEVERITY_INFO,
            "Successfuly Add user", "Successfuly Add user");
    FacesContext.getCurrentInstance().addMessage(null, message);

} 
```

我的问题是，如何对 UI 进行排序，以便在咆哮组件显示消息之前先隐藏对话框？

```
function handleSaveNewMember(xhr, status, args) {
    addMemberDlg.hide();
    //update the growl after the dialog was hidden?
} 
```

发生的事情是咆哮组件同时显示在对话框旁边。

谢谢。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-17T17:03:26.257

您可以为此使用 PrimeFaces' [`<p:remoteCommand>`](http://www.primefaces.org/showcase/ui/ajax/remoteCommand.xhtml)。

```
<p:remoteCommand name="updateGrowl" update="showmessage" /> 
```

这将被调用为

```
<p:commandButton ... oncomplete="addMemberDlg.hide(); updateGrowl();" /> 
```

* * *

然而，在*这种特殊情况下*，有一种更简单的方法。将 的`autoUpdate`属性设置`<p:growl>`为`true`。

```
<p:growl autoUpdate="true" life="1500" id="showmessage"/> 
```

它会在每个 ajax 请求时自动更新。如果您的组件实际上不支持它，那么您总是可以将它包装在`<p:outputPanel>`也支持该属性的 a 中。

```
<p:outputPanel autoUpdate="true">
    ...
</p:outputPanel> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T09:38:17.053

你总是可以做这样的事情（从你的保存按钮更新属性中删除 showmessage id）

```
<h:commandButton style="display:none" id="myBtn" >
    <f:ajax render=":showmessage"/>
</h:commandButton>

function handleSaveNewMember(xhr, status, args) {
    ...
    jQuery("#myBtn").click();
} 
```

**编辑** 但无论如何，在您当前的代码中，对话框不是在更新 grwol 的同时关闭吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-07T20:07:28.413

我的建议：

1.  `<p:remoteCommand>`与`actionListener`属性一起使用。这个属性调用一个包含`FacesContext.addMessage`代码的支持 bean 方法，这样：`<p:remoteCommand actionListener="myBean.testMethod()" />`
2.  接下来，在您的`handleSaveNewMember`脚本中，以这种方式调用`remoteCommand` `name`属性： . 然后，`addMemberDlg.hide();``<p:remoteCommand name="testScript" actionListener="myBean.testMethod()"/>``function handleSaveNewMember(xhr, status, args) { addMemberDlg.hide(); testScript(); }`
3.  为指向咆哮组件添加`update`属性：`remoteCommand``<p:remoteCommand name="testScript" actionListener="myBean.testMethod()" update="showmessage" />`
4.  你`commandButton`的没问题。

这对我有用。

问候。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T09:43:39.703

为什么不能将 p:Dialog 放在 <h:panelGroup> 中。喜欢

```
< h:panelGroup id="addUser" rendered = "boolean value " >
    < p:dialog id="addMemberDialog" widgetVar="addMemberDlg" >
        <!-- More Code -->
        < p:commandButton value="Save" actionListener="#{memberManagedBean.createOrUpdate}"
                oncomplete="handleSaveNewMember(xhr, status, args)"
                update=":memberListForm:membersTable createupdateform :showmessage :addUser"
                process="@form" />
    < /p:dialog >
< /h:panelGroup> 
```

应在您的保存方法中设置的布尔值。在您的保存方法中将其设置为 false 时，它​​在更新时不会显示。所以只会显示咆哮消息。但在调用此保存方法之前，此布尔值设置为 true。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-23T16:47:39.803

您可以使用名为 p:remotecommand 的 PrimeFaces 元素。该元素将执行一个动作（例如，调用一个 bean 方法）并在该动作之后执行更新。

这篇文章中有一个例子[http://devdublog.blogspot.com/2015/04/best-way-for-calling-method-of.html](http://devdublog.blogspot.com/2015/04/best-way-for-calling-method-of.html)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-04-02T07:05:29.397

PrimeFaces 有一个[Ajax API](https://primefaces.github.io/primefaces/10_0_0/#/core/ajaxJavascriptApi)。您可以使用`PrimeFaces.ajax.Request.handle(cfg)`, 或更短的版本通过使用配置对象的属性`PrimeFaces.ab(cfg)`来触发更新。`update`

您可能希望根据需要设置属性`process`。如果您不需要处理任何内容，请将其设置为`@none`.

然后，您需要设置`source`属性。您可以使用 EL: 将其设置为当前组件`#{component.clientId}`。

把这一切放在一起，你会得到：

```
PrimeFaces.ab({source:'#{component.clientId}',process:'@none',update:'clientIdToUpdate'}) 
```

我创建了一个[自定义 EL 函数](https://stackoverflow.com/questions/7079978/how-to-create-a-custom-el-function-to-invoke-a-static-method)以将其减少为`#{my:ajaxUpdate('clientIdToUpdate')}`：

```
public static String ajaxUpdate(final String clientIds) {
  return "PrimeFaces.ab({source:'"
                 + UIComponent.getCurrentComponent(Faces.getContext()).getClientId()
                 + "',process:'@none',update:'"
                 + clientIds
                 + "'})";
} 
```

这减少了（例如）：

```
<p:remoteCommand name="updateMyComponent" update="myComponent"/>
...
<p:ajax event="filter" oncomplete="updateMyComponent()"/> 
```

至：

```
<p:ajax event="filter" oncomplete="#{my:ajaxUpdate('myComponent')}"/> 
```

# php - MySQL 通过 PHP 函数的返回排序

> ID：10632832
> 
> 赞同：0
> 
> 时间：2012-05-17T09:16:15.717
> 
> 标签：php, mysql

我有一个 MySQL 查询列出餐馆、酒店等的结果。每一行都有纬度和经度数据。

我需要按相对于用户搜索位置的距离对结果进行排序（一旦加载页面，我就有了纬度和经度）。

我还有一个 php 函数，它从两个 lat/lng 对返回以公里为单位的距离：

```
distance($lat1,$lng1,$lat2,$lng2); 
```

但是如何按这个距离对查询结果进行排序呢？

假设查询是，此刻，只是

```
mysql_query("select * from merchants"); 
```

坚持`order by distance(latitude,longitude,'$center_lat','$center_long')`在那里给出一个错误说`FUNCTION dbname.distance does not exist`。我考虑过在页面加载后立即创建一个带有距离的临时 MySQL 表，然后按此排序，但这似乎有点矫枉过正。是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:26:24.560

你能创建一个与你的 PHP 函数做同样事情的 MySQL 函数吗？如果您能够这样做，那将是最简单、最有效且通常最好的方法。如果您发布`distance()`函数的源代码，我将看看将其转换为 MySQL。

否则，您将不得不在 PHP 中执行排序，这在您使用时相对简单[`array_multisort()`](http://php.net/manual/en/function.array-multisort.php)（查看*Example #3 Sorting database results*）：

```
<?php

  // Connect to database, yada yada yada

  // Do the query
  $query = "
    SELECT *
    FROM merchants
  ";
  $result = mysql_query($query);

  // Fetch the results into a 2 dimensional array.
  // Also create an array with the results of the distance function
  $rows = $sortcol = array();
  while ($row = mysql_fetch_assoc($result)) {
    $sortcol[] = $row['distance'] = distance($row['latitude'], $row['longitude'], $center_lat, $center_long);
    $rows[] = $row;
  }

  // Sort the results
  array_multisort($sortcol, SORT_ASC, $rows);

  // Rows should now be sorted
  print_r($rows); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:18:26.903

您认为您的 MySql 服务器进程如何调用您的 PHP 进程来执行该函数？

这行不通 - SQL 在过去 50 年里没有那样工作过。

您向 SQL 服务器提交一个字符串，它必须是可评估的，而不是在您的主机中。显然，您的 MySql 不知道该功能。

# spring - 控制器中的请求范围属性

> ID：10632834
> 
> 赞同：1
> 
> 时间：2012-05-17T09:16:21.943
> 
> 标签：spring, servlets, spring-mvc, controller

我对 Spring 比较陌生，所以有一点对我来说不是很明显。即，控制器是单例的事实。我同意这是一个很好的方法，但这并不能让我实现我曾经用其他框架实现的东西。

我构建了一个使用 AJAX 请求的 Web 应用程序。我有`BaseController`作为父级的控制器层次结构，所有其他控制器都对其进行了扩展。

应该向客户端返回响应的控制器操作使用注释进行`@ResponseBody`注释，并将序列化的 JSON 字符串返回给客户端。

`createJSONResponse()`执行此序列化的方法在 中实现，`BaseController`这里的主要思想是每个子控制器的操作都`Map<String, Object> responseMap`使用客户端数据所需的映射填充一个映射，然后在 中访问该映射`BaseController`并对其进行序列化。

我不想`responseMap`在每个动作中创建新实例，也不想每次都将它作为`createJSONResponse()`.

`responseMap`我通过在其他框架中声明`BaseController`为`protected`属性来实现这一点。

我不能用 Spring 做到这一点，因为所有控制器都是单例的，而且我不会有`responseMap`每个请求的新实例。

我不确定将`BaseController`请求范围设为一个好主意。

我创建了一个助手类作为请求范围的 bean，并在这个助手中声明了 responseMap。然后我将这个 bean 注入`@Autowired`到`BaseController`. 我还移出了`createJSONResponse()`这个助手中的方法。然后从控制器中，我将此地图填充为`helper.responseMap.add(<somedata>)`并调用`helper.createResponseMap()`.

在这种情况下`responseMap`变为空`createResponseMap()`，它不包含在控制器操作中填充的数据。不知何故，它`responseMAp`不是线程安全的，并且随着每个异步请求从一个线程移动到另一个线程。

有什么方法可以实现我需要的功能吗？

* * *

**通过变通方法** 解决：通过在每个请求之前实例化 responseMap 并添加到请求拦截器中的 HttpServletRequest 对象来解决问题。然后createJSONResponse() 方法和responseMap 填充方法参考getRequestMap() 方法从HttpServletRequest 中获取responseMap。

PS Still 很高兴知道更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:39:03.213

为了做到这一点（线程安全），您将被迫在某些时候为每个请求拥有该映射的一个实例（如果您真的想在单例中注入它，您可以使用范围代理 - 但是您'最终会得到完全相同的结果，只是更复杂。

我的建议是使用模板方法并摆脱该受保护的属性；只需定义一个抽象方法，它将在每个子类中返回填充的地图。

如果您只是想摆脱`Map<String, Object> responseMap = new HashMap<String, Object>()`在所有具体控制器中的编写，您可以在基本控制器中执行此操作（对于每个请求），然后仅使用抽象方法来填充该映射（但实例每次都是新的） ）。

以下是它在基本控制器中的外观：

```
public String handleRequest() {
    Map<String, Object> model = new HashMap<String, Object>();
    populateModel(model);
    model.put("success", true);  // as a response to your comment
    return serializeModel(model);
}

protected abstract void populateModel(Map<String, Object> model); 
```

PS 作为旁注（尽管这可能是您问题的实际答案），如果您只是将它们作为类型安全对象返回，Spring 能够以多种格式序列化您的响应。只需在您的类路径中包含 jackson 映射器（以启用 JSON 格式），在您的模型类上添加一些 JAXB 注释并将您的模型作为`MyBean`实例返回。鉴于您提供正确的`Accept:`标头或`produces`在请求映射中定义正确的标头，Spring 会将其编组为 XML / JSON。

# python - 将“元组列表”转换为平面列表或矩阵

> ID：10632839
> 
> 赞同：94
> 
> 时间：2012-05-17T09:16:58.540
> 
> 标签：python, list, tuples

使用 Sqlite，一个`select .. from`命令会返回 results `output`，它会打印：

```
>>print output
[(12.2817, 12.2817), (0, 0), (8.52, 8.52)] 
```

它似乎是一个元组列表。我想转换`output`为一个简单的列表：

```
[12.2817, 12.2817, 0, 0, 8.52, 8.52] 
```

或 2x3 矩阵：

```
12.2817 12.2817
0          0 
8.52     8.52 
```

要通过阅读`output[i][j]`

flatten 命令对第一个选项不起作用，我不知道第二个选项...

一个快速的解决方案将不胜感激，因为真实数据要大得多。

* * *

## 回答 #1

> 赞同：144
> 
> 时间：2012-05-17T13:22:37.990

迄今为止发布的最快（和最短）的解决方案：

```
list(sum(output, ())) 
```

比解决方案快 50% 左右，比`itertools`解决方案快 70% 左右`map`。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2018-07-11T17:14:29.553

列表理解方法适用于 Iterable 类型，并且比此处显示的其他方法更快。

```
flattened = [item for sublist in l for item in sublist] 
```

`l`是要展平的列表（`output`在 OP 的情况下称为）

* * *

## timeit 测试：

```
l = list(zip(range(99), range(99)))  # list of tuples to flatten 
```

### 列表理解

```
[item for sublist in l for item in sublist] 
```

timeit 结果 = 7.67 µs ± 129 ns 每个循环

### 列表扩展（）方法

```
flattened = []
list(flattened.extend(item) for item in l) 
```

timeit 结果 = 11 µs ± 433 ns 每个循环

### 和（）

```
list(sum(l, ())) 
```

timeit 结果 = 24.2 µs ± 269 ns 每个循环

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2016-02-05T16:01:34.960

在 Python 2.7 和 Python3 的所有版本中，您可以使用[`itertools.chain`](https://docs.python.org/3.8/library/itertools.html#itertools.chain)来展平可迭代的列表。使用`*`语法或类方法。

```
>>> t = [ (1,2), (3,4), (5,6) ]
>>> t
[(1, 2), (3, 4), (5, 6)]
>>> import itertools
>>> list(itertools.chain(*t))
[1, 2, 3, 4, 5, 6]
>>> list(itertools.chain.from_iterable(t))
[1, 2, 3, 4, 5, 6] 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2017-09-13T15:10:18.933

**更新**：使用扩展进行展平但没有理解并且不使用列表作为迭代器（最快）

在检查了通过列表理解提供更快解决方案的下一个答案之后，`dual for`我做了一些调整，现在它表现更好，首先执行 list(...) 拖了很大一部分时间，然后更改了列表对简单循环的理解也减少了一点。

新的解决方案是：

```
l = []
for row in output: l.extend(row) 
```

旧的替换`list`为`[]`（有点慢但不多）：

```
[l.extend(row) for row in output] 
```

* * *

较旧（较慢）：

用列表理解展平

```
l = []
list(l.extend(row) for row in output) 
```

* * *

新扩展的一些时间和通过删除 [...] 的 list(...) 获得的改进：

```
import timeit
t = timeit.timeit
o = "output=list(zip(range(1000000000), range(10000000))); l=[]"
steps_ext = "for row in output: l.extend(row)"
steps_ext_old = "list(l.extend(row) for row in output)"
steps_ext_remove_list = "[l.extend(row) for row in output]"
steps_com = "[item for sublist in output for item in sublist]"

print(f"{steps_ext}\n>>>{t(steps_ext, setup=o, number=10)}")
print(f"{steps_ext_remove_list}\n>>>{t(steps_ext_remove_list, setup=o, number=10)}")
print(f"{steps_com}\n>>>{t(steps_com, setup=o, number=10)}")
print(f"{steps_ext_old}\n>>>{t(steps_ext_old, setup=o, number=10)}") 
```

结果的时间：

```
for row in output: l.extend(row)                  
>>> 7.022608777000187

[l.extend(row) for row in output]
>>> 9.155910597999991

[item for sublist in output for item in sublist]
>>> 9.920002304000036

list(l.extend(row) for row in output)
>>> 10.703829122000116 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-05-17T11:10:39.833

使用`itertools`链：

```
>>> import itertools
>>> list(itertools.chain.from_iterable([(12.2817, 12.2817), (0, 0), (8.52, 8.52)]))
[12.2817, 12.2817, 0, 0, 8.52, 8.52] 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-05-17T09:36:20.547

```
>>> flat_list = []
>>> nested_list = [(1, 2, 4), (0, 9)]
>>> for a_tuple in nested_list:
...     flat_list.extend(list(a_tuple))
... 
>>> flat_list
[1, 2, 4, 0, 9]
>>> 
```

如上所示，您可以轻松地从元组列表移动到单个列表。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-05-17T11:05:38.370

或者您可以像这样展平列表：

```
reduce(lambda x,y:x+y, map(list, output)) 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-09-20T16:10:30.947

`numpy`从数据结构和速度的角度来看，这都是为之而生的。

```
import numpy as np

output = [(12.2817, 12.2817), (0, 0), (8.52, 8.52)]
output_ary = np.array(output)   # this is your matrix 
output_vec = output_ary.ravel() # this is your 1d-array 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2012-05-17T10:03:21.833

如果是任意嵌套列表（以防万一）：

```
def flatten(lst):
    result = []
    for element in lst: 
        if hasattr(element, '__iter__'):
            result.extend(flatten(element))
        else:
            result.append(element)
    return result

>>> flatten(output)
[12.2817, 12.2817, 0, 0, 8.52, 8.52] 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2021-02-05T16:58:54.730

```
def flatten_tuple_list(tuples):
    return list(sum(tuples, ()))

tuples = [(5, 6), (6, 7, 8, 9), (3,)]
print(flatten_tuple_list(tuples)) 
```

# google-maps - 对于给定的缩放级别和视图，谷歌地图中像素的宽度是多少？

> ID：10632840
> 
> 赞同：1
> 
> 时间：2012-05-17T09:17:07.607
> 
> 标签：google-maps, zooming, coordinates

给定谷歌地图的缩放级别，我想知道给定像素的高度和宽度。

我可以看到不同的缩放级别会影响比例：[http](http://maps.google.com/maps?q=10.0,0.0&z=2) ://maps.google.com/maps?q=10.0,0.0&z=2和[http://maps.google.com/maps?q=10.0,0.0&z =3](http://maps.google.com/maps?q=10.0,0.0&z=3)有不同大小的尼日尔，例如。

此外，我可以看到纬度很重要：在[http://maps.google.com/maps?q=50.0,0.0&z=3](http://maps.google.com/maps?q=50.0,0.0&z=3)上，西班牙和冰岛的宽度似乎相同，但西班牙的宽度实际上大约是其两倍。

地图边界似乎无关紧要，因为调整窗口大小或拖动视图不会影响国家/地区的大小。（不过，比例图例会受到影响，但我不在乎。）

似乎答案应该取决于缩放级别和相关像素纬度的某种组合。似乎宽度和高度都受到影响。经度似乎没有影响。最好是数值解。

（我想要这个，以便我可以预处理坐标列表以删除将出现在同一像素中的坐标。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T14:48:20.210

我从我的目的中找到了足够接近的东西。这将转换`lat,lng`为`x,y`.

```
#from view-source:https://google-developers.appspot.com/maps/documentation/javascript/examples/map-coordinates
sub lat_lng_zoom_to_point ($$$) {
  my ($lat, $lng, $zoom) = @_;
  my $x = 128 + $lng * (256/360);
  my $siny = sin(deg2rad($lat));
  $siny = $siny < -0.9999 ? -0.9999 : $siny > 0.9999 ? 0.9999 : $siny;
  my $y = 128 + 0.5 * log((1 + $siny) / (1 - $siny)) * -(256/(2 * pi));
  return($x * (1 << $zoom), $y * (1 << $zoom));
} 
```

# visual-c++ - 从基类静态方法调用派生类静态方法

> ID：10632841
> 
> 赞同：0
> 
> 时间：2012-05-17T09:17:10.523
> 
> 标签：visual-c++, inheritance, gcc, static

我已阅读以下 SO 问题：

*   [从基类调用派生类函数](https://stackoverflow.com/q/4869216/501663)
*   [从基类引用调用派生类方法](https://stackoverflow.com/q/4209000/501663)
*   [什么是对象切片？](https://stackoverflow.com/q/274626/501663)

但是，关于静态方法以及 Visual-c++ 和 gcc 之间的区别，我有一个稍微不同的问题。

我有一个类，它捆绑了一些与给定任务相关的静态方法。我想实现每个方法的简单版本，并在未来允许更有效的实现。我通过实现基类中的所有方法并从派生类调用方法来做到这一点。这样，具有“较新”实现的方法将隐藏“旧”实现。我的问题是，当一个方法`g()`调用另一个方法时`f()`，我想验证派生类中的实现是否被调用（如果存在）。我不能使用虚拟方法，因为我的方法都是静态的。在 visual-c++ 中，以下代码正在执行我刚刚描述的操作，但 gcc 不会编译 - 实际上我很惊讶 visual-c++ 编译正常。（我需要我的代码在两者上编译）

```
struct Base {
    static void f () {}
    static void g () { Derived::f(); } //--- visual-c++ compiles ok; gcc: "'Derived' was not declared in this scope"
};
struct Derived : public Base {
    static void f () {}
};

Derived::g (); 
```

我的问题是，为什么 visual-c++ 没有抱怨，我如何在 gcc 中解决它而不对我的代码进行根本性的改变？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:58:32.500

好的，给出的答案（在我有机会评论/接受之前被删除）让我明白解决方案是多么简单（或者换句话说，我的问题是多么愚蠢:)）

我所要做的就是将声明与实现分开（它都在一个单独的 h 文件中 - 我知道，编码不好，这是一个永久的“临时”解决方案）

```
struct Base {
    static void f ();
    static void g ();
};

struct Derived : public Base {
    static void f();
};

int main() {
        Derived::g ();
        return 0;
}

void Base::f () {}

void Base::g () { Derived::f(); } 

void Derived::f() {} 
```

# box2d - 如何在 Box2D/Farseer 中将地形表示为物理对象

> ID：10632847
> 
> 赞同：2
> 
> 时间：2012-05-17T09:17:26.933
> 
> 标签：box2d, farseer

在 Box2D/Farseer 中表示生成的 2D 地形的最佳方式是什么？地形由一些山丘组成——想想一些沙丘。

Farseer 文档中描述了一种从纹理生成多边形的方法：http: [//farseerphysics.codeplex.com/documentation](http://farseerphysics.codeplex.com/documentation)（“纹理到多边形”部分）

但实际上我不需要地形作为多边形。我只需要面线。通过多项式表示地形会很棒，但我在 Box2D/Farseer 中找不到对多项式的任何支持。

我是否必须使用 Edges 和 LineArcs 来为我的沙丘建模，或者有什么更适合的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T12:38:54.603

Emanuele Feronato 为我在他的博客上寻找的内容提供了一个教程：

[使用 Flash 和 Box2D 创建类似于 Tiny Wings 中的地形](http://www.emanueleferonato.com/2011/07/14/create-a-terrain-like-the-one-in-tiny-wings-with-flash-and-box2d/)

# c++ - Boost Fusion 调用和 SFINAE

> ID：10632848
> 
> 赞同：2
> 
> 时间：2012-05-17T09:17:28.883
> 
> 标签：c++, metaprogramming, invoke, sfinae, boost-fusion

我想根据`boost::fusion::invoke()`特定的融合序列是否有效来实现部分类模板专业化。但在这种情况下，替换失败似乎是一个错误。

我想我需要一个`is_callable_with_these_sequence_parameters<F, Seq>`有效的元函数。任何人都可以帮忙吗？

```
struct F
{
    template<class> struct result;
    template<class F> struct result<F(float)> { typedef int type; };
    int operator()(float) { std::cout << "invoked (float)\n"; }
};

template <class Sequence, class Enable=void>
struct A
{
    A() { std::cout << "invoked nothing\n"; }
};

// Partial specialization
template <class Sequence>
struct A<Sequence, typename boost::fusion::result_of::invoke<F, Sequence>::type>
{
    A() { boost::fusion::invoke(F(), Sequence()); }
};

static void test()
{
    A<boost::fusion::vector<float> >(); // should print "invoked (float)"
    A<boost::fusion::vector<char, char> >(); // should print "invoked nothing"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T17:43:32.803

经过一番调查，我认为这是提升中的一个错误。

[在这里](https://svn.boost.org/trac/boost/ticket/6915)报告，到目前为止没有解决方法。

* * *

**更新：**`boost::fusion`根据票证，一些不正确的行为已得到修复。

# php - PHP：未定义的偏移错误

> ID：10632850
> 
> 赞同：1
> 
> 时间：2012-05-17T09:17:41.213
> 
> 标签：php, sql, arrays

下面提供的代码用于填充数组“数据”。

```
$query1="SELECT * FROM tab1, tab2 WHERE tab1.column1=tab2.column2;";
    $result1=DatabaseConnector::ExecuteQueryArray($query1);
    $data = array();
    $i = 0;
    foreach ($result1 as $row):
        $data[] = array(
            array($i,array("xxx",' EE112',$row['column3'],'FT445'),"2004-03-01 10:00","2004-03-01 14:00"));
        $i++;
    endforeach; 
```

当我尝试从数组中读取数据时，出现错误“未定义的偏移量：1”。有趣的是，当我使用`$data =`and not填充“数据”数组`$data[] =`时，没有错误，只是填充了最后一行。错误是由 line 产生的`$bar = new GanttBar(..)`。我试图`$row['column3']`用一些字符串“xxx”代替，但出现了同样的错误。

```
for($i=0; $i<count($data); ++$i) {
        $bar = new GanttBar($data[$i][0],$data[$i][1],$data[$i][2],$data[$i][3]);
        $graph->Add($bar);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:22:47.767

Isn't

```
$data[] = array("xxx",' EE112',$row['column3'],'FT445',"2004-03-01 10:00","2004-03-01 14:00"); 
```

just enough, data structure should be as simple as possible.

Ok, if you want that structure.

```
$data[] = array(array("xxx",' EE112',$row['column3'],'FT445'),"2004-03-01 10:00","2004-03-01 14:00"); 
```

Then

```
foreach($data as $i => $var) {
    $bar = new GanttBar($i, $var[0], $var[1], $var[2]);
    $graph->Add($bar);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:36:06.300

我认为有一个非常基本的问题：

foreach 循环在 $data 中为每一行创建一个新的子数组。但稍后您的代码试图从 $data 中的每个条目中获取三行 - 这从未创建过。因此`$data[$i][1]`总是空的。

您可能需要调整您的 sql 查询以从一开始就以正确的格式接收数据。

# jquery - 当事件为 jQuery keyup 时，添加类以显示 div 对 Android 没有影响

> ID：10632853
> 
> 赞同：0
> 
> 时间：2012-05-17T09:17:43.923
> 
> 标签：jquery, android

以下代码应该在输入字段中输入单个字符后立即使 div 可见。只要没有输入任何字符，就应该再次隐藏输入。

这适用于我在 iPhone 上和 iPhone 上测试过的每个桌面浏览器。然而，在 Android 上什么也没有发生。

```
 $("#filter").keyup(function () {

    if (    !$('input#filter').val().length == 0    ){
        $('#filter-close').removeClass('hidden');
        //alert('remove hidden');
    } else {
        $('#filter-close').addClass('hidden');
        //alert('add hidden');
    } 

}); 
```

最初我认为这是事件未触发的问题。为了测试这一点，我添加了警报（在上面的代码中注释掉），结果证明事件触发得很好。

Android 是否存在一些错误，其中在输入具有焦点时添加或删除的类未应用，或者已应用但适当的 CSS 未应用于元素？谢谢

# android - 内存分析器工具 - Android

> ID：10632855
> 
> 赞同：2
> 
> 时间：2012-05-17T09:17:53.923
> 
> 标签：android, memory-leaks, eclipse-memory-analyzer

我修复了我的应用程序活动中的窗口泄漏。但是，当我在 android - Histogram View 中使用 Memory Analyzer Tool 测试应用程序时，我发现了 2 个我的活动实例。

## 班级名称 | 对象 | 浅堆 | 保留堆

. *MATDemoActivity。* | | |
com.pace.mat.MATDemoActivity | 2 | 368 |

## 总计：1 个条目（已过滤 2,195 个）| | |

既然没有内存泄漏，怎么可能是 2 个对象呢？请帮助我理解 MAT 结果中的数据....提前致谢

请在此链接中找到完整的代码和相关讨论。

[代码中的 Android 内存泄漏](https://stackoverflow.com/questions/10630954/android-memoryleak-in-code)

==================

我发现当我从 Activity 1st -> 2nd -> 1st 开始时。第一个活动类的浅堆 = 2 和第二个活动类 = 1 当我从第一个 -> 2nd -> 1st -> 2nd 移动时……第一个活动类的浅堆 = 1 和第二个活动类 = 2。

所以我尝试了启动模式。我为所有活动设置了 android:launchMode="singleTask"。现在这两个活动的浅堆等于我导航到页面的次数。但是由于在此启动模式下不允许多个实例，为什么我没有将浅堆对象计数为 1 ？

请分享您的想法，这将有助于我更好地理解这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:01:58.987

在活动中创建不需要的对象会导致内存泄漏。所以它非常重要，你应该避免创建无用的类的对象。这些将持有一些内存而不释放它。我认为这个[链接](http://codelog.dexetra.com/getting-around-android-memory-blues)将帮助你解决你的问题问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T12:12:11.983

在 android 中，我们可以使用 Memory Analyzer 工具来捕获特定代码中的内存泄漏（如果有）。我们应该在执行负责泄漏的操作之前和完成操作之后生成堆转储。比较这 2 个转储，找出哪些对象占用了内存以及为什么它没有被垃圾回收。

在我上面提到的情况下，我没有分析进入第二个活动后生成的转储，而是尝试比较活动前后的转储。我清楚地得到了所需的结果。

此外，关于 MAT 工具，最好多尝试一次并比较转储并选择转储进行分析。

谢谢朋友。

# mysql - MySQL如何对这个查询进行排序？

> ID：10632856
> 
> 赞同：0
> 
> 时间：2012-05-17T09:17:55.997
> 
> 标签：mysql, sql, sorting

我有以下查询：

```
SELECT 
    DATE_FORMAT( DATE, '%M' ) AS MONTH,
    DATE_FORMAT( DATE, '%y' ) AS YEAR,
    DEVICE,
    COUNT( * ) AS cnt
FROM users
GROUP BY YEAR, MONTH, DEVICE 
```

我正在尝试按年和月订购，例如：

*   11 月 11 日
*   12月11日
*   1 月 12 日
*   ...

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:29:16.350

您可以使用 MySQL[`YEAR`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_year)和[`MONTH`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month)内部的`GROUP`and`ORDER BY`子句：

```
SELECT
DATE_FORMAT( DATE, '%M' ) AS MONTH,
DATE_FORMAT( DATE, '%y' ) AS YEAR,
DEVICE,
COUNT( * ) AS cnt
FROM users
GROUP BY YEAR(DATE), MONTH(DATE), DEVICE
ORDER BY YEAR(DATE), MONTH(DATE) 
```

您也可以替换`DATE_FORMAT( DATE, '%y' )`为`YEAR(DATE)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:21:54.307

要订购您想要的东西，请使用[ORDER BY](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)：

```
SELECT DATE_FORMAT( DATE, '%M' ) AS
MONTH , DATE_FORMAT( DATE, '%y' ) AS year, DEVICE, COUNT( * ) AS cnt
FROM users
GROUP BY year, MONTH , DEVICE
ORDER BY DATE_FORMAT( DATE, '%y' ), DATE_FORMAT( DATE, '%m' ) 
```

# matlab - 在 Matlab 中，如何改变轴方向？

> ID：10632859
> 
> 赞同：5
> 
> 时间：2012-05-17T09:18:00.993
> 
> 标签：matlab

我一直在 Matlab 中编写一个脚本来绘制 3D 图像，使用`plot3`.

轴在此间隔内运行：

*   x: [1 -> 0]
*   y: [0.01 -> 0]
*   z: [0 -> 1]

结果如下图所示：

![在此处输入图像描述](../Images/81ed7fd8a4ffe9de5da71dd29cd3c768.png)

现在我想改变我的轴的方向，并用这个轴方向重新绘制图形：

*   x: [0 -> 1]
*   y: [0 -> 0.01]
*   z: [0 -> 1]

我怎么能这样做？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-17T09:30:15.930

您可以通过设置适当的方向属性来更改轴的方向，请参阅[轴属性文档](http://www.mathworks.co.uk/help/techdoc/ref/axes_props.html)`XDir, YDir, ZDir`中的属性。这些属性的值为或。要反转一个轴的方向，比如 x 轴，请使用`normal``reverse`

```
set(gca, 'XDir', 'reverse') 
```

# transactions - Windows 工作流基础状态机事务

> ID：10632863
> 
> 赞同：0
> 
> 时间：2012-05-17T09:18:14.623
> 
> 标签：transactions, workflow-foundation

它是 Windows 工作流基础状态机中的事务吗？不在顺序工作流中。以及如何管理来自主机的事务？

我有 3 个状态机，分别调用。如果第三个状态机抛出异常，我想将 3 个状态机恢复到以前的状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T15:19:29.440

如果您的工作流主机具有 InstanceStore 设置，并且状态机在事务之前的某个时间点保持不变，则当事务中止时，当前实例将被放弃。

下次您恢复工作流时，它将从事务之前的持久性点恢复。

# android - 如何将联系人导出到 .vcf 文件

> ID：10632864
> 
> 赞同：0
> 
> 时间：2012-05-17T09:18:23.720
> 
> 标签：android, export, contacts

我想将我设备中的联系人导出为 .Vcf 文件，谁能帮我这样做？因为我在谷歌搜索时得到的只是如何使用不在代码中的联系人菜单进行导出。提前感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:22:04.283

尝试在下面的帖子中导出 android 手机中的联系人：

[使用 android OS 2.0 API 级别 5 以编程方式导入/导出为 VCard 格式](https://stackoverflow.com/questions/1721249/import-export-to-vcard-format-programmatically-using-android-os-2-0-api-level-5)

[提取vcf格式的联系人列表](https://stackoverflow.com/questions/8701727/extract-contact-list-in-vcf-format)

谢谢！

# java - 我对代码的措辞感到困惑

> ID：10632867
> 
> 赞同：1
> 
> 时间：2012-05-17T09:18:30.123
> 
> 标签：java

我阅读了 JDK 的源代码，并对代码的措辞感到困惑。代码的方法意味着返回指定数组内容的字符串表示。

例如：int[] a = { 0,1, 2, 3, 4, 5, 6, 7, 8, 9 };
返回 : [1, 2, 3, 4, 5, 6, 7, 8, 9]

JDK 版本

```
 public static String toString(int[] a) {
    if (a == null)
        return "null";
   int iMax = a.length - 1;
   if (iMax == -1)
        return "[]";

    StringBuilder b = new StringBuilder();
    b.append('[');
    for (int i = 0; ; i++) {
        b.append(a[i]);
        if (i == iMax)
            return b.append(']').toString();
        b.append(", ");
    }
} 
```

我的问题：
1，为什么不把 if 条件放在 for 循环
代码的外面：

```
 //the follow code efficiency may be better or not
 for (int i = 0; i< iMax; i++) {
        b.append(a[i]);
        b.append(", ");
    }
 return  b.append(a[iMax]).append(']').toString(); 
```

2、`StringBuilder`方法 `append` ，如果参数是括号，方法使用char参数而不是String，我深入 `append`方法，`append(char c)`方法看起来效率很高，但我不确定

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:45:03.680

我认为您的代码可以像这样进一步优化/重构：

```
public static String toString(int[] a) {
    if (a == null)
        return "null";
    StringBuilder b = new StringBuilder("[");
    int iMax = a.length - 1;
    if (iMax == -1)
         return b.append(']').toString();;
    for (int i = 0; i < iMax; i++)
        b.append(a[i]).append(", ");
    return b.append(a[iMax]).append(']').toString();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:03:06.557

1.  您必须在“for”循环中编写“if”条件，因为“for”循环的结构是：

    ```
     for(initialization, test condition, modifier expression)

     eg: for(int i=0 ; i<10 ; i++) 
    ```

    如上面的例子 for (int i = 0; ; i++) 没有测试条件，它必须写在“for”循环中，否则它将继续迭代......即。无限循环。

2.  这里方法 public static String toString(int[] a) 的返回类型为 String，因此使用 toString() 更容易将其转换为字符串格式，现在如果它是“char”，则首先将其转换为Wrapper 对象“Character”，然后我们可以将 toString() 应用于它......它很乏味......但可以做到......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:31:43.957

1.  您的代码通过`<`(小于) 来比较数字，它永远不会比等式比较 ( `==`) 执行得更好，并且可能执行得更差。所以JDK版本更加精心优化和深思熟虑。

2.  是的，在适用的情况下使用原始 arg 会更有效。没有堆分配，没有指针取消引用（避免可能的缓存未命中和页面错误）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-17T10:36:01.937

1.) 如果将 if 条件放在循环之后，它将在退出循环之前在字符串的末尾添加一个逗号。导致“[1, 2, 3, 4, 5, 6, 7, 8, 9,]”。请注意 9 之后的最后一个逗号。这是完成工作的最简单方法。

2.) 当您不想在字符串池中放入大量不会被清除的字符串时，使用 StringBuilder。但诚实的答案是我不确定！

# xml - 使 xml 文件在网络上可编辑的最佳方法

> ID：10632870
> 
> 赞同：2
> 
> 时间：2012-05-17T09:18:51.830
> 
> 标签：xml

我有一个巨大的配置文件（基于xml），客户经常更新。现在我不希望用户直接对文件进行配置更改，因为用户可能会输入可能使文件无效的无效数据。现在我有一个表单，它从用户那里获取输入，然后在服务器端我使用 xpath 来编辑 xml。UI 体验很差，因为您可以向父级输入多个子标签，并且每次添加都有一个回发到服务器和它还需要大量用户输入才能知道他想在 dom 中的哪个位置添加标签。有什么办法可以让我以 html 可编辑的形式表示我的 xml，并为用户提供下拉列表以从中选择值，并且他还可以添加新标签。我对技术、JS、php、.net、java 或任何客户端库持开放态度。

# c# - 将哈希集与文件进行比较

> ID：10632871
> 
> 赞同：0
> 
> 时间：2012-05-17T09:18:52.970
> 
> 标签：c#, hashset

如何将 a`hashset`与文件的内容进行比较？

我想要某种循环，将文件内容与文件内容进行比较`hashset`，然后在`hashset`文件中找不到相同内容的地方停止

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:33:00.563

样本

```
string[] array1 = { "cat", "dog", "cat", "leopard", "tiger", "cat" };
var hash = new HashSet<string>(array1);
    string f = "TextFile1.txt";
using (StreamReader r = new StreamReader(f))
{

    string line;
    while ((line = r.ReadLine()) != null)
    {

    if(!hash.Contains(line))
              break;
    }
} 
```

# jquery - jquery选择子元素

> ID：10632873
> 
> 赞同：1
> 
> 时间：2012-05-17T09:19:03.797
> 
> 标签：jquery

我对 jQuery 很陌生。

我编写了这段代码来选择子 TD 元素。

```
$(this)
    .children("div.tablescroll_wrapper")
    .children("table.tablescroll_body")
    .children("tbody")
    .children("tr.first")
    .children() 
```

它**工作正常，但看起来很糟糕**，有没有更好的方法来做到这一点？

对不起我的英语水平低，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T09:23:43.423

我不确定您的 html 结构，但是您可以通过以下方式实现您想要实现的目标，

```
$(this).find("div.tablescroll_wrapper tr.first").children(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:24:17.797

您不必浏览整个树。只需为表设置一个 id 或直接选择 tr 即可：

```
 $(this).find('tr:first').children(); 
```

已经足够好了。否则，选择具有表 id 的表：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:28:01.567

```
$('div.tablescroll_wrapper > table.tablescroll_body > tr.first', this).children(); 
```

或者

```
$('div.tablescroll_wrapper > table.tablescroll_body > tr.first > *', this); 
```

# c# - 简单的子字符串搜索（蛮力）

> ID：10632874
> 
> 赞同：1
> 
> 时间：2012-05-17T09:19:07.183
> 
> 标签：c#, search, for-loop, substring, brute-force

我正在尝试使用蛮力技术进行简单的子字符串搜索，但我遇到了一个我看不到的错误。我对编程很陌生，所以请记住这一点。问题可能非常简单。

```
using System;
using System.Collections;
using System.Collections.Generic;

namespace SubstringSearch
{
    class Program
    {
        static void Main(string[] args)
        {
            Console.Write("Please enter some letters: ");
            string sequence = Console.ReadLine();
            Console.Write("Enter the sequence you want to search for: ");
            string pattern = Console.ReadLine();

            Console.WriteLine(Search(pattern, pattern.Length, sequence, sequence.Length));

            Console.ReadLine();
        }

        public static int Search(string pattern, int patternLength, string sequence, int stringLength)
        {
            int i;
            int j;

            if (stringLength >= patternLength)
            {
                for (j = 0; j <= (stringLength - patternLength); j++)
                {
                    for (i = 0; i < patternLength && pattern[i] == sequence[i + j]; i++);

                    if (i >= patternLength)
                        return j;
                    else
                        return -1;
                }
            }
            else
                return -1;
        }
    }
} 
```

所以我收到一个错误和一个警告。首先，它告诉我并非所有代码路径都返回一个值（在 Search() 中）。我不明白为什么。其次，我收到一个警告，指出我的整数“j”在第一个 for 循环中无法访问（在“j++”处）。

请帮忙！我确定答案很简单，但我就是看不到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:43:19.373

据我所知，你得到的错误是因为如果第一个“for”循环甚至没有运行一次，那么你就不会点击 return 语句。这可能不太可能/不可能，但您仍然必须考虑到它。解决这个问题的方法是在最后删除“else”，这样如果它走得那么远，它肯定会碰到“return -1”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:21:44.507

问题似乎在于您的第二个 for 循环。试试这个：

```
 if (stringLength >= patternLength)
        {
            for (j = 0; j <= (stringLength - patternLength); j++)
            {
                for (i = 0; i < patternLength && pattern[i] == sequence[i + j]; i++)
                {
                    if (i >= patternLength)
                        return j;                       
                }
            }
        }
 return -1; 
```

这应该删除所有警告和错误并编译。你为什么不使用这个[`.Contains()`](http://msdn.microsoft.com/en-us/library/dy85x1sa.aspx)方法？

> 包含
> 
> 如果 value 参数出现在此字符串中，或​​者 value 是空字符串 ("")，则为真；否则为假。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T09:24:53.143

不返回的代码路线是当stringLength = patternLength。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T09:51:32.777

代替

```
Console.WriteLine(Search(pattern, pattern.Length, sequence, sequence.Length)); 
```

和

```
sequence.IndexOf(pattern); 
```

并摆脱您的搜索功能。您正在重写（很差）框架中可用的内容。

# web-services - 云中的 SharePoint 2010 Web 服务 API (BPOS / Office 265)

> ID：10632877
> 
> 赞同：1
> 
> 时间：2012-05-17T09:19:16.763
> 
> 标签：web-services, sharepoint-2010, office365

[Microsoft记录了 SharePoint 的 SOAP Web 服务 API](http://msdn.microsoft.com/en-us/library/ee705814.aspx)，但是没有明确提及 BPOS / Office 365 / Microsoft 的云产品。谷歌没有多大帮助，所以我想我会在这里问：

1.  是否有任何有关使用托管在 Microsoft 云中的 Web 服务的文档？

2.  与云解决方案相比，非云 SharePoint 安装在身份验证或使用 Web 服务方面是否存在差异？我对身份验证以及云如何与 Enterprise 现有的身份验证基础架构集成特别感兴趣？

3.  [Web 服务 API 的 Authentication 类](http://msdn.microsoft.com/en-us/library/websvcauthentication.aspx)是否抽象出所有身份验证细节，因此 Web 服务客户端不应该关心如何实际实现身份验证（它只是发送用户名、密码并检查从 Web 服务返回的[LoginResult](http://msdn.microsoft.com/en-us/library/websvcauthentication.loginresult)）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:05:37.690

不幸的是，没有简单的方法。并且微软没有记录。
在这里寻找这样做的人并分享他的代码： http:
[//www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx](http://www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx)

基本上，这就是它的作用：

*   获取登录网址
*   发布表格
*   从 SPO 获取 cookie
*   在您拨打的每个电话中插入它

# jsf-2 - Primefaces 3.2 客户端 API 文档在哪里？

> ID：10632879
> 
> 赞同：5
> 
> 时间：2012-05-17T09:19:18.307
> 
> 标签：jsf-2, primefaces

我下载了 Primefaces 3.2，但我找不到客户端 API 的 javadocs。他们说它有丰富的客户端api，所以我也可以看看它。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T18:59:30.480

虽然这听起来可能太微不足道，但作为一种潜在的解决方法，如果在提供的文档中找不到所需的属性/函数名称，可以执行以下操作：

1.添加`widgetVar`到组件：

```
 <p:dataTable widgetVar="caseDataTable" ...>
        ...
    </p:dataTable> 
```

2.在浏览器中使用足够的开发者控制台打开相应的页面（我更喜欢`Chrome`，但`Firefox`也应该这样做），打开 JS 控制台，输入 JS 变量的名称，`.`控制台应该显示可用属性/功能的下拉列表：

![带有下拉菜单的 Chrome 控制台](../Images/b1e1a53eff0dd8475836a7ff7f6c7691.png)

3.尝试猜测哪个属性/函数做了什么:)

尽管应该谨慎使用这些功能/属性，因为由于它们没有记录在案，它们可能会在未来的版本等中被删除，但作为一种变通方法，这可能会奏效。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-17T09:21:16.003

关于 PrimeFaces 的一切都在这里

[https://www.primefaces.org/documentation/](https://www.primefaces.org/documentation/)

# iphone - 表格单元格幻灯片

> ID：10632886
> 
> 赞同：0
> 
> 时间：2012-05-17T09:19:51.100
> 
> 标签：iphone, objective-c, ios, xcode

我已经使用 UIVIew 类引用创建了名为 CustomCell 的自定义单元格，并与名为 SlidingCustomCell 的 UITableViewCell 引用创建了接口。在这个接口中我称之为 CustomCell 接口。出现滑动事件时，我想滑动单元格。为此，我在接口 SlidinCustomCell 方法中创建：

```
-(void)touchesMoved 
```

用简单的代码

```
CGRect frame = cellGroup.frame;
frame.origin = CGPointMake(100, 0);
cellGroup.frame = frame; 
```

当我滑动第一个单元格时，一切看起来都很好，直到我向下滚动并看到第 9 个单元格在没有我交互的情况下自动滑动。每个滑动单元格都会出现此错误。（1\. 单元格自动幻灯片 9\. 单元格，2\. 单元格自动幻灯片 10\. 单元格等）。我已经创建了 20 个表格单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:55:21.643

即使您没有与它们交互，单元格出现滑动的原因是因为它们正在被**重用**。用`tableView:willDisplayCell:forRowAtIndexPath:`您的模型验证单元格确实是滑动的，并将其更改为假设的任何内容（滑动或不滑动）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T10:06:24.157

您的其他单元格被滑过的原因是因为它们正在被重复使用

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

您需要在模型中设置一个变量来标记每个单元格何时滑过。然后在每次创建单元格时检查该项目是否确实需要滑动。

像这样的东西。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{ 
   //code to create cell here...
   if (thisModelItemNeedsToBeSlidOver)
    {
        [someTableCell slideOverMethod];
    } 
    else
    {
        [someTableCell resetSlideOver];
     }
} 
```

# visual-studio - 如果手动排队，TFS Autobuild 会成功，但如果安排好则会失败

> ID：10632889
> 
> 赞同：0
> 
> 时间：2012-05-17T09:19:57.247
> 
> 标签：visual-studio, tfs, tfsbuild, workspace

我有一个从 .net 2.0 升级到 .net 4.0 的项目。

我已经编辑了构建定义以确保使用正确的构建控制器并编辑了构建项目（并重新签入）以更新 devenv 的位置，如下所示：

```
<Exec Command="&quot;$(ProgramFiles)\Microsoft Visual Studio 10.0\Common7\IDE\devenv&quot; &quot;$(SolutionRoot)\TBSWatcher.sln&quot; /Build &quot;Release|Any CPU&quot;"/> 
```

如果我手动将新构建排队，它会成功，但隔夜预定构建会失败。

错误日志显示它在尝试使用 Visual Studio 2008 构建项目时失败。

```
E:\Builds\10\Tools\MyProject\BuildType\TFSBuild.proj (240): The command ""C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE\devenv" "E:\Builds\10\Tools\MyProject\Sources\MyProject.sln" /Build "Release|Any CPU"" exited with code 9009. 
```

我怀疑这可能与工作空间有关，但我们的 TFS 大师不在，我有点难过。

任何想法为什么当我排队构建但在安排过夜时失败时这是有效的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:09:26.617

使用[MSBuild 任务](http://msdn.microsoft.com/en-us/library/z7f65y0d)而不是 Exec 任务。

```
<ItemGroup>
    <ProjectToBuild Include="E:\Builds\10\Tools\MyProject\Sources\MyProject.sln"></ProjectToBuild>
</ItemGroup>
 <Target Name="Build">
    <MSBuild Projects="@(ProjectToBuild)" Properties="Configuration=Release;Platform=AnyCPU"/>
</Target> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:34:39.617

看来，在运行您的 exec 命令之前构建失败。在这种情况下，您可以检查添加到您的 E:\Builds\10\Tools\MyProject\BuildType\TFSBuild.proj 文件中的导入。无论如何，您应该摆脱使用 exec 任务。

# sql-server - 如何为每个客户获取一行，包括 SQL 中订单的第一行

> ID：10632892
> 
> 赞同：3
> 
> 时间：2012-05-17T09:20:08.133
> 
> 标签：sql-server

我有两个表 - 客户和订单。每个客户将有 1..n 个订单。它们与 Orders 表中的 Customers 表的外键有关系。到目前为止，DB 101 也是如此。

我需要一个查询，该查询将为每个客户返回一行，以及该客户最新订单的日期和订单 ID。所有客户至少有一份订单。我可以使用函数轻松完成此操作，但我更喜欢在 SQL 中执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:26:00.603

In case of auto incremented ID-s, and no variance with dates, the solution is that simple:

```
SELECT c.*, o.*
FROM Customer c 
JOIN (SELECT max(id) as order_id, customer_id 
      FROM Order GROUP BY curtomer_id) conn on c.id = conn.customer_id
JOIN Order o on o.id = conn.order_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:31:57.663

你没有说明你的 DBMS，所以我假设一个符合 ANSI 的引擎。

```
select *
from (
    SELECT c.*, 
           o.*, 
           row_number() over (partition by o.customer_id order by order_date desc) as rn
    FROM Customer c 
      JOIN Order o on o.customer_id = c.id
)
where rn = 1 
```

# android - 如果更改，PreferenceActivity 中的音量不会保存

> ID：10632896
> 
> 赞同：1
> 
> 时间：2012-05-17T09:20:24.903
> 
> 标签：android, volume, preferenceactivity, ringtone

如何从 PreferenceActivity 更改音量？我有这个xml：

```
<RingtonePreference
        android:name="Ringtone Preference"
        android:summary="Select a ringtone"
        android:title="Ringtones"
        android:key="ringtonePref" />
<VolumePreference
    android:name="Volume Preference"
    android:summary="Ringtone Volume"
    android:title="Ringtone Volume"
    android:key="ringVolPref"/>

</PreferenceCategory> 
```

并且该类扩展了 PreferenceActivity：

```
public class SettingTest extends PreferenceActivity {

@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    addPreferencesFromResource(R.layout.ringtone); 
```

我不知道如何更改音量（如果我运行应用程序，它会显示 Volume SeekBar，但不会保存更改）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:29:10.057

Maybe try this:

```
@Override
protected void onStart() {
    addPreferencesFromResource(R.xml.settings);
    super.onStart();
} 
```

Remove **android:name** from xml, preference xml should look like [this](http://developer.android.com/resources/samples/ApiDemos/res/xml/preferences.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:33:46.923

`[VolumePreference][1]`实际上隐藏在 API 中，因此您可能不应该使用它。当我使用这段代码时，实际存储的是值；它记住了 上的位置`SeekBar`。自然，该值不会保存在应用程序的首选项文件中，因为设置应该应用于系统，而不是应用程序......

但是，即使它似乎正确地记住了位置，音量实际上并没有受到影响。您可能想看看设置应用程序是如何做到的：

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.4_r1.2/com/android/settings/RingerVolumePreference.java#56](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/4.0.4_r1.2/com/android/settings/RingerVolumePreference.java#56)

# iphone - UIWebView - 加载页面

> ID：10632905
> 
> 赞同：0
> 
> 时间：2012-05-17T09:21:01.270
> 
> 标签：iphone, ios, uiwebview, uitableview

我正在尝试在 UIWebView 中加载一个链接，该链接会随着用户在 UITableView 中选择不同的行而改变。目前我正在使用下面的代码，但它不能正常工作。

我基于 iOS 开发书中的示例代码。该代码可以在这里找到。示例代码源“http://dl.dropbox.com/u/32355989/YoutubeVideoPlayer.zip”

```
-(void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {    
    NSString *youtubeURLString = [NSString stringWithFormat:@"http://www.youtube.com/v/%@",[videos objectAtIndex:indexPath.row]];
    NSString *html = [NSString stringWithFormat:YOUTUBE_HTML,youtubeURLString];

    [webView loadHTMLString:html baseURL:nil];  //<--This is the point.    
} 
```

有谁知道如何正确加载页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:31:51.873

好吧，如果你想在 UIWebview 中打开一个网站，你必须这样做：

```
NSString *urlAddress = @”http://www.google.com”;
NSURL *url = [NSURL URLWithString:urlAddress];
NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
[webView loadRequest:requestObj]; 
```

但是如果你想在 webview 中加载 html，这是错误的：

```
NSString *html = [NSString stringWithFormat:YOUTUBE_HTML,youtubeURLString]; 
```

并且应该是（假设 YOUTUBE_HTML 格式正确）：

```
NSString *html = [NSString stringWithFormat:@"%@%@",YOUTUBE_HTML,youtubeURLString]; 
```

# c# - 随机矩阵的最佳类型——需要一个源

> ID：10632906
> 
> 赞同：1
> 
> 时间：2012-05-17T09:21:01.923
> 
> 标签：c#, java, floating-point, double

我重写了整个问题以使其清楚。

我需要一种可以容纳[随机矩阵](http://en.wikipedia.org/wiki/Stochastic_matrix)的类型。我需要它使用 Java 或 C#（Java 优先）。

我需要一个内置类型。它可能是某人写的一门课程，但问题是在我的论文中我需要参考所有内容，因此它应该来自文章、书籍等......

与随机矩阵一样，一行中的所有元素的总和都需要为 1，我需要一个可以保证这一点的数据类型。我知道内置类型不能保证这一点。但是有没有一种类型可以保证我们假设计算的每个值都四舍五入到例如 10 位？

我还需要参考一本书或文章，其中提到该数据类型可用于在计算机内存中存储随机矩阵。

来自`BigDecimal`Java 还是`decimal`来自 C# 合适？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:10:44.993

没有内置类型（在这两种语言中）可以满足所有行总和为 1 的（合理任意）要求。当然，自己编写这个非常简单（在浮点的情况下，使用适当的误差范围...）。

我无法想象为什么你需要一个参考来仅仅说“矩阵将是随机的”。如果您需要明确指定类型（出于某种奇怪的原因......），那么您将不得不求助于指定将强制执行所需完整性的算法（显然，这非常微不足道。）

# android - Android如何在普通字符串数组中打印sqlite数据？

> ID：10632907
> 
> 赞同：2
> 
> 时间：2012-05-17T09:21:14.483
> 
> 标签：android, sqlite

大家好，我遇到了这个问题，我在 DB 中太弱了我写了这段代码来填充数据库，现在我想复制数组中的数据以在 arrayadapter 中打印出来，因为我使用 tabactivity，这是我找到的最好的解决方案

```
public void insertIntoTable(){
        try{
            mydb = openOrCreateDatabase(DBNAME, Context.MODE_PRIVATE,null);
            mydb.execSQL("INSERT INTO " + TABLE + "(ID, NAME) VALUES("+Phno.getText()+",'"+PName.getText()+"')"); 

            mydb.close();
        }catch(Exception e){
            Toast.makeText(getApplicationContext(), "Error in inserting into table", Toast.LENGTH_LONG);
        }
    } 
```

这就是我想打印出来的方式

```
 mydb = openOrCreateDatabase(DBNAME, Context.MODE_PRIVATE,null);
        Cursor allrows  = mydb.rawQuery("SELECT * FROM "+  TABLE, null);
    String[] values = new String[] { "Iwant to put the cursor data here" };

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:44:51.853

我希望这对你有用

```
ArrayList<String> values = new ArrayList<String>();
mydb = openOrCreateDatabase(DBNAME, Context.MODE_PRIVATE,null);
        Cursor allrows  = mydb.rawQuery("SELECT * FROM "+  TABLE, null);
allrows.moveFirst()
while(allrows.moveToNext()){ 
      String name= allrows.getString(allrows.getColumnIndex("NAME"));
      values.add(name); 
}
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter); 
```

# visual-studio-2008 - Visual Studio 2008，找不到引导的先决条件

> ID：10632909
> 
> 赞同：1
> 
> 时间：2012-05-17T09:21:15.800
> 
> 标签：visual-studio-2008, crystal-reports, setup-deployment, prerequisites

我在针对 .NET Framework 2 的 VB.Net 应用程序的安装项目中遇到问题。安装项目具有以下定义的先决条件：

```
- Crystal reports for .NET framework 2.0
- Microsoft Data Access Components 2.8
- Windows Installer 2.0 
```

此应用程序在 Visual Studio 2008 中*曾一度*正常工作，并且已找到所有先决条件。上一次正常工作是几个月前。我一直在这台机器上安装 Visual Studio 2008 和 Visual Studio 2010。不过，最近，我安装了 MVC4，为了正确安装，我需要为 Visual Studio 2010 安装 SP1。现在，当我回到 Visual Studio 2008 中的 VB.Net 项目并导航到 时`_properties>prerequisites_`，我看到这三个旁边的黄色三角形消息的先决条件

> “找不到引导的先决条件”。

我在互联网上的某处读到以下位置可能缺少包裹：

> C:\Program Files\Microsoft SDKs\Windows\v6.0A\Bootstrapper\Packages

但是，当我签入此文件夹时，我会看到一个子文件`CrystalReports10_5`夹，据我所知，它是 Crystal Reports 先决条件的正确文件夹。

水晶报告先决条件是我*必须*解决的主要问题，因为如果缺少它，应用程序安装肯定会不正确。我不确定其他两个先决条件（我从另一个开发人员那里接管了这个应用程序）。

我将不胜感激任何人都可以提供的帮助，以获得 Visual Studio 中的此安装项目的先决条件。

**更新**：

我附上*程序和功能*的屏幕截图，显示安装了哪些 Visual Studio 2008 和 Visual Studio 2010 组件，以防它们相关。虽然，嗯，我确实对 Visual Studio 2008 似乎没有显示版本号感到好奇。

![我的 Windows 7 机器上的程序和功能](../Images/5637a2dbb2d815626b09f441ec21466c.png)

# ruby-on-rails - 如何使用 OpenLayers 创建一组引脚？

> ID：10632911
> 
> 赞同：1
> 
> 时间：2012-05-17T09:21:27.947
> 
> 标签：ruby-on-rails

我已经阅读了一些示例，但我仍然不知道如何使用 OpenLayers.Strategy.Cluster 对引脚进行聚类。我看到了一些使用 OpenLayers.Layer.Vector() 的示例，但我不知道如何正确实现它。另外，我如何定义功能、它的属性并将其添加到集群中？

# mysql - Mysql group by 15min 与总和不匹配

> ID：10632914
> 
> 赞同：1
> 
> 时间：2012-05-17T09:21:33.590
> 
> 标签：mysql, sum

我有以下 2 个查询，但它们返回不同的结果。例如，如果我从一个终端请求总金额，我得到：456。

如果我每隔 15 分钟问一次，把所有的值都加起来，我得到 474……这怎么可能？

我获取总金额的查询如下

```
SELECT   SUM(logs.amount) * ei_relationships.itemprice as income
  ,      currency
FROM     ei_relationships
  RIGHT OUTER JOIN logs ON ei_relationships.id = logs.ei_relationship_id 
WHERE    ei_relationships.event_id = 1
     AND logs.serial = '5B:13:52:28:71:21:ED:F1'
ORDER BY currency, log_time ASC 
```

这是我获取相同数据的查询，但现在将其划分为 15 分钟

```
SELECT   SUM(logs.amount) * ei_relationships.itemprice as income
  ,      UNIX_TIMESTAMP(log_time) - UNIX_TIMESTAMP(log_time)%(900) as hour
  ,      currency
FROM     ei_relationships
  RIGHT OUTER JOIN logs ON ei_relationships.id = logs.ei_relationship_id
WHERE    ei_relationships.event_id = 1
     AND logs.serial = '5B:13:52:28:71:21:ED:F1'
GROUP BY hour
ORDER BY currency, log_time ASC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T20:05:55.473

正如[手册](http://dev.mysql.com/doc/en/group-by-functions.html)所说：

> 如果在不包含`GROUP BY`子句的语句中使用 group 函数，则相当于对所有行进行分组。

它还[说](http://dev.mysql.com/doc/en/group-by-hidden-columns.html)：

> MySQL 扩展了 的使用，`GROUP BY`以便选择列表可以引用未在`GROUP BY`子句中命名的非聚合列。这意味着前面的查询在 MySQL 中是合法的。您可以使用此功能通过避免不必要的列排序和分组来获得更好的性能。但是，这主要在每个未在 中命名的非聚合列中的所有值`GROUP BY`对于每个组都相同时很有用。服务器可以从每个组中自由选择任何值，因此除非它们相同，否则选择的值是不确定的。

因此，在这两个查询中，列的总和`amount`乘以列中的一个值`itemprice`；MySQL 将使用哪些值是不确定的，因此，除非每条记录都具有相同`itemprice`的 ，否则结果`income`也是不确定的。

也许你本来打算`GROUP BY currency`和选择`SUM(logs.amount * ei_relationships.itemprice) AS income`？

# c - 如何一次性使用 c 中的套接字 API 发送 .bmp 文件？

> ID：10632919
> 
> 赞同：0
> 
> 时间：2012-05-17T09:21:47.120
> 
> 标签：c, linux, sockets, unix, tcp

我有一个文件 pict.bmp 我需要通过 LAN 发送。有一个服务器开始监听端口。客户端与服务器建立连接后，它请求服务器提供文件的文件名。服务器然后使用文件名并发送到客户端。但问题是服务器使用 sendfile() 系统调用成功发送但文件没有出现在客户端运行的目录中。有没有更好的方法它即实现相同目的的其他一些系统调用。我在这里复制粘贴发送接收部分：

服务器 ：

```
 while(1){

                    nsd = accept(sd,(struct sockaddr*)&clit,&clen);

                    if(nsd < 0){

                            eMsg("Accept error");

                    }

                    rc = recv(nsd, filename, sizeof(filename), 0);

                    if (rc < 0) {

                            eMsg("Receive error");

                    }

                    printf("Filename : %s\n",filename);

                    filename[strlen(filename) - 1] = '\0';

                    if (strcmp(filename, "quit") == 0) {

                            fprintf(stderr, "quit command received, shutting down server\n");

                            break;
                    }

                    fd = open("2bird.bmp", O_RDONLY);

                    printf("fd is %d\n",fd);

                    if (fd < 0) {

                            eMsg("File Open error");

                    }

                    offset = 0;

                    rc = sendfile (nsd, fd, NULL, 1);

                    if (rc < 0) {

                        eMsg("File Send error");

                        fprintf(stderr,"Sending failed");

                }

                if (rc != stat_buf.st_size) {

                        eMsg("File Transfer error");

                }

                close(fd);

                close(nsd); 
```

客户 ：

```
bzero((char *) &serv_addr, sizeof(serv_addr));
     39
     40         serv_addr.sin_family = AF_INET;
     41
     42         bcopy((char *)server->h_addr, (char *)&serv_addr.sin_addr.s_addr,server->h_length);
     43
     44         serv_addr.sin_port = htons(atoi(argv[2]));
     45
     46         if (connect(sd,(struct sockaddr *) &serv_addr,sizeof(serv_addr)) < 0) {
     47
     48                 eMsg("Connection error");
     49
     50         }
     51
     52         printf("Please enter the filename : ");
     53
     54         bzero(buffer,256);
     55
     56         fgets(buffer,255,stdin);
     57
     58         n = write(sd,buffer,strlen(buffer));
     59
     60         if (n < 0)
     61
     62         error("Writing To Socket error");
     63
     64
     65         close(sd);
     66
     67         return 0;
     68
     69 }
     70
     71 void eMsg(char *M){
     72
     73         perror(M); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T09:21:18.320

正如我所看到的，在服务器上，您调用了 sendfile()，它将数据从 fd（bmp 文件的文件描述符）复制到 nsd（套接字）。因此，您已将文件内容复制到套接字描述符。但是要在客户端获取此内容，您必须在客户端从该套接字接收数据。

由于您没有这样做，这就是您没有在客户端获取文件的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-26T14:21:52.587

插入例如

```
 buffer[strcspn(buffer, "\n")] = '\0';
    int fd = open(buffer, O_CREAT|O_WRONLY, 0666);
    while (n = read(sd, buffer, 256), n > 0) write(fd, buffer, n);
    close(fd); 
```

前

```
 close(sd); 
```

（要添加错误检查）。当然，更高阶的缓冲区大小会更有效。

# actionscript-3 - 在 Actionscript 中添加按钮

> ID：10632920
> 
> 赞同：0
> 
> 时间：2012-05-17T09:21:49.583
> 
> 标签：actionscript-3, flash

我正在尝试使用 Actionscript 创建一个按钮。我发现唯一相关的类是 SimpleButton。当我早些时候尝试插入一个文本字段时，我发现它非常简单明了，我只是创建了一个文本字段，并在其中添加了文本。它渲染得很好。

但是，当我尝试做类似的事情时，我发现它没有被渲染。我参考了[Adob​​e 网站](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/SimpleButton.html)上的帮助文档，并将他们的示例代码粘贴为独立文件。它工作得很好。但是，按钮只是彩色的。我想在上面添加一些文本 - 所以我使用了文本字段并将其覆盖。看起来不错。但是现在当我将鼠标靠近文本时，按钮的悬停不再起作用，点击也不起作用 - 我相信这是因为文本在按钮上方。

总而言之，如何使用 Actionscript 毫无问题地创建带有文本的可点击按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:33:43.407

在您的 Textfield 上，您可以设置一个属性：

```
myTextfield.mouseEnabled = false; 
```

这样你的文本字段就不会阻止你点击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:28:41.577

如果要使用图形界面创建按钮，请执行以下操作：

1.  打开`Components`窗口并展开`User interface`部分。
2.  你会在`Button`那里找到一个组件
3.  将其拖到您的舞台上
4.  改变标签，你也可以改变'皮肤'
5.  享受

SimpleButton 是一个 Actionscript 类，旨在促进按钮的编程创建。如果您发现它更适合您的需求，请记住将覆盖文本字段设置为忽略鼠标事件：

```
textField.mouseEnabled = false; 
```

# mobile - Windows mobile 6.5 远程查看状态

> ID：10632926
> 
> 赞同：0
> 
> 时间：2012-05-17T09:22:12.673
> 
> 标签：mobile, windows-mobile

我正在创建一个 windows mobile 6.5 应用程序。我昨天参加了一场演出，其中一个系统有一个基于网络的解决方案，他们可以在其中看到他们 PDA 的 GPS 位置、当前电池电量和内存状态。这些 likley 只是在手机上运行一项服务，在网上某处更新当前的详细信息，还是有为此内置的功能？

汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T13:11:48.727

绝对没有内置功能。如果 Web 解决方案显示一个设备，那么它可能是在每个设备上运行的 Web 服务器。如果它显示多个设备，那么它一定是在某个地方运行的聚合器 - 可能是服务器，它与每个设备上的应用程序通信以获取该信息。

构建通信和更新的方式将受到网络拓扑结构和您的想象力的限制——我可以随便想到一些可能性——但它们绝对不在平台本身中。

# python - 如何根据 TurboGears 中的模型对象动态生成表单？

> ID：10632927
> 
> 赞同：1
> 
> 时间：2012-05-17T09:22:23.720
> 
> 标签：python, turbogears2

有没有办法根据涡轮齿轮箱中的模型对象生成表单？[我在 Django - ModelForm](http://blog.e-shell.org/130)中遇到了该工具，它根据给定模型类的定义生成表单。这正是我在涡轮齿轮箱中所需要的功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T09:55:05.117

[TurboGears2 使用Sprox](http://sprox.org/)提供自动表单生成。

您还可以使用[tgext.crud](http://www.turbogears.org/2.2/docs/main/Extensions/Crud/index.html)自动生成完整的 CRUD 接口。

有关自动表单和 CRUD 生成的概述和教程的博客文章，您可以查看[此博客文章](http://blog.axant.it/archives/423)。它指导您只需几行代码即可创建照片库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-19T11:03:05.443

这是[一篇详细的文章](http://blog.fruiapps.com/2012/05/TurboGears2-tutorial-to-create-a-simple-MVC-application)，详细解释了如何构建东西，你可以在[这里找到相关的代码。](https://github.com/fRuiApps/cpfthw/tree/master/tgnotes)

# iphone - How to load UIWebview on different thread in new view class? Before object's presentModalViewController is called?

> ID：10632938
> 
> 赞同：1
> 
> 时间：2012-05-17T09:23:08.887
> 
> 标签：iphone, objective-c, ios, uiwebview, uikit

Go through the crash report....

```
This GDB was configured as "x86_64-apple-darwin".Attaching to process 1798.
    2012-05-17 13:19:59.628 PDFView[1798:11603] bool _WebTryThreadLock(bool), 0x684b940: Tried to obtain the web lock from a thread other than the main thread or the web thread. This may be a result of calling to UIKit from a secondary thread. Crashing now...
    1   WebThreadLock
    [Switching to process 1798 thread 0x11603]
    2   -[UIWebView _webViewCommonInit:]
    3   -[UIWebView initWithCoder:]
    4   _decodeObjectBinary
    5   _decodeObject
    6   -[UIRuntimeConnection initWithCoder:]
    7   _decodeObjectBinary
    8   -[NSKeyedUnarchiver _decodeArrayOfObjectsForKey:]
    9   -[NSArray(NSArray) initWithCoder:]
    10  _decodeObjectBinary
    11  _decodeObject
    12  -[UINib instantiateWithOwner:options:]
    13  -[UIViewController _loadViewFromNibNamed:bundle:]
    14  -[UIViewController loadView]
    15  -[UIViewController view]
    16  -[UIViewController viewControllerForRotation]
    17  -[UIViewController _visibleView]
    18  -[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:]
    19  -[UIViewController presentViewController:withTransition:completion:]
    20  -[UIViewController presentViewController:animated:completion:]
    21  -[UIViewController presentModalViewController:animated:]
    22  -[LoginPageVC loadVC]
    23  __invoking___
    24  -[NSInvocation invoke]
    25  -[NSInvocationOperation main]
    26  -[__NSOperationInternal start]
    27  -[NSOperation start]
    28  [Switching to process 1798 thread 0x11603]
    __block_global_6
    29  _dispatch_call_block_and_release
    30  _dispatch_worker_thread2
    31  _pthread_wqthread
    sharedlibrary apply-load-rules all
    Current language:  auto; currently objective-c 
```

I think that I am getting this error, its due to webview loading request on the other thread instead of main thread. I want to load the web view in the background to avoid UI blocking.

// calling other view controller

```
{
 ViewController* objVC=[[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];        

NSString* PDFURLString = @"http://images.apple.com/xserve/pdf/L422277A_Xserve_Guide.pdf";

 //creating diff thread.....

NSOperationQueue *queue = [NSOperationQueue new];

 // create own NSInvocation Operation to call other function of other view controller class

NSInvocationOperation * operation = [[NSInvocationOperation alloc] initWithTarget:self selector:@selector(loadURL) object:PDFURLString];    

// add operation to queue

    [queue addOperation:operation];
    [operation release];        

    [self presentModalViewController:objVC animated:YES];

} 
```

// this the function called by ObjVC.

```
-(void)loadURl:(NSString*)urlString
{

    [_indicator startAnimating];
    NSData *pdfData = [[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:_PDFURLString]];    
    NSLog(@"loading URL DATA");
    //Store the Data locally as PDF File

    NSString *resourceDocPath = [[NSString alloc] initWithString:[[[[NSBundle mainBundle]  resourcePath] stringByDeletingLastPathComponent] stringByAppendingPathComponent:@"Documents"]];

    _filePath = [resourceDocPath stringByAppendingPathComponent:@"myPDF.pdf"];
    NSLog(@"File Path:%@",_filePath);

    [pdfData writeToFile:_filePath atomically:YES];

    //Now create Request for the file that was saved in your documents folder

    NSURL *url = [NSURL fileURLWithPath:_filePath];

    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];

    [_webView setUserInteractionEnabled:YES];

    _webView.scalesPageToFit = YES;

    [_webView setDelegate:self];

    [_webView loadRequest:requestObj];

} 
```

Please look into my code and suggest the best method to load the web view on different thread, with UI responding meanwhile. Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T11:38:06.697

该`loadRequest:`方法已经异步执行，因此从主线程调用它不应在加载期间阻塞 UI。

# .net - How Does 3rd Party Component Licensing work in WPF?

> ID：10632943
> 
> 赞同：6
> 
> 时间：2012-05-17T09:23:26.643
> 
> 标签：.net, wpf, licensing, components, controls

In WinForms whole licensing schema in .NET is revolved around `LicenseManager` and `LicenseProvider` as mentioned quite nicely in [this article](http://www.developer.com/net/csharp/article.php/3074001/Applications-Licensing-using-the-NET-Framework.htm).

I have simple test form in WinForm (dropped licensed DevExpress's ButtonEdit in there) using below code I can see that it is getting license info fine:

`var license = LicenseManager.Validate(typeof(ButtonEdit), this);`

I can also see that it has auto generated licenses.licx file and added to my project.

So, I have tried to the same by dropping DevExpress/Telerik WPF controls into my sample WPF Window and I can see that licenses.licx file is NOT auto generated.

So If I try to run the same line in the WPF, `license` is returning null. That means that it is not using whole LicenseManager architecture in WPF.

What is it using then to check license for 3rd party component?

Looks like someone reported a [bug in VS 2010 in regards to this](http://connect.microsoft.com/VisualStudio/feedback/details/491013/wpf-licenses-licx-file-isnt-added-when-a-custom-licensed-control-is-dropped-onto-a-windows-designer), but I am using VS2010\.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:08:53.587

WPF 也使用相同的机制。您只需要将**LicenseProvider**属性应用于您的类。

由于某些其他原因，您的项目中可能不会生成 licx 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:08:25.613

刚刚发现我用于测试的第 3 方控件之一 (Telerik)[无需许可证密钥即可工作](http://www.telerik.com/purchase/faqs/telerik-premium-collection-for-dotnet.aspx)（滚动到“您如何获得开发人员许可证的许可？”部分）。

检查 DevExpress 并向 Telerik 提出了支持票，他们已经确认他们没有将 licx 用于 WPF 控件。

# php - Practical example for Zend RESTful API

> ID：10632945
> 
> 赞同：2
> 
> 时间：2012-05-17T09:23:27.410
> 
> 标签：php, zend-framework, zend-rest, zend-rest-route

I have referred many articles in the web on this subject but got only basic examples. I got some practical issues.

1). In Zend_Rest_Controller there are abstract methods for get, post, put and delete. how do I create my own function rather thean using getAction, postAction, etc... in order to respond for a get request (Ex: api.abc.com/product/5 - That will return set of products from a category 5)?

2). Is it possible to enable rest routing only for a specific controller in a module?

Can you give some example or some article?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-11T15:37:32.600

我将尝试回答这个问题，因为我已经使用`Zend_Rest_Controller`.

1）那么你应该使用这些方法。它们很有帮助，因为它们会迫使您将每个控制器都视为一种资源来思考。因此，对于每个资源，您应该只能定义一次 GET 动词。

```
public function getAction()
{
    if (!is_null($this->getParam("id"))) {
        $this->view->user = $userModel->getUserById($this->getParam("id",null));
        $this->_helper->viewRenderer('get-user');
    } else {
        $userModel = new Model_Users();
        $this->view->users = $userModel->getUsers();
        $this->_helper->viewRenderer('get-all-users');
    }
} 
```

2）开箱即用 - 我认为没有。但这应该不是一件坏事，因为无论如何您都应该将所有其余功能放在一个单独的模块中。

# android - android connectivity check

> ID：10632950
> 
> 赞同：1
> 
> 时间：2012-05-17T09:23:57.667
> 
> 标签：android

I am currently doing an android application that checks network availability(both wifi & 3G). i have a code that perfectly working in activity . but i need it in broadcast receiver . i want to do some operations when the network is available . i have the permission

plz help me.....

The code is given below...

```
 ConnectivityManager cm =   (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);

 if ( cm.equals(ConnectivityManager.EXTRA_NO_CONNECTIVITY))
    {

  Log.v("CONNECT", "CONNECTED");
    }
 else
 {
  Log.v("CONNECT", "NOT CONNECTED"); 

 } 
```

`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:41:02.367

如果您声明了一个 BroadcastReceiver 类：

```
public class NetConnectionBroadcastReceiver extends BroadcastReceiver
{
    @Override
    public void onReceive(Context context, Intent intent)
    {
        final ConnectivityManager cm = (ConnectivityManager) 
            context.getSystemService(Context.CONNECTIVITY_SERVICE);
        final NetworkInfo networkInfo = cm.getActiveNetworkInfo();
        if (networkInfo == null)
            Log.v("CONNECT", "NOT CONNECTED");
        int netType = networkInfo.getType();
        if (netType == ConnectivityManager.TYPE_WIFI)
        {
            Log.v("CONNECT", "CONNECTED TO WIFI");
        }
        else if (netType == ConnectivityManager.TYPE_MOBILE)
        {
            Log.v("CONNECT", "CONNECTED TO MOBILE" + 
                    (networkInfo.isRoaming() ? " ROAMING!" : ""));
        }
    }
} 
```

您可以将它的实例存储在您的活动中，并且在该`onCreate`方法中您可以注册该`android.net.conn.CONNECTIVITY_CHANGE`事件：

```
private final  NetConnectionBroadcastReceiver receiver = 
        new NetConnectionBroadcastReceiver();
public void onCreate(Bundle savedInstanceState)
{
    // ... your onCreate implementation goes here 
    final IntentFilter intentFilter = 
        new IntentFilter("android.net.conn.CONNECTIVITY_CHANGE");
    this.registerReceiver(this.receiver, intentFilter);
} 
```

当数据连接发生变化时，您会`onReceive`调用接收者的方法。你可以从内部检查，发生了什么样的变化。

对于此检查，您只需要`android.permission.ACCESS_NETWORK_STATE`权限即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:41:30.267

您应该制作一个`BroadcastReceiver`将在连接状态发生变化时触发的

```
public class BroadCastSampleActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        this.registerReceiver(this.mConnReceiver,
                new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION));
    }
    private BroadcastReceiver mConnReceiver = new BroadcastReceiver() {
        public void onReceive(Context context, Intent intent) {
            boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);
            String reason = intent.getStringExtra(ConnectivityManager.EXTRA_REASON);
            boolean isFailover = intent.getBooleanExtra(ConnectivityManager.EXTRA_IS_FAILOVER, false);

            NetworkInfo currentNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
            NetworkInfo otherNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_OTHER_NETWORK_INFO);

            if(currentNetworkInfo.isConnected()){
                Toast.makeText(getApplicationContext(), "Connected", Toast.LENGTH_LONG).show();
            }else{
                Toast.makeText(getApplicationContext(), "Not Connected", Toast.LENGTH_LONG).show();
            }
        }
    };
} 
```

然后在您的 AndroidManifest 中，您可以检查是否有连接：

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

更多源代码[下载](http://paragchauhan2010.blogspot.com/2012/04/check-network-connection-using.html)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-17T09:55:04.763

```
private boolean isNetworkAvailable() {
        ConnectivityManager connectivityManager = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo activeNetworkInfo = connectivityManager
                .getActiveNetworkInfo();
        return activeNetworkInfo != null;
    } 
```

# c# - 使用 UdpClient over Socket 有什么优缺点

> ID：10632952
> 
> 赞同：0
> 
> 时间：2012-05-17T09:23:59.803
> 
> 标签：c#, .net, performance, networking, abstraction

我目前在服务器和客户端上都使用 Socket 类来建立 udp 连接，现在它工作得很好，但我看到还有另一种使用 udp 套接字的方法，即 UdpClient 类。我的问题是我应该在 3d 多人游戏中使用什么？会影响性能吗？等等.....提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:27:06.653

UdpClient 是写在 Socket 类上的包装类。它是专门为使用套接字的 UDP 特性而编写的。您可以使用名为 Client 的属性访问 UdpClass 的套接字实例。像 TcpClient 也是写在用于 TCP 通信的 Socket 上。

# xcode - Xcode tableview 字幕

> ID：10632954
> 
> 赞同：1
> 
> 时间：2012-05-17T09:24:10.287
> 
> 标签：xcode, tableview, cell, subtitle

我一直在寻找一段时间试图寻求帮助，但没有运气:(

我想在 TableViewCells 中设置字幕。每个单元格中的字幕不能相同。我一直在写一些代码：

```
- (void)viewDidLoad
{
[super viewDidLoad];
 tableData = [[NSArray alloc] initWithObjects:@"cell 1", @"cell 2", nil];

}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
return [tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath        *)indexPath 
{
UITableViewCell *cell = nil;
cell = [tableView dequeueReusableCellWithIdentifier:@"MyCell"];
if (cell == nil)
{ 
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle      reuseIdentifier:@"MyCell"];
}
cell.textLabel.text = [tableData objectAtIndex:indexPath.row]; 

cell.detailTextLabel.text = @"Subtitle 1", @"Subtitle 2", nil;

return cell;
} 
```

问题出在`cell.detailTextLabel.text = @"Subtitle 1", @"Subtitle 2", nil;`

有人知道如何在每个单元格中设置不同的字幕吗？

祝你好运！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T10:00:30.380

与设置单元格标题的方式完全相同。你可以让另一个数组保存字幕并像这样获取它们：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    tableData = [[NSArray alloc] initWithObjects:@"cell 1", @"cell 2", nil];
    // Assuming that you have declared another property named 'tableSubtitles'
    tableSubtitles = [[NSArray alloc] initWithObjects:@"sub1", @"sub2", nil];
} 
```

然后在你的`tableView:cellForRowAtIndexPath:`方法中：

```
cell.textLabel.text = [tableData objectAtIndex:indexPath.row];
cell.detailTextLabel.text = [tableSubtitles objectAtIndex:indexPath.row]; 
```

# html - Strange border in Youtube thumbnail

> ID：10632956
> 
> 赞同：1
> 
> 时间：2012-05-17T09:24:15.777
> 
> 标签：html, css, youtube-javascript-api

I want to embed a Youtube video in my page, and I want to use the same background color for both, my video and my web page.

I use this code

```
<object type="application/x-shockwave-flash" id="ytplayer" data="http://www.youtube.com/v/u-fvcm2mx7A?enablejsapi=1&amp;playerapiid=ytplayer&amp;version=3&amp;autohide=1&amp;rel=0&amp;showinfo=0&amp;iv_load_policy=3&amp;theme=light&amp;color=white" style="width: 400px; height: 225px;">
    <param name="allowFullScreen" value="true">
    <param name="allowScriptAccess" value="always">
</object>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/swfobject/2.1/swfobject.js"></script> 
```

Everything works fine, when I play the video I can see it fully integrated. But the the thumbnail loaded before playing the video, sometimes has strange top and right borders.

If I use bigger sizes, maintaining the aspect ratio (16:9), the borders do not show. I have tested in Linux and Windows, and IE, Firefox and Chrome, and with other videos but the problem persists in all of them.

Thanks

# asp.net-mvc - Asp.net MVC 分层架构

> ID：10632958
> 
> 赞同：-1
> 
> 时间：2012-05-17T09:24:23.593
> 
> 标签：asp.net-mvc, n-tier-architecture

我是 Asp.net MVC 的新手。我使用数据源创建了 mvc 应用程序，但我希望使用 n 层架构的 mvc 应用程序..与 asp.net 应用程序一样，它们通常具有表示层业务层和数据层。

我想使用 n 层架构创建 mvc 应用程序...任何遵循 mvc n 层架构的帮助或演示链接..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T10:18:14.970

您的 ASP.NET MVC 控制器可以与您在 n 层应用程序中的任何类进行通信。

例如，您`ProductsController`将调用您的`ProductsBusiness`图层，该图层将调用您的图层，`ProductRepository`进而查询数据库。

你的控制器应该是这样的，所以那里不应该有太多的逻辑。一种看待它的方法是想象你必须替换整个 ASP.NET MVC UI 层 - 所以你想要重用的任何东西都应该降低。另一种可视化的方法是想象编写第二个 UI，它需要重用业务层来完成所有相同的事情。

因此，您的 MVC 应用程序中的控制器是其他 n 层层之上的一层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-18T11:57:38.473

[https://templatestack.azurewebsites.net/Templates/GetAll](https://asptemplatestack.com/Templates/GetAll?id=14)提供了大量不同模板的 N 层应用示例

很快，大多数模板都具有相似的结构：

[![在此处输入图像描述](../Images/474b8cec3c5bdaa7ad0f7b04a893e950.png)](https://i.stack.imgur.com/89aVN.png)

**数据 - 数据层**

1.  数据库表的项目包含 Db 上下文和迁移的配置

2.  数据库抽象级别的项目 - 包含数据库上不同抽象级别的实现，例如工作单元和存储库模式

3.  数据库模型项目 - 包含所有数据库模型，包括从 Web 项目移动的 ASP.NET 标识中的这些模型

**服务-逻辑层**

*   包含应用程序的业务逻辑

**测试**

**工具**

*   在这里可能会创建不同的控制台应用程序，例如 Crawlers、Importers 等

**Web 工具 - Web 应用层**

1.  Web 应用程序的项目 - 这是经典的 MVC 项目，它去除了 Db 上下文依赖项以及 db 模型依赖项。包含依赖注入、Automapper 和其他外部库的配置。该架构应该使您的所有控制器操作非常小，并在服务中执行您的所有业务逻辑，这些服务由您的 IoC（控制反转）容器注入。在我们的例子中，这是 Autofac

2.  Web 应用程序基础设施项目 - 该项目包含与 Web 应用程序相关的源代码，但可能是可重用的，这就是它被 Web 应用程序分开的原因。例如，我们可以在这里放置我们的视图模型、自定义过滤器和注释、html 扩展方法和助手等。

# iphone - get an special substring from NSURL string

> ID：10632962
> 
> 赞同：1
> 
> 时间：2012-05-17T09:24:46.793
> 
> 标签：iphone, ios

I have a `NSURL` String:

```
NSString *url = @"http://ht21.easou.com/mty_ZhiQianQT.mp3?src=test&name=mty&size=100"; 
```

What is the quickest way to get the substring `mty_ZhiQianQt.mp3`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T09:41:43.273

尝试这个 ：

```
NSURL* url = [NSURL URLWithString:@"http://ht21.easou.com/mty_ZhiQianQT.mp3?src=test&name=mty&size=100"];
NSString *name =[NSString stringWithFormat:@"%@",[url.pathComponents objectAtIndex:1]];
NSLog(@"%@",name); // mty_ZhiQianQT.mp3 
```

仅供参考：

`NSLog(@"%@",url.scheme); // http`
`NSLog(@"%@",url.host); // ht21.easou.com`
`NSLog(@"%@",url.lastPathComponent); // mty_ZhiQianQT.mp3`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:27:27.880

子字符串 Nsstring 有很多方法。您可以使用范围进行子字符串化。请参考 Nsstring 类参考。

[http://mobiledevelopertips.com/cocoa/nsrange-and-nsstring-objects.html](http://mobiledevelopertips.com/cocoa/nsrange-and-nsstring-objects.html)

[http://iphonesdkbasics.blogspot.in/2010/07/easy-nsstring-substring.html](http://iphonesdkbasics.blogspot.in/2010/07/easy-nsstring-substring.html)

# collections - Generate custom proxy methods for doctrine2 entities

> ID：10632968
> 
> 赞同：0
> 
> 时间：2012-05-17T09:25:27.263
> 
> 标签：collections, proxy, doctrine-orm, persistence, entity

I have the following scenario:

Users may follow or be followed by other users.

Users are related by a ManyToMany relationship as the following code shows

```
/**
 @var ArrayCollection $follows

 @ORM\ManyToMany(targetEntity="User", inversedBy="followers")
 @ORM\JoinTable(name="user_follows",
         joinColumns={@ORM\JoinColumn(name="user_id", referencedColumnName="id")},
         inverseJoinColumns={@ORM\JoinColumn(name="followed_user_id", referencedColumnName="id")}
     )
*/
protected $follows;

/**
 @var ArrayCollection $followers

 @ORM\ManyToMany(targetEntity="User", mappedBy="follows")
*/
protected $followers; 
```

I'd like to have a collection field named `followersIDs` (not persisted to the database) that will be populated on demand (when calling `$user->getFollowersIDs()`) with only the ids (not the whole entities) of the users who follow the current user.

The point is that a user can be followed by a huge amount of other users and i think it's pointless to load all the users entities when i just need their ids for some quick checks. I wonder if it's possible to create a custom proxy method to define this custom querying logic or if some other solution exists.

Thanks in advice.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T08:00:18.080

不要碰 Doctrine 代理类，它们是在内部生成和使用的。相反，着眼于为您需要的数据编写一些自定义 DQL 并将其放入存储库类中。

设置存储库类的一个很好的例子是：

[http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/working-with-objects.html#custom-repositories](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/working-with-objects.html#custom-repositories)

# java - 将android代码打包成jar文件

> ID：10632971
> 
> 赞同：6
> 
> 时间：2012-05-17T09:25:38.437
> 
> 标签：java, android

我正在尝试将 android 代码打包到一个 jar 文件中，以便我可以在另一个项目中使用它。但是当我这样做时，我会收到以下错误消息。如果有人这样做，我不确定如何正确执行此操作，请发布链接，一些细节将非常有帮助。

谢谢

```
Error generating final archive: Found duplicate file for APK: AndroidManifest.xml
Origin 1: C:\Users\Admin\workspace\Test\bin\resources.ap_
Origin 2: C:\Users\Admin\workspace\Test\lib\JarLib.jar 
```

我必须在很多项目中使用它，所以我想将它编译为 jar，就像其他在线可用的库（如 twitter4j、googleAnalytic、androidsupportlibrary）一样，我需要知道哪个文件夹必须包含在 Jar 文件中。我尝试通过排除资源文件夹并使用 eclipse->export 来构建它，虽然它构建了 jar，但是在将它包含在另一个测试项目中时会显示上述错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:42:24.553

更好地构建为图书馆项目。右键单击项目（具有通用代码）->选择**属性**->选择**Android选项卡**->检查**isLibrary**选项- >**确定**，如下所示：![在此处输入图像描述](../Images/399c99c019423d5d7e65f66fe63afe48.png)。您可以通过单击上图中的**添加**按钮将此作为引用项目添加到另一个项目。然后创建具有 jar 文件的 Library Projects 目录，如下所示：

![在此处输入图像描述](../Images/9899990effc5686311bb775567f18c5b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:44:28.483

当您的内容不包含纯 java 文件时会发生该错误！

如果您的“自己的类”是纯 Java，请创建一个 JAR 文件，并将该 JAR 文件添加到您想要的任何 Android 项目中（将其放在项目的 libs/ 中，如果您正在使用，也将其添加到您的构建路径中蚀）。但是，如果您需要 Android 资源等，您可以为[Eclipse](http://developer.android.com/guide/developing/projects/projects-eclipse.html)或[在 Eclipse 之外](http://developer.android.com/guide/developing/projects/projects-cmdline.html)创建一个 Android 库项目。

或者项目属性->选择Android选项卡->检查isLibrary选项->确定

# jquery - JQuery/Spring: Posting json object to spring controller not working

> ID：10632972
> 
> 赞同：1
> 
> 时间：2012-05-17T09:25:41.673
> 
> 标签：jquery, ajax, spring, web

This is my spring controller

```
@RequestMapping(value = "/app/{appId}/save.html",method=RequestMethod.POST)
public @ResponseBody String myFunction 
     (@PathVariable("appId") String id, @RequestBody Map<String, String> data1) {
                return "hello";
   } 
```

This is my ajax request

```
$.ajax({
                    type : 'POST',
                    url : '/app/${param.appID}/save.html',
                    data : JSON.stringify(myJsonData), 
                    dataType : "json",

                    success : function(data, textStatus,
                            xhr) {
                        var response = xhr.responseText;
                        if (response !== "hello") {
                            alert('sad');
                        } else {
                            alert('happy');
                        }
                    }
                }); 
```

The problem is , this request never reaches the controller and gets stuck . If I remove data and data1, things work fine. Can some help me with what am I doing wrong.

**Update**: Here's the error as shown by firebug

**415 Unsupported Media Type : The server refused this request because the request entity is in a format not supported by the requested resource for the requested method ()**

Here is my json object

```
myJsonData= {
                        "data1" : $("input[name=key1]:checked").val(),
                        "data2" : $("input[name=key2]:checked").val(),
                        "data3" : $("input[name=key3]:checked").val()
                }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:27:59.697

`JSON.stringify`没有必要。

```
data : myJsonData, 
```

足够的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T04:41:58.010

尝试明确`consumes="application/json"`设置`@RequestMapping`

# console - Sublime Text 2 : focus on the python console

> ID：10632973
> 
> 赞同：1
> 
> 时间：2012-05-17T09:25:45.433
> 
> 标签：console, keyboard-shortcuts, sublimetext2

Is there any shortcut to switch the focus between the current file and the python console ? I'd like to jump back and forth without showing/hiding the console (with Ctrl+`) everytime

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T13:34:27.607

您可以使用`Ctrl+1`专注于文件。（关注第 0 组）。

并使用 Ctrl+` 切换到控制台。如果你做得对 - 控制台不会隐藏。

# c# - 单元测试中的静态类/方法/属性，停止与否

> ID：10632975
> 
> 赞同：21
> 
> 时间：2012-05-17T09:25:53.940
> 
> 标签：c#, java, unit-testing, tdd

是否应该在单元测试开发环境中使用静态类/方法/属性，因为如果不引入再次不可测试的包装器就无法对其进行测试？

另一种情况是，当在单元测试目标中使用静态成员时，无法模拟静态成员。因此，您必须在测试单元测试目标时测试静态成员。您希望在静态成员执行计算时将其隔离。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-05-17T09:35:07.197

测试静态方法与测试任何其他方法没有什么不同。将静态方法作为另一个测试模块中的*依赖*项会引发问题（正如已经提到的 - 您不能使用免费工具模拟/存根它）。但是，如果静态方法本身经过单元测试，您可以简单地[将其视为有效的、可靠的组件](https://stackoverflow.com/a/9018501/343266)。

总体而言，在以下情况下，使用静态方法没有任何问题（例如，它不会破坏单元测试/TDD）：

*   它很简单，输入输出方法（各种*“计算这个给定”*）
*   它是*可靠*的，我们的意思是它要么是由您进行单元测试，要么来自您认为可靠的第 3 方来源（例如，`Math.Floor`可能被认为是可靠的 - 使用它不应该引发*“小心，它是静态的！”*警告；人们可能会假设微软完成了它的工作）

什么时候静态方法会导致问题并且应该避免？**基本上只有当他们与你无法控制**（或模拟）的事情交互/做一些事情时：

*   各种文件系统、数据库、网络依赖
*   从内部调用的其他（可能更复杂的）静态方法
*   几乎所有你的模拟框架不能正常处理的事情

**编辑：** *关于静态方法**何时**会使单元测试变得困难的两个示例*

**1**

```
public int ExtractSumFromReport(string reportPath)
{
     var reportFile = File.ReadAllText(reportPath);
     // ...
} 
```

你怎么处理`File.ReadAllText`？这显然会去文件系统检索文件内容，这是单元测试时的主要禁忌。这是具有外部依赖关系的静态方法的示例。为避免这种情况，您通常会围绕文件系统 api 创建包装器，或者只是将其作为依赖项/委托注入。

**2**

```
public void SaveUser(User user)
{
    var session = SessionFactory.CreateSession();
    // ...
} 
```

那这个呢？会话*是非平凡的*依赖。当然，它可能会出现`ISession`，但是如何强制`SessionFactory`返回模拟？我们不能。而且我们也不能创建*容易确定的*会话对象。

在上述情况下，最好完全避免使用静态方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-17T09:28:59.837

静态方法**可以**进行单元测试。它们不能被嘲笑（通常；有一些框架可以做到这一点，比如[Moles](http://research.microsoft.com/en-us/projects/moles/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T09:28:32.210

您不能模拟静态方法/属性。因此，当您`classA`使用某些静态成员时，`classB`您无法单独进行测试`classA`。

更新：我没有看到将一些静态类包装到对象中的任何问题。它不需要很多时间，但它可以让您减少系统中的耦合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-21T20:08:40.897

从技术上讲，您**可以使用**[PowerMock](http://code.google.com/p/powermock/)模拟 Java 中的静态方法，但如果您需要这样做，我强烈建议您重构您的代码。我认为静态方法应该总是`private`并且只在它们定义的类中使用，用于内部目的。我认为公开暴露的静态方法是[一种代码异味](http://en.wikipedia.org/wiki/Code_smell)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-18T21:48:13.970

无论编程语言如何，我都发现了这种威胁，但由于我的日常生活与 PHP 有关，这里是处理 PHP 上的静态方法的好资源[http://docs.mockery.io/en/latest/reference/public_static_properties.html](http://docs.mockery.io/en/latest/reference/public_static_properties.html)

# ruby - How to call super methods defined in a serial of modules in ruby

> ID：10632976
> 
> 赞同：0
> 
> 时间：2012-05-17T09:25:57.670
> 
> 标签：ruby, methods, module, super

Is it possible to make c1.say to show "lalala" without changing M1, M2, C1? I.e., use extra modules to override M2's method? Thanks,

```
module M1
  def word
    "lalala"
  end
end

module M2
  def word
    super + 'wawawa'
  end
end

class C1
  include M1
  include M2
  def say
    puts word
  end
end

c1 = C1.new
c1.say # lalalawawawa 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T09:32:11.060

您始终可以在不更改其原始代码的情况下对任何类进行修补。

```
module M1
  def word
    "lalala"
  end
end

module M2
  def word
    super + 'wawawa'
  end
end

class C1
  include M1
  include M2
  def say
    puts word
  end
end

# patch M2
M2.class_eval do
  def word
    super
  end
end

# or patch C1
# C1.class_eval do
#   def word
#     'lalala'
#   end
# end

c1 = C1.new
c1.say
# >> lalala 
```

# ruby-on-rails-3 - How do I create a list when using a has_and_belongs_to_many join table?

> ID：10632977
> 
> 赞同：0
> 
> 时间：2012-05-17T09:25:57.900
> 
> 标签：ruby-on-rails-3

I'm pretty new in rails so please be patient with my ignorance. I have two models: user and event. I've generated the migration that creates the join table events_users and I've declared has_and_belongs_to_many on both models. What I want to do generally is to create a list of users per event. I have a join method in my events controller that does the following:

```
def join
if current_user
    @events_users = Events_users.new
    @events_users.user = current_user
    @events_users.event = @event
    @events_users.save
    redirect_to events_url
else
    redirect_to new_user_session_url
end
end 
```

In my routes.rb, I have this:

```
 match 'events/:id' => 'events#join', :as => :join 
```

Basically, the method doesn't seem to work and my events_users table doesn't update. I need to know what I have to do when a user clicks 'Join' such that his/her id and the event id is added in the events_users table.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:41:52.343

您可以将其简化为：

```
def join
  if current_user
    @event.users << current_user
    @event.save

    redirect_to events_url
  else
    redirect_to new_user_session_url
  end
end 
```

此外，添加`@event.users`可以处理任何数组操作。

# iphone - 支持各种图像格式并在sqlite中增强它们

> ID：10632981
> 
> 赞同：0
> 
> 时间：2012-05-17T09:26:04.407
> 
> 标签：iphone, cocoa-touch, sqlite

我正在尝试一个简单的 iPhone 应用程序，其中人们可以从他们的 iPhone PhotoLibrary 中的现有照片中选择一张图片。我将选择的图像存储到 SQLite DB 中，如下所示：

```
 NSData *imageData = UIImagePNGRepresentation(image);        
        sqlite3_bind_blob(statement, 1, 
                          [imageData bytes], [imageData length], NULL); 
```

以上仅适用于PNG。而在 UIKit API 中，JPG 只有类似的转换（从 UIImage 到 NSData）。我该如何处理其他格式的图像（如 bmp、tiff、gif 等）？

在 UIImage 类中，它说它支持多种格式，但仅提供 png 和 jpg 的转换方法（ UIImagePNGRepresentation 和 UIImageJPEGRepresentation ）。

![在此处输入图像描述](../Images/ac0d5964f735c06c24370405a2c90a09.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T17:20:36.567

要以 PNG 和 JPEG 以外的格式生成图像，请使用 CGImageDestination。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T17:18:44.217

这里有两件事分开进行，读取各种图像格式并保存图像。`UIImage`可以读取列出的任何格式。所以打开 .bmp 或 .tiff 就可以了。

再次保存该数据时，您有两个内置选项`UIImagePNGRepresentation`和`UIImageJPEGRepresentation`，每个选项都采用 a`UIImage`并将其转换为图像的 PNG 或 JPEG 表示形式。您从这两个函数中的`NSData`任何一个获得的 都可以写入数据库（或者更常见的是我们在其他问题上讨论的文件），然后再读回。如果您想将文件另存为 BMP、TIFF 或其他格式，您需要找到执行此操作的库。

所以不管你从什么开始，你仍然可以在你的应用程序中将它保存为 PNG（无损）或 JPEG（有损）文件。当然，如果您打开 BMP 并将其另存为 PNG，质量会略有下降，因为您正在创建新一代图像，但几乎在所有情况下都不会引起注意。

希望有帮助。

# javascript - 选择元素文本并添加逗号

> ID：10632982
> 
> 赞同：0
> 
> 时间：2012-05-17T09:26:06.037
> 
> 标签：javascript, jquery

我正在尝试使用 DOM 在我的页面中获取一些元素：`$('ul li').text()`

在那之后（或者可能在此期间）我想添加一个逗号。在某些情况下，我得到的文本有空格和其他字符。

结果，我很想得到一个像这样的数组`["first text", "second element", "third"]`

使用 javascript 函数或 jQuery 更简单的方法是什么？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:30:18.193

如果我正确理解了您的问题，您希望将`li`选择器中每个文本的文本放入一个数组中。如果是这样，试试这个：

```
var liText = $('ul li').map(function() {
    return $(this).text();
}).get();
console.log($.unique(liText)); 
```

[**示例小提琴**](http://jsfiddle.net/HK4AT/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T09:33:25.320

使用 jQuery [$.map()](http://api.jquery.com/jQuery.map/)方法。它的目标是返回一个映射值数组。在回调中获取元素的文本内容，您最终会得到一个元素文本内容的数组。

使用 Array.join() 方法返回数组元素的逗号分隔字符串（在您的情况下为元素的文本）。

```
var els = $('li');

var arr = $.map(els, function(item) {
    return $(item).text();
});

var texts = arr.join(',');​ 
```

**[演示](http://jsfiddle.net/didierg/8NY27/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-17T09:33:39.313

如果您希望根据空格的存在来获得单词数组，您可以使用`join`javascript 方法。我不熟悉另一个最喜欢的 jQuery map 方法。

```
var res_arr = new Array();
$("ul li").each(function(e) {
  res_arr[e] = $(this).text();
});
var output = res_arr.join(","); 
```

所以输出将包含用逗号分隔的元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T09:45:19.063

```
var result = new Array();
$('ul li').each(function(){
    result.push($(this).text());
})
return result;//get a array,if you want a string you can use result.join(',') or     //result.join(' ') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-17T09:57:59.720

你可以为此制作一个小插件

```
$.fn.csv = function(){
    var csv = '';

    this.each(function(){
        csv += $(this).text() + ',';
    });

    return csv;
}; 
```

并按如下方式使用它..

```
alert($('selector').csv()); 
```

[这里](http://jsfiddle.net/8NY27/5/)的例子。

# algorithm - 最短路径图太大

> ID：10632984
> 
> 赞同：1
> 
> 时间：2012-05-17T09:26:15.933
> 
> 标签：algorithm, memory, shortest-path, dijkstra

有 2 个人面向某个方向（上、左、下或右）。它们可以顺时针、逆时针转动并向前移动一个点。两个人都在一个有障碍的板上。它们都有一定的位置，用坐标表示`(x,y)`，还有一定的能量。移动和转动需要一定的能量：`ENERGY_MOVE`和`ENERGY_TURN`。

目标是使这两个人尽可能靠近彼此，以曼哈顿距离表示。曼哈顿距离不考虑障碍物（因此实际上只是让人类尽可能靠近彼此，同时使用尽可能少的能量）。解决方案应该是最优的。

我发现 Dijkstra 可以解决这个问题，但有一个问题。Java 数组有一个整数索引，所以我不能存储所有的顶点。我该如何解决这个问题？

# php - 更新外键引用

> ID：10632991
> 
> 赞同：0
> 
> 时间：2012-05-17T09:27:16.937
> 
> 标签：php, mysql, foreign-keys

我有 2 个表，其中一个表中的一列将引用另一表中的一列。我想知道如何在`table B (referenced)`更改列数据时更改`table A(referencing)`列数据

那是

```
A [a1, a2]
a1 = {1,2}

B [b1, b2] 
```

`b1`被 引用`a1`，`b1 = {1,2}`因此如果我使用 phpmyadmin 更改 a1 值`{2,5}`然后单击保存，之后我希望 b1 的值也会自动更改。

**更新：**

现在它可以工作了，但我在第二个表中没有看到任何引用数据？我的意思是的值`b1`是空的，我想应该是一样的`a1`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:29:19.537

为此，请使用[`ON UPDATE CASCADE`](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)（存储引擎需要 InnoDB，但这是一个很好的默认值）创建外键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T09:29:42.163

您可以使用`ON UPDATE CASCADE`子句

[看一看](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

# jenkins - Jenkins 无法启动：无法监听 8080 端口

> ID：10632992
> 
> 赞同：21
> 
> 时间：2012-05-17T09:27:20.587
> 
> 标签：jenkins

我正在使用 Jenkins，从昨天开始它就停止了工作。我查看了 Windows 服务，它已被停止（不知何故）。我重新启动它，但它立即停止。

我查看了从 (C:\Program Files\Jenkins) 运行服务的目录，并在其中打开了名为 jenkins.out.log 的日志文件。这就是它所说的

```
Running from: C:\Program Files\Jenkins\jenkins.war
webroot: EnvVars.masterEnvVars.get("JENKINS_HOME")
[Winstone 2012/05/17 10:14:42] - Beginning extraction from war file
Jenkins home directory: C:\Program Files\Jenkins found at: EnvVars.masterEnvVars.get("JENKINS_HOME")
[Winstone 2012/05/17 10:14:44] - Winstone shutdown successfully
[Winstone 2012/05/17 10:14:44] - Container startup failed
java.io.IOException: Failed to start a listener: winstone.HttpListener
    at winstone.Launcher.spawnListener(Launcher.java:250)
    at winstone.Launcher.<init>(Launcher.java:202)
    at winstone.Launcher.main(Launcher.java:398)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at Main._main(Main.java:268)
    at Main.main(Main.java:96)
Caused by: java.io.IOException: Failed to listen on port 8080
    at winstone.HttpListener.getServerSocket(HttpListener.java:117)
    at winstone.HttpListener.start(HttpListener.java:70)
    at winstone.Launcher.spawnListener(Launcher.java:241)
    ... 8 more
Caused by: java.net.BindException: Address already in use: JVM_Bind
    at java.net.PlainSocketImpl.socketBind(Native Method)
    at java.net.PlainSocketImpl.bind(Unknown Source)
    at java.net.ServerSocket.bind(Unknown Source)
    at java.net.ServerSocket.<init>(Unknown Source)
    at java.net.ServerSocket.<init>(Unknown Source)
    at winstone.HttpListener.getServerSocket(HttpListener.java:112)
    ... 10 more 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-17T09:44:18.530

已修复 - 适用于将来可能遇到此问题的任何其他人。我使用了这篇[Techrepublic 文章](http://www.techrepublic.com/blog/datacenter/see-what-process-is-using-a-tcp-port-in-windows-server-2008/453)，归结为

```
netstat -a -n -o | grep "8080" 
```

找出如何找出哪个进程正在使用端口 8080，然后在任务管理器中将其杀死，然后重新启动 Jenkins，一切都很好（到目前为止！）。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-06-04T12:52:35.937

要在 WinStone 容器（与 Jenkins war 捆绑的默认容器）上启动 Jenkins，请使用以下命令：

`java -jar jenkins.war --ajp13Port=-1 --httpPort=9090`

此外，要检查 Windows 中的任何应用程序是否正在使用某个端口：

`netstat -ano | find "9090"`

最好在 Tomcat 上运行 Jenkins。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-20T01:53:23.200

正如在错误堆栈跟踪中提到的那样，端口 8080 已在使用中，检查端口 8080 的使用位置，或者将 Jenkins.xml 中的 Jenkins 端口更改为其他可用端口。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-08-01T21:15:11.663

把它放在这里以防它对某人有帮助——我遇到了同样的初始问题——端口 8080 被阻塞。

如果您相信这个 --windows 商店在端口 8080 上运行并阻塞了我的 Jenkins 端口。咕噜！

补救措施：

1) 使用上面的@HenryHey 的答案来查找PID：netstat -a -n -o | grep "8080"

2) 使用 sysinternals proc explorer 查找注册到 PID 的程序

3）使用以下命令（找到@Joy-Qiao 的文章-谢谢）删除 windows 商店应用程序（使用 powershell）：Get-AppxPackage *windowsstore* | 删除-AppxPackage

注意：这是清除端口 8080 的一种相当激进的方法——更好的选择是将 Jenkins 移动到另一个端口，但我感觉有点过分。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-26T13:56:20.673

```
java -jar jenkins.war --ajp13Port=-1 --httpPort=9090 
```

这真的很有帮助，当我在安装**Jenkins**期间遇到不同的异常时使用它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2022-01-15T21:09:03.933

对于**Nginx 服务器**和**SSL 证书**，您必须从 nginx[链接](https://www.jenkins.io/doc/book/system-administration/reverse-proxy-configuration-nginx/)检查此文档并将 nginx 服务器配置为侦听端口`8080`

它与我一起使用子域，如`jenkins.your_site_domain.com`端口`8080`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-30T02:16:21.713

我遇到了类似的问题，尝试按照它的要求升级 Jenkins，但是 Windows 服务无法启动，端口 8080 上正在运行其他东西。结果是`java.exe`我在任务管理器中杀死它后的一个进程实例全部启动好好工作。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-01-18T08:35:39.723

`ps -aux | grep -i 'java'` 使用任何使用端口 8080 的 java 程序查找进程 ID ，您将获得以下输出

```
jenkins  1236169  246 25.6 7877352 4159028 ?     Sl   04:49 538:57 /usr/bin/java -Djava.awt.headless=true -jar /usr/share/jenkins/jenkins.war --webroot=/var/cache/jenkins/war --httpPort=8080 
```

然后使用命令杀死进程`sudo kill -9 PID(here it is 1236169 )` 然后重新启动jenkins服务 `sudo service jenkins restart`

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2018-04-11T08:47:10.273

java -jar jenkins.war --ajp13Port=-1 --httpPort=9090

解决了我的问题

# objective-c - 包含相同类型对象的对象的objective-c解析

> ID：10632993
> 
> 赞同：-1
> 
> 时间：2012-05-17T09:27:24.813
> 
> 标签：objective-c, xml-parsing

我想解析一个像这样的xml：

```
<users>
  <user>
    <userName>mspeller</userName>
    <firstName>Mike</firstName>
    <lastName>Speller</lastName>
    <user>
      <userName>mspeller</userName>
      <firstName>Mike</firstName>
      <lastName>Speller</lastName>
    </user>
    <user>
      <userName>mspeller</userName>
      <firstName>Mike</firstName>
      <lastName>Speller</lastName>
    </user>
    ...
  </user>
  <user>
    <userName>mgdan</userName>
    <firstName>Mila</firstName>
    <lastName>Gdan</lastName>
  </user>
  ...
</users> 
```

我们你看，这个xml包含对象//包含其他用户的用户，请帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T09:36:02.713

解析这个应该不难。只需保留一个 BOOL 标志并在两层深度时将其设置为 YES。当你点击'didEndElement'回调时，如果它设置为YES，这意味着你有两层深度并将其取消设置为NO。否则，这意味着您处于第一级。

如果有任意级别的嵌套用户，那么只需有一个 int 来指示用户的第 n 级……每次点击“didStartElement”时，将其递增。在“didEndElement”中，递减它。此外，您可能需要一个堆栈类型的数据结构......

****编辑：*** *这是假设您使用事件驱动的解析器，如 NSXMLParser...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T10:33:07.803

创建一个类：

```
@interface User : NSObject
@property (nonatomic,retain)NSString * firstName;
@property (nonatomic,retain)NSString *lastName;
@property (nonatomic,retain)User *secondaryUser; 
```

每当 startElement 是 userName 时，只需在 User 下初始化辅助用户并设置您想要的属性。它对我来说很好。希望这对你有帮助。

# jquery - 获取 div 宽度 jquery

> ID：10632997
> 
> 赞同：0
> 
> 时间：2012-05-17T09:27:54.887
> 
> 标签：jquery, css, width

当我用光标遍历它时，我需要显示一个 div（被调用）。Over div 具有绝对位置。我用jquery做到了。它工作得很好，但唯一的问题是 over div 没有得到父 div 宽度。我用jquery来做，代码如下：

```
var count = 0;
$('.resultbox').each(function(){
    $('#main').append('<div class="content" id="t'+count+'"></div>');
    $('#t' + count).append('<div class="over"></div>');

    $('#t'+count).append('<span>some text here</span>');

    $('.asd', this).each(
            $('#t' + count).append('<span>and other text here</span>');
        });
    });
    //alert('');
    $('#t' + count + ' > .over').css('width', $('#t' + count).css('width'));
    $('#t' + count + ' > .over').css('height', $('#t' + count).css('height'));
    count++;
});

$('.content').mouseenter(function(){
    $('.over', this).show();
}); 

$('.content').mouseleave(function(){
    $('.over', this).hide();
}); 
```

和CSS是：

```
#main{
width: 100%;
position: absolute;
top: 0px;
height: 100%;
background-color: #FFF;
z-index: 999;
text-align: left;   
}

.content{
width: auto;
display: inline-block;
margin: 20px;
padding: 5px;
border: 1px solid #000;
clear: both;
}

.content span{
display: inline-block;
}

.over{
position: absolute;
background: url(share.png) #FFF no-repeat center center;
opacity: 0.6;
z-index: 999;
display: none;
}

.over:hover{
cursor: pointer;
} 
```

如您所见，我还发出了警报。如果我在 div 上评论它不会得到他的父宽度，而如果我不评论它，在 div 上得到正确的父宽度。为什么！？

谢谢， 马蒂亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T10:22:54.537

当您尝试查找宽度时，我闻到您的 HTML 中的父元素没有被加载。当您发出警报时，父元素会加载。请在确保加载父元素时尝试查找父元素的宽度。

# c++ - 来自 C++ 的线程安全 sql server

> ID：10632999
> 
> 赞同：1
> 
> 时间：2012-05-17T09:27:58.867
> 
> 标签：c++, sql, openmp

我有一个使用 OpenMP 并行化的 c++ 中的 for 循环。在循环中，我正在访问一个 sql server 数据库。有人告诉我，如果我在线程之间共享相同的 ODBC 驱动程序，数据访问将不会是并行的。如果我为每次迭代定义不同的驱动程序，那将非常耗时。（？）有没有办法让不同的线程以安全的并行方式访问相同的数据？

PS：我没有写入数据库，只是从中读取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T09:33:18.900

> 有人告诉我，如果我在线程之间共享相同的 ODBC 驱动程序，数据访问将不会是并行的。

你确定你已经准确地告诉了这件事吗？

多线程存在很多问题，但对于大多数 ODBC 驱动程序，您可以使用每线程连接模型来并行读取。因此，每次启动线程时都连接（并在线程关闭时关闭）。更好的模式将是使用连接池。