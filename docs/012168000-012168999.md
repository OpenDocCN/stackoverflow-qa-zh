# StackOverflow 问答 12168000-12168999

# iphone - 如何删除UITableView中最后一个单元格的最后一个边框？

> ID：12168002
> 
> 赞同：80
> 
> 时间：2012-08-28T21:48:25.603
> 
> 标签：iphone, objective-c, ios, xcode, uitableview

在我的应用程序中，我使用了一个`UITableView` 我的问题是我想删除`UITableView`.

请检查以下图片：

![在此处输入图像描述](../Images/c12dba34cb787981c9df4d84b92cbcdb.png)

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2014-11-12T13:22:40.877

最好的解决方案是添加页脚视图。以下代码完美地隐藏了最后一个单元格的行：

**Objective-C**

```
self.tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.tableView.frame.size.width, 1)]; 
```

**斯威夫特 4.0**

```
tableView.tableFooterView = UIView(frame: CGRect(x: 0, y: 0, width: tableView.frame.size.width, height: 1)) 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-11-04T12:21:49.547

在 iOS 7 中有一个更简单的解决方案。假设单元格是您的最后一个单元格：

```
cell.separatorInset = UIEdgeInsetsMake(0, cell.bounds.size.width, 0, 0); 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-08-28T21:55:56.670

于 2015 年 9 月 14 日更新。我原来的答案已经过时了，但它仍然是所有 iOS 版本的通用解决方案：

您可以隐藏`tableView`的标准分隔线，并在每个单元格的顶部添加您的自定义线。添加自定义分隔符的最简单方法是添加简单`UIView`的 1px 高度：

```
UIView* separatorLineView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, cell.bounds.size.width, 1)];
separatorLineView.backgroundColor = [UIColor grayColor];
[cell.contentView addSubview:separatorLineView]; 
```

迄今为止，我订阅了[另一种](https://stackoverflow.com/a/5377569/1357250)在单元格下方隐藏额外分隔符的方法（适用于 iOS 6.1+）：

```
self.tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero]; 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-06-10T20:37:51.567

这适用于 iOS 7 和 8：

```
cell.separatorInset = UIEdgeInsetsMake(0, 0, 0, CGRectGetWidth(tableView.bounds)); 
```

注意：使用时要小心，`tableView.bounds`因为它有时会根据您调用它的时间报告错误的值。请参阅[在横向模式下报告不正确的边界](https://stackoverflow.com/questions/5194504/reporting-incorrect-bounds-in-landscape-mode)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-08-10T03:11:25.520

将这行代码添加到`viewDidLoad()`.

```
tableView.tableFooterView = UIView(frame: CGRect(x: 0, y: 0, width: 0, height: 0.001)) 
```

这确保最后一个分隔符将被替换并且替换（不可见）页脚视图不会占用任何额外的高度。由于页脚视图的宽度将由 管理`UITableView`，因此您可以将其设置为 0。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-01-21T13:15:03.863

**Swift 4 的基于扩展的解决方案，在 iOS 12 上测试**

我注意到设置一个空视图`height = 1`也会删除最后一个可见单元格的分隔符但是设置`height = 0`只是删除空单元格的分隔符

```
extension UITableView {
    func removeSeparatorsOfEmptyCells() {
        tableFooterView = UIView(frame: .zero)
    }

    func removeSeparatorsOfEmptyCellsAndLastCell() {
        tableFooterView = UIView(frame: CGRect(origin: .zero, size: CGSize(width: 0, height: 1)))
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-04-28T09:23:54.197

我的较短版本：

```
self.tblView.tableFooterView = [UIView new]; 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-09-29T21:44:34.197

在 Swift 中：

```
tableView.tableFooterView = UIView() 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-04-23T00:15:04.623

这是我目前使用的补救措施。这可能不是最好的方法，但它确实有效。

删除 SeparatorColor 和 setSeparatorStyle 以制作自定义分隔符

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    ...

    [self.tableView setSeparatorStyle:UITableViewCellSeparatorStyleNone];
    [self.tableView setSeparatorColor:[UIColor clearColor]];
} 
```

为每个具有表格视图背景的单元格添加自定义分隔符

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell" forIndexPath:indexPath];

    ...

    UIView* separatorLineView = [[UIView alloc] initWithFrame:CGRectMake(0, cell.frame.size.height-1, 320, 1)];
    separatorLineView.backgroundColor = self.tableView.backgroundColor;
    [cell.contentView addSubview:separatorLineView];

    return cell;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-12-16T12:15:38.063

```
_tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectZero]; 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-07-01T20:18:58.450

适用于 iOS 7 及更高版本

```
 -(void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
    {
        BOOL bIsLastRow = NO;

        //Add logic to check last row for your data source
        NSDictionary *dict = [_arrDataSource objectAtIndex:indexPath.section];
        if([_arrDataSource lastObject] == dict)
        {
           bIsLastRow = YES;
        }

        //Set last row separate inset left value large, so it will go outside of view
        if ([cell respondsToSelector:@selector(setSeparatorInset:)]) 
        {
            [cell setSeparatorInset:UIEdgeInsetsMake(0, bIsLastRow ? 1000 :0, 0, 0)];
        }
    } 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-05-18T21:16:13.857

## 下面的代码帮助我从 UITableView 的最后一行删除分隔符。

## 斯威夫特 3.0

```
func tableView(_ tableView: UITableView, willDisplay cell: UITableViewCell, forRowAt indexPath: IndexPath) {
    if indexPath.row == tableView.numberOfRows(inSection: indexPath.section) {
        cell.separatorInset.right = cell.bounds.size.width
    }
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-08-24T13:17:43.177

**斯威夫特 4.2**

要在最后一个单元格中获得从左到右的分隔符，请在您的`UITableViewDataSource's` `tableView(_:cellForRowAt:)`实现中添加：

```
if tableView.numberOfRows(inSection: indexPath.section) - 1 == indexPath.row {
        cell.separatorInset = .zero
} 
```

如果您不想要一个特定单元格的分隔符，请考虑绘制您自己的分隔符并设置`tableView.separatorStyle = .none`.

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-01-22T02:39:29.707

**Xcode 12，斯威夫特 5**

要在最后一个单元格后删除分隔符，请选择分组 UITableView 样式 [您可以在 Interface Builder 中执行此操作](https://i.stack.imgur.com/ugiGy.png)或在 viewDidLoad 中设置它

```
tableView.style = UITableView.Style.grouped 
```

删除第一个单元格之前的空白，在 viewDidLoad 中编写以下代码：

```
tableView.tableHeaderView = UIView(frame: CGRect(x: 0, y: 0, width: tableView.bounds.width, height: 0.1)) 
```

要删除单元格之前的空白空间，并且您将在导航栏下滚动它或在避免空白空间方面遇到其他困难，请尝试将您的表格约束到控制器的超级视图 [这里双击顶部约束](https://i.stack.imgur.com/OcyR0.png)，然后选择“SuperView.Top '[在约束设置](https://i.stack.imgur.com/A9Vgj.png)

如果您想要全宽分隔符或您自己的宽度，只需选择 Separator Inset 作为自定义，并配置为您的值，或将其写入 viewDidLoad：

```
tableView.separatorInset = UIEdgeInsets(top: 0, left: 0, bottom: 0, right: 0) 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-06-16T08:14:26.253

找到委托中的最后一个单元格索引，`cellForRow`并将代码行放在下面：

```
cell.separatorInset = UIEdgeInsetsMake(
    0.f,
    40.0f,
    0.f,
    self.view.frame.size.width-40.0f
); 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-08-24T11:10:46.313

另一种选择是通过子类化`UITableView`：

```
@synthesize hideLastSeparator = _hideLastSeparator;
@synthesize hideLastSeparatorView = _hideLastSeparatorView;
-(void)setHideLastSeparator:(BOOL)hideLastSeparator {
    if (_hideLastSeparator == hideLastSeparator) {
        return;
    }
    _hideLastSeparator = hideLastSeparator;
    if (_hideLastSeparator) {
        _hideLastSeparatorView = [[UIView alloc] initWithFrame:CGRectMake(0, self.contentSize.height, self.bounds.size.width, 0.5f)];
        _hideLastSeparatorView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleBottomMargin;
        _hideLastSeparatorView.backgroundColor = self.backgroundColor;
        [self addSubview:_hideLastSeparatorView];
        [self hideSeparator];
    }
    else {
        [_hideLastSeparatorView removeFromSuperview];
        _hideLastSeparatorView = nil;
    }
}
-(void)setContentSize:(CGSize)contentSize {
    [super setContentSize:contentSize];
    if (_hideLastSeparator) {
        [self hideSeparator];
    }
}
-(void)hideSeparator {
    CGRect frame = _hideLastSeparatorView.frame;
    frame.origin.y = self.contentSize.height - frame.size.height;
    _hideLastSeparatorView.frame = frame;
} 
```

.h 应该只包含`hideLastSeparator`和的属性声明`hideLastSeparatorView`。
当想要隐藏分隔符时，使用新类并设置`myTableView.hideLastSeparator = YES`。
它的工作方式是通过在最后一个分隔符上添加一个新视图来阻止它。

在我看来，这更容易使用（比使用自定义分隔符，或设置最后一个单元格的最后一个 separatorInset），并且避免了设置 a 的方法`tableFooterView`有时会导致的一些奇怪的动画（例如在行插入/删除或其他表期间动画）。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2020-09-02T23:11:58.503

如果您使用自定义分隔符作为您`UITableViewCell`的最佳解决方案是：

1.  在您的自定义单元格函数中实现，隐藏`separatorView`

```
class YourCell: UITableViewCell {
    // Your implementation goes here...
    // Separator view in cell
    @IBOutlet private weak var separatorView: UIView!

    // This function hides the separator view
    func hideSeparator() {
        separatorView.isHidden = true
    }
} 
```

2.  在`tableView(_ tableView: UITableView, willDisplay cell: UITableViewCell, forRowAt indexPath: IndexPath)`计算单元格是否是最后一个并隐藏它的分隔符

```
public func tableView(_ tableView: UITableView, willDisplay cell: UITableViewCell, forRowAt indexPath: IndexPath) {
    guard let cell = cell as? YourCell else {
            return
    }
    // Here we're checking if your cell is the last one
    if indexPath.row == tableView.numberOfRows(inSection: indexPath.section) - 1 {
        // if true -> then hide it
        cell.hideSeparator()
    }
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-08-04T14:42:54.627

这对我很有用：

```
func tableView(_ tableView: UITableView, willDisplay cell: UITableViewCell, forRowAt indexPath: IndexPath) {
    guard let cell = cell as? yourCell else {
            return
    }
    // Here we're checking if your cell is the last one
    if indexPath.row == numberOfCells.count - 1 {
        cell.separatorInset.left = UIScreen.main.bounds.width
    }
} 
```

我们在这里所做的是将左侧插图的大小设置为足够大的值，以便分隔线不再可见。因此，当我们增加插图的大小值时，它会越来越靠近屏幕右侧，因为左侧插图朝向正确的方向。

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2021-06-04T14:27:53.180

最合适和最简单的方法是在`cellForRowAt`

```
cell.drawBottonLine = (indexPath.row != sections[0].rows.count - 1) 
```

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2014-12-04T15:29:38.840

扩展 Tonny Xu 的回答，我有多个部分，这似乎适用于删除最后一个单元格分隔符

```
if(indexPath.row == [self.tableView numberOfRowsInSection:indexPath.section] - 1)
{
    self.tableView.tableFooterView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.tableView.frame.size.width, 1)];
} 
```

在`cellForRowAtIndexPath`数据源中

# javascript - div隐藏不起作用

> ID：12168004
> 
> 赞同：0
> 
> 时间：2012-08-28T21:48:44.460
> 
> 标签：javascript

我试图隐藏一个 div，但我似乎无法让它正常工作。这是我的代码：

```
<head>
<title>Home - Chrome</title>
<link rel="stylesheet" href="main.css">
<script src="jquery.js"></script>
<script>
function 1Hide() {
document.getElementById('div1').style.display = 'none';
}
</script>
</head>
<body>
<div id="div1">
</div>
<a onclick="1Hide" href="javascript:void(0);">Click</a>
</body> 
```

CSS：

```
#div1 {
height: 100;
width: 700;
margin: 30 auto 0 auto;
background: #FFFFFF;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:50:08.317

标识符不能以数字开头。改为`1Hide`类似的东西`Hide1`。此外，要调用函数，请在标识符的末尾添加括号，如下所示：

`Hide1();`.

这将调用该函数。您的 HTML 应如下所示：

```
<a onclick="Hide1();" href="javascript:void(0);">Click</a> 
```

`()`请注意附加到函数名称末尾的运算符。每当您想*调用*函数时，这就是您使用的语法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T21:50:27.983

三个问题：

*   变量/函数名称不能以数字开头
*   你不调用`()`函数
*   数字 CSS 值应具有后缀，例如`px`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T21:50:35.010

首先，使用括号（在点击时调用函数）。然后，以字母开头的函数名称：

```
<script>
    function div1Hide() {
        document.getElementById('div1').style.display = 'none';
    }
</script>
<a onclick="div1Hide()" href="javascript:void(0);">Click</a> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T21:58:38.037

尝试像这样使用[jQuery 的隐藏功能](http://api.jquery.com/hide/)：

```
$('#myHideButton').click(function() {
   $('#div1').hide();
}); 
```

# css - 参考粗体版本而不使用字体粗细：粗体？

> ID：12168007
> 
> 赞同：2
> 
> 时间：2012-08-28T21:48:57.053
> 
> 标签：css, webfonts

我在网站上使用 webfonts。对于某些标题（`h1`,`h2`等），我使用粗体变体（并设置`font-weight`为正常），因为它们看起来比使用常规变体并使用默认粗体粗体保留 h 标签要好得多。有必要指定`font-weight: normal`，否则“粗体为粗体”，看起来非常糟糕。

我遇到的问题是，如何将标准网络字体指定为后备字体并“恢复”粗体设置？

因此，例如，我可能会执行以下操作：

```
@font-face {
    font-family: "My bold webfont";
    src: url("url/of/webfont/bold/variant");
}

h1 {
    font-family: "My bold webfont", Arial, sans-serif;
    font-weight: normal; 
} 
```

只要 webfont 存在，我们就没有问题，但如果 webfont 失败，我们最终会得到非粗体 Arial。

有没有办法在其中指定“Arial Bold” `font-family`（`h1`我知道这不起作用，但这是预期的目标）？或者也许在`@font-face`定义中我可以说“这仅适用于分配给它的任何内容的粗体版本”——所以我可以`font-weight: normal`从`h1`样式中省略 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T21:52:07.920

尝试`font-weight: bold`在两个地方指定：

```
@font-face {
    font-family: "My bold webfont";
    src: url("url/of/webfont/bold/variant");
    **font-weight: bold;**
}

h1 {
    font-family: "My bold webfont", Arial, sans-serif;
    font-weight: **bold**;
}
```

[这是一个演示。](http://dabblet.com/gist/3504746) `p#one`展示了这种技术的使用；如果您在不支持 WOFF webfonts 的浏览器中查看它，您会看到默认字体为粗体。

# php - MySQL 函数在 PHP 中返回难以使用的结果

> ID：12168009
> 
> 赞同：0
> 
> 时间：2012-08-28T21:49:03.997
> 
> 标签：php, mysql, function, return

我有一个如下所示的 MySQL 函数：

```
delimiter #
create function activate_user
(
    p_activation_hash char(32)
)
returns int
deterministic
begin
    declare v_ret int unsigned default 0;

    if (char_length(p_activation_hash) != 32) then
        return 0;
    end if;

    insert ignore into users (email, password_hash, first_name, last_name, company_name)
        select email, password_hash, first_name, last_name, company_name
        from user_activation
        where activation_hash = p_activation_hash
        and expiry_date > now();

    return last_insert_id();
end #
delimiter ; 
```

如果我使用 CodeIgniter 像这样称呼它：

```
$query = $this->db->query("select activate_user(?);", array($this->input->get('key')));

var_dump($query->result_object());

var_dump($query->result_array()); 
```

我可以获得如下所示的结果数组或对象：

```
array
  0 => 
    object(stdClass)[16]
      public 'activate_user('5c9835e8dee7e1b43691708f503cb7f5')' => string '0' (length=1)

array
  0 => 
    array
      'activate_user('5c9835e8dee7e1b43691708f503cb7f5')' => string '0' (length=1) 
```

显然，由于关键，它不是很有用，我真的不想做一个 foreach 似乎应该有更好的方法？

我认为mysql函数的一大优点是返回整数之类的东西，但是在php中读取这些整数似乎很乱，我错过了什么吗？

* * *

供您参考，这是我得到的最简洁的信息：

```
$query = $this->db->query("select activate_user(?) as user_result;", array($this->input->get('key')));
$result = current($query->result_array());

echo "function result: " . $result['user_result']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T21:58:00.330

结果显示该函数返回零。如果你给你的函数调用起别名，你可能有更明智的时间阅读结果：

```
$query = $this->db->query("select activate_user(?) AS user_result;", array($this->input->get('key'))); 
```

现在函数调用被别名为 user_result 的列名，无需密钥即可更容易阅读。然后您可以将结果读取为：

```
$result = $query->result_array();
echo "function result = " . $result['user_result']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T21:59:51.440

问题不在于 MySQL 函数，而`query()`在于 PHP 中的函数。

尝试指定一个来源：

```
 $query = $this->db->query("select activate_user(?);", $this->input->get('key')); 
```

看看这是否有帮助。您可以使用`AS`来简化返回值：

```
 SELECT activate_user(?) as status; 
```

否则你可以试试

```
 $value = (int)(array_values($query[0])[0]) 
```

访问数组的第一个键的第一个子元素的第一个元素，或类似的东西。您可能必须将其写为

```
 $values = array_values($query[0]);
 $value  = (int)$values[0] 
```

# java - Java编译器拒绝带有参数化内部类的变量声明

> ID：12168015
> 
> 赞同：4
> 
> 时间：2012-08-28T21:49:52.843
> 
> 标签：java, generics, groovy, inner-classes

我有一些 Groovy 代码在 Groovy 字节码编译器中运行良好，但是由它生成的 Java 存根会导致 Java 编译器出错。我认为这可能是 Groovy 存根生成器中的另一个错误，但我真的不明白为什么 Java 编译器不喜欢生成的代码。

这是生成的 Java 类的截断版本（请原谅丑陋的格式）：

```
@groovy.util.logging.Log4j() public abstract class AbstractProcessingQueue
<T>  extends nz.ac.auckland.digitizer.AbstractAgent  implements
    groovy.lang.GroovyObject {
        protected int retryFrequency;
        protected java.util.Queue<nz.ac.auckland.digitizer.AbstractProcessingQueue.ProcessingQueueMember<T>> items;
        public AbstractProcessingQueue
        (int processFrequency, int timeout, int retryFrequency) {
             super ((int)0, (int)0);
    }

    private enum ProcessState
      implements
    groovy.lang.GroovyObject {
        NEW, FAILED, FINISHED;
    }

    private class ProcessingQueueMember<E>  extends java.lang.Object  implements
    groovy.lang.GroovyObject {
        public ProcessingQueueMember
        (E object) {}
    }
} 
```

生成的代码中的违规行是这样的：

```
protected java.util.Queue<nz.ac.auckland.digitizer.AbstractProcessingQueue.ProcessingQueueMember<T>> items; 
```

这会产生以下编译错误：

```
[ERROR] C:\Documents and Settings\Administrator\digitizer\target\generated-sources\groovy-stubs\main\nz\ac\auckland\digitizer\AbstractProcessingQueue.java:[14,96] error: improperly formed type, type arguments given on a raw type 
```

编译错误中的96列索引指向类型的`<T>`参数化`ProcessingQueueMember`。但`ProcessingQueueMember`不是编译器声称的原始类型，它是泛型类型：

```
private class ProcessingQueueMember
<E>  extends java.lang.Object  implements
groovy.lang.GroovyObject { ... 
```

我很困惑为什么编译器认为该类型`Queue<ProcessingQueueMember<T>>`无效。Groovy 源代码编译得很好，生成的 Java 代码对我来说也完全正确。我在这里想念什么？这与所讨论的类型是嵌套类这一事实有关吗？

（如果有人感兴趣，我已经提交了与这个问题相关的[错误报告）](http://jira.codehaus.org/browse/GROOVY-5675)

编辑：原来这确实是一个存根编译器错误——这个问题现在在 1.8.9、2.0.4 和 2.1 中得到修复，所以如果你仍然有这个问题，只需升级到其中一个版本。:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T22:29:09.250

由于`ProcessingQueueMember`该类是 的非静态内部类`AbstractProcessingQueue`，因此其主体可以引用 的`T`类型参数`AbstractProcessingQueue`。因此，对 的非原始引用`ProcessingQueueMember`必须提供两个类型参数。例如，

```
protected java.util.Queue<AbstractProcessingQueue<T>.ProcessingQueueMember<T>> items; 
```

将编译。这段代码可能过于通用。我相信您实际上想要以下两种选择之一：

1.  使`ProcessingQueueMember<E>`静态（即嵌套类而不是内部类）
2.  删除类型参数`ProcessingQueueMember`

我对 groovy 存根生成器一无所知，但也许有一些方法可以注释你的 groovy 代码来表达这一点？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:07:44.927

也许包含变量声明（`protected java.util.Queue<nz.ac.auckland.digitizer.AbstractProcessingQueue.ProcessingQueueMember<T>> items;`）的类的泛型类型参数丢失了？

# php - PHP 或 Node.js 用于锦标赛风格的扑克应用程序？

> ID：12168026
> 
> 赞同：1
> 
> 时间：2012-08-28T21:50:50.300
> 
> 标签：php, node.js, server-side, backend

我正计划构建一个锦标赛风格的扑克应用程序（即只有锦标赛游戏）。我的主要经验是在 LAMP 堆栈上，但我对 Node.js 的了解越多，似乎对于这类项目来说这将是一种更好的语言。哪个会更好 php 或 node.js 或者不会有非常显着的差异？感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:55:25.283

如果你想与 Ajax/Comet 进行大量花哨的实时交互，并希望支持大量并发连接，我认为 Node.js 值得学习。肯定没有坏处！就个人而言，尽管我是一名 PHP 程序员，但我讨厌将它用于大型或复杂的项目，而且它并不是完全按比例构建的。

如果您对 JavaScript 有任何经验，请尝试使用 Node.js。也许你先用它来做几个项目来评估它并适应它。

# jquery - jQuery.sheet：跨表计算

> ID：12168030
> 
> 赞同：0
> 
> 时间：2012-08-28T21:50:59.067
> 
> 标签：jquery, jquery-plugins

如何在 jQuery.sheet 中进行跨表计算。主页[http://visop-dev.com/Project+jQuery.sheet](http://visop-dev.com/Project+jQuery.sheet)说它支持，但到目前为止我还没有看到任何这样的例子。

通过跨工作表计算，我希望能够对工作表 2 中的工作表 1 中的数据执行求和。

我试过`sheet1:A2:A10`但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T09:08:57.370

刚刚找到答案。它一直就在我面前。要访问另一个工作表中的单元格或单元格范围，请使用如下表达式：

```
SHEET1!A4
SHEET1!A2:A10 
```

需要注意的重要一点是

*   单元格名称不区分大小写
*   工作表不能按名称引用，而是按数字引用，第一个为 1
*   例如，SHEET1 中的单词表必须全部大写。

刚刚从 jison 文件 [http://jquerysheet.googlecode.com/svn/trunk/parser/parser.jison](http://jquerysheet.googlecode.com/svn/trunk/parser/parser.jison)

# .net - Entity Framework 5.0 - 需要最低 .Net Framework 版本？.Net 4.0 还是 4.5？

> ID：12168035
> 
> 赞同：10
> 
> 时间：2012-08-28T21:51:40.853
> 
> 标签：.net, entity-framework

对于 Entity Framework 5.0，所需的最低 .Net Framework 版本是多少？.Net 4.0 还是 4.5？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-28T21:56:01.563

这取决于您所说的“必需”是什么意思。

为了使用所有功能，需要 .NET 4.5。但是，EF5 将在 .NET 4 上运行，但功能与 EF 4.3 基本相同。

编辑：

EF5 仍将在 .NET 4 上提供一些较小的性能增强，当然也会提供错误修复，但不会提供大部分新功能（如枚举支持、空间类型等）。

编辑（2012 年 6 月 24 日）：

从 EF6 开始，新的性能功能已从核心框架中移出，因此您现在可以充分利用 .NET 4，但 EF5 仍依赖于 4.5 进行改进。

# iphone - 从视图控制器访问模型？

> ID：12168037
> 
> 赞同：0
> 
> 时间：2012-08-28T21:52:00.747
> 
> 标签：iphone, ios, model-view-controller, uiviewcontroller, model

我正在创建一个 iPhone 应用程序、一个游戏，并且我正在尝试理解和接受 MVC 架构。我计划创建一个模型，在这种情况下称为`HighScoresModel`负责保存有关我游戏中高分的所有信息。

1.  这个模型应该在哪里创建？在 AppDelegate 中？在第一个视图控制器中？
2.  其他视图控制器应该如何访问模型以传递消息`addScore:withDifficulty:`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T21:54:24.957

我认为拥有一个类方法的最佳选择`HighScoresModel`将从任何需要它的对象访问模型的单个共享实例。

这优于其他选项，因为没有控制器负责实例化模型，并且控制器也没有不必要地耦合到应用程序委托。

举个例子：

```
@interface HighScoresModel : NSObject

+ (HighScoresModel *)sharedHighScoresModel;
...

@end

@implementation HighScoresModel

static HighScoresModel *SharedHighScoresModel;

+ (HighScoresModel *)sharedHighScoresModel
{
    if (!SharedHighScoresModel)
    {
        SharedHighScoresModel = [[HighScoresModel alloc] init];
    }

    return SharedHighScoresModel;
}

...

@end 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T21:56:49.340

创建一个 Singleton 并在其中创建 HighScoresModel。可以从所有 ViewController 访问单例。

至于传递消息的其他视图控制器，您将能够从控制器内的任何地方执行类似的操作。

[MySingleTon myHighScoresModel] addScore:myScore withDifficulty:myDifficulty];

有关单例的更多参考，请参阅以下链接[http://www.johnwordsworth.com/2010/04/iphone-code-snippet-the-singleton-pattern/](http://www.johnwordsworth.com/2010/04/iphone-code-snippet-the-singleton-pattern/)

# entity-framework - 无法获得代码优先自动迁移以在现有 SQL Server CE 数据库上工作

> ID：12168038
> 
> 赞同：5
> 
> 时间：2012-08-28T21:52:00.580
> 
> 标签：entity-framework, entity-framework-4, entity-framework-4.1

**概括：**

我将从摘要开始，然后是详细信息。对于我的项目，工作目录中的实时 .sdf 数据库文件不会发生自动迁移。就好像那个 .sdf 文件不存在一样。相反，所有配置操作都在它在`Program Files/Microsoft Visual Studio 10.0/Common7/IDE`目录中创建的新的空数据库文件上执行。如何让它在工作目录中的实时 .sdf 数据库文件上工作？

**细节：**

该项目在 Visual Studio 2010 Ultimate 中使用 Code First EF。该项目是从 EF 4.1 开始的，我刚刚将项目更新到 EF 4.4。

数据库文件是一个 SQL Server Compact Edition 4.0 文件，它与可执行文件位于同一目录中（即工作目录）。一段时间以来，一切都运行良好，但我想向 DbContext 添加两个新的 DbSet，因此向数据库文件添加两个新表。当我将新版本的程序部署给客户时，我希望程序能够无缝地将两个新表添加到数据库中，并继续执行，就好像什么都没发生一样，而其他表中的所有现有数据都保持不变。

**尝试 1**

[根据http://msdn.microsoft.com/en-US/data/jj554735](http://msdn.microsoft.com/en-US/data/jj554735)中描述的过程：

我向 DbContext 派生类添加了两个新的 DbSet。当我尝试运行该程序时，出现以下异常： `The model backing the 'DrillContext' context has changed since the database was created. Consider using Code First Migrations to update the database`. 这是我所期望的，因为我还没有启用迁移。

然后在包管理控制台中发出命令：

```
Enable-Migrations -EnableAutomaticMigrations. 
```

系统创建了一个`Migrations`目录，其中包含一个`Configuration.cs`文件。

然后我跑了

```
Update-Database 
```

命令，并得到消息`No pending code-based migrations`。我检查了工作目录中的实时数据库文件，它没有改变。但是，`Program Files/Microsoft Visual Studio 10.0/Common7/IDE`目录中有一个同名的新数据库文件，该文件具有相同的名称，并且是一个包含所有适当表的空数据库，包括与 DbContext 派生类中的两个新 DbSet 对应的两个表，以及一个名为 的新表`_MigrationHistory`，其中有一个条目。实时 .sdf 文件保持不变，没有新表，也没有`_MigrationHistory`表。

**尝试 2，它使用“InitialMigration”：**

根据[http://www.ladislavmrnka.com/2012/03/ef-4-3-migrations-and-existing-database/](http://www.ladislavmrnka.com/2012/03/ef-4-3-migrations-and-existing-database/)

为了准备第二次尝试，我通过做 3 件事恢复了程序的原始状态（即恢复到我尝试迁移之前的状态）。我从 DbContext 派生类中删除了 2 个新的 DbSet。我删除了 Migrations 目录（以及随附的 Configuration.cs 文件），并删除了“.../Common7/IDE”目录中无用的数据库文件（.sdf 文件）。

然后我执行了命令：

```
Enable-Migrations -EnableAutomaticMigrations 
```

它创建了 Migrations 目录和 Configurations.cs 文件。

然后我执行了

```
Add-Migration InitialMigration -IgnoreChanges 
```

命令，该命令将`201208281905525_InitialMigration.cs`文件添加到 Migrations 目录。

然后，根据引用网页上的说明，我修改了`Up`文件中的方法，使`InitialMigration`类变为以下内容：

```
public partial class InitialMigration : DbMigration
{
    public override void Up()
    {
        Sql("DROP TABLE EdmMetadata");
    }

    public override void Down()
    {
    }
} 
```

然后我执行了

```
Update-Database 
```

命令，得到消息`The specified table does not exist.` 我检查了工作目录中的live database，发现数据库中确实有一个EdmMetadata表。然后我检查了`.../Common7/IDE`目录，发现在那里创建的新数据库没有表。

因此，所有“迁移”活动都发生在`.../Common7/IDE`文件版本上，而不是工作目录中的实时数据库文件上。

如何让它在现有的实时数据库文件上工作？

谢谢，

# android - 如何使用 HitTestResult 在 Android WebView 中获取链接 URL 以获取链接图像（而不是图像 URL）与 Longclick

> ID：12168039
> 
> 赞同：12
> 
> 时间：2012-08-28T21:52:01.497
> 
> 标签：android, image, url, webview, webviewclient

我尝试捕捉 webview longclicks 以显示上下文菜单。（见下面的代码）当长按图像时，我总是得到额外的图像 URL（对于带有 IMAGE_TYPE 的未链接图像和带有 SRC_IMAGE_ANCHOR_TYPE 的链接图像）。但是如何获取带有超链接的图像的链接 URL（而不是图像 URL）？

最好的，塞巴斯蒂安

```
 mywebview.setOnLongClickListener(new OnLongClickListener() {
            public boolean onLongClick(View v) {

                final WebView webview = (WebView) v;
                final WebView.HitTestResult result = webview.getHitTestResult();

                if (result.getType() == SRC_ANCHOR_TYPE) {
                    return true;
                }

                if (result.getType() == SRC_IMAGE_ANCHOR_TYPE) {
                    return true;
                }

                if (result.getType() == IMAGE_TYPE) {
                    return true;
                }

                return false;
            }
        }); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-07-26T12:49:27.780

以上解决方案均不适用于 Android 4.2.2。所以我查看了默认 android web 浏览器的源代码。我为这个确切的问题提取了解决方案 - 从图像链接中获取链接 URL。

来源： [https ://github.com/android/platform_packages_apps_browser/blob/master/src/com/android/browser/Controller.java](https://github.com/android/platform_packages_apps_browser/blob/master/src/com/android/browser/Controller.java)

提取解决方案：

LongClick 监听器：

```
...
mWebview.setOnLongClickListener(new OnLongClickListener() {

    @Override
    public boolean onLongClick(View v) {
        HitTestResult result = mWebview.getHitTestResult();
        if (result.getType() == HitTestResult.SRC_IMAGE_ANCHOR_TYPE) {
            Message msg = mHandler.obtainMessage();
            mWebview.requestFocusNodeHref(msg);
        }
    }
});
... 
```

获取 URL 的处理程序：

```
private Handler mHandler = new Handler() {

    @Override
        public void handleMessage(Message msg) {
            // Get link-URL.
            String url = (String) msg.getData().get("url");

            // Do something with it.
            if (url != null) ...
        }
    }; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2019-03-22T12:39:17.620

我知道这是一个老问题，但我最近遇到了这个问题。基于[Perry_ml](https://stackoverflow.com/a/17881744/3861647)的回答，我使用以下 Kotlin 代码来解决它：

```
webView.setOnLongClickListener {
    val result = webView.hitTestResult
    if (result.type == WebView.HitTestResult.SRC_IMAGE_ANCHOR_TYPE) {
        val handler = Handler()
        val message = handler.obtainMessage()

        webView.requestFocusNodeHref(message)
        val url = message.data.getString("url")

        // Do something with url, return true as touch has been handled
        true
    } else {
        false
    }
} 
```

[我在这里](https://pacheco.dev/posts/android/webview-image-anchor/)发布了一些关于它的信息。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-29T10:10:23.803

我检查了 WebView 的源代码，似乎图像 uri 是您可以获得的 SRC_IMAGE_ANCHOR_TYPE 的唯一额外数据。但是不要在这里生气，我有一个快速而肮脏的解决方法给你：

```
 webview.setOnLongClickListener(new OnLongClickListener() {
        @Override
        public boolean onLongClick(View v) {
            final WebView webview = (WebView) v;
            final HitTestResult result = webview.getHitTestResult();
            if(result.getType()==HitTestResult.SRC_IMAGE_ANCHOR_TYPE) {
                webview.setWebViewClient(new WebViewClient(){
                    @Override
                    public boolean shouldOverrideUrlLoading(WebView view, String url) {
                        // 2\. and here we get the url (remember to remove the WebView client and return true so that the hyperlink will not be really triggered)
                        mUrl = url; // mUrl is a member variant of the activity
                        view.setWebViewClient(null);
                        return true;
                    }
                });
                // 1\. the picture must be focused, so we simulate a DPAD enter event to trigger the hyperlink
                KeyEvent event1 = new KeyEvent(KeyEvent.ACTION_DOWN, KeyEvent.KEYCODE_DPAD_CENTER);
                webview.dispatchKeyEvent(event1);
                KeyEvent event2 = new KeyEvent(KeyEvent.ACTION_UP, KeyEvent.KEYCODE_DPAD_CENTER);
                webview.dispatchKeyEvent(event2);
                // 3\. now you can do something with the anchor url (and then clear the mUrl for future usage)
                String url = mUrl;
                if (url!=null) {
                    Toast.makeText(webview.getContext(), url, Toast.LENGTH_SHORT).show();
                }

                mUrl = null;
            }
            return false;
        }
    }); 
```

我在低端 Android 2.1 设备和高端 Android 4.0 设备上尝试了该代码，两者都像魅力一样工作。

问候

陈子腾

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-30T08:00:41.407

Ziteng Chen 解决方案适用于 Android 4.0（API 级别 15），但由于某种原因，KeyEvent down & up 在 API LEVEL 16+（Android 4.1+ JELLY_BEAN）中不起作用。它不会触发 WebView 的 loadUrl。所以我不得不用dispatchTouchEvent替换dispatchKeyEvent。这是代码：

```
...
MotionEvent touchDown = MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_DOWN, touchX, touchY, 0);
webView.dispatchTouchEvent(touchDown);
touchDown.recycle();

MotionEvent touchUp = MotionEvent.obtain(SystemClock.uptimeMillis(), SystemClock.uptimeMillis(), MotionEvent.ACTION_UP, touchX, touchY, 0);
webView.dispatchTouchEvent(touchUp);
touchUp.recycle();

String url = mUrl;
... 
```

您可能必须等待（使用 AsyncTask）才能在较慢的设备中获取 mUrl，在触发 dispatchTouchEvents 后它立即为空

希望能帮助到你。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2014-10-02T20:58:34.570

不要调用这个函数`myWebView.requestFocusNodeHref(msg);`，而是尝试调用这个函数`myWebView.requestImageRef(msg);`

# jsf - @PostConstruct 中的重定向导致 IllegalStateException

> ID：12168043
> 
> 赞同：12
> 
> 时间：2012-08-28T21:52:30.587
> 
> 标签：jsf, jsf-2

我想在我的 4 个支持 bean 中的 @PostConstruct 中进行重定向。正如我从以下问题中了解到的那样： [JSF PostConstruct 异常处理 - 重定向](https://stackoverflow.com/questions/6208037/jsf-postconstruct-exception-handling-redirect) 我知道我应该使用：

```
 @PostConstruct
    public void init() {    
       if (shouldRedirect) {
          try { 
             FacesContext.getCurrentInstance().getExternalContext().redirect("bolagsSok_company.xhtml");
             return;
          } catch (IOException e) {
             //do nothing
          }
        }
        ....
     } 
```

这对我的 2 个支持 bean 非常有用……但对于另外两个，非重定向 xhtml 文件仍在调用支持 bean 并且不重定向。我已经确认（通过调试）支持 bean 确实调用了两者`FacesContext.getCurrentInstance().getExternalContext().redirect("bolagsSok_company.xhtml");`并返回；陈述。

有什么线索可能是错的吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-28T21:59:53.637

如果响应已经提交，则在 a 中重定向`@PostConstruct`可能为时已晚。即当响应的前几个字节已经发送到客户端时。这是一个不归路。在您的情况下，当第一次在视图中相对较晚地引用（并因此构造）支持 bean 时，可能会发生这种情况，可能大约在中途或最后。

您可以通过以下方式之一解决此问题：

1.  尽早在视图中引用 bean。

2.  使用`<f:event type="preRenderView">`而不是`@PostConstruct`. 这将在渲染响应开始之前调用该方法（因此，在任何位被发送到响应之前）。或者，当您已经使用 JSF 2.2 时，使用`<f:viewAction>`. 另一个优点是`<f:viewAction>`可以返回导航案例结果，`return bolagsSok_company?faces-redirect=true"`而无需摆弄`ExternalContext#redirect()`.

3.  `javax.faces.FACELETS_BUFFER_SIZE`通过上下文参数将默认 Facelets 缓冲区大小`web.xml`增加到大约最大 HTML 响应的大小。

### 也可以看看：

*   [点击 bean 方法并在 GET 请求上重定向](https://stackoverflow.com/questions/7488211/hit-a-bean-method-and-redirect-based-on-a-get-parameter)
*   [有没有简单的方法来预处理和重定向 GET 请求？](https://stackoverflow.com/questions/7294651/is-there-any-easy-way-to-preprocess-and-redirect-get-requests)
*   [如何在 JSF 中导航？如何使 URL 反映当前页面（而不是上一个页面）](https://stackoverflow.com/questions/15521451/how-to-navigate-in-jsf-how-to-make-url-reflect-current-page-and-not-previous-o)

# oracle-adf - 以编程方式添加另一行

> ID：12168044
> 
> 赞同：0
> 
> 时间：2012-08-28T21:52:41.867
> 
> 标签：oracle-adf

[![](../Images/4b7e6b889b0aa41f54f7fe293cf6faf5.png)](https://1.bp.blogspot.com/--RCegM2hWX8/T6uEyArhOSI/AAAAAAAAAO4/wslTY3656d4/s1600/firstitemselected.JPG)

[![](../Images/1a71e67c6a11366290cc02406f360dcb.png)](https://4.bp.blogspot.com/-B5jpul58n2Q/T6ud3Q08GNI/AAAAAAAAAPM/hIc2WnSqaAI/s1600/editform.JPG)

单击按钮时如何添加另一行`Add new RFQ details`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T05:50:35.357

.. 更准确地说：Shay 的意思是您从数据控制面板拖放 CreateInsert 操作，用于填充屏幕截图中表格的 ViewObject。这将创建一个方法绑定并自动从命令按钮操作侦听器属性中引用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:57:14.847

您调用要添加行的 VO 的 createInsert 操作。

# iphone - 绘制时 CAShapeLayer 虚线

> ID：12168045
> 
> 赞同：0
> 
> 时间：2012-08-28T21:52:47.967
> 
> 标签：iphone, cashapelayer

我正在向应用程序添加一个简单的绘图功能，并且我希望用户能够绘制虚线。我的绘图程序工作得很好，添加了一个 CAShapeLayer 并设置了路径。

但是，当我尝试绘制虚线时，只有当用户绘制速度非常快时，虚线才明显。如果我画得很慢，线条是实心的，因为破折号是聚在一起的。

步骤 1\. 开始一个新的绘图层。一些代码显然被遗漏了。

```
// CAShapeLayer
// Dashed pattern is arbitrary - I've tried a variety of values
[self.currentDrawLayer setLineDashPattern:[NSArray arrayWithObjects:
                                          [NSNumber numberWithInt:6],
                                          [NSNumber numberWithInt:12],
                                          nil]];

currentPenPath = [UIBezierPath bezierPath];    
[currentPenPath moveToPoint:currentPoint]; 
```

步骤 2\. 在用户绘制和更新图层时添加点。

```
[currentPenPath addLineToPoint:currentPoint];
[currentPenPath moveToPoint:currentPoint];
[[self currentDrawLayer] setPath:currentPenPath.CGPath]; 
```

我希望用户能够随心所欲地画得慢或快，并在绘画时有一致的破折号。我需要先把所有的点都弄平吗？

有没有一种简单的方法可以在用户绘制时绘制破折号？

![在此处输入图像描述](../Images/045537e2add41cebe38bf158bbb1390b.png)

任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T00:08:08.230

我找到了一个解决方案——而且在绘图时也可以使用！

一些代码...

```
else if (sender.state == UIGestureRecognizerStateChanged)
{
    CGFloat distance = sqrtf(powf((point.x - currentPenPoint.x), 2) + powf((point.y - currentPenPoint.y), 2));

    if (distance > 20) // TODO: define magic number after some testing
    {
        currentPenPoint = point;
        [self drawPenLine];
    }

    <snip>
} 
```

我引用了以下帖子： [如何使用 UIBezierPath 绘制平滑直线？](https://stackoverflow.com/questions/8127076/how-to-draw-smooth-straight-line-by-using-uibezierpath)

使用毕达哥拉斯我可以找到前一点之间的距离，如果足够远，我添加点并画线。这样虚线是均匀分布的。

# java - 安卓远程控制客户端

> ID：12168046
> 
> 赞同：19
> 
> 时间：2012-08-28T21:52:50.067
> 
> 标签：java, android

[RemoteControlClient](http://developer.android.com/reference/android/media/RemoteControlClient.html "远程控制客户端")是在 ICS 中引入的。这就是锁屏似乎与各种音乐播放器集成的方式。有关锁定屏幕上的 Spotify 示例，请参阅下面的屏幕截图。

![在此处输入图像描述](../Images/eb49c79ca15c47d0f0f8a26b36d60fe7.png)

锁屏以外的其他应用程序中的一个也可以与所述播放器集成吗？

我发现文档缺乏关于这个主题的内容，但我认为如果可能的话，结果可能会很有趣。

**编辑：**

迄今为止的进展：无。我发现**IRemoteControlDisplay**可能参与其中，但我的 Android/Java 技能有点缺乏真正理解如何实现它并实现与锁定屏幕上相同的功能。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-08-11T13:53:18.067

在开发我的应用程序时，我实际上发现了如何实现您自己的 RemoteControlDisplay。

基本上，您扩展 IRemoteControlDisplay$Stub，它将消息发送到特殊处理程序，此处理程序更新元数据和事物。然后，通过调用 AudioManager#registerRemoteControlDisplay() 注册您自己的从 IRemoteControlDisplay$Stub 扩展的类。

然后通过调用 AudioManager#unregisterRemoteControlDisplay() 取消注册。

这相当复杂，但我已经写了一篇关于如何做到这一点的文章。我已经在 XDA 上发布了，在这里查看：http: [//forum.xda-developers.com/showthread.php?p=44513199](http://forum.xda-developers.com/showthread.php?p=44513199)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T15:02:36.513

我相信你可以做到这一点。但是，该方法将使用私有 API（这意味着它可能不适用于某些更高版本的 Android 操作系统）。

我建议去下载Android源代码（http://source.android.com/）并检查目录/frameworks/base/media/java/android/media

它有几个您感兴趣的文件：AudioManager.java

音频服务.java

IRemoteControlClient.aidl

IRemoteControlDisplay.aidl

音频管理器有公共方法，没有记录在案，称为 registerRemoteControlDisplay。您应该能够通过反射访问它。

使用此接口，您可以注册一个实现 IRemoteControlDisplay（另一个未记录的接口）的对象，并且您应该能够通过此对象控制播放器。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-04T07:22:30.803

尝试这个

```
AudioManager audioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
        audioManager.requestAudioFocus(this, AudioManager.STREAM_MUSIC,
                AudioManager.AUDIOFOCUS_GAIN);
        Bitmap AlbumArt=BitmapFactory.decodeResource(getResources(), R.drawable.alislahthumbmain);
        mIslahReceiverComponent=new ComponentName(this,AlIslahReceiver.class.getName());
audioManager.registerMediaButtonEventReceiver(mIslahReceiverComponent);
        Intent mediaButtonIntent=new Intent(Intent.ACTION_MEDIA_BUTTON);
        mediaButtonIntent.setComponent(mIslahReceiverComponent);
        PendingIntent mediaPendingIntent=PendingIntent.getBroadcast(getApplicationContext(),
                0,mediaButtonIntent,0);
        RemoteControlClient mRemoteControlClient=new RemoteControlClient(mediaPendingIntent);
        mRemoteControlClient.editMetadata(true)
        .putString(MediaMetadataRetriever.METADATA_KEY_TITLE,AlIslahApplication.getStreamTitle())
        .putBitmap(100,AlbumArt)
        .apply();
        mRemoteControlClient.setPlaybackState(
                RemoteControlClient.PLAYSTATE_PLAYING);
        mRemoteControlClient.setTransportControlFlags(
               RemoteControlClient.FLAG_KEY_MEDIA_PLAY_PAUSE|
                RemoteControlClient.FLAG_KEY_MEDIA_STOP);
        audioManager.registerRemoteControlClient(mRemoteControlClient); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-07T15:58:16.600

您无法获得与锁定屏幕相同的显示请求，但您当然可以触发此屏幕上的按钮使用广播意图执行的相同事件。

有问题的操作是 ACTION_MEDIA_BUTTON，您应该附加一个带有适当 keyCode 的 KeyEvent 来执行您想要的操作。

```
Intent intent = new Intent(Intent.ACTION_MEDIA_BUTTON);
intent.putExtra(Intent.EXTRA_KEY_EVENT, new KeyEvent(
            KeyEvent.ACTION_UP, KeyEvent.KEYCODE_MEDIA_PLAY_PAUSE));
sendBroadcast(intent); 
```

这将与按锁屏上的播放/暂停按钮执行相同的操作。您可以使用其他有意义的 KeyEvent 键码（KEYCODE_MEDIA_NEXT 等）来执行此操作，尽管您不知道当前播放的曲目已将其注册为支持什么，而锁屏却知道。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-05-27T08:41:48.963

对于在 KitKat 发布后遇到此问题的任何人，您现在可以使用[`RemoteController`](https://developer.android.com/reference/android/media/RemoteController.html)连接到 RemoteControlClients 并允许您控制它们。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T12:00:31.667

您必须在您的应用程序中实现 IRemoteControl*.aidl 接口，并且应用程序（如 Spotify）必须将自身注册到您的应用程序，目前还不是这样。他们将自己注册到[AudioManager](http://developer.android.com/reference/android/media/AudioManager.html#registerRemoteControlClient%28android.media.RemoteControlClient%29)。所以不，如果不修改应用程序（Spotify 等）或修改 Android 系统，您将无法捕获那些 RemoteClient 注册，以便您的应用程序可以获取 RemoteClients 及其数据。

# android - 如何从 sdcard 获取图像并在 gridview 中显示

> ID：12168048
> 
> 赞同：0
> 
> 时间：2012-08-28T21:53:01.927
> 
> 标签：android, gridview, android-imageview, android-sdcard

实际上，我尝试使用这种编码，它工作正常。即，在模拟器中完美地显示所有图像，但在移动设备上它重复显示相同的图像。我还附加了适配器类

```
File file[] = Environment.getExternalStorageDirectory().listFiles();
            String strFile = "";
            for (int i = 0; i < file.length; i++) {
                strFile += file[i].getAbsolutePath() + " :: ";
                System.out.println("\n");
            }
            Log.i("test", strFile);
            String[] img = { MediaStore.Images.Thumbnails._ID };
            imagecursor = managedQuery(
                    MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, img, null,
                    null, MediaStore.Images.Thumbnails.IMAGE_ID + "");
            image_column_index = imagecursor
                    .getColumnIndexOrThrow(MediaStore.Images.Thumbnails._ID);
            count = imagecursor.getCount();
            imagegrid = (ListView) findViewById(R.id.PhoneImageGrid);
            imagegrid.setAdapter(new ImageAdapter(getApplicationContext()));
            imagegrid.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View v, int position,
                        long id) {
                    System.gc();
                    String[] proj = { MediaStore.Images.Media.DATA };
                    actualimagecursor = managedQuery(
                            MediaStore.Images.Media.EXTERNAL_CONTENT_URI, proj,
                            null, null, null);
                    actual_image_column_index = actualimagecursor
                            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
                    actualimagecursor.moveToPosition(position);
                    String i = actualimagecursor
                            .getString(actual_image_column_index);
                    System.gc();
                    Intent intent = new Intent(getApplicationContext(),
                            ViewImage.class);
                    intent.putExtra("filename", i);
                    startActivity(intent);
                }
            });
        } 
```

适配器类：

```
public class ImageAdapter extends BaseAdapter {
            private Context mContext;

            public ImageAdapter(Context c) {
                mContext = c;
            }

            public int getCount() {
                return count;
            }

            public Object getItem(int position) {
                return position;
            }

            public long getItemId(int position) {
                return position;
            }

            public View getView(int position, View convertView, ViewGroup parent) {
                System.gc();
                ImageView i = new ImageView(mContext.getApplicationContext());
                if (convertView == null) {
                    imagecursor.moveToPosition(position);
                    int id = imagecursor.getInt(image_column_index);
                    i.setImageURI(Uri.withAppendedPath(
                            MediaStore.Images.Thumbnails.EXTERNAL_CONTENT_URI, ""
                                    + id));
                    i.setScaleType(ImageView.ScaleType.CENTER_CROP);
                    i.setLayoutParams(new GridView.LayoutParams(92, 92));
                } else {
                    i = (ImageView) convertView;
                }
                return i; 
```

# security - 如果不允许基于会话的身份验证，访问控制来源：* 是否安全？

> ID：12168051
> 
> 赞同：1
> 
> 时间：2012-08-28T21:53:27.107
> 
> 标签：security, xss

> **可能重复：**
> [设置 Access-Control-Allow-Origin 的安全风险是什么？](https://stackoverflow.com/questions/12001269/what-are-the-security-risks-of-setting-access-control-allow-origin)

我只是不想检查我没有在这里忽略一些东西......

如果我设置`access-control-origin: *`并且**不允许**基于会话的身份验证，那么当使用访问令牌请求私有数据时，我可以安全地提供私有数据，对吧？我什至可以允许发布请求。只要给出有效的访问令牌，我就想不出任何方法来攻击这样的系统。

这里有洞吗？

# http - 400 和 500 错误页面应该是静态 .html 文件吗？

> ID：12168057
> 
> 赞同：4
> 
> 时间：2012-08-28T21:54:12.347
> 
> 标签：http, web-applications

在构建 Web 应用程序时，错误页面（400、500 状态代码）应该是静态 .html 文件，还是提供动态页面可以，为什么？

我认为如果您的服务器出现故障，您的动态页面也会随之下降。至少对于静态页面，您的负载均衡器可以提供静态文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T22:00:21.640

就 HTTP 协议而言，静态页面和动态页面之间没有区别，因此在*标准*方面，为 400 和 500 提供动态页面没有问题。

但是，正如您所说，如果您的应用程序中有错误，那么尝试提供动态页面可能不是最好的主意，因为它可能会由于相同的错误而失败，甚至如果错误是由于数据库拥塞等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:51:22.373

查看您的服务器日志并查看哪些错误发生最多可能会很有趣。通常我发现对于未找到的内容总是有大量的 404。不是因为站点/应用程序中的链接断开，而是因为蜘蛛/垃圾邮件发送者对不存在的页面的随机请求。

动态 404 页面可能会给您的服务器增加额外的负载，但这取决于这些错误的数量以及您的服务器将花费多少时间来动态生成这些错误页面。

如果您有一个动态生成的 404 错误页面，那么我建议您创建一个空白 robots.txt 文件和一个空白/普通 favicon.ico 文件。或者在您的 .htaccess 中删除对至少 favicon 的请求。这样做可以帮助减少 404 的数量，因此具有动态 404 错误页面可能会造成较小的影响。

基本上虽然它没有任何问题 - 从纯粹的性能角度来看，它可能不是最好的主意。这首先取决于您的服务器/应用程序的负载量以及您的服务器有多少净空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-22T21:11:57.563

我认为区分 404s 和服务器错误（500s）是有用的。

我想为最终得到 404 的用户提供的一项重要功能是搜索其他内容的能力，这是主应用程序提供的一项功能。当然，您可以在静态页面上重做搜索，但这是多余的。

404 的主要原因是内容已移动或不再存在，在这种情况下，提供搜索是有价值的。并非所有面临 404 的用户都是服务器关闭或应用程序错误的结果。

tl; 博士我会让我的 500 驻留在静态服务器上，并为 404 提供双层，第一个从（动态）应用程序中提供服务，作为故障安全层，另一个 404 路由到我的静态页面服务器。

# xcode - 拖放 （ ) 在可可中不起作用

> ID：12168059
> 
> 赞同：3
> 
> 时间：2012-08-28T21:54:28.913
> 
> 标签：xcode, cocoa, drag-and-drop, nsdragginginfo

我想在我的 Mac 应用程序中实现一些“简单”的拖放操作。我拖入一个视图并相应地在我的 nib 文件中输入了“MyView”。但是我在控制台中没有得到任何响应（每当触发任何协议方法时，我都会尝试记录消息）

我已经像这样子类化了 NSView：

```
@interface MyView : NSView <NSDraggingDestination>{
    NSImageView* imageView;
} 
```

并像这样实现它：

```
- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

        [self registerForDraggedTypes:[NSImage imagePasteboardTypes]];

        NSRect rect = NSMakeRect(150, 0, 400, 300);
        imageView = [[NSImageView alloc] initWithFrame:rect];

        [imageView setImageScaling:NSScaleNone];
        [imageView setImage:[NSImage imageNamed:@"test.png"]];
        [self addSubview:imageView];

    }

    return self;
}

- (NSDragOperation)draggingEntered:(id <NSDraggingInfo>)sender{
    NSLog(@"entered");
    return NSDragOperationCopy;

}

- (NSDragOperation)draggingUpdated:(id <NSDraggingInfo>)sender{
    return NSDragOperationCopy;

}

- (void)draggingExited:(id <NSDraggingInfo>)sender{
    NSLog(@"exited");

}
- (BOOL)prepareForDragOperation:(id <NSDraggingInfo>)sender{
    NSLog(@"som");
    return YES;

}

- (BOOL)performDragOperation:(id<NSDraggingInfo>)sender {

    NSPasteboard *pboard = [sender draggingPasteboard];

    if ( [[pboard types] containsObject:NSURLPboardType] ) {
        NSURL *fileURL = [NSURL URLFromPasteboard:pboard];
        NSLog(@"%@", fileURL);
    }
    return YES;
}

- (void)concludeDragOperation:(id <NSDraggingInfo>)sender{
    NSLog(@"conclude sth");

}

- (void)draggingEnded:(id <NSDraggingInfo>)sender{
    NSLog(@"ended");

}

- (BOOL)wantsPeriodicDraggingUpdates{
    NSLog(@"wants updates");

}

- (void)updateDraggingItemsForDrag:(id <NSDraggingInfo>)sender NS_AVAILABLE_MAC(10_7){
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-10T18:29:48.040

如果有人仍然需要这个，请使用：

```
[self registerForDraggedTypes:[NSArray arrayWithObjects: 
                       NSFilenamesPboardType, nil]]; 
```

代替：

```
[self registerForDraggedTypes: 
                      [NSImage imagePasteboardTypes]]; // BAD: dropped image runs away, no draggingdestination protocol methods sent... 
```

为我解决了这个问题。我怀疑这是可行的，因为我的 XIB 是针对 osX 10.5。NSFilenamesPboardType 表示 10.5 及之前的“标准数据”UTI，[NSImage imagePasteboardTypes] 返回 10.6 及之后的标准数据 UTI。

顺便说一句，在**- (BOOL)performDragOperation:(id NSDraggingInfo)sender**中，您可以获得被删除的文件的路径：

```
 NSArray *files = [pboard propertyListForType:NSFilenamesPboardType]; 
```

在这里得到解决方案：

[http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/Tasks/acceptingdrags.html#//apple_ref/doc/uid/20000993-BABHHIHC](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DragandDrop/Tasks/acceptingdrags.html#//apple_ref/doc/uid/20000993-BABHHIHC)

# ruby-on-rails - Rails 设计 gem 和用户组

> ID：12168062
> 
> 赞同：2
> 
> 时间：2012-08-28T21:54:41.377
> 
> 标签：ruby-on-rails, devise

我正在使用 rails devise gem 进行用户身份验证，但现在对于我的商店，我必须为不满意、特价等介绍用户组。如何使用设计来做到这一点？请注意，这是一对多/多对多，因为每个用户可以有很多组，每个组都有一些用户。

此外，当用户注册时，我的组必须是例如 1。

设计具有“封闭”控制器（不像 authlogic 中那样）。那也是麻烦。

```
def create
    super
    group = Group.find_by_name("newuser")
    user_group = UserGroup.create
    user_group.user_id = current_user.id
    user_group.group_id = group.group_id
    user_group.save
  end 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-28T22:32:09.217

除非我读错了您的问题，否则这不一定必须与设计集成。只需创建一个描述组属性的组模型和一个用户组连接模型：

```
class UserGroup < ActiveRecord::Base
  belongs_to :user
  belongs_to :group
end

class User < ActiveRecord::Base
  has_many :user_groups
  has_many :groups, :through => :user_groups

  # attr_accessible :user_id, :group_id
end

class Group < ActiveRecord::Base
  has_many :user_groups
  has_many :users, :through => :user_groups
end 
```

至于关闭控制器问题，您可以将 Devise 控制器提升到您的应用程序中，或者创建一个从它继承的新控制器，从而覆盖方法。[从他们的链接 GitHub 页面](https://github.com/plataformatec/devise#configuring-controllers)阅读更多信息。

**编辑：**我认为你从错误的角度来处理这个问题。您无需在 Devise 的控制器中执行任何操作，只需将`before_save`回调添加到您的用户模型。

```
class User < ActiveRecord::Base
  before_save(:on => :create) :assign_default_group

  # Other model stuff here

  private

  def assign_default_group
    # This automatically creates the UserGroup record
    self.groups << Group.find_by_name("User")
  end
end 
```

# jquery - jQuery自动完成结果框被其他元素覆盖

> ID：12168068
> 
> 赞同：0
> 
> 时间：2012-08-28T21:55:18.480
> 
> 标签：jquery, css, jquery-ui, z-index, jquery-autocomplete

我有一个 jQuery 自动完成框，其下方有相对且绝对放置的项目。当结果框打开时，结果框被它下面的元素覆盖。下拉框下方的`z-index`项目小于 10。

我无法弄清楚结果框或结果项的名称来设置更高的 z-index。

就像是

```
#autocomplete_results{
    z-index: 20
} 
```

我的html：

```
<div class="normal"><input id="college" class="inputField" type="text" name="college" placeholder="College Name" data-autocomplete-source="<%= colleges_accounts_url %>"></div> 
```

咖啡脚本：

```
jQuery ->
  $("#college").autocomplete
    source: $("#college").data('autocomplete-source'), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:07:06.803

如果你使用绝对定位的元素，你需要设置父元素的 z-index，在这种情况下，如果你使用 jQuery UI，它是 .ui-autocomplete 的父元素

然后，您需要将您想要的元素设置为 z-index:-1 以确保它们出现在自动完成菜单下方

# iphone - 片段着色器 - 平均亮度

> ID：12168072
> 
> 赞同：6
> 
> 时间：2012-08-28T21:55:29.777
> 
> 标签：iphone, opengl-es, shader, fragment-shader

有谁知道如何在片段着色器中找到纹理的平均亮度？我可以访问 RGB 和 YUV 纹理 YUV 中的 Y 分量是一个数组，我想从这个数组中获得一个平均数。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T00:58:41.867

我最近不得不自己为作为 OpenGL ES 纹理的输入图像和视频帧执行此操作。我没有为这些生成 mipmap，因为我正在使用非二次幂纹理，并且您无法在 iOS 上的 OpenGL ES 2.0 中为 NPOT 纹理生成 mipmap。

相反，我做了一个类似于 mipmap 生成的多阶段缩减，但有一些细微的调整。每降低一步，图像的宽度和高度都会减少四倍，而不是用于 mipmap 的正常两倍。我通过从四个纹理位置进行采样来做到这一点，这些位置位于四个像素的四个正方形中间，每个正方形构成更高级别图像中的一个 4x4 区域。这利用了硬件纹理插值来平均四组四个像素，然后我只需对这四个像素进行平均即可在一个步骤中产生 16 倍的像素减少。

我在第一阶段使用 RGB 值的点积将图像转换为亮度，vec3 为 (0.2125, 0.7154, 0.0721)。这让我可以只读取每个后续​​缩减阶段的红色通道，这对 iOS 硬件确实有帮助。请注意，如果您已经从 Y 通道亮度纹理开始，则不需要这个，但我正在处理 RGB 图像。

一旦图像被缩小到足够小的尺寸，我就将其中的像素读回 CPU，并对剩余的几个像素进行最后一次快速迭代，以获得最终的亮度值。

对于一个 640x480 的视频帧，这个过程在 iPhone 4 上产生了大约 6 毫秒的亮度值，我想我可以通过稍微调整来减少 1-2 毫秒的处理时间。以我的经验，这似乎比 iOS 设备通常为该大小的二次幂图像生成 mipmap 更快，但我没有可靠的数字来支持这一点。

如果您希望看到这一点，请查看我的开源[GPUImage](https://github.com/BradLarson/GPUImage)框架（以及 GPUImageAverageColor 超类）中 GPUImageLuminosity 类的代码。FilterShowcase 示例演示了此亮度提取器的实际应用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T22:44:12.993

您通常不会仅使用着色器来执行此操作。

一种更常见的方法是使用完整的 mip-maps 创建缓冲区纹理（低至 1x1，这很重要）。当你想找到亮度时，你将后台缓冲区复制到这个缓冲区，然后使用最近邻算法重新生成 mips。然后底部像素将具有整个表面的平均颜色，并可用于通过类似`(c.r * 0.6) + (c.g * 0.3) + (c.b * 0.1)`（**编辑**：如果您有 YUV，然后做类似的事情并使用 Y；技巧只是将纹理平均到单个值，这就是 mips 所做的）。

这不是一种精确的技术，但相当快，尤其是在可以在内部生成 mipmap 的硬件上。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T23:21:22.087

我在这里介绍 RGB 纹理的解决方案，因为我不确定 mip 贴图生成是否适用于 YUV 纹理。

第一步是为纹理创建 mipmap（如果尚未存在）：

```
glGenerateMipmapOES(GL_TEXTURE_2D); 
```

现在我们可以通过使用采样器函数的可选第三个参数`texture2D`“bias”从片段着色器访问最小 mipmap 级别的 RGB 值：

```
vec4 color = texture2D(sampler, vec2(0.5, 0.5), 8.0); 
```

这会将 mipmap 级别向上移动 8 个级别，从而导致采样的级别要小得多。

如果你有一个 256x256 的纹理并以 1 的比例渲染它，8.0 的偏差将有效地将拾取的 mipmap 减少到最小的 1x1 级别（256 / 2^8 == 1）。当然，您必须根据您的条件调整偏差以采样最小级别。

好的，现在我们有了整个图像的平均 RGB 值。第三步是将RGB降低为亮度：

```
float lum = dot(vec3(0.30, 0.59, 0.11), color.xyz); 
```

点积只是计算加权和的一种奇特（且快速）的方法。

# iphone - 如何从 CSV 文件中读取第一列数据并将其与用户输入进行比较？

> ID：12168073
> 
> 赞同：3
> 
> 时间：2012-08-28T21:55:29.213
> 
> 标签：iphone, ios, xcode, ipad, csv

我正在开发一个应用程序，用户可以将 csv 文件上传到应用程序的文档文件夹（我完成了）。但我想在应用程序中为用户提供一个文本字段并要求他们输入一个 ID 号，这个数字将与上传的 csv 文件第一列一起检查。如果它匹配，则显示一个警报，说明它找到了匹配，否则它没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:34:26.197

我相信 csv 文件是具有逗号分隔列和换行符 (\n) 分隔行的文本文件。所以搜索每一行的第一列元素的一种方法是使用 NSString 的方法 componentsSeparatedByString:。

编辑：将 csv 文件加载到 NSString 实例中。

```
NSString * pstrCSVFilePath= [[NSBundle mainBundle] pathForResource:@"CSVFile" ofType:@""]
NSString * pstrCSVFile= [NSString stringWithContentsOfFile:pstrCSVFilePath encoding:NSASCIIStringEncoding error:NULL];

NSArray * paRowsOfCSVFile= [pstrCSVFile componentsSeparatedByString:@"\n"];
NSArray * paColumnsOfRow;
NSString * pstrFirstColumn;
for(NSString * pstrRow in paRowsOfCSVFile)
{
    paColumnsOfRow= [pstrRow componentsSeparatedByString:@","];
    pstrFirstColumn= [paColumnsOfRow objectAtIndex:0];
    if([pstrFirstColumn localizedCaseInsensitiveCompare:myTextField.text] == NSOrderedSame)
    {
         //Found the search string in the CSV file. 
         break;
    }
} 
```

# css - 为什么这个 div 隐藏了这个按钮？

> ID：12168076
> 
> 赞同：2
> 
> 时间：2012-08-28T21:55:52.903
> 
> 标签：css

我想要一个 div 漂浮在我的旁边，`input`但它却漂浮在它上面，我不知道为什么。就好像 div 设置为使用绝对定位一样。我想我可能只是忽略了一些愚蠢的事情，但它是什么？

html:

```
<input type="file" id="files" name="file" />
<div id="progress_bar"><div class="percent">0%</div></div>​ 
```

CSS：

```
input { float: left;}

#progress_bar {
  margin: 10px 0;
  padding: 3px;
  border: 1px solid #000;
  font-size: 14px;
  //clear: both;
  opacity: 0;
  -moz-transition: opacity 1s linear;
  -o-transition: opacity 1s linear;
  -webkit-transition: opacity 1s linear;
  }

#progress_bar.loading {
    opacity: 1.0;
  }

#progress_bar .percent {
    background-color: #99ccff;
    height: auto;
    width: 0;
  } ​ 
```

我在这里有一个示例：http: [//jsfiddle.net/sWrvU/](http://jsfiddle.net/sWrvU/) ，它基于 html5rocks [http://www.html5rocks.com/en/tutorials/file/dndfiles/上的读取文件演示](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

取消注释`clear:both`以查看演示实际工作（即您可以按下按钮，因为它上面没有 div），但显然 div 仍然没有浮动在输入旁边。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:04:46.543

我将其更改为使用[显示](http://www.quirksmode.org/css/display.html)而不是不透明度，因为不透明度意味着元素仍然存在，即使它是透明的。

**CSS**

```
input {
    float: left;
}    
#progress_bar {
    margin: 10px 0;
    padding: 3px;
    border: 1px solid #000;
    font-size: 14px;
    display:none;
    -moz-transition: opacity 1s linear;
    -o-transition: opacity 1s linear;
    -webkit-transition: opacity 1s linear;
  }
  #progress_bar.loading {
    display:block;
  }
  #progress_bar .percent {
    background-color: #99ccff;
    height: auto;
    width: 0;
  }​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:18:22.933

使用 display: block 而不是 opacity 会删除过渡，我猜你正试图保留它。

进度条不是“浮动在顶部”，而是输入浮动在下面。如果你也浮动进度条，事情应该会好一点：http: [//jsfiddle.net/cjc343/sWrvU/24/](http://jsfiddle.net/cjc343/sWrvU/24/)

# ios - 多个 OpenGL 视图 (Cocos2D)

> ID：12168079
> 
> 赞同：6
> 
> 时间：2012-08-28T21:56:03.793
> 
> 标签：ios, opengl-es, cocos2d-iphone, views, buffer

*注意*：**任何可以帮助我正确解决此问题的人都将获得*100 分赏金*！**

在我的应用程序中，我将 UIKit 和 Cocos2D 混合在一起，我使用 addSubview 和 removeFromSuperview 调用做了一些简单的自定义视图动画。我最近需要在我的应用程序中添加另一个 CCScene，以摆脱 Cocos2D 可以轻松处理的一些复杂的 UIKit 代码。所以我的应用程序中有一个基本视图，它是一个 UIViewController，上面有一些按钮。在这些按钮的后面是一个 CCGLView，Cocos2D 会做任何事情。这很好用。然后当我想去我的*第二个视图控制器*（让我们称之为我的游戏视图），在我完成我的视图动画之后，viewdidload 被调用（那是我的导演初始化用于第二个 CCScene 的地方）并且要么什么都没有发生，要么我在控制台中收到如下错误。现在在我的原始项目中，我得到了以下错误，在这个示例项目中没有任何反应。这些是错误：

```
OpenGL error 0x0501 in DrawSolidPolygon 104
OpenGL error 0x0502 in DrawSolidPolygon 104
OpenGL error 0x0501 in -[CCTextureAtlas drawNumberOfQuads:fromIndex:] 556
OpenGL error 0x0502 in -[CCTextureAtlas drawNumberOfQuads:fromIndex:] 556
OpenGL error 0x0502 in -[CCTextureAtlas drawNumberOfQuads:fromIndex:] 556
OpenGL error 0x0501 in -[CCParticleSystemQuad postStep] 411
OpenGL error 0x0506 in -[CCSprite draw] 532
OpenGL error 0x0502 in -[CCParticleSystemQuad draw] 434
OpenGL error 0x0502 in -[CCSprite draw] 532
OpenGL error 0x0502 in -[CCSprite draw] 532 
```

现在，当我在原始项目中有一个场景时，不会发生这种情况，只是现在我使用了 2 个 CCScenes。因此，示例项目中的代码几乎是我原始项目的副本，因此其中的任何错误很可能会导致我在这里解决手头的问题，并希望摆脱那些 OpenGL 错误。

经过几个小时的测试和收集信息，我的问题似乎类似于：[iOS and multiple OpenGL views](https://stackoverflow.com/questions/8111345/ios-and-multiple-opengl-views)。我也看过这个链接： http: [//gamesfromwithin.com/using-multiple-opengl-views-and-uikit](http://gamesfromwithin.com/using-multiple-opengl-views-and-uikit)。然而，这两个链接对我来说都没有任何意义，因为我不知道如何将它与 Cocos2D 联系起来。我认为这整个问题是当前版本的 Cocos2D 的一个限制，但是如果有人可以下载我的项目并以某种方式将过去两个链接的修复应用到我的项目并完全修复它，那就太好了，并且可以解决我的所有问题！

现在我项目中的 Cocos2D 版本是 2.0 版本可以下载的最新版本。如果有人愿意下载该项目并查看我做错了什么，我认为这将为我和其他遇到与我类似的问题的人解决问题。

下面的链接是我的问题示例项目的下载链接： [http ://www.gogofile.com/Default.aspx?p=sc&ID=634818635814123750_4340](http://www.gogofile.com/Default.aspx?p=sc&ID=634818635814123750_4340)

***截至 2012 年 9 月 3 日更新***，我目前正在考虑联系 @riq，他是 Cocos2D for iOS 的主要创建者。但是在我这样做之前，每个人都确定没有办法只拥有一个 CCGLView，我可以将它放在任何 UIViewController 中，因为从技术上讲，我不会使用两个视图，它只是控制器之间的一个共享视图。这种方式可行吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T04:07:18.390

好的，所以我发现我几乎有***3 个选项***：

**1.** @Riq 告诉我，2013 年 5 月发布的 2.2 版将支持多个 CCDirector。所以请玩等待游戏，直到 2.2 测试版发布。***更新***：2.1 最终版自 6 月中旬以来已经发布，所以我猜 2.2 测试版应该会在一两个月内发布。

***2.***只需要一个 UIViewController 来保存 CCGLView。然后，无论我需要什么 UIViewController 中的 glView ，我都会使用`addChildViewController`（iOS 5+），并且我会在切换视图时保留 UIViewController 并在那时也执行 replaceScene （可能在 UIView 动画完成回调中）。我***认为***这种方式也可以，但我不确定它的效率。

*编辑*：我已经使用并完全测试了这个解决方案，它似乎工作得很好。我建议这样做直到 2.2 出来。我的应用程序以 60FPS 运行并且看起来不错。

***3.***我个人没有尝试过任何这些链接/拉取请求，@Riq 也没有，所以这将是我最后的选择。[http://www.cocos2d-iphone.org/forum/topic/33480](http://www.cocos2d-iphone.org/forum/topic/33480)和[http://www.cocos2d-iphone.org/forum/topic/17821](http://www.cocos2d-iphone.org/forum/topic/17821)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T00:01:53.477

Director 仅支持一种 gl 视图。您要做的是一些技巧，例如抓取 gl 视图的屏幕截图以制作一个 uiview，您可以使用其他 uiview 进行转换，然后在一个真正的导演上更改您的场景，然后将其转换回。

对多视图的支持正在开发中，但可能需要几个月的时间。

# ubuntu-10.04 - 如何在 Ubuntu 下解压缩 .z 文件？

> ID：12168081
> 
> 赞同：1
> 
> 时间：2012-08-28T21:56:12.490
> 
> 标签：ubuntu-10.04, compression

我有一个来自 TREC(Text REtrieval Conference) 的文件，其扩展名为 .0z .1z 等。我尝试了所有我能做的方法，但仍然失败。有人可以帮我一个忙吗？

有一些证据可能会有所帮助。

1.  在终端中，我使用了“file”命令，然后它显示“fr940104.1z：compress'd data 16 bits”。

2.  我还检查了 GUI 下文件的属性，它显示了 UNIX 压缩文件（应用程序/x-compress）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T02:03:09.907

> 并存储在大约 1 兆字节的块中

表示解压前需要重新组合块。希望文件名可以帮助您（“chunk001.z”，“chunk002.z”，？）。假设您可以弄清楚顺序，请使用`cat`将它们组合到一个文件中。 *然后*使用 Unix 解压缩。或者直接从 cat 管道解压缩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:02:56.943

.z 通常意味着[简单的 Unix 压缩](http://www.fileinfo.com/extension/z)。做

```
uncompress filename.z 
```

不行？

# php - 使用 While 循环打印数据直到表结束

> ID：12168084
> 
> 赞同：0
> 
> 时间：2012-08-28T21:56:51.500
> 
> 标签：php, while-loop

```
mysql_query($query,$con);

        $query = "SELECT * FROM NW_WORLD;";
        $result = mysql_query($query, $con);

        $i = 0;
        $counter = count($result);
        while($result)
        {
            $village = mysql_result($result, $i, "village");
            $player = mysql_result($result, $i, "player");

            echo "village: $village  ";
            echo "player: $player<br>";
            $i++;
        } 
```

我想打印从 Select 语句中获得的所有数据。此代码正在运行，但在表格结束后，我得到了一些错误的数据。

> 警告：mysql_result() [function.mysql-result]：无法跳转到 MySQL 结果索引 4 上的第 6788 行 C:\xampp\htdocs\debal\nw_check_exec.php 第 41 行
> 村：播放器：
> 警告：mysql_result() [ function.mysql-result]：无法跳转到第 40 行 C:\xampp\htdocs\debal\nw_check_exec.php 中 MySQL 结果索引 4 的第 6789 行
> 警告：mysql_result() [function.mysql-result]：无法跳转到第 41 行 C:\xampp\htdocs\debal\nw_check_exec.php 中 MySQL 结果索引 4 的第 6789 行
> 村：播放器：
> 警告：mysql_result() [function.mysql-result]：无法跳转到 MySQL 结果的第 6790 行第 40 行 C:\xampp\htdocs\debal\nw_check_exec.php 中的索引 4
> 警告：mysql_result() [function.mysql-result]：无法跳转到 MySQL 结果索引 4 中的第 6790 行 C:\xampp\htdocs\debal\nw_check_exec.php 第 41 行
> 村：玩家：

请问你能帮帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:03:57.413

你有没有尝试过 ：

```
mysql_query($query,$con);

        $query = "SELECT * FROM NW_WORLD;";
        $result = mysql_query($query, $con);

        while($data = mysql_fetch_assoc($result)**)**
        {

            echo "village: $data[village]";
            echo "player: $data[player]<br>";
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:05:02.577

通常，如果我从单列单行 (1x1) 结果中提取字段，我只会使用 mysql_result。如果您有多个列和/或多行，我建议您改用 mysql_fetch_assoc。

# php - 如何处理 Symfony 2 中的相对路径？

> ID：12168086
> 
> 赞同：0
> 
> 时间：2012-08-28T21:56:53.967
> 
> 标签：php, symfony

根据您执行脚本的方式，您似乎获得了不同的相对路径：控制台或 web.xml。

我觉得这非常烦人，你没有遇到任何问题吗？

每次我需要复制/移动/删除文件时，我都必须考虑我是在 cli 还是 web 上，是否将其保存为 cli 或 web 路径等。

例如：假设有人上传了一张图片。您可能会使用这种路径存储图像：`uploads/picture-123.jpeg`. 然后一个cronjob决定移动图片或其他东西。首先，它必须将其添加到源路径：`web/`. 它还需要一个以 . 开头的目标路径`web/`。移动它后，它会希望将新路径保存在相应的数据库行或文档中，因此必须`web/`从目标路径中剥离。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T05:35:13.717

对于处理文件，路径定义的最佳实践是使用绝对路径，从`%kernel.root_dir%`：

```
parameters:
    your_upload_path: %kernel.root_dir%/../web/uploads/ 
```

# magento - Magento 我的处理订单数

> ID：12168089
> 
> 赞同：1
> 
> 时间：2012-08-28T21:57:12.670
> 
> 标签：magento, count

如何获取客户处理订单状态的计数？

像 Mage::getModel('checkout/cart')->getQuote()->getItemsCount()。

请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:41:26.913

这是一个类似的问题，它使用您所追求的“状态”字段加载订单集合：

[在 Magento 中获取状态 = 'Complete' 的订单 ID](https://stackoverflow.com/questions/8309289/get-order-ids-with-status-complete-in-magento)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:33:16.517

**仅**获取处于处理状态的订单数…

```
$processingOrdersCount = Mage::getModel('sales/order')->getCollection()
    ->addFilter('status', Mage_Sales_Model_Order::STATE_PROCESSING)
    ->getSize()
; 
```

# css - HTML5 在 Firefox 和 Chrome 中排列，但在 IE 中完全没有

> ID：12168090
> 
> 赞同：0
> 
> 时间：2012-08-28T21:57:17.927
> 
> 标签：css, html, internet-explorer, firefox, google-chrome

[http://www.grossmag.com/2012/september/home.shtml](http://www.grossmag.com/2012/september/home.shtml)

此链接适用于 Firefox 和 Chrome。我不确定为什么它不能在 IE 中正确排列。我正在尝试从旧样式表/td's/tr's 转换，如果我能找出它为什么不在资源管理器中排队，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:14:05.513

听起来您的网站正在 IE 中以兼容模式查看。这可能取决于文档的 DOCTYPE。

要使 IE 使用当前版本的默认模式显示，请使用以下 META 标签

```
<meta http-equiv="X-UA-Compatible" content="IE=edge" > 
```

这不会修复 IE7 的站点（例如）。如果您希望这样做，那么您可能需要为旧浏览器创建自定义 CSS 规则

# java - 为什么归并排序在排序反向排序列表时比正常排序列表更快？

> ID：12168092
> 
> 赞同：4
> 
> 时间：2012-08-28T21:57:22.567
> 
> 标签：java, algorithm, sorting, merge, mergesort

我正在对按升序输出的合并排序算法进行基于比较的分析。我注意到当我给它一个反向排序的列表而不是一个升序排序的列表时它更快（比较少）。谁能解释为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-17T13:17:52.290

要合并两个长度为 M 和 N 的列表，您最多需要 M+N-1 个比较。如果第一个列表中的所有条目都小于第二个列表中的条目，则只需进行 M 次比较。如果第二个列表中的所有条目都小于第一个列表中的条目，则只需进行 N 次比较。

如果您要排序的数字总数不是 2 的效力，那么您将遇到分成两个不同长度的列表的情况。我怀疑您以这两个中的第一个具有更多元素的方式实现了合并排序。这意味着该分区和合并的 M = N+1。如果您的元素顺序相反，则第二个列表的所有元素都将小于第一个列表的元素，并且在正确顺序的情况下您将需要 N 比较而不是 M。

如果您要排序的列表的效力为 2，则正常顺序和反向顺序之间应该没有区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:05:50.350

您的排序代码中一定有错误。

据我了解，文字 MergeSort 执行的比较次数应该与数据*无关*。这意味着它不能比 更差`O(n log n)`，但也不能更好（除非你做了一些聪明的修改，比如在“自然归并排序”或 TimSort 中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-01T12:59:34.013

使用自上而下的合并排序实现，升序排序的列表不会经过下面代码中的 merge() 步骤。因此，它是最快的。此外，反向排序列表会跳过 merge() 步骤中的某些比较步骤。例如，它没有进入我的代码下面的比较行。

```
else if (comp(aux[j], aux[i])) a[k] = aux[j++];     // B[j] <  A[i], take B[je 
```

因此，它也比遍历所有代码的随机排序列表更快。

供你参考：

```
void merge(int *a, int *aux, int lo, int mi, int hi, bool (*comp)(int, int)) {
    assert(sorted(a, lo,   mi, comp));      // precondition: a[lo..mi]   sorted
    assert(sorted(a, mi+1, hi, comp));      // precondition: a[mi+1..hi] sorted
    for (int k = lo; k <= hi; k++)  aux[k] = a[k];

    int i = lo;
    int j = mi + 1;
    for (int k = lo; k <= hi; k++) {
        if (i > mi)       a[k] = aux[j++];     // A is exhausted, take B[j]
        else if (j > hi)  a[k] = aux[i++];     // B is exhausted, take A[i]
        else if (comp(aux[j], aux[i])) a[k] = aux[j++];     // B[j] <  A[i], take B[j]
        else                           a[k] = aux[i++];     // A[i] <= B[j], take A[i]
    }
    assert(sorted(a, lo, hi, comp));        // postcondition: a[lo..hi] sorted
}

void mergesort(int *a, int *aux, int lo, int hi, bool (*comp)(int, int)) {
    if (hi <= lo) return;
    int mi = lo + (hi - lo) / 2;
    mergesort(a, aux, lo,     mi, comp);
    mergesort(a, aux, mi + 1, hi, comp);

    if (comp(a[mi], a[mi + 1])) return;  // already sorted
    merge(a, aux, lo, mi, hi, comp);
} 
```

（债务人）<><

# javascript - 将自定义函数注入到 onclick 事件中

> ID：12168101
> 
> 赞同：2
> 
> 时间：2012-08-28T21:58:14.637
> 
> 标签：javascript, jquery, socket.io, jquery-events

我想要做的是记录给定网页上的所有用户活动，所以我`socket.io`用来将页面上注册的事件发送到服务器，如下所示：

```
$(document).on('click.mynamespace', function(event){
    var elem = event.target;
    socket.emit('my-message', { 'element' : elem };
} 
```

我面临的问题是当目标元素是这种链接时`<a href="#" onclick="someFunctionThatRedirects()">My link</a>`。`socket.emit`在正确执行语句之前调用任何函数并卸载页面（断开我的套接字） 。

我想让它尽可能通用，因为它将作为一个插件工作，并希望它适应任何我无法控制的环境。

那么，有没有办法“劫持”所有点击事件，先用我的自定义函数发送它们，然后继续“正常”执行，不管它可能是什么？

**编辑**

似乎只有 FF（在 上测试`14.0.1`）导致`socket.emit`事件无法完成。Chrome`21.0.x`似乎正在工作，但不确定这是否是“偶然”。

**编辑 2**

该函数`someFunctionThatRedirects`实际上以这种方式重定向`window.location.ref = clickedurl`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:12:39.413

事件向上冒泡，因此单击的元素会在您之前触发它的事件`socket.emit`，您可以更改函数的工作方式以使它们按照您想要的顺序执行操作，如下所示

```
function someFunctionThatRedirects(){
    window.redirectTo = 'myNewPage';
}
$(document).on('click.mynamespace', function(event){
    var elem = $(event.target)[0];
    socket.emit('my-message', { 'element' : elem };
    if(window.redirectTo !== undefined) window.location.href = window.redirectTo;
} 
```

# jquery - 无法使用 jquery 隐藏 SharePoint 日期字段

> ID：12168103
> 
> 赞同：0
> 
> 时间：2012-08-28T21:58:18.707
> 
> 标签：jquery, sharepoint, date, hide, field

这适用于常规输入字段，但似乎无法使其适用于似乎生成日期选择器和 javascript 的日期字段。

```
$('input[title=Followup Date]').parent().parent().parent().hide(); 
```

我怎样才能做到这一点？我生成的标记看起来像这样

```
<TR>
        <TD nowrap="true" valign="top" width="190px" class="ms-formlabel"><H3 class="ms-standardheader">
        <nobr>Followup Date</nobr>
    </H3></TD>
        <TD valign="top" class="ms-formbody" width="400px">
        <!-- FieldName="Followup Date"
             FieldInternalName="Followup_x0020_Date"
             FieldType="SPFieldDateTime"
          -->
            <span dir="none">
        <SCRIPT language='javascript'>g_strDateTimeControlIDs["SPFollowup_x0020_Date"] = "ctl00_m_g_4175fece_4419_4c1f_a18a_4357d8c9376e_ctl00_ctl04_ctl08_ctl00_ctl00_ctl04_ctl00_ctl00_DateTimeField_DateTimeFieldDate";</SCRIPT>
                        <table border=0 cellpadding=0 cellspacing=0><tr>
                        <td class="ms-dtinput" >
                        <label for="ctl00_m_g_4175fece_4419_4c1f_a18a_4357d8c9376e_ctl00_ctl04_ctl08_ctl00_ctl00_ctl04_ctl00_ctl00_DateTimeField_DateTimeFieldDate" style="display:none">Followup Date Date</label>
                        <input name="ctl00$m$g_4175fece_4419_4c1f_a18a_4357d8c9376e$ctl00$ctl04$ctl08$ctl00$ctl00$ctl04$ctl00$ctl00$DateTimeField$DateTimeFieldDate" type="text" maxlength="45" id="ctl00_m_g_4175fece_4419_4c1f_a18a_4357d8c9376e_ctl00_ctl04_ctl08_ctl00_ctl00_ctl04_ctl00_ctl00_DateTimeField_DateTimeFieldDate" title="Followup Date" class="ms-input" AutoPostBack="0" /></td>
                        <td class="ms-dtinput" >
                        <A href="#" onclick='clickDatePicker("ctl00_m_g_4175fece_4419_4c1f_a18a_4357d8c9376e_ctl00_ctl04_ctl08_ctl00_ctl00_ctl04_ctl00_ctl00_DateTimeField_DateTimeFieldDate", "\u002fsites\u002fforms\u002fBrightIdeas\u002f_layouts\u002fiframe.aspx?&cal=1&lcid=1033&langid=1033&tz=-04:00:00.0001681&ww=0111110&fdow=0&fwoy=0&hj=0&swn=False&minjday=109207&maxjday=2666269&date=", ""); return false;' ><IMG id=ctl00_m_g_4175fece_4419_4c1f_a18a_4357d8c9376e_ctl00_ctl04_ctl08_ctl00_ctl00_ctl04_ctl00_ctl00_DateTimeField_DateTimeFieldDateDatePickerImage src="/_layouts/images/calendar.gif" border="0" alt="Select a date from the calendar."></IMG></A></td> 
```

# python - 如何在 Windows 中设置文件夹权限？

> ID：12168110
> 
> 赞同：29
> 
> 时间：2012-08-28T21:58:59.130
> 
> 标签：python, permissions, active-directory, share

创建用户 AD 帐户时，我正在使用 Python 创建一个新的个人文件夹。正在创建文件夹，但权限不正确。Python 可以将用户添加到新创建的文件夹并更改其权限吗？我不确定从哪里开始编码。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-28T22:13:43.027

您需要该`win32security`模块，它是[pywin32](http://sourceforge.net/projects/pywin32/)的一部分。这是一个做你想做的事情[的例子。](http://timgolden.me.uk/python/win32_how_do_i/add-security-to-a-file.html)

该示例为文件创建一个新的 DACL 并替换旧的，但修改现有的很容易；您需要做的就是从安全描述符中获取现有的 DACL，而不是创建一个空的 DACL，如下所示：

```
import win32security
import ntsecuritycon as con

FILENAME = "whatever"

userx, domain, type = win32security.LookupAccountName ("", "User X")
usery, domain, type = win32security.LookupAccountName ("", "User Y")

sd = win32security.GetFileSecurity(FILENAME, win32security.DACL_SECURITY_INFORMATION)
dacl = sd.GetSecurityDescriptorDacl()   # instead of dacl = win32security.ACL()

dacl.AddAccessAllowedAce(win32security.ACL_REVISION, con.FILE_GENERIC_READ | con.FILE_GENERIC_WRITE, userx)
dacl.AddAccessAllowedAce(win32security.ACL_REVISION, con.FILE_ALL_ACCESS, usery)

sd.SetSecurityDescriptorDacl(1, dacl, 0)   # may not be necessary
win32security.SetFileSecurity(FILENAME, win32security.DACL_SECURITY_INFORMATION, sd) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-04-06T02:34:40.800

[这是kindall's answer](https://stackoverflow.com/a/12168268/205580)的一个版本，它使用`EXPLICIT_ACCESS`带有 的条目[`SetEntriesInAcl`](https://msdn.microsoft.com/en-us/library/aa379576)，它创建了一个正确的ACL，其中ACE 以规范顺序（例如，首先列出了拒绝访问的ACE）。此外，此版本使用 DACL 设置[`SetNamedSecurityInfo`](https://msdn.microsoft.com/en-us/library/aa379579)，它支持传播可继承的 ACE，与过时的功能不同`SetFileSecurity`。

```
import ntsecuritycon
import win32security

FILENAME = "whatever"
USERX = "UserX"
USERY = "UserY"

entries = [{'AccessMode': win32security.GRANT_ACCESS,
            'AccessPermissions': 0,
            'Inheritance': win32security.CONTAINER_INHERIT_ACE |
                           win32security.OBJECT_INHERIT_ACE,
            'Trustee': {'TrusteeType': win32security.TRUSTEE_IS_USER,
                        'TrusteeForm': win32security.TRUSTEE_IS_NAME,
                        'Identifier': ''}}
            for i in range(2)]

entries[0]['AccessPermissions'] = (ntsecuritycon.GENERIC_READ |
                                   ntsecuritycon.GENERIC_WRITE)
entries[0]['Trustee']['Identifier'] = USERX
entries[1]['AccessPermissions'] = ntsecuritycon.GENERIC_ALL
entries[1]['Trustee']['Identifier'] = USERY

sd = win32security.GetNamedSecurityInfo(FILENAME, win32security.SE_FILE_OBJECT,
        win32security.DACL_SECURITY_INFORMATION)
dacl = sd.GetSecurityDescriptorDacl()
dacl.SetEntriesInAcl(entries)
win32security.SetNamedSecurityInfo(FILENAME, win32security.SE_FILE_OBJECT,
    win32security.DACL_SECURITY_INFORMATION |
    win32security.UNPROTECTED_DACL_SECURITY_INFORMATION,
    None, None, dacl, None) 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-23T23:49:53.460

对于那些对 ACE 的安全描述符“列表”感兴趣的人，what-have-ya 使用以下数据结构。不久前我得到了一些帮助，从那以后我就一直在使用它。

```
typical_aces={
    2032127L:"Full Control(All)",
    1179817L:"Read(RX)",
    1180086L:"Add",
    1180095L:"Add&Read",
    1245631L:"Change"
}

binary_aces={
    1:"ACCESS_READ",            #0x00000001
    2:"ACCESS_WRITE",           #0x00000002
    4:"ACCESS_CREATE",          #0x00000004
    8:"ACCESS_EXEC",            #0x00000008
    16:"ACCESS_DELETE",         #0x00000010
    32:"ACCESS_ATRIB",          #0x00000020
    64:"ACCESS_PERM",           #0x00000040
    32768:"ACCESS_GROUP",       #0x00008000
    65536:"DELETE",             #0x00010000
    131072:"READ_CONTROL",      #0x00020000
    262144:"WRITE_DAC",         #0x00040000
    524288:"WRITE_OWNER",       #0x00080000
    1048576:"SYNCHRONIZE",      #0x00100000
    16777216:"ACCESS_SYSTEM_SECURITY",#0x01000000
    33554432:"MAXIMUM_ALLOWED", #0x02000000
    268435456:"GENERIC_ALL",    #0x10000000
    536870912:"GENERIC_EXECUTE",#0x20000000
    1073741824:"GENERIC_WRITE", #0x40000000
    65535:"SPECIFIC_RIGHTS_ALL",#0x0000ffff
    983040:"STANDARD_RIGHTS_REQUIRED",#0x000f0000
    2031616:"STANDARD_RIGHTS_ALL",#0x001f0000
    } 
```

将给定 DACL / 路径中的掩码传递到：

```
def calculate_plaintext_mask(mask):
    a=2147483648L
    if typical_aces.has_key(mask):
        return typical_aces[mask]
    else:
        result='NONE'
        while a>>1:
            a=a>>1
            masked=mask&a
            if masked:
                if binary_aces.has_key(masked):
                    result=binary_aces[masked]+':'+result
    return result 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-04-05T10:55:00.483

这是在 Windows 下的 NTFS 文件上递归或不设置文件所有权/ ACL 的完整 pythonic 方法，无论有或没有 ACL 继承。

[编辑]

我现在已将此代码作为 Python 包发布，请在[此处](https://github.com/netinvent/windows_tools)`windows_tools.file_utils`查看源代码

[/编辑]

首先我们需要一个可以获取文件所有权的函数 (set_file_owner()) 然后我们需要一个可以在 Windows 上处理 ACL 的函数 (set_acls())。

为了简化权限，我们将有一个函数 (easy_permissions()) 将 R、RX、M、F 权限转换为权限位掩码。

一旦我们得到它，我们可能只是将 os.listdir 递归到一个目录中（使用 get_files_recursive()），并在 PermissionError 上执行一个函数来处理权限。完成此操作后，只需再次遍历所有文件并相应地设置权限。

底层代码：

```
import os
from fnmatch import fnmatch
from itertools import chain
import win32api
import win32security
import ntsecuritycon
import pywintypes

def glob_path_match(path, pattern_list):
    """
    Checks if path is in a list of glob style wildcard paths
    :param path: path of file / directory
    :param pattern_list: list of wildcard patterns to check for
    :return: Boolean
    """
    return any(fnmatch(path, pattern) for pattern in pattern_list)

def get_files_recursive(root, d_exclude_list=None, f_exclude_list=None,
                    ext_exclude_list=None, ext_include_list=None,
                    depth=0, primary_root=None, fn_on_perm_error=None,
                    include_dirs=False):
"""
Walk a path to recursively find files
Modified version of https://stackoverflow.com/a/24771959/2635443 that includes exclusion lists
and accepts glob style wildcards on files and directories
:param root: (str) path to explore
:param include_dirs: (bool) should output list include directories
:param d_exclude_list: (list) list of root relative directories paths to exclude
:param f_exclude_list: (list) list of filenames without paths to exclude
:param ext_exclude_list: list() list of file extensions to exclude, ex: ['.log', '.bak'],
       takes precedence over ext_include_list
:param ext_include_lsit: (list) only include list of file extensions, ex: ['.py']
:param depth: (int) depth of recursion to acheieve, 0 means unlimited, 1 is just the current dir...
:param primary_root: (str) Only used for internal recursive exclusion lookup, don't pass an argument here
:param fn_on_perm_error: (function) Optional function to pass, which argument will be the file / directory that has permission errors
:return: list of files found in path
"""

# Make sure we don't get paths with antislashes on Windows
if os.path.isdir(root):
    root = os.path.normpath(root)
else:
    return root

# Check if we are allowed to read directory, if not, try to fix permissions if fn_on_perm_error is passed
try:
    os.listdir(root)
except PermissionError:
    if fn_on_perm_error is not None:
        fn_on_perm_error(root)

# Make sure we clean d_exclude_list only on first function call
if primary_root is None:
    if d_exclude_list is not None:
        # Make sure we use a valid os separator for exclusion lists
        d_exclude_list = [os.path.normpath(d) for d in d_exclude_list]
    else:
        d_exclude_list = []
if f_exclude_list is None:
    f_exclude_list = []
if ext_exclude_list is None:
    ext_exclude_list = []

def _find_files():
    try:
        if include_dirs:
            yield root
        for f in os.listdir(root):
            file_ext = os.path.splitext(f)[1]
            if os.path.isfile(os.path.join(root, f)) and not glob_path_match(f, f_exclude_list) \
                and file_ext not in ext_exclude_list \
                and (file_ext in ext_include_list if ext_include_list is not None else True):
                yield os.path.join(root, f)

    except PermissionError:
        pass

def _find_files_in_dirs(depth):
    if depth == 0 or depth > 1:
        depth = depth - 1 if depth > 1 else 0
        try:
            for d in os.listdir(root):
                d_full_path = os.path.join(root, d)
                if os.path.isdir(d_full_path):
                    # p_root is the relative root the function has been called with recursively
                    # Let's check if p_root + d is in d_exclude_list
                    p_root = os.path.join(primary_root, d) if primary_root is not None else d
                    if not glob_path_match(p_root, d_exclude_list):
                        files_in_d = get_files_recursive(d_full_path,
                                                         d_exclude_list=d_exclude_list,
                                                         f_exclude_list=f_exclude_list,
                                                         ext_exclude_list=ext_exclude_list,
                                                         ext_include_list=ext_include_list,
                                                         depth=depth, primary_root=p_root,
                                                         fn_on_perm_error=fn_on_perm_error,
                                                         include_dirs=include_dirs)
                        if include_dirs:
                            yield d
                        if files_in_d:
                            for f in files_in_d:
                                yield f

        except PermissionError:
            pass

# Chain both generators
return chain(_find_files(), _find_files_in_dirs(depth))

def get_binary_sid(string=None):
    """
    Wrapper function that returns PySID object from SID identifier or username
    If none given, we'll get current user

    :param string: (str) SID identifier or username
    :return: (PySID) object
    """
    if string is None:
        string = win32api.GetUserName()
    if string.startswith('S-1-'):
        # Consider we deal with a sid string
        return win32security.GetBinarySid(string)
    else:
        # Try to resolve username
        # LookupAccountName returns tuple (user, domain, type)

        try:
            user, _, _ = win32security.LookupAccountName('', string)
            print(user)
            return user
        except pywintypes.error as e:
            raise OSError('Cannot map security ID: {0} with name. {1}'.format(string, e))

def set_file_owner(path, owner=None, force=False):
    """
    Set owner on NTFS files / directories
    https://stackoverflow.com/a/61009508/2635443

    :param path: (str) path
    :param owner: (PySID) object that represents the security identifier. If not set, current security identifier will be used
    :param force: (bool) Shall we force take ownership
    :return:
    """
    try:
        hToken = win32security.OpenThreadToken(win32api.GetCurrentThread(),
                                               win32security.TOKEN_ALL_ACCESS, True)

    except win32security.error:
        hToken = win32security.OpenProcessToken(win32api.GetCurrentProcess(),
                                                win32security.TOKEN_ALL_ACCESS)
    if owner is None:
        owner = win32security.GetTokenInformation(hToken, win32security.TokenOwner)
    prev_state = ()
    if force:
        new_state = [(win32security.LookupPrivilegeValue(None, name),
                      win32security.SE_PRIVILEGE_ENABLED)
                     for name in (win32security.SE_TAKE_OWNERSHIP_NAME,
                                  win32security.SE_RESTORE_NAME)]
        prev_state = win32security.AdjustTokenPrivileges(hToken, False,
                                                         new_state)
    try:
        sd = win32security.SECURITY_DESCRIPTOR()
        sd.SetSecurityDescriptorOwner(owner, False)
        win32security.SetFileSecurity(path, win32security.OWNER_SECURITY_INFORMATION, sd)
    except pywintypes.error as e:
        # Let's raise OSError so we don't need to import pywintypes in parent module to catch the exception
        raise OSError('Cannot take ownership of file: {0}. {1}.'.format(path, e))
    finally:
        if prev_state:
            win32security.AdjustTokenPrivileges(hToken, False, prev_state)

def easy_permissions(permission):
    """
    Creates ntsecuritycon permission bitmask from simple rights

    :param permission: (str) Simple R, RX, RWX, F  rights
    :return: (int) ntsecuritycon permission bitmask
    """
    permission = permission.upper()
    if permission == 'R':
        return ntsecuritycon.GENERIC_READ
    if permission == 'RX':
        return ntsecuritycon.GENERIC_READ | ntsecuritycon.GENERIC_EXECUTE
    if permission in ['RWX', 'M']:
        return ntsecuritycon.GENERIC_READ | ntsecuritycon.GENERIC_WRITE | ntsecuritycon.GENERIC_EXECUTE
    if permission == 'F':
        return ntsecuritycon.GENERIC_ALL
    raise ValueError('Bogus easy permission')

def set_acls(path, user_list=None, group_list=None, owner=None, permission=None, inherit=False, inheritance=False):
    """
    Set Windows DACL list

    :param path: (str) path to directory/file
    :param user_sid_list: (list) str usernames or PySID objects
    :param group_sid_list: (list) str groupnames or PySID objects
    :param owner: (str) owner name or PySID obect
    :param permission: (int) permission bitmask
    :param inherit: (bool) inherit parent permissions
    :param inheritance: (bool) apply ACL to sub folders and files
    """
    if inheritance:
        inheritance_flags = win32security.CONTAINER_INHERIT_ACE | win32security.OBJECT_INHERIT_ACE
    else:
        inheritance_flags = win32security.NO_INHERITANCE

    security_descriptor = {'AccessMode': win32security.GRANT_ACCESS,
                           'AccessPermissions': 0,
                           'Inheritance': inheritance_flags,
                           'Trustee': {'TrusteeType': '',
                                       'TrusteeForm': win32security.TRUSTEE_IS_SID,
                                       'Identifier': ''}
                           }

    # Now create a security descriptor for each user in the ACL list
    security_descriptors = []

    # If no user / group is defined, let's take current user
    if user_list is None and group_list is None:
        user_list = [get_binary_sid()]

    if user_list is not None:
        for sid in user_list:
            sid = get_binary_sid(sid)
            s = security_descriptor
            s['AccessPermissions'] = permission
            s['Trustee']['TrusteeType'] = win32security.TRUSTEE_IS_USER
            s['Trustee']['Identifier'] = sid
            security_descriptors.append(s)

    if group_list is not None:
        for sid in group_list:
            sid = get_binary_sid(sid)
            s = security_descriptor
            s['AccessPermissions'] = permission
            s['Trustee']['TrusteeType'] = win32security.TRUSTEE_IS_GROUP
            s['Trustee']['Identifier'] = sid
            security_descriptors.append(s)

    try:
        sd = win32security.GetNamedSecurityInfo(path, win32security.SE_FILE_OBJECT,
                                                win32security.DACL_SECURITY_INFORMATION | win32security.UNPROTECTED_DACL_SECURITY_INFORMATION)
    except pywintypes.error as e:
        raise OSError('Failed to read security for file: {0}. {1}'.format(path, e))
    dacl = sd.GetSecurityDescriptorDacl()
    dacl.SetEntriesInAcl(security_descriptors)

    security_information_flags = win32security.DACL_SECURITY_INFORMATION

    if not inherit:
        # PROTECTED_DACL_SECURITY_INFORMATION disables inheritance from parent
        security_information_flags = security_information_flags | win32security.PROTECTED_DACL_SECURITY_INFORMATION
    else:
        security_information_flags = security_information_flags | win32security.UNPROTECTED_DACL_SECURITY_INFORMATION

    # If we want to change owner, SetNamedSecurityInfo will need win32security.OWNER_SECURITY_INFORMATION in SECURITY_INFORMATION
    if owner is not None:
        security_information_flags = security_information_flags | win32security.OWNER_SECURITY_INFORMATION
        if isinstance(owner, str):
            owner = get_binary_sid(owner)

    try:
        # SetNamedSecurityInfo(path, object_type, security_information, owner, group, dacl, sacl)
        win32security.SetNamedSecurityInfo(path, win32security.SE_FILE_OBJECT,
                                           security_information_flags,
                                           owner, None, dacl, None)
    except pywintypes.error as e:
        raise OSError

def take_ownership_recursive(path, owner=None):
    def take_own(path):
        nonlocal owner
        try:
            set_file_owner(path, owner=owner, force=True)
        except OSError:
            print('Permission error on: {0}.'.format(path))

    files = get_files_recursive(path, include_dirs=True, fn_on_perm_error=take_own)
    for file in files:
        set_file_owner(file, force=True)

def get_files_recursive_and_set_permissions(path, owner=None, permissions=None, user_list=None):
    def fix_perms(path):
        nonlocal permissions
        nonlocal owner
        nonlocal user_list
        if permissions == None:
            permissions = easy_permissions('F')
        print('Permission error on: {0}.'.format(path))
        try:
            set_acls(path, user_list=user_list, owner=owner, permission=permissions, inheritance=False)
        except OSError:
            # Lets force ownership change
            try:
                set_file_owner(path, force=True)
                # Now try again
                set_acls(path, user_list=user_list, owner=owner, permission=permissions, inheritance=False)
            except OSError as e:
                print('Cannot fix permission on {0}. {1}'.format(path, e))

    files = get_files_recursive(path, include_dirs=True, fn_on_perm_error=fix_perms)
    for file in files:
        set_acls(file, user_list=user_list, owner=owner, permission=easy_permissions('F'), inheritance=False) 
```

以下是如何使用代码的一些示例：

```
# Recursively set owner
take_ownership_recursive(r'C:\MYPATH', owner=get_binary_sid('MyUser'))

# Recursively set permissions
get_files_recursive_and_set_permissions(r'C;\MYPATH', permissions=easy_permissions('F'), user_list=['MyUser', 'MyOtherUser'])

# Recursively set permissions with inheritance
get_files_recursive_and_set_permissions(r'C:\MYPATH', permissions=easy_permissions('RX'), user_list=['S-1-5-18'], inheritance=True)

# Set permissions
set_acls(r'C:\MYPATH', permissions=easy_permissions('F'), user_list['MyUser'])

# Take ownership
set_file_owner(r'C:\MYPATH', owner=get_binary_sid('MyUser'), Force=True) 
```

非常感谢 Eryk Sun 发表的所有关于在 Python 中处理 win32security 文件的帖子，这些帖子使得编写正确的代码成为可能。请参阅[https://stackoverflow.com/a/43244697/2635443](https://stackoverflow.com/a/43244697/2635443)和[https://stackoverflow.com/a/61009508/2635443](https://stackoverflow.com/a/61009508/2635443)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-06T15:32:11.227

这是最简单的解决方案（您还可以指定用户并添加修改权限）：

```
command = r'icacls "C:\Users\PC\PycharmProjects\IIS_configuration\someFolder" /grant "userA":(OI)(CI)RWRXM'
appcmd = subprocess.run(command, shell=True, check=True) 
```

要查看它是如何工作的，您可以通过 CMD 运行：

```
icacls "C:\Users\PC\PycharmProjects\IIS_configuration\someFolder" /grant "userA":(OI)(CI)RWRXM 
```

[我使用了 icacls（windows 命令）——您可以在此处](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/icacls)和[此处](https://stackoverflow.com/questions/2928738/how-to-grant-permission-to-users-for-a-directory-using-command-line-in-windows)找到有关它的信息。

然后我只是用 python[子进程运行了这个命令](https://docs.python.org/3/library/subprocess.html)

有关此特定命令的信息：

*   “C:\Users\PC\PycharmProjects\IIS_configuration\someFolder”-dst
*   userA - 用户名
*   (OI) - 对象继承
*   (CI) - 容器继承
*   RWRXM - 每个词都标志着一个前提。就像 R 被读取，而 RX 被读取并执行访问（[这里](https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/icacls)的信息）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-07T18:56:16.367

可以使用[Python for .NET](http://pythonnet.github.io/)包分配 Windows 文件夹权限。这个包让程序员可以直接在 Python 中使用 .NET 结构。这种方法的一个优点是强大的 .NET 在线文档，这将有助于识别特定的函数调用和使用权限。例如，所有可能的文件/文件夹权限都记录在[FileSystemRights](https://docs.microsoft.com/en-us/dotnet/api/system.security.accesscontrol.filesystemrights) Enum 的文章中。

请注意，尝试将“None”的枚举值直接作为属性访问会导致 Python 语法错误。该`getattr()`函数可用作解决方法。

```
import clr
import System

from System.IO import Directory
from System.Security.AccessControl import (
    AccessControlType,
    FileSystemAccessRule,
    FileSystemRights,
    InheritanceFlags,
    PropagationFlags,
)

path = r"C:\path\to\folder"
accessControl = Directory.GetAccessControl(path)
accessRule = FileSystemAccessRule(
    "UserX",
    FileSystemRights.Modify | FileSystemRights.Synchronize,
    InheritanceFlags.ContainerInherit | InheritanceFlags.ObjectInherit,
    getattr(PropagationFlags, "None"),
    AccessControlType.Allow,
)
accessControl.AddAccessRule(accessRule)
Directory.SetAccessControl(path, accessControl) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-28T22:05:26.497

使用 os.chmod

[http://docs.python.org/library/os.html#os.chmod](http://docs.python.org/library/os.html#os.chmod)

您可以使用 os.chmod 设置权限

mod是用base 8写的，如果你把它转换成二进制，那就是

000 111 111 000 rwx rwx rwx 第一个rwx是所有者，第二个是组，第三个是世界

r=读，w=写，x=执行

您最常看到的权限是 7 读/写/执行 - 您需要执行目录才能看到内容 6 读/写 4 只读

当您使用 os.chmod 时，使用八进制表示法最有意义，所以

```
os.chmod('myfile',0o666)  # read/write by everyone
os.chmod('myfile',0o644)  # read/write by me, readable for everone else 
```

请记住，我说过您通常希望目录是“可执行的”，以便您可以查看内容。

```
os.chmod('mydir',0o777)  # read/write by everyone
os.chmod('mydir',0o755)  # read/write by me, readable for everone else 
```

注意： 0o777 的语法适用于 Python 2.6 和 3+。否则 2 系列为 0777。 2.6 接受任一语法，因此您选择的语法取决于您是要向前兼容还是向后兼容。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-29T18:12:48.950

对于初学者，如果用户的配置文件目录不存在，则会自动创建它，并将权限设置为合理的默认值。除非您特别需要使用 python，否则您可以让 windows 为您创建文件夹并整理权限。

如果您仍然希望使用 python，您可以考虑使用 os.system() 来调用具有正确参数的 cacls 或 icacls。而不是权限，您可能只需将文件夹的所有者更改为将拥有该文件夹的用户。

祝你工作顺利。

# windows-8 - 通过 PID 检测在 WinRT 模式下运行的应用程序

> ID：12168113
> 
> 赞同：1
> 
> 时间：2012-08-28T21:59:31.033
> 
> 标签：windows-8, microsoft-metro, windows-runtime

**概述**：
我需要通过进程/PID 检测给定的应用程序是否在 WinRT（又名“Metro”）模式下运行。有没有这样做的好方法？

**失败的尝试和观察**：

*   OpenProcess() 并调用 Call [GetPackageId()](http://msdn.microsoft.com/en-us/library/windows/desktop/hh446607%28v=vs.85%29.aspx)检查！= APPMODEL_ERROR_NO_PACKAGE：这似乎适用于某些进程，而其他进程（例如 Chrome）在 Metro 模式下运行时无法通过检查。
*   Metro 应用似乎总是由 svchost.exe 托管（例如它们的父级）

有任何想法吗？请省略任何“不要那样做”或“为什么？” 回答，因为它们对这个特定问题没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T23:23:08.930

[`IsImmersiveProcess`](https://docs.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-isimmersiveprocess)如果进程在 Metro Mode 下运行，则返回 true。请注意，如果检测应用程序作为服务运行，则此调用始终返回 false。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-24T19:56:06.823

如果 Metro 应用程序正在运行 WWA Applet，则从 PID 获取命令行参数并查看它是否为 WWAHOST.exe。例如，并非所有 Metro 应用程序都作为 WWA 小程序运行，IE 在 Metro 模式下作为独立 exe 运行。

这听起来可能有点杂乱无章，但对我检测 IE 是否处于 Metro 模式很有用。Metro模式下的IE进程仍然是iexplore.exe。Metro 模式下的根父进程是 Wininit.exe，非 Metro 模式下是 explorer.exe。因此，找到 IE PID 的根父 PID，然后从父 PID 获取父进程名称，然后将其与“Wininit.exe”或“Explorer.exe”进行比较

# ember.js - Ember：如何获取类属性

> ID：12168118
> 
> 赞同：4
> 
> 时间：2012-08-28T22:00:11.207
> 
> 标签：ember.js

给定一个带有属性的 Ember 类，如下所示：

```
User = Ember.Object.extend({
  foo: 42
}); 
```

`foo`如果我只有类，我如何访问的值`User`？我不想`.create`实例化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T22:18:45.750

哼，试试看：

```
Ember.keys(User.proto()).forEach(function(prop){console.log(Ember.get(User.proto(), prop))}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-12T23:35:45.583

我已经解决了：

```
User.proto().foo 
```

# actionscript-3 - 粘性空错误参考

> ID：12168120
> 
> 赞同：0
> 
> 时间：2012-08-28T22:00:17.417
> 
> 标签：actionscript-3, flash, null

我在“while”循环的行收到空引用错误......总是......我做什么都没关系。

```
if (Main.XCB.xArray!= null) {
    i = 0;
    while (i < Main.XCB.xArray.length){ 
```

即使 xArray 为空，它仍然会丢弃错误...但是为什么呢？它应该阻止它。这样做从来没有问题，但现在，一切都毁了......即使我用变量检查它，我也无法阻止它，也不能阻止这个函数。

任何想法？

# javascript - 使用自定义 DatePicker 进行 Jquery 验证

> ID：12168124
> 
> 赞同：0
> 
> 时间：2012-08-28T22:00:28.090
> 
> 标签：javascript, jquery, jquery-validate, coffeescript

现在我有一个我正在尝试进行验证的自定义日期选择器。具体来说，我正在尝试检查 startDate 字段是否在 endDate 字段之前。

当我点击我的日期选择器并填充我的输入字段时，我需要点击我的字段，然后在消息出现之前离开该字段。我认为这是因为 jquery validate 正在侦听 keyup 事件，而不是输入字段中的 change 事件。

这是我的代码（用咖啡编写，但我会接受 javascript 答案）-

```
validateSearchForm:=>
$(@el).find("#searchForm").validate({
  rules:{
    startDateInputBox:{
      dateISO:true,
      lessThan: true
    },
    endDateInputBox:{
      dateISO:true
      lessThan: true
    }
    searchPurposeBox:"required"
 }
}); 
```

小于是 -

```
jQuery.validator.addMethod "lessThan", ((value, element) ->
  validDateFormat = /(\d{4})-(\d{2})-(\d{2})/
  startDateInput = $("#startTime").val()
  endDateInput = $("#endTime").val()
  startDateMatch = startDateInput.match(validDateFormat)
  endDateMatch = endDateInput.match(validDateFormat)
  startDateYear = startDateMatch[1]
  startDateMonth = startDateMatch[2]
  startDateDay = startDateMatch[3]
  endDateYear = endDateMatch[1]
  endDateMonth = endDateMatch[2]
  endDateDay = endDateMatch[3]
  startDate = new Date(startDateYear,startDateMonth,startDateDay)
  endDate = new Date(endDateYear,endDateMonth,endDateDay)
  if endDate < startDate
    return false
  return true
), "Start time has to be before end time" 
```

如何做到这一点，以便当我点击我的日期选择器并用错误的值填充我的字段时，错误消息会立即出现？我试过onkeyup，但这并不能解决问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T18:13:10.800

我之前所做的是挂钩到 datepicker 的 onClose 事件（如果有，我知道 jQuery UI datepicker 有 onClose），然后调用类似

```
$("#searchForm input[name='startDateInputBox']").valid() 
```

# php - 从此字符串创建日期时间对象？

> ID：12168127
> 
> 赞同：3
> 
> 时间：2012-08-28T22:00:37.647
> 
> 标签：php, datetime

我遇到了一个小的编程问题。我需要做一些时间计算，但作为输入，我只有一个字符串 - 所以基本上我需要将此字符串转换为 PHP 中的日期/时间对象。这是我遇到麻烦的转换。

```
$endtimestamp = "September 1, 2012 13:00 PM";

$doesntwork = strtotime(trim($endtimestamp));
$doesntwork2 = date_create_from_format("l, F j, Y G:i A", $endtimestamp);
$doesntwork3 = date("l, F j, Y G:i A", strtotime($endtimestamp)); 
```

老实说，我不知道为什么这些功能不能按预期工作。到目前为止，其他在线资源充其量是模糊的。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T22:04:59.237

发生这种情况是因为你`l,`一开始就有一些奇怪的东西

如果您使用这种格式：

```
'F j, Y G:i A' 
```

它工作正常

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T22:06:15.567

这里有2个问题。

一是`13:00 PM`没有任何意义。要么`1:00 PM` *要么* `13:00`。

```
strtotime("September 1, 2012 13:00"); 
```

此外，您的格式`l, F j, Y G:i A`与您的输入字符串不匹配。

格式应该是: `F j, Y G:i A`，或者字符串应该是`Saturday, September 1, 2012 13:00 PM`.

# objective-c - 绕过子类化 UIView 并在 Storyboard 中使用图片

> ID：12168129
> 
> 赞同：0
> 
> 时间：2012-08-28T22:00:52.347
> 
> 标签：objective-c, arrays, uiimageview, storyboard, subclass

我正在尝试编写我的第一个 iPhone 应用程序，但我遇到了一种设计难题。我想要做的是有一个图标网格，当你触摸一个时，上面和左边的所有图标都会“激活”，而下面和右边的所有图标都会“停用”。如果一个图标被激活，它会显示一张图片，如果它没有被激活，它会显示另一张。

我遇到的问题是我想为这些单独的图标中的每一个分配一个手势识别器，当点击该图标时，它需要调用一个函数来更新我的图标网格。但是为了正确更新，该函数需要将图像在网格中的位置作为参数传递，并且无法调用带有参数的函数作为手势识别器的一部分。

所以我真正需要做的就是扩展 UIImageView 以保存两个额外的整数和它包含的网格，然后我可以有以下代码：

```
imageView.userInteractionEnabled = YES;
UITapGestureRecognizer *tapgr = [[UITapGestureRecognizer alloc] initWithTarget:
    self action:@selector(handleTap)];
[imageView addGestureRecognizer:tapgr];
:
:
- (void)handleTap
{
  [self.grid updateTableFromRow:self.row andCol:self.col
} 
```

所以我想这是一种方法，但有人告诉我，我不应该在 Objective-C 中扩展类，我应该从头开始构建它们。在这种情况下，我只需使用我需要的所有属性和/或实例变量创建一个自定义视图，然后我将使用 UIImageView 填充此自定义视图。

这大部分都很好，除了构建我的故事板时。我将管理和创建此图标表（以编程方式）的所有代码放在另一个自定义视图 GridOfIconsView 中。因此，在 Storyboard 上，我拖出一个自定义视图并设置为 GridOfIconsView，但随后我只看到一个大的白色矩形，我真的希望能够在 Storyboard 中可视化我的应用程序。我知道我可以将用于图标的实际图像文件拖到 Storyboard 上并将它们设置为自定义视图，但那是如何工作的呢？该图像只是自定义视图的背景吗？我可以以编程方式更改它吗？因此，如果激活的图像是绿色方块，而停用的图像是红色的，并且我最初将红色方块拖到情节提要中，我可以访问那个红色方块图像吗？

一个更令人担忧的问题是，我想在一个数据结构中管理所有这些图标，或者作为二维数组（id icons[][]）或 NS（Mutable？）Array 的 NS（Mutable？）Arrays。无论哪种方式，我如何初始化数据结构以包含所有这些的链接？网格可能是 8x8 或 10x10，我不可能有 64-100 个@propertys 连接这些图标。我在想明智地组织这个的唯一方法是以编程方式，但是，我怎样才能在 Storyboard 中可视化它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:18:29.097

首先，在 Objective-C 中扩展类完全没问题，而且一直都在这样做。`UIView`, `UIViewController`, `UIComponent`, 等等，都是专门为子类和扩展而设计的。

但是，有两种方法可以做到这一点，它们比扩展类要简单得多。首先，您可以像已经做的那样拥有网格，其中每个视图都附加了一个手势识别器，该手势识别器回调视图控制器上的方法。然后，您可以在每个视图上设置一个标签（甚至只使用视图的框架进行识别），并从回调方法中读取它（手势识别器被传递回回调方法）。例如，假设您有一个 4x4 视图的网格，您只需从左上​​角开始对它们进行编号，将每列向右推进，然后将每一行从 0 到 11，您可以轻松地识别视图：

```
// The system automatically passes the gesture recognizer as the only parameter
- (void)handleTap:(UIGestureRecognizer)gestureRecognizer
{
  NSInteger viewNumber = [[gestureRecognizer view] tag];
  // do something with this view
} 
```

另一种方法是在父视图上有一个手势识别器，然后在你的`-handleTap:`回调中，查询视图中点击的位置。如果该职位在您的任何观点的框架内，您就会知道是哪一个以及如何处理它。如果没有，你可以忽略它。这个解决方案需要更多的数学运算，但也需要更少的维护和需要连接的手势识别器。我会推荐这个解决方案而不是标记你的观点。

# vb.net - VB.NET 中的 Excel 互操作程序集错误 80040154

> ID：12168132
> 
> 赞同：0
> 
> 时间：2012-08-28T22:01:14.720
> 
> 标签：vb.net, excel, interop, ms-office

对于视觉的人：

[![](../Images/5440adc5f6d69e8a2ca94b7886ddd1b5.png)](https://i.stack.imgur.com/OBbOJ.png)

在第 61 行：

[![](../Images/1225d9e6283a5b5cf249bf10b0a287a7.png)](https://i.stack.imgur.com/xRaQm.png)

我在网上找到的所有内容都是该问题的 3 个解决方案之一：

1.  用户正在尝试使用未安装 Excel 的互操作程序集。我安装了 M$ office pro 2010。所以这不是问题。
2.  我没有打出来，但你可以看[这里](https://web.archive.org/web/20130515210838/http://blog.crowe.co.nz/archive/2006/03/02/589.aspx)
3.  用户在 64 位运行互操作程序集，我在 32 位机器上。所以这无关。但我确实尝试编译为 32 位而不是任何 CPU。没有帮助。

基本上修复＃2是针对那些在服务器上运行此代码并且他们的代码在ASP用户帐户下执行的人，在我的情况下它是一个桌面应用程序，所以这应该是无关的，但在绝望中我添加了“每个人”的权限并给了他们所有特权。没用。

所以现在我转向这里。有任何问题、意见和疑虑吗？

# ruby - prettify_json.rb 在 zsh 的命令行中不起作用

> ID：12168134
> 
> 赞同：1
> 
> 时间：2012-08-28T22:01:18.460
> 
> 标签：ruby, zsh

我不断`Command Not Found: prettify_json.rb`从命令行获取。我正在使用`zsh`，`rvm`所以我不确定它是否与我的`.zshrc`. 我已将其与此处存在类似问题的其他一些问题进行了比较，但我看不到问题。

这是`.zshrc`文件：

```
ZSH=$HOME/.oh-my-zsh
alias vi="vim"

source $ZSH/oh-my-zsh.sh
source ~/.git-flow-completion.zsh

export PATH=/opt/local/bin:/opt/local/sbin:$PATH
export PATH=/usr/local/bin:$PATH
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-13T14:38:57.210

json gem 可能没有附带 prettify_json.rb。但它在 json-utils gem 中可用。尝试`gem install json-utils`

# mysql - MySQL 查询和 2 个单独的表

> ID：12168139
> 
> 赞同：1
> 
> 时间：2012-08-28T22:01:30.347
> 
> 标签：mysql

所以我在 MySQL 数据库中有 2 个表，一个用于“Users”，另一个用于“Orders”，其中 Orders 中的每个条目都是用户下的订单（有些用户可以有多个订单，而有些用户可能没有） . 我正在处理报告查询，我想要的报告之一是从未下过任何订单的用户列表。当谈到 MySQL 查询时，我仍然是一个初学者，所以我不知道如何做这个。如果有任何不同，查询将通过 PHP 放置。

这是我在每个表中的列（简化）：

用户：

```
ID
Name 
```

订单：

```
OrderID
OrderName
CustomerID      (corresponds to User.ID that placed the order) 
```

这里的任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:08:25.337

在 Orders 上使用 a`LEFT JOIN`并检查 OrderId 是否为空：

```
SELECT U.*
FROM
 Users U
 LEFT JOIN Orders O ON(U.ID = O.CustomerID)
WHERE
 O.OrderId IS NULL 
```

[SQLFiddle](http://sqlfiddle.com/#!3/e3a9d/2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:04:33.060

```
SELECT ID, Name
FROM users 
WHERE ID NOT IN (SELECT DISTINCT customerID FROM Orders) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T22:09:35.673

所以基本上你正在寻找不是由该用户发出的订单

```
Select * from Orders where CustomerID = 5 //5 is the id of the custumer 
```

如果您正在按名称进行搜索

```
Select * from Orders LEFT JOIN Users on Users.ID Where Users.name ='Mark' 
```

如果没有结果，则意味着客户从未订购过任何东西

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T22:19:29.417

尝试

```
SELECT U.*
FROM   Orders a
           RIGHT JOIN Users b 
               ON b.ID = a.CustomerID
WHERE  a.OrderId IS NULL 
```

# php - 如何用点击按钮链接两个页面htm？

> ID：12168141
> 
> 赞同：-1
> 
> 时间：2012-08-28T22:01:36.170
> 
> 标签：php, html, button, onclick

我有这个代码：

```
 <a href="init.php">

        <input name="Submit" type="submit" class="Style9" value="Se connecter" onclic= "<?php include("D:/EasyPHP-5.3.3.1/www/conn.php"); ?> " /></a> 
```

我想在单击按钮后调用 conn.php 并传递给页面 init.php 在这里我可以调用 conn.php 但我无法传递给 init.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:15:18.490

尝试这个：

```
<form method="POST" name="test" action="init.php">
  <input type="submit" name="Submit" class="Style9" value="Se connecter" />
</form> 
```

然后在 init.php 中包含 conn.php 文件。

```
<?php include("D:/EasyPHP-5.3.3.1/www/conn.php"); ?> 
```

# git - GIT Log - 在日志中显示标签（标签：tagged_version_number）

> ID：12168142
> 
> 赞同：0
> 
> 时间：2012-08-28T22:01:41.627
> 
> 标签：git

我有一个运行 git 命令来显示我的日志。它主要按设计工作，但是我注意到当我使用 --oneline 运行更简化的版本时，它会更好地显示标记的条目。在 --oneline 版本中，我返回（标签：12.8.16.1）而不是（12.8.16.1）。我想修改 --oneline 版本以包含作者或修复我当前的命令，以便将标签显示为 (tag:xxxx)

我想修改以包含的命令（标签：xxxx）

```
git log 12.6.22.1.. --pretty=format:"%an %C(yellow)%h %Cred%ad %Cgreen%d %Creset%s"  --date=short  testfile.xml

Smith e8995d2 2012-07-10  (12.8.16.1, origin/BUG_23213) Fix issue with bad code 
Jones 1bf9013 2012-07-03  FEATURE 1232 - added some new stuff 
```

这是简单的 --oneline 版本的示例。它工作正常，除了我想添加作者。

```
git log 12.6.22.1.. --oneline --no-merges --decorate=short testfile.xml

 68b52ac PROJ 12311 - Adding field to report page
 37629d2 (tag: 12.8.16.1) Tagging for release
 0a8f43b (origin/BF_12312) Update timer to deal with milliseconds 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T04:06:30.453

试试[拉皮条的 git log alias](http://www.jukie.net/bart/blog/pimping-out-git-log)。它有漂亮的单行/作者格式。这是完整的命令：

```
git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --date=relative 
```

# css - 浮动div的内容垂直居中

> ID：12168145
> 
> 赞同：27
> 
> 时间：2012-08-28T22:02:06.917
> 
> 标签：css, css-float, css-position, vertical-alignment

如何将浮动 div 的内容垂直居中（我不知道哪个高度）？

有非常简单的 HTML 和 CSS（见这个小提琴：http: [//jsfiddle.net/DeH6E/1/](http://jsfiddle.net/DeH6E/1/)）

```
<div class="floating">
    This should be in the middle
</div>
​
.floating {
    height: 100px;
    float: left;
    border: 1px solid red;
    vertical-align: middle;
}   ​ 
```

如何使“这应该在中间”这句话真正出现在中间（垂直居中）？`vertical-align: middle`似乎不起作用。我已经尝试过`display: table-cell`，它也没有工作。解决此问题的最佳方法是什么？我想避免插入任何其他 HTML 标签，只需通过 CSS 即可。

（只是为了说清楚：我不知道容器的实际高度，100px 仅用于示例）

**编辑：**我希望你能理解我，所以... 当我设计网页时，我总是遵循 HTML 保存内容而 CSS 负责视觉样式的规则。我从不将它们混合在一起，或者只使用一个来启用另一个。在这种情况下，我也想坚持这条规则。我不想仅为 CSS 插入 HTML 元素。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-28T23:20:49.560

其他的都是对的，[您需要嵌套两个 DOM 元素](http://jsfiddle.net/FYX74/)，这为您提供了更多控制居中的选项。这是代码：

```
.floating {
  display: table;
  float: right;
  height: 200px;
  width: 400px;
  border: 1px solid red;
}
.floating p {
  display: table-cell; 
  vertical-align: middle; 
  text-align: center;
}
```

```
<div class="floating">
    <p>This is the proper way that validates and breaks across multiple
    lines, if the text is longer than just a few words and still
    should be vertically centered. Here, it's also horizontally
    centered for added joy.</p>
</div>
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-28T22:11:18.770

在`<p>`.

**HTML**

```
<div class="floating">
    <p>This should be in the middle</p>
</div> 
```

**CSS**

```
.floating {
    height: 100px;
    border: 1px solid #f00;
    display: table-cell;
    vertical-align: middle;
}
​ 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-28T22:17:26.380

如果你知道高度，那么

```
line-height:100px; 
```

如果没有，请在渲染后使用 javascript 设置行高。

[http://jsfiddle.net/DeH6E/4/](http://jsfiddle.net/DeH6E/4/)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-12-04T21:05:16.493

我也在寻找解决方案，最终想出了这个：

[http://jsfiddle.net/w6j9mgjp/1/](http://jsfiddle.net/w6j9mgjp/1/)

```
.floating {
    height: 100px;
    float: left;
    border: 1px solid red;
}

.floating::before {
    content: "a";
    display: block;
    visibility: hidden;
    height: 50%;
    margin-top: -.7em;
} 
```

不过，它仅适用于单行文本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T22:10:54.450

[http://jsfiddle.net/DeH6E/2/](http://jsfiddle.net/DeH6E/2/)

div 内的文本需要在其自己的 div 标签中，并且该 div 标签需要设置为 display:table-cell; 和垂直对齐：中间；而您的 .floating div 需要设置为 display:table;

或者您可以在其中设置 ap 标签或其他格式的标签来包含您的文本，例如 span 或 p

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-23T18:17:30.900

只需使用伪选择器即可。

```
.floating {
    height: 100px;
    float: left;
    border: 1px solid red;
}

.floating::before {
    content: '';
    display: inline-block;
    vertical-align: middle;
    height: 100%;
} 
```

# sikuli - 如果我在 Windows 中制作 sikuli 脚本，相同的脚本是否可以在 Linux 中使用？

> ID：12168151
> 
> 赞同：3
> 
> 时间：2012-08-28T22:02:56.273
> 
> 标签：sikuli

我目前正在寻找一种工具来测试 aa 网站，Sikuli 似乎很完美。但是，我的公司同时使用 Windows 和 Linux，我希望我们的脚本可以转移。

它会起作用还是适用于 Windows 的 Windows 脚本和适用于 Linux 的 Linux 脚本？似乎 Sikuli 可以从命令行运行[，](http://doc.sikuli.org/faq/010-command-line.html)也许我可以在 Linux 和 Windows 计算机上运行相同的脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T00:09:18.143

Sikuli 脚本不能在两个操作系统下运行没有技术原因（jython 在两个平台上具有相同的语法）。面临的最大技术问题是 Windows 和 Linux 之间的屏幕截图可能不匹配。

该[线程](https://stackoverflow.com/questions/9641327/what-are-strategies-to-construct-reusable-sikuli-screen-shot-libraries/9642562#9642562)讨论了如何设置两个图像池，每个操作系统一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-14T10:55:56.183

主要有两点需要关注：

1.  图像：即使应用程序在两个系统中看起来相同，启动它的方式也不同。在最坏的情况下，需要两套完整的图像。

2.  路径：在 Windows 和 Linux 中路径是不同的。不同的斜线，不同长度的整个路径和组件，命名中允许的不同符号集。默认情况下，Windows 路径不区分大小写。

有一些要点仍然可以使用相同的脚本和一组操作系统特定的库。- 应用程序中的通用逻辑越多，可重用的代码就越多。- 政策“两个平台都必须改变一些东西”。很容易理解。

所以你的问题的答案是：特别准备的脚本可以在两个平台上运行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-10T15:41:15.627

直接在 java 中创建 Sikuli scipts 可能会缓解跨平台问题。但是您仍然会看到图像看起来略有不同的问题。不过，文件目录在 java 中的操作系统上处理得很好。

# php - 如何在php中将表单转换为可附加的电子邮件文件

> ID：12168154
> 
> 赞同：0
> 
> 时间：2012-08-28T22:03:13.340
> 
> 标签：php, file, email

所以我有一个表格，可以发送与他们填写表格的方式相对应的电子邮件。我必须获取一些填写在表单中的信息，并将其放入 HTML 表单中以发送电子邮件，该电子邮件是用 php 完成的。

我的问题是，有没有办法将该表单转换为一个可附加的文件，该文件可以添加到邮件功能中并改为发送？

感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:13:46.530

[Swift Mailer](http://swiftmailer.org/)集成到任何用 PHP 5 编写的 Web 应用程序中，提供了一种灵活而优雅的面向对象的方法来发送具有多种功能（包括附件）的电子邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:14:54.610

是的，您可以将您的 HTML 表单转换为... HTML 页面（手动使用 HTML 令牌，或者可能使用 TCPDF 之类的东西？），并将其保存到临时磁盘文件，然后将其附加到外发电子邮件。当然，你的邮件功能必须支持附件！（如果没有，请使用不同的邮件功能 - 其中有很多）。

您可以通过手动准备表单并将文本字段替换为`{{ Name }}`.

然后只需`str_replace`在`file_get_contents()`模板上运行 a 并将结果保存在临时文件中：

```
 $translate = array(
     '{{ Name }}'    => $Form['Name'],
     ....
 );
 // one could also use preg_replace with 'e' flag and use directly $Form...
 $html = str_replace(array_keys($translate), array_values($translate),
            file_get_contents("form-template.html")); 
```

以同样的方式，您可以准备一个 Word 文档，将其保存为 RTF（ASCII 可读），并附加带有 .doc 扩展名的文件——大多数文字处理器会自动打开它。

如果您想发送 PDF 文件（使用 TCPDF、FPDF 等），它会稍微复杂一些，但不会太多。

# java - 从无效（对于字符集）字节 [] 转换时 Java 字符串的行为（安全性）？

> ID：12168155
> 
> 赞同：1
> 
> 时间：2012-08-28T22:03:21.373
> 
> 标签：java, string

通过构造函数将包含随机二进制数据的 byte[] 转换为 String 是否 100% 安全（异常/无错误）：

```
new String(bytes);
// -- or --
new String(bytes,"UTF-8");  // Or other charset 
```

我担心无效的 UTF-8 字节是否会导致异常或其他故障，而不仅仅是可能部分乱码的消息。

我尝试了一些已知的坏字节值，因为它们似乎按预期工作。例如：

```
byte[] bytes = new byte[] {'a','b','c',(byte)0xfe,(byte)0xfe,(byte)0xff,(byte)0xff,'d','e','f'};

String test = new String(bytes,"UTF-8");

System.out.println(test); 
```

打印“abc????def”。

我担心某些其他组合是否会以其他意想不到的方式失败，因为我不能保证我可以测试每个无效组合。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T22:06:25.950

[文档](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)中对此进行了介绍：

> 此方法始终使用此字符集的默认替换字符串替换格式错误的输入和不可映射的字符序列

如果您不总是使用 UTF-8，将会失败的一件事是它可以抛出[UnsupportedEncodingException](http://docs.oracle.com/javase/6/docs/api/java/io/UnsupportedEncodingException.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T22:55:29.583

如果您想在错误输入上处理解码行为，请使用类似

```
StandardCharsets.UTF_8
  .newDecoder()
  .implOnMalformedInput(CodingErrorAction.REPORT)
  .implOnUnmappableCharacter(CodingErrorAction.REPLACE)
  .implReplaceWith(replacementString)
  .decode(ByteBuffer.wrap(byteArray))
  .toString(); 
```

它可以让您旋转所有涉及的各种旋钮。

# ios - iOS：如何防止多次点击按钮创建多个新实例

> ID：12168158
> 
> 赞同：0
> 
> 时间：2012-08-28T22:03:28.567
> 
> 标签：ios, instance

刚刚注意到我的应用程序有些奇怪。每当我点击一个条形按钮打开一个弹出视图控制器时，如果我再次点击它，它只会打开该 vc 的另一个实例（我可以继续这样做）。

我该如何阻止这个？我是否应该在布尔值处于活动状态时使用布尔值来禁用按钮，然后在用户通过其他方式关闭 VC 时以某种方式重置它（例如点击不是同一个 VC 的部分屏幕）？

尝试了布尔建议：

在我的 prepareForSegue 方法中，我有以下内容：

```
 if(isActive==false){
        InformationViewController *informationViewController = [segue destinationViewController];

        informationViewController.delegate = self;
            isActive = true;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-21T03:22:35.340

这可能不再重要，但我会推荐您提出的布尔解决方案，只需进行一次修改。如果你移动

```
isActive = true; 
```

viewWillAppear 的声明，我很确定该按钮将保持禁用状态，直到模态视图关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:07:00.607

是的，我建议使用全局布尔值。按下按钮时将变量设置为 true。

在创建实例的函数中，在创建实例之前检查以确保变量为 false。

删除实例后，将变量设置回 false。

伪代码（在 C++ 中）：

```
bool isActive = false;
void CreateInstance()
{
    if (isActive == false)
    {
        -- code
        isActive = true;
    }
}

void InstanceDestroyed()
{
    -- code
    isActive = false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T22:15:47.303

一旦视图出现，您可以将按钮设置为禁用，然后在弹出视图中添加代码：

a）一旦弹出窗口被持有按钮的视图“捕获”并重新启用按钮，就使用通知中心发送通知，或者......

b) 一旦弹出视图被解除，使用协议使用委托模式来处理按钮的重新启用。

这些方法可能需要更多的工作，但我尽量不在 MVC 模式中使用任何全局变量。

# php - 将带有 cURL 的 JSON 对象发送到特定的 url

> ID：12168161
> 
> 赞同：0
> 
> 时间：2012-08-28T22:03:36.293
> 
> 标签：php, json, api, curl

我不太了解如何格式化对 Mandrill API 的 cURL 调用...

```
$specific_api = "/messages/send.json";
$url = "https://mandrillapp.com/api/1.0/" . specific_api . "?";

$param_array = array(
                    'key' => $apikey,
                    'template_name' => 'mytemplate',
                    'template_content' => array(
                            'name' => 'main',
                            'content' => 'This is HAPPENING RIGHT NOW!'
                        ),
                    'message' => array(
                        'subject' => 'blanketID Service: Pet Found',
                        'from_email' => 'no-reply@blanketid.com',
                        'from_name' => 'blanketID Service',
                        'to' => array(
                            'email' => 'devinmightbe@gmail.com',
                            'name' => 'Devin Columbus'
                        )
                    )
                );

$encoded = json_encode($param_array);

$ch = curl_init($url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $encoded);
$data = curl_exec($ch);
curl_close($ch);
$arr = json_decode($data, true);

echo $data; 
```

我什至不确定我是否正确设置了这一切......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:19:57.863

我没有信心，但是阅读 php.net 上有关 CURLOPT_POSTFIELDS 的文档后，我相信您传递的格式不被接受。

```
The full data to post in a HTTP "POST" operation. To post a file, prepend a filename with @ and use the full path. The filetype can be explicitly specified by following the filename with the type in the format ';type=mimetype'. This parameter can either be passed as a urlencoded string like 'para1=val1&para2=val2&...' or as an array with the field name as key and field data as value. If value is an array, the Content-Type header will be set to multipart/form-data. As of PHP 5.2.0, value must be an array if files are passed to this option with the @ prefix. 
```

# maven-2 - JAR 从 WSDL 生成的文件（在 wsdl2code 之后）

> ID：12168167
> 
> 赞同：2
> 
> 时间：2012-08-28T22:03:57.520
> 
> 标签：maven-2, jar, wsdl2code

我们的项目使用了多个 Web Services

我们有一个项目，我们将有一个axis2-wsdl2code-maven-plugin或任何类似的插件并执行wsdl2code部分

我们的要求是我们必须为 WSDL（在 wsdl2code 之后）生成 jar 文件并将其部署到本地远程存储库中。其他项目将使用存储库中的 jar。多个 WSDL 也会发生同样的情况。

有没有办法将生成的文件与 wsdl2code 插件一起 jar 并为多个 wsdl 做同样的事情？

部署部分不必在 pom.xml 中，可以用脚本处理

提前致谢

# javascript - 保留在下拉通知列表中的粘性通知（持久） - Android 和 IOS 最好使用 JS 框架

> ID：12168168
> 
> 赞同：0
> 
> 时间：2012-08-28T22:03:59.687
> 
> 标签：javascript, android, ios, frameworks, notifications

我想为IOS和Android创建一个位于下拉通知列表中的粘性通知（即，即使按下清除按钮也会保留）这可能吗？我想理想地使用许多可用的 JS 框架之一来做到这一点，任何人都可以推荐一个可以实现这一点的框架吗？

这会让我知道我是否应该考虑开发我对应用程序的想法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T14:54:29.523

在 iOS 上，由于系统/用户设置了最大通知数量（通常为 5 个），因此无法进行持久通知，并且用户可以随时选择清除您的应用程序的列表。无法覆盖此行为。

# c# - 从另一个表单更新对话框

> ID：12168174
> 
> 赞同：2
> 
> 时间：2012-08-28T22:04:19.733
> 
> 标签：c#, user-interface, dialog, thread-safety

我知道有很多类似的问题，我已经阅读了很多。不幸的是，在阅读完它们之后我仍然无法解决我的问题 - 但是我对 C# 比较陌生。根据[文档](http://msdn.microsoft.com/en-us/library/ms171728.aspx)，不是线程安全的问题导致`InvalidOperationException`使用调试器时出现问题。我的问题不是这种情况。

我用一个简单的原始测试类重新创建了这个问题，以专注于我的问题。

主窗体应该显示一种进度对话框。

```
public partial class ImportStatusDialog : Form
{
    public ImportStatusDialog()
    {
        InitializeComponent();
    }

    public void updateFileStatus(string path)
    {
        t_filename.Text = path;         
    }

    public void updatePrintStatus()
    {      
        t_printed.Text = "sent to printer";
    }

    public void updateImportStatus(string clientName)
    {
        t_client.Text = clientName;
    }

    public void updateArchiveStatus()
    {
        t_archived.Text = "archived";
    }
} 
```

当从主窗体调用该代码而没有任何 Invoke() 时：

```
private void button1_Click(object sender, EventArgs e)
    {
        ImportStatusDialog nDialog = new ImportStatusDialog();

        nDialog.Show();

        nDialog.updateFileStatus("test");
        Thread.Sleep(1000);
        nDialog.updateImportStatus("TestClient");
        Thread.Sleep(1000);
        nDialog.updatePrintStatus();
        Thread.Sleep(1000);
        nDialog.updateArchiveStatus();
        Thread.Sleep(1000);

        nDialog.Close();
    } 
```

即使我这样称呼它：

```
private void button3_Click(object sender, EventArgs e)
    {
        ImportStatusDialog nDialog = new ImportStatusDialog();

        nDialog.Show();

        if (this.InvokeRequired)
        {
            this.Invoke((MethodInvoker)delegate
            {
                nDialog.updateFileStatus("Test");
            });
        }
        else
        {
            nDialog.updateFileStatus("Test");
        }

        Thread.Sleep(1000);

        if (this.InvokeRequired)
        {
            this.Invoke((MethodInvoker)delegate
            {
                nDialog.updatePrintStatus();
            });
        }
        else
        {
            nDialog.updatePrintStatus();
        }

        Thread.Sleep(1000);

        if (this.InvokeRequired)
        {
            this.Invoke((MethodInvoker)delegate
            {
                nDialog.updateImportStatus("cName");
            });
        }
        else
        {
            nDialog.updateImportStatus("cName");
        }

        Thread.Sleep(1000);

        if (this.InvokeRequired)
        {
            this.Invoke((MethodInvoker)delegate
            {
                nDialog.updateArchiveStatus();
            });
        }
        else
        {
            nDialog.updateArchiveStatus();
        }

        Thread.Sleep(1000);

        nDialog.Close();
    } 
```

在设计器中看起来像这样的对话框（在我的示例中）

![设计师观点](../Images/2a9b12be7f2dc28e23e7aba19030da26.png)

会这样显示：

![运行时对话框](../Images/88921b18627249142c961164dccc3d47.png)

当我使用[ShowDialog()](http://msdn.microsoft.com/de-de/library/c7ykbedk(v=vs.110).aspx)而不是[Show()](http://msdn.microsoft.com/de-de/library/system.windows.forms.control.show)时，对话框会正确显示，但正如 API Doc 指出的那样

> 您可以使用此方法在应用程序中显示模式对话框。调用此方法时，它后面的代码直到对话框关闭后才会执行

这不是我想要的，特别是因为这意味着对话框更新只会在它再次关闭后才会发生。

我在这里做错了什么？这似乎是一个微不足道的问题，但解决方案却避开了我。请记住，我是 C# GUI 编程的新手。

另外，我想问一下使用 Invoke() 的正确位置是什么？你会在调用对话框方法时在主窗体中使用它还是在对话框更新方法本身中使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:11:38.557

看起来您在这里没有使用多个线程，因此不需要调用内容。只有跨线程调用才需要调用 - 您正在创建多个表单，但所有代码都在同一个线程中运行。

如果您在主 UI 线程中进行工作（正如按钮单击事件中的代码所暗示的那样），那么只需`Application.DoEvents()`定期调用以允许刷新进度表单。

更好的解决方案是将 a[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)用于您的工作，并让它定期报告其进度。

然后你可以在BackgroundWorker的`ProgressChanged`事件中更新进度表（它会在主线程中执行，所以你仍然不需要调用任何东西）。

# jquery - 带有子菜单对象的菜单框中的图像

> ID：12168182
> 
> 赞同：1
> 
> 时间：2012-08-28T22:05:00.643
> 
> 标签：jquery, css

我正在开发一个 CSS 菜单，并希望所有具有子菜单的菜单在框的侧面都有一个小 > 图像。

这是代码： http: [//jsfiddle.net/u9KrH/4/](http://jsfiddle.net/u9KrH/4/) 还有两个 JS 文件，但我不能将它们附加到那个编辑器，但你可以在这里看到它的实际效果：[http： //trulyscience.com/test/index.php](http://trulyscience.com/test/index.php)

我希望改变`ul.dropdown li:last-child a`能完成这项工作，但这根本没有解决问题。所以现在我一无所知，有人有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:08:25.513

在 realscience.com 页面上，您只需调整`ul.dropdown li:last-child a`.

CSS默认是平铺背景，所以需要替换

```
background-image: url('images/redarrow.jpg'); 
```

和

```
background: url('images/redarrow.jpg') no-repeat right center; 
```

定位背景并停止重复。您还可以使用 px 或 % 值代替“right”和“center”。

相同代码的更详细版本是：

```
background-image: url('images/redarrow.jpg');
background-position: right center;
background-repeat: no-repeat; 
```

结果是：

![重复 CSS 背景](../Images/e710785eee8b0b4886de46052127cc31.png)

变成：

![定位的 CSS 背景](../Images/cf1647294ab820036fb3c999238352ea.png)

# configuration - Symfony2 树构建器 - 方法 canBeUnset() 做什么？

> ID：12168185
> 
> 赞同：5
> 
> 时间：2012-08-28T22:05:30.067
> 
> 标签：configuration, symfony

```
$rootNode
    ->children()
        ->arrayNode('form')
            ->info('form configuration')
            ->canBeUnset()
            ->treatNullLike(array('enabled' => true))
            ->treatTrueLike(array('enabled' => true))
            ->children()
                ->booleanNode('enabled')->defaultTrue()->end()
            ->end()
        ->end() 
```

上述代码片段的第 5 行`Symfony\Bundle\FrameworkBundle\DependencyInjection\Configuration`使用了方法`canBeUnset()`。我不知道这是做什么的，因为如果我删除它似乎什么也做不了。我正在为我自己的包理解语义配置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-09T09:44:06.887

`Symfony/Component/Config/Definition/Builder/ArrayNodeDefinition`在代码之后，您可以在类中找到此方法的定义。

```
/**
 * Sets whether the node can be unset.
 *
 * @param Boolean $allow
 *
 * @return ArrayNodeDefinition
 */
public function canBeUnset($allow = true)
{
    $this->merge()->allowUnset($allow);

    return $this;
} 
```

这被传递给`Symfony/Component/Config/Definition/Builder/MergeBuilder`处理配置合并的 MergeBuilder ( )。

```
/**
 * Sets whether the node can be unset.
 *
 * @param Boolean $allow
 *
 * @return MergeBuilder
 */
public function allowUnset($allow = true)
{
    $this->allowFalse = $allow;

    return $this;
} 
```

所以我的理解是，这种方法定义了，如果您的配置值可以在合并配置时取消设置，以防覆盖配置不支持该值。不过，如果不允许取消设置，我将不得不进行测试，以找出行为，但我想它会抛出一个关于缺少配置值的异常，就像`isRequired`.

# android - 从 android SharedPreference 读取

> ID：12168188
> 
> 赞同：1
> 
> 时间：2012-08-28T22:05:51.890
> 
> 标签：android, sharedpreferences, preferencescreen

我知道以前有人问过它，但它似乎对我不起作用。

我`preferences.xml`在文件夹中有一个 XML 文件`res\xml`。它包含一个像这样的选项屏幕：

```
<PreferenceScreen>
  <EditTextPreference
                android:name="prfEmail"
                android:summary="Your account's e-mail address"
                android:title="E-mail"
                android:key="prfEmail" />
</PreferenceScreen> 
```

我可以从中进行活动，并且显示良好。现在我想从这些偏好中读取值，但我似乎找不到它。在另一项活动中，我做：

```
SharedPreferences appSharedPrefs;
appSharedPrefs = getSharedPreferences("preferences",Activity.MODE_PRIVATE);
String restoredText = appSharedPrefs.getString("prfEmail",null); 
```

当我想打印它`null`返回的这个值时。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:10:55.317

应用首选项存储在默认的`SharedPreferences`. 您可以通过以下方式访问它们：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this); 
```

# php - 如何调用 AccurateTax.com XML API 服务？

> ID：12168193
> 
> 赞同：0
> 
> 时间：2012-08-28T22:06:46.600
> 
> 标签：php, xml, soap, service

我是新手，需要有关准确税.com xml api 服务调用的帮助。

目前我正在做的是：

```
$client = new nusoap_client($serviceURL, false);
$result = $client->call('method', $xmlContents); 
```

我不知道在这种情况下需要调用什么“方法”。并让我知道我是否做错了以及在哪里做错了。

感谢和问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:35:25.597

方法元素表示用于完成销售税请求的查找方法。'A' 代表地址级别，Z 代表邮政编码，4 代表 zip+4……它为您提供了销售税响应查找的粒度……有些州的邮政编码就足够了，有些则需要地址级别。

但是，在调用要处理的请求时，您不需要传递它，方法仅在响应方法中设置。

最好的，皮特@Accuratetax.com

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T19:43:41.030

AccurateTax.com 网络服务不使用 SOAP。所以它就像通过正确的 XML 发送一样简单。

因此，您将使用 curl 将 XML 发布到服务 URL。

# html - 无序列表导航栏元素有奇怪的间隙

> ID：12168194
> 
> 赞同：2
> 
> 时间：2012-08-28T22:06:47.710
> 
> 标签：html, css, navbar

我正在尝试使用`<ul>`带有`inline`元素的导航栏，但是这些元素之间都有一个似乎不知从何而来的差距。也就是说，当悬停链接时，阴影框应与周围的框对齐。该页面当前如下所示：[http](http://wictorht.at.ifi.uio.no/) ://wictorht.at.ifi.uio.no/ 。是什么导致了这些差距？

HTML：

```
<body>
    <div id="main">
        <ul class="header">
            <li class="title">wictorht</li>
            <li class="header">
            <a class="header" href="https://bitbucket.org/htor/dwmst/src">dwms</a>
            </li>
            <li class="header">
            <a class="header" href="https://bitbucket.org/htor/linux/src">linux</a>
            </li>
            <li class="header">
            <a class="header" href="http://www.fsf.org/register_form?referrer=10397">fsf</a>
            </li>
            <li class="header">
            <a class="header" href="http://stackexchange.com/users/1006063">stackexhange</a>
            </li>
        </ul>
    </div>
</body> 
```

CSS：

```
body {
    background: #666666;
    color: #c0c0c0;
    margin: 0;
}

a.header {
    text-decoration: none;
    padding: 10px;
    margin: 0;
}

a.header:hover, a.header:active {
    background-color: #666666;
    color: #c0c0c0;
}

ul.header {
    background-color: #c1c1c1;
    color: #666666;
    list-style: none;
    padding: 10px 10px 10px 0;
    margin: 0 0 10px 0;
}

li.header {
    display: inline;
}

li.title {
    background-color: #000000;
    color: #bada55;
    display: inline;
    padding: 10px;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T22:11:06.200

这是因为当由客户端的浏览器呈现时，元素之间的所有空格（包括换行符）都被折叠成一个空格。要隐藏空格，您可以：

1.  删除`li`元素之间的空格：

    ```
    <li><!-- content --></li><li><!-- more content --></li> 
    ```

2.  将`font-size`父级的设置`ul`为`0`，并重新定义元素`font-size`的：`li`

    ```
    ul {
        font-size: 0;
    }

    ul li {
        font-size: 14px;
    } 
    ```

3.  注释掉`li`元素之间的差距：

    ```
    <li>Content</li><!--
    --><li>Next li</li> 
    ```

4.  浮动`li`元素而不是 using `display: inline`，它通过将元素从正常流程中取出来删除空格：

    ```
    ul {
        overflow: hidden; /* to keep the li 'visibily' within the bounds of the ul */
    }

    ul li {
        float: left;
    } 
    ```

5.  关闭`li`下一行的标签，在下一个`li`开始标签之前，这对我来说有点不对劲，但它*是*有效的：

    ```
    <li>First li</li
    ><li>Second li</li> 
    ```

（或者，显然，将*下一个* `li`开始标签放在上一行，紧跟在前一个元素的结束标签之后：

```
 <li>First li</li><
    li>Second li</li> 
```

)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T22:10:53.527

间隙是由`<li></li>`标签之间的空白引起的。试试`<li>...</li><li>...</li>`作为对比。

`display:block`无论如何，使用和使用避免这种情况`float:left`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T22:41:36.100

这是一篇很棒的文章，解释了正在发生的事情以及前面的答案已经提到的解决方法。

[http://css-tricks.com/fighting-the-space-between-inline-block-elements/](http://css-tricks.com/fighting-the-space-between-inline-block-elements/)

您的 css 选择器名称也有一点麻烦，您实际上只需要一个类，您可以利用 CSS 的特性来完成其余的工作。

```
.header {
   background-color: #c1c1c1;
   color: #666666;
   list-style: none;
   padding: 10px 10px 10px 0;
   margin: 0 0 10px 0;
} 
```

现在将所有 'li' 标签作为 .header 类的子标签

```
.header li {
   display: inline;
 } 
```

现在定位所有 .header 类的子级“a”标签（这些恰好在你的“li”标签内）

```
 .header a {
   /* etc */
 } 
```

# mysql - mysql：当“Start binlog_dump to slave_server”语句准确登录到主错误日志时

> ID：12168195
> 
> 赞同：1
> 
> 时间：2012-08-28T22:06:56.073
> 
> 标签：mysql, logging, replication

最近，我在主服务器的 MySQL 错误日志中多次观察到以下语句。

```
"started bin_log dump to slave server" 
```

我想知道在错误日志中准确记录的所有可能情况。

主从之间的连接失败将如何影响将其记录到错误日志中。

当我们在从服务器上点击“START SLAVE”时，我个人怀疑，但它不是我测试过的。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:52:22.953

确切的消息是这样的：`Start binlog_dump to slave_server`

在源代码中，此字符串在调用此函数时保存在日志文件中：`mysql_binlog_send`

通过一些研究，我看到就在调用这个函数之前，将slave状态更改为：`Requesting binlog dump`并且在MySQL参考手册中说这个状态是在slave与master连接时设置的。

因此，确切地说，当从站与主站连接时会出现此消息。

所以看起来slave失去了与master的连接，然后重新连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T02:49:03.613

这是和错误与否？我怀疑“已启动 bin_log 转储到从服务器”如果是错误则不是整个日志行。请从有关重复通知的日志中添加一个实际片段。

如果复制看起来工作正常，这不是错误。服务器启动和停止以及从属连接状态等非错误会记录到 MySQL 错误日志中。您可以覆盖默认的日志记录级别以降低记录的数量和内容：

[http://dev.mysql.com/doc/refman/5.5/en/replication-options-slave.html](http://dev.mysql.com/doc/refman/5.5/en/replication-options-slave.html)

查看 --log-warnings 配置选项

我怀疑当您将从属服务器更改为主服务器或从属服务器重新启动并尝试重新建立连接时会发生这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T08:26:18.613

我遇到了同样的条件

```
160615 15:40:25 【注】启动binlog_dump到slave_server(1401), pos(mysql-bin.000020, 219311193)
160622 15:56:58 【注】启动binlog_dump到slave_server(1401), pos(mysql-bin.000046, 350644600)

```

当我停止从站，并再次启动从站时，主站的 mysql 错误日志将打印注释日志。

这没什么好在意的。这只是意味着从服务器（服务器ID为1401）开始连接主服务器。

需要注意的是，如果你的master的mysql错误日志经常打印note log。你会检查：

1.  网络是否稳定
2.  如果master还有一个slave，检查slave是否有相同的server-id。

就这样。

# android - 旋转位图不旋转

> ID：12168200
> 
> 赞同：0
> 
> 时间：2012-08-28T22:07:16.820
> 
> 标签：android, canvas, matrix, bitmap

我已经尝试了几个小时来旋转位图但没有成功。我在这个网站上阅读了很多关于这个主题的文章，似乎首选的解决方案包括创建一个临时画布。好吧，我这样做了，但我仍然没有看到旋转的位图。

我的位图是一个 40x40 的蓝色正方形，我正在尝试将它旋转 45 度。这要求不高是吗？代码运行时，出现在屏幕上的位图就是未旋转的原图。（我也尝试过翻译但没有成功）

这是我的代码：

```
// Load the bitmap resource
   fillBMP2 = BitmapFactory.decodeResource(context.getResources(), R.drawable.test1);
   // Copy to a mutable bitmap
   mb = fillBMP2.copy(Bitmap.Config.ARGB_8888, true);
   // Create canvas to draw to
   Canvas offscreenCanvas = new Canvas (mb);
   // Create Matrix so I can rotate it 
   Matrix matrix = new Matrix();
   matrix.setRotate (45); 
   offscreenCanvas.setMatrix (matrix);
   // Send the contents of the canvas into a bitmap
   offscreenCanvas.setBitmap(mb); 
```

稍后在 OnDraw 中，我执行以下操作：

```
canvas.drawBitmap(mb, 200, 200, null); 
```

任何想法我做错了什么？似乎它应该工作。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-01T11:09:56.083

Try this...

```
 Matrix matrix = new Matrix();

    float px = 200;

    float py = 200;

    matrix.postTranslate(-bitmap.getWidth()/2, -bitmap.getWidth()/2);

    matrix.postRotate(45);

    matrix.postTranslate(px, py);

    canvas.drawBitmap(bitmap, matrix, paint); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:19:15.963

尝试使用这个

```
Matrix matrix = new Matrix();
matrix.setRotate(15);
canvas.drawBitmap(bmp, matrix, paint); 
```

**setRotation**方法接受一个表示旋转度数的浮点数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T00:29:38.673

您肯定想使用转换：查看此[链接](https://developer.mozilla.org/en-US/docs/Canvas_tutorial/Transformations)。

基本上是这样的：

```
// save the canvas
ctx.save();

// move origin to center
ctx.translate(x,y); 

// rotate
ctx.rotate(angle * (Math.PI / 180));

// draw image
ctx.drawImage(image, x, y, w, h, .w/2, h/2, w, h);

// restore
ctx.restore(); 
```

# ruby-on-rails - 将变量插入复杂的sql命令

> ID：12168201
> 
> 赞同：1
> 
> 时间：2012-08-28T22:07:18.300
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个包含多个竞赛和对象的设置。它们通过has_many :through 与contest_objs 的安排联系在一起。match_objs 也有投票，所以我可以有几个比赛，包括几个对象。我有一个复杂的 SQL 设置来计算当前排名。但是，我需要在 SQL select 语句中为排名指定比赛。我很难做到这一点。这是我到目前为止得到的：

```
@objects = @contest.objects.select('"contest_objs"."votes" AS v, name, "objects"."id" AS id, 
                                   (SELECT COUNT(DISTINCT "oi"."object_id")
                                           FROM  contest_objs oi
                                           WHERE ("oi"."votes") > ("contest_objs"."votes"))+1 AS vrank') 
```

在选择 vrank 时有什么方法可以指定 WHERE 还包括 "oi"."contest_id" = @contest.id 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T22:19:40.767

由于@contest.id 是一个整数并且不存在任何 SQL 注入风险，您可以使用字符串插值执行以下操作：

```
Model.select("..... WHERE id = #{@contest.id}") 
```

另一种可能的解决方案是使用 ActiveRecord 构建子查询，然后调用 .to_sql 以获取生成的 SQL，并将其插入到主查询中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-09T19:28:06.480

使用 sanitize_sql_array：

```
sanitize_sql_array('select ? from foo', 'bar') 
```

如果您在模型之外，因为该方法受到保护，您必须这样做：

```
ActiveRecord::Base.send(:sanitize_sql_array, ['select ? from foo', 'bar']) 
```

[http://apidock.com/rails/ActiveRecord/Sanitization/ClassMethods/sanitize_sql_array](http://apidock.com/rails/ActiveRecord/Sanitization/ClassMethods/sanitize_sql_array)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T22:22:36.567

您可以将变量插入到 sql 命令中，如下所示：

```
Model.select("...... WHERE id = ?", @contest.id) 
```

Rails 将为您转义这些值。

**编辑：**

正如 Intrepidd 在评论中所说的那样，这不起作用，请使用他在回答中建议的字符串插值。这对于整数参数是安全的。

如果您发现自己在查询中插入了多个字符串，您可以考虑使用 find_by_sql，它会为您提供上述 ? 替换，但您不能将它与链接一起使用，因此需要重写整个查询。

# wordpress - Wordpress：博客插件中的博客添加预/代码

> ID：12168203
> 
> 赞同：0
> 
> 时间：2012-08-28T22:07:20.897
> 
> 标签：wordpress, plugins

因此，在准备在线使用之前，我一直在本地主机上的博客中使用博客。一旦在线，我上传所有内容并注意到我的 css 不同，我无法解决它。

谁能解释为什么要添加 pre 和 code 标签？（有关更多详细信息，请参见下面的图片）

[本地主机 - 开发人员工具](http://imageshack.us/photo/my-images/7/lohost.jpg/ "本地主机 - 开发人员工具")

[网络 - 开发者工具](http://imageshack.us/photo/my-images/89/webaz.jpg/ "网络 - 开发者工具")

[http://wordpress.org/extend/plugins/blog-in-blog/](http://wordpress.org/extend/plugins/blog-in-blog/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T23:06:32.220

修复了这个问题，它是由复制和粘贴引起的。

*应该读到它说不要复制和过去：|*

# python - 是否可以在 python 中有一个可选的 with/as 语句？

> ID：12168208
> 
> 赞同：23
> 
> 时间：2012-08-28T22:07:47.393
> 
> 标签：python, file-io, with-statement

而不是这个：

```
FILE = open(f)
do_something(FILE)
FILE.close() 
```

最好使用这个：

```
with open(f) as FILE:
    do_something(FILE) 
```

如果我有这样的事情怎么办？

```
if f is not None:
   FILE = open(f)
else:
   FILE = None
do_something(FILE)
if FILE is not None:
    FILE.close() 
```

do_something 也有一个“if FILE is None”子句，并且在这种情况下仍然会做一些有用的事情——如果 FILE 是 None，我**不想**跳过 do_something。

有没有一种明智的方法可以将其转换为 with/as 形式？还是我只是试图以错误的方式解决可选文件问题？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-28T22:11:47.560

如果你只是这样写：

```
if f is not None:
    with open(f) as FILE:
        do_something(FILE)
else:
    do_something(f) 
```

（`file`是内置的顺便说一句）

**更新**

这是一种使用不会崩溃的可选 None 来执行动态上下文的时髦方法：

```
from contextlib import contextmanager

none_context = contextmanager(lambda: iter([None]))()
# <contextlib.GeneratorContextManager at 0x1021a0110>

with (open(f) if f is not None else none_context) as FILE:
    do_something(FILE) 
```

它创建一个返回 None 值的上下文。将`with`生成 FILE 作为文件对象或 None 类型。但是 None 类型将有一个适当的`__exit__`

**更新**

如果您使用的是 Python *3.7*或更高版本，则可以以更简单的方式声明 null 上下文管理器用于替代目的：

```
import contextlib
none_context = contextlib.nullcontext() 
```

您可以在此处阅读有关这些内容的更多信息：

[https://docs.python.org/3.7/library/contextlib.html#contextlib.nullcontext](https://docs.python.org/3.7/library/contextlib.html#contextlib.nullcontext)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2019-07-10T12:57:56.810

从 Python 3.7 开始，你也可以这样做

```
from contextlib import nullcontext

with (open(file) if file else nullcontext()) as FILE:
    # Do something with `FILE`
    pass 
```

有关详细信息，请参阅[官方文档。](https://docs.python.org/3.7/library/contextlib.html#contextlib.nullcontext)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-28T22:12:50.287

这似乎解决了你所有的顾虑。

```
if file_name is not None:
    with open(file_name) as fh:
        do_something(fh)
else:
        do_something(None) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-28T22:13:03.550

就像是：

```
if file:      #it checks for None,false values no need of "if file is None"
    with open(file) as FILE:
        do_something(FILE)
else:
    FILE=None 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-06T12:28:16.207

在 Python 3.3 及更高版本中，您可以使用[contextlib.ExitStack](https://docs.python.org/3.7/library/contextlib.html#contextlib.ExitStack)很好地处理这种情况

```
with contextlib.ExitStack() as stack:
    FILE = stack.enter_context(open(f)) if f else None
    do_something(FILE) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-10-14T00:40:12.033

Python 3.7 支持[contextlib.nullcontext](https://docs.python.org/3/library/contextlib.html#contextlib.nullcontext)，可用于避免创建自己的虚拟上下文管理器。

此示例显示如何有条件地打开文件或使用`stdout`：

```
import contextlib
import sys

def write_to_file_or_stdout(filepath=None, data):
    with (
            open(filepath, 'w') if filepath is not None else
            contextlib.nullcontext(sys.stdout)
    ) as file_handle:
        file_handle.write(data) 
```

`contextlib.nullcontext()`如果值可以为 None，则可以不带任何参数调用。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-08-28T22:17:10.503

虽然所有其他答案都很好，而且更可取，但请注意`with`表达式可以是*任何*表达式，因此您可以这样做：

```
with (open(file) if file is not None else None) as FILE:
    pass 
```

请注意，如果对`else`子句进行了评估，那么产生`None`这将导致异常，因为`NoneType`不支持将适当的操作用作上下文管理器。

# rabbitmq - Rabbitmq 绑定交换到交换

> ID：12168214
> 
> 赞同：2
> 
> 时间：2012-08-28T22:08:24.750
> 
> 标签：rabbitmq, messaging, amqp, rabbitmq-exchange

我正在寻找一种方法来保护我的网站消息系统，以便用户只能获取他们应该有权访问的数据。考虑到这一点，我想到了一个系统，其中我有一个主主题交换，我的服务器会将所有消息发送到该交换。

该网站为每个用户保存一个 sessionId。当用户通过身份验证时，会创建另一个名为 sessionId 的交换。客户端用户可以绑定到除主服务器之外的所有交易所。由于 sessionID 是唯一的，因此很难猜测其他用户的 sessionID 并绑定以获取他们的消息。

每条消息都会有一个 sessionID.destination 的路由键。客户端将知道所有潜在的目的地。

为了帮助可视化：

```
 -> SessionID Exchange -> client
Server -> master Exchange | -> SessionID Exchange -> client
                            -> SessionID Exchange -> client 
```

我的问题是两方面的。是否可以将交换绑定到rabbitmq中的交换？另外，以前有人设置过这样的系统吗？相反，在这个主题上有经验的人是否已经有一个我可以使用的工作系统？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T05:26:16.517

是的，可以绑定和交换到和交换。您甚至可以进行不同类型的交换。您需要使用`channel.exchangeBind()`而不是`channel.queueBind()`. 但它以类似的方式工作。

我有一个主题交换绑定到我的系统中的扇出交换。我确保将路由密钥与发送到扇出交换的消息一起发送。它在扇出交换级别没有影响，但是当它被路由到主题交换时，然后使用路由键来确定它被发送到哪些队列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-09T16:22:49.523

在单交换多队列绑定的情况下，客户端发送的消息将通过交换到达基于绑定的可能队列。这意味着来自客户端的消息将通过交换一跳到达目标队列。

考虑一种情况，您希望基于绑定将消息发送到可能的目标队列，**还**需要更多的跃点到不同的交换及其队列绑定。在这种情况下，交换到交换绑定将符合目的。

将队列绑定到交换器是一个代价高昂的过程。交换器到交换器的绑定是更灵活和更好的可伸缩性解决方案。客户端可以创建自己的私有交换并绑定到服务器上的专用交换。Exchange 到 Exchange 绑定在性能上更好，并解决了可伸缩性问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T00:39:23.467

我发现这个博客谈到了与我的设计类似的东西。这并不完全相同，但它让我知道它至少是可能的。

[http://blog.springsource.org/2011/04/01/routing-topologies-for-performance-and-scalability-with-rabbitmq/](http://blog.springsource.org/2011/04/01/routing-topologies-for-performance-and-scalability-with-rabbitmq/)

# sql-server-2008-r2 - 从具有高级服务的 SQL Server Express 升级到 SQL Server 2008 R2 Enterprise

> ID：12168218
> 
> 赞同：-1
> 
> 时间：2012-08-28T22:08:39.370
> 
> 标签：sql-server-2008-r2, sql-server-2008-express

如何将我的带有高级服务的 SQL Server 2008 Express 升级到 SQL Server 2008 R2 企业版？

请务必让我知道。

谢谢，维维克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T08:45:27.373

单击安装程序，然后在其中一个选项卡上，有一个版本升级选项。

# ruby - 使用haml和erb

> ID：12168220
> 
> 赞同：1
> 
> 时间：2012-08-28T22:08:48.937
> 
> 标签：ruby, web-applications, haml, erb

可以将 haml 用作 erb 的完全替代品，反之亦然，或者是否存在应该使用的特殊情况？

例如：最好用haml做X，最好用erb做Y。

我正在尝试尽快使用我的网络应用程序，如果可以避免的话，我现在真的不想同时学习两者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:11:51.330

多年来，我几乎一直在使用 HAML，并且在许多项目中都使用过。我不记得必须将任何 HAML 文件转换为 ERB。

但我可以想到一些 ERB 可能更容易的情况：

*   当您与只知道 HTML 的人共享模板时。
*   [当你写 content](http://chriseppstein.github.com/blog/2010/02/08/haml-sucks-for-content/)时，除非你使用 markdown 什么的。
*   当您导入现有 HTML（示例、旧版等）时。要转换它们，我`html2haml`直接在终端中使用。
*   当您需要完全控制输出 HTML 中的空白时。它很少需要，但处理它的 HAML 语法不是很好。
*   当您有许多 ERB 文件要转换为 HAML 时。其中一些不能被正确解析`html2haml --erb`。
*   显然，当您不生成 HTML 时。例如，我使用 ERB 来生成文本电子邮件，并在 Rails 生成器中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:17:18.643

小资肯定 HAML 也可以用于一切。不过，我建议您使用 ERB 来帮助您入门。这要简单得多 - 在您使用 <% %> 或 <%= %> 之前，一切都是 HTML。

毫无疑问，有人会不同意我的观点。

# list - 二进制格式化程序的列表序列化和反序列化

> ID：12168221
> 
> 赞同：2
> 
> 时间：2012-08-28T22:08:55.310
> 
> 标签：list, serialization, binary, deserialization

我有一堂课。我想序列化并序列化一个包含该类对象的列表。我想使用二进制格式化程序。这是我的课：

```
[Serializable]
public class Section :ISerializable
{
    private double ClearCover;
    private string SectionName;

    private double Diameter;

    public double Height;
    private double Width;

    private double InternalDiameter;
    private double ExternalDiameter;

    private double InternalHeight;
    private double ExternalHeight;
    private double InternalWidth;
    private double ExternalWidth;

    private double WebWidth;
    private double FlangeWidth;
    private double FlangeThickness;

    public double clearCover
    {
        get { return ClearCover; } 
        set { ClearCover = value; }
    }
    public string sectionName
    {
        get{return SectionName;} 
        set{SectionName=value;} 
    }

    public double diameter
    {
        get { return Diameter; } 
        set { Diameter = value; }
    }

    public double height
    {
        set { Height = value; }
        get { return Height; }
    }
    public double width
    {
        set { Width = value; }
        get { return Width; }
    }

    public double internalDiameter
    {
        set { InternalDiameter = value; } 
        get { return InternalDiameter; }
    }
    public double externalDiameter
    {
        set { ExternalDiameter = value; } 
        get { return ExternalDiameter; }
    }

    public double internalHeight
    {
        set { InternalHeight = value; }
        get { return InternalHeight; }
    }
    public double externalHeight
    {
        set { ExternalHeight = value; } 
        get { return ExternalHeight; }
    }
    public double internalWidth
    {
        set { InternalWidth = value; } 
        get { return InternalWidth; }
    }
    public double externalWidth
    {
        set { ExternalWidth = value; } 
        get { return ExternalWidth; }
    }

    public double flangeWidth
    {
        set { FlangeWidth = value; }
        get { return FlangeWidth; }
    }
    public double flangeThickness
    {
        set { FlangeThickness = value; }
        get { return FlangeThickness; }
    }
    public double webWidth
    {
        set { WebWidth = value; }
        get { return WebWidth; }
    }

    public Section() { }

    protected Section(SerializationInfo info, StreamingContext context)
    {
        sectionName = info.GetString("Section Name");
        clearCover = info.GetDouble("Clear Cover");

        diameter = info.GetDouble("Diameter");

        //internalDiameter = info.GetDouble("Internal Diameter");
        //externalDiameter = info.GetDouble("External Diameter");

        height = info.GetDouble("Height");
        width = info.GetDouble("Width");

        internalHeight = info.GetDouble("Internal Height");
        externalHeight = info.GetDouble("External Height");
        internalWidth = info.GetDouble("Internal Width");
        externalWidth = info.GetDouble("External Width");

        flangeWidth = info.GetDouble("Flange Width");
        flangeThickness = info.GetDouble("Flange Thickness");
        webWidth = info.GetDouble("Web Width");

    }

    public virtual void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        info.AddValue("Section Name", sectionName);
        info.AddValue("Clear Cover", clearCover);

        info.AddValue("Diameter",diameter);

        //info.AddValue("Internal Diameter", internalDiameter);
        //info.AddValue("External Diameter", externalDiameter);

        info.AddValue("Height",height);
        info.AddValue("Width",width);

        info.AddValue("Internal Height",internalHeight);
        info.AddValue("External Height",externalHeight);
        info.AddValue("Internal Width",internalWidth);
        info.AddValue("External Width",externalWidth);

        info.AddValue("Flange Width",flangeWidth);
        info.AddValue("Flange Thickness", flangeThickness);
        info.AddValue("Web Width", webWidth);

    }

} 
```

我在序列化方面没有任何问题。但是对于反序列化，它可以只反序列化第一个对象而不是所有对象。我该怎么办，请帮帮我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T13:43:40.877

从 OP 的另一封电子邮件中，获得了以下方法（我已经整理了一些，不多）：

```
static void Serialize(object obj, string filename)
{
    using (FileStream streamOut = new FileStream(filename, FileMode.Append))
    {
        BinaryFormatter formatter = new BinaryFormatter();
        formatter.Serialize(streamOut, obj);
    }
}

public static List<Section> DeserializeList(string filename)
{
    using (FileStream streamIn = File.OpenRead(filename))
    {
        BinaryFormatter formatter = new BinaryFormatter();
        return (List<Section>) formatter.Deserialize(streamIn);
    }
} 
```

这里的关键观察是假设这`BinaryFormatter`是一种可附加格式，并且顺序序列化两个对象与同时序列化两个项目（列表）相同，例如：

```
if(File.Exists("foo.bin")) File.Delete("foo.bin"); // start afresh
Serialize(new Section { Diameter = 1.2, ClearCover = 3.4 }, "foo.bin");
Serialize(new Section { Diameter = 5.6, ClearCover = 7.8 }, "foo.bin");

var clone = DeserializeList("foo.bin"); 
```

然而，事实*并非如此*。要以这种方式反序列化项目，我们必须执行以下操作：

```
public static List<Section> DeserializeList(string filename)
{
    using (FileStream streamIn = File.OpenRead(filename))
    {
        List<Section> list = new List<Section>();
        BinaryFormatter formatter = new BinaryFormatter();
        while(streamIn.Position != streamIn.Length)
        {
            list.Add((Section) formatter.Deserialize(streamIn));
        }
        return list;
    }
} 
```

这有点令人烦恼 - 尤其是因为它不能应用于所有流（`.Length`甚至`.Position`不是普遍可用的）。

以上*应该可以*，但我强烈建议使用可附加的格式，例如 protobuf。实际上，就模型而言，protobuf-net 使这个场景变得毫不费力：

```
[ProtoContract]
public class Section
{
    [ProtoMember(1)] public double ClearCover { get; set; }
    [ProtoMember(2)] public string SectionName { get; set; }
    [ProtoMember(3)] public double Diameter { get; set; }
    [ProtoMember(4)] public double Height { get; set; }
    [ProtoMember(5)] public double Width { get; set; }
    [ProtoMember(6)] public double InternalDiameter { get; set; }
    [ProtoMember(7)] public double ExternalDiameter { get; set; }
    [ProtoMember(8)] public double InternalHeight { get; set; }
    [ProtoMember(9)] public double ExternalHeight { get; set; }
    [ProtoMember(10)] public double InternalWidth { get; set; }
    [ProtoMember(11)] public double ExternalWidth { get; set; }
    [ProtoMember(12)] public double FlangeWidth { get; set; }
    [ProtoMember(13)] public double FlangeThickness { get; set; }
    [ProtoMember(14)] public double WebWidth { get; set; }
} 
```

和序列化/反序列化：

```
static void Main()
{
    if (File.Exists("foo.bin")) File.Delete("foo.bin"); // start afresh

    Serialize(new Section { Diameter = 1.2, ClearCover = 3.4 }, "foo.bin");
    Serialize(new Section { Diameter = 5.6, ClearCover = 7.8 }, "foo.bin");

    var clone = DeserializeList("foo.bin");
}
static void Serialize(object obj, string filename)
{
    using (FileStream streamOut = new FileStream(filename, FileMode.Append))
    {
        Serializer.NonGeneric.SerializeWithLengthPrefix(
            streamOut, obj, PrefixStyle.Base128, Serializer.ListItemTag);
    }
}

public static List<Section> DeserializeList(string filename)
{
    using (FileStream streamIn = File.OpenRead(filename))
    {
        return Serializer.DeserializeItems<Section>(
            streamIn, PrefixStyle.Base128, Serializer.ListItemTag).ToList();
    }
} 
```

最后，`BinaryFormatter`那 2 行的数据是 750 字节；使用 protobuf-net：40 字节。

# php - PDO 执行和绑定参数

> ID：12168222
> 
> 赞同：0
> 
> 时间：2012-08-28T22:08:56.537
> 
> 标签：php, security, pdo

如果我这样做：

```
$qry->execute(array($usuario,$pass)); 
```

而不是这个：

```
$qry->bindParam(1, $usuario);
$qry->bindParam(2, $pass);
$qry->execute(); 
```

这会带来安全问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T22:10:03.617

不，它们在语义上是相同的

它在[文档中指定](http://php.net/manual/en/pdostatement.execute.php)

> 执行准备好的语句。如果准备好的语句包含参数标记，您必须：
> 
> *   调用 PDOStatement::bindParam() 将 PHP 变量绑定到参数标记：绑定变量将其值作为输入传递并接收其关联参数标记的输出值（如果有）
>     
>     
> *   或传递一个仅输入参数值的数组

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:10:42.577

不，它不会。它会正常工作。

# linq - Linq、数据表和共享属性

> ID：12168223
> 
> 赞同：0
> 
> 时间：2012-08-28T22:09:02.027
> 
> 标签：linq, properties, datatable, shared

我正在尝试执行此 linq 查询，但在编码时出现“EmpCritGID 无法初始化，因为它是共享的”错误。查询数据表并使用共享属性填充现有类中的值以用于后面的 vb.net 代码的正确方法是什么？

```
    If CriteriaFlags.CritOrgFlag AndAlso lblOrgName.Text.Equals(String.Empty) Then
        lblOrgName.Text = "需要分配组织"
        lblOrgName.ForeColor = redColor
        lblOrgName.BackColor = 黄色颜色
    万一

    暗淡结果 = 来自 c In EmployeeJobCriteria.AsEnumerable()
        其中 c.Field(Of Integer)("EmpCritGID").Equals(intEmpCritGID)
        选择新的 EmployeeCriteria.CriteriaFlags _
        使用 {.EmpCritGID = c.Field(Of Integer)("EmpCritGID"), _
        .EmpJobFID = c.Field(Of Integer)("EmpJobFID"), _
        .CritFID = c.Field(Of Integer)("CritFID"), _
        .NodeGID = c.Field(Of Integer)("NodeGID"), _
        .CritOrgFlag = c.Field(Of Boolean)("CritOrgFlag"), _
        .CritWeightFlag = c.Field(Of Boolean)("CritWeightFlag"), _
        .CritOppFlag = c.Field(Of Boolean)("CritOppFlag"), _
        .CritActFlag = c.Field(Of Boolean)("CritActFlag")}

    命名空间目标

        公共类 EmployeeCriteria

             公共类 CriteriaFlags

                公共共享 EmpCritGID 作为整数
                公共共享 EmpJobFID 为整数
                公共共享 CritFID 为整数
                公共共享 NodeGID 为整数
                公共共享 CritOrgFlag 为布尔值
                公共共享 ShareCritPmtFlag 为布尔值
                公共共享 CritWeightFlag 为布尔值
                公共共享 CritOppFlag 为布尔值
                公共共享 CritActFlag 为布尔值

            结束类

        结束类

    结束命名空间

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:13:01.363

删除`Shared`关键字。

```
Public Class CriteriaFlags 

    Public EmpCritGID As Integer 
    Public EmpJobFID As Integer 
    Public CritFID As Integer 
    Public NodeGID As Integer 
    Public CritOrgFlag As Boolean 
    Public ShareCritPmtFlag As Boolean 
    Public CritWeightFlag As Boolean 
    Public CritOppFlag As Boolean 
    Public CritActFlag As Boolean 

End Class 
```

通过设置共享（静态）变量或属性来初始化对象是没有意义的。无论如何，他们会分享所有价值观。

[http://visualbasic.about.com/od/learnvbnet/a/sharedinstance.htm](http://visualbasic.about.com/od/learnvbnet/a/sharedinstance.htm)

# android - 如何在 java 端的网格视图中正确调整图像视图的大小；安卓？

> ID：12168224
> 
> 赞同：4
> 
> 时间：2012-08-28T22:09:01.290
> 
> 标签：android, gridview, sizing

这是我在我的 GridView 中放置一些图像装饰的代码

```
public View getView(int position, View convertView, ViewGroup parent) {
        ImageView v;
        if(convertView == null) {
            v = new ImageView(c);
            v.setLayoutParams(new GridView.LayoutParams(90,90));
            v.setScaleType(ImageView.ScaleType.CENTER_CROP);
            v.setPadding(2, 2, 2, 2);
        } else {
            v = (ImageView) convertView;
        }

        v.setImageDrawable(c.getResources().getDrawable(ops[position]));
        return v;
    } 
```

但是对于较小的机器，layoutParams 太大了，有谁知道我如何在 java 端的宽度和高度上做一个（90dp，90dp）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T22:17:52.517

在 XML 中创建维度：

```
<dimen name="image_size">90dp</dimen> 
```

然后从您的代码中获取它：

```
int size = (int) getResources().getDimension(R.dimen.image_size);
v.setLayoutParams(new GridView.LayoutParams(size, size)); 
```

`values`您还可以通过创建不同的文件夹来根据屏幕尺寸设置不同的尺寸。

例如，将大尺寸放在名为的文件夹中`values-w600dp`（如果屏幕宽度大于或等于 600dp，将使用该文件夹），将较小的尺寸放在简单`values`文件夹中（您将有两个dimens.xml 文件）。

您将[在文档中](http://developer.android.com/guide/practices/screens_support.html#NewQualifiers)找到更多详细信息。

# cakephp - CakePHP 中的多个复选框 - 如何设置选中的复选框？

> ID：12168225
> 
> 赞同：8
> 
> 时间：2012-08-28T22:09:01.907
> 
> 标签：cakephp, cakephp-2.0, checkbox

我在 CakePHP 的 Add/Edit 视图中有多个复选框，使用以下命令创建：

```
echo $this->Form->input('email_warning_chb', array('type'=>'select', 'multiple'=>'checkbox', 'label'=> __('Email notice'), 'class'=>'multiple-chb', 'options'=> array('title...'=>array( '5'=>'5 days', '15'=>'15 days', '30'=>'30 days', '60'=>'60 days'); 
```

我的问题是如何设置默认检查哪一个（即在此示例中为 5、15 和 60）？

先感谢您！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-05T00:59:32.263

如其他答案所述，您应该设置“选定”选项。有些人没有提到的是，您选择的数组应该只包含每个元素中的 id。例子：

```
$selectedWarnings = $this->Warning->find('list', array(
  'fields' => array('id')
));

echo $this->Form->input('email_warning_chb', array(
    'label' => 'Email Notice',
    'type' => 'select',
    'multiple' => 'checkbox',
    'options' => $warnings,
    'selected' => $selectedWarnings
  )); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T23:06:10.917

这看起来像这个

[cakephp：如何将复选框设置为选中？](https://stackoverflow.com/questions/1962463/cakephp-how-to-set-checkbox-to-checked)

其中`$selected`包含选定的值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T08:27:20.100

在您的控制器中，您必须像这样输入值：

```
$this->request->data['Model']['email_warning_chb'] = array(5,15,60); 
```

它会自动显示选中的复选框。

请询问是否不适合您。

# mysql - 拥有两张表或一张包含大量字段的表更有效

> ID：12168227
> 
> 赞同：1
> 
> 时间：2012-08-28T22:09:12.193
> 
> 标签：mysql, performance, database-table

相关但不完全相同的事情：[哪个更有效？](https://stackoverflow.com/questions/1125004/which-is-more-efficient-multiple-mysql-tables-or-one-large-table)（或者至少通读它对我没有任何帮助）

因此，我正在开发一个新站点（销售保险单），我们已经有几个站点（它是一个 Rails 应用程序）可以执行此操作，因此我在我的 sql 数据库中有一个称为策略的表。您可以想象它有很多列来支持所有可用的不同选项。

在这个新网站上工作时，我意识到我需要跟踪 20 多个选项。

我担心的是策略表已经很大了，但是现在它中的列几乎都被我们拥有的每个应用程序使用了。而如果我添加这些，它们将仅用于新站点，并且会在所有其余策略中留下大量空单元格。

所以我的问题是我是否将这些添加到现有表中或仅为该站点上出售的策略创建一个新表？另外我相信，如果我创建了一个新表，我可以从主策略表中省略一些列（但不是很多），因为此应用程序不需要它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T22:40:48.160

“[A]lmost all used”表明您可以在考虑后更自然地拆分它。

现在，这里的大部分效率问题归结为三件事：

1.  扫描单个表的速度比扫描多个表的速度要快。
2.  大行本身就有内存和磁盘空间成本。
3.  如果单个表代表真正的一对多的东西，那么它需要在插入、删除或更新方面做更多的工作。

只有在很多情况下您需要一个特定的数据子集，而在另一批需要另一个子集的情况下，也许只有少数情况下您需要全部数据时，才真正出现第 2 点。如果您在大多数地方使用大多数列，那么它不会为您带来任何好处。在这种情况下，拆分表是不好的。

第 1 点和第 3 点分别支持和反对加入一张大桌子。

在此之前，让我们回到“几乎所有”。如果有几行带有一批空字段，为什么？经常回答“为什么？” 揭示了那里确实存在自然分裂，应该将其分解为另一个表作为正常[标准化](http://en.wikipedia.org/wiki/Database_normalization)的一部分*. 字段的重复，是一个更大的建议，就是这种情况。

先做这个。

非规范化 - 无论是通过拆分自然是一个表，还是连接自然是多个表 - 都是一种非常特殊的优化类型 - 它以降低其他事物的效率为代价使某些事物变得更有效，并且它引入了可能导致错误的错误否则不存在。我永远不会说你永远不应该非规范化 - 我自己做 - 但你需要能够说“我正在以这种方式对表 X 和 Y 进行非规范化，因为它有助于案例 C 发生足够多的情况，我可以忍受额外的案例 D 的费用”。然后你需要检查它是否确实对案例 C 有显着的帮助，对案例 D 的帮助微乎其微，同时还要寻找隐藏成本。

首先归一化的原因之一是它在广泛的情况下提供了良好的平均性能。这是您大部分时间想要的平衡。从一开始就进行非规范化而不是以规范化数据库为起点几乎总是为时过早。

*有趣的琐事事实：“正常化”这个名称部分是对理查德尼克松的“越南化”政策的一部分，这意味着在某些方面存在一个笑话，将“-isation”添加到几乎任何东西上。如果不是因为白宫对春节攻势的反应，我们可能会使用“正常化”或完全不同的东西。

# sql-server-2008 - 在哪里使用 ROWLOCK、READPAST 和 CTE、子查询和更新？

> ID：12168229
> 
> 赞同：5
> 
> 时间：2012-08-28T22:09:35.833
> 
> 标签：sql-server-2008, common-table-expression, rowlocking

为了避免死锁和同步来自多个服务的请求，我使用 ROWLOCK、READPAST。我的问题是我应该将它放在包含 CTE、子查询和 CTE 上的更新语句的查询中的哪个位置？是有一个关键点还是应该三个地方都有（下）？或者也许有更好的方法来编写这样的查询，这样我就可以只选择将要更新的行。

```
alter proc dbo.Notification_DequeueJob
    @jobs int = null
as

    set nocount on;
    set xact_abort on;

    declare @now datetime
    set @now = getdate();

    if(@jobs is null or @jobs <= 0) set @jobs = 1

    ;with q as (
        select 
            *, 
            dense_rank() over (order by MinDate, Destination) as dr
        from 
        (
            select *, 
                min(CreatedDt) over (partition by Destination) as MinDate
            from dbo.NotificationJob with (rowlock, readpast)
        ) nj

    where (nj.QueuedDt is null or (DATEDIFF(MINUTE, nj.QueuedDt, @now) > 5 and nj.CompletedDt is null))
    and (nj.RetryDt is null or nj.RetryDt < @now)
    and not exists(
        select * from dbo.NotificationJob
        where Destination = nj.Destination
        and nj.QueuedDt is not null and DATEDIFF(MINUTE, nj.QueuedDt, @now) < 6 and nj.CompletedDt is null)
    )
    update t
        set t.QueuedDt = @now, 
            t.RetryDt = null
    output 
        inserted.NotificationJobId, 
        inserted.Categories, 
        inserted.Source, 
        inserted.Destination, 
        inserted.Subject, 
        inserted.Message
    from q as t
    where t.dr <= @jobs
go 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T14:08:45.003

I don't have an answer off-hand, but there are ways you can learn more.

The code you wrote seems reasonable. Examining the actual query plan for the proc might help verify that SQL Server can generate a reasonable query plan, too.

If you don't have an index on NotificationJob.Destination that includes QueuedDt and CompletedDt, the `not exists` sub-query might acquire shared locks on the entire table. That would be scary for concurrency.

You can observe how the proc behaves when it acquires locks. One way is to turn on [trace flag 1200](https://stackoverflow.com/questions/7449061/nolock-on-a-temp-table-in-sql-server-2008) temporarily, call your proc, and then turn off the flag. This will generate *a lot* of information about what locks the proc is acquiring. The amount of info will severely affect performance, so don't use this flag in a production system.

```
dbcc traceon (1200, -1) -- print detailed information for every lock request.  DO NOT DO THIS ON A PRODUCTION SYSTEM!
exec dbo.Notification_DequeueJob
dbcc traceoff (1200, -1) -- turn off the trace flag ASAP 
```

# actionscript-3 - 将数组中皮肤的名称分配给按钮

> ID：12168230
> 
> 赞同：0
> 
> 时间：2012-08-28T22:09:38.077
> 
> 标签：actionscript-3, flex4, flash-builder

我有一个随机化皮肤的代码

```
private var tiles:Array = [
            {"item":"Skin1", "chance":70 },
            {"item":"Skin2", "chance":5 },
            {"item":"Skin3", "chance":10 },
            {"item":"Skin4", "chance":10 },
            {"item":"Skin5", "chance":5 }
        ];

public function pickRandomByChance(options:Array):Object{
            var copy:Array=[];
            for (var i:int = 0; i < options.length; i++) {
                  copy.push( { "item":options[i].item, "chance":options[i].chance } );
            }
            var range:Number = 0;
            for (i = 0; i < copy.length; i++){
                  range += copy[i].chance;
                  if (i > 0)
                  copy[i].chance += copy[i - 1].chance;
            }

            var pick:Number = Math.floor(Math.random() * range);

            for (i = 0; i < copy.length; i++){
                 if (pick <= copy[i].chance)
                 return copy[i];
            }
    return null;
} 
```

我的问题是如何使用 setStyle 将这些皮肤分配给我的一个按钮？

```
button1.setStyle("skinClass", pickRandomByChance(tiles).item); 
```

我尝试使用上述代码，但出现错误 #1009：无法访问空对象引用的属性或方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T00:18:13.957

我认为您的函数正在返回 null（当设置它们的样式时，它本质上是调用 null.item）。我没有测试这段代码，我很确定它会起作用。也许试一试。在我看来，它更简单一些。

```
public function pickRandomByChance(options:Array):Object{
    var weightedArray:Array = [];
    var range:Number = 0;
    for each(var tile:Object in options){
        for(var x = 0; x < tile.chance; x++){
            weightedArray.push(tile);
        }
        range += tile.chance;
    }
    return(weightedArray[Math.floor(Math.random() * range)].item);
} 
```

编辑：现在我查看了您的皮肤阵列，我想我发现了错误。试试不带引号的皮肤名称：

```
var tiles:Array = [ {"item":Skin1, "chance":70 },
                    {"item":Skin2, "chance":5 },
                    {"item":Skin3, "chance":10 },
                    {"item":Skin4, "chance":10 },
                    {"item":Skin5, "chance":5 } 
                  ]; 
```

编辑：请参阅上面修改后的回报，并应用皮肤，如下所示：

```
button1.setStyle("skinClass", pickRandomByChance(tiles)); 
```

# ms-access - Access 2007：“有块”错误

> ID：12168234
> 
> 赞同：1
> 
> 时间：2012-08-28T22:10:09.977
> 
> 标签：ms-access, vba

我不是访问和/或编程方面的专家；所以，很确定我的问题会有点愚蠢..但是，我需要你的帮助，所以..我敢来问:)

所以，事情就是这样：我有一个表单，当它关闭时，它将通过 VBA 代码在先前创建的表中插入和更新一些记录。问题是我已经为执行此类任务创建了尽可能接近的代码，但我不断收到来自 VBA 编译器的错误消息“91”：“对象变量或未设置块变量”。

谁能帮我解决这个问题？非常感谢先进；我正在使用的完整代码如下：

```
Private Sub Form_Close()
Dim dbs As Database
Dim rst As recordSet
Dim auxGastoId, auxFecha
Dim auxReg

DoCmd.Echo False
DoCmd.SetWarnings False

DoCmd.OpenQuery "SueldosNuevoRegistroConsulta"

DoCmd.SetWarnings True
DoCmd.Echo True

auxGastoId = DMax("id_gasto", "Gastos")
auxFecha = DLookup("fecha_gasto", "Gastos", "id_gasto = " & auxGastoId)

Set db = CurrentDb()
Set rst = db.OpenRecordset("Empleados", dbOpenDynaset)

rst.MoveFirst

Do While rst.EOF = False

If (Me.nombre_completo <> Null) Then
  If (Me.sueldo <> 0) Then
    dbs.Execute "INSERT INTO SueldosTempo (fecha_gasto) VALUES (" & _
       auxFecha & ");"

    auxReg = DMax("id_gasto_detalle", "SueldosTempo")

   dbs.Execute "UPDATE SueldosTempo SET id_gasto = " & _ 
       auxGastoId & " WHERE id_gasto_detalle = " & auxReg & ";"
   dbs.Execute "UPDATE SueldosTempo SET cantidad = " & "1" & _
       " WHERE id_gasto_detalle = " & auxReg & ";"
   dbs.Execute "UPDATE SueldosTempo SET servicio = ""Sueldo (" & _
       Me.nombre_completo & ")"" WHERE id_gasto_detalle = " & auxReg & ";"
   dbs.Execute "UPDATE SueldosTempo SET monto_servicio = " & _ 
       Me.sueldo & " WHERE id_gasto_detalle = " & auxReg & ";"
   dbs.Execute "UPDATE SueldosTempo SET fecha_gasto = " & _
       auxFecha & " WHERE id_gasto_detalle = " & auxReg & ";"

 ElseIf (Me.bono <> 0) Then
   dbs.Execute "INSERT INTO SueldosTempo (fecha_gasto) VALUES (" & _
       auxFecha & ");"

   auxReg = DMax("id_gasto_detalle", "SueldosTempo")

   dbs.Execute "UPDATE SueldosTempo SET id_gasto = " & _
       auxGastoId & " WHERE id_gasto_detalle = " & auxReg & ";"
   dbs.Execute "UPDATE SueldosTempo SET cantidad = " & "1" & _
       " WHERE id_gasto_detalle = " & auxReg & ";"
   dbs.Execute "UPDATE SueldosTempo SET servicio = ""Bono (" & _
       Me.nombre_completo & ")""  WHERE id_gasto_detalle = " & auxReg & ";"
   dbs.Execute "UPDATE SueldosTempo SET monto_servicio = " & _
       Me.bono & " WHERE id_gasto_detalle = " & auxReg & ";"
   dbs.Execute "UPDATE SueldosTempo SET fecha_gasto = " & _
       auxFecha & " WHERE id_gasto_detalle = " & auxReg & ";"

   ElseIf (Me.hrExtra <> 0) Then
     dbs.Execute "INSERT INTO SueldosTempo (fecha_gasto) VALUES (" & _
       auxFecha & ");"

     auxReg = DMax("id_gasto_detalle", "SueldosTempo")

     dbs.Execute "UPDATE SueldosTempo SET id_gasto = " & _
       auxGastoId & " WHERE id_gasto_detalle = " & auxReg & ";"
     dbs.Execute "UPDATE SueldosTempo SET cantidad = " & "1" & _
       " WHERE id_gasto_detalle = " & auxReg & ";"
     dbs.Execute "UPDATE SueldosTempo SET servicio = ""HrExtra (" & _
       Me.nombre_completo & ")""  WHERE id_gasto_detalle = " & auxReg & ";"
     dbs.Execute "UPDATE SueldosTempo SET monto_servicio = " & _
       Me.hrExtra & " WHERE id_gasto_detalle = " & auxReg & ";"
     dbs.Execute "UPDATE SueldosTempo SET fecha_gasto = " & _
       auxFecha & " WHERE id_gasto_detalle = " & auxReg & ";"
  Else
  End If
  Else
  End If

  rst.MoveNext

  Loop

  dbs.Close

  Set rst = Nothing
  Set db = Nothing

  End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:34:19.000

`Set db = CurrentDb()`我相信你会通过改变这一行来解决你的问题： `set dbs = CurrentDb()`

并添加`Option Explicit`为模块中的第一行。

`dbs.close`导致错误，因为您从未分配`dbs`值。

如果您在编写此代码时启用了显式选项，IDE 将引发编译错误，让您知道 db 从未定义。

编辑：

也`db = nothing`改为`dbs = nothing`.

# asp.net-mvc - 将一个实体映射到一个视图模型或多个视图模型

> ID：12168236
> 
> 赞同：0
> 
> 时间：2012-08-28T22:10:22.593
> 
> 标签：asp.net-mvc, mapping, viewmodel

我有一个客户实体的多个视图模型，具体取决于创建、更新、获取、删除等现有视图。这些视图模型与实体共享高达 75% 的相同属性。

我是否应该更好地将所有客户视图模型合并到一个大视图模型中？

所以我只需要并且总是从一个实体映射到一个视图模型并返回吗？对于我现在没有想到的某些场景，您是否认为灵活性有任何劣势？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T04:47:57.107

另一个，最适合您的 OO 选项在于良好的旧继承：在一个类中定义操作之间的通用功能，`MyVM`并根据您认为适合不同操作的方式扩展它（从它继承）：、、、、`MyVMEdit`“ MyVMList”。`MyVMDelete``MyVMCreate`

这是两全其美的：您只需维护一次，然后扩展它们以精确地适应每个视图。

这里没有正确的方法，因为它不是数学，所以你采取的任何完成工作的方法都会完成工作:)但是......*有时我们离我们的根源太远了*:)它纯粹的好旧的面向对象方法.

如果继承（或扩展）带来任何问题（出于任何原因），您可以`MyVM`在每个`MyVM<Action>`模型中嵌入部分并实现相同级别的抽象/功能平衡。

像往常一样 - 正确工作的正确工具。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T00:50:56.733

一方面，按照您的描述拆分 ViewModel 可以使您的代码库非常清晰，因为您可以确保每个 ViewModel 都完全适合用途并且没有不必要的属性。另一方面，这意味着您需要维护更多代码 - 对实体的更改很可能意味着对多个 ViewModel 的更改。

另一方面，一个大的 ViewModel 方法基本上具有完全相反的优点和缺点 - 需要维护的代码更少，但 ViewModel 不太适合目的。

这里没有真正的正确或错误答案，您必须权衡每种方法的利弊，并决定哪种方法最适合您。

一种中途方法是使用一个 ViewModel 用于创建/更新，一个用于检索，一个用于删除，因为创建/更新可能非常相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T23:28:23.940

从长远来看，将它们分开会更好，因为虽然每个 ViewModel 中包含的数据可能相似甚至相同，但意图是不同的。例如， Create 和 Update ViewModels 肯定是相似的，但有一些重要的区别。首先，创建视图模型通常没有实体的身份，并且拥有它可能会令人困惑，因为它没有意义。其次，如果应用程序支持部分更新，则更新的 ViewModel 可能是对现有实体的更改集合，而不是整个实体。

如果您正在努力实现[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)，则可以通过共享整个 ViewModel 类以外的方式实现可重用性。相反，您可以创建更小的可重用组件，并通过组合而不是继承来重用。试图强制单个 ViewModel 类来满足所有要求将是错误的，因为代码更难以推理。很多时候，简单的复制和粘贴比 OOP 提供的工作做得更好。

# sql - JIRA 查询没有父母的问题

> ID：12168253
> 
> 赞同：5
> 
> 时间：2012-08-28T22:11:50.777
> 
> 标签：sql, jira

我正在使用我不是管理员的 JIRA 实例，所以我没有安装插件的选项。我正在尝试过滤以查找特定项目中没有父级的问题（不是其他项目的子任务），但我想不出一个好的方法。以下查询返回 ID 为 84 的特定父级的问题，但我不确定如何调整它以解决没有父级的问题：

```
project = FOO AND Status = Open AND parent = FOO-84 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T23:43:08.727

这似乎是不可能的，因为执行“parent = null”或“”会告诉您父字段不支持空值搜索。

但是，要获取顶级问题列表，您可以通过以下方式使用 issueType 字段：

```
project = FOO AND Status = Open AND issuetype in standardIssueTypes() 
```

要获取子任务列表：

```
project = FOO AND Status = Open AND issuetype in subTaskIssueTypes() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-26T15:18:11.163

对于任何搜索的人，这是我的 JQL：

```
issuetype = Task AND issueLinkType != "Child to" ORDER BY created DESC 
```

# android - 由父级捕获 onTouch 事件，处理并传递给子级

> ID：12168254
> 
> 赞同：21
> 
> 时间：2012-08-28T22:11:51.473
> 
> 标签：android, android-layout, click, touch, touch-event

我试图了解 Android 如何处理触摸事件并有点困惑。据我了解，触摸事件被发送到根视图并传递给孩子。我有`FrameLayout`一个容器`Fragment`。第一个片段视图是`ScrollView`，第二个是某种`Gallery`(Horizo​​ntalListView)，最后一个也是`FrameLayout`. 每次布局中只有一个片段。我想要做的是识别用户在屏幕上的滑动，以供应用程序使用。我想计算滑动次数并在几次滑动后做一些事情。

我试图把 a`OnTouchListener`放在顶部，但是当孩子是或`FrameLayout`时它不会被调用。我试图返回并最终返回，但我得到了相同的结果 - 它永远不会被调用。`ScrollView``Gallery``false``true``onTouch`

我该怎么做？我只想“透明地”处理触摸事件并将它们传递给我，就像我什至没有触摸它们一样。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-28T22:36:40.373

我的理解是，它实际上走向了另一个方向。子视图首先触发他们的事件（有点）。根视图 get`dispatchTouchEvent()`被调用，它将事件向下传播到子视图`onTouchEvent()`，然后根据它们返回 true 或 false，`onTouchEvent()`调用父视图。

拦截这样的事情的正常解决方案是像这样覆盖`dispatchTouchEvent(MotionEvent ev)`一个人的活动：

```
@Override
public boolean dispatchTouchEvent (MotionEvent ev) {
  // Do your calcluations
  return super.dispatchTouchEvent(ev);
} 
```

这个文档在[这里](http://developer.android.com/reference/android/app/Activity.html#dispatchTouchEvent%28android.view.MotionEvent%29)。请注意，您还可以在任何`ViewGroup`（例如 a`FrameLayout`等）中覆盖该方法

# python - 为 wx.TextCtrl 创建子类

> ID：12168256
> 
> 赞同：1
> 
> 时间：2012-08-28T22:12:17.587
> 
> 标签：python, wxpython, wxwidgets

我正在为 wxpython 中的 wx.TextCtrl 创建一个子类。

我希望此类将额外数据添加到 wx.TextCtrl 小部件，类似于将额外数据添加到 ComboBox 或 ListBox 的方式。

这是我的代码：

```
import wx
class ExtraDataForTxtCtrl(wx.TextCtrl):

    def __init(self, ExtraTextData):
        self.ExtraTextData=ExtraTextData

    def getExtraTCData(self):
        return self.ExtraTextData

    def setExtraTCData(self, ExtraTextData):
        self.ExtraTextData=ExtraTextData 
```

我的问题是我是 python 新手，不知道如何实现它以及它是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:40:28.807

```
import wx
class ExtraDataForTxtCtrl(wx.TextCtrl):

    def __init__(self,*args,**kwargs):
        self.ExtraTextData=kwargs.pop("ExtraTextData")
        wx.TextCtrl.__init__(self,*args,**kwargs)

    def getExtraTCData(self):
        return self.ExtraTextData

    def setExtraTCData(self, ExtraTextData):
        self.ExtraTextData=ExtraTextData 
```

可能更好的解决方案是使用 set/getattr

```
class DataTxtCtrl(wx.TextCtrl):

    def __init__(self,*args,**kwargs):
        self.datadict = {}
        self.ExtraTextData=kwargs.pop("ExtraTextData")
        wx.TextCtrl.__init__(self,*args,**kwargs)
    def __getattr__(self,attr):
        return self.datadict[attr]
    def __setattr__(self,attr,val):
        self.datadict[attr]=val 
```

然后您可以设置许多变量并像平常一样使用它

```
 a = wx.App(redirect=False)
   f = wx.Dialog(None,-1,"Example")
   te = DataTxtCtrl(f,-1,"some_default")
   te.somevar = "hello"
   te.someother = "world"
   print te.somevar+" "+te.someothervar
   f.ShowModal() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:26:48.390

我没有创建子类，而是决定创建自己的类，它将额外的字符串值链接到 wx.textCtrl 小部件。

感谢所有贡献的人！:)

这是我的代码：

```
class TextDataHolder:
    def __init__(self, wxTextControl, data):

        self.wxTextControl=wxTextControl
        self.data=data

    def setDataTxt(self,data):
        self.wxTextControl=wxTextControl
        self.data=data

    def getDataTxt(self):
        return self.data 
```

下面是我如何实现它：

```
import wx, TextDataHolder

exampleCtrl=wx.TextCtrl(self, -1, "Hello")
exampleData=TextDataHolder.TextDataHolder(exampleCtrl,"Sup?")
print exampleData.getDataTxt() #prints 'Sup?' 
```

# php - 检查 PHP 代码中是否安装了 FirePHP

> ID：12168257
> 
> 赞同：0
> 
> 时间：2012-08-28T22:12:25.057
> 
> 标签：php, pear, libraries, firephp

有什么方法可以确定服务器上是否安装了 FirePHP（通过 PEAR）？我想让登录 FirePHP 成为可能，但也不要让没有该工具的每个人的代码崩溃。

这个例子，我想象它应该如何工作：

```
$message = "hello";
function log($message) {
    if (library_exists('FirePHPCore/fb.php')) {
        require_once('FirePHPCore/fb.php');
        ob_start();
        \FB::log($message);
    } else {
        SomeBoringLogger::log($message);
    }
} 
```

我还没有找到像我的**library_exists**方法这样的东西。PHP中有类似的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T22:18:43.197

```
@include_once('FirePHPCore/fb.php'); // Ignore any errors here, as we check for existance
if (class_exists('FirePHP')) { // Do something after this 
```

[http://php.net/manual/en/function.class-exists.php](http://php.net/manual/en/function.class-exists.php)

[FirePHP 使用`FirePHP`它的类名](https://github.com/cadorn/firephp-libs/blob/master/packages/core/lib/FirePHPCore/FirePHP.class.php)，所以如果它可用，则应该定义该类

* * *

对于 PHP 5.3.2 或更高版本，请使用 zerkms 的建议：

```
(!stream_resolve_include_path('FirePHPCore/fb.php')===FALSE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T22:21:09.487

使用`include_once`，因此它不会终止请求。正如@Brad 建议的那样，`class_exists`之后使用。

```
$message = "hello";

safe_include_once('FirePHPCore/fb.php');
if (class_exists('FB')) {
   function log($message) { 
      //using FirePHP
   }
} else {
   function log($message) {
      SomeBoringLogger::log($message);
   }
}

function safe_include_once($path) {
  if ($path = stream_resolve_include_path($path)) {
    include_once($path);
  }
} 
```

[编辑]`stream_resolve_include_path`在`safe_include_path`.

[Edit2] 更快的运行时日志记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T22:20:13.737

`file_exists()`可用于您的情况。

# document - ElasticSearch ID 约束

> ID：12168260
> 
> 赞同：23
> 
> 时间：2012-08-28T22:12:40.783
> 
> 标签：document, elasticsearch, identifier

对于 ElasticSearch 文档 ID，是否有任何字符约束或限制？

我真的很想知道正斜杠“/”是否会在这里引起任何问题？我有一些我想索引的新闻提要。问题在于包含此数据的数据库将 UID 设置为新闻提要的 URL。不要问我为什么要这样设计，因为我没有得到任何线索。

我想为 ElasticSearch 文档使用相同的标识符（URL）。我已经成功地使用了 GUID、字母数字和数字字符，没有任何问题。

如果我不能，最好的解决方法是什么 - 我应该对整个网址进行编码吗？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-30T02:59:11.343

没有限制。可以使用正斜杠。但是为了在 REST API 中使用这样的 id，它必须是 url 编码的：

```
$ curl -XPUT "localhost:9200/id-test-index/rec/1+1%2F2" -d '{"field" : "one and a half"}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-15T01:41:43.913

~~斜杠“/” URL 编码损坏：[https ://github.com/elasticsearch/elasticsearch/issues/2903](https://github.com/elasticsearch/elasticsearch/issues/2903)~~

斜线“/”不再被破坏。这个问题已被解决。

# cocoa - Cocoa Sandbox：如何使用 NSSavePanel 获得写入多个文件或目录的权限

> ID：12168261
> 
> 赞同：8
> 
> 时间：2012-08-28T22:12:46.600
> 
> 标签：cocoa, appstore-sandbox

因此 NSSavePanel 当前返回一个带有扩展名的文件 url，并且您的应用程序有权写入该文件。

有没有办法让用户选择要写入的目录？例如，如果应用程序一次导出十几个图像，则用户不会提前指定名称。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T03:00:26.690

你需要 NSOpenPanel。

```
NSOpenPanel * openPanel = [NSOpenPanel openPanel];
[openPanel setCanChooseFiles:NO];
[openPanel setCanChooseDirectories:YES];
[openPanel setAllowsMultipleSelection:NO]; 
```

# clojure - Clojure core.logic 中的阶乘

> ID：12168267
> 
> 赞同：6
> 
> 时间：2012-08-28T22:13:33.017
> 
> 标签：clojure, prolog, logic, clojure-core.logic

我想使用 core.logic 编写阶乘。我找到了这个序言片段

```
factorial(0, 1).
factorial(N, M):- N1 is N - 1, factorial (N1, M1), M is N*M1. 
```

并尝试通过以下方式将其翻译为 core.logic

```
(defne factorialo [n m]
  ([0 1])
  ([n m] (fresh [n1 m1]
            (== (- n 1) n1)
            (== (* n m1) m)
            (factorialo n1 m1))))

(run* [q]
  (factorialo 3 q)) 
```

消息失败

```
clojure.core.logic.LVar cannot be cast to java.lang.Number
  [Thrown class java.lang.ClassCastException] 
```

在 core.logic 中编写阶乘的正确方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T13:28:38.747

Prolog 中的算术通常意味着隐式投影——您不再使用逻辑变量，而是使用它们绑定的实际值。在 core.logic 中还没有很好的糖，你必须使投影明确：

```
(defne factorialo [n m]
  ([0 1])
  ([n m]
     (fresh [n1 m1]
       (project [n]
         (== n1 (- n 1)))
       (factorialo n1 m1)
       (project [n m1]
         (== m (* n m1))))))

(run 1 [q]
  (factorialo 3 q)) 
```

在 core.logic 0.8.0 alphas 中，支持有限域上的约束逻辑编程。这改进了 Prolog 的算术故事：

```
(defne factorialfd [n m]
  ([0 1])
  ([n m]
     (fresh [n1 m1]
       (infd n1 m1 (interval 0 Integer/MAX_VALUE))
       (+fd n1 1 n)
       (factorialfd n1 m1)
       (*fd n m1 m))))

(run 1 [q]
  (infd q (interval 0 Integer/MAX_VALUE))
  (factorialfd 3 q)) 
```

请注意，变量的域必须明确，但我们不再需要为投影而烦恼。然而，这项工作还处于 Alpha 阶段，未来该解决方案的外观可能会发生变化。

# django - Django：render_to_response 到另一个视图

> ID：12168277
> 
> 赞同：0
> 
> 时间：2012-08-28T22:14:27.457
> 
> 标签：django, url, redirect, view, render-to-response

如何将“render_to_response 参数”传递给新视图？

```
def show_list(request, id):
    try:
        profile = request.user.get_profile()
        list = Lista.objects.get(user_profile = profile)
    except Lista.DoesNotExist:
        c = {}
        c.update(csrf(request))
        titlepage = "ooops, you don't have a list YET! click on button to create one!"
        c = {'profile' : profile, 'request' : request, 'titlepage' : titlepage}
        return render_to_response('/profiles/list/create/',c,context_instance=RequestContext(request)) 
```

最后一行这不起作用，url /profiles/list/create/ 重定向到视图 create_list。

好吧，我知道我可以编写类似 redirect(/profiles/list/create/) 的东西，但是这样我就不能通过字典 c。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T22:20:54.290

您应该使用`django.contrib.messages`来显示您的消息并将用户重定向到另一个视图。

查看代码：

```
from django.contrib import messages
from django.shortcuts import redirect

def show_list(request, id):
    try:
        # normal flow
    except Lista.DoesNotExist:
        messages.warning("ooops, you don't have a list YET! click on button to create one!")
        return redirect("/profiles/list/create/") 
```

在创建模板的某处：

```
{% if messages %}
<ul class="messages">
    {% for message in messages %}
    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
    {% endfor %}
</ul>
{% endif %} 
```

还要记得正确[启用消息](https://docs.djangoproject.com/en/dev/ref/contrib/messages/#enabling-messages)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T06:55:45.320

```
return render_to_response('my_template.html',
                      my_data_dictionary,
                      context_instance=RequestContext(request)) 
```

# perl - 在 Perl 中正确检测文件的行尾？

> ID：12168282
> 
> 赞同：5
> 
> 时间：2012-08-28T22:15:02.067
> 
> 标签：perl, newline

问题：我有在 Windows 和 *nix 上生成的数据（主要是 CSV 格式），并且主要在 *nix 上处理。Windows 使用 CRLF 作为行尾，而 Unix 使用 LF。对于任何特定文件，我不知道它是否有 windows 或 *nix 行尾。到目前为止，我一直在写这样的东西来处理差异：

```
while (<$fh>){
    tr/\r\n//d;
    my @fields = split /,/, $_;
    # ...
} 
```

在 *nix 上，\n 部分相当于 chomping，如果它是 Windows 生成的文件，则另外去掉 \r (CR)。

但是现在我想 Text::CSV_XS b/c 我开始获取带有引用数据的更奇怪的数据文件，可能带有嵌入的换行符等。为了让这个模块读取这些文件，Text::CSV_XS: :getline() 要求您指定行尾字符。（我不能像上面那样读取每一行，tr/\n\r//d，他们用不能正确处理嵌入换行符的 Text::CSV b/c 对其进行解析）。如何*正确*检测任意文件是否使用 windows 或 *nix 样式的行尾，以便我可以告诉 Text::CSV_XS::eol() 如何 chomp()？

我在 CPAN 上找不到仅检测行尾的模块。我不想首先通过 dos2unix 转换我的所有数据文件，b/c 文件很大（数百 GB），每个文件花费 10 多分钟来处理如此简单的事情似乎很愚蠢。我想过编写一个函数来读取文件的前几百个字节并计算 LF 和 CRLF，但我拒绝相信这没有更好的解决方案。

有什么帮助吗？

注意：所有文件要么完全以windows-line 结尾，要么以*nix 结尾，也就是说，它们不会混合在一个文件中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T22:53:07.803

您可以使用`:crlf` [PerlIO 层](http://perldoc.perl.org/PerlIO.html)打开文件，然后告诉[Text::CSV_XS](http://search.cpan.org/~hmbrand/Text-CSV_XS-0.91/CSV_XS.pm)用作`\n`行结束符。这会将任何 CR/LF 对静默映射到单行提要，但这大概就是您想要的。

```
use Text::CSV_XS;
my $csv = Text::CSV_XS->new( { binary => 1, eol => "\n" } );

open( $fh, '<:crlf', 'data.csv' ) or die $!;

while ( my $row = $csv->getline( $fh ) ) {
     # do something with $row
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-28T22:42:08.033

从 Perl 5.10 开始，您可以使用它来检查一般行尾，

```
s/\R//g; 
```

它应该适用于所有情况，包括 *nix 和 Windows。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-28T22:30:51.040

读入每个文件的第一行，查看最后一个字符。如果是`\r`，则文件来自 Windows，如果不是，则为 *nix。然后`seek`开始并开始处理。

如果一个文件有可能有混合的行尾（例如嵌入换行符的不同类型），你只能猜测。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T22:38:56.037

理论上无法可靠地确定行尾：这个文件是单行，带有 DOS 行尾并带有 embeded `\n`s，还是这是一堆行，`\r`在某些行的末尾有一些杂散字符？

```
foo\n
ba\r\n 
```

相对

```
foo\nba\r\n 
```

如果统计分析不是一个选项，因为它太不准确和昂贵（扫描如此大的文件需要时间），你必须真正*知道*编码是什么。

如果您可以控制生成应用程序或使用某种元数据来跟踪生成数据的平台，则最好指定确切的文件格式。

在 Perl 中，字符`\n`表示依赖于语言环境：`\n`/`\012`在 *nix 机器上，`\r`/`\015`在旧 Mac 上和序列`\r\n`/`\015\012`在 DOS 后裔又名 Windows 上。因此，要进行可靠的处理，您应该使用八进制值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-23T22:31:59.363

您可以使用该[`PERLIO`](http://perldoc.perl.org/perlrun.html#PERLIO)变量。这样做的好处是不必根据平台修改脚本的源代码。

如果您正在处理 DOS 文本文件，请将环境变量设置`PERLIO`为`:unix:crlf`：

```
$ PERLIO=:unix:crlf my-script.pl dos-text-file.txt 
```

如果你*主要*处理 DOS 文本文件（例如在 Cygwin 上），你可以把它放在你的`.bashrc`:

```
export PERLIO=:unix:crlf 
```

（我认为该值应该是`PERLIO`Cygwin 上的默认值，但显然不是。）

# asp.net - 我可以在 ASP.NET 的用户控件中使用 AdSence 代码吗？

> ID：12168287
> 
> 赞同：0
> 
> 时间：2012-08-28T22:15:22.107
> 
> 标签：asp.net, user-controls, adsense

我认为这不是在这里问的可行方法。但是，我可以在 ASP.NET 的 UserControl 中使用 AdSense 代码吗？如果我在用户控件中使用它，是否会在所有使用用户控件的地方显示相同的广告？

PS：如果对未来的 SO 观众没有用处，将根据建议删除此问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T05:10:13.150

> 是否会在所有使用用户控件的地方显示相同的广告？

不，广告会根据页面而有所不同......因为用户控件与使用它的页面一起呈现......所以当您的页面将呈现时。您的用户控件也将呈现.. Adsense 代码的新请求将转到 google 以显示不同的广告。

# asp.net-mvc-4 - 复杂模型上的 MVC Html.DisplayNameFor

> ID：12168288
> 
> 赞同：9
> 
> 时间：2012-08-28T22:15:27.987
> 
> 标签：asp.net-mvc-4, razor

我有一个复杂类型的模型，即用户/地址/地址列表

```
public class User{
public List<Address> Addresses{get;set;}
} 
```

在我的视图中，我正在显示这个

```
<fieldset><legend>@Html.DisplayNameFor(model=>model.Addresses)</legend>
<table>       
<tr>
    <th>
        @Html.DisplayNameFor(m => Model.Addresses.Street)
    </th>
    <th>
        @Html.DisplayNameFor(model => model.Addresses.City)
    </th>
<th>
        @Html.DisplayNameFor(model => model.Addresses.State)
    </th>

    </tr>
@foreach (var item in Model.Addresses) {    
<tr>
    <td>
        @Html.DisplayFor(m => item.Street)
    </td>
    <td>
        @Html.DisplayFor(m => item.City)
    </td>
    <td>
        @Html.DisplayFor(m => item.State)
    </td>
</tr>
} 
    </table></fieldset> 
```

DisplayNameFor Street/City/State 不起作用。

在子对象上获取 DisplayNameFor 的正确方法是什么？

蒂亚杰

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T17:46:00.910

我变了

```
@Html.DisplayNameFor(m => Model.Addresses.Street) 
```

到

```
@Html.DisplayNameFor(m => Model.Addresses.FirstOrDefault().Street) 
```

不要使用`@Html.DisplayNameFor(m => Model.Addresses[0].Street)`，因为如果您需要编辑第一行，您将无法使用这种方式。

现在一切都按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-04T14:36:26.970

您还可以使用 Linq 来避免索引错误。我用这是我的代码 -

```
@Html.DisplayNameFor(m => Model.Addresses.first().Street) 
```

以下错误消失了。

```
Cannot apply indexing with [] to an expression of type 'System.Data.Objects.DataClasses.EntityCollection<Address> 
```

但是最好使用以下语句直接使用名称

```
@Html.DisplayName("Street") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-22T14:30:57.170

这可能会更好：

```
@Html.DisplayNameFor(m => Model.Addresses.FirstOrDefault().Street) 
```

如果列表为空，也可以使用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-22T14:44:33.167

要显示地址属性的名称，您可以定义一个空`Adress`模型

```
{
  var adress =new Models.Address();
} 
```

并像这样使用它

```
 @Html.DisplayNameFor(m => adress.Street) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-23T16:13:15.170

在 ASP.NET Core 中，`Html.DisplayNameForInnerType()`可以改用：

```
@Html.DisplayNameForInnerType((Address address) => address.Street) 
```

但是，您需要明确指定 lambda 表达式参数的类型 ( `Address address`)。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-29T14:24:38.283

你使用的`DisplayNameFor`方式不对。`Addresses`是一个列表，它没有像`Street`, `City`, . 这样的属性`State`。因此，您希望如何显示名称。

在这种情况下，直接使用视图中的名称而不是使用 helper 不是那么简单。

# javascript - javascript - 在文本输入区域创建双向更新

> ID：12168289
> 
> 赞同：4
> 
> 时间：2012-08-28T22:15:40.977
> 
> 标签：javascript, html

这可能很简单，但我似乎在不断减少的圈子里跑来跑去......

我正在为我们的工资单区域开发一个网页，并且...

问：是否可以让两个文本输入字段自动相互更新并双向工作。即一个将根据输入更新另一个，反之亦然

我在这里追求的是什么...

将员工当前工资输入到文本输入中

然后工资单可以将数据输入到两个文本输入之一（新工资或百分比增加）

输入新薪水将自动更新**百分比增加**或输入百分比增加将自动更新**新薪金**字段

整个想法是允许工资单使用百分比或实际工资来得出新数字

谢谢弗兰基 G

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:28:36.407

这是一个非常基本的实现，没有验证输入的值是数字：

```
window.onload = function() {    
    var currentSal = document.getElementById("current"),
        percentInc = document.getElementById("percent"),
        newSal = document.getElementById("new");

    percentInc.onkeyup = function() {
        newSal.value = currentSal.value * (1 + percentInc.value / 100);
    };
    newSal.onkeyup = function() {
        percentInc.value = (newSal.value - currentSal.value) / currentSal.value * 100;
    };    
};​ 
```

这假设您的 html 标记使用元素 ID“当前”、“百分比”和“新”，但显然您可以更改这些。在百分比增加或新工资字段中的任何键上，只需进行适当的计算并更新其他字段。整个事情都在页面的 onload 事件中，以便`document.getElementById()`可以找到元素 - 您可以将其放在页面末尾的脚本块中（尽管所有内容都包含在这样的函数中，以防止变量全局范围）。

演示： http: [//jsfiddle.net/5pD​​dM /](http://jsfiddle.net/5pDdM/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:48:22.000

您必须实现 onChange 方法或 onkeyup。

两者都是可用的，尽管 onChange 会在用户离开字段并更改输入时触发，而 onkeyup 会在您释放按下的键时触发（意思是，如果您按住按钮，它不会触发，只有在释放后才会触发）。

在该函数中，您可以执行类似的操作

```
function salEntered(sal)
{
    document.getElementById("#perc").value = (document.getElementById("#origSal").value / sal )* 100;
}

function percEntered(perc){
    var new_sal = document.getElementById("#origSal").value * ( 1+ perc/100);
    document.getElementById("newSal").value = new_sal;
} 
```

并将它们绑定到任一命名事件。我把 perc 作为一个完整的十进制表示法。

使用绑定它们：

```
<input type="text" id="newSal" onChange="salEntered(document.getElementById('newSal').value)" /> 
```

或onkeyup。

不能测试，等我醒了再做。

错的时候请指正。使用 var 关键字将变量保持在正确的范围内，即函数。

# asp.net-mvc - DevExpress 中的 Render 和 GetHtml 方法有什么区别？

> ID：12168292
> 
> 赞同：3
> 
> 时间：2012-08-28T22:15:45.220
> 
> 标签：asp.net-mvc, asp.net-mvc-2, devexpress

我想知道在使用 DevExpress MVC Extensions 时使用 Render 方法与使用 GetHtml 方法有什么区别？我知道 GetHtml 返回一个 MvcHtmString，而 Render 返回 void，但我想知道选择使用哪一个可能有什么实际区别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T22:20:07.690

根据 DevExpress 站点，看起来他们现在做同样的事情：

[http://www.devexpress.com/Support/Center/p/Q388623.aspx](http://www.devexpress.com/Support/Center/p/Q388623.aspx)

> 目前，Render 和 GetHtml 方法做同样的事情：返回一个渲染字符串。以前，Render 方法直接将渲染字符串写入 Response。由于以下重大更改，我们已更改此行为：

# ruby-on-rails - 为什么在 ruby on rails 中未设置依赖销毁时关联记录被删除？

> ID：12168296
> 
> 赞同：0
> 
> 时间：2012-08-28T22:16:15.437
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rubygems, ruby-on-rails-3.2

出于某种原因，当我删除上传的照片时，它所属的相册也会自动删除。

没有任何意义，因为我没有在任何模型上设置“依赖破坏”。

**这是终端日志：**

```
Started DELETE "/settings/photo_gallery/photos/86" for 127.0.0.1 at 2012-08-28 22:39:50 +0100
[af820895e0bf5c0b031bb5ea297290ee] [127.0.0.1] Processing by PhotosController#destroy as JS
[af820895e0bf5c0b031bb5ea297290ee] [127.0.0.1]   Parameters: {"id"=>"86"}
[af820895e0bf5c0b031bb5ea297290ee] [127.0.0.1]   Photo Load (0.4ms)  SELECT `photos`.* FROM `photos` WHERE `photos`.`id` = 86 LIMIT 1
[af820895e0bf5c0b031bb5ea297290ee] [127.0.0.1]   PhotoAlbum Load (0.2ms)  SELECT `photo_albums`.* FROM `photo_albums` WHERE `photo_albums`.`photo_id` = 86 LIMIT 1
[af820895e0bf5c0b031bb5ea297290ee] [127.0.0.1]   Profile Load (3.2ms)  SELECT `profiles`.* FROM `profiles` WHERE `profiles`.`photo_id` = 86 LIMIT 1
[af820895e0bf5c0b031bb5ea297290ee] [127.0.0.1]    (0.3ms)  BEGIN
[af820895e0bf5c0b031bb5ea297290ee] [127.0.0.1]   SQL (0.6ms)  DELETE FROM `photos` WHERE `photos`.`id` = 86
[af820895e0bf5c0b031bb5ea297290ee] [127.0.0.1]    (12.0ms)  COMMIT
[af820895e0bf5c0b031bb5ea297290ee] [127.0.0.1]   PhotoAlbum Load (15.2ms)  SELECT `photo_albums`.* FROM `photo_albums` WHERE `photo_albums`.`id` = 36 LIMIT 1
[af820895e0bf5c0b031bb5ea297290ee] [127.0.0.1] Redirected to http://localhost:3000/settings/photo_gallery/36
[af820895e0bf5c0b031bb5ea297290ee] [127.0.0.1] Completed 302 Found in 46ms (ActiveRecord: 31.9ms)
[affa94ee1fa7dde2725d6f75c8cfb998] [127.0.0.1] 

Started DELETE "/settings/photo_gallery/36" for 127.0.0.1 at 2012-08-28 22:39:50 +0100
[affa94ee1fa7dde2725d6f75c8cfb998] [127.0.0.1] Processing by PhotoAlbumsController#destroy as JS
[affa94ee1fa7dde2725d6f75c8cfb998] [127.0.0.1]   Parameters: {"id"=>"36"}
[affa94ee1fa7dde2725d6f75c8cfb998] [127.0.0.1]   PhotoAlbum Load (1.2ms)  SELECT `photo_albums`.* FROM `photo_albums` WHERE `photo_albums`.`id` = 36 LIMIT 1
[affa94ee1fa7dde2725d6f75c8cfb998] [127.0.0.1]    (0.1ms)  BEGIN
[affa94ee1fa7dde2725d6f75c8cfb998] [127.0.0.1]   SQL (0.3ms)  DELETE FROM `photo_albums` WHERE `photo_albums`.`id` = 36
[affa94ee1fa7dde2725d6f75c8cfb998] [127.0.0.1]    (4.6ms)  COMMIT
[affa94ee1fa7dde2725d6f75c8cfb998] [127.0.0.1] Redirected to http://localhost:3000/settings/photo_gallery
[affa94ee1fa7dde2725d6f75c8cfb998] [127.0.0.1] Completed 302 Found in 22ms (ActiveRecord: 6.3ms)
[e5d66fa562a52440eb4e710bfc660402] [127.0.0.1] 
```

**相册型号：**

```
class PhotoAlbum < ActiveRecord::Base

    belongs_to :user
    has_many :photos
    belongs_to :photo

    attr_accessible :album_title, :user_id, :photo_id 
```

**照片模型：**

```
class Photo < ActiveRecord::Base

    belongs_to :photo_album

    attr_accessible :photo_album_id, :photo_title, :image, :remote_image_url, :banner_axis
    mount_uploader :image, ImageUploader 
```

**用户显示视图：**

```
<%= link_to "", @banner, :confirm => 'Are you sure?', :method => :delete, :remote => true %> 
```

**用户控制器显示操作：**

```
 def show
   profile_banner_album_id = @user.photo_albums.find_by_album_title("profile banner").id
   @banner = Photo.find_by_photo_album_id(profile_banner_album_id)
 end 
```

我已经离开铁轨一段时间了，所以有点生锈，所以我可能会遗漏一些非常明显的东西。查看日志，我不确定为什么在删除照片后会删除相册。

期待在这里得到一些帮助。亲切的问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:22:28.393

这一行：

```
[af820895e0bf5c0b031bb5ea297290ee] [127.0.0.1] Completed 302 Found in 46ms (ActiveRecord: 31.9ms) 
```

会建议第一个动作正在完成，同时正在调用第二个动作。photo_gallery#index 中没有什么奇怪的地方吗？还是照片模型上的滤镜？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:28:53.473

```
Started DELETE "/settings/photo_gallery/36" for 127.0.0.1 at 2012-08-28 22:39:50 +0100
[affa94ee1fa7dde2725d6f75c8cfb998] [127.0.0.1] Processing by PhotoAlbumsController#destroy as JS 
```

这意味着销毁操作是通过 JS 在您的相册控制器上调用的。

这不是 Rails 问题，您有另一个 JS 调用在删除照片后破坏了相册。

也许当你点击照片的删除按钮时，相册的删除按钮也会被点击，或者类似的东西......

# actionbarsherlock - 如何设置 ActionItem 文本的颜色

> ID：12168299
> 
> 赞同：0
> 
> 时间：2012-08-28T22:16:58.190
> 
> 标签：actionbarsherlock

使用主题，如何设置 ActionItem 的文本颜色？我可以更改标题、副标题和选项卡的文本颜色，但不能更改操作项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:51:18.437

使用`actionMenuTextColor`主题属性！

它是这样定义的：

```
<!-- Color for text that appears within action menu items. -->
<attr name="actionMenuTextColor" format="color|reference" /> 
```

# c# - 使用 HTML Agility Pack 解析表格

> ID：12168300
> 
> 赞同：1
> 
> 时间：2012-08-28T22:17:03.353
> 
> 标签：c#, html-table, html-agility-pack

在下面的 HTML 中，我可以解析`table`元素，但我不知道如何跳过`th`元素。

我只想获取`td`元素，但是当我尝试使用时：

```
foreach (HtmlNode cell in row.SelectNodes("td")) 
```

...我有一个例外。

```
<table class="tab03">
  <tbody>
    <tr>
      <th class="right" rowspan="2">first</th>
    </tr>
    <tr>
      <th class="right">lp</th>
      <th class="right">name</th>
    </tr>
    <tr>
      <td class="right">1</td>
      <td class="left">house</td>
    </tr>
    <tr>
      <th class="right" rowspan="2">Second</th>
    </tr>
    <tr>
      <td class="right">2</td>
      <td class="left">door</td>
    </tr>
  </tbody>
</table> 
```

**我的代码：**

```
var document = doc.DocumentNode.SelectNodes("//table");
string store = "";

if (document != null)
{
    foreach (HtmlNode table in document)
    {
        if (table != null)
        {
            foreach (HtmlNode row in table.SelectNodes("tr"))
            {
                store = "";
                foreach (HtmlNode cell in row.SelectNodes("th|td"))
                {
                    store = store + cell.InnerText+"|";
                }

                sw.Write(store );
                sw.WriteLine();  
            }
        }
    }
}

sw.Flush();
sw.Close(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T22:21:22.683

您的 XPath 语法不正确。请试试：

```
HtmlNode cell in row.SelectNodes("//td") 
```

这将为您提供`td`可以迭代的元素集合`foreach`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T23:23:19.853

此方法使用 LINQ 查询`HtmlNode`具有 name 的实例`td`。

我还注意到您的输出显示为`val|val|`（带有尾管），此示例`string.Join(pipe, array)`用作删除该尾管的不那么可怕的方法：`val|val`。

```
using System.Linq;

// ...

var tablecollection = doc.DocumentNode.SelectNodes("//table");
string store = string.Empty;

if (tablecollection != null)
{
    foreach (HtmlNode table in tablecollection)
    {
        // For all rows with at least one child with the 'td' tag.
        foreach (HtmlNode row in table.DescendantNodes()
            .Where(desc =>
                desc.Name.Equals("tr", StringComparison.OrdinalIgnoreCase) &&
                desc.DescendantNodes().Any(child => child.Name.Equals("td",
                    StringComparison.OrdinalIgnoreCase))))
        {
            // Combine the child 'td' elements into an array, join with the pipe
            // to create the output in 'val|val|val' format.
            store = string.Join("|", row.DescendantNodes().Where(desc =>
                desc.Name.Equals("td", StringComparison.OrdinalIgnoreCase))
                .Select(desc => desc.InnerText));

            // You can probably get rid of the 'store' variable as it's
            // no longer necessary to store the value of the table's
            // cells over the iteration.
            sw.Write(store);
            sw.WriteLine();
        }
    }
}

sw.Flush();
sw.Close(); 
```

# objective-c - Set default rightBarButtonItem for UINavigationController

> ID：12168306
> 
> 赞同：0
> 
> 时间：2012-08-28T22:17:23.293
> 
> 标签：objective-c, ios, ios5, uinavigationcontroller, uiappearance

Sup guys,

I have a tabBarController with a navigationController on each tab.

I wanted to set de default right bar button of navigation bar so I wouldn't have to write the same code on 3 different view controllers.

I tried `[[UINavigationBar appearance] setRightBarButtonItem:myButton];`

but had no success, is says: `-[_UIAppearance setRightBarButtonItem:]: unrecognized selector sent to instance`

Then I tried to create my own UINavigationController subclass so I could set the button like: `self.navigationItem.rightBarButtonItem = myButton` but again no success, nothing seems to happen probably because I dont have a navigationItem at this time.

Anyone have another solution?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:26:28.703

If you inherit from the `UIViewController` you can set the right button like this

```
UIBarButtonItem * rightButton = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"foobar.png"] style:UIBarButtonItemStylePlain target:self action:@selector(myAction)];
self.navigationItem.rightBarButtonItem = rightButton;
[rightButton release]; 
```

# plugins - Notepad++ Rtf 编辑插件

> ID：12168310
> 
> 赞同：8
> 
> 时间：2012-08-28T22:17:40.890
> 
> 标签：plugins, notepad++, rtf

Notepad++ 有没有 rtf 高亮的插件？澄清一下，我的意思是当一个人以纯文本形式打开一个 rtf 文件时，是否有一个插件可以突出显示 rtf 语句（如“{\rtf...}”、“{\colortbl...}”等），例如它与 c++、c#、html 等以及折叠 rtf 语句块（如 xml 文件）的能力一起使用？提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-27T17:49:34.563

大家好消息！[我在这里](https://github.com/nakohdo/NPP.RTF/blob/master/userDefineLang_RTF.xml)找到了 RTF 的 UDL 。

通过此[链接](http://sourceforge.net/apps/mediawiki/notepad-plus/?title=User_Defined_Language_Files)找到它。

**[2016 年 8 月 2 日编辑]**用户定义语言列表现在可在此地址获得：[https ://github.com/notepad-plus-plus/userDefinedLanguages/blob/master/udl-list.md](https://github.com/notepad-plus-plus/userDefinedLanguages/blob/master/udl-list.md)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T20:43:23.150

简短的回答：我不知道，可能不会。

长答案：这是一个重复的问题；一个相关的答案是：http: [//sourceforge.net/projects/notepad-plus/forums/forum/331753/topic/3445473](http://sourceforge.net/projects/notepad-plus/forums/forum/331753/topic/3445473)

回复： [NotePad++ 的富文本插件？](https://stackoverflow.com/questions/8065138/plugin-for-notepad-for-rich-text)

# java - 在 html 中使用小程序？

> ID：12168312
> 
> 赞同：7
> 
> 时间：2012-08-28T22:17:57.253
> 
> 标签：java, html, applet

我想用这个applet[这个applet](http://www.wilutions.com/outldd/index.html)在一个html 文档中。在本网站的示例中，他们使用：

```
<applet code="de.wim.outldd.examples.DragDropTest_Applet"
    width="150" height="150" alt="Applet1" archive="soutldd.jar">
</applet> 
```

当我尝试它时它不起作用。我的 HTML 文档位于提取目录的中间。我如何在 html 中使用小程序，有人请试试这个。

控制台中的错误

```
java.lang.RuntimeException: java.lang.ExceptionInInitializerError
    at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: java.lang.ExceptionInInitializerError
    at de.wim.outldd.OutlookDD.init(OutlookDD.java:73)
    at de.wim.outldd.examples.DragDropTest_Applet$1.run(DragDropTest_Applet.java:29)
    at java.security.AccessController.doPrivileged(Native Method)
    at de.wim.outldd.examples.DragDropTest_Applet.<init>(DragDropTest_Applet.java:26)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)
    at java.lang.reflect.Constructor.newInstance(Unknown Source)
    at java.lang.Class.newInstance0(Unknown Source)
    at java.lang.Class.newInstance(Unknown Source)
    at sun.plugin2.applet.Plugin2Manager$12.run(Unknown Source)
    at java.awt.event.InvocationEvent.dispatch(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)
Caused by: java.security.AccessControlException: access denied (java.util.PropertyPermission java.io.tmpdir read)
    at java.security.AccessControlContext.checkPermission(Unknown Source)
    at java.security.AccessController.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPermission(Unknown Source)
    at java.lang.SecurityManager.checkPropertyAccess(Unknown Source)
    at java.lang.System.getProperty(Unknown Source)
    at de.wim.outldd.OutlDDNativeLib.loadDllFromResource(OutlDDNativeLib.java:135)
    at de.wim.outldd.OutlDDNativeLib.loadDll(OutlDDNativeLib.java:104)
    at de.wim.outldd.OutlDDNativeLib.<clinit>(OutlDDNativeLib.java:62)
    ... 19 more
Exception: java.lang.RuntimeException: java.lang.ExceptionInInitializerError 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T14:03:46.020

您的小程序正在尝试从预先授权的***java.io.tmpdir***系统属性中读取临时目录值。由于安全原因，Applet 在权限受限的沙盒环境中运行。要修复它，请覆盖默认安全策略以允许您的小程序通过在属性上设置属性权限 - ***java.util.PropertyPermission***来读取属性。要覆盖默认权限，请在用户主目录的 .java.policy 文件中定义策略。建议您编辑用户特定的策略文件，而不是 JRE 安全目录下的全局策略文件。请参考以下模板：

```
grant codeBase "<code base>" { 
   permission <type> "<target>", "<actions>"; 
   permission <type> "<target>", "<actions>"; 
   ... 
}; 

For eg. 
grant codeBase "http://geosim.cs.vt.edu/geosim/-" { 
  permission java.util.PropertyPermission "java.io.tmpdir", "read";
  ... 
}; 
```

* * *

## 编辑：

* * *

我注意到您已经在顶部的帖子中指定了小程序链接。因此，我提供了一步一步的指南来帮助您入门。

干得好 -

1.  将 $JRE_HOME/lib/security/java.policy 文件复制到您的用户主目录（在 Windows 上为 c:\users\<用户名>）作为***.java.policy***文件。***请注意前面的“.” 在文件名中。***

2.  将以下行添加到 .java.policy 文件的末尾：

    授予codeBase“ [http://www.wilutions.com/outldd/-](http://www.wilutions.com/outldd/-) ”{
    权限java.security.AllPermission；};

3.  如下在appletviewer中运行applet，看看它是否有效。小程序查看器[http://www.wilutions.com/outldd/example.html](http://www.wilutions.com/outldd/example.html)

4.  请注意，我指定小程序的所有权限是为了让您入门，但授予所有权限可能不安全。您应该只授予所需的权限。所以，我把它留给你来解决。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:37:24.077

您是否按照[此处](http://www.wilutions.com/outldd/example.html)找到的指南进行操作，并且您确定指定的路径与您的`directory/html`页面相关吗？

另外，小程序`JAR`文件`soutldd.jar`路径是正确的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T22:44:23.967

转到`Java preferences->advance`并打开 Java**控制台**，以便您可以查看在 HTML 中加载小程序时发生的情况。

## 在窗户里

java首选项：控制面板-> java

# mysql - 需要对 mysql 表进行一些调整（帮助）

> ID：12168313
> 
> 赞同：0
> 
> 时间：2012-08-28T22:18:00.373
> 
> 标签：mysql, html

我需要在 mysql 中创建一个 24/7 表，比如行应该是天（周一，周二...周日），列应该是 24 小时（列），比如（1,2,3,...24） .

我所做的是创建单独的表格，例如星期一一张桌子，星期二一张桌子等等，它们的列是 1,2,3,...24。

最后做了一个 UNION ALL 以按照我想要的方式将所有行放在一起，但问题是行（表）名称没有显示，因为联合只组合列而不是表名。

我确切地想要 7 行作为天和 24 列作为小时，关于如何做到这一点的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:19:46.603

`SELECT`用当天的名称为您的所有 s 添加一个额外的列

```
SELECT 'Sunday', `1`, `2`, `3`... FROM `Sunday`
UNION ALL
SELECT 'Monday', `1`, `2`, `3`... FROM `Monday`
UNION ALL
... 
```

# python - Python 字典 - 读取键时出错

> ID：12168314
> 
> 赞同：1
> 
> 时间：2012-08-28T22:18:14.460
> 
> 标签：python, dictionary

我在弄字典，我以前从来没有遇到过问题。我写了几个循环来帮助匹配和清除 dict，除了我不断收到以下错误。

```
Traceback (most recent call last):
  File "C:/Users/Service02/Desktop/D/TT/test.py", line 10, in <module>
    if resultDict[currentImageTest] == oldDict["image" + str(j)]:
KeyError: 'image1' 
```

不知道为什么明显存在关键错误。使困惑。任何帮助表示赞赏！

```
resultDict = {"image1":1, "image2":2, "image3":3, "image4":4, "image5": 5}
oldDict = {"image1":1, "image2":22, "image3":3, "image4":47, "image5": 5}

i=1
j=1
while i<6:
    currentImageTest = "image" + str(i)

    while j<6:
        if resultDict[currentImageTest] == oldDict["image" + str(j)]:
            del resultDict[currentImageTest]

        else:
            pass

        j+=1
    i+=1

print resultDict 
```

**最终结果（已解决）：**

```
i=1
while i<6:
    currentImageTest = "image" + str(i)
    j=1
    while j<6:
        if oldDict["image" + str(j)] == resultDict[currentImageTest]:
            del resultDict[currentImageTest]
            break
        else:
            pass

        j+=1
    i+=1

print resultDict 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:29:32.397

```
if resultDict[currentImageTest] == oldDict["image" + str(j)]:
            del resultDict[currentImageTest] 
```

在您删除的第一个循环( `i=1`and ) 和您尝试与之比较的下一个循环 ( and ) 中，但由于已经删除，所以没有找到`j=1``resultDict["image1"]``i=1``j=2``resultDict["image1"]``oldDict["image2"]``resultDict["image1"]``key`

编辑：

在这里更好地使用`for`循环而`range()`不是while：

```
resultDict = {"image1":1, "image2":2, "image3":3, "image4":4, "image5": 5}
oldDict = {"image1":1, "image2":22, "image3":3, "image4":47, "image5": 5}

for i in range(1,6):
    currentImageTest = "image" + str(i)
    for j in range(1,6):
        if resultDict[currentImageTest] == oldDict["image" + str(j)]:
            del resultDict[currentImageTest]
            break
        else:
            pass 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:30:16.317

发生的事情是您试图引用一个不存在的键，在本例中为“image1”。您想使用检查来确保不会遇到 KeyError。

```
if resultDict.has_key(currentImageTest) and resultDict[currentImageTest] == oldDict["image" + str(j)] 
```

要么那个，要么你可以把它包装在一个 try..except

# javascript - 双条件jQuery函数事件

> ID：12168319
> 
> 赞同：-2
> 
> 时间：2012-08-28T22:18:26.097
> 
> 标签：javascript, jquery, ajax

如何指定第二个条件，该条件要求用户不仅要单击链接，还要单击 div 之间的区域才能转到landing.html？

```
<script src="http://code.jquery.com/jquery-1.5.1.min.js"></script> 

<script language="JavaScript" type="text/javascript"> 
    $(document).ready(function () {

        $("#postos").click(function() { 
            $("#linkos").attr('href', 'landing.html');
        });

        $('#clickdiv div').click(function () { 
            $("#linkos").attr('href', 'landing.html');
        });

    });

</script>

<a id="postos" href="#"></a>

<div id="clickdiv">please click</div>

<a id="linkos" href='javascript:window.alert("click the link and div");'><br/><img src="pic.png"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T00:01:57.840

我***强烈***建议您以不同的方式进行此操作。以这种方式使用 div 会导致糟糕的设计；更不用说，强迫用户点击多个元素感觉很笨重和乏味。

但是，我已经为您提供了如何执行此操作的示例：http: [//jsfiddle.net/2q3SQ/27/](http://jsfiddle.net/2q3SQ/27/)。

我还为您提供了另一个可能更有用的示例：http: [//jsfiddle.net/2q3SQ/28/](http://jsfiddle.net/2q3SQ/28/)

链接（可能有用）：

*   [http://code.google.com/edu/submissions/html-css-javascript/](http://code.google.com/edu/submissions/html-css-javascript/)

# vb.net - 将 Matlab 转换为 VB.NET

> ID：12168321
> 
> 赞同：3
> 
> 时间：2012-08-28T22:18:38.920
> 
> 标签：vb.net, matlab, code-conversion

我最近被分配了一项任务，将一些用 matlab 编写的算法转换为 VB.NET（如果 VB.NET 效率不高，则为 C#）。

matlab 代码本身由很多矩阵代数组成。我最初在这里查看并发现有一个 Matlab Coder 包装了 matlab 代码，但是当我提出该选项时，我被告知它是不可取的。

我被困在某种意义上，我不知道如何使用适当的工具来解决这个问题。

获取库通常可以接受吗（http://www.codeproject.com/Articles/5835/DotNetMatrix-Simple-Matrix-Library-for-NET 或[http://www.planet-source-code.com/vb/ scripts/ShowCode.asp?txtCodeId=907&lngWId=10](http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=907&lngWId=10)，这些是我唯一能找到的）来实现这些算法，还是通常不赞成？

我是否需要重新发明轮子并实现自己的代数算法（矩阵乘法、choleksy 分解等）？

基本上，我不确定完成这项任务的公认方式是什么，任何输入都会受到赞赏。如果这里不允许，我很抱歉，这是我第一次发帖，但我是一个很长一段时间的潜伏者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:47:19.207

你有几种可能性。

如果你的应用程序可以承受加载时间`MCR`，你可以使用`Matlab .NET Builder`. 它将编译一个`.NET`类，该类将在`MCR`下面静默运行。您的所有客户端都将被迫安装`MCR`在他们的计算机上。

如果您的代码必须是本机代码，您可以重写代码或使用`Matlab Coder`，这会将代码转换为不可读的本机`c++`代码。

如果您选择重写代码，我建议您在 上找到`LAPACK`线性代数例程的实现`.NET`，因为 Matlab 是基于它们的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:42:36.820

这样的代码已发布，因此可以使用和学习。只需确保代码的许可证（如果有）适合您的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-28T17:26:17.373

您可以通过 COM 接口从 VB.net 访问 Matlab 函数

[http://www.mathworks.com/help/matlab/matlab_external/view-matlab-functions-from-visual-basic-object-browser.html](http://www.mathworks.com/help/matlab/matlab_external/view-matlab-functions-from-visual-basic-object-browser.html)

# python - Python最小二乘

> ID：12168325
> 
> 赞同：0
> 
> 时间：2012-08-28T22:18:54.263
> 
> 标签：python

我的代码有一点问题：

```
def pval(x, p, i):
return sum(p[0]*(cos(i*x)) for i in range(1, p[1] + 1))

if __name__ == '__main__':
   main()

x, y = loadtxt("Data.txt" , unpack=True)
errfunc = lambda p, x, y: pval(p, x, i) - y # Distance to the target function
p0 = [49, 100] # Initial guess for the parameters
p1, success = optimize.leastsq(errfunc, p0[:], args=(x, y)) 
```

我想出一个提示，说名称“优化”未定义，但我看不到错误来自哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T22:22:51.017

问题是最后一行：（`p1, success = optimize.leastsq(...)`错误消息回溯指出）。

Python 不知道你的名字是什么意思`optimize`。你必须告诉它：`from scipy import optimize`在你的程序顶部附近。

* * *

您还调用了一个`main()`不存在的函数（至少在您的代码段中）。通常你会像这样构建你的代码：

```
def pval(x, p, i):
    return sum(p[0]*(cos(i*x)) for i in range(1, p[1] + 1))

def main():
    x, y = loadtxt("Data.txt" , unpack=True)
    errfunc = lambda p, x, y: pval(p, x, i) - y # Distance to the target function
    p0 = [49, 100] # Initial guess for the parameters
    p1, success = optimize.leastsq(errfunc, p0[:], args=(x, y))
    # do whatever with p1

if __name__ == '__main__':
   main() 
```

`if __name__ == '__main__'`或者只是从您的代码中完全删除该部分。

# jquery - 基于容器大小的jquery动态书本样式分页

> ID：12168326
> 
> 赞同：0
> 
> 时间：2012-08-28T22:19:01.830
> 
> 标签：jquery, dynamic, pagination

如果您曾经使用过我正在尝试创建的电子阅读器应用程序。我想加载大量文本，然后将其分成页面。当文本开始溢出或以任何方式被截断时，应该会出现这些“分页符”。我已经尝试过各种方法来做到这一点，但我没有太多运气。

现在我正试图打破每一个单词（可怕而缓慢）并测量它离顶部有多远，在它达到一定高度后，我试图编辑 html 以关闭最后一页并开始一个新的.

我想避免在一定数量的字符或单词之后分隔内容，因为那是不一致的。该文档中也可能包含 HTML。

坦率地说，我什至不知道从哪里开始，而且我一直在寻找一些关于如何进行的提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:50:38.117

不幸的是，这是一项艰巨的任务。为了让您了解您面临的问题，请查看以下内容：http: [//www.hpl.hp.com/techreports/2009/HPL-2009-123.pdf](http://www.hpl.hp.com/techreports/2009/HPL-2009-123.pdf)。

这个问题类似：[html pagination and 'paged media'](https://stackoverflow.com/questions/3849598/html-pagination-and-paged-media)

如果您可以按照那里的建议使用[W3C 分页媒体 CSS 标准](http://www.w3.org/TR/CSS21/page.html)，那就太好了，但它在[firefox](https://bugzilla.mozilla.org/show_bug.cgi?id=115199)、chrome 或 safari中[还没有得到很好的支持。](http://en.wikipedia.org/wiki/Comparison_of_layout_engines_%28Cascading_Style_Sheets%29#Grammar_and_rules)令人震惊，但这似乎是 IE 领先于曲线的罕见案例之一。

我也强烈怀疑您应该找到一种加载文本段的方法。加载大量文本会占用内存，减慢页面速度，并且通常会破坏用户的浏览器。

# c# - 如何使这个数组+函数起作用？

> ID：12168330
> 
> 赞同：-1
> 
> 时间：2012-08-28T22:19:28.563
> 
> 标签：c#, xml, winforms, file

我需要阵列方面的帮助。我是 C# Winforms 的新手。

这是数组要去的函数，我正在尝试将数组发布到 XML 文件中：

```
 // ------------------- Functions
    static void XML_Array(string Data_Array)
    {
        String xmlfile = "/XMLFiles/Settings_Data.xml";

        XmlTextWriter xwriter = new XmlTextWriter(xmlfile, Encoding.Unicode);

        xwriter.WriteStartDocument();

        xwriter.WriteStartElement("XMLFILE");

        foreach (KeyValuePair<string, string> kvp in Data_Array)
        {
            String Element_Name = kvp.Key;
            String Element_Value = kvp.Value.ToString();

            xwriter.WriteStartElement(Element_Name);
            xwriter.WriteString(Element_Value);
            xwriter.WriteEndElement();
        }

        xwriter.WriteEndDocument();
        xwriter.Close();

    } 
```

这是我的数组，这里我要做的是当我按下按钮 2 以在我的函数上发送数组，以及在 XML 文件中添加数组数据的函数

```
 private void button2_Click(object sender, EventArgs e)
    {
        Dictionary<string, string> Data_Array = new Dictionary<string, string>();
        Data_Array.Add("Name", "textBox3.Text"); // Alex
        Data_Array.Add("Year", "textBox4.Text"); // 1988

        XML_Array(Data_Array);
    } 
```

## 更新

如果我的数组是，我该怎么做

```
Dictionary<string, string> Data_Array = new Dictionary<string, string>();
Data_Array.Add("Name", textBox3.Text); // Alex
Data_Array.Add("Year", textBox4.Text); // 1988

Data_Array.Add("Birthday", new Dictionary<string, string>()); 
```

并在生日中添加日、月

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:21:33.150

将方法的签名更改为

```
static void XML_Array(Dictionary<string, string> Data_Array) 
```

因为它不是 a`string`而是 a `Dictionary`。

正如 varg 和 Austin 评论的那样，您应该考虑重命名变量，因为当参数是名称时会令人困惑，`Data_Array`但实际上它是`Dictionary`一种完全不同类型的集合。您可能想要添加`Text`现有`TextBox`控件的属性，而不是字符串文字（带引号）`"textBox3.Text"`。

```
Data_Array.Add("Name", textBox3.Text); // Alex
Data_Array.Add("Year", textBox4.Text); // 1988 
```

`TextBox3`也是`TextBox4`新名字的好人选。

# oauth-2.0 - Box：发送状态和授权 url 并在重定向 url 中接收

> ID：12168331
> 
> 赞同：0
> 
> 时间：2012-08-28T22:19:33.480
> 
> 标签：oauth-2.0, box-api

Box 的授权链接如下所示：

[https://www.box.com/api/1.0/auth/ticketName](https://www.box.com/api/1.0/auth/ticketName)

我试图以这种方式包含状态：

[https://www.box.com/api/1.0/auth/ticketName?state=1234](https://www.box.com/api/1.0/auth/ticketName?state=1234)

但是重定向 url 的格式如下：

[https://www.example.com/authenticate/?ticket=ticketName&auth_token=xyz](https://www.example.com/authenticate/?ticket=ticketName&auth_token=xyz)

所以我的状态丢失了。

如何发送状态并将其返回到重定向 url？

过程是：

```
HttpClient client = new HttpClient();
String getUrl = "https://www.box.com/api/1.0/rest?action=get_ticket&api_key=" + API_KEY;
HttpMethod getMethod = new GetMethod(getUrl);
client.executeMethod(getMethod);
//Get ticket from response
String authorizationUrl = "https://www.box.com/api/1.0/auth/" + ticket + "?state=1234" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:48:33.110

Box 目前不支持在身份验证期间发送附加参数以回显给调用者。向调用者回显 &state=VALUE 是 OAuth2 流程的一部分，我们将很快为我们的 V2 API 推出该流程。

# rest - 从 JAX-RS 访问 EJB

> ID：12168334
> 
> 赞同：1
> 
> 时间：2012-08-28T22:19:46.920
> 
> 标签：rest, jakarta-ee, ejb, jersey, jax-rs

在开发 Java EE Web 应用程序时，我想知道`EJB`通过`Rest`.

该项目**不需要**Java 的动态 Web，因为客户端完全部署了 javascript，因此仅通过`Ajax`调用完成通信。

正如我所读到的，一种方法是`EJB`为其他功能创建 2 个来表示 Web 服务。

有没有办法避免 Web Service 部分？（完全避免战争）也许用`DI`？

需要 Java EE 6、EJB 3.1、Eclipse。我也相信正确的应用服务器应该是 Glassfish 而不是 Jboss，因为它与`EJB`3.0兼容

使用没有兴趣`JAX-WS`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T00:25:09.257

并不真地。在 Java EE 6 中，您可以直接将会话 Bean 发布为 JAX-WS Web 服务，但不能发布为 JAX-RS Web 服务。您几乎被困在创建一个承载 EJB 本身前面的 JAX-RS 服务的 WAR 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T16:09:18.660

使用 EJB 3.1，如果您将（正确注释的）会话 bean 打包到 WAR 中，您实际上可以将会话 bean 发布为 JAX-RS Web 服务。

因此，我能想到的最简单的解决方案是创建一个 WAR（如果您使用 Eclipse，则为动态 Web 应用程序）并在 Web 应用程序内创建一个 JAX-RS 注释的无状态会话 bean。您根本不需要任何 EJB 项目。

# ios - 是否需要重新上传应用以包含推送通知证书？

> ID：12168344
> 
> 赞同：0
> 
> 时间：2012-08-28T22:21:09.423
> 
> 标签：ios, app-store, push-notification

我有一个使用推送通知的应用程序。这些通知在开发中完美运行，但我在生产中遇到问题。当我签署并将我的应用程序上传到 App Store 时，我没有意识到我还没有启用推送通知。

我是否必须添加新的配置文件并重新上传应用程序才能解决此问题？

我正在使用相同的证书和相同的 xx.p12。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T01:32:55.653

是的。完成生产推送通知证书设置后，您需要重新生成您的配置文件并为您的应用程序签名。

原因是配置文件包含与推送通知服务和所有重要的 aps 环境信息相关的权利。

如果您不重新创建配置文件，则不会包含这些权利和信息。

有关更多信息，您可以查看[本地和推送通知编程指南](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/ProvisioningDevelopment/ProvisioningDevelopment.html#//apple_ref/doc/uid/TP40008194-CH104-SW1)，特别是配置部分。

# algorithm - 标准化分数数据集的最佳方法是什么？

> ID：12168346
> 
> 赞同：1
> 
> 时间：2012-08-28T22:21:29.377
> 
> 标签：algorithm, normalization

我有一堆 elo 分数（http://en.wikipedia.org/wiki/Elo_rating_system），大部分在 800-1300 之间（它是一个开放式等级，因此没有特定的最小值或最大值）。某人的分数从 1000 开始，然后根据表现上下移动。我想将它们标准化，以便我可以将分数显示为 5.0-10.0，并满足以下要求：

*   它必须反映所有分数的相对比例。或者换一种说法，由于所有分数都从 1000 开始并从那里向上或向下移动，因此每个分数与 1000 之间的距离应该反映在标准化中。例如，如果分数是 {950, 975, 1000, 1025}，它们应该归一化为低于 {1050, 1075, 1100, 1125} 的数字。

*   它必须保持分数之间的距离。例如，如果某些分数紧密地聚集在一起，比如 {950, 950, 955, 1100}，它们应该归一化为靠近的数字，比如 {6, 6, 6.1, 9}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:31:16.750

问题是您不知道输入范围的实际最小值和最大值是多少（因为 ELO 是一个开放式刻度）。

一旦你决定了你的最小值和最大值，剪辑和线性插值。

如果您不知道该怎么做（这是我怀疑的），请查看 wiki 以获取公式，和/或参加小学代数的进修课程。

# c++ - 使用原始类型进行模乘的方法

> ID：12168348
> 
> 赞同：14
> 
> 时间：2012-08-28T22:21:39.493
> 
> 标签：c++, algorithm

有没有办法在`(853467 * 21660421200929) % 100000000000007`没有 BigInteger 库的情况下构建（请注意，每个数字都适合 64 位整数，但乘法结果不适合）？

这个解决方案似乎效率低下：

```
int64_t mulmod(int64_t a, int64_t b, int64_t m) {
    if (b < a)
        std::swap(a, b);
    int64_t res = 0;
    for (int64_t i = 0; i < a; i++) {
        res += b;
        res %= m;
    }
    return res;
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-29T04:42:02.077

你应该使用[俄罗斯农民乘法](http://en.wikipedia.org/wiki/Ancient_Egyptian_multiplication)。它使用重复加倍来计算所有值`(b*2^i)%m`，如果设置了`i`第 th 位，则将它们添加进去`a`。

```
uint64_t mulmod(uint64_t a, uint64_t b, uint64_t m) {
    int64_t res = 0;
    while (a != 0) {
        if (a & 1) res = (res + b) % m;
        a >>= 1;
        b = (b << 1) % m;
    }
    return res;
} 
```

它改进了您的算法，因为它需要`O(log(a))`时间，而不是`O(a)`时间。

警告：无符号，仅在`m`63 位或更少时才有效。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-09-08T04:02:27.767

[Keith Randall 的回答](https://stackoverflow.com/a/12171020/60075)很好，但正如他所说，需要注意的是，它只有在`m`63 位或更少时才有效。

这是一个有两个优点的修改：

1.  即使`m`是 64 位，它也可以工作。
2.  它不需要使用模运算，这在某些处理器上可能很昂贵。

（请注意，`res -= m`and`temp_b -= m`行依赖于 64 位无符号整数溢出来给出预期的结果。这应该没问题，因为无符号整数溢出在 C 和 C++ 中是明确定义的。因此[，使用*无符号*整数类型](https://stackoverflow.com/q/18195715/60075)很重要。 )

```
uint64_t mulmod(uint64_t a, uint64_t b, uint64_t m) {
    uint64_t res = 0;
    uint64_t temp_b;

    /* Only needed if b may be >= m */
    if (b >= m) {
        if (m > UINT64_MAX / 2u)
            b -= m;
        else
            b %= m;
    }

    while (a != 0) {
        if (a & 1) {
            /* Add b to res, modulo m, without overflow */
            if (b >= m - res) /* Equiv to if (res + b >= m), without overflow */
                res -= m;
            res += b;
        }
        a >>= 1;

        /* Double b, modulo m */
        temp_b = b;
        if (b >= m - b)       /* Equiv to if (2 * b >= m), without overflow */
            temp_b -= m;
        b += temp_b;
    }
    return res;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-28T22:45:13.807

两种方法都对我有用。第一个与您的相同，但我将您的数字更改为明确的 ULL。第二个使用汇编符号，它应该工作得更快。密码学中也使用了一些算法（我猜主要是基于 RSA 和 RSA 的密码学），就像已经提到的蒙哥马利减少一样，但我认为实现它们需要时间。

```
#include <algorithm>
#include <iostream>

__uint64_t mulmod1(__uint64_t a, __uint64_t b, __uint64_t m) {
  if (b < a)
    std::swap(a, b);
  __uint64_t res = 0;
  for (__uint64_t i = 0; i < a; i++) {
    res += b;
    res %= m;
  }
  return res;
}

__uint64_t mulmod2(__uint64_t a, __uint64_t b, __uint64_t m) {
  __uint64_t r;
  __asm__
  ( "mulq %2\n\t"
      "divq %3"
      : "=&d" (r), "+%a" (a)
      : "rm" (b), "rm" (m)
      : "cc"
  );
  return r;
}

int main() {
  using namespace std;
  __uint64_t a = 853467ULL;
  __uint64_t b = 21660421200929ULL;
  __uint64_t c = 100000000000007ULL;

  cout << mulmod1(a, b, c) << endl;
  cout << mulmod2(a, b, c) << endl;
  return 0;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-02-20T08:08:21.140

对重复加倍算法的改进是检查一次可以计算多少位而不会溢出。可以对这两个参数进行早期退出检查——加速 N 不是素数的（不太可能？）事件。

例如 100000000000007 == 0x00005af3107a4007，它允许每次迭代计算 16（或 17）位。该示例的实际迭代次数为 3。

```
// just a conceptual routine
int get_leading_zeroes(uint64_t n)
{
   int a=0;
   while ((n & 0x8000000000000000) == 0) { a++; n<<=1; }
   return a;
}

uint64_t mulmod(uint64_t a, uint64_t b, uint64_t n)
{
     uint64_t result = 0;
     int N = get_leading_zeroes(n);
     uint64_t mask = (1<<N) - 1;
     a %= n;
     b %= n;  // Make sure all values are originally in the proper range?
     // n is not necessarily a prime -- so both a & b can end up being zero
     while (a>0 && b>0)
     {
         result = (result + (b & mask) * a) % n;  // no overflow
         b>>=N;
         a = (a << N) % n;
     }
     return result;
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-28T22:30:55.923

您可以尝试将乘法分解为加法：

```
// compute (a * b) % m:

unsigned int multmod(unsigned int a, unsigned int b, unsigned int m)
{
    unsigned int result = 0;

    a %= m;
    b %= m;

    while (b)
    {
        if (b % 2 != 0)
        {
            result = (result + a) % m;
        }

        a = (a * 2) % m;
        b /= 2;
    }

    return result;
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-05-23T04:15:30.660

`a * b % m`等于`a * b - (a * b / m) * m`

使用浮点运算来近似`a * b / m`. 该近似值留下了一个足够小的值，可用于正常的 64 位整数运算，`m`最多 63 位。

此方法受 a 的有效位限制`double`，通常为 52 位。

```
uint64_t mod_mul_52(uint64_t a, uint64_t b, uint64_t m) {
    uint64_t c = (double)a * b / m - 1;
    uint64_t d = a * b - c * m;

    return d % m;
} 
```

此方法受 a 的有效位限制`long double`，通常为 64 位或更大。整数运算限制为 63 位。

```
uint64_t mod_mul_63(uint64_t a, uint64_t b, uint64_t m) {
    uint64_t c = (long double)a * b / m - 1;
    uint64_t d = a * b - c * m;

    return d % m;
} 
```

这些方法要求`a`并且`b`小于`m`。要处理任意`a`and ，请在计算`b`之前添加这些行。`c`

```
a = a % m;
b = b % m; 
```

在这两种方法中，最终`%`操作都可以是有条件的。

```
return d >= m ? d % m : d; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-28T22:46:18.270

我可以建议对您的算法进行改进。

实际上，您`a * b`通过每次相加来迭代计算`b`，在每次迭代后进行取模。最好每次添加`b * x`，而`x`确定`b * x`不会溢出。

```
int64_t mulmod(int64_t a, int64_t b, int64_t m)
{
    a %= m;
    b %= m;

    int64_t x = 1;
    int64_t bx = b;

    while (x < a)
    {
        int64_t bb = bx * 2;
        if (bb <= bx)
            break; // overflow

        x *= 2;
        bx = bb;
    }

    int64_t ans = 0;

    for (; x < a; a -= x)
        ans = (ans + bx) % m;

    return (ans + a*b) % m;
} 
```

# ios - 拖动时出现双网格线？

> ID：12168350
> 
> 赞同：1
> 
> 时间：2012-08-28T22:21:44.150
> 
> 标签：ios, uitableview, uisearchdisplaycontroller

我有一张带搜索栏的桌子。我发现当搜索界面关闭时，有时网格下半部分会出现双网格线。当您移动桌子时，一组随手指移动，另一组保持固定在屏幕上。

这看起来像这样：

![截屏](../Images/4e0c7865c313de8b57a13c802b0126c5.png)

重现这个需要很大的努力，所以我上传了一个[小测试项目](http://github.com/tewha/ExtraGridLines)到github。

我还准备了一个关于运行中的错误的[QuickTime 电影：](http://raw.github.com/tewha/ExtraGridLines/master/ExtraGridLines.mov)

关键点似乎是：

*   表部分正在使用中。
*   返回一小部分行的搜索。

我尝试过的事情：

*   设置搜索结果表的`rowHeight`.
*   将`backgroundColor`两个表格和所有单元格的 设置为`[UIColor whiteColor]`。
*   在搜索结果表视图上尝试了 reloadData 而不是 self.tableView in `updateSearchResults`。（这可能是我应该做的，但对这个问题没有帮助。）

有人对这里发生的事情有任何见解吗？当然，还有如何解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T21:29:36.253

我最终为此使用了开发人员技术支持事件。

所以，对于后代来说：这是由于工作在错误的水平上造成的；而不是处理`UISearchBar`消息，而是处理`UISearchBarController`消息。

# python - python包statsmodels测试失败

> ID：12168351
> 
> 赞同：1
> 
> 时间：2012-08-28T22:21:49.390
> 
> 标签：python, statsmodels

我已经下载了 Python 包 statsmodels（使用 pip）并运行了测试，发现有几个测试失败了。测试命令是

```
>>> import statsmodels.api as sm
>>> sm.test() 
```

有两个错误和一个失败：

```
=====================================================================
ERROR: statsmodels.sandbox.panel.test_sandwich.test_cov_cluster_2groups
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/usr/local/lib/python2.7/site-packages/statsmodels/sandbox/panel/test_sandwich.py", line 30, in test_cov_cluster_2groups
    cov01, covg, covt = sw.cov_cluster_2groups(res, group, group2=time)
  File "/usr/local/lib/python2.7/site-packages/statsmodels/sandbox/panel/sandwich_covariance.py", line 555, in cov_cluster_2groups
    group_intersection = Group(group)
  File "/usr/local/lib/python2.7/site-packages/statsmodels/tools/grouputils.py", line 182, in __init__
    uni, uni_idx, uni_inv = combine_indices(group)
  File "/usr/local/lib/python2.7/site-packages/statsmodels/tools/grouputils.py", line 60, in combine_indices
    return_inverse=True)
  File "/usr/local/lib/python2.7/site-packages/numpy/lib/arraysetops.py", line 178, in unique
perm = ar.argsort(kind='mergesort')
TypeError: requested sort not available for type

======================================================================
ERROR: statsmodels.tsa.base.tests.test_datetools.test_infer_freq
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/nose/case.py", line 197, in runTest
self.test(*self.arg)
  File "/usr/local/lib/python2.7/site-packages/statsmodels/tsa/base/tests/test_datetools.py", line 63, in test_infer_freq
    npt.assert_string_equal(_infer_freq(b), 'B')
  File "/usr/local/lib/python2.7/site-packages/statsmodels/tsa/base/datetools.py", line 234, in _infer_freq
    elif delta >= timedelta(28*nobs) and delta <= timedelta(31*nobs):
TypeError: ufunc 'greater_equal' not supported for the input types, and the inputs could not be safely coerced to any supported types according to the casting rule 'safe'

======================================================================
FAIL: test_monotone_fn_inverter (statsmodels.distributions.tests.test_ecdf.TestDistributions)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/site-packages/statsmodels/distributions/tests/test_ecdf.py", line 41, in test_monotone_fn_inverter
    npt.assert_array_equal(f.y, x[::1])
  File "/usr/local/lib/python2.7/site-packages/numpy/testing/utils.py", line 707, in assert_array_equal
    verbose=verbose, header='Arrays are not equal')
  File "/usr/local/lib/python2.7/site-packages/numpy/testing/utils.py", line 636, in assert_array_compare
    raise AssertionError(msg)
AssertionError: 
Arrays are not equal

(mismatch 100.0%)
 x: array([ 15.,  14.,  13.,  12.,  11.,  10.,   9.,   8.,   7.,   6.])
 y: array([ 6,  7,  8,  9, 10, 11, 12, 13, 14, 15])

----------------------------------------------------------------------
Ran 1454 tests in 67.411s 
```

其他可能有用的信息：

*   `statsmodel v0.4.0`（也试过`v0.5.0`）
*   `numpy v1.6.2`
*   `scipy v0.10.1`
*   所有这些包都被pip'd
*   `python v2.7.3``brew install python`使用自制软件（即不是 OSX 本机 python）安装在 Mac OSX 10.8 上。
*   我还安装了一些其他包：`joblib v0.6.4`、`nose v1.1.2`和`patsy v0.1.0`. `Nose`需要进行测试，并且`patsy`需要`import statsmodels.api`. 测试套件还抱怨`joblib`需要并行运行。

我不确定前两个错误是怎么回事，而且失败看起来有点奇怪，有点像实现更改或其他什么......但我怀疑 statsmodels 家伙/gals 在他们调用它之前运行了他们的测试一天:) 那么这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T00:57:39.690

请尝试最新版本[http://pypi.python.org/pypi/statsmodels/0.4.3](http://pypi.python.org/pypi/statsmodels/0.4.3)

据我记得，所有这些错误都已修复。

第一个错误是 1.6.2 中 numpy 的行为发生了变化。

我认为，第二个与日期时间处理的变化有关，即在新的 pandas 版本中使用新的 numpy dtypes。

最后一个是测试中的错误。

邮件列表或问题跟踪器可能是报告这些测试失败的更好地方： [http ://groups.google.com/group/pystatsmodels](http://groups.google.com/group/pystatsmodels) [https://github.com/statsmodels/statsmodels/issues](https://github.com/statsmodels/statsmodels/issues)

# servlets - Java EE 6 企业应用程序：注入 bean 时警告“不满足的依赖关系：没有 bean 与注入点匹配”

> ID：12168353
> 
> 赞同：7
> 
> 时间：2012-08-28T22:22:02.027
> 
> 标签：servlets, netbeans, cdi, ear

我在 Netbeans 7.2 中创建了一个全新的 Java EE 6 Enterprise-Application。所以我有三个项目：

*   耳朵
*   EJB
*   战争

在 EJB 项目中，我创建了一个简单的 Bean：

```
package de.aidaorga.test;

import javax.ejb.LocalBean;   
import javax.ejb.Stateless;

@Stateless
@LocalBean
public class NewSessionBean2343 {
} 
```

在 WAR-Project 中，我在“Web Pages\WEB-INF”文件夹中创建了一个空白 beans.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://java.sun.com/xml/ns/javaee"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/beans_1_0.xsd">
</beans> 
```

我还创建了一个简单的 Servlet：

```
import de.aidaorga.test.NewSessionBean2343;
import java.io.IOException;
import javax.ejb.EJB;
import javax.inject.Inject;
import javax.servlet.ServletException;
import javax.servlet.annotation.WebServlet;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebServlet(name = "NewServlet2343", urlPatterns = {"/NewServlet2343"})
public class NewServlet2343 extends HttpServlet {
    @Inject
    NewSessionBean2343 newSessionBean2343_1;

    protected void processRequest(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
    }

    @Override
    protected void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    @Override
    protected void doPost(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {
        processRequest(request, response);
    }

    @Override
    public String getServletInfo() {
        return "Short description";
    }
} 
```

现在，Netbeans 向我显示了一个警告“不满足的依赖关系：没有 bean 与注入点匹配”，用于使用“@Inject”注释的字段“newSessionBean2343_1”。

在部署时，我得到以下异常：

```
Schwerwiegend: Exception while loading the app
Schwerwiegend: Exception while loading the app : WELD-001408 Unsatisfied dependencies for type [NewSessionBean2343] with qualifiers [@Default] at injection point [[field] @Inject NewServlet2343.newSessionBean2343_1]
org.jboss.weld.exceptions.DeploymentException: WELD-001408 Unsatisfied dependencies for type [NewSessionBean2343] with qualifiers [@Default] at injection point [[field] @Inject NewServlet2343.newSessionBean2343_1]
at org.jboss.weld.bootstrap.Validator.validateInjectionPoint(Validator.java:311)
at org.jboss.weld.bootstrap.Validator.validateInjectionPoint(Validator.java:280)
at org.jboss.weld.bootstrap.Validator.validateBean(Validator.java:143)
at org.jboss.weld.bootstrap.Validator.validateRIBean(Validator.java:163)
at org.jboss.weld.bootstrap.Validator.validateBeans(Validator.java:382)
at org.jboss.weld.bootstrap.Validator.validateDeployment(Validator.java:367)
at org.jboss.weld.bootstrap.WeldBootstrap.validateBeans(WeldBootstrap.java:380)
at org.glassfish.weld.WeldDeployer.event(WeldDeployer.java:199)
at org.glassfish.kernel.event.EventsImpl.send(EventsImpl.java:128)
at org.glassfish.internal.data.ApplicationInfo.start(ApplicationInfo.java:313)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:461)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:860)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:757)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1056)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:229)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:722) 
```

为什么我会收到此警告以及如何摆脱它？

谢谢你的帮助。

马库斯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T10:48:41.977

我解决了这个问题：我刚刚忘记了 EJB 项目中的 beans.xml。EAR 项目中的一个 beans.xml 是不够的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T05:02:26.210

首先，这只是一个 IDE 警告 - 重要的是您的代码是否编译。

代码看起来没有错，尽管我不记得我曾经两次注入一个 bean。但是恕我直言，这应该可行。

我认为 Netbeans 只能验证`@Inject`，但不能`@EJB`，这可以解释警告。

尝试将其部署到服务器并查看结果。

# c# - 通用异步完成方法

> ID：12168355
> 
> 赞同：1
> 
> 时间：2012-08-28T22:22:18.100
> 
> 标签：c#, silverlight, asynchronous, listbox

我有一个带有列表框和组合框的 silverlight 页面...

根据用户在列表框中单击的内容，我想填充下拉框。完成的事件对于列表框中的每个项目都是相同的（项目包括“BaseTypes”、“Bays”、“Face”等）

我怎样才能使完成的方法通用，这样我就不必每次调用都有一个？

```
private void lstEdits_SelectionChanged(object sender, SelectionChangedEventArgs e)
{
    ServiceCylinderClient obj = new ServiceCylinderClient();
    obj.GetBaysCompleted += new EventHandler<GetBaysCompletedEventArgs>(GetBaysCompleted(this, baysEventArgs));

    string selectedItem = lstEdits.SelectedItem as string;

    switch selectedItem
    {
         case "BaseTypes":
           obj.GetBaseTypesCompleted += new EventHandler<GetBaseTypesCompletedEventArgs>(GetBaysCompleted(this, baysEventArgs));
           obj.getGetBaseTypesAsync();
           break;
        case "Bays":
           obj.GetBaysCompleted += new EventHandler<GetBaysCompletedEventArgs>(GetBaysCompleted(this, baysEventArgs));
           obj.getGetBaysAsync();
           break;
    }
} 
```

就目前而言，每次调用我都必须有一个“完成的方法”，但是因为它们都会做同样的事情（只需设置列表框项目源）..我想让它通用以简化事情.

```
void GetBaseTypesCompleted(object sender, getBaseTypesCompletedEventArgs e)
{
    lstEdits.ItemsSource = e.Result;
}

void GetBaysCompleted(object sender, getBaysCompletedEventArgs e)
{
    lstEdits.ItemsSource = e.Result;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:56:16.010

我相信您需要使用反射从“CompletedEventArgs”中读取“Result”属性，因为它们并非都来自公开“Result”的基本类型。

您应该能够执行以下操作：

```
lstEdits.ItemsSource = (IEnumerable)e.GetType().GetProperty("Result").GetValue(e, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:39:00.740

我认为这个问题没有简单的解决方案，因为每个完成的方法对于不同的结果都有不同的 EventArgs。

# android - 自定义警报对话框 Android 中的 OnClickListener

> ID：12168358
> 
> 赞同：10
> 
> 时间：2012-08-28T22:22:27.950
> 
> 标签：android, button, android-alertdialog

我是一个自学成才的初学者，感谢耐心！谢谢！

在 Eclipse 中，我使用自己的 xml 文件（“custom_dialog”）制作了一个自定义警报对话框，它被称为“usernamealert”。

如果用户尚未输入用户名（即，username.length == 0），我希望弹出警报。

在这个布局中，我有一个 textView（“你叫什么名字？”）、editText 和按钮（“usernameButton”）。

在为按钮添加 onclicklistener 之前，一切正常。这是我的（相关）Java：

```
LayoutInflater inflater = getLayoutInflater();
View dialoglayout = inflater.inflate(R.layout.custom_dialog, (ViewGroup)     getCurrentFocus());
AlertDialog.Builder usernamebuilder = new AlertDialog.Builder(this);
usernamebuilder.setView(dialoglayout);

AlertDialog usernamealert = usernamebuilder.create(); 
```

当我把 onclicklistener 放进去时，它坏了！我应该把它放在哪里？

（以下是我尝试过的……都在我的 OnCreate 中）

```
LayoutInflater inflater = getLayoutInflater();
View dialoglayout = inflater.inflate(R.layout.custom_dialog, (ViewGroup)getCurrentFocus());
AlertDialog.Builder usernamebuilder = new AlertDialog.Builder(this);
usernamebuilder.setView(dialoglayout);

Button usernameButton = (Button) usernamealert.findViewById(R.id.usernameButton);
usernameButton.setOnClickListener(new OnClickListener() {

@Override
public void onClick(View v) {  
//store username in sharedprefs
usernamealert.dismiss();

}
}); 
```

在代码之后我说：

```
if (username.length() == 0) {
            usernamealert.show();
        } 
```

再一次，在我开始弄乱按钮之前它就起作用了！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-09T08:36:40.600

需要指定代码在哪里搜索按钮，如果它只有“findViewById”它将在主机的 xml 中搜索，它应该是

```
LayoutInflater inflater =getLayoutInflater();
                View myview = inflater.inflate(R.layout.dialoghireteachernegotiate, null);
                // Inflate and set the layout for the dialog
                // Pass null as the parent view because its going in the dialog layout
                builder.setView(myview);
                 Button addS = (Button) myview.findViewById (R.id.bAddS); 
```

这是我的课程 Hireteachernegotiate.class 的一部分，它有一个hireteachernegotiate.xml 的布局

```
 AlertDialog.Builder builder = new AlertDialog.Builder(this);
                // Get the layout inflater
                LayoutInflater inflater =getLayoutInflater();
                View myview = inflater.inflate(R.layout.dialoghireteachernegotiate, null);
                // Inflate and set the layout for the dialog
                // Pass null as the parent view because its going in the dialog layout
                builder.setView(myview);

                Button addS = (Button) myview.findViewById (R.id.bAddS);
                addS.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {
                        //do some stuff
                    }
                });

                Button minusS = (Button) myview.findViewById (R.id.bMinusS);
                addS.setOnClickListener(new View.OnClickListener() {

                    public void onClick(View v) {
                       //do other stuff
                    }
                });

                // Add action buttons
                       builder.setPositiveButton("YES", new DialogInterface.OnClickListener() {
                           public void onClick(DialogInterface dialog, int id) {

                               dialog.cancel();
                           }
                       });
                   builder.setNegativeButton("CANCEL", new DialogInterface.OnClickListener() {
                       public void onClick(DialogInterface dialog, int id) {
                           dialog.cancel();
                       }
                   });   

            builder.show(); 
```

这是对话框布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">

    <Button
        android:id="@+id/bAddS"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <Button
        android:id="@+id/bMinusS"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T22:36:44.697

尝试这个。

```
usernamebuilder.setCancelable(false)
usernamebuilder.setPositiveButton("OK", new DialogInterface.OnClickListener() {
       public void onClick(DialogInterface dialog, int id) {
            //do what you want.
       }
   }); 
```

看看这是否有效，或者它是否在某种程度上有所帮助。

# javascript - 每当在 IE 和 Chrome 中按下按钮时，Jquery 选择菜单组合框就会关闭

> ID：12168365
> 
> 赞同：0
> 
> 时间：2012-08-28T22:23:01.493
> 
> 标签：javascript, jquery-plugins, knockout.js

在我的 html 中，我有这个数据绑定

```
<select data-bind="options: graders,
    optionsText: 'LastName',
    optionsValue: 'Id',
    selectmenuValue: selectedGroup().GraderId,
    optionsCaption: 'Choose a grader'">
</select> 
```

在我的 JavaScript 中，我需要实时刷新 UI

```
ko.bindingHandlers.selectmenuValue = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        if (typeof ko.bindingHandlers.value.init !== 'undefined') {
            ko.bindingHandlers.value.init(element, valueAccessor, allBindingsAccessor, viewModel);
        }
    },

    update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        if (typeof ko.bindingHandlers.value.update !== 'undefined') {
            ko.bindingHandlers.value.update(element, valueAccessor, allBindingsAccessor, viewModel);
        }
        $(element).selectmenu();
    }
}; 
```

在 Firefox 中一切正常，但在 IE 和 Chrome 上，每当我将鼠标悬停在组合框上时，它的弹出窗口就会立即关闭。弹出窗口应该像在 Firefox 中一样保持打开状态。经过多次尝试，我发现如果我将鼠标从第一个项目移动到其他项目之一，同时按下它的按钮并按下该点，我可以让它保持打开状态。

有人知道如何解决这个问题吗？

更新：我刚刚意识到它的弹出窗口在 IE 和 Chrome 中的位置很少，我相信这就是上述行为的原因。仍在寻找修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:36:00.450

我相信您希望将样式设置为“下拉”

```
$(element).selectmenu({style: 'dropdown'}); 
```

# php - 带有 cURL 的错误订阅 instagram API

> ID：12168366
> 
> 赞同：2
> 
> 时间：2012-08-28T22:23:09.203
> 
> 标签：php, api, curl, instagram

这是我订阅/取消订阅实时 Instagram API 的代码。取消订阅有效，但订阅无效。我不太擅长 cUrl，我只是使用了[http://thegregthompson.com/instagram-real-time-api-php/](http://thegregthompson.com/instagram-real-time-api-php/)中的这部分代码并进行了一些额外的定制。

```
<?php
$url = "https://api.instagram.com/v1/subscriptions/";

$ch = curl_init();
if (isset($_GET['unsubscribe']))
{
    echo "unsubscribe";
    $url .= "?client_id=" . $config['instagram']['client_id'] . "&client_secret=" .                   
    $config['instagram']['client_secret'] . "&id=" . $_GET['tag'];
    curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "DELETE");
}
else
{
    $attachment =  array(
        'client_id' => $config['instagram']['client_id'],
        'client_secret' => $config['instagram']['client_secret'],
        'object' => 'tag',
        'object_id' => $_GET['tag'],
        'aspect' => 'media',
        'verify_token' => $config['instagram']['verify_token'],
        'callback_url'=> 'http://' . $_SERVER['HTTP_HOST'] . '/callback/endpoint.php'
    );
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
    curl_setopt($ch, CURLOPT_POST, true);
}

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);  //to suppress the curl output
$result = curl_exec($ch);
curl_close ($ch);
print_r($result);
?> 
```

$config 已正确包含。

我花了很多时间试图修复它，但没有办法。你能帮我完成订阅吗？

问我是否需要更多详细信息。

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T15:20:01.437

好的，我修好了：我认为我们应该在 CURLOPT_POSTFIELDS 之前设置 CURLOPT_POST

正确的

```
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment); 
```

不正确

```
curl_setopt($ch, CURLOPT_POSTFIELDS, $attachment);
curl_setopt($ch, CURLOPT_POST, true); 
```

# xcode - Xcode：如何从 shell 脚本中找到 $PRODUCT_NAME？

> ID：12168371
> 
> 赞同：1
> 
> 时间：2012-08-28T22:23:27.940
> 
> 标签：xcode, bash, scripting, build-environment

我正在编写一个其他开发人员将运行的命令行工具。我想从他们的 Info.plist 文件中提取应用程序的捆绑 ID。我可以使用 PlistBuddy 或 Python 的 plistlib 之类的东西来读取 plist，但我不知道如何可靠地提取 $PRODUCT_NAME 变量。如何从 shell 脚本执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:27:14.650

> 我想从他们的 Info.plist 文件中提取应用程序的捆绑 ID

您可以使用 PlistBuddy 从 plist 中获取捆绑 ID：

```
/usr/libexec/PlistBuddy -c "Print :CFBundleIdentifier" Info.plist 
```

产品名称不太可能可用，因为该信息存储在构建设置中，而不是信息 plist 中。

# codeigniter - CodeIgniter - 从单个表单上传多个文本条目和文件

> ID：12168373
> 
> 赞同：0
> 
> 时间：2012-08-28T22:23:41.903
> 
> 标签：codeigniter

我在一个页面上有一个表单。它有 5 个文本字段和 3 个上传文件字段。我需要将文本和文件路径写入数据库。我在网上看过很多例子，但大多数是上传单个文件或从同一个上传字段上传多个文件。

我是 CodeIgniter 的新手，所以代码片段会很有帮助。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T01:20:58.597

希望这可以帮助

```
$config['upload_path'] = $path; //$path=any path you want to save the file to...
$config['allowed_types'] = 'gif|jpg|png|jpeg'; //this is the file types allowed
$config['max_size'] = '1024'; //max file size

$config['max_width']  = '1024';//if file type is image
$config['max_height']  = '768';//if file type is image
//etc config for file properties, you can check all of them out on website 
```

现在假设你有 3 个文件，你想保存为**1.jpg, 2.jpg,3.gif**，它们是通过 3 个输入字段上传的，**pic1, pic2, pic3**这就是你要做的

```
for($ite=1;$ite<=3;$ite++){
    if(!empty($_FILES["pic".$ite]["name"])){ //if file is present
        $ext = pathinfo($_FILES['pic'.$ite]['name'], PATHINFO_EXTENSION); //get extension of file
        $config["file_name"]="$ite.$ext"; //rename file to 1.jpg,2.jpg or 3.jpg, depending on file number and its extension

        $this->upload->initialize($config); //upload library of codeigniter initialize function with config properties set earlier
        if(!$this->upload->do_upload("pic".$ite)){
            //error code

        }

        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T10:06:29.237

另一个建议是：

```
function upload()
{
    $config['upload_path'] = $path; //$path=any path you want to save the file to...
    $config['allowed_types'] = 'gif|jpg|png|jpeg'; //this is the file types allowed
    $config['max_size'] = '1024'; //max file size

    $config['max_width']  = '1024';//if file type is image
    $config['max_height']  = '768';//if file type is image

    $this->load->library('upload', $config);

    foreach($_FILES as $Key => $File)
    {
        if($File['size'] > 0)
        {
            if($this->upload->do_upload($Key))
            {
                $data = $this->upload->data();
                echo $data['file_name'];
            }
            else
            {
                // throw error
                echo $this->upload->display_errors();
            }
        }
    }
} 
```

这将自动适用于您发布的所有文件输入，它不关心名称或数量:)

# scala - scala 的 javadepend/ndepend

> ID：12168374
> 
> 赞同：6
> 
> 时间：2012-08-28T22:23:46.973
> 
> 标签：scala, static-analysis

[JArchitect](http://www.jarchitect.com/)和[NDepend](http://www.ndepend.com)是分别熟悉 Java 和 C# 中未知代码库的好工具。Scala有没有类似的工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T08:35:52.760

[Structure101](http://www.structure101.com)并未“正式”支持 Scala，但我们知道我们的一些客户正在将它与 Scala 一起使用。

# java - 如何从服务器获取太大的图像？

> ID：12168376
> 
> 赞同：2
> 
> 时间：2012-08-28T22:23:52.023
> 
> 标签：java, servlets, blackberry, client-server

我目前正在为黑莓开发，只是在尝试从服务器下载图像时遇到了这个问题。与设备通信的 servlet 工作正常，因为我已经对其进行了许多测试。但它给了我

> 413 HTTP 错误（“请求实体太大”）。

我想我只会得到字节，嗯，一部分一部分。我怎样才能做到这一点？

这是servlet（`doGet()`方法）的代码：

```
try {
    ImageIcon imageIcon = new ImageIcon("c:\\Users\\dcalderon\\prueba.png");

    Image image = imageIcon.getImage();
    PngEncoder pngEncoder = new PngEncoder(image, true);
    output.write(pngEncoder.pngEncode());

} finally {            
    output.close();        
} 
```

谢谢。值得一提的是，我正在开发客户端和服务器端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T06:40:47.917

我不知道服务器端代码。您可以查看此链接以了解如何使用分段上传文件以支持大文件上传

它也可以在黑莓上运行，需要进行一些修改。

[http://www.developer.nokia.com/Community/Wiki/HTTP_Post_multipart_file_upload_in_Java_ME](http://www.developer.nokia.com/Community/Wiki/HTTP_Post_multipart_file_upload_in_Java_ME)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T03:33:39.773

我不熟悉`PNGEncoder`您正在使用的类，但只是查看您的 servlet 代码，以及您对请求大小（2.2 MB）的评论，我猜您的部分问题是您正在**解压缩**图像，**然后**通过网络传输。

我认为您的 servlet 中不应该有任何`PNGEncoder`代码`ImageIcon`。`"c:\\Users\\dcalderon\\prueba.png"`您应该只使用普通字节读取文件`InputStream`，然后将其写入 servlet 的输出。我认为该文件是 PNG 图像、.mp3 文件还是任何其他内容并不重要。（尽管您可能需要将**Content Type**设置为`image/png`）。

所以，我会尝试传输**压缩**的图像（作为.png，就像它存储在磁盘上一样）。如果这仍然不起作用，那么建议使用*多部分*传输。

# php - 如果单词超过 30 个字符，请删除它们？

> ID：12168378
> 
> 赞同：0
> 
> 时间：2012-08-28T22:23:55.633
> 
> 标签：php

我需要从字符串中删除单词，如果它们超过 20 个字符。我已经尝试过了，但它只会添加换行符。

```
wordwrap($line,30,"",true); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T22:26:25.117

```
$str = 'asd qqqqqqqqqqqqqqqqq weq';

var_dump(preg_replace('~\b\S{5,}\b~', '', $str)); 
```

上面的代码删除了超过 5 个连续非空格字符的所有内容。将 5 替换为 30，你会得到你想要的

# ruby-on-rails-3.2 - Ruby on Rails 中的辅助方法不能按我的需要工作

> ID：12168384
> 
> 赞同：0
> 
> 时间：2012-08-28T22:24:25.607
> 
> 标签：ruby-on-rails-3.2

这是一个*helper.rb 的代码。而不是这 3 种方法（它们工作得很好）

```
def years_of_birth_select(form)
    form.select :year_of_birth, (1..31).to_a
  end

  def months_of_birth_select(form)
    form.select :month_of_birth, months
  end

  def days_of_birth_select(form)
    form.select :day_of_birth,  years
  end 
```

我试图只调用一种方法

```
 def date_of_birth_select(form)
    form.select :day_of_birth,  years
    form.select :month_of_birth, months
    form.select :year_of_birth, (1..31).to_a
 end 
```

它被称为

```
 = date_of_birth_select f 
```

它只显示**一个**选择，，，`:year_of_birth`选择。

我做错了什么，我应该怎么做才能`date_of_birth_select`正确调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:42:35.817

视图中显示的表单元素是辅助方法的返回值，默认为最后一个表达式。第一种情况，每个方法只有一行，所以结果`form.select ...` *是*返回值，所以表单选择显示正常。但是，当您将它们合并到一个方法中时，不会返回前两行的返回值，因此您只能获得`:year_of_birth`选择。

要获得所有这些，您必须将返回值（字符串）连接在一起：

```
def date_of_birth_select(form)
  ((form.select :day_of_birth,  years) +
   (form.select :month_of_birth, months) +
   (form.select :year_of_birth, (1..31).to_a)).html_safe
end 
```

最后[`html_safe`](http://yehudakatz.com/2010/02/01/safebuffers-and-rails-3-0/)是告诉rails它不应该转义字符串，否则默认情况下会这样做。

# css - 对齐div中的两个块

> ID：12168385
> 
> 赞同：1
> 
> 时间：2012-08-28T22:24:36.747
> 
> 标签：css, html, block

我已经创建了这个块： ![第一张图片](../Images/823b21bef6d318b863820c49fb9dc579.png)

我将在这个块中有两个部分，如下所示： ![第二张图片](../Images/7ce20feed82aeec53e1ce94aec1469f1.png)

这是我的块：

```
<div id="content_sc" > 
        <img src='images/paypal-donate.jpg'> 
</div> 
```

和CSS：

```
#content_sc {
top: 15px;
background: #fff;
width: 600px;
margin: 0 auto;
padding: 20px;
border: 1px solid #ccc;
-webkit-border-radius: 7px;
-moz-border-radius: 7px;
} 
```

我尝试了很多事情，但没有达到我想做的事情

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T22:28:52.897

干得好：

[http://jsfiddle.net/VALCw/](http://jsfiddle.net/VALCw/)

只是将您的两个元素浮动并真正将溢出放在容器上的情况。

# ruby-on-rails - 如何重写 Rails 资产路径？

> ID：12168390
> 
> 赞同：0
> 
> 时间：2012-08-28T22:24:51.933
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, amazon-s3

我开始将我站点中的所有资产移动到 S3，但我的资产路径遇到了问题。我的网站上有一个 WYSIWYG 编辑器，其中包含按绝对路径的图像，因此当您添加图像时，它不使用 rails image_tag 帮助器，而是添加这样的图像：

```
<img src="/system/images/image_1.jpg" /> 
```

问题是在生产中 URL`/system/images/image_1.jpg`会导致一个不存在的文件。

自然，两种解决方案是：1）在调用时动态替换 URL（gsub）；2）循环遍历数据库并替换 url。

然而，更好的解决方案是重写`/system/images/image_1.jpg`url 以指向 S3。我怎么做？

谢谢！

# java - Android 编写一个显示在“下载”应用程序中的文件

> ID：12168391
> 
> 赞同：0
> 
> 时间：2012-08-28T22:25:03.647
> 
> 标签：java, android

我正在尝试让我的应用程序导出一个 .csv 文件，该文件可以在下载 APP 中获取。我这样做的方式是通过文件输出

我通过调用 Environment.getExternalStorageDirectory().getAbsolutePath() 得到 remotedir

```
 * Download CSV
 */
public static void downloadCSV(String filename, String remoteDir) throws Exception{
    File dir = new File( remoteDir + "/download/");

    dir.mkdirs();

    //FileWriter f = new FileWriter("Download/" + filename + ".csv");
    File fileObject = new File(dir, filename);
    fileObject.delete();
    fileObject.createNewFile();
    ObjectOutputStream objectOut = null;
    FileOutputStream stream = new FileOutputStream(fileObject);
    objectOut = new ObjectOutputStream(new BufferedOutputStream(stream));

    /* Irrelevant code */

    String csv = Helper.getCSV(table.getColumnList(), view);
    objectOut.writeChars(csv);
    objectOut.close();
} 
```

每当我在手机（HTC One S）上测试它时，我在任何地方都看不到该文件。我希望我的 csv 文件在下载应用程序中弹出，但我不确定代表哪个目录。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:53:50.840

您可能必须在文件显示之前使用 MediaScanner 对其进行扫描，至少这是您能够从桌面查看它以进行查找/调试的方式。有关详细信息，请参阅[MediaScanner 文档](http://developer.android.com/reference/android/media/MediaScannerConnection.html#scanFile%28java.lang.String,%20java.lang.String%29)。

# c - 链接库的顺序是否应该对编译产生影响？

> ID：12168392
> 
> 赞同：0
> 
> 时间：2012-08-28T22:25:07.907
> 
> 标签：c, gcc, static-libraries

> **可能重复：**
> [链接器顺序 - GCC](https://stackoverflow.com/questions/45135/linker-order-gcc)
> [GCC C++ 链接器错误：未定义对“xxx 的 vtable”的引用，未定义对“ClassName::ClassName()”的引用](https://stackoverflow.com/questions/1095298/gcc-c-linker-errors-undefined-reference-to-vtable-for-xxx-undefined-refere)

我正在使用 GCC 来构建应用程序。主程序调用`myfunc()`驻留在静态库（例如）中的函数（例如`libmylib.a`）。此函数调用数学库中的`cosf()`and`sinf()`函数。

现在，在 gcc 命令行中，我给出了`-lmylib -lm`选项，构建顺利。但是，当库的顺序发生更改时，构建会失败并出现以下错误：

```
libmylib.a(mylib.o): In function `myfunc':
mylib.c:22: undefined reference to `cosf'
mylib.c:23: undefined reference to `sinf'
```

为什么 gcc 不使用按某种顺序给出的库完成构建？

# python - 如何在单独的行上显示列表中的数据

> ID：12168395
> 
> 赞同：0
> 
> 时间：2012-08-28T22:25:17.410
> 
> 标签：python, django

我正在建立一个库存系统，我有一个页面，可以按类别查看销售历史记录，它将显示所有已售商品、已售数量、库存总量、剩余数量、销售额、利润等......随时我按类别搜索（例如文具），显示如下。

```
Item Name    stock qty    sold qty     total stock   total amount            profit
Books          990        45 75 60     1035 900 990   14567 15666 12666    1777 1555 17777
Sciences       825        45 75 60     1035 900 990    14567 15666 12666    1777 1555 17777
Comics         930        45 75 60     1035 900 990    14567 15666 12666    1777 1555 17777 
```

但我真正想要的是：

```
Item Name    stock qty    sold qty     total stock   total amount            profit
Books          990        45            1035          14567                  1777 
Sciences       825        75            1035          15666                  1555 
Comics         930        60            990           12666                  17777 
```

从数据库中调用项目名称和库存数量并将其附加到列表中。对于已售商品的数量，我从数据库中调用此类商品的每个实例并计算它们的总数，然后附加到列表中。所以我想为他们各自的项目显示他们，数量和专业也是如此。我只想要如何操作模板以适当地显示它。我的视图代码如下：

```
def search_category (request):
    collate=[]
    gains=[]
    amount=[]
    name=[]
    store=[]
    qty=[]
    if 'q' in request.GET and request.GET['q']:
        q = request.GET.get('q','')
        items = Item.objects.filter(category__name__exact=q)
        for item in items:
            collate.append(item.subcategory.subcategoryname)
            qty.append(int(item.quantity))
        len_collate=len(collate)
        count=0
        #for pick in collate:
        keep1=[]
        amt_save=[]
        gain_save=[]
        t=[]
        all_amt_save=[]
        #sum=0
        #t_amount=0
        #t_gain=0
        while count < len_collate:
            soldqty=[]

            #histories = RecordSales.objects.filter(ItemName__subcategoryname__exact=pick)#here

            histories = RecordSales.objects.filter(ItemName__subcategoryname__exact=collate[count])
            lenght=len(histories)
            for history in histories:

                soldqty.append(history.quantity)

                #keep1=[] #array to store sum
                len_qty=len(soldqty)
                #count=0
                #while count < lenght:
                sum=0
                sums=[]
                t_stock=[]
                #for num in soldqty:
                count_qty=0
                #for num in soldqty:
                while count_qty < len_qty:
                    sum=sum + soldqty[count_qty]
                    #t_stock=qty[count_qty] + sum
                    count_qty=count_qty + 1
                amount.append(history.total)
                t_amount=0

                amt_count=0
                while amt_count < len(amount):
                    t_amount=t_amount + amount[amt_count]
                    amt_count=amt_count + 1
                gains.append(history.profit)
                t_gain=0
                gain_count=0
                while gain_count < len(gains):
                    t_gain=t_gain + gains[gain_count]
                    gain_count=gain_count + 1
                name.append(history.ItemName)

            #keep1.append(sum)
            len_keep1=len(keep1)
            amt_save.append(t_amount)
            gain_save.append(t_gain)
            count=count + 1
            keep1.append(sum)
            all_amt_count=0
            all_amt_total=0
            while all_amt_count < len(amt_save):
                all_amt_total= all_amt_total + amt_save[all_amt_count]

                #all_amt_save.append(all_amt_total)
                all_amt_count=all_amt_count + 1
            all_g_count=0
            all_g_total=0
            while all_g_count < len(gain_save):
                all_g_total=all_g_total + gain_save[all_g_count]
                all_g_count=all_g_count + 1
            t_count=0
            while t_count < len(keep1):
                t_stock=keep1[t_count] + qty[t_count]

                t_count=t_count + 1
            store.append(t_stock)
            total_amount=0
            keep_total=[]
            for total in amount:
                total_amount=total_amount + total
                keep_total.append(total_amount)
                    #total_amount=0

        return render_to_response('sell_category.html',
        {'items':items,'query': q,'keep1':keep1,'name':name,'items':items,
        'keep_total':keep_total,'t':store,'amt_save':amt_save,'gain_save':gain_save,'all_amt':all_amt_total,'t_gain':all_g_total,'len':len_keep1,

        })
    else:
        return render_to_response('sell_category.html', {'error': True}) 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:47:12.117

当您将所有内容附加到列表时，您可以使用`zip()`一些字符串格式来获得所需的结果：

```
items=['Books','Sciences','Comics']
stock_qua=[990,825,930]
sold_qua=[45,75,60]
total_sto=[1035,1035,990]
total_amt=[14576,15666,12666]
profit=[1777,1555,1777]

print "{0:12s}{1:12s}{2:12s}{3:15s}{4:15s}{5:12s}".format("Item Name", "stock qty","sold qty","total stock","total amount","profit")

for item,stock,sold,tot_st,amt,pro in zip(items,stock_qua,sold_qua,total_sto,total_amt,profit):
    print "{0:12s}{1:^10d}{2:^10d}{3:^15d}{4:^15d}{5:^12d}".format(item,stock,sold,tot_st,amt,pro) 
```

**输出：**

```
Item Name   stock qty   sold qty    total stock    total amount   profit      
Books          990        45         1035           14576         1777    
Sciences       825        75         1035           15666         1555    
Comics         930        60          990           12666         1777 
```

# html - CSS子清除父浮动

> ID：12168396
> 
> 赞同：12
> 
> 时间：2012-08-28T22:25:36.800
> 
> 标签：html, css, css-float

我有一个两列布局，左侧是侧边栏，右侧是内容。

所以我将侧边栏向左浮动，并给右侧的内容留出边距。一切都很好...

直到，内容的一个子元素被明确应用，它跳到侧边栏下方。

有没有办法让子元素只在它的父容器中浮动和清除？

因为一张图值 1000 字，这里有一个 JSFiddle：

[http://jsfiddle.net/qRYYm/1/](http://jsfiddle.net/qRYYm/1/)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-28T22:32:21.333

如果你添加`overflow:auto;`到`.content`那个应该看到你是对的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:28:12.037

那这个呢：

```
aside{
    position: absolute;
    height: 300px;
    width: 100px;
} 
```

[http://jsfiddle.net/qRYYm/2/](http://jsfiddle.net/qRYYm/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T22:37:16.393

你应该避免使用clear。您可以使用溢出：隐藏与主容器

```
<div class="content">
    <div class="one">One</div>
    <div class="two">Two</div>    
</div>

.content { float: left; overflow: hidden; width: 900px; }
aside { float: left; width: 100px; } 
```

此外，您不应使用 margin-left:100px 将内容推离左侧列。向左浮动。我发现这些列喜欢放在主包装器中。这样更舒服

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T13:43:46.280

你也可以这样做。

```
.left{float:left;}
.right {float:right;}
.clear{clear:both;}

<div>
    <div class="left">SideBar</div>
    <div class="right">
             <div>
                 <div class="left">content 1</div>
                 <div class="left">content 2</div>
                 <div class="clear"></div>
             </div>
   </div>
    <div class="clear"></div>
</div> 
```

在任何 div(s) 上应用 float 时，将它们放在父 div 中并在同一个父 div 中清除

# mysql - Ruby on rails：rake 中止了错误的文件描述符

> ID：12168399
> 
> 赞同：4
> 
> 时间：2012-08-28T22:26:09.080
> 
> 标签：mysql, ruby-on-rails, ruby

我已经四处搜索，但我无法找到有效的答案。

我对此完全陌生，所以当你回答时，请像我是一个孩子一样解释......或者像我是一块西兰花一样解释。如果你想让我安装一些东西，告诉我要写什么。

好吧，我正在尝试遵循这个[http://guides.fatfreecrm.com/Setup-Microsoft-Windows.html](http://guides.fatfreecrm.com/Setup-Microsoft-Windows.html)并且我已经到了我应该写的地方， `rake db:create RAILS_ENV=production` 我得到的只是这个：（我已经完成了“gem install mysql2”，我已经按照教程安装了 rake，没有发现任何问题）

```
C:\RailsInstaller\fat_free_crm>rake db:create RAILS_ENV=production --trace   

** Invoke db:create (first_time)
** Invoke db:load_config (first_time)
** Invoke rails_env (first_time)
** Execute rails_env
** Execute db:load_config
** Execute db:create rake aborted! Bad file descriptor 
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.2.6-x86-mingw32/li
b/active_record/connection_adapters/mysql2_adapter.rb:312:in `query'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.2.6-x86-mingw32/li
b/active_record/connection_adapters/mysql2_adapter.rb:312:in `execute'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.2.6-x86-mingw32/li
b/active_record/connection_adapters/mysql2_adapter.rb:629:in
`configure_connecti on'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.2.6-x86-mingw32/li
b/active_record/connection_adapters/mysql2_adapter.rb:169:in
`initialize'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.2.6-x86-mingw32/li
b/active_record/connection_adapters/mysql2_adapter.rb:16:in `new'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/mysql2-0.2.6-x86-mingw32/li
b/active_record/connection_adapters/mysql2_adapter.rb:16:in
`mysql2_connection'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/acti
ve_record/connection_adapters/abstract/connection_pool.rb:309:in
`new_connection '
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/acti
ve_record/connection_adapters/abstract/connection_pool.rb:319:in
`checkout_new_c onnection'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/acti
ve_record/connection_adapters/abstract/connection_pool.rb:241:in
`block (2 level s) in checkout'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/acti
ve_record/connection_adapters/abstract/connection_pool.rb:236:in
`loop'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/acti
ve_record/connection_adapters/abstract/connection_pool.rb:236:in
`block in check out'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/monitor.rb:211:in
`mon_synchronize'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/acti
ve_record/connection_adapters/abstract/connection_pool.rb:233:in
`checkout'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/acti
ve_record/connection_adapters/abstract/connection_pool.rb:96:in `block
in connec tion'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/monitor.rb:211:in
`mon_synchronize'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/acti
ve_record/connection_adapters/abstract/connection_pool.rb:95:in
`connection'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/acti
ve_record/connection_adapters/abstract/connection_pool.rb:404:in
`retrieve_conne ction'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/acti
ve_record/connection_adapters/abstract/connection_specification.rb:170:in
`retri eve_connection'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/acti
ve_record/connection_adapters/abstract/connection_specification.rb:144:in
`conne ction'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/acti
ve_record/railties/databases.rake:83:in `rescue in create_database'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/acti
ve_record/railties/databases.rake:51:in `create_database'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/acti
ve_record/railties/databases.rake:40:in `block (3 levels) in <top
(required)>'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/acti
ve_record/railties/databases.rake:40:in `each'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.7/lib/acti
ve_record/railties/databases.rake:40:in `block (2 levels) in <top
(required)>'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.
rb:205:in `call'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.
rb:205:in `block in execute'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.
rb:200:in `each'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.
rb:200:in `execute'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.
rb:158:in `block in invoke_with_call_chain'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/1.9.1/monitor.rb:211:in
`mon_synchronize'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.
rb:151:in `invoke_with_call_chain'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.
rb:144:in `invoke'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:116:in `invoke_task'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:94:in `block (2 levels) in top_level'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:94:in `each'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:94:in `block in top_level'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:133:in `standard_exception_handling'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:88:in `top_level'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:66:in `block in run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:133:in `standard_exception_handling'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/appli
cation.rb:63:in `run'
C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in
`<top (required)>' C:/RailsInstaller/Ruby1.9.3/bin/rake:23:in `load'
C:/RailsInstaller/Ruby1.9.3/bin/rake:23:in `<main>' Tasks: TOP =>
db:create 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T12:39:02.930

我有同样的问题并在花了两个小时后修复了它。也许它也会帮助你。所以这里是引导我解决问题的步骤

1.  我假设您正在运行 32 位 mysql，因为 64 位 + 32 位 mysql 的问题可能是其他问题
2.  确保 mysql.dll 与已安装的 gem 兼容（我有 mysql2）
3.  为避免问题从[http://dev.mysql.com/get/Downloads/Connector-C/mysql-connector-c-noinstall-6.0.2-win32.zip/from/pick下载](http://dev.mysql.com/get/Downloads/Connector-C/mysql-connector-c-noinstall-6.0.2-win32.zip/from/pick)
4.  将 mysql.dll 复制到您的 ruby​​/bin

总结：对我来说是rails mysql2 gem和我机器上安装的那个不兼容的问题

# php - PHP 生成 IP 范围

> ID：12168407
> 
> 赞同：7
> 
> 时间：2012-08-28T22:27:02.007
> 
> 标签：php, function, loops, range, explode

如您所知， range() 函数可以获取数字和另一个之间的范围，

如何以 IP
为例..

```
$range_one = "1.1.1.1";
$range_two = "1.1.3.5";
print_r( range($range_one, $range_two) ); 

 /* I want a result of :
     1.1.1.1
     1.1.2.2
     1.1.3.3
     1.1.3.4
     1.1.3.5
 */ 
```

我正在考虑使用explode（）函数来爆炸“。”并分隔每个数字，然后将它们中的每个数字使用范围，然后将它们组合在一起，这对我来说似乎有点复杂，我想有一个更简单的方法来做到这一点

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-28T22:33:26.753

您可以使用[ip2long](http://php.net/ip2long)将 IP 地址转换为整数。这是一个适用于旧 IPv4 地址的函数：

```
/* Generate a list of all IP addresses
   between $start and $end (inclusive). */
function ip_range($start, $end) {
  $start = ip2long($start);
  $end = ip2long($end);
  return array_map('long2ip', range($start, $end) );
}

$range_one = "1.1.1.1";
$range_two = "1.1.3.5";
print_r( ip_range($range_one, $range_two) ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T22:29:35.490

这个怎么样：

```
$range_one = "1.1.1.1";
$range_two = "1.1.3.5";
$ip1 = ip2long ($range_one);
$ip2 = ip2long ($range_two);
while ($ip1 <= $ip2) {
    print_r (long2ip($ip1) . "\n");
    $ip1 ++;

} 
```

**更新：**

顺便说一句，您的预期输出并不完全是一个范围。例如，在`1.1.1.1`is`1.1.1.2`和 not之后的下一个 IP `1.1.2.2`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T22:30:54.210

您可以使用inet_ntop、inet_ pton [http://www.php.net/manual/en/function.inet-ntop.php](http://www.php.net/manual/en/function.inet-ntop.php)

# c# - 覆盖 System.Web.Security.Roles 函数？

> ID：12168414
> 
> 赞同：3
> 
> 时间：2012-08-28T22:27:46.397
> 
> 标签：c#, asp.net, asp.net-membership, overriding

我正在使用 System.Web.Security Membership 和 Roles，但由于我的角色是一个层次结构，我为其构建了自己的函数`IsUserInRole()`，`GetRolesForUser()`因此我想用我的函数覆盖 Roles 中的这两个函数。

有人可以告诉我如何做到这一点的例子吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:06:11.037

快速搜索并找到[这个](http://msdn.microsoft.com/en-us/library/317sza4k%28v=vs.100%29.aspx)

我自己从未做过，但我快速浏览了一下，它为您提供了工作示例

# javascript - 使用浏览器在页面（客户端）上运行自定义 JavaScript 以模拟点击？怎么做？

> ID：12168417
> 
> 赞同：4
> 
> 时间：2012-08-28T22:28:14.883
> 
> 标签：javascript, browser, ide, console, automation

我想自动从页面中抓取一些内容。

我想知道是否有可能：

1.  页面加载后在页面上运行我自己编写的JavaScript（我使用FireFox。我没有能力更改页面的内容。我只想在我的浏览器上运行JS。）。该脚本将使用`getelementbyid`或类似的方法来获取到下一页的链接

2.  运行 JavaScript 以在该页面上收集我感兴趣的内容（一些 URL）并将这些 URL 存储在本地文件中

3.  转到下一页（**下一页将真正加载我的浏览器，但我根本不需要干预**）并重复步骤 1 和步骤 2，直到没有下一页。

执行此操作的经典方法是使用 LWP 编写 Perl 脚本或使用 CURL 等编写 PHP 脚本。但这都是服务器端的。我想知道我是否可以在客户端做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T22:44:51.700

实际上，我做了一些类似的事情。

通过使用 GreaseMonkey，您可以编写一个用户脚本，该脚本将根据您的需要与页面进行交互。您可以获取下一页链接并根据需要滚动内容。

您还可以通过一些名为 GM_getValue 和 GM_setValue 的新函数在本地存储任何数据，在 Firefox 中。

我采取懒惰的方式。我只是生成一长串在浏览页面时找到的 URL。我做了一个粗略的“document.write”方法，然后我将我的 URL 列表作为一个批处理文件转储出来，该文件在`wget`.

那时我复制并粘贴批处理文件然后运行它。

如果您需要经常运行它以使其自动化，*过去*有一种方法可以将 GreaseMonkey 脚本转换为 Firefox 扩展，从而获得更多功能。

另一个选项目前是 AFAIK，仅限 Chrome。您可以收集所需的任何信息并从中构建一个大文件，然后使用`download`链接的属性并单击一下即可保存内容。

**更新**

我打算分享我正在做的完整代码，但它与一个特定的网站如此紧密地联系在一起，它并没有真正的帮助——所以我会寻求一个更“通用”的解决方案。

警告，此代码是即时键入的，实际上可能不正确。

```
// Define the container
// If you are crawling multiple pages, you'd want to load this from
// localStorage.
var savedLinks = [];

// Walk through the document and build the links.
for (var i = 0; i < document.links.length; i++) {
  var link = document.links[i];

  var data = { 
    url: link.url,
    desc = getText(link)
  };

  savedLinks.push(data);
}

// Here you'd want to save your data via localStorage.

// If not on the last page, find the 'next' button and load the next page
// [load next page here]

// If we *are* on the last page, use document.write to output our list.
// 
// Note: document.write totally destroys the current document.  It really is quite
// an ugly way to do it, but in this case it works.
document.write(JSON.stringify(savedLinks, null, 2)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T22:45:43.177

Selenium/webdriver 将让您编写一个简单的 java/ruby/php 应用程序，该应用程序将启动 Firefox，使用其 JavaScript 引擎与浏览中的页面进行交互。

或者，如果网页不需要 JavaScript 来使您看到感兴趣的内容可用，您可以使用您喜欢的语言的 html 解析器并将浏览器排除在外。

如果您想在 Firefox 中使用 JavaScript 执行此操作，您可能可以在油脂猴脚本中执行此操作

# c# - 当我关闭表格/程序以及每 X 分钟时，我如何找到最高的最低和平均数字？

> ID：12168418
> 
> 赞同：-1
> 
> 时间：2012-08-28T22:28:30.407
> 
> 标签：c#

现在我将通过 X 分钟，我暂时不会这样做。其余的是我现在使用的代码。

我试着这样做：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Diagnostics;
using DannyGeneral;
namespace CpuUsage
{
    public partial class Form1 : Form
    {
        private PerformanceCounter theCPUCounter;
        private PerformanceCounter theMemCounter;
        private PerformanceCounter specProcessCPUCounter;
        private float cpuUsage;
        private float memUsage;
        private string processname;
        private List<float> Values;
        public Form1()
        {
            InitializeComponent();
            Values = new List<float>();
                theCPUCounter = new PerformanceCounter("Processor", "% Processor Time", "_Total");
                theMemCounter = new PerformanceCounter("Memory", "Available MBytes");
                specProcessCPUCounter = new PerformanceCounter("Process", "% Processor Time", Process.GetCurrentProcess().ProcessName);

        }
        private void Form1_Load(object sender, EventArgs e)
        {
        }
        private void timer1_Tick(object sender, EventArgs e)
        {
            memUsage = theMemCounter.NextValue();
            label1.Text = memUsage.ToString();
            Logger.Write("Memory Usage   " + memUsage.ToString());
            cpuUsage = this.theCPUCounter.NextValue();
            label2.Text = cpuUsage.ToString();
            Logger.Write("Cpu Usage   " + this.cpuUsage.ToString());
            Values.Add(cpuUsage);
        }
        private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {

            float Maximum = Values.Max();
            float Minimum = Values.Min();
            float Average = Values.Average();
            string t = string.Format("{0}Maximum,{1}Minimum,{2}Average", Maximum, Minimum, Average);
            Logger.Write(t);
        }
    }
} 
```

问题是记录器文本文件中的结果是这样的：

```
8/29/2012--1:57 AM ==> Memory Usage   2683
8/29/2012--1:57 AM ==> Cpu Usage   0
8/29/2012--1:57 AM ==> Memory Usage   2681
8/29/2012--1:57 AM ==> Cpu Usage   5.951914
8/29/2012--1:57 AM ==> Memory Usage   2675
8/29/2012--1:57 AM ==> Cpu Usage   1.15339
8/29/2012--1:57 AM ==> Memory Usage   2674
8/29/2012--1:57 AM ==> Cpu Usage   4.230328
8/29/2012--1:57 AM ==> Memory Usage   2674
8/29/2012--1:57 AM ==> Cpu Usage   1.345688
8/29/2012--1:57 AM ==> Memory Usage   2677
8/29/2012--1:57 AM ==> Cpu Usage   4.422635
8/29/2012--1:57 AM ==> Memory Usage   2676
8/29/2012--1:57 AM ==> Cpu Usage   0.768766
8/29/2012--1:57 AM ==> Memory Usage   2676
8/29/2012--1:57 AM ==> Cpu Usage   0.5764585
8/29/2012--1:57 AM ==> Memory Usage   2676
8/29/2012--1:57 AM ==> Cpu Usage   8.076494
8/29/2012--1:58 AM ==> 8.076494Maximum,0Minimum,2.947297Average 
```

格式的最后一行不像我想要的那样。我希望它是这样的：最大值 --- 8.076494 ，最小值 --- 0 ，平均值 --- 2.947297

但是现在我首先得到值然后是文本，并且值和每个文本之间没有空格。

我现在唯一的问题是最后一行 string.Format

大约每 5 分钟我会通过它，现在不会这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:43:11.653

1.) 你不需要保存所有的中间值，所以 List 太多了。
2.) 是的，它会的。
3.）试试这个：

```
public partial class Form1 : Form
{
    // ...
    private float minCpu;
    private float maxCpu;
    private float sumCpu;
    private int ticks;

    // also call this in constructor
    private void reset()
    {
       this.minCpu = Single.PositiveInfinity;
       this.maxCpu = Single.NegativeInfinity;
       this.sumCpu = 0;
       this.ticks  = 0;
    }

    // ...
    private void timer1_Tick(object sender, EventArgs e)
    {
        // ...
        // update
        if (this.minCpu > cpuUsage) this.minCpu = cpuUsage;
        if (this.maxCpu < cpuUsage) this.maxCpu = cpuUsage;
        this.sumCpu += cpuUsage;
        this.ticks++;

        if (this.ticks >= 5 * 60) // = 5 min, since this is called every second
        {
            float avgCpu = this.sumCpu / this.ticks;
            // write this.minCpu, this.maxCpu, and avgCpu to Log
            reset();
        }
    }

    // ...
} 
```

4.) 不，你没有。看上面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T03:32:32.440

唯一的问题是字符串格式？？？好的，你去：

```
 string t = string.Format("Maximum --- {0} , Minimum --- {1} , Average --- {2}", Maximum, Minimum, Average); 
```

老实说，我不知道你怎么能写出剩下的却无法弄清楚。建议睡一觉。

# javascript - Bootstrap：响应式设计 - 当窗口从 980px 调整到 979px 时执行 JS

> ID：12168420
> 
> 赞同：6
> 
> 时间：2012-08-28T22:28:40.640
> 
> 标签：javascript, jquery, twitter-bootstrap, responsive-design

我正在使用最后一个 Twitter 的 Bootstrap。当我的窗口宽度低于 980px 时，我想执行某个 JS 函数（显示一次工具提示）（如您所知，在这个大小上，Bootstrap 会修改导航栏并隐藏标准菜单项）——窗口从 768 到 979，简称. 我知道

```
@media (min-width: 768px) and (max-width: 979px) {...} 
```

此选项可用于捕获事件。但是，它可能仅用于更改现有样式，例如

```
body {background-color:#ccc;} 
```

我需要启动 JS 函数，或者为元素添加或删除特定样式。我试过了：

```
<script>
  window.onresize = function () {
      if (window.outerWidth == 980) {alert('');}
  };
</script> 
```

但是这个解决方案太慢了，甚至会挂起一个浏览器窗口。那么，当窗口从 GREATER 侧调整为 979px 并执行 JS 函数时，是否有任何解决方案来捕获此事件？

谢谢大家！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-28T22:31:39.617

`outerWidth`是一种方法，所以你错过了`()`：

```
if (window.outerWidth() == 980) 
```

无论如何，如果您使用的是 jQuery：

```
$(window).resize(function() {
  if ($(this).width() < 981) {
    //do something
  }
}); 
```

# php - Xdebug 分析会增加多少实际执行时间？

> ID：12168426
> 
> 赞同：5
> 
> 时间：2012-08-28T22:29:04.520
> 
> 标签：php, profiling, xdebug

我在 webgrind 中有一个 Xdebug cachegrind 文件显示`1061 different functions were called in 5865 milliseconds`- 当我禁用分析脚本时不需要那么多毫秒 - 我意识到我可以解决这个问题，但有谁知道 Xdebug 分析导致的执行时间增加的大致百分比？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T13:52:43.473

很难说出具体的数字或百分比，因为这取决于函数调用的类型和数量、使用的变量以及您在 xdebug.ini 中设置的选项。

在这里，您可以查看一些人所做的一些研究和测试。
[关于 xdebug 和 lexer cals 的简短信息](http://nikic.github.com/2012/01/19/Careful-XDebug-can-skew-your-performance-numbers.html)

[xdebug 支持邮件列表](http://search.gmane.org/?query=overhead&group=gmane.comp.php.xdebug.general)

但当然，最终的答案是您的，您的应用程序、您的编码标准和您的配置将决定最终的开销。

请记住，作为一般规则，xdebug 不应该在生产服务器中处于活动状态。有些人启用了它，一切都很好，但这通常不是一个好主意。

再见

# java - 精灵控制不完全工作

> ID：12168429
> 
> 赞同：0
> 
> 时间：2012-08-28T22:29:16.257
> 
> 标签：java, android, controls, andengine

```
public void onControlChange(final BaseOnScreenControl pBaseOnScreenControl, final float pValueX, final float pValueY) {
            final Body carBody = CityRacerActivity.this.mCarBody;

            final Vector2 velocity = Vector2Pool.obtain(pValueX * 5, pValueY * 5);
            carBody.setLinearVelocity(velocity);
            Vector2Pool.recycle(velocity);

            final float rotationInRad = (float)Math.atan2(-pValueX, pValueY);
            carBody.setTransform(carBody.getWorldCenter(), rotationInRad);

            CityRacerActivity.this.mCar.setRotation(MathUtils.radToDeg(rotationInRad));
        } 
```

所以这部分工作。

OnControlChange 将精灵向正确的方向移动，但是当我放开控件时，它似乎每次都将车辆朝上移动。

我在android上使用andengine。

我的代码基于racergameactivity 示例，但该错误似乎已经存在于示例本身中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:56:32.570

```
 public void onControlChange(final BaseOnScreenControl pBaseOnScreenControl, final float pValueX, final float pValueY) {
            final Body carBody = CityRacerActivity.this.mCarBody;

            final float rotationInRad = (float)Math.atan2(-pValueX, pValueY);

            if ((pValueX == 0) && (pValueY == 0))
            {
                    //Don't turn the body/sprite of the car

            }else
            {
                    carBody.setTransform(carBody.getWorldCenter(), rotationInRad);
                    //turn the car body in the direction of movement
                    CityRacerActivity.this.mCar.setRotation(MathUtils.radToDeg(rotationInRad));
            }

            //set the velocity
            final Vector2 velocity = Vector2Pool.obtain(pValueX * 5, pValueY * 5);
            carBody.setLinearVelocity(velocity);
            Vector2Pool.recycle(velocity);
        } 
```

这就像我想要的那样工作，但我不确定这是否是我应该处理的方式。

# jquery - jQuery滑块的CSS定位问题

> ID：12168437
> 
> 赞同：0
> 
> 时间：2012-08-28T22:30:10.133
> 
> 标签：jquery, html, css, media-queries

我有一个小问题，当我将屏幕尺寸增加到超过 1200 像素时，将内容保留在轮播中，内容推送到屏幕左侧[单击此处](http://iamnatesmithen.com/bodyworks/index.php)

我已经将轮播嵌套在它自己的包装器中，并赋予它以下 css 属性

```
.carsousel-container{
    position: relative;
    width: 100%;
}   

.carousel{
    max-width: 1000px;
    width: 100%;
    margin: 0 auto;
    min-width: 320px;
    position: absolute;
}
.carousel-bg{
    margin-top: -542px;
}

.left-side{
    margin: -487px 40px;
}

#shots-carousel{
    width: 90%;
    margin: 46px 13%;
    position: absolute;
    max-width: 1600px;
} 
```

有谁知道是什么导致了这个问题，我以前遇到过，设法解决它，但不知道我是怎么做到的。有人可以指出我哪里出错了，这样我以后可以节省时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:20:35.320

那很有挑战性！您在那里使用的有趣样式。这修复了它：

摆脱 carousel 上的 clearfix 类，并将 position:absolute 更改为 position:relative

你需要在 .rslides_tabs 上做同样的事情

# c - C用while循环添加输入

> ID：12168442
> 
> 赞同：1
> 
> 时间：2012-08-28T22:30:49.967
> 
> 标签：c, while-loop, do-while

这是我第一次用c编程。我有这段代码应该接受用户输入的任何数字，直到输入 0。然后它应该将它们全部加起来。例如，如果他们输入 1，然后是 2，然后是 3，最后是 0，它应该打印出 6。但由于某种原因，它没有添加最后一个值。在我提到的情况下，它将打印 3 而不是 6。

```
#include <stdlib.h>
#include <stdio.h>

static char syscall_buf[256];
#define syscall_read_int()          atoi(fgets(syscall_buf,256,stdin))

main()
{
    int input;
    input = syscall_read_int();

    int result = 0;
    input = syscall_read_int();
    while (input != 0){
        result = result + input;
        input = syscall_read_int();
    }
    printf("%i\n", result);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:35:52.447

你有一个额外的调用这个函数：`syscall_read_int()`. 尝试调试并查看发生了什么。

您正在覆盖变量的值`int input`；`int result`因此，在您提到的特定情况下，您没有将第一个值添加到变量中：

插入`1`，然后`2`，然后`3`，最后`0`。第一个值 - `1`- 没有被添加，因此程序打印`5`(2 + 3) 而不是`6`(1 + 2 + 3)。

这就是问题所在，试试这个：

```
#include <stdlib.h>
#include <stdio.h>

static char syscall_buf[256];
#define syscall_read_int()          atoi(fgets(syscall_buf,256,stdin))

main()
{
    int input;
    //input = syscall_read_int(); //you need to comment this line
    int result = 0;
    input = syscall_read_int();
    while (input != 0){
        result = result + input;
        input = syscall_read_int();
    }
    printf("%i\n", result);
} 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:50:34.577

您在第 10 行有一个额外的 syscall_read_int()。无论如何，我建议您使用 do-while 循环，因为您需要读取至少一个整数。以下带有 do-while 循环的代码有效：1 + 2 + 3 + 0 = 6

```
#include <stdlib.h>
#include <stdio.h>

static char syscall_buf[256];
#define syscall_read_int()          atoi(fgets(syscall_buf,256,stdin))

main()
{
    int input;
    int result = 0;

    do {
        input = syscall_read_int();
        result = result + input;
    } while(input != 0);

    printf("%i\n", result);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T22:43:12.090

在编写程序时，它会丢失您输入的第一个值（它什么都不做）而不是最后一个，因此如果您输入 1、2、3，它会返回 5，而不是 3。您正在运行一个版本代码末尾有一个额外的 syscall_read_int() 吗？

# ruby - Gem::Installer::ExtensionBuildError: ERROR: with capybara-webkit

> ID：12168445
> 
> 赞同：3
> 
> 时间：2012-08-28T22:30:54.567
> 
> 标签：ruby, ubuntu-11.04, ruby-1.9.3

我可以在 Mac 上安装 capybara-webkit，当我在 Ubuntu 上部署代码时，我面临以下错误

```
 Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

            /usr/local/bin/ruby extconf.rb 

    Gem files will remain installed in /home/datas/.bundler/tmp/7940/gems/capybara-webkit-0.12.1 for inspection.
    Results logged to /home/datas/.bundler/tmp/7940/gems/capybara-webkit-0.12.1/./gem_make.out

   An error occured while installing capybara-webkit (0.12.1), and Bundler cannot continue.
   Make sure that `gem install capybara-webkit -v '0.12.1'` succeeds before bundling. 
```

即使我尝试过`sudo gem install capybara-webkit -v '0.12.1'`

我得到同样的错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T22:44:15.473

安装 libqt4-dev 它将解决您的问题

```
sudo apt-get install libqt4-dev 
```

阅读[这篇](https://github.com/thoughtbot/capybara-webkit/issues/113)文章以获取更多信息。

如果您对此仍有问题，请告诉我

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T20:11:30.163

capybara-webkit 依赖于 Qt 的 WebKit 实现，这是一个跨平台的开发工具包。您需要下载 Qt 库来构建和安装 gem。capybara-webkit 0.12.x 依赖于 Qt >= 4.6 而 capybara-webkit 0.13+ 依赖于 Qt >= 4.7。您可以通过运行 qmake -v 检查您的 Qt 版本。

如果您在构建时遇到错误，类似于致命错误：QObject: No such file or directory，您可能正在尝试针对 Qt3 构建。卸载 Qt3，或者确保 PATH 中的 qmake 链接到 Qt4。[...更多的](https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit)

对于那些在 Mac 上遇到此错误的人，请尝试以下操作：

```
brew update

brew install qt

bundle 
```

# facebook - 用于服务器拉取 FB 页面信息的持久 FB 访问令牌

> ID：12168452
> 
> 赞同：119
> 
> 时间：2012-08-28T22:31:19.953
> 
> 标签：facebook, facebook-graph-api, facebook-access-token

我知道有很多关于 Facebook 访问令牌及其造成的悲痛的问题，但尽管进行了大量实验并阅读了许多令人沮丧的模糊博客文章（FB 和其他），但我仍在努力为我的需求找到一个明确的答案. 到目前为止，让我简要地分解一下我的过程：

*   我正在创建一个服务器端需要从单个 Facebook 页面中提取帖子/状态的站点
*   我是该 Facebook 页面的管理员
*   我创建了一个 Facebook 应用程序
*   使用[Facebook Graph API Explorer](http://developers.facebook.com/tools/explorer/)，我生成了一个短期密钥，连接到我的应用程序和我的帐户，它授予我的帐户查看我页面的访问令牌的权限
*   我已将我的短期密钥转换为长期密钥（60 天）ala 方案 4[从此](http://developers.facebook.com/roadmap/offline-access-removal/)

这就是我卡住的地方。我的 60 天密钥适用于我的服务器从页面中提取所需信息，但据我所知，没有办法以编程方式扩展该 60 天密钥。我也不知道如何生成一个新的短期密钥，而无需手动转到 Facebook Graph API Explorer 并创建一个。

由于是我的服务器向 Facebook API 发出请求，而不是基于用户的系统（我可以轻松地请求用户再次授权 Facebook 应用程序），因此这会创建一个非常笨重的系统。由于 Facebook 已弃用`offline_access`，真的没有永久的方法可以让我的服务器从我自己的页面中提取信息吗？我真的需要手动创建一个新密钥并每 60 天用它手动更新我的服务器吗？

还是我缺少什么？

**更新：**

> *之前在此处找到的分步指南已迁移到其自己的[答案](https://stackoverflow.com/a/21927690/506338)中。*

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2014-02-21T07:11:49.677

> *这些是以前在问题中的步骤 - 它们已迁移到此答案。*

发现可以生成一个不会过期的 Facebook 页面访问令牌（在 @Igy 的帮助下），这里有一个清晰的分步指南，适用于所有希望相同的人：

1.  确保您是您希望从中提取信息的 FB 页面的管理员
2.  创建一个 FB 应用程序（应该使用与页面管理员相同的用户帐户）
3.  前往[Facebook Graph API Explorer](http://developers.facebook.com/tools/explorer/)
4.  在右上角，从“应用程序”下拉列表中选择您创建的 FB 应用程序
5.  点击“获取访问令牌”
6.  确保添加`manage_pages`权限
7.  通过调用 Graph API 将这个短期访问令牌转换为长期访问令牌： `https://graph.facebook.com/oauth/access_token?client_id=<your FB App ID >&client_secret=<your FB App secret>&grant_type=fb_exchange_token&fb_exchange_token=<your short-lived access token>`
8.  获取返回的新的长期访问令牌
9.  使用新的长期访问令牌进行 Graph API 调用以查看您的帐户：`https://graph.facebook.com/me/accounts?access_token=<your long-lived access token>`
10.  抓取`access_token`您将从中提取信息的页面
11.  [对令牌进行Lint](https://developers.facebook.com/tools/debug)以查看它是否设置为`Expires: Never`!

那应该这样做。您现在应该拥有一个不会过期的 Facebook 页面访问令牌，除非：

*   您更改了 Facebook 帐户密码
*   您失去了目标页面的管理员访问权限
*   您删除或取消授权您的 Facebook 应用程序

其中任何一项都会导致访问令牌无效。

如果您正在获取`(#100) Tried accessing nonexisting field (accounts) on node type (Page)`，请转到[Access Token Debugger](https://developers.facebook.com/tools/debug/access_token/)，复制 的值`User ID`，并使用它来替换步骤 9 中 URL 的“me”部分。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-28T22:49:11.483

这在[离线访问弃用](https://developers.facebook.com/docs/roadmap/completed-changes/offline-access-removal/)文档中进行了介绍

使用页面管理员的 60 天令牌来检索页面访问令牌（通过`/PAGE_ID?fields=access_token`或`/me/accounts`） - 页面访问令牌没有到期时间

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2019-11-15T13:39:13.730

# 2019 年行之有效的方法

我最近试图实现类似的东西（类似于这个线程中描述的用例），但我想确保尊重 Facebook 的当前政策，所以我做了一些研究，在这里我分享我的发现。

## 我的用例

所以，正如我已经说过的，我的用例与这里描述的非常相似；那是：

*   我正在为一个学区做一些工作。
*   他们正在使用软件工具来管理与学校交通相关的几乎所有事情。
*   该工具允许他们在发布公交车延误警报和学校停课警报时发送电子邮件通知（给订阅者）。
*   社区中的很多人在他们的 Facebook 页面上关注该组织，这是他们寻找这些警报的唯一地方。
*   因此，该组织的员工必须在 Facebook 页面上手动发布每个通知（除了在运输软件中创建它）。此外，这些通知最终会过期（或在过期前被简单地删除），因此员工必须稍后再手动删除它们。
*   时间太长了，所以我们在这里尝试做的是开发一个简单的系统，它会定期轮询软件工具的数据库以获取新的（和过期的）通知，并在 Facebook 页面上更新它们（即添加和删除）。

在我看来，这是一个合法的用例，但我不确定如何以符合 Facebook 政策的方式实施它。

## 接受的答案

我按照接受的答案的步骤进行操作，但情况似乎发生了变化：现在，即使生成的页面令牌没有过期，也会`access to data`在大约 60 天后过期。[如果您按照该过程并在FB Token Debugger Tool](https://developers.facebook.com/tools/debug/accesstoken)中检查页面令牌，您也会看到这一点。

此外，生成的页面令牌与用户帐户绑定的事实也是不幸的，因为如果用户更新他/她的密码，那么页面令牌也会失效。

## 如何在 2019 年做到这一点

经过几个小时的研究，我偶然发现了以下 Facebook 文档文章：[直接业务的业务登录](https://developers.facebook.com/docs/facebook-login/business-login-direct)。

事实证明，现在可以按照上述文章中描述的步骤生成一个与任何特定 Facebook 用户帐户无关且不会过期的页面令牌（除非 FB 应用程序被删除或底层应用程序令牌被删除了，你知道...）

所以这里是步骤和最重要的部分：

*   您需要一个[商务管理平台](https://business.facebook.com/)帐户。
    *   需要进行验证，并且必须签署数字合同。
*   您需要将目标 Facebook 页面添加到该帐户。
*   您需要创建一个 Facebook 应用程序，并将该应用程序转移到同一个商务管理平台帐户。
*   该应用程序必须通过 Facebook 的审核流程，因为需要以下权限：`manage_pages`和`publish_pages`.
    *   **重要说明**要使使用生成页面令牌发布的帖子对应用程序管理员以外的用户可见，该应用程序需要已发布和批准。
    *   您仍然可以在不提交审核的情况下尝试该概念，但这些帖子不会公开可见。
*   在 Business Manager 帐户中（仅在您的应用程序和页面添加到帐户后），您需要创建所谓的**系统用户**，并将该用户的管理员角色（或权限）授予目标 Facebook 页面。
    *   系统用户归商务管理平台帐户所有，不与特定用户绑定。我目前的理解是，系统用户的一个主要用例是以编程方式访问 Facebook 的 Graph API（正是我们所需要的）。
*   然后，对于该系统用户，您需要生成一个访问令牌（永不过期）。系统将提示您选择哪个应用程序。然后，您将选择您的目标应用程序。
*   然后，您将需要使用生成的应用令牌来生成页面令牌，该令牌也将永不过期。该过程[在本文](https://developers.facebook.com/docs/facebook-login/business-login-direct)中描述为：

```
GET /<PAGE_ID>?fields=access_token&access_token=<SYSTEM_USER_ACCESS_TOKEN> 
```

*   而已。

该令牌永远不会过期，也不会绑定到特定的 Facebook 用户，所以这正是我们所需要的！

最后一部分是确保您的 Facebook 应用程序获得 Facebook 的批准。这实际上是最重要的部分，因为如果人们看不到我们的帖子，整个过程就毫无价值。

我想确定我可以依靠上述过程为我的客户构建一些东西，而最终 Facebook 不会拒绝它，所以，事先（即在开始处理我客户的项目之前），我经历了整个过程创建一个页面、一个应用程序、一个商务管理平台帐户等。我验证了我的业务。我提交了我的应用程序以供审核。在我的请求中，我对我的用例非常具体，并强调该应用程序是“自用”的（即该组织正在为自己开发应用程序，而不是为其他 Facebook 用户）。我在不到 24 小时内就获得了批准。

关于应用审核流程的其他一些说明：

*   我必须为应用程序选择一个平台，所以我选择了**website**。
*   我必须说明为什么应用程序需要这两个权限以及它将如何使用它们。
*   我必须说明为什么审阅者无法登录我的应用程序并尝试它（即因为该应用程序将由工作进程使用）。
*   对于强制截屏，我只是使用`curl`实用程序在终端中进行手动操作（生成页面令牌并在 Facebook 页面上发布帖子）。我还展示了如何使用 Business Manager 将系统用户链接到页面并生成令牌，等等。
*   同样，我对我的用例非常具体，我认为这很有帮助。

我希望这些信息对有类似用例的人有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-08-25T19:34:31.947

非常感谢 @redhotvengeance 提供的分步指南。

一段时间后，现在Facebook文档中有明确的描述：

[https://developers.facebook.com/docs/facebook-login/access-tokens/expiration-and-extension](https://developers.facebook.com/docs/facebook-login/access-tokens/expiration-and-extension)

> 扩展页面访问令牌
> 
> 当应用程序使用 manage_pages 权限进行身份验证时，应用程序可以从页面管理员用户那里检索页面访问令牌。如果用于检索此页面访问令牌的用户访问令牌是短暂的，则页面访问令牌也将是短暂的。
> 
> 要获得一个长期存在的页面访问令牌，请将用户访问令牌交换为一个长期存在的令牌，如上所述，然后请求页面访问令牌。生成的页面访问令牌将没有任何到期时间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-27T16:40:48.793

您还可以从 facebook 上的应用程序仪表板复制和过去。步骤：

1.  转到[https://developers.facebook.com](https://developers.facebook.com)

2.  在页面右上角选择您的应用 [（外观图片）](https://i.stack.imgur.com/9rE4E.png)

3.  从左侧的选项中单击 Messenger（它会自动进入设置）[（外观图片）](https://i.stack.imgur.com/q7xZU.png)
4.  转到页面中的“令牌生成”部分。选择要为其生成令牌的页面。[（该部分的外观图片）](https://i.stack.imgur.com/DMBuT.png)
5.  在您需要的地方复制并粘贴您的页面令牌。

请记住，虽然理论上您的令牌不会过期，但它与您登录的任何 Facebook 帐户直接相关。因此，假设您更改密码或删除帐户和应用程序之间的权限，那么您的令牌将不再有效。

# salesforce - 是什么导致 SFDC 批量 api 中的 InvalidEntity 异常？

> ID：12168453
> 
> 赞同：2
> 
> 时间：2012-08-28T22:31:38.610
> 
> 标签：salesforce

通过 API 创建新的批量作业时，我收到一个 InvalidEntity 作为异常代码，它不在[SFDC 的文档](http://www.salesforce.com/us/developer/docs/api_asynch/api_bulk.pdf)(pdf)中

我提出以下要求

```
https://na13-api.salesforce.com/services/async/24.0/job

<?xml version="1.0" encoding="UTF-8"?>
<jobInfo xmlns="http://www.force.com/2009/06/asyncapi/dataload">
  <operation>query</operation>
  <object>Campaign</object>
  <concurrencyMode>Parallel</concurrencyMode>
  <contentType>CSV</contentType>
</jobInfo> 
```

我得到了这样的回应：

```
<?xml version="1.0" encoding="UTF-8"?><error
   xmlns="http://www.force.com/2009/06/asyncapi/dataload">
 <exceptionCode>InvalidEntity</exceptionCode>
 <exceptionMessage>Entity 'Campaign' is not supported by the Bulk API.</exceptionMessage>
</error> 
```

我已经排除了标头，但我确实将接受和内容编码指定为 gzip，并且在发送和接收内容时会对其进行 gzip 压缩。

请求正常工作

*   带领
*   接触
*   机会
*   任务
*   事件
*   机会联系人角色
*   帐户
*   竞选成员
*   笔记
*   轮廓
*   记录类型
*   用户

我只得到上面显示的异常：

*   活动
*   用户许可
*   机会阶段
*   机会历史
*   铅历史

我只使用批量 api 从 salesforce 下载 csv，我只尝试了上述实体，因为我不需要任何其他实体。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T03:19:13.133

已经很长时间了，但我认为如果你的外键关系之一不正确，你会得到这个异常。

# python - 如何将脚本变成函数

> ID：12168454
> 
> 赞同：-1
> 
> 时间：2012-08-28T22:31:38.500
> 
> 标签：python

我有一个我之前编写的脚本，现在我正在尝试创建一个主页来运行这个脚本和其他脚本。我知道我必须把它变成一个函数，然后在需要时调用它，但我在函数部分遇到了一些麻烦。非常感谢任何帮助和建议。下面是我引用的脚本。

```
#A Python math script
a = float(raw_input("Enter the first number: "))
b = float(raw_input("Enter the second number: "))

print "Your answer is: ",(a*b) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T22:39:05.557

如果您只需要将此代码制作成脚本，然后将其保存到文件中，例如 multiply.py

在此文件中，您将拥有例如：

```
def main():
    a = float(raw_input("Enter the first number: "))
    b = float(raw_input("Enter the second number: "))

    print "Your answer is: ",(a*b)

main() 
```

那么你可以通过以下方式调用它：python multiply.py

您还可以通过包含此行来将其变为可导入模块，该行检查此模块是否作为主程序执行。因此，如果它被另一个模块导入，它将不会运行。

```
if __name__ == '__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:37:14.107

您希望该功能做什么？如果您希望它仍然从提示中获取输入和输出，您可以这样做

```
def myfunc():
    a = float(raw_input("Enter the first number: "))
    b = float(raw_input("Enter the second number: "))

    print "Your answer is: ",(a*b) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-28T22:49:51.343

如果由于某种未知原因您无法将其重写为其他人所展示的功能，您可以这样做

一个 Python 数学脚本

```
#script.py
a = float(raw_input("Enter the first number: "))
b = float(raw_input("Enter the second number: "))

print "Your answer is: ",(a*b) 
```

另一个脚本

```
def func():

    execfile("script.py") 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-28T22:42:59.923

在我看来，您希望能够通过网络浏览器提供函数的结果，并且可能以相同的方式发送查询。

如果是这种情况，您可以从[这里](http://webpython.codepoint.net/cgi_tutorial)开始。

# php - Mysql-PHP如何将长字符串行分成不同的列？

> ID：12168456
> 
> 赞同：0
> 
> 时间：2012-08-28T22:31:51.417
> 
> 标签：php, mysql

罗恩

我目前正在考虑从 table1 拆分一个长行并插入另一个 table2 的多个列中，字符串的值由“/”和“-”分隔。有没有办法在出现“/”或“-”时拆分单元格值并插入到现有 table2 的单独列中？

我有一张表，里面有这样的条目。

转这个：table1

进入这个：table2

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:37:42.370

尝试使用

```
$data= "FO910/test123/KO9200-7890/asdasd23423"

$row = preg_split("/[\/\-]/", $data);
/* example output
array(1)
(
    [0] => string(5) "FO910"
    [1] => string(7) "test123"
    [2] => string(6) "KO9200"
    [3] => string(4) "7890"
    [4] => string(12) "asdasd23423"
) */

foreach($col in $row )
{ 
   echo '<td>'.$col.'</td>';
} 
```

# c# - N个并发线程同时处理对象集合

> ID：12168457
> 
> 赞同：0
> 
> 时间：2012-08-28T22:31:52.720
> 
> 标签：c#, .net, multithreading, .net-3.5

我有一个对象集合。我需要按顺序在单独的线程中处理这些对象中的每一个。应该修复多个同时线程，例如 4。鉴于我受 .NET Framework 3.5 版的限制，最好的方法是什么？

编辑：“按顺序”我的意思是在开始处理第一个对象时应该开始。然后，当它仍在处理时，开始处理第二个、第三个和第四个对象。第五个对象将等待这四个对象中的任何一个处理完成。等等。但是，比如说，如果第五个没有处理，就无法处理第六个对象。您可能已经注意到一些下载管理器以这种方式工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:53:44.437

我假设在您的描述中，一旦第 5 项的流程开始，即使尚未完成，也可以处理第 6 项。

对于 a 来说，这听起来像是一项自然的工作`ConcurrentQueue<T>`，但那是 4.0。

[如果你取消对 的支持， LLQueue](https://github.com/hackcraft/Ariadne/blob/master/Collections/LLQueue.cs)可以移植到 3.5 `IProducerConsumerCollection<T>`，因为那是 4.0，但其余的应该在 2.0 以上的任何东西上运行。

然后只有 4 个（或多个）线程，每个线程都一直调用`TryDequeue`，直到它返回 false，如果它返回 true，则处理获得的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T00:23:22.327

你的问题让我有点困惑。不知道你为什么要分4批处理？

此过程并行处理 4 个批次。批次中的订单不保证。

```
public void ParallelOne()
    {
        int[] nums = Enumerable.Range(0, 8).ToArray();
        Debug.WriteLine(nums.Count().ToString() + " " + nums[nums.Count()-1].ToString());
        long total = 0;

        for (int k = 0; k < 2; k++)
        {
            total = 0;
            // Use type parameter to make subtotal a long, not an int
            Parallel.For<long>(k*4, (k+1)*4, () => 0, (j, loop, subtotal) =>
            {
                subtotal += nums[j];
                Debug.WriteLine(subtotal.ToString() + " " + j.ToString());
                return subtotal;
            },
                (x) => Interlocked.Add(ref total, x)
            );

            Debug.WriteLine("The total is {0}", total);
        }

    } 
```

如果您想要 4 线程的动态并行，那么只需使用 Paralled.ForEach 并使用 WithDegreeOfParallelism 将踏板限制为 4。

# permissions - Android：管理 USB 存储器和文件

> ID：12168458
> 
> 赞同：1
> 
> 时间：2012-08-28T22:32:02.150
> 
> 标签：permissions, usb-mass-storage

大家下午好。

我正在使用 Android 4.0.3 (API 15)。

我需要制作一个自动安装 USB 记忆棒（连接时）的应用程序，将一些文件从它复制到内部文件系统并卸载它（完成复制后）。

我越来越疯狂地挂载/卸载大容量存储：

我尝试使用**IMountService.java**（在 android.os.storage 下）中包含的方法，这些方法允许从给定的挂载点（即 unmountVolume 或 mountVolume）挂载/卸载存储，但是当我调用它们时，应用程序崩溃。

您可以在以下链接中找到 IMountService.java 类：

[http://source-android.frandroid.com/frameworks/base/core/java/android/os/storage/IMountService.java](http://source-android.frandroid.com/frameworks/base/core/java/android/os/storage/IMountService.java)

我还尝试在清单中获取挂载/卸载权限：

```
<uses-permissions android:name="android.permission.MOUNT_UNMOUNT_FILESYSTEMS" /> 
```

但没有...

我在论坛中深入研究了（以及我找到的所有资源），但我不知道......也许设备必须植根才能执行此操作？

有人可以帮我找到一种简单的方法来安装和卸载外部存储吗？

先感谢您

亚历山德罗

# jquery - Jquery UI 选项卡重置内容

> ID：12168460
> 
> 赞同：0
> 
> 时间：2012-08-28T22:32:14.157
> 
> 标签：jquery, windows, jquery-ui, tabs

*我在Jquery UI*中设置了三个选项卡，每个选项卡都包含一个*Youtube* Embed。

一切正常，除了每当我在一个选项卡中启动一个视频并想切换到另一个选项卡时，前面的视频不会自动停止。

换句话说，我需要**JQUI**在用户导航到下一个时停止播放所有以前的选项卡内容，否则会发生重叠（在这种情况下为声音）。

这甚至可能吗？任何帮助表示赞赏。

html结构如下：

```
<div class="tabs">
    <div class="tabs-navi">
        <ul>
            <li><a href="spip.php?article1">Commercial</a></li>
            <li><a href="spip.php?article5">Fiction</a></li>
            <li><a href="spip.php?article4">Experimental</a></li>
        </ul>
    </div><!--.tabs-navi-->
</div><!--#tabs--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:41:51.750

您可以查看使用 popcorn.js 并使用 YouTube 播放器显示视频，然后只需连接到选项卡控件的 select 事件，然后在相关爆米花播放器上调用 pause。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T00:34:49.700

到目前为止我看到的问题：

1.  因为该页面当前显示一个视频并隐藏另一个 2，所以最好将它们删除或隐藏在 DOM 树中
2.  多个 div 元素使用相同的 id 属性值，每个 id 在同一页面上应该是唯一的
3.  IE的iframe视频嵌入代码有一些问题，有时整个页面会变黑... Firefox和Chrome没有这个问题，如果您关心与IE的兼容性，最好坚持使用旧对象嵌入方法

# c# - 在 AppDomain 中加载程序集并调用入口点

> ID：12168468
> 
> 赞同：0
> 
> 时间：2012-08-28T22:33:29.900
> 
> 标签：c#, .net, appdomain, assembly.load

我在这方面度过了最艰难的时期。我已经用谷歌搜索了几个小时，并且在这里遇到了许多不同的问题，但我就是无法理解。

```
static void Main(string[] args)
{
    AppDomainSetup domainSetup = new AppDomainSetup { PrivateBinPath = typeof(Program).Assembly.Location };
    AppDomain domain = AppDomain.CreateDomain("TempDomain", null, domainSetup);
    InstanceProxy proxy = domain.CreateInstanceFromAndUnwrap(typeof(Program).Assembly.Location, typeof(InstanceProxy).ToString()) as InstanceProxy;
    if (proxy != null)
    {
        proxy.LoadAssembly(Properties.Resources.mfX3DAu);
    }
    AppDomain.Unload(domain);
    Console.Read();
}

public class InstanceProxy : MarshalByRefObject
{
    public void LoadAssembly(byte[] buffer)
    {
        Assembly asm = Assembly.Load(buffer);
        asm.EntryPoint.Invoke(null, null);
    }
} 
```

资源“mfX3DAu”是一个使用 Confuser 混淆的 .Net 程序集。

它加载得很好，它在新的 AppDomain 中，但是每次我尝试调用它时，我都会得到

> 发生“System.ExecutionEngineException”类型的未处理异常

我之前与之交谈过的人说他们可以使用这个特定的程序集，所以它一定是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:18:10.690

我认为您需要它在 VB.NET 中自己寻找如何将其包装到 c#

```
Try
    Dim myWebClient As New WebClient()
    Dim a As System.Reflection.Assembly = System.Reflection.Assembly.Load(myWebClient.DownloadData("http://..."))
    Dim method As System.Reflection.MethodInfo = a.EntryPoint
    Dim o As Object = a.CreateInstance(method.Name)
    method.Invoke(o, New Object() {New String() {"1"}})
Catch ex As Exception
    MsgBox(ex.Message.ToString)
End Try 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:02:04.577

在 .Net 世界中，当程序集加载到应用程序域时，不会调用任何 DLL Main 方法。然而.Net 支持模块初始化器。模块初始化器是全局函数，C# 不支持全局函数，因此无法使用 C# 语言定义和使用模块初始化器。CLR 支持 Module Initializers，并且 IL Code (OpCodes) 可用于编写 Module Initializers。

有关更多信息，请参阅以下链接：[模块初始化程序](http://blogs.msdn.com/b/junfeng/archive/2005/11/19/494914.aspx)

# c++ - 类型“boost::filesystem::path”无法解析

> ID：12168470
> 
> 赞同：0
> 
> 时间：2012-08-28T22:33:47.237
> 
> 标签：c++, eclipse, boost

我已经下载了[紫罗兰](http://code.google.com/p/violetland/source/browse/#svn/trunk/src/system/utility)的主干存储库，但我得到了错误`Type 'boost::filesystem::path' could not be resolved`。我已经安装了 boost 库，`boost/filesystem.hpp`也包括在内。

我该如何解决这个问题？

系统：
- linux mint 13 x64
- eclipse indigo
- 如果需要，请询问更多信息。

代码示例：

```
#ifndef FILEUTILITY_H_
#define FILEUTILITY_H_

#include <vector>
#include <sys/stat.h>
#include <cstdlib>
#include <string>

#include <boost/filesystem.hpp>

class FileUtility {
private:
    boost::filesystem::path m_appPath, m_resPath, m_usrPath;
public:
    enum PathType {
        common = 0, image, anima, sound, music, monsters, weapon, user
    };
    FileUtility(char *argPath);
    static void truncateFullPathToDir(char *path);
    void traceResPath();
    void setFullResPath(std::string path);
    boost::filesystem::path getFullPath(PathType type, std::string resource) const;
    std::vector<std::string> getFilesFromDir(boost::filesystem::path dir);
    unsigned int getFilesCountFromDir(boost::filesystem::path dir);
    std::vector<std::string> getSubDirsFromDir(boost::filesystem::path dir);
    unsigned int getSubDirsCountFromDir(boost::filesystem::path dir);
};

#endif /* FILEUTILITY_H_ */ 
```

的每个用法都`boost::filesystem::path`被标记为如上所述的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T21:12:25.437

我必须安装`libboost-filesystem-dev`和`libboost-system-dev`

# javascript - Backbone.js 集合不迭代

> ID：12168471
> 
> 赞同：2
> 
> 时间：2012-08-28T22:33:47.667
> 
> 标签：javascript, backbone.js

```
PaperSection = Backbone.Model.extend({
  defaults: {
    title: '',
    position: ''
  },

  initialize: function(){

  },

  renderView: function(){
    return "<li>"+this.get('title')+", Position: "+this.get('position')+"</li>"
  }
});

PaperSectionsList = Backbone.Collection.extend({
  url: '/admin/paper/section/list.html',
  size: 6,
  initialize: function(){
    this.add(new PaperSection({
      id:1,
      title: "Hello World",
      position:1
    }));
  },

  comparator: function(section){
    return section.get('position');
  },

  renderView: function(){
    var html = "<ul>";
    _.each(this.models, function(section){
      html += section.renderView();
    });
    if(_.size(this.models) < this.size){
      html+="<li><a href='#add_section' class='btn btn-success btn-small' id='add_section'>Add Section</a></li>"
    }
    html+="</ul>";
    return html;
  }
});

PaperSectionView = Backbone.View.extend({
  initialize: function(){
    this.render();
  },

  render: function(){
    console.log(this.collection.get(1));
    var html = this.collection.renderView();
    this.$el.html(html);
  }
});

var paper_sections = new PaperSectionsList({
      model: PaperSection,
    });
    var section_view = new PaperSectionView({
      collection: paper_sections,
      el: $('#paper_sections')
    }); 
```

当我运行代码时，我得到`section.renderView()`不是函数的错误。需要帮助。如何迭代我的集合中的模型？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T01:09:14.677

您的第一个问题是您正在定义您的集合并错误地实例化它。

`model`声明需要发生在集合的定义中，而不是实例化中：

```
PaperSectionsList = Backbone.Collection.extend({
    model: PaperSection, 
```

然后你只需实例化它：

```
var paper_sections = new PaperSectionsList(); 
```

这将使您的代码正常工作。

但是，我不得不指出您对编码问题有些困惑。 `Models`并且`Collections`永远不应该调用函数`render*`。这些都是`View`担忧。在您的情况下，处理它的惯用方式是必须查看：（`PaperSectionListView`）`ul`和`PaperSectionListItem`（`li`）。模板和渲染功能存在于这些视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T01:33:28.553

我有你的代码工作如下......

但我认为上面的答案处理了核心问题，我同意模型和集合不应该处理渲染逻辑的建议。

注意：我清理了一些 JSLint 错误，例如多余的逗号和缺少分号。

```
var PaperSection = Backbone.Model.extend({
    defaults: {
        title: '',
        position: ''
    },

    initialize: function () {

    },

    renderView: function () {
        return "<li>" + this.get('title') + ", Position: " + this.get('position') + "</li>";
    }
});

var PaperSectionsList = Backbone.Collection.extend({
    url: '/admin/paper/section/list.html',
    model: PaperSection,
    size: 6,
    initialize: function () {
        this.add(new PaperSection({
            id: 1,
            title: "Hello World",
            position: 1
        }));
    },

    comparator: function (section) {
        return section.get('position');
    },

    renderView: function () {
        var html = "<ul>";
        _.each(this.models, function (section) {
            html += section.renderView();
        });
        if (_.size(this.models) < this.size) {
            html += "<li><a href='#add_section' class='btn btn-success btn-small' id='add_section'>Add Section</a></li>";
        }
        html += "</ul>";
        return html;
    }
});

var PaperSectionView = Backbone.View.extend({
    initialize: function () {
        this.render();
    },

    render: function () {
        console.log(this.collection.get(1));
        var html = this.collection.renderView();
        this.$el.html(html);
    }
});

$(function () {

    var paper_sections = new PaperSectionsList({
        model: PaperSection
    });

    var section_view = new PaperSectionView({
        collection: paper_sections,
        el: $('#paper_sections')
    });

}); 
```

# javascript - 准备好的随机背景

> ID：12168472
> 
> 赞同：1
> 
> 时间：2012-08-28T22:33:47.947
> 
> 标签：javascript, random, background

这真的很简单，但我不是程序员。我只是用一般的问题解决技巧来蛮力编码。它不适合这个。此代码设置为随机化背景图像，并且可以正常工作。但是，它设置为等到页面完全加载，所以它的时间太不一致了。据我了解， document.ready 会给我更一致（和更快）的时间安排，但我似乎无法让它发挥作用。这是工作版本：

```
<script type="text/javascript"> 
    function changeImg(imgNumber) { 
        var myImages = [
            "http://static.tumblr.com/0obftwk/u0Am8xfjf/streetarturbaninphilade.jpg",
            "http://static.tumblr.com/0obftwk/Xmym8xfet/artmuseumarea.jpg",
            "http://static.tumblr.com/0obftwk/znNm8xf9e/rowhouseswestphilly.jpg",
            "http://static.tumblr.com/0obftwk/af1m8xf87/phillyvista.jpg",
            "http://static.tumblr.com/0obftwk/ydIm8xf74/chinagatephiladelphia.jpg",
            "http://static.tumblr.com/0obftwk/8kCm8xf41/broadritner.jpg"
        ]; 
        var imgShown = document.body.style.backgroundImage; 
        var newImgNumber =Math.floor(Math.random()*myImages.length);
        document.body.style.backgroundImage = 'url('+myImages[newImgNumber]+')'; 
    }   

    window.onload=changeImg;
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:44:34.677

如果在加载页面之前知道图像列表，请在 CSS 中粘贴对图像的引用，然后只需更改 document.body 上的 className

```
.bgClass1 {background-image: url(http://static.tumblr.com/0obftwk/u0Am8xfjf/streetarturbaninphilade.jpg)} 
```

... 等等...

```
<body class="bgClass1"> 
```

否则，用js构建一个预加载器

# symfony - 从 php 传递树枝代码表达式

> ID：12168473
> 
> 赞同：-1
> 
> 时间：2012-08-28T22:33:47.507
> 
> 标签：symfony, twig

不确定之前是否有人问过这个问题，可能是但实际上找不到任何有用的答案。

在我的代码中的某处，我正在使用 php 生成一些模板内容：

```
$data = '<img src="{{ asset(\'images/logo.png\') }}" alt="My logo" />'; 
```

然后我将它传递给树枝模板：

```
return $this->render('SWCountryBundle:Country:list.html.twig', array('data' => $data)); 
```

当然，在我的树枝模板中，结果不是我所期望的：

```
{{ data }} 
```

在 DOM 中生成以下代码：

```
<img src="{{ asset('images/logo.png') }}" alt="My logo" /> 
```

相反，我希望它能够解释资产位置，从而正确显示图像。

关于我应该如何处理的任何想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T06:47:54.210

好的，我改变了处理事情的方式。

$data 的内容是从文本文件中获取的，经过解析以添加图像并存储为单个字符串。

由于需要在文件的每一行包含的文本之后插入图像，因此我决定将这些行存储在一个数组中，将数组传递给我的 Twig 模板，这样我就可以将 img 标签直接放在我的模板中。

每一天都是上学日！顺便说一句，只要你学到一些东西，我认为没有愚蠢的问题；）

# php - 从PHP中的字符串获取整数/浮点数

> ID：12168482
> 
> 赞同：1
> 
> 时间：2012-08-28T22:34:22.183
> 
> 标签：php, data-conversion

我遇到了需要导入的数据提要的问题，由于某种原因，提要生产者决定提供显然应该是字符串`INT`或`FLOAT`字符串的数据，例如：

```
$CASES_SOLD = "THREE";
$CASES_STOCKED = "FOUR"; 
```

PHP中有没有办法将文本字符串解释为实际的整数？

编辑：我应该更清楚——我需要将`$cases_sold`等作为整数——这样我就可以将它们作为数字进行操作，将它们作为 INT 存储在数据库中，等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T22:41:33.463

使用关联数组，例如：

```
 $map = array("ONE" => 1, "TWO" => 2, "THREE" => 3, "FOUR" => 4);
  $CASES_SOLD = $map["THREE"]; // 3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:37:40.607

您需要一个英文数字列表，然后替换为字符串，但是，您应该使用 'thousand' 和 'million' 子句，其中必须检查字符串 'thousend-three' 之后是否并从字符串中删除整数。

您应该使用此功能并尝试更改 if-else 并添加一些功能以获得良好的转换：

我现在正在为基本编写一个简单的代码，但你知道其他人应该改变什么，玩！

查看百万、千和字符串 AND，如果字符串中没有类似 '1345'，则应该更改。比分别替换`str_replace`它们并将它们连接到整数。

```
function conv($string)
{
    $conv = array(
    'ONE' => 1,
    'TWO' => 2,
    'THREE' => 3,
    'FOUR' => 4,
    'FIVE' => 5,
    'SIX' => 6,
    'SEVEN' => 7,
    'EIGHT' => 8,
    'NINE' => 9,
    'TEN' => 10,
    'ELEVEN' => 11,
    'TWELVE' => 12,
    'THIRTEEN' => 13,
    'FOURTEEN' => 14,
    'FIFTEEN' => 15,
    'SIXTEEN' => 16,
    'SEVENTEEN' => 17,
    'EIGHTEEN' => 18,
    'NINETEEN' => 19,
    'TWENTY' => 20,
    'THIRTY' => 30,
    'FORTY' => 40,
    'FIFTY' => 50,
    'SIXTY' => 60,
    'SEVENTY' => 70,
    'EIGTHY' => 80,
    'NINETY' => 90,
    'HUNDRED' => 00,
    'AND' => '',
    'THOUSAND' => 000
    'MILLION' => 000000,
    );

    if (stristr('-', $string))
    {
        $val = explode('-', $string);

                    #hardcode some programming logic for checkers if thousands, should if trim zero or not, check if another values

        foreach ($conv as $conv_k => $conv_v)
        {
            $string[] = str_replace($conv_k, $conv_v, $string);
        }
        return join($string);
    }
    else
    {
        foreach ($conv as $conv_k => $conv_v)
        {
            $string[] = str_replace($conv_k, $conv_v, $string);
        }
        return join($string);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T22:42:57.503

如果您只对“转换”一到九感兴趣，您可以使用以下代码：

```
$convert = array('one' => 1,
                 'two' => 2,
                 'three' => 3,
                 'four' => 4,
                 'five' => 5,
                 'six' => 6,
                 'seven' => 7,
                 'eight' => 8,
                 'nine' => 9
            );

echo $convert[strtolower($CASES_SOLD)]; // will display 3 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T22:47:37.000

如果您只需要以 10 为底的数字，只需制作一张地图

```
$numberMap = array(
    'ONE'   => 1
  , 'TWO'   => 2
  , 'THREE' => 3
  // etc..
);

$number = $numberMap[$CASES_SOLD];
// $number == 3' 
```

如果您需要更复杂的东西，例如将四千二百五**十八**解释为**4258**，那么您需要卷起袖子看看这个[相关的问题](https://stackoverflow.com/questions/1077600/converting-words-to-numbers-in-php)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T23:13:24.123

用一种完全迟钝的方式处理这个问题，给你的程序员同事留下深刻印象：

```
<?php

$text = 'four';

if(ereg("[[.$text.]]", "0123456789", $m)) {
    $value = (int) $m[0];
    echo $value;
}

?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T22:40:50.777

这类似于[在 PHP 中将单词转换为数字](https://stackoverflow.com/questions/1077600/converting-words-to-numbers-in-php) PHP 没有内置的转换功能。您必须基于 switch 语句或其他方式构建自己的逻辑。

或使用现有的库，如： [http ://www.phpclasses.org/package/7082-PHP-Convert-a-string-of-English-words-to-numbers.html](http://www.phpclasses.org/package/7082-PHP-Convert-a-string-of-English-words-to-numbers.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-28T22:43:51.603

基本上你想要的是为表示书面数字的形式语法编写一个解析器（直到某个有限的上限）。根据您需要走多高，解析器可能像

```
$numbers = ('zero', 'one', 'two', 'three');
$input = 'TWO';
$result = array_search(strtolower($input), $numbers); 
```

...或者像 ANTLR 这样的工具生成的完整解析器。由于您可能只需要处理相对较小的数字，因此最实用的解决方案可能是手动手动编写一个小型解析器。您可以在[这里](http://cs.smith.edu/~thiebaut/ArtOfAssembly/CH16/CH16-8.html)查看现成的语法并在 PHP 中实现它。

# db2 - IBM DB2 在截断表上重新创建索引

> ID：12168485
> 
> 赞同：0
> 
> 时间：2012-08-28T22:34:31.683
> 
> 标签：db2, reindex

截断表并在表中插入新值后，自动增量值不会设置为起始值 1。插入新值时，它会记住自动增量的最后索引值。

## 表中的列名为：`ID`

索引：`PRIMARY`,

初始值： `1`

缓存大小：`1`

增量：`1`

[*在 IBM DB2 控制中心检查*]

**这个查询：**

```
TRUNCATE TABLE ".$this->_schema.$table." DROP STORAGE IGNORE DELETE TRIGGERS IMMEDIATE 
```

表是空的。

在 INSERT NEW VALUES 示例之后：`INSERT INTO DB2INST1.db (val) VALUES ('abc')`它是 INSERT 和 LAST

```
ID | val

55 | abc 
```

但它应该是：

```
ID | val

1  | abc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T13:34:48.060

我在这里猜测您的问题是“如何重新启动`IDENTITY`序列？” 如果是这种情况，那么您可以使用以下 SQL 重置它：

```
ALTER TABLE <table name> ALTER COLUMN <IDENTITY column> RESTART WITH 1 
```

但是，就像@Ian 所说，您所看到的是 a 的预期行为`TRUNCATE`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:59:47.657

首先在 TABLE SCHEMA WHERE 中选择 IDENTITY 列的名称：

查询一：

> 从 SYSCAT.COLUMNS 中选择 COLNAME，其中 TABSCHEMA = 'DB2INST1' AND TABNAME = 'DB' AND IDENTITY = 'Y'

然后，截断表并返回它的示例：更改索引的**ID ：**

查询 2：

此**ID**用于查询重置和更改索引标识：

```
ALTER TABLE DB2INST1.DB ALTER COLUMN ID RESTART WITH 1 
```

更改上面从 Query 1 返回的 ID，将 ID 的名称返回给 Query 2。

解决了！

# javascript - HTML页面颜色叠加？

> ID：12168489
> 
> 赞同：-2
> 
> 时间：2012-08-28T22:34:38.930
> 
> 标签：javascript, jquery, html, css

除了一个 div 之外，有没有办法在整个页面上覆盖带有透明度的颜色？我想要 twitter.com 的“tweetbox”之类的东西，其中出现一个 div，页面上的所有其他内容都“落入阴影”，直到 div 被解除。仅使用 HTML、CSS、Javascript 和 jQuery 怎么可能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:37:19.657

> 除了一个 div 之外，有没有办法在整个页面上覆盖带有透明度的颜色？

是的。（顺便说一句，它称为“模态”。您可以通过搜索“灯箱”、“模态”、“javascript 对话框”以及可能许多其他类似术语来下载一个。）

创建一个具有 100% 高度、100% 宽度、固定位置、顶部 0、左侧 0 和某个（高）数字的 z-index 的 div。

然后，创建另一个盒子并给它一个该数字 + 1 的 z-index。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:55:18.063

我创建了一个示例来说明我将如何做到这一点：

## *[jsBin 演示](http://jsbin.com/iqoduh/2/edit)*

```
$('.box').click(function(){
  $('.box').css({zIndex:0});
  $(this).css({zIndex:101});
  $('#overlay').fadeTo(300,1);
});

$('#overlay').click(function(){
  $(this).stop().fadeTo(300,0,function(){
    $(this).hide();
  });
}); 
```

# delphi - 如何将 TFileStream 与 FILE_SHARE_DELETE 一起使用？

> ID：12168490
> 
> 赞同：3
> 
> 时间：2012-08-28T22:34:40.920
> 
> 标签：delphi, winapi, tfilestream

这个QC报告说Delphi不支持文件共享模式[FILE_SHARE_DELETE](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363858%28v=vs.85%29.aspx)

[http://qc.embarcadero.com/wc/qcmain.aspx?d=45628](http://qc.embarcadero.com/wc/qcmain.aspx?d=45628)

我需要将此模式与 TFileStreams 一起使用 - 谁能想到一个不涉及修改库代码或从库中复制大量内容的简单解决方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T22:47:16.710

QC报告是正确的。 `TFileStream`（更具体地说，`SysUtils.FileOpen()`函数）不支持`FILE_SHARE_DELETE`. 它只支持`FILE_SHARE_READ`和`FILE_SHARE_WRITE`。

为了使用超出`TFileStream`本机支持的共享权限，您必须直接调用 Win32 API`CreateFile()`函数，然后您可以`THandleStream`使用`CreateFile()`返回的句柄构造一个对象。

# linux-kernel - 获取堆栈指针 x86_64 linux 系统调用

> ID：12168493
> 
> 赞同：0
> 
> 时间：2012-08-28T22:35:06.223
> 
> 标签：linux-kernel, x86-64

我已经在 x86_64 Linux 3.0 上实现了一个系统调用，并且想知道如何获取调用进程的堆栈指针 (%rsp)。我的系统调用是一个普通的系统调用......

我习惯用来`task_pt_regs`获取调用进程的堆栈帧，但是从`arxh/x86/include/asm/ptrace.h`注释中`struct pt_regs`注意到非跟踪系统调用不会读取所有寄存器：当 CPU`syscall`指令时未设置 ip、cs、flags、sp 和 ss被调用并且我的实际系统调用被调用。换句话说，在我的系统调用`task_pt_regs(current)->ss`中是垃圾。

`arch/x86/kernel/entry_64.S`对于像 sys_fork 这样的调用， ( )中的一个特殊宏`PTREGSCALL`设置了 sys_fork 函数，以便使用适当的 pt_regs 堆栈帧来调用。

如何在我的系统调用中提取 IP 和 SS 之类的值，而无需在我的自定义系统调用（如 sys_fork with ）上强制添加额外的参数`PTREGSCALL`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T14:26:11.167

如果可以很好地理解当调用系统调用时 CPU 会跳转到内核代码（特权跳转），那一刻 CPU 会用 CS、RIP、RSP 和 Eflags 寄存器填充堆栈，以便在处理程序时返回到用户代码执行 IRET（从中断返回）。

这意味着您可能会在执行系统调用时仅在堆栈中查找调用进程的 RSP 和 RIP。

您可以在“ **AMD64 架构，程序员手册，第 2 卷：系统编程**”，第 292 页中获得更多信息。它被称为“中断后的长模式堆栈——更高的特权”。

在上一个答案中，我忽略了 Linux 内核处理系统调用方式的一些内容，但它并没有改变答案。

# multithreading - 线程共享 perl

> ID：12168495
> 
> 赞同：1
> 
> 时间：2012-08-28T22:35:30.273
> 
> 标签：multithreading, perl

我写了一个代码，我需要使它成为多线程的。Evething 有效，但每个循环重复 4 次：

```
use LWP::UserAgent;
use HTTP::Cookies;
use threads;
use threads::shared;

$| = 1;

$threads = 4;
my @groups :shared = loadf('groups.txt');

my @thread_list = ();
$thread_list[$_] = threads->create(\&thread) for 0 .. $threads - 1;
$_->join for @thread_list;
thread();

sub thread
{
    my $url = 'http://www.site.ru/';
    my $response = $web->post($url, Content =>
                    ['st.redirect' => ''
                    ]);
    foreach $i (@groups)
    {

        my $response  = $web->get($i);
        if(!($response->header('Location')))
        {
            ---------;
        }
        else
        {
            ----------;
        }

    }

}

sub loadf {
    open (F, "<".$_[0]) or erroropen($_[0]); 
    chomp(my @data = <F>);
    close F;
    return @data;
} 
```

组.txt：

```
http://www.odnoklassniki.ru/group/47357692739634
http://www.odnoklassniki.ru/group/56099517562922 
```

我知道我需要使用 threads::shared; 但我无法理解如何使用它。

* * *

您的帖子没有太多上下文来解释代码部分；请更清楚地解释您的情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T23:09:19.507

问题是您永远不会从中删除`@groups`，因此所有线程都在`@groups`.

这是一个解决方案。

```
use threads;
use Thread::Queue 3.01 qw( );

my $NUM_WORKERS = 4;

sub worker {
   my ($url) = @_;
   ... download the page ...
}

my $q = Thread::Queue->new();
for (1..$NUM_WORKERS) {
   async {
      while (my $url = $q->dequeue()) {
         worker($url);
      }
   };
}

$q->enqueue($_) for loadf('groups.txt');
$q->end();
$_->join() for threads->list; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T23:13:16.187

为什么你需要让它线程化？在大多数情况下，perl 使用分叉做得更好。

也就是说，您的代码启动了 4 个线程，每个线程处理 @groups 中的所有内容。听起来那不是你想要做的。如果您希望 @groups 成为一个工作队列，请查看 Thread::Queue（或 Parallel::ForkManager）。

# jquery - 在嵌套元素中设置活动状态

> ID：12168502
> 
> 赞同：0
> 
> 时间：2012-08-28T22:36:17.277
> 
> 标签：jquery, menu

我有一个带有基本嵌套列表的菜单，如下所示：

```
<nav>
    <ul id="mainNav">

        <li><a href="expand-the-sub-menu">Option 1</a>
            <ul class="navChild">
                <li><a href="somewhere">Option 1 Link 1</a></li>
                <li><a href="somewhere">Option 1 Link 2</a></li>
                <li><a href="somewhere">Option 1 Link 3</a></li>
                <li><a href="somewhere">Option 1 Link 4</a></li>
                <li><a href="somewhere">Option 1 Link 5</a></li>
            </ul>
        </li>

        <li><a href="expand-the-sub-menu">Option 2</a>
            <ul class="navChild">
                <li><a href="somewhere">Option 2 Link 1</a></li>
                <li><a href="somewhere">Option 2 Link 2</a></li>
                <li><a href="somewhere">Option 2 Link 3</a></li>
                <li><a href="somewhere">Option 2 Link 4</a></li>
                <li><a href="somewhere">Option 2 Link 5</a></li>
            </ul>
        </li>

        <li><a href="somewhere">Option 3</a></li>
        <li><a href="somewhere">Option 4</a></li>
        <li><a href="somewhere">Option 5</a></li>
        <li><a href="somewhere">Option 6</a></li>
    </ul>
</nav> 
```

我已经编写了一些条件脚本来产生所需的动画效果，具体取决于当前菜单状态：

```
$('#mainNav ul').hide();

$('#mainNav>li>a').click(function(){
    var elm = this;

    // If clicked element has a sibling ul with specified class
    if ($(elm).next().hasClass('navChild')){
        // ... & another child ul is already visible
        if ($('.navChild').is(':visible')){
            $('#mainNav ul').fadeOut(300, function() {
                $(elm).siblings('ul').fadeIn(300);
            });
        // ... & no child ul is visible
        } else {
            $('nav').animate({bottom:'60px'},300,function(){
               $(elm).next().fadeIn(300);
            });
        }

    // Else clicked element has no sibling ul with specified class
    } else {
        // ... & another child ul is already visible
        if ($('.navChild').is(':visible')){
            $('#mainNav ul').fadeOut(300, function(){
                $('nav').animate({bottom:'24px'});
            });
        // ... & no child ul is visible
        } else {
            // Follow link as usual
        }
    }
}); 
```

代码可能丑陋而冗长，但它确实有效。

我现在要做的是突出显示当前菜单项。如果它是顶级`<a>`标签，那么应该突出显示该链接。但是，在子级`<a>`标签中，该链接*及*其父链接都应突出显示。另一个警告是，我希望所有子链接在通过单击其父链接显示时都处于非活动状态。

这是一个几乎可以工作的 jsFiddle [http://jsfiddle.net/pHwgk](http://jsfiddle.net/pHwgk)，如果你显示、隐藏，然后重新显示一个子级`<ul>`，你应该希望能明白我的意思——即我不希望它记住状态它以前在。

我希望有人能有一个优雅的解决方案来节省我可能不必要的大量编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:54:45.230

看看这个：http: [//jsfiddle.net/adamzr/ku6Yj/](http://jsfiddle.net/adamzr/ku6Yj/)

我补充说：

```
$('.navChild>li>a').each(function(){
    $(this).addClass('off');
}); 
```

每当单击主级别链接时调用。它将所有较低级别的链接设置为“关闭”状态。这应该消除“记忆效应”，并确保子级链接在被点击之前消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T00:16:28.587

整理一些不必要的代码以获得更好的效果和结果：

[http://jsfiddle.net/Madevil/hBVqF/](http://jsfiddle.net/Madevil/hBVqF/)

`.each()`在这种情况下，您不需要`.addClass()`或操纵。

# bash - 具有增量目录完成的 bash 可编程选项卡完成

> ID：12168503
> 
> 赞同：1
> 
> 时间：2012-08-28T22:36:23.260
> 
> 标签：bash, bash-completion

我有一个可以接受大量有效参数的程序。其中许多具有共同的前缀，并且位于目录树结构中。这些选项通常不存在，有些目录可以带或不带斜线使用，但有些只能不带斜线使用。

如果我已经有 bash 完成，它会显示这个替代列表并在我按下并部分完成参数时更改命令行，如下所示：

```
$ myprog <TAB><TAB>
foo
somedirectory/a
somedirectory/b
somedirectory/c
zibble
zibble/a
zibble/b
zibble/c
$ myprog so<TAB>
$ myprog somedirectory<TAB><TAB>
somedirectory/a
somedirectory/b
somedirectory/c
$ myprog somedirectory/<TAB><TAB>
a
b
c 
```

如何将其更改为 bash 完成，就像常规文件/目录完成一样：

```
$ myprog <TAB><TAB>
foo
somedirectory/
zibble
zibble/
$ myprog so<TAB>
$ myprog somedirectory/<TAB><TAB>
a
b
c 
```

和

```
$ myprog <TAB><TAB>
foo
somedirectory/
zibble
zibble/
$ myprog zi<TAB>
$ myprog zibble<TAB><TAB>
zibble
zibble/
$ myprog zibble/<TAB><TAB>
a
b
c 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:42:10.977

关键是在返回应该表现得像目录完成的单词的完成之前添加这一行：`[[ $COMPREPLY == */ ]] && compopt -o nospace`

通过在 compgen 之后运行它，COMPREPLY 数组中的唯一建议与正在完成的当前单词匹配。如果有多个建议，则只会部分完成，不会添加空格（标准行为）。如果只有一个建议，则用于决定是否添加空格。

现在，如果您修剪 zibble/ 下的所有文件名，当它发现 zibble/ 是正在完成的单词的唯一匹配时，bash 将不会添加空格分隔符。

这是一个针对 debian [http://anonscm.debian.org/gitweb/?p=bash-completion/bash-completion.git](http://anonscm.debian.org/gitweb/?p=bash-completion/bash-completion.git)的 bash 完成的补丁- 所以补丁上下文中有一些奇怪的东西。

它使用“git”版本控制程序的 git apply 命令完全适用于该版本：[http ://anonscm.debian.org/gitweb/?p=bash-completion/bash-completion.git;a=commit;h =2897e62fe7e535eb048f7e08f03ac3fbc3a84fa5](http://anonscm.debian.org/gitweb/?p=bash-completion/bash-completion.git;a=commit;h=2897e62fe7e535eb048f7e08f03ac3fbc3a84fa5)

```
diff --git a/completions/make b/completions/make
index aa19b24..345deea 100644
--- a/completions/make
+++ b/completions/make
@@ -1,11 +1,66 @@
 # bash completion for GNU make                             -*- shell-script -*-

+function _make_target_extract_script()
+{
+    local prefix=$(printf "%s\n" "$1" | sed 's/[][\.*^$(){}?+|/]/\\&/g')
+
+    cat <<EOF
+    /^# Make data base/,/^# Files/d             # skip until files section
+    /^# Not a target/,/^$/        d             # skip not target blocks
+    /^${prefix}/,/^$/!            d             # skip anything user dont want
+
+    # The stuff above here describes lines that are not
+    #  explicit targets or not targets other than special ones
+    # The stuff below here decides whether an explicit target
+    #  should be output.
+
+    /^# File is an intermediate prerequisite/ {
+      s/^.*$//;x                                # unhold target
+      d                                         # delete line
+    }
+
+    /^$/ {                                      # end of target block
+      x                                         # unhold target
+      s/^(${prefix}[^:/]*\/).*:.*$/\1/p         # write targets for subdirs
+      s/:.*$/ /p                                 # write complete targets
+      d                                         # hide any bugs
+    }
+
+    /^[^#\t:%]+:/ {         # found target block
+
+      /^\.PHONY/                  d             # special target
+      /^\.SUFFIXES/               d             # special target
+      /^\.DEFAULT/                d             # special target
+      /^\.PRECIOUS/               d             # special target
+      /^\.INTERMEDIATE/           d             # special target
+      /^\.SECONDARY/              d             # special target
+      /^\.SECONDEXPANSION/        d             # special target
+      /^\.DELETE_ON_ERROR/        d             # special target
+      /^\.IGNORE/                 d             # special target
+      /^\.LOW_RESOLUTION_TIME/    d             # special target
+      /^\.SILENT/                 d             # special target
+      /^\.EXPORT_ALL_VARIABLES/   d             # special target
+      /^\.NOTPARALLEL/            d             # special target
+      /^\.ONESHELL/               d             # special target
+      /^\.POSIX/                  d             # special target
+      /^\.NOEXPORT/               d             # special target
+      /^\.MAKE/                   d             # special target
+
+      /^[^a-zA-Z0-9]/             d             # convention for hidden tgt
+
+      h                                         # hold target
+      d                                         # delete line
+    }
+
+EOF
+}
+
 _make()
 {
     local cur prev words cword split
     _init_completion -s || return

-    local file makef makef_dir="." makef_inc i
+    local file makef makef_dir=( "-C" "." ) makef_inc i

     case $prev in
         -f|--file|--makefile|-o|--old-file|--assume-old|-W|--what-if|\
@@ -49,7 +104,7 @@ _make()
         for (( i=0; i < ${#words[@]}; i++ )); do
             if [[ ${words[i]} == -@(C|-directory) ]]; then
                 # eval for tilde expansion
-                eval makef_dir=${words[i+1]}
+                eval makef_dir=( -C "${words[i+1]}" )
                 break
             fi
         done
@@ -59,18 +114,17 @@ _make()
         for (( i=0; i < ${#words[@]}; i++ )); do
             if [[ ${words[i]} == -@(f|-?(make)file) ]]; then
                 # eval for tilde expansion
-                eval makef=${words[i+1]}
+                eval makef=( -f "${words[i+1]}" )
                 break
             fi
         done

-        [[ -n $makef ]] && makef="-f ${makef}"
-        [[ -n $makef_dir ]] && makef_dir="-C ${makef_dir}"
+        COMPREPLY=( $( compgen -W "$( 
+            make -npq "${makef[@]}" "${makef_dir[@]}" .DEFAULT 2>/dev/null | \
+            sed -n -r -f <(_make_target_extract_script "$cur")
+       )" -- "$cur" ) )

-        COMPREPLY=( $( compgen -W "$( make -qp $makef $makef_dir 2>/dev/null | \
-            awk -F':' '/^[a-zA-Z0-9][^$#\/\t=]*:([^=]|$)/ \
-            {split($1,A,/ /);for(i in A)print A[i]}' )" \
-            -- "$cur" ) )
+        [[ $COMPREPLY == */ ]] && compopt -o nospace

     fi
 } && 
```

# ios - ios悬停事件的问题

> ID：12168505
> 
> 赞同：0
> 
> 时间：2012-08-28T22:36:36.853
> 
> 标签：ios, css

我目前在使 iPad 与 :hover 事件一起工作时遇到问题。为了澄清我的意思，我已经在[http://playing.everythingcreative.co.uk](http://playing.everythingcreative.co.uk)上传了网站的一部分，并且我有 3 张图片，当悬停在 div 上时会消失以显示下面的文本，但这在 iPad 上不起作用一点也不。我试过了：

```
ontouchstart="touchStart(event);" 
```

但我对正确使用它的工作原理知之甚少。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:57:46.987

[无论如何，我还是使用iOS自动悬停修复](https://stackoverflow.com/questions/5507964/ios-automatic-hover-fix)上的示例弄清楚了？并改变：

```
if(navigator.platform == "iPad") { 
```

至：

```
if ("ontouchstart" in document.documentElement) { 
```

最终代码：

```
$(document).ready(function() {
        if ("ontouchstart" in document.documentElement) {
            $("div").each(function() { // have to use an `each` here - either a jQuery `each` or a `for(...)` loop
                var onClick; // this will be a function
                var firstClick = function() {
                    onClick = secondClick;
                    return false;
                };
                var secondClick = function() {
                    onClick = firstClick;
                    return true;
                };
                onClick = firstClick;
                $(this).click(function() {
                    return onClick();
                });
            });
        }
    }); 
```

# html - [错误：MultipartParser.end()：流意外结束：状态 = START]

> ID：12168508
> 
> 赞同：0
> 
> 时间：2012-08-28T22:36:52.283
> 
> 标签：html, node.js, express, pug, multipartform-data

当我尝试发送表单时收到此错误

```
link(rel='stylesheet',href='/stylesheets/home/profile/home_menu.css')
script(type='text/javascript',src='/javascripts/perfil_editar.js')

#logo_usuario
    img(src='')
#nombre_usuario(class='titulo1') 
    input(type='text',placeholder='',id="perfil_inputdatos_usuario")
    input(type="text",placeholder="",id="perfil_inputdatos_tipo")
#datos_fondo
#perfil_publicaciones_fondo
    select(id='perfil_publicaciones_lista',size='2')
        option(value='si', selected='selected') Publicacion 1
        option(value='no') Publicacion 2
    #perfil_publicaciones_ir
        t Ir    

#perfil_busquedas_fondo
    select(id='perfil_busquedas_lista',size='2')
        option(value='si', selected='selected') Busqueda 1
        option(value='no') Busqueda 2
    #perfil_busquedas_ir
        t Ir    

#ubicacion_fondo

#datos_usuario
    #perfil_datos_nombre
        img(src='/images/logo_nombre2.png')     
    #perfil_datos_telefonos
        img(src='/images/logo_telefono2.png')   
    #perfil_datos_direccion
        img(src='/images/logo_direccion2.png')
    #perfil_datos_mail  
        img(src='/images/logo_web2.png')

    form(action='/nuevaEdicion',method='post',enctype='multipart/form-data',id='editar')
        input(type='name',name='perfil_inputdatos_nombre',id='perfil_inputdatos_nombre')
        input(type='name',name='perfil_inputdatos_direccion',id='perfil_inputdatos_direccion')
        input(type='name',name='perfil_inputdatos_telprivado', id='perfil_inputdatos_telprivado')
        input(type='name',name='perfil_inputdatos_telcontacto',id='perfil_inputdatos_telcontacto')
        input(type='name',name='perfil_inputdatos_telcelular',id='perfil_inputdatos_telcelular')
        input(type='name',name='perfil_inputdatos_mail',id='perfil_inputdatos_mail')

#datos_titulo(class='titulo2')
    t Datos

#perfil_publicaciones_titulo(class='titulo2')
    t Publicaciones Realizadas
#perfil_busquedas_titulo(class='titulo2')
    t Busquedas Guardadas

#ubicacion_titulo(class='titulo2')
    t Ubicacion
#perfil_editar
    t Editar Perfil 
```

我用这个脚本在 ajax 中渲染它

```
$(document).ready(function(){

    $('.perfil_nav a').click(function(){
      var objAttr=$(this).attr("id");
      $('#informacion').animate({height:'hide'},600,
        function()
            {
              $.ajax({
                url: "/profile_arquitecture_/"+objAttr,
              }).done(
                function(msg) {$('#informacion').html(msg);});
            });
        $('#informacion').fadeIn(600);
    });

}); 
```

从这个文件 home.jade 只改变一个名为 informationacion 的 div

```
extends layout

append head
    link(rel='stylesheet',href='/stylesheets/home/home.css')
    script(type="text/javascript",src="https://maps.google.com/maps/api/js?sensor=false&language=es")
    script(type='text/javascript',src='/javascripts/home_menu.js')

block contenido_central
    #contenido
        #capa_principal
            #barra_sesion
                #barra_menu
                    ul(class='perfil_nav')
                        li(class='first') 
                            a(href='#',id='miperfil') Perfil
                        li 
                            a(href='#',id='mispublicaciones') Mis Publicaciones
                        li 
                            a(href='#',id='misbusquedas') Mis Busquedas     
                        li(class='last') 
                            a(href='#',id='mismensajes') Mensajes
            #informacion 
```

将 form.jade 附加到使用 res.render 渲染的 routes.perfil.js 的信息 div 中

```
exports.editarPerfil=function(req,res)
{
    console.log(req.body)   
    res.render('home/nosotros',
    {title: 'Bienvenido ',
     sessionUser: req.session.passport.user
    });
} 
```

在 app.js 中

```
app.post('/nuevaEdicion',express.bodyParser(),routes.perfil.editarPerfil); 
```

这是控制台中的错误

```
[Error: MultipartParser.end(): stream ended unexpectedly: state = START]
{} 
```

编辑2：

我发现当我输入表格时

```
enctype="application/x-www-form-urlencoded" 
```

页面冻结但当我放

```
enctype="multipart/form-data" 
```

我必须多次单击提交，但表单工作正常，控制台中的结果是

```
{ perfil_inputdatos_nombre: '',
  perfil_inputdatos_direccion: '',
  perfil_inputdatos_telprivado: '',
  perfil_inputdatos_telcontacto: '',
  perfil_inputdatos_telcelular: '',
  perfil_inputdatos_mail: '' } 
```

当我把

```
enctype="text/plain" 
```

表单可以快速正常工作，没有问题，但控制台中的结果是

```
{} 
```

所以我认为问题出在html中，但任何人都可以解决这个问题？？？坦克

这是配置文件 ID 处理程序

```
exports.profile_pages=function(req,res)
{
    var usuario_actual=req.session.passport.user;
    mongo.dbusuarios.infoUsuario(usuario_actual,function(err,items)
    {
        if(err) throw err;
        res.render('home/profile/home_'+req.params.id,
        {
            title:'',
            layout:false,
            datos_perfil:items,
        });
    });
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T07:49:54.210

您的点击处理程序应该`return false`阻止浏览器尝试处理点击。这可能是什么让你搞砸了。如果这没有帮助，`console.log()`请`objAttr`确保确实存在与其值相对应的玉文件。

# javascript - 谷歌融合，地图叠加和通过javascript数组打破折线

> ID：12168513
> 
> 赞同：0
> 
> 时间：2012-08-28T22:37:19.430
> 
> 标签：javascript, arrays, json, google-maps, google-fusion-tables

我的问题基于[Google 的以下示例](https://developers.google.com/fusiontables/docs/samples/mouseover_map_styles)。我已经很好地从我的融合表中拉出我的多边形形状，类似于它们的形状。当我尝试更改脚本以提取我拥有的一些折线数据时，我的问题就出现了。问题在于行数据数组的分解。正确多边形的数据集如下。

“行”：[[“129”，{“几何”：{“类型”：“多边形”，“坐标”：[[[-86.3055326754，39.8143343479，0.0]，[-86.3056957826，39.8139995783，0.0]，[- 86.3059116214, 39.8137158473, 0.0 ], [ -86.3055326754, 39.8143343479, 0.0 ] ] } } ],等等......

折线如下 "rows": [ [ "1", { "geometry": { "type": "LineString", "coordinates": [ [ -86.2411593096, 40.1368952707, 0.0 ], [ -86.2413739094, 40.1367194041, 0.0 ]、[-86.241866376、40.1197924711、0.0]]}}]等。

多边形有一个额外的 [] 会影响我解析数据的能力！它快把我逼疯了！认真回答这个问题！[我的例子在这里](http://wrestore.iupui.edu/fusion/mapWatershedPolylinesTable.php)。我只是对 javascript 数组知之甚少。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T01:46:10.230

这是一个只解析折线的版本：

[http://www.geocodezip.com/v3_GoogleEx_FusionTables_mouseover_map_styles_polylines.html](http://www.geocodezip.com/v3_GoogleEx_FusionTables_mouseover_map_styles_polylines.html)

我找不到任何文档或预期输出的描述（“GeoJSON”除外），如果有一种方法可以检测多边形、折线和标记并适当地解析它们，那就太好了。

这是[GeoJSON的描述](http://www.geojson.org/geojson-spec.html)

这是一个解析[折线](http://www.geocodezip.com/v3_GoogleEx_FusionTables_generic_JSON_linkto.html?lat=39.923549&lng=-86.306907&zoom=10&type=m&tableid=1im8RszWUjZZhZdBnO8C0rfWGvT059O2EKk6TvZs&tablequery=SELECT%20%20geometry,%20GRID_CODE%20FROM)、[多边形](http://www.geocodezip.com/v3_GoogleEx_FusionTables_generic_JSON_linkto.html?lat=37.174668&lng=-38.845970&zoom=2&type=m&tableid=1foc3xO9DyfSIF6ofvN0kp2bxSfSeKog5FbdWdQ&tablequery=SELECT%20kml_4326,%20name%20FROM%20&where=name%20does%20not%20contain%20%27Antarctica%27)和[标记](http://www.geocodezip.com/v3_GoogleEx_FusionTables_generic_JSON_linkto.html?lat=14.620282&lng=-90.504716&zoom=12&type=m&tablequery=SELECT%20geometry,%20name,%20description%20FROM&tableid=1npi-QWwoZ6LP_9wwHiwiG2omzMm6R9Qoj5aMjkM)的页面（未经过充分测试）。

# .htaccess - mod_rewrite 全选

> ID：12168521
> 
> 赞同：1
> 
> 时间：2012-08-28T22:38:17.393
> 
> 标签：.htaccess, mod-rewrite

我有 URL 重写的问题。这是规则

```
RewriteRule ^(.*)-(.*)-(.*)\.html$ file.php?name=test&a=$1&b=$2&c=$3 
```

在这样的链接上，规则工作正常：

```
test-11-abc.html 
```

但是如果第三个变量有一个破折号，我有一个问题：

```
test-11-ab-c.html 
```

重写不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:59:52.300

尝试这个：

```
RewriteRule ^(.*?)-(.*?)-(.*)\.html$ file.php?name=test&a=$1&b=$2&c=$3 
```

您需要使前 2 个匹配不贪婪，因为它们正在吞噬第一个`-`.

# box-api - 使用 Box v2 API，如何设置当前（顶级）版本？

> ID：12168522
> 
> 赞同：0
> 
> 时间：2012-08-28T22:38:18.593
> 
> 标签：box-api

使用 v2 Box API，我如何设置文件的最新版本？这是一个高级帐户。我看到有 /versions 资源，用于下载文件的特定版本，现在可以使用。但是，如果我想以编程方式将旧版本设置为最新版本，我该怎么做？

澄清一下，我不想上传新版本，我想将旧版本设置为最新版本。

参考：http: [//developers.box.com/docs/](http://developers.box.com/docs/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T23:39:05.773

我们还没有在 V2 API 中实现这一点。它在我们的积压工作中，可能会在大约一个月内交付。

最好获得您对 API 的预期用途的反馈。例如，如果您对 /files//versions 执行 GET 并获得 5 个版本的数组（编号为 1-5）。然后在 /files/ 上执行 PUT 并指定您希望 WAS 版本 3 现在成为当前版本，是否应该将 V3 上的更新时间戳更改为？还是我们应该重新订购版本？对 /files//versions 的调用是否有意义给你 3,5,4,2,1 作为顺序而不是 previos 5,4,3,2,1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T17:19:07.917

如果您只想使用 Box 的版本历史记录并执行“制作当前版本”操作（使文件的旧版本成为最新版本），V1 API 有一个 make_current_version 方法（http://developers.box.net /ApiFunction_make_current_version)。V2 API 中将很快提供等效方法，但您可以同时使用一些 V1 调用。

# linux - “<<”运算符如何在 linux shell 中工作？

> ID：12168523
> 
> 赞同：4
> 
> 时间：2012-08-28T22:38:39.910
> 
> 标签：linux, shell

我知道以下代码在 /opt/hadoop/conf 目录中创建了一个文件 core-site.xml。有人可以为我用 linux shell 术语分解它吗？特别是 << 运算符 & CORE_EOF? 这些标记是如何工作的？我有点理解这一点，但想知道得更好。

```
cat >/opt/hadoop/conf/core-site.xml <<CORE_EOF
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="configuration.xsl"?>
<configuration>
  <property>
    <name>fs.default.name</name>
    <value>hdfs://localhost:8020</value>
  </property>
</configuration>
CORE_EOF 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-28T22:45:33.753

带有 << 运算符的命令将执行以下操作：

*   启动运算符左侧指定的程序，例如 cat。
*   抓取用户输入，包括换行符，直到在一行上满足运算符右侧指定的内容，例如 EOF
*   将除 EOF 值之外的所有已读取的内容发送到左侧程序的标准输入。

    ```
    cat << EOF
    Hello
    World
    EOF 
    ```

将发送“你好

世界”

到 cat 的标准输入。

这和这样做是一样的：

```
cat < file 
```

文件包含：

```
Hello
World 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T09:44:37.887

**猫**在这种情况下创建一个新文件或用相同的名称重写旧文件

并将您的字符串放入文件中。

当您想将字符串添加到文件中时，请键入：

> 猫**>>** /opt/hadoop/conf/core-site.xml << EOF
> 
> 细绳
> 
> 细绳
> 
> EOF

# css - 表格内的表格 css

> ID：12168524
> 
> 赞同：-1
> 
> 时间：2012-08-28T22:38:47.743
> 
> 标签：css, forms, html-table, tablerow

我对 CSS 有一个奇怪的问题。

我正在努力实现以下目标。我可以让人们在数据库中搜索名称或引用的一部分，我想将其显示在一个框中（在本例中是一个易于样式化的表单）。问题是，总的盒子应该有一个渐变的绿色，但不是整个获取的数据都是用绿色布局检索的。

我已经调试过，它似乎工作得很好：我有 echo 和 alerted 我的输出，它只是一个正常的表格，里面有表格行..

这是结果结果：（ `pastebin.com/AZAv6bpX`坏了）

这是我的CSS：（ `pastebin.com/NATwyki6`坏了）

这是它的样子：

[![](../Images/6f197a329141c23c915fdacfe748192b.png)](https://i.stack.imgur.com/iVmZ0.png)

请注意，在渐变停止后，表格行仍在继续。

我已经调整了表格条目边距，用于放置它们的 div（结果）。所以我 100% 确定结果是我想要的。

所以基本上我得到了：

来自pastebin的代码here

还有这个奇怪的布局。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T22:43:12.937

要么把你从桌子上拿下`float:left`来，要么`overflow:auto`放在你的表格上。 [jsfiddle链接](http://jsfiddle.net/6qJfr/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:48:33.407

因为您的表单内容设置为浮动，所以它们会从流程中取出，因此您的容器不会环绕它们。

对您的 css 的简单修复是添加以下内容；

```
form br { clear:both } 
```

然后确保您`</br>`将表单中的 final 修复为`<br />`。

# batch-file - 批处理文件以在目录中的 cmd 中运行命令

> ID：12168527
> 
> 赞同：21
> 
> 时间：2012-08-28T22:39:02.323
> 
> 标签：batch-file

我想要一个批处理文件（必须放在桌面上），它执行以下操作；

*   打开 cmd
*   导航到一个目录，例如`C:\activiti-5.9\setup`
*   在目录中运行一个命令，例如`ant demo.start`（这个命令运行 activiti 服务器）

我尝试了以下到达目录但如何运行命令，`"ant demo.start"`？

```
START cmd.exe /k "cd C:\activiti-5.9\setup" 
```

感谢您的帮助。

**编辑：**

参考下面*zb226的*回答：如果您能回答我，还有一个问题是如何使该cmd以管理员身份运行？以下工作吗？

`START cmd /K "runas /user:administrator & cd C:\activiti-5.9\setup & ant demo.start"`

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-28T23:26:49.467

`&`使用这样的链接任意命令：

```
command1 & command2 & command3 & ... 
```

因此，在您的特定情况下，将此行放在桌面上的批处理文件中：

```
START cmd.exe /k "cd C:\activiti-5.9\setup & ant demo.start" 
```

您也可以使用`&&`链接命令，尽管这将执行错误检查，并且如果其中一个命令失败，执行链将中断。该行为在此处进行了详细[说明](http://support.microsoft.com/kb/279253)。

**编辑：**对@James K 的评论**“您可以链接命令，但它们没有效果”**很感兴趣，我测试了更多，令我惊讶的是发现，我在原始测试中启动的程序`firefox.exe`- 虽然不存在于环境变量中的目录`PATH`，实际上可以在我的系统上的*任何位置*执行（这真的让我想知道 - 请参阅答案底部的解释）。所以实际上执行...

```
START cmd.exe /k "cd C:\progra~1\mozill~1 && firefox" 
```

...没有证明解决方案有效。因此，在确保它在我的系统上的任何地方**都不**可执行之后，我选择了另一个程序 (nLite)：

```
START cmd.exe /k "cd C:\progra~1\nlite && nlite" 
```

这就像我原来的答案已经建议的那样有效。问题中没有给出 Windows 版本，但我使用的是 Windows XP，顺便说一句。

* * *

如果有人感兴趣`firefox.exe`，为什么不在`PATH`我的系统上的任何地方都可以执行 - 很可能也可以在您的系统上执行 - 这是由于可以注册应用程序以在任何地方都可用的注册表项。有关详细信息，请参阅[此 SU 答案](https://superuser.com/a/453389/154552)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-30T12:51:17.623

对我来说，以下是工作和运行 activiti 服务器以及在浏览器中打开资源管理器（在*zb226 的*回答和评论的帮助下）；

`START "runas /user:administrator" cmd /K "cd C:\activiti-5.9\setup & ant demo.start"`

`START /wait localhost:8080/activiti-explorer`

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2017-09-11T08:39:34.210

这个问题是 5 岁。我想知道为什么仍然没有人找到`/d` 设置工作文件夹的开关：

```
start /d "c:\activiti-5.9\setup" cmd /k ant demo.start 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-28T23:56:45.857

CMD.EXE 不会执行包含在字符串中的内部命令。只能使用该字符串启动实际文件。

您将需要实际调用批处理文件来执行您想要的操作。

BAT1.bat

```
start cmd.exe /k bat2.bat 
```

BAT2.bat

```
cd C:\activiti-5.9\setup
ant demo.start 
```

您可能想要创建一个名为 的文件夹`BAT`，并将其位置添加到您的路径中。因此，如果您创建`C:\BAT`，请添加`C:\BAT\;`到路径中。路径位于：

```
 click -> Start -> right-click Computer -> Properties ->
    click -> Avanced System Settings -> Environment Variables
   select -> Path (From either list. User Variables are specific to 
                   your profile, System Variables are, duh, system-wide.)
    Click -> Edit
Press the -> the [END] or [HOME] key.
     Type -> C:\BAT\;
    Click -> OK -> OK 
```

现在将所有批处理文件放入`C:\BAT`其中，无论当前目录如何，都可以找到它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-08-09T21:41:27.223

我的 DID 按顺序执行命令。这是我使用它的版本：

开始 cmd.exe /k "U: & cd U:\Design_stuff\new_lcso_website_2017 & python -m http.server"

我需要

1.  换成我的U盘
2.  CD 到包含我正在重新设计的网站的特定文件夹
3.  使用 http 服务器模块执行 python（在我的浏览器中显示内容）。

如果这些命令有问题，它就不会显示正确的文件。我最初忘记更改`U:`并在我的桌面上运行批处理文件，它在我的浏览器中创建了一个网页[http://localhost:8000](http://localhost:8000)显示我的桌面内容而不是我想要的文件夹。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-09-11T06:46:59.137

您还可以检查它：

> cmd /c cd /d C:\activiti-5.9\setup & ant demo.start

# java - Java中的伪重载

> ID：12168531
> 
> 赞同：2
> 
> 时间：2012-08-28T22:39:55.433
> 
> 标签：java, generics, enums, overloading

考虑以下函数：

```
public static <T> T doSomething(Document doc, String xpath, Class<T> returnType); 
```

这个想法是处理 XML 文档，在指定的 xpath 检索对象，并返回指定类型的东西，足够简单。现在，假设我们想让它 if `returnType.isEnum()`，我们想把它当作我们想要检索 a`String`而不是 enum 类型，然后`Enum.valueOf()`在最后使用。

不幸的是，看起来

```
String returnedObj = String.class.cast(...); // Returned value from the actual XPath.evaluate() call
return Enum.valueOf(returnType, returnedObject); 
```

不起作用，因为`returnType`不是`Class<T extends Enum<T>>`. 但是，您不能通过任何`returnType`一种方式真正塑造成那样`Class.asSubclass()`（至少没有不安全的铸造，我们试图避免这种情况）。

看起来你不能超载`doSomething()`来做一些特定于枚举的事情——即。

```
public static <T extends Enum<T>> T doSomething(Document doc, String xpath, Class<T> returnType); 
```

因为这实际上是运行时的“相同签名”。

所以，问题是，有没有办法在一个方法中安全地完成所有这些，或者我需要一个单独的方法来专门处理枚举或诉诸不安全的演员表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T01:23:01.737

我对这个问题有足够的兴趣尝试一下。我没有成功，但我认为值得在这里分享尝试，以便进一步讨论。

```
interface Evaluator {
  <T> T evaluate(String path, Class<? extends T> type);
}

final class Attempt implements Evaluator {
  @Override
  public <T> T evaluate(String path, Class<? extends T> type) {
    final Object result = evaluatePath(path, type);
    return type.cast(type.isEnum() ?
                     valueOf(type.asSubclass(Enum.class), (String)result) :
                     result);
  }

  private static Object evaluatePath(String path, Class<?> type) {
    /* This doesn't actually do anything meaningful, but that doesn't matter for now.
       Presumably it would make a call to something like XPath#evaluate().
     */
    return path;
  }

  private static <T extends Enum<T>> T valueOf(Class<T> type, String name) {
    return Enum.valueOf(type, name);
  }
} 
```

此代码通过 IntelliJ IDEA 的 as-you-type 编译器，但在提交到真正的*javac*时失败：

```
[unchecked] unchecked method invocation:
  <T>valueOf(java.lang.Class<T>,java.lang.String) in Attempt is applied to
  (java.lang.Class<capture#474 of ? extends java.lang.Enum>,java.lang.String) 
```

我发现错误消息令人费解，我认为这是将原始类型`Enum`（如`Class<Enum>`）传递给寻找参数化类型的方法的一个表达不佳的结果。

为了确认这里需要什么令人讨厌的转换，我鼓励其他人编辑（或复制和扩充）上面的代码以说明所需的更改。

# validation - Magento 强制州/省值，即使为空白

> ID：12168532
> 
> 赞同：1
> 
> 时间：2012-08-28T22:39:58.877
> 
> 标签：validation, magento, credit-card, opayo

我的公司正在使用 Sage Payment Solutions 进行信用卡处理。它们需要 state 字段的值进行验证，即使在该国没有州的国际订单上也是如此。

我正在尝试作为一种解决方法来强制将值放入状态字段。我在 default/template/persistent/checkout/onepage/billing.phtml 中添加了 value="XX" 作为​​默认值，但它似乎没有帮助。

这似乎应该是一个简单的修复，但我已经尝试了一些不起作用的东西。也许我需要查看 javascript？

任何帮助，将不胜感激。甚至是一个开始寻找的方向！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T14:05:19.483

我只是向我的客户解决了这个问题：

要填写**州/省**必填字段： http: [//www.magentocommerce.com/knowledge-base/entry/configuring-the-state-province-field-for-addresses/](http://www.magentocommerce.com/knowledge-base/entry/configuring-the-state-province-field-for-addresses/)

这是**将任何自定义州/省（地区）添加到任何国家/地区**： [http ://www.sycha.com/magento-add-custom-state-province-region-country](http://www.sycha.com/magento-add-custom-state-province-region-country)

我是来帮助你的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T11:20:14.220

除了使用类

```
class="input-text required-entry" 
```

您还必须启用“需要国家”并选择国家。这个选项在

`"System->Configuration->General->General->States Options"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T10:19:23.953

编辑您提到的模板文件，并将以下 css 类添加到您需要的输入字段中：

```
class="input-text required-entry" 
```

这将确保存在 javascript 验证，并且需要填写该字段，然后客户才能继续进行下一个结帐步骤。

PS：没有人会开始说仅在没有服务器端验证的情况下进行 javascript 验证是不好的……如果禁用了 javascript，您甚至无法将产品添加到购物车；）

# objective-c - sharedApplication 值不可见

> ID：12168534
> 
> 赞同：0
> 
> 时间：2012-08-28T22:40:20.513
> 
> 标签：objective-c, ios, cocoa-touch

好吧，我有这 2 个变量，一个 NSString 和一个 NSMutable Array，这是我希望在所有选项卡中成为全局的值。到目前为止，我只有一个（NSString）并且可以正常获取它的值。不，我尝试再拥有一个变量，我得到（空）值。

这是我的代码：

AppDelegate.h

```
@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (nonatomic,retain) NSString *myDate;
@property (nonatomic,copy) NSMutableArray *tracks_condition;

@end 
```

当我分配值时在 HomeView.m 中

```
AppDelegate *delegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
  parsed_date=[res objectForKey:@"date"];
    NSLog(@"Date:%@",parsed_date);
    delegate.myDate = parsed_date;
    NSString *parsed_track=[res objectForKey:@"Data1"];
    [delegate.tracks_condition addObject:parsed_track];
    NSLog(@"Track 0 Static:%@",parsed_track);
    NSLog(@"Track 0:%@",[delegate.tracks_condition objectAtIndex:0]); 
```

parsed_date 正在正常打印出来，我可以在其他选项卡中访问它。

但我得到： Track 0 Static:0 Track 0: (null)

我不明白为什么，因为我将它作为对象添加到 MutableArray 中。当然，我在其他所有选项卡中都得到 (null)。

你能帮助我吗？我更喜欢修复该代码而不是提出完全不同的建议，因为我在 IOS 方面不是很有经验。除非它是那么容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:49:16.543

这很可能是因为您从未为您的`tracks_condition`属性实例化一个可变数组。仅在 AppDelegate 类上声明属性不会为您创建对象。您仍然需要在某个时候分配/初始化对象，然后才能使用它。在此之前，tracks_condition 保持为空，并且发送给它的任何消息（例如尝试将对象添加到数组）都将被忽略。

您可以通过实例化一个对象并在使用它之前设置属性的值来解决此问题。您可以在您的应用程序委托中执行此操作`application:didFinishLaunchingWithOptions:`

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.tracks_condition = [[NSMutableArray alloc] init];
} 
```

# c# - 如何使用反射创建通用对象

> ID：12168536
> 
> 赞同：3
> 
> 时间：2012-08-28T22:40:40.933
> 
> 标签：c#, generics, reflection, .net-4.5

首先让我说，我想做的是获取泛型类中的属性值，该值可能被继承自它的类覆盖。在基类中将其视为默认值，类的继承者可以覆盖以设置自己的默认值。

我尝试使用 System.Reflection.FieldInfo.GetValue 直接在类型上使用反射，但这不适用于具有泛型类型的类。所以我认为我需要实例化类才能看到值是什么。

我通过读取 bin 中的 Dll 并使用反射查找从我的接口继承的类型来检索“类型”。

我正在使用 .NET 4.5

这里的文档似乎准确地解释了我需要做什么 [http://msdn.microsoft.com/en-us/library/b8ytshk6.aspx](http://msdn.microsoft.com/en-us/library/b8ytshk6.aspx)

在本文档中，我能看到的唯一区别是我们是如何获得类型的，我在 bin 中查找类型，它们简单地称为 typeof()，由于类型非常复杂，看起来这可能是不匹配的，但我看不到缺少什么（如果有的话）

```
foreach (var item in types)
{
    var ts = item.GetField("DefaultTimeToExpire");
    Type[] typeArguments = item.GetGenericArguments();
    if (ts != null)
    {
        var t = item.MakeGenericType(typeArguments);
        var obj = Activator.CreateInstance(t);
        var timespan = obj.DefaultTimeToExpire;
        subscriberInfos.Add(new Tuple<string, Type, TimeSpan>(item.Name, item, timespan));
    }
} 
```

到目前为止，我正在调用 GetField 来查找具有“DefaultTimeToExpire”字段的项目，这部分可以很好地找到我需要的类型。接下来我调用 GetGenericArguments，它返回一个 Arguments 类型的预期数组。然后我调用 MakeGenericType 最后创建实例给我错误消息

“无法创建 BusinessLogic.TestSubscriberXXX`1[Message] 的实例，因为 Type.ContainsGenericParameters 为真。”

这看起来正是我应该做的。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T14:04:38.077

为了实例化泛型类型，您需要知道应该替换其类型参数的实际值（类型）。该`GetGenericArguments()`方法作为一种反射形式，只为您提供类型*参数*，而不是它们的实际值。值由您决定……这就是泛型的全部意义所在。

If `item`is a type `List<T>`then`item.GetGenericArguments()`将返回一个数组，其中包含一个表示类型参数的假“类型” `T`（其`IsGenericParameter`属性设置为 true）。因此，将该参数类型传递回`item.MakeGenericType()`将简单地创建另一个与原始类型等效的开放泛型类型。要关闭泛型类型以便对其进行实例化，您需要提供一个实际（非参数）类型参数，例如`int`.

例如，`typeof(List<>).MakeGenericType(typeof(int))`将返回`typeof(List<int>)`，而 `typeof(List<>).MakeGenericType(typeof(List<>).GetGenericArguments())`将简单地`typeof(List<>)`再次返回。这就是您的代码中发生的事情。

对不起，如果这有点不透明，我不知道该怎么解释。最重要的是，like 类型`List<T>`仅在您想要替换的类型时才有用`T`。

# javascript - 调用函数时页面不转换

> ID：12168542
> 
> 赞同：1
> 
> 时间：2012-08-28T22:41:05.163
> 
> 标签：javascript, jquery, css

使用 jQuery 创建滑动表单。问题是表单滑到空白页。它应该滑动到的页面卡在第一页上。网站在这里...www.entrilab.com。当我检查元素时没有出现错误。即使没有错误，函数仍然没有调用吗？有问题的功能如下

```
$('#navigation').show();

    $('#navigation a').bind('click',function(e){
        var $this   = $(this);
        var prev    = current;
        $this.closest('ul').find('li').removeClass('selected');
        $this.parent().addClass('selected');

        current = $this.parent().index() + 1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T02:22:47.377

您的 HTML 存在一些问题。对于初学者，您没有`doctype`为页面声明任何内容。其次，关闭`div`标签后您有一个结束`html`标签。这些不会解决问题，而只是清理代码的东西。

我假设您希望确认`fieldset`出现在第二个屏幕上。为此，您需要按如下方式更改您的 CSS：

```
#steps form fieldset{
    border:none;
    padding: 0 0 20px 0;
    margin: 0;
} 
```

试一试，看看是否能解决您的问题。

# php - 抓取和爆炸数据

> ID：12168543
> 
> 赞同：0
> 
> 时间：2012-08-28T22:41:10.123
> 
> 标签：php, arrays, foreach, explode

我对 PHP 有点陌生，我需要一些关于从文件中分解数据的帮助。有问题的文件是：[http ://data.vattastic.com/vatsim-data.txt](http://data.vattastic.com/vatsim-data.txt)

基本上，我需要获取该`!CLIENTS:`部分下的数据（靠近底部）。有了这些数据，我需要分解它并获取每个`:`.

我已经尝试使用此代码，但它给了我一个可变偏移错误（`Undefined offset: 3`）

```
$file = file("http://data.vattastic.com/vatsim-data.txt");
foreach($file as $line)
{
   $data_record = explode(":", $line);

   // grab only the data that has "ATC" in it...
   if($data_record[3] == 'ATC' && $data_record[16] != '1' && $data_record[18] != '0'&&   stristr($data_record[0],'OBS') === FALSE)
   {
        rest of code here...
   }
} 
```

如果有人可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:47:35.890

发生这种情况是因为您试图像这样分解行：

> ; !GENERAL 包含常规设置

当你爆炸那条线时，你`$data_records`看起来像这样：

> 数组（ [0] => ; !GENERAL 包含常规设置）

快速解决方案：

```
$file = file("http://data.vattastic.com/vatsim-data.txt");
foreach($file as $line)
{
   if(strpos($line,';') === 0) continue ; // this is comment. ignoring
   $data_record = explode(":", $line);
   $col_count = count($data_record);

   switch($col_count) {
     case 42: // columns qty = 42, so this is row from `clients`
      // grab only the data that has "ATC" in it...
      if($data_record[3] == 'ATC' && $data_record[16] != '1' && $data_record[18] != '0'&&   stristr($data_record[0],'OBS') === FALSE)
      {
           rest of code here...
      }
      break;
     default:
       // this is other kind of data, ignoring
       break;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:59:46.467

另一种解决方案是使用正则表达式并查找`!CLIENTS:`部分。这也适用于 CLIENTS 未来的列多于或少于 42 列的情况

```
$file = file_get_contents ("http://data.vattastic.com/vatsim-data.txt");  
$matches = null;
preg_match ('/!CLIENTS:\s\n(.*)\n;/s' , $file, $matches );
if($matches)
{
  $client_lines = explode("\n", $matches[1]);
  foreach ($client_lines as $client)
  {
    $data_record = explode(":", $client);
    if($data_record[3] == 'ATC' && $data_record[16] != '1' && $data_record[18] != '0'&&   stristr($data_record[0],'OBS') === FALSE)
    {
      //rest of code here...
    }
  }
} 
```

# actionscript - 在 ActionScript 中捕获窗口内容

> ID：12168546
> 
> 赞同：0
> 
> 时间：2012-08-28T22:41:35.460
> 
> 标签：actionscript

我想以位图的形式捕获窗口的全部内容，而不仅仅是可见部分。我所能做的只是捕获当前可见的内容：

```
var v:UIComponent = ...
var bd:BitmapData = new BitmapData ( v.width, v.height );

bd.draw(v);

var pixels:ByteArray = bd.getPixels(bd.rect); 
```

我意识到使用 v.width 和 v.height 只会得到可见部分。但我需要整个图形范围（可滚动的范围）。

任何帮助，将不胜感激？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:14:22.070

您可以尝试不复制窗口像素，而是复制其内容像素：如果该内容是可滚动的，则窗口可能会使用遮罩或任何类似方法来隐藏其尺寸之外的所有内容。但是通过尝试直接绘制它的内容（如果你有一个 v.content 方法或类似的东西），你应该能够拥有它的真实大小，从而完整地绘制它。如果可行，请让我们更新？

# java - Java中的位操作C源代码

> ID：12168548
> 
> 赞同：0
> 
> 时间：2012-08-28T22:41:39.390
> 
> 标签：java, c, bit-manipulation

我尝试用 Java 计算 Sega Genesis rom 文件的校验和。为此，我想将从 C 中截取的代码移植到 Java 中：

```
static uint16 getchecksum(uint8 *rom, int length)
{
  int i;
  uint16 checksum = 0;

  for (i = 0; i < length; i += 2)
  {
    checksum += ((rom[i] << 8) + rom[i + 1]);
  }

  return checksum;
} 
```

我了解代码的作用。它将所有 16 位数字相加（由两个 8 位数字组合而成）。但我不明白的是 uint16 的溢出发生了什么以及它如何转移到 Java 代码？

编辑：此代码似乎有效，谢谢：

```
int calculatedChecksum = 0;
int bufferi1=0;
int bufferi2=0;
bs = new BufferedInputStream(new FileInputStream(this.file));

bufferi1 = bs.read();
bufferi2 = bs.read();
while(bufferi1 != -1 && bufferi2 != -1){
    calculatedChecksum += (bufferi1*256 + bufferi2);
    calculatedChecksum = calculatedChecksum % 0x10000;
    bufferi1 = bs.read();
    bufferi2 = bs.read();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:31:35.377

```
static int checksum(final InputStream in) throws IOException {
  short v = 0;
  int c;
  while ((c = in.read()) >= 0) {
    v += (c << 8) | in.read();
  }
  return v & 0xffff;
} 
```

这应该等效地工作；通过使用`& 0xffff`，我们可以将 in 中的值`v`视为一直无符号，因为算术溢出是相同的 wrt 位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T22:46:18.657

简单地说，溢出就丢失了。更正确的方法（恕我直言）是使用 uint32 进行求和，然后在低 16 位得到总和，在高 16 位得到溢出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T05:56:47.503

您想要添加模 2 ^(16)，您可以简单地手动拼出：

```
checksum = (checksum + ((rom[i] << 8) + rom[i + 1])) % 0x10000;
//                                                   ^^^^^^^^^ 
```

# facebook - 除非从浏览器栏运行，否则 Web Api 会为文本文件返回垃圾

> ID：12168552
> 
> 赞同：0
> 
> 时间：2012-08-28T22:42:02.713
> 
> 标签：facebook, asp.net-mvc-4, asp.net-web-api

我正在使用 Asp.Net 的 Web Api 编写文件服务。该服务从 SQL Server 检索文件（Css、Excel、Csv 等）并提供它们以响应 Get 请求。

我的第一个测试用例是针对 Css 文件的。问题是，虽然我可以在服务器端看到正确的数据，但当浏览器检索/解码它时，结果会被破坏。该问题似乎与编码有关。

以下是 FireFox 中的请求/响应标头：

![在此处输入图像描述](../Images/36c3e99f39fd918bfb764ac79638e0d7.png)

当我单击 FireBug 中的响应选项卡时，它的外观如下：

![在此处输入图像描述](../Images/40a26151e0c6ea9ea0df021c205b94cf.png)

结果看起来像 ascii 被显示为 utf8。这是 FireBug 中的 html 视图：

![在此处输入图像描述](../Images/7e299c4b1df01eba62a0ee1e09355733.png)

上面的示例是运行 ssl 的 Facebook 应用程序中的 iFrame。

如果我获取 url 并直接在浏览器中打开它，它可以正常工作并正确显示我的 Css：

![在此处输入图像描述](../Images/455c4105c226db89c41b046685dcb272.png)

总之，当我从 Facebook 应用程序中的标签检索我的 Css 文件时，我得到了垃圾（编码问题？）。如果我直接从浏览器中检索它，它就可以工作。

我的 CssFormatter MediaTypeFormatter 代码：

```
 public override Task WriteToStreamAsync(Type type, object value, Stream writeStream, HttpContent content, TransportContext transportContext)
    {

        var taskSource = new TaskCompletionSource<object>(); 
        try
        {
            var incomingFile = value as FileRestService.Entity.IFile;

            var ms = new MemoryStream(incomingFile.DataBuffer);

            ms.CopyTo(writeStream);
            ms.Flush();

            taskSource.SetResult(writeStream);

        }
        catch (Exception e) 
        { 
            taskSource.SetException(e); 
        } 
        return taskSource.Task; 

    } 
```

我是否错误地创建了响应流？我注意到响应标头没有指定编码。这是一个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:29:00.340

我发现处理这个问题的最简单方法是按照以下方式写一些东西（这里是重要的细节）：

```
public class Formatter : MediaTypeFormatter {
    // TODO override the constructor to add some mappings or some other way for this formatter to be picked up

    // TODO override CanReadType and CanWriteType according to your rules

    public override void SetDefaultContentHeaders(Type t, HttpContentHeaders headers, string mediaType) {
        base.SetDefaultContentHeaders(t, headers, mediaType);
        headers.ContentDisposition = new ContentDispositionHeaderValue("attachment") {
            FileName = "SomeName.ext"
        };
    }

    public override Task WriteToStreamAsync(Type t, object value, Stream s, HttpContentHeaders headers, TransportContext context) {
        return Task.Factory.StartNew(() => {
            // TODO code to write to the output stream, flush it but don't explicitly close it
        });
    }
} 
```

# tsql - 比较两个 varchar 字段的相似性

> ID：12168554
> 
> 赞同：0
> 
> 时间：2012-08-28T22:42:22.797
> 
> 标签：tsql

我正在尝试编写一段代码，它将比较两个 varchar 列，其中每个匹配的字符数量被加权并分配一个值，我可以稍后使用这个值来确定它们是否是“模糊”匹配. 到目前为止，我有一个去除数字和空格的函数，我认为我可以将其用作起点。有没有人有任何方向可以推动我或一些建议？谢谢布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T01:22:47.877

**这取决于 Data 的类型**。Soundex ， Metaphone ，Double Metaphone 对人名有好处。但不适合比较街道地址，例如，editdistance（Levenshtein距离）可能用于模糊匹配街道地址。

Jaro-Winkler 距离和 Q-gram 是我想到的模糊匹配中使用的其他技术。

这是**editdistance**的一个实现。如果您想知道它是什么。

[http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=51540&whichpage=2](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=51540&whichpage=2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T23:00:14.130

您可能会查看 SOUNDEX 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T23:37:02.817

指向与@GilM 相同的方向，语音匹配算法，还有另一个选项：**[Double Metaphone](http://en.m.wikipedia.org/wiki/Double_Metaphone#section_2)**。它不是作为 SOUNDEX 内置在 SQL Server 中的，而是在[此处找到 T-SQL 版本](http://www.planet-source-code.com/vb/scripts/ShowCode.asp?txtCodeId=519&lngWId=5)。

# maven - 为什么 jar MANIFEST 文件的规范版本中有两个版本？

> ID：12168556
> 
> 赞同：0
> 
> 时间：2012-08-28T22:42:35.397
> 
> 标签：maven, manifest, ivy

这是[来自 mavencentral 的 ejb3-persistence-1.0.1.GA.jar](http://search.maven.org/remotecontent?filepath=org/hibernate/ejb3-persistence/1.0.1.GA/ejb3-persistence-1.0.1.GA.jar)中清单的内容：

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.6.5
Created-By: 1.5.0_13-121 ("Apple Computer, Inc.")
Built-By: hibernate.org
Specification-Title: EJB 3.0
Specification-Version: 3.0 Final Release (1.0.1.GA)
Specification-Vendor: Sun Microsystems, Inc.
Implementation-Title: EJB
Implementation-Version: 3.0 Final Release (1.0.1.GA) March 14 2008
Implementation-Vendor: hibernate.org 
```

为什么 Specification-Version 和 Implementation-Version 各有两个版本 3.0 Final Release 和 1.0.1.GA？

另外，在我们的 ivy 存储库中，同一个 jar 文件称为 ejb3-persistence-3.3.1.jar，我最终搜索了 3.3.1 版本并实现了[ejb3-persistence-3.3.1.jar](http://www.java2s.com/Code/JarDownload/ejb3/ejb3-persistence-3.3.1.jar.zip)和[ejb3-persistence-1.0.1。 GA.jar](http://search.maven.org/remotecontent?filepath=org/hibernate/ejb3-persistence/1.0.1.GA/ejb3-persistence-1.0.1.GA.jar)具有相同的清单文件。

令人困惑的是，有三个版本引用同一个 jar 文件：3.3.1、3.0 Final Release 和 1.0.0.GA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T11:11:45.573

`3.0 Final Release`是 EJB 规范[JSR 220](http://www.jcp.org/en/jsr/detail?id=220)的版本；`1.0.1.GA`是 Java Persistence API (JPA) 的版本，它最初是同一 JSR 的一部分；JPA 2 有自己的[JSR](http://jcp.org/en/jsr/detail?id=317)。我怀疑这`3.3.1`来自您正在使用的 Hibernate 版本。[此页面](https://issues.jboss.org/browse/JBPAPP-1709?page=com.atlassian.jirafisheyeplugin%3afisheye-issuepanel)`ej3-persistence`包含有关JAR的 1.0.0.GA 和 1.0.1.GA 版本之间差异的更多信息

# xpath - Sitecore xpath 查询不起作用

> ID：12168558
> 
> 赞同：2
> 
> 时间：2012-08-28T22:42:45.397
> 
> 标签：xpath, sitecore, sitecore6

查询一：`/sitecore/content/FR/Cabinet/New Category/Attributes//*[@@TemplateID = '{95793C69-3E37-4CEB-9AF4-FD88276D85AA}']`

查询 2：`/sitecore/content/FR/Cabinet/New Category/Child Category 1/Attributes//*[@@TemplateID = '{95793C69-3E37-4CEB-9AF4-FD88276D85AA}']`

查询 1 有效，没有问题 - 查询 2 无效，说`expected ::`。有什么区别，除了一个更深一层。也碰巧文件夹中`/Child Category 1/`实际上没有任何孩子，而...`attributes``/New Category/Attributes`

更新 - 所以看起来“孩子”是 Xpath 中的一个关键字......这里的解决方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T23:56:14.500

您可以通过将其包装在哈希中来转义该类别：

`/sitecore/content/FR/Cabinet/New Category/#Child Category 1#/ ...`

这在选择字段包含空格的项目时也会派上用场：

`... //*[@#My Spaced Out Field# = '%Hey Yo!%']`

如果您正在动态构建查询，您可能需要考虑单独转义每个令牌、使用`.Axes`API 或使用 Lucene 选择项目。

# ios - UITableView 的 dataSource 是不是和表信息提供者委托一样的委托设计模式？

> ID：12168562
> 
> 赞同：1
> 
> 时间：2012-08-28T22:43:08.220
> 
> 标签：ios, uitableview, design-patterns

一个`UITableView`对象有两个属性：一个`delegate`和一个`dataSource`。它们是完全相同的设计模式吗？我没有看到书籍或参考文献`dataSource`为`UITableView`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:16:07.687

不，它们不是一回事，但它们使用的是委托模式。

他们都是不同的、不同的代表，服务于不同的目的。一个属性用于 UITableViewDataSource，另一个用于 UITableViewDelegate。

以下是它们在 UITableView.h 中的定义方式：

```
@property(nonatomic, assign) id<UITableViewDataSource> dataSource
@property(nonatomic, assign) id<UITableViewDelegate> delegate 
```

委托模式非常简单，[维基百科](http://en.wikipedia.org/wiki/Delegation_pattern)条目很好地总结了它：

> 在软件工程中，委托模式是面向对象编程中的一种设计模式，其中对象不执行其声明的任务之一，而是将该任务委托给关联的帮助对象。有一种责任倒置，其中帮助对象（称为委托）被赋予为委托人执行任务的责任。委托模式是构成其他软件模式（例如组合（也称为聚合）、混合和方面）基础的基本抽象模式之一。

# javascript - 带有 JavaScript 随机数函数的未知问题

> ID：12168569
> 
> 赞同：1
> 
> 时间：2012-08-28T22:43:45.207
> 
> 标签：javascript, html, random, numbers

```
var randNum = function(){
var max = document.getElementById('max').value;
var min = document.getElementById('min').value;
var reps = document.getElementById('reps').value;
var i;
for (i=0; i<reps; i++){
    var num = min + Math.floor(Math.random() * (max - min + 1)); //rand # 0-(max-1)
    addTXT(num);
}
}; 
```

这个函数应该使用 ID 为“min”、“max”和“reps”的文本框中输入的数字，并使用它们得出一些随机数。它不会向 HTML 文档写入任何内容。addTXT() 函数应该将数字写入 div，我知道它可以工作，因为在此之前我已经很好地使用了它。任何帮助，将不胜感激。另外，我使用 javascript 还不到一周，所以我怀疑这个问题真的很明显，我只是没有看到它。

```
var addTXT = function(newText){
var outputDiv=document.getElementById("console");
var oldText = outputDiv.innerHTML;
outputDiv.innerHTML = newText + oldText;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:47:33.507

将字符串值解析为整数[`parseInt()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)：

```
var max = parseInt(document.getElementById('max').value);
var min = parseInt(document.getElementById('min').value);
var reps = parseInt(document.getElementById('reps').value); 
```

**[演示](http://jsfiddle.net/766ZS/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:52:41.593

你从哪里得到问题？如果您不确定，请尝试在代码中的某些位置发出警报。

例如：

```
var randNum = function(){
alert('Function is triggered');
var max = document.getElementById('max').value;
var min = document.getElementById('min').value;
var reps = document.getElementById('reps').value;
var i;
for (i=0; i<reps; i++){
    var num = min + Math.floor(Math.random() * (max - min + 1)); //rand # 0-(max-1)
    alert(num);
    addTXT(num);
}
}; 
```

如果你的 addTxt 函数不起作用，试试 jQuery 的方式

```
var randNum = function(){
alert('Function is triggered');
var max = document.getElementById('max').value;
var min = document.getElementById('min').value;
var reps = document.getElementById('reps').value;
var i;
for (i=0; i<reps; i++){
    var num = min + Math.floor(Math.random() * (max - min + 1)); //rand # 0-(max-1)
    alert(num);
    $('#console').append(num);
}
}; 
```

# javascript - 如何在 ember-data 模型中表示数组？

> ID：12168570
> 
> 赞同：30
> 
> 时间：2012-08-28T22:43:45.490
> 
> 标签：javascript, ember.js, ember-data

当模型包含数组时是否有必要使用`DS.hasMany`指向 a ？`DS.Model`即使数组元素不是真正的模型（没有自己的 ID 或端点）？有没有更好的办法？

我正在使用`DS.hasMany`，但我的扩展`DS.RESTAdapter`程序向我抛出 404 试图访问模型，即使我从未调用`find`它，并且`hasMany`使用`{ embedded: true }`. 我第一次看到这个错误（显然与这个模型有关，因为没有它它就会消失）：

```
Uncaught Error: assertion failed: Emptying a view in the inBuffer state is not allowed and should not happen under normal circumstances. Most likely there is a bug in your application. This may be due to excessive property change notifications. ember-latest.js:43 
```

这是什么意思，可能是什么原因造成的？

这是堆栈跟踪：

```
Ember.assert ember-latest.js:43
Ember.View.states.inBuffer.empty ember-latest.js:13644
Ember.View.Ember.Object.extend.invokeForState ember-latest.js:12257
Ember.CollectionView.Ember.ContainerView.extend.arrayWillChange ember-latest.js:14477
invokeAction ember-latest.js:3193
iterateSet ember-latest.js:3175
sendEvent ember-latest.js:3323
Ember.Array.Ember.Mixin.create.arrayContentWillChange ember-latest.js:6963
Ember.ArrayProxy.Ember.Object.extend.arrangedContentArrayWillChange ember-latest.js:9281
Ember.ArrayProxy.Ember.Object.extend._arrangedContentWillChange ember-latest.js:9235
invokeAction ember-latest.js:3193
iterateSet ember-latest.js:3175
sendEvent ember-latest.js:3323
notifyObservers ember-latest.js:1872
Ember.notifyBeforeObservers ember-latest.js:2016
propertyWillChange ember-latest.js:2594
iterDeps ember-latest.js:2077
dependentKeysWillChange ember-latest.js:2092
propertyWillChange ember-latest.js:2592
set ember-latest.js:1416
DS.Model.Ember.Object.extend.dataDidChange ember-data-latest.js:3145
Map.forEach ember-latest.js:1273
OrderedSet.forEach ember-latest.js:1145
Map.forEach ember-latest.js:1271
DS.Model.Ember.Object.extend.dataDidChange ember-data-latest.js:3128
invokeAction ember-latest.js:3193
iterateSet ember-latest.js:3175
sendEvent ember-latest.js:3323
notifyObservers ember-latest.js:1872
Ember.notifyObservers ember-latest.js:1999
propertyDidChange ember-latest.js:2632
Ember.Observable.Ember.Mixin.create.propertyDidChange ember-latest.js:7917
Ember.Observable.Ember.Mixin.create.notifyPropertyChange ember-latest.js:7930
didChangeData ember-data-latest.js:2053
Ember.StateManager.Ember.State.extend.sendRecursively ember-latest.js:15446
Ember.StateManager.Ember.State.extend.send ember-latest.js:15431
DS.Model.Ember.Object.extend.send ember-data-latest.js:3058
DS.Store.Ember.Object.extend.load ember-data-latest.js:1737
DS.Store.Ember.Object.extend.loadMany ember-data-latest.js:1763
embeddedFindRecord ember-data-latest.js:3434
hasAssociation ember-data-latest.js:3459
ComputedPropertyPrototype.get ember-latest.js:2968
get ember-latest.js:1362
getPath ember-latest.js:1484
get ember-latest.js:1355
getWithGlobals ember-latest.js:4041
Binding.connect ember-latest.js:4140
connectBindings ember-latest.js:4600
finishPartial ember-latest.js:4610
Class ember-latest.js:8315
Ember.Mixin.create.create ember-latest.js:8457
Ember.View.Ember.Object.extend.createChildView ember-latest.js:13179
Ember.View.states.inBuffer.appendChild ember-latest.js:13622
Ember.View.Ember.Object.extend.invokeForState ember-latest.js:12239
Ember.View.Ember.Object.extend.appendChild ember-latest.js:13058
EmberHandlebars.ViewHelper.Ember.Object.create.helper ember-latest.js:18687
(anonymous function) ember-latest.js:18844
(anonymous function) ember-latest.js:19043
(anonymous function) ember-latest.js:19208
(anonymous function)
(anonymous function) handlebars-1.0.0.beta.6.js:1512
Ember.View.Ember.Object.extend.render ember-latest.js:12223
Ember.View.Ember.Object.extend.renderToBuffer ember-latest.js:12872
Ember.View.states.inBuffer.appendChild ember-latest.js:13625
Ember.View.Ember.Object.extend.invokeForState ember-latest.js:12239
Ember.View.Ember.Object.extend.appendChild ember-latest.js:13058
EmberHandlebars.ViewHelper.Ember.Object.create.helper ember-latest.js:18687
(anonymous function) ember-latest.js:18844
program2
(anonymous function) handlebars-1.0.0.beta.6.js:1529
Ember.View.Ember.Object.extend.render ember-latest.js:12223
Ember._HandlebarsBoundView.Ember._MetamorphView.extend.render ember-latest.js:18075
Ember.wrap.newFunc ember-latest.js:949
Ember.View.Ember.Object.extend.renderToBuffer ember-latest.js:12872
Ember.View.states.inBuffer.appendChild ember-latest.js:13625
Ember.View.Ember.Object.extend.invokeForState ember-latest.js:12239
Ember.View.Ember.Object.extend.appendChild ember-latest.js:13058
bind ember-latest.js:18129
(anonymous function) ember-latest.js:18199
(anonymous function) ember-latest.js:18271
program1
(anonymous function) handlebars-1.0.0.beta.6.js:1529
Ember.View.Ember.Object.extend.render ember-latest.js:12223
Ember.View.Ember.Object.extend.renderToBuffer ember-latest.js:12872
Ember.ContainerView.Ember.View.extend.render ember-latest.js:14078
Ember.View.Ember.Object.extend.forEachChildView ember-latest.js:12486
Ember.ContainerView.Ember.View.extend.render ember-latest.js:14077
Ember.wrap.newFunc ember-latest.js:949
Ember.View.Ember.Object.extend.renderToBuffer ember-latest.js:12872
Ember.View.states.inBuffer.appendChild ember-latest.js:13625
Ember.View.Ember.Object.extend.invokeForState ember-latest.js:12239
Ember.View.Ember.Object.extend.appendChild ember-latest.js:13058
EmberHandlebars.ViewHelper.Ember.Object.create.helper ember-latest.js:18687
(anonymous function) ember-latest.js:18844
(anonymous function) ember-latest.js:19043
(anonymous function) ember-latest.js:19208
(anonymous function)
(anonymous function) handlebars-1.0.0.beta.6.js:1512
Ember.View.Ember.Object.extend.render ember-latest.js:12223
Ember.View.Ember.Object.extend.renderToBuffer ember-latest.js:12872
Ember.ContainerView.Ember.View.extend.render ember-latest.js:14078
Ember.View.Ember.Object.extend.forEachChildView ember-latest.js:12486
Ember.ContainerView.Ember.View.extend.render ember-latest.js:14077
Ember.wrap.newFunc ember-latest.js:949
Ember.View.Ember.Object.extend.renderToBuffer ember-latest.js:12872
Ember.View.states.inBuffer.appendChild ember-latest.js:13625
Ember.View.Ember.Object.extend.invokeForState ember-latest.js:12257
Ember.View.Ember.Object.extend.appendChild ember-latest.js:13058
EmberHandlebars.ViewHelper.Ember.Object.create.helper ember-latest.js:18687
(anonymous function) ember-latest.js:18844
(anonymous function) ember-latest.js:19624
(anonymous function) ember-latest.js:18167
(anonymous function)
(anonymous function) handlebars-1.0.0.beta.6.js:1512
Ember.View.Ember.Object.extend.render ember-latest.js:12223
Ember.View.Ember.Object.extend.renderToBuffer ember-latest.js:12872
Ember.View.Ember.Object.extend.createElement ember-latest.js:12669
Ember.View.states.preRender.insertElement ember-latest.js:13558
Ember.View.Ember.Object.extend.invokeForState ember-latest.js:12257
invoke ember-latest.js:3428
iter ember-latest.js:3475
RunLoop.flush ember-latest.js:3531
RunLoop.end ember-latest.js:3447
Ember.run.end ember-latest.js:3639
autorun ember-latest.js:3705 
```

谢谢你的帮助。

**更新：** [这个小提琴](http://jsfiddle.net/pauldechov/JBmuA/)有效（以[docs为例），但如果标签不是真实模型（即](https://github.com/emberjs/data/blob/master/README.md)[没有 ID](http://jsfiddle.net/pauldechov/JBmuA/1/) ） ，这些对象如何表示？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-10-24T05:31:14.940

嗯......这有点困难，但在这篇文章中混合了所有答案，我让它工作了。

首先，您应该为新类型“数组”创建一个转换：

```
DS.ArrayTransform = DS.Transform.extend({
  deserialize: function(serialized) {
    return (Ember.typeOf(serialized) == "array")
        ? serialized 
        : [];
  },

  serialize: function(deserialized) {
    var type = Ember.typeOf(deserialized);
    if (type == 'array') {
        return deserialized
    } else if (type == 'string') {
        return deserialized.split(',').map(function(item) {
            return jQuery.trim(item);
        });
    } else {
        return [];
    }
  }
});

App.register("transform:array", DS.ArrayTransform); 
```

现在，在您的模型中，只需将其用作另一个属性：

```
App.myModel = Ember.Model.extend({
    name : DS.attr('string'),
    cont : DS.attr('array')
} 
```

我们完成了。请记住，在向数组添加元素时，要使用 pushObject。

在控制器中：

```
this.get('model.cont').pushObject('new Item'); 
```

我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-12T21:51:03.320

我使用了一个`raw`转换，它在 ember-data 修订版 11 中看起来像这样：

```
DS.RESTAdapter.registerTransform('raw', {
    deserialize: function(serialized) {
        return serialized;
    },  
    serialize: function(deserialized) {
        return deserialized;
    }   
}); 
```

然后，在一个模型中，我这样做：

```
App.MyModel = Ember.Model.extend({
    anArray: DS.attr('raw')
}); 
```

并且可以`anArray`在任何地方像常规数组一样使用。

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-12-14T18:21:47.293

下面是在 Ember-Data（版本 10）中创建自定义数组类型的示例：

```
DS.JSONTransforms.array =

  # If the outgoing json is already a valid javascript array
  # then pass it through untouched. In all other cases, replace it
  # with an empty array.  This means null or undefined values
  # automatically become empty arrays when serializing this type.

  serialize: (jsonData)->
    if Em.typeOf(jsonData) is 'array' then jsonData else []

  # If the incoming data is a javascript array, pass it through.
  # If it is a string, then coerce it into an array by splitting
  # it on commas and trimming whitespace on each element.
  # Otherwise pass back an empty array.  This has the effect of
  # turning all other data types (including nulls and undefined
  # values) into empty arrays.

  deserialize: (externalData)->
    switch Em.typeOf(externalData)
      when 'array'  then return externalData
      when 'string' then return externalData.split(',').map((item)-> jQuery.trim(item))
      else               return [] 
```

现在您可以在模型属性中使用自定义类型：

```
App.CalenderWeek = DS.Model.extend
  selected_days = DS.attr('array') 
```

现在，当您通过以下方式获取记录时：

```
App.CalendarWeek.find(1) 
```

这两个传入的 json 记录都将正确反序列化为一个数组：

```
{ selected_days: ['Monday', 'Tuesday', 'Saturday'] } 
```

或者

```
{ selected_days: 'Monday, Tuesday, Saturday' } 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-09-18T00:46:23.790

在**Ember Data 1.0.0 Beta**中，一个人被赋予了“注册”他或她的自定义转换“子类”的能力。我更愿意将其称为扩展`DS.Transform`对象。

```
DS.ArrayTransform = DS.Transform.extend({
    deserialize: function(deserialized) {
        // ...
        return deserialized;
    },

    serialize: function(serialized) {
        // ...
        return serialized;
    }
});

App.register('transform:array', DS.ArrayTransform); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-09-13T12:47:26.167

例如，如果您绝对需要与您的服务器交换自定义数据结构，您可以丰富`DS.attr.transforms`并声明一个新的`array`编解码器。

请参阅现有属性编解码器实现的[源代码。](https://github.com/emberjs/data/blob/master/packages/ember-data/lib/system/model/attributes.js#L84)这是开始添加自己的好地方。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-21T02:11:06.923

有趣的是，该问题的所有其他 4 个答案都具有几乎相同的反序列化和序列化功能，因此您可以将事情简化为：

```
import Em from 'ember'
import DS from 'ember-data'

# Presumably based on these answers: http://stackoverflow.com/questions/12168570/how-to-represent-arrays-within-ember-data-models
# All we need to do is always make sure an array is returned from serialize or deserialize

toArray = (data) ->
  switch Em.typeOf(data)
    when 'array'  then data
    when 'string' then JSON.parse(data)
    else []

export default DS.Transform.extend
  deserialize: toArray
  serialize: toArray 
```

这是使用[ember-cli-coffees6](https://github.com/alexspeller/ember-cli-coffees6)来`import/export`支持咖啡脚本

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-14T16:50:03.093

这里的游戏有点晚了，但这是我发现的一个 jFiddle，它是声明新数组编解码器的简单实现

[http://jsfiddle.net/Nook/ab2Xf/](http://jsfiddle.net/Nook/ab2Xf/)

# python - Python同时变量递增

> ID：12168571
> 
> 赞同：3
> 
> 时间：2012-08-28T22:43:47.470
> 
> 标签：python, variables, simultaneous

目前，我正在尝试同时重新定义 python 中的两个变量。例如，我有基本情况

```
 p = 3
 q = 2 
```

我想重新定义 p 和 q 这样

```
 p = p+2q 
```

和

```
 q = p+q 
```

因此，p 和 q 的元组应该是 (p,q) = (3,2) 然后是 (7,5) 然后是 (17,15)，以此类推。我不确定如何同时重新定义这些变量。

当然，下面的代码可以工作：

```
 p = 2
 q = 3
 temp = [0,0]

 while True:
    temp[0] = p + 2q
    temp[1] = p+q
    p = temp[0]
    q = temp[1]
    print(p,q) 
```

但我希望能避开这份`temp`清单。有没有更漂亮，更蟒蛇式的方式来做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T22:46:41.053

```
>>> p = 2
>>> q = 3
>>> p, q = p + 2 * q, p + q
>>> print p
8
>>> print q
5
>>> 
```

您还可以添加可选括号：

```
(p, q) = (p + 2 * q, p + q) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-28T22:47:11.583

请参阅下面的代码

```
p = 2
q = 3

while True:
    p, q = (p + 2*q, p + q)
    print(p, q) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T22:50:09.237

```
p = p + 2*q
q = q + p - 2*q 
```

这种方法应该有效

# html - 使用 HTML5 在浏览器上平滑流式传输

> ID：12168574
> 
> 赞同：2
> 
> 时间：2012-08-28T22:44:07.280
> 
> 标签：html

我想弄清楚是否可以使用 HTML5 在浏览器上流式传输流畅的流视频？在 IE、Chrome 和 Firefox 上试了几次，还是没有成功。似乎平滑流仅适用于 SilverLight 客户端或某些平滑流应用程序。

以下是我使用的视频标签：

```
<video controls="controls"
  src="http://smoothhd.code-shop.com/video/oceans.ssm/Manifest"
  poster="poster.jpg"></video> 
```

有谁知道我是否做错了什么，或者无法用 HTML5 播放它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:59:30.210

目前无法在浏览器中播放。它可以在 HTML5 Metro 应用程序中播放。

阅读如何在 Metro 应用程序中执行此操作：http: [//blogs.iis.net/cenkd/archive/2012/03/28/How-to-build-your-first-html5-metro-style-smooth-streaming -player.aspx](http://blogs.iis.net/cenkd/archive/2012/03/28/How-to-build-your-first-html5-metro-style-smooth-streaming-player.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T08:31:13.720

您可以嵌入一个 Silverlight 播放器，它将播放该链接（如果服务器具有正确的 crossdomain.xml 文件）。当然，这不是等效的解决方案，但无论如何它可能会给你你正在寻找的东西。

# javascript - 内联执行生成的汇编程序

> ID：12168575
> 
> 赞同：3
> 
> 时间：2012-08-28T22:44:08.440
> 
> 标签：javascript, assembly, scheme, inline-assembly, dynamically-generated

我正在阅读以下演示文稿： [http](http://wingolog.org/pub/qc-2012-js-slides.pdf) : //wingolog.org/pub/qc-2012-js-slides.pdf，其中讨论了 (4,10,19) 内联 ASM 生成作为 Javascript 优化中使用的一种技术。

在以下论文中： [https](https://sites.google.com/site/juliangamble/Home/Compilers%20Tutorial%202006-09-16.pdf?attredirects=0&d=1) ://sites.google.com/site/juliangamble/Home/Compilers%20Tutorial%202006-09-16.pdf?attredirects=0&d= 1 在第 30 页和第 31 页，他们讨论了使用方案生成随后在后续 OS 进程中链接和执行的 ASM。

您想要生成 ASM 并在现有流程中执行它的场景呢？（即没有后续链接并在单独的步骤中执行）。

我*认为*这归结为（例如在 C 中）生成 ASM，将字节写入内存区域（代码作为数据）并添加函数头并返回（与 C 调用程序兼容（类似于我们在页面上看到的）上述 Goloum 论文的第 3 篇）然后我们获取该数据指针并将其转换为函数指针并调用它（代码即代码 - 来自代码即数据）。

我的问题是：

(a) 这种内联代码生成和执行的术语是什么？

(b) 是否有一个简单的“hello world”C 示例可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T02:34:35.887

[这里](https://stackoverflow.com/a/4819124/15441)有一个很好的例子。他们再次使用自修改代码的术语。

另一个[在这里](https://stackoverflow.com/a/10266596/15441)。

[在这里](https://stackoverflow.com/questions/8713627/use-cases-for-self-modifying-code)，他们给了它四个类别（用例）：

*   变质
*   蹦床
*   即时编译
*   安全隐患（不安全的编码/恶意软件）

[这里](https://stackoverflow.com/questions/8490616/homoiconic-and-unrestricted-self-modifying-code-is-lisp-really-self-modifyin)有一个关于 LISP 是否真的可以自我修改的讨论——他们最终得出的结论是它不是。

# string - 如何在 tcl 中执行子字符串提取和替换

> ID：12168576
> 
> 赞同：3
> 
> 时间：2012-08-28T22:44:08.607
> 
> 标签：string, tcl

我正在尝试从 Tcl 中的字符串中提取子字符串。我编写了代码并且能够做到，但我想知道是否还有其他有效的方法可以做到这一点。所以确切的问题是我有一个字符串

> `name_ext_10a.string_10a.string.string.string`

我想提取“ `name_ext`”，然后删除那个“ `_`”并用“”替换它`.`；我最终希望输出为“ `name.ext`”。我写了这样的东西：

```
set _File "[string replace $_File [string last "_" $_File] [string length $_File] "" ]"
set _File "[string replace $_File [string last "_" $_File] [string length $_File] "" ]"
set _File "[string replace $_File [string last "_" $_File] [string last "_" $_File] "." ]" 
```

这给了我想要的确切输出，但我想知道在 Tcl 中是否有任何其他有效的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T01:47:08.877

您可以使用下划线作为分隔符拆分该文件名，然后用点连接前 2 个元素：

```
% set f name_ext_10a.string_10a.string.string.string
name_ext_10a.string_10a.string.string.string
% set out [join [lrange [split $f _] 0 1] .]
name.ext 
```

**编辑**

因此，如果“名称”可以有任意数量的下划线：

```
set f "foo_bar_baz_ext_10a.string_10a.string.string.string"
set pieces [split $f _]
set name [join [lrange $pieces 0 end-3] _]
set out [join [list $name [lindex $pieces end-2]] .]  ;#==> foo_bar_baz.ext 
```

但这变得越来越复杂。一个正则表达式就足够了——我假设“字符串”可以是任何非下划线字符序列。

```
set string {[^_]+}
set regex "^(.+)_($string)_10a.${string}_10a.$string.$string.$string\$"
regexp $regex $f -> name ext
set out "$name.$ext"    ;#==> foo_bar_baz.ext 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T05:32:55.250

进行提取的一种方法是使用`regsub`：

```
regsub {^([^_]+)_([^_]+)_.*} $_File {\1.\2} _File 
```

正则表达式包含`([^_]+)`匹配一系列非下划线字符的组件，加上一个锚点和一些下划线，以及一个`.*`匹配其他所有内容的尾随非捕获（因此我们可以丢弃它）。`regsub`用两个匹配的非下划线部分的串联替换它（这是整个字符串），`.`并将其写回`_File`字符串来自的变量。

*请注意，我将正则表达式和替换放在大括号中。*这是因为它们包含我希望 Tcl`regsub`逐字传递的 Tcl 元字符（方括号和反斜杠）。

# php - 加载不存在的magento模型

> ID：12168581
> 
> 赞同：1
> 
> 时间：2012-08-28T22:44:27.607
> 
> 标签：php, magento

我正在将数据从旧网站转换为新网站。我正在扩展的类中创建和填充客户`Mage_Shell_Abstract`。

如果客户已经存在，我想加载他们，如果他们不存在，我想创建他们：

```
$customer = Mage::getModel('customer/customer')->loadByEmail('none@gmail.com');
$customer->setFirstName('John');
$customer->setLastName('Smith');
$customer->save(); 
```

如果此电子邮件不存在任何客户，此代码会导致任何错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T00:33:04.277

不确定“不存在的magento模型”到底是什么意思，但如果你指的是`customer/customer`模型，它应该可以工作。

如果您在该`run()`方法内，则`Mage::app()`已经在 的`__construct()`方法内运行`Mage_Shell_Abstract`，因此您将可以从该上下文中访问所有模型和其他 magento 功能。

所以`getCustomerByEmail()`将像正常一样工作，以及该模型或任何其他模型上的所有其他方法。

你应该能够做到：

```
$customer = Mage::getModel('customer/customer')->loadByEmail('none@gmail.com');
if (!$customer->getId()) {
    // Create customer
} 
```

# python - Python 和 Ruby 中用于 Web 编程的协程或延续。为什么不？

> ID：12168583
> 
> 赞同：20
> 
> 时间：2012-08-28T22:44:38.610
> 
> 标签：python, ruby, go, continuations, coroutine

**问题是：为什么延续（在 Ruby 中）和协程（在 Python 中）没有更广泛地用于 Web 编程？**

保存请求之间的状态问题使服务器端 Web 编程变得困难。两个优雅且相关的解决方案是延续（如在 Scheme、Ruby 和 Smalltalk 中发现的）和协程（如在 Python 和 Go 中发现的）。

Bruce Tate 在他的*Beyond Java*（O'Reilly，2005 年）中谈到 Ruby on Rails 和**[Seaside](http://www.seaside.st/)**是 Web 编程中令人兴奋的新发展。对我来说，**Seaside**是真正的突破：使用 Smalltalk 延续，Seaside 使得编写复杂的请求/响应序列变得非常容易。

我知道在 Tornado 和 Twisted 中使用 Python 协程来减少回调，但这有点低级，例如，与在单个协程中编写视图/控制器来处理一系列 HTTP 请求以完成在线购买相比。

**我想知道为什么这些在纸上看起来很好的想法在 Python 和 Ruby 中没有得到更广泛的部署。仅仅是文化问题吗？以这些语言实现的设施的限制？或者这些方法在 Web 开发环境中是否存在根本缺陷？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T02:40:35.487

我使用过 Seaside，而 continuations 是开发客户端服务器 webapps 的一个很好的模型。它们简化了传统的客户端/服务器应用程序，我无法相信为什么没有其他语言这样做。

但不幸的是，webapps 已经不是过去的样子了。现在使用 ajax 在不同时间有多个请求，而不是只请求一页。这就是为什么延续不像过去那样有用。

甚至 Avi Bryant（Seaside 的原作者）也说过，在 ajax 下使回调更容易（事件驱动编程）比延续更重要。

看看这个quora讨论了解更多： [http ://www.quora.com/Whats-the-best-continuation-based-web-framework](http://www.quora.com/Whats-the-best-continuation-based-web-framework)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T15:31:01.590

主要是因为非技术原因。知道Seaside 甚至Smalltalk 的人很少，所以没有大量的廉价程序员可以雇佣。因此，知道如何安装和维护 Seaside 系统的服务提供商数量也很少。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T15:29:55.627

您的应用程序应该在 continuation/coroutines 框架以及支持库上编写。对于初学者来说，这不是简单的模型。还有更简单的框架，例如 gevent，它提供了相同的创建绿色线程的可能性，并且由于猴子补丁而更易于使用。

# r - 在knitr R代码中传递下划线

> ID：12168584
> 
> 赞同：6
> 
> 时间：2012-08-28T22:44:39.340
> 
> 标签：r, knitr

我需要调用一个在 knitr 中的 R 块中的表名中有下划线的数据库。有几千个表名，更改名称会很麻烦。就像是：

```
<<classRun,fig=FALSE,print=FALSE,echo=FALSE>>=
getdat = function(nbr1,nbr2){
library(RODBC)
database.dsn1<-c("db")
database.user1<-c("username")
database.password1<-c("password")
channel<-odbcConnect(database.dsn1, database.user1, database.password1)
dat = sqlQuery(channel,paste("select * from table_",nbr1,"_",nbr2, sep=""))
}
@

<< results='asis', echo = FALSE>>=
dat = getdat(10,20)
print(dat)
@ 
```

由于“table_10_20”中的下划线，我收到了我缺少 $（“Missing $ inserted”）的错误。我已经玩了很多添加'\$ *\'和'\$* \'，你的名字。还使用了 cat()、paste()、单引号和双引号。有什么建议么？在此先感谢您的帮助。我正在运行 Ubuntu 11.10，并使用 pdfLaTeX 从 RStudio 调用 knitr，如果这很重要的话。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-29T00:08:48.520

您可能有一个带有下划线的列名。

回想一下，`results='asis'`只是将所有输出原样转储到 tex 文档中。

例如，这是您的问题的可重现示例：

```
% test.Rnw
\documentclass[a4paper]{article}                                                
\begin{document}                                                                
<<classRun, fig=FALSE, print=FALSE, echo=FALSE>>=                               
table_10_20 <- data.frame(col_1=1:10, col_2=runif(10))                          
@                                                                               

<<results='asis', echo=F>>=                                                     
print(table_10_20)                                                              
@                                                                               
\end{document} 
```

如果我运行它，`knitr`我会得到“缺少`$`插入”。

如果我查看生成的 .tex 文件，我会看到：

```
% test.Rnw
\documentclass[a4paper]{article}                                                
.... lots of tex ....
\begin{document}

   col_1   col_2
1      1 0.69699
2      2 0.12988
3      3 0.19662
4      4 0.04299
5      5 0.08750
6      6 0.72969
7      7 0.19818
8      8 0.27855
9      9 0.81806
10    10 0.56135

\end{document} 
```

看看列名`col_1`和如何按`col_2`原样转储到文件中？好吧，在 LaTeX 中，下划线具有特殊含义（下标），仅在数学模式下有效，因此 LaTeX 编译器会尝试将数学模式分隔符 ( `$`) 放在单词周围，从而产生错误。

在您的情况下，您有几个选项，具体取决于您想要的输出。

1.  使用`\begin{verbatim}`with`results='asis'`保护下划线。这会将您的输出转储到`verbatim`环境中。

    ```
    \begin{verbatim}
    <<results='asis', echo=F>>=       
    print(table_10_20)                              
    @      
    \end{verbatim} 
    ```

    ![逐字逐句](../Images/5b24fc5b8f1b62519de789a70288d84b.png)

2.  使用`results='markup'`：这就像一个逐字环境，除了 sweave 颜色输出。默认情况下，它会`##`在每一行前面放置一个注释标记 ( )；删除这个使用`comment=NA`。（你看不出这张图片与上面有什么不同；除了它有灰色背景以将它与文档的其余部分区分开来之外，它是相同的。它与你使用时的标记相同`echo=T`）。

    ```
    <<results='markup', comment=NA, echo=F>>=      
    print(table_10_20)  
    @ 
    ```

    ![使用结果=标记](../Images/a8bd8381ccc9cee00e3babaa090b92fa.png)

3.  以上两个只是用字体固定打印您的表格。如果你想要一个合适的乳胶表，你可以使用一个包[`xtable`](http://cran.r-project.org/web/packages/xtable/index.html)，它可以转换一个`data.frame`（和类似的）ino 合适的 LaTeX（或 HTML）标记。我认为还有其他软件包也可以做到这一点，但目前它们逃脱了我的视线。你`results='asis'`在这里用。（有关详细信息，请参阅文档，您确实可以控制表格中打印内容的各个方面以及如何打印）：

    ```
    <<results='asis', echo=F>>=      
    library(xtable)      
    print(xtable(table_10_20), include.rownames=FALSE)
    @ 
    ```

    ![使用 xtable](../Images/5c4ca40a21d9c4c3ad7657d9f50d2ccd.png)

# java - 创建一个简单的库存盘点程序 - 第二次尝试

> ID：12168585
> 
> 赞同：1
> 
> 时间：2012-08-28T22:44:45.393
> 
> 标签：java, oop, stocks

我之前已经问过这个问题并尽可能地遵循反馈，但我仍然在存储用户输入到数组中的信息时遇到问题。

这是第一次尝试： [OOP Java：创建库存盘点程序](https://stackoverflow.com/questions/10859083/oop-java-creating-a-stock-inventory-program)

所以我需要总共三个课程（这是必需的）。库存，库存库存，然后是用户界面。该程序的目的是要求用户输入公司名称、股票评级、价格和股票数量。当然，然后我必须做其他事情。我想我对其余的没问题，问题是 stockInterface，我在下面发布的最后一段代码。

```
public class Stock {

private String companyName;
private String stockRating;
private int price;
private int numberOfShares;

public String getCompanyName() {
    return companyName;
}

public int getStockRating() {
    return stockRating;
}

public String getPrice() {
    return price;
}

public int getNumberOfShares() {
    return numberOfShares;
}

public Stock(String companyName, String stockRating, int price, int numberOfShares) {
    super();
    this.companyName = companyName;
    this.stockRating = stockRating;
    this.price = price;
    this.numberOfShares = numberOfShares;
}

import java.util.*;

public class StockInvetory {

private static final int INVENTORY_SIZE = 12;
private Stock [] stocks;

public StockInvetory() {
    stocks = new Stock [INVENTORY_SIZE];

}

public class StockInterface() {
    private static StockInventory stockPortfolio;

        public static void main (String [] args){

    System.out.println ("Stock's name:");
    String stockName = console.next();

    System.out.println ("Stock's rating");
    String stockRating= console.next();

    System.out.println ("Stock's price:");
    int stockPrice = console.nextInt();

    System.out.println ("Numbers of shares: ");
    int numberShares= console.nextInt();

          stockPortfolio [0]= new Stock(stockName, stockRatings, stockPrice, numberShares);
    } 
```

这段代码不起作用。

```
stockPortfolio [0]= new Stock(stockName, stockRatings, stockPrice, numberShares) 
```

有人可以告诉我将信息存储到数组中的正确方法吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:01:59.180

很多编译错误...

您已定义`stockRating`为 a`String`但仍将其返回为 a `int`：

```
public int getStockRating() {
    return stockRating;
} 
```

对于`price`.

你在这里有额外的括号：

```
public class StockInterface() {
                           ^ 
```

同样在`StockInventory`，类块中有多个语句，它们属于一个方法。

`console`没有实例化。stockPortfolio 被分配为一个数组条目，但它是一个单独的对象，并且分配给`Stock`which 不是匹配的类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T23:03:55.627

因此，您已将 stockPortfolio 声明为 StockInventory 的一个实例。StockInventory 是一个类而不是数组，因此您不能使用 stockPortfolio [0] = ... 因为 stockPortfolio 是该类的一个实例。您在 StockInventory 中有一个私有成员，它是 Stock 类实例的数组。您需要的是能够操作它的访问器方法。所以改变 StockInventory 如下：

```
public class StockInvetory {
/*
  All the code you have now ...
*/
  public Stock [] getStocks(){
      return stocks;
  }

  public setStocks(Stock [] value){
     //maybe some checking here ...
      stocks = value;
  }
} 
```

现在只是在使用类方面略有变化。您需要按如下方式使用访问器方法：

```
public class StockInterface {
 /*
 What you have just the following line changes ...
 */
   stockPortfolio.getStocks()[0] = new Stock(stockName, stockRatings, stockPrice, numberShares);
} 
```

我假设您对初始化数组的方式感到满意，并且您已经确定数组比特定项目的集合中更动态的数据结构更好。如果这不是真的，请查看 Java Collections，它们可能会给您带来更多乐趣。

# concurrency - 如何同步多个 Backbone.js 获取？

> ID：12168587
> 
> 赞同：24
> 
> 时间：2012-08-28T22:44:56.673
> 
> 标签：concurrency, backbone.js

我对 Backbone.js 有点陌生，但它可以为我做的一切都给我留下了深刻的印象，现在我正在努力学习模式和最佳实践。

我有两个收藏：

```
var CollA = Backbone.Collection.extend({
    model: ModelA,
    url: '/urlA'
});

var CollB = Backbone.Collection.extend({
    model: ModelB,
    url: '/urlB'
});

var collA = new CollA;
var collB = new CollB; 
```

加载我的应用程序时，我需要从服务器获取这两个集合，并在确保两个获取都已完成时运行一些引导代码。

这是我现在的做法：

```
collA.fetch({success: function() {
    collB.fetch({success: function() {
        // run the needed code here.
    }});
}}); 
```

这是可行的，只有在两次获取成功完成后，才能保证所需的代码运行。但这显然效率低下，因为提取是连续运行的，一个接一个。

什么是更好的模式来执行此操作，并行运行提取，然后在两个提取成功完成后运行一些代码？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-28T22:48:37.023

如果您使用的是 jQuery，请使用`when`：

```
$.when(collA.fetch(),collB.fetch()).done(function(){
    //success code here.
}); 
```

背景：

*   [http://api.jquery.com/jQuery.when/](http://api.jquery.com/jQuery.when/)
*   [http://documentcloud.github.com/backbone/#Collection-fetch](http://documentcloud.github.com/backbone/#Collection-fetch)

你传入一个或多个 deferred to `$.when`。碰巧集合返回的“jqXHR”实现了可以使用`$.when`. 请求基本上是并发的（好吧，只要 javascript 允许），传递给的函数`.done`只有在两个提取都成功时才会执行。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-29T13:34:26.600

正如@JayC 所说，您可以`$.when`从 jQuery 中使用，我更喜欢的另一个选项是`after`函数（来自下划线），它在预期调用完成后执行一次。

[http://underscorejs.org/#after](http://underscorejs.org/#after)

```
function runMyApp(){
  // run the needed code here.
  console.log('This will run one time but until both fetch are being completed.');
}

//2 because you have two collections
var renderApp = _.after(2, runMyApp);
collA.fetch({success: renderApp});
collB.fetch({success: renderApp}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T07:15:27.467

如果您必须单独获取每个集合，我喜欢@JayC 的回答。您可能会争辩说，与多次提取相比，一次提取到服务器会更好。如果您在应用程序负载时获取此数据，我将对服务器进行一次调用，然后将数据传递给您的相关集合。这实际上取决于您必须在应用程序负载时获取多少集合，但老实说，我更喜欢调用服务器然后将数据传递给我的相关集合。

```
$.ajax({
    url: "path/to/app-load-data"
}).done(function(data) { 
    collA = new CollA(data.collA);
    collB = new CollB(data.collB);
}); 
```

这显然取决于您是否可以操纵您的 api 并且上述内容不遵循 REST。但是话又说回来，您对服务器进行了一次调用，而不是多次调用。

# ruby-on-rails - 如何查看 Rails 3 中的所有会话？

> ID：12168590
> 
> 赞同：0
> 
> 时间：2012-08-28T22:45:17.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3, session

根据 SO 的回答，尝试删除所有会话，但没有成功。

如何查看 Rails 3 中的所有会话？

导轨 3.2.2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:47:03.067

在任何视图中的某个地方：`<%= debug session %>`要清理所有会话，只需使用 Firebug 或 Web Inspector 并删除所有 cookie。

# mysql - MYSQL结果需要合并表

> ID：12168592
> 
> 赞同：2
> 
> 时间：2012-08-28T22:45:21.417
> 
> 标签：mysql

我正在用 PHP 编写一个工具脚本，并用 MYSQL 说明了一种情况。我有两个表，我需要将它们组合起来以获得我想要的结果。

我想出了这个：

```
SELECT * FROM names, dogs WHERE dog_id = dogs.id; 
```

但是当我这样做时，结果不包括 dog_id = NULL 的行。我也需要这些结果。

```
TABLE NAMES
|  *id*  | *name*  |  *dog_id* |  
|   1    |  name1  |    NULL   |
|   2    |  name2  |     1     |
|   3    |  name3  |     NULL  |
|   4    |  name4  |     2     |  

TABLE DOGS  
|  *id*  |  *dog*  | 
|   1    |  dog1   |  
|   2    |  dog2   | 
```

如何获得这些结果：

```
RESULTS
|  *id*  |  *name*  |  *dog_id* |  *dog*  |
|   1    |   name1  |    NULL   |   NULL  |
|   2    |   name2  |    1      |   dog1  |
|   3    |   name3  |    NULL   |   NULL  |
|   4    |   name4  |    2      |   dog2  | 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:46:53.533

使用外连接：

```
SELECT names.id, names.name, names.dog_id, dogs.dog
FROM names
LEFT JOIN dogs
ON dog_id = dogs.id; 
```

# ruby - Middleman 3.0 - 简单导航 gem

> ID：12168596
> 
> 赞同：2
> 
> 时间：2012-08-28T22:45:41.213
> 
> 标签：ruby, navigation, padrino, middleman

[有 Ruby 知识的人会知道是否可以将 ' simple-navigation](https://github.com/andi/sinatra-simple-navigation) ' gem的 Padrino 兼容版本与 Middleman 3.0 一起使用？

我想实现多级导航+面包屑并对排序有一点控制。

或者是否有任何其他导航宝石或示例可以指出我与 Middleman 3.0 一起使用的方向？

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T05:05:54.880

有一个宝石可以为你包装这个：

[中间人导航](https://github.com/michaek/middleman-navigation)

# php - 使用来自 mysql 的复选框和数据创建一个比较页面

> ID：12168598
> 
> 赞同：0
> 
> 时间：2012-08-28T22:46:03.583
> 
> 标签：php, mysql

我是 PHP 的新手，我想为我的网站创建一个简单的网页应用程序，我能够根据此处的教程生成此页面。

```
<?php
  $con = mysql_connect("localhost","*****","*****");
  if (!$con)
  {
   die('Could not connect: ' . mysql_error());
  }

mysql_select_db("*****", $con);

$result = mysql_query("SELECT * FROM products");

echo "<table border='1'>
<tr>
<th>Name</th>
<th>classification</th>
</tr>";

while($row = mysql_fetch_array($result))
  {

  echo "<tr>";
  echo "<td>" . $row['name'] . "</td>";
  echo "<td>" . $row['classification'] . "</td>";
  echo "<td><input type='checkbox' name='{number[]}' value='{$row['prodID']}' /></td>";

  echo "</tr>";
  }
echo "</table>";

mysql_close($con);

?>

<?php

?>

<html>
<head>

</head>
<form name="form1" method="post" action="result_page.php"> 

<input type="submit"  name="Submit"      value="Submit"> 
</p> 
</form> 

<body>

</body>
</html> 
```

但我的问题是如何创建一个 result_page.php 以在所选复选框上显示所选条目或数据库，以便我可以创建一个比较页面。我将此作为我的 result_page.php ，但没有显示任何内容。我知道我做错了什么，但我找不到。

```
<?php
error_reporting(E_ALL);

$host = 'localhost';                
$user = '******';       
$pass = '******';       
$dbname = '******';         
$connection = mysql_connect($host,$user,$pass) or die (mysql_errno().":  ".mysql_error()."<BR>"); 
mysql_select_db($dbname);

$sql = "SELECT * FROM products WHERE prodID IN ("; 

foreach ($_POST['number'] as $product) $sql .= "'" . $product . "',";

$sql = substr($sql,0,-1) . ")"; 

$result = mysql_query($sql); 

while ($myrow = mysql_fetch_array($result))

{ 
echo "<table border=1>\n";

echo "<tr><td>Name</td><td>Position</td></tr>\n";

do {

printf("<tr><td>%s %s</td><td>%s</tr>\n", $myrow["1"], $myrow["2"], $myrow["3"]);

} while ($myrow = mysql_fetch_array($result));

 echo "</table>\n";

} 

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:39:08.577

快速浏览一下，生成输出的部分不正确。您无缘无故地循环了两次。

```
while ($myrow = mysql_fetch_array($result)) //<========remove this line

{ //<========remove this line
echo "<table border=1>\n";

echo "<tr><td>Name</td><td>Position</td></tr>\n";

do {

printf("<tr><td>%s %s</td><td>%s</tr>\n", $myrow["1"], $myrow["2"], $myrow["3"]);

} while ($myrow = mysql_fetch_array($result));

echo "</table>\n";

}  //<========remove this line 
```

这是通过人工解析完成的，但应该作为一个起点。

回顾一下 tadman，不，这不是一个好的教程。通常你不需要为输出做 printf 。

# vba - 试图对我的体型产生任何影响

> ID：12168601
> 
> 赞同：-1
> 
> 时间：2012-08-28T22:46:18.347
> 
> 标签：vba, parameters, powerpoint, effect, shapes

```
'declare Variables 
Dim osld As Slide
Dim oshp As Shape
Dim oeff As Effect

' SET objects
Set osld = ActivePresentation.Slides(7)
Set oshp = osld.Shapes("Star 1")
Set oeff = osld.TimeLine.MainSequence.AddEffect(Shape:=oshp, effectid:=msoAnimEffectChangeFillColor)

With oeff
.EffectParameters.Color2.RGB = RGB(Red:=10, Green:=45, Blue:=201)
.Timing.Duration = 2
End With

oshp.Left = oshp.Left + 100 ' Added to verify something was coming thru! 
```

可悲的是它仍然不起作用......它可以编译，但对幻灯片没有影响......

我已更新代码以显示您的建议

注意：填充颜色是在创建形状时定义的

我在形状的左侧值上添加了 + 100，以确保它实际上是通过的，它确实移动但不会改变颜色......

是否有“官方”列表说明哪些效果支持哪些参数？

感谢您与我一起度过这个难关！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T07:15:42.547

我理解您的沮丧：正如我在评论中提到的，该`Color1`属性在 PowerPoint 2010 中不存在，但文档中给出的示例`Color2`确实使用`Color1`了——因此，它无法编译！

正确的方法是给*形状*一个颜色，像这样：

```
oshp.Fill.ForeColor.RGB = RGB(Red:=0, Green:=0, Blue:=255) 
```

这将是起始颜色。然后动画效果可以更改该颜色：

```
With oeff
    .EffectParameters.Color2.RGB = RGB(Red:=0, Green:=255, Blue:=255)
    .Timing.Duration = 2
End With 
```

请注意，这`Timing`是 的属性`Effect`，而不是`EffectParameters`您问题中给出的代码中的属性。

# php - 加入并从同一查询中的另一个表中获取一些其他信息

> ID：12168602
> 
> 赞同：0
> 
> 时间：2012-08-28T22:46:23.730
> 
> 标签：php, mysql, sql

```
$query = sprintf("SELECT user_id, lat, lng, ( 3959 * acos( cos( radians('%s') ) * cos( radians( lat ) ) * cos( radians( lng ) - radians('%s') ) + sin( radians('%s') ) * sin( radians( lat ) ) ) ) AS distance FROM bid_latlng HAVING distance < '%s' ORDER BY distance LIMIT 0 , 20",
    mysql_real_escape_string($center_lat),
    mysql_real_escape_string($center_lng),
    mysql_real_escape_string($center_lat),
    mysql_real_escape_string($radius)); 
```

我需要做的是使用上面的语句从表中获取`user_login`列。`wp_users``user_id`

```
wp_users TABLE
id | user_login 
```

我真的不太清楚如何正确`JOIN`利用第一个语句中的结果来正确使用这两个语句......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T22:53:45.770

下面的查询应该为您提供所需的结果：

```
sprintf("SELECT bid_latlng.user_id,wp_users.user_login, bid_latlng.lat, bid_latlng.lng, 
( 3959 * acos( cos( radians('%s') ) * cos( radians( lat ) ) * cos( radians( lng ) - radians('%s') ) + sin( radians('%s') ) * sin( radians( lat ) ) ) ) AS distance 

    FROM bid_latlng JOIN wp_users ON bid_latlng.user_id = wp_users.user_id HAVING distance < '%s' ORDER BY distance LIMIT 0 , 20",
        mysql_real_escape_string($center_lat),
        mysql_real_escape_string($center_lng),
        mysql_real_escape_string($center_lat),
        mysql_real_escape_string($radius)); 
```

# c - 为什么 MPI_Sendrecv 会阻塞？

> ID：12168603
> 
> 赞同：4
> 
> 时间：2012-08-28T22:46:28.690
> 
> 标签：c, parallel-processing, mpi

假设我有**n 个**进程，每个进程都拥有一个本地数据，比如一个**int**。

现在我想重新实现**MPI_Allreduce()**函数，即计算所有这些**整数**的全局总和，然后将结果总和广播回进程。

我试图在下面的代码中这样做：

```
 int temp;
  int my_sum = temp = my_data;
  for (int i = 1; i < size; ++i) {
    int partner = (my_rank + 1) % size;
    MPI_Sendrecv_replace(&temp, 1, MPI_INT, 
                         partner, 0, 
                         my_rank, 0, 
                         MPI_COMM_WORLD, MPI_STATUS_IGNORE);
    my_sum += temp;
  } 
```

以便进程以环形方式进行通信，但它是阻塞的。为什么？如何更改代码以使其正常工作？

**注意：**请不要建议问题的替代（更好）解决方案（显然，其中之一是使用**MPI_Allreduce()**函数）。我的目标是理解为什么这个代码片段不能像我认为的那样工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T00:06:09.523

每个人都试图从自己那里接收，但他们正在发送到`partner`；因为`partner`永远不会收到正在发送的消息，`my_rank`也永远不会从这里收到消息，所以有一个挂起。

如果您尝试向 发送数据`parter`，那么您需要确保`partner`从您那里接收，这意味着每个人都需要从 接收`(myrank - 1 + size) % size`：

```
int spartner = (my_rank + 1) % size;
int rpartner = (my_rank - 1 + size) % size;
MPI_Sendrecv_replace(&temp, 1, MPI_INT,
                     spartner, i,
                     rpartner, i,
                     MPI_COMM_WORLD, MPI_STATUS_IGNORE); 
```

这样，在每次迭代中，等级 3（比如说）正在发送到 4，等级 4 正在从等级 3 接收，因此 sendrecv 完成。（我还冒昧地为循环中的每个迭代提供了自己的标签，这在这里并不是必需的，但如果存在其他不匹配的消息类型错误，通常有助于发现错误。）

# qtableview - QTableView 拖动移动行

> ID：12168610
> 
> 赞同：7
> 
> 时间：2012-08-28T22:46:54.540
> 
> 标签：qtableview

我正在使用 a`QTableView`和`QAbstractTableModel`a`QSortFilterProxyModel`以便我可以通过单击表格标题对项目进行排序。我想为用户添加选项，通过拖动它们来手动对视图中的行进行排序。我不需要能够从/向任何外部应用程序拖放，只是为了更改列表中的顺序。我也不需要更改模型中的数据，我只希望视图中的顺序不同。

我一直在查看文档，似乎我必须实现`mimeTypes`,`mimeData`和`dropMimeData`，但这很快就会变得非常复杂！我模型中的一些数据实际上并没有显示在视图中，就像我说的我不想改变模型中数据的顺序。有没有一种方法可以简单地拖动项目来改变它们的排序（就像标题已经能够做的那样）而不需要大量的编码？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-16T19:18:50.067

**为 QT5 更新以删除不推荐使用的方法**

如果您使用的是 PyQT，您只需满足以下要求：

```
your_tableview.verticalHeader().setSectionsMovable(True)
your_tableview.verticalHeader().setDragEnabled(True)
your_tableview.verticalHeader().setDragDropMode(QAbstractItemView.InternalMove) 
```

`horizontalHeader`如果你也想要那些可以重新排列的，然后冲洗并重复。

**你是绝对正确的，你不应该接触甚至知道这个功能的模型是什么**。这可以通过您在模型本身上正确使用`QSortFilterProxyModel`装饰器来进一步证明。

您看到的有关 mimeTypes 的内容以及所有这些内容都是用于从其他窗口/应用程序/桌面/等拖放不同来源的实际对象，而不是您当前尝试完成的任务。

# yum - 如何调试不同机器上yum list之间的不一致

> ID：12168612
> 
> 赞同：0
> 
> 时间：2012-08-28T22:47:01.770
> 
> 标签：yum, rhel5

我有两台不同的 RHEL5.8 机器，它们的 /etc/yum.repos.d/ 和 /etc/yum/ 完全相同。在一台机器上当我这样做`yum search openssl-devel`或`yum search yum-utils`得到结果时，在另一台机器上我没有。我安装了我拥有的存储库，如下所示：

```
rpm -Uhv http://redhat-clientconfig-us-east-1.s3.amazonaws.com/rh-amazon-rhui-client-2.2.16-1.el5.noarch.rpm
rpm -Uhv http://dl.iuscommunity.org/pub/ius/stable/Redhat/5/x86_64/epel-release-5-4.noarch.rpm
rpm -Uhv http://dl.iuscommunity.org/pub/ius/stable/Redhat/5/x86_64/ius-release-1.0-10.ius.el5.noarch.rpm 
```

我也找不到`yum search httpd`安装 apache 的任何结果。

那么，如何解决 yum 不一致的问题呢？以及如何安装最新的 httpd（即使没有启用 RHN）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T20:49:35.713

您正确地发现系统需要在 RHN 服务器上注册才能使搜索到的 yum 工作。否则，yum 没有要搜索的服务器或存储库。

# android - 在Android中，如何让按钮上的文本垂直下降？

> ID：12168618
> 
> 赞同：2
> 
> 时间：2012-08-28T22:47:15.177
> 
> 标签：android, xml, text

我试图让我的按钮中的文本垂直下降，如下所示。我希望在 main.xml 文件中发生这种情况。

```
M
Y
T
E
X
T 
```

我不希望文本横着走。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:12:28.160

在字母之间使用“\n”，这告诉编译器在字符之间添加一个返回字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T00:30:35.103

一个小辅助函数（我没有更好的主意，然后添加换行符）：

```
public static final String rotateString(String str)
{
    final StringBuilder sb = new StringBuilder();
    for(int i=0; i<str.length(); i++)
        sb.append(str.charAt(i)).append(i==str.length()-1? "" :'\n');
    return sb.toString();
} 
```

然后如果你想使用它：

```
yourTextView.setText(rotateString("Hello Text")); 
```

目前我只能在 4.0.3 的模拟器上测试它，但它似乎工作得很好。

# javascript - 等待 jQuery 动画完成

> ID：12168619
> 
> 赞同：2
> 
> 时间：2012-08-28T22:47:16.717
> 
> 标签：javascript, jquery, animation, jquery-animate

我有以下 jQuery 代码：

```
var id = $(this).data('id');
if ($('#container').is(':visible'))
{
    $('#container').slideToggle('fast', function() {
        $('#' + id).toggle();
    });
}
else
{
    $('#' + id).toggle(0, function() {
        $('#container').slideToggle('fast');
    });
} 
```

这段代码包含在一个更大的方法中，我不会在这里发布。该方法负责在一组按钮的样式和行为之间进行切换，并且在上面的代码中，当按下按钮时显示/隐藏一个容器。如果当前按下按钮（因此显示容器）但用户单击另一个按钮，则首先在当前按下的按钮上调用上述方法以隐藏其容器，然后在刚刚单击的按钮上调用以显示*其*容器。

问题是在为刚刚按下的按钮执行该方法之前，当前按下的按钮的动画没有完成（或者甚至没有像我在调试时观察到的那样开始）。

有谁知道如何让代码在从这个方法返回之前等待动画队列清空？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:52:44.063

您应该使用jQuery 为动画元素提供的`Deferred`/对象（以及其他东西，如 XHR 请求）。`promise`

这意味着，你总是可以像这样陷入承诺

```
function foo() {
    return $('#someElement').slideToggle('fast', function() {
    }).promise();
} 
```

然后像这样称呼它

```
foo().done(function() {
    alert('animation finished');
} 
```

演示：http: [//jsfiddle.net/dCVnG/](http://jsfiddle.net/dCVnG/)

# c# - 多级标题结构 WPF

> ID：12168620
> 
> 赞同：0
> 
> 时间：2012-08-28T22:47:16.780
> 
> 标签：c#, wpf, header, multi-level

我需要在 WPF 中进行标题结构预览。我已经研究过使用 StackPanels 和 DockPanels 并且似乎无法准确掌握需要什么。我还需要一种编程方式来创建标题结构，因为它是根据用户提供的信息创建的。

我需要一些看起来像这样的东西：

|---------超级标题------------| |--------页眉---------|-页眉-| |-副标题-|-副标题-|--------|

我使用 StackPanels 和 DockPanels 的主要问题是它们只会占用最小空间而不是填充以匹配超级标题宽度。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T00:14:50.713

您是否考虑过使用`DataGrid`控件（[文档](http://msdn.microsoft.com/en-us/library/system.windows.controls.datagrid.aspx)）？

您可以创建一个类来保存您的标题。例如：

```
public class BiologicalClassification
{
    public string Kingdom { get; set; }
    public string Phylum { get; set; }
    public string Class { get; set; }
    public string Order { get; set; }
    public string Family { get; set; }
    public string Genus { get; set; }
    public string Species { get; set; }
} 
```

然后，您可以将所有标头数据存储`List<BiologicalClassification>`在代码隐藏或视图模型中。

然后您可以`DataGrid`使用绑定在 a 中显示此数据：

```
<DataGrid ItemsSource="{Binding BiologicalClassifications}"
          AutoGenerateColumns="False"
          GridLinesVisibility="None">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Kingdom" Binding="{Binding Kingdom}"/>
        <DataGridTextColumn Header="Phylum" Binding="{Binding Phylum}" />
        ...
    </DataGrid.Columns>
</DataGrid> 
```

这将确保您的超级标题（在此示例中为 Kingdom）始终是恒定宽度。与其余标题相同。

# rest - 来自 RESTful API 的分页响应负载

> ID：12168624
> 
> 赞同：93
> 
> 时间：2012-08-28T22:47:57.100
> 
> 标签：rest, pagination

我想在我的 RESTful API 中支持分页。

我的 API 方法应该通过`/products/index`. 但是，可能有数千种产品，我想对它们进行分页，所以我的请求应该如下所示：

```
/products/index?page_number=5&page_size=20 
```

但是我的 JSON 响应需要是什么样的？API 使用者通常会期望响应中的分页元数据吗？还是只需要一系列产品？为什么？

看起来 Twitter 的 API 包含元数据：[https](https://dev.twitter.com/docs/api/1/get/lists/members) ://dev.twitter.com/docs/api/1/get/lists/members （请参阅示例请求）。

使用元数据：

```
{
  "page_number": 5,
  "page_size": 20,
  "total_record_count": 521,
  "records": [
    {
      "id": 1,
      "name": "Widget #1"
    },
    {
      "id": 2,
      "name": "Widget #2"
    },
    {
      "id": 3,
      "name": "Widget #3"
    }
  ]
} 
```

只是一个产品数组（没有元数据）：

```
[
  {
    "id": 1,
    "name": "Widget #1"
  },
  {
    "id": 2,
    "name": "Widget #2"
  },
  {
    "id": 3,
    "name": "Widget #3"
  }
] 
```

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-08-29T05:01:46.777

ReSTful API 主要由其他系统使用，这就是我将分页数据放在响应标头中的原因。但是，某些 API 使用者可能无法直接访问响应标头，或者可能正在您的 API 上构建 UX，因此提供一种（按需）检索 JSON 响应中的元数据的方法是一个优势。

我相信你的实现应该包括机器可读的元数据作为默认值，并在请求时包括人类可读的元数据。如果您愿意，可以随每个请求返回人类可读的元数据，或者最好通过查询参数按需返回，例如`include=metadata`or `include_metadata=true`。

在您的特定场景中，我会在记录中包含每个产品的 URI。这使 API 使用者可以轻松地创建指向各个产品的链接。我还会根据我的寻呼请求的限制设置一些合理的期望。实施和记录页面大小的默认设置是一种可接受的做法。例如，[GitHub 的 API](http://developer.github.com/v3/#pagination)将默认页面大小设置为 30 条记录，最多 100 条，另外还设置了查询 API 次数的速率限制。如果您的 API 具有默认页面大小，则查询字符串可以只指定页面索引。

在人类可读的场景中，当导航到 时`/products?page=5&per_page=20&include=metadata`，响应可能是：

```
{
  "_metadata": 
  {
      "page": 5,
      "per_page": 20,
      "page_count": 20,
      "total_count": 521,
      "Links": [
        {"self": "/products?page=5&per_page=20"},
        {"first": "/products?page=0&per_page=20"},
        {"previous": "/products?page=4&per_page=20"},
        {"next": "/products?page=6&per_page=20"},
        {"last": "/products?page=26&per_page=20"},
      ]
  },
  "records": [
    {
      "id": 1,
      "name": "Widget #1",
      "uri": "/products/1"
    },
    {
      "id": 2,
      "name": "Widget #2",
      "uri": "/products/2"
    },
    {
      "id": 3,
      "name": "Widget #3",
      "uri": "/products/3"
    }
  ]
} 
```

对于机器可读的元数据，我会在响应中添加[链接头：](http://www.rfc-editor.org/rfc/rfc5988.txt)

```
Link: </products?page=5&perPage=20>;rel=self,</products?page=0&perPage=20>;rel=first,</products?page=4&perPage=20>;rel=previous,</products?page=6&perPage=20>;rel=next,</products?page=26&perPage=20>;rel=last 
```

*（链接标头值应为 urlencoded）*

...`total-count`如果您选择，可能还有自定义响应标头：

```
total-count: 521 
```

以人为中心的元数据中显示的其他分页数据对于以机器为中心的元数据可能是多余的，因为链接标题让我知道我在哪个页面以及每页的数量，并且我可以快速检索数组中的记录数. 因此，我可能只会为总数创建一个标题。您可以随时改变主意并添加更多元数据。

*顺便说一句，您可能会注意到我`/index`从您的 URI 中删除了。一个普遍接受的约定是让您的 ReST 端点公开集合。最后`/index`有点混乱。*

这些只是我在使用/创建 API 时喜欢的一些东西。希望有帮助！

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-08-29T00:13:39.573

作为编写了多个使用 REST 服务的库的人，让我从客户的角度来说明为什么我认为将结果包装在元数据中是可行的方法：

*   没有总计数，客户端怎么知道它还没有收到所有的东西，应该继续对结果集进行分页？在没有执行前瞻到下一页的 UI 中，在最坏的情况下，这可能表示为实际上没有获取更多数据的 Next/More 链接。
*   在响应中包含元数据允许客户端跟踪较少的状态。现在我不必将我的 REST 请求与响应匹配，因为响应包含重建请求状态所需的元数据（在本例中是光标进入数据集）。
*   如果状态是响应的一部分，我可以同时对同一个数据集执行多个请求，并且我可以按照它们碰巧到达的任何顺序处理请求，不一定是我发出请求的顺序。

还有一个建议：像[Twitter API](https://dev.twitter.com/overview/api/cursoring)一样，您应该将 page_number 替换为直接索引/光标。原因是，API 允许客户端根据请求设置页面大小。返回的 page_number 是客户端到目前为止请求的页数，还是给出最后使用的 page_size 的页数（几乎可以肯定是后者，但为什么不完全避免这种歧义）？

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2016-08-02T13:41:20.407

我建议添加相同的标题。将元数据移动到标头有助于摆脱像`result`、`data`或之类的信封，`records`并且响应正文仅包含我们需要的数据。如果您也生成分页链接，则可以使用[链接](https://www.w3.org/wiki/LinkHeader)标题。

```
 HTTP/1.1 200
    Pagination-Count: 100
    Pagination-Page: 5
    Pagination-Limit: 20
    Content-Type: application/json

    [
      {
        "id": 10,
        "name": "shirt",
        "color": "red",
        "price": "$23"
      },
      {
        "id": 11,
        "name": "shirt",
        "color": "blue",
        "price": "$25"
      }
    ] 
```

详情请参阅：

[https://github.com/adnan-kamili/rest-api-response-format](https://github.com/adnan-kamili/rest-api-response-format)

对于招摇文件：

[https://github.com/adnan-kamili/swagger-response-template](https://github.com/adnan-kamili/swagger-response-template)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-12T19:55:37.590

只需将您的后端 API 新属性添加到响应正文中。从示例.net核心：

```
[Authorize]
[HttpGet]
public async Task<IActionResult> GetUsers([FromQuery]UserParams userParams)
{
  var users = await _repo.GetUsers(userParams);
  var usersToReturn = _mapper.Map<IEnumerable<UserForListDto>>(users);

  // create new object and add into it total count param etc
  var UsersListResult = new
  {
    usersToReturn,
    currentPage = users.CurrentPage,
    pageSize = users.PageSize,
    totalCount = users.TotalCount,
    totalPages = users.TotalPages
  };

  return Ok(UsersListResult);
} 
```

[在身体反应中，它看起来像这样](https://i.stack.imgur.com/qg4wG.png)

```
{
"usersToReturn": [
    {
        "userId": 1,
        "username": "nancycaldwell@conjurica.com",
        "firstName": "Joann",
        "lastName": "Wilson",
        "city": "Armstrong",
        "phoneNumber": "+1 (893) 515-2172"
    },
    {
        "userId": 2,
        "username": "zelmasheppard@conjurica.com",
        "firstName": "Booth",
        "lastName": "Drake",
        "city": "Franks",
        "phoneNumber": "+1 (800) 493-2168"
    }
],
// metadata to pars in client side
"currentPage": 1,
"pageSize": 2,
"totalCount": 87,
"totalPages": 44 
```

}

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2019-07-19T01:19:17.440

通常，我通过简单的方式制作，无论如何，我使用这些参数创建一个restAPI端点，例如“localhost/api/method/:lastIdObtained/:countDateToReturn”，你可以做一个简单的请求。在服务中，例如。。网

```
jsonData function(lastIdObtained,countDatetoReturn){
'... write your code as you wish..'
and into select query make a filter
select top countDatetoreturn tt.id,tt.desc
 from tbANyThing tt
where id > lastIdObtained
order by id
} 
```

在Ionic中，当我从下到上滚动时，我传递零值，当我得到答案时，我设置最后获得的id的值，当我从上到下滑动时，我传递我得到的最后一个注册id

# ruby-on-rails - 找不到没有 ID 的客户

> ID：12168630
> 
> 赞同：0
> 
> 时间：2012-08-28T22:48:52.133
> 
> 标签：ruby-on-rails, ruby, controller

我有一个非常简单的应用程序，其流程如下所示：

用户阅读一些副本，决定他们要购买产品并填写表格，请参阅确认页面。

我的控制器出了点问题，但我无法确定我在哪里得到了错误`Couldn't find Customer without an ID.`

```
class CustomersController < ApplicationController
#  before_filter :load_customer, :only => :show

  def new
    @customer = Customer.new
  end

  def create
    @customer = Customer.new(params[:customer])

    if @customer.save
      session[:customer_id] = @customer.id
      purchase
    else
      flash[:error] = "Please enter a valid email address"
      redirect_to :signup
    end
  end

  def signup
    @customer = Customer.new
  end

  def purchase
    Stripe.api_key = STRIPE['secret']
    charge = Stripe::Charge.create(
    :amount => 2000,
    :currency => "usd",
    :card => params[:stripe_token],
    :description => "My Product Name"
    )
    redirect_to receipt_path
  end

  def receipt
    @customer = Customer.find(session[:customer_id])

    @name = @customer.name
    @email = @customer.email
    @product = @customer.product
  end

  # private
  # 
  # def load_customer
  #   @customer = Customer.find(session[:customer_id])
  #   redirect_to request.path.gsub(params[:id], session[:customer_id].to_s) if params[:id] != session[:customer_id].to_s
  # end

end 
```

我不确定事情在哪里搞砸了，经过大量谷歌搜索，我转向你们。帮助将是巨大的。

编辑：

咨询 Rails 控制台表明我的应用程序由于某种原因没有创建新的客户记录。*但是，*充电工作正常。未创建的客户必须是这方面的先驱。

编辑 2：Development.log

```
Started GET "/assets/bootstrap.js?body=1" for 127.0.0.1 at 2012-08-28 15:58:11 -0700
Served asset /bootstrap.js - 304 Not Modified (0ms)
[2012-08-28 15:58:11] WARN  Could not determine content-length of response body. Set content-length of the response or set Response#chunked = true

Started POST "/checkout" for 127.0.0.1 at 2012-08-28 15:58:12 -0700
Processing by CustomersController#purchase as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"k2aW/CAkNfwDSMHHvzbuOwm+Xua0qb2LJ4LtrtRvyvk=", "customer"=>{"name"=>"Your name", "email"=>"yourname@example.com"}, "stripe_token"=>"tok_0GUvwKPwo6jfEu"}
Redirected to http://localhost:3000/receipt
Completed 302 Found in 1064ms (ActiveRecord: 0.0ms)

Started GET "/receipt" for 127.0.0.1 at 2012-08-28 15:58:14 -0700
Processing by CustomersController#receipt as HTML
Completed 500 Internal Server Error in 0ms

ActiveRecord::RecordNotFound (Couldn't find Customer without an ID):
  app/controllers/customers_controller.rb:38:in `receipt'

  Rendered /Users/zack/.rvm/gems/ruby-1.9.3-p194@beat-the-herd/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_trace.erb (3.9ms)
  Rendered /Users/zack/.rvm/gems/ruby-1.9.3-p194@beat-the-herd/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (5.6ms)
  Rendered /Users/zack/.rvm/gems/ruby-1.9.3-p194@beat-the-herd/gems/actionpack-3.2.2/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (23.7ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:59:57.577

如果用户直接执行`receipt`操作，则`session[:customer_id]`可能为零。这就是你得到错误的原因。如果发出`create`（可能）POST 请求，则不会发生这种情况。在这种情况下，会话变量在重定向到`receipt`操作之前已被填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T22:51:35.807

这一行：

```
@customer = Customer.find(session[:customer_id]) 
```

抛出错误，因为 session[:customer_id] 为 nil

您可能希望使用不会抛出异常但会返回 nil 记录的 find_by_id。

然后你将不得不处理@customer 为零的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-01T18:11:31.030

在 UserController 中添加这个

```
def show <br>
@user = User.find(session[:user_id])<br>
@profile = @user.profile<br>
end 
```

而不是把“user_id”放在 session[:user_id]
它对我有用

# google-chrome - 无论如何都可以在不访问谷歌应用商店的情况下安装扩展程序？

> ID：12168631
> 
> 赞同：2
> 
> 时间：2012-08-28T22:49:04.103
> 
> 标签：google-chrome, google-chrome-extension, chrome-web-store

无论如何都可以在不访问谷歌应用商店的情况下安装扩展程序？例如，我想要访问者，是否可以通过单击 Facebook 广告或横幅来安装我的扩展？

可能吗？

我读了一些文章，提到要验证网站所有权来做到这一点。但我想在 facebook 上做广告，所以我不会是网页的所有者......

有没有人有关于这个主题的信息？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:05:44.907

*   右键单击 Chrome 快捷方式
*   在目标字段中，`--enable-easy-off-store-extension-install`在已经存在的内容之后添加，在之前留一个空格
*   保存并启动 Chrome

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T23:55:58.367

您可能正在寻找[*内联安装*](https://developers.google.com/chrome/web-store/docs/inline_installation)，通过`chrome.webstore.install`.

在您的网页中：

*   include `<link rel="chrome-webstore-item" href="https://chrome.google.com/webstore/detail/itemID">`，其中 URL 是您的扩展程序的地址

*   然后。打电话`chrome.webstore.install()`。

不幸的是，你不能在基本的 Facebook 页面上做这些事情，但你可以在一个你可以完全控制的网页上做。

# java - 带有 Spring 和多个用户的 Vaadin

> ID：12168632
> 
> 赞同：2
> 
> 时间：2012-08-28T22:49:04.873
> 
> 标签：java, spring, vaadin

我的新 Vaadin 项目有一个非常奇怪的问题。如果我启动我的应用程序并使用用户登录，然后切换浏览器并再次打开站点，似乎会话将被共享。我在两个 Windows 中都有相同的内容。

我读了一些关于这个问题的论坛帖子，他们都说不要在同一个浏览器中打开应用程序。好的，我启动了一个虚拟机，但是，同样的问题。或者，从上下文中删除所有静态变量。我已经做到了，现在使用 ThreadLocal-Pattern。

我完全不知道出了什么问题。我相信 Spring Context 杀死了 Vaadin，有没有人有过 Vaadin 和 Spring 的这种经历？

为了将 Spring 和 Vaadin 结合在一起，我使用 Nicolas Frankel 的 Spring Intgration Addon for Vaadin (https://vaadin.com/directory#addon/spring-integration)

我将发布我的申请代码以供进一步调查。

====================

Vaadin 应用程序类：

```
public class MainApplication extends Application implements HttpServletRequestListener    {
private static final long serialVersionUID = 2067470624065324231L;

private static ThreadLocal<MainApplication> threadLocal = new ThreadLocal<MainApplication>();

private Window mainWindow;

//Viewmanager
private ViewManager viewManager;

private Professor professor;

//DAO Classes and Bean Setter´s
ProfessorDAO professorDAO;
QuestionDAO questionDAO;
AnswerDAO answerDAO;
AnsweredDAO answeredDAO;
QRCodeDAO qrCodeDAO;

public void setProfessorDAO(ProfessorDAO professorDAO) {
    System.out.println("Setting ProfessorDAO!");
    System.out.println(professorDAO.toString());
    this.professorDAO = professorDAO;
}

public void setQuestionDAO(QuestionDAO questionDAO) {
    System.out.println("Setting QuestionDAO!");
    System.out.println(questionDAO.toString());
    this.questionDAO = questionDAO;
}

public void setAnswerDAO(AnswerDAO answerDAO) {
    System.out.println("Setting AnswerDAO!");
    System.out.println(answerDAO.toString());
    this.answerDAO = answerDAO;
}

public void setAnsweredDAO(AnsweredDAO answeredDAO) {
    System.out.println("Setting AnsweredDAO!");
    System.out.println(answeredDAO.toString());
    this.answeredDAO = answeredDAO;
}

public void setQrCodeDAO(QRCodeDAO qrCodeDAO) {
    System.out.println("Setting QRCodeDAO!");
    System.out.println(qrCodeDAO.toString());
    this.qrCodeDAO = qrCodeDAO;
}

public ProfessorDAO getProfessorDAO() {
    return professorDAO;
}

public QuestionDAO getQuestionDAO() {
    return questionDAO;
}

public AnswerDAO getAnswerDAO() {
    return answerDAO;
}

public AnsweredDAO getAnsweredDAO() {
    return answeredDAO;
}

public QRCodeDAO getQrCodeDAO() {
    return qrCodeDAO;
}

//Currently logged in Professor.
public Professor getProfessor() {
    return professor;
}

public void setProfessor(Professor professor) {
    this.professor = professor;
}

public static void setInstance(MainApplication application){
    threadLocal.set(application);
}

public ViewManager getViewManager() {
    return viewManager;
}

public void setViewManager(ViewManager viewManager) {
    this.viewManager = viewManager;
}

public static MainApplication getInstance(){
    return threadLocal.get();
}

public MainApplication() {
}

@Override
public void init() {
    setInstance(this);

    setTheme("crs");

    mainWindow = new Window("CRS -- Classroom Response System");
    setMainWindow(mainWindow);

    viewManager = new ViewManager(mainWindow);

    viewManager.switchScreen(LoginScreen.class.getName(), new LoginScreen());

    //mainWindow = new MainWindow("CRS -- Classroom Response System");
    //setMainWindow(mainWindow);

}

public void onRequestStart(HttpServletRequest request,
        HttpServletResponse response) {
    MainApplication.setInstance(this);

}

public void onRequestEnd(HttpServletRequest request,
        HttpServletResponse response) {
    threadLocal.remove();

} 
```

web.xml：

```
<display-name>CRSServer</display-name>

<context-param>
    <description>
    Vaadin production mode</description>
    <param-name>productionMode</param-name>
    <param-value>false</param-value>
</context-param>

<servlet>
    <servlet-name>CRS</servlet-name>
    <servlet-class>ch.frankel.vaadin.spring.SpringApplicationServlet</servlet-class>
    <init-param>
        <description>
        Vaadin application class to start</description>
        <param-name>applicationBeanName</param-name>
        <param-value>cs.hm.edu.kreipl.crs.frontend.MainApplication</param-value>
    </init-param>

    <init-param>
        <description>
        Application widgetset</description>
        <param-name>widgetset</param-name>
        <param-value>cs.hm.edu.kreipl.crs.widgetset.CrsserverWidgetset</param-value>
    </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>CRS</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>

<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>  
    <param-value>WEB-INF/spring-config.xml</param-value>
</context-param> 
```

春天的背景

```
<context:component-scan base-package="cs.hm.edu.kreipl.crs" />
<bean id="myDataSource"
    class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName"
        value="com.mysql.jdbc.Driver">
    </property>
    <property name="url" value="jdbc:mysql://localhost:3306/crs"></property>
    <property name="username" value="crs"></property>
    <property name="password" value="password"></property>
</bean>

<bean id="mySessionFactory" class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean">
    <property name="dataSource" ref="myDataSource"/>
    <property name="annotatedClasses">
        <list>
            <value>cs.hm.edu.kreipl.crs.database.entity.Professor</value>
            <value>cs.hm.edu.kreipl.crs.database.entity.Answer</value>
            <value>cs.hm.edu.kreipl.crs.database.entity.Answered</value>
            <value>cs.hm.edu.kreipl.crs.database.entity.Question</value>
            <value>cs.hm.edu.kreipl.crs.database.entity.QuestionQRCode</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQL5Dialect</prop>
            <prop key="hibernate.show_sql">true</prop>
            <prop key="hbm2ddl.auto">create</prop>
    </props>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
    <property name="sessionFactory" ref="mySessionFactory" />
</bean>

<tx:annotation-driven/>

<!-- VAADIn Startup -->
<bean id="cs.hm.edu.kreipl.crs.frontend.MainApplication" class="cs.hm.edu.kreipl.crs.frontend.MainApplication">
    <property name="answerDAO" ref="answerDAO" />
    <property name="answeredDAO" ref="answeredDAO" />
    <property name="professorDAO" ref="professorDAO" />
    <property name="qrCodeDAO" ref="qrCodeDAO" />
    <property name="questionDAO" ref="questionDAO" />
</bean>

<bean id="professorDAO" class="cs.hm.edu.kreipl.crs.database.implementation.ProfessorDAOImpl">
    <constructor-arg>
        <value>cs.hm.edu.kreipl.crs.database.entity.Professor</value>
    </constructor-arg>
    <property name="hibernateTemplate" ref="mySessionFactory"/>
</bean>
<bean id="questionDAO" class="cs.hm.edu.kreipl.crs.database.implementation.QuestionDAOImpl">
    <constructor-arg>
        <value>cs.hm.edu.kreipl.crs.database.entity.Question</value>
    </constructor-arg>
    <property name="hibernateTemplate" ref="mySessionFactory"/>
</bean>
<bean id="qrCodeDAO" class="cs.hm.edu.kreipl.crs.database.implementation.QRCodeDAOImpl">
    <constructor-arg>
        <value>cs.hm.edu.kreipl.crs.database.entity.QuestionQRCode</value>
    </constructor-arg>
    <property name="hibernateTemplate" ref="mySessionFactory"/>
</bean>
<bean id="answerDAO" class="cs.hm.edu.kreipl.crs.database.implementation.AnswerDAOImpl">
    <constructor-arg>
        <value>cs.hm.edu.kreipl.crs.database.entity.Answer</value>
    </constructor-arg>
    <property name="hibernateTemplate" ref="mySessionFactory"/>
</bean>
<bean id="answeredDAO" class="cs.hm.edu.kreipl.crs.database.implementation.AnsweredDAOImpl">
    <constructor-arg>
        <value>cs.hm.edu.kreipl.crs.database.entity.Answered</value>
    </constructor-arg>
    <property name="hibernateTemplate" ref="mySessionFactory"/>
</bean>
<bean id="deviceDAO" class="cs.hm.edu.kreipl.crs.database.implementation.DeviceDAOImpl">
    <constructor-arg>
        <value>cs.hm.edu.kreipl.crs.database.entity.Device</value>
    </constructor-arg>
    <property name="hibernateTemplate" ref="mySessionFactory"/>
</bean> 
```

如果您需要任何进一步的课程，请让我现在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:48:31.367

我正在使用 Vaadin + Spring 但没有 Spring Integration Addon。我认为问题在于您没有为请求应用程序的新用户创建新的 Vaadin applicationBean。

在我的应用程序中，我在 web.xml 中传递了 applicationBean。我的 Vaadin 应用程序带有注释：

**应用类**

```
@Component(value = "appName")
@Scope(value = "session")
class AppName extends Application {
....
} 
```

**WEB.XML**

```
 <init-param>
        <param-name>applicationBean</param-name>
        <param-value>appName</param-value>
    </init-param> 
```

并且对于每个新会话 Servlet 都会返回新的应用程序。在您的 web.xml 中，您可以像这样传递您的 vaadin 应用程序：

**您的 WEB.XML**

```
 <init-param>
        <description>
        Vaadin application class to start</description>
        <param-name>applicationBeanName</param-name>
        <param-value>cs.hm.edu.kreipl.crs.frontend.MainApplication</param-value>
    </init-param> 
```

因此，它**每次都会**为所有用户返回相同的应用程序。这就是我认为导致问题的原因。

# forms - 为什么 Google Analytics 值会在表单提交中传递？

> ID：12168633
> 
> 赞同：0
> 
> 时间：2012-08-28T22:49:06.140
> 
> 标签：forms, cookies, get, google-analytics

我公司的应用程序构建了简单的表单，人们可以在他们的网站上使用这些表单将信息输入我们的应用程序。我们有一个通用的表单响应脚本，这些表单中的每一个都提交给它，以收集和解析网络表单响应。

我们遇到的表单值看起来很像 Google Analytics cookie（utmz、utmsc、utmccn）中的值。这些 cookie 显然不是表单字段的一部分。该表单是通过一个简单的 HTML 表单提交完成的，所以我不知道这些值是如何附加到帖子上的。

这是一个示例表单提交：

```
http://website.com/submit.php?&clientGuid=2342342abcde23423423&webformid=12&prospect_id=12345&custom_Register_or_Dance_the_Chicken=Register&__utma=84164169.205192989.1344888984.1346176569.1346178936.47&__utmc=84164169&__utmz=84164169.1344888984.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none) 
```

在什么情况下浏览器会在提交表单的同时提交 cookie？有没有办法防止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T22:50:18.480

这可能是由于谷歌浏览器在提交时将它们添加到您的表单变量中......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T04:09:10.247

这看起来像跨域用户跟踪...来自[_linkByPost()](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiDomainDirectory#_gat.GA_Tracker_._linkByPost)的 Google Analytics 文档：

> _linkByPost [()](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiDomainDirectory#_gat.GA_Tracker_._linkByPost)方法将 GATC cookie 从引用表单传递到附加到表单操作值 (HTTP POST) 的字符串中的另一个站点。

如果表单上没有`onsubmit='...'`直接的代码，它可能是通过 jQuery 或其他方法附加的。

# java - Java Play2 - 允许 Json RPC 调用？

> ID：12168637
> 
> 赞同：0
> 
> 时间：2012-08-28T22:49:19.803
> 
> 标签：java, javascript, json, playframework-2.0, text-editor

我正在寻找一个 javascript 富文本编辑器。到目前为止，我尝试了 Tinymce 和 ckeditor，但没有任何成功。

如果我用纯 html 编写它，它会起作用，但在 play2 中我只会遇到很多错误。

那么[http://www.tinymce.com/wiki.php/MCImageManager:FAQ](http://www.tinymce.com/wiki.php/MCImageManager:FAQ)告诉我我应该允许 json rpc 调用，这在 play2 中可能吗？

或者您在 play2 中使用哪个文本编辑器？

# ms-access - Microsoft Access 2007：我可以使 Access 的行为与任何其他临时查询编辑器一样吗？

> ID：12168638
> 
> 赞同：0
> 
> 时间：2012-08-28T22:49:21.193
> 
> 标签：ms-access, ms-access-2007

使用 Access 很痛苦，imo。我习惯于像 Benthic、Toad、Oracle SQL Developer、SQLA 等临时实用程序。相比之下，Microsoft Access 就像是孩子的玩具。我想要一个功能齐全的 SQL 编辑器，它不会假设我正在尝试创建一个视图样式的查询，其唯一目的是作为我的数据库中返回数据的永久装置存在。我希望能够在一个窗格中写出多个查询，然后在我要执行的 SQL 上按 F9。我也希望能够缩进我的 SQL。

我错过了 Access 的高级功能，还是真的像 Access 一样简单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T04:46:09.097

您当然可以在查询构建器中输入自由格式的 SQL（`Create`> `Query Design`，然后单击`SQL`）。

你得到这个：

![在此处输入图像描述](../Images/0f73b1438f19adfeae825e0aae897ab1.png)

您可以自由地以您想要的格式输入 SQL，其中可以包括子查询（如上例所示）。

如果您不打算保存 SQL，那么只需在 SQL 视图中构建一次性查询。如果您保存查询，请注意 Access 将重新格式化您的 SQL 语句。

作为替代方案，有大量 SQL 查询工具可以与 ODBC 一起使用，因此应该可以在 Access 上正常工作。我会尝试一些，找到一个你喜欢的，然后你可以在你的所有系统上使用它，包括 MySql、SQL、Access 等。

访问往往更像是一种最终用户工具。因此，虽然您可以输入原始 SQL，但 Access 中的大多数用户通常更喜欢在设计视图中使用查询设计器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T23:04:23.413

adosqlconsole 是一个工具，您可以在其中针对 odbc 数据库手动运行 sql。我刚用过，还不错。比在 gui 中创建查询要好得多。有些人认为您可以进入查询设计模式，然后切换到 sql 视图，然后运行查询而不保存它。对我来说，这只是额外无用的点击和鼠标和键盘之间的切换，没有充分的理由。我不确定该工具是否具有您想要的所有功能，但与访问查询生成器垃圾相比，这是一个很好的变化。

# python - 熊猫（python）：如何将列添加到数据框以进行索引？

> ID：12168648
> 
> 赞同：61
> 
> 时间：2012-08-28T22:50:21.203
> 
> 标签：python, indexing, dataframe, pandas

我在数据框中的索引（有 30 行）的形式是：

```
Int64Index([171, 174,173, 172, 199..............
        ....175, 200]) 
```

索引没有严格增加，因为数据框是 sort() 的输出。我想添加一个系列的列：

```
[1, 2, 3, 4, 5......................., 30] 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-08-29T03:13:24.517

怎么样：

```
df['new_col'] = range(1, len(df) + 1) 
```

或者，如果您希望索引成为排名并将原始索引存储为列：

```
df = df.reset_index() 
```

* * *

## 回答 #2

> 赞同：92
> 
> 时间：2013-10-13T18:57:05.170

我在尝试做同样的事情时偶然发现了这个问题（我认为）。这是我的做法：

```
df['index_col'] = df.index 
```

然后，您可以根据需要对新的索引列进行排序。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-08-28T23:13:56.213

这个怎么样：

```
from pandas import *

idx = Int64Index([171, 174, 173])
df = DataFrame(index = idx, data =([1,2,3]))
print df 
```

它给了我：

```
 0
171  1
174  2
173  3 
```

这是你想要的？

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-10-20T19:21:22.440

这样做的方法是：

重置索引：

```
df.reset_index(drop=True, inplace=True) 
```

对索引进行排序：

```
df.sort_index(inplace=True) 
```

从列设置新索引：

```
df.set_index('column_name', inplace=True) 
```

从范围设置新索引：

```
df.index = range(1, 31, 1) #a range starting at one ending at 30 with a stepsize of 1. 
```

根据列值对数据框进行排序：

```
df.sort_values(by='column_name', inplace=True) 
```

重新分配变量也有效：

```
df=df.reset_index(drop=True)
df=df.sort_index()
df=df.set_index('column_name')
df.index = range(1, 31, 1) #a range starting at one ending at 30 with a stepsize of 1.
df=df.sort_values(by='column_name') 
```

# c# - 使用lockbits的图像处理，getpixel的替代品？

> ID：12168654
> 
> 赞同：6
> 
> 时间：2012-08-28T22:50:50.703
> 
> 标签：c#, image, image-processing

我正在尝试使用锁定位来增加我的图像检测类，但这会导致代码出现问题，因此它无法运行。我怎样才能同时使用 lockbits 和 getpixel 以加快图像检测速度，或者有人可以告诉我一个同样快的替代方案吗？

代码：

```
static IntPtr Iptr = IntPtr.Zero;
    static BitmapData bitmapData = null;
    static public byte[] Pixels { get; set; }
    static public int Depth { get; private set; }
    static public int Width { get; private set; }
    static public int Height { get; private set; }

    static public void LockBits(Bitmap source)

    {
            // Get width and height of bitmap
            Width = source.Width;
            Height = source.Height;

            // get total locked pixels count
            int PixelCount = Width * Height;

            // Create rectangle to lock
            Rectangle rect = new Rectangle(0, 0, Width, Height);

            // get source bitmap pixel format size
            Depth = System.Drawing.Bitmap.GetPixelFormatSize(source.PixelFormat);

            // Lock bitmap and return bitmap data
            bitmapData = source.LockBits(rect, ImageLockMode.ReadWrite,
                                         source.PixelFormat);

            // create byte array to copy pixel values
            int step = Depth / 8;
            Pixels = new byte[PixelCount * step];
            Iptr = bitmapData.Scan0;

            // Copy data from pointer to array
            Marshal.Copy(Iptr, Pixels, 0, Pixels.Length);

    }

     static public bool SimilarColors(int R1, int G1, int B1, int R2, int G2, int B2, int Tolerance)
    {
        bool returnValue = true;
        if (Math.Abs(R1 - R2) > Tolerance || Math.Abs(G1 - G2) > Tolerance || Math.Abs(B1 - B2) > Tolerance)
        {
            returnValue = false;
        }
        return returnValue;
    }

     public bool findImage(Bitmap small, Bitmap large, out Point location)
     {
         unsafe
         {
             LockBits(small);
             LockBits(large);
             //Loop through large images width
             for (int largeX = 0; largeX < large.Width; largeX++)
             {
                 //And height
                 for (int largeY = 0; largeY < large.Height; largeY++)
                 {
                     //Loop through the small width
                     for (int smallX = 0; smallX < small.Width; smallX++)
                     {
                         //And height
                         for (int smallY = 0; smallY < small.Height; smallY++)
                         {
                             //Get current pixels for both image
                             Color currentSmall = small.GetPixel(smallX, smallY);
                             Color currentLarge = large.GetPixel(largeX + smallX, largeY + smallY);
                             //If they dont match (i.e. the image is not there)

                             if (!colorsMatch(currentSmall, currentLarge))
                                 //Goto the next pixel in the large image

                                 goto nextLoop;
                         }
                     }
                     //If all the pixels match up, then return true and change Point location to the top left co-ordinates where it was found
                     location = new Point(largeX, largeY);
                     return true;
                 //Go to next pixel on large image
                 nextLoop:
                     continue;
                 }
             }
             //Return false if image is not found, and set an empty point
             location = Point.Empty;
             return false;
         }
     } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T00:26:23.600

您不想依赖 getPixel() 进行图像处理；偶尔调用来获取点值是可以的（例如，在鼠标悬停时），但一般来说，最好在图像内存或某些二维数组中进行图像处理，必要时可以将其转换为位图。

首先，您可以尝试编写一个使用 LockBits/UnlockBits 来提取便于操作的数组的方法。完成对数组的操作后，可以使用不同的 LockBits/UnlockBits 函数将其写回位图。

这是我过去使用的一些示例代码。第一个函数从位图中返回一维值数组。由于您知道位图的宽度，因此可以将此一维数组转换为二维数组以进行进一步处理。完成处理后，您可以调用第二个函数将（修改后的）一维数组再次转换为位图。

```
public static byte[] Array1DFromBitmap(Bitmap bmp){
    if (bmp == null) throw new NullReferenceException("Bitmap is null");

    Rectangle rect = new Rectangle(0, 0, bmp.Width, bmp.Height);
    BitmapData data = bmp.LockBits(rect, ImageLockMode.ReadWrite, bmp.PixelFormat);
    IntPtr ptr = data.Scan0;

    //declare an array to hold the bytes of the bitmap
    int numBytes = data.Stride * bmp.Height;
    byte[] bytes = new byte[numBytes];

    //copy the RGB values into the array
    System.Runtime.InteropServices.Marshal.Copy(ptr, bytes, 0, numBytes);

    bmp.UnlockBits(data);

    return bytes;           
}

public static Bitmap BitmapFromArray1D(byte[] bytes, int width, int height)
{
    Bitmap grayBmp = new Bitmap(width, height, PixelFormat.Format8bppIndexed);
    Rectangle grayRect = new Rectangle(0, 0, grayBmp.Width, grayBmp.Height);
    BitmapData grayData = grayBmp.LockBits(grayRect, ImageLockMode.ReadWrite, grayBmp.PixelFormat);
    IntPtr grayPtr = grayData.Scan0;

    int grayBytes = grayData.Stride * grayBmp.Height;
    ColorPalette pal = grayBmp.Palette;

    for (int g = 0; g < 256; g++){
        pal.Entries[g] = Color.FromArgb(g, g, g);
    }

    grayBmp.Palette = pal;

    System.Runtime.InteropServices.Marshal.Copy(bytes, 0, grayPtr, grayBytes);

    grayBmp.UnlockBits(grayData);
    return grayBmp;
} 
```

这些方法对 Bitmap 像素格式做了一些假设，可能对您不起作用，但我希望总体思路很清楚：使用 LockBits/UnlockBits 从 Bitmap 中提取字节数组，以便您可以最轻松地编写和调试算法，并且然后再次使用 LockBits/UnlockBits 将数组再次写入位图。

为了可移植性，我建议您的方法返回所需的数据类型，而不是在方法本身中操作全局变量。

如果您一直在使用 getPixel()，那么如上所述在数组之间进行转换可以大大加快您的代码速度，而只需少量的编码工作投资。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T06:59:34.127

好的，从哪里开始。更好地理解你在用 lockBits 做什么。首先确保不要用它覆盖你的字节数组。

```
LockBits(small);              
LockBits(large); 
```

由于第二次通话，所有第一次通话都会锁定您的图像，这并不好，因为您不会再次解锁它。所以添加另一个代表图像的字节数组。你可以做这样的事情

```
LockBits(small, true);              
LockBits(large, false); 
```

并更改您的 Lockbits 方法

```
static public void LockBits(Bitmap source, bool flag)                        
{   
...
Marshal.Copy(Iptr, Pixels, 0, Pixels.Length);

if(flag)
   PixelsSmall=Pixels;
else
   PixelsLarge=Pixels;
} 
```

其中 PixelsLarge 和 PixelsSmall 是全局变量，而 Pixels 不是那些 2 包含您的图像。现在你必须比较它。现在您必须比较每个“字节集”，因此您必须知道 Pixelformat。是 32b/pix 24 还是只有 8 个（ARGB、RGB、灰度）让我们拍摄 ARGB 图像。在这种情况下，一组将由 4 个字节（=32/8）组成，我不确定顺序，但我认为一组的顺序是 ABGR 或 BGRA。

希望这可以帮助你。如果您不知道如何比较正确的像素，请再次询问。啊，别忘了使用 UnlockBits 命令。

# php - JS 对象 -> 来自 jquery ajax 的 JSON 提交 -> php 迭代

> ID：12168655
> 
> 赞同：0
> 
> 时间：2012-08-28T22:50:51.083
> 
> 标签：php, javascript, json, object, casting

我正在构建一个进程，其中 js 对象通过 ajax（POST 和 json 类型）提交到 php 文件，并且在迭代 php 中提交的内容时遇到问题。

我的对象如下所示：

```
var myObject = {
  "section1":{
  "subitem1":"value1",
  "subitem2":"value2"
 },
  "section2":{
  "subitem3":"value3",
  "subitem4":"value4"
 }
} 
```

我的 ajax 看起来像这样：

```
$.ajax({
url:"test.php?section=section2",
type:"POST",
dataType:"json",
success:function(data){
// what i do with the response data
},
data:myObject
}); 
```

这是我的php：

```
$section = $_GET['section'];
$json = json_decode($_POST[$section], true);

foreach($json as $key=>$value){
   //if this iteration works here, it'll be the happiest point of my day
} 
```

现在，在上面的 php 中，如果我将某个部分称为 $_POST['section2']，那么迭代确实有效。所以使用 PHP 的 variables 变量似乎是个问题，但我不知道....整个 $_POST 似乎也作为一个对象出现。JQUERY AJAX 会自动对我提交的对象执行 JSON.stringify 吗？我试过使用 stringify 但它没有用..我有最新版本的 chrome ......

另外，我也尝试在 $_POST 上使用 json_decode ......仍然 $_POST[$section] 被解释为空......

非常感谢任何帮助，建议，建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:06:26.927

这与您的想法不同，将对象字符串化并将其作为键/值对的一部分发送，然后从 post 字段中对其进行解码。

```
$.ajax({
    url:"test.php?section=section2",
    type:"POST",
    dataType:"json",
    success:function(data){
    // what i do with the response data
    },
    data:{json:JSON.stringify(myObject)}
}); 
```

```
$section = $_GET['section'];
$json = json_decode($_POST['json']);
$current_section = $json->{$section};

foreach($current_section as $key=>$value){
   //if this iteration works here, it'll be the happiest point of my day
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T23:01:54.613

假设 $_POST 数组只有一个值——对象——试试这个：

```
$section = $_GET['section'];
$tmpArray = json_decode(array_pop($_POST), true);
$json = $tmpArray[$section]; 
```

# jquery - 根据滚动条当前的位置更改内容？

> ID：12168656
> 
> 赞同：0
> 
> 时间：2012-08-28T22:50:52.453
> 
> 标签：jquery, scroll

有没有办法根据你向下滚动的距离来改变链接的颜色？我猜这会用jQuery来完成吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:18:48.223

您可以使用该`scrollTop`属性来查看页面向下滚动的距离。

jQuery：[http ://api.jquery.com/scrollTop/](http://api.jquery.com/scrollTop/)

Javascript：[https ://developer.mozilla.org/en-US/docs/DOM/element.scrollTop](https://developer.mozilla.org/en-US/docs/DOM/element.scrollTop)

和`$("html").scroll(function(){...});`滚动事件。

`$('a').css('color', 'blue')`改变颜色。

# c# - C#删除不允许的文件夹名称字符

> ID：12168657
> 
> 赞同：0
> 
> 时间：2012-08-28T22:50:58.330
> 
> 标签：c#, winforms, character, directory

> **可能重复：**
> [如何检查给定的字符串是否在 Windows 下是合法的（允许的）文件名？](https://stackoverflow.com/questions/62771/how-check-if-given-string-is-legal-allowed-file-name-under-windows)

我已经搜索过，花了几分钟谷歌搜索，但我无法将我发现的内容应用到我的上下文中......

```
string appPath = Path.GetDirectoryName(Application.ExecutablePath);
        string fname = projectNameBox.Text;
        if (projectNameBox.TextLength != 0)
        {

            File.Create(appPath + "\\projects\\" + fname + ".wtsprn"); 
```

所以，我正在检索 projectNameBox.Text 并创建一个以文本作为文件名的文件，但如果我包含一个 : 或一个 \ 或 / 等。它只会崩溃，这是正常的，因为那些是不允许的文件夹名称..我如何在文件创建之前检查文本并删除字符，或者更好的是，什么都不做并建议用户他不能使用这些字符？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:16:07.757

```
string appPath = Path.GetDirectoryName(Application.ExecutablePath);
string fname = projectNameBox.Text;

bool _isValid = true;
foreach (char c in Path.GetInvalidFileNameChars())
{
    if (projectNameBox.Text.Contains(c))
    {
        _isValid = false;
        break;
    }
}

if (!string.IsNullOrEmpty(projectNameBox.Text) && _isValid)
{
    File.Create(appPath + "\\projects\\" + fname + ".wtsprn");
}
else
{
    MessageBox.Show("Invalid file name.", "Error");
} 
```

或者，在第一条评论中提供的链接中有一个正则表达式示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T23:17:36.977

您可以从 TextBox 响应`TextChanged`事件`projectNameBox`以拦截对其内容所做的更改。这意味着您可以在稍后创建路径之前删除所有无效字符。

要创建事件处理程序，请在`projectNameBox`设计器中单击您的控件，单击窗口`Events`中的图标`Properties`，然后双击`TextChanged`下面出现的列表中的事件。以下是一些去除无效字符的代码的简短示例：

```
private void projectNameBox_TextChanged(object sender, EventArgs e)
{
    TextBox textbox = sender as TextBox;
    string invalid = new string(System.IO.Path.GetInvalidFileNameChars());
    Regex rex = new Regex("[" + Regex.Escape(invalid) + "]");
    textbox.Text = rex.Replace(textbox.Text, "");
} 
```

（您也需要`System.Text.RegularExpressions`在文件顶部使用 using 语句。）

# c# - C# .NET 中的编译问题

> ID：12168658
> 
> 赞同：0
> 
> 时间：2012-08-28T22:51:05.230
> 
> 标签：c#, .net

我有以下代码（从承包商继承）：

```
public partial class StoredProcedures  
{  
    #if NO_THREAD      
        readonly static String version = "XXXX, Version 1.02, Apr/29/2010";
    #else 
        readonly static String version = "XXXX, Version 0.93, Dec/21/2006";
    #endif 
```

我似乎在其他任何地方都找不到 NO_THREAD 。这是作为 SQL 程序集编译和安装的代码。它是特别的还是我错过了一些简单的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T23:04:52.367

尝试检查项目***属性->构建->常规->条件编译符号***，以查看您为项目拥有的所有构建配置，它可能在那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T23:01:50.603

寻找`#define`声明。请参阅#if 预处理器条件的文档：http: [//msdn.microsoft.com/en-us/library/4y6tbswk.aspx](http://msdn.microsoft.com/en-us/library/4y6tbswk.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T23:02:03.297

如果找不到

```
define #NO_THREAD 
```

在代码中的任何地方，这可能是因为承包商通过传递 /define 编译器选项来定义符号。

有关更多详细信息，请参见此处（从单元格中键入，对格式表示抱歉）：

[http://msdn.microsoft.com/en-us/library/0feaad6z.aspx](http://msdn.microsoft.com/en-us/library/0feaad6z.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-28T23:02:14.487

您可能应该看看 c#[预处理器指令](http://msdn.microsoft.com/en-us/library/ed8yd1ha%28v=vs.71%29.aspx)

`No_Thread`这是一个可以通过 using 定义的符号，`#define No_Thread`当`#define No_Thread`存在时`#if NO_THREAD`将导致 true 并且在编译时将编译`readonly static String version = "XXXX, Version 1.02, Apr/29/2010";`此语句，否则将编译下一条语句。

这通常用于区分调试版本和发布版本。您是否注意到创建新项目时 VS 中有 2 个版本。如果你在代码的某个地方写了这样的东西

```
 #if DEBUG
 Console.WriteLine("DEBUG VERSION");
 #endif 
```

那么该字符串`"DEBUG VERSION"`只会在项目处于调试模式时打印在控制台上，因为`DEBUG`如果您使用`#define`预处理器手动执行此操作，VS 会插入一个符号，那么该行也将被编译

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-28T23:02:20.107

`NO_THREAD`是条件编译的符号。

它可以来自`#define NO_THREAD`项目文件，或来自 nant 文件（或您用于构建的任何方法）。

如果已定义，则第一行代码将计为 C# 代码的一部分。如果不是，那么第二个是。

如果这是唯一发生的情况，我会说这是移除某些东西的后遗症，但是如果您习惯使用 Visual Studio 进行构建，那么请确保没有用于 nant 的构建文件，以防以前的开发人员使用它反而。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T23:02:32.800

这是一个条件编译符号。在 Visual Studio 2010 中，它们出现在项目属性的生成页面的条件编译符号文本框中。可能您的配置管理器配置之一包含此符号或在过去的某个时间点包含此符号。据推测，如果存在 NO_THREAD 符号，则另一个`#if`地方会禁用使用多个线程的代码块。

# c# - 从列表递归创建树

> ID：12168660
> 
> 赞同：1
> 
> 时间：2012-08-28T22:51:06.747
> 
> 标签：c#, generics, recursion, tree

我有一个嵌套评论列表，它们基本上形成了一个树。

```
//Non-Relevant properties (Like Body, Creator etc) excluded
internal class Comment
{
    public int ID { get; set; }
    public int ItemID { get; set; }
    public int ParentItemID { get; set; }
    public List<Comment> ChildComments { get; set; }
} 
```

首先，我`Posts`从数据库中获取列表，然后获取所有`Comments where ItemID == Posts[all].id`

我想遍历一个平面列表并创建一个嵌套或树列表。

它是这样的：

如果`ParentItemID == 0`，那么我们有一个顶级评论。如果`ParentItemID > 0`我们需要匹配`ParentItemID`一个评论`ID`，并将子评论添加到父评论列表中。

我被困的地方是，我过去只使用递归来导航文件和文件夹。这不允许我实例化一个集合并通过后续递归保留它。

在递归之外实例化列表似乎也很愚蠢，然后每次我想添加一个项目时循环遍历所有项目。

我确信这样做有一个很好的可靠模式，我只是找不到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T22:56:16.630

您可以遍历所有评论并获取每个评论的子评论：

```
foreach (Comment comment in comments) {
  comment.ChildComments =
    comments.Where(c => c.ParentItemID == comment.ItemID).ToList();
} 
```

另一种性能更好的替代方法（如果需要的话）是将注释分组`ParentItemID`并从中创建一个`Dictionary<int, List<Comment>>`，然后像上面一样遍历注释并从字典中获取列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T23:03:37.030

Guffa 的解决方案更漂亮，但这里有一个替代方案：

```
 public static List<Comment> ToTree(List<Comment> FlatCommentsList)
    {
        List<Comment> TopComments = FlatCommentsList.Where<Comment>(x => x.ParentItemID == 0).ToList();

        List<Comment> NestedComments = FlatCommentsList.Where<Comment>(x => x.ParentItemID > 0).ToList();

        List<int> IdsToRemove;

        while (NestedComments.Count > 0)
        {
            IdsToRemove = new List<int>();

            NestedComments.ForEach(x =>
            {
                Comment ParentComment = TopComments.Where<Comment>(y => y.ItemID == x.ParentItemID).SingleOrDefault<Comment>();

                if (ParentComment != null)
                {
                    ParentComment.ChildComments.Add(x);
                    IdsToRemove.Add(x.ItemID);
                }    
            });

            NestedComments.RemoveAll(x => IdsToRemove.Contains(x.ItemID));
        }

        return TopComments;
    } 
```

它也没有递归，但它完成了它的工作。我非常喜欢递归，但我认为我们在这里不需要它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T23:04:40.323

可以使用 LINQ 和 分隔顶级注释和嵌套注释`GroupBy`：

```
var grouped = comments.GroupBy(c => c.ParentItemId == 0);
var topLevel = grouped.Single(g => g.Key);
var nested = grouped.Single(g => !g.Key); 
```

（这些操作的结果实际上不会被计算，直到您迭代序列或使用诸如`ToList()`在它们上的方法）

将嵌套评论附加到他们的父母可以像 Guffa 的方法一样完成（对于很多评论来说很慢，不使用额外的内存），或者你可以做一个经典的时空权衡（对于很多评论来说很快，需要额外的内存）：

```
var dictionary = comments.ToDictionary(c => c.Id);
foreach (nested as comment) {
    dictionary[comment.ParentItemId].ChildComments.Add(comment);
} 
```

# ruby-on-rails - 俄罗斯娃娃缓存用户特定内容

> ID：12168662
> 
> 赞同：0
> 
> 时间：2012-08-28T22:51:21.340
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, caching, heroku

我想做一些重缓存（DHH 称之为俄罗斯娃娃缓存），但我不知道该怎么做，因为我有很多内容取决于用户和他拥有的属性。

您将如何在这样的视图上执行 RDC？：

```
<% if signed_in? %>
  <div class="timeline">
    <%= link_to image_tag(current_user.avatar), designer_path(current_user), :class => "avatar topimg" %>
    <%= content_tag(:span, "your profile", :class => "description") %>
    <%= link_to "", new_design_path, :class => "upload icon-upload" %>
    <%= content_tag(:span, "upload a new design", :class => "description") %>
    <%= link_to "", designer_path(current_user)+"/favorites", :class => "upload icon-star" unless current_user.followees_by_type("design").blank? %>
    <%= content_tag(:span, "designs you've favorited", :class => "description") unless current_user.followees_by_type("design").blank? %>
    <%= content_tag(:span, current_user.current_invites, :class => "invites_count") unless current_user.current_invites <= 0 || current_user.full_member == false %>
    <%= link_to "", "#", :class => "invite icon-plus "+("blue" unless current_user.current_invites == 0).to_s unless current_user.current_invites < 0 || current_user.full_member == false  %>
    <%= content_tag(:span, "invite a friend ("+current_user.current_invites.to_s+" invites left)", :class => "description") unless current_user.current_invites < 0  %>
    <%= content_tag(:span, activity, :class => "activity_count") unless activity == 0 %>
    <%= link_to "", designer_path(current_user)+"/statistics", :class => "upload icon-activity "+("blue" unless activity == 0).to_s unless activity == 0 %>
    <%= content_tag(:span, ("your activity ("+pluralize(activity, 'new thing')+")"), :class => "description") unless activity == 0%>
  </div>
<% else %>
  <%= link_to raw('<i class="icon-twitter icon-font"></i><span>login with twitter</span>'), "/auth/twitter", :class => "btn btn-twitter grey-tweet" %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:44:29.930

您可以将整个内容包装在一个大缓存块中，如下所示：

```
<% cache ['timeline', @user] do %>
  ...
<% end %> 
```

这将使用键时间轴/#{@user.cache_key} 对其进行缓存。cache_key默认包含记录id和updated_at，所以一旦用户记录更新，缓存的fragment就会自动失效*。

请注意，如果您在片段中使用关系（例如追随者），则每次更新其中一个关系时都应该触摸用户对象。这可以通过在关系上设置 :touch => true 来自动完成，如下所示：

```
class Follower
  belongs_to :user, :touch => true
  ... 
```

(*) 请注意，过期的缓存键并没有真正失效，它只是不再被使用。您应该为所有缓存键设置一个过期时间或做一些定期的内务处理以避免溢出缓存。

# c# - Watin：有没有办法从表格单元格中调用 ImageByTitle？

> ID：12168665
> 
> 赞同：0
> 
> 时间：2012-08-28T22:51:26.020
> 
> 标签：c#, .net, automated-tests, watin

我在表格单元格中有两个可单击的图像，需要在 watin 测试运行中单击它们。这些图像没有 ID（我对此无能为力）。图像以相同的标题重复每一行。

我可以使用*ImageByTitle("imageTitle").click()*调用第一行中的图像，但是当我到达任何其他行中的单元格时，我无法使用它。

有没有办法在 TableCell 对象中使用 ImageByTitle，还是有另一种我没有看到的解决方案？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:24:23.317

虽然没有 OOTB 功能可以在表格单元格中按标题查找图像，但可以选择获取给定单元格中所有图像的集合。

一旦我有了收藏，我通过查看每个图像标题来迭代图像，然后选择我需要点击的那个。

谢谢 ：）

# java - 如何在java中验证这个时间/日期字符串？

> ID：12168668
> 
> 赞同：1
> 
> 时间：2012-08-28T22:51:57.880
> 
> 标签：java, regex, string, datetime, verify

我有一个格式为：

8 月 28 日下午 3:00

验证此字符串中是否包含有效时间和有效日期的最佳方法是什么？我的第一个想法是拆分字符串并使用两个正则表达式来匹配时间，另一个来匹配特定的日期格式（缩写为月日）。但是，我在使用第二个正则表达式（用于特定日期格式的那个）时遇到了一些麻烦。还有什么办法可以验证字符串的格式是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T23:03:53.380

你可以试试这个：

```
public boolean isValid( String dateStr ) {

    //    K: hour of the day in am/pm
    //    m: minute of a hour
    // 'on': static text
    //  MMM: name of the month with tree letters
    //   dd: day of the month (you can use just d too)
    DateFormat df = new SimpleDateFormat( "K:m a 'on' MMM dd", Locale.US );

    try {
        df.parse( dateStr );
        return true;
    } catch ( ParseException exc ) {
    }

    return false;

} 
```

有关格式字符串的更多信息：http: [//docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T22:58:12.297

使用[`java.text.SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html). 使用格式字符串，例如`HH:mm aa 'on' MMM dd`.

您可能必须添加`yyyy`到格式字符串和`2012`输入中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T23:01:51.310

使用[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)并确保它不使用[宽松](http://docs.oracle.com/javase/7/docs/api/java/text/DateFormat.html#setLenient%28boolean%29)解析：

```
try {
  DateFormat df = new SimpleDateFormat("h:mm a 'on' MMM dd", Locale.US);
  df.setLenient(false);
  Date dt = df.parse(s);
} catch (ParseException pe) {
  // Wrong format
} 
```

# javascript - 在jQuery中为同一个类选择器分配不同的值

> ID：12168669
> 
> 赞同：2
> 
> 时间：2012-08-28T22:52:21.283
> 
> 标签：javascript, jquery

我不确定在这里使用什么术语，但是有没有办法在按类选择多个不同元素时为它们分配不同的值？在下面的代码中，我希望所有具有 class="out" 的元素都填充为具有类“value”的相邻（表亲）输入元素的值。（实际上，它更复杂，但这是我的简化问题）。

```
<tr>
   <div id="samp1">
     <td>Sample 1</td>
     <td><input class="value" type="number" value="100"></td>
     <td><span class="out"></span></td>
   </div>
</tr>
<tr>
   <div id="samp2">
     <td>Sample 2</td>
     <td><input class="value" type="number" value="200"></td>
     <td><span class="out"></span></td>
   </div>
</tr> 
```

我可以通过以下方式获得表弟的价值：

```
$('.out').closest('div').find('.value').val(); 
```

但我不知道如何将这些值相对于每个元素分配，而该值在多个元素之间是相同的......例如：

```
$('.out').html($('.out').closest('div').find('.value').val()); 
```

给了我一个值，但它将文档中的第一个值（在这种情况下，来自#samp1 中的输入的值）分配给所有跨度，包括#samp2 中的跨度。

我觉得我正在寻找类似的东西

```
$('.out').html($(this).closest('div').find('.value').val()); 
```

但这显然不起作用...
感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T22:55:41.603

用于`jQuery.each`迭代所有`.out`元素。

```
$('.out').each(function(){
  $(this).html($(this).closest('div').find('.value').val());
}); 
```

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

> 描述：一个通用迭代器函数，可用于无缝迭代对象和数组。具有长度属性的数组和类数组对象（例如函数的 arguments 对象）通过数字索引进行迭代，从 0 到 length-1。其他对象通过其命名属性进行迭代。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T22:55:50.687

```
$('.out').each(function(index, elem) {

    var out = $(elem);
    out.html(out.parent().parent().find('.value').val());

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T22:57:15.320

```
$('.out').each(function(){
   $(this).html( $(this).closest('tr').find('.value').val() );
}); 
```

另一件事是您的 HTML 无效。

你不能放在标签`<div>`之间`<tr>`

# numerical - 使用 Scipy 进行数值微分

> ID：12168676
> 
> 赞同：3
> 
> 时间：2012-08-28T22:53:03.603
> 
> 标签：numerical, derivative

我试图学习 Scipy，将其用于混合集成和微分，但在最初的步骤中，我遇到了以下问题。

对于数值微分，似乎唯一适用于可调用函数的 Scipy 函数是 scipy.derivative() 如果我是对的！？但是，我无法使用它：

**1st）**当我不打算指定进行微分的点时，例如，当微分在积分下时，应该将数值分配给其被积函数变量的积分，而不是我。作为一个简单的例子，我在 Sage 的笔记本中尝试了这段代码：

```
import scipy as sp
from scipy import integrate, derivative
var('y')
f=lambda x: 10^10*sin(x)
g=lambda x,y: f(x+y^2)
I=integrate.quad( sp.derivative(f(y),y, dx=0.00001, n=1, order=7) , 0, pi)[0]; show(I)
show( integral(diff(f(y),y),y,0,1).n() ) 
```

它还给出警告“警告：检测到舍入错误的发生，这会阻止达到要求的容差。错误可能被低估了。” 而且我不知道这个警告代表什么，因为即使增加“dx”并减少“订单”，它也会持续存在。

**2nd）**当我想在上面的例子中找到像 g(x,y) 这样的多变量函数的导数以及像 sp.derivative(g(x,y),(x,0.5), dx=0.01, n= 这样的东西时1, order=3) 给出错误，这很容易预料到。

期待收到您关于如何解决上述数值微分问题的消息。此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-10T21:03:43.723

您的代码存在一些奇怪的问题，表明您需要重新学习一些 python！我不知道你是如何在 python 中做出这些定义的，因为它们不是合法的语法。

首先，我认为您使用的是旧版本的 scipy。在最近的版本中（至少从 0.12+）你需要`from scipy.misc import derivative`. `derivative`不在 scipy 全局命名空间中。

其次，`var`未定义，尽管无论如何都没有必要（我认为您的意思是先导入 sympy 并使用`sympy.var('y')`）。`sin`也没有从数学（或numpy，如果你愿意）导入。`show`不是 sympy 或 scipy 中的有效函数。

^ 不是 python 中的幂运算符。你的意思是 **

您似乎在这里混淆了符号和数字微积分运算的想法。scipy 不会对涉及符号对象的表达式进行数值区分——导数的第二个参数应该是您希望求导数的点（即一个数字）。正如您所说，您正在尝试进行数值微分，我将为此目的解决该问题。

```
from scipy import integrate
from scipy.misc import derivative
from math import *

f = lambda x: 10**10*sin(x)
df = lambda x: derivative(f, x, dx=0.00001, n=1, order=7)
I = integrate.quad( df, 0, pi)[0] 
```

现在，最后一个表达式生成您提到的警告，并且返回的值在绝对值 -0.0731642869874073 处不是非常接近零，尽管相对于`f`. 您必须了解有限差分中的舍入误差问题。你的函数`f`在 0 到 10^10 之间变化！这可能看起来自相矛盾，但将`dx`微分值设置得太小实际上会放大舍入误差并导致数值不稳定。请参阅此处的第二张图（“示例显示由于舍入误差和公式错误而选择 h 的困难”）以获取解释：[http ://en.wikipedia.org/wiki/Numerical_differentiation](http://en.wikipedia.org/wiki/Numerical_differentiation)

实际上，在这种情况下，您需要*增加*它，比如 0.001：`df = lambda x: derivative(f, x, dx=0.001, n=1, order=7)`

然后，您可以安全地集成，没有可怕的舍入。

```
I=integrate.quad( df, 0, pi)[0] 
```

我不建议从`quad`. 这是对发生的事情的重要验证，因为它是“对结果中绝对误差的估计”。在这种情况下，I == 0.0012846582250212652 并且绝对误差约为 0.00022，这还不错（暗示的区间仍然不包括零）。也许对四边形的 dx 和绝对公差进行更多的摆弄会给你一个更好的解决方案，但希望你能明白这一点。

对于第二个问题，您只需要创建一个适当的标量函数（称为它`gx`），它表示沿 y=0.5 的 g(x,y)（这在计算机科学中称为 Currying）。

```
g = lambda x, y: f(x+y**2)
gx = lambda x: g(x, 0.5)

derivative(gx, 0.2, dx=0.01, n=1, order=3) 
```

为您提供 x=0.2 处的导数值。当然，考虑到规模，价值是巨大的`f`。您可以像我上面展示的那样使用 quad 进行集成。

如果您希望能够对 g 本身进行微分，则需要不同的数值微分函数。我不认为 scipy 或 numpy 支持这一点，尽管您可以通过制作 2D 精细网格（大小 dx）并使用 numpy.gradient 来破解中心差异计算。可能还有其他我不知道的库解决方案，但我知道我的 PyDSTool 软件包含一个`diff`可以做到这一点的函数（如果你重写 g 以取一个数组参数）。它使用 Ridder 的方法，灵感来自 Numerical Recipes 伪代码。

# wpf - WPF 指定元素已经是另一个元素的逻辑子元素。先断网

> ID：12168685
> 
> 赞同：1
> 
> 时间：2012-08-28T22:54:10.610
> 
> 标签：wpf, xaml, .net-4.0

`Specified element is already the logical child of another element. Disconnect it first."`在将一堆`Frame`控件转换为更简单的`ContentControl`控件以在其逻辑父模型视图中托管子模型视图之后，我最近开始遇到异常。

在下面的示例中，注释掉的代码将阻止崩溃的发生：

```
<UserControl x:Class="GUI.Views.Scenario.PathogenRiskLiquidIngestionView"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:ScenModels="clr-namespace:GUI.ViewModels.ScenarioModels">

    <StackPanel Orientation="Vertical">
        <StackPanel Orientation="Vertical">
            <DockPanel>
                <Label DockPanel.Dock="Left" Content="Risk Assessment Title"></Label>
                <TextBox DockPanel.Dock="Right" Text="{Binding RiskAssessmentTitle, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}"></TextBox>
            </DockPanel>
            <DockPanel>
                <Label DockPanel.Dock="Left" Content="Risk Calculated"></Label>
                <ComboBox SelectedItem="{Binding RiskCalculated, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}" ItemsSource="{Binding RiskCalculatedOptions}"></ComboBox>
            </DockPanel>
            <DockPanel>
                <Label DockPanel.Dock="Left" Content="{Binding MinAcceptableInfectionRiskLabel}"></Label>
                <TextBox DockPanel.Dock="Right" Text="{Binding MinAcceptableInfectionRisk, ValidatesOnDataErrors=True, UpdateSourceTrigger=PropertyChanged}"></TextBox>
            </DockPanel>
        </StackPanel>
        <!--<GroupBox Header="Pathogens">
            <StackPanel Orientation="Vertical">
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Add Pathogen" Command="{Binding AddPathogen}"></Button>
                    <Button Content="Remove Pathogen" Command="{Binding RemovePathogen}" CommandParameter="{Binding SelectedIndex, ElementName=PathogenList}"></Button>
                </StackPanel>
                <ListView Name="PathogenList" ItemsSource="{Binding PathogensPresentViews}" Tag="{Binding}" BorderThickness="0" Background="Transparent">
                    <ListView.ItemTemplate>
                        <DataTemplate DataType="{x:Type ScenModels:PathogenPresentIngestViewModel}">
                            <ContentControl Content="{Binding}"></ContentControl>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
            </StackPanel>
        </GroupBox>
        <GroupBox Header="Receptor Characteristics">
            <StackPanel Orientation="Vertical">
                <ContentControl Content="{Binding ReceptorVolumeLiquidIngestedPerEventView}"></ContentControl>
                <ContentControl Content="{Binding ExposuresView}"></ContentControl>
            </StackPanel>
        </GroupBox>-->
    </StackPanel>
</UserControl> 
```

在搜索了这种异常之后，最常见的原因似乎是一些不正确的样式，但是在这个应用程序中，我还没有设置任何元素的样式。有人可以告诉我可能导致此异常的原因是什么吗？

谢谢，亚历克斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:53:26.643

如果没有更多关于所有底层对象是什么的知识，我只能猜测......

这*真的很*可疑：

```
<ListView Name="PathogenList" ItemsSource="{Binding PathogensPresentViews}" Tag="{Binding}" BorderThickness="0" Background="Transparent">
    <ListView.ItemTemplate>
        <DataTemplate DataType="{x:Type ScenModels:PathogenPresentIngestViewModel}">
            <ContentControl Content="{Binding}"></ContentControl>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

正如评论中提到的，你甚至不应该有绑定到的情况`*Views`，视图模型不应该有对视图的引用，而只有视图模型。如果你像这样违反它，那么遵循模型-视图-分离模式就没有什么意义了。

无论如何，当您绑定到大概是视图和 UI 元素时，这里可能会发生一些不受欢迎的事情：

1.  `DataTemplate`已创建：视图已添加到`ContentControl`-> 现在是控件的子项
2.  `ListView`去*“好吧`DataTemplate`，我可以按原样显示这个项目。”* （因为它是一个视图，它*不应该是*）。
3.  `ListView`将项目（视图，它是 的子级`ContentControl`）添加到`ItemsPanel`.
4.  哎呀！

但这可能不是它，WPF 应该比这更聪明，那么这个怎么样：对`PathogensPresentViews`列表中同一个实例的多个引用？

还是在两个地方使用相同的视图模型，创建两个视图，它们都试图显示相同的 UI 元素列表？

无论实际情况如何，您不应该对抗症状而是对抗疾病，这很可能是您的视图模型包含视图。

# javascript - OnChange .attachEvent 侦听器不工作

> ID：12168686
> 
> 赞同：0
> 
> 时间：2012-08-28T22:54:25.230
> 
> 标签：javascript, html, ajax

我试图在文本字段更改时触发`AJAX` `GET`请求，但我无法`OnChange Listener`正常工作，如果有人能解释为什么它不工作，我将不胜感激。

```
document.getElementById('address1').attachEvent("OnChange", loadXMLDoc);
function loadXMLDoc()
{
    var xmlhttp;
    if (window.XMLHttpRequest)
    {
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.open("GET","http://myurl.co.uk/AddressFinder/UpdateControler.php",true);
    xmlhttp.send();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:04:47.127

```
if(window.addEventListener) {
    document.getElementById('address1').addEventListener("change", loadXMLDoc);
} else if (window.attachEvent){
    document.getElementById('address1').attachEvent("onchange", loadXMLDoc);
}

function loadXMLDoc(){
   alert('worked');   
} 
```

# css - css 被另一个 css 覆盖

> ID：12168689
> 
> 赞同：0
> 
> 时间：2012-08-28T22:54:56.363
> 
> 标签：css

我在下面有这个CSS。一旦我单击链接，我的这个 css 的单击链接如何被其他 css 覆盖。它将链接颜色变为红色。我试图在下面的代码中保持白色，但这没有帮助。我该怎么做才能让它工作

```
.grey {
    background-color:#545154;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    border-radius:6px;
    border:1px solid #120c12;
    display:inline-block;
    color:#ffffff;
    font-family:arial;
    font-size:15px;
    font-weight:bold;
    padding:6px 24px;
    text-decoration:none;
}.grey:hover {
    background-color:#a8a5a8;
}.grey:active {
    position:relative;
    top:1px;
}

 .grey a:visited{
  color:white !important;
  }
 .grey a:link{
  color:white !important;;
  } 
```

html

```
<a href="www.site.com" class="grey" style="color:white;">Site</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:12:05.230

白色的选择器关闭。应该是`.grey:visited`或`a.grey:visited`。

# android - ASyncTasks 阻止其他人

> ID：12168693
> 
> 赞同：32
> 
> 时间：2012-08-28T22:55:24.680
> 
> 标签：android, multithreading, thread-safety, android-asynctask

我有 2 个 ASyncTask，一个从 httpPost 检索值，另一个更新 UI 的一些元素（包括列表视图）。问题在于，由于两个 ASyncTask 共享相同的后台线程，如果网络操作首先启动并且运行缓慢（由于网络连接不良）。其他后台线程花费太多时间使应用程序不负责任。

由于两个 ASyncTask 都是独立的，因此让另一个等待是非常愚蠢的。不同的类使用不同的线程会更符合逻辑，我错了吗？

阅读[ASyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)文档。谈论使用 **executeOnExecutor()**，但我如何在 API 级别低于 11 的情况下解决这个问题？

这是一个重现“问题”的小例子

```
 new Task1().execute();
        new Task2().execute(); 
```

和

```
public class Task1 extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {
        GLog.e("doInBackground start 1");
        SystemClock.sleep(9000);
        GLog.e("doInBackground end 1");
        return null;
    }

    @Override
    protected void onPreExecute() {
        GLog.e("onPreExecute 1");
        super.onPreExecute();
    }

    @Override
    protected void onPostExecute(Void result) {
        GLog.e("onPostExecute 1");
        super.onPostExecute(result);
    }

}

public class Task2 extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        GLog.e("onPreExecute 2");
        super.onPreExecute();
    }

    @Override
    protected Void doInBackground(Void... params) {
        GLog.e("doInBackground start 2");
        SystemClock.sleep(9000);
        GLog.e("doInBackground end 2");
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        GLog.e("onPostExecute 2");
        super.onPostExecute(result);
    }

} 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-08-28T23:04:46.167

这就是我在代码中处理这个问题的方式：

```
if( Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB ) {
    new MyAsyncTask().executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR);
} else {
    new MyAsyncTask().execute();
} 
```

并分别替换`MyAsyncTask`为您的`Task1`和`Task2`。基本上 AsyncTask 的变化出现在 Honeycomb 中（请参阅“执行顺序”部分中的 Android SDK 文档），因此在[此](http://developer.android.com/reference/android/os/AsyncTask.html)之前，您像往常一样启动它，对于 HC 及更高版本，`executeOnExecutor()`如果您不喜欢新行为（没有人喜欢，我思考）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-29T02:33:13.740

一种更通用的方法是将两个辅助方法放在一个实用程序类中，如下所示：

```
class Utils {

    @SuppressLint("NewApi")
    public static <P, T extends AsyncTask<P, ?, ?>> void execute(T task, P... params) {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
            task.executeOnExecutor(AsyncTask.THREAD_POOL_EXECUTOR, params);
        } else {
            task.execute(params);
        }
    }
} 
```

然后您可以使用`Utils.execute(mytask)`or执行任务`Utils.execute(mytask, params)`，它会负责并行执行它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-13T14:14:09.530

问题是每个 AsyncTask 都在同一个 ThreadPoolExecutor 中运行，该 ThreadPoolExecutor 被编码到 API 中。这个 ThreadPoolExecutor 可以根据你的 Android 版本创建不同数量的 WorkerThread。我不记得版本号，但想法是在较旧的 Android 版本中它是 1 个 WorkerThread。然后在以后的版本中更新为 5。最近又回到了1。这就是您的 AsyncTasks 被阻止的原因。它们都在同一个 WorkerThread 上运行，因此它们是按顺序执行的。尝试使用带有 THREAD_POOL_EXECUTOR 的 executeOnExecutor 来实现真正的并行执行。但是，您只能从 API 11 开始使用它。

# node.js - 快递形式（Node.js） 没有“本地”方法

> ID：12168694
> 
> 赞同：0
> 
> 时间：2012-08-28T22:55:24.823
> 
> 标签：node.js, express

将 Node v0.8.8 与 Express ~3.0.0rc3 一起使用（作为记录，这是我的 packages.json 的内容）：

```
{
  "name": "application-name",
  "version": "0.0.1",
  "private": true,
  "scripts": {
    "start": "node app"
  },
  "dependencies": {
    "express": "~3.0.0rc3",
    "jade": "*",
    "ejs": "~0.8.2",
    "express-partials": "0.0.5",
    "connect-flash": "~0.1.0",
    "connect-redis": "~1.4.1",
    "validator": "~0.4.11",
    "express-validator": "~0.2.4",
    "express-form": "~0.6.2"
  }
} 
```

并且在尝试执行 POST 以验证登录表单时出现以下错误。

```
TypeError: Object #<ServerResponse> has no method 'local'
    at /Users/nblavoie/Documents/projets/erphdfnode/node_modules/express-form/lib/form.js:32:15
    at callbacks (/Users/nblavoie/Documents/projets/erphdfnode/node_modules/express/lib/router/index.js:165:11)
    at param... 
```

我的控制器有问题吗？这是代码：

```
var routes = function(app)
{
    var form = require("express-form"),
        field = form.field;

    app.post("/login",
        form(
            field("courriel").trim().isEmail(),
            field("password").trim().notEmpty()
        ),
        function(req, res)
        {
            if (!req.form.isValid) {
                renderLogin("Courriel ou de mot de passe incorrect.", req);
            } else {
                console.log("OK!!!!!");
            }
        }
    );
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T07:57:56.120

`express-form`不支持`express`3.0。

查看[此问题](https://github.com/dandean/express-form/pull/35)以获取更多信息。

# c# - PInvoke 使用嵌套结构数组 C# 传递结构

> ID：12168699
> 
> 赞同：0
> 
> 时间：2012-08-28T22:56:06.073
> 
> 标签：c#, c++, pinvoke, marshalling

我在 C# 中有一个需要传递给 C++ DLL 的结构。

```
typedef struct
{
    TDate  fDate;
    double fRate;
} TRatePt;

typedef struct _TCurve2
{
    int       fNumItems;     /* Number of TRatePts in fArray */
    TRatePt  *fArray;        
    TDate     fBaseDate;     
} TCurve2; 
```

以下是我在 C# 中创建的结构。

```
[StructLayout(LayoutKind.Sequential), Serializable]
public struct TRatePt
{
    public int fDate;
    public double fRate;
}

[StructLayout(LayoutKind.Sequential), Serializable]
public struct TCurve2
{
    public int fNumItems;
    public IntPtr fArray;
    public int fBaseDate;
} 
```

我在 C DLL 中有一个简单的方法。

```
EXPORT int TestMethodForZC(TCurve2 *discCurve)
{
    printf("\n\nIn TestMethodForZC\n");
    printf("discCurve->fBaseDate = %d\n\n\n",discCurve->fBaseDate );
    return 0;
} 
```

我正在使用 PInvoke 使用以下命令调用它：

```
[DllImport("clibrary.dll", EntryPoint = "TestMethodForZC", , CallingConvention = CallingConvention.Cdecl)]
private static extern int _TestMethodForZC(ref TCurve2 discCurve); 
```

TRatePt 的编组：

```
 TRatePt[] items = new TRatePt[2];
 items[0].fDate = 200;
 items[1].fDate = 300;

 items[0].fRate = 0.2d;
 items[1].fRate = 0.3d;
 TCurve2 tc2 = new TCurve2() { fBaseDate = 12000, fNumItems = 2 };

 tc2.fNumItems = items.Length;
 tc2.fArray = Marshal.AllocHGlobal(items.Length * Marshal.SizeOf(typeof(TRatePt)));

 IntPtr item = tc2.fArray;
 for (int i = 0; i < items.Length; i++)
 {
     Marshal.StructureToPtr(items[i], item, false);
     item = new IntPtr(item.ToInt32() + Marshal.SizeOf(typeof(TRatePt)));
     }

 _TestMethodForZC(ref tc2); 
```

我正在手动封送 TRatePt 并将 IntPtr 传递给该方法，但它正在打印垃圾值。我在 Marshaling 上尝试了 Int32 和 Int64，但没有区别。难道我做错了什么？有什么建议么？

PS：我尝试在stackoverflow中查找这个问题，我发现一个有很多讨论的问题，但没有一个建议对我有用。

# javascript - 接受电话号码并以美国电话号码格式显示的 HTML 文本框

> ID：12168707
> 
> 赞同：3
> 
> 时间：2012-08-28T22:56:46.943
> 
> 标签：javascript, html, javascript-events

我在限制文本框只接受数字方面找到了很多帮助，但我想检查是否可以显示美国电话号码格式的文本框

例子：

(_ _ _) _ _ _ - _ _ _ _

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:00:40.887

我为你做了一个谷歌搜索并找到了这个。我相信这正是您想要的

[http://www.kodyaz.com/articles/javascript-phone-format-phone-number-format.aspx](http://www.kodyaz.com/articles/javascript-phone-format-phone-number-format.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T00:09:58.307

忽略国家代码部分的美国电话号码方案是：

```
[2-9][0-9][0-9] [2-9][0-9][0-9] [0-9][0-9][0-9][0-9] 
```

可以向用户建议如下：

```
<table>
  <tr>
    <td class="fieldLabel">Phone number:
    <td><input id="phoneNumber" name="phoneNumber"><br>
        <span class="screenTip">Format: 999&nbsp;999&nbsp;9999</span>
</table> 
```

应用程序只关心用户提交表单（或发送数据）时该值是否有效，同时它是无关紧要的。使用脚本来实现一个用户友好的字段非常困难，该字段仅在少数浏览器中通过用户键（或粘贴或拖放）来限制输入。对于所有正在使用的浏览器来说，这可能是不可能的。

另一方面，在提交或字段失去焦点时验证值非常容易，用户友好的消息更正任何错误也是如此（不理会值，让用户更正它）。

# javascript - setTimeout 有限制吗？

> ID：12168708
> 
> 赞同：16
> 
> 时间：2012-08-28T22:57:08.373
> 
> 标签：javascript, node.js, v8

特别谈论（服务器端）V8，并假设我不关心准确性，因为我可以检测和补偿它，我是否可以使用*setTimeout*设置数千个相对简单的超时数秒，而不会遇到任何其他限制除了内存？如果我要使用一个在任何给定时间可能有数千个计划超时的系统，我应该注意什么？

[作为记录，我已经阅读了关于Javascript 计时器如何工作](http://ejohn.org/blog/how-javascript-timers-work/)的 John 的 Resig 优秀文章，因此无需指出那里已经涵盖的任何内容 :) 我知道 node.js 是单线程的，如果它们花费的时间太长，计时器可能会阻塞其他计时器， ETC。

PS：我严格地试图理解我所描述的可行性，无需指出“肯定有更好的方法来做你想做的事！”。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-29T08:34:55.520

您可能遇到的唯一现实世界限制是节点可用的内存量。使用以下代码进行测试。我使用 oneMillion 和 int32Max 成功运行了下面的示例。使用 int64Max 时，我从 node.js 收到以下错误。我正在使用具有 4GB RAM 的 64 位 Windows。

```
FATAL ERROR: CALL_AND_RETRY_2 Allocation failed - process out of memory 
```

要测试的节点代码：

```
var util = require('util');
var int64Max = 9007199254740992; 
var int32Max = 2147483647;
var oneMillion = 1000000;
var tenThousand = 10000;
var counter = 0;

//Exchange the limiter with one of the above vars to test.
for (var i = 0; i < oneMillion; i++){   
     setTimeout(log, 1);
     //Required as the timeout/callback method will not be called until the loop ends due 
     //to node/js being single threaded.
     util.log('loop:' + i);
}

function log(){
     util.log('callback: ' + counter++);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T23:02:47.190

我不知道节点是如何运行的，但是如果你创建 MAXINT+1 定时器而不让它们运行，你就有整数溢出的风险。

# php - Oracle 11 即时客户端连接到远程 Oracle 8i 服务器：ORA-12514 错误

> ID：12168716
> 
> 赞同：3
> 
> 时间：2012-08-28T22:58:26.847
> 
> 标签：php, oracle, oracle-call-interface

我遇到了一个问题，我花了几个小时来解决这个问题。这是问题所在：

我正在尝试使用***Oracle 11 即时客户端***连接到远程 Oracle 8i 服务器：这是我在 PHP 中的连接字符串：

> $conn = oci_connect('db_user', 'db_pass', "db_ip/db_service");

db_ip 为服务器的ip，如“12.34.56.78”。
db_service 是服务器的服务，例如“test”。

显示的错误是

> ORA-12514: TNS:listener 当前不知道连接描述符中请求的服务

我可以使用同一个客户端连接到另一个 Oracle 10g 服务器。php 代码是一样的，只是改变 db_user 或 db_pass 或 db_ip。未提供 db_service。

我不将 tnsnames.ora 用于 oracle 10g 服务器或 oracle 8i 服务器。我只是使用服务器的简单IP。这有关系吗？

```
Server using: Windows Server 2008 R2
PHP: php 5.2.17
Oracle Instant Client: 11_2 
```

任何想法将不胜感激。

**更新** 的 PHP 现在也可以工作了。我的 php 文件夹在 Programfiles (x86) 下，括号是不允许的。所以我将整个文件夹移动到 C:\php，并配置 IIS 以更改 php 版本。参考：http://stackoverflow.com/questions/9215983/php-cant-connect-but-sqlplus-can

**更新** 非常感谢贾斯汀的帮助。有用！！！我只是将 sid 更改为 scblive 而不是 SCBLIVE。他们的数据库名称是 scblive。我还在用10.2.0.1，用sqlplus，可以同时连接oracle 10g和oracle 8i。太感谢了！！

这是适用于 oracle 8i 的 tns 名称：

> scblive = (DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = [oracle 8i ip])(PORT = 1521)) (CONNECT_DATA = (SERVER = DEDICATED) (SID = scblive)))

发现另一个问题，在 php 代码中，对于 oracle 10g 或 oracle 8i，它显示相同的错误。

> ORA-12154: TNS: 无法解析指定的连接标识符

我刚刚使用了以下连接字符串：

> $conn = oci_connect('user_name', 'pass', 'scblive');

对于 oracle 10g，如果我使用与以前相同的连接字符串，错误仍然显示：

> $conn = oci_connect('user_name', 'pass', [oracle 10g ip]);

有任何想法吗？

**早期更新：感谢**@Justin的帮助。**尝试了 10.2.0.5、10.2.0.4 或 10.1.0.0，它们都无法工作。我看到了矩阵。似乎即时客户端 8.1.7 或即时客户端 9.0.1 可以同时适用于 oracle 10g 和 oracle 8i。有没有人有这些文件的链接？Oracle 只能提供 10.1.0.5 及更高版本。**

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T23:35:01.087

这是预期的行为。11.2 客户端未经认证可与任何版本的 Oracle 8i 连接。您至少需要一个 Oracle 9.2.0.4 数据库。如果要连接 8.1.7 数据库，则需要 Oracle 10.2 或更早版本的客户端。10.2 客户端的初始版本与 Windows Server 2008 R2 系统不兼容，但应该可以安装 10.2.0.5 客户端补丁集。如果要连接到早于 8.1.7 的 Oracle 数据库，则需要早期版本的 Oracle 客户端，这可能需要安装早期版本的 Windows。

如果您有 Metalink 访问权限，Metalink 207303.1 是[客户端/服务器互操作性矩阵](https://support.oracle.com/epmos/faces/ui/km/DocumentDisplay.jspx?id=207303.1)。

如果您确实安装了 10.2.0.5 完整客户端，则您的 TNS 别名需要使用 SID。服务名称在 8.1.7 中不存在。您可能希望从能够连接到 8.1.7 数据库的机器上复制 TNS 别名。我的猜测是你想要

```
SCBLIVE = 
  (DESCRIPTION = 
    (ADDRESS = (PROTOCOL = TCP)(HOST = [ORACLE 8i IP])(PORT = 1521)) 
    (CONNECT_DATA = (SERVER = DEDICATED)(SID = SCBLIVE)) 
  ) 
```

如果这不起作用，请在命令行中键入`tnsping scblive`并复制并粘贴结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T03:51:33.650

我将我以前的 Oracle 9/8 客户端的 ora.... 文件夹和所有相关 dll 复制到特定文件夹，并将这两个文件夹放入路径变量中。一次，我成功地在 php 中使用 oci 与 Oracle 8.1.7 连接。**

# java - 精灵旋转的延迟

> ID：12168717
> 
> 赞同：0
> 
> 时间：2012-08-28T22:58:47.110
> 
> 标签：java, android, controls, andengine

我试图让这种车辆运动看起来更真实。

除了旋转的即时性之外，这非常有效。

它可以立即做180。我不希望它转得这么快。

```
public void onControlChange(final BaseOnScreenControl pBaseOnScreenControl, final float pValueX, final float pValueY) {
    final Body carBody = CityRacerActivity.this.mCarBody;
    final float rotationInRad = (float)Math.atan2(-pValueX, pValueY);

    if ((pValueX == 0) && (pValueY == 0)) {
        //Don't turn the body/sprite of the car
    }else {
        carBody.setTransform(carBody.getWorldCenter(), rotationInRad);
        //turn the car body in the direction of movement
        CityRacerActivity.this.mCar.setRotation(MathUtils.radToDeg(rotationInRad));
    }

    //set the velocity
    final Vector2 velocity = Vector2Pool.obtain(pValueX * 5, pValueY * 5);
    carBody.setLinearVelocity(velocity);
    Vector2Pool.recycle(velocity);
} 
```

我希望它有更多像开车一样的游戏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T15:32:10.017

该方法`setRotation`立即改变身体的“朝向”。

你可以`setAngularVelocity`改用。它还将使您的游戏更加逼真，因为汽车不能真正在原地旋转，因此在物理世界更新期间汽车将以角速度旋转，同时它也根据您的常规速度移动。所以它随着它的移动而旋转，这就是我们世界正在发生的事情。

我会`setAngularVelocity`根据转弯的急速给出一个参数，90度应该是最大的IMO（但在你自己的测试后决定）。

# java - 区分快速鼠标滚轮和慢速鼠标滚轮

> ID：12168719
> 
> 赞同：1
> 
> 时间：2012-08-28T22:58:50.137
> 
> 标签：java, mouse, awt

为了改善我的应用程序的用户体验，我喜欢区分用户不同的鼠标滚轮速度和数量，并采取相应的行动来提高我的 GUI 用户友好性，我该如何分析它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:21:29.357

罗伯特哈维在评论中提出了一个很好的建议，但还远远不够。传递给[MouseWheelListener.mouseWheelMoved 的 MouseWheelEvent](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseWheelListener.html#mouseWheelMoved%28java.awt.event.MouseWheelEvent%29)包含一些属性，您应该在事件之间的时间之外考虑这些属性。具体来说：

*   [从MouseWheelEvent.getPreciseWheelRotation](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseWheelEvent.html#getPreciseWheelRotation%28%29)返回的点击次数。
*   用户希望每次点击滚动的量，由[MouseWheelEvent.getScrollAmount](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseWheelEvent.html#getScrollAmount%28%29)返回。请注意，除非[MouseWheelEvent.getScrollType](http://docs.oracle.com/javase/7/docs/api/java/awt/event/MouseWheelEvent.html#getScrollType%28%29)。除非此方法返回 MouseWheelEvent.WHEEL_UNIT_SCROLL，否则 MouseWheelEvent.getScrollAmount 将返回未定义的值。

这些方法中的第一个，MouseWheelEvent.getPreciseWheelRotation，返回用户旋转鼠标的点击次数，将高分辨率鼠标和触控板考虑在内。这个数字的绝对值越高，用户滚动鼠标的速度就越快。

这些方法中的第二个，MouseWheelEvent.getScrollAmount，告诉系统设置用户的操作系统用于滚动速度。使用 Windows 控制面板或其他平台上的类似工具，用户可以设置滚轮影响界面变化的速度。如果用户设置了一个非常快的滚轮，您可能应该将中等速度的滚动视为与另一个平台上的非常快的滚动相同。用户要求滚动得更快，所以你的应用应该尊重这一点。

当然，您应该保留最后一次滚动事件的时间（您可以使用[System.currentTimeMillis()](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#currentTimeMillis%28%29)或[System.nanoTime()](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#nanoTime%28%29)来测量时间增量），并且滚动事件之间的较短间隔通常意味着更快的滚动。一种可能的解决方案是跟踪用户在某个恒定时间段内（例如 0.1 或 0.05 秒）移动鼠标的总点击次数，并将交互基于滚轮点击的累积次数，而不是滚动的点击次数。发生在每个事件中。

# javascript - 使用 jQuery 的两步过程

> ID：12168732
> 
> 赞同：-4
> 
> 时间：2012-08-28T23:00:26.560
> 
> 标签：javascript, jquery, ajax

这是流程：

用户需要单击指向 google.com 的链接，然后单击`<p>`标签之间的文本（没有特定的顺序，但必须同时执行这两个操作）。

如果他执行上述操作，当他点击 pic.png 时，他会转到 yahoo.com。

否则，他会收到警报。

到目前为止，这是我的尝试

[http://jsfiddle.net/p8epF/](http://jsfiddle.net/p8epF/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:12:00.100

[使用jquery 承诺](http://api.jquery.com/category/deferred-object/)可以轻松完成您需要的工作：http : [//jsfiddle.net/zerkms/WXVPf/1/](http://jsfiddle.net/zerkms/WXVPf/1/)

```
var yahoo = $('#yahoo'),
    googleClicked = $.Deferred(),
    textClicked = $.Deferred();

yahoo.on('click', function() {
    alert('you need to click google and some text');
});

$('#google').on('click', function() {
    googleClicked.resolve();
});

$('p').on('click', function() {
    textClicked.resolve();
});

$.when(googleClicked, textClicked).done(function() {
    yahoo.off('click')
         .on('click', function() {
             alert('you have finished this strange quest successfully');
         });
});

​ 
```

对于那些还没有使用的人`$.Deferred`- 有一篇很棒的文章：http: [//joseoncode.com/2011/09/26/a-walkthrough-jquery-deferred-and-promise/](http://joseoncode.com/2011/09/26/a-walkthrough-jquery-deferred-and-promise/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T23:08:55.437

尝试这个：

```
<a id="postos" href="http://google.com">eeee</a>
<p id="click">please click</p>
<a id="linkos"><img src="pic.png"></a>​ 
```

JS

```
$(function(){
    var clicked = false;

    $("#linkos").on("click", function(){
        if (clicked) {
           window.location = 'http://google.com';
        } else {
           alert("Not clicked!");
        }        
    });

    $("#click").on("click", function(){
        clicked = true;     
    });

}) 
```

演示：http: [//jsfiddle.net/Ef7ZT/](http://jsfiddle.net/Ef7ZT/)

# jquery - 用本地存储保存div的内容，并在另一个页面上显示

> ID：12168734
> 
> 赞同：0
> 
> 时间：2012-08-28T23:00:49.293
> 
> 标签：jquery, local-storage

我正在尝试`<div>`在页面加载时获取页面上的内容，并将其保存到本地存储。

当有人再次访问主页时，我希望`div`显示其中的内容。

虽然我可以使用表单输入字段和提交来获得功能，但我找不到仅使用内容和页面加载来使其工作的方法。

任何帮助表示赞赏！

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T00:34:25.657

如果没有看到您的标记和代码，很难知道可能是什么问题，您应该能够执行以下操作

在第一页：

```
$(function() {
  localStorage["myKey"] = JSON.stringify($("#divWithContents").html());
}); 
```

在您希望显示内容的页面上：

```
$(function() {
   if (localStorage["myKey"] != null) {
      var contentsOfOldDiv = JSON.parse(localStorage["myKey"]);    
      $("divWhereIwantStuffDisplayed").html(contentsOfOldDiv);
     } 
}); 
```

# java - 如何使用 android 的 MediaRecorder 检测文件何时达到其最大大小？

> ID：12168736
> 
> 赞同：3
> 
> 时间：2012-08-28T23:01:36.033
> 
> 标签：java, android, file, api, mediarecorder

在使用 Android 录制视频时，`MediaRecorder`如何在录制的`Toast`视频文件达到其最大大小并且文件正在保存（或即将保存）时检测并显示消息？

编辑：这是我目前拥有的代码，但尽管文件已成功保存，但未触发回调。

```
final Context activity=this.getBaseContext();

mediaRecorder.setOnInfoListener(new MediaRecorder.OnInfoListener() {

    public void onInfo(MediaRecorder mr, int what, int extra) {
    // TODO Auto-generated method stub

    if(what==MediaRecorder.MEDIA_RECORDER_INFO_MAX_FILESIZE_REACHED)
         Toast.makeText(activity, "There is no more space available. Video recording is stopped now.",2000).show();

    }
});

// getBytesAvailable() returns bytes available on sdcard
mediaRecorder.setMaxFileSize(getBytesAvailable());

mediaRecorder.prepare(); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T06:53:45.150

MEDIA_RECORDER_INFO_MAX_FILESIZE_REACHED 表示文件已达到最大大小；SD卡上可能还有更多空间，但是某些东西阻止了当前录制文件变得更大。这通常是由于调用[MediaRecorder.setMaxFileSize() 所致](http://developer.android.com/reference/android/media/MediaRecorder.html#setMaxFileSize%28long%29)。如果你不调用这个方法，你将不会得到 INFO，尽管当文件达到 FAT 文件系统的 2GB 限制时你可能会得到。

关于空间不足时会发生什么，我找不到明确的答案。有些人似乎认为 onError 会被调用 == MEDIA_RECORDER_ERROR_UNKNOWN。

所以换句话说，调用 setMaxFileSize() 的大小等于几秒的记录。您的回调应该可以工作。

# php - php if、else if 和 if 在也包含 php 语句的代码块上

> ID：12168744
> 
> 赞同：0
> 
> 时间：2012-08-28T23:02:07.233
> 
> 标签：php, if-statement

我想使用`<?php if (statement): ?>`,`<?php else if (statement): ?>`和`<?php else: ?>`lines 使我的代码更具可读性。我不太确定这是否是正确的语法。我也想知道我是否可以在这些 if 块中使用 php 代码。这就是我正在使用的：

```
<?php $blogexcerpt = $Blog->create_excerpt(html_entity_decode($post->content), 0, 250); ?>
<!-- if the blogexcerpt contains less than 5 non-white spaces assume there is media and use the "View Media" tag -->
<?php if ( strlen(preg_replace( '/\s+/', ' ', $blogexcerpt)) < 5 ): ?>
<h5 style="margin:0px;"><a href="<?php echo $Blog->get_blog_url('post').$post->slug; ?>" class="blog_post_link">View Media…&lt;/a></h5>
<!-- else if the blog post is less than excerpt length post entire -->
<?php else if ( strlen($Blog->create_excerpt(html_entity_decode($post->content), 0, 255)) < 250 ): ?>
<?php echo $blogexcerpt; ?>
<h5 style="margin:0px;"><a href="<?php echo $Blog->get_blog_url('post').$post->slug; ?>" class="blog_post_link">View post</a></h5>
<!-- else show excerpt -->
<?php else: ?>
<?php echo $blogexcerpt; ?><span style="display: inline;">…&lt;/span>
<h5 style="margin:0px;"><a href="<?php echo $Blog->get_blog_url('post').$post->slug; ?>" class="blog_post_link">Read more…&lt;/a></h5>
<?php endif> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T23:06:07.600

在这种特定情况下，我会使用所有 PHP 以使其可读：

```
<?php
$blogexcerpt = $Blog->create_excerpt(html_entity_decode($post->content), 0, 250);

if ( strlen(preg_replace( '/\s+/', ' ', $blogexcerpt)) < 5 ) {
    echo '<h5 style="margin:0px;"><a href="' . $Blog->get_blog_url('post').$post->slug; . '" class="blog_post_link">View Media…&lt;/a></h5>';
} else if ( strlen($Blog->create_excerpt(html_entity_decode($post->content), 0, 255)) < 250 ) {
    echo $blogexcerpt;
    echo '<h5 style="margin:0px;"><a href="' . $Blog->get_blog_url('post').$post->slug; . '" class="blog_post_link">View post</a></h5>';
} else {
    echo $blogexcerpt;
    echo '<span style="display: inline;">…&lt;/span>';
    echo '<h5 style="margin:0px;"><a href="' . $Blog->get_blog_url('post').$post->slug; . '" class="blog_post_link">Read more…&lt;/a></h5>';
} 
```

虽然这可能只是个人喜好，但我认为这更具可读性，然后继续混合打开和关闭 PHP 模式`<?php ?>`。

恕我直言的一些好处：

*   打开和关闭花括号（尽管对模板内容的看法不同，但您会看到自己最喜欢的内容）
*   适当的缩进
*   到处都没有开始和结束`<?php ?>`标签

**附言**

你确定帖子是html实体编码的吗？你确定你真的想解码它们吗？大多数时候，你可以侥幸逃脱`htmlspecialchars()`。在显示之前解码通常是一个坏主意，并且可能会引入 XSS 漏洞。虽然不确定你的具体情况。只是提醒您注意您在做什么 :-) 例如，您确定要对其进行解码而不是对其进行编码以防止 XSS 吗？

**聚苯乙烯**

最后一件事。[正如保罗](https://stackoverflow.com/questions/12168744/php-if-else-if-and-if-on-blocks-of-code-that-also-contain-php-statements/12168787#comment16287335_12168744)在他的评论中所说的那样，当我们忙于使其更具可读性时，你真的应该放弃那个内联 CSS 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T23:03:51.650

迈克尔，

简短的回答是肯定的。

您确实需要以分号结尾：`<? endif; ?>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T23:11:13.240

有时缩进将有助于使事情变得可读（包装在文档中以显示 PHP/HTML 缩进如何共存）：

```
<?php
$blogexcerpt = $Blog->create_excerpt(html_entity_decode($post->content), 0, 250);
?>
<html>
    <body>
<?php if ( strlen(preg_replace( '/\s+/', ' ', $blogexcerpt)) < 5 ): ?>
        <h5 style="margin:0px;"><a href="<?php echo $Blog->get_blog_url('post').$post->slug; ?>" class="blog_post_link">View Media…&lt;/a></h5>
<?php elseif ( strlen($Blog->create_excerpt(html_entity_decode($post->content), 0, 255)) < 250 ): ?>
        <?php echo $blogexcerpt; ?>
        <h5 style="margin:0px;"><a href="<?php echo $Blog->get_blog_url('post').$post->slug; ?>" class="blog_post_link">View post</a></h5>
<?php else: ?>
        <?php echo $blogexcerpt; ?><span style="display: inline;">…&lt;/span>
        <h5 style="margin:0px;"><a href="<?php echo $Blog->get_blog_url('post').$post->slug; ?>" class="blog_post_link">Read more…&lt;/a></h5>
<?php endif; ?>
    </body>
</html> 
```

# javascript - 在加载文档时修改 HTML

> ID：12168745
> 
> 赞同：3
> 
> 时间：2012-08-28T23:02:10.047
> 
> 标签：javascript, jquery, html

假设您有 75 个具有 data-id="{some number}" 属性的 div。不幸的是，整体页面大小很大，非常大。

我的 HTML 文档中有许多重复的 HTML 片段，例如图像标签或链接。这些图像/链接的唯一变化部分是 id。

HTML 文档很长，这些片段会影响文档的整体大小。

当 dom 准备好时，我可以运行 javascript，但用户体验将是： - 等待页面加载，然后开始查看节点等， - 页面加载， - 显示额外的片段。

我可以让顶部容器 DIV 隐藏，直到页面加载，但是 - 担心谷歌搜索机器人会意识到 div 被隐藏并跳过内容（或者是这样吗？） - 用户将无法看到内容，而页面正在加载。

理想的做法是在不为谷歌搜索机器人添加太多额外标记的情况下以 HTML 格式加载页面，并在加载 javascript 时添加额外的元素。

我可以尝试的任何技巧来实现您的想法？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:28:55.470

最好的性能和用户体验是在服务器上做尽可能多的工作，然后发送高效的 HTML 并允许浏览器在收到页面时显示页面。发送一个 DIV 容器，然后使用脚本将其克隆 70 或 80 次会更慢（对于某些用户来说可能会慢很多）。

在脚本完成之前完全隐藏内容是最糟糕的解决方案 - 用户会留下一个空白（或最少内容）页面，等待某些事情发生。

大多数页面大部分是脚本和图像，用脚本替换 HTML 确实处于边缘地位。例如，这个页面有 90KB 的 HTML 和 264KB 的脚本、图像和 css。Apple 的主页有 12KB 的 HTML 和大约 800KB 的脚本、css 和图像。

浏览器会在收到内容时逐步显示内容，因为这就是它们多年来在网络上发展的方式。用户更喜欢看到*一些东西*而不是什么都没有，并在加载其余内容时开始查看内容（这完全是关于内容，而不是关于花哨的布局或效果）。尝试使用浏览器行为和功能，而不是反对它们。

您可以通过指定图像的大小和有效的布局来极大地帮助浏览器。这样，在收到新内容时布局不会发生太大变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T23:07:04.580

根据其他页面内容，您可以在 DocumentReady 上运行脚本，而不是 onload。

DocumentReady 在页面下载和 DOM 渲染之后运行，但在检索图像之前运行。

*我相信某处有一个官方的 DocumentReady 事件，但我仍然需要在我的页面上支持**IE6**，所以我使用忙循环来观看 DOM。*

# c# - 自增主键

> ID：12168748
> 
> 赞同：0
> 
> 时间：2012-08-28T23:02:27.000
> 
> 标签：c#, database, windows-phone-7, linq-to-sql

在我的应用程序中，我有一个具有 int 主键 ID 的模型客户端。（metalsql从数据库生成的模型）

```
var c = new Client{Name = "jonny"};
myDbContext.Client.InsertOnSubmit(c); 
```

当我添加第二个客户端时，此代码会导致错误，因为事实证明 Id 字段没有增加。它只采用默认值 0。有没有一种聪明的方法可以使这种自动增量工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:37:25.020

在您当前的表中，您的列 ID 未设置为 int **is identity**，因此您需要提供它。

```
var c = new Client{ID = 2,Name = "jonny"};
myDbContext.Client.InsertOnSubmit(c); 
```

要解决此问题，请确保您的表 ID 列设置为 int**是身份**以使您的代码正常工作

```
var c = new Client{Name = "jonny"};
myDbContext.Client.InsertOnSubmit(c); 
```

请参阅此链接：

[在 Microsoft Visual Studio 2010 中创建数据库](http://www.programminghelp.com/web-development/asp-net/creating-a-database-in-microsoft-visual-studio-2010/)

最好的祝福

# sql - 使用普通 SQL 匹配表中的行对？

> ID：12168751
> 
> 赞同：2
> 
> 时间：2012-08-28T23:02:43.660
> 
> 标签：sql, self-join

注意：这个问题对“学位”有一个模棱两可的概念。我已经得到了答案。

这些天来，我正在努力解决如下问题：您不能使用某种编程语言编写函数；仅使用 RAW SQL。

给定一个`articles`包含 2 列的表：`article_id`和`tag_name`

```
article_id  |  tag_name
---------------------------
1              C++
1              java
1              python
2              ruby
2              js
3              ruby
4              java
4              python 
```

和一个名为“tag_relations”的空表，其结构如下：

```
tag1     |   tag2    |  degree
----------------------------------- 
```

现在，问题来了：

*   根据第一个表的内容编写“RAW SQL”以将值写入表“tag_relations”。

对于给定的数据，输出应该是这样的（我不确定学位是多少，问题也没有提到，所以，戈登·林诺夫和乔纳森·莱夫勒的答案对我来说都是正确的。）：

```
tag1     |   tag2    |  degree
-----------------------------------
java         C++        2
java         python     4
ruby         js         2 
```

* * *

更新的附加信息

注意1.这里的“程度”没有被问题描述。但是我认为这是衡量 2 个标签之间关系的指标。因为有 'java' 和 'C++' 的值：

```
article_id  |  tag_name
---------------------------
1              C++
1              java 
```

所以度数 = 2

对于“java”和“python”

```
article_id  |  tag_name
---------------------------
1              java
1              python
4              java
4              python 
```

所以度数 = 4

注意2：
没有学位记录：'python'和'C++'，（我的意思是这个问题不涉及这种情况`degree < 2`）（*编辑注意：此评论与在输出中包含C++和Java不一致*。 )

我在这个问题上花了一天时间，并回顾了我对 SQL 的了解，但仍然不知道如何存储变量或循环记录。

任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T01:07:59.233

学位是什么？它似乎是连接两件事的最大文章 ID。

此查询需要自连接（和插入）：

```
insert into tag_relations(tag1, tag2, degree)
    select a1.tag_name, a2.tag_name, max(article_id) as maxid
    from articles a1 join
         articles a2
         on a1.article_id = a2.article_id and
            a1.tag_name < a2.tag_name
    group by a1.tag_name, a2.tag_name 
```

自联接查找具有相同 article_id 的所有项目对。"<" 只是确保反转订单不会创建新对。对于任何pair，都取最大article_id 作为新的度数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T01:16:00.983

由于问题中的数据不连贯（或解释不连贯），因此这个答案对一些产生看似合理的答案的假设有轻微的自由。

假设目标是列出每对标签应用于同一文章 ID 的次数。给定数据：

```
article_id  |  tag_name
---------------------------
1              c++
1              java
1              python
2              ruby
2              js
3              ruby
4              java
4              python 
```

预期的输出可能是：

```
tag1     | tag2    | degree
------------------------------
c++        java      1      -- from 1
java       python    2      -- from 1 and 4
c++        python    1      -- from 1 (missing from question's expected results)
java       ruby      1      -- from 2 
```

标签是排序的，以便在;`tag1`之前排序 `tag2`这样可以避免 ( `java`, `java`) 出现，也可以防止 ( `c++`, `java`) 与 ( `java`, `c++`) 一起出现。

鉴于对问题的所有这些解释，我们需要开发一个查询来选择数据，然后将其附加到`INSERT INTO tag_relations`.

```
SELECT a.article_id, a.tag_name AS tag1, b.tag_name AS tag2
  FROM articles AS a
  JOIN articles AS b ON a.article_id = b.article_id AND a.tag_name < b.tag_name; 
```

这里的关键概念是“自加入”。该表`articles`在查询中被使用了两次（并被赋予了两个不同的别名以明确哪个是哪个），并且该表与其自身连接。这里的连接细节是一种很常见的模式；在某些列上相等，但在一个或多个其他列上不相等。如果有几列要排序，排序条件就会变得棘手。有时，这将是 a`<=`而不是`<`.

这给出了输出：

```
1    c++      java
1    c++      python
1    java     python
2    js       ruby
4    java     python 
```

现在我们只需要用 COUNT 来总结一下学位：

```
SELECT a.tag_name AS tag1, b.tag_name AS tag2, COUNT(*) AS degree
  FROM articles AS a
  JOIN articles AS b ON a.article_id = b.article_id AND a.tag_name < b.tag_name
 GROUP BY tag1, tag2; 
```

如果要计算反向关系以及正向关系，则可以将计数乘以 2；这将更接近您的预期数据。

最后插入数据，我们得到：

```
INSERT INTO tag_relations(tag1, tag2, degree)
    SELECT a.tag_name AS tag1, b.tag_name AS tag2, COUNT(*) AS degree
      FROM articles AS a
      JOIN articles AS b ON a.article_id = b.article_id AND a.tag_name < b.tag_name
     GROUP BY tag1, tag2; 
```

# java - 在服务器端创建具有自动完成功能的查询

> ID：12168755
> 
> 赞同：1
> 
> 时间：2012-08-28T23:03:23.050
> 
> 标签：java, hibernate, solr, lucene, hibernate-search

我有带有文本字段的 java swing 应用程序。我需要使用自动完成功能创建类似于文本搜索的 JIRA（见下图），例如：

```
firstName = John AND lastName = Smith AND age > 35 
```

我需要将此查询文本发送到服务器。在服务器端，我需要将此文本传输到 Hibernate Criteria 执行搜索并将列表返回到客户端。 `firstName, lastName and age`是`User.class`具有适当的 getter 和 setter 的属性。

是否有任何 java 框架可以帮助我将此类字符串转换为 Hibernate 标准？Solr，Lucene？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T14:59:50.050

当然，使用[Hibernate 搜索框架](http://www.hibernate.org/subprojects/search.html) 您可以将其添加到 Hibernate 配置之上，并从 lucene 索引中检索结果，该索引是根据数据库中可用的数据构建的。

# javascript - 重新启动游戏 jQuery 功能不起作用

> ID：12168757
> 
> 赞同：2
> 
> 时间：2012-08-28T23:03:25.987
> 
> 标签：javascript, jquery

我在我的网站上使用基于[jQuery 的记忆游戏。](http://www.slashc.com/codecanyon/jquery_memory_game/index.html)您可以随时重新开始游戏。效果很好。现在我完成了一场比赛，然后我再次点击播放。如果我点击重新启动它不再起作用。为什么以及如何解决？

这是一个[小提琴](http://jsfiddle.net/Lynda333/ZXMUB/9/)。

***JS：***

```
// this script shows how you can get info about the game
    var game = jQuery('div.slashc-memory-game'); // get the game
    var info = jQuery('p#info').find('span'); // get the info box
    var restart = jQuery('a#restart').css('visibility', 'visible'); // get the play again link
    var playAgain = jQuery('a#play-again').css('visibility', 'hidden'); // get the play again link
    // format time like hh:mm:ss
    var formatTime = function(s)
    {
        var h = parseInt(s / 3600), m = parseInt((s - h * 3600) / 60); s = s % 60;
        return (h < 10 ? '0' + h : h) + ':' + (m < 10 ? '0' + m : m) + ':' + (s < 10 ? '0' + s : s);
    }
    // listen for game 'done' event 
    game.bind('done', function(e)
    {
        // show basic stats
        var stats = game.slashcMemoryGame('getStats');
        info.html('Success ! Number of clicks : ' + stats.numClicks + ', elapsed time : ' + formatTime(parseInt(stats.time / 1000)) + '.');
        playAgain.css('visibility', 'visible'); // show link
        restart.css('visibility', 'hidden'); // show link
    });
            // Restart action
    restart.click(function(e)
    {
        game.slashcMemoryGame('restart'); // restart game
    });
    // play again action
    playAgain.click(function(e)
    {
        playAgain.css('visibility', 'hidden'); // hide link
        info.html('Memory Game, click to reveal images. <a id="restart" href="#">Restart</a>'); // reset text
        game.slashcMemoryGame('restart'); // restart game
        e.preventDefault();
    }); 
```

***HTML：***

```
<p id="info"><span>Memory Game, click to reveal images. <a id="restart" href="#">Restart</a></span> <a id="play-again" href="#">Play Again</a></p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:25:49.383

每当您单击此行时，您都在替换`#restart`元素：`#play-again`

```
info.html('Memory Game, click to reveal images. <a id="restart" href="#">Restart</a>'); 
```

这意味着`#restart`元素的单击处理程序不再附加到新元素。

*您应该使用委托*事件处理程序将处理程序附加到始终存在于 DOM 中的祖先元素[`.on()`](http://api.jquery.com/on/)：

```
info.on('click', '#restart', function(e)
{
    game.slashcMemoryGame('restart'); // restart game
}); 
```

[**小提琴**](http://jsfiddle.net/ZXMUB/12/)

我用`#restart`委托事件处理程序替换了元素的直接绑定事件处理程序。这是额外阅读的参考：[直接和委托事件](http://api.jquery.com/on/#direct-and-delegated-events)。基本上，您只能将事件处理程序绑定到当前在 DOM 中的元素，并且：

> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。

# iphone - 主线程在后台线程执行时等待 [NSManagedObjectContext(_NSInternalAdditions) lockObjectStore]

> ID：12168761
> 
> 赞同：2
> 
> 时间：2012-08-28T23:03:41.730
> 
> 标签：iphone, ios, multithreading, core-data

我正在通过后台线程拥有的新创建的 NSManagedObjectContext 在后台线程（使用 GCD）上执行昂贵的获取（约 5 秒，大约 30,000 个对象）。

但是，我没有在后台执行此操作的好处，因为主线程正在等待持久存储上的锁定，因此 UI 被冻结。这是堆栈跟踪：

```
* thread #1: tid = 0x1c03, 0x3641be78 CoreData`-[NSManagedObjectContext(_NSInternalAdditions) lockObjectStore], stop reason = breakpoint 1.1
    frame #0: 0x3641be78 CoreData`-[NSManagedObjectContext(_NSInternalAdditions) lockObjectStore]
    frame #1: 0x36432f06 CoreData`-[_PFManagedObjectReferenceQueue _processReferenceQueue:] + 1754
    frame #2: 0x36435fd6 CoreData`_performRunLoopAction + 202
    frame #3: 0x35ab9b1a CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_AN_OBSERVER_CALLBACK_FUNCTION__ + 18
    frame #4: 0x35ab7d56 CoreFoundation`__CFRunLoopDoObservers + 258
    frame #5: 0x35ab80b0 CoreFoundation`__CFRunLoopRun + 760
    frame #6: 0x35a3b4a4 CoreFoundation`CFRunLoopRunSpecific + 300
    frame #7: 0x35a3b36c CoreFoundation`CFRunLoopRunInMode + 104
    frame #8: 0x376d7438 GraphicsServices`GSEventRunModal + 136
    frame #9: 0x33547cd4 UIKit`UIApplicationMain + 1080
    frame #10: 0x000f337a MyApp`main + 90 at main.m:16 
```

我（相信）我已经确认当这个后台线程正在工作时我没有访问主线程的 NSManagedObjectContext 。从堆栈跟踪来看，很明显我没有直接对 Core Data 做任何事情。但是某些事情触发了对 _processReferenceQueue: 的调用，这导致尝试锁定存储。有谁碰巧知道这个方法的作用以及我如何/如果我可以防止它在我的后台线程正在工作时被调用？

**编辑**

在我开始这个后台获取之后，我没有在主线程上进行任何核心数据读取或写入。这就是为什么这很令人费解。如果主线程也试图做更多的工作，我希望会有争执，但事实并非如此——至少，我没有要求它这样做。没有读取，没有写入，没有 FRC。这就是为什么我想知道是否有人熟悉这个 _processReferenceQueue 方法。为什么会被调用？我能做什么导致它运行？

**编辑**

作为一个测试，我试图让 MT 的 MOC 进入一个状态，在我关闭 BT 进行提取之前，它没有待处理的更改，希望它不需要做任何`_processReferenceQueue`需要锁的工作在商店里。

在开始 BT 之前，我注意到`[MOC updatedObjects]`集合中有一个对象。插入或删除集中没有对象。

调用后`[MOC save]`，`[MOC updatedObjects]`集合是空的，正如预期的那样。
然而，一旦我启动了 BT，MT 仍然试图将商店锁定在里面`_processReferenceQueue`，即使MOC 中应该*没有任何东西是脏的。*

我尝试的下一件事（严格作为测试）是`MOC reset]`在启动 BT 之前调用 [。同样，`[MOC updatedObjects]`正如预期的那样，重置后集合是空的。在代码中的这一点上，在 BT 完成其工作之前，我不会接触 MT 上的任何托管对象（因此，由于重置使我已经引用的托管对象无效，我不会遇到任何问题）。然而，这一次，MT 没有**尝试**将持久存储锁定在`_processReferenceQueue`.

这种行为向我表明，在我启动 BT 之后，我没有对 MT 上的 MOC 做任何明确的事情。否则，MT 会在`_processReferenceQueue`. 但它没有。

我不确定为什么最近保存的 MOC 需要随后锁定，`_processReferenceQueue`而最近重置的 MOC 不需要。

我会继续挖掘。

谢谢！布赖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T02:50:17.553

没有更多信息，我所能做的就是猜测。

不幸的是，Core Data 没有使用相同的持久存储协调器为 MOC 实现读/写锁。这意味着对一个线程的读取将阻塞使用相同持久存储协调器的其他线程。

因此，您在后台长时间运行的 fetch 将阻止主线程获取。

你有几个选择。

分解那个长时间运行的获取，以便它按顺序获取小块。您想要进行多次小提取，而不是在当前一个完成之前发布下一个。

这将允许主线程上的提取有机会在后台线程上的多个小提取之间进行处理。

另一种选择是创建一个单独的持久存储协调器，将您的后台 MOC 连接到该协调器，然后运行您的 fetch。如果您使用多个持久存储协调器，您可以同时拥有多个阅读器，并且它们不会永久相互阻塞。

**编辑**

> 我确实想过分手。但这不是我试图让两个同时获取很好地一起玩的情况。MT 在这一点上不应该接触核心数据。– 布赖恩斯塔福德

您是在使用`UIManagedDocument`，还是在主线程上创建了 MOC，还是使用`NSMainQueueConcurrencyType`？

我问是因为 Core Data 确保每次都通过运行循环处理所有“用户事件”。我从来没有深入研究过这是如何完成的，但我想他们会在主线程上的 MOC 的运行循环中添加一个处理程序。

Core Data 使用起来非常简单，除非你有多个 MOC。然后，交互非常复杂，如果没有实际代码，很难确定发生了什么。

如果可以，请发布创建任何/所有 MOC 的代码，以及使用这些 MOC 的代码。

如果与当前上下文无关，我真诚地怀疑他们是否会让运行循环处理实际上获得对存储的锁定，因此可能与背景 MOC 存在一些隐藏的交互。我敢打赌，您的应用程序中仍然存在您认为自己没有在做的事情，这会以某种方式与主要 MOC 进行后台工作。

如果您愿意，您可以轻松追踪`[_PFManagedObjectReferenceQueue _processReferenceQueue:]`调用方式。

**测试1.** 创建一个简单的项目，勾选Core Data框，得到一个简单的Core Data模板项目。设置断点`_processReferenceQueue:`只是为了确保您可以获得该断点。

**测试 2.**注释掉实例化核心数据内容的部分，并查看是否仅通过链接到框架来达到断点。

**测试 3.**创建 MOC，但不要对它做任何其他事情。只需创建它。重复以查看是否命中断点。

**测试 4。**去掉“默认 MOC”，所以你基本上就像测试 2。现在，创建一个私有队列 MOC，用它做一个简单的事务，`performBlock`看看你是否命中了断点。

你可以看到这是怎么回事。基本上，确定哪些非常简单的用例组合会导致您**在主线程**中命中断点。

这至少会让你知道框架本身是否/何时导致这种情况发生，这反过来又应该让你了解你的复杂应用程序正在做什么。

**编辑**

好奇心战胜了我。我只是进行了一些简单的测试，在两者都设置了断点：

```
-[NSManagedObjectContext(_NSInternalAdditions) lockObjectStore]
-[_PFManagedObjectReferenceQueue _processReferenceQueue:] 
```

除非我真的在搞乱 MOC，否则我看不到任何命中。每个 MOC 都是约束并发类型。我创建了一个包含 100,000 个简单实体的数据库。

主线程使用 FRC 加载数据。我添加了一个按钮，当按下该按钮时，将启动 a`dispatch_async`并获取所有 100,000 个对象。

我看到两个断点都在补充线程中命中，但在主线程中都没有命中。如果我在主线程上使用 MOC 获取或更新，当然，我会遇到这些断点。

我在模拟器上运行。

因此，我的结论是 CoreData 本身不对您所看到的行为负责。

可能是由于 MOC 上的某些配置、持久存储协调器、持久存储或您的上下文之间的某些未知交互。

如果没有有关对象配置和实际代码的更多信息，我最好的结论是您正在代码中执行“某些操作”以导致这种情况发生。

您应该设置这些断点，并查看当它们被击中时代码中发生了什么。

# ios - 以编程方式添加配置文件和证书

> ID：12168762
> 
> 赞同：4
> 
> 时间：2012-08-28T23:03:42.957
> 
> 标签：ios, xcode, provisioning-profile

有没有办法设置一个 Xcode 项目来指向配置文件和证书文件本身，而不是通过钥匙串和 Xcode 对配置文件所做的任何事情？

如果没有，是否有一种编程方式将它们添加到钥匙串和 Xcode，以便可以将 Xcode 项目配置为使用它们？（有一个相关的问答提到将配置文件放在 Xcode 使用的某个文件夹中，但在最新的 Xcode 中似乎不再是这种情况。）

请注意，我已经知道如何手动完成所有这些操作。我需要以编程方式为可能大量的证书和配置文件执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T17:32:59.737

这个堆栈溢出问题可能是你想要的：

[制作 iPhone 应用程序时从 xcodebuild 中设置配置文件](https://stackoverflow.com/questions/866761/setting-a-provisioning-profile-from-within-xcodebuild-when-making-iphone-apps)

它允许您使用 xcodebuild 指定要使用的配置文件，如果您在命令行上执行此操作，这就是您所使用的。

# html - no-repeat 使图像消失

> ID：12168772
> 
> 赞同：4
> 
> 时间：2012-08-28T23:04:35.297
> 
> 标签：html, css, xhtml

我正在通过一个名为 html.net 的网站学习 css 和 xhtml。我在自己的网站上工作时遵循他们的指示。我刚刚开始了关于图像背景的 CSS 教程，我遇到了一个小而烦人的问题。当我这样做时，一切都很好。意思是，到处都是海盗船。它看起来像西班牙无敌舰队。

```
body {
background-color: silver;
background-image: url("pix/pirateship.jpg")

}

h1 {font-size: 40px; font-family: arial; color:yellow; background-color:#0000a0;}
h2 {color:maroon;}
li {font-size: 20px; font-family: arial; color:#87f717; background-color:#34282c;}
table {color:black; background-color:gray;}
th {color:black;} 
```

但是......当我尝试按照下一个示例进行操作时，这根本没有显示任何图像。

```
body {
background-color: silver;
background-image: url("pix/pirateship.jpg")
background-repeat: no-repeat;   

}

h1 {font-size: 40px; font-family: arial; color:yellow; background-color:#0000a0;}
h2 {color:maroon;}
li {font-size: 20px; font-family: arial; color:#87f717; background-color:#34282c;}
table {color:black; background-color:gray;}
th {color:black;} 
```

我怀疑这有什么……实际上，我知道的还不够多，无法开始怀疑。我只是把这个留给你们，希望有人知道解决方案。

PS所有这些都在与索引文件相同的文件夹中的css文件中。当我尝试使用任何 no-repeat、repeat-x 或 repeat-y 值时，我所有的海盗 vamoose。当我不使用它们时，常规背景图像显示得很好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T23:07:34.847

您在第二个示例中的背景图像选择器之后缺少分号。如果这是您的代码的复制和粘贴，那么缺少分号就是问题所在。

# c# - 使用系统日期时逻辑失败

> ID：12168780
> 
> 赞同：0
> 
> 时间：2012-08-28T23:05:04.407
> 
> 标签：c#, .net, winforms

我正在以 Windows 形式 (.Net) 制作健身房管理系统。在此我检查用户最后支付费用日期和当前系统日期，如果当前日期比最后费用支付日期大 30 天，则应用程序启动时用户将能够支付费用.. 但我的问题是如果用户更改系统日期比我的逻辑失败我做什么请建议我？（对不起，我的英语不好）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:09:09.353

如果这适用于在健身房工作的操作员，请告诉他们不要弄乱他们应该保持在合理状态下工作的机器。

如果这是为了用户自己，不要给他们一个让他们处理这类事情的应用程序，使用客户端-服务器方法，并按服务器的日期。就此而言，为什么是可执行文件而不仅仅是网页？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T23:11:59.160

您将不得不考虑外部来源，例如对受信任的计时来源（又名时间服务器）的服务调用。您可能还需要考虑签署响应以防止欺骗攻击。

客户端有太多的方法可以操纵时钟，所以最好的办法是使用客户端/服务器方法。（而且由于您没有提到任何有关如何配置客户端的内容，因此我们无法为您提供更多帮助）。

# java - “具有相同标识符的不同对象”错误

> ID：12168781
> 
> 赞同：4
> 
> 时间：2012-08-28T23:05:05.523
> 
> 标签：java, hibernate

我在 Java 项目 RMI + Hibernate 中使用，我遇到了与 NotUniqueException 相关的问题，并出现错误“具有相同标识符的不同对象”。

我有几个疑问：

*   我很确定我不会复制或创建具有相同标识符的新对象。当我使用 RMI 时，是否有可能从另一个对象创建一个新对象？

*   哪种方法使用 Hibernate 知道两个对象是相同的？等于？

*   我知道 Serializable 与 Hibernate 有关，但我不知道以什么方式？

*   如何同时使用 RMI 解决“不同对象错误”？

*   每次我使用删除或保存对象之前使用合并时是否正确？

堆栈跟踪是：

```
org.orm.PersistentException: org.hibernate.NonUniqueObjectException: a different object with the same identifier value was already associated with the session: [dcl.Administrador#10]
    at org.orm.PersistentSession.saveOrUpdate(PersistentSession.java:648)
    at org.orm.PersistentManager.saveObject(PersistentManager.java:274)
    at dcl.AdministradorDAO.save(AdministradorDAO.java:240)
    at dcl.BdAdministrador.guardarAdministrador(BdAdministrador.java:62)
    at dcl.BdAdministrador.actualizarAdministrador(BdAdministrador.java:109)
    at dcl.BdPrincipal.actualizarAdministrador(BdPrincipal.java:555)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at sun.rmi.server.UnicastServerRef.dispatch(Unknown Source)
    at sun.rmi.transport.Transport$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Unknown Source)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(Unknown Source)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(Unknown Source)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:56:15.423

如果您正在做一些事情，例如从 RMI 方法返回一个休眠对象，然后将其传递回另一个，那么您可能需要将该对象重新附加到会话。（请参阅[在 Hibernate 中重新附加分离对象的正确方法是什么？](https://stackoverflow.com/questions/912659/what-is-the-proper-way-to-re-attach-detached-objects-in-hibernate)）。

如果这没有帮助，也许可以提供更多关于您正在尝试的信息。

# c# - 数组和函数以及 xml 的问题

> ID：12168783
> 
> 赞同：-2
> 
> 时间：2012-08-28T23:05:41.473
> 
> 标签：c#, xml, arrays, winforms, file

> **可能重复：**
> [如何使这个数组+函数工作？](https://stackoverflow.com/questions/12168330/how-to-make-this-array-function-to-work)

这是我的功能，我要做的是将数组发布到 XML 文件上。我是新来的。

```
// ------------------- Functions
static void XML_Array(Dictionary<string, string> Data_Array)
{
    foreach (KeyValuePair<string, string> kvp in Data_Array)
    {
        if (kvp.Key == "XML_File")
        {
            String xmlfile = kvp.Value;
        }

        XmlTextWriter xwriter = new XmlTextWriter(xmlfile, Encoding.Unicode);

        xwriter.WriteStartDocument();

        if (kvp.Key == "StartElement")
        {
            xwriter.WriteStartElement(kvp.Value);
        }

        foreach (KeyValuePair<string, string> kvp2 in Elements_Array)
        {
            String Element_Name = kvp2.Key;
            String Element_Value = kvp2.Value.ToString();

            xwriter.WriteStartElement(Element_Name);
            xwriter.WriteString(Element_Value);
            xwriter.WriteEndElement();
        }

        xwriter.WriteEndDocument();
        xwriter.Close();
    }

} 
```

我的数组代码是这样的，当我按下 button2 时，数组将进入函数

```
 private void button2_Click(object sender, EventArgs e)
    {
        Dictionary<string, string> Data_Array = new Dictionary<string, string>();
        Data_Array.Add("XML_File", "Settings_Data.xml");
        Data_Array.Add("StartElement", "XMLFILE");

        Dictionary<string, string> Elements_Array = new Dictionary<string, string>();
        Elements_Array.Add("Name", textBox3.Text);
        Elements_Array.Add("Age", textBox4.Text);
        Elements_Array.Add("Gentle", comboBox6.SelectedIndex);

        Data_Array.Add("Elements_Array", Elements_Array);

        XML_Array(Data_Array);
    } 
```

## 更新

问题是，当然问题是我如何在 String xmlfile = 向我显示 XML_File 值 = Settings_Data.xml 的函数上进行操作。

还有一个问题是`Data_Array.Add("Elements_Array", Elements_Array)`，我在这部分出错了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:19:49.657

为什么还要打扰字典阶段？

```
private void button2_Click(object sender, EventArgs e)
    {

        XDocument doc = new XDocument()
        XElement root = new XElement("XML_File");
        root.Add(new XElement("name",textBox3.text));

        ... blah blah

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T04:32:06.973

如果我了解您的要求，那么您可能只需要以下内容：

```
private void button2_Click(object sender, EventArgs e)
{
    var data = new XDocument(new XElement("XMLFILE", new []
    {
        new XElement("Name", textBox3.Text),
        new XElement("Age", textBox4.Text),
        new XElement("Gentle", comboBox6.SelectedIndex),
    }));

    XML_Array("Settings_Data.xml", data);
} 
```

然后有这个：

```
static void XML_Array(string fileName, XDocument data)
{
    data.Save(fileName);
} 
```

此代码生成的文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<XMLFILE>
  <Name>James</Name>
  <Age>42</Age>
  <Gentle>1</Gentle>
</XMLFILE> 
```

# r - 如何修改R中knn返回的距离？

> ID：12168785
> 
> 赞同：0
> 
> 时间：2012-08-28T23:05:54.787
> 
> 标签：r

我有以下代码使用[FNN 包](http://cran.r-project.org/web/packages/FNN/index.html)：

```
k <- knn(train, test, labels, k = 10, algorithm="cover_tree") 
```

我可以使用下面的代码查看调用 knn 返回的数据：

```
> attr(k, "nn.dist")[1,]
 [1] 1385.398 1687.901 1722.884 1846.694 1978.250 1998.157 2003.518 2004.494 2054.382 2059.128
> attr(k, "nn.index")[1,]
 [1] 983 362 170 303 914 843 480 489 474 355 
```

我想做的是`nn.dist`根据`nn.index`.

我知道这可能没有意义，但为了争论，我将如何将每个值设置`nn.dist`为`nn.dist * nn.index/1000`？

所以`attr(k, "nn.dist")[1,1]`会从`1385.398`到`1385.398*983/1000`(1361.846)

并且 `attr(k, "nn.dist")[1,2]`会从`1687.901`到`1687.901*362/1000`（611.02）等。

我可以使用以下代码一次执行此操作：

```
attr(k, "nn.dist")[1,1] = attr(k, "nn.dist")[1,1]*attr(k, "nn.index")[1,1]/1000 
```

但我需要一种方法来对每个元素执行此操作，而不是每次都编写它......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:17:50.447

基本运算符 、 和 是矢量化的`*`，并且`+`将在数组上按元素工作。`/``-`

因此，它很容易

```
attr(k, "nn.dist") * attr(k, "nn.index") /1000 
```

如果您只想对 的第一行执行此操作`nn.dist`，则

```
attr(k, "nn.dist")[1,]* attr(k, "nn.index")[1,] /1000 
```

您可以重新分配 的`nn.dist`属性`k`，但我建议复制以确保您知道它不是原始输出，例如

```
k_adj <- k
attr(k_adj, "nn.dist") <- attr(k_adj, "nn.dist") * attr(k_adj, "nn.index") /1000 
```

或者您可以简单地为原始属性添加一个新属性

```
 attr(k, 'nn.dist.adj') <- attr(k, "nn.dist") * attr(k, "nn.index") /1000 
```

# python - 尝试安装 feedparser 时“egg_base”选项出错

> ID：12168790
> 
> 赞同：3
> 
> 时间：2012-08-28T23:06:18.947
> 
> 标签：python, installation, feedparser

我想安装[feedparser](http://code.google.com/p/feedparser/)。

这就是尝试在 Windows 命令行中安装 feedparser 时发生的情况。

```
> python.exe setup.py install
running install
running bdist_egg
error: error in 'egg_base' option: 'feedparser does not exist or is not a directory 
```

我正在使用 Python 2.7（feedparser 站点声明“它在 Python 2.4 上一直运行到 3.2”）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T11:17:58.510

[使用pip](http://pypi.python.org/pypi/pip#downloads)安装 feedparser ：

```
pip install feedparser 
```

pip 是一个用于安装和管理 Python 包的软件工具。它具有命令行界面，可让您通过发出单个命令来安装 Python 包。[如何在 Windows 上安装 pip](https://stackoverflow.com/questions/4750806/how-to-install-pip-on-windows)。

# objective-c - 在拖动过程中将“添加”/加号图标“附加”到 NSImage

> ID：12168791
> 
> 赞同：2
> 
> 时间：2012-08-28T23:06:21.193
> 
> 标签：objective-c, macos, cocoa, nsimage

我在我的应用程序的自定义日历视图中实现了拖放操作，它很好地为*移动*项目提供了支持。

但是，我想为*复制*项目添加视觉支持。我已经在后端实现了这个（当按住 Option 键时），但我想用一个更加上下文敏感的图标来补充这个功能。

我`NSImage`从事件中创建了一个，如我的日历中所示。这使得看起来好像实际项目正在被拖动。（这很好！）：

```
NSImage *i = ...;

...

[self dragImage:i at:thePoint offset:NSZeroSize event:theEvent pasteboard:pboard source:nil slideBack:NO]; 
```

但是，在用户按住 Option 键的情况下，我想将“加号”或“复制”绿色加号图标叠加在我的顶部，`NSImage`因此很明显下降会导致复制。

有什么简单的方法可以做到这一点吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T23:47:21.567

您可以实现`draggingEntered:`和/或`draggingUpdated:`在您的视图中`NSDragOperationCopy`自动返回以获取绿色加号图标。

# ember.js - 使用 Ember.StateManager（而不是 Ember.Router）进行视图管理

> ID：12168793
> 
> 赞同：1
> 
> 时间：2012-08-28T23:06:27.500
> 
> 标签：ember.js

我想使用 Ember 创建一个“信息标志”类型的应用程序；显示的数据会定期更新，但没有用户输入或交互。应用程序根据管理员提供的 URL 参数进行配置和初始化。应用程序的布局和内容将根据应用程序监控的提要中的数据而改变。

Ember.Router 对于这个任务似乎有点过分了，因为我不需要/不能将基于 URL 的路由映射到应用程序状态。Ember.StateManager 看起来很完美，因为它允许我仅根据应用程序逻辑中满足的条件以编程方式在状态之间转换，而忽略当前 URL。已弃用的 Ember.ViewState 似乎是使用 Ember.StateManger 时管理视图的方式。

使用 Ember.StateManger 在 DOM 中管理视图的当前最佳实践是什么？

有没有办法用 Ember.Router 代替我描述的内容？

谢谢，亚伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:45:12.373

在阅读了您的初步解释后，我觉得您目前不需要任何状态。当应用程序在这些状态下需要不同的行为时，您需要定义不同的应用程序。看起来您的应用程序行为没有改变，而只是查看。

因此，您可以使用一些车把条件帮助程序以及控制器中的一些派生属性来完成这项工作，以指示是否有任何当前的建议。

```
{{#view App.myView}}
  {{#if hasAdvisory}}
    <div class="col-2">
      <div class="col1">
        {{#each bus}}
          //bus details
        {{/each}}
      </div>
      <div class="col2">
        //advisory details
      </div>
    </div>
  {{else}}
    <div class="col-1">
      <div class="col">
        {{#each bus}}
          //bus details
        {{/each}}
      </div>
    </div>
  {{/if}}
{{/view}} 
```

请解释一下，如果您只是需要这个，或者当您有咨询时和没有咨询时您是否计划任何不同的应用程序行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T02:41:26.217

通常，用于管理`Ember.Router`基于应用程序中的视图和控制器的相同技术可用于`Ember.StateManager`. 具体来说，使用 outlets with`Em.Controller#connectController`是切换独立于状态管理的视图的绝佳方式。

# algorithm - 模拟色盲的算法？

> ID：12168795
> 
> 赞同：13
> 
> 时间：2012-08-28T23:06:40.460
> 
> 标签：algorithm, colors, color-blindness

网上有许多工具可以拍摄图像并模拟该图像对于色盲患者的样子。但是，我找不到这些算法的任何描述。

是否有用于模拟色盲的标准算法？我知道有许多类型的色盲（[有关更多详细信息，请参阅有关该主题的 Wikipedia 页面](http://en.wikipedia.org/wiki/Color_blindness)），但我主要对模拟二色性的算法感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-10-28T12:40:22.517

我也有同样的挫败感，并写了[一篇比较开源色盲模拟](https://daltonlens.org/opensource-cvd-simulation/)的文章。简而言之，主要有四种算法：

1.  Coblis 和“HCIRN 色盲模拟功能”。您会在很多地方找到这个，以及[MaPePeR](https://github.com/MaPePeR/jsColorblindSimulator)的 Javascript 实现。完整的 HCIRN 模拟功能没有得到适当的评估，但在实践中是合理的。然而，colorjack 的“ColorMatrix”近似值非常不准确，应该完全避免（作者本人说过）。不幸的是，它仍然很普遍，因为它很容易复制/粘贴。

2.  Brettel、Viénot 和 Mollon（1997 年）的“二色光颜色外观的计算机模拟”。一个非常可靠的参考。适用于各种二色性。[我在libDaltonLens](https://github.com/DaltonLens/libDaltonLens)中编写了一个公共领域的 C 实现。

3.  Viénot、Brettel 和 Mollon（1999 年）的“用于检查二色光显示器易读性的数字视频颜色图”。也是一个可靠的参考，简化了 1997 年关于红眼和红眼（3 种色盲中的 2 种）的论文。也在 libDaltonLens 中。

4.  Machado 等人的“基于生理学的色觉缺陷模拟模型”。（2009 年）。预先计算的矩阵可以[在他们的网站上找到](https://www.inf.ufrgs.br/%7Eoliveira/pubs_files/CVD_Simulation/CVD_Simulation.html)，这样可以很容易地自己实现。您只需添加从 sRGB 到 linearRGB 的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T23:10:25.357

看起来您的答案在您链接的维基百科条目中。

例如：

> 红眼病（1% 的男性）：缺乏对长波长敏感的视网膜视锥细胞，患有这种疾病的人无法区分光谱中绿色-黄色-红色部分的颜色。它们在 492 nm 附近的绿色波长处有一个中性点——也就是说，它们无法区分该波长的光和白色光。

因此，您需要将绿-黄-红光谱中的任何颜色去饱和为白色。 [图像色彩饱和度](https://stackoverflow.com/questions/8409606/image-color-saturation)

其他 2 种类型的二色性可以类似地处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-03T16:50:31.663

首先，我们必须了解眼睛是如何工作的：

1.  正常/健康的眼睛有 3 种视锥细胞和 1 种视杆细胞，它们在可见光谱范围内具有激活功能。

2.  然后它们的激活会通过某些功能来产生进入大脑的信号。粗略地说，该函数以 4 个通道作为输入，产生 3 个通道作为输出（即亮度、黄蓝和红绿）。

3.  一个色盲的人会有这两种东西中的一种是不同的（afaik 通常/总是 1.），所以例如这个人会缺少一种类型的锥体，或者锥体的激活会不同。

最好的办法是：

1.  将 RGB 空间中的所有像素转换为频率组合（具有强度）。为此，首先计算（健康人的）三个锥体中的每一个的激活，然后为会导致相同激活的一组频率（+强度）找到一个“自然”解决方案。当然，一种解决方案是原始的三个 RGB 频率及其强度，但原始图像实际上不太可能具有这种情况。例如，一个自然的解决方案是围绕某个频率（或什至只是一个频率）的正态分布。

2.  然后，（再次针对每个像素）计算色盲人的视锥细胞对您的频率组合的激活。

3.  最后，找到一个 RGB 值，使健康人与色盲人具有相同的激活。

请注意，如果这些激活的组合方式对于相关类型的色盲也不同，您可能希望在上述步骤中也执行此操作。（所以不是匹配激活，而是在激活上匹配函数的结果）。

# html - 是否允许在里面使用其他标签 ?

Is it correct practice or valid syntax to use other tags inside a `<title></code>?</p> <p>An example for multi-language title</p> <pre><code</h1> <blockquote> <p>ID：12168806</p> <p>赞同：14</p> <p>时间：2012-08-28T23:07:49.203</p> <p>标签：html, seo, semantic-markup</p> </blockquote> <hr/> <h2>回答 #1</h2> <blockquote> <p>赞同：21</p> <p>时间：2012-08-28T23:10:31.537</p> </blockquote> <p>见<a href="http://www.w3.org/TR/html401/struct/global.html#h-7.4.2" rel="noreferrer">http://www.w3.org/TR/html401/struct/global.html#h-7.4.2</a>：</p> <blockquote> <p>标题可能包含字符实体（用于重音字符、特殊字符等），但<strong>可能不包含其他标记（包括注释）</strong>。</p> </blockquote> <p>（我的重点）</p> <hr/> <h2>回答 #2</h2> <blockquote> <p>赞同：2</p> <p>时间：2012-08-28T23:11:11.937</p> </blockquote> <p>不，可能不会</p> <p><a href="http://www.w3.org/Provider/Style/TITLE.html" rel="nofollow">http://www.w3.org/Provider/Style/TITLE.html</a></p> <hr/> <h2>回答 #3</h2> <blockquote> <p>赞同：0</p> <p>时间：2012-08-28T23:10:29.103</p> </blockquote> <p>您可以尝试使用您想要的任何内容，但它将全部用作标题字符串，而无需浏览器进行任何额外的解析/处理（如果这是您所期望的）。RFC 说你必须抵制在标题中放置标记。</p> <hr/> <h2>回答 #4</h2> <blockquote> <p>赞同：0</p> <p>时间：2018-09-03T03:34:51.520</p> </blockquote> <p><strong>TLDR：</strong>标签<code><title></code>(1) 必须包含文本（不能为空），(2) 必须<em>只</em>包含文本（即没有其他元素），以及 (3) 必须包含不只是空白的文本。</p> <hr/> <p><a href="https://www.w3.org/TR/html52/document-metadata.html#the-title-element" rel="nofollow noreferrer">在 HTML 5</a>中，元素的<strong>内容模型</strong><code>title</code>是：</p> <blockquote> <p>不是元素间空白的文本。</p> </blockquote> <p>其中<strong>元素间空白</strong>是任何为空或仅包含<strong>空格字符</strong>序列的 Text 节点：</p> <blockquote> <ul> <li>U+0020 空间</li> <li>U+0009 字符表（制表符）</li> <li>U+000A 换行 (LF)</li> <li>U+000C 换页 (FF)</li> <li>U+000D 回车 (CR)</li> </ul> </blockquote> </body> </html></title>`

# swing - java中的状态栏？

> ID：12168809
> 
> 赞同：0
> 
> 时间：2012-08-28T23:08:12.597
> 
> 标签：swing, stl, jframe, jpanel, statusbar

如何让“绘图线、矩形和椭圆”出现在底部左侧？我目前在左上角，我不知道怎么做？请帮忙

我也尝试过，但它没有像

JLabel label = new JLabel("文本标签", JLabel.LEFT);

label.setVerticalAlignment(JLabel.BOTTOM);

```
import java.awt.*;
import javax.swing.*; 

public class LinesRectsOvalsJPanel extends JPanel {

 public void paintComponent( Graphics g ) {

   super.paintComponent( g ); 

     this.setBackground( Color.WHITE );

     //   x y width height
     g.setColor(Color.BLACK);
     g.drawLine(5,10,5,30);
     g.setColor(Color.BLUE);
     g.drawLine(18,70,127,24);
     g.setColor(Color.RED);
     g.drawLine(25,45,100,38);

     g.setColor(Color.YELLOW);
     g.drawOval(23,25,23,55);
     g.setColor(Color.BLACK);
     g.drawOval(15,14,40,78);
     g.setColor(Color.CYAN);
     g.drawOval(180,102,5,90);
     g.setColor(Color.RED);
     g.drawOval(21,20,89,11);
     g.setColor(Color.BLUE);
     g.drawOval(35,87,39,27);

     g.setColor(Color.YELLOW);
     g.fillRect(87,5,5,60);

     g.setColor(Color.GREEN);
     g.fillRect(105,15,15,85);

     g.setColor(Color.CYAN);
     g.fillRect(14,45,76,86);

     g.setColor(Color.RED);
     g.fillRect(70,79,65,86);

     g.setColor(Color.BLUE);
     g.fillRect(90,108,5,8); 

      }

    }

    import java.awt.*;
    import javax.swing.*;

    public class LinesRectsOvals {

    public static void main( String args[] ) {

    JFrame frame =
      new JFrame( "Drawing lines, rectangles and ovals");

         LinesRectsOvalsJPanel linesRectsOvalsJPanel =
      new LinesRectsOvalsJPanel();

         linesRectsOvalsJPanel.setBackground( Color.WHITE );
      frame.add( linesRectsOvalsJPanel ); // add panel to frame
      frame.setSize( 300, 300 ); // set frame size
      frame.setVisible( true ); 
        }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:13:32.297

用于绘制线条的 x 和 y 值相对于屏幕的左上角。要参考底角，请使用低 x 和大 y 值。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T03:18:12.530

index 原则上是正确的。在实践中，您会想知道要绘制到的容器的高度和宽度。

尝试这个

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);

    this.setBackground(Color.WHITE);

    int width = getWidth() - 1;
    int height = getHeight() - 1;

    //   x y width height
    g.setColor(Color.BLACK);
    g.drawLine(5, height - 30 - 10, 5, 30);
    g.setColor(Color.BLUE);
    g.drawLine(18, height - 24 - 70, 127, 24);
    g.setColor(Color.RED);
    g.drawLine(25, height - 38 - 45, 100, 38);

    g.setColor(Color.YELLOW);
    g.drawOval(23, height - 55 - 25, 23, 55);
    g.setColor(Color.BLACK);
    g.drawOval(15, height - 78 - 14, 40, 78);
    g.setColor(Color.CYAN);
    g.drawOval(180, height - 90 - 102, 5, 90);
    g.setColor(Color.RED);
    g.drawOval(21, height - 11 - 20, 89, 11);
    g.setColor(Color.BLUE);
    g.drawOval(35, height - 27 - 87, 39, 27);

    g.setColor(Color.YELLOW);
    g.fillRect(87, height - 50 - 5, 5, 60);

    g.setColor(Color.GREEN);
    g.fillRect(105, height - 85 - 15, 15, 85);

    g.setColor(Color.CYAN);
    g.fillRect(14, height - 86 - 45, 76, 86);

    g.setColor(Color.RED);
    g.fillRect(70, height - 86 - 79, 65, 86);

    g.setColor(Color.BLUE);
    g.fillRect(90, height - 8 - 108, 5, 8);

} 
```

这里的重要部分是

```
int width = getWidth() - 1;
int height = getHeight() - 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T06:49:31.137

我将首先检查您的代码以解释发生了什么：

```
JLabel label = new JLabel("Text Label", JLabel.LEFT);
label.setVerticalAlignment(JLabel.BOTTOM); 
```

`setVerticalAlignment`唯一影响标签文本在标签内的定位方式，而不影响标签在父容器内的定位方式。请参阅该方法的 javadoc

> 设置标签内容沿 Y 轴的对齐方式。

您的“绘图线...”字符串出现在顶部的事实是由于以下代码

```
JFrame frame = new JFrame( "Drawing lines, rectangles and ovals"); 
```

这将在您指定框架标题的位置创建一个新框架。就像所有其他程序一样，标题显示在顶部（以及最大化、关闭和最小化按钮）。

如果你想在底部有文本，你可以简单地使用适当的布局管理器。

```
JFrame frame = new JFrame( "Whatever title you want" );
JPanel contentPane = new JPanel( new BorderLayout() );

LinesRectsOvalsJPanel linesRectsOvalsJPanel =
      new LinesRectsOvalsJPanel();
contentPane.add( linesRectsOvalsJPanel, BorderLayout.CENTER );

Component statusBar = ...;//probably a JLabel is sufficient
contentPane.add( statusBar, BorderLayout.SOUTH ); 
```

更多关于布局管理器和示例的链接可以在[Swing 信息页面](https://stackoverflow.com/tags/swing/info)上找到。

# .net - VB.NET 数据透视表更改数据源

> ID：12168816
> 
> 赞同：0
> 
> 时间：2012-08-28T23:09:42.780
> 
> 标签：.net, vb.net, excel, com

我正在尝试编写一个程序，该程序获取带有数据透视表的文件和带有汇总信息的数据表，将这两个选项卡复制到新工作簿中，从汇总信息中删除一些信息，然后刷新数据透视表新数据。

我的一切工作都很好，除了当我尝试以编程方式更改 VB.NET 中数据透视表的数据源时，我得到一大堆 COM 异常未处理错误。我的代码基于[此](https://stackoverflow.com/questions/6975300/how-to-change-the-source-data-of-an-excel-pivot-table)SO 帖子。

当我使用宏记录器在 VBA 中执行此操作时，它工作正常并给出以下代码（注意我尝试使用命名范围，所以这里的“range1”指的是我感兴趣的区域。我也尝试过没有命名范围） ：

```
 ActiveSheet.PivotTables("PivotTable3").ChangePivotCache ActiveWorkbook. _
    PivotCaches.Create(SourceType:=xlDatabase, SourceData:="Range1", Version _
    :=xlPivotTableVersion12) 
```

这似乎与 SO 帖子的建议非常吻合。这是我最近尝试过的代码：

```
 Dim pivotTbl As Excel.PivotTable = tableSheet.PivotTables("PivotTable3")

        Dim holdRows As Integer = hold.UsedRange.Rows.Count
        Dim holdCols As Integer = hold.UsedRange.Columns.Count

        Dim pvtRng As Excel.Range = hold.Range("a1", hold.Range("a1").Offset(holdRows - 1, holdCols - 1))

        savebook.Names.Add(Name:="Range1", RefersTo:=pvtRng)
        pivotTbl.ChangePivotCache(savebook.PivotCaches.Create(SourceType:=Excel.XlPivotTableSourceType.xlDatabase, SourceData:="Range1")) 
```

我已经为我的数据透视表源类型尝试了外部、数据库和合并，以及使用命名范围、无命名范围、在 SourceData 中定义范围等。

现在我知道，如果有疑问，最好花一些时间在 MSDN 上，我遇到了[ChangePivotCache](http://msdn.microsoft.com/en-us/library/office/microsoft.office.interop.excel.pivottable.changepivotcache.aspx)页面，上面写着：

> ChangePivotCache(Object) 方法只能与使用存储在工作表上的数据作为其数据源的数据透视表一起使用。如果将 ChangePivotCache(Object) 方法与连接到外部数据源的数据透视表一起使用，则会发生运行时错误。

所以我想知道的是，我的新工作簿具有指向原始工作簿的链接这一事实是否是问题的一部分。我已经开始尝试以编程方式和手动删除链接，但当然它并没有消失。

最令人沮丧的部分是我从宏记录器发布的 VBA 代码工作得很好而且很直观，所以我有点不明白为什么 VB.NET 试图让我的一天如此艰难.

任何帮助将不胜感激，一如既往，非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T15:41:08.697

好吧，所以除了引用原始工作簿数据透视表而不是复制的数据透视表（一个称为 tablesheet，另一个称为 tblsheet，因此我得到了所有注意和更好的变量命名方面的教训）。所以如果你确定你的引用是正确的，上面的代码应该像梦一样工作。为了那些还在 VB.NET 中自动化 excel 的人，我将把它搁置一旁。

# mysql - mySQL CASE 给出 Err 1064

> ID：12168818
> 
> 赞同：3
> 
> 时间：2012-08-28T23:10:00.830
> 
> 标签：mysql, case, mysql-error-1064

我一直在寻找这个答案。我有两个相同的表，contacts 和 contacts_copy。每个都有全名、公司、街道、城市、州和邮编。如果contacts.street 不为NULL，那么我选择这些项目。如果是，我从重复表中选择这些项目。

```
SELECT contacts.fullname,
CASE WHEN contacts.street IS NULL
THEN
contacts_copy.Company,
contacts_copy.street,
contacts_copy.city,
contacts_copy.state,
contacts_copy.zip
ELSE
contacts.Company,
contacts.street,
contacts.city,
contacts.state,
contacts.zip
END CASE
FROM contacts_copy, contacts
WHERE contacts.Company = contacts_copy.fullname
AND contacts.kind = 'Person'
ORDER BY contacts.last DESC

I keep getting:
[Err] 1064 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '
contacts_copy.street,
contacts_copy.city,
contacts_copy.state,
contacts_cop' at line 4 
```

必须有一种更简单的方法来做到这一点。MySQL 错误消息非常无用。

谢谢，

本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T23:12:00.367

我认为你不能用 MySQL 或我见过的任何类型的 SQL 来做到这一点。您选择的列必须是特定的，但值可以是有条件的。

您可以做的是`IF()`为结果中的每一列设置一个子句：

```
SELECT contacts.fullname,
  IF(contacts.street IS NULL, contacts_copy.Company, contacts.Company),
  ... 
```

那应该有同样的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T23:27:58.470

**编辑：**表别名已更改，并`company.kind`添加了额外的子句。

一种方法是使用`UNION`：

```
SELECT person.last,
       person.fullname,
       person.Company,
       person.street,
       person.city,
       person.state,
       person.zip
  FROM contacts person
  WHERE person.kind = 'Person'
    AND person.street IS NOT NULL
UNION
SELECT person.last,
       person.fullname,
       company.Company,
       company.street,
       company.city,
       company.state,
       company.zip
  FROM contacts person
  INNER JOIN contacts company ON person.Company = company.fullname
  WHERE company.kind = 'Company'
    AND person.kind = 'Person'
    AND person.street IS NULL
ORDER BY 1 DESC 
```

不幸的是，这确实需要您在结果中包含排序列。

鹰眼注意：与最初的尝试不同，此版本将包括行 from `person`where `street`is not`NULL`尽管不`company`存在匹配的条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T22:16:57.230

```
SELECT c1.fullname AS fullname,  
c1.Company AS company,  
c1.first AS firstname,  
c1.last AS lastname,  
c2.street AS street,  
c2.city AS city,  
c2.state AS state,  
c2.zip AS zip   
FROM contacts AS c1, contacts AS c2 
WHERE c1.kind = 'Person'   
AND c1.Company = c2.fullname   
ORDER BY c1.last ASC; 
```

是答案。

# windows-8 - Windows 8 现代 ui 应用程序 - 访问数据

> ID：12168819
> 
> 赞同：-1
> 
> 时间：2012-08-28T23:10:14.657
> 
> 标签：windows-8, microsoft-metro

我在哪里可以找到安装了现代 ui 应用程序的文件夹？我正在开发一些使用 .txt 文件来存储信息的应用程序（win8 不支持 arm - facepalm 上的数据库），但它们似乎无法正常工作 - 这就是我想要访问它们的原因。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:13:26.573

这不是 Metro 的正确做事方式。我假设您的意思是 db 文件或 txt 文件。只需从项目文件夹中访问本地文本文件。

这是一个很好的教程，关于你将如何去做： http: [//www.codeproject.com/Articles/432876/Windows-8-The-Right-Way-to-Read-Write-Files-in-Win](http://www.codeproject.com/Articles/432876/Windows-8-The-Right-Way-to-Read-Write-Files-in-Win)

一个例子：

```
 private async void ProjectFile()
{
    // settings
    var _Path = @"Metro.Helpers.Tests\MyFolder\MyFolder.txt";
    var _Folder = Windows.ApplicationModel.Package.Current.InstalledLocation;

    // acquire file
    var _File = await _Folder.GetFileAsync(_Path);
    Assert.IsNotNull(_File, "Acquire file");

    // read content
    var _ReadThis = await Windows.Storage.FileIO.ReadTextAsync(_File);
    Assert.AreEqual("Hello world!", _ReadThis, "Contents correct");
} 
```

# c++ - std::unique_ptr<> 作为基于节点的结构中的指针

> ID：12168821
> 
> 赞同：5
> 
> 时间：2012-08-28T23:10:20.253
> 
> 标签：c++, c++11, unique-ptr

由于大多数人都喜欢谜题，我会以（拼写错误 :)）gotw 之类的介绍开始这个问题，**请注意**，如果您不关心它，您可以跳过热身（JG 问题）并阅读 G 问题，因为那是我的“真正的问题”。

> 在查看潜在新员工提供的代码示例时，您偶然发现了一个链表，该链表的实现使用了现代 C++11 特性，即 std::unique_ptr<>。

```
template <typename T> 
struct Node { 
   T data; 
   std::unique_ptr<Node<T>> next; 
   Node () {} 
   Node(const T& data_): data(data_) {} 
   Node(Node& other) { std::static_assert(false,"OH NOES"); } 
   Node& operator= (const Node& other) { 
     std::static_assert(false,"OH NOES"); 
     return *new Node(); 
   } 
public: 
   void addNext(const T& t) { 
      next.reset(new Node<T>(t)); 
   }
};

template<typename T>
class FwdList
{
    std::unique_ptr<Node<T>> head;
public:
    void add(const T& t)
    {
        if (head == nullptr)
            head.reset( new Node<T>(t));
        else {
            Node<T>* curr_node = head.get();
            while (curr_node->next!=nullptr) {
                curr_node = curr_node->next.get();
            }
            curr_node->addNext(t);
        }
    }
    void clear() {
        head.reset(); 
    }
 }; 
```

**JG问题：**

> 使用此代码确定（忽略缺少的功能）问题。

**G问题：（** 根据答案添加2。）
1。

> 有没有办法在不使用原始指针的情况下解决问题的 JG 部分中检测到的问题？

2.

> 修复是否适用于节点包含多个指针的容器（例如二叉树具有指向左右子节点的指针）

**答案：**
JG：

> 堆栈溢出 ：）。原因：由 .clear() 函数触发的 unique_ptr<> 析构函数的递归。

G：

> （？？？）我不知道，我的直觉是没有，但我想咨询专家。

长话短说：有没有办法在基于节点的结构中使用智能指针，而不是最终出现 SO 问题？请不要说树可能不会太深，或者类似的东西，我正在寻找一般的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T23:23:55.223

您可以迭代清除它，确保`next`在销毁节点之前每个节点的指针为空：

```
while (head) {
    head = std::move(head->next);
} 
```

二叉树更棘手。但是您可以通过迭代地切断右侧分支并将它们添加到左下角来将其展平为列表，如下所示：

```
node * find_bottom_left(node * head) {
    while (head && head->left) {
        head = head->left.get();
    }
    return head;
}

node * bottom = find_bottom_left(head.get());

while (head) {
    bottom->left = std::move(head->right);
    bottom = find_bottom_left(bottom);
    head = std::move(head->left);
} 
```

# c# - C# 中的异常处理是否与 ECMA-335 标准相矛盾？

> ID：12168825
> 
> 赞同：23
> 
> 时间：2012-08-28T23:10:45.387
> 
> 标签：c#, .net, exception-handling, specifications

我的理解是基于[这篇很长但很棒的文章](http://blogs.msdn.com/b/cbrumme/archive/2003/10/01/51524.aspx)，它支持 C# 规范中列出的行为。

CLI 标准 (ECMA-335) 表明，如果没有合适的捕获，运行时应立即终止。.NET 运行时不这样做，相反，它似乎倾向于 C# 规范 (EMC-334) 的行为。

首先，我觉得奇怪的是语言规范似乎正在定义框架行为。其次，他们似乎自相矛盾。

*   它们是否相互矛盾，还是我理解了文档的错误含义？
*   运行时是否必须以这种方式进行异常处理才能符合标准？

作为一个可选问题，哪一个是“正确”的，例如，如果我要编写自己的 CLI 实现，我应该使用哪一个？请注意，EMCA-335 (CLI) 文档是两个月前更新的，而 EMCA-334 (C#) 是在 2006 年更新的。

* * *

### [ECMA-335 分区 I 第 12.4.2.5 节](http://www.ecma-international.org/publications/standards/Ecma-335.htm)

> *   发生异常时，CLI 会在数组中搜索第一个受保护的块
>     *   保护包括当前指令指针的区域和
>     *   是一个 catch 处理程序块并且
>     *   谁的过滤器希望处理异常
> *   如果在当前方法中未找到匹配项，则搜索调用方法，依此类推。如果未找到匹配项，CLI 将转储堆栈跟踪并中止程序。
>     
>     
> *   如果找到匹配项，CLI 将堆栈返回到刚刚找到的点，但这次调用 finally 和故障处理程序。然后它启动相应的异常处理程序。

### [C# 规范 §15.9.5 和 §15.10](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-334.pdf)（[MSDN 上的](http://msdn.microsoft.com/en-us/library/ms228593.aspx)§8.9.5 和 §8.10 ）

它与 CLI 标准之间的主要区别在于，无论是否找到了 catch 块，应用程序都将不仅存在，而且仍会展开堆栈，并处理 finally 处理程序。

我建议阅读标准本身以更好地理解这一点，因为下面是一个非常粗略的总结。它逐步概述了如何在每种可能的情况下执行 try 语句。

> *   在引发异常的函数中：
>     *   在每个 try 语句中查找匹配的 catch 子句
>         *   如果存在，则执行 catch 语句
>     *   finally 块如果存在则执行
> *   如果没有处理程序，则在调用函数中重复上述步骤
> *   如果异常处理终止了当前线程中的所有函数成员调用，表明该线程没有异常处理程序，则该线程本身终止。这种终止的影响是实现定义的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T00:13:33.960

这里没有冲突。C# 语言规范的措辞如下：

> 如果try 语句没有catch 子句或没有catch 子句匹配异常：
> • 如果try 语句有finally 块，则执行finally 块。
> • 异常传播到下一个封闭的try 语句。

Bullet 2 这里特别*没有说明没有下一个封闭的 try 语句时会发生什么*。为此，请转到 8.9.5 的末尾：

> 如果异常处理终止了当前线程中的所有函数成员调用，表明该线程没有异常处理程序，则该线程本身终止。这种终止的影响是实现定义的。

它当然是实现定义的。除了 Ecma 335 规范之外，异常处理策略是 Microsoft CLR 中的一个可配置项。由 ICLRPolicyManager::SetActionOnFailure() 控制。`<legacyUnhandledExceptionPolicy>`进而使用app.exe.config 文件元素在默认主机中进行配置。CLR 2.0 及更高版本的默认设置是立即终止程序。

否则，这是相当低效的圣经诠释学。对于 C# 程序员来说，这一切都不足为奇，尤其是考虑到它是多么容易测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T00:26:28.880

我认为这可能只是一个模糊的措辞问题。

> 如果在当前方法中未找到匹配项，则搜索调用方法，依此类推。如果未找到匹配项，CLI 将转储堆栈跟踪并中止程序。

好的，在 C# 中确实如此。我们都知道，如果我们没有`catch`then 异常会导致我们的程序崩溃。

> 如果找到匹配项，CLI 将堆栈返回到刚刚找到的点，但这次调用 finally 和故障处理程序。然后它启动相应的异常处理程序。

这也符合我们从 C# 中知道的内容。如果有一些`finally`（我们看不到`fault`）块需要处理，因为我们从抛出异常到我们的`catch`块向上堆栈，它们被处理，但它停在那里并且不再向上堆栈。

很多事情取决于我们如何阅读我刚刚引用的第二段摘录开头的“如果”。您将其阅读为“如果……那么……否则没有这样的事情”。虽然它可以被解读为第一个摘录，标识堆栈中将被走到的点：如果有 a `catch`，那么它会走到那个点。如果没有捕获，那么它会走到堆栈的最顶端，我们会得到一个转储并中止。finally 处理程序（和故障处理程序）仍然被调用，但重点不是匹配的 catch 处理程序。

您的阅读是最字面的，而我的阅读则有点延伸。但是，我的确实与`finally`同一标准中其他地方的描述相匹配，最接近

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T02:38:04.163

OP中[引用的文章](http://blogs.msdn.com/b/cbrumme/archive/2003/10/01/51524.aspx)有一个不正确的基本假设：

> 当然，如果不首先考虑 Windows 结构化异常处理 (SEH)，我们就不能谈论托管异常。我们还需要查看 C++ 异常模型。这是因为托管异常和 C++ 异常都是在底层 SEH 机制之上实现的，并且因为托管异常必须与 SEH 和 C++ 异常互操作。

CLR 标准 (ISO 23271/ECMA 335) 有意与平台无关。Microsoft 的实现是许多可能的实现之一（当然，Mono 是另一种）。

我敢肯定，与 Windows 结构化异常处理和 C++ 异常处理的互操作性是 Microsoft 的选择，而不是 ISO 23271 的要求。

# ruby-on-rails-3.1 - Save 方法在有效时回滚并返回 nil

> ID：12168828
> 
> 赞同：0
> 
> 时间：2012-08-28T23:11:01.417
> 
> 标签：ruby-on-rails-3.1

我在使用 Rails 的`save`方法时遇到问题；它似乎在应该失败的时候失败，但在应该失败的时候却没有成功。

我有一个`Claim`模型，可以用 any 保存`Status`，但如果要提交 ( `status_id == 5`)，则必须接受条款和条件。

```
validates :terms_and_conditions, :acceptance => {:accept => true, :if => :submitted?}

def submitted? # simplified for this example
  status_id == 5
end 
```

但是，我还存储了条款被接受的*时间*`tnc_accepted_at`（在 db field 下），并定义`terms_and_conditions`为该字段的存在。（这点工作正常，我只是不确定它是否与我的问题有关。）

```
def terms_and_conditions
  tnc_accepted_at.present?
end

def terms_and_conditions=(bool) # browser will pass '0' or '1'
  self.tnc_accepted_at = bool.in?([false, nil, 0, '', '0']) ? nil : DateTime.now
end 
```

但这就是问题所在。索赔以这种状态开始：

```
claim
 => #<Claim id: 51, tnc_accepted_at: nil, status_id: 4>
claim.valid?
 => true 
```

然后我尝试提交它：

```
claim.update_attributes! :status_id => 5
   (0.3ms)  BEGIN
  ClaimItem Load (1.5ms)  SELECT --blah blah blah
  Status Load (0.6ms)  SELECT --blah blah blah
   (0.4ms)  ROLLBACK
ActiveRecord::RecordInvalid: Validation failed: Terms and conditions must be accepted 
```

...这是完美的，但是当我尝试纠正错误时：

```
claim.update_attributes! :terms_and_conditions => true
   (0.3ms)  BEGIN
  ClaimItem Load (1.1ms)  SELECT --blah blah blah
   (0.7ms)  UPDATE "claims" --blah blah blah
   (0.2ms)  ROLLBACK
 => nil 
```

......这很奇怪！而且我注意到，无论在何种情况下（使用`save`, `save!`, `update_attributes`, `update_attributes!`, `:tnc_accepted_at => DateTime.now`，都没有关系），每当我尝试保存记录时，我也会得到这个 - 如果它是*有效*的，它会回滚并返回 nil；如果它是*无效*的，则会如您所料地引发错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T02:47:56.833

也许这个问题太老了？

我认为问题出在`"new record"`旗帜上（正如您所建议的那样）。如果保存了一条新记录，`"new record"`则设置为 false，很好，但如果有回滚，`"new record"`则仍将具有值 false，就像保存中的其他填充列将保持其值一样。如果尝试了新的保存（使用正确的值）`save`，Rails 中的方法将执行 db-update 而不是 db-insert，因为`"new record"`它是错误的。

我在一个非常旧的 Rails 版本中注意到了这一点，认为它现在会被修复。我在 ActiveRecord::Base 中用这个方法修复了它（Rails 必须在内部仍然使用@new_record 才能工作）

```
def try_reset_new_record!
  if ! self.new_record? &&
      ( ! self.id || ! self.class.find_by_id(self.id) )
    @new_record = true
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-30T00:45:22.973

ActiveRecord 方法返回 nil 的另一个原因`save`是它是否被模拟。就像是`expect(modelInstance).to receive(:save)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T22:30:25.393

在我花了一整天的时间之后，这自然是非常简单的事情......

所以它似乎`update_attributes`只适用于**已经保存**的记录。

```
> claim
 => #<Claim id: 51, tnc_accepted_at: nil, status_id: 4>
> claim.valid?
 => true
#=========
> claim.save # This makes all the difference!
   (0.3ms)  BEGIN
  Claim Load (0.4ms)  SELECT --blah blah blah
   (1.0ms)  INSERT INTO "claims" --blah blah blah
   (14.8ms)  COMMIT
 => true
#=========
> claim.update_attributes! :status_id => 5
   (0.3ms)  BEGIN
  ClaimItem Load (1.5ms)  SELECT --blah blah blah
  Status Load (0.6ms)  SELECT --blah blah blah
   (0.4ms)  ROLLBACK
ActiveRecord::RecordInvalid: Validation failed: Terms and conditions must be accepted
# ... just as expected.
> claim.update_attributes! :terms_and_conditions => true
   (0.3ms)  BEGIN
  ClaimItem Load (0.8ms)  SELECT --blah blah blah
   (0.8ms)  UPDATE "claims" --blah blah blah
   (11.4ms)  COMMIT
 => true
# ... hooray! 
```

# jquery - 反馈和 Facebook 代码冲突

> ID：12168829
> 
> 赞同：-2
> 
> 时间：2012-08-28T23:11:02.180
> 
> 标签：jquery, forms, html, facebook-like

我正在创建一个测试页面，一切都很顺利，直到我添加弹出 facebook 之类的框 facebook 代码与反馈表冲突我尝试了这么多小时来解决这个问题，但我无法看到其中任何一个我希望两者都可见这里的任何错误都是我的代码：

```
 <div id="contactable"><!-- contactable html placeholder --></div>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
<script type="text/javascript" src="http://boysjoys.com/final/scripts/jquery.validate.pack.js"></script>
<script type="text/javascript" src="http://boysjoys.com/final/scripts/jquery.contactable.js"></script>
<link rel="stylesheet" href="http://boysjoys.com/final/css/contactable.css" type="text/css" />
<script>$(function(){$('#contactable').contactable({subject: 'feedback URL:'+location.href});});</script>

<!--end contactable -->

<div> </div>

<!-- FACEBOOK WIDGET START -->
<script src='http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js'></script>
<script src="https://gj37765.googlecode.com/svn/trunk/html/[www.gj37765.blogspot.com]jquery.colorbox-min.js"></script>
<link rel="stylesheet" href="https://gj37765.googlecode.com/svn/trunk/html/%5Bwww.gj37765.blogspot.com%5Dfbpopup.css" type="text/css" />
<script type="text/javascript">
jQuery(document).ready(function(){
if (document.cookie.indexOf('visited=flase') == -1) {
var fifteenDays = 1000*60*60*24*30;
var expires = new Date((new Date()).valueOf() + fifteenDays);
document.cookie = "visited=true;expires=" + expires.toUTCString();
$.colorbox({width:"400px", inline:true, href:"#mdfb"});
}
});
</script>
<div style="display:none">
<div id='mdfb' style='padding:10px; background:#fff;'>

<center>
<iframe src="//www.facebook.com/plugins/likebox.php?href=http%3A%2F%2Fwww.facebook.com%2FBoysJoys&amp;width=300&amp;colorscheme=light&amp;show_faces=true&amp;border_color=%23ffffff&amp;stream=false&amp;header=false&amp;height=258" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:300px; height:258px;" allowtransparency="true"></iframe>
</center>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:52:59.537

您将两次包含 jQuery 库，一次用于不可接触，一次用于 facebook，删除第二个。

这是一个工作小提琴[http://jsfiddle.net/45yzC/](http://jsfiddle.net/45yzC/)

# internet-explorer - Nivo 滑块图像链接在 IE 中不起作用？有没有搞错

> ID：12168842
> 
> 赞同：1
> 
> 时间：2012-08-28T23:12:15.000
> 
> 标签：internet-explorer, z-index, nivo-slider

我在此页面 www.ldf.org 上安装了 Wordpress Nivo 滑块。滑块图像链接在 Chrome 中有效，但在 Internet Explorer 中无效。我已经尝试在我能想到的每个元素上调整 z-index，但没有运气。有什么建议么？

# c# - mvc3 数据库第一个模型默认值

> ID：12168845
> 
> 赞同：0
> 
> 时间：2012-08-28T23:12:28.107
> 
> 标签：c#, asp.net-mvc-3, entity-framework

我有一个数据库优先设计。我想为我的模型设置默认值，以便用户可以将编辑器文本框留空以用于我的可空字段之一。EF 似乎不想只将 null 放入数据库，所以我希望我可以为我的可为空属性将默认值设置为 null。

即，如果提交时文本框留空，我想在我的数据库中插入 null 以获取属性。

我读过你可以将一个构造函数添加到一个部分类来做我想做的事。所以你基本上会有：

```
public partial class MyClass{
    public MyClass()
    {
        field1 = null; //this would be the default value for field1
    }
} 
```

唯一的问题是我正在处理的模型的自动生成的部分类已经有一个构造函数，所以我不能将构造函数添加到不同的（永久）部分类。我不想更新自动生成的部分类，因为当我从数据库更新我的 edmx 时它只会被覆盖。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:20:54.300

字符串的默认值应该已经为空，所以我认为你走错了路。

问题是文本框将始终与表单帖子一起传递，即使它是空白的，这将导致控制器中出现空字符串而不是空值，即使您找到一种方法将字符串显式设置为 null你的第一堂课。

相反，在表单回发后检查控制器中字符串的值，如果它为空，则将其设置为 null。

```
if (String.IsNullOrEmpty(formModel.MyString)) formModel.MyString = null; 
```

要么，要么创建一个默认的模型绑定器以在模型绑定期间检查字段的值，如果它为空则不设置它。

# database - 开发/部署需要自己的本地数据库的应用程序的标准做法是什么？

> ID：12168854
> 
> 赞同：1
> 
> 时间：2012-08-28T23:13:31.923
> 
> 标签：database, deployment, integration

在数据库服务器位于一台机器上并且客户端都远程连接到该机器/服务器之前，我已经创建了客户端-服务器应用程序。

但是，我想到具有大量本地存储数据的应用程序（例如带有库的音乐播放器）必须使用与应用程序一起安装和运行的本地数据库服务器。

所以我的问题是：

*   它只是 mySQL/Postgres/与应用程序捆绑的任何东西的标准安装，还是在只有一个本地连接到服务器时应该使用特定的东西？
*   是否有关于如何在应用程序中静默部署服务器软件的易于定位的说明？

我的问题是针对一般情况的，但如果这有什么不同，我将开发的应用程序将在 Matlab 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:24:37.030

我建议在存储数据以供本地应用程序使用时使用基于非服务的数据库。我知道 SQLite，但我相信 MS SQL Compat 是相似的。

如果要存储的文件很大（音乐文件），将文件保存在磁盘上并将文件路径存储在数据库中可能更有效。（见[http://www.sqlite.org/intern-v-extern-blob.html](http://www.sqlite.org/intern-v-extern-blob.html)）

您可以使用 ODBC 与 MATLAB 中的数据库进行通信。（见[http://www.mathworks.com/help/toolbox/database/ug/database.html](http://www.mathworks.com/help/toolbox/database/ug/database.html)）

# android - 离开应用程序并从我创建的数据库中读取时有关 android SQLite 模拟器错误的 2 个问题

> ID：12168856
> 
> 赞同：0
> 
> 时间：2012-08-28T23:13:51.517
> 
> 标签：android, sqlite

第一个问题：我有一个要读取的数据库，并且我很确定它正在正确加载，因为我没有收到错误消息，除非我第一次尝试加载它但每隔一次加载时都没有错误，这是为什么呢？这会以任何方式影响设备上的应用程序吗？

第二个问题：当我加载应用程序然后单击后退按钮离开应用程序时，我收到此错误，

```
08-28 22:58:16.504: E/SQLiteDatabase(361): close() was never explicitly called on database '/data/data/com.example.databaseexample/databases/library_dev.db' 
```

我在代码中的某个地方没有正确关闭吗？预先感谢您的任何帮助。

代码：

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    DataBaseHelper myDbHelper = new DataBaseHelper(this);

    try{
        myDbHelper.createDataBase();
    }catch(IOException ioe){
        throw new Error("You f'd up, the database wasn't created *crys*");
    }

    try{
        myDbHelper.openDatabase();
    }catch(SQLException sqle){
        throw sqle;
    }
}

public void createListFromDB() {
    // TODO Auto-generated method stub

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

这是我使用的其他课程：

```
public class DataBaseHelper extends SQLiteOpenHelper{

private static String DB_PATH = "/data/data/com.example.databaseexample/databases/";    
private static String DB_NAME = "library_dev.db"; 
private SQLiteDatabase myDataBase;  
private final Context myContext;

public DataBaseHelper(Context c){
    super(c, DB_NAME, null, 1);
    this.myContext = c;
}

public void createDataBase() throws IOException{

    boolean dbExist =  checkDataBase();

    if(dbExist){
        //do nothing since the database already exist.
    }
    else{
        this.getReadableDatabase();

        try{
            copyDataBase();
        }catch(IOException e){
            throw new Error("Error Copying Database");
        }
    }       
}

private boolean checkDataBase(){

    SQLiteDatabase checkDB = null;

    try{
        String myPath = DB_PATH + DB_NAME;
        checkDB =  SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    }catch(SQLiteException e){
        //database doesn't exist yet.
    }

    if(checkDB != null){
        checkDB.close();
    }

    return checkDB != null ? true : false;
}

private void copyDataBase()throws IOException{

    //Opens your local db as the input stream.
    InputStream myInput =  myContext.getAssets().open(DB_NAME);

    //Path to the just created empty DB.
    String outFileName =  DB_PATH + DB_NAME;

    //Opens the empty DB as the output stream.
    OutputStream myOutput = new FileOutputStream(outFileName);

    //transfer bytes from the inputfile to the outputfiles.
    byte[] buffer = new byte[1024];
    int length;
    while((length = myInput.read(buffer)) > 0){
        myOutput.write(buffer, 0, length);
    }

    //Close the Streams.
    myOutput.flush();
    myOutput.close();
    myInput.close();        
}

public void openDatabase() throws SQLException{

    //Open the database.
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
}

@Override
public synchronized void close(){
    if(myDataBase != null){
        myDataBase.close();
    }
}

@Override
public void onCreate(SQLiteDatabase db){

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion){

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:27:37.837

**问题 1**

您遇到此错误是因为您第一次编写代码时试图打开一个尚不存在的数据库。在这种情况下，它会创建一个新数据库（从输入文件复制它）。所以是的，您将自从您第一次启动应用程序以来，每部手机都会出现此错误，在您创建它之前不会有数据库。顺便说一句，这是处理数据库的一种非常糟糕的方法。

**问题2**

发生这种情况是因为您没有明确关闭您的数据库。你应该在你的`onDestroy()`方法上做..你应该把它添加到你的`DataBaseHelper`

```
public void closeDatabase() throws SQLException {
    // Close the database.
    myDataBase.close();
} 
```

这个方法应该在`onDestroy()`你的`MainActivity`. 我希望这可以帮助你

**更新** 您可以查看本[教程](http://www.vogella.com/articles/AndroidSQLite/article.html)，它很好地解释了如何处理 SQLite

# java - 如何跨文件版本存储文件的增量？

> ID：12168858
> 
> 赞同：1
> 
> 时间：2012-08-28T23:13:58.553
> 
> 标签：java, c, linux, diff, ms-office

当我将文件上传到本地存储库以存储文件时，我想保留文件的增量（MS Office/pdf/flash/images）。您可以想象这个内部 box.net 或保管箱供我在本地使用。

是否有任何开源工具可以仅存储文件差异并在此基础上重新生成文件？

假设我上传了 file.doc（版本 1），然后我对文件进行了一些更改并再次上传 file.doc（版本 2）。现在我可以再次保存整个文件，或者只是简单地保存两个文件的增量。当我访问文件的版本 2 时，我会获取该增量并应用到版本 1 并显示用户版本 2。

这个内部项目的全部目的是节省一些空间。

我正在寻找一些可以帮助我实现这一目的的开源工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T23:22:57.217

大多数版本控制软件基本上都是这样工作的。有些保持原样不变，还存储差异以创建最新版本；有些保持最新版本不变，还存储差异以创建原始版本。

它们都使用二进制文件“工作”，以获得合适的“工作”值。（二进制文件之间的差异可以与原始文件一样大。）

您可以尝试谷歌“二进制文件的版本控制”，或查看[这个 SO question](https://stackoverflow.com/q/104453/562459)。

# python - 不知道如何使用 distinct() django

> ID：12168860
> 
> 赞同：2
> 
> 时间：2012-08-28T23:14:03.737
> 
> 标签：python, mysql, django, django-models

请帮我从我的输出中删除重复项：

# 视图.py

```
if request.is_ajax():
        subjects = Subjects.objects.distinct().order_by('-num_of_followers')[:5]
        result = serializers.serialize("json", subjects) 
```

如您所见`distinct()`，没有做任何事情。

我现在的输出如下所示：

```
aaa
aaa
aaa
bbb
ccc 
```

但我希望它是这样的：

```
aaa
bbb
ccc 
```

# 更新

现在我的数据库看起来像这样：

```
Database changed
mysql> SELECT * FROM school_subjects;
+----+----------+---------+------------+---------------------+------------------+
| id | name     | user_id | created_by | created_time        | num_of_followers |
+----+----------+---------+------------+---------------------+------------------+
|  1 | Math 140 |       1 | rrr        | 2012-08-23 12:11:55 |                4 |
|  2 | lll      |       2 | aaa        | 2012-08-23 14:25:13 |                2 |
|  3 | kmkk     |       2 | aaa        | 2012-08-25 14:11:42 |                2 |
|  4 | llll     |       2 | aaa        | 2012-08-25 14:11:57 |                2 |
|  5 | Math 140 |       3 | qqq        | 2012-08-25 15:29:44 |                4 |
|  6 | qweqw    |       3 | qqq        | 2012-08-25 15:30:32 |                1 |
|  7 | lalala   |       3 | qqq        | 2012-08-25 15:38:57 |                1 |
|  8 | kkdkdk   |       3 | qqq        | 2012-08-25 17:49:25 |                1 |
|  9 | aaaa     |       2 | aaa        | 2012-08-27 19:13:49 |                1 |
| 10 | mmcmcm   |       2 | aaa        | 2012-08-27 19:22:10 |                1 |
| 11 | aaaaa    |       2 | aaa        | 2012-08-27 21:17:32 |                1 |
| 12 | Math 140 |       2 | aaa        | 2012-08-27 21:25:07 |                4 |
+----+----------+---------+------------+---------------------+------------------+
12 rows in set (0.00 sec) 
```

# 我得到的 JSON：

```
[{"pk": 1, "model": "school.subjects", "fields": {"created_time": "2012-08-23 12:11:55", "num_of_followers": 4, "name": "Math 140", "created_by": "rrr", "user": 1}}, {"pk": 12, "model": "school.subjects", "fields": {"created_time": "2012-08-27 21:25:07", "num_of_followers": 4, "name": "Math 140", "created_by": "aaa", "user": 2}}, {"pk": 5, "model": "school.subjects", "fields": {"created_time": "2012-08-25 15:29:44", "num_of_followers": 4, "name": "Math 140", "created_by": "qqq", "user": 3}}, {"pk": 4, "model": "school.subjects", "fields": {"created_time": "2012-08-25 14:11:57", "num_of_followers": 2, "name": "llll", "created_by": "aaa", "user": 2}}, {"pk": 3, "model": "school.subjects", "fields": {"created_time": "2012-08-25 14:11:42", "num_of_followers": 2, "name": "kmkk", "created_by": "aaa", "user": 2}}] 
```

从这个例子你可以看到我得到了 Math 140 3 次，但我希望它只出现一次。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:23:30.977

文档有[一些](https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.distinct)关于使用的具体信息`distinct`以及它如何受到使用的影响`order_by`

尝试切换顺序，并指定字段：

```
Subjects.objects.order_by('created_by', '-num_of_followers')\
    .distinct('created_by')[:5] 
```

# google-apps-script - 处理程序函数中的“遇到错误：无效参数”

> ID：12168862
> 
> 赞同：1
> 
> 时间：2012-08-28T23:14:11.033
> 
> 标签：google-apps-script

我的处理程序函数中出现此错误，但我不知道是什么原因造成的。我已经复制了代码并在非处理程序函数中对其进行了调试，并且没有错误。

```
function _responseToNext(e) {

  var app = UiApp.getActiveApplication();
  app.getElementById('btnPrev').setEnabled(true);

  var current = parseInt(CacheService.getPublicCache().get('currentItem')); 
  var agendaItems = Utilities.jsonParse(CacheService.getPublicCache().get('agenda'));

  agendaItems[current]['notes'] = e.parameter.tAreaNotes;
  agendaItems[current]['status'] = e.parameter.lboxStatus;

  CacheService.getPublicCache().put('agenda', Utilities.jsonStringify(agendaItems));

  current = current + 1;
  CacheService.getPublicCache().put('currentItem', current); 

  fillAgendaDetail(app);

  // only enabled 'Next' if there are more items in the agenda
  if (current < agendaItems.length-1) { 
  app.getElementById('btnNext').setEnabled(true); 
  }

  return app;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T06:13:21.837

我想，错误原因是`get`当缓存为空时，Cache 方法在第一次执行期间返回 null。`Utilities.jsonParse`抛出异常并且缓存在任何情况下都变为空。尝试使用以下修改后的代码。

```
function _responseToNext(e) {

  var app = UiApp.getActiveApplication();
  app.getElementById('btnPrev').setEnabled(true);

  var cachedCurrent = CacheService.getPublicCache().get('currentItem');
  var current;
  if (cachedCurrent == null) {
    current = 0;
  }
  else {
    current = parseInt(cachedCurrent); 
  }
  var cachedAgendaItems = CacheService.getPublicCache().get('agenda');
  var agendaItems;
  if (cachedAgendaItems == null) {
    agendaItems = [][];
  }
  else {
    agendaItems = Utilities.jsonParse();
  }

  agendaItems[current]['notes'] = e.parameter.tAreaNotes;
  agendaItems[current]['status'] = e.parameter.lboxStatus;

  CacheService.getPublicCache().put('agenda', Utilities.jsonStringify(agendaItems));

  current = current + 1;
  CacheService.getPublicCache().put('currentItem', current); 

  fillAgendaDetail(app);

  // only enabled 'Next' if there are more items in the agenda
  if (current < agendaItems.length-1) { 
  app.getElementById('btnNext').setEnabled(true); 
  }

  return app;
} 
```

另请注意，公共缓存 ( `CacheService.getPublicCache()`) 对于脚本的所有用户都是相同的。在您的情况下，这意味着，如果两个用户`user1@example.com`并`user2@example.com`使用脚本，他们将具有相同的`current`和`agendaItems`变量值，即它可能是`_responseToNext`处理程序已经在`user1`权限下执行的情况 -`current`在 user2 执行后变量等于 1处理`_responseToNext`程序 -`current`变量等于 2，依此类推。如果您不需要这种行为，请使用`CacheService.getPrivateCache()`.

# objective-c - 在自定义 uitable 视图控制器中滚动不起作用

> ID：12168865
> 
> 赞同：0
> 
> 时间：2012-08-28T23:15:00.977
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

好吧，我确实有一个表格视图控制器，并且每个单元格都分配了我自己的类。我的表格视图正常加载，但没有滚动。在检查器窗口中，我看不到任何启用滚动的选项。

我的代码在这里：

```
- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
    myimages= [NSArray arrayWithObjects: ...//definition of array with 22 images, its sure that everyone exists and I am writing them without the .png

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
#warning Incomplete method implementation.
    // Return the number of rows in the section.
    return [tracksimages_closed count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    // Configure the cell...
    //getting the identifier
    static NSString *simpleTableIdentifier=@"SimpleTableCell";
    //this is the identifier of the custom cell
    SimpleTableCell *cell = (SimpleTableCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
    if (cell == nil)
    {
        NSArray *nib = [[NSBundle mainBundle] loadNibNamed:@"SimpleTableCell" owner:self options:nil];
        cell = [nib objectAtIndex:0];
    }

    cell.mainImage.image = [UIImage imageNamed:[myimages objectAtIndex:indexPath.row]];

    return cell;

}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}
*/

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     [detailViewController release];
     */
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 80;
}

@end 
```

这是我的 CustomTableCell.m

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
}

- (void)dealloc {
    [mainImage release];
    [super dealloc];
}
@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T17:06:01.740

最后的问题是 NSArray 必须“保留”。我不知道为什么，但它奏效了。

特别是我的声明是这样的：

```
 myimages= [[NSArray arrayWithObjects: @"data_1",...,nil]retain] 
```

# javascript - Extjs 4网格：根据存储文本值将图标放置在单元格中

> ID：12168869
> 
> 赞同：2
> 
> 时间：2012-08-28T23:16:09.380
> 
> 标签：javascript, grid, extjs4

我有一家商店，其字段中包含“Y”或“N”。我想取那个 Y 或 N 值并在网格中放置一个绿色或红色的小图标而不是文本。我一直在搞乱条件渲染功能，但我不知道如何根据值显示图标。到目前为止我有

```
initComponent: function() {
    this.columns=[
        {header: 'PreReq', dataIndex: 'PreReq', width: 50,
            renderer: function(value){
                if(value == 'Y'){
                    //some code to put green icon in this cell
                }
                else if(value =='N'){
                    //come code to put red icon in this cell
                }
                else{
                    //some code to put error icon in this cell
                }
            }
        }
    ];
    this.callParent(arguments);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-28T23:18:52.323

这很简单：

```
return '<img src="..." />'; 
```

或者，如果您更喜欢 css 方式，您可以这样做：

```
renderer: function( value, metadata, record )
{
    metadata.tdCls = 'yes-icon'
} 
```

# ssis - DT_TEXT 在平面文件导入中连接行

> ID：12168870
> 
> 赞同：2
> 
> 时间：2012-08-28T23:16:14.533
> 
> 标签：ssis

我有一个导入 TSV 文件的项目，该文件的字段设置为文本流 (DT_TEXT)。

当我有被重定向的无效行时，我的无效行中的 DT_TEXT 字段将附加到第一个进行中的有效行。

这是我的测试数据：

制表符分隔的输入文件：（“tsv IN”）

```
CatID   Descrip
y   "desc1"
z   "desc2"
3   "desc3" 
```

CatID 设置为整数 (DT_I8)

描述设置为文本流 (DT_TEXT)

这是我的基本数据流任务：

![](../Images/6145aba066ba6008ae4bd756d6ab8b07.png) （我很抱歉，在我的代表超过 10 之前我不能发布图片：-/）

所以我的 2 个无效行被重定向，我的第 3 行指向成功，但这是我的“成功”输出：

```
"CatID","Descrip"
"3","desc1desc2desc3" 
```

这是使用 DT_TEXT 字段时的错误吗？我对 SSIS 相当陌生，所以也许我误解了文本流的使用。我选择使用 DT_TEXT，因为我遇到了 DT_STR 的截断问题。

如果有帮助，我的 tsv Fail 输出如下：

```
Flat File Source Error Output Column,ErrorCode,ErrorColumn
x   "desc1"
,-1071607676,10
y   "desc2"
,-1071607676,10 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T15:12:56.170

您应该尽量避免在 SSIS 字段中使用**DT_TEXT、DT_NTEXT 或 DT_IMAGE**数据类型，因为它们会严重影响数据流性能。问题是这些类型不是作为 CLOB（字符大对象），而是作为 BLOB（二进制大对象）。

参考见：

*   CLOB：[http ://en.wikipedia.org/wiki/Character_large_object](http://en.wikipedia.org/wiki/Character_large_object)
*   BLOB：[http ://en.wikipedia.org/wiki/BLOB](http://en.wikipedia.org/wiki/BLOB)
*   区别：[帮我理解Oracle中CLOB和BLOB的区别](https://stackoverflow.com/questions/1018073/help-me-understand-the-difference-between-clobs-and-blobs-in-oracle)

使用**DT_TEXT**您不能像从大型数组中那样只提取字符。这种类型表示为一个字节数组，可以存储任何类型的数据，在您的情况下不需要这些数据，并且会在连接您的字段时产生问题。（我在我的环境中重现了这个问题）

我的建议是坚持使用**DT_STR**进行描述，给它一个大的 OutputColumnWidth。使其足够大，以便在从源文件读取并对其进行测试时不会发生截断。

# wpf - 将 ListBox 中的 SelectedItem 绑定到 ContextMenu 中的 CommandParameter

> ID：12168871
> 
> 赞同：0
> 
> 时间：2012-08-28T23:16:22.733
> 
> 标签：wpf, binding, contextmenu, datatemplate, observablecollection

尽管这个问题与其他发布的问题非常相似，但它有一些转折！我在**ListBox中有一个****ObservableCollection**项目，并使用**DataTemplate**来显示一些集合成员。但是，我定义了一个**ContextMenu**，因此我可以使用**Command**参数执行在我的 ViewModel 中定义的**DelegateCommands 。**

 ******我所有的绑定都工作到这里，除了我需要使用 ListBox 中选择的项目的 CommandParameter 为 ViewModel 中的命令提供一个参数，以便命令知道要对哪个项目采取行动。但这是不可能的，因为我更改了 ContextMenu DataContext，所以我可以在我的 ViewModel 中访问 DelegateCommands。

我收到以下错误：System.Windows.Data 错误：4：找不到与引用“ElementName=instrumentListView”进行绑定的源。绑定表达式：路径=选定项；

ViewModel 中的命令按我的意愿调用，但它的参数始终为空。

我也尝试绑定到集合内的项目，但它们不可见，因为我必须切换我的 DataContext。

以下是缩写的 XAML 文件：

```
 <ListBox x:Name="instrumentListView" ItemsSource="{Binding Instruments}" >              
                <ListBox.ItemTemplate>
                    <DataTemplate>
                       <StackPanel x:Name="instrumentStackPanel" HorizontalAlignment="Left" Orientation="Horizontal" Height="30" UseLayoutRounding="True" Tag="{Binding DataContext, RelativeSource={RelativeSource AncestorType=ListBox}}">                            
                        <Image Source="{Binding InstrumentIcon}" Margin="0,0,10,0"></Image>
                        <Label Content="{Binding Instrument}"></Label>
                        <StackPanel.ContextMenu >
                            <ContextMenu DataContext="{Binding PlacementTarget.Tag, RelativeSource={RelativeSource Self}}">
                                <MenuItem Header="Add Instrument" Command="{Binding Path=AddInstrumentToTest}" CommandParameter="{Binding Instrument}"/>
                                <MenuItem Header="Remove Instrument" Command="{Binding Path=RemoveInstrumentFromTest}" CommandParameter="{Binding Instrument}"/>
                            </ContextMenu>
                        </StackPanel.ContextMenu>
                        </StackPanel>                            
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

这是我的 ViewModel 的副本：

```
 public class ViewModel : INotifyPropertyChanged
    {
        public DelegateCommand<string> AddInstrumentToTest { get; set; }
        public DelegateCommand<string> RemoveInstrumentFromTest { get; set; }
        private ObservableCollection<IInstrument> instruments = new ObservableCollection<IInstrument>();

        public ViewModel()
        {
            this.AddInstrumentToTest = new DelegateCommand<string >(this.OnaddInstrumentToTest, this.canAddInstrument);
            this.RemoveInstrumentFromTest = new DelegateCommand<string >(this.OnremoveInstrumentFromTest, this.canRemoveInstrument);      
        }

        public ObservableCollection<IInstrument> Instruments
        {
            ...
        }

        public void OnaddInstrumentToTest(string inst) {...}
        public void OnremoveInstrumentFromTest(string inst) {...}
        public bool canRemoveInstrument(string inst) {...}
        public bool canAddInstrument(string inst) {...}

        ...
} 
```

这是 IInstrument 接口：

```
 public interface IInstrument
        {        
            string Model {get;set;}       
            string SerialNumber {get;set;}    
            InstrumentCommInterface.InstrumentInterface InstrumentComm {get;set;} 
            InstrumentClassification.InstrumentClass InstrumentClass {get;set;} 
            string FirmwareVersion {get;set;}  
            string Address {get;set;}
            string Port {get;set;}
            Lazy<IInstrumentFactory, IInstrumentPlugInMetaData> PlugInType {get;set;}
            string Instrument {get;set;}
            BitmapImage InstrumentIcon {get;set;}
            bool SelectedForTest {get;set;}
            ObservableCollection<string> Channels {get;set;}        
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T01:15:58.070

我会`DataContext`通过上下文菜单标签保留 and 隧道。

```
<!-- Keep complete ListBox, allows acces of selected item and higher up DataContext -->
<StackPanel Tag="{Binding RelativeSource={RelativeSource AncestorType=ListBox}}"> 
```

```
<ContextMenu DataContext="{Binding PlacementTarget.DataContext, RelativeSource={RelativeSource Self}}"
             Tag="{Binding PlacementTarget.Tag, RelativeSource={RelativeSource Self}}"> 
```

所以现在`DataContext`仍然是你的项目，如果你需要选择的项目使用：

```
Tag.SelectedItem, RelativeSource={RelativeSource AncestorType=ContextMenu} 
```******

# go - 在 OSX 上交叉编译 Go？

> ID：12168873
> 
> 赞同：154
> 
> 时间：2012-08-28T23:16:30.230
> 
> 标签：go, compilation, cross-compiling

我正在尝试在 OSX 上交叉编译一个 go 应用程序来为 windows 和 linux 构建二进制文件。我已经阅读了我在网上可以找到的所有内容。我发现的最接近的例子已经发布（除了关于 go-nuts 邮件列表的许多未完成的讨论）：

[http://solovyov.net/en/2012/03/09/cross-compiling-go/](http://solovyov.net/en/2012/03/09/cross-compiling-go/)

但它不适用于我的安装。我已经去了 1.0.2。由于 1.0.2 是最近的版本，因此在我看来以上所有示例都不适用于此版本。

尝试将`./make.bash --no-clean`ENV vars 设置为 386/windows，它确实构建了 go，但是它为我的安装构建了 go，它`darwin/amd64`完全忽略了 ENV 中设置的假设构建不同编译器的内容。

任何建议如何完成（如果可以完成的话）？

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2016-03-08T21:43:53.413

在 Go 1.5 中，他们似乎改进了交叉编译过程，这意味着它现在是内置的。不需要`./make.bash`-ing 或`brew`-ing。[此处](http://dave.cheney.net/2015/08/22/cross-compilation-with-go-1-5)描述了该过程，但对于 TLDR-ers（如我）来说：您只需设置环境变量`GOOS`和`GOARCH`环境变量并运行 go build。

对于那些更懒惰的复制粘贴者（比如我），如果你在 *nix 系统上，请执行以下操作：

```
env GOOS=linux GOARCH=arm go build -v github.com/path/to/your/app 
```

你甚至学会了这个`env`技巧，它让你只为那个命令设置环境变量，完全免费。

* * *

## 回答 #2

> 赞同：142
> 
> 时间：2012-08-30T18:05:11.187

感谢 golang-nuts 的善意和耐心帮助，配方如下：

1）需要为不同的目标平台和架构编译Go编译器。这是从 go 安装中的 src 文件夹完成的。在我的情况下，Go 安装位于`/usr/local/go`因此编译您需要发布`make`实用程序的编译器。在执行此操作之前，您需要了解一些注意事项。

交叉编译时CGO库存在问题，因此需要禁用CGO库。

编译是通过将位置更改为源目录来完成的，因为编译必须在该文件夹中完成

```
cd /usr/local/go/src 
```

然后编译 Go 编译器：

```
sudo GOOS=windows GOARCH=386 CGO_ENABLED=0 ./make.bash --no-clean 
```

您需要通过更改 GOOS 和 GOARCH 参数来对希望交叉编译的每个操作系统和架构重复此步骤。

如果您像我一样在用户模式下工作，则需要 sudo 因为 Go 编译器位于系统目录中。否则，您需要以超级用户身份登录。在 Mac 上，您可能需要启用/配置 SU 访问权限（默认情况下不可用），但如果您已成功安装 Go，您可能已经拥有 root 访问权限。

2) 一旦你构建了所有的交叉编译器，你就可以愉快地使用以下设置来交叉编译你的应用程序，例如：

```
GOOS=windows GOARCH=386 go build -o appname.exe appname.go

GOOS=linux GOARCH=386 CGO_ENABLED=0 go build -o appname.linux appname.go 
```

将 GOOS 和 GOARCH 更改为您希望构建的目标。

如果您遇到 CGO 问题，请在命令行中包含 CGO_ENABLED=0。另请注意，用于 linux 和 mac 的二进制文件没有扩展名，因此您可以添加扩展名以获得不同的文件。-o 开关指示 Go 生成类似于 c/c++ 的旧编译器的输出文件，因此上面使用的 appname.linux 可以是任何其他扩展名。

* * *

## 回答 #3

> 赞同：63
> 
> 时间：2015-02-10T02:46:21.403

如果您在 OS X 上使用[Homebrew ，那么您有一个更简单的解决方案：](http://brew.sh/)

```
$ brew install go --with-cc-common # Linux, Darwin, and Windows 
```

或者..

```
$ brew install go --with-cc-all # All the cross-compilers 
```

`reinstall`如果您已经`go`安装，请使用。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2015-07-08T20:52:49.587

您可以使用 Docker 轻松完成此操作，因此不需要额外的库。只需运行以下命令：

```
docker run --rm -it -v "$GOPATH":/go -w /go/src/github.com/iron-io/ironcli golang:1.4.2-cross sh -c '
for GOOS in darwin linux windows; do
  for GOARCH in 386 amd64; do
    echo "Building $GOOS-$GOARCH"
    export GOOS=$GOOS
    export GOARCH=$GOARCH
    go build -o bin/ironcli-$GOOS-$GOARCH
  done
done
' 
```

您可以在这篇文章中找到更多详细信息： [https ://medium.com/iron-io-blog/how-to-cross-compile-go-programs-using-docker-beaa102a316d](https://medium.com/iron-io-blog/how-to-cross-compile-go-programs-using-docker-beaa102a316d)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2018-12-02T19:27:06.943

为许多平台创建可执行文件的过程可能有点乏味，所以我建议使用脚本：

```
#!/usr/bin/env bash

package=$1
if [[ -z "$package" ]]; then
  echo "usage: $0 <package-name>"
  exit 1
fi
package_name=$package

#the full list of the platforms: https://golang.org/doc/install/source#environment
platforms=(
"darwin/386"
"dragonfly/amd64"
"freebsd/386"
"freebsd/amd64"
"freebsd/arm"
"linux/386"
"linux/amd64"
"linux/arm"
"linux/arm64"
"netbsd/386"
"netbsd/amd64"
"netbsd/arm"
"openbsd/386"
"openbsd/amd64"
"openbsd/arm"
"plan9/386"
"plan9/amd64"
"solaris/amd64"
"windows/amd64"
"windows/386" )

for platform in "${platforms[@]}"
do
    platform_split=(${platform//\// })
    GOOS=${platform_split[0]}
    GOARCH=${platform_split[1]}
    output_name=$package_name'-'$GOOS'-'$GOARCH
    if [ $GOOS = "windows" ]; then
        output_name+='.exe'
    fi

    env GOOS=$GOOS GOARCH=$GOARCH go build -o $output_name $package
    if [ $? -ne 0 ]; then
        echo 'An error has occurred! Aborting the script execution...'
        exit 1
    fi
done 
```

我只在 OSX 上检查了这个脚本

[要点 - go-executable-build.sh](https://gist.github.com/DimaKoz/06b7475317b12e7ffa724ef0e115a4ec)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-02-17T13:38:23.137

> 对于需要启用**CGO**并从 OSX 目标窗口进行交叉编译的人

[因为我已经导入了https://github.com/mattn/go-sqlite3](https://github.com/mattn/go-sqlite3)并且它需要它，所以我需要在从我的 mac 编译 Windows 时启用**CGO 。**根据其他答案编译给了我和错误：

```
/usr/local/go/src/runtime/cgo/gcc_windows_amd64.c:8:10: fatal error: 'windows.h' file not found 
```

如果你和我一样，你必须用 CGO 编译。这就是我所做的：

1.我们将使用 CGO 依赖库交叉编译 windows。首先我们需要安装一个交叉编译器`mingw-w64`

```
brew install mingw-w64 
```

这可能会在此处安装它`/usr/local/opt/mingw-w64/bin/`。

2.就像其他答案一样，我们现在首先需要将我们的 windows arch 添加到我们的 go 编译器工具链中。编译一个编译器需要一个编译器（奇怪的句子）编译go编译器需要一个单独的预建编译器。我们可以下载预构建的二进制文件或从文件夹中的源代码构建，例如：`~/Documents/go` 现在我们可以根据最佳答案改进我们的 Go 编译器，但这次使用`CGO_ENABLED=1`我们单独的预构建编译器`GOROOT_BOOTSTRAP`（Pooya 是我的用户名）：

```
cd /usr/local/go/src
sudo GOOS=windows GOARCH=amd64 CGO_ENABLED=1 GOROOT_BOOTSTRAP=/Users/Pooya/Documents/go ./make.bash --no-clean
sudo GOOS=windows GOARCH=386 CGO_ENABLED=1 GOROOT_BOOTSTRAP=/Users/Pooya/Documents/go ./make.bash --no-clean 
```

3.现在在编译我们的 Go 代码时，使用`mingw`启用 CGO 来编译我们的 go 文件目标窗口：

```
GOOS="windows" GOARCH="386" CGO_ENABLED="1" CC="/usr/local/opt/mingw-w64/bin/i686-w64-mingw32-gcc" go build hello.go
GOOS="windows" GOARCH="amd64" CGO_ENABLED="1" CC="/usr/local/opt/mingw-w64/bin/x86_64-w64-mingw32-gcc" go build hello.go 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-09-28T12:17:30.633

从 go 1.17.1 开始，您必须显式设置 go env 变量。

我已经在 shell 脚本中完成了

```
#!/bin/bash

GOOS=linux 
GOARCH=amd64
go.exe get -d -v ./...
go.exe env -w GOOS=$GOOS
go.exe env -w GOARCH=$GOARCH
go.exe build -v ./cmd/tecnoalarm/main.go 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-08-20T11:48:36.050

> 适用于需要启用 CGO 并从另一个系统进行交叉编译的人

有一个 docker 解决方案[golang-crossbuild](https://github.com/elastic/golang-crossbuild)

`linux/armv7`这是一个在 Windows/MacOS 上构建的示例

```
docker run -it --rm \
  -v $GOPATH/src/github.com/user/go-project:/go/src/github.com/user/go-project \
  -w /go/src/github.com/user/go-project \
  -e CGO_ENABLED=1 \
  docker.elastic.co/beats-dev/golang-crossbuild:1.16.4-armhf \
  --build-cmd "make build" \
  -p "linux/armv7" 
```

# android - Android JB 广播接收器未接收到 bluetooth.android.bluetooth.BluetoothDevice.ACTION_ACL_CONNECTED

> ID：12168874
> 
> 赞同：1
> 
> 时间：2012-08-28T23:16:41.937
> 
> 标签：android, bluetooth, broadcastreceiver, android-4.2-jelly-bean

我正在使用运行 jb 的根深蒂固的三星 Galaxy nexus 手机，由于某种原因，我没有收到来自蓝牙连接服务的任何广播意图。您将在下面找到我的接收器清单和广播接收器代码。任何提示或想法将不胜感激。

谢谢

这是清单

```
<receiver android:name=".ABroadcastReciever" >
<intent-filter>
<action android:name="android.bluetooth.BluetoothDevice.ACTION_ACL_CONNECTED" />
<action android:name="android.bluetooth.BluetoothDevice.ACTION_ACL_DISCONNECTED" />
<action android:name="android.bluetooth.BluetoothDevice.ACTION_BOND_STATE_CHANGED" />
<action android:name="android.bluetooth.BluetoothDevice.ACTION_FOUND" />
<action android:name="android.bluetooth.BluetoothDevice.BOND_BONDING" />
<action android:name="android.bluetooth.BluetoothDevice.ACTION_ACL_DISCONNECT_REQUESTED" />
<action android:name="android.net.conn.CONNECTIVITY_CHANGE" />
</intent-filter>
</receiver> 
```

这是接收者

```
public void onReceive(Context context, Intent intent) { 
            String action = intent.getAction();

            //This is looking for the Wifi Connectivity Changes
            if(action.equals("android.net.conn.CONNECTIVITY_CHANGE")){
                Log.d(TAG,"received: Wifi Connection Change");          
            }
            //This is looking Bluetooth connection disconnect 
            else if(action.equals("android.bluetooth.BluetoothDevice.ACTION_ACL_DISCONNECTED") ||
            action.equals("android.bluetooth.BluetoothDevice.ACTION_ACL_DISCONNECTED_REQUESTED") ){
                Log.d(TAG,"Received: Bluetooth Disconnected");

            }
            //This is looking for Bluetooth connection established
            else if(action.equals("android.bluetooth.BluetoothDevice.ACTION_ACL_CONNECTED")){
    Log.d(TAG,"Received: Bluetooth Connected");
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:20:38.997

这是正在广播的新意图。

```
<action android:name="android.bluetooth.a2dp.profile.action.CONNECTION_STATE_CHANGED" /> 
```

感谢您查看这里是新的 Intent

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T20:43:08.643

我不知道我是否正确，但我认为这条线是错误的：

```
<action android:name="android.bluetooth.BluetoothDevice.ACTION_ACL_CONNECTED" /> 
```

应该是这个：

```
<action android:name="android.bluetooth.device.ACTION_ACL_CONNECTED" /> 
```

和其他人一样。将“蓝牙设备”更改为“设备”。

在 broascast 中也有类似的东西：

```
if(action.equals("android.bluetooth.BluetoothDevice.ACTION_ACL_CONNECTED")) 
```

应该

```
if(action.equals("android.bluetooth.device.action.ACL_CONNECTED")) 
```

将 BluetoothDevice.ACTION_ACL_CONNECTED 更改为 device.action.ACL_CONNECTED

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-14T01:20:54.053

您的意图过滤器操作不正确。您实际上想要使用以下内容：

`<action android:name="android.bluetooth.device.action.ACL_CONNECTED" />`

[您可以在官方 Android BluetoothDevice 文档](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#ACTION_ACL_CONNECTED)中找到这些值（查看常量值）。

# gwt - GWT MVP：不同对象的相同视图？

> ID：12168876
> 
> 赞同：0
> 
> 时间：2012-08-28T23:16:55.323
> 
> 标签：gwt, mvp

[关于构建大型应用程序和 MVP](https://developers.google.com/web-toolkit/articles/mvp-architecture)第 I + II 部分，我想了很多。

比方说，我有三个对象，例如公司、联系人和家具。

让我们假设这三个对象可以被查看、编辑和添加并且彼此有关系。

我真的会有吗

*   `CompaniesView.ui.xml`, `ContactView.ui.xml`,`FurnitureView.ui.xml`
*   `CompaniesEdit.ui.xml`, `ContactEdit.ui.xml`,`FurnitureEdit.ui.xml`
*   `CompaniesViewImpl.java`, `ContactViewImpl.java`,`FurnitureViewImple.java`
*   3倍`*View.java`
*   3倍`Edit*ViewImpl.java`
*   3倍`Edit*View.java`
*   3倍`*Presenter`
*   数以百万计的事件
*   3倍`*ColumnsDefinitionsFactory`
*   3x `CompaniesServiceAsync.java`, `ContactsServiceAsync.java`,`FurnitureServiceAsync.java`用于 RPC
*   我的 AppController 中有九个标记：`"companiesList"`, `"contactList"`, `"furnitureList"`, 3x `"*Add"`, 3x`"*Edit"`
*   ...

我走对了吗？应用程序以这种方式变大是正常的吗？

我还可以在名为`ObjectView.ui.xml`. 我想这就是`<T>`文章中使用泛型 ( ) 的原因？

但是我担心由于我的对象设计，我无法再意识到差异，例如，我有一个 ImportContacts 按钮，但没有 ImportCompanies 按钮。

你如何建议我应该扩展我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:35:16.520

这取决于用例，但我会对每个对象都有一个视图和一个表示器，因为基本上创建/编辑/视图代表相同的数据并且通常具有相同的布局，因此它们可以在视图中进行并设置一些种模式。

但是如果用例规定了完全不同的视图布局，在这种情况下，您可以创建三个视图，并将树显示界面附加到一个 Presenter。

[架构 GWT 应用程序的最佳实践 2009](http://www.youtube.com/watch?v=PDuhR18-EdM&feature=relmfu)

[架构 GWT 应用程序的最佳实践 2010](http://www.youtube.com/watch?v=M5x6E6ze1x8)

# c - 如何在 C 中获取 Ruby 对象的类？

> ID：12168877
> 
> 赞同：4
> 
> 时间：2012-08-28T23:17:06.430
> 
> 标签：c, ruby

我有一个处理两种类型的函数：`NVector`和`NMatrix`; 前者是从后者衍生而来的。这个函数基本上是一个专门的拷贝构造函数。我希望它返回与调用它的对象类型相同的对象，因此，`NVector`返回`NVector`，而不是`NMatrix`。

```
static VALUE nm_init_modifiedcopy(VALUE self) {
  // ... some code ...

  // formerly, I had cNMatrix where klass is. But it could also be cNVector!
  return Data_Wrap_Struct(klass, mark_func, delete_func, unwrapped_self_copy);
} 
```

如何获取要传递的对象的类属性`Data_Wrap_Struct`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T23:23:16.500

就像发条一样，只要我在 Stackoverflow 上提出问题，我就会找到答案。

宏是`CLASS_OF`。

```
static VALUE nm_init_modifiedcopy(VALUE self) {
  // ... some code ...

  return Data_Wrap_Struct(CLASS_OF(self), mark_func, delete_func, unwrapped_self_copy);
} 
```

# django - 将独立的 Git 存储库与作为 Subversion 管道的另一个 Git 存储库合并：合并时避免重复

> ID：12168878
> 
> 赞同：2
> 
> 时间：2012-08-28T23:17:30.813
> 
> 标签：django, git, svn

我很高兴在本地主机上的自己的 Git 存储库中开发 Django 项目。我正在创建分支，愉快地提交和合并。路径类似于：

```
/path/to/git/django/ 
```

结构是：

```
project
├── README
├── REQUIREMENTS
├── __init__.py
├── fabfile.py
├── app1
├── manage.py
├── app2
├── app3
├── app4
└── project 
```

我的开发团队的其他成员仍在使用 Subversion，这是一个包含多个项目的大型存储库。当我在本地主机上使用它时，我仍在使用 Git（通过 git-svn）。路径类似于

```
/path/to/giant-svn-repo/ 
```

项目如下：

```
giant-svn-repo
|── project1
|── project2
|── project3
└── project4 
```

当我想使用远程 svn repo 的最新更改时，我只需执行 git-svn rebase。然后对于新功能，我创建一个新分支，开发、提交、签出 master、将分支与 master 合并、删除分支，然后是最终的 git-svn dcommit。凉爽的。一切正常。

这两个存储库（我们称它们为 git-django 和 git-svn）现在是完全独立的。

现在我想将 git-django 作为一个新项目添加到 git-svn repo 中（即在一个名为**djangoproject**的子目录中）。使用以下工作流程，我的工作非常好：

1.  cd 进入 git-svn 仓库
2.  在 git-svn 仓库中创建一个新分支
3.  创建一个新目录来托管我的 django 项目
4.  添加一个链接到我原来的 Django 项目的新遥控器
5.  将远程合并到我的本地目录
6.  以相对路径**djangoproject**为前缀的读取树，因此它根据 git-svn repo 的根目录将代码库放入正确的位置
7.  提交更改，以便将所有内容转储到正确的位置

从命令行看起来像：

```
> cd /path/to/giant-svn-repo
> git checkout -b my_django_project    
> mkdir /path/to/giant-svn-repo/djangoproject
> git remote add -f local_django_dev /path/to/git/django/project
> git merge -s ours --no-commit local_django_dev/master
> git read-tree --prefix=djangoproject -u local_django_dev/master
> git commit -m 'Merged local_django_dev into subdirectory djangoproject' 
```

这可行，但除了 django git repo 的内容位于 /path/to/giant-svn-repo/djangoproject 之外，它还在存储库树的主根中！

```
project
├── README
├── REQUIREMENTS
├── __init__.py
├── fabfile.py
├── djangoproject
│   ├── README
│   ├── REQUIREMENTS
│   ├── __init__.py
│   ├── fabfile.py
│   ├── app1
│   ├── manage.py
│   ├── app2
│   ├── app3
│   ├── app4
│   └── project
├── app1
├── manage.py
├── app2
├── app3
├── app4
└── project 
```

我似乎污染了giant-svn-repo的所有项目所在的父目录。

有什么办法可以阻止这种情况发生吗？

（顺便说一句，这一切都是在测试目录结构中完成的——我还没有损坏任何东西。只是想找出最好的方法）

我确信这只是（重新）为**git merge**、**git read-tree**或**git commit**定义了一个参数，但我几乎达到了 git kung-fu 的极限。

提前致谢。

# mysql - 选择在哪里（浮动，.....）

> ID：12168894
> 
> 赞同：1
> 
> 时间：2012-08-28T23:19:51.313
> 
> 标签：mysql

我正在尝试使用下一句从 mysql 中选择一些值：

```
SELECT 
  id, lead_id, form_id, field_number, value 
FROM 
  wp_rg_lead_detail 
WHERE 
  field_number IN (6.3, 6.6, 11, 12, 17, 14) 
ORDER BY 
  lead_id, field_number 
```

字段 field_number 是一个浮点数，选择仅列出 11、12、17 和 14 字段，但不列出 6.3 和 6.6 中的值

句子有什么问题？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T23:23:40.043

原因是 6.3 和 6.6 实际上并未存储在您的表中。计算机不能完美地表示大多数小数值。当存储的值与 6.3 或 6.6 进行比较时，它不匹配，即使看起来应该匹配。差异可能在小数点后第 9 位或第 10 位，您通常不会看到。

[http://dev.mysql.com/doc/refman/5.0/en/problems-with-float.html](http://dev.mysql.com/doc/refman/5.0/en/problems-with-float.html)

如果您需要精确比较这些值，请将它们设为整数或小数。例如，如果小数点右侧的数字不会超过 1 个，您可以将所有值乘以 10 以仅使用整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T23:28:26.750

查询没有问题。问题是那`float`不是精确的类型。改为使用`decimal`（或将查询更改为类似`... WHERE (field_number BETWEEN 6.2999 AND 6.3001) OR (field_number BETWEEN 6.5999 AND 6.6001 OR ()...`）

# wix - 利用 heat.exe 并收集已经本地化的文件名，并使用 wix 将它们包含到 msi

> ID：12168895
> 
> 赞同：4
> 
> 时间：2012-08-28T23:20:06.240
> 
> 标签：wix, windows-installer, heat

我有一个问题，我想做的事情是否可行，如果答案是肯定的，该怎么做。

我是 wix 的新手，并且一直在阅读有关如何动态地将文件夹包含到安装程序中的内容，最终我能够在 nant 中执行一项任务，该任务使用 heat.exe 生成 wxs 文件，然后将新生成的 wxs 文件添加到灯光和蜡烛任务。这允许我将文件夹的内容添加到 msi，然后安装该文件夹及其内容。

我的问题始于我添加到 msi 的文件夹包含名称已本地化的文件（这是一项要求）。

当我将文件添加到名称为俄语的目录结构中时，例如不是 1252 代码页，我收到错误消息：

> [exec] ......Templates.wxs(65)：错误 LGHT0311：提供的字符串包含指定数据库代码页“1252”中不可用的字符。将这些字符更改为数据库代码页中存在的字符，或通过修改以下属性之一来更新数据库的代码页：Product/@Codepage、Module/@Codepage、Patch/@Codepage、PatchCreation/@Codepage 或 WixLocalization /@代码页。

我尝试设置`Product/@Codepage`为`65001`（UTF-8），但这并没有解决问题。

最终，我想要做的是能够将文件夹及其内容添加到安装程序，然后其他人添加任意数量的文件，这些文件的名称已本地化到该文件夹​​中。这样，每当构建运行并随后创建 msi 时，msi 将包含该文件夹及其内容。

非常感谢您提前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T21:02:40.747

这就是 WiX.chm 关于设置 MSI 数据库的代码页的说法：

> 您可以通过整数（如 1252）或 Web 名称（如 Windows-1252）将其设置为有效的 Windows 代码页。由于用户界面问题，官方不支持 UTF-7 和 UTF-8。不支持 Unicode。

只要您要使用不同语言命名的文件，即文件表不适合单个 Windows 代码页，您就别无选择。UTF-8 据说没有得到官方的支持，这就留下了一个希望的地方。

如果将元素的`CodePage`属性设置为，它将成功构建。您可以毫无问题地安装/卸载生成的 MSI。我已经玩了一点，并没有遇到上面那个警告中提到的任何“接口问题”。`Product``UTF-8`

此外，我在谷歌上搜索了一下这个主题，发现 InstallShield 允许将 MSI 数据库代码页设置为 UTF-8，[这反映在他们的文档中](http://helpnet.installshield.com/installshield16helplib/ReleaseGridBuildTab.htm)（在该页面上搜索“utf-8”）。他们对潜在的界面问题有更多话要说：

> 但是，某些情况会导致用户界面问题。例如，如果最终用户指定 /qb 命令行选项或从“添加或删除程序”卸载产品，Windows Installer 将使用非常小的字体在 UTF-8 数据库中显示用户界面文本。

他们还希望保持安全，因此`false`默认情况下使用此设置（没有 UTF-8，只有 ASCII）。

所以，最后，在你的情况下我会怎么做？

*   如果这是对安装包的严格要求，请`UTF-8`用作代码页
*   在与本地化相关的所有可能组合（英语操作系统、非英语操作系统、当前文化和文化 UI 的各种组合）上测试所有可能的场景（安装/卸载/修复/升级/等）
*   如果您遇到那些幽灵“界面问题”，请将其展示给您的利益相关者，确定这是否是您可以忍受的，如果您这样做，请发布已知问题
*   否则，请回收这个想法，并感谢您的生活有机会提升您在该领域的技能:)

希望这可以帮助。

# c# - 为什么 this ?: 运算符不返回 null？

> ID：12168904
> 
> 赞同：3
> 
> 时间：2012-08-28T23:21:08.513
> 
> 标签：c#, null, operators, conditional-statements

我编写了这行代码来处理空值，但是当我在 expectedItem 为空时运行这行代码时，我仍然会收到“对象引用未设置为对象的实例”错误。是什么赋予了？写这个的正确方法是什么？由于expectedItem 为null，我希望expectedItem.ExpectedResultAmount 也为null，因此该语句应为x 分配一个空字符串。

```
string x = expectedItem.ExpectedResultAmount != null ? expectedItem.ExpectedResultAmount : ""; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T23:23:20.010

您需要检查是否`expectedItem`不为空，而不是其属性

```
string x = expectedItem != null ? expectedItem.ExpectedResultAmount : ""; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T23:23:45.487

你的期望是错误的。尝试

```
string x = expectedItem == null ? "" : expectedItem.ExpectedResultAmount != null ? expectedItem.ExpectedResultAmount : ""; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T23:23:48.150

expcetedItem 无疑为空：

```
string x;

if (expectedItem != null)
    x = expectedItem.ExpectedResultAmount != null ? expectedItem.ExpectedResultAmount : ""; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T23:24:06.127

简短的回答：您取消引用`expectedItem`是因为您正在检查`expectedItem.ExpectedResultAmount`null 而不是检查`expectedItem`自身。你可能应该写

```
string x = expectedItem != null ? expectedItem.ExpectedResultAmount : ""; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-28T23:32:21.090

您应该检查对象实例 (expectedItem) 和属性 (expectedItem.ExpectedResultAmount)，因为两者都可能失败：

```
string x = expectedItem != null && expectedItem.ExpectedResultAmount != null ? expectedItem.ExpectedResultAmount : ""; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-28T23:24:00.230

预期项目为空。

```
if( expectedItem != null)
  x = expectedItem.ExpectedResultAmount != null ? expectedItem.ExpectedResultAmount : "";
else 
  x = "poop"; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-28T23:30:24.317

试试这个

```
string x = expectedItem != null && expectedItem.ExpectedResultAmount != null
    ? expectedItem.ExpectedResultAmount
    : string.Empty; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-28T23:43:05.017

编写代码的正确方法如下：

```
string x = expectedItem != null ? (expectedItem.ExpectedResultAmount != null ? expectedItem.ExpectedResultAmount : "") : ""; 
```

您首先必须确保 expectedItem 不为空，如果是，您将有一个称为[空指针](http://en.wikipedia.org/wiki/Pointer_%28computer_programming%29#Null_pointer)的非法操作；*然后，您应该为x*分配一个空字符串。

如果它不为空，你就这样写

```
string x = expectedItem != null ? expectedItem.ExpectedResultAmount : ""; 
```

x 可以为 null 或*expectedItem.ExpectedResultAmount*，如果您不希望*x*为 null，例如，您稍后将对它进行字符串操作，例如 Compare 或 Concat，您还应确保其成员 ExpectedResultAmount 也不为 null .

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-30T19:33:45.013

正如建议的那样，公认的答案是“*不容易*”，您也可以考虑一下：

```
string x = ""; //string is empty...
if (expectedItem != null && expectedItem.ExpectedResultAmount != null)
{
    x = expectedItem.ExpectedResultAmount; //...unless this exists.
} 
```

# cocos2d-iphone - Cocos2d 视差循环

> ID：12168907
> 
> 赞同：0
> 
> 时间：2012-08-28T23:21:26.113
> 
> 标签：cocos2d-iphone, parallax

我搜索了所有论坛，但找不到一个可行的解决方案来让我的视差层循环。是的 - 我已经尝试了所有的教程，包括 Ray Wenderlich 的 Space shooter，但我很挣扎。这是代码：

```
CCParallaxNode *parallax = [CCParallaxNode node];

// My Parallax Layer
[CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888];
CCSprite *midground = [CCSprite spriteWithFile:@"trees.png"];
midground.anchorPoint = ccp(0,0);

[CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_Default];
[parallax addChild:midground z:-9 parallaxRatio:ccp(1.4f, 1.4f) positionOffset:ccp(0,0)];

//Please loop once off screen 
```

图像是 960x640，我希望它在离开页面后更新和循环。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:34:48.123

试试这个简单的解决方案：

[http://www.gomonkey.it/2012/02/cocos2d-scorrimento-del-background/](http://www.gomonkey.it/2012/02/cocos2d-scorrimento-del-background/)

您需要 2 张图片

# javascript - 来自 DataURL 的 Blob？

> ID：12168909
> 
> 赞同：118
> 
> 时间：2012-08-28T23:21:32.867
> 
> 标签：javascript, fileapi

使用`FileReader`'s`readAsDataURL()`我可以将任意数据转换为数据 URL。有没有办法使用内置浏览器 API 将数据 URL 转换回`Blob`实例？

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-09-06T12:41:03.580

用户 Matt 在一年前提出了以下代码（[如何在 javascript 中将 dataURL 转换为文件对象？](https://stackoverflow.com/questions/6850276/how-to-convert-dataurl-to-file-object-in-javascript)），这可能会对您有所帮助

编辑：正如一些评论者所报告的，BlobBuilder 前段时间已被弃用。这是更新的代码：

```
function dataURItoBlob(dataURI) {
  // convert base64 to raw binary data held in a string
  // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this
  var byteString = atob(dataURI.split(',')[1]);

  // separate out the mime component
  var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]

  // write the bytes of the string to an ArrayBuffer
  var ab = new ArrayBuffer(byteString.length);

  // create a view into the buffer
  var ia = new Uint8Array(ab);

  // set the bytes of the buffer to the correct values
  for (var i = 0; i < byteString.length; i++) {
      ia[i] = byteString.charCodeAt(i);
  }

  // write the ArrayBuffer to a blob, and you're done
  var blob = new Blob([ab], {type: mimeString});
  return blob;

} 
```

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2016-03-23T16:16:54.260

像 @Adria 方法，但使用 Fetch api 并且更小 [ [caniuse？](http://caniuse.com/#search=fetch)]
不必考虑 mimetype，因为 blob 响应类型开箱即用

> 警告：可能违反内容安全策略 (CSP)
> ...如果您使用这些东西

```
var url = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=="

fetch(url)
.then(res => res.blob())
.then(blob => console.log(blob))
```

不要认为你可以在不使用 lib 的情况下做得比这更小

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2020-07-01T13:00:06.177

在[现代浏览器](https://caniuse.com/#search=fetch)中，可以使用 Christian d'Heureuse 在评论中建议的一种衬里：

```
const blob = await (await fetch(dataURI)).blob(); 
```

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2013-07-26T08:10:31.717

```
dataURItoBlob : function(dataURI, dataTYPE) {
        var binary = atob(dataURI.split(',')[1]), array = [];
        for(var i = 0; i < binary.length; i++) array.push(binary.charCodeAt(i));
        return new Blob([new Uint8Array(array)], {type: dataTYPE});
    } 
```

输入 dataURI 是数据 URL，dataTYPE 是文件类型，然后输出 blob 对象

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-06-05T12:08:49.290

基于 XHR 的方法。

```
function dataURLtoBlob( dataUrl, callback )
{
    var req = new XMLHttpRequest;

    req.open( 'GET', dataUrl );
    req.responseType = 'arraybuffer'; // Can't use blob directly because of https://crbug.com/412752

    req.onload = function fileLoaded(e)
    {
        // If you require the blob to have correct mime type
        var mime = this.getResponseHeader('content-type');

        callback( new Blob([this.response], {type:mime}) );
    };

    req.send();
}

dataURLtoBlob( 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==', function( blob )
{
    console.log( blob );
}); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-01-05T14:13:37.727

尝试：

```
function dataURItoBlob(dataURI) {
    if(typeof dataURI !== 'string'){
        throw new Error('Invalid argument: dataURI must be a string');
    }
    dataURI = dataURI.split(',');
    var type = dataURI[0].split(':')[1].split(';')[0],
        byteString = atob(dataURI[1]),
        byteStringLength = byteString.length,
        arrayBuffer = new ArrayBuffer(byteStringLength),
        intArray = new Uint8Array(arrayBuffer);
    for (var i = 0; i < byteStringLength; i++) {
        intArray[i] = byteString.charCodeAt(i);
    }
    return new Blob([intArray], {
        type: type
    });
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-06-20T02:21:27.110

由于这些答案都不支持 base64 和非 base64 数据URL，因此这是基于 vuamitom 已删除答案的答案：

```
// from https://stackoverflow.com/questions/37135417/download-canvas-as-png-in-fabric-js-giving-network-error/
var dataURLtoBlob = exports.dataURLtoBlob = function(dataurl) {
    var parts = dataurl.split(','), mime = parts[0].match(/:(.*?);/)[1]
    if(parts[0].indexOf('base64') !== -1) {
        var bstr = atob(parts[1]), n = bstr.length, u8arr = new Uint8Array(n)
        while(n--){
            u8arr[n] = bstr.charCodeAt(n)
        }

        return new Blob([u8arr], {type:mime})
    } else {
        var raw = decodeURIComponent(parts[1])
        return new Blob([raw], {type: mime})
    }
} 
```

注意：我不确定是否还有*其他*可能需要以不同方式处理的 dataURL mime 类型。但是，如果你发现了，请告诉我！dataURL 可以简单地具有他们想要的任何格式，在这种情况下，您可以为您的特定用例找到正确的代码。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-03-15T21:41:14.633

## [使用XHR API](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest)创建一个 blob ：

```
function dataURLtoBlob( dataUrl, callback )
{
    var req = new XMLHttpRequest;

    req.open( 'GET', dataUrl );
    req.responseType = 'blob';

    req.onload = function fileLoaded(e)
    {
        callback(this.response);
    };

    req.send();
}

var dataURI = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg=='

dataURLtoBlob(dataURI , function( blob )
{
    console.log( blob );
});
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-23T01:48:29.473

使用我的代码将 dataURI 转换为 blob。它比其他的更简单、更干净。

```
function dataURItoBlob(dataURI) {
    var arr = dataURI.split(','), mime = arr[0].match(/:(.*?);/)[1];
    return new Blob([atob(arr[1])], {type:mime});
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-01T17:43:53.653

如果您需要在 Google Apps 脚本服务器端运行的东西，请尝试：

```
function dataURItoBlob(dataURI) {
  // convert base64 to Byte[]
  // doesn't handle URLEncoded DataURIs - see SO answer #6850276 for code that does this
  var data = Utilities.base64Decode(dataURI.split(',')[1]);

  // separate out the mime component
  var mimeString = dataURI.split(',')[0].split(':')[1].split(';')[0]

  var blob = Utilities.newBlob(data);
  blob.setContentType(mimeString);
  return blob;
} 
```

* * *

## 回答 #11

> 赞同：-2
> 
> 时间：2012-08-28T23:23:40.383

采用

```
FileReader.readAsArrayBuffer(Blob|File) 
```

而不是

```
FileReader.readAsDataURL(Blob|File) 
```

# iphone - 键值编码@UnionOfObjects

> ID：12168912
> 
> 赞同：7
> 
> 时间：2012-08-28T23:22:07.000
> 
> 标签：iphone, ios, collections, key-value-coding, kvc

我无法弄清楚@UnionOfObjects 提供了一个简单的 valueForKey: 或 valueForKeyPath: 不能做的事情。

[苹果文档：](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueCoding/Articles/CollectionOperators.html)

> @unionOfObjects 运算符返回一个数组，该数组包含由运算符右侧的键路径指定的属性中的不同对象。与“@distinctUnionOfObjects”不同，重复的对象不会被删除。以下示例返回交易中交易的收款人属性值：
> 
> ```
> NSArray *payees = [transactions valueForKeyPath:@"@unionOfObjects.payee"]; 
> ```
> 
> 生成的收款人数组包含以下字符串：绿色电力、绿色电力、绿色电力、汽车贷款、汽车贷款、汽车贷款、通用电缆、通用电缆、通用电缆、抵押贷款、抵押贷款、抵押贷款、动物医院。

在上面的例子中，

```
NSArray *payees = [transactions valueForKey:@"payee"]; 
```

将返回相同的值数组，但代码更少。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T00:29:19.863

我能立即想到的是它“返回一个包含...的**数组**”（强调我的）。所以它会很方便：

```
NSSet *someSet = ...;

NSArray *result = [someSet valueForKey:@"@unionOfObjects.whatever"]; 
```

因此，它在您希望`NSSet`（或其他非数组集合）将数据推送到`NSArray`成形孔中的 Cocoa 绑定中的任何地方都很有用。

# macros - 如何在 GNU Make 中使用 $(call ...) 做可变参数宏

> ID：12168913
> 
> 赞同：5
> 
> 时间：2012-08-28T23:22:10.167
> 
> 标签：macros, gnu-make, variadic-macros

我创建了一个宏以在makefile中使用，如下所示：

```
TODO_MSG = $(warning TODO: $(1))
$(call TODO_MSG, This part of the msg displays fine, but this part does not) 
```

我可以通过以下方式解决它：

```
BLAH := $(shell perl -e 'print join( " ", 2..200 )'
COMMA := ,
TODO_MSG = $(warning TODO:$(1)$(strip $(foreach x,${BLAH},$(if $(${x}),${COMMA}$(${x})))) 
```

...但我很好奇是否有任何东西为可变参数宏提供更明确的支持。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-30T01:12:29.927

这是 Beta 解决方案的混音：

```
TODO_MSG = $(warning TODO: $(1))

test:
        $(call TODO_MSG, $(strip This part displays fine, and this does too)) 
```

如果 Make 有 $(identity ...) 函数，我会使用它；$(strip ...) 是我能找到的最接近的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T03:59:01.000

这会吗？

```
comma := ,

#define TODO_MSG = $(warning TODO: $(1))
TODO_MSG = $(warning TODO: $(1))
$(call TODO_MSG, This part displays fine$(comma) and so does this) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T12:01:39.043

正如我在评论中提到的，[@Beta](https://stackoverflow.com/a/12170674/545027)和[@claytontstanley 的](https://stackoverflow.com/a/12188606/545027)答案已经足够好了，我个人会使用他们的解决方案之一。

如果您更喜欢获取可变参数的通用方式，那么以下内容可以帮助您。

*警告：下面有很多魔法和肮脏的黑客。*

```
# 扩展为出现在
# 当前调用上下文。
参数= \
    $(评估 __arg_tmp := \
        $(call __args_strip_tail,$(foreach __a,.1,$(__args_list))))$(__arg_tmp)

# 非空参数引用的列表，例如$(1),,$(3),,,
# Context: __a - 当前正在处理的参数的编码编号。
__args_list = \
    $(if $(__arg_value),$(__arg_ref))$(foreach __a,$(call inc,$(__a)) \
        ,$(if $(__arg_simple),$(comma)$(eval __arg_tmp := \
            $(值 __args_list))$(__arg_tmp)))

__arg_value = $(value $(call to_dec,$(__a)))
__arg_ref = $${$(call to_dec,$(__a))}
__arg_simple = $(findstring simple,$(flavor $(call to_dec,$(__a))))

# 用作 GNU Make 'call' 中的错误的解决方法。
# ${1},,${3},,, -> ${1},,${3}
__args_strip_tail = $(subst } ,},$(call nolastword,$(subst },} ,$1,)))

# 一些有用的东西...
逗号 := ,
nolastword = $(wordlist 2,$(words $1),x $1)

# 将 .4.2 解码为 42
to_dec = $(subst .,,$1)

# 增加给定的数字。
# 1\. 数字之间有句点的小数：42 是 .4.2
公司=\
    $(call __inc$(suffix .0$1),$(basename $1))

__inc.0 = $1.1
__inc.1 = $1.2
__inc.2 = $1.3
__inc.3 = $1.4
__inc.4 = $1.5
__inc.5 = $1.6
__inc.6 = $1.7
__inc.7 = $1.8
__inc.8 = 1.9 美元
__inc.9 = $(call inc,$1).0

```

测试它：

```
func = Func $0 调用 args [ $(args) ]

foo = $(func)
bar = $(调用函数,ar,baz,boo)

$(警告 $(调用 foo,a1,a2,a3,a4))
$(警告 $(call bar,a1,a2,a3,a4))

```

输出是：

```
Makefile:49: Func foo called with args [a1,a2,a3,a4]
Makefile:50: Func func called with args [ar,baz,boo] 
```

# jquery - 隐藏 div 直到选择链接

> ID：12168914
> 
> 赞同：0
> 
> 时间：2012-08-28T23:22:19.293
> 
> 标签：jquery, html, hide

我有一个隐藏/显示导航工作，但似乎无法弄清楚如何隐藏包含所有子 div 的主 div，直到选择导航中的链接之一。

请看我的小提琴：http: [//jsfiddle.net/blahblahAMYblah/KptZ6/](http://jsfiddle.net/blahblahAMYblah/KptZ6/)

需要明确的是，我不仅希望在开始时隐藏所有子 div（即 about、gallery 等），还希望隐藏主 div。选择链接后，主 div 应该只显示选定的子 div。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:28:16.823

最初只需隐藏 div，然后在单击项目时显示它

```
$('body').on('click','nav a', function(e) {
    $('#main').css('display', 'block');
    $('#main').children().addClass('hide');
    $($(this).attr('href')).removeClass('hide');
    e.preventDefault();
});

#main{
    display:none;
} 
```

[演示](http://jsfiddle.net/mowglisanu/KptZ6/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T23:27:38.227

我已经更新了你的小提琴；

[http://jsfiddle.net/KptZ6/2/](http://jsfiddle.net/KptZ6/2/)

如果您不想更改 HTML，以下将使用 javascript 隐藏主 div。它还以相同的方式隐藏孩子（使用`.hide()`）

[http://jsfiddle.net/KptZ6/5/](http://jsfiddle.net/KptZ6/5/)

```
$(function() {
    $('#main').hide();
});

$('body').on('click','nav a', function(e) {
    $('#main').show();
    $('#main').children().hide();
    $($(this).attr('href')).show();
    e.preventDefault();
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T23:27:59.177

不知道你是否想要这样的东西，这里有一个更新：

[http://jsfiddle.net/KptZ6/3/](http://jsfiddle.net/KptZ6/3/)

# colors - jscrollpane 颜色

> ID：12168916
> 
> 赞同：0
> 
> 时间：2012-08-28T23:22:47.607
> 
> 标签：colors, jscrollpane

我正在尝试修改 jscrollpane 的滚动条颜色。

这对我不起作用：

```
$('a.athlete_popup_content').click(function(){
    $('#box_on_top').append($content); //.athlete class is within $content
    $('.athlete').jScrollPane({autoReinitialise: true});
    $('.jspVerticalBar').css('width', '10px');
    $('.jspTrack').css('background','lightgrey');
    $('.jspDrag').css('background','black');
    $('.athlete').jScrollPane({autoReinitialise: true});
}); 
```

我尝试在之前和之后放置运动员课......它没有做任何事情......而且，第二次运行时，滚动条根本没有出现。

有什么帮助吗？

-=update=- 对于第二次没有正确显示的问题，我不得不在关闭时销毁 jsp 并开始工作。

```
var element = $('.athlete').jScrollPane(); 
var api = element.data('jsp');
api.destroy(); 
```

我无法让颜色发挥作用。

我最初包含 .css，但想在加载时更改颜色。我无法弄清楚这个问题，所以我只是修改了 .css

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T04:02:35.847

如您[在此处](http://jsfiddle.net/zE8Zj/19/)看到的，您的代码运行良好。如果您正在调用`jScrollPane()`点击事件，那么您试图到达的标签 ( `.jspVerticalBar`, `.jspTrack`, `.jspDrag`) 是在`css()`调用之后创建的，那么您应该使用[.on()](http://api.jquery.com/on/)将这些调用附加到事件中。

# sql-server - Visual Studio 2010 是否创建 SQL Server Express、SQL Server Compact 或 LocalDB？

> ID：12168918
> 
> 赞同：1
> 
> 时间：2012-08-28T23:22:59.173
> 
> 标签：sql-server, visual-studio-2010

在 Visual Studi0 2010 中，当我单击“添加新项目”并选择“SQL Server 数据库”时，它是在创建 SQL Server Express DB、SQL Server Compact DB 还是 LocalDB？

![添加新项目](../Images/26fc4d73dd9c3d4f25fc4ec2cfd89cfc.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T23:37:31.513

SQL Server 速成

..................................................

# python - Python3：在不受光标闪烁率影响的情况下获取键盘输入

> ID：12168922
> 
> 赞同：0
> 
> 时间：2012-08-28T23:23:23.727
> 
> 标签：python, input, keyboard, real-time

我正在尝试找到某种库或函数，以便获得快速的键盘输入。

现在，使用 Conio.h 输入法，您可以按住一个键，但您必须等待半秒才能开始重复，就像在任何文本框中一样。这似乎是由光标重复延迟决定的，如图所示。

![光标闪烁率](../Images/d19ae449e519667d39cd73bf0feef3c6.png)

有什么方法可以获得实时键盘输入，而不必忍受这个小延迟？

我听说过 pyHook，但这不适用于 Python 3(.2)。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:51:40.140

您需要以艰难的方式进行操作，创建自己的窗口，然后侦听 keydown 和 keyup 事件，使用计时器触发按键的“重复”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-19T21:05:43.537

我最终写了一个小 DLL 来使用 Win32 函数`GetAsyncKeyState`。

# html - 如何让渐变在Firefox中工作

> ID：12168931
> 
> 赞同：0
> 
> 时间：2012-08-28T23:23:53.460
> 
> 标签：html, css, firefox, gradient

我正在制作一个渐变导航栏，如下所示：

```
/* Gradient backgrounds for the buttons. Generated using http://gradients.glrzad.com/ */
background-image: -webkit-gradient(linear, left bottom, left top, color-stop(0, #b49931), color-stop(0.5, #5E5E5E), color-stop(0.51, #707070), color-stop(1, #838383));
background-image: -moz-linear-gradient(center bottom, #787878 0%, #5E5E5E 50%, #707070 51%, #838383 100%);
background-color:#5f5f5f; /* Fallback */ 
```

它在 safari 中效果很好，但在 Firefox 中不起作用。我知道制作图像会更好，但是有什么简单的方法可以在 Firefox 和 safari 中使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:47:50.040

我制作了一个 JSFiddle [http://jsfiddle.net/BVbfQ/](http://jsfiddle.net/BVbfQ/) 您可以使用 Safari 对结果进行截图并裁剪以制作可重复的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T23:49:07.787

使用这个工具。适用于所有浏览器

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

# android - 通过 Maven 多次部署到 USB 集线器上的 Android 设备

> ID：12168935
> 
> 赞同：5
> 
> 时间：2012-08-28T23:24:15.360
> 
> 标签：android, maven, ddms

我已经在 SO 上搜索了一段时间，但找不到明确的答案。

我最近为我的开发机器购买了一个 7 端口 USB 集线器，上面有 7 个不同的 Android 设备。

这样做主要是为了让所有东西都充电，但我也试图找出是否可以配置 Maven 甚至 DDMS）来识别设备并通过集线器一次部署到所有设备？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-03T04:45:50.733

当前版本的 Android SDK 不支持同时在多个连接的设备上安装 apk。这是硬性限制，因此目前唯一的解决方法是迭代连接的设备并为每个设备发出安装命令。

如果您查看[android-maven-plugin 文档](http://maven-android-plugin-m2site.googlecode.com/svn/deploy-mojo.html#device)，您会看到 android:deploy 目标中有一个有趣的参数，您可以在 pom.xml 中指定：

> **设备：**
> 
> 按序列号指定要连接的设备。特殊值“usb”和“emulator”也有效，分别用于选择唯一的 USB 连接设备或唯一运行的仿真器。
> 
> *   类型：java.lang.String
> *   要求：否
> *   表达式：${android.device}

好吧，文档声称它将安装 apk 到唯一连接的设备。我自己测试过，如果连接了多个设备，它也可以工作。

示例 pom.xml：

```
<plugin>
  <groupId>com.jayway.maven.plugins.android.generation2</groupId>
  <artifactId>android-maven-plugin</artifactId>
  <extensions>true</extensions>
  <configuration>
    <sdk>
      <platform>13</platform>
    </sdk>
    <undeployBeforeDeploy>true</undeployBeforeDeploy>
    <!-- Install apk to multiple attached devices -->
    <device>usb</device>
   </configuration>
</plugin> 
```

通过运行示例日志`mvn android:deploy`：

```
[INFO] Waiting for initial device list from the Android Debug Bridge
[INFO] Found 2 devices connected with the Android Debug Bridge
[INFO] android.device parameter set to usb
[INFO] Device 0123456789abcd_samsung_GT-I9100 found.
[INFO] Successfully uninstalled com.company.app from 0123456789abcd_samsung_GT-I9100
[INFO] Device 0123456789efg_HTC_HTCDesire found.
[INFO] Successfully uninstalled com.company.app from 0123456789efg_HTC_HTCDesire
[INFO] Found 2 devices connected with the Android Debug Bridge
[INFO] android.device parameter set to usb
[INFO] Device 0123456789abcd_samsung_GT-I9100 found.
[INFO] Successfully installed C:\workspace\my-app\target\app-1.0.0-SNAPSHOT.apk to 0123456789abcd_samsung_GT-I9100
[INFO] Device 0123456789efg_HTC_HTCDesire found.
[INFO] Successfully installed C:\workspace\my-app\target\app-1.0.0-SNAPSHOT.apk to 0123456789efg_HTC_HTCDesire
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------ 
```

如果您想知道 android-maven-plugin 是如何实现它的，请[在此处查看源代码](https://github.com/jayway/maven-android-plugin/blob/master/src/main/java/com/jayway/maven/plugins/android/AbstractAndroidMojo.java#L649)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T03:33:37.700

正如 yorkow 正确提到的那样，Android Maven 插件支持多个连接的设备和模拟器。

事实上，它对所有连接的设备和仿真器（无参数）、所有连接的设备（设备参数设置为 usb）、所有仿真器（设备参数设置为仿真器）或特定设备（设备参数设置为设备）。

为了使用该插件，我建议查看[Android Maven 插件网站](http://code.google.com/p/maven-android-plugin/)以及[Maven: The Complete Reference 一书中关于使用它进行 Android 开发的章节](http://www.sonatype.com/books/mvnref-book/reference/android-dev.html)

要记住的主要事情是，此参数和[多设备支持适用于所有设备交互目标](http://www.sonatype.com/books/mvnref-book/reference/android-dev-sect-device.html)（部署、取消部署、重新部署、运行、仪器、拉取和推送），因此您可以例如在多个设备上运行所有测试或也将文件推送到所有连接的设备。

此外，根据操作系统，您需要将 USB 制造商标识添加到 udev 规则或其他设置中。[在开发网站](http://developer.android.com/tools/device.html)上查看更多信息。

尝试

```
adb devices 
```

首先，然后使用 Android Maven 插件目标来查看它可以检测到什么

```
mvn android:devices 
```

PS：我是插件的核心提交者和链接书内容的作者。

# javascript - jQuery.Callbacks 与 jQuery.on/off/trigger

> ID：12168938
> 
> 赞同：1
> 
> 时间：2012-08-28T23:24:28.150
> 
> 标签：javascript, jquery, callback

两者之间的主要区别是什么？在哪些情况下我应该使用回调而不是关闭/开启/触发，反之亦然？

# c - 公共 C 声明的最佳实践取决于 config.h

> ID：12168939
> 
> 赞同：3
> 
> 时间：2012-08-28T23:24:33.180
> 
> 标签：c, autotools

我知道 config.h 头文件应该被认为是一个内部头文件。现在我想知道如何在不发布 config.h 本身的情况下发布依赖于 config.h 设置的内容。

说，我有一个返回的公共函数`bool`，即取决于 stdbool.h 或任何适当的定义`bool`。它应该在公共头文件中声明，但是这个头文件可以在没有 stdbool.h 的环境中使用，甚至可能没有 config.h 或 config.h 没有说明 bool 的存在。

我想出了一个不满意的解决方案，如下所示：

```
#if HAVE_STDBOOL_H || !HAVE_CONFIG_H
# include <stdbool.h>
#endif
#if !__bool_true_false_are_defined
# if !HAVE__BOOL
  typedef int _Bool;
# endif
  typedef _Bool bool;
# define true (bool)1
# define false (bool)0
#endif

extern bool public_bool(void); 
```

这应该适用于大多数标准情况，但在许多其他情况下可能会失败。

也许今天考虑到没有 stdbool.h 的环境已经过时了（我不知道），但这只是我对自动工具的理解差距的一个例子。一般来说，处理该问题的最佳做法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T00:21:00.770

在特定情况下`<stdbool.h>`，我们选择避免​​依赖`config.h`并依赖 C（或 C++）编译器来告诉我们什么是可以的。代码中包含了这个头文件，这个头文件整理了乱七八糟的东西。众所周知，它可以在 Mac OS X、Linux、Solaris、HP-UX、AIX、Windows 上运行。实际的头文件名不是`ourbool.h`，但我已经修改了它的头文件保护和注释，所以它看起来好像就是它的名字。评论引用了 C99 标准，以使许可证能够正常执行。请注意，如果`<stdbool.h>`已经包含它，它也可以正常工作，如果`<stdbool.h>`在包含后被包含，它也可以正常工作（并且正确地做到这一点并不是 100% 无痛的）。定义`__bool_true_false_are_defined`对这种互操作至关重要。（当您的代码被其他人使用时，您不能强制他们不使用`<stdbool.h>`自己，无论是在包含您的标头之前还是之后。）

```
#ifndef OURBOOL_H_INCLUDED
#define OURBOOL_H_INCLUDED

/*
** Ensure that type bool with constants false = 0 and true = 1 are defined.
** C++ (ISO/IEC 14882:1998/2003/2011) has bool, true and false intrinsically.
** C (ISO/IEC 9899:1999) has bool, true and false by including <stdbool.h>
** C99 <stdbool.h> also defines __bool_true_false_are_defined when included
** MacOS X <dlfcn.h> manages to include <stdbool.h> when compiling without
** -std=c89 or -std=c99 or -std=gnu89 or -std=gnu99 (and __STDC_VERSION__
** is not then 199901L or later), so check the test macro before defining
** bool, true, false.  Tested on MacOS X Lion (10.7.1) and Leopard (10.5.2)
** with both:
**      #include "ourbool.h"
**      #include <stdbool.h>
** and:
**      #include <stdbool.h>
**      #include "ourbool.h"
**
** C99 (ISO/IEC 9899:1999) says:
**
** 7.16 Boolean type and values <stdbool.h>
** 1 The header <stdbool.h> defines four macros.
** 2 The macro
**       bool
**   expands to _Bool.
** 3 The remaining three macros are suitable for use in #if preprocessing
**   directives.  They are
**       true
**   which expands to the integer constant 1,
**       false
**   which expands to the integer constant 0, and
**       __bool_true_false_are_defined
**   which expands to the integer constant 1.
** 4 Notwithstanding the provisions of 7.1.3, a program may undefine and
**   perhaps then redefine the macros bool, true, and false.213)
**
** 213) See 'future library directions' (7.26.7).
**
** 7.26.7 Boolean type and values <stdbool.h>
** 1 The ability to undefine and perhaps then redefine the macros bool, true,
**   and false is an obsolescent feature.
**
** Use 'unsigned char' instead of _Bool because the compiler does not claim
** to support _Bool.  This takes advantage of the license of paragraph 4.
*/

#if !defined(__cplusplus)

#if __STDC_VERSION__ >= 199901L
#include <stdbool.h>
#elif !defined(__bool_true_false_are_defined)
#undef bool
#undef false
#undef true
#define bool    unsigned char
#define false   0
#define true    1
#define __bool_true_false_are_defined 1
#endif

#endif /* !_cplusplus */

#endif /* OURBOOL_H_INCLUDED */ 
```

显然，如果你想考虑 的可能性`HAVE_STDBOOL_H`，你可以，但它不是必需的。您还可以决定如果定义了要做什么`HAVE_CONFIG_H`，但同样不需要它。

要使用它，您的标题将包含：

```
#ifndef YOURHEADER_H_INCLUDED
#define YOURHEADER_H_INCLUDED
...other #includes as needed...
#include "ourbool.h"      /* Or #include "project/ourbool.h" */
...other material...

extern bool boolean_and(bool lhs, bool rhs);

...other material...
#endif /* YOURHEADER_H_INCLUDED */ 
```

`ourbool.h`in的精确位置`yourheader.h`并不重要，只要它在您声明使用该`bool`类型的类型、函数或（消除想法）变量之前。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T23:35:38.427

在配置时未检测到的事件中，在公共安装的标头中定义`bool`,`true`和您自己似乎是一个非常糟糕的主意。在这种特殊情况下，我认为解决方案是除非您可以假设您的库的用户都将具有符合 C99 或更高版本的环境，否则您不应该将其用作公共接口的一部分。使用，就像所有惯用的 C 代码一样，会使问题完全消失。`false``stdbool.h``bool``int`

`bool`话虽如此，还有一个一般性问题需要解决，该问题适用于与可能合法需要安装的标头根据库配置的环境不同而表现不同的情况无关的情况。在这种情况下，我认为最好的解决方案是让您的标头成为由您的构建系统（例如使用 autoconf）创建的*生成文件*`mylib.h.in`，该文件设置为匹配它所构建的系统。

# django - “DoesNotExist：ContentType 匹配查询不存在”只是偶尔发生

> ID：12168941
> 
> 赞同：0
> 
> 时间：2012-08-28T23:24:38.620
> 
> 标签：django, django-templates, django-contenttypes

非常简单的代码，但情况很奇怪......

有一个带有这个片段的模板：

```
{% is_contest story as iscontest %} 
```

其中 is_contest 是这个自定义模板标签：

```
@register.assignment_tag
def is_contest(obj):
    contesttype = ContentType.objects.get_for_model(Contest)
    return obj.source_content_type == contesttype 
```

但是竞赛在 django_content_type 表中。

最奇怪的部分：这只是一个间歇性错误，似乎只是由模板标签引起的（我也在视图中进行了此检查，但那里没有错误）。

有任何想法吗？

编辑：完整追溯

```
Traceback (most recent call last):

  File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 111, in get_response
    response = callback(request, *callback_args, **callback_kwargs)

  File "/home/ubuntu/src/cbframe/commentableobjects/views/commentableobject_list.py", line 142, in commentablobject_list
    return render_to_response('commentableobjects-list.html', info, context_instance=RequestContext(request))

  File "/usr/local/lib/python2.7/dist-packages/django/shortcuts/__init__.py", line 20, in render_to_response
    return HttpResponse(loader.render_to_string(*args, **kwargs), **httpresponse_kwargs)

  File "/usr/local/lib/python2.7/dist-packages/django/template/loader.py", line 176, in render_to_string
    return t.render(context_instance)

  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 140, in render
    return self._render(context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 134, in _render
    return self.nodelist.render(context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 823, in render
    bit = self.render_node(node, context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py", line 74, in render_node
    return node.render(context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py", line 123, in render
    return compiled_parent._render(context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 134, in _render
    return self.nodelist.render(context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 823, in render
    bit = self.render_node(node, context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py", line 74, in render_node
    return node.render(context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py", line 62, in render
    result = block.nodelist.render(context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 823, in render
    bit = self.render_node(node, context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py", line 74, in render_node
    return node.render(context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/defaulttags.py", line 281, in render
    return nodelist.render(context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 823, in render
    bit = self.render_node(node, context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py", line 74, in render_node
    return node.render(context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py", line 155, in render
    return self.render_template(self.template, context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/loader_tags.py", line 137, in render_template
    output = template.render(context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 140, in render
    return self._render(context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 134, in _render
    return self.nodelist.render(context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 823, in render
    bit = self.render_node(node, context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/debug.py", line 74, in render_node
    return node.render(context)

  File "/usr/local/lib/python2.7/dist-packages/django/template/defaulttags.py", line 185, in render
    nodelist.append(node.render(context))

  File "/usr/local/lib/python2.7/dist-packages/django/template/base.py", line 1139, in render
    context[self.target_var] = func(*resolved_args, **resolved_kwargs)

  File "/home/ubuntu/src/cbframe/commentableobjects/templatetags/url_target_blank.py", line 27, in is_contest
    return obj.source_content_type == contesttype

  File "/usr/local/lib/python2.7/dist-packages/django/db/models/fields/related.py", line 350, in __get__
    rel_obj = qs.get(**params)

  File "/usr/local/lib/python2.7/dist-packages/django/db/models/query.py", line 366, in get
    % self.model._meta.object_name)

DoesNotExist: ContentType matching query does not exist. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:36:04.023

一个问题可能是您正在相互比较 2 个实例，而这些在 Django 中应该是相同的，因为 Django 缓存了它们，这不能保证。

不知道如何/从哪里来`source_content_type`，但我会推荐这个：

```
return isinstance(obj, contesttype) 
```

至于原来的问题，你有stacktrace吗？这个错误似乎有点奇怪。

您确定`Contest`没有在范围内的某处被覆盖吗？ `Contest`可能会被模块中的其他代码覆盖，在这种情况下最有可能的嫌疑人是 a`global Contest`但这里似乎并非如此。

[编辑]

感谢堆栈跟踪，问题更加清晰。

这部分特别表明它在该`obj.source_content_type`部分中出错了：

```
return obj.source_content_type == contesttype 
```

我认为某些对象`source_content_type`不再存在。

# twitter - Twitter 分享按钮停止工作

> ID：12168942
> 
> 赞同：0
> 
> 时间：2012-08-28T23:25:00.167
> 
> 标签：twitter

我有 2 个网站，其中 Twitter 分享按钮停止工作。

有没有人遇到过同样的问题？

以下是我的网站的链接：

*   [http://bit.ly/PMVJeA](http://bit.ly/PMVJeA)
*   [http://bit.ly/MQQdYG](http://bit.ly/MQQdYG)

问题似乎与 IE8 无关，不确定 Chrome ......在 FF14 中似乎还可以

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T03:51:02.693

我们目前遇到的问题是，任何版本的 IE 的新旧 Twitter 版本的“Twitter Share Button”都会导致我们网站上的*某些*JavaScript 无法执行。（特别是标题相关）

修了一个小时左右后，我把它搁置了。刚刚使用 IE 浏览器检测来阻止它在 IE 浏览器上放置 Twitter 按钮。

抱歉，我无法提供更多帮助 - 但我觉得这已经到了 Twitter 的尽头。

# regex - 使用R中的正则表达式为变量分配名称

> ID：12168944
> 
> 赞同：1
> 
> 时间：2012-08-28T23:25:23.377
> 
> 标签：regex, r

所以我的工作区中有一堆变量。我想将它们的一个子集分配给一个新变量，这样我就可以轻松地在这个子集上运行函数：

工作区：

```
...
group10
group40
location40
test 
```

期望的任务：

```
groupList <- list(group10,group40, ...) 
```

预期的正则表达式：

```
^group[0-9]+ 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:28:18.500

`ls`接受一个`pattern`论点：

```
group10 <- group40 <- location40 <- test <- NA
mysub <- ls(pattern="^group[0-9]+")
mysub
#[1] "group10" "group40" 
```

您可以使用`lapply`循环变量名称`get`及其值的列表

```
groupList <- lapply(mysub, get) 
```

或者，在一行中

```
groupList <- lapply(ls(pattern="^group[0-9]+"), get) 
```

# string - ElasticSearch 错误地索引和查询非字母数字字符

> ID：12168948
> 
> 赞同：6
> 
> 时间：2012-08-28T23:26:02.790
> 
> 标签：string, normalization, elasticsearch

我的 ElasticSearch 索引未正确索引和查询非字母数字字符。具体来说，点和破折号会导致问题。

如果我索引一个名为“OK Corral”的文档，它应该匹配“OK Corral”的查询。同样，如果我索引“Whiskey A Go-Go”，我希望它匹配“Whiskey A GoGo”和“Whiskey A Go Go”。

现在，只有带有正确点和破折号的查询才会返回这些文档。

我希望该解决方案还可以解决其他非字母数字字符（如逗号和撇号）的任何潜在问题。

这听起来像是 ElasticSearch 令牌过滤器的工作，但我一直无法找到一个能满足我要求的功能。另外，我想在 ElasticSearch 中执行此操作——我不想在数据到达我的 ES 索引之前编写自定义字符串操作来规范化数据。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T15:16:39.253

您可能想看看[Word Delimiter Token Filter](http://www.elasticsearch.org/guide/reference/index-modules/analysis/word-delimiter-tokenfilter.html)。它至少可以用“Whiskey A GoGo”和“Whiskey A Go-Go”做你想做的事。[您可以使用分析 api](http://www.elasticsearch.org/guide/reference/api/admin-indices-analyze.html)提前检查其行为。

# html - 更新 django 项目：将 html 表单方法从 GET 更改为 POST

> ID：12168949
> 
> 赞同：0
> 
> 时间：2012-08-28T23:26:02.150
> 
> 标签：html, django, forms, post

我是 django 的新手，并且制作了一个方法：GET 带有复选框/文本框和提交按钮的表单。我想将其更改为方法：POST 表单，但不断收到错误消息：

> 失败原因：
> 
> CSRF 令牌丢失或不正确。
> 
> 通常，当存在真正的跨站点请求伪造时，或者未正确使用 Django 的 CSRF 机制时，可能会发生这种情况。对于 POST 表单，您需要确保：
> 
> 您的浏览器正在接受 cookie。
> 
> 视图函数使用 RequestContext 作为模板，而不是 Context。
> 
> 在模板中，每个针对内部 URL 的 POST 表单内都有一个 {% csrf_token %} 模板标签。
> 
> 如果您没有使用 CsrfViewMiddleware，那么您必须在任何使用 csrf_token 模板标签的视图以及接受 POST 数据的视图上使用 csrf_protect。

我试图更改调试器所说的所有内容，但我不断收到相同的错误。我想知道除了views.py、模板文件（.html）和settings.py文件之外是否还有其他文件需要更改：

视图.py：

```
from django.template import RequestContext, loader
from crunchApp.models import Filter
from django.http import HttpResponse
from django.core.context_processors import csrf
from django.shortcuts import render_to_response, get_object_or_404
from django.http import Http404    

def results(request):

    c = {}
    c.update(csrf(request))
    return render_to_response('crunchApp/results.html', c) 
```

模板/test.html

```
 <form name="myform" action="results" method = "post" >{% csrf_token %}
        <fieldset>
            <input type="checkbox" value="total_money" id = "money_check" name="check" /> Filter by Total Money</br>
    </fieldset></form> 
```

设置.py

```
MIDDLEWARE_CLASSES = (
'django.middleware.common.CommonMiddleware',
'django.contrib.sessions.middleware.SessionMiddleware',
'django.middleware.csrf.CsrfViewMiddleware',
'django.contrib.auth.middleware.AuthenticationMiddleware',
'django.contrib.messages.middleware.MessageMiddleware',
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:45:44.500

你不应该需要

```
c = {}
c.update(csrf(request)) 
```

但你确实需要 context_instance=RequestContext(request)，如

```
render_to_response(<template>, <vars>, context_instance=RequestContext(request)) 
```

# actionscript-3 - AS3 Preloader 不更新屏幕

> ID：12168957
> 
> 赞同：0
> 
> 时间：2012-08-28T23:28:05.747
> 
> 标签：actionscript-3, preloader

我一直在努力使用 Flash 预加载器。我只希望它用当前百分比更新屏幕上的文本。现在它基本上可以作为跟踪输出正确的百分比，但它不会更新我在屏幕上的文本字段。但是，一旦跟踪达到 100%，代码会在屏幕上输出“100”，但直到全部加载完毕。我没有 Flash IDE，只是在 FlashDevelop 中使用纯 Actionscript。这是我的代码：

```
package 
{
  import flash.display.Sprite;
  import flash.events.Event;
  import flash.display.Loader;
  import flash.events.ProgressEvent;
  import flash.net.URLRequest;
  import flash.net.URLLoader;
  import flash.display.Loader; 
  import flash.text.TextField;
  import flash.text.TextFormat;
  import flash.text.TextFieldType;

  public class Main extends Sprite 
  {
    public var myLoader:Loader = new Loader();
    public var image:String = "tmp/Avengers-poster.jpg";

    private var Title:TextField;
    private var txt:String;
    private var Form:TextField;

    public function Main():void {
      textbox("This is the title","box",100,100,200,30);

      myLoader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, onProgressStatus);
      myLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoaderReady);

      var fileRequest:URLRequest = new URLRequest(image);
      myLoader.load(fileRequest);           
    }

    public function onProgressStatus(e:ProgressEvent):void {   
        // this is where progress will be monitored     
        var perc:int = Math.ceil((e.bytesLoaded/e.bytesTotal)*100);
        txt = perc.toString();
        Title.text = txt;
        addChild (Title);
        trace(perc); 
    }

    public function onLoaderReady(e:Event):void {     
        // the image is now loaded, so let's add it to the display tree!     
        addChild(myLoader);
    }   

    private function textbox (title_str:String,form_name:String,x:int,y:int,width:int,height:int):void {

       Title = new TextField ();
       Title.text = title_str;
       Title.selectable = false;
       Title.setTextFormat (new TextFormat ("Arial", 12, 0x777777, true));

       txt = ".";

       Title.x = x;
       Title.y = y;
       addChild (Title);
    }       

  }

} 
```

谢谢你的帮助。

达里尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T08:23:11.293

这将起作用。不要在每个状态上重新创建 TextField。您只需要 addChild 一次并更新对它的引用。

```
package 
{
    import flash.display.Loader;
    import flash.display.Sprite;
    import flash.events.Event;
    import flash.events.ProgressEvent;
    import flash.net.URLLoader;
    import flash.net.URLRequest;
    import flash.text.TextField;
    import flash.text.TextFieldType;
    import flash.text.TextFormat;   

    public class Main extends Sprite 
    {
        public var myLoader:Loader = new Loader();
        public var image:String = "http://apod.nasa.gov/apod/image/0605/titan5km_huygens_big.jpg";

        private var Title:TextField;
        private var Form:TextField;

        public function Main():void {

            createTextField("This is the title","box",100,100,200,30);

            myLoader.contentLoaderInfo.addEventListener(ProgressEvent.PROGRESS, onProgressStatus);
            myLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoaderReady);

            var fileRequest:URLRequest = new URLRequest(image);
            myLoader.load(fileRequest);           
        }

        public function onProgressStatus(e:ProgressEvent):void {   
            // this is where progress will be monitored     
            var perc:int = Math.ceil((e.bytesLoaded/e.bytesTotal)*100);
            Title.text = perc.toString();
        }

        public function onLoaderReady(e:Event):void {     
            // the image is now loaded, so let's add it to the display tree!     
            addChild(myLoader);
        }   

        private function createTextField (title_str:String,form_name:String,x:int,y:int,width:int,height:int):void {

            Title = new TextField();
            Title.text = title_str;
            Title.selectable = false;
            Title.setTextFormat (new TextFormat ("Arial", 12, 0x777777, true));

            Title.text = ".";

            Title.x = x;
            Title.y = y;

            addChild (Title);
        }       

    }   
} 
```

# vb6 - 在 Vb6-MSR 和 DAO 3.6 中添加引用

> ID：12168959
> 
> 赞同：0
> 
> 时间：2012-08-28T23:28:10.543
> 
> 标签：vb6

也许我对引用在 VB6 中的工作原理一无所知。我有一个在 Visual Basic 6 上编写的应用程序。我添加了 Microsoft Scripting Runtime 和 Data Access Object 3.6 作为参考。我想知道应该将哪个组件放置在其他系统中以防止与这两个参考相关的问题。我的意思是，如果用户有 Windows XP、Vista、7 或 8，我的应用程序是否可以在这些版本的 Windows 中正确运行？（考虑这两个参考）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-07T20:29:48.733

[如Microsoft 支持页面](http://support.microsoft.com/kb/233002)所述，您必须包含 DAO 3.6 可再发行文件；但是，如果不存在其他潜在问题（例如其他不兼容的使用 ActiveX 控件），您的应用程序将在所有这些目标 Windows 版本上正常工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T02:42:37.887

让您的客户安装 Microsoft 创建的 EXE：

*   对于 Microsoft Scripting Runtime，请查看[本文](http://support.microsoft.com/kb/254166)的“原因”部分。
*   对于 DAO，请查看[本文](http://support.microsoft.com/kb/280513)的解决方案部分。

# android - Android，试图让按钮位于屏幕的底部

> ID：12168960
> 
> 赞同：0
> 
> 时间：2012-08-28T23:28:10.397
> 
> 标签：android

我正在尝试制作一个简单的应用程序来显示图片。图像被缩放以适合屏幕，然后图像下方有一个下一个和上一个按钮。我希望下一个和上一个按钮位于按钮上，但它们不断被绘制在图像的按钮上。因此，每次显示新图像时，它们都会根据图片的大小上下移动。

我在这里找到了以下解决方案，但它对我不起作用：

```
android:gravity="bottom"  
android:layout_alignParentBottom="true" 
```

这是xml文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/backFeetGallery"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/viewimage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:src="@drawable/background" />

    <LinearLayout
        android:id="@+id/linearLayout4"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:gravity="bottom"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/butLeft"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="12px"
            android:text=" Left "
            android:textColor="#ff0000ff" />

        <Button
            android:id="@+id/butFavrest"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="12px"
            android:text=" Favrets "
            android:textColor="#ff0000ff" />

        <Button
            android:id="@+id/butEmail"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="12px"
            android:text=" email "
            android:textColor="#ff0000ff" />

        <Button
            android:id="@+id/butRight"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="12px"
            android:text=" Right "
            android:textColor="#ff0000ff" />
    </LinearLayout>

</LinearLayout> 
```

源代码

```
public class cFeetView extends cBaseView implements OnClickListener {
    cFileNames mFileNames;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.feet);

        // add listeners
        View mLeft = findViewById(R.id.butRight);
        mLeft.setOnClickListener(this);

        // add listeners
        View mRight = findViewById(R.id.butLeft);
        mRight.setOnClickListener(this);

        mFileNames=new cFileNames();
        mFileNames.Start();
        DrawFeet();
    }

    public void DrawFeet()
    {
        int screenHeight;
        ImageView picImage = (ImageView) findViewById(R.id.viewimage);// R.id.viewpic);
        try {
            String FileName = "canon20.png";
            FileName=mFileNames.Current();
            AssetManager assetManager = getAssets();
            InputStream inputStream;
            inputStream = assetManager.open(FileName);
            Bitmap icon = BitmapFactory.decodeStream(inputStream);

            int screenWidth = getWindowManager().getDefaultDisplay().getWidth();
            screenHeight = getWindowManager().getDefaultDisplay().getHeight();

            int bw = icon.getWidth();
            int bh=icon.getHeight();
            float t = (float) screenWidth / (float) bw;

            int iConHeight=(int)((float)bh*t);
            picImage.setImageBitmap(icon);

            // scale it
            picImage.getLayoutParams().width = screenWidth;
            picImage.getLayoutParams().height =iConHeight;
            Bitmap scaledIcon = Bitmap.createScaledBitmap(icon, screenWidth, iConHeight, false);

        } catch (IOException e) {
        }
    }
    // set the top and buttom margins

    public void onClick(View v)
    {
        Intent i;
        switch(v.getId())
        {
        case R.id.butLeft:
            mFileNames.Pre();   
            DrawFeet();
            break;
        case R.id.butRight:
            mFileNames.Next();
            DrawFeet();
            break;              
        }
    }
} // end class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T07:20:49.830

Instead of LinearLayout, use RelativeLayout in your xml file.

LinearLayout is used only to arrange them in horizontal or vertical directions.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T23:32:08.503

为了使用 alignParentBottom，您需要使用 RelativeLayout。而且你不需要重力属性。

我对您的特定场景的建议是您有一个 RelativeLayout 并将所有按钮放在一个底部对齐的 LinearLayout 和其上方的 ImageView 中。

伪：

```
<RelativeLayout>
   <ImageView />

   <LinearLayout
      android:layout_below="@ImageView_id"
      android:layout_alignParentBottom=true>
   </LinearLayout>
</RelativeLayout> 
```

Edited with your xml:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/backFeetGallery"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <ImageView
        android:id="@+id/viewimage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true"
        android:src="@drawable/background" />

    <LinearLayout
        android:id="@+id/linearLayout4"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:layout_below="@id/viewimage"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/butLeft"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="12px"
            android:text=" Left "
            android:textColor="#ff0000ff" />

        <Button
            android:id="@+id/butFavrest"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="12px"
            android:text=" Favrets "
            android:textColor="#ff0000ff" />

        <Button
            android:id="@+id/butEmail"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="12px"
            android:text=" email "
            android:textColor="#ff0000ff" />

        <Button
            android:id="@+id/butRight"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_marginTop="12px"
            android:text=" Right "
            android:textColor="#ff0000ff" />
    </LinearLayout>

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T23:38:16.643

You need to have everything in RelativeLayout. For example, look at this sample code which I made for one button which is aligned to bottom center of screen.

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_centerHorizontal="true"
    android:text="Button" /> 
```

And here is the complete layout file for your layout

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:text="Button" />

<Button
    android:id="@+id/button4"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:text="Button" />

<Button
    android:id="@+id/button3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:text="Button" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_toRightOf="@+id/button2"
    android:text="Button" />

<Button
    android:id="@+id/button5"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_toLeftOf="@+id/button3"
    android:text="Button" />

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="38dp"
    android:src="@android:drawable/gallery_thumb" /> 
```

This is how it looks, ![enter image description here](../Images/7a91894ec8d9074476ff71c1f1a83bb7.png)

# java - 这是一个有效的 java 包名吗？

> ID：12168968
> 
> 赞同：2
> 
> 时间：2012-08-28T23:28:43.160
> 
> 标签：java, packages

> **可能重复：**
> [Java 中的个人/爱好项目使用什么包命名约定？](https://stackoverflow.com/questions/292169/what-package-naming-convention-do-you-use-for-personal-hobby-projects-in-java)

我做了一个google站点站点名称sites.google.com/sites/abc。（abc不是实名）

mcl.abc.sites.com.google.sites 对于包名称是否有效。

编辑：哎呀 com.google.sites.abc.mcl

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T23:31:44.963

有效的？是的。传统的？可能不是。

Java 约定通常建议将包名称反向作为网站地址（如您公司的），例如 com.google.foo。

更多关于命名约定[的信息](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T23:35:04.210

您可以使用任何名称，但如果它对您使用的标准有效，我推荐以下标准：

1）避免使用country.company.util（我在公司更改名称3次的项目中工作，因此您可以在相同的项目名称中看到：com.companyname1.util，cl.companyname2.util，com。 companyname3.util) 2) 您可以使用如下命名：dev.utils 或 apiname.commons.utils 或任何其他标准

好吧，我希望这能澄清你的疑虑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T23:37:11.967

Java 中包的标准编码约定颠倒了域名。

鉴于你的例子，

sites.google.com/sites/abc

```
com.google.sites.abc.mcl 
```

# javascript - 使用变量的名称，然后为变量定义一个函数

> ID：12168971
> 
> 赞同：0
> 
> 时间：2012-08-28T23:28:57.883
> 
> 标签：javascript

我已经看到这个在一些 javascript 上徘徊了一段时间，并且想知道它是什么意思。

在这段代码中：

```
var topics = {};

jQuery.Topic = function( id ) {

    var callbacks,
        topic = id && topics[ id ];
    if ( !topic ) {
        callbacks = jQuery.Callbacks();
        topic = {
            publish: callbacks.fire,
            subscribe: callbacks.add,
            unsubscribe: callbacks.remove
        };
        if ( id ) {
            topics[ id ] = topic;
        }
    }
    return topic;
}; 
```

为什么变量主题`id &&`之前有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:33:08.293

如果第`&&`一个操作数是“假的”，则运算符产生它的第一个操作数，如果第一个操作数不是“假”，则产生第二个操作数。因此，您可以将这段代码解读为：

> `topics[id]`如果给这个函数一个参数¹，或者 `undefined`没有，让主题成为。
> 
> ¹ 传递`false`或`0`或其他虚假值作为参数会导致`topic`获取该值，但阅读代码不会留下您应该这样做的印象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-28T23:32:40.977

`id`该行所做的是在尝试使用它之前确保它是一个真实的值。这里可能不是一个好主意，因为它会让人`topics[0]`无法访问。

这条线`topic = id && topics[id]`大致相当于`if( id) topic = topics[id]; else topic = id;`

# ios - iOS第二显示器

> ID：12168972
> 
> 赞同：0
> 
> 时间：2012-08-28T23:29:12.367
> 
> 标签：ios, airplay, uiscreen

除了镜像我的设备屏幕外，我没有让第二个显示器显示任何其他内容。我总是在电视上看到镜像的设备屏幕。这是我的代码，我希望有人可以帮助我。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
NSNotificationCenter *center = [NSNotificationCenter defaultCenter];

[center addObserver:self selector:@selector(configureScreens) name:UIScreenDidConnectNotification object:nil];

[center addObserver:self selector:@selector(configureScreens) name:UIScreenDidDisconnectNotification object:nil];

[self configureScreens];

return YES;
}

-(void)configureScreens
{
NSUInteger screenCount = [[UIScreen screens] count];

NSLog(@"%u",screenCount);

if (screenCount == 1) {
    //single windows
}else if(screenCount == 2) {
    UIScreen *appleTvScreen = [[UIScreen screens] objectAtIndex:1];
    UIWindow *tvWindow = [[UIWindow alloc] initWithFrame:appleTvScreen.bounds];
    tvWindow.screen = appleTvScreen;
    tvWindow.backgroundColor = [UIColor redColor];

    tvWindow.rootViewController = [[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil] instantiateViewControllerWithIdentifier:@"tv"];

    tvWindow.hidden = NO;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T12:41:25.080

我可以建议您尝试 GITHub 上的示例源代码 TVOut - [https://github.com/JohnGoodstadt/TVOut](https://github.com/JohnGoodstadt/TVOut)。

它使用与您类似的代码，但打包在一个类中，您可以复制并从您自己的代码中调用该类。

它应该可以解决您的显示问题。

# c# - Image.FromFile 开始“跳过”文件

> ID：12168973
> 
> 赞同：0
> 
> 时间：2012-08-28T23:29:17.143
> 
> 标签：c#

我正在将一堆文件加载到 中`ListView`，并且我使用`Image.FromFile()`and`.Width`和`.Height`来在指定列中显示每个文件的分辨率。但是，每当我加载多个文件时，此方法就会开始跳过文件。首先，说 50 个文件都已正确加载，但之后越来越多的文件被跳过。

什么可能导致这个问题，有没有更好的替代方法可用？这种方法也大大减慢了加载过程，所以希望这个过程可以加快一点。

编辑：对不起......这是相关代码：

```
private void AddItem(string file)
{
     FileInfo fi = new FileInfo(file);
     ListViewItem item = new ListViewItem(fi.FullName);

     try
     {
          Image img = Image.FromFile(fi.FullName);
          item.SubItems.Add(string.Format("{0} x {1}", img.Width, img.Height));
     }

     catch { }

     ((ListView)sender).Items.Add(item); 
```

}

try/catch 方法旨在防止非图像文件出错。但是，他们似乎也对跳过问题“负责”。当我禁用它们时，我得到一个“内存不足”错误，这似乎是这里的真正原因。

# git - 是否有某种“git init -f”？

> ID：12168974
> 
> 赞同：0
> 
> 时间：2012-08-28T23:29:28.310
> 
> 标签：git

我想克隆一个远程仓库（例如一个框架），然后在它上面初始化我自己的空白仓库。有没有简单的方法来实现它？（就像`git init -f`它是真的一样）

我知道我可以删除`.git`然后重新初始化。我只是想知道是否有更好的方法。谢谢 （：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T23:33:09.630

有，但是有点乱。您基本上必须重新设置跟踪原始项目的位置和方式 - 但您可以保留历史记录，这很好。

查看[此链接](http://www.programblings.com/2008/07/21/setting-up-a-long-term-fork-with-git/)以获取有关如何分叉现有 git 存储库的想法。如果有更简单的方法来维护历史记录，但要分开两个 git 项目，我不知道。

就个人而言，除非您真的想保留原始存储库的历史记录，否则我只会删除 .git 文件夹并重新初始化 :)

# macos - pkg-config 和 OSX 10.8，正确的 PKG_CONFIG_PATH？缺少 .pc 文件？

> ID：12168975
> 
> 赞同：22
> 
> 时间：2012-08-28T23:29:34.190
> 
> 标签：macos, build, makefile, osx-mountain-lion, pkg-config

我在 OSX 中使用 homebrew 安装了 pkg-config。我不确定我应该将 PKG_CONFIG_PATH 设置为什么？它应该是 /usr/include 和 /usr/local/include 的组合吗？即使我使用其中一个，我也会收到关于没有任何 .pc 文件的错误，我认为它会包含 pkg-config 使用的信息？不知道我做错了什么。帮助表示赞赏。

```
$ pkg-config --libs libxml2  
Package libxml2 was not found in the pkg-config search path.  
Perhaps you should add the directory containing `libxml2.pc'  
to the PKG_CONFIG_PATH environment variable  
No package 'libxml2' found 
```

更新：所以也许我在问两个不同的问题。我只是卷曲 gsl 并运行了 ./configure && make && sudo make install。而对于一个空的 $PKG_CONFIG_PATH 我实际上得到了一个打击：

```
pkg-config --libs gsl  
-L/usr/local/lib -lgsl -lgslcblas -lm 
```

但是列出 /usr/local/lib 会显示 gsl 库但没有 .pc 文件。pkg-config 如何适用于 OSX 中的自定义安装包，但不适用于默认安装的包？？？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-21T05:24:54.823

`echo "export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig:/usr/local/lib" >> ~/.bashrc && source ~/.bashrc`

用说 glib 进行测试：

```
brew install glib && pkg-config --libs --cflags glib-2.0 
```

应该给你货物：

```
-I/usr/local/Cellar/glib/2.34.3/include/glib-2.0 -I/usr/local/Cellar/glib/2.34.3/lib/glib-2.0/include -I/usr/local/Cellar/gettext/0.18.2/include  -L/usr/local/Cellar/glib/2.34.3/lib -L/usr/local/Cellar/gettext/0.18.2/lib -lglib-2.0 -lintl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T23:27:57.477

我无法在上面尼克的回答中添加澄清评论，但这是您需要的正确路径集，我已成功尝试在 osx 10.9.1 上使用自制软件。

如果您希望它与 IDE 等 GUI 应用程序一起使用，您需要将该路径添加到`/etc/launchd.conf`.

请参阅以下堆栈溢出注释： [在 OS X 中设置环境变量？](https://stackoverflow.com/questions/135688/setting-environment-variables-in-os-x)

# excel - 如何使用 VBA 将多列中的术语匹配到一列

> ID：12168977
> 
> 赞同：0
> 
> 时间：2012-08-28T23:30:15.200
> 
> 标签：excel, vlookup, vba

我有用户 ID 的 Sheet1 与多个术语相关联。这些术语在单独的列中列出。每个用户最多有 30 个术语。该工作表在 A 列中组织为用户 ID，在 B、C、D 列等中组织为术语。

然后，我有一系列与 Sheet2 中唯一类别相关的术语（A 列中的术语，B 列中的类别）。目标是将用户与类别匹配。因此，我需要执行史诗比例的 Vlookup 或运行 VBA 程序，将 Sheet1 中 B、C、D 等列中的术语与 Sheet2 中 A 列中的术语进行比较。

如果在 Sheet2 中找到，如果公式将术语替换为 Sheet1 中的相关类别，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T23:37:36.263

创建工作表3

将以下内容粘贴到 sheet3 单元格 A1 中：

```
=iferror(vlookup(sheet1!A1,sheet2!:$A:$B,2,0),sheet1!A1) 
```

然后向下和向右拖动 sheet1 中的行/列。

本质上，该公式将查找 sheet2 列表中每个 sheet1 单元格中的任何内容。如果找到它，它会返回该值，如果不是，它只会显示 sheet1 上的内容。

**更新**

如果您有旧版本的 excel 没有，`iferror`您可以`iserror`像这样使用：

```
=if(iserror(vlookup(sheet1!A1,sheet2!:$A:$B,2,0)),sheet1!A1,vlookup(sheet1!A1,sheet2!:$A:$B,2,0)) 
```

# python - python 2to3 中的 eval(input())

> ID：12168978
> 
> 赞同：3
> 
> 时间：2012-08-28T23:30:23.490
> 
> 标签：python, python-2to3

来自 Python [2to3 文档](http://docs.python.org/library/2to3)：

> `input`：
> 
> 转换`input(prompt)`为`eval(input(prompt))`

在使用 Python 2 几年后，我目前正在尝试学习 Python 3。任何人都可以解释为什么该工具`eval`在调用之前插入`input`，以及我是否应该在我的所有 Python 3 代码中这样做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T00:46:40.157

python 2 的旧输入行为已被删除，python 3 的当前输入是以前命名的 raw_input。raw_input 和 python 3 input 总是返回一个字符串，不像 input 试图将输入评估为表达式。

2to3 工具插入了一个评估，因为它无法判断您是否依赖旧输入自动评估其输入。旧的输入行为被认为是一个错误，因为您几乎可以评估任何有效的 Python 表达式，因此任何使用 input() 的 Python 程序都有一个明显的安全漏洞。转换后，您应该评估 eval 的每次使用，并确定该部分代码是否将接收任何不受信任的用户输入。

你不应该使用 eval(input())，除非在一次性脚本中。没有办法使 eval 安全。

# delphi - JSON 空数组

> ID：12168982
> 
> 赞同：9
> 
> 时间：2012-08-28T23:31:01.350
> 
> 标签：delphi, delphi-xe2

我正在尝试解析从 REST Web 服务返回的一些 JSON。get() 调用的返回是一个 TStringStream。我正在使用 dbxjson 处理数据。为了让这里的演示更容易，我创建了一个测试项目，它可以在不调用 Web 服务的情况下重现错误（改用文本文件作为 Web 服务输出）。这是代码：

```
var SL : TStringStream;
  LJsonObj : TJSONObject;
begin
  SL := TStringStream.Create;
  try
    SL.LoadFromFile('output.txt');
    LJsonObj := TJSONObject.ParseJSONValue(TEncoding.ASCII.GetBytes(SL.DataString), 0) as TJSONObject;
  finally
    SL.Free;
  end;
end; 
```

有时这个 JSON 数据中的 phone_numbers 数组是空的。在来自 Web 服务调用的流对象中，它看起来像这样：

```
{
    "Contact Information Service": {
        "response": {
            "phone_numbers": [

]
        }
    }
} 
```

这会导致 ParseJSONValue 返回一个 nil 值。

但是，如果我在我的测试 txt 文件中将空的 phone_numbers 数组更改为此：

```
{
    "Contact Information Service": {
        "response": {
            "phone_numbers": []
        }
    }
} 
```

它工作正常（即返回一个 TJSONObject）。不同之处在于空数组中的空格。由于某种原因，空数组中带有空格的第一个 JSON 响应会导致 ParseJSONValue 返回 nil。它工作正常，方括号之间没有空格。

我的 JSON 解析做错了什么？在调用 ParseJSONValue 之前我需要做某种预解析吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T01:51:03.390

这个问题不排除 Delphi JSON 实现 (DBXJSON)，我使用了一些具有相同限制的 JSON PHP 解析器。

现在，由于双引号字符串文字之外的所有空格都（并且必须）被 JSON 解析器忽略，因此您可以安全地删除这些空格，因此一种可能的解决方法是在解析之前缩小您的 Json 字符串***。***

试试这个示例，它使用正则表达式从字符串中删除多余的空格。

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.RegularExpressions,
  System.Classes,
  System.SysUtils,
  Data.DBXJSON;

const
JsonString=
'{'+
'    "Contact Information Service": {'+
'        "response": {'+
'            "phone_numbers": [        ]'+
'        }'+
'    }'+
'}';

function JsonMinify(const S: string): string;
begin
 Result:=TRegEx.Replace(S,'("(?:[^"\\]|\\.)*")|\s+', '$1');
end;

procedure TestJSon;
var
  s : string;
  SL : TStringStream;
  LJsonObj : TJSONObject;
begin
  SL := TStringStream.Create;
  try
    s:=JsonMinify(JsonString);
    SL.WriteString(s);
    LJsonObj := TJSONObject.ParseJSONValue(TEncoding.ASCII.GetBytes(SL.DataString), 0) as TJSONObject;
    Writeln(LJsonObj.Size);
  finally
    SL.Free;
  end;
end;

begin
 try
    TestJSon;
 except
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
 end;
 Writeln('Press Enter to exit');
 Readln;
end. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-29T00:05:25.010

看看`TJsonObject.ParseArray`。你会发现这个：

```
while ValueExpected or (Br.PeekByte <> Ord(']')) do
begin
  ConsumeWhitespaces(Br);
  Pos := ParseValue(Br, JsonArray);
  if Pos <= 0 then
    Exit(Pos); 
```

因此，在数组的顶部（在读取左括号后立即），如果下一个字符不是右括号，则吃掉空格，然后尝试读取有效的 JSON 值。右括号不是有效的 JSON 值，因此此时它会退出。

这似乎是有效的 JSON，（我可以让我的浏览器接受它作为一个有效的 JavaScript 对象），所以这应该被认为是 DBXJSON 库中的一个错误。您可能需要预先解析它，使用不同的 JSON 库（Delphi 有一些）或找到一种方法来确保发送给您的信息不包含此模式。

无论哪种方式，您都应该将此作为错误报告给 QC。

# python - Python 日期时间精度

> ID：12168983
> 
> 赞同：1
> 
> 时间：2012-08-28T23:31:03.937
> 
> 标签：python, google-app-engine

我有一个 Google App Engine 日期时间属性，我用`x.date = datetime.datetime.now()`. 我在日期之间做了很多比较，经过多次调试，结果发现我的客户端设备发送日期的精度低于 Python 日期，这造成了可怕的混乱。

这是 Python 生成的： `2012-08-28 21:36:13.158497`with `datetime.datetime.now()`，但我想要的是`2012-08-28 21:36:13.158000`（注意最后的三个零。）

我怎样才能做到这一点？（请记住，我*不是*要格式化字符串或任何东西。我想格式化一个日期对象。）

我想一种方法是将其格式化为具有所需精度的字符串，如下所示：

```
dateString = date.strftime('%Y-%m-%d %H:%M:%S.%f')[:-3] 
```

然后回到日期对象。但必须有更好的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T23:48:36.853

```
dt = dt.replace(microsecond = (dt.microsecond / 1000) * 1000) 
```

这将截断最后 3 位数字。正确的舍入稍微复杂一些，因为它可能会舍入到 1000000 微秒。

# joomla - Joomla SEO 通过规范删除 index.php？

> ID：12168988
> 
> 赞同：0
> 
> 时间：2012-08-28T23:32:06.677
> 
> 标签：joomla, seo

我通过 Google 网站管理员工具运行了我的 Joomla 1.5 网站，它告诉我我的网站有多个带有双标题标签的页面。这是一个例子：

```
http://www.example.com/section/page
http://www.example.com/index.php/section/page 
```

我正在使用 Joomla 1.5 中的默认 .htaccess 文件，我应该添加什么来防止 Google 看到这样的内容？也许是一个规范的标签，但最喜欢的是重写，对吧？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T12:36:56.077

要么会工作。

任何一个：

*   遵循正确逻辑的 htaccess 指令，从 index.php 到 clean 的 301 重定向，或者
*   放置在每个页面模板上的动态规范标签（通常在 Joomla 中这将修复它，因为将代码放置在一个模板上将（默认情况下）将其放置在 / 和 /index.php 页面上。

# javascript - 如何改变 价值观？

> ID：12168992
> 
> 赞同：3
> 
> 时间：2012-08-28T23:32:20.323
> 
> 标签：javascript, html, meter

我是 HTML 的初学者，在学习 HTML5 时，我发现了一个很酷的工具，`<meter>`. 但是，它不会更新；它作为静态值存在！

我的问题很简单：如何使用 a 的长度`<textarea>`来改变 的颜色`<meter>`，例如，当他达到 160 个字符（最大值）时，用户会看到红色？换句话说，对`<textarea>`字符进行计数，并将它们发送到仪表标签的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T23:40:13.563

请注意，并非所有浏览器都支持此标签。例如，在 IE10 之前 IE 不支持。[http://caniuse.com/#search=meter](http://caniuse.com/#search=meter)。

像这样的东西应该工作：

HTML

```
<textarea id="sometext"></textarea>
<meter value="10" min="0" max="160" id="somemeter">2 out of 160</meter>​ 
```

JS

```
(function() {
    var textarea = document.getElementById('sometext');
    var meter = document.getElementById('somemeter');

    var theLength = 0;

    textarea.addEventListener('keypress', function() {
        theLength = textarea.value.length;

        if (theLength > 160) {
            theLength = 160;
        }

        meter.value = theLength;
    });
})();​ 
```

演示：http: [//jsfiddle.net/RBUMQ/1/](http://jsfiddle.net/RBUmQ/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-28T23:37:47.857

如果你使用 jquery

`$("#meter_id").val($("my_text_area_id").val().length)`

至少我认为....反正是这样的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T00:04:21.750

您需要做的是编写一个函数来计算 textarea 中文本的长度并将meter 的值设置为该计数。

然后，您需要向 textarea 添加一个侦听器。无论是按键还是按键或您决定使用的任何内容。

当该事件发生时，触发您的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T16:20:54.893

我已经将两者结合起来（从他们那里得到启发），它起作用了:)，实时处理复制、过去和更新:)

javascript:

```
var meter = document.getElementById('shower');

function textCounter(field,maxlimit) {
field.value = field.value.substring(0, maxlimit);
var theLength = field.value.length;
meter.value = theLength;
} 
```

html

```
<textarea name="description" id="description" rows="3" cols="60" required title="vous  devez mettre une petite description" placeholder="escence, 2006, roulant 100000km, toutes  options, siege en cuir" onKeyDown="textCounter(document.formacha.description,160)" onKeyUp="textCounter(document.formacha.description, 160)"></textarea>
<meter name="shower" min="1" max="160" value="1"id="shower" low="30" high="140">afficher son etat</meter> 
```

# javascript - javascript onclick不适用于Android应用

> ID：12168993
> 
> 赞同：0
> 
> 时间：2012-08-28T23:32:28.553
> 
> 标签：javascript, android, eclipse, cordova

我正在尝试使用 eclipse 和 phonegap 开发一个 android 应用程序。该应用程序是使用 javascript 的基本照明计算器。我正在尝试使用 onclick 调用文档头部的 javascript 函数来计算结果。我相信问题可能出在 onclick=、onblur= 或 onfocus= 上。我的项目对时间很敏感，任何帮助将不胜感激。下面是我的代码，这里是一个显示代码工作的独立页面的链接。[http://www.everlastlight.com/energy_calc.html](http://www.everlastlight.com/energy_calc.html)

```
<!DOCTYPE html> 
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1"> 
<title>EverLast&reg; Lighting</title> 
<link rel="stylesheet"  href="../../css/themes/default/jquery.mobile-1.1.1.css" /> 
<link rel="stylesheet" href="../_assets/css/jqm-docs.css"/>
<!--<script src="../../js/calc.js"></script>-->
<script src="../../js/jquery.js"></script>
<script src="../../docs/_assets/js/jqm-docs.js"></script>
<script src="../../js/jquery.mobile-1.1.1.js"></script>
    <!--<script src="../../docs/_assets/js/calc1.js">-->
 </script>
<script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>

<script type="text/javascript">

function Calculate1()
{
            var no_fixtures1, hrs_yr1, cost_kwh1, watts1_1, watts2_1, invst1;
            var s_perfix$1, s_sitecost1_1, s_sitecost2_1, s_sav_yr1, s_recoup1, s_res1, s_res2_1;

                                            no_fixtures1 = document.basicecalc.no_fixtures1.value;
                                            hrs_yr1 = document.basicecalc.hrs_yr1.value;
                                            cost_kwh1 = document.basicecalc.cost_kwh1.value;
                                            watts1_1 = document.basicecalc.watts1_1.value;
                                            watts2_1 = document.basicecalc.watts2_1.value;
                                            invst1 = document.basicecalc.invst1.value;

                                            if ( watts1_1 == "" )
                                                            {alert("Please enter the wattage of the existing fixture");
                                                                            return;}

                                            //if ( watts2_1 == "" )
      //                  {alert("Please enter the wattage of the proposed fixture");
                                                                            //return;}
                                           else if ( no_fixtures1 == "" )
                            {alert("Please enter the number of fixtures at the site");
                            return;  }
         else{
                                                            s_perfix$1 = Math.round((watts1_1 - watts2_1)*(hrs_yr1)*(cost_kwh1)/10)/100;
                                                            s_sitecost1_1 = Math.round((watts1_1)*(hrs_yr1)*(no_fixtures1)*(cost_kwh1)/10)/100;
                                                            s_sitecost2_1 = Math.round((watts2_1)*(hrs_yr1)*(no_fixtures1)*(cost_kwh1)/10)/100;
                                                            s_sav_yr1 = Math.round((s_sitecost1_1-s_sitecost2_1)*100)/100;

                                                            s_res1 =(invst1/s_perfix$1)

                                                                            document.basicecalc.s_perfix$1.value   = "$"+ s_perfix$1;
                                                                            document.basicecalc.s_sitecost1_1.value = "$"+ s_sitecost1_1;
                                                                            document.basicecalc.s_sitecost2_1.value = "$"+ s_sitecost2_1;
                                                                            document.basicecalc.s_sav_yr1.value = "$"+ s_sav_yr1;

                                                                            if(invst1 !=="")
                                                                            {document.basicecalc.s_recoup1.value = Math.round(s_res1*12) + " months ("+ Math.round(s_res1*100)/100 + " yr.)";
                                                                            }

                                                            }

}

function MM_callJS(jsStr) { //v2.0
return eval(jsStr)
}

function MM_findObj(n, d) { //v3.0
var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document); return x;
}

function MM_validateForm() { //v3.0
var i,p,q,nm,test,num,min,max,errors='',args=MM_validateForm.arguments;
for (i=0; i<(args.length-2); i+=3) { test=args[i+2]; val=MM_findObj(args[i]);
if (val) { nm=val.name; if ((val=val.value)!="") {
  if (test.indexOf('isEmail')!=-1) { p=val.indexOf('@');
    if (p<1 || p==(val.length-1)) errors+='- '+nm+' must contain an e-mail address.\n';
  } else if (test!='R') { num = parseFloat(val);
    if (val!=''+num) errors+='Please use only numbers.';
    if (test.indexOf('inRange') != -1) { p=test.indexOf(':');
      min=test.substring(8,p); max=test.substring(p+1);
      if (num<min || max<num) errors+='- '+nm+' must contain a number between '+min+' and '+max+'.\n';
} } } else if (test.charAt(0) == 'R') errors += '- '+nm+' is required.\n'; }
} if (errors) alert(errors);
document.MM_returnValue = (errors == '');
}
</script>   
</head> 
<body> 
<div data-role="page" class="type-interior">

<div data-role="header" data-theme="f">
    <h1>EverLast&reg;</h1>
    <a href="../../" data-icon="home" data-iconpos="notext" data-direction="reverse">Home</a>
    <a href="../nav.html" data-icon="search" data-iconpos="notext" data-rel="dialog" data-transition="fade">Search</a>
</div><!-- /header -->

<div data-role="content">

    <div class="content-primary">

    <h2>Basic Energy Calculator</h2>

    <p>
<div style="padding-right:0px;">
<p>Calculate energy savings by relamping your lighting system.<br>Also calculate the return on investment of the new system.<br><br>Fill in all the fields and click "calculate".<br><b>Your results will display below.</b></p>
</div>
<!--/body head :: Head Type B Ended -->

<!-- main body -->

<form name="basicecalc">

<!-- table 1 (user inputs) -->
<div>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td colspan="3"><span class="orange">*</span> Required<br> </td>
</tr>

<tr>
<td><span class="orange">*</span> Quantity of fixtures:  </td>
<td> </td>
<td><input type="text" style="text-align:right" name="no_fixtures1" maxlength="6" size="6" value="1"></td>
</tr>

<tr>
<td><span class="orange">*</span> Average operating hours per year:  </td>
<td> </td>
<td><input type="text" style="text-align:right" name="hrs_yr1" maxlength="6" size="6" value="4500"></td>
</tr>

<tr>
<td><span class="orange">*</span> Cost per kilowatt hour:  </td>
<td>$</td>
<td><input type="text" style="text-align:right" name="cost_kwh1" maxlength="6" size="6" value="0.10"></td>
</tr>

<tr>
<td><span class="orange">*</span> Watts (per fixture) used in existing system:  </td>
<td> </td>
<td><input type="text" style="text-align:right" name="watts1_1" maxlength="6" size="6" onblur="MM_validateForm('watts1_1','','NisNum');return document.MM_returnValue"></td>
</tr>

<tr>
<td><span class="orange">*</span> Watts (per fixture) used in new system:  </td>
<td> </td>
<td><input type="text" style="text-align:right" name="watts2_1" maxlength="6" size="6"   onblur="MM_validateForm('watts2_1','','NisNum');return document.MM_returnValue"></td>
</tr>

<tr>
<td><span class="orange">*</span>Cost to upgrade each fixture:  </td>
<td>$</td>
<td><input type="text" style="text-align:right" name="invst1" maxlength="6" size="6" onblur="MM_validateForm('invst1','','NisNum');return document.MM_returnValue"></td>
</tr>

<tr>
<td colspan="2"> </td>
<td align="right"> <input name="calcbtn" type="button" class="calcbtn" title="Calculate" value="Calculate" onclick="Calculate1()">
</td>
</tr>

</table>
<a href="javascript:MM_callJS('Calculate1()');" data-role="button">Calculate</a>
</div>
<!-- / table 1 (user inputs) -->
<hr>
<br>
<div class="resultsLabel">Results</div>

<!-- table 2 (results) -->
<div class="resultsBlock">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td valign="top">
<br>
<div><b>Cost of Electricity:</b></div>
    <!-- table 2a -->
    <div>

    <table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
    <td>Current system:  </td>
    <td align="right"><input type="text" style="text-align:right" class="result" name="s_sitecost1_1" maxlength="8" readOnly onfocus="this.blur()" size="8">           </td>
    <td>&nbsp;/yr.</td>
    </tr>
    <tr>
    <td>Proposed system:</td>

    <td align="right"><input type="text" style="text-align:right" class="result" name="s_sitecost2_1" maxlength="8" readOnly onfocus="this.blur()" size="8" onblur="MM_validateForm('s_sitecost2_1','','NisNum');return document.MM_returnValue"></td>
    <td>&nbsp;/yr.</td>
    </tr>
    </table>
    </div>
    <!-- / table 2a -->
</td>
</tr>
<tr>
<div><b>Energy Savings (with proposed system)</b></div>

    <!-- table 2b -->
    <div>
    <table border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
    <td>Each fixture:</td>
    <td align="right"><input type="text" style="text-align:right" class="result" name="s_perfix$1" maxlength="8" readOnly onfocus="this.blur()" size="8">      </td>
    <td>&nbsp;/yr.</td>
    </tr>

    <tr>
    <td>Total:</td>
    <td align="right"><input type="text" style="text-align:right" class="result" name="s_sav_yr1" maxlength="10" readOnly onfocus="this.blur()" size="8">   </td>
    <td>&nbsp;/yr.</td>
    </tr>
    </table>
    </div>
    <div style="margin-top:12px;">* This cost should include the lamp, ballast, and labor required to replace the fixture. You may want to subtract any costs that would have been incurred with the current system.</div>
</tr>

</table>        

    </p>

    </div><!--/content-primary -->      

    <div class="content-secondary">

        <div data-role="collapsible" data-collapsed="true" data-theme="b" data-content-theme="d">

                <h3>More in this section</h3>

                <ul data-role="listview"  data-theme="c" data-dividertheme="f">
            <li data-role="list-divider">Overview</li>
            <li><a href="watts.html">Watts Per Sq. Ft.</a></li>
            <li><a href="lightinglayout.html">Lighting Layout</a></li>
            <li><a href="fixreplace.html">Fixture Replacement</a></li>
            <li><a href="dimming.html">Dimming Watts</a></li>
            <li><a href="costwait.html">Cost of Waiting</a></li>
            <li><a href="samplelife.html">Simple Life Cycle</a></li>

                </ul>
        </div>
    </div>      

</div><!-- /content -->

<div data-role="footer" class="footer-docs" data-theme="c" align="center">
        <p>&copy; 2012 EverLast&reg;. All Rights Reserved.</p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T08:15:36.880

此 java 脚本调用可能与 phonegap jquery 移动 android 应用程序有问题。你正在做一个纯 html javascript 调用。

在 phonegap-jquery mobile 中，在加载任何脚本之前，您必须在 phonegap 方法中检查 deviceready。

只需通过以下示例，

包含所有库（jquery mobile js、css 和 phonegap js）后，打开一个脚本并添加以下代码，

```
<script type="text/javascript" charset="utf-8">
     function onLoad(){

          document.addEventListener("deviceready", onDeviceReady, true);

     }
function onDeviceReady(){
/*use selectors to trigger a event*/
/*here you can call the javascript events with jquery live method*/
}
      </script> 
```

这种格式可以帮助你

# javascript - 是否有插件可以从特定页面/帖子中排除一些 JavaScript

> ID：12168994
> 
> 赞同：0
> 
> 时间：2012-08-28T23:32:29.830
> 
> 标签：javascript, wordpress

在[heptasarim.com](http://www.heptasarim.com)中，每个页面和帖子都有几个 JavaScript 文件和插件加载。自然，这种情况会影响页面和帖子的加载速度。我想从特定帖子或页面的标题中排除一些无用的 js 和 css 文件。

是否有一个可以正常工作的插件，或者我必须编写一些代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T23:47:01.813

您不需要插件，只需将它们包装在 php 条件语句中即可。

[http://codex.wordpress.org/Conditional_Tags](http://codex.wordpress.org/Conditional_Tags)

这样做您可以将文件和脚本设置为仅出现在某些页面、帖子、类别、标签等上

# mysql - 没有交易的生活（MyISAM）

> ID：12168998
> 
> 赞同：9
> 
> 时间：2012-08-28T23:33:10.850
> 
> 标签：mysql, transactions, innodb, myisam, vds

我的站点在 VDS 服务器上运行。我刚刚发现我的 MySQL 服务器不支持 InnoDB 引擎，因此我不能在我的应用程序中使用数据库事务。

这让我想到，有些人可能永远不会使用交易。是这样吗？如果是这样，如何在 MyISAM 中协调不同表上的相关操作？

否则，有没有办法在 VDS 上运行的 MySQL 服务器上安装 InnoDB？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-28T23:44:20.973

如果您需要交易，那么您需要交易，而 MyISAM 不会减少芥末。

一些应用程序不需要事务。例如; 一个应用程序，一次从不运行多个相关的 SQL 语句，并且不需要回滚多个 SQL 语句。另一个示例是使用 MySQL 作为简单键值存储的应用程序。有许多用例不需要数据库级事务支持。

如果不了解有关您的 VDS 的更多详细信息，很难回答您问题的第二部分。谁是您的托管服务提供商？您是否具有更改 my.cnf 的 shell 访问权限和权限？如果没有，那么您可能无法启用 InnoDB。如果你这样做了，那么这里是另一个 SO 答案，详细说明了如何在 MySQL 上启用 InnoDB：[How to enable INNODB in mysql](https://stackoverflow.com/questions/4757589/how-to-enable-innodb-in-mysql)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-28T23:50:31.627

您通常可以启用引擎，手动安装 InnoDB 组件，或者简单地重新安装默认包含该引擎的 MySQL 版本。MyISAM 是疯狂的数据库，速度非常快，但如果您的系统没有正确关闭，它也很不可靠并且容易被完全破坏。

在 MyISAM 上运行关键任务应用程序是一个非常糟糕的主意。如果出于性能原因需要 MyISAM 表，它们应该始终是一次性的，可以从另一个更可靠的数据源轻松地重新构建。