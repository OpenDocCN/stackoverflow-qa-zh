# StackOverflow 问答 10346000-10346999

# google-maps - 当关联的标记被隐藏时，如何清理信息窗口？

> ID：10346001
> 
> 赞同：3
> 
> 时间：2012-04-27T06:45:29.160
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我知道我们中的许多人都在编写代码以`InfoWindow`在单击标记时打开一个。但是在单击`InfoWindow`右上角的**X**之前， 将保持原位，这意味着将关联的`Marker`可见性设置为`false`将创建本质上是孤立的`InfoWindow`. 地图上可能同时`InfoWindow`显示多个实例。我想用户只需单击`InfoWindow`关闭就足够简单了，但感觉就像隐藏`Marker`应该隐藏关联的`InfoWindow`.

我已经开始编写如下代码来处理这种情况：

```
google.maps.event.addListener( marker, "click", function() {
    var bubble = new google.maps.InfoWindow({
        content: buildBubbleContent( param1, param2 )
    });
    bubble.open( map, marker );
    //pretty standard stuff to here, but the next line is new (for me):
    google.maps.event.addListenerOnce( marker, "visible_changed", function() {
        bubble.close();
    });
}); 
```

这是其他人都在做的事情吗？感觉就像一种应该称为*ListenBack*的设计模式。我从未见过 Google Maps 文档中解决的问题。我不禁认为，必须有一个更简单的机制`InfoWindow`来自动处理这个问题。有没有我刚刚错过的标准方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T10:47:15.130

对于单个 infoWindow，我总是在地图初始化期间将其创建为全局。我的点击事件开始于：

```
if(infoWindow != null){
   infoWindow.close();
}
infoWindow.setPosition(mouseEvent.latLng);
infoWindow.setContent("....");
// etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:58:13.540

我将此问题标记为已回答，因为我继续搜索文档并查看许多代码示例，但没有找到任何其他解决方案。当相关标记关闭时，信息窗口当然没有提供自动将其从地图中删除的功能。如果以后有人找到更好的选择，我很乐意将他们的解决方案标记为更好的答案。

# java - 将 wsdl 导入 Eclipse 时出错

> ID：10346006
> 
> 赞同：0
> 
> 时间：2012-04-27T06:45:56.543
> 
> 标签：java, eclipse, soap, wsdl, webservice-client

我有 eclipse Galileo，我正在尝试创建 Web 服务客户端。但我得到 IOException。你能帮我创建服务客户端吗？

wsdl： http://122.166.101.139: [37489 /_vti_bin/cmis/soap/NavigationService.svc?wsdl](http://122.166.101.139:37489/_vti_bin/cmis/soap/NavigationService.svc?wsdl)

错误 ：

```
IWAB0399E Error in generating Java from WSDL:  java.io.IOException: Element {http://docs.oasis-open.org/ns/cmis/messaging/200908/}getCheckedOutDocs is referenced but not defined.
java.io.IOException: Element {http://docs.oasis-open.org/ns/cmis/messaging/200908/}getCheckedOutDocs is referenced but not defined.
at org.apache.axis.wsdl.symbolTable.SymbolTable.checkForUndefined(SymbolTable.java:670)
at org.apache.axis.wsdl.symbolTable.SymbolTable.add(SymbolTable.java:545)
at org.apache.axis.wsdl.symbolTable.SymbolTable.populate(SymbolTable.java:518)
at org.apache.axis.wsdl.symbolTable.SymbolTable.populate(SymbolTable.java:495)
at org.apache.axis.wsdl.gen.Parser$WSDLRunnable.run(Parser.java:361)
at java.lang.Thread.run(Unknown Source) 
```

WSDL 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<wsdl:definitions name="NavigationService"
targetNamespace="http://tempuri.org/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/"
xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex"
xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/"
xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd"
xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy"
xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract"
xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing"
xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl"
xmlns:tns="http://tempuri.org/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/">
<wsp:Policy wsu:Id="BasicHttpBinding_INavigationServicePort_policy">
    <wsp:ExactlyOne>
        <wsp:All>
            <wsoma:OptimizedMimeSerialization
                xmlns:wsoma="http://schemas.xmlsoap.org/ws/2004/09/policy/optimizedmimeserialization" />
            <http:BasicAuthentication
                xmlns:http="http://schemas.microsoft.com/ws/06/2004/policy/http" />
        </wsp:All>
    </wsp:ExactlyOne>
</wsp:Policy>
<wsp:Policy wsu:Id="BasicHttpBinding_INavigationServicePort1_policy">
    <wsp:ExactlyOne>
        <wsp:All>
            <wsoma:OptimizedMimeSerialization
                xmlns:wsoma="http://schemas.xmlsoap.org/ws/2004/09/policy/optimizedmimeserialization" />
            <http:BasicAuthentication
                xmlns:http="http://schemas.microsoft.com/ws/06/2004/policy/http" />
        </wsp:All>
    </wsp:ExactlyOne>
</wsp:Policy>
<wsp:Policy wsu:Id="BasicHttpBinding_INavigationServicePort2_policy">
    <wsp:ExactlyOne>
        <wsp:All>
            <wsoma:OptimizedMimeSerialization
                xmlns:wsoma="http://schemas.xmlsoap.org/ws/2004/09/policy/optimizedmimeserialization" />
            <http:BasicAuthentication
                xmlns:http="http://schemas.microsoft.com/ws/06/2004/policy/http" />
        </wsp:All>
    </wsp:ExactlyOne>
</wsp:Policy>
<wsp:Policy wsu:Id="BasicHttpBinding_INavigationServicePort3_policy">
    <wsp:ExactlyOne>
        <wsp:All>
            <wsoma:OptimizedMimeSerialization
                xmlns:wsoma="http://schemas.xmlsoap.org/ws/2004/09/policy/optimizedmimeserialization" />
            <http:BasicAuthentication
                xmlns:http="http://schemas.microsoft.com/ws/06/2004/policy/http" />
        </wsp:All>
    </wsp:ExactlyOne>
</wsp:Policy>
<wsdl:types>
    <xsd:schema targetNamespace="http://tempuri.org/Imports">
        <xsd:import
            schemaLocation="RepositoryService.xsd"
            namespace="http://docs.oasis-open.org/ns/cmis/messaging/200908/" />
        <xsd:import
            schemaLocation="RepositoryService1.xsd"
            namespace="http://docs.oasis-open.org/ns/cmis/core/200908/" />
    </xsd:schema>
</wsdl:types>
<wsdl:message name="getDescendantsRequest">
    <wsdl:part name="parameters" element="q1:getDescendants"
        xmlns:q1="http://docs.oasis-open.org/ns/cmis/messaging/200908/" />
</wsdl:message>
<wsdl:message name="getDescendantsResponse">
    <wsdl:part name="parameters" element="q2:getDescendantsResponse"
        xmlns:q2="http://docs.oasis-open.org/ns/cmis/messaging/200908/" />
</wsdl:message>
<wsdl:message name="getChildrenRequest">
    <wsdl:part name="parameters" element="q3:getChildren"
        xmlns:q3="http://docs.oasis-open.org/ns/cmis/messaging/200908/" />
</wsdl:message>
<wsdl:message name="getChildrenResponse">
    <wsdl:part name="parameters" element="q4:getChildrenResponse"
        xmlns:q4="http://docs.oasis-open.org/ns/cmis/messaging/200908/" />
</wsdl:message>
<wsdl:message name="getFolderParentRequest">
    <wsdl:part name="parameters" element="q5:getFolderParent"
        xmlns:q5="http://docs.oasis-open.org/ns/cmis/messaging/200908/" />
</wsdl:message>
<wsdl:message name="getFolderParentResponse">
    <wsdl:part name="parameters" element="q6:getFolderParentResponse"
        xmlns:q6="http://docs.oasis-open.org/ns/cmis/messaging/200908/" />
</wsdl:message>
<wsdl:message name="getFolderTreeRequest">
    <wsdl:part name="parameters" element="q7:getFolderTree"
        xmlns:q7="http://docs.oasis-open.org/ns/cmis/messaging/200908/" />
</wsdl:message>
<wsdl:message name="getFolderTreeResponse">
    <wsdl:part name="parameters" element="q8:getFolderTreeResponse"
        xmlns:q8="http://docs.oasis-open.org/ns/cmis/messaging/200908/" />
</wsdl:message>
<wsdl:message name="getObjectParentsRequest">
    <wsdl:part name="parameters" element="q9:getObjectParents"
        xmlns:q9="http://docs.oasis-open.org/ns/cmis/messaging/200908/" />
</wsdl:message>
<wsdl:message name="getObjectParentsResponse">
    <wsdl:part name="parameters" element="q10:getObjectParentsResponse"
        xmlns:q10="http://docs.oasis-open.org/ns/cmis/messaging/200908/" />
</wsdl:message>
<wsdl:message name="getCheckedOutDocsRequest">
    <wsdl:part name="parameters" element="q11:getCheckedOutDocs"
        xmlns:q11="http://docs.oasis-open.org/ns/cmis/messaging/200908/" />
</wsdl:message>
<wsdl:message name="getCheckedOutDocsResponse">
    <wsdl:part name="parameters" element="q12:getCheckedOutDocsResponse"
        xmlns:q12="http://docs.oasis-open.org/ns/cmis/messaging/200908/" />
</wsdl:message>
<wsdl:portType name="INavigationServicePort">
    <wsdl:operation name="getDescendants">
        <wsdl:input
            wsaw:Action="http://tempuri.org/INavigationServicePort/getDescendants"
            name="getDescendantsRequest" message="tns:getDescendantsRequest" />
        <wsdl:output
            wsaw:Action="http://tempuri.org/INavigationServicePort/getDescendantsResponse"
            name="getDescendantsResponse" message="tns:getDescendantsResponse" />
    </wsdl:operation>
    <wsdl:operation name="getChildren">
        <wsdl:input wsaw:Action="http://tempuri.org/INavigationServicePort/getChildren"
            name="getChildrenRequest" message="tns:getChildrenRequest" />
        <wsdl:output
            wsaw:Action="http://tempuri.org/INavigationServicePort/getChildrenResponse"
            name="getChildrenResponse" message="tns:getChildrenResponse" />
    </wsdl:operation>
    <wsdl:operation name="getFolderParent">
        <wsdl:input
            wsaw:Action="http://tempuri.org/INavigationServicePort/getFolderParent"
            name="getFolderParentRequest" message="tns:getFolderParentRequest" />
        <wsdl:output
            wsaw:Action="http://tempuri.org/INavigationServicePort/getFolderParentResponse"
            name="getFolderParentResponse" message="tns:getFolderParentResponse" />
    </wsdl:operation>
    <wsdl:operation name="getFolderTree">
        <wsdl:input wsaw:Action="http://tempuri.org/INavigationServicePort/getFolderTree"
            name="getFolderTreeRequest" message="tns:getFolderTreeRequest" />
        <wsdl:output
            wsaw:Action="http://tempuri.org/INavigationServicePort/getFolderTreeResponse"
            name="getFolderTreeResponse" message="tns:getFolderTreeResponse" />
    </wsdl:operation>
    <wsdl:operation name="getObjectParents">
        <wsdl:input
            wsaw:Action="http://tempuri.org/INavigationServicePort/getObjectParents"
            name="getObjectParentsRequest" message="tns:getObjectParentsRequest" />
        <wsdl:output
            wsaw:Action="http://tempuri.org/INavigationServicePort/getObjectParentsResponse"
            name="getObjectParentsResponse" message="tns:getObjectParentsResponse" />
    </wsdl:operation>
    <wsdl:operation name="getCheckedOutDocs">
        <wsdl:input
            wsaw:Action="http://tempuri.org/INavigationServicePort/getCheckedOutDocs"
            name="getCheckedOutDocsRequest" message="tns:getCheckedOutDocsRequest" />
        <wsdl:output
            wsaw:Action="http://tempuri.org/INavigationServicePort/getCheckedOutDocsResponse"
            name="getCheckedOutDocsResponse" message="tns:getCheckedOutDocsResponse" />
    </wsdl:operation>
</wsdl:portType>
<wsdl:binding name="BasicHttpBinding_INavigationServicePort"
    type="tns:INavigationServicePort">
    <wsp:PolicyReference URI="#BasicHttpBinding_INavigationServicePort_policy" />
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="getDescendants">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getDescendants"
            style="document" />
        <wsdl:input name="getDescendantsRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getDescendantsResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getChildren">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getChildren"
            style="document" />
        <wsdl:input name="getChildrenRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getChildrenResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getFolderParent">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getFolderParent"
            style="document" />
        <wsdl:input name="getFolderParentRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getFolderParentResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getFolderTree">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getFolderTree"
            style="document" />
        <wsdl:input name="getFolderTreeRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getFolderTreeResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getObjectParents">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getObjectParents"
            style="document" />
        <wsdl:input name="getObjectParentsRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getObjectParentsResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getCheckedOutDocs">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getCheckedOutDocs"
            style="document" />
        <wsdl:input name="getCheckedOutDocsRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getCheckedOutDocsResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>
<wsdl:binding name="BasicHttpBinding_INavigationServicePort1"
    type="tns:INavigationServicePort">
    <wsp:PolicyReference
        URI="#BasicHttpBinding_INavigationServicePort1_policy" />
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="getDescendants">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getDescendants"
            style="document" />
        <wsdl:input name="getDescendantsRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getDescendantsResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getChildren">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getChildren"
            style="document" />
        <wsdl:input name="getChildrenRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getChildrenResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getFolderParent">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getFolderParent"
            style="document" />
        <wsdl:input name="getFolderParentRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getFolderParentResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getFolderTree">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getFolderTree"
            style="document" />
        <wsdl:input name="getFolderTreeRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getFolderTreeResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getObjectParents">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getObjectParents"
            style="document" />
        <wsdl:input name="getObjectParentsRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getObjectParentsResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getCheckedOutDocs">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getCheckedOutDocs"
            style="document" />
        <wsdl:input name="getCheckedOutDocsRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getCheckedOutDocsResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>
<wsdl:binding name="BasicHttpBinding_INavigationServicePort2"
    type="tns:INavigationServicePort">
    <wsp:PolicyReference
        URI="#BasicHttpBinding_INavigationServicePort2_policy" />
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="getDescendants">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getDescendants"
            style="document" />
        <wsdl:input name="getDescendantsRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getDescendantsResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getChildren">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getChildren"
            style="document" />
        <wsdl:input name="getChildrenRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getChildrenResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getFolderParent">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getFolderParent"
            style="document" />
        <wsdl:input name="getFolderParentRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getFolderParentResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getFolderTree">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getFolderTree"
            style="document" />
        <wsdl:input name="getFolderTreeRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getFolderTreeResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getObjectParents">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getObjectParents"
            style="document" />
        <wsdl:input name="getObjectParentsRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getObjectParentsResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getCheckedOutDocs">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getCheckedOutDocs"
            style="document" />
        <wsdl:input name="getCheckedOutDocsRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getCheckedOutDocsResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>
<wsdl:binding name="BasicHttpBinding_INavigationServicePort3"
    type="tns:INavigationServicePort">
    <wsp:PolicyReference
        URI="#BasicHttpBinding_INavigationServicePort3_policy" />
    <soap:binding transport="http://schemas.xmlsoap.org/soap/http" />
    <wsdl:operation name="getDescendants">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getDescendants"
            style="document" />
        <wsdl:input name="getDescendantsRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getDescendantsResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getChildren">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getChildren"
            style="document" />
        <wsdl:input name="getChildrenRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getChildrenResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getFolderParent">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getFolderParent"
            style="document" />
        <wsdl:input name="getFolderParentRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getFolderParentResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getFolderTree">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getFolderTree"
            style="document" />
        <wsdl:input name="getFolderTreeRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getFolderTreeResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getObjectParents">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getObjectParents"
            style="document" />
        <wsdl:input name="getObjectParentsRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getObjectParentsResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
    <wsdl:operation name="getCheckedOutDocs">
        <soap:operation
            soapAction="http://tempuri.org/INavigationServicePort/getCheckedOutDocs"
            style="document" />
        <wsdl:input name="getCheckedOutDocsRequest">
            <soap:body use="literal" />
        </wsdl:input>
        <wsdl:output name="getCheckedOutDocsResponse">
            <soap:body use="literal" />
        </wsdl:output>
    </wsdl:operation>
</wsdl:binding>
<wsdl:service name="NavigationService">
    <wsdl:port name="BasicHttpBinding_INavigationServicePort"
        binding="tns:BasicHttpBinding_INavigationServicePort">
        <soap:address
            location="http://winserver2008:37489/_vti_bin/cmis/soap/NavigationService.svc/ntlm" />
    </wsdl:port>
    <wsdl:port name="BasicHttpBinding_INavigationServicePort1"
        binding="tns:BasicHttpBinding_INavigationServicePort">
        <soap:address
            location="http://winserver2008:37489/_vti_bin/cmis/soap/NavigationService.svc/anonymous" />
    </wsdl:port>
    <wsdl:port name="BasicHttpBinding_INavigationServicePort2"
        binding="tns:BasicHttpBinding_INavigationServicePort1">
        <soap:address
            location="http://winserver2008:37489/_vti_bin/cmis/soap/NavigationService.svc/basic" />
    </wsdl:port>
    <wsdl:port name="BasicHttpBinding_INavigationServicePort3"
        binding="tns:BasicHttpBinding_INavigationServicePort2">
        <soap:address
            location="http://winserver2008:37489/_vti_bin/cmis/soap/NavigationService.svc/digest" />
    </wsdl:port>
    <wsdl:port name="BasicHttpBinding_INavigationServicePort4"
        binding="tns:BasicHttpBinding_INavigationServicePort3">
        <soap:address
            location="http://winserver2008:37489/_vti_bin/cmis/soap/NavigationService.svc/kerberos" />
    </wsdl:port>
</wsdl:service>
</wsdl:definitions> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T12:20:19.860

生成客户端时是否导入了所有相关的 XSD [RepositoryService.xsd,RepositoryServicd1.xsd] 文件。请确保将 XSD 文件放在 WSDL 文件所在的同一文件夹中。

# asp.net - 无法使用 z 顺序以将一张图片显示在另一张图片之上

> ID：10346010
> 
> 赞同：0
> 
> 时间：2012-04-27T06:46:05.597
> 
> 标签：asp.net, css, css-position

我正在尝试做我认为将是地球上最简单的事情。我有一些带有图形元素的 png 框，它假设覆盖了我打算在这个框内显示的图像的一部分（这是一个产品框，图形元素应该模拟价格标签）。

所以我需要这个盒子，我想用asp:ImageButton在它下面显示图像。

我已经为此苦苦挣扎了几个小时，试图放置 div 和图像等。用 z-order 尝试了各种事情，但没有成功，产品图像仍然显示在图形框上方。不过，考虑到它一直运行良好的价格。

我认为这应该工作：

```
<div id="HPItemBox">
        <div id="HPItemPriceBox">
            <asp:Label ID="lblPrice" runat="server" CssClass="HPItemPrice"></asp:Label>
        </div>
    <div id="imgBox" runat="server" class="HPimgBox">
        <asp:Image ID="ibImage" runat="server" Width="140" Height="140" style="position: relative; z-index: 10;" />
        <div id="HPItemLink">
            <asp:LinkButton ID="lbToBuy" runat="server" CssClass="ItemURLStyle" OnClientClick="aspnetForm.target ='_blank';">Buy it</asp:LinkButton>
        </div>
    </div>
</div> 
```

也试过：

```
<div id="HPItemBox">
    <div id="HPItemPriceBox">
        <asp:Label ID="lblPrice" runat="server" CssClass="HPItemPrice"></asp:Label>
    </div>
    <div id="imgBox" runat="server" class="HPimgBox">
        <div id="divImage" runat="server" style="position: relative; width: 140px; height: 140px;
            z-index: 10;">
        </div>
        <div id="HPItemLink">
            <asp:LinkButton ID="lbToBuy" runat="server" CssClass="ItemURLStyle" OnClientClick="aspnetForm.target ='_blank';">Buy it</asp:LinkButton>
        </div>
    </div>
</div> 
```

有css：

```
#HPItemBox
{
    position: relative;
    width: 190px;
    height: 190px;
    background-image: url('../images/home-product-box.png');
    background-repeat: no-repeat;
    background-color: #ffffff;
    float: left;
    z-index: 50;
}

.HPItemPrice
{
    font-family: Arial;
    font-size: 12px;
    font-weight: bold;
    color: #4d4d4d;
}

.HPimgBox
{
    position: relative;
    top: -10px;
    right: 20px;
    width: 170px;
    z-index: 10;
} 
```

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:37:54.260

嘿，我认为您的代码有些错误，请根据您的要求管理您的代码，并对您的 css 文件进行一些更改，如下所示

**HTML**

```
<div id="HPItemBox">
    <div id="HPItemPriceBox">
        <asp:Label ID="lblPrice" runat="server" CssClass="HPItemPrice"></asp:Label>
    </div>
    <div id="imgBox" runat="server" class="HPimgBox">
        <div id="divImage" runat="server" style="position: relative; width: 140px; height: 140px;background:green;
            z-index: 10;">

                Hello

                <div id="HPItemLink">
            <asp:LinkButton ID="lbToBuy" runat="server" CssClass="ItemURLStyle" OnClientClick="aspnetForm.target ='_blank';">Buy it</asp:LinkButton>
        </div>

        </div>

    </div>
</div> 
```

**CSS**

```
#HPItemBox
{
    position: relative;
    width: 190px;
    height: 190px;
    background-image: url('../images/home-product-box.png');
    background-repeat: no-repeat;
    background-color:red;
    float: left;
    z-index: 50;
}

.HPItemPrice
{
    font-family: Arial;
    font-size: 12px;
    font-weight: bold;
    color: #4d4d4d;
     position: relative;
}

#HPItemLink
{
    position: absolute;
    bottom: 10px;
    left: 10px;

    z-index: 10;
    border:solid 2px yellow;
} 
```

现场演示在这里查看[http://jsfiddle.net/8yg49/1/](http://jsfiddle.net/8yg49/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T10:34:39.247

我想出了一个有点歪曲的想法，但我的时间很短，所以如果它现在有效，我没问题。

我会勾勒出这个想法。基本上，我认为 imagebutton 获得最高的 z 顺序，所以没有必要将它放在任何 div 之上，希望它会驻留在它后面。所以我的解决方案是取出图像按钮并使用一些 div 放置图像，然后在上方放置一个完全透明的图像按钮。

它是这样的：

```
<div id="HPItemBox"> 
        <div id="HPItemPriceBox"> 
            <asp:Label ID="lblPrice" runat="server" CssClass="HPItemPrice"></asp:Label> 
        </div> 
    <div id="imgBox" runat="server" class="HPimgBox"> 
        <div id="HPItemLink"> 
            <asp:LinkButton ID="lbToBuy" runat="server" CssClass="ItemURLStyle" OnClientClick="aspnetForm.target ='_blank';" ImageURL="FULLY_TRANSPARENT_RECTANGLE!!!">Buy it</asp:LinkButton> 
        </div> 
    </div> 
</div>
<div id="THE ACTUAL IMAGE!!!"> .... in this DIV I put the image using image control (NOT imagebutton!) and then relatively place it under HPItemBox div </div> 
```

这样，实际图像显示在框架 div 下，按钮实际上是一个矩形透明图像，因此我想要显示的图像显示为按钮（但没有“点击”影响。

# android - 如何在对话框中处理后退按钮？

> ID：10346011
> 
> 赞同：105
> 
> 时间：2012-04-27T06:46:08.497
> 
> 标签：android, button, dialog, back

我正在开发一个应用程序，当按下按钮时，它会打开一个带有确定和取消按钮的对话框。

它工作正常。

当用户按下后退按钮时，我将按如下方式处理

```
public boolean onKeyDown(int keyCode, KeyEvent event) 
{
    if ((keyCode == KeyEvent.KEYCODE_BACK)) 
    {

    }
 return super.onKeyDown(keyCode, event);
} 
```

但是上面的方法没有被调用。我该如何处理？

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2013-02-01T13:08:37.387

```
dialog.setOnKeyListener(new Dialog.OnKeyListener() {

            @Override
            public boolean onKey(DialogInterface arg0, int keyCode,
                    KeyEvent event) {
                // TODO Auto-generated method stub
                if (keyCode == KeyEvent.KEYCODE_BACK) {
                    finish();
                    dialog.dismiss();
                }
                return true;
            }
        }); 
```

* * *

## 回答 #2

> 赞同：119
> 
> 时间：2012-04-27T07:22:11.080

听起来您想在创建对话框时设置 OnCancelListener。它看起来像这样：

```
dialog.setOnCancelListener(new DialogInterface.OnCancelListener() {         
    @Override
    public void onCancel(DialogInterface dialog) {
        //do whatever you want the back key to do
    }
}); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2012-04-27T07:20:45.170

您需要覆盖`OnCancel`方法。此方法在后退键按下时调用。这是对我来说完美的代码。

```
 AlertDialog alertDialog;

    alertDialog.setOnCancelListener(new OnCancelListener() 
    {                   
           @Override
            public void onCancel(DialogInterface dialog) 
             {
               // TODO Auto-generated method stub

                    dialog.dismiss();                           

            }
}); 
```

希望对您有所帮助，如果对您有帮助，请采纳。

谢谢..

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-04-27T06:50:10.177

尝试这个

```
 new AlertDialog.Builder(this).setOnKeyListener(new DialogInterface.OnKeyListener() {

                        @Override
                        public boolean onKey(DialogInterface dialog, int keyCode, KeyEvent event) {

                            if(keyCode == KeyEvent.KEYCODE_BACK){
                                Logger.d(TAG, "--------- Do Something -----------");
                                return true;
                            }
                            return false;

                        }
                    }) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-05-25T16:13:41.397

如果您使用的是 DialogFragment，据我所知[，正确的做法是覆盖 onCancel()](https://stackoverflow.com/a/18269965/1866373)

我注意到`setOnCancelListener`它不起作用`setOnKeyListener`，但对我来说有一个有趣的副作用，如果你的对话框有一个编辑文本，它会吞下所有的键。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-27T06:50:38.777

这是因为当您的对话框打开时，您的窗口会将其焦点导航到对话框。所以现在你必须处理`key`你的对话框。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-21T16:51:39.130

在您自己的对话框中覆盖方法`onBackPressed()`并在您的代码中使用它：

```
public class MyDialog extends Dialog {

    public MyDialog(@NonNull Context context) {
        super(context);
    }

    @Override
    public void onBackPressed() {
        // Do what you want
    }
} 
```

利用：

```
MyDialog dlg = new MyDialog(context);
dlg.show(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-12T11:22:30.187

**对于科特林：**

我试过这个，这对我来说很好。

```
dialog.setOnKeyListener { _, keyCode, _ ->
        if (keyCode == KeyEvent.KEYCODE_BACK) {
            //do to task here
        }
        true
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-15T11:24:41.740

此代码有效：

```
 Dialog dlg = new Dialog(thisAct, R.style.DialogTheme);
    dlg.setContentView(view);
    dlg.setCancelable(false);
    dlg.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD_DIALOG);
    dlg.setOnKeyListener((arg0, keyCode, event) -> {
        Timber.d("onKey(%d)", keyCode);
        //{home intercepting
        if ((keyCode == KeyEvent.KEYCODE_HOME)) {
            Timber.i("HOME pressed");
            return true;
        }

        return true;
    });
    dlg.show(); 
```

# json - 使用 JSon 在 MVC3 的自动完成文本框中传递 locationID 和位置名称

> ID：10346012
> 
> 赞同：0
> 
> 时间：2012-04-27T06:46:09.457
> 
> 标签：json, asp.net-mvc-3, jquery, autocomplete

我有国家，州的主人......我为位置制作了自动完成文本框。此自动完成功能会返回这些主人的所有地点名称（所有国家名称和州名称）。 **我传递给 jquery 的只是字符串形式的位置名称。我想将位置 ID 和位置名称都传递给 jquery，但只想在自动完成中显示位置名称。** 由于此自动完成功能用于存储用户的首选位置。 **我需要带有相应位置名称的 ID 来将用户预置位置信息存储在用户表中。**

请建议我该怎么做......一个演示会更有用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:38:04.910

我假设您正在使用 JqueryUI 进行自动完成。默认情况下，JqueryUI 的自动完成功能将与 json 对象一起工作——更具体地说，是一组具有以下属性的对象字面量：“标签”和“值”；

```
{ label:x, value:y } 
```

自动完成将使用“标签”属性来计算自动完成匹配，并且当用户选择时，将使用“值”属性作为选定项。此外，如果“value”属性被省略，“label”将用于比较和选择。

需要注意的重要一点是，您不仅限于这些属性。例如，您可以添加其他属性，例如 ..say .."location_id"。

```
{ label: "Some State and Country", location_id: 2 } 
```

使用自动完成事件“select”，您可以采取一些行动，即将选定的 location_id 存储到隐藏的输入中，以通过表单发布，甚至触发一个 whiz-bang ajax 调用。尝试这个：

```
...
<form>
Locations: <input id="location" />

<input type="hidden" id="location_id" />
<input type="submit">
</form>
...

<script>
  var mylocations = [
      {
        label: "North Carolina, USA",
        id: 123
      },
      {
        label: "North Dakota, USA",
        id: 128
      },
      {
        label: "Nevada, USA",
        id: 125
      },
      {
        label: "New York, USA",
        id: 311
      },
      {
        label: "New Brunswick, Canada",
        id: 267
      },
      {
        label: "Nova Scotia, Canada",
        id: 235
      },
      {
        label: "Newfoundlandand , Canada",
        id: 223
      }];

  $("#location").autocomplete({
    source: mylocations,
    select: function( event, ui ) {
      // store your location id somewhere like a hidden input ..you
      // can then allow the user to post the form (and selected id) back. 
      $( "#location_id" ).val( ui.item.id );
      return false;
    }
  });
</script> 
```

# php - “{$var1}someString”和“$var1someString”有什么区别？

> ID：10346027
> 
> 赞同：1
> 
> 时间：2012-04-27T06:47:42.000
> 
> 标签：php, variables

我可以区分

```
echo "{$var1}someString" // here the variable is $var1
echo "$var1someString"   // here the variable is $var1someString 
```

问题是为什么要使用`{}`？它仅适用于`{}`. 它不适用于`()`. 有什么特别之处`{ }`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T06:54:42.070

花括号`{}`以这种方式用于标识字符串中的变量：

```
echo "{$var1}someString" 
```

如果你看：

```
echo "$var1someString" 
```

PHP 不可能确定您想要 echo `$var1`，它会将所有这些都作为变量名。

您可以改为连接变量：

```
echo $var1 . "someString" 
```

它不能`()`仅仅因为 PHP 设计者选择`{}`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T06:57:31.287

根据[string](http://www.php.net/manual/en/language.types.string.php)的文档，卷曲部分称为复杂语法。它基本上允许您在字符串中使用复杂的表达式。

文档中的示例：

```
<?php
// Show all errors
error_reporting(E_ALL);

$great = 'fantastic';

// Won't work, outputs: This is { fantastic}
echo "This is { $great}";

// Works, outputs: This is fantastic
echo "This is {$great}";
echo "This is ${great}";

// Works
echo "This square is {$square->width}00 centimeters broad."; 

// Works, quoted keys only work using the curly brace syntax
echo "This works: {$arr['key']}";

// Works
echo "This works: {$arr[4][3]}";

// This is wrong for the same reason as $foo[bar] is wrong  outside a string.
// In other words, it will still work, but only because PHP first looks for a
// constant named foo; an error of level E_NOTICE (undefined constant) will be
// thrown.
echo "This is wrong: {$arr[foo][3]}"; 

// Works. When using multi-dimensional arrays, always use braces around arrays
// when inside of strings
echo "This works: {$arr['foo'][3]}";

// Works.
echo "This works: " . $arr['foo'][3];

echo "This works too: {$obj->values[3]->name}";

echo "This is the value of the var named $name: {${$name}}";

echo "This is the value of the var named by the return value of getName(): {${getName()}}";

echo "This is the value of the var named by the return value of \$object->getName(): {${$object->getName()}}";

// Won't work, outputs: This is the return value of getName(): {getName()}
echo "This is the return value of getName(): {getName()}";
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T06:52:12.500

你自己解释了。这就是 php 使用的语法——仅此而已。引用[文档](http://php.net/manual/en/language.types.string.php#language.types.string.parsing)：

> **复杂（卷曲）语法**
> 只需将表达式编写成与它出现在字符串外部相同的方式，然后**将其包装在 { 和 }**中。由于 { 无法转义，因此只有在 $ 紧跟 { 时才能识别此语法。使用 {\$ 获取文字 {$

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T08:08:14.923

在这里`{}`定义这些变量不是一个简单的字符串，所以 php 获取该变量值而不是假设它是一个简单的字符串。

# java - 如何从 AsyncTask 回调到片段 Activity？

> ID：10346028
> 
> 赞同：1
> 
> 时间：2012-04-27T06:47:44.713
> 
> 标签：java, android

我有使用 AsyncTask 实现的 Web 服务请求。通常我使用接口回调到 Activity：

```
public interface AsyncTaskComplete<T> {

    public void onTaskComplete(T result);
    public void onTaskFailed(T result);

} 
```

在异步任务中：

```
private AsyncTaskComplete<String> callback;

public AsyncTaskAbout(AsyncTaskComplete<String> cb) {
    this.callback = cb;
}

protected void onPostExecute(String result) {
    if(result ==  null){
        callback.onTaskFailed(result);
    }else{
        callback.onTaskComplete(result);
    }

} 
```

但是如果我想给回调 FragmentActivity 编译器建议我将 AsyncTask 构造函数更改为：

```
public AsyncTaskAbout(FragmentActivity faActivity) {
    this.callback = (AsyncTaskComplete<String>) faActivity;
} 
```

警告在哪里：

```
Type safety: Unchecked cast from FragmentActivity to AsyncTaskComplete<String> 
```

那么我需要改变什么？

或者在这种情况下如何进行回调？

谢谢。

# javascript - EXTJS 中的列布局

> ID：10346030
> 
> 赞同：0
> 
> 时间：2012-04-27T06:48:16.650
> 
> 标签：javascript, extjs

我是 ExtJs 的新手。我需要使用列布局在 2 列中创建一个条目表单。

我的代码如下：

```
Ext.onReady(function(){                         

                var patientForm = new Ext.FormPanel({
                    renderTo: "patientCreation",
                    frame: true,
                    title: 'Search Criteria',
                    labelAlign: 'left',
                    labelStyle: 'font-weight:bold;',
                    labelWidth: 85,
                    width: 900,
                    items: [
                    {
                        layout:'column',
                        items:[
                        {   // column #1
                            columnWidth: .33,
                            layout: 'form',
                            items: [
                                {   xtype: 'textfield',
                                    fieldLabel: 'FirstName',
                                    name: 'firstName',
                                    vtype : 'alpha',
                                    allowBlank:false
                                },{
                                    xtype: 'textfield',
                                    fieldLabel: 'MiddleName',
                                    name: 'middleName',
                                    vtype : 'alpha'             
                                }
                            ] // close items for first column
                        }]
                    }]

                        });         
                        var win = new Ext.Window({                          
                            layout:'form',
                            closable: false,
                            resizable: false,
                            plain: true,
                            border: false,
                            items: [patientForm]
                        });
            win.show();
            }); 
```

但是当我运行代码时，我得到*h is undefined error*。如何在列布局中设计表单？是否有任何程序，步骤或链接可以给出清晰的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T16:09:03.930

我用 ExtJs 3.2.2 运行了相同的代码并得到了类似的错误。但是当我删除`renderTo: "patientCreation"` 代码时： ![在此处输入图像描述](../Images/2fc3f4616e1625e216f664b5613cb717.png)

该部分不是必需的，因为您将表单放置在窗口中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T06:55:54.137

我对 ExtJS 3 一无所知。如果您使用的是 ExtJS 4，那么您`layout`在错误的位置指定了配置。您已经在配置中指定了它`items`，它不应该在`items`配置中。

布局可以在 ExtJS 4 中指定如下：

```
Ext.define('your_domain_name.viewName', {
    extend : 'Ext.panel.Panel',
    alias : 'widget.any_name_you_want',
    layout : 'column',

    initComponent : function() {
        this.items = [
            // all items inside form/panel will go here
        ];
    this.callParent(arguments);
    }
}); 
```

您可以在[此处获取有关所有面板的示例代码](http://dev.sencha.com/deploy/ext-4.0.0/examples/layout-browser/layout-browser.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:40:05.427

尝试将`renderTo`配置应用于窗口而不是表单

检查[示例](http://jsfiddle.net/EVr74/)

# android - 在 Android 上将视频转码/转换为 Mp4

> ID：10346031
> 
> 赞同：8
> 
> 时间：2012-04-27T06:48:18.367
> 
> 标签：android, video

我有一个要求，我需要将从本机相机应用程序拍摄的小视频剪辑转码为可通过电子邮件等分享的较低比特率/分辨率的 Mp4。

在设备本身上转码/转换视频的最佳方法是什么。FFMPEG 或任何其他库？

ps 我知道这对设备来说太过分了，但客户让我别无选择。他不在乎电池或时间。我的目标是四核，CPU 不是问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T17:27:43.373

您最好的选择是使用已移植到 Android 的 ffmpeg 之类的东西（请参阅此 SO 帖子：[ffmpeg for a android（使用教程：“ffmpeg 和 Android.mk”）](https://stackoverflow.com/questions/2645041/ffmpeg-for-a-android-using-tutorial-ffmpeg-and-android-mk)和适用于 android 的 ffmpeg 端口，此处为：[http： //bambuser.com/opensource](http://bambuser.com/opensource)）。您必须使用 JNI 等，但这将为您省去自己处理字节流的麻烦。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T17:19:16.823

我自己还没有在Android上尝试过，所以YMMV：

[是否有用于 mp4 文件的 Java API？](https://stackoverflow.com/questions/3015393/is-there-a-java-api-for-mp4-files)

[http://code.google.com/p/mp4parser/](http://code.google.com/p/mp4parser/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T17:22:32.703

如果您在设备上录制，为什么不从您的代码中设置预期的格式？看起来 api 允许您在[MediaRecorder](https://developer.android.com/reference/android/media/MediaRecorder.html)类中设置视频大小、帧率等。

# android - 在 ArrayList 中创建和删除（回收）位图时，堆大小不断增加

> ID：10346032
> 
> 赞同：0
> 
> 时间：2012-04-27T06:48:22.530
> 
> 标签：android, bitmap, arraylist, touchstart

我正在创建一个将位图存储在数组列表或数组中的应用程序。我已`android:largeHeap="true"`在清单中设置以增加应用程序的内存大小。我正在创建 20 个位图，之后如果创建了一个新位图，则回收（删除）第一个位图，并将新的位图添加到数组列表中。每次我添加一个额外的位图时，它都会释放内存，但在接下来的 15 到 20 个（总共超过 35 个）位图堆大小增加了大约 20 到 25 MB。此过程继续并发生内存不足异常。空间未释放。我已经单独尝试了以下每一项，并按顺序一起尝试：

1.  回收位图
2.  赋值为空
3.  从数组列表中删除

问题仍然存在。

```
ArrayList<Bitmap> linesbitmap;

private void touch_start(float x, float y) { // function called on every touch
    if (index >= 19) {
        while (linesbitmap.size() >= 19) {
            linesbitmap.get(0).recycle();
            linesbitmap.remove(0);
        }
        System.gc();
        System.runFinalization();
        System.gc();
    }
    if (mBitmap != null) {
        linesbitmap.add(Bitmap.createBitmap(mBitmap));
    }
    index = linesbitmap.size();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:12:13.053

在数组列表或数组中创建和删除位图时，堆大小会增加。我已将位图转换为`ByteArrayOutputStream`并将其存储在数组列表中。当我们删除或添加新对象时`ByteArrayOutputStream`，堆大小不会像存储和删除多个位图时那样增长。

```
ArrayList<ByteArrayOutputStream> arraylist=new ArrayList<ByteArrayOutputStream>();
new Thread(new Runnable() {
    @Override
    public void run() {
        Bitmap bitmap = Bitmap.createBitmap(mBitmap);
        ByteArrayOutputStream out = new ByteArrayOutputStream();
        if (mBitmap != null) {
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, out);
            arraylist.add(out);
        }
    }
}).start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:01:59.870

从问题来看，您似乎正在使用`ArrayList`作为缓存机制。如果是这种情况，您可以查看[`LruCache`](http://developer.android.com/reference/android/util/LruCache.html)API Level 12 中引入了哪个，但也包含在旧 API 级别的兼容性包中。

# php - php if 和语句导致问题

> ID：10346036
> 
> 赞同：0
> 
> 时间：2012-04-27T06:48:25.323
> 
> 标签：php, variables

我正在尝试使用 if 语句测试验证。

```
if (($red == "1") && ($blue = "1") ) { $green = "hello"; } 
```

在此语句运行之前`$blue = 0`。

在我运行这个之后......`$blue`更改为`1`.

任何想法为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T06:50:15.613

您正在使用`=`代替`==`：

```
if (($red == "1") && ($blue = "1") ) { $green = "hello"; }
                           ^^^ 
```

结果（假设左侧`&&`返回 true）`$blue` ***被赋值*** `"1"`。

这是最常见的编程错误之一！！为了防止这种情况发生，程序员将常量放在 as 的左侧`==`：

```
1 == $blue 
```

`=`因此，如果您错误地最终写成`==`：

```
1 = $blue 
```

您会收到语法错误，因为您无法分配给常量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T06:54:19.693

试试这个 if (($red == "1") && ($blue == "1") ) { $green = "hello"; }

//您的代码是 ($blue ="1") '=' 是 php 中的赋值运算符比较是 '=='

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T06:53:31.813

你分配`$blue = 1`而不是比较这就是为什么 $blue 是 1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T06:57:21.193

使用**==**或**===**而不是**=**。

'=' 是**赋值**运算符，**条件**运算符是**==**或**===**

```
if (($red == "1") && ($blue == "1") ) 
 { 
     $green = "hello"; 
 } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T06:51:16.207

这是因为您使用`=`. 使用`$blue == "1"`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T06:52:11.610

如果 (($red == "1") && ($blue == "1") ) { $green = "hello"; }

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T06:52:16.210

是的，使用`==`而不是`=`

我会进一步说，也许你应该在比较时将文字放在左手以避免这种情况。

喜欢`if(1 == $blue)`而不是`if($blue == 1)`

# sql - 如何在关系代数中编写具有 n 个属性 B 的选择属性 A？

> ID：10346045
> 
> 赞同：2
> 
> 时间：2012-04-27T06:49:13.853
> 
> 标签：sql, database, relational-algebra

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:12:16.367

you said σ(COUNT(Car)=3)(R), but COUNT is an aggregation function.

without aggregations, the only way I see is loop through the R table rows by row counting Owner. Something like:

```
for each row
    If owner=previous_owner then n_cars++ 
    else (if n_cars>=3 then return owner
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T18:39:13.087

```
\pi_{Car.owner}(\sigma_{Car.owner = C1.owner\wedge 
                        C1.owner = C2.owner\wedge 
                        Car.vin != C1.vin\wedge 
                        C1.vin != C2.vin\wedge 
                        Car.vin != C2.vin}(Car x 
                                           \rho_{C1}(Car) x 
                                           \rho_{C2}(Car)))
 -
 \pi_{Car.owner}(\sigma_{Car.owner = C1.owner\wedge 
                        C1.owner = C2.owner\wedge 
                        C2.owner = C3.owner \wedge
                        Car.vin != C1.vin\wedge 
                        C1.vin != C2.vin\wedge 
                        Car.vin != C2.vin \wedge
                        Car.vin != C3.vin\wedge 
                        C1.vin != C3.vin\wedge 
                        C2.vin != C3.vin}(Car x 
                                           \rho_{C1}(Car) x 
                                           \rho_{C2}(Car) x
                                           \rho_{C3}(Car))) 
```

where `\pi` is projection, `\sigma` is selection, `x` is cartesian product, `\rho` is renaming, `\wedge` represents conjunction and I assume the attributes of relation Car to be called `owner` and `vin`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T12:43:38.063

Here's one way of doing it, in SQL using operators that are easy to translate to relational algebra, and using slightly different test data (different types, same names):

```
WITH R 
     AS
     (
      SELECT * 
        FROM (
              VALUES (1, 1), 
                     (2, 2), (2, 3),
                     (3, 1), (3, 2), (3, 3),
                     (4, 1), (4, 2), (4, 3), (4, 4)
             ) AS T (Owner, Car)
     ),
     OwnersWithAtLeastThreeCars
     AS
     (
      SELECT DISTINCT R1.Owner
        FROM R AS R1, R AS R2, R AS R3
       WHERE R1.Owner = R2.Owner
             AND R2.Owner = R3.Owner
             AND R1.Car <> R2.Car
             AND R1.Car <> R3.Car
             AND R2.Car <> R3.Car
     ),
     OwnersWithAtLeastFourCars
     AS
     (
      SELECT DISTINCT R1.Owner
        FROM R AS R1, R AS R2, R AS R3, R AS R4
       WHERE R1.Owner = R2.Owner
             AND R2.Owner = R3.Owner
             AND R3.Owner = R4.Owner
             AND R1.Car <> R2.Car
             AND R1.Car <> R3.Car
             AND R1.Car <> R4.Car
             AND R2.Car <> R3.Car
             AND R2.Car <> R4.Car
             AND R3.Car <> R4.Car
     )
SELECT * FROM OwnersWithAtLeastThreeCars
EXCEPT       
SELECT * FROM OwnersWithAtLeastFourCars; 
```

* * *

p.s. I'm using 'old style' (i.e. pre-1992) standard SQL joins, which are widely condemned on Stackoverflow. I'm using them not only because it fits with the OP's list of available operators but, frankly, in these circumstances I find them much easier to write than using infix `INNER JOIN` notation.

# meteor - 如何管理同步到 Meteor 客户端缓存的数据？

> ID：10346057
> 
> 赞同：6
> 
> 时间：2012-04-27T06:50:54.590
> 
> 标签：meteor

我修改了排行榜示例以使用两个集合：

```
Players = new Meteor.Collection("players");
Tasks = new Meteor.Collection("tasks"); 
```

Players 集合具有示例中定义的 6 个文档。

```
> db.players.count()
6 
```

Tasks 集合有 48,000 个文档。

```
> db.tasks.count()
48000 
```

我一打开浏览器，Node 就跳到 100% CPU，客户端看不到任何任务记录。

```
Players.find().count()
6
Tasks.find().count()
0 
```

我尝试定义查询条件，但这仅适用于服务器，对客户端没有帮助。

```
Players.find({name:"Claude Shannon"}).count();
1
Tasks.find({tid:"t36254"}).count();
0 
```

我猜想同步 48,000 个文档太多了。这导致 Node 与 100% CPU 挂钩，客户端抛出如下错误：http: [//i.imgur.com/zPcHO.png](http://i.imgur.com/zPcHO.png)。

如何防止同步所有内容并仅从集合中检索特定文档？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-27T11:19:31.737

Meteor 的自动发布功能可以将你所有的收藏发布到客户端，它非常令人印象深刻，并且可以让事情快速运行，但它有点像 Rails 脚手架功能——对于真正的应用程序不是很有用——它用于学习和原型设计。

默认情况下，Meteor 会自动将集合中的每个文档发布到每个连接的客户端。要关闭此行为，请删除软件包：

$ 流星删除自动发布

然后，学习使用手动发布和订阅功能，它为您提供所需的控制：http: [//docs.meteor.com/#publishandsubscribe](http://docs.meteor.com/#publishandsubscribe)

# css - IE9 css 媒体查询无法正常工作...在其他任何地方都可以正常工作

> ID：10346058
> 
> 赞同：0
> 
> 时间：2012-04-27T06:50:54.917
> 
> 标签：css, internet-explorer, internet-explorer-9, media-queries

在 IE9 中查看这个[小提琴](http://jsfiddle.net/elclanrs/BMz9U/embedded/result/)并尝试调整浏览器的大小。如您所见，错误消息无法正常工作。到目前为止，它在 Webkit、Firefox 和 Opera 中运行良好。

这是我当前的代码：

```
@media screen and (max-width: 480px) {
  #my-form label {
    text-align: left;
    display: block;
    padding-bottom: .3em;
  }
  #my-form .error {
    position: inherit;
    display: inline-block;
    left: 0;
    top: 100%;
    margin-top: 4px;
    width: 200px;
  }
  #my-form .error:after {
    content: "";
    position: absolute;
    top: 0;
    margin-top: -16px;
    left: 50%;
    margin-left: -8px;
    border-style: solid;
    border-width: 8px 8px 8px 8px;
    border-color: transparent transparent #313b53 transparent;
  }
} 
```

可能是什么问题呢？我似乎无法弄清楚。IE9 是唯一一个不能按预期工作的...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:34:02.913

我修好了它。似乎有两件事导致 IE 出现问题。首先，我将默认代码移动`errors`到另一个 481 及更多的媒体查询中：

```
@media screen and (min-width: 481px) {
  #my-form .error {
    position: absolute;
    width: 150px;
    right: -171px;
    margin-right: -20px;
    top: 50%;
  }
} 
```

然后我使用浮点数而不是`inline-block`. 似乎 IE 仍然存在以下问题`inline-block`：

```
@media screen and (max-width: 480px) {
  #my-form label {
    text-align: left;
    display: block;
    padding-bottom: .3em;
  }
  #my-form .error {
    float: left; // Here
    clear: left;
    top: 100%;
    margin-top: 4px;
    width: 200px;
  }
} 
```

演示：http: [//jsfiddle.net/elclanrs/BMz9U](http://jsfiddle.net/elclanrs/BMz9U)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T10:37:23.703

我已通过在标题中添加 js 文件[respond.src.js来解决此问题](http://www.mockbox.net/website-tips/511-internet-explorer-8-media-screen-not-working)

# c# - 为什么 ValidationAttribute.IsValid 的调用时间比预期的晚？

> ID：10346059
> 
> 赞同：0
> 
> 时间：2012-04-27T06:51:06.233
> 
> 标签：c#, .net, validation

我有一个用验证属性注释的属性。为什么在属性的 IsValid 方法之前调用属性的 setter，更重要的是如何在设置值之前对其进行验证？

这是一个草图代码模型，用于查看验证器属性的外观：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = false)]
public class MyAttribute: ValidationAttribute
{       
    public override bool IsValid(object value) 
    {
        ...
    }
} 
```

以下是属性在属性上的使用方式：

```
[MyAttribute]
public string MyProperty
{
   get { ... }
   set { ... }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:55:46.043

我假设您在谈论命名空间`ValidationAttribute`内的内容`DataAnnotations`？*这些属性通常*用于描述验证要求，没有任何特定的规定模型。

但是，在许多情况下，构造一个对象或一组对象是有意义的，然后调用询问“这现在有效吗？” - 因此，当然，在这种情况下，对您的`IsValid`方法的调用将在设置属性值之后发生。

通常，属性是被动的 - 直到某物以编程方式实际访问该属性并对其执行某些操作时，该属性中的任何代码都不会运行。没有通用的方法来编写一个属性，即“当调用此属性所附加到的成员时，首先运行这段代码”。

# android - 如何在android中扫描条形码

> ID：10346060
> 
> 赞同：2
> 
> 时间：2012-04-27T06:51:09.750
> 
> 标签：android

如何通过应用程序扫描 android 设备中的条形码。如果 android 设备连接到外部蓝牙条码扫描器适配器。为此需要什么 API 或 sdk。

实际上我是android的新手，所以我的问题也可能有错误，对此深表歉意。

但如果有任何解决方案，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T06:57:39.320

您可以使用**ZXING Library**或**Biggu Scanner** ...，对于 Biggu Scanner，请查看此[示例](http://shopsavvy.mobi/android/sdk/release/ScannerSDK.Android-Latest.zip)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-12T05:16:39.637

我发现 iScandit 条码扫描器比 ZXING 和 biggu 扫描器更好。当 Barcode 不直接在相机焦点上时，这 2 个不起作用，但 iScandit 在这种情况下工作得惊人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T06:54:05.570

1.  我建议阅读 Android 开发人员指南中的以下内容 - [http://developer.android.com/guide/topics/wireless/bluetooth.html](http://developer.android.com/guide/topics/wireless/bluetooth.html)
2.  我认为您需要查看扫描仪制造商提供的蓝牙接口/api。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-10T19:11:42.203

## 2016 年更新

不确定蓝牙连接的条形码扫描仪，但现在你可能不需要一个。当前的建议是使用[Android Barcode API](https://developers.google.com/vision/barcodes-overview)：

> Barcode API 在设备上以任何方向实时检测条形码。它还可以一次检测多个条码。
> 
> 它读取以下条形码格式：
> 
> *   一维条码：EAN-13、EAN-8、UPC-A、UPC-E、Code-39、Code-93、Code-128、ITF、Codabar
> *   二维条码：QR Code、Data Matrix、PDF-417、AZTEC
> 
> 它会自动解析 QR 码、数据矩阵、PDF-417 和 Aztec 值，支持以下格式：
> 
> *   网址
> *   联系方式（VCARD 等）
> *   日历事件
> *   电子邮件
> *   电话
> *   短信
> *   国际标准书号
> *   无线上网
> *   地理位置（纬度和经度）
> *   AAMVA 驾驶执照/身份证

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-27T06:57:56.963

这是给你的建议。用于扫描条码。

它可能会帮助你。

从市场安装此应用程序。

[https://play.google.com/store/apps/details?id=com.google.zxing.client.android&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5nb29nbGUuenhpbmcuY2xpZW50LmFuZHJvaWQiXQ](https://play.google.com/store/apps/details?id=com.google.zxing.client.android&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5nb29nbGUuenhpbmcuY2xpZW50LmFuZHJvaWQiXQ) ..

使用意图在您的应用程序中使用此应用程序。

```
Intent intent = new Intent("com.google.zxing.client.android.SCAN");

startActivityForResult(intent, 0); 
```

# facebook - 如何自定义类似 fb 的按钮和 post_data

> ID：10346063
> 
> 赞同：0
> 
> 时间：2012-04-27T06:51:17.773
> 
> 标签：facebook, facebook-like

我在我的网站中使用 facebook 的类似 fb 的小部件。我希望它在他们喜欢它时渲染帖子和描述的图像，并且喜欢需要渲染到他们喜欢它的 facebook 墙上。但是类似fb的只是将链接显示为墙上的描述和标题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:35:18.727

您需要将 Open Graph 元标记添加到您的页面。阅读[Like button 社交插件文档](https://developers.facebook.com/docs/reference/plugins/like/)中的第 2 步，获取创建这些标签的指南。这将确保您的页面在帖子中正确显示。

# javascript - Pull date from mongo _id on the client side

> ID：10346067
> 
> 赞同：4
> 
> 时间：2012-04-27T06:51:29.050
> 
> 标签：javascript, node.js, mongodb

I use my document `_id` client-side as strings. I would love to be able pull the timestamp from this value as you can on the server. Is it possible to recreate this functionality on the client side? (recast as objectid, or create a standalone function to pull this data)

example `_id: "4f94c2a11a6bbec3872cb315"`

Thanks!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T07:14:08.023

How about this, broken down into steps... unfortunately it's only second resolution time that gets stored in the ObjectID.

```
var id = "4f94c2a11a6bbec3872cb315"​;
// first 4 bytes are the timestamp portion (8 hex chars)
var timehex = id.sub​string(0,8);
console.log(timehex); // gives: 4f94c2a1

// convert to a number... base 16
var secondsSinceEpoch = parseInt(timehex, 16);
console.log(secondsSinceEpoch); // gives: 1335149217

// convert to milliseconds, and create a new date
var dt = new Date(secondsSinceEpoch*1000);
console.log(dt);​ // gives: Sun Apr 22 2012 22:46:57 GMT-0400 (EDT) 
```

See jsfiddle if you want to test: [http://jsfiddle.net/pZdyM/](http://jsfiddle.net/pZdyM/)

**NOTE**: this is kind of kludgy--it depends on the current ObjectID format. They might move the timestamp around within the ObjectID one day, and that would break this.

# android - ProgressDialog 不显示

> ID：10346069
> 
> 赞同：0
> 
> 时间：2012-04-27T06:51:48.843
> 
> 标签：android

我有一个异步任务让我从网络上获取一些数据。异步任务工作正常，我希望在从网络获取数据时显示进度对话框微调器。进度对话框微调器永远不会出现。这是我的代码：

```
public class JsonHttpParsingActivity extends ListActivity{
private String jsonResult;
private ArrayList nameArray;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    HttpConnection task = new HttpConnection(this);
    AsyncTask<String,Void,String> taskResult = task.execute("Some URL...");
    try {
        jsonResult = taskResult.get();
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ExecutionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
            .
            .
            More Code.....
}
}

public class HttpConnection extends AsyncTask<String, Void, String> {
private ProgressDialog progressDialog;
private Activity m_activity;

protected HttpConnection(Activity activity) {
    setActivity(activity);
  }

  public void setActivity(Activity activity) {
    m_activity = activity;

    progressDialog = new ProgressDialog(m_activity);
    progressDialog.setMessage("Wait ...");
    progressDialog.setCancelable(false);
    progressDialog.setMax(100);
    progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    progressDialog.show();
  }

@Override
protected String doInBackground(String... params) {
    BufferedReader in = null;
    String inputLine= "", finalMessage = "";
    HttpURLConnection urlConnection = null;

    try {
        String urladdress = params[0];
        URL url = new URL(urladdress);
        urlConnection = (HttpURLConnection) url.openConnection();
        in = new BufferedReader(new InputStreamReader(urlConnection.getInputStream()));

        while((inputLine = in.readLine()) != null){
            finalMessage = finalMessage + inputLine;
        }
        in.close();
        Log.v("finalmessage", ""+finalMessage);
    }
    catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    finally {
        urlConnection.disconnect();
    }       
    return finalMessage;
}
protected void onProgressUpdate(Integer... values) {
     progressDialog.setProgress((int) ((values[0] / (float) values[1]) * 100));
     };

@Override 
protected void onPostExecute(String result){
      progressDialog.hide();
}
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T06:58:38.303

从 onPreExecute() 函数调用进度条

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T06:55:06.187

而不是编写一个单独的方法`setActivity(activity)`（非 UI 线程范围）来启动`ProgressDialog`将代码放入`onPreExecute()`（UI 线程）中`AsyncTask`，因为您试图在非 UI 线程中显示它。

尝试这个，

```
protected HttpConnection(Activity activity) {
   m_activity = activity;
  }

Override 
protected void onPreExecute(String result){
    progressDialog = new ProgressDialog(m_activity);
    progressDialog.setMessage("Wait ...");
    progressDialog.setCancelable(false);
    progressDialog.setMax(100);
    progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
    progressDialog.show();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T07:08:37.763

以下代码工作正常并经过测试：

```
 public class HttpConnection extends AsyncTask<String, Void, String> {
    private ProgressDialog progressDialog;
    private Activity m_activity;

    protected HttpConnection(Activity activity) {

      }

      @Override
    protected void onPreExecute() {
    // TODO Auto-generated method stub
    progressDialog = new ProgressDialog(m_activity);
        progressDialog.setMessage("Wait ...");
        progressDialog.setCancelable(false);
        progressDialog.setMax(100);
        progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        progressDialog.show();

    super.onPreExecute();
}

    @Override
    protected String doInBackground(String... params) {
        BufferedReader in = null;
        String inputLine= "", finalMessage = "";
        HttpURLConnection urlConnection = null;

        try {
            String urladdress = params[0];
            URL url = new URL(urladdress);
            urlConnection = (HttpURLConnection) url.openConnection();
            in = new BufferedReader(new InputStreamReader(urlConnection.getInputStream()));

            while((inputLine = in.readLine()) != null){
                finalMessage = finalMessage + inputLine;
            }
            in.close();
            Log.v("finalmessage", ""+finalMessage);
        }
        catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        finally {
            urlConnection.disconnect();
        }       
        return finalMessage;
    }

    @Override 
    protected void onPostExecute(String result){
          progressDialog.hide();
    }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-27T13:04:18.513

尝试从活动中的另一个方法调用 AsyncTask。我的猜测是，现在，您在活动的 onCreate 方法中调用它。由于活动仍在建设中，这可能会给您带来例外。当我遇到这个问题时，我曾经尝试过的一件事是从活动的 onPostCreate 方法启动异步任务。

# validation - 在 dojo ValidationTextBox 中验证 10 位电话号码

> ID：10346075
> 
> 赞同：0
> 
> 时间：2012-04-27T06:52:11.923
> 
> 标签：validation, dojo, dijit.form

我正在使用**dojo1.7**，在这里我正在寻找一个简单的正则表达式或范围/位置来**验证**`dijit.form.ValidationTextBox`.

我想确保这个数字正好是 10 位数字，**没有字母、连字符或括号或其他特殊字符**。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T09:17:14.033

对于精确的 10 位数字，您可以使用 RegExp `\d{10}`。这是一个工作示例：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Telephone Number Check</title>
    <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/dojo/1.7/dijit/themes/claro/claro.css">
    <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.7/dojo/dojo.js" data-dojo-config="async: true, parseOnLoad: true"></script>
    <script>
        require(["dojo/parser", "dijit/form/ValidationTextBox"]);
    </script>
</head>
<body class="claro">
    <label for="tel">Enter your 10 digits telephone number:</label>
    <input type="text" name="tel" value=""
    data-dojo-type="dijit.form.ValidationTextBox"
    data-dojo-props="regExp:'\\d{10}', required:true, invalidMessage:'Invalid telephone number.'">
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T09:48:35.233

```
<input id="reverveAmount" required="true" style="width:50px" data-dojo-type="dijit.form.ValidationTextBox" data-dojo-props='maxLength:"3",constraints:{places:1,min:1,max:20}, regExpGen:function(){ return "\\d+" }, required:true, invalidMessage:"Number only"'> 
```

这对我来说很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T23:24:31.423

要强制格式，您可以覆盖**过滤器**方法。默认的**过滤**方法来自**_TextBoxMixin.js**，它是实现修剪、大写、小写和正确大小写的地方。

这会将**ValidationTextBox**值重新格式化为 ###-###-####。如果您不想要连字符，只需删除两条拼接线。当然你也可以通过其他方式实现 filter 方法，比如使用**dojo/number**。

```
declare('calpoly/form/FormattingPhoneNumber', [ValidationTextBox], {

    regExp:"\\d{3}-\\d{3}-\\d{4}",
    invalidMessage:"Please enter a 10-digit phone number",

    filter:function(val){
        val = lang.trim(val);
        var s = [];
        for(var i=0; i<val.length;i++){
            if(!isNaN(val[i])){
                s.push(val[i]);
            }
        }
        if(s.length!=10){
            // Not a 10-digit phone number, return what the user typed, regex will invalidate.
            return val;
        }
        s.splice(3,0,'-');
        s.splice(7,0,'-');
        return s.join('');
    }
}); 
```

# android - 如何从列表视图中获取不在视图中的数据？

> ID：10346085
> 
> 赞同：1
> 
> 时间：2012-04-27T06:53:20.507
> 
> 标签：android

嘿朋友们，当我从列表视图中获取数据时，我现在使用 2 个文本视图，然后获取在我的手机窗口中看到的数据，但在列表视图中但不是视图中的数据。此数据仅在我滚动列表时查看，但我不想滚动并从列表中获取所有数据。所以请给我建议解决方案。并且帮手必须给予一定的奖励积分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T06:56:53.437

使用`getAdapter()`，获取项目的`View`来源`findViewById()`并检索数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T12:16:40.500

如果您可以使用适配器从适配器获取文本信息，则可以这样做

```
myadapter=MyList.getAdapter ;
        View rowview=myadapter.getView(i,null,MyList); 
```

现在在 rowview 中通过它的 id 找到 textview，然后检查复选框是否被选中，然后你可以在自定义适配器中维护 booleon 类型数组并维护 evrey 复选框状态。这是您问题的完整解决方案..

# javascript - 如何将 JSON 放入 EXTJS Grid？

> ID：10346089
> 
> 赞同：0
> 
> 时间：2012-04-27T06:53:40.400
> 
> 标签：javascript, json, extjs, combobox, grid

如果选择了 3 个组合框，我会搜索它们，选择的 valueid 通过 $POST 发送它们，然后通过 AJAX 发送到 PHP。

PHP 正在从组合框 id 的 mysql 查询中构建，并将其作为 JSON 发送回来。（JSON 已验证）

但是我的网格没有填满！我如何将过滤后的 id 数据放入我的网格中？

我的按钮

```
buttons:[
            {
                text:'Search',
                loadingText:'lädt',
                handler:function () {
                    var form = Ext.getCmp('searchPanel').getForm();
                    form.submit(
                        {url: 'php/search.php'}

               ) 
```

我经过验证的 JSON

```
"getRoutedata": [
    {
        "RouteID": "3",
        "Loadingpoint": "Hafencity",
        "Postalcode": "20457",
        "Containercity": "Uhlenhorst",
        "Carrier": "Bre SO",
        "Transportmodel": "Truck",
        "Containersize": "40",
        "Containertype": "Horizontal",
        "Harbor": "Antwerpen",
        "Price": "1000.00",
        "Year": "2012",
        "Misc": "test"
    }
] 
```

我的商店

```
 storePPT = new Ext.data.JsonStore({
    url:'php/search.php',
    storeId:'myStore',
    root:'getRoutedata',
    stateful:true,
    idProperty:'RouteID',
    fields:[
        {name:'Carrier', type:'string', mapping:'Carrier'},
        {name:'Containercity', type:'string', mapping:'Containercity'},
        {name:'Containersize', type:'string', mapping:'Containersize'},
        {name:'Containertype', type:'string', mapping:'Containertype'},
        {name:'Harbor', type:'string', mapping:'Harbor'},
        {name:'Loadingpoint', type:'string', mapping:'Loadingpoint'},
        {name:'Misc', type:'string', mapping:'Misc'},
        {name:'Postalcode', type:'string', mapping:'Postalcode'},
        {name:'Price', type:'decimal', mapping:'Price'},
        {name:'Transportmodel', type:'string', mapping:'Transportmodel'},
        {name:'Year', type:'year', mapping:'Year'},
        {name:'RouteID', type:'int', mapping:'RouteID'}
    ]
}); 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:24:56.457

您需要有一个存储来保存来自您的 JSON 响应的解析数据和一个将显示来自该存储的数据的网格。喜欢：

```
 //call this function in ajax success
function loadJsonData() {
   var myStore = Ext.create('Ext.data.JSONStore', {
                 fields: [
                         {name1: 'field_name1'},
                         {name2: 'field_name2'},
                         {name3: 'field_name3'}
                 ],
                 data: jsonData
    });
    // create the Grid
    var grid = Ext.create('Ext.grid.Panel', {
               store: myStore,
               stateful: true,
               stateId: 'stateGrid',
               columns: [ {
                       text : 'field_name1',
                       sortable : false,
                       dataIndex: 'field_name1' // add fields you want to display
               }, ... ]               
               renderTo: 'table' // add other params as you want
    });
}; 
```

希望能帮助到你

# c# - 有什么方法可以提高 TCP 连接时间？

> ID：10346091
> 
> 赞同：3
> 
> 时间：2012-04-27T06:53:42.307
> 
> 标签：c#, sockets, tcp, connection, performance-testing

我编写了一个 TCP 服务器来使用 BeginAccept/EndAccept 模式。有了这个，我使用 TcpClient 编写了一个简单的 UnitTest，并测量了每个部分。所有测试都是本地主机，所以我很惊讶地看到 TCP 连接始终需要 1 秒。我已经设置了`Socket.NoDelay = true`虽然我相信这只会影响发送/接收。我没有收到第一个数据包。任何有关加快速度的帮助或想法都将受到赞赏。

注意：我无法更改客户端以保持连接打开，并且如果可能的话，我需要能够每秒处理大量请求。

服务器端：

```
public void Start()
{
    System.Net.IPHostEntry localhost = System.Net.Dns.GetHostEntry(System.Net.Dns.GetHostName());
    System.Net.IPEndPoint endpoint;
    int port = Properties.Settings.Default.ListenPort;

    //
    // Setup the connection to listen on the first IP, and specified port
    //
    endpoint = new IPEndPoint(IPAddress.Any, port);
    listenSocket = new Socket(endpoint.Address.AddressFamily, SocketType.Stream, ProtocolType.Tcp);
    listenSocket.Bind(endpoint);
    listenSocket.NoDelay = true; // do not wait 200 milliseconds for new data to be buffered on the connection
    listenSocket.Listen(int.MaxValue);
    Console.WriteLine("Listening on {0}:{1}", localhost.AddressList[0], port);

    //
    // Post the accept. The accept method will continuously post a new accept as soon as a connection is made
    //
    while (true)
    {
        accepted.Reset();
        Connection connection = connections.Pop();
        listenSocket.BeginAccept(AcceptCallback, connection);
        accepted.WaitOne();
    }
}

private static void AcceptCallback(IAsyncResult ar)
{
    accepted.Set();

    Connection connection = ar.AsyncState as Connection;
    Socket remoteSocket = null;

    try
    {
        remoteSocket = listenSocket.EndAccept(ar);
        remoteSocket.NoDelay = true;                
        connection.RemoteSocket = remoteSocket;

        //
        // Start the Receive cycle
        //
        Receive(connection);             
    }
    catch (SocketException)
    {
        Disconnect(connection);
    }           
} 
```

简单测试客户端：

```
[TestMethod()]
public void ClientTest()
{
    TestContext.BeginTimer("Connection");
    TcpClient client = new TcpClient("localhost", 10300);
    NetworkStream stream = client.GetStream();
    TestContext.EndTimer("Connection");
    ... 
```

使用 LoadTest 我加载了 25 个用户，并且事务“连接”总是需要 1 秒以上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T15:56:41.753

不知道为什么，但只是改变这个：

```
TestContext.BeginTimer("Connection");          
TcpClient client = new TcpClient("localhost", 10300);            
TestContext.EndTimer("Connection"); 
```

对此：

```
TestContext.BeginTimer("Connection");
TcpClient client = new TcpClient();
client.Connect("localhost", 10300);       
TestContext.EndTimer("Connection"); 
```

将时间从 1 秒降至 0.13 秒。将不得不调查原因，但希望这将在未来帮助某人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T17:40:28.213

当您尝试在解析为 Ipv6 和 Ipv4 地址的主机上使用 TcpClient 构造函数进行连接时，首先尝试使用 Ipv6 进行连接。如果失败，它会尝试使用 IPv6 地址进行连接。这是 1 秒延迟的原因。[这是 MSDN 链接](http://msdn.microsoft.com/en-us/library/115ytk56.aspx)：

# java - 你可以从java注释访问环境属性吗？

> ID：10346101
> 
> 赞同：2
> 
> 时间：2012-04-27T06:54:25.013
> 
> 标签：java, properties, annotations, environment

我有一个如下所示的注释：

```
@MessageDriven
@ActivationConfigProperty(propertyName = "maxSession", propertyValue = "1")
public class ProcessingEntitiesQueueListenerMDB implements MessageListener { 
     ......
     ......
     .....
} 
```

是否可以从环境变量中传递 maxSession 的值？就像是：

```
@ActivationConfigProperty(propertyName = "maxSession", propertyValue = "${mdb.maxSessionVal") 
```

参数 mdb.maxSessionVal 将使用 -Dmdb.maxSessionVal = 10 或类似的东西传入。

有可能还是它们在编译时固定？

# c++ - n 步的图遍历

> ID：10346103
> 
> 赞同：7
> 
> 时间：2012-04-27T06:54:26.150
> 
> 标签：c++, c, algorithm, graph

给定一个像这样的简单无向图：

![在此处输入图像描述](../Images/9e991b84e45fe4692863de76e2aad610.png)

从 D、A、`V_start`B或C `V_start`（.`V_start``n`

我正在考虑进行深度优先搜索，当 时停止`steps > n || (steps == n && vertex != V_start)`，但是，如果，例如，这将变得相当昂贵`n = 1000000`。我的下一个想法使我将 DFS 与动态编程相结合，但是，这就是我遇到的问题。

（这不是家庭作业，只是我为了学习而被困在玩图表和算法。）

我将如何在合理的时间内解决这个问题`n`？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-27T06:59:20.723

这个任务是通过矩阵乘法来解决的。

创建包含 0 和 1 的矩阵`n`x （如果有从到的路径，则为单元格 1 ）。将此矩阵乘以自身时间（考虑使用快速矩阵求幂）。然后在矩阵的单元格中，您有长度从 开始和结束的路径数。`n``mat[i][j]``i``j``k``mat[i][j]``k``i``j`

**注意**：快速矩阵求幂与快速求幂基本相同，只是将数字乘以矩阵。

**注意2：**假设`n`是图中的顶点数。然后我在这里提出的算法以 O(log [k] * n ³ ) 的时间复杂度运行，并且具有 O(n ² ) 的内存复杂度。如果您使用[此处](http://en.wikipedia.org/wiki/Matrix_multiplication#Algorithms_for_efficient_matrix_multiplication)所述的优化矩阵乘法，则可以对其进行更多改进。那么时间复杂度将变为 O(log [k] * n ^(log [2] ⁷) )。

* * *

**编辑应**Antoine 的要求，我解释了为什么该算法实际上有效：

我将通过归纳证明该算法。归纳的基础很明显：最初我在矩阵中有长度为 1 的路径数。

让我们假设直到 的幂`k`如果我将矩阵提升到 的幂`k`我在长度介于和之间`mat[i][j]`的路径数量中。`k``i``j`

现在让我们考虑下一步`k + 1`。很明显，每条长度路径`k + 1`都由长度前缀`k`和一条边组成。这基本上意味着`k + 1`可以通过以下方式计算长度路径（这里我表示`mat_pow_k`矩阵的`k`th 次方）

num_paths(x, y, k + 1) = sum [i=0] ^(i<n) mat_pow_k[x][i] * mat[i][y]

再次：`n`是图中的顶点数。这可能需要一段时间才能理解，但基本上`mat[i][y]`只有在`x`和之间存在直接边时，初始矩阵的单元格中才有 1 `y`。我们计算这种边缘的所有可能前缀以形成长度路径`k + 1`。

但是我写的最后一件事实际上是计算 的`k + 1`st 幂`mat`，这证明了归纳的步骤和我的陈述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T11:22:39.357

这很像一个**动态规划**问题：

1.  将 af[n][m] 定义为从起点到点 n 的路径数，步长为 m
2.  从每个点 n 到其相邻的 k，您有公式： f[k][m+1] = f[k][m+1] + f[n][m]
3.  在初始化中，所有 f[n][m] 都将为 0，但 f[starting_point][0] = 1
4.  所以你可以计算最终结果

伪代码：

```
memset(f, 0, sizeof(f));
f[starting_point][0] = 1;
for (int step = 0; step < n; ++step) {
    for (int point = 0; point < point_num; ++point) {
        for (int next_point = 0; next_point < point_num; ++ next_point) {
            if (adjacent[point][next_point]) {
                f[next_point][step+1] += f[point][step];
            }
        }
    }
}
return f[starting_point][n] 
```

# asp.net-mvc-3 - 我如何调整验证码图像的大小 + MvcCaptchaExtensionMVC3

> ID：10346110
> 
> 赞同：0
> 
> 时间：2012-04-27T06:54:48.313
> 
> 标签：asp.net-mvc-3, captcha

我在我的 MVC3 站点中使用 MVCcaptcha，现在我想将默认验证码图像大小调整为自定义大小

[这里](http://www.smartsoftwarebits.com/mvccaptcha/91-mvccaptcha-getting-started-howto)有一篇关于使用 MVCcaptchaExtention 的好帖子

但它没有指定如何调整图像大小

如何调整验证码图像的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:09:46.620

在 SSB.Web.Mvc.MvcCaptcha.Properties.Settings 设置

```
<setting name="MvcCaptchaWidth" serializeAs="String">
    <value>130</value>
</setting>
<setting name="MvcCaptchaHeight" serializeAs="String">
    <value>40</value>
</setting> 
```

# google-maps - 如何准确比较谷歌地图坐标？

> ID：10346112
> 
> 赞同：1
> 
> 时间：2012-04-27T06:54:58.363
> 
> 标签：google-maps, google-maps-api-3

我在 Excel 表中有坐标（lat，lng）和与该点相关的信息。我想将存储在数据库（lat，lng）中的坐标与 excel 坐标进行比较。我的主要想法是在与标记关联的信息窗口上显示有关道路点的正确信息。我的疑问是如何以最准确的方式选择坐标？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:05:55.563

所以我想我理解你在做什么 - 捕获用户位置的坐标，然后你想找到有关该位置附近的信息。如果我说的没错，我建议你看看[Places Library](https://developers.google.com/maps/documentation/javascript/places)。

Google 提供了一个库/服务，允许您发送`request`包含位置和半径或定义矩形边界的坐标的库/服务，该服务将返回有关附近景点的信息。有许多方法可以优化搜索以关注不同类型的特征。

我认为这就是您正在寻找的 - 如果不是，请提供更多细节，我会尽力帮助您。

# android - iPhone\Android 应用安装后重定向

> ID：10346118
> 
> 赞同：2
> 
> 时间：2012-04-27T06:55:31.473
> 
> 标签：android, iphone

假设我通过“itms://itunes.apple.com/us/app/facebook/id284882215?mt=8&uo=6”链接（或等效的 Google Play 链接）重定向用户从 iTunes 下载我的应用程序

安装应用程序后是否可以让他重定向到某个网址？（说我自己的应用程序注册的架构网址）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:00:16.357

您不能将它们重定向到商店之外。

编辑：如果可能的话，想象一下安全风险：S

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:06:21.393

它对于 1）android 和 2）iphone 都不同 可以说，如果您从商店（google play/itunes）下载您的应用程序，那么您可以将用户重定向到任何其他肯定的链接，a）但您不能重定向用户下载另一个应用程序（在 iphone 的情况下）因为应用程序仅从 iTunes 分发，而不是任何其他来源 b）但在 Android 的情况下这种情况并非如此，因为应用程序可以从任何来源分发，google play 不仅是受限制的分发地点.

# php - 如何在第一个（变量）html标签之间提取部分字符串？

> ID：10346120
> 
> 赞同：0
> 
> 时间：2012-04-27T06:55:38.237
> 
> 标签：php, regex

我有一些字符串：

```
$string1 = '<p><strong>Extract me</strong></p><p>Leave me</p>';
$string2 = '<strong>Extract me</strong>Leave me';
$string3 = '<span style="font-weight: bold">Extract me</span><br /><span>Leave me</span>'; 
```

让我们检查一下**$string3**：

字符串的第一个标签是所以要提取第一个和第一个**`<span>`** 之间的文本。`<span>``</span>`

提取的意思是：从*$stringX*中删除它并保存到*$extractedX*

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:02:36.187

```
[^>]*?(?=<\/.*>) 
```

你应该做的是使用断言。 `[^>]*?`搜索任何不是`>`. 这应该没问题，因为如果您需要`>`用作文本，则需要将其转义为`&gt;`. 然后它搜索由 表示的第一个结束标记`<\/.*>`。它的`(?=)`周围告诉正则表达式引擎不要将它包含在匹配中。

[http://regexr.com?30pkm](http://regexr.com?30pkm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:00:59.010

您必须先进行搜索，然后在此处发布您的问题..
这里的任何方式都是您的 ans 相关问题 [单击此处获取相关问题](https://stackoverflow.com/questions/1252693/php-str-replace-that-only-acts-on-the-first-match)

你可以用[preg replace](http://www.php.net/preg_replace)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T07:07:14.627

您可以使用 PHP 的[preg_match](http://www.php.net/manual/en/function.preg-match.php)和正则表达式。

这个在线编辑器对正则表达式很有用：

[http://regexr.com?30pkp](http://regexr.com?30pkp)：

你需要这样的东西才能开始：

`<strong>(.*)</strong>|<span.+font-weight:\ ?bold.+>(.*)</span>`

如果您需要进行更高级的解析，您可以查看在 PHP 中解析 DOM，例如使用[DOMDocument LoadHtml](http://docs.php.net/manual/en/domdocument.loadhtml.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T07:02:27.290

如果您只想要第一次出现，您可以使用[strip_tags](http://ca.php.net/strip_tags)和一些[preg_match 。](http://ca3.php.net/preg_match)

# javascript - 如何对 Dropbox 使用单点登录？

> ID：10346122
> 
> 赞同：5
> 
> 时间：2012-04-27T06:55:43.790
> 
> 标签：javascript, oauth, single-sign-on, dropbox

我正在将我的 JavaScript 应用程序连接到我的[Dropbox](http://www.dropbox.com)以上传/下载文件。作为 oauth 过程的一部分，我必须将用户重定向到显示权限允许/拒绝对话框的 Dropbox API 页面。有什么办法可以跳过这个对话框？

我相信这可以通过 SSO 实现，但不知道如何为 Dropbox 实现它。有人可以指导我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:26:45.503

Dropbox API 的[oauth/authorize](https://www.dropbox.com/developers/reference/api#authorize)方法不提供让用户跳过之前授权应用程序的允许/拒绝的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T01:52:48.360

如果您的目标是无论用户如何都使用相同的 Dropbox 帐户，只需存储第一次接受后生成的 access_token 并重新使用它。access_token 可以在会话变量中看到。只需手动设置，您就不会被重定向到保管箱授权页面。

# c# - C# 程序列出用户及其各自目录的路径

> ID：10346126
> 
> 赞同：1
> 
> 时间：2012-04-27T06:56:00.113
> 
> 标签：c#, windows

我希望在 C# 中有什么方法可以作为程序找出系统中可用的用户列表，即在我的计算机中以及他们的目录路径。我的意思是假设有 2 个用户

“用户 A”和“用户 B”

他们的路径我的意思是用户 A 的所有文档都将在 D:\Documents and Settings\User A 中，对于用户 B 也是如此。

C# 中有什么方法可以找出用户列表及其各自目录的路径。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T07:01:33.687

你可以这样做

```
string users_reg_key=
   @"HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Explorer\DocFolderPaths";

public string[] ListWinUsersList()
{
 //The registry key for reading user list.

 RegistryKey key =
 Registry.LocalMachine.OpenSubKey(users_reg_key, true);

 string[] winusers = "  ".Split(' ');//this resolve problem with assigned variable

 if (key != null && key.ValueCount > 0)
 {
     winusers = key.GetValueNames();
 }
 return winusers;
} 
```

**编辑**

获取目录尝试这样的事情

```
string path =  Directory.GetParent(Environment.GetFolderPath(Environment.
SpecialFolder.ApplicationData)).FullName;
if ( Environment.OSVersion.Version.Major >= 6 ) {
 path = Directory.GetParent(path);
} 
```

# python - 对象数据帮助中的对象。（带水果）

> ID：10346127
> 
> 赞同：0
> 
> 时间：2012-04-27T06:56:01.527
> 
> 标签：python, oop, python-3.x, object

结果不是我所期望的。当guya（一个对象）从guyb那里得到他的柠檬（也是一个对象）时，他们俩的柠檬都增加了，然后减少了1，从表面上看。但是，如果您取消注释该程序中唯一注释的行，我尝试将 Guyc lemon 的计数分配为 1000，但这只会将每个人的 lemon.quantity 设置为 1000。这是怎么回事？

我在类slasher中的getlemon的目的是减少目标的柠檬数量1，并增加1的柠檬数量，但失败了。我做错什么了？当我尝试将 guyc.lemon.quantity 分配为 1 时，发生了什么？

```
class item():
  def __init__(self, x = 0): self.quantity = x
  def set_quantity(self, newquantity): self.quantity = newquantity
class slasher():
  health = 10
  lemon = item(10)
  def getlemon(self, target):#target is the placeholder
    target.lemon.quantity -= 1
    self.lemon.quantity += 1
    target.health -= 1
guya = slasher()
guyb = slasher()
guyc = slasher()
guya.getlemon(guyb)
#guyc.lemon.quantity = 1000
def printit():
  print("guya's lemon count:", guya.lemon.quantity)
  print("guyb's lemon count:", guyb.lemon.quantity)
  print("guyc's lemon count:", guyc.lemon.quantity)
  print("guyb's health:", guyb.health)
printit() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:04:43.053

`lemon = item(10)`在定义类时只运行一次。因此，无论哪个实例 - 您将始终访问同一个对象。

为避免这种情况，请在构造函数中创建对象：

```
def __init__(self):
    self.lemon = item(10) 
```

您可能希望对`health`- 但是，在这种情况下没有必要这样做，因为一旦您为其分配了某些东西，`obj.health`它将在实例上设置（数字是不可变的。）

# mysql - Mysql：如何在 init_connect 变量中正确设置过程调用

> ID：10346128
> 
> 赞同：1
> 
> 时间：2012-04-27T06:56:06.973
> 
> 标签：mysql, stored-procedures, init

我想将每个会话用户的活动以非常高的级别存储到一个表中。我写了一个程序“audit.login_trigger”。我已经创建了所需的架构（审计数据库和表）。是这样的。

```
CREATE PROCEDURE audit.login_trigger()
SQL SECURITY DEFINER
BEGIN
  INSERT INTO audit.audit_connect (thread_id, user, login_ts)
  VALUES (CONNECTION_ID(), USER(), NOW());
END; 
```

我把它放在“init_connect”里面。

```
SET GLOBAL init_connect="CALL audit.login_trigger()"; 
```

我希望为每个用户连接执行此操作。我将此 PROCEDURE 的 EXECUTE 权限授予 root 用户，但是当 root 用户登录时，它没有按预期填充审计架构。这里可能出了什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T20:16:27.493

由于该用户名为“root”，我想知道它是否具有超级权限。如果是这样，请注意 init_connect 不会为超级用户触发。

# ruby-on-rails-3 - 带有嵌套参数的 Rails 3 函数

> ID：10346132
> 
> 赞同：1
> 
> 时间：2012-04-27T06:56:22.960
> 
> 标签：ruby-on-rails-3, function, parameters, nested

我正在尝试将一组参数传递给定义为这样的rails函数......

```
def test(*params)
    stuff
end 
```

如果我通过以下

```
test :mark, :was, :here 
```

或者

```
test :mark, :was, :here=>:today 
```

一切安好。但是，当我这样做时...

```
test :mark, :was=>:really, :here 
```

抛出一个错误。任何线索我要去哪里错？

M。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T06:59:52.823

如果最后一个参数是散列，则不必使用大括号，但如果散列不在参数列表的末尾，*则确实*需要大括号。在中间，Ruby 不知道逗号是表示下一个参数还是哈希中的下一项。所以你必须这样做：

```
test :mark, {:was=>:really}, :here 
```

# java - 如何在struts2中获取xml作为响应

> ID：10346133
> 
> 赞同：1
> 
> 时间：2012-04-27T06:56:23.723
> 
> 标签：java, xml, struts2

我正在尝试在 strurts2 中以 xml 类型的 javascript 获得响应。在我的动作类中，我正在创建一个 xml，并试图在 java 脚本中获取它。我在行动课上的代码 -

```
public String populateXML(){
    DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();
    DocumentBuilder documentBuilder;

    String root = "menuTree";
    File file = new File(this.getServletRequest().getRealPath("/xml/xmlmenutree2.xml"));

    documentBuilder = documentBuilderFactory.newDocumentBuilder();
    Document document1 = documentBuilder.newDocument();

    Element rootElement = null;
    rootElement = document1.createElement(root);
    document1.appendChild(rootElement);

    TransformerFactory transformerFactory = TransformerFactory.newInstance();
    Transformer transformer = transformerFactory.newTransformer();

    DOMSource source = new DOMSource(document1);
    StreamResult result = new StreamResult(file);

    transformer.transform(source, result);
    return SUCCESS;
} 
```

这将在我的磁盘中创建一个 xml 文件。在我的 javascript 中，我像访问它一样 -

```
$(document).ready(function() {
    var options = {
    xmlUrl : 'xml/xmlmenutree2.xml' 

};
    $('#xmlMenuTree').xmltree(options);
} 
```

其中 xmlMenuTree 是我在 jsp 的 div id。并支持 xml-

```
<action name="fileManagement" class="com.amit.MyAction" method="populateXML">
  <result name="success" type="tiles">filemanagement</result>
</action> 
```

这工作正常。但我实际上希望将 xml 设置为响应而不是将其保存在我的磁盘中。是否可以在 strurts2 中进行设置？提前谢谢你。阿米特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:02:48.217

将 xml 放入响应对象并通过适当的标签访问视图层......简单。我认为这可能会节省您的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T10:38:43.307

行动：

```
 public class MyAction extends ActionSupport {
    //Generate xml like InputStream and put it here
    private InputStream myXmlStream; 
```

动作定义：

```
<action name="MyAction" class="mypackage.MyAction">
  <result type="stream">
     <!-- Struts will take InputStream from this variable and send it as response-->
    <param name="myXmlStream">text/plain</param>
    <!-- Set fake filename-->
    <param name="contentDisposition">filename="xmlmenutree2.xml"</param>
  </result>
</action 
```

# windows-server-2008 - windows server 2008：如何识别谁登录到服务器

> ID：10346138
> 
> 赞同：0
> 
> 时间：2012-04-27T06:57:07.587
> 
> 标签：windows-server-2008, remote-desktop

我的 windows server 2008 只允许一个用户在给定时间登录。当另一个用户尝试远程登录到同一服务器时，先前活动用户的会话将断开连接。这给我们带来了一些问题。

谁能告诉我一种方法来查找用户是否已经登录到服务器/查找当前活动的用户而无需实际登录到服务器，这样已经活动的用户的会话就不会受到干扰。

请提供您宝贵的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:06:29.277

有 2 种类型的用户交互（您正在寻找？）和非交互（系统、批处理、网络等）因此您可以看到API [Win32_LogonSession 。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394189%28v=vs.85%29.aspx "Win32_LogonSession")还有一篇关于[http://www.codeproject.com/Articles/7483/Enumerating-Logon-Sessions的好文章](http://www.codeproject.com/Articles/7483/Enumerating-Logon-Sessions)

# ruby-on-rails - 在 Ruby 上显示表中的数据

> ID：10346140
> 
> 赞同：0
> 
> 时间：2012-04-27T06:57:19.210
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我是 Ruby 新手，我正在尝试从表中获取数据。所以当读到这个

```
<%= puts @note.inspect %> I have this this result.

[#<Note id: 1, user_id: 1, note_type: 0, text: "Barev dzez", lat: 40.2290542420142, lng: 44.420879046875, deleted: false, created_at: "2012-04-26 14:10:05", updated_at: "2012-04-26 14:10:05">] 
```

因此，当我调用 Note.text （例如）时，我得到了 nil 结果。那么我应该在这里写什么来从数组中获取数据呢？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T07:09:17.733

`@note`是一个带有一个 Note 对象的数组。您需要先获取元素。例如：

```
<%= @note.first.text %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:15:04.623

您正在检索数组中的记录，因此您需要像这样调用

```
 <%= puts @note.first.text %> 
```

或者

```
 <%= puts @note.last.text %>    if there is only one record 
```

但是您没有指定如何检索记录..

# iphone - 如何根据特定键在字典中添加数组

> ID：10346146
> 
> 赞同：1
> 
> 时间：2012-04-27T06:57:39.897
> 
> 标签：iphone

我正在制作一个应用程序。我想在其中添加供应商名称及其设备名称.. 我正在使用字典，其中供应商名称是键，设备名称是值..

这是我的代码

```
[appDelegate.arrOfDevice addObject:txtDeviceName.text];
[appDelegate.dictOfDetails setObject:appDelegate.arrOfDevice  forKey:txtVendorName.text ]; 
```

这`arrOfDevice`是一个数组（在 中声明`appdelegate`），其中包含所有添加的设备。我想添加基于特定键的设备...

我知道，我做错了，

我将数组作为字典中的值推送，因此它将存储每个键的所有设备名称..但请帮助我...以便我可以根据特定键存储设备名称...

如果您无法理解，请随时澄清我的问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T10:33:01.923

如果您是第一次添加密钥，那么您需要执行此操作，如下所示

```
if(flag==1) {
            NSMutableArray *tmpArr=[[NSMutableArray alloc]init];
            [tmpArr addObject:txtDeviceName.text];
            [appDelegate.dictOfDetails setObject:tmpArr forKey:[txtVendorName.text uppercaseString]];
} 
```

如果键存在，您只需要为数组创建引用并将对象添加到字典

```
 else if(flag==0) {
            NSMutableArray *arrDevice=[appDelegate.dictOfDetails objectForKey:[txtVendorName.text uppercaseString]];
            [arrDevice addObject:txtDeviceName.text] ;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:06:38.817

```
NSDictionary *dic = [NSDictionary dictionaryWithObjects:[NSArray arrayWithObjects:@"Nit",[NSNumber numberWithInt:3],nil]
                                              forKeys:[NSArray arrayWithObjects:@"Name",@"num",nil]]; 
```

**>>编辑**

```
NSDictionary *dic = [NSDictionary dictionaryWithObjectsAndKeys:
    @"value1", @"key1", @"value2", @"key2", nil]; 
```

[也似乎 +dictionaryWithObjects:forKeys:](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDictionary_Class/Reference/Reference.html)

希望对你有帮助...

# javascript - 在浏览器中处理流式 JS 内容的最佳方法是什么？

> ID：10346149
> 
> 赞同：1
> 
> 时间：2012-04-27T06:57:53.860
> 
> 标签：javascript, jquery, html, server-side, http-streaming

想象一下，我们有一个服务器端应用程序，它生成充满 JavaScript 命令的流内容。我展示示例应用程序的最简单方法是使用 Python/Flask，但是您可以使用任何语言执行它，只需在每次迭代后刷新输出即可。因此，对于示例服务器端应用程序：

```
from time import sleep from flask import Response

@app.route('/stream', methods=['POST']) def stream():
    def generate():
        for i in range(10):
            sleep(1)
            yield 'console.log("Iteration: %d");\n' % i
    return Response(generate(), mimetype='application/javascript') 
```

它返回（在 10 秒内，有 1 秒的暂停）这种输出：

```
console.log("Iteration: 0");
console.log("Iteration: 1");
console.log("Iteration: 2");
...
console.log("Iteration: 9"); 
```

我需要创建一个“父”HTML/JavaScript 页面，它可以即时处理和执行这些命令，即**不要**等到所有 10 次迭代都加载完毕。此外，它应该能够为提到的服务器端应用程序提供**POST请求。**

这是我尝试过的选项。

1.  我用不同的选项测试了 jQuery Ajax 方法，但它仍然需要完全生成的输出来一次执行所有命令。
2.  另一个想法是使用`iframe`. 它工作正常，但为了使用它，我需要将我的输出改写`console.log("Iteration: 0");`为`<script language="JavaScript">console.log("Iteration: 0");</script>`内容类型为*text/html*；并且还可以模拟 POST 表单提交到目标`iframe`。
3.  我已阅读有关 WebSockets 的信息。然而，由于目前这项技术还没有得到绝对的支持，而且我的应用程序现在应该能够处理动态内容，所以我拒绝处理它。

另一个非常重要的事情：**输出应该是一个流**，因为服务器端应用程序使用一个持久的过程；所以 make`setTimeout(function() { $.ajax(...); }, 1000);`不是解决方案。

总而言之，我尝试了几种选择，但简单`iframe`是目前唯一真正有效的解决方案。否则，很可能我错过了一些东西。非常感谢任何想法和建设性的想法。

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T08:04:25.333

长轮询和彗星是选项，但这些都是黑客。您提到的 iframe 方法并不可怕，但如果您需要恢复连接，则会出现一些状态问题。

我会鼓励你重新考虑网络套接字。[github 上有](https://github.com/gimite/web-socket-js)一个可爱的 shim ，它使用 flash（现在已经支持 socket 有一段时间了）作为后备。您可以编写客户端代码，就好像存在 Web 套接字一样，然后 shim 将其添加到不支持它的浏览器中。伟大的！

# postdata - 发送表单数据以及 MPP 文件的内容类型“application/vnd.ms-project”的文件数据

> ID：10346151
> 
> 赞同：0
> 
> 时间：2012-04-27T06:57:59.897
> 
> 标签：postdata, mpxj

我需要与文件流一起发送一些帖子数据。我正在使用以下代码。

此代码取自 [http://technet.rapaport.com/Info/LotUpload/SampleCode/Full_Example.aspx](http://technet.rapaport.com/Info/LotUpload/SampleCode/Full_Example.aspx)。

```
private Stream GetPostStream(string filePath, Dictionary<string, string> paramMap, string boundary) {

        Stream postDataStream = new System.IO.MemoryStream();

        //adding form data
        string formDataHeaderTemplate = Environment.NewLine + "--" + boundary + Environment.NewLine +
            "Content-Disposition: form-data; name=\"{0}\";" + Environment.NewLine + Environment.NewLine + "{1}";
        foreach (KeyValuePair<string, string> pair in paramMap)
        {
            byte[] formItemBytes = System.Text.Encoding.UTF8.GetBytes(string.Format(formDataHeaderTemplate, pair.Key, pair.Value));
            postDataStream.Write(formItemBytes, 0, formItemBytes.Length);
        }

        //adding file data
        FileInfo fileInfo = new FileInfo(filePath);

        string fileHeaderTemplate = Environment.NewLine + "--" + boundary + Environment.NewLine +
        "Content-Disposition: form-data; name=\"{0}\"; filename=\"{1}\"" +
        Environment.NewLine + "Content-Type: application/vnd.ms-project" + Environment.NewLine + Environment.NewLine;

        byte[] fileHeaderBytes = System.Text.Encoding.UTF8.GetBytes(string.Format(fileHeaderTemplate, "UploadMPPFile", fileInfo.FullName));

        postDataStream.Write(fileHeaderBytes, 0, fileHeaderBytes.Length);

        FileStream fileStream = fileInfo.OpenRead();

        byte[] buffer = new byte[1024];

        int bytesRead = 0;

        while ((bytesRead = fileStream.Read(buffer, 0, buffer.Length)) != 0)
        {
            postDataStream.Write(buffer, 0, bytesRead);
        }

        fileStream.Close();

        byte[] endBoundaryBytes = System.Text.Encoding.UTF8.GetBytes("--" + boundary + "--");
        postDataStream.Write(endBoundaryBytes, 0, endBoundaryBytes.Length);

        return postDataStream;
    } 
```

在 JAVA 上的服务器端，我使用 MPXJ 3rd 方库来读取文件数据。但是，我遇到了以下异常。它报告 Header 签名中的一些不匹配错误。

> 嵌套异常是：net.sf.mpxj.MPXJException: Error reading file] with root cause java.io.IOException: Invalid header signature; 读取 0x2D2D2D2D2D2D0A0D，预期 0xE11AB1A1E011CFD0 在 org.apache.poi.poifs.storage.HeaderBlockReader.(HeaderBlockReader.java:125) 在 org.apache.poi.poifs.filesystem.POIFSFileSystem.(POIFSFileSystem.java:153) 在 net.sf。 mpxj.mpp.MPPReader.read(MPPReader.java:84)

任何人都可以帮助我解决这种情况并提出一些解决方案！

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:46:19.937

看起来很可疑，接收端没有将您写入流的标头数据与有效负载数据分开。可能值得尝试以下方法：

1.  通过将 postDataStream.Write 调用替换为对本地文件流的写入，验证您是否正确读取 MPP 文件。验证您创建的文件的内容是否与您正在阅读的文件相同。
2.  将服务器端的接收代码替换为简单地将接收到的数据回显到文件的代码，以便您可以验证正在接收的内容。
3.  更新现有的接收代码以将提取的标头数据和有效负载数据写入单独的文件，以验证两者都被正确接收并且有效负载文件与从客户端发送的内容匹配。

# mysql - 什么是 mysql 中的 DC2Type 数组数据类型

> ID：10346152
> 
> 赞同：24
> 
> 时间：2012-04-27T06:58:02.620
> 
> 标签：mysql, symfony, doctrine-orm

我最近一直在使用 Symfony2 和教义 2，并且已经实现了一种称为 DC2Type:array 的特殊数据类型，某些 Symfony2 角色被保存为。对我来说，它看起来就像一个序列化的 PHP 数组，其中 a 表示元素的总数，i 是数组索引。

该值如下所示：

```
a:15:{i:0;s:32:"ROLE_SONATA_USER_ADMIN_USER_EDIT";i:1;s:32:"ROLE_SONATA_USER_ADMIN_USER_LIST";i:2;s:34:"ROLE_SONATA_USER_ADMIN_USER_CREATE";i:3;s:32:"ROLE_SONATA_USER_ADMIN_USER_VIEW";i:4;s:34:"ROLE_SONATA_USER_ADMIN_USER_DELETE";i:5;s:36:"ROLE_SONATA_USER_ADMIN_USER_OPERATOR";i:6;s:34:"ROLE_SONATA_USER_ADMIN_USER_MASTER";i:7;s:33:"ROLE_SONATA_USER_ADMIN_GROUP_EDIT";i:8;s:33:"ROLE_SONATA_USER_ADMIN_GROUP_LIST";i:9;s:35:"ROLE_SONATA_USER_ADMIN_GROUP_CREATE";i:10;s:33:"ROLE_SONATA_USER_ADMIN_GROUP_VIEW";i:11;s:35:"ROLE_SONATA_USER_ADMIN_GROUP_DELETE";i:12;s:37:"ROLE_SONATA_USER_ADMIN_GROUP_OPERATOR";i:13;s:35:"ROLE_SONATA_USER_ADMIN_GROUP_MASTER";i:14;s:10:"ROLE_ADMIN";} 
```

我想知道这个数据类型是什么？

以下标识符表示什么：

```
s: 
```

我已经搜索了互联网，但没有任何有用的数据。

我还碰到了这个食谱条目 - [http://readthedocs.org/docs/doctrine-orm/en/2.0.x/cookbook/mysql-enums.html](http://readthedocs.org/docs/doctrine-orm/en/2.0.x/cookbook/mysql-enums.html)但没有弄清楚起源。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-05-21T17:29:40.853

这不是数据类型。您可能已经注意到列类型是 LONGTEXT。DC2Type:array 是该字段的注释。

Doctrine 使用字段的注释作为列的元数据存储位置。由于 Mysql 不允许您存储数组，因此 Doctrine 使用 DC2Type:array 作为注释，以便了解如何反序列化内容。

看看下面的链接。

[https://github.com/doctrine/dbal/issues/1614](https://github.com/doctrine/dbal/issues/1614)

从您提到的链接中可以看到，注释 DC2Type:enumvisibility 表示该字段的内容是一个标志，表示该记录是否可见。它根本不是一种新的数据类型。它应该被认为是数据库级别的辅助策略。对于 Doctrine，它是一种自定义数据类型。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-05T12:55:07.060

这只是一个字符串。它的格式是一个序列化的 PHP 数组。s: 指的是数组中每个项目值的大小或长度。

`e.g. s:32:"ROLE_SONATA_USER_ADMIN_USER_EDIT"`

如果计算 ROLE 字符串中的字符，则有 32 个。

希望这可以帮助。

# javascript - UIMenuController 选择菜单项后重新出现

> ID：10346153
> 
> 赞同：1
> 
> 时间：2012-04-27T06:58:05.717
> 
> 标签：javascript, ios, ipad, webview, uimenucontroller

我有一个`UIMenucontroller`，我在其中添加了一个名为“highlight”的菜单项，用于`UIwebview`使用以下 JavaScript 为选定的文本添加突出显示：

```
[webView stringByEvaluatingJavaScriptFromString:@"function load(){window.document.designMode = 'On';window.document.execCommand('backColor', false, 'Yellow');window.document.designMode = 'Off';} load();"]; 
```

但是，当我单击 中的突出显示按钮时`UIMenuController`，它会突出显示所选文本但`menuController`不会关闭（或实际上关闭一微秒然后重新出现）。

我在这里做错了什么？

```
BOOL isYellow = [currentColor isEqualToString:@"rgb(255, 255, 0)"]; 

UIMenuItem *notesMenuItem = [[UIMenuItem alloc] initWithTitle:(isYellow) ? @"Delete Note" : @"Add Note" action:@selector(addNote)]; 
if (!isYellow) { 
    [[UIMenuController sharedMenuController] setMenuItems:[NSArray arrayWithObjects:notesMenuItem,nil]]; } 
else { 
    [[UIMenuController sharedMenuController] setMenuItems:[NSArray arrayWithObjects:nil]]; 
} 
```

# ios - 管理两个单元格之间的交换而不是更改其他 UITableViewcells 的 NSIndexpath

> ID：10346158
> 
> 赞同：2
> 
> 时间：2012-04-27T06:58:28.523
> 
> 标签：ios, ios4, uitableview

我知道这是 UITableView 处于编辑模式时重新排列 tableviewcells 的默认属性，用户只需重新排序由 UITableViewController 处理的行。

根据 Apple Doc：[重新排序行](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/ManageReorderRow/ManageReorderRow.html)

现在我想要做的是，当我将单元格拖到其他单元格上时，后端单元格不应该自动重新排列，只是我放置拖动单元格的单元格应该重新排列，一种**在两个单元格之间交换**。

为了更好地理解，请参考下图。我应该能够将**Jones 转移到 Room1 并且 tableview 控制器应该能够自动将 Smith2 转移到 Room3。**

![在此处输入图像描述](../Images/0956d72aea6a73674df11a3251598bd3.png)

*以下是我正在使用的委托方法：*

```
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath {
    return YES;
}

- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath {

    NSString *temp = [roomstoringArray objectAtIndex:sourceIndexPath.row];
    [roomstoringArray removeObjectAtIndex:sourceIndexPath.row];

    [roomstoringArray insertObject:temp atIndex:destinationIndexPath.row];

   // [temp release];

} 
```

**问题是：**

1.  当我将单元格拖到其他单元格上时，如何阻止其他单元格自动重新排列。
2.  当一个用来将单元格拖到其他单元格上时，没有一个委托方法会被调用，只有 当一个单元格放在它上面时调用的方法是**moveRowAtIndexPath 。**因此，即使无法检查某些条件，也没有在现有的 TableView 中找到此增强的任何范围。

TableView 是否有任何属性，我可以在其中停止这种行为以执行两个单元格之间的交换，仅在其余行保持相同 indexPath 的情况下执行。Alos，如果有的话，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T11:59:38.837

对于您提到的问题，请从[此处检查 UITableView Delegates。](http://developer.apple.com/library/ios/documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UITableViewDelegate/tableView:targetIndexPathForMoveFromRowAtIndexPath:toProposedIndexPath:)
以下方法对您有帮助。

> **targetIndexPathForMoveFromRowAtIndexPath**
> **canMoveRowAtIndexPath**

[**对于 Swap b/w 两行，您可以通过这个答案**](https://stackoverflow.com/questions/15748316/how-can-swap-row-at-fromindex-to-toindex-in-uitableview)得到想法。[](https://stackoverflow.com/questions/15748316/how-can-swap-row-at-fromindex-to-toindex-in-uitableview)

# c# - 如何为管理员提供注销在线用户的选项

> ID：10346163
> 
> 赞同：0
> 
> 时间：2012-04-27T06:58:43.473
> 
> 标签：c#, silverlight, asp.net-membership, wcf-ria-services

在基于 asp.net 成员角色的安全系统中，有没有办法强制注销在线用户？

想象一下用户在线并在silverlight（WCF RIA）等客户端应用程序上进行会话。现在，如果管理员去编辑特定于用户的数据，并且用户在管理员之后更新相同的数据。管理员应用的所有更改都将丢失。管理员有没有办法在更改他/她的数据之前强制注销用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T15:46:25.487

mmm not tried, but what's about putting an HttpInspector and clear the cookie that identify the session ?

# iphone - 无法使用核心数据检索数据

> ID：10346165
> 
> 赞同：3
> 
> 时间：2012-04-27T06:58:49.907
> 
> 标签：iphone, objective-c, ios, xcode, core-data

我在我的应用程序中使用 coredata 来存储数据。我必须在一个视图控制器中添加数据并在另一个视图控制器中检索它。我尝试了以下代码，但它不起作用。

```
//addViewController.m

-(IBAction)save:(id)sender
{

   CoreDataOneAppDelegate  *appDelegate = [[UIApplication sharedApplication] delegate];
   NSManagedObjectContext *context = [appDelegate managedObjectContext];
   NSManagedObject *newContact;
   newContact = [NSEntityDescription insertNewObjectForEntityForName:@"Employee"
              inManagedObjectContext:context];
   [newContact setValue:name.text forKey:@"name"];
   [newContact setValue:amount.text forKey:@"amount"];
   name.text = @"";
   amount.text = @"";
//label
  status.text = @"saved";
  NSError *error;
  [context save:&error];
} 
```

我想检索值并将它们显示在 tableView

```
//retrieveViewController.m

 - (void)viewDidLoad
{
    objects = [[NSArray alloc]init];
    CoreDataOneAppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    NSManagedObjectContext *context = [appDelegate managedObjectContext];
    NSEntityDescription *entityDesc = [NSEntityDescription entityForName:@"Employee" 
            inManagedObjectContext:context];
    NSFetchRequest *request = [[NSFetchRequest alloc] init];
   [request setEntity:entityDesc];
    NSError *error;
    objects = [context executeFetchRequest:request 
                                 error:&error];
   [request release];
   [super viewDidLoad];
}

//tableView

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
return  [objects count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
labelOne = [[UILabel alloc]initWithFrame:CGRectMake(5, 11, 110, 21)];
labelTwo = [[UILabel alloc]initWithFrame:CGRectMake(230, 11, 70, 21)];

static NSString *cellIdentifier = @"CellIdentifier";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:cellIdentifier]autorelease];
}

[cell.contentView addSubview:labelTwo];
[cell.contentView addSubview:labelOne];

 NSManagedObject *matches = nil;
 matches = [objects objectAtIndex:indexPath.row];
    NSString *str1=[NSString stringWithFormat:@"%@",[matches valueForKey:@"name"]];        
    labelOne.text = str1;
    NSString *str2=[NSString stringWithFormat:@"%@",[matches valueForKey:@"amount"]];        
    labelTwo.text = str2;

return cell;
} 
```

我收到 EXC_BAD_ACCESS 错误。我尝试使用 NSZombieEnabled 并收到以下错误。

```
2012-04-27 11:59:18.153 CoreDataOne[4370:207] *** -[_PFArray objectAtIndex:]: message sent to deallocated instance 0x5931e40 
```

如果在 cellForRowAtIndexPath 中编写我在 viewDidLoad 中编写的代码，但如何声明 numberOfRows，我能够检索这些值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:04:25.447

将 MutableArray 中的值存储在您要检索值的视图 didload 中。然后在您的表格视图中使用它。将 noof Rows 声明为数组计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:06:28.590

看起来你没有使用 ARC。我认为您需要在 viewDidLoad 中保留获取请求的结果（不要忘记在 dealloc 中释放它）。此外，您通过分配/初始化一个数组然后覆盖它来泄漏。

# ajax - cakephp ajax 分页只工作一次 - 不评估脚本？

> ID：10346167
> 
> 赞同：0
> 
> 时间：2012-04-27T06:59:07.140
> 
> 标签：ajax, cakephp

我按照 cakephp 网站上的教程进行操作，但使用 ajax 进行分页只能工作一次 - 内容已更新并且没问题。但是我第二次点击一些页面链接，整个页面被重新加载——我认为当 ajax 刷新内容时 click() 事件处理程序不会再次绑定——我不知道为什么......我正在使用这个：

```
$this->Paginator->options(array(
    'update' => '#content',
    'evalScripts' => true
)); 
```

当我在源代码中加载页面时，有：

`<a href="/final/books/index/page:9/sort:id/direction:asc" id="link-458631432" rel="prev">« Previous</a>`

```
 $(document).ready(function (){
         $("#link-925538478").bind("click", function (event) {
             $.ajax({dataType:"html", success:function (data, textStatus){
                 $("#content").html(data);}, url:"\/final\/books\/index\/page:10\/sort:id\/direction:desc"});
                 return false;});
             ... 
```

例如，当我单击下一页（第一次）时，所有内容都会刷新（链接hrefs也可以正常工作）但脚本没有重新加载，因此我认为没有绑定点击事件，再次点击下一页只是使用链接。

这很奇怪，因为我在分页链接之后添加了这个：

```
<script>
    $(document).ready(function (){ 
        alert('yes'); 
    });
</script> 
```

并在第一次 ajax 刷新后显示警报......我设置了这个东西。`<?php echo $this->Js->writeBuffer(); ?>`在最后...

- - - - - - - - - -编辑

我认识到它不是分页器 - 对于以下 2 个链接：

```
<?php echo $this->Js->link('link1', array('author' => 'abc'), array('update' => '#content')); ?>
<?php echo $this->Js->link('link2', array('author' => '123'), array('update' => '#content')); ?> 
```

它是一样的-当我单击link1它的ajax时，然后当我单击link2时会正常重新加载-因此在ajax刷新后与脚本评估有关...那可能是什么？

我正在像这样设置 JSHelper：

```
var $helpers = array('Js' => array('Jquery')); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T23:29:04.517

我想到了！！！这是因为 ajax 请求将布局设置为 app/View/Layouts/ajax.ctp 而 ajax.ctp 是：

```
<?php echo $this->fetch('content'); ?> 
```

我不得不添加这一行

```
<?php echo $this->Js->writeBuffer(); ?> 
```

到 ajax.ctp 编写 java 脚本（因此 ajax 链接在 ajax 请求后工作）。

现在分页工作完美！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T08:38:54.873

Cake php Ajax Paginator 似乎无法正常工作。我也有类似的问题。

我会推荐你​​使用 cakephp 插件[Cakephp-DataTable](https://github.com/tigrang/cakephp-datatable)

这个插件已经实现了分页，默认情况下它具有大部分功能。他们还提供了文档，如果您在实施中发现任何困难，请查看[问题部分](https://github.com/tigrang/cakephp-datatable/issues/5#issuecomment-5229179)

此外，开发人员反应迅速，如果您有任何插件，可以得到澄清。

# mvvm-light - 从子到父的 MVVM Light 消息传递

> ID：10346168
> 
> 赞同：0
> 
> 时间：2012-04-27T06:59:08.327
> 
> 标签：mvvm-light

是否可以从子视图模型中为 ObservableCollection 提高属性更改？我有一个子视图模型，它从父视图模型的 ObservableCollection 中插入一个新项目，我需要在该集合上 raisepropertychanged 以刷新绑定到它的列表。我需要的是在该列表中查看已添加的新项目。谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-25T03:48:07.123

您可以使用消息服务将值从一个视图/视图模型/类发送和注册到任何视图/视图模型/类。您可以使用 like 您可以在发送和注册消息时使用令牌。

假设您必须将消息从 ViewModel 传递给 ABCView 那么您可以像这样使用消息传递..

例如：

```
Messenger.Defalut.Send<ObservableCollection<string>>(obj,"ForAbcView"); 
```

在 ABCView 你可以像这样注册：

```
Messenger.Default.Register<ObservableCollection<string>>(this,"ForAbcView",(b)=>{ //Some Code }); 
```

使用 Token 时，Messenger Sender 将只查找具有相同令牌的 Register。它只调用具有相同令牌的方法。

这样您就可以将收藏发送到您想要的任何地方。

# objective-c - 如何管理 xcode 项目中的消息？

> ID：10346173
> 
> 赞同：0
> 
> 时间：2012-04-27T06:59:20.817
> 
> 标签：objective-c, xcode, message

我是目标c的新手。

我想知道在 xcode 项目中处理消息（或字符串格式）的最常用方法是什么。我的意思是，将所有消息字符串或格式放在一个文件中以便轻松管理它。

谁能给我一些建议？

谢谢~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:28:57.403

您是否查看过本地化选项？为您的应用程序或程序国际化做好准备通常是一个好主意。它的工作方式是拥有一个文件`Localizable.strings`，其中您为每个“文本宏”定义了确切的文本。这些`strings`文件（每种语言都有一个版本）的格式非常简单：

```
// in en.lproj 
"Hello" = "Hello, World!"; 

// in de.lproj
"Hello" = "Hallo, Welt!" 
```

只需确保在您的代码中，您始终将这种格式用于显示在用户界面中任何位置的文字字符串：

```
label.text = NSLocalizedString(@"Hello", @"Optional comment"); 
```

# matlab - matlab 布尔运算符

> ID：10346176
> 
> 赞同：0
> 
> 时间：2012-04-27T06:59:37.047
> 
> 标签：matlab, boolean, ascii, boolean-logic

我对 MATLAB 布尔运算符有疑问。

非 ASCII 范围：

*   0 - 2
*   128以上

仅当上述范围内没有字符时，if 条件才成立。

```
if any( out.autoc < 128 & out.autoc ~= 0 & out.autoc ~= 1 & ...
        out.cprom < 128 & out.cprom ~= 0 & out.cprom ~= 1 )    
    fprintf(file_1, '%s,' , out.autoc);
    fprintf(file_1, '%s,' , out.cprom);
    fprintf(file_1, '\r\n');
else
    display(fileName);
end 
```

当我执行以下操作时会出现问题：

```
if any( out.autoc < 128 & out.autoc > 2 & ...
        out.cprom < 128 & out.cprom > 2 )
    fprintf(file_1, '%s,' , out.autoc);
    fprintf(file_1, '%s,' , out.cprom);
    fprintf(file_1, '\r\n');
else
    display(fileName);
end 
```

它没有按预期工作 - 条件似乎一直都是错误的。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:01:53.223

首先，您指定“ASCII 范围”为 [0, 2] 和 [129, 255]。据我所知，标准 ASCII 是 [0, 127]，包括一些 30 多个控制字符。

接下来，您说“超过 128”，然后用“ `< 128`”检查。这意味着高于 127，而不是 128——对于 128 和 129，它都是错误的，我认为这不是你想要的，因为你说“高于 128”。但是，据我回忆，ASCII 并没有达到 128——它是从 0 到 127 的 7 位格式，包括 0 到 127。并且 127 应该是“删除”，所以我不确定在实践中是否包括 127 问题。

同样，您的第二个块有“ `> 2`”，它不包括 0、1 和 2（2 不大于 2）。重要的是，您的第一个块*不*排除 2-仅 0 和 1。2 显然是“文本开头”，所以如果所有 ASCII 字符串都有它，我不会感到惊讶，这可以解释为什么第二个条件总是错误的。

# sql - 如何在 SQL 中选择可选参数

> ID：10346177
> 
> 赞同：1
> 
> 时间：2012-04-27T06:59:37.150
> 
> 标签：sql, join, oracle10g, nvl

我正在尝试使用绑定变量在 sql 查询中传递强制和可选参数。

像这样的条件，如果我输入（在 WHERE CLAUSE 中）强制参数（带有一些值）和可能是 EMPTY 的可选参数（这意味着它应该是空白）作为绑定变量，它应该显示一些满足强制参数条件的行。但是如果我没有输入强制参数并且只输入了可选参数，它不应该显示任何行。因为强制参数为空。我应该如何做到这一点：我的查询是：

```
select employee_id,hire_date 
from employees
where employee_id between  :from_emp_id   and  :to_emp_id      
  and  hire_date.......?(what?)** 
```

我应该如何处理 HIRE_DATE，如果hire_date 为空，那么它将替换为 sysdate 并返回行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T07:27:23.780

```
...
and hire_date = nvl( :hire_date, hire_date) 
```

如果hire_date 与 :hire_date 参数匹配，或者如果 :hire_date 作为 null/空值传入，则此表达式的计算结果为 true

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:40:46.853

我们可以使用 CASE 来实现这一点。

```
create table Employee (employee_id int, hire_date datetime null)

insert into Employee (employee_id, hire_date)
select 1, '2011-01-01'
union all
select 2, '2012-03-01'
union all
select 3, '2011-10-01'
union all
select 4, null

declare @hiredate datetime

set @hiredate = '2011-10-01 00:00:00.000'

select * from Employee where isnull(hire_date, GETDATE()) = case 
when (@hiredate is null) then isnull(hire_date, GETDATE()) Else @hiredate End

set @hiredate = null
select * from Employee where isnull(hire_date, GETDATE()) = case 
when (@hiredate is null) then isnull(hire_date, GETDATE()) Else @hiredate End 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T11:51:12.790

假设hire_date 是一个NOT NULL 字段，那么您可以执行以下操作：

```
and (:hire_date is null or hire_date = :hire_date) 
```

# ajax - 为什么我不能设置像 dojo.store.JsonRest 这样的 Dojo Deferred 属性？

> ID：10346182
> 
> 赞同：0
> 
> 时间：2012-04-27T07:00:14.793
> 
> 标签：ajax, dojo, deferred

**为什么我不能将 Deferred 对象的（自定义用户定义的）属性设置为同一个 Deferred 对象返回的承诺？**我认为这是可能的，因为[`dojo.store.JsonRest`它](http://download.dojotoolkit.org/release-1.7.2/dojo-release-1.7.2/dojo/store/JsonRest.js)：

```
var results = xhr("GET", {
    url: this.target + (query || ""),
    handleAs: "json",
    headers: headers
});
results.total = results.then(function(){
    var range = results.ioArgs.xhr.getResponseHeader("Content-Range");
    return range && (range=range.match(/\/(.*)/)) && +range[1];
});
return QueryResults(results); 
```

我必须做一些非常相似的事情，但是我链接了一个额外的延迟对象，因为我需要将我的 JSON 输入转换为 QueryResults() 期望的格式。如果我将该承诺分配给我的 Deferred 对象的属性，它会导致`undefined`. 但是，如果我将承诺分配给常规变量，则分配有效。不幸的是，QueryResults 需要分配属性。

我想我已经将问题归结为`xhr()`and返回的承诺之间的差异`xhr().then()`。请检查[此 jsFiddle](http://jsfiddle.net/Leftium/DPrX6/)的控制台输出。

**有什么区别，我该如何解决？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T22:42:36.490

您无法更改属性的直接原因是`promise`对象[被冻结](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/freeze)：

> 也就是说，防止向其中添加新属性；防止现有属性被删除；并防止更改现有属性或其可枚举性、可配置性或可写性。本质上**，对象实际上是不可变的**。

Dojo 文档解释了为什么 Promise 被冻结：

> 该`.then()`调用返回一个表示回调执行结果的新承诺。**回调永远不会影响原始承诺的价值。**

您可以更改`Deferred`返回的属性的原因`xhr()`是

> **`dojo.Deferred`是一种类型，`promise`**它提供了通过成功结果或错误来实现承诺的方法。

实际上，promise 的`Deferred`is stored 是 Deferred 的属性`Deferred.promise`，它也是被冻结的，`Deferred.then()`只是链接到`Deferred.promise.then()`.

我不会推荐它，但如果你坚持改变`promise`你可以通过`lang.delegate()`：

```
my_deferred = lang.delegate(my_deferred); 
```

我稍微修改了您的 jsFiddle 以澄清上述内容：http: [//jsfiddle.net/phusick/N3J7M/](http://jsfiddle.net/phusick/N3J7M/)。

# android - 避免 android 清除我的静态字段

> ID：10346185
> 
> 赞同：0
> 
> 时间：2012-04-27T07:00:28.417
> 
> 标签：android

似乎android SDK自动清除静态文件，因为它需要内存，我怎样才能**避免**特定的静态文件被android设备清除...

```
public static ArrayList<PackageInfo> applications = new ArrayList<PackageInfo>(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T07:04:55.567

AFAIK 你无法真正避免这些情况。有许多替代方法，例如

1.  子类化“应用程序”类并在那里添加您的值。但是当 android 需要更多内存时，这也可以设置为 null。

2.  更好的解决方案是使用 sqlite 存储。您可以确保您的数据不会被清除。

我会选择选项2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:13:32.130

您可以将数据保存在共享首选项或 sqlite 数据库中，或者您可以尝试使用[参考（强烈推荐）](http://neverfear.org/blog/view/150/Strong_Soft_Weak_and_Phantom_References_Java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T07:24:41.860

SQLite 方便且有用。避免将容器设为静态，效率低下。

这是一个例子。

[sqlite 示例](http://www.androidhive.info/2011/11/android-sqlite-database-tutorial/)

我希望它有用。

如果您打算使用静态字段，请改用 bundle 来存储它。

[这是一个关于捆绑的例子](https://stackoverflow.com/questions/151777/how-do-i-save-an-android-applications-state)

# iphone - 如何使用 iPhone 中的相机测量物体之间的距离？

> ID：10346186
> 
> 赞同：-5
> 
> 时间：2012-04-27T07:00:30.200
> 
> 标签：iphone, ios, xcode4

我想使用 iPhone 的相机来测量两辆行驶中的汽车之间的距离。这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T15:28:35.123

用你的手指。如果您有一个知道两点之间距离的设置，则可以将其用作比率

# java - 如何实现 ExecutorService 以轮换执行任务？

> ID：10346187
> 
> 赞同：7
> 
> 时间：2012-04-27T07:00:32.673
> 
> 标签：java, multithreading, threadpool

我正在使用带有[固定线程池的](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool%28int%29)[java.util.concurrent.ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)来执行任务列表。我的任务列表通常在 80 - 150 左右，并且我将随时运行的线程数限制为 10，如下所示：

```
ExecutorService threadPoolService = Executors.newFixedThreadPool(10);

for ( Runnable task : myTasks ) 
{     
    threadPoolService.submit(task); 
} 
```

我的用例要求即使已完成的任务也应再次重新提交给*ExecutorService但只有在所有**已*提交的任务都得到服务/完成时才应再次执行/接受。也就是说，基本上，提交的任务应该轮流执行。因此，在这种情况下不会有任何一个`threadPoolService.shutdown()`或`threadPoolService.shutdownNow()`调用。

我的问题是，如何实现*ExecutorService*服务轮换任务？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-27T07:07:54.113

ThreadPoolExecutor 为 afterExecution 提供了一个扩展点，您可以在其中将作业放回队列的末尾。

```
public class TaskRepeatingThreadPoolExecutor extends ThreadPoolExecutor {

    public TaskRepeatingThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue<Runnable> workQueue) {
        super(corePoolSize, maximumPoolSize, keepAliveTime, unit, workQueue);
    }

    @Override
    protected void afterExecute(Runnable r, Throwable t) {
        super.afterExecute(r, t);
        this.submit(r);
    }
} 
```

当然，在没有 's 方便的工厂方法的帮助下，您必须做更多的工作来自己实例化它`ExecutorService`，但是构造函数很简单，可以理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:14:08.637

答案更多地与用于 的实例的*工作队列*`ExecutorService`的实现有关。所以，我建议：

1.  First choose an implementation of [`java.util.concurrent.BlockingQueue`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html) ([an example](https://stackoverflow.com/questions/5642760/can-we-use-blockingqueue-to-implement-circular-buffer)) that provides a *circular queue* functionality. **NOTE**, the reason `BlockingQueue` has been chosen is that to *wait* until the next task is provided to queue; so, in case of *circular + blocking* queue, you should be careful how to provide the same behavior and functionality.

2.  Instead of using `Executors.new...` to create a new `ThreadPoolExecutor` use a [direct constructor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ThreadPoolExecutor.html) such as

> `public ThreadPoolExecutor(int corePoolSize, int maximumPoolSize, long keepAliveTime, TimeUnit unit, BlockingQueue<Runnable> workQueue)`

This way, unless you command the executor to `shutdown`, it will try to fetch the next task from the queue for execution from its *work queue* which is a *circular* container for tasks.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T07:45:29.917

I suggest the following solution which completely uses functionality existing in the standard library concurrency utils. It uses a `CyclicBarrier` with a task decorator class and a barrier action which re-submits all tasks:

```
import java.util.ArrayList;
import java.util.List;
import java.util.concurrent.BrokenBarrierException;
import java.util.concurrent.CyclicBarrier;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

public class Rotation {

    private static final class RotationDecorator implements Runnable {
        private final Runnable          task;
        private final CyclicBarrier barrier;

        RotationDecorator( Runnable task, CyclicBarrier barrier ) {
            this.task = task;
            this.barrier = barrier;
        }

        @Override
        public void run() {
            this.task.run();
            try {
                this.barrier.await();
            } catch(InterruptedException e) {
                ; // Consider better exception handling
            } catch(BrokenBarrierException e) {
                ; // Consider better exception handling
            }
        }
    }

    public void startRotation( List<Runnable> tasks ) {
        final ExecutorService threadPoolService = Executors.newFixedThreadPool( 10 );
        final List<Runnable> rotatingTasks = new ArrayList<Runnable>( tasks.size() );
        final CyclicBarrier barrier = new CyclicBarrier( tasks.size(), new Runnable() {
            @Override
            public void run() {
                Rotation.this.enqueueTasks( threadPoolService, rotatingTasks );
            }
        } );
        for(Runnable task : tasks) {
            rotatingTasks.add( new RotationDecorator( task, barrier ) );
        }
        this.enqueueTasks( threadPoolService, rotatingTasks );
    }

    private void enqueueTasks( ExecutorService service, List<Runnable> tasks ) {
        for(Runnable task : tasks) {
            service.submit( task );
        }
    }

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T11:22:23.583

You could simply check that all the tasks have been executed and resubmit them once it is the case, like this for example:

```
 List<Future> futures = new ArrayList<>();
    for (Runnable task : myTasks) {
        futures.add(threadPoolService.submit(task));
    }
    //wait until completion of all tasks
    for (Future f : futures) {
        f.get();
    }
    //restart
    ...... 
```

**EDIT**
It seems you want to resubmit a task as soon as it gets completed. You could use an [ExecutorCompletionService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorCompletionService.html) which enables you to retrieve tasks as and when they get executed, - see below a simple example with 2 tasks that get resubmitted a few times as soon as they are completed. Sample output:

> Task 1 submitted pool-1-thread-1
> Task 2 submitted pool-1-thread-2
> Task 1 completed pool-1-thread-1
> Task 1 submitted pool-1-thread-3
> Task 2 completed pool-1-thread-2
> Task 1 completed pool-1-thread-3
> Task 2 submitted pool-1-thread-4
> Task 1 submitted pool-1-thread-5
> Task 1 completed pool-1-thread-5
> Task 2 completed pool-1-thread-4

```
public class Test1 {

    public final ConcurrentMap<String, String> concurrentMap = new ConcurrentHashMap<>();
    public final AtomicInteger retries = new AtomicInteger();
    public final Object lock = new Object();

    public static void main(String[] args) throws InterruptedException, ExecutionException {
        int count = 0;
        List<Runnable> myTasks = new ArrayList<>();
        myTasks.add(getRunnable(1));
        myTasks.add(getRunnable(2));
        ExecutorService threadPoolService = Executors.newFixedThreadPool(10);
        CompletionService<Runnable> ecs = new ExecutorCompletionService<Runnable>(threadPoolService);
        for (Runnable task : myTasks) {
            ecs.submit(task, task);
        }
        //wait until completion of all tasks
        while(count++ < 3) {
            Runnable task = ecs.take().get();
            ecs.submit(task, task);
        }
        threadPoolService.shutdown();
    }

    private static Runnable getRunnable(final int i) {
        return new Runnable() {

            @Override
            public void run() {
                System.out.println("Task " + i + " submitted " + Thread.currentThread().getName() + "  ");
                try {
                    Thread.sleep(500 * i);
                } catch (InterruptedException ex) {
                    System.out.println("Interrupted");
                }
                System.out.println("Task " + i + " completed " + Thread.currentThread().getName() + "  ");
            }
        };
    }
} 
```

# jquery - 我的 html 页面在页面呈现期间显示 html 元素

> ID：10346188
> 
> 赞同：1
> 
> 时间：2012-04-27T07:00:43.890
> 
> 标签：jquery, html

我有一些带有标签的页面。每当我单击这些选项卡时，html 都需要一些时间来呈现。看看我上传的这段视频，了解我的意思：[http ://screencast.com/t/9cgWWAQD2Qff](http://screencast.com/t/9cgWWAQD2Qff)

正如您在此视频中看到的那样，当单击选项卡时，我们会看到蓝色链接大约 0.5 秒。我想避免看到它。

有没有办法只在页面上一切就绪时才显示渲染的 html？或者类似的东西？

这是我的代码：

```
@using WebUI.Areas.Admin.ViewModels
@using WebUI.App_LocalResources

@{
    Html.EnableClientValidation(true);
    Html.EnableUnobtrusiveJavaScript(true);

    var controller = ViewContext.RouteData.Values["controller"].ToString().ToLower();
    var tabNumber = 0;    
    var tabItems = new List<TabItem>() {
        new TabItem{ Index = 0, Id = "reporting", DisplayText = UserResource.Reporting, Controller = "Reporting", Href = Url.Content("~/Admin/Reporting/Index") },
        new TabItem{ Index = 1, Id = "user", DisplayText = UserResource.Users, Controller = "User", Href = Url.Content("~/Admin/User/Index") },
        new TabItem{ Index = 2, Id = "materialpacking", DisplayText = UserResource.Packings, Controller =  "MaterialPacking", Href = Url.Content("~/Admin/MaterialPacking/Index") },
        new TabItem{ Index = 3, Id = "stop", DisplayText = UserResource.Stops, Controller =  "Stop", Href = Url.Content("~/Admin/Stop/Index") },
        new TabItem{ Index = 4, Id = "schedule", DisplayText = UserResource.Schedule, Controller =  "Schedule", Href = Url.Content("~/Admin/Schedule/Index") },
        new TabItem{ Index = 5, Id = "vehicle", DisplayText = UserResource.Vehicles, Controller =  "Vehicle", Href = Url.Content("~/Admin/Vehicle/Index") },
        new TabItem{ Index = 6, Id = "company", DisplayText = UserResource.Companies, Controller =  "Company", Href = Url.Content("~/Admin/Company/Index") },
        new TabItem{ Index = 7, Id = "budgettypesite", DisplayText = UserResource.BudgetTypeSite, Controller =  "BudgetTypeSite", Href = Url.Content("~/Admin/BudgetTypeSite/Index") },
        new TabItem{ Index = 8, Id = "contact", DisplayText = UserResource.Contacts, Controller =  "Contact", Href = Url.Content("~/Admin/Contact/Index") }
    };

    var selected = tabItems.SingleOrDefault(x => x.Controller.Equals(controller, StringComparison.InvariantCultureIgnoreCase));
}

<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" content="" />
        <title>Admin | @ViewBag.Title</title>

        <link type="text/css" rel="stylesheet" href="@Url.Content("~/Areas/Admin/Content/Site.Admin.css")" />    
        <link type="text/css" rel="stylesheet" href="@Url.Content("~/Content/bootstrap.min.css")" />
        <link type="text/css" rel="stylesheet" href="@Url.Content("~/Content/themes/base/jquery.ui.all.css")" />

        <script type="text/javascript" src="@Url.Content("~/Scripts/jQuery/jquery-1.7.1.js")"> </script>
        <script type="text/javascript" src="@Url.Content("~/Scripts/jQuery/jquery.unobtrusive-ajax.min.js")"> </script>
        <script type="text/javascript" src="@Url.Content("~/Scripts/jQuery/jquery.validate.min.js")"> </script>    
        <script type="text/javascript" src="@Url.Content("~/Scripts/jQuery/jquery.validate.unobtrusive.min.js")"> </script>   
        <script type="text/javascript" src="@Url.Content("~/Scripts/jQuery/jquery-ui-1.8.17.js")"> </script>        
        <script type="text/javascript" src="@Url.Content("~/Scripts/jQuery/jquery.ui.datepicker-fr.js")"> </script>
        <script type="text/javascript" src="@Url.Content("~/Scripts/jQuery/jquery.ui.datepicker-nl-BE.js")"> </script>
        <script type="text/javascript" src="@Url.Content("~/Scripts/jQuery/jquery.maskedinput-1.3.min.js")"> </script>
        <script type="text/javascript" src="@Url.Content("~/Scripts/jQuery/bootstrap-modal.js")"> </script>

        <script type="text/javascript" src="@Url.Content("~/Scripts/DialogForm.js")"> </script>
        <script type="text/javascript" src="@Url.Content("~/Scripts/main.js")"> </script>

        <!-- Pulled from http://code.google.com/p/html5shiv/ -->
        <!--[if lt IE 9]>
            <script src="//html5shim.googlecode.com/svn/trunk/html5.js"> </script>
        <![endif]-->

        <script type="text/javascript">
            $(document).ready(function () {
                $("#tabs").tabs();
                $(".tabLink").click(function () {
                    document.location = $(this).attr("data-url") + $(this).attr("href");
                });            
                $("#tabs").tabs('option', 'selected', @(selected == null ? 0 : selected.Index) );
            });
        </script>       

    </head>

    <body>    

        <header>
            <div class="float-left">
                <div id="logo">
                    <img src="@Url.Content("~/Areas/Admin/Content/pictures/admin-logo.png")" alt="" />
                </div>
            </div>

            <div class="float-right">     
                <div class="backToClient">
                    @Html.ActionLink("Retour à l'interface client", "DetectExistingRequest", "General", new { area = "" }, new { @class = "btn" })
                </div>
                <div class="menuLanguage">                        
                    @Html.Partial("_LanguageBarPartial")
                </div>                 
            </div>
        </header>

        <div id="wrapper">
            <div id="tabs">
                <ul> 
                    @foreach (TabItem item in tabItems)
                    {
                        <li><a class="tabLink" href="#@item.Id" data-url="@item.Href">@item.DisplayText</a></li>                                            
                    }
                </ul>    
                @foreach (TabItem item in tabItems)
                {
                    <div id="@item.Id">
                        @{ tabNumber++; }
                        @if (controller.Equals(item.Controller)) { break; }
                    </div>                        
                }
                @RenderBody()
            </div>
            @foreach (TabItem item in tabItems.Skip(tabNumber))
            {                
                <div id="@item.Id"></div>                                        
            }
        </div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:09:05.387

由于您已经在使用 jquery，您可以将正文样式设置为：

`<body style="display:none">`

或者在你的 CSS 中：

```
body { display: none; } 
```

然后添加以下javascript：

```
$(document).ready( function() {
$('body').show()
}) 
```

这会隐藏页面，直到所有元素都被加载然后显示它们。请记住，如果您的网站很重，这可能会导致加载时间变慢。

**jQuery 参考资料：**

*   [。准备好（）](http://api.jquery.com/ready/)

*   [。显示（）](http://api.jquery.com/show/)

**非 js 支持：**

要解决未启用 javascript 的用户可能遇到的任何问题，您可以使用 `<noscript>`头脑中的标签恢复到原始加载样式：

```
<noscript>
  <style>
    body { display: block !important; }
  </style>
</noscript> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:04:15.797

您可以放置`<body style="display:none">`​​，然后使用 jQuery，在文档准备好时，将正文更改为可见。

# c++ - 如何使用 getnameinfo 而不是 gethostbyname？

> ID：10346194
> 
> 赞同：15
> 
> 时间：2012-04-27T07:01:49.510
> 
> 标签：c++, sockets, gcc, warnings, cross-compiling

在代码中：

```
if ((host = (struct hostent*) gethostbyname(address) ) == 0) // address is a string 
```

在 4.5.x gcc 上交叉编译（通用臂架构）时我收到警告：

```
(.text+0x1558): warning: gethostbyname is obsolescent, use getnameinfo() instead. 
```

[获取](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738532%28v=vs.85%29.aspx)名称信息是：

```
int WSAAPI getnameinfo(
  __in   const struct sockaddr FAR *sa,
  __in   socklen_t salen,
  __out  char FAR *host,
  __in   DWORD hostlen,
  __out  char FAR *serv,
  __in   DWORD servlen,
  __in   int flags
); 
```

它有更多参数......我对此感到困惑，我只需要它像 gethostbyname 一样工作。要传递什么参数以使其像使用 gethostbyname 一样简单愚蠢？

最后这是我的尝试：

```
struct sockaddr_in servAddr;
struct hostent *host;        /* Structure containing host information */

/* open socket */
if ((handle = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP)) < 0)
    return LILI_ERROR;

memset(&servAddr, 0, sizeof(servAddr));
servAddr.sin_family      = AF_INET;
servAddr.sin_addr.s_addr = inet_addr(address.ptr());
servAddr.sin_port        = htons(port);

char servInfo[NI_MAXSERV];
if ( ( host = (hostent*) getnameinfo(
                 (struct sockaddr *) &servAddr
                 ,sizeof (struct sockaddr)
                 ,address.ptr(), address.size()
                 ,servInfo, NI_MAXSERV
                 ,NI_NUMERICHOST | NI_NUMERICSERV )  ) == 0)
    return LILI_ERROR;

if (::connect(handle, (struct sockaddr *) &servAddr, sizeof(servAddr)) < 0)
    return LILI_ERROR; 
```

它编译良好，启动时没有分段错误，但我无法将我的服务器与它连接:(

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-05-19T05:55:50.963

`gethostbyname()`进行名称→IP查找。它应该替换为**`getaddrinfo()`**，它可以做同样的事情。

**这意味着警告是完全错误的。**getnameinfo() 是 gethostbyaddr() 的替代品，用于 IP→名称查找。相反。

名称→IP：`gethostbyname()`，`getaddrinfo()`
IP→名称：`gethostbyaddr()`，`getnameinfo()`

较新的函数可以做更多的事情：它们处理 IPv6*并且*可以将诸如“http”之类的字符串转换为 80（端口）。将来，他们还可以确定是否应将 TCP 用于所讨论的服务或 SCTP。界面准备就绪。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-27T07:27:26.580

Beej's解释得很好。[`gethostbyname()`](http://beej.us/guide/bgnet/output/html/multipage/gethostbynameman.html)不适用于 IPV6，因此您应该[`getnameinfo()`](http://beej.us/guide/bgnet/output/html/multipage/getnameinfoman.html)改用。您所要做的就是填写所需的信息，即

```
getnameinfo(
    &sa,             // Pointer to your struct sockaddr
    sizeof sa,       // Size of this struct
    host,            // Pointer to hostname string
    sizeof host,     // Hostname string buffer length
    service,         // Pointer to service name string
    sizeof service,  // Service name string buffer length
    0                // No flags given
); 
```

**编辑**：经过一番研究，我发现

```
getnameinfo(&sa, sizeof(sa), hostname, size_hostname, NULL, 0, 0); 
```

应该足够了。

**编辑#2**我注意到您正在尝试使用`getnameinfo`作为主机名的返回值。但这是不正确的，主机名保存在提供的`host`指针中。返回值指示操作是否足够。另请查看[手册页](http://www.kernel.org/doc/man-pages/online/pages/man3/getnameinfo.3.html)。

# java - 如何在从 java servlet/应用程序调用时从 jsp 页面获取数据？

> ID：10346198
> 
> 赞同：-1
> 
> 时间：2012-04-27T07:02:03.490
> 
> 标签：java, jsp, servlets

我想将书名发送到 jsp 页面，我希望它为我提供这本书的价格..这可能吗？？？而且我必须从 java 应用程序或 servlet 调用 jsp 页面。

所以整个过程是...

用户给出书名，书名被发送到本地主机中的一个jsp页面，该页面将价格发送到Java应用程序，该应用程序被中继到客户端gui...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:05:23.713

您需要构建一个简单的 Java Web 应用程序。尝试使用[appfuse](http://appfuse.org/display/APF/Home)建立一个简单的骨架并添加所需的功能。

# json - 如何在网站页面上显示 Shopify 购物车值（Shopify 网站之外）

> ID：10346201
> 
> 赞同：3
> 
> 时间：2012-04-27T07:02:08.353
> 
> 标签：json, api, shopify

我正在尝试执行以下操作：我正在构建一个标准的 HTML/PHP 网站。我们将在网站上提供产品。当有人点击“添加到购物车”时，用户将被引导到 Shopify 并提供他们的产品信息，并且该产品将被添加到购物车（到目前为止没问题......完成了）。当他们在浏览器中单击返回以返回站点（从而离开 Shopify 购物车）时，我需要能够在标题中显示站点上的产品信息。诸如“5 个产品 | $168.00”之类的东西......基本上允许网站访问者（不在 shopify 中，而是在我们构建的 HTML 网站中）查看他们购物车中的值，然后在他们想要的时候结帐或查看购物车。

我遇到了这个：[http ://api.shopify.com/cart.html#show](http://api.shopify.com/cart.html#show)

我对 JSON 有点陌生，正在寻找我正在尝试做的事情的例子，但没有看到它们。

任何建议或有人指出我正确的方向都会很棒。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-07-20T02:50:40.673

Shopify 实际上提供了一个 JSONP 格式的文件，假设您来自同一个域（以访问识别个人用户的 Shopify cookie）。

换句话说：

假设一个 Wordpress 网站位于 www.example.com

随附的“商店网站”将位于 shop.example.com（确保此域是您在 Shopify 端的主域）

要从您的 Wordpress 站点访问购物车并使用 jQuery 将其处理到您的模板或页面中，您可以调用：

```
jQuery.ajax({

    url: "//shop.example.com/cart.json",
    dataType: "jsonp",
    success: function( data ) {
        /* Template Code here */
    },
    error: function( jxhr, status, err ) {
        console.log("Error, status = " + status + ", err = " + err);
    }

}); 
```

JSONP 格式的文件允许通过一些 Javascript 技巧进行跨域 AJAX 调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T00:19:37.410

这两个页面应该可以帮助您：

[从远程网站添加到购物车](http://wiki.shopify.com/Adding_to_the_Cart_from_a_remote_website)

我不确定您现在正在做什么以添加到购物车，但这是“正确”的做法。鉴于您已经完成了这项工作，我不会太担心。

要获取购物车，您应该使用[AJAX API](http://wiki.shopify.com/Ajax_API)。此 API 允许您在不使用您链接到的 REST 版本的情况下为当前用户拉购物车。那个是为进行更重的提升而设计的（例如，获取所有当前活动的推车）。AJAX 版本更简单，专为前端使用而设计。简单来说，只需调用

`http://[the-shop].myshopify.com/cart.js`

您将以 JSON 格式取回当前会话的购物车内容。它看起来像这样：

```
{
"items": [
    {
        "handle": "aquarius",
        "line_price": 6000,
        "requires_shipping": true,
        "price": 2000,
        "title": "aquarius - medium",
        "url": "/products/aquarius",
        "quantity": 3,
        "id": 30104042,
        "grams": 181,
        "sku": "",
        "vendor": "the candi factory",
        "image": "http://static.shopify.com/s/files/1/0040/7092/products/aquarius_1.gif?1268045506",
        "variant_id": 30104042
    },
    {
        "handle": "amelia",
        "line_price": 4000,
        "requires_shipping": true,
        "price": 2000,
        "title": "amelia - medium",
        "url": "/products/amelia",
        "quantity": 2,
        "id": 30104012,
        "grams": 200,
        "sku": "",
        "vendor": "the candi factory",
        "image": "http://static.shopify.com/s/files/1/0040/7092/products/2766315_da1b.png?1268045506",
        "variant_id": 30104012
    }
],
"requires_shipping": true,
"total_price": 10000,
"attributes": null,
"item_count": 5,
"note": null,
"total_weight": 947 
```

}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-15T03:56:04.433

万一有人遇到同样的问题。Kameron的回答解决了我的问题。如果您将 dataType 设置为“jsonp”，请记住将“.js”更改为“.json”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-03T02:09:43.300

在尝试了许多不同的方法（包括以前的答案）之后，这是我发现唯一有效的方法。该策略是在父域上设置一个包含所需信息（在本例中为购物车中的商品数量）的 cookie，以便具有相同父域的另一个网站可以访问它。

它需要 Shopify 商店的自定义域，即不适用于 xxxx.myshopify.com。

将新的 Javascript 文件（例如`cart.js`）添加到 Shopify 代码资产中：

```
function extractDomain(host) {
    let parts = host.split(".");
    parts.shift();
    return parts.join(".");
}

function updateCartCountCookie() {
    fetch('/cart.json')
        .then((data) => {
            data.json().then((cart) => {

                let myDate = new Date();
                myDate.setMonth(myDate.getMonth() + 1);

                document.cookie = 'kh_cart_item_count=' + cart.item_count.toString() + ';expires=' + myDate
                    + ';domain=.' + extractDomain(location.hostname) + ';path=/';
            });
        });
}
/*
 This event fires after cart changes. This is theme dependent and may need to be different.
*/
document.addEventListener("theme:loading:end", () => {
    updateCartCountCookie();
});
/* update on initial load */
document.addEventListener('DOMContentLoaded', () => {
    updateCartCountCookie();
} 
```

将其包含在您的主题模板中：

```
 <script src="{{ 'cart.js' | asset_url }}" defer></script> 
```

现在，cookie`kh_cart_item_count`将设置在父域上，其中包含购物车中的商品数量。

在托管在同级域上的外部网站中，在您希望购物车出现的任何位置添加此 html 片段：

```
<script>
    function getCookieValue(a) {
        var b = document.cookie.match('(^|;)\\s*' + a + '\\s*=\\s*([^;]+)');
        return b ? b.pop() : '';
    }
    document.addEventListener("DOMContentLoaded", () => {
        let count = getCookieValue("kh_cart_item_count");
        let el = document.getElementById("kh-cart-count")
        if (el) {
            el.innerText = count.toString();
            if (!!count && parseInt(count) !== 0)
                el.classList.remove("invisible");
        }
    });
</script>
<style>
</style>
<a href="https://shop.example.com/cart" class="kh-cart-count ml-auto mr-1">

    <svg class="icon icon--cart" viewBox="0 0 27 24" role="presentation">
        <g transform="translate(0 1)" stroke-width="2" stroke="grey" fill="none" fill-rule="evenodd">
            <circle stroke-linecap="square" cx="11" cy="20" r="2"></circle>
            <circle stroke-linecap="square" cx="22" cy="20" r="2"></circle>
            <path d="M7.31 5h18.27l-1.44 10H9.78L6.22 0H0"></path>
        </g>
    </svg>
    <span id="kh-cart-count" class="kh-cart-count invisible">0</span>
</a> 
```

并将这个 css 添加到适当的 css 文件中：

```
/* shopping cart icon style */
.kh-cart-count {
  width: 4rem;
  height: 4rem;
  display: flex;
  justify-content: right;

  span {
    font-size: 0.8rem;
    font-weight: bold;
    background: #ff0000;
    color: #fff;
    padding: 1px 1px 1px;
    -webkit-border-radius: 20px;
    -moz-border-radius: 20px;
    border-radius: 20px;
    height: 1.2rem;
    width: 1.2rem;
    margin-left: 1.5rem;
    justify-content: center;
    align-items: center;
    position: absolute;
  }

  svg {
    width: 2rem;
    height: 2rem;
    position: absolute;
  }
} 
```

如果在另一个窗口中更新购物车时，如果网站在一个窗口中打开，这不会自动更新，但会在每次页面刷新时更新（或者您可以使用例如轮询它`window.setInterval(updateCartCount, 10000);`- 有一个 cookie 更改事件的规范草案但它尚不可用。）

结果如下所示：

[![带号码的购物车](../Images/c2804069a0a7e9e84e576741d8109cfa.png)](https://i.stack.imgur.com/LT2uS.png)

您显然可以扩展它以传递除购物车项目计数之外的其他数据。

# iphone - UIPopovercontroller 中的多视图导航

> ID：10346207
> 
> 赞同：0
> 
> 时间：2012-04-27T07:02:39.557
> 
> 标签：iphone, ios, ipad, uinavigationcontroller, uipopovercontroller

我在主视图中有一个按钮..当她点击那个按钮时它会弹出popoverview，在popover里面我有一个uiviewcontrolle，当用户点击popover里面的tableviewcell时它导航到下一页，然后用户点击任何下一页的按钮，，，它导航到另一个视图，都在弹出窗口内..一切正常..但在我的最后一个视图中......我需要转到主页，但我可以看到主页在弹出窗口中，我想关闭该弹出窗口并转到主页，我尝试了很多解决方案对我没有用，这是我关于这个问题的第二个问题......请让我这样做......第一个链接问题是[第一个问题有我的代码](https://stackoverflow.com/questions/10327400/how-to-dismiss-a-form-sheet-model-view-in-iphone#comment13298806_10327400)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:51:49.607

在主视图的 viewDidLoad 中添加通知

```
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(dismissThePopover:) 
                                             name:@"dismissThePopover" 
                                           object:nil]; 
```

在主视图中写入函数

```
-(void)dismissThePopover:(id)sender
{
     if ([popoverController isPopoverVisible]) {
            [popoverController dismissPopoverAnimated:YES];
        }
} 
```

最后发布通知，您必须关闭弹出框控制器，例如

```
-(IBAction)cancelButtonPressed:(id)sender
{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"dismissThePopover" object:nil];
} 
```

# cocoa-touch - 如何将位置标签栏向上移动？

> ID：10346209
> 
> 赞同：-1
> 
> 时间：2012-04-27T07:02:45.777
> 
> 标签：cocoa-touch, uitabbarcontroller, storyboard

我需要使用超类 UITabBarController 创建自定义标签栏。但我不知道如何更改标签栏项目的位置。

现在我通过创建子类 UIView 和零组件来确定这个问题。！[现在我有]而且我看不到标签栏，没有更有用的故事板工具。在运行模式下，我有我的工具栏。但它并不完美:(效果。请帮忙？可可的第一天:)！[运行模式中的图像]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T20:19:20.543

您可以转到“文件”->“新建项目”并选择“选项卡式应用程序”作为模板。这为您完成了标签式应用程序的所有基础工作！见下图：

![在此处输入图像描述](../Images/74dafdd00f7e5dc75b5c68f5ccdcc1ef.png)

# objective-c - 我应该如何从另一个类（从该视图触发）更新 NSTableView？

> ID：10346215
> 
> 赞同：0
> 
> 时间：2012-04-27T07:03:37.463
> 
> 标签：objective-c, notifications, nsurlconnection, nstableview

我有一个类用于使用 NSURLConnection 下载大文件。我有另一个类是我的 NSTableView。

更新 NSTableView 以显示下载速度和进度的最佳方法是什么？我应该在下载开始时使用通知并传递速度和百分比吗？我将如何获得细胞？我是否每次都必须遍历整个 tableView 以寻找匹配项（标题或其他内容）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T00:25:22.607

我通过将字典中的 NSTableCellView （以及有关显示内容的其他信息）传递给我的班级来做到这一点。

# java - 如何在 JTable 中动态添加图像

> ID：10346219
> 
> 赞同：4
> 
> 时间：2012-04-27T07:04:07.777
> 
> 标签：java, image, swing, jtable

```
BufferedImage img = null;
        ImageIcon icon = null;
        try {
            img = ImageIO.read(new File("resources/" + imageString));           
        } catch (IOException e) {           
            e.printStackTrace();
        }
        img = ImageScaler.getScaledImage(img, 35, 35);
        icon = new ImageIcon(img);
table.setValueAt(icon, 1, 0); 
```

这是我的代码。但不显示图像。我需要一些帮助来找出我哪里出错了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T07:08:27.107

*   你必须阅读[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

*   您可以直接将 Icon 或 ImageIcon 放入[JTable 的 Cell](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#editrender)

*   为了获得更好的帮助，请尽快使用[SSCCE](http://sscce.org/)编辑您的问题，演示您对 JTable 的问题

# java - 在侦听器类中配置的套接字服务器阻止运行的 tomcat

> ID：10346221
> 
> 赞同：2
> 
> 时间：2012-04-27T07:04:18.060
> 
> 标签：java, spring, serversocket

我试图创建一个关于套接字通信的 Web 项目，但 tomcat 卡在运行中。我将服务器类放在监听器类中，以便在项目启动时启动。但是我遇到了一个问题，似乎 spring config xml 没有启动。
我猜服务器类一直在监听阻止了tomcat的运行。
我怎么解决这个问题？
web.xml的主要代码

```
 <listener>
    <listener-class>socket.ServerListener</listener-class>
</listener>
<servlet>
    <servlet-name>context</servlet-name>
    <servlet-class>org.springframework.web.context.ContextLoaderServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<context-param>
<param-name>contextConfigLocation</param-name>
<param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:25:15.707

如果你在调用你的监听器的同一个线程中调用accept()，Tomcat当然会被阻塞。在您的侦听器方法返回之前，Tomcat 无法继续。

道德：不要那样做。使用单独的线程。

# java - FieldSet readString 方法不读取前导空格

> ID：10346222
> 
> 赞同：4
> 
> 时间：2012-04-27T07:04:20.163
> 
> 标签：java, string, spring, spring-batch

我正在从文件中读取记录并插入数据库。

我正在使用 DB2 数据库。

记录是这样的：

```
 abc    pqr  abcd 
```

所以在 abc 之前，记录的开头也有几个空格。

我正在使用 SpringBatch 程序和内部字段集映射器读取文件，我正在打印从文件中读取的字符串：

```
System.out.println("*" + fieldSet.readString("FULL_RECORD") + "*"); 
```

但是，我得到的结果是：

```
*abc    pqr  abcd* 
```

这意味着前导空格没有得到保留。

我的配置文件中的 linetokenizer 是：

```
<beans:property name="lineTokenizer">
  <beans:bean class="org.springframework.batch.item.file.transform.FixedLengthTokenizer">
    <beans:property name="columns" value="1-241"/>
    <beans:property name="names" value="FULL_RECORD"/>
  </beans:bean>
</beans:property> 
```

我正在使用默认线映射器类并将上面的标记器作为其属性传递。

```
org.springframework.batch.item.file.mapping.DefaultLineMapper 
```

如何在每条记录之前保留前导空格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T18:58:49.877

看看代码

1.  DefaultFieldset 的 readString 方法使用
2.  字符串.trim()

只是改变

```
System.out.println("*" + fieldSet.readString("FULL_RECORD") + "*"); 
```

也

```
System.out.println("*" + fieldSet.readRawString("FULL_RECORD") + "*"); 
```

请参阅[DefaultFieldSet.readRawString()](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/item/file/transform/DefaultFieldSet.html#readRawString%28java.lang.String%29)

> 从具有给定“名称”的列中读取字符串值，包括尾随空格（不要修剪）。

# asp.net - 导入项目时为 ASP.NET Web 窗体生成部分类

> ID：10346231
> 
> 赞同：1
> 
> 时间：2012-04-27T07:04:56.007
> 
> 标签：asp.net, webforms

我在 VS2008 中创建了一个新的 ASP.NET 网站。我正在尝试重建旧的 VS.NET 应用程序 (.NET 1.0)。我从旧项目（添加现有项目）中导入了所有 WebForms，但最终出现了大量错误，例如：

“当前上下文中不存在名称‘lblMessage’”

此项目中的部分类没有每个 UI 元素的对象定义。我希望有一种方法可以生成这些，而不必尝试手动编写 500 个对象定义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T20:50:24.900

我最终找到了解决此问题的方法。通过手动创建设计器页面 ('mypage.aspx.designer.cs') 文件，然后在标记页面 ('mypage.aspx') 上执行编辑，Visual Studio 将自动重建所有引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:28:53.260

尝试在 Context Menu ， WebApplication 项目文件中使用 ConvertToWebApplication 。这将生成带有控件声明的 aspx.designer.cs。

# python - lambda self: 做什么

> ID：10346239
> 
> 赞同：8
> 
> 时间：2012-04-27T07:05:31.707
> 
> 标签：python, lambda, functional-programming

[这个答案](https://stackoverflow.com/a/1194012/180174)解释了如何动态创建测试用例。

答案代码：

```
class Tests(unittest.TestCase):
    def check(self, i, j):
        self.assertNotEquals(0, i-j)

for i in xrange(1, 4):
    for j in xrange(2, 6):
        def ch(i, j):
            return lambda self: self.check(i, j)
        setattr(Tests, "test_%r_%r" % (i, j), ch(i, j)) 
```

我已经测试过并且它有效，但我无法弄清楚*如何*？

我很难理解`lambda self:`这里的魔法，主要是：

1.  此处使用的 lambda 是否与执行完全相反的操作（即使用一个未知*的额外*`functools.partial()`参数创建包装函数）
**   是`self`一个有意义的关键字还是`lambda spam`同样有效？*   那个 lambda 的评估点是什么？*   为什么在es 范围`.check()`之外完全没问题？`class`*   *如果没有*lambda ，你如何做到这一点？- 如果我理解正确，[你应该可以不用`lambda`](https://stackoverflow.com/a/3252425/180174)（更不用说我同意 Guido 和 Alex 的观点，这**是**一个令人眼花缭乱的东西，我*想*不用 :)*

 ** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T13:35:13.413

首先：从函数返回 lambda 以防止修改后的值`i`并将`j`在以后使用。

与以下内容进行比较：

```
for i in xrange(1, 4):
    for j in xrange(2, 6):
        setattr(Tests, "test_%r_%r" % (i, j), lambda self: self.check(i, j)) 
```

这不会按预期工作，因为所有 lambda 将共享相同的命名空间，并将使用循环结束后的`i`值`j`。如果我们使用单独的函数调用，我们每次都会引入一个新的闭包，该闭包捕获函数被调用的时间点的`i`值`j`。

`i`我们可以通过将和的当前值保存`j`为 lambda 的默认参数来实现相同的目的。为了更好地衡量，让我们也使用`itertools.product`来避免嵌套循环：

```
from itertools import product
from operator import methodcaller

for i, j in product(range(1, 4), range(2, 6)):
  setattr(Tests, "test_%r_%r" % (i, j),
          lambda self, i=i, j=j: self.check(i, j)) 
```

> 此处使用的 lambda 是否与 functools.partial() 完全相反（即使用一个未知的额外参数创建包装函数）

并不真地。`check(i, j)`它只是在作为参数给出的任何内容上调用该方法。这在这里用于向`Tests`类动态添加方法。

> self 是一个有意义的关键字还是 lambda spam 也能正常工作？

`spam`也可以。他们之所以选择`self`这里是因为约定俗成，因为 lambda 代表一种方法。

> 那个 lambda 的评估点是什么？

只要`test_[i]_[j]()`在 的实例上被调用`Tests`。

> 为什么 .check() 在类范围之外完全没问题？

因为它在一个 lambda 中，所以以后只会以 的实例`Tests`作为`self`参数调用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T13:50:41.857

`a_function = lambda x: do_something_with(x)`

相当于

```
def a_function(x):
    return do_something_with(x) 
```

在您的特定示例中，创建的函数是实例方法。因此，例如，您可以编写：

```
class Tests:
...
   test_1_2 = lambda self: self.check(1, 2) 
```

这相当于：

```
class Tests:
...
   def test_1_2(self):
       return self.check(1, 2) 
```

现在，由于标识符是动态生成的，因此使用`setattr`.

* * *

> 1.  此处使用的 lambda 是否与执行完全相反的`functools.partial()`操作（即使用一个未知的额外参数创建包装函数）

不，不是。实际上`partial`也可以在这里使用。

```
test_1_2 = lambda self: self.check(1, 2) 
```

会变成

```
test_1_2 = partial(Tests.check, i=1, j=2) 
```

> 1.  self 是一个有意义的关键字还是 lambda spam 也能正常工作？

实例方法的第一个参数总是需要是实例。**约定**是命名该参数，`self`但您可以使用任何其他名称。我不建议这样做，因为它会使您的代码更难阅读和理解。

> 1.  那个 lambda 的评估点是什么？

`lambda`创建匿名函数，与任何函数一样在调用时对其进行评估。

> 1.  为什么 .check() 在类范围之外完全没问题？

它不是。它的`self.check()`，哪里`self`是`Tests`类的一个实例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-27T13:27:39.090

lambda 返回一个函数。`self`是它的参数，并且 i 和 j*包含*在其中

因此，ch(i, j) 是**i 和 j**的函数，它*返回***self**的函数。

self 在这里没有任何神奇的含义，因为在 Python 中什么都没有——每个变量和函数都是显式的，除了一些内置函数。但是一旦这些方法被附加到类， self 就成为他们的第一个参数。

这表示

*   在循环之后 Tests 类获得了多个名为 check_i_j 的方法

*   它们中的每一个都有值 i 和 j*包含*在其中

*   他们每个人都有他们的第一个参数`self`，这是很好的，因为它们是在类内部定义的，它们是实例方法，因此它们的第一个参数应该按照惯例称为 self*

# java - 如何从jsp页面调用birt报告？

> ID：10346245
> 
> 赞同：-1
> 
> 时间：2012-04-27T07:06:13.840
> 
> 标签：java, jsp, birt

我已经使用 birt 工具生成了 jasper 报告。它在 birt 报告查看器中运行良好。但是现在我想从 jsp 页面运行 birt 报告。所以说任何用户点击提交按钮，应该运行该 birt 报告。

由于我是碧玉报告的新手，我对此一无所知..请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T08:38:29.063

**在您的 web.xml 文件中添加此标记**

```
<jsp-config>
    <taglib>
        <taglib-uri>/birt.tld /taglib-uri>
        <taglib-location>/WEB-INF/tlds/birt.tld /taglib-location>
    </taglib>
</jsp-config> 
```

**在你的jsp中使用这个标签库** 

```
<%@ taglib uri="/WEB-INF/tlds/birt.tld" prefix="birt"%> 
```

**将此代码添加到 jsp 中所需的位置**

```
<birt:viewer id="birtViewer" reportDesign="bank_detail_report.rptdesign" pattern="run" height="600" width="1000" format="pdf" scrolling="yes" showParameterPage="false">
    <birt:param name="param1" value='<%=request.getParameter("txtParam1")%>'></birt:param>
    <birt:param name="param2" value='<%=request.getParameter("txtParam1")%>'></birt:param>
</birt:viewer> 
```

# android - 当我使用 onAttachedToWindow 时无法全屏活动

> ID：10346252
> 
> 赞同：0
> 
> 时间：2012-04-27T07:06:41.083
> 
> 标签：android, android-activity, android-theme, android-notification-bar, android-windowmanager

我正在尝试使用以下代码覆盖主页键并全屏显示活动。锁定主页键工作正常，但无法隐藏通知栏（无法全屏显示活动）。

```
public class ScreenLockDemo extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.screenlock);

    }

@Override
public void onAttachedToWindow()
{  
  this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
    super.onAttachedToWindow();  

}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub
    if(keyCode==KeyEvent.KEYCODE_BACK){
        return true;
    }
    if(keyCode==KeyEvent.KEYCODE_HOME){
        return true;
    }

    return super.onKeyDown(keyCode, event);
} 
```

}

**AndroidManifest.xml：**

```
 <activity
        android:name="com.antivirus.antitheft.ScreenLockDemo"
         android:configChanges="touchscreen|keyboard|keyboardHidden|navigation|orientation"
        android:screenOrientation="portrait"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen"
       >              
    </activity> 
```

![从上面的代码中取出，它的布局顶部很可爱，如 img 所示。][1]

我也在尝试使用处理程序设置类型，它全屏显示活动，但它无法覆盖菜单键。请帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:14:50.053

将活动设置为全屏的最简单的解决方案是在清单中进行设置。例如，将以下内容添加到清单中的活动部分：

```
android:theme="@android:style/Theme.NoTitleBar.Fullscreen" 
```

因此它应该看起来像：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".blahActivity"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar.Fullscreen" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:39:53.273

使用以下代码解决问题

```
@Override
 public void onAttachedToWindow() {
  // TODO Auto-generated method stub
     super.onAttachedToWindow();  

     handler.postDelayed(mUpdateUiMsg, 100);
    //this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);     
 }

 public boolean onKeyDown(int keyCode, KeyEvent event) {
  // TODO Auto-generated method stub
  if(keyCode==KeyEvent.KEYCODE_BACK){
   return true;
  }
  if(keyCode==KeyEvent.KEYCODE_HOME){
   return true;
  }

  return super.onKeyDown(keyCode, event);
 }

 private Runnable mUpdateUiMsg = new Runnable() {
        public void run() {

            getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);

         }
    }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T08:29:18.743

使用以下代码解决问题

```
@Override
 public void onAttachedToWindow() {
  // TODO Auto-generated method stub
     super.onAttachedToWindow();  

     handler.postDelayed(mUpdateUiMsg, 100);
    //this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);     
 }

 public boolean onKeyDown(int keyCode, KeyEvent event) {
  // TODO Auto-generated method stub
  if(keyCode==KeyEvent.KEYCODE_BACK){
   return true;
  }
  if(keyCode==KeyEvent.KEYCODE_HOME){
   return true;
  }

  return super.onKeyDown(keyCode, event);
 }

 private Runnable mUpdateUiMsg = new Runnable() {
        public void run() {

            getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);

         }
    }; 
```

就我而言，在覆盖 onAttachedToWindow() 之后，我发现`overridePendingTransition(int enterAnim, int exitAnim)`或

```
<style name="Theme.NoTitleBar.WithColoredSpinners" parent="@android:style/Theme.NoTitleBar">
    <item name="android:spinnerDropDownItemStyle">@style/SpinnerItem.DropDownItem</item>
    <item name="android:windowAnimationStyle">@style/AnimationActivity</item>
</style> 
```

没有用，但是使用这些代码解决了问题，但我还不知道为什么。同样，我不知道该方法`onAttachedToWindow()`做什么以及它的效果如何？

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-27T07:28:00.113

在 setContentView(xml) 之前尝试此代码

```
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
getWindow().requestFeature(Window.FEATURE_NO_TITLE); 
```

希望，这对你有用。

# asp.net - 在内容页面中加载另一个页面在带有 EXT.NET 的 ASP.NET 中不起作用

> ID：10346254
> 
> 赞同：0
> 
> 时间：2012-04-27T07:06:49.883
> 
> 标签：asp.net, master-pages, ext.net

我正在使用 Asp.Net 3.5 和 Ext.Net 1.0。我在我的应用程序中创建了一个母版页（Site.master）和一个内容页（User.aspx），我正在将一个页面（UserManager.aspx）加载到内容页中

如果我将普通的 HTML 标签放入 UserManager.aspx 中可以正常工作，但如果我将 EXt.NET 控件放入其中，我将无法工作..

**母版页**

```
<ext:Panel ID="Panel6" runat="server" Region="Center" CollapseMode="Mini" Margins="0 0 4 4">               
     <Content>                 
        <asp:ContentPlaceHolder ID="cntMainCenter" runat="server">                                
        </asp:ContentPlaceHolder>
      </Content>                                                        
  </ext:Panel> 
```

**内容页**

```
<ext:ButtonGroup ID="ButtonGroup1" runat="server" Title="" Columns="3">
           <Items>
                 <ext:SplitButton ID="SplitButton1" runat="server" 
                          Text="Users" IconCls="add" IconAlign="Top"
                          ArrowAlign="Bottom" Width="60" Scale="Large" RowSpan="3">  
                       <Listeners>
                           <Click Handler="#{panel}.load('UserManager.aspx');" />
                       </Listeners>            
                  </ext:SplitButton>                                                                  
          </Items>
 </ext:ButtonGroup> 
```

**单击 Content Page's Split Button**时，我在内容中加载 UserManager.aspx 页面。

```
<asp:Content ID="Content2" ContentPlaceHolderID="cntMainCenter" runat="server">
<ext:Panel runat="server" ID="panel" BodyBorder="false" Border="true" Title="Panel" >
<Items>

</Items>
 </ext:Panel>
</asp:Content> 
```

**用户管理器页面**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="test.aspx.cs" Inherits="SPA_SCHEDULER.test" %> <%@ Register Assembly="Ext.Net" Namespace="Ext.Net" TagPrefix="ext" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" > <head runat="server">
    <title></title>
     </head> 
      <body> 
          <ext:ResourceManager ID="ResourceManager1" runat="server">
          </ext:ResourceManager>  

          <ext:Panel runat="server" Title="dfdf" Height="100" Width="100"> 
          </ext:Panel> 
        </body> 
</html> 
```

**如果我在 UserManager.aspx 页面中编写 HTML 标签而不是 EXT.Panel，它会正常工作，但如果我编写 EXT.NET 任何控件，它都不会加载**。

![在此处输入图像描述](../Images/010256a99949ddce149716d51d434ff5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T05:39:43.797

为此，您必须使用 iFrame 或合并模式。[http://examples1.ext.net/#/Panel/Basic/AutoLoad/](http://examples1.ext.net/#/Panel/Basic/AutoLoad/)

我推荐你使用 iFrame 模式，它简单易用。

例如试试这个：

```
#{panel}.load({ url:"UserManager.aspx",scripts:true,mode:"iframe",showMask:true }); 
```

# extjs - 在 extjs 中隐藏和取消隐藏具有隐藏子列的列时出错

> ID：10346255
> 
> 赞同：2
> 
> 时间：2012-04-27T07:07:04.883
> 
> 标签：extjs, grid

我有一个带有列的网格

```
 columns: [
        { header: '<b>Agency </b>', dataIndex: 'Agency ', width: 120, align: 'left', sortable: false, flex: 1,
            summaryType: 'count',
            summaryRenderer: function(value) {
                return Ext.String.format('Total');

            }
         },
        { header: '<b>A</b>',
            columns: [

        { header: '<b>B</b> ', dataIndex: 'B', width: 100, sortable: false, align: 'right', hidden: true,
            summaryType: 'sum',
            summaryRenderer: function(value) {
                return (value.toFixed(2) );

            },
            renderer: function(value) {
            return (value.toFixed(2));
            }
        },
        { header: '<b>C</b>', dataIndex: 'C', width: 100, sortable: false, align: 'right', hidden: true,
           summaryType: 'sum',
           summaryRenderer: function(value) {
             return (value.toFixed(2) );
         },
         renderer: function(value) {
             return (value.toFixed(2));
         }
        },
        { header: '<b>D</b>', dataIndex: 'D', width: 120, sortable: false, align: 'right',
            summaryType: 'sum',
            summaryRenderer: function(value) {
                return (value.toFixed(2) );
            },
            renderer: function(value) {
                return (value.toFixed(2));
            }
        }

        ]
        },
        { header: '<b>E</b>',
            columns: [
                { header: '<b>J</b> ', dataIndex: 'J', width: 110, sortable: false, align: 'right', hidden: true ,
                    summaryType: 'sum',
                    summaryRenderer: function(value) {
                        return (value.toFixed(2));
                    },
                    renderer: function(value) {
                        return (value.toFixed(2));
                    }
                },
                { header: '<b>F</b>', dataIndex: 'F', width: 110, sortable: false, align: 'right', hidden: true,
                    summaryType: 'sum',
                    summaryRenderer: function(value) {
                        return (value.toFixed(2));
                    },
                    renderer: function(value) {
                        return (value.toFixed(2));
                    }
                },
                { header: '<b>J </b>', dataIndex: 'J', width: 130, sortable: false, align: 'right',
                    summaryType: 'sum',
                    summaryRenderer: function(value) {
                        return (value.toFixed(2) );
                    },
                    renderer: function(value) {
                        return (value.toFixed(2));
                    }
                }
              ]
        }
     ]
}); 
```

当我尝试隐藏列 E 时，它做得很好，但是当我尝试显示它时，它显示了原来隐藏的子列。

我的隐藏代码是

```
 myGrid.columns[2].setVisible(flase); 
```

显示我正在使用

```
myGrid.columns[2].setVisible(true); 
```

有什么帮助吗？

# iphone - 我想将 pdf 页面添加到 UIPageViewController 视图

> ID：10346258
> 
> 赞同：0
> 
> 时间：2012-04-27T07:07:34.943
> 
> 标签：iphone, pdf, uipageviewcontroller

我是 iPhone 应用程序开发的新手，我正在开发一款 iPad 应用程序开发。在这个应用程序中，我使用的是 UIPageViewController。现在我希望 pdf 文件页面显示 UIPageViewController 视图。如何阅读 pdf 页面以及如何添加 UIPageViewController 请给我一些例子。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T10:54:43.183

您可以将 PDF 页面绘制到 CALayer 或 UIImage。[Apple 甚至有示例代码来展示如何在可缩放 UIScrollview](http://developer.apple.com/library/ios/#samplecode/ZoomingPDFViewer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010281)和页面视图控制器中绘制大型 PDF，我还没有尝试过这个，但可能这个[链接](http://chillysky.com/UIPageViewControllerDemo.zip.)会帮助你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-26T08:58:54.583

Apple 有一个示例代码项目，名为`ZoomingPDFReader`. 这是一个显示 PDF 页面的简单应用程序。将其放入您的应用程序中。跟踪页码，然后显示相应的 PDF 页面。

[你可以在这里](https://github.com/jackhumphries/UIPageViewController-PDF)下载源代码

# jsf-2 - 更新有条件呈现形式的字段

> ID：10346260
> 
> 赞同：0
> 
> 时间：2012-04-27T07:07:40.890
> 
> 标签：jsf-2, primefaces, myfaces

我的问题是，我想有条件地渲染 form2。这与另一个 form1 的 ajax 更新事件发生冲突，这应该触发 form2 的呈现。

```
<h:form id="form1">
    <h:selectOneMenu id="selectedGroupId" label="#{msgs.group_group}" value="#{groupBean.selectedGroupId}">
        <p:ajax event="change" listener="#{groupBean.selectGroupEvent}" update=":form1"/>
        <f:selectItems value="#{groupBean.availableGruppen}" />
    </h:selectOneMenu>
</h:form>

<h:form id="form2" rendered="#{not empty groupBean.groupDto}">
  <p:panelGrid id="groupEditGrid">  
    ...
  </p:panelGrid>
</h:form> 
```

有没有办法在不将渲染条件放在 form2 的组件中的情况下做到这一点？

谢谢
强尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T09:39:08.153

您不能更新不在您页面上的组件。但是您可以将您的表单包装在一个*没有*按条件渲染的表单中，并改为更新包装器`h:panelGroup`。

 *例子：

```
<h:form id="form1">
    <h:selectOneMenu id="selectedGroupId" label="#{msgs.group_group}" 
                     value="# {groupBean.selectedGroupId}">
        <p:ajax event="change" listener="#{groupBean.selectGroupEvent}"
                update=":formWrapper"/>
        <f:selectItems value="#{groupBean.availableGruppen}" />
    </h:selectOneMenu>
</h:form>

<h:panelGroup id="formWrapper>
  <h:form id="form2" rendered="#{not empty groupBean.groupDto}">
    <p:panelGrid id="groupEditGrid">  
      ...
    </p:panelGrid>
  </h:form>
</h:panelGroup> 
```*

# android - 如何在列表视图上设置 onitemclicklistener

> ID：10346267
> 
> 赞同：1
> 
> 时间：2012-04-27T07:08:35.143
> 
> 标签：android, listview, onitemclicklistener

我有一个扩展列表视图的类。我需要在该列表视图上有 onitemclicklistener。以下代码不起作用。我的意思是点击监听器不起作用。如何解决这个问题？

**列表视图.xml**

```
 <ListView
android:id="@android:id/list"
android:layout_width="match_parent"
android:layout_height="fill_parent"
android:layout_marginBottom="47dip"
android:layout_marginTop="47dip" >
</ListView> 
```

**元素.xml**

```
<RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="match_parent"
        android:layout_height="46dp"
        android:gravity="center" >

        <ToggleButton
            android:id="@+id/toggleButton1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:text="ToggleButton"
            android:textOff="Inactive"
            android:textOn="Active" />

        <TextView
            android:id="@+id/label_note"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:layout_centerVertical="true"
            android:layout_marginRight="38dp"
            android:layout_marginLeft="2dip"
            android:layout_toRightOf="@+id/check_note"
            android:text="@+id/label"
            android:textSize="25px" />

        <CheckBox
            android:id="@+id/check_note"
            android:layout_width="30dip"
            android:layout_height="30dip"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:visibility="gone"
            android:button="@drawable/customdrawablecheckbox" />

    </RelativeLayout> 
```

**列表.java**

```
public class List extends ListActivity{
....

public void onCreate(Bundle icicle) {

        this.setContentView(R.layout.listview);
        super.onCreate(icicle);

}
ArrayAdapter<ListModel> adapter = new InteractiveArrayAdapter(
                this, getModel(), false);
        setListAdapter(adapter);

        final ListView list1 = getListView();
        list1.setItemsCanFocus(true);
        list1.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> adapterView, View view, int pos, long l) {
                // TODO Auto-generated method stub
            //  HashMap<String, String> o = (HashMap<String, String>) list1.getItemAtPosition(pos);                   
                Toast.makeText(ContactsNoteList.this, "ID '" +list.get(pos).getName()+" "+list.get(pos).getId().toString() + "' was clicked.", Toast.LENGTH_LONG).show(); 

            }

        });

..}

    private List<ListModel> getModel() {

    for (int i=0;i<3;i++)       
list.add(get("Elem"+i.toString(),i);
            }
        }

        return list;
    }

    private ListModel get(String s1,int Id) {
        return new ListModel(s1,Id);
    } 
```

**InteractiveArrayAdapter.java**

```
InteractiveArrayAdapter extends
        ArrayAdapter<ListModel> {

    private final List<ListModel> list;
    private final Activity context;
    private boolean visibility;
    public InteractiveArrayAdapter(Activity context, List<ListModel> list,boolean visibility) {
        super(context, R.layout.elements, list);
        this.context = context;
        this.list = list;
        this.visibility=visibility;

    }

    static class ViewHolder {
        protected TextView text;
        protected CheckBox checkbox;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;
        if (convertView == null) {
            LayoutInflater inflator = context.getLayoutInflater();
            view = inflator.inflate(R.layout.elements, null);

            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.text = (TextView) view.findViewById(R.id.label_note);
            viewHolder.checkbox = (CheckBox) view.findViewById(R.id.check_note);
            viewHolder.checkbox
                    .setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

@Override
public void onCheckedChanged(CompoundButton buttonView,boolean isChecked) {
                                ListModel element = (ListModel) viewHolder.checkbox.getTag();
                                element.setSelected(buttonView.isChecked());

                            }
                        });
            view.setTag(viewHolder);
            viewHolder.checkbox.setTag(list.get(position));
        } else {
            view = convertView;
            ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));
        }

        ViewHolder holder = (ViewHolder) view.getTag();
        holder.text.setText(list.get(position).getName());
        holder.checkbox.setChecked(list.get(position).isSelected());
        if (visibility==true)
        holder.checkbox.setVisibility(View.VISIBLE);
        else
            holder.checkbox.setVisibility(View.INVISIBLE);
        return view;
    }
} 
```

需要帮忙。谢谢。欣赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:15:22.053

你必须重写类 `onListItemClick()`的方法`ListActivity`

```
@Override
protected void onListItemClick(ListView l, View v, int position, long id) {
//Your code goes here..     
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T07:16:03.630

采用：

```
 view.setOnClickListener(new OnClickListener() {          
            @Override
            public void onClick(View v) {... 
                  Toast.makeText(context,"you clicked item: "+position,Toast.Lenght_LONG).show();
                  //code you want to execute on click of list item...
            }
   });
   return view; 
```

在您的适配器类中。

**编辑**更改示例代码...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T07:15:25.880

把它放在`onCreate()`..

```
ListView mListView = getListView();
mListView .setOnItemClickListener(new OnItemClickListener() {

    public void onItemClick(AdapterView<?> parent, View view, int position,
            long id) {
        // TODO Auto-generated method stub

    }

}); 
```

# r - 设置当前子图

> ID：10346269
> 
> 赞同：3
> 
> 时间：2012-04-27T07:08:39.140
> 
> 标签：r, quantmod

我无法为 add_TA 函数（quantmod 包）设置当前子图。

```
curon = 2

add_TA(x, type = "l",col = "blue", lwd = 2, on=curon) 
```

（在子图 2 上添加一条线）

R给我这个错误：

```
Error in plot_ta(x = current.chob(), ta = get("x"), on = curon, taType = NULL,  : 
 object 'curon' not found. 
```

命令：

```
add_TA(x, type = "l",col = "blue", lwd = 2, on=2) 
```

虽然工作正常。

注意：该问题仅在函数中使用时出现，而不是在全局范围内时出现。这是一个完整的例子：

```
library(quantmod)

test=function(){
x=xts(runif(10),Sys.Date()+1:10)
z=1/x
chart_Series(x)
add_TA(x, type = "l",col = "green", lwd = 2)    #OK
add_TA(z, type = "l",col = "blue", lwd = 2, on=2)   #OK
curon = 2;add_TA(z, type = "l",col = "red", lwd = 2, on=curon)  #FAILS
}

test() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T00:22:14.760

我认为您在未显示的代码中一定有错字，因为它对我有用：

```
library(quantmod)
x=xts(runif(10),Sys.Date()+1:10)
z=1/x

chart_Series(x)
add_TA(x, type = "l",col = "green", lwd = 2)
curon = 2
add_TA(z, type = "l",col = "blue", lwd = 2, on=curon) 
```

（顺便说一句，这就是人们所说的“完全可重现的最小示例”的意思；您可以复制并粘贴到新的 R 会话中。除非对您的问题很重要，否则数据可以是随机的。）

更新：在使用函数时重现了问题，我确实找到了一种解决方法（我认为这是一个 quantmod 错误）。如果你命名你的变量`on`而不是`curon`then 它可以工作：

```
library(quantmod)

test=function(){
x=xts(runif(10),Sys.Date()+1:10)
z=1/x
chart_Series(x)
add_TA(x, type = "l",col = "green", lwd = 2) 
on=2;add_TA(z, type = "l",col = "blue", lwd = 2, on=on)
} 
```

# gwt - 难以在 tomcat 服务器上运行简单的 GWT 应用程序

> ID：10346270
> 
> 赞同：0
> 
> 时间：2012-04-27T07:08:50.623
> 
> 标签：gwt

我正在按照以下步骤创建一个 gwt 应用程序：首先在我的 eclipse(Helios) 中安装 gwt 插件。创建 GWT 项目 添加动态 web 插件到项目项目的属性页面 Facets 选项卡选择动态 Web 模块和 java ok 以应用更改。编写代码，我尝试在服务器 tomcat7 上运行，然后它显示资源不可用。但是当我作为 gwt 的内部服务器运行时，只需右键单击项目并选择作为 Web 应用程序运行。然后它运行成功。所以请帮助在tomcat服务器上运行我的应用程序。谢谢拉胡尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:58:55.707

你编译你的应用程序了吗？（GWT 编译项目）

然后，您可以运行[此](http://pastebin.com/0TJDGSPp)Ant 构建文件并将 WAR 文件部署到您的 Tomcat 服务器上。

# jquery - jsTree 不工作

> ID：10346271
> 
> 赞同：3
> 
> 时间：2012-04-27T07:08:58.780
> 
> 标签：jquery, html, jstree

我是 jQuery 和 jsTree 的新手，我不知道为什么我不能让它工作？使用本教程： [http ://tkgospodinov.com/jstree-part-1-introduction/](http://tkgospodinov.com/jstree-part-1-introduction/)

而这个html / javascript：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="description" content="">
        <title>
            BLA BLA
        </title>
        <base href="/">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <!--
        <link rel="stylesheet" href="css/styles.css">
        -->
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"> </script>
        <script type="text/javascript" src="jquery.jstree.js"></script>
        <script type="text/javascript">                                         
        $(document).ready(function() {
             $("#selector").jstree();
        });                                     
        </script>
        </head>
        <body>
            <div id="selector">
                <ul>
                    <li><a>Team A's Projects</a>
                        <ul>
                        <li><a>Iteration 1</a>
                            <ul>
                                <li><a>Story A</a></li>
                                <li><a>Story B</a></li>
                                <li><a>Story C</a></li>
                            </ul>
                            </li>
                        <li><a>Iteration 2</a>
                        <ul>
                            <li><a>Story D</a></li>
                              </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </body>
</html> 
```

似乎没有任何效果。我收到以下错误：

```
$("#selector").jstree is not a function 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T07:22:07.400

您的示例的工作演示：[JSFiddle1](http://jsfiddle.net/ak4Ed/)和[JSFiddle2](http://jsfiddle.net/J5ZaK/2/)

请检查参考以及您如何称呼它。这棵树应该与您正在寻找的完全一样。

其余所有文档的来源可以在这里找到：http: [//www.jstree.com/](http://www.jstree.com/)

```
<script type="text/javascript" src="http://static.jstree.com/v.1.0pre/jquery.jstree.js"></script> 
```

包括下面提到的文件。在此处查看[演示](http://jsfiddle.net/J5ZaK/2/)。

```
<script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js'></script>

<link rel="stylesheet" type="text/css" href="/css/normalize.css">
<link rel="stylesheet" type="text/css" href="/css/result-light.css">

<script type='text/javascript' src="http://static.jstree.com/v.1.0pre/jquery.jstree.js"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T07:16:08.983

看起来您的浏览器没有正确加载 jstree.js？

您可以尝试从 CDN（内容交付网络）加载 jstree.js，就像通过更改行加载 jquery 一样：

```
<script type="text/javascript" src="jquery.jstree.js"></script> 
```

至

```
<script type="text/javascript" src="http://cachedcommons.org/cache/jquery-jstree/1.0.0/javascripts/jquery-jstree-min.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T07:16:56.793

在我看来，您的代码无法访问该功能`jstree()`。也许 jstree.js 的路径有问题？

```
<script type="text/javascript" src="jquery.jstree.js"></script> 
```

# java - Spring MVC 3 休眠 3.5 BigDecimal JPA 通知

> ID：10346274
> 
> 赞同：0
> 
> 时间：2012-04-27T07:09:18.300
> 
> 标签：java, hibernate, jpa, spring-mvc, extjs

实际上，我使用 spring mvc 3 和 hibernate 3.5 以及 extjs 作为用户界面来开发 Java Web 应用程序；我的问题是，当我的模型类具有像这样的 BigDecimal 属性时

```
import java.math.BigDecimal;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

import org.codehaus.jackson.annotate.JsonAutoDetect;

@JsonAutoDetect
@Entity
@Table(name="Articles")
public class Article {

@Id
@GeneratedValue
@Column(name="IDARTICLE")
private int id;

@Column(name="CODE")
private String code;

@Column(name="DESIGNATION")
private String designation;

@Column(name="PRIX", scale = 19, precision = 4, columnDefinition = "DECIMAL(19,4)")
private BigDecimal prix; 

@Column(name="CPTARTICLE")
private int cptarticle;

@Column(name="IDPARCOM")
private int idparcom;

public int getId() {
    return id;
}
public void setId(int id) {
    this.id = id;
}
public String getCode() {
    return code;
}
public void setCode(String code) {
    this.code = code;
}
public String getDesignation() {
    return designation;
}
public void setDesignation(String designation) {
    this.designation = designation;
}
public BigDecimal getPrix() {
    return prix;
}
public void setPrix(BigDecimal prix) {
    this.prix = prix;
}
public int getCptarticle() {
    return cptarticle;
}
public void setCptarticle(int cptArticle) {
    this.cptarticle = cptArticle;
}
public int getIdparcom() {
    return idparcom;
    }
         public void setIdparcom(int idParcom) {
            this.idparcom = idParcom;
        }
} 
```

当我这样做的时候

```
List<Article> articles = hibernateTemplate.find("from Articles"); 
```

我有 execption 并且在 cosole 中什么都没有，只是这个 Stacks 痕迹

```
Daemon Thread [http-bio-8080-exec-50] (Suspended)   
ArticleService$$FastClassByCGLIB$$1bae6fb8.invoke(int, Object, Object[]) line: not available    
MethodProxy.invoke(Object, Object[]) line: 191  
Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint() line: 692    
Cglib2AopProxy$CglibMethodInvocation(ReflectiveMethodInvocation).proceed() line: 150    
TransactionInterceptor.invoke(MethodInvocation) line: 108   
Cglib2AopProxy$CglibMethodInvocation(ReflectiveMethodInvocation).proceed() line: 172    
Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Object, Method, Object[], MethodProxy) line: 625 
ArticleService$$EnhancerByCGLIB$$f2eb83ca.getArticleList() line: not available  
ArticleController.read() line: 25   
NativeMethodAccessorImpl.invoke0(Method, Object, Object[]) line: not available [native method]  
NativeMethodAccessorImpl.invoke(Object, Object[]) line: not available   
DelegatingMethodAccessorImpl.invoke(Object, Object[]) line: not available   
Method.invoke(Object, Object...) line: not available    
AnnotationMethodHandlerAdapter$ServletHandlerMethodInvoker(HandlerMethodInvoker).invokeHandlerMethod(Method, Object, NativeWebRequest, ExtendedModelMap) line: 174  
AnnotationMethodHandlerAdapter.invokeHandlerMethod(HttpServletRequest, HttpServletResponse, Object) line: 421   
AnnotationMethodHandlerAdapter.handle(HttpServletRequest, HttpServletResponse, Object) line: 409    
DispatcherServlet.doDispatch(HttpServletRequest, HttpServletResponse) line: 771 
DispatcherServlet.doService(HttpServletRequest, HttpServletResponse) line: 716  
DispatcherServlet(FrameworkServlet).processRequest(HttpServletRequest, HttpServletResponse) line: 644   
DispatcherServlet(FrameworkServlet).doGet(HttpServletRequest, HttpServletResponse) line: 549    
DispatcherServlet(HttpServlet).service(HttpServletRequest, HttpServletResponse) line: 621   
DispatcherServlet(HttpServlet).service(ServletRequest, ServletResponse) line: 722   
ApplicationFilterChain.internalDoFilter(ServletRequest, ServletResponse) line: 305  
ApplicationFilterChain.doFilter(ServletRequest, ServletResponse) line: 210  
StandardWrapperValve.invoke(Request, Response) line: 224    
StandardContextValve.invoke(Request, Response) line: 169    
NonLoginAuthenticator(AuthenticatorBase).invoke(Request, Response) line: 472    
StandardHostValve.invoke(Request, Response) line: 168   
ErrorReportValve.invoke(Request, Response) line: 98 
AccessLogValve.invoke(Request, Response) line: 927  
StandardEngineValve.invoke(Request, Response) line: 118 
CoyoteAdapter.service(Request, Response) line: 407  
Http11Processor(AbstractHttp11Processor<S>).process(SocketWrapper<S>) line: 987 
Http11Protocol$Http11ConnectionHandler(AbstractProtocol$AbstractConnectionHandler<S,P>).process(SocketWrapper<S>, SocketStatus) line: 579   
JIoEndpoint$SocketProcessor.run() line: 309 
ThreadPoolExecutor(ThreadPoolExecutor).runWorker(ThreadPoolExecutor$Worker) line: not available 
ThreadPoolExecutor$Worker.run() line: not available 
TaskThread(Thread).run() line: not available 
```

有人能帮帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:20:08.173

这是一个愚蠢的错误，我必须做 List article = hibernateTemplate.find("from Article"); 没有 s 的文章，因为这是类的名称 :-) 不是表的名称。

# svn - SVN ADD 文件我不想要

> ID：10346275
> 
> 赞同：0
> 
> 时间：2012-04-27T07:09:24.617
> 
> 标签：svn, add

我没有使用 SVN 中的排除文件，而是尝试通过以下方式仅在 svn 中添加我想要的文件...

```
>find . | egrep -v ".old|.obsolete|.~|.wmv|.pyc|.done|.lock|.svn" | xargs svn add 
```

仍然在命令之后，我在 SVN 中添加了一些 .wmv

```
>svn status | grep ".wmv"
A       doc/www/home/videos/Tutorial4.wmv
A       doc/www/home/videos/Tutorial5.wmv
A       doc/www/home/videos/Tutorial6.wmv
A       doc/www/home/videos/Tutorial1.wmv
A       doc/www/home/videos/Tutorial2.wmv
A       doc/www/home/videos/Tutorial3.wmv 
```

在文件上打印查找的结果不包含这些文件

```
find . | egrep -v ".old|.obsolete|.~|.wmv|.pyc|.done|.lock|.svn" > temp.txt 
```

有谁知道他们为什么会被添加到我的 SVN 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:40:56.153

看一下[svn:ignore](http://svnbook.red-bean.com/en/1.1/ch07s02.html)选项

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T07:47:18.030

`svn add`默认情况下是递归的，即`svn add doc/www/home/videos`添加所有`*.wmv`文件。要避免这种行为，请尝试以下操作：

```
find . | egrep -v ".old|.obsolete|.~|.wmv|.pyc|.done|.lock|.svn" | xargs svn add --non-recursive 
```

# objective-c - iOS 上的默认文本编码

> ID：10346277
> 
> 赞同：1
> 
> 时间：2012-04-27T07:09:44.003
> 
> 标签：objective-c

我正在创建一个基于 API 服务器的应用程序。服务器当前采用 UTF-8 编码。

与其每次访问 API 时都编写一行代码来重新编码文本，我想我还不如将服务器 API 设置为与应用程序具有相同的文本编码。

唯一的问题是我找不到默认编码！

我在哪里可以找到这些信息，我可以更改应用程序的默认编码吗？

干杯!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T07:33:02.613

没有默认编码。`NSString`内部可以有各种编码。

我知道在 Mac OS X 上，ASCII、UTF-8 和 UTF-16 w/主机字节顺序总是在可能的内部表示中，iOS 应该没有什么不同，尽管我不完全确定。我认为可以安全地假设这`stringWithUTF8String:`不会导致任何额外的重新编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-14T18:50:26.400

NSString 的静态方法将完成这项工作

```
+ (NSStringEncoding)defaultCStringEncoding; 
```

# c++ - 在 C++ for 循环中使用 int 以外的数据类型作为索引值

> ID：10346282
> 
> 赞同：3
> 
> 时间：2012-04-27T07:09:59.860
> 
> 标签：c++, c, loops, type-conversion

我接受来自用户的输入作为浮点值。

该值可以达到“10 的 18 次方”。

下一步涉及找到这个数字的所有除数。为此，我正在执行以下操作：

```
 for(i=2; i<=n/2 ; i++)
      {
        if(n%i==0) 
           v.push_back(i);
      } 
```

这里，n 是用户输入的数字。

问题是 n 是浮点数并且在 if 循环索引中使用它会导致它的值被限制为“10 的 9 次幂”

因此，有什么方法可以使用除 int 之外的数据类型来使用范围“10 的 18 次幂”的值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T07:11:49.500

您可以使用`unsigned long long`2 ^(64)或大约 10 ^(19)

这假定您的编译器支持 64 位整数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T04:24:01.820

问题已得到解答（使用 long long int），但想指出浮点数被称为“浮点数”是有原因的。它们包含一个指数，基本上是小数点的位置，它决定了尾数的精度。这方便地允许您同时表示高精度的小数和低精度的大数，**但不能同时表示两者**。

更多详情：[http ://en.wikipedia.org/wiki/IEEE_754-2008](http://en.wikipedia.org/wiki/IEEE_754-2008)

试试这个：

```
int main(void)
{
    float i = 16777217.0f;
    printf("i = %f\n", i);
    i++;
    printf("i+1 = %f\n", i);
} 
```

w/ 32 位浮点数返回：

```
i = 16777216.000000
i+1 = 16777216.000000 
```

所以今天的问题：如果你有这样的循环，你认为会发生什么？

```
for(float f; f < 20000000; ++f) 
{
    // do stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T07:14:08.437

我认为长双倍应该是可观的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T07:23:20.423

当然你可以使用其他数据类型进行循环，使用 [这里提到的任何类型](http://msdn.microsoft.com/en-us/library/s3f49ktz%28v=vs.80%29.aspx)

# java - 在注入点使用限定符 [@Default] 的类型 [...] 的依赖关系不满足（使用带有 CDI 的 @Stateful EJB）

> ID：10346285
> 
> 赞同：19
> 
> 时间：2012-04-27T07:10:44.920
> 
> 标签：java, ejb-3.0, java-ee-6, cdi, seam3

我有以下代码来管理两种存储库。两个存储库类都继承了一个接口以允许重新初始化其资源。

```
public interface CachingRepository
{
    public void invalidateCache();
} 
```

全局的、应用范围的 repo：

```
@Named("globalRepo")
@ApplicationScoped
public class GlobalRepository implements CachingRepository
{
    private List<Category> categories;

    ...

    @Override
    public void invalidateCache()
    {
        categories = null;
    }

    ...
} 
```

每个用户，会话范围的 repo：

```
@Named("userRepo")
@SessionScoped
//@Stateful         // <- NOTE HERE
public class UserRepository implements CachingRepository, Serializable
{
    private List<MyFile> files;

    @Override
    public void invalidateCache()
    {
        files = null;
    }

    ...
} 
```

将 this（不带`@Stateful`）注入上下文时

```
@Named
@ViewScoped
public class MyHandler implements Serializable
{
    @Inject
    private UserRepository userRepo;

    ...
} 
```

有用。但是，当添加`@Stateful`到`UserRepository`类时，部署失败并出现异常：

```
Caused by: org.jboss.weld.exceptions.DeploymentException: WELD-001408 Unsatisfied dependencies for type [UserRepository] with qualifiers [@Default] at injection point [[field] @Inject private de.company.project.pack.MyHandler.userRepo]
    at org.jboss.weld.bootstrap.Validator.validateInjectionPoint(Validator.java:275)
    at org.jboss.weld.bootstrap.Validator.validateInjectionPoint(Validator.java:244)
    at org.jboss.weld.bootstrap.Validator.validateBean(Validator.java:107)
    at org.jboss.weld.bootstrap.Validator.validateRIBean(Validator.java:127)
    at org.jboss.weld.bootstrap.Validator.validateBeans(Validator.java:346)
    at org.jboss.weld.bootstrap.Validator.validateDeployment(Validator.java:331)
    at org.jboss.weld.bootstrap.WeldBootstrap.validateBeans(WeldBootstrap.java:366)
    at org.jboss.as.weld.WeldContainer.start(WeldContainer.java:83)
    at org.jboss.as.weld.services.WeldService.start(WeldService.java:76)
    ... 5 more 
```

添加 CDI bean 的名称，例如

```
@Inject @Named("userRepo")
private UserRepository userRepo; 
```

导致相同的异常。唯一与之结合使用`@Stateful`的是在 var 声明中使用接口：

```
@Inject @Named("userRepo")
private CachingRepository userRepo; 
```

但是，我可能在这里需要子类功能，因此`CachingRepository`（目前）并不真正需要使用。

**问**：

1.  为什么这没有按预期工作？`UserRepository`var 应该已经确定要实例化哪个类，不是吗？这有什么逻辑？
2.  为什么`@Stateful`EJB 注解在这里会产生如此严重的影响？为什么它本质上迫使我`CachingRepository`在 var 声明中使用接口？

* * *

**请注意**，我使用 Seam 3 Faces 使其`@ViewScoped`成为 CDI 视图范围的 bean，因此手头的问题可能仍然是**CDI-only**。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-30T19:23:32.360

我对这个误导性异常有同样的问题......

通过向您添加`@Stateful`公开接口`UserRepository`的 EJB 方法，`CachingRepository`而无需声明无接口视图。添加`@LocalBean`到`UserRepository`以激活无界面视图。请参阅 EJB 3.1 规范，第 4.9.8 节“会话 Bean 的无接口视图”

> bean 类必须通过其 bean 类定义或在部署描述符中指定它公开一个无接口视图。以下规则适用：
> 
> *   ...
> *   如果 bean 公开了至少一个其他客户端视图，则 bean 通过 bean 类或部署描述符中的 @LocalBean 注释指定它公开一个无接口视图。
> *   ...

我还参考了[这个 stackoverflow](https://stackoverflow.com/questions/7729905/what-is-local-remote-and-no-interface-view-in-ejb)答案以获取有关无界面视图的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-29T06:48:03.790

我有同样的错误。

> 引起：org.jboss.weld.exceptions.DeploymentException：WELD-001408：在注入点 [BackedAnnotatedField] @Inject ...

我这样解决了这个问题：当我收到错误时，我以这种方式使用了 UserTransaction。

```
@Inject
UserTransaction trans; 
```

而不是`@Inject`，我使用`@Resource`注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-07T18:51:44.847

我有同样的问题。

这就是我为解决它所做的：

我必须使用 Wildfly 容器生成我尝试注入的 EJB，如下所示：

```
@ApplicationScoped
    public class Resources {
     private static final String DISCOUNT_SERVICE_ENDPOINT_PROPERTY =
        "services.discount.endpoint";
     private MyServiceImpl myService;
    }

@Produces
 public MyServiceImpl produceMyServiceImpl() {
     if (myService == null) {
         String endpoint = System.getProperty(DISCOUNT_SERVICE_ENDPOINT_PROPERTY);
        JaxWsProxyFactoryBean factory = new JaxWsProxyFactoryBean();
        factory.setServiceClass(MyServiceImpl.class);
        factory.setServiceName(MyService.SERVICE);
        factory.setAddress(endpoint);
        myService = (MyServiceImpl) factory.create();
     }
     return myService; 
```

}

以下是您的standalone-full.xml 文件下的配置。

```
<property name="services.discount.endpoint" value="http://localhost:8080/my_service/MyService/MyServiceImpl"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-21T10:16:48.123

我有同样的问题。我希望这可以帮助某人。

解决问题：

*   右键单击项目
*   点击`Properties`
*   寻找`Project facets`
*   开`Project facets`，激活选项 CDI
*   应用并保存。

现在一切都很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-06T12:12:14.380

也许您应该在 bean 类上添加非参数化构造函数。我在 Jboss 文档上读到：具有不带参数的构造函数（或使用注释 @Inject 指定的构造函数）的具体 Java 类是一个 bean。

# c++ - C ++中的两种形式有区别吗？

> ID：10346287
> 
> 赞同：6
> 
> 时间：2012-04-27T07:11:03.550
> 
> 标签：c++

```
vector<int> a; 
```

1.

```
for(vector<int>::iterator it = a.begin(); it != a.end(); ++it) 
```

2.

```
vector<int>::iterator end = a.end();
for(vector<int>::iterator it = a.begin(); it != end; ++it) 
```

哪个更高效？还是一样？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T07:49:06.393

初步批评：

1/**典型教程示例**

```
for(vector<int>::iterator it = a.begin(); it != a.end(); ++it) 
```

没有魔法，但它提出了一个问题：`a`循环中是否曾经修改过最终界限可能会有所不同？

2/**改进**

```
vector<int>::iterator end = a.end();
for(vector<int>::iterator it = a.begin(); it != end; ++it) 
```

`a.end()`似乎只执行一次。但是，由于`end`is not `const`，因此可以在循环内对其进行修改。

此外，它`end`在外部范围中引入了标识符，污染了它。

因此，性能有潜在的提升，但清晰度并不高。此外，它更加冗长。

* * *

我会提出其他几种方法：

3/**最佳手册**

```
for(vector<int>::iterator it = a.begin(), end = a.end(); it != end; ++it) 
```

结合了`v1`（非常简洁，没有外部范围污染）和`v2`（性能）的优点，但是目前还不清楚是否`end`曾经在循环体内修改过。

4/**升压供电**

```
BOOST_FOREACH(int& i, a) 
```

甚至更简洁`v1`，一目了然，没有外部范围泄漏，并保证完全迭代（不可能修改边界）。

很遗憾：

*   变量类型中的逗号存在问题（因为它依赖于预处理器）
*   编译时错误是完全神秘的（因为它依赖于预处理器）

*注意：理论上，可以在`std::foreach`这里提出算法的案例，但老实说......在外部定义谓词需要付出太多努力，并且会破坏代码局部性。*

5/ **C++11 range-for 语句**

```
for (int& i: a) 
```

所有优点：

*   非常简洁
*   与最佳 C++ 手写循环一样高效
*   保证完整迭代，不问任何问题

并且没有任何问题（范围泄漏，预处理器魔术）。

* * *

就个人而言，我尽可能使用 C++11 range-for（业余爱好项目）和`BOOST_FOREACH`其他情况（在工作中）。

我避免像瘟疫一样修改我正在迭代的容器，当我需要过滤/删除元素时更喜欢依赖 STL 算法......否则很容易弄乱边界条件和迭代器失效。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T07:12:29.573

2nd 更有效，因为它只需要创建一次结束迭代器。

智能编译器可能会将第一个优化为第二个，但您不能保证会发生这种情况。

这实际上是一个复杂的优化，因为编译器需要 100% 确定对 end() 的任何后续调用都不会产生额外的影响或返回任何不同的东西。基本上，它需要知道至少在循环中，end() 总是返回一些这样的东西，即 end() == 之前对 end() 的调用。不能保证编译器是否进行优化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T07:15:50.683

第二种方式显然更好，因为它只调用**a.end()**一次。本质上，如果您的树中有**N**个节点，那么您将**N**次调用保存到**a.end()**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T15:25:11.637

我认为第一个 for 循环更确定。如果您在此 for 循环中插入/删除元素，`end`您定义的迭代器将失效。例如：

```
vector<int>::iterator mend = int_vec.end(), mbegin = int_vec.begin();
while(mbegin != mend)
{
    cout << *mbegin << " ";
    int_vec.erase(mbegin);
    // mbegin is automatically invalidated
    // execution of this program causes bizarre runtime_error !
    // never try this at home !
} 
```

上述代码的更安全版本可能是：

```
vector<int>::iterator mend = int_vec.end(), mbegin = int_vec.begin();
while(mbegin != mend)
{
    cout << *mbegin << " ";
    int_vec.erase(mbegin);
    mbegin = int_vec.begin(); // ok, mbegin updated.
} 
```

# c# - C# MongoDB，从排序集合中删除前 10 名

> ID：10346291
> 
> 赞同：0
> 
> 时间：2012-04-27T07:11:28.830
> 
> 标签：c#, mongodb, database

我有一个包含 1000 个项目的集合。我想按日期对它们进行排序（SaveDateUtc 字段）并删除其中的前 10 个，所以我的收藏中剩下 990 个最新项目。

我可以先查找，然后再删除，没问题，但如果我可以通过删除调用来做到这一点会更好。但我找不到通过查询排序和设置前 10 名的方法。

所以我的问题是，我可以在一个电话中做到这一点吗？（我正在使用 C# 驱动程序）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:40:59.063

实际上有类似的问题：[MongoDB find and remove - the faster way](https://stackoverflow.com/questions/8539575/mongodb-find-and-remove-the-fastest-way)

但不幸`findAndUpdate`的是不能被记录数限制。所以我对你的建议：

*   您可以引入一些代理字段，以便您可以将其用作查询中的字段
*   您可以编写自己的 java-script 服务器端函数，该函数将在服务器端执行此操作。好处 - 操作在服务器上完成，它是原子的。陷阱 - 它不适用于分片表。

# php - MySQL，连接两列

> ID：10346302
> 
> 赞同：106
> 
> 时间：2012-04-27T07:12:33.817
> 
> 标签：php, mysql, sql

MySQL 表中有两列：`SUBJECT`和`YEAR`.

我想生成一个字母数字唯一编号，其中包含来自 SUBJECT 和 YEAR 的连接数据。

我怎样才能做到这一点？是否可以使用像这样的简单运算符`+`？

* * *

## 回答 #1

> 赞同：208
> 
> 时间：2012-04-27T07:13:33.007

您可以[`CONCAT`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_concat)像这样使用该功能：

```
SELECT CONCAT(`SUBJECT`, ' ', `YEAR`) FROM `table` 
```

更新：

要获得该结果，您可以尝试以下操作：

```
SET @rn := 0;

SELECT CONCAT(`SUBJECT`,'-',`YEAR`,'-',LPAD(@rn := @rn+1,3,'0'))
FROM `table` 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-03-29T20:05:15.620

您可以为此使用 CONCAT() 中内置的 php。

```
SELECT CONCAT(`name`, ' ', `email`) as password_email FROM `table`; 
```

根据您的要求更改归档名称

那么结果是

[![在此处输入图像描述](../Images/a30b3160e0445b6979a77b2592002a1d.png)](https://i.stack.imgur.com/KDhR9.png)

如果您想使用其他相同的字段连接相同的文件，那么

```
SELECT filed1 as category,filed2 as item, GROUP_CONCAT(CAST(filed2 as CHAR)) as item_name FROM `table` group by filed1 
```

然后这是输出 [![在此处输入图像描述](../Images/0d5f87859bdac35e2c82279a362b8974.png)](https://i.stack.imgur.com/q4kGZ.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-01-20T07:40:42.473

在 php 中，我们有两个选项来连接表列。

**使用查询的第一个选项**

在查询中，**CONCAT**关键字用于连接两列

```
SELECT CONCAT(`SUBJECT`,'_', `YEAR`) AS subject_year FROM `table_name`; 
```

**使用符号 ( . ) 的第二个选项**

从数据库表中获取数据后，将值分配给变量，然后使用**( . ) 符号**并连接值

```
$subject = $row['SUBJECT'];
$year = $row['YEAR'];
$subject_year = $subject . "_" . $year; 
```

我们将使用空格、逗号、字母、数字等代替下划线（_）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-26T05:59:37.273

在查询中，`CONCAT_WS()`函数。

此函数不仅添加多个字符串值，而且使它们成为单个字符串值。它还允许您定义分隔符（“”、“”、“、”–“、”_“等）。

语法——</p>

```
CONCAT_WS( SEPERATOR, column1, column2, ... ) 
```

例子

```
SELECT 
topic, 
CONCAT_WS( " ", subject, year ) AS subject_year 
FROM table 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-02-12T11:01:12.730

```
$crud->set_relation('id','students','{first_name} {last_name}');
$crud->display_as('student_id','Students Name'); 
```

# java - 计算字符串中连续重复出现的字符

> ID：10346304
> 
> 赞同：2
> 
> 时间：2012-04-27T07:12:39.667
> 
> 标签：java

这是我的代码。

```
public static void countContinuosOccurence() {
    String first = "ABBCDDDEFGGH";
    StringBuffer result = new StringBuffer();
    int count = 1;
    for (int i = 1; i < first.length(); i++) {
        if (first.charAt(i) == (first.charAt(i - 1))) {
            count++;
        } else {
            if (count > 1) {

                result.append(String.valueOf(count) + first.charAt(i - 1));
            } else {
                result.append(first.charAt(i - 1));
            }
            count = 1;
        }
    }
    System.out.println("First String is:"+ first);
    System.out.println("Result is:" + result);
} 
```

结果是：

```
First String is:ABBCDDDEFGGH
Result is:A2BC3DEF2G 
```

它缺少最后一个字符？有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T07:15:32.130

循环结束后`for`，您需要将*计数*和最后一次运行字符的*字符*附加到结果中：

```
public static void countContinuosOccurence() {
    String first = "ABBCDDDEFGGH";
    StringBuffer result = new StringBuffer();
    int count = 1;
    int i;
    for (i = 1; i < first.length(); i++) {
        if (first.charAt(i) == (first.charAt(i - 1))) {
            count++;
        } else {
            if (count > 1) {    
                result.append(String.valueOf(count) + first.charAt(i - 1));
            } else {
                result.append(first.charAt(i - 1));
            }
            count = 1;
        }
    }

    // ADD THIS - to take care of the last run.
    if (count > 1) {    
        result.append(String.valueOf(count) + first.charAt(i - 1));
    } else {
        result.append(first.charAt(i - 1));
    }

    System.out.println("First String is:"+ first);
    System.out.println("Result is:" + result);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T08:03:27.910

不是性能最好，但最简单的代码：

```
final String in = "ABBCDDDEFGGH" + '\u0000';
final StringBuilder b = new StringBuilder();
char prev = in.charAt(0);
int rpt = 0;
for (int i = 1; i < in.length(); i++) {
  final char curr = in.charAt(i);
  if (curr == prev) rpt++;
  else {
    b.append(rpt == 0? prev : "" + (rpt + 1) + prev);
    rpt = 0; prev = curr;
  }
}
System.out.println(b); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-02-07T23:16:56.553

```
public static void countContinuosOccurence() {

    String[] input = "ABBCDDDEFGGH".split("");
        String out = "";
        for (int i = 0; i < input.length; i++) {
            int repeatedCharCount = 1;
            String currentChr = input[i];
            if (!(i == input.length - 1)) {
                while (input[i].equals(input[i + 1])) {
                    repeatedCharCount++;
                    i++;
                }
            }
            out = out + repeatedCharCount + currentChr;
        }

        System.out.println(out);

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T07:26:08.000

还有一个隐藏的问题，那就是如果你以不止一次出现的序列终止，你就不会写任何东西。

解决此问题的最简单方法以及您检测到的问题是在 for 块之后添加最终检查

```
[...]
    }
    int l = first.length();
    if (count > 1) {
        result.append(String.valueOf(count) + first.charAt(l - 1));
        } else {
            result.append(first.charAt(l - 1));
        }
    }
    System.out.println("First String is:"+ first);
    System.out.println("Result is:" + result);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-20T18:33:35.527

```
import java.util.*;
public class HelloWorld{
public static void main(String []args){
    System.out.println("Hello World");
    String first = "ABBCDDDEFGGHhhhhh456456456{{{67}}}";
StringBuffer result = new StringBuffer();
result.append(first);
System.out.println(result);
    Map<Character,Integer> map = new HashMap<Character,Integer>();
for(int i = 0; i < first.length(); i++) {
char c = first.charAt(i);
if (map.containsKey(c)) {
int cnt = map.get(c);
map.put(c, ++cnt);
} else {
map.put(c, 1);
}

}
Set set = map.entrySet(); 
// Get an iterator 
Iterator itr = set.iterator(); 
// Display elements 
while(itr.hasNext()) { 
Map.Entry me = (Map.Entry)itr.next(); 
System.out.print(me.getKey() + ": "); 
System.out.println(me.getValue()); 
} 
System.out.println("Hello World1");
 }
} 
```

# java - 显示来自 url blackberry 的图像

> ID：10346306
> 
> 赞同：0
> 
> 时间：2012-04-27T07:12:59.390
> 
> 标签：java, blackberry

这是我用来获取图像表单 url 的代码，但我得到了黑屏，请帮忙。HttpConnection 的代码：

```
StringBuffer raw = new StringBuffer();
    HttpConnection _c = null;
    InputStream _is = null;
    try 
    {
        _c = (HttpConnection)Connector.open(url);
        _c.getHeaderField("Location");          
        int rc = _c.getResponseCode();                      
        if (rc != HttpConnection.HTTP_OK) 
        {
            throw new IOException("HTTP response code: " + rc);
        }           
        _is = _c.openInputStream();

        _c.getType();
        int len = (int)_c.getLength();
        {

            data = new byte[256];            
            int size = 0;
            while ( -1 != (len = _is.read(data)) ) 
            {
                raw.append(new String(data, 0, len));
                size += len;
            }
            String retVal = raw.toString();
            // .alert(retVal);
            return retVal+"URL is"+url;
        }
    } 
    catch (Exception e) 
    {
        throw new IllegalArgumentException("Not an HTTP URL");
    }
    finally 
    {        
        if (_is != null)
            _is.close();
        if (_c != null)
         _c.close();
    } 
```

从 perticuler URL 获取图像的代码：

```
 public static Bitmap getImage(String url)
 {

     Bitmap bitmap;
     EncodedImage bmp = EncodedImage.createEncodedImage(data, 0, data.length);
     bitmap=bmp.getBitmap();
     return bitmap;
} 
```

以下代码用于在 MainScreen 上显示图像：

```
Bitmap bt=HttpUtils.getImage("http://www.eng.chula.ac.th/files/building.jpg");                  
        BitmapField bmp=new BitmapField(bt);
        bmp.setBitmap(bt);
        add(bmp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:24:52.743

试试这个代码 -

```
URLBitmapField post_img= new URLBitmapField(image_url);
add(post_img);

import net.rim.device.api.math.Fixed32;
import net.rim.device.api.system.Bitmap;
import net.rim.device.api.system.EncodedImage;
import net.rim.device.api.ui.UiApplication;
import net.rim.device.api.ui.component.BitmapField;

public class URLBitmapField extends BitmapField implements URLDataCallback {
EncodedImage result = null;
public static EncodedImage _encoded_img = null;

int _imgWidth = 52;
int _imgHeight = 62;
int _imgMargin = 10;

public URLBitmapField(String url) {
    try {
        http_image_data_extrator.getWebData(url, this);
    }
    catch (Exception e) {}
}

public Bitmap getBitmap() {
    if (_encoded_img == null) return null;
    return _encoded_img.getBitmap();
}

public void callback(final String data) {
    if (data.startsWith("Exception")) return;

    try {
        byte[] dataArray = data.getBytes();

        //bitmap = EncodedImage.createEncodedImage(dataArray, 0, dataArray.length);//no scale

        _encoded_img = EncodedImage.createEncodedImage(dataArray, 0, dataArray.length); // with scale
        _encoded_img = sizeImage(_encoded_img, _imgWidth, _imgHeight);

        setImage(_encoded_img);
        UiApplication.getUiApplication().getActiveScreen().invalidate();
    }
    catch (final Exception e){}
}

public EncodedImage sizeImage(EncodedImage image, int width, int height) {

      int currentWidthFixed32 = Fixed32.toFP(image.getWidth());
      int currentHeightFixed32 = Fixed32.toFP(image.getHeight());

      int requiredWidthFixed32 = Fixed32.toFP(width);
      int requiredHeightFixed32 = Fixed32.toFP(height);

      int scaleXFixed32 = Fixed32.div(currentWidthFixed32,
        requiredWidthFixed32);
      int scaleYFixed32 = Fixed32.div(currentHeightFixed32,
        requiredHeightFixed32);

      result = image.scaleImage32(scaleXFixed32, scaleYFixed32);
      return result;
}

}

public interface URLDataCallback {

    public void callback(String data);

}

import java.io.IOException;
import java.io.InputStream;
import javax.microedition.io.Connector;
import javax.microedition.io.HttpConnection;
import net.rim.device.api.system.RadioInfo;
import net.rim.device.api.system.WLANInfo;
import net.rim.device.api.ui.UiApplication;

public class http_image_data_extrator {
    static String url_="";
    static StringBuffer rawResponse=null;
    //static String result = null;
         public static void getWebData(String url, final URLDataCallback callback) throws IOException {
             //url_=url;

                 HttpConnection connection = null;  
                 InputStream inputStream = null;  

                try {  

                    if ((WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED)
                            && RadioInfo
                                    .areWAFsSupported(RadioInfo.WAF_WLAN)) {
                        url += ";interface=wifi";
                    }

                    connection = (HttpConnection) Connector.open(url, Connector.READ, true);  

                    String location=connection.getHeaderField("location");

                    if(location!=null){

                        if ((WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED)
                                && RadioInfo
                                        .areWAFsSupported(RadioInfo.WAF_WLAN)) {
                            location += ";interface=wifi";
                        }

                        connection = (HttpConnection) Connector.open(location, Connector.READ, true);  

                    }else{
                        connection = (HttpConnection) Connector.open(url, Connector.READ, true);  
                    }

                    inputStream = connection.openInputStream();  
                    byte[] responseData = new byte[10000];  
                    int length = 0;  
                    rawResponse = new StringBuffer();  
                    while (-1 != (length = inputStream.read(responseData))) { 
                        rawResponse.append(new String(responseData, 0, length));  
                    }  
                    int responseCode = connection.getResponseCode();  
                    if (responseCode != HttpConnection.HTTP_OK){
                        throw new IOException("HTTP response code: "+ responseCode);  
                    }  

                    final String  result = rawResponse.toString();
                    UiApplication.getUiApplication().invokeLater(new Runnable() {  
                        public void run(){  
                            callback.callback(result);  
                        }  
                    });  
                }  
                catch (final Exception ex) {  
                    UiApplication.getUiApplication().invokeLater(new Runnable() {  
                        public void run() {  
                            callback.callback("Exception (" + ex.getClass() + "): " + ex.getMessage());  
                        }  
                    });  
                }
    }  

} 
```

# php - php 编码 - 如果我的文件使用希腊字符保存，则无法下载

> ID：10346308
> 
> 赞同：0
> 
> 时间：2012-04-27T07:13:05.207
> 
> 标签：php, encoding

我正在创建一些下载链接。我的问题是，如果“MY_FILE_NAME.doc”文件使用英文字符保存，那么正在下载。如果我使用希腊字符保存它，那么我无法下载...我使用的是 utf-8 编码。

（我不知道这是否重要，但我在整个页面上显示希腊字符没有任何问题）

这是我的链接：

```
<!DOCTYPE>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>CFS Portal</title>
</head>
<body>
<div>
<span class="txt">
<a href="scripts/download.php?file=MY_FILE_NAME.doc" class="dload">Ιατρικό</a>
</span></div>
</body> 
```

和我的 download.php 文件：

```
<?php
// block any attempt to the filesystem
if (isset($_GET['file']) && basename($_GET['file']) == $_GET['file']) {
    $filename = $_GET['file'];
} else {
    $filename = NULL;
}

$err = '<p class="err_msg">
STOP / ΣΤΑΜΑΤΗΣΤΕ
</p>';

if (!$filename) {
        // if variable $filename is NULL or false display the message
        echo $err;
    } else {
        // define the path to your download folder plus assign the file name
        $path = 'downloads/'.$filename;
        // check that file exists and is readable
        if (file_exists($path) && is_readable($path)) {
            // get the file size and send the http headers
            $size = filesize($path);
            header('Content-Type: application/octet-stream;');
            header('Content-Length: '.$size);
            header('Content-Disposition: attachment; filename='.$filename);
            header('Content-Transfer-Encoding: binary');
            // open the file in binary read-only mode
            // display the error messages if the file can´t be opened
            $file = @ fopen($path, 'rb');
            if ($file) {
                // stream the file and exit the script when complete
                fpassthru($file);
                exit;
            } else {
                echo $err;
            }
        } else {
            echo $err;
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T15:11:52.383

您的脚本中可能存在几个问题：

**1.文件系统编码问题**

要实际访问文件系统上的文件，您必须正确编码文件名。LC_CTYPE 语言环境参数告诉磁盘上文件名的预期编码。

在 Unix/Linux 或类似操作系统下，该参数可能评估为类似“en_US.UTF-8”的值，这意味着文件名的编码是 UTF-8，因此您的脚本中不需要转换。

在 Windows 服务器下，UTF-8 是不允许的，并且通常 LC_CTYPE 计算结果类似于“language_country.codepage”，其中“codepage”是当前活动代码页的编号，例如 1252（西方国家）或 1253（希腊语）。这里[http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/](http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/)是 Windows 下可用代码页的列表。然后，在 Windows 下，您需要将 UTF-8 文件名转换为其他名称，以便从磁盘中读取它。更多细节可在我对 PHP 错误号的回复中找到。47096 可在：[https ://bugs.php.net/bug.php?id=47096](https://bugs.php.net/bug.php?id=47096)

**2.HTTP文件名编码问题**

根据我的经验，不同的浏览器支持对非 ASCII 文件名进行编码的不同方式，并且在出现特殊字符或无效字符时表现不同（例如，在 Windows 下，文件名中不允许使用问号“？”，浏览器要么只是简单地删除该字符或将整个文件名完全替换为另一个随机生成的文件名）。无论如何，以下代码块适用于大多数浏览器：

```
    $file_name = "Caffé Brillì.pdf"; # 文件名，UTF-8 编码
    $file_mime = "应用程序/pdf"; # MIME 类型
    $file_path = "绝对/或/相对/路径/文件";

    header("内容类型：$file_mime");
    header("内容长度：" .filesize($file_path));
    $agent = $_SERVER["HTTP_USER_AGENT"];
    if( is_int(strpos($agent, "MSIE")) ){
        # 删除保留字符：:\/*?"|
        $fn = preg_replace('/[:\\x5c\\/*?"|]/', '_', $file_name);
        # 非标准 URL 编码：
        header("内容配置：附件；文件名="
        . rawurlencode($fn));

    } else if( is_int(strpos($agent, "Gecko")) ){
        # RFC 2231：
        header("内容配置：附件；文件名*=UTF-8''"
        . rawurlencode($file_name));

    } else if( is_int(strpos($agent, "Opera")) ) {
        # 删除保留字符：:\/*{?
        $fn = preg_replace('/[:\\x5c\\/{?]/', '_', $file_name);
        # RFC 2231：
        header("内容配置：附件；文件名*=UTF-8''"
        . rawurlencode($fn));

    } 别的 {
        # RFC 2616 ASCII-only 编码：
        $fn = mb_convert_encoding($file_name, "US-ASCII", "UTF-8");
        $fn = (string) str_replace("\\", "\\\\", $fn);
        $fn = (string) str_replace("\"", "\\\"", $fn);
        header("内容配置：附件；文件名=\"$fn\"");
    }

    读取文件（$file_path）；

```

希望这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:20:59.850

我认为问题在于编码[在您的脚本和文件系统之间]。

验证您在底层文件系统上使用的编码，因为这就是您访问文件的方式（即文件系统是否使用 iso-8859-1 [或类似的]，并且您将变量作为 UTF-8 发送 - 然后在那里是一个问题。

或者它可能就像您应该对从 get 获得的 var 执行 urldecode 一样简单（您可能还需要在此之后进一步对其进行编码以达到文件系统的编码）。

```
$filename = urldecode($_GET['file']); 
```

# ios - 如何在 iPhone 的 Facebook 上发布图像和视频

> ID：10346313
> 
> 赞同：1
> 
> 时间：2012-04-27T07:13:42.477
> 
> 标签：ios, xcode, facebook, ios4, sdk

我想在我的 Facebook 墙上发布图片和视频。一些标签已被弃用，我们用于通过 facebook 的 ios sdk 发布数据。在 facebook 上发布图像的新标签是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:33:08.557

看看这个链接。

这些链接用于在您的 Facebook 墙上发布视频和照片，并且它也已更新..

[https://developers.facebook.com/docs/reference/api/photo/](https://developers.facebook.com/docs/reference/api/photo/)

[https://developers.facebook.com/docs/reference/api/video/](https://developers.facebook.com/docs/reference/api/video/)

# c# - 使用来自文本框的值过滤绑定到 SQL 数据库的 Datagrid

> ID：10346315
> 
> 赞同：1
> 
> 时间：2012-04-27T07:13:53.630
> 
> 标签：c#, wpf, datagrid

我对 WPF 相当陌生，并且已经使用 Win Forms 和 C# 创建了应用程序。在这些应用程序中，我经常使用 Datagridview 来显示绑定到 SQL 数据库的数据。通过访问附加的 Bindingsources.Filter 属性，过滤 DGV 中的某些行非常容易，例如：

myBindingSource.Filter = "ABCDEFG (<-- 随机列名) Like " + textBox.Text;

是否有类似的简单方法来过滤 Datagrid 中返回的结果，或者我是否被迫使用存储过程来获得我想要的结果。或者过滤机制如何为 WPF 中的 DataGrid 工作。

这些问题很多，但是我很感激能帮助我进入 WPF。

干杯

最大限度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:18:04.470

有一个简单的方法。如果您将数据网格绑定到 ado.net。您可以使用数据表的 DefaultView 并简单地设置过滤器。

以下代码显示了如何创建一个新的“ViewFilter”而不是默认的

```
 public BindingListCollectionView View1 { get; set; }

    //ctor, create View with initial filter
    View1 = new BindingListCollectionView(new DataView(Dt) { RowFilter = "Name like 'R%'" })

    //dynamic filter on runtime
    View1.CustomFilter = "ABCDEFG (<-- Random Columnname) Like '" + textBox.Text+"'"; 
```

xml

```
 <DataGrid ItemsSource="{Binding View1}" /> 
```

# php - 在 PHP 中显示 facebook、twitter 状态更新

> ID：10346316
> 
> 赞同：1
> 
> 时间：2012-04-27T07:14:02.653
> 
> 标签：php, wordpress, social-networking

在我的网页中，我想将我的帐户的 facebook 和 twitter 状态更新显示为一个。意味着显示来自 twitter 和 fb 日期的状态。如下所示：

```
T: twitter status update 1
T: twitter status update 2
F: Facebook status update 3
T: twitter status update 4
F: Facebook status update 5 
```

我正在为我的网站使用 wordpress，wordpress 中有没有这样的插件？或者我可以在php中手动执行的任何代码？

请检查并提出建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-08-20T06:44:32.667

这是 twitter 更新/状态的 php 代码。

```
 $body = array(
        'status'=>'YOURMESSAGE'
    );
    $url = "https://api.twitter.com/1.1/statuses/update.json";
    $oauth_access_token = "YOURVALUE";
    $oauth_access_token_secret = "YOURVALUE";
    $consumer_key = "YOURVALUE";
    $consumer_secret = "YOURVALUE";

    $oauth = array( 'oauth_consumer_key' => $consumer_key,
        'oauth_nonce' => time(),
        'oauth_signature_method' => 'HMAC-SHA1',
        'oauth_token' => $oauth_access_token,
        'oauth_timestamp' => time(),
        'oauth_version' => '1.0');

    $base_info = buildBaseString($url, 'POST', $oauth);
    $composite_key = rawurlencode($consumer_secret) . '&' . rawurlencode($oauth_access_token_secret);
    $oauth_signature = base64_encode(hash_hmac('sha1', $base_info, $composite_key, true));
    $oauth['oauth_signature'] = $oauth_signature;
    $header = array(buildAuthorizationHeader($oauth), 'Expect:');
    $options = array( CURLOPT_HTTPHEADER => $header,
        CURLOPT_POSTFIELDS => $body,
        CURLOPT_HEADER => false,
        CURLOPT_URL => $url,
        CURLOPT_RETURNTRANSFER => true,
        CURLOPT_SSL_VERIFYPEER => false);

    $feed = curl_init();
    curl_setopt_array($feed, $options);
    $json = curl_exec($feed);
    curl_close($feed);

    $result_data = json_decode($json);

function buildBaseString($baseURI, $method, $params) {
    $r = array();
    ksort($params);
    foreach($params as $key=>$value){
        $r[] = "$key=" . rawurlencode($value);
    }
    return $method."&" . rawurlencode($baseURI) . '&' . rawurlencode(implode('&', $r));
}

function buildAuthorizationHeader($oauth) {
    $r = 'Authorization: OAuth ';
    $values = array();
    foreach($oauth as $key=>$value)
        $values[] = "$key=\"" . rawurlencode($value) . "\"";
    $r .= implode(', ', $values);
    return $r;
} 
```

`

# android - 注意 Honeycomb 或更高版本 Android 的外部 USB 存储的变化

> ID：10346321
> 
> 赞同：20
> 
> 时间：2012-04-27T07:14:15.777
> 
> 标签：android, android-intent, usb, usb-drive, mtp

我有一台数码单反相机和一台运行 Android Honeycomb 的三星 Galaxy Tab。DSLR 使用 USB 电缆连接到平板电脑（通过 USB 套件在平板电脑上启用主机功能）。我希望在用户使用此外部相机拍照时收到通知，以便将此图像下载到平板电脑或对其执行其他操作，例如显示包含从图像中获取的元信息的 Toast 通知。

据我所知，所有现有工具（例如`FileObserver`使用底层`inotify`机制`MediaContentProvider`等）都允许监视更改，要求监视特定文件或文件系统路径。这已经足够好了，直到我们在 2.x 和更早的 Android 版本中获得块层协议支持 - 当您连接设备时，它已安装在设备文件系统的某个位置，您可以将此安装点用作这些工具的观察点.

由于 Honeycomb Google 已将访问外部 USB 设备的方式更改为`Media Transfer Protocol`with`PTP`作为其子集。现在，当我将外部 USB 设备连接到 Android 设备时，我不会看到它的任何挂载点（我正在使用`adb shell`后续`mount`命令来获取它们）。此外，`MTP`实现使用的存储 id 显然充当更高级别的抽象，并且只是普通的整数值。我希望有一种方法可以以某种方式将这些存储 id 转换为真实路径/挂载点/任何东西，但显然似乎没有。

考虑到`MediaScanner`已经在我的设备上运行的 Android，我猜想它可以`Intent`在设备可访问的媒体文件发生变化时通过特殊广播来解决这个问题，所以我开始寻找已经存在并适合`Intents`被通知的问题，但没有运气- 我发现只有在分别连接和断开设备时才广播`ACTION_MEDIA_MOUNTED`。`ACTION_MEDIA_REMOVED`这意味着`MediaScanner`在您重新安装之前无法注意到设备上的任何更改（我已经使用股票图库应用程序仔细检查了它 - 在您拔下然后将其插入 Android 设备之前，它不会在相机上看到任何新创建的图像再次）。

试图为外部 sdcard 获取这个挂载路径，我使用`Environment.getExternalStorageDirectory()`了 API 调用，但它产生了模拟 Galaxy 的 sdcard 路径，而`/mnt/sdcard`不是相机的路径。所以它对我也不起作用。

我设法解决了这个问题，只是在启动定期`Timer`事件并`AsyncTask`充当`TimerTask`. 此任务确实初始化 USB 连接，打开设备，扫描整个设备内存，仅获取最后拍摄的照片，然后关闭设备描述符和 USB 连接。

考虑到它必须每次都执行所有这些操作，这看起来不是最好和最有效的方法，这可能非常频繁，比如每 5 或 10 秒。它肯定会很快耗尽电池电量并产生不必要的系统 I/O，仅用于拍摄最后一张照片并将其与上一张照片进行比较（99% 是相同的图像），但我还没有找到更好的工作解决方案这样做。最好有一个带有基于事件的通知的观察者机制。

所以我的问题是，有没有更有效的方式来通知 Honeycomb 或更高版本的 Android 的外部 USB 存储的变化，而不是上面描述的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T08:01:43.103

如果您想要一种更有效的方式，相机必须通过 USB 发送某种信号，表明它已拍摄照片。我想它没有这样做。

因此，您必须按照您描述的方式手动检查：

挂载存储->检查更改->对检测到的更改执行您的操作。

我不知道您以前读过什么“MTP 方式”，但这里有一个示例应用程序：

[https://github.com/ynakanishi/Honeycomb-MTP-sample](https://github.com/ynakanishi/Honeycomb-MTP-sample)

为了不每次都扫描整个存储，您可以保存读取文件名的结果，例如每次检查并比较它以查找新文件名时。通常文件的命名也以相机上的相同数字开头。因此，如果您使用空 sd 卡开始会话，您已经知道照片将具有的文件名。让我们说img0001.jpg。所以你只需要编写一个函数来抓取该文件，直到它成功。如果您想要下一个 img0002.jpg，您可以编写一个任务/服务/函数来抓取该文件，直到成功，依此类推。

如果您想节省电池电量，您可以在中间安装一个额外的电池/电源来为 USB 端口供电。

您可以尝试使用 ScheduledExecutorService 来代替 Async 任务或 timerTask，看看它是否使用更少的电量。

希望能给你一些新的想法

# iphone - MPMoviePlayerController：我什么时候知道文件的下载量达到了百分之十？

> ID：10346327
> 
> 赞同：2
> 
> 时间：2012-04-27T07:14:38.650
> 
> 标签：iphone, objective-c, ios, mpmovieplayercontroller, progressive-download

我正在从我们的网络服务器播放视频，我正在使用 MPMoviePlayerController 来播放它。它首先下载文件，同时播放它。

每次下载文件时视频达到 10% 标记时，我都需要在我们的网络服务器中发布日志。我怎么知道文件的下载量达到了 10%？顺便说一句，我已经获得了文件大小并且已经计算了任何文件的 10%，我只想知道什么时候能够知道它已经下载了 10% 的文件？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-28T15:04:09.540

尝试 `playableDuration`使用`MPMoviePlayerController`. 将其与`duration`属性结合使用时，您应该大致了解是否达到了整个下载量的 10%。

从[MPMoviePlayerController 参考](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)：

```
playableDuration 
```

当前可播放内容的数量。（只读）

```
@property (nonatomic, readonly) NSTimeInterval playableDuration 
```

> 讨论
> 
> 对于逐步下载的网络内容，该属性反映了现在可以播放的内容量。

**例子：**

以下代码可以在计时器内运行，触发时延迟 1 秒或更短，具体取决于您实际需要此功能具有的准确性。

```
if (player.duration > 0.0 && player.playableDuration > 0.0)
{
    if (player.playableDuration >= player.duration / 10.0)
    {
        //we just reached 10% of the total movie playtime
    )
} 
```

# vb6 - 将参数传递给水晶报表

> ID：10346329
> 
> 赞同：3
> 
> 时间：2012-04-27T07:14:40.113
> 
> 标签：vb6, crystal-reports

我写了这段代码，但它有这个错误。

> “运行时错误‘20553’：参数字段名无效”

谁能帮我解决它？

```
With CR

  .ParameterFields(0) = "start;" + CStr(Form1.cmbMonth.Text) & ";True"
  .ParameterFields(1) = "end;" + CStr(Form1.cmbYear.Text) & ";True"

  .ReportFileName = App.Path & "\Report\Report1.rpt"

  .SelectionFormula = "{SW.dtaMonth}>=date('" & Format(Form1.cmbMonth.Text) & "') and {SW.dtaYear}<=date(" & Format(Form1.cmbYear.Text) & ")"

  .WindowTitle = "PG Variable Overhead Report" 'title of report
  .Action = 1 'Will Show The Report

End With 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:18:37.150

尝试这个 ...

```
With CR
  .ParameterFields(0) = "start;" & CStr(Form1.cmbMonth.Text) & ";True"
  .ParameterFields(1) = "end;" & CStr(Form1.cmbYear.Text) & ";True"
  .ReportFileName = App.Path & "\Report\Report1.rpt"
  .SelectionFormula = "{SW.dtaMonth}>=date('" & Format(Form1.cmbMonth.Text) & "') and {SW.dtaYear}<=date(" & Format(Form1.cmbYear.Text) & ")"
  .WindowTitle = "PG Variable Overhead Report" 'title of report   .Action = 1 'Will Show The Report
End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T17:09:06.343

我认为 Crystal 在某些时候改变了将参数传递给外部（非嵌入式）报告的方式，但我不确定他们使用的是哪个版本。我的版本是10，使用这种方法传入参数：

```
.ParameterFields(n).AddCurrentValue "PARAMETER" 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-15T10:31:19.957

```
 CR.ParameterFields.Item(1).AddCurrentValue "YourValue" 
```

# django - 在 Webfaction 上安装 eyeD3

> ID：10346334
> 
> 赞同：0
> 
> 时间：2012-04-27T07:15:00.543
> 
> 标签：django, easy-install, id3

我正在尝试为我的 Django 应用程序在 Webfaction 上安装 eyeD3，我尝试了这个命令

```
easy_install-2.7 eyeD3 
```

它没有用，Webfaction 也阻止我下载软件包，对吗？我可以使用相同的命令安装“boto”。有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:28:46.430

eyeD3 没有打包`setup.py`脚本，所以它的安装比简单的easy_installing要复杂一些。

以下是您可以在 SSH 会话中运行的命令，以将其安装在 WebFaction 服务器的主目录中：

```
mkdir -p ~/tmp ~/src ~/lib/python2.7
export TMPDIR=~/tmp
cd ~/src
wget http://eyed3.nicfit.net/releases/eyeD3-0.6.17.tar.gz
tar zxf eyeD3-0.6.17.tar.gz
cd eyeD3-0.6.17
./configure --prefix=$HOME
cd ..
easy_install-2.7 eyeD3-0.6.17 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:05:37.287

您可以随时下载所需的任何软件包并将它们放入应用程序目录中的 /lib/python2.x 文件夹中。WebFaction 不会阻止您使用 pip 或 easy_install 下载或安装包。

看看他们的文档：[http ://docs.webfaction.com/software/python.html?highlight=install%20python%20pacakge#installing-python-packages](http://docs.webfaction.com/software/python.html?highlight=install%20python%20pacakge#installing-python-packages)

如果这没有帮助，请联系技术支持，他们的工作人员非常有帮助。

# python - 列表列表到 numpy 数组中

> ID：10346336
> 
> 赞同：238
> 
> 时间：2012-04-27T07:15:07.437
> 
> 标签：python, list, numpy

如何将简单的列表列表转换为 numpy 数组？这些行是单独的子列表，每行包含子列表中的元素。

* * *

## 回答 #1

> 赞同：259
> 
> 时间：2014-10-06T20:47:27.423

如果您的列表列表包含具有不同数量元素的列表，那么 Ignacio Vazquez-Abrams 的答案将不起作用。相反，至少有 3 个选项：

1）制作一个数组数组：

```
x=[[1,2],[1,2,3],[1]]
y=numpy.array([numpy.array(xi) for xi in x])
type(y)
>>><type 'numpy.ndarray'>
type(y[0])
>>><type 'numpy.ndarray'> 
```

2）制作一个列表数组：

```
x=[[1,2],[1,2,3],[1]]
y=numpy.array(x)
type(y)
>>><type 'numpy.ndarray'>
type(y[0])
>>><type 'list'> 
```

3）首先使列表长度相等：

```
x=[[1,2],[1,2,3],[1]]
length = max(map(len, x))
y=numpy.array([xi+[None]*(length-len(xi)) for xi in x])
y
>>>array([[1, 2, None],
>>>       [1, 2, 3],
>>>       [1, None, None]], dtype=object) 
```

* * *

## 回答 #2

> 赞同：134
> 
> 时间：2012-04-27T07:17:45.910

```
>>> numpy.array([[1, 2], [3, 4]]) 
array([[1, 2], [3, 4]]) 
```

* * *

## 回答 #3

> 赞同：51
> 
> 时间：2017-02-28T02:31:05.093

由于这是 Google 上将列表列表转换为 Numpy 数组的热门搜索，因此尽管该问题已有 4 年历史，但我仍将提供以下内容：

```
>>> x = [[1, 2], [1, 2, 3], [1]]
>>> y = numpy.hstack(x)
>>> print(y)
[1 2 1 2 3 1] 
```

当我第一次想到这样做时，我对自己很满意，因为它太简单了。但是，在使用更大的列表对其进行计时后，这样做实际上更快：

```
>>> y = numpy.concatenate([numpy.array(i) for i in x])
>>> print(y)
[1 2 1 2 3 1] 
```

请注意，@Bastiaan 的答案 #1 并没有列出一个连续的列表，因此我添加了`concatenate`.

无论如何...我更喜欢这种`hstack`方法，因为它可以优雅地使用 Numpy。

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2012-04-27T07:21:00.050

它很简单：

```
>>> lists = [[1, 2], [3, 4]]
>>> np.array(lists)
array([[1, 2],
       [3, 4]]) 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-01-18T10:35:43.713

同样，在搜索将具有 N 级别的嵌套列表转换为 N 维数组的问题后，我什么也没找到，所以这是我的解决方法：

```
import numpy as np

new_array=np.array([[[coord for coord in xk] for xk in xj] for xj in xi], ndmin=3) #this case for N=3 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2021-10-20T12:13:23.887

OP 指定“行是单独的子列表，每行包含子列表中的元素”。

假设`numpy`不禁止使用 （鉴于 OP 中已添加 fair numpy），请使用`vstack`：

```
import numpy as np

list_of_lists= [[1, 2, 3], [4, 5, 6], [7 ,8, 9]]

array = np.vstack(list_of_lists)
# array([[1, 2, 3],
#        [4, 5, 6],
#        [7, 8, 9]]) 
```

或更简单（如另一个答案中所述），

```
array = np.array(list_of_lists) 
```

* * *

## 回答 #7

> 赞同：-5
> 
> 时间：2019-07-17T14:45:32.093

我有一个相同长度的列表。即使`Ignacio Vazquez-Abrams`那样，我的答案也没有奏效。我有一个 1-D numpy 数组，其元素是列表。如果你遇到同样的问题，你可以使用下面的方法

利用`numpy.vstack`

```
import numpy as np

np_array = np.empty((0,4), dtype='float')
for i in range(10)
     row_data = ...   # get row_data as list
     np_array = np.vstack((np_array, np.array(row_data))) 
```

* * *

## 回答 #8

> 赞同：-7
> 
> 时间：2019-08-16T09:16:41.157

只用熊猫

```
list(pd.DataFrame(listofstuff).melt().values) 
```

这仅适用于列表列表

如果你有一个列表列表，你可能想尝试一些类似的东西

```
lists(pd.DataFrame(listofstuff).melt().apply(pd.Series).melt().values) 
```

# json - 在 ASP.NET 中使用 WebAPI 或 MVC 返回 JSON

> ID：10346342
> 
> 赞同：139
> 
> 时间：2012-04-27T07:15:43.340
> 
> 标签：json, asp.net-mvc, asp.net-web-api

我正在构建一个客户端脚本繁重的 ASP.NET MVC 应用程序，它将使用 JSON 和 jQuery 来操作 DOM。

我的理解是**Web API 控制器**和**MVC 控制器**都可以返回 JSON。

鉴于我的情况，我应该使用**Web API 控制器**还是**MVC 控制器**？

* * *

## 回答 #1

> 赞同：157
> 
> 时间：2013-01-11T21:34:07.410

Web API 控制器可以在任何 ASP.NET 应用程序中创建和托管，而不仅仅是 MVC 应用程序。因此，创建 Web API 的一个明显原因是如果您没有 MVC 前端（例如，由您的公司/组织托管的经典 RESTful Web 服务。）

MVC 控制器通常依赖于 MVC 框架，如果您查看默认模板以及社区和您的同行所做的大部分工作，您会注意到几乎所有 MVC 控制器都是在考虑视图的情况下实现的。

就个人而言，当我打算使用 View() 进行响应时，我会使用 MVC 控制器，并且我将对不依赖于特定视图的任何事情使用 Web API。

当然，有一些警告，但一般来说，如果您不需要 MVC 的模型绑定行为，您的服务是以数据为中心的，并且操作是以数据为中心的（例如 CRUD 操作），那么您可能需要一个“Web API 控制器” ' 而不是“模型视图控制器”。相反，如果您的操作是以视图为中心的（例如，向用户提供用户管理页面），或者您需要 MVC 的模型绑定来生成“ajax 部分”（不太可能），那么您将需要一个 MVC 控制器。

就我个人而言，我使用 Web API 控制器来驱动基于 JSON 的 RESTful 客户端，我使用 MVC 控制器来处理基本的浏览器路由和 SPA 的交付。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2012-04-27T07:20:56.637

WebAPI 用于制作 API。如果您希望某人能够以 XML、JSON 等格式使用您的 API。您可以制作一个 Web API。

在您的情况下，您只需要用 JSON 与客户交谈。

即使您的网站主要是客户端脚本驱动的，您仍然会使用 ASP.NET MVC 控制器，对吗？而且由于您可能已经根据实体在逻辑上划分了控制器，因此在其中添加这些 json 服务方法是有意义的，而不是专门为 web api 创建另一个类。

所以对于你的特殊情况（如果我理解正确的话），我会坚持使用控制器。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-30T07:51:49.590

答案归结为关注点分离、加快服务的创建以及依赖约定而不是配置。

控制器的主要职责是充当视图和模型之间的协调者，但 API 的主要职责是处理数据。在 API 约定的情况下，执行 CRUD 操作非常容易。下面是 CRUD 操作和 HTTP 操作之间的映射

*   获取：阅读
*   发布：创建
*   放置：更新
*   删除：删除

因此，使用 API，您不必创建单独的操作并使用 HTTP 操作对它们进行归因。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-23T05:57:40.600

我对 ApiController 的唯一担忧是它是基于站点而不是基于区域的。一个站点只能有一个 apicontroller 子文件夹供您命名控制器方法。在某些情况下，您可能希望在不同区域复制控制器名称：

domain.com/api/area1/controller1/

domain.com/api/area2/controller1/

我记得有一些自定义代码设置可以做到这一点，但默认情况下它不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-05T00:01:00.623

我同意肖恩威尔逊（最佳答案）的回答，但不知道为什么，因为我有点困惑，仍然试图理解以下（可能不正确）的预感 -

*   使用 WebAPI Controller 将 JSON 数据传递给客户端，以便客户端可以处理视图操作。这个过程不需要视图，而只是对任何调用方法（即javascript请求）的响应，以便客户端可以处理任何客户端操作。
*   当您需要在 page_load 期间或之后使用数据来操作视图时（即不适用于 SPA 应用程序），请使用 MVC 控制器。

你看，我只是不知道我在这里有什么不正确并且感到困惑，因为肖恩回答的最后一行指出“我使用 MVC 控制器来处理基本的浏览器路由和 SPA 的交付。” - 当我假设它可能是接收 JSON 格式响应的 JavaScript 方法时，也许我不完全知道什么是安静的客户端。这是 Stackoverflow 中最接近的帖子，它与我的问题的答案远程相关，所以我正在回答这个帖子，而不是可能重复问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-19T15:59:07.680

在这种情况下，我会推荐 WebApi，因为它非常适合基于 Javascript 请求传输此类数据。我通常会开发我的 WebApi 控制器，以便它们返回一个 JSON 友好的对象，然后我的 Javascript 可以轻松地对其进行解析。

如果您想生成一些 HTML 并用 Javascript 调用替换页面的各个部分，那么您唯一想要在 MVC 控制器上使用操作来完成此类事情的实时情况。

例如：

您有一个 JQuery UI Datepicker，它在选择时会生成一个单选按钮列表，这些单选按钮代表所选日期的事件。

在这种情况下，您可以使用 WebApi 返回一些 JSON，然后使用 Javascript 生成必要的 HTML，但通常使用 Javascript 创建大量 HTML 是不好的做法。让 C# 构建 HTML 然后通过部分视图返回它会更好，因为这样您就不太可能遇到 Javascript 解析错误。更不用说它使 HTML 更容易编写。

# android - Android 自定义列表视图行

> ID：10346348
> 
> 赞同：3
> 
> 时间：2012-04-27T07:16:32.110
> 
> 标签：android, listview, row

我正在努力为我的列表视图行分配一个以上的文本视图。我希望我的行有一个用于人名的文本视图，一个用于地址和一个用于年龄的文本视图 - 但我没有成功。

如果有人能给我一个简单的例子，那就太好了。

谢谢！

这是我的自定义 ArrayAdapter

```
 import java.util.ArrayList;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class MyAdapter extends BaseAdapter {
    private LayoutInflater mInflater = null;
    private ArrayList<Invoice> peopleList;

    private final class ViewHolder {
        TextView kidLabel;
        TextView restLabel;
        TextView fristLabel;
        TextView amountLabel;
    }

    private ViewHolder mHolder = null;

    public MyAdapter(Context context) {
        Context mContext = context;
        mInflater = (LayoutInflater) mContext
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    }

    @Override
    public int getCount() {
        return peopleList.size();
    }

    @Override
    public Object getItem(int position) {
        return position;
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        if (convertView == null) {
            mHolder = new ViewHolder();
            convertView = mInflater.inflate(R.layout.row, null);
            convertView.setTag(mHolder);
        } else {
            mHolder = (ViewHolder) convertView.getTag();
        }

        mHolder.kidLabel = (TextView) convertView.findViewById(R.id.kidLabel);
        mHolder.kidLabel.setText(peopleList.get(position).getKID());

        mHolder.fristLabel = (TextView) convertView
                .findViewById(R.id.fristLabel);
        mHolder.fristLabel.setText(peopleList.get(position).getDueDate());

        mHolder.restLabel = (TextView) convertView.findViewById(R.id.restLabel);
        mHolder.restLabel.setText(peopleList.get(position).getDueAmount());

        mHolder.amountLabel = (TextView) convertView
                .findViewById(R.id.amountLabel);
        mHolder.amountLabel.setText(peopleList.get(position).getDueAmount());

        return convertView;
    }
} 
```

这是我的自定义行 xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/RelativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="fill_parent"
        android:layout_height="45dip"
        android:src="@drawable/cellback" android:scaleType="fitXY"/>

    <TextView
        android:id="@+id/kidLabel"
        android:layout_width="160dip"
        android:layout_height="25dip"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:textSize="13dip" android:textColor="#333"/>

    <TextView
        android:id="@+id/fristLabel"
        android:layout_width="160dip"
        android:layout_height="20dip"
        android:layout_marginTop="25dip"
        android:textSize="11dip" android:textColor="#999"/>

    <TextView
        android:id="@+id/amountLabel"
        android:layout_width="160dip"
        android:layout_height="25dip"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:textSize="13dip" android:layout_marginLeft="160dip" android:gravity="right" android:textColor="#333"/>

    <TextView
        android:id="@+id/restLabel"
        android:layout_width="160dip"
        android:layout_height="20dip"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:textSize="11dip" android:layout_marginLeft="160dip" android:layout_marginTop="25dip" android:gravity="right" android:textColor="#999"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T07:56:32.173

首先，您应该创建一个 xml 来描述您的列表单元格喜欢什么，称为 cell.xml，例如：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" android:background="@color/spink">

    <TextView
        android:id="@+id/name_textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Name"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/address_textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Address"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</LinearLayout> 
```

其次，创建一个适配器。它可以帮助您的列表视图显示数据：

```
public class MyAdapter extends BaseAdapter {
private LayoutInflater mInflater = null;
private ArrayList<People> peopleList;

private final class ViewHolder {
TextView nameTextView;
TextView addressTextView;
}

private ViewHolder mHolder = null;

public MyAdapter(Context context) {
mContext = context;
mInflater = (LayoutInflater)mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
}

@Override
public int getCount() {
return peopleList.size();
}

@Override
public Object getItem(int position) {
return position;
}
@Override
public long getItemId(int position) {
return position;
}
@Override
public View getView(int position, View convertView, ViewGroup parent) {
if(convertView == null) {
mHolder = new ViewHolder();
convertView = mInflater.inflate(R.layout.cell, null);           
convertView.setTag(mHolder);
} else {
mHolder = (ViewHolder)convertView.getTag(); 
}

mHolder.nameTextView (TextView)convertView.findViewById(R.id.name_textView);
mHolder.nameTextView.setText(peopleList.get(position).getName());
mHolder.addressTextView = (TextView)convertView.findViewById(R.id.address_textView);
mHolder.addressTextView.setText(peopleList.get(position).getAddress());

return convertView;
}
} 
```

最后，当您想显示数据时，请在您的活动中执行此操作：

listView.setAdapter(new MyAdapter());

希望它可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T07:27:37.597

您需要创建一个自定义列表视图布局和一个自定义数组适配器（我还创建了一个自定义类来使用该布局）。

这方面的一个例子是：

与自定义列表视图布局一起使用的自定义类：

```
package id10778734.sceresini.week4.exercise3.views;

import id10778734.sceresini.week4.exercise3.R;
import id10778734.sceresini.week4.exercise3.Constants;
import id10778734.sceresini.week4.exercise3.tasks.Task;
import android.content.Context;
import android.util.AttributeSet;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.TextView;

public class TaskListItem extends LinearLayout {
    private Task mTask;
    private ImageView mEmailImageView;
    private ImageView mPriorityImageView;
    private TextView mTaskNameTextView;
    private TextView mTaskResponsibleTextView;
    private ImageView mDeleteImageView;

    public TaskListItem (Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public void onFinishInflate() {
        super.onFinishInflate();
        mEmailImageView = (ImageView) findViewById(R.id.list_row_layout_email_button);
        mPriorityImageView = (ImageView) findViewById(R.id.list_row_layout_priority_icon);
        mTaskNameTextView = (TextView) findViewById(R.id.list_row_layout_task_name);
        mTaskResponsibleTextView = (TextView) findViewById(R.id.list_row_layout_responsible);
        mDeleteImageView = (ImageView) findViewById(R.id.list_row_layout_delete_button);

    }

    public void setTask (Task task) {
        mTask = task;
        mEmailImageView.setTag(task);

        switch (task.getPriority()) {
        case Constants.LOW: 
                            mPriorityImageView.setImageResource(R.drawable.low);
                            break;
        case Constants.MEDIUM: 
                            mPriorityImageView.setImageResource(R.drawable.medium);
                            break;
        case Constants.HIGH:
                            mPriorityImageView.setImageResource(R.drawable.high);
                            break;
        }

        mTaskNameTextView.setText(task.getName());
        mTaskResponsibleTextView.setText(task.getResponsible());
        mDeleteImageView.setTag(task);
    }

    public Task getTask () {
        return mTask;
    }

    public ImageView getDeleteImageView () {
        return mDeleteImageView;
    }

    public ImageView getEmailImageView () {
        return mEmailImageView;
    }
} 
```

自定义布局 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<id10778734.sceresini.week4.exercise3.views.TaskListItem 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:padding="5dip" >

    <ImageView
        android:id="@+id/list_row_layout_email_button"
        android:layout_width="36dip"
        android:layout_height="36dip"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="4dip"
        android:layout_marginRight="5dip"
        android:contentDescription="@string/list_row_email_icon_description"
        android:src="@android:drawable/ic_dialog_email" />

    <ImageView
        android:id="@+id/list_row_layout_priority_icon"
        android:layout_width="24dip"
        android:layout_height="24dip"
        android:layout_gravity="center_vertical"
        android:layout_marginLeft="4dip"
        android:layout_marginRight="10dip"
        android:contentDescription="@string/view_task_priority_icon_description" />

    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical" >

        <TextView
            android:id="@+id/list_row_layout_task_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:layout_toLeftOf="@+id/list_row_layout_responsible"
            android:paddingRight="5dip"
            android:textAppearance="@style/list_row_task_name" />

        <TextView
            android:id="@id/list_row_layout_responsible"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerVertical="true"
            android:layout_toLeftOf="@+id/list_row_layout_delete_button"
            android:maxWidth="100dip"
            android:textAppearance="@style/list_row_task_responsible" />

        <ImageView
            android:id="@id/list_row_layout_delete_button"
            android:layout_width="36dip"
            android:layout_height="36dip"
            android:layout_alignParentRight="true"
            android:layout_centerVertical="true"
            android:layout_marginLeft="5dip"
            android:layout_marginRight="5dip"
            android:contentDescription="@string/delete_task_icon_description"
            android:src="@drawable/task_delete" />
    </RelativeLayout>

</id10778734.sceresini.week4.exercise3.views.TaskListItem> 
```

和自定义数组适配器：

```
package id10778734.sceresini.week4.exercise3;

import id10778734.sceresini.week4.exercise3.R;
import id10778734.sceresini.week4.exercise3.tasks.Task;
import id10778734.sceresini.week4.exercise3.views.TaskListItem;

import java.util.ArrayList;

import android.app.AlertDialog;
import android.content.Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.BaseAdapter;

public class TaskListAdapter extends BaseAdapter
{

    private ArrayList<Task> mTasks;
    private Context mContext;
    private AlertDialog unsavedChangesDialog;
    private TaskManagerApplication mApp;

    public TaskListAdapter(Context context, ArrayList<Task> tasks) {
        super();
        mApp = (TaskManagerApplication) context.getApplicationContext();
        mContext = context;
        mTasks = tasks;
    }

    @Override
    public int getCount()
    {
        return mTasks.size();
    }

    @Override
    public Task getItem(int position)
    {
        return (null == mTasks) ? null : mTasks.get(position);
    }

    @Override
    public long getItemId(int position)
    {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent)
    {
        TaskListItem tli;

        if (null == convertView)
        {
            tli = (TaskListItem) View.inflate(mContext, R.layout.list_row_layout, null);
        } else
        {
            tli = (TaskListItem) convertView;
        }

        tli.setTask(mTasks.get(position));

        tli.getEmailImageView().setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v)
            {
                emailTask(v);
            }
        });

        tli.getDeleteImageView().setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v)
            {
                deleteTask(v);
            }
        });

        return tli;
    }

    /**
     * deleteTask() prompts the user with an alert dialog and presents them with
     * the option to continue with the delete request or to cancel the request.
     * Upon confirmation, the selected Task object which is retrieved from the
     * deleteTaskIcon tag, will be removed from the list of currentTasks.
     * 
     * @param v
     */
    protected void deleteTask(View v)
    {
        final Task t = (Task) v.getTag();
        String alertMessage = String.format(mContext.getString(R.string.delete_task_message), t.getName());

        unsavedChangesDialog = new AlertDialog.Builder(mContext).setTitle(R.string.delete_task_title).setMessage(alertMessage)
        // Delete the task and refresh the adapter.
                .setPositiveButton(R.string.delete_task_delete, new AlertDialog.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface arg0, int arg1)
                    {
                        // Remove task from array list
                        mTasks.remove(t);

                        // Remove task from Database
                        mApp.deleteTask(t);

                        // Display toast message stating the task was deleted
                        mApp.displayToast(Constants.TASK_DELETED);

                        // Update listView with modified adapter
                        forceReload();
                    }
                })
                // Cancel the delete request and do nothing.
                .setNegativeButton(R.string.delete_task_cancel, new AlertDialog.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface arg0, int arg1)
                    {
                        unsavedChangesDialog.cancel();
                    }
                }).create();

        unsavedChangesDialog.show();
    }

    /**
     * emailTask() populates the selected task into an intent which allows the
     * user to select a client to send the task. This is formatted for email
     * clients.
     * 
     * @param v
     */
    protected void emailTask(View v)
    {
        // Retrieve the task that is allocated to this RowView
        final Task t = (Task) v.getTag();

        // Instantiate the intent that will be used to call the email client
        Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);

        // Variables/Arrays to hold email attributes
        String[] emailRecipients = { mContext.getString(R.string.email_task_to_email) };
        String emailType = mContext.getString(R.string.email_task_type);
        String emailTitle = mContext.getString(R.string.email_task_title);
        String emailSubject = String.format(mContext.getString(R.string.email_task_subject), t.getName());
        String emailMessage = String.format(mContext.getString(R.string.email_task_message), t.getResponsible(), t.getName(), mContext.getString(t.getPriorityStringId()));

        // Add the email attributes to the intent
        emailIntent.setType(emailType);
        emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, emailRecipients);
        emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, emailSubject);
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, emailMessage);

        // Start intent
        mContext.startActivity(Intent.createChooser(emailIntent, emailTitle));
    }

    /**
     * Refreshes the ListView with the modified dataset.
     */
    public void forceReload()
    {
        notifyDataSetChanged();
    }
} 
```

# redis - Appharbor 上的 Redis - Booksleeve GetString 异常

> ID：10346350
> 
> 赞同：1
> 
> 时间：2012-04-27T07:16:37.330
> 
> 标签：redis, appharbor, booksleeve

我正在尝试在 appharbor 上设置 Redis。我已按照他们的说明进行操作，但 Booksleeve API 再次出现问题。这是我用来使其最初工作的代码：

```
 var connectionUri = new Uri(url);

                using (var redis = new RedisConnection(connectionUri.Host, connectionUri.Port, password: connectionUri.UserInfo.Split(new[] { ':' }, 2)[1]))
                {
                    redis.Strings.Set(1, "greeting", "welcome to remember your stuff!");

                    try
                    {
                        var task = redis.Strings.GetString(1, "greeting");

                        redis.Wait(task);

                        ViewBag.Message = task.Result;
                    }
                    catch (Exception)
                    {
                        // It throws an exception trying to wait for the task?
                    }
                } 
```

但是，问题在于它正确设置了字符串，但是当尝试从键值存储中检索相同的字符串时，它会抛出等待任务执行的超时异常。但是，此代码适用于我的本地 redis 服务器连接。

我是否以错误的方式使用 API？还是这与 Appharbor 有关？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:23:04.047

像 a 一样`SqlConnection`，您需要调用`Open()`（否则您的消息将排队等待传递）。

***与 不同*** `SqlConnection`的是，您不应该**在**每次需要时启动 a`RedisConnection`- 它旨在用作共享的、线程安全的多路复用器 - 即单个连接被保存在某处并被大量不相关的调用者使用。除非你当然只需要做一件事！

# c# - Metro-ui Style App 中没有 Internet 连接的 XmlDocument.LoadFromUriAsync 块

> ID：10346351
> 
> 赞同：1
> 
> 时间：2012-04-27T07:16:37.920
> 
> 标签：c#, windows-runtime, xmldocument

我正在使用此代码从 uri 获取 xml

```
 try
        {
            doc = await XmlDocument.LoadFromUriAsync(new Uri(apiRequest));
        }
        catch(Exception e)
        {
            return false;
        } 
```

问题是该函数在未连接到互联网时不会抛出任何异常，并且整个程序只是阻塞。如果我将 uri 设置为诸如“http://notanactualluri.com”之类的无效内容或不包含 xml 的有效 uri，它确实会引发异常。

# php - 通过 CodeIgniter 发送电子邮件

> ID：10346353
> 
> 赞同：0
> 
> 时间：2012-04-27T07:16:43.970
> 
> 标签：php, codeigniter, smtp

我想通过 Tank Auth（一个 CodeIgniter 库）发送邮件

我收到错误消息：

> 遇到 PHP 错误 严重性：警告
> 
> 消息：fsockopen() [function.fsockopen]：无法连接到 ssl://smtp.googlemail.com:465（无法找到套接字传输“ssl” - 您在配置 PHP 时是否忘记启用它？）
> 
> 文件名：库/Email.php
> 
> 行号：1689

我正在使用 gmail

我的 php.ini 文件有没有注释的行

> 扩展=php_openssl.dll

Email.php 中的一些配置文件：

```
var $useragent      = "CodeIgniter";    
var $mailpath       = "/usr/sbin/sendmail";//i dont know what should i write here
var       $protocol     = "smtp";   
var $smtp_host      = "ssl://smtp.gmail.com";        
var $smtp_user      = "mymail@gmail.com";
var $smtp_pass      = "mypass";
var $smtp_port      = "465";    
var $smtp_timeout   = 30;
var $smtp_crypto    = "";
var $wordwrap       = TRUE;         
var $wrapchars      = "76";         
var $mailtype       = "text";       
var $charset        = "utf-8";      
var $multipart      = "mixed";  
var       $alt_message  = '';       
var $validate       = FALSE;    
var $priority       = "3";      
var $newline        = "\r\n";       
var       $crlf     = "\n"; 
```

问题可能出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:20:11.913

编辑您的代码行

```
var $smtp_host  = "ssl://smtp.gmail.com"; 
```

至

```
var $smtp_host  = "ssl://smtp.googlemail.com"; 
```

我认为它会起作用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:22:15.927

我会尝试在 Windows [http://code.google.com/p/openssl-for-windows/上重新安装 openssl 扩展](http://code.google.com/p/openssl-for-windows/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-03T04:06:47.933

要在 CodeIgniter 中使用 Google SMTP，您需要对您的 Gmail 帐户设置进行 2（两）次更改：（请注意，现在攻击者更容易侵入您的帐户 - Google 说）

1.  启动两步验证。
2.  允许不太安全的应用程序：开（或启用）

# c++ - 如何使用 sqlite3_step 迭代 sqlite3 中的行？

> ID：10346354
> 
> 赞同：0
> 
> 时间：2012-04-27T07:16:47.870
> 
> 标签：c++, sqlite

在 SQLite3DB.cpp 中，我有一些代码打击：

```
 void QueryJsFileBegin() {
       SQLite3Initilize();
    }

    bool QueryJsFileNext(JS_FILE* js_file) {
        int err = sqlite3_step(stmtQueryJSFILE);
        if (err != SQLITE_ROW) 
            return false;
        // get data.
        return true;
    }

    void QueryJsFileEnd() {
        sqlite3_reset(stmtQueryJSFILE);
    } 
```

当我在 SQLite3DB.cpp 中测试它们时，这些工作正常

```
void test () {
    db::JS_FILE js_file;
    for (db::QueryJsFileBegin(); db::QueryJsFileNext(&js_file); db::QueryJsFileEnd()) {
        MessageBoxA(NULL, js_file.js_file_name_.c_str(), "", 0);
    }
} 
```

但是当我在其他 cpp（如 main.cpp）文件中使用这些时，它总是返回第一行和死循环。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:22:48.093

因为，在`step`for 部分，你正在运行`sqlite3_reset()`，所以它在第一行之后关闭。

# ios5 - iOS 5.1 中的 Popover 大小调整损坏

> ID：10346357
> 
> 赞同：0
> 
> 时间：2012-04-27T07:17:01.873
> 
> 标签：ios5, uipopovercontroller

我在应用程序中有一个弹出窗口，它没有调整到我设置的大小。我找到[了这个](https://stackoverflow.com/questions/2752394/popover-with-embedded-navigation-controller-doesnt-respect-size-on-back-nav)，但它在 iOS 5.1 中仍然不起作用。我切换到 ios 5.0 模拟器，它再次工作。我错过了什么吗？

*编辑*

在 viewDidLoad 中：

```
self.contentSizeForViewInPopover = CGSizeMake(320.0, 137.0); 
```

在 viewDidAppear 中：

```
self.popoverController.popoverContentSize = CGSizeMake(320.0, 137.0); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T05:27:23.170

看起来它必须是 iOS 5.1 中的“错误”或更改。Apple 的[示例代码](https://developer.apple.com/library/ios/#samplecode/Popovers/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010436-Intro-DontLinkElementID_2)不会在拆分视图中进行弹出窗口。我通过在 splitViewController 上调用 setPresentsWithGesture 禁用了滑动手势。滑动并显示主视图很烦人。

# windows - 如何在 Visual C++ 中使用 windows changepassword 事件

> ID：10346358
> 
> 赞同：0
> 
> 时间：2012-04-27T07:17:07.957
> 
> 标签：windows, events, visual-c++, gina

我正在使用 Visual C++ 开发一个 sas(clt+alt+del) 更改密码功能...

所以我的表单中有一个按钮...

如果我要单击按钮，我想显示更改密码对话框并处理该功能...

我如何使用或调用或调用该 changepassword 事件？

提前谢谢monu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:23:15.493

Keit Brown 写过关于 Gina 的非常好的[文章。](http://msdn.microsoft.com/en-us/magazine/cc163786.aspx)您将在其中找到有关 SAS 的答案。

# jquery - 使用 asp.net mvc 3 时如何将 jQuery load() 加载到动态创建的元素中？

> ID：10346361
> 
> 赞同：2
> 
> 时间：2012-04-27T07:17:26.027
> 
> 标签：jquery, asp.net-mvc-3

我无法将纯 HTML 加载到动态创建的 DIV 元素中。我的脚本如下所示：

```
$("button").click(function () {
  var divElem = $('&lt;div /&gt;').load('@Url.Action("MyFunkyPartialView", "Home")');
}); 
```

MyFunkyPartialView 操作方法返回一个局部视图，如下所示：

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T07:44:45.660

你新创建的`DIV`元素去哪里了？

当您创建一个 HTML 元素（即`$('<div/>')`）时，它不会自动插入到文档中，因此您还不能在屏幕上看到它。你必须指定你想把它放在哪里。

但是，它已经在内存中，因此您已经可以操作它并对它做一些事情，包括在您正在做的时候向它添加内容。你的电话没有错`.load()`。

长话短说，你没有做错任何事——你只是错过了工作流程中的一个步骤。

那么，您唯一需要做的就是将 插入`DIV`到您的文档中。您可以使用以下方法执行此操作：

```
var divElem = $('<div/>').load('@Url.Action("MyFunkyPartialView", "Home")');
// ...
divElem.appendTo('#main'); 
```

这会在`DIV`元素内部添加`#main`元素，毕竟它是原始内容。

### 编辑

在访问`DIV`的内容时，我们必须确保`.load()`调用有机会首先完成。通常这最好通过`complete`回调来实现。

```
var divElem = $('<div/>')
    .load('@Url.Action("MyFunkyPartialView", "Home")', function () {
        // this function executes after the load AJAX call completes,
        // so this is the best place to access the contents of the div.
        alert(divElem.html());
    }); 
```

# javascript - 文本节点和子节点

> ID：10346366
> 
> 赞同：0
> 
> 时间：2012-04-27T07:17:54.277
> 
> 标签：javascript

我在网上阅读`textNodes`和阅读。`childnodes`我阅读了很多关于节点的信息，但我确实理解了。究竟是`textnodes`什么？

我有一个示例 HTML，我想知道`textNode`我的 div 的 s 是什么以及如何选择`childnodes`和`textnodes`.

```
<head>
    <script type="text/javascript">
        alert(document.childNodes[1].childNodes[0])
    </script>
</head>
<body>
    <div id="myDiv">
        <div>abc</div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T07:23:10.107

*   整个文档是一个文档节点
*   每个 HTML 元素都是一个元素节点
*   HTML 元素中的文本是文本节点
*   每个 HTML 属性都是一个属性节点
*   评论是评论节点

# sql-server - MVC 3：MSDTC 事务管理器无法从源中提取事务

> ID：10346367
> 
> 赞同：14
> 
> 时间：2012-04-27T07:17:57.227
> 
> 标签：sql-server, entity-framework, asp.net-mvc-3, msdtc

我正在将 MVC 3 与实体一起使用，现在我已使用控制器中的以下代码行

```
 using (var scope = new TransactionScope())
        {
            _myRepository.DeleteFM1(id);
            _myRepository.DeleteFM2(id, name);
            scope.Complete();
        } 
```

在我的**DeleteFM2**方法中，恰好是我在 Entity 类中定义的方法如下：

```
 public void DeleteFM2(int id, string name)
    {
        var data= _repositoryMD.Fetch().Where(mColl => mColl.Col1 == id);

        if (data!= null)
        {
                //insert here is giving some error MSDTC error !
                // here I prepare a message using the '**data**'
                _repositoryHistory.Insert(name, message, "FM2", "Delete", dateTime);

                _repositoryMD.Attach(data);
                _repositoryMD.Delete(data);
                _repositoryMD.SaveChanges();
            }
        }
    } 
```

我有一个单独的类，我将 Insert 方法定义为

```
 public bool Insert(string realName, string logMessage, string tableName, string changeType, DateTime dateTime)
    {
        var history = new History
        {
            ModifiedBy = realName,
            ChangeType = changeType,
            DateModified = dateTime,
            LogMessage = logMessage,
            TableName = tableName
        };

        _repositoryHistory.Add(history);
        _repositoryHistory.SaveChanges();

        return true;
    } 
```

在上述方法DeleteFM2中插入这行代码后

```
 _repositoryHistory.Insert(name, message, "FM2", "Delete", dateTime); 
```

我收到此错误，如果没有此行，我的代码工作得很好，我在所有其他方法中也使用了此行，即使我在那里使用过事务范围，但我似乎仍然不明白这里的问题。请帮忙。谢谢

**基础提供程序在打开时失败。**

> System.Transactions.TransactionManagerCommunicationException：与底层事务管理器的通信失败。---> System.Runtime.InteropServices.COMException：由于通信问题，MSDTC 事务管理器无法从源事务管理器中提取事务。可能的原因是：存在防火墙并且它对 MSDTC 进程没有异常，两台机器无法通过它们的 NetBIOS 名称找到彼此，或者两个事务管理器之一未启用对网络事务的支持。（来自 HRESULT 的异常：0x8004D02B）在 System.Transactions.Oletx.IDtcProxyShimFactory.ReceiveTransaction（UInt32 propgationTokenSize，Byte[] propgationToken，IntPtr managedIdentifier，Guid& transactionIdentifier，OletxTransactionIsolationLevel&isolationLevel，

![我的防火墙设置](../Images/d8be2d82776bd183a326a860baaf4d67.png)

我的防火墙设置

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-28T17:18:22.077

即使配置、防火墙和 netbios/dns 设置正确，我也遇到了这个错误。我设置中的两台服务器是彼此的克隆，因此每台服务器上的 MSDTC 具有相同的 CID 值，这使得它们无法互操作。

以下是对 MSDTC 进行故障排除时要考虑的其他一些事项 [http://msdn.microsoft.com/en-us/library/aa561924.aspx](http://msdn.microsoft.com/en-us/library/aa561924.aspx) 我的情况在**确保为 MSDTC 分配了唯一的 CID 值下进行了描述**

> Windows 操作系统的 MSDTC 功能需要唯一的 CID 值，以确保计算机之间的 MSDTC 功能正常工作。Windows 安装的磁盘副本映像必须具有唯一的 CID 值，否则 MSDTC 功能可能会受损。当使用虚拟硬盘将操作系统部署到虚拟机时，可能会发生这种情况。
> 
> 要确定运行 Windows 操作系统的计算机的 MSDTC CID 值是否唯一，请检查两台计算机上 HKEY_CLASSES_ROOT\CID 注册表项下的条目的值。如果这些值对于每台计算机不是唯一的，则按照考虑重新安装分布式事务协调器服务部分中的步骤如果其他故障排除步骤未成功在其中一台计算机上重新安装 MSDTC，然后将为该计算机生成唯一的 MSDTC CID 值并适应适当的 MSDTC 操作。

要在 Windows 2012 服务器上重置 CID，请使用以下 Powershell 脚本：

```
#View: CIDs (These must be different on all systems)
ls Microsoft.PowerShell.Core\Registry::HKEY_CLASSES_ROOT\CID | select Name

#reinstall MSDTC to regenerate CIDs. 
msdtc -uninstall
sleep 5
msdtc -install
sleep 5
Set-Service msdtc -startuptype "auto"
#then reboot for changes to take effect 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-27T07:38:58.427

该错误意味着 MSDTC 未在包含`_repositoryHistory`目标数据库的数据库服务器上运行；或者存在阻止事务传播到该机器的网络问题。

检查数据库服务器上是否安装并运行了 MSDTC。

检查目标服务器上是否正在运行 Windows 防火墙；如果是，请检查 MSDTC 的防火墙排除项。此链接对此有所帮助：[http ://technet.microsoft.com/en-us/library/cc725913(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc725913(v=ws.10).aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-12T21:23:52.070

使用[DTCPing](http://support.microsoft.com/kb/918331)解决与 DTC 相关的错误。多年来，这一直是我解决系统中分布式事务写入问题的首选工具。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-04-06T21:38:03.567

在这里尝试了所有其他方法后，我不得不将 DTC 服务 (MSDTC.EXE) 添加到我的防火墙中。**“分布式事务协调器”**
的默认防火墙设置是使用. *使用MSDTC.EXE* 添加新规则解决了这些问题。**`"%SystemRoot%\system32\svchost.exe"`** 

 **** * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-29T23:32:14.010

我已经有同样的问题了几个星期了。我们有两台网络服务器（Win 2012）和一台数据库服务器（Win 2008）。事实证明，为安全启用“无身份验证”选项解决了我们的问题。

CID：每台服务器上都不同 MSDTC 网络访问：启用 MSDTC 远程访问：启用 MSDTC 远程管理：禁用 MSDTC 无身份验证：启用

现在它在服务器场中正常工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-16T07:21:29.850

我遇到了同样的问题，在我的情况下，在 MSDTC 设置中启用“无身份验证”后问题得到了解决。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-17T11:01:08.237

尝试回收给定 MVC Web 应用程序的应用程序池。我遇到过这个问题，并发现这可以立即提供帮助。***

# php - 表格中的多个图像

> ID：10346368
> 
> 赞同：-1
> 
> 时间：2012-04-27T07:18:00.187
> 
> 标签：php, html, image

我想知道如何在给定格式的表格中显示多个图像

```
1stimage    2nd image   3rd image
4thimage    5th image   6th image
7thimage    8thimage    ........ 
```

这些图像来自数据库。数据库中可能有很多图像。

请帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T07:36:49.830

要实现这样的目标：

![在此处输入图像描述](../Images/ac907cdb0daf60abc47acab4dd67c520.png)

您可以通过将其包装成`iterator`提供行和列的自己的内容来轻松地使事物可配置：

```
/**
 * function to fetch one row from database
 */
function fetch_row($resultSet = NULL) {
    static $result;
    static $i = 0;
    if ($resultSet) {
        $result = $resultSet;
        return;
    }
    return mysql_fetch_assoc($result);
}

fetch_row($result1); // initialize fetch function

$it = new FetchIterator('fetch_row');

$table = new TableIterator($it, 5);

if ($table->valid()) : ?>

<table border="1">

    <?php foreach ($table as $row => $columns) : ?>

        <tr class="<?php echo $row % 2 ? 'odd' : 'even'; ?>">

            <?php foreach ($columns as $index => $column) : ?>

            <td>
                <?php if ($column) echo $column['aaa'], ' ', $column['bbb']; ?>
            </td>

           <?php endforeach; ?>

        </tr>

    <?php endforeach; ?>

</table>

<?php endif; 
```

一些[Demo](http://codepad.org/eH0xQayz)以及[一些 PHP Iterator Fun](http://hakre.wordpress.com/2012/02/28/some-php-iterator-fun/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:39:38.453

```
$i=1;
foreach($arr as $val) { 
    if($i == 1) echo '<table><tr>';
    echo '<td>' . $val . '</td>';
    if($i % 3 == 0 && $i != count($arr)) echo '</tr><tr>';
    if($i++ == count($arr)) echo '</tr></table>';
} 
```

可能有一种更“漂亮”的方法可以做到这一点，但上述方法可以使用[`modulus`](http://php.net/manual/en/language.operators.arithmetic.php)操作符。

# xcode - 在哪里打开 Xcode 4.2 命令行工具？

> ID：10346369
> 
> 赞同：1
> 
> 时间：2012-04-27T07:18:05.917
> 
> 标签：xcode, command-line-tool

我需要重新编码签名一个 ipa 文件。一个教程解释了通过 xcode CLT 重新编码签名。首先，我需要用于 xcode 的 CLT。我正在使用 xcode 4.2。那么我在哪里可以找到用于在 Xcode 4.2 中重新编码签名的命令行工具？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T07:54:55.430

在最新版本的 Xcode（Xcode 4.3.x）中，所有命令行工具都移至：`/Applications/Xcode.app/Contents/Developer/usr/bin/`.

在旧版本的 Xcode（Xcode 4.3 之前）中，这些工具只是安装在`/usr/bin`or中`/Developer/usr/bin`。

# github - 从 github 项目分发二进制文件的最佳实践是什么？

> ID：10346370
> 
> 赞同：73
> 
> 时间：2012-04-27T07:18:09.227
> 
> 标签：github, binary, distribute

从 github 项目分发二进制文件的最佳实践是什么？

我能想到：

*   在您的项目中创建一个 bin 文件夹，您可以在其中保留二进制文件的副本。然而，github 的目的是存储源代码而不是二进制文件 存储大型且定期更改的二进制文件可能会占用大量磁盘空间和带宽？
*   将二进制文件的副本上传到项目的[github 页面](http://pages.github.com/)，或使用单独的网站来托管您的二进制文件。但是，这并不总是可行的，并且需要更多（手工）工作来使二进制文件保持最新状态，我宁愿让二进制文件自动更新或通过单个操作进行更新。

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2013-01-23T19:01:14.043

自 2012 年 12 月 11 日起[，GitHub 上的下载功能已弃用](https://github.com/blog/1302-goodbye-uploads)。[分发大型二进制文件](https://help.github.com/articles/distributing-large-binaries)一文建议使用外部服务：

> 我们建议将[Amazon S3](http://aws.amazon.com/s3/)存储与[CloudFront](http://aws.amazon.com/cloudfront/)配对以通过 CDN 或其他服务（例如[SourceForge](http://sourceforge.net/publish/?source=github) ）提供服务。

* * *

但是，[从 2d July 2013 开始](https://github.com/blog/1547-release-your-software)，您现在可以**定义 release**。

> **Releases**，将软件发送给最终用户的工作流程。
> 发布是一流的对象，带有变更日志和二进制资产，提供了 Git 工件之外的完整项目历史。可以从存储库的主页访问它们：

![主页](../Images/b7284af160e36f640c2c57e81427521d.png)

*   版本附有版本说明和下载软件或源代码的链接。
*   遵循许多 Git 项目的约定，发布与 Git 标签相关联。您可以使用现有标签，也可以让版本在发布时创建标签。
*   **您还可以将二进制资产（例如编译的可执行文件、缩小的脚本、文档）附加到 release**。发布后，任何可以查看存储库的人都可以使用发布详细信息和资产。

![发布](../Images/f1da5a105d8f216b1b82f7b0706dce2a.png)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-03T14:27:45.527

我现在很清楚，*不要*在 github 项目本身中存储二进制文件很重要。因此，您需要将二进制文件存储在其他地方。我遇到的可能的解决方案是：

*   将二进制文件存储在单独的子模块中（[dalores idea](https://stackoverflow.com/a/10400835/1262753)）。[将它们存储在您的项目github pages](http://pages.github.com/)中是有意义的，您可以使用这些页面通过 github 托管您的项目网站。
*   如果您只有几个二进制文件或 zip 文件，您可以通过 Downloads -> Upload a new file 将它们上传到 github。但是，此功能非常有限，您不能将文件放在结构化文件夹中。
*   对于 java jar 文件，有像[Nexus](http://www.sonatype.org/nexus/)这样的解决方案来管理你的库。
*   将二进制文件存储在您自己托管的完全独立的站点上

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-01T16:27:48.910

什么样的二进制文件？二进制文件必须在某个时候来自源代码，对吗？

因此，将构建这些二进制文件的源添加为 git 中的子模块。然后在您的构建过程中首先构建这些二进制文件，然后再构建您的源代码。子模块与您知道有效的源的特定版本保持同步。由于您拥有源代码，因此您还可以更轻松地进行调试。

除非二进制文件是图像等，否则只需存储它们。

如果空间是问题，请使用 bitbucket，因为它们有无限的空间。

# c# - 在c#中从boxofwidgets的arraylist中搜索和删除较低值的方法是什么

> ID：10346374
> 
> 赞同：0
> 
> 时间：2012-04-27T07:18:18.030
> 
> 标签：c#, arrays, arraylist

b> 这段 C# 代码创建了一个 ArrayList。然后它向 ArrayList 添加了一些“BoxesOfWidgets”，在每个盒子中添加了 Widget。GetRidOfTheSmallWidgets 方法旨在摆脱所有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:57:38.183

```
foreach (object objBox in colBoxesOfWidgets)
        {
            BoxOfWidgets box = (BoxOfWidgets)objBox;
            for (int i = 0; i < box.colWidgets.Count; i++ )
            {
                Widget widget = (Widget)box.colWidgets[i];
                if (widget.length < 20f)
                {
                    box.colWidgets.Remove(widget);
                    i--;
                }
            }
        }

} 
```

您可以使用泛型类型：

```
List<BoxOfWidgets> boxs = new List<BoxOfWidgets>();
boxs.Add(new BoxOfWidgets("Cardboard")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:55:00.507

也试过了

```
public static ArrayList GetRidOfTheSmallWidgets(ArrayList colBoxesOfWidgets)
{
    BoxOfWidgets[] bow = colBoxesOfWidgets.OfType<BoxOfWidgets>().ToArray();

    for (int i = 0; i < bow.Length; i++)
    {
        Widget[] warr = bow[i].colWidgets.OfType<Widget>().ToArray();
        for (int j = 0; j < warr.Length; j++)
        {
            if (warr[j].length < 20)
                bow[i].colWidgets.Remove(warr[j]);
        }
    }            
    return colBoxesOfWidgets;
} 
```

# python - 如何在 Python 中正确声明 ctype 结构 + 联合？

> ID：10346375
> 
> 赞同：9
> 
> 时间：2012-04-27T07:18:35.523
> 
> 标签：python, struct, byte, ctypes, unions

我正在制作一个二进制数据解析器，虽然我可以依靠 C，但我想看看我是否可以使用 Python 来完成这项任务。

我对如何实现这一点有了一些了解，我当前的实现看起来像这样：

```
from ctypes import *

class sHeader(Structure):
    _fields_ = [("CC", c_uint8, 4),
            ("AFC", c_uint8, 2),
            ("TSC", c_uint8, 2),
            ("PID", c_uint16, 13),
            ("TP", c_uint16, 1),
            ("PSI", c_uint16, 1),
            ("TEI", c_uint16, 1),
            ("SyncByte", c_uint8)]

class Header(Union):
    _fields_ = [("sData", sTsHeader),
            ("ulData", c_uint32)]

head = Header()
head.ulData = 0xffffffff
print(head.ulData)
print(head.sData.SyncByte)

print(sHeader.SyncByte)
print(sHeader.TEI)
print(sHeader.PSI)
print(sHeader.TP)
print(sHeader.PID)
print(sHeader.TSC)
print(sHeader.AFC)
print(sHeader.CC)

print(sizeof(sHeader))
print(sizeof(c_uint8))
print(sizeof(c_uint16))
print(sizeof(c_uint32)) 
```

产生这个输出：

```
V:\>C:\Python27\python.exe WidiUnpacker.py
0xffffffffL
0x0
<Field type=c_ubyte, ofs=4, size=1>
<Field type=c_ushort, ofs=2:15, bits=1>
<Field type=c_ushort, ofs=2:14, bits=1>
<Field type=c_ushort, ofs=2:13, bits=1>
<Field type=c_ushort, ofs=2:0, bits=13>
<Field type=c_ubyte, ofs=0:6, bits=2>
<Field type=c_ubyte, ofs=0:4, bits=2>
<Field type=c_ubyte, ofs=0:0, bits=4>
6
1
2
4 
```

所以...在我看来，我的字节与其说是字不如说是字节。我对 Python 或 ctypes 的了解不够多，无法理解为什么会这样，但这有点违背了我目前的目的。有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T07:33:13.213

您`sHeader`有一个 4 位字段，然后是 2 位字段，然后是 2 位字段（总共 8 位 = 1 个字节）......但是下一项是 a`c_uint16`需要在 2 字节边界上对齐，因此跳过超过一个字节并在获取 13 位之前移动到字节 2。

如果您不想要那个（显然您不想要），只需将所有内容设为 a`c_uint32`或类似内容：

```
from ctypes import *

class sHeader(Structure):
    _fields_ = [("CC", c_uint32, 4),
        ("AFC", c_uint32, 2),
        ("TSC", c_uint32, 2),
        ("PID", c_uint32, 13),
        ("TP", c_uint32, 1),
        ("PSI", c_uint32, 1),
        ("TEI", c_uint32, 1),
        ("SyncByte", c_uint32, 8)] # note: added 8 here

print sHeader.PID
print sHeader.SyncByte 
```

结果是：

```
<Field type=c_uint, ofs=0:8, bits=13>
<Field type=c_uint, ofs=0:24, bits=8> 
```

（我选择 uint32 是因为你的位字段加起来是 32 位。我在这里使用的是 Python 2.7，因此`print`s 上没有括号。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-27T09:39:05.530

`_pack_`您可以使用类属性控制对齐方式：

```
class sHeader(Structure):
    _pack_ = 1 
```

结果是

```
4294967295
255
<Field type=c_ubyte, ofs=3, size=1>
<Field type=c_ushort, ofs=1:15, bits=1>
<Field type=c_ushort, ofs=1:14, bits=1>
<Field type=c_ushort, ofs=1:13, bits=1>
<Field type=c_ushort, ofs=1:0, bits=13>
<Field type=c_ubyte, ofs=0:6, bits=2>
<Field type=c_ubyte, ofs=0:4, bits=2>
<Field type=c_ubyte, ofs=0:0, bits=4>
4
1
2
4 
```

# python - Boto s3 错误。BucketAlreadyOwnedByYou

> ID：10346378
> 
> 赞同：4
> 
> 时间：2012-04-27T07:18:39.123
> 
> 标签：python, amazon-s3, boto

为什么我在使用 s3 和 boto 时会出现此错误？

```
<Error><Code>BucketAlreadyOwnedByYou</Code><Message>Your previous request to create the named bucket succeeded and you already own it.</Message><BucketName>rtbhui</BucketName><RequestId>84115D3E9513F3C9</RequestId><HostId>+3TxrA34xHcSx0ecOD3pseRnE+LwUv3Ax1Pvp3PFoE8tHfOcn5BXyihc9V/oJx2g</HostId></Error>

s3 = boto.connect_s3(parms['AWS_ACCESS_KEY_ID'], parms['AWS_SECRET_ACCESS_KEY'])
bucket = s3.create_bucket(bucket_name)
k = Key(bucket) #bucket is global
k.key = bucket_path_and_key #'test/test/test' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-15T09:30:39.907

`BucketAlreadyOwnedByYou`错误只会在美国标准区域之外返回。在美国标准区域内（即当您未指定位置限制时），尝试重新创建您已经拥有的存储桶将成功。

**来源** [http://docs.aws.amazon.com/AmazonS3/latest/API/ErrorResponses.html](http://docs.aws.amazon.com/AmazonS3/latest/API/ErrorResponses.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T07:25:28.387

显然，同名容器已经存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-04T02:33:23.153

由于您已经有一个存储桶，您可以删除最后三行代码并将它们替换为以下内容：

```
bucket = conn.get_bucket(bucket, validate = False)
k = Key(bucket)
k.key = key 
```

# google-app-engine - 在 Google Application Engine 中部署我的应用程序时出错

> ID：10346380
> 
> 赞同：0
> 
> 时间：2012-04-27T07:18:45.147
> 
> 标签：google-app-engine

我能够在本地运行我的代码。

我在代理之下。在没有设置 http 代理的情况下，我得到了**[Errno 10060]**。一旦设置了代理，它就被纠正了。

现在我收到以下错误。有人可以请教吗？

```
C:\Data\Google\google_appengine>appcfg.py update c:\Data\Exercises\helloworld

Application: helloirshi; version: 1

Host: appengine.google.com

Traceback (most recent call last):

  File "C:\Data\Google\google_appengine\appcfg.py", line 125, in <module>
    run_file(__file__, globals())

  File "C:\Data\Google\google_appengine\appcfg.py", line 121, in run_file
    execfile(script_path, globals_)

  File "C:\Data\Google\google_appengine\google\appengine\tools\appcfg.py", line4072, in <module>
    main(sys.argv)

  File "C:\Data\Google\google_appengine\google\appengine\tools\appcfg.py", line4063, in main
    result = AppCfgApp(argv).Run()

  File "C:\Data\Google\google_appengine\google\appengine\tools\appcfg.py", line2547, in Run
    self.action(self)

  File "C:\Data\Google\google_appengine\google\appengine\tools\appcfg.py", line3820, in __call__
    return method()

  File "C:\Data\Google\google_appengine\google\appengine\tools\appcfg.py", line3015, in Update
    self.UpdateVersion(rpcserver, self.basepath, appyaml)

  File "C:\Data\Google\google_appengine\google\appengine\tools\appcfg.py", line2997, in UpdateVersion
    updatecheck.CheckForUpdates()

  File "C:\Data\Google\google_appengine\google\appengine\tools\appcfg.py", line593, in CheckForUpdates
    runtime=self.config.runtime)

  File "C:\Data\Google\google_appengine\google\appengine\tools\appengine_rpc.py", line 366, in Send
    f = self.opener.open(req)

  File "C:\Data\Python27\lib\urllib2.py", line 400, in open
    response = self._open(req, data)

  File "C:\Data\Python27\lib\urllib2.py", line 418, in _open
    '_open', req)

  File "C:\Data\Python27\lib\urllib2.py", line 378, in _call_chain
    result = func(*args)

  File "C:\Data\Python27\lib\urllib2.py", line 1215, in https_open
    return self.do_open(httplib.HTTPSConnection, req)

  File "C:\Data\Google\google_appengine\lib\fancy_urllib\fancy_urllib\__init__.py", line 354, in do_open
    req)

  File "C:\Data\Python27\lib\urllib2.py", line 1174, in do_open
    h.request(req.get_method(), req.get_selector(), req.data, headers)

  File "C:\Data\Python27\lib\httplib.py", line 958, in request
    self._send_request(method, url, body, headers)

  File "C:\Data\Python27\lib\httplib.py", line 992, in _send_request
    self.endheaders(body)

  File "C:\Data\Python27\lib\httplib.py", line 954, in endheaders
    self._send_output(message_body)

  File "C:\Data\Python27\lib\httplib.py", line 814, in _send_output
    self.send(msg)

  File "C:\Data\Python27\lib\httplib.py", line 776, in send
    self.connect()

  File "C:\Data\Google\google_appengine\lib\fancy_urllib\fancy_urllib\__init__.py", line 151, in connect
    self._tunnel()

  File "C:\Data\Google\google_appengine\lib\fancy_urllib\fancy_urllib\__init__.py", line 99, in _tunnel
    (_, code, message) = response._read_status()

  File "C:\Data\Python27\lib\httplib.py", line 371, in _read_status
    raise BadStatusLine(line)
httplib.BadStatusLine: '' 
```

对不起我的语法..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:01:30.877

我遇到了类似的错误。确保您的应用程序设置正确（编辑 -> 应用程序设置）。

特别是，确保端口是有效的（如 8080）。还将服务器设置为 appengine.google.com。

# pagination - Tapestry5 可滚动分页

> ID：10346381
> 
> 赞同：0
> 
> 时间：2012-04-27T07:18:48.070
> 
> 标签：pagination, tapestry, scrollable

我在显示分页搜索结果的页面中有一个组件（）。相反，我正在寻找可滚动的分页（无需单击下一步>）。我已经用谷歌搜索了几个小时，我并不是真正的 Jquery/Javascript 专家。有人能指出我实现目标的正确方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T08:25:09.540

有一个[ZoneUpdater](http://jumpstart.doublenegative.com.au/jumpstart/examples/ajax/onevent) mixin，它可以注册到任何 javascript 事件并在它被触发时更新一个挂毯区域。

我不建议将它与滚动事件挂钩（因为这个事件经常被调用）。但是，您可以将其附加到 ANY 事件的 ANY 元素中，并在需要时触发该事件：

```
$('foo').simulate('click'); 
```

或者你给 zoneupdater 一个特定的前缀，然后直接使用

```
<t:any id="mytrigger" t:id="mytrigger" t:mixin="zoneupdater" t:prefix="mytrigger">

mytriggersZoneUpdater.updateZone.bindAsEventListener(mytriggersZoneUpdater); 
```

为了提供滚动，您还可以使用原型脚本

```
Event.observe(window, 'load', function() {
    Event.observe(window, 'scroll', function(evt){
        // what the y position of the scroll is
        var yPos = document.viewport.getScrollOffsets().top;

        var referenceItem = $('myScrollTriggerReferenceItem').cumulativeOffset().top;
        if( yPos > referenceItem ){
        /* the scroll point is below a predefined element, so let's trigger the update */
            //$('mytrigger').simulate('click');
            // OR
            //mytriggersZoneUpdater.updateZone.bindAsEventListener(mytriggersZoneUpdater);
        }
    });
} 
```

# api - Asana api：使用 API 密钥进行身份验证的替代方法？

> ID：10346382
> 
> 赞同：0
> 
> 时间：2012-04-27T07:18:49.123
> 
> 标签：api, asana

使用 API 密钥进行身份验证是使用 Asana API 的第三方开发人员可用的唯一方法吗？

当用户提供他的基本登录详细信息时，是否有任何端点返回 API 密钥？例如：在 Heroku 上，使用用户名和密码参数POST [http://api.heroku.com/login返回 api 密钥。](http://api.heroku.com/login)

这样的功能将有助于简化登录，因为用户复制他的 api 密钥并将其输入到应用程序中将是一个额外的步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:42:05.707

（我为 Asana 工作）

不，目前没有其他机制。但是，我们期待提供未来的集成方式，包括 OAuth。

# iphone - 确定给定字符串中是否出现一个单词子字符串的最佳算法是什么

> ID：10346383
> 
> 赞同：1
> 
> 时间：2012-04-27T07:18:55.153
> 
> 标签：iphone, ios, string, algorithm

我正在寻找最快和最简单的方法来确定**一个单词**子字符串是否出现在给定的**从右到左的**字符串中。

如果值得注意的话，我将使用**Objective C**并在**iPhone 应用程序**中实现该算法。我还搜索了这个算法，发现了 KMP 或 BM 等算法，正如我所想的那样，它们被用于处理**多于一个单词的**子字符串。如果我的假设是错误的，请告诉我！

谢谢你，iLyrical。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T07:22:25.223

怎么样：

```
if([string rangeOfString:@" foo "].location != NSNotFound)
    //I found it, yippee!! 
```

*编辑*虽然我从来没有在从右到左的字符串上尝试过......而且我意识到这与第一个或最后一个单词不匹配......所以在此之后你也必须检查那些：-S

*另一个编辑* 您也可以使用正则表达式。该`NSRegularExpression`课程将允许您这样做。你想要的那个`\s*foo\s*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:22:18.503

一种简单有效的方法是通过拆分字符串然后检查该单词是否存在于哈希表中来创建所有单词的字典（哈希表）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T07:23:24.207

```
NSString *string = @"abc def xyz";
if ([string rangeOfString:@"abc"].location == NSNotFound) {
 NSLog(@"string does not contain abc");
} 
else {
 NSLog(@"string contains abc");
 } 
```

希望，这会让你...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T09:53:37.550

如果您的意思是完全比较的话，它一文不值。最简单的方法是一一比较，只需要读取父字符串一次。

# java - 在 JNI 编程中，在 C 和 Java 之间传递指向结构的指针的安全方法是什么？

> ID：10346385
> 
> 赞同：1
> 
> 时间：2012-04-27T07:18:57.987
> 
> 标签：java, java-native-interface

我已经将 libusb 包装在 JNI 包装器中（以及其他一些东西）。我需要能够在 Java 和 C 之间传递 usb_device。

在我的 java 类中，我有一个长字段，它由从 C 调用的构造函数设置。在 C 代码中，我将指针转换为这样的 usb 结构

```
device = (*env)->NewObject(env, class, mid, (jlong)list->dev); 
```

稍后在另一个实现方法的 C 函数中，我检索指针

```
jlong device_pointer;
device_pointer = (*env)->GetLongField(env, device, fid); 
```

这在 linux 上似乎可以正常工作，但在 mac 中有些东西搞砸了。这似乎不是在 C 和 Java 之间传递指针的安全方式。这样做的安全方法是什么？

# c++ - QUrl 解析失败

> ID：10346389
> 
> 赞同：0
> 
> 时间：2012-04-27T07:19:22.673
> 
> 标签：c++, qt, qurl

我有一个这样的 QUrl：`https://www.example.com/success.html#token=XYZ&user=guest`我想获得令牌的值，即`XYZ`

我当前的代码

```
QString token = url.queryItemValue(QString("token"));
cout << QString("access token is %1").arg(access_token); 
```

返回一个空字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T07:53:28.183

当然它返回一个空字符串。`token`不是给定 URL 中的有效查询项。因为`https://www.example.com/success.html?token=XYZ&user=guest`它是有效的。通常`#`用于锚名称引用而不是参数。如果您确实有这样的 URL，则需要先将其转换`#`为`?`URL 或自定义解析 URL。您可以在`#`with之后获取这些内容`QUrl::fragment()`。

# sql-server-2008 - 重新引发 SQL 错误 - SQL 错误正在丢失

> ID：10346390
> 
> 赞同：1
> 
> 时间：2012-04-27T07:19:33.287
> 
> 标签：sql-server-2008, delphi, delphi-xe2, datasnap, raiserror

我有一个 DataSnap 方法，可以在删除之前记录已删除的记录。如果删除失败，我会回滚事务，以便也不保留日志记录。失败的一个典型原因是正在删除的记录正在另一个表中使用。

我的 SQL 看起来与此类似：

```
begin transaction
begin try
  insert into audit ([fields]) values ([the vlaues])
  delete [sometable] where [id] = [someid]
  commit transaction
end
begin catch
  rollback transaction
end catch 
```

这工作得很好。但是，错误消息被抑制，因此 DataSnap 服务器永远不会看到它。SQL 语法错误总是会出现错误消息，而其他插入/更新唯一性和外键违规总是会返回错误。我不明白为什么这段代码会抑制错误。DataSnap 代码很简单：

```
procedure TMyClass.DeleteRecord([params]);
var
  qry: TSQLQuery;
begin
  qry := TSQLQuery.Create;
  ...
  qry.CommandText := [sql from above];
  qry.ParamByName('[params]').Value := [Values];
  qry.ExecSQL; // <- No error is raised here
end; 
```

查询执行得很好，因此没有语法错误或绑定参数的问题。我只是从来没有看到外键违规错误。当我在 SQL Management Studio 中运行 SQL 时，总是看到错误...所以我尝试`catch`按如下方式更改块：

```
try catch
  rollback transaction
  raiserror(N'Test Error Message', 16, 1)
end catch 
```

在调试 DataSnap 服务器时，我仍然没有看到出现错误，因此客户端应用程序当然对错误一无所知。有谁知道为什么 DataSnap 服务器中没有出现“raiserror”和外键违规错误？

仅供参考 - 我使用的是 Delphi XE2 Enterprise 和 SQL Server 2008 R2，它们都在 Windows Server 2008 R2 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T17:26:56.360

解决方案最终变得非常简单。`set nocount on;`在 SQL 语句的开头添加修复了隐藏 DataSnap 错误的问题。我以前见过这种情况——但主要是在返回数据时。由于这个用途`qry.ExecSQL();`，我没有想到`nocount`这里也需要。

这是我在回滚事务后用来重新引发 SQL 错误的代码：

```
set nocount on;
begin transaction
begin try
  insert into audit ([fields]) values ([the vlaues])
  delete [sometable] where [id] = [someid]
  commit transaction
end
begin catch
  declare @eMsg nvarchar(2048), @eSv int, @eSt int
  select @eMsg = error_message(), @eSv = error_severity(), @eSt = error_state()
  rollback transaction
  raiserror(@eMsg, @eSv, @eSt)
end catch 
```

现在，重新引发的错误会根据需要显示在客户端应用程序中。

# java - Web 服务器接受端口号

> ID：10346392
> 
> 赞同：0
> 
> 时间：2012-04-27T07:19:46.493
> 
> 标签：java, sockets, browser

我正在使用一个简单的 Java 服务器来接受端口号并显示 Internet 数据，例如文本、图像和目录，但我在让一些代码工作时遇到了一些麻烦。这是我的课：

```
public class HTTPServer {

    public static void main(String[] args) {

        ServerSocket socket = null;

        try {
            socket = new ServerSocket(5000);
        } 
        catch (Exception ex0) {
            System.out.println(ex0.getMessage());
            System.exit(1); // exit with error.
        } 
```

第一部分工作正常，但是当我尝试接受连接时，程序停止。“等待客户端连接”行输出到屏幕，然后什么也没有发生。

```
 while(true) {
        // the server waits (using an accept call) for a client to connect.
        System.out.println("Waiting For Client Connection.");
        Socket connection = null;

        try {
            connection = socket.accept();
        } 
        catch (Exception ex1) {
            System.out.println(ex1.getMessage());
            System.exit(1); // exit with error.
        }

        System.out.println("Client Connected To Server");
    } 
```

下一行“连接到服务器的客户端”永远不会输出到屏幕，并且永远不会触发异常 ex1。我对此感到非常困惑。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T08:27:58.517

我怀疑问题在于您正在调用`accept`on `Socket`，而不是 on `ServerSocket`，这就是为什么没有发生任何事情的原因。有关最基本的服务器套接字应用程序，请参阅这个简单的[示例。](https://stackoverflow.com/questions/10131377/socket-programming-multiple-client-to-one-server/10131449#10131449)

# sql - 将多个项目从 sql server (SSMS) 放入组合框中

> ID：10346393
> 
> 赞同：1
> 
> 时间：2012-04-27T07:19:55.100
> 
> 标签：sql, wpf, combobox

```
<Window x:Class="Kvik_Support.KonsulentValg"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="KonsulentValg" Height="150" Width="250"
        Background="LightGray" ResizeMode="NoResize">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="10" />
            <ColumnDefinition Width="10*" />
            <ColumnDefinition Width="10" />
            </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="10" />
            <RowDefinition Height="10*" />
            <RowDefinition Height="10*" />
            <RowDefinition Height="10*" />
            <RowDefinition Height="10" />
        </Grid.RowDefinitions>
        <Label Content="Hvem er du?" Grid.Column="1" Grid.Row="1" HorizontalAlignment="Center" VerticalAlignment="Bottom"/>
        <ComboBox Grid.Column="1" Grid.Row="2" Height="25" Name="cmbHvemErDu">

        </ComboBox>
        <Button Grid.Column="1" Grid.Row="3" Height="25" Width="100" Content="OK" Click="Button_Click" />
    </Grid>
</Window> 
```

这是我的窗口的 XAML 代码，我正在尝试用数据库中的项目填充组合框......

我的想法是我可以用以下代码填写项目，但这会导致 XAML 解析异常......

```
 public partial class KonsulentValg : Window
    {
        public KonsulentValg()
        {
            InitializeComponent();
            try
            {
                SqlConnection lager = new SqlConnection("Data Source=local\\SERVER;Initial Catalog=Kvik-Support;Integrated Security=True");
                lager.Open();
                SqlCommand thisCommand = lager.CreateCommand();
                string command = "SELECT ID, navn FROM Konsulent";
                SqlDataAdapter da = new SqlDataAdapter(command, lager);
                SqlDataReader thisReader = thisCommand.ExecuteReader();
                DataTable datatable = new DataTable();
                da.Fill(datatable);
                foreach (DataRow row in datatable.Rows)
                {
                    string rows = string.Format("{0}:{1}", row.ItemArray[0], row.ItemArray[1]);
                    cmbHvemErDu.Items.Add(rows);
                }
                Console.ReadKey();
                thisReader.Close();
                lager.Close();
            }
            catch (SqlException ex)
            {
                MessageBox.Show(ex.Message);
            }
        }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            Close();
        }
    }
} 
```

但它可能没有工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:41:56.047

您应该考虑使用绑定 itemssource 而不是将项目添加到组合框中。

```
 this.cmdHvemErDu.ItemsSource = datatable; 
```

或在 xaml

```
 <ComboBox ItemsSource="{Binding YourDataTableProperty}"/> 
```

不要忘记设置组合框的 DisplayMemeberPath 属性

编辑：如果您想在组合框中显示多于一列的值，您可以使用 ItemTemplate。

```
 <ComboBox ItemsSource="{Binding YourDataTablePropertyHere}" >
        <ComboBox.ItemTemplate>
            <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding ColumnName1}" />
                        <TextBlock Text="{Binding ColumnName2}" />
                    </StackPanel>
            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox> 
```

# python - Python异常和复杂数据的解析

> ID：10346394
> 
> 赞同：0
> 
> 时间：2012-04-27T07:20:03.640
> 
> 标签：python, parsing, exception-handling

假设我有一些独立的 Python 代码来处理由其他实体（例如客户端）生成的数据。

我收到的数据可能格式不正确（例如，由于客户端的马虎、数据损坏等），因此我的 Python 代码中的处理会以某种方式失败，这将导致引发一些异常。让我们假设下游代码只是想知道处理是否正确和错误，而不是*为什么*出错。

*我关心的是：在复杂*的错误输入上引发此类异常的最佳做法是什么？在这种情况下如何组织异常？

数据在很多方面可能会被证明是不正确的，尤其是在数据的正确格式很复杂的情况下。在某些情况下，我自己可能很容易发现错误（例如，如果我发现不正确的魔法值，在这种情况下我可能会提高我的`FancyCustomizedException`），但在其他情况下，也可能会引发一些通用异常（例如 some `ValueException`）。

*如果引发任何*异常，是否可以说处理错误（在这种情况下，下游代码将使用非常通用的（和丑陋的）`try: ... except: ...`）？

捕获**所有**通用异常并将它们隐藏在我的内部是否更好`FancyCustomizedException`（在这种情况下，下游代码将使用非常不通用的代码，但*我*会在代码中`try: ... except FancyCustomizedException, e: ...`乱扔）？*`try: ... except: ...`*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:26:18.083

由于您似乎需要相当多的验证，我只需将给定输入上的所有验证“错误”包装在*ValidationSummary*对象/实例（其中包含所有出错的列表）中，然后将其传递。

更笼统地说：与其他语言相反，通过异常处理来构建程序流在 Python 中很常见并被接受。与此相关的 Python 习语称为 EAFP（请求宽恕比许可更容易）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:38:14.803

恕我直言，最好创建您自己的异常层次结构，并在每种情况下引发具体异常，例如，BaseValidationException，用于通用验证异常，如 ValueXException 等。其他层次结构用于自定义异常等。然后，您可以捕获基于如果您愿意，可以在基础或特定例外情况下...

```
ProcessException
  + ValidationException
    + ValueXException
    + LimitYException
  + FancyCustomExceptionA
    + FancyCustomDetailException
  + FancyOtherExtensionB
    ... 
```

您始终可以按 ProcessException 过滤，或捕获特定异常...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:01:58.673

在我看来，使用异常比仅仅从函数返回错误代码更可靠。原因是测试返回值会使调用周围的代码更加不可读，并且人们往往不会检查它。所以，去寻找例外。

如果您不确定，请仅使用通用异常——即不要创建您自己的异常类。您以后可以随时添加它们。最好多考虑一下异常应该是什么类型（现有的），而不是创建很多新的异常。

您可以编写代码，使其具有抱怨所有错误的核心（通过异常）。然后你可以写一个更宽容的层，并尝试*聪明*地解决一些情况。（不过，有时软件的*聪明*可能会让用户抓狂:)*

# forms - CForm Yii 框架上的自定义表单元素名称属性

> ID：10346396
> 
> 赞同：2
> 
> 时间：2012-04-27T07:20:10.777
> 
> 标签：forms, model, yii, gii

我正在使用 CModel（特别是 Gii）为我的 Yii 应用程序生成表单。我对如何命名`name=""`表单元素的属性有疑问。它们看起来与我数据库中的表字段一模一样。所以，对于像这样的表：`Users`. 我得到一个表单元素`<input type="text" name="Users[usr_username]" ... />`

这会泄露我的表名和字段。我知道我可以将模型名称更改为其他名称以避免显示我的真实表名，但我也想至少更改`usr_username`为。`username`甚至删除元素名称属性上的模型名称并`name="username"`改为拥有。

我非常感谢您的意见。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T07:40:36.403

所以你可以使用这样的简单文本字段：

```
<?php echo CHtml::textField('username'); ?> 
```

然后将它们与控制器中的模型属性映射：

```
$model->usr_username = $_POST['username']; 
```

但是您**将无法**执行大量任务：

```
$model->attributes = $_POST['Users']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:41:58.327

如果您使用 CActiveForm 小部件来创建表单，在您的情况下我认为这是正确的，因为您已经通过 Gii 生成了模型，您始终可以设置`htmlOptions`生成表单输入的方法的属性，例如：

```
$form->textField($model,'attribute_name',array('name'=>'your_custom_name')); 
```

在上述情况下，输入值将可以通过 $_POST['your_custom_name'] 访问，这意味着大量分配将不起作用。

另请注意，如果您不指定输入的 id 属性，它将与 name 属性（'your_custom_name'）相同。

问候

# mysql - 存储长文本 - mysql wampserver

> ID：10346399
> 
> 赞同：0
> 
> 时间：2012-04-27T07:20:27.833
> 
> 标签：mysql, wampserver, longtext

我有一个长文本需要存储在 MySQL 数据库中。案文是：

> RS Marks 教授与他的同事 Ma Jan 教授 (NTU) 和 Shlomo Magdassi 教授 (HUJI) 在新加坡成立了 NRF CREATE 中心“能源和水管理纳米材料”。其他参与的同事是 Ibrahim Abdulhalim 教授，Drs。Levi Gheber 和 Ariel Kushmaro (BGU)；教授。Ovadia Lev 和 Dani Cohen 以及教授。张华、陈晓东、霍凤伟和李树洲（南大）。

我使用过“longtext”和“longblob”，但没有帮助。据我了解，它应该最多可以容纳 64k 个字符。

存储这么大文本的原因是我正在尝试为我网站的用户构建一个小型系统，以便他们无需输入代码即可更新“新闻”部分。像小型 CMS 之类的东西...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:31:18.550

您需要转义特殊字符`'`，例如。如果您使用 PHP 在数据库中插入数据，则使用[REAL_ESCAPE_STRING](http://php.net/manual/en/mysqli.real-escape-string.php)

# sql - MSSQL查询从表中删除重复的行，在表中留下不同的行

> ID：10346408
> 
> 赞同：8
> 
> 时间：2012-04-27T07:21:11.907
> 
> 标签：sql, sql-server, sql-server-2008

我需要从具有**相同**和. 如何以最少数量的 sql 语句实现这一目标。`Log``customer_id``deactivation_date`

我正在使用 MS SQL Server 2008 速成版。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-27T07:29:42.103

就像是：

```
DELETE FROM Log WHERE LogId NOT IN 
 (SELECT Min(LogId) FROM Log GROUP BY customer_id, deactivation_date) 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-27T07:32:38.887

或者：

```
with cte as (
    select row_number() over (partition by customer_id, deactivation_date
    order by log_id) as rn
    from Log)
delete from cte
    where rn > 1; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T07:28:08.983

你没有给我们太多的工作。但也许是这样的：

```
;WITH CTE
AS
(
    SELECT
        ROW_NUMBER() OVER(PARTITION BY [Log].customer_id ORDER BY 
                              deactivation_date) AS RowNbr,
        [Log].*
    FROM
        [Log]
)
DELETE FROM [Log]
WHERE EXISTS
    (
        SELECT
            NULL
        FROM
            CTE
        WHERE
            CTE.RowNbr>1
            AND CTE.log_id =[Log].log_id 
    ) 
```

# c++ - 编写 if then else 类型语句的简洁方法

> ID：10346409
> 
> 赞同：2
> 
> 时间：2012-04-27T07:21:11.763
> 
> 标签：c++, c

假设我有一个标准，如果该标准为真，我想添加一个增量，如果它为假，则执行相反的操作（减去）。

```
bool bBoolean;
int iDelta;
int iQuantity; 
```

有没有更简洁优雅的方式来编写那段代码？我的意思是不重复关键字 iQuantity 和 iDelta。

```
if(bBoolean)
  iQuantity -= iDelta;
else 
  iQuantity += iDelta; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T07:23:07.083

我能想到的最短的事情是：

```
iQuantity += (bBoolean) ? -iDelta : iDelta; 
```

编辑：这通常称为三元语句，尽管它的专有名称（在标准中称为）是“条件表达式”或“条件运算符”。

（感谢 Rune 提供正式名称。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:32:05.867

这是三元运算符。一些人不赞成它的潜力，因为它的潜力不如`if...else`. 我喜欢它，但要小心。

```
int sign = criteria ? -1 : 1;
quantity += (delta * sign); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T22:31:14.503

`iQuantity += (1-2*bBoolean)*iDelta;`

在某些处理器上，额外的算法比分支更快。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-04-27T07:43:45.893

为什么不：

```
int tmpDelta = iDelta;
if (iBoolean)
{
  tmpDelta = -tmpDelta;
}
iQuantity += tmpDelta; 
```

对我来说，当我编写或阅读代码时，我更喜欢尽可能直截了当的东西。这表示代码将始终更新`iQuantity`，并且如果`iBoolean`为真，则更新将被反转。

编辑：更新不修改`iDelta`.

# c++ - C ++无法让cin从文件重定向中读取结束行字符

> ID：10346413
> 
> 赞同：0
> 
> 时间：2012-04-27T07:21:23.773
> 
> 标签：c++, hex, newline, cin

这是我第一次发帖，请多多包涵。

我有一个文件，我需要通过重定向读取标头，并且我正在使用 cin 来捕获字节并存储它们以供以后使用。

该文件的 hexdump 是：

```
42 02 02 02 ff 0a 00 00  00 19 00 00 00 ff 
```

是）我有的：

```
char magic, cs1, cs2, cs3, selector;
char temp1, temp2, temp3, temp4;
cin >> magic;
cin >> cs1;
cin >> cs2;
cin >> cs3;
cin >> selector; 
//   
cin >> temp1;
cin >> temp2;
cin >> temp3;
cin >> temp4; 
```

前5个字节代表magicNumber、channelSize、channelSize、channelSize、selectorBit。接下来的 4 个字节是一个宽度值，在 LSB 到 MSB 中分成 4 个字节。

当我在 0a 上使用 cin 时，它是十六进制的 10（我想要的值），它会将其读取为换行符并因此跳过它。

```
cout << temp1 << endl;
cout << temp2 << endl;
cout << temp3 << endl;
cout << temp4 << endl; 
```

这将包含（十六进制）：

```
0
0
0
19 
```

cin 跳过 0a 并获取下一个值。有没有办法强制它读取 0a？

如果需要更多信息，请告诉我。谢谢

——凯尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:26:41.373

这是因为`cin`, which is an`istream`期望数据是文本。

如果您正在使用二进制数据`istream::get`，那么`istream::read`这就是您正在寻找的东西。

```
std::cin.get(temp1)
std::cin.get(temp2)
std::cin.get(temp3)
std::cin.get(temp4) 
```

从输入流中检索四个字节的值。

```
char buff[4];
std::cin.read(buff, 4); 
```

将为您将数据块读入一个字符数组。如果字节序与数据的字节序匹配，则可以使用纯整数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:47:01.550

There are two problems with your code. The first is that you're using `>>` to read binary data; `>>` is for reading formatted text data. (In particular, the first thing `>>` does is skip white space.) The second is that you're trying to read binary data from `cin`. This is undefined behavior, because `cin` is opened in text mode. On systems where the two are identical (Unix), it will work, but on others, you may encounter various surprises. (The exact data you show will probably work under Windows as well, depending on the library implementation, but other binary data will fail: 0x1A will generally cause an end of file, 0x0D will disappear if followed by a 0x0A, etc. And an implementation could reasonably remove null bytes from a text stream.)

# php - .htaccess 发生错误

> ID：10346414
> 
> 赞同：0
> 
> 时间：2012-04-27T07:21:25.230
> 
> 标签：php, .htaccess

当我在 .htaccess 中使用重写规则时，似乎发生了内部服务器错误

我的 .htaccess 代码如下：

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^(.*)\.$ $1.php [nc]
RewriteRule  ^([a-z][a-zA-Z0-9_-]+)\.htm$ inner.php?url=$1 
```

但我得到一个服务器错误。错误信息如下：

> 内部服务器错误
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求。
> 
> 请联系服务器管理员 admin@localhost 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:44:55.650

```
RewriteRule ^(.*).$ $1.php [nc]
RewriteRule ^([a-z][a-zA-Z0-9_-]+).htm$ inner.php?url=$1 
```

您能否解释一下，您希望通过第一条规则实现什么目标？

现在它会将任何文件重写为名称相同（最后一个字符除外）并以“.php”扩展的文件：

abcdefg 变成 abcdef.php < 这就是你想要的吗？

真正的问题是这种情况一遍又一遍地发生：在第一次重写后 htaccess 被第二次调用并且规则再次应用，因为没有限制重写的条件。

尝试这个：

```
RewriteCond %{REQUEST_URI} !\.php$    # if the uri does not end with ".php"
RewriteRule ^(.*).$ $1.php [nc,L]     # do not apply another rule after this

RewriteRule ^([a-z][a-zA-Z0-9_-]+).htm$ inner.php?url=$1 
```

问候， 斯特凡

# java - 为什么我的代码没有创建新文件？

> ID：10346415
> 
> 赞同：0
> 
> 时间：2012-04-27T07:21:32.157
> 
> 标签：java, file, objectinputstream

这是我刚写的一堂课。以前它实际上在另一个应用程序中创建了一个文件。但不知何故，它不起作用。它没有创建新文件，我收到此错误：

```
package hostelmanagement;

/**
 *
 * @author princess
 */
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

import java.io.Externalizable;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.ObjectInput;
import java.io.ObjectInputStream;
import java.io.ObjectOutput;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import java.util.Date;
import java.util.HashSet;
import java.util.Set;
import javax.swing.JOptionPane;

/**
 *
 * @author princess
 */
public class Student implements Serializable, Externalizable  {

public static Set<Student> listOfStudents = new HashSet<Student>();    
public static File oFile = new File("Student.dat"); 

//Data Members
private String studentID;
private String name;
private Date dateOfReg;

//Constructor 
Student(String number,String name)
{
this.studentID = number;
this.name = name;
dateOfReg = new Date(); 
}

public String getName()
{
return name;
}

public String getStudentID()
{
return studentID;
}

public Date getDateOfReg()
{
return dateOfReg;
}

public void register() throws FileNotFoundException, IOException, ClassNotFoundException    
{    

HashSet<Student> sss = Student.getListOfStudents();
sss.add(this);
FileOutputStream OFileStream = new FileOutputStream(oFile);    
ObjectOutputStream ObjectOFileStream = new ObjectOutputStream(OFileStream);    
ObjectOFileStream.writeObject(sss);
ObjectOFileStream.close();      
}

public static HashSet<Student> getListOfStudents() throws FileNotFoundException, IOException, ClassNotFoundException
{
HashSet ss;
File iFile = new File("Student.dat");
FileInputStream IFileStream = new FileInputStream(iFile);
 ObjectInputStream ObjectIFileStream = new ObjectInputStream(IFileStream);
ss = (HashSet<Student>) ObjectIFileStream.readObject();
ObjectIFileStream.close();
return  (HashSet<Student>) ss;
}

public static void printListOfStudents() throws FileNotFoundException, IOException, ClassNotFoundException
{
HashSet<Student> sa = Student.getListOfStudents();
for (Student x : sa)
{System.out.println(x.toString());}
}

public static Student getStudentByID(String aNumber) throws FileNotFoundException, IOException, ClassNotFoundException
{ 
HashSet<Student> currentListOfStudents = Student.getListOfStudents();    
Student result = null;   
for (Student x : currentListOfStudents) 
    {   
if (x.getStudentID().equalsIgnoreCase(aNumber))  
        { result = x;
             break;
        }
    }  
      if (result == null)
    {
        JOptionPane.showMessageDialog(null, "Student not found");
    }
    return result; 
}

    @Override
public String toString()
{
// include the code to retrieve assigned apartment    
return "Name: " + name +" StudentID: "+ studentID + " Registered On: " + dateOfReg;
}

    @Override
public boolean equals(Object another)
{
Student stud = (Student)another;
return this.name.equals(stud.name)&& this.studentID.equals(stud.studentID);
}

    @Override
public int hashCode()
{
int hash = name.hashCode();
return hash;

}

    @Override
    public void writeExternal(ObjectOutput out) throws IOException {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void readExternal(ObjectInput in) throws IOException, ClassNotFoundException {
        throw new UnsupportedOperationException("Not supported yet.");
    }
} 
```

错误：

```
run:
Test 1
Apr 27, 2012 10:19:30 AM hostelmanagement.HostelManagement main
SEVERE: null
java.io.FileNotFoundException: Student.dat (The system cannot find the file specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:106)
    at hostelmanagement.Student.getListOfStudents(Student.java:86)
    at hostelmanagement.Student.register(Student.java:74)
    at hostelmanagement.HostelManagement.main(HostelManagement.java:34)
Exception in thread "main" java.io.FileNotFoundException: Student.dat (The system cannot find the file specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:106)
    at hostelmanagement.Student.getListOfStudents(Student.java:86)
    at hostelmanagement.HostelManagement.main(HostelManagement.java:46)
Java Result: 1
BUILD SUCCESSFUL (total time: 0 seconds) 
```

哪里有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T07:26:51.037

鉴于您没有提供主要逻辑，我假设您在调用`getListStudents()`（写入文件）之前调用（读取`register()`文件）。它没有找到它并不奇怪。

问题是您的程序试图读取一个仍然不存在的文件，而不是它无法创建它。请仔细阅读您的堆栈跟踪。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T07:46:22.150

您的错误表明您正在尝试读取不存在的文件。它只会在您尝试写入新文件时创建新文件。

我要做的是以下。

```
public static Set<Student> getListOfStudents() throws IOException, ClassNotFoundException {
    File studentFile = new File("Student.dat");
    FileInputStream in = null;
    try {
        in = new FileInputStream(studentFile);
        ObjectInputStream oos = new ObjectInputStream(in);
        retyurn (Set<Student>) oos.readObject();
    } catch(FileNotFoundException noStudents) {
        return new HashSet<Student>();
    } finally {
        if (in != null)
           try {
               in.close();
           } catch(IOException ignored) {}
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T07:45:32.103

问题可能是您正在加载的文件`getListOfStudents()`和`register()`方法可能不存在于指定位置。

# python - 在 pdb 中保存命令历史记录

> ID：10346419
> 
> 赞同：18
> 
> 时间：2012-04-27T07:21:51.373
> 
> 标签：python, debugging

有没有办法跨会话保存 pdb（python 调试器）命令历史记录？另外，我可以指定历史长度吗？

这类似于问题[如何让 gdb 保存命令历史记录？](https://stackoverflow.com/questions/3176800/how-can-i-make-gdb-save-the-command-history)，但是对于 pdb 而不是 gdb。

-非常感谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-03-08T11:35:53.553

看到[这个](https://stackoverflow.com/questions/35852170/how-to-define-a-new-function-in-pdb/35859009#35859009)帖子。可以将历史记录保存在 pdb 中。默认情况下，pdb 不会读取多行。所以所有功能都需要在一行上。

在 ~/.pdbrc 中：

```
import atexit
import os
import readline

historyPath = os.path.expanduser("~/.pyhistory")

def save_history(historyPath=historyPath): import readline; readline.write_history_file(historyPath)

if os.path.exists(historyPath): readline.read_history_file(historyPath)

atexit.register(save_history, historyPath=historyPath) 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-02-14T10:47:22.033

学分：[https ://wiki.python.org/moin/PdbRcIdea](https://wiki.python.org/moin/PdbRcIdea)

pdb 使用 readline，因此我们可以指示 readline 保存历史记录：

`.pdbrc`

```
# NB: `pdb` only accepts single-line statements
import os
with open(os.path.expanduser("~/.pdbrc.py")) as _f: _f = _f.read()
exec(_f)
del _f 
```

`.pdbrc.py`

```
def _pdbrc_init():
    # Save history across sessions
    import readline
    histfile = ".pdb-pyhist"
    try:
        readline.read_history_file(histfile)
    except IOError:
        pass
    import atexit
    atexit.register(readline.write_history_file, histfile)
    readline.set_history_length(500)

_pdbrc_init()
del _pdbrc_init 
```

* * *

对于 drop-in replacement [`pdb++`](https://github.com/pdbpp/pdbpp)，将上述函数代码复制到`setup()`方法中：

```
from pdb import DefaultConfig, Pdb

class Config(DefaultConfig):
    def setup(self, pdb):
        ## Save history across sessions
        #
        import readline
        ... 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-07-25T23:25:42.000

清除/读取/打印当前 pdb 历史记录的示例：

```
(Pdb) readline.clear_history()
(Pdb) print('hello pdb')
hello pdb
(Pdb) from pprint import pprint; import readline
(Pdb) y = range(readline.get_current_history_length() + 2)
(Pdb) print([readline.get_history_item(x) for x in y]) 
```

输出：

```
[None, 
"print('hello pdb')", 
'from pprint import pprint; import readline', 
'y = range(readline.get_current_history_length() + 2)',
'print([readline.get_history_item(x) for x in y])'] 
```

参考：

*   [https://docs.python.org/2/library/readline.html](https://docs.python.org/2/library/readline.html)

`readline.clear_history`到目前为止，没有输入到 pdb 的两个班轮：

```
from pprint import pprint; import readline
pprint([readline.get_history_item(x) for x in range(readline.get_current_history_length() + 1)]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T05:51:53.293

我不相信“股票” pdb 有办法。但是我写了一个替代调试器来做到这一点。

只需从源代码安装 Pycopia：[http](http://code.google.com/p/pycopia/source/checkout) ://code.google.com/p/pycopia/source/checkout它位于 pycopia.debugger 中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-27T17:56:58.720

扩展@olejorgenb 的出色[答案](https://stackoverflow.com/a/35390866/456550)，我希望将历史文件放在我的主目录而不是当前目录中，所以我使用了`pathlib.Path.expanduser`.

```
import pdb

class Config(pdb.DefaultConfig):

    def setup(self, pdb):
        # Save history across sessions
        import readline
        from pathlib import Path
        histfile_path = Path("~/.pdb-pyhist").expanduser()

        try:
            readline.read_history_file(histfile_path)
        except IOError:
            pass

        import atexit
        atexit.register(readline.write_history_file, histfile_path)
        readline.set_history_length(500) 
```

这是我的配置设置（改进的调试器， `pdbpp`又名[https://pypi.org/project/pdbpp/](https://pypi.org/project/pdbpp/)）。您可以将相同的想法与@olejorgenb 的[答案](https://stackoverflow.com/a/35390866/456550)一起使用来配置常规。`pdb++``pdb`

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-04-27T13:28:27.360

我认为你可以用 IPython 做到这一点：

[http://ipython.org/ipython-doc/stable/interactive/tutorial.html#history](http://ipython.org/ipython-doc/stable/interactive/tutorial.html#history)

pdb 的 ipdb 替换：

[http://pypi.python.org/pypi/ipdb](http://pypi.python.org/pypi/ipdb)

# jquery - 如何在 jquery 自动完成中将用户可以选择的建议限制为 2？

> ID：10346428
> 
> 赞同：0
> 
> 时间：2012-04-27T07:22:35.397
> 
> 标签：jquery, jquery-autocomplete

我在我的应用程序中使用 jquery 自动完成功能。

我想要的是用户可以选择的建议数量应该限制为 2？

我有以下代码：

```
<script type="text/javascript">
            $(document).ready(function(){
                $('#txtTopic').autocomplete('include/ajax.php?option=searchtopics', {
            minChars: 2,
            max:10, /* maximum number of records to display at one time */
            autoFill: true,
            multiple: true
                });

            })

    </script> 
```

现在，由于多个为真，用户可以选择超过 2 个建议。

他应该只能选择 2 个建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:31:16.397

您可以使用 select 事件来检查限制

```
$('#txtTopic').autocomplete('include/ajax.php?option=searchtopics', {
    minChars: 2,
    max:10, /* maximum number of records to display at one time */
    autoFill: true,
    multiple: true,
    select: function(event, ui) {
    var terms = split(this.value);

    if (terms.length <= 2) {
        // add the selected item
        terms.pop();
        terms.push(ui.item.value);
        terms.push("");            
    } else {
        terms.pop();
    }            

      this.value = terms.join(", ");
       return false;     
    }
  }
}); 
```

编辑：上面的代码片段用于 jQuery UI 自动完成。[现场演示](http://jsfiddle.net/mprabhat/qkLu5/1/)

# php - 从数据库中检索盐+哈希以进行验证

> ID：10346429
> 
> 赞同：0
> 
> 时间：2012-04-27T07:22:36.750
> 
> 标签：php, mysql, hash, salt

所以我正在学习 PHP 并且正在处理登录页面。我已经想出了如何使用 SHA256 对 $salt+$password 进行散列来注册新用户。我知道有较慢的加密方法，如 bcrypt，但出于学习目的，我只使用 SHA256。我的问题是，在使用它加密之后：

```
function HashPassword($password) {
  $salt = bin2hex(mcrypt_create_iv(32, MCRYPT_DEV_URANDOM)); 
  $hash = hash("sha256", $salt . $password); column
  $final = $salt . $hash;
  return $final;
} 
```

使用准备好的语句，从数据库中检索哈希密码的最佳方法是什么，以便我可以使用这样的函数对其进行验证？

```
function ValidatePassword($password, $hash_pass) {

  $salt = substr($hash_pass, 0, 64); 
  $trueHash = substr($hash_pass, 64, 64); 
  $reHash = hash("sha256" , $salt . $password); 

  return $reHash == $trueHash;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T07:25:13.453

原理是*无法*找回密码；相反，您使用相同的`HashPassword`函数来计算密码尝试的哈希值，然后查询数据库以查找匹配的记录。

* * *

**编辑**

再次查看您的`HashPassword`函数，我意识到您不想在其中生成随机盐，而是将`$salt`其作为参数；您将传入现有数据库记录中的值，或传入随机生成的值，视情况而定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:34:15.813

您基本上保存了用盐散列的密码以使其无法识别。

如果您的数据库在某个时候被黑客入侵，黑客将无法直接读取密码。相反，他将不得不重新创建散列值。

如果您不为每个用户使用不同的（随机）盐，黑客只需创建一个包含所有可能散列值的表，并将其与您保存的散列密码进行比较。

但是，如果每个密码都在密码中添加了不同的盐，那么在散列之前，黑客必须为每个密码创建一个新表，从而大大增加了获取真实密码所需的工作量。人们希望这将使黑客效率低下或成本过高。

对于您作为想要验证登录凭据的编码人员，您必须遵循以下模式：

1.  获取保存在数据库中的盐。
2.  计算连接的 has 值`hash = salt + password`
3.  比较计算的和保存的`hash === savedHash`
4.  如果它们相同，则它是有效密码。如果不是，那就是密码错误。

# javascript - 任何支持右/左/上/下的 Jquery/Javascript 滑块？

> ID：10346430
> 
> 赞同：-3
> 
> 时间：2012-04-27T07:22:38.250
> 
> 标签：javascript, jquery, jquery-plugins

我正在寻找一个支持右/左/上/下的 Jquery/Javascript 插件。

我不知道问这个问题的确切措辞，但这是帮助您理解我的问题的图像。

![在此处输入图像描述](../Images/a67b26ab0a20846b08fd0e0a7c129b02.png)

如您所见，我希望能够显示方向元素

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:49:45.323

看这个例子小提琴： http: [//jsfiddle.net/9AtMB/](http://jsfiddle.net/9AtMB/)
打开你的javascript控制台

html

```
<div>
    <a href="#" data-y="1" data-x="0">Up</a>
    <a href="#" data-y="-1" data-x="0">Down</a>
    <a href="#" data-x="-1" data-y="0">Left</a>
    <a href="#" data-x="1" data-y="0">Right</a>
</div> 
```

js/jQuery

```
var offset =  { x: 0, y: 0 };
$('a').on('click', function(evt) {
   evt.preventDefault();
   offset.x += ~~$(this).data('x');
   offset.y += ~~$(this).data('y');
   console.log(offset);
}); 
```

CSS（最小）

```
div { width: 200px; height: 200px; position: relative; }
a { position: absolute; z-index: 1; }
a[data-y="1"] { top : 0; left: 50%; }
a[data-y="-1"] { bottom : 0; left: 50%; }
a[data-x="-1"] { top : 50%; left: 0; }
a[data-x="1"] { top : 50%; right: 0; } 
```

使用图形箭头更改标签的练习留给您。

# python - 在 Python 中搜索字典

> ID：10346433
> 
> 赞同：0
> 
> 时间：2012-04-27T07:22:48.547
> 
> 标签：python, dictionary

我目前正在学习 Python 的基础知识，我需要创建一个包含十个人的姓名数据库，包括其他详细信息（电话号码、地址、生日和三个兴趣）。

梦想是在提示符下输入一个人的名字后，他们的所有详细信息都会出现。或者在输入时`name['phone']`，会出现人名和电话号码。地址，生日和兴趣相同。有人告诉我，我必须能够使用 argv 列表从命令行获取名称和相关字段（电话、爱好等），但我不确定如何执行此操作。任何帮助将非常感激！

这是我为字典编写的示例：

```
friends = {'Matt ' : {'phone' : '13579', 
                      'birthday' : '2 Dec', 
                      'address' : 'Sydney',
                      'interests' : ['a', 'b', 'c' ]},

           'Tim ' : {'phone' : '24680', 
                     'birthday' : '19 Feb', 
                     'address' : 'Honolulu',
                     'interests' : ['x', 'y', 'z' ]},

           'Kate ' : {'phone' :'12345', 
                      'birthday' : '30 Jun', 
                      'address' : 'Beijing',
                      'interests' : ['q', 'w', 'e' ]}
           }

name = raw_input ('Please enter search criteria: ')

if name in friends: 
    print 'yes'
else: 
    print 'no data' 
```

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:54:32.623

首先，您的字典键必须具有一致的样式。我的意思是，要么它们都以大写字母开头，要么它们都可能是大写或小写。此外，在键的开头或结尾有空格也不是一个好的选择。

假设您具有以下关键结构：

```
friends = {'Matt' : {'phone' : '13579', 
                  'birthday' : '2 Dec', 
                  'address' : 'Sydney',
                  'interests' : ['a', 'b', 'c' ]},

       'Tim' : {'phone' : '24680', 
                 'birthday' : '19 Feb', 
                 'address' : 'Honolulu',
                 'interests' : ['x', 'y', 'z' ]},

       'Kate' : {'phone' :'12345', 
                  'birthday' : '30 Jun', 
                  'address' : 'Beijing',
                  'interests' : ['q', 'w', 'e' ]}
       } 
```

由于所有键都以大写字母开头并且开头或结尾没有空格，因此您可以执行以下操作：

```
name = raw_input('Please enter search criteria: ')
name = name.strip() # remove whitespace at the beginning and the end of the string
name = name.capitalize() # capitilize the first letter 
```

当然，您可以在一行中调用字符串函数：

```
 name = name.strip().capitalize() 
```

具体信息可以使用`friends[name]['<key>']`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:29:40.380

这里有几个问题，你的钥匙最后都有一个空格，比如`'Matt '`. 而且它们不是小写的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T07:27:48.327

消除

```
name = name.lower() 
```

因为您的字典没有所有小写字母的键，或者将您的字典更改为所有小写键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T08:08:45.160

您正在尝试做的是具有分离的数据和函数的经典*过程编程*- 函数被赋予数据来操作它们。这有时会导致复杂的数据结构。

我建议在这种情况下进行*面向对象的编程*。为一个人写一个类（它可以基于字典来捕获任何信息）。

# android - 如何在背景 ImageView 上布局按钮和文本

> ID：10346436
> 
> 赞同：0
> 
> 时间：2012-04-27T07:23:09.313
> 
> 标签：android

我想创建一个带有按钮和文本的线性布局，但我需要一个背景 ImageView 以便我可以更改背景中的图像。顶部的控件将是半透明的，因此下面的图像可以显示出来。如何使用 Android SDK 2.3 或更高版本

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:32:33.603

然后，

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/lila_background"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="5dp"
    android:background="@drawable/img_background"
    android:orientation="vertical" 
> 
```

当你需要改变时，我认为它就像..

```
 ((LinearLayout)findViewById(R.id.lila_background)).setBackgroundDrawableResource(R.drawable.image_name); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:44:33.500

您好，只需将 android:background="@drawable/addon" 添加到您的布局 xml

# c# - 将数据从 XML 传递到视图

> ID：10346442
> 
> 赞同：1
> 
> 时间：2012-04-27T07:23:28.223
> 
> 标签：c#, xml, dom, linq-to-xml, deserialization

这些天我一直在阅读有关反序列化、DOM、LINQ to XML 和 LINQ to XSD 的文章……有一段时间了，但由于我是新手，我并没有真正了解全貌，所以我会尝试向您解释我的风景：

我从另一个人那里获取一个 xml，我只是想在 MVC 项目视图中显示它附带的信息。

我真的没有 xsd，所以我认为要将其反序列化为一个对象，我必须使用 XSD 工具来创建一个方案，然后是一个与该方案匹配的类，然后填充该类并在视图中使用它。我认为这可以通过一个示例 xml 来完成，对吗？

另一种选择是创建“我的对象”并通过 DOM 填充它。我最近做了类似的事情（我发布了一个关于它的问题），甚至尝试了一些 LINQ 方法（我已经阅读了 LINQ to XSD 已被微软放弃）。

对于我想做的简单事情，我会选择 LINQ to XML，但老实说，我还没有完全理解我所读到的关于不同方法的优缺点的所有差异，所以如果有人可以帮助我决定我真的很感激。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:42:07.197

我将分享我们在当前项目中使用的 XMLManager。它真的很容易使用，你只需传入你想要序列化的对象的类型，就像这样：

```
YourObject myObject = new YourObject();
myObject.SomeInfoString = "Hello World";
XMLManager<YourObject>.SerialzeToFile(myObject, pathToSaveTo)

YourObject loadedObject = XMLManager<YourObject>.SerialzeFromFile(pathToYourFile) 
```

这是实现（请注意，您可能想在 catch 子句中做一些事情，我已经删除了我们在那里所做的事情，因为它特定于 out 实现）：

```
using System;
using System.Diagnostics;
using System.IO;
using System.Reflection;
using System.Xml;
using System.Xml.Serialization;

/// <summary>
/// The XMLManager can be used to serialize to and from XML files.
/// </summary>
/// <typeparam name="T">The type to serialize.</typeparam>
public static class XmlManager<T>
{
    /// <summary>
    /// Static method SerializeFromFile
    /// </summary>
    /// <param name="path">
    /// The path.
    /// </param>
    /// <returns>
    /// returns T
    /// </returns>
    public static T SerializeFromFile(string path)
    {
        try
        {
            using (var xmlStream = new FileStream(path, FileMode.Open))
            {
                return FromStream(xmlStream);
            }
        }
        catch (Exception ex)
        {
            return default(T);
        }
    }

    /// <summary>
    /// Method FromStream
    /// </summary>
    /// <param name="xmlStream">
    /// The xml stream.
    /// </param>
    /// <returns>
    /// returns T
    /// </returns>
    public static T FromStream(Stream xmlStream)
    {
        try
        {
            var xmlReader = XmlReader.Create(xmlStream);
            var serializer = new XmlSerializer(typeof(T));

            var value = (T)serializer.Deserialize(xmlReader);
            return value;
        }
        catch (Exception ex)
        {
            return default(T);
        }
    }

    /// <summary>
    /// Method SerializeToFile
    /// </summary>
    /// <param name="xmlObject">
    /// The xml object.
    /// </param>
    /// <param name="xmlPath">
    /// The xml path.
    /// </param>
    /// <param name="overwriteExisting">
    /// The overwrite existing.
    /// </param>
    public static void SerializeToFile(T xmlObject, string xmlPath, bool overwriteExisting)
    {
        try
        {
            var mode = overwriteExisting ? FileMode.Create : FileMode.CreateNew;
            using (var xmlStream = new FileStream(xmlPath, mode))
            {
                ToStream(xmlObject, xmlStream);
            }
        }
        catch (Exception ex)
        {
        }
    }

    /// <summary>
    /// Method ToStream
    /// </summary>
    /// <param name="xmlObject">
    /// The xml object.
    /// </param>
    /// <param name="xmlStream">
    /// The xml stream.
    /// </param>
    public static void ToStream(T xmlObject, Stream xmlStream)
    {
        try
        {
            var xmlSettings = new XmlWriterSettings { Indent = true, NewLineOnAttributes = false };

            var writer = XmlWriter.Create(xmlStream, xmlSettings);
            var serializer = new XmlSerializer(typeof(T));

            serializer.Serialize(writer, xmlObject);
        }
        catch (Exception ex)
        {
        }
    }
} 
```

要将此信息传递给视图，请在已使用 XMLManager 反序列化的对象的 ViewModel 中创建一个属性，并通过 XAML 绑定它。

```
public string MyObjectInfoString 
{
    get
    {
        return this.myObject.InfoString;
    }

    set
    {
        if (this.myObject.InfoString == value)
        {
            return;
        }

        this.myObject.InfoString = value;
        RaisePropertyChanged("MyObjectInfoString");
    }
} 
```

[编辑] 也可以显示 XAML：

```
<TextBlock Text="{Binding MyObjectInfoString}" /> 
```

# c++ - 标准库字符串的新位置内存泄漏

> ID：10346447
> 
> 赞同：2
> 
> 时间：2012-04-27T07:23:41.853
> 
> 标签：c++, linux, solaris

我在放置新的标准库字符串时面临内存泄漏。

下面我给出了泄漏显示的代码。

```
string string1("new string");
char _string[sizeof(string)];
new(_string) string(string1); 
```

使用dbx发现泄漏，如下图

```
Actual leaks report    (actual leaks:            1  total size:         52 bytes)

  Total     Num of  Leaked     Allocation call stack
  Size      Blocks  Block
                    Address
==========  ====== =========== =======================================
        52       1    0x43f68  operator new < std::basic_string<char,std::char_traits<char>,std::allocator<char> >::__getRep < std::basic_string<char,std::char_traits<char>,std::allocator<char> >::basic_string < main

Possible leaks report  (possible leaks:          0  total size:          0 bytes) 
```

这是真正的内存泄漏还是 dbx 将其解释为泄漏？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-27T07:29:07.753

您仍然需要为您通过放置 new 创建的字符串对象调用析构函数。

`std::string`为其存储在堆上的字符分配存储空间（除非您指定自定义分配器，这可能是您在此处所追求的），并且您正在泄漏它。(`sizeof(string)`是一个常数，不依赖于存储在字符串中的内容。)

# java - 滚动 JPanel

> ID：10346449
> 
> 赞同：17
> 
> 时间：2012-04-27T07:23:46.857
> 
> 标签：java, swing, scroll, jpanel

我想要一个具有大小和定义位置的 JPanel。在 JPanel 内部，我水平插入了一定数量的元素（按钮）。因为我的 JPanel 有一个定义的宽度，所以如果我添加很多按钮，我就看不到它。在这种情况下，我需要这个 JPanel 的滚动条。但是这个 JPanel 必须是 JFrame 内某个位置的某个大小。JPanel 的滚动条水平放置在其下方。有人可以帮助我吗？我试过没有成功！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-27T07:40:32.053

使用 JScrollPane 并将其 preferredSize 强制为给定大小（或将 scrollPane 容器 LayoutManager 设置为 null 并在滚动窗格上调用 setBounds()）。还要设置滚动条策略。这是其中的一个小示例：

```
import java.awt.Dimension;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;

public class Test {

    public static void main(String... args) {
        JFrame frame = new JFrame();
        JPanel panel = new JPanel();
        for (int i = 0; i < 10; i++) {
            panel.add(new JButton("Hello-" + i));
        }
        JScrollPane scrollPane = new JScrollPane(panel);
        scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        scrollPane.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_NEVER);
        scrollPane.setBounds(50, 30, 300, 50);
        JPanel contentPane = new JPanel(null);
        contentPane.setPreferredSize(new Dimension(500, 400));
        contentPane.add(scrollPane);
        frame.setContentPane(contentPane);
        frame.pack();
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T07:34:01.717

将所有按钮添加到您的面板。然后将此面板添加到滚动窗格。

```
panel.add(button1);
panel.add(button2);
panel.add(button3);
.
.
.
panel.add(buttonn); 
```

在面板中添加按钮后，将面板添加到滚动窗格。

```
JScrollPane panelPane = new JScrollPane(panel); 
```

然后将此面板添加到您的框架中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T07:47:16.213

以下是一些可能的解决方案：

*   [带有 JButton 的 JList 和带有 JButton 的 JPanel](https://stackoverflow.com/a/10315718/714968)

或者

*   滚动到决定`Point`或`Rectangle`存在方法，`scrollRectToVisible`例如`myPanel.scrollRectToVisible(myButton.getBounds());`

# android - 避免 PopupWindow 抓住焦点

> ID：10346452
> 
> 赞同：5
> 
> 时间：2012-04-27T07:24:22.583
> 
> 标签：android, popupwindow

我有一个 EditText，它在每次按键时更新一个 PopupWindow。如果我使用 .setFocusable(true) 创建 PopupWIndow，那么它会抓住焦点，我无法继续输入。但是，如果我使用 .setFocusable(false)，PopupWindow 内的 ListView 不会触发 OnItemClickedListener。

是否可以在不抓住焦点的情况下创建一个 PopupWindow，但仍然可以使其中的小部件可点击？

（PopupWidow 不用于自动完成，所以我不认为 AutoCompleteTextView 是我需要的）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-10T17:11:59.060

我猜你可以使用 ListPopupWindow。它为您处理一些焦点问题。这是一个非常简单的代码。它仍然需要添加更多的听众来满足你的需要。但它可以解决焦点问题。

```
ListPopupWindow popup;
EditText editText;
String[] strAry = {"a", "2", "3", "4", "5", "6", "7", "8", "9"};

editText=(EditText)this.findViewById(R.id.editText);
popup= new ListPopupWindow(this.getApplicationContext());
popup.setAdapter(new ArrayAdapter(this,android.R.layout.simple_expandable_list_item_1,strAry));
popup.setAnchorView(editText);
popup.setInputMethodMode(ListPopupWindow.INPUT_METHOD_NEEDED);

editText.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View eventView) {
        if(!popup.isShowing()){
            popup.setInputMethodMode(ListPopupWindow.INPUT_METHOD_NEEDED);
            popup.show();
        }
    }
});
editText.addTextChangedListener(new s(){
    @Override
    public void afterTextChanged(Editable arg0) {}
    public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
        int arg3) {}
    @Override
    public void onTextChanged(CharSequence arg0, int arg1, int arg2, int arg3) {
        if(!popup.isShowing()){
            popup.setInputMethodMode(ListPopupWindow.INPUT_METHOD_NEEDED);
            popup.postShow();
        }
    }
}); 
```

# nsmutablearray - 如何撤消和重做手势处理

> ID：10346454
> 
> 赞同：1
> 
> 时间：2012-04-27T07:24:29.313
> 
> 标签：nsmutablearray, uigesturerecognizer, nsundomanager

我写了一个没有核心数据的应用程序。现在我想包含在没有核心数据的情况下实现撤消和重做的方法。
不幸的是，我在互联网、书籍等上一无所获。

我认为我有两个 NSMutableArray 应该具有堆栈的功能。
所以我称它们为 undoStack 和 redoStack。如果我做手势之类的动作，这个动作应该保存在数组中：

> [undoStack addObject:gestureRecognizer];

如果我单击按钮撤消，应执行以下语句：

> [undoStack removeObject: [undoStack lastObject]]; 和
> 
> [redoStack addObject: [undoStack lastObject]];

最后我有一个保存按钮，它会自动清除堆栈

这一切都很好，但是如何将所有操作保存在一个数组中？
动作如：panGesture、pinchGesture 和 rotationGesture

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T15:58:42.820

将所有动作添加到`NSMutableArray`（panGesture、pinchGesture、rotationGesture），然后将该数组添加到`undoStack`数组中。并像使用一个对象一样使用它。只有当你需要使用它时，你才需要提取它。或者，如果您有`4 gestures`，则可以将所有手势添加到`undoStack`，当您需要将它们移动到时`redoStack`，取出最后 4 个对象并添加到`redoStack`。

# facebook - Facebook 页面的“page_posts_impressions”和其他“页面帖子”洞察力不适用于 fql

> ID：10346455
> 
> 赞同：2
> 
> 时间：2012-04-27T07:24:32.787
> 
> 标签：facebook, facebook-graph-api, facebook-insights

`https://graph.facebook.com/fql?q=select object_id, metric, value from insights where metric in ('page_posts_impressions_unique') and object_id = OBJECT_ID and end_time = 1272351600 and period = period('day')`

以上返回空数组，而`https://graph.facebook.com/OBJECT_ID/insights/page_posts_impressions_unique`返回数据。

似乎没有一个“页面帖子”适用于 fql，但其他见解，如“页面印象”、“页面参与”工作正常。

我在这里做错了什么？错了`period`还是`end_time`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:09:14.107

看起来`end_time`需要准确设置为 12AM PST/PDT（取决于夏令时）unix 时间，否则查询返回空。示例：1330588800

编辑：切换到“/insights”并传递“since”参数，这里的时间不那么严格。

# iphone - 如何在单击登录页面时加载新视图以检查iphone中的用户名和密码的情况

> ID：10346456
> 
> 赞同：0
> 
> 时间：2012-04-27T07:24:37.053
> 
> 标签：iphone, objective-c, ios, login, xcode4.3

我想通过检查登录条件，即如果用户提供正确的用户名和密码重定向到 Xcode 4.3.2 中的新视图，我想通过单击登录按钮重定向到新视图，我正在使用肥皂服务来获取用户名和密码。

我尝试谷歌搜索，但我无法获得有效的。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:31:41.233

我会选择 modalview 控制器-> 当您的应用程序在 appdelegate 或您的 mainviewcontroller 中启动时，只需显示模态视图控制器，在用户为您提供正确的凭据后，只需关闭此模态视图控制器即可。

[UIViewController类参考-presentViewController方法](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

还有许多其他（自定义）方法可以实现这一点（更少你正在玩视图/动画等），这可能是最直接的一种

# c# - 如果未设置某些参数，C# 向用户显示表单

> ID：10346459
> 
> 赞同：0
> 
> 时间：2012-04-27T07:24:52.103
> 
> 标签：c#, forms, class

我想创建一个具有发送电子邮件功能的类。

如果已设置相关属性（this.subject、this.toemail 等），我希望它直接发送电子邮件但如果未设置这些属性，我想向用户显示一个表单（上面有一些文本框) 填写这些参数。

我不知道这样做的最佳方法是什么。我也不知道从哪里开始。你能给我举个例子或给我指点什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:28:40.490

你正在混合担忧。

我建议您有逻辑来确定电子邮件是否存在所有相关信息，如果没有，则显示一个表单，其唯一责任是收集缺失的信息。

提供缺少的信息后，让您的电子邮件发送逻辑继续并完成发送电子邮件。

我不确切地知道您的代码的结构，但这里是对伪代码可能是什么样子的一个尝试。

```
btnSend_Click(...)
{
   EmailSendingClass sender = new EmailSendingClass();
   //  Initialize sender with from, to, etc.
   if (!sender.IsComplete)
   {
       FrmGetMissingFields frm = new FrmGetMissingFields(sender);
   }
   sender.SendEmail();
} 
```

# android - 如何发现外部应用程序中的某些接口并与之通信

> ID：10346464
> 
> 赞同：0
> 
> 时间：2012-04-27T07:25:21.013
> 
> 标签：android

给定各种过滤参数，我的应用程序正在搜索数据。该数据是从多个来源（即 Internet 上的多个站点）获取的。我希望其他开发人员能够实现**他们自己的数据源**，这样他们就可以将它们“插入”到我的应用程序中**，而无需**我进行任何操作。

实现这一目标的最佳方法是什么？尤其：

1.  外部开发人员应该怎么做才能使他们的实现对我的流程可见？
2.  我如何发现这样的外部实现？
3.  一旦发现，我可以使用什么作为这些实现中的每一个的标识符？
4.  如何与外部实现的各种“方法”进行通信。

我最好的猜测是使用服务：

1.  *让外部开发人员使用具有指定 URI*的意图过滤器设置他们的服务。
2.  使用[PackageManager](http://developer.android.com/reference/android/content/pm/PackageManager.html) #queryIntentServices 方法列出与*指定 URI 匹配的*所有服务。
3.  使用他们的包名作为标识符，所以我可以直接在那个包上启动意图。
4.  相信外部开发人员会倾听并正确响应我的文档中指定的所有意图。我会将 PendingIntent 或 Messenger 对象传递给它们以获取结果。

我还没有尝试过，我是 Android 的初学者。这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:29:19.493

> 让外部开发人员使用具有指定 URI 的意图过滤器设置他们的服务。
> 
> 使用 PackageManager#queryIntentServices 方法列出与指定 URI 匹配的所有服务。

如果“URI”是指“动作”，这当然是一种方法。

> 使用他们的包名作为标识符，所以我可以直接在那个包上启动意图。

是的。

> 相信外部开发人员会倾听并正确响应我的文档中指定的所有意图。我会将 PendingIntent 或 Messenger 对象传递给它们以获取结果。

那些会起作用的。我倾向于 PendingIntent。

> 这是正确的方法吗？

::耸肩::

“妥”，如同真与美，存在于旁观者的眼中。

（希望不是[那个旁观者](http://en.wikipedia.org/wiki/Beholder)——那些事情很讨厌）

您的方法本质上没有任何问题。我可能会做同样的事情，以我上面的评论为模。

一些替代方案：

*   相同的策略，但让服务导出一个与 AIDL 的绑定接口，并将您的主机绑定到它们（优点：更丰富的 API，缺点：设置起来更痛苦，特别是如果您的主机是一个活动）

*   插件是`ContentProviders`，您通过权威命名约定或某些引导方法发现的

*   插件确实通过广播与您交流`Intents`（如果主要数据流是它们向您推送数据而不是您从它们中提取数据，则效果很好）

# java - 如何在 jsf 中使用会话过滤器进行登录表单

> ID：10346467
> 
> 赞同：0
> 
> 时间：2012-04-27T07:25:39.307
> 
> 标签：java, mysql, eclipse, session, jsf

我在我的代码中做了以下修改：ConnectionPool.java：

```
package com.dao;

import java.sql.*;
import javax.sql.DataSource;
import javax.naming.InitialContext;

public class ConnectionPool
{
    private static ConnectionPool pool = null;
    private static DataSource dataSource = null;

    private ConnectionPool()
    {
        try
        {
            InitialContext ic = new InitialContext();
            dataSource = (DataSource) ic.lookup("java:/comp/env/jdbc/fabula");
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
    }

    /** 
     * Get an instance of the connection pool
     * @return ConnectionPool
     */
    public static ConnectionPool getInstance()
    {
        if (pool == null)
        {
            pool = new ConnectionPool();
        }
        return pool;
    }

    /**
     * Get a connection
     * @return Connection
     */
    public Connection getConnection()
    {
        try
        {
            return dataSource.getConnection();
        }
        catch (SQLException sqle)
        {
            sqle.printStackTrace();
            return null;
        }
    }

    /**
     * Free a connection
     * @param c
     */
    public void freeConnection(Connection c)
    {
        try
        {
            c.close();
        }
        catch (SQLException sqle)
        {
            sqle.printStackTrace();
        }
    }
} 
```

DBUtil.java：

```
package com.dao;    

import java.sql.*;

public class DBUtil
{
    public static void closeStatement(Statement s)
    {
        try
        {
            if (s != null)
                s.close();
        }
        catch(SQLException e)
        {
            e.printStackTrace();
        }
    }

    public static void closePreparedStatement(Statement ps)
    {
        try
        {
            if (ps != null)
                ps.close();
        }
        catch(SQLException e)
        {
            e.printStackTrace();
        }
    }

    public static void closeResultSet(ResultSet rs)
    {
        try
        {
            if (rs != null)
                rs.close();
        }
        catch(SQLException e)
        {
            e.printStackTrace();
        }
    }
} 
```

用户DAO.java：

```
package com.dao;

import java.sql.*;
import java.util.ArrayList;
import java.util.List;

import com.entities.User;
import com.dao.DBUtil;

public class UserDAO
{

    /**
     * Get a specific user from the data store
     * @param userName
     * @return collection of User objects
     */
    public static User getUser(String userName)
    {
        ConnectionPool pool = ConnectionPool.getInstance();
        Connection connection = pool.getConnection();
        PreparedStatement ps = null;
        ResultSet rs = null;

        User usersList = new User();

        String query = "SELECT * FROM users " +
                       "WHERE username = ?";
        System.out.println("Query:"+query);
        try
        {
            ps = connection.prepareStatement(query);
            ps.setString(1, userName);
            rs = ps.executeQuery();
            System.out.println("Query1:"+query);
            while (rs.next())
            {
                User user = new User();
                user.setUsername(rs.getString("username"));
                user.setUserId(Integer.valueOf(rs.getString("userid") ) );
                user.setPassword(rs.getString("password") );

                System.out.println("username1:"+rs.getString("username"));
                System.out.println("password1:"+rs.getString("password"));
            }
            return usersList;
        }
        catch (SQLException e){
            e.printStackTrace();
            return null;
        }        
        finally
        {
            DBUtil.closeResultSet(rs);
            DBUtil.closePreparedStatement(ps);
            pool.freeConnection(connection);
        }
    }

    /**
     * Get all users from the data store
     * @return collection of User objects
     */
    public static List <User> getAllUsers()
    {
        ConnectionPool pool = ConnectionPool.getInstance();
        Connection connection = pool.getConnection();
        PreparedStatement ps = null;
        ResultSet rs = null;

        List <User>usersList = new ArrayList<User>();

        String query = "SELECT * FROM users ";
        try
        {
            ps = connection.prepareStatement(query);
            rs = ps.executeQuery();

            while (rs.next())
            {
                User user = new User();
                user.setUsername(rs.getString("username"));
                user.setUserId(Integer.valueOf(rs.getString("userid")));
                user.setPassword(rs.getString("password") );
                usersList.add(user);
            }
            return usersList;
        }
        catch (SQLException e){
            e.printStackTrace();
            return null;
        }        
        finally
        {
            DBUtil.closeResultSet(rs);
            DBUtil.closePreparedStatement(ps);
            pool.freeConnection(connection);
        }
    }
} 
```

用户.java：

```
package com.entities;

public class User {
    private String username;
    private String password;
    private int userId;
    public User()
    {}
    public User(int userId, String name, String password) {
        super();
        this.userId = userId;
        this.username = name;
        this.password = password;
    }
    public String getUsername() {
        return username;
    }

    public void setUsername(String name) {
        this.username = name;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public int getUserId() {
        return userId;
    }

    public void setUserId(int userId) {
        this.userId = userId;
    }
} 
```

登录过滤器.java：

```
package com.filter;

import java.io.IOException;
import javax.faces.context.FacesContext;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.annotation.WebFilter;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.sql.DataSource;

@WebFilter("/WebContent/user.xhtml")
public class LoginFilter implements Filter
{
    HttpServletRequest req;
    HttpServletResponse resp;

    DataSource ds;
    InitialContext ctx;

    FilterConfig config;
    FacesContext context;

    @Override
    public void init(FilterConfig filterConfig){
        System.out.println("Instance created of " + getClass().getName());
        try {
            ctx = new InitialContext();
            ds = (DataSource) ctx.lookup("java:comp/env/jdbc/fabula");
        } catch (NamingException e) {
            e.printStackTrace();
        }
        this.config = filterConfig;
    }

    @Override
    public void doFilter(ServletRequest request, ServletResponse response,
            FilterChain chain) throws IOException, ServletException {
        if (req.getSession().getAttribute("username") == null) {
                resp.sendRedirect(req.getContextPath() + "/login.xhtml");
        } 
        else 
        {
                chain.doFilter(req, resp);
        }
    }

    @Override
    public void destroy() {
    }
} 
```

登录操作.java：

```
package com.service;

import javax.faces.application.FacesMessage;
import javax.faces.bean.RequestScoped;
import javax.faces.bean.ManagedBean;
import javax.faces.context.FacesContext;

import com.dao.UserDAO;
import com.entities.User;

@ManagedBean
@RequestScoped
public class LoginAction
{
    UserService userService = new UserService();

    private String username;
    private String password;
    private User selectedUser;
    FacesContext context;

    public String getUsername()
    {
        return username;
    }

    public void setUsername(String username)
    {
        this.username = username;
    }

    public String getPassword()
    {
        return password;
    }

    public void setPassword(String password)
    {
        this.password = password;
    }

    public User getSelectedUser()
    {
        if(selectedUser == null){
            selectedUser = new User();
        }
        return selectedUser;
    }

    public void setSelectedUser(User selectedUser)
    {
        this.selectedUser = selectedUser;
    }

    public String login()
    {
        User user = UserDAO.getUser(username);
        FacesContext context = FacesContext.getCurrentInstance();
        if (user != null) 
        {
            context.getExternalContext().getSessionMap().put("user", user);
            return "user?faces-redirect=true";
        } 
        else 
        {
            context.addMessage("username", new FacesMessage("Invalid UserName and Password"));
            return "login";
        }
    }
} 
```

用户服务.java：

```
package com.service;

import java.util.ArrayList;
import java.util.Collection;
import java.util.HashMap;
import java.util.Map;
import java.util.Set;

import com.entities.User;

public class UserService {

    private static final Map<Integer, User> USERS_TABLE = new HashMap<Integer, User>();

    public Integer create(User user)
    {
        if(user == null)
        {
            throw new RuntimeException("Unable to create User. User object is null.");
        }
        Integer userId = this.getMaxUserId();
        user.setUserId(userId);
        USERS_TABLE.put(userId, user);
        return userId;
    }

    public Collection<User> getAllUsers()
    {
        return USERS_TABLE.values();
    }

    public User getUser(Integer userId)
    {
        return USERS_TABLE.get(userId);
    }

    public Collection<User> searchUsers(String username)
    {
        String searchCriteria = (username == null)? "":username.toLowerCase().trim();
        Collection<User> users = USERS_TABLE.values();
        Collection<User> searchResults = new ArrayList<User>();
        for (User user : users)
        {
            if(user.getUsername() != null && user.getUsername().toLowerCase().trim().startsWith(searchCriteria))
            {
                searchResults.add(user);
            }
        }
        return searchResults;
    }

    public void update(User user)
    {
        if(user == null || !USERS_TABLE.containsKey(user.getUserId()))
        {
            throw new RuntimeException("Unable to update User. User object is null or User Id ["+user.getUserId()+"] is invalid." );
        }
        USERS_TABLE.put(user.getUserId(), user);
    }

    protected Integer getMaxUserId()
    {
        Set<Integer> keys = USERS_TABLE.keySet();
        Integer maxId = 1;
        for (Integer key : keys)
        {
            if(key > maxId)
            {
                maxId = key;
            }
        }
        return maxId;
    }

} 
```

登录.xhtml：

```
<html xmlns="http://www.w3c.org/1999/xhtml"
        xmlns:f="http://java.sun.com/jsf/core"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:p="http://primefaces.prime.com.tr/ui">
<h:head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="refresh" content="${pageContext.session.maxInactiveInterval};url=sessionexpired.jsp"/>
<title>User login</title>
</h:head>
<h:body>
<div id="wrapper">
<h:form>
<div><h:messages ></h:messages></div>
<div id="entrypermission">
<label class="lbl"> User Name: </label><h:inputText id="user" value="#{loginAction.username}" label="Username" require="true"></h:inputText>
<label class="lbl"> Password: </label><h:inputSecret id="pass" value="#{loginAction.password}" label="Password" required="true"></h:inputSecret>
<h:outputText value=" "/><h:commandButton type="submit" value="Log In" action="#{loginAction.login}"></h:commandButton>
</div>
</h:form>
</div>
</h:body> 
```

用户.xhtml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.prime.com.tr/ui">
<h:head>
</h:head>
<h:body>
    <center>
        <h1>Welcome to the user</h1>
    </center>
</h:body>
</html>
    </html> 
```

我的 web.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
    id="WebApp_ID" version="3.0">
    <display-name>UserInfo</display-name>
    <welcome-file-list>
        <welcome-file>index.html</welcome-file>
        <welcome-file>index.htm</welcome-file>
        <welcome-file>index.jsp</welcome-file>
        <welcome-file>default.html</welcome-file>
        <welcome-file>default.htm</welcome-file>
        <welcome-file>default.jsp</welcome-file>
    </welcome-file-list>
    <session-config>
        <session-timeout>30</session-timeout>
    </session-config>
    <filter>
        <filter-name>SessionFilter</filter-name>
        <filter-class>com.filter.LoginFilter</filter-class>
    </filter>
    <filter-mapping>
        <filter-name>SessionFilter</filter-name>
        <url-pattern>*.xhtml</url-pattern>
    </filter-mapping> 
    <resource-ref>
        <description>MySQL Datasource example</description>
        <res-ref-name>jdbc/fabula</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
    </resource-ref>
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.faces</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>
    <context-param>
        <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
        <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
        <param-value>client</param-value>
    </context-param>
    <context-param>
        <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
        <param-value>resources.application</param-value>
    </context-param>
    <listener>
        <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
    </listener>
</web-app> 
```

但是在运行我的应用程序时，我得到了输出，但它没有从数据库中检查用户名并转到下一页以获得非常有价值的信息。因此，我已经在 LoginAction.java 和 UserDAo.java 中进行了修改。登录操作.java：

```
 String pwd = "";
    String uname = "";
    List<User> result;
    public String login()
        {
            //List<User> result=UserDAO.getUser(username);
            //User user = UserDAO.getUser(username);
            String username = getUsername();
            FacesContext context = FacesContext.getCurrentInstance();
            if (username != null) 
            {
                result=UserDAO.getUser(username);
                if(result.size() >0)
                {
                    uname = result.get(0).getUsername();
                    pwd = result.get(0).getPassword();  
                }
                context.getExternalContext().getSessionMap().put("user", username);
                return "user?faces-redirect=true";
            } 
            else 
            {
                context.addMessage("username", new FacesMessage("Invalid UserName and Password"));
                return "login?faces-redirect=true";
            }
        } 
```

用户DAO.java：

```
 public static List<UserForm> getUser(String userName)
    {
        ConnectionPool pool = ConnectionPool.getInstance();
        Connection connection = pool.getConnection();
        PreparedStatement ps = null;
        ResultSet rs = null;

        List <UserForm>usersList = new ArrayList<UserForm>();

        String query = "SELECT * FROM users " +
                       "WHERE username = ?";
        System.out.println("Query:"+query);
        try
        {
            ps = connection.prepareStatement(query);
            ps.setString(1, userName);
            rs = ps.executeQuery();
            System.out.println("Query1:"+query);
            while (rs.next())
            {
                UserForm user = new UserForm();
                user.setUsername(rs.getString("username"));
                user.setUserId(Integer.valueOf(rs.getString("userid") ) );
                user.setPassword(rs.getString("password") );

                usersList.add(user);
                System.out.println("username1:"+rs.getString("username"));
                System.out.println("password1:"+rs.getString("password"));
            }
            return usersList;
        }
        catch (SQLException e){
            e.printStackTrace();
            return null;
        }        
        finally
        {
            DBUtil.closeResultSet(rs);
            DBUtil.closePreparedStatement(ps);
            pool.freeConnection(connection);
        }
    } 
```

但它没有从数据库中获取登录表单的数据。请提供建议如何执行此操作以及使用会话过滤器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T13:12:00.757

您将登录过滤器和 JSF 托管 bean 的职责混合在一个类中。这个不对。将它们分成 2 个类。

一类过滤器：

```
@WebFilter("/secured/*")
public class LoginFilter implements Filter {

    // ...

} 
```

`@WebFilter`注释会将过滤器映射到 URL 模式，`/secured/*`您可以将其更改为受保护页面的任何常见路径，例如`/app/*`,`/private/*`等。

还有一个支持 bean 类：

```
@ManagedBean
@RequestScoped
public class LoginBacking {

    // ...

} 
```

不要成功`@ApplicationScoped`。它的属性将在整个应用程序的整个生命周期中在**所有用户之间共享。**也不要将 HTTP 请求、响应、会话和 JSF 上下文作为 bean 的属性。它使您的代码线程不安全。换句话说，以下所有属性都是禁止的：

```
public static HttpSession session;
HttpServletRequest req;
HttpServletResponse resp;
FacesContext context; 
```

至于您的具体问题，您如何`User`从 DAO 检索并检查登录的方式很奇怪。DAO`List<User>`根据用户名返回一个。真的有可能有多个用户具有相同的登录名吗？那么你的数据库数据模型中还有另一个严重的问题。在登录名上加上一个`UNIQUE`。将 DAO 更改为仅返回 a`User`而不是`List<User>`. 最后改变DAO方法如下：

```
public User find(String username, String password) throws SQLException {
    // ...
} 
```

只需执行`SELECT ... FROM ... WHERE username=? AND password=md5(?)`. 如果在 DB 中找不到匹配项，则返回`null`. 如果在 DB 中找到匹配项，则返回`User`.

```
if (resultSet.next()) {
    user = new User();
    user.setId(resultSet.getLong("id"));
    // ...
} 
```

此外，您在这里犯了另一个错误：

```
if(uname == username && pwd == password) 
```

您正在通过 比较字符串`==`。那只会通过引用而不是值来比较它们。如果一个字符串是由 servlet 容器创建的，而另一个字符串是由 JDBC 驱动程序创建的，这将*永远不会*评估。`true`您宁愿使用`equals()`方法。`userDAO.find()`但是，如果您只是检查是否返回，那么该检查毕竟是完全没有必要的`null`。

总而言之，您的整个`login()`方法可以简化如下：

```
public String login() {
    User user = userDAO.find(username, password);
    FacesContext context = FacesContext.getCurrentInstance();

    if (user != null) {
        context.getExternalContext().getSessionMap().put("user", user);
        return "user?faces-redirect=true";
    } else {
        context.addMessage("username", new FacesMessage("Invalid UserName and Password"));
        return null;
    }
} 
```

不要忘记`doFilter()`相应地更改方法：

```
if (req.getSession().getAttribute("user") == null) {
    resp.sendRedirect(req.getContextPath() + "/login.xhtml");
} else {
    chain.doFilter(req, resp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:17:55.663

好吧，在日志中，您看到错误发生在 LoginAction.java 的第 89 行。大概是这条线

```
String uname =  result.get(0).getUsername(); 
```

我的猜测是

列表结果=UserDAO.getUser(username);

没有结果，因为未找到用户名。所以结果将是=null。当它为空时，你不能做 result.get(0) 。

添加对 result==null 的检查。然后你知道用户名或密码不正确。

“以及如何使用会话过滤器进行登录”是什么意思。你想达到什么目标？

# java - 使用 weblogic API 在 weblogic 中重新启动托管服务器

> ID：10346468
> 
> 赞同：3
> 
> 时间：2012-04-27T07:25:44.163
> 
> 标签：java, weblogic

我的公司想要自动化管理服务器的过程，要求之一是自动重新启动托管服务器。有什么办法可以使用java代码做到这一点。可能与 weblogic API 一起使用？简而言之，每当有通过电子邮件重新启动托管服务器的请求时，我都需要重新启动托管服务器。

拉维

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T07:42:20.397

是的，可以使用[JMX](http://docs.oracle.com/cd/E21764_01/web.1111/e13728/accesswls.htm)，特别是`ServerRuntimeMBean`Weblogic 内部有停止和重新启动的方法。

[这里给出了](http://verticalhorizons.in/jmx-client-code-to-start-stop-suspend-and-resume-weblogic-server-using-serverruntimembean/)一个完整的例子

# windows - Windows 中通过蓝牙接收文件的命令行工具

> ID：10346469
> 
> 赞同：1
> 
> 时间：2012-04-27T07:25:50.093
> 
> 标签：windows, command-line, bluetooth, obex

是否有任何命令行工具可以使用蓝牙 OPP 配置文件在 Windows 中接收文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T16:08:55.120

参见 Brecham.Obex 的服务器端库示例中的 CmdlineRunner 应用程序。 [http://inthehand.co.uk/files/folders/objectexchange/default.aspx](http://inthehand.co.uk/files/folders/objectexchange/default.aspx) “Brecham ObexServer r6”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T23:00:07.637

另请参阅[http://bluetoothinstaller.com/bluetooth-command-line-tools/](http://bluetoothinstaller.com/bluetooth-command-line-tools/)

我还没有尝试过这个软件，但计划下周收到一些 BT 加密狗时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T09:02:28.213

我认为这可能会奏效： http: [//forkbeard.sourceforge.net/#mozTocId111209](http://forkbeard.sourceforge.net/#mozTocId111209)

# php - php编码问题（utf8到iso）

> ID：10346470
> 
> 赞同：2
> 
> 时间：2012-04-27T07:25:51.753
> 
> 标签：php

我实际上有 2 页，一页是 ISO，另一页是 UTF8。我不可能在不弄得一团糟的情况下改变它们。

UTF8 页面中有一个表单，向 ISO 页面发送一个 GET 汉字数据。
url 看起来`search=文員`是 UTF8。

我在 ISO 页面上收到数据，但无法将其放入可读字符中。

有解决办法吗？

也许我应该在 Javascript 中转换 UTF8 页面上的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:28:53.283

如果您可以修改发送页面，请将以下内容添加到您的表单标签中：

```
<form accept-charset="ISO-..."> 
```

为第二页插入正确的编码。有关更多信息，请查看[MDN](https://developer.mozilla.org/en/HTML/Element/form)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:38:00.117

除了给表单一个`accept-target`属性外，另一种选择是转换接收页面上的数据：

```
$data = $_POST['data']; // for example
$data = iconv('UTF-8', 'ISO-ENCODING-HERE', $data); 
```

[`iconv`](http://php.net/manual/en/function.iconv.php)如果输入数据无法在目标字符集中表示，请参阅文档以了解影响函数行为的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T07:49:20.273

您可以使用此函数将字符串从当前编码转换为所需的目标编码：

```
function correct_encoding($text, $target_encoding='UTF-8') {
    $current_encoding = mb_detect_encoding($text, 'auto');
    $text = iconv($current_encoding, $target_encoding, $text);
    return $text;
} 
```

# javascript - 为什么输入的 value 属性没有变化？

> ID：10346471
> 
> 赞同：8
> 
> 时间：2012-04-27T07:25:53.663
> 
> 标签：javascript, html

好吧，我有这段代码：

```
<input id="CI.SiteName" type="text" value="" name="@@CI.SiteName" disabled=""> 
```

然后我做了一些会调用这个函数的事件：

```
chooseSite = function () {
    var url = "/main/Ajax/GetSiteDetail?" +
        "&cid=" + escape(idSite);

    var ajx = sendAJAX(url, true);

    ajx.onreadystatechange = function () {
        if (ajx.readyState == 4) {
            var result = ajx.responseText;      
            result = "TOP";
            document.getElementById("CI.SiteName").value = result;
        }   
    }
} 
```

在浏览器中它更改为“TOP”，但是当我用 firebug 检查元素时，INPUT 的 VALUE 属性仍然“”，没有改变。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-27T07:29:28.237

`value` *属性*与实际值不同步；这就是该`value` *物业*的用途。

这不是问题，因为您永远不会使用`.getAttribute('value')`但使用该属性`.value`来访问当前值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-26T18:51:56.407

```
<!DOCTYPE html>
<html>

<head>
  <title>Test</title>
  <meta charset="UTF-8" />
</head>

<body>
  <div id="app"></div>
  <div id="buttons">
    <button id="1" data-text="one">1</button>
    <button id="2" data-text="two">2</button>
    <button id="3" data-text="three">3</button>
    <button id="4" data-text="four">4</button>
    <button id="5" data-text="five">5</button>
    <input id="inp" value=""></input>
  </div>

  <script>
    const onClick = function() {

      var dataTextBtnField = this.getAttribute("data-text");
      var currentData = document.getElementById("inp").value

      var showValue = currentData + dataTextBtnField
      document.getElementById("inp").setAttribute("value", showValue);
      document.getElementById("inp").value = showValue;
    }

    const onChange = function() {
      this.setAttribute("value", this.value);
    }

    document.getElementById('1').onclick = onClick;
    document.getElementById('2').onclick = onClick;
    document.getElementById('3').onclick = onClick;
    document.getElementById('4').onclick = onClick;
    document.getElementById('5').onclick = onClick;
    document.getElementById('inp').onchange = onChange;
  </script>

</body>

</html>
```

```
document.getElementById("inp").setAttribute("value", showValue); 
```

使用它只会改变 HTML 代码，不会反映在视图中。

```
document.getElementById("inp").value = showValue; 
```

使用它只会在视图中更改，而不会在代码中更改。

使用两条线在两个位置进行更改。

评论附加片段中的上述行以观察相同的内容。

# c++ - c ++指向类的指针数组，初始化为空指针

> ID：10346472
> 
> 赞同：0
> 
> 时间：2012-04-27T07:26:02.877
> 
> 标签：c++, oop

我正在学习 c++ 和 OOP，我有一个名为“Pion”的类，我有一个“Chessboard”类，在“Chessboard”类中需要声明一个指向“Pion”类的指针的二维数组并将其初始化为 NULL指针。

我知道如何声明二维数组，但我不知道如何将其初始化为 NULL 指针。

声明二维数组应该是这样的： Pion *P[8][8];

但我没有设置为空指针部分。

欢迎任何帮助/提示。

[编辑]

感谢所有的答案/提示，但我仍然很困惑。所以我有一个名为 Chessboard 的类，我需要创建一个链接到“Pion”类的指针的二维数组，这个数组需要是一个类成员并将其初始化为 NULL 指针。

所以我尝试了一些东西，我想出了这个

在 .h （头文件）中，我声明了一个私有成员类

介子 *P[8][8];

在构造函数中我把这个

```
for (int x = 0; x < 8; ++x) {
    for (int y = 0; y < 8; ++y) {
        m_velden[x][y] = NULL;
    }
} 
```

这似乎有效，但我不确定这是否是最好的解决方案

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T07:32:03.120

这取决于 P 是局部变量还是类成员。在第一种情况下，您可以在声明时将所有元素初始化为 NULL

```
Pion *P[8][8] = {}; 
```

在第二种情况下，`P()`在`Chessboard`构造函数的初始化列表中使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T07:35:31.300

几点建议：首先，多维数组在 C++ 中很少值得麻烦；使用一维数组可能更好，然后编写一个函数，该函数接受一行和一列并返回对该逻辑位置元素的引用。一维数组更容易处理。

其次，最好使用`std::array`固定大小的 C 样式数组来代替。使用没有相关的开销`std::array`，它提供了许多免费的好处。

第三，您应该考虑使用智能指针——例如——来`std::unique_ptr<Pion>`确保动态分配的对象的正确所有权和生命周期管理，假设它们是动态分配的。（当然，您还应该确保您确实需要使用指针：它可能就足够了，并且如果您可以避免使用指针并仅`Pion`按值将对象存储在数组中，那么它会简单得多。这是否有意义取决于在您的特定用例上。）

考虑到这三个建议，您最终可能会得到如下所示的内容：

```
class Chessboard
{
    std::array<std::unique_ptr<Pion>, 64> _pions;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:14:25.153

另一个需要考虑的替代方法是向量，它们对于动态调整数组的大小非常有用，特别是对类的“数组”有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T07:30:20.340

尝试这个：

```
for(int i = 0; i < 8; ++i)
{
  for(int j = 0; j < 8; ++j)
  {
    P[i][j] = NULL;
  }
} 
```

# javascript - 带有 Javascript alert() 的 jQuery Ajax 请求

> ID：10346478
> 
> 赞同：1
> 
> 时间：2012-04-27T07:26:16.793
> 
> 标签：javascript, jquery, alert

我的 .html 文件中有一个 Javascript 函数，它本身使用[jQuery.get](http://api.jquery.com/jQuery.get/)方法。在 AJAX 请求的回调方法“成功”中，有一个 javascript alert() 调用。

```
 function test_server(test_url) {
    jQuery.get(test_url, function(data) {
      alert("You have received '" + data + "'");
    });
  } 
```

只要我没有在警报框中单击“确定”，我的 Firebug 控制台中的请求似乎就没有完成。

请求-响应周期是否真的没有完成，或者发送响应的服务器进程是否挂起，直到用户单击“确定”？

PS：我使用的是 Firefox 11.0 和 Firebug 1.9.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T07:37:24.757

我认为这是 Firebug 的一种错误，因为此时必须完成请求。

（在 Chrome 中不会发生）

# ruby-on-rails - rails form_helper 在编辑页面中找不到模型的路径

> ID：10346481
> 
> 赞同：0
> 
> 时间：2012-04-27T07:26:18.420
> 
> 标签：ruby-on-rails, paperclip, ruby-on-rails-3.2

我的**`Picture`**模型包含 2 个字段**照片和描述（照片是来自 papperclip gem 的字段）**

我已经**`PicturesController`**包含了新的创建编辑更新销毁和显示

我已经`routes.rb`通过使用声明`resource :pictures`并且有我的路线。

```
 pictures POST   /pictures(.:format)      pictures#create
 new_pictures GET    /pictures/new(.:format)  pictures#new
edit_pictures GET    /pictures/edit(.:format) pictures#edit
              GET    /pictures(.:format)      pictures#show
              PUT    /pictures(.:format)      pictures#update
              DELETE /pictures(.:format)      pictures#destroy 
```

有我的查看代码

```
 # pictures/new.html.erb & pictures/edit.html.erb 
  <%= form_for @picture, :html => {:multipart => true} do |f| %>

      <div><%= f.label :photo %><br/>
        <%= f.file_field :photo %></div><br/>

      <div><%= f.label :description %><br/>
        <%= f.text_area :description %></div><br/>

      <%= f.submit :upload %>
  <% end %>

  # 
```

我在新建和编辑中使用相同的代码只是更改提交按钮标签。

`new.html.erb`工作正常（创建图片并将其保存到数据库中）。

但是错误出现在`edit.html.erb`

```
 undefined method `picture_path' for #<#<Class:0x007f830e93ad30>:0x007f830e92d5b8> 
```

我已经检查过了`@picture`。为什么rails找不到图片类的更新路径？

[我通过此链接](http://guides.rubyonrails.org/form_helpers.html#relying-on-record-identification)遵循 form_for 指南。

任何想法？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:44:48.583

你的多元化有问题。使用资源 :pictures 你应该有类似..

```
pictures     GET    /pictures(.:format)                    pictures#index
             POST   /pictures(.:format)                    pictures#create
new_picture  GET    /pictures/new(.:format)                pictures#new
edit_picture GET    /pictures/:id/edit(.:format)           pictures#edit
picture      GET    /pictures/:id(.:format)                pictures#show
             PUT    /pictures/:id(.:format)                pictures#update
             DELETE /pictures/:id(.:format)                pictures#destroy 
```

注意图片元素上的单数..这将产生动态图片路径方法

更新：在你的路由文件中将'resource'更改为'resources'，你应该没问题

# javascript - 根据用户给定的关键字突出显示文本区域

> ID：10346483
> 
> 赞同：0
> 
> 时间：2012-04-27T07:26:25.400
> 
> 标签：javascript, jquery, textarea

我已经成功地使用下面的脚本来获得在 textarea 中突出显示的预定义文本。 [http://www.strangeplanet.fr/work/jquery-highlighttextarea/](http://www.strangeplanet.fr/work/jquery-highlighttextarea/)

如何动态更改预定义的文本？例如，用户在特定输入框中输入“绿色”，然后在 textarea 中突出显示“绿色单词”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:30:32.417

也许你可以尝试类似

```
<input type="text" id="wordtohighlight">
<textarea>lorem ipsum green sit dolor amet green</textarea> 
```

JS/jQuery

```
$('#wordtohighlight').on('change', function() {
    var v = $(this).val();
    $("textarea").highlightTextarea({
         words: [v]
    });
} 
```

使用此代码段，您可以在输入更改时调用插件（例如，当`input text`失去焦点/您单击页面上的其他位置时）。如果您愿意，可以尝试使用`keyup`事件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:34:34.390

挂钩输入框的keydown事件并更改单词数组。

我从来没有使用过你链接到的 jQuery 插件，但是这样的东西应该可以工作：

```
$("#target").keydown (function () {
    $("textarea").highlightTextarea({
          words: [$(this).val()]
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T07:57:55.290

```
$("#input-id").bind('keypress',function () {
    var word = $(this).val();
    if (word) {
        $("textarea").highlightTextarea({
            words: [word]
        });
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T07:46:58.757

```
$("#input-id").keydown (function () {
    var word = $(this).val();
    if (word) {
        word += '-words';
        $("textarea").highlightTextarea({
            words: [word]
        });
    }
}); 
```

# air - 无法使用 app.xml 中指定的图标导出 AIR 发布版本

> ID：10346484
> 
> 赞同：3
> 
> 时间：2012-04-27T07:26:38.720
> 
> 标签：air, packaging

当我尝试导出发布版 AIR 构建时，我不断收到错误消息：

创建 AIR 文件时出错：Foo-app.xml：错误 303：图标/C:/Users/Fred/AppData/Local/Temp/assets/icon_16.png 从包中丢失

目录如下：

```
Foo/
  src/
  assets/
  bin/ 
```

app-xml 将图标指定为

```
<icon>
  <image16x16>assets/icon_16.png</image16x16>
  <image32x32>assets/icon_32.png</image32x32>
  <image48x48>assets/icon_48.png</image48x48>
<!-- <image128x128>assets/icon_128.png</image128x128>    -->
</icon> 
```

我尝试移动 bin/ 下的 assets/ 目录并将父代词 (..) 放在标签中。

我将图像嵌入到应用程序中：

```
 [Embed(source="../assets/biocurious_logo.png")]
        public var applicationIconClass : Class;

        [Embed(source="../assets/biocurious_eye_16_16.png")]
        public var applicationIcon16Class : Class;

        [Embed(source="../assets/biocurious_eye_32_32.png")]
        public var applicationIcon32Class : Class;

        [Embed(source="../assets/biocurious_logo_48_48.png")]
        public var applicationIcon48Class : Class;

        [Embed(source="../assets/biocurious_logo_128_128.png")]
        public var applicationIcon128Class : Class; 
```

编译器不会抱怨它找不到文件。

我已经在这里完成了指定的搜索，并且通常使用谷歌。我不知道接下来要尝试什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:59:15.133

当我将资产文件夹移动到 src 文件夹时，我解决了我的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-11T08:43:07.943

我终于找到了这个问题“303 app.xml icon file is missing in package”的解决方案

1.  在***src***中创建***assets***文件夹而不是 application 文件夹
**   尝试将所有版本的图标大小

    ```
    <!-- The icon the system uses for the application. For at least one resolution, 
    specify the path to a PNG file included in the AIR package. Optional. --><icon>
    <image16x16>assets/icon16.png</image16x16>
    <image32x32>assets/icon32.png</image32x32>
    <image48x48>assets/icon48.png</image48x48>
    <image72x72>assets/icon72.png</image72x72>
    <image128x128>assets/icon128.png</image128x128></icon> 
    ```* 

 *希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T13:34:54.333

所以有几件事在我身上跳出来。

1.  如果图像嵌入在应用程序中，您是否也尝试在部署/安装中以某种方式使用它（即桌面图标）？如果没有，那么您甚至不必将它作为部署包的一部分引用——这已经包含在 swf 中。
2.  application.xml 中的图像名称与您在代码中引用的源图像不同，并且它的源路径也不同（即 ../assets 和 assets/）。

如果这些都没有引导您走上正确的道路，您始终可以通过在标准压缩程序中打开 .air 文件来验证其中是否包含源文件（.air 很像 .swc，因为它什么都不是不仅仅是一个压缩包）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-03T07:58:56.357

1.  如果您使用 [Embed (source="/images/info_emb.png" )] 在应用程序中嵌入图像，那么在应用程序的其他位置使用相同的图像意味着它不会存在于已发布的包中。
2.  为每个使用单独的图像。*

# java - SVN Java 库

> ID：10346493
> 
> 赞同：8
> 
> 时间：2012-04-27T07:27:11.593
> 
> 标签：java, svn, tortoisesvn, svnkit, javahl

> **可能重复：**
> [可用于商业开发的开源 svn 客户端 java 库](https://stackoverflow.com/questions/4512300/open-source-svn-client-java-library-which-can-be-used-in-commercial-development)

我想从一个java程序访问SVN。我想要一个 SVN 的开源 Java 库，除了 SVNkit。由于 SVNKit 已获得许可，我无法使用它。我需要一个开源的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T07:37:08.730

SVNKit 是开源的，据我所知是唯一的纯 Java 实现，如果您正在寻找替代方案，请查看：

*   [JavaHL](http://subclipse.tigris.org/wiki/JavaHL)
*   [SvnClientAdapter](http://subclipse.tigris.org/svnClientAdapter.html)

它们中的每一个都不是纯 Java 实现，而是依赖于通过 JNI 访问它的底层 C 库。

# lazarus - 在 Lazarus 下注册将组件添加到表单时所需的单元失败

> ID：10346496
> 
> 赞同：1
> 
> 时间：2012-04-27T07:27:18.557
> 
> 标签：lazarus, fpc

拉撒路 0.9.30.4

我正在开发一个组件，该组件需要`uses`在将组件拖放到表单上时将多个单元添加到 unit 子句中。

从[这篇](http://wiki.freepascal.org/Extending_the_IDE)文章中，我发现了设置设计器挂钩并将所需文件添加到项目中的方法，并且可以将单元添加到`uses`子句中。

代码示例：

```
procedure TTestComponent.DoCompAdded(APersistent: TPersistent; Select: boolean);
var
  oProj: TLazProject;
  oFile: TLazProjectFile;
begin
  oProj := LazarusIDE.ActiveProject;
  oFile := oProj.CreateProjectFile('X:\Unit path\AddonUnit.pas');
  oFile.IsPartOfProject := True;
  oProj.AddFile(oFile, True);
end;

constructor TTestComponent.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  GlobalDesignHook.AddHandlerPersistentAdded(@DoCompAdded);
end;

procedure Register;
begin
  RegisterComponents('AAA',[TTestComponent]);
end; 
```

在调试时，我确保调用了处理程序，`AddonUnit`向项目中添加了一个单元（我遍历了`oProj`对象内的所有文件），但这导致结果为零：实际上没有向项目或`uses`子句添加任何内容。

此外，我发现项目文件集合`oProj.Files[index]`返回当前打开的编辑器文件，而不是项目中包含的文件。

我是否遗漏了某些内容，或者是否有另一种方法可以将所需的单位包含在`uses`条款或项目中？

# android - 在 Android 中导入数据库

> ID：10346498
> 
> 赞同：0
> 
> 时间：2012-04-27T07:27:23.930
> 
> 标签：android, database, mobile, import

我想导入一个大于 10 MB 的数据库。我还没有在互联网上找到解决方案......此外，我想将此数据库插入最终的 APK 中。你有什么想法 ？

*对不起我的英语不好。我是法国人*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:39:36.570

基本上我曾经为类似数据库所做的就是[这里](https://stackoverflow.com/questions/513084/how-to-ship-an-android-application-with-a-database)描述的事情。您创建数据库并将其放在您的`assets`文件夹中。然后将`SQLiteOpenHelper`其复制到应用程序数据库应驻留的位置（即私有应用程序存储）。

但是，对于这么大的文件，我需要将数据库文件拆分为几个文件，如此[处](https://stackoverflow.com/a/3093966/1108032)所述，因为无法从`assets`文件夹中读取大于 1MB 的文件。但是，您应该知道，您的 apk 当然会变得非常大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:35:18.997

我认为您要么必须：

1.  将插入语句硬编码到应用程序中，以便在应用程序安装时执行此功能，或者
2.  在网络上托管数据库并让您的应用程序将数据拉入其数据库。
3.  在网络上托管数据库并让您的应用程序仅获取它需要的数据，然后您可以将其保存到应用程序数据库中（我认为这是我的解决方案的最佳解决方案）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-27T07:35:34.073

可以使用 ZipInputStream 处理大文件。使用 zip util 将文件压缩到项目的资产文件夹中

```
InputStream dataSource = getAssets().open("assets.zip");
unzip(dataSource, MainTab1Activity.defaultDBPath);

public static void unzip(InputStream zipFileName, String outputDirectory) {
        try {
            ZipInputStream in = new ZipInputStream(zipFileName);
            // 获取ZipInputStream中的ZipEntry条目，一个zip文件中可能包含多个ZipEntry，
            // 当getNextEntry方法的返回值为null，则代表ZipInputStream中没有下一个ZipEntry，
            // 输入流读取完成；
            ZipEntry entry = in.getNextEntry();
            while (entry != null) {

                // 创建以zip包文件名为目录名的根目录
                File file = new File(outputDirectory);
                file.mkdir();
                System.out.println("file.mkdir()");
                if (entry.isDirectory()) {
                    String name = entry.getName();
                    name = name.substring(0, name.length() - 1);

                    file = new File(outputDirectory + File.separator + name);
                    file.mkdir();

                } else {
                    file = new File(outputDirectory + File.separator + entry.getName());
                    file.createNewFile();

                    FileOutputStream resultFileOutput = new FileOutputStream(file);
                    byte[] buf = new byte[1024 * 1024];// 设定缓冲区大小
                    int bsize = 0;
                    while ((bsize = in.read(buf)) != -1) {
                        resultFileOutput.write(buf, 0, bsize);
                    }
                    //in.close();
                    resultFileOutput.close();
                    System.gc();

//                    FileOutputStream out = new FileOutputStream(file);
//                    int b;
//                    while ((b = in.read()) != -1) {
//                        out.write(b);
//                    }
//                    out.close();
                }
                // 读取下一个ZipEntry
                entry = in.getNextEntry();
            }
            in.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            // TODO 自动生成 catch 块
            e.printStackTrace();
        }
    } 
```

# entity-framework - 为什么 EF 不支持合并到对象图功能？

> ID：10346516
> 
> 赞同：3
> 
> 时间：2012-04-27T07:29:00.863
> 
> 标签：entity-framework

为什么 EF 不支持合并到对象图功能。

我认为在某些情况下使用合并到对象 grhaps 函数会很好。

例如，从 ObjectContext 图与从数据库接收到的图合并（附加到 ObjectContext）。

用于检测对象图中另一层对象的修改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:39:00.020

根本没有。只有 EF 开发团队可以回答此类问题，因此可以通过他们的[博客与他们联系，或者将其作为](http://blogs.msdn.com/b/adonet/contact.aspx)[Data UserVoice](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions)上的一项功能提出。

我的观点：我回答了一些关于将分离的对象图合并到现有对象图的问题，这是一个相当复杂的问题，每个场景都有一些新的要求。因此，我认为自动化太复杂和太危险。危险，因为在许多情况下，这种自动合并可能会通过修改对象图中的关系以及不应该修改的相关实体来施加新的安全漏洞。为了支持所有场景，该功能必须非常复杂（支持如何完成合并的大量配置），最后该功能的努力和成本将不值得它的价值，因为大多数程序员希望在没有的情况下坚持分离的更改再次加载实体图 = 没有对象级合并。

# javascript - 使用 JavaScript 自动格式化日期

> ID：10346522
> 
> 赞同：3
> 
> 时间：2012-04-27T07:29:15.690
> 
> 标签：javascript

如何使用javascript在输入文本框中制作日期自动格式

在文本框中输入`yyyyMMdd`格式时，将自动更改为`yyyy/MM/dd`格式

例如：如果您的 type `20120427`，那将更改为`2012/04/27`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T07:40:12.450

你可以试试这个 javaScript 函数并从 `onChange`你的文本框的事件中调用它

```
function dateFormat(el){
    value = el.value;       
    el.value = value.replace(/^([\d]{4})([\d]{2})([\d]{2})$/,"$1/$2/$3");        
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-27T07:32:20.447

首先，您需要编写一个函数来进行转换，

```
function convert(original){}; 
```

然后监听`onkeyup`evnets，并将输入的值传递给转换函数，将输入的值设置为其结果

# c# - C#：从 Excel 公式中读取值

> ID：10346524
> 
> 赞同：2
> 
> 时间：2012-04-27T07:29:20.153
> 
> 标签：c#, excel, excel-formula, closedxml

我一直在使用**Closed XML**自动生成我的 Excel 报告。到目前为止一切顺利，但是我需要将某些公式生成的值保存回数据库。

公式应该是这样的：`=SUM(Day1, Day2, Day3)`，所以简单的 Excel 公式解析器不适合我的账单——我需要一些可以与之交互的东西！

我不介意必须保存电子表格然后重新打开它。只要它快速高效，我什么都愿意。谢谢一堆。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:34:41.943

您可以使用

```
Range("D1").value 
```

获取公式的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-13T13:25:56.603

你可以使用类似的东西：

```
if(ws.Cell(i, j).HasFormula) 
       VAL = ws.Cell(i, j).ValueCached
else
       VAL = ws.Cell(i, j).Value.ToString() 
```

# java - java有索引的最低优先级队列吗？

> ID：10346525
> 
> 赞同：12
> 
> 时间：2012-04-27T07:29:22.390
> 
> 标签：java, priority-queue, shortest-path, dijkstra

我需要它来实现 Dijkstra 的算法，并且我确实有自己的实现，但是使用 java 自己的类来记录我的代码会更容易。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-11-09T07:00:47.723

不，Java 标准库没有这样的数据结构。我想大多数人都使用这个： [http ://algs4.cs.princeton.edu/24pq/IndexMinPQ.java.html](http://algs4.cs.princeton.edu/24pq/IndexMinPQ.java.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-22T11:03:59.927

如果我们想更新java中优先级队列中现有键的值。也许我们可以使用 remove 方法然后插入具有不同值的相同键。这里删除并提供将花费 log(n) 时间。

下面的示例代码：

```
 static class Edge {
        int vertex;
        int weight;
        public Edge(int vertex, int weight) {
            this.vertex = vertex;
            this.weight = weight;
        }
        @Override
        public boolean equals(Object obj) {
            if (this == obj)
                return true;
            if (obj == null)
                return false;
            if (getClass() != obj.getClass())
                return false;
            Edge other = (Edge) obj;
            if (weight != other.weight)
                return false;
            if (vertex != other.vertex)
                return false;
            return true;
        }
    }

    public static void main(String[] args) {
        Edge record1 = new Edge(1, 2);
        Edge record2 = new Edge(4, 3);
        Edge record3 = new Edge(1, 1);//this record3 key is same as record1 but value is updated
        PriorityQueue<Edge> queue = new PriorityQueue<>((a, b) -> a.weight - b.weight);
        queue.offer(record1 );
        queue.offer(record2);//queue contains after this line [Edge [vertex=1, weight=2], Edge [vertex=4, weight=3]]
        Edge toBeUpdatedRecord = new Edge(1, 2);//this is identical to record1
        queue.remove(toBeUpdatedRecord);// queue contains after this line [Edge [vertex=4, weight=3]]
        queue.offer(record3);//Finally can see updated value for same key 1 [Edge [vertex=1, weight=1], Edge [vertex=4, weight=3]]
   } 
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-04-27T08:04:21.553

你是什​​么意思'索引'？优先队列不支持索引，除非它不再排队。

Java 支持标准优先级队列，如 C++ STL。它可以在 java.util 命名空间中作为[PriorityQueue](https://docs.oracle.com/javase/7/docs/api/java/util/PriorityQueue.html)找到。

# jquery - 移动 Jquery 弹出窗口不起作用

> ID：10346532
> 
> 赞同：1
> 
> 时间：2012-04-27T07:29:43.320
> 
> 标签：jquery, mobile, jquery-mobile

我花了 3 个小时，经历了很多答案，但没有成功，我不知道我错过了什么

[当我单击此处的链接小提琴链接](http://jsfiddle.net/sulemanahmad/SaJgU/1/)时，未打开移动 jquery 弹出窗口

请有任何想法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T12:38:15.897

我看到这里发生了什么。

如果你 google 'jquery mobile'，出现的文档链接实际上是一个链接：jquerymobile.com/test/

而不是：

jquerymobile.com/demos/

您可以在文档页面的右上角看到您正在查看的任何内容的版本和状态。

正如 codaniel 所说，弹出窗口是 JQM v 1.2 中即将推出的功能。

这是链接到 /test/ 站点使用的 1.2 构建的小提琴。注意：这不受官方支持 - 在 1.2 最终版本发布之前，请勿将其用于发布站点。

[http://jsfiddle.net/ncDbn/](http://jsfiddle.net/ncDbn/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T08:18:25.147

JQM 还没有弹出功能。然而，它是 JQM v 1.2 的一个计划功能。您可能对提供这种功能的 Simple Dialog 2 插件感兴趣。[http://dev.jtsage.com/jQM-SimpleDialog/demos2/](http://dev.jtsage.com/jQM-SimpleDialog/demos2/)

也在旁注中。你离你的小提琴很远。您包含的 jQuery 版本 1.2.6 确实已经过时，甚至无法与 JQM 一起正常工作。另一件事是您甚至没有使 jQuery 移动工作所需的 css 或 js 文件。我建议您从[文档](http://jquerymobile.com/demos/1.1.0/)开始并**阅读**它。查看以下链接：http: [//jquerymobile.com/demos/1.1.0/docs/about/getting-started.html](http://jquerymobile.com/demos/1.1.0/docs/about/getting-started.html)

# windows - 创建新文件类型 HOW TO

> ID：10346534
> 
> 赞同：1
> 
> 时间：2012-04-27T07:29:58.190
> 
> 标签：windows, file, contextmenu, new-operator

请问你能帮帮我吗。在 Windows 上下文菜单中有一个子菜单 - “CREATE NEW”。当它打开时，您可以创建一个项目列表：文本文件、文件夹、快捷方式等。

1.  如何获取项目列表？（将它们添加到 StringList）
2.  我怎样才能以编程方式创建它们中的任何一个（.txt，文件夹不是问题），例如公文包？？？？

例如：我想获取项目列表，然后为每个项目动态创建 TButton ，以便在单击按钮时创建分配给该按钮的项目（文件类型）。

# eclipse - 使用具有应用配置文件的 EMF 加载 UML 模型

> ID：10346535
> 
> 赞同：1
> 
> 时间：2012-04-27T07:30:02.560
> 
> 标签：eclipse, uml, profile, eclipse-emf

我正在尝试通过 eclipse MDT/UML2 实现加载存储为 XMI 的 UML 模型。

到目前为止，我已经成功地从 a 加载了模型本身，`ResourceSet`并且可以按预期浏览我的模型。但是，我无法加载包含在 XMI 文件中的自定义 UML 配置文件。

我在 XMI 文件中有`xmlns:MyProfile="..."`和`xsi:schemaLocation="... file:/path/to/profile.uml"`属性，以及`profileApplication`标签内的`uml:Model`标签。

但是，在加载的模型上调用`getAppliedProfiles`并`getProfileApplications`返回一个空列表。使用调试时，我可以看到模型没有`profileApplication`正确加载标签。

我尝试了各种方法来配置 ResourceSet 的 UriMap，但到目前为止还没有成功。当我在 Eclipse 中打开相应的 XMI 文件时，一切正常，并且配置文件加载良好，因此所有路径都是正确的。我还缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T22:01:49.107

您无法加载配置文件，因为配置文件与项目属性相关，不能在外部单独使用。您可以加载模型，然后获取配置文件并将此配置文件应用为项目属性。它会完成这项工作。希望这有帮助。

# c# - C#帮助！！会话自动注销后重新登录

> ID：10346539
> 
> 赞同：0
> 
> 时间：2012-04-27T07:30:25.033
> 
> 标签：c#, browser, logout

想保持网页登录。登录所需的用户名 n 密码。网页会话将在 10 分钟不活动后自动注销。

所以想到了c#中是否有任何代码可以检测到可以检测到当前由于不活动而注销并执行登录命令？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:46:54.263

您所描述的似乎是理想的行为，您当然可以将会话超时时间增加到一个小时，如果这会让您的用户满意超过 10 分钟。如果您这样做，请确保应用程序池在 20 分钟后不会进入睡眠模式（您可以通过 iis 管理的默认行为）。

如果你真的想重新验证你的用户，你可以检查你的 global.asax（或自定义提供程序，如果你有一个）如果你的用户已注销，如果没有尝试重新验证他。
为此，您必须将他的用户名和密码保存在您网站的内存或用户 cookie 中。请注意，最后一种方法非常不安全，因为您必须将他的密码存储在 cookie 中，如果这样做，请务必对其进行编码。
顺便说一句，您的全局 asax 看起来像这样（不是复制粘贴，只是给您一个想法）：

```
if(!User.Identity.IsAuthenticated){
    HttpCookie cookie = Request.Cookies["StoredCredentials"]
    Membership.ValidateUser(Cookie.Values["userName"], Cookie.Values["userPassword"])
} 
```

# c# - 如何在不重定向到 Facebook 徽标的情况下获得用户许可

> ID：10346544
> 
> 赞同：2
> 
> 时间：2012-04-27T07:30:48.287
> 
> 标签：c#, asp.net, facebook

我正在开发一个 Facebook 应用程序。当新用户使用 facebook 链接时，用户首先被重定向到带有 facebook 徽标的屏幕，然后立即重定向到 facebook 权限屏幕。如何避免第一次重定向，即。到 Facebook 徽标屏幕？我想直接进入 facebook 权限屏幕。

我正在使用以下代码重定向到页面：

```
 string authLink = string.Format(
                      "{0}?client_id={1}&redirect_uri={2}&scope={3}", 
                       new object[] 
                           { 
                              "https://graph.facebook.com/oauth/authorize", 
                              "APPID", 
                              "CallBackURL", 
                              FBPermissions.email + "," + 
                              FBPermissions.user_about_me + "," +
                              FBPermissions.user_birthday + "," +
                              FBPermissions.publish_stream + "," +
                              FBPermissions.user_status + "," + 
                              FBPermissions.user_photos 
                            }
                  );
    Response.Redirect(authLink); 
```

我正在使用 asp.net c# 开发应用程序。我也在使用图形 api。请指导我如何实现上述目标。

提前致谢。苏吉思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:58:22.067

所以让我试着更好地理解这一点；您试图绕过登录，并立即将它们重定向到权限页面？这将如何运作？对于新用户，facebook 与任何会影响任何类型权限的应用程序一样，需要知道他们正在处理的用户是什么。重定向到登录页面很大程度上取决于用户是否已经在他们的机器上进行了身份验证。简而言之，在某些情况下，登录页面可能没有被用户“访问”，只是被重定向到权限页面，但这取决于用户已经登录 facebook 并保存了他们的身份验证，这不能保证。

# mysql - mysql：我们不能在系统表上创建触发器吗？

> ID：10346546
> 
> 赞同：1
> 
> 时间：2012-04-27T07:31:04.693
> 
> 标签：mysql, triggers, system-tables

我正在尝试通过在其上编写触发器来审核 mysql.user 表中的权限更改。

```
insert trigger: will capture who gave the new permissions and when
update trigger: will capture who changes the privileges from what[old privilege]
remove trigger: will capture who removed the privileges and what are they 
```

现在，我在写作时遇到错误

```
ERROR 1465 (HY000): Triggers can not be created on system tables 
```

我们可以在系统表上创建触发器吗？是否有任何解决方法或将在更高版本[> 5.1.61] 中支持？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T11:20:48.080

**不，我们不能**。即使我们拥有最关心的`all`特权`super`

[查看 mySql 提供的（全部）和（超级）权限](http://dev.mysql.com/doc/refman/4.1/en/privileges-provided.html)

在尝试了所有类型的特权后

```
grant super on *.* to root@localhost
grant all on *.* to root@localhost 
```

我在不同的表上尝试过最简单的触发器`mysql.db`并得到相同的错误

> 无法在系统表上创建触发器 // 请接受这个痛苦的事实

如果您发现可以在系统表上创建触发器的任何地方，那就错了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:42:58.347

你见过这个吗： http://forums.mysql.com/read.php? [99,207145](http://forums.mysql.com/read.php?99,207145)？

发帖人说他需要“SUPER PREVILAGES” 您是否有权访问数据库的 root 用户？

# c++ - 这会泄漏内存吗？我该如何预防？

> ID：10346547
> 
> 赞同：0
> 
> 时间：2012-04-27T07:31:08.747
> 
> 标签：c++, opencv, memory-leaks, mfc

我看到这个[问题](https://stackoverflow.com/questions/8501753/how-to-display-opencv-mat-on-mfc-view)的答案对于如何将 cv::Mat 图像打印到 MFC 应用程序中非常受欢迎。

但是，我想知道那里是否存在内存泄漏？或者如果没有，那怎么可能？

具体来说，我想知道这`memset(bmih, 0, sizeof(*bmih))`部分。是 MFC 以某种方式管理这里的内存吗？有人可以提供一些有关此的信息吗？

```
void COpenCVTestView::FillBitmapInfo(BITMAPINFO* bmi, int width, int height, int bpp, int origin) 
{ 
assert(bmi && width >= 0 && height >= 0 && (bpp == 8 || bpp == 24 || bpp == 32)); 

BITMAPINFOHEADER* bmih = &(bmi->bmiHeader); 
// this part shouldn't leak?
memset(bmih, 0, sizeof(*bmih)); 
bmih->biSize = sizeof(BITMAPINFOHEADER); 
bmih->biWidth = width; 
bmih->biHeight = origin ? abs(height) : -abs(height); 
bmih->biPlanes = 1; 
bmih->biBitCount = (unsigned short)bpp; 
bmih->biCompression = BI_RGB; 

if (bpp == 8) 
{ 
    RGBQUAD* palette = bmi->bmiColors; 

            for (int i = 0; i < 256; i++) 
    { 
        palette[i].rgbBlue = palette[i].rgbGreen = palette[i].rgbRed = (BYTE)i; 
        palette[i].rgbReserved = 0; 
    } 
} 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T07:37:21.023

您在哪里看到内存泄漏？没有动态分配，也没有指针操作。如果 A`memset`覆盖了指向动态分配内存的指针，则可能导致内存泄漏，但 a 中没有指针`BITMAPINFOHEADER`，只有整数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T07:33:14.020

在这种情况下，只是用零`memset`填充对象。`bmih`所以没有内存泄漏。

使用指向先前分配在其他地方`FillBitmapInfo`的对象的指针调用该方法。只是对结构成员的引用。只需为 . 引用的内存区域分配一个值。`BITMAPINFO``bmih``bmiHeader``BITMAPINFO``memset``bmih`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-27T07:33:24.793

A`memset()`不会导致内存泄漏。这只是将 0x00 字节写入 . 指向的内存的一部分`bmi`。这里没有足够的代码来确定是否有任何内存泄漏。

# html - 如何验证提交的文本以输入数字

> ID：10346549
> 
> 赞同：2
> 
> 时间：2012-04-27T07:31:17.987
> 
> 标签：html

我的要求是让 mobilenumber 的 html 文本字段只接受数字

例如，如果用户输入“+”符号或字母，则不应允许他输入

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T07:34:19.290

在这种情况下，您可以使用 Html 5。

```
<input type="number" /> 
```

否则，如果你想使用 Javascript 来达到这个目的，你可以看看[这个问题](https://stackoverflow.com/questions/995183/how-to-allow-only-numeric-0-9-in-html-inputbox-using-jquery)。

# tfs - 在 TFS 11 中修改燃尽图

> ID：10346552
> 
> 赞同：2
> 
> 时间：2012-04-27T07:31:24.060
> 
> 标签：tfs, scrum

我们的开发方法与 Microsoft 默认的 scrum 模板有一个显着的不同：我们不测量每个单独的任务，而是估计“故事”（父工作项）。然而，使用 TFS 11 的新 Beta，我意识到燃尽图仅基于估计的任务。我下载了模板并查看了 xmls 和报告，但是我认为仅通过修改模板无法修改此行为。

是否有一种“简单”的方法可以在 TFS 11 中仅在模板中实现此行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:32:23.580

TFS 11 任务板使用父工作项和子工作项的概念。父工作项出现在积压工作中。子工作项出现在任务板上。

提供的模板假定父工作项是故事，子工作项是任务。

您可以将您的父项和任务配置为您希望的任何工作项，但是，您必须定义父项和子项类型。例如，您可以使您的父工作项 EPIC 和您的子工作项故事。但是随后 EPIC 将出现在您的待办事项中（不是故事）

希望这能回答你的问题。

# php - 如何在 uidatepicker 中将日期显示为 feb-04-2012 而不是 02/04/2012

> ID：10346555
> 
> 赞同：-3
> 
> 时间：2012-04-27T07:31:38.387
> 
> 标签：php, jquery-ui-datepicker

我的 UI 日期选择器将日期显示为 mm/dd/yy 格式我需要将其更改为 monthname-dd-yy 即

```
04/02/2012 as march-02-2012 
```

但我不知道怎么做？

有人知道吗？

请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:36:10.087

使用格式字符串`MM-dd-yy`：

```
 $('#datepicker').datepicker({ dateFormat: 'MM-dd-yy' }); 
```

请参阅[文档](http://docs.jquery.com/UI/Datepicker/formatDate)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:36:23.953

您可以将`dateFormat`选项传递给日期选择器

```
$('#picker').datepicker({
  dateFormat:'MM-dd-yy'
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T07:37:10.233

```
 // Init
$( ".selector" ).datepicker({ dateFormat: "MM/dd/yy" });

// Setter after init
$( ".selector" ).datepicker( "option", "dateFormat", "MM/dd/yy" ); 
```

支持的格式：
[http ://docs.jquery.com/UI/Datepicker/formatDate](http://docs.jquery.com/UI/Datepicker/formatDate)

# backbone.js - Backbone.js 路由器初始化不会立即运行

> ID：10346557
> 
> 赞同：3
> 
> 时间：2012-04-27T07:31:43.400
> 
> 标签：backbone.js, backbone-routing

我的代码如下：

```
var AppRouter = Backbone.Router.extend({

    _data: null,
    _length: 0,
    _index: null,
    _todos: null,
    _subtodolist: null,
    _subtodos: null,

    routes: {
        "*action": "index",
        "category/:name": "hashcategory"  
    },

    initialize: function(options){
        var self = this;
        if (this._index === null){
            $.ajax({
                url: 'data/todolist.json',
                dataType: 'json',
                data: {},
                success: function(data) {
                    self._data = data;
                    self._todos = new TodosCollection(data);
                    self._index = new CategoriesView({collection: self._todos});
                    //self._index.render(); 
                }
            });
            return this;
        }
        return this;
    },

    index: function(){
        this._index.render();
    },
 .... 
```

但是当我开始时，萤火虫控制台面板总是告诉我函数`this._index`中为空`index`。我必须`self._index.render()`在回调函数的底部使用`$.ajax success`才能使主页呈现（上面​​已注释掉）。似乎`index`函数在函数之前`initialize`运行。这怎么可能发生，我该如何解决？

顺便说一句，在 中`routes`，如果我使用`"": "index"`，它将不起作用。我必须使用`"*action": "index"`. 但我在其他地方了解到默认 url 可能只是空字符串。为什么我不能在这里使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T18:18:46.653

事实上，这里的问题是`initialize`在它内部的 ajax 调用被解决之前返回。

您可以做的是在您的入口点执行以下操作（通常`$.ready()`）

```
var self = this,
    p = $.ajax({
    url: 'data/todolist.json',
    dataType: 'json'
});

p.done(function (data) {
    AppRouter = new Backbone.Router({data: data});
    Backbone.history.start({ pushState: true });    
}); 
```

这将获取路由，*然后*使用它们初始化路由器以及 start `Backbone.history`。显然你不需要在初始化时再次进行ajax调用，只需使用选项中传递的数据即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T11:34:59.540

看起来发生这种情况是因为 this._index 仅在 ajax 回调中设置。因为这是异步的，所以不能保证它会在索引事件处理程序触发之前执行。

根据文档，您在初始加载时需要的模型[应该是 bootstrapped](http://documentcloud.github.com/backbone/#FAQ-bootstrap)。

如果这不可能，构建此代码的一种方法可能是在路由被命中时获取您的数据，并将重置事件绑定到您的视图，例如

```
var CategoriesView = Backbone.View.extend({
    initialize: function() {
        this.collection.on("reset", this.render);

    },

    ...

var AppRouter = Backbone.Router.extend({

    _index: null,
    _todos: null,

    routes: {
        "": "index",
        "category/:name": "hashcategory"  
    },

    initialize: function(options){
        var self = this;

        self._todos = new TodosCollection();
        self._index = new CategoriesView({ collection: self._todos });
    },

    index: function(){
        this._todos.fetch();
    }, 
```

您还需要设置您的集合以构造适当的 URL 来请求`data/todolist.json`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-29T23:45:35.360

您的问题是路线的顺序。路由按顺序进行评估，因此“*action”将始终匹配。

尝试：

```
routes: {
  "category/:name": "hashcategory"
  "*action": "index",
} 
```

# plugins - CRM 2011 插件中的活动应该只有一个所有者方

> ID：10346559
> 
> 赞同：0
> 
> 时间：2012-04-27T07:31:55.513
> 
> 标签：plugins, dynamics-crm, dynamics-crm-2011, dynamics-crm-4, dynamics-crm-online

我已经编写了一个创建后插件，以便在创建关联的案例操作记录时将案例分配给团队。下面是一段代码：

```
 Entity caseActionEntity = context.InputParameters["Target"];

    EntityReference team = (EntityReference)caseActionEntity.Attributes["fmc_teamid"];
    EntityReference caseEntity = (EntityReference)caseActionEntity.Attributes["regardingobjectid"];

    AssignRequest request = new AssignRequest
    {
          Assignee = new EntityReference("team", team.Id),
          Target = new EntityReference("incident",caseEntity.Id),
    };
    service.Execute(request); 
```

但它给出了例外，因为**一项活动应该只有一个所有者方。**服务后**。执行（请求）；**执行。谁能告诉我如何将现有的案例记录分配给团队..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:23:22.653

Initially I was thinking along the same lines as Vishnu's [answer](https://stackoverflow.com/a/10346623/654495), but the case already exists as you've stated.

The only other thing I can suggest is see how you go by making it an Async plugin so it happens outside the executing transaction.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:36:59.343

对于创建期间的重新分配，只需在预创建中设置 ownerid。您拥有的代码可以正常更新。

这里的帖子详细解释了这一点

[将新所有者分配给预约。“一项活动应该只有一个所有者方”](https://stackoverflow.com/questions/7173482/crm-2011-assign-new-owner-to-appointment-there-should-be-only-one-owner-part)

# c# - 使用 C# 查询 Excel 文件，出现数字单元格问题

> ID：10346568
> 
> 赞同：3
> 
> 时间：2012-04-27T07:32:35.563
> 
> 标签：c#, excel, oledb, xls, oledbcommand

我正在查询一个 Excel 文件以检索数据记录并将它们显示在监控工具中。问题是，每当我尝试使用以下请求选择具有其 id 的记录时，它在执行查询时会引发错误：

> ExecuteCommandTextErrorHandling

告诉我查询中的类型和目标单元格不兼容。

我的请求看起来像

```
SELECT TOP 20 [Fields...] 
FROM [RECORD$] 
WHERE (([id] = '1')) 
```

id 列可以包含的不仅仅是数字，因此它的单元格类型是标准的默认类型。

**我的问题是**：如何在不知道其类型的情况下获取记录？

我是否必须强制执行列类型，如果是这样怎么办？我是否必须捕获异常并在没有引号的情况下重试？

这是用于查询 Excel 文件和我的连接字符串的代码

```
 public static DataTable queryXlsFile(String query, OleDbConnection dbConnection)
 {
        OleDbDataAdapter dbCommand = new OleDbDataAdapter(query, dbConnection);
        DataTable dt = new DataTable();
        dbCommand.Fill(dt);
        return dt;
    }

Provider=Microsoft.ACE.OLEDB.12.0; data source=C:\\test\\321.xls; Extended Properties=\"Excel 8.0;HDR=Yes;\"; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:54:39.557

尝试添加 IMEX=1;

> HDR=是；IMEX=1"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:55:10.807

如果你有很多行，类型是最多的类型，否则类型取决于第一行，一个答案的类型是字符串。

# javascript - 前端上传图片的问题

> ID：10346570
> 
> 赞同：2
> 
> 时间：2012-04-27T07:32:54.570
> 
> 标签：javascript, jquery

我需要实现图像上传，按钮旁边会出现一个缩略图..我已经使用函数“getAsDataURL”实现了它，......它在chrome和safari中不起作用......任何解决方案？

```
<script type="text/javascript">
    function setImage(file) {
        if(document.all)
            document.getElementById('prevImage').src = file.value;
        else
            document.getElementById('prevImage').src = file.files.item(0).getAsDataURL();
        if(document.getElementById('prevImage').src.length > 0) 
            document.getElementById('prevImage').style.display = 'block';
    }
</script>

<div class="uploading_block_inner">
                                <div class="uploaded_img_inner"><img id="prevImage" style="display:none;" width="91" height="91" /></div>
                                <div class="submit_button_upload">
                                    <div class="upload"><input type="file" id=""  name="myImage" onchange="setImage(this);" /></div>
                                </div>
                                <div class="upload_submit_inner"><input type="submit" name="" value="" /></div>                             
                            </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:49:50.050

假设您使用的是 jQuery，我为您提供了以下解决方案。

```
$(document).ready(function(){
    $('input[type=file]').on('change', setImage);
});

function setImage(file) 
{
  if(document.all)
  {
    document.getElementById('prevImage').src = file.value;
  }
  else
  {
    document.getElementById('prevImage').src = file.files.item(0).getAsDataURL(); 
  }

  if(document.getElementById('prevImage').src.length > 0)
  {
    document.getElementById('prevImage').style.display = 'block'; 
  }
} 
```

# android - 当我第一次和下一次不同的活动应该来时，如何只获得一次登录活动

> ID：10346578
> 
> 赞同：1
> 
> 时间：2012-04-27T07:33:30.023
> 
> 标签：android, android-emulator

当我运行应用程序时，第一次和下一次登录活动应该只出现一次，当我打开两个不同的活动时，应该基于登录活动中的按钮单击。在登录活动中，如果我在下次打开时启用第一个单选按钮，我会保留两个单选按钮，它应该显示 main2 布局，如果我启用第二个单选按钮，它应该显示 main3 布局。

```
 public class Demo1 extends Activity {
        Button b1,b2;
        int count=0;
      public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);

      SharedPreferences settings = this.getSharedPreferences("MyApp",0);
      boolean firstrun=settings.getBoolean("firstrun",true);
      if (firstrun) {
        SharedPreferences.Editor e = settings.edit();
        e.putBoolean("firstrun",false);
        e.commit();

      setContentView(R.layout.main1);
      }
      else{
         test();
      }
      b1=(Button)findViewById(R.id.button1);
      b2=(Button)findViewById(R.id.button2);
     b1.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            count=1;
            Intent intent = new Intent(Demo1.this, ButtonActivate1.class);
              startActivity(intent);
        }
    });
     b2.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            count=2;
            // TODO Auto-generated method stub
            Intent intent = new Intent(Demo1.this, ButtonActivate1.class);
              startActivity(intent);
        }
    });

 }
private void test() {
    // TODO Auto-generated method stub
    if(count==1)
    {
        setContentView(R.layout.main2);
    }
    if(count==2)
    {
        setContentView(R.layout.main3);
    }
} 
```

}

在此示例中，当我运行时，它会强制关闭并在 button.setonclicklistner 行中显示错误。请建议我如何解决此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:45:07.557

我已经更新了对以下内容的回答。这现在应该对你有用。

```
package com.demo1;

import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.View;

public class Demo1Activity extends Activity {
    private int count;
    private SharedPreferences settings;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        settings = this.getSharedPreferences("MyApp",0);
        count = settings.getInt("count", 0);

        selectContentView();
    }

    public void button1Method(View v) {
        setCount(1);
        Intent intent = new Intent(Demo1Activity.this, Demo2Activity.class);
        startActivity(intent);
    }

    public void button2Method(View v) {
        setCount(2);
        Intent intent = new Intent(Demo1Activity.this, Demo3Activity.class);
        startActivity(intent);
    }

    private void selectContentView() {
        // TODO Auto-generated method stub
        switch (count) {
        case 1:
            setContentView(R.layout.main2);
            break;
        case 2:
            setContentView(R.layout.main3);
            break;
        default:
            setContentView(R.layout.main1);
        }
    }

    private void setCount(int count) {
        SharedPreferences.Editor e = settings.edit();
        e.putInt("count",count);
        e.commit();
    }
} 
```

main1.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="main1" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/button1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:onClick="button1Method"
            android:text="button1" />

        <Button
            android:id="@+id/button2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:onClick="button2Method"
            android:text="button2" />
    </LinearLayout>

</RelativeLayout> 
```

我已经替换了要在 XML 文件中设置的 onClick 侦听器。我觉得这更整洁，更容易。

清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.demo1"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".Demo1Activity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".Demo2Activity"
            android:label="@string/app_name" />
        <activity
            android:name=".Demo3Activity"
            android:label="@string/app_name" />
    </application>

</manifest> 
```

# iphone - 使用 MFMailComposeViewController 的问题

> ID：10346580
> 
> 赞同：3
> 
> 时间：2012-04-27T07:33:40.360
> 
> 标签：iphone, objective-c, ios, mfmailcomposeviewcontroller

我在使用 MFMailComposeViewController 时遇到问题。这是我尝试在设备上运行的示例代码。我故意添加了 5 秒的延迟（只是为了模拟下载附件文件的体验），之后应用程序会显示“邮件”控制器。在延迟期间，如果我们单击主页按钮，即让应用程序在后台运行并在 5 秒前恢复应用程序，主题字段将为空白，并且消息正文将具有值“消息 1”而不是“消息 2” " 如果我​​们最小化应用程序并在 5 秒后恢复应用程序，主题不会出现，但正文将是 "message2" 而不是 "message 1"。你能帮我理解这种行为吗？

```
-(void) func:(MFMailComposeViewController *) mail
{
    [mail setMessageBody:@"message 2" isHTML:NO];
    [self presentModalViewController:mail animated:YES];    
} 

- (IBAction)action:(id)sender 
{
    MFMailComposeViewController * mail = [[MFMailComposeViewController alloc] init];
    [mail setMailComposeDelegate:self];
    [mail setMessageBody:@"message 1" isHTML:NO];
    [mail setSubject:@"subject 1"];

  dispatch_async(dispatch_get_main_queue(), ^{    
        [self performSelector:@selector(func:) withObject:mail afterDelay:5];     
  });
} 
```

谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-07T00:49:50.283

干得好！

```
-(IBAction)email {
    MFMailComposeViewController *composer = [[MFMailComposeViewController alloc] init];
    [composer setMailComposeDelegate:self];
    if ([MFMailComposeViewController canSendMail]) {
        [composer setToRecipients:[NSArray arrayWithObjects:@"", nil]];
        [composer setSubject:@""];
        [composer setMessageBody:@"" isHTML:NO];
        [composer setModalTransitionStyle:UIModalTransitionStyleCrossDissolve];
        [self presentModalViewController:composer animated:YES];
        [composer release];
    }
    else
        [composer release];
} 
```

# iphone - 无法对整数数组进行排序？

> ID：10346582
> 
> 赞同：1
> 
> 时间：2012-04-27T07:33:55.420
> 
> 标签：iphone, objective-c

我想按升序对具有多个数字的整数数组进行排序。

这是我的数组：

```
keyArray:
(
   978,
   1077,
   1067,
   1076,
   1072,
   1082,
   1079,
   1075,
   1071,
   1081,
   1078,
   1080,
   1074 
```

)

这是我的代码：

```
NSSortDescriptor *sortOrder = [NSSortDescriptor sortDescriptorWithKey:@"self"  ascending: YES];

NSArray *sortedArray2 = [keyArray sortedArrayUsingComparator:^(id str1, id str2) {

    if ([str1 integerValue] < [str2 integerValue]) {
        return (NSComparisonResult)NSOrderedDescending;
    }

    if ([str1 integerValue] > [str2 integerValue]) {
        return (NSComparisonResult)NSOrderedAscending;
    }
    return (NSComparisonResult)NSOrderedSame;
}];

NSLog(@"%@",[keyArray sortedArrayUsingDescriptors: [NSArray arrayWithObject:sortOrder]]); 
```

问题是这将像这样对数组进行排序

```
sortedArray: (

  1067,
  1071,
  1072,
  1074,
  1075,
  1076,
  1077,
  1078,
  1079,
  1080,
  1081,
  1082,
  978
) 
```

它将首先对四位数进行排序，然后对三位数进行排序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-27T08:01:42.623

你可以很容易地实现你想要的，试试这个：

```
NSArray * sortedArray2 = [keyArray sortedArrayUsingComparator:^(id str1, id str2){
    return [(NSString *)str1 compare:(NSString *)str2 options:NSNumericSearch];
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:53:04.427

```
NSInteger firstNumSort(id str1, id str2, void *context) {
int num1 = [str1 integerValue];
int num2 = [str2 integerValue];

if (num1 < num2)
    return NSOrderedAscending;
else if (num1 > num2)
    return NSOrderedDescending;

return NSOrderedSame;
} 
```

// 当你想短路它时调用它...

```
NSArray *array = [NSArray arrayWithObjects:@"787",
                  @"344",
                  @"42334",
                  @"23432",
                  @"3423432",
                  nil];

NSLog(@"Sorted: %@", [array sortedArrayUsingFunction:firstNumSort context:NULL]); 
```

[有关更多信息，请访问此参考...](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html)

希望对你有帮助...

# c# - Twitterizer 抛出异常：反序列化对象时出现意外令牌：EndArray

> ID：10346588
> 
> 赞同：1
> 
> 时间：2012-04-27T07:34:21.703
> 
> 标签：c#, json, exception, twitter, twitterizer

在使用 Twitterizer 的 LookUp 方法时，我遇到了 JSON（反）序列化异常。异常状态：

> 反序列化对象时出现意外令牌：整数

我的代码看起来像

```
for (int i = 0; i < startedFollowing.Count; i++)
     {
       lookup.UserIds.Add(startedFollowing[i]);
       var yeniUser = TwitterUser.Lookup(token, lookup);
       friends followedfriend = new friends();
       followedfriend.name = yeniUser.ResponseObject[0].Name;
       followedfriend.screenName = yeniUser.ResponseObject[0].ScreenName;
       followedfriend.id = yeniUser.ResponseObject[0].Id;
       followedFriends.Add(followedfriend);
       lookup.UserIds.Clear();
     } 
```

我正在查找的 userId 是 36146022

提前感谢您的关注。

Stacktrace 就像；

```
 at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateObject(Object newObject, JsonReader reader, JsonObjectContract contract, String id) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 1268
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateAndPopulateObject(JsonReader reader, JsonObjectContract contract, String id) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 979
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateObject(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, Object existingValue) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 434
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, Object existingValue) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 245
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueNonProperty(JsonReader reader, Type objectType, JsonContract contract, JsonConverter converter, JsonContainerContract containerContract) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 230
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateList(IWrappedCollection wrappedList, JsonReader reader, String reference, JsonArrayContract contract) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 806
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.<>c__DisplayClass1.<CreateAndPopulateList>b__0(IList l, Boolean isTemporaryListReference) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 749
   at Newtonsoft.Json.Utilities.CollectionUtils.CreateAndPopulateList(Type listType, Action`2 populateList) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\Utilities\CollectionUtils.cs:line 242
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateAndPopulateList(JsonReader reader, String reference, JsonArrayContract contract) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 737
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateList(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, Object existingValue, String reference) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 500
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, Object existingValue) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 247
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueNonProperty(JsonReader reader, Type objectType, JsonContract contract, JsonConverter converter, JsonContainerContract containerContract) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 230
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\Serialization\JsonSerializerInternalReader.cs:line 126
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\JsonSerializer.cs:line 526
   at Newtonsoft.Json.JsonSerializer.Deserialize(JsonReader reader, Type objectType) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\JsonSerializer.cs:line 492
   at Newtonsoft.Json.JsonConvert.DeserializeObject(String value, Type type, JsonSerializerSettings settings) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\JsonConvert.cs:line 925
   at Newtonsoft.Json.JsonConvert.DeserializeObject[T](String value, JsonSerializerSettings settings) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\JsonConvert.cs:line 885
   at Newtonsoft.Json.JsonConvert.DeserializeObject[T](String value) in c:\Dev\Releases\Working\Newtonsoft.Json\Src\Newtonsoft.Json\JsonConvert.cs:line 842
   at Twitterizer.Core.SerializationHelper`1.Deserialize(Byte[] webResponseData, DeserializationHandler deserializationHandler)
   at Twitterizer.Core.TwitterCommand`1.ExecuteCommand()
   at Twitterizer.Core.CommandPerformer.PerformAction[T](ICommand`1 command)
   at Twitterizer.TwitterUser.Lookup(OAuthTokens tokens, LookupUsersOptions options)
   at backupTwitter1.result.Page_Load(Object sender, EventArgs e) in C:\Users\Administrator\Desktop\backupTwitter1\backupTwitter1\result.aspx.cs:line 129
   at System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e)
   at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e)
   at System.Web.UI.Control.OnLoad(EventArgs e)
   at System.Web.UI.Control.LoadRecursive()
   at System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) 
```

# sql - 为快速即席查询构建 100M 记录表的好方法是什么？

> ID：10346589
> 
> 赞同：7
> 
> 时间：2012-04-27T07:34:23.710
> 
> 标签：sql, database, database-design, search, nosql

这个场景非常简单，一个有 10 列（一种分析数据）的表中有大约 1 亿条记录，我需要能够对这 10 列的任意组合执行查询。例如这样的：

*   `a = 3 && b > 100`过去 3 个月有多少条记录？

基本上所有的查询都将是一种**在时间间隔中有****多少具有属性的记录`X``Y`**，其中`X`可以是这 10 列的任意组合。

数据将不断涌入，它不仅仅是一组预先给定的 1 亿条记录，而且会随着时间的推移而增长。

由于列选择可以是完全随机的，因此很可能无法为*流行的组合创建索引。*

问题有两个部分：

*   我应该如何在 SQL 数据库中构建它以使查询尽可能快，我可以采取哪些一般步骤来提高性能？
*   是否有任何类型的 NoSQL 数据库针对这种搜索进行了优化？我只能想到 ElasticSearch，但我不认为它在这个大型数据集上会表现得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:38:07.910

如果没有索引，您调整 RDBMS 以支持这种处理的选项会受到严重限制。基本上你需要大量的并行性和超快速的工具包。但很明显，您没有存储实际数据，因此 RDBMS 不适合。

追求并行路线，行业标准是[Hadoop](http://hadoop.apache.org/)。您仍然可以通过[Hive](http://hive.apache.org/)使用 SQL 样式查询。

另一个 noSQL 选项是考虑列式数据库。这些是在不使用多维数据集的情况下组织分析数据的另一种方法。他们擅长快速加载数据。Vectorwise 是该领域的最新玩家。我没有亲自使用过它，但是昨晚的 LondonData 聚会上有人对它大加赞赏。 [检查出来](http://www.actian.com/products/vectorwise)。

当然，远离 SQL 数据库——无论你往哪个方向发展——都会产生陡峭的学习曲线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T02:19:25.320

要使用 SQL 解决方案使这些查询快速运行，请使用这些经验法则。不过，这有很多警告，您使用的实际 SQL 引擎将与解决方案非常相关。

我假设您的数据是整数、日期或短定标器。长字符串等改变了游戏。我还假设您只使用固定比较（=、<、>、<> 等）

a) 如果时间间隔 Y 将出现在每个查询中，请确保它已被索引，除非 Y 谓词选择很大比例的行。确保行以“Y”顺序存储，以便它们彼此相邻地打包在磁盘上。对于新数据，随着时间的推移，这将自然而然地发生。如果 Y 谓词非常紧凑（即几百行），那么这可能就是您需要做的所有事情。

b) 你是在做“select *”还是“select count(* )”？如果不是“select *”，那么垂直分区可能会有所帮助，具体取决于引擎和其他索引。

c) 为值分布广泛且没有太多重复项的每一列创建单列索引。索引 YEAR_OF_BIRTH 通常是可以的，但索引 FEMALE_OR_MALE 通常不好 - 尽管这是高度特定于数据库引擎的。

d) 如果您有 FEMALE_OR_MALE 之类的列并且“Y 谓词”很宽，那么您会遇到不同的问题 - 从大多数行中选择女性人数会很困难。您可以尝试索引，但取决于引擎。

e) 如果可能，尝试使列“NOT NULL”——通常每行节省 1 位，并且可以简化内部优化器操作。

f) 更新/插入。创建索引通常会损害插入性能，但如果您的速率足够低，则可能无关紧要。只有 100M 行，我假设您的插入率相当低。

g）多段键会有所帮助，但您已经说过它们不行。

h) 获取高速磁盘 (RPM) - 这些类型的查询的问题通常是 IO（TPC-H 基准测试是关于 IO，而您听起来像是“H”问题）

还有更多选择，但这取决于您要花费多少精力“使查询尽可能快”。有很多 No-SQL 和其他选项可以解决这个问题，但我会将这部分问题留给其他人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T20:52:52.790

除了上述建议之外，还可以考虑只查询更新的物化视图。我想我只会在桌子上创建一个 select ,count(*) group by cube () 物化视图。

这将为您提供一个完整的立方体。在一个小测试台上玩这个，以了解立方体汇总是如何工作的。查看 Joe Celko 的书籍以获取一些示例，或者直接点击您的特定 RDBMS 文档获取示例。

如果您必须始终能够查询表中最新的微秒数据，您会有点卡住。但是如果你可以放宽这个要求，你会发现物化视图立方体是一个相当不错的选择。

您绝对确定您的用户会以统一的方式点击所有 10 列吗？过去我曾对这种情况进行过早的优化，结果发现用户在他们的大部分报告中确实使用了一两列，并且滚动到那一两列就“足够好”了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T13:30:26.173

就 Oracle 而言，这很可能被构造为一个间隔分区表，在您可能查询的每一列上都有本地位图索引，并且通过直接路径插入或分区交换添加新数据。

可以使用一组物化视图优化对流行的列组合的查询，可能使用汇总或多维数据集查询。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T09:40:41.600

如果您无法从数据中创建 OLAP 多维数据集，是否可以改为基于 X 和 Y 的唯一组合创建汇总表。如果时间段 Y 具有足够高的粒度，您的汇总表可能会相当小。显然取决于数据。

此外，您应该捕获用户运行的查询。通常情况下，用户会说他们想要所有可能的组合，而实际上这种情况很少发生，大多数用户的查询都可以从预先计算的结果中得到满足。汇总表将再次成为此处的一个选项，使用此选项您会得到一些数据延迟，但它可以工作。

如果可能的话，其他选择是查看硬件。[过去，我使用Fusion-IO](http://www.fusionio.com/)等固态驱动器取得了不错的成绩。这可以大大减少查询时间。这不是好的设计的替代品，但是好的设计和合适的硬件可以很好地工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T08:06:00.970

您应该构建一个 SSAS 多维数据集并使用 MDX 来查询它。

多维数据集具有“聚合”意味着提前计算结果。取决于您如何配置多维数据集（和聚合），您可以在度量值组上拥有 SUM 属性（例如 A），并且每次询问多维数据集如何A有很多记录，它只会读取聚合而不是读取所有表并计算它。

# iphone - 在组件行上重新加载选择器

> ID：10346590
> 
> 赞同：0
> 
> 时间：2012-04-27T07:34:24.840
> 
> 标签：iphone, uipickerview

我有两个组件的选择器视图。第二个组件具有“华氏（F）”，“摄氏度（C）”之类的数据，第一个组件具有 F 和 C 的值。我想根据所选值用不同的数据重新加载第一个组件。第二个组件，例如 F & C。所以我的问题是“有可能吗？” 如果是，请以示例或“怎么做？”回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T13:48:18.457

我找到了自己问题的答案。

完成此操作的方法如下 - 另外，请记住在`numberOfRowsInComponent:`方法中调用此代码。

在`titleForRow:`方法中：

```
if (component == kTitleComponent)
{
    return [titleArray objectAtIndex:row];

}

else
{
    switch([pickerViewForThermo selectedRowInComponent:1])  // here you set content of component two depending on which row is selected from component 1
    {
        case 0:            // remember index starts at 0
            return [farenheitArray objectAtIndex:row];

            break;
        case 1:
            return [celciusArray objectAtIndex:row];

            break;
            //... and so on for each row in the component 1 (with index 0)
    }
} 
```

# scala - 如何编写枚举器以沿不同边界对枚举器进行分块

> ID：10346592
> 
> 赞同：7
> 
> 时间：2012-04-27T07:34:31.880
> 
> 标签：scala, playframework, enumerator, playframework-2.0, iterate

因此 Play2.0 [Enumeratee 页面](http://www.playframework.org/documentation/2.0/Enumeratees)显示了使用`&>`or`through`方法将 an 更改`Enumerator[String]`为的示例`Enumerator[Int]`：

```
val toInt: Enumeratee[String,Int] = Enumeratee.map[String]{ s => s.toInt }
val ints: Enumerator[Int] = strings &> toInt 
```

还有一个`Enumeratee.grouped`enumeratee 可以从单个元素创建块的枚举器。这似乎工作正常。

但我看到的是，通常的输入将采用`Array[Byte]`（由`Enumerator.fromFile`and返回`Enumerator.fromStream`）的形式。考虑到这一点，我想将这些`Array[Byte]`输入转换为`Enumerator[String]`，例如，每个字符串都是一行（以 a 结尾`'\n'`）。线条和元素的边界`Array[Byte]`通常不匹配。如何编写一个可以将分块数组转换为分块字符串的枚举器？

目的是在每行可用时将这些行分块返回给浏览器`Array[Byte]`，并保留不属于完整行的剩余字节，直到下一个输入块出现。

理想情况下，我希望有一个方法，给定 an`iter: Iteratee[Array[Byte], T]`和 an`Enumerator[Array[Byte]]`将给我一个`Enumerator[T]`，我的 T 元素被解析`iter`。

附加信息：我有一些时间来清理我的代码，这是我正在尝试做的一个具体示例。我有以下检测下一行的迭代器：

```
import play.api.libs.iteratee._
type AB = Array[Byte]

def takeWhile(pred: Byte => Boolean): Iteratee[AB, AB] = {
  def step(e: Input[AB], acc: AB): Iteratee[AB, AB] = e match {
    case Input.EOF => Done(acc, Input.EOF)
    case Input.Empty => Cont(step(_, acc))
    case Input.El(arr) =>
      val (taking, rest) = arr.span(pred)
      if (rest.length > 0) Done(acc ++ taking, Input.El(rest)) 
      else Cont(step(_, acc ++ taking)) 
  }
  Cont(step(_, Array()))
}

val line = for {
  bytes <- takeWhile(b => !(b == '\n' || b == '\r'))
  _     <- takeWhile(b =>   b == '\n' || b == '\r')
} yield bytes 
```

我想做的是这样的：

```
Ok.stream(Enumerator.fromFile(filename) &> chunkBy(line)).as("text/plain") 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-08T21:04:01.730

[https://github.com/playframework/Play20/commit/f979006a7e2c1c08ca56ee0bae67b5463ee099c1#L3R131](https://github.com/playframework/Play20/commit/f979006a7e2c1c08ca56ee0bae67b5463ee099c1#L3R131)做一些类似于你正在做的事情。我固定分组以处理剩余的输入。代码基本上看起来像：

```
val upToNewLine = 
  Traversable.splitOnceAt[String,Char](_ != '\n')  &>>
  Iteratee.consume()

Enumeratee.grouped(upToNewLine) 
```

我也必须以同样的方式修复重复

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T06:28:19.070

这是我经过几个小时的实验后得到的。我希望有人能想出一个更优雅的实现，因为我几乎无法理解我的。

```
def chunkBy(chunker: Iteratee[AB, AB]) = new Enumeratee[AB, AB] {
  def applyOn[A](inner: Iteratee[AB, A]): Iteratee[AB, Iteratee[AB, A]] = {
    def step(e: Input[AB], in: Iteratee[AB, A], leftover: Input[AB]):
          Iteratee[AB, Iteratee[AB, A]] = {
      e match {
        case Input.EOF =>
          // if we have a leftover and it's a chunk, then output it
          leftover match {
            case Input.EOF | Input.Empty => Done(in, leftover)
            case Input.El(_) =>
              val lastChunk = Iteratee.flatten(Enumerator.enumInput(leftover)
                >>> Enumerator.eof |>> chunker)
              lastChunk.pureFlatFold(
                done = { (chunk, rest) =>
                  val nextIn = Iteratee.flatten(Enumerator(chunk) |>> in)
                  nextIn.pureFlatFold(
                    done = (a, e2) => Done(nextIn, e2),
                    // nothing more will come
                    cont = k => Done(nextIn, Input.EOF),
                    error = (msg, e2) => Error(msg, e2))
                },
                // not enough content to get a chunk, so drop content
                cont = k => Done(in, Input.EOF),
                error = (msg, e2) => Error(msg, e2))
          }
        case Input.Empty => Cont(step(_, in, leftover))
        case Input.El(arr) =>
          // feed through chunker
          val iChunks = Iteratee.flatten(
            Enumerator.enumInput(leftover)
              >>> Enumerator(arr)
              >>> Enumerator.eof // to extract the leftover
              |>> repeat(chunker))
          iChunks.pureFlatFold(
            done = { (chunks, rest) =>
              // we have our chunks, feed them to the inner iteratee
              val nextIn = Iteratee.flatten(Enumerator(chunks: _*) |>> in)
              nextIn.pureFlatFold(
                done = (a, e2) => Done(nextIn, e2),
                // inner iteratee needs more data
                cont = k => Cont(step(_: Input[AB], nextIn,
                  // we have to ignore the EOF we fed to repeat
                  if (rest == Input.EOF) Input.Empty else rest)),
                error = (msg, e2) => Error(msg, e2))
            },
            // not enough content to get a chunk, continue
            cont = k => Cont(step(_: Input[AB], in, leftover)),
            error = (msg, e2) => Error(msg, e2))
      }
    }
    Cont(step(_, inner, Input.Empty))
  }
} 
```

这是我自定义的定义`repeat`：

```
// withhold the last chunk so that it may be concatenated with the next one
def repeat(chunker: Iteratee[AB, AB]) = {
  def loop(e: Input[AB], ch: Iteratee[AB, AB], acc: Vector[AB], 
        leftover: Input[AB]): Iteratee[AB, Vector[AB]] = e match {
    case Input.EOF => ch.pureFlatFold(
      done = (a, e) => Done(acc, leftover),
      cont = k => k(Input.EOF).pureFlatFold(
        done = (a, e) => Done(acc, Input.El(a)),
        cont = k => sys.error("divergent iter"),
        error = (msg, e) => Error(msg, e)),
      error = (msg, e) => Error(msg, e))
    case Input.Empty => Cont(loop(_, ch, acc, leftover))
    case Input.El(_) =>
      val i = Iteratee.flatten(Enumerator.enumInput(leftover) 
          >>> Enumerator.enumInput(e) |>> ch)
      i.pureFlatFold(
        done = (a, e) => loop(e, chunker, acc :+ a, Input.Empty),
        cont = k => Cont(loop(_, i, acc, Input.Empty)),
        error = (msg, e) => Error(msg, e))
  }
  Cont(loop(_: Input[AB], chunker, Vector(), Input.Empty))
} 
```

这适用于一些样本，包括这个：

```
 val source = Enumerator(
   "bippy".getBytes,
   "foo\n\rbar\n\r\n\rbaz\nb".getBytes,
   "azam\ntoto\n\n".getBytes)
 Ok.stream(source 
   &> chunkBy(line) 
   &> Enumeratee.map(l => l ++ ".\n".getBytes)
 ).as("text/plain") 
```

哪个打印：

```
bippyfoo.
bar.
baz.
bazam.
toto. 
```

# javascript - 如何在页面加载时隐藏图像，然后在一段时间后像滑动一样显示

> ID：10346597
> 
> 赞同：0
> 
> 时间：2012-04-27T07:34:51.660
> 
> 标签：javascript, html

我有网页我希望在页面加载一段时间后它会滑动图像而无需任何点击我正在使用以下代码它会在按钮单击时滑动但也会在页面加载时显示图像但我想在页面加载一段时间后滑动最初应该隐藏图像

下面是完成的演示链接

[http://jsfiddle.net/WM5tA/2/](http://jsfiddle.net/WM5tA/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:39:12.093

在用于文档就绪函数的 JavaScript 中，设置调用幻灯片代码的超时（以毫秒为单位），在页面加载后您希望在调用函数进行幻灯片之前等待多长时间。例如等待一秒钟：

```
 $(document).ready(function() {
            setTimeout(function () { $(".imageone, .imagetwo").slideToggle(); },1000);
 }); 
```

[http://jsfiddle.net/vdgDB/1/](http://jsfiddle.net/vdgDB/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:40:29.923

提取您的函数并在 setTimeout 和单击处理程序中调用它：

[http://jsfiddle.net/WM5tA/4/](http://jsfiddle.net/WM5tA/4/)

**JS**

```
 $(document).ready(function() {
        setTimeout(slideAround, 5000); // Toggles the slide after 5 seconds      
        $("input[type=button]").click(slideAround);
        });

 function slideAround() {
        $(".imageone, .imagetwo").slideToggle();
   } 
```

**更新**

要在超时时显示 div 而不是隐藏它们，只需将元素设置为 display:none; 在你的 CSS 中。

[http://jsfiddle.net/WM5tA/6/](http://jsfiddle.net/WM5tA/6/)

**CSS**

```
.imageone, .imagetwo
            {
                [...]
                display:none;
            } 
```

**更新 2**

要从右向左滑动你的元素，你需要像这样使用 jQuery UI：

[http://jsfiddle.net/WM5tA/7/](http://jsfiddle.net/WM5tA/7/)

```
$(".imageone, .imagetwo").show("slide",{direction: "right"}, 1000); 
```

# sql - 在sql server中插入语句

> ID：10346598
> 
> 赞同：-4
> 
> 时间：2012-04-27T07:35:05.073
> 
> 标签：sql, sql-server-2008, tsql

使用 INSERT 语句时，我必须在 SQL Server 中为数据类型 datetime 输入哪些数据

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T07:38:26.037

例子：

```
INSERT YourTable (YourDateTimeField)
VALUES ('2012-04-27T08:35:00') 
```

以可以安全地隐式转换为 DATETIME 的格式提供值，而不会因区域设置而产生误解的风险。因此，根据此示例，yyyy-MM-ddTHH:mm:ss 格式是一个不错的选择。

参考：[ISO 8601 格式](http://msdn.microsoft.com/en-us/library/ms190977%28v=sql.90%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T07:38:18.420

您必须以 ISO 格式输入数据，即

```
insert into table (datecolumn) values ('2012-04-22 13:23:12') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T07:40:06.523

DATETIME - 格式：YYYY-MM-DD HH:MM:SS

# extjs4 - 单击ExtJs4.1中菜单项中的按钮

> ID：10346601
> 
> 赞同：0
> 
> 时间：2012-04-27T07:35:14.320
> 
> 标签：extjs4

为什么每次按下菜单（Extjs4.1）中的按钮时都会出现此错误。当我尝试单击下面菜单中的任何按钮时会发生这种情况。

**未捕获的类型错误：对象 [对象对象] 没有方法“getPageBox”**

这是代码：

```
dockedItems: [{
    xtype: 'toolbar',
    items: [{
        text: _('Add'),
        iconCls: 'entry_add',
        action: 'add',
    },{
        text: _('Search')+':',
    },{
        xtype: 'textfield',
        hideLabel: true,
        width: 160,
        name: 'searchfield',
        enableKeyEvents: true,
    },{
        xtype: 'tbfill',
    },{
        text: _('Delete'),
        iconCls: 'entry_delete',
        action: 'delete',
    },{
        text: _('Refresh'),
        iconCls: 'entry_refresh',
        action: 'refresh',
    },{
        iconCls: 'entry_refresh',
        text: 'Actions',
        menu: {
            xtype: 'menu',
            floating: true,
            items: [{
                text: _('Create Order'),
                iconCls: 'entry_delete',
                action: 'createorder',
            },{
                text: _('Stocktalking'),
                iconCls: 'entry_delete',
                action: 'stocktalking',
            },{
                text: _('Export'),
                iconCls: 'entry_refresh',
                action: 'export',
            },{
                text: _('Import'),
                iconCls: 'entry_refresh',
                action: 'import',
            }],
        },
    }] 
```

# iphone - 如何通过 xcode 编码仅为 iPod touch 禁用电话呼叫按钮？

> ID：10346602
> 
> 赞同：0
> 
> 时间：2012-04-27T07:35:16.337
> 
> 标签：iphone, phone-call, ipod-touch

在我的应用程序中，我将名片显示为陈列室的详细信息。在那个细节中，我已经给用户提供了电话选项。

从 iPhone，我们可以通过提供如下代码来呼叫相应的号码..

```
 NSString* call = [NSString stringWithFormat:@"tel:%@",phone_number];
NSURL* url = [[NSURL alloc] initWithString:[call  stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
[[UIApplication sharedApplication] openURL:url]; 
```

但是从 iPod 我想我们不能给各自的号码打电话。

现在我想为 iPhone 和 iPod 启动应用程序，但如果我将所需的设备功能设置为“电话”，那么应用程序将无法在 iPod 上运行。如果我没有提及所需的设备功能作为电话并按原样提交应用程序，Apple 审核流程是否可以？这将导致 iPod 上的电话呼叫按钮不起作用。

我的问题是如果用户将在 iPod 上安装应用程序，如何禁用电话按钮并以编程方式更改文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:49:57.177

您可以检查设备是否可以打开`tel:`URL，如果不能，则隐藏电话按钮。

```
BOOL canCall = [[UIApplication sharedApplication] canOpenURL:[NSURL URLWithString:@"tel:123456789"]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:52:08.247

我相信如果你的应用程序优雅地降级，它就不会违反准则。如果您的应用完全拒绝在没有它的情况下运行，您只需要声明设备能力要求。

来自[iOS App Programming Guide](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/App-RelatedResources/App-RelatedResources.html)（强调我的）：

> 如果您的应用需要特定设备功能的存在或不存在**才能运行**，您必须使用应用的 Info.plist 文件中的 UIRequiredDeviceCapabilities 键声明这些要求。在运行时，除非设备上存在声明的功能，否则 iOS 无法启动您的应用程序。此外，App Store 需要此信息，以便它可以生成用户设备要求列表并防止用户下载他们无法运行的应用程序

要确定应用程序是否可以响应`tel://`url，请参阅[如何测试 IOS 设备是否具有电话功能？](https://stackoverflow.com/questions/3736110/how-do-i-test-if-ios-device-has-telephone-capabilities) 您基本上用于`canOpenURL`确定是否可以拨打电话。

# iphone - iphone中的html视口

> ID：10346603
> 
> 赞同：3
> 
> 时间：2012-04-27T07:35:16.447
> 
> 标签：iphone, html, css, viewport

请在 iPhone 或 iTouch 中查看此网站：

[http://www.imageworkz.asia/sixsenses](http://www.imageworkz.asia/sixsenses)

如您所见，该网站似乎“减半”。

我目前正在使用这个元视口：

```
<meta name="viewport" content="width=device-width;initial-scale=0.5, maximum-scale=1.0"> 
```

这似乎不能解决问题。我完全不知道应该做些什么来解决这个问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T08:40:39.123

试试这个。

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:38:05.053

这将有助于

`<meta name="apple-mobile-web-app-capable" content="yes" />`

# android - 在一处为布局中的所有 TextView 元素设置样式

> ID：10346611
> 
> 赞同：3
> 
> 时间：2012-04-27T07:36:06.053
> 
> 标签：android, layout, styles

有没有办法将样式应用于布局 xml 中特定类型的所有元素，而无需实际将样式属性添加到所有元素？

我在 GridLayout 中有很多 TextView 元素。如果我可以说所有 TextView 元素都应该具有“CellFont”样式，而实际上不必将该语句放入每个 TextView 元素中，那就太好了。

**解决方案如下：**

将 GridLayoutCellFont 样式添加到 style.xml 并将该样式作为 android:theme 添加到应用程序清单中的 Activity。

样式.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <style name="GridLayoutCellFont">
        <item name="android:textSize">22dp</item>
    </style>

</resources> 
```

显现：

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:theme="@style/GridLayoutCellFont"
        android:label="@string/app_name"
        android:name=".TestLayoutsActivity" >
        <intent-filter >
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T07:40:13.060

两个选项，您可以使用样式或设置新主题阅读更多[样式和主题](http://developer.android.com/guide/topics/ui/themes.html)教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:40:21.950

set android style 或 theme.in raw 可以定义样式

# java - 如何使用 OdfToolkit 打印 OpenDocument 文本？

> ID：10346613
> 
> 赞同：1
> 
> 时间：2012-04-27T07:36:14.420
> 
> 标签：java, odt, odftoolkit

我可以使用 OdfToolkit 打印 ODF 文本文档吗？或者是否有提供这种可用性的开源库？我找不到任何东西。目标机器必须没有安装 Open/Libre Office。

或者如何使用已安装的 Open/Libre Office 二进制文件打印文件？

我想控制打印机属性，例如双面打印，当然还有目标打印机。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T15:23:53.300

OdfToolkit 提供文档操作功能。不包括渲染或打印。您应该使用 UNO 进行打印。看看[http://wiki.openoffice.org/wiki/API/Samples/Java/Office/DocumentHandling](http://wiki.openoffice.org/wiki/API/Samples/Java/Office/DocumentHandling)

# jsf-2 - 更新有条件渲染的 selectItem 不起作用

> ID：10346618
> 
> 赞同：1
> 
> 时间：2012-04-27T07:36:33.357
> 
> 标签：jsf-2, primefaces

我想知道为什么更新表单不会更新有条件呈现的 selectItem。commandButton（用于测试目的）按预期正确更新。

```
<h:form id="form">
    <h:selectOneMenu id="selectedGroupId" label="#{msgs.group_group}" value="#{groupBean.selectedGroupId}">
        <p:ajax event="change" listener="#{groupBean.selectGroupEvent}" update=":form"/>
        <f:selectItem rendered="#{empty groupBean.selectedGroupId}" itemLabel="#{msgs.global_select_select}" />
        <f:selectItems value="#{groupBean.availableGruppen}" />
   </h:selectOneMenu>
   <p:commandButton value="Test" actionListener="#{groupBean.test}" rendered="#{empty groupBean.selectedGroupId}"/> 
</h:form> 
```

任何提示我在这里做错了什么？

谢谢
强尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:37:09.220

没有`rendered`属性`f:selectItem`。

根据[这个答案](https://stackoverflow.com/a/6932217/620338)，您可以使用 a`<c:if>`作为包装器，或者`f:selecItems`在您的操作方法中修改您的列表。

# android - 将 Android 软键盘转换为孟加拉语

> ID：10346620
> 
> 赞同：5
> 
> 时间：2012-04-27T07:36:46.750
> 
> 标签：android, android-softkeyboard

我正在尝试将我的 android 软键盘转换为孟加拉语或任何（其他语言）。我已经实现了来自 android 开发者网站的软键盘代码。是否需要设置另一个 IME 选项以将该软键盘转换为任何其他语言？请给我一些建议来进行这种转换。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T20:59:18.137

您的问题并没有简要说明您真正想要什么。我最近开发了一个 Bangla SoftKeyboard，它看起来像： ![在此处输入图像描述](../Images/a5de56e9d11ba4fec9a22af7630262f2.png)

那是你要的吗？如果是这样，为 Bangla 字符（如 qwerty.xml）制作键盘 xml 布局，并在 SoftKeyboard.java 文件的 onKey 函数中根据它们的 primaryCode（对应的 android:codes 在 xml 文件中）提交孟加拉字符。随意指定您在哪里遇到问题以及您到底想要什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-18T06:28:53.523

我正在分享泰米尔语的完整示例代码。我还创建了这种软键盘。

可在[https://play.google.com/store/apps/details?id=com.tamil.visai&hl=en下载](https://play.google.com/store/apps/details?id=com.tamil.visai&hl=en)

[来源在 github](https://github.com/thamizha/android-tamilvisai)

# php - 随机php多维数组并获取原始数组索引

> ID：10346633
> 
> 赞同：1
> 
> 时间：2012-04-27T07:37:37.943
> 
> 标签：php, multidimensional-array

任何人都可以帮助我了解多维数组吗？我有一个想要在其中随机排列数组的数组，因此它的层次结构或索引值将被更改并且与数组的原始排列不同，例如：

这是原始数组

```
Array(
    [0]=>Array(
             [title]       => 'Title 1'
             [description] => 'description here'
         )
    [1]=>Array(
             [title]       => 'Title 2'
             [description] => 'another description here'           
         )
    [2]=>Array(
             [title]       => 'Title Here Again'
             [description] => 'description here again'           
         )
) 
```

这将是上面数组的原始结构，如果你随机它，假设这将是结果

这是随机数组

```
 Array(
        [0]=>Array(
                 [title]       => 'Title 2'
                 [description] => 'another description here'
             )
        [1]=>Array(
                 [title]       => 'Title 3'
                 [description] => 'another description again'           
             )
        [2]=>Array(
                 [title]       => 'Title 1'
                 [description] => 'description here'          
             )
    ) 
```

正如您所看到的，数组中的值在不同的位置被随机化，现在的问题是我无法获得关于如何从随机数组中获取原始数组索引的确切逻辑 -> ( [0] )。就像值'Title 1'一样，它的原始索引是[0]，在它被随机编辑后它变成了[2]，但我仍然希望'Title 1'被分配给索引[0]。这是关于我如何随机化数组的简短 php 代码：

```
foreach (shuffleThis($rss->getItems()) as $item) {

    foreach($item as $key=>$value){
        if($key=='title'){
                $title=$value;
        }
        if($key=='description'){
            $description=$value;    
        }
    }
}
function shuffleThis($list) { 
  if (!is_array($list)) return $list; 

  $keys = array_keys($list); 
  shuffle($keys); 
  $random = array(); 
  foreach ($keys as $key) { 
    $random[] = $list[$key]; 
  }
  return $random; 
} 
```

只是想`key`从随机编辑中获取他们的原始数组索引。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:43:18.273

如果我理解正确，您想更改元素的*顺序*但保留键。你可以通过一个小的修改来做到这一点：

```
function shuffleThis($list) { 
    if (!is_array($list)) return $list; 

    $keys = array_keys($list); 
    shuffle($keys); 
    $random = array(); 
    foreach ($keys as $key) { 
        $random[$key] = $list[$key]; // CHANGE HERE that preserves the keys
    }
    return $random; 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:41:01.277

使用字符串作为键和函数'shuffle'。
改组示例：[http ://www.php.net/manual/en/function.shuffle.php#104430](http://www.php.net/manual/en/function.shuffle.php#104430)

# c# - LINQ 查询问题

> ID：10346634
> 
> 赞同：1
> 
> 时间：2012-04-27T07:37:40.030
> 
> 标签：c#, asp.net, linq, sql-server-2008, linq-to-sql

我有以下代码，其中我声明了一个变量`groupLabel`并用 初始化它`ObjectContext.Group_Label`，其中`Group_Label`是一个表。

我想从两个表中将数据插入到这个变量中，并且还想检查一个条件`Group_Label_Delivery_Label`标志列是否已设置。如果不是，那么我只想将该记录添加到`groupLabel`：

```
var groupLabel
    = ObjectContext.Group_Label
                   .Include("Group_Label_Delivery_Label")                  
                   .Include("Group_Label_Delivery_Label.Delivery_Label")
                   .FirstOrDefault(
                       gl => (!gl.is_delete)
                          && (gl.group_label_id == groupLabelId)
                          && (gl.owner_id == product.owner_id)); 
```

请帮我检查是否`Group_Label_Delivery_Label`没有设置标志值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:04:12.377

假设您的表具有正确的外键，并且这在您的`.edmx`实体框架文件中表示，您应该能够在调用时在 lambda 表达式中调用它`FirstOrDefault()`。

```
var groupLabel = ObjectContext.Group_Label
                     .Include("Group_Label_Delivery_Label")
                     .Include("Group_Label_Delivery_Label.Delivery_Label")
                     .FirstOrDefault(gl => (!gl.is_delete)
                         && (gl.group_label_id == groupLabelId)
                         && (gl.owner_id == product.owner_id)
                         && (!gl.Group_Label_Delivery_Label.IsDeleted); 
```

# iphone - 为什么在一个全新的项目（xcode 3.1.4）上不调用 dealloc？

> ID：10346636
> 
> 赞同：2
> 
> 时间：2012-04-27T07:37:47.410
> 
> 标签：iphone, ios, xcode, dealloc

我开始学习 iPhone 编程，这显然是一个非常简单的问题。我在 xcode 3.1.4 中工作。现在，当我创建一个基于窗口的应用程序的新项目并修改 dealloc（在 AppDelegate.m 文件中）以便它实际上在控制台上发出打印语句时，我实际上看*不到*该语句。所以，我的问题是为什么？

为了避免明显的答案，修改后的 dealloc 是：

```
- (void)dealloc {
    NSLog(@"Dealloc is called");
    [window release];
    [super dealloc];
} 
```

这很奇怪吗？

最初我在[这里](https://stackoverflow.com/questions/10322586/how-to-assign-the-maincontroller-and-a-custom-view-to-an-app-with-a-single-windo)发布了类似的问题，但现在我知道真正的问题是我在这里描述的问题。版主，请随意删除我的其他帖子。我很抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T07:43:49.350

appDelegate 在应用程序结束之前不会被释放，此时在控制台上看到消息为时已晚。

此外，对于任何新项目，无论如何都应该使用 ARC，这样在很多情况下就不需要调用 dealloc。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T07:43:19.613

可能是调用此 dealloc 时 NSLog 不可用。应用程序委托是程序完成后在项目中释放的最后一件事。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T07:52:29.067

它没有被调用，因为那时您的应用程序可能正在运行。当它被调用时，您的应用程序可能已被终止。我同意 borrrden 的观点，即 appdelegate 的 dealloc 函数是最后被调用的。如果您想了解 retai/release、alloc/dealloc，请尝试使用 xcode 3.2.6，如果您想使用 ARC，请尝试使用 ios5 的 xcode 4.2。

# linux - 使用 Qt 检查可用的文件句柄以避免 SIGBUS 错误

> ID：10346644
> 
> 赞同：1
> 
> 时间：2012-04-27T07:38:26.313
> 
> 标签：linux, multithreading, qt, qthread, qprocess

我在多线程 Qt 控制台应用程序中使用 QProcess。在运行时我得到了大约 250 个连接线程，每个连接线程都使用一个 DB 连接并使用 QProcess 对象执行一个 shell 命令。

我的`ulimit -n`节目 1024（=管道或文件句柄可用）。我想我在这里达到了极限，改变它只会推迟问题。我需要对此进行适当的错误处理（而不是 SIGBUS 崩溃）。在开始 QProcess 之前，如何检查可用的管道号？

非常感谢您的任何提示。

尖刺

**来自 Qt 来源的 qprocess_unix.cpp 引用的代码：**

代码在该行崩溃`FD_SET(childStartedPipe[0], &fds);`

```
bool QProcessPrivate::waitForStarted(int msecs)
{
    Q_Q(QProcess);

#if defined (QPROCESS_DEBUG)
    qDebug("QProcessPrivate::waitForStarted(%d) waiting for child to start (fd = %d)", msecs,
       childStartedPipe[0]);
#endif

    fd_set fds;
    FD_ZERO(&fds);
    FD_SET(childStartedPipe[0], &fds); // Here I get a SIGBUS fault
    if (select_msecs(childStartedPipe[0] + 1, &fds, 0, msecs) == 0) {
        processError = QProcess::Timedout;
        q->setErrorString(QProcess::tr("Process operation timed out"));
#if defined (QPROCESS_DEBUG)
        qDebug("QProcessPrivate::waitForStarted(%d) == false (timed out)", msecs);
#endif
        return false;
    } 
```

...

**这是调用 QProcess 的函数：**

```
void CmdManager::executeCommand() {
  shellProcess = new QProcess();
  QString cmd = "/bin/ls";

  QString argStr =      "-lrth *.tmp";
  shellProcess->start(cmd,argStr.split(QString(" ")));
  bool b= shellProcess->waitForFinished(30000);
  if (!b) {
      qCritical("ls cmd finishing failed");
      shellProcess->close();
      shellProcess->terminate();
      return;
  }

  if (shellProcess->exitCode() > 0){
      qCritical() << "cmd failed, error msg=" << shellProcess->errorString();
  }
  QByteArray result = shellProcess->readAllStandardOutput();
  QString resultStr = QString(result.data());
  qDebug() << "Result=" << resultStr;

  shellProcess->close();
  shellProcess->terminate();
  delete shellProcess;
  shellProcess = NULL;
} 
```

# c# - ASP.Net MVC4 beta - HttpClient 中没有 await 关键字支持？

> ID：10346645
> 
> 赞同：2
> 
> 时间：2012-04-27T07:38:30.817
> 
> 标签：c#, asp.net-mvc-4, async-await

`HttpClient`MVC4 beta 中的类不支持`await`关键字吗？我已经安装了一段时间的异步 CTP，但现在也安装了 MVC4 测试版，编译器告诉我`HttpClient`方法是不可等待的，尽管我在网上看到的各种代码示例表明不是这样。我错过了什么？

**编辑**

我说的是任何 *Async() 方法。例如`await client.PutAsync(...);`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T17:36:52.640

可以等待的界面在测试版中发生了一些变化，因此如果您可以改用 VS11（如果项目处于低级（.NET 4、SL 5），则可以使用最近的目标包），那么您应该没问题。较旧的异步 CTP 编译器不知道更改。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T09:35:13.587

编译器消息令人困惑。您必须将 AsyncCtpLibrary.dll 添加到您的项目中。使用 NuGet 包 AsyncAwaitCTP 快速完成。

# c# - .net 正则表达式，用于除空格外的所有不可见、非字母数字字符

> ID：10346646
> 
> 赞同：-1
> 
> 时间：2012-04-27T07:38:35.930
> 
> 标签：c#, .net, regex, vb.net

我必须处理一个可能包含各种非标准字符的字符串，并且我被要求提供一个正则表达式，它将匹配并删除除标点符号和空格之外的所有非字母数字字符。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:58:33.883

来自[正则表达式.info](http://www.regular-expressions.info/unicode.html#prop)：

`\p{P}`或`\p{Punctuation}`：任何类型的标点符号。

`\p{L}`或`\p{Letter}`：任何语言的任何类型的字母。

`\p{Nd}`或`\p{Decimal_Digit_Number}`：除表意文字外的任何文字中的数字 0 到 9。

你的正则表达式看起来像这样

```
[^\p{L}\p{Nd}\p{P} ]+ 
```

这将匹配非字母、非数字、非标点和非空格的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:42:58.350

使用这种模式：`@"[^\s\w]| "`
`^`方括号中的符号表示否定。所以这将匹配除单词字符（数字、字母和下划线）和空格（`[^\s\w]`）或空格之外的所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T07:45:05.590

使用以下正则表达式。

```
[^a-zA-Z0-9!.,'" ] 
```

将任何其他允许的标点符号添加到表达式中。最后一个空格是一个`space`字符。

`\w`如果允许下划线，则使用。`\s`将允许空白字符。

# django - 如果存在记录，则预先填写表格

> ID：10346652
> 
> 赞同：2
> 
> 时间：2012-04-27T07:39:13.980
> 
> 标签：django, django-forms, django-views

如果用户单击“配置文件/编辑/”链接，则会加载模板。

但是如果记录已经存在，我希望预先填充模板中的字段。

我试过这个，但它似乎不起作用。

```
def editprofile(request):
    if request.user.is_authenticated():
        try:
            userprofile = UserProfiles.objects.get(user=request.user)
            form = UserProfileForm(request.POST, instance=userprofile)
        except UserProfiles.DoesNotExist:
            userprofile = None
        if userprofile:
            return render_to_response('profile_edit.html', {'form':form}, context_instance=RequestContext(request))
        else:
            return render_to_response('profile_edit.html', {'form':UserProfileForm()}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T10:39:15.657

您的代码不起作用，因为您不能同时使用 dict 和实例初始化表单 ( `form = UserProfileForm(request.POST, instance=userprofile)`)。您只能为其提供初始值，这些值会覆盖实例。

试试这个：

```
from django.shortcuts import render
from django.contrib.auth.decorators import login_required

@login_required
def editprofile(request):
    try:
       userprofile = UserProfiles.objects.get(user=request.user)
    except UserProfiles.DoesNotExist:
       return render(request, 'profile_edit.html', {'form':UserProfileForm()})
    form = UserProfileForm(instance=userprofile)
    return render(request, 'profile_edit.html', {'form':form}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:55:55.730

我将使用基于类的视图并将调度方法包装为需要登录，有点像这样：

```
class ProfileView(TemplateView, ProcessFormView):

    template_name = "profile.html"

def post(self, request, *args, **kwargs):
    context = self.get_context_data()
    # Validate the form
    form = ProfileForm(request.POST, request.FILES)
    if form.is_valid():
        profile = get_object_or_404(UserProfile, user=request.user)
        if form.cleaned_data['avatar']:
            profile.avatar = form.cleaned_data['avatar']
        profile.bio = form.cleaned_data['bio']
        profile.save()

        context['form'] = ProfileForm(initial={'bio':UserProfile.objects.get(user=request.user).bio})

        # Add message
        messages.add_message(request, messages.SUCCESS, _(u"Profile saved."))

    else:
        # Add message
        messages.add_message(request, messages.ERROR, _(u"Something went wrong..."))

        context['form'] = form
    return self.render_to_response(context)

def get(self, request, *args, **kwargs):
    context = self.get_context_data()
    context['form'] = ProfileForm(initial={'bio':UserProfile.objects.get(user=request.user).bio})
    return self.render_to_response(context)

def get_context_data(self, **kwargs):
    context = super(ProfileView, self).get_context_data(**kwargs)
    context['title'] = 'profile'
    return context

@method_decorator(login_required(login_url='/'))
def dispatch(self, *args, **kwargs):
    return super(ProfileView, self).dispatch(*args, **kwargs) 
```

# android - 两个 ViewPagers 同步滚动

> ID：10346655
> 
> 赞同：3
> 
> 时间：2012-04-27T07:39:27.413
> 
> 标签：android, scroll, android-viewpager

我需要在两个浏览器中同步滚动。

这里有一些相关的代码：

```
super.onTouchEvent(ev);
    switch (ev.getAction()) {
    case MotionEvent.ACTION_DOWN:
        mViewPager.beginFakeDrag();
        return true;
    case MotionEvent.ACTION_MOVE:
        mViewPager.fakeDragBy(mViewPager.getScrollX()-getScrollX());
        return true;

    case MotionEvent.ACTION_UP:
    case MotionEvent.ACTION_CANCEL:
        mViewPager.endFakeDrag();
        return true;
    default:
        break;
    }
    return mViewPager.onTouchEvent(ev); 
```

我得到触摸事件，并以相同的量滚动第二个视图。但是我无法管理的一件事是类似地禁用或处理投掷，我的意思是短的快速手势，它会自动使滚动跳转到下一页。

结构是-ViewPagerNavigator--ViewPagerMenu-

我如何让它在菜单寻呼机上工作，或者只是禁用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T10:30:35.967

根据之前的评论：

我不确定它是否会有所作为，但你玩过[`ViewPager.OnPageChangeListener`](http://developer.android.com/reference/android/support/v4/view/ViewPager.OnPageChangeListener.html)界面吗？`onPageScrolled(...)`我想您可以使用该方法和传入的偏移量，而不是直接捕获触摸事件。对于甩尾，你也许可以逃脱惩罚`onPageSelected(...)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-08T09:29:03.840

你可以在这里查看我的答案

[使用 OnPageChangeListener 同步两个 ViewPager](https://stackoverflow.com/questions/16107016/synchronizing-two-viewpagers-using-onpagechangelistener/24104748#24104748)

您也可以在这些上设置不同的 PageTransformer。

# timer - opa 服务器超时

> ID：10346661
> 
> 赞同：0
> 
> 时间：2012-04-27T07:39:54.840
> 
> 标签：timer, timeout, opa

我有以下错误：

```
Error: uncaught OPA exception {OpaRPC_Server: {timeout: {client: {client: $"j98soqx7hbavgq2scg915j7mlkctdeop"$; page: $1
042254815$}; fun_id: $"_v0_get_value_stdlib.core.xhtml"$}}} 
```

使用下面的简单代码：

```
function start()
{

  content = <textarea style="width:30%;" rows=1 id=#text > text </textarea> <+>
  <div id=#copy></div>
  Scheduler.timer(3000, function() {#copy =+ Dom.get_value(#text)})
  content
}

Server.start(
  Server.http,
  { page:start,
    title:"bug timer"
  }
) 
```

当我关闭运行应用程序的选项卡时出现错误。尽管选项卡已关闭，但计时器似乎仍在继续工作。

我怎样才能阻止它？

谢谢，

开曼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T16:45:01.183

您有几种方法可以解决您的问题。第一个是在您的计划函数启动异常时显式停止计时器。这给出了类似的东西：

```
function start()
{
   content = <textarea style="width:30%;" rows=1 id=#text > text </textarea> <+>
   <div id=#copy></div>
   recursive timer = 
     Scheduler.make_timer(3000, function() {
       @catch(function(exn){Log.error("EXN", "{exn}"); timer.stop()},
              #copy =+ Dom.get_value(#text))
       }
     )
   content
} 
```

但是问题来了，因为您的计时器是在服务器端执行的（因为它是由 start 函数创建的）。

因此，更好的解决方法是在客户端设置您的计时器。你有几种方法可以做到这一点。

1 - 只需标记您的计时器@client，它将在客户端顶层执行。但这有点“暴力”。因为它将在所有页面上启动。

```
@client x = Scheduler.timer(3000, function() {#copy =+ Dom.get_value(#text)}) 
```

2 - 在 onready 事件中开始，计时器将在 div #copy 准备好时开始。

```
function start()
{
  content = <textarea style="width:30%;" rows=1 id=#text > text </textarea> <+>
  <div id=#copy onready={function(_){
    Scheduler.timer(3000, function() {#copy =+ Dom.get_value(#text)})
  }}
  ></div>
  Scheduler.timer(3000, function() {#copy =+ Dom.get_value(#text)})
  content 
```

}

# ios - 在 UIWebview 中打开一些 xlsx 文件时出错

> ID：10346662
> 
> 赞同：3
> 
> 时间：2012-04-27T07:39:57.583
> 
> 标签：ios, exception, uiwebview

我可以在 UIWebview 中成功打开 xlsx 文件的本地副本

```
NSString *filePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:[NSString stringWithFormat:@"/%@",[detailItem valueForKey:@"path"]]];
NSURL *fileURL = [[NSURL alloc] initFileURLWithPath:filePath];
[self.documentWebview loadRequest:[NSURLRequest requestWithURL:fileURL]]; 
```

但是对于某些文件，我在控制台日志中遇到异常。我不知道这些异常来自哪里以及如何捕获它

```
<Warning>: exception: Could not find the end of central directory record
<Warning>: EXCEPTION SFUZipEndOfCentralDirectoryError: Could not find the end of central directory record 
```

此文件仅开始加载

```
-(BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType <br>
- (void)webViewDidStartLoad:(UIWebView *)webView 
```

被调用且以下代表均未被调用

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
- (void)webViewDidFinishLoad:(UIWebView *)aWebView <br> 
```

当我尝试在某些加载文件的 webview 中加载第二个文件时，我得到**didFailLoadWithError**为以前的 xlsx 调用，下面是控制台日志

```
-----====UIWebview shouldStartLoadWithRequest: /var/mobile/Applications/08653237-F656-42F7-B405-1F89C208A866/Documents/12 So1 what is new in Excel 2007.xlsx =======-------
webViewDidStartLoad 
exception: Could not find the end of central directory record 
EXCEPTION SFUZipEndOfCentralDirectoryError: Could not find the end of central directory record 
```

第二个文件的日志

```
webView didFailLoadWithError: Error Domain=NSURLErrorDomain Code=-999 "The operation couldn’t be completed. (NSURLErrorDomain error -999.)" UserInfo=0x5655c30 {NSErrorFailingURLKey=file:///var/mobile/Applications/08653237-F656-42F7-B405-1F89C208A866/Documents/12%20So1%20what%20is%20new%20in%20Excel%202007.xlsx, NSErrorFailingURLStringKey=file:///var/mobile/Applications/08653237-F656-42F7-B405-1F89C208A866/Documents/12%20So1%20what%20is%20new%20in%20Excel%202007.xlsx}
webViewDidStartLoad

Detail View finished /var/mobile/Applications/08653237-F656-42F7-B405-1F89C208A866/Documents/a.txt : 
```

这是由于 UIWebview 缓存吗？如何捕获 UIWebview 异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T14:59:45.807

这可能是因为您的文件元数据已损坏。我遇到了同样的问题，但发现 url 响应实际上是一个 html 页面错误，它是作为 IIS 服务器的数据返回的。我直接把它写到文件中。不过，我在 &error 变量中没有收到任何错误。这实际上是一个服务器错误！

# c# - 我应该添加多个 Web.config 文件中多个页面的元素

> ID：10346663
> 
> 赞同：2
> 
> 时间：2012-04-27T07:40:01.430
> 
> 标签：c#, asp.net, web-config, roles

我正在使用`Asp.Net/C#`，我正在使用`Roles`基于授权来访问我的许多页面。到目前为止，我只有两个页面可供只有管理员角色访问。为了拒绝访问其他角色，我在我的 Web.config 文件中使用它。

```
<location path="CreateAccount.aspx">
    <system.web>
      <authorization>
        <allow roles="Admin"/>
        <deny users="*"/>
      </authorization>
    </system.web>
  </location> 
```

这是针对 page1 的，假设将来我继续添加更多只有管理员角色才能访问的页面，我该如何管理，我应该在`location`每页添加一个元素还是有办法解决。我知道我可以将它们分组到一个文件夹中然后为此添加一个 web.config 文件。如果我将来添加许多页面，这是一个更好的方法吗？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:46:46.510

我可能会采取另一种方式——默认情况下，所有页面都处于最高限制级别（可能是管理员），然后将其他人可以访问的页面列入白名单。这意味着，如果添加了一个页面并且没有更新配置，那么任何不应该看到它的人都无法看到它。

至于如何实现这一点：是的，在子目录中有一个 web.config 可能是最简单的方法。

# linux - AWK 编程，条件语句

> ID：10346664
> 
> 赞同：0
> 
> 时间：2012-04-27T07:40:02.517
> 
> 标签：linux, bash, awk

这个 awk 命令将对每一行执行“stuff 1”，仅对第一行执行“stuff 2”，对除第一行以外的行执行“stuff 3”。

```
awk '{ { Do stuff 1 } if(NR==1) { Do stuff 2 } else { Do stuff 3 } }' 
```

基于上述内容，下面将为每一行执行“stuff 1”，当该行不是第一行时为“stuff 2”，为每一行（包括第一行）正确执行“stuff 3”？？

```
awk '{ Do stuff 1 } NR!=1 { Do stuff 2 } { Do stuff 3 }' 
```

还是只对 NR!=1 的行执行“stuff 2”和“stuff 3”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:47:35.237

在 5 行输入上：

```
ls -1 | awk '{ print "allways"; } NR!=1 { print NR"-"2; } { print NR"-"3 }'
allways
1-3
allways
2-2
2-3
allways
3-2
3-3
allways
4-2
4-3
allways
5-2
5-3 
```

所以，stuff3 总是完成（就像 stuff1 一样）。只有 stuff2 受条件影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:47:57.287

注意第一个中的外大括号；您有一个在所有行上执行的块，其中包含一个在所有行上执行的块和一个基于`NR`.

第二个有三个块，其中第二个有一个条件，它只在第 2 行及以后执行。

# wordpress - 如何合并 wordpress 中单独管理的两个菜单以在前端主题中显示为一个？

> ID：10346668
> 
> 赞同：10
> 
> 时间：2012-04-27T07:40:18.270
> 
> 标签：wordpress, wordpress-theming

我正在为一个已经建立在 wp 上的网站开发一个 wp 主题，并且在 wp admin 中有一个非常大的菜单，该菜单分为两个菜单。

我想在单个 UL 的主题中合并这两个菜单。目前它在不同的 div 容器和 ul li 中生成两个菜单，并且正在破坏其上应用的样式和 js。

如何将这两个菜单合并到单个容器中的单个 ul li 中？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-27T09:20:26.620

好的，所以如果您使用的是 wp_nav_menu()

尝试使用类似的东西

```
<ul id="MyMenu">
  <?php wp_nav_menu( array('menu' => 'FirstMenu', 'items_wrap' => '%3$s' ) ); ?>
  <?php wp_nav_menu( array('menu' => 'SecondMenu', 'items_wrap' => '%3$s' ) ); ?>
</ul> 
```

使用 items_wrap 将从每个菜单中删除 ul，因此将菜单封装在已定义的 ul 标记中，wp_nav_menu 将只输出 li 标记。

请参阅删除 ul 包装：[http ://codex.wordpress.org/Function_Reference/wp_nav_menu](http://codex.wordpress.org/Function_Reference/wp_nav_menu)

米

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-08T16:07:18.837

问题是每个**wp_nav_menu**仍然被包装在单独的 div 中。您还需要关闭这些 div，方法是向每个div 添加**“'container' => false” ，如下所示：**

```
<ul id="MyMenu">
  <?php wp_nav_menu( array('menu' => 'FirstMenu', 'items_wrap' => '%3$s', 'container' => false ) ); ?>
  <?php wp_nav_menu( array('menu' => 'SecondMenu', 'items_wrap' => '%3$s', 'container' => false ) ); ?>
</ul> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-11-07T23:54:24.510

您可以将它们与此方法结合使用。它保留了一些由 WP 生成的菜单类。

```
// two WordPress menus combined into one.
// first menu.
$menu = wp_nav_menu( array(
    'theme_location'=> 'secondary', // or whatever location
    'fallback_cb'   => false,
    'container'     => '',
    'items_wrap' => '%3$s',
    'echo' => false
) );
// include all of the menu items from the first inside the second menu.
wp_nav_menu( array(
    'theme_location' => 'primary', // or whatever location
    'items_wrap' => '<ul id="%1$s" class="%2$s">%3$s ' . $menu . '</ul>',
) ); 
```

# html - Phone Gap 中的输入字段表单问题

> ID：10346670
> 
> 赞同：2
> 
> 时间：2012-04-27T07:40:26.547
> 
> 标签：html, css, jquery-mobile, cordova, textinput

我正在使用 PhoneGap 以及 JQuery Mobile 和 HTML 元素来实现我的项目。

```
<!DOCTYPE html> 
<html> 
<head> 
    <script type="text/javascript" charset="utf-8" src="cordova-1.5.0.js"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="target-densityDpi=device-dpi, width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" /> 
    <title>Meri Mrji</title> 
    <link rel="stylesheet" href="style/main.css">
    <link rel="stylesheet" href="style/jmobile.min.css" />
    <script src="jquery.js"></script>
    <script src="jquery.mobile.js"></script>
    <script type="text/javascript">
    </script>
</head>
<body>
    <div data-role="page" id="signup" >
         <div class="contentwrap">
            <section>
            <div class="sectionhead">
                    <h1><strong>Sign Up</strong></h1>
                </div>
                <form class="forms" action="http://google.com" type="POST">
                    <h1>Please enter <strong>Your Details</strong></h1>
                    <input type="text" placeholder="Full Name" />
                    <input type="email" placeholder="Email Address" />
                    <input type="tel" placeholder="Mobile Number" />
                    <input type="text" placeholder="Username" />
                    <input type="password" placeholder="Password" />
                    <p class="terms">
                    <a href="#signin" >View Terms</a>
                    <input type="button" value="Click me" class="green_btn" />
                    </p>
                </form>
            </section>
        </div>
    </div>
</body>
</html> 
```

单击并从一个页面过渡到另一个页面，其他所有事情似乎都可以正常工作。但是，每当我单击任何文本字段以填写表单时，CSS 似乎都会被扭曲和放大。任何其他人都面临着与 Phone Gap 相同的问题或知道其他出路。

**- - - - - - 编辑 - - - - - -**

启动时 App 启动时视口的分辨率是一些

```
 width : 500 ;
 height : 794; 
```

单击输入字段后

```
 width : 320 ;
 height : 268; 
```

有没有办法我可以使用一些

```
 preventdefault() method 
```

或者如果我可以再次强制将视口更改回宽度：500 和高度：794？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T21:25:37.703

删除**target-densityDpi=device-dpi**会停止缩放我的 HTC Evo。更多关于视口的见解在[这里](https://stackoverflow.com/questions/4893045/making-sense-of-android-meta-viewport-scaling-what-am-i-missing)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T17:25:42.837

终于在一些随机网址上得到了解决方案：http: [//uihacker.blogspot.in/2011/01/android-phonegap-scale-webview-to-fit.html](http://uihacker.blogspot.in/2011/01/android-phonegap-scale-webview-to-fit.html)

这是本机代码，它似乎覆盖了**WEBVIEW**中的所有内容，并为其提供一致的视图，在单击任何输入值时没有缩放效果:)

# wcf - 在 wcf 休息服务中发送图片的麻烦

> ID：10346677
> 
> 赞同：0
> 
> 时间：2012-04-27T07:40:54.060
> 
> 标签：wcf, windows-phone-7, restsharp

我正在编写 WCF Rest 服务。他将用于接收和保存图片。我使用 Windows Phone 7 客户端拍摄并发送照片。我可以发送在流上解析的图片（在服务端），但由于“参数错误”，图片不会被保存。

用于拍照的代码：

```
private void TakePictureAction()
    {
        //Show the camera
        _camera.Show();
        //Append when camera task finished.
        _camera.Completed += delegate(object sender, PhotoResult e)
                                {
                                    _photoImage = new BitmapImage();
                                    _photoImage.SetSource(e.ChosenPhoto);
                                };
    } 
```

用于发送图片的代码（带休息）：

```
var client = new RestClient("http://127.0.0.1:81/Service.svc");
var request = new RestRequest("/uploadImage", Method.POST);
request.AddBody(_photoImage);
try
{
    client.ExecuteAsync(request, response =>
                                 {
                                    //Do stuff
                                 });
}
catch (Exception ex)
{
    MessageBox.Show("error");
} 
```

和服务器端的代码：

```
public void UploadImage(Stream fileStream)
{
    if (fileStream != null)
    {
        string filePath = @"c:\";
        using (FileStream fileToUpload = new FileStream(filePath + "ok.bmp", FileMode.Create))
        {
            byte[] byteArray = new byte[10000];
            int bytesRead = 0;
            do
            {
                bytesRead = fileStream.Read(byteArray, 0, byteArray.Length);
                if (bytesRead > 0)
                {
                    fileToUpload.Write(byteArray, 0, bytesRead);
                }
            } while (bytesRead > 0);
            using (MemoryStream ms = new MemoryStream(byteArray))
            {
                Bitmap img = (Bitmap)Image.FromStream(ms);
                img.Save(@"c:\img.bmp");
            }
        }
    }
} 
```

我的服务方法

```
 [OperationContract]
        [WebInvoke(UriTemplate = "/uploadImage", Method = "POST", BodyStyle = WebMessageBodyStyle.Bare, ResponseFormat = WebMessageFormat.Json)]
        void UploadImage(Stream img); 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:22:49.507

我的服务方法定义如下：

```
[WebInvoke]
string PostImage(Stream stream); 
```

服务方法的实现如下图：

```
public string PostImage(Stream stream)
        {
            var ms = new MemoryStream();
            stream.CopyTo(ms);
            var streamBytes = ms.ToArray();            
            FileStream f = new FileStream("C:\\temp\\sample.jpg", FileMode.OpenOrCreate);
            f.Write(streamBytes, 0, streamBytes.Length);
            f.Close();
            ms.Close();
            stream.Close();
            return "Recieved the image on server";
        } 
```

现在我从我的客户上传了一张图片，如图所示：

```
Image image = Image.FromFile("C:\\Sample.png"); // NOTE : Replace your photo location from the camera here
MemoryStream ms = new MemoryStream();
image.Save(ms, System.Drawing.Imaging.ImageFormat.Png);
byte[] imageArray = ms.ToArray();
ms.Close();

var client = new RestClient();            
client.BaseUrl = "http://localhost/Service/Service1.svc";
var request = new RestRequest(method) { DateFormat = DataFormat.Xml.ToString(), Resource = "/PostImage" };
request.AddFile("stream", image, "Array.png");
var response = client.Execute(request);
string responseString;
if (response.StatusCode == HttpStatusCode.OK)
{
     responseString = HttpUtility.HtmlDecode(response.Content);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:23:36.917

Windows Phone 以 Jpeg 格式保存图片，所以这里的问题很可能是因为您在服务器上保存了带有“.bmp”（位图）扩展名的文件，因此您得到了“格式错误”的错误！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-09T10:02:04.977

问题来自我的网络服务。我必须最大化消息的大小（以便能够发送完整的图片。）。我通过使用[这个stackoverflow帖子做到了](https://stackoverflow.com/questions/6629140/what-is-the-proper-configuration-for-a-wcf-4-rest-service)

# php - 出现错误：无法使用 Symfony2 JMSPaymentCoreBundle 加载类型“jms_choose_payment_method”

> ID：10346683
> 
> 赞同：2
> 
> 时间：2012-04-27T07:41:25.730
> 
> 标签：php, symfony

我昨天尝试安装 JMSPaymentCoreBundle 的主分支，并尝试使用文档中的一些代码。

执行时

```
$this->getFormFactory()->create('jms_choose_payment_method'... 
```

我收到错误：

无法加载类型“jms_choose_payment_method”

我用 deps 文件安装了这个包。我已经完成了 registerBundle（在 AppKernel.php 中）和 registerNamespace（在 autoload.php 中）。我可以看到文件 vendor\bundles\JMS\Payment\CoreBundle\Form\ChoosePaymentMethodType.php 存在，并且 vendor\bundles\JMS\Payment\CoreBundle\Resources\config\payment.xml 确实包含：

```
<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

<parameters>
...
    <parameter key="payment.form.choose_payment_method_type.class">JMS\Payment\CoreBundle\Form\ChoosePaymentMethodType</parameter>
...
</parameters>

<services>
...
    <service id="payment.form.choose_payment_method_type" class="%payment.form.choose_payment_method_type.class%">
        <argument type="service" id="payment.plugin_controller" />
        <tag name="form.type" alias="jms_choose_payment_method" />
    </service>
</services>
</container> 
```

难道我做错了什么？或者，这是一个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-03T21:40:18.040

这个包目前只适用于 symfony 2.1

# java - Android：如何从日期和时间选择器中获取值

> ID：10346685
> 
> 赞同：8
> 
> 时间：2012-04-27T07:41:29.030
> 
> 标签：java, android, date, time, datepicker

我正在构建一个应用程序，我试图在其中要求用户选择时间，所以我使用了`datePicker`and`timePicker`和`button set`. 所以当他点击`set button`一个`dialog box`来说你已经选择了x日期和x时间或者以任何方式出现在屏幕上的消息就像用户选择了这个时间一样。所以我构建了代码，但是当我的应用程序进入该活动时，它总是被强制停止。显示数据相关没有问题，因为当我评论从and`xml file`获取值的 java 行时，应用程序工作得非常好。我仍然发布两个文件代码以便于理解。还发布了日志猫异常。我已经删除了所有不必要的代码，如导入和包以及额外的按钮等，以使其快速阅读。`datePicker``timePicker`

**这是`.xml`文件的代码**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" android:layout_width="fill_parent"
android:layout_height="fill_parent" android:weightSum="10"
android:id="@+id/commonlayout" android:background="#FFFFFF">

<LinearLayout android:id="@+id/llheader"
    android:layout_width="fill_parent" android:layout_height="20dp"
     android:layout_weight="1"
     android:background="@drawable/bg">

    <RelativeLayout android:id="@+id/relativeLayout1"
        android:layout_width="fill_parent" android:layout_height="fill_parent"
        android:layout_gravity="center"> <!--header-->
        <TextView
            android:id="@+id/txt_header"
            android:layout_width="wrap_content"          
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"/>            
        </RelativeLayout>           
</LinearLayout>
 <ScrollView 
    android:id="@+id/scrollView1"
    android:layout_width="wrap_content" android:layout_height="wrap_content"
    xmlns:android="http://schemas.android.com/apk/res/android">
<LinearLayout android:layout_width="wrap_content"
    android:id="@+id/linearLayout1" android:orientation="vertical"
    android:layout_height="wrap_content" 
<DatePicker android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
  android:id="@+id/datePicker"></DatePicker>
<TimePicker android:id="@+id/timePicker"
    android:layout_width="wrap_content"   
  android:layout_height="wrap_content</TimePicker>
<TableRow android:id="@+id/tableRow1" android:layout_height="wrap_content"
    android:layout_width="match_parent" android:gravity="center">

    <Button android:id="@+id/btnSetDateTime"
        android:layout_height="wrap_content" android:text="Set"
        android:layout_width="wrap_content"/>
     <Button 
        android:layout_width="fill_parent" 
        android:layout_height="wrap_content" 
        android:text="Next"                       
        android:id="@+id/btnNext1" />   
  </TableRow>
 </LinearLayout>
 </ScrollView>    
<LinearLayout android:id="@+id/lldata"
    android:layout_weight="8" android:layout_width="fill_parent"
    android:layout_height="0dp" android:background="#FFFFFF">           
</LinearLayout>

<LinearLayout android:id="@+id/llfooter"
    android:layout_width="fill_parent"
    android:orientation="horizontal" android:layout_height="20dp"
    android:visibility="visible" 
    android:layout_margin="0dp">     
</LinearLayout> 
```

**这是代码`TimeDate.java`：**

```
public class TimeDate extends Activity
{

Button  btnNext;
private TextView dateText;
 public void onCreate(Bundle savedInstanceState)
 {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.time_date);
        btnNext=(Button)this.findViewById(R.id.btnNext1);           
        btnNext.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) 
            {

                    Intent myintent = new  Intent(TimeDate.this, Next.class);
                    startActivity(myintent);
                    finish();
                    }
        });
        ScrollView DTPicker = (ScrollView) View.inflate(TimeDate.this,R.layout.time_date, null);

        Button  btnSet = (Button) DTPicker.findViewById(R.id.btnSetDateTime);
        final   DatePicker dp = (DatePicker) DTPicker.findViewById(R.id.datePicker);
        final   TimePicker tp = (TimePicker) DTPicker.findViewById(R.id.timePicker);

        btnSet.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                String strDateTime = dp.getYear() + "-" + (dp.getMonth() + 1) + "-" + dp.getDayOfMonth() + " "+ tp.getCurrentHour() + ":" + tp.getCurrentMinute();}});

       AlertDialog alert = new AlertDialog.Builder(TimeDate.this).create();
        alert.setTitle("Reminder");
        alert.setView(DTPicker);
        alert.show();

 }       
} 
```

**这是一个`logcat`例外：**

```
04-27 11:48:24.830: D/AndroidRuntime(812): Shutting down VM
04-27 11:48:24.830: W/dalvikvm(812): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
04-27 11:48:24.851: E/AndroidRuntime(812): FATAL EXCEPTION: main
04-27 11:48:24.851: E/AndroidRuntime(812): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ogtpl.android/com.ogtpl.android.TimeDate}: java.lang.ClassCastException: android.widget.LinearLayout 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T12:02:26.637

不要做任何额外的事情，你的代码就是完美的。只需在您使用的任何地方删除代码`ScrollLayout`或其属性即可。Lemme 为您编写更新的代码`ScrollLayout`

```
 final   DatePicker dp = (DatePicker) findViewById(R.id.datePicker);
        final   TimePicker tp = (TimePicker) findViewById(R.id.timePicker);
        btnSet.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                String strDateTime = dp.getYear() + "-" + (dp.getMonth() + 1) + "-" + dp.getDayOfMonth() + " "+ tp.getCurrentHour() + ":" + tp.getCurrentMinute();

                Toast.makeText(TimeDate.this, "User selected " + strDateTime + "Time", Toast.LENGTH_LONG).show(); //Generate a toast only if you want 
                finish();   // If you want to continue on that TimeDateActivity
                 // If you want to go to new activity that code you can also write here
            }}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T07:59:02.203

```
ScrollView DTPicker = (ScrollView) View.inflate(TimeDate.this,R.layout.time_date, null);
Button  btnSet = (Button) DTPicker.findViewById(R.id.btnSetDateTime);
final   DatePicker dp = (DatePicker) DTPicker.findViewById(R.id.datePicker);
final   TimePicker tp = (TimePicker) DTPicker.findViewById(R.id.timePicker); 
```

用下面替换上面的行

```
ScrollView DTPicker = (ScrollView)findViewById(R.id.scrollView1);
Button  btnSet = (Button)findViewById(R.id.btnSetDateTime);
final   DatePicker dp = (DatePicker)findViewById(R.id.datePicker);
final   TimePicker tp = (TimePicker)findViewById(R.id.timePicker); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T07:57:24.307

您的问题似乎在这一行：

```
ScrollView DTPicker = (ScrollView) View.inflate(TimeDate.this,R.layout.time_date, null); 
```

您正在膨胀包含`LinearLayout`作为根节点的 XML，但是您正在将其类型转换为`ScrollView`导致`ClassCastException`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T11:40:20.217

try following code....

**time_date.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" android:orientation="vertical"
    android:layout_width="fill_parent" android:layout_height="fill_parent" android:weightSum="10" android:id="@+id/commonlayout"
    android:background="#FFFFFF">

    <LinearLayout android:id="@+id/llheader" android:layout_width="fill_parent" android:layout_height="20dp"
        android:layout_weight="1">
        <RelativeLayout android:id="@+id/relativeLayout1" android:layout_width="fill_parent"
            android:layout_height="fill_parent" android:layout_gravity="center"> <!--header -->
            <TextView android:id="@+id/txt_header" android:layout_width="wrap_content" android:layout_centerHorizontal="true"
                android:layout_centerVertical="true" android:layout_height="wrap_content" />
        </RelativeLayout>
    </LinearLayout>

    <ScrollView android:id="@+id/scrollView1" android:layout_width="wrap_content" android:layout_height="wrap_content"
        xmlns:android="http://schemas.android.com/apk/res/android">
        <LinearLayout android:layout_width="wrap_content" android:id="@+id/linearLayout1" android:orientation="vertical"
            android:layout_height="wrap_content">

            <DatePicker android:layout_width="wrap_content" android:layout_height="wrap_content" android:id="@+id/datePicker" />
            <TimePicker android:id="@+id/timePicker" android:layout_width="wrap_content" android:layout_height="wrap_content" />

            <TableRow android:id="@+id/tableRow1" android:layout_height="wrap_content" android:layout_width="match_parent"
                android:gravity="center">

                <Button android:id="@+id/btnSetDateTime" android:layout_height="wrap_content" android:text="Set"
                    android:layout_width="wrap_content" />
                <Button android:layout_width="fill_parent" android:layout_height="wrap_content" android:text="Next"
                    android:id="@+id/btnNext1" />
            </TableRow>

        </LinearLayout>
    </ScrollView>

    <LinearLayout android:id="@+id/lldata" android:layout_weight="8" android:layout_width="fill_parent"
        android:layout_height="0dp" android:background="#FFFFFF">
    </LinearLayout>

    <LinearLayout android:id="@+id/llfooter" android:layout_width="fill_parent" android:orientation="horizontal"
        android:layout_height="20dp" android:visibility="visible" android:layout_margin="0dp">
    </LinearLayout>

</LinearLayout> 
```

**DateTimeActivity.java**

```
public class DateTimeActivity extends Activity {

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.time_date);
        setTitle("Reminder");

        Button btnNext = (Button) findViewById(R.id.btnNext1);           
        btnNext.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                Intent myintent = new  Intent(DateTimeActivity.this, Next.class);
                startActivity(myintent);
                finish();
            }
        });

        Button  btnSet = (Button) findViewById(R.id.btnSetDateTime);
        final   DatePicker dp = (DatePicker) findViewById(R.id.datePicker);
        final   TimePicker tp = (TimePicker) findViewById(R.id.timePicker);

        btnSet.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                String strDateTime = dp.getYear() + "-" + (dp.getMonth() + 1) + "-" + dp.getDayOfMonth() + " "+ tp.getCurrentHour() + ":" + tp.getCurrentMinute();

                Toast.makeText(DateTimeActivity.this, "User has selected " + strDateTime, Toast.LENGTH_LONG).show();

                finish();// move to previous activity
            }});

    }       

} 
```

# hibernate - 切换休眠到 iBatis

> ID：10346687
> 
> 赞同：2
> 
> 时间：2012-04-27T07:41:34.347
> 
> 标签：hibernate, jpa, orm, ibatis

目前我们使用 Hibernate 作为 JPA 的持久提供者。以后能不能改成iBatis。如果我们改变，我需要考虑哪些事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T17:45:22.980

可能你不想使用已经刻好的 iBatis，但也许是[MyBatis](http://www.mybatis.org/core/index.html)。

正如您从文档中看到的，概念与 JPA 和 Hibernate 完全不同。您不能重复使用：

*   实体的映射
*   JPQL 查询。
*   任何设置

您可以部分重用的是实体（只有没有 jpa 映射的代码）和本机查询（查询本身，而不是注释）。

# sql - 删除外键子记录错误547

> ID：10346689
> 
> 赞同：0
> 
> 时间：2012-04-27T07:41:49.473
> 
> 标签：sql, tsql, sql-server-2005

我有一个`Task`作为`TaskId`主键的表。另一个表作为`TimeSheet`外`TaskId`键。我创建了这样的外键关系

```
ALTER TABLE TimeSheet ADD CONSTRAINT fk_TimeSheet_TaskId FOREIGN KEY(TaskId)
REFERENCES Task (TaskId)
GO 
```

实际上，如果我尝试删除（或更新）任务表中的一行，它应该显示有关外键关系的错误。如果我尝试在`TimeSheet`表中删除，我不应该得到任何错误。

但是对我来说，如果我尝试在`TimeSheet`表中删除或更新，我会收到 547 错误。外键列（表`TaskId`中）允许空值。`TimeSheet`

我应该在这里做什么？`Task`如果我尝试在父表（ ）中删除或更新，我想抛出错误，如果我尝试在子表（ ）中删除或更新，则没有错误`TimeSheet`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:16:17.120

如果我们使用外键：

每当主（引用）表中的行被删除（相应更新）时，具有匹配外键列的子（引用）表的相应行也将被删除（相应更新）。不是反义词。

如果您想按照您的问题工作，请尝试使用触发器。

# android - 如何使用两个图像在单个图像视图中缩放和裁剪图像

> ID：10346697
> 
> 赞同：1
> 
> 时间：2012-04-27T07:42:06.467
> 
> 标签：android

我正在做一个应用程序，它必须显示一个图像（来自 sdcard 的图片）和另一个图像（正方形），它看起来像一个正方形，只有正方形的中间可见部分要被裁剪。正方形内可见的图像应该能够缩放。当方形图像不存在时，我可以单独缩放图像。但是我希望在存在方形图像时将图像放大到中心可见部分。而这个方形图像只能用于平移，不能缩放。有人请帮我做这件事。这张照片显示了它的样子。

![图片](../Images/63846ba88d90e3e8f6dad041f6efb61c.png) 提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T06:58:12.723

在主单图像的四个边上使用边框图像，然后通过忽略边框图像来创建可见区域分辨率的位图，并在任何你想要的地方使用裁剪的位图。我按照上述过程完成了这件事，它的工作原理对我来说很好.......谢谢。

# objective-c - NSNotificationCenter：观察者名单？

> ID：10346700
> 
> 赞同：35
> 
> 时间：2012-04-27T07:42:11.633
> 
> 标签：objective-c, cocoa, nsnotificationcenter

是否可以获得给定通知名称的观察者列表（对象和选择器）？(NSNotificationCenter)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2017-05-14T14:30:38.073

(iOS 9, Swift 3) 如果你想找出当前注册了哪些观察者`NotificationCenter`，打破并打印它的调试描述：

```
(lldb) e print(NotificationCenter.default.debugDescription) 
```

输出的每一行都将包含*(Notification) Name*、*Object*、*Observer*、*Options*。多次调用`NotificationCenter.default.addObserver`with some`NSNotification.Name`将导致此列表中有多个条目。

* * *

注意。虽然这可能在调试时证明是有用的信息，但我不建议在运行时使用此输出管理观察者。

* * *

（来源：基于[useyourloaf的](https://useyourloaf.com/blog/unregistering-nsnotificationcenter-observers-in-ios-9/)[答案](http://paul-van-klaveren.github.io/2017/list-notificationcenter-observers/)）

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-27T07:54:58.877

我认为没有一种（官方）方法可以从`NSNotificationCenter`. 但是，您可以创建一个子类，`NSNotificationCenter`然后覆盖以下方法：

*   `+ defaultCenter`
*   `- addObserver:selector:name:object`
*   `- addObserverForName:object:queue:usingBlock:`
*   `- removeObserver:`
*   `- removeObserver:name:object`

在实例方法的重写实现中，您将使用字典跟踪给定通知名称的观察者。在每个被覆盖的实例方法中，您最终都会调用`NSNotificationCenter`'s 各自的`super`方法。此外，您将提供一种方法来检索您自己的给定名称的观察者列表，例如：

```
- (id)observerForNotificationName:(NSString *)name 
```

然而，这种方法有两个问题：首先，`NSMutableDictionary`将所有观察者保留在一个幼稚的实现中，这可能不是相同的行为`NSNotificationCenter`实现。其次，您必须更改通过`[NSNotificationCenter defaultCenter]`（或任何其他`NSNotificationCenter`实例）获取默认通知中心的代码，以便使用您的自定义子类。

请注意，第一个问题可以使用`CFDictionary`带有弱引用回调的 a、带有对相应观察者的弱引用的[容器类](https://stackoverflow.com/questions/8748736/weak-object-in-an-nsdictionary)来解决，或者，如果您处于 Mac OS X 上的垃圾收集环境中，则可以使用`NSHashTable`.

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-10-21T13:15:09.477

没有公共 API 可以查询`NSNotificationCenter`任何对象或通知的当前观察者列表。

`NSNotificationCenter`先前的答案概述了一个解决方案，并在旨在收集和提供此类信息的子类中详细介绍了观察者的所有权。

但是，此解决方案只能与您自己的代码一起使用，该代码将调用`NSNotiicationCenter`. 系统和外部库中使用基础`NSNotificationCenter`注册/注销通知的其他代码呢？

我建议不要使用子类化`NSNotificationCenter`，而是使用一些低级 ObjC 来调整 original 的方法实现`NSNotifictionCenter`，用我们自己的实现替换它们，这将或多或少如上一个答案中描述的那样工作，并将调用原始实现作为他们的最后一幕。

以下是如何做到这一点：http: [//nshipster.com/method-swizzling/](http://nshipster.com/method-swizzling/)

然后，你可以确保你得到了一些通知的所有观察者，并且你的代码是可移植的，并且可以与直接使用`NSNotificationCenter`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-03-03T05:53:21.170

[你可以试试这个ObserversCenter](https://github.com/yonglam/ObserversCenter)，而不是使用 NSNotificationCenter 。你可以得到观察者的名单。

关于观察中心：

1.  它实现了一个多观察者模式作为 NSNotificationCenter；
2.  它将观察者和观察者解耦，因此他们彼此不认识；
3.  您可以订阅指定的密钥；
4.  您可以在发出通知时调用真实接口。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-09T11:11:02.757

我在 NSNotificationCenter 上创建了一个类别并调整了 addObserver:::: 方法。

这仅用于调试，不应出现在生产代码中，因为它会导致保留周期

```
@interface NSNotificationCenter (Tracking)
@property (nonatomic) NSMutableArray <NSDictionary *> * observers;
@end

#import <JRSwizzle/JRSwizzle.h>
@implementation NSNotificationCenter (Tracking)

+ (void)initialize {
    [super initialize];
    [self jr_swizzleMethod:@selector(addObserver:selector:name:object:)
                withMethod:@selector(SNaddObserver:selector:name:object:)
                     error:nil];
}

- (void)SNaddObserver:(id)observer selector:(SEL)aSelector name:(NSString *)aName object:(id)anObject {
    NSDictionary *obs = @{@"observer"   :observer,
                          @"selector"   :NSStringFromSelector(aSelector),
                          @"name"       :aName
                          };
    DDLogDebug(@"observer added : %@", obs);
    [[self observers] addObject:obs];
    [self SNaddObserver:observer selector:aSelector name:aName object:anObject];
}

- (NSMutableArray <NSDictionary *> *) observers{
    static NSMutableArray <NSDictionary *> * _observers = nil;
    if (!_observers) {
        _observers = [NSMutableArray new];
    }
    return _observers;
}

@end 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-12-10T14:55:03.913

与@PDK 的答案类似，`po NotificationCenter.default`（或适当的实例）将产生调试信息：

```
<NSNotificationCenter:0x600000f84310>
Name, Object, Observer, Options
UIApplicationSimpleRemoteActionNotification, 0x7faac90069a0, 0x600000f84fc0, 1400
NSTextStorageDidProcessEditingNotification, 0x7faacd80d080, 0x600001808a00, 1400
com.apple.ManagedConfiguration.profileListChanged, 0x600000b0e280, 0x600000b0e280, 1400
UIApplicationDidBecomeActiveNotification, 0x7faac90069a0, 0x600000ff75d0, 1400
UIApplicationDidBecomeActiveNotification, 0x7faac90069a0, 0x600001880d00, 1400 
```

这适用于 Xcode 12，在旧版本上，`debugDescription`可能是必要的。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2014-11-14T07:13:07.773

你试过`observationInfo`NSObject的属性吗？

```
observationInfo
Returns a pointer that identifies information about all of the observers that are registered with the receiver. 
```

# vb.net - 将数据表中的一列与同一数据表中的另一列相加

> ID：10346702
> 
> 赞同：1
> 
> 时间：2012-04-27T07:42:27.883
> 
> 标签：vb.net

我有一个具有以下数据库结果的数据表

```
ID  Name           Class    FeeName       Amount
9   gumman hgjgh    6Th      Fine            0
9   gumman hgjgh    6Th   Tution Fee       3000
9   gumman hgjgh    6Th   Lebority Fee     500
10  AAdil Hussain   5Th     Fine             0
10  AAdil Hussain   5Th   Tution Fee       3000
10  AAdil Hussain   5Th   Lebority Fee      500 
```

我想根据每个 ID 总结金额，所以我实现以下代码

```
Dim TotalAmount As New DataColumn("TotalAmount", GetType(Double), "Sum(Amount)")
Dtable.Columns.Add(TotalAmount) 
```

但结果如下

```
ID  Name           Class    FeeName       Amount      TotalAmount
9   gumman hgjgh    6Th      Fine            0           7000
9   gumman hgjgh    6Th   Tution Fee       3000          7000
9   gumman hgjgh    6Th   Lebority Fee     500           7000
10  AAdil Hussain   5Th     Fine             0           7000
10  AAdil Hussain   5Th   Tution Fee       3000          7000
10  AAdil Hussain   5Th   Lebority Fee      500          7000 
```

但我想根据每个名称或 ID 总结金额，我不知道 LINQ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:17:25.287

恐怕`DataTable's` [Column-Expression](http://msdn.microsoft.com/en-us/library/system.data.datacolumn.expression.aspx)不能`SUM(Amount)OVER(PARTITION BY ID)`。

这是 LINQ 解决方案：

```
Dim idGroupAmounts =
    From row In DTable
    Group row By ID = row.Field(Of Int32)("ID") Into IDRowGroup = Group
    Select New With {
        .ID = ID,
        .IDRows = IDRowGroup,
        .IdSum = IDRowGroup.Sum(Function(row) row.Field(Of Double)("Amount"))
    }
For Each idGrpAmount In idGroupAmounts
    Dim id = idGrpAmount.ID
    Dim totalAmount = idGrpAmount.IdSum
    Dim rows = idGrpAmount.IDRows
Next 
```

# facebook - Facebook 不会从 og:image 加载图像

> ID：10346703
> 
> 赞同：39
> 
> 时间：2012-04-27T07:42:40.827
> 
> 标签：facebook, facebook-opengraph

它已经工作了，但是今天我很惊讶，当我尝试分享链接时，Facebook 没有显示来自 og:image 元标记的图像。

来自[facebook 调试器](http://developers.facebook.com/tools/debug/og/object?q=http://www.odinotvet.ru/)：

```
Meta Tag:   <meta property="og:description" content="Профессиональная сеть вопросов и ответов,создаваемая и управляемая сообществом пользователей. Ресурс для тех, кто хочет знать ответы на все вопросы." />
Meta Tag:   <meta property="og:title" content="Закрытое экспертное сообщество OdinOtvet" />
Meta Tag:   <meta property="og:type" content="website" />
Meta Tag:   <meta property="og:image" content="http://www.odinotvet.ru/images/logo_250.png" />
Meta Tag:   <meta property="og:url" content="http://www.odinotvet.ru" />
Meta Tag:   <meta property="og:site_name" content="ОдинОтвет" />
Meta Tag:   <meta property="fb:app_id" content="286967601317982" />
Meta Tag:   <meta property="fb:admins" content="100002890978393,100001666575542" /> 
```

![在此处输入图像描述](../Images/5a918d191127b1d08d305d54d658bb0b.png)

图像在哪里？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-27T07:53:46.153

该图像出现在 Facebook 调试器中（尽管它看起来不太好，因为您有一些透明度，最适合您的灰色背景，而 FB 不会采用）

最好使用方形图像。

我发现 Facebook 在他们这边缓存元数据的一件事。因此，如果我们对图像之类的内容进行更改，它们不会总是在缓存被清除之前出现。也许您过去有错误的图像 url/没有 url，而 FB 已经缓存了该结果。如果是这样，您可能需要等待一段时间才能清除并再次获取您的数据。我已经看到它需要一段时间（大约在一天的范围内）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-02-15T20:09:10.477

原来答案是也设置`og:image:width`and `og:image:height`。

另请参阅： [Facebook Open Graph 第一次没有图像](https://stackoverflow.com/questions/27913369/facebook-open-graph-no-image-first-time/27913458#27913458)

（在我自己的测试中，我发现设置`og:image:width`和`og:image:height`就足够了。设置`og:image:type`是不必要的。）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-08T10:57:19.477

我遇到了同样的问题，但 FB 调试器“说”图像在两个维度上都必须至少为 200 像素。当我将图像的短边调整为 200 像素时，一切顺利。另一件事是布鲁斯所说的——缓存。我不得不开始另一个页面来测试我的最终链接。

希望这可以帮助。问候

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-03T11:43:11.640

当您发现要在 facebook 上共享的页面存在缓存问题时（我的意思是，如果您看到页面源代码与 facebook 上显示的值之间存在不同的值，或者您发现一些缺失值），那么您可以继续以下网址[https://developers.facebook.com/tools/debug/](https://developers.facebook.com/tools/debug/)，提供您尝试在 facebook 上分享的 url 并提交表单以清除 facebook 缓存。您现在可以再次尝试共享您的页面，您应该会看到与页面源代码中相同的值。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-15T11:57:07.827

将您的 URL 放入此站点，facebook 将帮助您：

[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)

有时 facebook 会显示旧的缓存图像文件，因此您将在 URL 上方显示当前更新的结果。完成后，facebook 将存储您的新图像，之后它将仅显示新图像。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-10T16:04:06.760

对于手动清空缓存，添加 ?v=2 或一些参数到您的 url，然后单击“添加新 url”并启动 Facebook 调试器 ( [https://developers.facebook.com/tools/debug/](https://developers.facebook.com/tools/debug/) )。现在，使用原始 url 重试（不带 ?v=2），图像就会出现。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-10T14:13:17.307

当我从以前创建的应用程序中放置我的 id 时，我才设法解决它

```
<meta property = "fb:app_id" content = "1234567891011121" /> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-06T14:44:35.757

我遇到了另一个导致 FB 未下载 og 图像的原因，这与 EXIF 元数据未写入 WordPress 网站上上传的图像有关。[我已经在这个线程](https://stackoverflow.com/a/59215258/3596672)中写了关于这个问题的详细答案。

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2017-03-30T13:03:26.660

**试试这个它会有所帮助**

```
<?php

$params = array();
if(count($_GET) > 0) {
    $params = $_GET;
} else {
    $params = $_POST;
}
// defaults
if($params['type'] == "") $params['type'] = "restaurant";
if($params['locale'] == "") $params['locale'] = "en_US";
if($params['title'] == "") $params['title'] = "default title";
if($params['image'] == "") $params['image'] = "thumb";
if($params['description'] == "") $params['description'] = "default description";

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# MY_APP_NAME_SPACE: http://ogp.me/ns/fb/MY_APP_NAME_SPACE#">
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

        <!-- Open Graph meta tags -->
        <meta property="fb:app_id" content="MY_APP_ID" />
        <meta property="og:site_name" content="meta site name"/>
        <meta property="og:url" content="URL/index.php?type=<?php echo $params['type']; ?>&locale=<?php echo $params['locale']; ?>&title=<?php echo $params['title']; ?>&image=<?php echo $params['image']; ?>&description=<?php echo $params['description']; ?>"/>
        <meta property="og:type" content="MY_APP_NAME_SPACE:<?php echo $params['type']; ?>"/>
        <meta property="og:locale" content="<?php echo $params['locale']; ?>"/>
        <meta property="og:title" content="<?php echo $params['title']; ?>"/>
        <meta property="og:image" content="URL/img/<?php echo $params['image']; ?>.png"/>
        <meta property="og:description" content="<?php echo $params['description']; ?>"/>

    </head>
</html> 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2017-08-24T17:59:50.773

答案是，您必须记住使图像开放访问。如果您将其上传到您的服务器，并且您的服务器已激活安全性。（安全意味着您无法在不知道确切链接的情况下访问图像或任何内容）。如果已激活 facebook 无法连接到您的图像。

您可以做的一件事是将您的图像上传到保管箱并将该文件公开。所以每个人都可以访问它，然后将它链接到那个:)。或者只是打开您的服务器访问权限。^^ :)

# ruby-on-rails - 使用 getJSON 提交表单不成功

> ID：10346704
> 
> 赞同：1
> 
> 时间：2012-04-27T07:42:44.200
> 
> 标签：ruby-on-rails, json, forms, getjson

我正在研究 Ruby-on-Rails。我正在尝试提交带有 JSON 请求的表单。

HTML

```
<%= form_tag widgets_user_path(:format => "json"), :id => "testjsonform" do %>
        <input type="checkbox" name="cat[]" value="math" id="sub1" class="left">
        <label for="sub1" class="laa">Math</label>
        <input type="checkbox" name="cat[]" value="history" id="sub2" class="left">
        <label for="sub2" class="laa">History</label>
        <input type="checkbox" name="cat[]" value="science" id="sub3" class="left">
        <label for="sub3" class="laa">Science</label>
        <%= hidden_field_tag 'callback', "?" %>
        <div><%= submit_tag 'JSON', :id => "testjson" %></div>
<% end %> 
```

应用程序.js

```
$("#testjsonform").live("submit", function() {
    $.getJSON($(this).attr("action"),$(this).serialize(), function(data) {
        alert("success");
    })
    .success(function() {
        alert("success");
    })
    .error(function() {
        alert("error");
    });
    return false;
}); 
```

在控制台上显示请求已完成（200）

```
Started GET "/widgets/user.json?utf8=%E2%9C%93&authenticity_token=N8WsL3BATQiv9OWX4d29o62GOQgX9mXdt%2BBiVe%2FtzU%3D&cat%5B%5D=history&callback=%3F" for 127.0.0.1 at 2012-04-27 12:52:35 +0530
Processing by WidgetsController#user as JSON
Parameters: {"utf8"=>"✓", "authenticity_token"=>"N8WsL3BATQiv9OWX4d29o62GOQgX9mXdt+BiVe/tzU=", "cat"=>["history"], "callback"=>"?"}
User Load (0.3ms)  SELECT "users".* FROM "users" LIMIT 1
===================================== Categories
Completed 200 OK in 3ms (Views: 0.2ms | ActiveRecord: 0.3ms) 
```

并且在 Google Chrome 中显示了正确的 JSONP 响应

```
?({"user":{"fname":"Test","lname":"User","email":"testuser@testsite.com"}}) 
```

一切似乎都是正确的；但它仍然让我在错误块中保持警惕。为什么我没有收到成功警报？什么可能是错的？任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:47:21.340

好的...我找到了问题所在并提出了**（不太漂亮）**解决方案...

问题似乎与 URL 编码有关。（它发送“回调”参数的方式）

`$.getJSON(_form.attr("action"), _form.serialize(), function(data) { /* some code */ }`发送请求如下

```
Started GET "/widgets/user.json?utf8=%E2%9C%93&cat%5B%5D=4&callback=%3F&user=3" for 127.0.0.1 at 2012-04-27 16:59:40 +0530
Processing by WidgetsController#user as JSON
Parameters: {"utf8"=>"✓", "cat"=>["4"], "callback"=>"?", "user"=>"3"}
User Load (0.1ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", "3"]]
===================================== Categories
Completed 200 OK in 1ms (Views: 0.1ms | ActiveRecord: 0.1ms) 
```

`application.js`我对参数进行了一些更改。

```
var _url = _form.attr("action") + "?" + decodeURIComponent(_form.serialize());

$.getJSON(_url, function(data) {
    alert("success");
}); 
```

这会按如下方式发送请求并给我成功警报:)（请参阅参数；额外的“_”参数也已添加到其中。）

```
Started GET "/widgets/user.json?utf8=%E2%9C%93&cat[]=4&callback=jQuery17203027302643749863_1335526106006&user=3&_=1335526108045" for 127.0.0.1 at 2012-04-27 16:58:28 +0530
Processing by WidgetsController#user as JSON
Parameters: {"utf8"=>"✓", "cat"=>["4"], "callback"=>"jQuery17203027302643749863_1335526106006", "user"=>"3", "_"=>"1335526108045"}
User Load (2.6ms)  SELECT "users".* FROM "users" WHERE "users"."id" = ? LIMIT 1  [["id", "3"]]
===================================== Categories
Completed 200 OK in 4ms (Views: 0.1ms | ActiveRecord: 2.6ms) 
```

我也添加`:method => "get"`到`form`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:35:10.007

你为什么不把你的表格设置为`remote`？您可以使用 javascript 而不是 JSON 进行响应，后者可以在您的页面上显示一些呈现的内容：

```
# in your view
<%= form_tag widgets_user_path, :id => "testjsonform", remote: true do %>

# in *.js.erb
alert("<%= j params.to_yaml %>")
$('body').append("<%= j render something %>") # or other stuff for filling your "parent" page 
```

# java - 如何最好地从 Java 中的字符串格式的数字中获取实际值？

> ID：10346709
> 
> 赞同：1
> 
> 时间：2012-04-27T07:43:04.020
> 
> 标签：java, string, numbers

您能否建议从不同格式的字符串数字中检索实际值的最佳方法是什么？

例子：

我希望能够传入所有这些字符串：

```
101,00
101.00
-101,00
-101.00
100,000.00
100.000,00
-100,000.00
-100.000,00 
```

并从方法中获取这些返回：

```
101.00
101.00
-101.00
-101.00
100000.00
100000.00
-100000.00
-100000.00 
```

我应该只使用 string.replaceAll("","") 还是有更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:48:16.517

使用全部替换将不起作用。当你需要的是找到'.'的最后一次出现。或“，”并将其用作您的小数位。

基于[http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html](http://docs.oracle.com/javase/tutorial/i18n/format/decimalFormat.html)

```
public static void main(String... args) throws ParseException {
    DecimalFormatSymbols dfs1 = new DecimalFormatSymbols();
    dfs1.setDecimalSeparator('.');
    dfs1.setGroupingSeparator(',');

    DecimalFormat df1 = new DecimalFormat("#,##0.00", dfs1);
    System.out.println(df1.format(-10000)+" parsed is "+df1.parse("-10,000.01"));

    DecimalFormatSymbols dfs2 = new DecimalFormatSymbols();
    dfs2.setDecimalSeparator(',');
    dfs2.setGroupingSeparator('.');

    DecimalFormat df2 = new DecimalFormat("#,##0.00", dfs2);
    System.out.println(df2.format(-10000)+" parsed is "+df2.parse("-10.000,01"));
} 
```

印刷

```
-10,000.00 parsed is -10000.01
-10.000,00 parsed is -10000.01 
```

# php - PHP二维数组打印索引而不是值

> ID：10346710
> 
> 赞同：0
> 
> 时间：2012-04-27T07:43:16.540
> 
> 标签：php, mysql

我在 PHP 中有一个二维数组，它打印数组的索引而不是值。

这是我设置数组的地方。

```
for($i = 1;$i <= $numOfCriteria;$i++)
            {
                for($j = 1;$j <= $numOfScores;$j++)
                {
                    $description[$i][$j] = mysql_real_escape_string($_POST['descriptionPosition'.$i.$j]);
                }
            } 
```

这是 SQL 查询。

```
for($i = 1;$i <= $numOfCriteria;$i++)
            {
                for($j = 1;$j <= $numOfScores;$j++)
                {
                    $this->Instructor->query("INSERT INTO Criteria_Description (description,CriteriaID,ScoreID) VALUES (\"$description[$i][$j]\",\"$criteriaID[$i]\", \"$scoreID[$j]\")");
                }
            } 
```

这就是它放入数据库的内容。

```
 Array[1]        
            Array[2]        
            Array[1]        
            Array[2] 
```

感谢您提前回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:48:20.387

那是因为 PHP 的解析器不能正确识别字符串中的多个数组索引。

如果你试试这个：

```
<?php
$foo = array(array(array("bar")));
echo "wrong: \"$foo[0][0][0]\"" . PHP_EOL;
echo "right: \"{$foo[0][0][0]}\"" . PHP_EOL; 
```

你会意识到：

```
wrong: "Array[0][0]"
right: "bar" 
```

要解决此问题，如上所示，请使用`"{$var}"`语法。变量表达式周围的花括号确保解析器正确处理它：

```
$this->Instructor->query("INSERT INTO Criteria_Description (description,CriteriaID,ScoreID) VALUES (\"{$description[$i][$j]}\",\"{$criteriaID[$i]}\", \"{$scoreID[$j]}\")"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:51:58.613

```
for($i = 1;$i <= $numOfCriteria;$i++)
            {
                for($j = 1;$j <= $numOfScores;$j++)
                {
                    $this->Instructor->query("INSERT INTO Criteria_Description (description,CriteriaID,ScoreID) VALUES ('".$description[$i][$j]."','".$criteriaID[$i]."', '".$scoreID[$j]."')");
                }
            } 
```

在字符串中使用内联数组不起作用。它仅适用于字符串、数字等。

对于对象和数组，您必须将其拆分。

为了便于阅读，我使用了 ' 而不是 \"

问候， 斯特凡

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:03:11.653

A. SQL不要使用双引号`"`使用单引号`'`

B.`SQL`循环中的重复语句不是有效的

C.`\"$criteriaID[$i]\"`是在 PHP 中访问数组变量的无效方式

D. 你只需要 1 个循环而不是 2 个

```
$sql = "INSERT INTO Criteria_Description (description,CriteriaID,ScoreID) VALUES ('%d','%s', '%d')";
for($i = 1; $i <= $numOfCriteria; $i ++) {
    for($j = 1; $j <= $numOfScores; $j ++) {
        $this->Instructor->query ( sprintf ( $sql, mysql_real_escape_string ( $_POST ['descriptionPosition' . $i . $j] ), $criteriaID [$i], $scoreID [$j] ) );

    }
} 
```

# jquery - Jquery从表列表中隐藏单个表中的图像

> ID：10346714
> 
> 赞同：1
> 
> 时间：2012-04-27T07:43:29.390
> 
> 标签：jquery, asp.net, html

我正在从 asp.net 页面动态创建一些 html 并填写带有链接的表列表。当我单击表格中的第一个元素时，我正在寻找的行为是隐藏以下行中的图像，而不隐藏表格其余部分中的所有图像。我正在使用的 jquery 代码是：

> ```
> $(document).ready(function () {
>     $('.AddMainInterest').click(function (event) {
>         var url = $(this).attr("href");
>         if ($.browser.msie) {//hacked together for IE browsers
>             centeredY = (window.screenTop - 120) + ((((document.documentElement.clientHeight + 120) / 2) - (75)));
>             centeredX = window.screenLeft + ((((document.body.offsetWidth + 20) / 2) - (150)));
>         } else {
>             centeredY = window.screenY + (((window.outerHeight / 2) - (75)));
>             centeredX = window.screenX + (((window.outerWidth / 2) - (150)));
>         }
>         window.open(url, null, 'toolbar=no,location=no,menubar=no,width=300,height=150,resizable=yes,scrollbars=no,left=' + centeredX + ',top=' + centeredY).focus();
>         event.preventDefault();
>         this.href = this.href.replace("act=a", "act=d");
>         $(this).prev().toggle();
>         $("#imgInterest img").hide().filter(":first").show();
>     });
> }); 
> ```

但这隐藏了以下所有图像，我怎样才能只隐藏同一张表中的图像？？？

代码如下所示：

```
 <table id="imgInterest" width="100%;">
    <tr>
        <td>
            <a href="~/page.aspx?uid=-1&pid=10&sid=2&sc=Y&act=a" class="AddMainInterest">
                <img id="first" src="~/icons/CheckMark.png" class="first">Agriculture (General)</a>
        </td>
    </tr>
    <tr valign="middle">
        <td>
            <a href="~/page.aspx" class="AddInterest">Agricultural Facilities and Equipments</a><img
                src="~/icons/CheckMark.png" class="img-swap">
        </td>
        <td>
            <a href="~/page.aspx?uid=-1&pid=10&sid=4&sc=Y01&act=a" class="AddInterest">Agricultural
                Science</a><img src="~/icons/CheckMark.png" class="img-swap">
        </td>
    </tr>
    <tr>
        <td>
            <a href="~/page.aspx?uid=-1&pid=10&sid=5&sc=Y02&act=a" class="AddInterest">Algology</a><img
                src="~/icons/CheckMark.png" class="img-swap">
        </td>
        <td>
            <a href="~/page.aspx?uid=-1&pid=10&sid=6&sc=Y03&act=a" class="AddInterest">Animal Behavior</a><img
                src="~/icons/CheckMark.png" class="img-swap">
        </td>
    </tr>
    <tr>
        <td>
            <a href="~/page.aspx?uid=-1&pid=10&sid=7&sc=Y07&act=a" class="AddInterest">Animal Health
                and Nutrition</a><img src="~/icons/CheckMark.png" class="img-swap">
        </td>
        <td>
            <a href="~/page.aspx?uid=-1&pid=10&sid=8&sc=Y04&act=a" class="AddInterest">Animal Physiology</a><img
                src="~/icons/CheckMark.png" class="img-swap">
        </td>
    </tr>
    <tr>
        <td>
            <a href="~/page.aspx?uid=-1&pid=10&sid=9&sc=Y08&act=a" class="AddInterest">Aquaculture
                and Fisheries</a><img src="~/icons/CheckMark.png" class="img-swap">
        </td>
        <td>
            <a href="~/page.aspx?uid=-1&pid=10&sid=10&sc=Y09&act=a" class="AddInterest">Crop and
                Plant Production</a><img src="~/icons/CheckMark.png" class="img-swap">
        </td>
    </tr>
    <tr>
        <td>
            <a href="~/page.aspx?uid=-1&pid=10&sid=11&sc=Y05&act=a" class="AddInterest">Forestry
                Science</a><img src="~/icons/CheckMark.png" class="img-swap">
        </td>
        <td>
            <a href="~/page.aspx?uid=-1&pid=10&sid=12&sc=Y10&act=a" class="AddInterest">Pesticides,
                Insecticides and Herbicides</a><img src="~/icons/CheckMark.png" class="img-swap">
        </td>
    </tr>
    <tr>
        <td>
            <a href="~/page.aspx?uid=-1&pid=10&sid=13&sc=Y12&act=a" class="AddInterest">Plant Sciences</a><img
                src="~/icons/CheckMark.png" class="img-swap">
        </td>
        <td>
            <a href="~/page.aspx?uid=-1&pid=10&sid=14&sc=Y11&act=a" class="AddInterest">Policy,
                Reviews and Evaluations</a><img src="~/icons/CheckMark.png" class="img-swap">
        </td>
    </tr>
    <tr>
        <td>
            <a href="~/page.aspx?uid=-1&pid=10&sid=15&sc=Y13&act=a" class="AddInterest">Soil Sciences</a><img
                src="~/icons/CheckMark.png" class="img-swap">
        </td>
        <td>
            <a href="~/page.aspx?uid=-1&pid=10&sid=16&sc=Y14&act=a" class="AddInterest">Zoology
                and Animal Science</a><img src="~/icons/CheckMark.png" class="img-swap">
        </td>
        <td>
        </td>
    </tr>
</table>
</li><li>
    <table id="imgInterest" width="100%;">
        <tr>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=17&sc=A&act=a" class="AddMainInterest">
                    <img id="first" src="~/icons/CheckMark.png" class="first">Arts and Literature (General)</a>
            </td>
        </tr>
        <tr valign="middle">
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=18&sc=A01&act=a" class="AddInterest">Architecture</a><img
                    src="~/icons/CheckMark.png" class="img-swap">
            </td>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=19&sc=A02&act=a" class="AddInterest">Art History</a><img
                    src="~/icons/CheckMark.png" class="img-swap">
            </td>
        </tr>
        <tr>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=20&sc=A03&act=a" class="AddInterest">Children's
                    Literature</a><img src="~/icons/CheckMark.png" class="img-swap">
            </td>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=21&sc=A04&act=a" class="AddInterest">Culture
                    Heritage</a><img src="~/icons/CheckMark.png" class="img-swap">
            </td>
        </tr>
        <tr>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=22&sc=A05&act=a" class="AddInterest">Folklore</a><img
                    src="~/icons/CheckMark.png" class="img-swap">
            </td>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=23&sc=A06&act=a" class="AddInterest">Latin</a><img
                    src="~/icons/CheckMark.png" class="img-swap">
            </td>
        </tr>
        <tr>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=24&sc=A07&act=a" class="AddInterest">Literature</a><img
                    src="~/icons/CheckMark.png" class="img-swap">
            </td>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=25&sc=A08&act=a" class="AddInterest">Music</a><img
                    src="~/icons/CheckMark.png" class="img-swap">
            </td>
        </tr>
        <tr>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=26&sc=A09&act=a" class="AddInterest">Visual and
                    Performing Arts</a><img src="~/icons/CheckMark.png" class="img-swap">
            </td>
            <tr id="clear">
                <td>
                </td>
            </tr>
        </tr>
    </table>
</li>
<li>
    <table id="imgInterest" width="100%;">
        <tr>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=27&sc=B&act=a" class="AddMainInterest">
                    <img id="first" src="~/icons/CheckMark.png" class="first">Astronomy/Astrophysics/Space
                    Science (General)</a>
            </td>
        </tr>
        <tr valign="middle">
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=543&sc=B10&act=a" class="AddInterest">Aircrafy
                    and Flight</a><img src="~/icons/CheckMark.png" class="img-swap">
            </td>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=544&sc=B11&act=a" class="AddInterest">Astronomy
                    and Astrophysics</a><img src="~/icons/CheckMark.png" class="img-swap">
            </td>
        </tr>
        <tr>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=28&sc=B01&act=a" class="AddInterest">Celestial
                    Mechanics</a><img src="~/icons/CheckMark.png" class="img-swap">
            </td>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=29&sc=B02&act=a" class="AddInterest">Cosmology</a><img
                    src="~/icons/CheckMark.png" class="img-swap">
            </td>
        </tr>
        <tr>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=30&sc=B03&act=a" class="AddInterest">Extragalactic
                    Astronomy</a><img src="~/icons/CheckMark.png" class="img-swap">
            </td>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=31&sc=B04&act=a" class="AddInterest">Interstellar
                    Matter</a><img src="~/icons/CheckMark.png" class="img-swap">
            </td>
        </tr>
        <tr>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=32&sc=B05&act=a" class="AddInterest">Meteors</a><img
                    src="~/icons/CheckMark.png" class="img-swap">
            </td>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=545&sc=B12&act=a" class="AddInterest">Policy,
                    Reviews and Evaluations</a><img src="~/icons/CheckMark.png" class="img-swap">
            </td>
        </tr>
        <tr>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=33&sc=B06&act=a" class="AddInterest">Solar Terrestrial
                    Physics</a><img src="~/icons/CheckMark.png" class="img-swap">
            </td>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=546&sc=B13&act=a" class="AddInterest">Space Exploration
                    and Development</a><img src="~/icons/CheckMark.png" class="img-swap">
            </td>
        </tr>
        <tr>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=547&sc=B14&act=a" class="AddInterest">Space Systems
                    and Hardware</a><img src="~/icons/CheckMark.png" class="img-swap">
            </td>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=34&sc=B07&act=a" class="AddInterest">Stars</a><img
                    src="~/icons/CheckMark.png" class="img-swap">
            </td>
        </tr>
        <tr>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=35&sc=B08&act=a" class="AddInterest">The Sun</a><img
                    src="~/icons/CheckMark.png" class="img-swap">
            </td>
            <td>
                <a href="~/page.aspx?uid=-1&pid=10&sid=36&sc=B09&act=a" class="AddInterest">Theoretical
                    Astrophysics</a><img src="~/icons/CheckMark.png" class="img-swap">
            </td>
            <td>
            </td>
        </tr>
    </table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T07:54:39.473

改变

```
$("#imgInterest img").hide().filter(":first").show(); 
```

到

```
$(this).closest("table").find("img").hide().first().show(); 
```

顺便说一下，不要让不同的表共享同一个ID

# mysql - 我想使用 MySQl 将多个表结果计数合并为一个结果

> ID：10346717
> 
> 赞同：3
> 
> 时间：2012-04-27T07:43:52.073
> 
> 标签：mysql, database, optimization, logic

**我想使用MySql**将多个表的结果计数与列明智的结果结合起来（*请参阅所需的结果*），但如果您对此有任何查询或优化方式，我对此感到困惑，请回答我或帮助，我也试过了我自己这个**查询**与**联合**但严重不成功（*请参阅查询示例*）

需要结果

```
post  post_comment_likes  post_comments  post_likes
2     0                   3              0 
```

询问

```
SELECT COUNT(*) AS `post` FROM post WHERE user_id = "123456" UNION
SELECT COUNT(*) AS `post_comment_likes` FROM post_comment_likes WHERE user_id = "123456" UNION 
SELECT COUNT(*) AS `post_comments` FROM post_comments WHERE user_id = "123456" UNION
SELECT COUNT(*) AS `post_likes` FROM post_likes WHERE user_id = "123456" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:54:39.737

```
set @post = 0;
set @post_comment_likes = 0;
set @post_comments = 0;
Set @post_likes = 0;

 select count(*) into @post from .......;
 select count(*) into @post_comment_likes from ......;
 select count(*) into @post_comments from ......;
 select count(*) into @post_likes from ......;

select (@post + @post_comment_likes + @post_comments + @post_likes) ; 
```

在上面的代码中 @post 、 @post_comment_likes 、 @post_comments 、 @post_likes 是会话变量，您可以在它们前面加上 '@' 字符
使用上面的代码，您可以访问每个表的计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:12:13.890

请尝试下面给出的mysql查询

```
SELECT
(SELECT COUNT(*) AS `post` FROM post WHERE user_id = "123456" ) AS post , 
(SELECT COUNT(*) AS `post_comment_likes` FROM post_comment_likes WHERE user_id ="123456") AS post_comment_likes,
(SELECT COUNT(*) AS `post_comments` FROM post_comments WHERE user_id = "123456") AS post_comments , 
(SELECT COUNT(*) AS `post_likes` FROM post_likes WHERE user_id = "123456" ) AS post_likes 
```

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T07:59:51.623

```
SELECT (SELECT COUNT(*) 
          FROM post 
         WHERE user_id = "123456") AS `post`
      ,(SELECT COUNT(*) 
          FROM post_comment_likes
         WHERE user_id = "123456") AS `post_comment_likes`
      ,(SELECT COUNT(*)
          FROM post_comments
         WHERE user_id = "123456") AS `post_comments`
      ,(SELECT COUNT(*)
          FROM post_likes
         WHERE user_id = "123456") AS `post_likes` 
```

您应该替换`COUNT(*)`为`COUNT(<some fieldname>)`并且可以使用变量作为用户 ID。

# php - 无法让 RSS 提要在 joomla 1.5 上工作

> ID：10346718
> 
> 赞同：0
> 
> 时间：2012-04-27T07:43:57.070
> 
> 标签：php, joomla, rss

我对 Joomla 1.5 中的 RSS 提要有疑问。

我使用 Joomla 1.5 和自定义组件。我尝试添加 RSS 提要。我不知道是什么问题，但火狐谷歌阅读器中没有显示数据。我用 Chrome 进行了测试，它显示信息，但只有纯 XML（没有样式）。如果我用 Chrome 尝试了谷歌阅读器，那么就再也没有信息了。

谷歌阅读器中唯一出现的是网站描述。而不是信息，我只得到“（标题未知）”。这是获取新闻并将其放入 RSS 提要的文件。也许有人可以理解它有什么问题:)。

```
$xml = new XMLWriter();
$xml->openURI('php://output');
$xml->startDocument("1.0");
$xml->setIndent(true);

$xml->startElement('rss');
$xml->writeAttribute('version', '2.0');
$xml->writeAttribute('xmlns:g', 'http://base.google.com/ns/1.0');
$xml->startElement("channel");
$xml->writeElement("title", $mainframe->getCfg('sitename'));
$xml->writeElement("description", $mainframe->getCfg('MetaDesc'));
$xml->writeElement("link", JURI::root());

if($this->projects){
   // start listings
   foreach ($this->projects as $project){

      $xml->startElement("item");
        $xml->writeElement("g:title", $project[title] );
        $xml->writeElement("g:description", $project[description] );
        $xml->endElement();
   }
}

$xml->endElement(); // rss
$xml->endDocument();
$xml->flush(); 
```

这是对应的xml

```
<rss xmlns:g="http://base.google.com/ns/1.0" version="2.0">
<channel>
<title>MyProject</title>
<description>
My project description
</description>
<link>http://mysite.com</link>
<item>
<g:title>Copywriter</g:title>
<g:description>...</g:description>
</item>
<item>...</item>
<g:title>Design Manager</g:title>
<g:description>...</g:description>
</item>
</channel>
</rss> 
```

[这就是我在谷歌阅读器中得到的](http://imageshack.us/photo/my-images/29/readerf.gif/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T07:50:04.157

您可能想发布您的输出，但至少您缺少一个`endElement`：您需要一个用于`rss`，一个用于`channel`，不是吗？

# c# - 尝试读取或写入受保护的内存。这通常表明其他内存已损坏

> ID：10346720
> 
> 赞同：0
> 
> 时间：2012-04-27T07:44:03.087
> 
> 标签：c#, silverlight, telerik, dataform

到目前为止，就像很多这样的主题一样，我遇到一个问题，即这个异常发生在一个特定的地方（5% 的时间）和其他地方。

第一行代码是这样的

```
 ((DefinitionDetailForm.FindNameInContent("DataFieldDefinitionPoints") as DataField).
                        FindName("DefinitionScoringPoints") as RadNumericUpDown).
                        Minimum = 0; 
```

首先，我认为我可能需要将引用保留在一个字段中，但这也无济于事。

另一种情况是在一个未定义的地方，我什至在调用堆栈中都没有得到任何东西，所以我不能提供更多信息:(

至少有人对第一个有想法吗？

编辑：

当事情中断时调用堆栈

```
[管理到本地转换]  
System.Windows.dll!MS.Internal.XcpImports.SetValue(MS.Internal.IManagedPeerBase obj, System.Windows.DependencyProperty 属性, 字符串) + 0x6f 字节
System.Windows.dll!MS.Internal.XcpImports.SetValue(MS.Internal.IManagedPeerBase doh, System.Windows.DependencyProperty 属性，对象 obj) + 0x2ce 字节  
System.Windows.dll!System.Windows.DependencyObject.SetObjectValueToCore(System.Windows.DependencyProperty dp, 对象值) + 0xd6 字节    
System.Windows.dll!System.Windows.DependencyObject.SetEffectiveValue（System.Windows.DependencyProperty 属性，参考 System.Windows.EffectiveValueEntry newEntry，对象 newValue）+ 0x35 字节
System.Windows.dll!System.Windows.DependencyObject.UpdateEffectiveValue（System.Windows.DependencyProperty 属性，System.Windows.EffectiveValueEntry oldEntry，参考 System.Windows.EffectiveValueEntry newEntry，System.Windows.DependencyObject.ValueOperation 操作）+ 0xe6 字节    
System.Windows.dll!System.Windows.DependencyObject.SetValueInternal(System.Windows.DependencyProperty dp, 对象值, bool allowReadOnlySet, bool isBindingInStyleSetter) + 0x248 字节   
System.Windows.dll!System.Windows.Controls.TextBox.Text.set（字符串值）+ 0x33 字节  
Telerik.Windows.Controls.Input!Telerik.Windows.Controls.RadNumericUpDown.UpdateText() + 0xa5 字节  
Telerik.Windows.Controls.Input!Telerik.Windows.Controls.RadNumericUpDown.OnValueChanged(Telerik.Windows.Controls.RadRangeBaseValueChangedEventArgs e) + 0x1f5 字节
Telerik.Windows.Controls!Telerik.Windows.Controls.RadRangeBase.OnValueChanged(System.Windows.DependencyObject d, System.Windows.DependencyPropertyChangedEventArgs e) + 0x105 字节
Telerik.Windows.Controls!Telerik.Windows.PropertyMetadata.PropertyChangeHook.OnPropertyChanged(System.Windows.DependencyObject d, System.Windows.DependencyPropertyChangedEventArgs e) + 0x58b 字节    
System.Windows.dll!System.Windows.DependencyObject.RaisePropertyChangeNotifications(System.Windows.DependencyProperty dp, object oldValue, object newValue) + 0x53 字节    
System.Windows.dll!System.Windows.DependencyObject.UpdateEffectiveValue（System.Windows.DependencyProperty 属性，System.Windows.EffectiveValueEntry oldEntry，参考 System.Windows.EffectiveValueEntry newEntry，System.Windows.DependencyObject.ValueOperation 操作）+ 0xf3 字节    
System.Windows.dll!System.Windows.DependencyObject.RefreshExpression(System.Windows.DependencyProperty dp) + 0x47 字节
System.Windows.dll!System.Windows.Data.BindingExpression.SendDataToTarget() + 0xff 字节    
System.Windows.dll!System.Windows.Data.BindingExpression.SourceAcquired() + 0x5f 字节  
System.Windows.dll!System.Windows.Data.Binding.EnsureBreakPoint(System.Windows.Data.Debugging.BindingDebugState debugState, System.Action callback, bool canDelay) + 0x47 bytes
System.Windows.dll!System.Windows.Data.BindingExpression.System.Windows.IDataContextChangedListener.OnDataContextChanged(object sender, System.Windows.DataContextChangedEventArgs e) + 0xa4 字节  
System.Windows.dll!System.Windows.Data.BindingExpression.DataContextChanged(object sender, System.Windows.DataContextChangedEventArgs e) + 0xc 字节    
System.Windows.dll!System.Windows.FrameworkElement.OnDataContextChanged(System.Windows.DataContextChangedEventArgs e) + 0x1e 字节  
System.Windows.dll!System.Windows.FrameworkElement.OnAncestorDataContextChanged(System.Windows.DataContextChangedEventArgs e) + 0x26 字节  
System.Windows.dll!System.Windows.FrameworkElement.NotifyDataContextChanged(System.Windows.DataContextChangedEventArgs e) + 0xcb 字节  
System.Windows.dll!System.Windows.FrameworkElement.OnTreeParentUpdated(System.Windows.DependencyObject newParent, bool bIsNewParentAlive) + 0x3d 字节  
System.Windows.dll!System.Windows.DependencyObject.UpdateTreeParent（MS.Internal.IManagedPeer oldParent，MS.Internal.IManagedPeer newParent，bool bIsNewParentAlive，bool keepReferenceToParent）+ 0x4a 字节    
System.Windows.dll!MS.Internal.FrameworkCallbacks.ManagedPeerTreeUpdate(System.IntPtr oldParentElement, System.IntPtr parentElement, System.IntPtr childElement, 字节 bIsParentAlive, 字节 bKeepReferenceToParent, bool canCreateParent) + 0xf8 字节   
[管理到本地转换]  
System.Windows.dll!MS.Internal.XcpImports.FrameworkElement_MeasureOverride(System.Windows.FrameworkElement 元素，System.Windows.Size availableSize) + 0x62 字节
System.Windows.dll!System.Windows.FrameworkElement.MeasureOverride(System.Windows.Size availableSize) + 0x18 字节  
System.Windows.dll!System.Windows.FrameworkElement.MeasureOverride(System.IntPtr nativeTarget, float inWidth, float inHeight, out float outWidth, out float outHeight) + 0x9e 字节
[管理到本地转换]  
System.Windows.dll!MS.Internal.XcpImports.FrameworkElement_MeasureOverride(System.Windows.FrameworkElement 元素，System.Windows.Size availableSize) + 0x62 字节
System.Windows.dll!System.Windows.FrameworkElement.MeasureOverride(System.Windows.Size availableSize) + 0x18 字节  
System.Windows.dll!System.Windows.FrameworkElement.MeasureOverride(System.IntPtr nativeTarget, float inWidth, float inHeight, out float outWidth, out float outHeight) + 0x9e 字节
[Appdomain 过渡]  

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T14:32:05.020

该异常表明某些东西已损坏非托管内存。损坏通常发生在引发异常之前的某个时刻，因此很难解决问题。微调器可能根本不涉及，而只是应用程序中更险恶问题的使者。

坦率地说，我只能想到一种在 Silverlight 中破坏非托管内存的方法，那就是在 Silverlight 5 中使用 P/Invoke。如果您这样做，您应该仔细查看代码的那部分。

问题中的演员阵容绝不是有害的。在最坏的情况下，丢失或错误的控件可能会触发 a`NullReferenceException`但不会破坏非托管内存。

* * *

如果您想改进转换（这不会解决您的问题），您可以使用扩展方法进行一些验证并告诉您是否存在问题：

```
static class FrameworkElementExtensions {

  public T FindName<T>(this FrameworkElement parent, String name) {
    var child = parent.FindName(name);
    if (child == null)
      throw new ArgumentException(
        String.Format("No element named '{0}' exists.", name);
    var typedChild = child as T;
    if (typedChild == null)
      throw new ArgumentException(
        String.Format("Named element '{0}' has wrong type.", name);
    return typedChild;
  }

} 
```

然后你可以像这样使用它：

```
dataField.FindName<RadNumericUpDown>("DefinitionScoringPoints").Minimum = 0; 
```

您必须为 Telerik 特定的调用实现类似的扩展方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:00:28.417

好吧，首先，单行代码有很多 Casts。代码中的每种类型都意味着您比代码知道的更多，这很糟糕。Find 方法也有可能返回`null`

如果您尝试为表单设置 Numeric Spinner 的最小值，我建议您在表单内执行此操作 - 类似于以下内容。

```
DefinitionDetailForm.SetNumericSpinnerMinValue(0); 
```

并且`SetNumericSpinnerMinValue` 可以具有通过适当的空检查为微调器设置最小值的逻辑。

`try/catch`在您怀疑异常上升的代码周围使用一个块。

再次 - 摆脱那些演员！

# javascript - 如何用空格或逗号分割字符串？

> ID：10346722
> 
> 赞同：145
> 
> 时间：2012-04-27T07:44:22.313
> 
> 标签：javascript

如果我尝试

```
"my, tags are, in here".split(" ,") 
```

我得到以下

```
[ 'my, tags are, in here' ] 
```

而我想要

```
['my', 'tags', 'are', 'in', 'here'] 
```

* * *

## 回答 #1

> 赞同：290
> 
> 时间：2012-04-27T07:46:23.047

[`String.split()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/split)也可以接受正则表达式：

```
input.split(/[ ,]+/); 
```

这个特定的正则表达式拆分一个或多个逗号或空格的序列，因此例如多个连续的空格或逗号+空格序列不会在结果中产生空元素。

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2015-09-22T22:06:04.097

您可以使用正则表达式来捕获任何长度的空白，这就像：

```
var text = "hoi how     are          you";
var arr = text.split(/\s+/);

console.log(arr) // will result : ["hoi", "how", "are", "you"]

console.log(arr[2]) // will result : "are" 
```

* * *

## 回答 #3

> 赞同：44
> 
> 时间：2014-05-19T02:08:57.420

使用的建议`.split(/[ ,]+/)`很好，但是自然句子迟早会在数组中得到空元素。例如`['foo', '', 'bar']`。

如果这对您的用例没问题，那很好。但是，如果您想摆脱空元素，您可以这样做：

```
var str = 'whatever your text is...';
str.split(/[ ,]+/).filter(Boolean); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-04-27T07:47:39.893

```
"my, tags are, in here".split(/[ ,]+/) 
```

结果是：

```
["my", "tags", "are", "in", "here"] 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-04-27T07:50:30.333

`input.split(/\s*[\s,]\s*/)`

...`\s*`匹配零个或多个空白字符（不仅是空格，还包括制表符和换行符）。

...`[\s,]`匹配一个空格字符或一个逗号

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-06-21T22:37:49.143

当我想考虑逗号等额外字符时（在我的情况下，每个标记都可以用引号输入），我会执行 string.replace() 将其他分隔符更改为空白，然后在空格上拆分。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-05T22:33:25.323

当您需要使用一些*单个*字符分隔符拆分字符串时，请考虑使用反向逻辑：匹配由分隔符字符以外的字符组成的字符串块。

因此，要提取除空格（与 匹配`\s`）和逗号以外的所有字符块，您可以使用

```
console.log("my, tags are, in here".match(/[^\s,]+/g))
// => ["my","tags","are","in","here"]
```

请参阅[正则表达式演示](https://regex101.com/r/vMOwMt/1)。提取除空格和逗号 ( ) 之外的一个或多个 ( ) 字符`String#match`的所有非重叠出现。`+``[^\s,]`

# android - 创建应用程序图标

> ID：10346723
> 
> 赞同：1
> 
> 时间：2012-04-27T07:44:26.620
> 
> 标签：android

如何为主要活动创建应用程序图标？

我想创建一个快捷方式来自定义主屏幕页面上的应用程序图标。

我希望它在应用程序安装后应用到主屏幕上。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T12:24:58.917

**添加快捷方式的方法**

```
private void addShortcut(){
Intent shortcutIntent = new Intent("com.android.launcher.action.INSTALL_SHORTCUT");

// Shortcut name
shortcutIntent.putExtra(Intent.EXTRA_SHORTCUT_NAME, getString(R.string.app_name));
shortcutIntent.putExtra("duplicate", false);

ComponentName comp = new ComponentName(this.getPackageName(), "."+this.getLocalClassName());
shortcutIntent.putExtra(Intent.EXTRA_SHORTCUT_INTENT, new Intent(Intent.ACTION_MAIN).setComponent(comp));

// Shortcut icon
ShortcutIconResource iconRes = Intent.ShortcutIconResource.fromContext(this, R.drawable.icon);
shortcutIntent.putExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE, iconRes);

sendBroadcast(shortcutIntent);
} 
```

**删除快捷方式的方法**

```
private void delShortcut(){
Intent shortcut = new Intent("com.android.launcher.action.UNINSTALL_SHORTCUT");

// Shortcut adı
shortcut.putExtra(Intent.EXTRA_SHORTCUT_NAME, getString(R.string.app_name));

String appClass = this.getPackageName() + "." +this.getLocalClassName();
ComponentName comp = new ComponentName(this.getPackageName(), appClass);
shortcut.putExtra(Intent.EXTRA_SHORTCUT_INTENT, new Intent(Intent.ACTION_MAIN).setComponent(comp));

sendBroadcast(shortcut);
} 
```

**在 OnCreate 上调用方法**

```
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);
delShortcut();
addShortcut(); 
```

**添加快捷方式的权限**

```
<uses-permission android:name="com.android.launcher.permission.INSTALL_SHORTCUT"></uses-permission>
<uses-permission android:name="com.android.launcher.permission.UNINSTALL_SHORTCUT" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:47:14.647

创建你的图标，把它放在drawable文件夹中，然后在你的清单中......

```
<application
    android:icon="@drawable/your_icon"
    android:label="@string/app_name" > 
```

# java - 如何在谷歌地图上显示完整的路线黑白两点？

> ID：10346725
> 
> 赞同：0
> 
> 时间：2012-04-27T07:44:29.063
> 
> 标签：java, android, google-maps, android-mapview

在我的 android 应用程序中，我有一个 MapView，我要显示路线黑白两点，我实现了代码，但它只显示一半路线。我尝试了很多方法但无法解决它请帮助我在哪里做错了。这里是两个红点和蓝色路线的屏幕截图[http://www.flickr.com/photos/77093196@N03/7117948377/](http://www.flickr.com/photos/77093196@N03/7117948377/)
以下是代码：

MapdirectionsActivity.java

```
public class MapdirectionsActivity extends MapActivity {
    /** Called when the activity is first created. */

    MapView mapView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mapView = (MapView) findViewById(R.id.mapview);
        double src_lat = 17.3667; // the source
        double src_long = 78.4667;
        double dest_lat =  18.9647; // the destination
        double dest_long = 72.8258;
        GeoPoint srcGeoPoint = new GeoPoint((int) (src_lat * 1E6),(int) (src_long * 1E6));
        GeoPoint destGeoPoint = new GeoPoint((int) (dest_lat * 1E6),(int) (dest_long * 1E6));
        DrawPath(srcGeoPoint, destGeoPoint, mapView);
        mapView.getController().animateTo(srcGeoPoint);
        mapView.getController().setZoom(7);
    }

    @Override
    protected boolean isRouteDisplayed() {
        return false;
    }

    private void DrawPath(GeoPoint src, GeoPoint dest, MapView mMapView) {

        // connect to map web service
        StringBuilder urlString = new StringBuilder();
        urlString.append("http://maps.google.com/maps?f=d&hl=en");
        urlString.append("&saddr=");// from
        urlString.append(Double.toString((double) src.getLatitudeE6() / 1.0E6));
        urlString.append(",");
        urlString.append(Double.toString((double) src.getLongitudeE6() / 1.0E6));
        urlString.append("&daddr=");// to
        urlString.append(Double.toString((double) dest.getLatitudeE6() / 1.0E6));
        urlString.append(",");
        urlString.append(Double.toString((double) dest.getLongitudeE6() / 1.0E6));
        urlString.append("&ie=UTF8&om=1&output=kml");
        Log.d("Map directions", "URL= " + urlString.toString());

        // get the kml (XML) doc. And parse it to get the coordinates(direction route).
        Document doc = null;
        HttpURLConnection urlConnection = null;
        URL url = null;
        try {
            url = new URL(urlString.toString());
            urlConnection = (HttpURLConnection) url.openConnection();
            urlConnection.setRequestMethod("GET");
            urlConnection.setDoOutput(true);
            urlConnection.setDoInput(true);
            urlConnection.connect();

            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            DocumentBuilder db = dbf.newDocumentBuilder();
            doc = db.parse(urlConnection.getInputStream());

            if (doc.getElementsByTagName("GeometryCollection").getLength() > 0) {
                String path = doc.getElementsByTagName("GeometryCollection").item(0).getFirstChild().getFirstChild().getFirstChild().getNodeValue();
                Log.d("Map directions", "path= " + path);
                String[] pairs = path.split(" ");
                String[] lngLat = pairs[0].split(","); // lngLat[0]=longitude
                                                        // lngLat[1]=latitude
                                                        // lngLat[2]=height
                GeoPoint startGP = new GeoPoint(
                        (int) (Double.parseDouble(lngLat[1]) * 1E6),
                        (int) (Double.parseDouble(lngLat[0]) * 1E6));

                mMapView.getOverlays().add(new MyOverLay(startGP, startGP, 1));//starting point
                GeoPoint gp1 = null;
                GeoPoint gp2 = startGP;
                for (int i = 1; i <pairs.length; i++)
                {
                    lngLat = pairs[i].split(",");
                    gp1 = gp2;
                    // watch out! For GeoPoint, first:latitude, second:longitude
                    gp2 = new GeoPoint(
                            (int) (Double.parseDouble(lngLat[1]) * 1E6),
                            (int) (Double.parseDouble(lngLat[0]) * 1E6));

                    mMapView.getOverlays().add(new MyOverLay(gp1, gp2, 2));//route
                }

                mMapView.getOverlays().add(new MyOverLay(dest, dest, 3));   //last point
            }
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ParserConfigurationException e) {
            e.printStackTrace();
        } catch (SAXException e) {
            e.printStackTrace();
        }
    }
} 
```

MyOverLay.java

```
public class MyOverLay extends Overlay {
    private GeoPoint gp1;
    private GeoPoint gp2;
    private int mRadius = 6;
    private int mode = 0;

    public MyOverLay(GeoPoint gp1, GeoPoint gp2, int mode) // Constructor
    {
        this.gp1 = gp1;
        this.gp2 = gp2;
        this.mode = mode;
    }

    public int getMode() {
        return mode;
    }

    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {

        Projection projection = mapView.getProjection();
        if (shadow == false) {
            Paint paint = new Paint();
            paint.setAntiAlias(true);
            Point point = new Point();
            projection.toPixels(gp1, point);
            // start
            if (mode == 1) {
                paint.setColor(Color.RED);
                RectF oval = new RectF(point.x - mRadius, point.y - mRadius,
                        point.x + mRadius, point.y + mRadius);

                canvas.drawOval(oval, paint);// start point
            }
            // mode=2&#65306;path
            else if (mode == 2) {
                paint.setColor(Color.BLUE);
                Point point2 = new Point();
                projection.toPixels(gp2, point2);
                paint.setStrokeWidth(5);
                paint.setAlpha(120);
                canvas.drawLine(point.x, point.y, point2.x, point2.y, paint);// mode=2&#65306;path
            }
            /* mode=3&#65306;end */
            else if (mode == 3) {
                /* the last path */

                paint.setColor(Color.RED);
                Point point2 = new Point();
                projection.toPixels(gp2, point2);
                paint.setStrokeWidth(5);
                paint.setAlpha(120);
                canvas.drawLine(point.x, point.y, point2.x, point2.y, paint);
                RectF oval = new RectF(point2.x - mRadius, point2.y - mRadius,
                        point2.x + mRadius, point2.y + mRadius);

                paint.setAlpha(255);
                canvas.drawOval(oval, paint);/* end point */
            }
        }
        return super.draw(canvas, mapView, shadow, when);
    }

} 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<com.google.android.maps.MapView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mapview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:apiKey="0E2QBBM0fi1TSN6J0hCLbETO8oscApDt5CDqgbQ"
    android:clickable="true"
    android:enabled="true" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:52:28.027

请参阅此[链接](http://asmncl.blogspot.in/2012/04/android-draw-route-map-between-two.html)以在您的应用程序中绘制行驶路径。您只需在项目中添加链接中存在的四个类，并在需要显示路线时调用以下行。

```
SharedData data = SharedData.getInstance();
data.setAPIKEY("0RUTLH7cqd6yrZ0FdS0NfQMO3lioiCbnH-BpNQQ");//set your map key here
data.setSrc_lat(17);//set your src lat
data.setSrc_lng(78);//set your src lng
data.setDest_lat(18);//set your dest lat
data.setDest_lng(77);//set your dest lng
startActivity(new Intent(YourActivity.this,RoutePath.class));//add RoutePath in your manifeast file 
```

//同时将权限添加到您的清单文件

# c - 打印网络数据包中的用户数据

> ID：10346727
> 
> 赞同：2
> 
> 时间：2012-04-27T07:44:33.537
> 
> 标签：c, linux-kernel, kernel-module

我制作了一个模块，在其中我通过网络过滤器接收所有传入的数据包。我想在 /var/log/messages 中打印数据（无标题）。我尝试了以下 printk 行，但它没有打印合适的消息。

```
 struct sk_buff *sock_buff; 
 printk(KERN_INFO"user data :: %x",(sock_buff->data+sizeof(*sock_buff->network_header)+sizeof(*sock_buff->mac_header))  //though i want in character but i cant understand whats it printing not matching the hex of my data
  printk(KERN_INFO"user data :: %s",(sock_buff->data+sizeof(*sock_buff->network_header)+sizeof(*sock_buff->mac_header)) 
```

我什至用过 tail - sizeof(my_data); 然后我也没有得到想要的o/p。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:00:49.257

也许你忘了通过指针（*）取值，试试这个

```
printk(KERN_INFO"user data :: %x",*(sock_buff->data+sizeof(*sock_buff->network_header) +sizeof(*sock_buff->mac_header)); 
```

据我了解，在您的结构数据字段中有一个指针类型。

```
typedef struct{
  ...
  unsigned char* data;
  ...
} sk_buff; 
```

另外 %x 说明符（十六进制数字）需要数字参数，而不是指针，这就是为什么你不应该忘记放一个小的 (*)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T08:38:02.907

我不是内核黑客，但在查看 skbuff.h 头文件时，我认为其中一个`sock_buff->data`或`sock_buff->tail`指向头后的数据。在这种情况下`printk(KERN_INFO"user data :: %s",sock_buff->data);`可能会成功。

# mysql - 查询MySQL中的字符串比较精确

> ID：10346728
> 
> 赞同：8
> 
> 时间：2012-04-27T07:44:37.227
> 
> 标签：mysql, comparison, collation

我在 MySQL 中创建了这样的表：

```
DROP TABLE IF EXISTS `barcode`;
CREATE TABLE `barcode` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `code` varchar(40) COLLATE utf8_bin DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=3 DEFAULT CHARSET=utf8 COLLATE=utf8_bin;

INSERT INTO `barcode` VALUES ('1', 'abc');

INSERT INTO `barcode` VALUES ('2', 'abc '); 
```

然后我从表格条码中查询数据：

```
SELECT * FROM barcode WHERE `code` = 'abc '; 
```

结果是：

```
+-----+-------+
|  id | code  |
+-----+-------+
|  1  |  abc  |
+-----+-------+
|  2  |  abc  |
+-----+-------+ 
```

但我希望结果集只有 1 条记录。我解决方法：

```
SELECT * FROM barcode WHERE `code` = binary 'abc '; 
```

结果是 1 条记录。但我使用 NHibernate 和 MySQL 从映射表生成查询。那么如何解决这个案子呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T07:55:33.520

没有其他解决方法。要么将单个比较指定为存在，`binary`要么将整个数据库连接设置为`binary`. （做`SET NAMES binary`，可能有其他副作用！）

基本上，这种“惰性”比较是MySQL 的一个硬编码**特性**。要禁用它（按需！），您可以使用`binary`您显然已经做过的比较。这不是“解决方法”，而是真正的解决方法。

来自[MySQL 手册](http://dev.mysql.com/doc/refman/5.0/en/char.html)：

> 所有 MySQL 排序规则都是 PADSPACE 类型。这意味着比较 MySQL 中的所有 CHAR 和 VARCHAR 值，而不考虑任何尾随空格

当然，从用户的角度来看，还有很多其他的可能性可以达到相同的结果，即：

*   `WHERE field = 'abc ' AND CHAR_LENGTH(field) = CHAR_LENGTH('abc ')`
*   `WHERE field REGEXP 'abc[[:space:]]'`

**这些问题**是它们有效地禁用了快速索引查找，因此您的查询总是导致全表扫描。拥有巨大的数据集，这会产生很大的不同。

**再次：** `PADSPACE`是 MySQLs [VAR]CHAR 比较的默认值。您可以（并且应该）使用`BINARY`. 这是这样做的目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T07:53:10.783

您可以尝试使用[正则表达式匹配](http://dev.mysql.com/doc/refman/5.1/en/regexp.html)：

```
SELECT * FROM barcode WHERE `code` REGEXP 'abc[[:space:]]' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-17T07:04:48.980

我只是在处理带有通配符 (%) 的 LIKE 时的情况，导致意外结果。在搜索时，我还发现`STRCMP(text1, text2)`了比较两个字符串的 mysql 的字符串比较功能。但是使用带有 LIKE 的 BINARY 为我解决了这个问题。

```
SELECT * FROM barcode WHERE `code` LIKE BINARY 'abc '; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T07:47:55.917

我假设你只想要一个结果，你可以使用`LIMIT`

```
SELECT * FROM barcode WHERE `code` = 'abc ' LIMIT 1; 
```

要进行精确的字符串匹配，您可以使用`Collation`

```
 SELECT *
 FROM barcode
 WHERE code COLLATE utf8_bin = 'abc'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T07:55:04.217

你可以这样做：

```
SELECT * FROM barcode WHERE `code` = 'abc ' 
AND CHAR_LENGTH(`code`)=CHAR_LENGTH('abc '); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-22T14:29:00.837

[Kaii](https://stackoverflow.com/a/10346886/86072)引用的那句话之后的句子基本上是“使用`LIKE`”：

> [在此上下文中的“比较”不包括 LIKE 模式匹配运算符，其尾随空格很重要](http://dev.mysql.com/doc/refman/5.0/en/char.html)

下面的例子表明这`'Monty' = 'Monty '`是真的，但不是`'Monty' LIKE 'Monty '`。

但是，如果您使用`LIKE`，请注意包含`'%'`,`'_'`或`'\'`字符的文字字符串 :`'%'`并且`'_'`是通配符，`'\'`用于转义序列。

# gwt - GWT 处理 onBlur 也停止了事件的传播

> ID：10346738
> 
> 赞同：2
> 
> 时间：2012-04-27T07:45:26.310
> 
> 标签：gwt

> **可能重复：**
> [在 Chrome 中，当焦点位于已注册 onChange 和 onBlur 处理程序的 TextArea 上时，没有在 FocusPanel 上获得 onClick()](https://stackoverflow.com/questions/9170566/in-chrome-not-getting-an-onclick-on-a-focuspanel-when-focus-was-on-a-textarea)

在我的 GWT 应用程序中，我在 TextArea 上注册了一个 BlurHandler，以便我可以保存更改并在焦点移动到其他地方时从编辑模式返回查看模式。这有效，但似乎也破坏了移动焦点的事件的效果，至少在开发模式下的 Chrome 上。例如，如果用户点击一个 Anchor，TextBox 会得到 onBlur()，然后 Anchor 不会得到 onClick()；而在我注册 onBlur 之前，Anchor 将获得 onClick()。这似乎相当可靠（同样，在开发模式下的 Chrome 中）。我小心不要调用 event.stopPropagation() 或 event.preventDefault()。任何想法如何获得 onBlur 和 onClick() ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T21:18:07.283

我有一个类似的问题。虽然我无法跟踪源问题。我确实启用了开发工具栏/萤火虫并设置了事件断点来测试；看起来在模糊操作之后没有触发点击事件。在玩了几个小时之后（我不太确定是什么启发了我尝试这个），我将 onblur 动作放在一个计时器中，执行延迟约为 300 毫秒。这似乎对我有用。我认为这可能与我的操作稍微修改了页面和项目的可见性有关，女巫重新渲染了页面，我只能猜测单线程浏览器模型杀死了不再出现的点击事件正确的区域。

```
 textBox.addBlurHandler(new BlurHandler()
      {
        @Override
        public void onBlur(BlurEvent event)
        {
            Timer delayTimer = new Timer()
            {
              @Override
              public void run()
              {
                 //do stuff
              }
            };
            delayTimer.schedule(300);
         }
    });

           anchor.addClickHandler(....) 
```

# java - （java / scala）带有可变存储桶的MultiHashMap？

> ID：10346739
> 
> 赞同：0
> 
> 时间：2012-04-27T07:45:28.473
> 
> 标签：java, scala, data-structures

我正在寻找一种字典类型的数据结构，它会自动将我指定的值添加到键的（已经存在的）集合中。因此，如果我说 put(k, v)，我希望 get(k) 返回 v union v'，其中 v' 是前一个集合。

是否已经存在这样的数据结构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T05:34:13.143

怎么样`scala.collection.mutable.MultiMap.addBinding`？

见[http://www.scala-lang.org/api/current/scala/collection/mutable/MultiMap.html](http://www.scala-lang.org/api/current/scala/collection/mutable/MultiMap.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T14:50:31.530

Google 的 Guava 库有[几个实现](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)。

# c++ - Qt 我们应该删除在 QNetworkAccessManager SIGNAL 上收到的 QNetworkReply* 回复吗？

> ID：10346742
> 
> 赞同：4
> 
> 时间：2012-04-27T07:45:34.793
> 
> 标签：c++, qt

假设我们有：

```
pManager  = new QNetworkAccessManager();
QObject::connect(pManager, SIGNAL(finished(QNetworkReply*)),this, SLOT(finishedSlot(QNetworkReply*))); 
```

和

```
 void finished(QNetworkReply* reply); 
```

如果我们删除里面的回复，`finished`我们会得到段错误。这是否意味着我们不会释放它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T07:51:03.937

来自[http://doc.qt.io/qt-5/qnetworkreply.html](http://doc.qt.io/qt-5/qnetworkreply.html)：

> 注意：请勿删除与此信号相连的插槽中的对象。使用 deleteLater()。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T07:50:06.790

从信号的[`QNetworkAccessManager`](http://qt-project.org/doc/qt-4.8/qnetworkaccessmanager.html#finished)文档中`finished`：

> 注意：**不要删除连接到该信号的槽中的回复对象。使用 deleteLater()。**

所以确实，你不应该删除它，而是调用`deleteLater`.

# opengl - Windows DLL 链接与 cgo

> ID：10346748
> 
> 赞同：2
> 
> 时间：2012-04-27T07:46:00.503
> 
> 标签：opengl, dll, go, mingw-w64, cgo

我的最终目标是从 Go 包中成功链接到多个 DLL（opengl32.dll glfw.dll 和 glu32.dll）——但[尝试链接到 go-glfw 包给了我“未定义”错误](https://github.com/jteeuwen/glfw/issues/9)。

所以我决定从 %GOROOT%\misc\cgo\life 中的简单未修改示例中获取一个非常简单的 cgo 动态/共享库链接来工作。但只是调用命令**go build -o life main.go**失败，并出现基本相同的链接器错误，即：

```
go-build374967034/_/C_/Go/misc/cgo/life.a(c-life.o)(.text): _assert: not defined 
```

“未定义”...与我在尝试按照上述链接 glfw 时遇到的错误完全相同。

这是今天早上刚下载的 Go 1.0.1 的全新未篡改安装，安装在一个普通的、相当新的 Win7 64 位安装上。什么可能出错？我知道... Windows。很想听听任何想法……从我在网上阅读的内容来看，与 CGO 链接的 DLL 似乎是一件轻而易举的事情。然而，即使是最简单的例子对我来说也失败了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:19:21.543

我认为这里已经讨论了这个特定的错误：[http](http://code.google.com/p/go/issues/detail?id=3261) ://code.google.com/p/go/issues/detail?id=3261 但我不确定它是否可以应用于您的案例。最后，从我读到的内容来看，他们提出了一个补丁，但没有真正尝试过，因为我正在等待 1.1 版本（希望他们能修复运行时臭名昭著的内存泄漏；））

# exception - 如何在 AspectJ 中围绕建议重新抛出异常

> ID：10346750
> 
> 赞同：7
> 
> 时间：2012-04-27T07:46:03.890
> 
> 标签：exception, aspectj

我有一些引发异常的方法，我想使用 AspectJ 来计算执行时间以及是否引发了一些异常，并登录到错误日志并通过重新引发异常来继续流程。

我试图通过以下方式来实现这一点，但 eclipse 说“未处理的异常类型”。

针对谁使用aspectj的代码：-

```
public interface Iface {
    public void reload() throws TException;

    public TUser getUserFromUserId(int userId, String serverId) throws ResumeNotFoundException, TException;

    public TUser getUserFromUsername(String username, String serverId) throws  ResumeNotFoundException, TException;

    public TResume getPartialActiveProfileFromUserId(int userId, int sectionsBitField, String serverId) throws ResumeNotFoundException, UserNotFoundException;

    public TResume getPartialActiveProfileFromUsername(String username, int sectionsBitField, String serverId) throws ResumeNotFoundException, UserNotFoundException, TException;
} 
```

代码方面： -

```
public aspect AspectServerLog {

public static final Logger ERR_LOG = LoggerFactory.getLogger("error");

Object around() : call (* com.abc.Iface.* (..)) {
    Object ret;
    Throwable ex = null;

    StopWatch watch = new Slf4JStopWatch();

    try {
    ret = proceed();
    }catch (UserNotFoundException e) {
    ex = e ;
     throw e ;
    } catch (ResumeNotFoundException e) {
    ex = e ;
    throw e ;
    } catch (Throwable e) {
    ex = e ;
    throw new RuntimeException(e);
    }finally{

    watch.stop(thisJoinPoint.toShortString());

    if(ex!=null){
        StringBuilder mesg = new StringBuilder("Exception in ");
        mesg.append(thisJoinPoint.toShortString()).append('(');
        for(Object o : thisJoinPoint.getArgs()) {
        mesg.append(o).append(',');
        }
        mesg.append(')');

        ERR_LOG.error(mesg.toString(), ex);
        numEx++;
    }

   }
return ret;
}
} 
```

请帮助为什么这个 AspectJ 不起作用。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-28T00:50:38.383

您可以避免捕获异常，只需使用没有捕获的 try/finally 块。如果您真的需要记录异常，您可以使用 after throwing 建议，如下所示：

```
public aspect AspectServerLog {

    public static final Logger ERR_LOG = LoggerFactory.getLogger("error");

    Object around() : call (* com.abc.Iface.* (..)) {

        StopWatch watch = new Slf4JStopWatch();

        try {
            return proceed();
        } finally {
            watch.stop(thisJoinPoint.toShortString());
        }
    }

    after() throwing (Exception ex) : call (* com.abc.Iface.* (..)) {
        StringBuilder mesg = new StringBuilder("Exception in ");
        mesg.append(thisJoinPoint.toShortString()).append('(');
        for (Object o : thisJoinPoint.getArgs()) {
            mesg.append(o).append(',');
        }
        mesg.append(')');

        ERR_LOG.error(mesg.toString(), ex);
    }

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T17:25:23.933

恐怕您不能编写建议来抛出未声明为在匹配的连接点抛出的异常。每： http: [//www.eclipse.org/aspectj/doc/released/progguide/semantics-advice.html](http://www.eclipse.org/aspectj/doc/released/progguide/semantics-advice.html)：“建议声明必须包含一个 throws 子句，列出主体可能抛出的检查异常。这个检查异常列表必须与通知的每个目标连接点兼容，否则编译器会发出错误信号。”

关于改善这种情况的 aspectj 邮件列表已经讨论过 - 请参阅这样的线程：http: [//dev.eclipse.org/mhonarc/lists/aspectj-dev/msg01412.html](http://dev.eclipse.org/mhonarc/lists/aspectj-dev/msg01412.html)

但基本上你需要做的是为每个异常声明变体提供不同的建议。例如：

```
Object around() throws ResumeServiceException, ResumeNotFoundException, TException: 
  call (* Iface.* (..) throws ResumeServiceException, ResumeNotFoundException, TException) { 
```

这将在任何有这 3 个例外的地方提供建议。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-11-28T15:59:25.587

有一个“丑陋”的解决方法——我在 Spring4 中找到了它们`AbstractTransactionAspect`

```
Object around(...): ... {
    try {
        return proceed(...);
    }
    catch (RuntimeException ex) {
        throw ex;
    }
    catch (Error err) {
        throw err;
    }
    catch (Throwable thr) {
        Rethrower.rethrow(thr);
        throw new IllegalStateException("Should never get here", thr);
    }
}

/**
 * Ugly but safe workaround: We need to be able to propagate checked exceptions,
 * despite AspectJ around advice supporting specifically declared exceptions only.
 */
private static class Rethrower {

    public static void rethrow(final Throwable exception) {
        class CheckedExceptionRethrower<T extends Throwable> {
            @SuppressWarnings("unchecked")
            private void rethrow(Throwable exception) throws T {
                throw (T) exception;
            }
        }
        new CheckedExceptionRethrower<RuntimeException>().rethrow(exception);
    }
} 
```

# javascript - 如何使用 JavaScript 检查是否存在谷歌地球插件？

> ID：10346751
> 
> 赞同：0
> 
> 时间：2012-04-27T07:46:04.013
> 
> 标签：javascript, google-earth-plugin

如何确定是否使用 JavaScript 在浏览器中安装了 Google 地球插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:53:23.063

您可以使用以下[`isInstalled`](https://developers.google.com/earth/documentation/reference/google_earth_namespace#a246b165f799202509fb93fa821872a87)方法：

```
google.load("earth", "1");
if(google.earth.isInstalled()) {
    //Installed!
} 
```

但请注意，如果未安装该插件，则会自动提示用户下载它。因此，只有当您只想向已经拥有该插件的用户显示某些内容时，这才真正有用。

# wordpress - 将 Wordpress 站点复制到子域

> ID：10346757
> 
> 赞同：0
> 
> 时间：2012-04-27T07:46:44.950
> 
> 标签：wordpress, migration, subdomain

我正在将我的网站[The Sydney Visitor](http://thesydneyvisitor.com)复制到子域 new.thesydneyvisitor.com。原因是我想在旧网站仍处于活动状态时更改设计。

到目前为止我做了什么：

*   使用 ftp 将所有文件复制到子域目录。
*   创建了一个新的数据库
*   导出旧站点数据库并将其导入新数据库
*   编辑`wp-config`文件（在子域目录中）以指向新数据库
*   更新了`wp-options`表格以反映网址更改
*   运行此查询以更新帖子中的 URL 更改

    ```
    UPDATE wp_posts SET guid = replace(guid,'http://www.thesydneyvisitor.com','http://www.new.thesydneyvisitor.com'); 
    ```

问题：

在我尝试使用子域 url 访问站点时完成所有这些操作后，我收到以下错误：

```
Warning: require(/home/rapidtem/public_html/new/wp-includes/load.php) [function.require]: failed to open stream: No such file or directory in /home/rapidtem/public_html/new/wp-settings.php on line 21

Fatal error: require() [function.require]: Failed opening required '/home/rapidtem/public_html/new/wp-includes/load.php' (include_path='.:/usr/lib/php:/usr/local/lib/php') in /home/rapidtem/public_html/new/wp-settings.php on line 21 
```

请协助。我被困住了。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T17:35:06.637

仔细检查以下事项。

1.  正确配置子域目录。
2.  将所有 wordpress 文件复制到新目录。（我更喜欢压缩wordpress文件夹并上传到新的地方以避免任何文件丢失）
3.  wp-config.php 中给出的正确数据库名称
4.  新目录具有读/写权限（检查它是否是受密码保护的文件夹）

如果上述一切都很好，那么问题将出在您的新数据库中。不要运行查询来更新帖子中的 URL 更改，而是执行以下步骤：

1.  转到 wp-options 表并编辑 site_url（在第 1 行）、home（在第 39 行左右）和 upload_path（在第 58 行左右）。

这是一个详细的教程[如何将 wordpress 移动到新的服务器或主机。](http://blog.triphp.com/how-to/how-to-move-wordpress-to-a-new-server-or-host.html)

有一些插件可用于在数据库中进行这些搜索和替换。[检查这个](http://wordpress.org/extend/plugins/search-and-replace/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T07:57:54.310

您是否检查过这些位置中是否存在引用的文件？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T08:43:14.580

您是否更改了 Wordpress 数据库中的主页和站点 URL？

# html - 在 html 表格单元格中显示链接

> ID：10346768
> 
> 赞同：-1
> 
> 时间：2012-04-27T07:47:18.880
> 
> 标签：html

我想在我的代码中添加一个链接，如下所示，我编写了一个 javascript 函数，在 UI 中它必须将数据显示为链接。

字符串 str="" + dataTable.Rows[i][j] + ""

有没有办法将我的数据表数据显示为 UI 中的链接？回复

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T07:51:29.227

假设您的 dataTable[i][j] 是链接..我们可以简单地在 javascript 中执行此操作来创建链接

```
link = '<a href="' + dataTable[i][j] + '" >Link</a>'; 
```

然后在任何你想要的地方使用这个字符串。

或者我刚刚看到更新的问题

```
'<td><a href="#" onclick="goToFunction()">' + dataTable[i][j] + '</a></td>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:52:05.463

锚 (<a ...>) 标签的开始在哪里？只有一个结局。尝试...

```
<td><a href="#" onclick="GoToFunction()">{link}</a></td> 
```

# facebook - “物联网和社交网络”的概念演示

> ID：10346771
> 
> 赞同：0
> 
> 时间：2012-04-27T07:47:34.423
> 
> 标签：facebook, virtual, account

这是我在这个 facebook 的 stackoverflow 论坛上的第一篇文章。我的背景是 FPGA 平台上的无线基带原型设计，之前没有任何 facebook 开发经验。现在我有机会从事与社交网络相关的开发工作，我很兴奋。以上只是我的背景介绍。

在这里，我想创建一个虚拟 Facebook 用户。想象一下，您正在 Facebook 上与冰箱互动。这就是我们想要展示的概念。

以下是我想在我的**虚拟**facebook 帐户中拥有的功能..

1）识别真正的朋友签到和他/她墙上发布的消息。

2）能够在真实朋友的墙上写消息。

3) 识别发布在虚拟帐户墙上的消息。

4）能够在虚拟帐户墙上写消息。

虚拟账户如何配备这样的功能？我可以通过编写 facebook 应用程序来实现吗？请告知我应该看的方向。

干杯，电话Naing

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:31:43.200

facebook api 允许您查询他们的图表，但它需要访问令牌才能做到这一点。有 3 种主要的令牌类型：用户、页面和应用程序。

您的应用可以轻松获取应用令牌，但仅限于公共数据，例如公共页面的数据。对于页面和用户令牌，您需要实际用户与您的应用进行交互才能获取令牌。

[您可以通过向用户请求正确的权限](http://developers.facebook.com/docs/authentication/permissions/)（有用户权限和好友权限）来获取好友签到、Feed、图像、事件等。您还可以使用“publish_stream”权限发布到朋友墙。

为了“识别”用户墙上发布的项目，您可以每隔一段时间重新检查用户提要并比较您拥有的内容和获得的内容，或者使用[实时更新](http://developers.facebook.com/docs/reference/api/realtime/)。

综上所述，我严重怀疑您是否能够在 facebook api 的当前限制下获得类似的东西。

让我们从 Facebook 不喜欢“虚拟”的个人资料开始，他们希望个人资料是真实的人。当然，有很多虚拟配置文件，但他们可以删除它们（有时会这样做）。

即使您确实拥有这些虚拟配置文件，由于它们是虚拟的，因此它们不会使用 facebook 与您的应用程序交互，也不会通过它们的渠道（Web 界面、Android 或 iOS 等）登录到 facebook。因此，您将无法获得所需的所有信息的用户访问令牌。由于[不推荐使用offline_access 权限](http://developers.facebook.com/roadmap/offline-access-removal/)，因此无法拥有对用户有效期超过2个月的令牌，这意味着对于每个“虚拟用户”，您需要将他登录到Facebook，然后与您的应用程序以获取新令牌。

您可以创建一个页面而不是虚拟个人资料，这也适用于 facebook。但是在这里，您需要用户实际与 facebook 和您的应用程序进行交互以获取有效的页面访问令牌，即使您得到了，这对于您想要请求的数据也是不够的。

综上所述：我认为这是不可能的。

# rotation - 通过鼠标/触摸显示和旋转 3-D 网格？

> ID：10346777
> 
> 赞同：0
> 
> 时间：2012-04-27T07:48:01.120
> 
> 标签：rotation, quaternions

想象一个相机瞄准一个可以围绕它的中心自由旋转的球体。

想象一下，用户可以通过从相机伸出手来触摸这个球体上最近的点并轻弹它来旋转这个球体。

这就是我试图在 iOS 中实现的。

[Iphone 上的 OpenGL ES - 显示和旋转 3D 对象](https://stackoverflow.com/questions/7140414/opengl-es-on-iphone-displaying-and-rotating-3d-objects)<--在这个链接的问题中，我试图找出一个合适的框架。

从那以后，我选择了[http://nineveh.gl/](http://nineveh.gl/)（它仍处于测试阶段，但只需轻轻一点即可正常工作）并使其轮换演示工作。

每次用户的手指在触摸屏上移动时，代码都会捕获该瞬时向量，该向量将在每次更新（@ 60 Hz）时被投入到整体速度向量中：

```
- (void) drawView
{
    static CGPoint v = { 0.0, 0.0 };

    v.x += _vel.x;
    v.y += _vel.y;

    // resetting to 0 makes sure each touch movement only gets fed in once
    _vel.x = _vel.y = 0.0;

    float decay = 0.93;
    v.x *= decay;
    v.y *= decay;

    //  this is wrong...
    [_mesh rotateRelativeToX: v.y
                         toY: v.x
                         toZ: 0.0 ];

    [_camera drawCamera];
} 
```

然后应将此合力施加到网格上。

我上面的内容最初似乎有效。如果我水平滑动它会完美运行。同样垂直。但只有当我开始组合旋转时，它才会不同步。假设我水平旋转 10°，然后垂直旋转 10°。现在它没有正确响应。

谁能解释这个问题？

从阅读开始，我怀疑解决方案将涉及四元数......

谁能建议我如何解决这个问题？这是我必须使用的 API 参考：http: [//nineveh.gl/docs/Classes/NGLObject3D.html](http://nineveh.gl/docs/Classes/NGLObject3D.html)

我注意到有一个可能派上用场的 rotationSpace 属性，还有一个 rotateRelativeWithQuaternion 方法。

我希望也许有人熟悉这个问题并且可以看到如何使用这个 API 来解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:11:40.903

```
_cube1.rotationSpace = NGLRotationSpaceWorld; 
```

does the trick!

Resources:

[http://www.youtube.com/watch?v=t5DzKP6y0nU&list=UUJ0dpXJSjM9rpDtx6ZdPXHw](http://www.youtube.com/watch?v=t5DzKP6y0nU&list=UUJ0dpXJSjM9rpDtx6ZdPXHw)

[http://nineveh.gl/docs/Classes/NGLObject3D.html](http://nineveh.gl/docs/Classes/NGLObject3D.html)

[http://nineveh.gl/docs/Classes/NGLObject3D.html#//api/name/rotationSpace](http://nineveh.gl/docs/Classes/NGLObject3D.html#//api/name/rotationSpace)

# openlayers - OpenLayers：更改矢量图层后如何刷新地图

> ID：10346788
> 
> 赞同：10
> 
> 时间：2012-04-27T07:49:02.627
> 
> 标签：openlayers

在 OpenLayers 中，我有一个集群策略来限制用户在地图上看到的特征/点的数量。但是，当用户完全放大时，我想关闭聚类策略以便显示所有功能。为此，我正在捕捉这样的缩放事件：

```
map.events.register("zoomend", this, function (e) {
    if (map.getZoom() === this.mapMaxZoom) {
        // Don't cluster at this level. No matter what.
        this.vector.strategies[0].threshold = 1000;
        console.log("setting the clustering strategy to 1000");
    }
}); 
```

这有点工作，但我没有看到应用了新的聚类 - 我必须再次缩小才能看到聚类更改为 1000 的阈值（从而显示所有特征）。我需要一些方法来强制 openlayers 刷新。我试过调用 map.redraw() 但这没有帮助。有任何想法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-23T10:17:25.300

`vectorlayer.refresh({force:true});` 试试这个。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T08:57:55.160

`redraw()`您应该在图层而不是地图上调用方法 -`this.vector.redraw()`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-24T15:37:05.337

我在这篇文章中找到了答案。[OpenLayers 集群重新计算](https://stackoverflow.com/questions/6457437/openlayers-cluster-recalculate)

基本上，我需要设置集群策略，然后是“recluster”。工作一种享受。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-28T12:24:07.180

之前的答案都没有对我有用。我阅读了 Open Layers 3 API 并找到[了 ol.layer.Vector.changed()](http://openlayers.org/en/v3.7.0/apidoc/ol.layer.Vector.html#changed)，这对我有帮助。像这样使用：`vectorLayer.changed()`。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-06-04T12:18:30.767

对于开放层 3

```
vectorlayer.getSource().refresh() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-15T16:06:04.930

由于这个文件，我解决了同样的问题：CenteredCluster.js，我在`<script src="... /OpenLayers.js"></script>`. 我从这个例子中捕获了文件：http: [//jorix.github.io/OL-Ragbag/examples/sundials.html](http://jorix.github.io/OL-Ragbag/examples/sundials.html)供参考：[https ://github.com/jorix/OL-Ragbag](https://github.com/jorix/OL-Ragbag)

然后我不使用集群策略方法，而是使用文件的类，CenteredCluster，您可以使用 ZoomRange 选项设置来控制集群的行为（激活、停用、距离和阈值）：

```
 var centeredCluster = new OpenLayers.Strategy.CenteredCluster({
zoomSettings: [
    {zoomRange: [0, 2], settings: {distance: 10}},
    {zoomRange: [3, 4], settings: {distance: 10}},
    // 5 normal clusters
    {zoomRange: [6, 14], settings: {threshold: 2}},
    {zoomRange: [15, 99], settings: {enabled: false}}
]
});

 var urlKMLClient = 'features.kml'; 
 var layerKMLClient = new OpenLayers.Layer.Vector("Clients", {
      style : style,

     strategies: [centeredCluster, new OpenLayers.Strategy.BBOX()],
    protocol: new OpenLayers.Protocol.HTTP({
        url: urlKMLClient,
        format: new OpenLayers.Format.KML({
            extractStyles: true, 
            extractAttributes: true,
            maxDepth: 2
        })
    })
}
);
     map.addLayer(layerKMLClient); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-05-31T08:59:53.960

在 OL3 中通过调用 layer 的 source refresh() 方法来刷新它

`layer.getSource().refresh()`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-09-11T10:23:30.157

要解决这个问题，只需使用 `map.updateSize();`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-17T21:53:00.283

在`OL`3.10.1 中，我这样做：

```
WMSLayer.getSource().updateParams({"time": Date.now()});
WFSLayer.clear(); 
```

两个图层 (`WMS`和`WFS`) 都已成功刷新。

关于这个功能有很多不同的信息，`OL`最大的问题是没有人定义一个`OL`可以工作的版本:)

希望这会对某人有所帮助！

# java - 将 ResultSet 分配给类中的变量

> ID：10346793
> 
> 赞同：3
> 
> 时间：2012-04-27T07:49:20.177
> 
> 标签：java, mysql, resultset

我有以下功能：

```
public Map<Integer, Product> fetchAllProducts() {

  Map<Integer, Product> pArr = new HashMap();
  try {
     Statement st = conn.createStatement();
     ResultSet rs = st.executeQuery("SELECT id, intro, content, price FROM Product");
     while (rs.next()) {
       pArr.put(rs.getInt("id"), new Product(rs));
     }
     st.close();
  } catch (SQLException ex) {
   //...
  }
  return pArr;
} 
```

它从 mySQL 表中获取所有行，`Product`并为每一行创建一个新`Product`类。产品构造器：

```
 public Product(ResultSet rs) {
    try {
       price = rs.getInt("price");
       content = rs.getString("content");
       intro = rs.getString("intro");
    } catch (SQLException ex) {
       //...
    }
   } 
```

我的问题是：有没有更好的方法将结果列分配给变量`Product`？代码`price = rs.getInt("price");`等似乎是多余的，不是吗？完美的是，如果我将查询语句更改`SELECT intro, content, tax, delivery FROM ...`为构造函数，则会自动将其分配给构造函数中的适当变量（即介绍、内容、税收、交付）。这可以用Java完成还是我只是在做梦？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T07:54:25.430

第一：你真的不应该将 传递`ResultSet`给`Product`! 您应该清楚地将数据库访问代码与业务逻辑分开。

所以通常我希望在您的代码中看到这一点：

```
private static final String TABLE_NAME = "product";
private static final String ID_COLUMN = "id";
private static final String INTRO_COLUMN = "intro";
private static final String CONTENT_COLUMN = "content";
private static final String PRICE_COLUMN = "price";

private static final String FETCHALLPRODUCTS_QUERY = String.format("SELECT %s, %s, %s, %s FROM %s", ID_COLUMN, INTRO_COLUMN, CONTENT_COLUMN, PRICE_COLUMN, TABLE_NAME);

public Map<Integer, Product> fetchAllProducts() {

  Map<Integer, Product> pArr = new HashMap();
  try {
     Statement st = conn.createStatement();
     ResultSet rs = st.executeQuery(FETCHALLPRODUCTS_QUERY);
     while (rs.next()) {
        Integer price = rs.getInt(PRICE_COLUMN);
        String content = rs.getString(CONTENT_COLUMN);
        String intro = rs.getString(INTRO_COLUMN);

        Product product = new Product(price, content, intro);
        Integer id = rs.getInt(ID_COLUMN);
        pArr.put(id, product);
     }
     st.close();
  } catch (SQLException ex) {
   //...
  }
  return pArr;
} 
```

但是要回答您的问题：在处理普通 JDBC 时，这样做是一种非常常见的做法。您正在寻找的是像[Hibernate这样的](http://www.hibernate.org/)[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)框架。

使用 JDBC 连接时我正在做的一件事是为列名和表名声明常量。这样在我看来它更干净一些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T08:00:13.560

您可以在 Reflection 的帮助下实现这一点，[ResultSetMapper](http://resultsetmapper.sourceforge.net/)也是如此。

一个[教程](http://www.codeproject.com/Tips/372152/Mapping-JDBC-ResultSet-to-Object-using-Annotations)。

Apache BeanUtils 有类似的东西，但它返回给你[DynaBean](http://commons.apache.org/beanutils/api/org/apache/commons/beanutils/DynaBean.html)。

如果您可以迁移到更复杂和完整的系统，您应该考虑使用 ORM，如 hibernate、JPA。

对于普通的 JDBC，您可以使用自己的反射工具，也可以使用 ResultMapper。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:01:23.277

我认为如果您使用例如hibernate，这是可能的。但就像我的前身写的那样：不要在 Product 的构造函数中设置 ResultSet，因为您将处理 ResultSet 的另一个副本（ResultSet 很重），并且如果您有很多数据，那会降低性能。

所以就这样做：

...

```
pArr.put(rs.getInt("id"), new Product(rs.getint("Price") ....)); 
```

...

```
public Product(int price ....) { 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T08:10:34.750

我猜想使用一些或映射库（如 Hibernate）会使代码更愉快。正如我听说的那样，它使您想要的东西变得普遍。但是，使用它涉及替换项目中的所有数据库交互代码。我认为您的代码并没有那么难看，可能这样做会使它更令人愉快：

```
 while (rs.next()) {
   pArr.put(rs.getInt("id"), new Product(rs));
   Integer id = rs.getInt("id");
   Integer price = rs.getInt("price");
   Integer content = rs.getString("content");
   Integer intro = rs.getString("intro");
   Product product = new Product(price, content, intro);
   pArr.put(id, product);
 } 
```

嗯，似乎在我输入答案时出现了三个相同的答案。对不起大家 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T08:15:52.877

[Commons DbUtils](http://commons.apache.org/dbutils/)是 JDBC 上的一个薄层（不像 Hibernate 那样复杂），可以[从 ResultSet 设置 bean 属性](http://commons.apache.org/dbutils/apidocs/org/apache/commons/dbutils/BeanProcessor.html)。

# java - 如何检查我的任何类是否使用了依赖项并在 Maven 中列出它们？

> ID：10346797
> 
> 赞同：8
> 
> 时间：2012-04-27T07:49:29.353
> 
> 标签：java, eclipse, maven, sts-springsourcetoolsuite

我想在 POM.XML 中做一些清理工作。如何检查我的代码根本没有使用哪些依赖项，如果使用了一个，那么如何判断它是哪一个？

当然，我不想简单地删除依赖项，然后在 IDE 中搜索错误，因为当 pom 拥有大约 80 多个依赖项时，这可能需要很长时间。

我正在使用 Eclipse 的 SpringSource Tools Suite 版本。

格雷茨

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T08:00:35.913

看看[Maven 依赖插件](http://maven.apache.org/plugins/maven-dependency-plugin/analyze-mojo.html)。运行时，它应该列出您声明但未使用的依赖项，以及您使用哪些不传递依赖项而没有显式声明它们。请注意，如果您使用反射，报告可能不准确。

# c# - 解决有关将数据从表单传递到类的任务的提示

> ID：10346802
> 
> 赞同：0
> 
> 时间：2012-04-27T07:50:02.893
> 
> 标签：c#

我有一个任务，我需要一些提示和解释来解决和理解它。这是关于为客户注册的。

一个ContactForm 与Contact 有关系，而Contact 与Adress、Email 和Phone 有关系。

用户在 ContactForm 中输入信息，然后应在 Adress、Email 和 Phone 类中传递和检查此信息。但我想这些信息必须通过 Contact 类。因此，我在 ContactForm 中创建了一个 Contact 对象并将数据发送到 Contact 的构造函数，但预计我在 Contact 字段中声明的 Adress、Phone 和 Email 的构造函数中使用对象引用。这个我不明白它是如何工作的？也许使用对象引用是为了避免向Contact的构造函数发送太多数据？

我还将使用属性来设置和获取信息，同样的，我希望使用对象的引用。

如果我理解我的说明，Contact 的构造函数应该如下所示：

```
Contact(string firstName, string lastname, Adress adr, Phone tel, Email mail) 
```

在这里我不明白当我需要使用这样的构造函数时应该如何传递表单中的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:02:45.767

在构造函数中使用对象引用的意义在于它更具动态性。
假设我做了一个这样的构造函数：

```
public void main()
{
    var c = new Contact("europeroad",9999, "USA");
}

public Contact(string address, int zipcode, string country){
    this.Address = new Address(address,zipcode,country);
} 
```

这当然可以，但是如果您添加新字段会发生什么？region, createdon , ...
您必须调整 2 个构造函数和 2 个构造函数调用。
如果您按照您对对象引用的建议进行操作，您将获得以下结果：

```
public void main()
{
  var a = new Address();
  a.Street = "europeroad";
  a.Zipcode = 9999;
  a.Country = "USA";
  var c = new Contact(a);
}
public Contact(Address address){
    this.Address = address;
} 
```

在此处添加新字段只会导致更改主要方法（无需更改签名）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T08:08:40.460

这取决于您的用例、您从 UC 生成的域模型和系统序列图。老实说，我可以说这是非常常见的 UC，并且有很多解决方案。基于 Craig Larmans OO 分析和设计书：

UC：用户输入联系信息。系统检查信息的有效性。（我们可以详细说明此步骤是否有任何错误，现在我想简要解释一下，所以我不会详细说明...） 系统向用户显示成功消息。

据他们介绍，系统有联系的概念，联系包含地址电子邮件和电话。域模型有四个不同的概念，分别是联系人、地址、电子邮件和电话。根据 UC 和 Grasp Design 模式，您需要实现控制器对象来分离 UI 和 Bussines Logic。

联系人/某种结果指示 ContactController(用户、地址信息、电话信息)

因为联系人可以通过来自Controller的信息来表示，所以创建Contact对象更容易理解。我认为，设计比它消耗多少数据更重要。老实说，我可以说，如果你的对象消耗了这么多数据，那么你就有设计问题:)

# symfony - Symfony2：如何将 SonataAdminBundle 列表数据导出到 Excel 表？

> ID：10346806
> 
> 赞同：2
> 
> 时间：2012-04-27T07:50:25.497
> 
> 标签：symfony, export-to-excel, symfony-sonata, export-to-pdf

我需要通过 excel 或 pdf 导出奏鸣曲管理数据。我怎样才能做到这一点？有没有什么包可以帮助我做到这一点？

有任何想法吗！？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-22T14:07:49.977

您必须覆盖管理员**getExportFields()**方法。

如果实体有一些 (X) 对多或多对 (X) 关系，您必须覆盖所有字段

```
public function getExportFields()
{
     $exportFields = parent::getExportFields(); //It's not working in case of *-to many relation, so remove it, but it's ok for small customisation

     $exportFields["Date"] = 'date';             //if your date is an instance of DateTime, you have to format it
     $exportFields["User name"] = 'user.name';   // in case of *-to-many relations
     $exportFields["Status"] = 'statusAsString'; //for customise format implement getStatusAsString() in you entity
     return $exportFields;
} 
```

要自定义要下载的报告类型，您必须覆盖，删除默认的：

```
public function getExportFormats()
{
    return array(
        'json', 'xml', 'csv', 'xls'
    );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-04T14:57:10.317

我已经为 Symfony 和 Sonata 实现了 Bundle 以将列表导出为 PDF。你可以在这里得到它：[https](https://github.com/whyte624/sonata-admin-extra-export-bundle) ://github.com/whyte624/sonata-admin-extra-export-bundle 。它基于此处建议的解决方案：http: [//cristian-radulescu.ro/article/add-pdf-export-functionality-in-sonataadminbundle.html](http://cristian-radulescu.ro/article/add-pdf-export-functionality-in-sonataadminbundle.html)。我知道这个问题已经很老了，但希望它对其他人有帮助。

# git - 将存储库克隆到 GitHub

> ID：10346810
> 
> 赞同：22
> 
> 时间：2012-04-27T07:50:51.210
> 
> 标签：git, github, git-clone

我在本地使用 git 已经有一段时间了，并且有一个包含完整更改历史记录等的私有存储库。我现在想在 GitHub 上分享它，所以我需要从我的本地存储库克隆到一个新的 GitHub 存储库。我找不到任何方法来做到这一点。如何将我的所有历史记录上传到 GitHub？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-27T07:53:02.623

您不需要“克隆到 GitHub”。您只需在 GitHub 上创建一个存储库并将您的更改推送到那里：

```
$ cd your_local_repo
$ git remote add origin git@github.com:USERNAME/REPO_NAME.git
$ git push origin master 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-27T07:54:46.840

您只想在 GitHub 上的帐户上创建一个新存储库。假设您的帐户名称是`CraigH`，并且您称您为新存储库`NewRepo`（我知道这很有想象力），您只需（假设您在系统上正确设置了 GitHub 密钥）：

1.  将远程添加到本地存储库
    *   `git remote add origin git@github.com:CraigH/NewRepo.git`
2.  将你当前的历史推送到 GitHub
    *   `git push --set-upstream origin master`

从那时起，您在分支中的历史记录`master`就在 GitHub 的`master`分支中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T07:53:47.003

您可以通过推送到 GitHub 上的远程仓库来完成此操作。你应该得到整个历史和一切。

# linux - 使用 grep 搜索包含点的字符串

> ID：10346816
> 
> 赞同：233
> 
> 时间：2012-04-27T07:51:03.803
> 
> 标签：linux, grep

我正在尝试`0.49`使用命令搜索字符串（带点）

```
grep -r "0.49" * 
```

但是发生的事情是我也得到了不需要的结果，其中包含诸如`0449`等字符串`0949`。问题是 linux 将 dot(.) 视为任何字符并显示所有结果。但我只想得到“0.49”的结果。

* * *

## 回答 #1

> 赞同：285
> 
> 时间：2012-04-27T07:52:00.577

`grep`使用正则表达式；`.`表示正则表达式中的“任何字符”。如果您想要文字字符串，请使用`grep -F`,`fgrep`或转义`.`to `\.`。

不要忘记将字符串用双引号括起来。否则你应该使用`\\.`

因此，您的命令需要是：

```
grep -r "0\.49" * 
```

或者

```
grep -r 0\\.49 * 
```

或者

```
grep -Fr 0.49 * 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-04-27T07:52:16.653

`grep -F -r '0.49' *`将 0.49 视为“固定”字符串而不是正则表达式。这使得`.`它失去了它的特殊意义。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-04-27T07:52:22.473

您需要转义`.`as `"0\.49"`。

A`.`是匹配任何字符（换行符除外）的正则表达式元字符。要匹配文字句点，您需要对其进行转义。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-01-18T15:50:23.617

There are so many answers here suggesting to escape the dot with `\.` but I have been running into this issue over and over again: `\.` gives me the same result as `.`

However, these two expressions work for me:

```
$ grep -r 0\\.49 * 
```

And:

```
$ grep -r 0[.]49 * 
```

我在 Ubuntu 和 Archlinux 上使用“普通”的 bash shell。

*编辑，*或者根据评论：

```
$ grep -r '0\.49' * 
```

请注意，*单*引号在这里有所不同。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-03-21T14:04:02.673

您也可以使用“[.]”

```
grep -r "0[.]49" 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-04-27T07:53:27.590

只是逃避`.`

`grep -r "0\.49"`

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-04-27T07:52:45.267

逃生点。示例命令将。

```
grep '0\.00' 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2012-04-27T07:52:18.837

您可以使用 \ 转义点和其他特殊字符

例如。grep -r "0\.49"

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-11-18T07:17:48.407

您也可以使用 -- 选项进行搜索，该选项基本上会忽略所有特殊字符，并且不会被 grep 解释。

```
$ cat foo |grep -- "0\.49" 
```

# php - 如果出现错误消息，数据将清除

> ID：10346820
> 
> 赞同：0
> 
> 时间：2012-04-27T07:51:43.027
> 
> 标签：php, html

在我的注册表单中，如果用户单击提交时需要出现验证消息，则所有框中的整个文本都会消失，这意味着他们必须重新开始！

我需要添加什么 PHP 代码才能保留数据？

```
 Username<span class="required">*</span> 
        <input name="user_name" type="text" id="user_name" minlength="5" >

        Full Name<span class="required">*</span> 
        <input name="full_name" type="text" id="full_name" size="30" 

       Nationality <span class="required">*</span>
        <select name="nationality"  id="select8">
            <option value="" selected></option>
            <option value="Afghanistan">Afghanistan</option>
            <option value="Albania">Albania</option>
        </select>

 <p align="center">
      <input name="doRegister" type="submit" id="doRegister" value="Register">
      </p>
  EDIT: 
```

我试过这个：

```
 <?php
        $email_field = ($_POST['usr_email']);
        ?>
        Email<span class="required">*</span>
        <input type="text" id="usr_email3" name="usr_email" value="<?php echo   
        $email_field; ?>" /> 
```

但它说 usr_email 没有定义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:13:53.667

如 HTTP 规范中所述，HTTP 是无状态的。这意味着即使用户通过前一个页面到达该页面，服务器也不知道这一点。每个请求都是全新的，因此它不能只是将先前的输出发回。

您必须从 $_POST 中读取发送到您的表单的值，然后重新发送。例如：

```
<?php
    //If the POST parameter has been send, set it to the $username variable. Otherwise make it empty.
    $username = array_key_exists('username', $_POST) ? $_POST['username'] : '';
?>

<form name='f1' method='POST'>

<!-- Show username as its value, thus preserving state. -->
Name: <input type='text' value='<?php echo $username ?>' name='username' />
<input type='submit' value='Go' />

</form> 
```

对于`select`输入（通常是下拉菜单），您需要在正确的选项上设置 selected 属性。像这样：

```
<?php
    $gender = array_key_exists('gender', $_POST) ? $_POST['gender'] : 'unknown'; //Default to unknown
?>

<form name='f1' method='POST'>

<select name='gender'>

    <!-- The $gender will be the value of each option. -->
    <option <? if($gender == 'unknown') { ?> selected <? } ?> value='unknown'>Unknown</option>
    <option <? if($gender == 'male') { ?> selected <? } ?> value='male'>Male</option>
    <option <? if($gender == 'female') { ?> selected <? } ?> value='female'>Female</option>

</select>

<input type='submit' value='Go' />

</form> 
```

但是我仍然建议您购买一本合适的书，或阅读更多教程。在您作为开发人员感到更自在之后，您可以自己探索和找到这些解决方案，就像我们在这里所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:48:19.680

```
<input name="user_name" type="text" id="user_name" minlength="5" value="<?php if(isset($_POST['user_name'])) { echo $_POST['user_name']; } ?>" > 
```

# android - 用户设置 - 安卓

> ID：10346822
> 
> 赞同：2
> 
> 时间：2012-04-27T07:51:57.073
> 
> 标签：android, settings

如何在应用程序中进行更改，以便在应用程序重新启动时所有设置保持不变（例如，如果从应用程序中我选择了振动，那么当应用程序未运行时，如果我的手机在应用程序重新启动时处于振铃模式，它将自身设置为振动）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T07:58:21.327

实际上有多种方法可以持久化更改。[Android 文档](http://developer.android.com/guide/topics/data/data-storage.html)更详细地介绍了所有这些方法，但本质上是这五种方法。最简单的是`SharedPreferences`，可能。

`Shared Preferences`

将私有原始数据存储在键值对中。

`Internal Storage`

将私有数据存储在设备内存中。

`External Storage`

将公共数据存储在共享的外部存储上。

`SQLite Databases`

将结构化数据存储在私有数据库中。

`Network Connection`

使用您自己的网络服务器将数据存储在网络上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:54:23.400

使用共享首选项。您可以放置​​键值对并在需要时检索。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T07:54:37.193

您需要将这些设置存储在数据库中。关于如何使用它，请参阅[使用数据库](http://developer.android.com/guide/topics/data/data-storage.html#db)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T08:01:06.663

使用 SharedPreferences

保存您的设置：

```
SharedPreferences prefs = getSharedPreferences("myprefs",Context.MODE_PRIVATE);
SharedPreferences.Editor editor = prefs.edit(); 
editor.putString("email", "my_email@email.com"); 
editor.putString("name", "Albert"); 
editor.commit(); 
```

检索它们：

```
SharedPreferences prefs = getSharedPreferences("myprefs",Context.MODE_PRIVATE);   
String email = prefs.getString("email", "default@email.com"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T08:13:27.127

您可以做的是创建一个 PreferenceActivity ，例如：

```
public class Prefs  extends PreferenceActivity  {   
    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.preference);
    }

} 
```

在 res/xml 文件夹中添加带有此内容的preference.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <PreferenceCategory android:title="General" >
        <CheckBoxPreference
            android:key="notification"
            android:summaryOff="You will not receive any notification"
            android:summaryOn="Notifications are sent to your device"
            android:title="Get notification" />
    </PreferenceCategory>

</PreferenceScreen> 
```

在您的代码中，您现在可以执行以下操作：

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);
Boolean sendNotification = prefs.getBoolean("notification", false); 
```

# linux - 如何获取一条机器指令写入的地址？

> ID：10346828
> 
> 赞同：1
> 
> 时间：2012-04-27T07:52:15.327
> 
> 标签：linux, debugging, disassembly, instructions

现在我从 EIP 寄存器中得到了一个机器指令的地址。该机器指令可以更改某个内存区域的值，我确实想要但无法获得该内存的地址。

当然，我可以从机器指令'地址读取数据，但内容是机器指令，如：0x8b0c4d8b......，它是不可读的（我不能使用gdb之类的调试工具）。

如何获取一条机器指令将写入的地址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:22:01.480

如果您知道 EIP 指向的机器代码并且只想反汇编它，请执行以下操作（我以您的示例为例`0x8b0c4d8b`）：

```
#创建二进制文件
$ echo -en "\x8b\x0c\x4d\x8b" > foo.bin

#拆开它
$ objdump -D -b 二进制 -m i386 foo.bin

foo.bin：文件格式二进制

.data 部分的反汇编：

00000000 :
   0: 8b .byte 0x8b
   1: 0c 4d 或 $0x4d,%al
   3：8b .byte 0x8b

```

因此，在这种情况下，它不会更改任何内存位置，但如果确实如此，您可以从汇编代码中轻松看到它。

**编辑：**从评论看来，您想以编程方式执行此操作。看看[udis86](http://udis86.sourceforge.net/)。它允许[检查](http://udis86.sourceforge.net/manual/manual.html#id482430)指令的操作数。对于 ARM，请参阅[解除武装](https://launchpad.net/libdisarm)。

# arrays - CakePHP 使用 find() 从模型中检索数据。生产服务器上的不同数组键

> ID：10346833
> 
> 赞同：2
> 
> 时间：2012-04-27T07:52:26.353
> 
> 标签：arrays, cakephp, find, key

我的生产和开发服务器上有相同的代码，但是在使用 find('first') 检索数据时，我似乎得到了不同的数组键。

发展：

```
Array
(
    [Page] => Array
        (
            [title] => Welcome!
            [keywords] => keyword 1 keyword 2 keyword 3
        )

) 
```

生产：

```
 Array
(
    [0] => Array
        (
            [title] => Welcome!
            [keywords] => keyword 1 keyword 2 keyword 3
        )

) 
```

AppController 中的代码：

```
//get page title and keywords
        $currentPage = $this->Page->find('first', 
            array(
                'conditions' => array('Page.name' => $this->params['controller']),
                'fields' => array('Page.title', 'Page.keywords')
            ));

        pr($currentPage); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:30:01.360

我记得这个...：PI以前也有同样的问题

它是由php版本或mysql版本引起的。检查您的服务器是否通过了蛋糕版本的最低要求

[cakephp2.0的要求](http://book.cakephp.org/2.0/en/installation.html)

[cakephp1.3的要求](http://book.cakephp.org/1.3/en/view/908/Requirements)

您可以使用 phpinfo() 来检查它们；

希望这可以帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-27T08:37:36.073

采用`$this->set(compact('currentPage',$currentPage));`

# javascript - 错误消息“sun.plugin2.main.client.PluginMain：无法识别的消息 ID 27”

> ID：10346838
> 
> 赞同：1
> 
> 时间：2012-04-27T07:52:35.077
> 
> 标签：javascript, applet

我有一个应用程序，我们在其中添加注释。每当我试图在小程序视图中添加注释时，它不会直接反射。在我收到错误消息的控制台中。sun.plugin2.main.client.PluginMain：无法识别的消息 ID 27 有时注释会立即反映，但很多时候我们必须这样做 4-5 次......它影响了我们的应用程序。

早些时候我们使用 document.viewer.ExtQuery js 函数，但现在我们已将其更改为 document.viewer.ExtCmd 函数 ...可能是这种情况....请一些建议解决方法或者我必须更改一些 java 设置...请建议！

# cassandra - 如何从 cassandra 中检索时间戳？

> ID：10346839
> 
> 赞同：12
> 
> 时间：2012-04-27T07:52:37.370
> 
> 标签：cassandra, command-line-interface, cql, pycassa

在下面的 cassandra 中，“获取结果”..我们可以检索列名和值。但是如何检索时间戳..有没有更好的主意来使用时间戳来获取值

```
[default@sample]get user[bob];                                        
=> (column=name, value=bobdroid, timestamp=1335361733545850)
=> (column=email, value=bob@gmail.com, timestamp=1335361733545850)
=> (column=age, value=23, timestamp=1335361733545850)
=> (column=password, value=MTIz, timestamp=1335361733545850)
Returned 4 results.
Elapsed time: 4 msec(s). 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2014-04-11T16:17:28.677

刚刚跑过这个帖子，发现答案已经过时了。`writetime()`CQL 现在使用以下函数公开内部时间戳：

```
select key,columnfoo,writetime(columnfoo) from tablebar; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T22:34:58.020

不建议在客户端代码中直接使用列 Cassandra 时间戳；理想情况下，您应该以最适合您的架构的任何形式添加自己的时间戳。但如果你真的想要，它可以通过 thrift 接口来完成（并且，通过扩展，某些库使用 thrift 接口）。

对于 pycassa 案例，您只需要添加调用`include_timestamp=True`的参数即可`.get()`。对于 CQL、cqlsh 和 cassandra-cli 的情况，我相信完全没有办法获得时间戳，抱歉。

# perl - Catalyst / FCGI：myapp_fastcgi.pl 在 Windows x64 下无法工作

> ID：10346847
> 
> 赞同：1
> 
> 时间：2012-04-27T07:53:11.787
> 
> 标签：perl, catalyst, fastcgi

我在尝试在 windows x64（Win 2008 R2 和 Windows 7）下使用 myapp_fastcgi.pl 脚本时遇到了 Calatylst 的问题。

由于某些原因，当我尝试通过 http 服务器访问脚本时，我得到“此应用程序遇到内部错误”（我在 IIS7.5 和 Apache 2.4 中都得到了这个）。为了找出问题所在，我在 DOS 控制台中运行了脚本，得到了以下信息：

```
Use of uninitialized value $value in pattern match (m//) at D:/perl/site/lib/Config/General.pm line 872.
Use of uninitialized value in concatenation (.) or string at D:/perl/site/lib/Plack/Handler/FCGI.pm line 114, <DATA> line 998.
Use of uninitialized value in quotemeta at D:/perl/site/lib/Plack/Handler/FCGI.pm line 116, <DATA> line 998.
Use of uninitialized value in string eq at D:/perl/site/lib/Catalyst.pm line 2770, <DATA> line 998.
Use of uninitialized value $host in substitution (s///) at D:/perl/site/lib/Catalyst/Engine.pm line 444, <DATA> line 998.
Use of uninitialized value $host in concatenation (.) or string at D:/perl/site/lib/Catalyst/Engine.pm line 451, <DATA> line 998.
Use of uninitialized value $host in concatenation (.) or string at D:/perl/site/lib/Catalyst/Engine.pm line 459, <DATA> line 998.
Use of uninitialized value in string eq at D:/perl/site/lib/Catalyst/Action/RenderView.pm line 51, <DATA> line 998.
binmode() on unopened filehandle GEN2 at D:/perl/site/lib/Plack/Handler/FCGI.pm line 165, <DATA> line 998.
print() on unopened filehandle GEN2 at D:/perl/site/lib/Plack/Handler/FCGI.pm line 177, <DATA> line 998.
Use of uninitialized value in string eq at D:/perl/site/lib/Catalyst.pm line 1817, <DATA> line 998.
print() on unopened filehandle GEN2 at D:/perl/site/lib/Plack/Handler/FCGI.pm line 179, <DATA> line 998. 
```

我不介意初始化错误，因为在这种情况下，http 服务器设置的大多数环境都丢失了。然而，当我在 x32 环境（Windows XP）下尝试完全相同的脚本时，我得到以下输出，“GEN2”文件处理程序上的三个错误引起了我的兴趣：

```
<same init errors>
Use of uninitialized value in string eq at D:/Perl/site/lib/Catalyst/Action/RenderView.pm line 51, <DATA> line 998.
Status: 302 Found
Location: http:///login
Content-Length: 292
Content-Type: text/html; charset=utf-8
Set-Cookie: myapp_session=1e5994a41ea40c41764c4f2c0dc45592ef4b520f; path=/;
expires=Wed, 25-Apr-2012 17:14:25 GMT; HttpOnly
X-Catalyst: 5.90011

Use of uninitialized value in string eq at D:/Perl/site/lib/Catalyst.pm line 1817, <DATA> line 998.
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/x
html1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>Moved</title>
  </head>
  <body>
     <p>This item has moved <a href="http:///login">here</a>.</p>
  </body>
</html> 
```

如果它工作正常，这听起来更像是我应该在我的 x64 环境中获得的东西。

在 FCGI.pm 模块中查看了一下提示我，由于某些原因 *STDIN 和 *STDOUT 在 x64 下未打开，但我不知道为什么，对此我没有错误。所以我来这里寻求任何建议或想法，或者如果有人以前遇到过这种问题并解决了它，我很想知道解决方案:)

关于我所做的测试的更多信息：

*   我对 x64 下的 myapp_server.pl 和 myapp_cgi.pl 没有任何问题，这些工作正常。
*   在 Windows 2008 R2 上卸载 Perl x64 并用 x32 版本替换它并不能解决它，我得到相同的 GEN2 错误（顺便说一下，我正在使用 ActivePerl）
*   我拥有所有测试的管理员权限，并且在 x64 环境中禁用了 UAC

提前致谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T15:57:22.830

这需要进一步测试，但经过模块比较后，发现 XP 上的 Plack::Handler::FCGI 版本比 ppm 存储库中可用的版本旧，并且我正在服务器和 Windows 7 上安装.

两个版本都有不同的方式来打开标准输入、标准输出和标准错误。

较旧的 FCGI.pm 版本（无 GEN2 错误）：

```
( .. some code ..)

my %env;
    my $request = FCGI::Request(
        \*STDIN, \*STDOUT,

        ($self->{keep_stderr} ? \*STDOUT : \*STDERR), \%env, $sock,
        ($self->{nointr} ? 0 : &FCGI::FAIL_ACCEPT_ON_INTR),
    ); 
```

新的 FCGI.pm 版本（GEN2 错误）：

```
( .. some code ..)

   @{$self}{qw(stdin stdout stderr)} 
      = (IO::Handle->new, IO::Handle->new, IO::Handle->new);

    my %env;
    my $request = FCGI::Request(

        $self->{stdin}, $self->{stdout},
        ($self->{keep_stderr} ? $self->{stdout} : $self->{stderr}), \%env, $sock,
        ($self->{nointr} ? 0 : &FCGI::FAIL_ACCEPT_ON_INTR),
    ); 
```

随后的交互是通过 $self->{stdxxx} 而不是像以前那样通过 *STDxxx 完成的。

我不确定它打算如何在最新版本中工作，但是用旧的替换新的 Plack 模块 FCGI.pm 可以消除所有系统上的 GEN2 错误。我会问Plack家伙的详细信息...

再次感谢您的评论，它为我指明了正确的方向。

# asp.net-mvc-3 - 在 ASP .NET MVC3 中注册路由

> ID：10346851
> 
> 赞同：0
> 
> 时间：2012-04-27T07:53:22.020
> 
> 标签：asp.net-mvc-3

我打算在 ASP .NET MVC3 中注册如下路由：

```
routes.MapRoute(
            "SearchRoute", // Route name
            "Report/Search/{code}/{quarter}/{year}/{receivedBegin}/{receivedEnd}/{transactionBegin}/{transactionEnd}/{page}", // URL with parameters
            new {
                controller = "Report",
                action = "Search",
                page = UrlParameter.Optional } // Parameter defaults
        ); 
```

该路由将链接到名为 Report 的控制器中的此函数：

```
public ActionResult Search(string code, int? quarter, int? year, 
            DateTime? receivedBegin, DateTime? receivedEnd,
            DateTime? transactionBegin, DateTime? transactionEnd, int? page=1) 
```

我预计 Html.ActionLink 生成的指向该函数的链接将生成如下：Report/Search/10/2/2012/04-30-2012/04-01-2012/04-30-2012

当我使用 Html.ActionLink 生成链接时，生成的链接如下：

```
Report/Search?code=100&quarter=2&year=2012&receivedBegin=04-01-2012&receivedEnd=04-30-2012&transactionBegin=04-01-2012&transactionEnd=04-30-2012 
```

我应该怎么做才能产生预期的结果？谢谢你。

**更新**

这是我用来创建链接的代码：

```
@Html.ActionLink("First", "Search", new { 
    code = currentCode, 
    quarter = currentQuarter, 
    year = currentYear, 
    receivedBegin = currentReceivedBegin, 
    receivedEnd = currentReceivedEnd, 
    transactionBegin = currentTransactionBegin, 
    transactionEnd = currentTransactionEnd }, null). 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:09:43.990

> 不，这不是我注册的第一条路线。我必须先注册吗？

是的。`RegisterRoutes`您的方法中的规则`global.asax`应该按照具体的顺序从上到下，因此这条路线绝对应该在（或至少接近）顶部。

默认路由应该始终是最后一个。

# java - 如何在休眠中生成序列

> ID：10346858
> 
> 赞同：2
> 
> 时间：2012-04-27T07:53:40.453
> 
> 标签：java, hibernate

我使用以下命令创建了一个名为 hibernate_sequnce 的序列

```
create sequence hibernate_sequence start with 400; 
```

这是我的休眠注释 dao

```
@Entity
@Table(name="T_BIZ_TERM")
public class BizTerm implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = -3056055722354292136L;

    private Long bizTermId;
@Id
    @GeneratedValue()
    @Column(name="BIZ_TERM_ID")
    public Long getBizTermId() {
        return bizTermId;
    }
    public void setBizTermId(Long bizTermId) {
        this.bizTermId = bizTermId;
    }
} 
```

为了向表中插入新记录，休眠生成错误的查询以获取下一个序列值..休眠总是发出这个查询..不管我做什么..

```
select nextval(hibernate_sequnce) 
```

我正在使用 oracle 10G，它总是报告以下错误..

```
ORA-00923: FROM keyword not found where expected 
```

发出的查询应该是`select hibernate_sequnce.nextval from dual;` 现在要做什么，我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:04:24.533

您是否配置了 Oracle 方言？

```
<property name="hibernate.dialect" value="org.hibernate.dialect.Oracle10gDialect" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:10:50.087

我为 Oracle 序列做了类似的事情。

```
@Id
@Column(name = "BIZ_TERM_ID")
@SequenceGenerator(name = "myKeySeq", sequenceName = "hibernate_sequence ", allocationSize = 20)
@GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "myKeySeq")
private Long bizTermId;; 
```

不过，我会比 hibernate_sequence 更好地命名序列。尝试类似 biz_term_sequence 的东西。您将需要每个表主键的不同序列。

# java - 在 Android 应用程序中设置通知？

> ID：10346861
> 
> 赞同：1
> 
> 时间：2012-04-27T07:53:47.567
> 
> 标签：java, android

我有求职应用程序，它通过 httppost 工作以激活 PHP 功能并从服务器上的 mysql 数据库中过滤（取决于用户选择的搜索类型）数据（JSon 格式）。
我现在要做的是为通知设置一个复选框，如果用户在单击搜索之前检查它，以便能够在状态栏中获得有关他第一次没有看到的新工作的通知，例如（“您的搜索中有 10 个新工作”）。在他点击通知后，应用程序将在页面上打开他已经看过的工作列表+新工作，只是我想以某种方式向用户展示哪些工作是新的。
我在想也许我可以用不同的颜色包装新数据。
谁能告诉我我该怎么做？
当数据库有新数据时，我现在该如何监控它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:25:21.513

[将ContentObserver](http://developer.android.com/reference/android/database/ContentObserver.html "内容观察者")注册到数据库中，并在更改时更新您当前拥有的通知（通过相同的通知 ID）。

# html - 单击锚点搜索不存在的重复嵌套层次结构中的页面

> ID：10346862
> 
> 赞同：1
> 
> 时间：2012-04-27T07:53:55.573
> 
> 标签：html, nested, anchor, hierarchy, broken-links

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:01:28.203

问题是因为您使用的是页面的相对路径。

它第一次起作用，因为（我假设）您位于根目录中。因此，单击该链接会将您带到“Pages/Contact/Phone.aspx”。在 中`phone.aspx`，如果您再次单击该链接，它会查找此页面：`Pages/Contact/Pages/Contact/Phone.aspx`。

您需要在`/`URL 的开头添加 a 以使其相对于站点的根目录：

```
<ul>
    <li><a href="/Pages/Contact/Phone.aspx" ><span>Phone</span></a></li>
    <li><a href="/Pages/Contact/Email.aspx" ><span>Email</span></a></li>
</ul> 
```

或者，由于您使用的是 ASP.Net，您可以使用该`ResolveUrl()`函数来确保您的所有链接都相对于解决方案的根：

```
<ul>
    <li><a href="<%= ResolveUrl("~/Pages/Contact/Phone.aspx") %>"><span>Phone</span></a></li>
    <li><a href="<%= ResolveUrl("~/Pages/Contact/Email.aspx") %>"><span>Email</span></a></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:57:02.443

我相信这`href=""`是你的问题。

尝试`href="#"`或`href="javascript:;"`

# visual-c++ - Outlook插件的VSTO中的功能区回调方法实现

> ID：10346863
> 
> 赞同：3
> 
> 时间：2012-04-27T07:53:57.717
> 
> 标签：visual-c++, callback, outlook, ribbon, outlook-addin

我必须在功能区回调中实现 onbutton 单击活动，并且我有这个 xml。

```
<button id="GoToAppConfiguration" size="large" label="Application Configuration" imageMso="AutoArchiveSettings" onAction="OnActionCallback"/> 
```

我在功能区回调中使用这样的功能：

```
public void OnActionCallback(Office.IRibbonControl control, bool isPressed)
    {
        if (control.Id == "GoToAppConfiguration")
        {
            MessageBox.Show("You clicked " + control.Id);
        }
        else
        {
            MessageBox.Show("You clicked a different control.");
        }
    } 
```

但上面的代码不起作用..

我认为控制不会自行发挥作用。

请帮忙 ..

# 尼基尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T12:39:22.127

[您的回调方法签名与功能区 XML 正在查找的内容](http://msdn.microsoft.com/en-us/library/aa722523%28v=office.12%29.aspx)不匹配。您需要省略第二个参数`isPressed`。

```
public void OnActionCallback(Office.IRibbonControl control)
{
    if (control.Id == "GoToAppConfiguration")
    {
        MessageBox.Show("You clicked " + control.Id);
    }
    else
    {
        MessageBox.Show("You clicked a different control.");
    }
} 
```

# jquery - jQuery masonry 插件未激活

> ID：10346865
> 
> 赞同：0
> 
> 时间：2012-04-27T07:54:05.150
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我正在尝试实现 jquery masonry images 插件，它似乎设置正确，但它不起作用！

我使用浏览器进行了调试，没有看到任何错误。

我可能做错了什么？代码如下。谢谢。费萨尔

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
<script src="/assets/jquery.js"></script>
<script src="/assets/jquery.masonry.min.js"></script>
<style>
.item {
 width: 200px;
.... }

</style>
<div id="container">
<div class="item">
....
</div>

<script>
$(function(){
    var $container = $('#container');
    $container.imagesLoaded(function(){
      $container.masonry({
        itemSelector : '.tile',
        columnWidth : 240
      });
    });
});
</script>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:43:36.050

我可以从您的代码中看到的唯一问题是这一行：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script> 
```

您尚未在指向 jQuery 文件的链接的开头添加“http:”。不应该是：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script> 
```

您可以上传页面的 jsFiddle 版本吗？

# javascript - Mccluskey 算法，javascript

> ID：10346866
> 
> 赞同：0
> 
> 时间：2012-04-27T07:54:09.637
> 
> 标签：javascript, debugging

```
<html>
<body>

<script type="text/javascript">
start();

function start() {

    var val = "0,1";

    var n = 5;

    var chars = ['a', 'b', 'c', 'd', 'e'];

    gVars = chars.slice(0, n);

    for (var i = 0; i < gVars.length; i++)

    document.write(gVars[i] + "<br />");

    var termsStr = val.split(',');

    for (var i = 0; i < termsStr.length; i++)

    document.write(termsStr[i] + "<br />");

    var gOrigTerms = [];

    var maxterm = Math.pow(2, termsStr.length) - 1;

    document.write("maxterm: " + maxterm + "<br />");

    for (var i = 0; i < termsStr.length; i++) {
        gOrigTerms[i] = parseInt(termsStr[i]);
        document.write(gOrigTerms[i] + "<br />");
        if (gOrigTerms[i] > maxterm) document.write("Invalid term in term list." + "<br />");
    }

    gFormula = new Formula(gVars, gOrigTerms);

    document.write(gFormula);

    gFormula.toString();

    gFormula.reduceToPrimeImplicants(); //here the breakpoint is inserted
}

function Formula(vars, terms)

{

    this.vars = vars;

    this.termList = [];

    for (var i = 0; i < terms.length; i++) {
        this.termList[i] = new Term(Dec2Bin(terms[i], vars.length));
        document.write("this.termList" + this.termList[i] + "<br />");
    }
    this.orginalTermList = [];
    document.write("this.orginalTermList" + this.orginalTermList + "<br />");
}

function Dec2Bin(dec, size) {
    var bits = [];

    for (var bit = 0; bit < size; bit++)

    {
        bits[bit] = 0;
    }

    var i = 0;

    while (dec > 0)

    {
        if (dec % 2 == 0)

        {
            bits[i] = 0;
        } else

        {
            bits[i] = 1;
        }

        i++;

        dec = (dec / 2) | 0;

        // Or with zero casts result to int (who knows why...) 
    }

    bits.reverse();
    return bits;

}

function Term(varVals)

{
    this.varVals = varVals;
    document.write("this.varVals: " + this.varVals);

}

function reduceToPrimeImplicants() //there is some problem with this function
{

    this.originalTermList = this.termList.slice(0);

    var numVars = this.termList[0].getNumVars();

    var table = [];

    for (var dontKnows = 0; dontKnows <= numVars; dontKnows++) {
        table[dontKnows] = [];
        for (var ones = 0; ones <= numVars; ones++) {
            table[dontKnows][ones] = [];
        }
        table[dontKnows][numVars + 1] = [];
    }

    table[numVars + 1] = [];

    table[numVars + 1][numVars + 1] = [];

    for (var i = 0; i < this.termList.length; i++) {
        var dontCares = this.termList[i].countValues(DontCare);
        var ones = this.termList[i].countValues(1);
        var len = table[dontCares][ones].length;
        table[dontCares][ones][len] = this.termList[i];
    }

    for (var dontKnows = 0; dontKnows <= numVars - 1; dontKnows++) {
        for (var ones = 0; ones <= numVars - 1; ones++) {
            var left = table[dontKnows][ones];
            var right = table[dontKnows][ones + 1];
            var out = table[dontKnows + 1][ones];

            for (var leftIdx = 0; leftIdx < left.length; leftIdx++) {
                for (var rightIdx = 0; rightIdx < right.length; rightIdx++) {
                    var combined = left[leftIdx].combine(right[rightIdx]);

                    if (combined != null) {
                        if (out.indexOf(combined) < 0) {
                            var len = out.length;
                            out[len] = combined;
                        }
                        if (this.termList.indexOf(left[leftIdx]) >= 0) {
                            this.termList.splice(this.termList.indexOf(left[leftIdx]), 1);
                        }
                        if (this.termList.indexOf(right[rightIdx]) >= 0) {
                            this.termList.splice(this.termList.indexOf(right[rightIdx]), 1);
                        }
                        if (this.termList.indexOf(combined) < 0) {

                            var len = this.termList.length;
                            this.termList[len] = combined;
                        }
                    }
                }
            }
        }
    }
}

function getNumVars()

{
    return this.varVals.length;
}

function countValues(value)

{
    result = 0;
    for (var i = 0; i < this.varVals.length; i++) {
        if (this.varVals[i] == value) {
            result++;
        }
    }

    return result;
}

function combine(term)

{
    var diffVarNum = -1; // The position where they differ 
    for (var i = 0; i < this.varVals.length; i++) {
        {
            if (this.varVals[i] != term.varVals[i])

            if (diffVarNum == -1) {
                diffVarNum = i;
            } else { // They're different in at least two places return null; } 
            }
        }

        if (diffVarNum == -1)

        {
            // They're identical return null; 
        }

        resultVars = this.varVals.slice(0);

        resultVars[diffVarNum] = DontCare;

        return new Term(resultVars);

    }
</script>

</body>
</html> 
```

在上面的代码中，这并不完整，但它实现了 quine Mccluskey 算法。调试时出现问题。

如果在调试器处插入断点，`gFormula.reducetoPrimeImplicants();`则不会进入该函数。这是到目前为止代码中调用的最后一个函数。但是，它确实转到`start()`，这是第一个功能。

功能上存在一些问题，`reducetoPrimeImplicants();`因为它也会在 Internet Explorer 中出现错误。

我无法找出错误。如果我`reducetoPrimeImplicants();`从代码中删除函数，则工作正常。

拜托，有人能告诉我为什么调试器不进入`reducetoPrimeImplicants();`。

我正在使用 Firebug 调试器。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:01:44.053

您页面`combine()`中的最后一个函数缺少右大括号。

如果你不介意，一个建议：请使用[http://jsbeautifier.org/](http://jsbeautifier.org/)或一些类似的工具来更好地缩进你的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:16:13.980

你`For loop`有两个起始大括号。

```
 for (var i = 0; i < this.varVals.length; i++) {
        { 
```

所以删除一个。这应该可以解决您的问题。

# javascript - 根据选择的单选按钮数量调整 Div 宽度

> ID：10346867
> 
> 赞同：-5
> 
> 时间：2012-04-27T07:54:14.577
> 
> 标签：javascript, jquery

基本上默认情况下打开了 2 个 div，左边的一个总是在那里，然后你有 3 个单选按钮。必须选择至少一个（不能单独拥有“默认”列）。默认情况下，“默认” div 和“1”在那里，“2”和“3”是不可见的（显示：无）。每个单选按钮都链接到特定的 div，因此当单击时，jQuery 将动画宽度以将选定的 div 合并到与其他可见 div 的整体 div 中。jQuery 如何实现这一点？

[图片](http://imgur.com/HGvJ9)<-----我有一个链接到我为更好地理解而制作的图片

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:19:13.607

jsFiddle：http: [//jsfiddle.net/K8TAS/90/](http://jsfiddle.net/K8TAS/90/)

```
<input type="checkbox" value="1" checked disabled/>
<input type="checkbox" value="2"/>
<input type="checkbox" value="3"/>

<br/><br/>

<div style="height:200px;width:100px;float:left;background:yellow;" class="resizeDiv" id="div0">Default</div>
<div style="height:200px;width:100px;float:left;background:red;" class="resizeDiv" id="div1">1</div>
<div style="height:200px;width:100px;float:left;background:blue;display:none;" class="resizeDiv" id="div2">2</div>
<div style="height:200px;width:100px;float:left;background:green;display:none;" class="resizeDiv" id="div3">3</div>

<script>    
    $("input[type=checkbox]").click( function()
    {
        var amount = 2;

        $("input[type=checkbox]").each( function()
        {
            if ( $(this).val() != "1" )
            {
                if ( $(this).is(":checked") )
                {
                    $( "#div" + $(this).val() ).show();
                    amount++;
                }
                else
                {
                    $( "#div" + $(this).val() ).hide();
                }
            }
        });

        $(".resizeDiv").each( function()
        {
            $(this).width( 200 / amount );    
        });
    });
</script>
​ 
```

# c# - 如何从 C# 中的 ASPNETDB.NET 表中获取用户 ID？

> ID：10346869
> 
> 赞同：1
> 
> 时间：2012-04-27T07:54:17.800
> 
> 标签：c#, asp.net, userid

您好，谁能帮我如何获取用户的用户 ID？如果我写 User.Identity.Name 我得到用户的名字，如果我写 User.IsInRole 我得到用户的角色。我必须写什么才能获得用户ID？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:01:29.397

尝试这个 -

```
MembershipUser user = Membership.GetUser(User.Identity.Name);
Guid userId = (Guid)user.ProviderUserKey; 
```

# mysql - MySql：将每列的所有行的总和显示为最后的额外行

> ID：10346878
> 
> 赞同：1
> 
> 时间：2012-04-27T07:54:41.583
> 
> 标签：mysql

如何获得结果集所有行的每一列的总和？我的意思是我想将 sums-row 显示为我的结果集的最后一行。

我的查询如下所示：

```
select f.filename,  
count(distinct case when v.rUser like '%bike%' then 1 else null end) as bikeUser, 
count(distinct case when v.rUser like '%Pedestrian%' then 1 else null end) as pedestrianUser,  
count(distinct case when d.weather like '%clear%' then 1 else null end) as clearWeather, 
count(case when m.extras like '%hat%' then 1 else null end) as hatExtras 
from VMdata v  
inner join files f on v.id = f.id 
inner join DMdata d on f.id = d.id 
inner join MultiFiledata m on f.id = m.id 
where f.filename in (X,Y,Z) group by f.filename; 
```

当我在“group by”子句之后使用**with roll up 时**，它给了我“group by 子句”生成的组的总和（水平总和），而我需要最后每列的垂直总和。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T11:27:53.880

您的 ROLLUP 已经正确，这确实`COUNT(CASE WHEN Field = 'Blah' THEN 1 ELSE 0 END)`是您的查询不起作用的主要原因

您必须执行以下任一操作：

```
COUNT(CASE WHEN Field = 'Blah' THEN 1 END) 
```

或者

```
SUM(CASE WHEN Field = 'Blah' THEN 1 ELSE 0 END) 
```

但是由于 MySQL 在布尔类型和整数类型之间具有双重性，就像在 C 语言中一样，因此您也可以这样做：

```
SUM(Field = 'Blah') 
```

这是您的错误查询（错误结果）：[http ://www.sqlfiddle.com/#!2/70187/1](http://www.sqlfiddle.com/#!2/70187/1)

```
create table ProductInventory(
  ProductCode varchar(10) not null,
  Location varchar(50) not null
);

insert into ProductInventory(ProductCode,Location) values('CPU','US');
insert into ProductInventory(ProductCode,Location) values('CPU','US');
insert into ProductInventory(ProductCode,Location) values('CPU','CN');
insert into ProductInventory(ProductCode,Location) values('KB','CN');
insert into ProductInventory(ProductCode,Location) values('KB','JP');
insert into ProductInventory(ProductCode,Location) values('KB','US');
insert into ProductInventory(ProductCode,Location) values('MOUSE','US');
insert into ProductInventory(ProductCode,Location) values('MOUSE','CN'); 
```

不正确的输出：

```
PRODUCTCODE USQTY   CHINAQTY
CPU         3       3
KB          3       3
MOUSE       2       2
            8       8 
```

这是正确的查询：[http ://www.sqlfiddle.com/#!2/70187/2](http://www.sqlfiddle.com/#!2/70187/2)

```
select ProductCode, 
    COUNT(CASE WHEN Location = 'US' THEN 1 END) as UsQty,
    COUNT(CASE WHEN Location = 'CN' THEN 1 END) as ChinaQty
from ProductInventory
group by ProductCode with rollup 
```

正确的输出：

```
PRODUCTCODE     USQTY   CHINAQTY
CPU             2       1
KB              1       1
MOUSE           1       1
                4       3 
```

请不要坚持这是正确的，这是**非常不正确**的：

```
COUNT(CASE WHEN Location = 'US' THEN 1 ELSE 0 END) AS UsQty 
```

您必须这样做（正确）：

```
COUNT(CASE WHEN Location = 'US' THEN 1 END) AS UsQty 
```

或者这个（正确）：[http ://www.sqlfiddle.com/#!2/70187/5](http://www.sqlfiddle.com/#!2/70187/5)

```
SUM(CASE WHEN Location = 'US' THEN 1 ELSE 0 END) AS UsQty 
```

或者这个（正确）：[http ://www.sqlfiddle.com/#!2/70187/6](http://www.sqlfiddle.com/#!2/70187/6)

```
SUM(CASE WHEN Location = 'US' THEN 1 END) AS UsQty 
```

或者尝试利用 MySql 在布尔和整数之间具有对偶性的事实（正确）：[http ://www.sqlfiddle.com/#!2/70187/4](http://www.sqlfiddle.com/#!2/70187/4)

```
SUM(Location = 'US') AS UsQty 
```

* * *

**底线**

请不要使用这个（不正确）：[http ://www.sqlfiddle.com/#!2/70187/3](http://www.sqlfiddle.com/#!2/70187/3)

```
COUNT(Location = 'US') as UsQty 
```

请不要也使用它（不正确，类似于您的查询）：[http ://www.sqlfiddle.com/#!2/70187/1](http://www.sqlfiddle.com/#!2/70187/1)

```
COUNT(CASE WHEN Location = 'US' THEN 1 ELSE 0 END) as UsQty 
```

* * *

顺便说一句，这也有效，这是你找出原因;-)

```
COUNT(CASE WHEN Location = 'US' THEN 1976 END) AS UsQty 
```

* * *

**更新**

我有一个暗示，这就是你需要的：

```
create table Product
(
  ProductCode varchar(10) not null primary key,
  ProductName varchar(100) not null 
);

insert into Product(ProductCode,ProductName) values
('CPU','Central Processing Unit'),
('KB','Keyboard'),
('MSE','Mouse'),
('RAM', 'Random Access Memory');

create table ProductInventory(
  ProductCode varchar(10) not null,
  Location varchar(50) not null
);

insert into ProductInventory(ProductCode,Location) values
('CPU','US'),
('CPU','PH'),
('CPU','PH'),
('KB','PH'),
('KB','US'),
('KB','US'),
('MSE','US'),
('MSE','JP');

select p.ProductCode, 
    coalesce(SUM(i.Location = 'US'),0) as UsQty,
    coalesce(SUM(i.Location = 'PH'),0) as PhilippinesQty
from Product p
left join ProductInventory i on i.ProductCode = p.ProductCode
group by p.ProductCode with rollup 
```

输出：

```
ProductCode     UsQty           PhilippinesQty
CPU             1               2
KB              2               1
MSE             1               0
RAM             0               0
                4               4 
```

现场测试：[http ://www.sqlfiddle.com/#!2/2bb09/1](http://www.sqlfiddle.com/#!2/2bb09/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:37:10.433

使用评估时不要使用 COUNT 进行计数；尽管有这个名字，SUM 会根据条件产生正确的计数结果：

鉴于此：[http ://www.sqlfiddle.com/#!2/79375/1](http://www.sqlfiddle.com/#!2/79375/1)

```
create table ProductInventory(
  ProductCode varchar(10) not null,
  Location varchar(50) not null
);

insert into ProductInventory(ProductCode,Location) values('CPU','US');
insert into ProductInventory(ProductCode,Location) values('CPU','US');
insert into ProductInventory(ProductCode,Location) values('CPU','ARM');
insert into ProductInventory(ProductCode,Location) values('KB','CN');
insert into ProductInventory(ProductCode,Location) values('KB','PH');
insert into ProductInventory(ProductCode,Location) values('KB','US');
insert into ProductInventory(ProductCode,Location) values('MOUSE','AA');
insert into ProductInventory(ProductCode,Location) values('MOUSE','BB');

select ProductCode, COUNT(CASE WHEN Location = 'US' THEN 1 ELSE 0 END) as Qty
from ProductInventory
group by ProductCode
order by ProductCode 
```

这将产生不正确的结果：

```
PRODUCTCODE QTY
CPU         3
KB          3
MOUSE       2 
```

改用 SUM，正确的结果：[http ://www.sqlfiddle.com/#!2/79375/3](http://www.sqlfiddle.com/#!2/79375/3)

```
select ProductCode, SUM(Location = 'US') as Qty
from ProductInventory
group by ProductCode
order by ProductCode 
```

这将导致：

```
PRODUCTCODE QTY
CPU         2
KB          1
MOUSE       0 
```

COUNT 通过计算值或表达式的非空性来工作

* * *

如果您仍想使用 COUNT，请将任何非空值传递给`COUNT`; 并且不要使用`ELSE NULL END`，您的查询会看起来很乏味，只是说:-) [http://www.sqlfiddle.com/#!2/79375/4](http://www.sqlfiddle.com/#!2/79375/4)

```
select ProductCode, COUNT(CASE WHEN Location = 'US' THEN Location END) as Qty
from ProductInventory
group by ProductCode
order by ProductCode 
```

输出：

```
PRODUCTCODE QTY
CPU         2
KB          1
MOUSE       0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:31:37.947

您可以创建一个临时表 (#mytemptable) 并将总和添加为最后一个条目，然后返回创建的临时表的选择。但这仅适用于我认为的存储过程。

```
select f.filename,  
count(case when v.rUser like '%bike%' then 1 else 0 end) as bikeUser, 
count(case when v.rUser like '%Pedestrian%' then 1 else 0 end) as pedestrianUser,  
count(case when d.weather like '%clear%' then 1 else 0 end) as clearWeather, 
count(case when m.extras like '%hat%' then 1 else 0 end) as hatExtras 
INTO #myTempTable from VMdata v  
inner join files f on v.id = f.id 
inner join DMdata d on f.id = d.id 
inner join MultiFiledata m on f.id = m.id 
where f.filename in (X,Y,Z) group by f.filename; 

INSERT INTO #myTempTable select(create the sum here but care that you have the same columns)

SELECT * FROM #myTempTable 
```

只需一个选择，您就可以使用命令“UNION”来完成

***编辑：27.04。11:55**

```
select f.filename,  
count(case when v.rUser like '%bike%' then 1 else 0 end) as bikeUser, 
count(case when v.rUser like '%Pedestrian%' then 1 else 0 end) as pedestrianUser,  
count(case when d.weather like '%clear%' then 1 else 0 end) as clearWeather, 
count(case when m.extras like '%hat%' then 1 else 0 end) as hatExtras 
from VMdata v  
inner join files f on v.id = f.id 
inner join DMdata d on f.id = d.id 
inner join MultiFiledata m on f.id = m.id 
where f.filename in (X,Y,Z) group by f.filename;
UNION
SELECT SUM(bikeUser), SUM(pedestrianUser), SUM(clearWeather), SUM(hatExtras)
FROM (
select f.filename,  
count(case when v.rUser like '%bike%' then 1 else 0 end) as bikeUser, 
count(case when v.rUser like '%Pedestrian%' then 1 else 0 end) as pedestrianUser,  
count(case when d.weather like '%clear%' then 1 else 0 end) as clearWeather, 
count(case when m.extras like '%hat%' then 1 else 0 end) as hatExtras 
from VMdata v  
inner join files f on v.id = f.id 
inner join DMdata d on f.id = d.id 
inner join MultiFiledata m on f.id = m.id 
where f.filename in (X,Y,Z) group by f.filename) as summary 
```

希望这可以帮助 ：）

# variables - Powershell：在控制台菜单中为变量/读取主机添加约束/定义格式，例如。必须用引号等括起来

> ID：10346885
> 
> 赞同：0
> 
> 时间：2012-04-27T07:55:21.833
> 
> 标签：variables, powershell, menu, console, constraints

我正在使用控制台菜单从 AD 回收站恢复已删除的项目。

有 4 个菜单选项，每个选项都需要用户输入（读取主机），但格式必须正确，否则无法恢复。有没有办法在控制台菜单中为每个变量/读取主机定义约束？

这是我的菜单

```
#Keep looping and running the menu until the user selects Q (or q).
Do {
#use a Switch construct to take action depending on what menu choice
#is selected.
Switch (Show-Menu $menu " `nActive Directory Restore AD Tree Menu" -clear) {
 "1" {Write-Host " `nRestore AD Tree using LastKnownRDN" -ForegroundColor Yellow
     $RDN=Read-Host " `nEnter LastKnownRDN of deleted object (eg. STAFF) "
     .\Restore_ADTree.ps1 Restore-ADTree -lastknownRDN $RDN
     sleep -seconds 2
     } 
 "2" {Write-Host "Restore AD Tree using LastKnownRDN and LastKnownParent" -ForegroundColor Green
     $RDN=Read-Host " `nEnter LastKnownRDN of deleted object (eg. STAFF) "
     $LNP=Read-Host " `nEnter LastKnownParent of deleted object in quotes (eg. "OU=Staff,DC=xxxx,DC=xxxx,DC=xxxx,DC=xxxx")"
     .\Restore_ADTree.ps1 Restore-ADTree -lastknownRDN $RDN -lastknownParent $LNP
      sleep -seconds 5
      }
 "3" {Write-Host "Restore AD Tree Using Identity Distinguished Name" -ForegroundColor Magenta
     $DName=Read-Host " `nEnter the Distinguished Name of deleted object (eg. "OU=Test,OU=Staff,DC=xxxx,DC=xxxx,DC=xxxx,DC=xxxx") "
     .\Restore_ADTree.ps1 Restore-ADTree -identity $DName
     sleep -seconds 2
     }
 "4" {Write-Host "Restore AD Tree Using Identity GUID"
     $GUID=Read-Host " `nEnter the GUID of deleted object (eg. b48290aa-e14f-4417-9c03-560a546d18b9) "
     .\Restore_ADTree.ps1 Restore-ADTree -identity $GUID
     sleep -seconds 2    
     }
 "Q" {Write-Host "Goodbye" -ForegroundColor Cyan
     Return
     }
 Default {Write-Warning "Invalid Choice. Try again."
          sleep -milliseconds 750}
} #switch
} While ($True) 
```

所以对于 2\. 我想确保 $LNP 在引号中

对于 3\. 我希望输入至少包含 DC=XXXX,DC=XXXX,DC=XXXX 并用引号引起来

对于 4\. 我想确保它在 xxxxxxxx-xxxx-xxxxx-xxxxx-xxxxxxxxxxx 中没有特殊字符。

我也希望能够写到控制台，如果他们弄错了关于它需要采用什么格式的消息。

如果有人能指出我正确的方向，我将不胜感激。

谢谢，阿米莉亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:54:19.667

您可以创建自己的`Read-Host`实现，如下所示：

```
function MyRead-Host($prompt, $regex)
{
    while(!$inputOk)    {   $inputOk = (IsInputOk (Read-Host -Prompt $prompt) $regex)   }   
}

function IsInputOk([string] $string, [string] $regex)
{
    if ($string -eq $regex) { return $true  } return $false
} 
```

这个特定的实现将要求用户输入，直到它等于`$regex`变量。如果你想拥有通用功能，你应该做一些智能的正则表达式匹配，否则你可以为每个案例编写自己的验证器

# copy - 如何使用 robocopy 复制不同域上的目录

> ID：10346891
> 
> 赞同：46
> 
> 时间：2012-04-27T07:55:50.240
> 
> 标签：copy, dns, teamcity, robocopy

我想将一个目录（abc）从 domain1/user1 复制到 domain2/user1。任何想法如何做到这一点。例如 robocopy

```
robocopy \\server1\G$\testdir\%3 \\server2\g$\uploads 
```

两者都在不同的域上

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-04-27T09:42:12.257

Robocopy 将使用标准的 Windows 身份验证机制。

因此，在发出 robocopy 命令之前，您可能需要使用适当的凭据连接到服务器。

您可以使用它`net use`来执行此操作，并且可以将其放入批处理脚本中。

请注意，Windows 不希望您使用两组不同的凭据连接到同一台服务器（因此您不能以不同用户的身份从同一台服务器复制到同一台服务器）。但这并不是您所需要的。

像这样的东西：

```
net use \\server1\g$ /user:domain1\user1 * 
net use \\server2\g$ /user:domain2\user2 *
robocopy \\server1\G$\testdir\%3 \\server2\g$\uploads 
```

笔记：

*   这是使用“无设备”连接，在启动时不会重新创建（并且不会在 Windows 资源管理器中显示驱动器号）。
*   net use 命令末尾的星号表示提示输入密码，您可以在其中硬编码密码（或将其作为脚本的参数获取）。
*   可能值得阅读`net use`以确保它满足您的需求。

您也可以使用它删除与服务器的网络连接（我没有尝试过使用无设备连接）：

```
net use \\server1\g$ /delete
net use \\server2\g$ /delete 
```

# c# - 在 foreach 循环中运行 for 循环

> ID：10346892
> 
> 赞同：0
> 
> 时间：2012-04-27T07:55:53.363
> 
> 标签：c#

我必须以这种格式写内容

```
somename1  value1 value2 value1 value2 ....
somename2  value1 value2 value1 value2 ....
somename3  value1 value2 value1 value2 ....
somename4  value1 value2 value1 value2 ....
somename5  value1 value2 value1 value2 .... 
```

value1 和 value2 是一个点的 x 和 y 坐标的一部分，所以为此我创建了一个类：

```
class Points
{
 string name;
 double[] X;
 double[] Y;
}

class PointsCollection
{
  List<Points> aPoints
}

//now when accessing the PointCollection
foreach(Points aPoints in PointsCollection)
{
   stream.Write(aPoints.Name)
   //now i have to write the value1 and valud2

}

possible code

//now when accessing the PointCollection
foreach(Points aPoints in PointsCollection)
{
   stream.Write(aPoints.Name)
   int length1 = aPoints.Real;
   int length2 = aPoints.Imag;
   for(int i = 0 ; i < length1; i++)
   {
            stream.Write(aPoints.Real[i]);
            stream.Write(",");
            stream.Write(aPoints.Imag[i]);

    }
     stream.WriteLine();

} 
```

问题：在foreachloop中使用for循环是否正确？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T07:58:43.273

是的，在 foreach（或 foreach 中）中嵌套 for 循环是正确的！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:00:29.807

> 在 foreach 循环中使用 for 循环是否正确？

循环内的循环——“嵌套循环”——是一种正常的方法。`if`像 C# 这样的语言允许您在彼此之间自由嵌套控制结构（循环、...）。没有这么多问题将更难解决。

唯一的危险是使函数变得冗长且难以理解和维护：解决方案是将内部控制结构分解为它们自己的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:03:44.123

我将使用**StringBuilder**进行优化，并为每个循环只调用一次 stream.Write()。
除此之外，读取 Real 数组的长度有一点错误，但我想这只是 SO 上的打字错误。

```
StringBuilder sb = new StringBuilder();
//now when accessing the PointCollection 
foreach(Points aPoints in PointsCollection) 
{ 
   sb.Clear();
   sb.Append(aPoints.Name);
   int length1 = aPoints.Real.Lenght;  // Get the length of Real array
   // int length2 = aPoints.Imag; // Not needed???
   for(int i = 0 ; i < length1; i++) 
   { 
        sb.AppendFormat("{0},{1} ", aPoints.Real[i], aPoints.Imag[i]); 
   } 
   sb.AppendLine(); 
   stream.Write(sb.ToString()); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T07:58:35.060

是的，但在继续之前我会确保它`length1`是平等的；）`length2`

你也可以这样做：

```
foreach(Points aPoints in PointsCollection) 
{
   stream.Write(aPoints.Name)
   foreach (var complexNumber in aPoints.Real.Zip(aPoints.Imag,
       (real, imag) => new { Real = real, Imag = imag }))
   {
        stream.Write(complexNumber.Real);
        stream.Write(",");
        stream.Write(complexNumber.Imag);

   }
   stream.WriteLine();
} 
```

但这只是炫耀，并不能真正使您的代码更清晰。我认为你的版本更好，更重要......

哦，尝试运行代码，因为您的格式不正常，您需要先对其进行一些修改；）

# android - 假NFC（近场通信）发射的可能性

> ID：10346894
> 
> 赞同：7
> 
> 时间：2012-04-27T07:56:07.150
> 
> 标签：android, android-activity, android-intent, nfc

我正在研究用于从 NFC 标签读取数据的**近场通信**。我没有**支持 NFC 的 Android Mobile 和 NFC 标签**来测试我创建的应用程序。

我想知道是否可以**通过意图过滤器启动我的应用程序**（应该假设从我的设备检测到 NFC 标签）

我的清单片段：

```
 <activity
        android:name=".ServerActivity"
        android:label="@string/app_name"
        android:screenOrientation="portrait" >
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED" />

            <category android:name="android.intent.category.DEFAULT" />

            <data
                android:host="abc.com"
                android:pathPrefix="/aaap"
                android:scheme="http" />
        </intent-filter>
    </activity> 
```

我的活动片段：

```
@Override
protected void onNewIntent(Intent intent) {
    if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(intent.getAction())) {
        Toast.makeText(getApplicationContext(), "ACTION_TAG_DISCOVERED",
                Toast.LENGTH_LONG);
        Tag tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T09:01:07.613

我可能完全错过了这里的重点，但据我了解，您基本上想触发一个意图，该意图将被您在清单中声明的​​接收器选择，对吗？您是否尝试过使用该方法设置一个*非常*简单的测试应用程序来执行此操作`sendBroadcast(...)`？

```
Intent exampleIntent = new Intent("android.nfc.action.NDEF_DISCOVERED");
sendBroadcast(exampleIntent) 
```

您可以`Intent`根据您的要求添加任何额外的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T04:54:41.240

在对 NFC 进行一些研究后，我发现我们可以在没有启用 NFC 的设备的情况下读/写 NFC 标签。但答案很简单。不过就是玩 Intents：

我们必须调用这个片段来调用 NFC：

```
 final Intent intent = new Intent(NfcAdapter.ACTION_TAG_DISCOVERED);
    intent.putExtra(NfcAdapter.EXTRA_NDEF_MESSAGES, "Custom Messages");
    startActivity(intent); 
```

此外，我们应该通过 Manifest 文件将我们的 Activity 注册到 Android 系统，如下所示：

**清单.xml**

```
 <activity
        android:name="TagViewer" >
        <intent-filter>
            <action android:name="android.nfc.action.TAG_DISCOVERED" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
 </activity> 
```

同样，如果您有多个使用相同操作的活动，我们将获得选择器，我们可以从中启动我们想要的活动。

接收内部活动：

**标记查看器.java**

```
 if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(getIntent().getAction())) {
        Log.v("NFC Launched","NFC Launched");           
    } 
```

我们在[Developer Sample Demo](http://developer.android.com/resources/samples/NFCDemo/index.html)中有这个示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:54:08.930

看看开放式 NFC。他们有一个[NFC 模拟器](http://open-nfc.org/wp/nfchal/simulator/)，可能对附加到您的 android 模拟器很有用。从未在 Android 上使用过它，但我在 BlackBerry 模拟器上使用过它。

编辑：
[Android ICS 的最新版本 4.4.1 已发布。](http://open-nfc.org/wp/2012/04/12/open-nfc-4-4-1-for-android-ics-4-0-3/)

# php - PHP登录表单和注销按钮未正确显示

> ID：10346895
> 
> 赞同：0
> 
> 时间：2012-04-27T07:56:14.740
> 
> 标签：php, session, login, session-variables

我刚开始学习 PHP，在让一个简单的登录页面正常工作时遇到了一些麻烦。当我第一次加载这个脚本时，文本“错误的密码/用户名”。并打印注销按钮，但不打印登录表单。为什么会发生这种情况，我将如何更改代码以使登录表单和注销按钮按预期协同工作？

```
<?php

if (isset($_POST['log_out'])) { // If the page was reloaded as a result of the user having clicked the logout button,
session_destroy(); // kill session.
}

session_start(); // Start a new session with

$_SESSION['user'] = 'foo'; // a static username, and
$_SESSION['pass'] = 'bar'; // a static password.
// If I insert $_SESSION['logged_in'] = 'false'; here to start things off, a blank alert box will be returned no matter from where on the page I alert() the value with JS. On the other hand, without this line the same alert will return "1" both here and further down in the script.

if (($_POST['username'] == $_SESSION['user']) && ($_POST['password'] == $_SESSION['pass'])) { // If the username and password filled in before the page reload match the static ones,
    $_SESSION['logged_in'] = true; // the user is logged in.
} else { // If there is no match ...
    echo 'Wrong password/username.';
}

include("head.php"); // HTML snippet with everything from the DOCTYPE to the opening BODY tag.

?>
            <div> // HTML interlude ...
<?php

// If the user is logged in, print out a logout button in HTML at the top of the page:

if (isset($_SESSION['logged_in']) && ($_SESSION['logged_in'] == true)) {
    echo '          <form action="index.php" method="post">';
    echo '            <input type="submit" name="log_out" value="Log out">';
    echo '          </form>';
}

?>
                <p>HTML interlude ...</p>

<?php

// If the user is not logged in, print out a login form in HTML at the bottom of the page:

if ($_SESSION['logged_in'] != true) {

    echo '            <form action="index.php" method="post">';
    echo '              <label for="username">Username</label><br>';
    echo '              <input type="text" name="username" id="username"><br>';
    echo '              <label for="password">Password</label><br>';
    echo '              <input type="text" name="password" id="password"><br>';
    echo '              <input type="submit" name="submit" id="submit" value="Log in">';
    echo '            </form>';

}

?>
            </div>
<?php include("footer.php"); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:05:50.370

```
if (($_POST['username'] == $_SESSION['user']) && ($_POST['password'] == $_SESSION['pass'])) { the static ones,
    $_SESSION['logged_in'] = true; // the user is logged in.
} else { 
    echo 'Wrong password/username.';
} 
```

当页面第一次加载时，这部分会显示“错误的密码/用户名”，因为如果没有来自`$_POST['username']`.

将条件添加`isset($_POST['username']) && isset($_POST['password'])`到两个选项。像这样：

```
if(isset($_POST['username']) && isset($_POST['password'])){
    if (($_POST['username'] == $_SESSION['user']) && ($_POST['password'] == $_SESSION['pass'])) { the static ones,
        $_SESSION['logged_in'] = true; // the user is logged in.
    } else { 
        echo 'Wrong password/username.';
    }
} 
```

这样，第一次加载页面时不会评估任何内容，但只有在发布凭据时才会评估。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T07:59:52.007

您可以通过调试脚本来发现：将期望存储到变量中并打印出来，例如：

```
$isLoggedIn = $_SESSION['logged_in']; # Give things a name! (always useful)
echo 'isLoggedIn: ', var_dump($isLoggedIn), "\n"; # debugging
if ($isLoggedIn != true) {

    echo '            <form action="index.php" method="post">';
    echo '              <label for="username">Username</label><br>';
    echo '              <input type="text" name="username" id="username"><br>';
    echo '              <label for="password">Password</label><br>';
    echo '              <input type="text" name="password" id="password"><br>';
    echo '              <input type="submit" name="submit" id="submit" value="Log in">';
    echo '            </form>';

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:02:57.590

第一次加载页面时，除非您传递所需的帖子变量，否则您的条件检查

```
if (($_POST['username'] == $_SESSION['user']) && ($_POST['password'] == $_SESSION['pass'])) 
```

将失败，因此显示`Wrong password/username.`消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T08:07:26.127

代码看起来不错，实际上对于“刚刚学习”的人来说做得很好。

鉴于代码没有明显错误（一些粗糙的边缘 - 在比较布尔值时，您应该考虑使用 '===' 而不是 '=='），那么问题可能出在会话上。

尝试...

print_r($_SESSION);

紧接在 session_start() 之后；在选择是否显示注销按钮的条件之前。

每次您*不*将参数发布到页面以及发布错误值时，都会显示错误的用户名消息。试试这个：

```
if (($_POST['username'])
    && ($_POST['username'] == $_SESSION['user']) 
    && ($_POST['password'] == $_SESSION['pass'])) { 
```

顺便说一句，会话不是存储用户名和密码的好存储库 - 它特定于当前用户。对于多用户系统，这些将存储在单独的数据库中，例如

```
if (($_POST['username']) && lookup($_POST['username'], $_POST['password'])) {
... 
```

# wordpress - 链接到 wordpress 布局中的特定选项卡？

> ID：10346896
> 
> 赞同：0
> 
> 时间：2012-04-27T07:56:16.510
> 
> 标签：wordpress

我使用名为 builder 的插件在 Wordpress 中创建了一个布局。然后我有一个使用这种布局的页面。布局包含一个带有选项卡的区域。

当用户单击我的主菜单中的链接时，他会被带到此页面，并打开第一个选项卡。我可以更改链接以将他带到第二个选项卡吗？

实际上菜单看起来像这样

关于我们 -概况 -发展历程 -联系方式

如果用户单击关于我们或概述，我希望他转到第一个选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:41:08.360

我想你必须用 HTML 锚创建一些东西，或者

```
$(document).ready(function() {
$('#tabs #2nditemid').click();
}); 
```

或者

```
 $(document).ready(function() {
    $('#tabs li').hide();
 $('#tabs li.2nditemid').show();
    }); 
```

这可能会有所不同，但可能会将您带到某个地方

这必须仅特定于您拥有标签的位置......所以最好只为这个特定页面创建一个页面主题，以避免在所有页面中出现额外的 jquery

# ios - 如何在 iOS 设备上唯一标识用户？

> ID：10346898
> 
> 赞同：0
> 
> 时间：2012-04-27T07:56:25.037
> 
> 标签：ios, cocoa-touch

我已经阅读了很多主题，每个主题都告诉我这是不可能的。

当用户更换设备（例如 iPhone 到 iPad）时，Apple 不会公开 Apple ID 或其他任何东西来识别用户。

后来我下载了应用程序 OfflineMap 2，在 iPhone 上花 5 美元购买一项功能。

我还在 iPad 上下载了这个应用程序，当我运行并按下 re-get flat trance（我购买的产品的名称）时，它会询问我的 iTunes 帐户，然后我在 iPad 上看到一切都很好。

我以为我必须重新购买它，但应用程序告诉我我已经拥有它并让我重新下载。

那么如果应用程序无法唯一识别用户，我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T07:59:31.903

*您*唯一标识用户与*Apple*唯一标识用户之间存在差异。

Apple 显然有能力，但这并不意味着他们公开接口供其他任何人这样做。

像您描述的应用内购买通常会根据收据进行评估，以便在一台设备上购买它可以在任何地方为您提供。

# c# - HttpStatus 和 DownloadData

> ID：10346901
> 
> 赞同：13
> 
> 时间：2012-04-27T07:56:36.857
> 
> 标签：c#, restsharp

我正在尝试使用 DownloadData 方法使用 RestSharp 下载文件（图像）

```
var client = new RestClient(baseUrl);

var request = new RestRequest("GetImage", Method.GET);

var response = client.DownloadData(request); 
```

这工作正常，但如果请求返回错误，我看不到 HttpStatus 代码。

我可以提出请求并检查状态：

```
var client = new RestClient(baseUrl);

var request = new RestRequest("GetImage", Method.GET);

var response = client.Execute(request);

var status = response.StatusCode; 
```

但是我无法从 Content 属性中获取图像。

我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-27T07:59:00.553

图像数据将在`RestResponse.RawBytes`

# javascript - 是否可以收听 AddThis 帖子分享事件？

> ID：10346904
> 
> 赞同：12
> 
> 时间：2012-04-27T07:56:50.570
> 
> 标签：javascript, addthis

我正在使用 AddThis 小部件向 Twitter、Facebook 和 Google+ 共享网站内容。我已经在我的网站上登录了用户，并且正在考虑在已登录用户和他的共享行为之间建立关联。

为此，我需要收听 Addthis 小部件的回调，这是他们网站上的直接示例：

```
function shareEventHandler(evt) { 
    if (evt.type == 'addthis.menu.share') { 
        alert(typeof(evt.data)); // evt.data is an object hash containing all event data
        alert(evt.data.service); // evt.data.service is specific to the "addthis.menu.share" event
    }
}

// Listen for the share event
addthis.addEventListener('addthis.menu.share', shareEventHandler); 
```

此事件的问题在于它在实际共享某些内容之前被触发。例如，用户单击“Tweet”按钮，触发此脚本，启动 Tweet 对话框，用户在该对话框中向前移动或取消共享。

理想情况下，事件处理程序在实际共享成功完成后触发，而不是在用户取消它时触发。官方文档似乎不可能，但是如果有人有创造性的解决方法，我还是想尝试一下？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-10T20:36:39.003

可能的解决方法：
我假设共享 addthis 内容框的帖子已更改...检查此元素（可能是一个类）以确保共享成功

# google-maps - 使用 google api 的气泡图

> ID：10346908
> 
> 赞同：0
> 
> 时间：2012-04-27T07:57:19.133
> 
> 标签：google-maps

我想使用链接中给出的google api绘制气泡图

[http://www.improving-visualisation.org/vis/id=334](http://www.improving-visualisation.org/vis/id=334)

是否有任何教程有助于绘制类似类型的地图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:05:02.927

也许您正在寻找诸如markerclusterer之类的东西？

[http://googlegeodevelopers.blogspot.co.uk/2009/04/markerclusterer-solution-to-too-many.html](http://googlegeodevelopers.blogspot.co.uk/2009/04/markerclusterer-solution-to-too-many.html)

# android - 无法通过 Simplecursor 适配器填充 ListView

> ID：10346910
> 
> 赞同：0
> 
> 时间：2012-04-27T07:57:24.470
> 
> 标签：android, listview, simplecursoradapter, sqliteopenhelper

我想用我的数据库中的数据填充我的列表视图，但是当我尝试这样做时，它只会给我一个例外，即

```
 "04-27 13:15:51.139: E/AndroidRuntime(2575): Caused by: java.lang.IllegalArgumentException: column '_id' does not exist" 
```

无论我使用什么适配器，或者我都遇到了同样的异常。

这是我的`SQLiteOpenHelper`：

```
public class MySQLiteHelper extends SQLiteOpenHelper {

    //      Table Names
    public static final String TABLE_USER_MASTER = "USER_MASTER";
    public static final String TABLE_ORDER_MASTER = "ORDER_MASTER";
    public static final String TABLE_ORDER_DETAILS = "ORDER_DETAILS";

    //      Database Details
    public static String DB_NAME = "ezeefood.db";
    public static String DB_PATH = "/data/data/com.project.menuApp";
    public static final int DATABASE_VERSION = 4;

    //      User Detail Columns
    public static final String KEY_ID = "_id";
    public static final String KEY_NAME = "Name";
    public static final String KEY_ADDRESS = "Address";
    public static final String KEY_PHONE = "PhoneNo";
    public static final String KEY_USERNAME = "userid";
    public static final String KEY_PASSWORD = "password";

    //      Order Master Columns
    public static final String ORDER_ID = "order_id";
    public static final String ORDER_DATE = "date";
    public static final String ORDER_TIME = "time";

    //      Order Detail Columns
    public static final String ORDER_DETAIL_ID = "order_detail_id";
    public static final String ORDER_ITEM_NAME = "item_name";
    public static final String ORDER_ITEM_RATE = "item_rate";
    public static final String ORDER_ITEM_QTY = "item_qty";
    public static final String ORDER_ID_FINAL = "order_Id";

     private SQLiteDatabase sqLiteDatabase;

    private static final String SCRIPT_CREATE_TABLE_USER_MASTER = "CREATE  TABLE "
            + TABLE_USER_MASTER + "(" + KEY_ID
            + "  INTEGER PRIMARY KEY  AUTOINCREMENT," + KEY_USERNAME + " VARCHAR UNIQUE, "
            + KEY_PASSWORD + " VARCHAR," + KEY_NAME + " VARCHAR,"
            + KEY_ADDRESS + " VARCHAR," + KEY_PHONE + " VARCHAR);";

    private static final String SCRIPT_CREATE_TABLE_ORDER_MASTER = "CREATE  TABLE "
            + TABLE_ORDER_MASTER + "(" + ORDER_ID
            + "  INTEGER PRIMARY KEY  AUTOINCREMENT," + KEY_USERNAME + " VARCHAR, "
            + ORDER_DATE + " VARCHAR," + ORDER_TIME +" VARCHAR);";

    private static final String SCRIPT_CREATE_TABLE_ORDER_DETAILS = "CREATE  TABLE "
            + TABLE_ORDER_DETAILS + "(" + ORDER_DETAIL_ID
            + "  INTEGER PRIMARY KEY  AUTOINCREMENT," + ORDER_ID_FINAL + " INTEGER, "
            + ORDER_ITEM_NAME + " VARCHAR," + ORDER_ITEM_RATE + " FLOAT,"
            + ORDER_ITEM_QTY + " INTEGER DEFAULT 1);";

    public MySQLiteHelper(Context context) {
        super(context, DB_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase database) {
        database.execSQL(SCRIPT_CREATE_TABLE_USER_MASTER);
        database.execSQL(SCRIPT_CREATE_TABLE_ORDER_MASTER);
        database.execSQL(SCRIPT_CREATE_TABLE_ORDER_DETAILS);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        Log.w(MySQLiteHelper.class.getName(),
                "Upgrading database from version " + oldVersion + " to "
                        + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_USER_MASTER);
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_ORDER_MASTER);
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_ORDER_DETAILS);
        onCreate(db);
    }
} 
```

这就是我试图通过简单的光标适配器填充我的列表视图的地方。

```
public class FinalOrder extends ListActivity {

    Cursor cursor;
    long orderId;
    private SQLiteDatabase mDatabase;
    private MySQLiteHelper mDbhelper;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.orderdetails);
        Bundle c = getIntent().getExtras();
        orderId = c.getLong("orderID");
        mDbhelper = new MySQLiteHelper(this);
        mDatabase = mDbhelper.getReadableDatabase();    
        cursor = mDatabase.query(MySQLiteHelper.TABLE_ORDER_DETAILS, new String [] {MySQLiteHelper.ORDER_ITEM_NAME,
                MySQLiteHelper.ORDER_ITEM_QTY,MySQLiteHelper.ORDER_ITEM_RATE}, "order_Id = ?",
                new String[]{String.valueOf(orderId)}, null, null, null);
        startManagingCursor(cursor);

        String[] from = new String[] {MySQLiteHelper.ORDER_ITEM_NAME,MySQLiteHelper.ORDER_ITEM_QTY,MySQLiteHelper.ORDER_ITEM_RATE};
        int[] to = new int[] {R.id.tv_listItemName,R.id.tv_listItemQTY,R.id.tv_listItemPrice};

        ListAdapter adapter = new SimpleCursorAdapter(this,R.layout.orderlist_row,cursor,from,to);

        setListAdapter(adapter);
    }
} 
```

我不知道为什么它会给出这样的异常，我正在访问的表中没有名为“_id”的列。请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:06:02.883

您正在访问`TABLE_ORDER_DETAILS`具有`ORDER_DETAIL_ID`列但`"order_detail_id"`不是的表`"_id"`。如果您更改它应该可以工作，因为需要在游标中`SimpleCursorAdapter`精确命名的列。`_id`

您还必须在查询中包含 id 列。无需重命名表中的列的快速修复方法是在查询中重命名它：

```
 cursor = mDatabase.query(MySQLiteHelper.TABLE_ORDER_DETAILS,
            new String [] { MySQLiteHelper.ORDER_DETAIL_ID + " AS _id",
            MySQLiteHelper.ORDER_ITEM_NAME,
            MySQLiteHelper.ORDER_ITEM_QTY,
            MySQLiteHelper.ORDER_ITEM_RATE }, "order_Id = ?",
            new String[]{String.valueOf(orderId)}, null, null, null); 
```

# c# - 使用不带查询字符串的 cookie 在 asp .net 接口之间进行重定向

> ID：10346911
> 
> 赞同：0
> 
> 时间：2012-04-27T07:57:26.107
> 
> 标签：c#, asp.net, cookies

我有两个 asp .net 接口：

```
 1\. app1.domain.com
  2\. app2.domain.com 
```

在两者的默认页面中，都有一个链接按钮，我们可以从中切换它们。以前我们使用查询字符串来传递用户名和密码。但是现在我们想使用cookies。所以在链接按钮的点击事件中，我有这样的代码：

```
 HttpCookie cookie = new HttpCookie("MYCookie", Guid.NewGuid().ToString());
    cookie.Domain = "domain.com";
    cookie.Expires = DateTime.UtcNow.AddHours(1);
    cookie.HttpOnly = false;
    cookie.Secure = true;

    cookie.Values.Add("Username", Username.ToString());
    cookie.Values.Add("UserId", UserId.ToString());
    Response.Cookies.Add(cookie);
    Response.Redirect(destinationAddress); 
```

现在，在其他应用程序的默认页面中，将 cookie 读取为：

```
 protected override void InitializeCulture() {
     if (Request.Cookies["MYCookie"] != null) {
       HttpCookie cookie = null;
      cookie = Request.Cookies.Get("MYCookie");
         }
      } 
```

但这里发现 Request.Cookies["MYCookie"] 为空。我错过了什么吗？请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:40:02.497

Response.Redirect 生成**ThreadAbortException**。在您的 cookie 中所做的所有更改都将丢失。所以你可以使用，

```
<meta http-equiv="Refresh" content="10; URL=your url" /> 
```

c#代码：

```
System.Web.UI.HtmlControls.HtmlMeta meta = new System.Web.UI.HtmlControls.HtmlMeta();
meta.HttpEquiv = "Refresh";
meta.Content = "10; URL=your url";
Page.Header.Controls.Add(meta); 
```

并设置你的cookie就像

```
cookie.Domain = ".domain.com"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:01:42.857

我认为您需要为 app1 和 app2 添加 HttpCookie 相同的 Path 属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:01:25.443

在我看来，问题出在您的域上。

改变`cookie.Domain = "domain";`为`cookie.Domain = ".domain.com";`

# python - 在 Python 中是否可以在函数调用中设置几个参数的最后一个参数？

> ID：10346912
> 
> 赞同：1
> 
> 时间：2012-04-27T07:57:30.553
> 
> 标签：python, ftp, timeout

如果所有参数都有默认值，是否可以在 Python 中设置函数调用中的最后一个参数？

示例：在`ftplib.FTP`模块中定义了这个：

```
ftplib.FTP([host[, user[, passwd[, acct[, timeout]]]]]) 
```

所有这些参数都有一个默认值，所以你不需要全部设置它们，例如，你可以调用`ftp = ftplib.FTP()`来获取一个 FTP 对象。但是如果我只想设置`timeout`参数呢？我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T07:59:00.150

您可以按名称传递此（或任何其他）参数：

```
ftplib.FTP(timeout=10) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T08:01:10.887

是的，通过使用命名参数，您可以使用名称-值对指定值。

```
ftp = ftplib.FTP(timeout=100) 
```

# wordpress - NodeJS中的wordpress密码加密

> ID：10346916
> 
> 赞同：5
> 
> 时间：2012-04-27T07:57:46.687
> 
> 标签：wordpress, node.js, password-encryption

如何在 nodeJS 中从 wordpress 数据库进行用户身份验证。

如果用户名/密码正确，我需要使用 wordpress 数据库验证用户。Wordpress 使用 PHPass PHP 库来加密密码。但我需要在 NodeJS 中匹配密码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T10:02:10.367

**编辑：**今天有一个支持 Wordpress 可移植哈希的实现：[wordpress-hash-node](https://github.com/AlexAlbala/wordpress-hash-node)。

**上一个回复：**

唉……我对这个产生了兴趣，花了半个小时来翻阅PHPass源代码。然后我用谷歌搜索[节点 phpass](https://github.com/jhurliman/node-phpass)。

**编辑：**仔细检查，这似乎只实现 bcrypt 加密，而 PHPass 默认值（我认为 Wordpress 使用）是他们称之为“便携式哈希”的东西。当您要求便携式哈希时`node-phpass`抛出。`'Portable hashes are not implemented'`我建议你实现它`node-phpass`并发送一个拉取请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-18T10:28:22.247

对于 Wordpress 4.9.5，在 NodeJS 之后

npm i wordpress-hash-node

```
var hasher = require('wordpress-hash-node');
let wordpressHashPass = "$P$BzPE3JGpq4CUpvpMHhtPh3lZmIoG.s1";
let wordpressPlainTextPass = '(&@fZsImcKq7K3Lmd&qBe!Jx';
var checked = hasher.CheckPassword(wordpressPlainTextPass, wordpressHashPass); //This will return true
console.log(checked); // returns true

var hasher = require('wordpress-hash-node');
let wordpressHashPass = "$P$BzPE3JGpq4CUpvpMHhtPh3lZmIoG.s1";
let wordpressPlainTextPass = 'goodday';
var checked = hasher.CheckPassword(wordpressPlainTextPass, wordpressHashPass); //This will return false
console.log(checked); // returns false 
```

wordpressHashPass 是您可以在 Wordpress 的 wp_users 表中为用户找到的 MD5 哈希密码。

wordpressPlainTextPass 是用户在密码字段中键入的纯文本密码。

CheckPassword 方法比较纯文本密码和散列密码。如果一致则返回 true，如果不一致则返回 false。

# c++ - 如何使用 shedskin 将 python 代码转换为 c++ 代码？

> ID：10346919
> 
> 赞同：2
> 
> 时间：2012-04-27T07:57:54.400
> 
> 标签：c++, python, converter

我阅读了提供的[文档](http://code.google.com/p/shedskin/wiki/docs)，但不明白如何使用 shedskin，我对 python 没有经验。我有 python 2.7，我测试它似乎可以在 cmd 中工作，或者如果我只是双击 .py 文件，它会生成 .pyc 文件。我通过单击 run.py 在 shedskin\shedskin-0.9.1\shedskin\tests 中运行测试它会生成一些 .cpp 和 makefile，但我不明白如何在我的 .py 文件上运行它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T23:08:51.250

```
mkdir helloworld
cd helloworld
echo -e "import sys\nprint 'hello '+sys.argv[1]" > helloworld.py
python helloworld.py this_is_python
shedskin helloworld
make
./helloworld this_is_c_plus_plus 
```

# regex - 正则表达式跟踪器

> ID：10346922
> 
> 赞同：3
> 
> 时间：2012-04-27T07:57:58.540
> 
> 标签：regex

我正在寻找[Regex Match Tracer (v2.0)](http://www.regexlab.com/en/mtracer/)的免费替代品。有许多正则表达式检查器，但它们不显示匹配结果。我需要检查正则表达式并查看所有匹配项。它可以使用任何语言（PHP、JavaScript 或 Windows `.exe`...）。你知道类似的事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T08:01:55.013

有很多在线工具。

这里有一些：

[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)

[http://regexpal.com/](http://regexpal.com/)

[http://myregexp.com/](http://myregexp.com/)

[http://regex.larsolavtorvik.com/](http://regex.larsolavtorvik.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:01:40.373

我可以在这里粘贴一个很长的列表，但我个人使用[rubular](http://www.rubular.com)（[这里](http://www.rubular.com/r/5xU9HrHIgX)和[这里](http://www.rubular.com/r/7Q3FdwAdEp)是显示匹配项的示例）；因为：

*   可读性、易用性和漂亮的图形
*   “永久链接”功能
*   “显示隐形”功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:02:34.050

在 Perl/Python/Ruby 等脚本语言中测试正则表达式产生的匹配和子匹配并不难。并将其包装到脚本中并不难。

# c++ - 为什么 stdarg.h 有一个宏 « __va_size »？

> ID：10346923
> 
> 赞同：5
> 
> 时间：2012-04-27T07:58:05.230
> 
> 标签：c++, c, variadic-functions

我一直在寻找一些关于宏的代码，我找到了这样的代码，用于宏 «va_start»：

```
#define __va_argsiz(t)  \
    (((sizeof(t) + sizeof(int) - 1) / sizeof(int)) * sizeof(int))
#define va_start(ap, pN)    \
    ((ap) = ((va_list) (&pN) + __va_argsiz(pN))) 
```

我想知道 « __va_argsiz » 函数的目标是什么。是对齐限制吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T08:01:03.193

C 中的对齐和默认类型提升规则。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T08:02:02.833

看起来它用于根据第一个参数的大小来计算变量参数列表的开始。第一个参数是所需的普通参数，即`printf()`它是指向格式化字符串的指针。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T09:23:42.237

没有“限制”，*执行*。以.的`__va_argsiz` ***倍数***对. 这是必需的，因为作为 varargs 函数调用协议的一部分在调用堆栈上传递的 uknown 参数会自动对齐并分配空间的倍数（显然，在您的平台上），并且必须从那里正确检索。`sizeof(t)``t``sizeof(int)``sizeof(int)`

另见[http://www.cplusplus.com/reference/clibrary/cstdarg/va_start/](http://www.cplusplus.com/reference/clibrary/cstdarg/va_start/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T08:03:36.923

这用于[可变长度参数](http://c-faq.com/varargs/index.html)。例如`printf`使用这样一个可变长度的参数列表。`__va_argsiz`计算列表的大小并`va_start`确定开始。

# c# - 循环遍历 poco 类属性

> ID：10346924
> 
> 赞同：3
> 
> 时间：2012-04-27T07:58:05.633
> 
> 标签：c#

```
public partial class Foo
{
    public struct ContainerOne
    {
        public const long Sub1 = 1;
        public const long Sub2 = 2;
    }

    public struct ContainerTwo
    {
        public const long Sub3 = 3;
        public const long Sub4 = 4;
    }

} 
```

有没有办法制作一个嵌套的 foreach 来获取每个容器名称，并使用一个内部循环来获取每个属性名称 + 值？

希望你能明白，否则会详细说明，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T08:02:31.853

是的，像这样：

```
var fooType = typeof(Foo);
foreach(var type in fooType.GetNestedTypes())
{
    Console.WriteLine(type.Name);
    foreach(var field in type.GetFields())
    {
        Console.WriteLine("{0} = {1}",field.Name,field.GetValue(null));
    }
} 
```

现场示例：[http ://rextester.com/PNV12550](http://rextester.com/PNV12550)

# c# - 如何在 C# 中获取 ip 范围？

> ID：10346925
> 
> 赞同：4
> 
> 时间：2012-04-27T07:58:11.287
> 
> 标签：c#, ip, range

我是新手。我在 C# 4.0 中编写了一个获取 IP 范围的程序，它适用于小范围，但是当我使用 A 类 IP 地址等范围时，我的程序需要很多时间。需要一些帮助。这是我的代码（这不是一个好方法）。有什么建议以更好的方式写作。？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;

namespace ipSplitt
{
    class MainClass
    {
        public static void Main(string[] args)
        {
            string[] z = new string[4];
            int t = 0;
            string ip = "3.0.0.0";

            string[] Ip = ip.Split(new char[] { '.' });

            foreach (string m in Ip)
            {
                z[t] = m;
                t++;
            } 

            int a1, b1, c1, d1 = 0;

            a1 = Convert.ToInt32(z[0]);
            b1 = Convert.ToInt32(z[1]);
            c1 = Convert.ToInt32(z[2]);
            d1 = Convert.ToInt32(z[3]);

            string[] v = new string[4];
            string ip2 = "3.255.255.255";
            int l = 0;
            string[] Ip2 = ip2.Split(new char[] { '.' });

            foreach (string m in Ip2)
            {
                v[l] = m;
                l++;
            } 

            int a2, b2, c2, d2 = 0;

            a2 = Convert.ToInt32(v[0]);
            b2 = Convert.ToInt32(v[1]);
            c2 = Convert.ToInt32(v[2]);
            d2 = Convert.ToInt32(v[3]);

            while (d2 >= d1 || c2 > c1 || b2 > b1 || a2 > a1)
            {
                if (d1 > 255)
                {
                    d1 = 1;
                    c1++;
                }

                if (c1 > 255)
                {
                    c1 = 1;
                    b1++;
                }

                if (b1 > 255)
                {
                    b1 = 1;
                    a1++;
                }

                using (StreamWriter writer = new StreamWriter("import.txt",true))
                    writer.WriteLine(a1 + "." + b1 + "." + c1 + "." + d1);

                d1++;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T08:07:47.710

> 但是当我选择 A 类 IP 地址等范围时，我的程序会花费很多时间

因为您打开和关闭文件句柄 255^3 次。将`using(Streamwriter ...)`块放在外部 while 循环周围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:25:07.253

您的方法很简单，这里已经有了很好的答案。但是... 什么是 IP 地址？它是一个四字节整数，对吧？那么为什么不将范围限制解析为 int32，然后使用掩码在输出流之间打印数字以获得十进制表示：

```
127.0.0.1 = 01111111 00000000 00000000 00000001
a = ip & 0xFF000000
b = ip & 0x00FF0000 
c = ip & 0x0000FF00
d = ip & 0x000000FF 
```

但仍然不要忘记初始化一个循环外的流。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T08:21:19.023

StringBuilder 解决方案在我的系统上抛出内存不足异常，因此您只需添加

```
 StreamWriter writer = new StreamWriter("import.txt"); 
```

在你的功能之上然后替换

```
 using (StreamWriter writer = new StreamWriter("import.txt",true))
            writer.WriteLine(a1 + "." + b1 + "." + c1 + "." + d1); 
```

和

```
writer.WriteLine(a1 + "." + b1 + "." + c1 + "." + d1); 
```

并添加

```
writer.Close(); 
```

至底部。10秒内完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-27T08:10:13.533

很多时间去这个

```
using (StreamWriter writer = new StreamWriter("import.txt",true))
                writer.WriteLine(a1 + "." + b1 + "." + c1 + "." + d1); 
```

所以你应该这样做

```
 StringBuilder sb = new StringBuilder(Int32.MaxValue);
        sb.Append(a1.ToString() + "." + b1.ToString() + "." + c1.ToString() + "." + d1.ToString() + "\n"); 
```

毕竟只是打电话

```
 File.WriteAllLines("import.txt", sb.ToString().Split('\n')); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T08:06:22.910

看看.NET 框架中的[IPAddress 类，以及](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.aspx)[静态 Parse](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.parse.aspx)函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T09:06:27.027

写入文件 import.txt 的语句是导致循环变慢的罪魁祸首。我认为您应该将 StreamWriter 代码替换为 `ips.AppendLine(a1 + "." + b1 + "." + c1 + "." + d1);` Here, ips is a StringBuilder object。在循环之外，我编写了以下代码：

```
StreamWriter writer = new StreamWriter("import.txt", false))
char[]  arr ;

arr = new char[ips.Length]  ;
ips.CopyTo(0, arr, 0, ips.Length) ;

writer.Write(arr);
writer.Dispose() 
```

在这里，我不会将字符串从 StringBuilder 转储到 import.txt。但我复制到 char[] 然后转储。我观察到这要快得多。我希望这有帮助 ！！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-27T08:07:43.880

您每次都打开文件，以便为每个 IP 刷新它。将 using 语句放在 while 块周围。

# html - 本地主机和服务器上的 Chrome 差异

> ID：10346931
> 
> 赞同：4
> 
> 时间：2012-04-27T07:58:28.870
> 
> 标签：html, google-chrome

对于相同代码的本地主机和远程站点，我有不同的视觉效果。我不知道为什么本地 Chrome 显示我的网站完全不同：

这是[http://beta.cliffbase.com](http://beta.cliffbase.com) http://img833.imageshack.us/img833/2477/b557ecb80f7644c9a7893c9.png

这是我从 VS2010 作为本地主机运行的本地环境 [http://img96.imageshack.us/img96/3241/5786958214d64aaba236931.png](http://img96.imageshack.us/img96/3241/5786958214d64aaba236931.png)

您可以看到菜单和左侧信息项具有不同的填充和高度。

有谁知道可能是什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-08-21T20:58:23.680

Chrome 允许您为本地站点和 Internet 上的站点独立设置网页的缩放。就我而言，这就是我使用[http://localhost:8080/mypage.jsp](http://localhost:8080/mypage.jsp) v/s [http://172.20.35.40:8080/mypage.jsp](http://172.20.35.40:8080/mypage.jsp)时网页看起来不同的原因。我在使用时将缩放重置为 100% `localhost`，现在两个视图都相同。

注意：我知道这是一个非常古老的线程，并且 OP 已经解决了*他的*问题。但这显示为第一个搜索结果，当您 google 为什么 Chrome 使用 localhost v/s 使用 IP 地址以不同方式显示同一页面时。认为这可能会帮助处于与我类似的情况的人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T08:59:52.523

我找到了问题的原因。它是由 Font Squirrel 生成的 @font-face 的填充/边距。我不得不换成 Cufon 以保持所有尺寸相同。现在工作正常。

# php - Web 应用程序：html 和 php

> ID：10346939
> 
> 赞同：5
> 
> 时间：2012-04-27T07:59:31.170
> 
> 标签：php, html, http

我正在开发用于通过互联网打开和关闭灯的小型 Web 应用程序。如果灯亮，则显示灯图像，否则显示灯图像。我正在考虑在这个过程中实现这个应用程序： 1- 我在服务器上创建一个名为 lamp.html 的 html 文件 2- 灯控制器电路每 5 秒将 http 数据发送到一个 php 服务器应用程序，该应用程序获取数据并打开灯。 html 文件并使用从灯控制器接收的新数据重写 html 文件。示例：如果灯打开，服务器应用程序将带有 ON 灯图像的图像标签写入 lamp.html 文件，依此类推。3-我从浏览器请求lamp.html文件。例如：http:mysite.com/lamp.html 该文件每 5 秒自动刷新一次。

实施的程序是否良好？我可以使用另一种方法来使用http请求进行远程控制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:22:46.070

你的主要想法听起来不错，但它还有改进的空间。但首先让我们看一下总体设计：

![在此处输入图像描述](../Images/f586b5fc664dba058f55ce28528a689c.png)

为了简化您的系统，如果服务器将灯传输的最后一个值存储到一个文件中就足够了。您不需要在每次更改时呈现完整的 HTML 文件，只需修改文件中的单个字节。

另一方面，浏览器也不需要每 5 秒刷新一次整个页面。取而代之的是[*使用服务器发送的事件实现流更新，*](http://www.html5rocks.com/en/tutorials/eventsource/basics/)这样网络服务器就会在灯发生变化时真正告诉浏览器。然后浏览器可以通过 javascript 更改图像 URL 和其他内容，使其看起来更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:12:03.837

如果我要制作一个显示灯状态的网页......

1.  **lamp.html**
    应该有两个 div。一张是开灯的图片，一张是关灯的图片。

2.  **getLampInfo.php**
    应该连接到您的灯控制器并回显 0 或 1 的数据

3.  在 lamp.html 中编写一个 ajax 脚本，每 5 秒调用一次 getLampInfo.php 并根据响应切换 div。

我不会处理文件覆盖和东西。这一切似乎都是不必要的。不过，您的方法将起作用，并且绝对没有任何问题。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:08:22.740

如果灯打开或关闭，我将通过 PHP 脚本查看每个页面请求，并根据结果显示图像。

```
<img src="/<?php echo (lamp_is_on() ? 'on' : 'off'); ?>.png"> 
```

# php - 斜杠导致 404，我可以使用 htaccess 修复吗？

> ID：10346944
> 
> 赞同：5
> 
> 时间：2012-04-27T07:59:43.393
> 
> 标签：php, .htaccess

有问题的网址是：

*   （不起作用）[http://alltheragefaces.com/face/surprised-wut/](http://alltheragefaces.com/face/surprised-wut/)
*   （作品）[http://alltheragefaces.com/face/surprised-wut](http://alltheragefaces.com/face/surprised-wut)

我对这些类型的 URL 的 .htaccess 规则如下所示：

`RewriteRule ^face/(.*)$ face.php?term=$1`

我该怎么做才能使这两个 URL 转到同一页面？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-27T08:03:58.310

你可以使用这个：

```
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule ^(.+)/$ /$1 [L,R=301] 
```

第一行说：“如果它不是目录”（因为后面的斜杠会有意义）。第二行说：将所有内容从开头重定向到尾部斜杠并结束到那里的所有内容，没有尾部斜杠。

把你自己的`RewriteRule`放在那里（在那个下面，而不是上面），这样你的正常重定向在尾部斜杠被删除后仍然有效。

（这显然`/body/`也适用于，而不仅适用于`/face/`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-11T12:11:04.163

我使用此规则稍作修改以维护任何子文件夹结构

```
# Redirect Trailing Slashes If Not A Folder...
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} (.+)/$
RewriteRule ^ %1 [L,R=301] 
```

# jira - 尝试创建问题时，JIRA 问题类型下拉列表为空白

> ID：10346946
> 
> 赞同：2
> 
> 时间：2012-04-27T07:59:44.260
> 
> 标签：jira

当我尝试创建 JIRA 问题时，我的问题类型列表为空白。但它在另一台 PC 上运行良好。

我需要激活任何设置吗？先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T03:48:02.460

如果没有关于两台机器之间差异的更详细背景，这里是我想到的可能的修复：

*   确保您使用具有相同用户权限的相同用户帐户
*   检查您是否使用安装了所有依赖项的同一浏览器（java）
*   考虑从管理面板重新索引 JIRA
*   检查您的计划以确保您没有不适用的欺骗

希望这可以帮助。

# swing - 暂停 SwingWorker 执行，直到 Component 停止调整大小

> ID：10346951
> 
> 赞同：1
> 
> 时间：2012-04-27T08:00:15.103
> 
> 标签：swing, repaint

我正在使用重绘来触发`SwingWorker`. `JPanel`该工作人员根据应用程序中的自动调整选项自动重新创建图像以适应封闭的宽度。

问题是导致内存不足异常。这是因为图像具有很大的分辨率，并且当窗口被拖动调整大小时，工作人员会被连续调用。

我试图避免这种情况的只有`execute()`当`isDone()`它是真的时。但是我觉得有更好的方法来做到这一点。也许通过使用某种计时器？你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T01:52:37.083

这是一个小的左侧字段，但基本上我所做的是使用 javax.swing.Timer。基本思想是仅在计时器触发时执行操作。

```
private Timer timer;

.
.
.

timer = new Timer(250, new ActionListener() {

    @Override
    public void actionPerformed(ActionEvent e) {

        // Perform required action
        // Start the swing worker ??

    }
});
timer.setCoalesce(true);
timer.setRepeats(false);

.
.
.

public void setBounds(int x, int y, int width, int height) {

    // Force the time to start/reset
    timer.restart();

    super.setBounds(x, y, width, height);

} 
```

# javascript - 如何将外部 javascript 文件添加到 Zend Framework 2 应用程序？

> ID：10346952
> 
> 赞同：13
> 
> 时间：2012-04-27T08:00:25.560
> 
> 标签：javascript, jquery, zend-framework, zend-framework2

我需要将 jQuery 和其他 javascript 文件添加到我的 Zend Framework 项目中。我正在尝试使用动作控制器来做到这一点：-

```
public function userinfoAction()
{   
    $this->view->headScript()->appendFile($basePath .'/js/validate_jquary.js');
    $this->headScript()->appendFile('http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'); 
    return new ViewModel();
} 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T10:14:25.527

以下是如何在 ZF2*的控制器*中使用视图助手来解决您的问题：

```
public function someAction()
{                 
     $this->getViewHelper('HeadScript')->appendFile($basePath . '/js/somejs.js');    
}

protected function getViewHelper($helperName)
{
    return $this->getServiceLocator()->get('viewhelpermanager')->get($helperName);
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-30T04:11:25.967

```
 $this->HeadScript()->appendFile('http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js','text/javascript');
 $this->HeadScript()->appendFile('http://localhost/zend/public/js/validate_jquary.js','text/javascript'); 
```

视图中的这段代码没问题。但我不知道这是正确的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-30T11:51:04.677

在 ZF2 的控制器中使用视图助手的最简单方法可能是通过渲染器对象：

```
public function someAction()
{                 
     $renderer = $this->serviceLocator->get('Zend\View\Renderer\RendererInterface');
     $renderer->headScript()->appendFile($renderer->baseUrl() . '/js/somejs.js');
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T11:53:41.437

你可以试试这个。它对我来说很好用

//将这些行写入您的 SampleController

```
public function someAction()
{

$this->getViewHelper('HeadScript')->appendFile('/js/yourjsfile.js');
$this->getViewHelper('HeadScript')->appendFile('/js/jquery/jquery.min.js');
} 
```

// 在控制器中写入以下方法

```
protected function getViewHelper($helperName)
{

    return $this->getServiceLocator()->get('viewhelpermanager')->get($helperName);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-27T09:43:28.663

您没有使用视图添加 jquery：

```
 $this->view->headScript()->appendFile('http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-02T11:58:40.137

一个好的方法是在你的控制器操作中使用下面的代码让你说你想包含 paginator.js

```
$this->view->headScript()->appendFile($this->view->baseUrl().'/js/paginator.js'); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-15T10:03:05.110

以上所有内容都给我带来了大量错误，而 $this->view->headScript() 完全是关于 Zend Framework 1 的。这对我有用：

在控制器的类定义之前的控制器中添加：

```
use Zend\View\Helper\HeadScript; 
```

然后你可以在你的控制器中使用这样的东西（确保你可以在任何动作中使用它，而不仅仅是在构造函数中）：

```
/**
 * @var Zend\View\Helper\HeadScript
 */
protected $headScript;

function __construct() {
    $this->headScript = new HeadScript();
    $this->headScript->appendFile('http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js','text/javascript');
} 
```

然后你应该把它添加到你的布局中：

```
<?php echo $this->headScript(); ?> 
```

# php - PHP & FDPF 错误“致命错误：在 ExpressionEngine 中调用非对象上的成员函数”

> ID：10346961
> 
> 赞同：1
> 
> 时间：2012-04-27T08:00:54.703
> 
> 标签：php, expressionengine, fpdf

我正在使用 FPDF 将频道数据从 ExpressionEngine 导出到 PDF 文件。我使用的 FPDF-stuff 是我之前在另一个项目中使用的代码，所以它*应该可以*工作。FPDF 对象的普通方法可以工作，但是一旦它们被包装在一个函数中，我就会得到：

```
Fatal error: Call to a member function MultiCell() on a non-object 
```

所以这有效：

```
include '../apps/assets/fpdf.php';
// setup the PDF object:
$pdf = new FPDF();
$pdf->SetMargins(0,0,0);
$pdf->SetAuthor("Author");
$pdf->addPage("P", "A4");
$pdf->SetTextColor(82,82,82);

// write something to the PDF:
$pdf->MultiCell(80, 6, "some text here", 0, "L"); 
```

但这不会：

```
include '../apps/assets/fpdf.php';
// setup the PDF object:
$pdf = new FPDF();
$pdf->SetMargins(0,0,0);
$pdf->SetAuthor("Author");
$pdf->addPage("P", "A4");
$pdf->SetTextColor(82,82,82);

writeStuff("some stuff to write");

function writeStuff($stuff) {
    global $pdf;
    $pdf->MultiCell(80, 6, $stuff, 0, "L");
} 
```

最后一段代码抛出上面发布的错误。

这很奇怪，因为之前完全相同的设置确实有效。主要区别在于这一次，PHP 被包装在一个 ExpressionEngine 模板中。该模板确实启用了 PHP 解析，并且我在同一个应用程序中使用了许多其他模板，其中有很多可以工作的 PHP。

它与ExpressionEngine的解析顺序有关吗？是否在创建 $pdf 对象之前调用了方法“writeStuff”？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T18:54:14.317

问题是 EECMS 模板中的 php 是使用 eval() 运行的。这意味着您的 php 正在**本地**范围内运行。因此，您必须在函数定义内外的变量上使用 GLOBAL 关键字。

例子：

```
<?php

global $foo;
$foo = 'Hello World!';

bar();

function bar() {
  global $foo;
  echo $foo;
}
?> 
```

因此，对于您的模板，只需将其更改为以下内容：

```
include '../apps/assets/fpdf.php';
// setup the PDF object:
global $pdf;
$pdf = new FPDF(); 
```

曾经有一篇很棒的知识库文章，但现在似乎已经消失了。我能够获得原始文件的回溯存档：

[http://web.archive.org/web/20090207200929/http://expressionengine.com/knowledge_base/article/my_php_functions_cannot_reference_global_php_variables/](http://web.archive.org/web/20090207200929/http://expressionengine.com/knowledge_base/article/my_php_functions_cannot_reference_global_php_variables/)

希望有帮助！

# jquery - plupload 文件不可用/未找到

> ID：10346966
> 
> 赞同：0
> 
> 时间：2012-04-27T08:01:09.697
> 
> 标签：jquery, jquery-plugins, file-upload, plupload

我使用 pluploader 和 jquery 进行文件上传。我仍在寻找这个问题的解决方案：

添加文件后，用户在硬盘上重命名该文件。在 IE 中，无论如何都会发送带有空文件内容的请求。（这对我来说没问题）但在 FF (V11) 中，请求似乎永远不会结束。

不幸的是，`"Error"`触发器不起作用。在我查询但它只是“2”（“上传”）而不是“失败” `"UploadFile"`。`"BeforeUpload"``file.status`

有人知道如何停止请求，或者如何检查文件是否仍然可用？

在此先感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T09:23:52.763

据我所知，我一直在使用 plupload。一旦用户完成上传，他可以做任何他需要的事情。在上传之前或上传时，您可以检查`filenames`并找到`duplicates`它们是否存在。

**更新：**

只有一种方法可以做到这一点。

检查上传的重复文件名。为此，您需要执行此操作

```
uploader.bind('FilesAdded', function(up, files) {
        var i = 0;
        while (i++ < up.files.length) {
            var ii = i;
            while (ii < up.files.length) {
                if (up.files[i - 1].name == up.files[ii].name) {
                    uploader.removeFile(up.files[ii]);    
                } else {
                    ii++;
                }
            }
        }
}); 
```

一旦您选择文件，如果存在具有相同文件名的文件，它将删除上传的文件并继续下一个文件，依此类推。

# c# - 底层连接已关闭：接收时发生意外错误

> ID：10346968
> 
> 赞同：2
> 
> 时间：2012-04-27T08:01:19.790
> 
> 标签：c#, linq, web-services, rest, entity-relationship

这是来自这里的后续问题：关于我收到的答案[的创建关系的 linq 问题。](https://stackoverflow.com/questions/10345489/linq-issue-with-creating-relationships)我不确定发生了什么，但我收到一个错误：

```
The underlying connection was closed: An unexpected error occurred on a receive. 
```

这就是异常发生的地方：

```
 string uriGroup = "http://localhost:8000/Service/Group";
    private void ListGroups_Click(object sender, RoutedEventArgs e)
    {
        XDocument xDoc = XDocument.Load(uriGroup); // this line
        var groups = xDoc.Descendants("Group")
            .Select(n => new
            {
                GroupName = n.Element("GroupName").Value,
                GroupHeader = n.Element("GroupHeader").Value,
                TimeCreated = DateTime.Parse(n.Element("TimeAdded").Value),
                Tags = n.Element("Tags").Value, 
                Messages = n.Element("GroupMessages").Value
            })
            .ToList();

        dataGrid2.ItemsSource = groups;
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-27T08:24:19.370

由于您要返回一个`List`对象，因此您可能已经超过了[MaxItemsInObjectGraph](http://social.msdn.microsoft.com/forums/en-US/wcf/thread/c85f3ed2-0b55-4375-af79-5926b6cc527c/)。您可以通过修改 web.config（或 app.config）来增加该值：

```
<behaviors>
    <behavior>
        <dataContractSerializer maxItemsInObjectGraph="6553600" />
    </behavior>
</behaviors> 
```

您可能还需要考虑查看常见的嫌疑人：

*   `<readerquota>`价值观
*   MaxReceivedMessageSize
*   最大缓冲区大小
*   最大缓冲池大小

您应该启用[WCF 跟踪](http://msdn.microsoft.com/en-us/library/ms733025.aspx)，因为它将包含更详细的错误。是的，这甚至适用于自托管应用程序。

# android - 如何使用 Phonegap 在 Sencha Touch2 中从视图分派到控制器

> ID：10346973
> 
> 赞同：1
> 
> 时间：2012-04-27T08:01:30.220
> 
> 标签：android, cordova, sencha-touch-2

我的视图 (MyFormPanel)

```
var controllers = Ext.define("MyApp.controller.formcontroller", {
    extend: "Ext.app.Controller",
    config: {
        refs: {
            username: "username"

 },
},
launch: function () {
     alert('Controller launched');

    },
    init: function () {
         alert('Controller init');
    },
myaction : function (options) {
    alert('options');
      var username = options.username;
      this.render ({
        xtype: 'MyATM',
        username: username})}
});
var formPanel = Ext.create('Ext.form.Panel', {
    fullscreen: true,
    scrollable: 'vertical',
    layout: {
        align: 'center',
        type: 'vbox'
    },
    items: [
            {
                xtype: 'toolbar',
                docked: 'top',
                title: 'Login Form'
            },
            {
        xtype: 'fieldset',
        items: [  
                {  
                    xtype: 'fieldset',   
                    title:'Enter user name & password',  
                    defaults: {  
                        required: true,  
                        labelAlign: 'left',  
                        labelWidth: '50%'  
                    },  
                    items: [  
                    {  
                        xtype: 'textfield',  
                        name : 'username',  
                        label: 'User Name', 
                        allowBlank:false,
                        useClearIcon: true  
                    }, {  
                        xtype: 'passwordfield',  
                        name : 'password',  
                        label: 'Password', 
                        allowBlank:false,
                        useClearIcon: false  
                    }, 
                    {
                        xtype: 'checkboxfield',
                        required:false,
                        id: 'RememberMe',
                        name: 'RememberMe',
                        label: 'Remember Me',
                        labelWidth: '50%'
                        },
                        {
                            xtype: 'button',
                            ui: 'confirm-round',
                            text: 'Log In' , 
                                handler: function() {
                                    //Ext.Msg.alert('Form Values', JSON.stringify(formPanel.getValues(), null, 2));

                                    Ext.ControllerManager.get('formcontroller').ControllerMethod({myaction: myaction});

                                }
                        }

                    ]  
                }],  
    }]
});

formPanel.add({
    xtype: 'toolbar',
    docked: 'bottom',
    layout: { pack: 'center' },

}); 
```

我的控制器（FormController）

```
 Ext.define("MyApp.controller.formcontroller", {
    extend: "Ext.app.Controller",
    config: {
        refs: {
            username: "username"

 },
},
launch: function () {
     alert('Controller launched');

    },
    init: function () {
         alert('Controller init');
    },
myaction : function (options) {
    alert('options');
      var username = options.username;
      this.render ({
        xtype: 'MyATM',
        username: username})}
}); 
```

我在 android 2.3 上使用 Sencha touch2 和 Phonegap 1.4。当我尝试在登录按钮上将视图移动到控制器时，单击处理函数以调用控制器，我收到错误，Ext.dispatch 未定义为函数。告诉我如何将视图移动到控制器的实际方式，反之亦然。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T16:09:41.747

`Ext.dispatch`不是 Sencha Touch 2 中推荐的使用方式。它可能会被删除...

无论如何，从控制器监听和处理视图事件的最佳方法是：

```
Ext.define("MyApp.controller.formcontroller", {
extend: "Ext.app.Controller",
config: {
  refs: {
    loginButton: "#login-button" // set an id for your login button and this ref works
  },
  control: {
    loginButton: {
      tap: 'handleLogin',
    }
  handle_login: function(){whatever you want to do here}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-10T06:38:40.187

而在建筑师中
...... 你去按钮的配置，然后b。搜索事件处理程序，以及 c。按下右侧的 [+] 按钮。
d。添加“基本处理程序” e。选择 TAP 事件 f。给它一个名字（onButtonSendTap 或其他） g. 按完成 h。鼠标右键 i. 转换为动作 j。选择 [新控制器] 或现有控制器 k。如果您选择新控制器，请给它一个名称，然后瞧，您的处理程序就在控制器中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-10T07:26:15.433

在建筑师...

一个。你去按钮的配置，和

湾。搜索事件绑定，以及

C。按下右侧的 [+] 按钮。

d。添加“基本处理程序”

e. 选择 TAP 事件

F。给它一个名字（onButtonSendTap 或其他）

G。按完成

H。鼠标右键

一世。转化为行动

j. 选择[新控制器]或现有控制器

ķ。如果您选择新控制器，请给它一个名称，然后瞧，您的处理程序就在控制器中。

# tomcat - 在 Tomcat 7 中使用 NIO Http 连接器 - 是否将我限制为一个连接？

> ID：10346974
> 
> 赞同：2
> 
> 时间：2012-04-27T08:01:35.057
> 
> 标签：tomcat, nio

我想创建一个基本上保持连接的服务，直到建立第二个连接来告诉它停止保持第一个连接。

将 NIO Http 连接器与所有默认设置一起使用（在 Tomcat 和连接器中）。

我使用一个线程（很像 tomcat aio doc 中的“messageSender”类）来保存第一个响应并每 5 秒写入/刷新一个字符。这工作正常 - 线程持有它并在提示时释放它。唯一的问题是服务（“事件”方法）在我关闭第一个连接之前没有得到第二个调用（对于第二个连接的“开始”事件）。

所以重复一遍，这就是发生的事情：

连接 1 - > tomcat 创建调用 myService.event(event) 的线程“http-nio-8081-exec-2”；

myService.event 将响应提供给“myDaemonThread”（它保存引用并每 5 秒写入响应）。退出方法。

'myDaemonThread' 使用 "synchronized (this){ this.wait(5000); }" 等待（最初使用 Thread.sleep() 但为了使其工作，我改为 wait() ）

连接 2 - > 已启动但没有线程调用 myService.event

连接 1 在浏览器中停止，tomcat 创建调用 myService.event(event.END) 的线程“http-nio-8081-exec-4”。退出方法。

tomcat（现在或更早创建？

……其余的都不重要了。

所以这似乎违背了使用 NIO 的全部目的......有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T06:48:16.813

## 可能的原因

1.  Tomcat 不允许同时来自同一个客户端的两个相同请求
2.  客户端在“幕后”对相同的请求进行排队。

无论如何，结果是，如果我为第二个请求更改客户端，一切正常。如果我在同一个客户端的第二个请求中添加垃圾参数，它工作正常。

## 解决方案

向请求中添加垃圾参数

# java - Servlet 程序中的编译错误

> ID：10346984
> 
> 赞同：0
> 
> 时间：2012-04-27T08:01:58.683
> 
> 标签：java, eclipse, servlets

在尝试编译程序时，我在 servlet 类中遇到编译错误。错误是

```
 Access restriction: The type HttpServlet is not accessible 
due to restriction on required library D:\Temp\eclipse\plugins\javax.servlet_2.5.0.v201103041518.jar 
```

我在第一行本身遇到的错误-

```
public class Servlet extends HttpServlet 
```

我正在使用 Eclipse indigo 和 Apache Tomcat 7 来运行此代码。因为我是 servlet 的新手，所以我不熟悉这个错误。请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:46:10.400

“Servlet”已经是 Servlet API 中接口的名称。如果您查看[API Javadoc](http://docs.oracle.com/cd/E17802_01/products/products/servlet/2.5/docs/servlet-2_5-mr2/javax/servlet/http/HttpServlet.html)，您会发现它实际上`javax.servlet.http.HttpServlet`实现了`javax.servlet.Servlet`. 尝试为您的班级使用不同的名称，例如`MyServlet`

# cs-cart - cs-cart：免费/开源多列子菜单/下拉

> ID：10346985
> 
> 赞同：0
> 
> 时间：2012-04-27T08:02:00.867
> 
> 标签：cs-cart

是否有任何免费的多列下拉/子菜单可用。

我在[这里](https://stackoverflow.com/questions/7822891/magento-multi-column-dropdown-menu)找到了magento 。但我正在寻找 cs-cart 3。

这是我找到的[一个](http://www.p2pdesign.com/shop/multi-column-dropdown.html)，但不是免费插件。而且我不确定它是否会达到我的目的。

有没有人知道，有没有免费的？否则我可能不得不玩css。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:05:30.083

多列已经内置在 cs-cart 3 下。[检查一下](http://demo.cs-cart.com/professional/)

# php - 谷歌分析替代品？

> ID：10346988
> 
> 赞同：0
> 
> 时间：2012-04-27T08:02:29.267
> 
> 标签：php, mysql, analytics

是否有其他免费的跟踪软件，如谷歌分析，您可以在其中创建漏斗并查看有多少人执行了特定操作，例如

2012 年 4 月 27 日

```
went to wqebsite (100) -> leave site from homepage (40) (average stay 18 seconds)
 |
 V
go to products (60) -> went to shopping cart page (12)

 | --|
 |   ---> closed site (43)
 V
went to terms page (5) 
```

或为kissmetrics之类的用户分配匿名ID，稍后您可以看到该用户完成的所有操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T08:07:56.453

请参阅维基百科上的[“网络分析软件列表”](http://en.wikipedia.org/wiki/List_of_web_analytics_software)，尤其是“托管”部分。

您还可以查看 CloudSurfing 的[Google Analytics 竞争对手](http://www.cloudsurfing.com/site/3582-Google-Analytics/competitors/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:12:02.007

Yandex 在俄罗斯有一个，但不在维基百科列表中。它看起来也很不错。我看到它用于俄罗斯网站，但它也有英文版，就像谷歌一样。metrika.yandex.com 英文版。

# php - 使用 ImageMagick 重命名上传的文件

> ID：10346994
> 
> 赞同：-1
> 
> 时间：2012-04-27T08:02:50.180
> 
> 标签：php

在我当前的项目中，我正在使用带有 PHP 和 ImageMagick 的 plupload 插件，并且它工作正常 - 现在我的下一个任务是将上传的文件重命名为小写。

要重命名这些文件，我首先将上传的图像存储在扩展名为“.temp”的临时文件夹中，然后将文件移动到主文件夹并尝试重命名。该函数第一次执行时，如果没有匹配的图像，它将完美地存储它，但第二次执行它就不行了。该函数应检查现有文件名，并应存储具有递增索引的重复，即 image_1.jpg、image_2.jpg 等，但它不会这样做，它只是覆盖图像，即 image.jpg。

这是我的代码片段：

```
 $filename = $this->input->post('filename');
  $root  = $_SERVER["DOCUMENT_ROOT"]."/uploads/";
  $source_image  = $root.'temp/'.$filename;

  $image_name = explode(".",$filename);
  rename($source_image, $source_image. '.temp');
  copy($source_image.'.temp', $root.$filename.'.temp');
  unlink($source_image.'.temp');

  $exp_temp_img_slash = explode(".",$filename);
  $rename_img_a = strtolower($exp_temp_img_slash[0]);
  $rename_img_b = $exp_temp_img_slash[1];

  if (file_exists($root.$rename_img_a .".".$rename_img_b)) {
      $count=1;

      while (file_exists($root. $rename_img_a ."_".$count. ".".$rename_img_b)) {
          $count++;
           $rename_img = strtolower($rename_img_a . '_' . $count . ".".$rename_img_b);
      }

      $renamed_image = $_SERVER["DOCUMENT_ROOT"]."/uploads/".$rename_img;
      rename($root.$filename.".temp",$renamed_image);
   } else {
       $rename_img = strtolower($rename_img_a .".".$rename_img_b);
       $renamed_image = $_SERVER["DOCUMENT_ROOT"]."/uploads/".$rename_img;
       rename($root.$filename.".temp",$renamed_image);
   } 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:10:09.890

```
shell_exec($imagemagick_folder."convert ".$from . $fileName." -resize ".$width."x".$height." -quality 95 ".$to.$fileName); 
```

$imagemagick_folder 是安装 imagemagick 的文件夹（例如 C:\imagemagick）

$from 和 $to 是开始和目标文件夹

如果要调整图像大小，$width 和 $height 是可选的

# php - PHP排序按权重排序的多维数组

> ID：10346997
> 
> 赞同：0
> 
> 时间：2012-04-27T08:03:04.167
> 
> 标签：php, sorting, matrix

我刚才问了这个问题，但我问错了，所以我很抱歉。

我希望有一种简单的方法可以做到这一点，而无需大量循环。

我有以下方式的矩阵：

```
 Foo1    Foo2    Foo3 ....   FooN
Jan    1       8       5            4
Feb    10      12      15          11
Mar    12      7       4            3
Apr    10      16      7           17 
```

假设以下数组：

```
$arrayMonths = array(
       'jan' => array(1, 8, 5,4)
       'feb' => array(10,12,15,11)
       'mar' => array(12, 7, 4, 3)
       'apr' => array(10,16,7,17)
    ); 
```

我需要对上面的数组进行排序并以下列方式显示它：

```
array[apr][FooN] = 17
array[feb][Foo3] = 15
array[mar][Foo1] = 12
array[jan][Foo2] = 8 
```

本质上，我需要得到上述权重的最大总和，一个月只能有一个 foo，一个 foo 只能有一个月。在上面的示例中，结果将是 52。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:07:42.073

PHP 函数[`max()`](http://php.net/manual/en/function.max.php)是这里的关键：

```
$sum = 0;
foreach ($array as $row) {
  $sum += max($row);
}
echo $sum; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T08:11:53.110

```
$totalArr = array();
$total = 0;

foreach($arrayMonths as $month => $row)
{
    $high = max($row);
    $totalArr[$month]['foo'] = $high;
    $total += $high;
}

echo "Total is: " . $total . "\n\n";
print_r($totalArr); 
```

**输出：**

```
Total is: 52

Array
(
    [jan] => Array
        (
            [foo] => 8
        )

    [feb] => Array
        (
            [foo] => 15
        )

    [mar] => Array
        (
            [foo] => 12
        )

    [apr] => Array
        (
            [foo] => 17
        )

) 
```

`uasort()`如果要对新数组进行排序， 请使用。[http://php.net/manual/en/function.uasort.php](http://php.net/manual/en/function.uasort.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-27T08:12:51.447

研究这种方式。 [http://www.php.net/manual/en/function.uasort.php](http://www.php.net/manual/en/function.uasort.php)

输入数组和对您自己编写的比较函数的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T08:18:32.793

见演示：[http ://codepad.org/vDI2k4n6](http://codepad.org/vDI2k4n6)

```
$arrayMonths = array(
       'jan' => array(1, 8, 5,4),
       'feb' => array(10,12,15,11),
       'mar' => array(12, 7, 4, 3),
       'apr' => array(10,16,7,17),
    );

$position = array("Foo1","Foo2","Foo3","FooN");
$set = array();

foreach($arrayMonths as $key => $value)
{
    $max = max($value);
    $pos = array_search($max, $value);
    $set[$key][$position[$pos]] = $max ;
}

function cmp($a, $b)
{
    foreach($a as $key => $value )
    {
        foreach ($b  as $bKey => $bValue)
        {
            return $bValue - $value ;
        }
    }

}

uasort($set,"cmp");
var_dump($set); 
```

输出

```
 array
      'apr' => 
        array
          'FooN' => int 17
      'feb' => 
        array
          'Foo3' => int 15
      'mar' => 
        array
          'Foo1' => int 12
      'jan' => 
        array
          'Foo2' => int 8 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-27T08:18:40.813

```
$arr_new = array();
foreach(array_keys($arrayMonths) as $h) {

    $int_max = max($arrayMonths[$h]);
    foreach(array_keys($arrMonths[$h]) as $h2)
        if ($arrMonths[$h][$h2] == $int_max) {

            $arr_new[$h]["foo{$h2}"] = $int_max;
            break;

        }

} 
```

# c++ - 铸造 void* 并将其放入 ostringstream

> ID：10346999
> 
> 赞同：0
> 
> 时间：2012-04-27T08:03:12.333
> 
> 标签：c++, casting, void-pointers

我`void *`想将包含的内容放入字符串中以输出它有问题，我知道在编译时编译器不知道指针指向的内容，所以我认为使用一种强制转换（强制`*(void*)`转换为字符串）静态演员：

```
 std::string get_Info_Field (std::string nameTab,int IDF)   

  {     ostringstream os;
        iter=Inst_Data.find(nameTab);

        if(iter!= Inst_Data.end())
        {   iterF=(iter->second).find(IDF);
            if(iterF!=(iter->second).end())
                    {os<<*static_cast<std::string*>(iterF->second.value);}
            else    { os<<""; }
        }
        else {  os<<"";}

    return os.str();
}; 
```

这`iterF->second.value`是一个`void*`我想获得它的值，它可以指向任何类型（int，string，float，long，char ..），我的问题是：这安全吗？无论类型如何，都会返回正确的指针值？我用`int`它测试过，但我不确定其余的。

请任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T08:06:07.293

如果您知道 the`void*`恰好指向 a`std::string`那么是的，那么它是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T08:05:27.187

您不能安全地将指向任意值的指针转换为字符串并期望发生一些明智的事情；绝对最低限度，您还需要知道所指向事物的大小，并且您可能还需要注意嵌入`NUL`的 s 等。如果您*知道*它始终是 a，`std::string`那么您可以`std::string`安全地转换为 a；但是您必须确定地知道，否则您正在寻求核心转储或随机输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-27T08:07:44.293

不，如果 void* 指向说 int 并且您将其转换为 std::string，那么您绝对不能这样做并期望得到合理的结果。您将需要在某处存储类型信息，或者通过使用多态类层次结构来包含您的数据，通过使用 boost::variant，通过编写自己的“可区分联合”或其他一些技术。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-27T08:12:15.717

绝对不安全。你怎么能确定你指向的是一个字符串？你最初是如何保留这段记忆的？

听起来像是一个设计问题——为什么会有你不知道类型的*数据块漂浮在周围？*您是否正在尝试实现一种`variant`类型？