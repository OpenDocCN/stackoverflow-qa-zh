# StackOverflow 问答 11425000-11425999

# drupal - Drupal 站点信息中有多个电子邮件帐户？

> ID：11425000
> 
> 赞同：1
> 
> 时间：2012-07-11T03:11:42.817
> 
> 标签：drupal

我在我的网站上创建了 4 个管理员，我希望他们所有人都能收到电子邮件。我已经在站点信息中配置了站点电子邮件地址，但我只能在该字段中添加一个值。有什么方法可以向该字段添加更多电子邮件地址吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:36:57.837

我不知道如何在 Drupal 中执行此操作，但我会为公司设置一个电子邮件别名/组/列表。site-messages@example.com，然后将他们所有的电子邮件地址添加到该电子邮件中。如果您有 Google Apps 邮件或任何其他强大的电子邮件提供商，这很容易做到。

# css - 使用 Chris Coyier 全宽 hack 没有高度

> ID：11425002
> 
> 赞同：1
> 
> 时间：2012-07-11T03:12:02.467
> 
> 标签：css, height, width

我在我正在构建的网站上使用了 Chris Coyier 的全宽 hack，但我不知道如何让 div 具有它所包含的任何内容的高度。

通常我会通过向容器添加溢出：自动来实现这一点，但如果我这样做，它会破坏黑客。是否有可能达到一个高度并仍然使用这个技巧？

你可以在这里看到我的问题：http: [//beta.revival.tv/](http://beta.revival.tv/)

这是我的CSS：

```
#content-wrap:before, #content-wrap:after {content: ""; position: absolute; top: 0; bottom: 0; width: 9999px;}

#content-wrap:before {right: 100%;}

#content-wrap:after {left: 100%;}

#content-wrap, #content-wrap:before, #content-wrap:after {background:#666;}

#content-wrap {
position: relative;
width:1000px;
margin:0 auto;
padding:25px 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T13:45:40.830

您可以添加另一个 div 以包含 #content-wrap div 内的内容，然后应用 overflow: auto; 和宽度：100%；对它

```
<div id="content-wrap">
    <div id="content"></div>
</div>

#content { 
    overflow: auto;
    width: 100%;
} 
```

我不知道你的 html，但如果问题是由 div 内的浮动元素引起的，你可能还想尝试使用 display: inline-block; 反而

# jquery - 添加表单（CRUD）问题的 ASP.NET MVC 弹出部分视图

> ID：11425003
> 
> 赞同：2
> 
> 时间：2012-07-11T03:12:06.823
> 
> 标签：jquery, asp.net-mvc, popup, crud, asp.net-mvc-partialview

我正在创建一个 MVC 网站，它利用弹出窗口的部分视图来处理我所有的 CRUD 事务。请注意，我的应用程序已经可以完美地处理这些 CRUD 操作（LINQ-To-Entity）。但是，我的弹出表单有问题。

以下是我的代码`_Add.cshtml`：

```
@model MyStore.Models.MyModels.ProductsModel

@{
    Layout = null;
}

@using (Ajax.BeginForm("_Add", "Products", new AjaxOptions
{
    InsertionMode = InsertionMode.Replace,
    HttpMethod = "POST",
    OnSuccess = "addSuccess"
}, new { @id = "addForm" }))
{
    @Html.ValidationSummary(true)      
    <div id="add-message" class="error invisible"></div>

    <fieldset>
        <legend>Products</legend>

        @Html.HiddenFor(m => Model.ProductCode)

        <div class="editor-label">
            @Html.LabelFor(model => model.ProductName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ProductName)
            @Html.ValidationMessageFor(model => model.ProductName)
        </div>

        <div class="editor-label">
            @Html.LabelFor(model => model.Price)
        </div>
        <div class="editor-field">
            @Html.TextBoxFor(model => model.Price)
            @Html.ValidationMessageFor(model => model.Price)
        </div>
    </fieldset>
} 
```

以下是我的代码`Controller`：

```
[HttpGet]
public ActionResult _Add(string productCode)
{
    ProductsModel model = newProductsModel();
    model.ProductCode = ProductCode ;
    return PartialView(model);
}

[HttpPost]
public JsonResult _Add(ProductsModel model)
{
    if (ModelState.IsValid)
    {
        ProductsManager prod = new ProductsManager();
        Products pa = new Products();

        pa.ProductCode = model.ProductCode;
        pa.ProductName = model.ProductName;
        pa.Price = model.Price;

        prod.AddProduct(pa);

        return Json(HelperClass.SuccessResponse(pa), JsonRequestBehavior.AllowGet);
    }
    else
    {
        return Json(HelperClass.ErrorResponse("Please review your form"), JsonRequestBehavior.DenyGet);
    }
} 
```

请注意，`_Add.cshtml`这是通过我在互联网上找到的 Popup.js 呈现的部分视图。它通过以下代码呈现：

```
@Html.ActionLink("[Add Product]", "_Add", new { ProductCode = @ViewData["ProductCode"] }, new { @class = "editLink" }) 
```

这工作正常。我的意思是它将产品添加到我的数据库中。但我的问题是在单击`Proceed`按钮时，我从页面中得到这个弹出下载对话框：

![截图一](../Images/0cb53a632e418f16867a3ea3288cb5f5.png)

有人可以帮我吗？我有一种预感，这是因为`HttpMethod`我正在使用（POST、PUT、GET、DELETE），但我不确定哪个是正确的，或者它是否真的是问题所在。

任何帮助将不胜感激！PS。对不起，很长的帖子。

* * *

**编辑：**

这是我为这个项目遵循的教程：[http ://ricardocovo.com/2012/04/06/asp-mvc3-editing-records-with-jqueryui-dialogs-and-ajaxforms-razor-version/](http://ricardocovo.com/2012/04/06/asp-mvc3-editing-records-with-jqueryui-dialogs-and-ajaxforms-razor-version/)

* * *

**编辑：**

下面是我正在使用的 jscript 代码。它与我遵循的教程中的基本相同。我只需要在最后一种方法上注释掉几行。

另外，我正在使用 MVC 4。希望这会有所帮助！谢谢！

```
var linkObj;
$(function () {
    $(".addLink").button();

    $('#addDialog').dialog({
        autoOpen: false,
        width: 400,
        resizable: false,
        modal: true,
        buttons: {
            "Update": function () {
                $("#add-message").html(''); //make sure there is nothing on the message before we continue                         
                $("#addForm").submit();
            },
            "Cancel": function () {
                $(this).dialog("close");
            }
        }
    });

    $(".addLink").click(function () {
        //change the title of the dialog
        linkObj = $(this);
        var dialogDiv = $('#addDialog');
        var viewUrl = linkObj.attr('href');
        $.get(viewUrl, function (data) {
            dialogDiv.html(data);
            //validation
            var $form = $("#addForm");
            // Unbind existing validation
            $form.unbind();
            $form.data("validator", null);
            // Check document for changes
            //$.validator.unobtrusive.parse(document);
            // Re add validation with changes
            //$form.validate($form.data("unobtrusiveValidation").options);
            //open dialog
            dialogDiv.dialog('open');
        });
        return false;
    });

});

function addSuccess(data) {
    if (data.Success == true) {
        //we update the table's info
        //var parent = linkObj.closest("tr");
        //parent.find(".carName").html(data.Object.Name);
        //parent.find(".carDescription").html(data.Object.Description);
        //now we can close the dialog
        $('#addDialog').dialog('close');
        //twitter type notification
        $('#commonMessage').html("Add Complete");
        $('#commonMessage').delay(400).slideDown(400).delay(3000).slideUp(400);
    }
    else {
        $("#add-message").html(data.ErrorMessage);
        $("#add-message").show();
    }
} 
```

我注释掉了这两行：

```
$.validator.unobtrusive.parse(document);
$form.validate($form.data("unobtrusiveValidation").options); 
```

因为不评论它们会在运行时给我以下错误： ![在此处输入图像描述](../Images/5d75388f8370d3fa5878317a7769f3d2.png)

这使我认为这个问题是由于不显眼的验证造成的。就像下面 Xnake 发布的链接一样，我也遇到了同样的问题。唯一不同的是，Thread Opener 必须在他的 Web.config 文件上禁用不显眼的验证来解决问题，而我不能这样做，因为我的代码正在使用不显眼的验证。

非常感谢您提供任何帮助。非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T18:35:35.790

当我试图找到一个易于重复使用的弹出窗口的约定时，我遇到了类似的问题，有些 CRUD 有些不是。我没有在每个页面上都包含验证脚本，而是在我的布局中添加了一个名为的部分，`scripts`并让每个页面添加他们需要的脚本（在这种情况下，如果我的页面上有表单元素，则输入验证脚本）。请注意，我将 Unobtrusive Ajax 脚本保留在默认布局中，因为它与验证无关，并且在我的足够多的页面中使用以保证将其保留在默认布局中。

```
<html>
<head></head>
</body>
    @RenderBody()
    @RenderSection("Scripts", required: false)
</body>
</html> 
```

在 Partials 的情况下，我创建了一个新的布局，我只用于定义了相同部分但没有其他周围 HTML 的部分。

```
@RenderBody()
@RenderSection("Scripts", required: false) 
```

这是一个非常原始的示例（特别是因为它没有可见的表单元素），但您明白了。

```
@model Product
@{
    Layout = "~/Views/Shared/_ModalLayout.cshtml";
}
@section Scripts
{
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
}
<section>
    <header><h3>Remove Product?</h3></header>
    Are you sure you wish to remove @Model.Name?
    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()
        @Html.HiddenFor(x => x.ProductId)
        <input type="submit" value="Remove" />
    }
</section> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-16T02:10:19.017

我已经解决了我的问题！显然，我必须在我的 MasterPage 中包含以下 js 文件。希望这可以帮助！

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T06:50:31.377

这是因为您在 _Add (post) 中返回 JSON 数据，因此浏览器会尝试下载它而不是渲染它。尝试在 _Add (post) 中返回与 ActionResult 相同的 PartialView。希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T14:42:59.020

这可能是因为 javascript 事件未正确绑定或结果未在 JS 中处理。

# vba - 在 Microsoft Excel 2003 中插入 文件

> ID：11425006
> 
> 赞同：1
> 
> 时间：2012-07-11T03:12:27.243
> 
> 标签：vba, csv, excel, excel-2003

我想在 excel 2003 工作表中插入一个 .csv 文件。我知道如何添加链接对象，但我希望文件应该驻留在工作表中，而不是任何目录中，这样我就可以在另一台计算机上打开它，而无需复制或链接源 .csv 文件。

欢迎大家提出意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:59:37.197

我自己找到了。在 Excel 2003 中，转到插入 -> 对象 -> 从文件创建

选择文件并取消选中文件链接。因此，即使您删除源 .csv 文件，此对象也会存储您的文件，您可以通过双击图标打开它。

# templating - RazorEngine 是否需要安装 MVC3？

> ID：11425008
> 
> 赞同：1
> 
> 时间：2012-07-11T03:12:53.200
> 
> 标签：templating, razorengine

我正在开发一个使用 MVC2 的 Web 项目。我决定尝试[使用 RazorEngine](http://nuget.org/packages/RazorEngine)来做一些电子邮件模板。当我使用 MVC2 项目进行原型设计时，这似乎工作得很好，所以我认为 RazorEngine 可以很好地用于我的电子邮件模板解决方案。我当时忘记的是我实际上在本地开发机器上安装了 MVC3。

在预测试服务器上部署项目后，当应用程序尝试使用 RazorEngine 执行任何操作时，我在日志中收到以下错误：

> 无法加载文件或程序集“System.Web.Razor，Version=1.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。
> 
> 该系统找不到指定的文件。
> 
> 文件名：'System.Web.Razor，版本=1.0.0.0，文化=中性，PublicKeyToken=31bf3856ad364e35'
> 
> 在 RazorEngine.Compilation.DefaultCompilerServiceFactory.CreateCompilerService（语言）
> 
> 在 RazorEngine.Templating.TemplateService.CreateTemplateType（字符串 razorTemplate，类型 modelType）
> 
> 在 RazorEngine.Templating.TemplateService.CreateTemplate[T]（StringrazorTemplate，T 模型）
> 
> 在 RazorEngine.Templating.TemplateService.Parse[T]（字符串 razorTemplate，T 模型）
> 
> 在 RazorEngine.Razor.Parse[T]（字符串 razorTemplate，T 模型）
> 
> 在 System.Dynamic.UpdateDelegates.UpdateAndExecute3[T0,T1,T2,Tret]（CallSite 站点，T0 arg0，T1 arg1，T2 arg2）
> 
> 在 Persistence.Utility.RazorEngineHelper.Parse(String templateName, Object model) in ...

它找不到“System.Web.Razor”的事实意味着部署的服务器上不存在此 DLL。我能想到的部署服务器和我的本地开发机器之间的唯一区别是部署服务器没有安装 MVC3，但我可能弄错了，因为部署服务器不是我通常控制的东西，因此我没有很多关于它的信息。它旨在托管此特定应用程序，因此之前已将此应用程序部署到此服务器。这是我第一次使用 RazorEngine 作为依赖项进行部署。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:11:50.537

System.Web.Razor dll 是使用 RazorEngine 部署的，你能验证它在你的`\bin`目录中吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:24:56.410

我认为 Razor 语法/视图引擎首先出现在 MVC 3 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-13T21:01:48.620

我遇到过同样的问题。

解决方案是将所需版本的 System.Web.Razor.dll 与 RazorEngine.dll 放在同一文件夹中。

如果这样做，RazorEngine.dll 和 System.Web.Razor.dll 将被复制到目标。

# c - 一大串字符串中最长的子串

> ID：11425010
> 
> 赞同：2
> 
> 时间：2012-07-11T03:13:03.147
> 
> 标签：c

我有一个庞大的固定文本字符串库，以及一个经常更改的输入字符串 s。我需要在最短的时间内从库中的任何字符串到 s 中找到最长的匹配子字符串，从字符串 s 的开头开始。在一个完美的世界中，我还会从库中返回下一个最长的匹配，以及下一个最好的匹配，依此类推。这不是最长的公共字符串问题 - 我不是在为库中的所有字符串寻找最长的公共字符串......我只需要尽可能快地在 s 和庞大库中的每个字符串之间找到一个成对的最佳子字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T14:09:28.290

After rereading, I think the best way to do this is probably to build a trie or a prefix tree of your big library of strings, then match `s` against that.

This has a couple of advantages. First, it stores your big library in (at least somewhat) compressed form. Second, it more or less automatically tells you all the strings that match a given input, not just the longest one.

It also fits your use case quite well -- while it takes quite a bit of work to build a trie or (especially) a prefix tree from the input, using it afterwards is quite fast.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:19:43.480

提前对列表进行排序（即编译时间或之前），然后使用 bsearch

[http://www.cplusplus.com/reference/clibrary/cstdlib/bsearch/](http://www.cplusplus.com/reference/clibrary/cstdlib/bsearch/)

找到匹配项后，您可以在附近前后查看，以获得尽可能多的“匹配项”。

顺便说一句，bsearch 不一定是最快的，因为它通过了比较器函数，但在标准 C 库中。

# android - GC_CONCURRENT 解决

> ID：11425014
> 
> 赞同：0
> 
> 时间：2012-07-11T03:13:23.967
> 
> 标签：android, nfc, logcat

我是android应用程序开发人员的初学者，下面是我的程序，但是，当它运行时，在LogCat中，出现GC_CONCURRENT消息，我理解这是我的程序消耗太多内存造成的，但是，通过反复阅读我的代码，我仍然不知道为什么我的程序会消耗比我预期的更多的内存，任何人都可以帮我看看并给我一些建议，谢谢！

07-11 10:38:12.258: D/dalvikvm(10060): GC_CONCURRENT 释放 88K, 2% 释放 12912K/13063K, 暂停 2ms+13ms
07-11 10:38:25.024: D/dalvikvm(10060): GC_CONCURRENT 释放 84K , 2% free 13249K/13447K, 暂停1ms+3ms
下面是代码：

```
public class Reader extends Activity {

TextView mText;
NfcAdapter mAdapter;
PendingIntent mPendingIntent;
IntentFilter mFilters[];
String mTechLists[][];

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

}

@Override
public void onStart(){
    super.onStart();
    setContentView(R.layout.activity_reader);

    mText = (TextView) findViewById(R.id.text);

    mAdapter = NfcAdapter.getDefaultAdapter(this);
    mPendingIntent = PendingIntent.getActivity(this, 0,
            new Intent(this, getClass()).addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP), 0);

    IntentFilter ndef = new IntentFilter(NfcAdapter.ACTION_NDEF_DISCOVERED);
    try{
        ndef.addDataType("text/plain");
    }catch(MalformedMimeTypeException e){
        throw new RuntimeException("fail", e);
    }

    IntentFilter nt = new IntentFilter(NfcAdapter.ACTION_TAG_DISCOVERED);
    mFilters = new IntentFilter[]{
            ndef, nt
    };

    mTechLists = new String[][]{
            new String[]{
                    Ndef.class.getName()
            }
    };
    Intent intent = getIntent();
    mText.setText(getNdefMessages(intent));
}

public String getNdefMessages(Intent intent){
    NdefMessage[] msgs = null;
    String action = intent.getAction();
    if(NfcAdapter.ACTION_NDEF_DISCOVERED.equals(action)||
            NfcAdapter.ACTION_TAG_DISCOVERED.equals(action)){
        Parcelable[] rawMsgs = intent.getParcelableArrayExtra(NfcAdapter.EXTRA_NDEF_MESSAGES);
        if(rawMsgs != null){
            msgs = new NdefMessage[rawMsgs.length];
            for(int i=0; i<rawMsgs.length; i++){
                msgs[i] = (NdefMessage) rawMsgs[i];
            }
        }else{
            byte[] empty = new byte[]{};
            NdefRecord record = new NdefRecord(NdefRecord.TNF_UNKNOWN, empty, empty, empty);
            NdefMessage msg = new NdefMessage(new NdefRecord[]{record});
            msgs = new NdefMessage[]{msg};
        }

    }
    else {
        finish();
    }
    if(msgs==null)
        return "No Tag discovered!";
    else
        return msgs.toString();
}

@Override
public void onResume(){
    super.onResume();
    if (mAdapter != null)
        mAdapter.enableForegroundDispatch(this, mPendingIntent, mFilters, mTechLists);

}

@Override
public void onPause(){
    super.onPause();
    if (mAdapter != null)
        mAdapter.disableForegroundDispatch(this);
}

@Override
public void onNewIntent(Intent intent){
    Log.i("Foreground dispatch", "Discovered tag with intent:" + intent);
    mText = (TextView) findViewById(R.id.text);
    mText.setText(getNdefMessages(intent));
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:04:51.723

那么确保你清除

```
 NdefMessage msg = new NdefMessage(new NdefRecord[]{record});
        msgs = new NdefMessage[]{msg}; 
```

有多少主要的总味精？为什么不做一个 Log.debug("LOG_TAG", msg.length()) 并找出答案。

你也在模拟器上运行吗？如果是这样，内存设置是什么？

显然，您消耗内存的唯一事情就是上面的行，所以也许您需要在某个时候释放它。您还可以在 eclipse 中运行内存分析器并获取更多信息。

# android - DialogFragment 中的 ActionBar

> ID：11425020
> 
> 赞同：46
> 
> 时间：2012-07-11T03:14:22.047
> 
> 标签：android, android-actionbar, android-dialogfragment

在我的 Galaxy Tab 10.1 上的日历应用程序中，当创建一个新事件时，会在标题栏/操作栏区域出现一个包含完成和取消按钮的对话框。

![在此处输入图像描述](../Images/4c72b3bc1f5d1179d251274e1321065e.png)

我想在我的应用程序中实现这一点。除了在我的子类`setHasOptionsMenu(true)`中覆盖之外，我还尝试过使用，但我的操作项没有出现。我也尝试过从内部调用，但它总是返回。`onCreateOptionsMenu``DialogFragment``getDialog().getActionBar()``onCreateView``null`

如果我启动一个`Activity`而不是显示一个对话框，但它占据了整个屏幕，我就可以让它工作。有没有标准的方法可以使用 a 来做到这一点`DialogFragment`？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-09-05T05:31:40.997

使用来自[谷歌小组帖子](https://groups.google.com/d/msg/android-developers/Y5wnstMT5Lo/upOijj1OOJIJ)的想法，我能够将其从活动样式中拉出来。您最好将高度和宽度修改为您选择的“动态”大小。然后设置您想要的任何 ActionBar 按钮

```
<style name="PopupTheme" parent="android:Theme.Holo.Light.Dialog">
    <item name="android:windowIsFloating">false</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowSoftInputMode">stateAlwaysHidden</item>
    <item name="android:windowActionModeOverlay">true</item>
    <item name="android:windowIsTranslucent">true</item>
</style> 
```

--

```
public static void showAsPopup(Activity activity) {
    //To show activity as dialog and dim the background, you need to declare android:theme="@style/PopupTheme" on for the chosen activity on the manifest
    activity.requestWindowFeature(Window.FEATURE_ACTION_BAR);
    activity.getWindow().setFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND,
            WindowManager.LayoutParams.FLAG_DIM_BEHIND);
    LayoutParams params = activity.getWindow().getAttributes(); 
    params.height = 850; //fixed height
    params.width = 850; //fixed width
    params.alpha = 1.0f;
    params.dimAmount = 0.5f;
    activity.getWindow().setAttributes((android.view.WindowManager.LayoutParams) params); 
    setContentView(R.layout.activity_main);
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-04T16:22:20.157

如果您使用的是 ActionBarSherlock，请按如下方式声明主题：

```
<style name="PopupTheme" parent="Theme.Sherlock">
    <item name="android:windowFrame">@null</item>
    <item name="android:windowIsFloating">false</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowAnimationStyle">@android:style/Animation.Dialog</item>
    <item name="android:windowSoftInputMode">stateAlwaysHidden</item>
    <item name="android:windowActionModeOverlay">true</item>
    <item name="android:colorBackgroundCacheHint">@null</item>
    <item name="android:windowCloseOnTouchOutside">true</item>
    <item name="android:windowIsTranslucent">true</item>
    <item name="windowContentOverlay">@null</item>
</style> 
```

并且，根据[Luke Sleeman 的回答](https://stackoverflow.com/a/14810486/845627)使用 PopupTheme初始化**SherlockActivity**。

```
private void showAsPopup(SherlockActivity activity) {
    //To show activity as dialog and dim the background, you need to declare android:theme="@style/PopupTheme" on for the chosen activity on the manifest
    //activity.requestWindowFeature(Window.FEATURE_ACTION_BAR); // NO NEED to call this line.
    activity.getWindow().setFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND,
            WindowManager.LayoutParams.FLAG_DIM_BEHIND);
    LayoutParams params = activity.getWindow().getAttributes(); 
    params.alpha = 1.0f;
    params.dimAmount = 0.5f;
    activity.getWindow().setAttributes((android.view.WindowManager.LayoutParams) params); 

    // This sets the window size, while working around the IllegalStateException thrown by ActionBarView
    activity.getWindow().setLayout(width,height);
} 
```

结果：

![在此处输入图像描述](../Images/afa5b9176676371d14cba6675af8d04d.png)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2013-04-29T21:58:39.927

在实施 StrikeForceZero 和 Luke Sleeman 建议的解决方案时遇到了一些麻烦，所以我想贡献我的经验。我敢肯定，我只是缺少一些东西，因此非常感谢您的反馈。

我所做的是以下内容：

1.  使用提供的 PopupTheme 创建样式，直接复制/粘贴：

    ```
    <style name="PopupTheme" parent="android:Theme.Holo.Light.Dialog">
        <item name="android:windowIsFloating">false</item>
        <item name="android:windowContentOverlay">@null</item>
        <item name="android:windowSoftInputMode">stateAlwaysHidden</item>
        <item name="android:windowActionModeOverlay">true</item>
        <item name="android:windowIsTranslucent">true</item>
    </style> 
    ```

2.  添加 showAsPopup() 方法作为片段中的方法，该方法将打开假对话片段，直接复制/粘贴：

    ```
    private void showAsPopup(Activity activity) {
        //To show activity as dialog and dim the background, you need to declare android:theme="@style/PopupTheme" on for the chosen activity on the manifest
        activity.requestWindowFeature(Window.FEATURE_ACTION_BAR);
        activity.getWindow().setFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND,
            WindowManager.LayoutParams.FLAG_DIM_BEHIND);
        LayoutParams params = activity.getWindow().getAttributes(); 
        params.alpha = 1.0f;
        params.dimAmount = 0f;
        activity.getWindow().setAttributes((android.view.WindowManager.LayoutParams) params); 

        // This sets the window size, while working around the IllegalStateException thrown by ActionBarView
        activity.getWindow().setLayout(850,850);
    } 
    ```

3.  使用简单的 new() 调用创建新活动的实例，然后将其传递给 showAsPopup() 方法：

    ```
    DialogTestActivity test = new DialogTestActivity();
    showAsPopup(test); 
    ```

4.  为了测试的目的（我只是想确认我可以打开一个显示为带有操作栏的对话框的活动）我使用了一个非常简单的测试，直接从按钮视图 api 演示中窃取（用于布局文件，请参阅 api 演示中的buttons_1.xml）：

    ```
    public class DialogTestActivity extends Activity {

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.buttons_test);
        }
    } 
    ```

不幸的是，每次我尝试这个时，我都会在第一次调用时得到一个未指定的空指针异常，activity.requestWindowFeature(Window.FEATURE_ACTION_BAR);

```
04-29 16:39:05.361: W/System.err(15134): java.lang.NullPointerException
04-29 16:39:05.361: W/System.err(15134):    at android.app.Activity.requestWindowFeature(Activity.java:3244)
04-29 16:39:05.371: W/System.err(15134):    at packagenameremovedforlegalreasons.classname.showAsPopup(classname.java:602)
04-29 16:39:05.371: W/System.err(15134):    at packagenameremovedforlegalreasons.classname.onMapLongClick(classname.java:595)
04-29 16:39:05.371: W/System.err(15134):    at com.google.android.gms.maps.GoogleMap$5.onMapLongClick(Unknown Source)
04-29 16:39:05.371: W/System.err(15134):    at com.google.android.gms.internal.k$a.onTransact(Unknown Source)
04-29 16:39:05.381: W/System.err(15134):    at android.os.Binder.transact(Binder.java:310)
04-29 16:39:05.381: W/System.err(15134):    at com.google.android.gms.maps.internal.IOnMapLongClickListener$Stub$Proxy.onMapLongClick(IOnMapLongClickListener.java:93)
04-29 16:39:05.381: W/System.err(15134):    at maps.i.s.a(Unknown Source)
04-29 16:39:05.381: W/System.err(15134):    at maps.y.v.d(Unknown Source)
04-29 16:39:05.381: W/System.err(15134):    at maps.y.bf.onLongPress(Unknown Source)
04-29 16:39:05.381: W/System.err(15134):    at maps.d.v.onLongPress(Unknown Source)
04-29 16:39:05.381: W/System.err(15134):    at maps.d.h.c(Unknown Source)
04-29 16:39:05.381: W/System.err(15134):    at maps.d.h.c(Unknown Source)
04-29 16:39:05.381: W/System.err(15134):    at maps.d.j.handleMessage(Unknown Source)
04-29 16:39:05.391: W/System.err(15134):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-29 16:39:05.391: W/System.err(15134):    at android.os.Looper.loop(Looper.java:137)
04-29 16:39:05.391: W/System.err(15134):    at android.app.ActivityThread.main(ActivityThread.java:5041)
04-29 16:39:05.391: W/System.err(15134):    at java.lang.reflect.Method.invokeNative(Native Method)
04-29 16:39:05.391: W/System.err(15134):    at java.lang.reflect.Method.invoke(Method.java:511)
04-29 16:39:05.391: W/System.err(15134):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-29 16:39:05.391: W/System.err(15134):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-29 16:39:05.391: W/System.err(15134):    at dalvik.system.NativeStart.main(Native Method) 
```

正如您从堆栈跟踪中看到的那样，预期的行为是在 GoogleMap 实例上长按打开窗口（使用 API 2 中的 MapFragments）。所以我的第一个想法是尝试从 Fragment 打开存在问题，所以我将调用传递回拥有的 Activity。同样的错误，同样没有附加信息。

在这一点上，我最好的猜测是 new() 调用没有充分实例化类/视图以进行调用以修改其视图。事实证明，这似乎至少在某种程度上是正确的，因为将视图修改代码迁移到活动中并以正常方式简单地打开活动是可行的：

调用活动：

```
 public void openMapDialog()
    {
        Intent intent = new Intent(this, DialogTestActivity.class);
        startActivity(intent);
    } 
```

新班级代码：

```
 public class DialogTestActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // From: https://stackoverflow.com/questions/11425020/actionbar-in-a-dialogfragment
        this.requestWindowFeature(Window.FEATURE_ACTION_BAR);
        this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND, WindowManager.LayoutParams.FLAG_DIM_BEHIND);
        LayoutParams params = this.getWindow().getAttributes(); 
        params.alpha = 1.0f;
        params.dimAmount = 0f;
        this.getWindow().setAttributes((android.view.WindowManager.LayoutParams) params); 

        // This sets the window size, while working around the IllegalStateException thrown by ActionBarView
        this.getWindow().setLayout(600,600);

        setContentView(R.layout.buttons_test);
        }
    } 
```

所以我想我发布所有这些的目的是为了澄清如果你想做上述海报建议的事情，你不能只是 new() 一个活动并调用 showAsPopup()。这可能是我对 Android 显示的缺乏经验，但是虽然这似乎有点明显，但将 showAsPopup() 解释为由当前视图调用而不是正在创建的视图调用似乎也很自然，因为您正在传递活动实例（**如果**它应该在 onCreate() 中完成，就像我最终做的那样）。

因此，如果意图是在**创建**活动而不是**创建**活动中调用 showAsPopup()，那么在调用 onCreate() 之前如何获取可修改的 Activity 实例并不明显。问题是您不能在调用 setContentView() 之后调用诸如 requestWindowFeature() 之类的东西（[示例](https://stackoverflow.com/questions/9737112/requestwindowfeaturewindow-feature-no-title-causing-the-app-to-crash)），这是一个问题，因为它通常在 onCreate() 中调用。

同样，如果有一种简单/更好的方法可以做到这一点，我将非常感谢反馈。希望这对想要使用这种方法的人有所帮助。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-11T10:40:21.367

我花了很多时间来玩这个。接受的答案适用于galaxy nexus 7（Android 4.2），但在三星galaxy SIII（Android 4.1）和三星galaxy tab 10.2（Android 4.0）上失败，但有以下例外：

```
IllegalStateException: ActionBarView can only be used with android:layout_width="match_parent" (or fill_parent) 
```

这是由[ActionBarView.onMeasure(int, int)](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/com/android/internal/widget/ActionBarView.java#ActionBarView.onMeasure%28int,int%29)中的代码引起的，该代码检查以确保布局设置为 match_parent。正确的解决方案是通过 setLayout 而不是使用 setAttributes 来设置窗口的宽度。

这是 showAsPopup() 的固定版本，适用于我测试过的所有设备：

```
private void showAsPopup(Activity activity) {
    //To show activity as dialog and dim the background, you need to declare android:theme="@style/PopupTheme" on for the chosen activity on the manifest
    activity.requestWindowFeature(Window.FEATURE_ACTION_BAR);
    activity.getWindow().setFlags(WindowManager.LayoutParams.FLAG_DIM_BEHIND,
            WindowManager.LayoutParams.FLAG_DIM_BEHIND);
    LayoutParams params = activity.getWindow().getAttributes(); 
    params.alpha = 1.0f;
    params.dimAmount = 0f;
    activity.getWindow().setAttributes((android.view.WindowManager.LayoutParams) params); 

    // This sets the window size, while working around the IllegalStateException thrown by ActionBarView
    activity.getWindow().setLayout(850,850);
} 
```

为了完整起见，这里又是 PopupTheme：

```
<style name="PopupTheme" parent="android:Theme.Holo.Light.Dialog">
    <item name="android:windowIsFloating">false</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowSoftInputMode">stateAlwaysHidden</item>
    <item name="android:windowActionModeOverlay">true</item>
    <item name="android:windowIsTranslucent">true</item>
</style> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T03:27:56.827

就像 Veeti 暗示的那样，您可能想尝试使用 Dialog Theme 实现 Activity。在 Android 清单中：

```
<activity android:name=".YourActivity" android:theme="@android:style/Theme.Dialog </activity> 
```

希望这会有所帮助。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-11T04:01:12.567

我可能没有那么有经验，但我会使用一个活动，添加操作栏项目，然后：

> `<activity android:name=".YourActivity"` `android:theme="@android:style/Theme.Holo.Light.Dialog" />`

希望有帮助！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-12T12:04:14.763

我找到了一种很好的方法，在 DialogFragment 的 alertDialog 的构建器上使用[setCustomTitle](https://developer.android.com/reference/android/support/v7/app/AlertDialog.Builder.html#setCustomTitle(android.view.View))（也可以在 alertDialog 本身上使用）。

```
public Dialog onCreateDialog(final Bundle savedInstanceState) {
    final AlertDialog.Builder builder = new AlertDialog.Builder(activity,...);
    final Toolbar toolbar = (Toolbar) inflater.inflate(R.layout.dialog_app_filter_toolbar, null, false);
    // <= prepare toolbar and dialog here
    return builder.create();
    } 
```

结果（来自[我的应用程序](https://play.google.com/store/apps/details?id=com.lb.app_manager)）：

[![在此处输入图像描述](../Images/001b3acf0dee210a70c06d5286bf835d.png)](https://i.stack.imgur.com/3LOqn.png)

[![在此处输入图像描述](../Images/5a2db6235e04333b35337a11b14c235e.png)](https://i.stack.imgur.com/rHnGf.png)

如果您不想使用 AlertDialog，您仍然可以在对话框布局中放置一个工具栏并使用它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-10-20T01:18:51.497

我知道这不是真正的答案，但上面的解决方案似乎很不雅，以至于人们可能认为完全避免操作栏会更容易，比如从 .noActionBar 继承对话框主题，然后在面板顶部创建视图模仿动作栏，至少这样它都保留在 xlm 中。

# iphone - 应用程序在 dealloc 中崩溃

> ID：11425030
> 
> 赞同：1
> 
> 时间：2012-07-11T03:15:42.483
> 
> 标签：iphone, objective-c, ios, ipad, memory

我的应用程序崩溃了`dealloc`，但只是有时。

我创建了一个数组来缓存 5 个对象。当用户点击右侧或左侧时，会添加一个新对象并删除最后一个对象。当我测试应用程序时，在点击左右按钮 100-500 次后，应用程序崩溃了。

应用程序在该方法中崩溃，`dealloc`但所有对象都已正确分配和释放。

我的`dealloc`方法：

```
 - (void)dealloc
{
    [super dealloc];
    [_sImageLane release];
    [_sTipoLane release];
    [_maRecomended release];
    [_maProdcucts release]; // here crash in this line EXC_BAD_ACCESSE
} 
```

出了什么问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T03:20:30.490

放在`[super dealloc]`最后而不是第一个。

**编辑**：发生这种情况的原因是由于 objc 对象的生命周期。当它死亡时，会向对象发送`dealloc`消息。在该方法中，对象必须清理自己，并将消息传递到继承链（因为超类也需要清理自己）。好吧，如果你`[super dealloc]`在最后一个正确地做到这一点会发生什么？

> 清理 self 上的资源 -> 清理 super 上的资源 -> 清理 super 的 super 上的资源 -> etc -> 运行时回收的内存。

很好，如果你按照自己的方式做会发生什么？

> 清理 super 上的资源 -> 清理 super 的 super 上的资源 -> etc. -> 运行时回收的内存 -> 清理 self 上的资源

糟糕，现在您正在访问回收的内存并尝试与它进行交互（即 EXC_BAD_ACCESS 或更糟，在另一个对象的其他地方弄乱内存而没有意识到它）。

`NSObject`的 dealloc 方法从字面上释放内存（可能通过`free()`），所以一旦你调用了你就处于未定义的危险灰色区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:22:28.747

你使用的是什么版本的 Xcode？新版本不需要您分配或释放内存。它为您在运行时完成。尝试注释掉 dealloc 方法，然后编译。

# asp.net-4.0 - Asp.net 4.0：如何在自定义错误页面中获取异常详细信息？

> ID：11425032
> 
> 赞同：7
> 
> 时间：2012-07-11T03:15:54.507
> 
> 标签：asp.net-4.0, custom-error-pages, exception-logging

我们正在使用 asp.net 配置设置提供的自定义错误。在整个应用程序（PL/BLL/DAL）中，我们没有使用任何 try catch。因此，对于任何层应用程序中的任何异常，将用户重定向到配置文件中自定义错误设置中设置的自定义错误页面。现在我们要在显示错误页面之前在日志文件中记录以下信息：

```
- Date & time
- Exception message & strack trace.
- Page Name
- Method Name
- Method Parameter & values. 
```

请帮助我如何在自定义错误 page_load 事件中收集上述信息？

谢谢，

@保罗

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-05T07:57:38.600

您可以在会话中存储错误详细信息并在自定义错误页面中获取它们。

此代码位于**Global.asax**中：

```
 protected void Application_Error(object sender, EventArgs e)
    {
        Exception err = Server.GetLastError();
        Session.Add("LastError", err);
    }

    void Session_Start(object sender, EventArgs e) 
    {      
        Session["LastError"] = ""; //initialize the session
    } 
```

然后在你的**错误页面**加载：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Exception err = Session["LastError"] as Exception;
        //Exception err = Server.GetLastError();
        if (err != null)
        {
            err = err.GetBaseException();
            lblErrorMsg.Text = err.Message;
            lblSource.Text = err.Source;
            lblInnerEx.Text = (err.InnerException != null) ? err.InnerException.ToString() : "";
            lblStackTrace.Text = err.StackTrace;
            Session["LastError"] = null;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T14:33:06.243

在 web.config 的 customErrors 部分设置此属性：redirectMode="ResponseRewrite"

# c# - 进入sql数据库的图片路径

> ID：11425033
> 
> 赞同：1
> 
> 时间：2012-07-11T03:16:10.580
> 
> 标签：c#, asp.net, sql

我正在做一个用户配置文件，首先用户选择图片并使用此代码上传到一个文件夹中，上传后显示图像：

```
protected void btnUpload_Click(object sender, EventArgs e)
{
    // Initialize variables
    string sSavePath;
    string sThumbExtension;
    int intThumbWidth;
    int intThumbHeight;

    // Set constant values
    sSavePath = "images/";
    sThumbExtension = "_thumb";
    intThumbWidth = 160;
    intThumbHeight = 120;

    // If file field isn’t empty
    if (filUpload.PostedFile != null)
    {
        // Check file size (mustn’t be 0)
        HttpPostedFile myFile = filUpload.PostedFile;
        int nFileLen = myFile.ContentLength;
        if (nFileLen == 0)
        {
            lblOutput.Text = "El archivo no fue cargado.";
            return;
        }

        // Check file extension (must be JPG)
        if (System.IO.Path.GetExtension(myFile.FileName).ToLower() != ".jpg")
        {
            lblOutput.Text = "El archivo debe tener una extensión JPG";
            return;
        }

        // Read file into a data stream
        byte[] myData = new Byte[nFileLen];
        myFile.InputStream.Read(myData, 0, nFileLen);

        // Make sure a duplicate file doesn’t exist.  If it does, keep on appending an 
        // incremental numeric until it is unique
        string sFilename = System.IO.Path.GetFileName(myFile.FileName);
        int file_append = 0;
        while (System.IO.File.Exists(Server.MapPath(sSavePath + sFilename)))
        {
            file_append++;
            sFilename = System.IO.Path.GetFileNameWithoutExtension(myFile.FileName)
                             + file_append.ToString() + ".jpg";
        }

        // Save the stream to disk
        System.IO.FileStream newFile
                = new System.IO.FileStream(Server.MapPath(sSavePath + sFilename),
                                           System.IO.FileMode.Create);
        newFile.Write(myData, 0, myData.Length);
        newFile.Close();

        // Check whether the file is really a JPEG by opening it
        System.Drawing.Image.GetThumbnailImageAbort myCallBack =
                       new System.Drawing.Image.GetThumbnailImageAbort(ThumbnailCallback);
        Bitmap myBitmap;
        try
        {
            myBitmap = new Bitmap(Server.MapPath(sSavePath + sFilename));

            // If jpg file is a jpeg, create a thumbnail filename that is unique.
            file_append = 0;
            string sThumbFile = System.IO.Path.GetFileNameWithoutExtension(myFile.FileName)
                                                     + sThumbExtension + ".jpg";
            while (System.IO.File.Exists(Server.MapPath(sSavePath + sThumbFile)))
            {
                file_append++;
                sThumbFile = System.IO.Path.GetFileNameWithoutExtension(myFile.FileName) +
                               file_append.ToString() + sThumbExtension + ".jpg";
            }

            // Save thumbnail and output it onto the webpage
            System.Drawing.Image myThumbnail
                    = myBitmap.GetThumbnailImage(intThumbWidth,
                                                 intThumbHeight, myCallBack, IntPtr.Zero);
            myThumbnail.Save(Server.MapPath(sSavePath + sThumbFile));
            imgPicture.ImageUrl = sSavePath + sThumbFile;

            // Displaying success information
            lblOutput.Text = "El archivo fue cargado con exito!";

            // Destroy objects
            myThumbnail.Dispose();
            myBitmap.Dispose();
        }
        catch (ArgumentException errArgument)
        {
            // The file wasn't a valid jpg file
            lblOutput.Text = "No es un archivo .jpg valido";
            System.IO.File.Delete(Server.MapPath(sSavePath + sFilename));
        }
    }
} 
```

之后，用户完成了配置文件的其他字段（姓名、电子邮件等），有一个保存按钮，并使用以下内容保存到数据库中：

这是前面的代码

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" ConnectionString="<%$ ConnectionStrings:pruebaConnectionString %>"
    InsertCommand="INSERT INTO Curriculum(Nombre, Correo) VALUES (@TextBox1, @TextBox2)">
    <InsertParameters>
        <asp:ControlParameter ControlID="TextBox1" DefaultValue="" Name="TextBox1" PropertyName="Text" />
        <asp:ControlParameter ControlID="TextBox2" DefaultValue="" Name="TextBox2" PropertyName="Text" />                     
    </InsertParameters>
</asp:SqlDataSource> 
```

实际上还有更多字段，但为了简短起见，我只复制前 2 个，名词字段是数据库上唯一不能为空的字段

后面的代码：

```
protected void Button1_Click(object sender, EventArgs e)
{
                SqlDataSource1.Insert();

        String strConn = "Data Source=TOSHI;Initial Catalog=prueba;Integrated Security=True";
        SqlConnection conn = new SqlConnection(strConn);
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = conn;
        string strQuery = "Insert into curriculum (imagen) values (@imgPicture)";
        cmd.CommandText = strQuery;
        cmd.CommandType = CommandType.Text;
        cmd.Parameters.AddWithValue("@imgPicture", (imgPicture.ImageUrl == null ? (object)DBNull.Value : (object)imgPicture.ImageUrl));
        conn.Open();
        cmd.ExecuteNonQuery();
        conn.Close();
} 
```

现在我要做的是，当用户单击保存按钮（或方法 button1_click 上的内容）时，图像 url 将保存到字段 Imagen 上的数据库中，该字段是 varchar 50，但不工作，我得到：无法将值 NULL 插入到列 'Nombre'、表 'prueba.dbo.Curriculum' 中；列不允许空值。插入失败。该语句已终止。

但是，如果我只使用 SqlDataSource1.Insert(); 离开 button1_click 方法；这些字段被保存到数据库中。

知道如何将图像 url 保存到数据库中吗？希望我的解释清楚！

谢谢！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:20:49.553

您是在尝试创建新记录（您需要在其中指定所有值）还是要更新记录？

目前，您的代码正在尝试执行 INSERT，这将在课程表中创建一条新记录，但您只设置了 1 值。也许你想做一个 UPDATE 代替？

```
string strQuery = "UPDATE curriculum SET imagen = @imgPicture WHERE Nombre = ???"; 
```

# wpf - ContentControl DataTemplate 使用接口

> ID：11425039
> 
> 赞同：0
> 
> 时间：2012-07-11T03:17:15.783
> 
> 标签：wpf, binding, interface, datatemplate

我有一个显示用户列表的 wpf 应用程序。单击用户将显示该用户的详细信息 - 很像 WaF 图书库示例等。

我已经阅读了一些关于绑定到接口的内容，并且我可以成功地将 ListView 绑定到我的接口，但是对 ContentControl 使用相同的方法是行不通的。

这就是我所拥有的：

域模型 - USER（EF 实体）

```
partial class USER : IUser
    {
    }

public interface IUser
    {
        String USERNAME { get; set; }
        String FIRST_NAME { get; set; }
        String SURNAME {get;set;}
        String EMAIL { get; set; }
    } 
```

表示层

```
 public class UserMainContentModel 
    {
          public ICollectionView Users { get; private set; }
          public IUser SelectedUser { get; private set; }
          //...
          private void SelectedUserChanged(object sender, EventArgs e)
          {
            SelectedUser = Users.CurrentItem as IUser;
             NotifyPropertyChanged("SelectedUser");
          }
    } 
```

查看xml

```
<UserControl x:Class="CQMS.Module.Users.Views.MainContent.UsersMainContentView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:models="clr-namespace:CQMS.Module.Users.ViewModels"
             xmlns:interface="clr-namespace:CQMS.Framework.Model;assembly=CQMS.Framework"             
             mc:Ignorable="d" >
    <UserControl.Resources>
        <DataTemplate DataType="{x:Type interface:IUser}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <Label AutomationProperties.AutomationId="UsernameLabel" Grid.Row="0" Grid.Column="0" Margin="0,0,0,10">Username</Label>
                <Label AutomationProperties.AutomationId="NameLabel" Grid.Row="0" Grid.Column="1">Name</Label>
                <Label AutomationProperties.AutomationId="EmailLabel" Grid.Row="0" Grid.Column="2">Email</Label>
                <TextBox AutomationProperties.AutomationId="UsernameTextBox" Grid.Row="1" Grid.Column="0" Text="{Binding interface:IUser.USERNAME}" />
                <TextBox AutomationProperties.AutomationId="NameTextBox" Grid.Row="1" Grid.Column="1" Text="{Binding interface:IUser.FIRST_NAME}" />
                <TextBox AutomationProperties.AutomationId="EmailTextBox" Grid.Row="1" Grid.Column="2" Text="{Binding interface:IUser.EMAIL}" />
            </Grid>
        </DataTemplate>
    </UserControl.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height=".4*"/>
            <RowDefinition Height=".6*"/>
        </Grid.RowDefinitions>
        <ListView Grid.Row="0" AutomationProperties.AutomationId="UserListView" ItemsSource="{Binding Users}"  SelectionMode="Single" Width="Auto" Height="Auto" >
            <ListView.ItemTemplate>
                <DataTemplate DataType="{x:Type interface:IUser}"/>
            </ListView.ItemTemplate>
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="Username" Width="80"
                         DisplayMemberBinding="{Binding Path=USERNAME}"/>
                    <GridViewColumn Header="First Name" Width="80"
                         DisplayMemberBinding="{Binding Path=FIRST_NAME}"/>
                    <GridViewColumn Header="Email" Width="80"
                         DisplayMemberBinding="{Binding Path=EMAIL}"/>
                </GridView>
            </ListView.View>
        </ListView>
        <Border Grid.Row="1" CornerRadius="4,4,4,4" BorderBrush="#193441" Background="#FCFFF5" BorderThickness="2,2,2,2" Margin="5" Padding="5">
            <ContentControl Content="{Binding SelectedUser}"  Width="Auto" Height="Auto"/>
        </Border>
    </Grid>
</UserControl> 
```

当我从列表中选择一个用户时，我想要的是将所选用户的详细信息显示在内容控件中，但是，我得到的只是该控件中显示的具体类的名称。我不想将我的具体类暴露给我的视图，我真的不想将我的 IUser 对象包装在 Model 对象中......有没有办法做到这一点？我是否正确实施了这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:22:19.970

您确定`DataTemplates`可以隐式应用于接口而不是类吗？无论哪种方式，在这种情况下，给模板一个键并在`ContentControl.ContentTemplate`.

我也从未见过这样的绑定，路径不应该只是`USERNAME`代替`interface:IUser.USERNAME`吗？

# c# - 将文件复制到我无权访问的网络共享

> ID：11425041
> 
> 赞同：4
> 
> 时间：2012-07-11T03:17:20.623
> 
> 标签：c#, security, impersonation, file-copying

这是[这个](https://stackoverflow.com/questions/295538/how-to-provide-user-name-and-password-when-connecting-to-a-network-share)问题的延伸

我正在尝试将文件从本地用户的临时文件夹复制到远程文件共享。我无权访问远程文件共享，因此我必须模拟一个可以访问的用户。

现在，我可以成功地从远程服务器读取文件并将其复制到本地，但是我无法将本地文件写入共享，因为它给了我错误：

> 本地文件的访问被拒绝

（因为我现在冒充另一个用户）。

如果您需要一些代码，我可以发布它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-11T05:09:02.903

设法找到答案，

我只需要`FileStream`在模拟远程用户之前创建一个本地文件，然后将其传递`FileStream`给复制功能。

**编辑：所以这是我的整个文件复制例程**

```
using System.Security.Principal;
using System.Security.Permissions;
using System.Windows.Forms;
using System.Runtime.InteropServices;
using System.Diagnostics;
using System.IO;

public class ImpersonatedFileCopy : IDisposable
{
    #region Assembly Functions
    [DllImport("advapi32.dll")]
    public static extern bool LogonUser(string lpszUsername, string lpszDomain, string lpszPassword, int dwLogonType, int dwLogonProvider, ref IntPtr phToken);

    [DllImport("kernel32.dll")]
    public static extern bool CloseHandle(IntPtr handle);
    #endregion

    #region Private Variables
    private IntPtr _TokenHandle = new IntPtr(0);
    private WindowsImpersonationContext _WindowsImpersonationContext;
    #endregion

    #region Constructors
    public ImpersonatedFileCopy(string domain, string username, string password)
    {
        Impersonate(domain, username, password);
    }
    #endregion

    #region Methods
    [PermissionSet(SecurityAction.Demand, Name = "FullTrust")]
    private void Impersonate(string domain, string username, string password)
    {
        bool returnValue;

        try
        {
            const int LOGON32_PROVIDER_DEFAULT = 0;
            const int LOGON32_LOGON_INTERACTIVE = 2;

            _TokenHandle = IntPtr.Zero;

            //Call LogonUser to obtain a handle to an access token.
            returnValue = LogonUser(username, domain, password, LOGON32_LOGON_INTERACTIVE, LOGON32_PROVIDER_DEFAULT, ref _TokenHandle);
            if (returnValue)
            {
                WindowsIdentity newId = new WindowsIdentity(_TokenHandle);
                _WindowsImpersonationContext = newId.Impersonate();
            }
        }
        catch (Exception ex)
        {
            UndoImpersonate();
            Debug.Writeline("Error"+ex.Message);
        }
    }

    private void UndoImpersonate()
    {
        if (_WindowsImpersonationContext != null)
        {
            _WindowsImpersonationContext.Undo();
            if (!_TokenHandle.Equals(IntPtr.Zero))
            {
                CloseHandle(_TokenHandle);
            }
        }
    }

    public bool PutFile(FileStream source, string destRemoteFilename, bool overwrite)
    {
        try
        {
            if (!Directory.Exists(Path.GetDirectoryName(destRemoteFilename))) Directory.CreateDirectory(Path.GetDirectoryName(destRemoteFilename));
            using (FileStream dest = File.OpenWrite(destRemoteFilename))
            {
               source.Seek(0, SeekOrigin.Begin);
               source.CopyTo(dest);
            }
            return true;
        }
        catch
        {
            return false;
        }
    }

    public bool GetFile(string sourceRemoteFilename, FileStream dest, bool overwrite)
    {
        try
        {
            using (FileStream source = File.OpenRead(sourceRemoteFilename))
            {
                source.Seek(0, SeekOrigin.Begin);
                source.CopyTo(dest);
            }
            return true;
        }
        catch
        {
            return false;
        }
    }
    #endregion

    #region IDisposable
    public void Dispose()
    {
        UndoImpersonate();
        GC.SuppressFinalize(this);
    }
    #endregion
} 
```

**以及用法：**

```
using (FileStream dest = File.OpenWrite(localDestinationFilename))
using (copy = new ImpersonatedFileCopy(domain,user,pass))
{
   success = copy.GetFile(remoteSourceFilename, dest, true);
} 
```

# python - python webapp2 babel在谷歌应用引擎上的lazy_gettext错误

> ID：11425042
> 
> 赞同：1
> 
> 时间：2012-07-11T03:17:27.687
> 
> 标签：python, google-app-engine, internationalization, webapp2, python-babel

**背景**：我是 gae-boilerplate 的主要贡献者之一，gae-boilerplate 是一个开源样板项目，旨在帮助用户在具有 webapp2 和最新功能的谷歌应用引擎上快速开始开发。我使用的最新功能是使用 Babel 和 gaepytz 的 i18n，这就是下面描述的问题所在。

**问题**：翻译正在使用gettext，但要翻译在我们的处理程序和wtforms类中产生的表单错误消息，据我所知，我需要lazy_gettext。当我调用 handlers.py 时，Lazy_gettext 不起作用`from webapp2_extras.i18n import lazy_gettext as _`。加载页面时，我收到以下致命错误消息。似乎创建了 Babel Lazy 代理对象，但是在传递给谷歌应用引擎服务器代码中的 json 序列化程序之前，它们没有被调用来呈现本地化字符串。我浏览了 babel 站点、webapp2 文档（我希望更彻底）、其他框架和一些 google 代码，但我无法弄清楚我缺少什么。

**错误信息：**

```
Traceback (most recent call last):
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1536, in __call__
  rv = self.handle_exception(request, response, e)
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1530, in __call__
  rv = self.router.dispatch(request, response)
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1278, in default_dispatcher
  return route.handler_adapter(request, response)
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2.py", line 1102, in __call__
  return handler.dispatch()
File "H:\jesse\python_dev\workspace\gae-boilerplate\lib\basehandler.py", line 54, in dispatch
  self.session_store.save_sessions(self.response)
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2_extras\sessions.py", line 420, in save_sessions
  session.save_session(response)
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2_extras\sessions.py", line 205, in save_session
  response, self.name, dict(self.session), **self.session_args)
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2_extras\sessions.py", line 423, in save_secure_cookie
  value = self.serializer.serialize(name, value)
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2_extras\securecookie.py", line 47, in serialize
  value = self._encode(value)
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2_extras\securecookie.py", line 92, in _encode
  return json.b64encode(value)
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2_extras\json.py", line 84, in b64encode
  return base64.b64encode(encode(value, *args, **kwargs))
File "C:\Program Files (x86)\Google\google_appengine\lib\webapp2\webapp2_extras\json.py", line 55, in encode
  return json.dumps(value, *args, **kwargs).replace("</", "<\\/")
File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\__init__.py", line 272, in dumps
  use_decimal=use_decimal, **kw).encode(obj)
File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\encoder.py", line 216, in encode
  chunks = list(chunks)
File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\encoder.py", line 485, in _iterencode
  for chunk in _iterencode_dict(o, _current_indent_level):
File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\encoder.py", line 459, in _iterencode_dict
  for chunk in chunks:
File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\encoder.py", line 380, in _iterencode_list
  for chunk in chunks:
File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\encoder.py", line 380, in _iterencode_list
  for chunk in chunks:
File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\encoder.py", line 495, in _iterencode
  o = _default(o)
File "C:\Program Files (x86)\Google\google_appengine\lib\simplejson\simplejson\encoder.py", line 190, in default
  raise TypeError(repr(o) + " is not JSON serializable")
TypeError: <babel.support.LazyProxy object at 0x00000000084E81F8> is not JSON serializable 
```

**环境详细信息**：有关 python、webapp2、babel 等版本的所有详细信息可以通过向下滚动到[github.com/coto/gae-boilerplate 的自述文件找到](https://github.com/coto/gae-boilerplate/blob/master/README.rdoc)。我正在运行最新的 google app engine sdk 1.7.0

**如何重现**：

1.  [从https://github.com/coto/gae-boilerplate](https://github.com/coto/gae-boilerplate)下载代码
2.  `from webapp2_extras.i18n import gettext as _`在 web/handlers.py 中替换为`from webapp2_extras.i18n import lazy_gettext as _`
3.  使用应用引擎开发服务器运行（[https://developers.google.com/appengine/docs/python/tools/devserver](https://developers.google.com/appengine/docs/python/tools/devserver)提供的说明）
4.  注册或登录然后注销 (localhost:8080/logout/)。注销的行为将产生一条闪烁消息，指示您已注销，这将触发错误，因为它是在注销处理程序中使用lazy_gettext 包装消息产生的。

任何帮助将不胜感激，无疑会帮助该项目和 webapp2 的其他用户。此外，如果您确实查看了 github 上的代码，那么任何最佳实践技巧都会是一个奖励。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-23T19:20:06.070

Babel 有一个名为 LazyProxy 的自定义类，它基本上只是包装了一个函数，并且只有在它确实需要函数的返回值时才调用它。代理试图尽可能透明，但我假设 simplejson 检查实际的类对象，这就是它失败的地方。

我不确定 simplejson 是否使用协议向未知类询问实例的可序列化版本（然后我们可以在 LazyProxy 中实现它）。

如果您可以以某种方式更改您的库，您还可以为 LazyProxy 实例创建一个自定义序列化程序（这应该非常简单）。另一种选择是找到 LazyProxy 实例并使用“proxy.value”来获取代理值（我假设它是 json-serializable）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-09T18:35:20.240

这真的很旧，但也许其他人也有同样的问题。

惰性 gettext 将翻译过程包装起来以备后用，因此它不是真正的字符串，而是不同类型的对象。一些 json 库会检查您尝试 jsonify 的表达式的类型，因此它会给您一个异常。要解决此问题，您可以使用内置的 unicode 触发翻译。

前任。

```
a = lazy_gettext("wololoh")
jsonify({'msg': a}) # this will throw an exception
jsonify({'msg': unicode(a)}) # this should work correctly 
```

希望它有用

# netty - Netty 阻塞客户端

> ID：11425049
> 
> 赞同：2
> 
> 时间：2012-07-11T03:18:29.887
> 
> 标签：netty

我正在使用 OioClientSocketChannelFactory 和这样的管道设置客户端连接：

```
ClientBootstrap bootstrap = new ClientBootstrap(
    new OioClientSocketChannelFactory(Executors.newCachedThreadPool())
);

pipeline.addLast("encoder", new MessageEncoder());
pipeline.addLast("decoder", new MessageDecoder());
pipeline.addLast("manager", new FooClientManager());
BlockingReadHandler<Message> reader = new BlockingReadHandler<Message>();
pipeline.addLast("reader", reader);
bootstrap.setPipeline(pipeline); 
```

FooClientManager 类（一个 SimpleChannelHandler）在连接时发送握手消息（SimpleChannelHandler.channelConnected），并负责使用来自服务器的握手回复（SimpleChannelHandler.messageReceived）而不将其传递到管道中。我不希望 API 的用户接收某些低级消息，这是 FooClientManager 负责消费的。

预计连接后，API 的用户现在将构造一条消息并调用 channel.write() 发送消息，并调用 reader.read() 阻止等待回复。

我遇到的问题是 FooClientManager 在调用 channel.write() 的 API 的用户之前没有看到握手回复，因为从未执行过 read()。

如果我在调用 channel.write() 之前调用 reader.read()，它会无限期地阻塞，因为 FooClientManager 不会发送我试图读取管道的消息。

处理阻塞客户端 IO 和管道中可能消耗消息的通道处理程序的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T13:24:37.713

FooClientManager 需要在握手完成时通知 API 用户。一种选择是让 API 用户实现一个接口，该接口被传递到 FooClientManager 的构造函数中。您始终可以创建此接口的默认实现，该实现类似于未来，并允许 API 用户阻塞直到握手完成。

另一种选择是让 FooClientManager 向管道发送一条自定义消息，表明连接已准备好。然后 API 用户在 reader.read() 上阻塞，直到它收到消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T16:20:21.223

感谢johnstlr的回答！

这两种解决方案都有效。我们实施的解决方案是让 FooClientManager 将写入请求排队，直到握手完成。然后它发送所有排队的消息。

我们遇到的一个问题是，如果我们将所有写入请求排队直到握手完成，那么当 FooClientManaager 调用 channel.write() 并且消息通过整个管道发送时，握手消息本身就会排队。我们通过让 FooClientManager 构造一个消息事件并将其直接发送到管道中的下一个处理程序来解决这个问题：

```
ctx.sendDownstream(new DownstreamMessageEvent(ctx.getChannel(), new DefaultChannelFuture(ctx.getChannel(), false), msg, e.getChannel().getRemoteAddress())); 
```

# jquery - 如何解析由 jquery $.ajax 获取的 xml 数据

> ID：11425057
> 
> 赞同：0
> 
> 时间：2012-07-11T03:19:38.233
> 
> 标签：jquery, xml-parsing, jsonp

我想通过跨域获取xml数据，所以在`$.ajax`我设置的方法`dataType`中`jsonp`（`crossDomain`参数没用），就像：

```
app.getData = function (url) {
    $.ajax({
        type: "get",
        url: url,
        dataType : "jsonp",
        crossDomain: true,
        success: function (xml) {
            console.log('data', xml);
            //var data = $.parseXML(xml);
            //console.log('data', data);
        }
    })
} 
```

好消息是我可以通过检查`HttpRequest`响应数据正确获取数据。坏消息是我得到的 xml 无法通过浏览器或 javascript 打印或解析。

那么如何获取和打印数据呢？

# python - 对于带有空格的 URL，酸洗 httplib.HTTPMessage 失败的概率不到 1%

> ID：11425058
> 
> 赞同：0
> 
> 时间：2012-07-11T03:19:40.800
> 
> 标签：python, python-2.7, pickle, httplib

在 Python 2.7.2 中，酸洗 a`httplib.HTTPMessage` 的次数超过 99%。但有时在极少数情况下，它会失败：

```
dumps(info)

TypeError: can't pickle StringO objects

dumps(info, 2)

PicklingError: Can't pickle <type 'cStringIO.StringO'>: attribute lookup cStringIO.StringO failed 
```

我怎样才能找出`httplib.HTTPMessage`类的哪个成员（它`info`的一个实例）有问题？

我`info`从调用`open()`从 `urllib2.build_opener`. 到目前为止所有失败的 URL 中都有空格。

# javascript - 使用 jQuery 选择一个 dom 元素不适用于此 id？

> ID：11425061
> 
> 赞同：2
> 
> 时间：2012-07-11T03:20:13.297
> 
> 标签：javascript, jquery, dom, jquery-selectors

我有一个奇怪的行为，也许我错过了一些东西。

我有这个 DOM 元素（Sharepoint Ribbon 元素，但没关系），我想用 jQuery 按 ID 选择它：

```
<span class="ms-cui-row" 
id="Ribbon.EditingTools.CPEditTab.Font-Medium-0-0">...</span> 
```

如果我用类名选择它，`$('.ms-cui-row')`我可以选择它，但我不能用 id 选择它`$('#Ribbon.EditingTools.CPEditTab.Font-Medium-0-0')`。我什至无法选择它`$('[id="Ribbon.EditingTools.CPEditTab.Font-Medium-0-0"]')`。

那么这里有什么意义呢？在 id 名称中使用点可能不是一个好主意 - 但那是微软而不是我，我无法改变它。但对他们来说似乎没问题？

我准备了一个**[jsfiddle](http://jsfiddle.net/jxEQe/1/)**来玩。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T03:23:07.183

您不能`.`在 jQuery 选择器中使用（类选择器的开头除外），因为 jQuery 会假定它引用元素上的类。逃脱它`\\`。

此外，jQuery 中的 id 选择器是`$("#id")`.

您的新选择器：

```
$('#Ribbon\\.EditingTools\\.CPEditTab\\.Font-Medium-0-0') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T03:31:07.157

```
alert($('#Ribbon\\.EditingTools\\.CPEditTab\\.Font-Medium-0-0').length) 
```

为我工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T03:34:03.660

您可以通过以下方式选择带有特殊字符的 id：

`$('[id="Ribbon.EditingTools.CPEditTab.Font-Medium-0-0"]');` [**演示**](http://jsfiddle.net/ricardolohmann/x5j86/1/)

`$('#Ribbon\\.EditingTools\\.CPEditTab\\.Font-Medium-0-0');` [**演示**](http://jsfiddle.net/ricardolohmann/x5j86/2/)

参考：

*   [http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_select_an_element_by_an_ID_that_has_characters_used_in_CSS_notation.3F](http://docs.jquery.com/Frequently_Asked_Questions#How_do_I_select_an_element_by_an_ID_that_has_characters_used_in_CSS_notation.3F)
*   [http://api.jquery.com/id-selector/](http://api.jquery.com/id-selector/)

# hibernate - 为此，在hibernate中应该如何为多对多关系进行映射？

> ID：11425068
> 
> 赞同：0
> 
> 时间：2012-07-11T03:20:51.880
> 
> 标签：hibernate, jakarta-ee, hibernate-mapping

首先，我想告诉我我是休眠新手。

我已经完成了一对一映射、一对多映射等教程，但我仍然有疑问，

我有3张桌子：

```
Users                            Dealfollows                         Deal
=========                        ============                        ============     
userid(PK)                       dealid(FK)                          dealid(PK) 
firstname                        userid(FK)                          name
lastname                                                             description
..                                                                   .. 
```

所以我遇到的问题是，当我在 dealfollows 表中将 dealid 和 userid 与 FK 一起制作为 PK 时，休眠代码生成工具不会为 dealfollows 生成 pojo 类和 hbm 文件所以我想分别保存/更新每个实体用户 - 保存/更新单独交易 - 单独保存/更新交易 - 当用户选择特定交易然后&然后我只想在这里保存/更新它

帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T09:41:11.137

Dealfollows 是一个简单的链接表。hibernate 允许你不必为此声明一个实体，而是一个多线程并处理 crud 本身。例如，这些课程就足够了

```
class User
{
    Set<Deal> deals;
}

class Deal
{
    Set<User> users;
} 
```

# algorithm - 列出所有唯一数字排列的算法包含重复项

> ID：11425070
> 
> 赞同：4
> 
> 时间：2012-07-11T03:21:11.780
> 
> 标签：algorithm, permutation, combinations

问题是：给定一组可能包含重复的数字，返回所有唯一的排列。

天真的方法是使用一个集合（在 C++ 中）来保存排列。这需要*O* ( *n* ! × log( *n* !)) 时间。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T03:36:49.397

最简单的方法如下：

1.  对列表进行排序：`O(n lg n)`
2.  排序后的列表是第一个排列
3.  从前一个排列重复生成“下一个”排列：`O(n! * <complexity of finding next permutaion>)`

步骤 3 可以通过将下一个排列定义为如果排列列表已排序则直接出现在当前排列之后的排列来完成，例如：

```
1, 2, 2, 3
1, 2, 3, 2
1, 3, 2, 2
2, 1, 2, 3
2, 1, 3, 2
2, 2, 1, 3
... 
```

[查找下一个字典排列是 O(n)，在 Wikipedia 页面上以字典顺序生成](http://en.wikipedia.org/wiki/Permutation#Generation_in_lexicographic_order)标题下的排列给出了简单的描述。如果您有野心，您可以使用[简单的更改在 O(1) 中生成下一个排列](http://en.wikipedia.org/wiki/Steinhaus%E2%80%93Johnson%E2%80%93Trotter_algorithm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T04:20:20.217

1）回溯/递归搜索的一些变化通常可以解决这类问题。给定一个返回 (n-1) 个对象的所有排列列表的函数，生成一个包含 n 个对象的所有排列的列表，如下所示：对于列表中的每个元素，在所有可能的位置插入第 n 个对象，检查重复项。这不是特别有效，但它通常会为这类问题生成简单的代码。

2) 参见维基百科[http://en.wikipedia.org/wiki/Permutation#Generation_in_lexicographic_order](http://en.wikipedia.org/wiki/Permutation#Generation_in_lexicographic_order)

3) 学者们在这方面的细节上花了很多时间。请参阅 Knuth Vol 4A 的第 7.2.1.2 节 - 这是一本大型精装书，在亚马逊上有以下简短目录：

第 7 章：组合搜索 1

7.1: 零和一 47

7.2：产生所有可能性 281

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T15:40:23.823

您应该阅读我关于这种排列（除其他外）的[博客文章以获取更多背景信息 - 并点击那里的一些链接。](http://paddy3118.blogspot.co.uk/2012/07/a-permutation-journey.html)

这是我的词典排列生成器的一个版本，它按照 Steinhaus-Johnson-Trotter 排列生成器的生成顺序制作，按要求执行：

```
def l_perm3(items):
    '''Generator yielding Lexicographic permutations of a list of items'''
    if not items:
        yield []
    else:
        dir = 1
        new_items = []
        this = [items.pop()]
        for item in l_perm3(items):
            lenitem = len(item)
            try:
                # Never insert 'this' above any other 'this' in the item 
                maxinsert = item.index(this[0])
            except ValueError:
                maxinsert = lenitem
            if dir == 1:
                # step down
                for new_item in [item[:i] + this + item[i:] 
                                 for i in range(lenitem, -1, -1)
                                 if i <= maxinsert]:
                    yield new_item                    
            else:    
                # step up
                for new_item in [item[:i] + this + item[i:] 
                                 for i in range(lenitem + 1)
                                 if i <= maxinsert]:
                    yield new_item                    
            dir *= -1

from math import factorial
def l_perm_length(items):
    '''\
    Returns the len of sequence of lexicographic perms of items. 
    Each item of items must itself be hashable'''
    counts = [items.count(item) for item in set(items)]
    ans = factorial(len(items))
    for c in counts:
        ans /= factorial(c)
    return ans

if __name__ == '__main__':
    n = [0, 1, 2, 2, 2]
    print '\nLexicograpic Permutations of %i items: %r' % (len(n), n)
    for i, x in enumerate(l_perm3(n[:])):
        print('%3i %r' % (i, x))
    assert i+1 == l_perm_length(n), 'Generated number of permutations is wrong' 
```

上述程序的输出例如如下：

```
Lexicograpic Permutations of 5 items: [0, 1, 2, 2, 2]
  0 [0, 1, 2, 2, 2]
  1 [0, 2, 1, 2, 2]
  2 [2, 0, 1, 2, 2]
  3 [2, 0, 2, 1, 2]
  4 [0, 2, 2, 1, 2]
  5 [2, 2, 0, 1, 2]
  6 [2, 2, 0, 2, 1]
  7 [0, 2, 2, 2, 1]
  8 [2, 0, 2, 2, 1]
  9 [2, 2, 2, 0, 1]
 10 [2, 2, 2, 1, 0]
 11 [2, 1, 2, 2, 0]
 12 [1, 2, 2, 2, 0]
 13 [2, 2, 1, 2, 0]
 14 [2, 2, 1, 0, 2]
 15 [1, 2, 2, 0, 2]
 16 [2, 1, 2, 0, 2]
 17 [2, 1, 0, 2, 2]
 18 [1, 2, 0, 2, 2]
 19 [1, 0, 2, 2, 2] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-17T10:16:05.170

这是我在思考了我是如何手工写出排列并将该方法放入代码中后发明的，它更短更好：

```
def incv(prefix,v):
  list = []
  done = {}
  if v:
    for x in xrange(len(v)):
      if v[x] not in done:
        done[v[x]] = 1
        list = list + incv(prefix+v[x:x+1],v[:x] + v[x+1:])
  else:
    list.append(''.join(prefix))
  return list

def test(test_string,lex_ord=False):
  if lex_ord:
    test_string = [x for x in test_string]
    test_string.sort()
  p = incv([],[x for x in test_string])
  if lex_ord:
    try_p = p[::]
    try_p.sort()
    print "Sort methods equal ?", try_p == p
  print 'All', ','.join(p), "\n", test_string, "gave", len(p), "permutations"

if __name__ == '__main__':
  import sys
  test(sys.argv[1],bool(sys.argv[2] if len(sys.argv) > 2 else False)) 
```

**笔记**

*   `incv`递增排列向量以找到所有排列向量。它还可以正确处理重复的字母。
*   `test`打印出测试字符串的所有排列及其计数。它还确保如果您请求按字典顺序排序，则 sort before 和 sort after 方法是相同的。这应该是 True ，因为原始字符串是有序的，并且增量置换函数将字符串转换为给定字母表的下一个字典字符串。

可以通过以下方式在命令提示符下运行此脚本：

`python script.py [test_string] [optional anything to use lexicographic ordering]`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-27T07:36:57.700

递归版本。这计算 n!/(m*k!) (m 个字符集，k 个重复字符集：

```
#include<iostream>
#include<cstring>

using namespace std;

const int MAX_CHARS_STRING=100;
int CURRENT_CHARS=0;
char STR[MAX_CHARS_STRING];

void myswap(int i, int j){
    char c=STR[i];STR[i]=STR[j];STR[j]=c;
}

bool IstobeExecuted(int start,int position){
    if(start==position)
        return true;
    for(int i=position-1;i>=start;i--){
        if(STR[i]==STR[position])
            return false;
    }
    return true;
}

void Permute(int start, int end,int& perm_no){
    if(end-start<=1){
        if(STR[end]==STR[start]){
            cout<<perm_no++<<") "<<STR<<endl;
            return;
        }
        cout<<perm_no++<<") "<<STR<<endl;
        myswap(start, end);
        cout<<perm_no++<<") "<<STR<<endl;
        myswap(start,end);
        return;
    }
    for(int i=start; i<=end;i++){
        if(!IstobeExecuted(start,i)){
            continue;
        }
        myswap(start,i);
        Permute(start+1,end,perm_no);
        myswap(start,i);
    }
}

int main(){
    cin>>STR;int num=1;
    Permute(0,strlen(STR)-1,num);
    return 0;
} 
```

希望这可以帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-06-07T17:28:08.943

@verdesmarald 解决方案的一个简单而简短的 C++ 实现：

```
vector<vector<int>> permuteUnique(vector<int>& nums) {

    vector<vector<int>> res;
    const auto begin = nums.begin();
    const auto end = nums.end();
    std::sort(begin, end);

    do
    {
        res.push_back(nums);
    } 
    while (std::next_permutation(begin, end));

    return res;
} 
```

我认为时间复杂度是：n*log(n) + m * ComplexityOf(next_permutation) 其中 n 是元素的总数，m 是唯一元素，next_permutation 的复杂度是 O(1) 摊销的。或者他们说：[std::next_permutation 的摊销复杂性？](https://stackoverflow.com/questions/4973077/the-amortized-complexity-of-stdnext-permutation)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-18T08:52:20.900

我稍微改进了[Paddy3118 的解决方案](https://stackoverflow.com/a/11762799/472695)，所以它现在是非递归的、惰性求值的（完全基于生成器）并且速度提高了大约 30%。

```
def _handle_item(xs, d, t):
    l = len(xs)

    try:
        m = xs.index(t)
    except ValueError:
        m = l

    if d:
        g = range(l, -1, -1)
    else:
        g = range(l + 1)

    q = [t]
    for i in g:
        if i <= m:
            yield xs[:i] + q + xs[i:]

def _chain(xs, t):
    d = True

    for x in xs:
        yield from _handle_item(x, d, t)

        d = not d

def permutate(items):
    xs = [[]]

    for t in items:
        xs = _chain(xs, t)

    yield from xs 
```

PS 我注意到 Paddy3118 也让他的实现使用了生成器，而我一直在努力反对博客文章中的实现，这更加内存密集。无论如何我都会发布这个，因为这个版本可能被认为更干净。

# blackberry - Blackberry RIM 无法使用 invalidate() 即时更新

> ID：11425088
> 
> 赞同：0
> 
> 时间：2012-07-11T03:22:58.537
> 
> 标签：blackberry

我得到了搜索栏，所以可以滑动。当我滑动时，我会得到当前值。值在 10-35 之间。当我得到值时，我需要应用标签字段的字体大小并立即更改字体大小。我调用了`invalidate()`after 获取值，但它不会改变字体大小。

```
public class Custom_FontField extends Field {
private final static int STATE_NORMAL = 0;
private final static int STATE_FOCUSED = 1;
private final static int STATE_PRESSED = 2;

private final static int NUM_STATES = 3;

private Bitmap[] _thumb = new Bitmap[NUM_STATES];
private Bitmap[] _progress = new Bitmap[NUM_STATES];
private Bitmap[] _base = new Bitmap[NUM_STATES];
private Bitmap[] _progressTile = new Bitmap[NUM_STATES];
private Bitmap[] _baseTile = new Bitmap[NUM_STATES];

private int _thumbWidth;
private int _thumbHeight;
private int _progressHeight;
private int _baseWidth;
private int _baseHeight;

private int _leftCapWidth;
private int _rightCapWidth;

private boolean _focused;
private boolean _pressed;

private int _numValues;
private int _currentValue;

private int _preferredHeight;

private int _baseY;
private int _progressY;
private int _thumbY;
private int _trackWidth;

private int _rop;

public Custom_FontField(Bitmap normalThumb, Bitmap normalProgress,
        Bitmap normalBase, Bitmap focusedThumb, Bitmap focusedProgress,
        Bitmap focusedBase, int numValues, int initialValue,
        int leftCapWidth, int rightCapWidth) {
    this(normalThumb, normalProgress, normalBase, focusedThumb,
            focusedProgress, focusedBase, null, null, null, numValues,
            initialValue, leftCapWidth, rightCapWidth, 0);
}

public Custom_FontField(Bitmap normalThumb, Bitmap normalProgress,
        Bitmap normalBase, Bitmap focusedThumb, Bitmap focusedProgress,
        Bitmap focusedBase, int numValues, int initialValue,
        int leftCapWidth, int rightCapWidth, long style) {
    this(normalThumb, normalProgress, normalBase, focusedThumb,
            focusedProgress, focusedBase, null, null, null, numValues,
            initialValue, leftCapWidth, rightCapWidth, style);
}

public Custom_FontField(Bitmap normalThumb, Bitmap normalProgress,
        Bitmap normalBase, Bitmap focusedThumb, Bitmap focusedProgress,
        Bitmap focusedBase, Bitmap pressedThumb, Bitmap pressedProgress,
        Bitmap pressedBase, int numValues, int initialValue,
        int leftCapWidth, int rightCapWidth) {
    this(normalThumb, normalProgress, normalBase, focusedThumb,
            focusedProgress, focusedBase, pressedThumb, pressedProgress,
            pressedBase, numValues, initialValue, leftCapWidth,
            rightCapWidth, 0);
}

public Custom_FontField(Bitmap normalThumb, Bitmap normalProgress,
        Bitmap normalBase, Bitmap focusedThumb, Bitmap focusedProgress,
        Bitmap focusedBase, Bitmap pressedThumb, Bitmap pressedProgress,
        Bitmap pressedBase, int numValues, int initialValue,
        int leftCapWidth, int rightCapWidth, long style) {
    super(style);

    if (numValues < 2 || initialValue >= numValues) {
        throw new IllegalArgumentException("invalid value parameters");
    }
    if (normalThumb == null || normalProgress == null || normalBase == null
            || focusedThumb == null || focusedProgress == null
            || focusedBase == null) {
        throw new IllegalArgumentException(
                "thumb, normal, focused  are required");
    }

    _thumbWidth = normalThumb.getWidth();
    _thumbHeight = normalThumb.getHeight();
    _progressHeight = normalProgress.getHeight();
    _baseWidth = normalBase.getWidth();
    _baseHeight = normalBase.getHeight();

    if (focusedThumb.getWidth() != _thumbWidth
            || focusedThumb.getHeight() != _thumbHeight
            || focusedProgress.getHeight() != _progressHeight
            || focusedBase.getHeight() != _baseHeight) {
        throw new IllegalArgumentException(
                "all base bitmaps and all progress bitmaps must be the same height");
    }
    if (pressedThumb != null && pressedProgress != null
            && pressedBase != null) {
        if (pressedThumb.getWidth() != _thumbWidth
                || pressedThumb.getHeight() != _thumbHeight
                || pressedProgress.getHeight() != _progressHeight
                || pressedBase.getHeight() != _baseHeight) {
            throw new IllegalArgumentException(
                    "all base bitmaps and all progress bitmaps must be the same height");
        }
    }

    _leftCapWidth = leftCapWidth;
    _rightCapWidth = rightCapWidth;

    _rop = Graphics.ROP_SRC_COPY;

    initBitmaps(normalThumb, normalProgress, normalBase, STATE_NORMAL);
    initBitmaps(focusedThumb, focusedProgress, focusedBase, STATE_FOCUSED);

    if (pressedThumb != null && pressedProgress != null
            && pressedBase != null) {
        initBitmaps(pressedThumb, pressedProgress, pressedBase,
                STATE_PRESSED);
    } else {
        _thumb[STATE_PRESSED] = _thumb[STATE_FOCUSED];
        _progress[STATE_PRESSED] = _progress[STATE_FOCUSED];
        _base[STATE_PRESSED] = _base[STATE_FOCUSED];
        _progressTile[STATE_PRESSED] = _progressTile[STATE_FOCUSED];
        _baseTile[STATE_PRESSED] = _baseTile[STATE_FOCUSED];
    }

    _preferredHeight = Math.max(_thumbHeight,
            Math.max(_progressHeight, _baseHeight));

    _numValues = numValues;
    setValue(initialValue);
}

public void initBitmaps(Bitmap thumb, Bitmap progress, Bitmap base,
        int state) {
    if (progress.getWidth() <= _leftCapWidth
            || base.getWidth() <= _rightCapWidth) {
        throw new IllegalArgumentException();
    }

    if (thumb.hasAlpha() || progress.hasAlpha() || base.hasAlpha()) {
        _rop = Graphics.ROP_SRC_ALPHA;
    }

    _thumb[state] = thumb;
    _progress[state] = progress;
    _base[state] = base;

    int[] argbCopyBuffer;

    int progressTileWidth = progress.getWidth() - _leftCapWidth;
    int progressTileHeight = progress.getHeight();

    Bitmap progressTile = new Bitmap(progressTileWidth, progressTileHeight);

    argbCopyBuffer = new int[progressTileWidth * progressTileHeight];
    progress.getARGB(argbCopyBuffer, 0, progressTileWidth, _leftCapWidth,
            0, progressTileWidth, progressTileHeight);
    progressTile.setARGB(argbCopyBuffer, 0, progressTileWidth, 0, 0,
            progressTileWidth, progressTileHeight);

    int baseTileWidth = base.getWidth() - _rightCapWidth;
    int baseTileHeight = base.getHeight();

    Bitmap baseTile = new Bitmap(baseTileWidth, baseTileHeight);

    argbCopyBuffer = new int[baseTileWidth * baseTileHeight];
    base.getARGB(argbCopyBuffer, 0, baseTileWidth, 0, 0, baseTileWidth,
            baseTileHeight);
    baseTile.setARGB(argbCopyBuffer, 0, baseTileWidth, 0, 0, baseTileWidth,
            baseTileHeight);

    _progressTile[state] = progressTile;
    _baseTile[state] = baseTile;
}

public void setValue(int newValue) {
    if (newValue < 0 || newValue >= _numValues) {
        throw new IllegalArgumentException();
    }
    _currentValue = newValue;
    fieldChangeNotify(FieldChangeListener.PROGRAMMATIC);
    invalidate();
}

public int getValue() {
    return _currentValue;
}

public int getNumValues() {
    return _numValues;
}

public int getPreferredWidth() {
    return Integer.MAX_VALUE;
}

public int getPreferredHeight() {
    return _preferredHeight;
}

protected void layout(int width, int height) {
    width = Math.min(width, getPreferredWidth());
    height = Math.min(height, getPreferredHeight());

    _progressY = (height - _progressHeight) / 2;
    _baseY = (height - _baseHeight) / 2;
    _thumbY = (height - _thumbHeight) / 2;

    _trackWidth = width - _leftCapWidth - _rightCapWidth;

    setExtent(width, height);
}

public void paint(Graphics g) {
    int contentWidth = getContentWidth();

    int thumbX = _leftCapWidth + (_trackWidth - _thumbWidth)
            * _currentValue / (_numValues - 1);
    int transitionX = thumbX + _thumbWidth / 2;

    int currentState = _pressed ? STATE_PRESSED : (_focused ? STATE_FOCUSED
            : STATE_NORMAL);

    Bitmap thumb = _thumb[currentState];
    Bitmap progress = _progress[currentState];
    Bitmap base = _base[currentState];
    Bitmap progressTile = _progressTile[currentState];
    Bitmap baseTile = _baseTile[currentState];

    g.drawBitmap(0, _progressY, _leftCapWidth, _progressHeight, progress,
            0, 0);
    g.tileRop(_rop, _leftCapWidth, _progressY, transitionX - _leftCapWidth,
            _progressHeight, progressTile, 0, 0);

    g.drawBitmap(contentWidth - _rightCapWidth, _baseY, _rightCapWidth,
            _baseHeight, base, _baseWidth - _rightCapWidth, 0);
    g.tileRop(_rop, transitionX, _baseY, contentWidth - transitionX
            - _rightCapWidth, _baseHeight, baseTile, 0, 0);

    g.drawBitmap(thumbX, _thumbY, _thumbWidth, _thumbHeight, thumb, 0, 0);
}

protected void drawFocus(Graphics g, boolean on) {

}

protected void onFocus(int direction) {
    _focused = true;
    invalidate();
    super.onFocus(direction);
}

protected void onUnfocus() {
    _focused = false;
    invalidate();
    super.onUnfocus();
}

protected boolean touchEvent(TouchEvent message) {
    int event = message.getEvent();
    switch (event) {

    case TouchEvent.CLICK:
    case TouchEvent.DOWN:
        if (touchEventOutOfBounds(message)) {
            return false;
        }

    case TouchEvent.MOVE:
        _pressed = true;
        setValueByTouchPosition(message.getX(1));
        fieldChangeNotify(0);
        return true;

    case TouchEvent.UNCLICK:
    case TouchEvent.UP:
        _pressed = false;
        invalidate();
        return true;

    default:
        return false;
    }
}

private boolean touchEventOutOfBounds(TouchEvent message) {
    int x = message.getX(1);
    int y = message.getY(1);
    return (x < 0 || y < 0 || x > getWidth() || y > getHeight());
}

private void setValueByTouchPosition(int x) {
    _currentValue = MathUtilities.clamp(0, (x - _leftCapWidth) * _numValues
            / _trackWidth, _numValues - 1);
    invalidate();
}

protected boolean navigationMovement(int dx, int dy, int status, int time) {
    if (_pressed) {
        if (dx > 0 || dy > 0) {
            incrementValue();
        } else {
            decrementValue();
        }
        fieldChangeNotify(0);
        return true;
    }
    return super.navigationMovement(dx, dy, status, time);
}

private void incrementValue() {
    if (_currentValue + 1 < _numValues) {
        _currentValue++;
        invalidate();
    }
}

private void decrementValue() {
    if (_currentValue > 0) {
        _currentValue--;
        invalidate();
    }
}

protected boolean invokeAction(int action) {
    if (action == ACTION_INVOKE) {
        togglePressed();
        return true;
    }
    return false;
}

protected boolean keyChar(char key, int status, int time) {
    if (key == Characters.SPACE || key == Characters.ENTER) {
        togglePressed();
        return true;
    }
    return false;
}

protected boolean trackwheelClick(int status, int time) {
    togglePressed();
    return true;
}

private void togglePressed() {
    _pressed = !_pressed;
    invalidate();
}

}

public class Main_NewsDetail extends MainScreen {
private Custom_FontField slider;
private boolean isSliderVisible = false;
private int dynamicfont = 10;

public Main_NewsDetail() {
    super(USE_ALL_WIDTH);
    add(new Custom_TopField(this, 2, 0));
    add(new Custom_NewsDetailBottom());
    add(new Custom_HeaderField(""));
    add(new Custom_NewsDetailField(  <-- the font size set inside this field
            "aaaaaaaaaaaaaa",
            "bbb",
            "ccc",
            "dddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddddd",
            "eeeeeeeeee", "fffff"));
    slider = new Custom_FontField(
            Bitmap.getBitmapResource("slider_thumb_normal.png"),
            Bitmap.getBitmapResource("slider_progress_normal.png"),
            Bitmap.getBitmapResource("slider_base_normal.png"),
            Bitmap.getBitmapResource("slider_thumb_focused.png"),
            Bitmap.getBitmapResource("slider_progress_focused.png"),
            Bitmap.getBitmapResource("slider_base_focused.png"),
            Bitmap.getBitmapResource("slider_thumb_pressed.png"),
            Bitmap.getBitmapResource("slider_progress_pressed.png"),
            Bitmap.getBitmapResource("slider_base_pressed.png"), 35, 10, 5,
            5, FOCUSABLE);
    dynamicfont = slider.getValue(); <-- get the value
    invalidate(); <-- refresh it but did not set the fontsize instantly.
}

public class Custom_NewsDetailField extends Manager {
    ...
    ...
    contentlabel = new Custom_LabelField(content,
                LabelField.USE_ALL_WIDTH | DrawStyle.LEFT | Field.FOCUSABLE);
        contentlabel.setFont(Font.getDefault().derive(Font.BOLD,
                dynamicfont));
        contentlabel.setFontColor(Color.BLACK);
        add(contentlabel);
} 
```

我可以控制`invalidate()`的可见字段`slider`出现在显示中，但不能显示`contentlabel`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:18:18.563

```
protected boolean navigationMovement(int dx, int dy, int status,
            int time) {
        if (_pressed) {
            if (dx > 0 || dy > 0) {
                incrementValue();
            } else {
                decrementValue();
            }
            fieldChangeNotify(0);
            contentlabel.setFont(Font.getDefault().derive(Font.BOLD,
                    getValue()));
            return true;
        }
        return super.navigationMovement(dx, dy, status, time);
    } 
```

这会做。

# maven - 使用 maven-assembly-plugin 构建 ZIP 存档时如何禁用压缩

> ID：11425094
> 
> 赞同：6
> 
> 时间：2012-07-11T03:23:49.283
> 
> 标签：maven, maven-assembly-plugin

我有一个由 maven-assembly-plugin 生成的 ZIP 存档。它主要包含已经压缩的 JAR。再次压缩它们只会增加构建时间而没有任何收益。在构建 ZIP 存档时，如何配置 maven-assembly-plugin（或程序集描述符）以关闭压缩（即仅存储）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T04:17:00.723

使用`archiverConfig`程序集插件配置中的元素，将`compress`选项设置为`false`.

例如

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-assembly-plugin</artifactId>
    <version>2.3</version>
    <configuration>
        <descriptors>
            <descriptor>src/main/assembly/zip-application.xml</descriptor>
        </descriptors>
        <attach>true</attach>

        <!-- Turn off compression -->
        <archiverConfig>
            <compress>false</compress>
        </archiverConfig>
    </configuration>
    <executions>
        <execution>
            <id>create-zip</id>
            <phase>package</phase>
            <goals>
                <goal>single</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

# c# - 使用 NancyFx 的好处？

> ID：11425095
> 
> 赞同：35
> 
> 时间：2012-07-11T03:24:09.480
> 
> 标签：c#, asp.net, rest, nancy, webhttp

还有另一个用于进行 HTTP 调用的框架，称为 NancyFx。我的问题是使用它有什么好处。我快速浏览了文档：

[https://github.com/NancyFx/Nancy/wiki/Documentation](https://github.com/NancyFx/Nancy/wiki/Documentation)

并且看起来没有我想使用它的出色功能。通过 WebHttp 使用它有什么好处？

*PS：*我一直在读一些奇怪的短语，一遍又一遍地重复“super-duper-happy-path”。除了这个“超级快乐的路径”之外还有什么？实现了哪些真正的功能？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-11T03:36:46.937

它似乎提供了一种不同的方法来定义“路由”（在 MVC 意义上），使用 lambdas 来识别相对路径、参数和响应的实现。

最终，该框架的主要优势在于它的表现力。在 ASP.NET MVC 中，RouteTable 位于 global.asax 中，而实现位于 Control 中。似乎在 NancyFx 中，这是流行的模式：

```
Action["/path"] = args => { return your_implementation_here; } 
```

示例实现：

```
Get["/products"] = id => { return GetRepository().Products.Single( q => q.Id == id); }; 
```

说明：使用“Id”参数对相对端点“/products”进行 HTTP 获取将从存储库中返回单个产品，其中 Id 参数与产品的 Id 匹配。

表现力和简洁。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-03-01T01:34:30.883

免责声明：我不是 NancyFx 的支持者 :)
我正在评估是否应该使用 NancyFx 或使用 ASP.NET Web API 作为项目的 REST 部分。

除了 GlennFerrieLive 已经提到的简单性和表现力（我认为它们本身确实有价值）之外，我想我还掌握了另外几个不错的地方：

1.  可以说，以一种*面向方面的方式，在任何 API 请求处理**之前*和*之后*执行操作都很容易。

**   默认情况下，框架会处理接受的返回类型，因此它会适当地将输出转换为 JSON、XML、...

    *   实现请求的 Lambda 不会返回实际*填充*的数据，但仍以查询的形式返回。之后，仍然可以在实际执行查询、访问数据库和返回实际数据之前轻松添加过滤、排序和其他操作。

    *   他们以某种方式包装了 HttpRequest 并提供给开发人员一个等价物，不同之处在于这个新对象是注入的，你当然可以用一个模拟代替它......所以更容易和更清洁的测试。* 

 *也许其中一些（全部？）已经在 ASP.NET Web API 中可用，并且同样容易，我不确定。
高温高压*

# actionscript-3 - 数学帮助将网格映射到网格。我尝试动态寻路解决方案，需要建议

> ID：11425098
> 
> 赞同：1
> 
> 时间：2012-07-11T03:24:24.613
> 
> 标签：actionscript-3, apache-flex, math, coordinates, path-finding

我正在使用 Flex 和 Flashpunk 框架开发 AS3 游戏。这样做的要求之一是我可能有大量的实体使用 A* 算法移动、碰撞和寻路。

我尝试优化此解决方案的方法之一是让 A* 函数在有限的地图区域中工作，该地图区域由实体周围的可变网格大小组成。实体通过“感应范围”限制定位和路径移动到另一个实体的能力受到限制。

我的想法是，我可以通过仅在需要时搜索一个小区域来避免使用 A* 来解决动态障碍和目标。一旦接收到路径，实体将在检查冲突时移动到第一个节点。如果在途中检测到冲突，实体将等待一两秒，然后重新检查冲突。如果没有找到继续到节点，重新检查，移动到下一个。如果延迟后碰撞仍然存在，这很可能是静态障碍物，应重新计算路径。

我遇到的问题涉及我正在使用的实现以及它如何存储这些网格数据。目前地图被表示为一个长度等于网格区域的数组。我知道这应该被移到排序列表或二进制堆中，但我会保持简单，直到我有一些可以正常工作的东西。

**对，所以这是实际的问题：** ![路径图](../Images/b7cc13b565926f138b5cdada03d2d228.png)

此网格表示在世界位置 500,500 处的实体的搜索数组。实体精灵尺寸为 64x64。实体表示为网格中心的灰色方块。

每个网格中的第一个数字是数组中的索引，第二个是行和列（这是 A* 函数存储数组的方式），第三个是相对于实体位置的世界坐标。每个网格块代表一个 64x64 的区域。

我正在尝试将网格写入世界坐标函数。我有一个路径数组，其中包含路径中每个节点的行/列，但我需要将其转换为相对世界坐标。请注意，0,0 坐标位于左上角。

我在编写这个函数时做了几次尝试，但没有成功，我的数学很糟糕。如果有人知道如何做到这一点，或者解决这个问题的不同方法，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T15:09:19.380

好吧，从 (0,0) 穿过（从左到右），我可以通过

x_world = 372 + 64*x_grid

同样对于 y

y_world = 372 + 64*y_grid

这有帮助吗？

# java - 如何在 Java GUI 编程中获得 Windows 原生外观？

> ID：11425103
> 
> 赞同：45
> 
> 时间：2012-07-11T03:25:18.120
> 
> 标签：java, windows, swing, user-interface

我是 Java 编程新手，想知道是否可以在 Java GUI 应用程序中获得 Windows 原生外观。显然 Swing 是行不通的。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2012-07-11T05:24:43.083

使用以下内容：

```
UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName()); 
```

阅读[UIManager](http://docs.oracle.com/javase/6/docs/api/javax/swing/UIManager.html)和[如何设置外观](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)以获取更多信息。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-07-11T04:26:49.037

试试这个....

语法是：

`UIManager.setLookAndFeel(PLAF); (Pluggable Look and Feel)`

因此，**您必须包括以下 3 行。**

```
UIManager.setLookAndFeel("com.sun.java.swing.plaf.windows.WindowsLookAndFeel");

SwingUtilities.updateComponentTreeUI(frame);

updateComponentTreeUI(frame); 
```

**SwingUtilities.updateComponentTreeUI(frame)**用于在更改后刷新框架。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-07-11T03:31:16.903

试试这个代码：

```
javax.swing.UIManager.setLookAndFeel("Windows") 
```

# autosuggest - 在 PHP 中使用 JQuery 自动建议使用另一个文本字段

> ID：11425105
> 
> 赞同：0
> 
> 时间：2012-07-11T03:25:22.097
> 
> 标签：autosuggest

我正在寻找用于 php 的自动建议 jquery 脚本以获取从另一个字段识别的结果。示例：用户必须在两个字段中输入两次地址。如果用户在第二个字段中输入相同的地址，它应该建议他在上面输入的相同地址。那可能吗 ？

```
<input type="text" name="address1" id="address1" value="some area, some city, some country" />

<input type="text" name="address2" id="address2" value="above area, above city, above country" /> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:33:46.427

您需要为#address2 动态分配自动完成源。

试试这个：

```
$("#address2").autocomplete();
$('#address2').focus(function() {
    $(this).autocomplete("option", {
        source: [$('#address1').val()]
    });
}); 
```

JSFiddle：http: [//jsfiddle.net/n59sF/](http://jsfiddle.net/n59sF/)

# python - Python pip 安装失败：无效命令 egg_info

> ID：11425106
> 
> 赞同：210
> 
> 时间：2012-07-11T03:25:46.387
> 
> 标签：python, pip

我发现最近当我尝试使用*[pip](https://en.wikipedia.org/wiki/Pip_%28package_manager%29)*[安装Python](http://en.wikipedia.org/wiki/Python_%28programming_language%29)包时，经常会收到以下错误。

我在网上找到了一个参考，必须使用下载目录中的“ *python2 setup.py install* ”，并且确实发现如果我手动查找并下载包（来自pypi），这将起作用。

但是，我不知道 pip 将包下载到哪里，和/或为什么以这种方式失败。

我尝试进行 pip 升级，但它也以类似的方式失败，出现一堆“未知分发选项”错误（entry_points、zip_safe、test_suite、tests_require）！

*   点 1.0.1
*   [活动Python](https://en.wikipedia.org/wiki/ActivePython) 2.7

尝试使用 ActiveState 的 pypm 失败，因为它们的库基础较小，并且不包含这些包。

```
C:\test>pip install requests-oauth
Downloading/unpacking requests-oauth
  Downloading requests-oauth-0.4.1.tar.gz
  Running setup.py egg_info for package requests-oauth
    E:\Plang\ActivePython\lib\distutils\dist.py:267: UserWarning: Unknown distribution option: 'zip_safe'
      warnings.warn(msg)
    E:\Plang\ActivePython\lib\distutils\dist.py:267: UserWarning: Unknown distribution option: 'install_requires'
      warnings.warn(msg)
    usage: -c [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]
       or: -c --help [cmd1 cmd2 ...]
       or: -c --help-commands
       or: -c cmd --help

    error: invalid command 'egg_info'
    Complete output from command python setup.py egg_info:
    E:\Plang\ActivePython\lib\distutils\dist.py:267: UserWarning: Unknown distribution option: 'zip_safe'
  warnings.warn(msg)

E:\Plang\ActivePython\lib\distutils\dist.py:267: UserWarning: Unknown distribution option: 'install_requires'
  warnings.warn(msg)

usage: -c [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]
   or: -c --help [cmd1 cmd2 ...]
   or: -c --help-commands
   or: -c cmd --help

error: invalid command 'egg_info' 
```

* * *

## 回答 #1

> 赞同：321
> 
> 时间：2012-07-11T05:01:16.170

~~安装附带的[分发](http://pypi.python.org/pypi/distribute/0.6#installation-instructions)`egg_info`。~~

~~应该很简单`pip install Distribute`。~~

从 0.7 版开始，Distribute 已合并到 Setuptools。如果您使用的版本 <=0.6，请使用`pip install --upgrade setuptools`或升级`easy_install -U setuptools`。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2013-08-06T13:11:08.867

由于分发已合并回 setuptools，现在建议安装/升级 setuptools：

```
[sudo] pip install --upgrade setuptools 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-07-18T08:18:28.003

请记住，`pip install --upgrade Distribute`如果您已经安装了它，并且您`pip`可能需要`pip2`在某些系统上使用 Python2（它在我的系统上），您可能必须这样做。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-01-17T00:36:37.253

我遇到了这个问题，以及[OS X v10.9](http://en.wikipedia.org/wiki/OS_X_Mavericks) (Mavericks) 上的 Brewed Python 的其他一些问题。

```
sudo pip install --upgrade setuptools 
```

对我不起作用，我认为我的 setuptools/distribute 设置很糟糕。

我终于通过运行让它工作了

```
sudo easy_install -U setuptools 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2014-05-14T14:25:46.760

在[Ubuntu 12.04](http://en.wikipedia.org/wiki/List_of_Ubuntu_releases#Ubuntu_12.04_LTS_.28Precise_Pangolin.29) LTS (Precise Pangolin) 上，以上方法都不适用于我，这就是我最终修复它的方法：

从下载**setuptools**[下载 ez_setup.py](https://pypi.python.org/pypi/setuptools)（参见“安装说明”部分），然后：

```
$ sudo python ez_setup.py 
```

我希望它可以节省一些时间。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2015-06-02T07:31:53.660

当您尝试安装`pycurl`.

在这种情况下，你应该做

```
sudo apt-get install libcurl4-gnutls-dev librtmp-dev 
```

（创建于此处：[https](https://gist.github.com/lxneng/1031014) ://gist.github.com/lxneng/1031014 ）

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-08-13T13:54:48.190

在 CentOS 6.5 上，全新安装的简短回答是：

`yum -y install python-pip pip install -U pip pip install -U setuptools pip install -U setuptools`

您没有看到 double，您必须运行 setuptools upgrade 两次。长答案如下：

`python-pip`使用 yum安装软件包会带来`python-setuptools`依赖项。这是一个相当旧的版本，因此它实际上是在安装`distribute (0.6.10)`. 安装包管理器后，我们通常想要更新它，所以我们这样做了`pip install -U pip`. 对我来说，当前版本的 pip 是 1.5.6。

现在我们去更新 setuptools，这个版本的 pip 足够聪明，知道它应该首先删除旧版本的分发。它会这样做，但它不会安装最新版本的 setuptools 而是安装`setuptools (0.6c11)`.

在这一点上，由于这个非常旧的 setuptools 版本，各种事情都被破坏了，但我们实际上已经完成了一半。如果我们现在再次运行完全相同的命令，`pip install -U setuptools`则会删除旧版本的 setuptools，并安装 5.5.1 版本。我不知道为什么 pip 没有一次将我们直接带到新版本，但这就是正在发生的事情，希望它会帮助其他人看到这一点，并且知道你不会发疯。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2014-03-18T12:52:39.133

看起来默认的 easy_install 在其当前位置已损坏：

`$ which easy_install /usr/bin/easy_install`

克服这个问题的一种方法是在站点包中使用 easy_install。例如：

`$ sudo python /Library/Python/2.7/site-packages/easy_install.py boto`

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2015-12-03T12:43:52.787

我面临同样的问题，我尝试了上述所有答案。但不幸的是，以上都没有奏效。

作为一个说明，我终于解决了这个问题`pip uninstall distribute`。

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-02-24T13:48:44.290

我知道这是一个较老的问题，但这里是我用来`cassandra-driver`在 Windows 7 / Python2 上实际安装的步骤。~~我家里有 Windows 10 / Python3，今晚我将在其中进行测试。~~我已经确认这也适用于带有 Python 2 和 3 的 Windows 10。

**问题**

```
Command "python setup.py egg_info" failed with error code 1 in c:\users\Frito\appdata\local\temp\pip-build-7dgmdc\cassandra-driver 
```

**TL;DR 解决方案**

*   已安装[https://www.microsoft.com/en-us/download/details.aspx?id=44266](https://www.microsoft.com/en-us/download/details.aspx?id=44266)（适用于 Python 2.7 的 Microsoft Visual C++ 编译器）

**解决方案**（我很想有人解释为什么会这样）

*   尝试`pip install cassandra-driver`并收到上述错误消息
*   尝试`pip install --pre cassandra-driver`并得到以下错误

> ```
> distutils.errors.DistutilsError: Setup script exited with error: Microsoft Visual C++ 9.0 is required (Unable to find vcvarsall.bat).
> Get it from http://aka.ms/vcpython27
> 
> Command "c:\users\Frito\.virtualenvs\symdash\scripts\python.exe -u -c "import setuptools, tokenize;__file__='c:\\users\\Frito\\appdata\\local\\temp\\pip-build-sesxxu\\cassandra-driver\\setup.py';exec(compile(getattr(tokenize, 'open', open)(__file__).read().replace('\r\n', '\n'), __file__, 'exec'))" install --record  c:\users\Frito\appdata\local\temp\pip-ujsxsk-record\install-record.txt --single-version-externally-managed --compile --install-headers c:\users\Frito\.virtualenvs\symdash\include\site\python2.7\cassandra-driver"  failed with error code 1 in  c:\users\Frito\appdata\local\temp\pip-build-sesxxu\cassandra-driver 
> ```

*   已安装`Microsoft Visual C++ Compiler for Python 2.7`
*   成功执行`pip install --pre cassandra-driver`
*   成功执行`pip uninstall cassandra-driver`
*   成功执行`pip install cassandra-driver`

重申一下，我不确定为什么会这样。现在我的两个主要结论是，要么需要 C++ 编译器，要么在*第*一次运行该`--pre`选项时安装了一些“常规”安装中缺少的依赖项。当我有更多细节时，我会在今晚下班后更新。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-01-27T15:29:01.350

`pip install -U setuptools`并将`easy_install`egg-info 放在错误的目录中。

然后我就重新安装了`apt-get install python-dev`。之后让我安装我想要的驱动程序

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-07-12T23:02:16.907

尝试以下命令：

```
pip install setuptools==28.8.0 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2016-11-28T17:09:43.297

我只是将 Liquidki 的答案转换为 Ubuntu 命令。在基于 Ubuntu 的系统上它可以工作！：

```
sudo apt -y install python-pip
pip install -U pip
sudo pip install -U setuptools 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-10-24T20:38:44.803

对我来说，将 pip 从 8.1.1 升级到 9.0.1 解决了这个问题。

您可以运行类似`sudo -H pip2 install --upgrade pip`升级 pip 版本的操作。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-10-23T14:01:34.840

当我想在虚拟环境中使用命令安装**cairosvg时，我也会遇到类似的错误消息“命令 'python setup.py egg_info' failed with error code 1”。**`pip install cairosvg`

然后我在运行之前`pip install --upgrade pip`和之前都试过了，但我仍然得到这个错误。`pip install --upgrade setuptools``pip3 install cairosvg`

我可以在安装命令前使用**sudo**摆脱这个错误： `sudo pip install cairosvg`。但请注意，带有**sudo**的命令将为系统 python 而不是虚拟环境安装包。

So, I further check the error message and find that I get the error while installing the **cairocffi**. Then I install a certain version of cairocffi ([refer to this answer](https://stackoverflow.com/a/35172496/6384650)) before install cairosvg. That is how I solve my problem.

# java - 使用 JAXB 编组时如何包含肥皂信封标签？

> ID：11425109
> 
> 赞同：1
> 
> 时间：2012-07-11T03:26:24.067
> 
> 标签：java, xml, soap, jaxb, marshalling

我正在使用 JAXB 编组一个肥皂请求。它正在工作，但生成的 XML 不包含该`soap:Envelope`标记。此外，命名空间在根元素上而不是在`soap:Envelope`标签内指示。xml 标签上还有一个附加`standalone`属性。如何使用 JAXB 的编组器实现类似于下面第二个 XML 的输出？

目前，我的编组 XML 如下所示：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<Customer xmlns:ns="http://www.example.org/beanLevelNamespace">
    <ns:id>201200001</ns:id>
    <ns:name>Name</ns:name>
    <ns:age>18</ns:age>
</Customer> 
```

这就是我希望它的样子：

```
<?xml version="1.0" encoding="UTF-8"?>
<soap:Envelope
    xmlns:soap="http://www.w3.org/2001/12/soap-envelope"
    soap:encodingStyle="http://www.w3.org/2001/12/soap-encoding">   
    <soap:Body xmlns:ns="http://www.example.org/beanLevel1Namespace" xmlns:ns1="http://www.example.org/beanLevel2Namespace">
        <ns:Customer>
            <ns1:id>201200001</ns:id>
            <ns1:name>Name</ns:name>
            <ns1:age>18</ns:age>
        </ns:Customer>
    </soap:Body>
</soap:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:24:42.677

您可以在发送前将您的 XML 添加到信封中。

```
"<Envelope><Body>" + your_xml + "</Body></Envelope> 
```

始终将命名空间保持在元素级别；不在信封级别。因为在查看元素是什么类型时，您会很清楚。将命名空间保存在哪里并不重要。

您的编组 XML 存在问题。正确的 XML 是：

```
<ns:Customer xmlns:ns="http://www.example.org/beanLevelNamespace">
    <ns:id>201200001</ns:id>
    <ns:name>Name</ns:name>
    <ns:age>18</ns:age>
</ns:Customer> 
```

同样，将命名空间声明放在哪里并不重要：

```
<ns:Customer xmlns:ns="http://www.example.org/beanLevelNamespace">
    <ns:id>201200001</ns:id>
</ns:Customer>

<Customer xmlns="http://www.example.org/beanLevelNamespace">
    <id>201200001</id>
</Customer>

<ns1:Customer xmlns:ns1="http://www.example.org/beanLevelNamespace">
    <ns2:id xmlns:ns2="http://www.example.org/beanLevelNamespace">201200001</ns2:id>
</ns1:Customer> 
```

他们都是一样的。

# knockout.js - 如何重新应用淘汰赛绑定

> ID：11425113
> 
> 赞同：0
> 
> 时间：2012-07-11T03:27:06.657
> 
> 标签：knockout.js, zebra-striping

目前我有一个敲除绑定，可以在列表中对行进行条纹处理，效果很好

```
ko.bindingHandlers.stripe = {
    update: function (element, valueAccessor, allBindingsAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor()); //creates the dependency
        var allBindings = allBindingsAccessor();
        var even = allBindings.evenClass;
        var odd = allBindings.oddClass;

        //update odd rows
        $(element).children(":nth-child(odd)").addClass(odd).removeClass(even);
        //update even rows
        $(element).children(":nth-child(even)").addClass(even).removeClass(odd); ;
    }
} 
```

触发自

```
<button data-bind="click: addWidget" style="display:none">Add Item</button> 
```

我遇到的问题是从服务器重新加载数据时，我在视图模型中手动调用 addWidget() 条纹绑定处理程序未应用 - 所有行显示为相同颜色，如果我单击 html 按钮，则发生绑定并出现条纹

```
var ViewModel = function() {

     self.addWidget();

}); 
```

是否可以在 js 中手动重新应用此自定义绑定？

谢谢

编辑：

条纹绑定像这样应用

```
<div data-bind="foreach: widgets, stripe: widgets, evenClass: 'light', oddClass: 'dark'"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:35:09.937

斑马效应 - 一个很好的[答案](https://stackoverflow.com/a/6440155/1155804)和一个有效的[jsfiddle](http://jsfiddle.net/rniemeyer/HJ8zJ/)示例。

或者只是在你的 foreach 循环中为你的列表或表格标签元素（[jsfiddle](http://jsfiddle.net/linuxbender/NnTGF/)）使用索引变量：

```
<ul data-bind="foreach: myList">
    <li data-bind="css: { 'even': ($index() % 2 == 0) }">
        The value is <span data-bind="text: $data"></span>
    </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T06:16:00.167

你不能只使用 CSS 吗？就像是：

```
div.widget:nth-child(2n) { background: grey; } 
```

然后每一行都会更新，无论它是如何添加的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T08:41:57.297

要获得条纹效果，您不需要 Knockout，使用 Tom Hall 建议的 CSS。但是，如果您坚持，这是我对您的问题的看法（假设您使用的是 ko 2.1.x+）：

HTML

```
<table>
    <tbody data-bind="foreach: rows">
        <tr data-bind="css: {odd: $index()%2} ">
            <td>Test Data</td>
        </tr>
    </tbody>
</table> 
```

JS

```
var VM = {
    rows: [{},{},{},{},{}]
};

ko.applyBindings(VM); 
```

您需要做的就是提供一个 CSS 类`.odd`。如果您还想设置偶数行的样式，您可以设置默认背景颜色`<tr>`或提供一个`.even`类，该类应用于具有否定“奇数”条件的元素。

这是一个工作[小提琴](http://jsfiddle.net/8xQab/1/)

# mobile - 像素密度的 CSS 媒体查询：-moz-min-device-pixel-ratio vs. min--moz-device-pixel-ratio

> ID：11425115
> 
> 赞同：13
> 
> 时间：2012-07-11T03:28:07.487
> 
> 标签：mobile, css, media-queries

在使用 CSS 媒体查询来获取设备像素密度时，我同时看到了`-moz-min-device-pixel-ratio`和`min--moz-device-pixel-ratio`.

例如：

```
@media 
  only screen and (-moz-min-device-pixel-ratio: 1.5) {
  /* styles go here */
} 
```

对比

```
@media 
  only screen and (min--moz-device-pixel-ratio: 1.5) {
  /* styles go here*/
} 
```

哪个是对的？

一些使用前者的教程/博客：

*   ~~[http://menacingcloud.com/?c=highPixelDensityDisplays](http://menacingcloud.com/?c=highPixelDensityDisplays)~~
*   ~~[http://css3.bradshawenterprises.com/blog/retina-image-replacement-for-new-ipad/](http://css3.bradshawenterprises.com/blog/retina-image-replacement-for-new-ipad/)~~

一些使用后者的教程/博客，包括 mozilla.org：

*   [http://www.slideshare.net/zomigi/css3-using-media-queries-to-improve-the-web-site-experience](http://www.slideshare.net/zomigi/css3-using-media-queries-to-improve-the-web-site-experience)
*   [https://developer.mozilla.org/en/CSS/Media_queries/](https://developer.mozilla.org/en/CSS/Media_queries/)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-11T06:42:08.240

第二个是正确的。

这是来自[http://www.quirksmode.org/blog/archives/2012/07/vendor_prefixes.html](http://www.quirksmode.org/blog/archives/2012/07/vendor_prefixes.html)

```
-webkit-min-device-pixel-ratio: 1.5
min--moz-device-pixel-ratio: 1.5
-o-min-device-pixel-ratio: 3/2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-12T12:33:15.467

我是上面提到的威胁性云文章的作者。我的文章中列出的设备像素比是不正确的，因为它是很久以前写的（iPhone4 发布）。

它已更新以引用正确的 Mozilla 语法。

我不知道为什么 Mozilla 选择使用 min--moz-device-pixel-ratio，但这似乎是官方选择的形式。

# css - 在页面完全加载之前元素出现在错误的位置

> ID：11425116
> 
> 赞同：0
> 
> 时间：2012-07-11T03:28:19.573
> 
> 标签：css, symfony, less, assetic

我页面中的元素首先出现在随机位置，然后在页面完全加载后移动到正确的位置。这一点都不优雅。我希望他们直接出现在正确的地方。我猜这是因为页面中的元素是在我的 css 之前加载的？

我在 Symfony2 项目中使用较少和资产，我该如何处理它以便元素直接出现在正确的位置？

以下是我处理我的 CSS 资产的方式：

```
 {% block stylesheets %}
        {% stylesheets
            filter='less, ?yui_css'
            output='bundles/yopyourownpoet/css/bootstrap.css'
            '@YOPYourOwnPoetBundle/Resources/public/less/bootstrap.less'
        %}
            <link href="{{ asset_url }}" type="text/css" rel="stylesheet" media="screen" />
        {% endstylesheets %}
        {% stylesheets
            filter='less, ?yui_css'
            output='bundles/yopyourownpoet/css/bootstrap-responsive.css'
            '@YOPYourOwnPoetBundle/Resources/public/less/responsive.less'
        %}
            <link href="{{ asset_url }}" type="text/css" rel="stylesheet" media="screen" />
        {% endstylesheets %}
        <link rel="stylesheet/less" href="{{ asset('bundles/yopyourownpoet/less/bootstrap.less') }}">

        <link href="{{ asset('bundles/yopyourownpoet/css/layout.css') }}" type="text/css" media="screen" rel="stylesheet" />
        <link href="{{ asset('bundles/yopyourownpoet/css/style.css') }}" type="text/css" media="screen" rel="stylesheet" />
        <link href="{{ asset('bundles/yopyourownpoet/css/jquery.cluetip.css') }}" type="text/css" rel="stylesheet" />
    {% endblock %} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:33:37.463

我回答了你以前的问题。这是这个答案，记住运行与前面所述相同的命令。

```
{% block stylesheet %}

{% spaceless %}
<!-- global css -->
{% stylesheets
filter='less,?yui_css'
        '../vendor/twitter/bootstrap/less/bootstrap.less'
        '../vendor/twitter/bootstrap/less/responsive.less'
    %}
<link rel="stylesheet" href="{{ asset_url }}"/>
{% endstylesheets %}

{% endspaceless %}
<link href="{{ asset('bundles/bm/css/style.css') }}" type="text/css" rel="stylesheet"/>
<link href="{{ asset('bundles/bm/css/profile.css') }}" type="text/css" rel="stylesheet"/>
{% endblock stylesheet %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T02:44:46.863

我现在使用 node 预编译我的 css 文件，并且不再使用 less.js 脚本。

这解决了问题，元素现在直接出现在页面中的正确位置。

# wpf - 如果数据表的默认视图是itemsource，如何过 滤数据网格

> ID：11425117
> 
> 赞同：0
> 
> 时间：2012-07-11T03:28:27.267
> 
> 标签：wpf, datagrid, filter, datatable

我正在尝试过滤数据网格以仅显示包含搜索词的行。首先将数据库中的数据加载到数据表中，然后将数据网格的 itemSource 设置为数据表。我在网上找到的所有过滤方法都需要将数据更改为I CollectionView。我使用了当前的代码

```
 List<DataRow> list = dataTable.AsEnumerable().ToList();                               
    ICollectionView view = CollectionViewSource.GetDefaultView(list);
    dataGrid.ItemsSource = view;                
    if (view != null)                
    {                    
         view.Filter = delegate(object o)                   
         {
               var row = o as DataRow;
               for (int j = 0; j < dataTable.Columns.Count; j++)                     
               {
                    string data = row.ItemArray[j].ToString();                            
                    if (data != null)                            
                    {                               
                        if (data.Contains(SearchBox.Text))                                   
                             return true;                           
                    }                        
                }                        
             return false;                   
         };

                dataGrid.ItemsSource = view; 
```

结果是，如果匹配的行是第二行，我将得到两行，但为空白值。行中的所有数据都无法显示。所以数据在 IcollectionView 中，但它只是没有显示出来。有任何想法吗？我真的很感激。只是为了澄清一下，在我添加这个过滤功能之前，我只是使用

```
 dataGrid.ItemSource = dataTable.DefaultView; 
```

一切正常。谢谢你。

# java - 使用 JUnit 以编程方式将 JRE 添加到类路径

> ID：11425118
> 
> 赞同：0
> 
> 时间：2012-07-11T03:28:53.877
> 
> 标签：java, eclipse, junit

我可以使用以编程方式在类路径中添加 JRE

```
entries.add(JavaRuntime.getDefaultJREContainerEntry()); 
```

`entries` classpathyentry在哪里。任何人都知道如何为 JUnit 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:26:19.433

找到了这个

```
IClasspathEntry junit4Entry = BuildPathSupport.getJUnit4ClasspathEntry(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-06T14:15:32.767

如果我尝试

```
IClasspathEntry junit4Entry = BuildPathSupport.getJUnit4ClasspathEntry(); 
```

我明白了

> 不鼓励访问：“ClasspathEntry”类型不是 API（对所需库 /{path}/org.eclipse.jdt.core_3.10.0.v20140604-1726.jar 的限制）

所以

```
IClasspathEntry junit4Entry = JavaCore.newContainerEntry(JUnitCore.JUNIT4_CONTAINER_PATH); 
```

效果更好，没有警告`;)`

# java - Java char Array - 删除元素

> ID：11425119
> 
> 赞同：6
> 
> 时间：2012-07-11T03:29:08.510
> 
> 标签：java, arrays, char

在 Java 中，我想从 char 数组中删除某些元素，因此它执行以下操作：

```
char[] Array1 = {'h','m','l','e','l','l'};
Array1 = //character index[2] to character index[5] 
```

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T03:32:06.297

在 Java 中，您不能从数组中删除元素。但您可以：

创建一个新的`char[]`副本，只复制你想要保留的元素；为此，您可以使用[`System.arraycopy()`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#arraycopy%28java.lang.Object,%20int,%20java.lang.Object,%20int,%20int%29)甚至更简单[`Arrays.copyOfRange()`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28char%5b%5d,%20int,%20int%29). 例如，仅复制数组的前三个字符：

```
char[] array1 = {'h','m','l','e','l','l'};
char[] array2 = Arrays.copyOfRange(array1, 0, 3); 
```

或者使用 a `List<Character>`，它允许您获取包含一系列元素的子列表：

```
List<Character> list1 = Arrays.asList('h','m','l','e','l','l');
List<Character> list2 = list1.subList(0, 3); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T16:29:59.057

**用于从字符数组中删除字符的 Java 函数：**

```
String msg = "johnny can't program, he can only be told what to type";
char[] mychararray = msg.toCharArray();
mychararray = remove_one_character_from_a_character_array_in_java(mychararray, 21);
System.out.println(mychararray);

public char[] remove_one_character_from_a_character_array_in_java(
                           char[] original, 
                           int location_to_remove)
{
    char[] result = new char[original.length-1];
    int last_insert = 0;
    for (int i = 0; i < original.length; i++){
        if (i == location_to_remove)
            i++;

        result[last_insert++] = original[i];
    }
    return result;
} 
```

上述方法打印删除了索引 21 的消息。您可以将它放在一个循环中以删除多个项目。从技术上讲，您不是在删除一个项目，而是在创建一个全新的 char 数组，并删除了该项目。您必须为每个删除单步执行整个字符串，这是非常低效的。

**在 Java 中使用 StringBuilder 按索引从字符数组中删除一个字符：**

```
String mystring = "inflation != stealing";
char[] my_char_array = mystring.toCharArray();
StringBuilder sb = new StringBuilder();
sb.append(mystring);
sb.deleteCharAt(10);
my_char_array = sb.toString().toCharArray();
System.out.println(my_char_array);             //prints "inflation = stealing" 
```

上面的代码从字符数组中删除了感叹号。如果要删除一系列字符，请使用`sb.delete(10, 15);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T03:51:19.540

你可以`Arrays.copyOfRange`这样使用：

```
array1 = Arrays.copyOfRange(array1, 2, 5); 
```

更多[信息](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOfRange%28char%5b%5d,int,int%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T03:46:12.103

您可以使用此方法：

```
public static char[] copyArray(char[] original, int start, int length)
{
    char[] result = new char[length];
    for (int i = 0; i < length; i++)
    {
        result[i] = original[start + i];
    }
    return result;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T04:41:53.570

是的，您可以为您使用 Arrays.copyOfRange(char[], starting index, ending index) 方法。

你也可以查看这个——

[http://www.codingdiary.com/developers/developers/diary/javaapi/java/util/SampleCode/CopyofRange8ArrayExampleCode.html](http://www.codingdiary.com/developers/developers/diary/javaapi/java/util/SampleCode/CopyofRange8ArrayExampleCode.html)

# objective-c - Linux 上的 Objective-C 编译错误

> ID：11425120
> 
> 赞同：9
> 
> 时间：2012-07-11T03:29:21.617
> 
> 标签：objective-c, linux, ubuntu, gnustep

似乎有很多关于如何做到这一点的教程，每个都略有不同。我希望有人能识别我收到的错误消息并指出我正确的方向。

我的代码，嗯是：

```
#import <Foundation/Foundation.h>
int main (int argc, const char * argv[])
{
 NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
 NSLog (@"hello world");
 [pool drain];
 return 0;
} 
```

在我编译之前，我在控制台中输入：

```
. /usr/share/GNUstep/Makefiles/GNUstep.sh 
```

我尝试编译：

```
gcc `gnustep-config --objc-flags` -lgnustep-base h.m -o hello 
```

并得到：

```
/tmp/ccgLOnpY.o：在函数“main”中：
/home/ge/objective-c/hm:4：未定义对“objc_get_class”的引用
/home/ge/objective-c/hm:4：未定义对“objc_msg_lookup”的引用
/home/ge/objective-c/hm:4：未定义对“objc_msg_lookup”的引用
/home/ge/objective-c/hm:5：对“NSLog”的未定义引用
/home/ge/objective-c/hm:6：未定义对“objc_msg_lookup”的引用
/tmp/ccgLOnpY.o：在函数“__objc_gnu_init”中：
/home/ge/objective-c/hm:8: 未定义对 `__objc_exec_class' 的引用
/tmp/ccgLOnpY.o:(.data.rel+0x0): 对 `__objc_class_name_NSConstantString' 的未定义引用
/tmp/ccgLOnpY.o:(.data.rel+0x8): 对 `__objc_class_name_NSAutoreleasePool' 的未定义引用
collect2: ld 返回 1 个退出状态

```

有人可以指出我正确的方向吗？

TIA

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-11T04:20:15.303

链接错误的原因很可能是由于链接器在链接库之前仅在看到编译中的符号之后才链接库的行为。正如库未链接`h.m`后出现`-lgnustep-base`的那样，因为尚未遇到库中的符号。即使使用`-Wl,--no-as-needed`链接器选项 未遇到符号，您也可以指示链接器链接库

```
gcc `gnustep-config --objc-flags` -Wl,--no-as-needed -lgnustep-base  h.m -o hello 
```

或者更好的是，只需将源代码移动到编译命令的开头即可

```
gcc h.m  `gnustep-config --objc-flags` -lgnustep-base -o hello 
```

观察到的链接器行为是阻止查找和链接库的符号，这些符号可能不需要，但无论如何都在编译中链接，因此建议使用第二种方法而不是添加`-Wl, --no-as-needed`链接器选项。
希望这可以帮助！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-11T03:42:04.493

您需要链接到 libobjc。修复非常简单；只需编译：

```
gcc h.m `gnustep-config --objc-flags` -lobjc -lgnustep-base -o hello 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-23T05:14:10.270

您还需要指定链接标志：

```
gcc h.m `gnustep-config --objc-flags` `gnustep-config --objc-libs` \
-lobjc -lgnustep-base -o hello 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-03T09:15:13.687

这个方法看起来不错：

```
gcc h.m  `gnustep-config --objc-flags` -lgnustep-base -o hello 
```

# ruby - Ruby 中的只读数组

> ID：11425121
> 
> 赞同：4
> 
> 时间：2012-07-11T03:29:22.400
> 
> 标签：ruby

当我需要从 C# 或 Java 中的类返回不可变集合时，我将其作为 IEnumerable 接口返回。Ruby 中的标准方法是什么？克隆？冻结？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T03:43:04.587

如果您想在`RuntimeError`尝试修改时提出问题，请使用`freeze()`. 如果你只想阻止调用者修改*你的*数据，那么`clone()`是一个不错的选择。

请记住，[freeze() 可能不会像您期望的那样工作](http://m.onkey.org/ruby-i-don-t-like-3-object-freeze)。

就个人而言，我从来不需要`freeze()`，但`clone()`通常很有用。

# javascript - Shopify API：将商品添加到购物车而不重定向

> ID：11425123
> 
> 赞同：3
> 
> 时间：2012-07-11T03:30:07.733
> 
> 标签：javascript, html, ajax, shopping-cart, shopify

有没有什么方法可以在没有任何页面重定向的情况下提交添加到购物车的 POST 请求？将 return_to 更改为“back”会重新加载页面，我不想这样做。我想将商品添加到购物车并使用 jQuery 通知来提醒客户端，而不需要任何类型的重定向/重新加载。通知部分工作正常，我只是不知道如何覆盖重定向。对不起，如果我说的一些事情没有意义，我对这些东西很陌生。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T11:03:38.213

您可以使用 AJAX API。详细信息在这里：[http](http://wiki.shopify.com/Ajax_API) ://wiki.shopify.com/Ajax_API查看`Shopify.addItem`jQuery 包装器演示页面中的函数：http: [//mayert-douglas4935.myshopify.com/pages/api](http://mayert-douglas4935.myshopify.com/pages/api)

# xcode - 我应该如何使用 httpmethod PUT 在 Xcode 中将 json 发送到服务器？

> ID：11425127
> 
> 赞同：0
> 
> 时间：2012-07-11T03:30:34.157
> 
> 标签：xcode, http, methods, put

我是 XCode4.3 的新手。

如标题所述，我应该如何使用 http 方法 PUT 将 json 数据发送到我的服务器？

我的json如下：

```
{"password":"11111111","nickname":"yo", "email_address":"abc@abc.com"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:54:38.643

您将需要[NSURLRequest](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html)和[NSURLConnection](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)对象。然后，您的视图控制器可以实现[NSURLConnectionDelegate](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate)协议，并处理来自服务器的响应。这些链接应该让您朝着正确的方向前进。

基本模式是这样的：

1.  使用您的主体和方法等初始化请求
2.  与它建立联系并将自己设置为代表
3.  处理连接回调，建立响应字节的 NSData
4.  处理连接的最终回调`connectionDidFinishLoading:`，以根据响应对您的 UI 进行实际操作。

# sql-server-2008 - 加入空值不返回值

> ID：11425129
> 
> 赞同：1
> 
> 时间：2012-07-11T03:30:43.387
> 
> 标签：sql-server-2008

我创建了一个视图，它从多个表中获取所有数据，我需要对其进行关键字搜索。下面是我的 SP，我在其中加入了我的视图和关键字功能，它对描述、名称、项目、产品进行搜索。我的这里的问题是，如果项目具有空值或产品具有空值，它不会返回行。即使项目或产品为空，我也需要显示结果。我尝试使用左外连接，它显示所有与我无关的行搜索关键字。我尝试了不同的方法，例如使用 where 子句 items 为 null 和 products 为 null，没有运气。我需要一些专家建议来处理这个问题。

```
 ALTER PROCEDURE [dbo].[keywordsearch]
   (
     @username varchar(256),
     @keyword varchar(250)

    )

   AS

   BEGIN

    select * from allrecordsview k join dbo.Split(@Keyword, ',')T on  
    k.description+k.Name+k.items +k.products like '%' + T.items + '%'  
    where k.username = @username 

   END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:38:05.143

试试这个：

```
SELECT * 
FROM   allrecordsview k 
       JOIN dbo.Split(@Keyword, ',') T 
         ON ( COALESCE(k.description, '') 
              + COALESCE(k.name, '') + COALESCE(k.items, '') 
              + COALESCE(k.products, '') ) LIKE '%' + T.items + '%' 
WHERE  k.username = @username 
```

# objective-c - 循环遍历带有部分的 UITableView

> ID：11425132
> 
> 赞同：1
> 
> 时间：2012-07-11T03:31:12.643
> 
> 标签：objective-c, ios, xcode, pointers, integer

我正在尝试在 Apple 开发人员网站上合并两个示例代码，名为 *2_SimpleSectionedTableView* 和*TableSearch*。
本质上，我希望能够使用 a`UISearchBar`来过滤带有部分的时区表。下面的代码使我的应用程序崩溃说

> 不兼容的整数到指针的转换。

这是什么意思，我该如何解决？

```
- (void)filterContentForSearchText:(NSString*)searchText
{
/*
 Update the filtered array based on the search text and scope.
 */

[self.filteredListContent removeAllObjects]; // First clear the filtered array.

/*
 Search the main list for products whose type matches the scope (if selected) and whose name matches searchText; add items that match to the filtered array.
 */

for (NSInteger i=0; i<[self.regions count]; i++)
{
    Region *region = [self.regions objectAtIndex:i];
    for (NSInteger j=0; j<[region.timeZoneWrappers count]; j++) {
        {
            NSComparisonResult result = [[self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathWithIndexes:i length:j] ].textLabel.text compare:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch) range:NSMakeRange(0, [searchText length])];
            if (result == NSOrderedSame)
            {
                [self.filteredListContent addObject:[self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathWithIndexes:i length:j]]];
            }
        }
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:31:34.833

崩溃发生在这里：

```
[NSIndexPath indexPathWithIndexes:i length:j] 
```

此方法需要一个指针（不是整数！）作为第一个参数：

```
+ (id)indexPathWithIndexes:(NSUInteger *)indexes length:(NSUInteger)length; 
```

您应该改用表格视图特定的方法：

```
+ (NSIndexPath *)indexPathForRow:(NSInteger)row inSection:(NSInteger)section; 
```

# android - Android 应用程序 - 应用程序工作但非常缓慢

> ID：11425133
> 
> 赞同：3
> 
> 时间：2012-07-11T03:31:16.623
> 
> 标签：android, performance, progress-bar

这是我的第一个正式和完成的应用程序......或者我想......这是我的一些问题（我也会发布代码）：

1.  加载应用程序时，用户界面需要大约 3 - 6 秒才能出现......它只显示标题

2.  我有一个进度条视图，我在加载下一张图片时使其可见......永远不会变得可见。

3.  当您单击下一个或上一个按钮时，该按钮将保持按下状态，直到它加载

这些问题让我发疯......谁能指出我正确的方向

主要的.XML

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    android:id="@+id/widget210"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads">
    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="0dp" 
        android:layout_weight="1">
        <ImageView
            android:id="@+id/ImageView01"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
        <ProgressBar
            android:indeterminate="true"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/progressBar1"
            style="?android:attr/progressBarStyleLarge" />
        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:text="Medium Text "
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:ellipsize="end"
            android:maxLines="2"
            android:textColor="#88ffffff"
            android:background="#88000000" android:gravity="center"/>
    </RelativeLayout>
    <TableLayout
        android:id="@+id/widget214"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">
        <TableRow
            android:id="@+id/widget215"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal">
            <Button
                android:id="@+id/Previous"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight=".5"
                android:text="Previous" 
                android:onClick="GetPrevPic"/>
            <Button
                android:id="@+id/Next"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight=".5"
                android:text="Next" 
                android:onClick="GetNextPic"/>
        </TableRow>
    </TableLayout>
    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="xxxxxxxxxxxxxxx"
        ads:loadAdOnCreate="true"/>
</LinearLayout> 
```

爪哇

```
package com.ndai.funnys;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.URL;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.pm.PackageInfo;
import android.content.pm.PackageManager.NameNotFoundException;
import android.graphics.drawable.Drawable;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.util.Log;
import android.view.*;
import android.widget.*;
import com.google.ads.*;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.w3c.dom.*;

public class GuysFunnysActivity extends Activity 
{
    String xml;
    Document doc;
    NodeList nodes;
    int iIndex = 0;
    int iTotal = 0;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        GetXMLStuff();
        GetPic();
        CheckForUpdates();
        CheckForReferral();
    }
    public void GetXMLStuff()
    {
        xml = XMLfunctions.getXML();
        doc = XMLfunctions.XMLfromString(xml);
        nodes = doc.getElementsByTagName("item");
        iTotal = nodes.getLength();
    }
    public void CheckForReferral()
    {
        SharedPreferences settings = getSharedPreferences("GuysFunnys", 0);
        SharedPreferences.Editor editor = settings.edit();
        long loads = settings.getLong("Loads", 0);
        if (loads % 50 == 0)
        {
            AlertDialog.Builder builder = new AlertDialog.Builder(this);
            builder.setMessage("Thank you for using Guy's Funnys. Our app is only know to those who use it (it isn't in the Play Store). Please send a link for it to your friends. Send link now?")
                .setCancelable(false)
                .setPositiveButton("Yes", new DialogInterface.OnClickListener() 
                {
                    public void onClick(DialogInterface dialog, int id) 
                    {
                        Intent ii=new Intent(android.content.Intent.ACTION_SEND);
                        ii.setType("text/plain");
                        ii.putExtra(Intent.EXTRA_SUBJECT, "Share Guy's Funnys App");
                        ii.putExtra(Intent.EXTRA_TEXT, "I wanted to share this cool app with you - Guy's Funnys - https://sites.google.com/site/guysfunnysapp/Guys%20Funnys.apk");
                        startActivity(Intent.createChooser(ii, "Share Guy's Funnys App"));
                    }
                })
                .setNegativeButton("No", new DialogInterface.OnClickListener() 
                {
                    public void onClick(DialogInterface dialog, int id) 
                    {
                        dialog.cancel();
                    }
                });
            AlertDialog alert = builder.create();
            alert.show();
        }
        editor.putLong("Loads",(loads + 1));
        editor.commit();
    }
    public void CheckForUpdates()
    {
        PackageInfo pInfo;
        try 
        {
            pInfo = getPackageManager().getPackageInfo(getPackageName(), 0);
            int s = pInfo.versionCode;
            DefaultHttpClient httpClient = new DefaultHttpClient();
            HttpPost httpPost = new HttpPost("https://sites.google.com/site/guysfunnysapp/appversion.txt");
            HttpResponse httpResponse = httpClient.execute(httpPost);
            HttpEntity httpEntity = httpResponse.getEntity();
            String line = EntityUtils.toString(httpEntity);
            if (Long.valueOf(line) > s)
            {
                AlertDialog.Builder builder = new AlertDialog.Builder(this);
                builder.setMessage("A new verison of Guy's Funnys is ready to download. The older verisons will not work. Download Now?")
                    .setCancelable(false)
                    .setPositiveButton("Yes", new DialogInterface.OnClickListener() 
                    {
                        public void onClick(DialogInterface dialog, int id) 
                        {
                            Update("https://sites.google.com/site/guysfunnysapp/Guys%20Funnys.apk");
                        }
                    })
                    .setNegativeButton("No", new DialogInterface.OnClickListener() 
                    {
                        public void onClick(DialogInterface dialog, int id) 
                        {
                            finish();
                        }
                    });
                AlertDialog alert = builder.create();
                alert.show();
            }
        } 
        catch (NameNotFoundException e) 
        {
            e.printStackTrace();
        } 
        catch (ClientProtocolException e) 
        {
            e.printStackTrace();
        } 
        catch (IOException e) 
        {
            e.printStackTrace();
        }
    }
    public void Update(String apkurl)
    {
        try 
        {
            URL url = new URL(apkurl);
            HttpURLConnection c = (HttpURLConnection) url.openConnection();
            c.setRequestMethod("GET");
            c.setDoOutput(true);
            c.connect();
            String PATH = Environment.getExternalStorageDirectory() + "/download/";
            File file = new File(PATH);
            file.mkdirs();
            File outputFile = new File(file, "app.apk");
            FileOutputStream fos = new FileOutputStream(outputFile);
            InputStream is = c.getInputStream();
            byte[] buffer = new byte[1024];
            int len1 = 0;
            while ((len1 = is.read(buffer)) != -1) 
            {
                fos.write(buffer, 0, len1);
            }
            fos.close();
            is.close();
            Intent intent = new Intent(Intent.ACTION_VIEW);
            intent.setDataAndType(Uri.fromFile(new File(Environment.getExternalStorageDirectory() + "/download/" + "app.apk")), "application/vnd.android.package-archive");
            startActivity(intent);  
        } 
        catch (IOException e) 
        {
            Toast.makeText(getApplicationContext(), "Update error!", Toast.LENGTH_LONG).show();
        }
    }  
    @Override
    public boolean onCreateOptionsMenu(Menu menu)
    {
        menu.add(1, 1, 0, "View Page").setIcon(R.drawable.pageico);
        menu.add(1, 2, 1, "Share Pic").setIcon(R.drawable.shareico);
        menu.add(1, 3, 2, "Share App").setIcon(R.drawable.shareico);
        menu.add(1, 4, 2, "Exit").setIcon(R.drawable.exitico);
        return true;
    }
    @Override
    public boolean onOptionsItemSelected(MenuItem item)
    {
        Element e = (Element)nodes.item(iIndex);
        switch(item.getItemId())
        {
            case 1:
                Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(XMLfunctions.getValue(e, "link")));
                startActivity(browserIntent);
                return true;
            case 2:
                Intent i=new Intent(android.content.Intent.ACTION_SEND);
                i.setType("text/plain");
                i.putExtra(Intent.EXTRA_SUBJECT, "Guy's Funnys");
                i.putExtra(Intent.EXTRA_TEXT, XMLfunctions.getValue(e, "guid"));
                startActivity(Intent.createChooser(i, "Guy's Funnys"));
                return true;
            case 3:
                Intent ii=new Intent(android.content.Intent.ACTION_SEND);
                ii.setType("text/plain");
                ii.putExtra(Intent.EXTRA_SUBJECT, "Share Guy's Funnys App");
                ii.putExtra(Intent.EXTRA_TEXT, "I wanted to share this cool app with you - Guy's Funnys - https://sites.google.com/site/guysfunnysapp/Guys%20Funnys.apk");
                startActivity(Intent.createChooser(ii, "Share Guy's Funnys App"));
                return true;
            case 4:
                finish();
                return true;
        }
        return super.onOptionsItemSelected(item);
    }
    public void GetNextPic(View view)
    {
        iIndex++;
        if (iIndex == iTotal)
        {
            iIndex--;
            Toast.makeText(this, "At last photo", Toast.LENGTH_LONG).show(); 
        }
        else
        {
            GetPic();
            AdView adView = (AdView)this.findViewById(R.id.adView);
            adView.loadAd(new AdRequest());
        }
    }
    public void GetPrevPic(View view)
    {
        iIndex--;
        if (iIndex == -1)
        {
            iIndex++;
            Toast.makeText(this, "At first photo", Toast.LENGTH_LONG).show(); 
        }
        else
        {
            GetPic();
            AdView adView = (AdView)this.findViewById(R.id.adView);
            adView.loadAd(new AdRequest());
        }
    }
    public void ShowDebug(View v)
    {
    }   
    public void GetPic()
    {
        ProgressBar progressBar = (ProgressBar) this.findViewById(R.id.progressBar1);
        progressBar.setVisibility(View.VISIBLE);
        ImageView imgView =(ImageView)findViewById(R.id.ImageView01);
        TextView txtView =(TextView)findViewById(R.id.textView1);
        if (iTotal==0)
        {
            txtView.setText("Network Error");
            Toast.makeText(this, "Error connecting to server. Try again later", Toast.LENGTH_LONG).show();
        }
        else
        {
            Element e = (Element)nodes.item(iIndex);
            txtView.setText(XMLfunctions.getValue(e, "title"));
            Drawable drawable = LoadImageFromWebOperations(XMLfunctions.getValue(e, "guid"));
            imgView.setImageDrawable(drawable);
        }
        progressBar.setVisibility(View.INVISIBLE);
    }
    private Drawable LoadImageFromWebOperations(String url)
    {
        try
        {
            InputStream is = (InputStream) new URL(url).getContent();
            Drawable d = Drawable.createFromStream(is, "src name");
            return d;
        }
        catch (Exception e) 
        {
            System.out.println("Exc="+e);
            return null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T03:37:17.103

看起来您正在主 UI 线程上进行网络连接，例如：checkForUpdates()。建立网络连接应该在后台线程的帮助下完成。AsyncTask 将使您更轻松。现在，事实上，您正在捆绑您的 UI 线程，这会在您的 UI 中产生“滞后”问题。

[http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# c++ - 使用 g++ 时出错：未在此范围内声明“malloc”

> ID：11425136
> 
> 赞同：1
> 
> 时间：2012-07-11T03:31:41.837
> 
> 标签：c++, namespaces, g++, malloc

我正在练习 g++ 来编译我的代码，但错误“malloc 未在此范围内声明”一开始就不断出现。我与此错误相关的代码片段如下所示：

```
/*------Basic.h--------*/
using namespace std;

/*------A.h------------*/
class A{
 private:
  double* _data;
 public:
 A(int N);
}

/*------A.cpp----------*/
A::A(int N){
  _data=(double*)malloc(N*sizeof(double));
} 
```

当我使用 Microsoft Virtual Stdio 时，这个问题从未出现过。因此，我尝试添加一行

```
#include <stdlib.h> 
```

到 Basic.h，错误消失。现在我想知道为什么会发生这种事情。“命名空间std”不是已经包含stdlib.h了吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T03:38:35.750

命名空间和包含文件是两个完全不同的东西。你需要

```
#include <stdlib.h> 
```

或者，等效地，

```
#include <cstdlib> 
```

为了访问该头文件中的声明。

您的*使用声明*

```
using namespace std; 
```

另一方面，意味着您可以使用属于 namespace 一部分的标识符`std`，即在内部声明的标识符

```
namespace std {
  /*...*/
} 
```

**`std::`无需每次都**预先设置。****

 ****例如，**如果您`include <string>`，您可以使用数据类型`std::string`，但如果您*还*添加`using namespace std;`，您可以将该数据类型简单地用作`string`。

但是请注意，它`malloc`没有在任何命名空间内定义，因此为了使用它，您只需要包含`stdlib.h`.

**注意**和之间的区别`stdlib.h`，`cstdlib`请参见[此处](https://stackoverflow.com/questions/301586/what-is-the-difference-between-using-includefilename-and-includefilename-h)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T03:35:08.450

`malloc()`已定义，`<cstdlib>`因此您必须将其包含在文件的顶部。

`using namespace std;`只是告诉编译器您正在使用该特定名称空间，并且与包含任何库方法无关。

无论如何，在使用 C++ 时，您确实应该使用`new`而不是动态分配。`malloc`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T03:36:47.450

`using namespace std;`告诉编译器，*我正在“使用”`std`命名空间，所以**假装我在`std`命名空间中进行查找**，不要让我`std::`每次*都说。

问题是，命名空间中什么*都没有*`std`（还）！

您需要`#include`在标题中`malloc`进行声明。

即便如此，它也是全球性的——不在`std`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T03:40:15.670

使用“新”进行内存分配。'using namespace std' 与 stdlib.h 无关如果您仍想使用 malloc() 将其添加到顶部

```
#include<cstdlib> 
```

祝你好运！**

# ruby-on-rails-3 - 将backbone.js 与rails 集成

> ID：11425145
> 
> 赞同：0
> 
> 时间：2012-07-11T03:33:01.400
> 
> 标签：ruby-on-rails-3, backbone.js, twitter-bootstrap-rails

我已经阅读了几篇关于在 Rails 上使用主干的教程，但我仍然不知道如何将主干与我在 Rails 中开发的应用程序集成。

问题是我有一个事件页面（事件是一个 rails 模型和一个关联的控制器），它有一个标签栏，每个类别都有一个标签（事件有嵌套的类别）。我想在我的应用程序的这个特定页面中使用主干，因为在每个选项卡内部我都会有许多 javascript 代码。每个选项卡将代表事件的一个类别。

知道如何为此使用骨干吗？

我还想使用 twitter bootstrap 来获取我的观点，如果我使用骨干网也可以这样做吗？

希望我说清楚了。谢谢，

马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:57:16.727

Twitter bootstrap 与 Backbone 兼容

[http://coenraets.org/blog/2012/02/sample-app-with-backbone-js-and-twitter-bootstrap/](http://coenraets.org/blog/2012/02/sample-app-with-backbone-js-and-twitter-bootstrap/)

如果他这样做，这不是一个坏主意

骨干页面的标准想法是，rails 将为对象提供 json（对于单个请求内联或作为 api 样式的第二个请求）。
获取集合（许多模型）的关键是获取命令 [http://backbonejs.org/#Collection-fetch](http://backbonejs.org/#Collection-fetch) 所以选项卡将是一个集合开始

这是否为您指明了正确的方向？

# c# - 如何在 XAML 中公开控件以便在其他类中看到

> ID：11425153
> 
> 赞同：35
> 
> 时间：2012-07-11T03:34:07.010
> 
> 标签：c#, wpf, xaml, checkbox, kinect

我在 wpf 应用程序中工作我在 XAML 中创建了一个复选框，然后我的代码调用了一个类中的一个函数，并且在这个函数中有一个 if 条件，它检查复选框是否被选中但复选框没有看到在这个类中，那么如何做到这一点？

非常感谢

编辑：

以下是我所做的步骤： 我在 KinectSkeleton 的同一个项目下创建了 ViewModel 类，如图所示： ViewModel 类：

```
public class ViewModel
{
    public bool IsChecked { get; set; }
    public bool is_clicked { get; set; }
} 
```

在 KinectSkeleton 中，我定义了一个属性，如下所示：

```
public static readonly DependencyProperty ViewModelProperty =
           DependencyProperty.Register("ViewModelH", typeof(ViewModel), typeof(KinectSkeleton), new FrameworkPropertyMetadata(null, FrameworkPropertyMetadataOptions.AffectsRender));

public ViewModel ViewModelH
{
    get => (ViewModel)GetValue(ViewModelProperty);
    set => SetValue(ViewModelProperty, value);
} 
```

KinectWindow.xaml 中的复选框和按钮的代码是：

```
<Button Content="Calibrate" Height="24" x:Name="Calibrate" x:FieldModifier="public" Width="90" Click="Calibrate_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" HorizontalAlignment="Left" DockPanel.Dock="Left" Panel.ZIndex="0" Padding="0" VerticalAlignment="Center" />
<CheckBox IsChecked="{Binding Mode=TwoWay, Path=IsChecked}" Content="AngleDifference" Height="22" x:Name="AngleDifference" x:FieldModifier="public" Width="117" Checked="AngleDifference_Checked" Unchecked="AngleDifference_Unchecked" HorizontalAlignment="Left" VerticalAlignment="Center" Panel.ZIndex="1" HorizontalContentAlignment="Left" /> 
```

在我想检查我写的复选框的值的 KinectSkeleton 中：

```
 if (this.ViewModelH.IsChecked == false)
    // if(f.is_chekced == false)
    {
        // do something
    } 
```

现在我想知道在复选框的 is_checked 事件和按钮的 is_clicked 中写什么？另外，我的上述步骤中是否缺少任何内容，因为我觉得到目前为止 Kinect 骨架属性未绑定到复选框 is_checked 值？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-11T04:45:29.430

使用以下 XML，您可以将控件定义为类上的公共字段，以便能够从其他类访问它：

```
<CheckBox x:Name="myCheckBox" x:FieldModifier="public" /> 
```

现在您可以直接在代码中访问该字段：

```
if (win.myCheckBox.IsChecked.Value)
{
    // ...
} 
```

不过，我同意 HB 的观点，即使用 MVVM 模式是一种更好的方法。您的代码的其他部分不应该知道您的 UI 或直接访问它。

编辑：

使用 MVVM 方法，您应该首先定义您的视图模型类：

```
public class ViewModel
{
    public bool IsChecked { get; set; }
} 
```

然后将此类的实例设置为`DataContext`：

*   在代码中，例如窗口构造函数：

> ```
> public MyWindow()
> {
>     InitializeComponent();
>     DataContext = new ViewModel();
> } 
> ```

*   或在 XAML 中，例如 App.xaml：

> ```
> <Application x:Class="WpfApplication2.App"
>              xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
>              xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
>              xmlns:vm="clr-namespace:WpfApplication2"
>              StartupUri="MainWindow.xaml">
>     <Application.Resources>
>         <vm:ViewModel x:Key="ViewModel" />
>     </Application.Resources>
> </Application> 
> ```

现在您可以将 CheckBox 绑定到 ViewModel 中的属性：

```
<CheckBox IsChecked="{Binding IsChecked, Mode=TwoWay}" /> 
```

剩下的就是将`ViewModel`实例传递给您的`OnRender`函数。它存储在`DataContext`窗口的属性中。

编辑2：

顺便说一句：你真的应该在接受答案之前问这个问题。

我不确定您要对该`is_clicked`属性进行什么尝试。要在单击按钮时设置此标志，您需要`Command`：

```
public class CalibrateCommand : ICommand
{
    private ViewModel viewModel;

    public CalibrateCommand(ViewModel viewModel)
    {
        this.viewModel = viewModel;
    }

    public void Execute(object parameter)
    {
        viewModel.IsClicked = true;
    }

    public bool CanExecute()
    {
        return true;
    }
} 
```

您将此命令的一个实例添加到您的视图模型中：

```
public class ViewModel
{
    public bool IsChecked { get; set; }
    public bool IsClicked { get; set; }
    public ICommand CalibrateCommand { get; set; }

    public ViewModel()
    {
        CalibrateCommand = new CalibrateCommand(this);
    }
} 
```

您将它绑定到按钮，如下所示：

```
<Button Content="Calibrate" Height="24" x:Name="Calibrate" x:FieldModifier="public" Width="90" Click="Calibrate_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" HorizontalAlignment="Left" DockPanel.Dock="Left" Panel.ZIndex="0" Padding="0" VerticalAlignment="Center" Command="{Binding CalibrateCommand}" /> 
```

您不需要处理`CheckBox`和 的任何事件`Button`，一切都由绑定处理。

如果你添加了一个依赖属性，`KinectSkeleton`你应该将它绑定到视图模型：

```
<kt:KinectSkeleton ViewModelH="{Binding}" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-11T03:39:38.867

不要使复选框对外部可见，只需将复选框的当前状态传递给函数或类。还可以考虑将复选框值[绑定](http://msdn.microsoft.com/en-us/library/ms752347.aspx)[`DataContext`](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.datacontext.aspx)到 中的类，在 WPF 中大部分时间可以避免直接访问控件，另请参见[MVVM 模式](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)。

# jquery - 带有加载事件的 jquery .on() 方法

> ID：11425158
> 
> 赞同：29
> 
> 时间：2012-07-11T03:34:40.993
> 
> 标签：jquery, events

我们如何使用 jQuery 。`on()`事件方法`load`？例如代码是：

```
<a href="#" id="add">Add</a>
<div id="initial">
     <input type="text" class="abc" name="in">
</div> 
```

和它的jQuery：

```
jQuery(document).ready(function() {
    var x=$('#initial').html();
    $('#add').click(function(){
        $('body').append(x);
    });
    $(document).on('load','.abc',function(){
        alert('started');
    });
}); 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-11T03:38:40.743

参考[http://api.jquery.com/on/](http://api.jquery.com/on/)

它说

> 在所有浏览器中，加载、滚动和错误事件（例如，在`<img>` 元素上）不会冒泡。在 Internet Explorer 8 及更低版本中，粘贴和重置事件不会冒泡。此类事件不支持与委托一起使用，但可以在事件处理程序直接附加到生成事件的元素时使用。

如果您想在添加新输入框时执行某些操作，则只需在添加后编写代码即可。

```
$('#add').click(function(){
        $('body').append(x);
        // Your code can be here
    }); 
```

如果您希望在加载文档中的第一个输入框时执行相同的代码，那么您可以编写一个函数并在两个地方调用它，即`$('#add').click`文档的就绪事件

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-11T03:38:41.563

我不确定你在这里要做什么——到`jQuery(document).ready()`执行的时候，它已经加载了，因此`document`已经调用了 load 事件。此时附加`load`事件处理程序将不起作用，并且永远不会被调用。如果您在`alert`文档加载后尝试“开始”，只需将其放在`(document).ready()`调用中，如下所示：

```
jQuery(document).ready(function() {
    var x = $('#initial').html();
    $('#add').click(function() {
        $('body').append(x);
    });

    alert('started');

});​ 
```

如果，因为您的代码似乎也暗示，您想在`.abc`加载时触发警报，请将其放在单独的`.load`处理程序中：

```
jQuery(document).ready(function() {
    var x = $('#initial').html();
    $('#add').click(function() {
        $('body').append(x);
    });

    $(".abc").on("load", function() {
        alert('started');
    })
});​ 
```

最后，我认为`jQuery`在一个地方和`$`另一个地方使用没有什么意义。通常最好保持代码一致，并且可以在任何`jQuery`地方或`$`任何地方使用，因为两者通常可以互换。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-12-16T11:40:36.263

运行函数 onLoad

```
jQuery(window).on("load", function(){
    ..code..
}); 
```

运行代码 onDOMContentLoaded（也称为 onready）

```
jQuery(document).ready(function(){
    ..code..
}); 
```

或推荐的 onready 简写

```
jQuery(function($){
    ..code.. ($ is the jQuery object)
}); 
```

加载文档时触发 onready

onload 在文档和所有相关内容（例如页面上的图像）已加载时触发。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-15T06:20:10.367

正如其他人所提到的，加载事件不会冒泡。相反，您可以使用自定义事件手动触发类似加载的事件：

```
$('#item').on('namespace/onload', handleOnload).trigger('namespace/onload') 
```

如果您的元素已经在监听`change`事件：

```
$('#item').on('change', handleChange).trigger('change') 
```

我觉得这很好用。不过，我坚持自定义事件更明确并避免副作用。

# xml - 从 xml 文件创建状态图

> ID：11425159
> 
> 赞同：0
> 
> 时间：2012-07-11T03:34:41.823
> 
> 标签：xml, drawing, state-diagram

我正在寻找一个免费工具，能够从我的简单 xml 中创建带有节点和边的状态图。有什么有效的工具。

我只知道这个[http://www.cytoscape.org/](http://www.cytoscape.org/)

而是看看是否有人对任何其他工具有任何流畅的体验？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T08:13:00.380

GraphViz 可以很好地做到这一点。有一种称为 DotML 的 XML 输入语言可以描述图形，然后 GraphViz 会将其呈现为 SVG。您应该会发现编写 XSLT 转换以从“简单 XML”生成 DotML 很容易。以这种方式绘制的图表示例可以在此处的（已取代）XSLT 2.1 草案规范中找到：

[http://www.w3.org/TR/2010/WD-xslt-21-20100511/#streamability-choice-and-repetition](http://www.w3.org/TR/2010/WD-xslt-21-20100511/#streamability-choice-and-repetition)

（一些浏览器在渲染 SVG 方面比其他浏览器做得更好）。GraphViz（和 DotML）为您提供了对图形绘制方式的大量控制，但它默认所有内容，因此您必须为其提供的最小值只是节点和边的列表。

# javascript - Can't passing parameter to the loop

> ID：11425162
> 
> 赞同：1
> 
> 时间：2012-07-11T03:35:53.990
> 
> 标签：javascript, loops, scope

I want to alert different word base on different actions, but it doesn't work.

this is my code:

```
<input id=main value="ddddd">
 <script type="text/javascript">
var obj = document.getElementById("main");
var items = [ "click", "keypress" ];
for ( var i = 0; i < items.length; i++ ) {
        obj[ "on" + items[i] ] = function() {
            alert( "Thanks for your " + items[i] );
        };
}
 </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T03:42:49.990

You need to create a closure. Something like that should work:

```
function makeClosure(eventName) {
    return function() {
        alert( "Thanks for your " + eventName );
    };
}

var obj = document.getElementById("main");
var items = [ "click", "keypress" ];
for ( var i = 0; i < items.length; i++ ) {
        obj[ "on" + items[i]] = makeClosure(items[i]);
}​ 
```

jsFiddle: [http://jsfiddle.net/NQKqk/](http://jsfiddle.net/NQKqk/)

# ruby - pik 错误：为 nil 调用私有方法“gsub”：NilClass

> ID：11425163
> 
> 赞同：4
> 
> 时间：2012-07-11T03:36:23.063
> 
> 标签：ruby, jruby, gsub, pik

将 JRuby 1.3.1 添加到 pik 时出现错误。错误：

```
Error: private method `gsub' called for nil:NilClass 
```

这是我的路径环境变量：

```
C:\Users\Owner>echo %path%
C:\Program Files\Java\jdk1.7.0_05\bin;c:\jruby-1.7.0.preview1\bin;C:\jruby-1.3.1\bin;c:\pik 
```

这是尝试添加 1.3.1 版本时：

```
C:\Users\Owner>pik add C:\jruby-1.3.1\bin

There was an error.
 Error: private method `gsub' called for nil:NilClass

  in: pik/commands/command.rb:124:in `get_version'
  in: pik/commands/add_command.rb:23:in `add'
  in: pik/commands/add_command.rb:13:in `execute'
  in: pik_runner:33 
```

添加 JRuby 1.7.0 版本时并非如此。

我之前已将 JRuby 1.3.1 添加到 pik，但我不知道这次可能导致此错误的原因。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T04:32:48.413

`pik run PATH`我使用以下结果运行命令：

```
C:\Users\Owner>pik run PATH
Cannot locate Java installation, specified by JAVA_HOME:
C:\Program Files\Java\jdk1.7.0_05\**bin** 
```

所以添加到环境变量 -> 用户变量

```
JAVA_HOME C:\Program Files\Java\jdk1.7.0_05 
```

现在 JRuby 131 已添加到我的 pik 中。

问候

# android - 请帮我解决Android相机问题

> ID：11425164
> 
> 赞同：0
> 
> 时间：2012-07-11T03:36:38.167
> 
> 标签：android, api, camera

亲爱的世界安卓开发者。

请帮我解决android相机API问题。

我想通过android相机拍照并将其设置为ImageButton的图像。如果有媒体存储，请将图像保存到特殊路径。

问题如下。

它适用于一些 android 设备，如 ZTE 2.2、Samsung Galaxy 2.3.3 和三星平板电脑 4.0.3 等。

但它不适用于其他一些设备，例如 2.3.4 LG Droid。

我的意思是捕获的图像未设置为图像按钮。

（2.3.4 LG Droid 的详细设备信息为：Hw 版本：Rev .1.1，Sw 版本：ms910zbc，Build number 姜饼）

这是我的代码。

```
String mPhotoPath;
ImageButton mPhotoButton;

mPhotoButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        String storageState = Environment.getExternalStorageState();
        if (storageState.equals(Environment.MEDIA_MOUNTED)) {
            File photoFile = new File(mPhotoPath);
            try {
                if (!photoFile.exists()) {
                    photoFile.getParentFile().mkdirs();
                    photoFile.createNewFile(); 
                    photoFile.setWritable(true, false);
                } 
            } catch (IOException e) {

            }

            Uri fileUri = Uri.fromFile(photoFile);
            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri);
            startActivityForResult(intent, TAKE_PICTURE);
        }else {
            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            startActivityForResult(intent, TAKE_PICTURE);
        }
    }
});

protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode != RESULT_OK) {
        return;
    }
    switch (requestCode) {
        case TAKE_PICTURE: {
            if (data != null) { //ZTE 2.2 device
                try {
                    Bundle extras = data.getExtras();
                    if (extras != null)
                    {
                        fPhoto = extras.getParcelable("data");
                        mPhotoButton.setImageBitmap(fPhoto);
                    }                       
                } catch (Exception e) {
                    e.printStackTrace();
                }
            } 
            else //Samsung 2.3.3 device
            {
                try {
                     FileInputStream stream = new FileInputStream(new File(mPhotoPath));
                     fPhoto = BitmapFactory.decodeStream(stream);
                     stream.close();
                     mPhotoButton.setImageBitmap(fPhoto);
                }catch (Exception e) {
                     e.printStackTrace();
                }
            }
            break;
       }
    }
} 
```

我感谢您的所有帮助。

谢谢。

真挚地。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T03:46:56.707

```
public class Camera extends Activity 
  {
 private static final int CAMERA_REQUEST = 1888;
 private String selectedImagePath;
 ImageButton mPhotoButton;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    mPhotoButton=(Button)findElementById(R.id.imgbtn1);
    mPhotoButton.setOnClickListener(new OnClickListener()
   {
        @Override
        public void onClick(View v) 
        {
            Intent cameraIntent = new Intent(ACTION_IMAGE_CAPTURE);
            startActivityForResult(cameraIntent, CAMERA_REQUEST);
        }
   }
}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data)
{
    if (resultCode == RESULT_OK) {
        if (requestCode == CAMERA_REQUEST) 
        { 
            Bitmap photo = (Bitmap) data.getExtras().get("data"); 
            ByteArrayOutputStream bytes = new ByteArrayOutputStream();
            photo.compress(Bitmap.CompressFormat.JPEG, 40, bytes);
            Random randomGenerator = new Random();randomGenerator.nextInt();
            String newimagename=randomGenerator.toString()+".jpg";
            File f = new File(Environment.getExternalStorageDirectory()
                                    + File.separator + newimagename);
            try {
                f.createNewFile();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            //write the bytes in file

            try {
                fo = new FileOutputStream(f.getAbsoluteFile());
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            try {
                fo.write(bytes.toByteArray());
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
                uri=f.getAbsolutePath(); 
                mPhotoButton.setImageResource(uri);
    //this is the url that where you are saved the image
      }

  } 
```

试试上面的代码...

# jquery - 如何将事件绑定到页面加载后生成的 HTML？

> ID：11425170
> 
> 赞同：0
> 
> 时间：2012-07-11T03:37:11.897
> 
> 标签：jquery

我正在使用 jquery`.clone()`根据用户点击将 HTML 添加到我的页面。

我想将 onclick 处理程序添加到新创建的 HTML 中。我知道[`.on()`](http://api.jquery.com/on/)可以用来触发未来创建的 HTML 上的事件，但我相信必须在创建 HTML*之前*编写（并执行） 。

在这个[示例代码](http://jsfiddle.net/thunderrabbit/Zxq2E/)中，如果用户从选择列表中选择“related_id”，jquery 会创建一个用户可以输入 id 的字段。我想在这里添加一个 ajaxy 的东西，这样用户就可以输入相关项目的名称而不是它的 id。ajax 请求将取决于用户选择的字段。

一般来说，我知道如何使用 jquery 发出 ajax 请求，但是如何将特定于字段的 ajax 代码添加到我新创建的 HTML 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:02:53.477

您的 jsfiddle 中有很多代码，其中大部分与这个问题无关。无论如何，如果我对您的理解正确，那么您寻求澄清的内容无论如何都是相当高级的。

我要做的第一件事是确保您`class`在所有新元素中都包含一个共同点。`.on()`然后，您将使用如下方式绑定到 click 事件：

```
$("#parentElement").on('click','.newClass', function() {
    var me = $(this).text(); //gets the specific text from each .newClass element when clicked
    doAjaxRequest( me );
} 
```

Note`#parentElement`在创建此点击处理程序之前必须存在于 DOM 中。

您的`doAjaxRequest`功能将类似于以下内容：

```
function doAjaxRequest( elemText ) {
    $.ajax({
        ...
        data: elemText,
        ...
    });
} 
```

* * *

Note`.on()`自 jQuery 1.7 起可用于此。对于旧版本，请参阅以下[选项](http://api.jquery.com/live/)：

```
$(selector).live(events, data, handler);                // jQuery 1.3+
$(document).delegate(selector, events, data, handler);  // jQuery 1.4.3+
$(document).on(events, selector, data, handler);        // jQuery 1.7+ 
```

对于版本 1.4.4。代码如下：

```
$("#parentElement").delegate('.newClass', 'click', function() {
    var me = $(this).text(); //gets the specific text from each .newClass element when clicked
    doAjaxRequest( me );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T03:41:09.167

您可以将`<script type='text/javascript'> ... your jquery code here </script>`标签与 HTML 的其余部分一起插入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T03:43:08.440

为什么不在将处理程序`$clone`添加到文档之前将其绑定到？

```
$clone.on("change", function(){
  //Do my AJAX  
}); 
```

# sql - 将 XML 导入未导入的 SQL Server 2005 数据

> ID：11425175
> 
> 赞同：0
> 
> 时间：2012-07-11T03:37:27.077
> 
> 标签：sql, xml, sql-server-2005, import

我有一个名为 Code 的表，其中包含两个字段，ID 和 Code。

我有一个 XML 文件：

```
 <DataSet>
   <scan>
     <ID>4</ID>
     <Code>420</Code>
   </scan>
   <scan>
     <ID>5</ID>
     <Code>420</Code>
   </scan>
   <scan>
     <ID>6</ID>
     <Code>420</Code>
   </scan>
   <scan>
     <ID>4</ID>
     <Code>420</Code>
   </scan>
   <scan>
     <ID>5</ID>
     <Code>420</Code>
   </scan>
  </DataSet> 
```

我正在使用这个

```
 INSERT INTO code (id,code) 
 SELECT X.scan.query('id').value('.','INT'),
   X.scan.query('code').value('.','VARCHAR(30)')
 FROM ( 
 SELECT CAST(x AS XML)
 FROM OPENROWSET(
      BULK 'C:\dataimport.xml',
      SINGLE_BLOB) AS T(x)
       ) AS T(x)
 CROSS APPLY x.nodes('dataset/scan') AS X(scan); 
```

查询运行没有错误，但没有数据插入到代码表中。我看不到我错过了什么。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:26:00.780

SQL Server 中的 XML 区分大小写。

尝试这个：

```
INSERT INTO code (id,code)
SELECT X.scan.query('ID').value('.','INT'),
       X.scan.query('Code').value('.','VARCHAR(30)')
FROM ( 
SELECT CAST(x AS XML)
FROM OPENROWSET(
    BULK 'C:\dataimport.xml',
    SINGLE_BLOB) AS T(x)
      ) AS T(x)
CROSS APPLY x.nodes('DataSet/scan') AS X(scan); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T04:58:38.500

使用本机 SQL Server 2005 XML 支持——这样的东西应该可以工作：

```
DECLARE @input XML

SELECT @input = CAST(x AS XML)
FROM OPENROWSET(BULK 'C:\dataimport.xml', SINGLE_BLOB) AS T(x)

INSERT INTO Code(ID, Code)
   SELECT 
       Scan.value('(ID)[1]', 'int'),
       Scan.value('(Code)[1]', 'varchar(30)')
   FROM @input.nodes('/DataSet/scan') AS Tbl(Scan) 
```

# google-calendar-api - 发出 httprequest 以插入谷歌日历

> ID：11425179
> 
> 赞同：0
> 
> 时间：2012-07-11T03:37:39.103
> 
> 标签：google-calendar-api, tornado

我正在使用 Tornado 网络，我正在尝试使用 httpclient 发出 http 请求以将事件插入 Google 日历。但我总是收到 400 错误请求错误。你能帮我解决这个问题吗？谢谢！

```
 event = {
         'start': {
                  'date': '2012-07-11'
                  },
         'end':   {
                  'date': '2012-07-12'
                  },
            }
    body = urllib.urlencode(event)
    http_client = tornado.httpclient.AsyncHTTPClient()
        headers = {'Authorization':'Bearer '+access_token}
        req =   tornado.httpclient.HTTPRequest(url="https://www.googleapis.com/calendar/v3/calendars/primary/events?key="+self.settings["google_developer_key"],
                                         method="POST",
                                         body=body,
                                         headers=headers)
        http_client.fetch(req, callback=self.insert_event_response) 
```

这是我得到的错误：

```
 HTTPResponse(code=400,request_time=None,buffer=<io.BytesIO object at     0x1bb3470>,_body=None,time_info={},request=<tornado.httpclient.HTTPRequest object at 0x1ccc310>,effective_url='https://www.googleapis.com/calendar/v3/calendars/primary/events?key=AIzaSyAyy9M1HZ1nDMdBwGMPDLamhFkCB8iQEJ0',headers={'X-Xss-Protection': '1; mode=block', 'X-Content-Type-Options': 'nosniff', 'Transfer-Encoding': 'chunked', 'Expires': 'Wed, 11 Jul 2012 03:19:29 GMT', 'Server': 'GSE', 'Cache-Control': 'private, max-age=0', 'Date': 'Wed, 11 Jul 2012 03:19:29 GMT', 'X-Frame-Options': 'SAMEORIGIN', 'Content-Type': 'application/json; charset=UTF-8'},error=HTTPError('HTTP 400: Bad Request',)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:15:16.797

最后让它工作，标题需要：

```
 headers = {'Authorization':'Bearer '+access_token, 'X-JavaScript-User-Agent':  'Google       APIs Explorer', 'Content-Type':  'application/json'} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:11:59.570

你确定身体必须`urllib`编码而不是`json`编码吗？

# php - LAMP - 多站点平台性能改进

> ID：11425181
> 
> 赞同：1
> 
> 时间：2012-07-11T03:38:08.013
> 
> 标签：php, apache, .htaccess, lamp

我正在为一家目前拥有 80 多个网站的公司提供多个网站服务的平台。这些网站运行良好（目前），页面出现时间不到 2-3 秒。然而，这些网站每天都在增长，访问者越来越多，特别是 1 个网站每天接待数千名访问者。

我目前使用 LAMP 进行多站点结构设置，并使用 .htaccess 文件控制每个站点对物理文件的请求，然后根据主机和请求 uri 进行重写以计算出要显示的页面。

我以前没有遇到过这种情况，多站点设置全部由具有单独模板和单独文件库的单个代码库控制。我希望其他人可以建议我在为时已晚之前可以做些什么来提高性能。

据我所知，在 .htaccess 文件中指定了 80 多个网站对性能并没有什么好处，但我可能是错的。我假设如果我可以直接在 Apache vhost 文件中做一些对性能更好的事情？

注意：* 我只使用 .htaccess 文件在去重写脚本之前检测物理文件是否存在，以防止 PHP 处理所有文件请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T17:16:16.517

多年来，我一直在开发一种产品，该产品使用非常大的 .htaccess 文件作为穷人的前端控制器（不是我的设计）。那里有大约 700 条规则，性能并不是真正的问题。在这成为问题之前，您更有可能遇到 Internet 连接、CPU 或内存限制的带宽限制。

这一切都在单个服务器上运行吗？当单个硬件出现故障时，让 70 个网站瘫痪听起来很残酷。我会考虑的第一件事是设置第二台机器并将两者连接到某种共享文件系统（如 NAS），或者考虑使用 Amazon S3 等服务进行文件存储。将这些盒子放在负载均衡器后面，这样当一个失败时，您就不会有 70 个愤怒的客户。然后，当您达到 50% 的利用率时，添加第三台机器，这样故障就不会导致另一个机器翻倒。

如果管理过多，请考虑将您的解决方案移植到 PagodaBox 之类的东西上。它便宜，易于扩展，您不必担心处理上述冗余。

话虽如此，如果虚拟主机是一种选择，那么以这种方式组织它们可能更有意义。我只是怀疑它会对性能有很大帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T18:41:00.360

第一步将是远离您的 .htaccess 并将内容放入 apache 配置中。Apache 配置被解析一次并被记住，而 .htaccess 在每次页面加载时被读取。要么移动你的重写规则，要么制作一些虚拟主机——你走哪条路并不重要。就个人而言，如果您只是打开域，我更喜欢虚拟主机，为实际需要操纵 URL 的情况保存重写规则。

由于您有许多具有共享代码核心的站点，因此操作码缓存（APC、Xcache 等）将为性能创造奇迹。它使 PHP 不必在每次页面加载时读取和编译每个文件。这可以为您的性能带来惊人的效果，特别是如果您有大量“标准”包含，而这些并不是每个页面都需要的。

一旦超越了这一点，就该开始考虑缓存查询了。如果您有一个阅读量很大的网站，Memcached 可以创造奇迹，并且如果您最终访问多个服务器，它会很好地扩展（正如另一张海报提到的那样，无论如何这样做可能不是一个坏主意，只是为了保护硬件故障）。

# javascript - 如何使用 SessionState 获取剩余会话超时？

> ID：11425183
> 
> 赞同：1
> 
> 时间：2012-07-11T03:38:38.260
> 
> 标签：javascript, asp.net

是否可以在 ASP.net 中使用 sessionState 获取剩余会话超时

这是我的 webconfig 文件中的 sessionState 代码。

```
<sessionState 
  mode="SQLServer" 
  allowCustomSqlDatabase="true" 
  sqlConnectionString="my connection here" 
  timeout="100">
</sessionState> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-10T11:00:18.603

我知道这是一篇旧帖子，但没有正确答案，我需要这个答案。

我已经在某种程度上使用了 Ashwin 的答案并使它起作用！

您需要在开始会话和开始会话的位置创建 session["SessionStart"] 变量。从那里开始很简单，我返回秒作为值，所以我可以使用 javascript 将秒更改为 hh:mm:ss，我还包含了一个 string.format 将秒转换为 hh:mm:ss。

```
 // Get the session in minutes and seconds
            HttpSessionState session = HttpContext.Current.Session;//Return current session
            DateTime? sessionStart = session["SessionStart"] as DateTime?;//Get DateTime object SessionStart
            //Check if session has not expired
            if (sessionStart.HasValue)
            {
                TimeSpan timepassed = DateTime.Now - sessionStart.Value;//Get the time passed since the session was created

                int TimeOut = (session.Timeout * 60) - Convert.ToInt32(remaining.TotalSeconds);
                int h = (TimeOut / 3600);
                int m = ((TimeOut / 60) % 60);
                int s = TimeOut % 60;

                SessionTimeoutValue.InnerText += TimeOut; // or use the string.format below.
                //string.Format("{0}:{1}:{2}",
                //    h,
                //    m,
                //    s);
            } 
```

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2012-07-11T04:10:18.540

是的，您可以使用以下代码获取剩余时间

```
 HttpSessionState session = HttpContext.Current.Session;//Return current sesion
    DateTime? sessionStart = session[SessionKeys.SessionStart] as DateTime?;//Convert into DateTime object
    if(sessionStart.HasValue)//Check if session has not expired
    TimeSpan remaining = sessionStart.Value-DateTime.Now ;//Get the remaining time 
```

# javascript - 购物篮小计

> ID：11425184
> 
> 赞同：0
> 
> 时间：2012-07-11T03:38:39.350
> 
> 标签：javascript, html, onclick, shopping-cart

希望有人可以帮助我！有一个简单的订单列表，但是如果有人单击一个选项，但随后改变主意并单击另一个选项，它只会不断将值相加...不知道如何解决...代码如下

```
<html>
<head>
<script>
    total = 0;
    function Update_Subtotal(radio){
        price = radio.getAttribute("price");
        total = parseInt(total) + parseInt(price);
        document.getElementById("total").innerHTML = '£' + total;
}
</script>
</head>
<body>
<form name="form" method="post" action="">
    <fieldset>
        <legend>Option 1</legend> 
        <input type="radio" price="100" onclick="Update_Subtotal(this);" />Sub1
        <input type="radio" price="200" onclick="Update_Subtotal(this);" />Sub2
        <input type="radio" price="300" onclick="Update_Subtotal(this);" />Sub3
    </fieldset>
    <fieldset>
        <legend>Option 2</legend> 
        <input type="radio" price="10" onclick="Update_Subtotal(this);" />Sub1
        <input type="radio" price="20" onclick="Update_Subtotal(this);" />Sub2
        <input type="radio" price="30" onclick="Update_Subtotal(this);" />Sub3
</fieldset>
</form>
<div id="total"></div>
</body>
</html> 
```

现在让我们在选项 1 中出售我选择 sub2 然后在选项 2 中我选择 sub 1... 我得到的总数是 210 这是正确的，但是，如果我改变主意并且在选项 2 中我选择 sub 3，我的答案是应该是230，但我得到的总数是240

在此先感谢您的帮助！

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:11:23.453

想必你至少需要做这两件事：

*   更改`price`为`value`
*   添加单选组名称

您可能还想做其他事情，但这里有一个相当简单的代码端口来执行这两个操作。请注意，它不再需要您将实际的单选按钮传递给函数。每次都会重新计算。这意味着您也可以更好地在更高级别附加事件侦听器，而不必在标记中执行显式事件侦听器附件。

```
<html>
<head>
<script>
    total = 0;
    function Update_Subtotal() {
        var inputs = document.forms.form.elements, total = 0;;
        for (var i = 0, len = inputs.length; i < len; i++) {
            var input = inputs[i];
            if (input.checked) {
                total += parseFloat(input.value) || 0;
            }
        }
        document.getElementById("total").innerHTML = '£' + total;
}
</script>
</head>
<body>
<form name="form" method="post" action="">
    <fieldset>
        <legend>Option 1</legend> 
        <input name="opt1" type="radio" value="100" onclick="Update_Subtotal();" />Sub1
        <input name="opt1" type="radio" value="200" onclick="Update_Subtotal();" />Sub2
        <input name="opt1" type="radio" value="300" onclick="Update_Subtotal();" />Sub3
    </fieldset>
    <fieldset>
        <legend>Option 2</legend> 
        <input name="opt2" type="radio" value="10" onclick="Update_Subtotal();" />Sub1
        <input name="opt2" type="radio" value="20" onclick="Update_Subtotal();" />Sub2
        <input name="opt2" type="radio" value="30" onclick="Update_Subtotal();" />Sub3
</fieldset>
</form>
<div id="total"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T03:50:10.070

您需要检测收音机是否已选中或未选中，如果未选中则减去，尝试更改：

```
total = parseInt(total) + parseInt(price); 
```

至

```
if(radio.checked){
    total = parseInt(total) + parseInt(price);
}
else{
    total = parseInt(total) - parseInt(price);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T04:17:41.987

在这种情况下改变主意意味着首先撤消您所做的选择，然后再做出另一个选择。撤消第一个选择意味着减去您做出该选择时添加的数量。你永远不会减去任何地方。

你要做的是找到一种方法来记住第一选择是什么。为此，每个字段集一个变量就足够了。

# python - Django 建模多对多和外键

> ID：11425187
> 
> 赞同：3
> 
> 时间：2012-07-11T03:38:46.200
> 
> 标签：python, database, django, models, relationships

试图更好地处理 django 数据库关系的处理方式。任何想法表示赞赏。

考虑以下示例模型：

```
class Things(models.Model):
    name = models.CharField(max_length=20)

class Stuff(models.Model):
    name = models.CharField(max_length=20)
    information = models.ManyToManyField('Information')
    things = models.ForeignKey('Things')

class Information(models.Model):
    name = models.CharField(max_length=20)
    stuff = models.ForeignKey('Stuff') 
```

错误来自`syncdb`: `AttributeError: 'ManyToManyField' object has no attribute 'ForeignKey'`。如果我在模型中*同时*包含`ManyToManyField`和`Foreign Key`字段，则会导致错误。`Stuff`

有没有办法让这两种关系都存在？感谢您的任何想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T04:31:09.277

`information`如果您想知道每个链接有多少`stuff`，django 将提供一个默认[管理器](https://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward)，允许您向后退；为此，您不需要外键`stuff`。

```
class Things(models.Model):
    name = models.CharField(max_length=20)

class Stuff(models.Model):
    name = models.CharField(max_length=20)
    information = models.ManyToManyField('Information')
    things = models.ForeignKey('Things')

class Information(models.Model):
    name = models.CharField(max_length=20) 
```

该模型将允许您执行以下查询：

*   “有什么`information`用`stuff` `X`？”
*   “对于`stuff` `Y`，有什么`information`联系？”
*   “全部`stuff`找到我`information`”`thing` `Z`

此外，它将允许您拥有多个`information`for each`stuff`和 multiple `stuff`for each `thing`。

在开始时写下这些问题将帮助您开发准确的模型，而无需在数据库中使用不必要的链接/关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:05:43.400

我的 django 版本提供了更多信息：

```
Error: One or more models did not validate:
foo.stuff: Reverse query name for m2m field 'information' clashes with field 'Information.stuff'. Add a related_name argument to the definition for 'information'.
foo.information: Reverse query name for field 'stuff' clashes with m2m field 'Stuff.information'. Add a related_name argument to the definition for 'stuff'. 
```

这可能足以让你继续前进。`related_name`为`ManyToManyField`关系和`ForeignKey`从信息到东西的关系定义一个...

```
information = models.ManyToManyField('Information', related_name='stuff_many_set')
stuff = models.ForeignKey('Stuff', related_name = 'info_set') 
```

然后`syncdb`会很开心。当然，你应该确定你需要这两种关系。使用此处的通用实体名称，看起来可能会有些混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T04:15:05.153

基本上你会得到这样的错误：

```
$python manage.py syncdb
Error: One or more models did not validate:
t.stuff: Reverse query name for m2m field 'information' clashes with field  'Information.stuff'. Add a related_name argument to the definition for 'information'.
t.information: Reverse query name for field 'stuff' clashes with m2m field 'Stuff.information'. Add a related_name argument to the definition for 'stuff'. 
```

为什么？很简单，您有两个相互引用的表，这里的问题是，当应用反向查找时，django 将生成相同的名称，从而产生冲突。

要解决这个问题，就像错误状态一样，您需要添加`related_name`这种方式 django 知道如何区分不同的反向调用。

```
from django.db import models

class Things(models.Model):
    name = models.CharField(max_length=20)

class Stuff(models.Model):
    name = models.CharField(max_length=20)
    information = models.ManyToManyField('Information', related_name = 'information_information')
    things = models.ForeignKey('Things')

class Information(models.Model):
    name = models.CharField(max_length=20)
    stuff = models.ForeignKey('Stuff', related_name = 'information_stuff') 
```

对不起，我的名字不是很有创意，这应该可以。

# javascript - 向下滑动切换时的Jquery延迟并且没有向上滑动？

> ID：11425188
> 
> 赞同：0
> 
> 时间：2012-07-11T03:38:51.260
> 
> 标签：javascript, jquery

我想我正在取得进展，在菜单的第二级滑下之前我有一个小小的停顿，我不明白为什么也没有滑动我认为这会发生在切换这里是我的代码格式更好我希望

首先是 HTML

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN""http://www.w3.org/TR/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"xml:lang="en" lang="en">
<head>
<title></title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script src="jquery-1.7.2.js" type="text/javascript"></script>
</head>
<body>
<div id="nav">
<ul class="nav">
    <li><a href="#">Home</a></li>
    <li><a href="#">Surf Boards</a>
        <ul class="subnav">
            <li ><a href="#">Long Boards</a>
                <ul class="subnav">
                    <li ><a href="#">Hard Boards</a></li>
                    <li><a href="#">Soft Boards</a></li>
                </ul>
            </li>
            <li><a href="#">Template 2</a></li>
            <li><a href="#">Template 3</a></li>
        </ul></li>
    <li><a href="reviews.html">Clothing</a>
                <ul class="subnav">
                    <li><a href="#">Shorts</a></li>
                    <li><a href="#">Shirts</a></li>
                    <li><a href="#">Hoodies</a></li>
                </ul>
    </li>
    <li><a href="reviews.html">Accessories</a>
            <ul class="subnav">
                <li><a href="#">Stickers</a></li>
                <li><a href="#">Board Combs</a></li>
                <li><a href="#">Leg Ropes</a></li>
            </ul>
    </li>
    <li><a href="reviews.html">Events</a>
        <ul class="subnav">
            <li><a href="#">ASAP</a></li>
            <li><a href="#">Indigenous</a></li>
            <li><a href="#">International</a></li>
        </ul>
    </li>
    <li><a href="reviews.html">Contact Us</a></li>
</ul>
</div>
</body>
</html> 
```

下一个 CSS

```
<style>
    * {
        padding: 0px;
        margin: 0px;
}
  #nav {
    width: 960px;
    height: 30px;
    background-color: #333333;
}

ul.nav {
    margin-left: 0px;
    padding-left: 0px;
    list-style: none;
    overflow: visible;
}
ul.nav li {
    float: left;
    position: relative;

}
ul.nav a {
    width: 8em;
    display: block;
    padding: 5px;
    text-decoration:none;
    color: #FFF;
    text-align: center;
}
ul.nav li a:hover {

    color: #33ff66;
}
.parent {
    background-image: url("images/arrow-select.png");
    background-repeat: no-repeat;
    background-position: right center;
}.parent2 {
   background-image: url("images/arrow-select.png");
    background-repeat: no-repeat;
    background-position: right center;
}
.hoverParent {
    background-image: url("images/arrow.png");
    background-repeat: no-repeat;
    background-position: right center;
}
div#nav ul ul li {
text-decoration: none;
color: white;
text-align: center;
background-color: #333333;
border: 1px solid #666  ;
border-top-color: #999999;
list-style: none;
}
div#nav ul ul ul {
    position: absolute;
    top: 0;
    left: 100%;
}
div#nav ul ul {
    position: absolute;
    z-index: 500;
}
div#nav ul ul {display: none;}

/*Am I Overwriting the jquery??*/
div#nav ul li:hover ul{display: block;}
div#nav ul ul,
div#nav ul li:hover ul ul,
div#nav ul ul li:hover ul ul
{display: none;}

div#nav ul li:hover ul,
div#nav ul ul li:hover ul,
div#nav ul ul ul li:hover ul
{
    display: block;
}
</style> 
```

最后是 JQuery

```
<script type="text/javascript">
$(document).ready(function(){
$('#nav ul li').hover(function(){
         $('ul li', this).css("display", "none").toggle(300);
    });
 $('#nav ul ul li:has(ul)').addClass("parent");
      $('#nav ul ul li:has(ul)').hover(function(){
          $(this).addClass('hoverParent');
          $('ul li', this).css("display", "none").toggle(300);
      },function() {
          $(this).removeClass('hoverParent');
      });

});
</script> 
```

希望你们能帮助..我在正确的轨道上吗我对jquery是全新的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:19:56.607

见[http://jsfiddle.net/efLuD/2/](http://jsfiddle.net/efLuD/2/)

虽然我认为你不需要为这种动画使用 jquery。如果您可以忍受没有动画的非常旧的浏览器，那么所有现代浏览器，例如 Firefox、Chrome、IE9 都支持 CSS 过渡。

# javascript - 第一个 div 后面的第二个 div 的警报

> ID：11425190
> 
> 赞同：-1
> 
> 时间：2012-07-11T03:39:09.943
> 
> 标签：javascript

> **可能重复：**
> [触发点击下部元素（z-index）](https://stackoverflow.com/questions/8134669/trigger-click-on-lower-element-z-index)

我正在开发一个两个 div 重叠的应用程序。第一个 div 在第二个 div 的上方，z-index。我希望当我单击重叠区域时，它应该提醒第一个 div 后面的第二个 div。我的代码如下：

```
<html>
    <head>
        <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
        <title>Click Through a DIV to Underlying Elements</title>
        <style type="text/css">
            .sample {
                position:absolute;
                top:100px;
                left:100px;
                height:600px;
                width:600px;
                border: 5px #000 solid;
                pointer-events:none;
                /* THIS IS THE TRICK YOU SEEK */
                background:blue;
            }
        </style>
        <!-- Include he following conditional to get click-throughs to
        work with IE -->
        <!--[if IE]>
            <style type="text/css">
                .sample {
                    filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='sample_600x600.png', sizingMethod='scale');
                    background:none !important;
                }
            </style>
        <![endif]-->
    </head>
    <body>
        <div>
            <!-- Below is the "BACKGROUND DIV" -->
            <div id="first" onclick="alert(this.id);" style="position:absolute;top:200px;left:200px;pointer-events:visible;z-index:100;width:143px;height:83px;overflow:hidden;border: 1px green dashed; background:url(7a.png);"></div>
            <div id="second" onclick="alert(this.id);" style="position:absolute;top:152px; left:265px;width:143px;height:83px;overflow:hidden;border: 1px #900 dashed;pointer-events:visible; background:url(6a.png);"></div>
            <!-- click-through-a-div-to-underlying-elements.html -->
    </body>
</html> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:28:27.907

一种方法是监听第一个 div 上的点击并查看鼠标坐标是否在第二个 div 内：

```
<!-- Below is the "BACKGROUND DIV" -->
<div id="first" style="position:absolute;top:200px;left:200px;pointer-events:visible;z-index:100;width:143px;height:83px;overflow:hidden;border: 1px green dashed; background:url(7a.png);"></div>
<div id="second" style="position:absolute;top:152px; left:265px;width:143px;height:83px;overflow:hidden;border: 1px #900 dashed;pointer-events:visible; background:url(6a.png);"></div>
<script>
firstDiv = document.getElementById("first");
secondDiv = document.getElementById("second");
firstDiv.onclick = function(e){
  console.log(e);
  if(e.clientX > secondDiv.offsetLeft
      && e.clientX < secondDiv.offsetLeft + secondDiv.offsetWidth 
      && e.clientY > secondDiv.offsetTop                       
      && e.clientY < secondDiv.offsetTop + secondDiv.offsetHeight
  ) {
    alert(secondDiv.id);
  } else {
    alert(e.srcElement.id);
  }
}
secondDiv.onclick = function(e){
  alert(e.srcElement.id);
}
</script> 
```

我在这里举了一个例子：http: [//jsfiddle.net/nDkKP/](http://jsfiddle.net/nDkKP/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T03:49:13.630

在第二个 div 的点击事件上调用第一个 div 的点击事件。

```
<div id="first" onclick="alert(this.id);" style="position:absolute;top:200px;left:200px;pointer-events:visible;z-index:100;width:143px;height:83px;overflow:hidden;border: 1px green dashed; background:url(7a.png);"></div>
<div id="second" onclick="alert(this.id);document.getElementById('first').click()" style="position:absolute;top:152px; left:265px;width:143px;height:83px;overflow:hidden;border: 1px #900 dashed;pointer-events:visible; background:url(6a.png);"></div> 
```

话虽如此，您应该远离将事件处理程序内联 html 分配到不显眼的方式。

# linux - 如何在 .cshrc 中为别名设置以下内容

> ID：11425199
> 
> 赞同：0
> 
> 时间：2012-07-11T03:40:27.693
> 
> 标签：linux, shell, unix, csh

我的 .cshrc 中有以下别名

```
alias fe-fat  "source fat  /prj/work"  
alias fe-fat1 "source fat1 /prj/work" 
```

我想知道我们是否可以为 fat/fat1 设置一些变量，并将上面的 2 个别名组合成一个类似于下面的别名，这样每当我`fe-<variable>`在 Unix 终端中输入时，上面的别名就可以工作了

```
alias fe-<variable> "source <variable> /prj/work" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:28:26.910

不，我认为这是不可能的`alias`。

你到底想达到什么目的？

编写一个基于参数启动其他命令的 bash 脚本非常简单（因此您可以键入`fe <variable>`而不是`fe-<variable>`）。

仅使用 2 个命令并不值得，但您也可以提供自定义自动完成脚本：请参阅[使用自定义命令完成行](https://stackoverflow.com/questions/427472/line-completion-with-custom-commands)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:08:16.797

有什么特别的原因，你不会把它别名为带参数的东西吗？

```
alias fe "source \!:1 /prj/work"

fe fat   #=> source fat  /prj/work
fe fat1  #=> source fat1 /prj/work 
```

# c - 是否可以从 C#.Net 调用 C 函数

> ID：11425202
> 
> 赞同：80
> 
> 时间：2012-07-11T03:41:50.533
> 
> 标签：c, c#-4.0, interop

我有一个 C 库，想从 C# 应用程序调用这个库中的函数。我尝试通过将 C lib 文件添加为链接器输入并将源文件添加为附加依赖项来在 C lib 上创建 C++/CLI 包装器。

有没有更好的方法来实现这一点，因为我不确定如何将 C 输出添加到 c# 应用程序。

我的 C 代码 -

```
__declspec(dllexport) unsigned long ConnectSession(unsigned long handle,
                            unsigned char * publicKey,
                            unsigned char   publicKeyLen); 
```

我的 CPP 包装器 -

```
long MyClass::ConnectSessionWrapper(unsigned long handle,
                                unsigned char * publicKey,
                                unsigned char   publicKeyLen)
    {
        return ConnectSession(handle, publicKey, publicKeyLen);
    } 
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-07-11T03:54:53.657

*对于Linux*，该示例将是：

1）创建一个`C`文件，`libtest.c`内容如下：

```
#include <stdio.h>

void print(const char *message)
{
  printf("%s\\n", message);
} 
```

这是一个简单的 printf 伪包装器。但表示`C`您要调用的库中的任何函数。如果你有一个`C++`函数，不要忘记放 extern`C`以避免破坏名称。

2) 创建`C#`文件

```
using System;

using System.Runtime.InteropServices;

public class Tester
{
        [DllImport("libtest.so", EntryPoint="print")]

        static extern void print(string message);

        public static void Main(string[] args)
        {

                print("Hello World C# => C++");
        }
} 
```

3) 除非您在“/usr/lib”之类的标准库路径中拥有库 libtest.so，否则您可能会看到 System.DllNotFoundException，要解决此问题，您可以将 libtest.so 移动到 /usr/lib，或者更好的是，只需将您的 CWD 添加到库路径：`export LD_LIBRARY_PATH=pwd`

[来自这里](http://www.moythreads.com/wordpress/2008/02/04/pinvoke-how-to-call-c-from-c/)的学分

**编辑**

对于*Windows*，它并没有太大的不同。从[这里](http://www.codeproject.com/Articles/6912/Calling-methods-from-Dll-compiled-in-C-from-C)`*.cpp`举个例子，你只需要在你的文件中附上你的方法，`extern "C"` 比如

```
extern "C"
{
//Note: must use __declspec(dllexport) to make (export) methods as 'public'
      __declspec(dllexport) void DoSomethingInC(unsigned short int ExampleParam, unsigned char AnotherExampleParam)
      {
            printf("You called method DoSomethingInC(), You passed in %d and %c\n\r", ExampleParam, AnotherExampleParam);
      }
}//End 'extern "C"' to prevent name mangling 
```

然后，编译，并在你的 C# 文件中执行

```
[DllImport("C_DLL_with_Csharp.dll", EntryPoint="DoSomethingInC")]

public static extern void DoSomethingInC(ushort ExampleParam, char AnotherExampleParam); 
```

然后就使用它：

```
using System;

    using System.Runtime.InteropServices;

    public class Tester
    {
            [DllImport("C_DLL_with_Csharp.dll", EntryPoint="DoSomethingInC")]

    public static extern void DoSomethingInC(ushort ExampleParam, char AnotherExampleParam);

            public static void Main(string[] args)
            {
                    ushort var1 = 2;
                    char var2 = '';  
                    DoSomethingInC(var1, var2);
            }
    } 
```

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-07-21T15:57:42.747

**更新 - 2019 年 2 月 22 日：**由于这个答案得到了相当多的支持，我决定用一种更好的调用 C 方法的方式来更新它。以前我曾建议使用`unsafe`代码，但安全正确的方法是使用`MarshalAs`属性将 .NET 转换`string`为`char*`. 此外，在 VS2017 中不再有 Win32 项目，您可能必须创建一个 Visual C++ dll 或空项目并对其进行修改。谢谢！

您可以使用 P/Invoke 从 C# 中直接调用 C 函数。
下面是关于创建包含 C dll 的 C# 库的简短方法。

1.  创建一个新的 C# 库项目（我将其称为“Wrapper”）
2.  在解决方案中添加一个 Win32 项目，将应用程序类型设置为：DLL（我将其称为“CLibrary”）

    *   您可以删除所有其他 cpp/h 文件，因为我们不需要它们
    *   将 CLibrary.cpp 文件重命名为 CLibrary.c
    *   添加 CLibrary.h 头文件
3.  现在我们需要配置 CLibrary 项目，右键单击它并转到属性，然后选择配置：“所有配置”

    *   在 Configuration Properties > C/C++ > Precompiled headers 中，将 Precompiled Headers 设置为：“Not using Precompiled Headers”
    *   在同一个 C/C++ 分支中，转到 Advanced，将 Compile As 更改为：“Compile as C code (/TC)”
    *   现在在 Linker 分支中，转到 General，并将 Output File 更改为：“$(SolutionDir)Wrapper\$(ProjectName).dll”，这会将构建的 C DLL 复制到 C# 项目根目录。

**图书馆.h**

```
__declspec(dllexport) unsigned long ConnectSession(unsigned long   handle,
                                                   unsigned char * publicKey,
                                                   unsigned char   publicKeyLen); 
```

**图书馆.c**

```
#include "CLibrary.h"

unsigned long ConnectSession(unsigned long   handle,
                             unsigned char * publicKey,
                             unsigned char   publicKeyLen)
{
    return 42;
} 
```

*   右击CLibrary项目，构建它，这样我们就得到了C#项目目录下的DLL
*   右击 C# Wrapper 项目，添加现有项，添加 CLibrary.dll
*   单击CLibrary.dll，转到属性窗格，将“复制到输出目录”设置为“始终复制”

使 Wrapper 项目依赖于 CLibrary 是一个好主意，因此首先构建 CLibrary，您可以通过右键单击 Wrapper 项目，转到“项目依赖项”并选中“CLibrary”来做到这一点。现在对于实际的包装器代码：

**ConnectSessionWrapper.cs**

```
using System.Runtime.InteropServices;

namespace Wrapper
{
    public class ConnectSessionWrapper
    {
        [DllImport("CLibrary.dll", CallingConvention = CallingConvention.Cdecl)]
        static extern uint ConnectSession(uint handle,
            [MarshalAs(UnmanagedType.LPStr)] string publicKey,
            char publicKeyLen);

        public uint GetConnectSession(uint handle, 
                                      string publicKey,
                                      char publicKeyLen)
        {
            return ConnectSession(handle, publicKey, publicKeyLen);
        }
    }
} 
```

现在只需调用`GetConnectSession`，它应该返回`42`。

结果：
![在控制台应用程序中测试包装库](../Images/e988509d6932cfcd3c5dd24ea9e659c6.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-20T20:46:00.737

好的，打开 VS 2010，转到*File -> New -> Project -> Visual C++ -> Win32 -> Win32 Project*并为其命名（在我的情况下为 HelloWorldDll），然后在*Application Type*下的窗口中选择*'DLL '*并在*Additonal Options*下选择*'Empty Project'*。

现在转到您的*解决方案资源管理器*选项卡，通常位于 VS 窗口的右侧，右键单击*Source Files -> Add Item -> C++ file (.cpp)*并为其命名（在我的情况下为 HelloWorld）

然后在新类中粘贴以下代码：

```
#include <stdio.h>

extern "C"
{
  __declspec(dllexport) void DisplayHelloFromDLL()
  {
    printf ("Hello from DLL !\n");
  }
} 
```

现在*构建*项目，导航到您的项目*DEBUG*文件夹后，您应该会找到：**HelloWorldDll.dll**。

现在，让我们创建我们的 C# 应用程序，它将访问 dll，转到*文件 -> 新建 -> 项目 -> Visual C# -> 控制台应用程序*并为其命名（CallDllCSharp），现在将此代码复制并粘贴到您的主程序：

```
using System;
using System.Runtime.InteropServices;
...
        static void Main(string[] args)
        {
            Console.WriteLine("This is C# program");
            DisplayHelloFromDLL();
            Console.ReadKey();
        } 
```

并构建程序，现在我们已经构建了两个应用程序，让我们使用它们，将您的 *.dll 和您的*.exe (bin/debug/* .exe) 放在同一个目录中，并执行应用程序输出应该是

> 这是 C# 程序
> 
> 来自 DLL 的您好！

希望这可以解决您的一些问题。

**参考资料**：

*   [如何在 C 中创建一个 DLL 库，然后在 C# 中使用它](http://www.codeproject.com/Articles/9826/How-to-create-a-DLL-library-in-C-and-then-use-it-w)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-02T21:51:03.387

**注意：以下代码适用于 DLL 中的多种方法。**

```
[DllImport("MyLibc.so")] public static extern bool MyLib_GetName();
[DllImport("MyLibc.so")] public static extern bool MyLib_SetName(string name);
[DllImport("MyLibc.so")] public static extern bool MyLib_DisplayName(string name);

public static void Main(string[] args)
{
string name = MyLib_GetName();
MyLib_SetName(name);
MyLib_DisplayName(name);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-02T14:13:39.677

[P/Invoke 方法](http://the%20method%20has%20been%20described%20extensively%20and%20repeatedly)已经被广泛且反复地描述过，到目前为止还可以。我在这里缺少的是，C++/CLI 方法有一个很大的优势：调用安全。与调用 C 函数的 P/Invoke 相比，调用 C 函数就像向天空射击（如果允许这种比较），没有人会在调用 C 函数时检查函数参数。在这种情况下，使用 C++/CLI 通常意味着您包含一个带有您想要使用的函数原型的头文件。如果您使用错误/过多/过少的参数调用 C 函数，编译器会告诉您。

我不认为你可以说一般来说哪个是更好的方法，老实说我不喜欢他们中的任何一个。

# javascript - DOM Mutation Observers 比 DOM Mutation Events 慢吗？

> ID：11425209
> 
> 赞同：9
> 
> 时间：2012-07-11T03:43:10.157
> 
> 标签：javascript, performance, events, observers, mutation-events

以下代码利用 DOM Mutation Event`DOMNodeInserted`来检测`body`元素的存在并将其`innerHTML`包装到包装器中。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
        function DOMmanipulation() {
            if (document.body) {
                document.removeEventListener('DOMNodeInserted', DOMmanipulation);
                // DOM manipulation start
                document.body.innerHTML = '<div class="wrapper">' + document.body.innerHTML + '</div>';
                // DOM manipulation end
            }
        }
        document.addEventListener('DOMNodeInserted', DOMmanipulation);
    </script>
</head>
<body>
    <p>Lorem ipsum dolor sit amet.</p>
</body>
</html> 
```

尽管包装成功，但仍有错误表明未找到节点。[这个问题](https://stackoverflow.com/a/11407389/1091014)的答案解释说，这是因为当 jQuery 被加载时，它`div`在 body 中添加了一个元素来做一些测试，但它未能删除该`div`元素，因为该元素已被包装到包装器中，因此它不是子元素身体的元素了。

上面的实验告诉我们`DOMNodeInserted`event 比 jQuery 的测试更快，因为 jQuery 的测试元素 ( `div`) 在被 jQuery 删除之前就被包装了。

* * *

现在下面的代码可以实现相同的操作，并且它使用了新引入的 DOM Mutation Observers。截至目前 (2012-07-11)，它仅适用于 Chrome 18 及更高版本。

```
<!DOCTYPE html>
<html lang="en">
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script>
        var observer = new WebKitMutationObserver(function() {  
            if (document.body) {
                observer.disconnect();
                // DOM manipulation start
                document.body.innerHTML = '<div class="wrapper">' + document.body.innerHTML + '</div>';
                // DOM manipulation end
            }
        });
        observer.observe(document, { subtree: true, childList: true });
    </script>
</head>
<body>
    <p>Lorem ipsum dolor sit amet.</p>
</body>
</html> 
```

此代码没有产生任何错误。这意味着 jQuery 比 DOM Mutation Observers 更快，因此它能够`div`在该元素被包装到包装器之前删除其测试元素 ( )。

* * *

从以上两个实验中，我们发现在执行速度方面：

*   DOM 突变事件 > jQuery 的测试
*   jQuery 的测试 > DOM 变异观察者

这个结果能否恰当地证明 DOM Mutation Observers 比 DOM Mutation Events 慢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-30T22:26:22.967

DOM Mutation Observers 并不打算比 DOM Mutation Events 更快。相反，它们旨在提高效率和安全性。

区别的基本要点是，只要有变化，DOM 突变事件就会触发。因此，例如，此代码将创建一个回调循环，最终会使浏览器崩溃。

```
document.addEventListener('DOMNodeInserted', function() {
    var newEl = document.createElement('div');
    document.body.appendChild(newEl);
}); 
```

事实上，它们以这种方式被调用并且经常对浏览器产生重大影响，因为它强制浏览器之间的中断重新计算样式、重排和重绘周期或更糟的是迫使浏览器重新计算样式、重排和重绘每个打回来。其他代码可能正在执行而对 DOM 进行进一步更改，这将继续被您的回调中断，这一事实进一步激怒了问题。

更重要的是，由于事件的传播方式与正常的 DOM 事件相同，您将开始听到您可能不关心或未在代码中考虑的元素的更改。因此，DOM 突变事件的整个机制可能会变得难以快速管理。

DOM Mutation Observers 解决了这些问题，顾名思义，它可以观察 DOM 的变化，并为您提供从变化开始时发生的所有变化的报告。这是一个更好的情况，因为它允许浏览器在有意义的时间通知您，例如当文档空闲并且所有其他可能进行进一步更改的 JavaScript 已完成执行时，或者在浏览器重新启动之前recalc / repaint 循环，因此它可以应用您所做的任何更改，而无需在不久之后重复该循环。

它还使您更容易管理，因为您可以扫描所有更改的元素以找到您要查找的内容，而不是为您不关心的内容编写大量案例处理代码，就像情况一样突变事件。更重要的是，它只会调用一次，因此您不必担心任何进一步的更改会影响元素，即它们不再处于更改状态，它们已经更改。

因此，在回答您的问题时，DOM Mutation Observers 速度较慢，因为它们等待 jQuery 完成对 DOM 的操作，然后才通知您 jQuery 发生了哪些变化。出于上面解释的原因和您的示例，证明它是更安全更有效的解决方案（您不再导致错误），并且您并不真正关心 jQuery 向 DOM 添加了一些内容，因为它会在不久之后将其删除。使用 Observers，您会收到一份报告，详细说明正在添加和删除的 jQuery 元素。

然而，这仍然有点麻烦，因为您必须通过将元素与发生的所有更改匹配来弄清楚实际发生了什么。现实情况是，就您而言，没有发生任何事情（添加和删除了相同的元素），因此 DOM 的结构实际上并没有发生任何变化。为了帮助解决这个问题，有一个名为 MutationSummary 的小库：

[http://code.google.com/p/mutation-summary/](http://code.google.com/p/mutation-summary/)

这会计算更改的净效果，并且只调用传入这些更改的回调。因此，在您的情况下，根本不会调用您的回调，因为更改的净效果为零。

例如，对于以下内容，您只会得到一个更改。主体样式更改为左：1000px。即使我以 1000 为增量更改了它。变化的净效应只是其初始值与最终值之间的差异。

```
function moveBody() {
    for (var i = 0; i < 1000; i++) document.body.style.left = i + 'px';
}
moveBody(); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-09T18:52:07.867

简单的答案是突变观察者是异步的。只要引擎感觉好，它们就会被发送，在更改发生一段时间后，在某些情况下，在发生大量更改后发送。这可能是在 DOM 突变事件侦听器通知您之后很久，但与此同时，引擎可以自由地完成其工作，而不必为每个 DOM 变化不断创建和冒泡事件。

# ios - 来自另一个视图的 NSMutableArray 返回空

> ID：11425211
> 
> 赞同：0
> 
> 时间：2012-07-11T03:43:50.850
> 
> 标签：ios, cocoa-touch, nsmutablearray

我有两个 UIView。一个被调用的 UIView`SelectText`有一个 ivar，`NSMutableArray`它在执行某个功能后被填充。

这是一个片段代码：

```
- (void)fillDrawPoints
  {
      //the codes....
     [self.drawnPoints addObject:[NSValue valueWithCGPoint:currPoint]];
  } 
```

**注意：**数组`drawnPoints`在`initWithFrame`SelectText 中初始化。此外，我总是通过在函数中添加日志来检查数组是否实际填充在视图中。

现在我想做的是从另一个视图访问这个数组。这就是我所做的：

**文本视图.h**

```
#import "SelectText.h"

@interface TextView : UIView
{
   SelectText *txtSel;
}

@property (nonatomic, retain) SelectText *txtSel; 
```

**文本视图.m**

```
@synthesize txtSel;

- (void)getDrawingPoints:(NSMutableArray *)pointArray
{
    self.pointArray = pointArray;
    NSLog(@"Array count: %d", [self.pointArray count]);
} 
```

从上面的代码可以看出，我正在尝试将里面的数据传递`txtSel.drawnPoints`给`textView.pointArray`以后使用。问题是，`txtSel.drawnPoints`当我尝试从另一个视图访问它时，它总是返回空。我在这里做错了什么？

**额外的：**

这就是我实例化的方式`SelectText`

```
- (id)initWithFrame:(CGRect)frame
  {
      self = [super initWithFrame:frame];
      if (self) {
         txtSel = [[SelectText alloc]init];
         [self addSubView:txtSel];

         //rest of code...
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:51:04.383

更改 TextView 类的 init 方法如下

```
- (id)initWithClassSelectText:(SelectText *)selectText {
     if ((self = [super init])) {
         txtSel =  selectText; 
     }
     return self;
} 
```

当你创建一个 TextView 的实例时，你使用这个：

```
TextView textView = [[TextView alloc] initWithClassSelectText:self]; 
```

现在您可以使用`txtSel`对象访问 SelectText 类的所有属性

# php - 子查询中的 group_concat

> ID：11425213
> 
> 赞同：0
> 
> 时间：2012-07-11T03:44:12.167
> 
> 标签：php, mysql, sql

```
select GROUP_CONCAT(DISTINCT tbl1.logid)  ,
(

    SELECT COUNT( DISTINCT tbl2.client_id ) 
    FROM tbl_client tbl2

    WHERE tbl2.con_id
    IN ( GROUP_CONCAT(DISTINCT tbl1.logid) ) 

) as PC2,

from tbl_table tbl1; 
```

我尝试分配 GROUP_CONCAT(DISTINCT tbl1.logid) 的别名并将其放在 IN() 内的值中，但仍然无法解决

父查询返回类似 12,34,3,56 的内容，我想在 IN 函数中使用

这实际上不是全部情况，但我只是想弄清楚这一点，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T03:58:21.337

您不能将[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)的输出用于 IN()，因为它返回一个字符串。将子查询的结果用于 IN()。

```
select GROUP_CONCAT(DISTINCT tbl1.logid)  ,
(

SELECT COUNT( DISTINCT tbl2.client_id ) 
FROM tbl_client tbl2

WHERE tbl2.con_id
IN ( SELECT logid from tbl_table ) 

) 

as PC2,

from tbl_table tbl1; 
```

# actionscript-3 - 带有日期验证器的 Flex 4 日期字段无错误矩形

> ID：11425215
> 
> 赞同：0
> 
> 时间：2012-07-11T03:44:25.950
> 
> 标签：actionscript-3, apache-flex, flex4.5

我正在使用 DateField 并使用日期验证器验证日期。它工作正常，但是当日期无效时，日期字段周围不会显示通常的红色矩形，但如果鼠标悬停在日期字段上，则会显示错误工具提示。

我应该怎么做才能在无效的 dateField 周围显示一个错误矩形。

参考代码是

```
 <fx:Declarations>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
    <validators:CodeValidator id="seriesVal" minLength="3" maxLength="3" required="true" source="{edSeries}" property="text" triggerEvent=""/>
    <mx:StringValidator id="remarksVal" required="true" source="{edRemarks}" property="text" triggerEvent=""/>
    <s:NumberValidator id="fromVal" minValue="0" maxValue="99999999" domain="int" required="true" source="{edFrom}" property="text" triggerEvent=""/>
    <s:NumberValidator id="toVal" minValue="0" maxValue="99999999" domain="int" required="true" source="{edTo}" property="text" triggerEvent=""/>
    **<mx:DateValidator id="txnDateVal" required="true" source="{edTXNDate}" property="text" triggerEvent=""/>**
</fx:Declarations> 
```

......

在初始化函数中

```
validatorArr = new Array();
validatorArr.push(txnDateVal);
validatorArr.push(seriesVal);
validatorArr.push(fromVal);
validatorArr.push(toVal);
validatorArr.push(remarksVal); 
```

在 OK 按钮中单击

```
// First Validate Data if invalid data then continuw editing
if (Validator.validateAll(validatorArr).length > 0){
setFormFocus();
return;
}

<s:Label x="262" y="47.420326" styleName="FormLabel" text="Date"/>
<mx:DateField id="edTXNDate" x="337" y="40.570312" width="137" height="22" editable="true"
              formatString="DD/MM/YYYY" toolTip="Transaction date" yearNavigationEnabled="true"
              selectableRange = "{{rangeEnd : new Date()}}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:16:46.150

我将您的代码粘贴到一个空的应用程序中，但无法重现该问题。这让我怀疑了一些事情

1.  尝试禁用应用程序中的任何 CSS，并查看是否有任何 CSS 设置阻止了应用程序周围的红色光环。
2.  删除除日期验证器之外的所有验证器，看看问题是否仍然存在。

祝你好运。

# security - 加密授权组播

> ID：11425216
> 
> 赞同：1
> 
> 时间：2012-07-11T03:44:34.337
> 
> 标签：security, encryption, ssl, multicast

我有一个将多播传输到某些终端站的服务器（将被标记为“A”）。我只希望那些有幸看到这些信息的人，真正看到它。

有一个第三方服务器（“B”）管理与“A”和终端站的单播通信以及与它们两者的 SSL。

我的目标是实现安全的多播：两个必要的条件：

1.  它必须是多播的。
2.  我想要应用程序级别的安全性（而不是网络或传输）

* * *

问题：

1.  有这样的实现吗？我试过搜索“安全多播”等，但只遇到了 IP 多播安全性。我想要一个应用程序的实现。如果是这样，你能推荐一些以及如何使用它们吗？

2.  我考虑过生成一个特殊的对称密钥 - 在“A”和“B”通信期间以及“B”和终端站的对话期间 = 将其（通过 SSL）传递给终端站。

    一个。这是一个好主意吗？

    湾。我看到的一个问题是，由于站点的数量，揭示密钥变得更加容易。我想过每小时更换一次钥匙。我将通过发送多播消息来通知站点密钥已更改： (sequence_number, encrypted_message) - 这样每次密钥更改时，sequence_number++。

您如何看待实施？有更好的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-03T13:35:09.283

我编写了一个名为 UFTP ( [http://uftp-multicast.sourceforge.net](http://uftp-multicast.sourceforge.net) ) 的应用程序，它正是这样做的。

在密钥管理方面，每个组播会话在发送方和每个接收方之间执行类似 TLS 的密钥交换，然后使用每个接收方协商的密钥发出用于加密数据的组密钥。通过为每个会话进行密钥协商，这消除了与在会话中重新键入密钥相关的复杂性。

身份验证通过密钥指纹识别完成，指纹在带外进行通信。这比基于证书的系统更简单，并且可以最大限度地减少开销。每个发送者和接收者都有一个 RSA 或 ECDHA 密钥来识别它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:17:34.683

您描述的是 PKI 的一个简单应用：

*   每个站创建一个 RSA 密钥对并将其公钥发送到服务器。
*   服务器生成随机对称密钥并使用该对称密钥加密多播消息。应该为每条消息生成新的对称密钥，但通常这没什么大不了的。
*   对称密钥使用每个站的公共 RSA 密钥进行加密。所有这些加密的产品（即加密的会话密钥）与加密的数据合并并组成多播数据包。

不幸的是，这种方案会在多播消息上造成大量的额外数据负载，但这是由密钥长度引起的，并且在不牺牲安全性的情况下无法减少长度。

# objective-c - iOS确定两个unicode字符是否实际上是另一种语言的一个字母并放入tableview索引

> ID：11425217
> 
> 赞同：1
> 
> 时间：2012-07-11T03:44:49.877
> 
> 标签：objective-c, ios, localization, nsstring

在 UITableView 的索引滚动条（右侧的滚动条包含每个部分的字符）中，我如何显示混合的英文字符并说日文字符？有没有办法获取 NSString 的第一个字符，然后检查它是否实际上是 é 或其他东西的一部分（因为 é 是 2 个 unicode 字符 - e + `）。任何代码片段都会非常有帮助。通过只做第一个字符，它最终会显示随机字符，如“=”或“~”而不是日文字符

谢谢！

注意：我没有使用 UILocalizedIndexedCollat​​ion，因为我使用的是 CoreData 的 FetchResultsController。在网上的许多地方，我读到你不能同时使用两者。

编辑：我现在可以得到这个字符，但是 tableview 索引似乎没有正确呈现它们。有没有人在 tableview 索引中显示类似日文字符的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:15:25.213

最可靠的方法是使用`NSString`对这些字符敏感的方法。您可能会对**WWDC2011 - Session 128 - Advanced Text Processing**视频感兴趣。它广泛讨论了这个主题。注意“组合字符序列”部分

根据那里提供的信息，您可能可以执行以下操作：

```
#warning I haven't tested this thoroughly
NSString *string = @"Hello";
__block NSString *firstCharacterSequence = nil;
[string enumerateSubstringsInRange:NSMakeRange(0, string.length) 
                           options:NSStringEnumerationByComposedCharacterSequences 
                        usingBlock:^(NSString *substring, NSRange substringRange, NSRange enclosingRange, BOOL *stop){
                            firstCharacterSequence = substring;
                            *stop = YES;
                        }];
NSLog(@"%@",firstCharacterSequence); 
```

# java - CommandButton 操作不适用于自定义标签

> ID：11425218
> 
> 赞同：1
> 
> 时间：2012-07-11T03:44:57.587
> 
> 标签：java, jsf, jakarta-ee, primefaces, custom-tags

我创建了以下自定义标签：

```
<h:form>
<d:formBuilder/>        
</h:form> 
```

标签呈现没有这样的问题：

![我的自定义标签](../Images/6cf80eb4b773a36c851adf4da82f1268.png)

标记代码：

```
public class FormBuilder extends TagHandler {

    public FormBuilder(TagConfig config) {
        super(config);
    }

    public void apply(FaceletContext context, UIComponent parent) throws IOException {
        CommandButton command = (CommandButton) context.getFacesContext().getCurrentInstance().getApplication().createComponent( CommandButton.COMPONENT_TYPE);
        command.setValue("Click");
        command.setAjax(false);
        MethodExpression me = context.getExpressionFactory().createMethodExpression(FacesContext.getCurrentInstance().getELContext(), "#{cli.insert}", null, new Class<?>[0]);
        command.setActionExpression(me);

        InputText it = (InputText) context.getFacesContext().getCurrentInstance().getApplication().createComponent(InputText.COMPONENT_TYPE);       
        ValueExpression ve1 = context.getExpressionFactory().createValueExpression(FacesContext.getCurrentInstance().getELContext(), "#{cli.name}", String.class);      
        it.setValueExpression("value", ve1);        

        parent.getChildren().clear();       
        parent.getChildren().add(it);
        parent.getChildren().add(command);
    }

} 
```

托管bean：

```
@SessionScoped
@ManagedBean(name = "cli")
public class ClienteController {

    private String name = "aa";

    public String insert() {
        name = "test";
        return "clientes";
    }
} 
```

inputText 工作正常，但 commandButton 没有执行 managedBean 的方法！怎么了？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:09:27.687

这个答案会帮助你.. [为什么命令按钮没有被调用？](https://stackoverflow.com/a/2120183/839393)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T12:44:07.313

奇怪的是，我遇到了同样的问题，但我使用的是 EL 表达式。我解决了删除标签“type=button”的问题。我知道，没有逻辑，但只能删除标签。

PS：Primefaces 3.4

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-12T00:50:59.617

该按钮与代码一起使用：

```
 ExpressionFactory ef = context.getFacesContext().getCurrentInstance().getApplication().getExpressionFactory();
MethodExpression me = ef.createMethodExpression(ec, "#{cli.insert}", null, new Class[]{ActionEvent.class});
MethodExpressionActionListener meal = new MethodExpressionActionListener( me );
command.addActionListener(meal);
command.setType( "submit" ); 
```

# ios - 如何本地化 plist 文件

> ID：11425220
> 
> 赞同：0
> 
> 时间：2012-07-11T03:45:17.633
> 
> 标签：ios, properties, localization, internationalization, plist

我提前感谢您的帮助。我一直在寻找一个没有运气的答案。

我有一个使用非常专业的体育术语的应用程序，我将其存储在 plist 文件中。然后这些术语显示在 UITableView 中。当用户点击技能时，会播放视频演示。该应用程序运行良好，但我非常希望将其本地化为其他语言。

我已经翻译了这些术语，我希望我可以通过复制它来本地化 plist 文件，并在文件的每个连续副本中更改特定于运动的术语，然后将其放入相应的语言文件夹中。这可能吗？如果可以，有人可以指点我一个很好的例子或教程吗？

到目前为止，我已经尝试在 Xcode 中本地化俄语的 plist 文件并将其放在它自己的 ru.lproj 文件夹中，但是，当我在模拟器中运行它时，UITableView 中根本没有数据出现！没有俄罗斯文件，它工作正常。所以我的想法是，Xcode 以某种方式混淆了 plist 文件，因为名称是相同的，即使它位于不同的目录中（en.lproj 和 ru.lproj）。该文件在两个目录中都称为 Basic.plist。这个过程让我很困惑，从我收集的信息来看，应该不难弄清楚！

再次，提前感谢您。本地化概念对我来说是全新的，我渴望学习它。我很确定我了解 .strings 文件如何处理嵌入在代码中的字符串，但我想知道是否可以翻译整个 pList 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:41:14.837

很多事情可能是错误的。一种可能性是 plist 文件没有被复制到包中（在目标的 Build Phases 页面中验证——它应该说 Basic.plist 旁边写着“...in (localization).lproj”。

如果您手动创建了 ru.lproj，可能是您将其复制到了错误的位置，或者将原始文件留在了错误的位置（它现在应该在 en.lproj 中）。与手动创建文件相比，最简单的方法是在 XCode 中选择文件 Basic.plist 并使用 File Inspector 中的 Localization 控件添加本地化。正如 Kevin Grant 所提到的，如果这没有显示您的文件具有英语和俄语，那么就出了问题，您可以使用 + 控件重新开始。

最后，我不是 100% 确定这一点，但足够接近：我相信您的代码可能需要更新以找出从哪里加载 plist 文件。它是 .xib 或 .strings 文件，您不必这样做，因为这将是自动的，iOS 知道首先查看相关的 .lproj 文件夹（当您加载 .xib 时，您只需指定其名称，不是它的确切位置）。但我假设您正在通过特定路径加载 plist 文件，因此该路径现在必须包含 .proj 文件夹。

如果可能的话，我认为每种语言都有不同的 plist 文件的更好方法是只有一个 plist，但是您可以将其用作 .strings 文件的键，而不是显示 plist 中的字符串。`NSLocalizedString`您可以使用宏（定义为）检索本地化，`[[NSBundle mainBundle] localizedStringForKey:(key) value:@"" table:nil]`这将在运行时为您提供本地化 .strings 文件中的相应值。当然，这意味着当您更新您的 plist 时，您还必须更新您的 .strings 文件以匹配。好消息是你不需要为你的活动语言确定 plist 的路径——使用 NSLocalizedString，你根本不需要提供路径。

# android - 无法为 MediaPlayer.create 设置上下文

> ID：11425221
> 
> 赞同：0
> 
> 时间：2012-07-11T03:45:31.017
> 
> 标签：android, gmail

我想通过此代码提取在 gmail 中发送邮件的人的邮件 ID，并使用 Media Player 逐字符播放。但是在我声明 MediaPlayer.create(MailSender.this,R.raw.sound) 的 try 块中，创建带有下划线，它说它与 (Context,int) 类型不匹配。

甚至 getApplicationContext() 也不起作用。我该怎么办？代码在这里

```
package com.mycomp.android.test;

import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.InputStreamReader;

import javax.mail.Message;
import javax.mail.MessagingException;

import android.app.ProgressDialog;
import android.media.MediaPlayer;
import android.os.AsyncTask;
import android.util.Log;
import android.widget.Toast;

public class MailSender extends AsyncTask<Void, Integer, Integer> {
MediaPlayer mPlayer=null;
        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub

        }

        @Override
        protected Integer doInBackground(Void... params) {
             EmailManager ob=new EmailManager("user","password","gmail.com","smtp.gmail.com","imap.gmail.com");

             try {
                Message result[]=ob.getMails();
                for (int i = 0; i < result.length; i++) {
                       Log.d("From", result[i].getFrom()[0] + "");
                       String s=result[i].getFrom()[0].toString();
                       String formed=s;
                       if(s.contains("<")&&s.contains(">"))
                       {
                           formed="";
                           int start=s.indexOf('<');
                           int end=s.indexOf('>');

                           for(int j=start+1;j<end;j++)
                           {
                                  formed=formed+s.charAt(j);
                           }
                       }
                       System.out.println("Baby          "+formed);
                    MediaPlayer mPlayer=MediaPlayer.create(MailSender.this,R.raw.a); 
```

mPlayer.start();

```
 //Call sound=new Call(formed);

                        Log.d("Subject", result[i].getSubject() + "");
                        String content = null;
                        try {
                            content = result[i].getContent().toString();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                        Log.d("content", content + "");

                    }
            } catch (MessagingException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
             return 1;

        }

        @Override
        protected void onPostExecute(Integer result) {
            // TODO Auto-generated method stub

        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:40:25.797

嗯，答案很简单：`MailSender`是一个`AsyncTask`，因此不是一个有效的引用`Context`。换句话说： an`AsyncTask`没有实现`Context`. 这就是为什么`MailSender.this`不会工作，也不会调用的`getApplicationContext()`原因，因为 an`AsyncTask`没有这样的方法。

您的问题有两种简单的解决方案：

*   定义`MailSender`为您的内部类，并使用对外部类的引用进行`Activity`调用（如：）。`MediaPlayer.create(...)``MyActivity.this`
*   向您的类添加一个构造函数，该构造函数`MailSender`引用 a `Context`，例如`Activity`您从中启动任务的 。然后`MediaPlayer.create(...)`用那个`Context`参考打电话。

此外，我怀疑您是否想`MediaPlayer.create(...)`从非 UI 线程调用，尽管我不得不承认我没有尝试过。相反，我建议您使用在后台准备播放器的内置方法，称为[`prepareAsync()`](http://developer.android.com/reference/android/media/MediaPlayer.html#prepareAsync%28%29). 更多详细信息可以在[该类](http://developer.android.com/reference/android/media/MediaPlayer.html)[的文档中`MediaPlayer`](http://developer.android.com/reference/android/media/MediaPlayer.html)找到。

* * *

**编辑：**通过添加一个构造函数，我的意思是在你的`MailSender`类中添加这样的东西：

```
// member variable
private Context mContext;

public MailSender(Context context) {
    mContext = context;
}

// create the MediaPlayer using the context reference:
MediaPlayer mediaPlayer = MediaPlayer.create(mContext, ...); 
```

通过此添加，只需按如下方式实例化 MailSender （假设`this`将引用您的`Activity`）：

```
MailSender sender = new MailSender(this);
sender.execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:27:47.513

我认为您可以这样做，因为 MediaPlayer 需要一个 URI，并且不可能为资产文件创建一个 URI。尝试使用 MediaPlayer.setDataSource(FileDescriptor) 方法创建一个 MediaPlayer 对象并为其设置数据源。您可以使用 AssetManager.openFd() 方法获取 FileDescriptor 对象，然后为返回的对象调用 AssetFileDescriptor.getFileDescriptor() 方法。

# winforms - 如何解决 Visual C++ 窗体消失的问题？

> ID：11425222
> 
> 赞同：0
> 
> 时间：2012-07-11T03:45:46.423
> 
> 标签：winforms, visual-c++, managed-c++

我有一个具有几个窗口窗体的可视 C++ 程序。它没有任何错误，可以成功构建。今天我想向其中一个表单添加另一个文本框和一个按钮，但我找不到我的表单设计窗口。我看到了 Form1.h、Form1.resX 和我的其他东西。再次，我可以构建它并且程序没有任何错误，但是表单设计窗口消失了。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:07:02.770

对于 VS2008

1.  单击视图->资源视图或在解决方案资源管理器中单击资源视图选项卡
2.  在“App.rc”下单击对话框，您可以在那里查看您的表单

# asp.net - ASP.NET AJAX 服务器控件中的 UpdatePanel

> ID：11425223
> 
> 赞同：1
> 
> 时间：2012-07-11T03:46:01.707
> 
> 标签：asp.net, asp.net-ajax, updatepanel, web-controls

创建 ASP.NET AJAX 服务器控件。覆盖 RenderContents 方法，我将代码放入如下所示：

```
protected override void RenderContents(HtmlTextWriter writer)
{
    var updatePanel = new UpdatePanel();
    updatePanel.UpdateMode = UpdatePanelUpdateMode.Conditional;
    updatePanel.ClientIDMode = ClientIDMode.AutoID;
    updatePanel.ID = "CaptchaUpdatePanel";
    updatePanel.ChildrenAsTriggers = true;

    //var placeHolder = new PlaceHolder();
    var hiddenField = new HiddenField();
    hiddenField.ID = "captchaKey";
    updatePanel.ContentTemplateContainer.Controls.Add(hiddenField);

    var panel = new Panel();
    panel.ID = "Captcha";
    var imgButton = new ImageButton();
    imgButton.ID = "RefreshCaptcha";
    imgButton.TabIndex = 0;
    imgButton.AlternateText = "Refresh Captcha Characters";
    imgButton.ImageUrl = RefreshButtonPath;
    imgButton.Width = 36;
    imgButton.Height = 36;
    panel.Controls.Add(imgButton);

    updatePanel.ContentTemplateContainer.Controls.Add(panel);

    AsyncPostBackTrigger trigger = new AsyncPostBackTrigger();
    trigger.ControlID = "CaptchaRefresh";
    trigger.EventName = "Click";
    updatePanel.Triggers.Add(trigger);

    updatePanel.ContentTemplateContainer.RenderControl(writer);

    base.RenderContents(writer);
} 
```

编译控件并将其放到 Web 窗体页面上，我发现 UpdatePanel 不起作用。UpdatePanel 中的按钮在单击时会执行完整的回发，而不是异步执行。

没有成功，我一直在网上搜索答案。

我想知道在 AJAX 服务器控件中使用 UpdatePanel 是否是个好主意。我已经使用 UserControl 成功地执行了这个类似的任务。

HTML 脚本如下：

```
<%@ Page Language="C#" AutoEventWireup="true" %>

<%@ Register Assembly="CaptchaControl" Namespace="CaptchaControlx" TagPrefix="cc1" %>

<!DOCTYPE html>

<html>
<head runat="server">
    <title></title>
    <script runat="server">

        protected void Page_Load(object sender, EventArgs e)
        {
            Label1.Text = DateTime.Now.ToString();
        }
    </script>
    <!--[if lt IE 9]>
        <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>

<body>
    <form runat="server">
    <asp:ScriptManager ID="ScriptManager1" runat="server"></asp:ScriptManager>

    <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>

    <cc1:captcha runat="server" />

    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:05:54.797

`UpdatePanel`需要在`servercontrol`at[`CreateChildControls`](http://msdn.microsoft.com/en-us/library/system.web.ui.control.createchildcontrols.aspx)函数中添加。这样它就可以注册`ScriptManager`为更新面板。在`RenderContents`函数中渲染它时，只会在 ServerControl 中添加 UpdatePanel 的 html。

# ibm-midrange - 如何为给定条件的字段选择最大值？

> ID：11425224
> 
> 赞同：0
> 
> 时间：2012-07-11T03:46:04.140
> 
> 标签：ibm-midrange, rpgle, rpg

我正在做考勤系统，其中我的物理文件（PF）具有以下字段：

```
User ID(key field),Date,Time In,Time Out
...... 
```

问题是，我尝试选择特定的用户 ID 和日期以及当天的最高超时值。并将超时值移动到我程序中的变量中。

RPGLE 源代码会是什么样子？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:03:18.890

传统的方法是构建一个以用户 ID、日期和超时为键的逻辑文件，日期和超时降序。然后我认为只是使用用户 ID 和今天的日期作为部分键链接到逻辑将为您提供最新记录。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T13:44:09.133

嵌入式 SQL 也可以：

```
SELECT MAX(timeout) 
INTO :outTime  
FROM PF 
WHERE userid = :selected_user_id
AND date = :selected_date` 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-14T00:36:47.113

假设您有一个员工档案和一个工作时间档案，如您所描述的。并且您想要报告给定日期每位员工的最早上班时间和最晚时间超时时间。

因此，您可能有一个读取员工文件的循环，并且在该循环中，您可以链接到@Martin 描述的逻辑以获得最后一次超时，以及另一个以递增时间为键的逻辑以获得那里的最小值.

使用 SQL，您可以在一次读取（SQL 中获取）中获取员工文件信息，以及最早的时间和最晚的时间。它大大简化了循环内的代码，不是吗？

所以这是伪代码的基本流程：

```
Declare a cursor with your SQL statement
Open the cursor
Fetch a row from the cursor
DoWhile status is ok
    Process your data
    Fetch the next record
EndDo
Close the cursor 
```

看起来不会太吓人吧？所以让我们看看代码可能是什么样子。当然，在 SQL 中可以做的方法不止一种，但让我们从一个简单的 SQL Select 语句开始。当您在 SQL 中使用 RPG 变量时，您需要在它们前面加上一个冒号 (':')。

```
 WITH h as
    ( SELECT empID, min(timein) as firstin, max(timeout) as lastout
        FROM workhours
        WHERE workdate = :myvariable
        GROUP BY empID
    )
    SELECT e.lastname, e.firstname, e.empnbr, h.firstin, h.lastout
      FROM h
      JOIN employees as e   on h.empID = e.empnbr
      ORDER BY e.lastname, e.firstname, e.empnbr; 
```

嗯，这是一个相当不错的 SELECT 语句，是吗？发生了很多事情。

但它分为两部分。第一部分是一个名为 h 的表表达式，我们在其中获取每个员工在该日期的时间。第二部分列出了我们想要的所有结果字段，这些字段取自表表达式 h 和员工文件，我们可以匹配两个文件中的员工编号。这些行将按姓氏、名字和员工编号排序给我们。

所以让我们把它放在RPG中。

```
EXEC-SQL  DECLARE CURSOR C1 AS
              WITH h as
              ( SELECT empID, min(timein) as firstin, max(timeout) as lastout
                  FROM workhours
                  WHERE workdate = :myvariable
                  GROUP BY empID
              )
              SELECT e.lastname, e.firstname, e.empnbr, h.firstin, h.lastout
                FROM h
                JOIN employees as e   on h.empID = e.empnbr
                ORDER BY e.lastname, e.firstname, e.empnbr
                FOR READ ONLY;
EXEC-SQL  OPEN C1;
EXEC-SQL  FETCH FROM C1
            INTO :lname, :fname, :emp, :firsttime, :lasttime;
DoW &subst(SQLState,1,2) = '00';
    //
    // perform processing here
    //
    EXEC-SQL  FETCH FROM C1
                INTO :lname, :fname, :emp, :firsttime, :lasttime;
enddo;
EXEC-SQL  CLOSE C1; 
```

现在您可能首先犹豫游标中的 SELECT 语句正在完成多少工作。但是通过在那里完成所有这些操作，您已经简化了 I/O，并让 SQL 优化器发挥其魔力，以找到将数据提供给您的最快方法。

# php - 如何在 php 中编写这个正则表达式

> ID：11425226
> 
> 赞同：-2
> 
> 时间：2012-07-11T03:46:38.020
> 
> 标签：php, regex

问题似乎很简单，我需要一个正则表达式来匹配一些类似这样的短语：

“/产品/12/节目”

我知道它可能喜欢

“/产品/\d+/显示”

但是当应用于php函数preg_match时它失败了，任何想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T03:48:55.573

```
$your_string_to_match =  "/product/12/show";

if (preg_match('#^/product/\d+/show#', $your_string_to_match)) {
  // matched
} 
```

# css - 覆盖 CSS 媒体查询

> ID：11425230
> 
> 赞同：23
> 
> 时间：2012-07-11T03:47:09.173
> 
> 标签：css, twitter-bootstrap, media-queries

我每天都在处理一个使用我不喜欢的 CSS 媒体查询的页面；我宁愿使用整页（其中大多数与 Twitter Bootstrap 菜单在窄于 768 像素时折叠有关）。

有没有办法用 CSS 覆盖 Bootstrap 的媒体查询？最好不要定义我自己的媒体查询来单独覆盖所有规则，因为我觉得这需要很长时间。

**编辑：**我无法控制源代码，否则我只会杀死引导响应代码。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T03:56:08.553

你为什么不首先删除它们？

如果不能，您仍然可以使用规则覆盖 CSS 声明：

*   具有相同选择器优先级并位于 MQ 块**之后**
*   具有比 MQ 块中的规则**更高的选择器优先级**
*   **`!important`**介于值和分号之间的

```
 /* one id, one class AND one element => higher priority */
    #id element.class { property: value2; }

    /* !important will nuke priorities. Same side effects as a nuke,
       don't do that at home except if you've tried other methods */
    #id .class { property: value2 !important; }

    @media(blah) {
      /* Overridden. Thrice. */
      #id .class { property: value1; }
    }

    /* same selector, same everything except it comes after the one in @media?
       Then the latter is applied.
       Being in a @media doesn't give any more priority (but it won't be applied
       everywhere, depending on "blah", that's the point of MQ) */
    #id .class { property: value2; } 
```

在前面的示例中，块外的任何声明`@media`都将覆盖块内的声明，例如，应用 value2 而不是 value1 的原因有 3 个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T20:14:33.817

也想覆盖 bootstraps responsive.css。

我有一半的网站要使用默认的 responsive.css，而另一半的媒体查询会导致布局错误，因此我想将其删除。

根据我的研究**css 不允许删除媒体查询**。

所以我会去复制 responsive.css 并删除媒体查询。如果您无权访问源，则覆盖可能是唯一的选择。

# android - Android 跨平台

> ID：11425231
> 
> 赞同：0
> 
> 时间：2012-07-11T03:47:21.950
> 
> 标签：android, ios, cross-platform

我想了解更多关于跨平台的信息。我目前正在撰写我的论文，并决定制作一个`Android Application`但并非所有目标用户都使用`Android device`的 . 所以，我们想出了一个跨平台安卓应用程序的想法。

我读过相同的主题，但对我来说不太好。[iOS/Android跨平台开发](https://stackoverflow.com/questions/6171128/ios-android-cross-platform-development)。我想知道除了使用链接中讨论的框架之外是否还有其他方法。

**我想知道跨平台 Android 应用程序的最佳/最短方式是什么？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T03:55:25.877

在我看来，跨平台工具根本不是一个好主意。Android 是 Java，iOS 是 Objective C。Android 可以使用 NDK 来使用 C/C++ 库，所以理论上，如果你的大部分代码都是用 C/C+ 编写的，那么它可以在双方都使用。我认为两个本地人更合适。研究 NDK 看看什么可以在这两种设备上运行。假设您将应用程序构建为 C++ 库，但 UI 交互除外。那么理论上图书馆应该在双方都工作。然而，C/C++ 在 iOS 上比在 android 上容易得多。

此外，它实际上取决于您的应用程序将具有的依赖项。假设您想使用一个库，但它仅在 Java 或 C++ 中可用，这对您的决定有何影响。

您还可以考虑设计您的应用程序，使其仅捕获设备上的数据，并且数据的实际处理发生在 Web 服务中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T04:20:14.433

另一种方法是使用 Mobile Web HTML5 框架，例如[Phonegapp](http://docs.phonegap.com/en/1.9.0/guide_getting-started_index.md.html)、[Sencha touch](http://www.sencha.com/products/touch/)等。
虽然 web 技术的性能不如原生，但它是一个有用的东西，你可以尝试。
请参阅[选择移动 Web HTML5 框架](https://stackoverflow.com/questions/5063117/choosing-mobile-web-html5-framework)和[http://operationproject.com/2011/adventures-in-html5-part-one/](http://operationproject.com/2011/adventures-in-html5-part-one/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T04:45:16.867

Android 应用程序是 apk 文件，基本上是 zip 文件，其中包含 dex/odex 文件和您可能希望添加的所有其他资源。但我认为您可以使用任何编码语言进行开发，只要您有 IDE 将您的代码转换为 apk和 dex 。最重要的是你的编程语言必须支持相应的 api 或者必须有类似交叉编译的东西。谷歌使用 Java 的原因是他们觉得这样做很方便（在谷歌 v/s 甲骨文案例中阅读)

就我个人而言，我觉得跨平台很好，因为它增加了开发人员的基础和对系统（这里是 Android）的理解。我认为同样的类比也适用于其他系统。

# java - 使用 Date 获取昨天的日期

> ID：11425236
> 
> 赞同：142
> 
> 时间：2012-07-11T03:47:46.633
> 
> 标签：java, date, datetime, simpledateformat

以下函数产生今天的日期；我怎样才能让它只产生昨天的日期？

```
private String toDate() {
        DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
        Date date = new Date();    
        return dateFormat.format(date).toString();
} 
```

这是输出：

```
2012-07-10 
```

我只需要像下面这样的昨天的日期。是否可以在我的功能中执行此操作？

```
2012-07-09 
```

* * *

## 回答 #1

> 赞同：352
> 
> 时间：2012-07-11T03:51:08.317

**更新**

最近使用[JSR-310](https://jcp.org/en/jsr/detail?id=310)对日期时间 API 进行了改进。

```
Instant now = Instant.now();
Instant yesterday = now.minus(1, ChronoUnit.DAYS);
System.out.println(now);
System.out.println(yesterday); 
```

[https://ideone.com/91M1eU](https://ideone.com/91M1eU)

**过时的答案**

你减去了错误的数字：

改用`Calendar`：

```
private Date yesterday() {
    final Calendar cal = Calendar.getInstance();
    cal.add(Calendar.DATE, -1);
    return cal.getTime();
} 
```

然后，将您的方法修改为以下内容：

```
private String getYesterdayDateString() {
        DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
        return dateFormat.format(yesterday());
} 
```

* * *

**看**

*   [IDEOne 演示](http://ideone.com/Suhyv)

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2014-08-31T23:00:51.767

您可以执行以下操作：

```
private Date getMeYesterday(){
     return new Date(System.currentTimeMillis()-24*60*60*1000);
} 
```

Note: if you want further backward date multiply number of day with 24*60*60*1000 for example:

```
private Date getPreviousWeekDate(){
     return new Date(System.currentTimeMillis()-7*24*60*60*1000);
} 
```

Similarly, you can get future date by adding the value to System.currentTimeMillis(), for example:

```
private Date getMeTomorrow(){
     return new Date(System.currentTimeMillis()+24*60*60*1000);
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-07-11T04:02:35.390

```
 Calendar cal = Calendar.getInstance();
   DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
   System.out.println("Today's date is "+dateFormat.format(cal.getTime()));

   cal.add(Calendar.DATE, -1);
   System.out.println("Yesterday's date was "+dateFormat.format(cal.getTime())); 
```

使用日历 API

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-07-11T04:07:23.920

试试这个：

```
private String toDate() {
    DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");

    // Create a calendar object with today date. Calendar is in java.util pakage.
    Calendar calendar = Calendar.getInstance();

    // Move calendar to yesterday
    calendar.add(Calendar.DATE, -1);

    // Get current date of calendar which point to the yesterday now
    Date yesterday = calendar.getTime();

    return dateFormat.format(yesterday).toString();
} 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-07-11T04:53:45.490

试试这个;

```
 public String toDate() {
       DateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd HH:mm:ss");
       Calendar cal = Calendar.getInstance();
       cal.add(Calendar.DATE, -1);
       return dateFormat.format(cal.getTime());
  } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-07-11T03:54:21.853

没有直接的函数来获取昨天的日期。

要获得昨天的日期，您需要使用`Calendar`by 减去`-1`.

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-07-11T03:55:04.597

从您的代码更改：

```
private String toDate(long timestamp) {
    Date date = new Date (timestamp * 1000 -  24 * 60 * 60 * 1000);
   return new SimpleDateFormat("yyyy-MM-dd").format(date).toString(); 
```

}

但你最好使用[calendar](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html)。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-11T03:52:48.497

```
Calendar cal = Calendar.getInstance();
   DateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd");
   System.out.println("Today's date is "+dateFormat.format(cal.getTime()));

   cal.add(Calendar.DATE, -1);
   System.out.println("Yesterday's date was "+dateFormat.format(cal.getTime())); 
```

# node.js - 为什么 node.js 不能在 child_process.stdout 上发出数据事件？

> ID：11425237
> 
> 赞同：2
> 
> 时间：2012-07-11T03:47:49.367
> 
> 标签：node.js

这是我的 Node.JS 代码

```
var rec = spawn('rec.exe');
rec.stdout.setEncoding('ascii');
rec.stdout.on('data', function (data) {
console.log(data);
    //do something
}
); 
```

我的 C++ 程序（由 Cygwin 编译）使用 printf() 向标准输出写入一些内容。

```
if(bufsize!=0&&rec[0]=='0')
    {
    printf("%s\n",rec);
    //printf("Received,write into exchange file\n");
    //fp=fopen("recvdata.txt","w");
    //fprintf(fp,"%s\n",rec);
        //fclose(fp);
} 
```

但是永远不会发出数据事件。

我确定我的 C++ 代码有问题，因为它可以与 ping 等其他命令一起使用。

然后我注意到在这种情况下，事件被发出

```
if(fd==-1)
{
    printf("Failed,again\n");
    return 0;
} 
```

这意味着当进程退出时，一切正常。但这不是我想要的。

有人能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:15:23.097

听起来您的 C++ 程序存在缓冲问题；它可能不会自动刷新`stdout`每一行的缓冲区，因此所有输出“聚集”直到它退出。我知道有一些`ioctl`设置可以用来改变它，但我早就忘记了它们是什么。搜索“stdout 缓冲”可能会带来一些有用的信息。

# javascript - Ajax 响应 xml 为空 Java 脚本

> ID：11425239
> 
> 赞同：0
> 
> 时间：2012-07-11T03:47:59.523
> 
> 标签：javascript, ajax, xmlhttprequest

小服务程序响应：

```
for (int i = 0; i < projNames.size(); i++) {   
    sb.append("<project>");
    sb.append("<projectName>" + projNames.get(i) + "</projectName>");   
    sb.append("</project>");
    res.setContentType("text/xml");
    res.setHeader("Cache-Control", "no-cache");
    System.out.println(" test="+test);
    res.getWriter().write(sb.toString());
} 
```

System.out.println 将“sb”值显示为

```
<project><projectName>sample</projectName></project><project><projectName>sample 2</projectName></project> 
```

我正在尝试检索响应 XML，但是当我检查长度时“对象值为 null”（在 IE 8 中调试）

```
function displayValues()
{
    var response;
    if (req.responseXML != null)
        alert("res xml is ther=="+ response); //displays UNDEFINED
    else
        alert("no res xml");

    response = req.responseXML.getElementsByTagName("project")[0];
    alert("child node"+response.childNodes.length); // alert is not displayed
} 
```

请赐教。谢谢

AJAX 代码：

```
<SCRIPT type="text/javascript">
var response;
var firstName;
var icdatevalue;
function getProject()
{ 
var url ="DBActionServlet?action=getProject"; 
            initRequest(url);
            req.onreadystatechange = processRequest;
            req.open("POST", url, true); 
            req.send(null);
                }
function initRequest(url) 
         {
            if (window.XMLHttpRequest) 
            {
                req = new XMLHttpRequest();
            } 
            else if (window.ActiveXObject) 
            {
                isIE = true;
                req = new ActiveXObject("Microsoft.XMLHTTP");
            }

         }

        function processRequest() 
         {
            if (req.readyState == 4) 
            {
                if (req.status == 200) 
            {

                    alert("status="+req.status);//status is shown as 200
                    displayValues(); //this function code mentioned above
                }
            }
         }

    </SCRIPT> 
```

# c++ - iOS 和 C++ MVC 策略

> ID：11425246
> 
> 赞同：0
> 
> 时间：2012-07-11T03:49:36.590
> 
> 标签：c++, objective-c, ios, model-view-controller, dependency-injection

我正在编写一个主要是 c++ ios 应用程序。

我正在使用 c++ 3d 引擎和依赖注入库。我知道我必须做一些可可来将 3d 引擎嵌入到视图中，并且我计划使用 Apple api 进行触摸输入。

为了保持最大的跨平台兼容性，我是否应该使用 MVC 方法——一种处理基本视图嵌入和手势的 Cocoa 方法，另一种处理构成应用程序主体的所有交互和数据的 C++ 方法？

是否有一个很好的 C++ MVC 库可以同时处理或非常适合组合。

我对这一切都很陌生。Apple 让使用他们的工具变得很容易，但我真的想保持代码跨平台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:40:25.047

Cocoa Touch 是一个 MVC 框架。（我假设你正在做一个 iOS 应用程序）。我认为你会创建一个 UIView 的子类来渲染你的 3d 图像并通过 UIViewController 将 3d 引擎的输入和输出粘合到视图中。

由于我从未将 C++ 与 Objective C 一起使用，因此我无法告诉您这是如何完成的。Objective C 的 Apple 实现不能跨平台移植。您可能必须在库和 Xcode 应用程序之间编写一些 shim 代码并静态链接库。

此外，如果您正在构建一个 iOS 应用程序，那么构建应用程序并将应用程序提交到应用商店有很多细节......

Xcode 文档是您的朋友。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T07:55:32.427

您不需要 MVC 方法来使代码跨平台。您只需要隔离 iOS API 调用。我建议在您的引擎和 iOS 之间创建一个接口层（该层将被 Android 等取代......）。有桥模式[http://www.codeproject.com/Articles/890/Bridge-Pattern-Bridging-the-gap-between-Interface](http://www.codeproject.com/Articles/890/Bridge-Pattern-Bridging-the-gap-between-Interface)可以解决您的任务。

# c++ - QLabel 扩展以适应一个大图像，但不能缩小以适应小图像

> ID：11425248
> 
> 赞同：1
> 
> 时间：2012-07-11T03:49:43.790
> 
> 标签：c++, qt, qt4

我是 QT 新手，我想使用 QT 开发一个图像手动注释工具，它可以加载图像并允许用户对其进行注释。我查看了图像查看器演示，并决定使用 QLabel 来显示图像，但问题就在这里。我希望我的主窗口（仅用于显示图像，工具栏是浮动的）可以自动适应加载图像的大小。我将图像浏览器的代码更改为：

```
ImageViewer::ImageViewer()
{
    imageLabel = new QLabel;
    imageLabel->setBackgroundRole(QPalette::Base);
    imageLabel->setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Expanding);
    imageLabel->setScaledContents(false);
    setCentralWidget(imageLabel);

    createActions();
    createMenus();

    setWindowTitle(tr("Image Viewer"));
    resize(sizeHint());
}

void ImageViewer::open()
{

    QString fileName = QFileDialog::getOpenFileName(this,
                                    tr("Open File"), QDir::currentPath());
    if (!fileName.isEmpty()) {
        QImage image(fileName);
        if (image.isNull()) {
            QMessageBox::information(this, tr("Image Viewer"),
                                     tr("Cannot load %1.").arg(fileName));
            return;
        }

        imageLabel->setPixmap(QPixmap::fromImage(image));
        imageLabel->adjustSize();

    }
} 
```

使用此代码，主窗口（QLabel）可以扩展以适应大图像，但是当我加载小尺寸图像时，它无法缩小到该图像的大小。这里出了什么问题？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-04-13T14:19:30.567

[对于仍在寻找答案的人，正如此处](https://forum.qt.io/topic/58749/solved-how-to-shrink-qmainwindow-with-a-qlabel-including-an-image/3)所指出的，您需要设置最小尺寸属性：

```
 imageLabel->setMinimumSize(1, 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T14:58:11.480

我相信您的问题是您正在设置的大小策略，请尝试使用 QSizePolicy::Minimum 而不是 QSizePolicy::Expanding。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-22T13:29:08.623

为了完整起见，将标签的size Policy设置为“Maximum”是最快的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-06T08:37:39.787

只需尝试以下代码：

```
layout.setSizeConstraint(QLayout::SetFixedSize); 
```

# ios - 如何更改 UIScrollView 的灵敏度？

> ID：11425249
> 
> 赞同：2
> 
> 时间：2012-07-11T03:49:45.503
> 
> 标签：ios, uiscrollview

我有这个，里面`UIScrollView`有`UIView`s。里面`UIView`有一个`UIImageView`可以拖进拖出的`UIScrollView`。问题是当我试图将150 毫秒内的滑动速度拖出时，它`UIImageView`会变得活跃并且无法拖出（对角/水平滑动）。`UIScrollView``UIScrollView``UIImageView`

我所知道的是，`UIScrollView`在第一次触摸事件期间启动一个计时器，当触摸结束时（在触摸持续时间的 150 毫秒内），滚动视图将开始滚动。有没有办法改变 150 毫秒的触摸持续时间？或者当用户对角滑动时我可以禁用触摸事件吗？

谢谢！

# php - PHP cURL 发布失败或没有数据返回我哪里出错了？

> ID：11425250
> 
> 赞同：0
> 
> 时间：2012-07-11T03:49:53.743
> 
> 标签：php, soap, curl

这是我的一点 php，试图弄清楚为什么我没有`$result`访问它产生的 URL，这将给我一个基于 get 或 post 的有效 JSON 结果。所以我认为我的问题是我如何使用 cURL。所以我需要有人来处理这个。

```
 //open connection
        $ch = curl_init();
        //set the url, number of POST vars, POST data
        curl_setopt($ch,CURLOPT_URL,$url);
        curl_setopt($ch,CURLOPT_POST,count($params));
        curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);
        curl_setopt($ch,CURLOPT_RETURNTRANSFER, true);
        //execute post
        $result = curl_exec($ch);           
                    if(!$result)
                    {
                        $error = curl_error($ch); echo $error; return false;
                    }
        //close connection
        curl_close($ch);

        //return json_decode($result);
                    echo $result; 
```

***上面的编辑代码来自原始帖子***

`$error`不报告任何内容。我将返回 json... 更改为 echo 以查看它是否在执行任何操作，并打印出 ' **Disallowed Key Characters.** ' 屏幕上。

***编辑 2***

```
$url = http://domain.com/search
$params = array('q'=>'search,term') 
```

`$params`被放入一个 foreach 循环，该循环构建`$fields_string`

```
$fields_string = '?';
foreach($params as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
$fields_string = substr($fields_string,0,-1); 
```

fields_string 最终看起来像`?ll=37.2790669,-121.874722&range=10`（对于我目前正在做的事情，我可以传递 1-12 个可选参数，这就是为什么我要按我的方式构建它的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:57:44.550

尝试添加错误检查以确保`curl_exec`成功执行并在服务器上获取有意义的错误消息。

就像是：

```
 $ch = curl_init();
    //Make string url safe with urlencode
    curl_setopt($ch,CURLOPT_URL,urlencode($url));
    curl_setopt($ch,CURLOPT_POST,count($params));
    curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);
    curl_setopt($ch,CURLOPT_RETURNTRANSFER, true);
    $result = curl_exec($ch);
    if(!$result) {
        $error = curl_error();
        //$error now contains the error thrown when curl_exec failed to execute
        //echo this to terminal or to an error box in the browser?
    }
    curl_close($ch);

    return json_decode($result); 
```

如果您仍然需要帮助，请在此处发布您产生的错误。此外，这里是我利用的两个功能的手册页：

[http://www.php.net/manual/en/function.curl-error.php](http://www.php.net/manual/en/function.curl-error.php)

[http://www.php.net/manual/en/function.curl-exec.php](http://www.php.net/manual/en/function.curl-exec.php)

[http://php.net/manual/en/function.urlencode.php](http://php.net/manual/en/function.urlencode.php)

-干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T05:17:17.740

```
//set POST variables
$url = "http://example.com/edsym/registration.php"; // URL to calc.cgi
$fields = array(
'namee'=>urlencode($name),
'city'=>urlencode($city),
'phh'=>urlencode($ph),
'emaill'=>urlencode($email),
'msg1'=>urlencode("Message type")
                );
$fields_string=" ";
//url-ify the data for the POST
foreach($fields as $key=>$value) { $fields_string .= $key.'='.$value.'&'; }
rtrim($fields_string,'&');

//open connection
$ch = curl_init();

//set the url, number of POST vars, POST data
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_POST,count($fields));
curl_setopt($ch,CURLOPT_POSTFIELDS,$fields_string);

//execute post
$result = curl_exec($ch);

//close connection
curl_close($ch); 
```

我正在使用 curl 来发布这样的帖子及其工作

# c++ - SIGSEGV 动态分配内存以接收 FTP 服务器的 LIST 响应时

> ID：11425251
> 
> 赞同：1
> 
> 时间：2012-07-11T03:50:09.720
> 
> 标签：c++, memory-management, segmentation-fault, c-strings

我正在用 C++ 构建一个 FTP 客户端供个人使用和学习经验，但是在分配内存以存储 LIST 响应时遇到了问题。我用于 FTP 请求的库是 libcurl，它会在收到来自服务器的响应时调用以下函数：

```
size_t FTP_getList( char *ptr, size_t size, size_t nmemb, void *userdata) {
    //GLOBAL_FRAGMENT is global
    //libcurl will split the resulting list into smaller approx 2000 character
    //strings to pass into this function so I compensate by storing the leftover
    //fragment in a global variable.
    size_t fraglen = 0;
    if(GLOBAL_FRAGMENT!=NULL) {
        fraglen = strlen(GLOBAL_FRAGMENT);
    }
    size_t listlen = size*nmemb+fraglen+1;
    std::cout<<"Size="<<size<<" nmemb="<<nmemb;
    char *list = new char[listlen];
    if(GLOBAL_FRAGMENT!=NULL) {
        snprintf(list,listlen,"%s%s",GLOBAL_FRAGMENT,ptr);
    } else {
        strncpy(list,ptr,listlen);
    }
    list[listlen]=0;
    size_t packetSize = strlen(list);
    std::cout<<list;
    bool isComplete = false;
    //Check to see if the last line is complete (i.e. newline terminated)
    if(list[size]=='\n') {
        isComplete = true;
    }
    if(GLOBAL_FRAGMENT!=NULL) {
        delete[] GLOBAL_FRAGMENT;
    }
    GLOBAL_FRAGMENT = GLOBAL_FTP->listParse(list,isComplete);
    delete[] list;
    //We return the length of the new string to prove to libcurl we
    //our function properly executed
    return size*nmemb;
} 
```

上面的函数调用下一个函数将返回的每一行拆分为单独的字符串以进行进一步处理：

```
char* FTP::listParse(char* list, bool isComplete) {
    //std::cout << list;
    //We split the list into seperate lines to deal with independently
    char* line = strtok(list,"\n"); 
    int count = 0;
    while(line!=NULL) {
        count++;
        line = strtok(NULL,"\n");
    }
    //std::cout << "List Count: " << count << "\n";
    int curPosition = 0;
    for(int i = 0; i < count-1 ; i++) {
        //std::cout << "Iteration: " << i << "\n";
        curPosition = curPosition + lineParse((char*)&(list[curPosition])) + 1; 
    }
    if(isComplete) {
        lineParse((char*)&(list[curPosition]));
        return NULL;
    } else {
        int fraglen = strlen((char*)&(list[curPosition]));
        char* frag = new char[fraglen+1];
        strcpy(frag,(char*)&(list[curPosition]));
        frag[fraglen] = 0;
        return frag;
    }
} 
```

然后上面的函数调用下面的函数将一行中的各个条目拆分为单独的标记：

```
int FTP::lineParse(char *line) {
    int result = strlen(line);
    char* value = strtok(line, " ");
    while(value!=NULL) {
        //std::cout << value << "\n";
        value = strtok(NULL, " ");
    }
    return result;
} 
```

该程序适用于相对较小的列表响应，但是当我尝试通过获取包含约 10,000 个文件的远程目录的列表来对其进行压力测试时，我的程序抛出了一个 SIGSEGV ...我在 gdb 中使用了回溯，发现段错误发生在行`delete[] GLOBAL_FRAGMENT;' and`删除[]列表；`in`每次分配它们时， FTP_getList `. Am I not properly deleting these arrays? I am calling`delete[]` 恰好一次，所以我不明白为什么它不能正确分配内存......

`NULL`附带说明：在尝试删除数组之前是否有必要检查数组是否存在？

另外，我知道使用 STD::Strings 会更容易做到这一点，但我正在尝试学习 c 风格的字符串作为练习，它崩溃的事实是我需要练习的一个完美例子，我也将改变将这些存储在动态分配的缓冲区中的代码，仅当新的 ptr 大小大于以前的长度时才会重新分配，但我想弄清楚为什么当前代码不能首先工作。：-） 任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T04:08:09.003

在这段代码中

```
size_t listlen = size*nmemb+fraglen+1;
std::cout<<"Size="<<size<<" nmemb="<<nmemb;
char *list = new char[listlen];
if(GLOBAL_FRAGMENT!=NULL) {
    snprintf(list,listlen,"%s%s",GLOBAL_FRAGMENT,ptr);
} else {
    strncpy(list,ptr,listlen);
}
list[listlen]=0; 
```

您正在超出`list`缓冲区。您已经分配了字节，但是您在最后分配的字节`listlen`之后写入了一个值。`0`这会调用未定义的行为。更实际地说，它可能会导致堆损坏，这可能会导致您观察到的那种错误。

我没有看到你打电话的方式有任何问题`delete[]`。

`NULL`删除指针是完全安全的。

# php - JSON 响应不断返回未定义（ajax 文件上传）

> ID：11425254
> 
> 赞同：0
> 
> 时间：2012-07-11T03:50:18.767
> 
> 标签：php, javascript, ajax, json, file-upload

我目前正在使用 Valum 的 Ajax 文件上传器进行同页文件上传。对于我的脚本，我需要将最终文件路径（上传后）传回客户端并将其存储在一个变量中，但是，对于 responseJSON ['filename']，我不断得到“未定义”。我尝试了很多不同的解决方案，但似乎没有任何效果（将数据类型从 json 更改为文本，使用 PHP 发送响应的方式等）

一定有一些简单的东西我在这里俯瞰......

欢迎所有帮助。谢谢！

编辑：JS 在这里：http: [//jsfiddle.net/acw9V/](http://jsfiddle.net/acw9V/)对于 PHP 部分，我在 Valum 的 zip 存档中使用默认的 PHP 代码。

更新：仍然没有运气......继续从 responseJSON 返回未定义。我想知道是否有某种方法可以返回在 PHP 中回显的任何消息，也许我可以使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-04T06:24:44.120

我认为 'responseJSON' 实际上是**STRING**，而不是数组。（假设你只是在 php 中回显你的输出并且你不能回显数组）要被视为数组，在接收后，responseJSON 应该是 eval-ed。

var data = eval(responseJSON);

（最终： var data = eval ("(" + responseJSON + ")"); ）

那么 data['filename'] 应该包含上传的文件名（如果这是在 php 中指定的）

# facebook - 代码点火器重定向（）在 IE9 中不起作用

> ID：11425255
> 
> 赞同：0
> 
> 时间：2012-07-11T03:50:32.807
> 
> 标签：facebook, codeigniter, authentication, session, redirect

我正在尝试使用 Facebook 登录我的网站，它适用于除 IE9 之外的所有浏览器！

我的函数一直到 'redirect('home');' 但随后停止并停留在当前页面上。所以所有的会话数据都设置好了，用户登录到 Facebook，但他们留在登录页面上而没有被重定向。

这是我的代码：

```
public function fb_login()
{
    if($this->fb_connect->user_id){
        $this->session->unset_userdata('logged');
        $this->session->unset_userdata('user_data');

        // Check if the user had previously logged in using facebook connect
        $fb_user = $this->fb_connect->user;
        $user_details = $this->Model->check_fb_user($fb_user);
        // This will then return their user details

        if($user_details['status'] == 0) redirect('account');

        $user_data['raw_details'] = $user_details;
        $user_data['fb_id'] = $this->fb_connect->user_id;
        $user_data['join_date'] = date( 'dS F, Y', strtotime($user_details['date_added']) );
        $user_data['location'] = $user_details['user_location'];
        $user_data['name'] = $user_details['user_fname'] . ' ' . $user_details['user_lname'];
        $user_data['display_name'] = $user_details['user_display_name'];
        $user_data['fb_dp'] = 'https://graph.facebook.com/'.$user_details['fb_id'].'/picture';

        $this->session->set_userdata('user_data',$user_data);

        if($this->session->userdata('referer')){
            $referer = $this->session->userdata('referer');
            $this->session->unset_userdata('referer');

            redirect($referer);
        }else{
            redirect('home');
        }

    }else{
                    error_log('148');
        redirect('account/login');
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T21:20:22.520

在此 URL 的 CI 文档中，您可以尝试可选参数。

[http://codeigniter.com/user_guide/helpers/url_helper.html](http://codeigniter.com/user_guide/helpers/url_helper.html)

> 可选的第二个参数允许您在“位置”方法（默认）或“刷新”方法之间进行选择。定位速度更快，但在 Windows 服务器上有时可能会出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:21:14.663

我不确定，添加 base_url()

> 重定向（base_url（）。'帐户/登录'）；

# php - 我应该如何在 PHP 中生成 Minecraft 皮肤的等距图像？

> ID：11425264
> 
> 赞同：1
> 
> 时间：2012-07-11T03:51:38.723
> 
> 标签：php, 3d, isometric

我正在尝试生成玩家头部的 3D 等距视图，但我不确定 PHP 对这种类型的操作或任何可能更适合的外部库有什么样的支持。

基本上我需要用这样的网[（](http://minotar.net/skin/steve.png)这里[是](http://www.minecraftwiki.net/images/0/01/Skinzones.png)一个显示每个部分映射到什么的图表）并从中制作一个 3D 头部。我还需要包括“头部附件”部分，它应该比实际头部稍大/偏移。

有谁知道我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-13T06:19:24.050

首先，在我看来，这将是一项复杂的工作。

您提到的[http://www.minecraftwiki.net/images/0/01/Skinzones.png](http://www.minecraftwiki.net/images/0/01/Skinzones.png)文件是平面文件，但您必须将其转换为 ISOMETRIC 3D 外观，因此您必须扭曲图像

例如看下面的图片

![3D盒子](../Images/6af5463f103c29bc7a9e68825ccea750.png) ![盒子正面](../Images/a6d4758e4e6fdaef42488ce7617cf4ff.png) ![盒子左侧](../Images/ab8932de0bf73a1f53a8d0d421e43d80.png)

所以你可以看到 3D 盒子图像是从其他图像的片段中创建的，逻辑是为平面图像添加透视图并将它们连接起来。但由于它是 2D，我们将其称为图像失真。

不幸的是，与 PHP 捆绑在一起的 GD 库还不够先进，无法让您做这些事情。

你必须使用像 Image Magic 这样的其他库，这个链接是使用扭曲函数的教程[http://www.imagemagick.org/Usage/distorts/](http://www.imagemagick.org/Usage/distorts/)

其次是图片的处理，你可以实时处理图片，但是会消耗服务器上的大量资源，所以建议你使用预处理过的图片，而不是每次都处理。

要生成等距图像，您必须自己编写代码，并且可能需要根据图像的大小对每个图像字符进行更改。但是，当您编写代码时，它会很容易。

我的建议是编写一次自己的代码，然后为每个角色更改它，并将处理后的图像保存在精灵中，并在添加播放功能时使用它们。

也看看这个链接

[http://www.fmwconcepts.com/imagemagick/index.php](http://www.fmwconcepts.com/imagemagick/index.php)

# python - python请求：如何定义OR参数

> ID：11425265
> 
> 赞同：1
> 
> 时间：2012-07-11T03:51:49.320
> 
> 标签：python, parameters, logical-operators, python-requests

我在 python 中使用 requests 模块来构造 API 查询的 URL。以下是我正在使用的代码：

```
Params = {'q':'3145','organism':'9606'}
results = requests.get("http://www.pathwaycommons.org/pc2/search.xml",params=Params)
print results.url  #http://www.pathwaycommons.org/pc2/search.xml?q=3146&organism=9606 
```

我想向 q 参数（q = 3145 或 177）添加 OR 条件。最终的 url 将是`http://www.pathwaycommons.org/pc2/search.xml?q=3146|177&organism=9606`. 如果我使用`Params = {'q':['3145','177'],'organism':'9606'}`，输出 url 是`"http://www.pathwaycommons.org/pc2/search.xml?q=3146&q=177&organism=9606"`. 我还没有找到有关如何为 OR 条件定义参数字典的任何信息。有人可以给出一些想法吗？

先感谢您。

温迪

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T03:55:22.343

这是我第一次看到这种“OR”语法，所以我不确定它是否是标准的。

无论如何，您*可以*只`join`使用参数列表来创建字符串，如下所示：

```
params = {
  'q': '|'.join(['3145','177']),
  'organism': '9606'
} 
```

# sql - 在同一个查询中加入和计数，无需重复计算字段

> ID：11425272
> 
> 赞同：0
> 
> 时间：2012-07-11T03:52:58.330
> 
> 标签：sql, sql-server, sql-server-2008

我正在按照特定标准加入一些表格。我想知道是否还可以显示从联接中排除的那些记录的计数？

我的查询：

```
SELECT...

FROM         dbo.QuickLabDump 
             ...

             left outer join hermes.lom.dbo.lom_specimen Lom
              on QuickLabDump.[specimen id] = lom.specimen
              LEFT outer join SalesDWH.dbo.Isomers Isomers
              on QuickLabDump.[specimen id] = Isomers.[accession id]

WHERE     lom.specimen is null
              and isomers.[accession id] is null... 
```

如您所见，我有两个左外连接。

除了这个查询的结果，我还想返回那些被排除的记录`hermes.lom.dbo.lom_specimen`的计数。`SalesDWH.dbo.Isomers`

我如何获得排除字段的计数？

这是完整的查询：

```
USE [SalesDWH]
GO

/****** Object:  View [dbo].[TurnAround]    Script Date: 07/10/2012 20:46:40 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

ALTER VIEW [dbo].[TurnAround]
AS
SELECT     dbo.QuickLabDump.[Specimen ID], DATEPART(yyyy, dbo.QuickLabDump.[Date Entered]) AS [Year Entered],
DATEPART(yyyy, dbo.QuickLabDump.[Date Completed]) AS [year completed],

 CAST(CAST(dbo.QuickLabDump.[Date Entered] AS DATE) 
                      AS DATETIME) + CAST(dbo.QuickLabDump.[Time Entered] AS TIME) AS [DateTime Entered], CAST(CAST(dbo.QuickLabDump.[Date Completed] AS DATE) AS DATETIME) 
                      + CAST(dbo.QuickLabDump.[Time Completed] AS TIME) AS [DateTime Completed], dbo.QuickLabDump.[Practice Code] AS [QL Practuce Code], 
                      dbo.QLMLISMapping.[MLIS Practice ID], DATEPART(m, dbo.QuickLabDump.[Date Entered]) AS [Month Entered], 
                      DATEPART(m, dbo.QuickLabDump.[Date Completed]) AS [Month Completed],
                      ROUND(CAST(DATEDIFF(mi, 
                      CAST(CAST(dbo.QuickLabDump.[Date Entered] AS DATE) AS DATETIME) + CAST(dbo.QuickLabDump.[Time Entered] AS TIME), 
                      CAST(CAST(dbo.QuickLabDump.[Date Completed] AS DATE) AS DATETIME) + CAST(dbo.QuickLabDump.[Time Completed] AS TIME)) AS FLOAT) / 60, 0) AS TAT, 
                      ROUND(CAST(DATEDIFF(mi, CAST(CAST(dbo.QuickLabDump.[Date Entered] AS DATE) AS DATETIME) + CAST('9:00AM' AS TIME), 

                      CAST(CAST(dbo.QuickLabDump.[Date Completed] AS DATE) AS DATETIME) 
                      + CAST(dbo.QuickLabDump.[Time Completed] AS TIME)) AS float) / 60, 0) 

                      AS [Hours TurnAround Since 9AM], TAT9AMStateAdjusted=                   

                      ROUND(CAST(DATEDIFF(mi, CAST(CAST(dbo.QuickLabDump.[Date Entered] AS DATE) AS DATETIME) 
                      + CAST('9:00AM' AS TIME),                                            
                      CAST(CAST(dbo.QuickLabDump.[Date Completed] AS DATE) AS DATETIME) 
                      + CAST(dbo.QuickLabDump.[Time Completed] AS TIME)) AS float) / 60, 0)                         

                      +dbo.adjustedtime.timedifference
                      ,dbo.QuickLabDump.[Order Count], CONVERT(VARCHAR(8), DATEADD(D, - (1 * DATEPART(dw, dbo.QuickLabDump.[Date Entered])) + 6,
                       dbo.QuickLabDump.[Date Entered]), 1) AS [Week Ending]
FROM         dbo.QuickLabDump 
             INNER JOIN dbo.QLMLISMapping 
             ON dbo.QuickLabDump.[Practice Code] = dbo.QLMLISMapping.[Quicklab ID]
             left outer join dbo.AccountState
             on dbo.QuickLabDump.[Practice Code]=dbo.AccountState.[Account]
             left outer join dbo.AdjustedTime 
             ON dbo.AccountState.[state]=dbo.adjustedtime.[state]

             left outer join hermes.lom.dbo.lom_specimen Lom
              on QuickLabDump.[specimen id] = lom.specimen
              LEFT outer join SalesDWH.dbo.Isomers Isomers
              on QuickLabDump.[specimen id] = Isomers.[accession id]

WHERE     lom.specimen is null
              and isomers.[accession id] is null

              and (dbo.QuickLabDump.[Practice Code] NOT LIKE 'test%') 
              AND (dbo.QuickLabDump.[Specimen ID] NOT LIKE 'of%') 
              AND (dbo.QuickLabDump.Outcome <> 'rejected')
GROUP BY dbo.QuickLabDump.[Specimen ID], dbo.QuickLabDump.[Date Entered], dbo.QuickLabDump.[Time Entered], dbo.QuickLabDump.[Date Completed], 
                      dbo.QuickLabDump.[Time Completed], dbo.QuickLabDump.[Practice Name], dbo.QuickLabDump.[Practice Code], dbo.QuickLabDump.[Order Count], 
                      dbo.QLMLISMapping.[MLIS Practice ID],dbo.adjustedtime.timedifference
HAVING      (dbo.QuickLabDump.[Order Count] = MAX(dbo.QuickLabDump.[Order Count])) OR
                      (dbo.QuickLabDump.[Order Count] IS NULL)

GO 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:25:06.750

你在找这个吗？

```
SELECT      ...,
            (
              SELECT COUNt(*) FROM hermes.lom.dbo.lom_specimen WHERE specimen = lom.specimen
             ) AS ColCount

FROM         dbo.QuickLabDump    
             left outer join hermes.lom.dbo.lom_specimen Lom   
              on QuickLabDump.[specimen id] = lom.specimen   
              LEFT outer join SalesDWH.dbo.Isomers Isomers   
              on QuickLabDump.[specimen id] = Isomers.[accession id]   
WHERE     lom.specimen is null   
              and isomers.[accession id] is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T04:25:36.660

在没有 WHERE 子句的情况下运行相同的查询并使用 FULL OUTER JOIN 将为您提供可选 Universe 中的所有行。

# java - 向 Java Swing 容器添加动画/过渡

> ID：11425274
> 
> 赞同：9
> 
> 时间：2012-07-11T03:53:04.190
> 
> 标签：java, swing, animation

我只是想知道是否有 Java 库允许在 Java Swing 容器之间进行平滑转换。

假设我有一个带有单个 JFrame 的 Java GUI 应用程序。根据用户操作，我想更改 JFrame 中包含的 JPanel。现在，我可以做到这一点。然而，这种变化是瞬时的。我想做的是有一个缓慢的过渡/动画，这样用户的认知就不会太难。

**具体示例：**

假设我拥有的 JFrame`frame`有 2 个按钮，我有两个 JPanel`panel1`和`panel2`. 根据用户单击的按钮，我会将 替换`frame`为`panel1`或`panel2`。但是，我希望这种变化是缓慢的/动画的（不管你怎么称呼它），`fade-in`本身就是一种效果。所以我的问题是

**是否有一些 Java 库允许这种转换？**

如果没有，是否有其他桌面开发语言可以用于这种转换。我已经知道像 JQuery 这样的 Javascript 框架允许这样做。但是，我正在寻找桌面开发（如果不是 Java，那么其他任何东西也可以）。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-22T15:24:39.703

类似的东西？

![在此处输入图像描述](../Images/bb70ccb76f73a326324b39dd3fa06033.png)

我也有同样的需求：我的应用程序中的组件、面板和屏幕的平滑过渡和动画，以创建精美的 UI。由于我曾经为 java 制作了一个动画引擎（[Universal Tween Engine](http://www.aurelienribon.com/blog/projects/universal-tween-engine/)），所以我很快设置了一个非常小且易于使用的库来在 Swing UI 中创建此类动画，即[SlidingLayout 库](https://github.com/AurelienRibon/sliding-layout)。

如果这就是您正在寻找的，有一个专门的论坛，以防您在项目中设置 lib 时需要帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T08:04:38.807

我可以想到两个动画库，它们能够产生你想要的效果，但你必须完成让过渡真正起作用的工作

*   时序框架
*   三叉戟

您还应该检查：

[http://weblogs.java.net/blog/kirillcool/archive/2007/04/who_doesnt_want.html](http://weblogs.java.net/blog/kirillcool/archive/2007/04/who_doesnt_want.html)

对于可能的实现

我还建议查看[http://filthyrichclients.org/](http://filthyrichclients.org/)以获得进一步的见解

# sql - 连接到 SQL Server Express - 我的服务器名称是什么？

> ID：11425275
> 
> 赞同：30
> 
> 时间：2012-07-11T03:53:06.543
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-express

我刚刚从客户那里得到一台笔记本电脑来执行一些开发，我目前正在设置它。安装了 Visual Studio 2010 以及 SQL Server Management Studio 2008 R2。我正在尝试打开 SQL Server Management Studio 以连接到数据库，但到目前为止运气不佳。我习惯于输入服务器名称，例如...

```
localhost
(local)
SQLEXPRESS 
```

这些都不起作用。

所以我的问题是：我怎样才能知道我在这台机器上安装和配置了什么类型的 SQL Server，以及我怎样才能发现我需要使用什么服务器名称才能正确连接到它？

- 添加 - - - - - - - - - - - - - - - - - - - - - -

我按照指示查看了服务，并发现了一些示例。SQLEXPRESS 和 MSSQLSERVER。我尝试在这些配置中使用这两个选项登录...

```
SQLEXPRESS
MSSQLSERVER
computername\SQLEXPRESS
computername\MSSQLSERVER
.\SQLEXPRESS
.\MSSQLSERVER 
```

这些都不起作用。我还将服务的“登录身份”属性从“网络服务”更改为“本地系统”并再次尝试。仍然没有成功。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-04-29T07:29:54.163

而不是给予：

```
./SQLEXPRESS //in the Server Name 
```

我把这个：

```
.\SQLEXPRESS //which solved my problem 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-07-11T03:57:57.687

您应该能够在“服务”面板中看到它。寻找像`Sql Server (MSSQLSERVER)`. 括号中的名称是您的实例名称。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-07-11T04:32:15.527

如果你的机器上安装了 sql server，你应该检查

程序 -> Microsoft SQL Server 20XX -> 配置工具 -> SQL Server 配置管理器 -> SQL Server 服务 你会看到“SQL Server (MSSQLSERVER)”

程序 -> Microsoft SQL Server 20XX -> 配置工具 -> SQL Server 配置管理器 -> SQL Server 网络配置 -> MSSQLSERVER 的协议 -> TCP/IP 确保它使用端口号 1433

如果您想查看端口是否打开并正在侦听，请从命令提示符尝试此操作... telnet 127.0.0.1 1433

是的，SQL Express 安装默认使用 localhost\SQLEXPRESS 作为实例名称。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-06-11T16:03:53.503

有时这些都不适合我。所以我曾经在VS中创建一个新的Web项目并选择授权作为“个人用户帐户”。我相信这适用于一些更高版本的 .NET Framework 或其他东西。但是当你这样做时，它将有你的连接详细信息。大多是这样的

```
(LocalDb)\MSSQLLocalDB 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-08-13T03:18:44.713

默认情况下 -

您还可以使用以下服务器名称登录到 sql express：

```
./SQLEXPRESS 
```

或简单地登录到 sql server

```
. 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-04T09:36:21.207

这是在安装 Sql Express 2019 后提供的

```
Server=localhost\SQLEXPRESS;Database=master;Trusted_Connection=True; 
```

因此，只需在服务器名称中使用“localhost\SQLEXPRESS”，Windows 身份验证就对我有用。

[![在此处输入图像描述](../Images/57dc9b91251d8614ad32df618c5a7a39.png)](https://i.stack.imgur.com/hIp2Z.png)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-09-12T22:54:58.440

与 StuartLC 所说的类似，直到我在**SQL Server 配置管理器**对话框中的**SQL Network Configuration** >> **Protocols for MSSQLSERVER**下启用 TCP/IP 协议后，我的问题才得到解决。启用此功能并重新启动后，我的 SSMS 立即使用实例名称（没有 ~\MSSQLSERVER）连接。

 *** * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-04T06:50:21.037

为成功连接，应运行以下所有服务：SQL Full test filter Daemon、SQL server(SQLEXPRESS)、SQL Server Agent(SQLEXPRESS)、SQL Server Browser、SQL server reporting service 和 SQL Server VSS Writer**

# c++ - ostream&...这里的“&”是什么？

> ID：11425277
> 
> 赞同：1
> 
> 时间：2012-07-11T03:53:47.190
> 
> 标签：c++, pass-by-reference

在浏览一些代码时，我遇到了以下代码行

```
ostream& out = resp.send(); 
```

我解释它的方式是 resp 对象有一个 send 方法，该方法返回一个调用的 ostream 对象。'&' 符号在这里的用途是什么？这是否意味着resp对象返回对ostream类型对象的引用？

得到一些澄清会很棒。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T04:03:17.807

你说的对。& 为 resp.send() 的引用返回的 ostream 对象创建了一个名为“out”的引用。

注意：我们知道它是通过引用返回的，因为标准流对象不能被复制，因此不能通过值返回。

例如：

```
int x =1;
int& y = x;  //y is a reference to x.             
y=2;
cout<<x; //prints 2 
```

[这](http://www.dig.cs.gc.cuny.edu/manuals/C++/Volume1/TIC2Vone-distribution/html/Chapter11.html#Heading326)是 C++ 中引用的一个很好的解释（来自 Bruce Eckel 的书 Thinking in C++）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T05:17:21.663

& 符号用于声明引用。这并不一定意味着 resp.send() 返回一个引用，尽管您可以假设“out”变量将从 ostream 派生并且是有效的。

只是为了在工作中扔一个扳手，resp.send() 也有可能返回一个完全不同的对象，并隐式转换为对 ostream 的引用。

如果你有兴趣，这里是引用属性的一个很好的总结：http: [//yosefk.com/c++fqa/ref.html](http://yosefk.com/c++fqa/ref.html)

# c# - 传递一个大的现有对象或创建并传递一个小对象

> ID：11425279
> 
> 赞同：7
> 
> 时间：2012-07-11T03:53:53.917
> 
> 标签：c#

假设我有一个大对象，其中包含我需要的属性以及几个方法和一些相当大的集合。

我想知道什么会花费更多：将这个已经存在的大对象作为参数传递，或者创建一个只包含我需要的少数属性的小对象并传递它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-11T03:57:59.857

如果您只是将它作为参数传递给方法，则传递“大”对象会“更便宜” - 您只会传递对象引用的副本，它只是指针的大小（除非对象是结构类型，在这种情况下，整个“对象”被复制到堆栈中）。如果您要创建一个新对象，即使它很小，您也会付出分配和复制属性到它的代价，而如果您传递“大”对象，您就没有这些代价。

如果您以需要对其进行序列化的方式传递它（即，跨应用程序、在对 Web 服务的调用中等），那么最好使用较小的对象（本质上是一个 DTO，数据传输对象）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T03:59:02.900

只要您通过引用传递就没有关系。因此，您不应该引入额外的复杂性。事实上，这会使机器花费更多，因为它还必须创建该容器对象。

由于您似乎关心性能，我建议您了解指针和内存管理在 C 中的工作原理。一旦您理解了这一点，您将更容易理解它们在高级语言中的抽象版本如何影响性能。

# c# - 分配给 X 的表达式必须是常量？

> ID：11425281
> 
> 赞同：3
> 
> 时间：2012-07-11T03:54:05.940
> 
> 标签：c#, string, constants

我收到此代码的错误：

```
const string body = HighPoint; // HighPoint is a string arg passed in to the method 
```

...并且能够通过删除常量来解决它：

```
string body = HighPoint; 
```

...或者，当然，分配一个常量值：

```
const string body = "My Dinner with Andre"; 
```

...但是“我的方式不是一种非常运动的方式”吗？（无偿*公主新娘*参考）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T03:56:43.373

C# 中的关键字`const`表示编译时常量。它与 C++ 和 C 不同，在 C++ 和 C 中，相同的关键字只需要运行时常量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T03:58:30.577

`const`在 C# 中与`const`在 C++ 中不同。

在 C++ 中，`const`运行时常量。以下操作在 C++ 中有效

IE

```
const char *CONST_INFO = "hello world";
CONST_INFO = "goodbye world"; //aok
const int i = SomeMethod(); //aok 
```

另一方面，C# 更严格。常量值在编译时必须是常量；没有方法返回或静态类成员。

如果您需要使用一次性值作为常量（即数组或方法返回），您可以使用 static 和 readonly 修饰符来模拟`const`关键字为您提供的大多数限制：

```
public static readonly string body = HighPoint; 
```

应该可以正常编译，并且您仍然会像修改值一样遇到类似的限制`const`

# android - 这些天来为 Android 应用程序制作 ldpi 资产值得我花时间吗？

> ID：11425283
> 
> 赞同：0
> 
> 时间：2012-07-11T03:54:31.843
> 
> 标签：android

我目前正在为Android（游戏）构建一个应用程序。到目前为止，我已经为所有设备创建了资产，从 ldpi 一直到 xhdpi。我正在为 Android 2.2 及更高版本构建应用程序。

我应该停止生成 ldpi 图像吗？

它将显着减少生成图形所需的时间。最重要的是，我认为现在很多设备（常用）实际上都属于 ldpi 类别。

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T04:44:22.900

只有 3.1% 的手机有`ldpi`屏幕（截至 2016 年 1 月 1 日）。[这](http://developer.android.com/about/dashboards/index.html)是有关设备及其屏幕的统计信息。你可以决定是否支持他们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:09:56.360

适合使用所有图像包，因为如果大多数设备都支持 MDPI，那么您将失去分辨率低的市场设备。使用 LDPI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T04:11:45.107

如果你愿意，你可以。您可以在代码中设置纵横比调整器，并在加载时相应地调整所有图像的大小。因此，无论您在哪个屏幕上播放，它们都占据相同的百分比。这显着减少了图形时间，并且看起来很棒。

另一种方法是获取 Paint.net 并首先构建最大的图形。然后进入图像和调整大小，将调整大小设置为比率差异，比如 75%。保存这个，你就完成了。也应该显着减少整个时间，而且看起来也很棒。

这两种方法我都做过，你看不出有什么区别。

我一直在构建我的代码，以便它适合屏幕上的游戏。例如在横向卷轴战斗机中，如果一个角色在我的测试设备上是屏幕高度的 5/8 和屏幕宽度的 3/12，它看起来很棒>>> 你可以做一些数学运算，找出 h/w 比任何用户正在播放的屏幕，并在加载时调整图像，以便无论设备如何，您的图像都会占据您想要的屏幕百分比。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T04:13:56.183

没错，但要建立您的品牌形象，您必须为每个人完美地完成工作。即使有几十个用户使用低dpi，也完全值得。:-)

# html - 请在我的联系表上提供 html 帮助？

> ID：11425294
> 
> 赞同：0
> 
> 时间：2012-07-11T03:56:01.857
> 
> 标签：html, forms, contact-form

我需要一些帮助，我正在为一个好朋友建立一个网站，我需要一些联系表格方面的帮助。我在网上找到了代码，但它不能正常工作。它发送电子邮件但并非所有表格都正确，并且不发送图片。此外，当我发送表单时，它应该链接到页面contactus.html，但该链接似乎也不起作用。任何人都可以帮助更正此代码，这将有很大帮助。非常感谢，非常感谢。

* * *

这是联系表单的 HTML：

```
<div id="stylized" class="myform">
<form id="form" id="form" action="mail.php" method="POST">
<label>Name
<span class="small">Add your name</span>
</label>
<input type="text" name="name">
<label>Address
<span class="small">Add your home address</span>
</label>
<input type="text" name="address">
<label>Phone
<span class="small">Add a Phone Number</span>
</label>
<input type="text" name="phone">
<label>E-mail
<span class="small">Enter a valid E-mail</span>
</label>
<input type="text" name="email">
<label>Timeline
<span class="small">Range for your project</span>
</label>
<input type="text" name="timeline">
<label>Photo
<span class="small">Upload current picture</span>
</label>
<input type="file" name="photo">
<label>Description
<span class="small">Type Your Project Description</span>
</label>
<textarea name="message" rows="6" cols="25"></textarea>
<button type="submit" value="Send" style="margin-top:15px;">Submit</button>
<div class="spacer"></div>
</form>
</div> 
```

这是mail.php，它应该有助于使表单工作。我认为这是问题所在：

```
<?php $name = $_POST['name'];
$address = $_POST['address'];
$phone = $_POST['phone'];
$email = $_POST['email'];
$timeline = $_POST['timeline'];
$description = $_POST['description'];
$formcontent="From: $name \n Message: $message";
$recipient = "blanger@hawaii.edu";
$subject = "New Project Request from 2DadsDB.com";
$mailheader = "From: $email \r\n";
mail($recipient, $subject, $formcontent, $mailheader) or die("Error!");
echo "Thank You!" . " -" . "<a href='contactus.html'>Go Back</a>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:05:17.420

该`mail()`功能仅适用于消息发送。发送图像 首先，您需要将照片上传到服务器[上传图像。](http://blogforsite.blogspot.in/2012/07/php-file-upload.html)

`mail()`使用首先将照片从服务器附加到[PHP 电子邮件附件脚本](http://www.finalwebsites.com/forums/topic/php-e-mail-attachment-script)来发送图像`mail()`

并`$name = mysql_real_escape_string(strip_tags($_POST['name']));` 用于每个帖子，如姓名、电子邮件等，出于安全目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:45:02.833

正如 Blender 指出的那样，代码非常不安全。恶意内容很容易被插入。mail.php 中也没有提到“照片”

```
$fileImage = $_POST['photo']; 
```

您需要使用脚本来上传和存储我相信的照片。最好查看教程或完整源代码，而不是从头开始构建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T04:52:34.213

您应该清理您的输入。在每个输入上使用`mysql_real_escape_string`或运行`stripslashes``$_POST.`

```
 $user = mysql_real_escape_string($_POST['user']); 
```

# java - Java 程序计算

> ID：11425299
> 
> 赞同：0
> 
> 时间：2012-07-11T03:56:39.173
> 
> 标签：java, loops

用 Java 编写程序计算以下内容： 1+2-3+4-5 …-99+100

可以证明这个程序非常简单，但我是 java 的初学者，这就是我到目前为止所拥有的，我不确定我是否走在正确的道路上

我得到一个 java: 13 错误消息 error:not a statement sub;

```
class Loop{
    public static void main(String[] args){
        int sum=0;
        int sum=0;
        int sub=0;

        while(num<100){

            num++;
            if(num%2 == 0){
                sum=sum+num;
            }
            sub;
            if(num%3== 0||num%5==0||num%7==0){
                sub=sub-num;
            }
        }
        System.out.println("Sum is: " +sum+sub);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T03:59:23.570

这是抱怨这条线：

```
sub; 
```

这不是一个有效的指令，这就是编译器对你大喊大叫的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T04:00:25.457

在下面的：

```
if(num%2 == 0){
    sum=sum+num;
}
sub; 
```

最后一行`sub;`不是 Java 语句。你可能想删除它。

**更新：**

* * *

看起来您想要添加偶数并减去奇数（您想要添加的 1 除外）。如果我正确理解了要求：

您可以从声明两个变量开始，如下所示：

```
int sum = 1; //this will add 1
int n = 2; 
```

循环条件应如下：

```
while(n <= 100) { //because you want to include 100 also 
```

然后在循环的每次迭代中：

*   如果`n`是偶数，则将其添加到 中`sum`，否则如果`n`是奇数，则将其从 中减去`sum`。
*   之后增加`n`1。

最后，打印 的值`sum`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T04:01:08.047

```
class Loop{
   public static void main(String[] args){
   int sum=0;
   int sum=0;
   int sub=0;

    while(num<100){

     num++;
   if(num%2 == 0){
       sum=sum+num;
   }
   sub; <-- sub is not a statment
   if(num%3== 0||num%5==0||num%7==0){
       sub=sub-num;
       }
   }
   System.out.println("Sum is: " +sum+sub);
  }

} 
```

您走在正确的轨道上，经过一些试验和错误，您将得到它:-) 问题的原因在上面的代码中进行了注释，在您的程序中间，您`sub;`在自己的行上有一个随机数。sub 在该上下文中没有意义，因此编译器不知道如何处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T04:01:56.827

好吧，您两次声明“sum”，然后声明“sub;” 不是一个有效的表达式。

```
class Loop{
public static void main(String[] args){
    int sum=0;
    int sum=0; // second declaration? should probably be num, right? 
    int sub=0;

    while(num<100){

        num++;
        if(num%2 == 0){
            sum=sum+num;
        }
        sub; // what's this doing here?
        if(num%3== 0||num%5==0||num%7==0){
            sub=sub-num;
        }
    }
    System.out.println("Sum is: " +sum+sub);
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T04:03:25.047

您可以使用简单的方法来实现它：

```
 public static void main(String[] args) {
    int sum = 1;
    for (int i = 2; i < 100; i++) {
        if (i % 2 == 0) {
            sum = sum + i;
        } else {
            sum = sum - i;
        }
    }
    System.out.println(sum);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-11T04:05:13.427

1) 你不能有 2 个同名的变量`sum`
2) 你需要在使用之前声明和初始化一个变量
3) 语句的 `sub;`含义是什么？

进行上述所有更改并尝试！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-07-11T04:55:39.113

公共类循环{

```
public static void main(String[] args) {
    int sum = 1;
    int sub = 0;

    for (int i = 2; i <= 100; i += 2)
        //sum =sum+i;
        sum +=i;

    System.out.println(sum);
    for (int i = 3; i <= 100; i += 2)
        sub += i;
    System.out.println(sub);
    System.out.println("Sum is: " +(sum-sub));
} 
```

}

试试这个代码会给你你想要的结果

# c++ - CArray 和 CMap 中的运算速度

> ID：11425306
> 
> 赞同：0
> 
> 时间：2012-07-11T03:57:31.413
> 
> 标签：c++, mfc

在我的程序中，我使用 CArray 来存储一些值。但是使用 CArray 成员函数时性能较低。比如迭代CArray。由于性能低，iam 使用了 Copy、GetAt、Append 等成员函数 iam 决定使用 CMap 类而不是 CArray。我的决定是正确的吗？有人解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T10:17:10.173

看看这个：[选择集合类的建议](https://docs.microsoft.com/en-us/cpp/mfc/recommendations-for-choosing-a-collection-class)

我们必须不仅基于性能来选择集合类。这取决于您想要的数据结构类型、您想要对其执行的操作等。

既然你说你想“存储一些值”，我假设没有进一步的复杂性。为此，您可以使用 a`CArray`或`CList`. *插入*值时列表更快，但它*没有被索引*。即您无法访问特定索引处的元素，您需要遍历列表。

`CMap`比and*都快*，但如果您有一组复杂的数据结构，其中唯一的键可用于索引每个元素，则最好使用它。`CArray``CList`

# django - django - 我如何创建一个绑定到数据库的下拉字段？

> ID：11425307
> 
> 赞同：0
> 
> 时间：2012-07-11T03:57:36.993
> 
> 标签：django

我只想要一个下拉字段 - 如下所示：

```
Sex: | Male   |v|
     | Female | 
```

你知道，一个非常非常标准的下拉菜单。

为此，我创建了这个：

```
class Relationship(models.Model):

    SEX = [
        ("M","Male"),
        ("F","Female")
    ]

    title =  models.CharField(max_length=100)

    sex = models.ChoiceField(label='', choices=SEX) 
```

我将自己处理模板中的标签，因此`label=""`

问题是这样的：当我运行syncdb时，django吓坏了，因为下面是：

```
class RelationshipForm(forms.ModelForm):
    class Meta:
        model = Relationship
        ordering = ['create_date']
        fields = ('title','sex') 
```

可悲的是，这导致我得到这个异常：

> django.core.exceptions.FieldError：为关系指定的未知字段（性别）

我到底要做什么？要清楚：

1.  我希望创建的关系数据库表有一个“性别”字段，该字段包含男性或女性

2.  我希望在您建立新关系时显示 wee 下拉菜单。

我敢肯定这非常简单，有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T04:14:45.233

模型中没有`ChoiceField`。你想要`CharField`的选择如下。

`sex = models.CharField(max_length=1, label='', choices=SEX)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T11:36:53.890

啊。我明白我做错了什么——基本错误。我暂时将其保留在这里，除非这里的每个人都认为这是一种不必要的基本事物@ SO

在模型中：

```
class Relationship(models.Model):

    title =  models.CharField(max_length=100)

    sex = models.CharFieldField(max_length=100) 
```

在表格中：

```
class RelationshipForm(forms.ModelForm):
    class Meta:
        model = Relationship
        ordering = ['create_date']
        fields = ('title','sexField')

    SEX = [
        ("M","guy"),
        ("F","girl")
    ]

    sexField = ChoiceField(label='', choices=SEX)

    def clean(self):
        cleaned_data = super(RelationshipForm, self).clean()
        self.instance.sex = (self.cleaned_data.get('sexField',None) ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T08:31:53.197

或者：

```
class Profile(models.Modell):
    """
    User profile model
    """
    PROF = 1
    DR = 2
    MR = 3
    MRS = 4
    MS = 5
    PROFESSION_TITLE = ((PROF, 'Prof.'),
                        (DR, 'Dr.'),
                        (MR, 'Mr'),
                        (MRS, 'Mrs'),
                        (MS, 'Ms'),)
    # personal details
    user = models.ForeignKey(User, unique=True)
    title = models.IntegerField('Title', choices=PROFESSION_TITLE,
            max_length=25, blank=True, null=True) 
```

请参阅此链接：[http ://www.b-list.org/weblog/2007/nov/02/handle-choices-right-way/](http://www.b-list.org/weblog/2007/nov/02/handle-choices-right-way/)

# r - 在一秒钟内将一个数据框中的行与列匹配

> ID：11425309
> 
> 赞同：0
> 
> 时间：2012-07-11T03:57:45.653
> 
> 标签：r, memory, add

样本数据：

```
t1 <- data.frame(
  CName=c("334","5as4","ggg","bbb"), 
  D1=c(1," ",3,1), 
  D2=c(3,4,5,5)
)

t2 <- data.frame(
  PName=c("zz","yy","xx","ww"), 
  `334`=c(5,6,3,5), 
  "ggg"=c(7,5,4,3), 
  `5as4`=c(9,9,1,1),
  check.names=FALSE
) 
```

生产：

```
t1
  CName D1 D2
1   334  1  3
2  5as4     4
3   ggg  3  5
4   bbb  1  5

t2
  PName 334 ggg 5as4
1    zz   5   7    9
2    yy   6   5    9
3    xx   3   4    1
4    ww   5   3    1 
```

我想将`t1$CName`列与`t2`.

期望的输出是：

```
 PName  334  ggg  5as4
     D1   1    3     
     D2   3    5    4
1    zz   5    7    9
2    yy   6    5    9
3    xx   3    4    1
4    ww   5    3    1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:30:47.227

在我看来，您真的想将 with 的转置`t1`合并`t2`：

**第 1 步：**创建表的转置副本`t1`：

```
tt1 <- as.data.frame(t(t1[, -1]), stringsAsFactors=FALSE)
names(tt1) <- t1[, 1]
tt1$PName = rownames(tt1)

tt1
   334 5as4 ggg bbb PName
D1   1        3   1    D1
D2   3    4   5   5    D2 
```

**第 2 步：**合并

```
merge(tt1, t2, all=TRUE, sort=FALSE)

  334 5as4 ggg PName  bbb
1   1        3    D1    1
2   3    4   5    D2    5
3   5    9   7    zz <NA>
4   6    9   5    yy <NA>
5   3    1   4    xx <NA>
6   5    1   3    ww <NA> 
```

**第 3 步：**现在您所要做的就是删除不需要的列。

```
 334 5as4 ggg PName
1   1        3    D1
2   3    4   5    D2
3   5    9   7    zz
4   6    9   5    yy
5   3    1   4    xx
6   5    1   3    ww 
```

* * *

即使对于您声明的 1000 个条目的数据大小，这对 R 来说也不应该是问题。

# wordpress - 相同类别的 Wordpress 随机帖子链接

> ID：11425310
> 
> 赞同：0
> 
> 时间：2012-07-11T03:57:45.740
> 
> 标签：wordpress, post, plugins, hyperlink, categories

我正在使用位于此处的随机帖子链接插件。 [http://wordpress.org/support/plugin/random-post-link](http://wordpress.org/support/plugin/random-post-link)

它的工作原理是接受链接将您定向到任何类别的随机帖子。我需要它指向同一类别。我在下面找到了这段代码，它可以让您选择 1 个类别。

```
function my_random_post_args($args) {

$args['category_name'] = 'cat-slug-here';

return $args;
}
add_filter('random_post_args', 'my_random_post_args'); 
```

这段代码被放置在functions.php中，它可以工作接受我不想只使用一只猫，我需要它用于我的所有类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T13:00:45.997

您可以使用[get_the_category()](http://codex.wordpress.org/Function_Reference/get_the_category)函数并仅在随机发布函数中**显示第一个类别名称：**

```
function my_random_post_args($args) {

$category = get_the_category(); 

$args['category_name'] = $category[0]->slug;

return $args;
}
add_filter('random_post_args', 'my_random_post_args'); 
```

# jquery - jQuery、HTML、PHP 电子邮件表单 $.post()

> ID：11425314
> 
> 赞同：-2
> 
> 时间：2012-07-11T03:58:02.533
> 
> 标签：jquery, html

由于某种原因，此代码有效：

```
$(document).ready(function () {
    var name = document.getElementById('Name').value;
    var email = document.getElementById('Email').value;
    var type = document.getElementById('Type').value;
    var message = document.getElementById('Message').value;
    $.post("send.php", {
        Name: "Matt",
        Email: "xxxxxx@hotmail.com",
        Type: "1",
        Message: "GO"
    },

    function (e) {
        alert(e);
    });
}); 
```

但是这段代码没有：

```
$(document).ready(function () {
    $('#btn').click(function () {
        var name = document.getElementById('Name').value;
        var email = document.getElementById('Email').value;
        var type = document.getElementById('Type').value;
        var message = document.getElementById('Message').value;
        $.post("send.php", {
            Name: "Matt",
            Email: "xxxxxx.wsu@hotmail.com",
            Type: "1",
            Message: "GO"
        },

        function (e) {
            alert(e);
        });
    });
}); 
```

另外，我检查了我`#btn`的，并且 id 是正确的，所以不是这样。第一个代码返回成功并发送电子邮件。第二个什么都不做，我不能很好地调试它，因为来自服务器的响应没有显示在我的 Chrome 开发者工具网络查看器中。

这是html表单：

```
<form id="form" action="" method="POST">
                <label for="Name">Name: </label>
                <input type="text" name="Name" id="Name">

                <label for="Email">Email: </label>
                <input type="text" name="Email" id="Email">

                <label for="Type">Type: </label>
                <select name="Type" id="Type">
                    <option value="0">General</option>
                    <option value="1">I need a consultation</option>
                    <option value="2">I need a website</option>
                </select>

                <label for="Message">Message: </label>
                <textarea rows="10" cols="50" name="Message" id="Message"></textarea>
                <br />
                <button id="btn" class="submitBtn">Send</button>
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:29:53.473

`type`为`<button>`as**按钮**指定。

```
<button type="button" id="btn" class="submitBtn" >Send</button> 
```

工作示例：http: [//jsfiddle.net/kXeY8/](http://jsfiddle.net/kXeY8/)

一些浏览器将`type`a 的默认值解释为`<button>`没有指定为**submit**`type`的属性的表单，导致您的表单改为提交，从而阻止事件的 ajax 请求完成。**`click`**

# sql-server-2008 - 两个字符串使用 '=' 比较相等，但在 'like' 比较中失败

> ID：11425316
> 
> 赞同：5
> 
> 时间：2012-07-11T03:58:24.847
> 
> 标签：sql-server-2008, tsql, sql-server-2008-r2, string-comparison

`Sql-Server 2008 R2`排序规则是`Chinese_Simplified_Pinyin_100_CI_AS`. 当我使用

```
select 1 where N'⑦' = N'7' 
```

它输出 1，但是当我将运算符更改为`like`

```
select 1 where N'⑦' like N'7' 
```

它不会输出任何东西。

为什么`like`运营商行为如此怪异？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T18:09:53.507

这似乎是一个错误。`LIKE`针对没有通配符的模式应该总是返回相同的`=`返回值。

其他人可以通过运行以下查询来查看此行为：

```
SELECT
   CASE WHEN N'⑦' COLLATE Chinese_Simplified_Pinyin_100_CI_AS = N'7' THEN 'Y' ELSE 'N' END,
   CASE WHEN N'⑦' COLLATE Chinese_Simplified_Pinyin_100_CI_AS LIKE N'7' THEN 'Y' ELSE 'N' END
-- Y N 
```

我看到您[在 Microsoft Connect 上报告了它](http://connect.microsoft.com/SQLServer/feedback/details/753343/two-strings-compare-equal-using-but-fail-in-like-compare)。

# objective-c - 使用 NSDictionary，您可以确定值的数据类型吗？

> ID：11425323
> 
> 赞同：15
> 
> 时间：2012-07-11T03:59:15.113
> 
> 标签：objective-c, ios, cocoa-touch

对于 iOS，给定一些`NSDictionary`键/值对，其中字符串值添加为`NSString`和`int`/`float`值添加为`NSNumber`，有没有办法测试值的数据类型以查看它是`NSString`还是`NSNumber`？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-11T04:02:18.980

NSObject 提供：

```
- (BOOL)isKindOfClass:(Class)aClass 
```

如果 obj 是您从 NSDictionary 中获得的值，则结帐：

```
[obj isKindOfClass:[NSString class]]
[obj isKindOfClass:[NSNumber class]] 
```

如果您检查这些并且您不期望字典中除了 NSString 或 NSNumber 之外的任何内容，那么我将在 else 块中添加一个 NSAssert 。

这里有更多关于 NSString 和 NSCFString 细微差别的评论：

[在 Objective-C 中，我如何测试对象类型？](https://stackoverflow.com/questions/1144629/in-objective-c-how-do-i-test-the-object-type)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-11T04:28:02.733

字典返回一个 id 你可以检查它的类类型如下

```
if ([[dictionary valueForKey:@"key"] isKindOfClass:[NSString class]]) {
        NSLog(@"it is a string");
    }
    else {
        NSLog(@"it is number");
    } 
```

# emacs - 启动 Emacs 时，总是出现错误消息.....认为这可能是无害的

> ID：11425326
> 
> 赞同：0
> 
> 时间：2012-07-11T03:59:52.303
> 
> 标签：emacs

错误是

> 警告：使用 3 个参数调用 ad-Orig-kill-new，但只接受 1-2

[当我从桌面会话恢复时，我](https://stackoverflow.com/questions/10393391/warning-when-i-revert-from-desktop-session-emacs)按照指南警告将代码添加到**.emacs中。**[Emacs](https://stackoverflow.com/questions/10393391/warning-when-i-revert-from-desktop-session-emacs)

```
(ad-deactivate 'kill-region) 
```

但是重新启动emacs后，它向我显示了错误消息：

> Symbol的函数定义无效：ad-deactivate

我该如何应对错误：> 警告：ad-Orig-kill-new 调用了 3 个参数，但只接受 1-2

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:43:27.577

如果没有有关您的 emacs 版本和加载文件的更多信息，很难确定，但如果函数的定义是无效的，那么这听起来像是**advice.el**尚未加载。您可以尝试更改 .emacs 文件，以便在调用函数之前显式加载它；像这样的东西：

```
(require 'advice)
(ad-deactivate 'kill-region) 
```

# pagination - 如何为组件前端添加分页（Joomla 2.5）

> ID：11425327
> 
> 赞同：1
> 
> 时间：2012-07-11T03:59:56.813
> 
> 标签：pagination, joomla2.5

我是 joomla 的新手，我想知道如何为 FRONT END 的组件添加分页，从搜索中我发现只有后端的分页。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T12:51:22.267

所以默认情况下前端没有分页（至少据我所知）。

它应该像在后端一样工作。

在前端添加从后端的分页并不是地球上最顺利的事情，但它应该是这样工作的：

您的模型应该扩展 JModelList

在视图（view.html.php）中，您调用分页

```
$this->pagination = $this->get('Pagination'); 
```

在组件模板（通常为 default.php）的最后，您只需添加：

```
<?php echo $this->pagination->getListFooter(); ?> 
```

对于缺少的 CSS 类，请从管理员端添加缺少的文件。

让我知道它是如何工作的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T14:47:27.340

谢谢瓦伦丁！有关更多详细信息，请在视图 (view.html.php)

```
class ProjectViewMyProjects extends JViewLegacy{
protected $items;
protected $pagination;
public function display($tpl=null)
{
$this->items = $this->get('Items');
$this->pagination   = $this->get('Pagination'); 
.............................................
} 
```

在组件模板的末尾（通常为 default.php）：

```
.................[foreach list of db query]...................[endforeach]
$this->pagination->getListFooter(); 
```

# javascript - Javascript 中基于类的框架导致浏览器挂起

> ID：11425328
> 
> 赞同：0
> 
> 时间：2012-07-11T04:00:02.440
> 
> 标签：javascript, extjs, frameworks, backbone.js

我之前问过[这个问题](https://stackoverflow.com/questions/10772608/why-does-a-large-enterprise-level-implementation-of-extjs-crash-every-browser)，关于 EXT 的大型实现会导致浏览器崩溃。

我现在发现骨干网和three.js 也是如此。似乎每个基于类的 javascript 库都有一个内置的可伸缩性约束，因为没有办法限制代码加载。

在这些情况下，让浏览器挂起的是类实例化，而不是对象实例化。甚至 EXT 的“延迟加载”也只是延迟了对象的实例化，而不是类和浏览器崩溃通常发生在 EXT 甚至开始对象实例化阶段之前。

Backbone 试图通过将代码分离到视图中来解决这个问题，但只是尝试在每个视图中加载太多代码并观察它崩溃。

我不想在这里变得迟钝。当我问“当你实例化 1000 个 EXT 组件时会发生什么”并且我得到响应时，“不要实例化那么多”，响应者根本没有抓住重点。

代码是什么并不重要，重要的是可伸缩性限制是什么。

并且在 EXT、Backbone 和许多其他 JS 框架中，基于类的实例化不是负载均衡的。

如何构建基于类的框架以不一次实例化所有类？

但是在浏览器中，脚本加载时间是一种有限的资源，大量基于类的系统必须一次全部编译，这对于每个基于类的 JavaScript 框架来说都是明显的可伸缩性问题：EXT。Backbone、Three.js 等等。

谁能解决如何使这些框架具有可扩展性？

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T04:24:07.653

4000行代码一点也不多。浏览器崩溃通常意味着无休止的自我维持循环，这些循环会反弹到另一个消耗所有可用内存，所以一般来说，这里有一些可能的原因：

*   非命名空间框架的名称冲突
*   用函数重载原型，并遍历循环对象
*   执行不力

要调试，

1.  获取每个框架的开发副本
2.  在有罪的构造函数中设置一些断点
3.  使用 javascript profiler 来查看到底发生了什么

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:30:28.007

这不是一个真正的答案，但我认为类/对象的区别在这种情况下并不相关。就 JavaScript 而言，一切都是对象。“类”只是某些框架（如 ExtJS）允许您使用的高级概念。

> 甚至 EXT 的“延迟加载”也只会延迟对象的实例化，而不是类

ExtJS 4 确实能够仅[在需要时](http://www.sencha.com/blog/countdown-to-ext-js-4-dynamic-loading-and-new-class-system/)加载类（通过发出 AJAX 请求）。

# python - PyQt4 - 列表小部件点击事件？

> ID：11425330
> 
> 赞同：0
> 
> 时间：2012-07-11T04:00:17.830
> 
> 标签：python, qt4, qlistwidget

我的迷你项目有问题。

我这里有一个方法

```
def PrintClick(self,name = ""):
    print name 
```

然后我有一个名为**lstStudents的列表小部件**

当我单击 lstStudents 中的项目时，**如何**调用方法**PrintClick**？还有我如何传递参数？

 **我试过了

```
self.connect(self.ui.lstStudents,QtCore.SIGNAL("clicked()"), self.PrintClick) 
```

但我不工作。请帮我 ：（

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:02:44.507

您通常会在列表选择更改时调用该事件。另外，我会使用新型事件信号。他们看起来更好：

```
self.ui.lstStudents.currentItemChanged.connect(self.PrintClick) 
```**

# haskell - 使用 foldr 定义长度

> ID：11425334
> 
> 赞同：7
> 
> 时间：2012-07-11T04:01:42.070
> 
> 标签：haskell

我试图理解我正在上课的讲义中的一部分。它将长度函数定义为：

```
length = foldr (\_ n -> 1 + n) 0 
```

有人可以解释一下这是如何工作的吗？我无法绕开它。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-11T04:17:05.933

首先，类型`foldr`：`(a -> b -> b) -> b -> [a] -> b`

将用法纳入上下文，`foldr`接受 3 个参数：一个函数（接受*a.*列表的一个元素和*b.*一个累加器，并返回累加器）、累加器的起始值和一个列表。`foldr`通过列表应用函数后返回累加器的最终结果。

至于这段代码：

```
length = foldr (\_ n -> 1 + n) 0 
```

如您所见，它缺少列表 - 因此右侧的返回值是一个函数，它将接收一个列表并产生一个 Int （与 相同的类型`0`）。类型：`[a] -> Int`.

至于右手边是什么意思：`(\_ n -> 1 + n) 0`

`\`表示声明一个未命名的函数

`_`表示忽略列表中的元素（对应`a`于 的类型`foldr`）。如您所知，`foldr`将遍历列表并将函数应用于每个元素。这是传递给函数的元素。我们没有在`length`函数中使用它，所以我们表示它应该被忽略。

`n`是作为累加器传入的 Int 的参数。

`->`意味着返回

`1 + n`将增加累加器。您可以想象返回值被传回`foldr`并`foldr`保存该值以传递给函数的下一次调用`(\_ n -> 1 + n)`。

括号外面是计数器的`0`起始值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-11T05:41:27.327

功能`foldr`是用右结合运算符折叠列表，如果使用运算符，您可以很容易地理解该函数的作用`(+)`，（该函数与 具有相同的行为`sum`）：

```
foldr (+) 0 [1,2,3,4,5] = 1+(2+(3+(4+(5+0)))) 
```

对于您的长度函数，它相当于：

```
foldr (\_ n -> 1 + n) 0 [1,2,3,4,5] = 1+(1+(1+(1+(1+0)))) 
```

这就是`foldr`为了

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-07-12T17:10:37.513

有几种等效的方法可以理解它。第一个：`foldr f z [1, 2, 3, 4, ..., n]`计算以下值：

```
f 1 (f 2 (f 3 (f 4 (f ... (f n z))))) 
```

所以在你的情况下：

```
length [1,2,3,4] = foldr (\_ n -> 1 + n) 0 [1,2,3,4]  
                 = (\_ n -> 1 + n) 1 ((\_ n -> 1 + n) 2 ((\_ n -> 1 + n) 3 ((\_ n -> 1 + n) 4 0)))
                 = (\_ n -> 1 + n) 1 ((\_ n -> 1 + n) 2 ((\_ n -> 1 + n) 3 (1 + 0)))
                 = (\_ n -> 1 + n) 1 ((\_ n -> 1 + n) 2 (1 + (1 + 0)))
                 = (\_ n -> 1 + n) 1 (1 + (1 + (1 + 0)))
                 = 1 + (1 + (1 + (1 + 0)))
                 = 1 + (1 + (1 + 1))
                 = 1 + (1 + 2)
                 = 1 + 3
                 = 4 
```

另一种是从这个函数开始，它复制一个列表：

```
listCopy :: [a] -> [a]
listCopy [] = []
listCopy (x:xs) = x : listCopy xs 
```

这可能看起来像一个微不足道的函数，但`foldr`基本上就是这样，但除了将空列表`[]`和对构造函数硬编码`:`到右侧之外，我们改为使用一些作为参数提供的任意常量和函数。我有时喜欢将这些参数称为`fakeCons`and `fakeNil`( `cons`and是 Lisp 语言中的运算符和常量`nil`的名称)，因为从某种意义上说，您是在“复制”列表，但使用了假构造函数：`:``[]`

```
foldr fakeCons fakeNil [] = fakeNil
foldr fakeCons fakeNil (x:xs) = fakeCons x (subfold xs)
    where subfold = foldr fakeCons fakeNil 
```

因此，根据这种解释，您的`length`函数是“复制”一个列表，除了它使用的不是空列表`0`，而是`:`丢弃元素并在运行总数中加 1。

这里还有第三种解释`foldr f z xs`：

1.  `z`是列表为空时您的问题的解决方案。
2.  `f`是一个接受两个参数的函数： list 的一个元素和一个**部分解决方案**：对于出现在传递给的元素右侧的元素列表的问题的解决方案`f`。 `f`然后产生一个“更大的一个元素”的解决方案。

所以在以下情况下`length`：

1.  空列表的长度为 0，因此您使用 0 作为`foldr`.
2.  如果 的长度`xs`为`n`，则 的长度`x:xs`为`n+1`。这就是 , 的第一个参数`foldr`正在`\_ n -> n + 1`做的事情：它正在计算列表的长度，作为参数给出列表的第一个元素（在这种情况下我们忽略）和列表其余部分的长度 ( `n`)。

这种思考方式`foldr`非常强大，不容小觑。基本上，在您作为第一个参数传递给 的函数中`foldr`，您可以假设您尝试解决的问题已经解决了所有比您正在处理的列表短的列表。那么，您的参数函数所要做的就是为一个元素更长的列表计算答案。

# jquery - jQuery：替换 DOM 中的嵌套元素

> ID：11425335
> 
> 赞同：0
> 
> 时间：2012-07-11T04:01:55.063
> 
> 标签：jquery

我正在尝试编写一个 jQuery 函数，它搜索当前页面上所有具有“圆角”类的 div，然后用包含一些漂亮背景图像的包装表替换这些 div。见下文...

```
$(document).ready(function ()
{
    // For all "rounded-corners" div's on the page...
    $("DIV.rounded-corners").each(function ()
    {
        // Copy the contents of the div into a wrapping table.
        var $roundedCornersContainer = $('<table cellpadding="0" cellspacing="0" class="rounded-corners-container"> \
                                            <tr> \
                                                <td class="corner-topleft"></td> \
                                                <td class="corner-topright"></td> \
                                            </tr> \
                                            <tr> \
                                                <td class="original-content" colspan="2">THIS IS WHERE THE CONTENT IS INSERTED</td> \
                                            </tr> \
                                            <tr> \
                                                <td class="corner-bottomleft"></td> \
                                                <td class="corner-bottomright"></td> \
                                            </tr> \
                                        </table>');

        $roundedCornersContainer.find("TD.original-content").append($(this).html());

        // Replace the original "rounded-corners" div with the populated wrapping table.
        $(this).replaceWith($roundedCornersContainer);
    });
}); 
```

只要没有任何嵌套的“圆角”div，这效果很好。如果有，那么只有**最外面的 div**会被我的包装表替换。

有趣的是，当我使用调试器单步执行这段代码时，实际上所有嵌套的 div 都被检索和处理了——它们根本不会在屏幕上更新。（注意：最外层的 div 首先被处理，然后是每个嵌套的孩子）。

*   ***会不会是 each() 函数中的 DOM 元素变得陈旧了？***
*   ***我是否需要在每次迭代结束时以某种方式显式更新 DOM？***
*   ***或者有没有一种方法可以一次处理所有 div（即不使用 each() 函数）？***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:59:50.123

试试这个或在[jsfiddle中查看](http://jsfiddle.net/pP42K/8/)

```
$(document).ready(function ()
{
    // For all "rounded-corners" div's on the page...
    var str = '<table cellpadding="0" cellspacing="0" class="rounded-corners-container"> \
        <tr> \
            <td class="corner-topleft"></td> \
            <td class="corner-topright"></td> \
        </tr> \
        <tr> \
            <td class="original-content" colspan="2">THIS IS WHERE THE CONTENT IS INSERTED</td> \
        </tr> \
        <tr> \
            <td class="corner-bottomleft"></td> \
            <td class="corner-bottomright"></td> \
        </tr> \
    </table>'; 
    $("DIV.rounded-corners").each(function ()
    {

        var tmp = $(this);
        var $roundedCornersContainer = $(str);        
        $roundedCornersContainer.insertAfter(tmp).find("TD.original-content").append(tmp);

    });
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T05:02:15.063

实现此目的的一种方法是使用递归函数 - 向它传递一个（圆角）DIV 对象，首先它在替换自身之前在任何嵌套的圆角 DIV 上调用自身。

这是一个演示：http: [//jsfiddle.net/emtSS/3/](http://jsfiddle.net/emtSS/3/)

并且您上面的函数使递归看起来像：

```
function replaceDiv(div) {
 // For all nested "rounded-corners" div's, recursively call this function to replace them first
div.find("DIV.rounded-corners").each(function() {
    replaceDiv($(this));
});
// Copy the contents of the div into a wrapping table.
var $roundedCornersContainer = $('<table cellpadding="0" cellspacing="0" class="rounded-corners-container"> \
                                        <tr> \
                                            <td class="corner-topleft"></td> \
                                            <td class="corner-topright"></td> \
                                        </tr> \
                                        <tr> \
                                            <td class="original-content" colspan="2">THIS IS WHERE THE CONTENT IS INSERTED</td> \
                                        </tr> \
                                        <tr> \
                                            <td class="corner-bottomleft"></td> \
                                            <td class="corner-bottomright"></td> \
                                        </tr> \
                                    </table>');

$roundedCornersContainer.find("TD.original-content").append(div.html());

// Replace the original "rounded-corners" div with the populated wrapping table.
div.replaceWith($roundedCornersContainer);
};​ 
```

# ruby-on-rails - Authorize.net 令牌过期

> ID：11425336
> 
> 赞同：0
> 
> 时间：2012-07-11T04:01:55.533
> 
> 标签：ruby-on-rails, ruby, e-commerce, authorize.net, spree

因此，每次客户在我的网站上输入信用卡信息时，他们的信用卡信息都会（部分）与 Authorize.net 的相应网关支付令牌一起存储在数据库中。这个令牌在生产站点过期之前可以使用多长时间？我假设这些开发或临时帐户中的令牌永远不会过期？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:25:17.620

您指的是从 Authorize.net 返回的“customer_profile_id”吗？如果是这样，则此令牌不会过期。请注意，与配置文件关联的信用卡可能会过期/被取消/等，当您尝试使用该令牌进行未来购买时会导致错误。

# linux - NFS 挂载文件系统中共享库的内存使用情况

> ID：11425339
> 
> 赞同：1
> 
> 时间：2012-07-11T04:02:02.770
> 
> 标签：linux, memory, shared-libraries

我正在为基于 Linux 的嵌入式系统盒使用 NFS 安装的文件系统。我的共享库很少，大小从 1MB 到 20MB 不等。我正在运行依赖于这些库的应用程序。

在运行应用程序时，我检查了 /proc/ *TaskPID* /smap。

```
Size:               4692 kB
Rss:                1880 kB
Pss:                1880 kB
Shared_Clean:          0 kB
Shared_Dirty:          0 kB
Private_Clean:      1880 kB
Private_Dirty:         0 kB
Referenced:         1880 kB
Anonymous:             0 kB
Swap:                  0 kB
KernelPageSize:        4 kB
MMUPageSize:           4 kB 
```

现在根据我的理解，这意味着库已部分加载（因为 RSS 对大小的价值较小）？如果是这样，在引用其他部分时，尝试将该部分放入内存（希望我的理解是正确的）在安装 NFS 的系统的情况下会更加昂贵。那么我们可以让它在运行之前加载所有东西吗？

# bash - sed 未终止的 `s' 命令

> ID：11425340
> 
> 赞同：2
> 
> 时间：2012-07-11T04:02:08.080
> 
> 标签：bash, sed, sh

我有这个 bash 代码

```
REPLACEMENT="s:define('CP_DIRECTORY.*:define('CP_DIRECTORY), ('"${NEWLOCATION}"');:;"
sed -i $REPLACEMENT $INITDATA; 
```

它返回

```
sed: -e expression #1, char 9: unterminated `s' command 
```

我正在尝试替换 initdata.php 中的一行，如下所示：

```
define( 'CP_DIRECTORY', 'admin' ); 
```

对此

```
define( 'CP_DIRECTORY', 'AJgBCecvPBUnPZCLvKukyzfehWrsF5wI' ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:05:27.373

在整个`sed`命令周围加上单引号：

```
sed -i 's:AdminCP = .*:AdminCP = "/home/pi/forums/AJgBCecvPBUnPZCLvKukyzfehWrsF5wI";:' forums/initdata.php 
```

否则，命令会在空格上拆分。此外，您需要在星号前加一个点，否则您只是在说“零个或多个空格”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T05:20:05.987

感谢丹尼斯威廉姆森说我需要引用 sed 命令和[http://www.linuxquestions.org/questions/linux-software-2/sed-with-bash-variables-304260/](http://www.linuxquestions.org/questions/linux-software-2/sed-with-bash-variables-304260/)

最终代码是

```
 REPLACEMENT="define( 'CP_DIRECTORY' ), ( '"
    REPLACEMENT=$REPLACEMENT$NEWLOCATION;
    REPLACEMENT=$REPLACEMENT"' );:;";
    sed -i "s:define( 'CP_DIRECTORY.*:$REPLACEMENT" $INITDATA; 
```

# sql-server-2008 - 如何从 SQL Server 中表的所有列中获取唯一值

> ID：11425341
> 
> 赞同：1
> 
> 时间：2012-07-11T04:02:15.313
> 
> 标签：sql-server-2008

我有 60 列，我需要使用 SQL 查询从所有列中获取唯一值。在 SQL Server 中可以吗？

注意我需要从所有列中找到不同的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:59:19.867

请尝试此代码

```
declare @Sql_Str varchar(8000)='';
select @Sql_Str=@Sql_Str+' select cast (' +name  +' as varchar(500)) from 
<yourtable> union' from sys.columns where [object_id]=object_id('<yourtable>')
set @Sql_Str=SUBSTRING(@Sql_Str,1,len(@Sql_Str)-6)
exec(@Sql_Str) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:20:09.983

1.  将 SSMS 对象资源管理器中的列标题拖到查询窗口。
2.  使用正则表达式查找并用“\n”替换“,”。
3.  为每一列使用正则表达式为每一列生成一个 SELECT INTO 不同的查询，并将输出分配给由正则表达式构建的临时表。
4.  利用临时表中的数据。

# java - 用于 HTML5 验证的开源 Java 库？

> ID：11425342
> 
> 赞同：7
> 
> 时间：2012-07-11T04:02:16.890
> 
> 标签：java, html

是否有任何用于 HTML5 验证的优秀开源 Java 库？如果它也进行 CSS 3 验证，那就太好了。JTidy 已经有一段时间没有维护了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T08:11:43.413

[W3C HTML](http://dvcs.w3.org/hg/markup-validator/file/tip/)和[CSS](http://dev.w3.org/cvsweb/2002/css-validator/)验证器的源代码都是可用的，但只有 CSS 是用 Java 编写的。validator.nu的[repo 在这里](https://hg.mozilla.org/projects/htmlparser/)，它是用 Java 编写的。

但是您应该注意，HTML5 验证与以前版本的 HTML 不同。以前的 HTML 版本依赖于 DTD 并遵循 SGML 验证模型，HTML5 不再具有 DTD 或任何到 SGML 的链接。您想要的可能不是 HTML5 验证器，而是[HTML5 linter](http://lint.brihten.com/html/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T04:42:32.923

[validator.nu](http://about.validator.nu/htmlparser/)是开源的。虽然没有 CSS 解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-11T19:18:32.313

我自己问了同样的问题，我看到有一个名为的项目，它在 Java`jcabi`中实现了一个*非常简单的验证接口。*

[http://w3c.jcabi.com](http://w3c.jcabi.com)

基于他们的 GIT 自述文件的非常简单的示例：

```
import com.jcabi.w3c.HtmlValidator;
assert ValidatorBuilder
           .html()
           .validate("<html>hello!</html>")
           .valid()
           ; 
```

尽管您可以安装自己的本地实例，但它似乎会检查远程服务（这似乎有点过头了，具体取决于您在做什么）。

# algorithm - 该算法的复杂度（Big-O）是多少？

> ID：11425344
> 
> 赞同：6
> 
> 时间：2012-07-11T04:02:24.510
> 
> 标签：algorithm, complexity-theory, big-o, permutation

我对算法分析相当熟悉，并且可以告诉我使用的大多数算法的 Big-O。但是我被困了好几个小时，无法为我编写的这段代码想出 Big-O。

基本上它是一种为字符串生成排列的方法。它的工作原理是使字符串中的每个字符成为第一个字符，并将其与子字符串的排列组合（递归地）。

如果我输入代码来计算迭代次数，我会得到介于 O(N!) 和 O(N^N) 之间的数值。但我无法弄清楚如何在心理上分析它。任何建议都非常感谢！

```
import java.util.ArrayList;
import java.util.List;

public class Permutation {

   int count = 0;

   List<String> findPermutations(String str) {
      List<String> permutations = new ArrayList<String>();
      if (str.length() <= 1) { 
         count++;
         permutations.add(str);
         return permutations;
      }
      for (int i = 0; i < str.length(); i++) {
         String sub = str.substring(0, i) + str.substring(i + 1);
         for (String permOfSub : findPermutations(sub)) {
            count++;
            permutations.add(str.charAt(i) + permOfSub);
         }
      }
      return permutations;
   }

   public static void main(String[] args) {
      for (String s : new String[] {"a", "ab", "abc", "abcd", "abcde", "abcdef", "abcdefg", "abcdefgh"}) {
         Permutation p = new Permutation();
         p.findPermutations(s);
         System.out.printf("Count %d vs N! %d%n", p.count, fact(s.length()));
      }
   }

   private static int fact(int i) {
      return i <= 1 ? i : i * fact(i-1);
   }
} 
```

**编辑1：**添加测试程序

**编辑2：**添加`count++`基本情况

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T04:20:47.213

递推方程：`T(n) = n*(T(n-1) + (n-1)!), T(1) = 1`其中`n = str.length`.

WolframAlfa 说解是 n*(1) [n]即`n*n!`.

以上假设所有字符串操作都是 O(1)。否则，如果`String sub = ...`和`permutations.add(str.charAt(i) + permOfSub)`行的成本被认为是 O(n)，那么等式是：

```
T(n+1)=(n+1)*(n + T(n) + n!*(n+1)) 
```

T(n) ~ (n*n+2*n-1)*n! IE，`O(n!*n*n)`

# scala - scala 对推断类型的“可接受的复杂性”有什么限制？

> ID：11425350
> 
> 赞同：120
> 
> 时间：2012-07-11T04:03:03.920
> 
> 标签：scala, type-inference

根据[Scala 语言规范](http://www.scala-lang.org/docu/files/ScalaReference.pdf#page58)：

> ...允许本地类型推断来限制推断范围[类型参数]的复杂性。必须相对于可接受复杂性的类型集来理解类型的最小性和最大性。

在实践中，限制是什么？

此外，适用于推断表达式类型的限制与适用于参数类型边界的限制是否不同，这些限制是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T12:38:27.160

在推断类型时，编译器通常需要计算类型列表的最小上界 (LUB)。例如， 的类型是和`if (cond) e1 else e1`的类型的 LUB 。`e1``e1`

这些类型可能会变得非常大，例如在 REPL 中尝试：

```
:type Map(1 -> (1 to 10), 2 -> (1 to 10).toList)
scala.collection.immutable.Map[Int,scala.collection.immutable.Seq[Int] with scala.collection.AbstractSeq[Int] with Serializable{def reverse: scala.collection.immutable.Seq[Int] with scala.collection.AbstractSeq[Int]{def reverse: scala.collection.immutable.Seq[Int] with scala.collection.AbstractSeq[Int]; def dropRight(n: Int): scala.collection.immutable.Seq[Int] with scala.collection.AbstractSeq[Int]; def takeRight(n: Int): scala.collection.immutable.Seq[Int] with scala.collection.AbstractSeq[Int]; def drop(n: Int): scala.collection.immutable.Seq[Int] with scala.collection.AbstractSeq[Int]; def take(n: Int): scala.collection.immutable.Seq[Int] with scala.collection.AbstractSeq[Int]}; def dropRight(n: Int): scala.collection.immutable.Seq[Int] with scala.collection.AbstractSeq[Int]{def reverse: scala.collection.immutable.Seq[Int] with scala.collection.AbstractSeq[Int]; def dropRight(n: Int): scala.collection.immutable.Seq[Int]... 
```

此[提交](https://github.com/scala/scala/commit/1dd02bdd72)引入了一些健全性检查以限制此类推断类型的深度。

最近有一些工作将插件插入到编译过程中，以检测需要很长时间计算的推断类型，并建议可能需要显式类型注释的位置。

# iphone - iOS，iPhone 应用的标签样式控制

> ID：11425351
> 
> 赞同：6
> 
> 时间：2012-07-11T04:03:07.610
> 
> 标签：iphone, ios, tags

想知道是否有一种简单的方法来创建类似于[http://xoxco.com/projects/code/tagsinput/](http://xoxco.com/projects/code/tagsinput/)之类的 jQuery 标签样式 iOS 控件，可以通过单击十字图标将其删除。

# algorithm - BST 中的第二个最大值

> ID：11425352
> 
> 赞同：21
> 
> 时间：2012-07-11T04:03:13.680
> 
> 标签：algorithm, data-structures, language-agnostic, binary-search-tree

这是一道面试题。在 BST 中找到第二个最大值。

最大元素是 BST 中最右边的叶子。第二个最大值是它的父节点或左子节点。所以解决的办法是遍历BST找到最右边的叶子，检查它的父节点和左子节点。

是否有意义？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-11T04:16:18.050

不，那是错误的。考虑这个 BST：

```
 137
       /
      42
       \
        99 
```

这里，第二个到最大值是最大值的左孩子的最右边的孩子。您的算法将需要更新，以便您检查最大值的父项，或最大值左子项的最右边子项。

另外，请注意，最大值不一定是最右边的*叶*节点，它是树右脊底部的节点。上面，137 不是一片叶子。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-11T04:24:48.140

回想一下，您可以通过在首先探索右子树的地方进行修改后的中[*序遍历*](http://en.wikipedia.org/wiki/Tree_traversal#Inorder_Traversal)来以相反的顺序列出 BST 的节点。这导致了一个简单的算法：

```
Node rightmost = findRightmostNode(root)
if (rightmost.left != null) {
    return findRightmostNode(rightmost.left)
else{
    return rightmost.parent
} 
```

如果树只有一个元素，它将返回 null。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-10T21:43:38.637

```
public static int findSecondLargestValueInBST(Node root)
    {
        int secondMax;
        Node pre = root;
        Node cur = root;
        while (cur.Right != null)
        {
            pre = cur;
            cur = cur.Right;
        }
        if (cur.Left != null)
        {
            cur = cur.Left;
            while (cur.Right != null)
                cur = cur.Right;
            secondMax = cur.Value;
        }
        else
        {
            if (cur == root && pre == root)
                //Only one node in BST
                secondMax = int.MinValue;
            else
                secondMax = pre.Value;
        }
        return secondMax;
    } 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-07-19T05:56:33.647

时间复杂度**O(logN)**和空间复杂度**O(1)的更简单的迭代方法**

```
public static void main(String[] args) {    
        BinaryTreeNode result=isBinarySearchTree.secondLargest(rootNode);

            System.out.println(result.data);
        }

        private BinaryTreeNode secondLargest(BinaryTreeNode node) {

            BinaryTreeNode prevNode=null; //2nd largest Element
            BinaryTreeNode currNode=node;
            if(null == currNode)
                return prevNode;

            while(currNode.right != null){
                prevNode=currNode;
                currNode=currNode.right;
            }
            if(currNode.left != null){
                currNode=currNode.left;
                while(currNode.right != null){
                    currNode=currNode.right;
                }
                prevNode=currNode;
            }

            return prevNode;

        } 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-31T23:55:47.853

算法可以如下

```
1\. find the largest number in the tree. 

  private static int findLargestValueInTree(Node root) {
    while (root.right != null) {
     root = root.right;
    }
    return root.data;
  }

2\. Find the largest number in the tree that is smaller than the number we found in step 1

 public static int findSecondLargest(Node root, int largest, int current) {
   while (root != null) {
    if (root.data < largest) {
      current = root.data;
      root = root.right;
    } else {
      root = root.left;
   }
   }
  return current;
 } 
```

'current' 跟踪当前最大的数字，该数字小于在 step1 中找到的数字

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-01-02T03:16:26.670

简单的javascript实现。

```
function Node (value, left, right) {
    this.value = value;
    this.left = left;
    this.right = right; 
}

function second (node, prev, wentLeft) {
    if (node.right) {
        return second(node.right, node, wentLeft);
    } else if (node.left) {
        return second(node.left, node, true);
    } else {
        if (wentLeft) return node.value;
        return prev.value;
    }
}
second(root); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-09T13:00:45.713

一种遍历变体：

```
 public Tree GetSecondMax(Tree root)
    {
        Tree parentOfMax = null;

        var maxNode = GetMaxNode(root, ref parentOfMax);

        if (maxNode == root || maxnode.left != null)
        {
            // if maximum node is root or have left subtree, then return maximum from left subtree
            return GetMaxNode(maxnode.left, ref parentOfMax);
        }

        // if maximum node is not root, then return parent of maximum node
        return parentOfMax;
    }

    private Tree GetMaxNode(Tree root, ref Tree previousNode)
    {
        if (root == null || root.right == null)
        {
            // The most right element have reached
            return root;
        }

        // we was there
        previousNode = root;

        return GetMaxNode(root.right, ref previousNode);
    } 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-10-11T21:32:24.043

```
int getmax(node *root)
{
    if(root->right == NULL)
    {
        return root->d;
    }
    return getmax(root->right);
}

int secondmax(node *root)
{
    if(root == NULL)
    {
        return -1;
    }

    if(root->right == NULL && root->left != NULL)
    {
        return getmax(root->left);
    }

    if(root->right != NULL)
    {
        if(root->right->right == NULL && root->right->left == NULL)
        {
            return root->d;
        }
    }

    return secondmax(root->right);
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-09-21T05:09:17.247

考虑这一点的一种非常直观的方法是考虑以下两种情况。设第二大节点为 S，最大节点为 L。

i) S 比 L“更早”插入到 BST。 ii) S 比 L“晚”插入到 BST。

对于第一种情况，很明显 L 是 S 的右孩子。这是因为除了 L 之外的任何节点都小于 S，因此不会放在 S 的右侧。因此，当放 L 时，它将是 S 的右孩子。

对于第二种情况，当 S 被插入时，L 将是 BST 中最右边的节点。显然，L 不会有正确的孩子，因为它是最大的。但是，L 可以有自己的左子树。当S被插入时，S会沿着“右路”直到遇到L，然后左转去L的左子树。这里，我们知道L的左子树中的所有节点都小于S，所以S将是子树中最右边的节点。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-06-03T09:02:29.863

```
int getSecondLargest(Node root){
    if(root==null)
        return 0;
    Node curr=root;
    Node prev=root;
    //Go to the largest node
    while(curr.right != null){
        prev = curr;
        curr= curr.right;
    }
    //If largest Node has left child, Then largest element of tree with its root as largest.left will be the second largest number.
    if(curr.left == null)
        return prev.data;
    else
        return findLargest(curr.left);
}

int findLargest(Node root){
    // No need toi check for null condition as in getSecondLargest method, its already done.
    Node curr=root;
    //To find largest just keep on going to right child till leaf is encountered.
    while(curr.right != null){
        curr = curr.right;
    }
    return curr.data;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-10-17T22:53:44.293

我会通过从最大到最小元素遍历树并在达到询问位置时返回值来做到这一点。我为第二大价值实施了类似的任务。

```
void BTree::findSecondLargestValueUtil(Node* r, int &c, int &v)
{
    if(r->right) {
        this->findSecondLargestValueUtil(r->right, c, v);
    }

    c++;

    if(c==2) {
        v = r->value;
        return;
    }

    if(r->left) {
        this->findSecondLargestValueUtil(r->left, c, v);
    }
}

int BTree::findSecondLargestValue()
{
    int c = 0;
    int v = -1;

    this->findSecondLargestValueUtil(this->root, c, v);

    return v;
} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-07-19T06:06:23.363

您已接近正确答案。

这是我对直观答案的尝试。

最大节点是最右边的节点。

最右边节点的左子树下的任何内容都大于除最右边节点之外的所有元素。因此，这个子树中的最大节点就是答案。

如果没有左子树，则最右节点的父节点是大于除最右节点之外的所有其他节点的父节点。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-08-12T21:08:21.217

这个想法是一直向右走，直到右边没有任何东西。如果有左边，就走，然后一直向右走。如果您向左走，答案是遇到的最后一个节点。否则，答案是您遇到的倒数第二个节点。

这是Java中的递归解决方案：

```
public TreeNode getSecondLargest(TreeNode root) {
    if(root == null || (root.left == null && root.right == null))
        throw new IllegalArgumentException("The tree must have at least two nodes");
    return helper(root, null, false);
}

private TreeNode helper(TreeNode root, TreeNode parent, boolean wentLeft) {
    if(root.right != null) return helper(root.right, root, wentLeft);
    if(root.left != null && !wentLeft) return helper(root.left, root, true);

    if(wentLeft) return root;
    else return parent;
} 
```

时间复杂度为 O(lg n)。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-10-19T09:58:21.247

这种在 BST 中找到第二个最大元素的算法将花费时间复杂度：O(n) --> 在最坏的情况下，树是右斜树。如果树是平衡树，那么时间复杂度是 O(height) 即 O(log n) 并且空间复杂度也一样：O(n) --> 在最坏的情况下 O(log n) --> 当树是平衡的。

```
public TreeNode secondMax(TreeNode root){
    return helper(root,null);
}
private TreeNode helper(TreeNode root,TreeNode prev){
    if(root==null)
        return root;
    if(root.right==null && root.left!=null)
        return root.left;
    else if(root.right==null && root.left==null)
        return prev;
    return helper(root.right,root);
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-02-10T20:03:27.140

该算法在树上运行一次，并返回在 处的最大项目和在 处的`Item1`第二大项目`Item2`。排序调用是*O(1)*，因为它们与树的大小无关。因此，当树平衡时，总**时间复杂度**为**O(N)**，**空间复杂度**为**O(log(N)) 。**

```
public static Tuple<int, int> SecondLargest(TreeNode<int> node)
{
    int thisValue = node.Value;
    if ((node.Left == null || node.Left.Right == null) && node.Right == null)
    {
        return new Tuple<int, int>(thisValue, -int.MaxValue);
    }
    else if (node.Left == null || node.Left.Right == null)
    {
        Tuple<int, int> right = SecondLargest(node.Right);
        List<int> sortLargest = new List<int>(new int[] { right.Item1, right.Item2, thisValue });
        sortLargest.Sort();
        return new Tuple<int, int>(sortLargest[2], sortLargest[1]);
    }
    else if (node.Right == null)
    {
        Tuple<int, int> left = SecondLargest(node.Left.Right);
        List<int> sortLargest = new List<int>(new int[] { left.Item1, left.Item2, thisValue });
        sortLargest.Sort();
        return new Tuple<int, int>(sortLargest[2], sortLargest[1]);
    }
    else
    {
        Tuple<int, int> left = SecondLargest(node.Left.Right);
        Tuple<int, int> right = SecondLargest(node.Right);
        List<int> sortLargest = new List<int>(new int[] { left.Item1, left.Item2, right.Item1, right.Item2, thisValue });
        sortLargest.Sort();
        return new Tuple<int, int>(sortLargest[4], sortLargest[3]);
    }
} 
```

# javascript - 设置 Javascript 函数的范围问题

> ID：11425355
> 
> 赞同：3
> 
> 时间：2012-07-11T04:03:51.007
> 
> 标签：javascript, function, scope

我处于需要“更新”另一个javascript文件中存在的函数的位置。该文件如下所示：

```
function jf(){
    alert('1');
}

//call jf periodically
 jf(); 
```

之后加载的第二个 js 文件如下所示：

```
console.log(jf);
console.log(window.jf);
var func=function(){
  alert('2');  
};
jf=func;
window.jf=func; 
```

第一个日志成功返回原始 jf 方法，第二个没有。第一组好像设置了局部变量jf，第二组基本什么都不做。有没有办法实现这个功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:17:14.820

根据[Javascript 闭包 - 全局范围内覆盖函数的行为](https://stackoverflow.com/questions/9338326/javascript-closures-behavior-of-overridden-functions-from-the-global-scope)

> `var done =`并`function done`做基本相同的事情。它们**将在内部范围内隐藏外部定义，**但不会在外部范围内替换它。

这意味着您只能覆盖您`function jf()`是否处于同一执行上下文中的初始定义。否则，替换`function jf(){ ...`为`window.jf = function(){...`

此外，在检查器控制台中运行测试可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T04:07:49.613

首先，使用变量：

```
var jf = function () {
    alert('1');
};

jf(); 
```

然后第二位应该可以正常工作：

```
var func = function () {
    alert('2');
};

jf = func;
jf(); 
```

# signalr - signalR 不工作的简单示例

> ID：11425356
> 
> 赞同：5
> 
> 时间：2012-07-11T04:03:53.743
> 
> 标签：signalr

无法让 SignalR 在我的机器上工作（使用 IE9）。在输入一些文本并单击提交时，文本未按预期列出。另外，我希望该列表会从多个浏览器实例中更新，但它不会发生。没有错误。有人可以帮忙吗？

## C＃

```
namespace TestSignalR.Hubs
{
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Web;

    /// <summary>
    /// Summary description for ChatHub.
    /// </summary>
    public class ChatHub : SignalR.Hubs.Hub
    {
        public void TestMessage(string message)
        {
            Clients.writeMessage(message);
        }
    }
} 
```

## ASPX

```
<input type="text" name="txtInput" id="txtInput" />
<button id="btnSubmit">Submit</button>

<ul id="messages">
</ul>
<script type="text/javascript" src="SignalR/Hubs"></script>
<script type="text/javascript">
    $(document).ready(function (message) {
        var chat = $.connection.chatHub;

        chat.writeMessage = function (message) {
            $("#messages").append("<li>" + message + "</li>");
        };

        $("#btnSubmit").click(function () {
            var text = $("#txtInput").val();
            chat.testMessage(text);
        });

        $.connection.hub.start();
    });

</script> 
```

母版页有 JQuery 和 SignalR 文件的参考：-

```
<script src="Scripts/jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="Scripts/jquery.signalR-0.5.2.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T19:48:31.167

今天我正在处理同样的问题。

首先，您需要使用名称向 Hub 添加一个属性，如下所示：

```
[HubName("chathub")]
public class ChatHub : SignalR.Hubs.Hub 
```

接下来要做的是更改 javascript 中调用的顺序。您需要在旁边进行连接以实例化集线器。因此，代码如下：

```
$(document).ready(function (message) {
   var chat = $.connection.chatHub;

   $.connection.hub.start();

   chat.writeMessage = function (message) {
      $("#messages").append("<li>" + message + "</li>");
   };

    $("#btnSubmit").click(function () {
        var text = $("#txtInput").val();
        chat.testMessage(text);
    });        
 }); 
```

我希望这个对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T21:15:06.457

请同时安装 Nuget 的 SignalR 1.0 版本。从您的脚本参考来看，您使用的是 0.5.2，而在撰写本文时最新支持的版本是 1.0。请从 Nuget 下载 Microsoft.AspNet.SignalR

# objective-c - 你可以在objective-c中进行内联汇编吗？

> ID：11425360
> 
> 赞同：5
> 
> 时间：2012-07-11T04:04:47.140
> 
> 标签：objective-c, xcode

> **可能重复：**
> [如何在 iPhone 上进行内联汇编？](https://stackoverflow.com/questions/238010/how-do-i-do-inline-assembly-on-the-iphone)

我正在运行 xcode4.2.1，我可以在代码中进行在线汇编，即 __asm 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T04:39:23.470

这只是使用指定的内联和**asm** () 调用的问题：

```
inline void myFunction() {
    __asm__(//asm goes here);
} 
```

CLANG 确实使用了类似但不同形式的 ASM（它仍然与 GAS 非常兼容，可以在[此处阅读](http://clang.llvm.org/compatibility.html#inline-asm)

# sql - 语义分析错误

> ID：11425364
> 
> 赞同：0
> 
> 时间：2012-07-11T04:05:23.667
> 
> 标签：sql

我对这个查询做错了什么，每当我尝试执行它时，我总是会收到错误消息。

```
SELECT
   t1.buyer_id,
   t1.item_id,
   t1.created_time,
   t2.product_id,
   t2.timestamps
FROM
   TestingTable1 t1
   JOIN
   (
   SELECT
      user_id,
      prod_and_ts.product_id as product_id,
      prod_and_ts.timestamps as timestamps
   FROM 
      TestingTable2 
      LATERAL VIEW explode(purchased_item) exploded_table as prod_and_ts
   ) t2
   ON(t1.buyer_id = t2.user_id)
WHERE
   (t1.item_id <> t2.product_id)
   OR (unix_timestamp(t1.created_time) <> t2.timestamps); 
```

这是我得到的错误-

```
FAILED: Error in semantic analysis: line 13:6 Invalid Table Alias or 
Column Reference prod_and_ts 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:59:52.807

我不确定，但横向视图语法

```
LATERAL VIEW udtf(expression) tableAlias AS columnAlias (',' columnAlias)* 
```

在您的情况下 prod_and_ts 它是 columnAlias，而不是 tableAlias，您不能使用 prod_and_ts.product_id。而是尝试仅使用 prod_and_ts。

# mysql - 此查询中的错误是什么

> ID：11425365
> 
> 赞同：0
> 
> 时间：2012-07-11T04:05:24.220
> 
> 标签：mysql, mysql-error-1054

*   数据库：网球
*   表：匹配
*   列：matchno(pk)、won、lost ...等

问题：获取每场比赛的比赛号码和输赢盘数，其中获胜盘数 >= 亏损盘数乘以 2。

错误查询：

```
use tennis;
select matchno, lost * 2 AS spl
from matches 
where won >= spl 
```

这个查询有什么问题？如何修改它以获得正确的输出？

正确查询：

```
select matchno, won, lost
from matches
where won >= lost * 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T04:09:47.413

```
SELECT matchno, lost * 2 AS spl
FROM matches
WHERE won >= (lost * 2) 
```

# c++ - 在 C++ 的 Eclipse 中出现了非常困难的错误

> ID：11425369
> 
> 赞同：1
> 
> 时间：2012-07-11T04:05:38.363
> 
> 标签：c++, eclipse, compilation

我刚刚下载了eclipse c/c++ IDE developer并制作了一个C++项目。但随后在问题选项卡下，出现了这个问题，我无法从那里继续做任何其他事情。

```
sh-c "autoreconf-i" 
```

好的，我下载了MinGW。安装的时候，我点击下载原仓库目录，接受协议，当它让我选择安装MinGW的哪些可选组件时，我点击了c++编译器，虽然底部有msys基础系统和mingw开发者工具包，我没有点击。安装后，我去计算机属性然后环境变量，然后添加`;C:\MinGW\bin`到路径。然后我搜索了 cmd 并输入了 gcc。它输出了，`"gcc : fatal error : no input files"`下面是`"compilation terminated."`. 我单击了 eclipse 并单击了 C++ 项目。但是在 Toolchains 下仍然没有 MinGW GCC。我所看到的只是 GNU autotools 工具链。

# django - django 是否使用线程来处理请求？

> ID：11425374
> 
> 赞同：2
> 
> 时间：2012-07-11T04:05:58.030
> 
> 标签：django

Django 用于处理其请求的底层基础设施是什么？

它是否使用线程，有人可以对此提供一些参考吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-15T14:05:19.527

Django 不是网络服务器。它是一个网络框架。它作为应用程序运行的行为取决于您为它提供服务的方法。

它可能是线程请求。它可能是进程。它甚至可以是异步的。

[服务文件](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/#serving-files)

> Django 本身不提供文件。它将这项工作留给您选择的任何 Web 服务器。

wsgi 是目前为 django 提供服务的最常见方式，所以实际上你应该研究不同 wsgi 实现的配置选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-07-25T23:50:54.493

如果您在使用时遇到随机分段错误，`manage.py runserver`因为您必须在项目中使用的某些底层 C 库不是线程安全的，请尝试 `manage.py runserver --nothreading` 改用。

* * *

对于使用 wsgi 之类的工具运行 wsgi 的生产服务，`mod_wsgi`通常可以选择禁用线程。在这种情况下， `WSGIDaemonProcess example processes=5 threads=1` 请参阅[https://modwsgi.readthedocs.io/en/develop/user-guides/processes-and-threading.html](https://modwsgi.readthedocs.io/en/develop/user-guides/processes-and-threading.html)

# select - 将自定义 javascript 函数应用于 iframe 元素

> ID：11425375
> 
> 赞同：0
> 
> 时间：2012-07-11T04:06:30.953
> 
> 标签：select, jquery-plugins, iframe, javascript

我试图弄清楚如何将自定义 javascript 函数应用于位于 iframe 中的下拉菜单元素。Javascript 改变了下拉菜单的外观和感觉，并且非常适合父页面。它不适用于 iframe 中的元素。我在这个网站上搜索了答案，但不幸的是，这里给出的一些例子不适用于我的页面。要记住几件事：

1.  两个页面都在域中
2.  我不能直接将js放在iframe中加载的页面上（下面的代码只是一个例子，真实的东西我无法访问）
3.  我正在使用此处找到的 js 库（我对其进行了一些修改以满足我的需要）[http://www.marghoobsuleman.com/jquery-image-dropdown](http://www.marghoobsuleman.com/jquery-image-dropdown)

这是将在 iframe 中加载的页面。我正在尝试设置 select 元素的样式：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Iframe</title>
</head>
<body>
  <label for="specialty">Specialty: </label>
  <select name="specialty" id="specialty" class="dropdown">
     <option value="calendar">Calendar</option>
     <option value="shopping_cart">Shopping Cart</option>
  </select>
</body>
</html> 
```

这是我尝试调用 js 的父级：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Parent Page</title>
<link rel="stylesheet" type="text/css" href="css/style.css" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="js/jquery.dd.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(e) { 
   try {
      $("body select").msDropDown();
   } 
   catch(e) {
       alert(e.message);
   }
});
$('#frame').load( function(){
   try {
      $(this.contentDocument).find('select').msDropDown();
   }
   catch(e) {
      alert(e.message);
   }
});
</script>
</head>
<body>
   <label for="specialty">Specialty: </label>
   <select name="specialty" id="specialty" class="dropdown">
      <option value="calendar">Calendar</option>
      <option value="shopping_cart">Shopping Cart</option>
    </select>
    <iframe src="add.html" id="frame" name="frame"></iframe>
</body>
</html> 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T19:43:11.390

据我所知，这似乎是不可能的。这可能是插件本身的问题，因为即使在 iframe 的 DOM 上执行函数，该函数也会在父级的 DOM 上执行。

# python - 优雅的列表理解，可根据另一维中的值提取数组的一维中的值

> ID：11425380
> 
> 赞同：1
> 
> 时间：2012-07-11T04:07:10.113
> 
> 标签：python, numpy, list-comprehension

我正在寻找一个优雅的解决方案：

```
data = np.loadtxt(file)
# data[:,0] is a time
# data[:,1] is what I want to extract
mean = 0.0
count = 0
for n in xrange(np.size(data[:,0])):
    if data[n,0] >= tstart and data[n,0] <= tend:
        mean = mean + data[n,1]
        count = count + 1

mean = mean / float(count) 
```

我猜我也可以先提取我的 2D 数组然后应用`np.mean`它，但我觉得可能有一些列表理解的优点可以使它更优雅（我来自 FORTRAN 背景......）。我在想类似的东西（显然是错误的，因为`i`它不是索引）：

```
np.mean([x for x in data[i,1] for i in data[:,0] if i >= tstart and i <= tend]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T04:19:32.077

在 numpy 中，您可以使用列表和数组来进行索引，而不是 listcomps。具体来说，假设我们有一个像您正在使用的那样的二维数组：

```
>>> import numpy as np
>>> data = np.arange(20).reshape(10, 2)
>>> data
array([[ 0,  1],
       [ 2,  3],
       [ 4,  5],
       [ 6,  7],
       [ 8,  9],
       [10, 11],
       [12, 13],
       [14, 15],
       [16, 17],
       [18, 19]]) 
```

我们可以得到第一列：

```
>>> ts = data[:,0] 
>>> ts
array([ 0,  2,  4,  6,  8, 10, 12, 14, 16, 18]) 
```

并创建一个与我们想要的术语相对应的布尔数组：

```
>>> (ts >= 2) & (ts <= 6)
array([False,  True,  True,  True, False, False, False, False, False, False], dtype=bool) 
```

然后我们可以使用它来选择我们感兴趣的列的元素：

```
>>> data[:,1][(ts >= 2) & (ts <= 6)]
array([3, 5, 7]) 
```

最后取其平均值：

```
>>> np.mean(data[:,1][(ts >= 2) & (ts <= 6)])
5.0 
```

或者，在一行中：

```
>>> np.mean(data[:,1][(data[:,0] >= 2) & (data[:,0] <= 6)])
5.0 
```

[编辑：`data[:,1][(data[:,0] >= 2) & (data[:,0] <= 6)].mean()`也可以；我总是忘记你可以使用方法。]

# android - Android 上的 GPS 和地图

> ID：11425382
> 
> 赞同：0
> 
> 时间：2012-07-11T04:07:15.717
> 
> 标签：android, map, gps

我正在开发一个使用地图的 Android 地图绘图应用程序。在搜索了很长时间后，我发现手机上的 GPS 并不花费任何费用，但加载地图确实不会通过 GPS。因此，如果我在手机上预装了地图，那么导航应用程序/绘图仪将完全免费？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:20:03.763

是的，差不多。您可以仅根据 GPS 数据确定设备的位置（前提是它可以找到足够多的卫星）。不过，拥有网络连接通常会大大加快速度。

另外，我不会说使用 GPS 不会“花钱”，因为它有点耗电。只是要记住的事情。

顺便说一句，如果您将 Google 地图应用程序更新到 Plat 上的最新版本，您将获得“离线可用”菜单选项。这允许您选择将在本地缓存（下载到设备上）的区域，因此不需要网络连接来显示图块。我无法告诉你这些缓存的地图是否也可用于其他应用程序，或者谷歌地图专用。如果您打算朝这个方向发展，您可能需要先查看 Google 的许可政策。

请注意，您仍然需要互联网才能从 Google 地图应用程序中计算从 A 到 B 的最短/最快路线。

# c# - Windows 窗体应用程序 - 缓慢/无响应的 UI

> ID：11425395
> 
> 赞同：1
> 
> 时间：2012-07-11T04:09:10.877
> 
> 标签：c#, .net, winforms, multithreading, user-interface

> **可能重复：**
> [C# WinForm 应用程序 - UI 在长时间运行期间挂起](https://stackoverflow.com/questions/1216791/c-sharp-winform-application-ui-hangs-during-long-running-operation)

我使用 C# 和 .NET Framework 4.0 创建了一个 Windows 窗体应用程序。我有一个问题，当程序正在工作时，我无法在窗口中移动，如果我最小化它，我就无法让它回来。我认为这是因为我正在运行 UI 的同一线程上工作。

这可能是原因吗？如果是这样，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T12:57:59.463

如果您不想深入了解线程和线程的内部结构，我建议您使用 BackgroundWorker 控件来完成您的任务。Background worker 控件在幕后封装了很多线程的东西，为您提供一个干净的编程接口。

以下链接可能对您有所帮助（由我编写）

[BackgroundWorker 的正确使用方法](http://www.vbforums.com/showthread.php?t=680130&highlight=backgroundworker)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:21:34.747

尝试在以下位置编写代码：

```
 System.Threading.Tasks.Task.Factory.StartNew(new Action(() =>
            {
                //your code goes here
            })); 
```

因为如果没有任务，您的代码和 UI 会在同一线程上运行，这会导致速度变慢

# objective-c - NSArray 反向索引排序

> ID：11425396
> 
> 赞同：0
> 
> 时间：2012-07-11T04:09:18.213
> 
> 标签：objective-c, ios, nsarray, sorting

这是我的`NSArray`

```
myArray = [NSArray arrayWithObjects: @"a", @"b", @"c", @"d", @"e", nil]; 
```

现在我像这样循环遍历数组：

```
int size = [myArray count];
NSLog(@"there are %d objects in the myArray", size);

for(int i = 1; i <= size; i++) {
    NSString * buttonTitle = [myArray objectAtIndex:i]; 
    // This gives me the order a, b, c, d, e 
    // but I'm looking to sort the array to get this order
    // e,d,c,b,a

    // Other operation use the i int value so i-- doesn't fit my needs
} 
```

在 for 循环中，这给了我命令：

```
a, b, c, d, e 
```

但我正在寻找对数组进行排序以获得此顺序：

```
e, d, c, b, a 
```

有什么想法吗？

我还需要将数组保持在原始排序顺序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T04:11:41.003

尝试调用[`reverseObjectEnumerator`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSArray_Class/NSArray.html#//apple_ref/occ/instm/NSArray/reverseObjectEnumerator)数组并使用 for-in 循环遍历对象：

```
NSArray *myArray = [NSArray arrayWithObjects:@"a", @"b", @"c", nil];

// Interate through array backwards:
for (NSString *buttonTitle in [myArray reverseObjectEnumerator]) {
    NSLog(@"%@", buttonTitle);
} 
```

这将输出：

```
c
b
a 
```

或者，如果您想按索引遍历数组或用它做其他事情，您可以将数组反转到位：

```
NSArray *reversedArray = [[myArray reverseObjectEnumerator] allObjects]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T04:28:25.877

那或者改变你的循环

```
for(int i = size; i >= 1; i--) 
```

# rspec - RSpec 示例在不同的机器上失败的方式不同

> ID：11425398
> 
> 赞同：0
> 
> 时间：2012-07-11T04:09:22.517
> 
> 标签：rspec, raise

**第一个打印错误信息如下：**

```
Failures: 
```

1) UnitShip 测试增删改： Create should be successful Failure/Error: unit_ship = UnitShip.create(DataGenerator::Master.unit_ship) Psych::SyntaxError: could't parse YAML at line 14 column 14 # ./spec/support/ data_generator/master.rb:9:in `unit_ship' # ./spec/models/unit_ship_spec.rb:8:in`block (3 levels) in '

2) UnitShip 测试增删改：删除应该是成功的。失败/错误：unit_ship = UnitShip.create(DataGenerator::Master.unit_ship) Psych::SyntaxError: could't parse YAML at line 14 column 14 # ./spec/support/data_generator/master.rb:9:in `unit_ship' # ./spec/models/unit_ship_spec.rb:28:in`block ( 3 级）在 '

在 1.65 秒内完成 13 个示例，2 个失败

失败的例子：

rspec ./spec/models/unit_ship_spec.rb:7 #UnitShip 测试增删改：创建应该成功 rspec ./spec/models/unit_ship_spec.rb:27 #UnitShip 测试增删改：删除应该成功。

**另一个打印错误信息如下：**

```
Failures: 
```

1) Unit Update should be successful Failure/Error: @fabric.build(:fabric) ActiveRecord::RecordInvalid: Factory失败: 编号已经被使用 # ./models/unit_spec.rb:23:in ` '中的块（3个级别）

2）Unit Destroy不应该成功Failure/Error: @fabric = FactoryGirl.build(:fabric) ActiveRecord::RecordInvalid: 失败被失败: 编号使用#./spec/models/unit_spec.rb:38:已经在` '中的块（3个级别）

在 1.16 秒内完成 13 个示例，2 个失败

失败的例子：

rspec ./spec/models/unit_spec.rb:21 # 单元更新不应该成功 rspec ./spec/models/unit_spec.rb:36 # 单元销毁不应该成功

==================================================== ==================== 这个第一个是不正确的，第二个是正确的。

为什么？

请帮我 。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:15:54.713

它与编译 Ruby 所针对的 Yaml 解析器的版本有关。

您的第二台机器正在使用`Syck`，而您的第一台机器正在使用`Psych`。要强制第一个使用`Syck`，请将其放入您的`application.rb`：

```
YAML::ENGINE.yamler='syck' 
```

# c# - 地理编码时找不到文件：xml 版本=1.0 编码=UTF-8

> ID：11425399
> 
> 赞同：0
> 
> 时间：2012-07-11T04:09:33.373
> 
> 标签：c#, windows-phone-7, google-geocoding-api

我收到此错误消息

> 找不到文件 <?xml version="1.0" encoding="UTF-8"?>

下面是代码。如何解决这个问题？感谢你的帮助。

```
rivate void button1_Click（对象发送者，RoutedEventArgs e）
        {
 string sPath = "http://maps.googleapis.com/maps/api/geocode/xml?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=false";

 WebClient wc = new WebClient();
 wc.DownloadStringAsync(new Uri(sPath));
 wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);  

     }

 void wc_DownloadStringCompleted（对象发送者，Dow​​nloadStringCompletedEventArgs e）
        {

 XDocument xdoc = XDocument.Load(e.Result);

 XElement locationElement = xdoc.Element("GeocodeResponse").Element("result").Element("geometry").Element("location");

双纬度 = (double)locationElement.Element("lat");

双经度 = (double)locationElement.Element("lng");

txtBlkLatLon.Text = latitude.ToString() + "," + longitude.ToString();

}

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:06:05.303

代替

```
XDocument xdoc = XDocument.Load(e.Result); 
```

经过

```
XDocument xdoc = XDocument.Parse(e.Result); 
```

前者试图在字符串指定的位置（包含数据，而不是位置）加载数据。

后者，是试图直接读取数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T06:56:44.497

异常究竟发生在哪里？

您是否尝试过使用 XDocument.Parse 从字符串创建 XDocument？ [http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.parse.aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.parse.aspx)

您还应该在调用 DownloadStringAsync**之前附加 DownloadStringCompleted 事件处理程序。**

# git - 与 Git 一起使用的 YUI Compressor 的 Bash 脚本

> ID：11425400
> 
> 赞同：0
> 
> 时间：2012-07-11T04:09:37.307
> 
> 标签：git, bash, githooks, yui-compressor

我想让我的网站尽可能高效，其中一部分是缩小我的 CSS 和 JavaScript 文件。我的目标是能够在开发中使用未缩小的文件，但在生产中使用缩小的文件。所以我的想法是让我的未缩小文件名正常（foo.css）并且我的缩小文件名相同，只是开头有一个下划线（_foo.css）。

由于开发环境不使用压缩文件，我不必担心保持压缩文件是最新的。唯一应该生成它们的时间是当我提交到网站的 Git 存储库时。所以让它成为一个 Git 钩子是有意义的，这是我以前从未做过的事情。我希望我的同事也可以使用这个钩子。我在 Mac 上，他们在 Linux 上。我有一个可以工作的 shell 脚本，但是有两件事需要修改才能用作 Git 挂钩并供我的同事使用。这两件事是我需要帮助的。但首先，代码：

```
#!/bin/bash

# The files to ignore are already minified.

css_files_to_ignore=(
    "jquery.colorbox-min.css"
);

js_files_to_ignore=(
    "jquery.colorbox-min.js"
);

base_folder=/Applications/MAMP/htdocs/my_project/app/webroot
yuicompressor_path=/Applications/yuicompressor.jar

function process_assets() {
    extension=$1
    files_minified=0

    for infile in $(echo "$base_folder/$extension/*.$extension")
    do
        [[ -f $infile ]] || continue

        filename=${infile##*/}

        # If the filename starts with an underscore, that means that the file is a
        # minified file that was previously generated.

        [[ ${filename:0:1} != "_" ]] || continue

        ignore_this_file=false

        files_to_ignore=$extension"_files_to_ignore"

        for i in $(eval echo \${$files_to_ignore[@]})
        do
            if [[ $i == $filename ]]; then
                ignore_this_file=true
                break
            fi
        done

        if [ $ignore_this_file == false ]; then
            minified_file="$base_folder/$extension/_$filename"

            if [ ! -f "$minified_file" ] || test $infile -nt $minified_file; then
                java -jar $yuicompressor_path "$infile" -o "$minified_file"
                ((files_minified++))
            fi
        fi
    done

    if [ $extension == "css" ]; then
        file_type=CSS
    else
        file_type=JavaScript
    fi

    echo -n "$files_minified $file_type file"

    if [ "$files_minified" == "1" ]; then
        echo -n " was"
    else
        echo -n "s were"
    fi

    echo " minified"
}

if [ -f $yuicompressor_path ]; then
    process_assets css
    process_assets js
else
    echo "YUI Compressor was not found. Aborting."
    exit 1
fi 
```

我需要帮助的第一件事是如何处理`base_folder`变量。既然这将是一个 Git 钩子，那么这个变量应该如何设置呢？提交时的当前工作目录会影响脚本吗？

我需要帮助的第二件事是如何处理`yuicompressor_path`变量。正如我之前所说，我使用的是 Mac，而我的同事使用的是 Linux。如果可能的话，我希望 Git 挂钩对我们所有人都有效。我可以以适合我们所有人的方式设置该变量吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:18:10.063

您可以根据 Git 存储库的路径构建变量内容。

```
base_folder="$(git rev-parse --show-toplevel)" 
```

将设置`base_folder`为等于 Git 存储库顶层的路径。如果您需要将其设置为子路径，只需在之后添加它，例如，如果您的 Git 存储库位于`my_project`文件夹级别，您可能会这样做...

```
base_folder="$(git rev-parse --show-toplevel)/app/webroot" 
```

这应该适用于 OS X 和 Linux。

* * *

设置路径`yuicompressor`有点棘手。我的建议是让人们在本地系统上安装挂钩时手动设置它，或者（如果 yuicompressor 在路径中），使用`which`.

# ruby-on-rails - Rails 资产管道 - JS 和 CoffeeScript

> ID：11425401
> 
> 赞同：1
> 
> 时间：2012-07-11T04:09:44.733
> 
> 标签：ruby-on-rails, asset-pipeline

我的文件夹中有`.js`和`.coffee`文件`/app/assets/javascripts/`。`.coffee`除非我调用，否则文件不会运行，这`rake assets:precompile`很痛苦，因为`rake assets:clean`每当我进行更改时，我都必须重新编译它们。

此外，除了源文件之外，还包含预编译的 .js 文件，这会导致双重事件处理程序和所有这些好东西。

我的理解是，如果没有预编译咖啡脚本，则应在每次请求时将其编译为 javascript，但似乎并没有这样做。我在 Firebug 中找不到加载的已编译脚本，至少我看不到它的行为。

我`/config/application.rb`配置了以下行：

```
# Enable the asset pipeline
config.assets.enabled = true 
```

还有什么要检查的？

我正在使用 Rails 3.2.3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T04:26:32.153

> 如果您在本地机器上预编译，那么您可以将这些生成的资产提交到存储库并继续部署。无需在生产机器上编译它们。
> 
> 但它引入了一个问题：现在当您更改源文件（coffescript / scss）时，应用程序不会获取更改，因为它将提供预编译文件。rake assets:clean 删除这些预编译文件。
> 
> 来自[https://stackoverflow.com/a/9335864/643500](https://stackoverflow.com/a/9335864/643500)

如果我希望资产在生产服务器上预编译以获取每次构建的新更改，我通常会做的只是清理资产 - 当然，除非你重新预编译它们

```
rake assets:clean 
```

当进行更改并且您不想在每次构建时预编译它们时

```
rake assets:clean
rake assets:precompile 
```

# plone - ClassSecurityInfo.declarePrivate() 等作为 Python 装饰器

> ID：11425403
> 
> 赞同：0
> 
> 时间：2012-07-11T04:09:48.460
> 
> 标签：plone, zope

是否 declarePrivate() 等。人。Zope 2 风格的访问控制声明有任何现代 Python 语法方法装饰器吗？

例如

```
class EncryptedField(StringField):
    """
    """
    security = ClassSecurityInfo()

    # Something more nice here? like @private?
    security.declarePrivate('get')

    def get(self, instance, **kwargs):
        value = ObjectField.get(self, instance, **kwargs)
        if getattr(self, 'raw', False):
            return value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:24:51.990

不，我们仍然坚持这种语法。

它们不能轻易转换为装饰器，因为它们是类级别的声明，实际上并未附加到方法上。您需要在调用框架上玩一些讨厌的技巧才能返回到类声明和`security`对象以使其工作。

因此，有一个步骤`security`是处理对象以将声明转换为 Zope2 识别的类属性；这一步现在由原型`registerType`调用自动处理。

# mysql - SQL *= 语句（外连接）

> ID：11425405
> 
> 赞同：1
> 
> 时间：2012-07-11T04:10:09.130
> 
> 标签：mysql, sql-server, vb.net, vb6, sybase

目前，我正在将 VB6 转换为 VB.NET。转换后，我想在 SQL 中插入/选择，但我需要知道我的 sql 语句的含义。

我的声明：

```
XXX  where  adj.reasonid *=  re.reasonid and (status <> 'A'OR action = 'H') 
```

有人可以知道 *= 的意思吗？和

`in (status <> 'A'OR action = 'H')`这是否意味着任何一个条件都可以选择数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:16:24.387

`*=`是左外连接的替代（我相信已过时）语法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T04:16:32.497

`Outer Join`这是sql server 中的旧语法。

SQL Server 长期以来支持两种形式的`OUTER JOIN syntax`、`ANSI syntax (using LEFT OUTER JOIN, RIGHT OUTER JOIN`等），以及简化的`T-SQL syntax (using`*= 和 =*`).`

[http://www.forta.com/blog/index.cfm/2006/1/15/SQL-Server-2005-Outer-Join-Gotcha](http://www.forta.com/blog/index.cfm/2006/1/15/SQL-Server-2005-Outer-Join-Gotcha)

在你的代码中。

```
where  adj.reasonid Left Outer Join re.reasonid 
and (status <> 'A' OR action = 'H') 
```

对于在。

```
in (status <> 'A'OR action = 'H') 
```

OR 运算符只计算表达式，直到找到 TRUE 结果。

# web-scraping - 有没有办法下载所有格式的所有谷歌网络字体？

> ID：11425413
> 
> 赞同：1
> 
> 时间：2012-07-11T04:11:10.630
> 
> 标签：web-scraping, font-face, webfonts, google-webfonts, progressive-download

首先，我很清楚[这个问题](https://stackoverflow.com/questions/11273210/any-place-to-get-google-webfonts-in-all-formats)，我有一种强烈的感觉，它被关闭了，因为它是由谷歌评论家提出的。

我的子问题是：我是否可以假设[此处描述的处理是在 ttf 创建](http://code.google.com/p/googlefontdirectory/wiki/HowToGenerateWebNativeFonts)**之后**完成的，这意味着不可能将它们全部一起批量转换？如果请告诉我如何（在Linux上）

*即使它更喜欢谷歌提供的实际文件，而不是让网络服务或工具转换它们，因为谷歌可能会以绝对最好的方式做到这一点！*

我有一种感觉，那里有什么东西，某处。因为它*可能*只需要一个脚本来更改浏览器引用并询问 google http 响应，下载它们并将它们重命名为基于 css 中的“本地”字体名的名称。此外，一些网页抓取字体名称和可能的变化（粗体/正常/...）

这就是为什么我除此之外再次尝试这个的原因：我是一名网络程序员，我需要这个用于我的本地主机网络开发所以这是一个在我看来对于 Stack Overflow 来说这是一个完全有效的问题，我相信很多人都有这个愿望轻松掌握所有字体。因此，请至少将其迁移到您认为不是有效问题的地方！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-12T18:40:32.553

[从https://fonts.google.com/metadata/fonts](https://fonts.google.com/metadata/fonts)中提取可用字体列表。然后使用[goog-webfont-dl](https://www.npmjs.com/package/goog-webfont-dl)下载每种字体的所有格式。我使用该命令`cat ~/fonts.txt| while read line; do goog-webfont-dl -a -f $line;done`下载列表中的每种字体。这是[2016-07-12 之前所有字体的要点](https://gist.github.com/sanbor/f65b5b014a4fdcdc3346a8fcfd800886)。

# events - 获取某个个人资料正在参加的活动

> ID：11425417
> 
> 赞同：0
> 
> 时间：2012-07-11T04:11:27.180
> 
> 标签：events, facebook-fql, profile

我试图获取某些个人资料 rsvp 状态正在参加的某些事件的一些信息，但它检索为空白。也许是关于访问权限或其他什么的。

这是我目前的fql

```
SELECT name, pic, start_time, end_time, location, description 
            FROM event WHERE eid IN ( SELECT eid FROM event_member WHERE uid = 100003454558689 AND rsvp_status = 'attending') 
            ORDER BY start_time asc 
```

但它检索空白。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:40:25.050

好吧，您的代码很好，您只需要确保您拥有用户获取该数据的权利。所以去 facebook graph explorer，然后弹出你的代码，但是这次将 UID 更改为 me()。为什么这行得通？

*   Facebook 应用授予的访问令牌决定了您可以在 Facebook 上看到哪些用户数据。Graph Explorer 默认显示您自己的数据。
*   因此，请确保您对事件数据具有正确的权限。您可以通过 Graph explorer 上的 Acess Token 下拉菜单对其进行测试。
*   这是权限列表：[https ://developers.facebook.com/docs/authentication/permissions/](https://developers.facebook.com/docs/authentication/permissions/)

*   看起来你需要“user_events”

因此，FQL 可能没有问题，但身份验证过程中存在问题。祝你好运。

# rss - 如何将站点的整个 RSS 历史记录为 XML？

> ID：11425421
> 
> 赞同：1
> 
> 时间：2012-07-11T04:11:44.590
> 
> 标签：rss

给定一个网站/博客的 RSS 提要链接，有没有办法在单个 XML 文件中获取该网站的整个 RSS 历史（所有博客帖子）？这是否只有从另一端才有可能（即，一个站点将其整个博客历史发布为 RSS）？在这种情况下，这是如何实现的？

谢谢！小号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:42:17.653

RSS 只是表达数据的另一种方式。这完全取决于网站。如果该站点为您提供了一种方法来指定您想要多少项目（这不太可能），那么您应该知道这在其他站点上不起作用。

从技术上讲，在 RSS 中格式化数据与在 HTML 中格式化没有什么不同。例如，许多站点（包括这个站点）需要在 HTML 页面上表示一些顺序数据（在 SO 的情况下是问题）。为此，该站点将遍历某些数据源（如数据库），并输出 HTML，以便您的 Web 浏览器可以呈现它，直到达到某个限制。知道这个限制是不可能的，因为它取决于站点。这正是 RSS 所做的：它遍历数据源，同时输出 XML。同样，不可能知道极限。

> 这是只有从另一端才有可能的事情......？在这种情况下，这是如何实现的？

如果您可以更改站点生成 RSS 的方式，只需取消限制即可。我知道这很模糊，但这确实取决于实施。有几十种 RSS 实现，全都不同，而且行为也各不相同。

所以我的观点是，没有什么是通用的，你必须改变网站本身来修改这种行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:42:07.960

你就在那儿。该站点必须发布其整个历史，否则您将无法获得它。在服务器端执行此操作，如果您可以访问数据库，则非常容易。只需将所有行转储为 XML。过滤和限制xml实际上需要付出努力。您如何在博客平台上做到这一点？您可以使用允许您执行此操作的插件

# android - 如何使用网络服务在地图上查找位置？

> ID：11425426
> 
> 赞同：0
> 
> 时间：2012-07-11T04:12:28.973
> 
> 标签：android, web-services, location

我是android开发的新手。我正在开发一个应用程序，用户必须记录位置，然后找到他停放的汽车。我不知道如何在这里使用网络服务。如何使用网络服务在这里找到停在地图上的汽车？另外我手动给出了纬度和经度的值。应该怎么做？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:15:51.223

您需要网络服务与网络服务通信以发送和获取数据。试试这个链接它可以帮助你。

检查[链接](http://www.codeproject.com/Articles/267023/Send-and-receive-json-between-android-and-php)

谢谢。

# android - 相机/视频预览 SurfaceView 在设备转动时消失

> ID：11425427
> 
> 赞同：0
> 
> 时间：2012-07-11T04:12:38.537
> 
> 标签：android, rotation, surfaceview

我正在开始开发一个在 Android 平板电脑上访问相机视频数据的应用程序。目前，我正在尝试在 SurfaceView 中显示来自相机的预览。SurfaceView 在我第一次运行应用程序时显示预览，但只要我旋转设备，SurfaceView 就会消失。然而，数据仍在收集中，因为相机仍在接收信息——只是没有显示信息。

有没有办法修复 SurfaceView 属性，即使在设备旋转后它也会继续预览相机？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:21:42.667

尝试这个

```
public void onConfigurationChanged(Configuration newConfig) { 
        // ignore orientation/keyboard change 
        super.onConfigurationChanged(newConfig);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:22:02.107

在您显示表面视图的活动的清单声明中将 screenOrientation 设置为 potrait，它将避免出现问题。

这就是我处理相同问题的方式。这可能是一个很好的解决方法。

# c++ - D3DX11CompileFromFile 中的第四个参数是什么？

> ID：11425433
> 
> 赞同：1
> 
> 时间：2012-07-11T04:13:39.190
> 
> 标签：c++, direct3d11

我一直在使用 D3DX11CompileFromFile 函数从 blob 指针编译和创建 ID3D11VertexShader * 和 ID3D11PixelShader * ，如下所示：

```
ID3D10Blob * vertexShaderBuffer;
ID3D10Blob * errorMessage;

if(FAILED(D3DX11CompileFromFile(vsFilename.c_str(), NULL, NULL, "LightVertexShader", "vs_5_0", D3D10_SHADER_ENABLE_STRICTNESS, 0, NULL, &vertexShaderBuffer, &errorMessage, NULL)))
    return false;

if(FAILED(device->CreateVertexShader(vertexShaderBuffer->GetBufferPointer(), vertexShaderBuffer->GetBufferSize(), NULL, &m_vertexShader)))
    return false; 
```

其中 vsFilename 是一个有效的 std::string 而 m_vertexShader 是一个 ID3D11ShaderVertex *。我很好奇第四个参数是干什么用的？它在哪里使用，我什么时候使用它，它有什么作用？它是什么有关系吗？我问，因为我在代码中调用它的位置，如果它除了唯一之外没有其他目的，我不希望用户必须指定它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:25:52.277

这是文件中顶点着色器函数的名称

例如，如果您在着色器文件中有相同的代码

```
...

PS_INPUT VS(VS_INPUT input)
{

    PS_INPUT output = (PS_INPUT) 0;
    ... 
```

使用 D3DX11CompileFromFile(shaderFileName.c_str(), nullptr, nullptr, "VS", ...); 之类的函数调用 你向 DirectX 解释着色器文件中的哪个函数开始使用顶点着色器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T04:23:45.370

你检查过 MSDN 上的文档吗？[D3DX11CompileFromFile](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476261%28v=vs.85%29.aspx)函数的参考说明了这个`pFunctionName`参数：

> 着色器执行开始的着色器入口点函数的名称。编译效果时，D3DX11CompileFromFile 会忽略 pFunctionName；我们建议您将 pFunctionName 设置为 NULL，因为如果被调用的函数不使用它，将指针参数设置为 NULL 是一种很好的编程习惯。

# sql - 如何在 Rails 的同一个容器中渲染和排序多个不同的对象？

> ID：11425435
> 
> 赞同：1
> 
> 时间：2012-07-11T04:14:06.713
> 
> 标签：sql, ruby-on-rails

我有两种不同类型的对象，比如 Object1 和 Object2 类。我希望能够在同一个容器中渲染、混合和排序它们。

在控制器动作中：

```
@objects1=Object1.reorder('created_at DESC')
@objects2=Object2.reorder('created_at DESC') 
```

在视图中：

```
 <div class="container">
   <%= render @objects1 %>
   <%= render @objects2 %>
 </div> 
```

我可以使用什么 SQL/ActiveRecord 语句来对它们进行排序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T04:19:49.930

将它们组合成一个数组然后对数组进行排序怎么样？

```
@all_objects = objects1.concat(objects2).sort!{ |a,b| a.created_at <=> b.created_at } 
```

# image - 如何将图片分配给堆积条形图

> ID：11425447
> 
> 赞同：2
> 
> 时间：2012-07-11T04:16:13.360
> 
> 标签：image, r, import, stacked

我正在处理堆积条形图，但我需要将图像分配给特定的堆栈。

![在此处输入图像描述](../Images/4e0c6ccf1d7b06124eb5bb3fcb6c85f8.png)

![在此处输入图像描述](../Images/dc56eb64cd37c8ec90d4b6935156acf9.png)

我怎么能在 R 中做到这一点。

```
DF = data.frame(names = c("tomato", "potato", "cabbage", 
                          "sukuma-wiki", "terere"),
                freq=c(7,4,5,8,20))
barplot(as.matrix(DF[,2]), col=heat.colors(length(DF[,2])), 
        legend=DF[,1], xlim=c(0,9), width=2) 
```

![在此处输入图像描述](../Images/9bece9e47dc0912769486c26a5bceef1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T10:44:21.773

这是一种方法，您可以如何使用`grid`.

```
# libraries
library(jpeg)
library(grid)

# a is your image
a <- readJPG("foo.jpg")

# ypos.img is at which height of the barchart you want to place the image
ypos.img <- 10

# Create a new polot
grid.newpage()
pushViewport(viewport(width=0.9, height=0.9))

# add image
pushViewport(viewport(yscale=c(0,sum(DF[,2])), xscale=c(0,1), x=0, y=0, width=0.4, height=1, just=c("left", "bottom")))
grid.raster(a, y=unit(ypos.img, "native"))

# add barplot
popViewport()
pushViewport(viewport(x=0.4, y=0, width=0.6, height=1, just=c("left", "bottom")))
pushViewport(dataViewport(xscale=c(0,2), yscale=c(0, sum(DF[,2]))))
cols <- heat.colors(length(DF[,2]))

for (i in 1:nrow(DF)) {
 start <- 0 
 if (i > 1) start <- sum(DF[1:(i-1), 2])
 grid.rect(x=0, y=start, width=1, height=DF[i, 2], default.units="native", just=c("left", "bottom"), gp=gpar(fill=cols[i]))
}

popViewport(2)

# Legend
pushViewport(viewport(x=0.75, y=0, width=0.25, height=1, just=c("left", "bottom")))
ypos <- 0.8
for (i in 1:nrow(DF)) {
 grid.rect(x=0.05, y=ypos, width=0.1, height=0.05, just=c("left", "bottom"), gp=gpar(fill=cols[i]))
 grid.text(DF[i,1], x=0.2, y=ypos, just=c("left", "bottom"))
 ypos <- ypos - 0.05
}

popViewport() 
```

# jquery - on（'click'）和.click（）之间的区别？

> ID：11425455
> 
> 赞同：0
> 
> 时间：2012-07-11T04:17:12.027
> 
> 标签：jquery

> **可能重复：**
> [jquery on vs click 方法](https://stackoverflow.com/questions/8601482/jquery-on-vs-click-methods)

我注意到有些人说在最新的 jQuery 中使用“on”，但是有什么区别，我真的应该使用它吗？

```
$("#dataTable td").on("click", function(event){
    alert($(this).text());
});

$("#dataTable td").click(function(event){
    alert($(this).text());
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:22:12.323

没有任何。[在这里](https://github.com/jquery/jquery/blob/master/src/event.js#L1021)查看jQuery 源代码。.click() 函数基本上只是 .on('click') 的别名，相关代码如下：

```
return arguments.length > 0 ?
    this.on( name, null, data, fn ) :
    this.trigger( name ); 
```

虽然 .click() 更简洁，但如果您想保持一致，我建议使用[.on](http://api.jquery.com/on/)，因为它始终旨在统一使用 .bind、.live 和 .click 等速记方法引入的事件处理。

# mysql - Mysql Sum 和 Group By 方法

> ID：11425458
> 
> 赞同：0
> 
> 时间：2012-07-11T04:17:18.923
> 
> 标签：mysql, group-by, sum

**输入**

**日期**            **点**            **电子邮件**

2012-07-01 5 a@sample.com
2012-07-01 6 b@sample.com
2012-07-01 2 c@sample.com

2012-07-02 5 d@sample.com

2012-07-03 8 e@sample.com
2012-07-03 7 f@sample.com
2012-07-03 1 y@sample.com

2012-07-04 3 x@sample.com
2012-07-04 2 f@sample.com

2012-07-05 3 g@sample.com
2012-07-05 9 b@sample.com

**输出**

**日期**            **点**

2012-07-01 13
2012-07-02 5
2012-07-03 16
2012-07-04 5
2012-07-05 12

建议我使用 MySQL Query 来获取类似上面的输出

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T04:19:38.277

尝试

```
 SELECT `date`, SUM(`Points`) AS sumPoint FROM table GROUP BY `date` 
```

**注意：**不要忘记用 DATE 包装列**是**`date`mySQL的保留关键字```

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:43:31.690

SELECT date, SUM(Points) AS sumPoint FROM table GROUP BY DATE(date)

由于日期列可能是表中的日期时间或日期类型**

# c# - 如何在属性网格中添加嵌套属性

> ID：11425460
> 
> 赞同：0
> 
> 时间：2012-07-11T04:17:19.783
> 
> 标签：c#, wpf

如何在 WPF 属性网格中添加嵌套属性。

我想在样式的子字体下添加字体属性列表。如何通过嵌套属性获取字体属性列表？

```
Style
  Font
    Font Family
    Font Size
    Font Style ... and so on..

 internal class Properties()
 {
  public Properties()
    {
        this.FontPropertiesCollection = new List<FontProperties>()
        {
            ????
         }
     }
    [CategoryAttribute("Font")]
    [DisplayName("Font")]
    public List<FontProperties> FontPropertiesCollection
    { 
        get; 
        set; 
    }
 }

internal class FontProperties
{
    [CategoryAttribute("Font")]
    [DisplayNameAttribute("Font Family")]
    public string FontFamily
    {
        get
        {
            return this.fontFamily;
        }
        set
        {
            if (value != this.fontFamily)
            {
                this.fontFamily= value;
                this.OnPropertyChanged("FontFamily");
            }
        }
    }

       ..... and so on 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:22:48.813

使用 Category 属性，您只能获得一层嵌套。

我可以看到创建所需内容的唯一方法是[实现 UI 类型编辑器](http://msdn.microsoft.com/en-us/library/ms171840.aspx)

您将需要构建所有 UI。

一般来说，我建议不要这样做，因为这不是用户所期望的，当他按字母顺序对属性进行排序时，它会扰乱用户的思维。

# java - java数据结构替换文件io

> ID：11425467
> 
> 赞同：0
> 
> 时间：2012-07-11T04:17:52.433
> 
> 标签：java, file, data-structures, jsoup

我的程序进入我的 uni 结果页面，找到所有链接并保存到文件中。然后我读取文件并仅复制包含所需链接的行并将其保存到另一个文件中。然后我再次解析它以提取所需的数据

```
public class net {

    public static void main(String[] args) throws Exception {
        Document doc = Jsoup.connect("http://jntuconnect.net/results_archive/").get();

        Elements links = doc.select("a");
        File f1 = new File("flink.txt");
        File f2 = new File("rlink.txt");

            //write extracted links to f1 file
        FileUtils.writeLines(f1, links);

            // store each link from f1 file in string list
        List<String>  linklist  = FileUtils.readLines(f1);

            // second string list to store only required link elements
        List<String> rlinklist = new ArrayList<String>();

        // loop which finds required links and stores in rlinklist 
        for(String elem : linklist){
            if(elem.contains("B.Tech") && (elem.contains("R07")||elem.contains("R09"))){
                rlinklist.add(elem);                
            }           
        }           
        //store required links in f2 file
        FileUtils.writeLines(f2, rlinklist);

        // parse links from f2  file
        Document rdoc = Jsoup.parse(f2, null);
        Elements rlinks = rdoc.select("a");

        //  for storing hrefs and link text 
        List<String> rhref = new ArrayList<String>();
        List<String> rtext = new ArrayList<String>();

        for(Element rlink : rlinks){
            rhref.add(rlink.attr("href"));
            rtext.add(rlink.text());
        }

    }// end main

} 
```

我不想创建文件来执行此操作。有没有更好的方法来获取仅特定 url 的 href 和链接文本而不创建文件？

它使用 Apache commons fileutils, jsoup

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:24:57.560

这是摆脱第一个文件写入/读取的方法：

```
Elements links = doc.select("a");
List<String> linklist = new ArrayList<String>();
for (Element elt : links) {
    linklist.add(elt.toString());
} 
```

第二次往返，如果我看懂了代码，就是为了提取满足某个测试的链接。您可以使用相同的技术在内存中执行此操作。

我看到您依赖`Jsoup.parse`从所选链接中提取 href 和链接文本。您可以通过将选定节点写入 a 来在内存中执行此操作，通过调用它的方法`StringBuffer`将其转换为 a ，然后使用采用 a而不是参数的方法之一。`String``toString()``Jsoup.parse``String``File`

# java - 在 JApplet 中绘制随机点

> ID：11425468
> 
> 赞同：1
> 
> 时间：2012-07-11T04:17:59.207
> 
> 标签：java, random, applet

真正的快速问题在这里。为了尝试生成 20,000 个随机点，我编写了以下代码：

```
import javax.swing.JApplet;
import java.awt.*;

public class Points extends JApplet {
    int x, y;
    public void paint (Graphics page) {
        for (int i = 0; i < 20000; i++);
        {
            x = (int)(Math.random()*200);
            y = (int)(Math.random()*200); 
            page.drawLine(x, y, x, y);
        }
    }

} 
```

但是，这导致仅（随机）绘制了一个点。有人可以帮我找出我的错误吗？先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T04:21:04.433

您的 . 后面有一个分号`for`。擦除它，您的代码将起作用。

```
for (int i = 0; i < 20000; i++) {
    x = (int)(Math.random()*200);
    y = (int)(Math.random()*200); 
    page.drawLine(x, y, x, y);
} 
```

进一步说明：当您在声明后使用分号时`for`，它将结束`for`语句，导致类似

```
for(int i = 0; i < 20000; i++) {
}
x = (int)(Math.random()*200);
//rest of the code... 
```

这就是为什么您的代码仅显示 1 分的原因。

# windows-phone-7 - WP7 和 Skydrive WaitOne 阻止一切

> ID：11425470
> 
> 赞同：0
> 
> 时间：2012-07-11T04:18:23.420
> 
> 标签：windows-phone-7, onedrive, waitone

我正在尝试从 SkyDrive 下载文件并将异步调用包装在同步类中。然而，当我打电话给 WaitOne 时，一切都被阻止了，EventHandeler 永远不会被调用。

```
 _client = new LiveConnectClient(connection.Session);
 _client.GetCompleted += new EventHandler<LiveOperationCompletedEventArgs>(client_GetCompleted);
 _client.GetAsync("me/skydrive/files");

 _autoEvent.WaitOne();  //get's stuck here client_GetCompleted never called.

....

void client_GetCompleted(object sender, LiveOperationCompletedEventArgs e)
{
    ///do stuff
    _autoEvent.Set();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T06:47:00.163

删除 _autoEvent.WaitOne() 调用，将引发 get completed 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:20:28.010

您很可能阻塞了 UI 线程。（发布更多代码会有所帮助）尝试在新的非 ui 线程中运行第一部分：

```
System.Threading.ThreadPool.QueueUserWorkItem(o =>
{
    _client = new LiveConnectClient(connection.Session);
    _client.GetCompleted +=
    new EventHandler<LiveOperationCompletedEventArgs>(client_GetCompleted);
    _client.GetAsync("me/skydrive/files");

   _autoEvent.WaitOne();  //get's stuck here client_GetCompleted never called.

   <other code>
}); 
```

# internet-explorer - Internet Explorer 自动化表单发布

> ID：11425471
> 
> 赞同：1
> 
> 时间：2012-07-11T04:18:25.617
> 
> 标签：internet-explorer, vbscript, automation

我正在尝试使用 vbscript 加载页面。然后我在其输入字段中输入一些虚拟值并尝试提交它。

这是它的代码：

```
 Dim ie
Set ie = WScript.CreateObject("InternetExplorer.Application")
ie.navigate("http://somepage.com")

ie.width = 900
ie.height = 600
ie.Visible = 1

WScript.sleep(5000)

'Home page of user is loaded.
'Now find the field containing mobile number and type message

    Dim nameField, messageField
    set nameField = ie.document.getElementById("MobileNos")'this line throws error
    nameField.value = "somebody"

    messageField = ie.document.getElementById("Message")
    messageField.value = "Hi"

    'Sending the message
    ie.document.frmpostcomment.submit() 
```

但是，每当我尝试运行此代码时，它都不会发布评论，而是刷新页面。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T03:51:56.997

在表格的发布期间，我应该写

```
ie.document.frmpostcomment.submitbtn.click 
```

这对我有用。

# google-apps-script - 访问对象是 Google App Script

> ID：11425473
> 
> 赞同：1
> 
> 时间：2012-07-11T04:18:39.243
> 
> 标签：google-apps-script

我实际上在创建表单时遵循 HtmlService 文档（https://developers.google.com/apps-script/html_service）。我注意到有这部分，它说它会在用户提交表单后成为一个对象，结构将是这样的：

`{ myFile: <a Blob containing the file>; aField: <the value in the field> }`

我可以知道如何访问 Google App Script 中的那些对象吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T04:26:02.920

在您的服务器代码中：

```
function processForm(theForm) {
  Logger.log(theForm.aField);
  Logger.log(theForm.myFile.getName());
} 
```

在您的 HTML 中：

```
<form id='myForm'>
<input name='myFile' type='file'>
<input name='aField'>
</form>
<script>
google.script.run.processForm(document.getElementById('myForm'));
</script> 
```

# google-maps - setTimeout 标记动画 - 似乎没有任何效果

> ID：11425475
> 
> 赞同：0
> 
> 时间：2012-07-11T04:19:04.840
> 
> 标签：google-maps, google-maps-api-3

感谢您阅读本文...

我已经搜索和试验了 3 天，试图解决一个非常基本的 javascript 问题。

我正在创建一个带有 45 个标记的谷歌地图。标记：

*   使用 MarkerClusterer 实用程序进行聚类
*   可以点击打开一个信息窗口（每个显示不同的图像）
*   页面加载时，所有内容都很好地“放置”到位。

到现在为止还挺好。

问题是应用“setTimeout”函数顺序删除标记（而不是一次全部删除）。我已经尝试了十几种变体，没有任何效果。

我是一个新手，任何帮助将不胜感激！

您可以在以下位置查看地图的简化版本：

[http://www.domatchaworld.com/googlemap6.html](http://www.domatchaworld.com/googlemap6.html)

这是代码：

```
var locations = [  
[39.11009, -120.03169, '<img width="300" height="239" src="images/img01.jpg" style="margin:5px;"/>'],
[37.77493, -122.41942, '<img width="300" height="239" src="images/img02.jpg" style="margin:5px;"/>'],
[48.85320, 2.30206, '<img width="300" height="239" src="images/img03.jpg" style="margin:5px;"/>'],
[48.77734, -121.81320, '<img width="300" height="239" src="images/img04.jpg" style="margin:5px;"/>'],
[49.35365, -123.26187, '<img width="300" height="239" src="images/img45.jpg" style="margin:5px;"/>']
]; 

var map;
var markers = [];
var mc; 
var mcOptions = {
  gridSize: 20,
  maxZoom: 15
};

map = new google.maps.Map(document.getElementById("map_canvas"), {
zoom: 3,
center: new google.maps.LatLng(31.65338, -40.42969),
mapTypeId: google.maps.MapTypeId.TERRAIN
});

mc = new MarkerClusterer(map, [], mcOptions);

var infowindow = new google.maps.InfoWindow();

google.maps.event.addListener(map, 'click', function() {
infowindow.close();
});

var marker;
var i;

for (i = 0; i < locations.length; i++) {  
    marker = new google.maps.Marker({
    position: new google.maps.LatLng(locations[i][0], locations[i][1]),
    animation: google.maps.Animation.DROP,
    map: map
  });

  google.maps.event.addListener(marker, 'click', (function(marker, i) {
    return function() {
      infowindow.setContent(locations[i][2]);
      infowindow.open(map, marker);
    }
  })(marker, i));

mc.addMarkers(markers, true);

markers.push(marker); //push local var marker into global array

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-12T13:45:41.937

不要`MarkerClusterer`一次将所有标记添加到，而是创建标记数组，然后为它们设置动画（我已经复制粘贴了您的代码并在最后添加了注释......）：

```
var locations = [
    [39.11009, - 120.03169, '<img width="300" height="239" src="images/img01.jpg" style="margin:5px;"/>'],
    [37.77493, - 122.41942, '<img width="300" height="239" src="images/img02.jpg" style="margin:5px;"/>'],
    [48.85320, 2.30206, '<img width="300" height="239" src="images/img03.jpg" style="margin:5px;"/>'],
    [48.77734, - 121.81320, '<img width="300" height="239" src="images/img04.jpg" style="margin:5px;"/>'],
    [49.35365, - 123.26187, '<img width="300" height="239" src="images/img45.jpg" style="margin:5px;"/>']
];

var map;
var markers = [];
var mc;
var mcOptions = {
    gridSize: 20,
    maxZoom: 15
};

map = new google.maps.Map(document.getElementById("map_canvas"), {
    zoom: 3,
    center: new google.maps.LatLng(31.65338, - 40.42969),
    mapTypeId: google.maps.MapTypeId.TERRAIN
});

mc = new MarkerClusterer(map, [], mcOptions);

var infowindow = new google.maps.InfoWindow();

google.maps.event.addListener(map, 'click', function () {
    infowindow.close();
});

var marker;
var i;

for (i = 0; i < locations.length; i++) {
    marker = new google.maps.Marker({
        position: new google.maps.LatLng(locations[i][0], locations[i][1]),
        animation: google.maps.Animation.DROP,
        map: map
    });

    google.maps.event.addListener(marker, 'click', (function (marker, i) {
        return function () {
            infowindow.setContent(locations[i][2]);
            infowindow.open(map, marker);
        }
    })(marker, i));

    //don't add to cluster yet
    //mc.addMarkers(markers, true);

    markers.push(marker); //push local var marker into global array

}

// now animate and add to cluster
(function animateNextMarker() {
  if (markers.length > 0) {
    mc.addMarker(markers.pop(), true);
    setTimeout(animateNextMarker, 250);
  }
})(); 
```

希望这可以帮助 ：）

# c - 理解布尔值上的“不”

> ID：11425477
> 
> 赞同：2
> 
> 时间：2012-07-11T04:19:35.883
> 
> 标签：c, boolean, c99, boolean-logic

我的问题似乎很简单，但我一直对此感到困惑：

```
bool myBool = TRUE;
if (myBool) printf("1 myBool = true\n");
    else printf("1 myBool = false\n");
myBool = !myBool;
if (myBool) printf("2 myBool = true\n");
    else printf("2 myBool = false\n");

printf("%d\n", TRUE);
printf("%d\n", FALSE); 
```

所有这些输出：

```
1 myBool = true;
2 myBool = false;
1
0 
```

我明白为什么这是输出。我的问题是如何`!1`平等`false`？因为在 C 和 C++ 中，`if`检查非零值。我最后一次检查：

```
TRUE = 0x00000001
FALSE = 0x00000000 
```

所以：

```
!TRUE = !0x00000001 = 0xfffffffd != 0 
```

* * *

编辑：我猜这种混乱源于我学习 x86 汇编的时期，在该时期 a`not eax, eax`会按*位*执行而不是`eax`（相当于`eax = ~eax`C 中的）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T04:20:50.060

您混淆了逻辑非和按位补码。如果输入非零，`!`则运算符返回 0，否则返回 1。运算符翻转输入的`~`位。这意味着`!0 = 1`and `!1 = 0`，在使用 时不是这样`~`。

另外，请记住`if`语句检查值是零还是非零。因此，即使布尔值是`0xFFFFFFFE`，它仍然会`true`在 if 语句中求值。

希望这可以帮助

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-11T04:22:22.883

为了补充其他答案，规范声明（C99 §6.5.3.3/5）：

> 逻辑否定运算符的结果`!`是`0`如果其操作数的值比较不等于`0`，`1`如果其操作数的值比较等于`0`。
> 
> 结果有类型`int`。
> 
> 表达式`!E`等价于`(0==E)`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T04:22:00.263

`!`是一个*逻辑* `not`运算符，因此任何非零输入都会产生 0 的结果，而 0 输入会产生 1 的结果。

您正在考虑的结果将是使用按位不，如`~true`.

# apache-flex - 在 Flex 中通过 ActionScript 循环创建 MXML 组件

> ID：11425483
> 
> 赞同：0
> 
> 时间：2012-07-11T04:19:56.677
> 
> 标签：apache-flex, actionscript, foreach, flash-builder, mxml

我正在使用 Flash Builder 4.6 为 uni 项目创建应用程序。我有一个自定义 Spark 组件，我需要在运行时根据通过 PHP 脚本返回的 XML 元素的数量动态创建该组件的多个实例。

这可能有点令人困惑，所以让我编写以下步骤： 1) 应用程序向服务器上托管的 PHP 脚本发送 HTTPService 请求。2) PHP 访问 SQL 数据库并返回一系列 XML 数据。3) ActionScript 动态创建我的自定义 Flex 组件的 X 个实例，其中 X 是 XML 中的数据数。

这是我到目前为止的代码（不整洁，因为我试图让它工作）：

动作脚本：

```
 [Bindable]
        public var holderArray:Array = new Array(100);

        public function createMenu(e:MouseEvent):void {
            var count:int = 0;
            var curMenuItem:menuItemContainer = new menuItemContainer();
            while (count < loadedMenu.length){
                curMenuItem.itemName = loadedMenu.getItemAt(count).name;
                curMenuItem.itemDesc = loadedMenu.getItemAt(count).description;
                curMenuItem.itemPrice = numForm.format(loadedMenu.getItemAt(count).price);                  
                curMenuItem.imageFile = loadedMenu.getItemAt(count).url;
                //curMenuItem.y = count * 120
                //menuItemGroup.addElement(curMenuItem);
                holderArray[count] = curMenuItem;
                count ++;
            }
            //testString = holderArray[1].itemName;
            var count2:int = 0;
            for each (var menuItem:menuItemContainer in holderArray){
                menuItem.name = "menuItem" + count2;
                menuItem.id = "menuItem" + count2;
                //testString += menuItem.name;
                menuItemGroup.addElement(menuItem);
                count2++;
            }
        } 
```

MXML：

```
<s:VGroup id="menuItemGroup" x="40" y="150">
</s:VGroup> 
```

该代码似乎正在发生的事情是，我返回的三个 XML 数据中的每一个都在 menuItemContainer 的实例中使用，但是当每个都添加到 menuItemGroup 时，它会覆盖已经存在的那个。我不确定该项目是否真的被覆盖了，或者新项目是否只是位于较早的项目之上，但如果后者是真的，我找不到安排组件的方法。我尝试在循环中设置 menuItem.y（作为 count2 的函数），但无济于事。

提前感谢您提供的任何和所有建议/答案。本杰明。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:29:22.100

把这条线

```
var curMenuItem:menuItemContainer = new menuItemContainer(); 
```

在你的 while 循环内。使用您的代码，您只需创建一个实例，然后在您的 while 循环中`menuItemContainer`不断更改该实例的属性。`menuItemContainer`相反，您需要为`menuItemContainer`循环的每次迭代创建一个新的、不同的实例。

# jquery - 如何将输入值传递给字符串变量？

> ID：11425486
> 
> 赞同：0
> 
> 时间：2012-07-11T04:20:14.703
> 
> 标签：jquery

我试图让用户指定 iframe 的高度和宽度。我想让他们输入一个高度和宽度，这将把这些值填充到一个字符串中，他们可以复制和粘贴。我不确定如何将该值传递给字符串。

```
<form id="embed-customize" action="/" style="display:block">
    <fieldset class="embed-size">
    <legend>Size:</legend>
    <div>
    <input id="embed-width" type="text" value="300">
    x
    <input id="embed-height" type="text" value="500">
    </div>
    </fieldset>

</form>
<textarea id="embed-url" rows="3" cols="100"></textarea>
<script>
jQuery(document).ready( function() {
var embedWidth = "";
var embedHeight = "";
var iframe = "";

jQuery('#embedWidth').blur(function(){
  embedWidth = jQuery(this).val();
})

var iframe = '<iframe width = ' + embedWidth + 'px height = ' + embedHeight +'px frameborder = "0" scrolling = "no" src = "http://www.example.com">"></iframe>';
jQuery('#embed-url').val(iframe);
})
</script> 
```

这是我到目前为止所拥有的，但它似乎不起作用。我不确定我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:22:59.793

试试这个：

```
jQuery('#embed-width').blur(function(){
  embedWidth = jQuery(this).val();
  var iframe = '<iframe width = ' + embedWidth + 'px height = ' + embedHeight +'px frameborder = "0" scrolling = "no" src = "http://www.example.com">"></iframe>';
  jQuery('#embed-url').val(iframe);
 });
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:37:40.813

试一试
[http://jsfiddle.net/9zsqQ/](http://jsfiddle.net/9zsqQ/)

您的输入 ID 不一致。在 HTML 中，它是`#embed-width`在您使用的 javascript 中 `#embedWidth`。

其次，您的 iframe 代码在属性名称和值之间有空格，有些没有用双引号括起来。它应该是这样的：

`var iframe = '<iframe width="' + embedWidth + 'px" frameborder="0" scrolling="no" src="http://www.example.com">"></iframe>';`

更新了 jsfiddle，使其适用于两种输入：http:
[//jsfiddle.net/9zsqQ/2/](http://jsfiddle.net/9zsqQ/2/)

# json - 解析 JSON 数据并在 iPhone 上本地存储

> ID：11425494
> 
> 赞同：1
> 
> 时间：2012-07-11T04:20:41.973
> 
> 标签：json, sqlite, parsing, local-storage

任何人都这样做过，我想从 JSON（Google 位置 API）获取数据解析并将其存储到 iphone 上的 sqlite 数据库中。

问题是如果解析的数据量很大，如何在iphone本地同步解析和保存sqlite中的数据。

用户界面包括保存的数据表，应该可以不间断地工作。

并且解决方案应该在使用 Objective C 的 COCOA 框架中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:31:04.613

你必须阅读一些教程

[如何使用 Objective-C 解析 JSON？](https://stackoverflow.com/questions/5547311/how-to-parse-json-in-objective-c)

[http://cookbooks.adobe.com/post_Store_data_in_the_HTML5_SQLite_database-19115.html](http://cookbooks.adobe.com/post_Store_data_in_the_HTML5_SQLite_database-19115.html) [http://html5doctor.com/introducing-web-sql-databases/](http://html5doctor.com/introducing-web-sql-databases/)

[在 JavaScript 中解析 JSON？](https://stackoverflow.com/questions/4935632/how-to-parse-json-in-javascript)

# c++ - 私有静态声明和后续初始化

> ID：11425497
> 
> 赞同：4
> 
> 时间：2012-07-11T04:21:01.723
> 
> 标签：c++, types, static, initialization, access-modifiers

一个 .cpp 文件有一堆类定义。一个类有一个私有静态成员，如下所示：

```
class SomeClass:public SomeParentClass
{
   private:
     static int count;
}; 
```

并且在定义类之后，count 属性初始化为零，如下所示：

```
int SomeClass::count = 0; 
```

来自 Java/C# 世界，我无法理解在哪一点`count`初始化为零？是在`SomeClass`实例化的时候吗？另外，类定义的`count`类型是`int`，为什么前面`SomeClass::count`必须有一个？`int`

我的最后一个问题是，由于 count 属性是私有的，当它在类定义之外初始化时，它的可见性不应该受到限制吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T04:33:16.510

1.  类的静态成员在程序启动时[以任意顺序初始化](http://www.parashift.com/c++-faq/static-init-order.html)
2.  `static int count;`类中的 是静态变量的声明，*而是*`int SomeClass::count = 0;`它的*定义*。C++ 中的所有定义都需要指定类型。
3.  事实上，计数的定义似乎已经发生在文件范围内，实际范围`SomeClass::count`仍然是私有的，如声明的那样。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T04:28:18.340

当程序启动时，类静态变量的行为就好像它被初始化为 0。它独立于类实例化。

C++ 语言要求在声明中的标识符之前有一个类型。

初始化类静态变量的 C++ 语法使它看起来像一个全局变量，但在编译期间强制访问该变量。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T04:30:30.107

```
是在 SomeClass 被实例化的时候吗？
```

不，您可以在任何实例化之前通过`SomeClass::count`（假设该函数对`SomeClass`的私有成员具有权限）访问它。在您开始制作对象之前，它是完全可用的。

* * *

```
为什么 SomeClass::count 前面必须有一个 int ？
```

好吧，因为它是一个`int`. 想想当你制作函数原型和定义时：

```
int func (int);
int func (int i) {return 1;} //you still need the int and (int i) here
func {return 1;} //NOT VALID - this is what count would be without int 
```

* * *

```
由于 count 属性是私有的，它的可见性不应该是   
在类定义之外初始化时受到限制？
```

[根据这个答案](https://stackoverflow.com/a/7857996/962089)，静态变量定义是在以正常方式定义时访问说明符的例外。

# java - MySQL DB 中的 Blob 字段

> ID：11425500
> 
> 赞同：0
> 
> 时间：2012-07-11T04:21:18.653
> 
> 标签：java, mysql

我有一个公钥值，我想将它存储在数据库中。我将它存储为 Blob。Java 相关的行是：

```
byte[] pk = ((BigInteger) Modulus ).toByteArray(); 
```

和

```
preparedStmt.setBytes(1, pk); 
```

当我在工作台 GUI 中打开 MySQL DB 时，我没有将值本身视为字节。相反，我看到以下内容：

![在此处输入图像描述](../Images/5ca2e5bef455ec8024601769dfc710ef.png)

不确定这是否应该显示或缺少某些内容。

# php - 函数打印 PHP 回显

> ID：11425504
> 
> 赞同：-3
> 
> 时间：2012-07-11T04:21:45.653
> 
> 标签：php

有人知道我的错误代码是什么：

```
$text = str_replace(":-)", "<img src='emoticons/smile.gif'>", $text); 
```

当我尝试使用 PHP 回显打印文本时，它显示：

```
<img src='emoticons/smile.gif'> 
```

我要做的就是在输入时显示图像:-)

谢谢你。

根据详细信息，这是我的代码如下：

```
function sendChat() {
$from = $_SESSION['username'];
$to = $_POST['to'];
$message = $_POST['message'];

$_SESSION['openChatBoxes'][$_POST['to']] = date('Y-m-d H:i:s', time());

$messagesan = sanitize($message);

if (!isset($_SESSION['chatHistory'][$_POST['to']])) {
    $_SESSION['chatHistory'][$_POST['to']] = '';
}

$_SESSION['chatHistory'][$_POST['to']] .= <<<EOD
                   {
        "s": "1",
        "f": "{$to}",
        "m": "{$messagesan}"
   },
EOD;

unset($_SESSION['tsChatBoxes'][$_POST['to']]);

$sql = "insert into chat (chat.from,chat.to,message,send) values ('".mysql_real_escape_string($from)."', '".mysql_real_escape_string($to)."','".mysql_real_escape_string($message)."',NOW())";
$query = mysql_query($sql);
echo "1";
exit(0);
}

function sanitize($text) {
$text = htmlspecialchars($text, ENT_QUOTES);
$text = str_replace("\n\r","\n",$text);
$text = str_replace("\r\n","\n",$text);
$text = str_replace("\n","<br>",$text);
$text = str_replace(":-)", "<img src='emoticons/13.gif'>", $text);
return $text;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:31:45.540

* * *

> **编辑：**你甚至在本地安装了 PHP 吗？PHP 脚本需要在本地安装 EasyPHP 之类的东西。

* * *

听起来像是一个糟糕的 Content-Type 标头。

通常这会自动设置，但您可以尝试强制执行它并确保您拥有一切。

```
<?php header('Content-Type: text/html'); ?>
<html><head></head><body>
    <?php 
         $text = 'OK BOSS :-) ';
         $text = str_replace(':-)', '<img src="emoticons/smile.gif" />', $text);
         echo $text;
    ?>
</body></html> 
```

# c++ - 如何在不知道 C++ 中基类名称的情况下调用子类中的基类成员？

> ID：11425510
> 
> 赞同：3
> 
> 时间：2012-07-11T04:22:06.560
> 
> 标签：c++, function, call, superclass, base-class

> **可能的重复：**
> [C++ 相当于“超级”？](https://stackoverflow.com/questions/4424216/c-equivalent-of-super)

是否可以在不知道基类名称的情况下在子类中调用基类成员函数？（类似于在 java 中使用 super 关键字）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:33:54.067

C++ 没有`super`关键字的标准等效项。`__super`但是，如果您使用的是 Visual Studio，我认为有一个特定于微软的软件可以实现相同的效果。

```
// deriv_super.cpp
// compile with: /c
struct B1 {
   void mf(int) {}
};

struct B2 {
   void mf(short) {}

   void mf(char) {}
};

struct D : B1, B2 {
   void mf(short) {
      __super::mf(1);   // Calls B1::mf(int)
      __super::mf('s');   // Calls B2::mf(char)
   }
}; 
```

参考：[msdn](http://msdn.microsoft.com/en-us/library/94dw1w7x%28v=vs.80%29.aspx)

# jms - ActiveMQ / JMS 消息处理程序测试

> ID：11425511
> 
> 赞同：-2
> 
> 时间：2012-07-11T04:22:08.547
> 
> 标签：jms, activemq, spring-jms

这并不完全在 JMS 队列处理程序测试中。所以，继续阅读。

我们有一个架构，其中 spring 通道监听来自 ActiveMQ 的队列。此队列的侦听器将接收消息并具有子侦听器的静态列表（由唯一主题标识）。所有消息都将具有一些参数，包括该消息必须传递到的主题。

> SMSService 将使用主题 SEND_SMS 将其消息发送到 activemq。它将被某些 HTTP 服务或 SMPP 服务监听。您甚至可以设计自己的侦听器并将其连接为具有所需“主题”的弹簧组件。

**问题：** 这个内部主题可能会改变的可能性更大。当没有侦听器时，这甚至不会引发显式运行时异常。有没有办法测试预期听众实际收到的这条消息？

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:50:48.907

作为 tim Bish siad，您的问题陈述过于模糊。

您是否尝试过创建自己的 ActivemMQ[拦截器](http://activemq.apache.org/interceptors.html)（我不知道它是否对您的问题有用）

# javascript - 如何在咖啡脚本 js 中使用 Rails 助手

> ID：11425515
> 
> 赞同：3
> 
> 时间：2012-07-11T04:22:42.060
> 
> 标签：javascript, ruby-on-rails, coffeescript, helpers

我不太明白助手如何在视图/控制器中工作。我从来没有使用过它们。

我的具体问题是：几乎我所有的观点都实现了 AJAX。在我的大多数控制器中，*update.js.coffee*和*create.js.coffee*具有以下代码的某种形式：

```
jQuery ->
  <% if @product.errors.any? %>
  error_info = '<%= j(render :partial => "shared/errors", :locals => { :record => @product }) %>'
  popup error_info

  <% else %>
.
.
. 
```

哪里`popup`是显示某些元素的 javascript 函数。

有没有办法把它抽象成一个助手？做这个的最好方式是什么？这段代码在每种情况下几乎完全相同，除了 2 的用途`@product`当然会根据所讨论的模型而有所不同。

如果这不是帮助器的用途，那么 1）它们是用来做什么的？2）我应该改用什么？

编辑：奖金问题：实际上，我的许多新功能、创建功能、编辑功能和更新功能在模型之间都是相似的。你怎么把它弄干？或者你只是不担心吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-15T02:42:43.897

The first step is to change the extension of your file to `.js.coffee.erb`. This let's the asset pipeline know that you want the file to be interpreted with ERB.

The second, optional step is to add custom helpers to Sprokets so that you can call your own methods from your Coffee script files*. Simply create a new helper module and then register it in an initializer:

```
Sprockets::Context.send :include, CoffeeHelper 
```

*: The assets will not be able to access all the helpers you are used to using because the ERB is run when the assets are compiled rather than as part of an HTTP request. The normal controller/helper setup is not present.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:38:29.137

如果您想将此代码重构为 rails 帮助程序，则可以像任何其他帮助程序方法一样完成，您必须将所有 javascript 代码作为字符串，并且您的 rails 帮助程序需要返回一个字符串。

Rails 助手可以帮助重构视图中的逻辑，以便您可以尽可能地保持代码无逻辑，并且可以让重复的代码更加枯燥。

如果您发现某些代码在您的模型中重复出现，您还可以考虑将该代码重构为 lib 目录中的 ruby​​ 模块，并将该模块包含到您的模型中。

# ios - 从子视图访问 UIViewcontroller - iOS

> ID：11425520
> 
> 赞同：0
> 
> 时间：2012-07-11T04:23:21.897
> 
> 标签：ios, uiviewcontroller

我有一个 UIView .xib 文件。这是从故事板入口点 UIViewController1 作为子视图打开的。子视图有一个 IBButton，按下它会打开一个 UIViewController2。这有可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:38:54.397

首先，创建一个从第一个视图控制器到第二个视图控制器的 segue。我要给它命名`OpenViewController2`。我们将能够以编程方式调用该 segue。

在您的`UIView`.h 文件中，创建一个为该视图定义委托的协议：

东西视图.h：

```
@protocol SomethingViewDelegate <NSObject> {
    - (void)importantThingHappened;
}

...

@interface SomethingView {
    id<SomethingViewDelegate> delegate;
}

@property (nonatomic, strong) id<SomethingViewDelegate> delegate; 
```

东西视图.m：

```
@implementation
@synthesize delegate;

...

// The IBAction for the button in your view
- (IBAction)buttonClicked:(id)sender {
    [delegate importantThingHappened];
} 
```

MyViewController.m，在其中创建视图：

```
// Create view
UIView *myView = ...

myView.delegate = self; 
```

稍后在 MyViewController 中：

```
// Implement the protocol. This function will be called when the button action
// inside of the UIView you created is pressed
- (void)importantThingHappened {
    [self performSegueWithIdentifier:@"OpenViewController2" sender:self];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T05:55:42.733

首先给你的 IBButton 一个唯一的标签，然后在你的 UIViewController 的 viewDidLoad 中，

```
// add following line into viewDidLoad

[(UIButton*)[self.view viewWithTag:MY_UNIQUE_TAG_FOR_BUTTON] addTarget:self action:@selector(buttonPressed:) forControlEvent:UIControlEventTouchUpInside]; 
```

最后实现 buttonPressed: 任何你想要的

```
-(void) buttonPressed:(UIButton*)aButton {
    // do what you want to do.
} 
```

# java - 如何在java中获取图像文件（BufferedImage）的格式（例如：jpen，png，gif）

> ID：11425521
> 
> 赞同：9
> 
> 时间：2012-07-11T04:23:27.117
> 
> 标签：java, bufferedimage, file-extension, image-formats

我想使用java获取缓冲图像格式或图像类型，

```
 InputStream stream = request.getResponseStream();   
 BufferedImage image=  ImageIO.read(stream);
 LOGGER.info(image); 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2015-07-20T09:59:46.137

参考`javax.imageio.ImageIO.read()`代码

这段代码最初是用 groovy 实现的，但翻译成 java，所以它可能有语法错误。

```
public String read(InputStream input) throws IOException {
    ImageInputStream stream = ImageIO.createImageInputStream(input);

    Iterator iter = ImageIO.getImageReaders(stream);
    if (!iter.hasNext()) {
        return null;
    }
    ImageReader reader = (ImageReader) iter.next();
    ImageReadParam param = reader.getDefaultReadParam();
    reader.setInput(stream, true, true);
    BufferedImage bi;
    try {
        bi = reader.read(0, param);
        return reader.getFormatName();
    } finally {
        reader.dispose();
        stream.close();
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-03-22T13:52:33.287

This code might help you to get the extension of image

```
public static String getFormate(String ImageName) {

    return (ImageName.substring(ImageName.indexOf('.'),ImageName.length()));
} 
```

In the above code first it searches dot(.) and with help of substring() it will return the extension

# android - 如何让 Eclipse 使用较旧的 Android API 15

> ID：11425522
> 
> 赞同：0
> 
> 时间：2012-07-11T04:23:39.570
> 
> 标签：android, eclipse

我正在学习如何使用 Eclipse 开发 Android 应用程序。所有这一切都是新的，显然有一个错误会在您添加一盒纯文本时弄乱 Android XML 文件的“图形布局”窗格。我读过解决方案说要更改输入类型，但我对 Android 的了解还不够深入，无法真正在使用 API 16 或 15 之间产生差异。我目前使用的是 16，我今天下载了 15，并且正在尝试找到一种让 Eclipse 使用旧 API 的方法。如何切换 Eclipse 以使用 API 15 而不是 16？（我不希望卸载 API 16，但如果必须的话，好吧）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:28:25.103

打开清单文件并更改行

```
<uses-sdk android:minSdkVersion="number-of-version-you-want" /> 
```

# sql - 如何使用 PostgreSql 将查询结果存储在现有列中

> ID：11425525
> 
> 赞同：0
> 
> 时间：2012-07-11T04:24:02.177
> 
> 标签：sql, postgresql

我有下表

```
user

**id, name**, timestamp, place, time 
```

名称为 PK 的 id

我想将以下查询的结果存储在已经存在但不包含数据的时间列中

```
SELECT "time"(timestamp) FROM user as time 
```

所以如果我有例如以下数据

id：1，姓名：Ann，时间戳：“2002-08-30 08:24:00”，地点：美国时间：

如果是以下查询的结果

```
 SELECT "time"(timestamp) FROM user 
```

是 08:24:00

我想将它存储在时间列中，并且我想为表中的所有用户执行此操作

我尝试了以下

```
SELECT "time"(timestamp) FROM user as time 
```

但它只将结果显示为输出，我希望将其存储

有没有办法做到这一点 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:39:28.390

如果您只想将`"time"`每一行的时间设置为其一天中的时间，`"timestamp"`则：

```
update "user" set time = timestamp::time; 
```

# android - 在 OnLocationChanged 中显示进度对话框

> ID：11425531
> 
> 赞同：0
> 
> 时间：2012-07-11T04:24:54.380
> 
> 标签：android, progressdialog

我知道有成千上万这样的问题。但我找不到我的解释。

我使用 onLocationChanged 方法来更新用户在 mapView 上的位置。一切安好; 我在 onCreate 方法中显示一个 ProgressDialog 并在 OnlocationChanged 结束时将其关闭，它可以工作。

问题是当我在 onLocationChanged 方法中创建并显示一个进度对话框时。不知何故，它不起作用。我认为这是因为该方法在不同的线程上运行。

但我的问题是，如果 onLocationChanged 方法在不同的线程上运行，为什么它让我关闭对话框但不创建新的？

这是我的课的一部分：

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tiendas);
    mapView = (MapView) findViewById(R.id.mapview);
    mapView.setBuiltInZoomControls(true);
    mapView.setSatellite(false);

    ProgressDialog dialog = ProgressDialog.show(StoresActivity.this, "", 
    "Getting your location", true, true);

 public void onLocationChanged(Location location) {
            // TODO Auto-generated method stub

             /////if i show or initialize the dialog here, doesn't work!

             updateMap(location)  // this function calls asynctask 
                                                 //  for an HTTPrequest
     dialog.dismiss();

        } 
```

}

**该代码可以正常工作并正确关闭对话框，但如果我在 onLocationChanged 方法中声明或显示对话框，它永远不会显示。有人吗？为什么它会忽略它但不能显示它？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:56:18.677

传递`Context`类`LocationListener`in `ProgressDialog`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-12T03:55:24.117

检查此代码对我来说工作正常

公共类 LocationFinderActivity 扩展 Activity 实现 LocationListener{

```
LocationManager locationManager = null; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_location_finder);

    Log.i("inside","oncreate");
    locationManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 

    locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 0,this);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_location_finder, menu);
    return true;
}

@Override
public void onLocationChanged(Location location) {

    Log.i("inside","onlocationchange");
    ProgressDialog dialog = ProgressDialog.show(LocationFinderActivity.this, "", 
            "Getting your location", true, true);
}

@Override
public void onProviderDisabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

} 
```

}

# java - Java 字节数组和带套接字的图像

> ID：11425537
> 
> 赞同：0
> 
> 时间：2012-07-11T04:25:11.417
> 
> 标签：java, arrays, sockets, byte

我的程序拍摄用户屏幕的照片，当他们使用我的程序时，制作屏幕截图，然后将其发送到服务器。图像将加载大约 1/4 的路径并冻结。

发送截图：

```
 BufferedImage buffimg = robot.createScreenCapture(captureSize);
            BufferedImage image = buffimg;
            byte[] imageInByte;

            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            ImageIO.write(image, "png", baos);
            baos.flush();
            imageInByte = baos.toByteArray();
            baos.close();

            DataOutputStream dos = new DataOutputStream(socket.getOutputStream());
            PrintWriter out = new PrintWriter(socket.getOutputStream());

            out.println("!SCREENDATA!");
            out.flush();
            dos.writeInt(baos.toByteArray().length);
            dos.write(baos.toByteArray());
            dos.flush(); 
```

获取图像：

```
 if (input.startsWith("!SCREENDATA!")) {
                        System.out.println("reading");

                        DataInputStream dis = new DataInputStream(socket.getInputStream());
                        int len = dis.readInt();
                        System.out.println(len);
                        byte[] data = new byte[len];

                        dis.read(data);
                        InputStream in = new ByteArrayInputStream(data);
                        Image image = Toolkit.getDefaultToolkit().createImage(data);

                        v.repaint(image);
                    } 
```

显示图像：

```
public void repaint(Image img) {

    frame.getContentPane().add(new JLabel(new ImageIcon(img)));
    frame.repaint();
    frame.pack();

} 
```

如果有人可以帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:04:41.617

您需要继续调用`dis.read(data);`，因为 TCP 套接字上的此方法并非旨在在一次调用中提供整个缓冲区（它是一个流套接字，它会继续运行）。但请注意，当套接字没有数据可提供时，方法调用将阻塞。此外，最好在文件之前发送文件大小，以便另一端知道预期的大小 - 它不太容易出现可能导致无限循环的协议错误。

看看[如何使用 java socket 实现客户端和服务器之间传输文件](https://stackoverflow.com/questions/4687615/how-to-achieve-transfer-file-between-client-and-server-using-java-socket)的答案。

无论如何，打个比方：假设套接字有一个已填满的存储桶，它是 512kb。您有一个 2048kb 的存储桶。您必须不断将插座桶倒入自己的桶中。

此外，除非它在事件调度线程上，否则不要对 Swing 做任何事情。请参阅[如何使用事件调度线程？](https://stackoverflow.com/questions/7896723/how-do-you-use-the-event-dispatch-thread)更多细节。

# mysql - 我如何通过windows机器连接到Linux服务器中的mysql数据库

> ID：11425546
> 
> 赞同：1
> 
> 时间：2012-07-11T04:26:22.440
> 
> 标签：mysql, windows, linux

我在 Windows 中有一个 MYSQL，需要与 Linux 服务器中的 MYSQL 连接。但我想知道有没有办法在 Linux 服务器中连接 MYSQL，而无需在 Windows 中安装 MYSQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T10:23:58.050

```
Follow the following instructions:
1\. Open Terminal and type in : sudo apt-get install putty
2\. Click Y on subsequent messages that appear and let the installation complete.
To use Putty, go to Menu > Internet > Putty SSH client

To connect to a remote server that supports ssh login , enter the host name or the IP address of the remote host, in case you need to frequently need to login to this server , save the session by naming it something nice.

If the connection is initiated for the first time or if the server hardware configuration has changed, you may see the message. This is to ensure that you are logging in only to the trusted server that you know and not something else.Accept that.

Finally, enter user name and password to login to the server remotely, if all goes well you will see the terminal on the remote end.

connect to mysql :
type mysql -u username -p password 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:32:27.260

您可以使用腻子软件。这是[下载链接。](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:56:34.503

你可以使用putty来连接mysql。连接字符串会像这样

mysql -uDBUSER -pDBPASSWORD DBNAME -hHOST-IP

或者你也可以使用navicat或者sql yog软件远程连接linux系统上的mysql。

# bash - Bash：如何进行同步调用，直到在日志文件中找到匹配模式

> ID：11425550
> 
> 赞同：1
> 
> 时间：2012-07-11T04:26:59.267
> 
> 标签：bash

我有一个启动服务器脚本

```
startserver.sh 
```

它将作为`startserver.sh &` 脚本需要运行一段时间的后台任务运行，直到它真正可以在运行状态下运行。`server.log`运行状态可以在准备好时写入日志文件。

所以我需要通过执行 bash cmd 知道服务器何时真正运行。如果没有，我需要等到 server.log 中显示 Running 状态。

我可以在 bash 中实现这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T08:01:55.777

try something like this

```
mkfifo my_fifo
tail -f server.log >my_fifo &
tail_pid=$!
perl -ne '/pattern/&&exit' <my_fifo
kill $tail_pid
rm my_fifo 
```

EDIT : perl command can be replaced with

```
grep -l 'pattern' <my_fifo >/dev/null 
```

or if grep support this option

```
grep -q 'pattern' <my_fifo 
```

# tfs - 如何处理 TFS 中的剩余任务

> ID：11425551
> 
> 赞同：11
> 
> 时间：2012-07-11T04:27:04.703
> 
> 标签：tfs, scrum

在 TFS 中处理未结束 sprint 的任务和用户故事的最佳方法是什么？

我的做法：

*   使用正确的原因子状态将每个任务设置为“已关闭”。我将此任务 + 原始估计 + 剩余时间复制到记事本。
*   从用户故事中删除迭代（以便它再次出现在产品待办列表中）

对于下一个冲刺：

*   将记事本中的任务作为新任务添加到 TFS，将其分配给正确的用户故事并将用户故事设置为当前 sprint。

这只是一种方法。你有更好的想法或建议吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-23T23:43:41.683

如果你真的在做 Scrum，你会看到对任何团队来说唯一重要的指标就是“剩余工作量”。问题是，许多人痴迷于度量、统计、数据和对 Scrum 本质的松散跟踪。

所以保持简单。在 sprint review 中，只需与 PO 就何时完成工作达成一致，然后将未完成的任务分配给约定的 sprint。

如果您想提高一点生产力；然后创建一个未完成任务的查询，只需将迭代列值替换为下一个 sprint 并发布回 TFS。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-16T04:16:45.390

有两种思想流派：

1.  保留这些并在 Product Backlog 迭代（通常是团队项目根）中创建新的。我们会留下它们并删除这些点（用于速度报告），因为它们代表了我们的 sprint 计划。
2.  将迭代更新到 Product Backlog，并在下一个 sprint 中像处理任何其他 Story 一样处理它们。（我会订阅这个）。

每个团队的任务都不同。如果您在接下来的 sprint 中再次选择故事，请更新任务迭代路径并完成。如果您不选择备份，我将删除这些任务，以便您讨论如何在您选择备份时存在的软件上下文中满足*需求*。将任务留在故事中超过 sprint 会给我们一种错误的安全感，即这些仍然是所有必要的事情。我宁愿重新评估我们将如何实现它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T14:17:19.087

我们做与您完全相同的事情，但不使用记事本，我们只需将任务[复制](http://msdn.microsoft.com/en-us/library/ms181321.aspx)到一个新任务中，然后将其分配到新的迭代中。默认情况下，复制任务链接到原始任务的所有工作项，以及原始任务本身。
旧任务保留在旧迭代中并被标记为“已关闭”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-23T19:54:04.393

也许我没有正确解决您的问题，但这是我的观点：撤消任务的主要思想是未完成待办事项/用户故事。因此，在冲刺之后，所有完成的 backlogitems/userstories -> 新增量。如果一个 backlogitem 没有完全准备好，那么整个 backlogitem 就不会被交付，即使它只剩下几个任务。只需将所有内容回滚（保留代码:)）并完成冲刺。backlogitem/userstory 进入下一个 sprint。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T04:30:36.220

在我看来，没有必要将它们标记为关闭。只需保留剩余的任务，将它们标记/标记为未完成，开始一个新的 sprint，并将具有该特定标记的所有任务应用为新的/即将到来的 sprint（如有必要，重新评估它们的时间和困难）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-28T15:18:45.943

这是一个非常常见的场景，我们在积压工作中有一些东西可以为此创建一个适合目的的解决方案，但我们还没有将它优先于其他工作。

如果您认为这很重要，请随时在[user voice](http://visualstudio.uservoice.com)处添加建议。我们在优先级中使用该网站：这是您影响我们的机会

Ewald Hofman（TFS 产品组）

# ruby-on-rails - Ruby on Rails 应用程序只能由 localhost 访问

> ID：11425553
> 
> 赞同：0
> 
> 时间：2012-07-11T04:27:46.980
> 
> 标签：ruby-on-rails, apache, localhost, passenger

我将一个 RoR 应用程序部署到我的服务器，并带有一个额外的 Apache2 虚拟主机文件：

```
<VirtualHost *:80>
    # ServerName ubuntu
    DocumentRoot /var/www/myapp/current/public
    PassengerEnabled off 
    ProxyPass / http://127.0.0.1:9051
    ProxyPassReverse / http://127.0.0.1:9051

    <IfModule mod_rewrite.c>
      RewriteEngine On

      # Redirect all requests to the maintenance page if present
      RewriteCond %{REQUEST_URI} !\.(css|gif|jpg|png)$
      RewriteCond %{DOCUMENT_ROOT}/system/maintenance.html -f
      RewriteCond %{SCRIPT_FILENAME} !maintenance.html
      RewriteRule ^.*$ /system/maintenance.html [L] 
    </IfModule>

</VirtualHost> 
```

我使用Passenger启动它：

```
passenger start -a 127.0.0.1 -p 9051 -e production -d 
```

这是一个 Ubuntu 服务器：

```
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 12.04 LTS
Release:    12.04
Codename:   precise 
```

端口正在监听：

```
plee@ubuntu:~$ sudo lsof -i :9051
[sudo] password for plee:
COMMAND  PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
nginx   1016 plee    4u  IPv4 168135      0t0  TCP localhost:9051 (LISTEN)
nginx   1017 plee    4u  IPv4 168135      0t0  TCP localhost:9051 (LISTEN)
nginx   1017 plee    5u  IPv4 225556      0t0  TCP localhost:9051->localhost:44586 (ESTABLISHED)
ruby    1018 plee    5u  IPv4 225555      0t0  TCP localhost:44586->localhost:9051 (ESTABLISHED) 
```

问题是，我的应用程序只能由`http://localhost:9051`

如果我尝试使用服务器的 IP 地址从另一台机器连接：`http://10.50.10.75:9051`

谷歌浏览器给了我：

```
Google Chrome could not connect to 10.50.10.75:9051 
```

请帮帮我！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T19:05:33.693

你太努力了。如果您像您一样在服务器上，应用程序在各种端口上运行（它们可能是 dev / staging，对吗？），并且您只想在端口**:9501**访问此应用程序，那么简单的方法是抛弃阿帕奇。你需要的只是乘客，你可以这样开始，**没有 -a 选项**：

```
passenger start -p 9051 -e production -d 
```

就是这样; 你完成了。（您可能想确保您的防火墙（可能是**ufw**）没有阻止该端口，但如果您仍然遇到问题，这是唯一需要测试的东西。）

最后一条建议：不要使用浏览器来测试这种东西。使用**卷曲**。例如，

```
curl --head http://x.y.z.a:9051 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T05:58:52.317

如果你想访问它在另一个端口上访问它，你需要为此添加一个虚拟主机实体，你还需要让 apache 监听该端口以及端口 80

这是你需要的

```
#set the mod_passenger path **MAY BE DIFFERENT FOR YOU**
LoadModule passenger_module /usr/lib/ruby/gems/1.8/gems/passenger-2.1.3/ext/apache2/mod_passenger.so
PassengerRoot /usr/lib/ruby/gems/1.8/gems/passenger-2.1.3
PassengerRuby /usr/bin/ruby1.8

#Listen to port 9501
Listen 9501

#add virtual host enty for port 9501
<VirtualHost *:9501>
        ServerName myservername
        DocumentRoot /var/www/tut/public

        <Directory /var/www/tut/public>
                Allow from all
                Options -MultiViews
        </Directory>

</VirtualHost> 
```

**注意**：现在不需要从命令行启动乘客，这应该已经这样做了。

这对我有用。

# android - 如何使用布局充气器添加另一个视图

> ID：11425555
> 
> 赞同：0
> 
> 时间：2012-07-11T04:27:49.900
> 
> 标签：android, layout-inflater

我用两个按钮创建了 mainLayout

add：添加其他布局

remove ：删除其他布局。

```
 <Button
             android:id="@+id/btnAdd"
             android:textStyle="bold"

             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:layout_gravity="center_horizontal"
             android:text="Add View"
             android:onClick="addView" />

      <Button
             android:id="@+id/btnRemove"
             android:textStyle="bold"

             android:layout_width="fill_parent"
             android:layout_height="wrap_content"
             android:layout_gravity="center_horizontal"
             android:text="Remove View"
             android:onClick="removeView" /> 
```

现在，当我单击 addView 按钮时，我编写了以下代码来添加视图

```
 LayoutInflater inflater= (LayoutInflater)this.getSystemService(LAYOUT_INFLATER_SERVICE);
    view=inflater.inflate(R.layout.other_layout,null);

    mainLayout.addView(view); 
```

**视图添加到主布局下方**。但我希望视图添加到屏幕中间而不是屏幕底部。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:51:18.630

像这样得到parentLayout

```
parentLayout=(YourParentLayout)view.findViewById(R.id.parentLayout); 
```

然后

```
parentLayout.addView(yourview); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:43:22.523

修改此行并放置您的父视图。

```
view=inflater.inflate(R.layout.other_layout,PARENT_VIEW_OBJECT); 
```

它应该工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T04:57:12.853

你可以检查下面的代码，它对我来说工作正常

```
private View view = null ;
Button addbutton = null;
ViewGroup parent = null;
LayoutInflater inflater = null;

inflater= (LayoutInflater)this.getSystemService(LAYOUT_INFLATER_SERVICE);
addbutton = (Button)findViewById(R.id.btnAdd);

parent = (ViewGroup) findViewById(R.id.mainxml);

addbutton.setOnClickListener(new View.OnClickListener() {
       @Override
       public void onClick(View view) {
           view = inflater.inflate(R.layout.other, null);
            parent.addView(view);
       }
   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-25T20:31:13.100

我会考虑使用[ViewStub](http://developer.android.com/training/improving-layouts/loading-ondemand.html)它在调用 .inflate() 之前占有一席之地。这样，布局在需要之前不会占用资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-25T20:22:23.883

我会在您希望视图所在的主布局顶部放置一个空的 LinearLayout 占位符，并将视图添加到其中而不是主布局。

您可以先调整占位符并修改其位置和外观。

```
<LinearLayout
android:id="@+id/placeholder"
android:layout_width="match_parent"
android:layout_height="wrap_content"/>

<Button
..../>

<Button
..../> 
```

# syntax - PHP，解析错误：语法错误，意外的 T_FUNCTION

> ID：11425559
> 
> 赞同：1
> 
> 时间：2012-07-11T04:28:14.550
> 
> 标签：syntax, syntax-error, php

```
class test
{
    public $do;
    function __construct($data="")
    {
        $this->parse($data);
    }
    private function parse($data)
    {
        // Decoding the functions
        $decoded_data = json_decode($data,true); 
        array_walk_recursive($decoded_data,function(&$function) {
            $first_line = strtok($function, "\n");
            preg_match("/\/\*#(.*?)\#*\//",$first_line,$matches);
            $function = create_function($matches[1],$function);
        });
        $this->do = $decoded_data;  
    }
} 
```

`Parse error: syntax error, unexpected T_FUNCTION`

错误在于：

`array_walk_recursive($decoded_data,function(&$function)`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-11T04:29:18.637

检查你的 PHP 版本，匿名函数只支持 5.3+

# r - 在 R 中使用 ARIMA 创建经季节调整的数据

> ID：11425562
> 
> 赞同：5
> 
> 时间：2012-07-11T04:28:23.140
> 
> 标签：r

我想生成过去 22 年每个县的经季节性调整的失业数据。

美国劳工统计局使用 ARIMA 对整个国家的失业率进行季节性调整，但不适用于个别县。我需要帮助弄清楚如何在 R 中强制 ARIMA 为每个美国县进行季节性调整。

我可以使用 得到 ARIMA 模型`auto.arima(mytimeseries)`，但我不知道如何减去季节性分量（使用`(decompose(mytimeseries))$seasonal)`.

这个网站[https://onlinecourses.science.psu.edu/stat510/?q=book/export/html/51](https://onlinecourses.science.psu.edu/stat510/?q=book/export/html/51)暗示我应该能够减去 ARIMA 残差：

```
predicteds = oilindex - expsmoothfit$residuals 
```

但是当我尝试它时，这看起来并不正确（肉眼）——它看起来根本没有识别出大部分的季节性变化。

我想也许提出的模型`auto.arima()`很差，但是当我将模型绘制在与原始数据相同的图上时，它看起来相当不错。

该站点[http://www.statoek.wiso.uni-goettingen.de/mitarbeiter/ogi/pub/r_workshop.pdf](http://www.statoek.wiso.uni-goettingen.de/mitarbeiter/ogi/pub/r_workshop.pdf)谈到了通过使用 predict() 与序列进行平滑处理，但我无法让它工作：我无法判断我的`data.frame(mytimeseries[date=seq])`行是否有问题，或者 arima 对象是否没有与`gam`对象相同的方法，因此预测不起作用。

那么：如何使用 ARIMA 从数据中去除季节性？任何帮助表示赞赏！

这是我到目前为止的一个例子。（我是一个 R 新手，所以毫无疑问，这段代码是次优的。）

```
# I put unadjusted values for one county at
# http://tmp.webfoot.com/tmp/tmp/unemployment17019.csv
a = read.table("/tmp/unemployment17019.csv", header=FALSE)
# there is probably a simple seven-character way of doing the next line...
all = c(a[1,], a[2,], a[3,], a[4,], a[5,], a[6,], a[7,], a[8,], a[9,], a[10,], a[11,], a[12,], a[13,], a[14,], a[15,], a[16,], a[17,], a[18,], a[19,], a[20,], a[21,], a[22,])
timeseries=ts(as.numeric(all), frequency=12, start=1990)
arimabestfit = forecast::auto.arima(timeseries)
title("Iroquois County", xlab="Date", ylab="Unemployment Rate")
legend(1991,12,c("unadjusted", "adjusted"), col=c("grey", "red"), cex=0.8, lty=1)
plot((timeseries - arimabestfit$residuals), col="red", ylim=c(0,12))
lines(timeseries, col="grey") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T22:47:45.137

劳工统计局使用美国人口普查局的 X12 算法对数据进行季节性调整

有一个 R 包 (x12) 实现了这个功能

美国人口普查局：

[http://www.census.gov/srd/www/x12a/](http://www.census.gov/srd/www/x12a/)

x12 包 r：

[http://cran.r-project.org/web/packages/x12/x12.pdf](http://cran.r-project.org/web/packages/x12/x12.pdf)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-06-03T07:43:51.790

分解季度和月度数据的最流行方法之一是 X-12-ARIMA，它起源于美国人口普查局开发的方法。它现在被世界各地的局和政府机构广泛使用。该方法的早期版本包括 X-11 和 X-11-ARIMA。X-13-ARIMA 方法目前是最现代的标准，将 X-12-ARIMA 与 TRAMO/SEATS 相结合。TRAMO/SEATS 代表基于 Victor Gomez 和 Agustin Maravall（西班牙银行）开发的季节性调整方法的 ARIMA 模型。您可以在此处找到有关季节性调整的简短介绍：

[https://economictheoryblog.com/2017/05/02/seasonal-adjustment/](https://economictheoryblog.com/2017/05/02/seasonal-adjustment/)

存在一个称为季节性的可靠 R 包，它有助于 R 中的季节性调整。R 包为美国人口普查局提供的 Fortran 库提供了一个易于使用的接口。以下链接提供了有关如何在 R 中进行季节性调整的简短教程：

[https://economictheoryblog.com/2017/05/16/seasonal-adjustment-in-r/](https://economictheoryblog.com/2017/05/16/seasonal-adjustment-in-r/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T14:07:05.547

我知道你想对你的时间序列进行淡化。我使用来自[http://research.stlouisfed.org/fred2/series/ILIROQ5URN/downloaddata?cid=27976](http://research.stlouisfed.org/fred2/series/ILIROQ5URN/downloaddata?cid=27976)的数据进行演示。

```
unemploy<-read.table("ILIROQ5URN.txt",header=T,skip=11)
unemploy<-ts(unemploy$VALUE,frequency=12,start(1990,1))

plot(deseason<-stl(unemploy,s.window="periodic"))

plot(unemploy)
lines(deseason$time.series[,2],col="red") 
```

这对你有帮助吗？

# javascript - 如何在没有查询字符串和参数的情况下进行 jQuery 加载？

> ID：11425569
> 
> 赞同：2
> 
> 时间：2012-07-11T04:28:42.113
> 
> 标签：javascript, jquery

我有一个愚蠢的网络设备，它的 HTTP 托管功能有限，我正在尝试编写一个稍微动态的页面来显示数据。可以在`/temp.dat`设备上以纯文本形式找到一些当前过程值，但我的石头简单的 jQuery 脚本...

```
$(document).ready(function() {
     $('#temp').load('/temp.dat');
   var refreshId = setInterval(function() {
      $('#temp').load('/temp.dat');
   }, 2000);
   $.ajaxSetup({ cache: false });
}); 
```

...似乎无休止地失败（仅在`.load`初始页面加载的第一个之后），因为设备厌恶 HTML 查询参数。Chrome 的 JS 控制台显示出无穷无尽的错误，如下所示：

```
GET http://192.168.1.250/temp.dat?_=1341980712854 
```

如何让 jQuery（或纯 JavaScript）在不附加 HTML 查询（... `?_=123456789`）的情况下敲击特定的 URL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T04:34:57.070

您应该能够在脚本顶部添加它

```
$.ajaxSetup ({
    cache: true
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:32:56.327

当控制台输出时`GET http://192.168.1.250/temp.dat?_=1341980712854`，那不是错误，那是尝试执行该任务的日志。当它显示为红色时，表示该特定地址的 HTTP GET 返回了错误（如 500）。

# android - OSX Lion 上的 Eclipse 3.7.2 + Cordova 1.9

> ID：11425570
> 
> 赞同：0
> 
> 时间：2012-07-11T04:29:04.133
> 
> 标签：android, eclipse, macos, cordova

我正在尝试在我的 macbook 上为 Andoid 编译一个 Web 应用程序。我已经在 Apple Store 上发布了许多应用程序，所以我从全球角度知道我在做什么。

问题是，所有教程都基于旧版本的 Elicpse 和 Phonegap，现在是 Cordova。

我遇到的两个具体问题是：

1.  我无法告诉 Eclipse 通过 USB 连接到 Android 设备。我必须在 AVM 模拟器中运行该应用程序。
2.  我只设法让 Hello world 应用程序在模拟器上运行。

更多细节：

1.  当我从 Cordova 下载的 android 文件夹中复制 .jar 和 .js 文件时，它们不会显示在 Eclispe 中左侧/项目浏览器的目录树中；但他们在那里我知道cz我把他们的副本放在那里。它们确实会出现，偶尔会在 Eclipse 重新启动几次后出现。
2.  我无法将 .jar 文件添加到构建路径。我右键单击它，但我没有得到选项。请参考以下教程：

[http://www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-eclipse-for-android.html](http://www.adobe.com/devnet/html5/articles/getting-started-with-phonegap-in-eclipse-for-android.html)

2个具体问题是：

1.  我是否能够使用 mac osx 和 Eclipse 通过 USB 电缆在 Android 设备上运行该应用程序，或者我需要为此在 PC 上工作？
2.  您能否澄清一下在 Mac OSX Lion 上实际运行最新的 Android 20/Elipse 3.7.2/Cordova 1.9.0 时缺少哪些步骤？关于这方面的任何最新教程？

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T12:14:35.773

1) 是的，您可以使用 mac osx 和 Eclipse 通过 USB 电缆运行您的 Android 设备。您需要注意的两件事是 i) 是 USB 电缆垃圾吗？我的三星 Galaxy S 随附的其中一条充电器电缆无法使用，即该设备永远不会被该电缆识别，但可以与其他电缆正常工作，并且 ii) 确保您将 USB 电缆插入全功率 USB 端口。MacBook 的一个操作系统升级降级为仅向 USB 端口提供一半功率（或类似的东西）。如果我想连接多个设备，我需要为它们购买一个 USB 供电的集线器。

2) [http://docs.phonegap.com/en/1.9.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/1.9.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

# .net - MVC4 HTTP 错误 403.14 - 禁止

> ID：11425574
> 
> 赞同：90
> 
> 时间：2012-07-11T04:29:28.667
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-4, iis, http-status-code-403

我已经构建了一个 .net4.5 ASP.NET MVC4 Web 应用程序，它在本地运行良好（IIS Express 和开发服务器），但是一旦我将它部署到我的 Web 服务器，它就会抛出 403 错误。我已经在服务器上安装了 .Net 4.5RC，甚至尝试了 `aspnet_regiis -i` 每个人都推荐的针对 MVC/.Net 以前版本的问题，但它没有帮助。

有任何想法吗？

**编辑**：有关情况的更多信息。服务器是 32 位的，我还有 4 个其他 MVC3 应用程序可以正常工作。只是我的 MVC4 应用程序不工作。

* * *

## 回答 #1

> 赞同：172
> 
> 时间：2012-07-11T15:07:02.100

尝试

```
<system.webServer>
   <modules runAllManagedModulesForAllRequests="true"/> 
 </system.webServer> 
```

通过

[https://serverfault.com/questions/405395/unable-to-get-anything-except-403-from-a-net-4-5-website](https://serverfault.com/questions/405395/unable-to-get-anything-except-403-from-a-net-4-5-website)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-07-11T13:13:35.063

错误 403.14 是不允许列出目录内容的 HTTP 错误代码。请确保

1.  您已将网站设置为 IIS 中的应用程序
2.  您在服务器上安装了 .NET 4.5
3.  您已将应用程序池设置为运行正确版本的 .NET 框架（即，它未设置为 .NET 2.0
4.  您正在应用程序池上使用集成管道
5.  .NET 4.5 实际上是在 IIS 中注册的。有关类似问题/解决方案，请参阅[此帖子](https://stackoverflow.com/questions/2374957/asp-net-mvc-on-iis-7-5)

通常，a 和 d 是围绕 MVC 部署到 IIS 的最大问题

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-04-09T18:48:58.343

也许......如果您碰巧使用了发布向导（就像我一样）并选择了“发布期间预编译”复选框（就像我一样）并看到相同的症状......

是的，我打了自己的头，但在取消选中此框后，一个看似无关的设置，所有描述的症状在重新部署后都消失了。

希望这可以解决一些人。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-11-29T00:26:39.003

Windows->开始->打开和关闭寡妇功能

确保您检查了所需的选项

[![在此处输入图像描述](../Images/3a5d0a13ae104fdccf6ae0f012a8c837.png)](https://i.stack.imgur.com/n3v1N.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-02-13T17:51:45.763

申请前

```
runAllManagedModulesForAllRequests="true"/> 
```

考虑下面的链接，该链接提出了一个不太激烈的替代方案。在帖子中，作者对本地 web.config 进行了以下更改：

```
 <system.webServer>
    <modules>
    <remove name="UrlRoutingModule-4.0" />
    <add name="UrlRoutingModule-4.0" type="System.Web.Routing.UrlRoutingModule" preCondition="" />
    </modules> 
```

[http://www.britishdeveloper.co.uk/2010/06/dont-use-modules-runallmanagedmodulesfo.html](http://www.britishdeveloper.co.uk/2010/06/dont-use-modules-runallmanagedmodulesfo.html)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2013-12-18T16:47:14.183

Visual Studio 2012 中有一个[重构 --> 重命名错误](http://connect.microsoft.com/VisualStudio/feedback/details/656466/refactor-rename-bug/ "重构 --> 重命名错误")，它错误地重命名了我的 RouteConfig.cs 中 url 参数*的文字字符串值内的“id”。*这导致在 Windows Server 2012 和 Windows Server 2008 R2 中进行全新且正确的设置时出现 403.14。

```
routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

改为

```
routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{renamed_text}",
    defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-04-29T02:21:07.827

如果您在 Windows 8 或 Server 2012 上运行 IIS 8.5，您可能会发现运行 mvc 4/5 (.net 4.5) 在虚拟目录中不起作用。如果您在主机文件中创建一个本地主机条目以指向您的本地计算机，然后将一个新的本地 IIS 网站指向该文件夹（具有匹配的主机头条目），您会发现它可以工作。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-07-23T18:54:10.397

如果在使用开发服务器进行测试时使用集成管道，然后在您的实时 IIS 7.5 Web 服务器上安装为经典管道模式，您也可以获得 403，我也缺少我的 app_data 文件夹，这也是必需的

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-04-09T14:42:19.337

```
<system.webServer>
   <modules runAllManagedModulesForAllRequests="true"/> 
 </system.webServer> 
```

你可以使用上面的代码

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-04-15T13:32:17.350

我已将新应用程序的应用程序池设置为`DefaultAppPool`IIS 中的应用程序池，显然它正在使用`Classic`带有`.NET v.2.0`.

为了解决这个问题，我使用`Integrated`管道和`.NET v4.0`. 只是为了这个新的应用程序，然后一切都开始按预期工作。

不要忘记将这个新的应用程序池分配给应用程序。在 IIS 中选择应用程序，单击`Basic Settings`然后选择该应用程序的新应用程序池。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-07-11T05:52:18.410

我最近经常看到的是 IIS，它允许 32 位应用程序运行

这是你尝试过的。否则我们需要有关生产和开发服务器版本的更多信息

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-03-04T23:27:06.293

我有一点不同的问题，在服务器 2012 上，不知何故我忘了启用 asp.net 4.5，所以如果你有这个问题，请仔细检查你是否启用了它。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-06-27T16:10:54.843

我在 Azure 和 ASP.NET 4.5、IIS 8 上运行 Windows Server 2012 R2

我通过卸载程序和功能中的所有 ASP.NET 项目解决了这个问题，然后使用服务器管理器使用添加角色和功能重新安装 ASP.NET：选择基于角色或基于功能的安装，选择我的服务器，然后对于 Select Server Role 选择 Web Server (IIS)/Web Server/Application Development，然后单击 ASP.NET 4.5，确认安装了先决条件，然后重新安装 ASP.NET 4.5。

我以前的搜索使我相信问题实际上源于 ASP.NET 的注册问题。对于早期版本的 ASP.NET，实际上有一个实用程序可以运行来注册 ASP.NET 而无需重新安装，但它似乎不再可用。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-05-21T19:51:27.323

我解决了打开视觉工作室、扩展引用并将属性“复制本地”更改为“真”的问题。

我发现将旧版本的 dll 与我的新版本的 dll 进行比较（这不起作用）

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-04-18T15:22:36.237

就我而言，我的应用程序的默认页面是 index.html，默认文档选项中缺少该页面。添加它修复了 403.14 Forbidden 错误。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-08-30T12:27:41.500

在我的情况下，问题是由自定义 ActionFilterAttribute 引起的，它是一种全局过滤器属性。该属性通过 Autofac 实例化了一个服务，但该服务在构造函数中崩溃了：

```
public ActionFilterAttribute()
{
    _service = ContainerManager.Resolve<IService>();
}

public class Service: IService
{ 
    public Service()
    {
        throw new Exception('Oops!');
    }
} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-10-13T06:54:36.110

在我的情况下，Windows 功能都`aspnet_regiis -i`没有完成这项工作。经过数小时的互联网挖掘，我提出了自己的解决方案：

1.  在模块的 IIS 管理器中，我在 UrlRoutingModule-4.0 节点中将继承更改为本地：

    [![在此处输入图像描述](../Images/ea4dd2f6558637f5b2ffffb7ff8ca37d.png)](https://i.stack.imgur.com/2UHnD.png)

2.  在 web.config 中，我粘贴了来自该论坛的一些技巧：

    ```
    <system.webServer>
        <modules runAllManagedModulesForAllRequests="true">
            <remove name="UrlRoutingModule-4.0"></remove>
            <add name="UrlRoutingModule-4.0" type="System.Web.Routing.UrlRoutingModule" preCondition=""></add>
        </modules>
    </system.webServer> 
    ```

希望能帮助到你

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-08-26T18:03:03.753

要么我无意中将我的应用程序池 .NET CLR 版本更改为：无托管代码，要么当我为部署在同一台服务器上的新 .NET 5 Web 应用程序更改应用程序池时，它被更改了。

将我的应用程序池 .NET CLR 版本更改回：.NET CLR 版本 v4.0.30319 解决了该问题。

# ios - 如何将多个信息打包到 NSData 并发送/接收/处理数据？

> ID：11425575
> 
> 赞同：0
> 
> 时间：2012-07-11T04:29:31.727
> 
> 标签：ios, nsdata, gksession

我正在 iOS 上制作一款小型纸牌游戏。我正在使用 GameKit/GKsession 来处理我的网络数据传输。

我的问题是如何将多个信息*“打包”*到 NSData 并发送。当服务器接收到 NSData 时，如何解包并以正确的方式处理信息。

例如，我可以毫无问题地发送和接收 NSString。但是我的游戏有不同的数据类型需要发送和接收，例如 UIImage/NSString/NSArray/...

我在 SDK 中找到了示例项目 GKTank。但这对我来说真的很难理解。在我的猜测中，它定义了几种数据类型。

有人可以告诉我如何让服务器知道客户端正在发送什么样的数据（NSString？UIImage？）在这个方法中：

```
- (void)receiveData:(NSData *)data fromPeer:(NSString *)peer inSession:(GKSession *)session context:(void *)context 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:34:38.253

你实际上在寻找两件事。

1) 困扰发送方和接收方理解的协议；

2）一种将对象“序列化”为提供给协议的数据类型并“反序列化”对象数据的方法。

对于 1，您有多种选择，例如 JSON、XML（基于字符串）和基于字节的协议，例如 Protocol Buffer。

对于 2，您有各种解析器，例如 SBJson、TBXML 和 protobuf，可帮助您对 (1) 中选择的协议进行编码和解码。

# c++ - 私有构造函数禁止使用 emplace[_back]() 以避免移动

> ID：11425576
> 
> 赞同：17
> 
> 时间：2012-07-11T04:29:41.677
> 
> 标签：c++, c++11, access-modifiers, move-semantics

考虑以下代码：

```
#include <vector>

class A
{
public:    
    A(A&&);  // somewhat expensive

    static std::vector<A> make_As()
    {
        std::vector<A> result;
        result.push_back(A(3));
        result.push_back(A(4));
        return result;
    }

private:
    A(int);  // private constructor
}; 
```

由于`A`' 移动构造函数有点昂贵（无论出于何种原因），我想避免调用它并`emplace_back()`改用：

```
#include <vector>

class A
{
public:    
    A(A&&);  // somewhat expensive

    static std::vector<A> make_As()
    {
        std::vector<A> result;
        result.emplace_back(3);
        result.emplace_back(4);
        return result;
    }

private:
    A(int);  // private constructor
}; 
```

不幸的是，使用`emplace_back()`，实际的构造函数调用是由标准库中的某些东西完成的，它没有足够的特权来调用`A`的私有构造函数。

我意识到对此可能无能为力，但尽管如此，我觉得由于调用`emplace_back()`发生在 的成员中`A`，它们*应该*能够调用私有构造函数。

有什么解决方法吗？

我唯一能想到的就是在 中添加一个朋友声明`A`，但是需要成为`A`朋友的确切类（即实际尝试调用构造函数的类）是特定于实现的（例如，对于海湾合作委员会它是`__gnu_cxx::new_allocator<A>`）。**编辑**：刚刚意识到这样的朋友声明将允许*任何人*`emplace_back()` `A`使用私有构造函数将 ' 构造到 ' 的容器中，`A`所以它不会真正解决任何问题，我还不如在那时将构造函数公开......

**更新**：我应该补充一点`A`，昂贵的移动构造函数并不是避免调用它的唯一原因。它可能`A`根本不能移动（也不能复制）。当然，这不适用于`vector`（因为`emplace_back()`可能必须重新分配向量），但可以使用`deque`，它也有类似的`emplace_back()`方法，但不必重新分配任何东西。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-11T06:57:31.610

~~一种可能的解决方法（或 kludge）是使用辅助类将参数保存到`A`（我们称之为此类`EmplaceHelper`）的私有 ctor 中。EmplaceHelper 还应该有一个私人 ctor，并且应该与`A`. 现在你所需要的只是 A 中的一个公共 ctor 接受这个`EmplaceHelper`（可能是通过 const-ref），并将它与`emplace_back(EmplaceHelper(...))`.~~

由于`EmplaceHelper`只能由 构造`A`，因此您的公共 ctor 实际上仍然是私有的。

~~甚至可以使用模板化的 EmplaceHelper 来概括这个想法（可能`std::tuple`用于保存 ctor 参数）。~~

**编辑：**实际上，我似乎把它复杂化了，因为 GManNickG 下面的评论给了我一个更简单的想法：添加一个私有助手类（`private_ctor_t`在示例中），它只是一个空类，但由于它是私有的，它只能由`A`. 修改`A`的构造函数以包含这个私有类作为第一个（或最后一个）参数（并使其公开）。效果是它只能`A`像有一个私有构造函数一样构造自己，但是现在可以轻松地委托这个构造。

像这样：

```
#include <vector>
class A 
{ 
private:
    struct private_ctor_t {};

public:     
    A(private_ctor_t, int x) : A(x) // C++11 only, delegating constructor
    {}

    A(A&&) { /* somewhat expensive */ }

    static std::vector<A> make_As() 
    { 
        std::vector<A> result; 
        result.emplace_back(private_ctor_t{}, 3); 
        result.emplace_back(private_ctor_t{}, 4); 
        return result; 
    } 

private: 
    A(int) { /* private constructor */ }
}; 
```

如果委托的构造函数不可用，您可以将每个版本的公共代码分解出来，或者干脆完全去掉，`A(int)`只使用新版本。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-11T06:52:36.450

按照 C++11 标准，所有标准容器都应该使用该`allocator::construct`方法进行就地构造。因此，您可以简单地`std::allocator`与`A`.

我想从技术上讲，这个函数可以将实际的构造调用委托给其他东西。就个人而言，我认为规范应该更加严格地强制执行哪些对象调用构造函数以及哪些可以委托和不能委托。

如果发生这种委派，或者出于任何原因，您可以提供自己的分配器，将所有调用转发到`std::allocator`except `construct`。我不建议使用后者，因为许多标准容器实现都有特殊的处理代码`std::allocator`，可以让它们占用更少的空间。

> 刚刚意识到这样的朋友声明将允许任何人将使用私有构造函数构造的 A emplace_back() 放入 A 的容器中，因此它不会真正解决任何问题，我还不如在那时将构造函数公开...

然后你将不得不决定什么对你来说更重要：就地建造，还是隐藏私人。从本质上讲，就地构造意味着*不在*您的代码中的人正在执行构造。因此，没有办法绕过它：某些外部代码*必须*命名为朋友，或者构造函数必须是公共的。简而言之，构造函数必须对被委托构造的任何人*公开*访问。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T05:56:55.403

让我们简化一下。以下无法编译，因为 V 无法访问 A 的私有构造函数。

```
struct V
{
    E(int i)
    {
        // ...
        auto a = A(i);
        // ...
    }
}; 
```

回到您的代码，V 只是向量的简化，而 V::E 只是 emplace_back 所做的简化。vector 无法访问 A 的私有构造函数，并且 vector::emplace_back 需要调用它。

# javascript - 弹出窗口中的文本区域不接受输入

> ID：11425577
> 
> 赞同：0
> 
> 时间：2012-07-11T04:29:43.797
> 
> 标签：javascript, popup

我正在尝试创建具有以下功能的 HTA 应用程序 1）用户单击按钮 2）弹出包含多个 textareas 的弹出窗口 3）用户然后将信息输入到 textareas 4）用户然后单击“做某事”按钮在弹出窗口中（不包括在代码中） 5）应用程序中的 JavaScript 对数据进行处理（不包括在代码中）

我坚持第三点。show_popup 函数使用 .innerHTML 将 inputText div 元素放置在弹出窗口内。

但是，当它这样做时，它会以只读类型的方式将 textarea 带入其中，它不允许我输入文本。

如果有人对如何解决此问题有任何意见，将不胜感激。

我的代码如下

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<HTA:APPLICATION/>
<script type="text/javascript">
function show_coords(event)
{
var x=event.screenX + document.body.parentNode.scrollLeft - window.screenLeft;
var y=event.screenY + document.body.parentNode.scrollTop - window.screenTop;
document.getElementById('coordVarX').value = x;
document.getElementById('coordVarY').value = y;
}
function show_popup(divId,winWidth,winHeight)
{
var p=window.createPopup();
var pbody=p.document.body;
var x = document.getElementById('coordVarX').value;
var y = document.getElementById('coordVarY').value;
pbody.style.border="solid black 1px";
pbody.innerHTML=divId.innerHTML;
p.show(x,y,winWidth,winHeight,document.body);
}
</script>
</head>

<body onmousedown="show_coords(event)">
<textarea id="coordVarX" name="coordVarX" value="" style="display:none;"></textarea>
<textarea id="coordVarY" name="coordVarY" value="" style="display:none;"></textarea>

<button onclick="show_popup(inputText,150,30)">Enter text</button>

<div id="inputText" style="display:none;">
    <span>
        <form>
            <input type="textarea" value=""></input>
        </form>
    </span>
</div>

</body>
</html> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:34:57.113

你需要`<textarea></textarea>`- 不输入 type=textarea

# sql - SQL 中的 sp_execute_policy 错误，如何创建 SQL 构面策略

> ID：11425579
> 
> 赞同：0
> 
> 时间：2012-07-11T04:29:59.277
> 
> 标签：sql, sql-server, conditional-statements, administrator, policies

我正在尝试在 sql 中创建一个将 sproc 限制为命名约定的策略。

就像当有人创建一个新的 sproc 时，他们将被迫在 sproc 前面加上`sp_`

喜欢 - `sp_MySprocName`。

但是当我尝试使用正确的命名约定创建一个新的存储过程时，我得到了下面的错误。

当我右键单击策略并选择我的策略时，我单击该`Evaluate`选项并且一切运行良好，与实际创建新存储过程不同，我收到此错误。

```
Msg 6522, Level 16, State 1, Procedure sp_execute_policy, Line 0
A .NET Framework error occurred during execution of user-defined routine or aggregate "sp_execute_policy": 
System.TypeInitializationException: The type initializer for 'Microsoft.SqlServer.Management.Dmf.PolicyEvaluationHelper' threw an exception. ---> System.IO.FileNotFoundException: Could not load file or assembly 'Microsoft.SqlServer.Diagnostics.STrace, Version=10.0.0.0, Culture=neutral, PublicKeyToken=89845dcd8080cc91' or one of its dependencies. The system cannot find the file specified.
System.IO.FileNotFoundException: 
at Microsoft.SqlServer.Management.Dmf.PolicyEvaluationHelper..cctor()
System.TypeInitializationException: 
at Microsoft.SqlServer.Management.Dmf.PolicyEvaluationHelper.EvaluateAutomatedPolicy(String policy, SqlXml eventData, Int64& historyId)
at Microsoft.SqlServer.Management.Dmf.PolicyEvaluationWrapper.EvaluateAutomatedPolicy(String policy, SqlXml eventData, Int64& historyId) 
```

![条件和错误的屏幕截图](../Images/e0ec4c441b7c85c3907252b3da10b03f.png)

我需要做什么才能解决此错误？

我已将存储过程更新为`proc_`. 现在他们是`proc_MyProcedure`。

我仍然遇到同样的错误。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:48:57.250

基本上问题是`microsoft.sqlserver.diadnostics.strace.dll`没有安装在 GAC 中。此外，这个文件不在我的服务器上，也不在安装 DVD 上，所以我无法安装它。我在家里的电脑上找到了它，但有一个技巧可以访问我的工作服务器。

我相信我已经通过复制解决了问题

```
C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE\PrivateAssemblies\Microsoft.SqlServer.Diagnostics.STrace to C:\Program Files\Microsoft SQL Server\100\Tools\Binn\VSSHell\Common7\IDE 
```

# java - 执行 doInBackround 方法时出错

> ID：11425580
> 
> 赞同：0
> 
> 时间：2012-07-11T04:30:00.957
> 
> 标签：java, android, eclipse, runtimeexception

我正在使用使用 KSOAP 的 Web 服务发送要存储在数据库中的详细信息。Web 服务没有任何问题，它可以正常工作。当我没有使用 AsyncTask 类时，此代码有效。我是 android 新手，这是我第一次尝试使用 AsyncTask 类，但它不起作用。我附上了日志猫错误，doinbackround 方法有问题。我究竟做错了什么？请帮忙

```
public class Registration extends Activity{
private static final String SOAP_ACTION = "http://tempuri.org/register";
private static final String OPERATION_NAME = "register";
private static final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";
private static final String SOAP_ADDRESS = "http://10.0.2.2:54714/WebSite1/Service.asmx";
Button sqlRegister, sqlView;

EditText  sqlFirstName,sqlLastName,sqlEmail,sqlMobileNumber,sqlCurrentLocation,sqlUsername,sqlPassword;

@Override
protected void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
setContentView(R.layout.registration);
sqlFirstName = (EditText) findViewById(R.id.etFname);
sqlLastName = (EditText) findViewById(R.id.etLname);
sqlEmail = (EditText) findViewById(R.id.etEmail);
sqlMobileNumber = (EditText) findViewById(R.id.etPhone);
sqlCurrentLocation = (EditText) findViewById(R.id.etCurrentLoc);

sqlUsername = (EditText) findViewById(R.id.etUsername);
sqlPassword = (EditText) findViewById(R.id.etPwd);

sqlRegister = (Button) findViewById(R.id.bRegister);
sqlRegister.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        switch (v.getId()){
        case R.id.bRegister:
        new LongOperation().execute("");
        break;
      }
     }
    });
}

private class LongOperation extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {
         String firstname = sqlFirstName.getText().toString();
         String lastname = sqlLastName.getText().toString();
         String emailadd = sqlEmail.getText().toString();
         String number = sqlMobileNumber.getText().toString();
         String loc = sqlCurrentLocation.getText().toString();
         String uname = sqlUsername.getText().toString();
         String pwd = sqlPassword.getText().toString();

         SoapObject Request = new SoapObject(WSDL_TARGET_NAMESPACE,OPERATION_NAME);
         Request.addProperty("fname", String.valueOf(firstname));
         Request.addProperty("lname", String.valueOf(lastname));
         Request.addProperty("email", String.valueOf(emailadd));
         Request.addProperty("num", String.valueOf(number));
         Request.addProperty("loc", String.valueOf(loc));
         Request.addProperty("username", String.valueOf(uname));
         Request.addProperty("password", String.valueOf(pwd));
         Toast.makeText(Registration.this, "You have been registered Successfully", Toast.LENGTH_LONG).show();

         SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
         envelope.dotNet = true;
         envelope.setOutputSoapObject(Request);
         HttpTransportSE httpTransport  = new HttpTransportSE(SOAP_ADDRESS);
         try
         {
            httpTransport.call(SOAP_ACTION, envelope);
             SoapObject response = (SoapObject)envelope.getResponse();
             int result =  Integer.parseInt(response.getProperty(0).toString());
             if(result == '1')
             {
                 return "Registered";
             }
             else
             {
                 return "Not Registered";
             }
         }catch(Exception e){
            e.printStackTrace();
        }
         return null;

    }      

    @Override
    protected void onPostExecute(String result) {
        if(result=="Registered")
        {
        Toast.makeText(Registration.this, "You have been registered Successfully", Toast.LENGTH_LONG).show();
        }
        else if(result =="Not Registered")
        {
        Toast.makeText(Registration.this, "Try Again", Toast.LENGTH_LONG).show();
        }
        else
        {
            Toast.makeText(Registration.this, "Somethings wrong", Toast.LENGTH_LONG).show();
        }
    }

    @Override
    protected void onPreExecute() {
    }

    @Override
    protected void onProgressUpdate(Void... values) {
    }
    }   
 } 
```

![在此处输入图像描述](../Images/cafd26f384a0f7ba43ab90baf0119efe.png)

////已编辑

```
public class Registration extends Activity{
private static final String SOAP_ACTION = "http://tempuri.org/register";
private static final String OPERATION_NAME = "register";
private static final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";
private static final String SOAP_ADDRESS = "http://10.0.2.2:54714/WebSite1/Service.asmx";
Button sqlRegister, sqlView;

EditText  sqlFirstName,sqlLastName,sqlEmail,sqlMobileNumber,sqlCurrentLocation,sqlUsername,sqlPassword;

@Override
protected void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
setContentView(R.layout.registration);
sqlFirstName = (EditText) findViewById(R.id.etFname);
sqlLastName = (EditText) findViewById(R.id.etLname);
sqlEmail = (EditText) findViewById(R.id.etEmail);
sqlMobileNumber = (EditText) findViewById(R.id.etPhone);
sqlCurrentLocation = (EditText) findViewById(R.id.etCurrentLoc);

sqlUsername = (EditText) findViewById(R.id.etUsername);
sqlPassword = (EditText) findViewById(R.id.etPwd);

sqlRegister = (Button) findViewById(R.id.bRegister);
sqlRegister.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        switch (v.getId()){
        case R.id.bRegister:
        new LongOperation().execute("");
        break;
      }
     }
    });
}

private class LongOperation extends AsyncTask<String, Void, String> {

    @Override
    protected String doInBackground(String... params) {
         String firstname = sqlFirstName.getText().toString();
         String lastname = sqlLastName.getText().toString();
         String emailadd = sqlEmail.getText().toString();
         String number = sqlMobileNumber.getText().toString();
         String loc = sqlCurrentLocation.getText().toString();
         String uname = sqlUsername.getText().toString();
         String pwd = sqlPassword.getText().toString();

         SoapObject Request = new SoapObject(WSDL_TARGET_NAMESPACE,OPERATION_NAME);
         Request.addProperty("fname", String.valueOf(firstname));
         Request.addProperty("lname", String.valueOf(lastname));
         Request.addProperty("email", String.valueOf(emailadd));
         Request.addProperty("num", String.valueOf(number));
         Request.addProperty("loc", String.valueOf(loc));
         Request.addProperty("username", String.valueOf(uname));
         Request.addProperty("password", String.valueOf(pwd));

         SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
         envelope.dotNet = true;
         envelope.setOutputSoapObject(Request);
         HttpTransportSE httpTransport  = new HttpTransportSE(SOAP_ADDRESS);
         Log.d("work","work");
         try
         {
            httpTransport.call(SOAP_ACTION, envelope);
             SoapObject response = (SoapObject)envelope.getResponse();
             int result =  Integer.parseInt(response.getProperty(0).toString());
             if(result == 1)
             {
                 Log.d("reg","reg");
                 return "Registered";
             }
             else
             {
                 Log.d("no","no");
                 return "Not Registered";
             }
         }catch(Exception e){
            e.printStackTrace();
        }
         return null;

    }      

    @Override
    protected void onPostExecute(String result) {
        Log.d("tag","onpost");
        if(result!=null)
        {

            if(result.equals("Registered"))
                {
                    Toast.makeText(Registration.this, "You have been registered Successfully", Toast.LENGTH_LONG).show();
                }
            else if(result.equals("Not Registered"))
                {
                    Toast.makeText(Registration.this, "Try Again", Toast.LENGTH_LONG).show();
                }
        }
        else
        {
            Toast.makeText(Registration.this, "Somethings wrong", Toast.LENGTH_LONG).show();
        }
    }

    @Override
    protected void onPreExecute() {
    }

    @Override
    protected void onProgressUpdate(Void... values) {
    }

    } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:06:40.687

您不应该使用`==`.

```
protected void onPostExecute(String result) {
        if(result=="Registered") 
```

这可能是意外行为背后的原因。尝试使用类似的东西

```
result.equals("registered") 
```

读[这个](http://blog.enrii.com/2006/03/15/java-string-equality-common-mistake/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:35:48.893

尝试这个....

1.  始终保持 UI 在 UI 线程中工作，而 Non-UI 在 Non-UI 线程中工作。

2.  doInBackground 是一个非 UI 线程，因此您不能从此在 UI 线程上发布任何内容。

3.  Toast 语句是 doInBackgroud 中的问题，将其移至在 UI 线程上工作的 postExecute。

    ```
    Toast.makeText(Registration.this, "You have been registered Successfully", Toast.LENGTH_LONG).show(); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T04:35:55.583

你在打电话

`Toast.makeText(Registration.this, "You have been registered Successfully", Toast.LENGTH_LONG).show();`

在 doInBackground() 内部，它不在 UI 线程中运行。这导致了问题。

尝试这个：

```
runOnUiThread(new Runnable() {
    public void run() {
         Toast.makeText(Registration.this, "You have been registered Successfully", Toast.LENGTH_LONG).show();
    }
});
} 
```

或移动`Toast.makeText`到 onPostExecute() 方法，该方法在 UI 线程中运行

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T04:40:21.877

这是因为您在 doInBackground() 中调用 Toast。doInBackground 中的任何 UI 都会导致 looper() 异常。所以尝试在 AsynTask 的 PostExecute() 中将 UI 设置为

```
@Override
protected void onPostExecute(String result) {

 Toast.makeText(Registration.this, "You have been registered Successfully",Toast.LENGTH_LONG).show();

}
 } 
```

它可能对你有帮助..

# google-chrome-extension - Chrome 扩展模式中的匹配端口

> ID：11425591
> 
> 赞同：19
> 
> 时间：2012-07-11T04:31:29.650
> 
> 标签：google-chrome-extension

阅读此 Chrome 匹配模式列表：[http ://code.google.com/chrome/extensions/match_patterns.html](http://code.google.com/chrome/extensions/match_patterns.html)

如何为依赖于端口的 URL 指定匹配项？像

```
http://localhost:8080
http://kevinburke.com:5000/index.php 
```

例如。

谢谢，凯文

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-11T04:51:39.127

您可以访问所有端口。

```
"http://localhost/*", "http://kevinburke.com/*" 
```

# ios - ABAddressBook -- 搜索 Exchange 通讯录源？

> ID：11425596
> 
> 赞同：1
> 
> 时间：2012-07-11T04:31:44.417
> 
> 标签：ios, abaddressbook, abaddressbooksource

我正在尝试创建一个具有自定义界面的应用程序，用于搜索一个人的通讯录。搜索本地通讯录似乎很容易，但我不知道如何在 Exchange 通讯录源中搜索个人/记录（即 ABSourceType == kABSourceTypeExchangeGAL）。我正在使用以下代码查找 Exchange 通讯录源并对其进行查询，但我只得到一个空数组。我知道在 Exchange 通讯录中询问整个人员列表不可能返回所有条目，但是当我查询它时，我会期望该列表的某个子集。同样，我得到一个空数组。

如何在 Exchange 通讯录源中搜索联系人？

```
#define CFNIL(x) if(x){CFRelease(x); x=nil;}
    //code

    ABAddressBookRef _addressbook = ABAddressBookCreate();
    CFArrayRef allSources = ABAddressBookCopyArrayOfAllSources(_addressbook);
    ABRecordRef exchangeSource;

    for(CFIndex i =0; i<CFArrayGetCount(allSources); i++)
    {
        ABRecordRef source = (ABRecordRef)CFArrayGetValueAtIndex(allSources, i);

        NSNumber *sourceTypeNumber = (NSNumber*)((CFNumberRef)ABRecordCopyValue(source, kABSourceType));
        NSString *sourceTypeName = (NSString *)((CFStringRef)ABRecordCopyValue(source, kABSourceNameProperty));

        int sourceType = [sourceTypeNumber intValue];
        if (sourceType == kABSourceTypeExchangeGAL) 
        {
            exchangeSource = source;
        }
        [sourceTypeNumber release];
        [sourceTypeName release];
    }

    if(exchangeSource)
    {
        /*
         This finds matches in the local device addressbook
        NSArray *people = (NSArray *)ABAddressBookCopyPeopleWithName(_addressbook, CFSTR("joe"));
        for(int i=0;i<[people count]; i++)
        {
            ABRecordRef person = (ABRecordRef)[people objectAtIndex:i];
            ABMultiValueRef emails = (ABMultiValueRef)ABRecordCopyValue(person, kABPersonEmailProperty);
            NSLog(@"emails: %@",emails);
            [((NSArray*)emails) release];
        }
        [people release];
         */

        //this array is always empty
        CFArrayRef search = ABAddressBookCopyArrayOfAllPeopleInSource (_addressbook,exchangeSource);
        NSLog(@"%@", search);
        CFNIL(search);
    }
    CFNIL(exchangeSource);
    CFNIL(_addressbook); 
```

# php - 通讯民意调查

> ID：11425601
> 
> 赞同：1
> 
> 时间：2012-07-11T04:32:14.253
> 
> 标签：php, newsletter

是否可以在时事通讯中包含民意调查。例如，像

```
Do you like stackoverflow?
Yes option
No option
Don't know option
Then a submit button. 
```

通常，如果您在时事通讯中有大量 HTML，则它往往会成为垃圾邮件。但想知道可能性。

# django - 我究竟如何使用 nginx 和 gunicorn 为 Django 应用程序提供静态文件？

> ID：11425603
> 
> 赞同：9
> 
> 时间：2012-07-11T04:32:17.983
> 
> 标签：django, nginx, webserver, gunicorn

现在，我正在尝试遵循本教程：

[http://honza.ca/2011/05/deploying-django-with-nginx-and-gunicorn](http://honza.ca/2011/05/deploying-django-with-nginx-and-gunicorn)

模板站点正确加载，但图像未加载。这是我的应用程序的 config.py 文件的一部分：

```
# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = ''

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = ''

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = '/home/lilo/textImageSite/imageSite/static/' 

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = '/static/' 

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
) 
```

我的 nginx 配置文件（位于 /etc/nginx/sites-enabled）：

```
server {
listen 80;
server_name xxx.xx.xx.xx; #the actual IP of the server; it has a public IP address

access_log /home/lilo/textImageSite/access.log;
error_log /home/lilo/textImageSite/error.log;

location /static {
    root /home/lilo/textImageSite/imageSite;
}

location / {
    proxy_pass http://127.0.0.1:8888;
}
} 
```

我的 gunicorn_conf 文件：

```
bind = "0.0.0.0:8888"
logfile = "/home/lilo/textImageSite/gunicorn.log"
workers = 3 
```

现在在我的模板中，这就是我访问图像的方式：

```
<img src="{{STATIC_URL}}{{ choice.image_location}}" /> <br /> 
```

下面是生成的 HTML 的样子：

```
<img src="/static/street_sign2.jpg" /> <br /> 
```

对不起，文字墙，但我无法弄清楚我的设置有什么问题......

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-12T00:48:53.983

原来我解决了自己的问题......误解了 Nginx 的工作原理。:D

```
server {
listen 1234; //port that Nginx listens on
server_name xxx.xx.xx.xx; #the actual IP of the server; it has a public IP address

access_log /home/lilo/textImageSite/access.log;
error_log /home/lilo/textImageSite/error.log;

location /static {
    root /home/lilo/textImageSite/imageSite;
}

location / {
    proxy_pass http://127.0.0.1:8888; //the port that Gunicorn uses 
}
} 
```

所以就我而言，如果我的 Gunicorn 实例在端口 8888 上运行，那么转到 xxx.xxx.xx.x:8888/textImageSite 将加载页面，但没有任何静态内容。如果我使用 xxx.xxx.xx.x:1234 访问它，那么页面将加载静态内容（图像、css 样式表等）。这是我第一次使用 Gunicorn 和 Nginx（也是第一次编写 Django 应用程序）所以希望这会帮助那些感到困惑的人:)

# android - 是否可以用 Paint 指定文本矩形？

> ID：11425606
> 
> 赞同：0
> 
> 时间：2012-07-11T04:32:44.860
> 
> 标签：android, canvas, paint

我正在将文本绘制到画布中，并希望分配一个矩形，以便文本在到达右侧边界时中断并转到下一行。我可以设置一个“对齐”属性，所以很明显存在右侧和中间的概念，但我不知道如何指定文本框的宽度。

TIA

编辑...我感觉我将不得不推出我自己的使用 Paint.breakText 方法的换行符插入方法。我*真的希望不是这样！:)

edit2 .. 因此，最重要的是，drawText 忽略了 \n 并将其绘制为 [] 缺失的字符。

我写了一个解决方法，将每一行的文本原点向下移动，但是 BOY 太丑了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:53:39.250

Paint.getTextBounds 返回您的字符串宽度

“返回边界（由调用者分配）包围所有字符的最小矩形，隐含原点位于 (0,0)。”

我认为您很可能需要自己手动绘制字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:35:05.940

您应该使用 a[`StaticLayout`](http://developer.android.com/reference/android/text/StaticLayout.html)而不是尝试自己破坏文本。它具有换行的规定。引用文档：

> 除非您正在实现自己的小部件或自定义显示对象，否则您不需要直接使用此类，或者很想[`Canvas.drawText()`](http://developer.android.com/reference/android/graphics/Canvas.html#drawText%28java.lang.CharSequence,%20int,%20int,%20float,%20float,%20android.graphics.Paint%29)直接调用。

# javascript - 在 phonegap 中更改移动到下一个活动的样式 - 移动 android

> ID：11425612
> 
> 赞同：0
> 
> 时间：2012-07-11T04:33:34.633
> 
> 标签：javascript, android, cordova

我在我的应用程序中使用phonegap。当我从一个活动移动到另一个活动时，默认情况下第一个活动消失，下一个活动出现。我想改变它，这样当我从一个活动移动到另一个活动时，第一个进入左侧，下一个从右侧进入屏幕。那可能吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:40:34.580

有几种方法。

1.  如果页面更改不是由 Javascript 触发的，并且您想*专门*针对该转换进行配置，那么您可以添加`data-transition="slide"`到`a`触发此类转换的标记。

2.  如果页面更改是由 Javascript 触发的，并且您想*专门*针对该转换进行配置，则可以将选项添加`transition: "slide"`到传递给`changePage()`函数的 JS 对象：

    ```
    $.mobile.changePage("#destPage", {
      // Other options
      transition: "slide"
    }); 
    ```

3.  如果你想改变过渡的默认行为（全局改变），那么你可以在包含 jQuery Mobile 脚本***之前运行下面的代码：***

    ```
    $(document).bind("mobileinit", function(){
      $.mobile.defaultPageTransition = "slide";
      // Other overrides
    }); 
    ```

    对于最后一种方法，您可以查看[配置 jQuery Mobile 默认设置](http://jquerymobile.com/test/docs/api/globalconfig.html)的文档以获取更多详细信息。

查看您可以使用 jQuery Mobile进行的[其他转换。](http://jquerymobile.com/demos/1.1.0/docs/pages/page-transitions.html)该页面还提到了第一种过渡方法，可以与`a`标签（链接）或表单提交一起使用。

# c# - 使用 System.DirectoryServices.xxx 是否可以确定用户可以管理哪些 AD 组？

> ID：11425620
> 
> 赞同：4
> 
> 时间：2012-07-11T04:34:32.207
> 
> 标签：c#, asp.net, active-directory

我正在尝试为用户加载组列表，并希望显示他们是否有权编辑组成员资格。

Active Directory 中的内容表明用户可以编辑组的成员，我如何在 3.5+ 中使用 System.DirectoryServices 进行查找

我使用以下内容获取用户的组

```
PrincipalContext principalContext = new PrincipalContext(ContextType.Domain);
UserPrincipal user = UserPrincipal.FindByIdentity(principalContext, userName);
if ( user != null)
{ 
    PrincipalSearchResult<Principal> groups = user.GetAuthorizationGroups();
    foreach(Principal p in groups)
    {
        if ( p is GroupPrincipal)
            ...
    }
} 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T18:37:29.010

由于对对象管理权限的方式，这非常耗时。类似的问题可能是“如何列出域中帐户可以写入数据的每个文件夹”。这是耗时的原因是因为每个对象都拥有自己的访问控制列表 (ACL)。

我相当确定找出您可以管理的每个组的唯一方法是检查每个组并查看该组的权限，然后将您的组成员身份与该组的权限进行比较。

[在 Active Directory 中，如何确定 ActiveDirectoryAccessRule 的类型？](https://stackoverflow.com/questions/7032812/in-active-directory-how-do-i-determine-type-of-activedirectoryaccessrule)如果这是您最终要走的路线，则有一些代码可能会很有帮助。

更明智的方法可能是使用“Delegate”字段将权限委派给某些组，该字段可以使用 LDAP 轻松查询，或者让人们选择任何组，然后在选择组后检查该组的权限。

# php - 使用 PHP/MySQL 的可扩展聊天室？

> ID：11425621
> 
> 赞同：1
> 
> 时间：2012-07-11T04:34:35.320
> 
> 标签：php, mysql

原谅没有问题。我正在尝试建立一个与聊天室功能相同的网站。每个房间（有数千个房间）有 5-50 个观众的想法是非常真实的，只有大约 1% 的房间会聊天。

我有一些想法，但我想出的一切似乎都需要大量的处理能力......什么是有效的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:57:43.603

有为此目的而设计的特定程序（**ircd**，请参阅[http://www.atheme.org/project/charybdis](http://www.atheme.org/project/charybdis)和类似的。）但是，如果您真的想重新发明轮子，您可能需要一个具有相当数量的物理 RAM 和**共享内存**扩展（例如：APC。）

共享内存功能（在这种情况下为 APC）将是让每个人的对话保持同步的最快方式，而硬盘驱动器不会过度旋转或 MySQL 会失控。您应该能够以这种方式容纳数百个并发请求，而服务器不会出汗，因为它不会对 MySQL 造成负担。它几乎直接从 RAM 芯片中读取。

您可以为对话存储单独的频道（例如：“channel-#welcome”）并直接通过 AJAX 轮询它们。请参阅`apc_store`和`apc_add`了解`apc_fetch`更多信息。

即使您最终出于某种原因将对话存储在 MySQL 中，仍然最好使用某种内存缓存进行读取，因为这会减轻数据库服务器的巨大负载。

如果你这样做，最好让你的数据库innodb，因为它们在写入期间不会锁定。使用 APC，您的限制因素将是您打算保留在共享缓冲区中的 RAM 量和会话长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T04:42:34.777

你问了一个非常广泛的问题，但是：

将每条消息作为一行存储在数据库中，使用 AJAX 重新加载包含最后几条消息的聊天窗口内容，例如

```
SELECT * FROM `chat_messages` WHERE `room_id` = 'ID' ORDER BY `id` DESC LIMIT 100 
```

将为聊天室选择 100 条最新消息。循环遍历结果并根据需要显示所有消息。

如果您的数据库用户有权创建表，您还可以为每个聊天室动态创建一个表（这会提高性能）

然后，您只需在表单中添加一个`input`or `textarea`，当提交时，它会在数据库中插入一个新行（下次重新加载聊天窗口时将显示给每个人）。

另一种更优化的方法是每次查询只向用户返回新消息，方法是将每条消息的时间戳存储在数据库中，并将最后一个请求的时间戳本地存储在 JavaScript 中，然后使用如下查询：

```
SELECT * FROM `chat_messages` WHERE `room_id` = 'ID' AND `timestamp` > 'LAST_REQUEST' ORDER BY `id` DESC LIMIT 100 
```

然后将结果附加到聊天窗口，而不是替换它。

# c++ - C++中的构造函数参数太多

> ID：11425623
> 
> 赞同：1
> 
> 时间：2012-07-11T04:34:54.487
> 
> 标签：c++, constructor

# IE

```
class A {
    public:
    A(Apar1, Apar2, Apar3 /* and so on ... */);
};

class B {
public:
    B(Bpar1, Bpar2, Bpar3 /* and so on ... */);
};

class C {
public:
    // C();
private:
    A m_a;
    B m_b;
}; 
```

其中`C`构造取决于`A`and `B`，所以

1.  的构造函数`C`必须是以下签名？

    `C::C(Apar1, Apar2, Apar3, Bpar1, Bpar2, Bpar3)`

2.  如何`C`以自然的方式构建？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T04:38:30.637

您可以创建一个这样的构造函数：

```
class C {
public:
    C (const A &a, const B &b) : m_a(a), m_b(b) {}
private:
    A m_a;
    B m_b;
};

C c(A(...),
    B(...)); 
```

不管你是否觉得这更自然，这是一个品味问题，

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T04:42:09.447

的构造函数`C`必须初始化`m_a`和`m_b`。它可以使用它接收的参数来这样做，或者它可以使用任何其他可用的值来这样做。考虑这些构造函数：

```
C::C(Apar1 a1, Apar2 a2, Apar3 a3, Bpar1 b1, Bpar2 b2, Bpar b3) :
  m_a(a1, a2, a3), m_b(b1, b2, b3) {}
C::C() :
  m_a(6,7,42), m_b("hello", "cruel", "world") {}
C::C(const C& c) :
  m_a(c.m_a.a1, c.m_a.a2, c.m_a.a3), m_b(c.m_b.b1, c.m_b.b2, c.m_b.b3) {} 
```

在每种情况下，`C`的构造函数都使用初始化列表来调用 和 的构造`A`函数`B`。在第一种情况下，传入了值。在第二种情况下，值是预定义的。在最后一种情况下，这些值是从一个参数中计算出来的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T04:39:43.087

没有人告诉你什么是自然的方式，这完全取决于你的设计。

在某些情况下可能很自然地有类似的东西：

```
class C {

public:
  C(A& a, B& b) : m_a(a), m_b(b) {
  }

private:
  A& m_a;
  B& m_b;
} 
```

但一切都取决于你的设计

# google-chrome - swf 在 Chrome 中工作，但图层的间距已关闭？

> ID：11425632
> 
> 赞同：1
> 
> 时间：2012-07-11T04:36:03.427
> 
> 标签：google-chrome, flash, spacing

问题是：我姐姐有一个网站 (www.marycookma.com)，它是使用带有图层的 DreamWeaver 创建的。我最近使用 Dreamweaver 添加了一个 swf。它将在 Chrome 和 IE 中播放，但 swf 层在 Chrome 中的位置与在 IE 中的位置不同。IE中的间距是正确的。

它是唯一存在此问题的页面。我尝试了不同的代码建议来添加 swf，但是我当前使用的代码允许电影正确显示和运行。

我的问题是图层周围的间距。我不知道为什么它与其他层有什么不同，只是它里面有 swf 代码。

谁能指出我的问题？我继承了这个网站，我正在努力帮助它继续发展，但我在很多事情上都跟不上。

我试图发布这两张图片（通过 Chrome 查看并通过 IE 查看），但我是新手，所以它不会让我。:-(

这是我用于 swf 视频的代码：

```
<div id="Layer22"> 
```

```
<param name="movie" value="FLVPlayer_Progressive.swf" />
<param name="salign" value="lt" />
<param name="quality" value="high" />
<param name="scale" value="noscale" />
<param name="FlashVars" value="&MM_ComponentVersion=1&skinName=Clear_Skin_3&streamName=TV2012&autoPlay=false&autoRewind=false" />
<embed src="FLVPlayer_Progressive.swf" flashvars="&MM_ComponentVersion=1&skinName=Clear_Skin_3&streamName=TV2012&autoPlay=false&autoRewind=false" quality="high" scale="noscale" width="390" height="400" name="FLVPlayer" salign="LT" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer"/> 
```

我希望我已经包括了你需要的一切。如果你能告诉我是什么问题，请告诉我。我非常感谢您的帮助。

谢谢你，南希

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T11:09:01.193

我查看了页面，至于 div/layers 的位置，它们由样式控制，例如：

> div id="Layer22"

（您的播放器）定位由这种风格控制：

```
#Layer22 {
position:absolute;
width:397px;
height:312px;
z-index:26;
left: 289px;
top: 263px;
} 
```

更具体地说，顶部属性（263px），调整顶部可以向上或向下移动 div/图层。这适用于页面中的所有图层。

至于带有播放器的Layer22，如果将其与Layer17 中的下一个播放器进行比较，则Layer17 div 中有一个iframe，如果Layer17 的行为可能您应该复制该iframe 并在Layer22 中使用。

希望这对您有所帮助。

# mysql - 相同的 MySQL 查询但不同的输出 - 为什么？

> ID：11425637
> 
> 赞同：0
> 
> 时间：2012-07-11T04:37:09.540
> 
> 标签：mysql, or-operator

我在书中使用了相同的查询。那么，为什么我的输出与书中给出的有很大不同？书中还说“|| 运算符不会导致字母数字值的连接，但它被视为组合谓词的 OR 运算符”。“用于组合谓词的 OR 运算符”是什么意思？

*   数据库：网球
*   表：玩家
*   列：playerno(pk)、town、street、houseno ...等。

*   问题：获取居住在stratford的每个玩家的玩家编号和地址

*   询问：

    ```
    select playerno, town || '' || street || '' || houseno
    from players 
    where town = 'stratford'; 
    ```

*   书的结果：

    ```
    2   Stratford Stoney Road 43
    6   Stratford Haseltine lane 80 
    ```

......ETC

*   我的结果（使用相同的查询）：

    ```
    2   1
    6   1
    7   1
    39  1
    57  1
    83  1
    100 1 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:54:21.220

因为，根据本书，如果他们使用了 sql 模式 PIPES_AS_CONCAT，那么您的管道将充当连接运算符。

```
SET sql_mode='PIPES_AS_CONCAT';
select playerno, town || '' || street || '' || houseno
from players 
where town = 'stratford'; 
```

会给你在书中看到的输出:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:48:33.700

在 MySQL 中，您必须使用`CONCAT()`将列的值放在一个字符串中：

```
SELECT playerno, CONCAT(town, ' ', street, ' ', houseno)
FROM   players 
WHERE  town = 'stratford'; 
```

您的书可能指的是用于连接字符串的[Oracle 连接](http://docs.oracle.com/cd/B19306_01/server.102/b14200/operators003.htm)语法`||`。默认情况下，MySQL 将`||`两个或多个条件之间的 OR 运算符视为，`1`如果其中任何一个评估为“真”，则返回。

但正如 satdev86 的回答中所指出的，只有在执行查询之前手动设置模式时，MySQL*才*允许将*其*用作`||`连接运算符。*`PIPES_AS_CONCAT`*

 ** * *

## 编辑：

在您的书中，它明确指出您必须设置 MySQL`sql_mode`才能使示例正常工作。它在您的 SQL 示例之前的页面上：

[http://books.google.com/books?id=c5G42OHT96cC&pg=PT160&lpg=PT160&dq=%22This+specification+is+needed+for+the+following+examples.+It+applies+only+to+the+current+ session.%22&source=bl&ots=6b6zeFbM-2&sig=3a54S4vbgmKbPBqVbbR8OdxLLI8&hl=en&sa=X&ei=Nwz9T6fKAcfI2gWZhfDTBg&ved=0CCEQ6AEwAA](http://books.google.com/books?id=c5G42OHT96cC&pg=PT160&lpg=PT160&dq=%22This+specification+is+needed+for+the+following+examples.+It+applies+only+to+the+current+session.%22&source=bl&ots=6b6zeFbM-2&sig=3a54S4vbgmKbPBqVbbR8OdxLLI8&hl=en&sa=X&ei=Nwz9T6fKAcfI2gWZhfDTBg&ved=0CCEQ6AEwAA)*

# python - 404 错误页面 jinja2 的 TemplateNotFound

> ID：11425643
> 
> 赞同：4
> 
> 时间：2012-07-11T04:38:21.823
> 
> 标签：python, google-app-engine, jinja2

我有一个带有 jinja2 的 Google App Engine 应用程序，当我强制 404 错误时，我有这个错误：

```
errors/default_error.html
Traceback (most recent call last):
   File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1536, in __call__
rv = self.handle_exception(request, response, e)
   File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2.py", line 1596, in handle_exception
return handler(request, response, e)
   File "/base/data/home/apps/s~sandengine/latest.360189283466406656/main.py", line 28, in handle_404
t = jinja2.get_jinja2(app=app).render_template(template, **c)
   File "/base/python27_runtime/python27_lib/versions/third_party/webapp2-2.5.1/webapp2_extras/jinja2.py", line 158, in render_template
return self.environment.get_template(_filename).render(**context)
   File "/base/python27_runtime/python27_lib/versions/third_party/jinja2-2.6/jinja2/environment.py", line 719, in get_template
return self._load_template(name, self.make_globals(globals))
   File "/base/python27_runtime/python27_lib/versions/third_party/jinja2-2.6/jinja2/environment.py", line 693, in _load_template
template = self.loader.load(self, name, globals)
   File "/base/python27_runtime/python27_lib/versions/third_party/jinja2-2.6/jinja2/loaders.py", line 115, in load
source, filename, uptodate = self.get_source(environment, name)
   File "/base/python27_runtime/python27_lib/versions/third_party/jinja2-2.6/jinja2/loaders.py", line 180, in get_source
raise TemplateNotFound(template)
TemplateNotFound: errors/default_error.html 
```

这是我的[yaml文件：](https://github.com/coto/gae-boilerplate/blob/master/app.yaml)

```
application: sandengine
version: latest
runtime: python27
api_version: 1
threadsafe: true

default_expiration: "30d"

skip_files:
- ^(.*/)?app\.yaml
- ^(.*/)?app\.yml
- ^(.*/)?index\.yaml
- ^(.*/)?index\.yml
- ^(.*/)?#.*#
- ^(.*/)?.*~
- ^(.*/)?.*\.py[co]
- ^(.*/)?.*/RCS/.*
- ^(.*/)?\..*
- ^(.*/)?tests$
- ^(.*/)?test$
- ^Makefile
- ^COPYING.LESSER
- ^README.rdoc
- \.gitignore
- ^\.git/.*
- \.*\.lint$

builtins:
- appstats: on #/_ah/stats/
- remote_api: on #/_ah/remote_api/

handlers:
- url: /favicon\.ico
  mime_type: image/vnd.microsoft.icon
  static_files: static/favicon.ico
  upload: static/favicon.ico

- url: /apple-touch-icon\.png
  static_files: static/apple-touch-icon.png
  upload: static/apple-touch-icon.png

- url: /(robots\.txt|humans\.txt|crossdomain\.xml)
  static_files: static/\1
  upload: static/(robots\.txt|humans\.txt|crossdomain\.xml)

- url: /img/(.*\.(gif|png|jpg))
  static_files: static/img/\1
  upload: static/img/(.*\.(gif|png|jpg))

- url: /css
  mime_type: text/css
  static_dir: static/css

- url: /js
  mime_type: text/javascript
  static_dir: static/js

- url: /.*
  script: main.app

libraries:
- name: jinja2
  version: "2.6"
- name: webapp2
  version: "2.5.1"
- name: markupsafe
  version: "0.15"

error_handlers:
  - file: templates/errors/default_error.html

  - error_code: over_quota
    file: templates/errors/over_quota.html

  - error_code: dos_api_denial
    file: templates/errors/dos_api_denial.html

  - error_code: timeout
    file: templates/errors/timeout.html 
```

编码：

```
def handle_404(request, response, exception):
    c = { 'exception': exception.status }
    template = config.error_templates[404]

    t = jinja2.get_jinja2(app=app).render_template(template, **c)
    response.write(t)
    response.set_status(exception.status_int)

app = webapp2.WSGIApplication(debug = os.environ['SERVER_SOFTWARE'].startswith('Dev'), config=config.webapp2_config)

app.error_handlers[404] = handle_404
routes.add_routes(app) 
```

配置文件：

```
error_templates = {
    404: 'errors/default_error.html',
    500: 'errors/default_error.html',
} 
```

这是文件夹结构

![在此处输入图像描述](../Images/42a1a10f6b8316518cb983d4774a2ac9.png)

另一个重要的事情是它在本地机器（SDK）中没有问题，但问题出现在生产中

您可以探索完整的代码，因为这是一个[开源代码](https://github.com/coto/gae-boilerplate) 提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-14T18:24:42.393

我通过删除 app.yaml 上的“default_error”来修复它

错误处理程序现在只有：

```
error_handlers:
  - error_code: over_quota
    file: templates/errors/over_quota.html

  - error_code: dos_api_denial
    file: templates/errors/dos_api_denial.html

  - error_code: timeout
    file: templates/errors/timeout.html 
```

我改进了控制 404 错误的代码，添加了 500 错误，其中：

```
def handle_error(request, response, exception):
    c = { 'exception': str(exception) }
    status_int = hasattr(exception, 'status_int') and exception.status_int or 500
    template = config.error_templates[status_int]
    t = jinja2.get_jinja2(app=app).render_template(template, **c)
    response.write(t)
    response.set_status(status_int)

app = webapp2.WSGIApplication(debug = os.environ['SERVER_SOFTWARE'].startswith('Dev'), config=config.webapp2_config)

app.error_handlers[404] = handle_error
app.error_handlers[500] = handle_error 
```

# php - 为 highcharts 实时数据添加一个附加点

> ID：11425644
> 
> 赞同：1
> 
> 时间：2012-07-11T04:38:23.870
> 
> 标签：php, javascript, jquery, highcharts

嗨，我需要一些帮助来向 highcharts 添加额外的点系列。我让它实时更新，但只能让一个点正常工作，但可以让第二个点出现，但不是正确的值。

我在 php 文件（dashchart.php）中有以下内容：

```
//CREATE AN ARRAY AND ECHO AS JSON
    $ret = array($x, $y);
    $ret2 = array($x, $y1);
    echo json_encode($ret);
    echo json_encode($ret2); 
```

$x 只是一个 UNIX 时间戳，$y 是数字。

函数调用数据，然后传递给highcharts进行绘制：

```
function requestData() {
        $.ajax({
            url: 'api_dashchart.php', 
            success: function(point) {
                var series = chart.series[0],
                shift = series.data.length > 20; // shift if the series is longer than 20
                // add the point
                chart.series[0].addPoint(eval(point), true, shift);
                // add the point
                chart.series[1].addPoint(eval(point), true, shift);

                // call it again after one second
                setTimeout(requestData, 1000);  
            },
            cache: false
        });
    } 
```

我知道它一定是非常基本的东西，但我刚开始使用 Javascript 并且无法弄清楚。任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T06:02:55.670

`point`如果是 json 类型，请尝试以下代码：

```
 var pointChart = new Array(point[0].xValue, point[0].yValue);
chart.series[0].addPoint(pointChart, true, shift); 
```

如果`point`不是 json 则相应地在 pointChart 的定义中给出该点的 xValue 和 yValue 的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T21:18:23.800

嗨，我正在查看并得到以下解决方案

```
 $ret = array($x, $value1 , $value2); 
```

接着

```
success: function(point) {
            var series = chart.series[0],
                shift = series.data.length > 20; // shift if the series is longer than 20
                 var series = chart.series[1],
                    shift = series.data.length > 20;

            // add the point
            chart.series[0].addPoint([point[0], point[1]], true, shift);
            chart.series[1].addPoint([point[0], point[2]], true, shift); 
```

接着

```
series: [{
                name: 'Point1',
                data: []
            }, {
                name: 'Point2',
                data: []
            }] 
```

# iphone - 如何从 iphone 应用程序将邮件发送给所需的用户

> ID：11425650
> 
> 赞同：-1
> 
> 时间：2012-07-11T04:38:31.770
> 
> 标签：iphone, xcode

我正在从 iphone 应用程序发送邮件，我希望用户应该输入邮件字段而不是这个静态接收，并且邮件应该发送给他们。

```
 - (void)onEmailResult
    {

   if ([[MFMailComposeViewController class] canSendMail]) {
     MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
     picker.mailComposeDelegate = self;

     [picker setSubject:@"Game"];

     // Set up recipients
     NSArray * toRecipients = [NSArray arrayWithObject:@"husain_2000@yahoo.com"];
     [picker setToRecipients:toRecipients];

     // Fill out the email body text
     NSString * emailBody = [NSString stringWithFormat:@"My Score: %d/%d, My Time: %@", numberOfCorrectAnswer, [[[DataManager sharedInstance] questions] count], time];
     [picker setMessageBody:emailBody isHTML:NO];

     [self presentModalViewController:picker animated:YES];
     [picker release];
     }

     else {
     NSString *recipients = @"mailto:husain_2000@yahoo.com?&subject=Game";
     NSString *body = [NSString stringWithFormat:@"&body=My Score: %d/%d, My Time: %@", numberOfCorrectAnswer, [[[DataManager sharedInstance] questions] count], time];

     NSString *email = [NSString stringWithFormat:@"%@%@", recipients, body];
     email = [email stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];

     [[UIApplication sharedApplication] openURL:[NSURL URLWithString:email]];
    }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:12:14.670

电子邮件应在 iPhone 中配置。

然后试试这个代码

```
- (void)onEmailResult
    {

   if ([[MFMailComposeViewController class] canSendMail]) {
     MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
     picker.mailComposeDelegate = self;

     [picker setSubject:@"Game"];

     // Leave recipients as blank

     // Fill out the email body text
     NSString * emailBody = [NSString stringWithFormat:@"My Score: %d/%d, My Time: %@", numberOfCorrectAnswer, [[[DataManager sharedInstance] questions] count], time];
     [picker setMessageBody:emailBody isHTML:NO];

     [self presentModalViewController:picker animated:YES];
     [picker release];
     }

   } 
```

# c# - C# powershell 脚本

> ID：11425653
> 
> 赞同：0
> 
> 时间：2012-07-11T04:38:59.190
> 
> 标签：c#, powershell-2.0

我知道如何执行单个 powershell 命令并使用 C# 代码查看它的结果。但我想知道如何执行如下一组相关命令并获取输出：

```
$x = some_commandlet
$x.isPaused() 
```

简单地说，我想访问`$x.isPaused()`.

如何将此功能添加到我的 C# 应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:08:51.410

对于这样的命令，最好创建一个称为*管道*的东西并将其提供给您的脚本。我找到了一个很好的例子。[您可以在此处](http://www.codeproject.com/Articles/18229/How-to-run-PowerShell-scripts-from-C)找到有关此代码和此类项目的更多信息。

```
private string RunScript(string scriptText)
{
    // create Powershell runspace

    Runspace runspace = RunspaceFactory.CreateRunspace();

    // open it

    runspace.Open();

    // create a pipeline and feed it the script text

    Pipeline pipeline = runspace.CreatePipeline();
    pipeline.Commands.AddScript(scriptText);

    // add an extra command to transform the script
    // output objects into nicely formatted strings

    // remove this line to get the actual objects
    // that the script returns. For example, the script

    // "Get-Process" returns a collection
    // of System.Diagnostics.Process instances.

    pipeline.Commands.Add("Out-String");

    // execute the script

    Collection<psobject /> results = pipeline.Invoke();

    // close the runspace

    runspace.Close();

    // convert the script result into a single string

    StringBuilder stringBuilder = new StringBuilder();
    foreach (PSObject obj in results)
    {
        stringBuilder.AppendLine(obj.ToString());
    }

    return stringBuilder.ToString();
} 
```

此方法巧妙地完成了适当的注释。也可以直接到我给的Code Project的链接下载开始玩！

# flash - 在本地传递 flashvars 和发短信

> ID：11425658
> 
> 赞同：0
> 
> 时间：2012-07-11T04:39:41.137
> 
> 标签：flash, swfobject

flashvars 在本地测试时是否有效？当我使用 swfObject V1.5 使用为 flash player 10 保存的文件对其进行测试时，它似乎不起作用。任何人都可以确认这应该在本地工作。

```
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>Screensaver</title>
<script type="text/javascript" src="swfobject.js"></script>
<style type="text/css">

    body {
        background-color: #ffffff;
    }

    #flashcontent {
        width: 100%x;
        height: 100%;
        margin: 0 auto;
    }

</style>
</head>
<body>
<div id="flashcontent">
        <strong>You need to upgrade your Flash Player</strong>
        This is replaced by the Flash content. 
        Place your alternate content here and users without the Flash plugin or with 
        Javascript turned off will see this. Content here allows you to leave out <code>noscript</code> 
        tags. Include a link to <a href="swfobject.html?detectflash=false">bypass the detection</a> if you wish.
    </div>

    <script type="text/javascript">
        var so = new SWFObject("screensaver.swf", "main", "100%", "100%", "10", "#ffffff");
        so.addVariable("rssFeedUrl", "campaign.xml");
        so.write("flashcontent");

    </script>   
</body>
</html> 
```

然后在闪存中我有这个。

```
var flashVars:Object=LoaderInfo(loaderInfo).parameters;

var rss = flashVars.rssFeedUrl; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:51:44.837

我已经尝试过 SWFObject 2.2（最新版本），并且 html 在本地使用传递的参数没有任何问题。

我想知道您为什么不使用最新版本的 SWFObject。在您的情况下，代码看起来像

```
swfobject.embedSWF(
                "screensaver.swf", "main", 
                "100%", "100%", 
                "10", "", 
                { rssFeedUrl: "compaign.xml" }, {}, {}); 
```

# android - 更改 ActionBar 上溢出按钮的颜色

> ID：11425660
> 
> 赞同：67
> 
> 时间：2012-07-11T04:39:54.803
> 
> 标签：android, android-actionbar

是否可以更改操作栏上溢出按钮（3 个垂直点）的颜色？如果是这样，我们该怎么做？我没有找到溢出按钮的任何样式。

谢谢

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-07-11T07:51:34.873

您可以使用以下样式声明更改用于它的图像。

```
<style name="MyCustomTheme" parent="style/Theme.Holo">
    <item name="android:actionOverflowButtonStyle">@style/MyCustomTheme.OverFlow</item>
</style>

<style name="MyCustomTheme.OverFlow">
    <item name="android:src">@drawable/my_overflow_image</item>
</style> 
```

如果您使用的是 ActionBarSherlock，请按以下步骤操作

```
<style name="MyCustomTheme" parent="style/Theme.Sherlock">
    <item name="android:actionOverflowButtonStyle">@style/MyCustomTheme.OverFlow</item>
    <item name="actionOverflowButtonStyle">@style/MyCustomTheme.OverFlow</item>
</style>

<style name="MyCustomTheme.OverFlow">
    <item name="android:src">@drawable/my_overflow_image</item>
</style> 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2018-08-18T12:53:54.967

其中一些答案是严重的矫枉过正，有些给出的结果有限。答案要简单得多。您可以随时将其设置为您想要的任何颜色。这里：

```
toolbar.getOverflowIcon().setColorFilter(colorInt, PorterDuff.Mode.SRC_ATOP); 
```

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2013-03-05T18:27:46.530

[XGouchet 的答案](https://stackoverflow.com/a/11427992/649181)很棒，但只是想补充一点，如果您从现有样式继承，您将获得标准填充、选定状态等。

```
<style name="MyCustomTheme.OverFlow" parent="Widget.Sherlock.ActionButton.Overflow">
    <item name="android:src">@drawable/title_moreicon</item>
</style> 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-05-10T08:43:30.593

其他编程选项：

```
 Drawable drawable = toolbar.getOverflowIcon();
        if(drawable != null) {
            drawable = DrawableCompat.wrap(drawable);
            DrawableCompat.setTint(drawable.mutate(), getResources().getColor(R.color.thecolor));
            toolbar.setOverflowIcon(drawable);
        } 
```

希望能帮助到你！

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-09-28T14:06:34.050

如果您使用 AppCompat ，您可以派生一个新的自定义样式，并将属性`android:textColorSecondary`设置为所需的颜色，并将其用作工具栏的主题。 [Android：更改工具栏的文本颜色和溢出图标颜色](http://www.murrayc.com/permalink/2014/10/28/android-changing-the-toolbars-text-color-and-overflow-icon-color/)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-10-08T12:59:20.910

放置图像不是一个好主意，因为如果您只能通过更改颜色来更改它，则无需使用额外的图像。`<item name="android:textColorPrimary">@android:color/white</item>`菜单点从 textColorPrimary 中选择颜色，因此这一行将解决您的问题，而不是编写多行 。唯一的一个小问题是这种颜色也将应用于溢出菜单的文本颜色，当然还有很多其他地方:)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-08-31T21:37:26.063

如果您使用的是最新的 Toolbar，则必须将语句放在 styles.xml 中，如下代码所示：

```
<style name="AppToolbar" parent="ThemeOverlay.AppCompat.Dark.ActionBar">
    <item name="android:textColorPrimary">@android:color/white</item>
    <item name="android:textColorSecondary">@android:color/black</item>
</style> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-12T11:44:43.290

```
<style name="MyCustomTheme" parent="@style/Theme.AppCompat.Light">
  <item name="actionOverflowButtonStyle">@style/OverflowMenuButtonStyle</item>
</style>
<style name="OverflowMenuButtonStyle" parent="Widget.AppCompat.ActionButton.Overflow">
  <item name="android:src">@drawable/quantum_ic_more_vert_white_24</item>
</style> 
```

请注意，这与 XGouchet 通过删除 android 命名空间的答案不同。XGouchet 的答案仅适用于 Lollipop 和更高版本的设备，而我的适用于所有 API 7+ 设备。

参考：[自定义 AppCompat 主题不会更改旧设备上的溢出图标](https://stackoverflow.com/questions/32108027/custom-appcompat-theme-not-changing-overflow-icon-on-older-devices)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-02-12T17:43:11.203

只需在 style.xma 文件中以您选择的样式添加此行

`<item name="colorControlNormal">@color/white</item>`

它工作正常。如果你使用

`<item name="textColorSecondary">@color/white</item>`

那么您的其他项目（如抽屉导航菜单图标颜色和单选按钮）将受到影响

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-11-22T09:36:20.307

要将溢出图标颜色更改为您选择的颜色.....使用它们

```
 <style name="AppTheme" parent="Theme.MaterialComponents.Light.NoActionBar">
     <item name="actionOverflowButtonStyle">@style/actionButtonOverflow</item>
</style>
 <style name="actionButtonOverflow"   parent="Widget.AppCompat.Light.ActionButton.Overflow">
    <item name="android:tint">@color/primary_dark</item>
</style> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-06-13T19:19:52.850

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.dashboard, menu); // dashboard is xml file name
        Drawable drawable = menu.findItem(R.id.lan).getIcon();
        if (drawable != null) {
            drawable.mutate();
            drawable.setColorFilter(Color.WHITE, PorterDuff.Mode.SRC_ATOP);
        }
        return true;
    } 
```

它对我有用，我从[这里找到了它](https://androidforums.com/threads/how-to-change-color-of-menu-item-icon-in-android.916282/)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-28T08:46:02.390

对于溢出图标颜色更改，您只需添加

```
toolbar.setOverflowicon(getDrawable) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-03-01T10:03:19.440

如果您只想将 3 点图标变为白色而不是黑色，您只需将工具栏的主题更改为：

```
 <android.support.v7.widget.Toolbar
     ...
     android:theme="@android:style/ThemeOverlay.Material.Dark.ActionBar"
 /> 
```

完整参考： [medium.com/the-curious-case-of-the-overflow-icon-color](https://medium.com/@mbonnin/the-curious-case-of-the-overflow-icon-color-39d8c3497ccc#0024)

# jquery - 如何通过 jQuery 动态更改内容编辑器 Web 部件标题？

> ID：11425670
> 
> 赞同：0
> 
> 时间：2012-07-11T04:41:01.533
> 
> 标签：jquery, ajax, sharepoint-2010, web-parts, title

我有一个内容编辑器 Web 部件，我想在鼠标单击时动态更改标题。我尝试使用 .text() 函数，但它不起作用:(

这是页面的示例：

![样本](../Images/b48b9342a19f9b439d35cd15fe6bc949.png)

当我点击 Gate 1 框时，我想要更改的文本是“Deliverables”。

我在图形的onlick函数中添加了这段代码：

![代码示例](../Images/e4da892c36212af44b7243a07c29a3eb.png)

这不是整个代码，而是应该更改 Web 部件标题的部分。

虽然警报功能有效，但 .text("Resources") 都不起作用。我尝试了两种方法，并评论了一种方法来测试哪种方法可行，但没有一种方法可行。我查看了页面的源代码，这是内容编辑器 Web 部件：

![查看源代码](../Images/30e98ca1deab6b3c2434a0627d8d3d37.png)

我该怎么做才能动态更改标题？我能够提取文本的值，但我无法更改它:(请帮助:(

谢谢，

波奇

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:50:08.597

改变

```
<span>Deliverables</span> 
```

作为

```
<span id="titleSpan">Deliverables</span> 
```

并且做，

```
$("#titleSpan").text("Resources"); 
```

**或者**

你可以做，

```
$("#WebPartCaptionWPQ6").prev().text("Resources"); 
```

# r - R：加载一个以数字为列标题的表格都被错误地添加了一个X，如何解决？

> ID：11425673
> 
> 赞同：0
> 
> 时间：2012-07-11T04:41:21.620
> 
> 标签：r, error-handling

我正在尝试将表格加载到 R 中，其中一些列标题以数字开头，即 55353、555xx、abvab、77agg

加载文件后发现，所有以数字开头的标题前面都有一个X，即改为X55353、X555xx、abvab、X77agg

我能做些什么来解决这个问题。请注意，并非所有列标题都以数字开头。我应该怎么做才能解决这个问题？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:49:35.007

通过添加`check.names=FALSE`到您的`read.table()`电话，您的问题可能会得到解决。

有关更多信息，请参阅`?read.table`

# javascript - 无法在浏览器关闭时销毁 Cookie

> ID：11425675
> 
> 赞同：0
> 
> 时间：2012-07-11T04:41:36.940
> 
> 标签：javascript, jsp, session, cookies, session-cookies

我正在使用 JSP 创建一个 cookie，我必须跟踪 cookie 值并使用 cookie 值运行业务逻辑。

我以下列方式使用 Cookie；

```
 <%!  Cookie cookie = new Cookie("abc", "true" ); 
  % > 

 cookie.setMaxAge(-1);  // To  Delete the Cookie when browser is closed 
 cookie.setPath("article.jsp"); // To set the path  of the cookie for one page only
 response.addCookie(cookie);

 if(cookie=true){......
      ......
      $(document).ready(function () {
      cookie.setValue("false");
    }

   else{......
      ......
      cookie.setValue("true");
     } 
```

此代码似乎与预期行为正常工作，当我关闭浏览器并打开 URL 时，在 cookie 部分我看到 cookie 值存在。

我需要清除缓存和历史来销毁 cookie，我怀疑这是否是由于 JSP 声明标签中的声明而发生的问题

可能有一种方法可以在 JSP 中再次从 sevlet 解析中声明 cookie 以获取值，但我试图避免这种情况并在 JSP 中执行所有操作

谁能解释一下代码中需要声明cookie的位置以及如何声明？

# c# - C# 的 DataSet WriteXML 转换的奇怪结果

> ID：11425682
> 
> 赞同：2
> 
> 时间：2012-07-11T04:42:10.723
> 
> 标签：c#, xml, visual-studio

我编写了以下代码来提取一些查询并将结果转换为 XML 文件。

```
OdbcConnection conn = new OdbcConnection(args[0]);
OdbcDataAdapter da = new OdbcDataAdapter();
conn.Open();
da.SelectCommand = new OdbcCommand(args[1], conn);
DataSet ds = new DataSet();
da.Fill(ds);
ds.WriteXml("iDA.XML"); 
```

但是，我得到以下内容，这并不完全是我希望数据的样子。我不知道*每个元素开头和结尾的“x0000”来自哪里，或者“* xml：space =“preserve”来自哪里。有什么想法吗？

```
<so_bo_suffix_x0000_ xml:space="preserve"></so_bo_suffix_x0000_> 
<so_processing_date_x0000_>2012-07-08T00:00:00+10:00</so_processing_date_x0000_> 
```

不幸的是，我无法提供更多信息，但是，关于上述几行，我可以告诉你，数据应该分别如下所示。这是来自运行相同查询的类似应用程序。

```
<so_bo_suffix>  </so_bo_suffix>
<so_processing_date>17/04/2012 12:00:00 AM</so_processing_date><so_processing_date>17/04/2012 12:00:00 AM</so_processing_date> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:38:01.960

这`xml:space="preserve"`意味着解析器应该在标签内保留任何空白。当空白未标准化时，它会生成此信息。（空白只是空格，不以空格开头或结尾，并且不包含连续的两个或多个空格。）

`_x0000_`后缀来自[`XmlConvert.EncodeLocalName()`](http://msdn.microsoft.com/en-us/library/system.xml.xmlconvert.encodelocalname). 这意味着它发现了一个在 XML 中无效的字符。在这种情况下，它是一个空字符。不过，我不知道这个空字符是从哪里来的。

# php - 我正在尝试使用 ajax 提交，但只有图像名称名称不在下一页上发布

> ID：11425684
> 
> 赞同：0
> 
> 时间：2012-07-11T04:42:29.300
> 
> 标签：php, jquery, ajax

```
$(document).ready(function(){

        $("#submit").click(function()
                                    {

                    var name = $("#name").val();
                    var pass = $("#pass").val();
                    var image = $("#imagefile").val();
                    var comm = $("#comment").val();

                var data = 'name=' +name+ '&pass=' +pass+ '&imagefile=' +image+ '&comment='+comm;   

                    if(name=="" || pass=="")
                    {
                    $("#error").show();
                    return false;
                    }

        $.ajax({
           type: "POST",
           url: "submit.php",
           data: data, 
           success: function(data)
           {
               alert(data); // show response from the php script.
           }
         });

I

            });

}); 
```

我正在尝试使用 ajax 提交，但只有图像名称名称不在下一页上发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:11:50.403

确保您的表单标签中包含属性***enctype="multipart/form-data" 。***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T05:35:30.280

请试试这个：

```
$.ajax({
   type: "POST",
   url: "submit.php",
   data: {name: name, pass : pass, imagefile: image, comment : comm}, 
   success: function(data)
   {
       // success code 
   }
}); 
```

# javascript - 将控件 ID 更改为变量

> ID：11425688
> 
> 赞同：0
> 
> 时间：2012-07-11T04:43:09.947
> 
> 标签：javascript, jquery, asp.net, .net, syntax

我需要更改以下代码：

```
 $("#ctl00_PlaceHolderMain_SPWebPartManager_g_3c1ba10a_23ec_4ab5_b303_18f8bd7ee7e7_ctl00_btnAdd").attr("disabled", true); 
```

对此：

```
var ControlID = "#ctl00_PlaceHolderMain_SPWebPartManager_g_3c1ba10a_23ec_4ab5_b303_18f8bd7ee7e7_ctl00_btnAdd"

$(ControlID).attr("disabled", true); 
```

但是上面的一个不起作用..错误是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:47:19.503

尝试

```
$('<%:Control.ControlID%>').attr("disabled", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:48:07.690

我怀疑它在这两种情况下都不起作用。使用`.prop()`代替`.attr()`, 来禁用该元素。

```
var ControlID = "#ctl00_PlaceHolderMain_SPWebPartManager_g_3c1ba10a_23ec_4ab5_b303_18f8bd7ee7e7_ctl00_btnAdd"
$(ControlID).prop("disabled", true); 
```

*属性通常会影响 DOM 元素的动态状态，而不会更改序列化的 HTML 属性。示例包括输入元素的 value 属性、输入和按钮的 disabled 属性或复选框的 checked 属性。`.prop()`应该使用方法来设置禁用和检查而不是方法`.attr()`。该`.val()`方法应用于获取和设置值。*

来源：[http ://api.jquery.com/prop/](http://api.jquery.com/prop/)

# android - 如何在 Sencha Touch 2 中制作签名的 APK

> ID：11425693
> 
> 赞同：5
> 
> 时间：2012-07-11T04:43:46.067
> 
> 标签：android, extjs, sencha-touch, sencha-touch-2, apk

各位，

我已经使用 Sencha touch 2 成功制作了一个应用程序，它在我的 Android 设备上运行良好，也在平板电脑和模拟器上运行良好。但问题是无法在 Android Market 上上传 apk 文件，它显示错误：

```
.apk is not signed also validity year 50 Error in Google market -: 
Google Play does not accept apks signed with the debug certificate. 
Create a new certificate that is valid for at least 50 years. 
```

我也更改了我的证书“配置”：“发布”，但没有取得任何成功。亲爱的，我也在分享我的整个配置文件。如果您在配置文件中发现任何错误，请告诉我。任何建议表示赞赏。预先感谢。

> **配置文件中的代码是-：**

```
{
"applicationName":"navi",
"applicationId":"com.amit.navi",
"versionString":"1.0",
"iconName":"resources/icons/Icon~ipad.png",
"inputPath":"build/native",
"outputPath":"build/",
"configuration":"Release",
"platform":"Android",
"deviceType":"Universal",
"certificatePath":"C:/Documents and Settings/amit/.android/amit.keystore",

"certificateAlias":"alias_name",
"sdkPath":"C:/android-sdk",

"orientations": [
"portrait",
"landscapeLeft",
"landscapeRight",
"portraitUpsideDown"
]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:08:53.870

这是创建用于签署您的 apk 的密钥的指南。您当前已使用调试密钥为您的应用程序签名，需要使用 keytool（java 工具）生成一个新的，然后用它为您的 apk 签名。煎茶指南：[http ://docs.sencha.com/touch/2-0/#!/guide/native_android](http://docs.sencha.com/touch/2-0/#!/guide/native_android)

Keytool 指南：http: [//developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)

keytool 在你的 java 目录中

# php - php多个preg替换单个字符串

> ID：11425694
> 
> 赞同：0
> 
> 时间：2012-07-11T04:43:53.700
> 
> 标签：php, regex, string, preg-replace

我有一个字符串可以这样说：

```
$string="Hi! [num:0] with [num:1]"; 
```

和这样的数组：

```
$array[0]=array('name'=>"na","id"=>22);
$array[1]=array('name'=>"nam","id"=>19); 
```

现在，当我尝试用这样的方式替换这个字符串时`preg_replace()`：

```
$string=preg_replace('#\!\s+\[num:(\d+)\]#ie','.$array[\1]["name"]',$string); 
```

我在替换中尝试这样做的是搜索模式 [num:x]，然后将其替换为键“x”的相应数组中的名称

它适用于第一场比赛，但根本不适用于第二场比赛。这意味着在此之后我得到的输出是：

```
$string="Hi! na with [num:1]"; 
```

虽然我想要的是：

```
$string="Hi! na with nam"; 
```

我应该对此做出什么改变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:04:18.907

您提到的正则表达式只会匹配第一个，因为它会检查感叹号。

去除那个 '！' 这样它将取代所有。

```
#\s+\[num:(\d+)\]#ie 
```

注意：但它不会删除'！' 从字符串。检查 \s+ 也不是一个好主意，因为如果字符串中的占位符之前不包含空格，则正则表达式将中断。

```
#\[num:(\d+)\]#ie 
```

# json - Json 和草坪椅的使用

> ID：11425695
> 
> 赞同：0
> 
> 时间：2012-07-11T04:43:55.587
> 
> 标签：json, lawnchair

我在草坪椅文档中看到了以下示例，

```
var store = new lawnchair({name:'testing'}, function(store) {

    // create an object
    var me = {key:'brian'};

    // save it
    store.save(me);

    // access it later... yes even after a page refresh!
    store.get('brian', function(me) {
        console.log(me);
    });
}); 
```

我不确定我是否理解正确，但根据我的理解，我编写了这样的代码，（名称，dtime，地址是具有值的变量）

```
db = Lawnchair({
            name : 'db'
        }, function(store) {
            console.log('storage open');
            var formDetails = {
                    "candidateName" : name,
                    "DateTimeOfVerification" : dtime,
                    "ResidentialAddress" : address
            }

            store.save({key:"fdetails",value:formDetails});

            store.get("fdetails", function(obj) {
                alert(obj);
            });

        }); 
```

但是，在警报中我没有得到价值，我得到了“[object Object]”。

1）如何在草坪椅中存储多属性json对象

2）如何获取该json对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T21:00:24.373

试试这个：

```
db = Lawnchair({name : 'db'}, function(store) {
    console.log('storage open');
    var formDetails = {
        "candidateName" : "Viswa",
        "DateTimeOfVerification" : "30/07/2012",
        "ResidentialAddress" : "3 The Road, Etcc...."
    }

    store.save({key:"fdetails", value:formDetails});

    store.get("fdetails", function(obj) {
        console.log(obj);
        alert(obj.value.candidateName);
        alert(obj.value.DateTimeOfVerification);
        alert(obj.value.ResidentialAddress)
    });
}); 
```

1）您正确存储了 formDetails 结构。

2) obj.value 是您要查找的集合

如果您将该`console.log(obj);`行添加到您的代码中，然后检查控制台，您可能已经自己解决了这个问题。

# winapi - Win32 DLL 中允许的类？

> ID：11425700
> 
> 赞同：0
> 
> 时间：2012-07-11T04:44:10.777
> 
> 标签：winapi, dll, nsis

**我制作的 NSIS 插件可以包含 C++ 类还是只能是 C 代码？**

我正在开发一个作为 Win32 DLL 的 NSIS 插件，但我在声明类的行的头文件中出现编译错误。

编译错误是：

> 错误 C2061：语法错误：标识符“MyClass”

导致编译错误的行是：

```
class MyClass 
```

怎么了？我不允许在 Win32 DLL 中使用类吗？我正在 MS Visual C++ 2010 中编译。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:21:24.103

多年前我犯了这个错误，花了一个小时挠头。我一直在寻找一个编译器选项，它可以选择代码是编译为 C 还是 C++，但是在 IDE 中没有可以选择的编译器选项（尽管您可以使用and`cl`从命令行控制它）。然而，答案很简单。`/Tc``/Tp`

如果源文件有`.c`扩展名，则编译为 C。如果源文件有扩展`.cpp`名，则编译为 C++。

此外，如果您将 C++ 构造（例如类）放在头文件中并将`#include`它们放在 C 文件中，您将遇到同样的问题。您可以使用`#ifdef __cplusplus`.

# c++ - 在 qt 中使用 new[] 时出现奇怪的崩溃

> ID：11425709
> 
> 赞同：1
> 
> 时间：2012-07-11T04:45:32.283
> 
> 标签：c++, qt

以下代码会崩溃，我发现它与“new []”有关

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    QPushButton *buttons = new QPushButton[5];
    for(int i=0;i<5;++i){
        buttons[i].setGeometry(0,0,30,40);
        buttons[i].setParent(this);
    }

} 
```

将 new[] 更改为普通数组后，它工作正常

```
#mainwindow.h
QPushButton buttons[5];

#mainwindow.cpp
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);

    for(int i=0;i<5;++i){
        buttons[i].setGeometry(0,0,30,40);
        buttons[i].setParent(this);
    }

} 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:26:42.297

> 有任何想法吗？

我怀疑*QPushButton*正在重载*运算符 new[]*并且该运算符中的某些内容不太正确。

由于这个*运算符 new[]*，您会看到静态对象和分配对象之间的差异。

要了解我的意思，请考虑以下代码：

```
#include <stdio.h>

class QPushButton
{
public:
    QPushButton() {
        printf("Constructor\n");
    }

    void *operator new[](size_t size) {
        printf("New operator overloaded.\n");
        return new char[size];
    }
};

int main(int argc, char *argv[])
{
    argc;argv;
    printf("Stack defined objects\n");
    QPushButton button[5];

    printf("Allocated objects\n");
    QPushButton *p = new QPushButton[5];
    delete [] p;

    return 1;
} 
```

和结果输出：

```
C:\TEMP>test
Stack defined objects
Constructor
Constructor
Constructor
Constructor
Constructor
Allocated objects
New operator overloaded.
Constructor
Constructor
Constructor
Constructor
Constructor 
```

正如您从上面的输出中看到的那样，new 运算符在本地对象和分配的对象之间产生了差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:32:03.897

我不是 Qt 专家，但据我所知， a`QObject`假定拥有它的所有子对象（它`delete`在析构函数中）。

如果是这种情况，您不应该做任何您正在做的事情 - 每件事都`QPushButton`应该使用 动态和单独分配，*而*您*的*`new`第二个示例不会崩溃的事实很奇怪。

# css - Flash/SWF文件+固定定位

> ID：11425710
> 
> 赞同：0
> 
> 时间：2012-07-11T04:45:36.023
> 
> 标签：css, flash, positioning

我似乎发现嵌入在页面顶部固定位置的 SWF 文件存在问题。嵌入 swf 文件时，不会粘在页面顶部 - 这是一个示例代码：

```
<div id="headerOuter" style="z-index: 10001; position: relative; visibility: visible; top: 0px; left: 0px; width: 100%; height: 80px; overflow: hidden; background-color: rgb(0, 0, 0); "><div id="twrap" style="z-index: 10001; position: fixed; visibility: visible; top: 0px; left: 0px; width: 100%; height: 80px; overflow: hidden; background-color: rgb(0, 0, 0); "><div id="skyTop" style="width: 900px; height: 80px; position: relative; cursor: pointer; visibility: visible; margin-left: -450px; margin-right: 0px; background-color: rgb(0, 0, 0); left: 50%; "><object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" width="900" height="80"><param name="movie" value="http://new.skinected.com-appnexus-akiai4avqn7qtsn2aowq.s3.amazonaws.com/80d6b512a3ceb9e9ad4e4f6c25c843be.swf"><param name="quality" value="high"><param name="FlashVars" value="clickTAG=http%3A%2F%2F5150.com&amp;clickTag=http%3A%2F%2F5150.com"><param name="flashvars" value="clickTAG=http%3A%2F%2F5150.com&amp;clickTag=http%3A%2F%2F5150.com"><embed src="http://new.skinected.com-appnexus-akiai4avqn7qtsn2aowq.s3.amazonaws.com/80d6b512a3ceb9e9ad4e4f6c25c843be.swf" quality="high" width="900" height="80" type="application/x-shockwave-flash" flashvars="clickTAG=http%3A%2F%2F5150.com&amp;clickTag=http%3A%2F%2F5150.com"></object></div></div></div> 
```

将它输入到 HTML 页面中，它不起作用，即使外部 div 包装器设置正确。

如果我将图像或其他基本 html 代码放入#headerOuter div 一切都很好，但对象/嵌入不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:52:17.817

使用`position:fixed`or`position:absolute`代替使用`position:relative`_`style``<div id="headerOuter">`

-------------------------------------------------- ---**更多说明：** -------------------------------------------------------- --------

> ***静态定位*****OR [ position:static ]**
> 
> 默认情况下，HTML 元素是静态定位的。静态定位元素始终根据页面的正常流程进行定位。
> 
> ***相对定位*****OR [ position:relative ]**
> 
> 相对定位的元素是相对于其正常位置定位的。
> 
> ***固定定位*****或 [ position:fixed ]**
> 
> 具有固定位置的元素相对于浏览器窗口定位。
> 
> ***绝对定位*****OR [ position:absolute ]**
> 
> 绝对位置元素相对于第一个具有非静态位置的父元素定位。

参考网址：[CSS 定位](http://www.w3schools.com/Css/css_positioning.asp)

# c# - 如何通过所有数据流块传播消息上限？

> ID：11425712
> 
> 赞同：2
> 
> 时间：2012-07-11T04:46:15.557
> 
> 标签：c#, collections, concurrency, task-parallel-library, tpl-dataflow

我想知道是否有一种方法可以设置数据流块中的队列可以容纳的最大项目/消息数（缓冲区块或动作块队列），并将这种上限向上传播到其他数据块，这些数据块可能会提供包含队列的数据块，它可以容纳，设置的最大项目。我猜提供数据块的队列只会增加项目，对吗？有没有办法让它们也锁定，或者我是否需要为链接到包含有上限队列的块的所有块队列实现上限？

例如，我可以从链接到缓冲区块的自定义生成数据流块开始。这个缓冲区块链接到一个动作块，我希望它的队列不超过队列中的一定数量的项目。如何防止生产数据流块或缓冲区块中的队列在自己的队列中存储越来越多的项目，因为知道链中的最后一个数据流块不能在某个时间点消耗更多项目并且 inQueue 不能接受更多项目?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:38:53.497

没有任何“智能”方法可以做到这一点，您只需`BoundedCapacity`在创建每个块时设置它们的选项。

我认为有几个原因导致您提出的建议不起作用：

1.  区块究竟应该如何决定它的容量应该是多少？仅仅因为 an`ActionBlock`的容量为 100 并不意味着`BufferBlock`它前面的容量应该相同。这是必须由人来决定的事情。
2.  块的选项在创建后无法更改。做你想做的事需要你改变选项。

话虽如此，我认为在您的简单情况下，您可以摆脱`BufferBlock`并将项目从生产块直接发送到`ActionBlock`.

# c# - 如何使用 C# 与 Red5 共享屏幕？

> ID：11425714
> 
> 赞同：0
> 
> 时间：2012-07-11T04:46:52.417
> 
> 标签：c#, red5

任何人都有任何想法或示例项目“如何在 C# 中使用 Red5？”

# php - 将产品描述显示为类别列表描述 - OpenCart

> ID：11425716
> 
> 赞同：1
> 
> 时间：2012-07-11T04:47:12.903
> 
> 标签：php, opencart

> **可能重复：**
> [将 PHP 查询的结果拆分为列](https://stackoverflow.com/questions/8052068/spliting-results-of-php-query-into-columns)

我有以下代码行从数据库中提取描述，

我想要做的是添加`<br/>`到描述中，这样它就不会显示为一长串数据。

`mb_substr(strip_tags(html_entity_decode($result['description'], ENT_QUOTES, 'UTF-8')), 0, 100) . '..'`

**当前的：**

数据 数据 数据 数据 数据 数据 数据 数据 数据 数据 数据 数据

**必需的：**

数据数据

数据数据

数据数据

**完整代码：**

```
 $this->data['products'][] = array(
                'product_id'  => $result['product_id'],
                'thumb'       => $image,
                'name'        => $result['name'],
                'description' => mb_substr(strip_tags(html_entity_decode($result['description'], ENT_QUOTES, 'UTF-8')), 0, 100) . '..',
                'price'       => $price,
                'special'     => $special,
                'tax'         => $tax,
                'rating'      => $result['rating'],
                'reviews'     => sprintf($this->language->get('text_reviews'), (int)$result['reviews']),
                'href'        => $this->url->link('product/product', 'path=' . $this->request->get['path'] . '&product_id=' . $result['product_id'])
            ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T04:49:49.833

```
<?php

$text = 'Data Data Data Data Data';

$data = explode(' ', $text);

foreach($data as $key => $value) {
    if ($key % 2 == 0) {
        echo '<br />';
    }
    echo $value . ' ';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T05:09:05.093

[`wordwrap()`](http://php.net/manual/en/function.wordwrap.php)使用例如可能更合适

```
$text = 'Data Data Data Data Data';
echo wordwrap($text, 10, '<br />', true); 
```

结果：

```
Data Data
Data Data
Data Data 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T08:18:28.303

我通过执行以下操作解决了这个问题：

编辑 -> catelog/view/theme/default/template/product/product.tpl

在上面的 .tpl 文档中，我调整了数组中的**第 196 行：**

**从：**

```
'description' => mb_substr(strip_tags(html_entity_decode($result['description'], ENT_QUOTES, 'UTF-8')), 0, 100) . '..' 
```

**到：**

```
'description' => strip_tags(html_entity_decode($result['description'], ENT_QUOTES, 'UTF-8'),'<p>'), 
```

# jquery - 运行用 ajax 加载的脚本标签

> ID：11425718
> 
> 赞同：5
> 
> 时间：2012-07-11T04:47:27.287
> 
> 标签：jquery, ajax, cloudflare

## 一般问题

假设您有一个简单的 ajax 请求，例如`$("#container").load('/url #content');`. 加载的 DOM 将类似于

```
<a>email</a>
<script>/* some script */</script> 
```

我该怎么做才能让脚本标签的内容执行？

## 具体问题

Cloudflare 自动保护 DOM 中的电子邮件地址，方法是将文本替换为`[email protected]`并包含一个解析它的脚本。但是，可以异步加载内容，并且不会执行解开的脚本。我可以关闭电子邮件保护功能（我认为），但我想知道是否有另一种解决方法。

## 例子

[在http://aysites.com/what](http://aysites.com/what)上查看它的实际操作——点击“联系”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T04:52:59.033

有一个调用 JavaScript 编译器的纯 js 函数。是`eval`。你需要使用它。

**例子：**

```
jQuery.globalEval("var newVar = true;") 
```

[在 jQuery.com 上](http://api.jquery.com/jQuery.globalEval/)

**或者**

```
eval("x=10;y=20;document.write(x*y)");
document.write("<br />" + eval("2+2"));
document.write("<br />" + eval(x+17)); 
```

[在 w3schools 上](http://www.w3schools.com/jsref/jsref_eval.asp)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-11T05:52:15.287

我的回答也包括了Tooraj 的一些魔法。

基本上，我们将使用相同的加载函数，在回调中，我们将获取脚本，从其中获取函数，然后评估它们。

```
$("#container").load('/url #content', function(){
  eval($('#container script').html()); 
}); 
```

使用上面的选择器并从该选择器中获取 HTML（恰好是脚本中的函数），然后我们可以`eval`运行该函数并让它运行。

[这是一个工作的jsFiddle。](http://jsfiddle.net/zraJY/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T04:58:55.573

您可以将脚本部分单独放在具有适当标题的页面中，然后用于`$.getScript()`获取和执行脚本，

见文档：[http ://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

# embedded - 什么是嵌入式系统？Mobile可以被视为嵌入式产品吗？

> ID：11425729
> 
> 赞同：13
> 
> 时间：2012-07-11T04:48:58.393
> 
> 标签：embedded, embedded-linux

嵌入式系统是什么意思？

如果我们正在制造的系统/机器或产品有多种用途，那么我们可以将其视为嵌入式系统吗？还是只有一个专门用于特定任务的系统才被视为嵌入式系统？PC/移动/笔记本电脑是否可以被视为嵌入式系统？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T05:17:58.977

一般来说，嵌入式系统是为特定的、狭隘的目的而投入使用的，并且缺乏您在普通台式机/笔记本电脑上可以找到的那种通用用户界面。

这并不是说嵌入式系统不能拥有这些——我见过一些测试设备，比如运行桌面操作系统的网络分析仪，带有鼠标/键盘端口。人们可能会破解其中一个以将其用于通用计算，但这并不划算。

换一种方式，你可以把一台通用计算机塞进一个嵌入式应用程序中。但是，针对嵌入式使用优化的系统可能更强大，支持更好的实际 I/O（通常保留旧端口），并且使用的部件预期使用寿命比商品 PC 中使用的更长（如果其中一个出现故障，您希望能够用*完全相同的东西*替换它）。

嵌入式系统通常更小——内存有限的 8 位处理器（历史上甚至是 4 位或串行内核）；尽管诸如 arm 系列之类的 32 位内核现在价格低廉且司空见惯。数十到数百兆字节的内存也不是未知的。

较旧的手机与嵌入式系统有很多共同之处，但很明显，当代智能手机在功能和多功能性方面正在迎头赶上，但仍经常受到用户界面的限制。在软件方面，一些“小思考”的习惯会持续存在——例如，Android 的紧凑型仿生 C 库和工具箱外壳与嵌入式 C 库和busybox 具有相似的设计目标。不过，在其他方面，广泛的资源吞噬用户体验现在已成为手机的常态。将基于相同处理器并配有键盘的平板电脑混入其中，运行最初为台式计算机设计的内核，真正的区别在于设计用于在触摸界面上运行隔离“应用程序”的 UI 软件堆栈与设计的运行更传统的程序。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-13T21:55:39.943

这是一个即使是[嵌入式系统专家也经常提出和讨论](https://www.embedded.com/electronics-blogs/break-points/4026846/What-s-Embedded-)的问题。很多东西都有一个*光谱*，简单的定义是困难的。

我的首选定义是：*包含一个或多个计算或处理元件的系统，不是通用计算机*。

一些系统无疑嵌入在该定义中，包括洗衣机控制器、电话交换机、卫星导航设备、海图绘图仪、汽车 ECU、激光打印机等。

有些不太容易分类。第一代数字手机可能肯定是嵌入式系统，而更现代的功能和智能手机却在某种程度上有所不同。他们可以运行最终用户选择和安装的应用程序，允许他们执行制造商未确定的任务。随着功能的增加，它们本质上是手持计算机，并且应用程序的范围足以将它们视为“通用”。

对于这些更模糊的系统，也许不是问什么是嵌入式系统，而是问什么是嵌入式系统开发？例如，您的智能手机的制造商在其上部署了操作系统、作为电话运行所需的信号处理和通信堆栈、WiFi、USB、数据存储等的所有设备驱动程序和堆栈，以及肯定是嵌入式系统*开发*. 然而，为 PlayStore 或 AppStore 等编写应用程序的人正在写入一个由所有嵌入式代码抽象的定义的通用平台——这不是我会接受的任何定义的嵌入式系统开发，除非该应用程序是针对某些定制的垂直市场应用程序- 就像 UPS 驱动程序在 PDA 上的交付签名应用程序一样 - 在那种环境中，“通用”设备已被重新用作“专用”设备。

就个人电脑而言；PC 可以是非通用计算机系统中的嵌入式计算元件。工业 PC 通常嵌入在制造和包装机械、CNC 机床、医疗设备等中。尽管它们与台式 PC 共享硬件架构，但它们不一定看起来像台式 PC，并且具有许多不同的板和外壳外形尺寸。然而，即使在台式 PC 中，也有许多嵌入式计算元件和嵌入式软件的示例，例如负责引导系统的 BIOS、键盘控制器和磁盘驱动器控制器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-07T08:23:11.763

嵌入式系统是任何使用 CPU 芯片的电子系统，但它不是通用工作站、台式机或笔记本电脑。嵌入式系统是设计用于执行专用功能的专用计算机系统。与通用计算机（例如个人计算机）不同，嵌入式系统执行一个或几个预定义任务，通常具有非常具体的要求，并且通常包括任务特定的硬件和机械部件，这些硬件和机械部件通常在通用计算机中找不到电脑。

阅读更多：[http ://romux-loc.com/tutorials/embedded-system#ixzz3113gchPt](http://romux-loc.com/tutorials/embedded-system#ixzz3113gchPt)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-07-08T10:49:08.000

嵌入式系统是做一些特定工作的设备，不像我们的笔记本电脑，可以播放音乐、点击图片和格式化文档。它们是滤水器、洗衣机、自动售货机等设备。它们针对某些特定工作进行了编程，并根据用户输入在超级循环中完成这些工作。就像自动售货机在您选择咖啡时总是执行相同的操作一样借助其中提供的按钮。

所以那样的话手机就不是一个嵌入式系统，因为它没有超级循环，它可以像电脑一样做各种通用的事情。

嵌入式系统具有内存约束、时序约束，并且它们在有限的空间内做事。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-30T17:09:06.087

嵌入式系统是包括可编程计算机的任何设备，但它本身不是通用计算机，因此移动设备不是嵌入式系统，因为它没有超级循环，它可以像计算机一样做各种通用的事情，并且嵌入式系统具有内存约束时序，约束并且它们在有限空间内做事。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-29T13:54:46.503

嵌入式系统是一个微处理系统，其中计算机连接到它控制的系统。嵌入式系统可以执行一组预定义的任务。该系统用于特定任务，因此，通过工程可以优化给定产品并减小尺寸，以及计算资源及其最终价值。
嵌入式系统就在我们身边，因此，我们不知道它们的计算能力，因为我们如此参与这些机制。嵌入式系统在可以连续工作数年的机器上运行，并且在某些情况下仍然具有自我纠正的能力。

使用嵌入式系统的产品的一个很好的例子是著名的智能手机，它执行特定的功能，并且比计算机具有更有限的机制。

检查下面的列表，其中包含一些接收嵌入式系统应用程序的示例：

1.  电子投票箱
2.  视频游戏
3.  计算器
4.  打印机
5.  医院设备
6.  在车辆中
7.  一些家用电器
8.  蜂窝设备
9.  路由器

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-11-20T16:50:50.097

一个可能有助于区分的定义。嵌入式系统可以被认为是无法开发另一个嵌入式系统的系统。所以目前，使用手机，无法开发“嵌入式系统”。如果移动设备可以实现，则应将其视为通用系统。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-04-29T17:57:59.157

**“嵌入式系统**”的一个例子是为了识别目的而插入狗皮下的芯片。像“嵌入式系统”这样的词具有只有专家才能理解的特定含义。这种模糊性使普通人难以理解技术语言。

嵌入的 ( `ɪmˈbɛdɪd`) adj

1.  牢固而深入地固定在周围的固体块中
2.  构成某物的永久和显着特征
3.  （新闻与出版）分配给现役军事单位的新闻
4.  (Grammar) 插入句子的语法
5.  （计算机科学）计算（一个软件的）是其他软件不可分割的一部分

# android - 如何在不包含 android 支持库的情况下使用 ADT r20 创建 n 项目？

> ID：11425730
> 
> 赞同：11
> 
> 时间：2012-07-11T04:48:58.690
> 
> 标签：android, eclipse, adt

我最近将我的 ADT 更新为 rev。20，但现在我发现新创建的项目总是包含android支持库。我不想使用`FragmentActivity`支持库中定义的类，我只想使用纯 Fragment 类。

我试图通过 SDK 管理器工具删除支持库，但现在我无法创建任何项目，因为 ADT 正在报告

> 这个模板依赖于Android Support库，要么没有安装，要么......

除了通过 shell 命令创建项目之外，还有什么方法可以绕过它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-13T03:54:03.647

转到 SDK_Folder/extra/android 并将文件夹**兼容性**重命名为**support**。之后，重新启动 Eclipse。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T19:47:48.643

好吧，这并不理想，但在他们修复 ADT 之前，至少似乎是一种手动方式。

1.  使用 ICS 的最小 SDK 创建 Android 项目。当向导提示添加 Activity 时，跳过添加 Activity。是的，令人讨厌的是，它仍然添加了支持库。

2.  创建项目后，打开项目属性并转到 Java Build Path。

3.  在库选项卡上选择 Android 依赖项，单击删除按钮，然后单击确定。

4.  在包资源管理器中展开“libs”文件夹并删除支持库 jar。

我相信这会让你获得一个没有不必要的支持库的 ICS 项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T04:55:47.257

由于您从 SDK 管理器中删除了支持库，请单击您所描述的屏幕上的“安装/更新”按钮。这一次它会让你前进。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-12T20:57:39.377

**编辑**澄清。您正在创建的项目需要支持库，因为您已经使用应用程序模板创建了项目。请继续阅读我的答案 Space Cowboy。

ADT R.20 现在具有应用程序模板，可为您创建一些样板。如果您不需要模板，您只需在进入**New Android Project**向导的**Create Activity**屏幕时取消选中“Create Activity”。

 **我注意到向导中存在一些错误。如果您在向导中单击“**创建活动**”处的“下一步” ，然后单击“返回”返回此屏幕，则“完成”按钮将被禁用。即使您选中/取消选中 Create Activity，该按钮仍将被禁用，因此此时您将无法创建空项目。此时，您可以简单地取消向导并重新开始。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-18T20:38:35.020

不要只是将兼容性目录重命名为支持。这在[http://code.google.com/p/android/issues/detail?id=33859](http://code.google.com/p/android/issues/detail?id=33859)项目 31 和 34 中得到解决。使用 SDK 管理器删除支持库，然后使用它重新添加它。否则你以后可能还有其他问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-19T07:09:39.917

从支持创建一个新的文件夹名称兼容性副本项目并将其粘贴在兼容性文件夹中将解决问题**

# ios - 应用程序关闭后按钮保持隐藏状态

> ID：11425738
> 
> 赞同：0
> 
> 时间：2012-07-11T04:49:50.693
> 
> 标签：ios, xcode, uibutton, nsuserdefaults

当我的应用程序加载时，它充当安装程序。当您点击“安装”按钮时，应用程序会执行它的任务。它会安装所需的内容，然后您可以继续使用该应用程序。我的应用程序运行良好，但每当我关闭多任务栏的应用程序时，应用程序就会再次像原来的安装程序一样加载。因此，每次重新加载应用程序时，用户都必须继续重新安装。我希望用户只需安装一次项目，能够关闭应用程序，然后再次使用内容而无需重新下载。我知道我需要为此使用 NSUserDefaults，但我也希望“安装”按钮与安装程序一起永久消失。*笔记*这不是一家商店。这只是一个测试应用程序，用于安装我以后可能会使用的内容。我怎么能做到这一切？任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T04:56:09.530

几次实施这样的事情后，最好[检测 first launch](https://stackoverflow.com/questions/9964371/how-to-detect-first-time-app-launch-iphone)，并据此显示安装程序屏幕。但是，在某些情况下，用户还没有完全完成安装，并且应用程序以某种方式在后台运行或被终止。在这种情况下，您需要存储另一个变量来记录用户是否已完成安装。

最简单的方法是，如果初始设置未完成，则将模态视图控制器呈现为一种向导，如果完成，则照常加载主屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:59:07.647

只需在安装之前查询用户默认值。如果出现未安装，则安装所需的任何内容，然后设置用户默认值！

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *isInstalled = [defaults objectForKey:@"installed"];
if( ![isInstalled isEqualToString: @"true"] ) {
    //do installation here

    NSString *hasUserInstalled = @"true";
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:hasUserInstalled forKey:@"installed"];
    [defaults synchronize];
} 
```

# php - 在数组 PHP 中插入值

> ID：11425739
> 
> 赞同：4
> 
> 时间：2012-07-11T04:49:55.573
> 
> 标签：php, arrays

我是 PHP 新手。只是一个简单的问题：

编码：

```
foreach($group as $b)
{
  if($b == 0){
       echo "error";
  }
  else{
        echo "true";
  }
} 
```

我想要将“true”添加到新数组的值 $b。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-11T04:54:27.427

```
$arr = array();
foreach($group as $b) {
    if ($b == 0) {
        echo "error";
    } else {
        echo "true";
        $arr[] = $b;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T04:52:49.347

只需使用[`array_push()`](http://php.net/manual/en/function.array-push.php).

```
array_push($array, "true"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T04:56:31.733

1.  **定义数组。**

2.  **将数据推**送到数组中。

例子：

```
$array = new array();

foreach ($group as $b) {
    if ($b == 0) {
       echo "error";
    } else {
    echo "true";
    array_push($array,$b) //or any value?
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T04:53:59.237

使用[array_push](http://php.net/manual/en/function.array-push.php)检查这个链接

```
 $a = new array();
array_push($a,"true");
print_r($a); 
```

我们可以通过以下方式添加到数值数组：

```
$arr = new array("true");    //Create the array & add the values
var_dump($arr);    //Print the contents of the array to screen 
```

您还可以将值推送到数组：

```
$arr = new array();    //Create the array
array_push($arr, 'true');    //'Push' the value into the next available index
var_dump($arr);    //Print the contents of the array to screen 
```

您也可以通过直接设置索引来添加到数组中：

```
$arr = new array();    //Create the array
$arr[0] = 'true';    //'Set' index 0 to the value
var_dump($arr);    //Print the contents of the array to screen 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-11T05:00:20.703

用它：

```
array_push($arr,"true"); 
```

或者

```
echo "true";
$arr[] = $b; 
```

要了解有关 array_push 的更多信息，请阅读以下内容：

[http://php.net/manual/en/function.array-push.php](http://php.net/manual/en/function.array-push.php)

# ruby-on-rails - 资产管道在错误的目录中查找

> ID：11425749
> 
> 赞同：3
> 
> 时间：2012-07-11T04:51:34.370
> 
> 标签：ruby-on-rails, asset-pipeline

我在布局文件中添加了这一行：

```
<%= stylesheet_link_tag "bootstrap", "bootstrap-responsive", :cache => true%> 
```

这会产生此错误消息：

> 测试#index 中的 Errno::ENOENT
> 
> 没有这样的文件或目录 - 在“/Developer/Workspace/MyProj/public/stylesheets/Developer/Workspace/MyProj/app/assets/stylesheets/bootstrap.css”中找不到资产文件

在查找文件之前，它似乎已经将文件夹的路径连接了两次。这是 rails 3.2.3 的已知问题吗？还是我搞砸了一些设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-05T20:40:46.163

尝试删除 ":cache => true"

> 如果您查看[https://github.com/rails/rails/pull/6752/files#L0R40](https://github.com/rails/rails/pull/6752/files#L0R40)，您将看到该行，当启用缓存或 concat 选项时会产生错误的路径。在这种情况下，路径看起来像“/Absolute/path/to/public/”+“/Absolute/path/to/asset/file.ext”，这是错误的。

[-- 似乎与您的问题相关的 Rails 拉取请求。](https://github.com/rails/rails/pull/6834 "链轮应该忽略 :cache 和 :concat 选项")

# c++ - C ++中for循环迭代语句期间范围内的变量

> ID：11425755
> 
> 赞同：2
> 
> 时间：2012-07-11T04:52:09.563
> 
> 标签：c++, scope, language-lawyer, specifications

根据我对C++规范的理解（根据网上的标准草案），for循环可以重写为while循环和初始化块。根据我的理解，for-loop的迭代语句和body发生在同一个作用域，所以应该可以使用for-loop的body中声明的变量。gcc 和 clang 都拒绝以下（人为的）代码，这是我真实代码的简化。

我显然可以通过在循环之外声明 j 来修复代码，但是为什么 j 超出了下面的范围？

```
int main() 
{
    for(int i=0; i<10; i=j) int j=i+1;

    // // I must misunderstand the standard because I thought the above loop is 
    // // equivalent to the commented code below where j is clearly in scope.
    // {
    //     int i=0;
    //     while(i<10) {
    //         int j=i+1;
    //         i=j;
    //     }
    // }

    return 0;
 } 
```

根据clang（和gcc），这是无效的。

```
test.cpp:3:26: error: use of undeclared identifier 'j'
    for(int i=0; i<10; i=j) int j=i+1;
                         ^
1 error generated. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T05:02:04.383

```
for(int i=0; i<10; i=j) int j=i+1; 
```

如果它是有效的语法，将与

```
for(int i=0; i<10; i=j) 
{
  int j=i+1;
} 
```

`{}`然后 for 循环在执行第一个循环之前不存在的范围内访问“j” 。C++ 是一种静态语言，它依赖于编译器能够在编译时解析其变量，但您正在做的是试图让它在运行时解析变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T05:16:49.203

作为参考，扩展如下（§6.5.3/1）。for循环语句：

```
for (init cond; expr) statement 
```

相当于：

```
{
    init
    while (cond)
    {
        statement
        expr;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T05:02:26.983

这在某种程度上是显而易见的。我给你举个例子。你能写出这样的东西吗？

```
int main(){
int i = j * 10;
//Some other lines ...
int j = 2;
return 0;
} 
```

当然在给定的代码中 i 和 j 是在同一个范围内，但是在使用 j 之前你必须声明它。
除了范围之外，您还必须考虑其他事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T05:21:55.427

您收到错误的原因是因为在 for 循环中声明/初始化了“j”。但是在 C++ 编译器从左到右和从上到下编译，所以当编译器遇到 'i' 被分配了一个垃圾值时，它会弹出一个错误。

# javascript - 如何在 Google Chrome 的 Web Inspector 中使用 step into 和 step over 来调试 Java Script？

> ID：11425756
> 
> 赞同：1
> 
> 时间：2012-07-11T04:52:15.367
> 
> 标签：javascript, google-chrome, breakpoints

我安装了 Chrome、15.0.874.106 (Developer Build 107270 Linux) Ubuntu 10.04 并使用它的 web 检查器来调试我的 javascript。在某个地方，我的 css 图像正在消失，我必须弄清楚它到底在哪里。所以尝试使用断点并检查。但是，一旦我添加了断点，我看到“进入”步过等仍未启用。请帮忙。

谢谢斯内哈
_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T06:03:11.437

检查这个。这是有关如何在 Chrome 上运行调试器的完整教程。

[https://developer.chrome.com/devtools/docs/javascript-debugging](https://developer.chrome.com/devtools/docs/javascript-debugging)

# java - 尝试在表中插入值时出现 sqLiteCantOpenDatabaseException？

> ID：11425762
> 
> 赞同：1
> 
> 时间：2012-07-11T04:52:53.433
> 
> 标签：java, android, sqlite

在 android 中使用 sqlite 数据库时，我遇到了一个奇怪的问题。我在一个表中插入了大约 500 个输入，但是当表有大约 260-270 个输入时，它显示了这个异常：

```
 sqLiteCantOpenDatabaseException 
```

代码：

```
 public last_open open() throws SQLException {db = DBHelper.getWritableDatabase();return this;}
public void close() {DBHelper.close();}

public static  void insert(

        String STUDENT_ID,
        String COURSE_ID,
        String PACKAGE_ID,
        String ITEM_NAME,
        String ITEM_ID,
        String LAST_OPEN
){
    try{

        ContentValues initialValues = new ContentValues();
        initialValues.put(T_STUDENT_ID,STUDENT_ID);
        initialValues.put(T_COURSE_ID, COURSE_ID);
        initialValues.put(T_PACKAGE_ID, PACKAGE_ID);
        initialValues.put(T_ITEM_NAME,ITEM_NAME);
        initialValues.put(T_ITEM_ID, ITEM_ID);
        initialValues.put(T_LAST_OPEN,LAST_OPEN);

    //  db.insert("LAST_OPEN", null, initialValues);
    db.execSQL("DELETE FROM LAST_OPEN WHERE STUDENT_ID="+STUDENT_ID+" AND COURSE_ID="+COURSE_ID+" AND PACKAGE_ID="+PACKAGE_ID+" AND ITEM_ID="+ITEM_ID+" AND ITEM_NAME='"+ITEM_NAME+"';");
    db.execSQL("INSERT INTO LAST_OPEN(STUDENT_ID,COURSE_ID,PACKAGE_ID,ITEM_NAME,ITEM_ID,LAST_OPEN) VALUES ("+STUDENT_ID+","+COURSE_ID+","+PACKAGE_ID+","+"'"+ITEM_NAME+"'"+","+ITEM_ID+","+"'"+LAST_OPEN+"'"+");");
}catch (Exception e) {
    // TODO: handle exception

    e.printStackTrace();
}
} 
```

这些是我正在使用的方法::

日志：

```
 SqliteDatabaseCpp(586): sqlite returned: error code = 14, msg = cannot open file at line 27360 of [8609a15dfa], db=/data/data/com.cuelearn.main/databases/cuelearn
     SqliteDatabaseCpp(586): sqlite returned: error code = 14, msg = os_unix.c: open() at line 27360 - "" errno=24 path=/data/data/com.cuelearn.main/databases, db=/data/data/com.cuelearn.main/databases/cuelearn
     SqliteDatabaseCpp(586): sqlite returned: error code = 14, msg = statement aborts at 28: [DELETE FROM LAST_OPEN WHERE STUDENT_ID=95 AND COURSE_ID=2 AND PACKAGE_ID=13 AND ITEM_ID=267 AND ITEM_NAME='Chapter';] , db=/data/data/com.cuelearn.main/databases/cuelearn  
enter code here
     System.err(586): android.database.sqlite.SQLiteCantOpenDatabaseException: error code 14: unable to open database file 
```

我不知道如何解决这个问题，我也没有得到这个原因。我看到有人在尝试从资产复制数据库时遇到此异常。但在我的情况下，我没有复制数据库。请帮助我，我使用的是 Android 4.0.3？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T04:56:34.307

您可能正在尝试打开已经打开的数据库文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T05:11:31.577

我有同样的问题，但很清楚这一点。

您应该在 db.execSQl(........); 结束时关闭 DBHelper

# java - 在 Apache Tomcat 服务器 7.0 中部署 PHP 和 Java EE 应用程序

> ID：11425767
> 
> 赞同：0
> 
> 时间：2012-07-11T04:53:12.640
> 
> 标签：java, php, apache, jakarta-ee, tomcat

我有 Apache Tomcat 7.0 并在 PHP 和 Java EE 中开发了两个不同的应用程序。我想将这两个应用程序部署在同一台服务器 Apache Tomcat 7.0 中。

是否有可能将两个应用程序部署在同一台服务器上？是否可以进行应用程序间通信？我可以将数据从一个应用程序传递到另一个应用程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T14:15:45.447

显然，Java 已经在 Apache Tomcat 上运行。但是您也可以在 Tomcat 服务器上安装[quercus/php](http://quercus.caucho.com/)，然后也可以直接在 Tomcat 上运行 PHP 应用程序，从而无需 Apache HTTPd 和 mod_jk。（不，我不与他们合作。只是一个用户。）

一旦您在同一个 Tomcat 服务器上拥有这两个应用程序，您就有几个选项可以让它们相互通信。

1.  一个或两个应用程序公开的 Web 服务。
2.  交叉上下文=真
3.  [如此处](https://stackoverflow.com/questions/8225174/how-can-i-share-memory-between-two-java-web-services)所述，拥有共享内存块似乎是一种选择。

我想会有更多的方法，这些是我想到的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T12:15:32.210

是的，您可以使用 Tomcat 7、Apache 2 和 JK 连接器在同一台服务器上运行 PHP 和 Java 应用程序。

[http://tomcat.apache.org/connectors-doc/webserver_howto/apache.html](http://tomcat.apache.org/connectors-doc/webserver_howto/apache.html)

您可以使用数据库或网络服务来共享数据。

# c++ - “多级继承情况下的虚拟基类”有没有意义

> ID：11425768
> 
> 赞同：4
> 
> 时间：2012-07-11T04:53:40.377
> 
> 标签：c++, inheritance, virtual, virtual-inheritance

考虑以下显示多级继承的示例代码：

**Case1：这里类`derived1`是`base`通过虚拟继承从类`derived2`派生而来的，类是`derived1`直接从类派生而来的。**

```
class base
{

};

class derived1 : virtual public base
{

};

class derived2 : public derived1
{

}; 
```

**Case2 ：与 Case1 相同，只是不涉及虚拟继承**

```
class base
{

};

class derived1 : public base // no virtual inheritance
{

};

class derived2 : public derived1
{

}; 
```

`derived2`假设我在这两种情况下都创建了一个类的对象。

1.  Case1 和 Case2 在子对象的包含方面有何不同`derived2`？

2.  Case1 是否对 Case2 有意义？

**PS：我很清楚虚拟基类在多重继承期间的重要性。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T05:54:53.280

如果在继承层次结构中没有基类的多个实例，则（至少）还有两个其他问题需要考虑`virtual`基类。

首先，虚拟基类总是由正在构造的最派生类在非虚拟基类之前初始化。当中间类在其成员初始化列表中将参数传递给虚拟基类构造函数时，这一点最为明显。这些初始化程序将被忽略。它还可以对基类的构造顺序产生影响。

其次，不可能执行`static_cast`从虚拟基类到继承自它的类的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T05:15:25.123

使用虚拟继承时会存储其他信息。这是为了在菱形情况下允许动态转换正确解析为派生类。~~您的代码没有菱形情况，因此不使用该信息。~~

如果将数据成员添加到基类，则可以使附加信息可见：

```
class base {
protected:
    int i;
}; 
```

如果您现在在两种情况下打印每个派生类的大小，您将观察到它们的大小从一种情况到另一种情况的差异。

**编辑：** Charles Bailey 对使用虚拟继承的语义差异提出了很好的观点。他的第一点特别有意思，应该多加考虑。他的观点基本上是`derived2`具有隐含的菱形拓扑。也就是说，假设`derived1`实际上继承自`base`：

```
class base {};
class derived1 : virtual public base {}; 
```

那么，这三个版本之间没有区别`derived2`，它们的行为都像第一个：

```
class derived2 : virtual public base, public derived1 {};
class derived2 : public derived1, virtual public base {};
class derived2 : public derived1 {} 
```

这意味着当您从类似的类`derived1`（即使用虚拟继承的类）派生时会创建一个隐式菱形。

```
 base
     |  \
     |   \.(virtual)
     |   / \
     |  /___\
     |    |
     | derived1
     |   /
     |  /
     |./
     / \ 
    /___\
      |
   derived2 
```

`derived1`为了进一步说明这一点，在使用虚拟继承时这是允许的：

```
class derived2 : public derived1 {
public:
    derived2 () : base() {}
}; 
```

但是，如果`derived1`不使用虚拟继承是不允许的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T04:59:19.200

虚拟继承在您的情况下没有意义。
它仅对 diamon 继承缩进，例如：

```
B: A
C: A
D: B, C 
```

在这种情况下，两种情况下从 A 的继承都应该是虚拟的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T05:09:39.613

仅当该类多次作为基类包含时，虚拟继承才变得重要。实际上，说明符`virtual`在这里的意思是“只包含一次”。

当你没有多重继承时，你不能多次指定同一个类（循环继承是一个明显的语法错误）。然后是编译器中的优化有多聪明。如果编译器是完美的，那么没有区别。实际上，您承担了编译器将向您的类添加与多重继承有关的内容的风险。语言的某些特性使用得越少，编译器混淆的风险就越大。编译器通常是一个高质量的程序，但这仍然只是一个程序。

# jquery - jQuery 显示更多

> ID：11425775
> 
> 赞同：1
> 
> 时间：2012-07-11T04:54:28.003
> 
> 标签：jquery

希望有人能帮助我。

我正在尝试让“显示更多”链接扩展隐藏的 div 并让“显示更多”消失，但我需要它的列表项也消失。这需要应用于同一页面上的多个列表，并且我需要能够逐项自定义“显示更多”文本。

看起来像这样的东西：

```
<ul>
<li>Item</li>
<li>Item</li>
<li><a class="toggle">Show More...</a></li>
<div class="toggle-wrap">
<li>Item</li>
<li>Item</li>
<li>Item</li>
</div>
</ul> 
```

当您单击“显示更多”时，它看起来像这样：

```
<ul>
<li>Item</li>
<li>Item</li>
<li style="display: none;"><a class="toggle">Show More...</a></li>
<div class="toggle-wrap">
<li>Item</li>
<li>Item</li>
<li>Item</li>
</div>
</ul> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:03:11.540

HTML 无效，因为您的`toggle-wrap`DIV 是您的 UL 的直接子代。为了纠正这个问题，您可以为所有您希望仅在有人单击“显示更多”时显示的 LI 提供一个类。即类似的东西：

```
<ul>
    <li>Item</li>
    <li>Item</li>
    <li><a class="toggle">Show More...</a></li>
    <li class="extra">Item</li> <!-- li's with class extra wont show up by default -->
    <li class="extra">Item</li>
    <li class="extra">Item</li>
</div>
</ul> 
```

一旦您的 HTML 处于上述结构中，以下内容应该适用于切换：

```
$('li a.toggle').click(function() {
    $(this).parent('li').hide();
    $(this).parent('li').siblings('extra').show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T05:05:58.227

1.  您的 HTML**无效**。不要使用`<div>`元素，而是使用**附加列表**。
2.  使用 jQuery`bind('click')`来切换子列表。

[在 jsFiddle 上](http://jsfiddle.net/KFJqg/)查看演示

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T05:14:43.637

正如我在上面的评论中提到的，您的 html 是无效的，因为除了 li 元素作为 ul 的直接后代之外，您不应该拥有任何东西。

如果这里的想法是隐藏长列表的结尾，直到用户单击“显示更多...”，那么您可以为您的 html 执行类似的操作（基本上与您减去 div 相同）：

```
<ul>
<li>Item</li>
<li>Item</li>
<li><a class="toggle">Show More...</a></li>
<li>Item</li>
<li>Item</li>
<li>Item</li>
</ul> 
```

然后在您的文档就绪处理程序中：

```
$('li a.toggle').each(function(){
    $(this).parent().nextAll().hide();
}).click(function(){
    $(this).parent().hide()
           .nextAll().show();
}); 
```

这首先要查找 li 中所有具有类“toggle”的链接，并隐藏所有以下关联的 li 元素。

单击处理程序获取单击链接的父 li 并将其隐藏，然后获取以下同级 lis 并显示它们。

这将自动适用于同一页面上的多个列表，如本演示所示：http: [//jsfiddle.net/v2pNS/](http://jsfiddle.net/v2pNS/)

# php - 如何从 URL 获取数组参数？

> ID：11425777
> 
> 赞同：0
> 
> 时间：2012-07-11T04:54:44.960
> 
> 标签：php

我有一个包含 4 个必需输入的表单。如果它们丢失，它们将被传递到 url。

如果所有 4 个都丢失，它将看起来像：

`?required[0]=field_name&required[1]=field_email&required[2]=field_number&required[3]=field_desc`

如果缺少第一个`field_name`，则数组将向前推一个，因此`field_email`将是 [0]。这意味着数组总是按 0,1,2,3 的顺序排列。

我想知道的是如何检索信息，以便在丢失的输入周围放置红色边框？我需要的是这样的：

```
while ($i=0,$i<=3,$i++) {
    do ($requiredArray[i] == 'field_email') {
        echo '<script type="text/javascript">$("#name)".css("border","1px solid #ff0000");</script>';
    } while ();
    endwhile;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T04:59:09.533

查看使用 Jquery 的表单验证，它会更简单且更具可扩展性。

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T05:02:30.267

您也可以`array_search`在 php 中使用如下：

```
array_search("field_name",$_GET['required']); 
```

如果该值大于或等于零，那么您可以进行处理。

就像，你可以拥有一个数组变量中的所有值，`$required_array`你可以使用`foreach`如下循环：

```
foreach($required_array as $val){
 if(!(array_search($val,$_GET['required'])>=0)){
   echo '<script type="text/javascript">$("#'.$val.')".css("border","1px solid #ff0000");</script>';
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T06:41:56.853

这是在服务器端执行验证的表单示例：

```
<?php
$first_name = $_GET['fname'];
$last_name = $_GET['lname'];
$email = $_GET['email'];
$submit = $_GET['submit'];

if(empty($first_name) && !empty($submit)){
    $missing_fname = 1;
}
if(empty($last_name) && !empty($submit)){
    $missing_lname = 1;
}
if(empty($email) && !empty($submit)){
    $missing_email = 1;
}
?>
<table><form action="" method="get">
    <tr><td>Enter First Name:</td><td><input type="text" id="fname" name="fname" value="<?php echo $first_name; ?>" ></td><td><?php if($missing_fname == 1) echo "<font color='red'>This field is Mandatory!</font>" ?></td></tr>
    <tr><td>Enter Last Name:</td><td><input type="text" id="lname" name="lname" value="<?php echo $last_name; ?>" ></td><td><?php if($missing_lname == 1) echo "<font color='red'>This field is Mandatory!</font>" ?></td></tr>
    <tr><td>Enter email:</td><td><input type="text" id="email" name="email" value="<?php echo $email; ?>"></td><td><?php if($missing_email == 1) echo "<font color='red'>This field is Mandatory!</font>" ?></td></tr>
    <tr><td></td><td><input type="submit" value="submit" name="submit" id="submit"></td></tr>
    </form>
</table> 
```

# iphone - Iphone-显示来自和 NsMutable 数组的记录

> ID：11425780
> 
> 赞同：0
> 
> 时间：2012-07-11T04:55:32.670
> 
> 标签：iphone

假设我有`NSMutableArray`20 个对象。

在我的`viewDidLoad`我想显示前 10 条记录，然后单击一个`UIButton`说 NextButton 我想显示剩余的记录。

当我点击返回时，它应该回到最初显示的 10 条记录`viewDidLoad`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:38:37.797

您应该将 yourMainArray 划分为两个数组。之后，您将元素填充到数组中并根据需要实现代码。

```
 NSMutableArray *arrayFirst10 = [[NSMutableArray alloc] init];
    NSMutableArray *arraySecond10 = [[NSMutableArray alloc] init];

    for(int i=0;i<10;i++)
    {
      [arrayFirst10 addObject:[yourMainArray objectAtIndex:i]];
    }

    for(int i=10;i<20;i++)
    {
      [arraySecond10 addObject:[yourMainArray objectAtIndex:i]];
    } 
```

像这样试试。这将对您有所帮助。

# asp.net - 当条件为假时执行单语句VB.NET If-block？VS 2005 错误？

> ID：11425783
> 
> 赞同：4
> 
> 时间：2012-07-11T04:56:00.487
> 
> 标签：asp.net, vb.net, debugging, if-statement, visual-studio-2005

我想知道你以前是否遇到过这个错误：在单行 IF 中，条件返回 FALSE，但随后执行继续到 TRUE 部分。

我在这里做错了吗？`retries`并且`errorTolerance`都是类型`Integer`，并且从下面的屏幕截图中，`retries`小于`errorTolerance`. 但它仍然执行该`True`部分的语句。

![当条件为 False 时，语句转到 TRUE 部分](../Images/f66e63a206c505018288e60bf0489612.png)

这一直在搞砸我的程序，所以我所做的就是将它`Throw New Exception`放在另一行并关闭`End If`它并且它可以工作。

我想我的问题是我以前的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:15:42.257

由于我不能不继续编码，所以我求助于常规`If...End If`块。Visual Studio 和编译器完美地运行代码，尽管它让我想知道为什么这个表达式阻碍了 VS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T15:04:30.757

禁用优化以确保代码行和相应的编译指令之间存在清晰的线性对应关系。

如果这是发布模式编译，并且`retries`只是一个超出范围的局部变量，则编译器可能刚刚优化了将递增值存储在`retries`最初保存的寄存器中，但在检查表达式时仍使用该寄存器。

为了确认这一点，您将看到`retries`和`errorTolerance`在发布模式下具有相同的值，并且`retries`在调试模式下重新编译后具有更大的值。逐行检查时分别检查变量。

# java - 添加记录时修改 ArrayList 成员

> ID：11425788
> 
> 赞同：0
> 
> 时间：2012-07-11T04:56:22.370
> 
> 标签：java, arraylist

[这是我昨天发布的一个问题（链接](https://stackoverflow.com/questions/11392179/erroneous-update-of-arraylist-records-when-a-new-record-is-added)）的延续，因为我很高兴 - 毫无疑问它解决了一个障碍。

按照建议，我删除了**静态**修饰符。这确实解决了记录累积更改的问题。但是，当我从为问题调试而构建的简化应用程序返回到原始环境时，我注意到添加记录仍然会导致修改之前的记录。我认为我对 ArrayList 做的事情有问题。

我通过删除所有**static**、**final**和**synchronized**修饰符（不管它与问题的相关性如何）简化了应用程序，但仍然存在问题。

我将问题缩小到下面带来的**add**方法。该方法由数据存储库的构造函数调用，测试记录具有递增的 ID 字段和其他字段的各种值。

```
private ArrayList<taskDef> tasksTable = new ArrayList<taskDef>();

public void addTask (taskDef newRecord)
{ // Add  the record at the array's end
    Boolean f = tasksTable.add(newRecord);
    System.out.println( "\n>************** storing record (index " + (getTasksTableLength () - 1) + 
                        ")\tProject: " + tasksTable.get(getTasksTableLength () - 1).getProjectNumber() + 
                         "\tID: " + tasksTable.get(getTasksTableLength () - 1).getId() + 
                        "\ttable size: " + getTasksTableLength () + "\tsuccess: " + f + 
                        "\tLog: " + tasksTable.get(getTasksTableLength () - 1).getLog());
    if (getTasksTableLength () > 1)
        System.out.println( ">************** Previous record (index " + (getTasksTableLength () - 2) + "): " + 
                             "\tProject: " + tasksTable.get(getTasksTableLength () - 2).getProjectNumber() + 
                             "\tID: " + tasksTable.get(getTasksTableLength () - 2).getId() + 
                             "\tLog: " + tasksTable.get(getTasksTableLength () - 2).getLog());
} 
```

在日志中，我们可以看到，每当添加记录时，先前的任务都会更改。下面的打印输出只显示了一个以前的记录，但实际上所有以前的记录都在被修改

```
>************** storing record (index 0)    Project: P1000  ID: 1   table size: 1   success: true   Log: 
11/07/2012 07:14:02: ; project number (P1000); task (Task 1); task ID (1); owner (O1); status (started)

>************** storing record (index 1)    Project: P1000  ID: 2   table size: 2   success: true   Log: 
11/07/2012 07:14:41: ; task (Task 2); task ID (2); delivery flag (true)
>************** Previous record (index 0):  Project: P1000  ID: 1   Log: 
11/07/2012 07:14:41: ; task (Task 2); task ID (2); delivery flag (true)

>************** storing record (index 2)    Project: P1000  ID: 3   table size: 3   success: true   Log: 
11/07/2012 07:16:08: ; task (Task 3); task ID (3); owner (O2)
>************** Previous record (index 1):  Project: P1000  ID: 2   Log: 
11/07/2012 07:16:08: ; task (Task 3); task ID (3); owner (O2) 
```

# mysql - MySQL SELECT 中的比较

> ID：11425789
> 
> 赞同：1
> 
> 时间：2012-07-11T04:56:30.110
> 
> 标签：mysql, comparison

MySQL是否可以执行以下操作：

`SELECT username, age, age>13 AS ageGT FROM users`.

并得到类似的东西：

```
+--------+---+-----+
|username|age|ageGT|
+--------+---+-----+
|fred    |14 |true |
|bob     |12 |false|
+--------+---+-----+ 
```

?

这将是一个巨大的帮助，谢谢！

澄清：我不是在寻找一个`WHERE`子句，我想选择这两种情况，但有一列显示该子句的评估结果是真还是假。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T04:57:23.527

你可以这样做`CASE WHEN age > 13 THEN 'true' ELSE 'false' END AS ageGT`：

```
SELECT 
    username, 
    age, 
    CASE WHEN age > 13 THEN 'true' ELSE 'false' END AS ageGT
FROM users 
```

或者更简单地说：

```
IF(age>13, 'true', 'false') AS ageGT 
```

阅读有关[CASE 表达式](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#operator_case)和[IF() 函数](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html#function_if)的更多信息。

一个重要的区别是`CASE`所有主要的 DBMS 都支持表达式语法，而`IF()`几乎是特定于 MySQL 的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T04:59:10.887

```
SELECT username, 
age, 
case when age>13 then 'true' else 'false' end AS ageGT 
FROM users 
```

# iphone - 询问iphone设备方向刷新

> ID：11425793
> 
> 赞同：6
> 
> 时间：2012-07-11T04:56:55.130
> 
> 标签：iphone, ios, rotation, orientation

我正在为 iphone 创建一个益智游戏。我所有的菜单等都是纵向的，但我的游戏可以纵向或横向。

因此，当我在菜单中并且设备处于横向状态时，当我进入游戏视图控制器时，它会使用横向坐标进行布局，但屏幕实际上仍然是纵向的：

![在此处输入图像描述](../Images/83fdfdc8d6d209b94adb0f2f0e30348d.png)

**我想在布局之前强制设备重新定位屏幕。**我怎么做？

现在我正在测试这样的设备方向：

```
- (void) viewDidLoad {
    .
    .
    .

   if (!UIDeviceOrientationIsLandscape([[UIDevice currentDevice] orientation])) {
      // Run Portrait Layout
   }
   else {
      // Run Landscape Layout
   }
} 
```

所以我知道设备正在返回横向的方向，但由于某种原因屏幕仍然是纵向的。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-11T05:06:16.790

也许尝试..

```
[UIViewController attemptRotationToDeviceOrientation]; 
```

在`viewDidLoad`or`viewWillAppear`中，这应该使它尝试改变方向

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T05:26:26.133

UIViewController 中有一些方法可以重写以捕获 view-did-rotate 事件：

```
– willRotateToInterfaceOrientation:duration:
– willAnimateRotationToInterfaceOrientation:duration:
– didRotateFromInterfaceOrientation: 
```

请检查[UIViewController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

# java - 在多个类中使用相同的约束

> ID：11425797
> 
> 赞同：2
> 
> 时间：2012-07-11T04:57:13.543
> 
> 标签：java, validation

假设您有这样的课程：

```
public class CreateUserRequest {
  ...
  @NotNull
  @Size(min = 4, max = 16)
  @Pattern(regexp = "^[a-zA-Z0-9]+$")
  private final String userName;
  ...
} 
```

我们这里有一个字段“userName”，它有一些约束，所以有些值是可以的，有些不是。你也有一堂课`EditUserRequest`。您将用户`userName`作为用户标识符，因此您`EditUserRequest`肯定会使用此字段：

```
public class EditUserRequest {
  ...
  @NotNull
  @Size(min = 4, max = 16)
  @Pattern(regexp = "^[a-zA-Z0-9]+$")
  private final String userName;
  ...
} 
```

并且您肯定希望能够删除用户：

```
public class DeleteUserRequest {
  ...
  @NotNull
  @Size(min = 4, max = 16)
  @Pattern(regexp = "^[a-zA-Z0-9]+$")
  private final String userName;
  ...
} 
```

所有这些类都有一个具有绝对相似含义和相似约束的字段“userName”。有一天，您决定还允许在`userName`s 中使用更多符号。因此，您必须手动修复所有这 3 个类。

# 解决方案#1

为所有这些请求创建一个基类：

```
public abstract AbstractUserRequest {
  ...
  @NotNull
  @Size(min = 4, max = 16)
  @Pattern(regexp = "^[a-zA-Z0-9]+$")
  private final String userName;
  ...  
}

public class CreateUserRequest extends AbstractUserRequest {
  ... // OK, we have userName here
} 
```

**优点**：

*   您现在只需修复约束一次
*   创建新类型的请求非常简单，只需子类化`AbstractUserRequest`就可以了。

**缺点**：

*   如果您需要`userName`其他地方，则必须有一个子类`AbstractUserRequest`（例如：`CreateUserGroupRequest`它需要一个`userName`s 列表，当然您要先验证它们）
*   不确定如何正确测试

# 解决方案#2

为每种类型的字段创建单独的类，以便当您谈论“用户名”时，您知道它不仅仅是 a `String`，它是一个 constrained `String`：

```
public class UserNameField {
  @NotNull
  @Size(min = 4, max = 16)
  @Pattern(regexp = "^[a-zA-Z0-9]+$")
  private final String value;
  ...
}

public class CreateUserRequest {
  ...
  private UserNameField userName;
  ...
} 
```

**优点**：

*   如果用户名限制发生变化，您只需修复一次
*   您有一个易于测试的简单类

**缺点**：

*   感觉有点矫枉过正（？）

# 解决方案#3（更新）

Hibernate 验证器允许约束组合，以便您可以为一组约束命名：

```
@NotNull
@Size(min = 4, max = 16)
@Pattern(regexp = "^[a-zA-Z0-9]+$")
@Target( { METHOD, FIELD, ANNOTATION_TYPE })
@Retention(RUNTIME)
@Constraint(validatedBy = {})
@Documented
public @interface UserName {
  String message() default "{com.loki2302.constraints.username}";
  Class<?>[] groups() default {};
  Class<? extends Payload>[] payload() default {};
}
...
public class CreateUserRequest {
  ...
  @UserName
  private final String userName;
  ...
} 
```

**优点：**

*   简单而强大的方法
*   易于使用（没有额外的抽象）
*   易于测试

**缺点：**

*   应该没有吧？

这里的常用方法是什么？**解决方案 #2**看起来不错吗？**你是怎么**做到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T05:10:16.357

我肯定会选择**解决方案#2**。正如您在上面演示的那样，您可能希望`UserNameField`在不是请求的类中使用，这使得`AbstractRequest`该类感觉像是一个稍差的选择。
创建一个类来避免重复代码并将所有逻辑放在同一个地方对我来说听起来是个好主意，而且一点也不矫枉过正。

**[添加解决方案 #3 后编辑]**
**解决方案 #3**看起来是**解决方案 #2**的一个非常好的变体。我真的无法决定我更喜欢哪一个，它们都很好地封装了逻辑。

# objective-c - 释放 UIViewController 作为属性

> ID：11425801
> 
> 赞同：0
> 
> 时间：2012-07-11T04:57:24.917
> 
> 标签：objective-c, ios, memory-management, memory-leaks

我在 iOS 应用程序中遇到了一个有趣的内存管理问题。

1.  我有一个属性，在发布使用时`[self.propertyName release];`会导致该属性被释放两次，并导致 iPad 1/iOS 4 设备（在属性的 dealloc 中）出现错误的内存访问异常。

2.  当此代码更改为`[_propertyName release];`（访问局部变量而不是属性）时，这将导致 iPad 3/iOS 5 上的泄漏。

**当然**，我可以通过检查操作系统版本来阻止这种情况发生，但我想了解我做错了什么。

更多细节：

该属性是 的子类`UIViewController`，拥有该属性的对象也是如此。我将属性添加`UIView`为子视图。我听说这不是一个好的做法，但我们正在其他地方这样做，没有内存问题。

测试用例是：

*   iPad 1、iOS 4.2 - 需要使用 ivar 发布`[_propertyName release]`

*   iPad 2、iOS 5.0 - 需要使用该属性发布`[self.propertyName release]`

*   iPad 3、iOS 5.1 - 需要使用该属性发布`[self.propertyName release]`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:08:13.293

将另一个 viewController 的视图添加为子视图必然会导致奇怪的问题，当您释放另一个 viewController 时，它的视图仍会被您的主视图保留，但它的 viewController 会消失。

也就是说，这`self.propertyName = nil`是释放属性的最佳方式，只需确保首先从主视图中删除了子视图。

# python - 如何在 django 视图中检查数据是否为“空”？

> ID：11425802
> 
> 赞同：6
> 
> 时间：2012-07-11T04:57:33.963
> 
> 标签：python, django, validation, view, null

在我看来，我有一个小验证要做，我必须检查从表单的数据字段（对于 which'null'=true）接收到的数据是否为空。目前我这样做了

```
if data_received == None :
                    "some task" 
```

我得到了我想要的。我的问题是这段代码是最优的还是有更好的方法来做同样的事情。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-11T05:06:56.043

这几乎和它会得到的一样好。您通常希望使用`is None`而不是`== None`仅以防万一左侧是已定义`==`为与 一起使用时表示特殊含义的类的实例`None`，但这在这里没什么大不了的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-19T07:19:23.853

**是 None**用于*== null* 并且 **不是 None**用于*!=null*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T05:13:06.287

这是我能想到的最好的方法。如果您从 SQL 服务器中提取可能在 Django 中为 Null 的数据，那么您在实际提取该数据时可能会遇到瓶颈。

# c# - 下载后启用计时器

> ID：11425804
> 
> 赞同：0
> 
> 时间：2012-07-11T04:58:10.653
> 
> 标签：c#, asp.net, download, ashx

这个问题可能会被问很多次。但是我没有找到一个确切的解决方案，这就是我问它的原因。

我们正在一个项目中工作，它有一个更新过程。有下载功能来下载exe。我们正在使用处理程序来下载文件。其代码如下

## .ashx

```
string filename = System.IO.Path.GetFileName(fileUrl);    
context.Response.ClearContent();
context.Response.ContentType = "application/exe";
context.Response.AddHeader("content-disposition", String.Format("attachment; filename={0}", filename));
context.Response.TransmitFile(fileUrl); 
```

因此，我们在单击按钮时调用此处理程序，例如：

## 点击事件

```
Response.Redirect("Test.ashx?fileUrl=" + downloadUrl, false); 
```

然后它下载文件。

现在我们的页面中有一个计时器。下载后我想启用那个计时器。下载后我该怎么做。当我将它放在重定向下方时，例如 Timer1.Enabled= true; 它不工作。谁能建议一种方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:28:20.177

在页面中使用 iframe 并将其 src 设置为另一个 .aspx 页面，然后将您的下载代码放在该 aspx 页面中。在设置 src 启用计时器之前或之后。

# javascript - 如何在不使用 javascript 在 asp.net 中重新加载页面的情况下刷新 APPLET？

> ID：11425805
> 
> 赞同：2
> 
> 时间：2012-07-11T04:58:17.507
> 
> 标签：javascript, asp.net, applet, refresh

我只想刷新一个小程序而不使用javascript在asp.net中重新加载整个页面。我尝试将此 行`document.applets.view.refresh()`保留在小程序代码中。`<param name='cache_option' value='no'>`在这两种情况下，我都失败了。谁能帮我这个。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T18:50:34.053

除非您有允许它的 cross-domain.xml，否则它将失败

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.macromedia.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
 <allow-access-from domain="*"/>
</cross-domain-policy> 
```

# javascript - 为什么我的 Javascript 代码不适用于 Macbook 上的 FF12，但适用于我的 Ubuntu 的 ff

> ID：11425808
> 
> 赞同：0
> 
> 时间：2012-07-11T04:58:48.590
> 
> 标签：javascript, jquery, osx-leopard

我知道我不是第一个遇到问题的人，但无法从谷歌搜索中获得线索。

这是我的代码：

```
$.get(
  "my.php", //xml file will be back
  function(data){

    var dataXml = data;

    var listV = dataXml.getElementsByTagName("ver");

    var html = "<tr>";
    html += "Version<select name='version' id='verList'>";
    //....get data from the xml file, codes was ignored for brief
    html += "</select>";
    html += "MacAddress <input id=\"macInput\" type=\"text\" name=\"MacInput\" />";
    html += "</tr>";

    $("#optionPanel").append(html);

    var sybutton = $('<button id="queryB" class="queryB"   type="submit">Submit</button>').click(function(){...}

    $("#optionPanel tr:last").append(sybutton); 
```

图片为：一个选择列表+Mac输入+一个提交查询的按钮。

这些代码在我的 Firefox 和 Ubuntu 上运行良好。但在 Macbook 的 FF 或 Safari 上，只显示按钮，而完全消失的选择列表和 Mac 输入则不显示。任何想法？提前致谢。

我在下面使用来获取 Javascript 和 JQuery。

```
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script> 
```

哦，我忘了一点。在 FF 的错误控制台中，我可以看到：

```
Error: installStatus is null
browser.js   Line: 10417 
```

我打开了文件，该行位于一个事件报告函数中，该函数试图报告“PluginNotFound”错误（？？？）。

JQuery 的 AJAX 正在工作，因为我在 Wireshark 中看到了流量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:47:31.147

只是一个猜测，因为只有一个非 jquery 纯 js 函数使用了变化

```
var listV = dataXml.getElementsByTagName("ver"); 
```

至

```
var listV = $(dataXml).find("ver"); 
```

# backbone.js - 如何在 Backbonejs 中清理视图和模型

> ID：11425809
> 
> 赞同：0
> 
> 时间：2012-07-11T04:58:49.293
> 
> 标签：backbone.js, backbone-events, backbone-views

```
 movieDb.Router  = Backbone.Router.extend({
        routes:{
            '':         'landPage',
            'home':     'landPage',
            'login':    'login',
            'signup':   'signup'
        },

        landPage: function(p){
            $('div#homepage').empty();
        },

        login:  function(p){
            new loginViews(); // Calls its own model                
        },

        signup: function(p){
            new signupViews(); // Calls its own model
        }
    }); 
```

问题是当来自注册和调用登录时，它还会同时调用以前的模型请求（注册）导致登录和注册请求（我的模型是 ajax 请求），我如何在每次创建时删除以前调用的模型在我看来是一个新的要求。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:22:55.750

我发现最简单的方法是使用 Backbone.Marionette [https://github.com/derickbailey/backbone.marionette](https://github.com/derickbailey/backbone.marionette) ，它允许您使用不同的区域来实现不同的功能。
如果你不想有另一个依赖，你可以手动做到这一点：http: [//lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/](http://lostechies.com/derickbailey/2011/09/15/zombies-run-managing-page-transitions-in-backbone-apps/)

但是，如果您看到一个模型上的 fetch 正在调用另一个模型上的 fetch，那么您可能有名称冲突，或者以某种方式导致第二次 fetch 的事件链。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T02:06:24.817

我只是想分享我是如何解决这个问题的。（非常基本的方法，不确定这是否是最佳实践，但它有效）

我用关闭功能扩展了视图

```
 Backbone.View.prototype.close = function () {
        this.unbind();
        this.undelegateEvents();
    }; 
```

并在我的路由器中创建了一个 showView 函数，每次我在我的视图中触发一个事件时都会调用它。

```
 showView: function (view) {
        //destroy current view
        if(this.currentView !== undefined) {
            this.currentView.close();
        }

        //create new view
        this.currentView = view;
        this.currentView.delegateEvents();

        return this.currentView;
     } 
```

然后在我的视图中调用该 showView 函数

```
 addMovie:   function(p){
        this.showView(this.movieForm('add'));               
    } 
```

# javascript - 如何在 javascript 对象中调用 jquery 事件？

> ID：11425810
> 
> 赞同：0
> 
> 时间：2012-07-11T04:58:50.433
> 
> 标签：javascript, jquery, object, methods

我对javascript对象真的很陌生。

这是我的代码：

```
(function(){
var homenavmenu = {
    nav:$('.navMenuButton'),
    target:$(this).attr('href'),
    test:function(){
        // alert(homenavmenu.target)
        homenavmenu.nav.click(function(){
            alert(1);
            return false;
        })
    }
}

homenavmenu.test();
})() 
```

为什么它不起作用？它不会`alert(1);`

这是我的 HTML：

```
<div class="navMenu">
  <a href="../market" class="navMenuButton" id="mo">market</a>
  <a href="../unit" class="navMenuButton" id="unit">my</a>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:04:15.327

**工作演示** [http://jsfiddle.net/5JmdD/3/](http://jsfiddle.net/5JmdD/3/)

请再次检查您的 html，演示正在处理您需要的内容。

行为：单击按钮，您将收到警报。

希望这可以帮助`:)`

**代码**

```
$(function(){
var homenavmenu = {
    nav:$('.navMenuButton'),
    target:$(this).attr('href'),
    test:function(){
        // alert(homenavmenu.target)
       homenavmenu.nav.click(function(){
            alert(1);
            return false;
        })
    }
}

homenavmenu.test();
})()​ 
```

**HTML**

```
<input type="button" value="hulk" class="navMenuButton" />​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T06:35:21.207

好的，您似乎无法使用

```
nav:$('.navMenuButton'), 
```

应该使用

```
nav:'.navMenuButton', 
```

调用为

```
$(homenavmenu.nav).click(function(){
   alert(1)
}) 
```

这对我有用，但我不知道为什么它在上面的示例中有效。

# scheme - 通过 eof-object 退出需要什么 x 值？方案

> ID：11425815
> 
> 赞同：0
> 
> 时间：2012-07-11T04:59:10.730
> 
> 标签：scheme, racket

```
(define (number-checker)
     (define userinput (read))
     (cond
        [(eof-object? userinput) print-fun)]
        [else
          (set!  tries (+ 1 userinput))
          (number-checker)])) 
```

如果我想退出程序，我必须写什么才能让程序进入打印乐趣？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T05:27:18.297

您的问题确实不是很清楚，但是如果您只是想问如何获得一个[`eof-object?`](http://docs.racket-lang.org/reference/port-ops.html#%28def._%28%28quote._~23~25kernel%29._eof-object~3f%29%29)满意的值，那么您可以使用[`eof`](http://docs.racket-lang.org/reference/port-ops.html#%28def._%28%28quote._~23~25kernel%29._eof%29%29).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T05:15:42.387

它不是为我编译的（使用 Racket）：

在修复错字之后：

![在此处输入图像描述](../Images/ec9e1c4b445c9a8dafe894b9ac6b7236.png)

如果我理解正确，它应该在“文件结尾”字符到达时从提示符和救助中读取用户输入。但是，这段代码肯定行不通。什么是`print-fun`？等等

**更新：**
工作代码是：

```
#lang racket
(define (number-checker)
     (define userinput (read))
     (define tries 'a)
     (cond
        [(eof-object? userinput) 'print-fun]
        [else
          (set!  tries (+ 1 userinput))
          (number-checker)])) 
```

它是这样工作的：

![在此处输入图像描述](../Images/f85a3662bbcb60d83a34617ee0f000eb.png)

**更新 2：** 另一个屏幕截图显示运行后出现的 eof 按钮`(number-checker)`：

![在此处输入图像描述](../Images/695de4f2932414025e7f45e125eef42b.png)

# c - 从 uint32/16_t 创建一个字符串，然后解析回原始数字

> ID：11425817
> 
> 赞同：0
> 
> 时间：2012-07-11T04:59:15.753
> 
> 标签：c, char, printf, scanf, uint32-t

我需要将一些 uint32_t 和 uint16_t 数字放入 char* 中。然后我需要将它们从缓冲区中取回。

我已经阅读了一些问题，并尝试使用 sprintf 将它们放入 char* 和 sscanf 再次获取原始数字。但是，我无法正确获取它们。

这是我的代码示例，只有 2 个数字。但我需要超过 2 个，这就是我使用 realloc 的原因。另外，我不知道如何正确使用 sprintf 和 sscanf 与 uint16_t

```
uint32_t gid = 1100;
uint32_t uid = 1000;
char* buffer = NULL;
uint32_t offset = 0;

buffer = realloc(buffer, sizeof(uint32_t));
sprintf(buffer, "%d", gid);
offset += sizeof(uint32_t);

buffer = realloc(buffer, sizeof(uint32_t) + sizeof(buffer));
sprintf(buffer+sizeof(uint32_t), "%d", uid);

uint32_t valorGID;
uint32_t valorUID;

sscanf(buffer, "%d", &valorGID);
buffer += sizeof(uint32_t);
sscanf(buffer, "%d", &valorUID);

printf("ValorGID %d ValorUID %d \n", valorGID, valorUID); 
```

我得到的是

```
ValorGID 11001000 ValorUID 1000 
```

我需要得到的是

```
ValorGID 1100 ValorUID 1000 
```

我是 C 的新手，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:05:51.000

格式说明符`'%d'`是 for `int`，因此对于`uint32_t`. 首先`uint32_t`是无符号类型，因此您至少应该使用`'%u'`，但它的宽度也可能与`int`or不同`unsigned`。标准中预见了宏：`PRIu32`for`printf`和`SCNu32`for `scanf`。举个例子：

```
sprintf(buffer, "%" PRIu32, gid); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T14:32:44.100

```
buffer = realloc(buffer, sizeof(uint32_t));
sprintf(buffer, "%d", gid);
offset += sizeof(uint32_t);

buffer = realloc(buffer, sizeof(uint32_t) + sizeof(buffer));
sprintf(buffer+sizeof(uint32_t), "%d", uid); 
```

这实际上没有意义，除非在幸运的情况下，否则不会按预期工作。

让我们假设通常`CHAR_BIT == 8`成立，所以`sizeof(uint32_t) == 4`. 此外，让我们假设它`int`是二进制补码表示的有符号 32 位整数，没有填充位。

`sprintf(buffer, "%d", gid)``gid`打印解释为`int`缓冲区的位模式的十进制字符串表示形式。在上述假设下，`gid`被解释为介于 -2147483648 和 2147483647 之间的数字。因此，十进制字符串表示可能包含 a `'-'`，包含 1 到 10 位数字和 0 终止符，总共使用 2 到 12 个字节。但是您只分配了四个字节，因此无论何时`999 < gid < 2^32-99`（带符号的二进制补码解释为`> 999`或`< -99`），`sprintf`写入超过分配的缓冲区大小。

那是未定义的行为。

它可能不会立即崩溃，因为分配四个字节通常会有效地为您提供更大的内存块（例如，如果`malloc`总是返回 16 字节对齐的块，则分配的四个字节后面的 12 个字节不能被程序的其他部分使用，但属于到程序的地址空间，写入它们可能不会被检测到）。但是当分配的块的末尾位于页面边界上时，它很容易崩溃。

此外，由于您将后续`sprintf`s 的写入偏移量提前四个字节，如果字符串表示（不包括 0 终止符）使用超过四个字节（而程序还没有由于写入而崩溃），则前一个数字的一​​部分将被覆盖到未分配的内存）。

线

```
buffer = realloc(buffer, sizeof(uint32_t) + sizeof(buffer)); 
```

包含更多错误。

1.  `buffer = realloc(buffer, new_size);`失去对分配内存的引用，如果`realloc`失败则导致泄漏。使用临时并检查是否成功

    ```
    char *temp = realloc(buffer, new_size);
    if (temp == NULL) {
        /* reallocation failed, recover or cleanup */
        free(buffer);
        exit(EXIT_FAILURE);
    }
    /* it worked */
    buffer = temp;
    /* temp = NULL; or let temp go out of scope */ 
    ```

2.  新分配的新大小`sizeof(uint32_t) + sizeof(buffer)`始终相同，`sizeof(uint32_t) + sizeof(char*)`. 这通常是 8 个或 12 个字节，因此在分配区域之外写入并不会导致崩溃或内存损坏（这可能会在很久以后导致崩溃）。

您**必须**跟踪分配给的字节数`buffer`并使用它来计算新大小。没有（便携式¹）方法可以确定从指针到其开始的分配内存块的大小。

* * *

现在的问题是您是否要在缓冲区中存储字符串表示形式或位模式。

存储字符串表示存在字符串表示的长度随值变化的问题。因此，您需要在数字表示之间包含分隔符，或者在必要时通过填充（使用空格或前导零）确保所有表示具有相同的长度。例如，这将像

```
#include <stdint.h>
#include <inttypes.h>

#define MAKESTR(x) # x
#define STR(x) MAKESTR(x)

/* A uint32_t can use 10 decimal digits, so let each field be 10 chars wide */
#define FIELD_WIDTH 10

uint32_t gid = 1100;
uint32_t uid = 1000;

size_t buf_size = 0, offset = 0;
char *buffer = NULL, *temp = NULL;
buffer = realloc(buffer, FIELD_WIDTH + 1); /* one for the '\0' */
if (buffer == NULL) {
    exit(EXIT_FAILURE);
}
buf_size = FIELD_WIDTH + 1;
sprintf(buffer, "%0" STR(FIELD_WIDTH) PRIu32, gid);
offset += FIELD_WIDTH;

temp = realloc(buffer, buf_size + FIELD_WIDTH);
if (temp == NULL) {
    free(buffer);
    exit(EXIT_FAILURE);
}
buffer = temp;
temp = NULL;
buf_size += FIELD_WIDTH;
sprintf(buffer + offset, "%0" STR(FIELD_WIDTH) PRIu32, uid);
offset += FIELD_WIDTH;
/* more */

uint32_t valorGID;
uint32_t valorUID;

/* rewind for scanning */
offset = 0;

sscanf(buffer + offset, "%" STR(FIELD_WIDTH) SCNu32, &valorGID);
offset += FIELD_WIDTH;
sscanf(buffer + offset, "%" STR(FIELD_WIDTH) SCNu32, &valorUID);

printf("ValorGID %u ValorUID %u \n", valorGID, valorUID); 
```

带有零填充的固定宽度字段。如果您宁愿使用分隔符而不是固定宽度，则所需长度和偏移量的计算会变得更加复杂，但除非数字很大，否则它将使用更少的空间。

如果您更愿意存储位模式，这将是最紧凑的存储方式，您可以使用类似

```
size_t buf_size = 0, offset = 0;
unsigned char *buffer = NULL, temp = NULL;
buffer = realloc(buffer, sizeof(uint32_t));
if (buffer == NULL) {
    exit(EXIT_FAILURE);
}
buf_size = sizeof(uint32_t);
for(size_t b = 0; b < sizeof(uint32_t); ++b) {
    buffer[offset + b] = (gid >> b*8) & 0xFF;
}
offset += sizeof(uint32_t);

temp = realloc(buffer, buf_size + sizeof(uint32_t));
if (temp == NULL) {
    free(buffer);
    exit(EXIT_FAILURE);
}
buffer = temp;
temp = NULL;
buf_size += sizeof(uint32_t);
for(size_t b = 0; b < sizeof(uint32_t); ++b) {
    buffer[offset + b] = (uid >> b*8) & 0xFF;
}
offset += sizeof(uint32_t);

/* And for reading the values */
uint32_t valorGID, valorUID;

/* rewind */
offset = 0;
valorGID = 0;
for(size_t b = 0; b < sizeof(uint32_t); ++b) {
    valorGID |= buffer[offset + b] << b*8;
}
offset += sizeof(uint32_t);
valorUID = 0;
for(size_t b = 0; b < sizeof(uint32_t); ++b) {
    valorUID |= buffer[offset + b] << b*8;
}
offset += sizeof(uint32_t); 
```

* * *

¹如果您知道`malloc`等在您的实施中是如何工作的，则可以从`malloc`的簿记数据中找到大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T15:39:27.717

sprintf 返回的表示是一个 char*。如果您尝试将整数数组存储为其字符串表示形式，那么您的基本数据类型是 char**。如果我们只存储字符串数据本身，这是一个参差不齐的 char 矩阵，但是由于 a`uint32_t`可以产生的最长字符串是 10 个字符，加上一个用于终止 null 的字符，因此预先分配这么多字节来保存每个字符串是有意义的。

因此，要将数组 a 中的 n uint32_t 作为字符串存储在数组 s 中：

```
const size_t kMaxIntLen=11;

uint32_t *a,b;
// fill a somehow
...

size_t n,i;
char **s.*d;

if((d=(char*)malloc(n*kMaxIntLen))==NULL)
   // error!
if((s=(char**)malloc(n*sizeof(char*)))==NULL)
   // error!
for(i=0;i<n;i++)
    {
    s[i]=d+i; // this is incremented by sizeof(char*) each iteration
    snprintf(s[i],kMaxIntLen,"%u",a[i]); // snprintf to be safe
    } 
```

现在第 i 个数字在 s[i] 处，因此打印它 is just `printf("%s",s[i]);`，并将其作为整数检索到`b`is 中`sscanf(s[i],"%u",&b);`。

后续的内存管理有点棘手。与其不断使用 using`realloc()`来增加缓冲区，不如预先分配一块内存并仅在用尽时更改它。如果`realloc()`失败，它会返回`NULL`，所以在调用它之前存储一个指向主缓冲区的指针，这样你就不会丢失对数据的引用。首先`d`重新分配缓冲区 - 再次为更多字符串分配足够的空间 - 然后如果成功，请查看是否`d`已更改。如果是这样，请销毁（`free()`）`s`缓冲区，`malloc()`然后再次重建索引（您必须这样做，因为如果`d`更改了所有索引，则所有索引都已过时）。如果不，`realloc()` `s`并修复新的索引。我建议将整个事情包装在一个结构中并有一组例程对其进行操作，例如：

```
typedef struct StringArray
{
char **strArray;
char *data;
size_t nStrings;
} StringArray; 
```

这是很多工作。你*必须*使用C吗？作为 C++ STL`vector<string>`或`list<string>`使用`istringstream`类和`push_back()`容器方法，这要容易得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T05:25:07.533

```
uint32_t gid = 1100;
uint32_t uid = 1000;
char* buffer = NULL;
uint32_t offset = 0;

buffer = realloc(buffer, sizeof(uint32_t));
sprintf(buffer, "%d", gid);
offset += sizeof(uint32_t);

buffer = realloc(buffer, sizeof(uint32_t) + sizeof(buffer));
sprintf(buffer+sizeof(uint32_t), "%d", uid);

uint32_t valorGID;
uint32_t valorUID;

sscanf(buffer, "%4d", &valorGID);
buffer += sizeof(uint32_t);
sscanf(buffer, "%d", &valorUID);

printf("ValorGID %d ValorUID %d \n", valorGID, valorUID); 
```

`

我认为这可能会解决问题！

# jquery-mobile - 使用 jQuery Mobile 禁用硬件返回功能

> ID：11425820
> 
> 赞同：1
> 
> 时间：2012-07-11T04:59:46.910
> 
> 标签：jquery-mobile

我正在寻找一种方法来禁用后退按钮（Android 上的硬件，iPhone 上的软件），或将用户重定向到不同的页面（然后是之前的页面）。

我这样做的原因不是出于邪恶的目的或任何事情。我正在开发一款考试软件。用户回答考试/调查/测验中的所有问题，提交表单，然后被带到一个页面以查看反馈。目前，如果他们点击硬件后退按钮，他们会看到提示数据已经提交的警告框，但他们仍然可以点击 OK 并被带回考试并重新提交，从而重新提交相同的结果或更改他们的答案并重新提交。

我正在寻找一种禁用此功能的方法，可以通过某种方式禁用后退按钮，或者将用户重定向到新页面。

有关该应用程序的一些信息。未使用 Ajax 提交考试表格。整个应用程序是一个 URL，无论您在哪个页面，URL 始终相同。通过重新加载该 URL，您将被带到登录页面（这是完全可以接受的）。

我已经研究过 HTML5 History 功能，但由于它在较新版本的 Android 中缺乏支持，我无法使用它。我需要可以在 Android、iPhone 和最好是 Windows Phone 7 上运行的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T15:38:27.130

没有真正的方法禁用黑莓或 Android 上的硬件*后退按钮。*

您可以做的是维护一个会话变量，该变量在您的*后台*`pagebeforeshow`处理程序中无效，并在考试页面的事件中检查该会话变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-04T00:21:13.913

与问题稍微相关的是，如果您将 jQuery Mobile 与[Cordova](https://en.wikipedia.org/wiki/Apache_Cordova) / [PhoneGap](https://en.wikipedia.org/wiki/Apache_Cordova)一起使用，您可以监听一个名为“backbutton”的事件。确保在“deviceready”之后绑定它。

下面的例子：

```
document.addEventListener("backbutton", function (e) {
    e.preventDefault();
}, false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T13:39:55.970

您应该能够使用 JavaScript 捕获硬件后退按钮单击事件：

```
$(document).bind('keydown', function(event) {

  if (event.keyCode == 27) { // 27 = 'Escape' keyCode (back button)
    event.preventDefault();
  }
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-07-11T05:06:33.243

要在 jQuery Mobile 中禁用*后退*按钮，请在页面的标题 div 中包含 data-backbtn="false"。

您可以在[http://jquerymobile.com/demos/1.0a3/#docs/toolbars/docs-headers.html上进行相同的测试](http://jquerymobile.com/demos/1.0a3/#docs/toolbars/docs-headers.html)

为了修改功能，您可以使用以下内容：

```
<a href="/#default" data-icon="back"> 
```

这将每次将您重定向到默认页面。

# matlab - MATLAB - 如何计算函数调用的次数

> ID：11425821
> 
> 赞同：0
> 
> 时间：2012-07-11T04:59:48.130
> 
> 标签：matlab

目前我正在对 Secant Method 编写代码，到目前为止代码运行正常。但是，我仍然需要通过计算我在“割线”函数中使用的函数调用次数来更新我的“count.funcCount”。我应该如何修改我的代码？

这是我到目前为止的代码：

```
function [ root, fcneval, count ] = secant(f, x0, x1, my_options)
my_options = optimset('MaxIter', 50, 'TolFun', 1.0e-5);
count = struct('iterations',0,'funcCount',0,'message',{'empty'});
xp = x0; %# Initialize xp and xc to match with
xc = x1; %# x0 and x1, respectively
MaxIter = 100;
TolFun = 1.0e-5;

%# Secant Method Loop
for i = 2:MaxIter 
    fd = f(xc) - f(xp); %# Together, the ratio of d and fd yields
    d = xc - xp; %# the slope of the secant line going through xc and xp
     xn = ((xc * fd) - (f(xc) * d)) / fd; %# Secant Method step

    if (abs(xc - xn) < TolFun) && (abs(f(xn)) < TolFun) %# Stopping condition
        break;
    elseif i > MaxIter  %# If still can't find a root after maximum
                        %# 100 iterations, consider not converge
        count.message = sprintf('Do not converge');
    end

    xp = xc; % Update variables xc and xp
    xc = xn;
end 

%# Get outputs:
root = xn;
fcneval = f(root);
count.iterations = i;
end %# end function

---------------------------------------
function [f] = fun(x)
f = cos(x) + x;
end 
```

请帮助我，提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:44:32.927

虽然我不明白你的问题，但我仍然认为你可以使用计数器。将其初始化为零并在每次调用函数时递增。您正在使用内置函数，只需对其源代码进行必要的更改（仅供参考：您可以在 matlab 中执行此操作）然后用新名称保存它，然后在您的主代码中使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T15:34:34.980

您可以创建一个嵌套函数，该函数可以访问其父函数的变量（包括函数`f`和计数器`count.funcCount`）。该函数将调用执行计算的实际方法，然后递增计数器。

这是一个相当愚蠢的例子来说明这个概念：

```
function [output,count] = myAlgorithm(f, x0)
    count = 0;
    output = x0;
    while rand()<0.99         %# simulate a long loop
        output = output + fcn(x0);
    end

    %# nested function with closure
    function y = fcn(x)
        %# access `f` and `count` inside the parent function
        y = f(x);             %# call the function
        count = count + 1;    %# increment counter
    end
end 
```

现在您将其称为：

```
[output,count] = myAlgorithm(@(x)cos(x)+x, 1) 
```

# sharepoint - 如何从 SharePoint 2010 中的子网站访问列表

> ID：11425824
> 
> 赞同：0
> 
> 时间：2012-07-11T04:59:54.503
> 
> 标签：sharepoint, sharepoint-2010

我创建了一个名为*Application Test*的站点。在这个站点中，我再次创建一个名为*Sub Application*的子站点。

`"http://SP2010:2222/"`我在 Visual Studio Project Project Scope 中添加站点 url是站点。现在，当我尝试从子站点（*子应用程序）访问列表（* *TestList* ）时，它会给出错误列表不存在。以下代码访问列表（*TestList*）：

 **```
using (SPSite sites = new SPSite(SPContext.Current.Site.Url))
        {
            using (SPWeb web = sites.OpenWeb())
            {
              SPList CurrentList = web.Lists["TestList"]; // Error comes here
            }
        } 
```

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T07:02:52.957

尝试这个，

```
using (SPSite sites = new SPSite(SPContext.Current.Site.Url))
 {
    using (SPWeb web = sites.OpenWeb())
       {
          SPWebCollection subsites= web.GetSubwebsForCurrentUser(); //get subsites
           for (int i= 0; i< subsites.Count; i++)
              {
                SPWeb subSiteWeb= subsites[i];

                   SPList CurrentList = subSiteWeb.Lists["TestList"];
                   if (CurrentList != null)
                   break;       
               }                  
        }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:04:45.220

那么`SPContext.Current.Site`，您将*事物*部署到的当前站点是什么——不管它是什么。但是，当您不`sites.OpenWeb()`带任何参数进行操作时`RootWeb`，如果根网站没有您的列表，您将不会在那里找到它。

尝试使用各自的 URL 显式打开 Web 和站点，例如`http://SP2010:2222/`**

# java - Java 属性配置

> ID：11425825
> 
> 赞同：0
> 
> 时间：2012-07-11T05:00:01.823
> 
> 标签：java

我将项目构建为 exe 文件，当我运行 exe 文件时出现错误：

```
java.lang.ClassNotFoundException: org.apache.commons.configuration.PropertiesConfiguration. 
```

你能告诉我为什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:25:45.603

您的类路径中缺少公共配置 jar 文件。请确保所需的 jar 在类路径中并再次重新部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T05:26:45.430

您是否将所需的库包含到您的 exe 文件中？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T05:35:22.480

尝试以下操作：

1.  创建一个包含所有您需要的库的文件夹
2.  在 shell ( `cmd.exe`) 中运行：`set CLASSPATH=%CLASSPATH%;<path to libraries folder>`
3.  运行你的可执行文件

*hth*

# c# - 如何使用 C# 和 Linq 拆分字符串

> ID：11425826
> 
> 赞同：0
> 
> 时间：2012-07-11T05:00:11.527
> 
> 标签：c#, linq, split, .net

我想拆分表 Set 中的成员之类的字符串，并选择带有其他字段的结果作为记录。

例如，假设 Set 有 2 个字段`(ID, Members)`和 2 个记录：`(1, "A, B")`和`(2, "C")`.

现在我需要一个 Linq 查询来检索记录：`(1, A), (1, B), (2,C)`.

我正在使用 Visual Studio 2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:09:32.597

LINQ-to-SQL 不会这样做，但您可以使用 LINQ-to-SQL 检索此数据，然后直接对其运行 LINQ。

```
List<Set> sets;
using (var context = new MyDataContext())
{
    sets = context.Sets.ToList();
}

var result = sets.SelectMany(s => 
    s.Members.Split(',').Select(m => new { s.ID, m })); 
```

# django - 如何为外键中的特定字段指定默认的外部字段值？

> ID：11425827
> 
> 赞同：1
> 
> 时间：2012-07-11T05:00:17.033
> 
> 标签：django, django-models

我希望 ForeignKey 的每个实例都有不同的默认值，具体取决于它在父模型中的属性。

一个插图可能会更清楚地说明这一点：

```
class Day(models.Model):
    date = models.DateField(unique=True)
    manager_shift = models.ForeignKey('Shift') # Shift.shift_type should be "M"
    lead_shift = models.ForeignKey('Shift') # Shift.shift_type should be "L"
    early_day_shift = models.ForeignKey('Shift') # Shift.shift_type should be "ED"
    late_day_shift = models.ForeignKey('Shift') # Shift.shift_type should be "LD"
    swing_shift = models.ForeignKey('Shift') # Shift.shift_type should be "SW"
    early_evening_shift = models.ForeignKey('Shift') # Shift.shift_type should be "EM"
    late_evening_shift = models.ForeignKey('Shift') # Shift.shift_type should be "LM"

class Shift(models.Model):
    user = models.ForeignKey('User', limit_choices_to={'is_staff': True}, blank=False)
    shift_type = models.CharField(max_length=2, choices=SHIFT_TYPE_CHOICES, blank=False) 

SHIFT_TYPE_CHOICES = { 
    ('M', 'Manager'),
    ('L', 'Lead'),
    ('ED', 'Early Day'),
    ('LD', 'Early Day'),
    ('SW', 'Swing'),
    ('EM', 'Early Evening'),
    ('LM', 'Late Evening'),
} 
```

在这种情况下，

所以在做的时候：

```
Day.manager_shift = Shift() 
```

Day.manager_shift.shift_type 应该自动为“M”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:10:02.850

我不相信有任何内置的方法可以做到这一点，也不应该有。如果你这样做会发生什么：

```
>>> my_shift = Shift()
>>> Day.manager_shift = my_shift
>>> Day.lead_shift = my_shift
>>> my_shift.shift_type
??? 
```

更好的选择是覆盖检查保存对象的每个字段的`save`方法，`Day`并且：a）如果没有`shift_type`，则添加正确的；b）如果有一个轮班时间，但是一个错误的，提出一个错误（不是最干净的解决方案，但我不知道有什么更好的方法）。

**更新：**我刚刚[读到](http://djangodays.com/2009/05/11/django-foreign-key-default-value-example/)（*编辑：*和 Rohan 也指出）你**可以**给 a 默认值`ForeignKey`，但你应该以函数的形式这样做：

```
def default_type(type):
    temp = [type] # Necessary because Python can't handle closures properly sometimes
    def closure():
        return Shift.objects.get(shift_type=temp[0])
    return closure

class Day(models.Model):
    date = models.DateField(unique=True)
    manager_shift = models.ForeignKey('Shift', default=default_type('M')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T05:12:58.823

您可以将默认值设为可调用，因此您可以这样做：

```
def get_m_shift():
    return Shift.objects.get(shitf_type='M')

    class Day(models.Model):
        date = models.DateField(unique=True)
        manager_shift = models.ForeignKey('Shift', default=get_m_shift) 
```

我认为您必须编写函数来获取每种班次类型。我不确定默认的可调用参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T05:27:09.670

为什么你有一个单独的“Day”模型？

```
SHIFT_TYPE_CHOICES = { 
    ('M', 'Manager'),
    ('L', 'Lead'),
    ('ED', 'Early Day'),
    ('LD', 'Early Day'),
    ('SW', 'Swing'),
    ('EM', 'Early Evening'),
    ('LM', 'Late Evening'),
}

class Shift(models.Model):
    user = models.ForeignKey('User',
                             limit_choices_to={'is_staff': True},
                             blank=False)
    shift_type = models.CharField(max_length=2,
                                  choices=SHIFT_TYPE_CHOICES,
                                  blank=False) 
    shift_date = models.DateField()

    class Meta:
        unique_together = (('shift_date','shift_user','shift_type'),) 
```

这将防止同一用户在同一日期重复轮班，并且只有轮班类型和用户的一种组合。您可以根据需要进行调整。因此，如果您需要在同一日期进行多次轮班，请删除`shift_date`. 的[文档`unique_together`](https://docs.djangoproject.com/en/dev/ref/models/options/#unique-together)解释了这是如何工作的。

现在，要找出在特定日期谁是经理：

```
for s in Shift.objects.filter(shift_type='M',
                              shift_date=datetime.datetime.today()):
    print s.user 
```

或者打印整个花名册：

```
for s in Shift.objects.filter(shift_date=datetime.datetime.today()):
    print "%s: %s\n" % (s.get_shift_type_display(),s.user) 
```

# javascript - jQuery函数：为什么第一个事件的完成延迟到第二个事件完成？

> ID：11425829
> 
> 赞同：1
> 
> 时间：2012-07-11T05:00:42.227
> 
> 标签：javascript, jquery, function, timing

这一直困扰着我很长时间，所以我创建了一个测试[jsFiddle](http://jsfiddle.net/Pbgz3/1/)来说明这种情况。

代码如下：

```
$('#test').on('click', function() {
    $(this).css('background', 'red');
    for (var i = 1; i < 100000; i++) {
        var el = document.createElement("div");
        el.innerHTML = "Another";
        document.getElementById("container").appendChild(el);
    }
}); 
```

现在，我会认为应该先改变背景颜色，然后开始创建孩子。`for`但是，直到循环完成后，颜色才会改变。

`setTimeout`但是，如果您使用延迟代替`for`循环，则情况并非如此。

```
var timeoutID = window.setTimeout(function () {
    $('#test').css('background', 'blue');
}, 2000); 
```

在这种`setTimeout`情况下，您会看到瞬时红色，然后在 2 秒后看到蓝色。编辑：这是第二种情况的[小提琴](http://jsfiddle.net/vWBNQ/)。

为什么我的第一个小提琴会做它做的事情？它适用于许多其他情况，尤其是关于 AJAX。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T05:16:28.097

在整个函数执行之前，浏览器不会触发重绘。

您可以在调用 for 循环之前重新绘制它，方法是将 for 包装在一个超时为零的 setTimeout 中，如下所示：

```
$('#test').on('click', function() {
  $(this).css('background', 'red');
  setTimeout(function(){
    for (var i = 1; i < 100000; i++) {
        var el = document.createElement("div");
        el.innerHTML = "Another";
        document.getElementById("container").appendChild(el);
    }
  }, 0);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T05:24:02.797

您在 javascript 中只有 1 个主线程。

循环阻止一切发生，例如排队`setTimeouts()`或背景重绘。

不同之处在于，`setTimeout()`不需要大量计算，因为它只是一个堆栈，因此您的 100,000 次迭代循环完成得更快，并允许执行下一个排队的函数（在本例中为重绘）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T05:16:26.807

我尝试过对其进行简单修改[http://jsfiddle.net/Pbgz3/12/](http://jsfiddle.net/Pbgz3/12/)。颜色确实在循环运行之前发生了变化。检查我是否减少了循环迭代。

# c# - 使用 <%= %> 时的不同输出

> ID：11425831
> 
> 赞同：0
> 
> 时间：2012-07-11T05:01:16.080
> 
> 标签：c#, asp.net, css

为了获得完全合格的应用程序路径，我编写了一个函数：

```
 public class Generic
    {
        public static string FullyQualifiedApplicationPath
        {
            get
            {
                //Return variable declaration
                string appPath = string.Empty;

                //Getting the current context of HTTP request
                var context = HttpContext.Current;

                //Checking the current context content
                if (context != null)
                {
                    //Formatting the fully qualified website url/name
                    appPath = string.Format("{0}://{1}{2}{3}",
                                            context.Request.Url.Scheme,
                                            context.Request.Url.Host,
                                            context.Request.Url.Port == 80
                                                ? string.Empty
                                                : ":" + context.Request.Url.Port,
                                            context.Request.ApplicationPath);
                }

                if (appPath.EndsWith("/"))
                    appPath = appPath.Substring(0, appPath.Length - 1);

                return appPath;
            }
        }

    } 
```

当我在`<head>`标签中使用它时，`<%=%>`我得到不同的输出。

```
<link href="<%= Generic.FullyQualifiedApplicationPath %>/Styles/StyleSheet.css" rel="stylesheet" type="text/css" />
<script src="<%= Generic.FullyQualifiedApplicationPath %>/Scripts/jquery-1.7.2.min.js" type="text/javascript"></script> 
```

html输出：

```
<link href="&lt;%= Generic.FullyQualifiedApplicationPath %>/Styles/StyleSheet.css" rel="stylesheet" type="text/css" />
<script src="http://localhost:2093/SourceOne/Scripts/jquery-1.7.2.min.js" type="text/javascript"></script> 
```

只是徘徊为什么asp.net引擎发送`&lt;%= Generic.FullyQualifiedApplicationPath %>`给客户端。

--新泽西州

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:06:52.027

ASP.NET 基本上将您的内联评估视为字符串文字并将其转义。您可以尝试使用数据绑定语法 <%# %>

```
<link runat="server" id="lnkStyle" href='<%# Generic.FullyQualifiedApplicationPath   + "/Styles/StyleSheet.css"%>' rel="stylesheet" type="text/css" />
<script runat="server" id="scptJQuery" src='<%# Generic.FullyQualifiedApplicationPath + "/Scripts/jquery-1.7.2.min.js"%>' type="text/javascript"></script> 
```

然后在你后面的代码中，重写 OnPreRender，并放入以下逻辑

```
lnkStyle.DataBind();
scptJQuery.DataBind(); 
```

重要的是绑定语法不与其他文字混合，否则 ASP.NET 会将整个属性视为字符串文字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T05:07:56.773

这是因为在 head 标签中 Link 被视为服务器控件，并且在服务器控件中 hreaf 自动解码。

您可以检查`a`标签上的添加 runat 属性

```
<a runat="server" href='<%= Generic.FullyQualifiedApplicationPath %>/Styles/StyleSheet.css'></a> 
```

输出将是

```
<a href="&lt;%= Generic.FullyQualifiedApplicationPath %>/Styles/StyleSheet.css" ></a> 
```

我认为解决方案是从后面的代码中传递 href

```
<link rel="stylesheet" type="text/css" runat="server" id="mystyle" /> 
```

在后面的代码中

```
mystyle.Href= Generic.FullyQualifiedApplicationPath + "/Styles/StyleSheet.css"; 
```

# android - android中的数据库查询

> ID：11425832
> 
> 赞同：0
> 
> 时间：2012-07-11T05:01:18.857
> 
> 标签：android, database

在我的应用程序中，我必须从数据库中检索数据以显示在列表视图中。我的要求是我必须从数据库中检索数据，其中“组”作为家庭，“类别”作为收入。

我的查询如下：

```
public Cursor gethouseholdTitle(String  grps) throws SQLException
{
Cursor mCursor =
db.query(true, DATABASE_TABLE, new String[] 
{
KEY_ROWID,
KEY_INCOME,
KEY_DESC,
KEY_QUANTITY,
KEY_TOTAL,
KEY_CATEGORY,
KEY_RECURR,
KEY_DATE,
KEY_GROUP
//KEY_PUBLISHER
},
KEY_GROUP + "=" + grps,
KEY_CATEGORY + "=" + "'Income'",
null,
null,
null,
null,
null
);
if (mCursor != null) {
mCursor.moveToFirst();
}
return mCursor;
} 
```

但它显示错误：

```
The method query(boolean, String, String[], String, String[], String, String, String, String) in the type SQLiteDatabase is not applicable for the arguments (boolean, String, String[], 
 String, String, null, null, null, null, null). 
```

作为我的新手，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:30:38.313

看逻辑，好像你需要改变

```
 KEY_GROUP + "=" + grps, KEY_CATEGORY + "=" + "'Income'", 
```

至

```
 KEY_GROUP + "=" + grps + " and " + KEY_CATEGORY + "=" + "'Income'", 
```

希望这可以帮助...

# iphone - 检查用户是否在 iPhone 上使用图形 API 登录 Facebook

> ID：11425838
> 
> 赞同：0
> 
> 时间：2012-07-11T05:02:24.917
> 
> 标签：iphone, facebook

我正在使用 iPhone 的 Facebook 图形 API 制作反馈表。当用户给出反馈时，我们想检查用户是否已经登录 Facebook。

请任何人都可以提供帮助。

```
- (IBAction)submit:(id)sender {
    // This button pressed method check that user is already login or not 
} 
```

请帮忙。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:14:28.230

您可以通过在 Appdelegate.m 文件中编写以下代码来检查 fb 会话：

```
 - (void)applicationWillEnterForeground:(UIApplication *)application
    {
        /*
         Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
         */
        [self performSelector:@selector(checkingFBsession) withObject:nil afterDelay:1.0];

    }

-(void)checkingFBsession
{
   self.successfb= [[self facebook] isSessionValid];
    NSString *str = [[NSUserDefaults standardUserDefaults]objectForKey:@"access_token"];
    [str retain];
    NSLog(@"%@",str);
    if (self.successfb || str) {
        NSLog(@"session is valid !");

        accessToken=self.facebook.accessToken;
        [[NSUserDefaults standardUserDefaults]setObject:accessToken forKey:@"access_token"];
        [[NSUserDefaults standardUserDefaults]synchronize];

        accessToken = nil;
        accessToken = [[NSUserDefaults standardUserDefaults] objectForKey:@"access_token"];
      [accessToken retain];
        NSLog(@"at%@",accessToken);
        NSURL *url = [NSURL URLWithString:@"https://graph.facebook.com/me/feed"];
        ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
        [request setDelegate:self];
        [request addPostValue:[[NSUserDefaults standardUserDefaults]objectForKey:@"access_token"] forKey:@"access_token"];

        //    [request addPostValue:@"123456" forKey:@"telephone"];
        [request startAsynchronous];
        }

} 
```

# java - 如何在java程序中添加.class？

> ID：11425842
> 
> 赞同：-2
> 
> 时间：2012-07-11T05:02:47.970
> 
> 标签：java, json, class, jackson

如何`Animal.class`在这个类中添加。它在 Eclipse 上给出了编译时错误。

点击时

```
mapper.readValue(jsonInput, Animal.class); 
```

eclipse 要求配置构建你的路径。如何在 test2 包中做到这一点，我拥有所有课程。

```
import org.codehaus.jackson.map.ObjectMapper;
import test2.*;
    public class Foo
    {
      static String jsonInput = 
          "{\"type\":\"dog\",\"name\":\"Spike\"}";

      public static void main(String[] args) throws Exception
      {
        ObjectMapper mapper = new ObjectMapper();
        Animal animal = mapper.readValue(jsonInput, Animal.class);
        System.out.println(mapper.writeValueAsString(animal));
      }
    }

class Animal  
{  
  public String type;  
  public String name;  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:27:53.373

首先，确保您正确导入了杰克逊的映射器。（成功编译一个`new ObjectMapper()`）

尝试将 Animal 定义到一个单独的 .java 文件中，然后映射器也应该了解您想要做什么。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T05:30:12.913

您正在使用 ObjectMapper ，它不在 jdk 中。为了使用这个添加依赖 jar，在你的情况下**依赖可能会丢失**

如果使用 maven 项目在 pom.xml 中添加以下条目

```
<dependency>
   <groupId>org.codehaus.jackson</groupId>
   <artifactId>jackson-mapper-asl</artifactId>
   <version>0.9.7</version>
</dependency> 
```

或从 [jackson-mapper-asl Link](http://repo1.maven.org/maven2/org/codehaus/jackson/jackson-mapper-asl/0.9.7/jackson-mapper-asl-0.9.7.jar)和[Jackson0.7 jar Link下载 jar](http://mirrors.ibiblio.org/pub/mirrors/maven2/org/jvnet/hudson/jackson/jackson/0.7/jackson-0.7.jar)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-07-11T05:06:58.510

你为什么不尝试[导入](http://docs.oracle.com/cd/E13226_01/workshop/docs81/pdf/files/workshop/JavaKeywordReference.pdf)“动物”类。

# javascript - 警告框中的选项卡“\ t”不适用于 Chrome

> ID：11425843
> 
> 赞同：10
> 
> 时间：2012-07-11T05:03:02.723
> 
> 标签：javascript

我想在 Javascript 警告框中显示三行文本，文本居中对齐。

我为此使用以下代码，

```
alert(
    '\t\t\t\t'+"Congratulations!" + '\n\t' +
    "You are now subscribed with test.com!" + '\n' +
    "Keep on eye out on your inbox for future updates from us!"
); 
```

它在 Firefox 上运行良好。但在 chrome 中，制表符 ( `\t`) 字符不起作用。文本在所有行中左对齐。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T05:06:05.560

可悲的是，似乎已经有一段时间了：（

[http://productforums.google.com/forum/#!topic/chrome/bfmvqAvtSd4](http://productforums.google.com/forum/#!topic/chrome/bfmvqAvtSd4)

发现了它，它看起来像是不可能的。

也许使用一些在外观上模仿警报框的东西？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-07T04:18:56.690

作为一种解决方法，您可以改用多个空格。例如..

```
<script>
    alert('Food:\n   Apples\n   Bread\n   Carrots');
</script> 
```

一个工作示例：

```
$(function(){
  $('#btnShowAlert').on('click', function(){
    alert('Food:\n   Apples\n   Bread\n   Carrots');
  });
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<button id="btnShowAlert">Show Alert</button>
```

# java - CardLayout.show() 不工作

> ID：11425858
> 
> 赞同：2
> 
> 时间：2012-07-11T05:05:44.210
> 
> 标签：java, swing, cardlayout

我正在尝试使用 CardLayout 使主面板（即其他所有内容所在的面板）显示不同的面板（默认面板是用户可以浏览产品的位置），以便用户可以查看他们的购物车和查看。我相信我应该设置 ButtonListener 和所有东西，但是 CardLayout.show 方法仍然没有做它的事情。有什么我想念的吗？

感谢您的任何帮助。

*   mainPanel - 主面板。一切最终都依附于它
*   cartPanel - 结帐按钮应该显示的面板
*   orderingPanel - 用户可以浏览产品的面板。infoPanel 和 -invntryPanel 附加到它
*   infoPanel - 根据 JList candyList 中的选择而更改的面板
*   invntryPanel - 包含 candyList 的面板

资源：

```
import javax.swing.*;
import java.util.*;
import java.awt.*;
import java.awt.event.*;
import javax.swing.event.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.*;
import javax.imageio.*;
import java.text.NumberFormat;

public class ClientApp extends JFrame
{
    public static void main(String[] args)
    {
        new ClientApp();
    }

    private JButton switchCard;
    private JPanel infoPanel;
    private JPanel mainPanel;
    private JPanel cartPanel;
    private JPanel orderingPanel;
    private JList candyList;
    private CardLayout cl = new CardLayout();
    private JPanel checkoutPanel;
    private JButton checkoutButton;
    private JTextField acidPopsTF;
    private JTextField bertieBottsTF;
    private JTextField bloodPopsTF;
    private JTextField cauldronCakesTF;
    private JTextField charmChocTF;
    private JTextField chocoballsTF;
    private JTextField chocCauldronsTF;
    private JTextField chocFrogsTF;
    private JTextField chocWandsTF;
    private JTextField roachClustersTF;
    private JTextField crystalPineappleTF;
    private JTextField droobleGumTF;
    private JTextField explodeBonbonsTF;
    private JTextField fizzWhizTF;
    private JTextField iceMiceTF;
    private JTextField jellySlugsTF;
    private JTextField liquorWandsTF;
    private JTextField pepImpsTF;
    private JTextField pinkCocoIceTF;
    private JTextField spindleSpidersTF;
    private JTextField sugarQuillsTF;
    private JTextField wizochocTF;
    private JTextField shockChocTF;
    private ArrayList cart;
    private Object[] cartArray;

    public ClientApp()
    {
        this.setSize(750,400);
        this.setTitle("Honeydukes Muggle Ordering System");
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        ButtonListener bl = new ButtonListener();

        mainPanel = new JPanel(cl);
        cartPanel = new JPanel();
        orderingPanel = new JPanel(new BorderLayout());
        infoPanel = new JPanel(cl);
        JPanel invntryPanel = new JPanel(new BorderLayout());
        checkoutPanel = new JPanel(new BorderLayout());

        //Creating the array for the invntryPanel Jlist

        String[] candy = {"Acid Pops", "Bertie Bott's Every Flavour Beans",
                          "Blood-flavoured Lollipops",
                          "Cauldron Cakes", "Charm Choc",
                          "Chocoballs", "Chocolate Cauldrons",
                          "Chocolate Frogs","Chocolate Wands",
                          "Cockroach Clusters", "Crystallised Pineapple",
                          "Drooble's Best Blowing Gum", "Exploding Bonbons",
                          "Fizzing Whizbees", "Ice Mice",
                          "Jelly Slugs", "Liquourice Wands",
                          "Pepper Imps", "Pink Coconut Ice",
                          "Shock-o-Choc", "Splindle's Lick'O'Rish Spiders",
                          "Sugar Quills", "Wizochoc"};
        candyList = new JList(candy);
        candyList.setVisibleRowCount(18);
        candyList.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);

        //Creating a scrollpane for the JList
        JScrollPane scroll = new JScrollPane(candyList, JScrollPane.VERTICAL_SCROLLBAR_ALWAYS,
                                             JScrollPane.HORIZONTAL_SCROLLBAR_AS_NEEDED);
        invntryPanel.add(scroll);

        switchCard = new JButton("View Product");
        switchCard.addActionListener(bl);
        invntryPanel.add(switchCard, BorderLayout.PAGE_END);

        //Creating the cards
        JPanel startCard = new JPanel(new BorderLayout());
        JPanel acidPopsCard = new JPanel(new BorderLayout());
        JPanel bertieBottsCard = new JPanel(new BorderLayout());
        JPanel bloodPopsCard = new JPanel(new BorderLayout());
        JPanel cauldronCakesCard = new JPanel(new BorderLayout());
        JPanel charmChocCard = new JPanel(new BorderLayout());
        JPanel chocoballsCard = new JPanel(new BorderLayout());
        JPanel chocCauldronsCard = new JPanel(new BorderLayout());
        JPanel chocFrogsCard = new JPanel(new BorderLayout());
        JPanel chocWandsCard = new JPanel(new BorderLayout());
        JPanel roachClustersCard = new JPanel(new BorderLayout());
        JPanel crystalPineappleCard = new JPanel(new BorderLayout());
        JPanel droobleGumCard = new JPanel(new BorderLayout());
        JPanel explodeBonbonsCard = new JPanel(new BorderLayout());
        JPanel fizzWhizCard = new JPanel(new BorderLayout());
        JPanel iceMiceCard = new JPanel(new BorderLayout());
        JPanel jellySlugsCard = new JPanel(new BorderLayout());
        JPanel liquorWandsCard = new JPanel(new BorderLayout());
        JPanel pepImpsCard = new JPanel(new BorderLayout());
        JPanel pinkCocoIceCard = new JPanel(new BorderLayout());
        JPanel shockChocCard = new JPanel(new BorderLayout());
        JPanel spindleSpidersCard = new JPanel(new BorderLayout());
        JPanel sugarQuillsCard = new JPanel(new BorderLayout());
        JPanel wizochocCard = new JPanel(new BorderLayout());

        //Adding the cards to the infoPanel
        infoPanel.add(startCard, "Start");
        infoPanel.add(acidPopsCard, "Acid Pops");
        infoPanel.add(bertieBottsCard, "Bertie Bott's Every Flavour Beans");
        infoPanel.add(bloodPopsCard, "Blood-flavoured Lollipops");
        infoPanel.add(cauldronCakesCard, "Cauldron Cakes");
        infoPanel.add(charmChocCard, "Charm Choc");
        infoPanel.add(chocoballsCard, "Chocoballs");
        infoPanel.add(chocCauldronsCard, "Chocolate Cauldrons");
        infoPanel.add(chocFrogsCard, "Chocolate Frogs");
        infoPanel.add(chocWandsCard, "Chocolate Wands");
        infoPanel.add(roachClustersCard, "Cockroach Clusters");
        infoPanel.add(crystalPineappleCard, "Crystallised Pineapple");
        infoPanel.add(droobleGumCard, "Drooble's Best Blowing Gum");
        infoPanel.add(explodeBonbonsCard, "Exploding Bonbons");
        infoPanel.add(fizzWhizCard, "Fizzing Whizbees");
        infoPanel.add(iceMiceCard, "Ice Mice");
        infoPanel.add(jellySlugsCard, "Jelly Slugs");
        infoPanel.add(liquorWandsCard, "Liquourice Wands");
        infoPanel.add(pepImpsCard, "Pepper Imps");
        infoPanel.add(pinkCocoIceCard, "Pink Coconut Ice");
        infoPanel.add(shockChocCard, "Shock-o-Choc");
        infoPanel.add(spindleSpidersCard, "Splindle's Lick'O'Rish Spiders");
        infoPanel.add(sugarQuillsCard, "Sugar Quills");
        infoPanel.add(wizochocCard, "Wizochoc");

        //building the cards
        startBuilder("honeydukes.jpg", "<html><center>Welcome to the Honeydukes Muggle Ordering System!<br />Please select from one of our products to the left to begin!</center></html>", startCard);
        verticalBuilder("acidPops.jpg", "<html><center>One of our more exotic treats, Acid Pops are sure to pack a punch!<br /><small>Disclaimer: Honeydukes is not responsible for any injury resulting from use of our products.</small><br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$5.95</center></html>", acidPopsTF, acidPopsCard);
        verticalBuilder("BertieBotts.jpg", "<html><center>A classic wizard candy, Bertie Bott's are known for having a danger in every mouthful. Is that light brown one toffee, or is it earwax? Only one way to find out!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$16.95</center></html>", bertieBottsTF, bertieBottsCard);
        verticalBuilder("bloodpop.jpg", "<html><center>For those of more unusual tastes, we have this most interesting lollipop. We won't ask any questions, and anonymity is guaranteed.<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$5.95</center></html>", bloodPopsTF, bloodPopsCard);
        verticalBuilder("cauldroncake.jpg", "<html><center>A wizarding favourite, cauldron cakes are chocolate on the outside, and pure heaven on the inside. No desert is complete without one!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$14.95</center></html>", cauldronCakesTF, cauldronCakesCard);
        verticalBuilder("charmchoc.jpg", "<html><center>A candy staple, not only is Charm Choc made of the finest chocolate, it's also charmed for extra flavour!<br /><br />$5.95</center></html>", charmChocTF, charmChocCard);
        horizontalBuilder("chocoballs.jpg", "<html><center>One of our most popular candies, Chocoballs are chocolate on the outside, but the inside is full of delicious strawberry mousse and clotted cream!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$9.95</center></html>", chocoballsTF, chocoballsCard);
        verticalBuilder("choccauldrons.jpg", "<html><center>A wizarding favourite, each and every Chocolate Cauldron are filled to the brim with our own special brew of Firewhiskey!<br /><br />NOTICE: The Ministry of Magic would like to remind all that Firewhisky is an alcoholic beverage, and is not to be consumed by those who are underaged.<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$14.95</center></html>", chocCauldronsTF, chocCauldronsCard);
        verticalBuilder("chocfrogs.jpg", "<html><center>One of the most famous wizarding sweets, Chocolate Frogs are made of the finest Croakoa, enabling them to behave like actual frogs! Each Chocolate Frog comes with card featuring a famous witch or wizard! Try to collect them all!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$14.95</center></html>", chocFrogsTF, chocFrogsCard);
        horizontalBuilder("chocwands.jpg", "<html><center>Popular as both a gag gift and a tasty treat, chocolate wands are one candy that nobody leaves the shop without!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$9.95</center></html>", chocWandsTF, chocWandsCard);
        verticalBuilder("cockroachclusters.jpg", "<html><center>Great for tricking friends or quenching your insatiable hunger for cockroaches, these peculiar treats will never get old!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$5.95</center></html>", roachClustersTF, roachClustersCard);
        verticalBuilder("crystalpineapple.jpg", "<html><center>Endorsed by Professor Horace Slughorn himself, Crystallised pineapple consists of the best pineapples diced up, and then cooked in sugar syrup. This is one sweet treat you don't want to be without!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$9.95</center></html>", crystalPineappleTF, crystalPineappleCard);
        verticalBuilder("gum.jpg", "<html><center>Guaranteed to never lose its flavour, Drooble's Best Blowing Gum will let you blow bubbles that last for days, and is the best wizarding gum out there!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$2.95</center></html>", droobleGumTF, droobleGumCard);
        verticalBuilder("bonbons.jpg", "<html><center>Produced by Kaboon Choco Ltd., these treats pop in your mouth -- literally!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$9.95</center></html>", explodeBonbonsTF, explodeBonbonsCard);
        verticalBuilder("whizbees.jpg", "<html><center>Made from delicious sherbert, Fizzing Whizbees have the effect of also causing you to float a few inches off the ground while sucking on them!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$9.95</center></html>", fizzWhizTF, fizzWhizCard);
        verticalBuilder("mice.jpg", "<html><center>Charmed to stay cold up to the point of being enjoyed, ice mice will also cause your teeeth to chatter and squeak!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$5.95</center></html>", iceMiceTF, iceMiceCard);
        verticalBuilder("slugs.jpg", "Perhaps the single most popular sweet, Jelly Slugs are a classic!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$2.95</center></html>", jellySlugsTF, jellySlugsCard);
        verticalBuilder("liqwand.jpg", "<html><center>Another favourite, these wands won't win you any duels, but they sure are tasty!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$9.95</center></html>", liquorWandsTF, liquorWandsCard);
        verticalBuilder("imps.jpg", "<html><center>Famous for making anyone who eats them smoke at the ears and nose, these spicy treats are delicious!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$4.95</center></html>", pepImpsTF, pepImpsCard);
        verticalBuilder("pinkice.jpg", "<html><center>Amazing in every way, these shimmering pink squares are even more enjoyable than they look!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$4.95</center></html>", pinkCocoIceTF, pinkCocoIceCard);
        verticalBuilder("shock.jpg", "<html><center>Add some SHOCK to your Choc-o-late! Perfect for practical jokes, and tasty too!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$4.95</center></html>", shockChocTF, shockChocCard);
        verticalBuilder("spiders.jpg", "<html><center>Made entirely out of liquorice, these treats are even bewitched to seem alive!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$4.95</center></html>", spindleSpidersTF, spindleSpidersCard);
        verticalBuilder("quill.jpg", "<html><center>Perfect for nibbling on during lectures, the professor will never know the difference between you thinking and you enjoying a delicious sugar quill!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$1.95</center></html>", sugarQuillsTF, sugarQuillsCard);
        verticalBuilder("wizochoc.jpg", "<html><center>There's been an age old debate between wizards of all ages as to whether CharmChoc or WizoChoc is better. Now Muggles can join in as well!<br /><br /><br />Type the quantity of this product you would like to order below.<br /><br />$5.95</center></html>", wizochocTF, wizochocCard);

        checkoutButton = new JButton("Checkout");
        checkoutButton.addActionListener(bl);
        checkoutPanel.add(checkoutButton, BorderLayout.LINE_END);

        orderingPanel.add(checkoutPanel, BorderLayout.PAGE_END);
        orderingPanel.add(invntryPanel, BorderLayout.LINE_START);
        orderingPanel.add(infoPanel, BorderLayout.CENTER);
        mainPanel.add(orderingPanel, "Ordering");
        mainPanel.add(cartPanel, "Cart");
        this.add(mainPanel);
        this.setVisible(true);
    }

    void startBuilder(String p, String l, JPanel n)
    {
    try {
        BufferedImage myPicture = ImageIO.read(new File(p));
        JLabel picLabel = new JLabel(new ImageIcon(myPicture));
        n.add(picLabel, BorderLayout.LINE_END);
        }
    catch (IOException e) {}
    JLabel lbl = new JLabel(l);
    n.add(lbl, BorderLayout.CENTER);
    }

    void verticalBuilder(String p, String l, JTextField t, JPanel n)
    {
    try {
        BufferedImage myPicture = ImageIO.read(new File(p));
        JLabel picLabel = new JLabel(new ImageIcon(myPicture));
        n.add(picLabel, BorderLayout.LINE_END);
        }
    catch (IOException e) {}
    JLabel lbl = new JLabel(l);
    n.add(lbl, BorderLayout.CENTER);
    t = new JTextField();
    n.add(t, BorderLayout.PAGE_END);
    }

    void horizontalBuilder(String p, String l, JTextField t, JPanel n)
    {
    try {
        BufferedImage myPicture = ImageIO.read(new File(p));
        JLabel picLabel = new JLabel(new ImageIcon(myPicture));
        n.add(picLabel, BorderLayout.PAGE_START);
        }
    catch (IOException e) {}
    JLabel Lbl = new JLabel(l);
    n.add(Lbl, BorderLayout.CENTER);
    t = new JTextField();
    n.add(t, BorderLayout.PAGE_END);
    }

    private class ButtonListener implements ActionListener {
        public void actionPerformed(ActionEvent e)
        {
            if (e.getSource() == switchCard)
            {
                cl.show(infoPanel, (String)candyList.getSelectedValue());
            }

            if (e.getSource() == checkoutButton)
            {
                NumberFormat cf = NumberFormat.getCurrencyInstance();

                String acidPopsCost = cf.format(Total(1, 5.95, acidPopsTF));
                String bertieBottsCost = cf.format(Total(1, 16.95, bertieBottsTF));
                String bloodPopsCost = cf.format(Total(1, 5.95, bloodPopsTF));
                String cauldronCakesCost = cf.format(Total(1, 14.95, cauldronCakesTF));
                String charmChocCost = cf.format(Total(1, 5.95, charmChocTF));
                String chocoballsCost = cf.format(Total(1, 9.95, chocoballsTF));
                String chocCauldronsCost = cf.format(Total(1, 14.95, chocCauldronsTF));
                String chocFrogsCost = cf.format(Total(1, 14.95, chocFrogsTF));
                String chocWandsCost = cf.format(Total(1, 9.95, chocWandsTF));
                String roachClustersCost = cf.format(Total(1, 5.95, roachClustersTF));
                String crystalPineappleCost = cf.format(Total(1, 9.95, crystalPineappleTF));
                String droobleGumCost = cf.format(Total(1, 2.95, droobleGumTF));
                String explodeBonbonsCost = cf.format(Total(1, 9.95, explodeBonbonsTF));
                String fizzWhizCost = cf.format(Total(1, 9.95, fizzWhizTF));
                String iceMiceCost = cf.format(Total(1, 5.95, iceMiceTF));
                String jellySlugsCost = cf.format(Total(1, 2.95, jellySlugsTF));
                String liquorWandsCost = cf.format(Total(1, 9.95, liquorWandsTF));
                String pepImpsCost = cf.format(Total(1, 4.95, pepImpsTF));
                String pinkCocoIceCost = cf.format(Total(1, 4.95, pinkCocoIceTF));
                String shockChocCost = cf.format(Total(1, 4.95, shockChocTF));
                String spindleSpidersCost = cf.format(Total(1, 4.95, spindleSpidersTF));
                String sugarQuillsCost = cf.format(Total(1, 1.95, sugarQuillsTF));
                String wizochocCost = cf.format(Total(1, 5.95, wizochocTF));

                int acidPopsNum = (int)Total(0, 0, acidPopsTF);
                int bertieBottsNum = (int)Total(0, 0, bertieBottsTF);
                int bloodPopsNum = (int)Total(0, 0, bloodPopsTF);
                int cauldronCakesNum = (int)Total(0, 0, cauldronCakesTF);
                int charmChocNum = (int)Total(0, 0, charmChocTF);
                int chocoballsNum = (int)Total(0, 0, chocoballsTF);
                int chocCauldronsNum = (int)Total(0, 0, chocCauldronsTF);
                int chocFrogsNum = (int)Total(0, 0, chocFrogsTF);
                int chocWandsNum = (int)Total(0, 0, chocWandsTF);
                int roachClustersNum = (int)Total(0, 0, roachClustersTF);
                int crystalPineappleNum = (int)Total(0, 0, crystalPineappleTF);
                int droobleGumNum = (int)Total(0, 0, droobleGumTF);
                int explodeBonbonsNum = (int)Total(0, 0, explodeBonbonsTF);
                int fizzWhizNum = (int)Total(0, 0, fizzWhizTF);
                int iceMiceNum = (int)Total(0, 0, iceMiceTF);
                int jellySlugsNum = (int)Total(0, 0, jellySlugsTF);
                int liquorWandsNum = (int)Total(0, 0, liquorWandsTF);
                int pepImpsNum = (int)Total(0, 0, pepImpsTF);
                int pinkCocoIceNum = (int)Total(0, 0, pinkCocoIceTF);
                int shockChocNum = (int)Total(0, 0, shockChocTF);
                int spindleSpidersNum = (int)Total(0, 0, spindleSpidersTF);
                int sugarQuillsNum = (int)Total(0, 0, sugarQuillsTF);
                int wizochocNum = (int)Total(0, 0, wizochocTF);

                cart = new ArrayList();

                addCart("Acid Pops", acidPopsNum, acidPopsCost);
                addCart("Bertie Botts Every Flavour Beans", bertieBottsNum, bertieBottsCost);
                addCart("Blood-flavoured Lollipops", bloodPopsNum, bloodPopsCost);
                addCart("Cauldron Cakes", cauldronCakesNum, cauldronCakesCost);
                addCart("Charm Choc", charmChocNum, charmChocCost);
                addCart("Chocoballs", chocoballsNum, chocoballsCost);
                addCart("Chocolate Cauldrons", chocCauldronsNum, chocCauldronsCost);
                addCart("Chocolate Frogs", chocFrogsNum, chocFrogsCost);
                addCart("Chocolate Wands", chocWandsNum, chocWandsCost);
                addCart("Cockroach Clusters", roachClustersNum, roachClustersCost);
                addCart("Crystallised Pineapple", crystalPineappleNum, cauldronCakesCost);
                addCart("Drooble's Best Blowing Gum", droobleGumNum, droobleGumCost);
                addCart("Exploding Bonbons", explodeBonbonsNum, explodeBonbonsCost);
                addCart("Fizzing Whizbees", fizzWhizNum, fizzWhizCost);
                addCart("Ice Mice", iceMiceNum, iceMiceCost);
                addCart("Jelly Slugs", jellySlugsNum, jellySlugsCost);
                addCart("Liquorice Wands", liquorWandsNum, liquorWandsCost);
                addCart("Pepper Imps", pepImpsNum, pepImpsCost);
                addCart("Pink Coconut Ice", pinkCocoIceNum, pinkCocoIceCost);
                addCart("Shock-o-Choc", shockChocNum, shockChocCost);
                addCart("Splindle's Lick'O'Rish Spiders", spindleSpidersNum, spindleSpidersCost);
                addCart("Sugar Quills", sugarQuillsNum, sugarQuillsCost);
                addCart("Wizochoc", wizochocNum, wizochocCost);

                cart.remove(cart.size());
                cartArray = cart.toArray();

                cl.show(mainPanel, "Cart");
            }
        }

        double Total(int i, double p, JTextField t)
        {
            if (i == 1)
            {
                try
                {
                    return (p* (Integer.parseInt(t.getText())));
                }
                catch (NumberFormatException e) { return 0; }
            }
            else
            {
                try
                {
                    return Integer.parseInt(t.getText());
                }
                catch (NumberFormatException e) { return 0; }
            }
        }

        void addCart(String p, int n, String c)
        {
            if (n > 0)
            {
                cart.add(p);
                cart.add(n);
                cart.add(c);
                cart.add("");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T19:12:31.913

伙计，您的代码中有许多要实现的更正。这是清单 -

在方法verticalBuilder/horizo​​ntalBuilder 中，您传递要添加到相应面板的对象。但这些方法实际上是为JTextField 创建新对象（t）。请参见第228 行。因此，当第一次从第 242 行调用“Total”方法时，即 String acidPopsCost = cf.format(Total(1, 5.95, acidPopsTF)); 您实际上指的是原始 JTextField 对象“acidPopsTF”，它为空且未初始化，这就是为什么第 329 行会引发空指针异常。

因此，不要使用方法verticalBuilder/horizo​​ntalBuilder，而是先初始化对象，然后将其添加到面板中。例如-

```
picLabel = new JLabel(new ImageIcon(IMAGE_URL)),SwingConstants.CENTER);
acidPopsCard.add(picLabel, BorderLayout.PAGE_START);

acidPopsCard.add(new JLabel(YOUR_HTML_STRING), BorderLayout.CENTER);

acidPopsTF = new JTextField();
acidPopsCard.add(acidPopsTF,BorderLayout.PAGE_END); 
```

看@ line#302，您使用了 cauldronCakesCost 而不是可以再次改变结果的 CrystalPineappleCost。

进行更改后，我相信您可以看到预期的结果。

# php - 将 HighChart 与其他页面内容一起导出为 excel 文件中的图像

> ID：11425862
> 
> 赞同：6
> 
> 时间：2012-07-11T05:06:21.387
> 
> 标签：php, image, excel, graph, highcharts

将 HighChart 与其他页面内容（如表格、文本等）一起导出为 excel 文件中的图像。当我单击导出按钮时，整个页面内容将通过标题另存为 excel 文件，而不是将所有页面内容导出到 excel 文件中不包括 HighChart 图表。我认为解决方案是将图形导出为 excel 中的图像，但我不知道该怎么做。有谁知道该怎么做或知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T09:28:56.510

1.  这是关于[highcharts 文档](http://api.highcharts.com/highcharts#exporting)的链接。这将帮助您导出图像并存储它。

2.  a)[文档 #1](http://www.cmsws.com/examples/applications/phpexcel/Documentation/API/PHPExcel_Worksheet/PHPExcel_Worksheet_Drawing.html)
    b)[文档 #2](http://www.contao-docs.org/docs/PHPExcel/html/class_p_h_p_excel___worksheet___drawing.html)
    这将帮助您使用 PHPExcel 类 API。

3.  最后，使用 PHPExcel 类将图像粘贴到工作表的示例：[一](http://phpexcel.codeplex.com/discussions/302680)或[二](http://phpexcel.codeplex.com/discussions/271473)；

还有更多问题吗？看到链接：[一](http://goo.gl/SEO6e)，[二](http://goo.gl/PLl0i)。
和官方 PHPExcel 示例：[这里](http://phpexcel.codeplex.com/wikipage?title=Examples&referringTitle=Home).

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-19T13:51:43.453

首先，您必须通过 ajax 向服务器发送 svgtext 和 csv 文本。然后执行以下操作：

public JsonResult ExportToImage(string base64, string graphdata) { try {

```
 var base64String = base64.Remove(0, 1);
            var rows = graphdata.Split('\n');

        byte[] bytes = Convert.FromBase64String(base64);
        var path = Path.Combine(AppDomain.CurrentDomain.BaseDirectory , "Content\\Images\\");
            DirectoryInfo di = new DirectoryInfo(path);
            FileInfo[] files = di.GetFiles("*.xls")
                                 .Where(p => p.Extension == ".xls").ToArray();
            foreach (FileInfo file in files)
                try
                {
                    file.Attributes = FileAttributes.Normal;
                    System.IO.File.Delete(file.FullName);
                }
                catch { }
            using (Image image = Image.FromStream(new MemoryStream(bytes)))
        {
            image.Save(path+"output.png", ImageFormat.Jpeg);  // Or Png
        }

            var xlApp = new Microsoft.Office.Interop.Excel.Application();
            Microsoft.Office.Interop.Excel.Workbook xlWorkBook = xlApp.Workbooks.Add();
            Microsoft.Office.Interop.Excel.Worksheet xlWorkSheet = xlWorkBook.Sheets[1];

            for(var y=0; y<rows.Count();y++)
            {
                var row = rows[y];
                var columValues = row.Split(',');
                for (var x = 0; x < columValues.Count(); x++)
                {
                    xlWorkSheet.Cells[y+20, x+1] = columValues[x];
                }

            }

            xlWorkSheet.Shapes.AddPicture(path + "output.png", MsoTriState.msoFalse, MsoTriState.msoCTrue, 0, 0, -1, -1);
            var fileName = string.Format("GraphDataExport{0}.xls", DateTime.Now.ToString("yyyy-dd-M--HH-mm-ss"));
            xlWorkBook.SaveAs(path + fileName, Microsoft.Office.Interop.Excel.XlFileFormat.xlWorkbookNormal);
            xlWorkBook.Close(true);
            xlApp.Quit();

            Marshal.ReleaseComObject(xlApp);
            return Json(fileName);
        }
        catch (Exception e)
        {
            return Json(e.Message + Environment.NewLine + e.InnerException + Environment.NewLine + e.Data + Environment.NewLine);
        }
    } 
```

现在您可以对该文件执行 window.location

# javascript - ISP 导致 Facebook 访问被拒绝 403

> ID：11425866
> 
> 赞同：0
> 
> 时间：2012-07-11T05:06:50.770
> 
> 标签：javascript, facebook, cakephp, localhost

我在本地计算机上使用 Facebook Auth，直到今天早上它一直运行良好。我无法弄清楚为什么我在连接时会被拒绝访问。

`http://facebook.com/en_US/all.js`

这是我的脚本。我已经在几个浏览器中检查过了。

```
window.fbAsyncInit = function() {
    FB.init({
        appId: '". $AppID."',
        cookie: true,
        xfbml: true,
        oauth: true
    });

    FB.Event.subscribe('auth.login', function(response) {
        window.location.reload();
    });

    FB.Event.subscribe('auth.logout', function(response) {
        window.location.reload();
    });
};

(function() {
    var e = document.createElement('script'); e.async = true;
    e.src = document.location.protocol +
    '//connect.facebook.net/en_US/all.js';
    document.getElementById('fb-root').appendChild(e);
}()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T15:22:13.113

尝试替换`window.loaction.reload()`为`window.location.reload(true)`.

如果这不能解决问题，请尝试另一种方式，例如：

```
window.location.replace(window.location.href) 
```

# c# - 在 Visual Studio 2010 Express 上构建 FreeImage.net

> ID：11425868
> 
> 赞同：3
> 
> 时间：2012-07-11T05:06:53.467
> 
> 标签：c#, visual-studio-2010, freeimage

它显示 39 个错误。所有错误都是这样的：

错误 1 ​​警告为错误：“FreeImageAPI.Plugins.PluginRepository.Plugin(string)”上的 XML 注释具有“表达式”的 typeparamref 标记，但没有该名称的类型参数 C:\Users\Public\Documents\@Programming \FreeImage\Wrapper\FreeImage.NET\cs\Library\Classes\PluginRepository.cs 63 27 库

在源文件上：

```
 /// <summary>
        /// Returns an instance of <see cref="FreeImageAPI.Plugins.FreeImagePlugin"/>.
        /// <typeparamref name="expression"/> is searched in:
        /// <c>Format</c>, <c>RegExpr</c>,
        /// <c>ValidExtension</c> and <c>ValidFilename</c>.
        /// </summary>
        /// <param name="expression">The expression to search for.</param>
        /// <returns>An instance of <see cref="FreeImageAPI.Plugins.FreeImagePlugin"/>.</returns>
        public static FreeImagePlugin Plugin(string expression)
        {
            FreeImagePlugin result = null;
            expression = expression.ToLower();

            foreach (FreeImagePlugin plugin in plugins)
            {
                if (plugin.Format.ToLower().Contains(expression) ||
                    plugin.RegExpr.ToLower().Contains(expression) ||
                    plugin.ValidExtension(expression, StringComparison.CurrentCultureIgnoreCase) ||
                    plugin.ValidFilename(expression, StringComparison.CurrentCultureIgnoreCase))
                {
                    result = plugin;
                    break;
                }
            }

            return result;
        } 
```

我如何解决它 ？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:29:50.657

您应该更改`<typeparamref name="expression"/>`为`<paramref name="expression"/>`.
`<typeparamref>`旨在描述类型参数（如在泛型中），而不是方法接收的参数的名称。

[在此处检查 typeparamref](http://msdn.microsoft.com/en-us/library/ms173192%28v=vs.80%29.aspx)并[在此处检查 paramref](http://msdn.microsoft.com/en-us/library/wb7x2fhw%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-10T15:58:06.260

我遇到了同样的事情，我通过以下方式解决了它：

1.  右键单击您的项目并选择“属性”。
2.  选择左侧的“构建”选项卡。
3.  转到“将警告视为错误”部分并选择“无”。

# sql - 从值中获取列名和表名

> ID：11425871
> 
> 赞同：1
> 
> 时间：2012-07-11T05:07:16.853
> 
> 标签：sql, sql-server

实际上我有一个新客户，他们的数据库没有标准的命名约定，应用程序是经典的 asp。我有一个表单，其中一个表单在不同的文本框中有很多值，很难追踪值来自哪个表。&也没有erd。

我需要一个查询，我可以通过给出 Value 来获取带有列名的表名。

假设我有一个标签名为 abc#= ' **6599912268** ' 的值

＆新项目没有 ERD 没有命名约定标准......我需要一种快速的方法来知道 abc# =' **6599912268** ' 是从哪个表和哪个列名中获取的......这样的 UI 有很多值手动跟踪所花费的时间

有没有办法追踪它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:17:26.590

简单回答是不。仅通过检查值无法跟踪它来自的表/列。我建议以下。
找出您的产品使用的数据库类型。它位于哪里，您是否可以访问它。
如果您有权访问数据库，请了解数据库结构。每个表要存储的内容、关系等。与数据库管理员或业务分析师交谈，以增加您对产品领域的了解。获得 db 结构后，尝试将表与页面进行比较。例如。用户详细信息最喜欢存储在名为“Users”或“Membership”的数据库表中。

然后看看网站源代码。查看您所在的特定页面。sql代码是嵌入在源代码（asp页面）中还是调用COM服务器或类似的东西？如果您是“幸运的”（我说幸运是因为您遇到的问题），您可以在 asp 页面中找到 sql 代码。
如果它调用 COM 对象或类似的东西，那么您将不得不为此挖掘源代码，而这很可能是您 sql 所在的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T06:20:35.793

不可能，并且如果您使用该值搜索列，则可能会获得具有相同值的多个列，那么您将如何区分它们并且表的情况相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T05:23:47.550

没有简单的方法可以做到这一点，您必须使用存储过程来遍历数据库中的所有表并搜索值，并且可能需要一段时间。

这里有一个存储过程和示例：[Search all columns in all tables in a database for a specific value](http://blogs.lessthandot.com/index.php/DataMgmt/DataDesign/the-ten-most-asked-sql-server-questions--1#2)。您将看到用于查找日期、字符串、数字的存储过程。

# c++ - C - 做{..} while(0); 可以从代码中删除，不包括使用嵌套 if else？

> ID：11425872
> 
> 赞同：0
> 
> 时间：2012-07-11T05:07:28.277
> 
> 标签：c++, c

**做{...} while(0);**

**do{}while(0)**的用法；在我的编码中使用，因为我不想使用 long if else 嵌套条件语句。我最终在失败时中断并退出循环，并保证我的函数至少会被遍历 1 次。

现在，问题出在代码警告工具上，我在使用**do{...}while(0);时收到警告。**

**嵌套 if(){} else{}**的使用可读性差，复杂度高。并让代码具有死代码。

如果我排除**嵌套的 if(){} else{}**和**do{} while(0);** ，我们是否留下了一些其他方式来使代码具有可理解的逻辑可读性；

```
if(status_of_funcA_ok != funcA())
{ //failure}
else if (status_of_funcB_ok != funcB())
{//failure}
else if (status_of_funcC_ok != funcC())
else
{//Great}

do{
   if(status_of_funcA_ok != funcA())
   break;
   if (status_of_funcB_ok != funcB())
   break;
   if (status_of_funcC_ok != funcC())
   break;

  }while(0); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T06:24:11.380

将`do while{0}`循环的完整逻辑移动到函数中，并将 替换`break`为`return`. 并调用函数，而不是循环。

1.  你不必担心美丽。
2.  编译器也不必抱怨`do while{0}`.

更重要的是，通过添加一些模块化，程序可能更具可读性。

无论如何，在这样做之前，最好检查一下您的编译器是否处于*极其迂腐*的模式，并且您可能希望将其关闭。这可能会消除警告。

ss。

PS：您似乎不需要该函数的返回值，但您可以通过它来获得哪个函数成功的线索。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T06:26:16.690

我也在使用这种模式，对于那些想知道的人，这里有一个抽象的例子：

```
do   // while(0) for break
{ 
  state1 = 0;
  if (cond1())
  {
    if (cond2())
      break;
    state1 = opA();
  }

  if (cond3() || state1 && state1->cond4())
    break;
  ... 
  Triumph(state1, ...);
  // often here: return
}
Failure(state1, ...); 
```

我认为这在以下情况下有效：

*   你有一个很长的序列（比如说，>~六个条件）
*   条件很复杂，并且您使用/建立重要状态，因此您无法将元素隔离为函数
*   您处于对异常不友好的环境中，或者您的`break`-ing 代码路径实际上不是异常

你可以做些什么：

**使警告静音。**毕竟，这只是一个警告。~~而且我没有看到会被此警告捕获的“典型错误”（例如键入 0 而不是您的条件）。~~

*[编辑] 现在，这很愚蠢。您收到警告的典型错误是例如`while (a1!=a1)`而不是`while (a1!=a2)`.[/edit]*

**分解成函数，将状态移动到一个类，**
这会将上面的代码转换为：

```
struct Garbler
{
  State1 state1;

  bool Step1()
  {
     state1 = 0;
     if (cond1())
     {
        if (cond2())
          return false;
        state1 = opA();
     }
     return true;
  }

  bool Step2()
  {
     return cond3() || state1 && state1->cond4();
  }
  .. 

  void Run()
  {
    if (Step1() && Step2() && ... && Step23())
      Triumph(state1, ...);
    else
      Failure(state1, ...);
  }
} 
```

这可以说是可读性较差，更糟糕的是您将序列分开，这可能会导致一个非常有问题的类（其中成员可能只能按特定顺序调用）。

**[Scopeguards](http://en.wikibooks.org/wiki/More_C++_Idioms/Scope_Guard)**
这可能允许将休息时间转换为更容易接受的早期回报：

```
state1 = 0;
ScopeGuard gFailure = MakeGuard(&Failure, ByRef(state1), ...);
if (cond1())
{
   if (cond2())
     return;
   state1 = opA();
}

if (cond3() || state1 && state1->cond4())
  return;

// everything went ok, we can dismiss the scopeguard
gFailure.Dismiss();
Triumph(state1, ...); 
```

它们可以用 C++0x 更优雅地编写，保留流程，但解决方案也不是那么灵活，例如，当`Failure()`不能轻松地将其隔离为单个函数时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T05:39:47.813

嵌套嵌套的 if-else 语句可能变得非常不可读，但我认为使用 do {..} while(0); 作为替代品会更糟。这是非常规的，任何其他阅读它的人都不会真正将它与 if-else 语句联系起来。

您可以做一些事情来使嵌套的 if-else 语句更具可读性。一些建议是：

1.  优化您的逻辑 - 有时您可以在“重构”您的逻辑前取消很多 if 子句。对相同的项目进行分组。

2.  使用 switch() - 与 if-else 语句相比，switch 通常更具可读性。您可以将枚举与每个案例相关联，并且可以切换它。

3.  用函数封装复杂的逻辑

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T05:15:20.927

您可以使用和`goto`代替。不过，这不可读，也不是好的做法。我认为对于每种特定情况，都有更好的方法来避免深层 if/else 结构。例如，有时使用函数调用可以帮助：`do {} while(0)``break`

例如，而不是：

```
if(status_of_funcA_ok != funcA())
{ //failure}
else if (status_of_funcB_ok != funcB())
{//failure}
else if (status_of_funcC_ok != funcC())
else
{//Great} 
```

你可以写：

```
if (check_funcs() == 0) {
   great();
}

int check_funcs() {
   if (status_of_funcA_ok != funcA())
     return -1;
   if (if(status_of_funcB_ok != funcB())) 
     return -2;
   if (if(status_of_funcC_ok != funcC())) 
     return -3;
   return 0; /* great */
} 
```

有时，您可以使用`exit()`.

此外，在 c++ 中，您可以使用`throw()`and `try/catch`：

```
try {
   /* */
  throw (this error);
   /* */
  throw (that error);
} catch (this error) {
} catch (that error) {
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T05:38:01.883

如果有更多条件要检查，请避免使用`if{} else{},`

最佳做法是将 if else 条件替换为`switch case`

# bash - 使用 while 或 until 等到 PID 不存在

> ID：11425876
> 
> 赞同：10
> 
> 时间：2012-07-11T05:07:57.133
> 
> 标签：bash, process

我一直在使用 Bash 等到 PID 不再存在。我试过了

```
#!/bin/bash
while [ kill -0 PID > /dev/null 2>&1 ]; do
    //code to kill process
done
//code to execute after process is dead 
```

也

```
#!/bin/bash
until [ ! kill -0 PID > /dev/null 2>&1 ]; do
    //code to kill process
done
//code to execute after process is dead 
```

这两个示例要么无法工作，要么在进程结束后继续循环。我做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-11T05:13:29.057

你应该简单地做：

```
while kill -0 $PID >/dev/null 2>&1
do
    # Code to kill process
done 
```

循环条件测试最后一个命令的退出状态——在本例中为`kill`. 该`-0`选项（在问题中使用）实际上不会向进程发送任何信号，但它会检查是否可以发送信号 - 如果进程不再存在，则无法发送。（请参阅[`kill()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/kill.html)函数的 POSIX 规范和 POSIX[`kill`](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/kill.html)实用程序。）

'last' 的意义在于你可以这样写：

```
while sleep 1
      echo Testing again
      kill -0 $PID >/dev/null 2>&1
do
    # Code to kill process
done 
```

`kill`这也测试了（并且`kill`单独）的退出状态。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-14T16:17:25.437

你也可以在 unixes 中使用 procfs（几乎所有除了 mac os）

```
while test -d /proc/$PID; do
     kill -$SIGNAL $PID
     # optionally
     sleep 0.2
done 
```

# javascript - 如何避免在 Javascript 中重复命名空间

> ID：11425879
> 
> 赞同：4
> 
> 时间：2012-07-11T05:08:21.440
> 
> 标签：javascript, namespaces

我正在开发一个主干应用程序。

我已经在不同的文件中构建了我的模型 + 集合 + 视图。

这意味着类似的解决方案 `function() { // all my code }()` 不适用于此处

我添加了一个命名空间，例如 `App.ModelName App.Views.ViewName etc.`

当我在同一个命名空间中时。我怎样才能避免重复。即当我在 App.Views.ViewName 中定义的函数中时如何调用 ModelName

目前我一直在重复完整的字符串，即 App.XXXX

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T05:15:35.350

你有几个选择：

1）在每个函数中创建一个局部变量：

```
App.ModelName.myFunction = function() {
    var model = App.ModelName;
    // then you can reference just model
    model.myFunction2();
} 
```

2）在每个文件范围内创建一个局部变量：

```
(function() {
    var model = App.ModelName;

    model.myFunction = function() {
        // then you can reference just model
        model.myFunction2();
    }

    // other functions here

})(); 
```

3) 使用 的值`this`：

```
App.ModelName.myFunction = function() {
    // call App.ModelName.myFunction2() if myFunction() was called normally
    this.myFunction2();   
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T05:14:02.027

命名空间只是全局范围内的一个对象。

因此，一种替代方法是使用，`with`尽管它有一些缺点。

但无论如何，请查看此示例：

```
window.test = {
    a: function(){ console.log(this); return 'x'; },
    b: function(){ with (this){ alert(a()); }}        // <- specifying (this)
};

window.test.b(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T05:37:38.593

将它们作为参数传递怎么样？像这样的东西：

```
(function(aM,aV) {
    // use aM and aV internally
})(App.Models,App.Views); 
```

# android - 获取 Android 像素值

> ID：11425882
> 
> 赞同：0
> 
> 时间：2012-07-11T05:08:37.343
> 
> 标签：android, android-layout, android-screen, android-screen-support, android-gesture

我在谷歌上搜索了很多这个问题，但无法获得任何帮助。我的问题是**如何获取用户点击的 android 屏幕的像素位置？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T05:12:27.317

这可以完成工作。

```
public boolean onTouchEvent(MotionEvent event) {

        float x = event.getX();
        float y = event.getY(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T05:10:08.163

这可能是您正在寻找的：[onTouchEvent](http://developer.android.com/reference/android/view/View.html#onTouchEvent%28android.view.MotionEvent%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T06:24:13.867

您在寻找[`getRawX`](http://developer.android.com/reference/android/view/MotionEvent.html#getRawX%28%29)和[`getRawY`](http://developer.android.com/reference/android/view/MotionEvent.html#getRawY%28%29)吗？

# javascript - 从后面的 asp.net 代码打开 Javascript 的 ShowModalDialog

> ID：11425887
> 
> 赞同：0
> 
> 时间：2012-07-11T05:08:57.603
> 
> 标签：javascript, asp.net

如何从asp.net代码后面（C#）打开Javascript的ShowModalDialog。如果可能，请向我提供代码以及我想提及的另一件事，我在我想要打开弹出窗口的页面上使用脚本管理器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:21:15.260

从后面的代码调用 javascript 函数 ....

```
ClientScript.RegisterStartupScript(GetType(),"hwa","Samplefn();",true); 
```

在javascript中编写以下代码：

```
function samplefn()
{
 $("#dialog-form").dialog("open");
} 
```

上面的代码用于打开模型对话框

```
$(function() {
            $("#dialog-form").dialog({
                autoOpen: false,
                minHeight: 50,
                position: [300, 50],
                height: 'auto',
                width: 400,
                modal: true
            });
        }); 
```

否则你可以直接从后面的代码打开模型对话框..

```
 ClientScript.RegisterStartupScript(GetType(),"hwa"," $('#dialog-form').dialog('open');",true); 
```

# api - 使用 RESTful API 时是否返回额外的错误信息？

> ID：11425898
> 
> 赞同：0
> 
> 时间：2012-07-11T05:10:50.910
> 
> 标签：api, rest

我正在开发 RESTful API 服务。
顺便说一句，一些客户端在返回错误时要求添加附加信息。我们开发了与 facebook graph api 相同的协议。

```
{ 
    "status": "failure", 
    "error": {
        "message": "",
        "type": "",
        "code": 0000
    }
} 
```

由于我们的客户要求，我们将添加更多这样的信息。

```
{ 
    "status": "failure", 
    "error": {
        "message": "",
        "type": "",
        "code": 0000,
        "more_info": {}
    }
} 
```

添加好不好`more_info`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:14:43.737

这是一个意见问题，可能会因此而被杀死。但万一不...

始终拍摄以返回最少的信息。因为您返回的任何东西都将永远返回。添加更多内容很容易。删除一些几乎是不可能的，因为您会有客户依赖它。

# zend-framework - 如何将现有的mysql和phpmyadmin连接到新的zend服务器ce

> ID：11425899
> 
> 赞同：1
> 
> 时间：2012-07-11T05:11:25.073
> 
> 标签：zend-framework

嗨，我正在从 Xampp 迁移到 Zend 服务器，这样我就可以轻松运行 Zend Studio。我有一个现有的实现 og PHPmyAdmin 和 MySQL。这些现在需要指向 Zend 服务器，它有自己的 Apache 副本。

我正在努力弄清楚如何做到这一点 - 非常感谢您的建议。

# python - Python bootstrap 下载鸡蛋超时

> ID：11425903
> 
> 赞同：1
> 
> 时间：2012-07-11T05:11:54.400
> 
> 标签：python, bootstrapping, buildout

```
$ python bootstrap.py
Downloading http://pypi.python.org/packages/2.6/s/setuptools/setuptools-0.6c11-py2.6.egg
Download error: [Errno 110] Connection timed out -- Some packages may not be found!
Download error: [Errno 110] Connection timed out -- Some packages may not be found!
Download error: [Errno 110] Connection timed out -- Some packages may not be found! 
```

我收到此错误。奇怪的是获取文件没有问题：

```
$ wget http://pypi.python.org/packages/2.6/s/setuptools/setuptools-0.6c11-py2.6.egg
--2012-07-11 05:49:52--  http://pypi.python.org/packages/2.6/s/setuptools/setuptools-0.6c11-py2.6.egg
Resolving pypi.python.org... 82.94.164.168
...
2012-07-11 05:49:58 (69.6 KB/s) - `setuptools-0.6c11-py2.6.egg' saved [333447/333447] 
```

也很奇怪：./eggs 中有不同版本的 setuptools 的鸡蛋：setuptools-0.6c12dev_r88846-py2.6.egg

日志如下所示：

```
Downloading http://pypi.python.org/packages/2.6/s/setuptools/setuptools-0.6c11-py2.6.egg
Download error: [Errno 110] Connection timed out -- Some packages may not be found!
Download error: [Errno 110] Connection timed out -- Some packages may not be found!
Creating directory '/opt/mytardis/releases/0351b5a804156c3d060c7042ad558e87616dee6d/bin'.
Creating directory '/opt/mytardis/releases/0351b5a804156c3d060c7042ad558e87616dee6d/parts'.
Creating directory '/opt/mytardis/releases/0351b5a804156c3d060c7042ad558e87616dee6d/eggs'.
Creating directory '/opt/mytardis/releases/0351b5a804156c3d060c7042ad558e87616dee6d/develop-eggs'.
Getting distribution for 'setuptools'.
Got setuptools 0.6c12dev-r88846.
Download error: [Errno 110] Connection timed out -- Some packages may not be found!
Generated script '/opt/mytardis/releases/0351b5a804156c3d060c7042ad558e87616dee6d/bin/buildout'.
Download error: [Errno 110] Connection timed out -- Some packages may not be found!
Develop: '/opt/mytardis/releases/0351b5a804156c3d060c7042ad558e87616dee6d/.' 
```

有任何想法吗？这是一个 Django 应用程序（不是我编写的），我正试图通过 Vagrant 和 Chef 进行部署。这个步骤实际上在几个小时前才起作用（在我重建整个 VM 之前），所以我对发生了什么变化感到有些困惑。buildout.cfg 在[这里](https://github.com/mytardis/mytardis/blob/master/buildout.cfg)。

编辑更多信息：看起来“下载错误”具有误导性，因为该文件实际上确实下载到了临时目录（/tmp/tmpxxxx/）。从命令行运行构建然后立即中断显示：

```
Downloading http://pypi.python.org/packages/2.6/s/setuptools/setuptools-0.6c11-py2.6.egg
^CTraceback (most recent call last):
  File "bootstrap.py", line 172, in <module>
    ez['use_setuptools'](**setup_args)
  File "<string>", line 103, in use_setuptools
  File "<string>", line 99, in do_download
  File "/tmp/tmpkXNqcy/setuptools-0.6c11-py2.6.egg/setuptools/__init__.py", line 2, in <module>
  File "/tmp/tmpkXNqcy/setuptools-0.6c11-py2.6.egg/setuptools/extension.py", line 2, in <module>
  File "/tmp/tmpkXNqcy/setuptools-0.6c11-py2.6.egg/setuptools/dist.py", line 4, in <module>
  File "/tmp/tmpkXNqcy/setuptools-0.6c11-py2.6.egg/setuptools/depends.py", line 4, in <module>
  File "/usr/lib/python2.6/distutils/version.py", line 63, in <module>
    class StrictVersion (Version):
  File "/usr/lib/python2.6/distutils/version.py", line 101, in StrictVersion
    re.VERBOSE)
  File "/usr/lib/python2.6/re.py", line 190, in compile
    return _compile(pattern, flags)
  File "/usr/lib/python2.6/re.py", line 243, in _compile
    p = sre_compile.compile(pattern, flags)
  File "/usr/lib/python2.6/sre_compile.py", line 510, in compile
    code = _code(p, flags)
  File "/usr/lib/python2.6/sre_compile.py", line 495, in _code
    _compile(code, p.data, flags)
  File "/usr/lib/python2.6/sre_compile.py", line 96, in _compile
    _compile(code, av[2], flags)
  File "/usr/lib/python2.6/sre_compile.py", line 107, in _compile
    _compile(code, av[1], flags)
  File "/usr/lib/python2.6/sre_compile.py", line 107, in _compile
    _compile(code, av[1], flags)
  File "/usr/lib/python2.6/sre_compile.py", line 88, in _compile
    _compile(code, av[2], flags)
  File "/usr/lib/python2.6/sre_compile.py", line 63, in _compile
    _compile_charset(av, flags, code, fixup)
  File "/usr/lib/python2.6/sre_compile.py", line 203, in _compile_charset
    if flags & SRE_FLAG_LOCALE:
KeyboardInterrupt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T11:55:51.773

检查多个页面以查找可能的可下载目标。如果其中一个出现故障或产生错误，您会看到此警告。但这只是一个警告，如果事情真的向南，你会得到一个正确的错误。

发出警告是为了让您知道 setuptools*可能*选择了与其他方式不同的软件包版本；它从 pypi 收集包的版本列表以及从那里链接的页面，其中一个页面超时*可能*意味着这次没有选择“更好”的版本。

换句话说：别担心，状态设计。

# ios - UIImage 上的 iOS alpha 问题

> ID：11425904
> 
> 赞同：2
> 
> 时间：2012-07-11T05:11:57.837
> 
> 标签：ios, alpha

我在获取原始数据和`UIImage`在 iPhone 上编辑 a 的 alpha 值时产生了一些奇怪的结果。如果触摸的像素颜色在触摸时不是全黑，则它看起来不像完整的 alpha。以下是结果：

开始未修改

![未修改](../Images/a3504a2da04359d7e657c9f84cf30ef2.png)

灰色触摸将所有灰色变为 alpha = 0

![感动](../Images/378042e32d6cd5b25a7ee8e0e4a8ae90.png)

然后，如果我触摸应该是 alpha 0 的怪异粉刷区域，它会将所有完全黑色的像素变为 alpha 0，即使在技术上

//没有链接没有足够的代表//

有谁知道发生了什么？它与预乘 alpha 有关吗？或者也许是我编辑值的方式。如果您需要查看代码，请告诉我，我将对其进行编辑。

作为附加说明，第二次按下白色区域时的灰色区域，而不是 alpha 只是 0，所有其他值都等于 0，而它们应该保持原样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T04:05:48.707

是的，通过实验、反复试验和运气，我找到了问题的解决方案，我不知道原因，但这解决了它。

获取原始数据时，我使用此函数在上下文中获取位图信息

```
CGBitmapInfo imageInfo = CGImageGetBitmapInfo(imageRef); 
```

并使用相同的变量从编辑的原始数据创建 CGImage。因此疯狂

修复它的方法不是在从原始数据创建时使用“imageInfo”，而是使用 flag `kCGImageAlphaLast`。

已修复，但不知道为什么。

# c# - 如何在gridview页脚中为总计添加逗号

> ID：11425905
> 
> 赞同：0
> 
> 时间：2012-07-11T05:11:58.340
> 
> 标签：c#, asp.net

有谁知道如何为在 asp.net c# 的网格视图页脚中显示的计算总值给出逗号？

例如：12,492,323

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T05:20:27.810

```
protected void grdList_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.Footer)
    {
        Label lbl = (Label)(e.Row.FindControl("lblTotal"));
        lbl.Text = String.Format("{0:n}", Total);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T05:17:08.533

如果没有发布代码，很难准确地回答您的问题。

假设在您后面的代码中计算总数，而不是将总数输入为`total.ToString()`，`total.ToString("N0")`而是使用。

# vim - 每个 `ftplugin/name.vim` 是否都需要定义 `b:undo_ftplugin`？

> ID：11425906
> 
> 赞同：8
> 
> 时间：2012-07-11T05:12:02.583
> 
> 标签：vim

`$VIMRUNTIME/ftplugin/`（例如`python.vim`和）中的某些脚本`ada.vim`没有定义`b:undo_ftplugin`. 选项`cpo`默认值为.`aABceFs`

当我`set ft=python`，然后`set ft=css`。`$VIMRUNTIME/ftplugin/css.vim`立即完成。并且`omnifunc=pythoncomplete#Complete`一直如此。

每个人都`ftplugin/name.vim`需要定义`b:undo_ftplugin`吗？

* * *

这是 `/usr/share/vim/vim73/ftplugin.vim`：

```
" Vim support file to switch on loading plugins for file types
"
" Maintainer:   Bram Moolenaar <Bram@vim.org>
" Last change:  2006 Apr 30

if exists("did_load_ftplugin")
  finish
endif
let did_load_ftplugin = 1

augroup filetypeplugin
  au FileType * call s:LoadFTPlugin()

  func! s:LoadFTPlugin()
    if exists("b:undo_ftplugin")
      exe b:undo_ftplugin
      unlet! b:undo_ftplugin b:did_ftplugin
    endif

    let s = expand("<amatch>")
    if s != ""
      if &cpo =~# "S" && exists("b:did_ftplugin")
        " In compatible mode options are reset to the global values, need to
        " set the local values also when a plugin was already used.
        unlet b:did_ftplugin
      endif

      " When there is a dot it is used to separate filetype names.  Thus for
      " "aaa.bbb" load "aaa" and then "bbb".
      for name in split(s, '\.')
        exe 'runtime! ftplugin/' . name . '.vim ftplugin/' . name . '_*.vim ftplugin/' . name . '/*.vim'
      endfor
    endif
  endfunc
augroup END 
```

这是`/usr/share/vim/vim73/ftplugin/css.vim`：

```
" Vim filetype plugin file
" Language:         CSS
" Maintainer:       Nikolai Weibull <now@bitwi.se>
" Latest Revision:  2008-07-09

if exists("b:did_ftplugin")
  finish
endif
let b:did_ftplugin = 1

let s:cpo_save = &cpo
set cpo&vim

let b:undo_ftplugin = "setl com< cms< inc< fo< ofu<"

setlocal comments=s1:/*,mb:*,ex:*/ commentstring&
setlocal formatoptions-=t formatoptions+=croql
setlocal omnifunc=csscomplete#CompleteCSS

let &l:include = '^\s*@import\s\+\%(url(\)\='

let &cpo = s:cpo_save
unlet s:cpo_save 
```

* * *

如果我`set ft=python`，那么`set ft=css`。Vim 不能通过这个测试：

```
if &cpo =~# "S" && exists("b:did_ftplugin") 
```

`b:did_ftplugin`不会被删除，所以`ftplugin/css.vim`立即完成。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-11T06:36:54.937

`:help undo_ftplugin`提到：

> 当用户执行 ":setfiletype xyz" 时，前一个文件类型的效果应该被撤销。

请注意，它说的是“应该”，而不是“必须”。但是，根据实施

```
func! s:LoadFTPlugin()
    if exists("b:undo_ftplugin")
        exe b:undo_ftplugin
        unlet! b:undo_ftplugin b:did_ftplugin
    endif 
```

一个 ftplugin*必须*定义`b:undo_ftplugin`，否则它的文件类型设置不能再通过`:setf`. 我认为文档应该指出这一点，并且确实应该设置所有 ftplugins `b:undo_ftplugin`（如果只是设置为空的无操作值）。

# android - 将在一个活动中完成杀死其中的所有对象

> ID：11425910
> 
> 赞同：2
> 
> 时间：2012-07-11T05:12:11.773
> 
> 标签：android

我在一个 android 应用程序中工作，我遇到了一些内存问题。我在活动中声明了很多私有和公共静态变量。

我想知道当一个活动 id 完成时，这些私有和公共对象是否被清除（内存）或者我们应该`null`通过将它分配给 null in on 来手动完成它`onDestroy()`。这是正确的方法还是请建议替代方法。此外，我在每个`onDestroy()`. 手动调用 System.gc 是否正确？

请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:19:29.417

作为一般规则，强制垃圾收集（将其留在系统上）是一个坏主意。如果我们忽略虚拟内存的影响，当有大量垃圾需要回收时，垃圾回收的效率最高；即当分配器用完立即可用的空闲内存时。如果您强制垃圾收集器在任何其他时间运行，它将花费更多时间（平均）收集。

您可以调用 system.gc() 来隐式地进行垃圾收集，但由于**Java 中的垃圾收集器是不确定的。**所以你不能假设它会立即释放你所有的记忆。

参考。链接>>[链接](https://stackoverflow.com/a/1481200/519718)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T05:19:14.213

1.  只要对象没有任何引用，您就可以将其声明为空。

    1.  您可以在 adb shell 中使用 dumpsys meminfo (pid) 命令验证内存信息

    2.  如果您手动 cal gc 它不会为您提供垃圾收集的保证

# objective-c - 在 ios 中解析 facebook json 提要时出错

> ID：11425912
> 
> 赞同：1
> 
> 时间：2012-07-11T05:12:21.957
> 
> 标签：objective-c, xcode, json

我正在查询 Facebook 公共 JSON 提要。我收到一个错误：

> -[__NSCFString objectForKey:]：无法识别的选择器发送到实例 0x9146b90 2012-07-11 10:32:25.536 iB Top 50[1789:16a03]

我正在尝试解析对象的标签“消息”和“图片”

```
"id": "108448345915250_320180984741984" 
```

请帮我。

示例 JSON：

```
{
"data": [
  {
     "id": "108448345915250_320181064741976",
     "from": {
        "name": "Amitabh Bachchan",
        "category": "Actor/director",
        "id": "108448345915250"
     },
     "story": "Amitabh Bachchan edited his Website and Location.",
     "story_tags": {
        "0": [
           {
              "id": 108448345915250,
              "name": "Amitabh Bachchan",
              "offset": 0,
              "length": 16,
              "type": "page"
           }
        ]
     },
     "type": "status",
     "created_time": "2012-07-10T05:30:10+0000",
     "updated_time": "2012-07-10T05:30:10+0000",
     "comments": {
        "count": 0
     }
  },
  {
     "id": "108448345915250_320180984741984",
     "from": {
        "name": "Amitabh Bachchan",
        "category": "Actor/director",
        "id": "108448345915250"
     },
     "message": "Singing in the praises of this new venture \u2026 metal mike and all \u2026",
     "picture": "http://photos-d.ak.fbcdn.net/hphotos-ak-snc7/293763_320180974741985_675837103_s.jpg",
     "link": "http://www.facebook.com/photo.php?fbid=320180974741985&set=a.126948684065216.26767.108448345915250&type=1&relevant_count=1",
     "icon": "http://static.ak.fbcdn.net/rsrc.php/v2/yz/r/StEh3RhPvjk.gif",
     "type": "photo",
     "object_id": "320180974741985",
     "created_time": "2012-07-10T05:29:34+0000",
     "updated_time": "2012-07-10T,
          "shares": {
        "count": 41
     },
     "likes": {
        "data": [
           {
              "name": "Amir Samy",
              "id": "100000377429168"
           },
           {
              "name": "Rashi Shrivastava",
              "id": "100001002346693"
           },
           {
              "name": "Satish Wakpaijan",
              "id": "100002129452923"
           },
           {
              "name": "Sushil Kumar",
              "id": "100002105808620"
           }
        ],
        "count": 300
     },
     "comments": {
        "count": 45
     }
  },
  ... 
```

iOS 代码：

```
jsonurl=[NSURL URLWithString:@"https://graph.facebook.com/TheAmitabhBachchan/posts?access_token=AcessToken"];

jsonData=[[NSString alloc]initWithContentsOfURL:jsonurl];

jsonArray = [jsonData objectFromJSONString]; 

items = [jsonArray objectForKey:@"data"];

story = [NSMutableArray array];
title = [NSMutableArray array];
picture = [NSMutableArray array];

for (NSDictionary *item in items )
{
    [story addObject:[item objectForKey:@"message"]];
   /* [title addObject:[item objectForKey:@"name"]];
    [picture addObject:[item objectForKey:@"picture"]];*/
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T06:15:47.603

在行中：

```
jsonArray = [jsonData objectFromJSONString]; 
```

您正在从获得的 JSON 字符串中获取对象。您必须将 JSON 字符串转换为其正确的值。为此使用 SBJSON 解析器。

这与您的 jsonArray 或 item 是字典以及您将值存储在字典中无关。它与以下方法返回什么有关：

```
[jsonData objectFromJSONString];
[item objectForKey:@"message"]; 
```

两者都是（jsonArray 和 item）字典吗？正如您的错误所说，其中之一是 NSString。正确解析 JSON 值。

然后检查这个：

```
NSString *sss = @"https://graph.facebook.com/TheAmitabhBachchan/posts?access_token=393411130717153%7C1HFhZAByEHp89q6CPECJTFzuzfg";
NSURL * jsonurl=[NSURL URLWithString:[sss stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSData* data = [NSData dataWithContentsOfURL: jsonurl];
NSDictionary* json = [NSJSONSerialization JSONObjectWithData:data 
                                                     options:kNilOptions 
                                                       error:nil];
NSArray *items = [json objectForKey:@"data"];
// NSDictionary *item = [items objectAtIndex:1];

NSMutableArray *story = [NSMutableArray array];

for (NSDictionary *item in items )
{

    if([item objectForKey:@"message"] || [item objectForKey:@"message"] != nil || [[item objectForKey:@"message"] length]>0){
        [story addObject:[item objectForKey:@"message"]];
    }

} 
```

并非每个字典都包含键 - “消息”。它存在于数组的第二个字典中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T06:14:37.717

```
NSURL * jsonurl=[NSURL URLWithString:@"https://graph.facebook.com/TheAmitabhBachchan/posts?access_token=AcessToken"];
 NSData* data = [NSData dataWithContentsOfURL: jsonUrl];
 NSDictionary* json = [NSJSONSerialization JSONObjectWithData:data 
                                                     options:kNilOptions 
                                                       error:nil];
NSDictionary *items = [json objectForKey:@"data"]; 
```

这必须有效。现在您可以从`items`字典中获取对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T07:52:19.063

实际上这是一个非常糟糕的 json 我已经亲自测试过

```
 NSURL *jsonurl1=[NSURL URLWithString:@"https://graph.facebook.com/TheAmitabhBachchan/posts?access_token=393411130717153%7C1HFhZAByEHp89q6CPECJTFzuzfg"];

NSString *jsonData=[[NSString alloc] initWithContentsOfURL:jsonurl1];
NSDictionary *jsonArray = [jsonData objectFromJSONString]; 
NSLog(@"Js %@", [jsonArray objectForKey:@"data"]);

NSMutableArray *ar = [[NSMutableArray alloc] init];
[ar addObject:[jsonArray objectForKey:@"data"]];

NSLog(@"AAAA %@", [[[ar objectAtIndex:0] objectAtIndex:1] objectForKey:@"picture"]); 
```

输出是

**2012-07-11 13:20:41.987 InstagramDemp[4834:f803] AAAA [http://photos-d.ak.fbcdn.net/hphotos-ak-snc7/293763_320180974741985_675837103_s.jpg](http://photos-d.ak.fbcdn.net/hphotos-ak-snc7/293763_320180974741985_675837103_s.jpg)**

# c++ - NSIS 插件功能无法识别

> ID：11425915
> 
> 赞同：3
> 
> 时间：2012-07-11T05:12:51.100
> 
> 标签：c++, dll, nsis

我制作了一个非常简单的 NSIS 插件，其中包含一个功能。我已成功将 Win32 DLL 项目编译成 DLL，然后将其复制到目录*C:\Program Files (x86)\NSIS\Plugins*

**我的问题：**当我创建从 dll 调用函数的 .nsi 脚本时，我收到一个编译错误，*提示 Invalid command: tbox::myFunction*

我究竟做错了什么？**我是否还需要将 tbox.lib 文件复制到 NSIS 目录或创建要包含的 tbox.nsh 文件？**

我的 dll 的名称是 tbox.dll，我的 nsi 脚本在下面，下面是我的 C++ DLL 代码：

```
 !include MUI2.nsh
    !include WinMessages.nsh

    Name    "aa.nsi"
    OutFile "aa.exe"
    Caption "${^Name}"
    ShowInstDetails show
    !define MUI_CUSTOMFUNCTION_GUIINIT   MyGUIInit

    Section "Dummy"
        MessageBox MB_ICONINFORMATION|MB_OKCANCEL "dvkjdkj"
        tbox::myFunction "abc" "def"
    SectionEnd 
```

DLL 代码：

```
#include "targetver.h"
#define WIN32_LEAN_AND_MEAN
#include <windows.h>

#include <stdlib.h>
#include <malloc.h>
#include <memory.h>
#include <tchar.h>
#pragma comment(lib, "msimg32.lib")
#include <commctrl.h>
#include "TransparentCheckbox.h"
#include "NSIS/pluginapi.h"

HINSTANCE g_hInstance;
HWND g_hwndParent;
unsigned int g_stringsize;
stack_t **g_stacktop;
TCHAR *g_variables;

// To work with Unicode version of NSIS, please use TCHAR-type functions for accessing the variables and the stack.
HWND __declspec(dllexport) myFunction(HWND hwndParent, int string_size, TCHAR *variables, stack_t **stacktop, extra_parameters *extra)
{
  g_hwndParent=hwndParent;
  EXDLL_INIT();

  {
    TCHAR buf[1024];
    wsprintf(buf,TEXT("string_size=%d, variables=%s\n"), string_size, variables);
    MessageBox(g_hwndParent,buf,0,MB_OK);
  }

  return g_hwndParent;
}

BOOL WINAPI DllMain(HANDLE hInst, ULONG ul_reason_for_call, LPVOID lpReserved)
{
  g_hInstance = (HINSTANCE)hInst;
  return TRUE;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T06:09:55.957

Makesis 会在您编译时列出所有插件及其导出的函数。

如果您的插件未列出，则它不在正确的目录中或根本没有导出。如果它被列出但名称错误（`tbox::_myFunction`或`tbox::myFunction@xyz`），那么您有装饰问题。您可以尝试`extern "C" HWND __declspec(dllexport) __cdecl myFunction(...`，如果这还不够，您可能需要一个[.def](http://msdn.microsoft.com/en-us/library/d91k01sh%28v=vs.80%29.aspx)文件。

您还可以使用[Dependency Walker](http://www.dependencywalker.com/)查看导出...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-12T04:35:03.253

如果要在当前脚本目录中加载插件，请使用以下命令：

```
 !addplugindir "." 
```

# ios - 将视图及其内容保存为图像或 pdf

> ID：11425922
> 
> 赞同：-1
> 
> 时间：2012-07-11T05:13:43.920
> 
> 标签：ios, ios5, uiimage, pdf-generation

我有一个视图，其中插入了许多文本字段和值。现在我想将此视图保存为图像或 pdf。

有什么办法可以做到这一点？我正在为该项目使用 IOS 5.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:25:08.720

您可以截取视图并保存：

```
UIGraphicsBeginImageContext(self.view.frame.size);
[[self.view layer] renderInContext:UIGraphicsGetCurrentContext()];
UIImage *screenshot = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

现在您有了整个视图内容的 UIImage，您可以按照自己喜欢的方式使用它。

# replace - Linux/Cygwin：用其他模式匹配的结果替换模式（sed/find？）

> ID：11425924
> 
> 赞同：0
> 
> 时间：2012-07-11T05:14:00.443
> 
> 标签：replace, sed, find, cygwin, extract

我有一个大型文档网站，如下所示：
`<title>DOCTITLE</title>`
`<h1>Some Title</h1>`

我正在尝试使用 Cygwin 在每个文件中将 DOCTITLE 替换为 Some Title。

更具体地说，我需要`<h1>`从每个文件中提取标签之间的任何文本，并将文字字符串“DOCTITLE”替换为提取的文本。

这是一个行不通的想法，但说明了我所追求的精神：

```
find . -name "*html"  
       -exec sed -i 
                's/DOCTITLE/'$(grep "h1" | sed 's/<h1>\(.*\)<\/h1>/\1/')'/'
'{}' /; 
```

不出所料，这会失败，因为 grep 没有输入，它会破坏`<h1>`.

有任何想法吗？

感谢您的时间和专业知识！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T07:38:47.660

这可能对您有用（GNU sed）：

```
find . -name "*html" -exec sed -i '$!N;s/DOCTITLE\([^\n]*\n<h1>\([^<]*\)<\/h1>\)/\2\1/;P;D' {}\; 
```

这需要首先进行广泛的测试！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T13:05:53.523

您的方法 - 使用 - 将`$( … )`不起作用，因为`sed`'`-exec`参数不处理该语法。然而，我们可以做的是调用`bash`为我们做一些工作：

```
find . -name '*.html' -exec /bin/bash -c 'sed "s/DOCTITLE/$(sed -n '\''\,<h1>.*</h1>,{s,<h1>\(.*\)</h1>,\1,p;q}'\'' '\''{}'\'')/" "{}"' \; 
```

外部`sed`完全按照您的`sed`命令执行。内部`$( … )`部分被扩展为仅生成*第一个*`bash`s之间的文本（如果它不需要只获得第一个匹配项会简单得多）。 *`<h1>`*

 *具体来说，默认情况下，该内部`sed`不打印任何内容（该`-n`），然后对于匹配正则表达式的行`<h1>.*</h1>`，它运行`s,<h1>\(.*\)</h1>,\1,p;q`，即剥离HTML标签，打印结果，然后退出；这`q`确保我们只打印出第一个匹配项。

注意我已经避免需要使用`grep`using `sed -n`; 您可以使用以下命令交替执行相同的操作，并`-m`可以选择`grep`将命令限制为第一个匹配项。

```
find . -name '*.html' -exec /bin/bash -c 'sed "s/DOCTITLE/$(grep -m1 '\''<h1>.*</h1>'\'' '\''{}'\'' | sed '\''s,<h1>\(.*\)</h1>,\1,'\'')/" "{}"' \; 
```

在这两种情况下，都会出现一些稍微可怕的引用：`'\''`序​​列是将单引号插入单引号字符串中。我们需要引用`sed`语句以确保标题中的任何空格都不会导致问题，并且我们需要引用文件名以便能够处理文件名中的空格。*

# eclipse - Eclipse Dali JPA 错误：“控制台配置”“不存在”

> ID：11425932
> 
> 赞同：25
> 
> 时间：2012-07-11T05:15:04.460
> 
> 标签：eclipse, jpa, sts-springsourcetoolsuite, dali

我到处寻找并试图找到这个错误的根源，但我没有运气。我安装了带有 Dali JPA 工具的 Eclipse STS。我有一个连接 HSQLDB 和实体的项目。当我转到 JPA 透视图时，我的错误控制台中有此错误：

`Console configuration "" does not exist.`

这是什么意思？

谢谢。

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-07-11T15:20:09.983

我也遇到过这个问题。当您从源代码控制存储库中签出项目并且项目创建者持有的某些配置未在团队成员之间共享时出现。碰巧，您是否使用 HibernateJPA 作为 JPA 实现？在这种情况下，请检查以下内容：

转到您的项目，在那里，检查*“默认休眠控制台配置”*标签`Properties > Hibernate Settings`下方的组合框 并选择一个控制台配置。如果不存在控制台配置，进入并在创建新配置下，指定项目名称，在“数据库连接：”组合框中选择“[JPA 项目配置连接]”，单击应用并返回“休眠设置”设置页面您的项目配置。*`Run > Run Configurations ...``Hibernate Console Configuration`*

 *![在 Hibernate 设置中选择控制台配置](../Images/64b67ebbf4aaaedde0525fc1d17b15b4.png)

![在此处输入图像描述](../Images/1c103972dc6fc47546298852c14262f4.png)

一切完成后，清理你的项目（也许在错误消失之前已经完成了几次，由于一些 Eclipse 问题），如果项目没有正确刷新，重新启动 Eclipse（是的，这有点极端但是有时它只是工作）。

如果您使用 Maven 和 m2e 插件，请右键单击您的项目并转到`Maven > Update Project Configuration...`并等待项目刷新。 ![在此处输入图像描述](../Images/87c3327e72f9237a728408da90f7333b.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-14T20:11:45.873

如果未显示 Hibernate 控制台配置，请禁用项目的 Hibernate 支持并重新启用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-12T14:59:50.690

有时，如果没有带有项目名称的控制台配置，并且禁用和重新启用休眠支持不会导致出现，则必须创建一个。这可以通过`Run->Run Configurations`. 但是，如果您在尝试创建与项目同名的新休眠控制台配置时收到“控制台配置 [名称] 已存在”的错误，则可能是因为您有一个`Java Application`具有该名称的运行配置。在这种情况下，您需要先删除`Java Application`运行配置，然后才能创建`Hibernate`运行配置。*

# dojo - 如果 dijit.form.NumberTextBox 中的输入无效，如何保持焦点？

> ID：11425935
> 
> 赞同：0
> 
> 时间：2012-07-11T05:15:27.630
> 
> 标签：dojo, dojox.grid, dijit.form

我在网格单元中有一个 NumberTextBox。如果输入超出范围或无效，如何保持焦点？（这样用户不能点击离开单元格）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-20T13:21:33.217

你可以试试这样的

```
function lockUserOnInput() {

  if( ! dijit.byId('NumberBox').validate()) {
     dijit.byId('NumberBox').focus();
     dijit.byId('NumberBox').inputNode.focus(); // make damn sure
  }

}

setInterval(lockUserOnInput, 250); // set the interval as intense as you need it to be :) 
```

# python - Python：在两个列表中压缩和配对匹配元素的快速而简约的方法

> ID：11425938
> 
> 赞同：6
> 
> 时间：2012-07-11T05:15:41.650
> 
> 标签：python

我有：

```
>>> As = [1, 2, 5, 6]
>>> Bs = [2, 3, 4, 5] 
```

我想要`zip_fn`下面的东西：

```
>>> Rs = zip_fn(As, Bs, cmp)
>>> Rs
[(1, None), (2, 2), (None, 3), (None, 4), (5, 5), (6, None)] 
```

换句话说，给定两个任意序列`As`和`Bs`，我想生成一个元组列表，`Rs`使得满足的选择`cmp(a, b) == 0`一起配对成它们自己的 tuple `(a, b)`，但是那些匹配`As`和`Bs`不匹配的选项分别输出为`(a, None)`和`(None, b)`。

几点：

*   我不担心重复`As`或`Bs`不会有任何重复。
*   `Rs`可以是产生相同序列的迭代器。
*   的顺序`Rs`并不重要。

我已经使用直接的预排序循环实现了满足功能要求的东西，但它大约有 30 行。我正在寻找能够更好地利用内置函数或`itertools`esque 库来实现更短代码和更快（C 本机）运行的东西。

**编辑：**

我应该更清楚地说明这一点。尽管为了简洁起见，我在上面的示例中使用了纯数字列表，但我实际使用的元素是元组，并且`cmp`仅测试元组的一部分是否相等。*将元素视为记录*和与*关键字段*`cmp`匹配的内容可能更容易。我可以将元素包装在一个类中并使其在键上可散列，但其他任何东西都不需要这样的设置，因此任何需要这样做的解决方案都会将其作为额外的代码和运行时开销。

 *将其总结为上述几点的补充：

*   `cmp`用于比较至关重要，因为它不是基本平等的测试。
*   结果`[(a, b)]`，`a`应该是与 中的元素之一相同的实例和中的元素之一`As`的`b`相同实例`Bs`，前提是它们不是`None`。
*   `As`和`Bs`不可散列的元素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T06:22:57.787

我想这与您已经拥有的类似：

```
from collections import deque

def pairs(xs, ys):
    xs = deque(sorted(xs))
    ys = deque(sorted(ys))

    while xs and ys:
        c = cmp(xs[0], ys[0])
        if c == 0:
            yield xs.popleft(), ys.popleft()
        elif c < 0:
            yield xs.popleft(), None
        else: # c > 0:
            yield None, ys.popleft()

    for x in xs: yield x, None
    for y in ys: yield None, y

xs = [1, 2, 5, 6]
ys = [2, 3, 4, 5]        
print list(pairs(xs, ys))
# [(1, None), (2, 2), (None, 3), (None, 4), (5, 5), (6, None)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T06:50:01.120

```
([(i,j) for i in As for j in Bs if cmp(i,j) == 0] +
[(i,None) for i in As if all(cmp(i,j) !=0 for j in Bs)] +
[(None, j) for j in Bs if all(cmp(i,j) !=0 for i in As)]) 
```

但是，时间复杂度将为 n^2，因为根据您的描述，我们无法判断一个元素是否大于另一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T05:37:30.480

我意识到这没有考虑到`cmp()`操作，但希望它会有所帮助。

```
>>> As = [1, 2, 5, 6]
>>> Bs = [2, 3, 4, 5]
>>> result = []
>>> for n in set(As + Bs):
...     result.append((n if n in As else None, n if n in Bs else None))
...
>>> result
[(1, None), (2, 2), (None, 3), (None, 4), (5, 5), (6, None)]
>>> 
```

与列表组合相同：

```
>>> result = [ (n if n in As else None, n if n in Bs else None) for n in set(As + Bs)]
>>> result
[(1, None), (2, 2), (None, 3), (None, 4), (5, 5), (6, None)]
>>> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T05:31:46.627

这个怎么样：

```
As = set([1, 2, 5, 6])
Bs = set([2, 3, 4, 5])
values = [(a, a) if a in Bs else (a, None) for a in As] + [(None, b) for b in Bs if b not in As]
>>> values
[(1, None), (2, 2), (5, 5), (6, None), (None, 3), (None, 4)] 
```

或使用集合：

```
>>> values = [(a, a) for a in As.intersection(Bs)] + [(a, None) for a in As - Bs] + [(None, b) for b in Bs - As]
>>> values
[(2, 2), (5, 5), (1, None), (6, None), (None, 3), (None, 4)]
>>> 
```

> 我不担心 As 或 Bs 中的重复项，因为不会有任何重复项。

所以 make then sets 给出了几乎恒定的查找时间。

> Rs 的顺序并不重要。

所以我们可以检查 A 然后简单地检查 B :)

我不知道这是否正确，这只是我的想法，如果有问题我表示歉意。

**更新**
这有点更具挑战性，因为我们不能散列它，我们基本上被困在 O(n**2) 抱歉:(

我试图使其尽可能优化。

```
As = [1, 2, 5, 6]
Bs = [2, 3, 4, 5]

indicies_a, indicies_b, values = [], [], []
for index_a, a in enumerate(As):
    for index_b, b in enumerate(Bs):
        if cmp(a, b) == 0:
            values.append((a, b))
            indicies_a.append(index_a) 
            indicies_b.append(index_b)

values += [(As[index], None) for index in set(range(len(As))) - set(indicies_a)] + [(None, Bs[index]) for index in set(range(len(Bs))) - set(indicies_b)]

>>> values
[(2, 2), (5, 5), (1, None), (6, None), (None, 3), (None, 4)]
>>> 
```

抱歉，我想不出更简洁的版本，我尽量让我的背心尽可能快。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-11T08:35:17.437

我决定使用类似@thg435 的回答和使用*（编辑：更改**为@EOL 指出的）*，这帮助我减少了我最初拥有的大量代码。~~`deque`~~ *`list`*

 **我选择这个的原因如下：

*   时间复杂度计算很简单，而且很容易预测。
*   它不需要更改界面。
*   我觉得代码量和预期的运行时效率之间有一个很好的平衡。

实施如下：

```
def izip_pairs(xs, ys, cmp):
    xs = list(reversed(sorted(xs, cmp)))
    ys = list(reversed(sorted(ys, cmp)))

    while xs or ys:
        delta = ((not xs) - (not ys)) or cmp(xs[-1], ys[-1])

        x = xs.pop() if delta <= 0 else None
        y = ys.pop() if delta >= 0 else None
        yield x, y 
```

**为了比较：**

受到每个人基于集合的答案的启发，为了比较起见，我更改了界面以适应并实现了基于哈希查找的解决方案。

```
def izip_keys(xs, ys, key):
    xs = {key(x): x for x in xs}
    ys = {key(y): y for y in ys}

    for k in set(xs.keys() + ys.keys()):
        yield xs.get(k, None), ys.get(k, None) 
```

**时间差异：**

我对以下结果的结论是，对于大量元素，在排序列表上进行循环的扩展性要好得多，而散列查找仅对小*Ns*更快。

```
>>> xs = range(100, 200)
>>> ys = range(150, 250)
>>> xs = map(lambda n: tuple(range(n, n + 10)), xs)
>>> ys = map(lambda n: tuple(range(n, n + 10)), ys)

>>> def profile_pairing():
...     list(izip_pairs(xs, ys, lambda x, y: cmp(x[:4], y[:4])))
...
>>> def profile_keying():
...     list(izip_keys(xs, ys, lambda v: v[:4]))
...

>>> from timeit import Timer
>>> Timer(profile_pairing).timeit(1000)
0.575916051864624
>>> Timer(profile_keying).timeit(1000)
0.39961695671081543

>>> xs = map(lambda n: tuple(range(n, n + 10)), range(1000, 2000))
>>> ys = map(lambda n: tuple(range(n, n + 10)), range(1500, 2500))
>>> Timer(profile_pairing).timeit(100)
0.5289111137390137
>>> Timer(profile_keying).timeit(100)
0.4951910972595215

>>> xs = map(lambda n: tuple(range(n, n + 10)), range(10000, 20000))
>>> ys = map(lambda n: tuple(range(n, n + 10)), range(15000, 25000))
>>> Timer(profile_pairing).timeit(10)
0.6034290790557861
>>> Timer(profile_keying).timeit(10)
0.9461970329284668

>>> xs = map(lambda n: tuple(range(n, n + 10)), range(100000, 200000))
>>> ys = map(lambda n: tuple(range(n, n + 10)), range(150000, 250000))
>>> Timer(profile_pairing).timeit(1)
0.6421248912811279
>>> Timer(profile_keying).timeit(1)
1.253270149230957 
```

（注意：在所有情况下，使用`deque`* 而不是1% 的速度快。*请参阅后面的一些编辑）`list(reverse(...))`***

# java - 学习Java人脸识别技术

> ID：11425941
> 
> 赞同：1
> 
> 时间：2012-07-11T05:15:48.527
> 
> 标签：java, face-recognition

首先，我将说明我的情况。我今年 22 岁。最后一年 - BSc 软件开发。我正在自学先进技术。现在的问题。

我正在寻求学习“Java人脸识别技术”。我用谷歌搜索，在这里也发现了同样的问题。但是他们没有帮助，因为这些问题是由已经了解该技术的人提出的，因此它们不适合对此一无所知的初学者。我喜欢的唯一面部识别是 face.com。但是，他们没有提供适当的教程，因为它不仅适用于 Java。

请善意帮助我学习这项技术。我需要教程/书籍/PDF 来学习它。是的，我是这方面的初学者，所以我需要从初学者级别开始。如果你能帮助我真的很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-11T05:25:37.160

[This](https://stackoverflow.com/questions/1182849/face-detection-in-java) previous SO post 和[this](http://fivedots.coe.psu.ac.th/~ad/jg/nui08/) page 似乎是一个很好的开始方式。最基本的想法之一似乎是使用[Eigen Faces （](http://en.wikipedia.org/wiki/Eigenface)[这里](http://www.face-rec.org/algorithms/PCA/jcn.pdf)应该有更多信息）并将其与[JavaCV](http://code.google.com/p/javacv/)（它是[OpenCV](http://opencv.org/)的包装器）等成像库结合起来。

我认为这应该让你朝着正确的方向开始。在我看来，人脸识别是一个致力于混合人工智能和图像处理技术的领域，所以我认为你不会找到一个包含有关该主题的所有信息的单一位置。

我的建议是通读可用的资源，然后决定你要使用什么以及如何使用。

# jquery - 分页拖放 Tablesorter 插件

> ID：11425943
> 
> 赞同：1
> 
> 时间：2012-07-11T05:16:18.763
> 
> 标签：jquery, datatables, paging, tablesorter

我仅限于使用 tablesorter 功能，因为在父行下隐藏子行等。所以我使用“tablesorter mod”功能[http://www.pengoworks.com/workshop/jquery/tablesorter/tablesorter.htm](http://www.pengoworks.com/workshop/jquery/tablesorter/tablesorter.htm)

当我尝试添加 dragtable.js 并尝试拖放时，只有当前页面会正确重新排列。在其他页面上，只有标题被移动，导致数据和标题不匹配。是否可以同时拥有分页、拖放和表格排序器功能。我只想拖放以移动所有页面的列，包括显示的页面。

* * *

```
<script type="text/javascript" src="jquery-1.2.3.js"></script>
    <script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jquery.tablesorter.mod.js"></script>
<script type="text/javascript" src="jquery.tablesorter.pager.js"></script>
<script type="text/javascript" src="jquery.tablesorter.collapsible.js"></script>
<script type="text/javascript"  src="jquery.dataTables.js"></script>
<script type="text/javascript"  src="ColReorder.js"></script>
<script type="text/javascript"  src="dragtable.js"></script>
<script type="text/javascript">
        $(document).ready(
            function (){
                $(".tablesorter")
                    /*
                     * td.collapsible = collapse to the first table row and show +/-
                     * td.collapsible_alt = anchor to order number
                     */
                    .collapsible("td.collapsible", {
                        collapse: true
                    })
                    .tablesorter({
                    // set default sort column
                    sortList: [[4,0]],
                    // don't sort by first column
                    headers: {0: {sorter: false}}
                    // set the widgets being used - zebra stripping
                    , widgets: ['zebra']
                    , onRenderHeader: function (){
                        this.wrapInner("<span></span>");
                    }
                    , debug: false
                })
                .tablesorterPager({container: $("#pager"), positionFixed: false})
                    ;

                    // Expand/Collapse all
                        $('a#ShowButton').click(function(){
                            var linkLabel = this.innerHTML;
                            switch(linkLabel) 
                            {
                            case "Show History":
                                $("td.collapsible a").removeClass("expanded").click();
                                this.innerHTML= "Hide History"
                                break;
                            case "Hide History":
                                $("td.collapsible a").addClass("expanded").click();
                                this.innerHTML= "Show History"
                                break;
                            }
                        return false;
                        }); 

                        var oTable = $('#example').dataTable( {
                        "sDom": 'Rlfrtip'
                        } );

            }

        );
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:45:47.490

尝试使用在页面更改/过滤时触发的事件：

```
$("#example").on("draw", function() {
    someFunction();
}); 
```

在那里你可以运行拖放功能。另一种选择是在每次拖放后保存列布局，然后在表格触发绘制时重新创建该布局。我不确定你使用的插件是如何工作的，但我认为你可以使用 draw 事件并让它工作。

# c# - 如何使用javascript在选择gridview复选框时创建表格行

> ID：11425944
> 
> 赞同：0
> 
> 时间：2012-07-11T05:16:22.753
> 
> 标签：c#, javascript, jquery, asp.net

我正在使用带有复选框的网格视图，我需要在检查网格视图中的任何复选框时从中创建一个表格行。我需要帮助才能使用 javascript 获取 gridview 的选定行。

GridView 源代码

```
<asp:GridView ID="GrdCustomer" runat="server" BorderColor="#999999" CellPadding="3"
        ForeColor="Black" GridLines="Vertical" Width="640px" AllowPaging="True" AutoGenerateColumns="False"
        OnRowDataBound="GrdCustomer_RowDataBound">
        <Columns>
            <asp:TemplateField HeaderText="Select" ItemStyle-Width="50px">
                <ItemTemplate>
                    <input id="selector" onclick="javascript:bindToList(this);selectCustomers();" runat="server" type="checkbox" />
                </ItemTemplate>
                <HeaderTemplate>
                    <input id="selector" onclick="javascript:SelectDeselectAllCheckboxes(this);selectCustomers(); " runat="server"
                        type="checkbox" />
                </HeaderTemplate>
                <ItemStyle Width="50px" HorizontalAlign="Center"></ItemStyle>
            </asp:TemplateField>
            <asp:BoundField DataField="Salutation" HeaderText="Salutation">
                <ItemStyle HorizontalAlign="Center" />
            </asp:BoundField>
            <asp:BoundField DataField="Name" HeaderText="Client Name">
                <ItemStyle HorizontalAlign="Center" />
            </asp:BoundField>
            <asp:BoundField DataField="Address" HeaderText="Address" SortExpression="Email">
                <ItemStyle HorizontalAlign="Center" />
            </asp:BoundField>
            <asp:BoundField DataField="Title" HeaderText="Title">
                <ItemStyle HorizontalAlign="Center" />
            </asp:BoundField>
            <asp:BoundField DataField="Id" HeaderText="Id" />
        </Columns>
        <FooterStyle BackColor="#CCCCCC" />
        <PagerStyle BackColor="#999999" ForeColor="Black" />
        <SelectedRowStyle BackColor="#000099" Font-Bold="True" ForeColor="White" />
        <HeaderStyle BackColor="Black" Font-Bold="True" ForeColor="White" />
        <AlternatingRowStyle BackColor="#CCCCCC" />
    </asp:GridView> 
```

在复选框检查状态下调用基本脚本（仅启动）

```
 function selectCustomers() {
        alert("Hey I'm over here!!!");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T06:08:12.650

我没有在 gridview 上尝试过，但是您可以通过使用JS 中元素的**parentNode属性来选择“tr”元素。**'tr' 可能是您选择的行。

例如。

单击复选框使用以下代码，

```
onclick="javascript:selectCustomers(this);" 
```

然后在函数中，

```
function selectCustomers(chkbox) {
       var desiredparentelement = chkbox.parentNode.parentNode; // Use parent property to get tr
    } 
```

检查您的 html 元素以了解复选框有多少父项。使用 Mozilla 或 Chrome 工具检查元素。

# python - 如何使用 Nose 抑制失败测试用例的跟踪？

> ID：11425947
> 
> 赞同：5
> 
> 时间：2012-07-11T05:16:34.217
> 
> 标签：python, testing, nose, nosetests

我正在用鼻子写一个测试服，并且希望失败的案例显示一个输出，比如

“失败：is_even(5)：不偶数”

而不是默认输出：

```
======================================================================
FAIL: seed_db.test_generator(5,)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/usr/local/lib/python2.7/dist-packages/nose/case.py", line 197, in runTest
    self.test(*self.arg)
  File "/home/apurcell/tests/prism/seed_db.py", line 59, in is_even
    nose.tools.eq_(x % 2, 0, msg="Not even")
  File "/usr/local/lib/python2.7/dist-packages/nose/tools.py", line 31, in eq_
    assert a == b, msg or "%r != %r" % (a, b)
    AssertionError: Not even

---------------------------------------------------------------------- 
```

鼻子有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T07:51:05.510

如果您想改变鼻子的行为，您应该编写一个插件（[请参阅此处的 API 文档](http://nose.readthedocs.org/en/latest/plugins/interface.html)）。在您的情况下，听起来您想更改报告错误的方式，因此您需要提供`formatError()`和`formatFailure()`. 可能您想要编辑异常消息（包括行号），并限制回溯的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-08T13:58:10.553

以下输出与您想要的类似但不完全相同（它还会更改成功的测试输出，这可能不是您想要的）。它使用 tap.py 输出 TAP（测试任何协议）而不是通常的 unittest 输出。

```
nosetests --with-tap --tap-stream testcases-rsysflow.py 
```

输出如下所示：

```
bjb@rhino$ nosetests testcases-rrrr.py --with-tap --tap-stream
# TAP results for TestThing
ok 1 - test_create_and_get (testcases-rrrr.TestThing)
ok 2 - test_del_one (testcases-rrrr.TestThing)
ok 3 - test_get_all (testcases-rrrr.TestThing)
not ok 4 - test_get_not_exist (testcases-rrrr.TestThing)
ok 5 - test_get_wrong_indir (testcases-rrrr.TestThing)
ok 6 - test_replace_and_get (testcases-rrrr.TestThing)
ok 7 - test_set_should_fail (testcases-rrrr.TestThing)
1..7 
```

使用测试任何协议（我说的是协议，而不是这个特定的实现），您可以在错误的破折号之后输出诊断信息 - 但我不知道如何使用这个实现来做到这一点。

这个实现很方便，因为我只需要安装 tap.py ( `pip install tap.py`) 并将这两个命令行参数放在我的 unittest 测试的 nosetest 调用上，然后 poof - TAP 格式的输出。现在可以将其插入 Jenkins。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T07:34:22.857

一种可能的解决方案是将错误流重定向到类似对象的流中并在那里处理不同的输出。这可能类似于以下代码片段：

```
import sys

class MyErrorStream():
    def write(self, txt):
        # Do something if
        # output contains
        # special exception
        altered_txt = 'My special exception is:\n' + txt

        sys.__stderr__.write(altered_txt)

if(__name__ == '__main__'):
    error_stream = MyErrorStream()
    sys.stderr = error_stream

    assert(1 == 0) 
```

但是这个解决方案并不是最好的。更改堆栈跟踪的另一种方法是修改处理输出的内部鼻子类。您可以对其进行子类化并覆盖/扩展创建输出文本的方法。因为我没有使用鼻子，所以我不能给出最小的代码片段。尽管如此，我希望我能帮助你。

# asp.net - 如何以编程方式将未经身份验证的请求重定向到 STS？

> ID：11425961
> 
> 赞同：1
> 
> 时间：2012-07-11T05:17:45.413
> 
> 标签：asp.net, wif, claims-based-identity

我需要首先将未经身份验证的用户重定向到 ASP.NET 网站上的登录页面，然后我将执行一些业务逻辑来确定三种身份验证类型之一：

1.  用户将使用用户名和密码手动登录
2.  用户将被重定向到 STS 以进行联合登录
3.  或者（在某些情况下）用户根本不需要登录，系统只会设置他们的 IsAuthenticated=true 以便他们可以继续他们的流程。

我的问题是，如果它是选项 #2，我如何以编程方式将请求重定向到 STS，就像我已选中下图中的选项“将所有未经身份验证的请求重定向到 STS”一样？

![在此处输入图像描述](../Images/cb045f7abe39dbcc0fb7615be6681d01.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-19T14:41:14.820

我们必须做什么将其设置为“将所有未经身份验证的请求重定向到 STS”，然后查看接收 Active Directory 服务器上的 ISS 日志，以查看重定向到的 URL 的样子。然后，我们能够从 Login.aspx 页面动态构建 URL，并在必要时手动重定向。

# xml - 如何合并具有“相同父亲”并具有精确“方法”序列的两个节点（使用 XSLT）？

> ID：11425963
> 
> 赞同：-1
> 
> 时间：2012-07-11T05:17:53.080
> 
> 标签：xml, xslt, xslt-1.0, xslt-2.0, xmlnode

我需要合并两个节点MANHATTAN：

因为我们的系统规则如下：

“ **CREATE** A + **MODIFY** A” 仍然是“ **CREATE** A with the combined attributes”

输入文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<world>
<COUNTRY id="USA" >
  <STATE id="NEW JERSEY">
     <CITY id="NEW YORK" method="modify">

        <DISTRICT id="MANHATTAN" method="create">
           <attributes>
              <population>99 </population> 
              <income> 10000</income>
           </attributes>
        </DISTRICT>

        <DISTRICT id="MANHATTAN" method="modify">
           <attributes>
              <temperature>78</temperature>
              <income>15000</income>
              <information>suburb of newyork</information>
           </attributes>
        </DISTRICT>

     </CITY>

  </STATE> 
```

预期输出：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <world>
 <COUNTRY id="USA" >
  <STATE id="NEW JERSEY">
     <CITY id="NEW YORK" method="modify">

        <DISTRICT id="MANHATTAN" method="create">
           <attributes>
              <population>99 </population> 
              <temperature>78</temperature>
              <income>15000</income>
              <information>suburb of newyork</information>
           </attributes>
        </DISTRICT>

     </CITY>
 </STATE>
</COUNTRY>
</world> 
```

请帮忙，我刚开始使用 XSLT，用 Perl 或 Python 做这件事需要几个小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T09:42:05.793

Adapt solution from similar problem at [how to merge two nodes having "the same father", the same method and the same id=0 (using XSLT)?](https://stackoverflow.com/questions/11426423/how-to-merge-two-nodes-having-the-same-father-the-same-method-and-the-same-id/11429705#11429705)

Read the solution to see how grouping works, and then vary the grouping keys accordingly.

# java - 在 IntelliJ 中的模块之间共享 Java 包？

> ID：11425966
> 
> 赞同：10
> 
> 时间：2012-07-11T05:18:09.013
> 
> 标签：java, intellij-idea, package

我试图弄清楚如何在单个 IntelliJ 项目中的两个模块之间共享包，但我似乎找不到正确的方法。我知道它可以在 Eclipse 中完成，但我不是很精通它。简而言之，我试图重现由 AppEngine 连接的 Android 项目创建的相同类型的项目环境。

这是“问题”，尽我所能

项目 A。

*   模块 1；AppEngine + GWT + 其他
*   模块 2；安卓

每个模块在项目的主目录中都有自己的源目录：

*   /ProjectA/Module1/src
*   /ProjectA/Module2/src

我为这两个模块创建包，并编写每个模块所需的各种类。大多数类是模块/平台独有的，并被打包到自己的命名空间中

模块 1

*   com.example.myproject.server
*   com.example.myproject.server.domain
*   com.example.myproject.server.services
*   ...

模块 2

*   com.example.myproject.client
*   com.example.myproject.client.activities
*   com.example.myproject.client.fragments
*   ...

但是，我在两个模块中都使用了一些相同的接口和枚举：现在我希望将所有相同的代码放在两个模块之间共享的单个包中，因此我不必每次都在包之间复制源代码我改变了一些东西。

*   com.example.myproject.shared
*   com.example.myproject.shared.interfaces
*   ...

我知道 IntelliJ 将允许您将多个内容根配置为模块配置的一部分。但是，如果两个模块属于同一个 IntelliJ 项目，那么它们似乎并不关心共享相同的内容根......？有没有更好的方法来配置我的项目？还是我错过了什么..？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T07:05:30.717

您可以将共享代码移动到另一个具有自己的内容根的模块中，例如：

```
/ProjectA/Module3/src 
```

然后将Module3的模块依赖添加到Module1和Module2。

# c++ - 如何为使用向量的函数编写 SWIG 接口文件 ?

> ID：11425970
> 
> 赞同：1
> 
> 时间：2012-07-11T05:18:41.303
> 
> 标签：c++, python, swig

我有一个 c++ 文件，我想使用 SWIG 将其转换为 Python 模块。该文件由一个函数组成`vector<string> load(string input) {`。当然，我正在使用 c++ 标头`<vector>`和`<string>`. 理想情况下，我希望这个函数在从 Python 调用时返回一个 Python 列表。不幸的是，我对 SWIG 的经验相对较少，我想知道最简单的方法是什么。我读到了在接口文件中使用 %include "std_string.i" 和 %include "std_vector.i" ，但到目前为止，我只知道如何使用 std_vector 来处理`vector<int>`or`vector<double>`等​​，但不是`vector<string>`。不过，一定有办法做到这一点。我只是想知道是否有人可以向我解释如何。我在 Mac OsX 10.7.4 和 Python 2.7.1 上使用 SWIG 2.0.7。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-11T05:40:09.570

这就是我所做的：

```
%include "stl.i"
%template(_string_list) std::vector< std::string >; 
```

# postgresql - PostgreSQL 列名作为两个表中的关键字

> ID：11425971
> 
> 赞同：0
> 
> 时间：2012-07-11T05:18:55.983
> 
> 标签：postgresql, keyword

我有 2 个表 1 和表 2

```
table1
id,desc

table2
id,t1_id,desc 
```

我如何根据 desc="something" 选择行

```
select * from table1 t1 
left join table2 t2 on t1.id=t2.t1_id 
where t1.desc='something' 
```

表 1 中的数据具有 desc "something" 但它没有返回任何内容

我试过了

```
where "desc"='something' 
```

但给予

> 不明确的列 desc 错误。

我如何从 postgreSQL 中 desc='something' 的表 1 中检索数据

非常感谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:24:16.380

用于`"`转义保留关键字。

```
select * from table1 t1 
left join table2 t2 on t1.id=t2.t1_id 
where t1."desc"='something' 
```

但是，如果列在 2 个表中的名称相等，请不要忘记添加表名或别名。如果不指定表，数据库引擎不知道取哪一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T05:27:59.903

我认为您正在寻找的答案是：

```
SELECT * from table1 JOIN table2 AS t 
ON t.t1_id = table1.id WHERE table1.desc='something' 
```

# java - 列表 作为java中的命令行参数

> ID：11425973
> 
> 赞同：0
> 
> 时间：2012-07-11T05:19:03.493
> 
> 标签：java, command-line-arguments

我想在 Java 中提供 3 个输入作为命令行参数：

1.  `inputFileLocation`
2.  `configFileList`
3.  `outputFileLocation`

但我无法理解如何将列表作为命令行参数。我试过这样的事情：

```
public class BatchLauncher {
    public static void main(String[] args) {
        int argc = 0;
        String inputFileLocation = argc < args.length ? args[argc++] : null;
        String configFileList = argc < args.length ? args[argc++] : null;
        String outputFileLocation = argc < args.length ? args[argc++] : null;
        CaptureBatch captureBatch = new CaptureBatch();
        captureBatch.setInputFileLocation(inputFileLocation);
        captureBatch.setConfigFileList(configFileList);
        captureBatch.setOutputFileLocation(outputFileLocation);
    }
} 
```

我在`captureBatch.setConfigFileList(configFileList);`.

输入将如下所示：

```
D:/input a.conf,b.conf,c.conf D:/output 
```

其中, `D:/input`是带分隔符的, 是.`inputFileLocation``a.conf,b.conf,c.conf``configFileList``,``D:/output``outputFileLocation`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:21:59.370

命令行参数在 Java 中被聚合成一个`String[]`并传递给你`main`的未处理。

```
public static void main(final String[] args) { // code } 
```

随着您`D:/input a.conf,b.conf,c.conf D:/output`的值的示例输入`args`成为分隔数组的`["D:/input", "a.conf,b.conf,c.conf", "D:/output"]`位置。`[]``String`

你有两个选择：

1.  手动解析此`args`数组并手动将其拆开并自己处理每个元素。在这种情况下，您需要`Arrays.asList(args[2].split(","));`使用第二个参数将其转换`List<String>`为您想要的 a。
2.  使用[JSAP（Java Simple Argument Parser）之](http://www.martiansoftware.com/jsap/)类的东西，让一个经过良好测试且成熟的库为您解析、验证和格式化输入。[具体来说，它可以解析您为您传递的第二个参数。](http://www.martiansoftware.com/jsap/doc/ch10.html)

不用说，我更喜欢第二种选择，因为第一种只是脆弱的忙碌工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T05:39:40.277

```
public static void main(String[] args) {
    int argc = 0;
    if(args.length>2){
    String inputFileLocation = args[0];
    String configFileList = args[1];
    String outputFileLocation = args[2];

    List<String> lList=Arrays.asList(configFileList.split(","));
    System.out.println(inputFileLocation);
    System.out.println(lList);
    System.out.println(outputFileLocation);
    }
} 
```

**输出：**

D:/输入

[a.conf，b.conf，c.conf]

D:/输出

# objective-c - 在 NSArray 上使用下标时编译器错误“找不到预期的方法”

> ID：11425976
> 
> 赞同：33
> 
> 时间：2012-07-11T05:19:16.803
> 
> 标签：objective-c, cocoa, compiler-errors, nsarray, objective-c-literals

我编写了这个简单的代码来尝试`NSArray`s 的新 Objective-C 文字语法：

```
NSArray *array = @[@"foo"];
NSLog(@"%@", array[0]); 
```

第一行工作正常，但下标导致错误：

> 在“NSArray *”类型的对象上未找到读取数组元素的预期方法

只是想知道我是否做错了什么，或者文字是否还没有完全实现。我正在使用 Apple LLVM 4.0 进行编译并使用 iOS 5 SDK。

这也是错误的屏幕截图。

![错误](../Images/aa3b98c7ed25006b0aa9d60dabe3487e.png)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-07-11T08:06:31.237

您必须使用 iOS 6 或 OS X 10.8 SDK 进行编译——否则 Foundation 对象没有文字语法的下标位的必要方法。* 特别是在这种情况下，下标期望`objectAtIndexedSubscript:`由`NSArray`，这是为与此编译器功能交互而创建的新方法。不过，新语法中与对象创建有关的部分应该可以正常工作——我认为这不需要任何新方法。

进一步阅读[http://clang.llvm.org/docs/ObjectiveCLiterals.html](http://clang.llvm.org/docs/ObjectiveCLiterals.html)

* * *

*我基于 borrrden 进行的一些研究：[https ://stackoverflow.com/a/11407844/603977](https://stackoverflow.com/a/11407844/603977)

^([我在这个答案上得到了很多支持，我真的觉得这是建立在 borrrden 的基础上的。请，如果您认为我的回答值得一票，请点击并在那里投票。])

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-07-25T20:21:00.197

如果您的目标不是 iOS 6 或 OS X 10.8，我想指出，让下标工作仍然非常容易。您所要做的就是将所需的方法添加为您希望下标工作的类的类别，并适当地实现这些方法。因此，将方法添加到以下类中：

`NSArray`：`- (id)objectAtIndexedSubscript: (NSUInteger)index;`

`NSMutableArray`：`- (void)setObject: (id)obj atIndexedSubscript: (NSUInteger)index;`

`NSDictionary`：`- (id)objectForKeyedSubscript: (id)key;`

`NSMutableDictionary`：`- (void)setObject: (id)obj forKeyedSubscript: (id)key;`

实现这一点很简单，只需为类调用适当的方法即可。例如，要在 NSArray 上实现下标，您只需实现：

```
- (id) objectAtIndexedSubscript:(NSUInteger)index{
    return [self objectAtIndex:index];
} 
```

我能看到的唯一缺点是您需要确保将您的类别导入任何打算使用下标的类。当然，您可以通过`#import`在前缀标头中包含 来绕过该要求，通常是文件：`<appname>-Prefix.pch`。（感谢 Josh Caswell 指出这一点）。

一个好处是您可以更改下标方法以满足您的需要。例如，Apple 不允许您使用下标向 NSMutableArray 添加/删除对象，但这可以很容易地完成：

```
 - (void) setObject:(id)obj atIndexedSubscript:(NSUInteger)index{
    if (index < self.count){
        if (obj)
            [self replaceObjectAtIndex:index withObject:obj];
        else
            [self removeObjectAtIndex:index];
    } else {
        [self addObject:obj];
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-17T00:21:56.447

[我从这个链接](http://petersteinberger.com/blog/2012/using-subscripting-with-Xcode-4_4-and-iOS-4_3/)得到以下代码：

您只需将此类别添加到`NSObject`集合下标即可。我把它放在我的 .pch 文件中。

```
// Add support for subscripting to the iOS 5 SDK.
#if __IPHONE_OS_VERSION_MAX_ALLOWED < 60000
@interface NSObject (SubscriptingSupport)

- (id)objectAtIndexedSubscript:(NSUInteger)idx;
- (void)setObject:(id)obj atIndexedSubscript:(NSUInteger)idx;
- (void)setObject:(id)obj forKeyedSubscript:(id <NSCopying>)key;
- (id)objectForKeyedSubscript:(id)key;

@end
#endif 
```

当然，您需要 XCode 4.4 中已有的最新版本的 CLANG。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T12:35:33.283

我遇到了同样的问题，但不是缺少 iOS 版本的 b/c .. 但这仅仅是因为原始数组设置为 an`NSArray`而不是`NSMutableArray`. 将其更改`NSMutableArray`为为我修复

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-17T17:51:50.610

我添加这个是因为这是一个常见的错误，截至 7/2015 仍然存在于 Xcode 中，并且很难弄清楚如何解决它。

我在尝试调用对象上的方法而没有创建对象实例时收到此错误。我的解决方案是创建对象的一个​​实例，然后调用该对象实例的属性上的方法。

示例：什么不起作用：*[self methodCall:arrayItem]*（参见下面的完整示例）

```
[self tappedUser:self.activities[indexPath.row].followItem.user.givenName]; 
```

什么解决了它： *ObjectClass newObject = arrayItem; [self methodCall:newObject]* （参见下面的完整示例）

```
FollowActivityItem *followItem = self.activities[indexPath.row];
[self tappedUser:followItem.user.givenName]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-13T12:43:50.983

添加 到您的 h 文件中`#import <Foundation/Foundation.h>`，并使用`NSMutableArray`

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-03-23T22:17:02.320

如果有人像我一样在 Xcode 9.3 beta 4 中使用一些遗留的 Objective-C 代码遇到这个错误后进入这个旧线程，这里是我的修复。

更新：

```
@property (nonatomic, strong) id<CustomClass> myObject; 
```

至：

```
@property (nonatomic, strong) NSMutableArray<CustomClass> *myObject; 
```

# android - 在用户活动和 InActivity Android 上消失并出现 Admob AdView

> ID：11425977
> 
> 赞同：0
> 
> 时间：2012-07-11T05:19:17.433
> 
> 标签：android, android-layout, admob, android-event, android-gesture

我有一个特殊的场景，我想在用户点击屏幕时隐藏 Admob AdView，并在用户在应用程序上不活动 1 秒后再次显示。

我已成功隐藏 AdView 并在用户不活动后再次显示它，但问题是：

我通过**onUserInteraction()**方法检测到用户是否点击了屏幕。

此方法工作正常，但当我**点击 AdView 本身**时，**AdView 会被隐藏**。

这不应该发生。AdView 的正常行为是它应该**在点击 AdView 时打开 Intersticial Ad。**

我该如何解决这个问题？或者我应该在哪里**处理用户的 Tap 事件来决定是隐藏广告还是打开插页式广告。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T18:29:15.433

根据文档，[onUserInteraction()](http://developer.android.com/reference/android/app/Activity.html#onUserInteraction%28%29)在视图触发之前拦截整个活动的事件。

根据您的应用程序，您可能希望使用[onTouchEvent()](http://developer.android.com/reference/android/app/Activity.html#onTouchEvent%28android.view.MotionEvent%29)和[onTrackballEvent()](http://developer.android.com/reference/android/app/Activity.html#onTrackballEvent%28android.view.MotionEvent%29)仅使用视图未处理的事件。或者，或者，您可以将事件侦听器添加到您的视图（而不是`AdView`）以注册此类事件。

# makefile - makefile中的多个冒号和等号（需要解释）

> ID：11425978
> 
> 赞同：9
> 
> 时间：2012-07-11T05:19:28.547
> 
> 标签：makefile

这只是生成文件的一部分。我不太明白发生了什么。

```
OBJS = $(SRCS:$(SRC)/%.cpp=$(OBJ)/%.o)
$(OBJS):$(OBJ)/%.o: $(SRC)/%.cpp | print-opts
    $(cc-command) 
```

我所理解的是这些行将.cpp文件编译成.o，在'print-opts'之后，使用'cc-command'。但我不明白语义。

如果我扩展'OBJS'的宏，这一行应该是：

```
$(SRCS:$(SRC)/%.cpp=$(OBJ)/%.o) : $(OBJ)/%.o: $(SRC)/%.cpp | print-opts
    $(cc-command) 
```

对我来说，它看起来像在 '$(SRCS:$(SRC)/%.cpp=$(OBJ)/%.o)' 中，它声称 $(SRC) 中的所有 .cpp 都会在 $( OBJ)，但这将取决于 $(OBJ)/%.o，它取决于 $(SRC)/%.cpp。这没有意义...

我不明白这里的等号是什么意思，多个冒号是什么意思。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-11T14:14:32.603

假设你已经定义了这三个变量（如果你没有，规则就不会很好地工作）：

```
SRC = source_dir
OBJ = object_dir
SRCS = source_dir/foo.cpp source_dir/bar.cpp 
```

现在考虑分配

```
OBJS = $(SRCS:$(SRC)/%.cpp=$(OBJ)/%.o) 
```

这是一个[替代参考](http://www.gnu.org/software/make/manual/make.html#Substitution-Refs)；它说“对于任何`$(SRCS)`具有形式的东西`$(SRC)/%.cpp`，将其更改为`$(OBJ)/%.o`”。所以`OBJS`将评估为`object_dir/foo.o object_dir/bar.o`。

现在规则：

```
$(OBJS):$(OBJ)/%.o: $(SRC)/%.cpp | print-opts
    $(cc-command) 
```

Thuis 是一个[静态模式规则](http://www.gnu.org/software/make/manual/make.html#Static-Pattern)。它指定了一个目标列表 ( `$(OBJS)`)、一个目标模式 ( `$(OBJ)/%.o`) 和一个先决条件模式 ( `$(SRC)/%.cpp`)。Make 将目标与目标模式匹配，并使用它来构造先决条件名称。因此，如果 Make 使用此规则构建`object_dir/foo.o`，则词干为`foo`，前提条件为`source_dir/foo.cpp`。

（你没有问关于`| print-opts`，所以我认为它已经很清楚了。）

# javascript - Firefox 扩展弹出窗口：关闭弹出窗口而不是窗口

> ID：11425981
> 
> 赞同：1
> 
> 时间：2012-07-11T05:19:43.670
> 
> 标签：javascript, firefox, firefox-addon, xul

我已经创建了一个 chrome 扩展，现在我想为 firefox 创建一个扩展。我在 chrome 扩展中使用了大部分代码。

但是现在我遇到了一个问题。在 chrome 中，扩展程序可以在工具栏上有一个图标，单击时可以弹出一个页面。但是Firefox中没有弹出窗口。我用 a[`panel`](https://developer.mozilla.org/en/XUL/panel)代替。

问题是如何关闭面板？我已经`window.close()`在面板中使用了一些事件。但这将关闭整个 Firefox 窗口。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-12-11T17:01:06.827

使用

```
window.close() 
```

在 FF 70/71 中测试

参考[https://discourse.mozilla.org/t/how-to-close-popup-browser-window/13977/4](https://discourse.mozilla.org/t/how-to-close-popup-browser-window/13977/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-11T10:22:42.767

A`panel`不是窗口 - 它只是 XUL 文档中的一个标记（在您的情况下是浏览器窗口的文档）。您应该使用为此标签提供的 API 来操作它，特别是[panel.hidePopup()](https://developer.mozilla.org/en/XUL/panel#m-hidePopup)方法：

```
document.getElementById("my-panel").hidePopup(); 
```

# coldfusion - 冷熔应用范围

> ID：11425984
> 
> 赞同：1
> 
> 时间：2012-07-11T05:20:10.633
> 
> 标签：coldfusion, coldfusion-8

我一直在我的 CF 服务器上注意到我的应用程序开始变得很慢。我将其中的大部分归因于不缓存某些东西，而实际上它们应该被缓存。

我想验证这个对象是否在应用程序范围内，而不是每次页面加载时都创建它。

```
<cfset application.components.blog = createObject('component','sharedcomponents.cfc.blog').init()> 
```

验证对象是否存在于应用程序范围内以及是否放手的最佳方法是什么。此外，如果文件已更新，如何检测更改以便整个应用程序刷新它？

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T06:09:53.693

您没有说该代码在哪里或如何/何时执行，因此不可能自信地回答您的问题。

如果它在 Application.cfc 的 onApplicationStart() 中，那么 - 是的 - 它只会在应用程序启动时执行。

但是，如果它只是在某个文件中，则每次调用该文件时都会重新执行它，除非您采取措施确保它*不*被调用。EG：在它周围加上一个条件：

```
<cfif not (structKeyExists(application, "components") and structKeyExists(application.components, "blog"))>
    <cfset application.components.blog = createObject('component','sharedcomponents.cfc.blog').init()>
</cfif> 
```

您似乎想知道其中是否发生了一些魔术，因为您的变量分配在应用程序范围内设置了一些东西，如果重新执行其所在的文件，CF 将自动知道不会重新运行它。不，CF 只是按照它的指示去做：如果你告诉它运行该代码，它就会运行。无论变量被分配在哪个范围内。

您继续询问是否检测文件是否已更新并相应地重新启动整个应用程序。这些文件是如何更新的？我认为它是主动部署过程的一部分（例如：你做一些事情来部署它们）。如果是这种情况，*您是否*最适合知道应用程序何时需要重新启动？一方面，并​​不是每一次代码更改都会保证应用程序重新启动，所以你不会想要自动执行它，我应该认为？

`applicationStop()`如果您需要重新启动应用程序，您应该有一个可以运行的脚本。有些人`onRequestStart()`检查了一个 URL 参数，`applicationStop()`如果它通过了，就会调用它，但我个人认为这是错误的地方。对于几乎每个请求，该条件都是无关紧要的，因此没有必要在百万分之一的情况下检查每个请求是否真正相关。我更喜欢有一个单独的脚本来做这件事，这被称为需要。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T06:10:38.783

您可以通过创建 cfm 并运行来转储应用程序范围以查看其中的内容：

转储应用程序.cfm：

```
<cfdump var="#application#"> 
```

或者，如果您的应用程序范围很大或其他什么，您可以专门针对它：

```
<cfdump var="#application.components.blog#"> 
```

现在，该 cfset 在哪里运行？如果它在 OnApplicationStart 方法中的 Application.cfc 中运行，那么是的，它只会在应用程序第一次启动时运行一次，然后被缓存。如果你不断地将它设置在某个地方，那么它会一遍又一遍地触发它。您可以将其更改为：

```
<cfif NOT structKeyExists(application.components,"blog")>
  <cflock scope="application" type="exclusive" timeout="10">
    <cfset application.components.blog ="#createObject('component','sharedcomponents.cfc.blog').init()#">
  </cflock>
</cfif> 
```

您不必在 OnApplicationStart 中进行 cflock，因为它是单线程的。

编辑：根据对 CFPARAM 的评论建议

# c# - C# 中的 AutoResetEvent()

> ID：11425985
> 
> 赞同：0
> 
> 时间：2012-07-11T05:20:15.053
> 
> 标签：c#, multithreading, concurrency

我有三两班

```
Class A{
   function A.1()
   {
     1\. First calls B.2()
     2\. Checks for value X in class B.
   }
}
Class B {
 function B.1()
 {
  /*this function sets the variable X to true*/
 }
 function B.2()
 {
   /*Initiates the thread eventually that will start the function B.1 on different thread*/
 }
} 
```

我想修改它，以便 A.1() 应该等到在 B 类中设置/修改 X。这就是我的方法：

```
Class A{
   function A.1()
   {
     1\. First calls B.2()
     **2\. Call WaitforSet in class B**
     3\. Checks for value X in class B.
   }
}
Class B {
/* Created one autoreset event S*/
 function B.1()
 {
  /*this function sets the variable X to true*/
  S.Set();
 }
 function B.2()
 {
   /*Initiates the thread eventually that will start the function B.1 on different thread*/
 }
  waitforSet()
  {
   S.waitone();
  }
} 
```

我不确定为什么这不起作用，因为它使两个线程都处于等待状态。我预计`waitforSet()`函数应该让调用线程处于等待状态，内部将继续设置 X。当我检查当前线程的托管线程 ID 时`waitforSet()`，`B.1()`它们是不同的。

有人可以告诉我我在这里缺少什么或更好的方法来实现这一目标吗？

PS：我在 C# 中实现了这一点

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:25:04.610

我创建了它并且它正常工作，您确定在构造函数中将 AutoResetEvent 的初始状态设置为 false 吗？

```
class Program
{
    static void Main(string[] args)
    {
        Thread.CurrentThread.Name = "Console Thread";

        var a = new A();
        a.A1();

        Console.WriteLine("Press return to exit...");
        Console.Read();
    }
}

public class A
{
    public void A1()
    {
        var b = new B();

        b.B2();
        b.WaitForSet();

        Console.WriteLine("Signal received by " +  Thread.CurrentThread.Name + " should be ok to check value of X");
        Console.WriteLine("Value of X = " + b.X);
    }
}

public class B
{
    private AutoResetEvent S = new AutoResetEvent(false);

    public bool X { get; private set; } 

    public void B1()
    {
        X = true;
        Console.WriteLine("X set to true by " + Thread.CurrentThread.Name);

        S.Set();
        Console.WriteLine("Release the hounds signal by " + Thread.CurrentThread.Name);
    }

    public void B2()
    {
        Console.WriteLine("B2 starting thread...");

        var thread = new Thread(new ThreadStart(B1)) { Name = "B Thread" };
        thread.Start();

        Console.WriteLine("Value of X = " + X + " Thread started.");
    }

    public void WaitForSet()
    {
        S.WaitOne();
        Console.WriteLine(Thread.CurrentThread.Name + " Waiting one...");
    }
} 
```

# asp.net-mvc - MVC 模型中的数据库查询

> ID：11425990
> 
> 赞同：6
> 
> 时间：2012-07-11T05:20:53.947
> 
> 标签：asp.net-mvc, oop

在 MVC 项目中，如果我将**LINQ**查询放入`Model`，是否违反 MVC 模式？

```
namespace DocLibrary.Models
{
    public class Author
    {
        private DocLibraryContext db = new DocLibraryContext();

        [Key]
        public Int32 AuthorId { get; set; }

        [StringLength(20)]
        public String Name { get; set; }

        ..

        public string GetNameById(int AuthorId)
        {
            var query = from a in db.Author
                        where a.AuthorId == AuthorId
                        select a.Name;

            return query.FirstOrDefault();
        }

        public Author GetAuthorById(int AuthorId)
        {
            var query = from a in db.Author
                        where a.AuthorId.Equals(AuthorId)
                        select a;

            return query.FirstOrDefault();
        }
    } 
```

或者我应该将这些方法 ( `GetNameById`, `GetAuthorById`) 移到 Controller 中吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-11T05:29:45.223

> 在 MVC 项目中，如果我将 LINQ 查询放入模型中，是否违反 MVC 模式？

不，这不违反 MVC 模式。数据库查询在模型中非常好。显然，应该在传递给视图的模型和视图模型之间做出明确的区分。视图模型不应包含任何特定于数据库的内容。

> 或者我应该将这些方法（GetNameById、GetAuthorById）移动到控制器吗？

绝对不。控制器的职责不是查询数据库。控制器的职责是与模型对话，构建视图模型并将此视图模型传递给视图。控制器甚至不应该知道数据库是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-13T21:38:33.817

像这样使用

```
internal IQueryable<Table1> GetArmyList2()
    {
        //var lists = from list in db.Table1
                 //   select list;

        //return lists;

        var query = from Table1 in db.Table1
                    where Table1.Username.Equals("asik") & Table1.Password.Equals("asik")
                    select Table1;

        return query;

    } 
```

和控制器代码

```
public ActionResult asik()
    {
        var armyList = cl.GetArmyList2();
        return View(armyList);
        // return View();
    } 
```

# android - Android : 用于 ImageButton 的 onClickListener

> ID：11425992
> 
> 赞同：0
> 
> 时间：2012-07-11T05:21:02.020
> 
> 标签：android, imagebutton, onclicklistener

我有一个图像按钮。当我单击 ImageButton 时。它使父布局 android:id="@+id/mainLayout" 顶部的另一个布局（childLayout）可见。现在 ChildLayout 有三个按钮（返回、调用、Web）。我为返回、呼叫和 Web 按钮实现了 OnClickListeners。但是当我单击“返回”按钮时，它没有触发事件。但是当我双击按钮时 OnClickListener 工作。为什么 OnClickListener 在单击时不起作用。？

```
 @Override
                public void onSingleTapConfirmed() {
                    childLayout = (LinearLayout) findViewById(R.id.childView);
                    childLayout.setVisibility(View.VISIBLE);
                    backButton = (Button)findViewById(R.id.back);
                    web = (ImageButton) findViewById(R.id.web);
                    call = (ImageButton) findViewById(R.id.call);
                    backButton.setOnClickListener(backButtonListener);
                    call.setOnClickListener(callListener);
                    web.setOnClickListener(webListener);
                }

            OnClickListener callListener = new OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            Intent callIntent = new Intent(Intent.ACTION_CALL);
                            callIntent.setData(Uri.parse("tel:415-817-9955,’10"));
                            startActivity(callIntent);                  
                        }
                    };

            OnClickListener webListener = new OnClickListener() {

                        @Override
                        public void onClick(View v) {
                            Intent web = new Intent(Intent.ACTION_VIEW);
                            Uri u = Uri.parse("http://google.com");
                            web.setData(u);
                            startActivity(web);
                        }
                    };  
             OnClickListener backButtonListener = new OnClickListener() {

                @Override
                public void onClick(View v) {
                    finish();
                }
            }; 
```

和我的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/mainLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/childView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:background="@drawable/nav_bar"
        android:padding="5dp"
        android:visibility="gone" >

        <Button
            android:id="@+id/back"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:background="@drawable/title_btn"
            android:paddingLeft="10dp"
            android:paddingRight="10dp"
            android:text="Business"
            android:textColor="@color/white" >
        </Button>

        <TextView
            android:id="@+id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"
            android:layout_weight="1"
            android:gravity="center"
            android:text="Image"
            android:textStyle="bold" />

        <ImageButton
            android:id="@+id/call"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/phone" />

        <ImageButton
            android:id="@+id/web"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/web" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/imageView"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </LinearLayout>

</LinearLayout> 
```

或者我应该使用其他方法在 imageButton 的单击事件上显示子布局。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T05:30:28.173

有一个布尔值，在第一次单击时使其为真，如果用户再次单击，则检查布尔值是否为真，然后双击执行您想要执行的操作。

您可以定义一个时间假设为 30 毫秒，如果用户再次单击您执行您想要在双击中执行的操作，否则您可以执行单击操作。

但是在Android中我们做单击和长按/长按，长按可以代替双击的东西。甚至建议长按而不是双击。

这是之前提出的相同[答案](https://stackoverflow.com/questions/2217670/question-how-to-implement-android-double-tap)，请参阅链接>>[这里](https://stackoverflow.com/questions/2217670/question-how-to-implement-android-double-tap)

# c# - 关闭实体类以进行更改

> ID：11425993
> 
> 赞同：7
> 
> 时间：2012-07-11T05:21:05.453
> 
> 标签：c#, .net, entity-framework, linq-to-sql, domain-driven-design

我有一个数据库关系，如下所示。域对象是基于 LINQ to SQL ORM 创建的。

付款包括现金付款和礼券付款。假设购买总金额为550，可按以下几部分支付

```
1 Gift Coupon Valued 300

1 Gift Coupon Valued 200

I Cash Currency Valued 50 
```

![在此处输入图像描述](../Images/5b7b398742000ad4c9a73dfe3b29b620.png)

我正在使用 ORM 的“InsertOnSubmit”功能插入新的付款记录。以下代码工作正常。但是，如果我公司正在引入使用信用卡的新支付组件，我需要对我的“支付”域类进行更改。如何使支付类**Open for Extension 和 Closed for Changes**仍然使用**ORM**？

注意：Payment 类具有**行为**（例如 GetTotalAmountCollected）。我正在尝试制作“支付”类来满足 OCP。

注意：优惠券类型有特定的**行为**。如果 Coupon 发行日期小于 2000 年 1 月 1 日，则不应将其用于计算 Total Amount（即 CouponValue 应为零）。另请参阅[使用策略模式重构代码](https://stackoverflow.com/questions/11435320/refactoring-code-using-strategy-pattern)。

注意：我使用的是**.Net 4.0**

参考：

1.  [将 ObjectContext.AddObject 与实体框架一起使用时出错](https://stackoverflow.com/questions/1174394/getting-an-error-when-using-objectcontext-addobject-with-entity-framework)
2.  [使用策略模式重构代码](https://stackoverflow.com/questions/11435320/refactoring-code-using-strategy-pattern)
3.  [更喜欢组合而不是继承？](https://stackoverflow.com/questions/49002/prefer-composition-over-inheritance)
4.  [代码优先与模型/数据库优先](https://stackoverflow.com/questions/5446316/ef-4-1-code-first-vs-model-database-first)
5.  [使用 Unity 的策略模式和依赖注入](https://stackoverflow.com/questions/1706056/strategy-pattern-and-dependency-injection-using-unity)
6.  [委托与 OOP 的 C# 策略设计模式](https://stackoverflow.com/questions/984050/c-sharp-strategy-design-pattern-by-delegate-vs-oop)
7.  [如何在 C# 中使用策略模式？](https://stackoverflow.com/questions/3449634/how-to-use-the-strategy-pattern-with-c)
8.  使用 EF 代码优先继承：第 2 部分 - 每个类型的表 (TPT) [http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first -ctp5-part-2-table-per-type-tpt.aspx](http://weblogs.asp.net/manavi/archive/2010/12/28/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-2-table-per-type-tpt.aspx)

C#代码：

```
public class PaymentAppService
{
    public RepositoryLayer.ILijosPaymentRepository Repository { get; set; }

    public void MakePayment()
    {
        DBML_Project.Payment paymentEntity = new DBML_Project.Payment();
        paymentEntity.PaymentID = 1;
        paymentEntity.PaymentType = "PurchaseP";

        DBML_Project.CashPayment cashObj = new DBML_Project.CashPayment();
        cashObj.CashPaymentID = 1;
        cashObj.CurrencyNumber = 123;
        cashObj.CurrencyValue = 100;

        DBML_Project.GiftCouponPayment giftCouponObj = new DBML_Project.GiftCouponPayment();
        giftCouponObj.GiftCouponPaymentID = 1;
        giftCouponObj.CouponValue = 200;
        giftCouponObj.CouponNumber = 124;

        paymentEntity.CashPayments = new System.Data.Linq.EntitySet<DBML_Project.CashPayment>();
        paymentEntity.CashPayments.Add(cashObj);

        paymentEntity.GiftCouponPayments = new System.Data.Linq.EntitySet<DBML_Project.GiftCouponPayment>();
        paymentEntity.GiftCouponPayments.Add(giftCouponObj);

        Repository.InsertEntity(paymentEntity);
        Repository.SubmitChanges();
    }
} 
```

存储库：

```
public class LijosPaymentRepository : ILijosPaymentRepository
{
    public System.Data.Linq.DataContext MyDataContext { get; set; }

    public void InsertEntity(DBML_Project.Payment payment)
    {
        //Insert the entity
        MyDataContext.GetTable<DBML_Project.Payment>().InsertOnSubmit(payment);
    }

    public void SubmitChanges()
    {
        MyDataContext.SubmitChanges();
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-11T06:29:51.900

*对于@Lijo 试图解决抽象方法的问题会更好*

我认为您可以在实现您自己的 IPayment 接口的 CashPayment 类型上创建一个部分类，该接口可以在整个应用程序中使用。这个接口也可以在 CreditCardPayment 上：

例子：

```
 public interface IPayment
{
     int Id { get; set; }
     int PaymentId { get; set; }
     //Other payment specific properties or methods
}

public partial class CashPayment : IPayment
{
    public int Id 
    {
       get { return CashPaymentId ; }
       set { CashPaymentId = value; }
    }

    //Other properties

}

public partial class CreditCardPayment : IPayment 
{
   //more code ...
} 
```

在您的 EF 上下文中获取所有付款的内容

```
 public partial class PaymentEntities //The name of your EF entities
{
   public IQueryable AllPayments
   {
      return this.CashPayment.Union(this.CreditCardPayment); //This is not good, but just an example. The abstract class approach would be better here.
   }

    public void InsertPayment(IPayment payment)
    {
         this.AddObject(payment.GetType().Name, payment);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-11T08:28:23.613

为每种支付类型创建新类型的附加值是什么？我可以看到“通过货币付款”和“通过凭单完成的付款”之间的区别。我可以同意有两种不同的类型来区分。

但是，为什么要区分 a `CashPayment`、 a`CreditCardPayment`等...？您是否必须根据付款类型存储额外信息？行为是否改变？

为什么不保持简单，并在常规 ' `Payment`' 类型中添加一个额外的属性，它充当鉴别器并为您提供付款方式的信息（通过信用卡、现金......）？

```
public class Payment {}

public class VoucherPayment : Payment {}

public class MoneyPayment : Payment
{
    public PaymentMode { get; set; }
}

public enum PaymentMode 
{
    Cash,
    CreditCard
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-11T06:35:26.420

也许另一种选择是在 ORM 中利用继承。这样一来，付款实体中的每种类型都没有 N 个集合，而是一个集合。您将在同一个集合中拥有所有子类型。所有这些，加起来就代表了整个付款。

也许以不同的方式命名事物会更容易。例如，让我们考虑一下**Purchase**的概念。购买应该有一个*Payments*集合。*Payment*可以是一个抽象类，Cash *、* Coupon *、* CreditCard*都*继承自该类。

以这种方式设置模型为如何解决某些问题提供了很多可能性。[您可以对所有付款一视同仁，而无需考虑不同的集合，此外还可以通过多态性和双重调度](http://en.wikipedia.org/wiki/Double_dispatch)进行大量控制。

这样，如果出现新的支付类型，您的模型将保持不变，您将只有一个新的子类型。

现在大多数 ORM 支持不同的继承持久性方案，这也将有助于保持数据结构的清洁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-11T08:06:07.150

您可以使用 table-per-hierarchy (http://msdn.microsoft.com/en-us/library/bb738443) 定义您的模型，该模型使用鉴别器（即您的情况下的 PaymentType）列来指定特定风格的您正在付款。如果新的支付类型需要更多数据，那么您会感激添加列；但是，EF 在您如何定义实体以及这些实体如何映射到您的数据存储方面相当灵活。您可能拥有一组通用的列，例如 Number 和 Value，然后使用所有共享点并将具有通用名称（例如 StringValue1）的列添加到数据库中。然后，您可以将这些列映射到概念模型中更好命名的属性，这对您的域更有意义。

这基本上将您的数据库模式扁平化为一个表，但您的模型仍然是单独的类。您可以将支付类子类化为其他支付类型，而不会影响数据存储或支付类；但是，您需要修改模型以添加新的支付类型并将它们映射到适当的列。

# jquery - 带有 cookie 的 CSS 背景图像切换器：“设置”但不“获取”！

> ID：11425996
> 
> 赞同：0
> 
> 时间：2012-07-11T05:21:22.533
> 
> 标签：jquery, cookies, switch-statement, background-image

我的第一篇文章，这里是 jQuery 的新手……我正在阅读、学习，试图对 jQuery 有一个扎实的背景理解，但我不禁不耐烦并开始尝试做一些事情！

这段代码让我很困惑。这是一个带有 cookie 的顺序切换背景切换器，我花了几天时间整理并尝试制作它。什么有效：它在四个背景之间依次切换，并且每次似乎都设置一个cookie，因为警报确认了它。什么不起作用：背景选择不会“粘住”。当我刷新页面时，背景将返回到 css 设置的默认值。我知道有一些小而关键的问题是错误的，我花了很多时间通过查看其他示例来解决这个问题，这里是 SO 和其他地方。但是我发现没有其他示例像这样按顺序使用切换。所以，寻求一点帮助，并提前感谢！

我正在使用 jquery-1.7.2 和 jquery.cookie 插件。

```
<script type="text/javascript">
$(document).ready(function() {
var bgSwitch = $.cookie("oink");
if (bgSwitch) {
    $("body").css("background-image", bgSwitch);
}
   });
        alert( $.cookie("oink") );
$("#switcher").toggle(
  function () {
    $("body").css({"background-image": "url(images/background/hashbones.gif)"});
                $.cookie("oink", "hashbones!", { expires: 7});
  },
  function () {
    $("body").css({"background-image": "url(images/background/pattern-tile-3.gif)"});
                $.cookie("oink", "tiles!", { expires: 7});
  },
  function () {
    $("body").css({"background-image": "url(images/background/dots.gif)"});
                $.cookie("oink", "DOTS!!!!", { expires: 7});
  },
  function () {
    $("body").css({"background-image": "url(images/background/lines-diag-8px.gif)"});
                $.cookie("oink", "lines again!", { expires: 7});
  }
);
</script>
<style>
body { background: #fff url(images/background/lines-diag-8px.gif) repeat; }  
</style> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T05:37:01.413

当您切换切换器时，您会创建一个 cookie，将其值设置为一个可能的值（hashbones！/tiles！/ DOTS !!!! /lines again！）。假设当前值为“tiles！”。当页面刷新时，bgSwitch 获取 cookie 的值 - “tiles!”。所以实际上你这样做：

```
$("body").css("background-image", "tiles!"); 
```

这什么都没有。

将 cookie 的可能值更改为图像本身。就像是：

```
function changeBg(bgImage) {
    $("body").css({"background-image": bgImage});
    $.cookie("oink", bgImage, { expires: 7});
}

$("#switcher").toggle(
  function () {
    changeBg("url(images/background/hashbones.gif)");
  },
  function () {
    changeBg("url(images/background/pattern-tile-3.gif)");
  },
  function () {
    changeBg("url(images/background/dots.gif)");
  },
  function () {
    changeBg("url(images/background/lines-diag-8px.gif)");
  }
); 
```

希望这可以帮助！