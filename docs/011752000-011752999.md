# StackOverflow 问答 11752000-11752999

# asp.net - AutoPostBack 和 HTML 编码

> ID：11752001
> 
> 赞同：1
> 
> 时间：2012-08-01T03:01:33.440
> 
> 标签：asp.net

我在文本字段和 AutoPostBack 中遇到 HTML 字符问题。

我有如下内容：

```
<asp:FormView ID="FormView1" runat="server" 
              DataKeyNames="ID" DataSourceID="SqlDataSource4"
              ForeColor="#333333" DefaultMode="Edit" 
              HorizontalAlign="Center" Font-Size="X-Small"
              Width="100%" OnDataBound="FormView1_DataBound">
      <asp:TextBox ID="fooTextBox" runat="server" 
                   Width="100%" Rows="4" TextMode="MultiLine"
                   CssClass="tr4" Text='<%# Bind("foo") %>' AutoPostBack="true"
                   OnTextChanged="ChangedRecord" />
</asp:FormView> 
```

现在，当用户进入文本框时，类似

> <富>

由于文本字段中的 HTML 字符，它将引发错误 500。

在通过 AutoPostBack 发送之前，我该如何管理它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:04:42.817

这是*因为*Page的[ValidateRequest](http://msdn.microsoft.com/en-us/library/system.web.configuration.pagessection.validaterequest.aspx)属性（默认值为*true*）。您可以关闭 ValidateRequest，以便允许标签、脚本等（潜在危险值）。

如果您的应用程序以[.net 框架版本 4.0](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpruntimesection.requestvalidationmode%28VS.100%29.aspx)为目标，则在 web.config 中添加以下部分：

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
    <httpRuntime requestValidationMode="2.0" />
</system.web> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:10:47.453

如果您需要将 html/xml 输入到文本框中，最好的处理方法是对您的输入 进行**html 编码。**`<foo>`将成为`&lt;foo&gt;`这将使表单发布变得安全。请记住，您需要在提交使用后对其进行解码。使用以下链接检查 html 编码。[http://www.opinionatedgeek.com/DotNet/Tools/HTMLEncode/Encode.aspx/](http://www.opinionatedgeek.com/DotNet/Tools/HTMLEncode/Encode.aspx/)

# php - 在 HTML 页面中回显多行（来自 MySQL 数据库）

> ID：11752002
> 
> 赞同：1
> 
> 时间：2012-08-01T03:01:46.083
> 
> 标签：php, mysql, html, echo, lines

我目前正在使用此代码从数据库中打印多行文本

```
$query_content= "select * from home ";
$result_content= mysql_query($query_content,$con);
while ($text = mysql_fetch_array($result_content))
{
    $content = $text['homecontent']; 
} 
```

* * *

并使用此 HTML 代码：

```
<p> 
<?php print $content; ?>
<p/> 
```

数据库中的文本是：

```
abc
def
ghi 
```

但我得到了这个

```
abc def ghi 
```

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T03:12:19.707

为此，您可以使用 php 中的内置函数[nl2br](http://php.net/nl2br)。它将`\n\r`（新行）转换为 html 的`<br>`.

```
<p> 
    <?php
        print nl2br( $content );
    ?>
<p/> 
```

如果并且希望您有一个与 xhtml 或 html5 兼容的网站，您应该将第二个参数设置`true`为使`<br>`xhtml 兼容，`<br />`

```
<p> 
    <?php
        print nl2br( $content, true );
    ?>
<p/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T03:07:21.683

```
echo str_replace(array("\r\n", "\n", "\r"), "<br>", $content); 
```

问题在于，在文本中你有一个换行符“\n”、“\r”或他的组合，在 html 中显示为空格（空格字符）。要在 html 中插入真正的“换行符”，`<br/>`必须使用标签。因此，我编写了将所有换行符替换为 <br> html-tag 的简单示例。

在 php 中存在`string nl2br ( string $string [, bool $is_xhtml = true ] )`几乎相同的特殊功能，但我认为更快更正确。

# zend-framework - 单元测试 Zendframework：将元数据保存到 metadataCache 失败

> ID：11752003
> 
> 赞同：2
> 
> 时间：2012-08-01T03:01:58.513
> 
> 标签：zend-framework, zend-cache, zend-test

我正在尝试设置控制器单元测试，但出现以下错误：

```
InscricaoControllerTest::testInscricaoPage()
Zend_Controller_Exception: Failed saving metadata to metadataCache#0 [internal function]: PHPUnit_Util_ErrorHandler::handleError(1024, 'Failed saving m...', 'C:\xampp\ZendFr...', 838, Array)
#1 C:\xampp\ZendFramework-1.11.12\library\Zend\Db\Table\Abstract.php(838): trigger_error('Failed saving m...', 1024)
#2 C:\xampp\ZendFramework-1.11.12\library\Zend\Db\Table\Abstract.php(874): Zend_Db_Table_Abstract->_setupMetadata()
#3 C:\xampp\ZendFramework-1.11.12\library\Zend\Db\Table\Abstract.php(982): Zend_Db_Table_Abstract->_setupPrimaryKey()
#4 C:\xampp\ZendFramework-1.11.12\library\Zend\Db\Table\Select.php(100): Zend_Db_Table_Abstract->info()
#5 C:\xampp\ZendFramework-1.11.12\library\Zend\Db\Table\Select.php(78): Zend_Db_Table_Select->setTable(Object(Application_Model_DbTable_TipoUsuario))
#6 C:\xampp\ZendFramework-1.11.12\library\Zend\Db\Table\Abstract.php(1018): Zend_Db_Table_Select->__construct(Object(Application_Model_DbTable_TipoUsuario))
#7 C:\htdocs\sgsa\application\models\DbTable\TipoUsuario.php(19): Zend_Db_Table_Abstract->select()
#8 C:\htdocs\sgsa\library\Sistema\Controller\Plugin\Acl.php(10): Application_Model_DbTable_TipoUsuario->getTipoUsuario()
#9 C:\xampp\ZendFramework-1.11.12\library\Zend\Controller\Plugin\Broker.php(309): Sistema_Controller_Plugin_Acl->preDispatch(Object(Zend_Controller_Request_HttpTestCase))
#10 C:\xampp\ZendFramework-1.11.12\library\Zend\Controller\Front.php(941): Zend_Controller_Plugin_Broker->preDispatch(Object(Zend_Controller_Request_HttpTestCase))
#11 C:\xampp\ZendFramework-1.11.12\library\Zend\Application\Bootstrap\Bootstrap.php(97): Zend_Controller_Front->dispatch()
#12 C:\xampp\ZendFramework-1.11.12\library\Zend\Application.php(366): Zend_Application_Bootstrap_Bootstrap->run()
#13 C:\xampp\ZendFramework-1.11.12\library\Zend\Test\PHPUnit\ControllerTestCase.php(206): Zend_Application->run()
#14 C:\htdocs\sgsa\tests\application\controllers\InscricaoControllerTest.php(11): Zend_Test_PHPUnit_ControllerTestCase->dispatch('/inscricao')
#15 [internal function]: InscricaoControllerTest->testInscricaoPage()
... 
```

在我的引导程序中，我有 APC 缓存：

```
protected function _initCache() {
    $frontendOptions = array(
        'lifetime' => 7200, // cache lifetime of 2 hours
        'automatic_serialization' => true
    );
    $backendOptions = array(
            //'cache_dir' => APPLICATION_PATH. '/../data/cache/' // Directory where to put the cache files
    );
    // getting a Zend_Cache_Core object
    $cache = Zend_Cache::factory('Core', 'Apc', $frontendOptions, $backendOptions);
    Zend_Db_Table::setDefaultMetadataCache($cache);
    Zend_Locale::setCache($cache);
    Zend_Date::setOptions(array('cache' => $cache));
    return $cache;
} 
```

我正在运行以下测试：

```
public function testInscricaoPage() {
    $this->dispatch('/inscricao');
    $this->assertResponseCode(200);
    $this->assertQueryContentContains('h1', 'Inscrição');
} 
```

为什么我收到此错误？似乎 php cli 不能使用缓存，但应用程序在浏览器上正常运行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T05:32:52.887

默认情况下，PHP CLI 禁用 APC，在 php.ini 中添加以下配置行可以解决此问题。

```
apc.enable_cli=1 
```

此配置只能在 php.ini 或 httpd.conf 中设置。

# ruby-on-rails - 在 Rails 模型中重命名字段名称

> ID：11752004
> 
> 赞同：0
> 
> 时间：2012-08-01T03:02:00.697
> 
> 标签：ruby-on-rails, model

Rails 新手在这里。

我有一个旧的 sqlite3 数据库，我无法使用带有以下列的 Comments 表来控制它：

ID - 主键

BOOK - 外键

TEXT - 包含评论和书籍摘要的字段

我有一个名为 Comment 的 Rails 3.2.1 模型（与 Book 映射 1-1），如下所示：

```
class Book < ActiveRecord::Base
    has_many :datum, :foreign_key => "book"
    has_one :comment, :foreign_key => "book"

    @@basepath = "#{Rails.root}/public/share"

    def get_filepath
        return "#{@@basepath}/#{path}"
    end

    def get_summary
        @comment.text
    end
end 
```

在我看来，我有这样的事情：

```
<td><%= book.get_summary %></td> 
```

但是，当我尝试该页面时，我得到 nil:NilClass 的未定义方法“文本”

看起来“文本”是 Rails 中的保留字。我的猜测是，这会阻止 rails 对其进行正确评估。

我对错误的解释正确吗？如果是这样，我怎样才能让 Rails 为“文本”字段赋予不同的名称，如“comment_text”？

非常感谢您提前提供的帮助。

PS 我已经看过[http://www.engineyard.com/blog/2011/using-datamapper-and-rails-with-legacy-schemas/](http://www.engineyard.com/blog/2011/using-datamapper-and-rails-with-legacy-schemas/)，但我不确定我的问题是否与此类似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:06:29.800

改变这个：

```
def get_summary
   @comment.text
end 
```

对此：

```
def get_summary
    comment.text
end 
```

`@comment`在这个模型中没有意义......你正在访问一个关联，它是`comment`

# network-protocols - 从原始数据包中捕获网址？

> ID：11752006
> 
> 赞同：0
> 
> 时间：2012-08-01T03:02:39.483
> 
> 标签：network-protocols

我们正在捕获这种格式（十六进制字节）的每个网络数据包。问题是我们想获取url，如果它以http://......的形式存在于数据包中？解释它以捕获 url 的最佳方法是什么？现在我们正在寻找http字符然后处理但是在哪里结束是另一个问题？

```
0000000 cf fa ed fe 07 00 00 01 03 00 00 80 02 00 00 00
0000010 0c 00 00 00 28 07 00 00 85 80 01 00 00 00 00 00
0000020 19 00 00 00 48 00 00 00 5f 5f 50 41 47 45 5a 45
0000030 52 4f 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0000040 00 00 00 00 01 00 00 00 00 00 00 00 00 00 00 00
0000050 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
0000060 00 00 00 00 00 00 00 00 19 00 00 00 78 02 00 00

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:23:34.760

从您的问题来看，听起来您有您感兴趣的数据包，但您对协议的名称或其格式一无所知（除了它不是 HTTP - 如果它是子字符串“http”你说你发现最有可能*不会*出现）。

[Wireshark](http://www.wireshark.org/)了解许多网络协议，这将是帮助您了解协议是什么以及其中的数据是如何格式化的一个好的开始。

如果 Wireshark 无法识别该协议，那么您可能只能靠自己了，除非您可以提供有关数据包来自何处以及它们的用途的更多详细信息。进行初始连接尝试的 TCP 端口号通常是一个很好的线索。可能对您的最后一个问题有所帮助的一件事是字符串通常以零字节终止。

# java - 在不使用 apache.commons 函数的情况下更新 hashMap 中的条目

> ID：11752009
> 
> 赞同：1
> 
> 时间：2012-08-01T03:03:23.400
> 
> 标签：java, hashmap

我想维护一个状态表，其中状态已使用枚举定义

```
private enum states {
    contension_initiated, contension_failure, contension_success, reservation_success, reservation_completed, reservation_failure
} 
```

状态表是使用维护的

```
HashMap<Integer, states> stateTable = new HashMap<Integer, states>(); 
```

根据条件，stateTable 中的值会发生变化/更改如何在不使用 apache.commons 库的情况下修改 hashMap 中的相同条目？

直到现在我一直在这样做：

```
if(condition1)
      stateTable.put(1,state.contension_initiated)
if(condition2) 
      stateTable.remove(1)
      stateTable.put(1,contension_success) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T03:21:44.460

```
if(condition1)
      stateTable.put(1,state.contension_initiated)
if(condition2) 
      stateTable.put(1,contension_success) 
```

HashMap 将只维护一个唯一键。因此，如果您尝试“放置”一个已经存在的键，它将替换与该键关联的值（而不是添加一个新键）

# java - RichFaces - 使用两个动态列表时未触发 a4j:ajax

> ID：11752010
> 
> 赞同：0
> 
> 时间：2012-08-01T03:03:33.410
> 
> 标签：java, ajax, jsf, richfaces, jstl

出现错误的代码如下：

```
<h:form>
    <rich:select defaultLabel="Seleccionar región" value="#{StaticInfo.regionElegida}">
        <f:selectItems value="#{StaticInfo.regiones.entrySet()}" var="region" itemValue="#{region.key}" itemLabel="#{region.value}" />
        <a4j:ajax event="change" render="provs" listener="#{StaticInfo.updateProvincias}" />
    </rich:select>
    <rich:select id="provs" defaultLabel="Seleccionar provincia" value="#{StaticInfo.provinciaElegida}">
        <f:selectItems value="#{StaticInfo.provincias.entrySet()}" var="prov" itemValue="#{prov.key}" itemLabel="#{prov.value}" />
        <a4j:ajax event="change" render="texto" />
    </rich:select>
    <h:outputText value="#{StaticInfo.provinciaElegida)}" id="texto" />
</h:form> 
```

列表正确显示项目，并且 bean 具有所需的 getter 和 setter `provinciaElegida`。现在，第二个选择的项目将取决于第一个选择的选择。由于某种原因， outputText 元素没有显示任何结果。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:34:22.873

而不是`<a4j:ajax event="change" render="texto" />`，您可以尝试使用`<a4j:support/>`

```
<h:selectOneMenu id="selectOneMenu"  value="#{Bean1.val1}" >
    <f:selectItems value="#{Bean1.selectItems}"/>
    <a4j:support event="onchange" action="#{Bean1.onSelectOneMenuChange}" reRender="textbox1"   />
 </h:selectOneMenu>

<h:inputText id="textbox1" value="#{Bean1.textbox1}"> </h:inputText> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T06:22:14.077

只是为了不让我回答这个问题......

问题是 bean 是 Request 范围内的。正如 Luiggi 解释的那样：

> 当 ManagedBean 为 RequestScoped 时，将为每个请求（甚至是 ajax 请求！）创建它。如果您的托管 bean 必须在同一个视图中处理多个请求，则它必须具有 ViewScoped。

我试图在一个视图中提交多个请求，因此“重置”了 bean 并有效地杀死了它应该做的事情。当我将 bean 更改为 @ViewScope 时，它​​运行良好。

# python - 强制可移动媒体文件/扇区读取以在 Python 中返回新数据（未从先前读取中缓存）？

> ID：11752012
> 
> 赞同：1
> 
> 时间：2012-08-01T03:03:58.080
> 
> 标签：python, file, caching, disk

我已经构建了一个 USB 数据记录棒，当插入以进行文件下载时，它显示为 USB 大容量存储设备。文件是离线记录的，但是当读取设备上的一个小（<512 字节，1 个磁盘扇区）特殊文件时，记忆棒可以返回有限的“实时”数据（设备时钟、电池电量、瞬时传感器值） - 基本上就像UNIX 设备文件。

读取和使用/显示记录器数据的应用程序是用 Python 编写的。

我认为我是一个聪明的家伙，直到我真正从这个文件中读取实时数据。事实证明，在 Windows 下（迄今为止在 XP 和 Win7 中测试过），只有从应用程序读取的第一次实际读取的是设备 - 尝试重新读取文件（扇区）会从初始读取返回过时的缓存数据，甚至 10 + 初始读取后的分钟，即使文件已关闭并重新打开，或者扇区已写入然后重新读取。通过 mmap() 访问文件数据也不会导致新的读取。随后的读取请求根本不会到达设备。我猜Windows“知道”它没有修改文件本身，所以文件内容不可能改变。

是否有任何健全的方法可以强制后续读取（最好通过“标准”Python 文件 I/O 调用）实际从设备返回新读取而不是缓存数据？

为了清楚起见，我特别指的是阻止 READ 缓存，而不是在写入后同步磁盘内容。

是否存在可以从 Python 中访问的类似内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:26:49.870

[使 OS 磁盘读取缓存无效](https://stackoverflow.com/questions/1002045/invalidate-os-disk-read-cache)

使用 Python 的 win32 扩展应该允许您直接访问 CreateFile 调用以打开文件。您可以使用它来读取您的文件。

这里是[Win32 扩展](http://sourceforge.net/projects/pywin32/)。

# modx-revolution - 如何在 MODx Wayfinder 菜单中包含父级？

> ID：11752015
> 
> 赞同：0
> 
> 时间：2012-08-01T03:04:15.860
> 
> 标签：modx-revolution

我正在尝试使用 MODX Revolution 2.2.0-rc3 菜单做一些概念上非常简单的事情，但没有成功。

我想显示一个无序列表的孩子，但包括父母。如果没有额外的附加组件，这是不可能使用 getResources 的。

使用 Wayfinder，我有以下调用：

```
[[!Wayfinder? &level=`1` &startId=`[[*parent]]` &displayStart=`true` &startItemTpl=`LinkedListItemTpl`!]] 
```

`H2`这个想法是，通过创建一个自定义模板块，我覆盖了默认值，它显示了包装在标签中的起始页。

自定义块如下所示：

```
<li[+wf.classes+]><a href="[+wf.link+]" title="[+wf.title+]">[+wf.linktext+]</a>[+wf.wrapper+]</li> 
```

问题是它无法识别，并且起始页仍然呈现在 H2 标记中。

我在这个问题上花了三个小时，期待输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T03:28:20.933

3小时吧？我讨厌这样，希望您只需要一双新的眼睛，您正在 startItemTpl 中使用 evo 标记

```
<li[+wf.classes+]><a href="[+wf.link+]" title="[+wf.title+]">[+wf.linktext+]</a>[+wf.wrapper+]</li> 
```

应该

```
<li[[+wf.classes]]><a href="[[+wf.link]]" title="[[+wf.title]]">[[+wf.linktext]]</a>[[+wf.wrapper]]</li> 
```

如果不是这样，您是否检查了自定义块名称“LinkedListItemTpl”？[我也不知道是不是！在寻路器声明的末尾为您做了任何事情，我从未使用过它]

如果这些都不起作用，我使用 wayfinder 的一个技巧是在文档树中使用符号链接类型资源 [链接到您的第一个项目]。

-祝你好运！

# java - Android中歌曲的数据结构

> ID：11752018
> 
> 赞同：2
> 
> 时间：2012-08-01T03:04:44.640
> 
> 标签：java, android, data-structures, collections

基本上我正在创建一个 android 音乐播放器。我已经设法将一个字符串存储到我库中每首歌曲的“评论”部分。

字符串的形式为例如。“吉他，鼓，西班牙语，悲伤”

现在我关心的是在我的代码中提出一个数据结构来移动这个 mp3 文件（它的路径）以及这个 STRING。使其更具挑战性的是：

您在上面看到的字符串由逗号“，”组成，因此每次用户想要创建播放列表时，他们只会给我一个单词列表（标签），我必须查看每首歌曲以查找它是否有他们正在寻找或不寻找的标签。我通过将存储在歌曲 COMMENT 部分中的字符串拆分为子字符串（标签）并在用户输入时匹配它来做到这一点。

我正在寻找一个好的数据结构的建议。

我应该事先拆分 COMMENT 部分并将其保存在某种集合中吗？还是在我循环播放每首歌时这样做？拆分它以根据输入检查它？

我想过使用 ArrayList > 但也许有更好的方法......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:08:47.400

在我看来，Arraylist 是好的方法，因为我想你会有一个不同标签的列表。

但我建议不要使用字符串作为类型，也许您应该使用标签类列表，这将在您需要进行更改时为您提供更大的灵活性。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T04:22:00.007

如果歌曲列表很长，反向索引会更合适。这不是遍历每首歌曲并检查是否包含标签，您可以直接找到标签并提取与其关联的歌曲列表。可以使用 Map 直接跳转到标签，并且在条目中，值可以是歌曲列表。

```
Map<String, List<Song>> tagIndex 
```

我假设 Song 是一个抽象歌曲的类。

如果无法持久化索引，则可以在后台启动时构建它。

**EDIT-1**：（回复第一条评论）

我认为所有的 Android 设备都有 SQLite 可用。如果这确实是易于集成的情况，那么您可以通过多种方式存储和访问标签。

1.  将标签存储在数据库和评论中。
2.  仅将标签存储在数据库中。

在第一种方法中，标签将在应用程序重新安装后继续存在。但是其他应用程序也可以访问评论，这些应用程序可能会以其他方式使用它或编辑/覆盖您的值。在这种方法中，您必须在应用程序安装时构建索引，并在构建初始索引后随时保持评论和数据库同步。

第二种方法部分类似于第一种方法，其中标签存储在数据库中并在旅途中维护。但是没有初始构建，如果卸载应用程序，标签可能会被删除。这可能会或可能不会被接受，但这种方法比第一种方法更简单。

如果使用 SQLite，则根本不需要在内存中维护标签。一切都可以在数据库中维护。

> 表：tag_index
> 
> 列：（tag_name、song_name、song_path）

# ios - 无法将 AIR 3.3 应用程序安装到 iOS 模拟器中

> ID：11752027
> 
> 赞同：1
> 
> 时间：2012-08-01T03:05:24.730
> 
> 标签：ios, air, ios-simulator

当我尝试将应用程序安装到模拟器中时（adt -installApp），我得到：-

> SDK 版本未知或不受支持：/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.1.sdk

我正在使用 Mac OS X 10.7.4 (Lion)，并且我正在尝试根据[对 iOS 模拟器博客文章的支持](https://blogs.adobe.com/airodynamics/2012/05/06/using-new-simulator-support-feature-for-ios/)来使用 iPhone 模拟器。我尝试了不同版本的 sdk (5.1,5.0,4.3,4.0)，得到了相同的结果。

我正在使用 Flash Builder 4.6，并且根据[本文将 sdk 更新为 Air 3.3，并根据](http://www.flashdeveloper.co/post/10985842021/overlay-adobe-air-32-in-flash-builder-46)[本文](https://stackoverflow.com/questions/9613565/is-is-possible-to-get-the-ios-5-1-sdk-for-use-with-xcode-4-2-on-snow-leopard)从 XCode 4.4 中提取了 sdk 。

我做错了什么，我需要做什么才能让它工作？

# html - 检测包含 HTML 标记的字符串中是否存在独立的“<”或“>”符号

> ID：11752028
> 
> 赞同：0
> 
> 时间：2012-08-01T03:05:43.093
> 
> 标签：html

例如，我有一个字符串

`"This is a <b> Sample </b> string with characters < 100"`

我的用户将包含 html 标签`<b>`，例如`<div>`等。它们是允许的。我只需要检测和识别独立的“<”和“>”符号的位置以进行其他验证。这是 ac#.net 项目。

任何想法都将受到高度赞赏。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:13:33.963

您可以使用正则表达式：

```
/<[^\w/]|[^\w]>/ 
```

这将搜索没有字母的 < 或 / 在它之后以及在它之前没有字母的 >。在大多数情况下应该足够了。

# javascript - load() 和 getscript() 并不总是有效

> ID：11752029
> 
> 赞同：1
> 
> 时间：2012-08-01T03:05:46.457
> 
> 标签：javascript, ajax, jquery, getscript

在我的 index.php 页面上，我使用 jquery load() 在 div“bodycontent”中加载其他页面。这工作得很好，花花公子。我禁用常规链接，并且必须将 href 设置为页面名称，而不使用 php，并在 load() 发生时重新标记 php。我在 div 中加载的页面之一在链接上弹出对话框。

当您最初转到该页面时，这很好，但是如果您完全通过单击“产品”或页面上的任何其他链接来避开，然后返回“主页”并单击“阅读更多”链接，对话框将不再出现。您必须刷新，然后它才能工作，直到您再次单击链接。此外，这在我的 IE 9、ver9.0.8 中运行良好，但较旧的 IE 正在工作（如 8），并且至少有一个其他人 chrome 对话框根本不会出现。尽管我删除了临时 Internet 文件等，但我的工作中也有 IE9 无法正常工作。在我的电脑上，它在全新下载的 firefox、chrome 和 IE 上运行良好，所以我也想知道我的方法是否向后兼容和跨浏览器，如果不是我能做些什么来做到这一点。一世'

我也看过 ajaxcomplete 之类的东西，但我最初是有效的，我不确定该怎么做。

[我的网站主索引页面最初加载 home.php（新闻等）](http://hardcoregamesusa.com/)

[摆弄我的导航 javascript，这会使页面处于非活动/活动状态并在 div 中加载（）/getscript](http://jsfiddle.net/ZA2Pj/)

对话框.js：

```
$(document).ready(function() {
$('#dialogbox').dialog({
    autoOpen: false,
    title: 'Loading title...', 
    modal: true,
    width: 500,
    height: 400
});
});
function readMore(id,title,cat,desc,post,auth) { 
//alert(id +","+ title +","+ cat +","+ desc +","+ post +","+ auth); 
var $dialog = $('#dialogbox').html('Category: '+ cat +'<br/>'+ desc +'<br/>---------------------------------<br/>Posted by: '+ auth +'<br/>' + post);
$dialog.dialog('open');
$dialog.dialog("option","title",title);
} 
```

我如何拉动阅读更多：

```
 <?php
                require('config/dbconfig.php');
                $query = "SELECT * FROM news ORDER BY id DESC LIMIT 4";
                if ($stmt = $mysqli->prepare($query)) {
                    /* execute statement */
                    $stmt->execute();

                    /* bind result variables */
                    $stmt->bind_result($idn, $titlen, $categoryn, $descn, $postdaten, $authorn);

                    /* fetch values */
                    while ($stmt->fetch()) {
                        //echo 'id: '. $id .' title: '. $title;
                        echo "<table border='0'>";
                        $shortDescLengthn = strlen($descn);
                        if ($shortDescLengthn > 106) {
                            $sDCutn = 106 - $shortDescLengthn;
                            $shortDescn = substr($descn, 0, $sDCutn);
                        } else {
                            $shortDescn = $descn;
                        }
                        echo "<h1>$titlen</h1>"; 
                        echo "<tr><td>$shortDescn...</td></tr>"; 
                        echo '<tr><td><a href="javascript:void(0);" onclick="' 
                        . 'readMore(' . $idn . ',' . htmlspecialchars(json_encode($titlen)) . ',' 
                        . htmlspecialchars(json_encode($categoryn)) . ',' 
                        . htmlspecialchars(json_encode($descn)) . ',' . htmlspecialchars(json_encode($postdaten)) . ',' 
                        . htmlspecialchars(json_encode($authorn)) . ')">Read More</a></td></tr>'; 
                        echo "<tr><td>Written by: $authorn</td></tr>"; 
                        echo '<tr><td><img src="images/hardcore-games-newsbar-border.png" width="468px" /></td></tr>'; 
                    }
                    echo "</table><br />";

                    /* close statement */
                    $stmt->close();
                }

                /* close connection */
                $mysqli->close();
            ?> 
```

再说一次，基本上我需要看看为什么在我点击一个链接后这不起作用，以及它如何能够更好地跨浏览器和向后浏览器兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T03:18:27.727

我所要做的就是添加：

```
$('#bodycontent').empty(); 
```

在加载（）之前，它适用于我迄今为止尝试过的每台计算机。我猜在加载新的 html 之前需要清空 div，所以回去它会阻止 js 等从 getscript 和搞砸。也只保留了只有 home.php 才需要加载的单个 js 文件，并将其他所有内容放在索引页面中（就像它本来应该那样）。

# ruby-on-rails - Rails - 为通用代码找到合适的位置

> ID：11752030
> 
> 赞同：0
> 
> 时间：2012-08-01T03:05:54.293
> 
> 标签：ruby-on-rails, code-organization, view-helpers

我把自己弄糊涂了。我有一些代码可以获取一些图像，将它们组合起来，然后以 .png 格式输出组合图像。

最初，此代码是模型的一种方法 - 模型的关联指示要使用哪些图像。因此：

```
class Component < Refinery::Core::BaseModel  
    drawing_accessor :drawing
  . . .
end

class Photo < Refinery::Core::BaseModel
  has_and_belongs_to_many :components
  has_many :drawings, :through=>:components

  def diagram
    . . . .
    Base64.encode64(png.to_blob)    #spit out the png as a base64 encoded string
  end
end 
```

在一个视图中我可以写

```
 <img src="data:image/png;base64,<%=@photo.diagram%>" 
```

现在，我需要直接从组件 ID 列表中进行相同的图像组合。由于组件 ID 尚未保存到照片中（可能不会），我需要将此代码移出照片模型。

我希望能够使用作为组件 ID 列表（数组或集合）的参数调用相同的绘图代码，无论它们来自何处。

似乎图表来自一组组件，它应该属于组件......某处。

在我的各种尝试中，我最终得到 `undefined method`了一个 ActiveRecord::Relation 或一个数组。

你能帮助澄清我关于这段代码属于哪里以及如何调用它的想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:58:06.977

我相信导轨中的指南针宝石只会满足您的目的。有关指南针和 css 精灵，请参阅[Rail Casts](http://railscasts.com/episodes/334-compass-css-sprites)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:46:22.317

嗯，发帖的力量又来了。

我为组件集合添加了一条新路线：

```
 resources :components do
    collection do
      get :draw
    end
  end 
```

在控制器中具有匹配的定义

```
def draw                 
  send_data Component.construct(params[:list],params[:width], params[:height]), :type => 'image/png', :disposition => 'inline'
end 
```

以及模型上绘制组件的方法

```
 def self.construct(component_list, width, height)
  . . . 
    Base64.encode64(png.to_blob)    #spit out the png as a base64 encoded string
  end 
```

Photo 模型包含一个将组件列表拉到一起然后调用构造的方法：

```
 def diagram
    component_list = []
    # construct the list of ids in the right order (bottom to top, or base to capital)
    ....
    Component.construct(component_list, self.image.width, self.image.height)
  end 
```

我可以从javascript调用

```
var component_list = $("input:checked").map(function(){return this.value}).get();
. . . 
$.get(url,{list:component_list, width:width, height:height}, function(data) {
  $('img.drawing').attr("src","data:image/png;base64," + data);
}) 
```

我仍然怀疑在模型中包含方法而不是在视图或视图助手中的某个地方，但这似乎确实有效！

# python - Python 方法定义中的“**params”语法是什么？

> ID：11752033
> 
> 赞同：1
> 
> 时间：2012-08-01T03:06:26.083
> 
> 标签：python, syntax

所以我正在为谷歌应用引擎搜索库尝试新的 python 代码，我遇到了一个奇怪的语法。这是：

```
cls_createDocument(**params) 
```

其中 params 是一本字典。

这指的功能是：

```
 @classmethod
  def _createDocument(
      cls, pid=None, category=None, name=None, description=None,
      category_name=None, price=None, **params) 
```

我的问题是，**params 表示什么，这对对象有什么作用？

谢谢！乔恩

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T03:09:07.097

考虑一个带有默认参数的函数：

```
def func(foo=3):
    print(foo) 
```

参数的结构（原则上）非常类似于字典。函数 foo （本质上）有一个默认参数的字典（在这种情况下`{'foo':3}`）。现在，假设您不想在函数调用中使用关键字，但您想使用字典来代替 - 然后您可以调用`foo`：

```
d = {"foo":8}
func(**d) 
```

这使您可以动态更改传递给函数的参数`func`。

如果您尝试以下操作，这会变得更有趣：

```
d = {"foo":8, "bar":12}
func(**d) 
```

这不起作用（它等效于`foo(foo=8, bar=12)`，但由于`bar`不是有效参数，因此失败）。

您可以通过将这些额外的参数放在`foo`.

```
def func( foo=3, **kwargs ):
    print(foo,kwargs) 
```

现在，尝试：

```
d = {"foo":8, "bar":12}
func(**d)  #prints (8, {'bar':12}) 
```

所有额外的关键字参数都进入函数内部的 kwargs 字典。

这也可以称为：

```
func(foo=8, bar=12) 
```

结果相同。

如果 funcA 调用 funcB 并且您希望 funcA 接受 funcB 的所有关键字（加上一些额外的关键字），这通常很有用，这在处理类和继承时很常见：

```
def funcA(newkey=None,**kwargs): 
    funcB(**kwargs) 
```

最后，这是[文档的链接](http://docs.python.org/tutorial/controlflow.html#keyword-arguments)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T03:09:25.433

**params 参数表示作为字典传递给函数的所有关键字参数。

# java - Weblogic10.3.5 安装：无法识别的选项：-d64

> ID：11752038
> 
> 赞同：0
> 
> 时间：2012-08-01T03:06:59.773
> 
> 标签：java, jvm, weblogic, weblogic-10.x

我试图在我的机器上设置 weblogic。我从[http://www.oracle.com/technetwork/middleware/ias/downloads/wls-main-097127.html](http://www.oracle.com/technetwork/middleware/ias/downloads/wls-main-097127.html)下载。

我的 PATH 看起来像这样，C:\Program Files\Java\jdk1.5.0_22\bin;

Java - cmd 提示符中的版本给出了这个，

C:\setups>java -version java version "1.5.0_22" Java(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_22-b03) Java HotSpot(TM) 64-Bit Server VM (build 1.5.0_22-b03) ， 混合模式）

现在，当我使用 oracle 文档中指定的命令 C:\setups>java -d64 -jar wls1035_generic.jar 执行 weblogic jar 文件时，我收到以下错误。

无法识别的选项：-d64 无法创建 Java 虚拟机。

我应该如何摆脱并执行 jar 文件来安装 weblogic？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-20T04:23:14.277

我遇到了这个问题。发生这种情况是因为我有一个 32 位 JDK，而不是 weblogic 安装包所需的 64 位 JDK

*   要检查您拥有的版本，请在终端中键入以下内容 java -d64 -version 如果出现错误，那就是您的问题，请执行以下操作：

*   您可以在以下位置找到 64 位 jdk：[Oracle](https://www.oracle.com/java/technologies/javase-jdk8-downloads.html)

*   我认为为避免冲突，您可能需要删除当前的 JDK

# asp.net - ASP.NET 通用提供程序 + Azure CSCFG

> ID：11752039
> 
> 赞同：1
> 
> 时间：2012-08-01T03:07:05.450
> 
> 标签：asp.net, azure, web-config, asp.net-membership

按照 Hanselman 关于新 ASP.NET 通用提供程序的帖子： [http ://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)

您将如何配置它以读取 CSCFG 文件的连接字符串，而不是 web.config？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:02:40.630

我不认为你可以让通用提供者从 ServiceConfiguration 中读取（而不是 web.config）。但是您可以做的是在每次部署应用程序或每次修改 ServiceConfiguration 时使用来自 ServiceConfiguration 的信息修改 web.config。

在您的 WebRole.cs 中，您将首先编写一些执行此操作的代码。MSDN 上有一个[主题](http://msdn.microsoft.com/en-us/library/gg494983.aspx)可以解释如何做到这一点：

*   以提升模式运行
*   参考 %WINDIR%\system32\inetsrv\Microsoft.Web.Administration.dll
*   在 OnStart 方法中编写此代码（您将需要更改此代码）：

    ```
    using (var server = new ServerManager())
    {
        // get the site's web configuration
        var siteNameFromServiceModel = "Web"; // update this site name for your site. 
        var siteName =
            string.Format("{0}_{1}", RoleEnvironment.CurrentRoleInstance.Id, siteNameFromServiceModel);
        var siteConfig = server.Sites[siteName].GetWebConfiguration();

        // get the appSettings section
        var appSettings = siteConfig.GetSection("appSettings").GetCollection()
            .ToDictionary(e => (string)e["key"], e => (string)e["value"]);

        // reconfigure the machine key
        var machineKeySection = siteConfig.GetSection("system.web/machineKey");
        machineKeySection.SetAttributeValue("validationKey", appSettings["validationKey"]);
        machineKeySection.SetAttributeValue("validation", appSettings["validation"]);
        machineKeySection.SetAttributeValue("decryptionKey", appSettings["decryptionKey"]);
        machineKeySection.SetAttributeValue("decryption", appSettings["decryption"]);

        server.CommitChanges();
    } 
    ```

现在，本主题未涵盖对 ServiceConfiguration 的更改（假设您从门户修改连接字符串而不重新部署）。这就是为什么您还需要处理[RoleEnvironment.Changing](http://msdn.microsoft.com/en-us/library/windowsazure/gg432963.aspx)事件，以更新此类更改的配置（您也可以在此处阻止实例重新启动）。

# iis-7 - 用于 asp.net web api 的 PUT 和 DELETE 的 discountasp.net 问题

> ID：11752044
> 
> 赞同：1
> 
> 时间：2012-08-01T03:08:03.170
> 
> 标签：iis-7, asp.net-mvc-4, asp.net-web-api, http-status-code-405

我有一个非常标准的 asp.net web api，设置了 get post put 和 delete。我在 discountasp.net 上托管。适用于本地主机上的所有动词，当我部署时，只有 get 和 post 有效。我已经阅读了关于这个主题的几乎所有问题，我确保 WebDav 被禁用，并确保我的处理程序映射接受正确的动词，并且我仍然得到 405 错误。

有谁知道可能是什么问题？它是 mvc4 asp.net web api，几乎是开箱即用的，我在单个 cshtml 页面上使用 ajax 与所有动词进行交互。我的网络服务器是 iis7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T18:05:11.067

结果证明这是一个简单的 web.config 更改。不知道为什么很多演练让我进入 iis 并搞乱处理程序和所有这些好东西。我将它添加到 web.config 的模块部分，它现在就像一个魅力：

```
<system.webServer> 
<modules … > 
<remove name="WebDAVModule" /> 
…… 
</modules> 
```

# haskell - 类型签名等价

> ID：11752046
> 
> 赞同：1
> 
> 时间：2012-08-01T03:08:30.347
> 
> 标签：haskell, type-inference

这是从[这个](https://stackoverflow.com/questions/11751318/incomplete-type-signature)问题开始的。

为什么是：

```
... = ... x :: a ... 
```

未定义为

```
... = ... x `asTypeOf` (undefined :: a) ... 
```

即在赋值语句中，而不是类型声明？

（注意：`a`可以是任何东西，即`Int`，`a`或`Maybe a`）

作为一个额外的问题，什么代码会破坏定义`x :: a`为`x `asTypeOf` (undefined :: a)`？例如，它会使任何有效代码无效或行为不同吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T03:14:02.387

您必须知道类型签名中的类型变量带有隐含的`forall`.

所以签名

```
x :: a 
```

意味着`x`可以有任何类型，而在

```
x `asTypeOf` (undefined :: a) 
```

它`undefined`是多态的，它`x`的类型通过使用`asTypeOf`.

所以这两个做完全不同的事情。

在链接问题的情况下，

```
f `asTypeOf` (undefined :: Maybe a) 
```

涉及到两种强制，一方面，类型变量`a`被`f`'s 类型强制，另一方面， 's 类型中的 monad`f`被强制为`Maybe`。

作为对编辑的回应：签名

```
x :: Maybe a 
```

仍然承诺*可以*`x`有各种类型。如果有人想将它用作，那是可能的。作为一个太。 *`Maybe``Maybe Bool``Maybe (Either (IO [Int]) (Double, (), Rational))`*

 *但在

```
x `asTypeOf` (undefined :: Maybe a) 
```

forall'ed 类型变量`a`可以通过`x`'s 静态类型进行细化。如果是`Monad m => m SomeComplicatedType`，则表达式类型签名会强制转换 的类型中`undefined`的类型变量，而 的类型参数会从的表达式类型签名中细化类型变量。`m``x``m``a``undefined`

如果表达式类型签名`x :: a`具有 的语义`x `asTypeOf` (undefined :: a)`，则 的当前语义`x :: a`将不再可以通过表达式类型签名来表达。*

# android - 将数据从java类传递到Web View html

> ID：11752052
> 
> 赞同：25
> 
> 时间：2012-08-01T03:08:58.133
> 
> 标签：android, html, android-webview

我在我的 html 下面加载`webView`

[https://mail-attachment.googleusercontent.com/attachment/?ui=2&ik=25c0c425c6&view=att&th=138db54ff27ad34b&attid=0.1&disp=inline&realattid=f_h5ahtmbe0&safe=1&zw&saduie=AG9B_P9YNooGjsk_jLefLptQ9q15&sadet=1343790299575&sads=-yBVsLKP_2mh7zMfYLCF7sL1u-w](https://mail-attachment.googleusercontent.com/attachment/?ui=2&ik=25c0c425c6&view=att&th=138db54ff27ad34b&attid=0.1&disp=inline&realattid=f_h5ahtmbe0&safe=1&zw&saduie=AG9B_P9YNooGjsk_jLefLptQ9q15&sadet=1343790299575&sads=-yBVsLKP_2mh7zMfYLCF7sL1u-w)

现在我要做的是填充`html`来自我的java类变量的文本框，然后自动点击提交。

但我不知道如何做到这一点。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-08-01T03:48:12.157

首先，您的 URL 似乎不可用。

如果您想在 android 应用程序和您的 Web 应用程序/网页之间进行数据交换，您可以通过 javascript 来实现。

以下是来自 Android 官方网站的示例：

像这样创建一个类：

```
public class JavaScriptInterface {
    Context mContext;

    /** Instantiate the interface and set the context */
    JavaScriptInterface(Context c) {
        mContext = c;
    }

    /** Show a toast from the web page */
    @JavascriptInterface
    public void showToast(String toast) {
        Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();
    }
} 
```

在你的`WebView`：

```
WebView webView = (WebView) findViewById(R.id.webview);
webView.addJavascriptInterface(new JavaScriptInterface(this), "Android"); 
```

在您的网页中：

```
<input type="button" value="Say hello" onClick="showAndroidToast('Hello Android!')" />

<script type="text/javascript">
    function showAndroidToast(toast) {
        Android.showToast(toast);
    }
</script> 
```

如果您想将某些内容传递给您的网页，只需调用相应的 javascript 函数：

```
String str = "xxx";
myWebView.loadUrl("javascript:xxx('"+str+"')"); 
```

这是参考：http: [//developer.android.com/guide/webapps/webview.html](http://developer.android.com/guide/webapps/webview.html)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2014-06-24T15:01:14.847

我要补充一点，应该在加载 html 时完成 javascript 函数的加载。要控制它，您可以使用以下命令：

```
webview.getSettings().setJavaScriptEnabled(true);
webview.loadUrl("file:///android_asset/test.html");
webview.setWebViewClient(new WebViewClient(){
    public void onPageFinished(WebView view, String url){   
        webview.loadUrl("javascript:init('" + theArgumentYouWantToPass + "')");
    }           
}); 
```

测试.html

```
<!DOCTYPE html>
<html>
<head>
    <title>Test</title>
</head>

<body>
hola
adios
</body>

<script type="text/javascript">

    function init(val){
// Do whatever you want with your parameter val
    }
</script>
</html> 
```

取自[Uncaught ReferenceError: myFunction is not defined at null:1 Android exception in webview](https://stackoverflow.com/questions/17633930/uncaught-referenceerror-myfunction-is-not-defined-at-null1-android-exception-i)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-01-19T21:09:27.520

只需启用 DOM 存储并写入`var x=`字符串：

```
webview.getSettings().setJavaScriptEnabled(true);
web.getSettings().setDomStorageEnabled(true);

webview.loadUrl(urlString);
webview.setWebViewClient(new WebViewClient(){

public void onPageFinished(WebView view, String url) {
    super.onPageFinished(view, url);

    String js = "javascript:var x =document.getElementById('username').value = '"+user+"';var y=document.getElementById('password').value='"+pass+"';";

    if (Build.VERSION.SDK_INT >= 19) {
        view.evaluateJavascript(js, new ValueCallback<String>() {
            @Override
            public void onReceiveValue(String s) {
            }
        });
    }
    else {
        view.loadUrl(js);
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-07-03T05:33:15.683

**小心**调用这样的javascript函数，`str`可能包含单引号或其他特殊字符。

```
String str = "xxx";
myWebView.loadUrl("javascript:xxx('"+str+"')"); 
```

我建议`str`在base64中编码，并在javascript端解码。

*   安卓

    ```
    String str = "xxx";
    //encode in base64
    String base64Str = Base64.encodeToString(str.getBytes(), Base64.NO_WRAP);
    myWebView.loadUrl("javascript:xxx('"+ base64Str +"')"); 
    ```

*   Javascript

    ```
    function xxx(val) {
        //decode from base64
        var str = atob(data)
    } 
    ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-12T08:14:50.980

直接在url中传递参数

```
webView.loadUrl("file:///android_asset/animation.html?message=testing"); 
```

获取`html`文件中的参数

```
var url_string = window.location.href
var url = new URL(url_string);
var message= url.searchParams.get("message"); 
```

# javascript - Google Docs - 电子表格循环

> ID：11752058
> 
> 赞同：0
> 
> 时间：2012-08-01T03:09:22.750
> 
> 标签：javascript, google-apps-script, google-docs-api, google-sheets, google-spreadsheet-api

这个可能有点基本且容易回答，但我已经拉了一段时间的头发了！

我已经构建了以下代码 - 这是半伪代码，因为我找不到正确的方法来使事情正常进行！

```
var s = "Test";

function onEdit(event)
{
  var ss = event.source.getActiveSheet();
  var r = event.source.getActiveRange();
  if (ss.getName() == s)
  {
    results = {"Currently On": 0, "Next Up": 0, "On Hold": 0, "Waiting on someone else":     0, "zDone": 0};
    last = ss.getMaxRows();
    start = ss.getRange("F3:"+last).getValues();
    var output = "J11";
    for (x=0;x<start.length;x++)
    {
     results[start[x]]++;
    }

    for (y=0;y<results.length;y++)
    {
      row = ss.getRow(output);
      row.value = results[y];
      output++;
    }
  }
} 
```

我有这张图片中的数据示例![数据示例](../Images/263e5829cddb95cf32bbbb3527046255.png)

基本思想是遍历每个任务的所有可能类别，并在每个任务的数量旁边保留一个数字列表。我也想让它动态化（所以我不必在类别列表中硬编码），但我更感兴趣的是让它暂时工作。

Google Apps 调试器非常令人沮丧！

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:32:58.107

首先，这个特定的用例可以通过电子表格公式轻松实现，例如：

```
=QUERY(A2:F;"select F, count(A) where F != '' group by F label count(A) 'Count'";1) 
```

但是您可能有一个原因要使用 GAS 来执行此操作。

其次，这是我认为可能存在一些语法问题的地方：

```
last = ss.getMaxRows(); 
```

我只会在`var last = ss.getLastRow()`这里使用。

```
start = ss.getRange("F3:"+last).getValues(); 
```

范围参考将评估为“F3:100”之类的东西，这是 GSheets 中的有效参考（不知道 GAS 是否可以处理它），但是您确实想要“F3:F100”之类的东西，所以我会使用`var start = ss.getRange("F3:F"+last).getValues();`.

```
results[start[x]]++; 
```

当您从调用创建数组时，`getValues()`它是一个二维数组，因此您需要使用`results[start[x][0]]++;`.

对于下一个循环和`output`变量，我必须承认我对你在那里所做的事情有点迷茫。您希望如何布置结果表？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:58:57.847

你有

```
output = "J11"; 
```

然后你做

```
ss.getRow(output);
output++; 
```

这是无效的。首先，ss是一个Sheet，其下没有getRow方法。所以，你真正应该做的是这样的事情

```
var row = 11 ;
var col = 10 ;  //Col J
for (y=0;y<results.length;y++)
{
  ss.getRange(row,col,1,1).setValue(results[y]);
  row++:
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-02T05:58:26.357

与 AdamL 一样，我建议在电子表格的本机功能中更好地处理这一点。在我看来，您想要一个可以动态更新的数据透视表。或者，像 =countif(F:F,"Currently On" ) 这样的公式可以满足您的即时要求。=Unique(F:F) 将为您提供数组中的类别列表

# jquery - 带有 Ajax 的 Joomla：致命错误：找不到类“JFactory”

> ID：11752061
> 
> 赞同：1
> 
> 时间：2012-08-01T03:09:25.607
> 
> 标签：jquery, ajax, joomla, joomla2.5

在弄清楚如何一起使用 Ajax 和 Joomla 框架方面仍然存在问题。我创建了一个可以访问的 Joomla 组件：

`index.php?option=com_mycomponent`

我在 Ajax 中使用 Jquery `components/com_mycomponent/views/mycomponent/tmpl/default.php`：

```
<?php
// No direct access to this file
defined('_JEXEC') or die('Restricted access');
?>
<html>
<head>
  <title>Ajax with jQuery Example</title>

<script language="javascript" type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script type="text/JavaScript">
  $(document).ready(function(){
    $("#generate").click(function(){
  $("#quote p").load("components/com_mycomponent/views/mycomponent/tmpl/script.php");

    });
  });
  </script>
</head>
<body>
  <div id="wrapper">
    <div id="quote"><p> </p></div>
    <input type="submit" id="generate" value="Generate!">
  </div>
</body>
</html> 
```

然后在 script.php 文件中我有这个：

```
<?php  
$user =& JFactory::getUser();
echo "This is the user: ".$user;
?> 
```

如果我没有在 script.php 中放置任何 Joomla 框架代码，它就可以正常工作。但这样做的目的是我需要使用 Joomla 框架，因此是创建组件的重点。但我仍然不明白我需要如何构建 Joomla 组件，这样我就不会收到`Class 'JFactory' not found`错误消息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:35:16.363

我认为正确的方法是在组件的 controller.php 文件中添加一个任务。

[http://docs.joomla.org/Adding_AJAX_to_your_component](http://docs.joomla.org/Adding_AJAX_to_your_component)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:32:33.600

最终没有花费太长时间。唯一需要的文件是 default.php，因此您可以删除其中的 script.php 和其他奇怪的文件。

**默认.php**

```
<?php
defined('_JEXEC') or die('Restricted access');

//$document =& JFactory::getDocument();
//$document->addScript("https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js");
$user =& JFactory::getUser();
?>

<div id="wrapper">
    <div id="quote" style="display:none; padding-bottom:10px;">
        <?php 
          echo "<p>This is your username: " . $user->username . "</p>"; 
          echo "<p>This is your realname: " . $user->name . "</p>"; 
          echo "<p>This is your user ID: " . $user->id . "</p>";
        ?>
    </div>
    <input type="submit" id="generate" value="Generate!">
</div>

<script type="text/javascript">
$(document).ready(function(){
     $("#generate").click(function(){
          $("#quote").show();
     });
});
</script> 
```

我已经在代码中注释掉了 jquery 引用，因为 widgetkit 已经在加载它的副本，但将它保留在那里以防万一。

它不是加载另一个文件，而是隐藏`#quote`div 标签，当单击按钮时，它会显示它以及其中的数据。在这一个中，我添加了`realname`并`user ID`以防万一。

希望这可以帮助。

问候

# ios - 在 iMessage 等气泡图像背景上绘制随机图像

> ID：11752073
> 
> 赞同：2
> 
> 时间：2012-08-01T03:11:07.973
> 
> 标签：ios

这是一个聊天应用，气泡是背景图片，对于文本，我可以用“resizableImageWithCapInsets”拉伸气泡图像，然后在气泡上绘制文本。但问题是当它是一个随机图像时，我如何在气泡上绘制图像，就像它在所附图片中的方式一样？mac上的ios message和imessage都以这种方式显示图像。

[http://i.stack.imgur.com/sgJhv.png](http://i.stack.imgur.com/sgJhv.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-17T17:22:18.760

看看[BubbleThingie](https://github.com/tkirby/BubbleThingie/blob/master/README.md)示例应用程序。它会像您的示例图像一样进行图像遮罩和光泽效果。

![在此处输入图像描述](../Images/aae08c2958db03aae7e025eef7bfef8c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:21:30.577

如果您的气泡由 UIImageView（它是 UIView 的子类）表示，您可以添加另一个 UIImageView 作为气泡的子视图。你可以使这个子视图的框架等于你的气泡的框架，然后将气泡的 clipsToBounds 属性设置为 YES，这样子视图就被限制在气泡上。

然后将子视图的 contentMode 设置为 UIViewContentModeAspectFill，这会将图像拉伸到气泡的大小。像这样的东西：

```
//After resizing the bubble to the size you want, to this:
bubbleView.clipsToBounds = YES;
UIImageView *imageView = [[UIImageView alloc] initWithFrame:bubbleView.frame];
imageView.image = theImage;
imageView.contentMode = UIViewContentModeAspectFill;
[bubbleView addSubview:imageView];'
[imageView release]; 
```

# android - Android：按钮的 GridView 但按钮没有响应

> ID：11752074
> 
> 赞同：1
> 
> 时间：2012-08-01T03:11:17.970
> 
> 标签：android, button, gridview

我在 GridView 上有一个非常基本的程序，其中包含一些按钮，如下面的代码所示。程序运行良好，按钮显示在网格中，但是当我单击时它们没有响应。如果我将代码更改为图像的网格视图，它可以正常工作。我相信我在某处`gridView.setOnItemClickListener`或在某处错了`public View getView()`。艾恩建议？谢谢

```
public class MainActivity extends Activity {
    public String[] filenames ={"B1","B2","B3","B4","B5","B6"};        
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);           
        GridView gridView = (GridView) findViewById(R.id.gridview);
        gridView.setAdapter(new ButtonAdapter(this));  
        gridView.setOnItemClickListener(new OnItemClickListener(){
            public void onItemClick(AdapterView<?> parent, 
            View v, int position, long id){                
                Toast.makeText(getBaseContext(), 
                        "pic" + (position + 1) + " selected", 
                        Toast.LENGTH_SHORT).show();
            }
        });        
    }

    public class ButtonAdapter extends BaseAdapter {
        private Context context;    
        public ButtonAdapter(Context c){
            context = c;
        }
        public int getCount() {
            return filenames.length;
        }
        public Object getItem(int position) {
            return position;
        }     
        public long getItemId(int position) {
            return position;
        }
        public View getView(int position, View convertView, ViewGroup parent){
              Button btn;  
                 if (convertView == null) {   
                  btn = new Button(context);  
                  btn.setLayoutParams(new GridView.LayoutParams(100, 100));  
                  btn.setPadding(8, 8, 8, 8);  
                  }else {  
                  btn = (Button) convertView;  
                 }               
                 btn.setText(filenames[position]);    
                 btn.setTextColor(Color.WHITE);  
                 btn.setId(position);       
                 return btn; 
        }
    }    
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T04:12:01.580

您需要将 Buttons 属性可聚焦和可点击设置为 false。因为在当前情况下，焦点和单击事件是由按钮捕获的，而不是在网格视图项上。将您的代码更改为以下内容：

```
public class MainActivity extends Activity {
    public String[] filenames ={"B1","B2","B3","B4","B5","B6"};        
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);           
        GridView gridView = (GridView) findViewById(R.id.gridview);
        gridView.setAdapter(new ButtonAdapter(this));  
        gridView.setOnItemClickListener(new OnItemClickListener(){
            public void onItemClick(AdapterView<?> parent, 
            View v, int position, long id){                
                Toast.makeText(getBaseContext(), 
                        "pic" + (position + 1) + " selected", 
                        Toast.LENGTH_SHORT).show();
            }
        });        
    }

    public class ButtonAdapter extends BaseAdapter {
        private Context context;    
        public ButtonAdapter(Context c){
            context = c;
        }
        public int getCount() {
            return filenames.length;
        }
        public Object getItem(int position) {
            return position;
        }     
        public long getItemId(int position) {
            return position;
        }
        public View getView(int position, View convertView, ViewGroup parent){
              Button btn;  
                 if (convertView == null) {   
                  btn = new Button(context);  
                  btn.setLayoutParams(new GridView.LayoutParams(100, 100));  
                  btn.setPadding(8, 8, 8, 8);  
                  btn.setFOcusable(false);
                  btn.setClickable(false);
                  }else {  
                  btn = (Button) convertView;  
                 }               
                 btn.setText(filenames[position]);    
                 btn.setTextColor(Color.WHITE);  
                 btn.setId(position);       
                 return btn; 
        }
    }    
} 
```

# php - 尝试执行 JOINed 查询时抛出 MySQL 错误消息

> ID：11752078
> 
> 赞同：0
> 
> 时间：2012-08-01T03:11:52.003
> 
> 标签：php, mysql

> **可能重复：**
> [警告：mysql_fetch_array()：提供的参数不是有效的 MySQL 结果](https://stackoverflow.com/questions/795746/warning-mysql-fetch-array-supplied-argument-is-not-a-valid-mysql-result)

这是代码：

```
$result=mysql_query("
SELECT items.items_id, 
COUNT(ratings.item_id) AS TotalRating,
AVG(ratings.rating) AS AverageRating
FROM 'items'
LEFT JOIN ratings ON (ratings.item_id = items.items_id)
WHERE ratings.item_id = '{$item_id}' ;");

echo "Error message = ".mysql_error();

while($row=mysql_fetch_assoc($result)) {
      $output[]=$row;
} 
```

这是错误：

```
Error message = You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''items' LEFT JOIN ratings ON (ratings.item_id = items.items_id) WHERE ' at line 4
Warning: mysql_fetch_assoc(): supplied argument is not a valid MySQL result resource in /home/content/k/i/c/kickinglettuce/html/Kickinglettuce/ratethis/get_ratings.php on line 38
null 
```

我已经确认 $item_id 是基于 echo 语句的正确响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T03:14:28.330

您`items`在 SINGLE QUOTES (') 而不是 BACKTICKS(`) 中有表。

# android - 有什么方法可以查询特定类型的 Intent Filter 功能的应用程序吗？

> ID：11752081
> 
> 赞同：4
> 
> 时间：2012-08-01T03:12:04.840
> 
> 标签：android, android-intent

我正在寻找一种方法来在设备中搜索所有能够通过操作“VIEW”和类别“BROWSABLE”过滤意图的应用程序？

我找到了以下链接并学习了如何列出所有 Intent 过滤器，但是如何仅列出仅具有上述参数的那些？

[http://developer.android.com/reference/android/content/pm/PackageManager.html#queryIntentActivities%28android.content.Intent,%20int%29](http://developer.android.com/reference/android/content/pm/PackageManager.html#queryIntentActivities%28android.content.Intent,%20int%29)

[获取接收者的意图过滤器](https://stackoverflow.com/questions/8142386/get-intent-filter-for-receivers)

[如何过滤 ACTION_SEND 意图的特定应用程序（并为每个应用程序设置不同的文本）](https://stackoverflow.com/questions/9730243/android-how-to-filter-specific-apps-for-action-send-intent)

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T15:19:02.750

这段代码应该或多或少地做你想要的。主要问题是，我认为您不会找到任何过滤活动`CATEGORY_BROWSABLE`而不需要特定类型的**数据。**我在手机上试过了，直到我`setData()`在 Intent 上添加了呼叫，我才得到任何有用的东西。

```
 PackageManager manager = getPackageManager();
    Intent intent = new Intent();
    intent.setAction(Intent.ACTION_VIEW);
    intent.addCategory(Intent.CATEGORY_BROWSABLE);
    // NOTE: Provide some data to help the Intent resolver
    intent.setData(Uri.parse("http://www.google.com"));
    // Query for all activities that match my filter and request that the filter used
    //  to match is returned in the ResolveInfo
    List<ResolveInfo> infos = manager.queryIntentActivities (intent,
                                   PackageManager.GET_RESOLVED_FILTER);
    for (ResolveInfo info : infos) {
        ActivityInfo activityInfo = info.activityInfo;
        IntentFilter filter = info.filter;
        if (filter != null && filter.hasAction(Intent.ACTION_VIEW) &&
                  filter.hasCategory(Intent.CATEGORY_BROWSABLE)) {
            // This activity resolves my Intent with the filter I'm looking for
            String activityPackageName = activityInfo.packageName;
            String activityName = activityInfo.name;
            System.out.println("Activity "+activityPackageName + "/" + activityName);
        }
    }
} 
```

# php - PHP，使用mysql的时间戳？

> ID：11752088
> 
> 赞同：0
> 
> 时间：2012-08-01T03:13:04.027
> 
> 标签：php, mysql, datetime, insert, timestamp

我一直在尝试寻找一个直接的答案，但由于某种原因，我没有找到答案。我想知道将日期/时间存储到 mysql 中的最佳方法是什么？

我研究了mysql中的时间戳很好，因为它也会根据时区更新。

所以我已经将我的列名`timestamp`与`datatype`mysql中的一样设置为时间戳，但是将当前日期/时间存储到那个的最佳语法是什么？

```
"INSERT INTO table(timestamp) VALUES(now())" //or use timestamp()? or is there such thing? 
```

?

请帮忙，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:36:03.367

以下是一些注意事项：

*   将列类型设置为，`BIGINT`以便您可以存储 64 位时间戳
*   [`time()`](http://php.net/time)您可以使用 PHP函数或 MySQL 的[`UNIX_TIMESTAMP()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)函数插入
*   将您的列命名为`timestamp`. 这是一个允许的词^([1](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)见最后一节)，但它也是 MySQL 中的一种类型。

如果您将时间存储为 MySQL 中的 Unix 时间戳，它们将存储在 UTC 中，这使得处理时区转换非常容易。在 64 位环境中，PHP 可以处理高达 219,250,468 年的日期。

这两个查询是相同的：

```
INSERT INTO `table` (`time`) VALUES(UNIX_TIMESTAMP());
// or
$time = time();
INSERT INTO `table` (`time`) VALUES($time); 
```

然后在 PHP 中显示它：

```
SELECT `time` from `table` WHERE `id` = 1;
echo date('Y-m-d H:i:s e', $row['time']); // 2012-07-31 23:59:59 America/Los_Angeles 
```

在 PHP 中设置的任何时区都[`date_default_timezone_set()`](http://php.net/date_default_timezone_set)将是您在 PHP 中输​​出日期时使用的时区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:16:31.497

您可以`datetime`在表中使用数据类型并将其存储为`NOW()`将其存储为`YYYY-MM-DD HHHH:MM:SS`

# jquery - 使用 jQuery 禁用下拉选项

> ID：11752097
> 
> 赞同：15
> 
> 时间：2012-08-01T03:14:06.213
> 
> 标签：jquery, html, web-deployment

我需要在动态下拉菜单列表中禁用值为“- Sold Out -”的选项。如何使用 jQuery 轻松做到这一点？下面是HTML

```
<select id="field_0_1" class="text_select" name="field_0_1" onChange="">
<option value="">- Preferred Time -</option>
<option value="- Sold Out -">- Sold Out -</option>
<option value="2:30 - 4:00pm">2:30 - 4:00pm</option>
</select>
<select id="field_0_2" class="text_select" name="field_0_2" onChange="">
<option value="">- Preferred Time -</option>
<option value="- Sold Out -">- Sold Out -</option>
<option value="2:30 - 4:00pm">2:30 - 4:00pm</option>
</select>
<select id="field_0_3" class="text_select" name="field_0_3" onChange="">
<option value="">- Preferred Time -</option>
<option value="- Sold Out -">- Sold Out -</option>
<option value="2:30 - 4:00pm">2:30 - 4:00pm</option>
</select> 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-01T03:37:13.927

```
$("select option[value*='Sold Out']").prop('disabled',true);
        ​ 
```

**[演示](http://jsfiddle.net/BYkVW/2/)**

### 根据编辑

```
$('#previous_select').on('change', function() {
   // after creating the option
   // try following
   $("select option[value*='Sold Out']").prop('disabled',true);
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-01T03:16:36.517

**工作演示** [http://jsfiddle.net/BYkVW/](http://jsfiddle.net/BYkVW/) **或** [http://jsfiddle.net/BYkVW/1/](http://jsfiddle.net/BYkVW/1/)

希望对需要有帮助`:)`

**代码**

```
$("#field_0_1 option[value='- Sold Out -']").attr('disabled','disabled');
        ​ 
```

**或者**

```
$("#field_0_1 option[value='- Sold Out -']").prop('disabled','disabled'); 
```

**工作形象**

![在此处输入图像描述](../Images/d326a5af287cb11e09cf9d8192935fe2.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-24T16:24:12.430

```
function lockDownDropDownList(ddlName) {
    ddlName = "#" + ddlName;
    var chosenValue = $(ddlName).val();

    var downDownListItems = $(ddlName).children('option').map(function (i, e) {
        return e.value || e.innerText;
    }).get();

    downDownListItems.forEach(function (item) {
        if (item != chosenValue)
        {
            $("select option[value*='" + item + "']").prop('disabled', true);
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T10:15:27.747

在这里，我已经完成了上述查询的解决方案。演示链接如下：

**演示：** [http ://codebins.com/bin/4ldqp92](http://codebins.com/bin/4ldqp92)

**HTML：**

```
 <select id="field_0_1" class="text_select" name="field_0_1" onChange="">
  <option value="">
    - Preferred Time -
  </option>
  <option value="- Sold Out -">
    - Sold Out -
  </option>
  <option value="2:30 - 4:00pm">
    2:30 - 4:00pm
  </option>
</select>
<select id="field_0_2" class="text_select" name="field_0_2" onChange="">
  <option value="">
    - Preferred Time -
  </option>
  <option value="- Sold Out -">
    - Sold Out -
  </option>
  <option value="2:30 - 4:00pm">
    2:30 - 4:00pm
  </option>
</select>
<select id="field_0_3" class="text_select" name="field_0_3" onChange="">
  <option value="">
    - Preferred Time -
  </option>
  <option value="- Sold Out -">
    - Sold Out -
  </option>
  <option value="2:30 - 4:00pm">
    2:30 - 4:00pm
  </option>
</select> 
```

**查询：**

```
$(function() {
    $("select").click(function() {
        $(this).find("option[value*='Sold Out']").prop("disabled", true);
    });
}); 
```

**演示：** [http ://codebins.com/bin/4ldqp92](http://codebins.com/bin/4ldqp92)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-15T06:56:52.323

```
$("#ddlList option[value='jquery']").attr("disabled","disabled"); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-04T16:45:31.583

如果有人希望能够通过文本而不是值禁用下拉列表，这就是我所做的：

```
$("#DDL option").filter(function () {
    return $(this).text() === "Text 1" ||
           $(this).text() === "Text 2" ||
           $(this).text() === "Text 3";
}).prop("disabled", true); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-07T06:46:38.153

只需使用禁用添加类到**md-select-wrapper** $("#selectFromMainId").addClass("disabled");

md-select-wrapper 禁用 禁用

# javascript - 尝试在按钮单击时获取随机数

> ID：11752100
> 
> 赞同：0
> 
> 时间：2012-08-01T03:14:54.310
> 
> 标签：javascript, html

我正在尝试使用javascript在用户单击按钮后获取0-20范围内的随机数以显示在文本框中，但到目前为止我没有成功。我的代码有什么错误？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Untitled 1</title>
</head>
<body>
<form><input name="code" id="code" type="text" value="" >
<script type="text/javascript">
    function makeid()
    {
    var randomnumber=Math.floor(Math.random() * 20)
}
</script>
<input type="button" style="font-size:9pt" value="Generate Code" onclick="document.getElementById('code').value = makeid()">
</input>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:17:13.060

您的函数不返回值，这就是输入设置为`undefined`.

试试这个：

```
function makeid() {
    return Math.floor(Math.random() * 20);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T03:17:24.007

您的函数需要返回一个值：

```
function makeid() {
    return Math.floor(Math.random() * 20)
} 
```

# c++ - Visual C++ 中的 _32_ 和 _64_ 等效项

> ID：11752111
> 
> 赞同：0
> 
> 时间：2012-08-01T03:17:11.387
> 
> 标签：c++, c, visual-c++

我想在 Visual C 中定义*32*（32 位编译）和*64*（64 位编译）。是否有任何预定义的宏？我徒劳地浏览了MSDN。

你认为这种对*32*和*64*的定义行得通吗？

```
#define _32_ if !(defined __LP64__ || defined __LLP64__) || defined _WIN32 && !defined _WIN64
        // we are compiling for a 32-bit system
the else statement will be _64_ definition
        // we are compiling for a 64-bit system 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T03:27:24.377

从[文档](http://msdn.microsoft.com/en-us/library/b0084kay.aspx)：

> **_M_IX86**：为 x86 处理器定义。...这不是为 x64 处理器定义的。
> 
> **_M_X64**：为 x64 处理器定义。
> 
> **_M_IA64**：为安腾处理器系列 64 位处理器定义。
> 
> **_WIN32**：为 Win32 和 Win64 的应用程序定义。始终定义。
> 
> **_WIN64**：为 Win64 应用程序定义。

任你选。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T03:28:06.127

您可能会在尝试枚举所有可能的处理器架构并了解它们的 int 大小时陷入困境，但我建议您使用[`_WIN64`](http://msdn.microsoft.com/en-us/library/b0084kay.aspx)，它是在您在任何处理器上构建 64 位可执行文件时定义的，而不是在您“重新构建 32 位。

Visual C++ 很早以前就已经支持它了——甚至可能是 Visual C++ 2003。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T03:32:25.007

总是有 _WIN64 预处理器宏。Raymond Chen 很好地涵盖了这个主题：http: [//blogs.msdn.com/b/oldnewthing/archive/2006/09/06/742710.aspx](http://blogs.msdn.com/b/oldnewthing/archive/2006/09/06/742710.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T03:29:09.433

如果你查看[MSDN](http://msdn.microsoft.com/en-us/library/b0084kay%28VS.80%29.aspx)，它说`_M_X64`是为 64 位处理器定义的。

# ruby-on-rails-3 - validates_with 的选项

> ID：11752117
> 
> 赞同：2
> 
> 时间：2012-08-01T03:17:39.530
> 
> 标签：ruby-on-rails-3, custom-validators

我无法访问在“validates_with”中作为选项传递的值

我的模型：

```
 class Person < ActiveRecord::Base
    include ActiveModel::Validations
    attr_accessible :name, :uid

    validates :name, :presence => "true"
    validates :uid, :presence => "true"
    validates_with IdValidator, :attr => :uid 
```

我的自定义验证器：

```
 Class IdValidator < ActiveModel::Validator

    def validate(record)
    puts options[:attr]
    ...
    ...
    end
    end 
```

出于测试目的，我正在打印“options[:attr]”，我看到的只是终端中的“:uid”，而不是其中的值。请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T03:31:42.107

当你传入 时`:attr => :uid`，你只是传入一个符号。这里没有发生什么神奇的事情——它只是获取你附加的选项的哈希值并将其作为`options`哈希值传递。所以当你写它时，你会看到你已经通过的符号。

你可能想要的是

```
Class IdValidator < ActiveModel::Validator
  def validate(record)
    puts record.uid
    ...
    ...
  end
end 
```

因为`validates_with`是类方法，所以无法在选项哈希中获取单个记录的值。如果您对更 DRY 的版本感兴趣，可以尝试以下方法：

```
class IdValidator < ActiveModel::Validator
    def validate(record)
      puts record[options[:field]]
    end
end

class Person < ActiveRecord::Base
  include ActiveModel::Validations
  attr_accessible :name, :uid

  validates :name, :presence => "true"
  validates :uid, :presence => "true"
  validates_with IdValidator, :field => :uid
end 
```

您传入要评估的字段名称的位置。

# php - 解析 Skype 日志

> ID：11752118
> 
> 赞同：4
> 
> 时间：2012-08-01T03:17:49.180
> 
> 标签：php, regex, skype

我需要解析 Skype 日志，获取所有通话时长并将它们相加，然后找出整个聊天记录的通话总时长。

样本：

[3/12/2012 11:36:44 AM] *** 通话结束，持续时间 21:33 ***

我想我需要将 preg_match 与正确的正则表达式一起使用。如果可以同时将实际时间戳存储在数组中，那就更好了。

我认为我真正难过的是获取通话时间所需的实际正则表达式规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:31:46.167

**尝试这个**

```
(?i)\[(?P<time_stamp>[^[]+)\]\s*[*]\s*[a-z ,]+(?P<duration>(?:\d{2}:?){2,3})\s*[*] 
```

**解释**

```
"
(?i)               # Match the remainder of the regex with the options: case insensitive (i)
\[                 # Match the character “[” literally
(?P<time_stamp>    # Match the regular expression below and capture its match into backreference with name “time_stamp”
   [^[]               # Match any character that is NOT a “[”
      +                  # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
)
\]                 # Match the character “]” literally
\s                 # Match a single character that is a “whitespace character” (spaces, tabs, and line breaks)
   *                  # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
[*]                # Match the character “*”
\s                 # Match a single character that is a “whitespace character” (spaces, tabs, and line breaks)
   *                  # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
[a-z ,]            # Match a single character present in the list below
                      # A character in the range between “a” and “z”
                      # One of the characters “ ,”
   +                  # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
(?P<duration>      # Match the regular expression below and capture its match into backreference with name “duration”
   (?:                # Match the regular expression below
      \d                 # Match a single digit 0..9
         {2}                # Exactly 2 times
      :                  # Match the character “:” literally
         ?                  # Between zero and one times, as many times as possible, giving back as needed (greedy)
   ){2,3}             # Between 2 and 3 times, as many times as possible, giving back as needed (greedy)
)
\s                 # Match a single character that is a “whitespace character” (spaces, tabs, and line breaks)
   *                  # Between zero and unlimited times, as many times as possible, giving back as needed (greedy)
[*]                # Match the character “*”
" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:24:02.490

你可以使用这个：

```
 \*.+?([0-9]+:){1,2}([0-9]+) 
```

然后它可以捕获第一个之后的 HH:MM:SS 和 MM:SS `*`。

# php - javascript document.submit 不适用于所有浏览器

> ID：11752119
> 
> 赞同：0
> 
> 时间：2012-08-01T03:18:02.740
> 
> 标签：php, javascript, browser

我的代码在某处有问题，当用户在第一个选择菜单中选择“事件”时，它会使用数据库中的选项更新第二个菜单。第二个菜单在某些浏览器（例如 IE 和 Chrome）中没有更新，但在其他浏览器（例如 firefox）中运行良好。

我不太确定是什么问题，任何帮助将不胜感激。谢谢！

我目前拥有的代码如下 -

```
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<script type="text/javascript">
function events()
{
   document.eventform.submit();
}
</script>

<?
require_once('dbconnect.php');

$sql="SELECT id, event FROM events ORDER BY id DESC";
$result=mysql_query($sql);

$options1="";

while ($row=mysql_fetch_array($result)) {

$id=$row["id"];
$event=$row["event"];
$options1.="<OPTION VALUE=\"$event\">".$event;'</OPTION>';

}
$eventis = $_GET['event'];
$sql = "SELECT * FROM events WHERE event='$_GET[event]' ORDER BY id DESC";  
$result=mysql_query($sql);

$options2="";

while ($row=mysql_fetch_array($result)) {

$id=$row["id"];
$location1=$row["location1"];
$location2=$row["location2"];
$location3=$row["location3"];
$location4=$row["location4"];
  $options2.="<OPTION VALUE=\"$location1\">".$location1;'</OPTION>';
$options2.="<OPTION VALUE=\"$location2\">".$location2;'</OPTION>';
$options2.="<OPTION VALUE=\"$location3\">".$location3;'</OPTION>';
$options2.="<OPTION VALUE=\"$location4\">".$location4;'</OPTION>';

}
?>
</head>
<body>

<form action=""  name="eventform" class="style1" id="eventform" onchange="events()">
  <p align="center">

Step 1: 
  <select name="event" id="event">
  <OPTION VALUE=0>Select Event:
  <?=$options1?>
  </select> 
  &nbsp;</label>
  <?php echo $eventis ?></p>
  <div align="center"></div>
  <div align="center"></div>
 </form>

 <form action='sale.php' name= 'locationform' method='get'>

<div id="eventname"></div>
<p align="center">Step 2: Select the location:
  <select name="location"  id="location">
 <OPTION VALUE=0>Select Location:
  <?=$options2?>
 </select>
</p>
<p align="center">
<input name="event" type="hidden" id="event" value="<?php echo $eventis ?>">
<input name="operator" type="hidden" id="operator" value="<?php echo $operator ?>">
<input type="submit" value="Submit" />
</form>
</p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:30:54.613

对于初学者来说，你没有选择你的表格

`document.eventform.submit();`

不选择您的表格，您将需要使用

`document.forms["eventform"].submit()`

或使用 选择表格`getElementById`。

其次，您的 html 有点灾难 :) 但我认为这不是问题所在。只是想我会让你知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:36:49.367

在两种情况下都添加结束标签 `<OPTION VALUE=0>Select Event:</OPTION>` `<OPTION VALUE=0>Select Location:</OPTION>`

# mysql - 如何在mysql中将学生与表单问题联系起来

> ID：11752122
> 
> 赞同：2
> 
> 时间：2012-08-01T03:18:31.310
> 
> 标签：mysql, database-design, data-modeling

我有这样的实体

1.  学生
2.  反馈_类别
3.  反馈问题
4.  答案

表格如下

技术问题（类别）

*   Q1。你在哪一门课——文本框输入

    Q2。你知道哪些语言 --- 文本输入

一般问题（类别）

*   Q1。你在哪个区域——文本框输入

    Q2。你知道哪些地方 --- 文本输入

我的问题是

1.  是否将 Student 与`questions`或`category`或链接`answers`。这些问题对每个学生都是固定的，但所有学生都会有不同的答案
2.  我是否需要执行该函数，以便当我创建一个学生时，那些问题 ID 并输入到学生表中，或者我不需要它
3.  开始时不会为学生存储答案。所以我需要先在答案表中创建空答案，这样当学生在网站上打开表格时，我就可以绑定表格

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-01T03:40:01.190

这就是我会做的方式，我希望这会有所帮助。我可以更深入地解决您的一些问题（作为评论），我真的不完全理解这些问题。请注意，每个表名都是复数，而直接相关的每一列都是单数。

```
Students

|id | name      | 
|---|-----------|
|0  | Thomas    |
|1  | Fred      |
|2  | Stephanie |

Categories

|id | category  | 
|---|-----------|
|0  | Technical |
|1  | General   |

Questions

|id | category_id | question                     | element            |
|---|-------------|---------------------------------------------------|
|0  | 0           | Which class you are in?      | textarea           |
|1  | 0           | Which languages do you know? | input[type="text"] |
|2  | 1           | Which area you are in?       | textarea           |
|3  | 1           | Which pllaces do you know?   | input[type="text"] |

Answers

|id | question_id | student_id | answer          |
|---|-------------|------------|-----------------|
|0  | 0           | 0          | Advanced MySql  |
|1  | 0           | 3          | Markdown 101    | 
```

# node.js - 来自回调的请求参数的值？

> ID：11752124
> 
> 赞同：1
> 
> 时间：2012-08-01T03:18:37.487
> 
> 标签：node.js, express

我`express.js`在`node.js`. 我试图`app.get()`从回调中获取第一个字符串参数的值。

```
app.get('/example/code', function(req,res){
 console.log(firstParam); // "/example/code"
});

app.get('/example/:id', function(req,res){
 console.log(firstParam); // "/example/:id"
});

app.get('/example(s?)', function(req,res){
 console.log(firstParam); // "/example(s?)"
}); 
```

有什么办法可以做到这一点？如您所见，我不想要确切的网址，我想要路线的因素是什么。对于第二个示例，我不想返回`/example/2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:30:47.407

您可以通过以下方式获取回调内部的路径：

```
req.route.path 
```

在其他信息中`req.route`：

```
{ path: '/example/:id',
  method: 'get',
  callbacks: [ [Function] ],
  keys: [ { name: 'id', optional: false } ],
  regexp: /^\/example\/(?:([^\/]+?))\/?$/i,
  params: [ id: '42' ] } 
```

# jquery - 创建一个与moviepilot.com 类似的主页布局，其中包含两个滚动内容区域？

> ID：11752127
> 
> 赞同：2
> 
> 时间：2012-08-01T03:19:05.083
> 
> 标签：jquery, css, layout, html, graphic

如何创建与[http://moviepilot.com/](http://moviepilot.com/)类似的布局。我最感兴趣的是他们如何创建两个滚动内容区域。我可以在 jquery 中开发这个吗？或者有没有更简单的方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T03:41:50.850

[http://jsfiddle.net/demchak_alex/9rVzF/3/](http://jsfiddle.net/demchak_alex/9rVzF/3/)

他们是这样做的。

左边是“位置：固定；” 到屏幕。因此，当您“滚动页面”时，右侧滚动，左侧部分仍然没有滚动。

当您向左滚动时，页面保持不变，只是该 div 被滚动，然后右边部分看起来没有滚动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:26:13.553

你可以试试`overflow:auto;`

而且你也应该使用`position`财产。背景图像是固定的，这就是为什么右侧滚动，任何方式你都可以只使用 css 来做所有这些事情。

试试这个链接 [溢出](http://www.1keydata.com/css-tutorial/overflow.php)

[位置属性](http://www.barelyfitz.com/screencast/html-training/css/positioning/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T03:28:14.643

它们只创建一个滚动区域，其他默认滚动:) 如何创建滚动区域？魔术在`overflow: auto`. 给一些容器固定位置，`overflow: auto;`然后就可以了。[演示](http://jsfiddle.net/d4EQB/)

# objective-c - 标签栏控制器，通过选择不同的标签来提取数据

> ID：11752134
> 
> 赞同：0
> 
> 时间：2012-08-01T03:19:55.330
> 
> 标签：objective-c, xcode4.3

我需要帮助从 Xcode 中的文本字段中提取数据。不推送数据。例如，我有一个标签栏控制器，它有两个标签。选项卡 1 和选项卡 2。

*   **Tab1**包含一个文本字段。
*   **Tab2**包含一个标签。

是否可以在 Tab1 的 textField 中键入内容，并且在按下 tab2 时，该文本是否会自动出现在 Tab2 的标签中？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:51:04.900

您可以创建一个简单的类，例如继承 NSObjects 的“Data”。然后添加存储该数据的属性（不要忘记合成它们）。将该类添加到两个选项卡的视图控制器中。然后在属性中传递该数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:44:31.457

是的。有几种不同的方法可以在视图控制器之间传递数据。您可以发布 NSNotification，您可以将值保存到 NSUserDefaults，您可以使用委托。这实际上取决于您计划从一个视图控制器传递到另一个视图控制器的数据量。在这种情况下，我可能会使用委托。

# testing - 测试平台解决方案

> ID：11752136
> 
> 赞同：0
> 
> 时间：2012-08-01T03:20:27.597
> 
> 标签：testing, automated-tests

我们正在为我们的 Web 应用程序寻找自动化测试软件。我们需要提出一个解决方案或软件，让我们的非 IT 人员和开发人员一样可以编写测试用例。

例如，我浏览过其中的一些，例如：SmartBear、National Instrument 和 IBM。这些人中的大多数都是基于 MS Windows 或商业 Linux 发行版，它们从我们的列表中删除，因为我们都是基于 Debian 的。

任何建议或指南将不胜感激。

附言。我们没有任何预算限制！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:56:42.113

如果您将自己限制在 Debian OS 上开发和运行测试，您将很难为非技术测试人员获取工具来构建测试用例。没有理由你不能有几个 Windows 系统来管理你的测试套件——不管它托管在什么堆栈上，它们都可以在你的网站上正常运行。这将使您了解您提到的工具（以及 Telerik 的 Test Studio，我帮助推广的工具）。

这些 Windows 系统可以通过您喜欢的任何虚拟化主机轻松运行，因此您甚至不需要物理系统来处理它。您也可以轻松地与您的开发人员共享相同的源代码控制存储库，因为几乎每个体面的 SCM 都有 Windows 客户端。

如果您不愿意考虑使用一些 Windows 设备进行测试，那么您需要让所有测试人员都精通 API 和 WebDriver 和 Robot Framework 等框架。Ruby 中 Jeff Morgan (@chzy) 的 Pages gem 将是另一种选择，Adam Goucher 的 Saunter（Python 中）也是如此。

# java - 找不到符号菜单项

> ID：11752137
> 
> 赞同：-2
> 
> 时间：2012-08-01T03:20:37.890
> 
> 标签：java

我正在编写一个代码，其中有一个 ArrayList 输入，并且从该 ArrayList 中我必须从中获取两个数字并减去它们。当我这样做时，我得到一个找不到符号错误。为什么我会收到此错误？

```
public static double[] profits( ArrayList<MenuItem> items )
{
 double[] lol = new double[items.size()];
 for ( MenuItem z : items )
  {
     for ( int i = 0; i < lol.length  ; i++ )
      {
        lol[i] = roundMoney(getPrice() - getCost());
      }
    return lol;
  }
} 
```

这是主要课程：

```
 ArrayList<MenuItem> items = new ArrayList<MenuItem>();
    items.add( new MenuItem( "Alliteration Armadillo", 20.25, 3.15, 1, true ) );
    items.add( new MenuItem( "Consonance Chameleon", 5.45, 0.75, 0, false ) );
    items.add( new MenuItem( "Assonance Bass", 1.95, 0.50, 1, false ) );

    double[] t = profits( items );

    for ( double d : t )
      System.out.print( printAmount( d ) + " " ); 
```

我的输出应该是一个双精度数组，应该输出 {17.10 4.70 1.45}

```
The error says:

TC1.java:17: cannot find symbol 

symbol  : method getPrice()

If this isn't enough information then here is the whole class:

public class MenuItem 
{ 
  private String myName; 

  private double myPrice, 
                 myCost; 

  private int    myCode; 

  private boolean myAvailability; 

  public MenuItem( String name, double price, double cost, int code, boolean available ) 
  { 
    myName = name; 
    myPrice = price; 
    myCost = cost; 
    myCode = code; 
    myAvailability = available; 
  } 

  public String getName() { return myName; } 
  public double getPrice() { return myPrice; } 
  public double getCost() { return myCost; } 
  public int getCode() { return myCode; } 
  public boolean available() { return myAvailability; } 

  // Create your method here 
  public String menuString() 
  { 
  return getName() + " ($" + getPrice() + ")"; 
  } 

  public static double roundMoney( double amount ) 
  { 
    return (int)(100 * amount + 0.5) / 100.0; 
  } 

  public static String printAmount( double d ) 
  { 
    String s = "" + d; 
    int k = s.indexOf( "." ); 
    if ( k < 0 ) 
      return s + ".00"; 
    if ( k + 1 == s.length() ) 
      return s + "00"; 
    if ( k + 2 == s.length() ) 
      return s + "0"; 
    else 
      return s; 
  } 
} 
```

F

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T03:22:16.810

在第一个代码片段中，将`getPrice()`and`getCost()`替换为`z.getPrice()`and `z.getCost()`。

现在，要获得您想要的输出，请将第一个片段修复为：

```
public static double[] profits(ArrayList<MenuItem> items)
{
    double[] lol = new double[items.size()];
    int i = 0;
    for (MenuItem z : items)
    {
        lol[i] = roundMoney(z.getPrice() - z.getCost());
        i++;
    }
    return lol;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T03:28:11.313

您忘记使用`z`类型的对象引用变量`MenuItem`来访问其方法`getPrice()`和`getCost()`

`z`与**点运算符**一起使用来调用该方法。

**例如：**

`z.getPrice()`和`z.getCost()`

# php - 安装 RVM 后无法加载 Sass / Compass，与 Symfony2 中的 Assetic 一起使用

> ID：11752142
> 
> 赞同：1
> 
> 时间：2012-08-01T03:21:22.473
> 
> 标签：php, ruby, symfony, rvm, assetic

我试图使用 Capifony，它需要 Capistrano，它需要 Ruby。但是我的 ruby​​ apt 版本很旧，并且会抛出语法错误。然后我安装了 RVM 并这样做了：

```
$ rvm use 1.9.3
$ rvm --rvmrc --create use 1.9.3@myapp
$ gem install sass [--pre]
$ gem install compass [--pre]
$ updatedb
$ locate sass | grep myapp | grep bin
$ locate compass | grep myapp | grep bin 
```

将这些路径复制并粘贴到 config.yml

```
 sass:
        bin: /usr/local/rvm/gems/ruby-1.9.3-p194@myapp/gems/sass-3.2.0.alpha.277/bin/sass
        #apply_to: "\.scss$"
    compass:
        bin: /usr/local/rvm/gems/ruby-1.9.3-p194@myapp/gems/compass-0.13.alpha.0/bin/compass
        apply_to: "\.scss$" 
```

在切换到 RVM 之前，关于 Compass 和 Sass 的一切都运行良好。Compass/Sass 似乎仍然可以在 app_dev.php 中工作，但是当我尝试转储资产进行生产时它们会中断：

```
$ rm -r app/cache/ # this is how I delete cache, any other way give me errors, even before having this compass problem. This have always worked fine. I removed the * because this code block was interpreting it as a comment
$ php app/console assetic:dump --env=prod --no-debug
Dumping all prod assets.
Debug mode is off.

00:05:36 [file+] /home/www/dev/public/myapp/app/../web/css/fcd6640.css

  [Assetic\Exception\FilterException]                                                                                                                  
  An error occurred while running:                                                                                                                     
  '/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby' '/usr/local/rvm/gems/ruby-1.9.3-p194@myapp/gems/compass-0.13.alpha.0/bin/compass' 'compile' '/t  
  mp' '--config' '/tmp/assetic_compassF1Mv7t' '--sass-dir' '' '--css-dir' '' '/tmp/assetic_compassKDoaEA.scss'                                         

  Error Output:                                                                                                                                        
  /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- sass (LoadError  
  )                                                                                                                                                    
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'                                      
    from /usr/local/rvm/gems/ruby-1.9.3-p194@myapp/gems/compass-0.13.alpha.0/lib/compass/dependencies.rb:6:in `rescue in <top (required)>'           
    from /usr/local/rvm/gems/ruby-1.9.3-p194@myapp/gems/compass-0.13.alpha.0/lib/compass/dependencies.rb:1:in `<top (required)>'                     
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'                                      
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'                                      
    from /usr/local/rvm/gems/ruby-1.9.3-p194@myapp/gems/compass-0.13.alpha.0/lib/compass.rb:5:in `block in <top (required)>'                         
    from /usr/local/rvm/gems/ruby-1.9.3-p194@myapp/gems/compass-0.13.alpha.0/lib/compass.rb:4:in `each'                                              
    from /usr/local/rvm/gems/ruby-1.9.3-p194@myapp/gems/compass-0.13.alpha.0/lib/compass.rb:4:in `<top (required)>'                                  
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'                                      
    from /usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'                                      
    from /usr/local/rvm/gems/ruby-1.9.3-p194@myapp/gems/compass-0.13.alpha.0/bin/compass:20:in `block in <main>'                                     
    from /usr/local/rvm/gems/ruby-1.9.3-p194@myapp/gems/compass-0.13.alpha.0/bin/compass:8:in `fallback_load_path'                                   
    from /usr/local/rvm/gems/ruby-1.9.3-p194@myapp/gems/compass-0.13.alpha.0/bin/compass:19:in `<main>'                                              

  Output:                                                                                                                                              
  Unable to load Sass. Please install it with one of the following commands:                                                                           
    gem install sass --pre                                                                                                                             

  Input:                                                                                                                                               
  $main-color: red;                                                                                                                                    

  body {                                                                                                                                               
    color: $main-color;                                                                                                                                 
  } 
```

我得到的另一个错误：

```
Error Output:                                                                                                                                        
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/dependency.rb:247:in `to_specs': Could not find compass (>= 0) amongst [big decimal-1.1.0, io-console-0.3, json-1.5.4, minitest-2.5.1, rake-0.9.2.2, rdoc-3.9.4] (Gem::LoadError) 
```

相关：@mpapis @jamz [Sass 在安装 RVM 后损坏，使用 Assetic PHP](https://stackoverflow.com/questions/8979956/sass-broken-after-install-with-rvm-using-assetic-php)

我想添加更多标签：指南针和 sass。不知道是否可以用更高的分数来完成。

**更新**

我添加了一个这样的包装器：

```
$ rvm wrapper ruby-1.9.3-p194@myapp php sass compass 
```

并再次编辑 config.yml ，但现在我随机交替出现这些错误：

错误一：

```
[Assetic\Exception\FilterException]                                                                                                                  
  An error occurred while running: '/usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby' '/usr/local/rvm/bin/php_compass' 'compile' '/tmp' '--config' '/tmp/assetic_compass0Tmn8t' '--sass- dir' '' '--css-dir' '' '/tmp/assetic_compasssw2S3k.scss'                                                                                             

  Error Output: /usr/local/rvm/rubies/ruby-1.9.3-p194/bin/ruby: no Ruby script found in input (LoadError)                                              
Input:                                                                                                                                               
  $main-color: red;                                                                                                                                    

  body     {                                                                                                                                               
    color: $main-color;                                                                                                                                 
  } 
```

错误2：

```
Error Output: /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler/shared_helpers.rb:22:in `default_gemfile': Could not locate Gemfile (Bundler::GemfileNotFound)                                                                                                                                
from /usr/local/rvm/gems/ruby-1.9.3-p194@global/gems/bundler-1.1.5/lib/bundler.rb:213:in `default_gemfile' 
```

指南针仍然可以通过 app_dev.php 正常工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:23:07.730

我想你需要一个包装器：

```
rvm wrapper ruby-1.9.3-p194@myapp php sass compass 
```

这将生成将调用适当的 ruby​​(rvm) 环境的包装器，像这样使用它们：

```
sass:
    bin: /usr/local/rvm/bin/php_sass
    #apply_to: "\.scss$"
compass:
    bin: /usr/local/rvm/bin/php_compass
    apply_to: "\.scss$" 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-08-01T08:01:44.490

**解决方案**

只需使用[lessphp](http://leafo.net/lessphp/)。它可以用 Composer 安装，然后在 config.yml 中：

```
 lessphp:
         php: %kernel.root_dir%/../vendor/leafo/lessphp/lessc.inc.php
         apply_to: "\.less" 
```

# javascript - 从数组中删除几个单词 - Javascript

> ID：11752143
> 
> 赞同：0
> 
> 时间：2012-08-01T03:21:26.263
> 
> 标签：javascript, arrays, frequency

我有一系列需要按频率排序的单词。在我这样做之前，我需要删除诸如“the”、“it”等词（实际上是任何少于三个字母的词），以及所有数字和任何以 # 开头的词（词数组是从Twitter，虽然下面的例子只是维基百科的一个随机段落）。

我可以删除一个词，但一直在疯狂尝试删除多个词或一个范围。有什么建议么？谢谢！

[http://jsfiddle.net/9NzAC/6/](http://jsfiddle.net/9NzAC/6/)

HTML：

```
<div id="text" style="background-color:Teal;position:absolute;left:100px;top:10px;height:500px;width:500px;">
Phrenology is a pseudoscience primarily focused on measurements of the human skull, based on the concept that the brain is the organ of the mind, and that certain brain areas have localized, specific functions or modules. The distinguishing feature of phrenology is the idea that the sizes of brain areas were meaningful and could be inferred by examining the skull of an individual.
</div> 
```

JS：

```
//this is the function to remove words
<script type="text/javascript">
    function removeA(arr){
        var what, a= arguments, L= a.length, ax;
        while(L> 1 && arr.length){
            what= a[--L];
            while((ax= arr.indexOf(what))!= -1){
                arr.splice(ax, 1);
            }
        }
            return arr;
        }
</script>

//and this does the sorting & counting
<script type="text/javascript">
    var getMostFrequentWords = function(words) {
        var freq={}, freqArr=[], i;

        // Map each word to its frequency in "freq".
            for (i=0; i<words.length; i++) {
            freq[words[i]] = (freq[words[i]]||0) + 1;
        }

        // Sort from most to least frequent.
            for (i in freq) freqArr.push([i, freq[i]]);
            return freqArr.sort(function(a,b) { return b[1] - a[1]; });
        };

        var words = $('#text').get(0).innerText.split(/\s+/);

        //Remove articles & words we don't care about.
        var badWords = "the";
            removeA(words,badWords);
        var mostUsed = getMostFrequentWords(words);
        alert(words);

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T03:39:20.340

它不是从原始数组中删除，而是删除`push`一个新数组，它更简单，它会使您的代码更短且更具可读性。

```
var words = ['the', 'it', '12', '#twit', 'aloha', 'hello', 'bye']
var filteredWords = []

for (var i = 0, l = words.length, w; i < l; i++) {
    w = words[i]
    if (!/^(#|\d+)/.test(w) && w.length > 3)
        filteredWords.push(w)
}

console.log(filteredWords) // ['aloha', 'hello'] 
```

**演示：http:** [//jsfiddle.net/VcfvU/](http://jsfiddle.net/VcfvU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T03:32:22.223

我建议你做`array[i] = null`（或`""`）然后清理你的数组空节点。你可以很容易地使用`Array#filter`

测试： http: [//jsfiddle.net/6LPep/](http://jsfiddle.net/6LPep/) 代码：

```
var FORGETABLE_WORDS = ',the,of,an,and,that,which,is,was,';

var words = text.innerText.split(" ");

for(var i = 0, word; word = words[i++]; ) {
    if (FORGETABLE_WORDS.indexOf(',' + word + ',') > -1 || word.length < 3) {
      words[i-1] = "";
    }
}

// falsy will get deleted
words.filter(function(e){return e});
// as example
output.innerHTML = words.join(" ");

// just continue doing your stuff with "words" array.
// ...​ 
```

我认为它比你目前的做法更干净。如果您需要其他任何内容，我将更新此答案。

# django - Django中文件上传的异步处理

> ID：11752148
> 
> 赞同：8
> 
> 时间：2012-08-01T03:22:14.147
> 
> 标签：django, upload

当您使用 Django 上传文件时，在文件上传完成之前不会返回响应。如果上传的文件很大，需要很长时间，在此期间用户只能等待。有没有办法实现文件上传的异步处理？那么，当后端上传文件时，用户可以在不中断上传的情况下对当前页面进行一些其他操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-10-26T06:46:34.907

我知道自从提出这个问题以来已经超过 5 年了，但我有类似的问题，并且在 SO 上没有“简单的答案”。

对于您的问题，我可能会建议使用[进度条](https://github.com/ouhouhsami/django-progressbarupload)（如果使用 Django 表单）。在 Django 中[可能无法](https://stackoverflow.com/a/16218111/3623609)异步上传文件。

在我的情况下，浏览器元素并不重要，我正在考虑将文件上传从浏览器上传移动到某种 FTP / AWS S3 文件存储并处理此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-27T02:00:34.487

似乎[https://github.com/jeanphix/django-resumable](https://github.com/jeanphix/django-resumable)就是为此而设计的（虽然从未尝试过）。还有一个管理站点的版本 - [https://github.com/jonatron/django-admin-resumable-js](https://github.com/jonatron/django-admin-resumable-js)

UPD：django-resumable 现在已被放弃，所以我最终创建了自己的分支，支持 S3 和内联管理视图。你可以在这里尝试，非常欢迎反馈 – [https://github.com/DataGreed/django-admin-async-upload](https://github.com/DataGreed/django-admin-async-upload)

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-08-01T03:59:12.863

您需要任务管理。芹菜是你所追求的。

# ruby-on-rails - 如果模型位于深层命名空间中，set_table_name 不起作用 - rails 2.3.14 中的错误？

> ID：11752151
> 
> 赞同：2
> 
> 时间：2012-08-01T03:22:16.157
> 
> 标签：ruby-on-rails, ruby, activerecord

我正在使用 Rails 2.3.14

**更新 3**我在更新 2 中发现的技巧仅适用于关联的第一次访问......所以，我将 set_table_name 行粘贴在我的应用程序控制器中。这太奇怪了。我希望这得到修复。=\

**更新 2**如果我手动 / 讨厌 / hackily 为环境文件底部的麻烦类设置表格，我将停止收到错误。

应用程序/配置/环境.rb：

```
Page::Template::Content.set_table_name "template_page_contents"
Page::Template::Section.set_table_name "template_page_sections" 
```

为什么我必须这样做？对于这个特定的用例，rails 是否损坏？

**更新**：在我的 Page::Template::Content 类中最初调用 set_table_name 时，它​​似乎不起作用。

但如果我在使用关联之前调用它，它会起作用......

```
ap Page::Template::Content.table_name # prints "contents"
Page::Template::Content.set_table_name "template_page_contents"
ap Page::Template::Content.table_name # prints "template_page_contents"

return self.page_template_contents.first # doesn't error after the above is exec'd 
```

**原始问题**：

**TL; DR：我尝试访问一个 has_many 关系，但 Rails 认为 has_many 关系使用的表是不同的表**

我一直收到此错误，当我尝试通过关系访问`Page::Template::Content`that belongs_to a时。`Page::Template``has_many`

```
Mysql2::Error: Unknown column 'contents.template_page_id' in 'where clause': SELECT * FROM `contents` WHERE (`contents`.template_page_id = 17)  LIMIT 1 
```

查看错误日志，我想我需要开始使用一些打印语句来找出为什么 rails 试图在错误的表中找到关联的对象。

```
gems_path/activerecord-2.3.14/lib/active_record/associations/association_collection.rb:63:in `find' 
```

我只是决定打印该`@reflection`对象，因为一切似乎都在发生。我是这样做的：

```
 require "awesome_print" # best console printer (colors, pretty print, etc)
  def find(*args) # preexisting method header
     ap "-------" # separator so I know when one reflection begins / ends, etc
     ap @reflection # object in question
     ... # rest of the method 
```

在错误之前打印的最后一个“@reflection”：

```
"-------"
#<ActiveRecord::Reflection::AssociationReflection:0x108d028a8
    @collection = true,
    attr_reader :active_record = class Page::Template < LibraryItem {...},
    attr_reader :class_name = "Page::Template::Content",
    attr_reader :klass = class Content < LibraryItem {...},
    attr_reader :macro = :has_many,
    attr_reader :name = :page_template_contents,
    attr_reader :options = {
        :foreign_key => "template_page_id",
         :class_name => "Page::Template::Content",
             :extend => []
    },
    attr_reader :primary_key_name = "template_page_id",
    attr_reader :quoted_table_name = "`contents`"
> 
```

上面的代码块有几处错误。

```
:klass should be Page::Template::Content
:name should be :contents  
:quoted_table_name should be `contents` 
```

我的模型是如何设置的：

应用程序/模型/page.rb：

```
class Page < LibrayItem
  belongs_to :template_page, :class_name => "Page::Template" 
```

应用程序/模型/页面/模板.rb

```
class Page::Template < Library Item
  set_table_name "template_pages"
  has_many :page_template_contents,
    :class_name => "Page::Template::Content",
    :foreign_key => "template_page_id" 
```

应用程序/模型/页面/模板/内容.rb

```
class Page::Template::Content
  set_table_name "template_page_contents"
  belongs_to :template_page,
    :class_name => "Page::Template",
    :foreign_key => "template_page_id"

class Page::Template
...
    return self.page_template_contents.first 
```

关联选择的类（与我上面的页面/模板结构无关）：

```
class Content < LibraryItem
  set_table_name "contents"
# no associations to above classes 
```

那么...是什么原因造成的，我该如何解决？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-08T04:17:16.467

您的问题不是由于**set_table_name**而是由于 Rails 如何在关联中找到目标模型类以及您有一个顶级模型（**Content**）与嵌套在更深的命名空间（**Page: :模板::内容**)。奇怪的行为差异很可能是由于在检查关联时实际加载的类的差异（请记住，默认情况下，在开发模式下，Rails 在首次引用模型类时会按需加载模型类）。

当你定义一个关联时（无论是像你做的那样明确指定关联的目标模型的类名还是接受默认值），Rails 必须将目标模型类的名称转换为 Ruby 常量，以便它可以引用到那个目标类。为此，它在定义关联的模型类上调用受保护的类方法**compute_type 。**

例如，您有

```
class Page::Template < LibraryItem
  set_table_name "template_pages"
  has_many :page_template_contents,
    :class_name => "Page::Template::Content",
    :foreign_key => "template_page_id"
 end 
```

您可以在 Rails 控制台中测试**compute_type**对此类的工作方式：

```
$ ./script/console 
Loading development environment (Rails 2.3.14)
> Page::Template.send(:compute_type, "Page::Template::Content")
=> Page::Template::Content(id: integer, template_page_id: integer) 
```

正如我所料，我看到结果是对**Page::Template::Content**类的引用。

但是，如果我重新启动 Rails 控制台但这次导致模型类**Content**首先被加载（通过引用它）然后再试一次，我会看到这个（我没有费心为**Content**模型创建表，但这并没有'不改变重要的行为）：

```
$ ./script/console 
Loading development environment (Rails 2.3.14)
>> Content # Reference Content class so that it gets loaded
=> Content(Table doesn't exist)
>> Page::Template.send(:compute_type, "Page::Template::Content")
=> Content(Table doesn't exist) 
```

如您所见，这次我获得了对**Content**的引用。

那么你能做些什么呢？

嗯，首先，你应该意识到在 Rails 中使用命名空间模型类（当然是在 2.3 中）是一个真正的痛苦。在层次结构中组织模型类很好，但它确实让生活变得更加困难。正如您在上面看到的，如果您在一个命名空间中有一个与另一个命名空间中的类同名的类，这会变得更加麻烦。

如果您仍然想忍受这种情况，我可以提出一些建议。以下其中一项可能会有所帮助：

1.  在开发模式下打开类缓存。这将导致所有模型类被预加载，而不是像默认值那样按需加载。这将使您的代码更可预测，但可能会使开发有些不愉快（因为类将不再随每个请求重新加载）。

2.  明确性要求在具有问题关联的类中存在依赖类。例如：

    ```
    class Page::Template < LibraryItem        
      require 'page/template/content'
      set_table_name "template_pages"
      has_many :page_template_contents, ...
    end 
    ```

3.  在您知道引用关联类可能出错的类中覆盖**compute_type方法，以便无论如何它都会返回命名空间类。**在不更详细地了解您的班级层次结构的情况下，我无法就如何执行此操作给出完整的建议，但下面是一个快速而肮脏的示例：

    ```
    class Page::Template < LibraryItem
      set_table_name "template_pages"
      has_many :page_template_contents,
        :class_name => "Page::Template::Content",
        :foreign_key => "template_page_id"

      def self.compute_type(type_name)
        return Page::Template::Content if type_name == "Page::Template::Content"
        super
      end
    end 
    ```

# wordpress - 替换自定义帖子类型的视觉/文本编辑器

> ID：11752153
> 
> 赞同：1
> 
> 时间：2012-08-01T03:22:48.010
> 
> 标签：wordpress, editor

我想创建一个自定义帖子类型，其中帖子在前端和 WP Dashboard 编辑器中被格式化为编号列表。

因此，在仪表板中，而不是用于添加/编辑帖子的标准 WP GUI/文本编辑器框，我想要一系列用于 1、2、3 等的文本框，将帖子构建为前端的有序列表。

像标题：

* * *

1.

* * *

2.

* * *

3.

* * *

这可能吗？

要删除我使用的标准编辑器：'supports' => array('title','custom-fields','revisions',)，在创建自定义帖子类型时，如果我包含：'supports' => array( 'title','custom-fields','revisions','listTypeItems'），有没有办法设置自定义字段 listTypeItems 如果没有，还有其他方法可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:29:30.010

您应该下载高级自定义字段插件。

[http://wordpress.org/extend/plugins/advanced-custom-fields/](http://wordpress.org/extend/plugins/advanced-custom-fields/)

我知道他们有一个“Repeater Field”选项，您必须以 10.00 美元的价格购买，这将允许您继续添加文本框（即 1、2、3、4、5...等）

如果你知道你只需要三个，那么这个插件将允许你在管理面板上创建一个自定义界面，你可以在其中设计输入框等。

然后，您可以创建自定义帖子模板，并插入适当的 PHP 标签以在页面上显示您的数据。

这是插件的文档。我用过，很好用！ [http://www.advancedcustomfields.com/docs/getting-started/](http://www.advancedcustomfields.com/docs/getting-started/)

# git - 如果我合并子模块，Git 标签会被删除吗？

> ID：11752154
> 
> 赞同：0
> 
> 时间：2012-08-01T03:22:54.473
> 
> 标签：git, git-submodules

我有一个子模块，我打算将它合并到我的主仓库中，但我有几个要保留的标签。如果我将子模块合并到我的 repo 中，引用子模块的标签会被弄乱吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T03:31:41.527

标签不引用您的子模块。他们引用了一个提交，其中包含一个`.gitmodules`包含有关您的子模块信息的文件。您的标签不会受到影响。要在将子模块合并到主仓库后使用标签，您可以编辑配置，以便子模块的 url 是仓库本身的路径。现在检查一个标签并做一个`submodule update`（不要这样做，`--init`否则它会破坏刚刚调整的配置）将使标签可用。

# c++ - 与 recursive_mutex 一起使用时 condition_variable_any 的行为？

> ID：11752155
> 
> 赞同：4
> 
> 时间：2012-08-01T03:23:14.133
> 
> 标签：c++, multithreading, c++11, boost, recursive-mutex

`condition_variable_any`与 a 一起使用时`recursive_mutex`，在等待时*通常*`recursive_mutex`可以从其他线程获取吗？我对 Boost 和 C++11 的实现都感兴趣。*`condition_variable_any::wait`*

 *这是我主要关心的用例：

```
void bar();

boost::recursive_mutex mutex;
boost::condition_variable_any condvar;

void foo()
{
    boost::lock_guard<boost::recursive_mutex> lock(mutex);
    // Ownership level is now one

    bar();
}

void bar()
{
    boost::unique_lock<boost::recursive_mutex> lock(mutex);
    // Ownership level is now two

    condvar.wait(lock);
   // Does this fully release the recursive mutex,
   // so that other threads may acquire it while we're waiting?
   // Will the recursive_mutex ownership level
   // be restored to two after waiting?
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T04:19:39.513

通过对 Boost 文档的严格解释，我得出的结论是，在等待通知时*通常不会*`condition_variable_any::wait`导致其他线程可以获取。*`recursive_mutex`*

 *> **班级`condition_variable_any`**
> 
> **`template<typename lock_type> void wait(lock_type& lock)`**
> 
> 效果：
> 
> 原子地调用`lock.unlock()`和阻塞当前线程。当调用`this->notify_one()`or `this->notify_all()`或虚假通知时，线程将解除阻塞。当线程被解除阻塞时（无论出于何种原因），在`lock.lock()` 等待调用返回之前调用会重新获取锁。`lock.lock()`如果函数因异常退出，也会通过调用来重新获取锁。

所以`condvar.wait(lock)`会调用`lock.unlock`，然后调用`mutex.unlock`，这会将所有权级别降低一（*不一定*降至零）。

* * *

我编写了一个测试程序来证实我的上述结论（对于 Boost 和 C++11）：

```
#include <iostream>

#define USE_BOOST 1

#if USE_BOOST

#include <boost/chrono.hpp>
#include <boost/thread.hpp>
#include <boost/thread/condition_variable.hpp>
#include <boost/thread/locks.hpp>
#include <boost/thread/recursive_mutex.hpp>
namespace lib = boost;

#else

#include <chrono>
#include <thread>
#include <condition_variable>
#include <mutex>
namespace lib = std;

#endif

void bar();

lib::recursive_mutex mutex;
lib::condition_variable_any condvar;
int value = 0;

void foo()
{
    std::cout << "foo()\n";
    lib::lock_guard<lib::recursive_mutex> lock(mutex);
    // Ownership level is now one

    bar();
}

void bar()
{
    std::cout << "bar()\n";
    lib::unique_lock<lib::recursive_mutex> lock(mutex);
    // Ownership level is now two

    condvar.wait(lock); // Does this fully release the recursive mutex?

    std::cout << "value = " << value << "\n";
}

void notifier()
{
    std::cout << "notifier()\n";
    lib::this_thread::sleep_for(lib::chrono::seconds(3));
    std::cout << "after sleep\n";

    // --- Program deadlocks here ---
    lib::lock_guard<lib::recursive_mutex> lock(mutex);

    value = 42;
    std::cout << "before notify_one\n";
    condvar.notify_one();
}

int main()
{
    lib::thread t1(&foo); // This results in deadlock
    // lib::thread t1(&bar); // This doesn't result in deadlock
    lib::thread t2(&notifier);
    t1.join();
    t2.join();
} 
```

* * *

我希望这可以帮助其他在混合`condition_variable_any`和`recursive_mutex`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T01:37:21.603

`allowed_unlock_count`您可以通过向对对象进行操作的每个函数添加参数来修复此设计`mutex`；有两种类型的保证可以`allowed_unlock_count`：

**(permit-unlock-depth)** `allowed_unlock_count`表示允许解锁的深度`mutex`：调用者允许`bar`解锁互斥锁的`allowed_unlock_count`次数。此类解锁后，不保证`mutex`.

**(promise-unlock)** `allowed_unlock_count`表示锁定的深度`mutex`：调用者保证解锁的`mutex`准确`allowed_unlock_count`时间将允许其他线程抓取`mutex`对象。

这些保证是功能的*前置条件和后置条件*。

这`bar`取决于**(promise-unlock)**：

```
// pre: mutex locking depth is allowed_unlock_count
void bar(int allowed_unlock_count)
{
    // mutex locking depth is allowed_unlock_count
    boost::unique_lock<boost::recursive_mutex> lock(mutex);
    // mutex locking depth is allowed_unlock_count+1

    // you might want to turn theses loops
    // into an a special lock object!
    for (int i=0; i<allowed_unlock_count; ++i)
        mutex.unlock();
    // mutex locking depth is 1

    condvar.wait(lock); // other threads can grab mutex

    // mutex locking depth is 1
    for (int i=0; i<allowed_unlock_count; ++i)
        mutex.lock();
    // mutex locking depth is allowed_unlock_count+1
}
// post: mutex locking depth is allowed_unlock_count 
```

被调用函数必须*明确*允许调用者减少锁定深度。**

# java - 提交按钮后，用 TextView 替换 RatingBar？

> ID：11752157
> 
> 赞同：0
> 
> 时间：2012-08-01T03:23:28.870
> 
> 标签：java, android

我有一个评分栏，允许用户投票。我希望他们选择栏上的星级总数，点击按钮提交，提交后，评级栏被替换为 TextView，上面写着“谢谢你的投票！”

我怎样才能在 Java 代码中做到这一点？

此外，对于奖励积分，是否有一种快速的方法来实现这一转变。也许文本视图淡入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:49:49.893

您可以使用`setVisibility`可见/不可见的布局或在您的情况`RatingBar`下`TextView`

在您的 XML 文件中添加`RatingBar`一个`TextView`. 最初设置 textview 可见性`GONE`。

按提交按钮添加此代码：

```
textViewobject.setVisibility(View.VISIBLE);
ratingBarobject.setVisibility(View.GONE); 
```

# antlr3 - 如何将 ANTLR 生成的 AST 翻译成它的源代码

> ID：11752166
> 
> 赞同：4
> 
> 时间：2012-08-01T03:26:12.313
> 
> 标签：antlr3

我正在为 PL/SQL 编写一个简单的解析器和重写器工具，我已经完成了解析器并获得了 AST，但现在我遇到了两个问题：

1.  如何获取 AST 的某些节点，从而改变它们的值？
2.  更改节点后，如何从更新的 AST 重新生成 SQL ANTLR AST 是否提供类似的接口来执行此操作？

示例 SQL：`select a,b from t where a=2`

解析sql并获取ast后，我想将sql更改为

```
select fun(a),b from t where a = fun1(2); 
```

顺便说一句，我用 ANTLR 为 C 生成 AST，

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T04:01:46.043

[请参阅我关于如何从 AST 重新生成源代码的](https://stackoverflow.com/a/5834775/120163)SO 答案。

它的工作比你想象的要多得多。

ANTLR 以字符串模板的形式提供了一些帮助，但您可能会发现这些好坏参半：虽然它们可以生成代码文本，但它们会准确生成模板中的内容，您可能希望根据其原始布局重新生成代码，字符串模板的布局要覆盖的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T20:17:06.533

以下代码将遍历 AST 并将所有 AST 节点打印到 stderr。同样的树遍历器是可以替换树节点的树转换器的基础。

分配新的树节点： (pANTLR3_BASE_TREE)(psr->adaptor->nilNode(psr->adaptor));

删除 AST 节点： parentASTnode->deleteChild(parentASTnode, nodeIndex); [deleteChild 不会释放已删除的节点]

将节点替换为： parentASTnode->replaceChildren(parentASTnode, nStartChildIndex, nStopChildIndex, newASTnode); [您不能在 AST 树层的中间插入节点，您只能替换节点或添加到父节点子列表的末尾]

```
void  printTree(pANTLR3_BASE_TREE t, int indent) 
{
    pANTLR3_BASE_TREE child = NULL;
    int     children = 0;
    char *  tokenText = NULL;
    string  ind = "";
    int     i = 0;

    if ( t != NULL ) 
      {
        children = t->getChildCount(t);
        for ( i = 0; i < indent; i++ )
          ind += "   ";

        for ( i = 0; i < children; i++ )
          {
            child = (pANTLR3_BASE_TREE)(t->getChild(t, i));
            tokenText = (char *)child->toString(child)->chars;
            fprintf(stderr, "%s%s\n", ind.c_str(), tokenText);
            if (tokenText == "<EOF>")
              break;
            printTree(child, indent+1);
          }
      }
}

// Run the parser
pANTLR3_BASE_TREE langAST = (psr->start_rule(psr)).tree; 

// Print the AST
printTree(langAST, 0);

// Get the Parser Errors
int nErrors = psr->pParser->rec->state->errorCount; 
```

# javascript - 类似于facebook的AJAX后退按钮解决方案

> ID：11752173
> 
> 赞同：1
> 
> 时间：2012-08-01T03:26:36.433
> 
> 标签：javascript, jquery, ajax, back-button, back-button-control

我是 ajax、jquery 和 javascript 的新手。当我学习 ajax 和 jquery 时，我也学习了后退按钮问题，当然我也学习了。但是这个解决方案使用 # 锚点。但我想将 url 更改为实际页面，就像 facebook 一样。如果您使用 facebook，您可能已经注意到，当您单击图像时，url 会更改为图像的 url，但页面不会导航。

如果有人知道类似 facebook 的解决方案，请回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-09T12:25:30.637

我知道你不想听到这个，而且我也是 AJAX 的新手，我现在也在研究这个，但我可以给你建议先使用哈希。为什么？

因为任何浏览器都接受哈希值。如果我是你，我现在会制定一个可以使用或不使用 ajax 的解决方案（因此，如果 ajax 不可用，则有一个“正常”导航，因为网络爬虫不理解 javascript）。

如果您已经成功制定了解决方案，那么您可以添加一些函数来使用 javascript [pushState()](https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history)（或 replaceState()）方法来操作 url。不要低估这一点，并在开始时使用哈希。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-01T03:41:07.720

您正在寻找哈希导航，也称为片段导航。谷歌对此有一篇非常好的[文章](https://developers.google.com/tv/web/articles/location-hash-navigation)。

这是他们的演示：http: [//gtv-resources.googlecode.com/svn/trunk/examples/location-hash-html.html](http://gtv-resources.googlecode.com/svn/trunk/examples/location-hash-html.html)

# python - 如何让 tkinter 使用 Ubuntu 的默认 Python 2.7 安装？

> ID：11752174
> 
> 赞同：4
> 
> 时间：2012-08-01T03:26:42.500
> 
> 标签：python, ubuntu, tkinter

我使用的是预装了 Python 2.7.3 的 Ubuntu 11.10。

我通过 apt-get install 安装了 python3 包和 python3-tk 包，它们一起“开箱即用”。

但是虽然我已经安装了 python-tk 包，但我不知道如何让 Python2.7 看到它。当我尝试导入它时，我收到下面的错误消息。

```
import Tkinter
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/lib/python2.7/lib-tk/Tkinter.py", line 39, in <module>
    import _tkinter # If this fails your Python may not be configured for Tk
ImportError: No module named _tkinter 
```

编辑：我还基于[Python 2.7.3 中未识别的 Python-tk 包](https://stackoverflow.com/questions/11043844/python-tk-package-not-recognized-in-python-2-7-3)运行以下内容，并得到：

```
$ file /usr/lib/libtk8.5.so.0
/usr/lib/libtk8.5.so.0: ELF 32-bit LSB shared object, Intel 80386, version 1 (SYSV), dynamically linked, stripped

$ uname -a
Linux bugbot 3.0.0-23-generic-pae #39-Ubuntu SMP Thu Jul 19 19:39:19 UTC 2012 i686 i686 i386 GNU/Linux 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-03T16:14:17.937

在这个问题上花费了太多时间之后，我想通了，所以希望我可以为其他人省去麻烦。

我发现这个旧的错误报告被认为是无效的，它提到了我遇到的确切问题，我有 Tkinter.py，但它找不到模块 _tkinter：[http ://bugs.python.org/issue8555](http://bugs.python.org/issue8555)

我使用 apt-get 安装了 tk-dev 包，并在 Python2.7.3 目录中使用 ./configure、make 和 make install 重建了 Python。现在我的 Python2.7 可以导入 Tkinter，耶！

我有点恼火的是，Python 安装文档中根本没有提到 tk-dev 包……下面是关于 Python 中缺少模块的另一个有用资源，如果像我一样，有人应该发现他们缺少的不仅仅是_tkinter。

[在缺少的模块上构建 Python 等](https://stackoverflow.com/questions/6171210/building-python-and-more-on-missing-modules)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-22T19:59:57.913

我对 python3.4 有同样的问题（ImportError: No module named '_tkinter'）

```
sudo apt-get install tk-dev 
```

到python源目录

```
./configure
make
sudo make install 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-21T22:30:03.427

以下解决了我在 Linux Mint 16 上的问题：

```
sudo apt-get install tk-dev python-tk 
```

我使用virtualenv但不想编译python，为了使python支持tk，应该安装python-tk。

# android - 从活动返回大量数据的“Android”方式是什么

> ID：11752184
> 
> 赞同：1
> 
> 时间：2012-08-01T03:28:29.987
> 
> 标签：android

我有一个库，它公开了一个`Activity`要被调用的库`startActivityForResult()`，但结果将是数千行数据。远远超出我对活动响应的满意程度。公开这些数据的适当方法是什么？

这`Activity`也可能用于我不知道/不信任的其他应用程序，因此我不能依赖它们进行任何清理操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:45:21.957

Consider placing your data into a ContentProvider before returning. And then in your response pass back a URI that identifies where the data is in the ContentProvider.

The caller can then remove the data from the ContentProvider when they are finished using it (if appropriate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:02:43.130

如果 Activity 没有 UI，则使用 ContentResolver 而不是 Activity。或者你可以在数据上返回一个光标。数千行来自哪里？如果来自 SQL lite 中的数据库查询，那么我会说游标是最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:14:31.990

将数据存储在 SQLite 数据库中。您永远不应该在内存中存储“数千行数据”......始终将持久数据存储在磁盘上。

# ruby-on-rails - How to make update_attributes fail for mass assignment warning

> ID：11752186
> 
> 赞同：2
> 
> 时间：2012-08-01T03:28:42.687
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1

I constructed an object based on parameters and passed it into the update_attributes method, within my controller's update method. The object had one attribute (xyz) that was not listed as part of attr_accessible list in the model. Rails skipped updating the attribute in question and generated a warning that mass-assignment of attribute xyz failed.

I would like to make sure that update_attributes fails if this kind of situation occurs instead of just getting a warning. Is there a config setting or an option that can be passed in to the update_attributes call to make this happen?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-03T22:09:52.353

You can change the config to use a sanitizer that will raise an exception:

```
config.active_record.mass_assignment_sanitizer = :strict 
```

Edit: This is available since 3.2\. Your question is tagged with rails 3.1, so it won't work. You can upgrade to 3.2, or take a look at this [SO question](https://stackoverflow.com/questions/5558584/throw-an-exception-whenever-someone-tries-to-mass-assign-protected-attributes) on how to patch the sanitizer.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-03T21:58:42.330

Set your own mass_assignment_sanitizer using [mass_assignment_sanitizer=](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html) and you probably want to look at active_model/mass_assignment_security/sanitizer.rb for examples and active_model/mass_assignment_security.rb for how to set up your own Sanitizer that will fail.

# php - 表只插入一行。有一个自动增量 ID

> ID：11752189
> 
> 赞同：-1
> 
> 时间：2012-08-01T03:29:07.340
> 
> 标签：php, mysql

这是我的注册码。

一旦我在表单中输入字段，它就会显示我注册成功，但会在我的数据库表中添加空白数据。它在我的 mobileno 列中添加了数字 0。

请尽快帮助我

```
include ('database_connection.php');

if (isset($_POST['formsubmitted'])) {

$error = array();//Declare An Array to store any error message  

if (empty($_POST['mobileno'])) {//if no name has been supplied 
    $error[] = 'Please Enter a Mobile Number ';//add to array "error"
} else {
    $name = $_POST['mobileno'];//else assign it a variable
}
if (empty($_POST['fname'])) {//if no name has been supplied 
    $error[] = 'Please Enter a First name ';//add to array "error"
} else {
    $name = $_POST['fname'];//else assign it a variable
}
if (empty($_POST['lname'])) {//if no name has been supplied 
    $error[] = 'Please Enter a Last name ';//add to array "error"
} else {
    $name = $_POST['lname'];//else assign it a variable
}
if (empty($_POST['email'])) {
    $error[] = 'Please Enter your Email ';
} else {

    if (preg_match("/^([a-zA-Z0-9])+([a-zA-Z0-9\._-])*@([a-zA-Z0-9_-])+([a-zA-    Z0-9\._-]+)+$/", $_POST['email'])) {
       //regular expression for email validation
        $Email = $_POST['email'];
    } else {
         $error[] = 'Your EMail Address is invalid  ';
    }

}

if (empty($_POST['passwd1'])) {
    $error[] = 'Please Enter Your Password ';
} else {
    $Password = $_POST['passwd1'];
}
if (empty($_POST['passwd2'])) {
    $error[] = 'Please Verify Your Password ';
} else {
    $Password = $_POST['passwd2'];
}

if (empty($error)) //send to Database if there's no error '

{ //If everything's OK...

    // Make sure the mobile no is available:
    $query_verify_mobileno = "SELECT * FROM userdtls WHERE mobileno = '$mobileno'";
    $result_verify_mobileno = mysqli_query($dbc, $query_verify_mobileno);
    if (!$result_verify_mobileno) 
    {//if the Query Failed ,similar to if($result_verify_mobileno==false)
        echo ' Database Error Occured ';
    }

    if (mysqli_num_rows($result_verify_mobileno) == 0) { // IF no previous user is using this number .

        // Create a unique  activation code:
       $activation = md5(uniqid(rand(), true));

        $query_insert_user = "INSERT INTO userdtls (`mobileno`, `pass`, `fname`, `lname`, `email`, `activation`) VALUES ( '$mobileno', '$passwd1', '$fname', '$lname', '$email', '$activation')";

        $result_insert_user = mysqli_query($dbc, $query_insert_user);
        if (!$result_insert_user) {
            echo 'Query Failed ';
        }

        if (mysqli_affected_rows($dbc) == 1) { //If the Insert Query was successfull.

            // Send the email:
          $message = " To activate your account, please click on this link:\n\n";
            $message .= WEBSITE_URL . '/activate.php?email=' . urlencode($Email) . "&key=$activation";
            mail($Email, 'Registration Confirmation', $message, 'From: rahul19dj@gmail.com'); 

            // Flush the buffered output.

            // Finish the page:
            echo '<div class="success">Thank you for registering! A confirmation email has been sent to '.$email.' Please click on the Activation Link to Activate your account </div>';

        } else { // If it did not run OK.
            echo '<div class="errormsgbox">You could not be registered due to a system error. We apologize for any inconvenience.</div>';
        }

    } else { // The mobile number is not available.
        echo '<div class="errormsgbox" >That mobile number has already been registered.</div>';
    }

} else {//If the "error" array contains error msg , display them

 echo '<div class="errormsgbox"> <ol>';
    foreach ($error as $key => $values) {

        echo '  <li>'.$values.'</li>';

    }
    echo '</ol></div>';

}

mysqli_close($dbc);//Close the DB Connection

} // End of the main Submit conditional. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:36:53.537

您正在分配所有变量，除了`$email`连续`$name`覆盖每个变量。这肯定会导致奇怪的结果，这些结果取决于数据酶中每一列的数据类型。如果`mobileno`设置为`int`具有字符串的默认值`0`或空值将导致您在数据酶中看到 0。

# oracle - Oracle JInitiator 版本过低

> ID：11752191
> 
> 赞同：13
> 
> 时间：2012-08-01T03:29:10.840
> 
> 标签：oracle, jinitiator

当我在我的 Intranet 门户中打开一个页面时，我会看到一个包含以下消息的窗口

> FRM - 92095：Oracle JInitiator 版本过低。请安装 1.1.8.2 或更高版本

我已经安装了 JInitiator 1.1.8.16 和 JInitiator 1.3.1.30。但我得到了同样的错误信息。

这个有什么解决办法？？？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-14T23:50:08.840

不要卸载任何东西！

您可以在 Windows 或 Mac 中使用 Java7

在 Java 的控制面板中

点击Java点击查看version7中的参数写入：

-Djava.vendor="Sun Microsystems Inc."

有用 ！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-09T02:12:29.223

卸载 Java Update 7。它对我有用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-01T06:48:31.350

你碰巧在你的电脑上安装了 JRE 1.7 吗？在这种情况下，请卸载它并再次安装 JRE 1.6。

```
> Note: ID 1348436.1    and a bug exists ( not yet fixed )
> Bug:11782681 APPS6: FORMS DO NOT LAUNCH WITH BETA JRE 1.7 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-31T21:03:43.850

卸载 Java 7 并安装 Java 6。

该论坛来自显示详细信息：

[http://oracleformsinfo.wordpress.com/2012/06/17/frm-92095-oracle-jinitiator-version-too-low-disable-jre-1-7-auto-update-for-all-e-business-套件和 Oracle 表单最终用户/](http://oracleformsinfo.wordpress.com/2012/06/17/frm-92095-oracle-jinitiator-version-too-low-disable-jre-1-7-auto-update-for-all-e-business-suite-and-oracle-forms-end-users/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-19T17:02:41.573

我在 Windows 7 中遇到了这个问题。我转到控制面板并单击“Java（32 位）”。弹出一个名为“Java 控制面板”的窗口，我单击“Java”选项卡和“查看”按钮。弹出一个名为“Java 运行时环境设置”的窗口。在我系统的用户选项卡上，我安装了两个版本：平台 1.6 和平台 1.7，我取消了平台 1.7 上的“启用”复选框并单击“确定”。我重新启动浏览器并能够访问 oracle 表单。希望有帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-04-12T15:33:54.480

我有 jdk 1.7 .. 由于这个我得到了错误。现在我从[http://www.java.com/en/download/manual_v6.jsp](http://www.java.com/en/download/manual_v6.jsp)安装了 jdk 1.6 。并按照上面的“我去控制面板并单击“Java（32位）”。弹出一个名为“Java控制面板”的窗口，我单击“Java”选项卡和“查看”按钮。弹出一个窗口名为“Java 运行时环境设置”。在我系统的用户选项卡上，我安装了两个版本：平台 1.6 和平台 1.7，我取消了平台 1.7 上的“启用”复选框并单击“确定”。我重新启动了浏览器并且能够访问 oracle 表单”

它对我有用

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-05T09:00:03.050

贴了4年，在中国用mac air也出现了同样的问题：windows系统有很多答案，我为所有系统提供了一个方法，包括OSX，如果你能在我的附件中打开windows。

**`-Djava.vendor="Sun Microsystems Inc."`** 如图所示输入

![配置java配置文件](../Images/83a44a7339b938748be5501c2a063a62.png)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-16T05:13:12.533

我解决了这个问题，不开玩笑，使用 Netscape

# jquery - 如果最后一个 li 包含类，则向第一个 li 添加一个类

> ID：11752194
> 
> 赞同：1
> 
> 时间：2012-08-01T03:29:37.007
> 
> 标签：jquery

[在这个小提琴](http://jsfiddle.net/6PfKb/9/)中悬停时有一个类被添加到 li中。

如果最后一个 li 应用了 .on 类，我希望能够向第一个 li 添加一个类。我已经尝试过这样的事情，但它似乎不起作用？

```
if ($("li.top-level:last").contains(document.on))
   {
        $('li.top-level:first').addClass('first');
   } 
```

更新了建议答案的[小提琴。](http://jsfiddle.net/aaronk85/6PfKb/21/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T03:31:45.597

[**基于您的小提琴的演示**](http://jsfiddle.net/6PfKb/22/)

```
var $link = $('ul.internal-dropdown li.top-level');
$link.hover(function() {
    $(this).addClass('on');
    if( $(this).is('li.top-level:last-child') ) {
        $('li.top-level:first').addClass('first');
    }

}, function() {
    $link.removeClass('on');
    $('li.top-level:first').removeClass('first');
}); 
```

* * *

jQuery 没有`.contains()`方法；但它确实有一个[`.hasClass()`](http://api.jquery.com/hasclass)方法（顾名思义）：

```
if( $('li.top-level:last').hasClass('on') ) {
    $('li.top-level:first').addClass('first');
} 
```

# api - 我可以自定义 Google Geochart 图表中的工具提示文本吗？

> ID：11752199
> 
> 赞同：20
> 
> 时间：2012-08-01T03:30:19.160
> 
> 标签：api, google-visualization

下面是我正在使用的代码，基于[我在 Google 文档中找到的方法](https://developers.google.com/chart/interactive/docs/roles#whatrolesavailable)，但我不确定它是否适用于[Geochart](https://google-developers.appspot.com/chart/interactive/docs/gallery/geochart)，我是否做得对，或者是否有其他方法可以做它用于 Geochart。

如果我不包含工具提示列，则此代码可以正常工作。当我这样做时，我收到错误*“不兼容的数据表：错误：表包含比预期更多的列（预期 2 列）”，*显示在 Geochart 应位于的位置。

[这个问题](https://stackoverflow.com/questions/6013053/how-to-change-tooltip-text-for-google-chart-api)解决了同样的问题，但不是专门针对 Geochart。

```
<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type='text/javascript'>

    google.load( 'visualization', '1', { 'packages': ['geochart'] } );
    google.setOnLoadCallback( drawRegionsMap );

    function drawRegionsMap()
    {

        var data = google.visualization.arrayToDataTable([
            [ 'State', 'Relevance', {type: 'string', role: 'tooltip'} ],
            [ 'Alabama', 3, 'tooltip test text' ],
            [ 'Arizona', 1, 'tooltip test text' ],
        ]);

        var options =
        {
            region:         'US',
            resolution:     'provinces',
        };

        var chart = new google.visualization.GeoChart( document.getElementById( 'chart_div' ) );
        chart.draw( data, options );

    };

</script> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-01-16T19:45:12.717

为了自定义工具提示以使用包含新行/图像的 html，请查看此示例：http: [//jsfiddle.net/SD4KA/](http://jsfiddle.net/SD4KA/)

```
 google.load('visualization', '1.1', {packages: ['geochart'], callback: drawVisualization});

function drawVisualization() {
    var data = google.visualization.arrayToDataTable([
        ['Country', 'Value', {role: 'tooltip', p:{html:true}}],
        ['Russia', 5, 'Hello world<br>test'],
        ['US', 20, '<img src="https://www.google.com/images/srpr/logo6w.png"/>']]);
    var chart = new google.visualization.GeoChart(document.getElementById('visualization'));
    chart.draw(data, {
        width: 800,
        height: 600,
        tooltip: {
            isHtml: true
        }
    });
} 
```

从 v1.1 geochart 开始支持 html 的工具提示

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-09-11T13:17:51.403

我能够在工具提示中包含我想要的文本，包括这种方式的值：

```
var data = new google.visualization.DataTable();
data.addColumn('string', 'Country'); // Implicit domain label col.
data.addColumn('number', 'Value'); // Implicit series 1 data col.
data.addColumn({type:'string', role:'tooltip'}); // 

data.addRows([

    [{v:"US",f:"United States of America"},1,"21% of Visits"],

    [{v:"GB",f:"United Kingdom"},2,"7% of visits"],

    [{v:"DE",f:"Germany"},3,"6% of visits"],

    [{v:"FR",f:"France"},4,"5% of visits"],

    [{v:"ES",f:"Spain"},5,"5% of visits"],

    [{v:"CA",f:"Canada"},6,"4% of visits"],

    [{v:"IT",f:"Italy"},7,"4% of visits"],

    [{v:"NL",f:"The Netherlands"},8,"4% of visits"],

    [{v:"BR",f:"Brazil"},9,"4% of visits"],

    [{v:"TR",f:"Turkey"},10,"3% of visits"],

    [{v:"IN",f:"India"},11,"3% of visits"],

    [{v:"RU",f:"Russia"},12,"3% of visits"],

    [{v:"AU",f:"Australia"},13,"2% of visits"],

]); 
```

这样，例如“美国”将是工具提示的第 1 行，而“21% 的访问”将是第二行。使用这种格式，我可以在工具提示中包含我想要的任何文本，在两行中。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-08T07:37:09.440

[此线程](https://groups.google.com/forum/?fromgroups#!topic/google-visualization-api/J-u_JIq_C90/discussion)中提供了三种替代方案

> *   手动设置数据点的格式化值（使用 #setFormattedValue() [DataTable](https://developers.google.com/chart/interactive/docs/reference#DataTable)方法）
> *   在 DataTable 列上使用其中一种[格式化程序](https://developers.google.com/chart/interactive/docs/reference#formatters)
> *   在 DataTable 中包含一个“[工具提示](https://developers.google.com/chart/interactive/docs/roles#whatrolesavailable)”角色列

我个人使用过第一个，你的例子应该是这样的

```
var data = google.visualization.arrayToDataTable([
    [ 'State', 'Relevance' ],
    [ 'Alabama', { v: 3, f: 'tooltip test text' } ],
    [ 'Arizona', { v: 1, f: 'tooltip test text' } ],
]); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-02-07T02:09:39.673

我在散点图上遇到了类似的问题。与其他答案中的建议`arrayToDataTable`相反，我不得不使用将数据放入图表中。`DataTable()``addColumn()`

为了让它工作，您可以`arrrayToDataTable()`像当前一样调用并保存到变量数据中。

然后，您需要指定要将哪一列视为工具提示（并且您还必须指定应绘制哪些列）。在以下示例中，第 0 列和第 1 列包含绘图数据，第 2 列包含工具提示字符串。

```
var view = new google.visualization.DataView(data);
view.setColumns([0, 1, {sourceColumn: 2,role:'tooltip'}]); 
```

最后，您必须使用视图变量而不是数据变量来调用绘制：

```
chart.draw(view, options); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-27T21:34:05.080

似乎不可能按照我尝试使用 GeoChart 工具的方式来格式化文本。下面是我最终想出的解决方案和渲染的地图：

**带有工具提示视图的渲染地图**

![在此处输入图像描述](../Images/cc491c9349bbe889f2d3cda31eb5c9be.png)

**PHP & JavaScript 代码**

```
<!-- generate geo map -->
<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type='text/javascript'>

    google.load( 'visualization', '1', { 'packages': ['geochart'] } );
    google.setOnLoadCallback( drawRegionsMap );

    function drawRegionsMap()
    {

        // create data table
        var data = google.visualization.arrayToDataTable([
            <?php echo $data_table; ?>
        ]);

        // create chart object
        var chart = new google.visualization.GeoChart(
            document.getElementById( 'chart_div' )
        );

        // defines the data for the tooltip
        var formatter = new google.visualization.PatternFormat('{0}');
        formatter.format( data, [0,1], 1 );
        var formatter = new google.visualization.PatternFormat('{2}');
        formatter.format( data, [0,1,2], 0 );

        // defines the data for the chart values
        var view = new google.visualization.DataView(data);
        view.setColumns([0, 1]);

        // set options for this chart
        var options =
        {
            width:          <?php echo $width; ?>,
            region:         'US',
            resolution:     'provinces',
            colorAxis: { colors: ['#abdfab', '#006600'] },
            legend: 'none'
        };

        // draw chart
        chart.draw( view, options );

    };

</script>

<div id="chart_div" style="width: <?php echo $width; ?>px; height: <?php echo $height; ?>px;"></div> 
```

**呈现的 HTML**

```
<script type='text/javascript' src='https://www.google.com/jsapi'></script>
<script type='text/javascript'>

    google.load( 'visualization', '1', { 'packages': ['geochart'] } );
    google.setOnLoadCallback( drawRegionsMap );

    function drawRegionsMap()
    {

        // create data table
        var data = google.visualization.arrayToDataTable([
            [ 'State', 'in', 'String' ],
            [ 'Arizona', 2, 'Has Facility, Sells Direct' ],
            [ 'California', 4, 'Has Facility, Has Distributor, Sells Direct' ],
            [ 'Colorado', 1, 'Sells Direct' ],
            [ 'Florida', 1, 'Has Distributor' ],
            [ 'Georgia', 1, 'Has Distributor' ],
            [ 'Idaho', 1, 'Sells Direct' ],
            [ 'Illinois', 1, 'Has Distributor' ],
            [ 'Indiana', 1, 'Has Distributor' ],
            [ 'Iowa', 1, 'Has Distributor' ],
            [ 'Kansas', 1, 'Has Distributor' ],
            [ 'Kentucky', 1, 'Has Distributor' ],
            [ 'Louisiana', 1, 'Has Distributor' ],
            [ 'Maryland', 2, 'Has Distributor' ],
            [ 'Montana', 1, 'Sells Direct' ],
            [ 'Nevada', 2, 'Has Facility, Sells Direct' ],
            [ 'New Mexico', 2, 'Has Facility, Sells Direct' ],
            [ 'North Carolina', 1, 'Has Distributor' ],
            [ 'North Dakota', 1, 'Has Distributor' ],
            [ 'Oklahoma', 1, 'Sells Direct' ],
            [ 'Oregon', 1, 'Sells Direct' ],
            [ 'Pennsylvania', 1, 'Has Distributor' ],
            [ 'South Carolina', 1, 'Has Distributor' ],
            [ 'Tennessee', 1, 'Has Distributor' ],
            [ 'Texas', 1, 'Has Distributor' ],
            [ 'Utah', 2, 'Has Facility, Sells Direct' ],
            [ 'Washington', 1, 'Sells Direct' ],
            [ 'Wyoming', 1, 'Sells Direct' ],       ]);

        // create chart object
        var chart = new google.visualization.GeoChart(
            document.getElementById( 'chart_div' )
        );

        // defines the data for the tooltip
        var formatter = new google.visualization.PatternFormat('{0}');
        formatter.format( data, [0,1], 1 );
        var formatter = new google.visualization.PatternFormat('{2}');
        formatter.format( data, [0,1,2], 0 );

        // defines the data for the chart values
        var view = new google.visualization.DataView(data);
        view.setColumns([0, 1]);

        // set options for this chart
        var options =
        {
            width:          286,
            region:         'US',
            resolution:     'provinces',
            colorAxis: { colors: ['#abdfab', '#006600'] },
            legend: 'none'
        };

        // draw chart
        chart.draw( view, options );

    };

</script>

<div id="chart_div" style="width: 286px; height: 180px;"></div> 
```

# facebook-graph-api - 如果包含链接，则无法在用户墙上发帖

> ID：11752200
> 
> 赞同：1
> 
> 时间：2012-08-01T03:30:34.973
> 
> 标签：facebook-graph-api

我正在尝试使用 Graph API 发布到用户墙上。我使用自己的墙进行了测试，并且我已将我的 Facebook 应用程序验证为`publish_stream`.

```
post_params = {
  access_token:FACEBOOK_APP_TOKEN,
  link:'http://example.com',
  picture:"http://example.com/images/logo.png",
  message:"dummy",
  description:'dummy'
}

get_facebook_client().client.post("#{user_fb_id}/feed", post_params) 
```

如果我没有`link`参数（包含我们公司的 url），我可以成功地将一些东西发布到我的墙上。如果我包含链接参数，Facebook 仍会返回状态更新的 ID `{"id": "4804827_871793267189"}`，例如成功的发布请求，但帖子不会出现在我的墙上。

以上使用 ruby​​ gem `rest-more`，但是当我也手动编写所有代码时，就会发生这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:24:27.840

嗯，通过查看您的代码，如果您在链接末尾添加一个逗号，这不会解决问题吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:30:34.973

我意识到我可以发布任何其他链接（甚至是我公司网址的其他子域）。

所以我认为 Facebook 会忽略用户之前分享过的链接。

# asp.net - 动态控件：如果在 Page_Load 期间重新创建关联事件，则不会触发

> ID：11752203
> 
> 赞同：1
> 
> 时间：2012-08-01T03:30:54.520
> 
> 标签：asp.net

*免责声明：我已经阅读[了 ASP.net 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)，并且我还阅读[了几篇有关动态控件的](http://msdn.microsoft.com/en-us/library/aa479330.aspx) [好](http://www.4guysfromrolla.com/articles/081402-1.aspx) [文章](http://www.singingeels.com/Articles/Dynamically_Created_Controls_in_ASPNET.aspx)，但我一定遗漏了一些东西。*

**背景：**我目前正在开发一个需要根据用户输入创建大量动态内容的网站。我了解，为了使动态控件持续存在并使其事件正确连接，我需要在每个页面回发时重新创建这些动态控件。

由于我的项目的性质，我的代码不知道要创建什么控件，除非它包含有关用户选择的内容的一些信息。我将用户的选择存储在 中，因为它尚未加载，所以它`ViewState`不可用。`Page_Init`因此，我必须等到`Page_PreLoad`或`Page_Load`读取 ViewState，然后重新创建我的动态控件。

**我不明白的部分：**当我尝试在 期间重新创建我的控件时`Page_Load`，控件仍然存在，但相关的事件似乎没有触发。例如，单击`LinkButton`我创建的按钮不会触发我连接到其`Click`事件的方法，即使按钮本身确实存在。

我偶然发现的一个奇怪的解决方案是，我可以在此期间重新创建我的控件`Page_PreLoad`，然后事件正确触发。

**我的问题（或问题，而是）：**为什么我的问题似乎通过在期间`Page_PreLoad`而不是重新创建我的控件而消失`Page_Load`？这是一种安全的做法吗？我从未见过任何其他使用过的代码`Page_PreLoad`，这让我很警惕。该解决方案对我有用，但是我可能会遗漏任何陷阱吗？我是否在不知不觉中为以后的失败做好了准备？

我的代码，哪里`LoadDocument()`是创建控件并将它们填充到静态`Panel`控件中的方法：

```
protected void Page_PreLoad(object sender, EventArgs e)
{
    if (ViewState["xmlfilename"] != null)
    {
        LoadDocument(ViewState["xmlfilename"].ToString());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:41:37.797

Probably you read one of my answers on this topic:

*   [https://stackoverflow.com/a/11127064/1268570](https://stackoverflow.com/a/11127064/1268570)

*   [https://stackoverflow.com/a/11061945/1268570](https://stackoverflow.com/a/11061945/1268570)

*   [https://stackoverflow.com/a/11167765/1268570](https://stackoverflow.com/a/11167765/1268570)

I can tell you that I have code on production using the `PreLoad` event and it has worked fine

But for new development I am using the `Init` event, Why? Because it is the Microsoft recommendation and therefore it can be considered as an standard, and the technical benefits such the automatic load of the ViewState, theme support, and the most important (from my point of view), the dynamic controls events are sync with the static controls.

Your concern is right, in the `Init` event the ViewState has not been loaded yet, but that doesn't stop you to access the `Form` collection

I created a page for learning purpose where I'm creating dynamic controls on demand, and I'm doing it in the `Init` event. I'm creating `TextBoxes` and on each post they raise their `TextChanged` event when the text is changed.

NOTE: before continue I would like to remind you that the ViewState is loaded **matching the control's ID's**, that's why it's a good practice to re-create always the dynamic controls using the same ID

This is the code:

### ASPX

```
<asp:HiddenField runat="server" ID="numberOfDynamicControls" Value="0" />
<asp:Panel runat="server" ID="myPanel">
</asp:Panel>
<asp:Button Text="Add Control" runat="server" ID="addControl" OnClick="addControl_Click" />
<asp:Label ID="lblMessage" runat="server" /> 
```

### ASPX code behind

```
 protected void Page_Init(object sender, EventArgs e)
    {
        this.CreateDynamicControls();
    }

    protected void addControl_Click(object sender, EventArgs e)
    {
        var n = int.Parse(this.numberOfDynamicControls.Value);
        n++;
        this.numberOfDynamicControls.Value = n.ToString();
        this.myPanel.Controls.Add(this.CreateTextbox(n));
    }

    private void CreateDynamicControls()
    {
        int n = 0;

        if (!string.IsNullOrWhiteSpace(this.Request.Form["numberOfDynamicControls"]))
        {
            n = int.Parse(this.Request.Form["numberOfDynamicControls"]);
        }

        for (int i = 0; i < n; i++)
        {
            var t = this.CreateTextbox(i + 1);
            t.TextChanged += (x, y) => this.lblMessage.Text += "<br/>" + (x as TextBox).ID + " " + (x as TextBox).Text;

            this.myPanel.Controls.Add(t);
        }
    }

    private TextBox CreateTextbox(int index)
    {
        var t = new TextBox { ID = "myTextbox" + index.ToString(), Text = "de" };

        return t;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T04:20:57.177

您的事件在`ProcessPostData`. 哪个控件触发了回发，也是发布数据。如果你的控件当时不存在，它就不会接收到该事件。

我同意`Init`这为时过早，也`Load`为时已晚。

您需要在这里做的是在加载视图状态后立即创建这些控件。

在页面生命周期中没有这方面的事件。但是，所有函数都是虚拟的，您可以覆盖其间调用的函数。

加载依赖于 ViewState 中存储的值的此类控件的最佳位置是`LoadViewState`函数。

*   覆盖这个函数。
*   记得在一开始就调用 base.LoadViewState。
*   根据 ViewState 值创建控件。

现在您的所有控件事件都应该正确触发。

# java - 如何解决 com.android.internal.R.drawable.hover_tooltip_bg？

> ID：11752205
> 
> 赞同：0
> 
> 时间：2012-08-01T03:31:16.440
> 
> 标签：java, android

我重置了我的 windows 站，现在我无法设置项目。我得到多次*"hover_tooltip_bg cannot be resolved or is not a field"*。

但我不明白是哪个问题？我应该添加什么来定义它？Android库的另一部分几乎可以。

几乎是因为我得到例如：

```
FEATURE_HOVERING_UI cannot be resolved or is not a field 
```

对于线：

```
if ( this.getPackageManager().hasSystemFeature(PackageManager.FEATURE_HOVERING_UI) == true) { 
```

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:25:24.593

您的开发环境和您所指的文档之间似乎存在版本不匹配。`FEATURE_HOVERING_UI`不是最新版本 PackageManager 的一部分

# django - 推特引导日期选择器不起作用

> ID：11752223
> 
> 赞同：2
> 
> 时间：2012-08-01T03:35:01.197
> 
> 标签：django, twitter-bootstrap, datepicker

我一直在广泛寻找答案，但我似乎找不到一个有效的答案。我正在使用带有 twitter boostrap 2.0.4 的 Django 1.4，并且我正在尝试使用日期选择器（eyecon）但没有成功。当我单击输入框时，没有显示日期框。

```
<div id="due_date">
        <input type="text" value="02/16/12" data-date-format="mm/dd/yy" id="datepicker" >
</div> 
```

在我的 base.html 结尾处（就在关闭正文之前）：

```
<script src="/site_media/js/jquery.script.js"></script>
<script src="/site_media/js/bootstrap-datepicker.js"></script> 
```

最后在我 jquery.script.js 我有：

```
$(document).ready(function(){ $('.datepicker').datepicker()}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T06:23:04.513

您已经选择了所有具有“datepicker”类的元素，而您的输入元素定义没有这样的类，而是将 datepicker 作为 id 属性集。

选择 id 字段`$("#datepicker")`或将类“.datepicker”添加到您的输入字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T08:56:49.067

做这个：`$(document).ready(function(){ $('#datepicker').datepicker()});`

正如你所设置的`id="datepicker"`

`'.'`用于class，`'#'`用于id

# java - Java - 从反射调用的构造函数中捕获异常

> ID：11752228
> 
> 赞同：5
> 
> 时间：2012-08-01T03:35:54.240
> 
> 标签：java, exception, reflection, exception-handling

我正在使用反射创建一个对象。根据正在构造的实际对象，构造函数可能有一个针对特定自定义异常的 throws 声明，它很重要，我可以捕捉到这一点。

不幸的是，当我尝试将异常添加到包含反射构造的 try 块的捕获中时，代码将无法编译，因为：

> “无法到达的 catch 块。这个异常永远不会从 try 语句体中抛出”

我意识到捕获基类 Exception 会起作用，事实上这对我的代码来说是可以的。但是，情况可能并非总是如此，因为其他不同的异常可能在未来适用于其他对象，并且在 catch 中使用 instanceof 并重新抛出其他所有内容似乎不优雅。

有没有办法表明可能会引发此异常，以便我可以专门捕获它？

**编辑：**根据要求提供一些代码。由于上述原因无法编译。

```
try{
  Constructor<? extends Thing> constructor = getClassType().getDeclaredConstructor(SomeParameter.class);
  Thing thing = constructor.newInstance(new SomeParameter());
}
catch(FoobarException e){
  //new Thing(SomeParameter p) might throw this
}
catch(ReflectiveOperationException | IllegalArgumentException | SecurityException e){} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-01T03:50:58.627

异常将被包裹在一个`InvocationTargetException`. 抓住它，看看原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T04:04:36.713

> 有没有办法表明可能会引发此异常，以便我可以专门捕获它？

不。

因为此时，构造函数抛出的任何异常都将被捕获，并且`InvocationTargetException`将在其位置抛出一个 will。这由[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Constructor.html#newInstance%28java.lang.Object...%29)简洁地解释如下：

> *" **Throws** : [...] `InvocationTargetException`- 如果底层构造函数抛出异常。"*

（请注意，它说的是“异常”，因此这适用于构造函数抛出的已检查和未检查的异常。）

所以事实上，编译器在那个编译错误中说的是实话。您试图捕获的已检查异常此时不可能传播。事实上，JLS 可达性规则声明代码*绝对*不可访问......因此编译错误。

# ruby - 在 gem 中的可执行文件中需要文件

> ID：11752234
> 
> 赞同：1
> 
> 时间：2012-08-01T03:37:01.573
> 
> 标签：ruby, gem

我正在使用 ruby​​ 1.9.3 和 bundler 1.1.3 构建一个 gem。在我的 gemspec 中，我使用该`executables`方法来指定 `bin/curd" 是可执行的：

```
Gem::Specification.new do |gem|
  ...
  gem.executables   = ["curd"]
  ...
end 
```

gem 源目录有一个`bin`和一个`lib`目录：

```
bin/
  curd
lib/
  curd.rb 
```

该`bin/curd`文件使用 中定义的代码`lib/curd`，但我无法正确要求它。

我怎样才能要求该`lib/curd`文件，以便在安装 gem 时`bin/curd`可以看到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T03:57:59.640

添加到`bin/curd`：

```
require 'curd' 
```

这将需要`curd`安装后的 gem。

# lotus-notes - 使用 Lotus Notes 将 excel 文件上传到 AS400

> ID：11752238
> 
> 赞同：0
> 
> 时间：2012-08-01T03:37:29.997
> 
> 标签：lotus-notes, ibm-midrange

我们的电子邮件中有一个自动分离模块，其中 excel 文件附件被分离到我们网络中的特定文件夹。

除了分离文件之外，我是否可以打开附件并将其上传到 AS400 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:16:13.727

也许您可以从网络文件夹使用 FTP 到 AS400 IFS？然后从AS400 IFS，用CPYFRMIMPF转PF？

# c#-4.0 - 'id' 无法解决..？

> ID：11752239
> 
> 赞同：0
> 
> 时间：2012-08-01T03:37:36.643
> 
> 标签：c#-4.0, entity-framework-4

我正在使用 EF 4.1，当我使用以下代码时出现错误：

在当前范围或上下文中无法解析“id”。确保所有引用的变量都在范围内，加载了所需的模式，并且正确地引用了命名空间。接近简单标识符，第 6 行，第 1 列。

C＃

```
 foreach (Person Profile in _ProfilesRepository.GetProfiles(filterExpression.ToString(), sortingName, request.SortingOrder.ToString(), request.PageIndex, request.RecordsCount, request.PagesCount.HasValue ? request.PagesCount.Value : 1))
                {
//the error happens here when it comes back from the GetProfiles call : (
                    response.Records.Add(new JqGridRecord(Convert.ToString(Profile.ID), new List<object>()
                    {
                        Profile.Name,
                        Profile.JobTitle,
                        Profile.Type
                    }));
                }

     public IQueryable<Person> GetProfiles(string filterExpression, string sortExpression, string sortDirection, int pageIndex, int pageSize, int pagesCount)
            {
                if (!String.IsNullOrWhiteSpace(filterExpression))
                    return db.persons.Where(filterExpression).OrderBy(sortExpression + " " + sortDirection).Skip(pageIndex * pageSize).Take(pageSize);
                else
                    return db.persons.OrderBy(sortExpression + " " + sortDirection).Skip(pageIndex * pageSize).Take(pagesCount * pageSize);
                    //return db.persons;

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T02:43:51.257

试试这个，在你的短表达式/字段名之前添加“它”：

> OrderBy("it."+sortExpression + " " + sortDirection).Skip(pageIndex * PageSize).Take(pageSize); OrderBy("it."+sortExpression + " " + sortDirection).Skip(pageIndex * pageSize).Take(pagesCount * pageSize);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T02:18:28.747

使用时出现提示`orderBy("fieldname asc/desc")`

```
db.persons.OrderBy(sortExpression + " " + sortDirection) 
```

当我尝试`orderBy`使用`lambda expression`它时，它工作正常，没有错误消息。

```
db.persons.OrderBy(x=>x.FieldName) 
```

# ios - 期待重构objective-c UIViewController iPad/iPhone

> ID：11752240
> 
> 赞同：0
> 
> 时间：2012-08-01T03:37:41.853
> 
> 标签：ios, refactoring, cocoa-design-patterns

我继承了一个长期维护代码库，它有两种截然不同的 iPhone 和 iPad 视图。这已经创建了一个大型 UIViewController 类，该类已经膨胀到超过 1k 行代码，是 ISIPAD 语句、私有变量、属性、iBOutlets/Actions 的混搭，例如，将 UITableView 用于一种实现，而另一种则完全不同。

更糟糕的是，当前的软件模式依赖于子类化。

目前我们看起来像这样：

```
ParentVC (both iphone/ipad God class also has xib(xib~ipad) + iboutlets/actions)
      |         |            |
    ChildA    ChildB       ChildC 
```

我最初的想法是采用 ParentVC 并将其拆分为 iPhone/iPad 特定的类

```
 ParentVCBase
         |                     |
     ParentVC_iPad(xib~ipad)  ParentVC_iPhone(xib)
         |                       |
   ChildA/B/C_iPad         ChildA/B/C_iPhone 
```

并通过工厂调用吐出正确的 Child 子类。

我遇到的问题是每个 Child 重写了一些 ParentVC 方法调用并实现了它自己的非设备特定的功能特定方法（请记住，原始子类化的主要目标是共享视图布局）。这种设计模式只有在我为 ChildA_iPhone 和 ChildB_iPad 复制代码时才有效。我宁愿避免这种情况，因为我已经将一种反模式换成了另一种。

我在这里有点茫然。我几乎考虑过在运行时创建 Child 类（objc/runtime.h），从引用 Child 类中调配所需的 Child 方法，但这似乎并不比我们目前所拥有的要少。为了简单地清理，我还考虑保留 ParentVC 标头（包含大量 IBOUTlet、属性等）并将特定于设备的方法分类以至少将功能分开，直到需要真正重构的那一天。

好奇是否有任何 iOS 架构师不得不在某个时间点处理这个问题，或者他们可能如何处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:13:27.897

这不是一个 iOS 特定的问题，而是一个面向对象的设计问题。

您肯定希望避免代码重复。重复是许多罪恶的根源。

通常，您要做的是避免在设计类时受到继承限制的限制。你想要走向的是班级组成。

[因此，您可以使用桥接模式](http://en.wikipedia.org/wiki/Bridge_pattern)移至如下所示的设计：

```
 ParentVC           --->             ImplementationA
   |    |                               |            |
ChildA ChildB                 Implementation_iPhone Implementation_iPad 
```

在这里，ParentVC 具有与上面相同的类层次结构，但它使用单独的类层次结构 ImplementationA 来实现。该类层次结构分解为 iPhone 和 iPad 版本。类 ImplementationA 包含 ParentVC 中实现的核心。

继承是一种设计模式，但它只是众多设计模式中的一种。如果你坚持只使用一种模式，你就会陷入糟糕的设计。您需要组合模式以正确建模系统。

当然，请务必尽可能使用单元测试，以确保在进行这些更改时不会破坏任何内容。

# android - 我在哪里可以在谷歌上为 xoauth 注册 Android 应用以获取消费者密钥和消费者秘密

> ID：11752241
> 
> 赞同：1
> 
> 时间：2012-08-01T03:37:51.080
> 
> 标签：android, oauth, gmail

我正在开发一个通过 XOauth 与 Gmail 交互的 Androd 应用程序。我想在 google 上注册我的应用程序，否则在 OAuth 过程中，Google 会显示警告并将我的应用程序视为“无法验证此声明......我们建议您拒绝访问，除非您信任该应用程序”。恐怕这个警告会吓到一些用户。所以我想知道我在哪里可以在谷歌上为 xoauth 注册我的 Android 应用程序以获得消费者密钥和消费者秘密？我在网上搜索了几个小时，只找到了这个[https://developers.google.com/accounts/docs/RegistrationForWebAppsAuto](https://developers.google.com/accounts/docs/RegistrationForWebAppsAuto)。但我的应用不是网络应用，也没有域。我在哪里可以找到 Android 应用程序版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:40:44.503

[https://code.google.com/apis/console](https://code.google.com/apis/console)

从左侧选择 API 访问，然后按照那里的说明进行操作。

# vba - 宏 - 复制和粘贴

> ID：11752242
> 
> 赞同：2
> 
> 时间：2012-08-01T03:37:53.810
> 
> 标签：vba, excel, excel-2003

我的公司只使用 MS Office 2003 产品，所以我必须坚持下去。由于我的工作性质，我需要使用很多“复制和粘贴”功能。源数据主要来自网站，我将数据粘贴到 Excel 中的单元格中。问题是剪贴板保持源格式，当我粘贴它时它会反映在单元格上。每次我用户复制和粘贴时，通过选择“粘贴为文本”选项来删除源格式真的很麻烦。所以我决定使用宏。当我尝试从网站复制和粘贴到 Excel 时，宏工作得很好，但是当我从 Excel 复制并粘贴到同一个工作表时，它会引发错误。

这是我用于从网站复制和粘贴到 Excel 的代码，没有源格式。

```
Sub Paste_without_any_formatting()
    ActiveSheet.PasteSpecial Format:="Text"
End Sub 
```

我想添加另一个代码，用于从 excel 复制和粘贴到同一个工作表，就像这样。

```
Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False 
```

我怎样才能把这两个代码放在一起？当我按下 Ctrl+V 时，我想让这些神奇地发生。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T05:29:39.337

这是实现它的最简单的方法。

```
Sub Sample()
    On Error GoTo Whoa1

    Selection.PasteSpecial Paste:=xlPasteValues, Operation:=xlNone, SkipBlanks _
    :=False, Transpose:=False

    Exit Sub
Pastetext:
    On Error GoTo Whoa2

    ActiveSheet.PasteSpecial Format:="Text"

    Exit Sub
Whoa1:
    Resume Pastetext
Whoa2: '<~~ If both Paste method fails then show message. Ex: Image in Clipboard
    MsgBox err.Description
End Sub 
```

还有另一种方法可以尝试确定剪贴板数据类型，然后进行相应粘贴。

# python - 使用 Python 乌龟图形的十四段显示

> ID：11752249
> 
> 赞同：1
> 
> 时间：2012-08-01T03:38:52.243
> 
> 标签：python, turtle-graphics

这是我的作业：[http ://cs.nyu.edu/courses/summer11/V22.0002-002/assign6_summer2011.html](http://cs.nyu.edu/courses/summer11/V22.0002-002/assign6_summer2011.html)

到目前为止，我已经写了以下内容：

```
from turtle import *

s = input(Type in a string: )

Characters = {
    ('A') : MethodA
    ('B') : MethodB
    ('C') : MethodC
    ('D') : MethodD
    ('E') : MethodE
    ('F') : MethodF
    ('G') : MethodG
    ('H') : MethodH
    ('I') : MethodI
    ('J') : MethodJ
    ('K') : MethodK

for c in s:
    c = c.upper() # to fold lowercase into upper case
    if c in Characters:
        Characters[c](width)

def top_stroke():
    forward(10)
    penup()

def MethodA (width) :
top_stroke(width)    
middle_stroke(width) 
left_stroke
right_stroke(width)

def MethodB (width) :
top_stroke(width)    
middle_stroke(width) 
left_stroke(width)
right_stroke(width)

def MethodC (width) :
top_stroke(width)    
middle_stroke(width) 
left_stroke(widt)
right_stroke(width) 
```

我的问题是我不确定如何绘制每个笔画。我知道我必须插入它将如何绘制每个字母和数字，但我在正确的轨道上吗？任何人都可以帮我画画`top_stroke`让我开始吗？谢谢你提供的所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-26T06:48:19.067

六年多之后，这个问题值得回答。有点。代替实现 14 段字母数字显示，我将使用 7 个七段（十六进制）数字显示来演示基本思想。我将使用[Wikipedia 中这篇七段显示文章中](https://en.wikipedia.org/wiki/Seven-segment_display)的约定。此外，我将定义一个自定义海龟光标，而不是*绘制*线段，并根据需要对其进行*标记*：

```
from turtle import Screen, Turtle

SCALE = 1.75  # arbitrarily scale digits larger or smaller

CURSOR_SIZE = 25  # maximum dimension of our custom turtle cursor

SPACING = CURSOR_SIZE * 1.25 * SCALE  # space from start of one digit to the next

DIGITS = {  # which segments to turn on encoded as bits
    '0': 0x7E,
    '1': 0x30,
    '2': 0x6D,
    '3': 0x79,
    '4': 0x33,
    '5': 0x5B,
    '6': 0x5F,
    '7': 0x70,
    '8': 0x7F,
    '9': 0x7B,
    'A': 0x77,
    'B': 0x1F,
    'C': 0x4E,
    'D': 0x3D,
    'E': 0x4F,
    'F': 0x47,
}

def display_number(turtle, number):
    for digit in str(number):
        bits = DIGITS[digit]

        for bit in range(7):
            if 2 ** bit & bits:
                position = turtle.position()
                segments[bit](turtle)
                turtle.stamp()
                turtle.setheading(0)
                turtle.setposition(position)

        turtle.forward(SPACING)

def segment_A(turtle):  # top
    turtle.setheading(90)
    turtle.sety(turtle.ycor() + 20 * SCALE)

def segment_B(turtle):  # right upper
    turtle.setposition(turtle.xcor() + 10 * SCALE, turtle.ycor() + 10 * SCALE)

def segment_C(turtle):  # right lower
    turtle.setposition(turtle.xcor() + 10 * SCALE, turtle.ycor() - 10 * SCALE)

def segment_D(turtle):  # bottom
    turtle.setheading(90)
    turtle.sety(turtle.ycor() - 20 * SCALE)

def segment_E(turtle):  # left lower
    turtle.setposition(turtle.xcor() - 10 * SCALE, turtle.ycor() - 10 * SCALE)

def segment_F(turtle):  # left upper
    turtle.setposition(turtle.xcor() - 10 * SCALE, turtle.ycor() + 10 * SCALE)

def segment_G(turtle):  # center
    turtle.setheading(90)

segments = [segment_G, segment_F, segment_E, segment_D, segment_C, segment_B, segment_A]

screen = Screen()
screen.setup(950, 200)
screen.register_shape('segment', ((-12.5, 0), (-10, 2.5), (10, 2.5), (12.5, 0), (10, -2.5), (-10, -2.5)))  # <=>

turtle = Turtle('segment', visible=False)
turtle.shapesize(SCALE)
turtle.speed('fastest')
turtle.penup()

turtle.setx(SPACING - screen.window_width() / 2)

display_number(turtle, "0123456789ABCDEF")

screen.exitonclick() 
```

[![在此处输入图像描述](../Images/9a6248ba5d86a33e8f06a0ebed8d8010.png)](https://i.stack.imgur.com/95Vwg.png)

将段数增加到 14，使文本多行打印和添加小数点都留给读者作为练习。

# mysql - 在 WikkaWiki 1.3.3 版本中，为什么安装脚本无法创建数据库表？

> ID：11752250
> 
> 赞同：2
> 
> 时间：2012-08-01T03:38:58.390
> 
> 标签：mysql, wiki

当我为新安装的 v1.3.3 运行自动安装脚本时，我收到以下消息，表明没有安装任何数据库表：

> 正在创建页表...失败：已经存在？

我已验证我提供了正确的数据库凭据，并且数据库用户具有创建表权限。

我正在运行 mysql 版本：`Ver 14.14 Distrib 5.5.24, for debian-linux-gnu (x86_64)`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T03:38:58.390

`setup/install.php`在脚本中使用 mysql create table 语句，我发现了这个问题。我的 mysql 版本不喜欢以下声明引擎类型的语法：

```
TYPE=MyISAM CHARACTER SET utf8 COLLATE utf8_unicode_ci 
```

我在此脚本中的所有 mysql 查询中替换`TYPE`为`ENGINE`，该脚本能够创建所有数据库表。

看来，在 MySQL 5.1 中，对`TYPE`关键字的支持终于被删除了。

# requirejs - require.js 是“正常”网站的正确工具（用于工作）吗？

> ID：11752251
> 
> 赞同：0
> 
> 时间：2012-08-01T03:38:59.483
> 
> 标签：requirejs

我已经开始构建一个网站，并使用 Require.js 来选择性地加载实现功能所需的脚本。我正在经历的是：

*   在我的一些代码使用“require”加载依赖项之前，“main”脚本尚未完成执行（甚至下载）。这意味着 require.js 配置没有运行并且不知道我的脚本的位置。
*   因为 require.js 配置在我的代码需要使用它时尚未运行，因此“shim”机制尚未初始化且无法使用。

[常见错误](http://requirejs.org/docs/errors.html)页面以及我在尝试解决自己的问题时似乎在网上阅读的许多问题似乎表明这不是适合这项工作的工具。

这似乎对单页应用程序或 node.js 应用程序很有用，但对于在 require.js 初始化之前可以运行其他脚本的传统站点却没有。

如果 require.js 不是该工作的正确工具，是否有适合该工作的工具？如果是，那是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:05:13.497

您是否异步加载`require.js`脚本（使用`async='async'`）？您希望 requirejs 同步加载。加载后，它将异步加载更多脚本，例如您的 main.js 文件。它们可能都乱序加载，但代码实际上会以正确的顺序执行（尊重声明的依赖项）。

因此，在您的页面模板中，您将拥有以下内容：

```
<script src="/Scripts/require.js" type="text/javascript" data-main="main.js"></script> 
```

这将加载 RequireJS，一旦加载，它就会开始`main.js`异步加载。通常`main.js`不定义任何模块，它只是利用其他文件中定义的模块。`require()`这些依赖项在调用中列出：

```
require(["moduleA", "moduleB"], function(A, B){
  // Do something with A and B
  A.someFunction();
  B.someOtherFunction();
}); 
```

文件`moduleA.js`并且`moduleB.js`必须将它们的内容包装在一个`define()`. 在`moduleA.js`（取决于模块 C）：

```
define(["moduleC"], function () {
  // Build up an A
  var A = ....;

  return A;
}); 
```

我现在想知道您是否将模块包装在`define`调用中。不这样做可以解释您遇到的无序执行。

RequireJS 在传统网站上是一个非常有效的工具，而不仅仅是在单页网站上。

# c# - 全局 Windows 按键

> ID：11752254
> 
> 赞同：18
> 
> 时间：2012-08-01T03:39:16.110
> 
> 标签：c#, .net, wpf, keyboard-shortcuts

我有一个简单的 WPF 应用程序，我需要捕获在 Windows（操作系统）中按下的 F1 键，即使我的 WPF 窗口已最小化或未激活。

我无法检测到这一点。我在互联网上搜索，我发现了很多结果，但他们没有帮助我。

为了检测应用程序内部按下的键，我使用了这个简单的代码：

```
AddHandler(Keyboard.KeyDownEvent, (KeyEventHandler)KeyPressed);
private void KeyPressed(object sender, KeyEventArgs e)
{
      if (e.Key == Key.F1)
      {
           //my code went here
      }
} 
```

但是当我的窗口没有被激活时，这不起作用。

所以，我的问题是：**如何检测全局按键？**

我再说一遍：这是一个 WPF 应用程序。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-01T04:49:06.980

没必要`Keyboard Hooking`。只需使用[`RegisterHotKey`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309.aspx)（定义系统范围的热键）和[`UnregisterHotKey`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646327.aspx)来自 Windows API。尝试在[pinvoke.net](http://www.pinvoke.net/default.aspx/user32/registerhotkey.html)或这些教程中的 C# 中使用这些：

*   [全局热键：注册一个即使在表单没有聚焦时也会触发的热键。](http://www.dreamincode.net/forums/topic/180436-global-hotkeys/)
*   [启用 Hotkey 和 ShortcutInput 用户控件的简单步骤](http://www.codeproject.com/Articles/5914/Simple-steps-to-enable-Hotkey-and-ShortcutInput-us)

[Microsoft 论坛](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/87d66b1c-330c-42fe-8a40-81f82012575c)中有一个示例。

您可以使用这些修饰符和[虚拟键代码](http://msdn.microsoft.com/en-us/library/windows/desktop/dd375731.aspx)：

```
MOD_ALT (0x0001)
MOD_CONTROL (0x0002)
MOD_NOREPEAT (0x4000)
MOD_SHIFT (0x0004)
MOD_WIN (0x0008)
```

例如 F1 键是`VK_F1 (0x70)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T03:57:06.140

当您的应用程序不在焦点上时 - 消息泵不会得到任何东西 - 您需要使用系统级 API 来挂钩密钥。（尝试在 SetWindowsHookEx 上搜索信息）

# ios - 将大型日志字符串写入控制台时，Xcode 4.4 挂起

> ID：11752256
> 
> 赞同：5
> 
> 时间：2012-08-01T03:39:30.103
> 
> 标签：ios, xcode

从 Xcode 4.4 开始，如果我将大量日志消息写入控制台，调试我的应用程序会使 IDE 崩溃。在这个特定的项目中，我使用的是 RestKit，当我将 RestKit 登录到 RKLogLevelTrace 并调试应用程序时，当我向 Web 服务获取或发送大量数据（并因此进行大量日志记录）时，Xcode 会崩溃。

1.  其他人看到这个问题了吗？

2.  有什么办法可以解决这个问题，或者只是希望Apple为其发布一个错误修复？

**更新**在我看来，Apple 从 Xcode 4.4.1 / 4.5 DP4 开始修复了这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T04:08:09.603

是的。有一个开放的雷达错误：[Xcode 在通过 NSLog 记录很长的字符串时显示“沙滩球”](http://openradar.appspot.com/11972490)。我认为我们必须等待错误修复版本。

# php - 安全使用二维码

> ID：11752264
> 
> 赞同：2
> 
> 时间：2012-08-01T03:40:17.560
> 
> 标签：php, qr-code

全部，我将使用来自以下 URL 的二维码：http: [//qrcode.kaywa.com/](http://qrcode.kaywa.com/)

我想使用 URL 选项，所以当有人扫描它时，他们会被发送到我在代码中指定的 URL。我想要类似以下网址： [http ://www.website.com/web-page/?type=uplights&action=checkout](http://www.website.com/web-page/?type=uplights&action=checkout)

基于 URL 中的变量，我想允许我的用户插入一些数据。

有没有一种方法可以确保我知道用户通过扫描 QR 码而不是仅仅在 URL 中输入该信息来访问该 URL？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T03:44:26.823

简短的回答：**不直接。** QR 码的设计初衷不是为存储其中的内容保密。有人可以使用 QR 阅读器扫描您的 URL，存储它并一遍又一遍地使用它，而无需再次扫描它。

* * *

**我们用来规避这个问题的一种方法**是加密我们的 URL，这样我们自己的应用程序（基于[ZXing](http://code.google.com/p/zxing/)）将是唯一能够读取我们的二维码的应用程序。然后它通过**安全**通道发送带有**随机数**的实际请求，这样重放攻击也将变得无用（以防有人在嗅探出站连接）。所有其他读者都会看到没有任何用处的加密 URL。

 **除此之外，没有其他方法可以确保用户确实扫描了您的 QR 并且不会将其输入/粘贴。

* * *

**我们实现这一点的方式：**
我们将 URL 存储为`http://www.website.com/app.php?<encrypted_string>`. 如果有人通过不同的 QR 解码器读取我们的 URL，他们将被带到我们的 app.php 页面，该页面敦促他们使用我们的应用程序读取 QR。

我们的应用程序本身在遇到该 URL 时会剥离加密的查询字符串，对其进行解密，并形成自己对正确页面的请求。在 PHP 中，您可以在服务器端本身执行该请求，因此用户永远不会看到它。您可以使用[**此处**](https://stackoverflow.com/questions/1289061/best-way-to-use-php-to-encrypt-and-decrypt)详述的 mcrypt进行加密。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T03:44:17.733

您可以向 URL 添加一个秘密参数，而不是使用该参数发布 URL。但基本上，不，您仍然不会知道是否有人不只是输入该 URL。（例如，我可能使用了 QR 码，然后将 URL 剪切并粘贴到给朋友的电子邮件中，而那个朋友可能已经输入了它。）但你会知道他们*可能*不只是输入它.

QR 码只是文本的简单可逆编码。那里没有魔法。因此，您可以采取一些措施来降低有人输入 URL 的可能性，但您永远无法确定。**

# entity-framework - 实体框架多对多映射上的软删除

> ID：11752265
> 
> 赞同：2
> 
> 时间：2012-08-01T03:40:30.323
> 
> 标签：entity-framework, ef-code-first

我有一个多对多的 EF 映射，类似于下面的示例。我使用的是 EF 代码优先方法，因此我的映射类继承了 EntityTypeConfiguration<>。

```
this.HasMany(a => a.KPIs)
            .WithMany()
            .Map(a =>
            {
                a.ToTable("KeyResultArea_KeyPerformanceIndicator_Mapping");
                a.MapLeftKey("KRA_Id");
                a.MapRightKey("KPI_Id");
            }); 
```

因此，我留下了如下所示的架构。

![在此处输入图像描述](../Images/4fbfd142bd11bf8536cbaa5eefd6e915.png)

到目前为止还没有什么大惊喜。- 但是我希望能够软删除其中一个映射，以便我**想要的架构**看起来像这样；

```
dbo.KeyResultArea_KeyPerformanceIndicator_Mapping(
   KRA_Id int,
   KPI_Id int,
   Deleted bit) 
```

希望这是有道理的，任何指针都会受到欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T03:49:50.573

我认为您可能需要有自己的逻辑来定义关系的删除。您可以为关系定义新的实体类型，

```
public class KRAKPI{

public int KPA_Id{get;set;}
public int KRA_Id{get;set;}
public bool IsDeleted{get;set;}

} 
```

然后您可以通过在状态管理器中获取所有已删除的项目并通过更改值 `KRAKPI`将它们设置为修改状态来定义保存更改中的删除逻辑。[这是一篇](http://blog.jorgef.net/2010/12/ef-soft-delete.html)关于在保存更改方法中设置已删除值的帖子。`IsDeleted`

# jquery - jQuery val() 从多个单选按钮名称集中检索不正确的值

> ID：11752268
> 
> 赞同：3
> 
> 时间：2012-08-01T03:40:55.127
> 
> 标签：jquery, radio-button

我正在使用 jQuery .val() 从包含两组单选按钮的表单中提取数据结果。

```
<!DOCTYPE HTML>
<html>
    <head>  

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

    <script type="text/javascript">

    function userPrefsSubmitted() {
    console.log(  $('form input[@name=cssOn]:checked').val()   );
    console.log(  $('form input[@name=halfFramesOn]:checked').val()   );
    }   
    </script>

</head>
<body>  
<p>Choose User Prefs</p>
<form>
    <p>Transitions</p>
    <div><input type="radio" name="cssOn" value=true>True</div>
    <div><input type="radio" name="cssOn" value=false>False</div>
    <p>Half Frames</p>  
    <div><input type="radio" name="halfFramesOn" value=true>True</div>
    <div><input type="radio" name="halfFramesOn" value=false>False</div>
    <br/><br/>
    <input class="submitButton" type="button" onClick="userPrefsSubmitted()" value="tap when done" />
</form> 

</body>
</html> 
```

如果我选择 fasle 然后是 true 并点击按钮 console.log 显示 false false

这让我发疯了，我搜索了这个论坛以及互联网，但没有找到答案。我哪里错了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T03:45:54.683

没有`@`. 你可以轻松做到：

```
function userPrefsSubmitted() {
  console.log(  $('form input[name=cssOn]:checked').val()   );
  console.log(  $('form input[name=halfFramesOn]:checked').val()   );
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T03:48:06.117

或者试试这个：**工作演示** [http://jsfiddle.net/4T5r3/](http://jsfiddle.net/4T5r3/)

注：[http ://www.electrictoolbox.com/at-name-selector-removed-jquery/](http://www.electrictoolbox.com/at-name-selector-removed-jquery/)

不带@ 的这些选择器的使用也适用于jQuery 1.2 分支。我不确定它是否适用于旧版本。

**代码**

```
function userPrefsSubmitted() {
    alert($('form input[@name=cssOn]:checked').prop('value'));
    alert($('form input[@name=halfFramesOn]:checked').prop('value'));
}​ 
```

**J 1.2 >**

```
 function userPrefsSubmitted() {
        alert($('form input[name=cssOn]:checked').prop('value'));
        alert($('form input[name=halfFramesOn]:checked').prop('value'));
    }​ 
```

**工作图像** *当真时选择*

![在此处输入图像描述](../Images/640f6251c78e974da09d3a3e070190e1.png) ** *错误选择时***工作图像****

 ***![在此处输入图像描述](../Images/c0a53df7f372a2d9c19127e62129f863.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T03:46:52.920

```
function userPrefsSubmitted() {
console.log(  $('form input[name=cssOn]:checked').val()   );
console.log(  $('form input[name=halfFramesOn]:checked').val()   );
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T03:47:20.290

也请尝试`$(":checked").val()`

代替

```
$('form input[@name=halfFramesOn]:checked').val() 
```

这将简单地返回所有选中的单选按钮。***

# android - 从 Eclipse (ADT) 导出 APK 静默崩溃

> ID：11752270
> 
> 赞同：133
> 
> 时间：2012-08-01T03:41:32.347
> 
> 标签：android, eclipse, macos, adt

每次我尝试在 Mac 上从 Eclipse（尝试过 Juno 和 Indigo）导出 APK 时，Eclipse 在几秒钟后崩溃

这曾经在我当前的设置中正常工作。

在我的手机上直接运行应用程序（调试模式）工作正常。

来自控制台的错误是：

```
Invalid memory access of location 0x10073f113 rip=0x101f656f7
Bus error: 10 
```

我在 ~2010 MacBook Pro 上使用 Mac OS X 10.7.4，带有以下 java：

```
java version "1.6.0_33"
Java(TM) SE Runtime Environment (build 1.6.0_33-b03-424-11M3720)
Java HotSpot(TM) 64-Bit Server VM (build 20.8-b03-424, mixed mode) 
```

我正在使用 ADT 20。

我尝试重新安装 Eclipse 和 Android SDK，并重新下载 ADT。

Eclipse 错误视图不显示任何内容

我可以尝试的不同方法的任何想法，或其他方法来调查出了什么问题？

干杯

更新：对于 2014 年后出现的任何人，您应该使用不存在此问题的[Android Studio 。](https://developer.android.com/sdk/installing/studio.html)

* * *

## 回答 #1

> 赞同：411
> 
> 时间：2012-11-27T11:51:56.453

导出时自动禁用项目/构建

我认为是 Eclipse 无法检测到 Android 命令仍在工作或类似的问题。

当然，可以选择在 Eclipse 之外使用 Ant 生成 APK，您可以从 Eclipse 项目中生成 Ant build.xml 更多信息在官方 Android 文档中

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-04-14T02:56:28.547

禁用`Project->Build Automatically`. 我注意到这对我有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-11-19T03:06:09.033

在导出 apk 之前自动禁用项目/构建。

![在此处输入图像描述](../Images/ba586cddfd273ea7f7775e091f4f78c1.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T04:12:27.447

这似乎是您的 JVM 的问题。你能更新你的java并再次检查。还要检查这个[链接](http://christopherhunt-software.blogspot.sg/2010/11/maven-crashing-with-bus-errorinvalid.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-22T17:18:14.270

`project/ clean`为我工作。正如其他用户所发布的那样，我认为这可能与项目的建设有关。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-10-26T07:56:32.710

在我更新 ADT 和 Eclipse 之前，问题一直存在。不知道哪一个能解决问题。现在它可以顺利地进行严格的签名导出，其中：

*   ADT 版本：22.2.1.v201309180102-833290
*   Eclipse Juno 服务版本 2 构建 ID：20130225-0426
*   Gentoo Linux 运行 Java 1.7.0_45-b18。

更新：之后很少导出，我仍然不时遇到崩溃，但不是很频繁。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-12-23T15:13:41.790

可能你应该尝试添加执行权限。你可以试试这样的

首先关闭自动构建

cd /home/你的名字/android-dev/sdk/tools/

sudo chmod +x zipalign

完成了，祝你好运

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-08-05T04:04:40.130

我使用了`disable Build Automatically`几个月，直到我意识到 AWS 插件正在减慢整个启动过程。**我从Help->InstallationDetails**卸载了所有 AWS 插件，现在一切都像以前一样完美。我不需要再禁用`Build Automatically`了。

# c# - 用空字符串替换换行符（lf）而不替换crlf C#中的lf

> ID：11752272
> 
> 赞同：0
> 
> 时间：2012-08-01T03:41:42.803
> 
> 标签：c#, .net, carriage-return, linefeed

我想用空字符串“”替换文件中的任何换行符（Lf）。但是，我不希望它也替换 CrLf 之一（行尾标志）中的 Lf。

我在想这样的事情：

```
fileContent.Replace("\n",""); 
```

上面的代码行会将 CrLf 中的 Lf 替换为 Cr，所以我不希望这样。请给我一些关于正则表达式的建议，它忽略 CrLf 中的 Lf。

非常感谢。

PS：逻辑变了。我用这个：

```
fileContent = Regex.Replace(fileContent, @"\r\n(?=>)|(?<!\""\r)\n", ""); 
```

将出现在 > 之后的所有 CrLf 替换为空字符串 ("")，并将所有不跟在 "Cr 后面的换行符 (Lf) 替换为空字符串 ("")。正确吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T04:15:41.860

除了其他`Regular Expression`答案之外，您还可以使用[Negative Look-Behind](http://www.regular-expressions.info/lookaround.html)来避免捕获不必要的数据：

```
string result = Regex.Replace(fileContent, @"(?<!\r)\n+", ""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T03:44:37.353

您可以使用正则表达式。下面的 RegEx 匹配位于输入开头或以 \r 开头的 \n 字符。它捕获组中 \n 之前的字符，以便可以将其重新插入到字符串中。

```
string result = Regex.Replace(fileContent, @"(^|[^\r])\n", "$1"); 
```

# mysql - MySQL 清除连接状态

> ID：11752282
> 
> 赞同：2
> 
> 时间：2012-08-01T03:43:19.643
> 
> 标签：mysql, performance, connection

两个进程共享同一个 MySQL 连接（以节省重新连接的开销）。他们一个接一个地使用连接，即当另一个进程当前正在使用它时，一个进程从不使用该连接。

这有一个问题：有时进程 A 离开与未决事务的连接，或者一些表被锁定，临时表......当进程 B 获得连接时它不知道（并且不想知道）它必须处理这个“历史”。

我想做的是在将连接提供给进程之前清除连接。即清除与之前其他进程完成的连接使用相关的所有当前数据。

一些帖子建议这样做（使用 API），而如果可能的话，我更喜欢使用 MySQL 命令（类似查询）（类似于`FLUSH`or `RESET`，但这可以满足我的需要）

```
 mysql_change_user(connection, user, password[, db]) 
```

**问题**

*   有没有更好的方法来清除连接？
*   做一个“改变用户”还是比创建一个新的连接更好（性能方面）？

# android - 如何确定正在使用哪个资源文件以及为什么？

> ID：11752286
> 
> 赞同：0
> 
> 时间：2012-08-01T03:43:45.077
> 
> 标签：android, android-layout

我正在使用 Eclipse 的图形布局编辑器中定义的不同设备测试我的布局之一。由于某些设备的分辨率不同，我必须定义不同的dimens.xml 文件来定义特定的字体大小，这样设计才会看起来正确。

我在以下每个资源文件夹中都有一个 dimens.xml 文件：

*   价值观
*   值-sw1280dp
*   值-sw640dp
*   价值观-sw800dp
*   值-sw800dp-大

无论出于何种原因，7in WSVGA（平板电脑）设备都使用 values 文件夹中的 dimens.xml。但是根据设备配置这个设备的分辨率是1024 x 600，所以不应该使用values-sw800dp-large中定义的dimens.xml吗？

有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:53:15.743

它不会使用`values-sw800dp-large`，因为该限定符意味着最小尺寸必须至少为 800dp。另请注意，这些是 dp 值，而不是像素。所以如果设备是hdpi，800dp就是1200像素。

如果您在模拟器中执行此操作，则会与设备显示密度和模拟器显示的缩放发生奇怪的交互。因此，例如，如果您的设备应该是 hdpi，它实际上可能被视为 mdpi 显示器，除非您指定缩放。

# batch-file - ren 不适用于 BATCH 编程中的父文件夹

> ID：11752292
> 
> 赞同：0
> 
> 时间：2012-08-01T03:44:28.583
> 
> 标签：batch-file, directory, parent, rename

```
set FILENAME1=name1.ini
set FILENAME2=name2.ini
ren %FILENAME1% %FILENAME2% 
```

这有效

但

```
set FILENAME1=../name1.ini
set FILENAME2=../name2.ini
ren %FILENAME1% %FILENAME2% 
```

这行不通。

如您所见，我只是想重命名父文件夹中的某些内容，它说命令的语法不正确。帮助！谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:51:55.583

解决方案：

```
set FILENAME1=name1.ini 
set FILENAME2=name2.ini
ren ../%FILENAME1% %FILENAME2% 
```

您重命名的名称不需要父目录“../”

# android - 安卓相机触控对焦

> ID：11752295
> 
> 赞同：4
> 
> 时间：2012-08-01T03:44:38.943
> 
> 标签：android, camera, focus

我正在尝试制作一个自定义相机应用程序，我想让用户可以在此应用程序中选择对焦模式。

对焦模式默认为自动对焦。

如果我想将cameraView设置为可点击，这样当我在屏幕上触摸一个点时，相机的焦点就在那个点上？怎么可能开始？以下是我的代码

```
public void takePhoto(File photoFile, String workerName, int width, int height,   int        quality) {
if (getAutoFocusStatus()){
    camera.autoFocus(new AutoFocusCallback() {
        @Override
        public void onAutoFocus(boolean success, Camera camera) {
            camera.takePicture(shutterCallback, rawCallback, jpegCallback);
        }
    }); 
}else{
    camera.takePicture(shutterCallback, rawCallback, jpegCallback);
}

this.photoFile = photoFile;
this.workerName = workerName;
this.imageOutputWidth = width;
this.imageOutputHeight = height;
}

public void takePhoto(File photoFile, int width, int height, int quality) {
takePhoto(photoFile, null, width, height, quality);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-22T02:14:20.100

当你触摸屏幕上的一个点时，你应该得到一个[Camera.Area](http://developer.android.com/reference/android/hardware/Camera.Area.html)。只有当前对焦模式为 FOCUS_MODE_AUTO、FOCUS_MODE_MACRO、FOCUS_MODE_CONTINUOUS_VIDEO 或 FOCUS_MODE_CONTINUOUS_PICTURE 时，对焦区域才有效。然后你应该调用方法[setFocusAreas](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#setFocusAreas%28java.util.List%3Candroid.hardware.Camera.Area%3E%29)来触发焦点。相机的视野从左上角 (-1000, -1000) 映射到右下角 (1000, 1000)。所以你必须进行坐标转换。

# javascript - 如何确定被点击的文本节点中的字符？

> ID：11752300
> 
> 赞同：3
> 
> 时间：2012-08-01T03:46:04.493
> 
> 标签：javascript, html, dom

我可以设置一个事件侦听器来告诉我何时在 HTML 文档中的某个位置发生了鼠标单击。但是如果点击发生在某些文本上，我需要知道点击发生在文本中的哪个字符。有没有办法做到这一点？

我能想到一些非常令人讨厌的解决方案。例如，对于文档中的每一个字符，我都可以将它包装在一个带有自己事件的单独元素中。或者，因为我可以知道点击发生在哪个文本节点，所以我可以使用 clientWidth 执行某种计算（基本上几乎就像模拟文本的渲染），以确定点击发生在哪个字符中。

肯定有更容易的事情吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-02T04:26:10.577

捕获鼠标事件后，将元素中的文本拆分为两个单独的跨度。查看每个跨度的偏移量以确定事件发生的位置。现在将该跨度一分为二并再次比较。重复，直到您有一个具有单个字符的跨度，其坐标包含鼠标单击的坐标。由于这本质上是一个二分搜索，因此整个过程将相当快，并且与替代方案相比，跨度的总数较低。找到字符后，可以解散跨度并将所有文本返回到原始元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T04:01:44.410

不幸的是，您必须将每个字符包装在一个元素中，但您不必为每个字符附加一个事件侦听器。当在`click`元素上触发事件时，它会冒泡到其父级。`target`然后，您可以使用事件的属性检索实际单击的元素。

假设我们在名为 的元素中有一些文本`textElement`。它包含`span`每个字符的一个。如果我们希望能够单击字符来删除它们，我们可以使用以下代码：

```
textElement.addEventListener('click', function(e) {
    textElement.removeChild(e.target);
}, false); 
```

**[试试看。](http://jsfiddle.net/HLzU4/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-30T09:47:22.483

这是我为实现迈克尔在他的[回答](https://stackoverflow.com/a/11771033/9486175)中所写的内容所做的努力：

```
function hitCharBinSearch(mClientX, inmostHitEl) {

    const originalInmost = inmostHitEl
    const bareText = inmostHitEl.firstChild.textContent
    var textNode = inmostHitEl.firstChild
    var textLenghtBeforeHit = 0
    do {
        let textNodeR = textNode.splitText(textNode.length / 2)
        let textNodeL = textNode

        let spanL = document.createElement('span')
        spanL.appendChild(textNodeL)
        let spanR = document.createElement('span')
        spanR.appendChild(textNodeR)

        inmostHitEl.appendChild(spanL)
        inmostHitEl.appendChild(spanR)

        if (mClientX >= spanR.getBoundingClientRect().left) {
            textNode = textNodeR
            inmostHitEl = spanR
            textLenghtBeforeHit += textNodeL.length
        }
        else {
            textNode = textNodeL
            inmostHitEl = spanL
        }
    } while (textNode.length > 1)

    /* This is for proper caret simulation. Can be omitted */
    var rect = inmostHitEl.getBoundingClientRect()
    if (mClientX >= (rect.left + rect.width / 2)) 
        textLenghtBeforeHit++
    /*******************************************************/

    originalInmost.innerHTML = bareText
    return textLenghtBeforeHit
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-08T04:39:08.650

Placing each character in a document model object is not as obnoxious as it sounds. HTML parsing, DOM representation, and event handling is quite efficient in terms of memory and processing in modern browsers. A similar mechanism is used at a low level to render the characters too. To simulate what the browser does at that level takes much work.

*   Most documents are constructed with variable width characters
*   Wrapping can be justified or aligned in a number of ways
*   There is not a one to one mapping between characters and bytes
*   To be a truly internationalized and robust solution, surrogate pairs must be supported too ¹

This example is lightweight, loads quickly, and is portable across common browsers. Its elegance is not immediately apparent, much reliability is gained by establishing a one to one correspondence between international characters and event listeners.

```
 <!DOCTYPE html>
  <html lang="en">
  <head>
      <meta charset="utf-8">
      <title>Character Click Demo</title>
      <script type='text/javascript'>
          var pre = "<div onclick='charClick(this, ";
          var inf = ")'>";
          var suf = "</div>"; 
          function charClick(el, i) {
              var p = el.parentNode.id;
              var s = "para '" + p + "' idx " + i + " click";
              ele = document.getElementById('result');
              ele.innerHTML = s; }
          function initCharClick(ids) {
              var el; var from; var length; var to; var cc;
              var idArray = ids.split(" ");
              var idQty = idArray.length;
              for (var j = 0; j < idQty; ++ j) {
                  el = document.getElementById(idArray[j]);
                  from = unescape(el.innerHTML);
                  length = from.length;
                  to = "";
                  for (var i = 0; i < length; ++ i) {
                      cc = from.charAt(i);
                      to = to + pre + i + inf + cc + suf; }
                  el.innerHTML = to; } }
      </script>
      <style>
          .characters div {
              padding: 0;
              margin: 0;
              display: inline }
      </style>
  </head>
  <body class='characters' onload='initCharClick("h1 p0 p2")'>
      <h1 id='h1'>Character Click Demo</h1>
      <p id='p0'>&#xE6;&#x20AC; &ndash; &#xFD7;&#xD8; &mdash;</p>
      <p id='p1'>Next  E para.</p>
      <p id='p2'>&copy; 2017</p>
      <hr>
      <p id='result'>&nbsp;</p>
  </body>
  </html> 
```

* * *

[1] This simple example does not have handling for surrogate pairs, but such could be added in the body of the i loop.

# symfony - 如何将教义2中的实体集合添加到主实体

> ID：11752303
> 
> 赞同：0
> 
> 时间：2012-08-01T03:46:35.600
> 
> 标签：symfony, doctrine-orm, arraycollection

我有

```
class user 
{
    @manytomany    
    private $countries
} 
```

和

```
class country {
    @manytomany
    private $user
} 
```

现在，当创建新用户时，我想向用户添加预定义的国家列表

`$countries = $em->getRepository(Country)->findBy(array('population'=>'2000'))`

我想知道如何在用户实体中添加所有国家

可能吗

`$user->addCountry($countries)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:20:54.910

它会起作用吗？

```
class user
{
    private $countries;
    public function addCountries($countries) {
        foreach ($countries as $country) {
            $this->countries[] = $country;
        }
    }
} 
```

# c++ - 为什么这段代码在 vs2005 中调用了不同的模板函数？

> ID：11752307
> 
> 赞同：5
> 
> 时间：2012-08-01T03:46:58.957
> 
> 标签：c++

代码是：

```
#include <iostream>
using namespace std;

// compares two objects
template <typename T> void compare(const T&, const T&){
    cout<<"T"<<endl;
};
// compares elements in two sequences
template <class U, class V> void compare(U, U, V){
    cout<<"UV"<<endl;
};
// plain functions to handle C-style character strings
void compare(const char*, const char*){
    cout<<"ordinary"<<endl;
};

int main() {

    cout<<"-------------------------char* --------------------------"<< endl;

    char* c="a";
    char* d="b";
    compare(c,d);

cout<<"------------------------- char [2]---------------------------"<< endl;

    char e[]= "a";
    char f[]="b";
    compare(e,f);

    system("pause");
} 
```

结果是：

> -------------------------char* ------------------------ ---
> 
> 吨
> 
> ------------------------- 字符 [2]---------- --
> 
> 普通的

我的问题是：为什么 compare(c,d) 调用 compare(const T&, const T&) 和 compare(e,f) 调用普通函数，即使这两个函数的参数是 char*s？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T04:04:10.730

看来 VS2005 可能错误地将`e`和`f`变量视为`const char *`类型。

考虑以下代码：

```
#include <iostream>
using namespace std;

template <typename T> void compare (const T&, const T&) {
    cout << "T:        ";
};

template <class U, class V> void compare (U, U, V) {
    cout << "UV:       ";
};

void compare (const char*, const char*) {
    cout << "ordinary: ";
};

int main (void) {
    char* c = "a";
    char* d = "b";
    compare (c,d);
    cout << "<- char *\n";

    char e[] = "a";
    char f[] = "b";
    compare (e,f);
    cout << "<- char []\n";

    const char g[] = "a";
    const char h[] = "b";
    compare (g,h);
    cout << "<- const char []\n";

    return 0;
} 
```

输出：

```
T:        <- char *
T:        <- char []
ordinary: <- const char [] 
```

* * *

C++03部分`13.3 Overload resolution`（部分编号在 C++11 中似乎没有变化，因此相同的注释适用于那里）指定如何选择使用哪个函数，我将尝试用（相对）简单的术语来解释它，因为该标准相当枯燥。

基本上，*候选*函数列表是根据函数的实际调用方式构建的（作为类/对象的成员函数、常规（未修饰的）函数调用、通过指针调用等）。

然后，其中，根据参数计数提取*可行函数列表。*

然后，从可行的函数中，根据最小隐式转换序列的思想选择最佳拟合函数（参见`13.3.3 Best viable function`C++03）。

本质上，从基于每个参数所需的隐式转换设置的可行列表中选择函数存在“成本”。选择*函数*的成本是该函数每个单独*参数*的成本之和，编译器将选择成本最低的函数。

如果发现两个函数具有相同的成本，则标准规定编译器应将其视为错误。

因此，如果您有一个函数，其中一个参数发生隐式转换，则它会优于必须以相同方式转换两个参数的函数。

“成本”可以在下表的排名列中看到。完全匹配的成本低于促销成本，促销成本低于转化成本。

```
Rank                 Conversion
----                 ----------
Exact match          No conversions required
                     Lvalue-to-rvalue conversion
                     Array-to-pointer conversion
                     Function-to-pointer conversion
                     Qualification conversion
Promotion            Integral promotions
                     Floating point promotions
Conversion           Integral conversion
                     Floating point conversions
                     Floating-integral conversions
                     Pointer conversions
                     Pointer-to-member conversions
                     Boolean conversions 
```

`F1`在功能和转换成本相同的地方`F2`（例如在您的情况下），在以下情况下`F1`被认为更好：

> F1 是非模板函数，F2 是函数模板特化。

* * *

然而，这还不是全部，因为模板代码和非模板代码都是完全匹配的，因此您希望看到在所有情况下都调用了非模板函数，而不仅仅是第三种。

标准中对此进行了进一步介绍：答案在第`13.3.3.2 Ranking implicit conversion sequences`. 该部分指出，相同的等级会导致歧义，*除非*在某些条件下，其中之一是：

> 标准转换序列 S1 是比标准转换序列 S2 更好的转换序列，如果 (1) S1 是 S2 的适当子序列（比较由 13.3.3.1.1 定义的规范形式的转换序列，不包括任何左值转换；恒等转换序列被认为是任何非恒等转换序列的子序列）...

模板版本的转换实际上是非模板版本（限定和数组到指针的转换）的*真子集（限定转换），而真子集被认为具有较低的成本。*

因此，它在前两种情况下更喜欢模板版本。在第三种情况下，唯一的转换是非模板版本的数组到指针和模板版本的限定，因此在任何一个方向都没有子集，并且它更喜欢基于我上面提到的规则的非模板版本，在排名表下）。

# android - 多个处理程序可重用代码

> ID：11752308
> 
> 赞同：0
> 
> 时间：2012-08-01T03:47:03.620
> 
> 标签：android, usb, microchip, adk, android-handler

有人可以建议在一个活动中使用两个不同的处理程序的替代方法，或者让我知道这种方法可以吗？

详细信息：我正在开发一些用于 Microchips ADK Android 入门套件的代码。一切都运行顺利，但是，我遇到了一个问题，即代码中运行了两个不同的处理程序，它可以工作，但我注意到不建议这样做。我用来创建时间延迟的第一个处理程序，并使用 post 命令启动结果。第二个处理程序用于 Microchip 提供的示例代码，用于与 USB 附件框架文件进行通信。我更喜欢只修改 Microchip 代码而不是重写它。类似代码：

```
public class MainActivity extends Activity 
{   ...
    final Handler mHandler = new Handler(); // handler for startTimeDelay
    ...
    protected void onCreate(Bundle savedInstanceState)
    {   super.onCreate(savedInstanceState);
        ...
        Button btnSetTimeDelay = (Button) findViewById(R.id.btnChangeTimeDelay);
        btnSetTimeDelay.setOnClickListener
            (   new View.OnClickListener() 
                {   public void onClick(View v) 
                    {
                        setBackgroundColorLinearLayout(color.holo_red_dark); //red background
                        displayLockIsOpen(false);   // display closed lock message
                        startTimeDelay();   // wait to open the lock
                    }
                }
            );
    } // onCreate
    ...
    final Runnable mUpdateResults = new Runnable()
    {   public void run()
        {   setBackgroundColorLinearLayout(color.holo_green_dark); //green background
            displayLockIsOpen(true);    // display open lock message
        }
    };

    protected void startTimeDelay()
    {   Thread t = new Thread()
        {   @override
            public void run()
            {   SystemClock.sleep(global_delay);
                mHandler.post(mUpdateResults);  // run mUpdateResults code
            };
        };
        t.start();
    } // startTimeDelay

    // USB accessory handler from Microchip, for ADK
    private Handler handler = new Handler()
    {   @override
        public void handleMessage(Message msg)
        {   
            ...
            switch(msg.what)
            {   case USBAccessoryWhat:
                ...lots of code here from Microchip
            } // switch msg.what
        } // handleMessage
    }; // Handler
} // MainActivity 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:15:26.297

您可以为 startTimeDelay 和 USB 附件创建一个单独的处理程序。

来自android的代码。

```
public void dispatchMessage(Message msg) {
        if (msg.callback != null) {
            handleCallback(msg);
        } else {
            if (mCallback != null) {
                if (mCallback.handleMessage(msg)) {
                    return;
                }
            }
            handleMessage(msg);
        }
    } 
```

它说当你有一个回调（Runnable）时，它会调用handleCallback，它会调用你的Runnable.run方法，否则handleMessage会被调用。

所以你可以有一个处理程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T04:56:41.020

感谢 Vivek 的回答。我还发现我可以删除该行：

`final Handler mHandler = new Handler(); // handler for startTimeDelay`

并重命名

`mHandler.post(mUpdateResults); // run mUpdateResults code`

到

`handler.post(mUpdateResults); // run mUpdateResults code`

Microchip的代码覆盖handleMessage这一事实对.post方法没有影响，它可以正常工作。给我下面的代码。

```
public class MainActivity extends Activity 
{   ...
// final Handler mHandler = new Handler();  // handler for startTimeDelay, not needed
    ...
    protected void onCreate(Bundle savedInstanceState)
    {   super.onCreate(savedInstanceState);
        ...
        Button btnSetTimeDelay = (Button) findViewById(R.id.btnChangeTimeDelay);
        btnSetTimeDelay.setOnClickListener
            (   new View.OnClickListener() 
                {   public void onClick(View v) 
                    {
                        setBackgroundColorLinearLayout(color.holo_red_dark); //red background
                        displayLockIsOpen(false);   // display closed lock message
                        startTimeDelay();   // wait to close the lock
                    }
                }
            );
    } // onCreate
    ...
    final Runnable mUpdateResults = new Runnable()
    {   public void run()
        {   setBackgroundColorLinearLayout(color.holo_green_dark); //green background
            displayLockIsOpen(true);    // display open lock message
        }
    };

    protected void startTimeDelay()
    {   Thread t = new Thread()
        {   @override
            public void run()
            {   SystemClock.sleep(global_delay);
                handler.post(mUpdateResults);   // run mUpdateResults code
                // changed from mHandler to handler, defined below
            };
        };
        t.start();
    } // startTimeDelay

    // USB accessory handler from Microchip, for ADK
    private Handler handler = new Handler()
    {   @override
        public void handleMessage(Message msg)
        {   
            ...
            switch(msg.what)
            {   case USBAccessoryWhat:
                ...lots of code here from Microchip
            } // switch msg.what
        } // handleMessage
    }; // Handler
} // MainActivity 
```

对我来说这很简单，因为我不需要重写任何代码，但我不确定它是否是更好的做法。您的代码至少会将代码阅读器引导到处理程序的一个位置，而在我的版本中，mUpdateResults 的运行在处理程序例程中不明确可见。

# matlab - Matlab：如何获取要在 createMask 中使用的矩阵的图像句柄？

> ID：11752309
> 
> 赞同：0
> 
> 时间：2012-08-01T03:47:11.297
> 
> 标签：matlab

我正在使用代表卫星图像的 netCDF 矩阵。我正在尝试制作一个二进制掩码，以便我可以分析矩阵中的 ROI。我制作了一个椭圆形用作遮罩。

现在，函数 createMask 需要底层数据的图像句柄。如何获取数据矩阵的图像句柄？我已显示为轮廓图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T08:19:32.327

*createMask()*函数也可以在没有图像句柄的情况下工作。要获得二进制掩码，只需这样做：

```
imshow(Img,[]);
e = imellipse();
mask = createMask(e); 
```

如果要使用图像句柄来执行此操作，可以通过执行以下操作创建图像句柄：

```
h_img = imshow(Img,[]); 
```

然后，您可以在*createMask()*函数中使用此句柄。（但这并不是真的必要）

# struts2 - 没有为操作 com.ccarc.Contact 定义结果和结果成功

> ID：11752310
> 
> 赞同：0
> 
> 时间：2012-08-01T03:47:18.333
> 
> 标签：struts2, struts2-namespace

我一定在这里遗漏了一些东西。我有以下 struts.xml 文件

```
<?xml version="1.0" encoding="UTF-8"?>
    <struts>
       <package name="myName" namespace="/myName" extends="struts-default">
        <action name="contact" class="com.ccarc.Contact">
           <result>/jsp/Contact.jsp</result>
           <result name="success">/jsp/Contact.jsp</result>
        </action>
   </package>
</struts> 
```

我收到以下错误 `No result defined for action com.ccarc.Contact and result success`

对于我的班级，我有以下内容（我取出了一些代码以使其更具可读性）

```
package com.ccarc;

import com.opensymphony.xwork2.ActionSupport;

public class Contact extends ActionSupport {

    public String execute() {
        System.out.println("in the action");

        return SUCCESS; // as defined by Action interface as "success"
    }
} 
```

我环顾四周并没有找到答案，大多数人都是在结果中忘记了名字的人问的（但你可以看到我列出了成功的名字）

我的 web.xml 文件也在下面

```
<?xml version="1.0" encoding="UTF-8"?>`
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" id="WebApp_ID" version="3.0">
 <display-name>myApp</display-name>

  <filter>
     <filter-name>struts2</filter-name>
     <filter-class>org.apache.struts2.dispatcher.FilterDispatcher</filter-class>
     <init-param>
         <param-name>actionPackages</param-name>
         <param-value>com.ccarc</param-value>
     </init-param>
</filter>

  <filter-mapping>
      <filter-name>struts2</filter-name>
      <url-pattern>/*</url-pattern>
  </filter-mapping>
</web-app> 
```

我还应该注意，我已经尝试将 struts.xml 中的类更改为“Contact”，但我仍然收到相同的错误消息。

我还验证了 /WebConent/classes/com/ccarc/Contact.class 确实存在。

另外我应该在 Eclipse 的控制台中注意到，我看到了类的输出，因此正在调用对象，但是当它从类返回时，问题就出现了。

这是完整的堆栈跟踪

```
Aug 1, 2012 1:33:25 AM org.apache.struts2.dispatcher.Dispatcher serviceAction
SEVERE: Could not find action or result
No result defined for action com.ccarc.Contact and result success
    at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:350)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:253)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:221)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:167)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:105)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:83)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:207)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:74)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:127)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:107)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:206)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:115)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:143)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:121)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:170)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:123)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:50)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:504)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:419)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T06:13:13.540

原因之一是 `http://localhost:8080/FieldDayLogger/contact.action` 映射文件 中的 URL`<package name="myName" namespace="/myName" extends="struts-default">`已定义命名空间，`/myName`而您未在 URL 中使用该 URL。

Struts2 有一种机制来查找名称空间，如果没有找到，将转到默认名称空间，在您的情况下，它无法找到它。

> 命名空间不像文件系统路径那样分层。有一个命名空间级别。例如，如果请求 URL /barspace/myspace/bar.action，框架将首先查找命名空间 /barspace/myspace。如果 /barspace/myspace 中不存在该操作，则搜索将立即回退到默认命名空间“”。框架不会将命名空间解析为一系列“文件夹”。在命名空间示例中，将选择默认命名空间中的 bar 操作。

我强烈建议您查看命名空间的文档，看看它是如何工作的

*   [命名空间配置](http://struts.apache.org/2.3.1/docs/namespace-configuration.html)

另一种解决方案是，如果您在 from 标记或其他此类标记中创建操作，则有一个属性即`namespace`添加`/myName`到该标记中。

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T10:11:55.857

我猜“联系”like 是 Struts2 中的一个关键词。请将 com.ccarc.Contact 重命名为 com.ccarc.MyContact 并重试...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T06:03:03.940

**编辑**：

将您的网址更改为：

```
http://localhost:8080/FieldDayLogger/myName/contact.action 
```

或者，如果您想使用相同的 URL，则在您的 struts.xml 中将命名空间更改为“/”。

[这](http://www.mkyong.com/struts2/struts-2-namespace-configuration-example-and-explanation/)是了解命名空间配置和解释的好链接。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-21T09:38:59.990

最好总是使用命名空间。如果要访问的文件位于 WebContent 内部，则可以使用 namespace="/"，或者根据文件的目录结构，您可以使用“/”以外的任何名称。

试试下面的。

```
<package name="myName" namespace="/myName" extends="struts-default">
        <action name="contact" class="com.ccarc.Contact">
           <result name="success">jsp/Contact.jsp</result>
        </action> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-11T07:22:01.327

我在tiles.xml中缺少定义：

```
<tiles-definitions>

...

  <definition name="foobar" template="/jsp/template.jsp">
    <put-attribute name="viewId" value="foobar"/>
    <put-attribute name="workArea"  value="/jsp/foobar.jsp"/>
  </definition>

...

</tiles-definitions> 
```

检查文档：[https ://www.springbyexample.org/examples/simple-tiles-spring-mvc-webapp-tiles-xml-config.html](https://www.springbyexample.org/examples/simple-tiles-spring-mvc-webapp-tiles-xml-config.html)

# sql - PL/SQL 动态表名

> ID：11752312
> 
> 赞同：0
> 
> 时间：2012-08-01T03:47:21.947
> 
> 标签：sql, oracle, plsql

我对甲骨文很陌生，所以不完全确定这是可能的，或者如果我的方法不对，但这里有......

我正在修复的旧馈送脚本的一部分是循环通过约 20 个表（可以随时更改）以填充相关的临时表。这部分目前*非常*基础：

```
...

INSERT INTO staging_tbl_1(
     SELECT *
     FROM source_tbl_1    
);

INSERT INTO staging_tbl_2(
         SELECT *
         FROM source_tbl_2    
);

... 
```

源数据库中的某些字段具有不同的约束等，这意味着它会时不时地抛出异常并且馈线将停止。我希望做的是在现有的 feeder 包中创建一个过程，以便在插入之前遍历每条记录中的每一行，并将其简单地包装在一个异常块中。这样就可以在不导致馈线停止的情况下对其进行记录。

本质上我正在追逐这样的东西：

```
BEGIN procedure_x(source_record, staging_record)

  -- Perform validation to ensure records exit

  -- Loop through all record rows
  FOR row IN (SELECT * FROM source_record) LOOP

     -- Wrap in exception block

     -- Insert into staging record

     -- Log exception if it occurs
  END LOOP;         
END 
```

我尝试过引用游标，但是为了让它们工作，我还需要提前知道行类型（根据我有限的理解）。我也尝试过立即执行，但是我找不到以适当方式循环它的方法。还有其他方法可以解决这个问题吗？

**额外的：**

我意识到我们真的应该解决问题的根源而不是像这样解决它，不幸的是它远远超出了我的影响范围。

可以在不进行单独过程的情况下执行此操作，只需将所有表引用包装在一个循环中，但是我想将此作为最后的手段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T14:25:12.227

Oracle 具有记录 DML 错误的功能。将它与单个 SQL 语句一起使用。不要逐行进行，让您的流程爬行。

[http://docs.oracle.com/cd/B19306_01/server.102/b14231/tables.htm#ADMIN10261](http://docs.oracle.com/cd/B19306_01/server.102/b14231/tables.htm#ADMIN10261)

# node.js - node.js 部署期间发生错误（Cloud9 -> Heroku）

> ID：11752313
> 
> 赞同：1
> 
> 时间：2012-08-01T03:47:40.940
> 
> 标签：node.js, deployment, heroku

```
1:: Warning: Permanently added 'heroku.com,50.19.85.156' (RSA) to the list of known hosts.

-----&gt; Heroku receiving push
-----&gt; Node.js app detected
-----&gt; Resolving engine versions
   Using Node.js version: 0.6.8
   Using npm version: 1.1.41
-----&gt; Fetching Node.js binaries
-----&gt; Vendoring node into slug
-----&gt; Installing dependencies with npm
   npm WARN package.json cssom@0.2.3 No README.md file found!
   npm WARN package.json connect@1.8.5 No README.md file found!

   &gt; contextify@0.1.1 install /tmp/build_bofw5mh3ha0z/node_modules/jsdom/node_modules/contextify
   &gt; node-gyp rebuild

   gyp http GET http://nodejs.org/dist/v0.6.8/node-v0.6.8.tar.gz
   gyp http 200 http://nodejs.org/dist/v0.6.8/node-v0.6.8.tar.gz
   gyp ERR! UNCAUGHT EXCEPTION Error: UNKNOWN, unknown error '/tmp/build_bofw5mh3ha0z/.node-gyp/0.6.8'
   gyp ERR! This is a bug in `node-gyp`, please file an Issue: 
   gyp ERR!     https://github.com/TooTallNate/node-gyp/issues
   gyp ERR! not ok 
   npm ERR! contextify@0.1.1 install: `node-gyp rebuild`
   npm ERR! `sh "-c" "node-gyp rebuild"` failed with 7
   npm ERR! 
   npm ERR! Failed at the contextify@0.1.1 install script.
   npm ERR! This is most likely a problem with the contextify package,
   npm ERR! not with npm itself.
   npm ERR! Tell the author that this fails on your system:
   npm ERR!     node-gyp rebuild
   npm ERR! You can get their info via:
   npm ERR!     npm owner ls contextify
   npm ERR! There is likely additional logging output above.

   npm ERR! System Linux 2.6.32-343-ec2
   npm ERR! command "/tmp/node-node-aT6q/bin/node" "/tmp/node-npm-o7eN/cli.js" "rebuild"
   npm ERR! cwd /tmp/build_bofw5mh3ha0z
   npm ERR! node -v v0.6.8
   npm ERR! npm -v 1.1.41
   npm ERR! code ELIFECYCLE
   npm ERR! stack Error: contextify@0.1.1 install: `node-gyp rebuild`
   npm ERR! stack `sh "-c" "node-gyp rebuild"` failed with 7
   npm ERR! stack     at ChildProcess. 
```

# c# - 为什么即使我的服务调用和回调成功，我也会收到 WCF 超时？

> ID：11752314
> 
> 赞同：0
> 
> 时间：2012-08-01T03:47:48.240
> 
> 标签：c#, wcf

我正在尝试将游戏内控制台连接到 WCF 接口，因此外部应用程序可以发送控制台命令并接收控制台输出。为此，我创建了以下服务合同：

```
public interface IConsoleNetworkCallbacks
{
    [OperationContract(IsOneWay = true)]
    void NewOutput(IEnumerable<string> text, string category);
}

[ServiceContract(SessionMode = SessionMode.Required, CallbackContract = typeof(IConsoleNetworkCallbacks))]
public interface IConsoleInterface
{
    [OperationContract]
    void ProcessInput(string input);

    [OperationContract]
    void ChangeCategory(string category);
} 
```

在服务器上，我使用以下方法实现了它：

```
public class ConsoleNetworkInterface : IConsoleInterface, IDisposable
{
    public ConsoleNetworkInterface()
    {
        ConsoleManager.Instance.RegisterOutputUpdateHandler(OutputHandler);
    }

    public void Dispose()
    {
        ConsoleManager.Instance.UnregisterOutputHandler(OutputHandler);
    }

    public void ProcessInput(string input)
    {
        ConsoleManager.Instance.ProcessInput(input);
    }

    public void ChangeCategory(string category)
    {
        ConsoleManager.Instance.UnregisterOutputHandler(OutputHandler);
        ConsoleManager.Instance.RegisterOutputUpdateHandler(OutputHandler, category);
    }

    protected void OutputHandler(IEnumerable<string> text, string category)
    {
        var callbacks = OperationContext.Current.GetCallbackChannel<IConsoleNetworkCallbacks>();
        callbacks.NewOutput(text, category);
    }
} 
```

在客户端上，我使用以下方法实现了回调：

```
public class Callbacks : IConsoleNetworkCallbacks
{
    public void NewOutput(IEnumerable<string> text, string category)
    {
        MessageBox.Show(string.Format("{0} lines received for '{1}' category", text.Count(), category));
    }
} 
```

最后，我使用以下类建立服务主机：

```
public class ConsoleServiceHost : IDisposable
{
    protected ServiceHost _host;

    public ConsoleServiceHost()
    {
        _host = new ServiceHost(typeof(ConsoleNetworkInterface), new Uri[] { new Uri("net.pipe://localhost") });
        _host.AddServiceEndpoint(typeof(IConsoleInterface), new NetNamedPipeBinding(), "FrbConsolePipe");

        _host.Open();
    }

    public void Dispose()
    {
        _host.Close();
    }
} 
```

并在我的客户端上使用以下代码建立连接：

```
 protected Callbacks _callbacks;
    protected IConsoleInterface _proxy;

    protected void ConnectToConsoleServer()
    {
        _callbacks = new Callbacks();
        var factory = new DuplexChannelFactory<IConsoleInterface>(_callbacks,
            new NetNamedPipeBinding(), new EndpointAddress("net.pipe://localhost/FrbConsolePipe"));
        _proxy = factory.CreateChannel();
        _proxy.ProcessInput("Connected");
    } 
```

所以发生的事情是 my`ConnectToConsoleServer()`被调用，然后它一直到`_proxy.ProcessInput("Connected");`. 在我的游戏中（在服务器上），我立即看到由`ProcessInput`调用引起的输出，但客户端仍然停止`_proxy.ProcessInput()`调用。

一分钟后，我的客户收到了 JIT ，`TimeoutException` *但*同时出现了我的 MessageBox 消息。

所以显然不仅我的命令被立即发送，我的回调也被正确调用。那么为什么我会收到超时异常？

*注意*：即使删除 MessageBox 调用，我仍然有这个问题，所以这不是 GUI 阻止回调响应的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T16:59:28.080

您需要为实现 Callback 接口的客户端类指定 CallbackBehavior [CallbackBehavior(ConcurrencyMode=ConcurrencyMode.Multiple, UseSynchronizationContext=false)]

请参阅以下内容以获得更好的解释 [http://www.switchonthecode.com/tutorials/wcf-callbacks-hanging-wpf-applications](http://www.switchonthecode.com/tutorials/wcf-callbacks-hanging-wpf-applications)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T04:24:46.933

可能是您`_proxy.ProcessInput("Connected")`阻止了呼叫 - 这与您的超时经验一致，因为服务器立即发送响应，但客户端无法接收它，因为它卡在“ProcessInput”上。当您的调用最终超时时，阻塞调用终止，此时回调完成。

为了验证这一点，您可以尝试使用此（非阻塞）调用来调用吗？

```
((Action)(() => _proxy.ProcessInput("Connected"))).BeginInvoke(null, null); 
```

# objective-c - 从 NSArray 中的 NSNumber 获取整数值

> ID：11752317
> 
> 赞同：6
> 
> 时间：2012-08-01T03:48:06.817
> 
> 标签：objective-c, ios, iterator, nsarray, nsnumber

我有一个 NSArray 和 NSNumber 具有 int 值的对象：

```
arrayOfValues = [[[NSArray alloc] initWithObjects: [NSNumber numberWithInt:1], [NSNumber numberWithInt:3], [NSNumber numberWithInt:5], [NSNumber numberWithInt:6], [NSNumber numberWithInt:7], nil] autorelease];
[arrayOfValues retain]; 
```

我正在尝试像这样遍历数组：

```
int currentValue;
for (int i = 0; i < [arrayOfValues count]; i++)
{
    currentValue = [(NSNumber *)[arrayOfValues objectAtIndex:i] intValue];
    NSLog(@"currentValue: %@", currentValue); // EXE_BAD_ACCESS
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-01T03:54:12.047

您使用了错误的格式说明符。%@ 用于对象，但 int 不是对象。所以，你应该这样做：

```
int currentValue;
for (int i = 0; i < [arrayOfValues count]; i++)
{
    currentValue = [(NSNumber *)[arrayOfValues objectAtIndex:i] intValue];
    NSLog(@"currentValue: %d", currentValue); // EXE_BAD_ACCESS
} 
```

[文档中的](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Strings/Articles/formatSpecifiers.html)更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-07T16:27:20.320

在创建我想调用的枚举值的 NSArray 时，这对我有用（知道这是正确的解决方案很有用）我正在使用 Xcode 6.4。

```
int currentValue = (int)[(NSNumber *)[arrayOfValues objectAtIndex:i] integerValue]; 
```

sosborn 的回答会发出警告，因为仍然需要将 NSInteger 转换为 int。

ObjC 中的类型转换是我存在的祸根。我希望这可以帮助别人！

# php - 使用 PHP/JS 自动刷新 Highcharts

> ID：11752320
> 
> 赞同：1
> 
> 时间：2012-08-01T03:48:26.220
> 
> 标签：php, javascript, jquery, highcharts

我试图获得一个高图表以每分钟刷新一次新数据。到目前为止，我已经使用在标头上作为 javascript 输出的 php 创建了图表。

我在页面顶部有这个：

```
<?php
    //set the output header as JS
    Header("content-type: application/x-javascript");
    //output start of javascript chart
?>
   var chart;
   chart = new Highcharts.Chart({ 
```

然后一些PHP从数据库中获取数据，并以highcharts格式输出。

我现在在我的索引页面上有这个调用图表，它显示，然后破坏图表，并重新显示图表，但它似乎没有重新运行 php 代码：

```
<script>
$(document).ready(function(){
    $.ajaxSetup({
        cache: false,
    });
    $.get("api_dashchart.php?uID=<?php echo $userInfo_ID; ?>");
    var refreshId = setInterval(function(){
        if(chart) chart.destroy();
        $.get("api_dashchart.php?uID=<?php echo $userInfo_ID; ?>");
    }, 45000);
}); 
```

继续帮助非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:34:51.570

我认为您在这里混合了服务器和客户端代码，您的 PHP 代码**只会在服务器上执行一次，同时获取页面。**

```
window.setInterval(function(
    displaygraph();
}, 60000); 
```

不能更新数据，只会重新执行displaygraph()，但是这个方法里面的数据不是从服务器更新的，而是使用页面加载时获取的数据，需要使用AJAX，并做一个ajax请求获取更新的数据，然后使用它用新获取的数据重绘图表。尝试使用[Firebug](http://getfirebug.com/)调试您的 javascript 。
至于第一个加载问题，您可以使用显示图中的 if 语句轻松完成。

```
if(chart) chart.destroy(); 
```

把它们加起来，

图表.js

```
var chart;
function displaygraph() {
 $.getJSON("getjson.php", function(json) {
  if(chart) chart.destroy();
  //get data from json, and use in chart
  chart = new Highcharts.Chart({....});
});
setInterval(displaygraph, 60000); 
```

获取json.php

```
<?php
  $data = ...
  echo json_encode($data);
?> 
```

更多关于 $.getJSON @ [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)， $.ajax @ [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/) json-encoding in php @ [http://php .net/manual/en/function.json-encode.php](http://php.net/manual/en/function.json-encode.php)

# model-view-controller - 从控制器设置触发字段值

> ID：11752324
> 
> 赞同：0
> 
> 时间：2012-08-01T03:48:59.190
> 
> 标签：model-view-controller, extjs, extjs4

我尝试绑定通过触发字段单击显示的窗口网格中的数据。这是我的 triggerfield 表单：

```
Ext.define('ResApp.view.group.Detail', {
extend: 'Ext.window.Window',
alias:'widget.groupdetail',

floating: true,
hidden: false,
width: 450,
//height: 400,
resizeable: false,
title: 'Detail Group',
modal: true,

initComponent: function() {
    var me = this;

    Ext.applyIf(me, {

        ....other config...

        items: [
            {
                xtype: 'form',
                itemId: 'groupDetailForm',
                border: false,
                layout: {
                    type: 'auto'
                },
                bodyPadding: 10,
                preventHeader: true,
                title: 'My Form',
                items: [

                    ....other items...

                    {
                        xtype: 'triggerfield',
                        padding: '0 0 5 0',
                        width: 350,
                        fieldLabel: 'Nama Kontak',
                        name: 'namaJamaah',
                        itemId: 'namaLead',
                        triggerCls: ' x-form-search-trigger',
                        onTriggerClick: function(){
                            Ext.widget('listjamaahgroup').show();
                        }
                    },

                    ....other items...

                ]
            }
        ]
    });

    me.callParent(arguments);
}}); 
```

接下来，我的带有网格的窗口列出数据：

```
Ext.define('ResApp.view.group.ListJamaahGroup', {
extend: 'Ext.window.Window',
alias:'widget.listjamaahgroup',

height: 400,
width: 750,
title: 'Daftar Jamaah',
modal: true,
hidden: false,
floating: true,
resizeable: false,

initComponent: function() {
    var me = this;

    Ext.applyIf(me, {
        items : [
            {
                    xtype: 'gridpanel',
                    autoScroll: true,
                    border:false,
                    title: 'Daftar Anggota',
                    itemId: 'gridAnggota',
                    preventHeader: true,
                    forceFit: true,
                    flex: 1,
                    store: 'Jamaah',
                    allowDeselect : true,
                    viewConfig: {
                        autoScroll: true
                    },
                    dockedItems: [
                        {
                            xtype: 'toolbar',
                            dock: 'top',
                            cls:'border-bottom',
                            items: [
                                {
                                    xtype: 'button',
                                    text: 'Pilih',
                                    iconCls:'edit',
                                    action: 'selectJamaahGrp',
                                    itemId: 'selectJamaahGrp'
                                },
                                {
                                    xtype: 'button',
                                    text: 'Baru',
                                    iconCls:'add'
                                }
                            ]
                        }
                    ],
                    columns: [

                    ....Grid columns...

                    ]                            
            }
        ]

    });

    me.callParent(arguments);
}}); 
```

这是我的控制器：

```
Ext.define('ResApp.controller.GroupDetails', {
extend: 'Ext.app.Controller',
stores: [
    'Group', 'Jamaah'
],
models: [
  'Group', 'Jamaah'
],
views:[
    'group.Detail',
    'group.ListJamaahGroup'
],
init: function(){
    this.control({
        ...

        'button[action=selectJamaahGrp]': {
            click: this.selectJamaahGrp
        },

        ...
    });
},

... other functions ...

selectJamaahGrp: function(button, e, options) {
    //windowDetail.hide();

    var grid = button.up('grid');
    if (grid) {
        var windowDetail = Ext.widget('groupdetail');
        var form = windowDetail.down('form');

        var sm = grid.getSelectionModel();
        var rs = sm.getSelection();
        if (!rs.length) {
            Ext.Msg.alert('Info', 'Pilih salah satu');
            return;
        }

        var data = grid.getSelectionModel().getSelection()[0];
        //how to setValue to triggerfield from here
    }
    button.up('listjamaahgroup').destroy();
},
batalSelClick: function(button, e, options) {
    button.up('listjamaahgroup').destroy();
}
... other functions ...}) 
```

我的问题是，我不知道如何从我的控制器中设置触发器字段。或者还有其他方法可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:23:19.430

只需在您的控制器 () 中定义一个 ref `refs: [ { ref: 'trigger', selector: 'triggerfield' } ]`，然后执行`this.getTrigger().setValue()`.

# php - '对私有方法的致命错误调用'但方法受到保护

> ID：11752327
> 
> 赞同：3
> 
> 时间：2012-08-01T03:50:15.913
> 
> 标签：php, oop

第一次在 PHP 中扩展一个类，我收到一个致命错误，说该方法不是私有的。我确定这是基本的东西，但我研究过书籍和论坛，但我无法确定我做了什么来产生这个错误。非常感谢任何帮助。详情如下：

错误信息：

> > 致命错误：从第 726 行 /root/includes/classes/testprinter.php 中的上下文“testprinter”调用私有方法 testgiver::dbConnect()

下面代码中 testprinter 的第 726 行：

```
private function buildquestionarray()
{
  $query = "etc etc";
  **$conn = $this->dbConnect('read');
  $result = $conn->query($query);
  ... 
```

Testprinter 扩展了 testgiver。这是该类的扩展：

```
require_once('testgiver.php');

class testprinter extends testgiver
{... 
```

以及 testgiver 中方法的声明：

```
protected function dbConnect($userconnecttype)
{... 
```

再次感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T04:33:48.173

如前所述`Alexander Larikov`，您不能`protected methods`从类实例访问，不仅是`protected`方法，而且您也不`private`能从类实例访问方法。要从 a的实例访问 a 的`protected`方法，您在子类中声明 a ，然后从子类的公共方法调用 a 的方法，即`parent class``subclass``public method``protected method``parent class`

```
class testgiver{
    protected function dbConnect($userconnecttype)
    {
        echo "dbConnect called with the argument ".$userconnecttype ."!";
    }
}

class testprinter extends testgiver
{
    public function buildquestionarray() // public instead of private so you can call it from the class instance
    {
        $this->dbConnect('read');
   }
}

$tp=new testprinter();
$tp->buildquestionarray(); // output: dbConnect called with the argument read! 
```

[**演示。**](http://codepad.viper-7.com/EgmOzU)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:07:27.073

您不能从类实例访问受保护的方法。阅读[文件](http://php.net/protected)说`Members declared protected can be accessed only within the class itself and by inherited and parent classes`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-11T19:28:05.250

Alpha，写的很棒！

我觉得我几乎已经在我想要的地方得到了它，但是我得到了

```
Fatal Error, call to undefined method NameofClass::myFunction() in line 123456 
```

我在这里缺少什么吗？

我的原始类和扩展类都在同一个 .php 文件中，但对 myFunction 的调用发生在不同的文件中。这是不允许的吗？

**注意：**我会把它放在评论中，但系统不会让我在我的声誉达到 50 之前包含评论。

# integer - 以小端形式将值输出为 4 字节无符号整数

> ID：11752328
> 
> 赞同：1
> 
> 时间：2012-08-01T03:50:52.140
> 
> 标签：integer, unsigned

我正在尝试将值输出为 4 字节无符号整数（以小端形式）并且对某些事情感到困惑。

如果我想以这种形式输出数字 1，它是否显示为：

> 00000001 00000000 00000000 00000000

或者

> 10000000 00000000 00000000 00000000

同样，如果我想输出数字 256，它会采用以下形式：

> 11111111 00000001 00000000 00000000

我只需要澄清一下。我从互联网上的各个地方读到了一些相互矛盾的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:53:14.400

内存通常表示为一系列离散字节，因此谈论哪些位彼此相邻是没有意义的。这只是显示格式的问题。也就是说，在右侧显示 LSB 是传统的，因此在您的示例中它将是

```
00000001 00000000 00000000 00000000 
```

在十六进制中，这是您在检查二进制文件时通常使用的，您会得到

```
01 00 00 00 
```

此外，在您的第二个示例中，您意外地表示了 511，而不是 256。256 的正确位表示是

```
00000000 00000001 00000000 00000000 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T03:53:34.600

字节序会影响多字节字中的字节顺序，而不是字节本身中的位顺序。所以 1 是

```
00000001 00000000 00000000 00000000 
```

和 256 是

```
00000000 00000001 00000000 00000000 
```

# php - PHP MYSQL $行[$变量]

> ID：11752333
> 
> 赞同：3
> 
> 时间：2012-08-01T03:51:41.043
> 
> 标签：php, mysql, database, row, fetch

我正在尝试解决动态表创建和数据获取问题。我正在尝试使用以下代码获取数据：

```
 $myQuery = "SELECT ".$col_name." FROM ".$tabname." WHERE sampleid='".$sid."'";
    $result = mysql_query($myQuery);
    $row = mysql_fetch_array($result);
    echo "<br>".$row['$col_name']; 
```

但是，我无法取回任何数据。我检查了打印查询并在我的管理员的 php 中运行它，它可以按我的意愿工作。但我猜我猜数组中的变量可能不起作用。请帮助我解决同样的问题。谢谢。

整个循环看起来像这样：

```
$myQuery = "SELECT * FROM information_schema.columns WHERE table_name = '$tabname'";
$re = mysql_query($myQuery);

while($row = mysql_fetch_array ($re)){
         if(!empty ($row)){
                    $col_name = $row['COLUMN_NAME'];

          $myQuery = "SELECT ".$col_name." FROM ".$tabname." WHERE sampleid='".$sid."'";
                    echo "<br>".$myQuery;
                    $reqq = mysql_query($myQuery);
                    $roww = mysql_fetch_array($reqq);
                    echo "<br>".$roww[$col_name];

                    }
                } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T03:55:08.487

您正在获取一个数组，而不是一个[关联数组](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)。用这个：

```
echo "<br>".$row[0]; 
```

编辑：看了多一点，这可能不正确。您可以设置 fetch_array 以返回关联数组。

您不能通过单引号解析变量 '

```
echo $row['col_name'];  // manually typed string. 
```

或者

```
echo $row[$col_name]; 
```

或者

```
echo $row["$col_name"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T03:55:56.313

你试过了->

```
echo "<br>".$row[$col_name]; 
```

或者

```
 $myQuery = "SELECT ".$col_name." FROM ".$tabname." WHERE sampleid='".$sid."'";
    $result = mysql_query($myQuery);
    $row = mysql_fetch_assoc($result);
    echo "<br>".$row[$col_name]; 
```

因为就像@Fluffeh 所说的那样，它不是关联数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T03:54:45.377

您是否尝试过像这样循环遍历结果数组：

```
while($row = mysql_fetch_array($result)) {
echo $row['col_name'];
echo "<br />";
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T03:59:14.460

我会建议以下解决方案。给出参数`$col_name`，`AS Col_Name` 然后 $row['Col_Name'] 总是可以设置为参数，无论值是什么。

```
$myQuery = "SELECT ".$col_name." AS Col_Name FROM ".$tabname." WHERE sampleid='".$sid."'"; 
    $result = mysql_query($myQuery); 
    $row = mysql_fetch_array($result); 
    echo "<br>".$row['Col_Name']; 
```

# c# - CAN 强类型数据集与 SQL Server 2000 一起使用

> ID：11752337
> 
> 赞同：1
> 
> 时间：2012-08-01T03:53:02.150
> 
> 标签：c#, asp.net, sql-server-2005, sql-server-2000, strongly-typed-dataset

我用 SQL Server 2005 编写了一个强类型数据集 dll。我在数据集查询中使用了名称参数。

我可以只将此 dll 的连接字符串指向 SQL Server 2000 而不进行任何修改。

信息：网站：Asp.net（C# 3.5 LinQ To DataSet）数据集：强类型数据集（使用 SQL Server 2005 和命名参数开发）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:11:57.857

我认为是的，这是一个证明：

[http://weblogs.asp.net/scottgu/archive/2006/01/15/Building-a-DAL-using-Strongly-Typed-TableAdapters-and-DataTables-in-VS-2005-and-ASP.NET- 2.0.aspx](http://weblogs.asp.net/scottgu/archive/2006/01/15/Building-a-DAL-using-Strongly-Typed-TableAdapters-and-DataTables-in-VS-2005-and-ASP.NET-2.0.aspx)

# .net - Firefox 13.0.1 无法正确确定 docx 文件的内容类型

> ID：11752338
> 
> 赞同：0
> 
> 时间：2012-08-01T03:53:07.360
> 
> 标签：.net, file-upload, cross-browser, mime-types

我的 MVC-3 应用程序具有文件上传功能。文件内容和内容类型保存在数据库中，以便在尝试下载时，可以重新加密正确的文件。

一切正常，除了如果浏览器是 Firefox 13（我有 13.0.1），`docx`文件的内容类型被检测为`text/plain`而不是`application/vnd.openxmlformats-officedocument.wordprocessingml.document`.

我已经检查过它在 IE 中运行良好。现在我升级到 Firefox 14.0.1。它的工作也很好。

现在的问题是，如何确定一个`HttpPostedFileBase`独立于浏览器的内容类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:11:50.847

### 原始答案

据我了解，MIME 类型并不是最可靠的东西。

就个人而言，我会完全忽略浏览器提供的内容类型，并使用基于`FileName`扩展的服务器映射（也不精确，但至少类似于操作系统本身的体验）。

毕竟，客户端几乎可以将任何内容作为内容类型发送给您（取决于浏览器，可能还有系统）。

### 将扩展映射到内容类型

一种选择（由问题作者使用）是使用以下条目`HKEY_CLASSES_ROOT`：

```
var key = Registry.ClassesRoot.OpenSubKey(extension, false);
var value = key != null ? key.GetValue("Content Type", null) : null;
var mime = value != null ? value.ToString() : string.Empty; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:16:00.933

The web development server may be your issue. You might want to consider testing the solution on IIS and add the mime type to the configuration. The alternative is to override the HTTP response header in the MVC application based off the file extension.

# javascript - Chrome 扩展：内容脚本和 background.html 之间的通信

> ID：11752341
> 
> 赞同：17
> 
> 时间：2012-08-01T03:53:21.840
> 
> 标签：javascript, google-chrome-extension, content-script

我是 Chrome 扩展程序的新手。我正在尝试在内容脚本和*background.html*页面之间进行通信。*background.html*向内容脚本发送请求“ hello *”*，内容脚本应以“ *hello background* ”警报响应。但它只是没有发生。我的*background.html*代码是：

```
function testRequest() {        
    chrome.tabs.getSelected(null, function(tab) {
        chrome.tabs.sendRequest(tab.id, {greeting: "hello"});
    });    
} 
```

*content.js*代码：

```
chrome.extension.onMessage.addListener(
    function(request, sender, sendResponse) {
        if (request.greeting == "hello")
        alert("hello background");
    }
); 
```

*popup.html*代码：

```
<!doctype html>
<html>
    <head></head>
    <body>
        <form>
            <input type="button" value="sendMessage" onclick="testRequest()" />
        </form>    
    </body>
</html> 
```

*清单.json*：

```
{
    "browser_action": {
        "default_icon": "icon.png",
        "popup": "popup.html"
    },
    "background": {
        "page": "background.html"
    },
    "permissions": [
        "tabs",
        "http://*/*",
        "https://*/*",
        "notifications",
        "contextMenus"
    ],
    "content_scripts": [
        {
            "matches": ["http://*/*","https://*/*"],
            "js": ["content.js"]
        }
    ],
    "name": "FirstExtension",
    "version": "1.0"
} 
```

请帮忙！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-01T09:17:47.693

`sendRequest`/在 Chrome 20中被/`onRequest`替换。不仅仅是 的别名，它是一个不同的 API。`sendMessage``onMessage``*Message``*Request`

如果你想支持 Chrome <20（许多 Ubuntu 用户仍然使用 Chromium 18，因为 PPA 没有更新），请`onRequest`使用`sendRequest`. 否则，使用`*Message`方法。

* * *

另一个问题是你的函数位于后台页面，并且调用是在弹出窗口中进行的。这些是不同的范围，如果您想从弹出窗口调用后台页面方法，请使用[`chrome.extension.getBackgroundPage()`](http://code.google.com/chrome/extensions/extension.html#method-getBackgroundPage)：

```
chrome.extension.getBackgroundPage().testRequest(); 
```

最后说明：您正在使用清单版本 1 和内联事件处理程序。这种做法已被弃用，有关详细信息，请参阅[http://code.google.com/chrome/extensions/manifestVersion.html](http://code.google.com/chrome/extensions/manifestVersion.html)。

# android - Android Facebook SDK 隐藏登录视图

> ID：11752346
> 
> 赞同：2
> 
> 时间：2012-08-01T03:53:55.063
> 
> 标签：android, facebook-android-sdk

我正在构建一个使用 facebook android sdk 和 sso 功能的应用程序。每次启动我的应用程序时，它都会在通过 sso 通过现有 facebook 应用程序登录时短暂显示一个 facebook 窗口。有没有办法隐藏这个屏幕并确保我的活动在检查 facebook 凭据和会话等时保持在最前面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:08:39.400

对于第一个是未登录的用户，它要求它弹出登录对话框。但是一旦用户登录并且您尝试发送任何 facebook 请求，它就会检查会话，如果它是有效的，那么它将不会显示对话框。

当您第一次登录时，将过期和访问令牌存储到您的共享首选项中，并在第二次传递/设置这些（过期和访问令牌到 facebook 对象）并检查是否有效会话。

这是简短的代码；存储您访问令牌并在下面的方法 facebook.authorize 中过期：onComplete 侦听器：

例如

```
Editor editor = mPrefs.edit();
                        editor.putString("access_token",
                                facebook.getAccessToken());
                        editor.putLong("access_expires",
                                facebook.getAccessExpires());
                        editor.commit(); 
```

下次通过将这些值传递给 facebook 对象并检查其是否有效？

```
facebook = new Facebook(MyConstant.Fb_APPID);
            String access_token = preferences.getString("access_token",
                    null);
            long expires = preferences.getLong("access_expires", 0);
            if (access_token != null) {
                facebook.setAccessToken(access_token);
            }
            if (expires != 0) {
                facebook.setAccessExpires(expires);
            }
if (facebook.isSessionValid()){
                // do your work here
            } 
```

希望对你有用....

# php - 在php中使用准备好的语句以及过程的正确方法

> ID：11752347
> 
> 赞同：2
> 
> 时间：2012-08-01T03:54:07.050
> 
> 标签：php, mysql

**程序**

```
    创建过程 prSample1()
      开始    
        选择名称
          来自学生名单；
      结尾;

```

**PHP 代码**

```

     $objMain = 新的 Main();  
      $objMain->getStudentsName();

      主类
      {
        函数 __construct()
        {
          $Conn = new mysqli('localhost', 'root', '', 'sampleDB');              
        }

        函数 getStudentsName()
        {
           $strSQL = "调用 prSample1()";
           $stmt = $Conn->prepare($strSQL);

           $stmt->执行（）；
           $stmt->bind_result($Name);   

           while($stmt->fetch())
            $arrNames = array('Name'=>$Name);
        }

```

我没有收到任何错误或警告。

在获取最后一个大括号结束之前的数组中的值后，我想知道以下语句对 php 代码的影响。

```
    1.$stmt->关闭()
    2.$stmt->reset()

```

还让我知道在哪里使用以下语句以及如何使用它们

```
    1.$stmt->free_result()
    2.$stmt->store_result()
    3.$stmt->bind_result()

```

如果我在编码标准和使用准备好的语句的正确方法方面有任何错误，请纠正我

# php - 访问循环外的数据库值数组

> ID：11752351
> 
> 赞同：0
> 
> 时间：2012-08-01T03:54:50.840
> 
> 标签：php, mysql, while-loop

我可以遍历一个表，抓取行并在循环中回显它们。如何在循环外使用这些数据？

```
$query=("SELECT * FROM poplinks");
$result = mysql_query($query);

while($row = mysql_fetch_array($result)){
    $popid = $row['popid'];
    $popname = $row['popname'];
    $popurl = $row['popurl'];

echo $popurl;
} 
```

上面的 echo 语句回显了 db 中的 10 个 popurl 值，但如果我尝试在循环之外回显 $popurl ，我只会得到最后一个值。我想我想要一个存储在变量中的所有值的数组。

更新：数据将进入类似于以下 HTML 的内容：（请注意第 3 行的“echo $popurl”。这个想法是让 Twitter Bootstrap Typeahead 函数从数据库中读取。目前通过将 [] 附加到每个循环内的变量，如果我包含索引，我可以让下面的代码工作，但我不能在那里得到整行。

```
<div class="well">
<form action="" method="post" onsubmit="proceed();">
<input type="text" class="span3" name="content" value="<?php echo $liLink->sContent; ?>" data-provide="typeahead" data-items="4" data-source='["Alabama", "<?php echo $popurl ?>" ,"Alaska","Arizona","Arkansas"]'/>
<input type="submit" name="submit" value="save" />
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T04:00:46.370

试试这个

```
$query=("SELECT * FROM poplinks");
$result = mysql_query($query);

$myArray='';
while($row = mysql_fetch_array($result)){
    $popid = $row['popid'];
    $popname = $row['popname'];
    $popurl = $row['popurl'];

$myArray[] = $popurl;
}

echo "<pre>";
print_r($myArray); 
```

# django - request.user 不等于通过 url 传递的名称

> ID：11752354
> 
> 赞同：0
> 
> 时间：2012-08-01T03:55:11.140
> 
> 标签：django

我正在尝试限制页面，以便只有页面与 URL 匹配的人才能访问它：

**网址配置**

```
url(r'^u/(?P<name>[-\w\d_]+)/edit/$', 'useraccounts.views.user_profile_edit') 
```

**视图.py**

```
def user_profile_edit(request, name):
    if request.user.is_authenticated() and request.user == name:
        username = User.objects.get(username=name)
        return render(request, 'useredit.html', {'user': username}) 
```

打印出内容`print request.user`并`print name`在页面加载到控制台时显示两者在我的情况下是相同的（两者都是`root`）。但是，`print bool(request.user == name)`返回`False`，因此视图没有进展。

发生了什么，如果适用，有没有更优雅的方法来做这件事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T03:59:02.000

你做错了。`request.user`是一个对象，`name`而是一个字符串。

重写你的条件如下：

```
if request.user.is_authenticated() and request.user.username == name: 
```

# java - ruby 的 rack 或 python 的 wsgi for Java 的等价物是什么？

> ID：11752355
> 
> 赞同：10
> 
> 时间：2012-08-01T03:55:13.287
> 
> 标签：java, python, ruby, wsgi

ruby 的 rack 或 python 的 wsgi for Java 的等价物是什么？还有一个路由库。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T04:03:20.340

来自 Python 标准 PEP 333：

> 相比之下，尽管 Java 有同样多的 Web 应用程序框架可用，但[Java 的“servlet”API](http://en.wikipedia.org/wiki/Java_Servlet)使得使用任何 Java Web 应用程序框架编写的应用程序可以在任何支持 servlet API 的 Web 服务器上运行。

[http://www.python.org/dev/peps/pep-0333/#rationale-and-goals](http://www.python.org/dev/peps/pep-0333/#rationale-and-goals)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-31T19:29:39.510

### 简短的回答

[Servlets](https://docs.oracle.com/javaee/7/tutorial/servlets.htm#BNAFD)相当于 ruby​​ 的 rack 或 python 的 wsgi 在 Java 中。

### 深入解答

在 Python 中，WSGI（Web 服务器网关接口）位于 Python Web 框架下，如 Django、Flask、Bottle。

Servlet 之于 Java 就像 WSGI 之于 Python — Web 服务器的通用规范，它允许 Web 服务器和应用程序框架基于通用 API 相互交互。

Java Web 框架是围绕[前端控制器模式](https://www.geeksforgeeks.org/front-controller-design-pattern/)设计的，其中中央 Servlet 是传入请求的焦点。

Servlet 组件通常完全集成在 Web 框架本身内部，因此开发人员只需要与更高级别的组件交互 - 例如 Spring MVC 框架中的[DispatcherServlet](https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc-servlet)。

关于 JAVA 中的路由库：
如果您使用的是[Spring 框架](https://docs.spring.io/spring/docs/current/spring-framework-reference/index.html)，则可以使用[Spring MVC模块完成](https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html)*路由*，该模块是一个 Web 应用程序框架，具有比简单路由更多的功能。

如果您正在使用[J2EE](https://docs.oracle.com/javaee/7/index.html) ，那么您可以使用[Jersey](https://eclipse-ee4j.github.io/jersey/)，它是[JAX-RS Spec](https://download.oracle.com/otn-pub/jcp/jaxrs-2_0-fr-eval-spec/jsr339-jaxrs-2.0-final-spec.pdf?AuthParam=1572540124_dec171d6368a129edc0060fd4b752ea1)的一个实现。

# sql - 数据库设计。一对多额外属性

> ID：11752357
> 
> 赞同：0
> 
> 时间：2012-08-01T03:55:47.920
> 
> 标签：sql, normalization, one-to-many, foreign-key-relationship

假设我们有一个`Player`表和一个`Team`表以及它们之间的一对多关系（a`Player`是 one `Team`only 的成员或 none 的成员）

所以我在表中有一个可以为空的`team_id`字段`Player`，引用一个`Team`表。

但是现在我必须存储有关球员在球队中的位置的额外信息。像：

*   `isCaptain`
*   `number`
*   ETC...

实现这一点的正确（正常）方法是什么？

我最好的想法是一张额外的桌子：

`Player`一对一 (NULL)`PlayerTeam`多对一 (非 NULL)`Team`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T04:01:25.983

我建议您自己建议制作一张新桌子：

```
id | player_id | team_id | role_id | number 
```

然后使 player_id 唯一，并且 team_id 不为空。

这将保持玩家表清洁并且您的数据库正常化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:01:35.387

如果玩家只能拥有一支球队，您可以/应该将该信息直接存储在`Player`.

另一方面，如果您计划存储历史信息，`Player`-`Team`可能会变成多对多，在这种情况下，`PlayerTeam`连接表将是放置该信息的正确位置。

# ios - 从我的应用程序中隐藏其他应用程序：目标 c

> ID：11752362
> 
> 赞同：0
> 
> 时间：2012-08-01T03:57:21.070
> 
> 标签：ios, objective-c, hide

我有一个下载 pdf 文档的应用程序，我使用 UIDocumentInteractionController 为用户提供在其他应用程序中打开它们的选项。但是，我有一个应用程序，我不希望用户能够在“打开方式”列表中查看。该应用程序称为 NotCoolApp。有没有办法列出我不希望我的应用程序看到的应用程序的名称，也许是 plist？

# xml - 如何将这种类型的 Excel XLS 工作表转换为正确的 XML？

> ID：11752365
> 
> 赞同：1
> 
> 时间：2012-08-01T03:57:46.430
> 
> 标签：xml, excel, xsd, schema

我正在尝试设置用于 Excel XML 映射的架构文件。我想要完成的是获取电子表格中的每一行，并让它像这样输出 XML：

Excel 行：

```
XML_Name   |    Initiative    |    HitPoints
ad_wasp         5                  42
hob_goblin      7                  22 
```

所需的 XML 输出：

```
<entities>
 <ad_wasp>
     <initiative>5</initiative>
     <hitpoints>42</hitpoints>
 </ad_wasp>
 <hob_gob>
     <initiative>7</initiative>
     <hitpoints>22</hitpoints>
 </hob_gob>
</entities> 
```

换句话说 - 我想将我的 Excel 工作表中的第一行作为主要元素标签，然后在其下，将以下行作为子元素放入。我希望它采用这种格式，因为我正在使用的程序（Fantasy Grounds 2）接受 XML 格式的模块化插件，并且需要像这样唯一命名的元素，包含子元素。

请记住——我对 XML 完全陌生。也许我不能这样做。在过去的 3 个小时里，我能够得到的是……

1.  在 Excel 中，单击“开发人员”选项卡。
2.  定义 XML 映射源
3.  将其指向 XSD

我已经使用 XMLSpy 创建了一个架构文件，如下所示 - 但是，我遇到的问题是下面的架构将所有内容都放在这样的标签中：

```
<xml_tag>
    <Name>aasimar</Name>
    <XP>Aasimar</XP>
    <CR>Aasimar</CR>
    <Init>Aasimar</Init>
</xml_tag> 
```

有没有办法做我想做的事？如果我尝试将“type="xs:string"”声明放入“XML_Tag”元素中，则会出现错误（元素声明“xml_tag”的“type”属性和匿名类型定义是互斥的。）但是- 我不知道如何使元素成为“动态变量”（可能使用错误的行话），而不是相同的静态标签。

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified" attributeFormDefault="unqualified">
    <xs:element name="Entities">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="xml_tag" form="unqualified" nillable="true" minOccurs="0" maxOccurs="unbounded">
                    <xs:complexType>
                        <xs:sequence minOccurs="0">
                            <xs:element name="Name" type="xs:string" form="unqualified" nillable="true" minOccurs="0"/>
                            <xs:element name="XP" type="xs:integer" form="unqualified" nillable="true" minOccurs="0"/>
                            <xs:element name="CR" type="xs:integer" form="unqualified" nillable="true" minOccurs="0"/>
                            <xs:element name="Init" type="xs:integer" form="unqualified" nillable="true" minOccurs="0"/>
                        </xs:sequence>
                    </xs:complexType>
                </xs:element>
            </xs:sequence>
        </xs:complexType>
    </xs:element>
</xs:schema> 
```

# php - PHP apc_store 然后 apc_delete 然后 apc_store 返回失败

> ID：11752366
> 
> 赞同：3
> 
> 时间：2012-08-01T03:57:58.543
> 
> 标签：php, apc

我是 php 新手并使用 APC 框架。我正在尝试为使用 APC 的类编写一些单元测试，但我在尝试删除然后在 APC 中再次设置一些键值时遇到了一些问题。我的问题可以归结为一小部分代码没有按我预期的方式工作：

```
$success = apc_store("helloWorld", 2, 0);  // true
$success1 = apc_delete("helloWorld");      // true
$success2 = apc_store("helloWorld", 3, 0); // false 
```

另外做一个 fetch 调用`"helloWorld"`会返回`NULL`，我得到警告：

> [apc-warning] 避免了键“helloWorld”的潜在缓存冲击

此外，我尝试将其添加到我的 php.ini 文件中：

```
apc.enable_cli=ON 
```

我还尝试通过将其添加到我的 php.ini 文件中来将内存限制从默认的 32M 增加到 64M：

```
apc.shm_size = 64M 
```

我在[Why would apc_store() return false?](https://stackoverflow.com/questions/1670034/why-would-apc-store-return-false) ，但没有一个建议对我有用。

我该如何解决这个问题，以便`true`返回预期的三个 s？为什么他们不被退回？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T09:53:27.810

您的示例代码在 PHP 5.3.12 和 apc 3.1.9 中非常适合我（true/true/true），所以也许您应该尝试更高版本？

# c# - Telerik MVC 树视图操作

> ID：11752369
> 
> 赞同：1
> 
> 时间：2012-08-01T03:58:17.877
> 
> 标签：c#, javascript, treeview, telerik, telerik-mvc

```
<%:
    Html.Telerik().TreeView()
    .Name("ZebTree")
    .ExpandAll(false)
    .ClientEvents(events => events.OnSelect("TreeView_onSelect"))
    .BindTo(Model , map =>
            {
                map.For<TreeViewBind.Models.Category>(bind => bind.ItemDataBound((item, category) => { item.Text = category.CategoryName; }).Children(category => category.Products));
                map.For<TreeViewBind.Models.Product>(bind => bind.ItemDataBound((item, product) => { item.Text = product.ProductName;}));
            }        
    )
%> 
```

以上是telerik mvc中生成树的代码。我想通过选择节点来执行操作。当有人单击特定节点时，我希望它导航到关于页面并将该节点的文本作为参数传递给关于页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:48:30.163

OnSelect 原型：

```
function TreeView_onSelect(e) {

} 
```

e 只有 1 个元素，“item”，它是被选中的 LI 元素。所以，一个例子是：

```
function TreeView_onSelect(e) {
    alert($(e.item).text());
} 
```

见这里：[http ://www.telerik.com/help/aspnet-mvc/telerik-ui-components-treeview-client-api-and-events.html#ClientEvents](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-treeview-client-api-and-events.html#ClientEvents)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T21:41:11.180

各位，

实际上有一个方法叫做 Action 你可以用它来指定你希望你的项目指向的动作。您可能看不到它，因为智能很混乱。你可以像这样更具体一点：

```
.BindTo(Model,(NavigationBindingFactory<TreeViewItem> mappings) =>
    {
        mappings.For<Category>(binding => binding
                .ItemDataBound((item, category) =>
                {
                    item.Action("Test", "Home", new{text=category.CategoryName});//here you can assign the action method , the last parameter is the route values
                    item.Text = category.CategoryName;
                })
     } 
```

我希望这就是你要找的。

# ios - 暂停播放时 MPNowPlayingInfoCenter 没有正确反应

> ID：11752370
> 
> 赞同：45
> 
> 时间：2012-08-01T03:58:23.177
> 
> 标签：ios, avplayer, airplay, mpnowplayinginfocenter

我试图让 MPNowPlayingInfoCenter 在暂停播放时正常工作。（我有一个使用 AVPlayer 进行播放的流媒体音乐应用程序，我正在通过 Airplay 在我的 Apple TV 中播放。）除了暂停之外的所有内容似乎都正确反映在 Apple TV UI 中。我正在像这样初始化它：

```
MPNowPlayingInfoCenter *center = [MPNowPlayingInfoCenter defaultCenter];
NSDictionary *songInfo = @{
    MPMediaItemPropertyTitle: title,
    MPMediaItemPropertyArtist: artist
};
center.nowPlayingInfo = songInfo; 
```

由于我正在流式传输，因此在开始播放时我没有持续时间信息。当我从流中获得“就绪”信号时，我会更新在 Apple TV 上正确显示的持续时间：

```
MPNowPlayingInfoCenter *center = [MPNowPlayingInfoCenter defaultCenter];
NSMutableDictionary *playingInfo = [NSMutableDictionary dictionaryWithDictionary:center.nowPlayingInfo];
[playingInfo setObject:[NSNumber numberWithFloat:length] forKey:MPMediaItemPropertyPlaybackDuration];
center.nowPlayingInfo = playingInfo; 
```

当用户寻找曲目时，我也可以使用这种技术进行寻找：

```
[playingInfo setObject:[NSNumber numberWithFloat:length * targetProgress] forKey:MPNowPlayingInfoPropertyElapsedPlaybackTime]; 
```

我不知道的一件事是，如何暂停 Apple TV 上的播放头。当用户在我的 UI 中点击暂停时，我正在尝试执行以下操作：

```
MPNowPlayingInfoCenter *center = [MPNowPlayingInfoCenter defaultCenter];
NSMutableDictionary *playingInfo = [NSMutableDictionary dictionaryWithDictionary:center.nowPlayingInfo];        
[playingInfo setObject:[NSNumber numberWithFloat:0.0f] forKey:MPNowPlayingInfoPropertyPlaybackRate];            
center.nowPlayingInfo = playingInfo; 
```

这不是暂停，而是将播放头寻回零并继续前进。

如何让播放头在 Apple TV UI 中正确暂停？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-02-11T01:12:56.607

我有办法！仅设置 MPMediaItemPropertyPlaybackDuration

1 - 开始轨道时，将属性设置为轨道的总持续时间：

```
MPNowPlayingInfoCenter *center = [MPNowPlayingInfoCenter defaultCenter];
NSDictionary *songInfo = @{
    MPMediaItemPropertyTitle: title,
    MPMediaItemPropertyArtist: artist
    MPMediaItemPropertyPlaybackDuration : [NSNumber numberWithFloat:length]
};
center.nowPlayingInfo = songInfo; 
```

2 - 当你暂停曲目时......什么都不做。

3 - 播放曲目时，使用 currentTrackTime 设置属性：

```
MPNowPlayingInfoCenter *center = [MPNowPlayingInfoCenter defaultCenter];
NSMutableDictionary *playingInfo = [NSMutableDictionary dictionaryWithDictionary:center.nowPlayingInfo];        
[playingInfo setObject:[NSNumber numberWithFloat:player.currentTrackTime] forKey:MPNowPlayingInfoPropertyElapsedPlaybackTime];            
center.nowPlayingInfo = playingInfo; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-30T13:57:16.243

在这里您搜索的内容非常好，将其添加到您的类中：

```
- (void)remoteControlReceivedWithEvent: (UIEvent *) receivedEvent {

    if (receivedEvent.type == UIEventTypeRemoteControl) {

        switch (receivedEvent.subtype) {

            case UIEventSubtypeRemoteControlTogglePlayPause:[self playPause:nil];

                break;

            default: break;
        }
    }
} 
```

您可以通过添加其他 CASE 代码来添加向前或向后的功能，如下所示：

```
case UIEventSubtypeRemoteControlBeginSeekingBackward:[self yourBackward:nil];
                break; 
```

要调用播放暂停，您需要创建如下操作：

```
- (IBAction)playPause:(id)sender {

    if (yourPlayer.rate == 1.0){

        [yourPlayer pause];
    } else if (yourPlayer.rate == 0.0) {

        [yourPlayer play];
    }
} 
```

重要提示：您添加的任何情况都需要 IBAction

希望这对你有帮助

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-10-01T10:30:40.140

```
MPNowPlayingInfoCenter *center = [MPNowPlayingInfoCenter defaultCenter];
NSDictionary *songInfo = @{
    MPMediaItemPropertyTitle: title,
    MPMediaItemPropertyArtist: artist
}; 
```

像这样的电话

```
center setnowPlayingInfo = songInfo; 
```

# java - JPype 头痛

> ID：11752371
> 
> 赞同：2
> 
> 时间：2012-08-01T03:58:29.933
> 
> 标签：java, python, jpype

我找到了一些关于如何将用户构建的 .class 和 .jar 文件导入 JPype 的说明，但我似乎在让任何工作都正常工作时遇到了很多麻烦。

什么有效：我可以导入标准的 java 东西并打印 HELLO WORLD 等。

我尝试过的一些方法：

我尝试将`-Djava.class.path`包含相关类文件的 jar 的路径添加到包含（几个文件夹下）相关 .class 文件以及“-Djava.ext.dirs”的目录结构中。我已经重新编译并重新安装了不同的 JVM 位置。我试图实例化的类是外部的、公共的，并且有一个公共构造函数。

我在 OSX 10.6 上使用 Python 2.6.1。

我当前的测试文件： from jpype import *

```
startJVM(getDefaultJVMPath(), '-Djava.class.path=/Users/gestalt/Documents/msmexplorer_git/msmexplorer/MSMExplorer/build/classes')
java.lang.System.out.println("hello world")
msmexplorer = JPackage('org.joofee.meh.msmexplorer')
T = msmexplorer.MSMExplorer()
shutdownJVM() 
```

如果我使用 JClass，我总是会从 JPype 获得 ClassNotFound 异常；如果我使用 JPackage，我会收到 Package not callable 错误。基本上，JPype 找不到我的东西。

非常感谢！

编辑（可能有助于调试的东西......）：有没有一种简单的方法来打印哪些第三方 java 类可用/导入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T07:59:29.950

[此链接](http://hustleplay.wordpress.com/2010/02/18/jpype-tutorial/)中引用了包不可调用错误）似乎您需要确保可以从工作目录访问 java 类文件。我不确定 jvm 类路径是如何发挥作用的，我原以为你是如何做到的。

您还可以尝试加载 org 包，然后通过该包获取其他包，如我共享的链接所示：

msmexplorer = JPackage('org').joofee.meh.msmexplorer T = msmexplorer.MSMExplorer()

# c - 在返回函数之前释放分配的内存

> ID：11752380
> 
> 赞同：15
> 
> 时间：2012-08-01T04:00:12.410
> 
> 标签：c, pointers, malloc, free

我正在尝试在函数中使用*malloc*返回一个数组：

```
char* queueBulkDequeue(queueADT queue, unsigned int size)
{
    unsigned int i;
    char* pElements=(char*)malloc(size * sizeof(char));
    for (i=0; i<size; i++)
    {
        *(pElements+i) = queueDequeue(queue);
    }
    return pElements;
} 
```

问题是我需要*释放*它，因为我的 MCU 的堆大小是有限的。但是我想返回它，所以我不能在函数中释放它，对吧？我可以在函数之外释放分配的内存（我调用函数的地方）吗？有没有这方面的最佳实践？先感谢您！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T04:04:39.317

1）是的，您可以在函数外释放（）分配的内存

2）不，你不能在函数内部释放它并让数据在函数外部传递，所以你必须在这里做1）

3）如果您担心内存不足，则需要*始终*检查内存分配是否失败，而您在此处未执行此操作，则可能会导致段错误

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-01T04:37:35.840

由于 malloc() 分配的内存是在堆上而不是在堆栈上，所以无论你在哪个函数中都可以访问它。如果你想传递 malloc() 的内存，除了释放你别无选择它来自调用者。（在引用计数方面，这就是所谓的所有权转移。）

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-01T04:29:56.710

当然，只要您返回它，您就可以释放在该函数之外的函数中分配的内存。

但是，另一种方法是修改您的函数，如下所示，调用者仅分配和释放内存。这将符合分配内存的函数负责释放内存的概念。

```
void queueBulkDequeue(queueADT queue, char *pElements, unsigned int size) 
{     
   unsigned int i;     
   for (i=0; i<size; i++)     
   {         
      *(pElements+i) = queueDequeue(queue);     
   }     
   return; 
} 
```

//在调用者中

```
char *pElements = malloc(size * sizeof(char));
queueBulkDequeue(queue, pElements, size);
//Use pElements
free(pElements); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-01T04:04:30.660

是的，您可以释放在函数外调用的函数中分配的内存；这正是您在这种情况下需要做的。

替代方法包括将缓冲区及其长度传递给函数，并将实际长度返回给调用者，方法就是这样[`fgets`](http://www.cplusplus.com/reference/clibrary/cstdio/fgets/)做的。这可能不是最好的选择，因为调用者需要循环调用你的函数。

# android - Android资源notlong / long标识符不起作用

> ID：11752381
> 
> 赞同：11
> 
> 时间：2012-08-01T04:00:38.990
> 
> 标签：android, screen, android-screen

目前我有以下资源文件夹：
1\. layout-sw600dp
2\. layout-sw600dp-notlong

这个想法是我们有 3 种类型的设备，设备应该相应地使用正确文件夹中的资源。这些设备是：
1\. 三星 Galaxy Tab 10.1，1280 X 800 mdpi。16/10
2\. 华硕变压器 TFT 101, 1280 X 800 mdpi。16/10。
3\. 通用平板电脑，800 X 600 ldpi。4/3。

问题是所有 3 台设备都使用来自 layout-sw600dp-notlong 的资源。据我了解，4/3 被归类为 -notlong 设备。

我的标识符使用有什么问题吗？还是报告了标识符的错误？

预先感谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-07-29T23:30:51.380

根据源代码。(framework/base/core/java/android/content/res/Configuration.java)

```
 // Is this a long screen?
        if (((longSizeDp*3)/5) >= (shortSizeDp-1)) {
            // Anything wider than WVGA (5:3) is considering to be long.
            screenLayoutLong = true;
        } else {
            screenLayoutLong = false;
        } 
```

因此，如果宽高比大于 3:5（或 1.667），则会被视为长屏。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-01T22:07:25.113

“notlong”标识符适用于纵横比与基线设备相似的设备（请参阅[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)）。虽然关于什么是基准设备的文档很少，但 Android 设备的典型分辨率为 1.5~1.6。所以你看到的是正确的。

虽然对于比基线比率更长的设备有一个“长”标识符，但您似乎无法为更短的设备（例如 800x600）强制使用资源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T04:25:27.620

你读过这个文档吗？ [http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)

# c++ - WinDbg 分析 minidump (!analyze -v)，那么什么是 NULL_CLASS_PTR_DEREFERENCE、INVALID_POINTER_READ...等？

> ID：11752384
> 
> 赞同：4
> 
> 时间：2012-08-01T04:01:24.127
> 
> 标签：c++, debugging, windbg

我在 minidump 文件上运行 WinDbg 命令`!analyze -v`，WinDbg 给出`PRIMARY_PROBLEM_CLASS`了`NULL_CLASS_PTR_DEREFERENCE`. 其他一些小型转储文件给出了`INVALID_POINTER_READ`. 那么它们是什么意思呢？

我试图用谷歌搜索定义，但找不到任何官方或详细的文件。应该有这些问题类 ID 的列表，但没有，很奇怪。

那么，有没有人知道这些 ID 定义的任何文档？
或者任何人都可以解释这些ID？

谢谢！

PS我将在下面对自己进行一些解释：1
.：指针为NULL。 2\. : 读取一个已经被-ed 的指针。 虽然不确定这些理解......`NULL_CLASS_PTR_DEREFERENCE``this`
`INVALID_POINTER_READ``delete`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T19:54:05.940

基本上，应用程序因内存访问冲突而崩溃。以下链接将为您提供更多信息：

为什么软件崩溃 #1 – 访问冲突 [链接](http://blogs.msdn.com/b/chappell/archive/2005/01/12/351856.aspx)

您可以通过查看崩溃调用堆栈来检索有关崩溃的更多信息。通常，这些信息会导致崩溃的根本原因。

# maven - 如何使用 maven 获取 OAuth 的 java 客户端库？

> ID：11752386
> 
> 赞同：10
> 
> 时间：2012-08-01T04:01:30.957
> 
> 标签：maven, oauth

我正在尝试在此处遵循本指南[http://www.ibm.com/developerworks/web/library/wa-oauthsupport/index.html](http://www.ibm.com/developerworks/web/library/wa-oauthsupport/index.html)它提供了有关如何使用 OAuth 和 HTTPClient 4 提供的 OAuth 客户端库的信息验证您的连接。我正在开发 Java Swing 客户端，而不是 OAuth 提供者。

OAuth 在此页面[http://oauth.net/code/上提供了一个客户端库](http://oauth.net/code/)

我说的是标有“Java 库和示例由 John Kristian、Praveen Alavilli 和 Dirk Ba​​lfanz 贡献”的那个。它指向一个 SVN 存储库[http://oauth.googlecode.com/svn/code/java/core/](http://oauth.googlecode.com/svn/code/java/core/)

我不明白如何将此库合并到我的 Eclipse 项目中。我希望能够添加一个 Maven 依赖项，因为它非常干净并且运行良好。我没有看到现成的坐标，当我查看[http://oauth.googlecode.com/svn/code/java/pom.xml](http://oauth.googlecode.com/svn/code/java/pom.xml)时，我看到了以下坐标，但是当我运行 Maven 构建时它们不起作用使用坐标，我在 Eclipse 的集成 Maven 3 pom.xml 管理器中收到“缺少工件 net.oauth:oauth-parent:jar:20100601”错误。我认为 Mavenizing 项目的全部意义在于，您可以使用它的坐标将其拉入。

```
<dependency>
    <groupId>net.oauth</groupId>
    <artifactId>oauth-parent</artifactId>
    <version>20100601</version>
    <packaging>pom</packaging>
</dependency> 
```

在窥探 maven 存储库后，我尝试了以下依赖项，但它没有我需要的所有类/接口/等。

```
<dependency>
    <groupId>net.oauth.core</groupId>
    <artifactId>oauth</artifactId>
    <version>20100527</version>
</dependency> 
```

这是合并这个项目的错误方式吗？它不是以一种易于分享的方式真正地成熟了吗？如果我不能使用 Maven，将这个库包含到我的项目中的最佳路径是什么？

这有点重复[如何在 Eclipse 中包含 oauth 库？](https://stackoverflow.com/questions/7262028/how-to-include-oauth-library-in-eclipse)但这个问题根本没有解决它的 Maven 方面。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T04:18:06.723

The OAUth libs doesn't seem to be available in Maven Central, so you have to add the following repository either to your settings.xml or to your pom.xml:

```
<repository>
  <id>oauth</id>
  <name>OAuth Repository</name>
  <url>http://oauth.googlecode.com/svn/code/maven</url>
</repository> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-26T22:58:48.843

我实际上找到了使它与您的 oauth-parent 版本完全匹配的方法：

创建目录并输入：

```
mkdir oauth && cd oauth 
```

您的版本的签出代码：

```
svn co http://oauth.googlecode.com/svn/code/java/ 
```

进入签出目录（java），自己编译部署jars：

```
cd java && mvn source:jar install 
```

之后，您的依赖项将起作用：

```
<dependency>
    <groupId>net.oauth</groupId>
    <artifactId>oauth-parent</artifactId>
    <version>20100601</version>
    <packaging>pom</packaging>
</dependency> 
```

# opennms - 如何使用 Eclipse 启动和调试 opennms

> ID：11752391
> 
> 赞同：1
> 
> 时间：2012-08-01T04:02:14.957
> 
> 标签：opennms

我是opennms的新手。我正在从事EMS开发。我的团队计划从当前的 EMS 迁移到 opennms。我使用 Eclipse 成功配置了它，但不知道如何从 Eclipse 启动 opennms 和调试。

实际上，我已经使用命令 /compile.sh 和 assemble.sh 成功编译和组装，但我需要知道如何使用 Eclipse 调试、编译和启动 opennms。

谢谢，阿利亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T10:01:03.170

要启动 OpenNMS，您必须使用“opennms 脚本”。这位于`${opennms.home}/bin`

使用该脚本，您可以告诉 OpenNMS 在调试模式下运行，如下所示： `sudo ./opennms -t start`

OpenNMS 然后告诉您远程调试器端口是什么（默认为：8001）。

然后在eclipse中你可以“远程调试”OpenNMS。如何做到这一点，您可以按照此说明进行操作（[http://javarevisited.blogspot.de/2011/02/how-to-setup-remote-debugging-in.html](http://javarevisited.blogspot.de/2011/02/how-to-setup-remote-debugging-in.html)）

我通常以详细和调试模式启动 opennms：`sudo ./opennms -vt start`

**opennms 使用**

```
Usage: ./opennms [-n] [-t] [-p] [-o] [-c timeout] [-v] [-Q] <command> [<service>]

command options: start|stop|restart|status|check|pause|resume|kill
service options: all|<a service id from the etc/service-configuration.xml>
defaults to all

The following options are available:

  -n  "No execute" mode.  Don't call Java to do anything.
  -t  Test mode.  Enable JPDA on port 8001.
  -p  Enable TIJMP profiling
  -o  Enable OProfile profiling
  -c  Controller HTTP connection timeout in seconds.
  -v  Verbose mode.  When used with the "status" command, gives the
      results for all OpenNMS services.  When used with "start", enables
      some verbose debugging, such as details on garbage collection.
  -Q  Quick mode.  Don't wait for OpenNMS to startup.  Useful if you
      want to watch the logs while OpenNMS starts up without wanting to
      open another terminal window. 
```

**“opennnms 脚本”示例**

*   要启动 opennms：`sudo ./opennms start`
*   以详细模式启动 opennms：`sudo ./opennms -v start`
*   以详细和调试模式启动 opennms：`sudo ./opennms -vt start`
*   要停止 opennms：`sudo ./opennms stop`

假设你在文件夹中`${opennms.home}/bin`

# iphone - 长按摆动效果 iPhone

> ID：11752394
> 
> 赞同：1
> 
> 时间：2012-08-01T04:02:40.427
> 
> 标签：iphone

我有一个表格视图，一个单元格中有 3 个项目，基本上我以 3 列的网格视图格式显示我的项目，我为此使用了表格视图。这可以。现在我想实现类似当我长时间按下 tableview/cell 上的任何项目然后所有项目都会摆动并且左上角会有一个小的删除图标时，当用户按下该图标时，该项目将被删除，它的方式发生在 iPhone 主屏幕上。

现在首先我想知道这个想法有多可行？就像我一次只有 2 行可见，并且 tableview 重用单元格，所以如果我向下滚动并删除任何项目，那么管理删除正确项目不会造成太多麻烦吗？我想要一些方向来实现物品的长按和摆动效果动画。我可以尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:37:54.050

对于摆动效果动画代码，查看[这篇文章](https://stackoverflow.com/questions/929364/how-to-create-iphones-wobbling-icon-effect)。

而对于 tableview 管理，你必须保存`indexpath`.`layer``view`

`[imageView.layer addObject:indexpath forKey:@"indexPath"];`

现在您可以抓取单元格并将其删除。

# php - 在文章中提交 PHP 表单时出现 Joomla 2.5 404 错误

> ID：11752398
> 
> 赞同：1
> 
> 时间：2012-08-01T04:03:28.180
> 
> 标签：php, module, joomla2.5, article

我制作了自己的模块来将 php 表单的数据提交到数据库中。我现在有一篇文章里面的模块。

当我提交表单时，即使我有另一个模板页面可以成功提交，它也会进入 404 错误页面。

我曾尝试使用 action = post.php 以及确切的 URL，但它失败了。

有谁知道我出了什么问题？

这是网址：[http ://aubrey-joomla-test.freeiz.com/index.php/new-user-registration-form](http://aubrey-joomla-test.freeiz.com/index.php/new-user-registration-form)

这是我的默认模板的文件名：default_tmpl.php

这是我的 tmpl 代码：

```
<div>
    <form action="<?php echo JRoute::_('index.php'); ?>" method="post" id="myform" class="cols"  >

        <input type="hidden" name="form_send" value="send" />

        <h2>New User Registration Form</h2>
                <table>
                <label>Are you employed?</label>
                <tr>
                    <td><label><input type="radio" name="option" value="1" required="required">Yes</label></td>
                    <td><label><input type="radio" name="option" value="0" required="required">No</label></td>
                </tr>
                <label>If not, please proceed to the next section.</label>
                </table>

          <fieldset name="salary">

            <h4>Income From Employment</h4>             
                <table> <tr><label>Pay cycle:</label>
                    <td><label><input type="radio" name="option1" value="1" required="required">Monthly</label></td>
                    <td><label><input type="radio" name="option1" value="2" required="required">Biweekly</label></td>
                </tr> </table>
            <p><label>Please enter your typical pay: <input type="text" name="amountpay" required="required" pattern="\d+(\.\d{2})?"/> </label></p>
            <p><label>Please select your next pay day: <input type="date" name="paydate"  required="required" /> </label></p>

          </fieldset>

          <fieldset name="fixeditems">
            <h4>Fixed Items</h4>
                <table> <label>Payment cycle:</label> <tr>
                <td><label><input type="radio" name="option2" value="1" required="required">Monthly</label></td>
                <td><label><input type="radio" name="option2" value="2" required="required">Biweekly</label></td>
                <tr>
                </table>

                <table> <label>Is this a form of:</label> <tr>
                    <td><label><input type="radio" name="option3" value="2" required="required">Income</label></td>
                    <td><label><input type="radio" name="option3" value="1" required="required">Expense</label></td>
                <tr>
                </table>        

            <p><label>Please enter the typical amount: <input type="text" name="amount" required="required" pattern ="\d+(\.\d{2})?" /> </label></p>
            <p><label>Please select the next due date: <input type="date"  name="amountdate" required="required" /> </label></p>
          </fieldset>

          <hr>

          <div class="clear"></div>

          <button type="submit" name="send" value="Send">Submit form</button>
          <button type="reset">Reset</button>

</form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T14:48:24.243

You have no code to handle a form submission. You need to add in a hidden field that would trigger additional code that handles the form submission instead of displaying the form. You need something like this in your module -

```
if $_POST["form_submit_trigger"] :

PUT SOME CODE HERE TO HANDLE YOUR SUBMITTED DATA

else

PUT THE CODE TO DISPLAY YOUR FORM HERE 
```

form_submit_trigger should be a hidden field in your form that is generated and hashed each time the form is diaplyed. This way you can confirm that the form was actually generated and submitted on your site.

# android - 来自 openx 服务器的 Android 广告

> ID：11752399
> 
> 赞同：3
> 
> 时间：2012-08-01T04:03:32.717
> 
> 标签：android, openx, ads

`enter code here`我想从openx服务器在android中做一个广告程序。但是我在有限的区域内获得了更大的广告。我希望广告适合所有 android 手机尺寸的所有 android 手机中的特定区域。

我试过这段代码:: 在 Xml 中，我给了::

```
<LinearLayout 
                     android:layout_alignParentBottom="true" 
                     android:background="@color/black" 
                     android:gravity="center_horizontal|center_vertical"
                     android:id="@+id/lLayout_ua_Ads" 
                     android:layout_height="38dip" 

                     android:layout_gravity="center_horizontal|center_vertical"
                     android:layout_width="300dip" 
                     android:orientation="vertical">

                     <xstream.android.loyalone.openxads.OpenxAdView
                          android:id="@+id/openAdView"
                          android:layout_width="wrap_content"
                           android:layout_height="wrap_content"  
                            />  
             </LinearLayout> 
```

在主程序中，我给了::

```
class AdManager{

        Context mContext;
        LinearLayout mLinearLayoutAds;
        Timer mReloadAdTimer;
         OpenxAdView openAd;

        public AdManager(Context context, LinearLayout linearLayoutAds){
            this.mContext = context;
            this.mLinearLayoutAds = linearLayoutAds;
            mReloadAdTimer = new Timer();

              openAd = (OpenxAdView)findViewById(R.id.openAdView);
              openAd.setDeliveryURL("openx.marzar.net/www/delivery");
              openAd.setZoneID(1);
                 }

        private void startShowing(){
            openAd.load();
            mReloadAdTimer.schedule(timerTaskAdUpdate, 10000, 10000);
        }

        TimerTask timerTaskAdUpdate = new TimerTask() {

            @Override
            public void run() {

                  openAd.load();
            }
        };

        protected void removeImage() {
            // TODO Auto-generated method stub
            this.mLinearLayoutAds.removeAllViews();
        }

        private void setAdWidjet(){         

        }

        public void onUpdating() {

            setAdWidjet();
        }

        protected void cleanUp() {

            try{
                mReloadAdTimer.cancel();
            }catch (Exception e) {

            }
        }
    } 
```

为了获得 openx 广告，我给了 ::

```
import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;
import java.util.Random;

import android.content.Context;
import android.content.res.Resources;
import android.util.AttributeSet;
import android.util.DisplayMetrics;
import android.util.Log;
import android.view.ViewGroup;
import android.webkit.WebChromeClient;
import android.webkit.WebSettings;
import android.webkit.WebView;

public class OpenxAdView extends ViewGroup {

    private static final String ATTRS_NS = "http://denivip.ru/schemas/android/openx/0.1";

    private static final String LOGTAG = "OpenXAd";

    private static final String PARAMETER_DELIVERY_URL = "delivery_url";
    private static final String PARAMETER_JS_TAG_URL = "js_tag_url";
    private static final String PARAMETER_ZONE_ID = "zone_id";
    private static final String PARAMETER_HAS_HTTPS = "has_https";
    private static final String PARAMETER_SOURCE = "source";

    private static final String HTML_DOCUMENT_TEMPLATE = "<html><head><style>* {padding: 0; margin: 0; background-color: transparent;}</style></head>\n"
        + "<body>%s</pre></body></html>";

    private static final String JS_TAG = "" 
        + "<script type='text/javascript' src='%1$s?zoneid=%2$d&amp;charset=UTF-8"
        + "&amp;cb=%4$d&amp;charset=UTF-8&amp;source=%3$s'></script>";

    private WebView webView;

    private String deliveryURL;

    private String jsTagURL = "ajs.php";
    //private String jsTagURL = "avw.php";

    private Integer zoneID;

    private boolean hasHTTPS = false;

    private String source;

    private Random prng = new Random();

    private Resources res;

    /**
     * Initialize widget.
     * 
     * @param context
     */
    public OpenxAdView(Context context) {
        super(context);
        this.res = context.getResources();
        this.webView = new WebView(context);
        initWebView();
    }

    /**
     * Initialize widget. If delivery_url and zone_id attributes were set in
     * layout file, ad will be loaded automatically.
     * 
     * @param context
     * @param attrs
     * @param defStyle
     */
    public OpenxAdView(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
        this.res = context.getResources();
        initAttributes(attrs);
        this.webView = new WebView(context, attrs, defStyle);
        initWebView();
    }

    /**
     * Initialize widget. If delivery_url and zone_id attributes were set in
     * layout file, ad will be loaded automatically.
     * 
     * @param context
     * @param attrs
     */
    public OpenxAdView(Context context, AttributeSet attrs) {
        super(context, attrs);
        this.res = context.getResources();
        initAttributes(attrs);
        this.webView = new WebView(context, attrs);
        initWebView();
    }

    private void initAttributes(AttributeSet attrs) {
        setDeliveryURL(attrs);
        setJsTagURL(attrs);
        setZoneID(attrs);
        setHasHTTPS(attrs);
        setSource(attrs);
    }

    private void initWebView() {
          DisplayMetrics d=this.res.getDisplayMetrics();

        int wndWidth= d.widthPixels;
        int wndHeight= d.heightPixels;

         if(wndHeight<=480)
        webView.setInitialScale(42); 
         else
         webView.setInitialScale(83);

        WebSettings settings = webView.getSettings();
        settings.setJavaScriptEnabled(true);
        settings.setPluginsEnabled(true);
        settings.setAllowFileAccess(false);
       // settings.setPluginState(WebSettings.PluginState.ON);

        webView.setBackgroundColor(0x00000000); // transparent
        webView.setVerticalScrollBarEnabled(false);
        webView.setHorizontalScrollBarEnabled(false);
        webView.setWebChromeClient(new WebChromeClient());

        addView(webView);
    }

    protected String getZoneTemplate(int zoneID) {
        String raw;
        try {
            String zoneTag = String.format(JS_TAG, 
                    (hasHTTPS ? "https://" : "http://") + deliveryURL + '/' + jsTagURL, 
                    zoneID,
                    source == null ? "" : URLEncoder.encode(source, "utf-8"),
                    prng.nextLong());
            raw = String.format(HTML_DOCUMENT_TEMPLATE, zoneTag);
            return raw;
        }
        catch (UnsupportedEncodingException e) {
        //  Log.wtf(LOGTAG, "UTF-8 not supported?!", e);
        }

        return null;
    }

    @Override
    protected void onLayout(boolean changed, int left, int top, int right,
            int bottom) {
        webView.layout(left, top, right, bottom);
    }

    @Override
    protected void onFinishInflate() {
        super.onFinishInflate();
        load();
    }

    /**
     * Load ad from OpenX server using the parameters that were set previously.
     * This will not work if the following minimum required parameters were not
     * set: delivery_url and zone_id.
     */
    public void load() {
        //webView.clearView();
        if (zoneID != null) {
            load(zoneID);
        }
        else {
            Log.w(LOGTAG, "zoneID is empty");
        }
    }

    /**
     * Load ad from OpenX server using the parameters that were set previously
     * and the supplied zoneID. This will not work if the required parameter
     * delivery_url was not set.
     * 
     * @see #load()
     * @param zoneID ID of OpenX zone to load ads from.
     */
    public void load(int zoneID) {
        // check required parameters
        if (deliveryURL != null) {
        //  webView.clearView();
            webView.loadDataWithBaseURL(null, getZoneTemplate(zoneID), "text/html", "utf-8", null);
        }
        else {
            Log.w(LOGTAG, "deliveryURL is empty");
        }
    }

    public String getDeliveryURL() {
        return deliveryURL;
    }

    /**
     * The path to server and directory containing OpenX delivery scripts in the
     * form servername/path. This parameter is required. Example:
     * openx.example.com/delivery.
     * 
     * @param deliveryURL
     */
    public void setDeliveryURL(String deliveryURL) {
        this.deliveryURL = deliveryURL;
    }

    private void setDeliveryURL(AttributeSet attrs) {
        int delivery_url = attrs.getAttributeResourceValue(ATTRS_NS, PARAMETER_DELIVERY_URL, -1);
        if (delivery_url != -1) {
            this.deliveryURL = res.getString(delivery_url);
        }
        else {
            this.deliveryURL = attrs.getAttributeValue(ATTRS_NS, PARAMETER_DELIVERY_URL);
        }
    }

    public String getJsTagURL() {
        return jsTagURL;
    }

    /**
     * The name of OpenX script that serves ad code for simple JavaScript type
     * tag. Default: ajs.php. This parameter usually does not need to be
     * changed.
     * 
     * @param jsTagURL
     */
    public void setJsTagURL(String jsTagURL) {
        this.jsTagURL = jsTagURL;
    }

    private void setJsTagURL(AttributeSet attrs) {
        int js_tag_url_id = attrs.getAttributeResourceValue(ATTRS_NS, PARAMETER_JS_TAG_URL, -1);
        if (js_tag_url_id != -1) {
            this.jsTagURL = res.getString(js_tag_url_id);
        }
        else {
            String js_tag_url = attrs.getAttributeValue(ATTRS_NS, PARAMETER_JS_TAG_URL);
            if (js_tag_url != null) {
                this.jsTagURL = js_tag_url;
            }
        }
    }

    public Integer getZoneID() {
        return zoneID;
    }

    /**
     * The ID of OpenX zone from which ads should be selected to display inside
     * the widget. This parameter is required unless you use load(int) method.
     * 
     * @param zoneID
     */
    public void setZoneID(Integer zoneID) {
        this.zoneID = zoneID;
    }

    private void setZoneID(AttributeSet attrs) {
        int zone_id_rs = attrs.getAttributeResourceValue(ATTRS_NS, PARAMETER_ZONE_ID, -1);
        if (zone_id_rs != -1) {
            this.zoneID = new Integer(res.getInteger(zone_id_rs));
        }
        else {
            int zone_id = attrs.getAttributeIntValue(ATTRS_NS, PARAMETER_ZONE_ID, -1);
            if (zone_id != -1) {
                this.zoneID = new Integer(zone_id);
            }
        }
    }

    public boolean hasHTTPS() {
        return hasHTTPS;
    }

    /**
     * Set this to true if ads should be served over HTTPS protocol. Default:
     * false.
     * 
     * @param hasHTTPS
     */
    public void setHasHTTPS(boolean hasHTTPS) {
        this.hasHTTPS = hasHTTPS;
    }

    private void setHasHTTPS(AttributeSet attrs) {
        int has_https = attrs.getAttributeResourceValue(ATTRS_NS, PARAMETER_HAS_HTTPS, -1);
        if (has_https != -1) {
            this.hasHTTPS = res.getBoolean(has_https);
        }
        else {
            this.hasHTTPS = attrs.getAttributeBooleanValue(ATTRS_NS, PARAMETER_HAS_HTTPS, false);
        }
    }

    public String getSource() {
        return source;
    }

    /**
     * This parameter can be used to target ads by its value. It is optional.
     * 
     * @param source
     */
    public void setSource(String source) {
        this.source = source;
    }

    private void setSource(AttributeSet attrs) {
        int source_id = attrs.getAttributeResourceValue(ATTRS_NS, PARAMETER_SOURCE, -1);
        if (source_id != -1) {
            this.source = res.getString(source_id);
        }
        else {
            this.source = attrs.getAttributeValue(ATTRS_NS, PARAMETER_SOURCE);
        }
    }
} 
```

请给出你对这个问题的解决方案。提前致谢。

# php - 确定扫描二维码的唯一手机属性

> ID：11752403
> 
> 赞同：1
> 
> 时间：2012-08-01T04:04:23.240
> 
> 标签：php, qr-code

总而言之，我允许用户扫描二维码，当他们这样做时，我想通过他们手机上的属性来识别他们。有什么我可以使用或从移动设备获得的东西（因为他们可以使用 iPad 而不仅仅是手机）来清楚地识别扫描 QR 并且不会像 IP 地址一样改变的用户？

我会知道所有将扫描 QR 码的用户，因此我试图获取静态且唯一的信息，以便我可以识别他们，他们不必选择他们的用户 ID。

请让我知道是否有人有过这样做的经验。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:52:41.237

如果 QR 内容是 URL，您可以简单地在该 URL 上设置 Google Analytics 标签。

尽管这不会为您提供有关扫描您的代码的人的信息，但不会为您提供扫描您的代码**并**遵循 URL 的人的信息，但这通常是可以接受的折衷方案。

# jquery - jQuery 和 向左滑动

> ID：11752413
> 
> 赞同：4
> 
> 时间：2012-08-01T04:05:21.483
> 
> 标签：jquery, html

我有一个名为“changediv”的链接。单击此链接时，我希望一个 div 向左滑出浏览器，同时让一个 div 向左滑入浏览器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T06:08:30.933

我认为您正在寻找类似的东西；

```
$('#changediv').click(
function() {
    $('#div1').animate({"width": 0}, "slow");
    $('#div2').animate({"margin-left": 0}, "slow");
}); 
```

这是工作***[演示](http://jsfiddle.net/xs2du/)***

或者如果您的身体（或父 div）具有固定宽度，您可以尝试

```
$('#changediv').click(
function() {
    $('#div1').animate({"width": 0}, "slow");
    $('#div2').animate({"width": 400}, "slow");
}); //I used a width of 400px for testing 
```

这是工作***[演示](http://jsfiddle.net/xs2du/1/)***

希望这可以帮助..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:10:11.887

例如，您可以对此进行测试：

```
$('.changeDiv').on('click', function() {

  $('#div_one').animate({
     left: -9999
  },1000, function() {
     $('#div_two').animate({
        left: 200
     });
  });

}); 
```

# arm - 逐步交叉编译以构建一个简单的“hello world”，从 Ubuntu 12 运行到 WM8650 平板电脑

> ID：11752415
> 
> 赞同：3
> 
> 时间：2012-08-01T04:05:32.000
> 
> 标签：arm, cross-compiling

我是一名在 Windows 世界中编程的程序员。具有 Delphi、C 用于微控制器（摩托罗拉、AVR、PIC）和汇编程序的经验。几个月前，我开始进入 Linux 世界，使用路由器 (DIR 600)，就像我的硬件（我们开发嵌入式系统）和网页之间的接口一样。

几周后，我们开始使用平板电脑（基于 WM8650 的廉价中文）并编写一些 bash 程序来与我们的硬件通信。一切都好。

后来我读到 Ubuntu 有一个交叉编译器，所以我安装了最后一个版本 12.04 但是当我尝试编译一个简单的“Hello world”时，如果我在 ubuntu 机器内使用简单的 gcc al 很好，当用 arm 编译时- linux-gnueabi-gcc 并将程序放入平板电脑并运行它显示此错误：

分段故障

我读到了这个链接：[使用 arm-linux-gnueabi-gcc 为 Android 交叉编译静态 C hello world](https://stackoverflow.com/questions/9324772/cross-compiling-static-c-hello-world-for-android-using-arm-linux-gnueabi-gcc)

但无法理解正确答案。

如果有人知道解决简单工作的地方或 doc 文件：交叉编译运行到我的 WM8650 平板电脑中的 C 程序将不胜感激。

此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T12:43:38.883

尝试在 arm-linux-gnueabi-gcc -static [cpu/architecture] 文件前指定架构或 cpu，例如 -march=armv5 ...

# javascript - jquery - 在选中单选按钮时附加

> ID：11752417
> 
> 赞同：4
> 
> 时间：2012-08-01T04:06:33.080
> 
> 标签：javascript, jquery, html, dom

我有一些单选按钮。

```
<div class="user">
        <input type="radio" class="user-radio" name="user" value="user"/>
        <p>BLABLA</p>
</div>
<div class="user">
        <input type="radio" class="user-radio" name="user" value="user"/>
        <p>BLABLA</p>
</div>
<div class="user">
        <input type="radio" class="user-radio" name="user" value="user"/>
        <p>BLABLA</p>
</div> 
```

我想要做的是，在选中该 div 内的单选按钮时附加`<div class="user">`一个。`<a><a/>`当我选择另一个单选按钮时，我想删除最后插入`<a><a/>`的并在新选择的单选按钮的父 div 中插入一个新按钮。

我已经尝试过这样的事情，但我无法让它工作：

```
<script>
$('.user').click(function () {
    if (!$(".user-radio").is(':checked')) {
        $(this).append('<a></a>');
    }
})
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T04:10:18.023

见[演示](http://jsfiddle.net/Wnxnk/2/)

```
$('.user-radio').change(function () {
    $('.user a').remove();
    $('.user-radio:checked').parent().append('<a>hello</a>');
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T04:10:04.953

我一直更喜欢`show`and`hide`而不是`append`and`remove`元素。
并`change`改为使用。

**html**

```
<div class="user">
        <input type="radio" class="user-radio" name="user" value="user"/>
        <p>BLABLA</p>
        <a href="javascript:void(0)">blabla</a>        
</div> 
```

**js**

```
$('.user').change(function () {
    $("a").hide();
    $("a", this).show();
}); 
```

**css**

```
.user a {
    display: none;
} 
```

[演示](http://jsfiddle.net/ricardolohmann/5qn6s/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T04:14:47.820

```
<script>
$('.user-radio').click(function () {
    $('.user > a:last-child').remove()
    if ($(this).is(':checked')) {
        $(this).parent().append('<a>test</a>');
    }
});
</script> 
```

[http://jsfiddle.net/s7eRz/](http://jsfiddle.net/s7eRz/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T05:33:33.513

在这里，我已经完成了完整的垃圾箱。演示链接如下：

**演示：** [http ://codebins.com/bin/4ldqp93](http://codebins.com/bin/4ldqp93)

**HTML：**

```
<div class="user">
  <input type="radio" class="user-radio" name="user" value="user" />
  <p>
    BLABLA
  </p>
</div>
<div class="user">
  <input type="radio" class="user-radio" name="user" value="user"/>
  <p>
    BLABLA
  </p>
</div>
<div class="user">
  <input type="radio" class="user-radio" name="user" value="user"/>
  <p>
    BLABLA
  </p>
</div> 
```

**CSS：**

```
.user p{
  display:inline-block;
  marign:0px;

  padding:0px;
}
input{
  padding:0px;
}
.user{
  border:1px solid #f53322;
  color:#333;
  background:#a3f7a2;
}
.user a{
  color:#112288;
  font-weight:bold;
  display:block;
  padding:5px;
} 
```

**查询：**

```
$(function() {
    $('.user-radio').change(function() {
        if ($(this).is(':checked')) {
            $('.user a').remove();
            $('.user-radio:checked').parent(".user").append("<a href='javascript:void(0);'>Add New Link</a>");
            //Another Alternate way is
            /*  $('.user-radio:checked').closest(".user").append("<a href='javascript:void(0);'>Add New Link</a>"); */
        }
    });
}); 
```

**演示：** [http ://codebins.com/bin/4ldqp93](http://codebins.com/bin/4ldqp93)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T04:41:48.650

remove the **!** operator and change the first selector from ".user" **.user-radio** and then append the `<a>link</a>` to the parent of **$(this)** element:

```
$('.user-radio').click(function () {
    if ($(this).is(':checked')) {
        $(".user a").remove();
        $(this).parent().append('<a>dwd</a>');
    }
}); 
```

# c++ - 如何在 VS 2010 中自动链接依赖项的依赖项？

> ID：11752419
> 
> 赞同：3
> 
> 时间：2012-08-01T04:07:03.677
> 
> 标签：c++, visual-studio-2010, project-reference

我正在使用带有大量项目和解决方案文件的 Visual Studio 2010。但现在我发现自己对 ProjectReferences 有点依赖地狱：

*   项目`Simple`生成一个静态库。
*   项目`Foo`和`Bar`依赖`Simple`，也产生静态库。
*   项目`Module`依赖`Foo`并产生一个 DLL。
*   项目`Module2`依赖`Bar`并产生一个 DLL。

所以依赖树看起来像这样：

```
 Simple
                  |
     ____________/ \__________
     |                        |
    Foo                      Bar
     |                        |
   Module                   Module2 
```

有了`ProjectReferences`，我可以使`Module`依赖`Foo`和自动链接`Foo.lib`。这工作正常。

**但是**，有没有办法`Module`自动链接`Simple.lib`？

似乎这应该是可能的。 `Module`取决于`Foo`，这取决于`Simple`，所以它似乎应该能够选择“链接到我的参考文献的输出和我的参考文献的参考文献”。但我找不到任何可以让我这样做的东西。

“链接库依赖项”选项不这样做。它仅在 Foo.lib 中链接，然后我收到有关未解析的外部符号（在 Simple.lib 中定义的符号）的链接错误。

`true`为`Foo`->`Simple`和`Bar`->引用设置“链接库依赖项”一开始`Simple`似乎有效，直到您有一个同时使用`Foo`和的项目`Bar`。该设置实际上嵌入`Simple.lib`到`Foo.lib`and`Bar.lib`中，如果您尝试同时使用`Foo.lib`and ，则会出现“符号已定义”错误`Bar.lib`。这是正确的错误 - 我实际上不想放入`Simple.lib`任何其他库中。

我可以添加`ProjectReferece`from `Module`to `Simple`，但是在每个使用 的项目中设置它很乏味`Foo`，并且违反了`Foo`. `Module`应该不需要知道`Simple`。显然，链接器需要了解`Simple`，但它应该能够通过遵循 ProjectReferences 来解决这个问题。

这就是为什么这很重要：假设在维护期间，创建了一个新项目： `Basic`，它创建了一个静态库，并`Simple`依赖于`Basic`. 现在我们必须直接或通过另一个 ProjectReference 更新每个具有 to 的单个项目`ProjectReference`（`Simple`在此示例中它只有两个项目`Module`和`Module2`，但实际上它是几十个）。这很乏味。

**tl; dr**有没有办法自动链接到我的依赖项的静态库中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:31:07.260

显然，这是 Visual Studio 2010 中的一个错误： [https ://connect.microsoft.com/VisualStudio/feedback/details/638534/unresolved-externals-when-build-a-vc-project-with-chained-static-lib -依赖关系#详细信息](https://connect.microsoft.com/VisualStudio/feedback/details/638534/unresolved-externals-when-build-a-vc-project-with-chained-static-lib-dependencies#details)

不幸的是，微软将该错误关闭为“已修复”——这并不完全正确。这更像是一种解决方法，但这不是我认为真正的解决方法。（真正的修复是补丁或服务包，而不是需要在每台机器上手动调整的东西）。

“修复”是执行以下操作：

修改`%ProgramFiles(x86)%\MSBuild\Microsoft.cpp\v4.0\Microsoft.CPPBuild.Targets` 并更改行：

```
<Target Name="GetResolvedLinkLibs" Returns="@(LibFullPath)"
 DependsOnTargets="$(CommonBuildOnlyTargets)"> 
```

至

```
<Target Name="GetResolvedLinkLibs" Returns="@(LibFullPath)"
 DependsOnTargets="$(CommonBuildOnlyTargets);ResolvedLinkLib"> 
```

因此，只需将**;ResolvedLinkLib**部分添加到该文件中。然后 VS 将链接依赖项的依赖项。

# mysql - sql语句怎么写？

> ID：11752424
> 
> 赞同：3
> 
> 时间：2012-08-01T04:08:02.917
> 
> 标签：mysql

我的数据库中有 3 个表，如下所示。这用于类似于foursqure的应用程序。我需要有关编写我在底部询问的 sql 语句的问题的帮助。

谢谢你

用户详细信息

```
user_id | fname
----------------
   1    | Losh
   8    | Dush
   9    | Rosh
  10    | NELL 
```

朋友们

```
user_idf |user_idff
----------------
   1     |   8
   8     |   9
   10    |   1 
```

报到

```
check_in_id |user_id | place    | date
--------------------------------------------
       1    |   8    | Hotel    | 01/01/2012
       2    |   9    | Home     | 05/01/2012
       3    |   1    | Junction | 08/01/2012
       4    |   1    | Rest     | 11/01/2012
       5    |   9    | Hotel    | 15/01/2012
       6    |   8    | Home     | 15/01/2012 
```

我得到了与 8 和用户 8 为好友的用户的详细信息以及如下所示的签入位置

```
SELECT a.`user_id`, a.`fname` , b.*
FROM `user_details` a, `check_in` b
WHERE (b.user_id = 8 
OR b.user_id in (select user_idf from friends where user_idff = '8' union select user_idff from friends where user_idf = '8')) AND b.user_id = a.user_id 
```

*我如何编写 sql 来选择谁是 8 和用户 8 详细信息的朋友以及**最后一次**检查这些用户的位置*

解释：：

我寻求答案，例如

```
user id    name     place   date
   1       LOSH     Rest  11/01/2012
   8       DUSH     HOME  15/01/2012
   9       ROSH     HOTEL 15/01/2012 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:18:12.143

Join it to the table returned by:

```
(SELECT `user_id`, `place` FROM Check_in GROUP BY user_id ORDER BY `date` DESC) 
```

That should give you one entry per user, and since it's sorted in reverse by date, that entry should be the most recent.

> But when i group by it gives me the first dates not the latest date

How about this:

```
(SELECT user_id, place
   FROM (SELECT * FROM Check_in ORDER BY `date` DESC) tmp
   GROUP BY user_id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T15:12:03.830

(SELECT a.user_id, a.place, b.fname, a.date, a.time, a.check_in_id FROM (SELECT * FROM check_in ORDER BY `date` DESC) as a, user_details as b WHERE a.user_id = b.user_id AND (a.user_id in (select user_idf from friends where user_idff = '8' union select user_idff from friends where user_idf = '8') OR a.user_id = 8) GROUP BY a.user_id)

above query gave me the required answer.

thank you all for the help given

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T04:18:52.107

```
SELECT user_id, fname, c.place
FROM user_details u
     INNER JOIN (SELECT IF(user_idff = 8, user_idf, user_idff) AS user_id
                 FROM friends
                 WHERE (user_idff = 8 OR user_idf = 8)
                ) f
                ON u.user_id = f.user_id
     LEFT JOIN (SELECT c1.user_id, place
                FROM Check_in c1
                     LEFT JOIN  Check_in c2
                         ON c1.user_id = c2.user_id AND
                            c1.date < c2.date
                WHERE c2.date IS NULL
               ) c
               ON u.user_id = c.user_id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T04:29:37.940

这不会打破关系，但它是回答您问题的一种直接方式。

**编辑** 我刚刚重新阅读了你的问题，我看到你也想要用户 8 的信息。目前尚不清楚您是否希望用户 8 作为单独的行或与朋友的行一致的信息。

```
select *
from
    friends as f inner join check_in as ci on ci.user_id = f.user_idff
    inner join user_details as ud on ud.user_id = f.user_idff
    inner join user_details as ud8 on ud8.user_id = f.user_idf
where
    f.user_idf = 8
    and date = (
        select max(date)
        from friends as f2 inner join check_in as ci on ci.user_id = f2.user_idff
        where f2.user_idf = f.user_idf
    ) 
```

**编辑 2** 您的请求可能有点不清楚确定返回哪个签到位置。如果您想单独了解每个朋友的最新位置，请使用此选项。*第一个查询在所有*朋友中查找最近的位置。显然，这是同一主题的两种变体。

```
select *
from
    friends as f inner join check_in as ci on ci.user_id = f.user_idff
    inner join user_details as ud on ud.user_id = f.user_idff
    inner join user_details as ud8 on ud8.user_id = f.user_idf
where
    f.user_idf = 8
    and date = (
        select max(date)
        from check_in as ci
        where ci.user_id = f.user_idff
    ) 
```

# iphone - iOS：调用 URLForUbiquityContainerIdentifier：在后台模式下

> ID：11752427
> 
> 赞同：1
> 
> 时间：2012-08-01T04:08:28.260
> 
> 标签：iphone, objective-c, ios, icloud

我正在尝试更新 iCloud 文件。所以，当应用程序进入后台模式时，我开始同步这个文件。但是，当我如下所示检查 iCloud 可用性时，我没有得到任何回应。

这是我使用的代码：

```
 dispatch_queue_t q_default;
    q_default = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(q_default, ^{
        NSFileManager *fileManager = [[[NSFileManager alloc] init] autorelease];;
        NSLog(@"step 1");
        if ([fileManager URLForUbiquityContainerIdentifier:nil] != nil) {
            NSLog(@"step 2");
            [self copyDatabaseToTempDirectory];

            if (![self copyDatabaseToTempDirectory]) {
                return;
            }

            [self moveDatabaseFromTempDirectoryToTheCloud];

        } else {
            NSLog(@"iCloud Not Available");
            self.Sync_POST = NO;

        }

    });
    NSLog(@"step 3"); 
```

以下是日志： step 3 step 1

# objective-c - 如何关闭多个视图控制器？

> ID：11752428
> 
> 赞同：1
> 
> 时间：2012-08-01T04:08:48.137
> 
> 标签：objective-c, ios, uiviewcontroller

我有一个带有 3 个视图控制器的故事板`QuestionsTableViewController`：`QuestionViewController`和`AnswerViewController`

对于所有密集的目的，`QuestionsTableViewController`基本上是我的**主菜单**。it has a selection of topics which when selected populate a question label in `QuestionViewController`which is then segued to.

用户在 a 中输入他/她的答案`UITextField`并点击提交按钮，导致**模态 segue**到`AnswerViewController`具有标签的标签，该标签基于他们的答案与编码的正确答案的比较向用户返回正确或不正确的消息。这个**最终的视图控制器**还有一个按钮（返回菜单），单击该按钮应将用户带回`QuestionsTableViewController`（即我的菜单）。

**最后一部分（返回菜单）是我遇到问题的地方。**

我可以解除`AnswerViewController`多种方式，但我无法弄清楚我需要做什么才能解除`QuestionViewController`同一个按钮按下的一部分。

我在下面包括我的`QuestionViewController`和`AnswerViewController`课程的片段。

```
QuestionViewController.m

#import "QuestionViewController.h"
#import "AnswerViewController.h"

@interface QuestionViewController ()

@end

@implementation QuestionViewController

@synthesize currentQuestionDisplay;
@synthesize userAnswerTextField;
@synthesize currentQuestion;

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    AnswerViewController *avc = [segue destinationViewController];
    [avc setCurrentQuestion:currentQuestion];
    [avc setUserAnswer:[userAnswerTextField text]];
}

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    [self.currentQuestionDisplay setText:[currentQuestion question]];

    // Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [self setCurrentQuestionDisplay:nil];
    [self setUserAnswerTextField:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)dismissKeyboard:(id)sender {
    [userAnswerTextField resignFirstResponder];
}

- (void)dimissThisVC
{
    [self dismissViewControllerAnimated:YES completion:^(void){}];
}

@end

AnswerViewController.m

#import "AnswerViewController.h"
#import "QuestionViewController.h"

@interface AnswerViewController ()

@end

@implementation AnswerViewController

@synthesize displayCurrentAnswer;
@synthesize currentQuestion;
@synthesize userAnswer;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    if([userAnswer isEqualToString:currentQuestion.answer]) {
        [self.displayCurrentAnswer setText:@"You are correct!"];
    }
    else {
        [self.displayCurrentAnswer setText:@"You are wrong!"];
    }

    // Do any additional setup after loading the view.
}

- (void)viewDidUnload
{
    [self setDisplayCurrentAnswer:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (IBAction)dismissAnswerVC:(id)sender {
    [[self presentingViewController]
           dismissViewControllerAnimated:YES
           completion:^(void){ }];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T06:10:49.200

当您关闭模式视图时，在完成块中有以下代码：

```
[self.navigationController popViewControllerAnimated:YES]; 
```

或者，如果您想转到最顶层的控制器：

```
[self.navigationController popToRootViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T01:06:37.773

为了让其他可能引用它的人完成这篇文章，我在这里重新发布 user523234 的答案：

```
In the prepareForSegue method, you missed this line:

avc.delegate = self; 
```

希望这可以帮助那些陷入我所在的同一个洞的其他人。

# php - PHP Include 不适合我的编码

> ID：11752430
> 
> 赞同：1
> 
> 时间：2012-08-01T04:09:04.367
> 
> 标签：php, include

我在本地运行一个网站。

我有一个主文件夹，其中包含普通用户的所有主要编码，它是一个名为`main.php`.

在这个主文件夹中，我有另一个管理员文件夹，其中包含例如名为`announcement2.php`. 但是，当我尝试将其包含在首页（`index.php`）中时，会出现错误，就像服务器无法读取 admin 文件夹内的文件一样。

错误是：

```
Warning: include(../admin/announcement2.php) [function.include]: failed to open stream: No such file or directory in C:\xampp\htdocs\pods\main.php on line 85

Warning: include() [function.include]: Failed opening '../admin/announcement2.php' for inclusion (include_path='.;C:\xampp\php\PEAR') in C:\xampp\htdocs\pods\main.php on line 85 
```

这是将文件包含在管理文件夹中的代码`main.php`

```
<td><?php include '../admin/announcement2.php'; ?></td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:14:57.433

This probably just means either (a) permissions are incorrect (web server can't read the file), or more likely, (b) the path is incorrect. If you `echo $_SERVER['PHP_SELF'];` you'll see the path of the script, which would shed light on what path to actually use. But it's usually faster to try a few variations ...

```
include '../admin/announcement2.php';
include 'admin/announcement2.php';
include '../../admin/announcement2.php'; 
```

... until something works.

# c# - 如何提高打印的图像质量？

> ID：11752436
> 
> 赞同：1
> 
> 时间：2012-08-01T04:10:07.800
> 
> 标签：c#, graphics, bitmap, printdocument

我正在解决程序（ReportGenerator）中的问题，这似乎是打印报告的问题，质量极差或太大。

该项目涉及使用两个线程来同步准备页面以供预览和打印它们的任务。这两个线程的起点阻止我在适当的时间使用 PrintPageEventArg（PrintDocument_PrintPage 的输入），以便使用可以提高打印质量的 e.graphics。为了尝试解决这个问题，我从位图 (graphics.FromImage(bitmap)) 创建了一个图形，但这会产生自己的问题。为了使用此事件，我必须更改线程的起点，从而导致更多问题。我的时间有限，我不能花时间完全重写这个项目。关于我可以尝试什么以找到解决方法有什么建议吗？

这是项目的一般概述，包括线程和我的方法：

1.  打印显示对话框 -> 确定
2.  Print_Document_BeginPrint -> 线程从这里开始 3.Create a graphics from bitmap(graphics.FromImage(bitmap)) 如果我可以使用 PrintPageEventArg 从这里开始，我的问题将得到解决，但我没那么幸运

    或者，我可以创建一个位图并在其上绘制一个准备好的图形 (graphics.Draw(..bitmap...)) 将此图像保存在系统上，然后在 PrintDocument_PrintPage 中恢复它，此方法允许我使用 PrintPageEventArg 但只有在我恢复先前创建的图形并打印它们。

我之前在这些链接上问过与此问题相关的问题。 [使用“graphics.DrawString”后如何提高打印文本质量？](https://stackoverflow.com/questions/11644115/how-to-improve-printed-text-quality-after-using-graphics-drawstring) [将图像保存为位图而不损失质量](https://stackoverflow.com/questions/11699219/save-an-image-as-a-bitmap-without-losing-quality)

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:27:33.250

令人困惑。

为什么不绘制从打印机 HDC 创建的图形？如果您先绘制位图图形，则位图需要具有较高的分辨率（例如 300-dpi）才能获得更好的打印质量。但是由于向打印机发送大量图像，打印可能会很慢。

# html - 如何从萤火虫中删除引号

> ID：11752439
> 
> 赞同：0
> 
> 时间：2012-08-01T04:10:35.890
> 
> 标签：html, firebug

如何删除 google chrome firebug 中的 textarea 引号

```
<textarea>
"

sometext

"
</textarea> 
```

这些双引号可以在萤火虫中删除，例如在谷歌浏览器萤火虫中？

# ruby-on-rails - Carrierwave - 从字符串“上传”文件

> ID：11752440
> 
> 赞同：9
> 
> 时间：2012-08-01T04:10:40.757
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, file-upload, carrierwave

我网站中的用户可以上传自己的模型照片或从库中进行选择。当用户从库中选择时，我将文件名作为字符串发送到服务器`{file: {url: 'url.jpg'}}`。我还没有找到一种方法可以让carrierwave 只更新模型文件而不上传它。我可以在我的模型中编写一个条件来检查该参数是否存在，然后`model.file = File.open('str.jpg')`. 从安全角度来看，这很糟糕吗？我如何“上传”文件，或者只是更新文件属性，以引用服务器上已经可用的文件？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T22:42:46.987

您的使用解决方案`File.open`可以工作，但您应该验证该名称是否有效，`File.basename`以便有人无法通过`../../secret_credentials.yml`并公开您不希望他们看到的信息。对照预设图像列表检查它也是一个好主意。

但是，在这种情况下，您可以通过跳过 CarrierWave 来更有效地执行此操作。

添加一个名为 的新字段`library_image`，当有人想使用预设图像时，您设置`library_image`，如果他们想使用自己的照片，请取消设置`library_image`并照常上传照片。然后添加一个辅助方法，例如：

```
def avatar_url
    if self.library_image?
        "http://example.com/images/#{self.library_image}"
    else
        self.picture.url
    end
end 
```

这假设您可以在 CarrierWave中找到预设图像，`http://example.com/images/[name]`并且您正在使用名为.`mount_uploader``picture`

现在，只要您想显示他们的图片，您就会调用`avatar_url`which 将检查它是否应该返回预设 URL 或他们上传的图片。

`library_image`您将如何更新或`picture`基于原始问题的示例：

```
if params[:file].is_a?(Hash)
    model.library_image = params[:file][:url]
    model.remove_picture = true
else
    model.library_image = nil
    model.picture = params[:file]
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T15:21:32.857

我会制作另一个名为 LibraryImages 的资源来保存这些图像文件。

这些将与使用`has_many`关联的 User 类相关。第二个是当用户想要使用自己的图像而不是预先定义的图像时分开。

因此，我建议添加一个名为“use_library”的布尔类型，一旦他们选择使用自己的图像，它就会毫无问题地上传到 user.image。

现在在您看来，只需询问 use_library 是否返回 true 如果使用`image_tag(user.library_image)`

# c++ - 错误 21 错误 LNK2019：未解析的外部符号“public：__thiscall”

> ID：11752442
> 
> 赞同：0
> 
> 时间：2012-08-01T04:10:50.117
> 
> 标签：c++, lnk2019

我无法弄清楚我的错误在哪里。我收到消息：

```
Error   21  error LNK2019: unresolved external symbol "public: __thiscall ParticleAnchoredSpring::ParticleAnchoredSpring(class Vector3 *,float,float)" (??0ParticleAnchoredSpring@@QAE@PAVVector3@@MM@Z) referenced in function "public: void __thiscall MyGameWorld::Initialize(void)" (?Initialize@MyGameWorld@@QAEXXZ)   C:\Users\Foo Nuts\Dropbox\GSP321_DavidJohnson\GSP321_Johnson_HM2\iLab2\MyGameWorld.obj 
```

函数声明：

```
ParticleForceRegistry registry;
ParticleAnchoredSpring spring(&Vector3(10, 3, 10), 10, 10);

registry.add(WMI->getListPtr()[0], &spring); 
```

类定义：

```
class ParticleAnchoredSpring : public ParticleForceGenerator
{
protected:
    Vector3 *anchor;
    real springConstant, restLength;
public:
     ParticleAnchoredSpring(Vector3 *anchor, real springConstant, real restLength);
     virtual void updateForce(Particle *particle, real time);
}; 
```

构造函数声明：

```
void ParticleAnchoredSpring::updateForce(Particle *particle, real time)
{
Vector3 force;
particle->getPosition();
force -= *anchor;

real magnitude = force.magnitude();
magnitude = (restLength - magnitude) * springConstant ;
magnitude *= springConstant;

force.normalize();
force *= -magnitude;
particle->addForce(force);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:12:49.857

You haven't implemented the constructor. You only declared it. Add:

```
ParticleAnchoredSpring::ParticleAnchoredSpring(Vector3 *_anchor, real _springConstant, real _restLength) 
: anchor(_anchor), springConstant(_springConstant), restLength(_restLength)
{
} 
```

to your implementation file.

I'll assume `real` is defined as `float`.

# ios - xcode 4.4 中的自动属性合成是如何工作的？

> ID：11752443
> 
> 赞同：8
> 
> 时间：2012-08-01T04:11:02.393
> 
> 标签：ios, xcode, properties

我是 Objective-C 和 XCode 的新手，但我很高兴现在看到 XCode 4.4 自动为我合成了我的属性。我认为这意味着我不再需要为我的属性输入@synthesize，并且我可以使用`self.propertyName = @"hi";`例如访问它们。

我正在尝试重新编写一些示例代码，以便更好地理解它，但是此代码实现了自定义 getter 方法。在示例代码中，该属性是手动合成的，如`@synthesize managedObjectContext = __managedObjectContext;`. 自定义 getter 如下所示：

```
- (NSManagedObjectContext *)managedObjectContext {
    if (__managedObjectContext != nil) {
        return __managedObjectContext;
    }

    NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
    if (coordinator != nil) {
        __managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
        [__managedObjectContext setPersistentStoreCoordinator:coordinator];
    }

    return __managedObjectContext;
} 
```

在这个人的代码中，我看到他只是使用他手动合成的访问器来获取和设置。我想在我的代码中，我可以将 替换为`__managedObjectContext`，`self.managedObjectContext`但不行。如果我这样做，我会收到一条错误消息，告诉我我正在尝试分配给一个`readonly`属性。这是有道理的，因为该属性被其他编码器定义为只读。

```
@property (readonly, strong, nonatomic) NSManagedObjectContext *managedObjectContext; 
```

所以，我想知道他是如何手动合成他的属性的，这意味着如果他使用那个指定的设置器，它允许他以某种方式设置一个只读属性。

如果我手动合成属性，就像在我引用的代码中一样，一切都会恢复工作，但这并没有使用新的自动合成。如果我删除`readonly`，我可以按预期设置此属性，但我觉得我不明白为什么他将它设置为只读，所以我敢打赌我在那里破坏了一些东西。

那么，我是否误用了新的自动合成？如果自动合成没有为我创建它，我如何使用设置器设置它，因为只读？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T04:28:18.980

当 XCode 自动合成时，它会模拟以下...

```
@synthesize foo = _foo; 
```

因此，您可以使用 self.foo 或 object.foo 适当地访问数据。

但是，在访问器方法（以及初始化器和 dealloc）的实现中，您应该直接使用 iVar。

请注意，这些 iVar 有两个下划线。并且，它们在访问器方法中被操纵。使用 _managedObjectContext，你应该很高兴。

# android - Android：向来电者播放歌曲？

> ID：11752446
> 
> 赞同：1
> 
> 时间：2012-08-01T04:11:16.393
> 
> 标签：android

我有一个场景，我必须向来电者播放一首歌，当有人打电话给你时，你需要以编程方式接听电话并且必须播放一首歌。我认为 android sdk 是不可能的。谁能给我一个想法是什么方法来完成这项任务？

至少给我什么可能的方法来完成这项任务？

# php - 如何为 PHP 文件设置固定的背景图像？

> ID：11752451
> 
> 赞同：4
> 
> 时间：2012-08-01T04:12:01.303
> 
> 标签：php, html

我有一个带有登录表单的 .html 文件，并希望重新创建它并将其保存为 .php 文件。但是，我在设置背景图像和其他 CSS 相关内容时遇到了困难。

下面是我的 .php 代码，我确信它不会为回答我的问题提供指导，但我不知道从哪里开始。我检查了 W3schools 和许多其他网站。

帮助我的一个很好的开始是如何在 .PHP 文件中包含一个 .CSS 文件。也许给我一个快速的源代码示例。此外，设置固定背景图像的代码也很棒。

```
<?php

$url = 'C:\Users\George\Documents\HTML\bg.jpg';

?>

<html lang="en">
<head>

<title>This is a test</title>

<style type="text/css">
body
{
background-image:url('<?php echo $url ?>');
}
</style>

</head>

<body>

<p>This is a test.</p>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T04:46:38.443

I found my answer.

```
<?php
$profpic = "bg.jpg";
?>

<html>
<head>
<style type="text/css">

body {
background-image: url('<?php echo $profpic;?>');
}
</style>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Hey</title>
</head>
<body>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T04:27:48.770

把 PHP 代码放到 CSS 中不是很好的编码

```
body
{
    background-image:url('bg.png');
} 
```

而已

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T04:15:12.817

Your question doesn't have anything to do with PHP... just CSS.

Your CSS is correct, but your browser won't typically be able to open what you have put in for a URL. At a minimum, you'll need a `file:` path. It would be best to reference the file by its relative path.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T05:25:28.823

如果您要从中派生网站，您应该考虑包含其他 php 文件。而不是在该文件中执行所有 css/etc，您可以执行

```
<head>
    <?php include_once('C:\Users\George\Documents\HTML\style.css'); ?>
    <title>Title</title>
</hea> 
```

然后你可以有一个单独的 CSS 文件，它只是被拉入你的 php 文件。它提供了一些“更整洁”的编码。

# ajax - 通过 ajax 加载二进制 WebGL 模型的最佳方法？

> ID：11752456
> 
> 赞同：3
> 
> 时间：2012-08-01T04:13:17.460
> 
> 标签：ajax, webgl

我一直在使用 WebGL 开发基于 Web 的 3D 应用程序。在服务器端生成二进制 3D 模型，客户端使用 AJAX 下载该模型。模型可能非常大（> 200K），因此我想避免以文本格式发送它们。目前我使用以下代码来实现这一点：

```
stream = http.responseText; // results of ajax request
..... 
var len = stream.length;
var header_size = 4 + 4 + 4*2; 
var buf_sz = len + 16;
var buf = new ArrayBuffer(buf_sz);
var bytes = new Uint8Array(buf, 0, buf_sz);

for(i = 0; i < len; i++) {
    bytes[i] = stream.charCodeAt(i) & 0xff;
}
....    
// use these to initialize WebGL buffers
var verts = new Float32Array(buf, bytes_skip, n_verts*3);
var normals = new Float32Array(buf, bytes_skip + n_verts*12, n_verts*3);
var indices = new Uint16Array(buf, bytes_skip + n_verts*24, n_indices);
... 
```

而在服务器端，我使用 'charset=x-user-defined' 发送数据

换句话说，我基本上必须逐个字符地从“流”中复制数据来初始化数组缓冲区。我想知道是否有更好（更直接）的方法来做到这一点？也许直接从流中实例化arraybuffer ?..

附言。我知道还有 jDataView 库，但它基本上是一样的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:26:41.083

执行下面的代码片段以将数据作为二进制数组获取（来自[https://developer.mozilla.org/en/DOM/XMLHttpRequest/Using_XMLHttpRequest](https://developer.mozilla.org/en/DOM/XMLHttpRequest/Using_XMLHttpRequest)的代码示例）：

```
var xhr = new XMLHttpRequest();  
xhr.open("GET", url, true);  
xhr.responseType = "arraybuffer";   
xhr.onload = function(e) {  
  var arraybuffer = xhr.response; // not responseText  
  /* ... */  
}  
xhr.send(); 
```

# backbone.js - 使用 ServiceStack 未获取主干集合

> ID：11752463
> 
> 赞同：2
> 
> 时间：2012-08-01T04:15:17.433
> 
> 标签：backbone.js, servicestack

好的，这是我的主要主干代码

```
(function ($) {
var Job = Backbone.Model.extend({});

var JobList = Backbone.Collection.extend({
    model: Job,
    url: "/api/jobs?format=json"
});

var JobView = Backbone.View.extend({
    el: $('#jobs'),

    _templatesrc: $("#job-template").html(),
    _template: {},

    initialize: function () {
        var self = this;
        _.bindAll(this, 'render');
        //create the template
        this._template = Handlebars.compile(this._templatesrc);

        //setup data
        this.collection = new JobList();
        //response function from server query
        var response = function () {
            console.log(arguments);
            self.render();
        };
        var response2 = function () {
            console.error(arguments);
            self.render();
        };
        this.collection.fetch();
    },

    render: function () {
        console.log("models", this.collection.models);
        $(this.el).html(this._template(this.collection.models));
    }

});
var view = new JobView();
})(jQuery); 
```

当我这样做时，`this.collection.fetch()`我什么也得不到。当我这样做时`this.collection.fetch({ success:response, error:response2});`，会引发以下错误：

```
Backbone.View.extend.initialize.response2 app.js:29
g.wrapError backbone-min.js:104
f.Callbacks.o jquery.min.js:2
f.Callbacks.p.fireWith jquery.min.js:2
w jquery.min.js:4
f.support.ajax.f.ajaxTransport.send.d 
```

在 chrome 中，我可以说它返回一个 JSON 响应，看起来像

```
[{"Client":"hi",
  "ReporterTime":"\/Date(-62135578800000-0500)\/",
  "TimeTaken":PT0S,
  "Status":"Start"}] 
```

关于为什么 Backbone 没有将我的 JSON 响应转换为集合的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:54:58.530

除非我弄错了 PT0S 不是有效的 JSON。尝试用引号将其返回：

```
[{"Client":"hi",
  "ReporterTime":"\/Date(-62135578800000-0500)\/",
  "TimeTaken":"PT0S",
  "Status":"Start"}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T20:19:53.693

我刚刚在[ServiceStack.Text 的 JsonSerializer中](https://github.com/ServiceStack/ServiceStack.Text)[修复了对 TimeSpans](https://github.com/ServiceStack/ServiceStack.Text/commit/52cb0b432e57897f65943f59adad1abbb5d9c26a)的支持。

将从 v3.94+ 开始在[NuGet](http://nuget.org/packages/ServiceStack.Text)或[GitHub 上](https://github.com/ServiceStack/ServiceStack.Text/downloads)提供。

# php - 使用同一行的部分数据更新 Mysql 记录

> ID：11752467
> 
> 赞同：1
> 
> 时间：2012-08-01T04:15:36.750
> 
> 标签：php, mysql, database

我有一个表格，纬度和经度在一个字段中连接在一起，用逗号/空格分隔值。这是一个糟糕的计划，因为现在我需要将纬度和经度分成单独的字段。

因此，我向表中添加了 2 个新字段，并且需要根据表中的现有数据填充它们。新字段设置为十进制（6,9），即使通过更新查询传递了大量数字，它也会显示数据轮次。

它看起来像这样：

```
ID   LOCATION                         LAT        LONG
1     43.12345,-118.12345           0.000000    0.000000
2     43.11223999, -118.43232997    0.000000    0.000000 
```

我想写 2 个查询： 1) 更新 TABLE set LAT= LOCATION，但是它需要第一组字符，从第一个数字到逗号之前

2) 更新 TABLE 集 LONG= LOCATION，但它采用字符组，从逗号/空格“，”到文本字符串的末尾。

我不确定这是否是 reg-ex 的事情，或者我是否应该在文本上使用 substr 或其他一些函数的组合。

任何帮助找到这个方向的帮助一如既往。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:57:44.670

您可以简单地完成此操作：

```
UPDATE YOUR_TBL
SET    LAT    = CAST(TRIM(SUBSTRING_INDEX(LOCATION, ',',  1)) AS DECIMAL(9,6)),
       `LONG` = CAST(TRIM(SUBSTRING_INDEX(LOCATION, ',', -1)) AS DECIMAL(9,6)) 
```

# iphone - custom background on tabbar in storyboard

> ID：11752469
> 
> 赞同：1
> 
> 时间：2012-08-01T04:15:52.837
> 
> 标签：iphone, ios, storyboard, tabbar, ios5

So I have to admit, that I had this code working perfectly up until a day or so ago when I added a new view, so I'm rather frustrated at the moment.

The setup: I have a storyboarded app that contains a tabbar. In the AppDelegate, I have the following for attaching the CoreData

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;
    UINavigationController *navigationController = [[tabBarController viewControllers] objectAtIndex:0];
    GamesViewController *controller = [[navigationController viewControllers] objectAtIndex:0];
    controller.managedObjectContext = self.managedObjectContext;

    return YES;
} 
```

Also in the AppDelegate, I had this method that would set the standard tab background to an image of my choosing:

```
- (void)customizeInterface {    
    UIImage* tabBarBackground = [UIImage imageNamed:@"tab_background"];
    [[UITabBar appearance] setBackgroundImage:tabBarBackground];
} 
```

So this all worked fine *until* I added another login view that precedes my tabs. I had to change what the CoreData was initially being set too (from my tabs to my login/initializing view). Below is the new setup of how the storyboard looks.

![Here's the new setup in my storyboard](../Images/8a488d37c8328c9334db211faaf41b8f.png)

Now when the app loads up... the background image appears initially as before, but *only* on the first tab. Once I click off if it, it switches to the default gradient color again. If I go back to the first / initial tab, the background does not-reapply itself, it stays as the colored gradient.

Here is the amended applicationDidFinishLaunching code to go along with it:

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    //instantiate local context
    NSManagedObjectContext *context = [self managedObjectContext];
    if (!context) {
        // Handle the error.
        NSLog(@"Error: Context is null");
    }

    LoginViewController *rootViewController = [LoginViewController alloc];
    rootViewController.managedObjectContext = context;

    return YES;
} 
```

* * *

So then what I tried to do, is go into the viewDidLoad in the first VC that my tabbar loads up (GameViewController) and tried adding this to fix the problem:

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [self.tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"dock_background"]];
} 
```

That didn't work, so I also tried using the same original code that I had in my AppDelegate and that also didn't work:

```
- (void)viewDidLoad {
    [super viewDidLoad];
    UIImage* tabBarBackground = [UIImage imageNamed:@"tab_background"];
    [[UITabBar appearance] setBackgroundImage:tabBarBackground];
} 
```

* * *

So... I'm sort of stuck. I've got to be doing (or not doing) something so obvious... Anyone out there have any tips / pointers?

Thanks a ton - Drew

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:38:39.133

Delegate.h file

@interface AppDelegate : UIResponder

```
@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) UIImageView *imgV;
@property (strong, nonatomic) UIViewController *viewController;
@property (strong, nonatomic) UITabBarController *tabBarController;

@end 
```

Delegate.m file

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.

        self.viewController = [[DeskboardVctr alloc] initWithNibName:@"DeskboardVctr" bundle:nil];

    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.delegate=self;
    self.imgV=[[UIImageView alloc] init];
    self.imgV.frame=CGRectMake(0, 0, 1024, 49);
    [[self.tabBarController tabBar] insertSubview:self.imgV atIndex:1];
    self.tabBarController.delegate=self;
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];

    return YES;
} 
```

Tabbar Delegate Methods

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController{
    NSUInteger index=[[tabBarController viewControllers] indexOfObject:viewController];
        switch (index) {
            case 0:
                self.imgV.image=[UIImage imageNamed:@"t1.png"];
                break;
            case 1:
                self.imgV.image=[UIImage imageNamed:@"t2.png"];
                break;
            case 2:
                self.imgV.image=[UIImage imageNamed:@"t3.png"];
                break;
            case 3:
                self.imgV.image=[UIImage imageNamed:@"t4.png"];
                break;
            case 4:
                self.imgV.image=[UIImage imageNamed:@"t5.png"];
                break;
            default:
                break;
        }
    return YES;
} 
```

Hope you may help this thanks

# ios - NSInvalidArgumentException 原因：'-[__NSCFString > sortedArrayUsingComparator:]:

> ID：11752471
> 
> 赞同：0
> 
> 时间：2012-08-01T04:16:01.950
> 
> 标签：ios, sorting, nsarray

我收到一个奇怪的排序错误。我在一个名为 wordArrayDuplicates 的数组中有一个范围列表。我需要根据范围位置对这个数组进行排序，所以我将字符串转换为 NSNumber 但它不会比较。

> ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFString sortedArrayUsingComparator:]:

```
 - (NSArray *)sortedArray {
            if (!sortedArray) {
            sortedArray = [[NSArray alloc]init];
             }
        return [wordArrayDuplicates sortedArrayUsingComparator:(NSComparator)^(id obj1, id obj2){
            NSNumber * lastName1 = [NSNumber numberWithInt:NSRangeFromString(obj1).location];
            NSNumber * lastName2 = [NSNumber numberWithInt:NSRangeFromString(obj2).location];
            return [lastName1 compare:lastName2]; }];
    }
    -(void)beginGoingThroughDuplicatesAtWordIndex:{
        if (index == 1) {[self loadDuplicates];}
        [string addAttribute:(id)kCTForegroundColorAttributeName
                       value:(id)[UIColor blackColor].CGColor
                       range:NSMakeRange(0, string.length)];
        BOOL shouldContinue = YES;
        while (shouldContinue == YES && index<[[self sortedArray] count]) {
            if (![[tv.text substringWithRange:NSRangeFromString([[self sortedArray] objectAtIndex:index-1])] isEqualToString:[tv.text substringWithRange:NSRangeFromString([[self sortedArray] objectAtIndex:index])]]) {
                shouldContinue = NO;
            }
                [string addAttribute:(id)kCTForegroundColorAttributeName
                               value:(id)[UIColor redColor].CGColor
                               range:NSRangeFromString([sortedArray objectAtIndex:index-1])];
            index++;
        }
           textlayer.string = string;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:13:41.510

当您使用`sortedArrayUsingSelector:`, 对数组进行排序时

```
[wordArrayDuplicates sortedArrayUsingSelector:@selector(sortedArrayUsingComparator:)]; 
```

您正在传递将*在数组中的*每个对象上调用的选择器。因此，您必须提供一些在数组中的对象中实现的方法。例如`compare:`， 的标准方法`NSString`：

```
[wordArrayDuplicates sortedArrayUsingSelector:@selector(compare:)]; 
```

您正在传递另一种`NSArray`方法。您必须选择要使用选择器或比较器进行排序，但不能在另一个内部调用一个。

* * *

在您正确`- (NSArray *)sortedArray`使用的示例中`sortedArrayUsingComparator:`，请坚持这种方式。

### 使用建议

通常，在从代码的一个位置对数组进行排序时应该使用`sortedArrayUsingComparator:`，以避免在对象类中创建选择器。

当从代码中的许多地方调用排序时，创建选择器可能更有用。即使它不是您自己的对象并且您只是以某种特殊方式排序，您也可以使用某种方法`NSString`创建一个类别并使用它。`NSString``customCompare:`

# php - 如何使用php替换表格标签中的某些内容

> ID：11752472
> 
> 赞同：1
> 
> 时间：2012-08-01T04:16:06.983
> 
> 标签：php

我有数千个包含下表内容的 html 页面~

```
<table height="94" cellpadding="0" width="760" border="0" cellspacing="0">
..... 
</table> 
```

我想删除这个表标签：~

```
<table height="94" cellpadding="0" width="760" border="0" cellspacing="0"> 
```

以及其中的内容。

我试过了：~

```
preg_replace("/<(\/?table height="/94/".*?)>/si","",$str); 
```

但失败了，它只是删除了我所有的标签及其内容。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:20:38.150

尝试：

```
preg_replace('#<table height="94".*?>.*?</table>#si',"",$str); 
```

# php - how to override Drupal deafult output contents of CCK field on new line

> ID：11752478
> 
> 赞同：1
> 
> 时间：2012-08-01T04:16:47.513
> 
> 标签：php, templates, drupal, field

I'm quite new to Drupal (using 7), but I've managed to set up my content types (e.g. `'concert'`) and I've created a `node-concert.tpl.php` whose HTML structure I need to rewrite to fit the information particular to the `concert` content type.

I have a wealth of CCK fields (almost all single-line text fields) in this content type, and I know how to access the contents of a field by using `<?php print render($content['field_fieldname']); ?>`. My problem is this: Drupal outputs every field on a new line. So, if I have the following fields with the following values:

```
field_concert_date = January 1, 2013
field_concert_time = 3 PM
field_concert_location = Boston, MA 
```

Drupal will simply output each field value on a new line (all field labels are hidden). The output I want would go something like:

```
January 1, 2013 at 3PM in Boston, MA 
```

I tried to achieve this by wrapping the output of all three fields in an `<h2>` tag, like so:

`<h2><?php print render($content['field_concert_date']); ?> at <?php print render($content['field_concert_time']); ?> in <?php print render($content['field_concert_location']); ?></h2>`

But Drupal still outputs everything (even the hard-coded text inside the `<h2>` tag) on its own line:

```
January 1, 2013
at
3 PM
in
Boston, MA 
```

I've looked at [Customize a field output](https://stackoverflow.com/questions/5835392/customize-a-field-output) and [Drupal: Print field without markup](https://stackoverflow.com/questions/5759856/drupal-print-field-without-markup) as well as done some basic Googling, but I can't quite find a reference to this **specific** problem. I'm assuming the culprit lies in some extra markup that is getting added somewhere that forces a new line at the end of every field, but I'm not entirely sure where it would be coming from. Is it in `field.tpl.php`? Or somewhere else? Or is it related to the call to `render()` (something that forces a line break after `render()` successfully returns the contents of a field)? Like I said, I'm fairly new to Drupal and haven't yet figured out how to pinpoint small-scale (but important!) problems like this.

Thanks!

An additional note: I'm in the process of creating a Drupal theme from scratch, and so far the only CSS I'm pulling in is a CSS Reset.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:40:04.400

您是否使用文本作为这些字段的输入格式？从那里开始（/admin/structure/types/manage/[content_type]/fields）。

然后检查相关内容类型的**管理显示**选项卡 (/admin/structure/types/manage/[content_type]/display) 并确保您使用的是**纯文本**格式。

还要检查为应用于这些字段的文本格式启用的任何过滤器的**过滤器处理顺序，屏幕位于 /admin/config/content/formats。**

# android - Where can I place my game logic?

> ID：11752479
> 
> 赞同：1
> 
> 时间：2012-08-01T04:17:03.170
> 
> 标签：android, android-fragments, fragment

I face a problem on how to maintain the life cycle of a game logic. I define a game logic in a `Fragment`. When I switch game fragment to other fragment like setting fragment, the fragment is released and the game logic is also released.

How do I maintain the game logic?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:53:34.347

尝试使用内部片段..也就是说，有一个父片段而不是子片段..并根据您的需要使您的设置片段可见和隐藏..

# java - Refreshing application context after every 2 minutes

> ID：11752481
> 
> 赞同：0
> 
> 时间：2012-08-01T04:17:05.233
> 
> 标签：java, spring

I have a query is that I want my application context to be get refreshed after every 2 minutes..rite now I am getting the application context in my application ..

```
public class App {
    public static void main(String[] args) {
        ApplicationContext context = new ClassPathXmlApplicationContext(
                "Spring-Module.xml");

        HelloWorld obj = (HelloWorld) context.getBean("helloBean");
        obj.printHello();
    } 
```

Please advise how to refresh the application context in every 2 minutes

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T05:09:26.060

参考这个链接

[http://hsenidians.blogspot.in/2007/07/reloading-spring-context-dynamically.html](http://hsenidians.blogspot.in/2007/07/reloading-spring-context-dynamically.html)
[http://techdive.in/spring/spring-refresh-application-context](http://techdive.in/spring/spring-refresh-application-context)

尝试这个

```
public class RefreshSpringContext {

    public static void main(String args[]) {
        SpringThread t = new SpringThread();
        new Thread(t).start();
    }
}

class SpringThread implements Runnable {

    public SpringThread() {
    }

    public void run() {
        try {
            ApplicationContext context = =  new ClassPathXmlApplicationContext("Spring-Module.xml");
            ((ConfigurableApplicationContext) context).refresh();
            Thread.sleep(12000);

            HelloWorld obj = (HelloWorld) context.getBean("helloBean");
            obj.printHello();
        } catch (Exception e) {
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:20:44.057

其中一种方法是调用具有睡眠时间的线程。像下面的东西

```
 for (int i = 0;i < howmanytime;i++) {
            //Pause for 2 seconds
            Thread.sleep(2000);
           //Your logic
        } 
```

# jquery - jquery clear click event and modify this event

> ID：11752482
> 
> 赞同：0
> 
> 时间：2012-08-01T04:17:24.563
> 
> 标签：jquery, jquery-selectors

In Issue form, I have one IFrame which has "Show Comments" and "Email Service Guide" click function. The function is when click "Email Service Guide", open Email form.

What I want to modify is... When i click "Email Service Guide", I want to show confirm meassage box firstly. If choose "ok", want to show Email form. Else choose "Cancel", don't show any form.

I use the jquery selector, but the problem is the code showing directly the Email form firstly. What should i do? I also attach the form style and Html IFRAME portion. Thanks.. please give me some suggestion.![enter image description here](../Images/6c0e7528d4be387cd56cd3b74ea86c42.png)!![enter image description here](../Images/ec31e400af26a2e8551af643811b5d3e.png)

```
$('#kbviewer').load(function () {
    $(this).contents().find('#btnEmailArticle').click(function () {
        var msg = confirm('The guide selected is for internal circulation. Click OK to proceed or Click Cancel.');
            if (msg) {
            window.execScript(action);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:24:40.633

```
$('#kbviewer').load(function () {
    $(this).contents().find('#btnEmailArticle').click(function(event) {
        var msg = confirm('The guide selected is for internal circulation. Click OK to proceed or Click Cancel.');
            if (msg) {
            window.execScript(action);
            } else {
             event.preventDefault(); 
            }
        });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:20:42.380

如果我理解正确，您应该`style="display:none"`在 iframe 上使用，然后`show()`在 iframe ...

```
$('#kbviewer').load(function () {
    $(this).contents().find('#btnEmailArticle').click(function () {
        var msg = confirm('The guide selected is for internal circulation. Click OK to proceed or Click Cancel.');
            if (msg) {
            $('#iframe').show();
            window.execScript(action);
        }
    });
}); 
```

# asp.net-mvc - Adding a MVC 4 controller using entity framework 5 database first

> ID：11752484
> 
> 赞同：2
> 
> 时间：2012-08-01T04:17:35.687
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4

I'm trying to configure an MVC 4 application using EF 5 against the System.Web.Providers Membership DB. The ADO.NET Entity Data Model appears correct. The classes generated by the EF 5.x code generator look ok, but do not have a [Key] attribute. When I try to create a User Controller, I get the following error:

* * *

## Microsoft Visual Studio

Unable to retrieve metadata for 'Citrius.Admin.User'. One or more validation errors were detected during model generation:

```
\tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'Membership' has no key defined. Define the key for this EntityType.
\tSystem.Data.Entity.Edm.EdmEntityType: : EntityType 'Profile' has no key defined. Define the key for this EntityType.
\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'Memberships' is based on type 'Membership' that has no keys defined.
\tSystem.Data.Entity.Edm.EdmEntitySet: EntityType: EntitySet 'Profiles' is based on type 'Profile' that has no keys defined.
```

I thought I saw a walkthrough of this, using these versions, but cannot find it. I've tried to find a solution but all the examples are of previous versions.

Am I too far out on the bleeding edge?? Any help would be appreciated...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T09:53:02.537

为什么不手动分配密钥？

进入每一个并在应该是 Key 的字段上方添加 [Key]。

那应该摆脱这些错误。

# jsp - strip characters after finding special character

> ID：11752489
> 
> 赞同：1
> 
> 时间：2012-08-01T04:18:10.547
> 
> 标签：jsp

I am using jsp for a web based project. i want to remove all the characters after '@' including '@'.

suppose I got "stackoverflow@stack.com" as input from a user. I have to remove the characters after @ and also '@' i.e.

```
o/p is stackoverflow 
```

I think one way is using java array OR by regex. Please suggest me the better way of solving this problem. Are there any other ways of solving this??

How can I do it using JSP? I can not use javascript for this only jsp.

Thank You.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T04:24:10.093

为什么不使用 Java 字符串？

单程：

```
String output = input;
int at = input.indexOf('@');
if (at != -1) {
    output = input.substring(0, at); 
} 
```

（它可以优化为更少的行，但这是最清晰的编写方式）。

或者

```
String output = input.split("@", 2)[0];
// I prefer the first way, this is a bit more wasteful, but that is probably
// just a personal hang up from the days of embedded C ;-) 
```

# apache - firefox url rewriting mysteriously, but not other browsers

> ID：11752491
> 
> 赞同：2
> 
> 时间：2012-08-01T04:18:28.383
> 
> 标签：apache, firefox, redirect, ssl, haproxy

I have a bizarre problem that only (so far) manifests itself in Firefox, where it rewrites the URL to a different domain (also hosted by us). The rewrite however does not occur in Safari or Chrome (I'm testing from a MacBook Pro).

My setup is this: The loadbalancer running HAProxy listening on 80 an internally 8080 and Apache listening on 443\. Traffic on 80 is passed to the backend, traffic from Apache is SSL decrypted then sent to localhost:8080 and then passed to the backend's port 8443\. On the backend, any traffic from 80 is considered non-SSL, but on 8443 is considered decrypted SSL. Backend servers are running Apache.

If I go to [https://www.sslexample.com/](https://www.sslexample.com/) (henceforth SSL_DOMAIN) from any browser on an SSL site, everything behaves as it should. It hits the Apache SSL accelerator, is decrypted, passed to the proxy, then sent to the backend. If I go to [http://www.nonsslexample.com/](http://www.nonsslexample.com/) (henceforth NONSSL_DOMAIN), again, everything behaves as expected for a non-SSL site, it hits the proxy, then the backend, and non-SSL traffic is served as expected.

Here's where things get weird. If I go to SSL_DOMAIN via http, what's supposed to happen is that I'm redirected to https. For one of our mixed SSL/non-SSL domains, this works as expected from all browsers. BUT on Firefox (and sometimes on Safari for my colleague and never on Chrome) if I go to SSL_DOMAIN via http, the first thing that happens is that the URL is immediately rewritten to the NONSSL_DOMAIN and I'm redirected to the completely different domain.

Huh?

Looking at the logs on the LB, Chrome and Safari behave as they should--hit the lb on port 80--but Firefox never hits the loadbalancer with the SSL_DOMAIN on port 80\. But the time to LB sees it, it's already been rewritten.

I installed the Tamper Data plugin on Firefox, and the results confused me more. The initial correct URL header never receives a reply header. It's immediately replaced with the incorrect one. And things carry on as if I had intended the non-SSL URL.

I looked in my /etc/hosts file (since this is in testing and we're overriding these domains), and everything looks correct.

If you have ever encountered a problem like this before, I'd be very grateful for tips on how to debug it.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-29T03:24:59.333

regilero 是对的。

我刚刚在 Mac OS X 10.9.1 上使用 Firefox 和 Safari 时遇到了同样的问题。他们似乎都缓存了 301 重定向，并在对曾经重定向的 URL 的下一个请求进行内部重写。

这很有趣，尤其是当您尝试在 Web 服务器配置中编写和测试重定向时。

我的解决方案是清空浏览器缓存。然后将再次从服务器读取重定向。每次我想再次阅读重定向时，我都必须这样做。

# asp.net - ASP.NET Web API - 实体框架 - 500 内部服务器错误 .Include(param => param.field)

> ID：11752495
> 
> 赞同：5
> 
> 时间：2012-08-01T04:18:53.633
> 
> 标签：asp.net, sql, linq, entity-framework, asp.net-web-api

我目前正在使用实体框架（我知道它还不是最稳定的平台）开发一个使用数据库优先方法的 Web API 项目，但我遇到了一些非常奇怪的事情。

当我的 APIController 中的 GET 方法尝试使用涉及的 LINQ Include() 方法返回 DbSet 中的所有记录时，它将返回 500 错误：

```
// GET api/Casinos
    public IEnumerable<casino> Getcasinos()
    {
            var casinos = db.casinos.Include(c => c.city).Include(c => c.state);
            return casinos.AsEnumerable();
        } 
```

然而，这个方法工作正常，并从我的数据库中返回我的数据：

```
// GET api/States
    public IEnumerable<state> Getstates()
    {
        return db.states.AsEnumerable();
    } 
```

因此，我已经在其他情况下证明，如果它返回没有 LINQ 查询的实体，它的效果很好，但是当在 DbContext 上使用 Include 方法时，它会失败。

当然，试图找到这个错误是不可能的，即使使用 Fiddler、Chrome/Firefox 开发工具，并添加`GlobalConfiguration.Configuration.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always;`

如果有人解决了这个问题，很高兴知道一个好的解决方案，这样我就可以开始返回我的数据了！谢谢！：）

PS 我正在使用 SQL Server 2012

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T07:39:23.563

这是由于序列化错误（Json/XML）而发生的。问题是您直接尝试通过网络传输模型。例如，请参见：

```
public class Casino
{
    public int ID { get; set; }
    public string Name { get; set; }

    public virtual City City { get; set; }
}

public class State
{
    public int ID { get; set; }
    public string Name { get; set; }

    [XmlIgnore]
    [IgnoreDataMember]        
    public virtual ICollection<City> Cities { get; set; }
}

public class City
{
    public int ID { get; set; }
    public string Name { get; set; }

    public virtual  State State { get; set; }

    [XmlIgnore]
    [IgnoreDataMember]
    public virtual ICollection<Casino> Casinos { get; set; }
}

public class Context : DbContext
{
    public Context()
        : base("Casino")
    {

    }

    public DbSet<Casino> Casinos { get; set; }
    public DbSet<State> States { get; set; }
    public DbSet<City> Cities { get; set; }
} 
```

注意`XmlIgnore`和`IgnoreDataMember`。您需要限制避免序列化，这样它就不会以循环方式发生。此外，上述模型仍然无法工作，因为它具有虚拟。从任何地方删除 virtual ，即`City`, `Cities`，`Casinos`然后`State`它会起作用，但这会效率低下。

**总结一下：**使用 DTO 并仅发送您真正想要发送的数据，而不是直接发送您的模型。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-06-12T21:13:37.140

我在 ASP.Net Core Web Api 中遇到了同样的问题，并使其与此解决方案一起使用：将 Microsoft.AspNetCore.Mvc.NewtonsoftJson nuget 包添加到 web api 项目。并在 ConfigureServices 方法的 Startup.cs 类中添加以下代码：

```
services.AddControllersWithViews().AddNewtonsoftJson(options =>
 options.SerializerSettings.ReferenceLoopHandling = Newtonsoft.Json.ReferenceLoopHandling.Ignore
); 
```

# c# - stringbuilder 不转义大括号

> ID：11752496
> 
> 赞同：1
> 
> 时间：2012-08-01T04:18:58.430
> 
> 标签：c#, .net, json

我正在使用 JSON 获取 System.Net.WebResponse 然后将响应读取到 StringBuilder 中，然后通过调用 StringBuilder.ToString() 方法获取响应结果。我无法使用 Newtonsoft.Json.Linq.JObject.Parse(repsonse); 解析这样的响应。

我的问题是 ToString() 方法正在删除我的“{”和“}”字符，因为除非与另一个“{”匹配，否则它们会被转义。即使我做了一个 StringBuilder.Replace("{", "{{") 它也不起作用，因为最后的括号转义了第一个括号 --> 下面的示例

我获取响应的代码是：

```
public static string GetResponseFromRequest(string url){       

        System.Net.WebRequest req = System.Net.WebRequest.Create(url);
        System.Net.WebResponse res = req.GetResponse();
        System.Text.StringBuilder sb = new System.Text.StringBuilder();

        byte[] read = new byte[256];
        int count = res.GetResponseStream().Read(read, 0, 256);
        while (count > 0)
        {
            sb.Append(System.Text.ASCIIEncoding.ASCII.GetString(read));
            count = res.GetResponseStream().Read(read, 0, 256);
        }
        res.GetResponseStream().Close();

        res.Close();

        return sb.ToString();
    } 
```

以下是我的回复的示例：

```
{{ 
"id" : "myID",
"Name" : "MyDisplayName",
"description" : "A, MyDescription",
}"hasOverview" : true,
"hasDescription" : true,
  } 
```

在调用 StringBuilder.ToString 之后，它看起来像这样：

```
 "{ 
    "id" : "myID",
    "Name" : "MyDisplayName",
    "description" : "A, MyDescription",
   }"hasOverview" : true,
    "hasDescription" : true,
      " 
```

如果我调用 StringBuilder.Replace("{", "{{") 和 StringBuilder.Replace("}", "}}") 我得到：

```
"{{ 
    "id" : "myID",
    "Name" : "MyDisplayName",
    "description" : "A, MyDescription",
   }}"hasOverview" : true,
    "hasDescription" : true,
      " 
```

我需要一种方法来告诉 ToString() 返回字符串生成器所持有内容的文字表示，因此它不考虑特殊字符。如果可能的话，特别是 '{' 和 '}' 字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:29:07.237

我通过执行以下操作反驳了您最初的假设：

```
public static void TestSB()
{
    var testValue = "{{ \"id\" : \"myID\", \"Name\" : \"MyDisplayName\", \"description\" : \"A, MyDescription\", }\"hasOverview\" : true, \"hasDescription\" : true, }";
    var sb = new StringBuilder();
    sb.Append(testValue);
    var sbToString = sb.ToString();

    // Prints true
    Console.WriteLine(sbToString.Equals(testValue));
} 
```

因此，除此之外，我认为问题在于您试图一次将文本转换为 256 个字节，并在此过程中修改字符。框架中有一些类是为您尝试完成的任务而设计的，即从流中读取文本。试试这个：

```
public static string GetResponseFromRequest(string url)
{
    var req = System.Net.WebRequest.Create(url);
    using (var res = req.GetResponse())
    using (var sr = new StreamReader(res.GetResponseStream()))
        return sr.ReadToEnd();
} 
```

我使用以下方法对此进行了测试，结果看起来不错：

```
public static void TestGetResponse()
{
    Console.Out.WriteLine(GetResponseFromRequest("http://www.google.com"));
} 
```

编辑：

或者更好的是，

```
var result = new System.Net.WebClient().DownloadString(url) 
```

# google-maps-api-3 - 谷歌地图 v3 MarkerImage & jQuery.Rotate

> ID：11752498
> 
> 赞同：3
> 
> 时间：2012-08-01T04:19:23.657
> 
> 标签：google-maps-api-3

我有以下代码，它是 Google Maps V3 上的自定义图标。我想使用 jQuery.Rotate 插件来旋转它。

```
var image = new google.maps.MarkerImage(
    "markers/test.png",
    new google.maps.Size(52, 52), // size
    new google.maps.Point(0, 0), // origin
    new google.maps.Point(20, 0) // anchor
);

marker = new google.maps.Marker(
{
    map: map,
    draggable: false,
    position: markerData[i].latLng,
    visible: true,
    icon: image,
    optimized: false
}); 
```

问题是 jQuery.Rotate 想要 DOM id 来识别要旋转的元素。 Markerimage 没有，我无法指定它。

例如。

```
<img src="img" id="image">
$("#image").rotate(15); 
```

谁能给我看一些示例代码，让我可以为 MarkerImage 分配一个 id，以便 jQuery.Rotate 可以使用它，例如。#image 假设 id 是 id="image"，还是有另一种方法告诉 jQuery.Rotate 使用 MarkerImage 而不是指向 DOM 元素？

任何帮助将不胜感激。如果我找不到这个问题的答案，我需要为我使用的每个图标创建 360 个版本的相同图标，其中有很多。不过，我更喜欢使用这个特定的插件。希望有一个简单的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T03:12:27.303

我无法提供“答案”，只能提供提示和观察。

假设您的地图是一个名为“地图”的 DOM 对象，请查看 DOM 对象`map.l.innerContainer.outerHtml`。（那是小写的“l”-map.l）

在 outerHtml 中，在许多其他 div 中，您应该能够找到包含图标的 img 文件的 div。

我想做和你一样的事情，即时旋转图标，但我还没有时间看看我是否可以组织一种方法在这些 div 上放置一个 id 以方便使用 jquery 旋转它们。div 由 api 创建。

文献中描述了一些 DOM 突变事件（如`DOMNodeInsertedIntoDocument`），但显然它们的实现不可靠/不均匀，听起来它们已从 W3C 规范中删除。我还没有尝试过任何这些，所以不能从个人经验中发表评论。

就我而言，我只是决定为每个基本方向创建图标文件，N NNE NE ENE 等。对于我的应用程序，它似乎使图标对齐得很好，看起来还不错。

如果您的任务成功，请在此处为其他人分享您的解决方案。

# objective-c - 更改块中的实例变量

> ID：11752500
> 
> 赞同：7
> 
> 时间：2012-08-01T04:19:36.723
> 
> 标签：objective-c, xcode, warnings, block, ivar

我对如何更改块内的实例变量感到很困惑。

接口文件（.h）：

```
@interface TPFavoritesViewController : UIViewController {
    bool refreshing;
} 
```

实施：

```
__weak TPFavoritesViewController *temp_self = self;
refreshing = NO;
[myTableView addPullToRefreshWithActionHandler:^{
    refreshing = YES;
    [temp_self refresh];
}]; 
```

正如您可能猜到的那样，当我尝试更改块内的刷新 ivar 时，我会收到一个保留周期警告。我将如何做到这一点而不会出错？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-01T04:43:10.753

Your assignment to `refreshing` is an implicit reference to `self`, it is shorthand for:

```
self->refreshing = YES; 
```

hence the cycle warning. Change it to:

```
temp_self->refreshing = YES; 
```

# ruby-on-rails - 规范验证失败

> ID：11752503
> 
> 赞同：0
> 
> 时间：2012-08-01T04:19:58.187
> 
> 标签：ruby-on-rails, rspec

以下测试都通过了，*除了*“描述“发送的处理”做和“描述“接收的处理”做'中的“it ​​{ should be_valid}”行

```
require 'spec_helper'

describe Treating do

  let(:requestee) { FactoryGirl.create(:user) }
  let(:requestor) { FactoryGirl.create(:user) }

  before { @received_treating = requestee.received_treatings.build(intro: "Lorem ipsum") }
  before { @sent_treating = requestor.sent_treatings.build(intro: "Lorem ipsum") }

  describe "sent treatings" do
    subject { @sent_treating }
      it { should respond_to(:intro) }
      it { should respond_to(:requestor_id) }
      it { should respond_to(:requestor) }
      its(:requestor) { should == requestor }
      it { should be_valid }
  end

  describe "received treatings" do
    subject { @received_treating }
      it { should respond_to(:intro) }
      it { should respond_to(:requestee_id) }
      it { should respond_to(:requestee) }
      its(:requestee) { should == requestee }
      it { should be_valid }
  end

  describe "accessible attributes" do
    it "should not allow access to requestor_id" do
      expect do
        Treating.new(requestor_id: requestor.id)
      end.should raise_error(ActiveModel::MassAssignmentSecurity::Error)
    end

    it "should not allow access to requestee_id" do
      expect do
        Treating.new(requestee_id: requestee.id)
      end.should raise_error(ActiveModel::MassAssignmentSecurity::Error)
    end
  end

  describe "when requestor_id is not present" do
    before { @sent_treating.requestor_id = nil }
    it { should_not be_valid }
  end

  describe "when requestee_id is not present" do
    before { @received_treating.requestee_id = nil }
    it { should_not be_valid }
  end
end 
```

这是错误：

```
Failures:

  1) Treating sent treatings 
     Failure/Error: it { should be_valid }
       expected valid? to return true, got false
     # ./spec/models/treating_spec.rb:19:in `block (3 levels) in <top (required)>'

  2) Treating received treatings 
     Failure/Error: it { should be_valid }
       expected valid? to return true, got false
     # ./spec/models/treating_spec.rb:30:in `block (3 levels) in <top (required)>' 
```

最后，我的 user.rb 模型：

```
class Treating < ActiveRecord::Base
  attr_accessible :intro, :proposed_date, :proposed_location

  validates :requestor_id, presence: true
  validates :requestee_id, presence: true

    belongs_to :requestor, class_name: "User"
    belongs_to :requestee, class_name: "User"

end 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:23:57.817

在这个测试中，您有两个会议，并且在夹具中只设置了每个会议的两个 id 之一：

```
before { @received_treating = requestee.received_treatings.build(intro: "Lorem ipsum") }
before { @sent_treating = requestor.sent_treatings.build(intro: "Lorem ipsum") } 
```

假设用户与您上一个问题中的用户相同，

```
class User < ActiveRecord::Base
  ...
  has_many :sent_meetings, :foreign_key => "requestor_id", :class_name => "Meeting"
  has_many :received_meetings, :foreign_key => "requestee_id", :class_name => "Meeting" 
```

@received_treating 应该有一个 requestee_id 而不是 requester_id（从未在任何地方分配过！）并且@sent_treating 有一个 requestor_id。

同样，出于与[上一个问题](https://stackoverflow.com/questions/11750715/rspec-failing-validations/11750936)相同的原因，验证失败，因为两者都只有验证集中请求的两个 id 之一。

您期望的行为是什么？如果要建立与用户的 n:m 关系，则必须在某个时候指定第二个用户。也许你的意思是这样的夹具：

```
before do 
  @treating = requestor.sent_treatings.build(intro: "Lorem ipsum")
  @treating.requestee = requestee
end 
```

也许你甚至想在 Treating 中创建一个自定义设置器

```
def send_to(user)
  requestee = user
end 
```

然后你可以写类似

```
before { @sent_treating = requestor.sent_treatings.build(intro: "Lorem ipsum").send_to(requestee) } 
```

这给了你一个同时设置了 id 的 Treating。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T05:28:38.910

使用 before(:each) 块

```
before(:each) {
    @received_treating = requestee.received_treatings.build(intro: "Lorem ipsum") 
    @sent_treating = requestor.sent_treatings.build(intro: "Lorem ipsum") 
} 
```

# javascript - 统一触摸和点击事件

> ID：11752506
> 
> 赞同：2
> 
> 时间：2012-08-01T04:20:00.543
> 
> 标签：javascript, jquery, events, touch, multi-touch

我假设这个问题已经被问死了，但我没有找到任何好的东西。我想要的是一组跨设备的统一事件。我知道映射并不总是一对一的，而只是涵盖了一些基础知识，例如：

*   忽略/禁用触摸设备上的悬停事件/样式

*   将 touchstart 映射到 mousedown

*   同样，touchend 到 mouseup

*   点击点击

*   ETC...

*   甚至可以触摸，按住 1s，触摸移动到拖动开始...

我还没有考虑所有细节。当然，设备特定的事件（例如悬停在桌面上或在平板电脑上滑动）无法翻译，如果不支持，则应忽略。

任何人都知道会执行此操作的库。最好是一个不可见的 jQuery 补丁。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:25:16.193

[jQuery Mobile](http://jquerymobile.com/)正是这样做的，除此之外还有很多其他事情。

请参阅他们关于[虚拟鼠标事件](http://jquerymobile.com/demos/1.1.1/docs/api/events.html)的文档，其中：

> ...提供一组“虚拟”鼠标事件，试图抽象出鼠标和触摸事件

# android - Android MAP api 密钥在另一个项目中不起作用

> ID：11752507
> 
> 赞同：0
> 
> 时间：2012-08-01T04:20:02.720
> 
> 标签：android, google-maps

我创建了一个具有 mapactivity 和 mapview 的项目，它运行良好。但是当我在同一台电脑上创建另一个项目时，它显示无法连接工厂客户端。任何指针如何解决它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T05:31:52.080

我预测这是您的 API 密钥的问题。当您将 goolge 地图与您的应用程序集成时，您应该生成一个密钥并应该添加到您的应用程序中。我认为这是您的地图仅显示网格的问题。我有曾经遇到过同样的问题。我预测这可能是你的问题。这个[链接](http://www.codeproject.com/Articles/112044/GPSLocator-App-to-Find-Current-Nearest-Location-us)可以帮助你解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T06:50:16.910

我认为您正在为您提到的两个项目使用不同的密钥库。

# sql - 我什么时候应该在 postgresql 中使用 fetch 关键字

> ID：11752508
> 
> 赞同：2
> 
> 时间：2012-08-01T04:20:05.093
> 
> 标签：sql, postgresql, cursor, plpgsql

我是 pg 游标的新手，我在这里有一个游标：

```
create function simplecur() returns refcursor as $$
declare 
    abc cursor for 
    select t.registrant, u.display_name from incident_info t, sys_user u
    where t.registrant != 10000000 and u.id = t.registrant
    group by t.registrant, u.display_name
    order by t.registrant ;
begin
    open abc;
    return abc;
end
$$language plpgsql; 
```

我只是使用

```
select simplecur() 
```

它返回

```
abc 
```

现在，我想知道，当我使用时，我怎么能得到我的 sql 的结果

```
fetch all from abc; 
```

它向我展示了这样的：

```
ERROR:  cursor "abc" does not exist 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:09:02.757

当您使用游标变量时，您需要有[一个未结事务：](http://www.postgresql.org/docs/current/static/plpgsql-cursors.html#PLPGSQL-CURSOR-USING)

```
begin;
  select simplecur();
  fetch all in abc;
commit; 
```

另一个 SO[例子](https://stackoverflow.com/a/11747129/)。

# opencv - OpenCV CvConvexityDefects 不能工作，不能检测手指！

> ID：11752509
> 
> 赞同：1
> 
> 时间：2012-08-01T04:20:15.093
> 
> 标签：opencv, convex-hull

我正在使用 OpenCv 来检测指尖，但现在遇到了一些障碍！findContours & convexHull & convexityDefects 方法不适用于我的项目。这是我第一次提出问题。谢谢大家！

我的代码如下：

```
int main()
{
CvScalar white = cvRealScalar(255);
CvScalar black = cvRealScalar(0);

CvSeq* contours = 0;
CvMemStorage* storage = cvCreateMemStorage(0);
IplImage* img = cvLoadImage("h.jpg");
IplImage* imgGray = cvCreateImage(cvGetSize(img), img->depth, 1);
IplImage* contoursImg = cvCreateImage(cvGetSize(img), img->depth, 1);
cvZero(contoursImg);
int nWidth = contoursImg->width;
int nHeight = contoursImg->height;
int nChannels = contoursImg->nChannels;
int nStep = contoursImg->widthStep;
for (int i=0; i<nHeight; i++)
    for(int j=0; j<nWidth; j++)
        contoursImg->imageData[i*nStep + j*nChannels] = 255 - contoursImg->imageData[i*nStep + j*nChannels];

cvCvtColor(img, imgGray, CV_BGR2GRAY);
cvThreshold(imgGray, imgGray, 230, 255, CV_THRESH_BINARY);
cvSmooth(imgGray, imgGray);

cvFindContours(imgGray, storage, &contours, sizeof(CvContour), CV_RETR_LIST, CV_CHAIN_APPROX_SIMPLE, cvPoint(0,0));
contours = cvApproxPoly(contours, sizeof(CvContour), storage, CV_POLY_APPROX_DP, 35, 1);
cvDrawContours(contoursImg, contours, CV_RGB(0, 0, 0), CV_RGB(0, 0, 0), 1, 1, 8, cvPoint(0, 0));

CvSeq* hull = cvConvexHull2(contours, 0, CV_CLOCKWISE, 0);
CvSeq* defect = cvConvexityDefects(contours, hull, NULL);
for(; defect; defect = defect->h_next)
{
    int nomdef = defect->total;
    if(!nomdef)
        continue;
    CvConvexityDefect* defectArray = (CvConvexityDefect*)malloc(sizeof(CvConvexityDefect)*nomdef);
    cvCvtSeqToArray(defect, defectArray, CV_WHOLE_SEQ);
    for(int i = 0; i < nomdef; i++)
    {
        cvCircle(contoursImg, *(defectArray[i].end), 5, CV_RGB(255, 0, 0), -1, 8, 0);
        cvCircle(contoursImg, *(defectArray[i].start), 5, CV_RGB(0, 255, 0), -1, 8, 0);
        cvCircle(contoursImg, *(defectArray[i].depth_point), 5, CV_RGB(0, 0, 255), -1, 8, 0);
    }
    free(defectArray);
}

cvNamedWindow("image", 1);
cvShowImage("image", contoursImg);

cvWaitKey(0);
cvReleaseMemStorage(&storage);
cvReleaseImage(&img);
cvReleaseImage(&imgGray);
cvReleaseImage(&contoursImg);
cvDestroyWindow("image");

return 0;       
} 
```

这是我的手图：

[http://www.billwang.net/bbs/oldattach/2006/12/29/billwang_5315954-038-embed.jpg](http://www.billwang.net/bbs/oldattach/2006/12/29/billwang_5315954-038-embed.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-02T11:15:47.820

这些方法运行良好。您在图像外部检测到一个矩形轮廓。由于这覆盖了整个图像，因此没有缺陷，因此没有检测到。见附图。![查看图像外部的青色框](../Images/f696995bf007e00cca147a1eea4a1334.png)

# javascript - 在 AJAX 提交之前使用 jQuery 进行多个下拉选择验证

> ID：11752510
> 
> 赞同：2
> 
> 时间：2012-08-01T04:20:26.547
> 
> 标签：javascript, jquery, html, validation

我在验证表单时遇到问题。我有超过 6 个不同的下拉选择对象。这里以前两个为例：

```
<table id="ProjectTable">
<tr><td>
<select​​​​​​​​​​​​​​ ​​​id="selected1" selectedIndex=0>
    <option></option>
    <option>o1</option>
    <option>o2</option>
    <option>o3</option>
    <option>o4</option>
</select>
</td>
<td>
<select id="selected2" selectedIndex=0>
    <option></option>
    <option>10</option>
    <option>12</option>
    <option>13</option>
    <option>14</option>
</select>
</td></tr></table>
​&lt;button type="button">Submit</button>​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

我想做的是验证下拉选择，如果用户选择空选项（默认是第一个选项），然后点击提交。然后它会收到错误并通知用户他们必须在每个下拉选项中选择一个选项。六个下拉选择 ID 是动态生成的。我知道我可以使用 jQuery .each() 函数来循环选择元素。

谁能帮我解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T04:35:17.107

```
// filter over empty selects
// function will jQuery object
function checkEmptySelect() {
    return $('select').filter(function() {
        // return those selects, with no value selected
        return !this.value.trim();
    });
}

// bind change event to select box
$('select[id^=selected]').on('change', function() {
    // keep reference of returned jQuery object
    var unselect = checkEmptySelect();
    // checking is any non-selected select box exists
    if (unselect.length) {
        unselect.addClass('error'); // if exists then add error class
    } else {  // if no non-selected found
        $('select[id^=selected]').removeClass('error'); // remove error class
    }
})​; 
```

**[演示](http://jsfiddle.net/BgQsn/1/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T04:34:57.657

见[演示](http://jsfiddle.net/gZwxW/)

```
$('#form').submit(function () {
    var valid = true;

    $('select', this).each(function (e) {
        if (!$(this).val()) valid = false;
    });

    if (!valid) {
        $('.error').show();
        return false;
    }
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T05:07:23.073

在这里，我为上述验证问题完成了完整的 bin。

**演示：** [http ://codebins.com/bin/4ldqp94](http://codebins.com/bin/4ldqp94)

**HTML：**

```
<form id="frm1">
  <div class="error">
  </div>
  <table id="ProjectTable">
    <tr>
      <td>
        <select id="selected1" selectedIndex=0>
          <option>
          </option>
          <option>
            O1
          </option>
          <option>
            O2
          </option>
          <option>
            O3
          </option>
          <option>
            O4
          </option>
        </select>
      </td>
      <td>
        <select id="selected2" selectedIndex=0>
          <option>
          </option>
          <option>
            10
          </option>
          <option>
            12
          </option>
          <option>
            13
          </option>
          <option>
            14
          </option>
        </select>
      </td>
      <td>
        <select id="selected3" selectedIndex=0>
          <option>
          </option>
          <option>
            opt1
          </option>
          <option>
            opt2
          </option>
          <option>
            opt3
          </option>
          <option>
            opt4
          </option>
        </select>

      </td>
    </tr>
  </table>
  <button type="submit">
    Submit
  </button>
</form> 
```

**jQuery：**

```
$(function() {
    $("form#frm1").submit(function() {
        var isValid = true;
        $("select").each(function() {
            $(".error").html();
            if ($(this).val() == "") {
                $(".error").html("Please selct value for empty dropdown..!");
                isValid = false;
            }
        });
        return isValid;
    });
}); 
```

**CSS：**

```
.error{
  color:#f81122;
  padding:5px;
} 
```

**演示：** [http ://codebins.com/bin/4ldqp94](http://codebins.com/bin/4ldqp94)

# shell - 如何使用 ldapsearch 检查 UID 是否存在

> ID：11752516
> 
> 赞同：2
> 
> 时间：2012-08-01T04:20:42.320
> 
> 标签：shell, ldap

我想让一个 shell 脚本使用“ldapsearch”来比较文本文件中列出的 UID 和远程 LDAP 目录中的 UID。

我不是 shell 脚本专家，如果有任何帮助，我将不胜感激。以下循环遍历作为参数给出的文本文件，但是当我的文本文件中的 UID 在 LDAP 中不存在时，我需要回显。

```
#!/bin/sh

for i in `cat $1`;
  do ldapsearch -x -H ldaps://ldap-66.example.com -b ou=People,dc=crm,dc=example,dc=com uid=$i | grep uid: | awk '{print $2}';
  echo $i
done 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T04:33:08.400

尝试：

```
#!/bin/sh

url="ldaps://ldap-66.example.com"
basedn="ou=People,dc=crm,dc=example,dc=com"

for i in `cat $1`; do
    if ldapsearch -x -H "$url" -b "$basedn" uid=$i uid > /dev/null
    then
        # Do nothing
        true
    else
        echo $i
    fi
done 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T14:25:28.433

Anttix，这是工作的最终版本。再次感谢。这是否将问题标记为已接受？

```
#!/bin/sh

url="ldaps://ldap-66.example.com"
basedn="ou=People,dc=crm,dc=example,dc=com"

for i in `cat $1`; do
    if ldapsearch -x -H "$url" -b "$basedn" uid=$i | grep uid: | awk '{print $2}' > /dev/null
    then
        # Do nothing
        true
    else
        echo $i
    fi
done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-16T12:43:36.797

```
#!/bin/sh

uids="${1:?missing expected file argument}"
URL='ldaps://ldap-66.example.com'
BASE='ou=People,dc=crm,dc=example,dc=com'

ldapsearch \
  -x -LLL -o ldif-wrap=no -c \
  -H "$URL" \
  -b "$BASE" \
  -f "$uids" \
  '(uid=%s)' uid |
sed \
  -r -n \
  -e 's/^uid: //p' \
  -e 's/^uid:: (.+)/echo "\1"|base64 -d/ep' |
grep \
  -F -x -v \
  -f - \
  "$uids" 
```

# 解释

## 对于`ldapsearch`部分

*   您可以只调用`ldapsearch -f`一次来执行**多个**搜索并从文件中读取它们`$uids`。
*   `(uid=%s)`用作每一行的模板，其中为`%s`每一行填写 。
*   即使出现`-c`错误也需要继续，例如当找不到 UID**时**。
*   `-x`强制执行*简单*的身份验证应该被认为是不安全的。更好地使用 SASL。
*   这`-LLL`将从`ldapsearch`输出中删除不需要的杂物。
*   这`-o ldif-wrap=no`将防止超过 79 个字符的行被换行 - 否则`grep`可能只会获取用户名的第一部分。
*   `uid`告诉只返回该`ldapsearch`属性并跳过我们不感兴趣的所有其他属性；节省一些网络带宽和处理时间。

## 对于`sed`部分

*   `-r`启用的*扩展正则表达式*将`+`,`(…)`转换为运算符；否则它们必须用反斜杠预先固定`\`。
*   `-n`告诉`sed`默认情况下不要打印每一行，但只有在使用显式打印命令被告知这样做时`p`。
*   `s/uid: //`将从包含它的行中去除该前缀。
*   `s/uid:: …/…/ep`处理像元音变音这样的非 ASCII 字符时需要该部分，因为`ldapsearch`它们使用`base64`.
*   后缀`…p`将仅打印那些被替换的行。

## 对于`grep`部分

*   `-F`告诉`grep`不要使用正*则表达式模式匹配*，而是使用*纯文本*；如果您的名字包含`.`, `*`, 括号，...，这将变得很重要。
*   `-x`强制执行整*行匹配*，因此搜索`foo`也不会匹配`foobar`。
*   `-f -`告诉`grep`从 STDIN 读取模式，即.找到的*现有*UID `ldapsearch`。
*   `-v`反转搜索并将**过滤掉**那些现有*用户*。
*   将`$uids`再次读取*所有请求用户*的列表。删除*现有用户后，**丢失的用户*列表将保留。

# 以前解决方案的问题

以前的解决方案都存在某些问题：

*   失踪`grep`
*   缺少引用，一旦涉及空白就会中断
*   无用的使用`cat`
*   use-less use of `grep`when`awk`也被使用
*   效率低下，因为对于每个 UID，许多进程都会被`fork()`编辑
*   效率低下，因为对每个 UID 执行单独的搜索
*   不适用于长用户名
*   不适用于包含正则表达式元字符的用户名
*   不适用于包含变音符号的用户名

# iphone - 为 iOS 应用程序流式传输音频？

> ID：11752519
> 
> 赞同：0
> 
> 时间：2012-08-01T04:20:44.457
> 
> 标签：iphone, xcode, streaming, audio-streaming

我正在与一个团队合作开发一个本质上将是“无线电”应用程序的应用程序。一个视图将只播放当时正在播放的任何音频，另一个视图或两个存档以收听过去的节目。我现在正在做的是如何组装视图来播放。有问题的网站是 on-this-rock.org，播放源在[这里](http://cdn.voscast.com/player/?key=118924f7c479d9920e3e1ffd3a25f911)

关于如何最好地构建播放器以在音频中流式传输，而不需要其他站点图形的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:56:55.110

流 URL 实际上是：

```
http://s4.voscast.com:8080/ 
```

这只是一个 SHOUTcast 流。您可以构建您的收音机播放器以直接连接到它。不需要网站本身的 HTML/Flash。

您可以通过查看浏览器工具的网络选项卡或使用 Fiddler 或 Wireshark 等工具轻松找到此信息。

# http - 使用 Webapi 将图像渲染到浏览器

> ID：11752522
> 
> 赞同：1
> 
> 时间：2012-08-01T04:21:03.793
> 
> 标签：http, asp.net-web-api

我想使用 webapi 渲染图像，以便我可以包含电子标签或许多其他用于缓存目的的东西。并且可以根据设备渲染不同大小的图像。

我写了一个格式化程序，它接受“image/jpeg”，它渲染正确；y 与 fiddler 。但是如果浏览器标签将接受标头发送为“star/star”，这只是一个媒体范围。无论如何可以发送标头或任何其他方式来使用 web api 呈现图像

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T18:29:20.207

在评估接受标头值时，我们根据它们的具体程度对它们进行排名。那是，

```
Accept: image/jpeg 
```

排名高于

```
Accept: image/* 
```

排名高于

```
Accept: */* 
```

发生的情况是，如果您有多个用于控制器的格式化程序并且您只获得一个*/*接受标头，那么我们会选择列表中可以序列化特定主体类型的第一个格式化程序。

解决此问题的最简单方法是删除 HttpConfiguration 中的其他格式化程序，只需在添加自己的格式化程序之前清除列表即可。

您还可以使用每个控制器样式配置在每个控制器的基础上执行此操作，有关此场景的更多详细信息，请参阅 [1]。

亨里克

[1] [http://blogs.msdn.com/b/jmstall/archive/2012/05/11/per-controller-configuration-in-webapi.aspx](http://blogs.msdn.com/b/jmstall/archive/2012/05/11/per-controller-configuration-in-webapi.aspx)

# cocoa - MAC中树视图控件的替代方法是什么。

> ID：11752524
> 
> 赞同：0
> 
> 时间：2012-08-01T04:21:26.233
> 
> 标签：cocoa

我是MAC的初学者，所以请告诉我MAC中树控件的替代方法，以从中探索数据和选择文件。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:32:48.583

如果我理解正确，您正在寻找`NSOutlineView`. 这是一个允许分层显示的视图（带有显示三角形的缩进元素列表等）。

# python - 用于处理 Excel 文件的 Python 库 (xls | xlsx)

> ID：11752527
> 
> 赞同：8
> 
> 时间：2012-08-01T04:21:59.840
> 
> 标签：python, excel

我需要一个可以读取和写入所有格式（即 xls 和 xlsx）的 Excel 文件的 python 库。

我是 python 新手，之前使用过 Java。在 Java 中，我使用的是[POI](http://poi.apache.org/)库，它非常完美。如果可能的话，我需要一个具有相同功能的 python 库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-03T23:00:51.090

我知道这个线程已经有一段时间没有活跃了，但我认为在这里添加一个答案会很好，因为我为这个问题做了一个新的解决方案。

我遇到了同样的问题，所以我继续创建了一个小型库，其中包含**python-excel** (xlrd, xlwt) 和**openpyxl**。你可以在这里找到它：[https ://github.com/camyoung1234/spreadsheet](https://github.com/camyoung1234/spreadsheet)

然后要使用它，您输入与 openpyxl 完全相同的代码，除了替换`openpyxl`为`spreadsheet`. 当您加载和保存文件时，它会查看扩展名并确定使用哪个库来处理它。

要安装它，只需下载它，解压缩，重命名文件夹`spreadsheet-master`并将`spreadsheet`其放入`PythonXX/Lib/site-packages/`（我只用 Python 2.7 测试过，但它应该可以与其他人一起使用）

有`README`一些示例可以帮助您入门。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T04:24:40.150

Python excel 看起来不错：http: [//www.python-excel.org/](http://www.python-excel.org/)

OpenPyXl 也可能具有您需要的功能：[http ://packages.python.org/openpyxl/](http://packages.python.org/openpyxl/)

# java - 如何使用Java找出第二天的开始

> ID：11752531
> 
> 赞同：2
> 
> 时间：2012-08-01T04:22:52.920
> 
> 标签：java, datetime, calendar

在我的简单应用程序中，我使用`new Timestamp(System.currentTimeMillis())`.

现在，我有一个条件，我必须将特定日期的 onClick 计数存储在两个不同的列中。

因此，为此，我需要找出今天的 onClicks。那么我怎样才能知道 onclicks 发生的时间是否是今天呢？我的意思是说 8 月 1 日，我希望一列中的所有 onclick 计数和所有以前的 onClick 计数到另一列。

***简单来说 - 将今天的点击量存储在一个列中，并将迄今为止的点击量存储在另一列中，所以如果今天过期，我想添加今天的点击次数和总点击次数，然后将 today_clicks 列计数为 0，然后当有第二天的新点击，将其存储在 today_clicks 列中，从计数 1* 开始**

我怎么能决定呢？我应该为此使用哪个 Java 类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T04:33:16.660

不知道这是否是你所追求的。要开始第二天，您可以使用[Calendar](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)：

```
public static Date nextDayStart(Date date) {
    Calendar cal = Calendar.getInstance();
    cal.setTime(date);
    cal.set(Calendar.HOUR_OF_DAY, 0);
    cal.set(Calendar.MINUTE, 0);
    cal.set(Calendar.SECOND, 0);
    cal.set(Calendar.MILLISECOND, 0);
    cal.add(Calendar.DATE, 1);

    return cal.getTime();
} 
```

明天获得：

```
Date tomorrow = nextDayStart(new Date()); 
```

从：`Timestamp`_`Date`

```
Timestamp s = new Timestamp(date.getTime()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:34:36.620

首先，我建议看看[Joda Time](http://en.wikipedia.org/wiki/Time_zone#Java)。

其次，我会看看`Calendar`：

```
Calendar lower = Calendar.getInstance();
lower.setTime(new Date());
lower.set(Calendar.HOUR_OF_DAY, 0);
lower.set(Calendar.MINUTE, 0);
lower.set(Calendar.SECOND, 0);
lower.set(Calendar.MILLISECOND, 0);

Calendar upper = Calendar.getInstance();
upper.setTime(new Date());
upper.set(Calendar.HOUR_OF_DAY, 23);
upper.set(Calendar.MINUTE, 59);
upper.set(Calendar.SECOND, 59);
upper.set(Calendar.MILLISECOND, 99);

Date clickTime = new Date(timeInMillis);
if (clickTime.after(lower.getTime()) && clickTime.before(upper.getTime())) {
    // Is today
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:16:06.413

如果我理解正确，您正在寻找一种将数据最好地存储在数据库中的方法。您已决定维护一个今天的点击次数列和一个直到现在的点击次数列。（我可能基于此，但从问题中并没有完全清楚）

我建议您不要像您所描述的那样尝试逐列操作数据，而是通过保持每天的点击次数来做到这一点：

```
日期 | 数数
------|-------
7月31日| 10876
8月1日| 15721

```

（其中日期是数据库时间戳/日期数据类型中的一个）

这将如何工作？

然后，在启动时，您可以将所有行放入内存，并将它们的计数相加以获得 clicks-until-now 值（如果需要）。

然后，您可以对今天的行进行特殊处理，在其中使用 clicks-for-today 值更新相应的上下文。

要确定您是否超过了一天的阈值，您可以简单地：

1.  为“今天”维护一个日历实例（调用它`todayCal`）
2.  每次记录点击时生成一个新日历（调用它`clickCal`）
3.  测试 Calendar.DAY_OF_YEAR`todayCal`和`clickCal`
4.  如果您确定了一天滚动，则将今天的点击次数保存在数据库中并初始化一个新的今天点击次数。
5.  如果您在内存中保持总点击次数，您可以在此时进行数学计算。

# python - 为什么只为类定义属性装饰器？

> ID：11752534
> 
> 赞同：10
> 
> 时间：2012-08-01T04:23:27.130
> 
> 标签：python, properties, built-in

**tl;dr：属性装饰器如何与类级别的函数定义一起使用，而不是与模块级别的定义一起使用？**

我将属性装饰器应用于一些模块级函数，认为它们将允许我仅通过属性查找来调用方法。

这特别诱人，因为我定义了一组配置函数，比如`get_port`,`get_hostname`等，所有这些都可以替换为更简单、更简洁的属性对应物：`port`,`hostname`等。

因此，`config.get_port()`会更好`config.port`

当我发现以下回溯时，我很惊讶，证明这不是一个可行的选择：

```
TypeError: int() argument must be a string or a number, not 'property' 
```

我知道我在模块级别看到了一些类似属性的功能的先例，因为我使用它来使用优雅但 hacky [pbs library](https://github.com/amoffat/pbs)编写 shell 命令脚本。

下面有趣的 hack 可以在[pbs 库源代码](https://github.com/amoffat/pbs/blob/master/pbs.py)中找到。它能够在模块级别进行类似属性的属性查找，但它非常可怕，非常骇人听闻。

```
# this is a thin wrapper around THIS module (we patch sys.modules[__name__]).
# this is in the case that the user does a "from pbs import whatever"
# in other words, they only want to import certain programs, not the whole
# system PATH worth of commands.  in this case, we just proxy the
# import lookup to our Environment class
class SelfWrapper(ModuleType):
    def __init__(self, self_module):
        # this is super ugly to have to copy attributes like this,
        # but it seems to be the only way to make reload() behave
        # nicely.  if i make these attributes dynamic lookups in
        # __getattr__, reload sometimes chokes in weird ways...
        for attr in ["__builtins__", "__doc__", "__name__", "__package__"]:
            setattr(self, attr, getattr(self_module, attr))

        self.self_module = self_module
        self.env = Environment(globals())

    def __getattr__(self, name):
        return self.env[name] 
```

下面是将此类插入导入命名空间的代码。居然`sys.modules`直接打补丁！

```
# we're being run as a stand-alone script, fire up a REPL
if __name__ == "__main__":
    globs = globals()
    f_globals = {}
    for k in ["__builtins__", "__doc__", "__name__", "__package__"]:
        f_globals[k] = globs[k]
    env = Environment(f_globals)
    run_repl(env)

# we're being imported from somewhere
else:
    self = sys.modules[__name__]
    sys.modules[__name__] = SelfWrapper(self) 
```

现在我已经了解`pbs`了必须经历的时间，我想知道为什么 Python 的这种功能没有直接内置到语言中。特别`property`是装饰器似乎是添加此类功能的自然场所。

为什么这不是直接内置的，有什么特别的原因或动机吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T05:55:23.873

这与两个因素的组合有关：首先，属性是使用[描述符协议](http://docs.python.org/howto/descriptor.html#descriptor-protocol)实现的，其次，模块始终是特定类的实例，而不是可实例化的类。

这部分描述符协议实现在[`object.__getattribute__`](http://svn.python.org/view/python/trunk/Objects/object.c?view=markup)（相关代码`PyObject_GenericGetAttr`从第1319行开始）。查找规则如下：

1.  在类中搜索`mro`具有`name`
2.  如果第一个匹配项是数据描述符，则调用它`__get__`并返回其结果
3.  如果名称在实例字典中，则返回其关联值
4.  如果类字典中有匹配项并且它是非数据描述符，则调用它`__get__`并返回结果
5.  如果类词典中有匹配项，则返回它
6.  `raise AttributeError`

关键是在数字 3 - 如果`name`在*实例字典*中找到（因为它将与模块​​一起），那么它的值将被返回 - 它不会被测试描述符，`__get__`也不会被调用。这导致了这种情况（使用 Python 3）：

```
>>> class F:
...    def __getattribute__(self, attr):
...      print('hi')
...      return object.__getattribute__(self, attr)
... 
>>> f = F()
>>> f.blah = property(lambda: 5)
>>> f.blah
hi
<property object at 0xbfa1b0> 
```

您可以看到它`.__getattribute__` *正在*被调用，但*没有被*视为`f.blah`描述符。

以这种方式构建规则的原因很可能是在实例（以及因此，在模块中）允许描述符的有用性与这将导致的额外代码复杂性之间的明确权衡。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:29:54.427

属性是特定于类（特别是新式类）的特性，因此通过扩展属性装饰器只能应用于类方法。

新式类是派生自对象的类，即类 Foo(object)：

更多信息：[模块可以像对象一样具有属性吗？](https://stackoverflow.com/questions/880530/can-python-modules-have-properties-the-same-way-that-objects-can)

# python - Python - 删除未知的 10 个字符的字符串

> ID：11752538
> 
> 赞同：3
> 
> 时间：2012-08-01T04:24:08.123
> 
> 标签：python, str-replace, cache-control

我为 css/js 使用 Eric Bidelman 的/HTML5Rocks cachebust.py 文件的修改版本。[链接在这里](https://github.com/html5rocks/www.html5rocks.com/blob/master/scripts/cachebust.py/)

而不是像附加时间戳一样

```
.css?2012-07-30 
```

我将变量修改为 -

```
cachebust = ''.join(random.choice(string.ascii_uppercase + string.digits) for x in range(10)) 
```

所以它变成（例如）

```
.css?6SKD39SFJ3 
```

他的原始版本似乎也没有删除日期，所以我不太确定这是一个“缓存控制”，但我想如果我可以自动剥离这 10 个字符，它会起作用。首先定位任何 js 文件（对于新文件），然后如果 js？（已经存在缓存控制），剥离现有的缓存控制

```
asset = re.search('\.(js")><\/script>', line)
if asset is not None:
  existing = re.search('\.(js?"', line)
  if existing is not None:
    line[i] = line.replace('.js?'STRING????'"', '.js"')
  lines[i] = line.replace('.js"></script>', '.js?%s"></script>' % cachebust) 
```

对那个字符串的想法？？？？应该是，或者如果这种方法不起作用？我是 python 新手，所以我只是在这里试验......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:31:40.770

您可以替换 3 行：

```
existing = re.search('\.(js?"', line)
if existing is not None:
    line[i] = line.replace('.js?'STRING????'"', '.js"') 
```

和：

```
re.sub(r'\.js\?[-0-9]{10}">',r'.js?">', line) 
```

输出：

```
>>> re.sub(r'\.js\?[-0-9]{10}">',r'.js?">', '<script type="blah" src="url/to/path.js?2012-07-02">')
'<script type="blah" src="url/to/path.js?">' 
```

* * *

我使用了`[-0-9]{10}`代表 10 个数字字符和破折号的正则表达式。如果可以代表**任意**10 个字符，请使用：`.{10}`

# sql - SQL Server - 使用 IN 比较 Varchar 值

> ID：11752542
> 
> 赞同：2
> 
> 时间：2012-08-01T04:24:32.840
> 
> 标签：sql, sql-server, tsql

在我的表中，我有一个 varchar 列，其中存储了多值。我的表的一个例子：

```
RecNum           |  Title   |  Category
-----------------------------------------
wja-2012-000001  |  abcdef  |  4,6
wja-2012-000002  |  qwerty  |  1,3,7
wja-2012-000003  |  asdffg  |   
wja-2012-000004  |  zxcvbb  |  2,7
wja-2012-000005  |  ploiuh  |  3,4,12 
```

列中的值`Category`指向另一个表。

如果我想在 Category 列中检索值为 1,3,5,6,8 的行，如何返回相关行？

当我尝试使用 IN 时，出现“将 varchar 值“1,3,5,6,8”转换为数据类型 int 时出现“转换失败”错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:37:22.833

如果您可以进行更改，将类别分成一个单独的表将是一个更好的设计......否则，您可以创建一个函数将值拆分为一个整数表，如下所示：

```
CREATE FUNCTION dbo.Split(@String varchar(8000), @Delimiter char(1))
returns @temptable TABLE (id int)
as
begin
    declare @idx int
    declare @slice varchar(8000)

    select @idx = 1
        if len(@String)<1 or @String is null  return

    while @idx!= 0
    begin
        set @idx = charindex(@Delimiter,@String)
        if @idx!=0
            set @slice = left(@String,@idx - 1)
        else
            set @slice = @String

        if(len(@slice)>0)
            insert into @temptable(id) values(convert(int, @slice))

        set @String = right(@String,len(@String) - @idx)
        if len(@String) = 0 break
    end
return
end 
```

然后从您的查询中调用它：

```
SELECT ...
FROM ...
WHERE @SomeID IN (SELECT id FROM dbo.Split(Category, ',')) 
```

或者，如果您希望提供类别列表作为输入参数（例如 '1,3,5,6,8'），并返回表中至少包含这些值之一的所有记录，您可以使用这样的查询：

```
SELECT ...
FROM ...
WHERE
    EXISTS (
        select 1
        from dbo.Split(Category, ',') s1
        join dbo.Split(@SearchValues, ',') s2 ON s1.id = s2.id
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:52:06.937

你可以这样做

> 声明@var varchar(30); 设置@var='2,3';
> 
> exec('select * from category where Category_Id in ('+@var+')')

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:15:21.977

试试这个解决方案：

```
CREATE TABLE test4(RecNum varchar(20),Title varchar(10),Category varchar(15))
INSERT INTO test4
VALUES('wja-2012-000001','abcdef','4,6'),
('wja-2012-000002','qwerty','1,3,7'),
('wja-2012-000003','asdffg',null),   
('wja-2012-000004','zxcvbb','2,7'),
('wja-2012-000005','ploiuh','3,4,12')

select * from test4
Declare @str varchar(25) = '1,3,5,6,8'
;WITH CTE as (select RecNum,Title,Category from test4)
,CTE1 as (
select RecNum,Title,RIGHT(@str,LEN(@str)-CHARINDEX(',',@str,1)) as rem from CTE where category like '%'+LEFT(@str,1)+'%' 
union all
select c.RecNum,c.Title,RIGHT(c1.rem,LEN(c1.rem)-CHARINDEX(',',c1.rem,1)) as rem from CTE1 c1 inner join CTE c 
on c.category like '%'+LEFT(c1.rem,1)+'%' and CHARINDEX(',',c1.rem,1)>0
 )
 select RecNum,Title from CTE1 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-01T06:17:55.880

正如其他人所提到的，您的表设计违反了基本的数据库设计原则，如果没有办法绕过它，您可以用很少的代码（下面的示例）规范化表，然后与另一个表连接。干得好：

数据：

```
CREATE TABLE data(RecNum varchar(20),Title varchar(10),Category varchar(15))
INSERT INTO data
VALUES('wja-2012-000001','abcdef','4,6'),
('wja-2012-000002','qwerty','1,3,7'),
('wja-2012-000003','asdffg',null),   
('wja-2012-000004','zxcvbb','2,7'),
('wja-2012-000005','ploiuh','3,4,12') 
```

这个函数接受一个逗号分隔的字符串并返回一个表：

```
CREATE FUNCTION listToTable (@list nvarchar(MAX))
   RETURNS @tbl TABLE (number int NOT NULL) AS
BEGIN
   DECLARE @pos        int,
           @nextpos    int,
           @valuelen   int

   SELECT @pos = 0, @nextpos = 1

   WHILE @nextpos > 0
   BEGIN
      SELECT @nextpos = charindex(',', @list, @pos + 1)
      SELECT @valuelen = CASE WHEN @nextpos > 0
                              THEN @nextpos
                              ELSE len(@list) + 1
                         END - @pos - 1
      INSERT @tbl (number)
         VALUES (convert(int, substring(@list, @pos + 1, @valuelen)))
      SELECT @pos = @nextpos
   END
   RETURN
END 
```

然后，您可以执行以下操作来“规范化”表格：

```
SELECT *
FROM   data m
CROSS  APPLY  listToTable(m.Category) AS t
where Category is not null 
```

然后使用上述查询的结果与“其他”表连接。例如（我没有测试这个查询）：

```
select * from otherTable a
join listToTable('1,3,5,6,8') b
on a.Category = b.number
join(

    SELECT *
    FROM   data m
    CROSS  APPLY  listToTable(m.Category) AS t
    where Category is not null
    ) c
on a.category = c.number 
```

# linux-kernel - redis bgsave 失败，因为 fork 无法分配内存

> ID：11752544
> 
> 赞同：54
> 
> 时间：2012-08-01T04:24:40.040
> 
> 标签：linux-kernel, redis, fork

all：这是我的服务器内存信息，带有“free -m”

```
 total       used       free     shared    buffers     cached
 Mem:         64433       49259      15174          0          3         31
 -/+ buffers/cache:      49224      15209
 Swap:         8197        184       8012 
```

我的 redis-server 使用了 46G 内存，还有差不多 15G 内存可用

据我所知，fork 是写时复制，当有 15G 可用内存时它不应该失败，这足以 malloc 必要的内核结构。

另外，redis-server 使用 42G 内存时，bgsave 可以，fork 也可以。

我可以调整任何 vm 参数以使 fork 返回成功吗？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2015-04-23T21:11:58.283

更具体地说，来自[Redis FAQ](http://redis.io/topics/faq)

> Redis 后台保存模式依赖于现代操作系统中 fork 的写时复制语义：Redis forks（创建子进程）是父进程的精确副本。子进程将数据库转储到磁盘上并最终退出。理论上，子进程应该使用与作为副本的父进程一样多的内存，但实际上由于大多数现代操作系统实现的写时复制语义，父进程和子进程将共享公共内存页面。仅当页面在子级或父级中发生更改时，才会复制页面。由于理论上所有页面都可能在子进程保存时发生变化，Linux 无法提前知道子进程将占用多少内存，因此如果将 overcommit_memory 设置设置为零，除非有足够的可用 RAM，否则 fork 将失败需要真正复制所有父内存页面，
> 
> 将 overcommit_memory 设置为 1 表示 Linux 放松并以更乐观的分配方式执行分叉，这确实是您想要的 Redis。

Redis 不需要操作系统认为它写入磁盘所需的内存量，因此可能会先发制人地使 fork 失败。

* * *

## 回答 #2

> 赞同：75
> 
> 时间：2016-06-08T00:03:27.447

修改`/etc/sysctl.conf`并添加：

```
vm.overcommit_memory=1 
```

然后使用以下命令重新启动 sysctl：

在 FreeBSD 上：

```
sudo /etc/rc.d/sysctl reload 
```

在 Linux 上：

```
sudo sysctl -p /etc/sysctl.conf 
```

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2012-08-01T05:02:42.133

从*proc(5)*手册页：

> /proc/sys/vm/overcommit_memory
> 
> 该文件包含内核虚拟内存记帐模式。值为：
> 
> 0：启发式过度使用（这是默认值）
> 
> 1：总是过度使用，从不检查
> 
> 2：总是检查，从不过度使用
> 
> 在模式 0 中，不检查设置了 MAP_NORESERVE 的 mmap(2) 调用，并且默认检查非常弱，导致进程“OOM-killed”的风险。在 Linux 2.4 下，任何非零值都意味着模式 1。在模式 2（自 Linux 2.6 起可用）中，系统上的总虚拟地址空间限制为 (SS + RAM*(r/100))，其中 SS 是大小交换空间的大小，RAM 是物理内存的大小，r 是文件 /proc/sys/vm/overcommit_ratio 的内容。

# java - 如何将 Content-Length 添加到 JAXRS

> ID：11752547
> 
> 赞同：3
> 
> 时间：2012-08-01T04:25:14.320
> 
> 标签：java, json, jax-rs

在我的回复中，我想将 JSON 的大小添加到标题中，这是我尝试过但没有奏效的内容（回复为空）：

```
return Response.ok(OBJECT_MAPPER.writeValueAsString(myObject), MediaType.APPLICATION_JSON).header(HttpHeaders.CONTENT_LENGTH), 20).build(); 
```

如您所见，我对长度进行了硬编码，但如果我可以使用 API 来完成它会很棒。

**解决方案** 嗯，字节大小可以返回如下，具体取决于编码。下面的代码会在不实现`MessageBodyWriter`接口的情况下做到这一点：

```
String str = OBJECT_MAPPER.writeValueAsString(myObject);
return Response.ok(str , MediaType.APPLICATION_JSON).header(HttpHeaders.CONTENT_LENGTH), str.getBytes("UTF-8").length)).build(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T07:52:20.640

实现`MessageBodyWriter`接口：

```
String str = OBJECT_MAPPER.writeValueAsString(myObject);
return Response.ok(str , MediaType.APPLICATION_JSON).header(HttpHeaders.CONTENT_LENGTH), str.getBytes("UTF-8").length)).build(); 
```

# asp.net - 关于淘汰赛的问题

> ID：11752553
> 
> 赞同：2
> 
> 时间：2012-08-01T04:25:43.177
> 
> 标签：asp.net, vb.net, json, knockout.js

**1.我有 2 个关于 asp.net 淘汰赛的问题。**
服务器端方法：

```
<WebMethod>
Public Shared Function foo() As List(Of person)
    Return New List(Of person)() From {New person With {.id = 1, .fname = "meysam"},
                                         New person With {.id = 2, .fname = "yasaman"}}.ToList
End Function 
```

json 并绑定到淘汰赛：

```
var VM = {};
$.getJSON("default.aspx/foo", function (data) {
    var tmp = JSON.stringify(data.d);
    VM.model =  
    ko.applyBindings(VM);
}); 
```

html:

```
<div data-bind="foreach: model">
<h3 data-bind="text: id">
</h3>
<p>
    Name: <span data-bind="text: fname"></span>
</p> 
```

但是当我在浏览器中运行时，不会发生任何事情。`fname,id`将被显示。

**2.** `$.getJSON`**和 和有什么不一样** `dataType:json`**？**

```
 $.getJSON("default.aspx/foo", function (data) {
    var tmp = JSON.stringify(data.d);
}); 
```

和

```
$.ajax({
type:"post",
url:"default.aspx/foo",
contentType:"application/json;charset=utf-8",
dataType:"json",
success:function(data){}
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:17:12.940

所以，这确实应该是两个*实际*问题，但是任何人（以相反的顺序！）：

2：来自[jQuery文档](http://api.jquery.com/jQuery.getJSON/)：`$.getJSON`是一个简写的Ajax函数，相当于：

```
$.ajax({
  url: url,
  dataType: 'json',
  data: data,
  success: callback
}); 
```

所以他们是一样的。

1：您尝试调用调用`JSON.stringify()`结果`getJSON`是多余的。`getJSON`已经这样做了。问题有两个方面：这些解析器都不能解析 .net 列表（我可能对此有误，但我有 60% 的把握）。无论哪种情况，更好的解决方案是在 web 方法中将列表序列化为 JSON，并返回已解析的 JSON。.NET[内置了这种能力](http://msdn.microsoft.com/en-us/library/bb410770.aspx)。

第二，您的列表没有`d`属性。因此，即使您对该部分进行排序，您也会得到一个未定义的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:37:02.353

# vaadin - Vaadin CropField 插件选择的图像

> ID：11752554
> 
> 赞同：1
> 
> 时间：2012-08-01T04:25:52.960
> 
> 标签：vaadin, crop, add-on

CropField 的目的是只获取图像的选定部分。哪种方法可以做到这一点？getImageResource() 返回整个图像。

第二个问题是 - 是否可以设置具有预定选定区域的农田？我已将宽度和高度的最小值和最大值设置为相同的数字，以便选择区域始终相同。但是，用户必须单击cropfield 才能看到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:23:36.830

我没有使用过这个插件。

> CropField 的目的是只获取图像的选定部分

实际上，我认为这种说法是错误的；根据插件的描述

> 显示单个图像并在其上覆盖选择、转换和移动其中的裁剪区域的功能。

即它允许您操纵选择区域：它实际上并不执行裁剪本身。我想这可以使用服务器端 java（或外部工具）来完成。

对于它的价值，我同意插件的名称表明它确实可以自己进行裁剪。

至于设置选择区域，CropField 插件的 javadoc 显示了如何执行此操作`setValue(VCropSelection value)`

```
/**
 * Vaadin component that shows an image with an overlayed cropping
 * functionality. The current selection can be set and get via
 * setValue()/getValue() of {@link AbstractField}. The type of that value has to
 * be {@link VCropSelection}. Usually, the selection will not be changed to a
 * <i>null</i> value. Instead, it will be an empty selection (check with
 * {@link VCropSelection#isEmpty()}).
 * 
 * @author Eric Seckler
 */ 
```

# c++ - 一个人如何实时制作一些东西？

> ID：11752560
> 
> 赞同：-1
> 
> 时间：2012-08-01T04:26:59.677
> 
> 标签：c++

这可能是一个非常愚蠢的问题，但我找不到任何相关信息，也找不到要搜索的内容。

你如何实时制作东西？例如，假设我们有一个游戏，它如何在不调用程序不同部分的 tick() 方法的情况下连续运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:38:26.100

If you are developing the program to run at a time in particular the best way I know of is to develop it to run at a particular loop rate using timed delays.

IE:

```
while(forever) {
    do something
    test how long it took
    take up the remainder amount of time for the loop to run at a rate (ie 100Hz)
} 
```

If you are desperate for real time applications you can develop and use QNX:

[http://www.qnx.com/](http://www.qnx.com/)

But this certainly wouldn't be a good environment for programming games.

# radix-sort - 如果我们必须对 4 个数字中的 7 个数字进行排序，那么在最坏的情况下需要进行多少次比较？

> ID：11752564
> 
> 赞同：4
> 
> 时间：2012-08-01T04:27:45.233
> 
> 标签：radix-sort, bucket-sort

如果我们必须对 4 个数字中的 7 个数字进行排序，那么在最坏的情况下需要进行多少次比较？（基数排序）选项是 - 40,38,47,280。

我的解决方案——我拿了 10 个桶（0 到 9）（链表）。然后对于第 i 个数字的每个数字，我将其放入 Bucket 中，对应于其数字的值。然后我将这些数字收集到数组中。对所有数字重复此过程，因此我的原始数组已排序。比较总数= 10*4=40（10，因为我遍历了所有的桶来寻找对应的桶）。

现在问题出在蒂莫西·J·威廉姆斯（Timothy J Williams）的书中，给出的比较数=数字数*数字数*桶数=4 * 7 * 10 = 280。我无法理解。有人可以解释一下这是怎么回事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-02T05:18:21.257

确实，基数排序不是基于比较的算法。这里的比较说明了迭代中涉及的比较。首先，我们需要遍历 7 个元素的数组，并将每个数字的位数保存在相应的桶中。这里为了遍历数组，我们需要 7 次比较。将所有元素放入 0-9 的桶中后，我们需要遍历 0-9 的所有桶，并根据它们的桶号排列元素，这需要 10 次比较才能遍历 0-9 的桶。现在我们必须对 7 个元素的所有 4 位重复这个过程。因此，比较总数为 7*10*4 = 280

# c# - 为什么 TryUpdateModel() 不验证 textboxfor 或更新模型？

> ID：11752570
> 
> 赞同：1
> 
> 时间：2012-08-01T04:28:21.163
> 
> 标签：c#, .net, asp.net-mvc, formcollection

我有一个视图有几个 editorfor/textboxfors

```
<% using(Html.BeginForm("New", "Controller", FormMethod.Post)) {%>
    <%: Html.ValidationSummary(false) %>
    <div>Address</div>
    <div><%: Html.EditorFor(model => model.Address)</div>
    <div>Zip Code</div>
    <div><%: Html.EditorFor(model => model.Zip)</div>
    <div>Total Mats</div>
    <div><%: Html.EditorFor(model => model.TotalMats)</div>
    <input type="image" src="<%: Url.Content("~/Content/Images/submit.png") %>" name="Submit" />
   <% } %> 
```

行动：

```
public ActionResult Edit(int Id, FormCOllecion) {
    Event event = context.Event.FirstOrDefault(e => e.Id == Id);
    if (TryUpdateModel(event) {
       context.SaveChanges;
       return RedirectToAction("Index", "Controller", new {value = Id});
    }
    return View(event);
} 
```

模型：

```
[Bind(Include="Name,Date")]
public class Event
{
     public int Id { get; set; }
     public string Name { get; set; }
     public DateTime Date { get; set; }
     public int Participants { get; set; }
     public int TotalMats { get; set; }
} 
```

所以前两个 EditorFors 是字符串，而最后一个是 int （在模型上）。这是我注意到的一件事。我不确定这是否相关。但是每次我点击提交时，formcollection 都会显示 TotalMats 字段有一个值。但是一旦它通过 TryUpdateModel 就不会更新模型的属性。有什么我想念的吗？在我的一些使用 int 类型的属性的页面上，情况就是这样。我不得不手动进行 FormCollection["key"] 检索，但我不得不进行额外的验证，以确保它不会因非整数值而爆炸。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T13:21:36.823

问题不是你的`BindAttribute`吗？

[http://msdn.microsoft.com/en-us/library/system.web.mvc.bindattribute.include](http://msdn.microsoft.com/en-us/library/system.web.mvc.bindattribute.include)

根据文档，只有列表中列出的属性`Include`将被绑定/更新。你`ints`不在名单上。

# c# - 特殊选择查询

> ID：11752576
> 
> 赞同：1
> 
> 时间：2012-08-01T04:29:20.067
> 
> 标签：c#, sql, sql-server

我的 sql 数据库中有 3 个表，如下所示：

```
Documents : (DocID, FileName) //list of all docs that were attached to items
Items : (ItemID, ...) //list of all items
DocumentRelation : (DocID, ItemID) //the relation between docs and items 
```

在我的 winform 应用程序中，我在网格视图中显示了**Items**表的所有记录，并让用户选择其中的几行，然后如果他按下 EditAll 按钮，另一个网格视图应该填充与这些选定项目相关的文档的文件名，但是不是所有的人，

> **仅与*所有*选定项目有关的每个文档**

是否有任何查询（*sql 或 linq*）来选择这些文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:57:07.773

尝试类似：

```
string query;
foreach (Item in SelectedItems)
{
   query += "select DocID from DocumentRelation where ItemID =" + Item.Id;
   query += "INTERSECT";
}
query -= "INTERSECT"; 
```

并执行查询；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:33:17.160

取一个字符串并继续添加 itemid 逗号分隔，如 1,2,3 然后编写查询，如

```
declare ItemID varchar(50);
set ItemID='1,2,3';

select FileName 
from documents 
Left Join DocumentRelation on Documents.DocId = DocumentRelation.DocId 
where 
    DocumentRelation.ItemID in (select * from > dbo.SplitString(ItemID)) 
```

然后在数据库中创建一个函数，如下所示

```
ALTER FUNCTION [dbo].[SplitString] (@OrderList varchar(1000))
RETURNS @ParsedList table (OrderID varchar(1000) ) 
AS BEGIN 
    IF @OrderList = ''  
    BEGIN       
        set @OrderList='Null' 
    end     

    DECLARE @OrderID varchar(1000), @Pos int

    SET @OrderList = LTRIM(RTRIM(@OrderList))+ ','  
    SET @Pos = CHARINDEX(',', @OrderList, 1)

    IF REPLACE(@OrderList, ',', '') <''     
    BEGIN       
        WHILE @Pos 0
        BEGIN
           SET @OrderID = LTRIM(RTRIM(LEFT(@OrderList, @Pos - 1)))

           IF @OrderID < '' 
           BEGIN
               INSERT INTO @ParsedList (OrderID) 
               VALUES (CAST(@OrderID AS varchar(1000))) 
               --Use Appropriate conversion             
           END

           SET @OrderList = RIGHT(@OrderList, LEN(@OrderList) - @Pos)
           SET @Pos = CHARINDEX(',', @OrderList, 1)
        END     
    END     

    RETURN 
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T04:55:24.420

林克

```
var td =
from s in Items
join r in DocumentRelation on s.ItemID equals r.ItemID
join k in Documents on k.DocID equals r.DocID
where Coll.Contains (s.ItemID)         //Here Coll is the collection of ItemID   which you can store when the users click on the grid view row
select new 
{
 FileName=k.FileName,
 DocumentID= k.DocId
 }; 
```

您可以遍历 td 集合并绑定到您的网格视图

SQL

创建一个存储过程以获取从网格视图中选择的 itemID 的相关文档并参数化您的 in 子句

```
 select k.FileName,k.DocId from Items as s inner join 
 DocumentRelation as r on 
 s.ItemID=r.ItemID and r.ItemId in (pass the above coll containing selected ItemIds as an input the SP)
 inner join Documents as k
 on  k.DocId=r.DocIk 
```

您可以获得有关[如何参数化您的 sql 查询的信息](https://stackoverflow.com/questions/337704/parameterizing-an-sql-in-clause)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T05:13:49.347

这是一种方法。我会让你弄清楚你想如何提供项目列表作为参数。而且我还假设 (DocID, ItemID) 是关系表中的主键。`having`条件是强制您要求所有选择的项目都与您正在寻找的文档列表相关。

```
;with ItemsSelected as (
    select i.ItemID
    from Items as i
    where i.ItemID in (<list of selected ItemIDs>)
)
select dr.DocID
from DocumentRelation as dr
where dr.ItemID in (select ItemID from ItemsSelected)
group by dr.DocID
having count(dr.ItemID) = (select count(*) from ItemsSelected); 
```

**编辑**

据我所知，尽管 OP 在下面发表评论，但接受的答案等同于此处的解决方案。

我对一系列非常长的`intersect`查询进行了一些快速测试，并确认您确实可以预期该方法会随着所选项目数量的增加而逐渐变慢。但更糟糕的问题是编译查询所花费的时间。我在一个非常快的服务器上尝试了这个，发现当连接大约 100 个相交时，该步骤大约需要 8 秒。

SQL Fiddle 在产生此错误之前并没有让我做任何事情（并且在此过程中花费了十多秒）：*查询处理器用尽了内部资源并且无法生成查询计划。这是一个罕见的事件，仅适用于极其复杂的查询或引用大量表或分区的查询。请简化查询。如果您认为您错误地收到了此消息，请联系客户支持服务以获取更多信息。*

将参数列表传递给 SQL Server 有几种可能的方法。假设您更喜欢动态查询解决方案，我认为这个版本仍然更好，同时还注意到 SQL Server 对`in`.

有很多方法可以让这些东西爆炸。

# javascript - 需要帮助使用 javascript

> ID：11752582
> 
> 赞同：3
> 
> 时间：2012-08-01T04:29:57.890
> 
> 标签：javascript

我创建了这个 javascript，它生成一个 0-20 范围内的随机数。我想要做的是创建一个文本字段，用户有 4 次尝试猜测生成的数字。我该怎么做？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Untitled 1</title>
</head>
<body>
<form><input name="code" id="code" type="text" value="" ></input>
<script type="text/javascript">
function makeid() {
    return Math.floor(Math.random() * 20)
}
</script>
<input type="button" style="font-size:9pt" value="Generate Code" onclick="document.getElementById('code').value = makeid()">
</input>
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:45:17.767

您可以使用全局来跟踪状态。但是，这样做的安全性很弱，因为用户可以简单地重新加载页面来规避限制。那么你真正需要做的是在服务器端（例如数据库）跟踪状态，然后在浏览器上使用例如 Ajax Call 来进行检查:)

```
<script type="text/javascript">
var count = 0;
function makeid() {
    count++;
    if (count <= 4) {
      return Math.floor(Math.random() * 20);
    }
    alert('Out of attempts');
}
</script> 
```

**编辑** 道歉，我只回答了你的问题的一半。

```
 <script type="text/javascript">
        var attempts = 0;
        var secretValue = makeid(); // Calculate the secret value once, and don't vary it once page is loaded
        function makeid() {
            return Math.floor(Math.random() * 20);
        }
        function checkId(userValue) {
            if (parseInt(userValue) == secretValue) {
                alert('Correct');
            }
            else {
                attempts++;
                if (attempts <= 4) {
                    alert('Wrong - try again');
                }
                else {
                    alert('Out of attempts');
                }
            }
        }
  </script> 
```

然后将您的点击处理程序更改为

```
onclick="checkId(document.getElementById('code').value);" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:41:45.290

一种方法是将生成的数字放入隐藏的元素中。记录尝试次数，当用户正确或达到 4 次尝试时，显示该值以及他们是否猜对了。也许还显示尝试次数。

包括一个重置按钮来重置计数器并生成一个新的隐藏值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T04:56:38.473

与其使用文本字段，不如尝试使用[prompt()](http://www.w3schools.com/jsref/met_win_prompt.asp)函数？以下是控制流的基本思想：

1.  生成随机数并将其存储在变量中。
2.  创建一些变量，如*正确*并将其设置为 false。
3.  [在for 循环](http://www.w3schools.com/js/js_loop_for.asp)中提示用户猜测（4 次迭代）
4.  每次猜测后，检查猜测是否与您存储的数字相匹配。如果是，则在[将](http://www.w3schools.com/js/js_break.asp)*正确*设置为 true后尽早跳出循环。
5.  退出 for 循环后，根据*正确的值*[提醒](http://www.w3schools.com/jsref/met_win_alert.asp)用户他们是赢还是输。

# c - 当我从浏览器请求时，如何在服务器程序上使用多线程连接并向浏览器发送数据？

> ID：11752583
> 
> 赞同：2
> 
> 时间：2012-08-01T04:29:59.340
> 
> 标签：c, multithreading

我试图在我的服务器程序中使用多线程，这样当我从浏览器收到请求时，我的服务器应该打开一个 txt 文件并将其发送到浏览器进行显示。我需要做的是有一个单独的功能，每次有来自浏览器（客户端）的请求时，它都会在我的 main 内部进行发送/接收，例如：127.0.0.1:3490/index.txt 我设法做到了一个请求仅使用我的主要功能，但我无法将所有内容放入我的线程功能并将其发送到浏览器。

我将不胜感激以下是我的代码：

```
#include <stdio.h>
#include<stdlib.h>
#include <winsock.h>
#include <stddef.h>
#define NUM_THREADS 10
#define MYPORT 3490
void *PrintData(void *thread);  
int main() {
    WSADATA wsaData;
    SOCKET s;
    unsigned fd;
    struct sockaddr_in my_addr;
  WSAStartup(MAKEWORD(1, 1), &wsaData);
  my_addr.sin_family = AF_INET;
  my_addr.sin_port = htons(MYPORT);
  my_addr.sin_addr.s_addr = INADDR_ANY;
  memset(my_addr.sin_zero, '\0', sizeof(my_addr.sin_zero) );

  s=socket(PF_INET,SOCK_STREAM, 0);
  if(s<0) printf("socket failed\n");
  if ( (bind(s, (struct sockaddr *)&my_addr, sizeof(my_addr)) ) !=0){ printf("Bind failed!\n");}
  listen(s,10);

    while(1) {
        fd=accept(s,NULL,NULL);
         printf("Client connected\r\n");
        CreateThread(NULL,(DWORD)NULL,(LPTHREAD_START_ROUTINE)PrintData,(void*)fd,(DWORD)NULL,NULL);  // creating threads
    }
    closesocket(fd);    
    WSACleanup();
}

void *PrintData(void *thread){
   char *header="HTTP/1.1 200 OK\r\nContent-Type: text/html\r\n\r\n";
    char data[512];
    char filename[256];
    FILE *f; 
    printf("It's me, thread!\n");
    SOCKET curr_client = (SOCKET)thread;
    int res;
    while(1){
        res=recv(curr_client,data,512,0);              
        ///data[res]=0;                         
        Sleep(10);
        if(res == 0) printf("error: res == 0");

        sscanf(data,"GET /%s ",filename);  
        printf("Get: %s %d\n", filename, res);
        send(curr_client,header,strlen(header),0);  
        f=fopen(filename,"rb");            
        if(f == NULL){ fputs("Can not find the file!", stderr); }
        while(!feof(f)){
            printf("heloooo");
            int retVal = fread(data, 1, sizeof(data), f);
            ///printf("data is : %s\n", data);
            send(curr_client, data, sizeof(data), 0); 
        }
    }
    fclose(f);
    ExitThread((DWORD)NULL);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:06:56.823

首先，不要`fd`在主函数中关闭。现在你根本不会关闭它，因为循环是无限的，这意味着你有*资源泄漏*。您在线程函数中做的最后一件事是调用`closesocket(curr_client);`.

其次，在线程中你永远循环，永远不会跳出循环。当读取文件出错，到达文件末尾，或者从/向套接字接收/发送时出错，你应该跳出无限循环。这遵循 HTTP 规范，即服务器应在每次请求后关闭连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:00:22.783

```
while(1) {
fd=accept(s,NULL,NULL);             
n=recv(fd,data,512,0);              
data[n]=0;                        
sscanf(data,"GET /%s ",filename);  
printf("Get: %s %d\n", filename, n);      
send(fd,header,strlen(header),0);  
f=fopen(filename,"rb");             
if(f == NULL){ fputs("file error", stderr); } 
fread(data, 1, sizeof(data), f); 
returnVal = send(fd, data, strlen(data), 0); 
if(returnVal<0) printf("Your tester failes!\n\n"); 
fclose(f);
closesocket(fd);                   
} 
```

# java - Glassfish 网络服务高并发

> ID：11752587
> 
> 赞同：0
> 
> 时间：2012-08-01T04:30:19.247
> 
> 标签：java, web-services, glassfish-3, jmeter

当我向我的 Web 服务发送大约 100 个用户时，我得到响应并且 Web 服务运行良好，但是当我检查 1000 个并发用户时，没有一个请求得到回复。

我正在使用 jmeter 进行测试。

当我发送 1000 个并发用户时，我的 glassfish 管理面板在浏览器中超时，仅在 4-5 分钟后打开。wsdl URL 也是如此。

我已经在我们的 LAN 上测试了我的 Web 服务，它适用于 2000 个查询，没有任何问题。

请帮我找到解决方案。

**编辑 1.0**

更多发现

您好，根据您的建议，我所做的是我只是在 Web 服务函数调用中返回了字符串，没有查找，没有 dao，什么都没有......只是返回一个字符串

线程池是 2000 没有问题。

现在，当我为 1000 个用户运行 jmeter 时，它们的运行速度非常快，并返回了大约 200 个请求的响应

因此，这意味着我的 PC 运行 Windows 7 和 i5 处理器和 4GB RAM 的主机性能超过了具有 4GB RAM 和 xeon 5*** 8 核的 hostgator 专用服务器:(

这不是我每月支付 220 美元的费用....

如果我的发现是错误的，请纠正我，我在本地两台电脑上测试了我的应用程序，它可以顺利处理 2000+msgs

**编辑 1.1**

经过大量阅读和实践后，我得出一个结论，即网络延迟是造成这种行为的原因。

我在 glassfish 的管理面板中增加了 bean 池的大小，它有助于将并发用户数提高到 300，但是无论我在池中保留了多少 bean，问题都会再次出现。

所以朋友的问题是：请建议我可以在 Glassfish 的管理面板中更改的一些其他设置，以从根目录中删除此问题！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:57:09.367

您需要为服务执行的各个步骤添加一些性能日志记录。它是否执行多个步骤？计算速度慢吗？数据库访问慢？您的连接池不能很好地扩展？是否需要在 Web 服务器中进行调整以实现如此高的并发性？您需要测量这些东西以找到瓶颈，以便消除它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T10:30:53.583

我在服务器中遇到了同样的问题（同时有 200 多个用户），我研究了官方 glassfish 调整指南，但有一个非常重要的参数没有出现。我也使用了 Jmeter，在我的情况下，时间响应呈指数增长，但服务器的处理器保持在低位。

在 glassfish 管理服务器（configurations/server-config/Network config/thread pools/http-thread-pool）中，您可以看到您的服务器可以处理多少用户。（glassfish 2 和 3 中的参数不同）。

> Max Queue Size：队列中的最大线程数。–1 值表示队列大小没有限制。
> 
> Max Thread Pool Size：线程池中的最大线程数
> 
> Min Thread Pool Size：线程池中的最小线程数
> 
> 空闲线程超时：线程可以在池中保持空闲的最长时间。在此时间到期后，线程将从池中删除。

我建议您将**Max Thread Pool Size**设置为 100 或 200 来解决问题。

您还可以设置另一个 JMV 变量，例如：

> -Xmx/s/m
> 
> -服务器
> 
> -XX:ParallelGCThreads
> 
> -XX:+积极选择

我希望它有所帮助。

# javascript - 为什么我不能将 IMG 元素链接到诸如“http://en.wikipedia.org/wiki/File:Batman_Lee.png”之类的网址

> ID：11752592
> 
> 赞同：1
> 
> 时间：2012-08-01T04:30:50.037
> 
> 标签：javascript

我正在使用谷歌自定义搜索来获取图像结果。这是我的第一次测试，当我搜索蝙蝠侠时，我在维基百科中找到了这个 URL：“http://en.wikipedia.org/wiki/File:Batman_Lee.png”

当我尝试使用它时，图像元素：

```
<img src="http://en.wikipedia.org/wiki/File:Batman_Lee.png"> 
```

我有一个空白元素。为什么是这样？维基百科是在积极阻止人们链接到他们的图片还是有其他原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:34:34.943

因为您使用的 URL 是具有图像的维基百科文件/页面。

绝对图像 URL 为：

```
http://upload.wikimedia.org/wikipedia/en/a/a7/Batman_Lee.png 
```

当您在标签中链接上述 URL`<img>`时，它将起作用。

```
<img src="http://upload.wikimedia.org/wikipedia/en/a/a7/Batman_Lee.png"> 
```

**注意：**您可以通过单击鼠标右键`image`并复制上面的 URL`URL`

[**看演示**](http://jsbin.com/owinug/1/edit)

# maven - 错误 org.sonatype.guice.bean.reflect.NamedClass - 注入错误：org.codehaus.plexus.archiver.jar.JarArchiver

> ID：11752593
> 
> 赞同：3
> 
> 时间：2012-08-01T04:30:56.020
> 
> 标签：maven

我有 maven 项目，所以我尝试 maven install 来制作 jar。但由于 java.lang.ClassNotFoundException，我失败了。所以，我找到了包含该类的 jar。我在 pom.xml 中添加了依赖项。

```
<dependency>
      <groupId>org.codehaus.plexus</groupId>
      <artifactId>plexus-io</artifactId>
      <version>1.0</version>
</dependency> 
```

尽管如此，它还是给出了同样的错误。

最奇怪的是我在另一台计算机上正常运行它，除了窗口的位数外，它具有相同的开发环境。

我发现的错误如下所示。

```
0 [main] ERROR org.sonatype.guice.bean.reflect.NamedClass - Error injecting: org.codehaus.plexus.archiver.jar.JarArchiver
java.lang.NoClassDefFoundError: org/codehaus/plexus/components/io/resources/PlexusIoResourceCollection
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
    at java.lang.Class.getDeclaredConstructors(Class.java:1836)
    at com.google.inject.spi.InjectionPoint.forConstructorOf(InjectionPoint.java:243)
    at com.google.inject.internal.ConstructorBindingImpl.create(ConstructorBindingImpl.java:96)
    at com.google.inject.internal.InjectorImpl.createUninitializedBinding(InjectorImpl.java:609)
    at com.google.inject.internal.InjectorImpl.createJustInTimeBinding(InjectorImpl.java:816)
    at com.google.inject.internal.InjectorImpl.createJustInTimeBindingRecursive(InjectorImpl.java:750)
    at com.google.inject.internal.InjectorImpl.getJustInTimeBinding(InjectorImpl.java:235)
    at com.google.inject.internal.InjectorImpl.getBindingOrThrow(InjectorImpl.java:185)
    at com.google.inject.internal.InjectorImpl.getInternalFactory(InjectorImpl.java:824)
    at com.google.inject.internal.InjectorImpl.getProviderOrThrow(InjectorImpl.java:938)
    at com.google.inject.internal.InjectorImpl.getProvider(InjectorImpl.java:971)
    at com.google.inject.internal.InjectorImpl.getProvider(InjectorImpl.java:932)
    at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:984)
    at org.sonatype.guice.bean.reflect.AbstractDeferredClass.get(AbstractDeferredClass.java:48)
    at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:40)
    at com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:949)
    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1002)
    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:945)
    at com.google.inject.Scopes$1$1.get(Scopes.java:59)
    at org.sonatype.guice.bean.locators.LazyQualifiedBean.getValue(LazyQualifiedBean.java:66)
    at org.sonatype.guice.plexus.locators.LazyPlexusBean.getValue(LazyPlexusBean.java:54)
    at org.sonatype.guice.plexus.binders.PlexusRequirements$RequirementProvider.get(PlexusRequirements.java:222)
    at org.sonatype.guice.plexus.binders.ProvidedPropertyBinding.injectProperty(ProvidedPropertyBinding.java:50)
    at org.sonatype.guice.bean.inject.BeanInjector.doInjection(BeanInjector.java:101)
    at org.sonatype.guice.bean.inject.BeanInjector.injectMembers(BeanInjector.java:66)
    at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:120)
    at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:94)
    at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:253)
    at com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:949)
    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1002)
    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:945)
    at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:984)
    at org.sonatype.guice.bean.reflect.AbstractDeferredClass.get(AbstractDeferredClass.java:48)
    at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:40)
    at com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:949)
    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:995)
    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:945)
    at com.google.inject.Scopes$1$1.get(Scopes.java:59)
    at org.sonatype.guice.bean.locators.LazyQualifiedBean.getValue(LazyQualifiedBean.java:66)
    at org.sonatype.guice.plexus.locators.LazyPlexusBean.getValue(LazyPlexusBean.java:54)
    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:247)
    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:239)
    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfiguredMojo(DefaultMavenPluginManager.java:451)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:98)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:534)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.lang.ClassNotFoundException: org.codehaus.plexus.components.io.resources.PlexusIoResourceCollection
    at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230)
    ... 66 more
5 [main] ERROR org.sonatype.guice.bean.reflect.LoadedClass - Error injecting: org.apache.maven.plugin.jar.JarMojo
com.google.inject.ProvisionException: Guice provision errors:

1) Error injecting: org.codehaus.plexus.archiver.jar.JarArchiver
  at ClassRealm[plugin>org.apache.maven.plugins:maven-jar-plugin:2.3.1, parent: sun.misc.Launcher$AppClassLoader@addbf1]
  while locating org.codehaus.plexus.archiver.Archiver annotated with @com.google.inject.name.Named(value=jar)
  while locating org.apache.maven.plugin.jar.JarMojo

1 error
    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:958)
    at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:984)
    at org.sonatype.guice.bean.reflect.AbstractDeferredClass.get(AbstractDeferredClass.java:48)
    at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:40)
    at com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:949)
    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:995)
    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:945)
    at com.google.inject.Scopes$1$1.get(Scopes.java:59)
    at org.sonatype.guice.bean.locators.LazyQualifiedBean.getValue(LazyQualifiedBean.java:66)
    at org.sonatype.guice.plexus.locators.LazyPlexusBean.getValue(LazyPlexusBean.java:54)
    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:247)
    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:239)
    at org.apache.maven.plugin.internal.DefaultMavenPluginManager.getConfiguredMojo(DefaultMavenPluginManager.java:451)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(DefaultBuildPluginManager.java:98)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:209)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:153)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor.java:145)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:84)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject(LifecycleModuleBuilder.java:59)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBuild(LifecycleStarter.java:183)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(LifecycleStarter.java:161)
    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:319)
    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
    at org.apache.maven.cli.MavenCli.execute(MavenCli.java:534)
    at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
    at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Launcher.java:290)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.java:230)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(Launcher.java:409)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:352)
Caused by: java.lang.NoClassDefFoundError: org/codehaus/plexus/components/io/resources/PlexusIoResourceCollection
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
    at java.lang.Class.getDeclaredConstructors(Class.java:1836)
    at com.google.inject.spi.InjectionPoint.forConstructorOf(InjectionPoint.java:243)
    at com.google.inject.internal.ConstructorBindingImpl.create(ConstructorBindingImpl.java:96)
    at com.google.inject.internal.InjectorImpl.createUninitializedBinding(InjectorImpl.java:609)
    at com.google.inject.internal.InjectorImpl.createJustInTimeBinding(InjectorImpl.java:816)
    at com.google.inject.internal.InjectorImpl.createJustInTimeBindingRecursive(InjectorImpl.java:750)
    at com.google.inject.internal.InjectorImpl.getJustInTimeBinding(InjectorImpl.java:235)
    at com.google.inject.internal.InjectorImpl.getBindingOrThrow(InjectorImpl.java:185)
    at com.google.inject.internal.InjectorImpl.getInternalFactory(InjectorImpl.java:824)
    at com.google.inject.internal.InjectorImpl.getProviderOrThrow(InjectorImpl.java:938)
    at com.google.inject.internal.InjectorImpl.getProvider(InjectorImpl.java:971)
    at com.google.inject.internal.InjectorImpl.getProvider(InjectorImpl.java:932)
    at com.google.inject.internal.InjectorImpl.getInstance(InjectorImpl.java:984)
    at org.sonatype.guice.bean.reflect.AbstractDeferredClass.get(AbstractDeferredClass.java:48)
    at com.google.inject.internal.InternalFactoryToProviderAdapter.get(InternalFactoryToProviderAdapter.java:40)
    at com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:949)
    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1002)
    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:945)
    at com.google.inject.Scopes$1$1.get(Scopes.java:59)
    at org.sonatype.guice.bean.locators.LazyQualifiedBean.getValue(LazyQualifiedBean.java:66)
    at org.sonatype.guice.plexus.locators.LazyPlexusBean.getValue(LazyPlexusBean.java:54)
    at org.sonatype.guice.plexus.binders.PlexusRequirements$RequirementProvider.get(PlexusRequirements.java:222)
    at org.sonatype.guice.plexus.binders.ProvidedPropertyBinding.injectProperty(ProvidedPropertyBinding.java:50)
    at org.sonatype.guice.bean.inject.BeanInjector.doInjection(BeanInjector.java:101)
    at org.sonatype.guice.bean.inject.BeanInjector.injectMembers(BeanInjector.java:66)
    at com.google.inject.internal.MembersInjectorImpl.injectMembers(MembersInjectorImpl.java:120)
    at com.google.inject.internal.ConstructorInjector.construct(ConstructorInjector.java:94)
    at com.google.inject.internal.ConstructorBindingImpl$Factory.get(ConstructorBindingImpl.java:253)
    at com.google.inject.internal.InjectorImpl$4$1.call(InjectorImpl.java:949)
    at com.google.inject.internal.InjectorImpl.callInContext(InjectorImpl.java:1002)
    at com.google.inject.internal.InjectorImpl$4.get(InjectorImpl.java:945)
    ... 33 more
Caused by: java.lang.ClassNotFoundException: org.codehaus.plexus.components.io.resources.PlexusIoResourceCollection
    at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
    at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230)
    ... 66 more
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 3.228s
[INFO] Finished at: Wed Aug 01 11:07:17 KST 2012
[INFO] Final Memory: 4M/15M
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-jar-plugin:2.3.1:jar (default-jar) on project javaperf_io_ReadFile: Execution default-jar of goal org.apache.maven.plugins:maven-jar-plugin:2.3.1:jar failed: Unable to load the mojo 'jar' in the plugin 'org.apache.maven.plugins:maven-jar-plugin:2.3.1'. A required class is missing: org/codehaus/plexus/components/io/resources/PlexusIoResourceCollection
[ERROR] -----------------------------------------------------
[ERROR] realm =    plugin>org.apache.maven.plugins:maven-jar-plugin:2.3.1
[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy
[ERROR] urls[0] = file:/C:/maven/repository/org/apache/maven/plugins/maven-jar-plugin/2.3.1/maven-jar-plugin-2.3.1.jar
[ERROR] urls[1] = file:/C:/maven/repository/junit/junit/3.8.1/junit-3.8.1.jar
[ERROR] urls[2] = file:/C:/maven/repository/org/apache/maven/maven-archiver/2.4.1/maven-archiver-2.4.1.jar
[ERROR] urls[3] = file:/C:/maven/repository/org/codehaus/plexus/plexus-archiver/1.0/plexus-archiver-1.0.jar
[ERROR] urls[4] = file:/C:/maven/repository/commons-lang/commons-lang/2.1/commons-lang-2.1.jar
[ERROR] urls[5] = file:/C:/maven/repository/org/codehaus/plexus/plexus-utils/2.0.5/plexus-utils-2.0.5.jar
[ERROR] Number of foreign imports: 1
[ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]
[ERROR] 
[ERROR] -----------------------------------------------------: org.codehaus.plexus.components.io.resources.PlexusIoResourceCollection
[ERROR] -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException 
```

# android - 如何使用 Jenkins 前端从 git 调试 android 项目？

> ID：11752594
> 
> 赞同：1
> 
> 时间：2012-08-01T04:31:44.187
> 
> 标签：android, ant, jenkins

我已经使用命令“apt-get install jenkins”在我的 ubuntu 11.04 系统上安装了 Jenkins。我能够从 linux 命令行很好地执行“ant debug”命令并​​成功完成但是当我尝试使用 jenkins 前端通过设置构建目标“Invoke ant”和属性“sdk.dir=/opt”从 git hub 调试 Android 项目时/android-sdk-linux-ics”。它给出以下错误控制台输出：

```
########################################################################################

Started by user anonymous
Building in workspace /var/lib/jenkins/workspace/touchanimtn
Checkout:touchanimtn / /var/lib/jenkins/workspace/touchanimtn - hudson.remoting.LocalChannel@72cd429b
Using strategy: Default
Last Built Revision: Revision 3e4b580644fad8b059fb5c13925d3d86fa402187 (origin/HEAD, origin/master)
Fetching changes from 1 remote Git repository
Fetching upstream changes from https://github.com/ssamar/touchanimtn.git
Seen branch in repository origin/HEAD
Seen branch in repository origin/master
Commencing build of Revision 3e4b580644fad8b059fb5c13925d3d86fa402187 (origin/HEAD, origin/master)
Checking out Revision 3e4b580644fad8b059fb5c13925d3d86fa402187 (origin/HEAD, origin/master)
Warning : There are multiple branch changesets here
[touchanimtn] $ ant -Dsdk.dir=/opt/android-sdk-linux-ics clean debug
Buildfile: /var/lib/jenkins/workspace/touchanimtn/build.xml

BUILD FAILED
/var/lib/jenkins/workspace/touchanimtn/build.xml:83: Cannot find /opt/android-sdk-linux-ics/tools/ant/build.xml imported from /var/lib/jenkins/workspace/touchanimtn/build.xml

Total time: 0 seconds
Build step 'Invoke Ant' marked build as failure
Finished: FAILURE

################################################################################### 
```

我还尝试将“android-sdk-linux-ics”放入主文件夹，但给出了同样的错误。

请给我这个错误的正确解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T15:12:37.837

Either the root of your Android SDK isn't at `/opt/android-sdk-linux-ics` (i.e. the `tools` directory should be in there, with no intermediate directories), or the SDK does exist there, but the `jenkins` user doesn't have permission to access it.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-22T10:14:23.990

可能会帮助某人。

ANDROID_HOME/platforms 指向哪里

1.  伸手可及的取景器
2.  带来获取信息
3.  添加 Jenkins 用户和
4.  授予读取权限。

这解决了我的 build.xml not found 错误问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T08:55:32.377

这是一个很好的问题，更多人在之前安装了 android SDK 的 linux 系统上安装 Jenkins 时会遇到。

问题要么是android SDK的路径不正确（1），要么是jenkins用户访问android SDK安装路径的权限不足（2）。

1)**路径**：仔细检查你的 ant 构建步骤中失败的詹金斯项目的路径。转到 ant 构建步骤并单击高级。它应该在属性字段中列出 sdk.dir=SOME/PATH 。对于多个值，请确保扩展字段并为每个值使用一个新行。也不要将 -D 包含在您的论点中，因为 Jenkins 将为每一行都这样做。

2)**权限**：仔细检查那里列出的 android-sdk 文件夹的权限。用于`ls -l`获取当前权限列表并`chmod`在需要时更新权限。

笔记：

切换到系统上的 jenkins 用户并自己从 shell 测试失败的命令总是一个好主意。

```
sudo su jenkins 
```

当我在我的詹金斯配置上启用安全性时，我也遇到了这种错误。您可以通过停止 jenkins 服务、重命名配置文件并重新启动服务来禁用安全性而不会丢失设置。

```
sudo service jenkins stop
sudo mv /var/lib/config.xml /var/lib/config.xml.backup
sudo service jenkins start 
```

在这种情况下，我没有深入检查哪些用户应该获得权限，但我知道恢复此更改可以解决问题。此外，我仍然可以使用前面列出的 jenkins 用户执行 ant 脚本。

这个问题非常相似：[Building android project from jenkins under linux - build failed, cannot find imported build.xml](https://stackoverflow.com/questions/10860777/building-android-project-from-jenkins-under-linux-build-fails-cannot-find-imp)

# node.js - 我怎么知道 mongodb 是否由 mongoose 启动？

> ID：11752598
> 
> 赞同：1
> 
> 时间：2012-08-01T04:32:24.277
> 
> 标签：node.js, mongodb, mongoose

我有一个使用 node.js + Express + mongoose 的工作站点。

恐怕MongoDB可能会被意外关闭，或者它可能一开始没有启动。

以下是代码：

```
var  mongoose    = require('mongoose'),
     Schema = mongoose.Schema;

mongoose.connect('mongodb://localhost/Test');

var Student = mongoose.model('student', new Schema());

Student.find({...},function(err,docs){
      do sth
}); 
```

如我所见，`find`在没有 Mongo 的情况下不会有错误消息。它只是被阻止了。

而且我没有在猫鼬中找到显示连接状态的属性。

所以有人知道我怎么知道 NodeJs 中 mongodb 的状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T07:51:58.277

该`err`参数是一个标准的[Error 对象](http://docs.jit.su/articles/errors/what-is-the-error-object)，如果有任何异常（例如数据库连接不可用）将被设置。您不需要检查连接状态..您需要检查`err`并适当处理。

对于一些示例用法，值得阅读[MongoDB 节点驱动程序的介绍。](http://mongodb.github.com/node-mongodb-native/api-articles/nodekoarticle1.html)

另请参阅Mongoose 的[错误处理](http://mongoosejs.com/docs/errors.html)。

# c# - 如何使用自定义路由返回图像文件以缓存图像文件？

> ID：11752599
> 
> 赞同：2
> 
> 时间：2012-08-01T04:32:25.243
> 
> 标签：c#, caching, routes, asp.net-mvc

我很难弄清楚如何从 blob 流中缓存图像。
这是我的第一个代码，它可以下载返回的图像文件：

**HTML 部分：**

```
<img src="@Url.Action("GetImage", "Asset")?photoId=@SessionData.ProfilePic.PhotoID&type=3"/> 
```

**控制器：**

```
public ActionResult GetImage(long photoId, PhotoType type)
{   
    byte[] img = <Code that fetches image byte from blob stream>;
    return File(img, "image/png");            
} 
```

但这无法在浏览器中缓存。
我在想，如果 url 看起来像这样：

```
http://stackoverflow.com/Asset/GetImage/1/2 
```

图像现在可以缓存了吗？
所以我创建了另一条路线：

```
routes.MapRoute(
    "Upload",
    "Asset/GetImage/{photoId}/{type}",
    new { controller = "Asset", action = "GetImage" }
); 
```

并像这样访问图像：

```
http://stackoverflow.com/Asset/GetImage/1/2
<img src="http://stackoverflow.com/Asset/GetImage/1/2" /> 
```

但我总是得到：

```
Failed to load resource: the server responded with a status of 404 (Not Found) 
```

现在我的问题是：

1.  我是否认为当 url 像这样格式化时，`http://stackoverflow.com/Asset/GetImage/1/2`它现在可以被浏览器缓存？
2.  为什么我会收到此错误？`Failed to load resource: the server responded with a status of 404 (Not Found)`我的路线有什么问题？

希望有人能帮忙。

**编辑**

这是我的完整路线：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

routes.MapRoute(
    "Upload",
    "Asset/GetImage/{photoId}/{type}",
    new { controller = "Asset", action = "GetImage" }
);

var route = routes.MapRoute(
        "Gallery",
        "",
        new { controller = "Auth", action = "Login" },
        new[] { "Project.Areas.Gallery.Controllers" }
    );

route.DataTokens["area"] = "Gallery"; 
```

仍然出现错误`Failed to load resource: the server responded with a status of 404 (Not Found)`，可能是什么问题？

**编辑2**

我使用的元标记列表：

```
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="description" content="">
<meta name="author" content="">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta http-equiv="imagetoolbar" content="false">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T05:27:04.570

以下对我有用

**动作方法**

```
[OutputCache(Duration = 20, VaryByParam = "photoId")]
public ActionResult GetImage(long photoId, long type)
{
    byte[] img = System.IO.File.ReadAllBytes(Server.MapPath("~/Images/aspNetHome.png"));
    return File(img, "image/png");
} 
```

**HTML**

```
<img src="~/Home/GetImage/1/2" alt="" /> 
```

**路由添加到 Global asax**

```
routes.MapRoute(
    "Upload",
    "Home/GetImage/{photoId}/{type}",
    new { controller = "Home", action = "GetImage" }
); 
```

**来自 Fiddler 的响应标头**

> 引用：http://localhost/MvcApplicationImageTest/Home/GetImage/1/2*

```
HTTP/1.1 200 OK
Cache-Control: private, max-age=20
Content-Type: image/png
Expires: Wed, 01 Aug 2012 05:08:25 GMT
Last-Modified: Wed, 01 Aug 2012 05:08:05 GMT
Server: Microsoft-IIS/7.5
X-AspNetMvc-Version: 4.0
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Wed, 01 Aug 2012 05:08:10 GMT
Content-Length: 3736 
```

**编辑以下评论**

**移除了 OutputCacheAttribute**

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Type: image/png
Server: Microsoft-IIS/7.5
X-AspNetMvc-Version: 4.0
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Thu, 02 Aug 2012 04:52:02 GMT
Content-Length: 3736 
```

正如您在标题中看到的那样，`Cache-Control`只显示`private`而不是`Cache-Control: no-cache, Expires: -1, Pragma: no-cache`

我现在相信您必须以某种方式明确禁用缓存？您的视图或布局页面中是否有任何*META标签？*例如

```
<meta http-equiv="cache-control" content="no-cache" />

<meta http-equiv="pragma" content="no-cache" />

<meta http-equiv="expires" content="-1" /> 
```

# android - 使用 TabLayout 时无法通过套接字传递数据

> ID：11752600
> 
> 赞同：1
> 
> 时间：2012-08-01T04:32:38.737
> 
> 标签：android, serversocket, android-tabs

最初，我只有 1 个基本页面，其中不包含任何`tablayout`内容，并且运行良好。插入的数据已通过套接字。

现在，我正在使用`tablayout`，它不传递数据。发生了什么？

这是我的活动，包括套接字：

```
commandline = commandline + "[" + id+"]";

Socket socket = null;
DataOutputStream dataOutputStream = null;
DataInputStream dataInputStream = null;

 try {           
      socket = new Socket("xxx.xx.xxx.xx", 2000);
      dataOutputStream = new DataOutputStream(socket.getOutputStream());
      dataInputStream = new DataInputStream(socket.getInputStream());
      dataOutputStream.writeBytes(commandline);
      //dataOutputStream.writeChars("Kacang Lupakan Kulit");

  } catch (UnknownHostException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
      tv.setText(readStackTrace(e));
  } catch (IOException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();

      //tv.setText(readStackTrace(e));
  } finally{

  }

  if (dataOutputStream != null){
      try {
          dataOutputStream.close();
      } catch (IOException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
          //tv.setText(readStackTrace(e));
      }
  }

  if (dataInputStream != null){
      try {
          dataInputStream.close();
      } catch (IOException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
          //tv.setText(readStackTrace(e));
      }
  }

  if (socket != null){
      try {
          socket.close();
      } catch (IOException e) {
          // TODO Auto-generated catch block
          e.printStackTrace();
          // tv.setText(readStackTrace(e));
      }
  } 
```

这是我声明选项卡的主要活动：

```
public class MainActivity extends TabActivity {
private TabHost aTab;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);        

    TabHost tabHost = getTabHost();

    TabSpec report = tabHost.newTabSpec("Report");
    report.setIndicator("Report", getResources().getDrawable(R.drawable.report_01));
    Intent reportIntent = new Intent(this, ReportActivity.class);
    report.setContent(reportIntent);

    TabSpec profile = tabHost.newTabSpec("Profile");
    profile.setIndicator("Profile", getResources().getDrawable(R.drawable.profile_01));
    Intent profileIntent = new Intent(this, ProfileActivity.class);
    profile.setContent(profileIntent);

    TabSpec about = tabHost.newTabSpec("About");
    about.setIndicator("About", getResources().getDrawable(R.drawable.about_01));
    Intent aboutIntent = new Intent(this, AboutActivity.class);
    about.setContent(aboutIntent);

    // Adding all TabSpec to TabHost
    tabHost.addTab(report); 
    tabHost.addTab(profile);
    tabHost.addTab(about); 
    }       
} 
```

需要提交的数据在报告选项卡中。

**这与使用前使用的代码相同`TabLayout`，它确实传递了数据。

有人知道吗？请。

# javascript - 如何在提交事件时将窗口位置置于底部？

> ID：11752604
> 
> 赞同：1
> 
> 时间：2012-08-01T04:33:06.703
> 
> 标签：javascript, html, css, ajax, javascript-events

我得到了一个包含几个下拉字段的页面，当我提交该页面时，它返回的数据来自字段下方的 mysql。当用户单击提交按钮时，我想让这个页面位于底部。目前我尝试了以下脚本

```
function md()
{
//window.location.hash="code";
window.scrollTo(0, document.body.scrollHeight);
} 
```

这适用于 Mozilla，但不适用于 IE。上面的代码还有其他选择吗？我的提交按钮有 onclick 事件，它调用两个 javascript 函数

```
onClick='selectAllOptions("countryRF");md();return false;' 
```

所以在 IE 中，当我点击它的底部但是当数据再次出现时它又回到顶部？请帮我！。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:39:19.770

如果您想要这样做，这个 jquery 函数将滚动到页面底部：

```
$("html, body").animate({ scrollTop: $(document).height() }, "slow"); 
```

所以你可以把它扔到函数中：`function md() { [the code above] }`

一定要加载jquery，把它放在你`<head>`的页面中：

`<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>`

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T06:14:17.623

尝试使用此代码：

```
<form action="" onsubmit="selectAllOptions('countryRF');setTimeout(md, 1000);return false;"> 
```

最好使用按钮`onsubmit`而`form`不是`onclick`按钮，因为使用键盘、屏幕阅读器、盲文终端等的人将无法触发`click`事件。

我添加的代码是`setTimeout(md, 1000);`，它会在 1 秒后触发该功能`md`，因为页面可能不会花不到一秒的时间来更新。

**编辑：**

那可能行不通。

尝试添加`name="form"`到您的表单，并在`head`页面的部分中使用它：

```
<?php
if(isset($_POST['form'])) {
    ?>
<script type="text/javascript">
    window.onload = function() {
        window.scrollTo(0, document.body.scrollHeight);
    };
</script>
<?php
}
?> 
```

# magento - 如何在magento中添加价格为“联系定价”的产品

> ID：11752610
> 
> 赞同：4
> 
> 时间：2012-08-01T04:34:02.573
> 
> 标签：magento, product

我有一个 Magento 网站。

我有许多产品要添加。

```
But some have price as "Contact for Pricing" or "Call for Pricing" so cant to add.

Because there has validation for the price. 
```

那么如何添加此类产品呢？

如果有此类产品的任何模块？

我需要将此类产品的价格显示为“联系定价”或“致电定价”。

是否有免费下载“询价”的扩展？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-26T16:12:19.620

乔希的回答略有改善。感谢 Josh 使用属性的想法！

为此示例创建属性代码“call_4_price”。就像 Josh 建议的那样，将其设为 Yes/No 属性。默认值“否”。将其添加到您需要隐藏价格的属性集中。

查找“价格和添加到购物车按钮”所在的所有 .phtml 文件（模板 > 目录 > 产品 > view.phtml、price.phtml、list.phtml 等）

将此代码粘贴在价格代码之前。

```
 <!-- Call For Price - begin -->
        <?php $attribute = $_product->getResource()->getAttribute('call_4_price'); ?>
            <?php $attribute_value = $attribute ->getFrontend()->getValue($_product); ?>
            <?php if ($attribute_value == 'Yes'): ?>
                //Please Call for pricing
            <?php else: ?> 
```

这在添加到购物车按钮之后。

```
 <?php endif; ?>
        <!-- Call For Price - end --> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T11:34:31.983

为询价创建一个是/否属性。创建产品时，在价格字段中添加一些内容只是为了通过验证。

现在修改您的模板文件以不显示价格，如果它要求价格设置为“是”。

# python - 如何使用python在多台服务器上执行命令

> ID：11752613
> 
> 赞同：2
> 
> 时间：2012-08-01T04:34:18.233
> 
> 标签：python, concurrency, command

每个人！我有一个管理任务：我需要编写一个脚本来执行在服务器列表中的文件中给出的命令，这些服务器的 IP 地址、登录名和密码在另一个文件中给出。我的目标是同时在每台服务器上执行一个命令，也就是说，我不想等到一个服务器完成它的命令，然后再要求另一台服务器执行该命令。有人知道该怎么做吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T04:37:39.333

[织物](http://docs.fabfile.org/en/1.4.3/tutorial.html)可能是你的答案。我将它用于我当前的项目。

# android - android中的数据库检索

> ID：11752617
> 
> 赞同：1
> 
> 时间：2012-08-01T04:34:54.500
> 
> 标签：android, database

在我的应用程序中，我在表格视图中显示来自数据库的数据。我的要求是我必须从数据库中检索将在当前月份下降的数据。我已经编写了查询，但它是 0。实际上我有 1以今天的日期在数据库中输入，所以我的查询应该返回该数据，但它显示为 0。请帮助我。提前致谢。

我的查询如下：

```
public String addgroupincome(String grp) throws SQLException
{   
    long sum=0; 
    Cursor cursor1 = db.rawQuery(
             "SELECT SUM("+(KEY_TOTAL)+") FROM incomexpense WHERE date= Strftime('%Y-%m','now') AND category='Income' AND groups='"+grp+"'",null);
     if(cursor1.moveToFirst())
     {
       sum = cursor1.getLong(0);
     }
     cursor1.close();   
     String housetotal=String.valueOf((long)sum);    
     return housetotal; 
} 
```

我得到了这个总数并显示在表格布局的文本视图中..

```
final  String houtotal=db.addgroupincome(group1);  
     housetotal.setText(houtotal); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T06:00:56.090

```
if (cursor.moveToNext()) {
  cursor.moveToFirst();
  while (cursor.isAfterLast() == false) {
    Log.i(ID, cursor.getInt(0) + "");
    cursor.moveToNext();
  }
  cursor.close();
} else {
  cursor.close();
  return null;
} 
```

试试这个方法......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:48:31.010

为什么不尝试在查询中给出表的列名..它可能适合您..指定要检索的列..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T04:55:00.393

查询很可能没有错，但是您将查询结果传递给 ListView 的方式。你能展示一下你是怎么做的吗？也许我能帮上忙。

或者你可以看看[这里](https://stackoverflow.com/questions/1917773/dynamic-listview-in-android-app)或[这里](http://wowjava.wordpress.com/2011/03/26/dynamic-listview-in-android/)

* * *

```
public int getCount() {
    DBHelper dbHelper = DBHelper.getDBAdapterInstance(this);
    int count = 0;

    try {
        dbHelper.openDataBase();

        String query = "select count(1) from t_model where upper(brandName) = upper('"
                + selectedBrand + "') order by modelName ASC";

        Cursor cursor = dbHelper.selectRecordsCursor(query, null);

        if (cursor.moveToFirst()) {
            count = cursor.getInt(0);
        }

        cursor.close();
        cursor = null;

    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        dbHelper.close();
    }

    return count;
} 
```

对于 TextView 应该像

```
TextView tvCount = (TextView) findViewById(R.id.tvCount);
tvCount.setText("Count : " + getCount); 
```

* * *

如果您在调试查询时遇到问题。试试[http://sqlitebrowser.sourceforge.net/](http://sqlitebrowser.sourceforge.net/)或[http://www.sqliteexpert.com/](http://www.sqliteexpert.com/)

# android - 加载引发 RuntimeException 的 XML 文件

> ID：11752618
> 
> 赞同：1
> 
> 时间：2012-08-01T04:34:54.443
> 
> 标签：android, android-layout, xamarin.android, layout-inflater

我正在使用以下 XML 文件来创建布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/widget28"
    android:layout_width="fill_parent"
    android:layout_height="80px">
  <LinearLayout
      android:id="@+id/linearText"
      android:layout_width="wrap_content"
      android:layout_height="fill_parent"
      android:orientation="vertical"
      android:layout_marginLeft="10px"
      android:layout_marginTop="10px">
    <TextView
        android:id="@+id/txtAirLineCodeLv"
        android:text="TextView" />
    <ImageView
    android:id="@+id/StopDetailBtnLv"/>
    <TextView
        android:id="@+id/txtPriceLv"
        android:text="TextView" />
  </LinearLayout>
  <LinearLayout
    android:id="@+id/linearText1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <ImageView
  android:id="@+id/imgFlightLogoLv" />
  </LinearLayout>
  <LinearLayout
  android:id="@+id/linearText2"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content">
    <TextView
         android:id="@+id/txtTotalDurationLv"
         android:text="TextView" />
    <TextView
      android:id="@+id/txtStopCountLv"
      android:text="TextView" />
  </LinearLayout>
  <LinearLayout
android:id="@+id/linearText3"
android:layout_width="wrap_content"
android:layout_height="wrap_content">
    <TextView
         android:id="@+id/txtOrgLv"
        android:text="TextView" />
  </LinearLayout>
</LinearLayout> 
```

但是当我使用以下代码加载此文件时：

```
view = context.LayoutInflater.Inflate(Resource.Layout.CustomizeSearchResult, parent, false) as LinearLayout; 
```

a`RuntimeException`被抛出。我认为我的布局有问题，但我找不到。因为当我加载另一个 XML 文件代替它时，不会显示错误并且它运行成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:42:18.323

You forgot to specify the layout_height and layout_width for TextViews and ImageView

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:19:14.993

在这里，您没有将`height`and设置`weight`为`ImageView`and `TextView`。

`height and weight`如果您给予适当的 UI 元素，图形布局将对您可见。

如果您想以编程方式为 UI 元素设置高度和重量，您可以使用 java.util 设置高度和重量。您不必担心`XML`布局中给出的尺寸。

我确信这些身高和体重会在**运行时**改变。

像这样更改您的xml

```
<?xml version="1.0" encoding="utf-8"?>
  <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/widget28"
   android:layout_width="fill_parent"
   android:layout_height="80px">
  <LinearLayout
   android:id="@+id/linearText"
   android:layout_width="wrap_content"
   android:layout_height="fill_parent"
   android:orientation="vertical"
   android:layout_marginLeft="10px"
   android:layout_marginTop="10px">
 <TextView
    android:id="@+id/txtAirLineCodeLv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="TextView" />
<ImageView
    android:id="@+id/StopDetailBtnLv"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"/>
<TextView
    android:id="@+id/txtPriceLv"
    android:text="TextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />
</LinearLayout>
<LinearLayout
  android:id="@+id/linearText1"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content">
 <ImageView
 android:id="@+id/imgFlightLogoLv" 
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"/>
</LinearLayout>
<LinearLayout
android:id="@+id/linearText2"
android:layout_width="wrap_content"
android:layout_height="wrap_content">
<TextView
   android:id="@+id/txtTotalDurationLv"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:text="TextView" />
<TextView
  android:id="@+id/txtStopCountLv"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:text="TextView" />
</LinearLayout>
<LinearLayout
android:id="@+id/linearText3"
android:layout_width="wrap_content"
android:layout_height="wrap_content">
<TextView
     android:id="@+id/txtOrgLv"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
    android:text="TextView" />
</LinearLayout>
</LinearLayout> 
```

# xml - 一个 .docx 文件中可以包含多少个 headerX.xml 文件？

> ID：11752620
> 
> 赞同：2
> 
> 时间：2012-08-01T04:35:08.387
> 
> 标签：xml, openxml, docx, templating

我设置了一些模板功能，可以修改现有的 .docx 文件以插入自定义值。

它使用我感兴趣的值包含在文件**word/header1.xml**和**word/header2.xml中工作了一段时间**

现在代码已经停止工作，值似乎在**word/header3.xml**

**可以有多少个 headerX.xml 文件，其中 X 是一个数字？**我不知道是否要更改我的代码以允许无限数量（这更痛苦），或者是否只能有 5 个或每页一个或其他限制。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T22:11:48.593

每个部分三个（我认为），取决于您是否有不同的第一页，奇数/偶数。

你可以有多个部分..

您不应该依赖在 word/header*n*.xml 中可预测的数字 n，或者甚至页眉/页脚将具有该形式的部分名称。

正确的方法是查看主文档部分的 rels 部分，并按类型识别标题部分。

对于哪个标头在哪里以及如何使用，您需要查看主文档部分中的 sectPr 元素。

# python - 不使用openssl创建证书

> ID：11752621
> 
> 赞同：2
> 
> 时间：2012-08-01T04:35:13.110
> 
> 标签：python, openssl

我们正在 Linux 服务器上制作部署脚本，它将为我们的 Web 应用程序提取所有必要的组件（tomcat 服务器、端口配置......）。此刻，我被 Https 连接的 PFX 证书生成困住了。部署脚本是使用 Python 编写的。有没有人在不使用 OpenSSL 或其任何包装器的情况下使用纯 python 来生成证书？我们不想使用 OpenSSL 的原因是要求部署的包应该尽可能少地依赖于目标机器。而且，它不需要是 Python。任何对 Linux 环境友好的语言都可以（虽然 Python 是我最喜欢的语言）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T21:22:29.657

无法帮助您使用 python，但这是您在没有 openssl 的情况下在 PHP 中执行此操作的方法：

[http://phpseclib.sourceforge.net/x509/tutorial.html#example1](http://phpseclib.sourceforge.net/x509/tutorial.html#example1)

# ajax - 使用 ajax load() 将变量传递给 php

> ID：11752624
> 
> 赞同：2
> 
> 时间：2012-08-01T04:36:12.520
> 
> 标签：ajax, variables, load

我为此找到了一些接近的答案，但它们都不适用于我的情况。我有：

1.  输入标签：

    ```
     <input name="title" id="title"> 
    ```

2.  阿贾克斯：

    ```
    <script language="javascript">
    function example_ajax_request() {

        $('#example-placeholder').html('<p><img src="/img/ajax-loader.gif" /></p>');

        setTimeout('example_ajax_request_go()', 0);

    }

    function example_ajax_request_go() {

        $j(document).ready(function () {

            var inputField = $j('#inputText').val();

            $j(".button").click(function () {

                $('#example-placeholder').load('preview.php?title=' + title + ' .aClass');

            }
       </script> 
    ```

3.  调用函数的按钮：

    ```
    <input type="button" onclick="example_ajax_request()" value="Preview" /> 
    ```

我正在尝试通过 ajax 将输入标签中的 'title' var 传递给 'preview.php'。上面的代码有错误并且没有运行，你能建议纠正一个吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:15:39.323

找到了办法。这里是：

```
<script type="text/javascript">
function example_ajax_request() {
 $('#example-placeholder').html('<p><img src="img/ajax-loader.gif" /></p>');
 $('#example-placeholder').load("preview.php?title="+$('#title').val());
}
</script> 
```

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:53:41.863

您没有输入确切的错误消息（请从您的浏览器控制台输入并更新您的问题）。我只是提出一些建议/改进：

1.  每当您传递 GET 参数时，始终对值进行 URIEncode（the`xyz`和`value`in `url?abc=xyz&blah=value`）。在 javascript 中有一个函数调用`EncodeURIComponent(..)`。你会像这样使用它：

    ```
    'preview.php?title=' +  EncodeURIComponent(title +' .aClass') 
    ```

2.  一个可能的错字，你在 URL 中有一个空格，在`+ ' .aClass'`. 如果您需要一个，请明确地将其替换为 a`+`或`%20`。

# autocomplete - Auto completion search with Solr using NGrams

> ID：11752631
> 
> 赞同：5
> 
> 时间：2012-08-01T04:38:01.223
> 
> 标签：autocomplete, solr, n-gram

I'm working on auto completion search with [Solr](http://en.wikipedia.org/wiki/Apache_Solr) using EdgeNGrams. If the user is searching for names of employees, then auto completion should be applied. That is, I want the results to be like a Google search. It's working fine for some searches.

File `schema.xml`:

```
<fieldType name="edgytext" class="solr.TextField" positionIncrementGap="100" omitNorms="true">
    <analyzer type="index">
        <tokenizer class="solr.KeywordTokenizerFactory" />
        <filter class="solr.LowerCaseFilterFactory" />
        <filter class="solr.RemoveDuplicatesTokenFilterFactory"/>
    </analyzer>
    <analyzer type="query">
        <tokenizer class="solr.KeywordTokenizerFactory" />
        <filter class="solr.LowerCaseFilterFactory" />
        <filter class="solr.EdgeNGramFilterFactory" minGramSize="1" maxGramSize="15" side="front" />
    </analyzer> 
```

```
<field name="title" type="edgytext" indexed="true" stored="true" omitNorms="true" omitTermFreqAndPositions="true"/>
<field name="empname" type="edgytext" indexed="true" stored="true" omitNorms="true" omitTermFreqAndPositions="true" />

<field name="autocomplete_text" type="edgytext" indexed="true" stored="false"  multiValued="true" omitNorms="true" omitTermFreqAndPositions="false" />
<copyField source="empname" dest="autocomplete_text"/>

<copyField source="title" dest="autocomplete_text"/> 
```

* * *

```
 http://local:8080/test/suggest/?q=michael 
```

Result:

```
<?xml version="1.0" encoding="UTF-8" ?>
<response>
    <lst name="responseHeader">
        <int name="status">0</int>
        <int name="QTime">1</int>
    </lst>
    <result name="response" numFound="0" start="0" />
    <lst name="spellcheck">
        <lst name="suggestions">
            <lst name="michael">
                <int name="numFound">9</int>
                <int name="startOffset">0</int>
                <int name="endOffset">7</int>
                <arr name="suggestion">
                    <str>michael bolton</str>
                    <str>michael foret</str>
                    <str>michael houser</str>
                    <str>michael o'brien</str>
                    <str>michael penn</str>
                    <str>michael row your boat ashore</str>
                    <str>michael tilson thomas</str>
                    <str>michael w. smith</str>
                    <str>michael w. smith featuring andrae crouch</str>
                </arr>
            </lst>
            <str name="collation">michael bolton</str>
        </lst>
    </lst>
</response> 
```

It's working fine for me. When I search with `michael f`

```
http:// local:8080/test/suggest/?q=michael f 
```

I get a response like:

```
<?xml version="1.0" encoding="UTF-8" ?>
<response>
    <lst name="responseHeader">
        <int name="status">0</int>
        <int name="QTime">1</int>
    </lst>
    <result name="response" numFound="0" start="0" />
    <lst name="spellcheck">
        <lst name="suggestions">
            <lst name="michael">
                <int name="numFound">9</int>
                <int name="startOffset">0</int>
                <int name="endOffset">7</int>
                <arr name="suggestion">
                    <str>michael bolton</str>
                    <str>michael foret</str>
                    <str>michael houser</str>
                    <str>michael o'brien</str>
                    <str>michael penn</str>
                    <str>michael row your boat ashore</str>
                    <str>michael tilson thomas</str>
                    <str>michael w. smith</str>
                    <str>michael w. smith featuring andrae crouch</str>
                </arr>
            </lst>
            <lst name="f">
                <int name="numFound">10</int>
                <int name="startOffset">8</int>
                <int name="endOffset">9</int>
                <arr name="suggestion">
                    <str>f**k the facts</str>
                    <str>fairest lord jesus</str>
                    <str>fatboy slim</str>
                    <str>ffh</str>
                    <str>fiona apple</str>
                    <str>foo fighters</str>
                    <str>frank sinatra</str>
                    <str>frans bauer</str>
                    <str>franz ferdinand</str>
                    <str>françois rauber</str>
                </arr>
            </lst>
            <str name="collation">michael bolton f**k the facts</str>
        </lst>
    </lst>
</response>. 
```

When I search with `michael f` then, I should get `michael foret` only. Data coming starts with `f`. Is there anything wrong in my configuration settings in Solr?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-01T07:40:42.750

我写了 [旧链接] 关于使用 Solr 进行自动建议的不同方法以及您应该问自己一些问题以便做出正确的选择。简而言之，开箱即用的方法是：

*   刻面前缀
*   NGrams
*   条款组件
*   推荐人

它们都有优点和局限性，我建议你阅读这篇文章。

如果您正在寻找一个完整且灵活的解决方案，这需要更多的工作，您也可以看看[这篇文章](http://www.cominvent.com/2012/01/25/super-flexible-autocomplete-with-solr/)。

如果您已经决定使用 NGrams，给定您的示例，您可以使用[EdgeNGramFilterFactory](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters/#solr.EdgeNGramFilterFactory)和 minGramSize 1 为您的员工编制索引，然后在该字段上搜索以进行自动建议。对于客户端部分，您需要使用一些 javascript。

# .htaccess - 简单的 Htaccess 重定向不起作用

> ID：11752641
> 
> 赞同：1
> 
> 时间：2012-08-01T04:40:15.083
> 
> 标签：.htaccess, url, redirect

由于某种原因，这不起作用...

```
Options +FollowSymLinks -MultiViews -Indexes
RewriteEngine On
RewriteBase /

Redirect 301 "/modules.php?name=News&file=article&sid=179" http://www.mysite.com/a/new/url 
```

我不知道为什么......如果我用另一个不存在的 URL（/helloworld）替换被重定向的 URL，它会很好地重定向到新的 url..

是不是在抓什么东西？我尝试转义 (/modules.php\?name=News&file=article&sid=179) 但没有任何区别，仍然只有 404s。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:17:10.643

您无法匹配`Redirect`指令中的查询字符串，您必须使用 mod_rewrite 和`%{QUERY_STRING}`变量。试试这个：

```
RewriteCond %{QUERY_STRING} name=News&file=article&sid=179
RewriteRule ^/?modules\.php$ http://www.mysite.com/a/new/url? [R=301,L]
# There is a ? here to prevent query strings appending -----^ 
```

# .htaccess - .htaccess rewrite /profile.php?username=Something

> ID：11752645
> 
> 赞同：0
> 
> 时间：2012-08-01T04:40:48.587
> 
> 标签：.htaccess

I had this code before

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /lr/profile.php?username=$1 
```

But that makes the profiles go to **coolsite.com/Something** I want the profile link go to **/profile/Something** instead of **profile.php?username=Something**

How can i do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:54:04.857

除非您的问题比我看到的更多，否则只需将您的 RewriteRule 更改为以下内容即可解决问题。

```
RewriteRule ^profile/(.*)$ /lr/profile.php?username=$1 
```

# java - 如何在 IIS 中托管 Java Web 服务

> ID：11752651
> 
> 赞同：0
> 
> 时间：2012-08-01T04:41:12.940
> 
> 标签：java, eclipse, web-services

我使用 eclipse 在 java 中创建了一项 Web 服务。谁能告诉我如何通过 IIS 运行该 Web 服务。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T04:47:11.570

你不能。MS IIS 只能托管使用 Microsoft 技术（如 ASP、.NET 和 PHP）开发的 Web 应用程序。无法托管 Java 应用程序。

为了托管用 Java 开发的 Web 服务（我想您使用了 Apache Axis），您至少需要一个 servlet 容器（又名 Java Web 服务器）或一个完整的 Java EE 容器：像 Apache Tomcat、Red Hat JBoss 等免费和开源的容器，阿帕奇 Jeronimo，甲骨文 Glassfish；像 Oracle WebLogic、IBM WebSphere...

您可能还需要使用 Apache Axis 等其他库。

根据您的 Eclipse 配置，您可以将其部署在 Eclipse 内的嵌入式 Tomcat 服务器中以对其进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T04:46:30.613

不！你不能。Java Web 服务应用程序*应该*托管在[Java EE 容器中](http://docs.oracle.com/javaee/6/tutorial/doc/bnabo.html)，[或者](http://weblogs.java.net/blog/wiverson/archive/2009/04/google_app_engi.html)您可以[在 Java SE 6.0 中运行 Web 服务](http://today.java.net/pub/a/today/2007/07/03/jax-ws-web-services-without-ee-containers.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:29:06.113

好吧，如果您坚持，我想您可以使用 ISAPI 插件。请参阅此处了解更多详情：

[http://tomcat.apache.org/connectors-doc-archive/jk2/jk/iishowto.html](http://tomcat.apache.org/connectors-doc-archive/jk2/jk/iishowto.html)

# jquery - hoverIntent jQuery submenu not staying open

> ID：11752657
> 
> 赞同：0
> 
> 时间：2012-08-01T04:42:36.147
> 
> 标签：jquery, submenu, hoverintent

**Summary/The Problem:**

After hovering over a link in a menu system that uses jQuery and hoverIntent to display a submenu, if the mouse pointer moves into the submenu, the submenu immediately closes.

**[Example on JSfiddle](http://jsfiddle.net/taJmz/27/)**

**Details**

I've been having a problem with the jQuery hoverIntent plugin. I have a navigation menu that includes a submenu. That submenu is opened when the user hovers over a specified top-level link. Here is the HTML:

```
<ul id="Menu">
    <li><a href="/">Home</a></li>
    <li><a href="news/">News</a></li>
        <li class="hassublinks"><a href="software.php">Software & Apps</a>
            <ul>
                <li><a href="windows.php">Windows</a></li>
                <li><a href="mac.php">Mac</a></li>
                <li><a href="ios.php">iOS</a></li>
                <li><a href="android.php">Android</a></li>
            </ul>
        </li>
    <li><a href="feedback.php">Feedback</a></li>
    <li><a href="about.php">About</a></li>
</ul> 
```

Basically, each `<li>` within the `<ul>` with id "Menu" has a link to a page on the website, and one of the `<li>'s` contains a submenu (another `<ul>`) with more links. That `<li>` with the submenu in it is given the class "hassublinks", and still has an `<a>` tag in it to link to the main Software & Apps page. But because it contains a submenu, I also used jQuery and hoverIntent to make it so that when you hover over the Software & Apps `<li>`, the submenu `<ul>` is displayed. Here is the code:

```
$(function($) {

    function showMenu(){ 
        $('#Menu ul').slideDown(500, "swing");
    }
    function hideMenu(){ 
        $('#Menu ul').slideUp(500, "swing");
    } 

    $('#Menu > li.hassublinks > a').hoverIntent({
        over: showMenu,
        timeout: 400,
        out: hideMenu
    });
}); 
```

This code simply makes it so that when the `<a>` tag in a top-level `<li>` that has sublinks is hovered over, the submenu will be displayed, and then disappear when the mouse pointer leaves. This works, however **there is one major issue:** After the initial `<li>` is hovered over to display the submenu, if the mouse pointer moves onto that submenu or an `<li>` in the submenu, the submenu is hidden. Obviously, this is not supposed to happen. I have created a [demo](http://jsfiddle.net/taJmz/27/) of this on jsfiddle. Is there any way to fix this? I had previously been using CSS3 transitions for the submenu, but switched to jQuery when I realized that you cannot easily transition the height of an element from 0px (its closed height) to the value "auto" (its open height). Now with jQuery I can easily transition the submenu to its full height, so that's no longer a problem, but now there's this issue, and I can't figure out how to fix it. Is there any way to make the submenu stay open when it's hovered over?

I have searched for similar questions and did find a few, but after reading them I saw that they involved `<div's>` and not `<ul>'s`, `<li>'s`, and `<a>'s`, and when I tested the answers to those questions by changing them to use those tags, they didn't work correctly.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T18:53:24.950

尝试这个

```
$(function($) {

 function showMenu() {
    $('#Menu ul').slideDown(500, "swing");
}

function hideMenu() {
    $('#Menu ul').slideUp(500, "swing");
}   
    $("li.hassublinks").hoverIntent({
        over: showMenu,
        timeout: 400,
        out: hideMenu
    });

}); 
```

# linux - 是否有适用于 Linux 的 Google Drive 客户端应用程序？

> ID：11752658
> 
> 赞同：0
> 
> 时间：2012-08-01T04:42:36.880
> 
> 标签：linux, google-drive-api

我需要谷歌驱动客户端应用程序将我的数据从 Linux 机器同步到谷歌驱动器。

有没有应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T04:47:31.880

适用于 Linux 的官方 Google Drive 尚未发布

试试[**Grive**](https://github.com/Grive/grive/) （非官方开源客户端）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:00:26.737

[InSynC](http://www.omgubuntu.co.uk/2012/08/insync-brings-google-drive-to-ubuntu)可能是另一种选择，但我还没有尝试过。看起来不错恕我直言。

# routing - 将 TFS 公开到 Internet

> ID：11752662
> 
> 赞同：0
> 
> 时间：2012-08-01T04:44:07.537
> 
> 标签：routing, router, wan, dmz

我已经在家庭服务器上安装 TFS 很长时间了，我喜欢它。现在我需要在互联网上公开它，因为我和其他一些人需要从事一个编程项目。

我有一个 DLink 路由器“DIR-825”，并且已经做了很多研究，但我对为什么我无法让它工作感到有点困惑。我尝试使用我的家庭服务器 IP 地址 192.168.1.08 进行端口转发甚至 DMZ（禁用计算机防火墙），即使在 DMZ 中也无法正常工作。我的路由器 WAN 地址与 Google 所说的我的 IP 地址相匹配。

当我把我的电脑放在路由器外面时，一切都很好，只有当它在路由器中时，使用 WAN 地址时没有任何东西可以连接到它。

当我使用这个网站时：[http ://canyouseeme.org/](http://canyouseeme.org/)

它说端口 80、8080 和 8081 在我的 WAN IP 地址上都是开放的。

我唯一能想到的是路由器将我的 WAN ip 路由到错误的计算机。如果你们认为是这样，我将如何解决？

如果不是这种情况，我应该怎么做才能让它工作？

我不是网络专家，所以需要任何建议。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T14:28:35.397

在摆弄我的路由器后，发现有一个名为“虚拟服务器”的部分。您可以告诉计算机将具有特定端口的 WAN IP 路由到特定 LAN IP 地址。

完成此操作后，它开始工作得很好，每个人都可以与我联系。

# c++ - iostream.h 是否被编译？

> ID：11752665
> 
> 赞同：0
> 
> 时间：2012-08-01T04:44:57.630
> 
> 标签：c++, compilation

我有一个非常基本的问题。

让我们看下面的代码片段：

```
#include<iostream>
int main()
{
   std::cout<<"Hello world \n";
} 
```

在上面的程序中，'iostream' 是否被编译？

如果它编译，那不是开销吗？

因为无论如何我们不会更改 iostream 中的任何内容，但每次都会编译它：-/

请帮助我理解这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:47:15.970

包含基本上将内容粘贴到`<iostream>`您的源文件中，因此您可以说它已被编译。

> 如果它编译，那不是开销吗？

这需要更长的时间，但您需要包含，因为您使用`std::cout`. 这就是为什么您应该只包含您需要的内容并尽可能使用声明的原因之一。

您可以做的是查看预编译的标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T04:50:51.593

是的，包含的每个标题都将被编译。

是的，这是开销，这就是为什么一些编译器有一些叫做预编译头的东西。

请记住，C++ 是建立在 C 之上的，C 是一种相当古老的语言，这是它展示的领域之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T04:48:48.450

首先：您不能真正将标头“编译”为目标文件/可执行文件-它们仅包含类型和其他信息，以便编译器生成*正确*的代码。但是，您可以包含文件并使编译器解析它们以获取信息。是的，这可能是一个非常小的开销，但实际上，您必须将其包括在内。

# asp.net - How to Add Textfield column into Gridview in asp.net C#?

> ID：11752667
> 
> 赞同：-1
> 
> 时间：2012-08-01T04:45:03.380
> 
> 标签：asp.net

How to Add Textfield column into Gridview in asp.net C# ?

I need to add a Text field Column at last of the Gridview, I create Data Table dynamically like this. I need to add text fields for comisson column

```
DataTable dt = new DataTable(); // create data table
            dt.Columns.Add("TransDate"); // create column 1
            dt.Columns.Add("ExHouse");// create column 2           
            dt.Columns.Add("RemName");
            dt.Columns.Add("Currency");
            dt.Columns.Add("Amount");
            dt.Columns.Add("LKRAmount");
            //dt.Columns.Add(new DataColumn("Comission", typeof(string))); 
            dt.Columns.Add("Comission");
            dt.Columns.Add("ValueDate");

            DataRow dr = dt.NewRow(); // Create new Row
            TextBox comi=new TextBox();
            dr["TransDate"] = RemittanceToSelectedTable.TransDate; 
            dr["ExHouse"] = RemittanceToSelectedTable.ExHouse; //add data to coolumn no2
            dr["RemName"] = RemittanceToSelectedTable.RemName;
            dr["Currency"] = RemittanceToSelectedTable.Currency;
            dr["Amount"] = RemittanceToSelectedTable.Amount;
            dr["LKRAmount"] = RemittanceToSelectedTable.LKRAmount;

            dr["ValueDate"] = RemittanceToSelectedTable.ValueDate;
            dr["Comission"] = comi;

            aa.Add((string)dr["TransDate"]); 
            ab.Add((string)dr["ExHouse"]);
            ac.Add((string)dr["RemName"]);
            ad.Add((string)dr["Currency"]);
            ae.Add((string)dr["Amount"]);
            af.Add((string)dr["LKRAmount"]);
          //  ah.Add((string)dr["Comission"]);
            ag.Add((string)dr["ValueDate"]); 

            for (i = 0; i < ag.Count; i++)
            {
                dt.Rows.Add(aa[i], ab[i], ac[i], ad[i], ae[i], af[i], ag[i]); // add rows to data table
            }

            return dt; 
```

Thanks !

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T16:29:33.997

感谢回复...这是最终的答案... GridView 一定是这样的

```
 <Columns>
          <%--<asp:BoundField HeaderText="Comission" DataField="Comission"></asp:BoundField>--%>
         <%--<asp:TextBox ID="txtChildren" Text="assan" runat="server"  Width="25px"></asp:TextBox>--%>

            <asp:CommandField ShowDeleteButton="True" />
            <asp:BoundField DataField="TransDate" HeaderText="TransDate" />
            <asp:BoundField DataField="ExHouse" HeaderText="ExHouse" />
            <asp:BoundField DataField="RemName" HeaderText="RemName" />
            <asp:BoundField DataField="Currency" HeaderText="Currency" />
            <asp:BoundField DataField="Amount" HeaderText="Amount" />
            <asp:BoundField DataField="LKRAmount" HeaderText="LKRAmount" />

        <asp:TemplateField HeaderText="Comission">
        <ItemTemplate>
        <asp:TextBox ID="txtTest" runat="server"/>
        </ItemTemplate>
        </asp:TemplateField>

        <asp:BoundField HeaderText="ValueDate" DataField="ValueDate"></asp:BoundField>

        </Columns>

    </asp:GridView> 
```

和数据表应该是这样的

```
 DataTable dt = new DataTable();

        dt.Columns.Add("TransDate"); // create column 1
        dt.Columns.Add("ExHouse");// create column 2           
        dt.Columns.Add("RemName");
        dt.Columns.Add("Currency");
        dt.Columns.Add("Amount");
        dt.Columns.Add("LKRAmount");
        dt.Columns.Add("Comission");           
        dt.Columns.Add("ValueDate");

        DataRow dr = dt.NewRow(); // Create new Row

        dr["TransDate"] = RemittanceToSelectedTable.TransDate; //add data to coolumn no1
        dr["ExHouse"] = RemittanceToSelectedTable.ExHouse; //add data to coolumn no2
        dr["RemName"] = RemittanceToSelectedTable.RemName;
        dr["Currency"] = RemittanceToSelectedTable.Currency;
        dr["Amount"] = RemittanceToSelectedTable.Amount;
        dr["LKRAmount"] = RemittanceToSelectedTable.LKRAmount;
        dr["Comission"] = 0;
        dr["ValueDate"] = RemittanceToSelectedTable.ValueDate;

        aa.Add((string)dr["TransDate"]); 
        ab.Add((string)dr["ExHouse"]);
        ac.Add((string)dr["RemName"]);
        ad.Add((string)dr["Currency"]);
        ae.Add((string)dr["Amount"]);
        af.Add((string)dr["LKRAmount"]);
        ah.Add("0");
        ag.Add((string)dr["ValueDate"]); // 

        for (i = 0; i < ag.Count; i++)
        {
            dt.Rows.Add(aa[i], ab[i], ac[i], ad[i], ae[i], af[i], ah[i], ag[i]); 
        }

        return dt; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T04:54:08.710

您可以添加模板字段并将文本框拖放到 ItemTemplate 中，如下所示：

```
<asp:TemplateField>
<ItemTemplate>
<asp:TextBox ID="TextBox1" runat="server"Text=""></asp:TextBox>
</ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:21:33.530

要将行添加到`DataTable`您可以使用的。

```
DataRow dr = dt.NewRow(); // Create new Row
dr["TransDate"] = RemittanceToSelectedTable.TransDate; 
dr["ExHouse"] = RemittanceToSelectedTable.ExHouse; //add data to coolumn no2
dr["RemName"] = RemittanceToSelectedTable.RemName;
dr["Currency"] = RemittanceToSelectedTable.Currency;
dr["Amount"] = RemittanceToSelectedTable.Amount;
dr["LKRAmount"] = RemittanceToSelectedTable.LKRAmount;
dr["ValueDate"] = RemittanceToSelectedTable.ValueDate;
dr["Comission"] = 0; //default value for commission
dt.Rows.Add(dr); 
```

然后为了显示您的佣金文本框，您无需在数据中创建文本框。那就是将要显示的控件。您的数据将是文本、整数、浮点数。

```
<asp:BoundField HeaderText="Comission" DataField="Comission"></asp:BoundField> 
```

# python - Twisted Python IRC Bot - How to listen for commands while bot is running a command?

> ID：11752673
> 
> 赞同：2
> 
> 时间：2012-08-01T04:45:49.317
> 
> 标签：python, twisted, irc

I have an IRC bot that I wrote using the Twisted Python IRC protocols. I want to be able to run commands while still allowing the bot to listen and execute other commands simultaneously.

For example, let's say I have command that will print a large text file to a channel. If I wanted to stop the command while it was running by entering "!stop" into the channel, how could I accomplish this? Or let's say I want to do "!print largefile" in one channel and then go to a different channel and type "!print anotherfile" and have it print that file to the other channel before even finishing printing the first file.

I'm thinking that I would use threading for this purpose? I'm not quite sure.

EDIT (to clarify):

```
def privmsg(self, user, channel, msg):
    nick = user.split('!', 1)[0]
    parts = msg.split(' ')
    trigger = parts[0]
    data = parts[1:]
    if trigger == '!printfile':
        myfile = open('/files/%s' % data[0], 'r')
        for line in myfile:
            line = line.strip('/r/n')
            self.msg(channel, line)
    if trigger == '!stop':
        CODE TO STOP THE CURRENTLY RUNNING PRINTFILE COMMAND 
```

If I wanted to run `!printfile` in two channels at once or stop the printfile command while it is running, what should I do?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T11:23:22.383

您不能中断您的 printfile 命令的原因是它包含文件全部内容的循环。这意味着该`privmsg`函数将一直运行，直到它从文件中读取并发送了所有行。只有完成这项工作后，它才会返回。

Twisted 是一个单线程协作多任务系统。一次只能运行程序的一部分。在您的 irc 机器人可以处理来自 irc 服务器的下一行输入之前，`privmsg`必须返回。

然而，Twisted 也擅长处理事件和管理并发。因此，解决此问题的一种方法是使用 Twisted 中包含的工具之一（而不是 for 循环）发送文件 - 该工具与系统的其余部分协作并允许同时处理其他事件。

这是一个简短的示例（未经测试，并且存在一些明显的问题（例如当两个 printfile 命令靠得太近时的不良行为），我不会在此处尝试修复）：

```
from twisted.internet.task import cooperate

....

def privmsg(self, user, channel, msg):
    nick = user.split('!', 1)[0]
    parts = msg.split(' ')
    trigger = parts[0]
    data = parts[1:]
    if trigger == '!printfile':
        self._printfile(channel, data[0])
    if trigger == '!stop':
        self._stopprintfile()

def _printfile(self, channel, name):
    myfile = open('/files/%s' % (name,), 'r')
    self._printfiletask = cooperate(
        self.msg(channel, line.rstrip('\r\n')) for line in myfile)

def _stopprintfile(self):
    self._printfiletask.stop() 
```

这使用`twisted.internet.task.cooperate`了一个辅助函数，它接受一个迭代器（包括生成器）并以与应用程序的其余部分协作的方式运行它们。它通过迭代迭代器几次，然后让其他工作运行，然后返回到迭代器，依此类推，直到迭代器耗尽。

这意味着即使在发送文件时也会处理来自 irc 的新消息。

但是，要考虑的另一点是 irc 服务器通常包含洪水保护，这意味着非常快速地向它们发送许多线路可能会使您的机器人断开连接。即使在最好的情况下，irc 服务器也可能会缓冲这些行，并且只会将它们缓慢地释放到整个网络中。如果机器人已经发送了线路并且它们位于 irc 服务器的缓冲区中，您将无法通过告诉机器人停止来阻止它们出现在网络上（因为它已经完成了）。此外，正因为如此，Twisted 的 irc 客户端也有缓冲功能，所以即使在你调用 之后`self.msg`，该行也可能不会*真正*发送，因为 irc 客户端正在缓冲行，以避免发送它们太快以至于 irc 服务器踢机器人断网。因为我写的代码只处理*调用*，`self.msg`如果它们都已经进入 irc 客户端的本地缓冲区，您实际上可能仍然无法停止发送行。

所有这些问题的一个明显（也许不是理想的）解决方案是`_printfile`通过在其中插入一个新的延迟来稍微复杂化*中*使用的迭代器：

```
from twisted.internet import reactor
from twisted.internet.task import deferLater

def _printfileiterator(self, channel, myfile):
    for line in myfile:
        self.msg(channel, line)
        yield deferLater(reactor, 2, lambda: None)

def _printfile(self, channel, name):
    myfile = open('/files/%s' % (name,), 'r')
    self._printfiletask = cooperate(self._printfileiterator(channel, myfile)) 
```

在这里，我更改了迭代器，以便从中出来的元素是 Deferreds from `deferLater`（以前，元素都是`None`，因为这是 的返回值`self.msg`）。

当`cooperate`遇到 a`Deferred`时，它会停止在该迭代器上工作，直到`Deferred`触发之后。 `deferLater`这种方式使用基本上是协同睡眠功能。它返回 a`Deferred`直到 2 秒后才会触发（然后它会触发`None`，这`cooperate`并不特别关心）。触发后，`cooperate`将继续在迭代器上工作。所以现在`_printfile`每两秒只发送一条线，使用停止命令更容易中断。

# c# - Passing a value by ref to an IENumerator function?

> ID：11752676
> 
> 赞同：0
> 
> 时间：2012-08-01T04:46:19.380
> 
> 标签：c#, unity3d, ienumerator

To clarify I'm doing this in Unity3D, which may or may not be important?

I'm trying to figure out if I can pass a value by ref to an IEnumerator function that does not yield. If I try to do it with one that yields, VS2010 complains ("Iterators cannot have ref or out parameters"), but, if I wrap the call up with a similar IEnumerator function that calls the yielding function, but does not yield itself, the error goes away and things *appear* to work. I'm trying to find out if I'm in unexpected behavior land or if this is normal behavior.

Here's an example of what I'm doing:

```
IEnumerator Wrapper(ref int value)
{
    int tmp = ++value;    // This is the ONLY place I want the value
    return Foo(tmp);      // of the ref parameter to change!  
}                         // I do _NOT_ want the value of the ref
                          // parameter to change in Foo()!
IENumerator Foo(int value)
{
    // blah blah
    someFunc(value);
    someSlowFunc();
    yield return null;
    yield return null;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T04:52:07.590

看起来不错。顶部函数只返回一个 IEnumerator - 但在其他方面是一个普通函数。底部函数*是*一个 IEnumerator [由编译器转换为一个时髦的类]，因此不能有 ref 值。

顶层函数可以这样写：

```
 void Wrapper(ref int value, out IEnumerator coroutine)
 {
     int tmp = ++value;
     coroutine = Foo(tmp);
 } 
```

这有点混乱 - 但它显示了这是一个处理两条数据的*普通函数。*通过引用传递的 int 和返回的 IEnumerator [只是一个类] [在本示例中使用 out]。

* * *

补充：这就是幕后工作的方式：

```
 static void Main(string[] args)
    {
        //Lets get the 'IEnumerable Class' that RandomNum gets compiled down into.
        var IEnumeratorClass = RandomNum(10, 10);

        //All an IEnumerable is is a class with 'GetEnumerator'... so lets get it!
        var IEnumerableClass = IEnumeratorClass.GetEnumerator();

        //It can be used like so:
        while (IEnumerableClass.MoveNext())
        {
            Console.WriteLine(IEnumerableClass.Current);
        }

        Console.WriteLine(new String('-', 10));

        //Of course, that's a lot of code for a simple job.
        //Luckily - there's some nice built in functionality to make use of this.
        //This is the same as above, but much shorter
        foreach (var random in RandomNum(10, 10)) Console.WriteLine(random);

        Console.WriteLine(new String('-', 10));

        //These simple concepts are behind Unity3D coroutines, and Linq [which uses chaining extensively]
        Enumerable.Range(0, 100).Where(x => x % 2 == 0).Take(5).ToList().ForEach(Console.WriteLine);

        Console.ReadLine();
    }

    static Random rnd = new Random();
    static IEnumerable<int> RandomNum(int max, int count)
    {
        for (int i = 0; i < count; i++) yield return rnd.Next(i);
    }

    //This is an example of what the compiler generates for RandomNum, see how boring it is?
    public class RandomNumIEnumerableCompiled : IEnumerable<int>
    {
        int max, count;
        Random _rnd;
        public RandomNumIEnumerableCompiled(int max, int count)
        {
            this.max = max;
            this.count = count;
            _rnd = rnd;
        }

        IEnumerator IEnumerable.GetEnumerator()
        {
            return new RandomNumIEnumeratorCompiled(max, count, rnd);
        }

        IEnumerator<int> IEnumerable<int>.GetEnumerator()
        {
            return new RandomNumIEnumeratorCompiled(max, count, rnd);
        }

    }
    public class RandomNumIEnumeratorCompiled : IEnumerator<int>
    {
        int max, count;
        Random _rnd;
        int current;
        int currentCount = 0;
        public RandomNumIEnumeratorCompiled(int max, int count, Random rnd)
        {
            this.max = max;
            this.count = count;
            _rnd = rnd;
        }

        int IEnumerator<int>.Current { get { return current; } }

        object IEnumerator.Current { get { return current; } }

        public bool MoveNext()
        {
            if (currentCount < count)
            {
                currentCount++;
                current = rnd.Next(max);
                return true;
            }
            return false;
        }

        public void Reset() { currentCount = 0; }
        public void Dispose() { }
    } 
```

# php - PHP MySQL获取列名同时遍历所有记录

> ID：11752681
> 
> 赞同：6
> 
> 时间：2012-08-01T04:46:56.500
> 
> 标签：php, mysql

```
$query = mysql_query("SELECT * FROM mytable");

while ($row = mysql_fetch_assoc($query)) {
   //How to echo column names and values here?
} 
```

是否可以在循环遍历整个表时回显表的列名和值`while`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-01T04:49:45.030

您可以使用 foreach 循环

```
$query = mysql_query("SELECT * FROM mytable");

while ($row = mysql_fetch_assoc($query)) {
     foreach($row as $key => $value) {
         print "$key = $value <br />";
     }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T04:57:12.640

```
$query = mysql_query("SELECT * FROM mytable");

while ($row = mysql_fetch_assoc($query)) {
    print_r($row);
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-01T04:53:42.127

试试这个.. column_name 与您在表中使用的名称相同

```
echo $row['column_name']; 
```

# c# - 执行计算（标签）

> ID：11752684
> 
> 赞同：0
> 
> 时间：2012-08-01T04:47:23.733
> 
> 标签：c#, asp.net, sql, label

我是编码新手，我需要你们这里的一些指导和帮助。我正在创建一个汽车租赁系统。当用户单击列表中的一辆车时，它将存储在会话（价格）中。然后他们需要选择租赁天数（在下拉列表中）和司机服务（选择是或否）。假设 1 天的租金**为 30 美元。**然后租赁日为**3**天，司机服务为**15 美元**。所以计算将是**$30** x **3** = **$90** + **$15** = **$105**。现在的问题，如何在代码中编写所有的计算。我在标签上写的所有粗体数字。对不起，我的英语不好。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:04:58.300

根据您的要求将标签文本转换为整数/浮点数

```
int value = Convert.ToInt32(label.Text.ToString().Trim()); 
```

根据您的问题，我认为这是您想要的。我现在无法发表评论.. :-(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:14:44.877

您可以尝试以下代码

```
 public float calculate(float rental, int days, bool servcieSelected, int chauffeurService)
    {
        float totalAmount = (rental * days) + (servcieSelected ? chauffeurService : 0);
        return totalAmount;
    } 
```

并像这样调用这个函数：

```
float total = calculate(30.0f, 3, true, 15); 
```

希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T04:59:53.220

您可以创建这样的函数并调用它，然后将结果存储在 Session["total"] 中。

有一些静态变量：

```
const float rental_fee = 30.0;
const float chauffeur_service = 15.0;

public static float getTotalCost(float days, bool include_chauffeur)
{
      float total = (days * rental_fee) + (include_chauffeur ? chauffeur_service : 0);
      return total;
} 
```

# regex - 用于替换两个文字内的文本的正则表达式语句

> ID：11752687
> 
> 赞同：0
> 
> 时间：2012-08-01T04:47:36.637
> 
> 标签：regex, editplus

我有 n 行代码以

```
(21714,
(21715, 
```

我想用 NULL 字符串替换数值以获得

```
(NULL,
(NULL, 
```

请建议我应该在编辑和查找替换功能中使用的正则表达式来实现这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:49:48.227

我已经通过 EditPlus v3.41 测试了这些步骤：

步骤1。菜单 > 搜索 > 替换

第2步。点击“更多”按钮

第三步。`\([0-9]+,`“查找内容”的输入模式

第4步。用。。。来代替`(NULL,`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T04:55:13.873

可能看起来是这样的（这个例子是用js写的，但我觉得没问题）：

```
'(21714, (21715, ...'.replace(/^(\([0-9]*\,\s\([0-9]*)/, "(NULL, (NULL"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:48:18.070

^([0-9]*

我用这个，它搜索出现：（21714（21715

# ruby-on-rails - 是否有用于 Page Stats 的 Rails Gem？

> ID：11752688
> 
> 赞同：4
> 
> 时间：2012-08-01T04:47:40.130
> 
> 标签：ruby-on-rails, ruby, statistics, gem

我允许用户在我的应用程序中创建站点，并且我想向他们提供简单的统计信息，例如页面浏览量。有没有我可以实现的 Rails gem 来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T04:55:02.033

检查这个类似的问题[simple hit counter for page view in rails](https://stackoverflow.com/questions/4815713/simple-hit-counter-for-page-views-in-rails)。根据对上述问题的回答，John McAliley 创建了一个名为[印象派的宝石。](http://github.com/charlotte-ruby/impressionist)gem 已准备好 Rails 3，因此您可以直接将其包含在您的应用程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T21:01:24.383

试用[StatsMix gem](http://www.statsmix.com/developers)。您可以使用它来跟踪应用程序中的任何操作或事件。免责声明：我是创始人，这是一项基于订阅（付费）的服务。不过，我们确实有一个免费的开发人员计划，并且能够嵌入图表和仪表板，以便轻松地向您的用户提供统计数据。

# grails - Grails - 自定义 Flash.message 渲染

> ID：11752690
> 
> 赞同：1
> 
> 时间：2012-08-01T04:47:55.170
> 
> 标签：grails, error-handling, grails-orm, grails-controller, flash-message

我正在运行查询以检查多个帐户 ID 是否存在实体 ID。如果结果集不为空，那么我需要抛出错误或显示一条消息。

该方法的代码如下：

```
def save() {

    def SAMLInfoInstance = new SAMLInfo(params)

    def account = Account.get(params?.accountId)        
    SAMLInfoInstance.setAccount(account)

    def samlInfoInstanceList = SAMLInfo.executeQuery("from SAMLInfo " +
        " where account.id <> ? " +
           " and entityId =  ?", [SAMLInfoInstance.accountId, SAMLInfoInstance.entityId])

    if (samlInfoInstanceList?.size > 0){
        flash.message = message(code: 'test.not.created.message', args: [message(code: 'SAMLInfo.label', default: 'SAMLInfo'), SAMLInfoInstance.entityId])
        /*flash.message = "default.not.created.message"
        flash.args = ["SAMLInfo", SAMLInfoInstance.entityId]
        flash.default = "SAMLInfo cannot be created"
        */
        render(view: "create", model: [SAMLInfoInstance: SAMLInfoInstance])
        return
        }

    if (!SAMLInfoInstance.save(flush: true)) {
        render(view: "create", model: [SAMLInfoInstance: SAMLInfoInstance])
        return
    }

    flash.message = message(code: 'default.created.message', args: [message(code: 'SAMLInfo.label', default: 'SAMLInfo'), SAMLInfoInstance.entityId])
    redirect(action: "list", id: SAMLInfoInstance.account.id)
} 
```

在我看来，我以以下方式呈现 Flash 消息和错误：

```
<g:if test="${flash.message}">
        <br/>
        <div class="message" role="status">
        <g:message code="${flash.message}" args="${flash.args}" default="${flash.default}"/>
        </div>
        <br/>
        </g:if>
        <br/>

        <g:renderErrors bean="${SAMLInfoInstance}" as="list" /> 
```

在我的 message.properties 文件中，我有以下行：

```
test.not.created.message=The SP url {1} is not allowed for this account. Please enter a different value. 
```

当我运行此代码时，闪存消息显示为我作为消息传递的字符串，即“test.not.created.message”。此外，每当我导航到显示 flash.message 的任何其他页面时，都会传递此字符串以显示。我是 grails 和 groovy 的新手，希望能对此提供任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T17:01:57.263

那么2个问题：

1 - 未从您的 message.properties 中检索消息：

您的项目中必须有其他 message.properties 文件。给它一个检查。因为如果没有找到，grails 会显示代码本身而不是消息，因为它没有找到。也许它正在其他一些属性文件中寻找您的消息，例如特定于您的区域设置的文件（例如：pt_BR 或 en_US）。除此之外，您使用 message(code:...) 构造是正确的。

2 - 您的闪信不会消失：

使用 request.message 代替 flash.message。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T06:38:41.090

我认为您要遵循的示例是[here](http://grails.org/doc/latest/ref/Tags/message.html)。

您只需要在控制器或视图中解析一次消息。

所以在控制器中：

```
flash.message = "test.not.created.message"
flash.args = ["SAMLInfo"]
flash.default = "<default text>" 
```

在视图中：

```
<g:message code="${flash.message}" args="${flash.args}"
           default="${flash.default}"/> 
```

[flash 范围在下一个请求结束时被清除，](http://grails.org/doc/latest/ref/Controllers/flash.html)这可以解释为什么您仍然在下一页上看到该消息。

# perl - 如何在不同的时区显示 Net::SFTP 时间戳？

> ID：11752691
> 
> 赞同：0
> 
> 时间：2012-08-01T04:47:55.373
> 
> 标签：perl, timezone

我正在使用[Net::SFTP](http://p3rl.org/Net%3a%3aSFTP)。我的目的是列出文件及其修改日期。我能够以 UTC 格式列出带有日期的文件。我需要 EDT 格式。有没有可用的设置？

目前，我在 Linux 上使用 Perl 5。

```
my $sftp = Net::SFTP->new($host, %args) or die "Cannot connect to $@";
$sftp->ls('.' , sub { print $_[0]->{longname}, "\n" }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:28:10.240

如果我的理解是正确的，则列表的 longName 字段是服务器渲染的并且已过时/不推荐使用。SFTP 为每个目录条目提供了一个包含数据的结构，并且时间以 UTC 列出。

从文档：

> 如果指定了 $subref，则对于目录中的每个条目，将调用 $subref 并给出对具有三个键的哈希的引用：文件名，目录列表中条目的名称；*longname*，“长”列表中的条目，如 ls -l；和*a*，一个 Net::SFTP::Attributes 对象，其中包含条目的文件属性（atime、mtime、权限等）。

因此，您需要获取这些对象并使用其*atime**和*mtime*字段*。拥有它们后，如果您需要固定时区，将它们转换为本地时区应该是微不足道的。

# android-ndk - 我可以在我的 androidndk 应用程序中使用静态库 (lib***.a)

> ID：11752693
> 
> 赞同：1
> 
> 时间：2012-08-01T04:48:20.067
> 
> 标签：android-ndk, java-native-interface, static-libraries

经过大量搜索后，我仍然无法找到是否可以在我的 .java 文件中使用 lib***.a 的一件事。

```
i.e:
static {
    // Library
    System.loadLibrary("***");
} 
```

当我阅读`You must provide a native shared library that contains the implementation of these methods`overview.html 中的这一行时，我产生了这个疑问。

所以任何人都可以告诉我是否可以在 .java 文件中使用 lib***.a 。

如果是，那怎么办？

因为`you should not use the 'lib' prefix and '.so' suffix here.`写在overview.html中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T04:50:32.957

看来你不能。据我所知，Java原生接口使用动态库加载代码运行时；我确信归档库 (.a) 无法做到这一点。

# azure - 从 Azure 中运行的 WebRole 访问 OnPremises Active Directory

> ID：11752696
> 
> 赞同：2
> 
> 时间：2012-08-01T04:48:38.603
> 
> 标签：azure, active-directory, azure-connect

我正在尝试从 Azure 上运行的 Web 应用程序访问本地活动目录。我们选择了 Azure Connect，因为它最符合我们的要求（对用户进行身份验证以及从 Active Directory 获取用户信息）。

我已按照此[链接](http://msdn.microsoft.com/en-us/library/windowsazure/gg432997.aspx)1和[链接 2](http://blogs.msdn.com/b/windows_azure_connect_team_blog/archive/2010/12/10/domain-joining-windows-azure-roles.aspx)中提供的步骤进行操作，但仍然未能实现目标。

下面是方法，我试图测试是否可以从 Azure 访问本地 Active Directory：`DirectoryEntry.Exists("LDAP Path")`

以下是我遇到的错误：

> System.Runtime.InteropServices.COMException (0x8007054B)：指定的域不存在或无法联系。
> 在 System.DirectoryServices.DirectoryEntry.Bind(Boolean throwIfFail)
> 在 System.DirectoryServices.DirectoryEntry.Exists(String path) 在 WebRole1.MyLogInPage.btnSubmit_Click(Object sender, EventArgs e)

我可以看到连接端点软件在运行 Active Directory 的服务器上运行良好，没有任何连接问题，并且端点组已正确设置。

# mysql - 如何修复在 symfony2 中给出教义 2 迁移的错误

> ID：11752698
> 
> 赞同：1
> 
> 时间：2012-08-01T04:48:51.370
> 
> 标签：mysql, database-design, web-applications, data-modeling

我已经删除了我的数据库，并为我的 synfony 和教义 2 应用程序恢复了它。

现在我得到了各种各样的错误，比如

> [PDOException] SQLSTATE[HY000]：一般错误：1025 将“./mytable”重命名为“./Acmes/#sql2-38b-19ce68a”时出错（错误号：152）

现在我怎么能回去。我的数据并不重要，所以学说可以重新生成表格就可以了。

我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:43:07.367

您可能有一些同名的表/关系。执行`php app/console doctrine:schema:update --dump-sql`（:update 或 :create，取决于您的情况）并检查生成的 SQL。

# java - Struts 2 下载 - 如何动态配置文件名？

> ID：11752702
> 
> 赞同：7
> 
> 时间：2012-08-01T04:49:28.083
> 
> 标签：java, jquery, struts2, struts-config, struts-validation

我正在开发一个应用程序，人们将从数据库中提到的位置下载所需的文件到他们的本地。我正在使用 struts 2 从服务器下载文件。我可以毫无例外地下载该文件，并且效果很好。但是正在下载的文件具有我在 struts.xml 中指定的文件名，我希望它是正在下载的确切文件名。例如，如果原始文件名是 struts.pdf，我将其下载为 download.pdf，如何防止它并下载具有实际文件名的文件

我的struts.xml配置如下，

```
<action name="download" class="action.DownloadAction">
        <result name="success" type="stream">
            <param name="contentType">application/octet-stream</param>
            <param name="inputName">fileInputStream</param>
            <param name="contentDisposition">attachment;filename="download.log"</param>
            <param name="bufferSize">1024</param>
        </result>
        <result name="error">/live/useradminerror.jsp</result>
    </action> 
```

而且我忘了提到我正在使用 struts2-jquery 来开发 UI。请帮助我，因为我正处于我项目的非常关键的阶段。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-01T04:56:37.960

如果我是正确的，你想传递存储在你的数据库中的文件，如果是这种情况，你可以通过从你的动作类传递所有这些参数来轻松地做到这一点，比如

```
class MyFileDownloadAction extends ActionSupport{

     private String fileName;
     // getter and setter

    public String fileDownload() throws exception{
      // file download logic
      fileName ="abc"  // can set name dynamic from DB
   }

}

<action name="download" class="action.DownloadAction">
        <result name="success" type="stream">
            <param name="contentType">application/octet-stream</param>
            <param name="inputName">fileInputStream</param>
            <param name="contentDisposition">attachment;filename="${filename}"</param>
            <param name="bufferSize">1024</param>
        </result>
        <result name="error">/live/useradminerror.jsp</result>
    </action> 
```

您可以在 struts.xml 类中动态传递每个参数。希望这会对您有所帮助 这是您将如何在 XML 中使用此文件名的方式

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T08:44:35.210

对于struts中的注解，也是一样的。该解决方案非常有帮助。谢谢你。对我来说，“contentType”并没有太大区别。

```
@Action(value = "/download", results = { @Result(name = "success", type = "stream", 
params= {"contentType", "application/octet-stream", "inputName","fileInputStream",    
"contentDisposition","attachment; filename=\"${fileName}\"", "bufferSize", "1024" })
}) 
```

# c++ - std::string 是否有空终止符？

> ID：11752705
> 
> 赞同：105
> 
> 时间：2012-08-01T04:50:23.780
> 
> 标签：c++, string, null

下面的字符串是否包含空终止符`'\0'`？

```
std::string temp = "hello whats up"; 
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-08-01T04:51:32.237

不，但是如果您说`temp.c_str()`此方法的返回中将包含一个空终止符。

值得一提的是，您可以像任何其他字符一样在字符串中包含空字符。

```
string s("hello");
cout << s.size() << ' ';
s[1] = '\0';
cout << s.size() << '\n'; 
```

印刷

`5 5`

如果空字符对字符串有特殊含义，则不像`5 1`您所期望的那样。

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2012-08-01T04:52:48.463

不在 C++03 中，在 C++11 之前甚至不能保证在 C++ 中 std::string 在内存中是连续的。只有 C 字符串（用于存储字符串的字符数组）具有空终止符。

在 C++11 及更高版本中，`mystring.c_str()`等价于`mystring.data()`等价于`&mystring[0]`，并`mystring[mystring.size()]`保证为`'\0'`。

在 C++17 及更高版本中，`mystring.data()`还提供了一个重载，它返回一个指向字符串内容的非常量指针，而`mystring.c_str()`只提供一个`const`-qualified 指针。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-12-15T21:19:09.070

这取决于您在此处对“包含”的定义。在

```
std::string temp = "hello whats up"; 
```

有几点需要注意：

*   `temp.size()`将返回从第一个`h`到最后一个字符的数量`p`（包括）
*   但同时`temp.c_str()`还是`temp.data()`会带着`null`终结者返回
*   或者换句话说`int(temp[temp.size()])`将是**零**

我知道，我听起来与这里的一些答案相似，但我想指出in是单独维护`size`的，除非你找到第一个终止符，否则**它不像**in那样继续计数。`std::string``C++`**`C``null`**

 **`string literal`补充一点，如果你的contains Embedded故事会有所不同`\0`。在这种情况下，构造`std::string`在第一个字符处停止`null`，如下所示：

```
std::string s1 = "ab\0\0cd";   // s1 contains "ab",       using string literal
std::string s2{"ab\0\0cd", 6}; // s2 contains "ab\0\0cd", using different ctr
std::string s3 = "ab\0\0cd"s;  // s3 contains "ab\0\0cd", using ""s operator 
```

参考：

*   [https://akrzemi1.wordpress.com/2014/03/20/strings-length/](https://akrzemi1.wordpress.com/2014/03/20/strings-length/)
*   [http://en.cppreference.com/w/cpp/string/basic_string/basic_string](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-01T04:51:45.463

是的，如果您调用`temp.c_str()`，那么它将返回以空值结尾的 c 字符串。

但是，存储在对象中的实际数据`temp`可能不是以空值结尾的，但这对程序员来说并不重要，也不应该在意，因为当程序员想要时`const char*`，他会调用`c_str()`对象，这保证返回 null - 终止的字符串。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T04:53:43.123

使用 C++ 字符串，您不必担心这一点，它可能取决于实现。

使用`temp.c_str()`你得到字符串的 C 表示，它肯定包含`\0`字符。除此之外，我真的不明白它对 C++ 字符串有什么用处

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-01T04:59:38.907

`std::string`内部保持对字符数的计数。在内部，它使用这个计数工作。就像其他人所说的那样，当您需要显示字符串或任何原因时，您可以使用它的`c_str()`方法，该方法将为您提供最后带有空终止符的字符串。**

# r - 在一个 ggplot 上使用两个比例颜色渐变

> ID：11752709
> 
> 赞同：8
> 
> 时间：2012-08-01T04:51:23.513
> 
> 标签：r, colors, ggplot2, scale, gradient

我想将散点图上的点的色阶渐变与绘图上的某些文本的色阶渐变结合起来。我可以按照下面的示例分别执行它们，但我似乎无法将它们放在一起......有没有办法做到这一点？

这是我要组合的两种类型的图（p 和 p1）的示例代码

```
l <- data.frame(prev=rnorm(1266), 
            aft=rnorm(1266), 
            day=as.factor(wday(sample(c(2:6),1266,replace=TRUE),abbr=TRUE, label=TRUE)), 
            month=as.factor(month(Sys.Date()+months(sample(0:11,1266,replace=TRUE)),abbr=TRUE, label=TRUE)), 
            ind=c(1:1266))
cors <- ddply(l, c("month", "day"), summarise, cor = round(cor(prev, aft), 3))

# below the text gains the colour gradient
p <- ggplot(l, aes(x=prev, y=aft)) + 
    geom_point() + 
    scale_colour_gradient(low = "red", high="blue")+ 
    facet_grid(day~month, scales="free_x")+
    geom_text(data=cors,aes(label=paste("r= ",cor,sep=""), size=abs(cor), colour=cor), x=Inf, y=Inf, vjust=1, hjust=1, show_guide=FALSE)+
    geom_hline(aes(yintercept=0))+
    geom_smooth(method="loess")
p

# below the points gain the colour gradient
p1 <- ggplot(l, aes(x=prev, y=aft)) + 
    geom_point(aes(colour=ind)) + 
    scale_colour_gradient("gray")+ 
    facet_grid(day~month, scales="free_x")+
    geom_text(data=cors,aes(label=paste("r= ",cor,sep=""), size=abs(cor), colour=cor), x=Inf, y=Inf, vjust=1, hjust=1, show_guide=FALSE)+
    geom_hline(aes(yintercept=0))+
    opts(legend.position="none") +
    geom_smooth(method="loess")

p1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T05:12:27.823

我不期望这可以做到。每个美学只有一个情节。我相信如果你添加多个`scale_color`，第二个会覆盖第一个。我认为 Hadley 故意创建了这种行为，在绘图中，从数据到绘图中比例的映射（例如颜色）是独一无二的。这确保可以轻松比较图中的所有颜色，因为它们共享相同的`scale_color`.

# java - 基于 Spring MVC LocaleChangeInterceptor 注释不起作用

> ID：11752710
> 
> 赞同：9
> 
> 时间：2012-08-01T04:51:24.963
> 
> 标签：java, spring, localization, internationalization

```
import java.util.Locale;

import org.springframework.context.MessageSource;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.support.ReloadableResourceBundleMessageSource;
import org.springframework.web.servlet.HandlerMapping;
import org.springframework.web.servlet.LocaleResolver;
import org.springframework.web.servlet.i18n.CookieLocaleResolver;
import org.springframework.web.servlet.i18n.LocaleChangeInterceptor;
import org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping;

@Configuration
public class Config {
    @Bean
    public LocaleResolver localeResolver() {
        final CookieLocaleResolver ret = new CookieLocaleResolver();
        ret.setDefaultLocale(new Locale("en_US"));
        return ret;
    }

    @Bean
    public MessageSource messageSource() {
        final ReloadableResourceBundleMessageSource ret = new ReloadableResourceBundleMessageSource();
        ret.setBasename("classpath:lang");
        ret.setDefaultEncoding("UTF-8");
        return ret;
    }

    @Bean
    public HandlerMapping handlerMapping() {
        final LocaleChangeInterceptor interceptor = new LocaleChangeInterceptor();
        interceptor.setParamName("language");

        final DefaultAnnotationHandlerMapping ret = new DefaultAnnotationHandlerMapping();
        ret.setInterceptors(new Object[] { interceptor });
        return ret;
    }
} 
```

以上是我的注解配置。我基本上已经翻译[了本](http://viralpatel.net/blogs/spring-3-mvc-internationalization-i18n-localization-tutorial-example/)教程的 XML。

奇怪的是，当我去的时候它不起作用`...?language=fr`。

但是，以下内容确实有效（在 中`app-servlet.xml`）（注意这里使用的是`locale`）：

```
<mvc:interceptors>
    <bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
        <property name="paramName" value="locale" />
    </bean>
</mvc:interceptors> 
```

另一个需要注意的重要事情是，当我在上述方法上设置断点时，所有这三个方法，每个断点都会中断，这意味着“某人”正在读取值。

那么，为什么我的基于注释的拦截器不起作用呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T05:04:40.887

通过扩展配置类`WebMvcConfigurerAdapter` 可能会有所帮助。添加拦截器条目覆盖

```
public void addInterceptors(InterceptorRegistry registry) {
   registry.addInterceptor(localeChangeInterceptor());
} 
```

方法。还为`LocaleChangeInterceptor`

```
@Bean 
public LocaleChangeInterceptor localeChangeInterceptor(){
    LocaleChangeInterceptor localeChangeInterceptor=new LocaleChangeInterceptor();
    localeChangeInterceptor.setParamName("language");
    return localeChangeInterceptor;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-12T16:04:31.223

除了交换所说的之外，您还需要添加：

```
@Bean(name = "localeResolver")
public LocaleResolver getLocaleResolver(){
    return new CookieLocaleResolver();
} 
```

bean 名称很重要。这就是 spring 将解析正确的语言环境解析器的方式。

或者，您可以返回 SessionLocaleResolver。

如果你不添加这个，你会得到以下错误：

```
Cannot change HTTP accept header - use a different locale resolution strategy 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-05-24T16:26:09.303

发布了 Spring MVC 4.1.4.RELEASE 本地化的完整示例。您也可以使用 MKYong 的[示例](http://www.mkyong.com/spring-mvc/spring-mvc-internationalization-example/)（但不幸的是它的配置基于 XML）来解决项目结构的问题。

```
package com.pizza.config;

import org.springframework.context.MessageSource;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;
import org.springframework.context.support.ReloadableResourceBundleMessageSource;
import org.springframework.web.servlet.LocaleResolver;
import org.springframework.web.servlet.config.annotation.DefaultServletHandlerConfigurer;
import org.springframework.web.servlet.config.annotation.EnableWebMvc;
import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
import org.springframework.web.servlet.config.annotation.ResourceHandlerRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurerAdapter;
import org.springframework.web.servlet.i18n.CookieLocaleResolver;
import org.springframework.web.servlet.i18n.LocaleChangeInterceptor;
import org.springframework.web.servlet.view.InternalResourceViewResolver;
import org.springframework.web.servlet.view.JstlView;

@Configuration
@EnableWebMvc
@ComponentScan(value = "com.pizza")
public class WebConfig extends WebMvcConfigurerAdapter {

    /* Resolvers and other MVC needs */

    @Bean
    public InternalResourceViewResolver getInternalResourceViewResolver() {
        InternalResourceViewResolver resolver = new InternalResourceViewResolver();

        resolver.setViewClass(JstlView.class);
        resolver.setPrefix("/WEB-INF/views/");
        resolver.setSuffix(".jsp");

        return resolver;
    }

    @Override
    public void configureDefaultServletHandling(DefaultServletHandlerConfigurer configurer) {
        configurer.enable();
    }

    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/resources/**").addResourceLocations("/resources/");
    }

    /* Localization section is started */

    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(localeChangeInterceptor());
    }

    @Bean
    public LocaleChangeInterceptor localeChangeInterceptor(){
        LocaleChangeInterceptor localeChangeInterceptor=new LocaleChangeInterceptor();
        localeChangeInterceptor.setParamName("language");
        return localeChangeInterceptor;
    }

    @Bean(name = "localeResolver")
    public LocaleResolver getLocaleResolver(){
        return new CookieLocaleResolver();
    }

    @Bean
    public MessageSource messageSource() {
        final ReloadableResourceBundleMessageSource ret = new ReloadableResourceBundleMessageSource();
        ret.setBasename("classpath:languages");
        ret.setDefaultEncoding("UTF-8");
        return ret;
    }

} 
```

# php - Codeigniter - 尝试使用 ajax 发布时出现内部服务器错误

> ID：11752713
> 
> 赞同：0
> 
> 时间：2012-08-01T04:51:44.420
> 
> 标签：php, jquery, ajax, codeigniter

我一直在尝试使用 ajax 发布一些东西，但我得到了一个`Failed to load resource: the server responded with a status of 500 (Internal Server Error)`. 网站上使用 ajax 的所有其他表单都可以工作，这是唯一出现错误的表单。不知道发生了什么……也许有人会注意到我没有注意到的东西。

jQuery（user_id 已在视图中定义。警报返回我需要传递给控制器​​的所有内容）

```
$('.one_add').submit(function(e) {
            e.preventDefault();

            var formID = $(this).attr('id');
            var formIDSplit = formID.split('-');
            var oneID = formIDSplit[1];

            var url = $('.one-link-'+oneID).val();
            var desc = $('.one-link-desc-'+oneID).val();

            $.post(base_url + "index.php/home/one_link", { user_id : user_id, one_id : oneID, desc : desc, url : url  }, function(data)
            {
            }, "json");

//              alert(user_id+'-'+oneID+'-'+desc+'-'+url);
}); 
```

表格

```
 <?php
      $attributes = array('class' => 'one_add', 'id' => 'add-'.$job->id.'');
      echo form_open('ajax/add_one_link', $attributes ); ?>
      <input type="text" class="one-link-<? echo $job->id; ?>" value="Url" />
      <input type="text" class="one-link-desc-<? echo $job->id; ?>" value="Description" />
      <button type="submit">Go!</button>

 <?php echo form_close(); ?> 
```

控制器功能

```
function one_link()
    {
            $this->load->model('one_add_model');

            $this->form_validation->set_rules('user_id', 'trim|required|xss_clean');
            $this->form_validation->set_rules('url', 'trim|required|xss_clean|strtolower');
            $this->form_validation->set_rules('desc', 'trim|required|xss_clean|strtolower');
            $this->form_validation->set_rules('one_id', 'trim|required|xss_clean');

            $user_id = $this->input->post('user_id');
            $url = $this->input->post('url');
            $desc = $this->input->post('desc');
            $one_id = $this->input->post('one_id');

            $this->one_add_model->add_url($user_id, $url, $desc, $one_id);
    } 
```

该模型

```
function add_url($user_id, $url, $desc, $one_id);
{
     $query_str = "INSERT INTO one_add (`user_id`, `url`, `desc`, `one_id` ) VALUES (?, ?, ?, ?)";
     $this->db->query( $query_str, array($user_id, $url, $desc, $one_id) );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:41:59.640

这终于显示出来了

```
Message:  Undefined property: Home::$form_validation 
```

我刚刚加载了未加载的表单验证。但它在另一个控制器中并导致了同样的错误。不知道发生了什么......但它现在有效。

```
 $this->load->library('form_validation'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:55:12.767

您需要删除**;** 来自 add_url 函数定义

改变

```
function add_url($user_id, $url, $desc, $one_id); 
```

到

```
function add_url($user_id, $url, $desc, $one_id) 
```

# spring - Spring JDBC——糟糕的 SQL 语法

> ID：11752725
> 
> 赞同：1
> 
> 时间：2012-08-01T04:53:00.020
> 
> 标签：spring, jdbc

我正在学习 Spring 教程，但在 JDBC 部分遇到了问题。代码是直接从教程本身复制而来的，在失败之前，对数据库的几次调用都正确运行。谁能帮我？这是我的错误跟踪。

```
Jul 31, 2012 9:40:03 PM org.springframework.jdbc.core.metadata.GenericCallMetaDataProvider processProcedureColumns
WARNING: Error while retrieving metadata for procedure columns: com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: FUNCTION getrecord does not exist
Jul 31, 2012 9:40:03 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [org/springframework/jdbc/support/sql-error-codes.xml]
Jul 31, 2012 9:40:03 PM org.springframework.jdbc.support.SQLErrorCodesFactory <init>
INFO: SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase]    Exception in thread "main" org.springframework.jdbc.BadSqlGrammarException: CallableStatementCallback; bad SQL grammar [{call getrecord()}]; nested exception is com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: FUNCTION getrecord does not exist
        at org.springframework.jdbc.support.SQLStateSQLExceptionTranslator.doTranslate(SQLStateSQLExceptionTranslator.java:98)
        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)
        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)
        at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)
        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:969)
        at org.springframework.jdbc.core.JdbcTemplate.call(JdbcTemplate.java:1003)
        at org.springframework.jdbc.core.simple.AbstractJdbcCall.executeCallInternal(AbstractJdbcCall.java:391)
        at org.springframework.jdbc.core.simple.AbstractJdbcCall.doExecute(AbstractJdbcCall.java:354)
        at org.springframework.jdbc.core.simple.SimpleJdbcCall.execute(SimpleJdbcCall.java:181)
        at com.tutorialspoint.StudentJDBCTemplate.getStudent(StudentJDBCTemplate.java:32)
        at com.tutorialspoint.MainApp.main(MainApp.java:29)
    Caused by: com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: FUNCTION getrecord does not exist
        at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:936)
        at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:2985)
        at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:1631)
        at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:1723)
        at com.mysql.jdbc.Connection.execSQL(Connection.java:3277)
        at com.mysql.jdbc.Connection.execSQL(Connection.java:3206)
        at com.mysql.jdbc.Statement.executeQuery(Statement.java:1232)
        at com.mysql.jdbc.DatabaseMetaData.getCallStmtParameterTypes(DatabaseMetaData.java:1607)
        at com.mysql.jdbc.DatabaseMetaData.getProcedureColumns(DatabaseMetaData.java:4034)
        at com.mysql.jdbc.CallableStatement.determineParameterTypes(CallableStatement.java:709)
        at com.mysql.jdbc.CallableStatement.<init>(CallableStatement.java:513)
        at com.mysql.jdbc.Connection.parseCallableStatement(Connection.java:4583)
        at com.mysql.jdbc.Connection.prepareCall(Connection.java:4657)
        at com.mysql.jdbc.Connection.prepareCall(Connection.java:4631)
        at org.springframework.jdbc.core.CallableStatementCreatorFactory$CallableStatementCreatorImpl.createCallableStatement(CallableStatementCreatorFactory.java:167)
        at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:947)
        ... 6 more 
```

这是我的主要应用程序中出现问题的部分，我已经标记了有问题的行。

```
 System.out.println("----Listing Record with ID = 2 -----");
        // Error occurs in next line
    Student student = studentJDBCTemplate.getStudent(2);
    System.out.print("ID : " + student.getId());
    System.out.print(", Name : " + student.getName());
    System.out.println(", Age : " + student.getAge()); 
```

StudentJDBCTemplate 有这两个变量。

```
private DataSource dataSource;
private SimpleJdbcCall jdbcCall; 
```

StudentJDCBTemplate 像这样设置数据源，这可能是问题的根源，因为我无法弄清楚 getRecord 指的是什么。

```
public void setDataSource(DataSource dataSource) {
    this.dataSource = dataSource;
    this.jdbcCall = new SimpleJdbcCall(dataSource)
            .withProcedureName("getRecord");
} 
```

StudentJDBCTemplate这个方法出现问题。

```
public Student getStudent(Integer id) {
    SqlParameterSource in = new MapSqlParameterSource().addValue("in_id",
            id);
    Map<String, Object> out = jdbcCall.execute(in);
    Student student = new Student();
    student.setId(id);
    student.setName((String) out.get("out_name"));
    student.setAge((Integer) out.get("out_age"));
    return student;
} 
```

这是我的 Beans.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd "> <!-- Initialization for data source -->
    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/TEST" />
        <property name="username" value="root" />
        <property name="password" value="password" />
    </bean> <!-- Definition for studentJDBCTemplate bean -->
    <bean id="studentJDBCTemplate" class="com.tutorialspoint.StudentJDBCTemplate">
        <property name="dataSource" ref="dataSource" />
    </bean>
</beans> 
```

对于它的价值，这是我的学生课。

```
package com.tutorialspoint;

public class Student {
    private Integer age;
    private String name;
    private Integer id;

    public void setAge(Integer age) {
        this.age = age;
    }

    public Integer getAge() {
        return age;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getName() {
        return name;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public Integer getId() {
        return id;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T07:05:42.493

按照您的[教程](http://www.tutorialspoint.com/spring/calling_stored_procedure.htm)，您错过了`getRecord`存储过程的创建：

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `TEST`.`getRecord` $$
CREATE PROCEDURE `TEST`.`getRecord` (
IN in_id INTEGER,
OUT out_name VARCHAR(20),
OUT out_age  INTEGER)
BEGIN
   SELECT name, age
   INTO out_name, out_age
   FROM Student where id = in_id;
END $$

DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:55:47.040

您正在尝试执行存储过程“getrecord”。哪个在数据库中不存在或未正确编译。尝试先通过数据库端的 SQL 客户端执行。

程序应与签名匹配为 2 个输出参数和 1 个输入参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T07:01:40.473

`Caused by: com.mysql.jdbc.exceptions.MySQLSyntaxErrorException: FUNCTION getrecord does not exist..`所以检查一次..创建getrecord函数并尝试一次..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-21T20:50:17.817

以防万一有人在 2017 年遇到这个问题，如果您使用 MySQL 连接器版本 6.x 而不是 5.x，这里有必要更改那个旧教程

在 Beans.xml 中，这一行应该是：

```
<property name="url" value="jdbc:mysql://localhost:3306/test?nullNamePatternMatchesAll=true" /> 
```

代替： `<property name="url" value="jdbc:mysql://localhost:3306/test />`

声称未定义“out_name”参数的 SQL 错误非常具有误导性。

这是由于 MySQL 连接器从 5.x 版更改为 6.x 版，如此处评论 原始 SO 答案[在](https://stackoverflow.com/a/39270234/1159404)[这里](http://bugs.mysql.com/bug.php?id=81105)：

# machine-learning - 时间序列中的模式识别

> ID：11752727
> 
> 赞同：73
> 
> 时间：2012-08-01T04:53:16.823
> 
> 标签：machine-learning, time-series, pattern-recognition

通过处理时间序列图，我想检测类似于以下的模式：

![在此处输入图像描述](../Images/19151850cd216c77e31cbdb52adf03b0.png)

以示例时间序列为例，我希望能够检测到此处标记的模式：

![在此处输入图像描述](../Images/4cd92db6e5a0c7c581330e6595f823aa.png)

我需要使用什么样的 AI 算法（我假设是 Marchine 学习技术）来实现这一点？有没有我可以使用的库（在 C/C++ 中）？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-08-10T14:28:51.663

这是我为分区心电图数据所做的一个小项目的示例结果。

![在此处输入图像描述](../Images/16c6c4bdbd4ea028dd9fa6f6b42e1f35.png)

我的方法是“切换自回归 HMM”（如果您还没有听说过，请用 Google 搜索），其中每个数据点都是使用贝叶斯回归模型从前一个数据点预测的。我创建了 81 个隐藏状态：用于捕获每个节拍之间数据的垃圾状态，以及对应于心跳模式中不同位置的 80 个单独隐藏状态。模式 80 状态是直接从二次采样的单拍模式构建的，并且具有两个转换 - 一个自身转换和一个到模式中下一个状态的转换。模式中的最终状态转变为自身或垃圾状态。

我用[Viterbi training](https://stats.stackexchange.com/questions/581/differences-between-baum-welch-and-viterbi-training)训练了模型，只更新了回归参数。

在大多数情况下，结果是足够的。类似结构的条件随机场可能会表现得更好，但如果您还没有标记数据，则训练 CRF 将需要在数据集中手动标记模式。

**编辑：**

这是一些示例 python 代码 - 它并不完美，但它提供了一般方法。它实现了 EM 而不是 Viterbi 训练，后者可能会稍微稳定一些。心电图数据集来自[http://www.cs.ucr.edu/~eamonn/discords/ECG_data.zip](http://www.cs.ucr.edu/%7Eeamonn/discords/ECG_data.zip)

```
import numpy as np
import numpy.random as rnd
import matplotlib.pyplot as plt 
import scipy.linalg as lin
import re

data=np.array(map(lambda l: map(float, filter(lambda x:len(x)>0,            
    re.split('\\s+',l))), open('chfdb_chf01_275.txt'))).T
dK=230
pattern=data[1,:dK]
data=data[1,dK:]

def create_mats(dat):
    '''
    create 
        A - an initial transition matrix 
        pA - pseudocounts for A
        w - emission distribution regression weights
        K - number of hidden states
    '''
    step=5  #adjust this to change the granularity of the pattern
    eps=.1
    dat=dat[::step]
    K=len(dat)+1
    A=np.zeros( (K,K) )
    A[0,1]=1.
    pA=np.zeros( (K,K) )
    pA[0,1]=1.
    for i in xrange(1,K-1):
        A[i,i]=(step-1.+eps)/(step+2*eps)
        A[i,i+1]=(1.+eps)/(step+2*eps)
        pA[i,i]=1.
        pA[i,i+1]=1.
    A[-1,-1]=(step-1.+eps)/(step+2*eps)
    A[-1,1]=(1.+eps)/(step+2*eps)
    pA[-1,-1]=1.
    pA[-1,1]=1.

    w=np.ones( (K,2) , dtype=np.float)
    w[0,1]=dat[0]
    w[1:-1,1]=(dat[:-1]-dat[1:])/step
    w[-1,1]=(dat[0]-dat[-1])/step

    return A,pA,w,K

# Initialize stuff
A,pA,w,K=create_mats(pattern)

eta=10\. # precision parameter for the autoregressive portion of the model 
lam=.1  # precision parameter for the weights prior 

N=1 #number of sequences
M=2 #number of dimensions - the second variable is for the bias term
T=len(data) #length of sequences

x=np.ones( (T+1,M) ) # sequence data (just one sequence)
x[0,1]=1
x[1:,0]=data

# Emissions
e=np.zeros( (T,K) )

# Residuals
v=np.zeros( (T,K) )

# Store the forward and backward recurrences
f=np.zeros( (T+1,K) )
fls=np.zeros( (T+1) )
f[0,0]=1
b=np.zeros( (T+1,K) )
bls=np.zeros( (T+1) )
b[-1,1:]=1./(K-1)

# Hidden states
z=np.zeros( (T+1),dtype=np.int )

# Expected hidden states
ex_k=np.zeros( (T,K) )

# Expected pairs of hidden states
ex_kk=np.zeros( (K,K) )
nkk=np.zeros( (K,K) )

def fwd(xn):
    global f,e
    for t in xrange(T):
        f[t+1,:]=np.dot(f[t,:],A)*e[t,:]
        sm=np.sum(f[t+1,:])
        fls[t+1]=fls[t]+np.log(sm)
        f[t+1,:]/=sm
        assert f[t+1,0]==0

def bck(xn):
    global b,e
    for t in xrange(T-1,-1,-1):
        b[t,:]=np.dot(A,b[t+1,:]*e[t,:])
        sm=np.sum(b[t,:])
        bls[t]=bls[t+1]+np.log(sm)
        b[t,:]/=sm

def em_step(xn):
    global A,w,eta
    global f,b,e,v
    global ex_k,ex_kk,nkk

    x=xn[:-1] #current data vectors
    y=xn[1:,:1] #next data vectors predicted from current

    # Compute residuals
    v=np.dot(x,w.T) # (N,K) <- (N,1) (N,K)
    v-=y
    e=np.exp(-eta/2*v**2,e)

    fwd(xn)
    bck(xn)

    # Compute expected hidden states
    for t in xrange(len(e)):
        ex_k[t,:]=f[t+1,:]*b[t+1,:]
        ex_k[t,:]/=np.sum(ex_k[t,:])

    # Compute expected pairs of hidden states    
    for t in xrange(len(f)-1):
        ex_kk=A*f[t,:][:,np.newaxis]*e[t,:]*b[t+1,:]
        ex_kk/=np.sum(ex_kk)
        nkk+=ex_kk

    # max w/ respect to transition probabilities
    A=pA+nkk
    A/=np.sum(A,1)[:,np.newaxis]

    # Solve the weighted regression problem for emissions weights
    # x and y are from above 
    for k in xrange(K):
        ex=ex_k[:,k][:,np.newaxis]
        dx=np.dot(x.T,ex*x)
        dy=np.dot(x.T,ex*y)
        dy.shape=(2)
        w[k,:]=lin.solve(dx+lam*np.eye(x.shape[1]), dy)

    # Return the probability of the sequence (computed by the forward algorithm)
    return fls[-1]

if __name__=='__main__':
    # Run the em algorithm
    for i in xrange(20):
        print em_step(x)

    # Get rough boundaries by taking the maximum expected hidden state for each position
    r=np.arange(len(ex_k))[np.argmax(ex_k,1)<3]

    # Plot
    plt.plot(range(T),x[1:,0])

    yr=[np.min(x[:,0]),np.max(x[:,0])]
    for i in r:
        plt.plot([i,i],yr,'-r')

    plt.show() 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-09-29T16:46:57.317

为什么不使用简单的匹配过滤器？或者它的一般统计对应物，称为互相关。给定一个已知模式 x(t) 和一个嘈杂的复合时间序列，其中包含您的模式在**a,b,...,z**中移动`y(t) = x(t-a) + x(t-b) +...+ x(t-z) + n(t).`x 和 y 之间的互相关函数应该在 a,b,...,z 中给出峰值

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-01T05:08:36.950

[Weka](http://www.cs.waikato.ac.nz/ml/weka/)是一个强大的机器学习软件集合，并且支持一些时间序列分析工具，但是我对该领域的了解不够，无法推荐一个最佳方法。但是，它是基于 Java 的；并且您可以[从 C/C++ 调用 Java 代码](https://stackoverflow.com/questions/819536/how-to-call-java-function-from-c)而无需大惊小怪。

时间序列操作包主要针对股票市场。我在评论中建议了[Cronos ；](http://www.stat.cmu.edu/~abrock/oldcronos/)我不知道如何用它进行模式识别，除了显而易见的：你的系列中任何一个好的模型都应该能够预测，在与最后一个小凹凸有一定距离的小凹凸之后，大凹凸随之而来。也就是说，您的系列表现出自相似性，而 Cronos 中使用的模型旨在对其进行建模。

如果您不介意 C#，您应该向[HCIL](http://www.cs.umd.edu/hcil/timesearcher/#ts2)的人员请求 TimeSearcher2 版本 - 对于该系统，模式识别是绘制模式的样子，然后检查您的模型是否足够通用以捕获大多数实例假阳性率低。可能是您会发现的最用户友好的方法；所有其他人都需要统计学或模式识别策略方面的相当背景。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-02T18:02:01.803

我不确定哪个包最适合这个。我在大学的某个时候做过类似的事情，我试图在 xy 轴上为一堆不同的图形自动检测某些相似的形状。您可以执行以下操作。

类标签，如：

*   没课
*   区域开始
*   区域中部
*   区域结束

像这样的特点：

1.  窗口中每个周围点的相对 y 轴相对和绝对差 11 点宽
2.  与平均值差异等特征
3.  之前点和之后点之间的相对差异

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-01-25T16:30:49.953

如果您可以选择，我正在使用深度学习。它是用 Java，[Deeplearning4j](https://deeplearning4j.org/)完成的。我正在试验 LSTM。我尝试了 1 个隐藏层和 2 个隐藏层来处理时间序列。

```
return new NeuralNetConfiguration.Builder()
                .seed(HyperParameter.seed)
                .iterations(HyperParameter.nItr)
                .miniBatch(false)
                .learningRate(HyperParameter.learningRate)
                .biasInit(0)
                .weightInit(WeightInit.XAVIER)
                .momentum(HyperParameter.momentum)
                .optimizationAlgo(
                        OptimizationAlgorithm.STOCHASTIC_GRADIENT_DESCENT  // RMSE: ????
                )
                .regularization(true)
                .updater(Updater.RMSPROP) // NESTEROVS
                // .l2(0.001)
                .list()
                .layer(0,
                        new GravesLSTM.Builder().nIn(HyperParameter.numInputs).nOut(HyperParameter.nHNodes_1).activation("tanh").build())
                .layer(1,
                        new GravesLSTM.Builder().nIn(HyperParameter.nHNodes_1).nOut(HyperParameter.nHNodes_2).dropOut(HyperParameter.dropOut).activation("tanh").build())
                .layer(2,
                        new GravesLSTM.Builder().nIn(HyperParameter.nHNodes_2).nOut(HyperParameter.nHNodes_2).dropOut(HyperParameter.dropOut).activation("tanh").build())
                .layer(3, // "identity" make regression output
                        new RnnOutputLayer.Builder(LossFunctions.LossFunction.MSE).nIn(HyperParameter.nHNodes_2).nOut(HyperParameter.numOutputs).activation("identity").build()) // "identity"
                .backpropType(BackpropType.TruncatedBPTT)
                .tBPTTBackwardLength(100)
                .pretrain(false)
                .backprop(true)
                .build(); 
```

发现了一些东西：

*   LSTM 或 RNN 非常擅长挑选时间序列中的模式。
*   尝试了一个时间序列和一组不同的时间序列。图案很容易被挑选出来。
*   它还试图挑选出不仅仅是一种节奏的模式。如果有按周和按月的模式，两者都会被网络学习。

# php - 如何在php中将用户从登录页面重定向到另一个

> ID：11752728
> 
> 赞同：0
> 
> 时间：2012-08-01T04:53:17.867
> 
> 标签：php, url, redirect

假设用户为“ **http://www.example.com/login#/settings** ”添加了书签。如果该用户在注销时尝试访问此页面，首先我希望他重定向到登录页面，然后使用此方法重定向到书签页面

> [http://www.example.com/authenticate/login?continue=http://www.example.com/login#/settings](http://www.example.com/authenticate/login?continue=http://www.example.com/login#/settings)

笔记：

*   我正在使用 MVC 架构
*   是否有任何方法而不是**HTTP_REFERER**？

当用户输入[http://www.example.com/login#/settings](http://www.example.com/login#/settings)时，**我想读取整个 url，包括**我的**控制器**文件中的 #anchor，然后**只有我可以将 url 设置**为

**http://www.example.com/authenticate/login?continue=http://www.example.com/login#/settings**

那我该怎么做？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:21:27.547

您[无法](https://stackoverflow.com/questions/940905/can-php-read-the-hash-portion-of-the-url)从 PHP 中读取 # 之后的部分。为此，您需要使用 JavaScript。例如，您可以使用

```
window.location.hash 
```

找到散列部分，如果有的话（如果没有散列，它将是 ''，如果有散列，它将是 '#something'）。然后，您可以将其作为请求中的隐藏字段发送到控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:08:16.033

取决于您希望如何将其呈现给您的用户。对于简单的重定向，使用`header`发送 HTTP Location Header

```
header("Location: http://www.google.com/"); 
```

如果您想在重定向用户之前给用户一些时间阅读短消息，那么您可以使用`header`发送 HTTP Refresh Header

```
header( "Refresh: 5; url=newpage.php" ); 
```

**编辑：**为了捕获锚点，您需要使用 JavaScript。PHP 无法获得该信息。在这种情况下，如果您使用 JavaScript 来捕获锚点，您不妨在 JavaScript 中编写您的重定向。

**编辑2：**也许另一个选项是，当您将继续传递给您的程序时，还将锚点作为另一个`GET`变量发送。因此，您的 URI 可能如下所示：

```
http://www.example.com/authenticate/login?continue=http://www.example.com/login&anchor=settings#/settings 
```

然后使用`$_GET['anchor']`并将其连接到`$_GET['continue']`with a的值`#`。

```
$uri = $_GET['continue'] . "#" . $_GET['anchor']; 
```

# java - Java 移动 从一个 PreferenceScreen 到另一个？

> ID：11752729
> 
> 赞同：3
> 
> 时间：2012-08-01T04:53:19.460
> 
> 标签：java, android

我正在尝试做类似于 iOS 可编辑 UITableView 的事情。如果用户单击“添加新项目”，我有一个“添加的项目”列表，他被带到具有多个`<Preference>`元素的 PreferenceScreen，单击应该从该屏幕消失并将其添加到“添加列表”（实际上是一个`<PreferenceCategory>`），那么他们应该能够从这里删除它们或编辑他们的订单。这类似于 iOS 可编辑列表。

![在此处输入图像描述](../Images/b13d5fbd967c810cc61dd148d0ec3bbb.png)

这是我的 XML：

```
<PreferenceScreen android:title="ALL APPS" android:key="app_list">  
    <!-- A <preference> for each app -->
</PreferenceScreen>
<PreferenceCategory android:title="ADDED APPS" android:key="my_apps_list">
</PreferenceCategory> 
```

我已经尝试了无数次，但我无法让它工作。

我怎样才能完成它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T13:43:24.063

我已经尝试了一些，当你嵌套你的`PreferenceScreens`.

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <CheckBoxPreference android:title="Check it!" />

    <PreferenceScreen android:title="To the other preferences!" android:summary="I really hope this works &lt;3" >
        <EditTextPreference android:title="Edit your name" android:summary="Edit your name :)" />
        <CheckBoxPreference android:title="Accept answer" />
    </PreferenceScreen>

</PreferenceScreen> 
```

![在此处输入图像描述](../Images/6a1ac6d8d6d77ccc8ba6063875022ac3.png)

PS：请原谅我的硬编码字符串文字 - 这只是为了测试！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T14:56:57.963

请查看有关此问题的已接受答案：

[如何从屏幕上删除 Android 首选项](https://stackoverflow.com/questions/4081533/how-to-remove-android-preferences-from-the-screen)

有时，如果存在类别，您必须

> “引用包含您要删除的首选项的类别，然后从该类别中删除该首选项”

就像那里的答案说的那样。这不也是你的情况吗？

希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T22:57:09.217

这看起来与我过去提出的问题非常相似：

[android - 在 PreferenceActivity 中显示 listView](https://stackoverflow.com/questions/10616317/android-showing-listview-in-preferenceactivity)

选择要显示的项目时，以某种方式存储它们（数据库、参考等），然后使用我找到的解决方案。

如您所见，偏好活动中使用的视图实际上是一个 listView ，因此将 listView 放在 listView 中很奇怪。你需要的是一个特殊的技巧，这就是我写过的东西。

# c# - 如何使用 c# 从 xml 获取节点-我做错了什么？

> ID：11752735
> 
> 赞同：3
> 
> 时间：2012-08-01T04:53:53.280
> 
> 标签：c#, xml, soap

命名空间和 XML 仍然让我很困惑。

这是我的 XML（来自 SOAP 请求）

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <soap:Body>
      <MyResponse xmlns="http://tempuri.org/">
         <OutputXML xmlns="http://tempuri.org/XMLSchema.xsd">
            <Result>
               <OutputXML>
                  <Result>
                     <Foo>
                        <Bar />
                     </Foo>
                  </Result>
               </OutputXML>
            </Result>
         </OutputXML>
      </MyResponse>
   </soap:Body>
</soap:Envelope> 
```

我正在尝试从 SOAP 响应中提取实际的 XML 部分（从 Foo 元素开始）：

```
var nsmgr = new XmlNamespaceManager(document.NameTable);
nsmgr.AddNamespace("soap", "http://schemas.xmlsoap.org/soap/envelope/");
nsmgr.AddNamespace("", "http://tempuri.org/");
nsmgr.AddNamespace("", "http://tempuri.org/XMLSchema.xsd");

var xml = document.DocumentElement
    .SelectSingleNode("Foo", nsmgr)
    .InnerXml; 
```

但是 SelectSingleNode 返回 null。我已经尝试了一些不同的变体，但没有任何效果。我不明白什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-01T05:08:40.210

试试这个：

```
var nsmgr = new XmlNamespaceManager(document.NameTable);
nsmgr.AddNamespace("aaa", "http://tempuri.org/XMLSchema.xsd");

var xml = document.DocumentElement
    .SelectSingleNode("aaa:Foo", nsmgr)
    .InnerXml; 
```

这是因为`Default namespaces`没有前缀。

您可以`GetElementsByTagName`直接使用命名空间 uri：

```
var xml = document.GetElementsByTagName("Foo", 
             "http://tempuri.org/XMLSchema.xsd")[0].InnerXml; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T05:04:32.220

您可以使用 LINQ to XML 来获取结果，还可以指定命名空间

```
XDocument document = XDocument.Load("test.xml");
XNamespace ns = "http://tempuri.org/XMLSchema.xsd";
var test = document.Descendants(ns + "Foo").FirstOrDefault(); 
```

或者，如果您不想指定 NameSpace，则：

```
var test2 = document.Descendants()
                    .Where(a => a.Name.LocalName == "Foo")
                    .FirstOrDefault(); 
```

# mysql - 创建自定义错误消息 MySQL

> ID：11752745
> 
> 赞同：6
> 
> 时间：2012-08-01T04:55:17.583
> 
> 标签：mysql, constraints

在 MySQL 中，如何为此错误消息创建自定义消息：

> 无法删除或更新父行：外键约束失败 ( `database`. `jenis_fasum`, CONSTRAINT `jenis_fasum_ibfk_1`FOREIGN KEY ( `id_kategori`) REFERENCES `kategori_fasum`( `id_kategori`))

也许使用触发器？有人可以提供一个例子吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T06:01:59.540

我不认为它可以在 a 中完成`TRIGGER`，但可以通过 MySQL 5.5 中的存储过程完成。

这是默认错误消息：

```
mysql> INSERT INTO area SET location_id = 'invalid';
ERROR 1452 (23000): Cannot add or update a child row: a foreign key constraint fails (`rates`.`area`, CONSTRAINT `area_ibfk_1` FOREIGN KEY (`location_id`) REFERENCES `location` (`id`))

mysql> SHOW ERRORS;
+-------+------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Level | Code | Message                                                                                                                                                              |
+-------+------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Error | 1452 | Cannot add or update a child row: a foreign key constraint fails (`rates`.`area`, CONSTRAINT `area_ibfk_1` FOREIGN KEY (`location_id`) REFERENCES `location` (`id`)) |
+-------+------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------+
1 row in set (0.00 sec) 
```

这是我们的存储过程：

```
DROP PROCEDURE IF EXISTS test1;

DELIMITER //

CREATE PROCEDURE test1()
DETERMINISTIC
MODIFIES SQL DATA
SQL SECURITY INVOKER
BEGIN
  DECLARE EXIT HANDLER FOR SQLSTATE '23000'
  BEGIN
    SIGNAL SQLSTATE '23000' SET 
      MYSQL_ERRNO = 1452,
      MESSAGE_TEXT = 'Yo! Error 23000!';
  END;

  INSERT INTO area SET location_id = 'invalid';
END;
//

DELIMITER ; 
```

这是我们的自定义错误消息：

```
mysql> CALL test1();
ERROR 1452 (23000): Yo! Error 23000!

mysql> SHOW ERRORS;
+-------+------+------------------+
| Level | Code | Message          |
+-------+------+------------------+
| Error | 1452 | Yo! Error 23000! |
+-------+------+------------------+
1 row in set (0.00 sec) 
```

顺便说一句，你为什么要这个？

# ruby - RhoMobile 13,000 个插入由于时间而导致问题

> ID：11752751
> 
> 赞同：0
> 
> 时间：2012-08-01T04:55:43.437
> 
> 标签：ruby, sqlite, rhomobile, rhodes

在将大约 13,000 条记录插入设备数据库时，我遇到了问题（由于时间原因）。

有没有办法优化这个？是否有可能将这些全部放入一个事务中（因为我相信它当前正在为每个插入创建一个事务（这显然对速度有恶魔般的影响））。

目前这需要大约 10 分钟，这包括将 CSV 转换为哈希（这似乎不是瓶颈）。

愚蠢的是我没有使用 RhoSync ......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T01:58:00.847

使用固定模式而不是属性包，您可以使用一个事务（请参阅下面的链接了解如何）。

[http://docs.rhomobile.com/rhodes/rhom#perfomance-tips](http://docs.rhomobile.com/rhodes/rhom#perfomance-tips)。

这个问题是其他人在谷歌群组（HAYAKAWA Takashi）上回答的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T03:24:43.700

围绕插入设置事务，然后仅在最后提交。

从他们的常见问题解答。

[http://docs.rhomobile.com/faq#how-can-i-seed-a-large-amount-of-data-into-my-application-with-rhom](http://docs.rhomobile.com/faq#how-can-i-seed-a-large-amount-of-data-into-my-application-with-rhom)

```
db = ::Rho::RHO.get_src_db('Model')
db.start_transaction
begin
  items.each do |item|
    # create hash of attribute/value pairs
    data = {
      :field1 => item['value1'], 
      :field2 => item['value2'] 
    } 
    # Creates a new Model object and saves it
    new_item = Model.create(data)
  end
 db.commit
rescue
 db.rollback
end 
```

我发现这种技术是一个巨大的加速。

# vim - 是否有讨论 vim 源代码结构的文档？

> ID：11752753
> 
> 赞同：11
> 
> 时间：2012-08-01T04:55:50.957
> 
> 标签：vim, vi

我对研究 Vim 代码库很感兴趣，但我找不到任何整体结构文档。这样的事情存在吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T07:00:55.907

在文档方面，很少；`:help development`给出了一些一般性的介绍，但你大多只需要深入到源代码中，跳来跳去（很容易通过 ctags 支持）。

待办事项列表（`:help todo`; Mercurial 存储库中的更新版本）包含（太多）许多项目，无论大小。选择一些小事并尝试解决它。欢迎任何帮助和贡献！我建议加入 vim_dev 邮件列表，因为您将补丁发送到那里并可以询问有关源代码的问题。

# linux - 在 bash-3.2$ 中找不到命令

> ID：11752754
> 
> 赞同：-1
> 
> 时间：2012-08-01T04:56:03.433
> 
> 标签：linux, bash

我尝试使用 bash 运行脚本文件，但显示错误

bash-3.2$ example.sh：找不到命令

我也试过 ls -l example.sh

我发现它无法执行，所以我使用了 sudo chmod 777 example.sh

我再次尝试运行它，但同样的错误即将到来。我仔细检查了我是否与使用 ls 的文件在同一个文件夹中。但我仍然无法执行脚本文件。

我终于尝试制作一个虚拟脚本文件并运行它，发现同样的错误

我认为 BASH 存在一些问题。有人可以帮我解决问题吗？

我正在使用 redhat，bash 已经安装在我的系统中

由于我是 linux 上的新手，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T04:59:00.283

`.`（当前目录）可能不在您的路径上。尝试`./example.sh`或`bash example.sh`。您也可以添加`.`到您的`PATH`环境变量中，但这通常是不受欢迎的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T05:01:20.240

bash 在您的`$PATH`. 显然当前目录 ,`.`不在您的`$PATH`. （这是一件好事；拥有`.`你的东西`$PATH`是不安全的。）

您需要指定目录名称。只需输入：

```
./example.sh 
```

顺便说一句，做：

```
sudo chmod 777 example.sh 
```

是两种矫枉过正。首先，您不需要使用`sudo`; `sudo` *仅*在您实际需要时使用。大概是您的个人帐户拥有该文件，因此您可以直接使用`chmod`。

第二，`777`太*任性*了。它允许系统上的任何人读取、执行或*修改* `example.sh`. （如果你是系统上唯一的人，这可能并不重要，但这仍然是一个坏习惯。）通常你应该使用`755`目录和需要可执行`644`的文件，以及不需要的文件可执行。

或者只是使用

```
chmod +x example.sh 
```

设置执行权限（您的 umask 将防止权限设置太松散）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T04:59:08.023

您的 bash PATH 可能不包含`.`，请尝试通过键入以下命令运行它：

```
./example.sh 
```

当您键入命令时，您的 shell 会搜索您的路径以尝试找到该命令，如果当前目录（例如`.`）不是路径的一部分，则不会找到您尝试运行的脚本。你必须明确地给它这个命令所在的路径。而且由于它在您的当前目录中，您只需`./`在命令前面添加即可。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T08:13:09.753

首先确认bash路径检查bash使用的路径：

```
 which bash 
```

如果你得到“/bin/bash”然后添加

```
#!/bin/bash 
...
... 
```

或者 bash 脚本第一行的路径

# regex - php正则表达式匹配三个单词，如果不是然后两个然后一个

> ID：11752756
> 
> 赞同：2
> 
> 时间：2012-08-01T04:56:26.790
> 
> 标签：regex

Q1：我正在用 php 编写正则表达式，但没有成功。我想匹配以下内容：

```
 so i would 
```

如果不是，则匹配：

```
 so i 
```

进而：

```
 i would 
```

和

```
 so
    i
    would 
```

这是我的代码：

```
\b(so i|i would|so i would|(so|i|would))\b 
```

它只匹配：所以，我，会，所以我，我会....但不匹配所以我会？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T04:59:35.193

正确订购您的正则表达式。

```
\b(so i would|so i|i would|(so|i|would))\b 
```

将要匹配的最长字符串放在左侧。是左关联的`|`，因此，在您的正则表达式版本中，匹配较短的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T04:59:58.847

只是放在开头

```
\b(so i would|so i|i would|(so|i|would))\b 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T06:10:13.037

将最长模式放在组的左边：\b(long|...|short)\b
另一种解决方案：`\b(so i would|i would|would|so i|so|i)\b`
ps这是NFA正则表达式引擎功能，请参阅“掌握正则表达式”

# ruby - Ruby IRB - 不能做 Process.getrlimit

> ID：11752763
> 
> 赞同：0
> 
> 时间：2012-08-01T04:57:17.743
> 
> 标签：ruby, process, irb

我正在阅读一本书“使用 Unix 进程”，它使用 ruby​​ 来解释 unix/linux 进程。这是我第一次使用 ruby​​。我尝试了一个示例来获取进程的资源限制。

```
irb(main):001:0> Process.getrlimit(:CORE)
Errno::EINVAL: Invalid argument - getrlimit
    from (irb):1:in `getrlimit'
    from (irb):1
    from :0

irb(main):004:0> Process.getrlimit()
ArgumentError: wrong number of arguments (0 for 1)
    from (irb):4:in `getrlimit'
    from (irb):4
    from :0 
```

但我似乎无法识别“getrlimit”（尽管它说如果我不提供任何参数，我的参数数量错误）。在 google 或 SO 上没有找到任何关于此的内容。尝试使用 :NOFILE、:CORE 等。有什么我需要包括/要求使 getrlimit 工作。环境：

```
Ubuntu 11.04 32 bit. Kernel 3.0.0-14
ruby 1.9.2p290 (2011-07-09 revision 32553) [i686-linux]
irb 0.9.5(05/04/13) 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:04:41.927

对不起..没关系。似乎 IRB 正在运行以前版本的 ruby​​ (1.8.7)，它不知何故不支持 getrlimit（尽管根据 google 上的所有帐户，它应该可以工作）。我已将 ruby​​ 升级到 1.9.1，但没有更新从 /usr/bin/irb 到 /usr/bin/irb1.9.1 的链接。所以 IRB 仍在运行 ruby​​ 1.8.7。将irb的软链接更新到v1.9.1后，getrlimit现在可以工作了。

# image-processing - 获取视频中帧的平均颜色

> ID：11752765
> 
> 赞同：0
> 
> 时间：2012-08-01T04:58:06.337
> 
> 标签：image-processing, computer-vision

最终目标：获取视频中每一帧的平均颜色。

到目前为止，我的计划是这样的：

1.  将视频的帧导出为单个图像。
2.  批量处理图像以将它们调整为 1px x 1px，因为我相信这将提供平均颜色。
3.  获取该像素的 RGB 值并将其记录为文本。

我被困的地方是第 3 步。我不知道如何以编程方式进行。

我只需要这样做一两次，所以它不需要完全自动，我只是想避免手动复制粘贴颜色值。

编辑：前两个步骤不需要任何编程，所以我很愿意使用您的解决方案所需的任何语言。我的强项是 PHP，这是一个 Arduino 项目，所以类似 C 的语言很好，但无论如何都能完成工作。我使用的是 Mac，但 Windows 或 Linux 也不是问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:12:06.530

由于您正在做一些图像处理，我假设您在 matlab 中执行此操作。

因此，您可以先阅读图像：

```
A = imread('filename.jpg'); 
```

要获得红色，您可以使用：

```
A(1,1,1); 
```

要获得绿色和蓝色，只需将第三列中的索引分别更改为 2 和 3。

# eclipse-plugin - Ubuntu 12.04(64) 上的 Eclipse 3.7 的 Perforce 插件无法检索客户端

> ID：11752771
> 
> 赞同：0
> 
> 时间：2012-08-01T04:58:30.660
> 
> 标签：eclipse-plugin, perforce, ubuntu-12.04

我正在尝试使用 Perforce P4 插件配置 eclipse 3.7。当我尝试创建一个连接时：服务器：用户：而不是只搜索客户端'' - 插件尝试搜索所有可能的客户端，在 Eclipse 的 p4 控制台上，我看到发出的命令是：'p4 客户端' - 应该是 - 'p4 客户端 -u 用户'

我创建了以下环境变量 - P4PORT、P4USER、P4CLIENT。我看到使用 Ubuntu 10.04(64) 的人没有遇到这个问题。在发出“p4 clients”命令时，我无法找出 perforce 插件从哪里读取和使用 P4USER 的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:01:42.703

嗯，您通常在配置与 Perforce 的连接时指定您的 Perforce 用户名。可能最好让 Perforce 支持为您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T10:55:48.833

我在 Eclispe 3.7 和 4.2 中都使用了 3.6 的 Perforce 插件，这为我解决了这个问题。

# java - 在运行时提取字段值的 Java 服务

> ID：11752775
> 
> 赞同：1
> 
> 时间：2012-08-01T04:59:22.967
> 
> 标签：java, web-services, xpath, webmethods

我需要构建一个在运行时提取字段值的 java 服务。规范中的字段路径和规范文档本身应作为输入给出。

例如：fromDoc 由其中的子文档组成，在层次结构中，即。fromDoc/Data/Parameters/outDate

```
 •fromDoc

     •Data

        •Parameters

           •outDate(string) 
```

对于 inStringValues，我将输入设为“fromDoc/Data/Parameters/outDate”

输出应在运行时返回变量“fromDoc/Data/Parameters/outDate”的值。

我有一个代码，它用键值对逻辑实现了这一点。

```
IDataCursor pipelineCursor = pipeline.getCursor();

      // fromDoc
IData     fromDoc = IDataUtil.getIData( pipelineCursor, "fromDoc" );
String[] inStringValues = IDataUtil.getStringArray( pipelineCursor, "inStringValues" );
if ( fromDoc == null)
{
    return;
}
pipelineCursor.destroy();
int len = inStringValues.length;
String[] outStrings = new String[len];
IDataCursor fromCursor = fromDoc.getCursor();
boolean hasData = false;

while( fromCursor.next() )
{
    for(int i=0;i<len;i++)
    {
        String key = fromCursor.getKey();
        String val = fromCursor.getValue().toString();
        if(key.equals(inStringValues[i]))
        {
             outStrings[i]=key + "," + val;
        }
    }
}

fromCursor.destroy();

IDataCursor pipelineCursor_1 = pipeline.getCursor();
IDataUtil.put( pipelineCursor_1, "outStrings", outStrings );

pipelineCursor_1.destroy(); 
```

请让我知道如何修改此代码以实现上述逻辑？或者让我知道是否有人与您有这样的现有服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T22:20:35.080

[Tundra](https://github.com/Permafrost/Tundra)有一项服务可以满足您的需求：`tundra.document:get($document, $key)`.

*   `$document`是`com.wm.data.IData`您要从中提取值的文档
*   `$key`是您要提取的键的名称，可以是完全限定的并包括数组索引，例如`"path/to/my[1]/key"`

相关Java代码如下：

```
public static final void get(IData pipeline) throws ServiceException {
  IDataCursor cursor = pipeline.getCursor();

  try {
    IData document = IDataUtil.getIData(cursor, "$document");
    String key = IDataUtil.getString(cursor, "$key");
    IDataUtil.put(cursor, "$value", get(document, key));
  } finally {
    cursor.destroy();
  }          
}

// wrapper class for fully qualified IData keys
public static class Key {
  public static final String SEPARATOR = "/";
  public static final java.util.regex.Pattern INDEX_PATTERN = java.util.regex.Pattern.compile("\\[(-?\\d+?)\\]$");

  protected boolean hasIndex = false;
  protected int index = 0;
  protected String key = null;

  public Key(String key) {
    java.util.regex.Matcher matcher = INDEX_PATTERN.matcher(key);
    StringBuffer buffer = new StringBuffer();
    while(matcher.find()) {
      hasIndex = true;
      index = Integer.parseInt(matcher.group(1));
      matcher.appendReplacement(buffer, "");
    }
    matcher.appendTail(buffer);
    this.key = buffer.toString();
  }

  public boolean hasIndex() {
    return hasIndex;
  }

  public int getIndex() {
    return index;
  }

  public String toString() {
    return key;
  }

  public static java.util.Queue<Key> parse(String key) {
    String[] parts = key.split(SEPARATOR);
    java.util.Queue<Key> queue = new java.util.ArrayDeque<Key>(parts.length);

    for (int i = 0; i < parts.length; i++) {
      queue.add(new Key(parts[i]));
    }
    return queue;
  }

  public static boolean isFullyQualified(String key) {
    return key != null && (key.contains(SEPARATOR) || INDEX_PATTERN.matcher(key).find());
  }
}

// returns the value associated with the given key from the given IData document
public static Object get(IData input, String key) {
  Object value = null;
  if (input != null && key != null) {
    // try finding a value that matches the literal key
    IDataCursor cursor = input.getCursor();
    try {
      value = IDataUtil.get(cursor, key);
    } finally {
      cursor.destroy();
    }

    // if value wasn't found using the literal key, the key could be fully qualified
    if (value == null && Key.isFullyQualified(key)) value = get(input, Key.parse(key));
  }

  return value;
}

// gets a value from an IData document with a fully qualified key
protected static Object get(IData input, java.util.Queue<Key> keys) {
  Object value = null;

  if (input != null && keys != null && keys.size() > 0) {
    IDataCursor cursor = input.getCursor();
    Key key = keys.remove();

    if (keys.size() > 0) {
      if (key.hasIndex()) {
        IData[] array = IDataUtil.getIDataArray(cursor, key.toString());
        value = get(get(array, key.getIndex()), keys);
      } else {
        value = get(IDataUtil.getIData(cursor, key.toString()), keys);
      }
    } else {
      if (key.hasIndex()) {
        Object[] array = IDataUtil.getObjectArray(cursor, key.toString());
        value = get(array, key.getIndex());
      } else {
        value = IDataUtil.get(cursor, key.toString());
      }
    }
    cursor.destroy();
  }

  return value;
}

public static <T> T get(T[] array, int index) {
  T item = null;

  if (array != null) {
    // support reverse/tail indexing
    if (index < 0) index += array.length;

    item = array[index];
  }

  return item;
} 
```

注意：[Tundra](https://github.com/Permafrost/Tundra)也有一项补充服务，用于在`com.wm.data.IData`文档中设置值：`tundra.document.put($document, $key, $value)`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:35:15.487

那这个呢 ？

```
 // fromDoc
    IDataCursor cursor = pipeline.getCursor();
    IData fromDoc = IDataUtil.getIData(cursor, "fromDoc");

    if (fromDoc == null) {
        return;
    }

    // Data
    cursor = fromDoc.getCursor();
    IData Data = IDataUtil.getIData(cursor, "Data");

    if (Data == null) {
        return;
    }

    // Parameters
    cursor = Data.getCursor();
    IData Parameters = IDataUtil.getIData(cursor, "Parameters");

    if (Parameters == null) {
        return;
    }

    // outDate
    cursor = Parameters.getCursor();
    String outDate = IDataUtil.getString(cursor, "outDate");

    // Here I have the outDate value 
```

# jquery - jQuery更改事件不断触发

> ID：11752776
> 
> 赞同：0
> 
> 时间：2012-08-01T04:59:24.350
> 
> 标签：jquery

我必须在（a）之前基于另一个选择框（b）填充一个选择框，我为此使用了更改事件，但是更改事件不断触发，第二个选择框不断填充自己，这样我就无法选择第二个选择框中的一个项目，因为无论我选择什么它都会重新填充自己，我看到在 b 中选择的第一个条目。

```
$(document).ready(function () {
    $("*:first").change(function () {
        var b = document.forms[0].b;
        var a = document.forms[0].a.value;

        if (a != "") {
            var value = "";
            var par = 'c=' + a;

            $.ajax({
                url: "compute",
                data: par,
                type: "post",
                dataType: "text",
                async: false,
                success: function (data) {
                    value = JSON.decode(data);
                }
            });

            var options = "";

            for (k in value) {
                options = options + "<option value='" + value[k] + "'>" + k + "</option>" + "\n";
            }

            b.innerHTML = options;
        } else {
            b.innerHTML = '<option value="">-Select-</option>';
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:26:13.617

**问题：**您是正确的，`:first`将匹配集减少到仅第一项；然而`*`匹配*一切*，所以`*:first`实际上选择`<html>`元素（或您的情况下的其他顶级元素）。`.change()`不打算与该元素一起使用，因此其默认行为是未定义的——但由于*更改事件*从您的元素冒泡到顶级`<select>`元素，似乎每次都在它们上触发它。

**解决方案：**将您的处理程序绑定到正确的元素。另外，不要发出请求`async: false`，因为这会导致浏览器挂起，直到服务器响应。相反，将其他代码移动到成功回调中：

```
$(document).ready(function() {
    var b = $('select:last');
    $("select:first").change(function() {
        var $this = $(this);
        var a = $this.val();

        if (a) {
            var par = 'c=' + a;
            $.ajax({
                url: "compute",
                data: par,
                type: "post",
                dataType: "text",
                //async: false,
                success: function(data) {
                    var value = JSON.decode(data);
                    var options = "";
                    for (k in value)
                        options += "<option value='" + value[k] + "'>" + k + "</option>";

                    b.html(options);
                }
            });
        }
        else {
            b.html('<option value="">-Select-</option>');
        }
    });
});​ 
```

# regex - 排除字符的正则表达式并找到一个特定的匹配项

> ID：11752779
> 
> 赞同：0
> 
> 时间：2012-08-01T04:59:43.853
> 
> 标签：regex

我必须从日志中提取 -(4)- 并且必须使用正则表达式。我的代码是

```
regex /(?!-)\d{1}+(?=-)/ 
```

输入是

```
ASA-5510-6 : %ASA-4-106023: Deny udp src INTERNET:TEJ-BHARTI-ILL-2Mbps- 
```

但是使用这个正则表达式，它也提取了类似的其他模式（-5510-）。我只想提取 this(4) 特定的四个。

整个日志是

```
2011-12-01T00:02:04.382593+05:18 Dec 01 2011 00:00:29 KOC-TEJ-AMEX-ASA-5510-6 : %ASA-4-106023: Deny udp src INTERNET:TEJ-BHARTI-ILL-2Mbps-ROUTER-LAN-IP/58653 dst TCS:VIS-SYSLOG-SERVER/514 by access-group "INTERNET_access_in" [0xc97c8100, 0x0] 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:23:17.683

这个怎么样：

/%ASA-(\d+)-/

您似乎正在尝试匹配日志中“%ASA-”之后的数字。

\d 之后不需要 {1}，因为您使用的是 +。{1} 表示您只有一个 1 位，而 + 表示您需要多个位。{1}+ 表示您需要多个 1 数字，这与多个数字相同。

根据[文档](http://pic.dhe.ibm.com/infocenter/bigins/v1r4/index.jsp?topic=/com.ibm.swg.im.infosphere.biginsights.text.doc/doc/biginsights_aqlref_ref_regular-expressions.html)，您可以使用以下语法返回匹配组（括号中的内容）：

```
create view Phone as
extract regex /(\d{3})-(\d{3}-\d{4})/ 
    on between 4 and 5 tokens in D.text 
    return 
        group 1 as areaCode
        and group 2 as restOfNumber
        and group 0 as fullNumber
from Document D; 
```

第 0 组是完全匹配，所以你想要的是第 1 组，它是第一个带括号的捕获组。在查询末尾添加“将第 1 组返回为 someNumber”应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:27:37.717

只需将 %ASA 放在后面即可。也是`{1}`多余的，并且`+`匹配多个 4。

`/(?<=%ASA-)4(?=-)/g`如果你只想匹配一个 4。

`/(?<=%ASA-)\d+(?=-)/g`如果你想匹配任何一组数字。

（我不确定您是否只想匹配 4 或输入示例中 4 所在的任何内容）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:36:15.833

与 不同`lookaheads`，JavaScript 不支持 Regex`lookbehind`语法。请参阅这些帖子：

*   [在 JavaScript 中模仿 Lookbehind](http://blog.stevenlevithan.com/archives/mimic-lookbehind-javascript)
*   [JavaScript 正则表达式 Lookbehind Redux](http://blog.stevenlevithan.com/archives/javascript-regex-lookbehind)

# javascript - Google Maps API：在 JavaScript API 中使用我自己的坐标

> ID：11752785
> 
> 赞同：1
> 
> 时间：2012-08-01T05:00:15.443
> 
> 标签：javascript, google-maps, google-maps-api-3

我能够获得自己的经度和纬度并将它们保存到变量：

```
var myLat = position.coords.latitude;
var myLong = position.coords.longitude; 
```

我只是不确定如何将它们传递给在屏幕上显示地图初始位置的代码：

```
 function initialize() {
                    var mapOptions = {
                        center: new google.maps.LatLng(-34.397, 150.644),
                        zoom: 4,
                        mapTypeId: google.maps.MapTypeId.ROADMAP
                    };
                    var map = new google.maps.Map(document.getElementById("map_canvas"),
                                                  mapOptions);
                } 
```

我需要将 myLat 和 myLong 输入该行：

```
center: new google.maps.LatLng(-34.397, 150.644) 
```

我只是不知道该怎么做。谁能指出我正确的方向？

编辑：根据以下请求添加完整代码

```
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?key=YOUR KEY HERE&sensor=true"></script>

    <script type="text/javascript">

        //MAP
        function initialize() {
            var mapOptions = {
                center: new google.maps.LatLng(-34.397, 150.644),
                zoom: 9,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };

            map = new google.maps.Map(document.getElementById("map_canvas"),
                                  mapOptions);
        }

        //GEOLOCATION
    var onSuccess = function(position) {
        alert('Latitude: '  + position.coords.latitude   + '\n' +
              'Longitude: ' + position.coords.longitude  + '\n');

        var myLat = position.coords.latitude;
        var myLong = position.coords.longitude;

       map.setCenter(new google.maps.LatLng(myLat, myLong)) 

    };

    // onError Callback receives a PositionError object
    //
    function onError(error) {
        alert('code: '    + error.code    + '\n' +
              'message: ' + error.message + '\n');
    }

    navigator.geolocation.getCurrentPosition(onSuccess, onError);

</script> 
```

和 HTML：

```
<body onload="initialize()">

 <div id="map_canvas" style="width:300px; height:400px;"></div>

</body 
```

>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T05:11:16.997

只是

```
var map;
function initialize() {
    //...
}

initialize();

function initiate_geolocation() {  
    navigator.geolocation.getCurrentPosition(onSuccess);
}  

function onSuccess(position){  
    var myLat = position.coords.latitude;
    var myLong = position.coords.longitude;
    map.setCenter(new google.maps.LatLng(myLat, myLong)); // edit this line
}
initiate_geolocation(); 
```

它不是`map.setCenter(new LatLng(myLat, myLong));`相反，它应该是`map.setCenter(new google.maps.LatLng(myLat, myLong));`

[**演示。**](http://jsfiddle.net/heera/ty3PY/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T05:39:56.100

这不起作用的原因是由于以下功能

```
var onSuccess = function(position) {

    alert('Latitude: '  + position.coords.latitude   + '\n' +
          'Longitude: ' + position.coords.longitude  + '\n');

    var myLat = position.coords.latitude;
    var myLong = position.coords.longitude;

    map.setCenter(new LatLng(myLat, myLong));
}; 
```

当你使用

```
map.setCenter(new LatLng(myLat, myLong)) 
```

你必须使用

```
map.setCenter(new google.maps.LatLng(myLat, myLong)) 
```

LatLng 对象将未定义。您需要使用的对象是 google.maps.LatLng。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:18:59.803

您可以简单地将 myLat 和 myLong 作为构造函数参数传递给 google.maps.LatLng。所以你的代码应该是这样的：

```
function initialize() {
var mapOptions = {
center: new google.maps.LatLng(myLat,myLong),
zoom: 4,
mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions);
} 
```

# iphone - 使用 Google Api 进行翻译

> ID：11752786
> 
> 赞同：1
> 
> 时间：2012-08-01T05:00:24.773
> 
> 标签：iphone, objective-c, xcode

这是我用来从英语翻译成越南语的代码。

```
 NSString *urlPath = [NSString stringWithFormat:@"/translate_a/t?client=t&text=%@&langpair=en|vi",txt_view.text];
NSURL *url = [[NSURL alloc] initWithScheme:@"http"
                                      host:@"translate.google.com"
                                      path:urlPath];

NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
[request setURL:url];
[request setHTTPMethod:@"GET"];

NSURLResponse *response;
NSError *error;

NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];

if(error == nil)
{
    NSString *result = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
    NSLog(@"Result : %@", result);

    NSArray *arr = [api tocanizeTheString:result tocan:@","];
    result = [arr objectAtIndex:0];
    result = [api replaceStringwithString:result strTobeReplaced:@"[" stringReplaceWith:@""];
    result = [api replaceStringwithString:result strTobeReplaced:@"\"" stringReplaceWith:@""];

    txt_view.text = result;   // here i get only translated data...
}
else 
{
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
} 
```

有时它会给出准确的结果，有时它不会。请告诉我有什么问题。

“我的名字是 Taimur Mushtaq”我在我的应用程序中输入这个，它显示正确的结果是“Tên tôi là Taimur Mushtaq”。

“我是个好孩子”的结果应该是“Tôi là một chàng trai tốt”。相反，它是“tôi là m\u1ED9t c\u1EADu bé t\u1ED1t”

# sql-server - 如何创建 sql server 触发器并在 mvc3 模型中调用它

> ID：11752791
> 
> 赞同：2
> 
> 时间：2012-08-01T05:01:20.653
> 
> 标签：sql-server, asp.net-mvc, asp.net-mvc-3, sql-server-2008

我有四张桌子，即。

*   客户地址
*   客户公司
*   客户联系方式和
*   客户信息

所有表都有**'cId'**字段通用。

我在 MVC3 视图中有一个接口，我将从中获取除“cId”之外的所有字段的输入。当我从界面获取输入时，必须填写上述所有表格。

另外，当我删除数据时，一旦我从一个表中删除数据，其他三个表中的所有数据都应该被删除。

我不知道如何为此使用触发器。请解释如何使用触发器或任何其他方式执行此操作。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:06:55.993

对我来说，这听起来更像是一个数据库设计问题。您不需要在这里触发。将您的一个表保留为主要表（可能是 CustInfo），并在此表上依赖其他表（外键关系）。对依赖表使用级联删除约束。当您从 CustInfo 中删除数据时，级联删除约束将负责从相关表中删除相应的数据。

# c# - ListBox ItemTemplate 基于父绑定值

> ID：11752792
> 
> 赞同：1
> 
> 时间：2012-08-01T05:01:21.667
> 
> 标签：c#, wpf, xaml, .net-3.5, datatemplate

基本上，我希望为我的列表项创建一个自定义模板。一个模板将使用复选框，而另一个将使用单选框。这是为了模拟何时允许或不允许多选。但是，我尝试了许多不同的方法，最有希望的是`DataTemplateSelector`，但是我需要创建一个依赖属性，以便我可以传入布尔`IsMultiSelect`值。但是，我需要一个`DependencyObject`在 Selector 中，我能得到的最接近的是 contentpresenter。我知道我可以以此为基础获得家长控制，但这似乎是一个黑客行为。有什么办法可以完成我想做的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:28:55.883

我不完全确定我是否正确理解了所有内容，但这可能会有所帮助：

```
<ListBox SelectionMode="Multiple">
<!--<ListBox SelectionMode="Single">-->
    <ListBox.Items>
        <TextBlock Text="Test 1" />
        <TextBlock Text="Test 2" />
        <TextBlock Text="Test 3" />
        <TextBlock Text="Test 4" />
        <TextBlock Text="Test 5" />
        <TextBlock Text="Test 6" />
    </ListBox.Items>
    <ListBox.Style>
        <Style TargetType="{x:Type ListBox}">
            <Style.Resources>
                <DataTemplate x:Key="SingleSelectionModeItemTemplate">
                    <RadioButton IsChecked="{Binding Path=IsSelected,
                                                     RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}},
                                                     Mode=TwoWay}"
                                 Content="{Binding}" />
                </DataTemplate>
                <DataTemplate x:Key="MultiSelectionModeItemTemplate">
                    <CheckBox IsChecked="{Binding Path=IsSelected,
                                                  RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}},
                                                  Mode=TwoWay}"
                              Content="{Binding}" />
                </DataTemplate>
            </Style.Resources>
            <Style.Triggers>
                <Trigger Property="SelectionMode"
                         Value="Single">
                    <Setter Property="ItemTemplate" Value="{StaticResource SingleSelectionModeItemTemplate}" />
                </Trigger>
                <Trigger Property="SelectionMode"
                         Value="Multiple">
                    <Setter Property="ItemTemplate" Value="{StaticResource MultiSelectionModeItemTemplate}" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </ListBox.Style>
</ListBox> 
```

# python - Python ctype找不到dll？

> ID：11752799
> 
> 赞同：0
> 
> 时间：2012-08-01T05:03:38.093
> 
> 标签：python, dll, ctypes

Python ctype 找不到 AntTweakBar.dll ?? 并且该文件不存在用于 python OS 文件系统调用，但存在于 c:\Windows\System32 目录中。

```
C:\Users\dkm>dir c:\Windows\System32\ant*dll
 Volume in drive C is Windows 7
 Volume Serial Number is FC61-5FBB

 Directory of c:\Windows\System32

23/07/2012  12:05 AM           641,536 AntTweakBar.dll
22/07/2012  11:43 PM           774,144 AntTweakBar64.dll
               2 File(s)      1,415,680 bytes
               0 Dir(s)  47,418,232,832 bytes free

C:\Users\dkm>python
Python 2.7 (r27:82525, Jul  4 2010, 09:01:59) [MSC v.1500 32 bit (Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> from ctypes.util import find_library
>>> import os
>>> print os.path.exists('C:\\Windows\\System32\\antweakbar.dll')
False
>>> find_library("AntTweakBar")
>>> 
```

为什么ctype找不到dll？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:07:14.050

文件名中有 2 个 t

`antweakbar.dll`- 你给的名字

`AntTweakBar.dll`- 实际文件名

`C:\\Windows\\System32\\antweakbar.dll` 应该`C:\\Windows\\System32\\anttweakbar.dll`

例如（检查 inetcfg.dll，因为我没有 anttweakbar.dll），请参阅下面的 Python 2.7.2

```
In [136]: import os

In [137]: os.path.exists("C:\\Windows\\System32\\inetcfg.dll")
Out[137]: True 
```

# c# - 从 UIElement 对象动态生成 xaml 字符串

> ID：11752806
> 
> 赞同：2
> 
> 时间：2012-08-01T05:04:42.330
> 
> 标签：c#, windows-8, windows-runtime, winrt-xaml, uielement

我有一个 Windows.UI.Xaml.Shape.Path 对象。如何生成与该 Path 对象对应的 xaml 字符串。

输入：路径对象

所需输出：“路径数据=“M 120,10 200,L300”行程=“黑色”“”

或者有什么方法可以从路径边界属性计算路径数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T05:32:13.170

尝试这个

```
string s_output = System.Windows.Markup.XamlWriter.Save(yourpath); 
```

并重新加载使用

```
System.IO.StringReader stringReader = new System.IO.StringReader(s_output);
System.Xml.XmlReader xmlReader = System.Xml.XmlTextReader.Create(stringReader, new System.Xml.XmlReaderSettings());
Path yourpath= (Path)System.Windows.Markup.XamlReader.Load(xmlReader); 
```

# iphone - 如何解析 JSON 响应？

> ID：11752808
> 
> 赞同：0
> 
> 时间：2012-08-01T05:05:05.720
> 
> 标签：iphone, objective-c, ios, json

我正在开发一个必须显示 facebook 的好友列表的项目。我做了所有必要的编码以获得响应，但响应如下

```
 {"data":[{"name":"Ramprasad Santhanam","id":"586416887"},{"name":"Karthik Bhupathy","id":"596843887"},{"name":"Anyembe Chris","id":"647842280"},{"name":"Giri Prasath","id":"647904394"},{"name":"Sadeeshkumar Sengottaiyan","id":"648524395"},{"name":"Thirunavukkarasu Sadaiyappan","id":"648549825"},{"name":"Jeethendra Kumar","id":"650004234"},{"name":"Chandra Sekhar","id":"652259595"} 
```

谁能告诉我如何在两个不同的数组中保存名称和 ID。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T05:14:02.940

您可以在下面看到 html 响应如何解析。那里我得到了 facebook 朋友。

```
- (void)fbGraphCallback:(id)sender 

    {

    if ( (fbGraph.accessToken == nil) || ([fbGraph.accessToken length] == 0) )

 {

            //restart the authentication process.....
    [fbGraph authenticateUserWithCallbackObject:self andSelector:@selector(fbGraphCallback:) 
                         andExtendedPermissions:@"user_photos,user_videos,publish_stream,offline_access,user_checkins,friends_checkins"];

} 
else 

{

    NSLog(@"------------>CONGRATULATIONS<------------, You're logged into Facebook...  Your oAuth token is:  %@", fbGraph.accessToken);
    FbGraphResponse *fb_graph_response = [fbGraph doGraphGet:@"me/friends" withGetVars:nil];// me/feed 
    //parse our json
    SBJSON *parser = [[SBJSON alloc] init];
    NSDictionary *   facebook_response = [parser objectWithString:fb_graph_response.htmlResponse error:nil]; 
    //init array 
    NSMutableArray * feed = (NSMutableArray *) [facebook_response objectForKey:@"data"];
    //  NSMutableArray *recentFriends = [[NSMutableArray alloc] init];
     arr=[[NSMutableArray alloc]init];
    //adding values to array
    for (NSDictionary *d in feed) 
    {
        [arr addObject:d];

    }

    //NSLog(@"array is %@ ",arr);
    [fbSpinner stopAnimating];
    [fbSpinner removeFromSuperview];

    [myTableView reloadData];

}

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T05:08:55.213

这是您得到的 json 响应。因此，您需要一个 JSON 解析器来将此字符串转换为 Objective-C 对象。在 iOS App 中，您可以使用[json-framework](https://github.com/stig/json-framework/)之类的库。这个库将允许您轻松解析 JSON 并从字典/数组生成 json（这实际上是所有 JSON 的组成部分）。

来自 SBJson 文档：JSON 解析后，您将获得此转换

> JSON 通过以下方式映射到 Objective-C 类型：
> 
> *   空 -> NSNull
> *   字符串 -> NSString
> *   数组 -> NSMutableArray
> *   对象-> NSMutableDictionary
> *   true -> NSNumber 的 -numberWithBool:YES
> *   false -> NSNumber 的 -numberWithBool:NO
> *   最多 19 位的整数 -> NSNumber 的 -numberWithLongLong：
> *   所有其他数字-> NSDecimalNumber

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T05:10:22.910

这看起来像 JSON，而不是 HTML。（你可能已经知道这一点，因为你用`json`我看到了这个问题。）

我不太确定为什么其他人会推荐第三方库来执行此操作，除非您需要支持相当旧的操作系统版本。只需使用 Apple 内置的[NSJSONSerialization](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html) 类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T05:08:41.290

这不是 HTML。这是 JSON。为此，您需要一个[JSON 解析器](http://github.com/H2CO3/CarbonateJSON)。

JSON 解析器通常会从字符串中生成 NSDictionary 或 NSArray。通过我的实现，你会做这样的事情：

```
NSMutableArray *names = [NSMutableArray array];
NSMutableArray *ids = [NSMutableArray array];

NSDictionary *root = [responseString parseJson];
NSArray *data = [root objectForKey:@"data"];
for (NSDictionary *pair in data)
{
    [names addObject:[pair objectForKey:@"name"]];
    [ids addObject:[pair objectForKey/@"id"]];
} 
```

最新版本的 iOS 包含一个新的 Foundation 类，`NSJSONSerialization`它将为您处理任何 JSON 解析和序列化。

# java - Android中的Java蓝牙应用程序

> ID：11752812
> 
> 赞同：0
> 
> 时间：2012-08-01T05:06:45.150
> 
> 标签：java, android, bluetooth

我开始为手机开发蓝牙应用程序。我的项目指南建议我们使用 Java 进行开发。我试图找出 Java 应用程序是否可以在 android 上运行。我读到只有用户界面不同。但在蓝牙的情况下，API 和连接是相同还是不同？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:13:26.533

是的，Java 是 Android 应用程序选择的主要语言。在您的特定蓝牙案例中，Android API 为所有内容提供了自己的类。[您可以在此处](http://developer.android.com/guide/topics/connectivity/bluetooth.html)找到完整的文档。

在特定于 Java 的 Android 开发方面，请查看[此链接](http://shop.oreilly.com/product/0636920001690.do)、[此](http://mobile.tutsplus.com/tutorials/android/java-tutorial/)链接或[许多其他](https://www.google.com/search?q=developing+java+android+apps)链接。

# android - 在android中远程擦除电子邮件

> ID：11752813
> 
> 赞同：0
> 
> 时间：2012-08-01T05:06:48.187
> 
> 标签：android, email, remote-access

我想在有/没有设备管理的情况下仅远程擦除电子邮件（不是恢复出厂设置）。可能吗？

注意：用户可以使用任何类型的邮件客户端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:39:16.407

After reading [docs](http://developer.android.com/guide/topics/admin/device-admin.html), and as my experiences, I think without a factory reset, you can't.

Unless the user is running under `root` account, you can find all other apps' data and wipe it. The hard part is *"any type of mail client"*. There will be some apps you don't know of. And maybe some apps store data internally (device's memory) or externally (SD card…).

In any case, without factory reset, Device Admin can't help you.

# c#-4.0 - EntitySqlException 未被用户代码处理？

> ID：11752815
> 
> 赞同：0
> 
> 时间：2012-08-01T05:06:50.820
> 
> 标签：c#-4.0, entity-framework-4.1

运行我的 c# 代码时出现上述错误：

```
'CategoryID' could not be resolved in the current scope or context. Make sure that all referenced variables are in scope, that required schemas are loaded, and that namespaces are referenced correctly. Near simple identifier, line 6, column 1. 
```

C＃

```
 public ActionResult Index()
        {
            foreach (Category category in GetCategories("", "CategoryID", "", 1, 10, 1))
            {
                //do something
            }

            return View();
        }

        public IQueryable<Category> GetCategories(string filterExpression, string sortExpression, string sortDirection, int pageIndex, int pageSize, int pagesCount)
        {
            NorthwindEntities db = new NorthwindEntities();
            if (!String.IsNullOrWhiteSpace(filterExpression))
                return db.Categories.OrderBy(sortExpression + " " + sortDirection).Skip(pageIndex * pageSize).Take(pageSize);
            else
                return db.Categories.OrderBy(sortExpression + " " + sortDirection).Skip(pageIndex * pageSize).Take(pagesCount * pageSize);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T08:26:22.843

当您使用 ESQL 时，您必须使用实体别名来访问属性。默认别名是`it`所以你必须使用`"it.CategoryID"`.

# iphone - Facebook Connect SSO 无法在某些 iPhone 上运行

> ID：11752817
> 
> 赞同：6
> 
> 时间：2012-08-01T05:07:00.857
> 
> 标签：iphone, ios, facebook, single-sign-on

`FBConnect`根据[本](https://developers.facebook.com/docs/mobile/ios/build/#sdk)教程，我已经在我的 iphone 应用程序中实现了 SSO。到目前为止，我已经在两部手机上对其进行了测试，其中一部让我可以很好地使用该功能，而另一部手机只是打开 Facebook 应用程序并立即关闭它。我能够建立一个有效的会话，但对话似乎只是在其中一个上关闭了我。
可能是什么问题呢？任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T14:48:02.587

我认为您的问题是您没有正确的配置，无论是在客户端（您的应用程序）还是在服务器端（FB 应用程序配置）。请检查以下两项：

**客户端应用：**

确保您已将正确的 FBAppId 作为 URL 处理程序引入 Info.plist。Facebook 将尝试使用此处理程序打开应用程序，如果它不起作用，您的应用程序将不会打开。

![列表配置](../Images/04ad5d10143397424cd0e88212d79540.png)

（替换为`XXXXXXXXXX`您的 FB appID）

检查您的应用（在 appDelegate 中）是否处理​​上面添加的自定义 URL：

```
- (BOOL)handleOpenURL:(NSURL*)url
{
    NSString* scheme = [url scheme];
    NSString* prefix = [NSString stringWithFormat:@"fb%@", facebookAppId];
    if ([scheme hasPrefix:prefix]) {
        return [fb handleOpenURL:url];
    }
    return YES;
}
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation 
{
    return [self handleOpenURL:url];
}

- (BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)url 
{
    return [self handleOpenURL:url];  
} 
```

**服务器端**

检查您是否在 FB 配置页面中正确配置了 bundleId。[您可以在https://developers.facebook.com/apps](https://developers.facebook.com/apps)中检查这一点，选择您的应用程序，然后在编辑面板中：

![FB 配置](../Images/d093b212c3c2aee0f58f7d38466328e0.png)

如果您正确配置了这两件事，它应该在任何情况下都可以工作（安装了 FBapp 或基于 Safari）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-03T20:18:04.100

我已经在 3.0 SDK 中看到了这一点。它发生的原因是因为 facebook 缓存访问令牌的方式。访问令牌缓存在您的应用程序和设备上的 facebook 应用程序中（至少在概念上）。

如果这是您第一次在设备上启动应用程序，facebook 将不会在您的应用程序中缓存有效的访问令牌。但是，它可能仍然在您的应用程序的 facebook 应用程序中具有有效的访问令牌。如果它在 facebook 端找到一个，那么它就不必再次询问用户，所以对话框出现，然后消失，并发回访问令牌。然后访问令牌缓存在您的应用程序中。

如果您重新启动您的应用程序（不删除它），您将根本看不到登录对话框，因为访问令牌现在已缓存在您的应用程序中。如果您在设备上删除您的应用并再次登录，您将看到相同的行为，只要 facebook 可以在其一侧找到缓存的令牌。

我找到了解决这个问题的方法。这是一些示例代码：

```
if (![FBSession activeSession].isOpen) {
    FBSession *session = [[FBSession alloc] initWithAppID:nil permissions:permissions defaultAudience:FBSessionDefaultAudienceEveryone urlSchemeSuffix:nil tokenCacheStrategy:nil];
    [FBSession setActiveSession:session];
    [session openWithBehavior:FBSessionLoginBehaviorUseSystemAccountIfPresent     completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
// NOTE openActiveSessionWithPermissions causes the facebook app to hang with a blank dialog if my app is installed, authed, and then reinstalled. openWithBehavior
// does not. I think it has something to do with the FBSession activeSession.
//        [FBSession openActiveSessionWithPermissions:self.permissions allowLoginUI:YES completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
        switch (status) {
            case FBSessionStateOpen:
                [self getFacebookUser];
                break;
            case FBSessionStateClosed:
                [self fbSessionClosed];
                break;
            case FBSessionStateCreated:
                [self fbSessionCreated];
                break;
            case FBSessionStateCreatedOpening:
                [self fbSessionOpening];
                break;
            case FBSessionStateClosedLoginFailed:
                [self fbSessionClosedLoginFailed];
                break;
            case FBSessionStateOpenTokenExtended:
                [self fbSessionOpenTokenExtended];
                break;
            case FBSessionStateCreatedTokenLoaded:
                [self fbSessionCreatedTokenLoaded];
                break;
        }
    }];
}
} 
```

openActiveSessionWithPermissions 会导致问题，但 openWithBehavior 不会。openActiveSession 进行相同的 openWithBehavior 调用，但我认为设置活动会话的时间不同，因此不起作用。如果我在调用 openWithBehavior 之前设置活动会话，一切似乎都正常。就您的应用程序和最终用户而言，一切都是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T19:21:41.897

您需要在整个代码中插入合适的日志记录，发布代码，并发布在工作和失败案例中生成的日志。

要制作日志（有关更高级的技术，请参见[此处）：](https://stackoverflow.com/questions/1667994/best-practices-for-error-logging-and-or-reporting-for-iphone/1711263#1711263)

```
NSLog(@"My log text"); 
```

至少，您需要在来自 Facebook API 的*所有*回调（甚至是您未使用的回调）以及应用程序委托的[handleOpenURL 和 openUrl](https://stackoverflow.com/questions/9852986/story-link-flow-using-sso-facebook-openurl-not-being-called)方法中添加日志。

当您连接您正在测试的设备时，您的日志将出现在 Xcode Organizer 的控制台中 - 这应该会告诉您正在发生的事情。

仅供参考，如果已安装，Facebook SDK 代码将首先尝试使用本机应用程序，否则它将启动 Safari 浏览器以通过网络版 Facebook 请求授权。

您应该仔细检查您的 Facebook URL 方案配置，如 Angel García Olloqui 的回答中所述。

# magento - Magento：在 top.phtml 中找到函数 renderCategoriesMenuHtml 的位置

> ID：11752827
> 
> 赞同：4
> 
> 时间：2012-08-01T05:08:25.563
> 
> 标签：magento, magento-1.5

/catalogue/navigation/top.phtml 的顶部导航模板文件只包含这个简短的函数：

```
<?php $_menu = $this->renderCategoriesMenuHtml(0,'level-top') ?>
<?php if($_menu): ?>
<div class="nav-container">
    <ul id="nav">
        <?php echo $_menu ?>   
        </ul>
</div>
<?php endif ?> 
```

我试图找到 renderCategoriesMenuHtml 函数，以便我可以进入并编辑在 top.phtml 中调用的 $_menu 结果的结构。

目的是我想稍微编辑菜单的结构。它目前出现在 HTML 中的 ul > li > a > ul > li > a > span 中，我想稍微编辑一下。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-01T05:30:34.653

命令

```
$ grep -i -r 'function renderCategoriesMenuHtml' * 
```

返回

```
app/code/core/Mage/Catalog/Block/Navigation.php 
```

其中包含

```
public function renderCategoriesMenuHtml($level = 0, $outermostItemClass = '', $childrenWrapClass = '')
... 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-01T08:08:11.650

作为替代方案，对于那些不太熟悉的人`grep`，这个文件也有一个 PHPDoc 注释：

```
<?php
/**
 * Top menu for store
 *
 * @see Mage_Catalog_Block_Navigation
 */
?> 
```

如您所见，它说明`$this`了该文件中引用了哪个类，您将在其中找到您正在寻找的方法。

高温高压

# sencha-touch - sencha touch 的一个面板内有 2 个列表

> ID：11752830
> 
> 赞同：0
> 
> 时间：2012-08-01T05:08:37.923
> 
> 标签：sencha-touch, extjs, sencha-touch-2

如何在 sencha touch 2 的一个面板中拥有 2 个列表？如果我使用，我可以看到第一个列表

```
layout:'card' 
```

我试过了 ：

```
 layout: {
       type: 'vbox',
       align: 'stretch'
    } 
```

请让我知道如何在同一个面板中有 2 个列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T21:38:41.767

您需要在每个列表中使用[flex 配置。](http://docs.sencha.com/touch/2-0/#!/api/Ext.Component-cfg-flex)

你可以在这里看到下面的例子：[Sencha Fiddle](http://www.senchafiddle.com/#Fc0Vn#2E9R2)

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:55:43.947

在其中创建具有 vbox 布局的面板创建两个具有适合布局的面板并将每个列表放入相应的面板中

试试这个方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T19:28:30.963

嗨@Akshatha，你可以在你的`Ext.Panel`,

```
...
layout: {
     type: 'hbox',
     align: 'stretch'
 },
 items: [
     {
      xtype: 'list',
      width: '40%',
      flex: 1,
      styleHtmlContent: true,
      ...
     },
     {
      xtype: 'list',
      width: '60%',
      flex: 0.5,
      styleHtmlContent: true,
      ...
     },
 ]
 ... 
```

您可以定义`width`of`Panel`并且您拥有`Ext.List`。

我希望能帮助你。:)

# yii - 使用 Yii 框架的注册表单

> ID：11752837
> 
> 赞同：4
> 
> 时间：2012-08-01T05:08:53.957
> 
> 标签：yii, registration

我是 Yii 框架的新手。我想用 Yii 实现一个注册表单。我在其演示项目上查看了博客项目，但它没有注册表单。有谁知道关于这个问题的教程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-11-01T11:52:52.807

对于注册系统。

您应该按照这些步骤操作。

1.  首先，您根据需要创建表用户/注册/注册。
2.  现在为此创建 CRUD，以便您可以轻松地将数据插入用户表中。

我有一个表，它有五个不同的字段，即 id、name、conatct_no、email、password

1.  现在您在视图中创建一个文件夹，命名为“register”。
2.  鉴于您刚刚制作了一个文件 index.php 和 register.php
3.  register.php 是您的表单。你可以做的。

注册.php

```
<h2>Registration Form</h2>
<div class="form">
<?php echo CHtml::beginForm(); ?>

    <?php echo CHtml::errorSummary($model); ?>

    <div class="row">
        <?php echo CHtml::activeLabel($model,'Name'); ?>
        <?php echo CHtml::activeTextField($model,'name') ?>
    </div>

    <div class="row">
        <?php echo CHtml::activeLabel($model,'Contact Number'); ?>
        <?php echo CHtml::activeTextField($model,'contact_no') ?>
    </div>

    <div class="row">
        <?php echo CHtml::activeLabel($model,'email'); ?>
        <?php echo CHtml::activeTextField($model,'email') ?>
    </div>

    <div class="row">
        <?php echo CHtml::activeLabel($model,'password'); ?>
        <?php echo CHtml::activePasswordField($model,'password') ?>
    </div>

    <div class="row">
        <?php echo CHtml::activeLabel($model,'Retype Password'); ?>
        <?php echo CHtml::activePasswordField($model,'retypepassword') ?>
    </div>

    <div class="row submit">
        <?php echo CHtml::submitButton('Register'); ?>
    </div>

    <?php echo CHtml::endForm(); ?>
</div><!-- form --> 
```

1.  现在您需要一个用于注册的控制器文件，即 registerController.php。

注册控制器.php

```
class registerController extends Controller
{
  public  function actionIndex() {
    $this->render('index');
  }

  public function actionRegister() {
    $model   = new RegisterForm ;
    $newUser = new User;

if(isset($_POST['RegisterForm'])) {
      $model->attributes = $_POST['RegisterForm'];
      if($model->validate()) {
      $newUser->name = $model->name ;
      $newUser->contact_no = $model->contact_no;
      $newUser->email = $model->email;
      $newUser->password = $model->password;
      if($newUser->save()) {
       $this->_identity = new UserIdentity($newUser->email,$newUser->password);
        if($this->_identity->authenticate())
         Yii::app()->user->login($this->_identity);
         $this->redirect(Yii::app()->user->returnUrl);
        }
      }
    }
$this->render('register',array('model'=>$model));
  }
} 
```

1.  现在您需要一个模型文件来进行验证。注册表格.php

    类 RegisterForm 扩展 CFormModel { public $contact_no ; 公共 $name ; 公共$电子邮件；公共$密码; 公共$重新输入密码；

    公共函数表名（）{返回“用户”；}

    public function rules() { return array(array('name, contact_no, email, password, retypepassword', 'required'), array('name, email, password, retypepassword', 'length', 'max'=>200 ), array('email', 'email', 'message'=>'请插入有效的电子邮件'), array('contact_no', 'length', 'max'=>30), array('retypepassword', ' required', 'on'=>'Register'), array('password', 'compare', 'compareAttribute'=>'retypepassword'), array('id, name, contact_no, email', 'safe', ' on'=>'搜索'), ); } }

您还需要更改受保护/组件目录中的 UserIdentity.php 文件。

```
class UserIdentity extends CUserIdentity
{
  private $_id ;

  public function authenticate()
  {
    $email = strtolower($this->username);
    $user = User::model()->find('LOWER(email)=?',array($email));
    if($user === null)
     $this->errorCode = self::ERROR_USERNAME_INVALID ;
    else if(!$user->password === $this->password)
     $this->errorCode = self::ERROR_PASSWORD_INVALID ;
    else {
     $this->_id = $user->id ;
     $this->username = $user->email ;
     $this->errorCode = self::ERROR_NONE ;
    }
     return $this->errorCode == self::ERROR_NONE ;
     return !$this->errorCode;
   }

   public function getId() {
    return $this->_id ;
   }    
} 
```

而已。

这是一个完整的注册表设置，我自己做了。

如果您是第一个计时器，那么您需要了解控制器如何工作以及控制器如何与视图和模型交互。如果您已经熟悉它，那么您可以轻松地使用自己的注册系统。

这是帮助您理解 yii 的链接。

[http://www.yiiframework.com/screencasts/](http://www.yiiframework.com/screencasts/)

谢谢。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-02T03:56:11.217

首先，为用户创建一个表。使用 gii 基于此表生成用户模型和控制器，并根据自己的喜好调整代码。在 User 控制器内部创建一个函数来处理注册：

```
function actionRegister() {
    $model = new User('register');

    // collect user input data
    if(isset($_POST['User']))
    {
        $model->attributes=$_POST['User'];

        // validate user input and redirect to the previous page if valid
        $model->setAttributes(array(
            'datereg' => time(), //additional data you want to insert
            'lastlogin' => time() //additional

        ));

        if($model->save())
        {
                           //optional 
            $login=new LoginForm;
            $login->username = $_POST['User']['username'];
            $login->password = $_POST['User']['password'];
            if($login->validate() && $login->login())
                $this->redirect('/pages/welcome');
        }

    }
    else
       // display the registration form
       $this->render('register',array('model'=>$model));
    } 
```

您必须有一个有效的视图文件 (register.php)

```
$login=new LoginForm;
$login->username = $_POST['User']['username'];
$login->password = $_POST['User']['password'];
if($login->validate() && $login->login())
$this->redirect('/pages/welcome'); 
```

此代码块“验证”用户并在成功注册后立即登录。它使用 CUserIdentity。$login->login() 对密码进行哈希处理。

此外，在将数据插入表之前，您必须有类似的东西来处理数据

```
 public function beforeSave() {

    if(parent::beforeSave() && $this->isNewRecord) {

        $this->password = md5($this->password);

    }

    return true;
} 
```

在控制器内部散列密码也可以。但是我想在 Model 类中做所有与数据库相关的事情。

你可能注意到我没有在这里调用 $model-validate() 。这是因为 $model->save() 也调用了验证方法。更多信息：[http ://www.yiiframework.com/doc/api/1.1/CActiveRecord#save-detail](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#save-detail)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T05:18:17.867

使用 CActiveForm 用 yii 创建表单很容易。

这是 yii 文档的链接 :: [Yii CActiveForm](http://www.yiiframework.com/doc/api/1.1/CActiveForm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T06:47:18.903

*   您必须使用 CAvtiveForm 创建注册表单（例如，请参阅 LoginForm）。
*   创建您的用户模型。
*   创建控制器：

    ```
    class UsersController extends Controller
    {
         public function actionSignup()
         {
            $model = new RegistrationForm;

            if (isset($_POST['RegistrationForm'])) {
                 if ($model->validate()) {
                     $user = new Users;
                     $user->populateRecord($form->attributes);
                     $user->save();
                     $this->redirect(Yii::app()->createUrl('/'));
                 }
            }

            $this->render('signup', array('model' => $model));
         }
     } 
    ```

# qt4 - 在 QProcess 中执行 Shell 脚本时如何更新 QprogressBar？

> ID：11752839
> 
> 赞同：0
> 
> 时间：2012-08-01T05:08:54.207
> 
> 标签：qt4

我正在开发一个应用程序来将文件从 NFS 服务器下载到我的电脑。为了完成我的任务，我编写了一个 Shell 脚本来复制给定路径的所有目录并使用 QProcess 执行脚本。QProcess 工作正常并下载所有目录。

现在，我想在 QProgressBar 上显示下载过程报告。（与我们在从 Internet 下载文件时在 Windows 上看到的相同）。

我尝试了谷歌搜索并使用信号找到了一些想法并尝试如下：

```
void NfsClient::NfsDownload()
{
    download = new QProcess(this);
    connect(download, SIGNAL(readyReadStandardOutput()), this, SLOT(displayProgressBar()) );
    download->execute("bash /home/samurai/NfsFileDownload.sh");
}

void NfsClient::displayProgressBar()
{
    ui->progressbar->setvalue(download->readAll().toInt());
} 
```

但是这个 readyReadStandardOutput() 信号永远不会发出。我的 Qt 窗口在执行脚本时冻结。并且进度条保持不变。:(

有没有办法相应地更新 QProgressbar ？？？或任何想法显示下载过程的 GUI 视图？？？

任何建议/想法？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T06:46:30.777

我通过删除 Shell 脚本概念并实现 QDir 类来解决它。

因为，要访问 NFS 服务器，客户端必须将服务器目录挂载到其一侧的文件夹之一。因此，为了从本地文件夹复制，最好使用内置的 Qt 类 QDir 进行复制、删除、上传功能。

# iphone - 以（后缀）结尾并包含在 SQLite FTS 中使用 MATCH 进行的字符串搜索

> ID：11752840
> 
> 赞同：11
> 
> 时间：2012-08-01T05:08:57.390
> 
> 标签：iphone, ios, sqlite, fts3

我在我的 iOS 应用程序中使用 SQLite FTS 扩展。它表现良好，但问题是它只匹配字符串前缀（或以关键字搜索开头）。

IE

这有效：

```
SELECT FROM tablename WHERE columnname MATCH 'searchterm*' 
```

但以下两个没有：

```
SELECT FROM tablename WHERE columnname MATCH '*searchterm'

SELECT FROM tablename WHERE columnname MATCH '\*searchterm\*' 
```

是否有任何解决方法或任何方式使用 FTS 构建类似于查询的`LIKE '%searchterm%'`查询。

编辑：

正如 Retterdesdialogs 所指出的，以相反的顺序存储整个文本并对反向字符串运行前缀搜索是解决以/后缀搜索问题结尾的可能解决方案，这是我最初的问题，但它不适用于“包含”搜索。我已经相应地更新了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-20T18:29:09.273

在我的 iOS 和 Android 应用程序中，我回避 FTS 搜索的确切原因是由于缺少后缀查询，它不支持子字符串匹配。

解决方法似乎很复杂。

我求助于使用 LIKE 查询，虽然性能不如 MATCH，但可以满足我的需求。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T10:40:57.193

解决方法是将反向字符串存储在额外的列中。请参阅此链接（它不完全相同，它应该给出一个想法）：

[使用全文搜索搜索后缀](http://www.sqlhelpline.com/2009/05/search-suffix-using-full-text-search-in.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-03T17:00:48.997

要使其适用于包含查询，您需要存储您希望能够搜索的术语的所有后缀。这有使数据库变得非常大的缺点，但可以通过压缩数据来避免。

[SQLite FTS 包含和后缀匹配](http://blog.kapeli.com/sqlite-fts-contains-and-suffix-matches)

# php - PHP strtotime EST来回转换

> ID：11752841
> 
> 赞同：1
> 
> 时间：2012-08-01T05:08:59.980
> 
> 标签：php, datetime, date, strtotime

对于 EST 时间，我设置了：

```
date_default_timezone_set("America/New_York"); 
```

随着页面加载，我通过以下方式获得 EST 时间：

```
$time = time(); 
```

问题是当我在时间戳和日期时间格式之间来回转换字符串时：

```
10/31/2012 7:30pm 1351729800 | 10/31/2012, 8:30 pm
11/2/2012 7:30pm 1351902600 | 11/02/2012, 8:30 pm
11/3/2012 8:00pm 1351990800 | 11/03/2012, 9:00 pm
11/7/2012 8:00pm 1352336400 | 11/07/2012, 8:00 pm
11/9/2012 8:00pm 1352509200 | 11/09/2012, 8:00 pm
11/10/2012 8:00pm 1352595600 | 11/10/2012, 8:00 pm 
```

我希望这些日期和时间是相同的。

第一部分（“|”之前）是简单的字符串，例如“10/31/2012 7:30pm”和 strtotime(“10/31/2012 7:30pm EST”)。

部分（“|”之后）是前一个 strtotime() 值的 date()。

如何将字符串转换为时间 (strtotime) 并仔细检查返回的日期格式是否与输入的字符串相同？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T05:46:26.423

我想说这是因为目前纽约处于夏令时 - EDT 而不是 EST。这会影响这样的事情：

```
date_default_timezone_set("America/New_York");
strtotime("10/31/2012 7:30pm"); // translates to "Wed, 31 Oct 2012 19:30:00 -0400"
strtotime("10/31/2012 7:30pm EDT"); // translates to "Wed, 31 Oct 2012 19:30:00 -0400"
strtotime("10/31/2012 7:30pm EST"); // translates to "Wed, 31 Oct 2012 20:30:00 -0400" 
```

快速修复可能是不将时区添加到字符串中，`strtotime()`将使用您设置的正确默认时区。

您可以使用以下函数更准确地了解您的日期是如何解析的`DateTime` [`createFromFormat`](http://au2.php.net/manual/en/datetime.createfromformat.php)：

```
$date = DateTime::createFromFormat('m/d/Y g:ia', "10/31/2012 7:30pm");
echo $date->format('U'); 
```

或者，如果您等到 11 月，问题将自行解决:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T04:14:42.840

有时您需要在 PHP 脚本中设置并忘记时间，而迁移到新服务器可能会改变您的辛勤工作。如果您正在使用字符串到时间进行日期，例如将您的时区代码添加到您的字符串中，例如带有夏令时的 New Yourk：'EDT'

`echo date('g:i a',strtotime('10:59 EDT'));// 10:59 am`

或者，如果您想提取特定时间的秒数，比如说晚上 10:59，请使用以下内容：

`echo gmdate('g:i a',strtotime('January 1 1970 10:59pm GMT'));//82740 seconds //converted to 10:59pm`

后者将以秒为单位为您提供 (12+10 小时(*60) 和 59 分钟)*60，并且 gmdate 函数将从您传递给函数的任何秒数中回显 GMT 时间。如果您尝试使用 date 代替，您将，除非您居住在 GMT 时区（格林威治标准时间），否则很可能不会得到 10:59。

这个时区的东西可能会变得非常混乱，所以在制定非常具体的计划时要非常小心并搞砸它……比如将某人的时间转换为你的时间等等。

# sketchflow - 在草图流中单击按钮时如何显示子窗口？

> ID：11752847
> 
> 赞同：0
> 
> 时间：2012-08-01T05:09:24.107
> 
> 标签：sketchflow

在草图流中单击按钮时如何显示子窗口？

我知道如何在 C#/Java/C++ 中执行此操作，但不确定如何在草图流中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:03:28.243

SketchFlow 可以使用 C#，所以如果你知道如何在那里做，你应该做好准备。

# java - 在 Java Web 应用程序中使用可配置属性

> ID：11752853
> 
> 赞同：1
> 
> 时间：2012-08-01T05:10:31.127
> 
> 标签：java, jakarta-ee, configuration

我在 Tomcat 6 上部署了一个基于 Java 的 Web 应用程序。我需要将一些属性设置为可配置的。目前我已经创建了一个 config.properties 文件并将该文件加载到静态 Properties 对象中。

我想知道是否有任何其他有效的方法或框架可以在 Java Web 应用程序中使用可配置属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:17:36.117

您可能拥有的另一种选择是创建一个类，其中定义了项目的所有常量。这将为您提供一种集中方式，您可以在其中有效且高效地配置您的应用程序。

然而话虽如此，我认为使用配置文件是最好的选择，因为（我不认为）每次更改后都必须重新编译代码。

编辑：看到上面的一些评论，你可以做的是在你的数据库中有一个单独的表，你可以在其中存储所有常量。然后，您可以通过后端 Web 界面将此表提供给系统管理员和其他支持人员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:39:36.643

试试这个样本；

这是放在 com.package 中的示例 Resource.properties 文件；

```
 name=John
     email=john@company.com
     description=John is a Java software developer 
```

访问喜欢这样；

```
 private static final String PROPERTIES_FILE = "com/package/Resource.properties";

     Properties properties = new Properties();  
     properties.load(this.getClass().getResourceAsStream(PROPERTIES_FILE));  
     String name = props.getProperty("name");  
     String email = props.getProperty("email");  
     String description = props.getProperty("description"); 
```

使用可配置属性的另一个框架是[JSF](http://www.oracle.com/technetwork/java/javaee/javaserverfaces-139869.html)。这个[示例](http://www.mkyong.com/jsf2/jsf-2-0-and-resource-bundles-example/)是 JSF 中属性的用法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T06:59:06.947

企业级的答案是通过像**Spring**这样的集成框架加载您的配置。不过，如果您的应用程序相当小，我不一定会推荐它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T07:19:19.000

使用 Spring Framework 加载属性：

```
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="location" value="classpath:configuration.properties"></property>
    </bean>

    <!-- Here is configutaion for connection pool -->
    <!-- Those ${} properties are from the configuration.properties file -->
    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="${db.driver}"/>
        <property name="url" value="${db.url}"/>
        <property name="username" value="${db.user}"/>
        <property name="password" value="${db.pass}"/>
    </bean>

</beans> 
```

# c++ - C ++中连续内存的含义是什么？

> ID：11752857
> 
> 赞同：7
> 
> 时间：2012-08-01T05:10:54.527
> 
> 标签：c++, memory

C ++中连续内存的含义是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-01T05:14:01.953

这意味着内存被分配为单个块。这在谈论容器时最常使用。

例如，`vector`and`string`类使用一块连续的内存。这意味着如果您有一个包含`int`元素`123`, `456`,的向量`789`，那么您可以放心，如果您获得指向向量第一个元素的指针，通过递增该指针，您将访问第二个元素 (456)，并通过再次增加它，您将访问最后一个元素（789）。

```
std::vector<int> vec = {123, 456, 789};

int* ptr = &vec[0];
*ptr++ == 123; // is true
*ptr++ == 456; // is true
*ptr++ == 789; // is true 
```

另一方面，双端队列类不保证连续存储。这意味着，如果您有一个包含相同元素（123、456、789）的双端队列，并且您获得了指向第一个元素的指针，**则无法**确定您是否会通过递增指针来访问第二个元素，或者第三个通过再次增加它。

```
std::deque<int> deque = {123, 456, 789};

int* ptr = &deque[0];
*ptr++ == 132; // true
*ptr++ == 456; // not necessarily true and potentially dangerous
*ptr++ == 789; // not necessarily true and potentially dangerous 
```

非连续数据结构的另一个例子是链表。对于链表，增加头指针可以返回第二个元素几乎是不可想象的。

假设您使用 C++ 良好实践（例如尽可能多地使用迭代器而不是指针），这很少相关，因为它允许集合管理它们如何存储它们的项目，而不必担心它们是如何做到的。通常，如果必须从 C++ 代码调用 C 代码，则需要内存是连续的，因为大多数 C 函数都设计为使用连续内存，因为这是最简单的方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T05:19:57.190

如果你写下面的语句

```
int arr[3]; 
```

那么您将保留 3 个连续的整数类型的内存单元。所以如果我们说整数在内存中保留4个字节，第一个内存单元的地址是1000，那么

arr[0]在内存中的地址是1000

arr[1]在内存中的地址是1004

arr[2]在内存中的地址是1008

它们是连续的，一个接一个。但如果你只是写

```
int a,b,c; 
```

您正在保留不连续的内存单元。所以“a”的地址可能远离b和c。例如

a在内存中的地址是1000

b在内存中的地址是2014

c在内存中的地址是2234

它们不是连续的。就这样

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-01T05:29:21.467

首先，连续内存是指分配的一块内存，其占用的地址没有任何间隙。这将是一个单一的内存“块”。

C++ 中的连续内存意味着在 C++ 中分配连续内存的各种方式。一种简单的方法是 C 中的数组

`int a[10]`

`std::vector`和(C++11)之类的 STL 容器`std::array`也会分配连续内存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-20T05:32:44.053

Continuous Memory的意思是连续记忆。当保留或分配大块内存时，该内存块称为连续内存块。

# ios - iOS GLKit 后期处理？

> ID：11752859
> 
> 赞同：1
> 
> 时间：2012-08-01T05:11:06.120
> 
> 标签：ios, opengl-es, glkit

我有一个使用 glKit 运行的游戏，并且想在每帧渲染后使用着色器添加一些后期处理效果。

是否可以在 glKit 下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T05:33:00.530

这个有可能。

您将需要创建自己的屏幕外帧缓冲区对象和关联的纹理。然后调用 [GLKView bindDrawable] 将进一步渲染指向 GLKView 的帧缓冲区。然后，您可以执行更多渲染，包括从您之前渲染到的纹理中读取。

帧缓冲区 API 是所有标准的 OpenGL ES 调用，您可以在任何 OpenGL ES 2.0 书籍中阅读。Apple 在[http://developer.apple.com/library/ios/ipad/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/也有一些 iOS 特定的文档](http://developer.apple.com/library/ios/ipad/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/)

# html - 将表单中的某些字段设为只读

> ID：11752861
> 
> 赞同：0
> 
> 时间：2012-08-01T05:11:23.627
> 
> 标签：html, django, django-forms

我想让表单中的某些字段只读而其他可编辑。我用 HTML 读过这个（[只读](http://www.w3schools.com/html5/att_input_readonly.asp)）

```
<form action="demo_form.asp">
Country: <input type="text" name="country" value="Norway" readonly="readonly" /><br />
<input type="submit" value="Submit" />
</form> 
```

此示例特别说明了可编辑的字段。但我正在使用 Django 表单。我无法具体执行此操作，因为该字段源自models.py。

在使字段只读方面我有哪些选择？需要一些建议和指导...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T06:21:20.583

创建表单时，为您的字段添加一个额外的参数以添加只读属性：

```
name = forms.CharField(widget=forms.TextInput(attrs={'readonly':'readonly'})) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:14:24.463

你可以使用jQuery来添加属性吗？

```
$('.inputClass').prop("readonly", true); 
```

# wicket-1.5 - wicket 1.5.7 中的 newSessionStore 等价物是什么？

> ID：11752863
> 
> 赞同：1
> 
> 时间：2012-08-01T05:11:51.973
> 
> 标签：wicket-1.5

从 wicket 1.5 中删除了 newSessionStore() 方法。

```
@Override
protected ISessionStore newSessionStore()
{
 return new HttpSessionStore(this);
} 
```

这种方法在 1.5 中的等价物是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:03:04.180

根据[迁移指南](https://cwiki.apache.org/WICKET/migration-to-wicket-15.html)，Wicket 1.5 中没有等价物。仅支持 HttpSessionStore

# magento - 在magento中每30秒更新一次产品价格

> ID：11752871
> 
> 赞同：0
> 
> 时间：2012-08-01T05:12:31.617
> 
> 标签：magento, product

我必须每 30 秒更新一次产品价格，例如[http://www.bullionbypost.co.uk/](http://www.bullionbypost.co.uk/)和[http://www.coininvestdirect.com/en/](http://www.coininvestdirect.com/en/)。我只是对他们在上述网站上的表现感到困惑。我是 magento 的新手。请任何人建议我

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T00:24:41.403

首先，使用 Magento CRON 进行不到一分钟的调度是不可能的；因此，如果 30 秒更新至关重要，您将不得不使用另一种方法 - 或重新考虑使用 Magento。我建议使用 AJAX 更新产品页面上的定价，并使用网络服务在添加产品时获取价格。您必须利用观察者来更新添加的价格。

如果您要对产品使用自定义定价，您将无法利用定价索引 - 您必须在产品报价项目上使用`setCustomPrice`和`setIsSuperMode`方法 - 再次，为此使用观察者。有关更多详细信息，请参阅以下两篇堆栈文章 - 它们确实适用于 CE 1.6、1.7 和 EE 1.10、1.11。

[以编程方式将产品添加到购物车并更改价格](https://stackoverflow.com/questions/5104482/programmatically-add-product-to-cart-with-price-change)

[Magento 产品的自定义价格规则](https://stackoverflow.com/questions/7806136/magento-custom-price-rules-for-product)

# objective-c - 为什么这个 ViewController 会使我的代码崩溃？

> ID：11752873
> 
> 赞同：0
> 
> 时间：2012-08-01T05:12:36.447
> 
> 标签：objective-c, uiviewcontroller, linker-errors, mach-o

我在网上找到了这个[颜色选择器](http://code.google.com/p/iphone-color-picker/ "iOS 颜色选择器")，我目前正在尝试将它实现到我的代码中。我按照所有说明来实现它，但是当我尝试加载代码附带的 ViewController 时（使用 UITableView 单元格），当我尝试构建和/或运行代码时出现 Apple Mach-o Linker Error 说：

> 架构 armv7 的未定义符号：“_OBJC_CLASS_$_ColorPickerViewController”，引用自：ClockSettingsViewController.o ld 中的 objc-class-ref：未找到架构 armv7 的符号

我所做的只是在崩溃点将视图加载到层次结构中（下一行是我呈现视图的那一行）。我在xcode中分别构建了每个部分，发现这行代码是错误的来源：

```
 ColorPickerViewController *colorView = [[ColorPickerViewController alloc] init]; 
```

代码就在这里：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    if (indexPath.row == 0) {
        ColorPickerViewController *colorView = [[ColorPickerViewController alloc] init];
        [self presentViewController:colorView animated:YES completion:nil];
    }
} 
```

我已经用这种方法打开视图数百次了（事实上，这是我用过的唯一方法），所以我知道它不可能是代码本身，我到处检查并导入了我需要的所有内容. 出了什么问题，错误是什么意思，所以我可以在将来修复它。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:18:10.667

转到您的 Project->Targets 并在 Build Phases 选项卡上，确保该文件`ColorPickerViewController.m`已添加到 Compile Sources 文件列表中。

![在此处输入图像描述](../Images/22e36271cba00b67d91664892063b884.png)

# android - 如何将customObject绑定到android中的微调器？

> ID：11752875
> 
> 赞同：0
> 
> 时间：2012-08-01T05:12:50.913
> 
> 标签：android, android-widget

我将微调器与对象绑定，但微调器填充了错误的值，例如 (com.adroit.test1.test@444..)

我的代码有什么问题，任何帮助将不胜感激

```
 JSONArray jsonarrayCountry=JSONFunction.getJSONCountry();  
        JSONObject jsonCountry=null;
        String[] arrayCounrty = new String[jsonarrayCountry.length()];
        //ArrayList<String> arrayCategary;
        try {
            for(int i=0;i< jsonarrayCountry.length();i++)
            {
                jsonCountry=jsonarrayCountry.getJSONObject(i);
                arrayCounrty[i]=jsonCountry.getString("Name");
                eexit item=new eexit();  
                item.setName(jsonCountry.getString("Name"));
                item.setId(Integer.parseInt(jsonCountry.getString("CountryID")));
                listCountry.add(item);  

                System.out.println("arrayCounrty::"+arrayCounrty[i]);
            }

        } catch (Exception e) {
            // TODO: handle exception
        }  

        ArrayAdapter<eexit> selcountryadapter = new ArrayAdapter<eexit>(this,           android.R.layout.simple_spinner_item, listCountry);

        selCountry.setAdapter(selcountryadapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:25:04.873

您应该在自定义类中实现 toString() 方法。

# sed - awk，sed：一个用于从给定文件夹中的_all_文件名中删除空格的线性命令？

> ID：11752878
> 
> 赞同：8
> 
> 时间：2012-08-01T05:13:13.157
> 
> 标签：sed, awk, command

前：

```
eng-vshakya:scripts vshakya$ ls
American Samoa.png                  Faroe Islands.png                   Saint Barthelemy.png 
```

后：

```
eng-vshakya:scripts vshakya$ ls
AmericanSamoa.png                   FaroeIslands.png                    SaintBarthelemy.png 
```

在原型下面尝试过，但它不起作用 :( 抱歉，在 awk/sed 方面不是很好 :(

```
ls *.png | sed 's/\ /\\\ /g' | awk '{print("mv "$1" "$1)}' 
```

[以上是原型，我猜真正的命令是：

```
ls *.png | sed 's/\ /\\\ /g' | awk '{print("mv "$1" "$1)}' | sed 's/\ //g' 
```

]

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-01T05:20:53.390

当您可以在纯 bash 中执行此操作时，无需使用 awk 或 sed。

```
[ghoti@pc ~/tmp1]$ ls -l
total 2
-rw-r--r--  1 ghoti  wheel  0 Aug  1 01:19 American Samoa.png
-rw-r--r--  1 ghoti  wheel  0 Aug  1 01:19 Faroe Islands.png
-rw-r--r--  1 ghoti  wheel  0 Aug  1 01:19 Saint Barthelemy.png
[ghoti@pc ~/tmp1]$ for name in *\ *; do mv -v "$name" "${name// /}"; done
American Samoa.png -> AmericanSamoa.png
Faroe Islands.png -> FaroeIslands.png
Saint Barthelemy.png -> SaintBarthelemy.png
[ghoti@pc ~/tmp1]$ 
```

请注意，`${foo/ /}`符号是**bash**，并且在经典的 Bourne shell 中不起作用。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-01T12:37:59.427

ghoti 的解决方案是正确的做法。既然你问如何在 sed 中做到这一点，这里有一种方法：

```
for file in *; do newfile=$( echo "$file" | tr -d \\n | sed 's/ //g' );
   test "$file" != "$newfile" && mv "$file" "$newfile"; done 
```

用于删除文件名中的`tr`换行符，并且有必要确保 sed 在一行中看到整个文件名。

# mysql - ERROR 1093 (HY000): 您不能在 FROM 子句中指定要更新的目标表

> ID：11752880
> 
> 赞同：1
> 
> 时间：2012-08-01T05:13:22.863
> 
> 标签：mysql, mysql-error-1093

我尝试了以下查询：

```
mysql> INSERT INTO tm_visitor (VDT,VID, NAME, CONTACT) values(REPLACE(LE
FT(NOW(), 10), '-', ''),(SELECT LPAD(COALESCE(MAX(VID) + 1, 000001), 6, '0') FRO
M tm_visitor),'yatin','9876543120'); 
```

但我收到以下错误。

> ERROR 1093 (HY000): You can't specify target table 'tm_visitor' for update in FROM 子句`

出了什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:17:34.160

```
INSERT INTO tm_visitor (VDT,VID, NAME, CONTACT) 
SELECT REPLACE(LEFT(NOW(), 10), '-', ''), 
   LPAD(COALESCE(MAX(VID) + 1, 000001), 6, '0'), 
   'yatin','9876543120' 
FROM tm_visitor 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-22T16:57:18.010

从[手册](https://dev.mysql.com/doc/refman/5.0/en/subquery-errors.html) ：

> 此错误发生在 [...] 尝试修改表并从子查询中的同一表中进行选择的情况下

# objective-c - 多对多关系之间的核心数据结构

> ID：11752883
> 
> 赞同：0
> 
> 时间：2012-08-01T05:13:43.970
> 
> 标签：objective-c, ios, xcode, core-data

> **可能重复：**
> [每个核心数据关系都必须有一个逆向关系吗？](https://stackoverflow.com/questions/764125/does-every-core-data-relationship-have-to-have-an-inverse)

我正在关注[Ray Wenderlich 的核心数据教程](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)。

在他的示例中，他设置了两个实体并在它们之间创建了一对一的关系。然后他说：

> Apple 建议，每当您创建从一个对象到另一个对象的链接时，您也可以创建从另一个对象返回的链接。

我的问题是，如果我创建与 EntityB 具有一对多关系的 EntityA，我是否需要从 EntityB 链接回 EntityA？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:21:14.030

好吧，我有点脑子放屁，但我找到了答案。

答案是肯定的！您必须设置一个返回的链接（反向）。

这是我的模型在设置链接之前的样子：

![在此处输入图像描述](../Images/cf99502ccb55267e9456fef975a7155a.png)

重新设置链接后，它看起来更干净了：

![在此处输入图像描述](../Images/9197caee4321e02d851ca6ce421a4572.png)

如果其他人遇到同样的问题，检查器设置如下所示：

![在此处输入图像描述](../Images/7e7e8d3051ea756e24d1d4650b25695d.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:23:45.177

是的，为了数据完整性，您的所有关系都应该具有反向关系。

# objective-c - 垂直拼接/合成多张图像并保存为一张图像（iOS，objective-c）

> ID：11752885
> 
> 赞同：11
> 
> 时间：2012-08-01T05:13:53.030
> 
> 标签：objective-c, ios, xcode, image

我需要帮助编写一个objective-c函数，该函数将接收一组UIImages/PNG，并返回/保存所有垂直拼接在一起的图像的一个高图像。我是新手，所以请放慢脚步，放轻松:)

到目前为止我的想法：绘制一个 UIView，然后将Subviews 添加到每个人的父级（图像），然后 ???

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-02-06T21:33:49.877

下面是 Swift 3 和 Swift 2 将图像垂直或水平拼接在一起的示例。它们使用调用者提供的数组中最大图像的尺寸来确定每个单独的帧使用的通用尺寸，每个单独的图像被缝合到其中。

*注意：Swift 3 示例保留了每个图像的纵横比，而 Swift 2 示例没有。请参阅下面的内联注释。*

**更新：添加了 Swift 3 示例**

**斯威夫特 3：**

```
import UIKit
import AVFoundation

func stitchImages(images: [UIImage], isVertical: Bool) -> UIImage {
    var stitchedImages : UIImage!
    if images.count > 0 {
        var maxWidth = CGFloat(0), maxHeight = CGFloat(0)
        for image in images {
            if image.size.width > maxWidth {
                maxWidth = image.size.width
            }
            if image.size.height > maxHeight {
                maxHeight = image.size.height
            }
        }
        var totalSize : CGSize
        let maxSize = CGSize(width: maxWidth, height: maxHeight)
        if isVertical {
            totalSize = CGSize(width: maxSize.width, height: maxSize.height * (CGFloat)(images.count))
        } else {
            totalSize = CGSize(width: maxSize.width  * (CGFloat)(images.count), height:  maxSize.height)
        }
        UIGraphicsBeginImageContext(totalSize)
        for image in images {
            let offset = (CGFloat)(images.index(of: image)!)
            let rect =  AVMakeRect(aspectRatio: image.size, insideRect: isVertical ?
                            CGRect(x: 0, y: maxSize.height * offset, width: maxSize.width, height: maxSize.height) :
                            CGRect(x: maxSize.width * offset, y: 0, width: maxSize.width, height: maxSize.height))
            image.draw(in: rect)
        }
        stitchedImages = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
    }
    return stitchedImages
} 
```

> ^(注意：下面的原始 Swift 2 示例*不*保留纵横比（例如，在 Swift 2 示例中，所有图像都被扩展以适合表示图像宽度和高度极值的边界框，因此任何非方形图像可以在其中一个维度上不成比例地拉伸）。如果您使用的是 Swift 2 并希望保留纵横比，请使用`AVMakeRect()` Swift 3 示例中的修改。由于我不再可以访问 Swift 2 游乐场并且无法对其进行测试以确保没有错误，因此我不会在此处更新 Swift 2 示例。)

**Swift 2：（不保留纵横比。*在上面的 Swift 3 示例中已修复*）**

```
import UIKit
import AVFoundation

func stitchImages(images: [UIImage], isVertical: Bool) -> UIImage {
    var stitchedImages : UIImage!
    if images.count > 0 {
        var maxWidth = CGFloat(0), maxHeight = CGFloat(0)
        for image in images {
            if image.size.width > maxWidth {
                maxWidth = image.size.width
            }
            if image.size.height > maxHeight {
                maxHeight = image.size.height
            }
        }
        var totalSize : CGSize, maxSize = CGSizeMake(maxWidth, maxHeight)
        if isVertical {
            totalSize = CGSizeMake(maxSize.width, maxSize.height * (CGFloat)(images.count))
        } else {
            totalSize = CGSizeMake(maxSize.width  * (CGFloat)(images.count), maxSize.height)
        }
        UIGraphicsBeginImageContext(totalSize)
        for image in images {
            var rect : CGRect, offset = (CGFloat)((images as NSArray).indexOfObject(image))
            if isVertical {
                rect = CGRectMake(0, maxSize.height * offset, maxSize.width, maxSize.height)
            } else {
                rect = CGRectMake(maxSize.width * offset, 0 , maxSize.width, maxSize.height)
            }
            image.drawInRect(rect)
        }
        stitchedImages = UIGraphicsGetImageFromCurrentImageContext()
        UIGraphicsEndImageContext()
    }
    return stitchedImages
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-01T06:12:46.710

正常的方法是创建一个位图图像上下文，在需要的位置绘制图像，然后从图像上下文中获取图像。

您可以使用 UIKit 来执行此操作，这有点容易，但不是线程安全的，因此需要在主线程中运行并且会阻塞 UI。

有很多示例代码，但如果你想正确理解它，你应该查看 UIGraphicsContextBeginImageContext、UIGraphicsGetCurrentContext、UIGraphicsGetImageFromCurrentImageContext 和 UIImageDrawInRect。不要忘记 UIGraphicsPopCurrentContext。

您也可以使用 AFAIK 的 Core Graphics 来执行此操作，可以安全地在后台线程上使用（我还没有因为它崩溃）。效率大致相同，因为 UIKit 只是在后台使用 CG。关键字是 CGBitmapContextCreate、CGContextDrawImage、CGBitmapContextCreateImage、CGContextTranslateCTM、CGContextScaleCTM 和 CGContextRelease（核心图形没有 ARC）。缩放和平移是因为 CG 的原点在右下角，Y 向上增加。

还有第三种方法，即使用 CG 作为上下文，但使用 CALayer 省去所有坐标的痛苦，将 CGImage ( UIImage.CGImage) 设置为内容，然后将图层渲染到上下文。这仍然是线程安全的，并让层负责所有的转换。关键字是-renderInContext：

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-06-30T22:11:44.750

我知道我在这里有点晚了，但希望这可以帮助别人。如果您尝试从数组中创建一个大图像，您可以使用此方法

```
- (UIImage *)mergeImagesFromArray: (NSArray *)imageArray {

    if ([imageArray count] == 0) return nil;

    UIImage *exampleImage = [imageArray firstObject];
    CGSize imageSize = exampleImage.size;
    CGSize finalSize = CGSizeMake(imageSize.width, imageSize.height * [imageArray count]);

    UIGraphicsBeginImageContext(finalSize);

    for (UIImage *image in imageArray) {
        [image drawInRect: CGRectMake(0, imageSize.height * [imageArray indexOfObject: image],
                                      imageSize.width, imageSize.height)];
    }

    UIImage *finalImage = UIGraphicsGetImageFromCurrentImageContext();

    UIGraphicsEndImageContext();

    return finalImage;
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-01-23T11:05:44.977

斯威夫特 4

```
extension Array where Element: UIImage {
    func stitchImages(isVertical: Bool) -> UIImage {

        let maxWidth = self.compactMap { $0.size.width }.max()
        let maxHeight = self.compactMap { $0.size.height }.max()

        let maxSize = CGSize(width: maxWidth ?? 0, height: maxHeight ?? 0)
        let totalSize = isVertical ?
            CGSize(width: maxSize.width, height: maxSize.height * (CGFloat)(self.count))
            : CGSize(width: maxSize.width  * (CGFloat)(self.count), height:  maxSize.height)
        let renderer = UIGraphicsImageRenderer(size: totalSize)

        return renderer.image { (context) in
            for (index, image) in self.enumerated() {
                let rect = AVMakeRect(aspectRatio: image.size, insideRect: isVertical ?
                    CGRect(x: 0, y: maxSize.height * CGFloat(index), width: maxSize.width, height: maxSize.height) :
                    CGRect(x: maxSize.width * CGFloat(index), y: 0, width: maxSize.width, height: maxSize.height))
                image.draw(in: rect)
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-02T01:57:47.770

试试这段代码，我尝试将两个图像拼接在一起并在 ImageView 中显示它们

```
UIImage *bottomImage = [UIImage imageNamed:@"bottom.png"]; //first image
UIImage *image       = [UIImage imageNamed:@"top.png"]; //foreground image

CGSize newSize = CGSizeMake(209, 260); //size of image view
UIGraphicsBeginImageContext( newSize );

// drawing 1st image
[bottomImage drawInRect:CGRectMake(0,0,newSize.width/2,newSize.height/2)];

// drawing the 2nd image after the 1st
[image drawInRect:CGRectMake(0,newSize.height/2,newSize.width/2,newSize.height/2)] ;

UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();

UIGraphicsEndImageContext();

join.image = newImage; 
```

join 是图像视图的名称，您可以将图像视为单个图像。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-16T06:08:51.973

上面的解决方案很有帮助，但对我来说有一个严重的缺陷。问题是，如果图像的大小不同，则生成的拼接图像可能在部分之间有很大的空间。我提出的解决方案将所有图像组合在一起，使其看起来更像单个图像，无论单个图像大小如何。

**对于 Swift 3.x**

```
static func combineImages(images:[UIImage]) -> UIImage
{
    var maxHeight:CGFloat = 0.0
    var maxWidth:CGFloat = 0.0

    for image in images
    {
        maxHeight += image.size.height
        if image.size.width > maxWidth
        {
            maxWidth = image.size.width
        }
    }

    let finalSize = CGSize(width: maxWidth, height: maxHeight)

    UIGraphicsBeginImageContext(finalSize)

    var runningHeight: CGFloat = 0.0

    for image in images
    {
        image.draw(in: CGRect(x: 0.0, y: runningHeight, width: image.size.width, height: image.size.height))
        runningHeight += image.size.height
    }

    let finalImage = UIGraphicsGetImageFromCurrentImageContext()

    UIGraphicsEndImageContext()

    return finalImage!
} 
```

# php - 未登录的用户可以在 facebook 中看到我的应用程序

> ID：11752889
> 
> 赞同：0
> 
> 时间：2012-08-01T05:14:04.723
> 
> 标签：php, facebook, login

我有一个问题，如果我没有登录我的 facebook 帐户，我可以看到（即使如此）我的应用程序，并写下它的 url。换句话说，facebook上的“匿名用户”可以看到我的应用程序。

我所知道的是，如何防止没有登录的用户看不到我的应用程序并被重定向到登录 Facebook？

我可以配置自己的 Facebook 应用程序吗？还是应该使用 SDK 或 JS Facebook 对其进行编程？任何人都可以推荐一个页面或示例如何做？

注意：我的应用程序使用 PHP 和 CodeIgniter。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:57:25.447

如果其他用户看不到该应用程序，您几乎可以肯定忘记将该应用程序退出沙盒模式或对其进行人口统计限制 - 在应用程序设置中更改它

{编辑：您已将问题编辑为几乎与以前相反

PHP 示例应用程序包含用于检查当前用户是否使用您的应用程序的代码，并且在这种情况下您可以执行不同的操作（包括重定向到身份验证对话框）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T17:05:18.357

在我看来，您没有正确使用 SDK 来检查用户是否已登录。然后您基本上需要将您的内容包装在 if-else 语句中。我不知道您是否正在使用 codeigniter 插件，但在 php-sdk 中，用最简单的术语来说是这样的：

```
 include "facebook.php";
  $facebook = new Facebook(array("appId"=>YOUR_APP_ID, "secret"=>YOUR_SECRET));
  $me = $facebook->getUser();
  $user = false;
  if($me){ // still try and get user as getUser could return valid result
     try{
     $user = $facebook->api('/me');
     catch(facebookAPIException $e){
     $user = false;
     $me = false;
     }
 }

if($user){ // display your content here

}else{// user not logged in
   header("Location:".$facebook->getLoginUrl());
} 
```

上面的例子是最简单的形式，但是关于 php sdk 的信息在这里[https://developers.facebook.com/docs/reference/php/](https://developers.facebook.com/docs/reference/php/)您可以下载它来查看示例。正如我所说，这只是普通的 php，没有集成在 codeigniter 中，而且只是伪代码。如果您粘贴了一些代码，它可能有助于解决这个问题，特别是对于其他在 codeigniter 方面更有经验的人。但对我来说，听起来您并没有检查用户是否存在，也没有将您的内容转发或包装在一个阻止他们查看它的语句中。我不确定这在画布应用程序上是如何工作的，但我知道这适用于网站身份验证。如果这是您正在谈论的画布应用程序，您可以尝试检查您的应用程序的“经过身份验证的推荐”复选框，或者如果用户未被识别，则使用 JS sdk 重定向它们，类似于上面

# python - python：将字符串转换为正则表达式

> ID：11752894
> 
> 赞同：-1
> 
> 时间：2012-08-01T05:14:26.353
> 
> 标签：python, regex, string

我正在使用 python 进行一些文本比较。文本格式类似于`44=100`.
假设，我有 2 个文本，`44=100`并且`44=3001`. 我称左边的字符串`=`为标签，右边的为值。
现在我需要比较它们的标签和值。标签必须相同，`44`等于`44`，但值不必相同，只要其格式相同即可。IE。`100`并且`3001`格式相同（普通数字）。但`1.0E+7`在`44=1.0E+7`不同。
t重点在于价值比较。IE。我写了一个脚本comp.py，当我运行时`comp.py 2000 30010`，我会得到输出`true`；当我运行时`comp.py 100000 1.0E+8`，输出是`false`. 我该怎么做？我正在考虑将值转换为正则表达式并将其与其他表达式进行比较。

伪代码：

```
rex1 = '100000'.getRegrex(), rex2 = '1.0E+8'.getRegrex(), rex1.compare(rex2) 
```

是一种可行的方法吗？有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:48:25.003

> rex1 = '100000'.getRegrex(), rex2 = '1.0E+8'.getRegrex(), rex1.compare(rex2)

你的方法是错误的。从给定的字符串中“推导出”一个正则表达式不仅困难而且不合逻辑。你会做的是：

*   定义你的类型。对于每种类型，您都会有一个相应的正则表达式。
*   将您的输入文本与您定义的所有类型进行比较，并检查它属于哪种类型。
*   比较两种类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-13T04:28:56.787

其实你的想法`rex1 = '100000'.getRegrex()`可以实现

```
rex1 = re.compile('10000') 
```

但正如 Thustmaster 所指出的，您可能希望使用更抽象的数据模式来定义正则表达式。

# python - Enthought Python 中的线程化 FFT

> ID：11752898
> 
> 赞同：5
> 
> 时间：2012-08-01T05:14:45.323
> 
> 标签：python, multithreading, fft, enthought, intel-mkl

Numpy/SciPy 中的快速傅里叶变换 (FFT) 没有线程化。Enthought Python 附带英特尔 MKL 数值库，该库能够进行线程 FFT。如何访问这些例程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T05:14:45.323

以下代码适用于 Windows 7 Ultimate 64 位上的 Enthought 7.3-1（64 位）。我没有对它进行基准测试，但它肯定会同时使用所有内核，而不仅仅是一个。

```
from ctypes import *

class Mkl_Fft:
    c_double_p = POINTER(c_double)

    def __init__(self,num_threads=8):
        self.dfti = cdll.LoadLibrary("mk2_rt.dll")
        self.dfti.MKL_Set_Num_Threads(num_threads)
        self.Create = self.dfti.DftiCreateDescriptor_d_md
        self.Commit = self.dfti.DftiCommitDescriptor
        self.ComputeForward = self.dfti.DftiComputeForward

    def fft(self,a):
        Desc_Handle = c_void_p(0)
        dims = (c_int*2)(*a.shape)
        DFTI_COMPLEX = c_int(32)
        rank = 2

        self.Create(byref(Desc_Handle), DFTI_COMPLEX, rank, dims )
        self.Commit(Desc_Handle)
        self.ComputeForward(Desc_Handle, a.ctypes.data_as(self.c_double_p) ) 
```

用法：

```
import numpy as np
a = np.ones( (32,32), dtype = complex128 )
fft = Mkl_Fft()
fft.fft(a) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-24T00:27:45.290

我的原始答案的更简洁的版本如下：

```
from ctypes import *

mkl = cdll.LoadLibrary("mk2_rt.dll")
c_double_p = POINTER(c_double)
DFTI_COMPLEX = c_int(32)
DFTI_DOUBLE = c_int(36)

def fft2(a):
    Desc_Handle = c_void_p(0)
    dims = (c_int*2)(*a.shape)

    mkl.DftiCreateDescriptor(byref(Desc_Handle), DFTI_DOUBLE, DFTI_COMPLEX, 2, dims )
    mkl.DftiCommitDescriptor(Desc_Handle)
    mkl.DftiComputeForward(Desc_Handle, a.ctypes.data_as(c_void_p) )
    mkl.DftiFreeDescriptor(byref(Desc_Handle))

    return a

def ifft2(a):
    Desc_Handle = c_void_p(0)
    dims = (c_int*2)(*a.shape)

    mkl.DftiCreateDescriptor(byref(Desc_Handle), DFTI_DOUBLE, DFTI_COMPLEX, 2, dims )
    mkl.DftiCommitDescriptor(Desc_Handle)
    mkl.DftiComputeBackward(Desc_Handle, a.ctypes.data_as(c_void_p) )
    mkl.DftiFreeDescriptor(byref(Desc_Handle))

    return a 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-09T02:37:26.123

新的和改进的版本，可以处理输入和输出数组中的任意步幅。默认情况下，这个现在不在原地并创建一个新数组。它模仿了 Numpy FFT 例程，只是它具有不同的规范化。

```
''' Wrapper to MKL FFT routines '''

import numpy as _np
import ctypes as _ctypes

mkl = _ctypes.cdll.LoadLibrary("mk2_rt.dll")
_DFTI_COMPLEX = _ctypes.c_int(32)
_DFTI_DOUBLE = _ctypes.c_int(36)
_DFTI_PLACEMENT = _ctypes.c_int(11)
_DFTI_NOT_INPLACE = _ctypes.c_int(44)
_DFTI_INPUT_STRIDES = _ctypes.c_int(12)
_DFTI_OUTPUT_STRIDES = _ctypes.c_int(13)

def fft2(a, out=None):
    ''' 
Forward two-dimensional double-precision complex-complex FFT.
Uses the Intel MKL libraries distributed with Enthought Python.
Normalisation is different from Numpy!
By default, allocates new memory like 'a' for output data.
Returns the array containing output data.
'''

    assert a.dtype == _np.complex128
    assert len(a.shape) == 2

    inplace = False

    if out is a:
        inplace = True

    elif out is not None:
        assert out.dtype == _np.complex128
        assert a.shape == out.shape
        assert not _np.may_share_memory(a, out)

    else:
        out = _np.empty_like(a)

    Desc_Handle = _ctypes.c_void_p(0)
    dims = (_ctypes.c_int*2)(*a.shape)

    mkl.DftiCreateDescriptor(_ctypes.byref(Desc_Handle), _DFTI_DOUBLE, _DFTI_COMPLEX, _ctypes.c_int(2), dims )

    #Set input strides if necessary
    if not a.flags['C_CONTIGUOUS']:
        in_strides = (_ctypes.c_int*3)(0, a.strides[0]/16, a.strides[1]/16)
        mkl.DftiSetValue(Desc_Handle, _DFTI_INPUT_STRIDES, _ctypes.byref(in_strides))

    if inplace:
        #Inplace FFT
        mkl.DftiCommitDescriptor(Desc_Handle)
        mkl.DftiComputeForward(Desc_Handle, a.ctypes.data_as(_ctypes.c_void_p) )

    else:
        #Not-inplace FFT
        mkl.DftiSetValue(Desc_Handle, _DFTI_PLACEMENT, _DFTI_NOT_INPLACE)

        #Set output strides if necessary
        if not out.flags['C_CONTIGUOUS']:
            out_strides = (_ctypes.c_int*3)(0, out.strides[0]/16, out.strides[1]/16)
            mkl.DftiSetValue(Desc_Handle, _DFTI_OUTPUT_STRIDES, _ctypes.byref(out_strides))

        mkl.DftiCommitDescriptor(Desc_Handle)
        mkl.DftiComputeForward(Desc_Handle, a.ctypes.data_as(_ctypes.c_void_p), out.ctypes.data_as(_ctypes.c_void_p) )

    mkl.DftiFreeDescriptor(_ctypes.byref(Desc_Handle))

    return out

def ifft2(a, out=None):
    ''' 
Backward two-dimensional double-precision complex-complex FFT.
Uses the Intel MKL libraries distributed with Enthought Python.
Normalisation is different from Numpy!
By default, allocates new memory like 'a' for output data.
Returns the array containing output data.
'''

    assert a.dtype == _np.complex128
    assert len(a.shape) == 2

    inplace = False

    if out is a:
        inplace = True

    elif out is not None:
        assert out.dtype == _np.complex128
        assert a.shape == out.shape
        assert not _np.may_share_memory(a, out)

    else:
        out = _np.empty_like(a)

    Desc_Handle = _ctypes.c_void_p(0)
    dims = (_ctypes.c_int*2)(*a.shape)

    mkl.DftiCreateDescriptor(_ctypes.byref(Desc_Handle), _DFTI_DOUBLE, _DFTI_COMPLEX, _ctypes.c_int(2), dims )

    #Set input strides if necessary
    if not a.flags['C_CONTIGUOUS']:
        in_strides = (_ctypes.c_int*3)(0, a.strides[0]/16, a.strides[1]/16)
        mkl.DftiSetValue(Desc_Handle, _DFTI_INPUT_STRIDES, _ctypes.byref(in_strides))

    if inplace:
        #Inplace FFT
        mkl.DftiCommitDescriptor(Desc_Handle)
        mkl.DftiComputeBackward(Desc_Handle, a.ctypes.data_as(_ctypes.c_void_p) )

    else:
        #Not-inplace FFT
        mkl.DftiSetValue(Desc_Handle, _DFTI_PLACEMENT, _DFTI_NOT_INPLACE)

        #Set output strides if necessary
        if not out.flags['C_CONTIGUOUS']:
            out_strides = (_ctypes.c_int*3)(0, out.strides[0]/16, out.strides[1]/16)
            mkl.DftiSetValue(Desc_Handle, _DFTI_OUTPUT_STRIDES, _ctypes.byref(out_strides))

        mkl.DftiCommitDescriptor(Desc_Handle)
        mkl.DftiComputeBackward(Desc_Handle, a.ctypes.data_as(_ctypes.c_void_p), out.ctypes.data_as(_ctypes.c_void_p) )

    mkl.DftiFreeDescriptor(_ctypes.byref(Desc_Handle))

    return out 
```

# php - 防止我的自定义 WordPress 主题被复制

> ID：11752901
> 
> 赞同：1
> 
> 时间：2012-08-01T05:14:48.723
> 
> 标签：php, javascript, wordpress, encryption

这是我的情况。我为 WordPress 创建了一个专有的主题框架，我用它来为客户构建我的所有自定义主题。通常客户不知道如何使用 WordPress，他们中的大多数甚至都不会考虑，更不用说开始窃取我的代码了。

但是我正在与之合作的当前客户正在使用竞争对手进行 SEO 和社交媒体营销。如果我在开始这个项目之前就知道我不会签署合同，但基本上我们被困在与竞争对手的合作中。一旦我们移交网站，他们就可以访问我们的文件和网站上的所有内容。

我的问题是：如何将竞争对手窃取我们的主题并再次使用它的风险降到最低？我知道 WordPress 是开源的，但我们的框架 HTML 和 CSS 是专有的，对吧？有没有办法加密functions.php文件或使用混淆器或类似的东西使代码不可读？

我知道可能没有必要的产品或脚本可以做到这一点，但我想我正在寻找的是一些关于如何降低有人可能复制我的代码的可能性的输入或知识。

有没有人遇到过这种情况？我应该打扰吗？我知道如果有人想复制一些东西，他们会想办法去做。但我真的不想把它交给他们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T05:20:45.133

PHP 存在混淆器。

*   [PHP 保护](http://www.phpprotect.info/)
*   [Zend Guard](http://www.zend.com/en/products/guard/)
*   [PHP 混淆器](http://www.codeproject.com/Articles/15124/PHP-Obfuscator)

仅举几例。YMMV，但有一件事是肯定的：如果他们想以可读格式获取您的代码，他们会的。

**找律师并写一份适当的执照。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-01T05:29:01.797

混淆是没有意义的`functions.php`。仅混淆专有代码，然后`require`将其转换为`functions.php`. 无论如何，如果它不是敏感代码，那么混淆任何东西真的没有意义。如果有人可以访问您的服务器，那么他们可以复制您的代码。我想你至少可以尝试证明他们复制它是为了在隐藏在某处的代码中嵌入某种版权，可能隐藏在 WordPress 函数或其他东西中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-01T05:31:35.993

不幸的是，如果他们有权访问这些文件，他们可能会尝试解密您对其所做的任何事情。

您最好的选择是请律师并为其提供版权。如果他们复制它，就起诉他们。或者，您可以找到一种“创造性编码”方法，该方法使尝试跟踪事情的完成方式变得很痛苦，同时为编写它的人保持秩序。但后者可能是灾难性的，因为其他人可能会查看您的代码，告诉客户您不知道如何编码，然后您会被解雇：/

我会坚持请律师。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-01T05:21:24.033

是的，有一些方法可以混淆你的 php 代码。

这就是你要找的。

[PHP有代码混淆器吗？](https://stackoverflow.com/questions/232736/code-obfuscator-for-php)

你也可以混淆你的js，现在大多数压缩器都内置了。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-01T06:30:11.027

如果他只能访问 WordPress 仪表板，那么您可以对他隐藏您的自定义函数文件。

唯一要做的就是在单独的文件中编写您的自定义函数，然后将其包含在您的`functions.php`文件中，如下所示：

```
require ( get_template_directory() . '/includes/theme-functions.php' );
require ( get_template_directory() . '/includes/theme-options.php' );
require ( get_template_directory() . '/includes/hooks.php' ); 
```

在上面的示例中，我将自定义函数放在另一个名为“includes”的文件夹中。通过仪表板编辑器，他将无法获得这些包含的文件。

如果他有权访问服务器控制面板，则此方法将不起作用。在这种情况下，您需要在代码中包含一些嵌入式版权。

最好做一个适当的许可证。

# jquery - jQuery Validate 布局问题

> ID：11752906
> 
> 赞同：1
> 
> 时间：2012-08-01T05:15:36.673
> 
> 标签：jquery, jquery-validate, validation

我正在使用 jQuery Validate 来验证我的表单。我一直在对错误标签进行硬编码并使用 Validate 来显示/隐藏标签。我一直在对它们进行硬编码，因为我需要覆盖 jQuery Validate 的默认样式以显示为“inline-block”而不是“inline”。

我现在需要根据验证状态显示 2 条不同的错误消息，一条是“一般”，一条是“不得超过 6 个字符”。它目前可以工作，但是会生成第二条错误消息并且样式不正确，因此会破坏布局。

有没有办法根据 jQuery Validation 拾取的错误状态来确定要显示哪个硬编码错误标签？

（PS：如果有人能告诉我如何覆盖生成的错误标签的样式，那也可以解决我的问题）

我的硬编码标签如下所示：

```
<label for="registration" class="error" style="display:inline-block; margin:5px 0 0 130px;">Please enter valid registration</label> 
```

我需要对第二个进行硬编码，但要找到一种区分两者的方法，并且仅在必要时才显示：

```
<label for="registration" class="error" style="display:inline-block; margin:5px 0 0 130px;">Please enter no more than 6 characters</label> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T03:15:10.503

我设法通过为那个输入字段的错误类添加一个不同的类来解决这个问题。通过这样做，我可以将这些错误消息的样式与表单生成的其他错误消息不同。

JavaScript - 这被添加到您当前的验证函数中

```
errorPlacement: function(error, element) {
     if(element.attr("id") == 'username'){ // match your element's id
          error.addClass("errorclass"); // add invalid class
          error.appendTo(element.parent()); // this line willchange depends on your form layout
     else{
          error.appendTo(element.parent()); // this line willchange depends on your form layout
          } 
```

# sql - Oracle 10g：SQL 将行合并为单行

> ID：11752907
> 
> 赞同：1
> 
> 时间：2012-08-01T05:15:41.030
> 
> 标签：sql, oracle

我有一个返回以下数据结构的查询：

```
Course   Math   Science   Computer   Chemistry
------   ----   -------   --------   ---------
CI101     98
CI101     87
CI101             78
CI101             102
CI101                        23
CI101                        56
CI101                        89
CI101                                   45 
```

如何使用 SQL 使其具有以下结构：

```
Course   Math   Science   Computer   Chemistry
------   ----   -------   --------   ---------
CI101     98      78        23          45
CI101     87      102       56
CI101                       89 
```

这是我尝试过的 SQL：

```
select course,
   case
     when subject = 'MATH' then
      count
   end as MATH,
   case
     when subject = 'SCIENCE' then
      count
   end as SCIENCE,
   case
     when subject = 'COMPUTER' then
      count
   end as COMPUTER,
   case
     when subject = 'CHEMISTRY' then
      count
   end as CHEMISTRY
 from t_course
 GROUP BY course, subject, count 
```

表结构：

```
Course    Subject     Count
------    -------     -----
CI101     Math         98
.... 
```

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T06:35:51.133

尝试这个：

由于我没有 Oracle 并且我没有看到这个问题的任何答案，我已经在 sql server 中完成了这个。这可以很容易地转换为 Oracle sql。

我认为，唯一需要转换的部分是 **ROW_NUMBER() over(order by [count]) as row_num**这基本上是给每个集合一个序列号

```
select CO.course,MA.count as  'MATH',SC.count as 'SCIENCE',CO.count as 'COMPUTER',CH.count as 'CHEMISTRY' from 
(select course,[count],ROW_NUMBER() over(order by  [count]) as row_num from t_course where subject = 'MATH')MA full outer join 
(select course,[count],ROW_NUMBER() over(order by  [count]) as row_num from t_course where subject = 'SCIENCE')SC on SC.row_num=MA.row_num full outer join 
(select course,[count],ROW_NUMBER() over(order by  [count]) as row_num from t_course where subject = 'COMPUTER')CO on CO.row_num=SC.row_num full outer join 
(select course,[count],ROW_NUMBER() over(order by  [count]) as row_num from t_course where subject = 'CHEMISTRY')CH on CO.row_num=CH.row_num 
```

请在[此处查看 SQL 小提琴演示](http://www.sqlfiddle.com/#!3/3640b/1)

# java - 如何从微调器中检索选定的值并在另一个类中使用它？- 安卓

> ID：11752910
> 
> 赞同：0
> 
> 时间：2012-08-01T05:16:08.257
> 
> 标签：java, android, spinner

正如 jalopaba 在这里演示的那样，我已经创建了一个新类：[如何获得 Spinner 的选定值？](https://stackoverflow.com/questions/2652414/how-do-you-get-the-selected-value-of-a-spinner-android)

```
public class MyItemSelectedListener implements OnItemSelectedListener {

    public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
        String selected = parent.getItemAtPosition(pos).toString();
    }

    public void onNothingSelected(AdapterView parent) {
        // Do nothing.
    }
} 
```

并将其注册到原始类中的微调器：

```
spinner.setOnItemSelectedListener(new MyOnItemSelectedListener()); 
```

但是，我仍然不能使用该选定的字符串来在同一个类中填写我的代码：

```
textView.setText(selected); 
```

反正我是这个Android的新手，所以这个问题对你们中的一些人来说可能太愚蠢了

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T05:36:25.913

在 onItemSelected 中添加 setText 代码：

```
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    yourTextView.setText(parent.getSelectedItem().toString);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:28:01.280

试试这段代码，希望对你有帮助。

```
final CharSequence[] array_min = {"No 

  Min","100","200","300","400", "500","600","700","800","900","1000",
                  "1100","1200","1300","1400","1500","1600","1700","1800","1900","2000","2500","3000","3500" };

        Spinner s = (Spinner) layout.findViewById(R.id.viewSpin);

        adapter = new ArrayAdapter(this,android.R.layout.simple_spinner_item, array_min);

        s.setAdapter(adapter);
        s.setOnItemSelectedListener(new OnItemSelectedListener() {

            public void onItemSelected(AdapterView<?> parent, View arg1,
                    int arg2, long arg3)
            {
                selItem = parent.getSelectedItem().toString();
            }

            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub
            }
        }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:41:56.800

**注册微调器后，您可以从 getSelectedItem() 方法对任何操作（如 ocClick()**

```
 regType = (Spinner) findViewById(R.id.spinner1);
    ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this, R.array.regType, android.R.layout.simple_spinner_dropdown_item);
    regType.setAdapter(adapter); 
```

public void onClick(View v) { switch (v.getId()) { case R.id.btnSave:

```
 intent.putExtra("regtype",regType.getSelectedItem().toString());
        startActivity(intent);  

            break;}} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T05:39:35.507

Use global variable..make following changes in your code

String selected="";

public class MyItemSelectedListener implements OnItemSelectedListener {

```
public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {
    selected = parent.getItemAtPosition(pos).toString();
}

public void onNothingSelected(AdapterView parent) {
    // Do nothing.
} 
```

}

textView.setText(selected);

# arrays - 电子表格 - Google App 脚本 [字符串拆分功能]

> ID：11752911
> 
> 赞同：14
> 
> 时间：2012-08-01T05:16:15.713
> 
> 标签：arrays, split, google-apps-script

只是想验证一些关于拆分功能的想法。我已经构建了一个简单的代码。

```
var array1 = [{}];
var string1 = "A, B, C, D";

array1 = string1.split(","); 
```

问题是基于这种编码，例如在闪存中。string1 将全部拆分`","`，然后以这种格式将其传输到 array1 `["A","B","C", "D"]`。这种概念是不是类似于 Google Spreadsheet - GAS？如果是的话，你能找到一些例子吗？非常感谢你们。

PS：当我尝试拆分时，`","`它仅将值`"A B C D"`作为单个元素返回。

谢谢，纳什:)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-01T05:42:36.530

您的代码肯定可以工作，我只是在`Logger.log(array1);` 调试器上用断点运行它，将其显示为数组，日志将其记录为：`[A, B, C, D]`。请注意，要获得您想要的输出，我必须在拆分中添加一个空格才能获得：`string1.split(", ");`

```
function myFunction() {
  var array1 = splitTest();
  Logger.log(array1);
}

function splitTest() {
  var array1 = [{}];
  var string1 = "A, B, C, D";

  array1 = string1.split(", ");
  return array1
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-03-19T21:54:21.243

**J.Doe**，我也无法提交评论，但是您的问题是，如果您从表单中获取值，则其类型可以是对象而不是字符串。因此，您会收到对象中没有函数的错误。

您可以通过以下方式将这些对象转换为字符串来解决此问题：

```
objectPretendingString = JSON.stringify(objectPretendingString) //becomes a string 
```

# android - Android - 存储登录用户的一些常用信息的最佳方式是什么？

> ID：11752913
> 
> 赞同：0
> 
> 时间：2012-08-01T05:16:26.177
> 
> 标签：android

在我的应用程序中，我使用 ksoap2 库来验证 android 中的用户名和密码。现在我想知道，这是存储常用信息的最佳和安全方式，这样我就可以在任何其他屏幕中获取该信息，而无需使用 ksoap 请求我的网络服务器。

我来自网络背景，所以我知道在网络中我们将用户信息存储在会话或 cookie 中。会话存储在服务器上，cookie 存储在本地机器上。

我还阅读了有关 android 中的 cookie，但我不知道它是如何工作的以及保存在哪里。

请让我知道我该怎么做？如果您知道任何可以帮助我学习这件事的教程，请发布。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:23:42.217

您可以使用 SharedPreference 以键值对的形式存储信息。

```
private SharedPreferences myUserPrefs;
private SharedPreferences.Editor myUserEdit;
 myUserPrefs = getApplicationContext().getSharedPreferences("name of shared preference", Context.MODE_PRIVATE);
    myUserEdit =  myUserPrefs.edit(); 
```

在 SharedPreference 中保存一些信息：

```
myuserEdit.putString("key", "value");
myUserEdit.commit(); 
```

获取一些价值：

```
String=myUserPrefs.getString("key", "default value"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:24:02.710

示例代码：</p>

```
save:
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(context);
SharedPreferences.Editor editor = settings.edit();
editor.putString("username", yournamestored);
editor.commit();

get:
SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(context);    
String ret = settings.getString("username", "defaultname"); 
```

cookies 字符串和其他字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:44:41.127

Cookie 和 Session 在 android 中不起作用。您必须使用共享首选项或静态变量来满足您的要求。

如果每次应用程序启动时都验证用户，那么最好使用静态变量或

如果您在安装应用程序时仅验证用户一次，那么最好使用共享首选项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T05:34:06.460

Shared Prefrence 最适合您的短数据存储和共享问题..但是如果您需要也可以使用 SQLlite dbase..有关 android 中的更多存储选项，请查看以下内容

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

# c++ - 如何从字符串中复制每 16 个字节的数据？

> ID：11752914
> 
> 赞同：0
> 
> 时间：2012-08-01T05:16:31.500
> 
> 标签：c++, string, copy

我必须将数据复制到 16 个字节的集合中。我如何用简单的方法做到这一点？我想出了下面的算法，但我怎么知道是否添加了空终止符？谢谢！:)

```
std::string input
//get message to send to client
std::cout << "Enter message to send (type /q to quit) : ";  
getline(std::cin, input);
input += '\n';

const char *data = input.c_str();

len = strlen(data)+1;
int max_len =17;

//split msg into 16 bytes
for(int i = 0; i < len ; i+=max_len)
{
    char tempStr[max_len];
    //get next 16 bytes of msg and store
    for(int j = 0; j < max_len ; j++)
    {           
        tempStr[j] = data[j+i];
    }//end of for loop

     //Do some stuff to tempStr
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T05:33:56.727

在您的代码中，未添加字符串终止符。您还可以在副本之间跳过一个字符（因为`max_len`您`17`只复制`16`字符）。

我会提出一个使用标准库的解决方案：

```
std::string::const_iterator pos = input.begin();

while (pos < input.end())
{
    // Create a temporary string containing 17 "null" characters
    char tmp[17] = {'\0' };

    // Make sure we co no copy beyond the end
    std::string::const_iterator end =
        (pos + 16 < input.end() ? pos + 16 : input.end());

    // Do the actual copying
    std::copy(pos, end, tmp);

    // Advance position
    pos += 16;

    // Use the string in 'tmp', it is properly terminated
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:27:53.483

```
const char* data = input.c_str();
int len = input.size(); // don't add 1
for (int i=0; i<len; i+=16)
{
    char tempStr[17];
    tempStr[16] = 0;
    strncpy(tempStr, data + i, 16);

    // Do some stuff to tempStr
} 
```

根据您对 tempStr 的实际操作，可能有一个根本不涉及复制的解决方案。

```
for (int i=0; i<len; i+=16)
{
    llvm::StringRef sref(data + i, data + std::min(i+16,len));

    // use sref
} 
```

[llvm::StringRef](http://llvm.org/docs/doxygen/html/classllvm_1_1StringRef.html)

# java - 在 JFormattedTextField 中删除掩码时遇到问题

> ID：11752915
> 
> 赞同：5
> 
> 时间：2012-08-01T05:17:09.323
> 
> 标签：java, swing, jformattedtextfield

我在使用 JFormattedTextField 中的掩码时遇到问题

我知道它用空格或您通过 setPlaceholderCharacter 定义的任何字符替换无效字符，但我需要它做的是允许删除或退格，而不是插入空格代替我删除的字符，只要其余的掩码中允许使用字符串。

例如，使用掩码: `*#*****`，字符串`"12 abc"`是有效的。
如果将光标放在 b 和 c 字符之间，然后按退格键，我需要它来删除 b，结果是`"12 ac"`. 相反，它会删除它，并添加一个空格，变成：`"12 a c"`。

下面是一个简单的代码示例来演示。

我将不胜感激任何解决此问题的想法或示例。

* * *

```
public class testFrame extends javax.swing.JFrame {

    public testFrame() {

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        getContentPane().setLayout(new java.awt.FlowLayout());

        setMinimumSize(new Dimension(300,150));

        java.awt.Button closeButton = new java.awt.Button();
        JFormattedTextField maskTextField = new JFormattedTextField();
        maskTextField.setMinimumSize(new Dimension(100,30));

        getContentPane().add(maskTextField);

        closeButton.setLabel("close");
        closeButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                System.exit(0);
            }
        });

        getContentPane().add(closeButton);

        try {
            MaskFormatter someMask = new MaskFormatter("*#****");
            DefaultFormatterFactory formatterFactory 
                = new DefaultFormatterFactory(someMask);
            maskTextField.setFormatterFactory(formatterFactory);
        } catch (ParseException ex) {
            ex.printStackTrace();
        }
        maskTextField.setText("12 abc");

        pack();

    }

    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {

            public void run() {
                new testFrame().setVisible(true);
            }
        });
    }
} 
```

* * *

更新代码以反映下面的答案。我添加了第二个字段，以便您可以查看有无修复的行为。也是一个小修复，我调整了窗口的大小并将其在屏幕中居中以使其更友好。

公共类 testFrame 扩展 javax.swing.JFrame {

```
public testFrame() {
    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setMinimumSize(new java.awt.Dimension(300, 200));
    getContentPane().setLayout(new java.awt.FlowLayout());

    JFormattedTextField maskTextField = new JFormattedTextField();
    maskTextField.setMinimumSize(new Dimension(100,30));
    getContentPane().add(maskTextField);

    JFormattedTextField maskTextField2 = new JFormattedTextField();
    maskTextField2.setMinimumSize(new Dimension(100,30));
    getContentPane().add(maskTextField2);

    java.awt.Button closeButton = new java.awt.Button();
    closeButton.setLabel("close");
    closeButton.addActionListener(new java.awt.event.ActionListener() {

        public void actionPerformed(java.awt.event.ActionEvent evt) {
            System.exit(0);
        }
    });

    getContentPane().add(closeButton);

    try {

        MaskFormatter someMask = new MaskFormatter("*#****");
        DefaultFormatterFactory formatterFactory = 
            new DefaultFormatterFactory(someMask);
        maskTextField.setFormatterFactory(formatterFactory);

        MaskFormatter someMask2 = new MaskFormatter("*#****");
        DefaultFormatterFactory formatterFactory2 = 
            new DefaultFormatterFactory(someMask2);
        maskTextField2.setFormatterFactory(formatterFactory2);

    } catch (ParseException ex) {
        ex.printStackTrace();
    }

    maskTextField.setText("12 abc");
    maskTextField2.setText("12 abc");

    // added per suggestion below
    if (maskTextField.getFormatter() instanceof DefaultFormatter) {
         DefaultFormatter f = (DefaultFormatter) maskTextField.getFormatter();
         f.setAllowsInvalid(true);

         // options are: 
         // JFormattedTextField.COMMIT
         // JFormattedTextField.COMMIT_OR_REVERT  --> default
         // JFormattedTextField.REVERT
         // JFormattedTextField.PERSIST
         maskTextField.setFocusLostBehavior(JFormattedTextField.PERSIST);
    } 
    pack();
    this.setLocationRelativeTo(null);

}

public static void main(String args[]) {
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new testFrame().setVisible(true);
        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T07:14:23.913

首先，感谢您发布一个体面的工作示例。

似乎`DefaultFormatter`是您的蒙面文本字段使用的格式化程序。我发现我可以通过以下方式允许临时无效编辑：

```
if (maskTextField.getFormatter() instanceof DefaultFormatter) {
  DefaultFormatter f = (DefaultFormatter) maskTextField.getFormatter();
  f.setAllowsInvalid(true);          
} 
```

希望这足以让您入门。尽管请注意，如果您在字段中存在无效值时更改焦点，则此快速修复具有完全擦除文本字段内容的有趣行为。这似乎与`JFormattedTextField`暗示默认行为是`COMMIT_OR_REVERT`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T08:14:22.687

只是一个想法 - 绝对不适合生产，并且在一般情况下很可能不可能：您可以尝试包装默认 documentFilter 并在调用委托之前/之后调用自定义检查/操作。

这是一个似乎适用于您问题中的特定示例的片段：

```
public static class MyMaskFormatter extends MaskFormatter {

    DocumentFilter filter;

    /**
     * @param string
     * @throws ParseException
     */
    public MyMaskFormatter(String string) throws ParseException {
        super(string);
    }

    @Override
    protected DocumentFilter getDocumentFilter() {
        if (filter == null) {
            filter = new MyDocumentFilter(super.getDocumentFilter());
        }
        return filter;
    }

    public class MyDocumentFilter extends DocumentFilter {

        DocumentFilter delegate;

        MyDocumentFilter(DocumentFilter delegate) {
            this.delegate = delegate;
        }

        @Override
        public void remove(FilterBypass fb, int offset, int length)
                throws BadLocationException {
            String toRemove = fb.getDocument().getText(offset, length);
            delegate.remove(fb, offset, length);
            String replaced = fb.getDocument().getText(offset, length);
            if (replaced.charAt(0) == getPlaceholderCharacter() && 
                toRemove.charAt(0) != getPlaceholderCharacter()    ) {
                int sublength = fb.getDocument().getLength() - offset;
                String text = fb.getDocument().getText(offset, sublength);
                text = text.substring(1) + text.charAt(0);
                replace(fb, offset, sublength, text, null);
                getFormattedTextField().setCaretPosition(offset);
                //getNavigationFilter().setDot(fb, offset, null);
            }
        }

        @Override
        public void insertString(FilterBypass fb, int offset,
                String string, AttributeSet attr)
                throws BadLocationException {
            delegate.insertString(fb, offset, string, attr);
        }

        @Override
        public void replace(FilterBypass fb, int offset, int length,
                String text, AttributeSet attrs)
                throws BadLocationException {
            delegate.replace(fb, offset, length, text, attrs);
        }

    }

} 
```

# c - C - 将堆内存分配给全局变量

> ID：11752924
> 
> 赞同：1
> 
> 时间：2012-08-01T05:17:46.710
> 
> 标签：c, memory-leaks, global-variables

假设我有一个共享库文件（比如 libtemp.so），它有一个全局变量。如果我动态加载这个库，给它分配一个堆内存，然后关闭这个库。如果我再次加载库，那么旧堆内存是否泄漏？（我认为这是真的，因为再次加载库时全局变量将被重置）

将堆内存分配给全局变量是一种不好的做法吗？有没有我们最终不得不这样做的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T05:32:28.707

在 Linux 上，库全局变量位于共享对象的某个数据段中，并且该段`munmap`在`dlclose`-ing时会被 -ed`libtemp.so`并且会`mmap`在下一次被 -ed 时再次被 -ed，`dlopen`因此全局将被重新初始化。

（我假设你只做一个`dlopen`，即`libtemp.so`不是`dlopen`-ed 两次）

顺便说一句，您可以在构造函数中进行初始化（并在析构函数中完成），请参阅GCC 中的[函数属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)。构造函数在`dlopen`时间执行，而析构函数在`dlclose`时间执行。另请阅读 Linux [dlopen(3)](http://linux.die.net/man/3/dlopen)手册页了解详细信息。（注意 POSIX [dlopen](http://pubs.opengroup.org/onlinepubs/009695399/functions/dlopen.html)没有这些技巧）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:23:28.083

卸载和重新加载库是否会重置全局变量是特定于实现的。无论如何，拥有任何全局变量都是不好的做法，尤其是在共享库中。对于您正在谈论的事情，最常见的用例是在初始化时计算全局表。相反，您应该将它们替换为`static const`存储在二进制文件中的表。

# jquery - JQuery UI 插件开发 - 日历上的单选按钮

> ID：11752926
> 
> 赞同：0
> 
> 时间：2012-08-01T05:17:50.510
> 
> 标签：jquery, jquery-ui, jquery-plugins, calendar, radio-button

我是 JQuery 插件开发的新手。我可以制作一些涉及 html 元素的基本元素，但是我想为 DatePicker UI 组件制作一个。

例如，我想在日期选择器上添加一些单选按钮。这些按钮将允许用户在现场更改日期的格式。

有人对我如何开始这样的项目有一些建议吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:47:36.060

好吧，因为您是*JQuery 插件开发*的新手，所以我建议您阅读这本书：[jQuery 1.4 Plugin Development Beginner's Guide](http://www.amazon.co.uk/jQuery-Plugin-Development-Beginner%2527s-Guide/dp/1849512248/)

在那里你可以编辑现有的插件（例如：calendar-ui）。

另外，我可以推荐：[jQuery UI Themes Beginner's Guide](http://www.amazon.co.uk/jQuery-Themes-Beginners-Guide-ebook/dp/B005H0CC8Q/)

通过阅读书籍及其示例，您可以逐步学习如何开发自己的 jquery 插件。

或使用[谷歌](https://www.google.ro/search?q=learn%20jquery%20plugin)

# websocket - netty websocket 协议支持

> ID：11752930
> 
> 赞同：2
> 
> 时间：2012-08-01T05:18:12.123
> 
> 标签：websocket, netty

我试图在 Netty 文档中查看这一点，但找不到：Netty websocket 实现支持哪些所有 websocket 协议？

我正在尝试检查浏览器的兼容性，因此也想查看上面提到的协议。浏览 Netty 3.5.3 中的 websocket 服务器示例，我在也使用的`WebSocketServerIndexPage`类中看到`window.MozWebSocket`，因此我是否也支持 hybi-07 和 hybi-10 而无需编写任何特定代码？（对不起，我不太了解各种协议的差异，但似乎到处都提到了）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T13:40:53.460

Netty 支持协议版本 HyBi 00（与 Hixie 76 相同）、HyBi 8-10 和 HyBi 13-17（17 与 IETF 6455 相同）。

每个浏览器都支持单一版本的协议。HyBi 00-76 涵盖了当前发布的 iOS 版本。IETF 6455 涵盖最新版本的 Chrome 和 Firefox（以及 Opera，如果它们默认启用它）和 IE 10。对于没有原生 WebSocket 支持但使用 Flash 的浏览器，您可以使用[web-socket-js](https://github.com/gimite/web-socket-js)作为后备并支持 IETF 6455 （尽管没有二进制数据类型）。

换句话说，Netty 基本上支持所有支持 WebSocket 的浏览器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T07:50:06.440

根据 netty [api](https://datatracker.ietf.org/doc/html/draft-ietf-hybi-thewebsocketprotocol-00)[文档](http://netty.io/4.0/api/io/netty/handler/codec/http/websocketx/package-summary.html)，它支持 3 个版本的Hybi 草案 - 00、07[和](https://datatracker.ietf.org/doc/html/draft-ietf-hybi-thewebsocketprotocol-07)10[以及](https://datatracker.ietf.org/doc/html/draft-ietf-hybi-thewebsocketprotocol-10)RFC [6455](https://www.rfc-editor.org/rfc/rfc6455)。

这将为您提供对[http://en.wikipedia.org/wiki/WebSocket](http://en.wikipedia.org/wiki/WebSocket)总结的大多数浏览器的支持。

# android - 如何从 android 4.0 中的子节点获取所有值？

> ID：11752931
> 
> 赞同：1
> 
> 时间：2012-08-01T05:18:12.173
> 
> 标签：android, xml-parsing, android-4.0-ice-cream-sandwich

到目前为止，我想在 android 4.0 中列出标签的所有值或示例。非常感谢。

```
NodeList nodes = doc.getElementsByTagName("month"); 
```

for (int i = 0; i < nodes.getLength(); i++) {

```
Element e = (Element) nodes.item(i);

            stock_list.add(getValue(e, "month"));
}

Here is my xml 
```

![在此处输入图像描述](../Images/acda0437910eda717d17d44d58fdb9e5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T05:59:24.653

XML 元素的[nodeValue](http://developer.android.com/reference/org/w3c/dom/Node.html)是`null`根据定义的。因此，您可以

*   查询`Text`包含实际内容的节点的元素的子节点，或
*   只需使用[`e.getTextContent()`](http://developer.android.com/reference/org/w3c/dom/Node.html#getTextContent%28%29)来检索 XML 元素的文本内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T06:58:30.283

试试这段代码，我遇到了同样的问题并以这种方式解决了..

```
ArrayList<HashMap<String, String>> stock_list = new ArrayList<HashMap<String, String>>();

NodeList nodes = doc.getElementsByTagName("month");

for (int i = 0; i < nodes.getLength(); i++) {
    HashMap<String, String> map = new HashMap<String, String>();
    Node name = nodes.item(i);
    NodeList month = name.getChildNodes();
    map.put("months", ((Node) month.item(0)).getNodeValue());
    stock_list.add(map);
} 
```

# c++ - 在 C++ 应用程序中检查 Internet 连接的可靠方法：gethostbyname() 失败

> ID：11752934
> 
> 赞同：5
> 
> 时间：2012-08-01T05:18:53.090
> 
> 标签：c++, windows, networking

我正在 Windows 上开发一个 c++ 网络应用程序。我需要检查互联网连接是否存在。我正在使用 gethostbyname()，但是当系统通过代理连接时，它给出的信息不正确。InternetCheckConnection() 和 InternetGetConnectedState() 在不同条件下也没有给出可靠的结果。是否有可靠的方法来检查覆盖所有条件（例如代理和 VPN）的互联网连接？

更新：

在我们公司的网络中，WinHttpGetProxyForUrl() 失败并出现错误 ERROR_WINHTTP_AUTODETECTION_FAILED 并且 WinHttpSendrequest() 失败并出现错误 ERROR_WINHTTP_NAME_NOT_RESOLVED。

在开放网络中 WinHttpSendrequest() 成功。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-07-17T15:06:35.793

简单的老方法！

包括：

```
#include <wininet.h>
#pragma comment(lib,"Wininet.lib") 
```

在您的方法中：

```
char url[128];
strcat(url, "http://www.techtoolbox.com");
bool bConnect = InternetCheckConnection(url, FLAG_ICC_FORCE_CONNECTION, 0);

if (bConnect)
{
    //internet connection exists !
}
else
{
            //internet DOES NOT connection exists !
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-01T05:31:27.913

测试任何资源可用性的最佳方法是尝试使用它。如果您想连接某些东西，您只关心互联网。因此，请尝试在程序的正常过程中连接到它，并处理错误。不要试图猜测如果你尝试会发生什么。首先，你试图预测未来。其次，您不一定要执行实际连接所执行的相同操作。第三，由于干预条件的变化，您的测试可能会成功，而您的后续使用可能会失败。第四，无论如何，您必须处理资源实际使用中的错误：为什么要编写所有代码两次？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:26:09.417

一个简单的解决方案是尝试连接到一个知名主机，如果成功，那么您就有了连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T05:30:48.970

在我看来，一种方法是创建一个套接字并尝试连接一个已知主机。这些链接将有所帮助：对于 windows： http: [//msdn.microsoft.com/en-us/library/ms740673](http://msdn.microsoft.com/en-us/library/ms740673(VS.85).aspx) (VS.85).aspx对于 unix [http://www.tenouk.com/cnlinuxsockettutorials.html](http://www.tenouk.com/cnlinuxsockettutorials.html)。

HTH
阿尼尔

# objective-c - 如何根据帧大小使用 for 循环为 UIbuttons 添加背景颜色？

> ID：11752938
> 
> 赞同：0
> 
> 时间：2012-08-01T05:19:18.080
> 
> 标签：objective-c, xcode

我使用 for 循环创建了 5 个按钮，基于在`CGRectMake`. 但是当我单击每个按钮时如何更改按钮的背景颜色？还有标题和每个按钮的警报视图？请建议我回答..

```
//array taken for button titles
NSArray *array1=[NSArray arrayWithObjects:@"1",@"2",@"3",@"4",@"5", nil];

int k=0;  

for(int i=50;i<=350;i=i+70)
{
  button=[UIButton buttonWithType:UIButtonTypeRoundedRect];
  button.frame=CGRectMake(30,i,35,40);
  [button addTarget:self action:@selector(buttonclicked:) forControlEvents:UIControlEventTouchUpInside];
  if (k<[array1 count])
  {
    [button setTitle:[array1 objectAtIndex:k] forState:UIControlStateNormal];
  }
  k++;  
  [self.view addSubview:button]; 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:29:03.400

尝试这个

```
 -(void) buttonClicked:(id) sender
{
  UIButton * button = (UIButton*) sender;
   button.backgroundColor = [UIColor yellowcolor];
   [button setTitle:@"Hello" forState:UIControlStateNormal];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T05:31:51.327

为每个按钮设置`tag`，当它被调用时 buttonclicked: 被调用，然后使用它的`tag`棒决定将它设置为的背景颜色::

```
int temptag;
temptag = 0;
for(int i=50;i<=350;i=i+70)
{
  button=[UIButton buttonWithType:UIButtonTypeRoundedRect];
  button.frame=CGRectMake(30,i,35,40);
  [button addTarget:self action:@selector(buttonclicked:)  forControlEvents:UIControlEventTouchUpInside];
  button.tag = temptag;
  if (k<[array1 count])
  {
    [button setTitle:[array1 objectAtIndex:k] forState:UIControlStateNormal];
  }
  k++;  
  temptag++;
  [self.view addSubview:button]; 
}

-(void)buttonclicked:(id)sender
{
  UIButton *btn = (UIButton *)sender;
  switch (btn.tag) {
    case 0:
      btn.backgroundColor = [UIColor redColor];
      break;
    case 1:
      btn.backgroundColor = [UIColor grayColor];
      break;
    case ...:
      ....
    default:
      break;
    }
} 
```

# android - 将样式表应用于 android 本机日历

> ID：11752940
> 
> 赞同：0
> 
> 时间：2012-08-01T05:20:05.657
> 
> 标签：android, iphone, calendar

对于我的应用程序，我需要将样式表应用于 Android 和 Iphone 本地日历的每日和每周视图。有没有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:28:26.157

不会。Android 日历是本机应用程序，因此无法更改其样式。

# c# - 只是好奇 log4net 日志详细信息

> ID：11752943
> 
> 赞同：1
> 
> 时间：2012-08-01T05:20:40.000
> 
> 标签：c#, log4net

我正在使用 Log4Net 来记录我的应用程序，一切对我来说都很好，只是想了解更多关于日志详细信息的信息。

这是我的日志：

```
2012-05-22 17:11:44,602 **[11]** ERROR Shell Exists - ignoreThe remote server returned an erro:
2012-05-29 15:48:11,876 **[32]** ERROR Shell Exists - ignoreThe remote server returned an error: (550) File unavailable (e.g., file not found, no access). 
```

这是我的配置：

```
<appender name="ErrorAppender" type="log4net.Appender.RollingFileAppender,log4net">
  <appendToFile value="true" />
  <maxSizeRollBackups value="30" />
  <maximumFileSize value="5MB" />
  <rollingStyle value="Size" />
  <staticLogFileName value="false" />
  <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
  <file value="c:\Error.log"/>
  <param name="AppendToFile" value="true"/>
  <filter type="log4net.Filter.LevelRangeFilter">
    <param name="LevelMin" value="ERROR"/>
    <param name="LevelMax" value="ERROR"/>
  </filter>
  <layout type="log4net.Layout.PatternLayout">
    <param name="ConversionPattern" value="%d [%t] %-2p %c %method - %m%n"/>
  </layout> 
```

只想知道时间戳后我的日志文件中的**[11] 或 [32]是什么，这里指的是什么？**希望有人能更新我的知识。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-01T05:27:14.620

这完全取决于您提供的模式。

但默认模式有一个 [%thread]，它指的是线程 ID。

这就是许多示例中的模式：

```
<layout type="log4net.Layout.PatternLayout">
   <conversionPattern value="%date [%thread] %-5level %logger - %message%newline" />
</layout> 
```

那 [%t] 是线程 ID，好吧。

# ios - 如何在特定区域获取 uitextview 文本

> ID：11752952
> 
> 赞同：0
> 
> 时间：2012-08-01T05:21:44.417
> 
> 标签：ios, text, uitextview, area, rect

我需要从 uitextview 获取文本。我需要的文本是滚动文本视图后的特定区域，而不是 uitextview 中的所有文本。我会在一些图片中描述我需​​要的东西。

首先，我有这个文本视图 ![在此处输入图像描述](../Images/b0b734c957fbe9a648356f7b26b9f660.png)

然后，我想得到一些文本，比如这张图片： ![在此处输入图像描述](../Images/4ece85e4d2a9371ff76587f071b94282.png)

但我不知道该怎么做，有人可以帮助我吗？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T09:47:12.387

```
NSRange range = NSMakeRange(desired_position, 0);
[myTextview setSelectedRange:range]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T06:35:59.630

有趣和不寻常的问题。

【为UITextView重写，原本为UITextField写的】

UITextView 基本上是包装在 UIScrollView 中的文本输入控件（使用继承）。UIScrollView 通过使用它的视图相对于它的框架的坐标来移动它的内容来工作。

查看 UITextView 的 contentOffset 以获取已发生的垂直滚动量（文本已向上滚动，因此 y 值将为负数。）

一旦有了滚动量，就需要获取 UITextView 的字体。使用 NSString sizeWithFont 来获取一行的高度。将 y 坐标除以行高，这将为您提供要跳过的换行数。

可见文本的结尾有点不同。根据您的控制器结构，UITextView 可能已调整大小，也可能未调整。例如，如果您使用的是 UITableViewController，它通常会自动调整 tableView 的大小。我将假设您已经调整了 UITextView 的大小，在这种情况下，结束 'y' 是开始 'y' + textView.frame.size.height。如果您没有调整 UITextView 的大小以适应键盘上方的空间，那么您可以更改设计以执行此操作，或者减去屏幕键盘的大小。

希望这可以帮助

# c# - c#排序并获取datagridview的最后一行

> ID：11752959
> 
> 赞同：-1
> 
> 时间：2012-08-01T05:22:49.380
> 
> 标签：c#, datagridview, row

我想按数字对 datagridview 中的数据进行排序，并且我想在文本框中显示最后一行的特定单元格。我怎样才能做到这一点？

我的代码：（已编辑）

```
 if (dataGridView1.Rows.Count > 0)
        {   
            int nRowIndex = dataGridView1.Rows.Count - 1;

            dataGridView1.Rows[nRowIndex].Selected = true;

            textBox2.Text = dataGridView1.Rows[nRowIndex].Cells[2].Value.ToString() ; << exception occur 
```

我得到了这个 NullReferenceException。

如何解决这个问题？

PS：我那里有 3 列，我需要获取最后一行的第 3 列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T06:04:04.657

您正在获得例外，因为您试图获得第四个单元格（`dataGridView1.Rows[nRowIndex].Cells[3]`），而正如您所说，您只有 3 个单元格（列）。只需将您的代码更改为：

```
textBox2.Text = dataGridView1.Rows[nRowIndex].Cells[2].Value.ToString() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T06:03:38.343

```
textBox2.Text = dataGridView1.Rows[nRowIndex].Cells[dataGridView1.Columns.Count -1].Value.ToString() ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T06:12:49.067

根据您的最后评论，我对您的代码进行了一些更改：

```
if (dataGridView1.Rows.Count > 0)         
{                
    int nRowIndex = dataGridView1.Rows.Count - 1;              
    dataGridView1.Rows[nRowIndex].Selected = true;              
    if(dataGridView1.Rows[nRowIndex].Cells[2].Value != null)
        textBox2.Text = dataGridView1.Rows[nRowIndex].Cells[2].Value.ToString() ;          } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-02T03:41:32.830

在 page_load()

写：-> gvJobCard.PageIndex = Int32.MaxValue;

protected void gvJobCard_RowDataBound（对象发送者，GridViewRowEventArgs e）

{

gvJobCard.PageIndex = gvJobCard.PageCount - 1; //它适用于gvJOBCARD中的DESC顺序

}

# android - 执行doInBackground（）时如何在android中显示进度微调器

> ID：11752961
> 
> 赞同：15
> 
> 时间：2012-08-01T05:23:00.507
> 
> 标签：android, android-asynctask

这是我的 Activity 类，我使用 AsyncTask 从服务器获取数据：

```
public class UserProfileActivity extends Activity {

    private ImageView userImage;
    private TextView userName;
    private TextView userLocation;
    private TextView editInfo;
    private TextView chnageImage;
    private TextView userScore;
    private ListView friendsList;
    public ArrayAdapter<String> adapter;
    public int score;
    public int level;
    public String image;
    public String fname;
    public String lname;
    public String city;
    public int id;
    public String email;
    protected Activity activity = this;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.user_profile);

        userImage = (ImageView) findViewById(R.id.profileImage);
        userName = (TextView) findViewById(R.id.userName_profile);
        userLocation = (TextView) findViewById(R.id.userLocation_profile);
        editInfo = (TextView) findViewById(R.id.edit_profile);
        chnageImage = (TextView) findViewById(R.id.changeImage_profile);
        userScore = (TextView) findViewById(R.id.userScore_profile);
        friendsList = (ListView) findViewById(R.id.friendsList);

        new LongOperation().execute("");

    }

    private class LongOperation extends AsyncTask<String, Void, String> {

        private InputStream is;
        private StringBuilder sb;
        private String result;

        @Override
        protected String doInBackground(String... params) {

            try {
                HttpPost httppost = new HttpPost(
                        "http://www.xxxxxxxxx.com/mobile/getProfileInfo");
                HttpResponse response = SignUpActivity.httpclient
                        .execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();

                try {
                    BufferedReader reader = new BufferedReader(
                            new InputStreamReader(is, "iso-8859-1"), 8);
                    sb = new StringBuilder();
                    sb.append(reader.readLine() + "\n");
                    String line = "0";
                    while ((line = reader.readLine()) != null) {
                        sb.append(line + "\n");
                    }
                    is.close();
                    result = sb.toString();
                } catch (Exception e) {
                }
                try {
                    JSONObject jObj = new JSONObject(result);
                    String status = jObj.getString("status");
                    score = jObj.getInt("credits");
                    level = jObj.getInt("level");
                    image = jObj.getString("image");
                    fname = jObj.getString("fname");
                    lname = jObj.getString("lname");
                    city = jObj.getString("city");
                    id = jObj.getInt("user_id");
                    email = jObj.getString("email");

                    JSONArray friendsJsonArray = jObj.getJSONArray("friends");
                    int size = friendsJsonArray.length();

                    ArrayList<String> friendsNames = new ArrayList<String>();
                    String[] friendsIds = new String[size];
                    for (int i = 0; i < size; i++) {

                        friendsNames.add(friendsJsonArray.getJSONObject(i)
                                .getString("name"));
                    }
                    adapter = new ArrayAdapter<String>(getApplicationContext(),
                            R.layout.simple_listview_item, friendsNames);

                } catch (Exception e) {
                }
            } catch (Exception e) {
            }

            return "Executed";
        }

        @Override
        protected void onPostExecute(String result) {

            friendsList.setAdapter(adapter);
            userScore.setText(score + " points" + "   level " + level);
            userName.setText(fname + "  " + lname);
            userLocation.setText(city);
            Bitmap bitmap = null;
            try {
                bitmap = BitmapFactory
                        .decodeStream((InputStream) new URL(image).getContent());
            } catch (MalformedURLException e1) {

                e1.printStackTrace();
            } catch (IOException e2) {

                e2.printStackTrace();
            }
            userImage.setImageBitmap(bitmap);

        }

        @Override
        protected void onPreExecute() {
        }

        @Override
        protected void onProgressUpdate(Void... values) {
        }
    }
} 
```

加载此活动时，它会显示所有默认值和图像，然后在后台代码执行完成时更改（例外），但这需要 2-3 秒，用户将看到默认值，这是我不想看到的。那么我怎样才能保持这样的微调器：

![在此处输入图像描述](../Images/26613f404345ce12dc84a53bdafa5dee.png)

2-3 秒，然后当微调器消失时，活动必须显示实际值。

谢谢

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-01T05:44:05.800

参考下面的代码

```
private class FetchRSSFeeds extends AsyncTask<String, Void, Boolean> {

    private ProgressDialog dialog = new ProgressDialog(HomeActivity.this);

    /** progress dialog to show user that the backup is processing. */
    /** application context. */
    @Override
    protected void onPreExecute() {
        this.dialog.setMessage("Please wait");
        this.dialog.show();
    }

    @Override
    protected Boolean doInBackground(final String... args) {
        try {

            Utilities.arrayRSS = objRSSFeed
                    .FetchRSSFeeds(Constants.Feed_URL);
            return true;
        } catch (Exception e) {
            Log.e("tag", "error", e);
            return false;
        }
    }

    @Override
    protected void onPostExecute(final Boolean success) {

        if (dialog.isShowing()) {
            dialog.dismiss();
        }

        // Setting data to list adapter
        setListData();
    } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-01T05:50:42.820

做这个：-

1.  **在顶部 **声明ProgressDialog。****

     **```
    ProgressDialog pd; 
    ```** 
***   ****在异步任务的onPreExecute**方法中 **启动**它。**

     **```
    pd=ProgressDialog.show(ActivityName.this,"","Please Wait",false); 
    ```** ***   **在**onPostExecute**方法 中**停止它。****

     **```
    pd.dismiss(); 
    ```****** 

 ***** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:39:19.707

在 onCreate 方法中调用如下

```
mdialog=new Dialog(this);
 new LongOperation().execute(""); 
```

然后覆盖 AyncTask 的 onPostExecute

```
@Override
        protected void onPostExecute() {
        runOnUiThread(new Runnable() {

       @Override
       public void run() {
        // TODO Auto-generated method stub
        mdialog.dismiss();
       }
      });
        } 
```****

# macos - launchd 何时注册活动？

> ID：11752963
> 
> 赞同：1
> 
> 时间：2012-08-01T05:23:09.840
> 
> 标签：macos, cocoa, launchd

我需要在给定的时间内自动打开我的应用程序并从该应用程序运行特定任务。所以我在谷歌搜索并想出了`launchd`. 第一个问题，这是正确的选择吗？
我创建了一个 plist 并将其保存在该位置`~/Library/LaunchAgents/fileName.plist`

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple Computer//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>Label</key>
    <string>com.companyname.example</string>
    <false/>
    <key>RunAtLoad</key>
    <true/>
    <key>UserName</key>
    <string>mac_1</string>
    <key>Program</key>
    <string>open</string>
    <key>ProgramArguments</key>
    <array>
        <string>Argument_1</string>
        <string>Argument_2</string>
    </array>
    <key>StartCalendarInterval</key>
    <dict>
        <key>Day</key>
        <integer>1</integer>
        <key>Hour</key>
        <integer>10</integer>
        <key>Minute</key>
        <integer>41</integer>
        <key>Month</key>
        <integer>8</integer>
        <key>Weekday</key>
        <integer>3</integer>

    </dict>
       <key>KeepAlive</key>
    <true/>
</dict>
</plist> 
```

这样做的问题是，它只有在计算机重新启动时才起作用，否则将不会被调用。那么，我的第二个问题是 launchd 何时注册活动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:51:44.013

有一个名为“launchctl”的实用程序，您需要使用它来将您的 plis 文件加载到 launchd。类型：launchctl load plist_file。

如果你想从你的应用程序中安排一些东西——一种方法是调用“系统”来执行启动实用程序。launchd 也有未记录的 API，但我找不到使用它进行调度的方法。

launchd 将是在系统上安排某些东西的最简单方法，因为它具有到达调度属性。

# c# - 如何在 asp.net <%= %> 脚本中使用 javascript 作为参数

> ID：11752971
> 
> 赞同：0
> 
> 时间：2012-08-01T05:23:55.040
> 
> 标签：c#, javascript, asp.net, .net

路径是javascript路径

> ```
>  var fileName = args.get_fileName();
>     lstImg.src = <%=GetListImageFilePath(fileName) %> 
> ```

文件名是错误的，因为它是 javascript 而不是 .NET 如何将此参数放入 .NET 代码中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T05:43:12.560

您需要使用 AJAX。一种简单的方法是使用 PageMethods。首先，`[WebMethod]`为您的方法添加一个属性：

```
[WebMethod]
protected static string GetListImageFilePath(string fileName)
{ 
```

此方法必须是静态的。

然后`EnablePageMethods="True"`在你的脚本管理器上设置。然后你可以像这样从 JavaScript 调用你的 c# 代码：

```
var fileName = args.get_fileName();
PageMethods.GetListImageFilePath(fileName, function (path) {
    lstImg.src = path;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-01T05:27:32.247

你不能。JavaScript 在客户端运行，asp.net 代码在服务器上。您需要使用其他方式与服务器通信，例如：Ajax 到 Web 服务、回发等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T05:33:48.223

您根本无法做到这一点，因为 javascript 在客户端运行，即在服务器代码在服务器上运行的浏览器上运行。您可以做的是更改**GetListImageFilePath**函数，使其返回图像目录的基本 URL，然后附加文件名以创建图像路径。

```
var fileName = args.get_fileName();
lstImg.src = <%=GetListImageFilePath() %> + '/' + fileName; 
```

有关更多信息，例如如何处理 Javascript 中的服务器标签，我已在此处回答了[StackOverFlow 线程](https://stackoverflow.com/questions/11711425/is-there-is-any-appropriate-solution-to-clear-server-side-session-on-client-side/11711578#comment15558088_11711578)。请看一下以澄清您的疑问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T05:40:46.000

我认为`get_fileName()`是服务器端功能。所以你可以直接从 HTML 中调用它。检查这些链接

[http://weblogs.asp.net/jalpeshpvadgama/archive/2012/01/07/asp-net-page-methods-with-parameters.aspx](http://weblogs.asp.net/jalpeshpvadgama/archive/2012/01/07/asp-net-page-methods-with-parameters.aspx) http://stackoverflow.com/questions/7633557/asp-net-is -it-possible-to-call-methods-within-server-tag-using-eval

如果您使用`RegisterStartupScript()`or 调用 javascript 函数，`RegisterClientScriptBlock()`那么这些函数将在客户端而不是服务器端调用。

如果您想立即在服务器端调用 javascript 函数，则声明一个等效的服务器端函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-01T05:41:14.633

在您的网站中添加一个 ashx(http 处理程序)，然后您可以使用 lstImg.src = '/example.ashx?name=' + fileName.

```
public class ExampleHandler: IHttpHandler {

    public void ProcessRequest (HttpContext context) {
    var request = context.Request;
        string fileName = (string)request.QueryString["name"];
        // your logic
        context.Response.Write(yourpath)
    }

    public bool IsReusable {
    get {
        return false;
    }
    }
} 
```

# sql - 使用 JSON 更新 SQL 数据库

> ID：11752975
> 
> 赞同：2
> 
> 时间：2012-08-01T05:24:23.210
> 
> 标签：sql, json, asp.net-web-api

我在我的 ASP webapi SaveChanges 操作中收到 JSON 结果。我想获取该 JSON 字符串并将其转换为 SQL 更新字符串。

只是想知道是否有人知道将 JSON 字符串转换为 SQL 更新查询的最佳方法。

这是我收到的 JSON 字符串和等效 SQL 的示例：

```
[{"ContactID":3,"FirstName":"Tester","LastName":"Tester","DepartmentName":"Dept"}] 
```

这相当于：

```
UPDATE Contact Set FirstName = 'Tester', LastName = 'Tester', DepartmentName = 'Dept' Where ContactID = 3 
```

目前我在 JArray 上做一个非常讨厌的 for 循环来构建 SQL 更新字符串。因此，如果有人有任何其他更清洁的方法，那就太好了。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-15T13:22:41.943

我基于 Phil 的 parseJSON 函数编写了一个存储过程，它可以工作并且还没有发现任何错误。

[链接到我的代码](https://stackoverflow.com/questions/11945458/tsql-parse-json-string-to-update-table-please-check-and-advise-any-bugs)

# angularjs - ng-repeat 中的 AngularJS ng-model $scope 未定义

> ID：11752977
> 
> 赞同：19
> 
> 时间：2012-08-01T05:24:31.463
> 
> 标签：angularjs

如果我措辞不当，我提前道歉。我有一个带有`ng-model`内部的文本框`ng-repeat`，当我尝试获取文本框值时，它总是`undefined`. 我只希望它显示我在相应文本框中输入的任何内容。

这似乎是一个问题`$scope`，那么我将如何制作`$scope.postText`全局或控制器根级别以便可以访问它？

这是帮助解决问题的 JSFiddle：http: [//jsfiddle.net/stevenng/9mx9B/14/](http://jsfiddle.net/stevenng/9mx9B/14/)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-05T22:46:13.863

`posts`正如@Gloopy 已经说过的， ng-repeat 为数组中的每个项目创建一个新的子范围。由于`posts`数组中的每一项都是原始的（字符串），ng-repeat 还在`post`每个子作用域上创建一个属性，并为它们中的每一个分配数组中的适当值。ng-repeat 块内部是`ng-model="postText"`. 这会在每个子作用域上创建一个 postText 属性。这是所有的样子（对于 4 个子范围中的 2 个）：

![ng-重复范围](../Images/1acf11b303125a828f420a65c967236d.png)

当用户在其中一个输入文本框中键入一些文本时，相应的灰色框将存储文本。（例如，第二个（从顶部开始）灰色框会将用户键入的文本存储到“技术”文本框中。）父范围无法看到子范围中的 postText 属性——这就是您遇到的问题。常见的解决方案有以下三种：

1.  @Gloopy 的答案：在父作用域上定义一个函数（子作用域可以访问，因为 ng-repeat 子作用域原型从父作用域继承）并将子作用域属性值（即 postText 的值）传递给父作用域。
2.  `posts`在数组中使用对象而不是基元。例如，
    `$scope.posts = [ {type: 'tech'}, {type: 'news'}, ...];`
    然后在您的 ng-repeat 循环中，使用
    `<input type="text" ng-model="post.postText">`
    因为每个数组项都是一个对象（而不是原始对象），所以每个子作用域都获得对数组中适当对象的引用`posts`，而不是（值的）副本。因此，`post.postText`在父 $scope 属性上创建`posts`，因此它对父范围可见。（因此，在这种情况下，子作用域会简单地调用`savePost()`——不需要将任何值传递给父作用域。）
    换句话说，如果用户在第一个文本框中键入“这是技术相关的”，父级中的`posts`数组将自动更新如下：
    `$scope.posts = [ {type: 'tech', postText: 'this is tech related'}, {type: 'news'}, ...];`
    最后一点：在用户键入内容之前，不会将 postText 属性添加到帖子对象中。
3.  用于`ng-model="$parent.someProperty"`将表单元素绑定到父作用域上的属性，而不是子作用域上的属性。这个解决方案很难为您的场景实施，而且它是一个相当脆弱的解决方案，因为它依赖于范围继承的 HTML 结构......但我提到它是为了完整性。

（@Renan 在对@Gloopy 的回答的评论中提出了第四个解决方案。这与解决方案 1 类似，但有一个变体：`this`用于代替将值传递给父级。我不喜欢这种方法因为它很难确定正在访问或修改哪个 $scope。我认为在 $scope 上定义的函数最好只访问和修改自己的 $scope。）

有关 Angular 中原型范围继承如何工作的更多信息（以及更多图片），请参阅[AngularJS 中范围原型/原型继承的细微差别是什么？](https://stackoverflow.com/questions/14049480/what-are-the-nuances-of-scope-prototypal-prototypical-inheritance-in-angularjs)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-08-01T05:42:29.813

在您的点击表达式中，您可以引用并在您的函数`postText`中访问它。`savePost`如果这不在 ng-repeat 中，您可以`$scope.postText`成功访问单个，但[ng-repeat](http://docs.angularjs.org/api/ng.directive%3angRepeat)会为每个项目创建一个新范围。

[这](http://jsfiddle.net/VnQqH/)是一个更新的小提琴。

```
<div ng-repeat="post in posts">
   <strong>{{post}}</strong>
   <input type="text" ng-model="postText">
   <a href="#" ng-click="savePost(postText)">save post</a>
</div>

$scope.savePost = function(post){
   alert('post stuff in textbox: ' + post);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T22:46:01.583

这可能是一个迟到的答案。请参考这个小提琴。[http://jsfiddle.net/X5gd2/](http://jsfiddle.net/X5gd2/) 请参考firebug的控制台，当你在文本框中输入一些文本后点击链接。这个想法是为在 ng-repeat 中重复的每个视图都有一个 itemcontroller。

项目控制器：

```
function postItemController($scope){
    $scope.savePost = function(){
        console.log($scope.postText + " which belongs to " + $scope.post +" will be saved")
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-07T04:26:00.003

将模型拆分为标题和值

```
angular.module('MyApp',[]);

function PostCtrl($scope) {
     $scope.posts = [{heading:'tech',value:''}, {heading:'news',value:''},     {heading:'sports',value:''},{heading:'health',value:''}];

    $scope.savePost = function(post){
        alert( 'post stuff in textbox: ' + post);
    }
} 
```

下面的HTML..

```
<div ng-app="MyApp">
    <div ng-controller="PostCtrl">
        <div ng-repeat="post in posts">
          <strong>{{post.heading}}</strong>
          <input type="text" ng-model="post.value"> 
          <a href="#" ng-click="savePost(post.value)">save post</a>   
        </div>
    </div>
</div> 
```

[看看这个小提琴..](http://jsfiddle.net/m075vx07/)

# objective-c - 在类型 y 的对象上找不到属性 x

> ID：11752983
> 
> 赞同：0
> 
> 时间：2012-08-01T05:25:18.697
> 
> 标签：objective-c, ios5, xcode4.3

新手，正在研究可编程计算器。

在模型类的接口中`CalculatorBrain`，我声明

```
@property (nonatomic, strong) NSMutableArray *whatHappenedSinceLastClear; 
```

然后在实现中我也声明

```
-(NSMutableArray *)whatHappenedSinceLastClear
{
if(!_whatHappenedSinceLastClear) _whatHappenedSinceLastClear = [[NSMutableArray alloc] init];
return _whatHappenedSinceLastClear;
} 
```

接着

```
-(double)runProgram:(id)whatHappenedSinceLastClear
{
NSMutableArray *mutableCopyOfWhatHappenedSinceLastClear;
if ([program isKindOfClass:[NSArray class]]) {
    mutableCopyOfWhatHappenedSinceLastClear = [whatHappenedSinceLastClear mutableCopy];
}
return [self popOffProgramStack:mutableCopyOfWhatHappenedSinceLastClear];
} 
```

但是在 ViewController 中，当我声明

```
-(IBAction)testPressed:(id)sender
{
CalculatorBrain *brain = self.brain;   
brain = [[CalculatorBrain alloc] init];
NSMutableArray *program = brain.whatHappenedSinceLastClear;
[brain runProgram:program];
} 
```

在该行中，`NSMutableArray *program = brain.whatHappenedSinceLastClear;`我收到一条消息，上面写着“在'CalculatorBrain *'类型的对象上找不到属性'whatHappenedSinceLastClear'。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T05:28:58.633

试试这个：替换：

```
NSMutableArray *program = brain.whatHappenedSinceLastClear; 
```

经过

```
NSMutableArray *program = [brain whatHappenedSinceLastClear]; 
```

在brain.h中

```
-(NSMutableArray *)whatHappenedSinceLastClear; 
```

这应该有效。

# eclipse-rcp - 如何在 Eclipse 作业中管理单独的线程/作业？

> ID：11752984
> 
> 赞同：2
> 
> 时间：2012-08-01T05:25:21.990
> 
> 标签：eclipse-rcp

这是我的问题：-

我正在构建一个客户端-服务器应用程序，在该应用程序中我将请求发布到服务器以为我生成 2 个 XML（服务器从数据库中获取信息并根据获取的信息生成 XML）。现在，一旦服务器创建了这 2 个 XML，服务器将这 2 个文件流回客户端，以便客户端可以将它们保存在他们的机器上。

（发布+从流中阅读）是一项工作。如果没有第二个操作，即从流中读取，作业是不完整的。

我在 eclipse 中创建了一个作业，它将请求发布到服务器并获取流文件并将它们保存在客户端计算机上。将请求发布到服务器是一个异步调用（它会立即返回）。一旦调用被发布并立即返回，我开始在网络管道上轮询任何数据服务器已发送（在本例中是 XML 的数据）并将其写入文件。

正如您在此处看到的，从流中读取 XML 并将它们写入文件是整个主作业的一部分，但它本身仍然是一个单独的作业（应该在单独的线程中运行）。如果用户取消主作业，从网络流中读取也应该被取消。

所以，基本上我的要求是完成这一切的可取消工作。从流中读取应该是单独的线程/作业，但应该在主作业内。如果用户取消了主作业，这个内部作业（从作业中读取）也应该被取消。

你们能建议一种干净的方法吗？

-Ankit

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T08:53:43.900

您可以创建一个主作业，并在该主作业中创建一个子作业。如果主作业被取消，您可以将取消委托给子作业。

我用两个按钮创建了一个简单的视图。一个用于启动作业，另一个用于取消。

```
package rcpexperiments;

import org.eclipse.core.runtime.IProgressMonitor;
import org.eclipse.core.runtime.IStatus;
import org.eclipse.core.runtime.Status;
import org.eclipse.core.runtime.jobs.IJobChangeEvent;
import org.eclipse.core.runtime.jobs.Job;
import org.eclipse.core.runtime.jobs.JobChangeAdapter;
import org.eclipse.swt.SWT;
import org.eclipse.swt.events.SelectionAdapter;
import org.eclipse.swt.events.SelectionEvent;
import org.eclipse.swt.widgets.Button;
import org.eclipse.swt.widgets.Composite;
import org.eclipse.ui.part.ViewPart;

public class View extends ViewPart
{
  private Job mainJob;

  @Override
  public void createPartControl(final Composite parent)
  {
    final Button button = new Button(parent, SWT.PUSH);
    button.setText("Start Job");
    button.addSelectionListener(new SelectionAdapter()
    {

      @Override
      public void widgetSelected(final SelectionEvent e)
      {
        mainJob = new Job("Main Job")
        {

          private boolean canceled = false;

          @Override
          protected void canceling()
          {
            System.out.println("Cancel requested.");
            canceled = true;
          }

          @Override
          protected IStatus run(final IProgressMonitor monitor)
          {
            final Job subJob = createSubJob();
            subJob.schedule();
            canceled = false;
            while (!canceled)
            {
              try
              {
                Thread.sleep(100);
              }
              catch (final InterruptedException e)
              {
              }
            }
            subJob.cancel();
            System.out.println("Main Job is canceled.");
            return Status.CANCEL_STATUS;
          }

          private Job createSubJob()
          {
            return new Job("Sub Job")
            {
              boolean subJobCancel = false;

              @Override
              protected void canceling()
              {
                subJobCancel = true;
              }

              @Override
              protected IStatus run(final IProgressMonitor monitor)
              {
                System.out.println("Sub Job started.");
                while (!subJobCancel)
                {
                  try
                  {
                    Thread.sleep(100);
                  }
                  catch (final InterruptedException e)
                  {
                  }
                }
                System.out.println("Sub Job canceled");
                return Status.CANCEL_STATUS;
              }

            };
          }

        };
        mainJob.addJobChangeListener(new JobChangeAdapter()
        {
          @Override
          public void done(final IJobChangeEvent event)
          {
            System.out.println("Job finished by " + event.getResult());
          }
        });
        mainJob.schedule();

        System.out.println("Main Job started.");
      };

    });
    final Button cancel = new Button(parent, SWT.PUSH);
    cancel.setText("Cancel");
    cancel.addSelectionListener(new SelectionAdapter()
    {

      @Override
      public void widgetSelected(final SelectionEvent e)
      {
        mainJob.cancel();
      }

    });
  }

  /** {@inheritDoc} */
  @Override
  public void setFocus()
  {
  }

} 
```

我希望那是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T15:36:29.400

在我看来，按照 Micheal K. 建议的方式定义子作业有点麻烦。所以我查看了 Eclipse 文档，发现[Job](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fcore%2Fruntime%2Fjobs%2FJob.html)类定义了一个名为 createProgressGroup 的静态方法，可以按如下方式使用（相同的文档），它做的事情大致相同：

```
Job parseJob, compileJob;
IProgressMonitor pm = Job.getJobManager().createProgressGroup();
try {
   pm.beginTask("Building", 10);
   parseJob.setProgressGroup(pm, 5);
   parseJob.schedule();
   compileJob.setProgressGroup(pm, 5);
   compileJob.schedule();
   parseJob.join();
   compileJob.join();
} finally {
   pm.done();
} 
```

请注意，不推荐使用 IJobManager.getJobManager。

# mysql - sql 查询连接查询输出给出重复项

> ID：11752985
> 
> 赞同：0
> 
> 时间：2012-08-01T05:25:22.957
> 
> 标签：mysql

所以我想同时从 3 个表中提取信息，但是每当我在 table1 上更新我的查询时，它都会给我重复并覆盖以前的条目，比如在车库列的第 n 行中，如果我将车库更新为红色，它将显示为红色对于上一个条目也是如此。关于如何做到这一点的任何想法？

```
SELECT `date`,`tagid`,`garage`,`class` 
FROM table1 JOIN table2 ON table1.number = table2.tagid
UNION SELECT `date`,`tagid`,`garage`,`class` 
FROM table1 JOIN table3 ON table1.number = table3.tagid 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T05:54:11.340

看起来你想做类似的事情：

```
SELECT date, tagid, garage, class 
FROM table1 
LEFT JOIN (
    SELECT date, tagid, garage, class FROM table2 
    UNION
    SELECT date, tagid, garage, class FROM table3 
) AS table_2_and_3 ON (table1.number = table_2_and_3.tagid) 
```

如果第 4 行和第 6 行在表 1 中，您可能需要删除它们。

# java - 如何将日期设置为从数据库中检索的 jDateChooser？

> ID：11752989
> 
> 赞同：2
> 
> 时间：2012-08-01T05:25:53.580
> 
> 标签：java, mysql, netbeans-7, jdatechooser

我有一个表单，我想在该表单上访问数据库中的日期并在 jDateChooser 中显示特定记录。

我将日期保存为数据库中的字符串。

如何从数据库表中获取日期以及如何在 jDateChooser 中设置该日期？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T06:27:25.270

如果您将日期存储在数据库中，`String`那么您将需要将其检索为`String`

```
String dateValue = resultset.getString(...); // What ever column
java.util.Date date = new SimpleDateFormat("dd-MM-yyyy").parse(dateValue);

jDateChooser.setDate(date); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-11T11:24:36.463

如果`date chooser`你提到的是这个[http://plugins.netbeans.org/plugin/658/jdatechooser-1-2](http://plugins.netbeans.org/plugin/658/jdatechooser-1-2)那么一个可能的解决方案可能是这个。

```
String dateValue = resultset.getString(2); // Your column Name
java.util.Date date = new SimpleDateFormat("dd-MM-yyyy").parse(dateValue);

Calendar cal = Calendar.getInstance();
cal.setTime(date);
jDateChooserDCC.setSelectedDate(cal); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-04-24T14:29:50.513

```
SimpleDateFormat date = new SimpleDateFormat("yyyy-MM-dd");
Date dateValue = null;
try {
    dateValue = date.parse(resultset.getstring(1));
} catch (ParseException ex) {
    Logger.getLogger(pegawai.class.getName()).log(Level.SEVERE, null, ex);
}
jdateChooser.setDate(dateValue); 
```

注意：resultset.getstring(1) 是来自数据库 mysql 的数据

# jsp - 为什么 JSP 2.0 自定义标记文件不能与 Portlet 一起使用？

> ID：11752990
> 
> 赞同：0
> 
> 时间：2012-08-01T05:25:58.037
> 
> 标签：jsp, liferay, portlet, jsp-tags, liferay-6

我正在尝试在我的 liferay 6.0 portlet 应用程序中使用 JSP 2.0 标记文件。

以下是我遵循的步骤：

1.  我的jsp很简单：`home.jsp`.

    ```
    <%@ taglib prefix="tags" tagdir="/WEB-INF/tags" %>
    <%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

    <table>
        <tr>
            <td> <tags:tagDemo/> </td>
            <td><c:out value="Cout Hello"/></td>
        </tr>
    </table> 
    ```

2.  我的标签文件非常简单：`/WEB-INF/tags/tagDemo.tag`

    ```
    hello 
    ```

3.  `/WEB-INF/web.xml`

    ```
    <?xml version="1.0" encoding="UTF-8"?>

    <web-app xmlns="http://java.sun.com/xml/ns/j2ee"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee http://java.sun.com/xml/ns/j2ee/web-  app_2_4.xsd" version="2.4">

        <context-param>
            <param-name>log4jConfigLocation</param-name>
            <param-value>/WEB-INF/classes/log4j.properties</param-value>
        </context-param>

        <servlet>
            <servlet-name>view-servlet</servlet-name>
            <servlet-class>org.springframework.web.servlet.ViewRendererServlet</servlet-class>
            <load-on-startup>1</load-on-startup>
        </servlet>

        <servlet-mapping>
            <servlet-name>view-servlet</servlet-name>
            <url-pattern>/WEB-INF/servlet/view</url-pattern>
        </servlet-mapping>

    </web-app> 
    ```

这会引发以下错误：

```
00:14:42,642 ERROR [render_portlet_jsp:154] org.apache.jasper.JasperException: /WEB-INF/jsp/home.jsp (line: 55, column: 6) No tag "tagDemo" defined in tag library imported with prefix "tags"
    at org.apache.jasper.compiler.DefaultErrorHandler.jspError(DefaultErrorHandler.java:42)
    at org.apache.jasper.compiler.ErrorDispatcher.dispatch(ErrorDispatcher.java:408)
    at org.apache.jasper.compiler.ErrorDispatcher.jspError(ErrorDispatcher.java:199)
    at org.apache.jasper.compiler.Parser.parseCustomTag(Parser.java:1215)
    at org.apache.jasper.compiler.Parser.parseElements(Parser.java:1450)
    at org.apache.jasper.compiler.Parser.parse(Parser.java:138)
    at org.apache.jasper.compiler.ParserController.doParse(ParserController.java:242)
    at org.apache.jasper.compiler.ParserController.parse(ParserController.java:102)
    at org.apache.jasper.compiler.Compiler.generateJava(Compiler.java:198)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:373)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:353)
    at org.apache.jasper.compiler.Compiler.compile(Compiler.java:340)
    at org.apache.jasper.JspCompilationContext.compile(JspCompilationContext.java:646)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:357)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:390)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:334)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.liferay.portal.kernel.servlet.filters.invoker.InvokerFilterChain.doFilter(InvokerFilterChain.java:72) 
```

谁能告诉我问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T09:31:41.310

我认为这个指令中的错误是：`<%@ taglib prefix="tags" tagdir="/WEB-INF/tags" %>`

它应该是：`<%@ taglib prefix="tags" tagdir="/WEB-INF/tags/tagDemo.tag" %>`

[我还在这里](http://www.softwaresummit.com/2005/speakers/BergmanJSP2.0TagFiles.pdf)找到了 JSP 2.0 自定义标签的好教程。

# mongoid - 如果至少存在一个重复项，则 Mongoid 会忽略 collection.insert

> ID：11752991
> 
> 赞同：0
> 
> 时间：2012-08-01T05:26:00.617
> 
> 标签：mongoid

我有一个独特的索引设置，`drop_dup: true`

`index({ key1: 1, key2: 1 }, { unique: true, drop_dups: true })`

插入多条记录时，我希望不重复成功，类似于 MySQL 的

`INSERT IGNORE INTO table ...`

.. 甚至`INSERT INTO table ... ON DUPLICATE KEY UPDATE`

所以如果我有记录：

`Model.collection.insert({'key1'=>'not-unique', 'key2'=>'boo'})`

似乎以下调用没有做任何事情。

`Model.collection.insert(`

`{'key1'=>'not-unique', 'key2'=>'boo'},`

`{'key1'=>'im-unique', 'key2'=>'me-too'}`

`)`

有没有办法至少`{'key1'=>'im-unique', 'key2'=>'me-too'}`在第二次通话中插入？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T13:37:24.057

It appears that you are looking for insert batch with continue_on_error and not single document update/upsert of which I think you are already informed.

[http://api.mongodb.org/ruby/current/Mongo/Collection.html#insert-instance_method](http://api.mongodb.org/ruby/current/Mongo/Collection.html#insert-instance_method)

With the 10gen driver, an equivalent of your example with a User model would be:

Gemfile

```
gem 'mongo'
gem 'bson_ext' 
```

test/unit/user_test.rb (excerpt)

```
col = Mongo::Connection.new['sandbox_test']['users']
col.insert({'key1'=>'not-unique', 'key2'=>'boo'})
assert_equal(1, User.count)
col.insert([{'key1'=>'not-unique', 'key2'=>'boo'},{'key1'=>'im-unique', 'key2'=>'me-too'}], :continue_on_error => true)
assert_equal(2, User.count) 
```

The above works in a simple unit test.

Mongoid 3 uses the Moped driver instead of the 10gen driver. In the 1.1.6 gem that you are using, moped does not support options / flags, but Durran added flags to the insert method circa July 28 in github.

[https://github.com/mongoid/moped/commit/2c7d6cded23f64f436fd9e992ddc98bbb7bbdaae](https://github.com/mongoid/moped/commit/2c7d6cded23f64f436fd9e992ddc98bbb7bbdaae)

[https://github.com/mongoid/moped/commit/f8157b43ef0e13da85dbfcb7a6dbebfa1fc8735c](https://github.com/mongoid/moped/commit/f8157b43ef0e13da85dbfcb7a6dbebfa1fc8735c)

As of mongoid 3.0.3 with moped 1.2.0, the following insert batch with continue_on_error works.

```
Model.collection.insert([{'key1'=>'not-unique', 'key2'=>'boo'},{'key1'=>'im-unique', 'key2'=>'me-too'}], [:continue_on_error]) 
```

Note that the primary parameter to the insert method for batch insert is an Array object enclosed in square brackets - the square brackets are missing from your post.

Hope that this helps.

# django - django - 为移动设备上的会话设置 cookie

> ID：11752992
> 
> 赞同：1
> 
> 时间：2012-08-01T05:26:01.207
> 
> 标签：django, cookies, session-cookies

我在用

```
response.set_cookie(key, value, max_age=None, domain=domain, secure=None) 
```

这在 Web 浏览器上运行良好，因为只要浏览器打开，max_age=None 就会设置 cookie。但在 iOS 或 Android 上，浏览器从未真正关闭，而是一直在后台运行。因此，即使我退出浏览器，cookie 也会保持设置状态。仅当我手动关闭浏览器时它才有效。知道如何为移动设备上的会话设置 cookie 吗？

# android - mdpi、hdpi、xhdpi 文件夹如何工作？

> ID：11752997
> 
> 赞同：29
> 
> 时间：2012-08-01T05:26:32.637
> 
> 标签：android, resolution

摘自上面的 Android 开发者指南链接：

> 320dp：典型的手机屏幕（240x320 ldpi、320x480 mdpi、480x800 hdpi 等）。
> 480dp：像 Streak (480x800 mdpi) 这样的补间平板电脑。
> 600dp：7 英寸平板电脑 (600x1024 mdpi)。
> 720dp：10 英寸平板电脑（720x1280 mdpi、800x1280 mdpi 等）

所以我从这些尺寸的设计师那里得到了分辨率为每英寸 320 像素的图形（图像）

480x800 高清

720x1280 分辨率

800x1280 分辨率

我很困惑应该将哪个大小的图像放在 mdpi 文件夹、hdpi 文件夹和 xhdpi 文件夹中。我想制作一个可以在大多数安卓手机和平板电脑上运行的应用程序？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-01T05:40:30.453

您可以创建不同的图形对象以用于不同的像素密度。Android 将 mdpi（160 像素/英寸）视为基本密度。所以对于 mdpi 设备，1 dp = 1 像素。在更高的密度下，每英寸有更多的像素（hdpi 为 240，xhdpi 为 320）。Android 试图让图形图像在屏幕上占据相同的物理尺寸，而不管设备像素密度如何。因此，如果它找到的只是一个 mdpi 资源，并且设备是 hdpi，它会将图形缩放 240/160 = 150%，并将 xhdpi 的图形大小加倍。

如果您不希望这种自动缩放（这会使图形看起来很差），您可以简单地提供您自己的图形资源版本以用于更高的密度。这些图形的大小应与 Android 缩放 mdpi 资源的大小相同。

请注意，存储在图像文件中的像素/英寸与此无关。这完全取决于您将图形文件放在项目资源目录中的位置。任何放置在其中的图形`res/drawable`都被假定为适合 mdpi 显示的大小，就像放置在`res/drawable-mdpi`. 假设它找到的图像文件`res/drawable-hdpi`大小适合 hdpi 显示器等。当您的程序在特定设备上运行时，Android 将首先寻找与该设备的显示密度相匹配的图形。如果它没有找到一个，而是找到一个不同密度的，它将使用它并根据上述规则自动缩放图像。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-01T06:05:14.973

当您请求提供替代资源的资源时，Android 会根据当前的设备配置选择在运行时使用哪个替代资源。为了演示 Android 如何选择替代资源，假设以下可绘制目录分别包含相同图像的不同版本：

```
drawable/
drawable-en/
drawable-fr-rCA/
drawable-en-port/
drawable-en-notouch-12key/
drawable-port-ldpi/
drawable-port-notouch-12key/ 
```

并假设以下是设备配置：

```
Locale = en-GB 
Screen orientation = port 
Screen pixel density = hdpi 
Touchscreen type = notouch 
Primary text input method = 12key 
```

通过将设备配置与可用的替代资源进行比较，Android 从**drawable-en-port 中选择可绘制对象。**

系统根据以下逻辑决定使用哪些资源：

![在此处输入图像描述](../Images/583eef9f13202643b4e4e365f85bec4d.png)

Ref : [Android 如何找到最匹配的资源](http://developer.android.com/guide/topics/resources/providing-resources.html#BestMatch)

其他参考：[密度独立](http://developer.android.com/guide/practices/screens_support.html#density-independence)，[提供替代资源](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)和[最佳实践](http://developer.android.com/guide/practices/screens_support.html#screen-independence)

***我会说你应该阅读完整的页面*** [Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)，我认为没有比它更好的文档了......

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-01T05:40:22.090

我对所有的屏幕尺寸碎片感到困惑，但基本情况是：1.您需要在布局下创建各种文件夹以处理您的图像 2.图像将存在于 drawables 文件夹中，也位于各种文件夹下。3\. 你应该有一个基本的 /layout 和 /drawable 文件夹来伴随非特定文件夹 4\. 从 xhdpi 工作，然后缩小图像！

特定屏幕文件夹的示例： /layout-hdpi /layout-xhdpi /drawable-hdpi /drawable-xhdpi

据我所知：480 x 800 是 hdpi（旧手机，例如 S2、HTC Desire 等） 720 x 1280 是 xhdpi（新手机，例如 S3、Galaxy Nexus 等）

基本上，根据手机的不同，android 将从必要的文件夹中获取资源，如果没有，它将从主 '\layout' 或 '\drawable' 文件夹中获取。例如，如果文件夹存在，则在 Galaxy Nexus 上运行的应用程序将从 '\layout-xhdpi' 获取资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T05:43:08.563

是的，您可以制作一个应用程序，但需要创建文件夹：/res/drawable、/res/drawable-mdpi、/res/drawable-hdpi 并为所有屏幕尺寸添加内容