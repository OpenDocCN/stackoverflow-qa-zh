# StackOverflow 问答 11978000-11978999

# ajax - 如何将 Sencha Touch 2“POST”Ext.Ajax.Request 参数传递给默认的 Rails 控制器？

> ID：11978004
> 
> 赞同：1
> 
> 时间：2012-08-15T22:04:35.873
> 
> 标签：ajax, ruby-on-rails-3, sencha-touch-2, parameter-passing

我在 Sencha Touch 2 中有一个表单，我正在尝试使用“Ext.Ajax.request”将值传递给 POST 方法到 Heroku 上托管的 Ruby on Rails 服务器：

```
var name = Ext.getCmp('txtFestivalName').getValue(), 
    details = Ext.getCmp('txtFestivalDetails').getValue(),
    city = Ext.getCmp('txtFestivalCity').getValue(),
    period = Ext.getCmp('txtFestivalPeriod').getValue(),
    timings = Ext.getCmp('txtFestivalTiming').getValue(),
    telephone = Ext.getCmp('txtFestivalTelephone').getValue(),
    id = Ext.getCmp('txtFestivalId').getValue() 

Ext.Ajax.request({
        url: 'http://anyapp.herokuapp.com/festivals.json',
        method: 'POST',
        type:'json',
        params: 
        {
            id: id,
            name: name,
            details: details,
            city: city,
            period: period,
            timings: timings,
            telephone: telephone
        },
        callback: this.somecallbackfunction
        scope: this
    }); 
```

我想将创建函数的 Ruby on Rails 控制器代码保留为默认值，如下所示：

```
# POST /festivals
# POST /festivals.json
def create
@festival = Festival.new(params[:festiva])

respond_to do |format|
  if @festival.save
    format.html { redirect_to @festival, notice: 'Festival was successfully created.' }
    format.json { render json: @festival, status: :created, location: @festival }
  else
    format.html { render action: "new" }
    format.json { render json: @festival.errors, status: :unprocessable_entity }
  end
end 
```

结尾

如何重新格式化 Sencha 代码中的参数，以便它以适用于 RoR 桌面应用程序和 Sencha 应用程序的方式传递到 Ruby on Rails 控制器？

我已经想到将 RoR 控制器更改为此有效：

```
def create
@festival = Festival.new(:name => params[:name], :details => params[:details], :city =>
params[:city], :period => params[:period], :timings => params[:timings], :telephone => 
params[:telephone]) 
```

但是，当我这样做时，网络应用程序端会被破坏，它将为@festival 保存空白记录。但是 Sencha 应用程序将能够成功地将记录保存和更新到 RoR 数据库。到底是怎么回事？

这是一个非常好的参考，但我不确定它是如何工作的，我不想弄乱 underscore.js： [https ://gist.github.com/1506953](https://gist.github.com/1506953)

感谢您的帮助！

# javascript - 如何在 MVC3 下分配 JavaScript 值

> ID：11978006
> 
> 赞同：0
> 
> 时间：2012-08-15T22:04:40.243
> 
> 标签：javascript, asp.net-mvc-3

如何在 MVC3 Razor 下分配 JavaScript 值？

我不确定它是否会起作用......

谢谢！

```
<script type="text/javascript">

      var populate = false; // This is JS variable

       @if (Session["TechList"] == null)
       {
            populate = true;
       }

</script> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T22:09:56.573

```
var populate =false;
@if (Session["TechList"] == null)
{
    @:populate = true;
} 
```

这也将起作用

```
@if (Session["TechList"] == null)
{
  <text>populate = true;</text>
} 
```

但我喜欢用第一个，因为它更干净

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:49:35.113

我的建议：

```
<script type="text/javascript">
     var populate = @(Session["TechList"] == null ? "false": "true");
</script> 
```

# php - 处理不同控制器中的验证错误

> ID：11978008
> 
> 赞同：0
> 
> 时间：2012-08-15T22:04:46.623
> 
> 标签：php, validation, cakephp-2.0

我对 cakephp 还很陌生，所以我可能只是在这里设置错误。

我创建了一个包含评论和帖子（除其他外）的简单博客。

我可以在查看提交回评论控制器 (/controllers/comments/add) 的帖子时添加评论。

我遇到的问题是，当出现验证错误时，它会在/views/comments/add 视图中显示它们，而不是在我添加评论/views/posts/view 的视图中。

这必须是一件很常见的事情，我想，我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:33:52.100

您可以要求评论控制器的 add 方法呈现不同的视图：

```
$this->render('/Posts/view'); 
```

但是当然，您需要确保通过 Comments 控制器的 add 方法收集和设置“Posts/view/”文件所需的所有数据。

相反，我要做的只是让评论表单通过 AJAX 提交（你知道 AJAX 吗？）。这样，您可以呈现 Comments/add 视图（或其中的适当部分）而无需刷新页面的其余部分。

当然，禁用 Javascript 的用户仍然需要转到不同的页面来纠正他们的错误。但这不应该经常发生，一旦他们成功提交评论，您总是可以将他们重定向回帖子页面。

如果您是 CakePHP 新手，并且打算使用 AJAX，您可能希望在某处使用类似这样的东西：

```
if ($this->request->is('ajax')) {
    $this->render('/Elements/ajax_comment_form');
}
// If it's not AJAX it'll fall through and show the regular comment add.ctp view 
```

# encryption - 需要关于自签名 SSL 和 Java 的建议

> ID：11978010
> 
> 赞同：1
> 
> 时间：2012-08-15T22:04:57.610
> 
> 标签：encryption, ssl, self-signed

关于如何使用 Java 处理自签名证书的问题已经被多次询问，并且经常提供实现。但是，我不确定这些实现是否会给我正在寻找的安全/信任。

我的情况如下：我有一个客户端程序连接到我们的服务器应用程序。这两个我们都可以完全控制。我们的客户端使用 https 将流发布到我们服务器上的 URL，然后服务器响应。目前（这是我正在尝试解决的问题）服务器有一个自签名证书。Java 不喜欢这样，仅用于测试，我们通过信任任何证书几乎完全忽略了证书。

我对 SSL 知之甚少。我的老板说我们可以使用我们的自签名证书，只要我们不制作密码，它就会很安全。关键公众。这听起来对我来说是正确的，但是很多帖子都说自签名证书自动容易受到中间人攻击。这是否意味着 SSL 发送密码。密钥和证书？

既然我们可以控制两端，我们是否应该自己用密钥加密我们的数据，并在最后使用我们的密钥解密？还是有理由使用 SSL？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T22:18:24.393

不要盲目地信任任何证书（这会使连接容易受到 MITM 攻击），而是将您的 Java 客户端配置为信任该特定证书。自签名证书本质上不会使 SSL/TLS 连接容易受到 MITM 攻击，它们只是使它们的分发和信任评估更具体到这个特定的部署（即您必须手动配置它）。

您可以通过至少 3 种方式做到这一点（为您选择最简单的一种，我建议使用要点 #2）：

*   将服务器证书导入客户端的全局信任库（`lib/security/cacerts`在您的 JRE 目录中）。这将使所有使用此 JRE 运行的应用程序都信任此证书。
*   将服务器证书导入另一个信任库（可能是 的本地副本`lib/security/cacerts`），并使此特定应用程序使用此信任库。这可以使用`javax.net.ssl.trustStore`系统属性来完成。
*   使您的客户端应用程序使用`SSLContext`初始化并`X509TrustManager`配置为信任该证书：手动编写的内容或来自`TrustManagerFactory`通过加载包含该特定证书的本地密钥库初始化的信任管理器（如前面的方法）。

您将在[JSSE 参考指南](http://docs.oracle.com/javase/7/docs/technotes/guides/security/jsse/JSSERefGuide.html#Customization)中找到有关所有这些的更多详细信息。

（[这个对类似问题的回答](https://stackoverflow.com/a/859271/372643)应该为您提供正确执行所有这些操作的详细信息，尤其是`keytool -import ...`。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:12:10.323

反对自签名证书的论点主要适用于 Web 应用程序。由于使用当前的基础架构，浏览器将无法验证您的自签名证书。

由于您可以控制客户端，因此您可以简单地将您期望的证书硬编码到客户端中。例如，您可以计算证书的 sha1 哈希，并检查它是否与预期值匹配。这样，您甚至不需要信任数百个 CA。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T22:40:01.593

要实现安全通信，您首先需要确保与正确的计算机进行通信。当客户端第一次尝试建立安全连接时，它会 ping 服务器，服务器会用它的证书进行响应。此时，您**必须在继续之前验证服务器证书**。证书包含一个公钥和签名，可用于确保证书有效。例如，在网络浏览器中，这意味着检查它是否已由您的浏览器设置中列为受信任的授权机构签名，如果该检查失败，您将在浏览器中看到红色警告。在您的情况下，这意味着您已手动（或在代码中）将服务器证书添加到信任存储中，以便它受到信任。

# php - “只能通过引用传递变量”错误

> ID：11978013
> 
> 赞同：0
> 
> 时间：2012-08-15T22:05:05.550
> 
> 标签：php, csv

我无法真正阅读 PHP，但我试图通过 php 在我的页面中上传一个 csv 文件并收到以下错误。我知道有很多线程在谈论这个，但我不太明白它们的意思。如果有人可以向我解释发生了什么并提供解决方案，请寻找答案。

> **严格的标准**：只有变量应该通过引用在**C:\xampp\htdocs\search\php\loader\csvFileUploader1.php中的第****9**行
> 上传文件失败 >>> 错误代码：1

这是PHP

```
<?php
// using upload at click from http://code.google.com/p/upload-at-click/
// FileData is the name for the input file

$file_result = "";
$file = $_FILES['Filedata'];

$allowedExtensions = array("csv", "txt");
$extension = end(explode(".", $file["name"]));

function isAllowedExtension($fileName) {
    global $allowedExtensions;
    return in_array(end(explode(".", $fileName)), $allowedExtensions);
}

if($file["error"] > 0){
    echo "failure to upload the file >>> ". "Error code: ".$file["error"]."<br>";
}else{
    //echo " >>> CURRENT DIR: ".getcwd() . "\n";
    $workDir = getcwd();

    $dir = substr($workDir, 0, -10);
    $path = $file["name"];
    $newFileLoc = $dir.$path;

    $file_result.=
    "<br>     Upload: " . $file["name"] . "<br>" .
    "     Type: " . $file["type"] . "<br>" .
    "     Size: " . $file["size"] . "<br>" .
    "     file uploaded to: ".$newFileLoc."<br>";

    // txt - text/plain
    // rtf - application/msword
    // dat/obj - application/octet-stream
    // csv - application/vnd.ms-excel
    // maximum 200 MB file - 200,000,000 k

    if (    ($file["type"] == "application/vnd.ms-excel" || $file["type"] == "text/plain")
            && isAllowedExtension($file["name"])
            && ($file["size"] < 200000000)
        )
        {   
            move_uploaded_file($file["tmp_name"], $newFileLoc);
            //echo $file_result.=" >>> File uploaded successfull!!";
            echo "|".$path;//"filePath : " . $newFileLoc;

        }else{
            echo " >>> NOT a file valid: ". isAllowedExtension($file["name"]);
        }       
}

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T22:07:27.373

您不能将函数的返回值传递给`end()`.

做了：

```
$arrayVar = explode(".", $file["name"]);
$extension = end($arrayVar); 
```

其他 PHP 函数也会有同样的问题。例如`empty(someFunction())`不会工作。

# android - Android传入http请求端口重定向

> ID：11978021
> 
> 赞同：0
> 
> 时间：2012-08-15T22:05:46.243
> 
> 标签：android, http, webserver, robotics

这些是一些由 arm 结构管理的乐高机器人，在端口 80 上建立了 http 连接。有一个通信网络服务器在使用端口 8080 的 root android 设备上运行。

我可以将传入的 http 请求从 80 转发到 8080 吗？

# c - OpenCL：将指向全局内存的指针存储在本地内存中？

> ID：11978024
> 
> 赞同：2
> 
> 时间：2012-08-15T22:05:58.620
> 
> 标签：c, opencl, gpgpu

任何解决方案？

这甚至可能吗？

```
__global *float abc; // pointer to global memory stored in private memory 
```

我希望 abc 存储**在本地内存**而不是私有内存中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-03-31T09:06:09.573

我认为这在清单 5.2 中得到[了](http://www.fixstars.com/en/opencl/book/OpenCLProgrammingBook/opencl-c/)澄清：

```
__global int global_data[128];  // 128 integers allocated on global memory
__local float *lf;  // pointer placed on the private memory, which points to a single-precision float located on the local memory
__global char * __local lgc[8];  // 8 pointers stored on the local memory that points to a char located on the global memory 
```

正如我对指针的理解：[它们指向的位置]类型* [存储位置]名称；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T08:18:01.610

好吧，我之前也遇到过和你类似的问题，正如我探索的那样，我认为它是这样工作的：在 OpenCL 内核中，没有地址限定符（__local、__global 等）的内核中的变量将被自动考虑为存储在 __private 内存空间中。对于未使用空间限定符声明的指针，它也将被视为指向 __private 空间。这是一个示例代码片段：

```
__kernel void foo(__global uint *ptr)
{
    uint tid = get_global_id(0);
    uint * localPtr = ptr;
    uint   var= *(localPtr + tid);
    ... ...
} 
```

在上面的代码片段中，localPtr 是一个没有内存空间限定符的 uint 类型指针，所以会自动认为指向 _*私有内存空间。在 OpenCL 中，指向地址空间 A（*例如 _global）的指针只能分配给指向同一地址空间（__global）的指针。所以在上面的例子中，指向 __private 地址空间的指针不能用指向 __global 地址的指针 (ptr) 来分配。（关于这一点，您还可以参考“地址空间限定符”部分中的 OpenCL 规范）。希望这会有所帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T07:36:49.493

这是合法的：

```
global uint *globalPtr=&ptr[tid] 
```

# python - ImportError at / No module named urls

> ID：11978027
> 
> 赞同：3
> 
> 时间：2012-08-15T22:06:16.940
> 
> 标签：python, django, macos, django-admin, python-2.7

我在 virtualenv 下创建了一个基本的 Django 安装，启动了一个项目并启用了管理员和管理员文档。当我运行服务器时，我收到以下错误：

```
Request URL: http://127.0.0.1:8000/

Django Version: 1.4.1
Python Version: 2.7.2
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'django.contrib.admin',
 'django.contrib.admindocs')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/Users/farneman/Projects/project/project_env/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  101\.                             request.path_info)
File "/Users/farneman/Projects/project/project_env/lib/python2.7/site-packages/django/core/urlresolvers.py" in resolve
  298\.             for pattern in self.url_patterns:
File "/Users/farneman/Projects/project/project_env/lib/python2.7/site-packages/django/core/urlresolvers.py" in url_patterns
  328\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "/Users/farneman/Projects/project/project_env/lib/python2.7/site-packages/django/core/urlresolvers.py" in urlconf_module
  323\.             self._urlconf_module = import_module(self.urlconf_name)
File "/Users/farneman/Projects/project/project_env/lib/python2.7/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)

Exception Type: ImportError at /
Exception Value: No module named urls 
```

我的 urls.py 文件如下所示：

```
from django.conf.urls import patterns, include, url

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'projectname.views.home', name='home'),
    # url(r'^projectname/', include('projectname.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include('admin.site.urls')),
) 
```

我的 settings.py 文件的 Installed Apps 部分如下所示：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.admin',
    'django.contrib.admindocs',
) 
```

我在这里和其他地方浏览了许多其他帖子，但找不到解决方案。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T22:28:38.677

在您的 settings.py 文件中，确保 ROOT_URLCONF 是正确的。

它应该看起来像：

```
ROOT_URLCONF = '<INSERT PROJECT NAME>.urls' 
```

从您提供的内容来看，您可能希望确保它看起来像：

```
ROOT_URLCONF = 'projectname.urls' 
```

# django - Django Unique Slug by id

> ID：11978035
> 
> 赞同：5
> 
> 时间：2012-08-15T22:07:08.913
> 
> 标签：django, django-models

```
class Product(models.Model):
    title = models.CharField(max_length=75)

class Deal(models.Model):
    product = models.ForeignKey(Product)
    slug = models.SlugField(max_length=255, unique=True) 
```

具有与上述类似的基本设置，我想使用其交易的产品标题和交易本身的 ID 为每个 Deal 实例生成唯一的 slug。IE：交易的ID`"apple-iphone-4s-161"`在哪里`161`，前面的文字是产品的标题。

为此，我如何覆盖 Deal 模型的 save() 方法来应用它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T22:47:50.770

当然，您可以简单地覆盖模型上的 save() 方法（或为 post_save 信号制作接收器）。它会是这样的：

```
from django.template.defaultfilters import slugify

class Deal(models.Model):
product = models.ForeignKey(Product)
slug = models.SlugField(max_length=255, unique=True)

    def save(self, *args, **kwargs):
        super(Deal, self).save(*args, **kwargs)
        if not self.slug:
            self.slug = slugify(self.product.title) + "-" + str(self.id)
            self.save() 
```

但是这个解决方案的丑陋之处在于它会两次访问数据库（它被保存两次）。这是因为在创建新的 Deal 对象时，在您第一次保存它之前它不会有 id（而且您对此无能为力）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T19:06:10.413

我遇到了这个问题并测试了 jasisz 解决方案，并得到了超出最大递归深度的错误，所以我很少摆弄它，这就是我的样子：

```
def save(self, *args, **kwargs):
    if not self.id:
        self.slug = slugify(self.title)
    super(Node, self).save(*args, **kwargs) 
```

您可以对其进行编辑以满足您的需要，它会测试此记录是否存在，如果不存在则创建 slug 字段，否则会更新并且无需修改 slug 字段。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-12-21T15:14:48.263

你根本不应该在那个 slug 字段中有你的 id。造成这种情况的两个主要原因是：

1.  它会造成您遇到的问题
2.  它是数据库中的冗余数据 – id 已经存储

但是有一个简单的解决方案可以解决您的问题：将 slug 存储在数据库中的唯一原因是您可以逐行查找。但你不需要那个——你有身份证。所以你应该这样做：

```
class DealManager(models.Manager):
    def get_by_slug(slug):
       return self.get(id=slug.rsplit('-', 1)[1])

class Deal(models.Model):
    product = models.ForeignKey(Product)

    objects = DealManager()

    @property
    def slug(self):
        return slugify(f'{self.name}-f{self.id}') 
```

在您的视图中或任何您需要检索给定 slug 的项目的地方，您只需执行`Deal.objects.get_by_slug(slug)`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-05T04:54:36.353

我知道这可能不完全适合您的情况，但我记得遇到过类似的情况。我想我的`created_at`模型中有一个字段`auto_now=True`。或者类似的东西

我的蛞蝓看起来像这样

```
self.slug = '%s-%s' %(
        slugify(self.title),
        self.created_at
) 
```

或者你可以有

```
self.slug = '%s-%s' %(
        slugify(self.title),
        datetime.datetime.now()
) 
```

只需确保 slug`max_length`的长度足以包括全职`created_at`以及`title`，这样您就不会遇到非唯一或超过最大长度的异常。

# python - 反转一对一映射字典

> ID：11978037
> 
> 赞同：2
> 
> 时间：2012-08-15T22:07:19.957
> 
> 标签：python, dictionary

假设有一本字典

```
a = {'a':122,'b':123,'d':333,'e':'233'} 
```

现在我想将它恢复为一对一的字典，这样我们就可以做到这一点。

我试过的：

```
In [67]: ivd=[(v,k) for (k,v) in a.items()]

In [68]: ivd
Out[68]: [(122, 'a'), (123, 'b'), ('233', 'e'), (333, 'd')] 
```

现在可能是一些我们如何将其转换`ivd`为字典的方法。我的问题是

1.  如何将其更改`ivd`为字典？
2.  有没有更多的pythonic解决方案可以做到这一点？我认为它应该在那里。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T22:09:26.693

您可以使用 dict 构造函数：

```
ivd = dict((v, k) for (k, v) in a.iteritems()) 
```

或 python 2.7 或更高版本中的 dict 理解：

```
ivd = {v: k for (k, v) in a.items()} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T22:10:34.247

如果我理解正确，您就快到了：

```
>>> ivd={v:k for (k,v) in a.items()}
>>> ivd
{122: 'a', 123: 'b', 333: 'd', '233': 'e'} 
```

（为此应归功于 stummjr：[https](https://stackoverflow.com/a/11977757/289011) ://stackoverflow.com/a/11977757/289011 ）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T22:40:37.013

为什么不只是

```
ivd = {a[key]:key for key in a} 
```

你的字典在哪里？看起来简单多了。在 python 中，您可以直接遍历 dict 的键。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-02T10:32:44.300

这里有两种方法可以做到：

```
a = {"a": 122, "b": 123, "d": 333, "e": "233"}

expected = {122: "a", 123: "b", 333: "d", "233": "e"}

# Use to invert dictionaries that have unique values
inverted_dict = dict(map(reversed, a.items()))
assert inverted_dict == expected, "1st"

# Use to invert dictionaries that have unique values
inverted_dict = {value: key for key, value in a.items()}
assert inverted_dict == expected, "2nd"

print("PASSED!!!") 
```

# spring - RetryWithHttpsEntryPoint

> ID：11978039
> 
> 赞同：1
> 
> 时间：2012-08-15T22:07:34.630
> 
> 标签：spring

我在 netbeans 上的 Web 应用程序上的某些链接有问题。Web 应用程序实现了 spring mvc 和 spring security。

所以基本上，我在其中一个页面上有一个链接

```
<td colspan="2" align="center">
<h3 align="#center">You can login <a href="login.jsp">here</a>.</h3>
</td> 
```

然后，当我单击“此处”时，我收到一条错误消息：“Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。”

日志如下：

```
14:45:34,255 DEBUG FilterChainProxy:176 - Converted URL to lowercase, from: '/login.jsp'; to: '/login.jsp'
14:45:34,255 DEBUG FilterChainProxy:183 - Candidate is: '/login.jsp'; pattern is /**; matched=true
14:45:34,255 DEBUG FilterChainProxy:351 - /login.jsp at position 1 of 13 in additional filter chain; firing Filter: 'org.springframework.security.web.access.channel.ChannelProcessingFilter@a3d369'
14:45:34,255 DEBUG DefaultFilterInvocationSecurityMetadataSource:178 - Converted URL to lowercase, from: '/login.jsp'; to: '/login.jsp'
14:45:34,255 DEBUG DefaultFilterInvocationSecurityMetadataSource:196 - Candidate is: '/login.jsp'; pattern is /; matched=false
14:45:34,255 DEBUG DefaultFilterInvocationSecurityMetadataSource:196 - Candidate is: '/login.jsp'; pattern is /login.jsp*; matched=true
14:45:34,255 DEBUG ChannelProcessingFilter:101 - Request: FilterInvocation: URL: /login.jsp; ConfigAttributes: [REQUIRES_SECURE_CHANNEL]
14:45:34,255 DEBUG RetryWithHttpsEntryPoint:65 - Redirecting to: 
14:45:34,271 DEBUG FilterChainProxy:176 - Converted URL to lowercase, from: '/'; to: '/' 
```

如果您注意到，我的应用会丢失网址。它能够匹配 url，但随后使用 RetryWithHttpsEntryPoint，它被重定向到空白 url。

有什么建议可以解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:41:20.827

当您重定向到控制器中的不同 url 时，就会发生这种情况。

例如：

```
 return "redirect:/page"; 
```

其中“page”是您要导航的页面的直接名称，如果您要重定向到控制器中的其他映射，则应使用重定向。

相反，你应该去

```
 return "/page"; 
```

# javascript - 使用 D3.js 进行分页

> ID：11978040
> 
> 赞同：3
> 
> 时间：2012-08-15T22:07:34.857
> 
> 标签：javascript, json, charts, pagination, d3.js

我正在为 D3 条形图使用来自 API 的大量 JSON 数据。我想一次只显示 10-20 条。有没有办法使用 D3 进行分页，或者我需要用另一种方式（php）吗？欢迎任何最佳实践或建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-11T02:13:17.170

我知道这是一个迟到的问题，但也许这仍然可以帮助你。

我将通过创建仅包含您希望在特定时间显示的数据的第二个数组来在 d3 中创建分页。这个切片数组将来自您的主数据数组。通过控制数组的切片位置，您可以控制分页。

我在这里创建了一个简单的示例，其中将一个长数组划分为五个栏的“页面”。

[http://jsfiddle.net/zNxgn/2/](http://jsfiddle.net/zNxgn/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T15:59:29.440

请仔细阅读这段代码，但如果你通过我的代码块，它是有意义的。我只放了代码的基本部分。链接：[http ://bl.ocks.org/pragyandas](http://bl.ocks.org/pragyandas)

```
 var legendCount = data.series.length;

            var legendWidth=10; var legendSpacing=6;

            var netLegendHeight=(legendWidth+legendSpacing)*legendCount;
            var legendPerPage,totalPages,pageNo;

            if(netLegendHeight/height > 1){

                legendPerPage=Math.floor(height/(legendWidth+legendSpacing));
                totalPages=Math.ceil(legendCount/legendPerPage);

                pageNo=1;

                var startIndex=(pageNo-1)*legendPerPage;
                var endIndex=startIndex+legendPerPage;
                var seriesSubset=[],colorSubset=[];

                for(var i=0;i<data.series.length;i++){
                    if(i>=startIndex && i<endIndex){
                        seriesSubset.push(data.series[i]);
                        colorSubset.push(colors[i]);
                    }
                }  

                DrawLegendSubset(seriesSubset,colorSubset,legendPerPage,pageNo,totalPages);
            }

            function DrawLegendSubset(seriesSubset,colorSubset,legendPerPage,pageNo,totalPages){

                var legend = svg.selectAll("g.legendg")
                .data(seriesSubset)
                .enter().append("g")
                .attr('class','legendg')
                .attr("transform", function (d, i) { return "translate(" + (width-40) + ","+ i*(legendWidth+legendSpacing) +")"; });

                legend.append("rect")
                .attr("x", 45)
                .attr("width", legendWidth)
                .attr("height", legendWidth)
                .attr("class", "legend")
                .style('fill',function(d,i){return colorSubset[i];});

                legend.append("text")
                .attr("x", 60)
                .attr("y", 6)
                .attr("dy", ".35em")
                .style("text-anchor", "start")
                .text(function (d) { return d.name; });

                var pageText = svg.append("g")
                .attr('class','pageNo')
                .attr("transform", "translate(" + (width+7.5) + ","+ (legendPerPage+1)*(legendWidth+legendSpacing) +")");

                pageText.append('text').text(pageNo+'/'+totalPages)
                .attr('dx','.25em');

                var prevtriangle = svg.append("g")
                .attr('class','prev')
                .attr("transform", "translate(" + (width+5) + ","+ (legendPerPage+1.5)*(legendWidth+legendSpacing) +")")
                .on('click',prevLegend)
                .style('cursor','pointer');

                var nexttriangle = svg.append("g")
                .attr('class','next')
                .attr("transform", "translate(" + (width+20) + ","+ (legendPerPage+1.5)*(legendWidth+legendSpacing) +")")
                .on('click',nextLegend)
                .style('cursor','pointer');

                nexttriangle.append('polygon')
                    .style('stroke','#000')
                    .style('fill','#000')
                    .attr('points','0,0, 10,0, 5,5');

                prevtriangle.append('polygon')
                    .style('stroke','#000')
                    .style('fill','#000')
                    .attr('points','0,5, 10,5, 5,0');

                if(pageNo==totalPages){
                    nexttriangle.style('opacity','0.5')
                    nexttriangle.on('click','')
                    .style('cursor','');
                }
                else if(pageNo==1){
                    prevtriangle.style('opacity','0.5')
                    prevtriangle.on('click','')
                    .style('cursor','');
                }

            }

            function prevLegend(){
                pageNo--;

                svg.selectAll("g.legendg").remove();
                svg.select('.pageNo').remove();
                svg.select('.prev').remove();
                svg.select('.next').remove();

                var startIndex=(pageNo-1)*legendPerPage;
                var endIndex=startIndex+legendPerPage;

                var seriesSubset=[],colorSubset=[];

                for(var i=0;i<data.series.length;i++){
                    if(i>=startIndex && i<endIndex){
                        seriesSubset.push(data.series[i]);
                        colorSubset.push(colors[i]);
                    }
                }  

                DrawLegendSubset(seriesSubset,colorSubset,legendPerPage,pageNo,totalPages);
            }

            function nextLegend(){
                pageNo++;

                svg.selectAll("g.legendg").remove();
                svg.select('.pageNo').remove();
                svg.select('.prev').remove();
                svg.select('.next').remove();

                var startIndex=(pageNo-1)*legendPerPage;
                var endIndex=startIndex+legendPerPage;

                var seriesSubset=[],colorSubset=[];

                for(var i=0;i<data.series.length;i++){
                    if(i>=startIndex && i<endIndex){
                        seriesSubset.push(data.series[i]);
                        colorSubset.push(colors[i]);
                    }
                }  

               DrawLegendSubset(seriesSubset,colorSubset,legendPerPage,pageNo,totalPages);
            }
```

# android - Android屏幕亮度最大值？

> ID：11978042
> 
> 赞同：10
> 
> 时间：2012-08-15T22:07:51.803
> 
> 标签：android, screen-brightness

```
 WindowManager.LayoutParams layout = getWindow().getAttributes();
    layout.screenBrightness = 1F;
    getWindow().setAttributes(layout); 
```

我将此代码添加到按钮 onClick 并且它有效！但是由于屏幕没有点亮MAX，是否有更高的价值？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T22:17:57.883

[如文档中所述](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#screenBrightness)，没有。设置`screenBrightness`为 1 应将亮度调整为全光。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T22:22:06.617

您应该能够将值设置为 1L，它应该达到最大亮度，因为这是最大亮度

```
WindowManager.LayoutParams layout = getWindow().getAttributes();
layout.screenBrightness = 1F;
getWindow().setAttributes(layout); 
```

将其设置为最大亮度..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-22T13:15:13.850

一个完整的例子展示了如何通过编码、前景、背景来改变亮度。 [亮度演示](https://github.com/XinyueZ/brightnessdemo)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-23T11:18:42.343

您使用此代码

```
float SysBackLightValue = 255f;

android.provider.Settings.System.putInt(BatteryBoosterActivity.this.getContentResolver(),   android.provider.Settings.System.SCREEN_BRIGHTNESS,(int) SysBackLightValue);                                    
Window myWindow =BatteryBoosterActivity.this. getWindow();
WindowManager.LayoutParams winParams = myWindow.getAttributes();                                    winParams.screenBrightness = 255f;
myWindow.setAttributes(winParams); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-15T21:19:15.333

您应该在设置亮度之前先禁用屏幕调光，否则您可能会获得低于 MAX 的亮度！在设置亮度之前尝试这样的事情：

```
// disable screen dimming (note - this also requires setting in manifest file)
PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
wl = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK, "DoNotDimScreen"); 
```

# arrays - 通过数组循环形成的多个 if 语句

> ID：11978043
> 
> 赞同：-1
> 
> 时间：2012-08-15T22:07:53.660
> 
> 标签：arrays, perl, loops, if-statement, conditional-statements

正如您将在下面看到的那样，“eval”包含代码的标量是一种糟糕的 perl 做法。除此之外，在下面的代码中，条件 '$condition{'b'}{'1'}' 没有通过循环运行。只有在数组中最先出现的条件才会运行，即。条件'$condition{'a'}{'1'}'，已运行。

```
my @parameter=('a','b');

my %condition;
$condition{'a'}{'1'}='$degree>=5';
$condition{'b'}{'1'}='$number>5';

foreach (@parameter) {
   my $count=0;

   foreach (<INPUT>) {
   my $degree=....;  #$degree defined
   my $number=.....; #$number defined
   if (eval $condition{$_}{'1'}) {$count++}  #only $condition{'a'}{'1'} was run!
   }

} 
```

第一个问题是为什么第一个条件会卡在循环中，第二个问题是如何修复它？非常感谢任何帮助/建议/解决方案。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:16:16.427

`foreach (@parameter)`循环运行它的主体for `'a'`。在该循环中，`foreach (<INPUT>)`循环将输入消耗到其末端。

然后`foreach (@parameter)`循环运行它的主体 for `'b'`。在那个循环中，`foreach (<INPUT>)`循环没有输入，因为它已经被消耗掉了。

# spring - 设置 defaultRowPrefetch 对查询没有影响

> ID：11978046
> 
> 赞同：2
> 
> 时间：2012-08-15T22:08:07.520
> 
> 标签：spring, jdbc, oracle11g

我在使用 Spring JDBC + Oracle 10g 时遇到了一个奇怪的问题。这是我的数据源配置：

```
 <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close">
        <property name="driverClassName" value="oracle.jdbc.OracleDriver" />
        <property name="url" value="jdbc:oracle:thin:@localhost:1521:XE" /> 
        <property name="username" value="admin" />
        <property name="password" value="admin" />
        <property name="validationQuery" value="SELECT 1 FROM DUAL"/>
        <property name="testOnBorrow" value="true"/>
        <property name="connectionProperties" value="defaultRowPrefetch=1000" />
    </bean> 
```

起初，我认为正在设置 connectionProperties 值，但当我在 SQL Developer 中微调查询时（成本从 3670 变为 285，计划解释从：45 变为：03），应用程序中的时间从未从原来的15秒。删除 connectionProperties 设置无效。所以，我所做的是：

DAO 类

```
private List<Activity> getAllActivitiesJustJDBC() {
    String query = "select * " + "from activity a, work_order w "
            + "where a.ac_customer = 'CSC' "
            + "and w.wo_customer = a.ac_customer "
            + "and a.ac_workorder = w.wo_workorder ";
    long startTime = System.currentTimeMillis();
    List<Activity> activities = new ArrayList<Activity>();
    try {
        Connection conn = jdbcTemplate.getDataSource().getConnection();
        PreparedStatement st = conn.prepareStatement(query);
        st.setFetchSize(1000);
        ResultSet rs = st.executeQuery();
        ActivityMapper mapper = new ActivityMapper();
        while (rs.next()) {
            Activity activity = mapper.mapRow(rs, 1);
            activities.add(activity);
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    System.out.println("Time it took...."
            + (System.currentTimeMillis() - startTime));
    System.out.println("Number of activities = " + activities.size());
    return activities;
} 
```

这一次，获取 11,115 行所需的时间平均为 2 秒。关键语句是 setFetchSize(1000)。所以....我喜欢选项#2，但我需要关闭连接还是 Spring 为我处理这个？在选项 #1 中，我将使用 jdbcTemplate 调用查询方法，使用我的数据对象传入参数化查询和 BeanPropertyRowMapper 实例，然后返回列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:54:10.483

Ok from looking at other questions similar to this one, I do need to close out the connection starting with the result set, then statement, and then the connection using a finally. I also remembered (from the days before Spring) I needed to wrap all that around a try/catch and then not really do anything if an exception occurs closing a connection.

FYI, I wonder if there's a way to set the fetch size when defining the datasource using Spring.

Here's the final method:

```
private List<Activity> getAllActivitiesJustJDBC() {
    String query = "select * " + "from activity a, work_order w "
            + "where a.ac_customer = 'CSC' "
            + "and w.wo_customer = a.ac_customer "
            + "and a.ac_workorder = w.wo_workorder ";
    long startTime = System.currentTimeMillis();
    List<Activity> activities = new ArrayList<Activity>();
    Connection conn = null;
    PreparedStatement st = null;
    ResultSet rs = null;
    try {
        conn = jdbcTemplate.getDataSource().getConnection();
        st = conn.prepareStatement(query);
        st.setFetchSize(1000);
        rs = st.executeQuery();
        while (rs.next()) {
            activities.add(ActivityMapper.mapRow(rs));
        }
    } catch (Exception ex) {
        ex.printStackTrace();
    }
    finally {
        try {
            rs.close();
            st.close();
            conn.close();
        }
        catch (Exception ex){
            //Not much we can do here
        }
    }
    System.out.println("Time it took...."
            + (System.currentTimeMillis() - startTime));
    System.out.println("Number of activities = " + activities.size());
    return activities;
} 
```

# c# - 无法在 NetworkService 帐户中启动 Windows 服务

> ID：11978054
> 
> 赞同：8
> 
> 时间：2012-08-15T22:09:12.260
> 
> 标签：c#, .net, windows-services, network-service

我有一个 Windows 服务项目实现，我正在尝试将其安装为网络服务。

```
process = new ServiceProcessInstaller();
process.Account = ServiceAccount.NetworkService; 
```

但是，每当我尝试启动服务时，我都会得到：

```
System error 5 has occurred.

Access is denied. 
```

这是在`net start MyService`以管理员身份运行的 Visual Studio 命令提示符中运行命令之后出现的。

关于如何使它工作的任何帮助？谢谢。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-16T08:44:07.913

我会检查网络服务帐户是否具有执行权限。检查步骤：

1.  在 Windows 资源管理器中，转到包含服务二进制文件的文件夹
2.  右键单击文件夹 > 属性 > 安全选项卡 > 编辑按钮
3.  添加>“网络服务”>确定
4.  给它完全控制权（只是为了测试然后减少权限直到它工作）

![截屏](../Images/820b992c870fa2c609877f458257d0ec.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T22:14:23.107

您`Net Start MyService`可能没有以升级的权限运行。您的命令需要（我相信）管理权限。

**更新**

不知道为什么，但是您对服务的特权很奇怪。默认情况下，服务的权限应如下所示：

```
D:(A;CI;CCDCLCSWRPWPDTLOCRSDRCWDWO;;;SY)

ACE Type: ACCESS_ALLOWED_ACE_TYPE
Trustee: NT AUTHORITY\SYSTEM
AccessMask:
  ADS_RIGHT_DELETE
  ADS_RIGHT_READ_CONTROL
  ADS_RIGHT_WRITE_DAC
  ADS_RIGHT_WRITE_OWNER
  ADS_RIGHT_DS_CREATE_CHILD
  ADS_RIGHT_DS_DELETE_CHILD
  ADS_RIGHT_ACTRL_DS_LIST
  ADS_RIGHT_DS_SELF
  ADS_RIGHT_DS_READ_PROP
  ADS_RIGHT_DS_WRITE_PROP
  ADS_RIGHT_DS_DELETE_TREE
  ADS_RIGHT_DS_LIST_OBJECT
  ADS_RIGHT_DS_CONTROL_ACCESS 
```

但是你的看起来像：

```
D:(A;;CCLCSWRPWPDTLOCRRC;;;SY)

ACE Type: ACCESS_ALLOWED_ACE_TYPE
Trustee: NT AUTHORITY\SYSTEM
AccessMask:
  ADS_RIGHT_READ_CONTROL
  ADS_RIGHT_DS_CREATE_CHILD
  ADS_RIGHT_ACTRL_DS_LIST
  ADS_RIGHT_DS_SELF
  ADS_RIGHT_DS_READ_PROP
  ADS_RIGHT_DS_WRITE_PROP
  ADS_RIGHT_DS_DELETE_TREE
  ADS_RIGHT_DS_LIST_OBJECT
  ADS_RIGHT_DS_CONTROL_ACCESS 
```

我不确定这到底是怎么回事。尝试卸载并重新安装？

您可以下载 SddlParse (google it :) 来解析[安全描述符定义语言](http://msdn.microsoft.com/en-us/library/windows/desktop/aa379570%28v=vs.85%29.aspx)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-15T23:29:48.000

“访问被拒绝”消息适用于尝试启动服务的用户，而不是运行服务的帐户。

您可以从以下位置启动服务：

1.  服务控制面板小程序？
2.  您自己启动的提升命令提示符（不是来自 Visual Studio）？

# ruby-on-rails - 将可重用的 HTML 代码放在哪里？

> ID：11978061
> 
> 赞同：2
> 
> 时间：2012-08-15T22:09:33.850
> 
> 标签：ruby-on-rails, twitter-bootstrap, modal-dialog

我正在编写一个允许用户删除各种记录的 Rails 应用程序。按下删除按钮后，我想使用[bootstrap](http://twitter.github.com/bootstrap/javascript.html#modals)显示确认对话框。我想在我的几个视图中使用这个相同的对话框，所以我需要在我的大多数页面中包含相同的 HTML 片段。

我是 Rails 新手，我仍在学习约定。谁能建议放置对话代码的最佳（或标准）位置？它应该是部分进入`views/layouts/_confirm_delete_dialog.html.erb`，应该进入内部`application.html.erb`，还是应该放在其他地方？

提前感谢您的建议，

D.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:14:06.563

在您的 Views 文件夹中，您可以创建一个通用文件夹（随意命名）。如果您有一个变量需要传递到总体布局，您绝对可以这样做，但您需要确保您传递的信息不会与从模型中提取的字段发生冲突. 例如，如果您有两个模型，一个具有公共字段，而另一个没有，那么您将不希望拥有使用公共字段的通用消息。但是，像 created_at 或 updated_at 这样的东西就可以了。

您将使用类似的代码，

`<%= render 'general/simple_message', :f => f %>`

在您的视图文件夹中，您将有一个名为的目录`general`和一个名为`_simple_message.html.erb`.

# android - 为 Android 图库注册图像文件格式

> ID：11978062
> 
> 赞同：0
> 
> 时间：2012-08-15T22:09:46.743
> 
> 标签：android, gallery, media

是否可以注册一种新的媒体文件格式，可以使用 Android 的内置图片库查看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:18:42.553

不，这是无法做到的。文件格式的注册在 Gallery 的 AndroidManifest.xml 中完成。所以你不能改变它。

# c# - 在 c# Parallel.ForEach 中的 List.Add() 上出现“索引越界”错误

> ID：11978064
> 
> 赞同：15
> 
> 时间：2012-08-15T22:09:53.687
> 
> 标签：c#, .net

这是代码

```
List<string> something = new List<string>();
Parallel.ForEach(anotherList, r =>
     {
            .. do some work
             something.Add(somedata);
      }); 
```

`Index out of bounds`每百次运行我会收到大约 1 次错误。有没有办法防止线程引起的冲突（我假设）？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-15T22:15:55.257

为了防止出现此问题，您可以[`ConcurrentQueue`](http://msdn.microsoft.com/en-us/library/dd267265.aspx)在并行部分中使用或类似的并发集合，而不是 List。并行任务完成后，您可以将其放入`List<T>`.

有关更多信息，请查看 System.Collections.Concurrent 命名空间以找到适合您的用例的集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-21T05:56:12.893

我发现这`lock (yourObject)`也否定了线程问题

# .htaccess - .htaccess 301 重定向到没有查询字符串的同一页面

> ID：11978066
> 
> 赞同：0
> 
> 时间：2012-08-15T22:09:58.067
> 
> 标签：.htaccess, redirect

我想创建一个条件，如果页面在 URL 中有参数，例如 ?print=1 - 将此页面重定向到自身而不使用任何查询字符串。

例子：

我想要这个页面：

```
http://sos-med.com/en/specific_page.html?print=1&ok=1 
```

tp 重定向（301）到没有查询字符串的相同 URL：

```
http://sos-med.com/en/specific_page.html 
```

* * *

我的代码是：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^*print=*$ [NC]
RewriteRule ^(.*)$ %{REQUEST_URI}? 
```

我没有测试服务器，你能告诉我我的代码是否正常吗？

上面的代码适用于网站上的每个页面。在实施该规则之前，我想尝试一个特定页面的重定向（参见我的示例）。
如何修改代码以仅使用“specific_page.html”？

我只想要 .htaccess 解决方案，而不是 PHP 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:18:26.763

您很接近，您的`%{QUERY_STRING}`正则表达式不正确，并且您缺少 301 重定向标志：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^print=.*$ [NC]
RewriteRule ^(.*)$ %{REQUEST_URI}? [L,R=301] 
```

试试看。

* * *

> 谢谢，如果我想重定向单个特定页面： sos-med.com/en/aaa.html?print=1&ok=1 到 sos-med.com/en/aaa.html ？——</p>

然后您将更改规则匹配的内容：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^print=.*$ [NC]
RewriteRule ^en/aaa.html$ %{REQUEST_URI}? [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:18:42.307

试试这个：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} ^(.*&)?print= [NC]
RewriteRule ^(.*)$ /$1? [L,R=301] 
```

# javascript - Firebug 找到隐藏我的元素的脚本

> ID：11978069
> 
> 赞同：2
> 
> 时间：2012-08-15T22:10:16.230
> 
> 标签：javascript, firebug

我多年来一直在使用萤火虫，但从未充分发挥其潜力。我从来没有真正用它做过大量的 javascript 调试。

这是我的问题：

如果页面只有一个或两个自定义 js 文件，我的页面上有一个元素会在 mouseOver 上消失，这将很容易调试。然而，该网站有负载。（不是我的工作）我可以使用 fire bug 来追踪导致我的元素消失的脚本吗？

即配置firebug 来观看我的元素> 刷新> mouseOver > 查看什么脚本文件和事件在哪一行？

多谢你们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:15:24.563

在 HTML 中找到元素（使用检查），右键单击节点并选择`Break On`> `Attribute Change`。

之后将鼠标放在上面，您将跟踪到修改节点的位置

PS：对于这种工作，我更喜欢 Chrome 调试器——它有更好的（从我个人看来）堆栈跟踪信息。

# lua - 如何停止执行 .wlua 文件？

> ID：11978071
> 
> 赞同：1
> 
> 时间：2012-08-15T22:10:33.087
> 
> 标签：lua

是否可以强制停止 .wlua 文件？我想我必须使用 Lua 命令行来执行此操作，但我似乎不知道如何阻止它们。

如果可能，怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T12:54:08.053

因为`wlua.exe`不打开控制台窗口（这就是目的）并且您不能发送 Ctrl-C，所以终止此类应用程序的唯一方法是使用任务管理器中的进程窗口。但是请注意，进程名称将`wlua.exe`用于以这种方式打开的每个文件。

当然，它只在应用程序没有响应时使用。您的 GUI 应用程序应该提供一种关闭它的方法，例如关闭按钮、侦听 ESC 键等。

# c# - 在 Silverlight 中为弹出窗口添加图像到背景

> ID：11978073
> 
> 赞同：0
> 
> 时间：2012-08-15T22:10:36.863
> 
> 标签：c#, silverlight, silverlight-4.0, popup, background-image

**问题** 我想在弹出窗口的背景中添加图像。我对 Silverlight 还很陌生，所以如果以下代码中存在一些明显的新手错误，我深表歉意

```
<Popup x:Name="MyPOP" HorizontalOffset="200" VerticalOffset="200" IsOpen="False"  >

        <StackPanel Width="800" Height="800" Background="Red">
            <Button Content="GO AMERICA" Click="Button_Click_1"  Width="100" Height="50" />
            <Canvas>
                <TextBlock Text="THESE COLORS DON'T RUN!!!!" />
            <Canvas.Background>
                <ImageBrush ImageSource="http://www.ilovethebronx.com/sites/default/files/events_pics/fireworks.jpg?1339518424"/>
            </Canvas.Background>

            </Canvas>
            </StackPanel>

    </Popup> 
```

有什么建议么？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:34:26.353

您只需要在画布上设置一个高度，尽管我怀疑这更像是您可能想要的：

```
<Popup x:Name="MyPOP" HorizontalOffset="200" VerticalOffset="200" IsOpen="True"  >

        <Grid Width="800" Height="800" Background="Red">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition />
            </Grid.RowDefinitions>
            <Button Content="GO AMERICA" Click="Button_Click_1"  Width="100" Height="50" />
            <Border Grid.Row="1">
                <TextBlock Text="THESE COLORS DON'T RUN!!!!" />
                <Border.Background>
                    <ImageBrush ImageSource="http://www.ilovethebronx.com/sites/default/files/events_pics/fireworks.jpg?1339518424"/>
                </Border.Background>

            </Border>
        </Grid>

    </Popup> 
```

# java - Java：当对象在屏幕上移动时，MouseListener 不注册

> ID：11978075
> 
> 赞同：0
> 
> 时间：2012-08-15T22:10:46.180
> 
> 标签：java, events, mouse, listener, mouselistener

我正在制作一个简单的游戏，其中一个红球和一个蓝球以随机速度沿 x 轴（以及沿 y 轴恒定速度）在屏幕上移动。玩家通过点击球来得分，这会重置他们的位置并根据球沿 x 轴移动的速度为玩家的得分添加分数。我已经实现了一个 MouseListener 来跟踪玩家的动作。当球的运动被注释掉时，MouseListener 完美地记录了一切。当球被允许移动时，MouseListener 只会以看似随机的间隔注册。我不再相信这是一个命中检测问题，因为无论您击中还是未命中，程序都会播放声音，并且当 MouseListener 无法注册时没有声音播放。

代码：

主班

```
import java.applet.*;
import java.awt.*;
import java.awt.event.*;

public class Main extends Applet implements Runnable, MouseListener{
    private static final long serialVersionUID = 7526472295622776147L; 

    private int speed;

    boolean isStopped=true;

    private Player player;
    private Ball redball;
    private Ball blueball;

    Thread t;

    AudioClip shotnoise;
    AudioClip hitnoise;
    AudioClip outnoise;

    Font f = new Font ("Serif", Font.BOLD, 20);

    Cursor c;

    private Image dbImage;
    private Graphics dbg;

    public void init(){
        this.addMouseListener(this);

        setSize(400,400);

        c=new Cursor(Cursor.CROSSHAIR_CURSOR);
        this.setCursor(c);

        setBackground (Color.black);

        setFont (f);

        if (getParameter ("speed") != null)
        {
            speed = Integer.parseInt(getParameter("speed"));
        }
        else speed = 15;

        hitnoise = getAudioClip (getCodeBase() , "gun.au");
        hitnoise.play();
        hitnoise.stop();
        shotnoise = getAudioClip (getCodeBase() , "miss.au");
        shotnoise.play();
        shotnoise.stop();
        outnoise = getAudioClip (getCodeBase() , "error.au");
        outnoise.play();
        outnoise.stop();

        player = new Player ();
        redball = new Ball (10, 190, 250, 1, -1, 4, Color.red, outnoise, player);
        blueball = new Ball (10, 190, 150, 1, 1, 3, Color.blue, outnoise, player);
    }

    public void start ()
    {
        t = new Thread (this);
        t.start ();
    }

    public void stop ()
    {
    }

    public void run(){
        Thread.currentThread().setPriority(Thread.MIN_PRIORITY);

        while(true){
            if(player.getLives()>=0 && !isStopped){
                redball.move();
                blueball.move();
            }

            repaint();

            try{
                Thread.sleep(speed);
            }

            catch(InterruptedException e){
            }

            Thread.currentThread().setPriority(Thread.MAX_PRIORITY);
        }
    }

    public void paint(Graphics g){
        if(player.getLives()>=0){
            g.setColor(Color.yellow);

            g.drawString("Score: " + player.getScore(),10,40);
            g.drawString("Lives: "+ player.getLives(), 300, 40);

            redball.DrawBall(g);
            blueball.DrawBall(g);

            if(isStopped){
                g.setColor(Color.yellow);

                g.drawString("Double Click to Start",40, 200);
            }
        }
        else if(player.getLives()<0){
            g.setColor(Color.yellow);

            g.drawString("Game Over!",130,100);
            g.drawString("You Scored: "+player.getScore()+"Points!",90, 140);

            if (player.getScore() < 300) g.drawString ("Well, it could be better!", 100, 190);
            else if (player.getScore() < 600 && player.getScore() >= 300) g.drawString ("That was not so bad", 100, 190);
            else if (player.getScore() < 900 && player.getScore() >= 600) g.drawString ("That was really good", 100, 190);
            else if (player.getScore() < 1200 && player.getScore() >= 900) g.drawString ("You seem to be very good!", 90, 190);
            else if (player.getScore() < 1500 && player.getScore() >= 1200) g.drawString ("That was nearly perfect!", 90, 190);
            else if (player.getScore() >= 1500) g.drawString ("You are the Champingon!",100, 190);

            g.drawString("Double Click on the Applet to Play Again!",20,220);

            isStopped=true;
        }
    }

    public void update(Graphics g){
        if(dbImage==null){
            dbImage=createImage(this.getSize().width,this.getSize().height);
            dbg=dbImage.getGraphics();
        }

        dbg.setColor(getBackground());
        dbg.fillRect(0,0,this.getSize().width,this.getSize().height);

        dbg.setColor(getForeground());
        paint(dbg);

        g.drawImage(dbImage,0,0,this);
    }

    public void mouseClicked(MouseEvent e){
        if(!isStopped){
            if(redball.userHit(e.getX(),e.getY())){
                hitnoise.play();

                redball.wasHit();
            }

            else if (blueball.userHit (e.getX(),e.getY())){
                hitnoise.play();

                blueball.wasHit();
            }
            else{
                shotnoise.play();
            }
        }
        else if(isStopped&&e.getClickCount()==2){
            isStopped=false;
            init();
        }
    }

    public void mouseEntered(MouseEvent e){
    }

    public void mouseExited(MouseEvent e){
    }

    public void mousePressed(MouseEvent e){
    }

    public void mouseReleased(MouseEvent e){
    }
} 
```

球类

```
import java.applet.*;
import java.awt.*;
import java.util.*;

public class Ball{
    private int x_pos;
    private int y_pos;
    private int x_speed;
    private int y_speed;
    private int radius;

    private int first_x;
    private int first_y;

    private int max_speed;

    private final int x_leftout = 10;
    private final int x_rightout = 370;
    private final int y_upout = 45;
    private final int y_downout = 370;

    Color color;

    AudioClip out;

    Player player;

    Random rnd=new Random();

    public Ball(int radius, int x, int y, int vx, int vy, int ms, Color color, AudioClip out, Player player){
        this.radius=radius;

        x_pos=x;
        y_pos=y;

        first_x=x;
        first_y=y;

        x_speed=vx;
        y_speed=vy;

        max_speed = ms;

        this.color = color;

        this.out = out;

        this.player = player;
    }

    public void move(){
        x_pos+= x_speed;
        y_pos+=y_speed;
        isOut();
    }

    public void wasHit(){
        x_pos = first_x;
        y_pos = first_y;

        x_speed = (rnd.nextInt ()) % max_speed;
    }

    private boolean isOut(){
        if(x_pos>x_rightout){
            x_pos=first_x;
            y_pos=first_y;

            out.play();

            x_speed=(rnd.nextInt())%max_speed;

            player.looseLife();

            return true;
        }
        else if(x_pos<x_leftout){
            x_pos=first_x;
            y_pos=first_y;

            out.play();

            x_speed=(rnd.nextInt())%max_speed;

            player.looseLife();

            return true;
        }
        else if(y_pos>y_downout){
            x_pos=first_x;
            y_pos=first_y;

            out.play();

            x_speed=(rnd.nextInt())%max_speed;

            player.looseLife();

            return true;
        }
        else if(y_pos<y_upout){
            x_pos=first_x;
            y_pos=first_y;

            out.play();

            x_speed=(rnd.nextInt())%max_speed;

            player.looseLife();

            return true;
        }
        else return false;
    }

    public boolean userHit(int mouse_x, int mouse_y){
        int dx=Math.abs(x_pos-mouse_x);
        int dy=Math.abs(y_pos-mouse_y);

        if(dx>radius){
            return false;
        }
        else if(dy>radius){
            return false;
        }
        else{ 
            player.AddScore(10*Math.abs(x_speed)+10);
            return true;
        }

    }

    public void DrawBall (Graphics g)
    {
        g.setColor (color);
        g.fillOval (x_pos - radius, y_pos - radius, 2*radius, 2*radius);
    }
} 
```

玩家等级

```
public class Player{
    private int lives;
    private int score;

    public Player(){
        lives=10;
        score=0;
    }

    public int getScore(){
        return score;
    }

    public int getLives(){
        return lives;
    }

    public void looseLife(){
        lives--;
    }

    public void AddScore(int points){
        score+=points;
    }
} 
```

# java - 使用 AsyncTask 传递可序列化对象

> ID：11978076
> 
> 赞同：0
> 
> 时间：2012-08-15T22:10:53.467
> 
> 标签：java, android

所以我正在使用 解析 a `JSONObject`，`JSON Parser`并使用`AsyncTask`. 我的问题是：我将如何传递所有这些对象？它们都是`Serializable`，我读过你可以创建一个`Intent`并将对象放入`Intent`using`putExtras`方法；但是，当我这样做时，我得到一个错误。

此外，为了创建所有对象，我在原始构造函数中使用构造函数调用每个不同对象的构造函数。所以我可以调用一个构造函数，然后那个构造函数调用其他构造函数，使用第一个构造函数中的方法。我知道这听起来可能有点令人困惑，但最终解析器会创建 8 个不同的对象，我想将它们传递给下一个活动。

我愿意接受有关如何做到这一点的任何建议。

编辑：我不想使用`Parcelable`它来做我想做的事情太复杂了，而且我不担心速度，因为我的文件很小。

```
@Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        this.setContentView(R.layout.main);

        checkWifiConnection(menuUrl);

    }

    class LoadJSON extends AsyncTask<String, Void, Restaurant>{

        @Override
        protected Restaurant doInBackground(String... params) {
            JSONObject jo=null;
            Restaurant rest = null;

            try {

                Log.i(TAG, "Running background thread"); 
                URL mURL = new URL(menuUrl);
                Log.i(TAG, mURL + ": menuUrl"); 
                URLConnection uc = mURL.openConnection();

                JsonParser parser = new JsonParser(); 

                try {
                    jo = parser.getJson(getApplicationContext(), uc);
                    rest = new Restaurant(jo); <<-- Start the parsing using this constructor, which calls the other objects constructors
                } catch (IOException e) {

                    e.printStackTrace();
                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            } catch (MalformedURLException e) {

                e.printStackTrace();
            } catch (IOException e) {

                e.printStackTrace();
            } 
            return rest;
        }

        @Override
        protected void onPostExecute(Restaurant rest){

            ImageButton ib = (ImageButton)findViewById(R.id.continuebutton); 
            ib.setVisibility(View.VISIBLE); 
            ib.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    Intent homeIntent = new Intent(MainActivity.this, HomeActivity.class); 
                    homeIntent.putExtra("Restaurant", rest); //<< get an error here
                    startActivity(homeIntent); 

                }
            }); 

        } 
```

这是`Restaurant`课程：

```
package com.uie.menu.app;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class Restaurant implements Serializable {

    private final static String TAG = Restaurant.class.getSimpleName();

    String name;
    String category;
    String created_at;
    String updated_at;
    private List<Menu> menuList;
    private List<SideDishes> sideDishes;
    private List<Drinks> drinks; 
    private List<Ingredients> ingredients; 
    private List<DrinkCategories> drinkCategories; 

    private Restaurant() {
        menuList = new ArrayList<Menu>();
        sideDishes = new ArrayList<SideDishes>();
        drinks = new ArrayList<Drinks>();
        ingredients = new ArrayList<Ingredients>(); 
        drinkCategories = new ArrayList<DrinkCategories>(); 
    }

    public Restaurant(JSONObject jo) throws JSONException {

        this();

        if (jo != null) {

            this.name = jo.optString("name");
            Log.i(TAG, name + " : Restaurant 'name'");
            this.category = jo.optString("category");
            Log.i(TAG, category + " : Restaurant category");
            this.created_at = jo.optString("created_at");
            Log.i(TAG, created_at + " : Restaurant 'created at'");
            this.updated_at = jo.optString("updated_at");
            Log.i(TAG, updated_at + " : Restaurant 'updated_at'");

            addMenus(jo);
            addMenuSides(jo); 
            addMenuDrinks(jo); 
            addMenuIngredients(jo); 
            addDrinkCategories(jo); 

        }

    }

    private void addMenus(JSONObject jo) throws JSONException {
        JSONArray menus = jo.optJSONArray("menus");

        if (menus != null) {
            for (int ii = 0; menus != null && ii < menus.length(); ii++) {
                JSONObject menu = menus.optJSONObject(ii);
                Log.d(TAG,  "==Adding Restaurant Menu==");
                addMenu(new Menu(menu));
            }
            Log.d(TAG, "==Done adding Restaurant Menu==");
        }
    }

    private void addMenu(Menu menu) {
        menuList.add(menu);
    }

    private void addMenuSides(JSONObject jo) throws JSONException{
        JSONArray sides = jo.optJSONArray("side_dishes");

        if (sides != null) {
            for (int ii = 0; sides != null && ii < sides.length(); ii++) {
                JSONObject side = sides.optJSONObject(ii);
                Log.d(TAG,  "==Adding Restaurant Side Dish==");
                addSide(new SideDishes(side));
            }
            Log.d(TAG, "==Done adding Restaurant Side Dishes==");
        }
    }

    private void addSide(SideDishes side){
        sideDishes.add(side); 
    }

    private void addMenuDrinks(JSONObject jo) throws JSONException{
        JSONArray drinks = jo.optJSONArray("drinks");

        if (drinks != null) {
            for (int ii = 0; drinks != null && ii < drinks.length(); ii++) {
                JSONObject drink = drinks.optJSONObject(ii);
                Log.d(TAG,  "==Adding Restaurant Drinks==");
                addDrink(new Drinks(drink));
            }
            Log.d(TAG, "==Done adding Restaurant Drinks==");
        }
    }

    private void addDrink(Drinks drink){
        drinks.add(drink); 
    }

    private void addMenuIngredients(JSONObject jo){
        JSONArray ingredients = jo.optJSONArray("ingredients");

        if (ingredients != null) {
            Log.d(TAG,  "==Adding Restaurant Ingredient==");
            for (int ii = 0; ingredients != null && ii < ingredients.length(); ii++) {
                JSONObject ingredient = ingredients.optJSONObject(ii);

                addIngredient(new Ingredients(ingredient));
            }
            Log.d(TAG, "==Done adding Restaurant Ingredients==");
        }
    }

    private void addIngredient(Ingredients ingredient){
        ingredients.add(ingredient); 
    }

    private void addDrinkCategories(JSONObject jo) throws JSONException{
        JSONArray drinkCategories = jo.optJSONArray("drink_categories");

        if (drinkCategories != null) {
            Log.d(TAG,  "==Adding Restaurant Drink Categories==");
            for (int ii = 0; drinkCategories != null && ii < drinkCategories.length(); ii++) {
                JSONObject drinkCategory = drinkCategories.optJSONObject(ii);

                addCategory(new DrinkCategories(drinkCategory));
            }
            Log.d(TAG, "==Done adding Restaurant Drink Categories==");
        }
    }

    private void addCategory(DrinkCategories drinkCategory){
        drinkCategories.add(drinkCategory); 
    }
} 
```

我得到的错误是：`Cannot refer to a non-final variable rest inside an inner class defined in a different method`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:19:10.633

Restaurant 应该实现[Parcelable](http://developer.android.com/reference/android/os/Parcelable.html)，这是将对象从 Intent 传递到另一个活动的最佳方式。

**编辑：**您以后可能会遇到另一个错误，与您在可序列化餐厅中的列表有关。[在这里](http://code.google.com/p/android/issues/detail?id=3847)解释

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:50:40.330

尝试在 LoadJSON 的类范围内声明你的 rest 对象，而不是在 doInBackground 方法内。例如

```
class LoadJSON extends AsyncTask<String, Void, Restaurant>{
    Restaurant rest = null;

    private void doInBackground(...) {
       ...
    }
} 
```

# recursion - 计算算术表达式的 OCaml 函数

> ID：11978077
> 
> 赞同：0
> 
> 时间：2012-08-15T22:11:03.197
> 
> 标签：recursion, tree, expression, ocaml

我已经编写了一个数学计算器程序的一部分。我已经完成了程序的解析器，所以当用户将数学表达式键入为字符串时，我已经有办法获得以下类型的相应数据结构：

```
type expression =
| Term of int
| Addition of expression * expression
| Multiplication of expression * expression
| Subtraction of expression * expression 
```

我现在需要的只是一种评估这些数据结构的方法。

> *   (a) 写出数学语句“3*((1 + 4)- 5)”对应的表达式。</li>
> *   (b) 扩展 Ocaml 数据类型以包含 Factorial 构造函数，以便它可以处理像“3*((1 + 4)!-5)”这样的表达式。</li>
> *   (c) 编写一个 Ocaml 函数 eval，它接受一个数学表达式并返回其（整数）值。例如，它应该返回 0 作为 (a) 部分中表达式的结果。

> ```
>  # let rec eval expr = ...
>  val eval : expression -> int = <fun> 
> ```

> 您可能想要编写一个阶乘 Ocaml 函数来帮助使用新的 Factorial 构造函数。

我对a部分感到困惑。这是什么意思`let expression = 3*((1 + 4)- 5);`？

对于 b 部分，我应该遵循模式`|Factorial of expression * expression`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T22:54:08.123

a) 中的意思是您现在可以将数学表达式编写为提供的 datatype 的值`expression`。例如，构造函数`Addition`表示加法运算符（通常写为 (+)）通过将两个较小的表达式作为操作数来形成一个表达式。因此，例如，数学表达式 2 + 3 可以由 Caml 值表示

```
Addition (Term 2,Term 3) 
```

现在，观察到阶乘运算符采用一个参数而不是两个参数，您应该能够`expression`使用阶乘的构造函数来扩展数据类型，如 b) 中所要求的那样。

最后，在 c) 中，为这种表达式类型编写一个求值函数很简单：常量只映射到它们携带的整数值，求加法涉及递归求值加法的操作数，然后将它们相加：

```
let rec eval = function
  | Term n -> n
  | Addition (l,r) -> eval e1 + eval e2
  | ... 
```

其余情况（对于其余构造函数，包括您将为 b 添加的阶乘构造函数的情况）是类似的，您现在应该能够自己做到这一点。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:34:38.200

b部分：问题的重点是乘法需要两个数字作为输入，但阶乘只需要一个数字作为输入。

# mysql - 左连接上的列名的别名

> ID：11978078
> 
> 赞同：5
> 
> 时间：2012-08-15T22:11:04.923
> 
> 标签：mysql, left-join, server-side, alias

假设我有两个表，它们的主要标识符都使用名称“id”。如果我想对这两个表执行连接，我将如何`id`为要与前一个表连接的表的别名？

例如：

```
SELECT * FROM `sites_indexed` LEFT JOIN `individual_data` ON `sites_indexed`.`id` = `individual_data`.`site_id` WHERE `url` LIKE :url 
```

现在，site_id 应该与`sites_indexed.id`. `id`然而，代表该行的实际`individual_data`具有与 相同的*标题*`sites_indexed`。

就个人而言，我喜欢只`id`为所有内容使用名称，因为它可以保持一致。但是，在编写服务器端脚本时，它可能会使事情变得混乱。

例如

`$var = $result['id'];`

鉴于上述查询，这不会使解释器感到困惑吗？

无论如何，这是如何实现的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T22:18:51.493

您应该明确命名所需的每个字段，而不是使用“SELECT *”选择所有字段，并根据需要使用 AS 为它们起别名。例如：

```
SELECT si.field1 as si_field1,
       si.field2 as si_field2,
       ind_data.field1 as ind_data_field1
  FROM sites_indexed as si
  LEFT JOIN individual_data as ind_data 
         ON si.id = ind_data.site_id 
 WHERE `url` LIKE :url 
```

然后您可以在结果集中引用别名。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-30T22:40:30.603

这个线程很旧，我发现因为我有同样的问题。现在我有一个更好的解决方案。Paul McNett 和 antun 给出的答案迫使您列出所有字段，但在某些情况下这是不可能的（列出的字段太多），因此您可以只保留您想要的字段 * 和别名（通常是具有相同的字段名称并将相互覆盖）。

就是这样 ：

```
 SELECT *, t.myfield as myNewName 
FROM table t ... continue your query 
```

您可以通过添加逗号来添加任意数量的别名。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-15T08:41:42.073

使用此表达式，您将获得包含**id**列（来自表**sites_indexed**）和**id2** （来自表**individual_data的列****id**的别名）的结果

 **```
SELECT t1 . *, t2 . * FROM sites_indexed t1
LEFT JOIN (select id as id2, other_field1, other_field2 FROM individual_data) t2 ON t1.id = t2.site_id WHERE your_statement 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T22:28:48.577

问题是您使用的是 * 通配符。如果您在查询中明确列出列名，则可以给它们起别名：

```
SELECT `sites_indexed`.`id` AS `sites_indexed_id`,
       `individual_data`.`id` AS `individual_data_id`
       FROM `sites_indexed` 
       LEFT JOIN `individual_data` ON `sites_indexed`.`id` = `individual_data`.`site_id` 
       WHERE `url` LIKE :url 
```

然后您可以通过别名引用它们：

$var = $result['sites_indexed_id']; $var_b = $result['individual_data_id'];**

# android - 设置 Tabhost 的背景图片

> ID：11978080
> 
> 赞同：1
> 
> 时间：2012-08-15T22:11:31.820
> 
> 标签：android, android-layout, android-tabhost, android-tablelayout

我已经设置了一个背景图像，`Tabhost`但图像不适合它它是从每个的一半开始`TabWidget` 我尽力而为但无法摆脱这个请帮助！

我的 xml 代码是

```
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@android:id/tabhost"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:background="@drawable/back"
      >

    <LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
    </LinearLayout>
 </TabHost> 
```

当前应用的快照是

[http://img32.imageshack.us/img32/6519/captureyha.png](http://img32.imageshack.us/img32/6519/captureyha.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:37:58.870

你想从哪里开始？

**编辑：**试试这个。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@android:id/tabhost"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:background="@drawable/back"
      >

<TabHost
      android:id="@android:id/tabhost"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:background="#000"
      >

    <LinearLayout
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"/>
    </LinearLayout>
 </TabHost>  
</RelativeLayout> 
```

# ios - SQLite 或 CoreData

> ID：11978084
> 
> 赞同：2
> 
> 时间：2012-08-15T22:12:13.153
> 
> 标签：ios, database, sqlite, core-data

> **可能重复：**
> [在 iPhone 上使用 CoreData 或 SQLite？](https://stackoverflow.com/questions/1318467/use-coredata-or-sqlite-on-iphone)

我想构建一个应用程序，即使您没有连接 WiFi 或 3G，也可以让您找到商店（例如拥有您最喜欢的鞋品牌的商店）。目前，该应用程序应该有几种可能性：

*   用户选择他最喜欢的品牌并获得附近商店的列表。之后，用户必须能够选择商店以获取地址、联系信息以及可能的地图；

*   用户选择某个城市，获得可用品牌的列表，选择一个并获得该城市中销售所选品牌的商店列表。

由于我是制作此类应用程序的新手，因此我已经开始做功课。我知道我必须使用数据库来存储所有数据，并且发现有很多方法可以做到这一点。其中之一是创建 MySQL 数据库，因为它不能离线使用，所以不是一种选择。如果我是对的，另外两种方法是 SQLite 或 CoreData。问题是，我有点迷失在所有可用的信息中，这让我很难开始。这两种方法都适用于这个应用程序吗？哪一种方法最适合这项工作？我希望有人能指出我正确的方向，并可能给我一个有用的链接或教程来继续我的应用程序。

提前致谢！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:16:05.647

只有在你已经知道 SQLite 或者你知道你的用例是少数几个对 Core Data 来说很难的情况下才使用它。

因此，我认为您的决定很简单。使用核心数据。这非常简单，除非您同时开始从多个线程/上下文更新数据，否则它会相对较快地变得相当麻烦。

有大量的 Core Data 在线教程，你总是在他们的开发者网站上有 Apple 的文档和示例代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T22:17:09.950

如果您从未使用过 MySQL 或 SQLite，请使用 CoreData。但如果您使用过 MySQL 或 SQLite，我建议您使用 SQLite，因为它对您来说很容易理解，因此您将能够更快地开发您的应用程序。

# nlp - 是否可以构建一个对给定 API 进行编程的图灵机？

> ID：11978086
> 
> 赞同：1
> 
> 时间：2012-08-15T22:12:32.867
> 
> 标签：nlp, theory, turing-machines

我想知道，是否可以定义一个 API 并将其作为`TM`图灵机的输入，输出将是代码`c`或任何其他自然/编程语言？

我猜不是，但我如何通过减少等正式显示它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T02:35:29.610

您的问题似乎是在询问是否可以编写一个程序（换句话说，图灵机），该程序接受程序规范（您称之为“API”）并以某种编程语言输出程序。答案是“当然”。让我们看几个例子。

1.  假设我将输入规范编写为 C 程序，并且我想用 C 输出程序。我将此图灵机程序称为“副本”，我可以用任何语言轻松实现它（或使用`cp`命令行上的命令）。

2.  假设我将输入规范编写为 C 程序，并且我想以汇编代码输出程序。我称这个图灵机程序为“编译器”，我可以用任何语言实现它（或者你可以下载一个已经存在的 C 编译器）。

3.  假设我用英语编写输入规范，我想用 C 语言输出一个程序。我称这个图灵机程序为“软件工程师”，我通过将这个人送到学校（或者你可以雇用现有的软件工程师）。

这里的寓意是，图灵机可以做任何人类可以做的事情（人类可以做任何图灵机可以做的事情）。但是，编写一个与人类一样通用的计算机程序真的非常非常困难。

# asp-classic - 带有法语字符的 FSO OpenTextFile

> ID：11978087
> 
> 赞同：1
> 
> 时间：2012-08-15T22:12:38.957
> 
> 标签：asp-classic, character-encoding, fso

使用 ASP 的文件系统对象 (FSO)，我正在尝试读取`OpenTextFile`包含法语字符的 txt 文件（e 和带有重音符号的例如）。那些字符出来错了。

我尝试指定[格式](http://www.w3schools.com/asp/met_opentextfile.asp)以`TristateTrue`将文件打开为 Unicode，但无济于事。

我一直在阅读有关使用 ADO Stream 对象的信息，但我希望有一种方法可以使用 FSO。有没有人有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:15:24.613

该文件很可能以 UTF-8 编码保存。FileSystemObject 不处理 UTF-8。

要么将文件保存为 Unicode，要么使用`ADODB.Stream`对象。有`ADODB.Stream`一个`LoadFromFile`方法并且确实支持 UTF-8。

```
 Dim s

 Dim stream : Set stream = CreateObject("ADODB.Stream")

 stream.CharSet = "UTF-8"
 stream.LoadFromFile Server.MapPath("yourfile.txt")

 s = stream.ReadAll

 stream.Close 
```

# python - python 列表理解 - learnpython.org

> ID：11978088
> 
> 赞同：4
> 
> 时间：2012-08-15T22:12:39.687
> 
> 标签：python, integer, list-comprehension

我一直在学习 learnpython.org 上的教程，到目前为止，我发现一切都相对简单。

当我遇到关于列表理解的问题时，我陷入了困境。我知道它是如何工作的。下面是被问到的问题：

> 使用列表推导，从列表“numbers”中创建一个名为“newlist”的新列表，该列表仅包含列表中的正数，作为整数。

并且提供的代码：

```
numbers = [34.6, -203.4, 44.9, 68.3, -12.2, 44.6, 12.7]
newlist = []

print newlist 
```

我对这个问题的回答如下：

```
newlist = [x for x in numbers if x > 0] 
```

这会从数组中返回正确的数字，但每个项目大约为 15 dp。我如何只得到整数而不是所有小数位。

例如，预期的答案是：

> [34、44、68、44、12]

但是我最终得到：

> [34.600000000000001, 44.899999999999999, 68.299999999999997, 44.600000000000001, 12.699999999999999]

如果有人能够阐明我哪里出错了，那将不胜感激。

干杯，

杰米

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T22:14:34.930

```
newlist = [int(x) for x in numbers if x > 0] 
```

这会将数字四舍五入为零。正数将向下舍入，负数将向上舍入。如果要四舍五入到最接近的整数：

```
newlist = [round(x) for x in numbers if x > 0] 
```

# spring - java.lang.ClassNotFoundException: org.hibernate.cache.CacheProvider 异常同时集成spring和hiberate

> ID：11978094
> 
> 赞同：16
> 
> 时间：2012-08-15T22:12:59.747
> 
> 标签：spring, hibernate

当我尝试测试 spring 和 hibernate 集成时，出现以下异常。

```
Caused by: java.lang.ClassNotFoundException: org.hibernate.cache.CacheProvider
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 18 more 
```

## 应用程序上下文

```
<beans xmlns="http://www.springframework.org/schema/beans"
xmlns:context="http://www.springframework.org/schema/context"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
    http://www.springframework.org/schema/beans     
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/context 
    http://www.springframework.org/schema/context/spring-context-3.0.xsd">

<context:annotation-config/>

<!-- Datasource beans -->

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
  <property name="url"  value="jdbc:mysql://localhost:3306/sterlingschema" />
  <property name="driverClassName" value="com.mysql.jdbc.Driver" />
  <property name="username" value="root" />
  <property name="password" value="root" />
</bean>

<!--  Hibernate Template session factory bean -->
 <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">

    <property name="dataSource" ref="dataSource" />
    <property name="hibernateProperties">
       <props>
           <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
           <prop key="show_sql">true</prop>
           <prop key="hibernate.hbm2ddl.auto">update</prop>
       </props>
    </property>

    <property name="mappingResources">
       <list>
           <value>/org/droidaceapps/domain/users.hbm.xml</value>
       </list>
     </property>

</bean> 

<!--  Hibernate template beans -->
<bean id="hibernateTemplate" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
      <property name="sessionFactory" ref="sessionFactory"></property>
</bean>

<!--  DAO beans -->

<bean id="userDAO"  class="org.droidaceapps.dao.UserDAOImpl">
  <property name="hibernateTemplate" ref="hibernateTemplate" />
</bean>

<!--  Service beans -->

<bean id="userService"  class="org.droidaceapps.services.UserServiceImpl">
    <property name="userDAO" ref="userDAO" />
</bean> 
```

当我用谷歌搜索这个问题时，有人说我们应该使用 springframework.orm.hibernate4 而不是 springframework.orm.hibernate3。我这样做了。但我仍然得到同样的例外。

有人可以帮助我确定我在这里缺少什么。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T12:41:56.467

注意：**org.hibernate.cache.Provider 在从 Hibernate 3 到 Hibernate 4 的更改中被删除。**

如果你使用 hibernate 3，你可能会得到`java.lang.ClassNotFoundException: org.hibernate.cache.CacheProvider`. 如果你改成hibernate 4，你不会得到那个，但你首先应该添加`hibernate4.jar`and `spring-orm.jar`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T23:25:47.387

听起来您在项目设置中缺少休眠依赖项：

> 引起：java.lang.ClassNotFoundException：org.hibernate.cache.CacheProvider

尝试下载[hibernate-core.jar](http://search.maven.org/#browse%7C-1436960755)并添加到您的项目类路径中。

如果您使用 Maven，只需将以下依赖项添加到项目的 pom.xml 中：

```
<dependency>
  <groupId>org.hibernate</groupId>
  <artifactId>hibernate-core</artifactId>
  <version>${hibernate.version}</version>
</dependency> 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-23T13:08:42.963

您将**HibernateTransactionManager**注入**DAO**类而不是**HibernateTemplate**。请检查您的配置文件。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-23T18:35:57.753

这个解决方案也对我有用：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-entitymanager</artifactId>
    <version>3.6.10.Final</version>
</dependency> 
```

就我而言，我已经有了 hibernate-entitymanager 依赖项，但正在尝试使用最新版本的 hibernate - 4.3.1.Final。不知道为什么这里需要降级，但我在 STS 3.5.0.M2 中基于的“简单 Spring JPA 实用程序项目”可能也有点过时了？

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-09-16T16:10:57.830

这可能是因为您在 spring 配置文件中为“sessionFactory”使用“org.springframework.orm.hibernate3.LocalSessionFactoryBean”而不是“org.springframework.orm.hibernate4.LocalSessionFactoryBean”。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-09-14T06:10:22.260

您必须更改 spring 配置文件。
改变 ：

`HibernateTemplate class`作为`"org.springframework.orm.hibernate3.HibernateTemplate"`
, 并改变：

`LocalSessionFactoryBean bean`作为`"org.springframework.orm.hibernate3.LocalSessionFactoryBean"`

它会起作用的。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-12-12T22:26:33.283

如果您使用的是 Maven，请尝试将其放入您的 POM 文件中：

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-entitymanager</artifactId>
    <version>3.6.10.Final</version>
</dependency> 
```

这对我有用。

# javascript - element.setAttribute() 的目的？

> ID：11978095
> 
> 赞同：4
> 
> 时间：2012-08-15T22:13:00.920
> 
> 标签：javascript

如果有这样的元素：

```
var c = document.createElement('a'); 
```

然后，只需执行以下操作即可添加属性名称：

```
c.name = "a1"; 
```

`setAttribute()`如果只能使用点表示法，目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:32:36.577

属性与属性不同。

属性通常在您的 HTML 中创建，并将成为`element.attributes`. 有的还会设置相应的属性。

当您更改属性时，有些属性会更新，但其他属性不会。例如， .value 属性不会更改输入元素的属性。或者自定义属性不会成为自定义属性。

大多数时候你可能想设置属性，但是如果你想改变属性，那么在某些情况下你必须使用`setAttribute`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T23:20:05.697

谁说你两者都可以？

好吧，好吧，你可以。但说真的，“谁说的？”，因为它主要归结为这一点。

最初，有 Netscape Navigator 2，第一个支持 Javascript 的 Web 浏览器，实际上比 Netscape Enterprise Server 的服务器端使用早了几个月，第一个支持 Javascript（在测试版中称为“Livescript”）但很快重命名为“Javascript”，因为那是 1995 年，将“java”这个词放在任何东西中是一种可靠的方式，可以让科技记者获得大约 20,000 列英寸的内容，这些记者在剩下的时间里都在困惑咖啡批发商想知道在哪里新闻稿和促销 schwag 是）。

当时的对象模型非常小，以至于你可以在几天内将整个模型掌握在脑海中。对于大多数元素，您实际上无法对它们做很多事情。很多事情都非常繁琐（您可以在其中找到 a `<select id="selId" name="selName">`today的当前值`document.getElementById('selId').value` 以及其他一些方法，那么您将需要`document.forms[0]["selName"].options[document.forms[0]["selName"].selectedIndex].value`.

`src`然后 IE3 也出现了 Javascript，NN 3 通过让您更改图像的属性提高了赌注。浏览器大战已经正式开始。许多退伍军人仍然被他们所做的事情所困扰。

使浏览器的文档模型更好的真正明显的方法是让属性反映越来越多的东西——最好是可写的而不是只读的。下一个最好的事情是有一种比其他浏览器更简单且更容易记住的更改方式（然后他们可能会制作更多在您的浏览器的最新版本中运行而在您的竞争对手的浏览器中没有的网页）。

通过保持快速的发展速度，很明显网景将开发一个新的中间件平台，这将使微软和苹果的地位变得无关紧要，而对于雅虎或 alta-vista 是否有搜索和/或将主导网络的目录。（不要对技术做出长期预测）。

在 make-script-able-to-do-everything-to-everything 的大趋势下，很多属性在有属性的时候就用对应的属性来命名，这毕竟是一种非常明智的方式。

不过这有点不一致。一方面，与属性对应的大多数属性都以直接的方式将字符串值映射到字符串值。一两个没有，例如`href`锚元素上的属性，它为您提供了一个更丰富的对象，其属性反映了 URI 的一部分（主要是因为它在 make-script-able-to-do-everything-to 之前的早期就可用-一切）。这既有用（如果您想分解 URI）又令人讨厌，因为没有很好的方法来分辨哪个是哪个。

在这个高度，他们有一种叫做 DHTML 的东西，还有一种叫做 dHTML 的东西，这两种方法以完全不兼容的方式做几乎相同的事情。

还有一个事实是 javascript 在允许您向任何东西添加新属性方面很松散，而 HTML 允许您添加新属性（值得商榷，取决于您对哪个标准的严格程度，但这是浏览器大战和新的专有属性）似乎每 4 分钟由一个浏览器或另一个浏览器添加一次）。知道一个属性是否会对任何给定的浏览器产生任何实际影响是一件令人讨厌的事情。

与此同时，在一个遥远的国际标准联盟中，正在开发一种叫做 XML 的东西。它允许您以各种方式添加具有各种属性的各种元素。还添加了在脚本中处理此问题的方法。

我们需要一种比现有的更一致地改变元素属性的方法，而且很明显，所有未来版本的 HTML 都将是 XML 应用程序（不要对技术做出长期预测），因此它是有意义的至少在两者之间是相对一致的。

每个人也开始意识到，拥有比其他人更受欢迎的浏览器不会让任何人成为下一个比尔盖茨（甚至不是现在的比尔盖茨），因此对标准方法提供更多支持而不是更浮华的优势-stuff-the-other-guy-can't-do 变得更加明显。

[W3C DOM](http://www.w3.org/DOM/DOMTR)变得越来越成熟，越来越受到支持。它为我们提供了一种更一致的属性设置方式。它更冗长，但您可以始终如一地知道它要做什么，并且在创建、复制、更改和删除文档的某些部分方面也更强大。

但是如果可能的话，旧网站必须继续运行，而且它确实仍然是许多属性的有用简写，只需设置相应的属性，因此人们不会停止使用它。尽管如此，所有浏览器都在一定程度上支持 DOM 方法，从而在它们之间提供更多的一致性。

然后一半的开发人员开始使用 JQuery。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T22:19:15.160

这是为了制作一些自定义属性：

虽然一切都很好`el.name='aaa';`

如果你让它`el.customsttr='a'`不起作用。

-- （除非已经定义，如下所述）

[http://jsfiddle.net/sXdHB/](http://jsfiddle.net/sXdHB/)

应用：

例如，您有一个 img，其属性为“src”，那么您可能想要添加一个自定义属性“big_src”，然后通过一些脚本读取它以显示更大的属性；

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T22:29:07.577

我会`getAttribute/setAttribute`明确表示您正在使用 DOM 元素。减少歧义是一个优点！

然而，这就是[quirksmode.org](http://www.quirksmode.org/dom/w3c_core.html#attributes)对属性的评价：

> 属性
> 
> 乱七八糟的。尝试按以下顺序影响属性：
> 
> 1.  尝试获取或设置特定属性，例如 x.id 或 y.onclick。
> 2.  如果没有特定属性，请使用 getAttribute() 或 setAttribute()。
> 3.  如果这不起作用，请尝试下表中的任何其他方法或属性。不过，大多数都有可怕的浏览器不兼容模式。
> 4.  避免属性[]。这比其他任何事情都糟糕。

# sql - 基于单个表上的键的 SQL 多选

> ID：11978096
> 
> 赞同：0
> 
> 时间：2012-08-15T22:13:04.587
> 
> 标签：sql

如果有人在这里可以回答，请提前感谢。我有这两张桌子：

```
 Strings                Numbers
 ----------------        ----------------
| ID  |  String  |      | ID  |  Number  |
 ----------------        ----------------
|  1  |    'A'   |      |  1  | 'First'  |
|  1  |    10    |      |  2  | 'Second' |
 ----------------       |  3  | 'Third'  |
|  2  |    'B'   |      |  4  | 'Fourth' |
|  2  |    11    |      |  5  | 'Fifth'  |
 ----------------        ----------------
|  3  |    'A'   |
|  3  |    12    |
 ----------------
|  4  |    'B'   |
|  4  |    13    |
 ----------------
|  5  |    'B'   |
|  5  |    14    |
 ---------------- 
```

例如，我过滤与“A”“关联”的值，我必须得到一个像这样的表：

```
 Strings
 ----------------
| ID  |  String  |
 ---------------- 
|  1  |    10    |
 ---------------- 
|  3  |    12    |
 ---------------- 
```

例如，如果想过滤与“B”“关联”的值，我必须得到一个像这样的表：

```
 Strings
 ----------------
| ID  |  String  |
 ---------------- 
|  2  |    11    |
 ----------------
|  4  |    13    |
 ----------------
|  5  |    14    |
 ---------------- 
```

再次感谢您能帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:18:13.707

除非我遗漏了你会使用的东西：

```
select s1.id, s1.string
from strings s1
inner join strings s2
    on s1.id = s2.id
    and s1.string != 'A'
    and s2.string = 'A' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/92816/2)

或者

```
select s1.id, s1.string
from strings s1
inner join strings s2
    on s1.id = s2.id
    and s1.string != 'B'
    and s2.string = 'B' 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/92816/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:39:39.760

```
select s2.ID,
       s2.String
  from Strings as s1
 inner join Strings as s2
    on s2.id = s1.id
   and s2.String != s1.String
 where s1.String = ? 
```

但是，这种表结构是有问题的。ID 似乎应该是主键，但它不能是因为有多个值。此外，您永远不需要 Numbers 表，那么为什么将其包含在问题中？:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T22:16:20.733

```
SELECT * FROM Strings WHERE string = "A" 
```

[根据需要替换 * 的字段名称。]

# html - IE9位置：固定对象间歇性出现和消失

> ID：11978102
> 
> 赞同：0
> 
> 时间：2012-08-15T22:13:47.210
> 
> 标签：html, css

所以我的标记有点像这样：

```
<div id="stage">
    <div id="stageHeader">
        <h1>header text</h1>
        <a href="#"><img src="something.png" alt=""/></a>
    </div>
    <p> blah blah blah content blah blah</p>
</div> 
```

演示：http: [//jsfiddle.net/JsUW3/](http://jsfiddle.net/JsUW3/)

我将集合的内容`#stageHeader`固定在一个固定位置，以便在整个舞台填满并允许滚动时，这些对象保持在原位。一切都很好，它们在包括 IE 在内的任何浏览器中都不会移动。

有趣的是，在IE9中，如果我向下滚动页面，内容`#stageHeader`会出现和消失但不会移动。

在应用程序的某些其他部分，您`<h1>`根本看不到 ，但如果您移动鼠标，它会间歇性地出现，然后再次消失。

我一生都无法弄清楚这里发生了什么。我检查了所有周围元素的 z-index 以查看是否有东西覆盖它或沿着这些线小的东西但没有成功。我的 JavaScript 中也没有任何会影响它的东西，它只发生在 IE9 中，并且只有在设置为`position:fixed`.

# java - Maven Eclipse 插件和 openjpa 增强的问题

> ID：11978103
> 
> 赞同：2
> 
> 时间：2012-08-15T22:13:52.000
> 
> 标签：java, eclipse, maven, openjpa

我们当前的项目是在 STS(Eclipse) 上将 Spring 3/OpenJPA 与 Roo 和 maven 集成。该`M2E`插件有点问题，因为它无法处理实体增强。

所以从编程方面来说，我们不能一键在Eclipse下的Maven上构建整个项目，而是必须先让项目然后运行脚本到`STS(Eclipse)`实体，然后是项目，然后是. 不是很有效。`build``Ant``enhance``refresh``refresh``server deployment`

我想这是一个问题，所以创建此线程以查看是否有任何更新。

似乎有一个可用的工具（[OpenJPA Eclipse Tooling Builder](http://openjpa.apache.org/openjpaeclipseenhancementbuilder.html)）但它似乎不支持最新的 Eclipse（STS 2.9.1 基于 Eclipse 3.7，该工具仅涵盖 3.4）。

所以问题就变成了：有什么方法（或工具）我们可以将所有东西（`build`, `compile with enhancement`）集成在一起（可能在 Maven 上仅通过设计 POM）？

很高兴学习任何建议。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-13T15:20:31.777

我对 eclipse kepler 和 OpenJPA 2.2.1 有同样的问题。

解决方案很简单，但有点脏。

首先，您需要从该站点安装 OpenJPA m2e 连接器：

[http://openjpa-maven-connector.googlecode.com/svn/trunk/openjpa-connector-update-site](http://openjpa-maven-connector.googlecode.com/svn/trunk/openjpa-connector-update-site)

接下来，您必须修改您的 POM，并在 openjpa-maven-plugin 插件的 elemento 旁边（在 build 元素内）放置下一个定义：

```
<pluginManagement>
        <plugins>
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>openjpa-maven-plugin</groupId>
                                    <artifactId>openjpa-maven-plugin</artifactId>
                                    <versionRange>[1.0,)</versionRange>
                                    <goals>
                                        <goal>enhance</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <execute />
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement> 
```

所以构建元素应该是这样的（使用你自己的实体包）：

```
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.1</version>
            <configuration>
                <verbose>true</verbose>
                <compilerVersion>1.6</compilerVersion>
                <source>1.6</source>
                <target>1.6</target>
                <debug>true</debug>
                <debuglevel>lines,vars,source</debuglevel>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.openjpa</groupId>
            <artifactId>openjpa-maven-plugin</artifactId>
            <version>2.2.1</version>
            <executions>
                <execution>
                    <id>mappingtool</id>
                    <phase>process-classes</phase>
                    <goals>
                        <goal>enhance</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>
                <includes>
                    com/xxxx/xxxx/*
                </includes>
            </configuration>
        </plugin>
    </plugins>

    <pluginManagement>
        <plugins>
            <!--This plugin definition only affects eclipse, not the mvn command execution -->
            <plugin>
                <groupId>org.eclipse.m2e</groupId>
                <artifactId>lifecycle-mapping</artifactId>
                <version>1.0.0</version>
                <configuration>
                    <lifecycleMappingMetadata>
                        <pluginExecutions>
                            <pluginExecution>
                                <pluginExecutionFilter>
                                    <groupId>openjpa-maven-plugin</groupId>
                                    <artifactId>openjpa-maven-plugin</artifactId>
                                    <versionRange>[1.0,)</versionRange>
                                    <goals>
                                        <goal>enhance</goal>
                                    </goals>
                                </pluginExecutionFilter>
                                <action>
                                    <execute />
                                </action>
                            </pluginExecution>
                        </pluginExecutions>
                    </lifecycleMappingMetadata>
                </configuration>
            </plugin>
        </plugins>
    </pluginManagement>
</build> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:14:51.137

`@Subarule`我没有使用 Maven，而只为我的项目使用 ANT，以下 ANT 脚本有助于增强我的构建。

```
 <target name="enhance" depends="compile">
    <echo message="Enhancing...."/>
    <!-- ***************************************************************************************************************** -->
    <!-- DO NOT DELETE FOLLOWING CODE. THIS IS ADDED FOR ENCHANCING THE CLASSES AT COMPILE TIME. IT IS REQUIRED BY OPENJPA -->
    <!-- Define the classpath to include the necessary files. -->
    <!-- ex. openjpa jars, persistence.xml, orm.xml, and target classes  -->
    <path id="jpa.enhancement.classpath">
        <!-- Assuming persistence.xml/orm.xml are in META-INF -->
        <pathelement location="META-INF" />

        <!-- Location of the .class files -->
        <pathelement location="${build.classes}" />

        <!-- Add the openjpa jars -->
        <fileset dir="OpenJPA_lib_jar">
                <include name="*.jar" />
        </fileset>
    </path>
    <!-- This is a bit of a hack, but I needed to copy the persistence.xml file from my src dir
         to the build dir when we run enhancement -->
    <!--<copy includeemptydirs="false" todir="bin">
        <fileset dir="src" excludes="**/*.launch, **/*.java"/>
    </copy>-->

    <!-- define the openjpac task; this can be done at the top of the -->
    <!-- build.xml file, so it will be available for all targets -->
    <taskdef name="openjpac" classname="org.apache.openjpa.ant.PCEnhancerTask" classpathref="jpa.enhancement.classpath" />

    <!-- invoke enhancer on all .class files below the model directory -->
    <openjpac>
        <classpath refid="jpa.enhancement.classpath" />
        <fileset dir=".">
            <include name="**/model/*.class" />
        </fileset>
        <config propertiesFile = "${basedir}/src/META-INF/persistence.xml"/>
    </openjpac>
    <echo message="Enhancement complete" />
    <!-- ***************************************************************************************************************** -->
</target> 
```

希望这对您有所帮助。

# jquery - jQuery表格行单击不起作用

> ID：11978105
> 
> 赞同：2
> 
> 时间：2012-08-15T22:13:59.737
> 
> 标签：jquery

我正在检查一些网站，我想出了以下内容：

```
 <table class="admin_table">
        <thead>
            <tr>
                <th>Company Name</th>
                <th>Industry</th>

            </tr>
        </thead>
        <tbody>
            <tr url="/home/companies/1">
                <td>Microsoft</td>
                <td>Computer Software</td>
            </tr>
        </tbody>
    </table>

$(document).ready(function() {
    $(".admin_table tr").not(':first').click(function() {
        var url = $(this)..attr("url");
        if (url != null && url != '') {
            window.location = url;
        }
    });
}); 
```

但是，单击该行时，它没有响应？

我最初为此阅读了以下网站：

[jQuery - 在表中的 <tr> 元素上单击事件并获取 <td> 元素值](https://stackoverflow.com/questions/3458571/jquery-click-event-on-tr-elements-with-in-a-table-and-getting-td-element-val)

[使表格行可点击](https://stackoverflow.com/questions/197713/making-a-table-row-clickable)

[http://www.electrictoolbox.com/jquey-make-entire-table-row-clickable/](http://www.electrictoolbox.com/jquey-make-entire-table-row-clickable/)

我的代码中有什么遗漏吗？在许多情况下，代码是相同的......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T22:19:34.273

当然只有第二行应该起作用，因为那是带有 url 的那一行。但首先你应该删除双点 $(this).attr('url');

# javascript - javascript“或”语句

> ID：11978114
> 
> 赞同：1
> 
> 时间：2012-08-15T22:14:49.407
> 
> 标签：javascript, jquery, function, jquery-selectors

我使用以下内容来触发 js 函数：

```
$(document).ready(function() {
    $('.gl a').do_this({ 
```

所以 div 类 .gl 中的任何链接都会激活函数 do_this .. 简单

现在，我也想在另一个 div 链接上触发相同的功能，我可以这样做：

```
( $('.gl a') OR $('.gm a') ).do_this({ 
```

尝试了所有组合但还没有工作，或者我只需为其他类复制整个东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T22:16:42.967

像这样使用[多个选择器](http://api.jquery.com/multiple-selector/)：

```
$('.gl a, .gm a'); 
```

如果其中一个存在，或者两者都存在，这将起作用；我假设这就是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:19:19.213

我想您可以使用三元组来确定要影响的特定组，如果您真的是指异或：

```
var groupToAffect = $('.gl a').length ? $('.gl a') : $('.gm a');
groupToAffect.do_this(); 
```

这将测试选择器是否`$('.gl a')`返回一个非空的元素集合，如果返回，则将该选择器返回的元素存储在`groupToAffect`变量中。如果它返回零（假）元素，那么它将选择器返回的元素分配`$('.gm a')`给该变量；然后与`do_this()`方法/插件一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T22:49:38.317

jquery 对象数组可以用 concat 组合在一起。然后遍历所有对象。

```
$( [].concat($('.gl a'),$('.gm a')) ).each(function(index){
    this.do_this({ //...
}); 
```

# javascript - 灯箱类型的东西，使图像占浏览器高度的百分比

> ID：11978117
> 
> 赞同：-1
> 
> 时间：2012-08-15T22:14:59.220
> 
> 标签：javascript, jquery, lightbox

我无法将滚动条添加到灯箱。现在根本不是我的网站的选择。为了让我真正的大图像适合任何屏幕，在灯箱类型的弹出窗口中，我想知道是否有人引用了灯箱之类的东西，它可以告诉浏览器的高度，并使图像的总高度相同，因此图像永远不会低于首屏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:38:01.417

Fancybox 默认执行此操作。即使您在手机上，照片也会在不超出可视区域的情况下显示！

# mysql - 如何优化这个选择查询？(MySQL)

> ID：11978118
> 
> 赞同：0
> 
> 时间：2012-08-15T22:15:03.493
> 
> 标签：mysql, query-optimization

我一直在研究 mysql 数据库，拥有数据库的最重要的表之一将在 900 到 10 亿条记录之间。我能够做这个查询：

```
select MAX(SEN_ID) as SEN_ID from senal group by variable_VAR_ID 
```

但这需要12分钟。如何优化此查询？

当数据库很小时，这个查询运行良好，但现在数据库中有数百万行，我意识到我应该早点考虑优化它。

在 EXPLAIN 中执行的查询显示：

```
id select_type table type  possible_keys key                key_len ref  rows     Extra
1  SIMPLE      senal index NULL          fk_senal_variable1 4       NULL 6333242  Using index 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:16:38.383

您需要创建复合索引`variable_VAR_ID + SEN_ID`

注 1：不是两个单独的索引，而是一个组合
注 2：是的，顺序很重要

PS：这里是如何创建索引的语法描述：http: [//dev.mysql.com/doc/refman/5.5/en/create-index.html](http://dev.mysql.com/doc/refman/5.5/en/create-index.html)

# java - Lint 未检测到项目错误，尽管它们已被标记。

> ID：11978120
> 
> 赞同：0
> 
> 时间：2012-08-15T22:15:12.733
> 
> 标签：java, android, eclipse, android-lint

我最近正在浏览developers.android.com 上的CustomView 教程，当我将代码修改为我自己的项目时，我注意到虽然错误在类编辑器中逐行标记，但它们完全没有问题未被 lint 检测到。

到目前为止，我已经尝试过[这篇](https://stackoverflow.com/questions/8569704/android-lint-tool?rq=1)文章和一篇文章，建议我只需“将透视图另存为...”并重新启动 Eclipse。

![在此处输入图像描述](../Images/adca885410506edbe01c2b0a95b969d2.png)

我想这是一个易于修复的问题，可能是我自己在不知不觉中造成的……因为其他项目中的错误在 Lint 中显示得很好。

也许我需要找到[这个](http://bit.ly/Mzd2QD)问题中描述的 lint.xml - ？ - 知道那可能在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T16:07:56.027

在摆弄了很长一段时间之后，似乎解决方案来自以下两件事之一，如果不是两者兼而有之。

`$ sudo chown me /myproject/`

我一开始是如何失去所有权的，我可能永远不会知道。

而且我还在项目的 Builder 属性下重新启用了“Java Builders”。这是一些问题的解决方案，但在这种情况下不是。现在一切都恢复正常了。

# jquery - 如何在 django-bootstrap 中显示表单错误？

> ID：11978121
> 
> 赞同：0
> 
> 时间：2012-08-15T22:15:20.947
> 
> 标签：jquery, django, django-forms, jquery-forms-plugin

我正在使用 earle / django-bootstrap 来展示一个带有 twitter bootstrap 样式的表单。我希望能够更改样式并显示用户在填写表单时犯的错误（即，如果他错过了必填字段）

我在文档中找不到有关如何输出错误的信息。我正在使用 jquery.form.js 提交表单并在字典中的数组中返回错误，问题是错误数组返回空，甚至在视图中打印错误数组也显示它为空。

表格的代码：

```
class SomeForm(BootstrapForm):
    class Meta:
        layout = (
        Fieldset( "Form title:","first_field", "second_field", ),
    )

    first_field = forms.CharField(label=u'Some Text', max_length=50,    error_messages={'required':u'The error msg',},required=True,)
    second_field = forms.ModelChoiceField(label=Some Text', queryset=SomeClass.objects.all(), error_messages={'required':u'The error msg. ',}, required=True, ) 
```

以及视图的代码：

```
@login_required
def new_case(request):
    if request.method == 'POST':
        form = SomeForm(request.POST)
        if form.is_valid():
            new_case = form.save(request.user)
            return HttpResponseRedirect('/casos/')
        else:
            response_dict = {'ok': False, 'msg': None, 'err': None,}
            err = {}
            caseErrors = {}
            caseErrors.update(form.errors)
            for field in caseErrors:
                caseErrors[field] = [unicode(error) for error in caseErrors[field]] 
            err['caso']=caseErrors   
            response_dict['msg'] = u'The fields are not valid.'
            response_dict['err'] = err
            return HttpResponse(simplejson.dumps(response_dict), mimetype='application/json')
    else:
        form = SomeForm()
        return render_to_response('casos/new_case.html', { 'form': form },    context_instance=RequestContext(request)) 
```

还有 jQuery

```
<script type="text/javascript" src="{{ STATIC_URL }}jquery/jquery.form.js"></script>
<script type="text/javascript">

$(function() {
    $('#agr_ncaso').ajaxForm({
        dataType: 'json',
        beforeSubmit: before_submit,
        success: success
    });
});

function before_submit(formData, jqForm, options) {
    $('.error').removeClass('error');
    $('.alert-error').remove();
    return true; 
}

function success(json) {
    if (json.ok) {
        window.location = '/casos/';
    }
    else if (json.err) {            
        $('<div class="alert alert-error"><strong>Error inform </strong></div>').insertBefore('form')       
        for (campo in json.err) {
        $('#div_id_' + campo).addClass("error");
        }
        $('.alert').fadeIn('slow');
    }
    else {
        alert(json.msg);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:25:30.413

表单的错误在 err['casos'] 内部，而不是在 err 内部。祝你有美好的一天

# google-chrome - 删除 chrome 中 dojo 按钮上的黄色边框

> ID：11978123
> 
> 赞同：5
> 
> 时间：2012-08-15T22:15:39.673
> 
> 标签：google-chrome, dojo

如何删除 Google Chrome 中出现的按钮上的黄色边框。我试图覆盖样式，但想象一下，如果你必须为每个按钮都这样做。

![在此处输入图像描述](../Images/4c9acaf9b6b438dcef89845bd892ea2f.png)

```
.dijitReset .dijitStretch .dijitButtonContents{
    outline:none;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-18T12:47:01.980

Actually that worked for me. I did this (since I use claro theme)

```
.claro *
{
    outline: none;
} 
```

So when you do something like this `<body class="claro"> ... </body>` it should work. I've been looking for a way to do this since a few days but your css snippet took me into the right direction.

# vb.net - 将 DataReader 的结果存储到 VB.NET 中的数组中

> ID：11978127
> 
> 赞同：6
> 
> 时间：2012-08-15T22:15:57.440
> 
> 标签：vb.net, datareader

如何将[DataReader](http://msdn.microsoft.com/en-us/library/haa3afyz%28v=vs.71%29.aspx)的结果存储到数组中，但仍然可以按列名引用它们？我本质上希望能够克隆 DataReader 的内容，以便我可以关闭阅读器并仍然可以访问。我不想像每个人建议的那样将项目存储在[DataTable中。](http://msdn.microsoft.com/en-us/library/system.data.datatable.aspx)

我已经看到了很多答案，但我真的找不到任何我想要的

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T22:15:57.440

我发现做到这一点的最简单方法是用字典填充数组，其中字符串作为键，对象作为值，如下所示：

```
' Read data from database
Dim result As New ArrayList()
Dr = myCommand.ExecuteReader()

' Add each entry to array list
While Dr.Read()
    ' Insert each column into a dictionary
    Dim dict As New Dictionary(Of String, Object)
    For count As Integer = 0 To (Dr.FieldCount - 1)
        dict.Add(Dr.GetName(count), Dr(count))
    Next

    ' Add the dictionary to the ArrayList
    result.Add(dict)
End While
Dr.Close() 
```

因此，现在您可以使用这样的 for 循环遍历结果：

```
For Each dat As Dictionary(Of String, Object) In result
     Console.Write(dat("ColName"))
Next 
```

非常类似于如果它只是 DataReader 的话：

```
While Dr.Read()
    Console.Write(Dr("ColName"))
End While 
```

此示例使用 MySQL/NET 驱动程序，但相同的方法可用于其他流行的数据库连接器。

# mysql - 获取具有列最大值的行 - 具有重复项

> ID：11978129
> 
> 赞同：0
> 
> 时间：2012-08-15T22:15:59.857
> 
> 标签：mysql

Bill Karwin 对问题 121387 的回答对我来说非常有效。

“我看到很多人使用子查询或供应商特定的功能来执行此操作，但我经常通过以下方式执行这种不带子查询的查询。它使用简单的标准 SQL，因此它应该适用于任何品牌的 RDBMS。

```
SELECT t1.*
FROM mytable AS t1
  LEFT OUTER JOIN mytable AS t2
    ON (t1.UserId = t2.UserId AND t1."Date" < t2."Date")
WHERE t2.UserId IS NULL; 
```

换句话说：从 t1 获取没有具有相同 UserId 和更大日期的其他行的行。”

但是，我还需要在结果中包含来自第三个表的列（想象另一个具有 UserId 和 UserPhoneNumber 列的表）。感觉好像它应该是直截了当的，但它让我发疯了。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:37:48.057

只需在 LEFT JOIN 之后加入第三个表：

```
SELECT t1.*, t3.*
FROM mytable AS t1
  LEFT OUTER JOIN mytable AS t2
    ON (t1.UserId = t2.UserId AND t1."Date" < t2."Date")
JOIN myothertable AS t3 ON t1.UserId = t3.UserId
WHERE t2.UserId IS NULL; 
```

# asp.net-mvc - 如何在实体框架中重用投影？

> ID：11978130
> 
> 赞同：5
> 
> 时间：2012-08-15T22:16:00.700
> 
> 标签：asp.net-mvc, entity-framework, linq-to-entities, repository-pattern

我有一个 ASP.NET MVC 应用程序，它使用实体框架来获取数据。

在将实体传递给视图之前，我需要将它们转换为模型。投影可能非常复杂，但为了简单起见：

```
public static IQueryable<UserModel> ToModel(this IQueryable<User> users)
{
    return from user in users
           select new UserModel
           {
               Name = user.Name,
               Email = user.Email,
           };
} 
```

这可以在这样的控制器中使用：

```
return View(Repository.Users.ToModel().ToList()); 
```

很好。但是如果我想在另一个投影中使用这个投影呢？例子：

```
public static IQueryable<BlogPostModel> ToModel(this IQueryable<BlogPost> blogs)
{
    return from blogs in blogs
           select new BlogPostModel
           {
               Title = blog.Title,
               Authors = blog.Authors.AsQueryable().ToModel(), // (entities are POCOs)
               // This does not work, because EF does not understand method ToModel().
           };
} 
```

（假设博客可以有不止一位作者，并且它是用户类型）。

我可以以某种方式分离投影并在另一个投影中重用它们吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T22:25:27.093

这是实际工作的东西（在一个简单的测试应用程序中）只选择请求的字段：

```
namespace Entities
{
    public class BlogPost
    {
        public virtual int Id { get; set; }
        public virtual string Title { get; set; }
        public virtual DateTime Created { get; set; }
        public virtual ICollection<User> Authors { get; set; }
    }

    public class User
    {
        public virtual int Id { get; set; }
        public virtual string Name { get; set; }
        public virtual string Email { get; set; }
        public virtual byte[] Password { get; set; }
        public virtual ICollection<BlogPost> BlogPosts { get; set; }
    }
}

namespace Models
{
    public class BlogPostModel
    {
        public string Title { get; set; }
        public IEnumerable<UserModel> Authors { get; set; }
    }

    public class UserModel
    {
        public string Name { get; set; }
        public string Email { get; set; }
    }

    public static class BlogPostModelExtensions
    {
        public static readonly Expression<Func<BlogPost, BlogPostModel>> ToModelConverterExpression =
            p =>
            new BlogPostModel
            {
                Title = p.Title,
                Authors = p.Authors.AsQueryable().Select(UserModelExtensions.ToModelConverterExpression),
            };

        public static readonly Func<BlogPost, BlogPostModel> ToModelConverterFunction = ToModelConverterExpression.Compile();

        public static IQueryable<BlogPostModel> ToModel(this IQueryable<BlogPost> blogPosts)
        {
            return blogPosts.Select(ToModelConverterExpression);
        }

        public static IEnumerable<BlogPostModel> ToModel(this IEnumerable<BlogPost> blogPosts)
        {
            return blogPosts.Select(ToModelConverterFunction);
        }
    }

    public static class UserModelExtensions
    {
        public static readonly Expression<Func<User, UserModel>> ToModelConverterExpression =
            u =>
            new UserModel
            {
                Name = u.Name,
                Email = u.Email,
            };

        public static readonly Func<User, UserModel> ToModelConverterFunction = ToModelConverterExpression.Compile();

        public static IQueryable<UserModel> ToModel(this IQueryable<User> users)
        {
            return users.Select(ToModelConverterExpression);
        }

        public static IEnumerable<UserModel> ToModel(this IEnumerable<User> users)
        {
            return users.Select(ToModelConverterFunction);
        }
    }
} 
```

要在不实际创建数据库的情况下对其进行测试：

```
var blogPostsQuery = (
    from p in context.BlogPosts
    where p.Title.StartsWith("a")
    select p).ToModel();
Console.WriteLine(((ObjectQuery)blogPostQuery).ToTraceString()); 
```

# sql - 如何在排序后仅获得结果集中的第一行？

> ID：11978136
> 
> 赞同：23
> 
> 时间：2012-08-15T22:16:36.147
> 
> 标签：sql, oracle, sql-order-by

这给了我一行（第一行）：

```
SELECT BLA
FROM BLA
WHERE BLA
AND ROWNUM < 2 
```

但是，我想要最近的日期；我可以这样制作第一行：

```
SELECT BLA
FROM BLA
WHERE BLA
ORDER BY FINALDATE DESC 
```

但是，当我尝试混合这两个部分胜利时，它不起作用 - 显然“仅选择第一行”逻辑在 order by 之前触发*，*然后 order by 随后被忽略。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2016-03-03T14:02:39.623

在 12c 中，这是新的方式：

```
select bla
  from bla
 where bla
 order by finaldate desc
 fetch first 1 rows only; 
```

这多好啊！

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-15T22:20:31.610

这个问题类似于[如何限制 Oracle 查询在排序后返回的行数？](https://stackoverflow.com/questions/470542/how-do-i-limit-the-number-of-rows-returned-by-an-oracle-query-after-ordering).

它讨论了如何在 oracle 数据库上实现 MySQL 限制，根据您的标签和帖子来判断您正在使用什么。

相关部分是：

```
select *
from  
  ( select * 
  from emp 
  order by sal desc ) 
  where ROWNUM <= 5; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T22:21:51.970

您可以嵌套查询：

```
select * from (
    select bla
    from bla
    where bla
    order by finaldate desc
)
where rownum < 2 
```

# java - 原始实例（包装器）

> ID：11978139
> 
> 赞同：1
> 
> 时间：2012-08-15T22:16:45.563
> 
> 标签：java, casting, primitive-types

> **可能重复：**
> [确定对象是否为原始类型](https://stackoverflow.com/questions/709961/determining-if-an-object-is-of-primitive-type)

这可能听起来很愚蠢，但请原谅我，我正在使用愚蠢的代码。给定一组对象，识别哪些是原语，或者更准确地说，是围绕原语的包装器，最好的方法是什么？

假设我想打印所有原语：

```
HashMap<String,Object> context = GlobalStore.getContext(); // Some bizarre, strangely populated context
for(Entry<String,Object> e : context.entrySet()){
   if(e.value() instanceof PRIMITIVE){ // What goes here?
        System.out.println(e);
   }
} 
```

除了一一列举所有原语之外，这可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T22:20:17.033

优秀的[Google Guava](http://code.google.com/p/guava-libraries/)项目提供了[Primitives.isWrapperType(Class)](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/primitives/Primitives.html)可以用作：

```
Primitives.isWrapperType(e.value().getClass()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T22:19:11.763

您可以检查每个可能的原语，或者，如果您知道不会有任何 BigXxx 或 AtomicXxx，您也可以检查：

```
if(e.value() instanceof Number || e.value() instanceof Boolean || e.value() instanceof Character) 
```

[的子类列表`Number`](http://docs.oracle.com/javase/7/docs/api/java/lang/Number.html)：

> `AtomicInteger, AtomicLong, BigDecimal, BigInteger, Byte, Double, Float, Integer, Long, Short`

[原语列表](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2)：

> 布尔、字节、短、整数、长、字符、浮点、双精度

但是考虑到只有 8 种原始类型，您不妨将它们全部检查并在实用程序方法中进行测试。

ps：请注意，Guava 和可能重复中链接的答案也包括 Void，这与`System.out.println(void.class.isPrimitive());`打印为 true 的事实一致。

# .net - ServiceReferences.ClientConfig 加上缓慢的猎豹不转换

> ID：11978141
> 
> 赞同：4
> 
> 时间：2012-08-15T22:16:51.520
> 
> 标签：.net, visual-studio, silverlight, slowcheetah

我在 VS 2010 中有一个 silverlight 5 项目，并希望根据我的配置更改其配置文件，就像更改 Web 应用程序的数据库连接字符串一样。

我的 ServiceReferences.ClientConfig 看起来像这样：

```
<configuration>
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IWcfPortal" closeTimeout="00:10:00"
                openTimeout="00:10:00" receiveTimeout="00:10:00" sendTimeout="00:10:00"
                maxBufferSize="25000000" maxReceivedMessageSize="25000000" />
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint name="WcfCslaService" address="http://localhost:22/Services/WcfSlPortal.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IWcfPortal"
            contract="WcfPortal.IWcfPortal" />
    </client>
</system.serviceModel> 
```

我的 ServiceReferences.MyConfig.ClientConfig 文件（通过右键单击慢猎豹自动添加，添加转换）如下所示：

```
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
<system.serviceModel>
    <client>
        <endpoint name="WcfCslaService" address="http://192.168.0.0:22/Services/WcfSlPortal.svc"
                  binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IWcfPortal" contract="WcfPortal.IWcfPortal"
                  xdt:Transform="Replace" />
    </client>
</system.serviceModel> 
```

我的问题是，转换没有发生，而不是替换整个节点（就像在我的 web.config 在同一个解决方案中所做的那样）。我尝试过清理/重建，手动删除 .xap 文件，一次构建一个项目。如果我查看我的 silverlight project\bin 文件夹并解压缩我的 xap 文件，它最终会包含所有 ClientConfig 文件，并且主配置文件保持不变。我的 xap 文件中也有一个错误，在“xdt:Transform”下划线显示“未声明 'http://schemas.microsoft.com/XML-Document-Transform:Transform' 属性”。

如果我右键单击 ServiceReferences.MyConfig.ClientConfig，Preview Transform 它会准确地向我显示它应该做什么（具有更新 IP 地址的相同服务）。另一个疯狂的事情是，这以前是有效的，我不知道我做了什么来破坏它（在我去提交回购之前就坏了）。我已经卸载并重新安装了慢速猎豹，重新启动等。

任何人都知道如何修复这个转换工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T16:02:29.397

感谢 Kit 的帮助。我终于有一点时间来研究这个问题，并使用不同的配置部署到几个不同的服务器上，并提出了以下解决方案：

1.  确保 Web 项目属性构建输出路径为 \bin\，并且在项目属性的 Silverlight 应用程序部分中将配置特定文件夹设置为否
2.  确保 Silverlight 项目属性构建输出路径是 \bin\ （这是我的第一个问题）
3.  使用 Slow Cheetah（简单）或修改 silverlight 项目的 csproj xml（有点痛苦，但一次完成后还不错 - 这是允许您为 ServiceReferences.ClientConfig 文件进行配置特定转换的[链接）。](https://stackoverflow.com/questions/7360533/dynamic-endpoints-in-servicereferences-clientconfig%20on%20silverlight%20project)使用慢速猎豹，您可以通过右键单击配置特定的转换来查看您的转换。我的和 Kit 的转换工作。
4.  将 xml（取自上述链接）添加到 silverlight 项目 (csproj) 文件中。它类似于 Kit 的，但不确定为什么他不会编译而这个会（这是我的第二个问题） - 下面的 xml
5.  重建项目，然后发布。.xap 将在其中包含转换后的 ServiceReferences.ClientConfig 文件。
6.  如果您想与整个团队共享部署配置，请将 MyProject.Publish.Xml 添加到您的存储库

> ```
>  <UsingTask TaskName="TransformXml" AssemblyFile="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.Tasks.dll" />
>  <Target Name="BeforeBuild" Condition="Exists('ServiceReferences.$(Configuration).ClientConfig')">
>      <Move SourceFiles="ServiceReferences.ClientConfig" DestinationFiles="ServiceReferences.Build.ClientConfig" />
>     <TransformXml Source="ServiceReferences.Build.ClientConfig" Destination="ServiceReferences.ClientConfig" Transform="ServiceReferences.$(Configuration).ClientConfig" />
>  </Target>
>  <Target Name="AfterBuild" Condition="Exists('ServiceReferences.Build.ClientConfig')">
>      <Delete Files="ServiceReferences.ClientConfig" />
>     <Move SourceFiles="ServiceReferences.Build.ClientConfig" DestinationFiles="ServiceReferences.ClientConfig" />
>  </Target> 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T23:56:27.947

如果您真正想做的只是替换地址，那么您可能会尝试这样的事情（注意，我没有使用 SlowCheetah 本身，但也许这种间接方法会给您足够的洞察力来解决问题）。我正在使用内置的转换机制并连接到`BeforeBuild`MSBuild`AfterBuild`目标。

在`ServiceReferences.ClientConfig.Template`我有类似的东西

```
<configuration>
  <system.serviceModel>
    <!-- ... -->
    <client>
      <endpoint
        name="Mine"
        address="http://localhost:8080/SomeService.svc"
        binding="basicHttpBinding"
        bindingConfiguration="..."
        contract="..."/>
    </client>
  </system.serviceModel>
</configuration> 
```

为了替换地址，我使用了变换

```
<configuration xmlns:xdt="http://schemas.microsoft.com/XML-Document-Transform">
  <system.serviceModel>
    <client>
      <endpoint
        xdt:Locator="Match(name)"
        xdt:Transform="SetAttributes(address)"
        name="Mine" 
        address="http://SomethingElse/Services/SomeService.svc"/> 
```

如果您尝试替换整个节点，我还没有尝试过，但是虽然很痛苦，但您可能可以删除所有不需要的属性，然后添加新属性。

为了启动创建 real 的转换，`ServiceReferences.ClientConfig`我的 Silverlight`.csproj`文件中有以下内容：

```
 <Target Name="BeforeClean">
    <Delete Files="ServiceReferences.ClientConfig" />
    <Message Importance="High" Text="***** Deleted generated ServiceReferences.ClientConfig" />
  </Target>
  <Target Name="BeforeBuild" Condition="Exists('ServiceReferences.$(Configuration).ClientConfig')">
    <!-- this is the file that ultimately we want to populate in a .xap, but this is also not version controlled; effectively it's always generated -->
    <Delete Files="ServiceReferences.ClientConfig" />
    <!-- transform the template -->
    <TransformXml Source="ServiceReferences.Template.ClientConfig" Destination="ServiceReferences.ClientConfig" Transform="ServiceReferences.$(Configuration).ClientConfig" />
    <Message Importance="High" Text="***** Generated ServiceReferences.ClientConfig from ServiceReferences.Template.ClientConfig and ServiceReferences.$(Configuration).ClientConfig" />
  </Target>
  <Target Name="AfterBuild" /> 
```

其他一些（可能已经在您的解决方案中正确设置）要检查的“明显”事项包括：

*   确保您的 Silverlight 项目属性具有正确的`.xap`名称并生成 Silverlight 清单文件。
*   确保 Silverlight 应用程序的 Web 主机项目包含上述项目的名称，并且将其放置在`ClientBin`Path *in Web 中*。
*   确保两个项目的依赖关系和构建顺序正确

# profile - Facebook“点赞框”不显示 - 需要登录才能显示喜欢的其他人的头像

> ID：11978143
> 
> 赞同：0
> 
> 时间：2012-08-15T22:17:01.417
> 
> 标签：profile, facebook-likebox, image

几乎就像标题所说的那样 - 无论您是登录还是退出 Facebook，我都希望显示 facebook“Like”插件。

该插件应显示 facebook 的面孔和点赞，但仅在您登录 facebook 时才会显示。

如果您已注销...它会在其下方显示“登录以查看此内容”。它不会显示我的插件的个人资料图片或“喜欢”，它只是空的。

这是我的网站 - [http://www.goodguyhobbies.com/](http://www.goodguyhobbies.com/)

您的帮助将不胜感激！谢谢！！

脸书likebox

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:24:51.060

检查您指向赞框的页面是否不受人口统计限制（例如特定国家或年龄范围） - 如果它是赞框将不适用于不符合这些限制的用户，也不会t 适用于已注销的用户。

这与对页面的 API 访问相同，您只能代表可以在 facebook.com 上看到该页面的用户这样做

# html - 堆错误检测

> ID：11978149
> 
> 赞同：0
> 
> 时间：2012-08-15T22:17:13.550
> 
> 标签：html, canvas, svg, rendering, iis-express

我有一个 HTML 代码，

```
<div class="layout"
                    data-type="renderingCanvas"
                    data-format="canvas"
                    style="width:100px; height:100px">
                </div> 
```

where`data-type`指的是 javascript 文件，例如 renderingCanvas 将转到 javascript 文件名 canvas.js，它将对 png 图像执行修改。并且`data-format`只是一个包含所有类型（svg、canvas、bmp 等）的结构。它只是为了确保格式有效。

现在，出于渲染目的，我将数据格式更改为“svg”..

```
<div class="layout"
                        data-type="renderingSVG"
                        data-format="svg"
                        style="width:100px; height:100px">
                    </div> 
```

renderSVG 转到 svg.js，并在 svg 文件上进行修改。

但这会产生堆损坏错误。就像它说的

```
Program : iisexpress.exe
Heap Corruption detected : after normal block......(some memory references) 
```

最奇怪的是，当我把它改回“画布”时，它工作得很好。我的意思是，当我这样做时

```
<div class="layout"
                            data-type="renderingSVG"
                            data-format="canvas"
                            style="width:100px; height:100px">
                        </div> 
```

尽管我提到的格式是画布，但它正在使用和修改 svg 图像。

我认为这是一个 IIS express 错误，有人在网上发布说，如果我们添加它可能会起作用：

```
 <staticContent>
      <mimeMap fileExtension=".svg" mimeType="image/svg+xml" />
    </staticContent> 
```

但它没有。任何线索我做错了什么？或者是否需要添加任何东西来渲染 svg 图像。

PS：数据格式和数据类型实现没有错误。与 IIS7/IIS express 的行为相同？IIS5

PS（新更新）：只有 Visual Studio 会在使用调试模式时报告堆错误。使用释放模式时，它工作正常。奇怪的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:25:14.140

它在发布模式下工作正常并不奇怪。在释放模式下，它往往会忽略内存损坏，并继续前进。在发布模式下工作并不意味着您的程序很好。如果客户端实现没有错误，则检查服务器端。问题中提供的信息不充分。

# matlab - 提高 MATLAB 函数的执行时间

> ID：11978152
> 
> 赞同：0
> 
> 时间：2012-08-15T22:18:08.977
> 
> 标签：matlab, time, execution

以下函数计算高斯核，是我编写的核岭回归算法的一部分。我想知道如何正确修改此函数以改善执行时间（即摆脱两个 for 循环）。有任何想法吗？

```
function [K] = calculate_krr_gaussiankernel(Xi,Xj,S)
    K = zeros(size(Xi,1),size(Xj,1));
    for Ixi = 1:size(Xi,1),
        for Ixj = 1:size(Xj,1),
            K(Ixi,Ixj) = exp((-norm(Xi(Ixi,:) - Xj(Ixj,:)) .^ 2) ./ (2 * (S .^ 2)));
        end
    end
end 
```

编辑：公式： ![在此处输入图像描述](../Images/0d3c260555a5f812f5d426183943387d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T22:58:50.480

这是一个最有可能更快的版本。但是，它可能会导致大`Xi`/的内存问题`Xj`。

```
function K = calculate_krr_gaussiankernel(Xi, Xj, S)

  %# create an array of difference between Xi(r,:) and Xj(s,:) for all r,s
  delta = bsxfun(@minus, permute(Xi,[1 3 2]), permute(Xj,[3 1 2]));

  %# calculate the squared norm
  ssq = sum(delta.^2, 3);

  %# calculate the kernel
  K = exp(-ssq./(2*S.^2)); 
```

这是我在做什么的解释：

*   bsxfun 行：我重塑输入，以便我可以在每个 (i,j) 处获得第三维中的差异向量
*   ssq 线只取平方和。我可以在这里取平方根，从而得到范数，但既然我们会再次平方，无论如何，那没有意义。
*   最后一行实现了 OP 中的公式，其中`ssq`是差异的平方范数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T23:13:39.107

由于 K 是对称的，因此您当然可以（大约）加倍速度。此外，您可以计算`norm`差异向量的值，然后进行一次调用，`exp()`这可能比`exp()`一遍又一遍地调用更快。把它放在一起：

```
function [K] = calculate_krr_gaussiankernel(Xi,Xj,S)
    arg = zeros(size(Xi,1),size(Xj,1));
    for Ixi = 1:size(Xi,1),
        % diagonal elements can be done in outer loop:
        arg(Ixi,Ixi) = norm(Xi(Ixi,:) - Xj(Ixi,:));
        for Ixj = Ixi+1:size(Xj,1), % off-diagonals done once and copied
            arg(Ixi,Ixj) = norm(Xi(Ixi,:) - Xj(Ixj,:));
            arg(Ixj,Ixi) = arg(Ixi,Ixj);
        end
    end
end

K = exp(( -arg.^ 2) ./ (2 * (S .^ 2))) 
```

# c# - 将图像添加到 asp:linkbutton？

> ID：11978154
> 
> 赞同：0
> 
> 时间：2012-08-15T22:18:13.683
> 
> 标签：c#, asp.net, controls

如何使用后面的代码向我的 asp:linkbutton 添加背景图像？单击链接后，我想更改背景图像吗？谢谢

```
<asp:LinkButton ID="home" runat="server">home</asp:LinkButton> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:21:47.927

```
in page_load event when you click and make a postback change image

 if (IsPostBack)
       {                  
                 ImageButton1.ImageUrl = "~/Images/newimage.gif";                           

       } 
```

# html - 'abbr' 元素：它应该包含整个术语还是仅包含缩写部分？

> ID：11978160
> 
> 赞同：0
> 
> 时间：2012-08-15T22:18:31.717
> 
> 标签：html, accessibility, semantic-markup, screen-readers, abbr

[HTML5 元素`abbr`](http://www.w3.org/TR/2012/WD-html5-20120329/the-abbr-element.html#the-abbr-element)用于标记缩写词和首字母缩略词。

不幸的是，该规范仅给出了*首字母缩略词*“WHATWG”、“WG”[和“IOFGA”](http://www.w3.org/TR/2012/WD-html5-20120329/usage-summary.html#usage-summary)的示例。

有些词不是*完全*缩写的，例如：

*   等等
*   HTML5

有替代品的例子：

```
<abbr title="et cetera">etc.</abbr>
<!-- or -->
et<abbr title="cetera">c.</abbr>

<abbr title="HyperText Markup Language 5">HTML5</abbr>
<!-- or -->
<abbr title="HyperText Markup Language">HTML</abbr>5 
```

* * *

我不一定要寻找务实的答案，我对语义、规范和可访问性的观点更感兴趣。

例如，我想知道所有不同的屏幕阅读器会阅读什么内容（如果它们被配置为完全宣布缩写，至少对于 Jaws 来说不是默认设置）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T16:43:08.683

您应该使用`<abbr>etc.</abbr>`和`<abbr>HTML5</abbr>`。

屏幕阅读器中对标签的支持很少`<abbr>`——不清楚应该支持什么：每次阅读时将 HTML5 扩展到超文本标记语言 5 会相当烦人。

至少对于 ChromeVox [我最熟悉的]，写作`et<abbr>c.</abbr>`会导致屏幕阅读器向文本转语音引擎发送两个话语：'et'、'c'。这听起来与预期的“等”不同。

打断单词很好：`<abbr>NASA</abbr> <abbr>JPL</abbr>`，但不希望在单词中间打断。

# javascript - 正确使用 .tagName

> ID：11978165
> 
> 赞同：1
> 
> 时间：2012-08-15T22:19:04.027
> 
> 标签：javascript, nodes

```
if (((document.activeElement).parentNode).tagName == "div") { 
   //do amazing things 
} 
```

出于某种原因，我的一个特定功能不起作用，我认为它与上面的行有关。上面的行在语法上是正确的还是错误的？如果上面的行是正确的，我要么删除问题（因为这样问题就没用了），要么添加函数其余部分的附加信息。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T22:20:45.393

tagName 以大写形式给出标签，因此它会给出`DIV`

请参阅[https://developer.mozilla.org/en-US/docs/DOM/element.tagName](https://developer.mozilla.org/en-US/docs/DOM/element.tagName)

您可以使用`.toLowerCase() == 'div'`（如评论中的建议）来消除案例问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T22:22:54.633

你不需要所有的括号。为了安全起见，请使用`tagName.toLowerCase()`.

```
if (document.activeElement.parentNode.tagName.toLowerCase() == "div") { 
   //do amazing things 
} 
```

可能有些浏览器有时不会给出与其他浏览器相同的大小写。这可以确保您始终比较相同的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T22:23:13.270

在 HTML 的上下文中，`tagName`字段中的值总是大写的。但是，如果您在 XML/XHTML 上下文中运行此脚本，它将返回与提供的标签完全相同的名称（不一定是大写）。

尝试调用`document.activeElement.parentNode.tagName.toLowerCase()`使其始终小写。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T22:22:00.237

尝试这个

```
if (((document.activeElement).parentNode).tagName === "DIV") { 
   //do amazing things 
} 
```

# ruby-on-rails - Rails 不需要的资产

> ID：11978170
> 
> 赞同：0
> 
> 时间：2012-08-15T22:19:32.380
> 
> 标签：ruby-on-rails, asset-pipeline

由于某种原因，rails 应用程序不再请求 app/asset/javascripts 文件夹下的 js 文件。

我已启用资产`application.rb`

我有这些行`application.js`：

```
//= require_self
//= require_tree . 
```

正确使用空行。

我已经在我的`application.html.erb`文件中包含了这一行：

```
<%= javascript_include_tag "application" %>
<%= csrf_meta_tag %> 
```

我`application.js, jquery.js, jquery-ui.js, prototype.js`在文件夹中有一些其他的 js 文件`javascripts`。但是当我在 Firefox firebug 中访问这些 js 文件时，内容与文件夹中的内容不同。我不断收到消息：`Served asset /xxx.js - 304 Not Modified (0ms)`。

这太令人沮丧了，我真的需要一些帮助。先感谢您！

我在用

导轨版本：3.2.7

红宝石版本：红宝石1.9.3p194

宝石版本：1.8.24

瘦服务器

更新：我用过`rake assets:clean`，这再也没有发生过！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:36:22.330

可能这是因为你在公共目录中有这个预编译文件

尝试将其添加到`development.rb`

```
 config.serve_static_assets = false 
```

# php - 如何为一组路径调用特定的 PHP 脚本？

> ID：11978172
> 
> 赞同：-4
> 
> 时间：2012-08-15T22:19:42.897
> 
> 标签：php, apache

> **可能重复：**
> [如何将所有请求重定向到 index.php 并保留其他 GET 参数？](https://stackoverflow.com/questions/5214502/how-to-redirect-all-requests-to-index-php-and-keep-the-other-get-params)
> [通过 index.php 重新路由所有 php 请求](https://stackoverflow.com/questions/9694118/rerouting-all-php-requests-through-index-php)

假设我们有`/var/www/someapp/index.php`脚本。现在，我们如何让 Apache 服务器发送所有对 URL 的请求，例如

```
 http://somedomain.info/someapp/alpha
 http://somedomain.info/someapp/beta
 http://somedomain.info/someapp/beta/gamma
 http://somedomain.info/someapp/epsilon/omega 
```

...到那个`index.php`脚本，我们如何从那个 PHP 脚本中检索完整路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:27:02.500

通常这是通过重写规则完成的（即 Apache 上的 mod_rewrite）。因此，对于 Apache，可能涉及修改主机的 conf 文件，或在 Web 根目录的 .htaccess 文件中应用以下内容（假设主机配置允许此类覆盖）

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d    
RewriteRule ^someapp/(.*)$ /someapp/index.php?q=$1 [L] 
```

这会将请求重定向到 index.php 文件（不更改浏览器位置栏中的 URL）并通过 GET 将 'someapp/' 之后的查询部分作为参数 'q' 传递给脚本，以便在脚本中使用，直到因为 URI 与实际的文件或目录不匹配。

# jquery - 读取尚未添加到 DOM div 的 CSS 属性

> ID：11978174
> 
> 赞同：0
> 
> 时间：2012-08-15T22:19:54.410
> 
> 标签：jquery, css, dom

如果我理论上从 ajax 调用中获取以下 HTML：

```
<div class="super">
    <span> Some Content </span>
</div> 
```

并将其包装在 jquery object`$data`中，div 可供我进行操作，但它尚未添加到 DOM 中，直到我通过一些操作函数调用插入它。

在链接的 css 文件中，我有`super`css 类的宽度和高度设置。

有没有办法让我读取添加元素时元素的宽度和高度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T22:34:47.247

只需创建一个具有相同类的假元素，将其插入 DOM，获取样式并删除元素：

```
var elem = $("<div class='super'></div>"),
    width = elem.appendTo('body').css('width');
    elem.remove(); 
```

[小提琴](http://jsfiddle.net/F5nhe/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T22:26:58.343

不，不使用 jquery，因为您只能在将 div 插入 DOM 之后从 div 获取属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T22:32:27.643

最好的方法是使用“super”类创建隐藏元素，然后使用：

```
var width = $('.super').css('width');
var height = $('.super').css('height'); 
```

因此，您可以执行以下操作：

```
var $element = $('<div class="super"><span></span></div>').hide().appendTo("body");
var width = $element.css('width');
var height = $element.css('height');
$element.remove(); 
```

有一个熟悉的线程：[Get a CSS value from external style sheet with Javascript/jQuery](https://stackoverflow.com/questions/2707790/get-a-css-value-from-external-style-sheet-with-javascript-jquery)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T22:41:28.207

那么有几种方法可以做到这一点。如果您想读取样式表值，您需要通过 document.styleSheets 对象并在那里找到具有一个属性的样式表的选择器，代码将如下所示（您可能需要编写代码来搜索类名返回的对象）：

```
<style>
        .super {
            height: 200px;
        }

    </style>
<script>
document.styleSheets[0].cssRules[0].style.height
</script> 
```

或者，只需将元素添加到屏幕外某处的 DOM（例如在上边距设置为 -9000px 的容器中）/或作为空元素并使用 jquery height() 或 css() 方法获取添加元素的高度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T22:37:41.490

我所做的是在一个

```
<div id="sandbox" style="display:none;">

</div> 
```

这样我就可以在不可见的情况下在 DOM 中引用它。一旦我在那里完成了操作，将它移动到我想要的任何地方。

# c# - DataGridView 在显示之前不会自动调整列的大小

> ID：11978181
> 
> 赞同：2
> 
> 时间：2012-08-15T22:20:43.213
> 
> 标签：c#, .net, winforms, datagridview

我有一个自定义控件，当单击按钮时，它必须显示 DataGridView 弹出窗口。我想将弹出窗口的大小调整为 DataGridView 列的大小。创建 DataGridView 时，我已经设置了 AutoSize 模式。

```
dataGridView1.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.AllCells;
dataGridView1.AutoSizeRowsMode = DataGridViewAutoSizeRowsMode.AllCells; 
```

在计算总列大小之前，我还调用了以下方法。

```
public void AutoResize()
{
    dataGridView1.AutoResizeColumns(DataGridViewAutoSizeColumnsMode.AllCells);
    dataGridView1.AutoResizeRows(DataGridViewAutoSizeRowsMode.AllCells);
    dataGridView1.Refresh();
} 
```

第一次显示弹出窗口时，它没有正确调整大小。据我所知，这是因为在 dataGridView 控件显示一次之前不会发生列的 AutoSize。

这是执行顺序。

CreateCustomControl -> CreateDataGridView（带数据）-> AddToCustomControl -> CallAutoResize -> ShowCustomControl（带 DataGridView）

一个简单的解决方案是让我在显示后调整控件的大小。我仍然想知道为什么在显示控件之前不会发生 AutoResize？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:35:57.557

这个解决方案对你有用吗

```
dataGridView1.DataSource = your DataSource would be assigned here;
dataGridView1.Columns[0].AutoSizeMode = DataGridViewAutoSizeColumnMode.AllCells;
dataGridView1.Columns[1].AutoSizeMode = DataGridViewAutoSizeColumnMode.AllCells;
dataGridView1.Columns[2].AutoSizeMode = DataGridViewAutoSizeColumnMode.Fill;

for ( int i = 0; i < dataGridView1.Columns.Count; i++ )
{
    int colw = grd.Columns[i].Width;
    dataGridView1.Columns[i].AutoSizeMode = DataGridViewAutoSizeColumnMode.None;
    dataGridView1.Columns[i].Width = colw;
} 
```

# excel - 使用 findnext 填充多维数组 VBA Excel

> ID：11978184
> 
> 赞同：3
> 
> 时间：2012-08-15T22:21:02.117
> 
> 标签：excel, vba, multidimensional-array, find, fill

我的问题实际上涉及在[EXCEL VBA Store 搜索结果中扩展的问题？](https://stackoverflow.com/questions/11312226/excel-vba-store-search-results-in-an-array?answertab=active#tab-top)

在这里，Andreas 尝试搜索一列并将命中保存到一个数组中。我也在尝试同样的方法。但不同之处在于 (1) 查找值 (2) 我想将不同的值类型从 (3) 与找到搜索值的位置相同的行中的单元格复制 (4) 到二维数组。

所以数组（概念上）看起来像：

```
Searchresult.1st SameRow.Cell1.Value1 SameRow.Cell2.Value2 SameRow.Cell3.Value3
Searchresult.2nd SameRow.Cell1.Value1 SameRow.Cell2.Value2 SameRow.Cell3.Value3
Searchresult.3rd SameRow.Cell1.Value1 SameRow.Cell2.Value2 SameRow.Cell3.Value3

Etc. 
```

我使用的代码如下所示：

```
Sub fillArray()

Dim i As Integer
Dim aCell, bCell As Range
Dim arr As Variant

i = 0 

Set aCell = Sheets("Log").UsedRange.Find(What:=("string"), _
                    LookIn:=xlValues, _
                    LookAt:=xlWhole, _
                    SearchOrder:=xlByRows, _
                    SearchDirection:=xlNext, _
                    MatchCase:=False, _
                    SearchFormat:=False)

If Not aCell Is Nothing Then
    Set bCell = aCell
    ReDim Preserve arr(i, 5)
    arr(i, 0) = True 'Boolean
    arr(i, 1) = aCell.Value 'String
    arr(i, 2) = aCell.Cells.Offset(0, 1).Value 
    arr(i, 3) = aCell.Cells.Offset(0, 3).Value
    arr(i, 4) = aCell.Cells.Offset(0, 4).Value
    arr(i, 5) = Year(aCell.Cells.Offset(0, 3).Value)

    i = i + 1

    Do While exitLoop = False
            Set aCell = Sheets("Log").UsedRange.FindNext(after:=aCell)

            If Not aCell Is Nothing Then
                If aCell.Address = bCell.Address Then Exit Do
                'ReDim Preserve arrSwUb(i, 5)
                    arr(i, 0) = True
                    arr(i, 1) = aCell.Value
                    arr(i, 2) = aCell.Cells.Offset(0, 1).Value
                    arr(i, 3) = aCell.Cells.Offset(0, 3).Value
                    arr(i, 4) = aCell.Cells.Offset(0, 4).Value
                    arr(i, 5) = Year(aCell.Cells.Offset(0, 3).Value)

                    i = i + 1
            Else
                exitLoop = True
            End If
    Loop

End If

End Sub 
```

重新调整循环中的数组似乎出错了。我得到一个下标超出范围错误。我想我不能像现在这样重新调整数组，但我不知道应该怎么做。

对于我做错了什么的任何线索，我都会非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T22:51:50.917

ReDim Preserve 只能调整数组的最后一个维度：http: [//msdn.microsoft.com/en-us/library/w8k3cys2 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/w8k3cys2(v=vs.71).aspx)

从上面的链接：

**保存**

`Optional. Keyword used to preserve the data in the existing array when you change the size of only the last dimension.`

**编辑：** 这不是很有帮助，是吗。我建议你转置你的数组。此外，来自数组函数的错误消息是 AWFUL。

在 Siddarth 的建议下，试试这个。如果您有任何问题，请告诉我：

```
Sub fillArray()
    Dim i As Integer
    Dim aCell As Range, bCell As Range
    Dim arr As Variant

    i = 0
    Set aCell = Sheets("Log").UsedRange.Find(What:=("string"), _
                                             LookIn:=xlValues, _
                                             LookAt:=xlWhole, _
                                             SearchOrder:=xlByRows, _
                                             SearchDirection:=xlNext, _
                                             MatchCase:=False, _
                                             SearchFormat:=False)
    If Not aCell Is Nothing Then
        Set bCell = aCell
        ReDim Preserve arr(0 To 5, 0 To i)
        arr(0, i) = True 'Boolean
        arr(1, i) = aCell.Value 'String
        arr(2, i) = aCell.Cells.Offset(0, 1).Value
        arr(3, i) = aCell.Cells.Offset(0, 3).Value
        arr(4, i) = aCell.Cells.Offset(0, 4).Value
        arr(5, i) = Year(aCell.Cells.Offset(0, 3).Value)
        i = i + 1
        Do While exitLoop = False
            Set aCell = Sheets("Log").UsedRange.FindNext(after:=aCell)
            If Not aCell Is Nothing Then
                If aCell.Address = bCell.Address Then Exit Do
                ReDim Preserve arrSwUb(0 To 5, 0 To i)
                arr(0, i) = True
                arr(1, i) = aCell.Value
                arr(2, i) = aCell.Cells.Offset(0, 1).Value
                arr(3, i) = aCell.Cells.Offset(0, 3).Value
                arr(4, i) = aCell.Cells.Offset(0, 4).Value
                arr(5, i) = Year(aCell.Cells.Offset(0, 3).Value)
                i = i + 1
            Else
                exitLoop = True
            End If
        Loop
    End If
End Sub 
```

注意：在声明中，您有：

```
Dim aCell, bCell as Range 
```

这与以下内容相同：

```
Dim aCell as Variant, bCell as Range 
```

一些测试代码来演示上述内容：

```
Sub testTypes()

    Dim a, b As Integer
    Debug.Print VarType(a)
    Debug.Print VarType(b)

End Sub 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T23:35:15.020

这是一个选项，假设您可以在开始时对数组进行标注。我在 UsedRange 上使用了 WorsheetFunction.Countif 作为“字符串”，这似乎应该可以工作：

```
Option Explicit

    Sub fillArray()

    Dim i As Long
    Dim aCell As Range, bCell As Range
    Dim arr() As Variant
    Dim SheetToSearch As Excel.Worksheet
    Dim StringCount As Long

    Set SheetToSearch = ThisWorkbook.Worksheets("log")
    i = 1

    With SheetToSearch
        StringCount = Application.WorksheetFunction.CountIf(.Cells, "string")
        ReDim Preserve arr(1 To StringCount, 1 To 6)
        Set aCell = .UsedRange.Find(What:=("string"), LookIn:=xlValues, LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False, SearchFormat:=False)

        If Not aCell Is Nothing Then
            arr(i, 1) = True    'Boolean
            arr(i, 2) = aCell.Value    'String
            arr(i, 3) = aCell.Cells.Offset(0, 1).Value
            arr(i, 4) = aCell.Cells.Offset(0, 3).Value
            arr(i, 5) = aCell.Cells.Offset(0, 4).Value
            arr(i, 6) = Year(aCell.Cells.Offset(0, 3).Value)
            Set bCell = aCell
            i = i + 1

            Do Until i > StringCount
                Set bCell = .UsedRange.FindNext(after:=bCell)
                If Not bCell Is Nothing Then
                    arr(i, 1) = True    'Boolean
                    arr(i, 2) = bCell.Value    'String
                    arr(i, 3) = bCell.Cells.Offset(0, 1).Value
                    arr(i, 4) = bCell.Cells.Offset(0, 3).Value
                    arr(i, 5) = bCell.Cells.Offset(0, 4).Value
                    arr(i, 6) = Year(bCell.Cells.Offset(0, 3).Value)
                    i = i + 1
                End If
            Loop
        End If
    End With

    End Sub 
```

请注意，我在您的声明中修复了一些问题。我添加了 Option Explicit，它强制您声明变量 - exitLoop 未声明。现在 aCell 和 bCell 都是范围 -[以前只有 bCell 是](http://www.cpearson.com/Excel/DeclaringVariables.aspx)（向下滚动到“注意使用 One Dim 语句声明的变量”）。我还创建了一个工作表变量，并将其括在 With 语句中。此外，我将数组的两个维度都从 1 开始，因为......好吧，因为我想我猜 :)。我还简化了一些循环退出逻辑 - 我认为您不需要所有这些来判断何时退出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T22:52:57.363

你不能`Redim Preserve`像这样的多维数组。在多维数组中，使用 Preserve 时只能更改最后一个维度。如果您尝试更改任何其他维度，则会发生运行时错误。我建议阅读这个[msdn](http://msdn.microsoft.com/en-us/library/x397t1yt%28v=vs.71%29.aspx)链接

话虽如此，我可以想到 2 个选项

**选项1**

将结果存储在新的临时表中

**选项 2**

声明一维数组，然后使用唯一的分隔符连接您的结果，例如`"#Evert_Van_Steen#"`

在代码的顶部

```
Const Delim As String = "#Evert_Van_Steen#" 
```

然后像这样使用它

```
ReDim Preserve arr(i)

arr(i) = True & Delim & aCell.Value & Delim & aCell.Cells.Offset(0, 1).Value & Delim & _
aCell.Cells.Offset(0, 3).Value & Delim & aCell.Cells.Offset(0, 4).Value & Delim & _
Year(aCell.Cells.Offset(0, 3).Value) 
```

# objective-c - 当 UITableView 中出现“删除”按钮时如何捕获事件？

> ID：11978186
> 
> 赞同：0
> 
> 时间：2012-08-15T22:21:13.277
> 
> 标签：objective-c, ios, cocoa-touch, uitableview

我有一个带有一堆自定义单元格的表格部分，每个单元格都有两个相邻的 UITextField。

当表格进入编辑模式时，我必须调整每个单元格的右侧 UITextField 的大小，以免单元格左侧出现的删除减号将其推离屏幕。

当用户按下删除减号并且“删除”m按钮出现在单元格的右侧时，我需要做类似的事情。我需要调整正确的 UITextField 的大小，使其不会被 Delete 按钮部分遮挡。但是，当删除按钮出现时，我找不到任何协议方法或任何提醒我的东西。

当用户滑动要删除的行时，此方法似乎有效：

```
- (void)tableView:(UITableView *)tableView willBeginEditingRowAtIndexPath:(NSIndexPath *)indexPath 
```

但是，当用户按下红色减号按钮删除时，它不会调用该函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T19:09:57.190

尝试使用这些：

```
 - (void)willTransitionToState:(UITableViewCellStateMask)newState{
    [super willTransitionToState:newState];

    //deletebutton (minusbutton) will be animated in
    if(newState == UITableViewCellStateShowingEditControlMask){

    }

    //deletebutton (minusbutton) will be animated out
    if(newState == UITableViewCellStateDefaultMask){

    }

    //deletebutton (minusbutton) will be rotated 90 degrees ccw
    if(newState == 3){

    }

    //deletebutton (minusbutton) will be rotated 90 degrees cw
    if(newState == UITableViewCellStateShowingEditControlMask){

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T11:55:22.223

cell.showingDeleteConfirmation 是您正在寻找的。

# sql - 嵌套选择或内部联接，包括来自另一个表的行

> ID：11978193
> 
> 赞同：0
> 
> 时间：2012-08-15T22:21:41.693
> 
> 标签：sql, sql-server-2008, sql-server-2005

我有一个非常复杂的选择语句，它使用内部连接从表中返回计数统计信息（将其视为答案库——下面的复杂选择语句）。

这些答案与名为 Questions_Bank_AnswerChoices 的表相关（存储所有问题）。

我试图首先提取问题（从表 Questions_Bank_AnswerChoices 中），然后将它们与统计数据（下面的复杂语句）匹配。下面的复杂语句提取统计数据，但除非问题已得到回答，否则不会提取问题。

因此，如果没有人回答问题 1，那么问题 1 将不会显示在统计数据中，因为它不包含在“答案”表中（因为没有人回答它）。

我怎样才能做到这一点？我认为我需要外部加入？

复杂的选择语句：

```
WITH tbl as (
   SELECT 
      Questions_Bank.QuestionID, Questions_Bank.QuestionName,   
      REPLACE(Schools_Answers_Items.AnswerValue, '? ', ', ') as AnswerValue, 
      COUNT(Schools_Answers_Items.SchoolsAnswersItemID) AS CountAnswer,
      Schools_Answers_Items.SchoolID 
   FROM Questions_Bank 
   INNER JOIN Schools_Answers_Items
     ON Questions_Bank.QuestionID = Schools_Answers_Items.QuestionID 
   LEFT OUTER JOIN Schools_Answers  
     ON Schools_Answers_Items.SchoolsAnswerID = Schools_Answers.SchoolsAnswerID 
   WHERE (Questions_Bank.QuestionID = 1108) 
     AND (Schools_Answers.SchoolID = 103) 
   GROUP BY 
      Schools_Answers_Items.SchoolID,         
      Schools_Answers_Items.AnswerValue,
      Questions_Bank.QuestionID, 
      Questions_Bank.QuestionName
) 
SELECT 
   QuestionID, QuestionName, AnswerValue, CountAnswer, 
   SUM(CountAnswer) OVER () AS CountAllAnswers  
FROM tbl 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:48:15.143

尝试改变这个

```
INNER JOIN Schools_Answers_Items
  ON Questions_Bank.QuestionID = Schools_Answers_Items.QuestionID 
```

至

```
LEFT OUTER JOIN Schools_Answers_Items
  ON Questions_Bank.QuestionID = Schools_Answers_Items.QuestionID 
```

你可能想删除这个

```
AND (Schools_Answers.SchoolID = 103) 
```

或者用这个替换它

```
AND (Schools_Answers.SchoolID = 103 OR Schools_Answers.SchoolID IS NULL) 
```

* * *

尝试这个：

```
 SELECT 
      Questions_Bank.QuestionID, Questions_Bank.QuestionName,   
      REPLACE(Schools_Answers_Items.AnswerValue, '? ', ', ') as AnswerValue,
      Schools_Answers_Items.SchoolID 
   FROM Questions_Bank 
   LEFT OUTER JOIN Schools_Answers_Items
     ON Questions_Bank.QuestionID = Schools_Answers_Items.QuestionID 
   LEFT OUTER JOIN Schools_Answers  
     ON Schools_Answers_Items.SchoolsAnswerID = Schools_Answers.SchoolsAnswerID 
   WHERE Schools_Answers_Items.SchoolID 
```

# vb.net - 在 vb.net 中打开一个 excel 文件

> ID：11978194
> 
> 赞同：0
> 
> 时间：2012-08-15T22:21:42.663
> 
> 标签：vb.net

有没有办法只用文件名和扩展名（xlApp.Workbooks.Open（“Test.xlsx”））调用 Open() 函数并让它在你的整个计算机中搜索文件？我知道你可以打开文件，如果它有一个像“c:\docume~1(username)\desktop\Test.xlsx”这样的指定路径，但我想知道是否有一种方法可以在你的整个计算机中搜索文件而不指定整个路径。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:33:22.063

你可以使用：

```
string[] fileNames = Directory.GetFiles("C:\\", "yourFile.xls", 
                                   SearchOption.AllDirectories); 
```

或者

```
var txtFiles = Directory.EnumerateFiles("C:\\", "yourFiles.xls", 
                                        SearchOption.AllDirectories); 
```

但是您应该仔细阅读 MSDN 上的文档[(GetFiles)](http://msdn.microsoft.com/en-us/library/ms143316) [(EnumerateFiles)](http://msdn.microsoft.com/en-us/library/dd383571)，因为有许多事实需要准备。*（未经授权的访问例外，搜索时间）*

# javascript - 如何在 jquery 的 find() 中动态提供元素/标签

> ID：11978196
> 
> 赞同：1
> 
> 时间：2012-08-15T22:21:50.773
> 
> 标签：javascript, jquery

我已经创建了几个具有 id 的 div，例如 window1、window2 等。现在我只想找到

上面创建的 div 中的标签。我在 for 循环中执行此操作，但它对我不起作用。这是我正在做的

```
 for(connectWindow=1;connectWindow<=xmlLength;connectWindow++)
        {

                //look for the to tag inside the html
                var windo = "window"+connectWindow;
                var to = "to"+connectWindow;
                alert("Making connections" + windo +to)
                //$("div#windo").find('strong#to')(function())
                $("div#windo").find('p#to').each(function(){
                    alert("@@@@@@@@@@@@@@@@@@@@");
                    var name = $(this).text();
                    //display_function(name,country);
                    alert("Name is :::"+name);

                });
          } 
```

请让我知道我哪里出错了。另外，请让我知道 JavaScript 中是否有任何解决方案。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:24:30.837

你需要这样做

```
 $("div#" + windo).find('p#' + to).each(function(){ // <-- this uses your variable
          alert("@@@@@@@@@@@@@@@@@@@@");
          var name = $(this).text();
          //display_function(name,country);
          alert("Name is :::"+name);
  }); 
```

您的代码查找`id="window"`and`id="to"`而不是您的变量

```
$("div#windo").find('p#to') 
```

你真的可以通过 ID 来完成，因为你使用的是`#`(id 选择器)

```
$("#" + windo).find('#' + to) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T22:24:39.637

好吧，您需要实际使用变量：

```
$("div#" + windo).find('p#' + to).each(function(){ 
```

顺便说一句 - jQuery*是用*JavaScript 编写的。如果您使用的是 jQuery，那么您使用的是 JavaScript。

# css - CSS 奇怪的行为：突然包围事物

> ID：11978206
> 
> 赞同：2
> 
> 时间：2012-08-15T22:23:13.543
> 
> 标签：css

看看这张图片：它![来自 jsfiddle](../Images/8f95b27a3c74e8489b47488d8e7ebd34.png)是[这个 jsfiddle](http://jsfiddle.net/scythargon/QPGfH/)的放大截图。那么，红条周围的紫色边框是什么？![在此处输入图像描述](../Images/007b4b24dc428ca2692eed62a940ec43.png)它存在，但某处不存在。

更好的图片：![1](../Images/e6d773b32397fe4f481e68640dad8a20.png) ![2](../Images/914dc67072f13e59992dfd0ce9168277.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T11:23:55.750

所以，我们在[math.SE](https://math.stackexchange.com/questions/183018/pixel-rectangle-precise-rotating)上解决了这个问题，作为一个捷径 -*宽度和高度都应该是相同的奇偶校验（即，要么都是奇数，要么都是偶数）*（感谢 Steven Stadnicki）。

# javascript - 根据浏览器滚动条的位置缩放 div 的大小

> ID：11978207
> 
> 赞同：0
> 
> 时间：2012-08-15T22:23:23.253
> 
> 标签：javascript, jquery, html, css, lightbox

我需要根据浏览器滚动条的位置动态调整 div 的大小。期望的行为是让灯箱的特色 div 在打开时以 800 像素宽呈现，然后在向下滚动页面时缩小到该大小的 1/3，然后在向上滚动时不断增加大小. 到目前为止，当我向下滚动时，我已经能够使其按比例放大，但无法按比例缩小。如果有人可以帮助我解决这个问题，将不胜感激。

[http://jsfiddle.net/juicesandmilks/CnuAL/3/](http://jsfiddle.net/juicesandmilks/CnuAL/3/)

-迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:27:05.277

为我工作：

[http://jsfiddle.net/6APeM/1/](http://jsfiddle.net/6APeM/1/)

如果您将 js 放入 jsFiddle 的 javascript 部分，则必须删除脚本标签。

# perl - 计算文件中字符串的出现次数

> ID：11978208
> 
> 赞同：1
> 
> 时间：2012-08-15T22:23:23.823
> 
> 标签：perl

我编写了一个 perl 脚本来计算文件中字符的出现次数。到目前为止，这就是我所得到的，

```
#!/usr/bin/perl -w

use warnings;
no warnings ('uninitialized', 'substr');

my $lines_ref;
my @lines;
my $count;

sub countModule()
{
my $file = "/test";
open my $fh, "<",$file or die "could not open $file: $!";
my @contents = $fh;
my @filtered = grep (/\// ,@contents);
return \@filtered;
}

@lines = countModule();
#@lines = $lines_ref;
$count = @lines;
print "###########\n $count \n###########\n"; 
```

我的测试文件如下所示：

```
10.0.0.1/24
192.168.10.0/24
172.16.30.1/24 
```

我基本上是在尝试计算“/”的实例数

这是我得到的输出：

```
###########
 1
########### 
```

我得到的是 1 而不是 3，这是出现的次数。仍在学习 perl，所以任何帮助将不胜感激..谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T02:35:48.713

以下是关于您的代码的几点

*   您应该*始终* `use strict`处于程序的顶部，并且仅`no warnings`在有限范围内出于特殊原因使用。没有一般的理由说明一个工作的 Perl 程序需要全局禁用警告

*   声明你的变量接近它们的第一个使用点。在文件顶部声明所有内容的风格是不必要的，并且是 C 的遗产

*   *永远不要*在代码中使用原型。它们可用于非常特殊的目的，不应用于绝大多数 Perl 代码。`sub countModule() { ... }`坚持`countModule`可能永远不会使用任何参数调用，并且没有必要或有用。定义应该只是`sub countModule { ... }`

*   **大功告成*！*用于使用词法文件句柄，open 的三参数形式，并放入`$!`你的 die 字符串**

*   `my @contents = $fh`将设置`@contents`为仅包含文件句柄的单元素列表。要将整个文件读入您​​需要的数组`my @contents = <$fh>`

*   如果您使用不同的分隔符，您可以避免在正则表达式中转义斜杠。为此，您需要`m`明确使用运算符，例如`my @filtered = grep m|/|, @contents)`

*   您返回一个数组引用，但将返回的值分配给一个数组，因此`@lines = countModule()`设置`@lines`为一个仅包含数组引用的单元素列表。您应该返回一个列表`return @filtered`或取消引用赋值时的返回值`@lines = @{ countModule }`

如果您需要做的就是打印文件中包含斜杠字符的行数，那么您可以编写类似这样的内容

```
use strict;
use warnings;

my $count;

sub countModule {
  open my $fh, '<', '/test' or die "Could not open $file: $!";
  return [ grep m|/|, <$fh> ];
}

my $lines = countModule;
$count = @$lines;
print "###########\n $count \n###########\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T22:35:12.737

关闭，但有几个问题：

```
use strict;
use warnings;

sub countModule
{
    my $file = "/test";
    open my $fh, "<",$file or die "could not open $file: $!";
    my @contents = <$fh>;  # The <> brackets are used to read from $fh.
    my @filtered = grep (/\// ,@contents);
    return @filtered;      # Remove the reference.
}

my @lines = countModule();
my $count = scalar @lines;  # 'scalar' is not required, but lends clarity.
print "###########\n $count \n###########\n"; 
```

我对您的代码所做的每一项更改都带有#comment 注释，解释了所做的事情。

现在在列表上下文中，您的子例程将返回过滤后的行。在标量上下文中，它将返回过滤了多少行的计数。

您确实还提到了查找字符的出现（尽管脚本中的所有内容都是面向行的）。也许你的柜台潜艇看起来像这样：

```
sub file_tallies{
    my $file = '/test';
    open my $fh, '<', $file or die $!;
    my $count;
    my $lines;
    while( <$fh> ) {
        $lines++;
        $count += $_ =~ tr[\/][\/];
    }
    return ( $lines, $count );
}

my( $line_count, $slash_count ) = file_tallies(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T22:31:06.483

在列表上下文中，

```
return \@filtered; 
```

返回一个包含一个元素的列表 - 对命名数组的引用`@filtered`。也许您想返回列表本身

```
return @filtered; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-15T23:19:00.440

这是一些更简单的代码：

```
sub countMatches {
    my ($file, $c) = @_;   # Pass parameters
    local $/;
    undef $/; # Slurp input
    open my $fh, "<",$file or die "could not open $file: $!";
    my $s = <$fh>;  # The <> brackets are used to read from $fh.
    close $fh;
    my $ptn = quotemeta($c);  # So we can match strings like ".*" verbatim
    my @hits = $s =~ m/($ptn)/g;
    0 + @hits
}

print countMatches ("/test", '/') . "\n"; 
```

该代码将 Perl 推到了非常基础的范围之外，但并不过分。要点：

1.  通过取消 $/ 您可以将输入读入一个字符串。如果您正在计算文件中字符串的出现次数，而不是包含该字符串的行的出现次数，这通常更容易做到。

2.  m/(...)/g 会找到所有的命中，但如果你想计算像“。”这样的字符串。您需要引用其中的元字符。

3.  将结果存储在数组中以在列表上下文中评估 m//

4.  将 0 添加到列表中会给出其中的项目数。

# plone - 基于全局选项卡加载 html (getText)

> ID：11978210
> 
> 赞同：0
> 
> 时间：2012-08-15T22:23:31.667
> 
> 标签：plone

我正在尝试使用 getText 根据每个全局选项卡（每个选项卡将加载不同的 html 页面）加载不同的 html 页面。有谁知道为每个不同的文本指定特定选项卡的代码？下面的代码将相同的文本加载到所有选项卡中：

```
<div class="col_3" metal:define-macro="highlights" i18n:domain="plone">
<h2>Highlights</h2>
<p> 
<tal:block tal:condition= "exists:here/graduate-study/highlghts-grad"
tal:replace="structure here/graduate-study/highlghts-grad/getText">Footer content here</tal:block>
</p>
</div>
<div class="col_3" metal:define-macro="highlights" i18n:domain="plone">
<h2>Highlights</h2>
<p> 
<tal:block tal:condition= "exists:here/undergraduate-study/highlghts-grad"
tal:replace="structure here/undergraduate-study/highlghts-grad/getText">Footer content here</tal:block>
</p>
</div> 
```

等等，等等所有标签...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:22:50.413

Plone 中的全局选项卡是导航根。您可以通过两种方式检测*当前活动*的导航根：

*   body HTML 标记有一个`section-[id_of_section]`CSS 类，其中`id_of_section`随每个部分的路径名而变化。

    从 viewlet 或 portlet 中，您可以使用`@@plone_layout`视图检索这些类：

    ```
    tal:define="plone_layout context/@@plone_layout;
                bodyClass python:plone_layout.bodyClass(template, view)" 
    ```

    之后，您必须测试`state-`bodyClass 值中是否存在某个字符串。

*   通过直接从`@@plone_portal_state`视图中检索他当前的导航根：

    ```
    tal:define="plone_portal_state context/@@plone_portal_state;
                nav_root plone_portal_state/navigation_root;
                nav_root_id nav_root/getId" 
    ```

    然后，您可以根据`nav_root_id`.

但是请注意，每个导航根都有一个门户类型，可能还有一个接口声明，您可以使用它来注册 viewlet 或 portlet。检测准确的导航通常不是最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T18:19:18.253

这种效果通常被称为“megamenu”。有一个产品可以为 Plone 实现这一点，[http](http://plone.org/products/collective.collage.megamenu/) ://plone.org/products/collective.collage.megamenu/ 。我没有使用过它，但我当然建议您将其作为起点进行探索。

# regex - 正则表达式：从已经排除特定字符的模式中排除字符串

> ID：11978211
> 
> 赞同：0
> 
> 时间：2012-08-15T22:23:52.560
> 
> 标签：regex, validation

我正在尝试编写一个正则表达式来验证 url 路径。我们最初有这样的模式： [^#\?:]+ 它将抓取所有内容，直到路径中的第一个 ?、: 或 # 为止。

我们现在还想排除字符串“index.cfm”。

我不知道如何包含这个。我已经查看了环顾四周，但我似乎无法弄清楚如何将它与我们已有的模式结合使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:37:03.343

**编辑：**这是根据您的评论编辑的解决方案。

```
^.*?(?=[#?:]|index\.cfm|$) 
```

这是使用您提到的网站的演示：[http](http://regexr.com?31rk9) ://regexr.com?31rk9 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:05:33.510

应该为你工作 `^(?P<url>[^#?:](?!index\.cfm))+`

# git - 文件的部分/部分/范围是否有任何同步系统？

> ID：11978214
> 
> 赞同：1
> 
> 时间：2012-08-15T22:24:21.613
> 
> 标签：git, svn, version-control

Git 和 Subversion 是在不同位置同步源文件并管理其版本的绝佳系统。

**但是，有时只获取源文件的部分/部分/范围并在项目内和项目之间的不同位置之间同步此部分/部分**可能很有用。

这种情况的示例场景可能是：

*   `<p>(c) My Inc. 2012</p>`在各种 Web 属性（例如）中相同的网页的“页脚” 。
*   小型实用方法，不保证包含另一个依赖项/库（例如`public static byte[] fromInputStream(InputStream is);`）。
*   配置文件的公共部分，例如服务器地址，数据库登录信息，...

上述场景还有其他解决方案，但能够同步源文件的各个部分可能是一种可行的、通用的、用于许多目的的附加工具。

**您知道用于同步源文件的部分/部分/范围的任何工具吗？**

（我为此构建了一个小原型，这并不太难，但如果了解任何基于已知 SCM 解决方案的已建立系统/方法，那就太好了）。

编辑：我将标题从要求版本控制系统更改为要求同步系统，因为我认为它更好地反映了问题的内容并响应了下面的讨论。

# c# - WinCE Active Sync 调试设置

> ID：11978218
> 
> 赞同：0
> 
> 时间：2012-08-15T22:24:30.093
> 
> 标签：c#, windows-ce, activesync

使用 Visual Studio 2005 和 Windows CE 6.0 R3。我有主动同步工作，我可以通过 Visual Studio 将我的应用程序部署到设备上。但是，我在设备上获得了系统锁定，我收到的唯一调试消息是：

```
The thread 0x50c0006 has exited with code 0 (0x0). 
```

干净的退出还会打印出额外的一行，说明 .exe 也以代码 0 退出。

我觉得我错过了一些明显的步骤，或者一些不可能的事情，但到目前为止我已经看过或尝试过的任何事情都没有运气。

感谢任何人提供的任何信息。

# windows - Windows 8 RTM 上的打包应用程序

> ID：11978220
> 
> 赞同：0
> 
> 时间：2012-08-15T22:24:31.977
> 
> 标签：windows, windows-8

我刚刚下载并安装了最新的 Windows 8 版本 - rtm。在构建包时（构建和运行效果很好）我遇到了一些问题。我必须提到，在以前的版本中 - windows 8 RP 打包效果很好。

```
Error   1   In the app manifest, the value of element OSMinVersion ('6.2.0') must have a value of '6.2.1' or higher. [..]\Package.appxmanifest 
```

起初清单文件看起来像这样：

```
<Prerequisites>
  <OSMinVersion>6.2.0</OSMinVersion>
  <OSMaxVersionTested>6.2.0</OSMaxVersionTested>
</Prerequisites> 
```

但是我已经更改了它，但 VS 仍然不想构建包（错误消息仍然完全相同）：/ 我尝试将其更改为 6.2.1 或 6.3.0 - 仍然没有。

提前感谢您的帮助:)

PS：我已经重新启动 IDE 甚至清理项目 - 仍然无法正常工作。

# javascript - JS/jQuery - 更新内容

> ID：11978221
> 
> 赞同：0
> 
> 时间：2012-08-15T22:24:38.370
> 
> 标签：javascript, jquery, wordpress, slider, overflow

我在 WP 网站上使用 RoyalSlider，并且像大多数滑块一样，它使用溢出：隐藏属性。这当然是正常的 - 但每张幻灯片的标题不能移动到滑块包装之外，因为它会由于溢出而被剪裁。

我想知道是否有人可以因此帮助我使用一些 JS/jQuery 来使用包装器内的标题内容更新包装器外部 div 的内容，以便在每张幻灯片移动时，包装器外部的 div 更新和充当真正的标题。如果这是有道理的。

这是我当前的滑块 HTML 和随附的 jQuery（由于 WP 插件而变得混乱）。

非常感谢，R

```
<div class="landing-slider-container">
            <div id="royalslider-1" class="royalSlider default" style="width:1025px; height:600px;">
                <ul class="royalSlidesContainer">
                    <li data-src="EVA-BERENDES-0263.jpg" class="royalSlide">
                        <div class="royalHtmlContent">
                            People &amp; Events Will Be The Decoration<br>
                            19 Feb - 16 Apr
                        </div>
                    </li>
                    <li data-src="EVA-BERENDES-0263.jpg" class="royalSlide">
                        <div class="royalHtmlContent">
                            People &amp; Events Will Be The Decoration<br>
                            19 Feb - 16 Apr
                        </div>
                    </li>
                </ul>
            </div>

<script type="text/javascript">
jQuery(document).ready(function() {jQuery("#royalslider-1").royalSlider({"width":1025,"height":600,"skin":"default","preloadSkin":true,"lazyLoading":true,"preloadNearbyImages":true,"slideshowEnabled":false,"slideshowDelay":5000,"slideshowPauseOnHover":true,"slideshowAutoStart":true,"keyboardNavEnabled":true,"dragUsingMouse":false,"slideSpacing":50,"startSlideIndex":0,"imageAlignCenter":true,"imageScaleMode":"none","autoScaleSlider":false,"autoScaleSliderWidth":960,"autoScaleSliderHeight":400,"slideTransitionType":"move","slideTransitionSpeed":400,"slideTransitionEasing":"easeInOutSine","directionNavEnabled":false,"directionNavAutoHide":false,"hideArrowOnLastSlide":true,"controlNavigationType":"none","auto-generate-images":false,"auto-generate-thumbs":false,"thumb-width":60,"thumb-height":60,"captionAnimationEnabled":true,"captionShowFadeEffect":true,"captionShowMoveEffect":"movetop","captionMoveOffset":20,"captionShowSpeed":400,"captionShowEasing":"easeInOutSine","captionShowDelay":200,"controlNavEnabled":false,"captionShowEffects":["fade","movetop"]});});
            </script>

                <div id="current-caption"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T19:43:54.957

[http://dimsemenov.com/plugins/royal-slider/documentation/#api](http://dimsemenov.com/plugins/royal-slider/documentation/#api)

有两件重要的事情需要注意：

1.  'rsAfterSlideChange' 事件。
2.  'currSlide' 属性。

将两者结合起来，您可能会得到类似的结果（未经测试，从未使用过 RoyalSlider，可能需要稍微调整一下）：

```
sliderInstance.ev.on('rsAfterSlideChange', function() {
    $('#current-caption').text(sliderInstance.currSlide.find('.royalHtmlContent').text());
}); 
```

您可以像在文档中那样定义滑块实例，或者在您初始化滑块的元素上使用 jQuery 样式调用。据推测，您还可以在初始化期间定义 rsAfterSlideChange。

也就是说，SMacFadyen 的建议应该有效，并且会是（恕我直言）更清洁的做事方式。在标题上设置 position: absolute 应该将其从 overflow: hidden 元素中分离出来。请注意，包装不应该有 position: absolute 应用，只有标题。

# r - 将 geom_line 的键添加到 geom_area 的图例

> ID：11978223
> 
> 赞同：1
> 
> 时间：2012-08-15T22:24:48.270
> 
> 标签：r, ggplot2

我有一个数据框，我在其中谈论大坝的不同水流（水单位是 kcfs——1000 立方英尺每秒——如果有人感兴趣的话）

称之为 df4plot

```
 date         kcfs    Flowtype
    10/1/2010        50     Power
    10/1/2010        10     Spill_Overgen
    10/1/2010         8         Spill_Force
    10/2/2010        52     Power
    10/2/2010         7     Spill_Overgen
    10/2/2010        10     Spill_Force 
```

（数据框中有 3x365 行）

所以我想做的是制作一个聚合面积图来显示这些流中的每一个

```
p <- ggplot(data = df4plot, aes(date,kcfs)) +
geom_area(aes(colour = Flowtype, fill=Flowtype), position = “stack”) 
```

我想控制使用的颜色，所以我添加了

```
plot_colors_aggregate <- c("forestgreen","lightsalmon","dodgerblue")
p <- p +
scale_color_manual(values = plot_colors_aggregate) +
scale_fill_manual(values = plot_colors_aggregate) 
```

现在我想添加一条虚线，显示最大涡轮机容量——发电的流量限制——随月变化。我有一个单独的数据框（365 行长），df4FGline

```
 Date    FGlimit
    10/1/2010   52
    10/2/2010   52
     …
    11/1/2010   60
    11/2/2010   60
    ...
    Etc 
```

所以现在我有

```
p <- p + 
geom_line(data = df4FGline, aes(x=date,y=FGlimit), colour = “darkblue”, linetype = “dashed”)

p 
```

图例目前只是三种 Flowtype 的三个块。我想将流门限制的虚线添加到底部，但我无法让它显示在那里。

这可能与我对 aes 的不完全理解有关（help(aes) 非常无用）。

我已经尝试过类似[this](https://stackoverflow.com/questions/9915824/how-can-i-make-a-legend-in-ggplot2-with-one-point-entry-and-one-line-entry) 和类似 this 的东西[，](https://stackoverflow.com/questions/5027016/missing-legend-with-ggplot2-and-geom-line?rq=1)但是因为我只是想在预先存在的图例中添加 1 行，也许？，这对我不起作用。

我尝试在 geom_line 的括号内添加“legend = TRUE”，但它在图例的每个颜色框内放置了一条虚线，并为图例创建了第 4 个条目，但与图例的其余部分偏移（下方和到右边）... ARG！

我发誓我已经订购了这本书......你可以分享任何帮助，以便我更好地理解这个美学事物以及它与传说的关系，我将非常感激。

*编辑错字*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:43:51.080

这应该有助于：

```
df <- data.frame(x = 1:10,y = 1:10)
ggplot(df,aes(x = x,y = y)) + 
   geom_line(aes(linetype = "dashed")) + 
   scale_linetype_manual(name = "Linetype",values = "dashed") 
```

# jquery - 发送多个请求时，浏览器一次执行一个 $.ajax 异步请求

> ID：11978225
> 
> 赞同：0
> 
> 时间：2012-08-15T22:25:09.983
> 
> 标签：jquery, ajax, asynchronous

**问题：**一次执行大约 10 个 jQuery $.ajax 请求时，我可以看到 firebug 中的所有请求都处于（挂起）状态，但是，看起来浏览器一次只处理一个请求。这会导致其余请求超时，就像它是一个大请求一样。有没有办法解决这个问题，以便同时处理一次发出的所有异步请求？谢谢！

```
$.ajax({
        type: "GET",
        url: testScriptPHP,
        async: true,
        cache: false,
        timeout: 30000,
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:33:16.157

这是让会话阻塞同时请求的经典问题。

显而易见的解决方案 - 是在不需要时立即关闭会话`session_write_close()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T00:03:52.137

发现问题！

原来 lighttpd.conf 有 max workers 被注释掉，这导致 lighttpd 与 1 个 worker 一起运行！

我将最大工人数提高到 30，它现在正在飞行！

# audio - 如何在超级对撞机中实现仪器/分数模式？

> ID：11978230
> 
> 赞同：1
> 
> 时间：2012-08-15T22:26:03.977
> 
> 标签：audio, supercollider

我已经阅读了一些教程，但在我看来，它们似乎都没有理解什么是明智的架构：

1.  有一个或多个`Instrument`实例，
2.  有一个`Score`定义了一组 `Note`对象，
3.  将实例从乐谱路由到乐器的`Player`类（可能是函数），`Note`以便产生音乐。

我在这个模式中看到的，但在我到目前为止读过的例子中没有看到的是（a）乐谱和乐器之间的总分离和（b）明确的定义（以类的形式和/或 API）`Note`告诉仪器做什么的对象。

他们的内置实用程序是否支持这种类型的操作模式？

这是思考问题的一种不重要的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:26:03.373

鉴于您已经查看了示例，我不确定您到底想要什么。奇数位是“完全分离”的要求；通常，分数需要对哪些参数与哪些乐器相关做出一些假设——尽管 SynthDef 中有足够的内省方法，程序可以做出有根据的猜测。

但基本原理图是相当标准的：SynthDef 定义乐器，Collection 及其子类存储数据，Routine 和其他类可以在预定的时间内解释数据结构以制作音乐。

在底部，我粘贴了一些样板代码，用于使用 SynthDef、Routine 和 Array 对这种结构进行非常简单的类似 c 的方法。使用哪种乐器是在音符生成时任意选择的，“分数”与乐器无关。

但是，SC 中的惯用方法是使用模式和事件，尤其是 Pbind 类。我个人觉得这些有点限制和冗长，但他们肯定会按照你的要求做。查看“Streams-Patterns-Events”系列帮助文件。

并且许多人已经编写了第三方扩展，例如 Instr 和 Voicer，以适应他们自己风格的乐谱乐器模型。查看 Quarks 列表或考虑推出自己的列表？

```
s = Server.local.boot;
s.waitForBoot{ Routine {
/// in a "real" patch, i'd make these local variables,
/// but in testing its convenient to use environment variables.
// var inst, tclock, score, playr, switchr;

// the current instrument
~inst = \ding;
// a fast TempoClock
~tclock = TempoClock.new(8);

// two instruments that take the same arguments
SynthDef.new(\ding, {
    arg dur=0.2, hz=880, out=0, level=0.25, pan=0.0;
    var snd;
    var amp = EnvGen.ar(Env.perc, doneAction:2, timeScale:dur);
    snd = SinOsc.ar(hz) * amp * level;
    Out.ar(out, Pan2.ar(snd, pan));
}).send(s);

SynthDef.new(\tick, {
    arg dur=0.1, hz=880, out=0, level=0.25, pan=0.0;
    var snd;
    var amp = EnvGen.ar(Env.perc, doneAction:2, timeScale:dur);
    snd = LPF.ar(WhiteNoise.ar, hz) * amp * level;
    Out.ar(out, Pan2.ar(snd, pan));
}).send(s);

s.sync;

// the "score" is just a nested array of argument values
// there are also many kinds of associative collections in SC if you prefer
~score = [
    // each entry:
    // midi note offset, note duration in seconds, wait time in beats
    [0, 0.4, 2],
    [0, 0.4, 1],
    [7, 0.2, 1],
    [0, 0.2, 1],
    [7, 0.15, 1],
    [10, 0.5, 2],
    [7, 0.1, 1],
    [2, 0.3, 1]

];

// a routine that plays the score, not knowing which instrument is the target
~playr = Routine { var note, hz; inf.do({ arg i;
    // get the next note
    note = ~score.wrapAt(i);
    // interpret scale degree as MIDI note plus offset
    hz = (note[0] + 60).midicps;
    // play the note
    Synth.new(~inst, [\hz, hz, \dur, note[1] ], s);
    // wait
    note[2].wait;
}); }.play(~tclock);

// a routine that randomly switches instruments
~switchr = Routine { var note, hz; inf.do({ arg i;
    if(0.2.coin, {
        if(~inst == \ding, {
            ~inst = \tick;
        }, {
            ~inst = \ding;
        });
        ~inst.postln;
    });
    // wait
    1.wait;
}); }.play(~tclock);

}.play; }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-06T22:59:10.470

我还要补充一点，有一组名为 Ctk 的扩展（一个“夸克”）[，](http://depts.washington.edu/dxscdoc/Help/Overviews/Ctk.html)它包装了 SynthDef（到 CtkSynthDef）、音符的概念（到 CtkNote）和乐谱（到 CtkScore）促进工作在两个真实时间和非实时。我觉得其帮助文件提供的示例（大部分）遵循 OP 建议的架构。要安装它，请`Quarks.install("Ctk")`在 SuperCollider 中运行。

# html - 将 div 中的两个元素垂直居中

> ID：11978231
> 
> 赞同：16
> 
> 时间：2012-08-15T22:26:06.910
> 
> 标签：html, css, centering

我试图垂直居中两个`<p>`元素。

我按照[phrogz.net](http://phrogz.net/CSS/vertical-align/index.html)上的教程进行操作，但元素仍然放置在 div 上方、div 下方、在 div 内顶部对齐。

我会尝试其他方法，但这里的大多数问题都指向那个教程。

此代码段适用于网页顶部的横幅。

```
.banner {
  width: 980px;
  height: 69px;
  background-image: url(../images/nav-bg.jpg);
  background-repeat: no-repeat;
  /* color: #ffffff; */
}

.bannerleft {
  float: left;
  width: 420px;
  text-align: right;
  height: 652px;
  line-height: 52px;
  font-size: 28px;
  padding-right: 5px;
}

.bannerright {
  float: right;
  width: 555px;
  text-align: left;
  position: relative;
}

.bannerrightinner {
  position: absolute;
  top: 50%;
  height: 52px;
  margin-top: -26px;
}
```

```
<div class="banner">
  <div class="bannerleft">
    I am vertically centered
  </div>
  <div class="bannerright">
    <div class="bannerrightinner">
      <p>I should be</p>
      <p>vertically centered</p>
    </div>
  </div>
  <div class="clear">
  </div>
</div>
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2015-08-13T00:12:14.363

### 如何将元素垂直、水平或两者居中

以下是在 div 中居中 div 的两种方法。

一种方式使用 CSS **[Flexbox](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Flexible_boxes)**，另一种方式使用 CSS**表格和定位**属性。

在这两种情况下，居中 div 的高度可以是可变的、未定义的、未知的等等。居中 div 的高度无关紧要。

[![在此处输入图像描述](../Images/88c0b1eef492f059c6ac85bc06778c88.png)](https://i.stack.imgur.com/KSorG.png)

这是两者的 HTML：

```
<div id="container">   

    <div class="box" id="bluebox">
        <p>DIV #1</p>
    </div>

    <div class="box" id="redbox">
        <p>DIV #2</p>
    </div>

</div> 
```

* * *

### CSS 弹性盒方法

```
#container {
    display: flex;              /* establish flex container */
    flex-direction: column;     /* stack flex items vertically */
    justify-content: center;    /* center items vertically, in this case */
    align-items: center;        /* center items horizontally, in this case */
    height: 300px;
    border: 1px solid black;
}

.box {
    width: 300px;
    margin: 5px;
    text-align: center;
} 
```

[**演示**](http://jsfiddle.net/Lt8bct5x/)

两个子元素 ( `.box`) 与 垂直对齐`flex-direction: column`。对于水平对齐，切换`flex-direction`到`row`（或直接删除`flex-direction: row`默认设置的规则）。这些项目将保持垂直和水平居中（[DEMO](http://jsfiddle.net/Lt8bct5x/91/)）。

* * *

### CSS表格和定位方法

```
body {
    display: table;
    position: absolute;
    height: 100%;
    width: 100%;
}

#container {
    display: table-cell;
    vertical-align: middle;
}

.box {
    width: 300px;
    padding: 5px;
    margin: 7px auto;   
    text-align: center;
} 
```

[**演示**](http://jsfiddle.net/Lt8bct5x/1/)

* * *

***用什么方法...***

如果您不确定要使用哪种方法，我会推荐使用 flexbox，原因如下：

1.  最少的代码；非常高效
2.  如上所述，居中简单易行（[参见另一个示例](https://stackoverflow.com/a/33049198/3597276)）
3.  [等高柱简单易行](https://stackoverflow.com/a/33815389/3597276)
4.  [对齐弹性元素的多个选项](https://stackoverflow.com/a/33856609/3597276)
5.  它反应灵敏
6.  与浮动和表格不同，它们提供有限的布局容量，因为它们从未用于构建布局，flexbox 是一种现代（CSS3）技术，具有广泛的选项。

* * *

***浏览器支持***

[除了 IE < 10 之外](http://caniuse.com/#search=flex)，所有主流浏览器都支持 Flexbox 。一些最新的浏览器版本，例如 Safari 8 和 IE10，需要[供应商前缀](https://developer.mozilla.org/en-US/docs/Glossary/Vendor_Prefix)。要快速添加前缀，请使用[Autoprefixer](https://autoprefixer.github.io/)。[此答案](https://stackoverflow.com/a/35137869/3597276)中的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:05:58.360

添加以下内容：显示：表格；到横幅右

显示：表格单元格；和垂直对齐：中间；到横幅右内

这个我没试过，如果不行请给我反馈。;)

编辑：忘了提：取消“浮动”和“位置”属性

# shell - 在 shell 中有条件

> ID：11978232
> 
> 赞同：0
> 
> 时间：2012-08-15T22:26:16.777
> 
> 标签：shell

```
find . -type f -exec sh -c '  if [cat ${1} == "abc" ]   then  echo ${1} fi' _ {} \; 
```

我收到了这个错误：

```
_: -c: line 1: syntax error: unexpected end of file 
```

我在这里要做的是：

查找此目录下的所有文件，如果文件内容为 abc，则打印文件名。

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:39:52.327

在 '[' 和 ']' 和 ';' 之前放置空格 之后 ']'

另一种方法是使用

```
[ `cat ${1}` == "abc" ] && echo ${1} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T22:41:42.933

这里的问题是`[`（又名“测试”）需要`cat`用空格分隔，如下所示：

```
find . -type f -exec sh -c 'if [ cat ${1} = "abc" ]; then  echo ${1}; fi' _ {} \; 
```

您还在语句之后和`if`语句之前缺少分号`fi`（看起来您最初将这些分号放在单独的行上，基于那里的间距，可能是由于您缩进的方式）

正如下面评论中所指出的，运行它会给出错误消息`too many arguments in if []`。使用双引号`"cat ${1}"`将避免错误消息，但这只是比较`"cat ${1}"`with的扩展`"abc"`。您可能正在寻找的是`[ "$(cat ${1})" == "abc" ]`. 不幸的是，当您将非常长的文件与`"abc"`.

您可以使用`grep`来进行测试，或获取文件的校验和（例如`shasum`），然后根据 的校验和进行测试`"abc"`，具体取决于您进行测试的原因。

# f# - F# 3.0 中的活动模式被破坏

> ID：11978234
> 
> 赞同：8
> 
> 时间：2012-08-15T22:26:18.017
> 
> 标签：f#, visual-studio-2012, f#-3.0, active-pattern

此活动模式与 F# 2.0 一起编译：

```
let (|Value|_|) value = // 'a -> 'T option
  match box value with
  | :? 'T as x -> Some x
  | _ -> None 
```

但是，在 F# 3.0 中，会发出错误：

> 活动模式 '|Value|_|' 具有包含不由输入确定的类型变量的结果类型。当没有提到结果情况时，常见原因是 [sic]，例如，'let (|A|B|) (x:int) = A x'。这可以通过类型约束来修复，例如 'let (|A|B|) (x:int) : Choice = A x'

我试过了：

```
let (|Value|_|) value : 'T option = ... 
```

和：

```
let (|Value|_|) (value: 'U) = ... 
```

如何修复？

环境：Visual Studio 2012 (RTM) 和 FSI v11.0.50727.1

编辑：这是一个更简单的复制：

```
let (|X|) x = unbox x 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T16:51:29.263

There was a bug in the F# 2.0 compiler where the compiler did incorrect analysis and bad code generation for certain Active Patterns with free type variables in the result; a simple repro is

```
let (|Check|) (a : int) = a, None
//let (|Check|) (a : int) = a, (None : int option)

let check a = 
    match a with
    | Check (10, None) -> System.Console.WriteLine "10"
    | Check (20, None) -> System.Console.WriteLine "20"

check 10
check 20 
```

which generates a weird warning at compile-time and compiles into seemingly incorrect code. I am guessing that our attempt to fix this bug (and restrict some crazy cases) in F# 3.0 also broke some legal code as collateral damage of the fix.

I'll file another bug, but for F# 3.0, it sounds like you'll need to use one of the workarounds mentioned in other answers.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-16T15:12:46.073

我还没有安装新版本，但我同意这看起来有点可疑。我想这个限制可能有一个很好的理由，但是你在另一个问题中的例子似乎很有说服力。

作为一种解决方法，我认为添加见证参数（未使用，但暗示结果的类型）可能有效：

```
let (|Value|_|) (witness:unit -> 'T) value : 'T option =
  match box value with 
  | :? 'T as x -> Some x 
  | _ -> None 
```

当然，这使得使用有点难看，因为你需要提出一些论据。在上面，我使用了 type 的见证`unit -> 'T`，希望下面的代码可以编译：

```
let witness () : 'T = failwith "!"

match box 1 with 
| Value witness 1 -> printfn "one" 
```

如果这不起作用，那么您可能可以尝试使用类型的见证参数`'T`（但是您必须提供一个实际函数，而不仅仅是一个通用函数）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T23:25:51.893

为了完整起见，还有一种解决方法：

```
type Box<'R> = Box of obj

let (|Value|_|) ((Box x) : Box<'R> ) : 'R option =
  match x with 
  | :? 'R as x -> Some x 
  | _ -> None 

let check t =
    match Box t with
    | Value 1 -> printfn "one"
    | Value 2 -> printfn "two"

check 1 // one
check 2 // two 
```

但是它仍然会受到@kvb 在[另一个线程](https://stackoverflow.com/questions/11989377/pattern-combining-type-test-and-literal)中提到的问题的影响。我个人更喜欢@kvb 的带有参数化活动模式的版本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T15:38:47.127

有关如何解决该问题的一些想法以及此类活动模式可能不受欢迎的一个原因，请参阅我对您的另一个[问题的](https://stackoverflow.com/questions/11989377/pattern-combining-type-test-and-literal)[回答。](https://stackoverflow.com/a/11990500/82959)我不确定这个重大变化是否是有意的。

# ruby-on-rails - 将所有子域重定向到“www”时重新配置 Capybara-webkit

> ID：11978236
> 
> 赞同：0
> 
> 时间：2012-08-15T22:26:30.933
> 
> 标签：ruby-on-rails, subdomain, capybara-webkit

我有一个使用裸域（例如`doma.in`）的 Rails 3.2 应用程序，我想将所有子域（包括根）重定向到`www.doma.in`.

gem [rack-www](https://github.com/stjhimy/rack-www)很好地做到了这一点。但是，现在我所有的集成测试都失败了。我正在使用 Capybara-webkit 和 Turnip。

帮助！提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:12:46.227

这是关于测试子域的帖子。它可能不是确切的解决方案，但它显示了如何设置应用程序主机等

[http://blog.jamesalmond.com/testing-subdomains-using-capybara/](http://blog.jamesalmond.com/testing-subdomains-using-capybara/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:47:19.277

我最终只是在`config/environments/staging||production.rb`文件中设置了重定向，我的测试就顺利通过了。

# c# - JsonConvert - 无法将字符串值分配给字符串变量

> ID：11978239
> 
> 赞同：0
> 
> 时间：2012-08-15T22:26:55.833
> 
> 标签：c#, windows-phone-7, google-maps, json.net, deserialization

```
public void FindCityName()
        {
            string url = "http://maps.google.com/maps/geo?q=39.920794,32.853902&output=json&oe=utf8&sensor=true&key=MYKEY";

            var w = new WebClient();
            Observable.FromEvent<DownloadStringCompletedEventArgs>(w, "DownloadStringCompleted").Subscribe(r =>
                {
                    var deserialized = JsonConvert.DeserializeObject<RootObject>(r.EventArgs.Result);

                    string s = deserialized.Placemark[0].AddressDetails.Country.SubAdministrativeArea.Locality.LocalityName;
/// setCity() and City=s produce the same thing
                    setCity(s);
                    City = s;
                    //foreach (var item in deserialized.Placemark)
                    //{
                    //    //MessageBox.Show(item.AddressDetails.Country.SubAdministrativeArea.Locality.LocalityName);
                    //    City = (string)item.AddressDetails.Country.SubAdministrativeArea.Locality.LocalityName;
                    //}
//Problem here >>>>>
                    ////MessageBox.Show(City);
                });
            w.DownloadStringAsync(new Uri(url)); 
        } 
```

问题：

我正在开发一个 windows phone 7 应用程序，我需要从 GPS 坐标中找到“城市名称”才能继续前进......

我在互联网上找到了上面的代码并尝试了它。我可以通过使用这些代码查看城市名称（Message.Box(City) 显示我想要的，城市名称）。但是，这行代码

```
deserialized.Placemark[0].AddressDetails.Country.SubAdministrativeArea.Locality.LocalityName; 
```

这给了我城市名称似乎给出了一个不稳定的字符串值。

例如，我创建了一个方法，它将字符串变量“s”的值分配给我的类的字符串字段，名称为 City。如果我在调用 FindCityName() 方法后尝试获取 City 的内容，我会看到 City 的内容没有更新。

同样，同样的事情发生了，然后我在注释“这里的问题 >>>>>”下调用代码行，MessageBox.Show(City) 没有显示任何新内容......

有人可以解释我的问题的原因吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:20:37.080

你也把这个问题放在我的博客上，但我会在这里回答。首先，我觉得有一点责任把示例代码放在首位；-)

我将假设包含您的代码的类如下所示：

```
public class MyClass
{
    private void MyMethod()
    {
      FindCityName();
      MessageBox.Show(City);
    }

    private void FindCityName()
    {
      // Code omitted - see your question
    }

    private string City;
} 
```

字符串没有任何易失性。您的问题是*异步*性。如果你仔细看，你会发现我使用了一个在触发 DownloadStringCompleted 时触发的 observable。Observable.Event 中的代码仅*在下载完成时*调用，但这是异步发生的。但我假设您要做的是调用 FindCityName 方法，然后直接尝试访问结果，就像我在 MyMethod 方法中显示的那样。这就像在触发请求后直接想要结果一样。结果还没出来！这就像一个网页下载 - 需要一段时间。您可以通过回调来解决这个问题，如下所示：

```
public class MyClass
{
    private void MyMethod()
    {
      FindName();       
    }

    public void FindCityName()
    {
        string url = "http://maps.google.com/maps/geo?q=39.920794,32.853902&output=json&oe=utf8&sensor=true&key=MYKEY";

        var w = new WebClient();
        Observable.FromEvent<DownloadStringCompletedEventArgs>(w, "DownloadStringCompleted").Subscribe(r =>
            {
                var deserialized = JsonConvert.DeserializeObject<RootObject>(r.EventArgs.Result);

                City = deserialized.Placemark[0].AddressDetails.Country.SubAdministrativeArea.Locality.LocalityName;
                DoneDownloading();
            });
        w.DownloadStringAsync(new Uri(url)); 
    }

    private string City;

    private void DoneDownloading
    {
        MessageBox.Show(City);
    }
} 
```

这有帮助吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T04:49:51.327

我会推荐你​​使用这个谷歌地图 API

[http://maps.googleapis.com/maps/api/geocode/json?latlng=39.920794,32.853902&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?latlng=39.920794,32.853902&sensor=true)

一旦您在请求中获得 JSON 响应。您可以使用 NEWTONSOFT for wp7 轻松解析

```
WebClient wc = new WebClient();
var json = (JObject)JsonConvert.DeserializeObject(wc.DownloadString(url));

var locality= json["results"]
                .SelectMany(x => x["address_components"])
                .FirstOrDefault(t => t["types"].First().ToString() == "locality");

var name = locality!=null ? locality["long_name"].ToString() : ""; 
```

# .net - 更好的 .NET 位图 API

> ID：11978243
> 
> 赞同：1
> 
> 时间：2012-08-15T22:27:02.880
> 
> 标签：.net, image, api

> **可能重复：**
> [基于文件的大型位图操作库](https://stackoverflow.com/questions/5053929/large-file-based-bitmap-manipulation-library)

我正在尝试从二进制数据生成图像并将它们保存到磁盘。我对显示图像并不感兴趣，因为它们会在其他软件中显示。到目前为止，我知道创建图像的两个免费选项：

1.  [System.Drawing.Bitmap](http://msdn.microsoft.com/en-us/library/system.drawing.bitmap.aspx)，在我看来这是一个非常笨重的 API。
2.  [System.Windows.Media.Imaging.WriteableBitmap](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.writeablebitmap.aspx)，设计用于在 WPF 环境中显示生成的图像。

到目前为止，我找不到任何更好的成像 API。有没有更好的免费 .NET 成像 API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:31:16.653

.Net ImageMagick 非常强大，

[http://imagemagick.codeplex.com/](http://imagemagick.codeplex.com/)

# tfs - TFS 2012 Unshelve to different branch -> 已添加具有相同键的项目

> ID：11978246
> 
> 赞同：10
> 
> 时间：2012-08-15T22:27:21.050
> 
> 标签：tfs, tfs-power-tools

我需要帮助解决以下问题：

我正在尝试将源分支中的代码搁置到目标分支上。

我正在使用以下内容：

*   VS2012 遥控
*   TFS 2012
*   VS2012 x64 交叉工具命令提示符

当我使用命令提示符执行取消搁置操作时，会出现以下情况：

1.  搁置集详细信息对话框显示更改文件列表。
2.  单击取消搁置按钮。
3.  观察命令提示符输出：***“已添加具有相同键的项目。”***

我已经为电动工具下载了 ServicePack1。但是，我未能解决此问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-15T09:32:27.693

当我从源分支重新搁置变更集**但选择不在本地保留待处理的更改**时，我遇到了同样的问题并修复了它。此后，新搁置集的迁移顺利进行。

（我还确保我遵循了从本网站的其他答案中收集的以下步骤）

*   使用包含源分支和目标分支的工作区
*   从映射到源分支的文件夹中运行命令
*   检查包含空格的任何路径周围的引号
*   删除 C:\Users[USERNAME]\AppData\Local\Microsoft\Team Foundation\4.0\Cache 中的缓存并重新启动 Visual Studio

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-11-24T15:01:33.220

**使用Visual Studio 2013**和以下命令时，我遇到了同样的错误：

```
> tfpt unshelve /migrate /source:"$/Root/Solution" /target:"$/Root/Branches/Solution" "The name of my shelveset"
> An item with the same key has already been added 
```

**研究**

这是我试图解决的问题：

*   按照安德烈的回答清除缓存
*   尝试从*Source -> Branch* and *Branch -> Source运行命令*
*   我的工作区已经包含了源分支和目标分支

**解决方案**

打开相当于 VS2013 x86 Native Tools 命令提示符。

1.  检查您是否安装了 Team Foundation Power Tools：

    > C:\Program Files (x86)\Microsoft Visual Studio 12.0\VC\tfpt

2.  确保您有 0**个待处理**和已**排除**的更改。
    我有一些被排除的更改被检测到但没有被添加，这就是我发现的原因。排除的更改应如下所示：

    ![在此处输入图像描述](../Images/33fbf2c94b2ea5eb8befccf27d000b73.png)
    **注意：**没有*“检测到：XX（添加）”* -**不**应该是可见的

3.  运行时`tf status`，您应该会看到类似以下内容。*.tfignore*
    文件 的 1 个更改或 0 个更改。其他任何事情都会破坏合并。

     *> C:\tfs\Root\Solution>tf status
    > 文件名 更改本地路径
    > 
    > * * *
    > 
    > $/Root .tfignore 编辑 C:\tfs\Root\Solution.tfignore
    > 
    > 1 个更改* 
**   确保您`tfpt`从源解决方案目录运行命令* 

 *您现在应该能够成功地将搁置集从一个分支合并到另一个分支。

**关于 .tfsignore 的注意事项：**
如果您有很多挂起的更改，无论出于何种原因都不想撤消，那么可以修改 .tfignore 文件。

如果这是您留下的唯一更改文件，它不会阻止合并。
.tfignore 参考 => [stackoverflow - 如何忽略 tfs 中的文件/目录？](https://stackoverflow.com/questions/922798/how-to-ignore-files-directories-in-tfs)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-05T11:36:48.130

尝试撤消源和目标分支上的所有更改，然后重试...

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-05T09:07:26.640

尝试删除以下文件夹中的所有文件并重新启动VS2012（[Source](http://henrywrites.wordpress.com/2012/11/19/tfs-vs2012-an-item-with-the-same-key-has-already-been-added/comment-page-1/#comment-12)）：

**C:\Users[USERNAME]\AppData\Local\Microsoft\Team Foundation\4.0\Cache***

# jquery - 简单的 Ajax 错误？

> ID：11978247
> 
> 赞同：1
> 
> 时间：2012-08-15T22:27:26.843
> 
> 标签：jquery, ajax, jsonp

我是 AJAX 新手，想弄清楚如何进行 JSONP 跨域调用。我不确定以下代码有什么问题。在 Firebug NET 控制台中，我可以很好地看到响应（完整的 HTML 页面），并且 HTML 选项卡也显示得很好。我收到指向 URL /?jsonp=jQuery17109722891130251606_1345069208686&_=1345069209298 的“语法错误”。

我在那里有一个错误部分，但只是读到 .ajax 中的错误函数在使用 JSONP 时不能正常工作？

这是代码：

```
$.ajax({
    url: 'http://www.google.com',
    type: 'GET',
    dataType: 'jsonp',
    jsonp: 'jsonp',
    crossDomain: true,
    complete:function(jsonp){
    $('#test').append(jsonp);
}
}); 
```

我在本地运行它，尝试过不同的 URL ......有什么想法或解释吗？谢谢！忘了提到 textStatus 也抛出了解析器错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:31:46.027

在这里

```
complete:function(jsonp){
    $('#test').append(jsonp);
} 
```

您正在尝试将`jqXHR`对象附加到 DOM 元素。看看这个：http: [//jsfiddle.net/TkUBz/](http://jsfiddle.net/TkUBz/)

您需要做的是使用该`success`属性，如：

```
 /*complete*/
    success:function(data){
        $('#test').append(data);
    } 
```

现在，您看到的语法错误是因为您正在加载`google's`包含 javascript 代码的首页，浏览器在将 HTML 数据附加到元素时尝试执行该代码，`#test`并且该 javascript 代码在您的页面上不起作用不同的原因，因此代码失败并且您会看到语法错误。

# jquery - 取消绑定或重置所有 jQuery 事件

> ID：11978249
> 
> 赞同：3
> 
> 时间：2012-08-15T22:27:42.453
> 
> 标签：jquery

我有一个页面，上面有一个产品配置器，这个配置器使用 ajax .load 为不同的产品加载配置器。

如果有人配置产品，点击提交，产品被添加，如果用户再次选择配置器，并加载相同的产品，配置器的所有事件都会加倍。意思是，所有事件都会触发两次......

重置这些事件或防止这些事件多次触发的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T22:33:23.777

我不知道你用什么语法来绑定，但如果你使用 jQuery 1.7 使用[**on()**](http://api.jquery.com/on/)你可以这样：

```
$("#myButton").off("click").on("click", function(){
    // ....
}); 
```

这将确保首先未绑定所有点击事件，然后绑定您的点击事件。但是，这会带来风险，如果您有许多通过命名空间绑定的点击事件，即使这不是您的意图，它们也可能会被删除。

如果事件正在使用命名空间，它可能如下所示：

```
$("#myButton").off("click.myNamespace").on("click.myNamespace", function(){
    // ....
}); 
```

如果您需要绑定一个事件并且只想使用它，然后自动取消绑定，您可以像这样使用[**one()**](http://api.jquery.com/one/)

```
$("#myButton").one("click", function(){
    // ....
}); 
```

只是为了澄清一下，您当然可以单独使用`off()`or`unbind()`而不将它们链接到`on()`or`bind()`等​​。`unbind()`如果您碰巧`live()`用于绑定，请注意。的许多缺点之一`live()`是：

> .live() 方法以令人惊讶的方式与其他事件方法进行交互，例如，$(document).unbind("click") 删除了所有对 .live() 的调用附加的点击处理程序！

**其他资源**

[**click()**](http://api.jquery.com/click/) - 类似于 bind
[**bind()**](http://api.jquery.com/bind) - jQuery 1.7 之前的静态元素的首选绑定
[**live() (不要使用)**](http://api.jquery.com/live) - 自 1.7 以来已弃用但不使用 1.7 之前的任何一个
[**delegate()**](http://api.jquery.com/delegate/) - 动态元素的首选绑定pre jQuery 1.7
[**on()**](http://api.jquery.com/on/) - 自 jQuery 1.7 以来静态/动态元素的首选绑定

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:32:40.053

根据您绑定事件的方式，您将希望使用`.unbind()`or `.off()`（如果您正在使用`.live()`它已被弃用，您应该切换到`.on()`）

[jQuery 在Namespaced Events](http://docs.jquery.com/Namespaced_Events)上有一个不错的页面，它说明了如何仅取消绑定您添加的事件处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T15:33:36.463

我正在使用`.live()`.

我发现对我来说最简单的解决方案是`.die()`在每个`.live()`语句之前放一个。

例子：

```
$('.add').die();
$('.add').live(............... 
```

[http://api.jquery.com/die/](http://api.jquery.com/die/)

# c# - 列表抛出索引超出范围。必须是非负数且小于集合的大小。错误

> ID：11978256
> 
> 赞同：0
> 
> 时间：2012-08-15T22:28:24.690
> 
> 标签：c#, list

讨厌问这个，但我哪里错了？

```
public void foo(object sender, EventArgs e)
{
    List<Label> exerciseLabels = new List<Label>();

    string tempExercise = exerciseTextBox.Text;
    int numExercises = 0;
    day[tempDay].addExercise(numExercises, tempExercise);

    exerciseLabels.Add(new Label());
    exerciseLabels[1].Text = string.Format("{0}. {1}", numExercises + 1, tempExercise);

} 
```

我收到一个参数超出范围。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T22:29:20.947

```
List<Label> exerciseLabels = new List<Label>();
...
exerciseLabels.Add(new Label());
exerciseLabels[1].Text = ... 
```

列表是从 0 开始的；应该是`exerciseLabels[0]`第一项。或者更好：

```
var label = new Label();
label.Text = ...
exerciseLabels.Add(label); 
```

无需访问索引器。

# javascript - 从数据中清除（输入搜索栏）

> ID：11978260
> 
> 赞同：-1
> 
> 时间：2012-08-15T22:28:52.797
> 
> 标签：javascript, javascript-events

```
<form class="form-inline" action="javascript:function()" >
<input id="searchKey2" type="text" class="pageSearchBar "  >
</form> 
```

我有一个像上面这样的输入搜索栏，每次搜索时我都希望从栏中删除搜索查询，但我不确定如何在 Javascript 中执行此操作。

还有一种方法可以设置表单值，除了 document.getElementById('id').innerHTML??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:35:46.527

如果你想设置表单域，你可以这样做

```
document.getElementById('searchKey2').value = 'something'; 
```

# c# - 使用 C# 将文件存储在数据库中并从 PHP 中检索

> ID：11978263
> 
> 赞同：0
> 
> 时间：2012-08-15T22:29:09.020
> 
> 标签：c#, php, mysql

我正在处理 ac# 项目，我将数据库中的文件存储到一个中等 blob 字段中，数据存储得很好，当我在 MySQL Workbench 中查看它时，文件中的每一行都显示在数据库中它自己的行上，即相同的格式。

但是，当我从 PHP 中检索信息时，它似乎删除了新行，并且所有内容都在同一行上。

下面是我用来将文件存储在数据库中的代码。

```
using (ConnectDb db = new ConnectDb(appSettings))
                {
                    FileStream fileStream = new FileStream(logFile, FileMode.Open, FileAccess.Read);
                    long fileLength = fileStream.Length;
                    byte[] myData = new byte[fileLength];
                    fileStream.Read(myData, 0, System.Convert.ToInt32(fileLength));
                    fileStream.Close();

                    string fileSize = Common.convertBytesToMb(fileLength);
                    string query = "INSERT INTO logfile_history (LogFile, FileSize) VALUES (@file, @size)";
                    using (MySqlCommand cmd = new MySqlCommand(query, db.conn))
                    {
                        cmd.Parameters.AddWithValue("@file", myData);
                        cmd.Parameters.AddWithValue("@size", fileSize);
                        cmd.ExecuteNonQuery();
                    }
                } 
```

当我从 PHP 获取文件时，新行被删除，下面是我用来从 PHP 数据库中的 Medium Blob 获取数据的代码。

```
$query = "SELECT * FROM logfile_history WHERE id='$id'";

    $result = mysql_query($query);
    if ($result)
    {
        echo "<table class=\"overview\">";
        echo "<tr>";
        echo "<th>Date</th>";
        echo "<th>Class/Method</th>";
        echo "<th>Message</th>";
        echo "</tr>";
        while ($myrow = mysql_fetch_array($result))
        {
            $logContent = $myrow['LogFile'];
            $splitContent = explode("\t", $logContent);
            $i = 0;
            $colCount = 0;
            while ($i < count($splitContent))
            {
                if ($colCount == 0)
                {
                    echo "<tr>";
                }
                echo "<td>" . $splitContent[$i] . "</td>";
                if ($colCount == 2)
                {
                    echo "</tr>";
                    $colCount = 0;
                }
                $i++;
                $colCount++;
            }
        }
        echo "</table>"; 
```

我正在拆分日志文件中的行，因为它是制表符分隔的，所以我按制表符拆分它以将其放入表中，但这是在我意识到所有内容都在同一行之前。

从数据库中检索数据时如何保留换行符。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:30:42.590

好的，我想象您有一个如下所示的日志文件：

```
时间戳 1 方法 1 消息 1
时间戳 2 方法 2 消息 2
时间戳 3 方法 3 消息 3

```

...上面的 4 个空格是一个制表符。

这是多行，但一个字符串，它使用数据库中的 1 行。当您调用 PHP 的 explode 方法时，您正在做的是拆分选项卡上的字符串。所以它看起来像：

```
echo $splitcontent
#prints a list like ["Timestamp1", "Method1", "Message1\nTimestamp2", "Method2", "Message2\nTimestamp3","Method3", "Message3"] 
```

（如果那里的语法不好，那是因为我实际上并不了解 PHP。）

换行符被保留，但请注意消息和时间戳是如何在同一个列表元素中压缩在一起的。

您最终将其包装在一些 HTML 标记中。我想象你的 HTML 看起来有点像这样：

```
<table class="overview">
<tr>
    <th>Date</th>
    <th>Class/Method</th>
    <th>Message</th>
</tr>
<tr>
    <td>Timestamp1</td>
    <td>Method1</td>
    <td>Message1\nTimestamp2</td>
</tr>
<tr>
    <td>Method2</td>
    <td>Message2\nTimestamp3</td>
    <td>Method3</td>
</tr>
<tr>
    <td>Message3</td>
</table> 
```

（显然，这是 HTML 的格式化版本。）

显然，HTML 不会将这些换行符识别为空格以外的任何内容。并且您的表格的格式混乱了。

无论如何，您需要解决的方法是从数据库中检索字符串后，您需要将其拆分为多行。我认为您的一些困惑的根源在于您似乎认为数据库中的一行对应于文本文件中的一行。它没有。您有一个包含多行的文本文件，该文件在日志中存储为一行。因此，您不需要遍历数据库结果中的行（也就是说，如果您的 ID 列是主键，它可能是）。相反，您应该编写如下内容：

```
if ($logtext = mysql_fetch_array($result))
{
    $loglines = explode("\n", $logtext)
    foreach($loglines as $line)
    {
        echo "<tr>"
        #explode on the tab characters and format each entry inside <td> tags
        echo "</tr>"
    }
} 
```

再说一次，我不懂 PHP，所以如果有语法错误，我深表歉意。

底线：当您尝试将文件格式化为 HTML 时，您需要处理文件中的换行符，并且数据库不会帮助您格式化换行符。;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:36:49.207

如果要保留非 HTML 格式，例如换行符和制表符，则需要将包含这些字符的文本包装在`<pre></pre>`标签中：

[http://www.w3.org/TR/html401/struct/text.html#h-9.3.4](http://www.w3.org/TR/html401/struct/text.html#h-9.3.4)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T22:40:22.560

使用 File.ReadAllLines 保留新行 [http://msdn.microsoft.com/en-us/library/bsy4fhsa](http://msdn.microsoft.com/en-us/library/bsy4fhsa) 为什么将文本文件存储为二进制文件？

# java - 如何获取 jar 打印的内容

> ID：11978271
> 
> 赞同：0
> 
> 时间：2012-08-15T22:29:51.860
> 
> 标签：java, jar

好的，我在 java 中制作了一个启动另一个 jar 的程序。当 jar 使用 System.out.println() 或它打印出的任何错误时，我将如何读取 jar 打印出来的所有内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:36:31.693

您可能正在使用`ProcessBuilder.start()`或`Runtime.exec()`“启动另一个 jar”，两者都返回一个`Process`对象。调用`getInputStream()`这个实例会给你一个`InputStream`代表标准输出的。调用`getErrorStream()`给你标准错误。

# javascript - 渲染附加到集合内模型的数组-mixin？

> ID：11978273
> 
> 赞同：0
> 
> 时间：2012-08-15T22:29:58.060
> 
> 标签：javascript, backbone.js, underscore.js, marionette

假设我有一个模型，它有一个与之关联的项目数组。

```
class window.MyModel extends Backbone.Model

  urlRoot: () ->
    '/model/' + @attributes.name

  defaults:
    name: null
    items: []

  initialize: () ->
    @name = @attributes.name
    @items = @attributes.items

  parse: (resp) ->
    # Example build resp
    @items.push '1'
    @items.push '2'

    @attributes.items = @items

    @ 
```

还有一个集合，其中包含所有模型。获取集合只返回一个模型名称列表，没有关于它们的详细信息（因此是内部获取）。

```
class window.MyCollection extends Backbone.Collection

  url: '/collection'
  model: window.MyModel

  fetch: (options) ->
    # IE cache
    Backbone.Collection.prototype.fetch.call @, options

  parse: (resp) ->

    myModels = []

    # Example build resp
    myModel1 = new window.MyModel(name: 'myModel1')
    myModel1.fetch()

    myModel2 = new window.MyModel(name: 'myModel2')
    myModel2.fetch()

    myModels.push myModel1
    myModels.push myModel2

    myModels 
```

`items`在进行提取后从数组构建 CompositeView 的最佳方法是什么？也许是一个mixin？

获取集合，将其添加到视图中：

```
myColl = new MyCollection()
myColl.fetch()

# which looks like: [{"name":"myModel1",items:["1","2"]},{"name":"myModel2",items:["1","2"]}]

someLayout.region.show new MyCollectionOfItemsViewThatIsAMarionetteCompositeView(
  collection: myColl # But really, I just want a collection of all the items (unique) that are in the models
) 
```

本质上，如果 CompositeView 通常使用如下模板进行渲染：

```
<% obj.name %> 
```

您将拥有`myModel1`和`myModel2`作为页面元素。

但我希望`1`和`2`（在本例中）被呈现为页面元素。也许使用如下模板：

```
<% obj.item %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T21:11:54.673

这将为您提供集合模型中的一系列独特项目：

```
_.uniq(_.union(myColl.pluck("items"))) 
```

您应该能够弄清楚如何使用该调用来获得您想要的东西。

# objective-c - 全局实例方法

> ID：11978275
> 
> 赞同：0
> 
> 时间：2012-08-15T22:30:22.187
> 
> 标签：objective-c

我在 MainMenu init 中创建了一个实例方法。

```
-(NSString*) iPhoneiPadConversionString: (NSString*) fileNameHold : (char) fileType {

....My Code.
} 
```

我想做的就是在我的其他类中重用这个方法......

```
fileName = [self iPhoneiPadCOnversionString: @"background.png": 'B']; 
```

但我似乎无法弄清楚该做什么是正确的……我一直在讨论董事会，无法将所有信息放在一起。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:36:41.847

你想要的是一个所谓的“类别”。使用类别，您可以扩展 NSString （并添加您的方法）。 [http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/chapters/occategories.html)

# objective-c - NSOutlineView 单元格偏移

> ID：11978276
> 
> 赞同：0
> 
> 时间：2012-08-15T22:30:30.127
> 
> 标签：objective-c, cocoa, nstableview, nsoutlineview, nspopover

我正在尝试在 NSPopover 中基于视图的 NSOutlineView 中显示列表。显示列表时，结果如下：

![在此处输入图像描述](../Images/c859872d262af2ddb2bc76a0ec2468e6.png)

这不是我在 IB 中设置的：

![在此处输入图像描述](../Images/31ee823e1895f0ce0caed2460fabd327.png)

我正在使用一个标准的非子类 NSTableCellView，它带有一个由 IB 为我设置的 NSImageView 和一个 NSTextField。

你知道是什么原因造成的吗？我在 awakeFromNib 中尝试了 reloadData。这修复了第一次加载，但是当我向下滚动时，单元格再次偏移。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:37:13.227

哦，好吧，原来关闭自动布局解决了这个问题。

# outlook - .PST 在 Windows 更新后从驱动器中消失

> ID：11978281
> 
> 赞同：0
> 
> 时间：2012-08-15T22:31:03.990
> 
> 标签：outlook

好的，情况如下：

首先，我实施了 WSUS 服务器和 GPO 来防止/保持和集中管理我们的 Windows 更新系统，我自动推出的唯一更新是关键更新、服务包和安全要点定义更新。这些活动在每晚晚上 8:00 举行，但 MSE 除外，如果有空，则每小时举行一次。

今天早上，我们的 2 位经理，一位是客户服务，另一位是会计，以及我们的一位销售代表，进来发现他们的 POP3 Outlook 2010 PST 文件不见了。只是完全不存在。因为我们使用文件夹重定向，所以所有 PST 文件都存储在本地用户配置文件的 appdata\local\microsoft\outlook 中（此时没有漫游配置文件只是重定向）。我使用 FTK 成像器拍摄了会计机器的图像，PST 的位置在那里，文件在那里。奇怪的是，这 2 个存档文件在导出后可以恢复并正常工作。但是，5.9 GB 的主要 pst 正在读取 0 字节。我又拍了 2 张图片，都报告了同样的事情，即主 pst 是 0 字节。最后修改时间是昨天 8/14/2012 晚上 8:17:41。

我开始在另外两台机器上进行成像，明天会了解更多。

根据事件日志成功推出的所有文件夹重定向和 GPO。几个 KB 更新（我忘了把它们带回家），总共 5 个，与 Office Home and Business 2010 单点图像有关（根据事件日志）。它成功地推送到所有 35 台机器上，而没有 3 台机器出现此前景问题。当 MSE 隔离并删除文件时，其中两台机器于 7 月 3 日感染了 Maclicioustool:win64/spector Trojan/virus。

关于从哪里开始的任何想法，以便我可以给我的老板一个答案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:00:50.963

几个想法/想法。一，确保它们上的防病毒代理已完全更新并正常运行，然后运行完整的侵入性扫描，打开每个 A/V 选项，“全倾斜布吉”捕捉任何东西 - 但从可启动 CD 执行它，这样你就不会了t 从操作系统加载任何恶意内容。

我猜操作系统是 Win7，它运行一个叫做[Volume Shadow Copy](http://www.techotopia.com/index.php/Configuring_Volume_Shadow_Copy_on_Windows_Server_2008)的东西，它使用系统还原点。此时，请调出 VSC 历史记录，我敢打赌这就是您的原始 .PST 所在的位置。

另外，我相信 Office 的版本是 2007 或更高版本。5.9 GB PST 对于 Outlook 2003 来说太大了，可能会损坏。文件夹重定向到主机上的本地文件夹与文件消失无关，但您可能已经知道这一点。:)

# linux - 键盘快捷键创建ubuntu

> ID：11978285
> 
> 赞同：0
> 
> 时间：2012-08-15T22:31:31.453
> 
> 标签：linux, ubuntu, keyboard-shortcuts

我正在尝试创建一个键盘快捷键来将我的文件保存在 vim 中，所以我想将控件 alt S 映射到 ESC、:、w、ENTER、a。有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:36:13.547

看这个 ：

[http://vim.wikia.com/wiki/Map_Ctrl-S_to_save_current_or_new_files](http://vim.wikia.com/wiki/Map_Ctrl-S_to_save_current_or_new_files)

或这个：

[在vim中如何将“保存”映射到ctrl-s](https://stackoverflow.com/questions/3446320/in-vim-how-to-map-save-to-ctrl-s)

或这个：

[http://sigttou.com/vim-ctrl-s](http://sigttou.com/vim-ctrl-s)

# ruby-on-rails - 为什么我的 rails.png 404 是一个新的 rails 应用程序？

> ID：11978286
> 
> 赞同：0
> 
> 时间：2012-08-15T22:31:35.703
> 
> 标签：ruby-on-rails, ruby

我刚刚在我的服务器上添加了一个新的 Rails 应用程序（使用 Apache 的 Phusion Passenger），但没有找到 assets/rails.png。有人可以解释为什么新应用会发生这种情况吗？以及如何修复它并在未来的新应用程序中防止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:38:34.733

尝试在您的开发机器上运行 webrick

```
rails s -e production 
```

或者检查服务器上的日志，看看你得到了什么错误。您很可能没有使用以下内容编译资产：

```
rake assets:precompile 
```

这将使您在图像上没有路线错误。[有关资产管道](http://guides.rubyonrails.org/asset_pipeline.html)的详细信息，请参阅此页面。

# cocoa - NSBrowser 填充 NSPasteboard 但不会丢弃

> ID：11978288
> 
> 赞同：2
> 
> 时间：2012-08-15T22:32:22.917
> 
> 标签：cocoa, drag-and-drop, nspasteboard, nsbrowser

我有一个 NSBroswer，其中包含一系列查找文本 blob 的条目。如果 blob 存在，则 `- (BOOL)browser:canDragRowsWithIndexes:inColumn:withEvent:`返回 YES。

这调用 `- (BOOL)browser:writeRowsWithIndexes:inColumn:toPasteboard:`

在这里，我执行以下操作：

```
NSUInteger changeCount;
BOOL retBOOL = YES;

changeCount = [pasteboard clearContents];
changeCount = [pasteboard declareTypes:@[NSPasteboardTypeString, NSPasteboardTypeHTML]
                                 owner:self];
didSet = [pasteboard setString:self.currentHTMLCode
                       forType:NSPasteboardTypeString];
retBOOL = retBOOL & didSet;
didSet = [pasteboard setString:[NSString stringWithFormat:@"<pre>%@</pre>", self.currentHTMLCode]
                       forType:NSPasteboardTypeHTML];
retBOOL = retBOOL & didSet; 
```

现在出来的粘贴板的数据分析（带有retBOOL：是）是：

```
pasteboard: : <NSPasteboard: 0x101931870>
     name: : Apple CFPasteboard drag
     change count: : 77
     types: : (
    "public.utf8-plain-text",
    NSStringPboardType,
    "public.html",
    "Apple HTML pasteboard type"
)
     items: : (
    "<NSPasteboardItem: 0x1005a5cb0>"
)
         PBItem: : <NSPasteboardItem: 0x1005a5cb0>
             PBType: : public.utf8-plain-text
                 String for type [public.utf8-plain-text] = 89958 characters
             PBType: : public.html
                 String for type [public.html] = 89969 characters
retValue: YES 
```

所以我的问题是，当我将它拖到 SimpleText 或 BBEdit 时，什么都没有。我没有看到目标文档的亮点。（注：我也有拖图例程，看到拖图了）

任何想法为什么我似乎正在填充粘贴板但它拒绝放入其他应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T06:54:14.180

我下载了 Apple 的示例项目 SimpleBrowser，添加了

`[_browser setDraggingSourceOperationMask:NSDragOperationAll forLocal:NO];`

在 awakeFromNib 中并实现了几乎部分代码，它适用于 TextEdit、Safari 和 Word。这是示例[代码](http://pastebin.com/8kYwiKpp)

# vim - 如何在 Vim 中使用“wildignore”？

> ID：11978291
> 
> 赞同：24
> 
> 时间：2012-08-15T22:32:28.137
> 
> 标签：vim

我在弄清楚`wildignore`Vim 中设置的语法时遇到了很多麻烦。

假设我希望我的文件查找器插件（我使用[Ctrlp](http://kien.github.com/ctrlp.vim/)，它使用`wildignore`）不搜索隐藏的文件和文件夹，即前缀为`.`.

我该怎么做呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-04-11T14:22:47.433

具体而言`ctrlp.vim`，`wildignore`如果您键入`:help ctrlp-options`并阅读一下，您会发现：

> 注意 #1：默认情况下，**wildignore**和**g:ctrlp_custom_ignore**仅在使用**globpath()扫描文件时适用，因此当使用****g:ctrlp_user_command**定义的命令时，这些选项不适用。

因此，您可能需要`unlet g:ctrlp_user_command`（可能设置为默认命令）才能实际使用`wildignore`. 例如，在您的 中`~/.vimrc`，添加：

```
if exists("g:ctrl_user_command")
    unlet g:ctrlp_user_command
endif
set wildignore+=.* 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-09-16T14:19:12.767

正如 BenC 所指出的，如果您将 CtrlP 与外部搜索工具一起使用，Wildignore 可能不是忽略文件的最佳方式。相反，您可以使用 CtrlP 的“custom_ignore”指令，如他们的文档中所述：

```
let g:ctrlp_custom_ignore = '\v[\/]\.(git|hg|svn)$'
let g:ctrlp_custom_ignore = {
    \ 'dir':  '\v[\/]\.(git|hg|svn)$',
    \ 'file': '\v\.(exe|so|dll)$',
    \ 'link': 'SOME_BAD_SYMBOLIC_LINKS',
    \ } 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-04-06T09:28:19.953

因为标题与最佳答案不对应，所以她是我的，对应的不是 ctrlp，而是 wildignore。基于 [https://stackoverflow.com/a/579886/1170940](https://stackoverflow.com/a/579886/1170940)

Vim 将忽略选项 wildignore 中指定的文件模式，所以你可以像这样设置它们：

```
:set wildignore=*.o,*~,*.pyc 
```

例如，我的 Wildignore 看起来像这样

```
 set wildignore+=*/node_modules/*,_site,*/__pycache__/,*/venv/*,*/target/*,*/.vim$,\~$,*/.log,*/.aux,*/.cls,*/.aux,*/.bbl,*/.blg,*/.fls,*/.fdb*/,*/.toc,*/.out,*/.glo,*/.log,*/.ist,*/.fdb_latexmk 
```

我将它用于 ctrlp 和 NERDTree

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-15T22:46:00.907

见`:help file-pattern`。基本上，如果您只想排除任何以点开头的内容，您可以这样做`.*`。

# php - 如何使用数组作为列与mysql表的列连接？

> ID：11978292
> 
> 赞同：0
> 
> 时间：2012-08-15T22:32:33.597
> 
> 标签：php, arrays

我有一个 post_ids 数组

```
$ids = array( 
    [0] => 32 
    [1] => 33 
    [2] => 21 
    [3] => 11 
    [4] => 13 
    [5] => 17 
    [6] => 41 
    [7] => 88 
    [8] => 92 
    [9] => 94 
    [10] => 96 
    [11] => 106 
    [12] => 117 
    [13] => 187 
    [14] => 220 
); 
```

我想在数据库表中获取 post_id 与上述数组中的 id 匹配的列。表的结构是这样的

```
post_id | meta_key | meta_value 
```

目前，我正在使用`foreach ($ids as $id)`一个一个查询一个var。对于大型数据集，这是低效的。有没有办法通过 $ids 数组查询 meta_value 列？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:37:04.593

这不是最有效的方法，但它有效

```
$idList = implode(",",$ids); 
```

现在您的查询

```
$query = "SELECT * FROM posts 
          WHERE post_id IN ($idList);"; 
```

至少现在它减少到一个查询

**更新：**

要在填充数组时防止 SQL 注入，请确保您的数据库输入是安全的：

```
// if you are populating your array this way here is the trick
$ids = array();
foreach ($inputValues as $value){
   $ids[] = (int) $value; // this makes sure your input is an integer
} 
```

# python - 在 Windows/OSX/Linux 上的 Python 中为图标添加徽章

> ID：11978298
> 
> 赞同：6
> 
> 时间：2012-08-15T22:33:04.653
> 
> 标签：python, filesystems, icons, finder, badge

我试图弄清楚如何向文件系统上的单个文件添加和修改徽章图标，就像 Dropbox 如何将同步图标添加到文件一样。我想跨平台做到这一点，并希望看看哪种语言最好。现在我认为python是候选者，但我对可能已经解决这个问题的其他语言持开放态度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T23:02:23.160

我怀疑是否有任何语言的平台无关库来实现您的目标。一世

对于 GNOME（可能还有 XFCE），徽章图标称为*标志*，并通过 gvfs 元数据进行操作。以下是通过命令行更改标志的方法（取自[此处](https://stackoverflow.com/a/2571132/175349)）：

```
$ gvfs-set-attribute $FOLDER -t stringv metadata::emblems new urgent 
```

我敢肯定，如果您深入研究 gvfs-set-attribute 的来源，您就会找出 API。

对于 KDE 4.x，您可以使用 kwriteconfig（取自[此处](http://kde-apps.org/groups/?mode=0&id=404&forumpage=0)）：

```
$ kwriteconfig --file "$FOLDER/.directory" --group 'Desktop Entry' --key Icon /path/to/icon.png 
```

[在 Windows上](http://msdn.microsoft.com/en-us/library/windows/desktop/bb761265%28v=vs.85%29.aspx)，您应该[实现](http://www.codeproject.com/Articles/7484/How-to-overlay-an-icon-over-existing-shell-objects)IShellIconOverlayIdentifier COM 接口。

对于 MAC……我不知道。据此，至少对于 Mac OS X 10.6，没有官方 API 可以做到这一点[。](https://stackoverflow.com/questions/2778855/how-can-i-conditionally-color-files-and-folders-in-the-os-x-finder)

# android - 缩略图图像正在重新创建，并且它的位置在滚动 ListView 时被打乱

> ID：11978307
> 
> 赞同：1
> 
> 时间：2012-08-15T22:33:40.123
> 
> 标签：android, listview, bitmap, android-asynctask, imageview

我知道以前有人问过这个问题，我已经对此进行了很多搜索，但无法就我的问题得到任何正确的答案。

我创建了一个列表，列表中填充了来自`JSON`. 现在在`getView()`方法内部，我正在用数据膨胀我的自定义行。每行包含一个`Thumbnail`，我正在从不同的线程创建每个缩略图。

现在的问题是，在我不滚动列表之前，一切都很顺利。当我滚动我的列表时，我的`getView()`方法被连续调用，并且所有缩略图都被重新创建并且它的位置被打乱了。创建缩略图后，我不想重新创建它们，而且我想保持缩略图的顺序。

**你们能帮我解决这个问题吗？**

任何帮助将不胜感激。

我的`getView()`方法是：

```
@Override
public View getView(final int position, View convertView,
                ViewGroup parent) {

            ViewHolder viewHolder = new ViewHolder();
            if (convertView == null) {
                inflater = getLayoutInflater();
                convertView = inflater.inflate(R.layout.list_item_row, parent,
                        false);
                viewHolder.titleText = (TextView) convertView
                        .findViewById(R.id.titleText);
                viewHolder.thumbImage = (ImageView) convertView
                        .findViewById(R.id.thumbnail);
                convertView.setTag(viewHolder);
            } else {
                viewHolder = (ViewHolder) convertView.getTag();
            }

            final String thumbnailURLString = mPostsList.get(position).get(
                    "thumb");
            createBitmapThread = (Thread) getLastNonConfigurationInstance();
            createBitmapThread = new MyThread(thumbnailURLString,
                    viewHolder.thumbImage);
            createBitmapThread.start();
            viewHolder.titleText.setText(title);

            return convertView;
        } 
```

和`Thread`班级：

```
public class MyThread extends Thread {

        String mThumbURLString = null;
        ImageView mImageView = null;

        public MyThread(String thumbnailURLString, ImageView imageView) {
            mThumbURLString = thumbnailURLString;
            mImageView = imageView;
        }

        @Override
        public void run() {

                try {
                    URL newurl = null;
                    try {
                        newurl = new URL(mThumbURLString);
                    } catch (MalformedURLException e) {
                        e.printStackTrace();
                    }
                    try {
                        // Options opts = new Options();
                        /*
                         * opts.inDither = true; opts.inInputShareable = true;
                         * opts.inJustDecodeBounds = true; opts.inPurgeable =
                         * true;
                         */
                        Log.e("", "INSIDE IMAGE DOINBG");
                        mBitmap = BitmapFactory
                                .decodeStream((InputStream) newurl.getContent());
                    } catch (IOException e) {
                        e.printStackTrace();
                    }
                    mHandler.post(new MyRunnable(mImageView));
                } finally {

                }

    }

    public class MyRunnable implements Runnable {

        ImageView mImageView = null;

        public MyRunnable(ImageView imageView) {
            mImageView = imageView;
        }

        public void run() {
            mImageView.setImageBitmap(mBitmap);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:58:32.563

好的，我在这里做了类似的事情：

对于每个 getView ，创建一个新的 Fetching 类并将其放入并发/同步堆栈中。同时，将视图的位图设置为空（或您希望的任何其他内容）。您也可以改用缓存。

该类将包含有关如何加载数据的信息（例如，位图的 url）、要更新的视图和获取结果（例如，位图本身）。

现在，回到 getView，创建并执行一个 asyncTask，它将在堆栈上使用一个循环，每次它从堆栈中获取一个 Fetching 类实例（一旦它为空，asyncTask 将打破循环并完成），检查视图需要更新仍然需要数据（使用它的 viewHolder）加载位图，将结果设置到 Fetching 类中，并通过 publishProgress() 函数传递。

在 onProgressUpdate 方法中，执行与使用 Fetching 类实例和 viewHolder 之前相同的检查。如果一切顺利，更新视图以获取获取的位图。

可以在[**此处**](http://developer.android.com/training/displaying-bitmaps/display-bitmap.html)找到如何处理相同问题的一个很好但很复杂的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T01:55:21.410

我遇到了同样的问题，上面的建议效果很好，终于 - 谢谢！下面的代码片段：

我的异步任务：

```
protected class LoadImageTask extends AsyncTask<String, Void, String> {
    private View v;

    public LoadImageTask(View v) {
        super();
        this.v = v;
    }

    @Override
    protected void onPostExecute(String result) {
        Log.d(TAG, "<onPostExecute> load image complete. ");            
    }

    @Override
    protected String doInBackground(String... addresses) {
        String response = "";
        Bitmap bm = null;
        for (String address : addresses) {
            ViewHolder holder = (ViewHolder) v.getTag();
            String name = getNameFromMDN(address);
            if (name != null && name.length() > 0) {
                // get contact ID from name
                long id = getContactID(name);

                if (id != 0) {
                    bm = getThumbnailForId(id);
                    if (bm != null && bm.getHeight() > 0) {
                        bm = resizeBitmap(bm);
                        holder.icon.setImageBitmap(bm);
                        Log.d(TAG, "set thumbnail for " + name + ", id: " + id);

                    }   
                }
            }

            // default icon
            if (bm == null) {
                Log.d(TAG, "using default icon for mdn: " + address + ", name: " + name);
                holder.icon.setImageResource(R.drawable.contact_big);

                /*String s = getContactNameByContactId(person, address);
                s = s.substring(0, 2);
                if (s.length() > 0 && !MDNUtil.isNumber(s)) {
                    Log.d(TAG, "using dynamic icon for person: " + person + ", mdn: " + address + ", name: " + s);

                    icon.setBackgroundColor(Color.BLUE);                    
                    iconText.setText(s);
                    iconText.setTextColor(Color.WHITE);
                    iconText.setVisibility(View.VISIBLE);

                } else {
                    // use generic icon
                    holder.icon.setImageResource(R.drawable.contact_big);
                }*/

            }

        }
        return "";
    } 
```

然后在我的 CustomCursorAdapter 的 bindVew() 中：

```
LoadImageTask load = new LoadImageTask(v);
load.doInBackground(address); 
```

更新：最后的工作是阻止在我的自定义光标适配器中回收列表视图中的视图：

```
 @Override
    public int getItemViewType(int position) {
        return position;
    }

    @Override
    public int getViewTypeCount() {
        return 500;
    } 
```

# ruby - 为什么我的代码不能正确读取十六进制？

> ID：11978309
> 
> 赞同：0
> 
> 时间：2012-08-15T22:33:44.840
> 
> 标签：ruby, irb

当我在 IRB 中运行以下代码时：

```
1.9.3p194 :001 > x = %w(‎61 6C 6C 20 75 72 20 73 79 73 74 65 6D 73 20 62 65 6C 6F 6E 67 20 32 20 75 73)
1.9.3p194 :002 > puts x.map {|z| z.to_i(16)}.map(&:chr).join.inspect 
```

我得到：

```
"\x00ll ur systems belong 2 us"
=> nil 
```

然而`"61".to_i(16).chr`是`"a"`，不是`"\x00"`。

那里发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T22:45:44.777

问题是您有一个不可见的 Unicode[从左到右标记，](http://en.wikipedia.org/wiki/Left-to-right_mark)位于`%w(`. 当我通过 Stack Overflow 看到它时，它以 UTF-8 编码显示，但看起来它在您的原始源中一定是（Windows？）UTF-16。

# android - Android 下载文件 - Jackson readvalue 无法加载 java 类 - 堆大小错误

> ID：11978315
> 
> 赞同：0
> 
> 时间：2012-08-15T22:34:42.130
> 
> 标签：android, file, download

我正在尝试通过 http GET 通过休息服务下载 apk 文件。收到的格式是 JSON。我能够接收数据，但在反序列化为 java 对象时失败。我得到内存不足错误。

我正在 Asyn 任务中运行文件下载过程。是否有其他更好的选择来实现相同的功能。该 apk 约为 2 MB。来自 wcf 服务的数据是以 json 格式编码的 Base64

```
private  class DownloadFile extends AsyncTask<String, Integer, String>
{
    @Override
    protected String doInBackground(String... sUrl) 
    {
        try
        {
             URL url = new URL(sUrl[0]); 
              HttpURLConnection c = (HttpURLConnection) url.openConnection(); 
              c.setRequestMethod("GET"); 
              c.setRequestProperty("Content-Type", "application/json");
              c.setRequestProperty("Accept", "application/json");
              c.setRequestProperty("Device","13");
              c.setRequestProperty("Authorization","toughsecurity");
              c.setDoInput(true); 
              c.connect();                    
              String PATH = Environment.getExternalStorageDirectory() + "/download/"; 
              File file = new File(PATH); 
              file.mkdirs(); 
              File outputFile = new File(file, "app.apk"); 
              FileOutputStream fos = new FileOutputStream(outputFile);                    
             if(c.getResponseCode()==HttpURLConnection.HTTP_OK)
          {

                OutputStream out = new FileOutputStream(Environment.getExternalStorageDirectory() + "/download/"+"temp.txt");

                int read = 0;
                byte[] bytes = new byte[1024];

                while ((read = c.getInputStream().read(bytes)) != -1) {
                    out.write(bytes, 0, read);
                }

                out.flush();
                out.close(); 

                InputStream in=new FileInputStream(Environment.getExternalStorageDirectory() + "/download/"+"temp.txt");

               ObjectMapper mapper=new ObjectMapper();

              AppDownload download= mapper.readValue(in, AppDownload.class);

                 byte[] data1=Base64Coder.decodeLines(download.Data);
                  byte[] content = data1;
                int size = content.length;
                InputStream is1 = null;
                byte[] b = new byte[size];           
                is1 = new ByteArrayInputStream(content);
                byte[] buffer = new byte[1024]; 
                 int len1 = 0; 
                 while ((len1 = is1.read(buffer)) != -1) { 
                     fos.write(buffer, 0, len1); 
                 } 
                 fos.close(); 

          }

             c.disconnect(); 

        } 
        catch (Exception e)
        {
            Log.e("Jackson error",e.getMessage());
        }
        return null;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
      //  mProgressDialog.show();
    }

    @Override
    protected void onProgressUpdate(Integer... progress) {
        super.onProgressUpdate(progress);
       // mProgressDialog.setProgress(progress[0]);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:50:30.880

如果 JSON 库在 2MB JSON 文件上吐槽，我不会感到惊讶。

我知道更改 API 可能不是一个选项，但是以 JSON 格式返回二进制数据很奇怪。它不是为此而生的。API 应该提供两个端点……一个获取包含内容链接的对象元数据，另一个仅以二进制形式返回内容。

您也可以尝试另一个 JSON 库。

# sql - SQL 将一列更改为等于另一列的值

> ID：11978317
> 
> 赞同：0
> 
> 时间：2012-08-15T22:34:47.930
> 
> 标签：sql, sql-server

我有一个 column1 当前匹配同一个表中另一个 column2 中的所有内容。现在，当我添加新行并填写 column2 时，我需要 column1 自动更新。这是在 SQL 中。

我刚在想

```
ALTER TABLE dbo.Table
alter column column1 as column2 
```

可能有效，但似乎没有。

是否可以使用类似于 alter 语句的内容（即没有触发器）来执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:42:09.650

每当 Column1 更改时，您可以使用[TRIGGER](http://msdn.microsoft.com/en-us/library/ms189799.aspx)自动更新 Column2：

```
--My SQL Server isn't up to par, there's probably a better way to do this
CREATE TRIGGER MyTrigger
ON Table
AFTER UPDATE
AS
    UPDATE Table
    SET Column2 = Column1
    WHERE Id IN (SELECT DISTINCT Id FROM Inserted) 
```

您还可以使 Column2 成为[计算列](http://msdn.microsoft.com/en-us/library/ms191250%28v=SQL.105%29.aspx)：

```
ALTER TABLE Table
  ADD Column2 AS (Column1) 
```

如果您*总是*希望两者保持同步，我建议您删除现有列并添加到具有相同名称的新计算列中。

第三种方法是创建一个简单地公开 Column1 两次的 VIEW：

```
CREATE VIEW MyView AS
  SELECT Column1, Column1 as Column2 FROM Table 
```

# join - Map-side join 与 Hadoop Streaming

> ID：11978318
> 
> 赞同：1
> 
> 时间：2012-08-15T22:35:02.627
> 
> 标签：join, hadoop, hadoop-streaming

我有一个文件，其中每一行都是一条记录。我希望某个字段中具有相同值的所有记录（如果字段 A 则调用）转到同一个映射器。我听说这被称为 Map-Side Join，我还听说如果文件中的记录按我所说的字段 A 排序很容易。

如果更容易，数据可以分布在多个文件中，但每个文件都按字段 A 排序。

这是正确的吗？我如何在流媒体中做到这一点？我正在使用 Python。假设它只是我用来启动 Hadoop 的命令的一部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T04:39:03.077

只希望某些记录发送给某些映射器的真正理由是什么？如果你想要的最终结果是 3 个输出文件（一个全是 A，另一个全是 B，最后一个全是 C），你可以用多个 reducer 来完成。需要知道你真正想要完成什么。

# c++ - 大括号外的重复变量

> ID：11978320
> 
> 赞同：2
> 
> 时间：2012-08-15T22:35:23.263
> 
> 标签：c++

我的老师给了我一个问题（С++）： 之后屏幕上会打印什么：

```
{
     int a = 2;
     cout << a << endl;
     {   
         int a=7;
         cout << a << endl;
     }
     cout << ++a << endl;
} 
```

我想知道有什么复杂的吗？或者只是重复的标识符a？或者这样的大括号到处都有任何特定的效果，并且可能没有错误？当变量在外部不存在时，就像在函数中一样。它可以在大括号之外吗？这些牙套是干什么用的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T22:37:31.550

在这种情况下，大括号界定了变量的范围。内大括号基本上声明了一个新变量`a`，隐藏了外部变量。

相当于

```
{
   int a=2;
   cout<<a<<endl;
   {   
     int b=7; cout<<b<<endl;
   }
   cout<<++a<<endl;
} 
```

`a`除了在内部范围内不可用的例外。

输出将是

```
2
7
3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T22:37:45.137

大括号形成一个新的范围。`a`内部块中的变量与外部`a`块中的变量不同。

# javascript - 使用 javascript 菜单选择内容

> ID：11978327
> 
> 赞同：0
> 
> 时间：2012-08-15T22:36:16.510
> 
> 标签：javascript, jquery, filtering

我有一个包含多个类的 div 列表。有一个包含项目的菜单，其中每个项目都有自己的类别。div 类对应于这些类。我正在尝试过滤 div 的显示，分别显示选择了哪些菜单 div 类（存储在数组中）

[http://jsfiddle.net/teYwu/1/](http://jsfiddle.net/teYwu/1/)

例子：

```
 menu item(s) = red;
   all divs with class 'red' are shown

 menu item(s) = red, big;
   all divs with class 'red', 'big' are shown

 menu item(s) = red, big, blue;
    no divs have all 3 classes so none are shown 
```

# c# - 将您自己的通信协议与 apache thrift 一起使用？

> ID：11978329
> 
> 赞同：4
> 
> 时间：2012-08-15T22:36:30.863
> 
> 标签：c#, php, thrift, thrift-protocol

我想知道是否可以只使用 apache thrift 的序列化部分。

我基本上已经创建了一个自定义通信协议，并且想将一个节俭对象从我的服务器 (PHP) 传递给客户端 (C#)。

我自己开发的通信协议基本上是 JSON。我想使用 thrift 在 PHP 端正确构造对象，然后通过 JSON 发送它，然后我的 C# 应用程序将使用 thrift --gen csharp myfile.thrift 生成的类重新构造对象

有谁知道这是否可能或我将从哪里开始？我会以某种方式重载 TProtocol 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T11:21:37.070

是的，您可以仅将 Thrift 用于对象定义。我们做了类似的事情，虽然我们使用二进制格式而不是 JSON。

您可以扩展 TProtocol，或者您可以让您自己的类询问您创建的 Thrift 对象并提取和编码您的字段。然后，当您收到 JSON 时，只需根据您收到的值创建一个新的 Thrift 对象。

根据您实现它的方式，以及客户端库对 C# 和 PHP 的好坏程度（我都没有使用过），您可能能够以某种方式实现它，这样您在更改代码时就不必更改代码架构，尽管您仍然必须生成 Thrift 对象并部署它们。基本上，您遍历对象并在 JSON 中对每个项目进行编码。我们在 Java 中做到了这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T22:38:29.260

对于 C# 客户端，您可以使用 Thrift.Protocol.TJSONProtocol 从输入流中读取，如下所示：

```
TBase object; // replace TBase here with your thrift generated type
TJSONProtocol jsonIn = new TJSONProtocol(new TStreamTransport(inputStream, null));
object.Read(jsonIn); 
```

您应该能够在 PHP 端以类似的方式生成 json。

# http - iTunes 范围请求；播客被拒绝

> ID：11978335
> 
> 赞同：2
> 
> 时间：2012-08-15T22:36:59.993
> 
> 标签：http, http-headers, itunes, podcast

我正在尝试将一个播客添加到处理字节范围请求的 iTunes 中。`curl`我可以通过音频文件确认这一点：

```
curl -H "Range: bytes=50-100" --head http://media.site.org/podcasts/upload/2012/08/15/audio-081512.mp3

HTTP/1.1 200 OK
Server: nginx/1.2.0
Date: Wed, 15 Aug 2012 22:28:40 GMT
Content-Type: audio/mpeg
Content-Length: 51
Connection: keep-alive
X-Powered-By: Express
Status: 206 Partial Content
Accept-Ranges: bytes
Content-Range: bytes 50-100/1441605
Access-Control-Allow-Origin: * 
```

但是，当我尝试将提要页面的 URL 输入 iTunes 时，我收到以下错误：

> “您的提要有问题。您的剧集托管在不支持字节范围请求的服务器上。启用字节范围请求并再次尝试提交。”

音频文件托管在与提要文件不同的服务器上，并且由节点服务器提供服务......但我不明白为什么只要响应标头正确就应该如此。

我从同一台服务器上提供了一些其他播客，这些播客是在 iTunes 开始需要字节范围支持*之前*添加的，它们仍然可以正常工作（在包括 iPhone 在内的任何平台上，表明字节范围请求确实有效）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:01:39.840

如果响应标头的 HTTP 状态为`200`，则即使服务器正在接受字节范围请求，iTunes 也会拒绝播客。我所要做的就是强制一个`206 Partial Response`头球。在 Node 中，它看起来像这样（CoffeeScript）：

```
res.writeHead 206, headers 
```

`headers`是一个包含字节范围请求的所有正确标头的哈希，例如：

```
headers:
  "Accept-Ranges": "bytes"
  "Content-Range": "bytes #{start}-#{end}/#{length} 
```

和变量是通过解析请求头得到的，`start`是音频文件的实际大小。我也投入了很好的衡量。`end``Range``length``"Cache-Control": "no-cache"`

# windows - Vb.net 读取文件后未关闭文件

> ID：11978345
> 
> 赞同：3
> 
> 时间：2012-08-15T22:37:42.453
> 
> 标签：windows, vb.net, streamreader

刷新我的应用程序时，我必须从其中存储信息的文本文件中读取。阅读后，我确保下次刷新应用程序时已将其关闭'file.close（）'，应再次生成文本文件并覆盖前一个文件。

问题是它无法更改文件，因为它已被另一个进程使用，但只要我关闭我的应用程序，它就可以正常工作。无论如何在刷新它之前停止该过程以使其正常工作？该文本文件称为 NetworkInfo.txt。

谢谢克里斯

编辑

每次刷新应用程序时，我都会运行一个批处理文件，该文件会生成一个包含所有网络信息的文件。（IPConfig/all）

然后我有一个从它读取的模块，如下所示：

```
Public Function EthDefaultGateway() As String
    Dim sr As New System.IO.StreamReader(ipconfig)
    Try

        Dim foundEthernet As Boolean = False
        Dim gateway As String = ""

        Do Until sr.EndOfStream
            Dim line As String = sr.ReadLine()

            If line.Contains("Ethernet adapter LAN:") OrElse line.Contains("Ethernet adapter Local Area Connection:") Then
                foundEthernet = True
            End If

            If foundEthernet Then
                If line.Contains("Default Gateway . . . . . . . . . :") Then
                    gateway = line.Substring(line.IndexOf(":") + 1).Trim
                    Exit Do
                End If
            End If
        Loop

        If gateway = "" Then
            gateway = "Unknown"
        End If
        If gateway = "::" Then
            gateway = "Unknown"
        End If
        Return gateway
    Catch ex As Exception
        EthDefaultGateway = "Unknown"
    End Try
    sr.Close()
    sr.Dispose()
End Function 
```

从这里我收集了我需要的所有信息。（有很多更好的方法可以做到这一点，但我只是个菜鸟，我在这里、网上或朋友那里找不到任何其他想法。）

所有这些都在从中读取文件后关闭文件（sr.close）

一些原因，虽然它没有关闭它。唯一的另一件事可能是批处理文件没有关闭它，我认为这不太可能

问题是，当我更改 IP 或刷新表单时，它会失败，因为批处理文件无法覆盖网络信息文件。

有什么建议么？

我只是在想一种在刷新后终止进程的方法，但我不知道这是否是个好主意，或者它是否可行或如何做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T00:05:16.397

```
 Return gateway 
```

这绕过了底部的 sr.Close() 调用。所以文件不会被关闭。始终倾向于使用 Using 语句，因此它是自动的，不会因为异常而被遗忘、跳过或绕过：

```
Public Function EthDefaultGateway() As String
    Using sr As New System.IO.StreamReader(ipconfig)
       '' Rest of your code
    End Using
End Function 
```

# eclipse - 在使用 Java EE Eclipse 时需要帮助（在我的 jsp 中使用 src）

> ID：11978351
> 
> 赞同：0
> 
> 时间：2012-08-15T22:38:03.267
> 
> 标签：eclipse, src

情况是我已经将我的 Java 类（Feed.java、Feedlist.java）导入到我工作区的 src 文件夹中。

问题是，如何在我的 JSP 中使用它？导入它的语法是什么？因为我需要调用一些方法 (list()) 以在我的 JSP 中使用。

感谢大家的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:46:47.100

好吧，我假设您正在尝试在 Weblogic 或 Tomcat 上运行您的应用程序。

我通常将我的文件夹设置为：

```
src
web
--WEB-INF
----classes
----lib 
```

我让我的 Tomcat 指向我的 web 文件夹，这是 JSP 所在的位置。您的 java 文件应编译到 classes 文件夹。并且任何罐子都放在 lib 文件夹中。

要包含一个此时应该在类路径上的类，只需使用：

```
<%@ page import = "java.util.*"%>
<%@ page import = "your.package.Feed*"%>
<%@ page import = "your.package.Feedlist*"%>

<%
Feed myFeed = new Feed();
%> 
```

# ios - 如何从位于故事板上的视图控制器获取子视图

> ID：11978353
> 
> 赞同：0
> 
> 时间：2012-08-15T22:38:09.753
> 
> 标签：ios, cocoa-touch, uiview, uiviewcontroller

我有两个视图控制器，每个都有一个带有标签的 UIView。当我按下按钮时，我想将第一个视图控制器的视图设置为第二个视图。当我这样做时，第二个视图控制器不会加载视图，并且在我的第二个视图上指向我的 UIView 的指针为空，所以我无法在我的第一个视图上做任何事情。我正在做的就是这个，因为我的 secondViewNew 是我的 secondView 的一个属性。这可以在故事板上完成吗？我也试过 [self.storyboard instantiateViewControllerWithIdentifier:@"beaconContentID"] 方法做事。在这个项目中，secondViewNew 也是一个 UIView，我已经导入了所有相关的类。

```
SecondViewController *secondViewControllerInstance =  [[SecondViewController alloc] init];

UIView *test = secondViewControllerInstance.secondViewNew;

NSLog(@"%@",test); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:14:35.947

您的 secondViewNew 不会在 alloc/init 之后立即加载。

只有`awakeFromNib`在第二个视图控制器上调用该方法后才能保证将其实例化。

我不确定你想要实现什么，但听起来你应该将你的视图与视图控制器分开，如果它不“属于”其中之一。只需继承 UIView 并创建一个关联的 nib。这样，您可以在需要时实例化视图。

以下是步骤：

*   创建一个新的 UIView 子类，即 CustomView
*   创建一个新的 nib 文件，即 CustomView.xib
*   将视图添加到您的 nib 文件并将其自定义类设置为 CustomView，根据需要添加子视图等

最后，在要使用自定义视图的视图控制器中：

```
CustomView *customView = [[[NSBundle mainBundle] loadNibNamed:@"CustomView" owner:self options:nil] objectAtIndex:0]; 
```

# javascript - Javascript原型平庸：继承

> ID：11978355
> 
> 赞同：1
> 
> 时间：2012-08-15T22:38:19.290
> 
> 标签：javascript, inheritance, prototype

我如何`this.property`在运行时和每个实例上覆盖，而不创建一个新类并最终调用`doAnotherThing`父级？

```
var ThridPartyObject = function() {

    this.property = 'value';

    this.doOneThing= function() { /* */ }

    this.doAnotherThing= function() { /* */ }
}; 
```

没有运气：

```
ThridPartyObject.prototype = {

    property: 'myvalue',

    doOneThing: function() { // Override only this function and call the other
        return this.doAnotherThing();
    }

}; 
```

**编辑**：忘了说`property`可能存在也可能不存在。

我需要这个，因为在主干.js 中，我必须为我的所有模型实例定义一个自定义属性，并且某些功能应该以与原始主干不同的方式运行。下面是主干如何定义一个`Backbone.Model`（[`_.extend`](http://underscorejs.org/#extend)来自 underscore.js）：

```
 var Model = Backbone.Model = function(attributes, options) {
    var defaults;
    attributes || (attributes = {});
    if (options && options.collection) this.collection = options.collection;
    if (options && options.parse) attributes = this.parse(attributes);
    if (defaults = getValue(this, 'defaults')) {
      attributes = _.extend({}, defaults, attributes);
    }
    this.attributes = {};
    this._escapedAttributes = {};
    this.cid = _.uniqueId('c');
    this.changed = {};
    this._silent = {};
    this._pending = {};
    this.set(attributes, {silent: true});
    // Reset change tracking.
    this.changed = {};
    this._silent = {};
    this._pending = {};
    this._previousAttributes = _.clone(this.attributes);
    this.initialize.apply(this, arguments);
  };

  // Attach all inheritable methods to the Model prototype.
  _.extend(Model.prototype, Events, {
      // cut
  }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:47:38.350

如果对象是真正的“第三方”并且不受您的控制，那么它的创建者选择了与原型继承不兼容的模式（有时称为“闭包模式”）。您将无法在全局范围内覆盖`ThirdPartyObject`实例的任何属性，因为每个都在构造时`ThirdPartyObject`获取`property`、`doOneThing`和`doAnotherThing`新分配给它。

在这种情况下，唯一的解决方案是创建一个新的工厂函数来包装原始函数：

```
function modifiedThirdPartyObjectFactory() {
    var x = new ThirdPartyObject();
    x.property = "myvalue";
    return x;
}

var mtpo = modifiedThirdPartyObjectFactory(); 
```

* * *

使用原型继承的模式将按如下方式工作*：*

```
function ThirdPartyObject() {
    this.property = "value";
}

ThirdPartyObject.prototype.doOneThing = function () {
};

ThirdPartyObject.prototype.doAnotherThing = function () {
}; 
```

此模式在构造函数中设置*实例*属性，通常是数据。而*共享*属性，通常是方法，在原型上。原始代码将*所有*属性都设为实例属性，因此没有可以修改的共享属性会导致您的更改反映在所有实例中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T23:16:09.377

你实际上是在向后考虑。

原型就像父类。它与基于类的语言中的父类不完全相同（有***很多***差异）。
但是在这种情况下，为了继承属性/方法，原型将是父类。

当您制作`Foo`, `Foo`is the child 时，出于您的问题的所有意图和目的。当你这样做时：

```
function Foo () { this.method = function () {}; this.property = {}; }
Foo.prototype.method = function () {};
Foo.prototype.property = {};
Foo.prototype.other_property = 3; 
```

这类似于说：

```
PrototypeClass {
    public virtual property = {};
    public other_property = 3;
    public virtual method ( ) { }
}
Foo inherits BaseClass {
    public override property = {};
    public override method () {}
}

var foo = new Foo(); 
```

`constructor`for`Foo`覆盖了链中`prototype`同名的所有内容。当其中`Foo` ***没有***方法或属性时，***它***会通过其`inheritance/prototype`链向上游查找。

所以如果你想覆盖 的方法/属性`Foo`，那么你***必须***覆盖 的实例`new Foo()`。

你的选择几乎只是围绕`Foo`......构建一个包装器......比如：

```
function FooPlusPlus () {
    var foo = new Foo();
    foo.plus = function () { this.doSomething(); console.log(this.val); };
    foo.plusPlus = function () { foo.plus(); console.log(this.other_val); };
    return foo;
}

var fooPlusPlus = FooPlusPlus(); // ***NO NEW*** 
```

...或创建一个函数，该函数简单地扩展一个预先存在的对象（无论是“类”、“字典”、函数还是数组），并添加您想要扩展它们的任何附加属性/功能：

```
var extendObj = function (subject, extensions) {
    var key = "";
    for (key in extensions) { if (extension.hasOwnProperty(key)) {
        subject[key] = extensions[key];
    }}
}

var regularFoo = new Foo();

extendObj(regularFoo, { awesomeFunc : function () { if (typeof this.doSomething === "function") { this.doSomething(); }}, coolProp : "Bob" }); 
```

JS 让您可以自由地让任何东西继承任何东西，只要您不期望字符串或数字像具有自定义数据的类一样，无需仔细操作 Core 对象。

# java - 使用 Java 即时创建文本文件以供下载

> ID：11978356
> 
> 赞同：4
> 
> 时间：2012-08-15T22:38:20.273
> 
> 标签：java, servlets

我有一个 Java Servlet，每次调用时都会随机生成数千个字符串。我希望用户在调用 Servlet 时能够将它们放入文件中。我不想先将文件写入磁盘或内存。当用户调用 servlet 时，有没有办法即时写入文件？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T22:47:02.440

您在 Servlet 中生成的任何文本都可以简单地写入由`ServletResponse.getOutputStream()`.

如果您希望输出可作为文件下载，您可以按照此答案中的方法 - [https://stackoverflow.com/a/11772700/1372207](https://stackoverflow.com/a/11772700/1372207)

不同之处在于，Content-type 将是`text/plain`，而不是从另一个输入流中读取，您只需将 String 对象直接写入`ServletOutputStream`using`print(String)`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-05T15:15:18.670

如果您在提供下载服务的同时使用将内容写入 HttpServletResponse 的输出流的想法，而不是将内容保存在本地，然后以 FileInputStream 读取文件，您只需将文件内容转换为 InputStream 即可`InputStream stream = new ByteArrayInputStream(exampleString.getBytes("UTF-8"));`。

以下代码部分引用了[https://www.codejava.net/java-ee/servlet/java-servlet-download-file-example](https://www.codejava.net/java-ee/servlet/java-servlet-download-file-example)。

```
 public void doDownload(HttpServletRequest request, HttpServletResponse response) throws IOException {
        String fileName = "xxx.txt";
        String fileContent = "";

        // get absolute path of the application
        ServletContext context = request.getServletContext();

        // get MIME type of the file
        String mimeType = context.getMimeType(fileName);
        if (mimeType == null) {
            // set to binary type if MIME mapping not found
            mimeType = "application/octet-stream";
        }

        setResponseHeader(response, fileName, mimeType, (int) fileContent.length());

        InputStream inputStream = new ByteArrayInputStream(fileContent.getBytes("UTF-8"));
        // get output stream of the response
        OutputStream outStream = response.getOutputStream();

        byte[] buffer = new byte[4096];
        int bytesRead = -1;

        // write bytes read from the input stream into the output stream
        while ((bytesRead = inputStream.read(buffer)) != -1) {
            outStream.write(buffer, 0, bytesRead);
        }

        inputStream.close();
        outStream.close();
    }

    private void setResponseHeader(HttpServletResponse response, String fileName, String mimeType, Integer fileLength) {
        response.setContentType(mimeType);
        response.setContentLength(fileLength);
        response.setContentType("application/octet-stream; charset=UTF-8");

        String headerKey = "Content-Disposition";
        String headerValue = String.format("attachment; filename=\"%s\"", fileName);
        response.setHeader(headerKey, headerValue);

        response.addHeader("Pargam", "no-cache");
        response.addHeader("Cache-Control", "no-cache");
    } 
```

# facebook-graph-api - Graph API Explorer：删除分数

> ID：11978358
> 
> 赞同：0
> 
> 时间：2012-08-15T22:38:36.467
> 
> 标签：facebook-graph-api

我正在尝试从“Graph API Explorer”中删除所有“分数”。我选择了我的应用程序（在右上角），删除并写了[https://graph.facebook.com/APP_ID_OMITTED/scores](https://graph.facebook.com/APP_ID_OMITTED/scores)（作为请求），但我得到了错误：

```
{
  "error": {
    "message": "(#15) This method must be called with an app access_token.", 
    "type": "OAuthException", 
    "code": 15
  }
} 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:56:57.503

它现在可以工作了，这是工作代码：

```
// Delete scores for all users
function get_app_access_token($app_id, $app_secret) {
    $token_url = 'https://graph.facebook.com/oauth/access_token?'
        . 'client_id=' . $app_id
        . '&client_secret=' . $app_secret
        . '&grant_type=client_credentials';

    $token_response = file_get_contents($token_url);
    $params = null;
    parse_str($token_response, $params);
    return  $params['access_token'];
}

$app_id = 'OMITTED';
$app_secret = 'OMITTED';
$access_token = get_app_access_token($app_id, $app_secret);

$request_body = '';
$ch = curl_init('https://graph.facebook.com/'.$app_id.'/scores?access_token='.$access_token);
        //curl_setopt($ch, CURLOPT_POSTFIELDS, $request_body);
        curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
        curl_setopt($ch, CURLOPT_HEADER, 0); 
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "DELETE");
        $response = curl_exec($ch);
var_dump($response); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:47:06.820

就像错误消息说的那样，确保您使用的是[应用程序访问令牌](https://developers.facebook.com/docs/authentication/applications/)

如果您只使用 Graph API 浏览器，您的帐户可能有一个用户访问令牌

# javascript - 检测 # 符号后的 url 变化

> ID：11978360
> 
> 赞同：1
> 
> 时间：2012-08-15T22:38:49.940
> 
> 标签：javascript, jquery, html

我正在使用此代码来了解 # 符号后的 url 中的内容：

```
var a = document.URL.split("#")[1]; 
```

例如，如果页面的 url 是`http://example.com/path/to/somewhere/#contentpart`，变量`a`将包含`contentpart`。

但问题是，用户可能单击指向同一页面但另一部分的链接（例如：）`<a href="#footer">Go to footer</a>`，如果是这样，页面将**不会**重新加载。（只是页面将被导航到其他地方）

我的问题是，如何在 # 登录同一页面后检测 URL 何时更改？

欢迎使用任何 javascript/jQuery 方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T22:40:43.143

我建议，记住您当前的代码：

```
$(window).on('hashchange', function(e){
    var newHash = document.href.split('#')[1];
}); 
```

虽然简单地使用它更容易一些：

```
$(window).on('hashchange', function(e){
    var newHash = document.location.hash;
    console.log(newHash);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/FpU6J/3/)。

如果您不希望哈希包含`#`字符，请改用：

```
$(window).on('hashchange', function(e){
    var newHash = document.location.hash.substring(1);
    console.log(newHash);
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/FpU6J/2/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T22:57:28.227

您可以通过获取的`hash`属性 来获取 URL 哈希[`window.location`](https://developer.mozilla.org/en-US/docs/DOM/window.location)

```
var a = window.location.hash; 
```

对此属性的更改会[`hashchange`](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/hashchange)在所有现代浏览器中触发一个事件。MDN 文章中包含 IE7 及以下版本的解决方法。

```
window.onhashchange = function (e) {
    // Manage changes to your page
    // You can also inspect e.newURL and e.oldURL if you need to

    // Optionally prevent window from scrolling to target
    e.preventDefault();
} 
```

如果您使用 jQuery，请查看[jQuery BBQ](http://benalman.com/projects/jquery-bbq-plugin/)。它解决了很多问题和浏览器兼容性问题，还允许您将更改推送到 URL / 历史状态，而不是依赖用户单击链接。

# java - 如何使用普通 DataInputStream 加载 ARGB_8888 图像？

> ID：11978363
> 
> 赞同：0
> 
> 时间：2012-08-15T22:39:12.750
> 
> 标签：java

**编辑：**感谢之前的回答和帮助！我决定将这个问题编辑成我确切需要的内容，很抱歉之前没有那么具体。

基本上标题是所有信息，这是我目前正在使用的：

```
int channels = 4;
int length = width * height;
int[] data = new int[length * channels];
int[][] channelPixels = new int[4][length];

for (int c = 0; c < channels; c++) {
    for (int i = 0; i < length; i++) {
        channelPixels[c][i] = readByte();
    }
} 
```

不幸的是，颜色似乎与原件不匹配。

我在这里做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T23:43:55.790

`Cardinal`是一个无符号整数，并且`Typename(value)`是用于类型转换的 Delphi 语法。（C 语法中的等价物是`(typename) value`。）所以`Cardinal()`它不是一个函数，它将指针转换为无符号整数。

正如一些人已经指出的那样，该`^`运算符是指针解引用运算符。 `dp^ := sp^`意思是“将指向的值设置`dp`为等于指向的值`sp`”。

指针和指针递增，例如这里使用的，在 Java 中不存在，所以这让你的工作变得更加棘手。如果您想在托管代码中执行此操作，您需要做的是根据数组重写整个事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T05:47:41.550

此代码翻转矩形缓冲区并将 RGBA 字节顺序更改为 BGRA（反之亦然），如下所示：

```
a b c d e f g h
i j k l m n o p
=>
k j i l o n m p
c b a d g f e h 
```

使用类似 c/java 的伪代码进行粗略模拟：

```
src = array of byte with length (RawHdr.Width * RawHdr.Height * 4)
dst = array of byte with the same length

dstindex = 0

for (i = RawHdr.Height - 1; i >= 0; i--)
    {
     srcstartindex = i * RawHdr.Width * 4;
     for (j = 0; j < RawHdr.Width; j++)
         {  
           si = srcstartindex + j * 4;
           dst[dstindex] = src[si + 2];
           dst[dstindex + 1] = src[si + 1];
           dst[dstindex + 2] = src[si];
           dst[dstindex + 3] = src[si + 3];
           dstindex +=4;
         }
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T22:53:33.757

我不会为您编写代码，但这些应该对您有所帮助：

[Cardinal](http://www.delphibasics.co.uk/RTL.asp?Name=Cardinal&ExpandCode1=Yes)，来自 Google 上的第一个链接，它是基本的无符号整数类型，其大小无法保证。

`^`是指针解引用。

# database - 主机名（例如 localhost）在 mysql 等数据库中是什么意思？

> ID：11978367
> 
> 赞同：0
> 
> 时间：2012-08-15T22:40:00.663
> 
> 标签：database

它是数据库的位置。除了 localhost 之外，主机名还可以采用哪些其他值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:45:50.583

MySQL 上下文中的主机名是指托管数据库的服务器的名称，或者是（尝试）连接到数据库的客户端计算机的名称，具体取决于上下文。

此链接可能是一个起点，但您确实需要澄清您的问题。您要解决什么具体问题？

[https://dev.mysql.com/doc/refman/5.5/en/privilege-system.html](https://dev.mysql.com/doc/refman/5.5/en/privilege-system.html)

# c# - 如何使用 DLL 在我的 C# 代码中读取 Excel 2010 文件？

> ID：11978369
> 
> 赞同：1
> 
> 时间：2012-08-15T22:40:07.980
> 
> 标签：c#, excel, excel-2010

**更新1：**

我正在使用 Excel 2010，我在网上搜索并找到了成千上万种通过 win 表单、控制台等执行此操作的方法。但我找不到通过 DLL 执行此操作的方法。并且没有一个在线样本是完整的。

**更新结束**

我已经看了看，但没有得到我正在寻找的具体内容，如下面的 excel 样本表所示。

我正在寻找一种方法来读取每个单元格数据并将其存储在变量中

我已经开始这样的事情：

```
Workbook workbook = open(@"C:\tmp\MyWorkbook.xls");
IWorksheet worksheet = workbook.Worksheets[0];
IRange a1 = worksheet.Cells["A1"];
object rawValue = a1.Value;
string formattedText = a1.Text;
Console.WriteLine("rawValue={0} formattedText={1}", rawValue, formattedText); 
```

![电子表格](../Images/175574997369e37aaaae78ca201907cd.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:43:40.593

```
Excel.Sheets sheets = workbook.Worksheets;

Excel.Worksheet worksheet = (Excel.Worksheet)sheets.get_Item(1);

System.Array myvalues;

Excel.Range range = worksheet.get_Range("A1", "E1".ToString());

myvalues = (System.Array)range.Cells.Value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T23:58:21.950

您的代码可以进行一些更改。

要记住的一件事是 Excel 工作表是基于 1 的，而不是基于 0 的（并且使用 Worksheet 而不是 IWorksheet）：

```
Worksheet worksheet = workbook.Worksheets[1]; 
```

要获得一个范围，最简单的方法是调用`get_Range()`工作表对象（并使用 Range 而不是 IRange）：

```
Range a1 = worksheet.get_Range("A1"); 
```

更改这两行代码后，您的示例将正常工作。

**更新**

这是一个“完整”的例子：

1.  在解决方案资源管理器中右键单击您的项目，然后单击“添加引用”。
2.  单击 COM 选项卡并按组件名称对列表进行排序。在列表中找到“Microsoft Excel 14.0 Object Library”并选择它。单击确定。
3.  在您希望它运行的代码文件中，添加一个`using Microsoft.Office.Interop.Excel;`
4.  使用此代码，我已从您的示例中尽可能少地对其进行了修改：

* * *

```
var excel = new Microsoft.Office.Interop.Excel.Application();
Workbook workbook = excel.Workbooks.Open(@"C:\tmp\MyWorkbook.xls");
Worksheet worksheet = workbook.Worksheets[1];
Range a1 = worksheet.get_Range("A1");
object rawValue = a1.Value;
string formattedText = a1.Text;
Console.WriteLine("rawValue={0} formattedText={1}", rawValue, formattedText); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T23:12:51.547

如果您不想与 com 组件和注册 dll 发生争执，

阅读 excel 的最佳方式是[Excel Reader for .NET](http://exceldatareader.codeplex.com)

我已经使用它很长时间了，我可以说它确实有效。

财产`excelReader.IsFirstRowAsColumnNames`使一切变得容易。您可以在数据集中播放数据。

# xml - 简单的 Xpath 问题

> ID：11978370
> 
> 赞同：2
> 
> 时间：2012-08-15T22:40:15.280
> 
> 标签：xml, xpath

鉴于此记录结构，我正确的 Xpath 表达式是什么

基地是/产品/产品

1.  仅选择 category = "Wit" 的产品记录
2.  仅选择具有非空品牌字段的产品记录

 ````
 <product>
        <productID>?7804407001751?</productID>
        <name>?Name value?</name>
        <price currency="EUR">?11.?24?</price>
        -<productURL>
            product url value
        </productURL>
        -<imageURL>
            product img url value?
        </imageURL>
        -<description>
            description value
        </description>
        -<categories>
            <category path="Wit">?Wit?</category>
        </categories>
        -<additional>
            <field name="delete">?false?</field>
            <field name="brand">?Amaral?</field>
            +<field name="short_description"></field>
            <field name="deliveryTime">?5 werkdagen?</field>
            <field name="deliveryCosts">?5.?95?</field>
            +<field name="imageURL_2"></field>
            +<field name="imageURL_3"></field>
        </additional>
    </product> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:11:54.663

> 基地是/产品/产品
> 
> 1) 只选择 category = "Wit" 的产品记录

**使用**：

```
../product[categories/category/@path = 'Wit'] 
```

> 2) 仅选择品牌字段非空的产品记录

**使用**：

```
../product[additional/field[@name='brand' and normalize-space()]] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T03:05:41.787

试试这些...

1)`/products/product[categories/category/@path='Wit']`

2)`/products/product[additional/field[@name='brand'][normalize-space()]]`

如果你想两者结合：

```
/products/product[categories/category/@path='Wit' and additional/field[@name='brand'][normalize-space()]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T09:27:12.063

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!-- Edited by XMLSpy® -->
<xsl:stylesheet version="1.0"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:template match="product">
With 'Wit':
<xsl:value-of select="../product[categories/category/@path = 'Wit']/name"/>
with brandname:
<xsl:value-of select="../product[additional/field[@name='brand' and normalize-space()]]/name"/>
</xsl:template>
</xsl:stylesheet> 
```

请注意，我只返回产品的名称。如果您希望返回所有产品详细信息，只需从“value-of select”中删除“/name”即可。`

# javascript - Uncaught ReferenceError: $ is not defined when using $(document).ready

> ID：11978373
> 
> 赞同：2
> 
> 时间：2012-08-15T22:40:23.280
> 
> 标签：javascript, jquery, asp.net

我正在使用 Foundation CSS 框架，它在页脚中加载 jQuery。这不是许多人推荐的非典型做法。但是，我需要在页面中编写脚本。使用准备好的文档应该可以解决问题，但我仍然遇到错误。为什么？

```
$(document).ready(function(){
    // My Code
    var a;
    $(#id).dosomething({
    // Doing Something
    });
}); 
```

就在正文关闭标签之前：

```
<script src="scripts/jquery-1.8.0.min.js"></script>
// More Scripts
</body> 
```

但我得到标准错误“未捕获的 ReferenceError：$ 未定义”（4x，因为我在正文中有 4 个脚本）。此外，我无法将 jQuery 引用移到脚本调用上方，因为它与其他脚本冲突。我也无法将脚本调用移动到 jQuery 参考下方。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T22:47:56.207

> 使用准备好的文档应该可以解决问题，但我仍然遇到错误。为什么？

我想你误会了。您用于`$(document).ready`注册应在读取 DOM 后执行的代码，这通常是您想要操作 DOM 的时候。`$`这里是 jQuery，所以显然它必须在调用之前加载`$(document)...`。

> 我无法将 jQuery 引用移到脚本调用上方，因为它与其他脚本冲突

也许你应该使用[`jQuery.noConflict()` *^([docs])*](http://api.jquery.com/jQuery.noConflict/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-01-29T15:31:17.060

它有点旧，但也许它会帮助其他人。我得到了同样的错误，这是因为我在 html 页面中的 Jquery CDN 之前加载了我自己的 JS 脚本。在调用您自己的脚本之前，您必须先调用 JQuery CDN。 `<script src = "https: // jquery-link / .../jquery.js" />` 之后 `<script src = "/ myfoder / myscript.js />`

# asp.net-mvc - 使用类库和 MVC 模型

> ID：11978374
> 
> 赞同：1
> 
> 时间：2012-08-15T22:40:36.093
> 
> 标签：asp.net-mvc, entity-framework

我想知道我所做的解决方案是否可以做得更聪明，我想是的。我的问题是我有一个类库，我保留了我所有的方法。然后我得到了我使用模型的 MVC。这两个模型是相同的，但我需要转换它们，它很愚蠢。

在我的类库中，我使用实体框架，在那里我得到了自生成的类。

在我的 MVC 模型类中，我创建了一个类，以便可以使用正则表达式等。

问题：当我想发回一个方法时，我通常只想发送从我的视图中得到的对象。我厌倦了创建一个对象的实例，然后这样做：

```
 [HttpPost]
    public ActionResult CreateUser(UserModel user)
    {
        //my class libary / entity framework class for a user
        User efUser = new User();
        efUser.Email = user.Email;
        efUser.Username = user.Username;
        efUser.Password = user.Password;

        UserBLL userBLL = new UserBLL();

        //send the method to classlibary / logic layer
        userBLL.CreateUser(efUser);

        return RedirectToAction("Index");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T13:41:21.780

这是我在类似问题上发布的内容！希望它可以帮助您更好地理解在 MVC 中分层应用程序，并且您可能应该将 BLL 上的方法转换为非静态方法，以便能够有效地测试您的应用程序！

回答：

从高层次来看，当你考虑应用程序架构，即数据层、业务逻辑层和表示层时，MVC 应该只是你的表示层。我经常看到人们错误地认为在 MVC 中，模型代表他们的数据层，控制器代表业务逻辑层，视图代表表示层。

您应该始终拥有一个单独的业务逻辑层（或服务层），您的 MVC 控制器访问该层以执行业务逻辑，以及一个单独的数据访问层（或存储库），仅由您的服务/业务逻辑层访问以检索数据出数据库。

在典型的 MVC 应用程序中，您可能有多个视图模型表示同一个数据层对象（通常表示数据库表）。例如，您可能有 2 个视图来表示一个人的信息；一个是摘要视图，另一个是详细视图。在您的 MVC 应用程序中，您将拥有 2 个视图模型，即 PersonSummary 和 PersonDetail，它们都是从数据层中的同一个 Persons 表中填充的，并在您的控制器调用方法（例如 GetPersonSummary() 和 GetPersonDetails()）时返回到您的控制器操作在 PersonService 类（业务逻辑层）上。

以这种方式对应用程序进行分层将使它们比将视图模型视为数据模型并在控制器操作中编写所有业务逻辑更易于维护和测试。

# css - 引导文本字段突然缩小

> ID：11978377
> 
> 赞同：1
> 
> 时间：2012-08-15T22:40:40.220
> 
> 标签：css, ruby-on-rails, twitter-bootstrap, doctype, gemfile

晚上所有，

我有一个使用 twitter bootstrap 的站点，其 CSS 样式与以前的站点相同，因此我熟悉事物的外观。

我运行了捆绑更新，突然所有文本字段，而不是区域，都缩小了高度，无论我编写什么 CSS，我都无法触摸它们。徽标也漂移到了页面的左侧。

许多类似的问题建议更改我尝试无济于事的 DOCTYPE。

表单的 CSS 代码如下；

```
input, textarea, select, .uneditable-input {
  border: 1px solid #bbb;
  width: 100%;
  padding: 10px;
  height: auto;
  margin-bottom: 15px;
  @include box_sizing;
} 
```

使用如下的文本字段，它事先工作；

```
<div class="control-group">
        <div class="controls">
    <%= f.text_field :song_name, placeholder: "please enter a song title..." %>
        <br />
    <%= f.text_area :song, placeholder: "enter music score..." %>
        </div>
    </div> 
```

宝石文件

```
gem 'rails', '3.2.3'
gem 'jquery-rails'
gem 'bootstrap-sass', '2.0.0'
gem 'bcrypt-ruby', '3.0.1'
gem 'faker', '1.0.1'
gem 'will_paginate', '3.0.3'
gem 'bootstrap-will_paginate', '0.0.5'
gem 'pg', '0.12.2'

group :development, :test do
  gem 'rspec-rails', '2.9.0'
end

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
  gem 'twitter-bootstrap-rails'
end

group :test do
  gem 'capybara', '1.1.2'
  gem 'factory_girl_rails', '1.4.0'
end

gem 'mysql2'
gem 'omniauth-facebook', '1.4.0'
gem 'koala' 
```

如果您需要更多代码，请询问，但任何想法将不胜感激！干杯安迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T09:57:14.923

我设法以一种稍微不寻常的方式对此进行了排序。

当我更新 twitter bootstrap rails gem 时，它会更新 bootstrap overides 和 css 文件，添加一些额外的导入。删除此文件完全解决了一切。

我不太确定这是正确的解决方案，但它确实解决了我的问题。——</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:47:55.000

您是否在单击刷新时重新启动了服务器并按住 shift ？听起来像这里的缓存问题...

# javascript - 主干集合添加方法被触发两次

> ID：11978379
> 
> 赞同：4
> 
> 时间：2012-08-15T22:40:55.093
> 
> 标签：javascript, backbone.js

对于以下代码，`add`视图中绑定的事件会触发两次（如果一次向集合中添加更多元素，则会触发更多）。

[http://jsfiddle.net/radu/GnG66/](http://jsfiddle.net/radu/GnG66/)

```
App = window.App || {};

var Model = Backbone.Model.extend();
var Collection = Backbone.Collection.extend();
App.collection = new Collection({ model: Model });

var View = Backbone.View.extend({
    events: {
        'click': function() {
            console.log('click');
            App.collection.add([{
                foo: 'foo'
            }, {
                bar: 'bar'
            }]);
        }
    },
    initialize: function() {
        App.collection.on('add', function() {
            console.log('Something has been added to the collection')
        }, this);
    }
});

$(function() {
    App.view = new View({ el: '#test' });
});​ 
```

如果您不向集合中添加数组，而是将几个对象作为参数传递（基本上只是删除方括号），则该事件只会触发一次。

这是设计使然，有没有办法在不`{ silent : true }`作为选项传递的情况下覆盖此行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T22:51:40.757

`add`每个添加的模型都会触发一次该事件。

[`Collection.add`](http://backbonejs.org/#Collection-add)可以采用一系列模型，或单个模型和一些选项。

在上面的示例中，您传递了一个包含两个模型的数组。由于`add`每个添加的模型都会触发一次事件，因此它会触发两次。

当您传入多个对象时，Backbone 认为第一个对象是模型，第二个对象是选项哈希。这意味着只添加了一个模型，因此它会触发`add`一次事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-31T17:48:39.363

很抱歉从死里复活这个问题，但我也遇到了这个问题，想发布我是如何解决的。`'add'`对我来说多次触发的问题是因为我认为我有一个复杂的渲染函数正在监听`'add'`. 这导致了严重的性能问题。

我通过使用主干的方便`collection.clone()`方法创建一个临时集合来解决它，将新模型添加到其中，然后使用临时集合的`models`属性重置原始集合。代码如下所示：

```
// Create a temporary copy of searchResults
var temp = App.searchResults.clone();

// Add the new results
temp.add(newResults.models);

// Copy the new data over the old data
App.searchResults.reset(temp.models);

// Added this since reset triggers 'reset' and my view is listening for 'change add remove'
this.get('filtered_flights').trigger('change'); 
```

这只会引发一个`'change'`事件而不是几个`'add'`事件。

# drupal - 将一些用户链接到内容

> ID：11978381
> 
> 赞同：1
> 
> 时间：2012-08-15T22:41:20.203
> 
> 标签：drupal, drupal-7

我创建了一个名为“事件”的内容类型。对于每个事件，我希望能够指定联系人（负责组织的人）。

因此，我想在事件类型中添加一个“联系人”字段，其中小部件可以访问用户列表。然后可以选择一个或多个用户。

该字段将显示为指向这些用户的个人资料的链接列表。

我似乎记得在 Drupal 6 中有一个提供该小部件的模块，但我现在使用的是 Drupal 7，但找不到必要的模块！

谢谢！

（注意：我使用的不是事件模块，而是日期+日历。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:28:04.010

您可以查看以下两个可能的选项：

[**实体引用模块**](http://drupal.org/project/entityreference)- 可以引用用户实体

> 提供可以引用任意实体的字段类型

[**关系模块**](http://drupal.org/project/Relation)

> 关系是用于实体之间简单和最复杂关系的 API 模块和存储模型。该模块可以很好地处理方向和对称关系。

# indexing - Cassandra 1.1 存储引擎如何存储复合材料？

> ID：11978386
> 
> 赞同：6
> 
> 时间：2012-08-15T22:41:57.027
> 
> 标签：indexing, cassandra, storage, composite-key, database-indexes

当涉及到复合列时，我试图了解 Cassandra 的存储引擎。不幸的是，到目前为止我阅读的文档包含错误，让我有点空白。

首先，术语。

> 复合列使用复合主键包含完全非规范化的宽行。

这似乎具有误导性，因为根据 AFAIK，复合列可以用于复合键，也可以简单地用作键之外的复合列。

**1：**复合键和列名是如何实现的？我能找到的每个 CQL 示例仅将复合键显示为列，而不是普通的复合列。

假设我们有列'a'、'b'、'c'、'd'作为主复合键+列'e'、'f'。我知道 'a' 将是行和分区键。

让我们假设以下数据：

```
a    b    c    d    e    f
1a   1b   1c   1d   e1   f1
1a   1b   1c   2d   e1   f2
1a   1b   1c   2d   e2   f3
2a   2b   2c   2d   e2   f4 
```

**2：**这是如何存储在引擎盖下的？我想这里真正的问题是'b'、'c'、'd' 是如何映射出来的，因为根据定义，列不是分层的。

**3：**我阅读的文档说不应再使用紧凑型存储。但是如果不需要添加非主键列怎么办......那不使用它的原因是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T02:28:41.923

> 1：复合键和列名是如何实现的？

大多是用问题来回答的`2`。顺便说一句，在 Cassandra 1.2 中，非复合键也将在底层实现为复合键。此外，复合列的名称本身在存储中不会重复。内存中的表示将名称实习到内存效率的阈值。

> 2：这是如何存储在引擎盖下的？

第一个关键组件（`a`在您的示例中）成为物理行键。其余列形成非复合列的前缀，并以预排序（集群）形式存储在一行中。因此，您的示例的物理表示将如下所示：

```
 1b.1c.1d, e   1b.1c.1d, f
1a      e1            f1
------------------------------
    2b.2c.2d, e   2b.2c.2d, f
2a      e2            f4 
```

请注意，示例中的第二行和第三行*无效*。列名在物理行中必须是唯一的。

我使用的点符号 ( `1b.1c.1d`) 是比喻性的。实际存储使用前缀字节作为元数据，后跟数据。

> 我阅读的文档说不应再使用紧凑型存储。但是如果不需要添加非主键列怎么办......那不使用它的原因是什么？

非常小的存储效率不值得在架构中没有可进化性的缺点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-21T06:25:13.027

这两个链接可能对您有帮助：

[http://www.datastax.com/dev/blog/schema-in-cassandra-1-1](http://www.datastax.com/dev/blog/schema-in-cassandra-1-1)

[http://xamry.wordpress.com/2012/07/31/composite-keys-in-cassandra](http://xamry.wordpress.com/2012/07/31/composite-keys-in-cassandra)

# solr - 使用 Lucene、Solr 或 elasticsearch 索引 Amazon S3、Rackspace Cloud Files 或 OpenStack SWIFT

> ID：11978387
> 
> 赞同：4
> 
> 时间：2012-08-15T22:42:00.130
> 
> 标签：solr, lucene, amazon-s3, elasticsearch, openstack

有没有人使用过 Lucene、Solr 或 elasticsearch 来索引 Rackspace Cloud Files 或 OpenStack SWIFT（云存储）？如果有，你的经历是什么？有小费吗？有什么缺点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-14T09:10:25.460

我最近发布了 Amazon-S3 的 Elasticsearch 连接器（请参阅[http://lbroudoux.wordpress.com/2013/06/13/indexing-your-amazon-s3-bucket-with-elasticsearch/](http://lbroudoux.wordpress.com/2013/06/13/indexing-your-amazon-s3-bucket-with-elasticsearch/)）。虽然我已经好几个月没有使用它了 ;-)，但它已经从其他一周开始运行，并且已经索引了几十个 GB，没有任何问题！

希望这个小小的反馈可以帮助...

问候，

# adobe-indesign - 使用 XMPie 维护 InDesign CS5.5 导入设置

> ID：11978391
> 
> 赞同：1
> 
> 时间：2012-08-15T22:42:20.160
> 
> 标签：adobe-indesign, xmp

我们正在尝试使用 XMPie 动态引入 pdf 文件并将它们集中在一个框架内。但是，以类似于 Photoshop 的方式，文件由边界框导入，不允许我们设置任何其他参数。我们可以通过导入文件使其在个人层面上工作，但 InDesign 和 XMPie 会记住这些设置。任何帮助，将不胜感激。

我们需要这些通过媒体框和中心导入，我们使用的是 InDesign CS5.5。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-12T03:12:59.577

您需要做的是删除可见 pdf 页面大小之外的所有内容，然后将其放置。我在 acrobat 中使用 step 并重复到相同的页面大小。

# asp.net-mvc - 在 asp.net mvc 中公开 post 值的属性？

> ID：11978396
> 
> 赞同：0
> 
> 时间：2012-08-15T22:43:10.957
> 
> 标签：asp.net-mvc

在 asp.net mvc 中，在控制器中，我可以通过以下方式访问查询字符串

```
HttpContext.Request.QueryString 
```

同样是否有公开发布数据的属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:53:35.060

您可以通过 Controller Action 传递*FormCollection*参数类型。

我刚刚找到了这个答案：[https ://stackoverflow.com/a/5088493/1139752](https://stackoverflow.com/a/5088493/1139752)

我建议还阅读模型绑定的概念，以便在 Action 方法中抽象出 Request.Form 使用的概念。

# javascript - 用javascript解析HTML？

> ID：11978401
> 
> 赞同：0
> 
> 时间：2012-08-15T22:43:40.007
> 
> 标签：javascript, html, parsing

全部

我有一个 HTML 输入：`<h5><font face="times new roman, times, serif" size="7" style="color: #ff9696; ">Sample</font></h5> <ul> </ul>`

我想提取所有内容并传递给 javascript 变量。例如，字体名称、大小、样式颜色。我可以使用正则表达式吗？

我试过这个但没有用：

```
<html>

    <script>
        var input = '<h5><font face="times new roman, times, serif" size="7" style="color: #ff9696; ">Krishanthan</font></h5> <ul> </ul>';
        var div = document.createElement('div');

        div.innerHTML = input;

        var size = div.getElementsByTagName('size')[0];
        var text = size.innerText || size.textContent;

        alert(text);
    </script>

</html> 
```

请给我一些建议...

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T22:58:42.677

您有正确的想法，但是您将其视为`size`元素，而实际上它是元素的*属性*`font`。

```
var input = '<h5><font face="times new roman, times, serif" size="7" style="color: #ff9696; ">Krishanthan</font></h5> <ul> </ul>';
var div = document.createElement('div');

div.innerHTML = input;

var fontEl = div.getElementsByTagName('font')[0];
var size = fontEl.getAttribute('size');

alert(size); 
```

# java - Java ScriptEngineManager 不再适用于 Mountain Lion 的 AppleScript

> ID：11978407
> 
> 赞同：10
> 
> 时间：2012-08-15T22:44:43.187
> 
> 标签：java, applescript, osx-mountain-lion

自从我升级到 Mountain Lion 后，我就无法通过 Java ScriptEngineManager 运行我的 AppleScript 代码。

在 Apple 页面 ( [link](https://devforums.apple.com/message/721061#721061) ) 上找到的示例代码为该`engine`对象返回 null。

```
public static void main(String[] args) throws Throwable {
    String script = "say \"Hello from Java\"";

    ScriptEngineManager mgr = new ScriptEngineManager();
    ScriptEngine engine = mgr.getEngineByName("AppleScript");
    engine.eval(script);
} 
```

有人知道任何解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T16:33:51.727

我在 bugreport.apple.com 上发布了这个问题（错误 ID：12692742）。我收到了这样的回复：

2013 年 2 月 20 日下午 4:21 Apple 开发人员错误报告团队：我们认为您已使用 JavaDeveloper 安装了 Lion。您升级到 Mountain Lion，它（按设计）删除了以前在 /System 下安装的 Java SE 6 的所有痕迹。这在 /Library/Java/JavaVirtualMachines 下留下了一个功能性 SE 6 JDK 包，但 /System/Library/Java/Extensions 的内容不见了。

您可以通过以下几种方式解决此问题：

1）在Mountain Lion系统上重新安装JavaDeveloper包。

2) 通过删除 /Library/Java/JavaVirtualMachines 和 /System/Library/Java/JavaVirtualMachines 下的任何 JDK 包并运行 'java -version' 或 '/usr/libexec/java_home --request' 来为 OS X 重新安装 Java启动按需安装。

3) 从捆绑了 AppleScriptEngine 的 Oracle 安装 Java 7。

在 3 个选项中，#3 是推荐的选项，因为无论如何开发人员都应该转向 Java 7。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-07T16:09:20.733

如 ytw 所示，我通过在我的 jar 的“META-INF/services”文件夹中添加一个名为“javax.script.ScriptEngineFactory”的文件来使其工作。

我还必须更改一些代码：语言似乎不再是“AppleScript”而是“AppleScriptEngine”。所以这应该工作：

```
 public static void main(String[] args) throws Throwable {
        String script = "say \"Hello from Java\"";

        ScriptEngineManager mgr = new ScriptEngineManager();
        ScriptEngine engine = mgr.getEngineByName("AppleScriptEngine");
        engine.eval(script);
    } 
```

至少这适用于我的带有 JDK 1.7.45 的 MacOS X Mavericks ......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-03T13:22:53.830

在 Mac OS Yosemite 上，java -version : 1.7.0_40-ea

1.  而不是 ScriptEngine engine = mgr.getEngineByName("AppleScript"); 你必须使用：

ScriptEngine 引擎 = mgr.getEngineByName("AppleScriptEngine");

2.  在您的 src 目录中创建目录 META-INF

3.  在您的 src 目录中创建目录 META-INF/services

4.  创建文件 META-INF/services/javax.script.ScriptEngineFactory

5.  在这个文件中有一行：

apple.applescript.AppleScriptEngineFactory

构建并运行应用程序！（顺便说一句，它不是更多的 Java，它是魔法）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-30T00:37:13.500

我通过在 Mac OS X 10.7 (Lion) 上从 /System/Library/Java/Extensions/ 复制 AppleScriptEngine.jar 和 libAppleScriptEngine.jnilib 并将其添加到我的类路径中来完成这项工作。

不知道为什么 Apple 在 Mountain Lion 中删除了这些扩展。我在他们的开发者论坛上问过这个问题：[link](https://devforums.apple.com/thread/165051)。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-06-18T21:12:27.093

AppleScriptEngine 类已经在 rt.jar（Mac OS X 的 Java 7）中。如果您按照此处的信息 ( [http://docs.oracle.com/javase/7/docs/api/?javax/script/package-summary.html](http://docs.oracle.com/javase/7/docs/api/?javax/script/package-summary.html) ) 通过放置一个名为 javax.script 的文件使其“可发现” META-INF/services下的.ScriptEngineFactory，那么它可以不依赖/System/Library/Java/Extensions/中的AppleScriptEngine.jar工作。就个人而言，我认为使用 rt.jar 中已有的内容会更加健壮。

# android - 在 Android 的 Web 服务 Rest 中读取 Json。FileNotFoundException

> ID：11978412
> 
> 赞同：1
> 
> 时间：2012-08-15T22:45:35.810
> 
> 标签：android, json, web-services, rest, filenotfoundexception

有人知道为什么不能在 android 中使用这个 json 吗？[urlJson](http://www.pablogeek.com/webservices/rest/milanuncios/categorias)

结果是 FileNotFoundException，但在导航器上有效。

**编辑：**

```
public static String readUrl(String urlString) throws Exception {
        BufferedReader reader = null;

        try{
            URL url = new URL(urlString);
            reader = new BufferedReader(new InputStreamReader (url.openStream()));
            StringBuffer buffer = new StringBuffer();
            int read;
            char[]chars = new char[1024];
            while ((read = reader.read(chars)) != -1)
                buffer.append(chars, 0, read); 

            return buffer.toString();
        } finally {
            if (reader != null)
                reader.close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T10:55:10.973

使用 BufferedReader 不是完成此任务的最佳方法。使用库 org.json.* 将 HttpClient 与以下示例一起使用会更好；

```
HttpClient httpClient = new DefaultHttpClient();

    HttpPost post = new HttpPost("http://www.*****.com/json");

        // Execute HTTP Post Request
        HttpResponse response = httpClient.execute(post);
        String respStr = EntityUtils.toString(response.getEntity());

        JSONArray respJSON = new JSONArray(respStr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T10:00:05.930

格式不对。使用 {"name": "string", "...": "..."}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T11:26:13.363

问题解决了，我正在使用弹簧，我在服务中删除了它

```
@RequestMapping(value="/categorias", method = RequestMethod.GET,headers="Accept=application/json")
    public @ResponseBody Portada getCategorias() { 
```

到

```
@RequestMapping(value="/categorias", method = RequestMethod.GET)
    public @ResponseBody Portada getCategorias() { 
```

现在有效！

# objective-c - 使用来自桌面的图像作为 NSImage

> ID：11978416
> 
> 赞同：0
> 
> 时间：2012-08-15T22:45:44.090
> 
> 标签：objective-c, macos, cocoa, nsimage, nsimageview

如何将 NSImageView 的图像从桌面设置为文件，而不是从我的应用程序内部。这是我尝试过的代码：

```
[applicationIcon setImage:myImage]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:52:19.110

您不能将图像从桌面添加到 NSImageView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T06:45:04.133

您必须将图像添加到您的项目中，否则您将无法使用它。

您可能想看看这个文档 [OSx Human Interface Guidelines](http://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AppleHIGuidelines/Intro/Intro.html)。

# mysql - 一个巨大的 SQL 语句还是许多小的 SQL 语句？

> ID：11978418
> 
> 赞同：1
> 
> 时间：2012-08-15T22:46:00.163
> 
> 标签：mysql, sql, database, database-performance

我有一个场景，我需要根据大约 60,000 条名称记录的表检查 10,000 个不同的特定名称。假设缓存不相关，一般来说，出于性能目的，最好：

(1) 分解成小查询，以便每个查询可能有 200 个不同的名称？

或者

(2) 写一条包含 10,000 个“OR”子句的 mongocious sql 语句？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T22:57:11.847

你错过了第 3 点：完全以另一种方式做：

我会将列表写入单独的表/临时表或其他内容，然后使用`join`/`exists`或其他内容进行过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T22:51:45.920

第一个观察结果是，通常 RDBMS 对查询字符串的大小有一个限制，如果有这么多 OR，您可能会超过这个限制。

因此，一个解决方案是编写一个存储过程并在循环中执行。

忽略这一点，考虑到情况 (1) 中的数据访问次数比情况 (2) 中的多，后一种情况更可取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T01:17:26.300

或者 #4 - 批量使用 IN() 查询。大约 1000 通常效果很好：

SELECT * FROM table WHERE name IN ('str1', 'str2', 'str3', ...)

它并不完美，但不涉及临时表，MySQL 在优化 IN() 方面做得很好。

# html - 列表使用 XML 而不是 HTML，为什么？

> ID：11978420
> 
> 赞同：1
> 
> 时间：2012-08-15T22:46:08.907
> 
> 标签：html, css, xml, xhtml

我的下拉菜单在 XML 而不是 HTML 中完美运行。请查看此小提琴以获得视觉演示： http: [//jsfiddle.net/H8FVE/9/](http://jsfiddle.net/H8FVE/9/) 如果您将鼠标悬停在“***更多***”按钮上，您将看到下拉菜单对齐良好。我用于下拉位的代码是：

```
<moretopbar>
<ul>
    <li class="mgames"><a href="" style="border-bottom:9px solid #e34328">Games</a></li>
    <li class="mliterature"><a href="" style="border-bottom:9px solid #2c8f83">Literature</a></li>
    <li class="marts"><a href="" style="border-bottom:9px solid #cc226a">Arts</a></li>
    <li class="mcontact" style="background:none;"><a href="" style="border-bottom:9px solid #9395aa">Contact</a></li>
</ul>
</moretopbar> 
```

还有一些 CSS：

```
#mega div moretopbar {
    clear: both;
    float: left;
    position: relative;
    margin-left:1px;
    margin-right:1px;
    width: 495px;
    height: 74px;
    background-image: url(images/morebgwide.png);
    background-size:495px 74px;
    background-repeat:no-repeat;
} 
```

我试图将其更改为`<moretopbar>`，`<div id="moretopbar">`但它完全弄乱了下拉菜单。

这是为什么？我应该如何修复它以便只使用 HTML？如果您选择回答，请随时更新小提琴：http: [//jsfiddle.net/H8FVE/9/](http://jsfiddle.net/H8FVE/9/)

在您选择回答之前，我应该注意两件事。首先，我不熟悉 XML，上面是一个随机为我工作的编码错误（有人指出它是 XML），其次，我为什么不应该这样使用它有什么原因吗？例如兼容性问题...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T23:06:19.187

您的 HTML 完全无效。**您正在打开很多 div 而不是全部关闭。**这就是为什么当您再引入一个 div 时您的设计会中断。

请修复您的 HTML。您可以使用[W3c 的在线验证器](http://validator.w3.org/check)来查看您的标记问题。让编写有效的 HTML 成为您的习惯，否则会出现这样的“奇怪”错误。

在[这个小提琴](http://jsfiddle.net/H8FVE/10/)中，我做了以下更改：

*   Moved the ID to your `<ul>` and got rid of `<moretopbar>`:

    ```
    <ul id="moretopbar"> 
    ```

*   Changed the selector to: `#mega div #moretopbar`.

It "works" because the ID is now on an `ul`, not a `div` - as I already mentioned, the browser cannot really identify which div is which because of the lack of closing tags. Unless you fix this problem you are very very likely to see other strange bugs with your current divs.

* * *

**Edit:** Also the following CSS rules need to be more specific than simply saying `div`:

```
#mega div {...}
#mega li.dif:hover div {...} 
```

For example you can use a `specialdiv` class on the div you mean these rules for, and use `.specialdiv` instead of `div` in the rules.

[Working jsFiddle Demo](http://jsfiddle.net/H8FVE/13/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T22:49:13.883

您忘记将 moretopbar 声明为 id aka #moretopbar

# ruby-on-rails - ruby：如何有效地迭代哈希中的元素

> ID：11978421
> 
> 赞同：1
> 
> 时间：2012-08-15T22:46:16.053
> 
> 标签：ruby-on-rails, ruby, arrays, hash

我有一个非常大的哈希，我想迭代它。`Hash.each`似乎太慢了。有没有有效的方法来做到这一点？

如何将此哈希转换为数组？

* * *

在每个循环中，我都在做非常简单的字符串操作：

```
name_hash.each {|name, str|

  record += name.to_s + "\|" + str +"\n"

} 
```

而hash使用人名作为key，一些相关的内容作为value：

```
name_hash = {:"jose garcia" => "ca:tw#2@1,2@:th#1@3@;ar:tw#1@4@:fi#1@5@;ny:tw#1@6@;"} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T23:18:29.313

考虑以下示例，该示例使用 100 万个元素的散列：

```
#! /usr/bin/env ruby
require 'benchmark'

h = {}
1_000_000.times do |n|
  h[n] = rand
end

puts Benchmark.measure { h.each { |k, v| } }

a = nil
puts Benchmark.measure { a = h.to_a }
puts Benchmark.measure { a.each { |k, v| } } 
```

我在我的系统上运行它（运行 Ruby 1.8.5），我得到：

```
 0.350000   0.020000   0.370000 (  0.380571)
  0.300000   0.020000   0.320000 (  0.307207)
  0.160000   0.040000   0.200000 (  0.198388) 
```

因此，遍历数组确实更快（0.16 秒，而散列为 0.35 秒）。但是生成数组需要 0.3 秒。所以净过程慢了 0.46 秒，而 0.35 秒。

所以似乎最好只迭代哈希，至少在这个测试用例中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T23:51:24.700

在 ruby​​ 中更惯用的方法是：

```
record = name_hash.map{|k,v| "#{k}|#{v}"}.join("\n") 
```

我不知道这与速度相比如何，但部分问题可能是因为您不断在字符串上添加一点点，并在每次迭代时创建新的（越来越长的）字符串对象。连接是在 C 中完成的，可能性能更好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T23:52:32.880

`String#+`是缓慢的。这应该改进它

```
 record = name_hash.map{|line| line.join("|")}.join("\n") 
```

如果你用它来输出到某个地方，你不应该创建一个巨大的字符串，而是逐行写入输出。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T22:50:13.020

迭代大型集合很慢，每个方法都不是限制它的原因。在你的循环中你在做什么这么慢？如果需要转换为数组，可以通过调用`some_hash.to_a`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T23:08:00.200

### 可能*“通过进行单个数据库查询”*

将大哈希转换为数组需要创建一个大对象，并且需要两次迭代，尽管其中一个在解释器内部并且可能非常快。

这不太可能比仅遍历 Hash 更快，但它可能适用于大型对象。

查看[Standard Library Benchmark 包](http://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/index.html)，了解测量运行时间的简单方法。

我还冒昧地猜测，这里真正的问题是您有一个类似 Hash 的 ActiveRecord 对象，该对象在枚举*的每个周期中都会*对您的数据库服务器进行往返。您真正想要的可能是绕过 AR 并运行本机查询以在一次往返中一次检索所有*内容*。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-15T23:16:37.317

我曾认为 ruby​​ 1.9.x 使哈希迭代更快，但可能是错误的。如果它是简单的结构，您可以尝试不同的哈希，例如[https://github.com/rdp/google_hash](https://github.com/rdp/google_hash)，这是我为使#each 更可靠而破解的一个...

# php - PHP MySQLi准备语句无法返回行

> ID：11978423
> 
> 赞同：2
> 
> 时间：2012-08-15T22:46:43.680
> 
> 标签：php, mysqli, mysql-num-rows, prepare

我一直在用 PHP 将很多旧的 MySQL 东西转换为 MySQLi，并且在以下代码中遇到问题：

```
### FETCH INCLUDES ###
$player=$_POST['player'];
$password=md5($_POST['password']);
#### DB CONNECTION ####
if(!$mysqli=new mysqli(DBHOST,DBUSER,DBPWD,DBNAME)) {$err=$mysqli->error; print($err); }
$sql="SELECT * FROM accounts WHERE name='?' AND passkey='?'";
if($stmt=$mysqli->prepare($sql)) {
    //$stmt->bind_param('ss',$player,$password);
    $stmt->execute();
    $stmt->store_result();
    if($stmt->num_rows==1) {
        $account=$stmt->fetch_assoc();
        // purely for debugging
        print_r($account);
        if($_SESSION['account']=$account) $account=true;
    } else {
        echo "Failed. Row count: ";
        print($stmt->num_rows);
        echo "<br />";
        $query=str_replace('?','%s',$sql);
        printf($query,$player,$password);
        $account=false;
    }
    $stmt->close();
} else {
    $err=$mysqli->error;
    print($err);
} 
```

我已将故障范围缩小到查询本身。我得到 0 行返回，没有错误，所以我想我会输出查询（我要去那里的 str_replace 东西），我可以使用查询从数据库中返回一行，使用来自 PHPMyAdmin 的相同查询

我哪里错了？

# 编辑

我尝试将查询更改为没有绑定参数的基本查询 - “SELECT * FROM table”仍然没有返回任何行。所以这不是查询本身，而是我准备、执行情况的顺序/格式

第二次编辑：我已将 $stmt->store_result() 添加到代码中，但仍返回 0 行数。

第三次编辑：我调查了看起来不错的连接和用户设置。我可以通过控制台使用相同的用户和密码连接到数据库，并且数据库名称相同。我真的很难过:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T23:06:16.543

Add a `$stmt->store_result();` after `$stmt->execute();`, as it seem's it must be called once before `$stmt->num_rows`... At least they do this in the examples (see [http://php.net/manual/en/mysqli-stmt.store-result.php](http://php.net/manual/en/mysqli-stmt.store-result.php)). And they meantion a dependency in the documentation of "num_rows".

Other ideas: You check for `if($stmt->num_rows==1) {`, are you sure num_rows is 0? I don't know your database structure for the table "accounts". Is "name" the primary key (or at least a unique index)? If not, there could be multiple columns that match. That's just a quick idea what could be wrong, and cause you looking hours for the problem in your source code. While the problem is somewhere else.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T00:07:33.167

好的，我确实检查了您的代码。首先，您应该在连接时修复错误处理。不要检查“$mysqli”是否为真，而是像这样检查 mysqli_connect_errno()：

```
$mysqli=new mysqli(DBHOST,DBUSER,DBPWD,DBNAME);
if (mysqli_connect_errno()) {
  printf("Connect failed: %s\n", mysqli_connect_error());
  exit();
} 
```

在我的服务器上，您的代码使用正确的凭据（例如，需要替换 DBHOST、DBUSER、DBPWD、DBNAME）。

并且该声明`$account=$stmt->fetch_assoc();`不起作用。$stmt 对象中没有 fetch_assoc() 函数。fetch_assoc() 用于通过使用普通查询（不是准备好的语句）获得的 mysqli::result 对象。您需要使用 $stmt->bind_result(); 然后 $stmt->fetch(); 此外，您应该在查询中放置所有列名的列表而不是“*”，这定义了字段顺序...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T00:06:09.653

我让它工作了，我最终需要 $stmt->store_result();

但我也注意到我在 ? 周围添加了单引号。在导致问题的准备语句中。

在将它们取出并离开 store_result 方法后，它就可以工作了！

# linux - 如果任何查询失败，则停止 shell 脚本

> ID：11978427
> 
> 赞同：1
> 
> 时间：2012-08-15T22:47:12.037
> 
> 标签：linux, bash, shell, unix, sunos

下面是我的 shell 脚本，我试图从中调用几个运行良好的 hive SQL 查询。

```
#!/bin/bash

DATE_YEST_FORMAT1=`perl -e 'use POSIX qw(strftime); print strftime "%Y-%m-%d",localtime(time()- 3600*504);'`
echo $DATE_YEST_FORMAT1

hive -e "
        SELECT t1 [0] AS buyer_id
            ,t1 [1] AS item_id
            ,created_time
        FROM (
            SELECT split(ckey, '\\\\|') AS t1
                ,created_time
            FROM (
                SELECT CONCAT (
                        buyer_id
                        ,'|'
                        ,item_id
                        ) AS ckey
                    ,created_time
                FROM dw_checkout_trans
                WHERE to_date(from_unixtime(cast(UNIX_TIMESTAMP(created_time) AS BIGINT))) = '$DATE_YEST_FORMAT1' distribute BY ckey sort BY ckey
                    ,created_time DESC
                ) a
            WHERE rank(ckey) < 1
            ) X
        ORDER BY buyer_id
            ,created_time DESC;"

sleep 120

QUERY1=`hive -e "
set mapred.job.queue.name=hdmi-technology;
SELECT SUM(total_items_purchased), SUM(total_items_missingormismatch) from lip_data_quality where dt='$DATE_YEST_FORMAT2';"` 
```

**问题陈述：-**

如果你看到我`hive -e`在`echo $DATE_YEST_FORMAT1`. 有时，由于某些原因，该查询会失败。所以目前发生的情况是，如果`first Hive SQL query`失败，那么它会`second Hive SQL query`在 sleep for 之后进入`120 seconds`。那是我不想要的。那么，如果由于任何原因导致会费失败，有什么办法`first query`，它应该`stopped automatically`在那个时候得到。并且它应该在几分钟后再次从头开始自动运行（**应该是可配置**的）

**更新：-**

正如所建议的那样`Stephen`。

我试过这样的东西-

```
#!/bin/bash

hive -e " blaah blaah;"

RET_VAL=$?
echo $RET_VAL
if [ $RET_VAL -ne 0]; then
echo "HiveQL failed due to certain reason" | mailx -s "LIP Query Failed" -r rj@host.com rj@host.com
exit(1) 
```

我在下面收到类似这样的错误消息，我也没有收到任何电子邮件。我的语法和方法有什么问题吗？

```
syntax error at line 152: `exit' unexpected 
```

**笔记：-**

如果 Hive 查询成功执行，则此处为零表示成功。

**放置空间后的另一个更新：-** 进行如下更改后

```
#!/bin/bash

hive -e " blaah blaah;"

RET_VAL=$?
echo $RET_VAL
if [ $RET_VAL -ne 0 ]; then
echo "HiveQL failed due to certain reason for LIP" | mailx -s "LIP Query Failed" -r rj@host.com rj@host.com
fi
exit

hive -e 'Another SQL Query;' 
```

我得到了类似下面的东西-

```
RET_VAL=0
+ echo 0
0
+ [ 0 -ne 0 ]
+ exit 
```

状态代码是`zero`因为我的第一个查询成功，但之后我的程序退出并且它没有去执行我的第二个查询？为什么？我在这里肯定又错过了一些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:27:11.033

您可能还会发现设置*立即退出*选项很有用：

> ```
>  set  -e      Exit immediately if a simple command (see SHELL  GRAMMAR
>                   above) exits with a non-zero status.  The shell does not
>                   exit if the command that fails is part  of  the  command
>                   list  immediately  following  a  while or until keyword,
>                   part of the test in an if statement, part of a && or  ||
>                   list, or if the command's return value is being inverted
>                   via !.  A trap on ERR, if set, is  executed  before  the
>                   shell exits. 
> ```

如本例所示

```
#!/bin/bash

set -e
false
echo "Never reached" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T03:46:19.353

除非我误解了情况，否则这很简单：

```
#!/bin/bash

DATE_YEST_FORMAT1=`perl -e 'use POSIX qw(strftime); print strftime "%Y-%m-%d",localtime(time()- 3600*504);'`
echo $DATE_YEST_FORMAT1

QUERY0="
        SELECT t1 [0] AS buyer_id
            ,t1 [1] AS item_id
            ,created_time
        FROM (
            SELECT split(ckey, '\\\\|') AS t1
                ,created_time
            FROM (
                SELECT CONCAT (
                        buyer_id
                        ,'|'
                        ,item_id
                        ) AS ckey
                    ,created_time
                FROM dw_checkout_trans
                WHERE to_date(from_unixtime(cast(UNIX_TIMESTAMP(created_time) AS BIGINT))) = '$DATE_YEST_FORMAT1' distribute BY ckey sort BY ckey
                    ,created_time DESC
                ) a
            WHERE rank(ckey) < 1
            ) X
        ORDER BY buyer_id
            ,created_time DESC;"

if hive -e "$QUERY0"
then
    sleep 120
    QUERY1=`hive -e "
    set mapred.job.queue.name=hdmi-technology;
    SELECT SUM(total_items_purchased), SUM(total_items_missingormismatch) from lip_data_quality where dt='$DATE_YEST_FORMAT2';"`
    # ...and whatever you do with $QUERY1...
fi 
```

字符串`$QUERY0`是为了方便，而不是必要。关键是您可以使用`if`语句测试命令是否成功（返回状态 0）。该`test`命令（更好地称为`[`）只是一个命令，当满足测试条件时返回 0，不满足时返回 1（非零）。

因此，该`if`语句运行第一个`hive`查询；如果它通过（退出状态 0），那么（并且仅在那时）它会继续执行`then`子句中的操作。

我抵制住了重新格式化您的 SQL 的诱惑；可以说，这不是我在自己的代码中使用的布局。

# r - ggplot中图形顶部的x轴

> ID：11978429
> 
> 赞同：7
> 
> 时间：2012-08-15T22:47:22.780
> 
> 标签：r, ggplot2, axis

> **可能重复：**
> [使用 ggplot2 更改单个图形的刻度线位置](https://stackoverflow.com/questions/11766422/change-position-of-tick-marks-of-a-single-graph-using-ggplot2)

如何使用 ggplot2/R 在绘图顶部获取 x 轴？

这个[问题](https://stackoverflow.com/questions/8639973/how-to-plot-with-x-axis-at-the-top-of-the-figure)很相似，但是在 python 中。

# macos - Bash 输出到位置

> ID：11978430
> 
> 赞同：0
> 
> 时间：2012-08-15T22:47:37.560
> 
> 标签：macos, bash

此脚本输出稀疏磁盘映像。我想将图像放在系统上的正确位置，但不知道如何给它一个位置。我不想在创建后移动它。

```
#!/bin/bash
hostname=`hostname -s`
mac=`ifconfig en0 | grep ether | tr -d ":" | awk {'print $2'}`
hdiutil create -size 300g -type SPARSE -fs HFS+ "$hostname"_"$mac" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T22:49:08.123

```
/Volume/location/"$hostname"_"$mac" 
```

工作过

# php - 在 PHP 中读取 .xlsx 文件时添加额外的空列

> ID：11978434
> 
> 赞同：0
> 
> 时间：2012-08-15T22:47:51.453
> 
> 标签：php, excel

我编辑了一个 PHP 代码，它读取 Excel 电子表格（.xlsx 表单）并很好地显示它。但是我希望在 PHP 页面显示电子表格时添加一个额外的列。（让 textareas 更新每一行中的一个单元格。）

我能为它做些什么？

谢谢。

```
<?php
if((!empty($_FILES["file"])) && ($_FILES['file']['error'] == 0)) {

 $limitSize    = 15000000;

 require_once "simplexlsx.class.php";
 $getWorksheetName = array();
 $xlsx = new SimpleXLSX( $_FILES['file']['tmp_name'] );
 $getWorksheetName = $xlsx->getWorksheetName();
 echo '    <hr>
 <div id="datacontent">
 ';

 '<div id="datacontent">';
 for($j=1;$j <= $xlsx->sheetsCount();$j++){
 echo '<h3>Tablodaki Worksheet: '.$getWorksheetName[$j-1].'</h1>';
 echo '<table id="xlsxTable">';
 list($cols,) = $xlsx->dimension($j);
 foreach( $xlsx->rows($j+1) as $k => $r) {
 if ($k == 0){
 $trOpen        = '<th';
 $trClose    = '</th>';
 $tbOpen        = '<thead>';
 $tbClose    = '</thead>';
 }else{
 $trOpen        = '<td';
 $trClose    = '</td>';
 $tbOpen        = '<tbody>';
 $tbClose    = '</tbody>';
 }
 echo $tbOpen;
 echo '<tr>';
 for( $i = 0; $i < $cols; $i++)
 echo $trOpen.'>'.( (isset($r[$i])) ? $r[$i] : '&nbsp;' ).$trClose;
 echo '</tr>';
 echo $tbClose;
 }
 echo '</table>';
 }
 }

 ?> 
```

# c# - 格式化 DateTime 而不将其转换为字符串

> ID：11978437
> 
> 赞同：0
> 
> 时间：2012-08-15T22:48:05.703
> 
> 标签：c#, datetime, ebay-api

我有一`GetOrders`门课，要求我提供开始日期和结束日期作为`DateTime`值。不过，当我提供日期时，我收到以下错误消息：`Sorry, the end date was missing, invalid, or before the start date. <EndDate> must be in YYYY-MM-DD or YYYY-MM-DD HH:MI:SS format, and after the start date.`

这是我的代码：

`ff.GetOrders(DateTime.UtcNow, DateTime.UtcNow.AddMonths(-1), TradingRoleCodeType.Buyer, OrderStatusCodeType.Completed);`

当我尝试使用格式化字符串时，它**不起作用**：

```
 String dt1 = DateTime.UtcNow.ToString("yyyy-MM-ddTHH:mm:ssZ");
        String dt2 = DateTime.UtcNow.AddMonths(-1).ToString("yyyy-MM-ddTHH:mm:ssZ"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:03:27.000

假设 GetOrders 有 startdate,enddate （我无法判断，因为您没有提供 GetOrders 的函数原型），那么您的日期顺序错误，或者您应该使用 AddMonths(1) 而不是 -1。

（如果不是这种情况，请包含 GetOrders 的函数原型，我将修改或删除我的答案。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T23:08:53.633

如前所述，你的数学有点……我认为：

```
ff.GetOrders( DateTime.UtcNow               ,
              DateTime.UtcNow.AddMonths(-1) ,
              TradingRoleCodeType.Buyer     ,
              OrderStatusCodeType.Completed
            ) ; 
```

尝试类似的东西

```
DateTime dtStart = DateTime.utcNow      ;
DateTime dtEnd   = dtStart.AddMonths(1) ;

ff.GetOrders( dtStart ,
              dtEnd   ,
              TradingRoleCodeType.Buyer ,
              OrderStatuscodeType.Completed
            ) ; 
```

作为一般做法，将各个计算分开而不是在方法调用中组合它们会使代码更容易理解、更容易修改和更容易调试。

# php - 如何在 symfony2 中获取多值 get 参数的值

> ID：11978438
> 
> 赞同：0
> 
> 时间：2012-08-15T22:48:31.297
> 
> 标签：php, symfony, parameters, get, request

如何获取作为值列表的 get 参数的值？我尝试使用`request->query->get('parameter')`，但这只返回一个值。

假设您有一个国家参数并且想要传递超过 1 个值。例如......`?country=us,gb`使用 get 只给你“我们”。

我在文档中找不到这个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T04:20:19.233

您必须以这种方式格式化查询参数

```
country[]=us&country[]=gb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T22:57:32.757

从他们的手册（http://symfony.com/doc/current/book/http_fundamentals.html）

```
use Symfony\Component\HttpFoundation\Request;

$request = Request::createFromGlobals();

$request->query->get('foo'); 
```

编辑：

对不起，我误解了你的问题。你想要一个包含所有 GET 变量的数组，比如 $_GET 会给你吗？

这可以通过（还将包括 POST 参数）来完成：

```
 <?php $request->getParameterHolder()->getAll(); 
```

# android - 除了发布和调试之外的 Android ant 构建

> ID：11978446
> 
> 赞同：2
> 
> 时间：2012-08-15T22:49:27.490
> 
> 标签：android, ant, android-build

我为我的 Android 应用程序设置的默认 ant 系统有两个不同的选项：**发布**和**调试**。我可以使用`${build.is.packaging.debug}`. `ant release`我可以通过执行或一步构建这些`ant debug`。

我希望能够添加第三个选项：**beta**。通过这种方式，我可以为 beta 用户启用某些我不希望普通用户看到的标志，同时仍然忽略我的调试代码。我在 ant 构建系统的哪个位置指定新目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:09:49.240

如果你打开你的项目`build.xml`，你会发现目标**release**和**debug**。您应该创建一个类似名称**beta**的新名称，并在那里设置应用您的特定参数。

这是我的简单 ant 构建过程的示例：

```
<project name="j2me_library" default="build" basedir=".">
   <property name="build.version" value="1.0.0" />
   <property name="build.name" value="library-${build.version}" />

   <property name="src" value="src" />
   <property name="lib" value="lib" />

   <property name="build" value="build" />
   <property name="classes" value="${build}/classes" />
   <property name="dist" value="${build}/dist" />

   <!--
    the "build" target is the default entry point of this script
   -->
   <target name="build" depends="package" />

   <!--
    the "clean" target will delete the build directory which contains lots of mess from the previous build
   -->
   <target name="clean">
    <delete dir="${build}" />
   </target>

   <target name="prepare" depends="clean">
    <mkdir dir="${classes}"/>
    <mkdir dir="${dist}"/>
   </target>

   <!--
    the "compile" target generates the .class files from the .java sources
   -->
   <target name="compile" depends="prepare">
    <path id="lib.files">
      <fileset dir="${lib}">
        <include name="*.jar" />
      </fileset>
    </path>

    <property name="lib.classpath" refid="lib.files" />

    <javac srcdir="${src};"
        destdir="${classes}"
        includeantruntime="false"
        classpath="${lib.classpath}"
        bootclasspath="${lib.classpath}"
        target="1.1"
        source="1.2"
    />
   </target>

   <!--
    the "package" target creates the jar file
   -->
   <target name="package" depends="compile">
    <jar destfile="${dist}/${build.name}.jar" basedir="${classes}"/>
   </target>
  </project> 
```

# max - Max_Int 在 climits.h 中定义的限制之前达到

> ID：11978451
> 
> 赞同：1
> 
> 时间：2012-08-15T22:50:19.690
> 
> 标签：max, limits

我收到这个错误

![错误](../Images/5564d7095dd2254ad09ff9efc5f8a867.png)

每当我在使用 Microsoft Visual C++ 2010 Express 编译的代码中输入任何大于以下数字的数字时：

```
int size = 276447232; 
```

不过，根据[这次](https://stackoverflow.com/questions/271076/what-is-the-difference-between-an-int-and-a-long-in-c/271132#271132) [谈话](https://stackoverflow.com/questions/589575/size-of-int-long-etc)，[这个](https://stackoverflow.com/questions/4329777/is-long-guaranteed-to-be-at-least-32-bits)或[那个，我](https://stackoverflow.com/questions/2053843/min-and-max-value-of-data-type-in-c) [应该](http://www.cplusplus.com/reference/clibrary/climits/)可以在遇到任何问题之前上到2147483646，不是吗？

天空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:39:20.467

程序试图分配太多的*堆栈*空间：

```
char *outputGwb = char[size]; // array is created "on the stack" 
```

使用`malloc`（或`new`在 C++ 中）从*堆*分配内存。确保稍后`free`（或`delete`在 C++ 中）内存；只是不要混合分配/解除分配策略。

```
char* outputGwb = new char[size]; // C++: note use of the "new" keyword
char* outputGwb = malloc(size);   // C:   note no cast needed in a C compiler 
```

因此，此问题与特定资源的最大大小有关，与整数值可以表示的最大数量无关*。*

请参阅[堆栈和堆是什么以及在哪里？](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)有关两个内存分配区域之间的解释。此外，虽然我不一定推荐它，但这里有一个[讨论如何在 Visual C++ 中更改堆栈大小](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressvc/thread/2a5b32b6-683b-4729-92d3-45ed7a89ef3f)的线程。

# jsf - JSF：如何仅在选择另一个组件时验证 inputText

> ID：11978459
> 
> 赞同：2
> 
> 时间：2012-08-15T22:50:42.737
> 
> 标签：jsf, jsf-2

我有三个单选按钮，一个 inputText 和一个提交按钮。我只想在选择某个收音机时验证提交时的输入文本。所以我有

```
<h:inputText validator="#{myBean.validateNumber}" ... /> 
```

在我的豆子里，我有

```
 public void validateNumber(FacesContext context, UIComponent component,
                Object value) throws ValidatorException{
      if(selectedRadio.equals("Some Value"){
           validate(selectedText);
      }
 }

 public void validate(String number){
      if (number != null && !number.isEmpty()) {
        try {
            Integer.parseInt(number);
        } catch (NumberFormatException ex) {
            throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                "Error", "Not a number."));
        }
      } else {
        throw new ValidatorException(new FacesMessage(FacesMessage.SEVERITY_ERROR,
                "Error", "Value is required."));
      }
 } 
```

使这不起作用的一件事是，当我提交时，`validateNumber(...)`在我的单选按钮的 setter 方法之前运行`setSelectedRadio(String selectedRadio)`。因此造成这种说法

```
 if(selectedRadio.equals("Some Value"){
       validate(selectedText);
 } 
```

不能正确执行。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T02:15:02.897

这`selectedRadio`是一个模型值，仅在更新模型值阶段更新，即验证阶段*之后。*这就是为什么在您尝试检查它时它仍然是初始模型值。

您必须从请求参数映射（这是原始提交的值）或`UIInput`引用中获取它，以便您可以获取提交的值 by`getSubmittedValue()`或转换/验证的值 by `getValue()`。

所以，

```
String selectedRadio = externalContext.getRequestParameterMap().get("formId:radioId"); 
```

或者

```
UIInput radio = (UIInput) viewRoot.findComponent("formId:radioId"); // Could if necessary be passed as component attribute.
String submittedValue = radio.getSubmittedValue(); // Only if radio component is positioned after input text, otherwise it's null if successfully converted/validated.
// or
String convertedAndValidatedValue = radio.getValue(); // Only if radio component is positioned before input text, otherwise it's the initial model value. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T23:24:16.487

它被称为跨字段验证（验证不仅基于组件的值，还基于它们的集合）。

目前，JSF2 不支持它（[JSF 不支持跨字段验证，有解决方法吗？](https://stackoverflow.com/questions/6282466/jsf2-0-doesnt-support-cross-field-validation-is-there-a-workaround)）但是有几个库（在提到的问题omnifaces 中提到，看起来seamfaces 也有它的东西）可能帮助。在问题中还有一种解决方法。

# python - 如何在python中进行OR语句？

> ID：11978463
> 
> 赞同：4
> 
> 时间：2012-08-15T22:50:59.897
> 
> 标签：python

为什么这不起作用：

```
 file = "v3a2"
            if "v1" or "v2" in file:
                v1.write(total)
            elif "v3" in file:
                print "never here?????" 
```

如何制定这个？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T22:57:22.667

```
 if "v1" or "v2" in file: 
```

相当于

```
 if ("v1") or ("v2" in file): 
```

这将永远是`True`因为`bool("v1")==True`

你可以说

```
 if any(x in file for x in ["v1", "v2"]): 
```

或者

```
 if "v1" in file or "v2" in file: 
```

`any`如果要检查的项目超过 2 或 3 个，带有的版本看起来会更好

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-15T22:52:05.267

尝试

```
 if "v1" in file or "v2" in file: 
```

代替

```
 if "v1" or "v2" in file: 
```

也许对 Python[布尔运算](http://docs.python.org/reference/expressions.html#boolean-operations)的回顾可能会有所帮助。在摘要中该页的底部还有一个*运算符优先级表*。如果您查阅表格，您可以看到由于`in`运算符的优先级高于`or`运算符，因此表达式解释如下：

```
if ("v1") or ("v2" in file): 
```

而不是您的预期/意图。

另请注意，正如@sepp2k 在下面的有用评论中提到的那样，如果`or`优先级高于`in`，则您的表达式最终`if ("v1" or "v2") in file:`将不会按照您的预期工作。

这是指向另一个[运算符优先级表的](http://www.mathcs.emory.edu/~valerie/courses/fall10/155/resources/op_precedence.html)直接链接，因为我找不到上面的一个。

# bash - 用户友好的命令行选项

> ID：11978473
> 
> 赞同：1
> 
> 时间：2012-08-15T22:51:53.463
> 
> 标签：bash, shell, unix, command-line, command-line-arguments

我知道`boost::program_options`c++ 让我几乎可以立即编写用户友好的命令行选项。对于“用户友好”，我的意思是，短选项和长选项以及类似于此的描述性帮助命令：

```
Copy standard input to each FILE, and also to standard output.

  -a, --append              append to the given FILEs, do not overwrite
  -i, --ignore-interrupts   ignore interrupt signals
      --help     display this help and exit
      --version  output version information and exit 
```

对我自己来说，我不得不发现这在 bash 中真的很尴尬，内置的`getopts`只支持短选项。这是正确的还是我错了？

您将如何实现用户友好的命令行选项？如果您知道任何链接、最佳实践或深度教程，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T09:39:25.093

GNU getopt 支持长选项，并且可以从任何 Bourne-like 或 csh-like shell 中使用。ksh93 的内置 getopts 也支持长选项。zsh 有一个 zparseopts。

[在http://stchaz.free.fr/getopts_long.sh](http://stchaz.free.fr/getopts_long.sh)有一个 getopts 的 POSIX shell 实现（作为一个 shell 函数），它支持长选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:32:04.033

感谢您向我指出正确的信息来源。

我决定这样做[https://github.com/Mythli/tech/blob/master/bash/getopt.sh](https://github.com/Mythli/tech/blob/master/bash/getopt.sh) 代码非常简单，所以不需要解释。

# javascript - Google Plus 无法在网站上运行

> ID：11978480
> 
> 赞同：0
> 
> 时间：2012-08-15T22:53:17.113
> 
> 标签：javascript, html, google-plus, google-plus-one

我最初创建了一个 Google Plus One 按钮，复制了 javascript 代码，并将其粘贴到我的网站中。按钮工作正常。几周后，该按钮没有出现。我在多个浏览器中尝试过，但只有空白出现在按钮应该在的位置。我尝试重新安装，无济于事。

由于我的网站使用 WordPress，因此我决定取出 HTML 和 JavaScript 代码并在主页上安装 ShareThis 并在其中添加加一按钮。它甚至没有出现在那里。您可以在[http://www.wwwbuildawebsite.com/](http://www.wwwbuildawebsite.com/)上看到它。它应该在 Facebook Like 和 Pinterest 之间。但是，我看到它出现在我网站的另一个页面[http://wwwbuildawebsite.com/tutorials/index.html](http://wwwbuildawebsite.com/tutorials/index.html)上。

在我的其余帖子中，出现了空白。您可以单击教程页面中的任何链接。分享栏出现在左侧；Google Plus One 按钮应该首先出现在 Twitter 之前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:55:22.280

您的页面从事件处理程序`appendCodeColorer`的主体调用未定义的函数。`onLoad`这会阻止`onLoad`事件处理程序成功完成。

包含 Google plus one 按钮的 iframe 最初使用 CSS 样式呈现：

```
position: absolute;
top: -10000px; 
```

然后在 期间使该按钮可见`onLoad`。如果`onLoad`没有完成，它将保持不可见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T17:54:06.200

问题似乎是您包含了覆盖浏览器提供的 JSON 对象的 mootools-1.2.3。sharethis 库在尝试调用 JSON.parse 时失败，然后无法呈现 G+ 按钮。

你可以：

1) 升级到 mootools 2.0 或更新版本（参见[https://mootools.lighthouseapp.com/projects/2706-mootools/tickets/741-google-friend-connect-js-api-with-mootools#ticket-741-4](https://mootools.lighthouseapp.com/projects/2706-mootools/tickets/741-google-friend-connect-js-api-with-mootools#ticket-741-4)）

2) 在加载 mootools 后调用异步加载 plusone.js：

```
<script type='text/javascript' src='http://www.wwwbuildawebsite.com/wp-content/plugins/superslider/js/mootools-1.2.3-core-yc.js?ver=1.2.3'></script>

<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script> 
```

这将在 JSON.parse 函数被覆盖后恢复它。

3）手动别名功能：

```
JSON.parse = JSON.decode;
JSON.stringify = JSON.encode; 
```

# android - LibGDX SpriteBatch 多纹理可能吗？

> ID：11978485
> 
> 赞同：5
> 
> 时间：2012-08-15T22:53:42.773
> 
> 标签：android, opengl-es-2.0, libgdx, multitexturing, spritebatch

我很高兴使用 LibGDX 框架的 SpriteBatch 类。我的目标是通过着色器修改精灵的表示。

```
batch = new SpriteBatch(2, shaderProgram); 
```

我从 SpriteBatch 类中复制了默认着色器并添加了另一个统一的 Sampler 2d

```
+ "uniform sampler2D u_Texture2;\n"// 
```

有没有一种工作方法可以将纹理赋予着色器。这样做，总是以 ClearColor 屏幕结束。

```
batch.begin();
  texture2.bind(1);
  shaderProgram.setUniformi("u_Texture2", 1);
  batch.draw(spriteTexture,positions[0].x,positions[0].y);
  batch.draw(spriteTexture,positions[1].x,positions[1].y);
batch.end(); 
```

每个纹理单独工作。在 Mesh Class 的帮助下手动绘制可以按预期工作。那么我该怎么做才能使用 SpriteBatch 的便利性呢？

寻求帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T13:10:36.823

我想那里的问题与纹理绑定有关。SpriteBatch 假定活动纹理单元为 0，因此它调用

`lastTexture.bind();`代替`lastTexture.bind(0);`

问题是您给它的活动单位是 1（正如您`texture2.bind(1);`在代码中调用的那样）。因此，纹理单元 0 永远不会被绑定，并且可能是导致空白屏幕的原因。

例如，我会在通话`Gdx.GL20.glActiveTexture(0);`之前添加一个。`draw`我不太确定它会解决问题，但这是一个开始！

**编辑：** 我尝试了我建议的解决方案，它有效！:D。为了更清楚，你应该这样做：

```
 batch.begin();
      texture2.bind(1); 
      shaderProgram.setUniformi("u_Texture2", 1);
      Gdx.gl.glActiveTexture(GL10.GL_TEXTURE0);//This is required by the SpriteBatch!!
             //have the unit0 activated, so when it calls bind(), it has the desired effect.
      batch.draw(spriteTexture,positions[0].x,positions[0].y);
      batch.draw(spriteTexture,positions[1].x,positions[1].y);
    batch.end(); 
```

# java - 希望 JDialog 成为“模态”但不阻塞其他窗口

> ID：11978487
> 
> 赞同：1
> 
> 时间：2012-08-15T22:53:49.170
> 
> 标签：java, swing, user-interface, jdialog, modality

我正在开发一个程序，该程序每次通过时都会遍历对象列表。当一个对象的“时间”（即通过次数）到时，它会启动一个 JDialog 来请求它的下一个任务。问题是如何处理在一次通过中发出此请求的多个对象。

如果我制作 JDialog 模态，每个对象依次发出请求，这就是我想要的；但主程序窗口不可用，这是我不想要的。

如果 JDialog 不是模态的，则会出现多个实例，每次传递一个，这是我不想要的；或者，如果我将其设置为单例，则只会出现一个实例，但只有列表中的最后一个对象才能使用它。

有没有办法可以弹出对话框，让用户可以使用其他窗口，并让其他对象等待轮到他们使用对话框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T09:32:33.743

如评论中所述，可以通过更改parent的[*方式*](http://docs.oracle.com/javase/tutorial/uiswing/misc/modality.html)`Window`来解决问题。不利的一面是，“行为依赖于实现”。

作为替代方案，考虑遍历 a 的后台线程中的对象`SwingWorker`并将新的候选对象添加到合适的组件，例如`JList`、`JTable`或`JTabbedPane`。从组件中选择一个元素会弹出一个传统的模式对话框，在完成时删除该元素。[此处](https://stackoverflow.com/a/11372932/230513)显示了一个相关示例。每个建议的组件都可以用代表其状态的图标进行标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T14:58:55.903

通过将原始窗口的 ModalExclusionType 设置为“应用程序”并在完成后切换回“不排除”来解决此问题。

# html - 标题标签说明——

> ID：11978490
> 
> 赞同：-5
> 
> 时间：2012-08-15T22:54:23.803
> 
> 标签：html

HTML 标题标签——它的目的是什么？

我总是可以使用样式来定义我想要的文本大小，那么为什么我需要 HTML Header 标签？

即使它说标题标签，它也可以在 html 正文中的任何位置使用来显示内容。它不必只用在页面的标题中，而是可以在任何地方使用。标题对我来说是混淆标签名称。其他人也一样吗？谢谢你的澄清。史密斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T22:59:10.633

因为标题元素（`<h1>`... `<h6>`）与文本大小无关。它们用于标记真实的、合乎逻辑的*标题*——而不仅仅是一些应该用更大的字母或其他东西显示的文本块。

反过来，这些文本的*逻辑*标题可以以多种方式使用 - 为文档编制索引，例如，计算其与某些搜索词的相关性等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T22:59:23.477

标题标签包含语义信息；它们不仅仅是关于字体大小。

[http://ablognotlimited.com/articles/the-beauty-of-semantic-markup-part-3-headings](http://ablognotlimited.com/articles/the-beauty-of-semantic-markup-part-3-headings)
[http://blogs.creative-jar.com/post/Semantic-HTML-the-h1-tag-and -SEO.aspx](http://blogs.creative-jar.com/post/Semantic-HTML-the-h1-tag-and-SEO.aspx)
[http://www.pearsonified.com/2007/04/definitive-guide-to-semantic-markup.php](http://www.pearsonified.com/2007/04/definitive-guide-to-semantic-markup.php)

# waf - 如何使用 Waf 创建新的编译器配置文件？

> ID：11978491
> 
> 赞同：1
> 
> 时间：2012-08-15T22:55:02.583
> 
> 标签：waf

我在 Waf 构建系统的 API 文档中发现了这个非常有用的[页面：](http://docs.waf.googlecode.com/git/apidocs_16/tools/compiler_c.html)

我的 wscript 看起来像这样：

```
def options(opt):
        opt.load('compiler_c')

def configure(conf):
        from waflib.Tools.compiler_c import c_compiler
        c_compiler['linux'] = ['mycc']
        conf.load('compiler_c')

def build(bld):
        bld.program(source='main.c', target='nop') 
```

我尝试创建文件**mycc.py**，将其放在 waflib/extras 中并重新编译 Waf。但是，当我尝试使用这个新配置文件配置我的项目时，我收到以下错误：

```
Setting top to                           : /home/user/waf/example 
Setting out to                           : /home/user/waf/example/build 
Checking for 'mycc' (c compiler)         : not found 
could not configure a c compiler!
(complete log in /home/user/waf/example/build/config.log) 
```

我还尝试在项目的根目录中创建 waflib/extras/mycc.py（Waf 所在的位置以及调用它的位置）。不好。

我该怎么做呢？

# coldfusion - ColdFusion：通用更新模式

> ID：11978494
> 
> 赞同：0
> 
> 时间：2012-08-15T22:56:15.183
> 
> 标签：coldfusion

我通常创建这样的更新语句。但我知道有更好的方法。我怎么能批准这个？*注意下面的示例是伪演示，可能无法运行。

```
<cffunction name="updateEmp" returntype="void">
    <cfargument name="empId" required="yes" hint="empId">
    <cfargument name="firstName" required="yes" hint="firstName">
    <cfargument name="lastName" required="yes" hint="lastName">

    <!--- Get emp details in db --->
   <cfquery datasource="#ds#" name="getEmployee">
        SELECT *
        FROM Employee
        WHERE  emp_id = <cfqueryparam
                value="#arguments.empId#" 
                CFSQLType="CF_SQL_INTEGER">
    </cfquery>

    <!--- If employee is in db or if emp db details are different --->
    <cfif getEmployee.recordCount eq 1 
            and getEmployee.firstName neq trim(arguments.firstName) 
             or getEmployee.lastName  neq trim(arguments.lastName)>

        <cfquery name="UpdateExistingEmployee" datasource="#ds#">

                UPDATE Employee
                SET 1 = 1
                    <cfif getEmployee.firstName neq trim(arguments.firstName)>
                        ,firstName = <cfqueryparam 
                                    value="#arguments.firstName#" 
                                    CFSQLType="CF_SQL_VARCHAR" >
                    </cfif>

                    <cfif getEmployee.lastName neq trim(arguments.lastName)>
                        ,lastName = <cfqueryparam 
                                    value="#arguments.lastName#" 
                                    CFSQLType="CF_SQL_VARCHAR" >
                    </cfif>

                WHERE emp_id=<cfqueryparam
                    value="#emp_id#" 
                    CFSQLType="CF_SQL_INTEGER">

        </cfquery>

    </cfif>
    <!--- maybe return success? --->
</cffunction> 
```

编辑：

```
<cffunction name="updateEmp" returntype="void">
        <cfargument name="empId" required="yes" hint="empId">
        <cfargument name="firstName" required="yes" hint="firstName">
        <cfargument name="lastName" required="yes" hint="lastName">

            <cfquery name="UpdateExistingEmployee" datasource="#ds#">

                    UPDATE Employee
                        SET firstName = <cfqueryparam 
                                        value="#arguments.firstName#" 
                                        CFSQLType="CF_SQL_VARCHAR" >

                            ,lastName = <cfqueryparam 
                                        value="#arguments.lastName#" 
                                        CFSQLType="CF_SQL_VARCHAR" >

                    WHERE emp_id=<cfqueryparam
                        value="#emp_id#" 
                        CFSQLType="CF_SQL_INTEGER">

            </cfquery>

        <!--- maybe return success? --->
    </cffunction> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:35:04.313

不确定您要改进什么。如果您只想编写更少的代码，则可以进行更新：

```
<cffunction name="updateEmp" returntype="void">
    <cfargument name="empId" required="yes" hint="empId">
    <cfargument name="firstName" required="yes" hint="firstName">
    <cfargument name="lastName" required="yes" hint="lastName">
    <cfquery name="UpdateExistingEmployee" datasource="#ds#">
      UPDATE Employee
      SET firstName = <cfqueryparam value="#arguments.firstName#" CFSQLType="CF_SQL_VARCHAR">
          ,lastName = <cfqueryparam value="#arguments.lastName#" CFSQLType="CF_SQL_VARCHAR" >
      WHERE emp_id=<cfqueryparam value="#emp_id#" CFSQLType="CF_SQL_INTEGER">
    </cfquery>
</cffunction> 
```

检查现有记录几乎是多余的，因为如果没有 emp_id 匹配，where 子句将阻止任何操作，为什么还要检查名称是否匹配？如果他们这样做，那么您只需将它们更新为相同，如果他们不这样做，您无论如何都要更新它们。做所有这些检查没有合乎逻辑的理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:44:18.910

也许看看 Coldfusion ORM？或者，对于需要对代码库进行不太剧烈更改的内容，您可以使用 DataMgr（这确实有助于减少 CRUD）：[http ://datamgr.riaforge.org/](http://datamgr.riaforge.org/)

# css - 滚动在 Chrome 的叠加层中不起作用

> ID：11978495
> 
> 赞同：0
> 
> 时间：2012-08-15T22:56:58.513
> 
> 标签：css, youtube, scroll, overlay

我有一个覆盖层，由 JS 触发，覆盖层内有一些滚动内容。页面上还有几个嵌入的 youtube 视频。我遇到的问题是叠加层中的内容不会在 Chrome 中滚动。它在所有其他浏览器中都能正常工作。我确实在两个 youtube 视频中都添加了 wmode=opaque（也尝试了 wmode=transparent）。如果我删除这两个视频，滚动也开始在 Chrome 中工作。

谢谢

这是叠加层：

```
<div class="contact-overlay"><a class="close" href="#">X CLOSE</a><h3>Testimonials</h3><div class="content testimonials">
<h4 class="testimonials">See what our <span>satisfied customers</span> have to say:</h4>
<p>a lot of text</p> 
```

款式：

```
.contact-overlay { position: absolute; width: 640px; height: 730px; margin-left: -320px; left: 50%; top: 50px; background: #ffffff; z-index: 500; border-radius: 10px; -webkit-border-radius: 10px; -moz-border-radius: 10px; }
.contact-overlay a.close { font-family: "Arial Black", Gadget, sans-serif; color: #da3407; text-decoration: none; position: absolute; top: 5px; right: 10px; font-size: 18px; }
.contact-overlay .content { overflow: auto; height: 550px; width: 590px; margin-left: 25px; }
.contact-overlay .content.testimonials { margin-top: 30px; } 
```

该网站正在本地开发，因此没有链接。对不起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:59:50.410

我最终使用 JS 删除了 youtube 视频，并在覆盖层被激活时将其替换为屏幕截图，然后在覆盖层关闭时将它们重新打开。

# ruby-on-rails - rails object.association.count postgres错误

> ID：11978497
> 
> 赞同：1
> 
> 时间：2012-08-15T22:57:18.460
> 
> 标签：ruby-on-rails, postgresql, activerecord

我刚刚将我的数据库从 mysql 更改为 postgres，我收到以下错误：

```
ActionView::Template::Error (PG::Error: ERROR:  operator does not exist: character varying = integer
LINE 1: ...ELECT COUNT(*) FROM "agents"  WHERE "agents"."client_id" = 1 
```

做的时候

```
client.agents.count 
```

我有一个数据的结构如下：客户端有几个代理，如果 ，则只能添加更多代理`agents.count < X`，所以我正在使用类似`client.agents.count`检索这个值并进行比较的东西，但我得到了那个错误。我需要使用手动 sql 来完成这项工作吗？还是我错过了一些愚蠢的东西？

谢谢您的意见

型号信息

```
class Agent < User

  belongs_to :client
  attr_accessible :client_id

  validates :client_id, presence: true

end

class Client < User
  attr_accessible :appId, :expire_date, :legacy, :url, :plan_id, :chat_window_color, :chat_head_color, :chat_box_container_color, :chat_box_color, :tab_message, :greeting, :please_wait_message, :send_message_button, :comments_label, :offline_message

  belongs_to :plan
  has_many :agents, :dependent => :destroy

  has_secure_password

  after_initialize :init

  #omited validations

  private
  #BEGIN PRIVATE METHODS
end 
```

都继承自用户

```
class User < ActiveRecord::Base
    self.abstract_class = true

  attr_accessible :email, :name, :password, :password_confirmation

  attr_accessor :updating_password

  has_secure_password

  before_save { self.email.downcase! }

  #the controller must set updating_password to FALSE to avoid validation
  def should_update_password?
    updating_password || new_record?    
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:39:05.363

所以我发现了问题，列 client_id 是一个 varchar，mysql 允许这样做，但 postgres 抱怨不同的数据类型。通过做这样的事情得到了一个很好的工作：

```
def up
  rename_column :agents, :client_id, :client_id_old
  add_column :agents, :client_id, :integer
  Agent.reset_column_information
  Agent.find_each { |c| c.update_attribute(:client_id, c.client_id_old) } 
  remove_column :agents, :client_id_old
end 
```

从此链接[如何更改 Heroku 中的列类型？](https://stackoverflow.com/questions/3075920/how-do-i-change-column-type-in-heroku).

* * *

为了避免在 postgres 中直接使用`change_column`. 希望这对其他人有帮助

# php - 向下滚动时加载内容，就像 facebook 在墙贴中所做的那样

> ID：11978502
> 
> 赞同：4
> 
> 时间：2012-08-15T22:57:44.840
> 
> 标签：php, javascript, jquery, css

我正在创建这样的效果，当我将文档滚动到底部观看一组帖子并获得最后一个帖子时，我开始以与 facebook 在墙上的方式相同的方式加载新帖子。

嗯，效果不一样。

在 facebook 中，当加载新内容时，文档中的位置仅向上滚动一点即可看到新内容已准备好，但在 mine 中效果不同。有时它向下滚动，其他滚动到中间，等等......

有谁知道我可以使用的任何技术？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T15:02:18.347

你可以用砖石[无限滚动来做到这一点](http://masonry.desandro.com/demos/infinite-scroll.html)

还有 [Paul Irish 的 Infinite Scroll](http://www.infinite-scroll.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T11:38:34.710

是的，您可以使用简单的 php 和 jquery 技巧来做到这一点。看[这里](http://www.9lessons.info/2009/07/load-data-while-scroll-with-jquery-php.html)

# mysql - mySQL JOIN 用法

> ID：11978504
> 
> 赞同：2
> 
> 时间：2012-08-15T22:58:28.907
> 
> 标签：mysql, sql, join, inner-join

> **可能重复：**
> [INNER JOIN ON vs WHERE 子句](https://stackoverflow.com/questions/1018822/inner-join-on-vs-where-clause)

大约 1 年前，我开始担任 Web 开发人员。从那时起，我经历了 PHP、mySQL、Javascript、jQuery 等。我想我在这段时间里学到了一些东西。但是当涉及到 SQL 时，我是一个真正的菜鸟。我只是做了几个 SELECT、INSERT、UPDATE，并使用了一些函数，如 SUM 或 UNIX_TIMESTAMP 等。

我遇到过 JOIN 函数，它似乎非常有用，但我看不出使用 JOIN 或某些 WHERE 子句“加入”表之间的数据的区别。

我读了这篇关于加入的[文章](http://mauriciopastrana.com/gadgets-y-tecnologia/entendiendo-los-mysql-join/)（西班牙语）。我真的看不出它的用处。例如：

假设这个数据集：

```
id nombre       id  nombre
-- ----         --  ----
1  Pirata       1   Rutabaga
2  Mico         2   Pirata
3  Ninja        3   Darth Vader
4  Spaghetti    4   Ninja 
```

这个查询不会`SELECT * FROM TablaA INNER JOIN TablaB ON TablaA.name = TablaB.name`产生与 ? 相同的结果`SELECT * FROM TablaA, TablaB WHERE TablaA.name = TablaB.name`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T23:06:03.127

是的，它们会产生相同的结果，但是，`SELECT * FROM TablaA, TablaB WHERE TablaA.name = TablaB.name`执行连接的旧方法不符合 SQL-92 标准。一旦您的查询开始变得非常复杂，阅读起来也变得更加困难。最好坚持使用显式声明的 INNER JOIN 格式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T23:09:09.360

您的示例恰好产生相同的结果，但意识到还有其他类型的连接 - LEFT JOIN 是我通常使用的唯一另一种连接 - 连接的概念与使用 WHERE 子句过滤结果的概念是分开的。有时 WHERE 子句可能会变得足够复杂，而所有连接条件也没有混合在一起。让您的 SQL 易于维护，并在 JOIN 子句中加入，而不是在 WHERE 子句中。

# bash - 在 shell 脚本中，如何在不同的字符串之后替换第一次出现的字符串

> ID：11978514
> 
> 赞同：3
> 
> 时间：2012-08-15T23:00:17.230
> 
> 标签：bash, sh, dash-shell

我有一个简单的配置文件，看起来有点像这样：

```
[sectionA]
url = value1
username = value2
password = value3

[sectionC]
url = value1
username = value2
password = value3

[sectionB]
url = value1
username = value2
password = value3 
```

我想将 SectionB 的用户名替换为`valueX`不接触 SectionA 或 SectionC 的用户名。

我已经尝试了一些变体`sed`，但据我所知，它似乎在单独的行上运行。

我该怎么做

1.  搜索 StringA（在这种情况下`[SectionB]`）
2.  查找下一个出现的 StringB ( `username = value2`)
3.  替换为 StringC ('username = valueX`)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T23:26:44.733

### `sed`：

```
sed '/sectionB/,/\[/s/username.*/username = valueX/' input 
```

### `awk`：

```
awk -vRS='' -vFS='\n' -vOFS='\n' '
$1~/sectionB/{
    sub(/=.*$/, "= valueX", $3)
}
{
    printf "%s\n\n", $0
}' input 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:28:13.253

这个多行 sed 应该可以解决问题：

```
sed -E -n '1h;1!H;${;g;s/\[sectionB\]([^[]*)username = [a-zA-Z0-9_]+/\[sectionB\]\1username = valueX/g;p;}' input.txt 
```

# python - python解析文件到文件和输出文件

> ID：11978516
> 
> 赞同：1
> 
> 时间：2012-08-15T23:00:37.573
> 
> 标签：python

我正在尝试编写一个`py`脚本来解析一个 regshot 文件，其中包含注册表添加和修改等项目，并使用已知良好注册表的白名单对其进行解析，以查找任何不同的注册表。然后以它们在 regshot 文件中显示的确切形式将不同的**值**`.txt`写入文本文件。

前任：

> hklm\software\micrsoft\windows\currentversion\run\blahblah

我该怎么做呢？

我不确定从哪里开始以及是否应该使用正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:53:50.393

如果您对“已知良好的注册表”的定义包括可以表示为正则表达式的注册表条目类别，请使用正则表达式，例如：与“hklm\software\micrsoft\”下某处包含“currentversion”的所有注册表条目匹配的registry_entry可以定义为

```
re.match('^hklm\software\micrsoft\[^\\]*\currentversion', registry_entry) 
```

如果您只需要匹配子字符串，则不需要正则表达式。在这种情况下，一个简单的“如果 x in y”就可以了，例如：

```
if 'hklm\software\micrsoft\' in registry_entry 
```

但是，如果您的“已知良好注册表”只是特定注册表条目的列表，则可以进行更简单的匹配，例如：

```
registry_entries = [r'hklm\software\micrsoft\windows\currentversion\run\blahblah', r'hklm\software\micrsoft\windows\currentversion\skip\blahblah']
known_good_registries = [r'hklm\software\micrsoft\windows\currentversion\run\blahblah', r'hklm\software\micrsoft\windows\currentversion\jump\blahblah']

for entry in registry_entries:
    match = False
    if entry in known_good_registries:
        match = True
    if not match:
        print 'registry entry not in known good list: ', entry 
```

# javascript - 这段代码有什么问题？我想我搞砸了 HTML 和 Javascript 之间的通信

> ID：11978519
> 
> 赞同：0
> 
> 时间：2012-08-15T23:01:18.500
> 
> 标签：javascript, html

我是编程的新手。我已经在 Codecademy for JavaScript 上做了一段时间的练习，但显然有很多我仍然不知道/不理解。我在那些练习中写了一些东西，但没有任何人拥有或实际使用的东西。我本来打算再保持这种状态的，但今天工作中有机会做点小事，我想挑战自己，所以我决定尝试一下。

这个想法是创建一个表格，人们可以在其中输入他们的基本信息，并让它为他们设定一个符合他们减肥目标的每日卡路里量。它基于基础代谢率、哈里斯本尼迪克特方程，并稍加改动以适应我公司的特定程序。

我能够在 Dreamingincode 上找到一个基本 BMR 计算器的 Javascript，然后我对其进行了修改以进行我们需要的调整。在这个过程中的某个地方，出现了问题。当我将文件保存为 .html 文件然后在浏览器中打开它时，会出现表单，您可以填写所有内容，但是当您单击按钮时，它只会刷新屏幕。

我知道这对所有真正知道自己在做什么的人来说是愚蠢的，但我真的很想完成这项工作。如果你们中的任何人想成为英雄，请看看我有什么，并告诉我我在哪里搞砸了。

```
<html>
<head>
<title>Daily Calorie Goal</title>

</head>
<body>

<script type="text/javascript" language="javascript">

function Calculate() {

    var gender = document.getElementById("gender").value;
    var weight = document.getElementById("weight").value;
    var height = document.getElementById("height").value;
    var age = document.getElementById("age").value;
    var goal = document.getElementById("goal").value;

    if(gender=="male") 
        {
            val1 = 6.23 * weight;
            val2 = 12.7 * height;
            val3 = 6.8 * age;
            dailyDeficit = (goal * 3500) / 90;

            result = 66 + val1 + val2 - val3;

            cals = result * 1.55;
            calMax = cals - dailyDeficit;

        }
    else if (gender=="female")
        {
            val1 = 6.23 * weight;
            val2 = 4.7 * height;
            val3 = 4.7 * age;
            dailyDeficit = (goal * 3500) / 90;

            result = 655 + val1 + val2 - val3;

            cals = result * 1.55;
            calMax = cals - dailyDeficit;
        }

    document.write ('This is your Daily Calorie Goal. To achieve your goal, just consume fewer than this number of calories every day:<b>   ' + calMax.toFixed(2) + '</b><br>');

}

</script>

<form action="#">
    Gender  : <select id="gender"><option value="male">Male</option><option value="female">Female</option></select><br />
    Weight (lbs.)   : <input type="text" id="weight" /><br />
    Height (inches): <input type="text" id="height" /><br />
    Age     : <input type="text" id="age" /><br />
    Goal    : <select id="Goal"><option value=5>Lose 5 Pounds</option><option value=10>Lose 10 Pounds</option><option value=15>Lose 15 Pounds</option><option value=20>Lose 20 Pounds</option><option value=25>Lose 25 Pounds</option></select><br />

    </fieldset>
    <input type="submit" value="Get My Daily Calorie Goal" onclick="Calculate()" />
</form>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:05:22.353

You had one of your ids (Goal) spelled with a capital letter and your button was a submit type so it was trying to submit it to the server.

```
 <html>
    <head>
    <title>Daily Calorie Goal</title>

    </head>
    <body>

    <script type="text/javascript" language="javascript">

    function Calculate() {

        var gender = document.getElementById("gender").value;
        var weight = document.getElementById("weight").value;
        var height = document.getElementById("height").value;
        var age = document.getElementById("age").value;
        var goal = document.getElementById("goal").value;

        if(gender=="male") 
            {
                val1 = 6.23 * weight;
                val2 = 12.7 * height;
                val3 = 6.8 * age;
                dailyDeficit = (goal * 3500) / 90;

                result = 66 + val1 + val2 - val3;

                cals = result * 1.55;
                calMax = cals - dailyDeficit;

            }
        else if (gender=="female")
            {
                val1 = 6.23 * weight;
                val2 = 4.7 * height;
                val3 = 4.7 * age;
                dailyDeficit = (goal * 3500) / 90;

                result = 655 + val1 + val2 - val3;

                cals = result * 1.55;
                calMax = cals - dailyDeficit;
            }

        document.write ('This is your Daily Calorie Goal. To achieve your goal, just consume fewer than this number of calories every day:<b>   ' + calMax.toFixed(2) + '</b><br>');

    }

    </script>

    <form action="#">
        Gender  : <select id="gender"><option value="male">Male</option><option value="female">Female</option></select><br />
        Weight (lbs.)   : <input type="text" id="weight" /><br />
        Height (inches): <input type="text" id="height" /><br />
        Age     : <input type="text" id="age" /><br />
        Goal    : <select id="goal"><option value=5>Lose 5 Pounds</option><option value=10>Lose 10 Pounds</option><option value=15>Lose 15 Pounds</option><option value=20>Lose 20 Pounds</option><option value=25>Lose 25 Pounds</option></select><br />

        </fieldset>
        <input type="button" value="Get My Daily Calorie Goal" onclick="Calculate()" />
    </form>
    </html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T23:05:48.553

Clearing the screen is a side-effect of `document.write`. What you probably want is having an element that will contain the text.

After the form element, you can append an holder element:

```
<div id="result"></div> 
```

You can then set the content of it:

```
document.getElementById("result").textContent = "This is your daily..."; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T23:06:17.820

You just got to change this right here:

```
var goal = document.getElementById("goal").value; 
```

to this

```
var goal = document.getElementById("Goal").value; 
```

# jquery - Jquery 嵌套的 $.GET 调用不起作用？

> ID：11978521
> 
> 赞同：1
> 
> 时间：2012-08-15T23:01:25.787
> 
> 标签：jquery, callback, get, nested

我发现对 $.get 的嵌套调用在 JQuery 中不起作用。我已经将我的情况归结为如下所示。第一次调用 $.get，然后回调函数第二次调用 $.get 如果条件为真。即使我看到条件为真的警报，似乎也没有进行第二次调用。

有没有人像这样嵌套工作？

```
function callbackFn (responseText, textStatus, XMLHttpRequest) {
    alert("About to make call.  Condition is " + someCondition);
    if (someCondition) {
        $.get("localhost:8080/MyServlet?action=bar");
    }
    document.location.href = "http://www.google.com"

}

$(document).ready(function() {
    $.get("localhost:8080/MyServlet?action=foo", callbackFn);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:10:12.843

It is better to chain different ajax requests, since they are asynch. Chaining is best done with .succes() .complete()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:28:42.587

试试[这个](http://jsfiddle.net/gMGCb/1/)（使用 jsfiddle "/echo/html/" 来测试 AJAX）：

```
function callbackFn (data) {
    alert(data);
    if(data === 'First POST') {
        $.ajax({
          type: 'POST',
          url: "/echo/html/",
          data: {
                html: 'Second POST'
                },
          success: callbackFn,
          dataType: "HTML"
        });
    }
}

$(function() {
    $.ajax({
      type: 'POST',
      url: "/echo/html/",
      data: {
            html: 'First POST'
            },
      success: callbackFn,
      dataType: "HTML"
    });
}) 
```

# database - 函数依赖 - 查找 F 是否暗示

> ID：11978522
> 
> 赞同：0
> 
> 时间：2012-08-15T23:01:34.083
> 
> 标签：database, functional-dependencies

给定以下功能依赖项

```
F = { A -> BC, CD -> E, B -> D, E -> A } 
```

我无法理解 F |= E -> BC 是错误的。如果你有E，你可以去A，如果你有A，你可以去BC。这个逻辑有什么不正确的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T15:58:29.413

你的逻辑没有错。F |= E->BC。

# ios - iOS play sound before performing other action

> ID：11978524
> 
> 赞同：2
> 
> 时间：2012-08-15T23:01:40.170
> 
> 标签：ios, multithreading, audio

I have a need to play a brief sound 3 seconds or so (like a count down beep) before I perform some other action in an iOS application.

The use case is as follows:

User clicks a button... the beeps play (simple beeps using `AudioServicesPlaySystemSound`... then the rest of the method is run.

I cannot seem to find out a way to block my method while the tones are playing.

I've tried the following:

```
[self performSelector:@selector(playConfirmationBeep) onThread:[NSThread currentThread] withObject:nil waitUntilDone:YES]; 
```

But the tones play synchronously while the rest of the method is performed.

What am I missing with the above call?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T23:20:50.597

`AudioServicesPlaySystemSound`是异步的，所以你不能阻止它。您要做的是让音频服务在播放完成时通知您。您可以通过`AudioServicesAddSystemSoundCompletion`.

这是一个 C 级 API，所以事情有点难看，但你可能想要这样的东西：

```
// somewhere, a C function like...
void audioServicesSystemSoundCompleted(SystemSoundID ssID, void *clientData)
{
    [(MyClass *)clientData systemSoundCompleted:ssID];
}

// meanwhile, in your class' init, probably...
AudioServicesAddSystemSoundCompletion(
   soundIDAsYoullPassToAudioServicesPlaySystemSound,
   NULL, // i.e. [NSRunloop mainRunLoop]
   NULL, // i.e. NSDefaultRunLoopMode
   audioServicesSystemSoundCompleted,
   self);

// in your dealloc, to avoid a dangling pointer:
AudioServicesRemoveSystemSoundCompletion(
             soundIDAsYoullPassToAudioServicesPlaySystemSound);

// somewhere in your class:
- (void)systemSoundCompleted:(SystemSoundID)sound
{
    if(sound == soundIDAsYoullPassToAudioServicesPlaySystemSound)
    {
        NSLog(@"time to do the next thing!");
    }
} 
```

如果您确实想在播放声音时阻止 UI，并假设您的类是视图控制器，您可能应该`self.view.userInteractionDisable`在相关期间禁用。你绝对不想做的是阻塞主运行循环；这将阻止重要的系统事件，例如低内存警告，从而可能导致您的应用程序被强制退出。您可能还想遵守诸如设备旋转之类的事情。

# ember.js - why doesn't the ember route update the url correctly when using dynamic segments?

> ID：11978531
> 
> 赞同：0
> 
> 时间：2012-08-15T23:03:17.673
> 
> 标签：ember.js

this is a basic ember routing example that doesn't update the url to /posts correct when there is a child route in posts with dynamic segments. all the other routes (including the dynamic segments) correctly update the url. if i take out the dynamic segment child route (called 'show', under 'posts') then it updates the url correctly. here's the fiddle code : [http://jsfiddle.net/inconduit/NbPpM/3/](http://jsfiddle.net/inconduit/NbPpM/3/)

and to view fiddle in action where it updates the urls, look here: [http://fiddle.jshell.net/inconduit/NbPpM/3/show/#](http://fiddle.jshell.net/inconduit/NbPpM/3/show/#)

to summarize - when you click 'Posts' the url should update to show /posts , but it does not.

here's the javascript:

```
App = Ember.Application.create({
ready: function() {
        App.initialize(App.Router.create({ enableLogging: true }));
    }
});

App.Post = Ember.Object.extend({
    title: null,
    body: null
});

App.posts = [];
App.posts.pushObject(App.Post.create({id:'0', title: "Test post 1", body: "How awesome is Ember.js"}));
App.posts.pushObject(App.Post.create({id:'1', title: "Test post 2", body: "I love working on awesome projects"}));
App.posts.pushObject(App.Post.create({id:'2', title: "Test post 3", body: "I like cats"}));

App.ApplicationController = Ember.ObjectController.extend();
App.ApplicationView = Ember.View.extend({
    templateName: "application_view"
});

App.PostsController = Ember.ArrayController.extend();
App.PostsView = Ember.View.extend({
    templateName: 'posts_view'
});

App.PostController = Ember.ObjectController.extend();
App.PostView = Ember.View.extend({
    templateName: 'post_view'
});

App.AboutController = Ember.ObjectController.extend();
App.AboutView = Ember.View.extend({
    templateName: 'about_view'
});

App.Router = Ember.Router.extend({

    root: Ember.Route.extend({
        goToPostsIndex: Ember.Route.transitionTo('posts.index'),
        goToAbout: Ember.Route.transitionTo('about'),
        goToShowPost: Ember.Route.transitionTo('posts.index.show'),

        index: Ember.Route.extend({
            route: '/',
            redirectsTo: "posts.index"
        }),

        posts: Ember.Route.extend({

            route: '/posts',
            connectOutlets: function (router) {
                    router.get('applicationController').connectOutlet('posts', App.posts);
                },
            index: Ember.Route.extend({
                route: '/',
                connectOutlets: function (router) {
                    router.get('applicationController').connectOutlet('posts', App.posts);
                },
                show: Ember.Route.extend({
                    route: '/:post_id',

                    connectOutlets: function (router, post) {
                        router.get('postsController').connectOutlet('post', post);
                    },
                    deserialize: function(router, params) {

                        var id = params.post_id,
                            i = 0;
                        for (i = 0; i < App.posts.length; i += 1) {
                            if (App.posts[i].id === id) {
                                return App.posts[i];
                            }
                        }
                    },
                    serialize: function(router, context) {
                        var rtnVal = {},
                            id = context.get('id');
                        if (context) {
                            rtnVal = {post_id: id};
                        }

                        return rtnVal;
                    }
                })
            }),
        }),

        about: Ember.Route.extend({
            route: '/about',
            connectOutlets: function (router) {
                router.get('applicationController').connectOutlet('about');
            }
        })
    })
}); 
```

​`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:26:34.530

只有叶路由是可导航的（即，posts.index 不可导航的原因是它有一个子路由）。

[http://jsfiddle.net/NbPpM/8/](http://jsfiddle.net/NbPpM/8/) 我将 posts.index.show 移到了 posts.show ——这里的方式是一种常见的模式，至少在我的经验中是这样。

# javascript - Can JavaScript's setInterval block thread execution?

> ID：11978532
> 
> 赞同：3
> 
> 时间：2012-08-15T23:03:21.837
> 
> 标签：javascript, google-chrome-extension, xmlhttprequest, gmail, setinterval

Can setInterval result in other scripts in the page blocking?

I'm working on a project to convert a Gmail related bookmarklet into a Google Chrome extension. The bookmarklet uses the gmail greasemonkey API to interact with the gmail page. The JavaScript object for the API is one of the last parts of the Gmail page to load and is loaded into the page via XMLHttpRequest. Since I need access to this object, and global JavaScript variables are hidden from extension content scripts, I inject a script into the gmail page that polls for the variable's definition and then accesses it. I'm doing the polling using the setInterval function. This works about 80% of the time. The rest of the time the polling function keeps polling until reaching a limit I set and the greasemonkey API object is never defined in the page.

Injected script sample:

```
 var attemptCount = 0;

    var attemptLoad = function(callback) {

        if (typeof(gmonkey) != "undefined"){
            clearInterval(intervalId);  // unregister this function for interval execution.
            gmonkey.load('1.0', function (gmail) {
                self.gmail = gmail;
                if (callback) { callback(); }
            });
        }
        else {
            attemptCount ++;  
            console.log("Gmonkey not yet loaded: " + attemptCount );
            if (attemptCount > 30) {
                console.log("Could not fing Gmonkey in the gmail page after thirty seconds.  Aborting");
                clearInterval(intervalId);  // unregister this function for interval execution.
            };
        }
    };

    var intervalId = setInterval(function(){attemptLoad(callback);}, 1000); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-15T23:19:40.850

Javascript 是单线程的（除了我们在这里不讨论的网络工作者）。这意味着只要执行的常规 javascript 线程正在运行，您的`setInterval()`计时器将不会运行，直到执行常规 javascript 线程完成。

同样，如果您的处理程序正在执行，则在您的处理程序完成执行当前调用`setInterval()`之前，不会触发其他 javascript 事件处理程序。`setInterval()`

因此，只要您的`setInterval()`处理程序不会卡住并永远运行，它就不会阻止其他事情最终运行。它可能会稍微延迟它们，但它们仍然会在当前`setInterval()`线程完成后立即运行。

在内部，javascript 引擎使用队列。当某事想要运行（如事件处理程序或`setInterval()`回调）并且某事已经在运行时，它会将一个事件插入队列。当当前 javascript 线程完成执行时，JS 引擎检查事件队列，如果那里有东西，它会选择那里最旧的事件并调用其事件处理程序。

以下是有关 Javascript 事件系统如何工作的其他一些参考资料：

[JavaScript 如何在后台处理 AJAX 响应？](https://stackoverflow.com/questions/7575589/how-does-javascript-handle-ajax-responses-in-the-background/7575649#7575649)

[对 Javascript 方法的调用是线程安全的还是同步的？](https://stackoverflow.com/questions/7868434/are-calls-to-javascript-methods-thread-safe-or-synchronized/7868445#7868445)

[我需要关注异步 Javascript 的竞争条件吗？](https://stackoverflow.com/questions/7238586/do-i-need-to-be-concerned-with-race-conditions-with-asynchronous-javascript/7238663#7238663)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T23:35:38.517

setInterval 和 setTimeout 是“礼貌的”，因为它们不会在您认为它们会触发时触发——它们会在您指定的点**之后线程被清除的任何时候触发。**

因此，调度某事的行为不会阻止其他某事运行——它只是将自己设置为在当前队列的末尾或指定时间的末尾（以较长者为准）运行。

两个重要的警告：

第一个是 setTimeout/setInterval 具有特定于浏览器的最小值。通常，它们大约为 15 毫秒。因此，如果您每 1 毫秒请求一次，浏览器实际上会将它们安排为每个 browser_min_ms（不是真正的变量）分开。

第二个是使用 setInterval，如果回调中的脚本花费的时间比间隔时间长，您可能会遇到一个火车事故，浏览器将继续排队等待积压的间隔。

```
function doExpensiveOperation () {
    var i = 0, l = 20000000;
    for (; i < l; i++) {
        doDOMStuffTheWrongWay(i);
    }
}

setInterval(doExpensiveOperation, 10); 
```

坏时间+=1；

但是对于您的代码，您所做的事情本质上没有任何*问题。*就像我说的，setInterval 不会中止其他任何事情的发生，它只会将自己注入到下一个可用插槽中。

我可能会建议您将 setTimeout 用于通用的东西，但是您仍然可以很好地保持间隔的标签并保持间隔。

在代码的其他地方可能还有其他事情发生——无论是在 Google 的交付中，还是在您的收藏中。

# mysql - 如何从 MySQL 返回下一个可用日期？

> ID：11978536
> 
> 赞同：1
> 
> 时间：2012-08-15T23:03:46.043
> 
> 标签：mysql

考虑下表 ( `dates`)：

```
_date
------------
2011-03-14
2011-03-15
2011-03-16
2011-03-19
2011-03-20
2011-03-22
2011-03-23 
```

在任何给定日期之后，我可以通过什么查询返回第一个`dates`日期？伪：

```
SELECT <<nextdate>> FROM dates WHERE _date = '2011-03-14' 
```

这个查询必须返回`2011-03-15`，因为它是`dates`after中的第一个日期`2011-03-15`。但是在查询以下内容时：

```
SELECT <<nextdate>> FROM dates WHERE _date = '2011-03-16' 
```

然后查询应该返回`2011-03-19`，因为它是`dates`after中的第一个日期`2011-03-16`。

谁能帮帮我？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T23:05:46.190

```
 SELECT _date
    FROM dates
   WHERE _date > '2011-03-14'
ORDER BY _date
   LIMIT 1 
```

# google-app-engine - How do I download the index.yaml file for a GAE app?

> ID：11978539
> 
> 赞同：4
> 
> 时间：2012-08-15T23:04:21.450
> 
> 标签：google-app-engine, yaml

I tried following the directions at [https://developers.google.com/appengine/docs/python/tools/uploadinganapp#Downloading_Source_Code](https://developers.google.com/appengine/docs/python/tools/uploadinganapp#Downloading_Source_Code)

The download does not include the index.yaml file. Anyone know how to force download of index.yaml using appcfg, or another method?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T02:26:35.087

**默认情况下，该`index.yaml`文件不包含在应用程序上传中。因此，如果您没有修改文件中的`skip_files`设置，`app.yaml`您将*无法*下载该`index.yaml`文件。**

`skip_files`但是，您可以通过修改文件中的标签来自定义将包含的`app.yaml`文件。像这样的东西：

```
skip_files:
- ^(.*/)?app\.yaml
- ^(.*/)?app\.yml
- ^(.*/)?#.*#
- ^(.*/)?.*~
- ^(.*/)?.*\.py[co]
- ^(.*/)?.*/RCS/.*
- ^(.*/)?\..*
- ^(.*/)?.*\.bak$ 
```

有关 skip_files 的更多信息，请阅读：[https ://developers.google.com/appengine/docs/python/config/appconfig#Skipping_Files](https://developers.google.com/appengine/docs/python/config/appconfig#Skipping_Files)

编辑：

要更清楚。默认情况下——`index.yaml`文件不包含在上传中。下载文件的唯一方法是首先对我建议的文件`index.yaml`进行更改。`app.yaml`然后，再次上传应用程序。无法下载尚未上传的文件。

# r - How to see if the addition of an interaction term affects the dependent variable?

> ID：11978540
> 
> 赞同：0
> 
> 时间：2012-08-15T23:05:04.717
> 
> 标签：r, variables, regression, interaction, term

I have a model of a few independent variables and one dependent one. I need to know how can I see if the addition of the interaction terms of two independent variable affect the dependent variable. I will also need to know how to put the interaction term in the model and how to decide if it actually affects it or not. Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:32:47.047

你应该看看[交叉验证](https://stats.stackexchange.com/)

他们已经回答了很多这样的问题。

但很快：

假设你有 6 个自变量 x1,x2,...,x6

您认为所有 6 个独立变量都对因变量 y 产生影响。您对两个因变量（例如 x1 和 x2）之间的交互感兴趣。

运行一个有交互项的模型，一个没有交互项的模型。没有交互的模型：

```
lm1=lm(y~x1+x2+x3+x4+x5+x6) 
```

然后使用交互项运行模型

```
lm2=m(y~x1+x2+x3+x4+x5+x6 + x1:x2) 
```

测试以查看较大的模型是否显着更好地拟合。

```
anova(lm1,lm2) 
```

这给出了类似的东西：

```
Model 1: y ~ x1 + x2 + x3 ... 
Model 2: y ~ x1 + x2 + x3 + ... x1:x2
  Res.Df    RSS Df Sum of Sq      F    Pr(>F)    
1     96 235.79                                  
2     95 118.52  1    117.28 94.007 7.384e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 
```

所以 F 大于 2 我们可以拒绝不存在以 x1、x2 和 x3 的影响为条件的交互作用的零值。

# dart - 将字符串转换为原始字符串

> ID：11978549
> 
> 赞同：2
> 
> 时间：2012-08-15T23:06:13.750
> 
> 标签：dart

这很容易，所以声明一个原始字符串

```
String raw = @'\"Hello\"'; 
```

但是如何将现有字符串转换为原始字符串？
这可以与文件读取或 ajax 调用一起使用：我想将文件作为原始字符串读取，但该`readAsText`方法给了我一个非原始字符串。
我试过这样的事情：

```
String notRaw = '\"Hello\"';
String raw = @raw; 
```

但不编译。我怎样才能做到这一点？

编辑：我需要逐字符读取字符串。所以我不想把 \" 读成一个字符 " 而是读成两个字符 \ 和 "

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:20:23.550

如果您想在不解释转义字符的情况下读取文件，那么您需要[`readAsBytes`](http://api.dartlang.org/docs/continuous/dart_io/File.html#readAsBytes)，它将为您提供一个整数字符列表。然后，您可以检测反斜杠并引用为：

```
final int backSlash = @'\'.charCodeAt(0); 
final int quote = @'"'.charCodeAt(0); 
```

然后将所需的子字符串传递给字符串构造函数：

```
String goodString = new String.fromCharCodes(byteList.getRange(start, end)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:25:54.737

原始字符串文字仍然是字符串。唯一的区别是原始文字中的所有内容都按原样接受，即没有转义序列。

例如，在普通（非原始）字符串中，字面量`'a\nb'`表示字母“a”、换行符、字母“b”；在原始字符串文字中，它表示字母“a”、反斜杠、字母“n”、字母“b”。

# xml - 从 Windows 8 应用商店检索应用数据

> ID：11978554
> 
> 赞同：3
> 
> 时间：2012-08-15T23:06:54.320
> 
> 标签：xml, windows-8, wireshark

我正在尝试获取 Windows 8 上当前可用的应用程序的应用程序数据。我使用 WireShark 监控网络，同时访问商店无济于事。我已设法找到图像数据，但似乎无法编辑链接以获取应用数据网页。

以下是两个不同应用程序的应用程序磁贴和屏幕截图的链接：

[http://wscont1.apps.microsoft.com/winstore//1x/6d5111a9-85db-46c7-ad1f-f5044684bb77/Icon.6690.png](http://wscont1.apps.microsoft.com/winstore//1x/6d5111a9-85db-46c7-ad1f-f5044684bb77/Icon.6690.png)

[http://wscont1.apps.microsoft.com/winstore//1x/2b74bf93-4a97-4696-b4ae-437e8cafe7b6/Screenshot.3261.10913.png](http://wscont1.apps.microsoft.com/winstore//1x/2b74bf93-4a97-4696-b4ae-437e8cafe7b6/Screenshot.3261.10913.png)

我正在寻找一个包含 XML 格式的应用数据的网页，类似于 Windows Phone 7 应用的网页：

[http://www.windowsphone.com/en-GB/apps/3a9b71b7-959c-4253-8770-1ca203d4768f](http://www.windowsphone.com/en-GB/apps/3a9b71b7-959c-4253-8770-1ca203d4768f)

有人可以帮我找出其余数据在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T20:50:21.013

Windows 应用商店的预览版是可用的，但是您需要知道应用程序的 ID，因为无法搜索它。

例子：

> [http://apps.microsoft.com/webpdp/en-us/app/9c10bc10-75bf-41e3-a26a-01aba908af85](http://apps.microsoft.com/webpdp/en-us/app/9c10bc10-75bf-41e3-a26a-01aba908af85)

您可以在没有 Wireshark 的情况下获取此 ID，只需使用 Store App 浏览到 App，然后打开 Charms ( `Win`+ `C`) 并单击*Share*。选择邮件应用程序并复制草稿正文中的链接。

# php - 动态样式表未加载

> ID：11978557
> 
> 赞同：0
> 
> 时间：2012-08-15T23:07:23.563
> 
> 标签：php, wordpress, stylesheet

我正在使用一个使用 php 文件作为样式表的 wordpress 主题。它在头部链接为：

```
<link rel="stylesheet" href="<?php echo get_stylesheet_directory_uri(); ?>/user.php" type="text/css"> 
```

首先我遇到了一个警告，上面写着

> 资源解释为样式表，但使用 mime 类型文本 html 传输。

我设法通过关注@F 摆脱了这条消息。Calderan 关于同一主题的说明，但样式表仍然无法正常工作。

user.php 文件顶部的代码是：

```
<?php
/*
 *  User custom styles
 */

define( 'WP_USE_THEMES', false );
require_once('../../../wp-load.php');
header("Content-type: text/css"); 
?> 
```

该文件包含一些基本规则

```
.project-view header a {
background-color: <?php echo get_theme_option('background_color'); ?>;
} 
```

通过 wordpress 管理面板进行设置。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:15:22.477

您可能想尝试将标头信息放在之前，因为当您回显时，它会自动将标头信息作为 text/html 发送：

```
<?php
header("Content-type: text/css"); 
/*
 *  User custom styles
 */

define( 'WP_USE_THEMES', false );
require_once('../../../wp-load.php');
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T23:26:20.907

在您的 user.php 样式表文件的顶部添加以下行：

`<?php header("Content-type: text/css"); ?>`

# c# - Bind a object in mainwindow

> ID：11978558
> 
> 赞同：0
> 
> 时间：2012-08-15T23:07:40.560
> 
> 标签：c#, wpf, xaml, data-binding

Sry fot the title, if you have a better please edit.

I have a working code if I use a object create in wpf in resources like this:

```
<local:PersonView x:Key="Persons"/> 
```

But I want to use a object created in mainwindow, here is the working code:

```
 <Grid>
        <Grid.Resources>
            <local:PersonView x:Key="Persons"/>
            <CollectionViewSource x:Key="ViewPersons" Source="{Binding Source={StaticResource Persons}, Path=Persons}">
                <CollectionViewSource.GroupDescriptions>
                    <PropertyGroupDescription PropertyName="Name"/>
                </CollectionViewSource.GroupDescriptions>
            </CollectionViewSource>
        </Grid.Resources>
        <ListView ItemsSource="{Binding Source={StaticResource ViewPersons}}">
            <ListView.View>
                <GridView>
                    <GridViewColumn Width="100" Header="Name" DisplayMemberBinding="{Binding Name}"/>
                </GridView>
            </ListView.View>
        </ListView>
    </Grid> 
```

The classes I use:

```
 public class Person
    {
        public string Name { get; set; }
    }

    public class PersonView
    {
        public ObservableCollection<Person> Persons { get; set; }

        public PersonView()
        {
            Persons = new ObservableCollection<Person>();
            Persons.Add(new Person() { Name = "Luis" });
            Persons.Add(new Person() { Name = "Gusth" });
        }
    } 
```

This code work, but I want to bind the CollectionViewSource to object created in mainwindow:

```
 public partial class MainWindow : Window
    {
        public PersonView BindThis { get; set; }

        public MainWindow()
        {
            InitializeComponent();

            BindThis = new PersonView();
        }
    } 
```

I try this but dont work:

```
<CollectionViewSource x:Key="ViewPersons" Source="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=BindThis}">
                <CollectionViewSource.GroupDescriptions>
                    <PropertyGroupDescription PropertyName="Name"/>
                </CollectionViewSource.GroupDescriptions>
            </CollectionViewSource> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:39:08.167

抱歉，我花了很长时间试图解决这个问题。但现在我让它工作了。这个绑定的东西还是让我很困惑。希望它可以帮助某人。

修复：

```
public class PersonView : ObservableCollection<Person>
{
    public PersonView()
    {
        Add(new Person() { Name = "Luis" });
        Add(new Person() { Name = "Gusth" });
    }
} 
```

# ruby-on-rails - How to call a non action method by clicking a button in Rails

> ID：11978559
> 
> 赞同：0
> 
> 时间：2012-08-15T23:07:46.243
> 
> 标签：ruby-on-rails

Forgive me if this is a very newby question.

how can i call a method (sharing an object on facebook) when user clicked on the share button in the view.

I can do the share/facebook parts, i just don't know how to call a method from the model when the user clicks on a button

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:34:17.540

根据您的具体需求，我看到了两个可能的答案。

*   如果要在为对象创建的列之外向模型添加方法，可以在 model.rb 文件中执行此操作：

模型.rb

```
def name_twice
    "#{self.name}#{self.name}"
end 
```

然后，您可以使用模型的实例来调用它：“@model.name_twice”。

*   如果你想在控制器中添加另一个路由方法，你可以在你的 models_controller 文件中定义它：

models_controller.rb

```
def approve
    @model = Model.find_by_id(params[:model_id])
    model.toggle!(:approved)
    redirect_to @model
end 
```

为了使新的控制器功能起作用，您必须将其添加到路由文件中：

路线.rb

```
resources :models do
   get 'approve', :on => :member 
end 
```

希望这可能会有所帮助。这些示例应该让您了解如何将其他方法/操作添加到模型/控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:24:52.813

my_controller.rb

```
def do_something
 ...
end 
```

路线.rb

```
get "/something" => "my_controller#do_something", :as => :do_something
#you can also use post, put, delete or match instead of get 
```

看法

```
<%= link_to "call do something", do_something_path %> 
```

对于帖子等...

```
<%= link_to "call do something", do_something_path, method: :post %> 
```

# javascript - jslint.com | 不识别本地存储

> ID：11978566
> 
> 赞同：6
> 
> 时间：2012-08-15T23:08:22.357
> 
> 标签：javascript, jslint

得到错误：

```
'localStorage' was used before it was defined. 
```

我需要做什么来解决这个问题？

`localStorage`在所有现代浏览器上都可用，据我所知不需要定义。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-15T23:16:42.607

任何您希望显示为 jslint 定义的全局变量都可以在全局变量的注释中定义。例如：

```
/*global localStorage: false, console: false, $: false */ 
```

这将使 localStorage、console 和 $ (jQuery) 不会触发该警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T23:10:25.740

它不知道如何使用代码。您需要设置浏览器选项。请注意，这是 jshint.com 中的默认值，但不是 jslint.com

# sql - Modifying a view to modify a base relation to which I don't have permissions

> ID：11978568
> 
> 赞同：0
> 
> 时间：2012-08-15T23:08:38.467
> 
> 标签：sql

Let's say I have a permissions to update a view, where the view is:

`create view v as select * from Student where major like '%Engineering%'`.

I don't have permissions to modify or view any student whose major does not contain the word "Engineering." Should I be allowed to insert into this view even if the major of the student I'm inserting is `'Biology'`? Would the view propagate to the base relation?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:54:12.820

It depends on the database engine and how the view was created.

Your original view definition will allow Oracle and SqlServer users to insert a view row that the user cannot see, and or update a view row such that a row can no longer be seen.

But you can add the WITH CHECK OPTION to the view in Oracle and SqlServer to prevent users from inserting or updating a view row such that the result is not visible:

```
create view v as select * from Student where major like '%Engineering%' with check option; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:20:25.487

I've just tried it on SQL Server 2008 - the inserted row does propagate to the underlying table. Obviously you won't be able to see your new row when selecting from your view though.

# java - Java String.getBytes("UTF-8") 是否保留词典顺序？

> ID：11978569
> 
> 赞同：4
> 
> 时间：2012-08-15T23:08:48.410
> 
> 标签：java, sorting, utf-8, arrays, lexicographic

如果我有一个 Java Strings 的字典排序列表`[s1,s2,s3,s4, ...., sn]`，然后使用 UTF-8 编码将每个 String 转换为一个字节数组，那么字节数组`bx = sx.getBytes("UTF-8")`列表是否`[b1,b2,b3,...bn]`也是字典排序的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T23:51:11.737

**是的。**根据[RFC 3239](http://www.rfc-editor.org/rfc/rfc3629.txt)：

> UTF-8 字符串的字节值字典排序顺序与按字符编号排序时相同。当然，这是有限的兴趣，因为基于字符数的排序顺序在文化上几乎从不有效。

正如 Ian Roberts 指出的那样，这适用于“*真正*的 UTF-8（例如`String.getBytes`会给你）”，但要注意[`DataInputStream`'s fake UTF-8](http://docs.oracle.com/javase/6/docs/api/java/io/DataInput.html#modified-utf-8)，它将在 [U+000001] 和 [U 之后排序 [U+000000] +00F000] 在 [U+10FFFF] 之后。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-15T23:13:41.500

您会在给定的顺序中获得对象 X 的列表/数组。

您创建一个新的列表/数组 Y 的此类对象，应用一个方法。

Y 将具有您创建它的顺序（通常您将保持 X 顺序）。不会发生重新排序。

此外， byte[] 的字典顺序是没有意义的。

# javascript - Deploying MVC 3 application to URL Folder has corrupted javascript and content path

> ID：11978573
> 
> 赞同：0
> 
> 时间：2012-08-15T23:09:59.557
> 
> 标签：javascript, asp.net-mvc, deployment, asp.net-mvc-routing

I have created a mvc3 application which work fine locally. I work for a department where all websites sits under single url. when i deployed my website to test environment than page are coming up but all java script and content (images,css) folder path is not right.

I work for a department where all websites sits under single url eg [https://abcd.test.hosts.network/application1](https://abcd.test.hosts.network/application1) ,https://abcd.test.hosts.network/application2

When i check location of images it shows following path [http://abcd.test.hosts.network/Content/Images/Master/masterBannerLeft5.jpg](http://abcd.test.hosts.network/Content/Images/Master/masterBannerLeft5.jpg)

What should i do or how i should deploy my application to fix the problem of java script and content folder.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:24:29.450

您是否使用以下内容来引用内容文件：

```
<link href="@Url.Content("~/content/css/normalize.css")" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="@Url.Content("~/content/js/jquery.js")"></script> 
```

而不是：

```
<link href="/content/css/normalize.css" rel="stylesheet" type="text/css" /> 
```

有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.content.aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.content.aspx)，它基本上解决了您的应用程序中的路径。

# search - jqgrid - 使用带有 dataUrl 的 searchoptions 时未正确设置初始过滤器值

> ID：11978576
> 
> 赞同：2
> 
> 时间：2012-08-15T23:10:12.860
> 
> 标签：search, jqgrid, data-url

我认为这是 jqGrid 中的一个错误（我使用的是 4.4.0 版）。在我的 colModel 中，这很好用：

```
stype:'select', searchoptions: {sopt: ['eq','ne'], value:"Red:Red;Green:Green;Blue:Blue"} 
```

但这不会：

```
stype:'select', searchoptions: {sopt: ['eq','ne'], dataUrl:'rest/selectcolors'}; 
```

dataUrl 返回的位置

```
<option value='Red'>Red</option><option value='Green'>Green</option><option value='Blue'>Blue</option></select> 
```

颜色在组合框中显示正常，默认值为“红色”，但过滤器未正确初始化，除非用户通过选择“绿色”或“蓝色”更改组合框过滤器（然后可能返回并选择“红色” ）。如果用户尝试在不首先更改组合框值的情况下进行过滤，则找不到匹配项。此问题在初次使用过滤器对话框时和重置过滤器对话框后出现，因此对用户来说非常混乱。

有谁知道解决方法/解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-08T12:03:46.007

乍一看，您返回的 dataurl 没有

```
<select> 
```

这可能是一个错误

但是，我也有这个问题！但我没有通过在网上搜索找到任何解决方案。我通过一个技巧临时解决了这个问题我添加了一个值= -1的选项和文本“请选择”然后在更改事件中我删除了这个选项

```
searchoptions: {sopt: ['eq', 'ne'], dataUrl:'yoururl',              
                dataEvents:[{ type: 'change',
                        fn: function(e) 
                            {                    
                                $('td.data').find('option[value=-1]').remove();                                 
                            }                                
                }]}, 
```

但问题仍然存在。如果用户不更改组合框并选择“请选择”选项，他将看到一个错误。

我在我的 php url 中使用以下代码

```
echo "<select>";    
echo "<option value='-1'>please select</option>";     
while($row = pg_fetch_assoc($res)) 
{                        
    echo "<option value='".$row['cid']."' >".$row['cname']."</option>";                    
}    
echo"</select>"; 
```

您可以使用这样的样式并在更改选择元素后将其删除

> 样式='字体样式：斜体；颜色：灰色；宽度：100px' 数据本机菜单 ='假'

# visual-studio-2012 - 如何从 TFS Scrum 2.0 从 Preview 4 更新到最终 RTM？

> ID：11978579
> 
> 赞同：1
> 
> 时间：2012-08-15T23:10:49.797
> 
> 标签：visual-studio-2012, tfs, scrum

我有一个使用 VS2012 RC 和“Microsoft Visual Studio Scrum 2.0 - Preview 4”流程模板构建的 TFS 2012 项目。

今天发布了 TFS 和 VS 2012 的 RTM。我将 TFS 2012 和 VS 2012 从 RC 升级到 RTM 没有任何问题。

不出所料，如果我今天要创建一个新项目，我可以看到模板不再处于预览状态，而是已通过 RTM 完成。

1) Preview 4 和最终版本之间到底有什么变化？我在任何地方都找不到发行说明。

2) 如何将我现有的项目从 Preview 4 更新到最终版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T23:33:33.357

1) 我们没有对模板进行大量更改 - 如果有的话。对模板的任何更改都只是小错误修复级别。

2) 我们没有办法将您的模板从一个版本升级到另一个版本。这是我们之前听说过的一个请求，它在我们的积压工作中。

埃瓦尔德霍夫曼

TFS 项目经理

# .htaccess - 在 .htaccess 中重写以隐藏 url 扩展不起作用

> ID：11978580
> 
> 赞同：0
> 
> 时间：2012-08-15T23:11:06.967
> 
> 标签：.htaccess, url

只是无法摆脱我的网址扩展。

我正在构建一个静态站点，因此所有内容都是 HTML 格式，并且文件具有 .html 扩展名。我想对用户隐藏 .html 扩展名，这样我的网址就会显示为 websitename.com/about

我修改了托管我的网站的 .htaccess 文件，现在看起来像这样

```
# -FrontPage-

IndexIgnore .htaccess */.??* *~ *# */HEADER* */README* */_vti*

<Limit GET POST>
order deny,allow
deny from all
allow from all
</Limit>
<Limit PUT DELETE>
order deny,allow
deny from all
</Limit>
AuthName boldfacedesign.co.uk
AuthUserFile /home/boldface/public_html/_vti_pvt/service.pwd
AuthGroupFile /home/boldface/public_html/_vti_pvt/service.grp

RewriteBase /
RewriteEngine on
RewriteCond %{RQUEST_FILENAME} !-d
RewriteCond %{RQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1html [L,QSA] 
```

目前这只是行不通。

如您所见，该文件位于 public_html 文件夹中，这是正确的位置吗？或者我还需要做些什么来使重写规则生效？还是我只需要耐心等待一天让更改生效？

我已经在谷歌上搜索了几个小时，但我一无所获。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:26:39.607

不确定这些是拼写错误还是什么，但您的重写规则应该看起来更像：

```
RewriteBase /
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.html -f
RewriteRule ^(.*)$ $1.html [L,QSA] 
```

或者如果你有斜杠，最后一行应该是：

```
RewriteRule ^(.*?)/?$ $1.html [L,QSA] 
```

# java - 具有多个可点击区域/表面/区域的图像

> ID：11978581
> 
> 赞同：1
> 
> 时间：2012-08-15T23:11:16.380
> 
> 标签：java, android, xml, image, graphics

我想在 android 屏幕上有一个图像，可以点击图像的不同部分。我的意思是，如果它是 3 个圆圈的图像，我希望能够单击每个圆圈，

然后我可以为每个可点击的圆圈添加不同的功能。对于下图中的示例，我希望能够单击每种不同的颜色。是否有可能拥有触摸式监听器并为您提供颜色？它可以是图像还是必须用 Java 或 XML 绘制？

![在此处输入图像描述](../Images/5a66c01a7348e4c2dd1cbae34e5d8a8f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T02:07:20.077

我发现了一个非常好的小部件，可以帮助您使任何图像多次点击。他们对如何使用他们的小部件也有一些很好的说明。

该小部件具有与 html 中的图像映射类似的方法。这个小部件的好处是图像可以缩放，并且不会丢失与特定点击相关的坐标或区域。

[这是](http://catchthecows.com/?p=113)他们网站的链接。制作小部件的人显然有类似的问题并想出了这个小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-14T13:07:28.637

另一种解决方案是

*   创建一个包含引用的 png 文件的 ImageView
*   使整个 ImageView 可点击
*   将 OnTouchListener 设置为覆盖 onTouch 方法的 ImageView
*   检查触摸位置图像像素的颜色

这通常是通过每个区域使用一种颜色的不可见蒙版图像来完成的（请参阅流行的[详细教程](https://blahti.wordpress.com/2012/06/26/images-with-clickable-areas/)），但这里的图像本身对于每个区域都有不同的颜色，这使得它更有趣。

# c# - Infragistics WebDataGrid 复选框和隐藏列问题

> ID：11978583
> 
> 赞同：0
> 
> 时间：2012-08-15T23:11:43.863
> 
> 标签：c#, asp.net, infragistics, webdatagrid

我正在尝试隐藏“键”或 [0] 列。我还尝试在下面的代码中设置最终用户可以单击/取消单击的复选框。默认情况下，我将复选框设置为未选中状态。

这段代码`dgvPunchs.Columns[0].Hidden = true;`是我发现如何隐藏列的方法，但它会因以下错误而出错。

“你调用的对象是空的。”

当前也显示复选框，但最终用户无法单击它们。我很困惑。请帮忙！:)

```
protected void GenerateSalaryPunchesTable()
        {
            this.dgvPunchs.Rows.Clear();

            string[] DateRange = this.cboPayPeriods.SelectedItem.Text.ToString().Replace(" ", "").Split('-');

            DataTable pDates = new DataTable();

            pDates.Columns.Add("Key");
            pDates.Columns.Add("Date", System.Type.GetType("System.DateTime")); // Date Cell
            pDates.Columns.Add("Worked", System.Type.GetType("System.Boolean")); //Worked CB
            pDates.Columns.Add("Vaction", System.Type.GetType("System.Boolean")); //Vacation CB
            pDates.Columns.Add("Sick", System.Type.GetType("System.Boolean")); //Sick CB
            pDates.Columns.Add("Holiday", System.Type.GetType("System.Boolean")); //Holiday CB
            pDates.Columns.Add("Error", System.Type.GetType("System.String")); //Error

            foreach (DataColumn col in pDates.Columns)
            {
                col.ReadOnly = false;
            }

            pDates.Columns["Key"].ColumnMapping = MappingType.Hidden;

            while (Convert.ToDateTime(DateRange[0]) <= Convert.ToDateTime(DateRange[1]))
            {
                if (Convert.ToDateTime(DateRange[0]).DayOfWeek != DayOfWeek.Saturday & Convert.ToDateTime(DateRange[0]).DayOfWeek != DayOfWeek.Sunday)
                {

                    DataRow nRow = pDates.NewRow();
                    nRow["Key"] = Convert.ToDateTime(DateRange[0].ToString()).ToShortDateString();
                    nRow["Date"]= Convert.ToDateTime(DateRange[0].ToString()).ToShortDateString();
                    nRow["Worked"] = 0;
                    nRow["Vaction"] = 0;
                    nRow["Sick"] = 0;
                    nRow["Holiday"] = 0;
                    nRow["Error"] = "";

                    pDates.Rows.Add(nRow);

                }

                DateRange[0] = Convert.ToDateTime(DateRange[0]).AddDays(1).ToShortDateString();
            }

            dgvPunchs.DataSource = pDates;
            dgvPunchs.DataBind();
            dgvPunchs.Columns[0].Hidden = true;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T11:00:22.393

您需要在 WebDataGrid 中手动创建列，如果不这样做，只需检查 columns.count，它将 = 0。
因此，您可以在 WebDataGrid 的 init 事件中执行此操作（在设置 WebDataGrid1.datasource 和具有 WebDataGrid1.autogenertecolumns = false）：

```
Infragistics.Web.UI.GridControls.BoundDataField f;    
Infragistics.Web.UI.GridControls.EditingColumnSetting columnSettingReadOnly;

foreach (System.Data.DataColumn c in pDates.Columns)
            {
                    f = new Infragistics.Web.UI.GridControls.BoundDataField(true);
                    f.DataFieldName = c.ColumnName;
                    f.Key = c.ColumnName;
                    f.Header.Text = c.ColumnName;
                    WebDataGrid1.Columns.Add(f);
// In order to set it as readonly:
columnSettingReadOnly = New Infragistics.Web.UI.GridControls.EditingColumnSetting();
                columnSettingReadOnly.ColumnKey = f.Key;
                columnSettingReadOnly.ReadOnly = True;
                WebDataGrid1.Behaviors.EditingCore.Behaviors.CellEditing.ColumnSettings.Add(columnSettingReadOnly);
            } 
```

在上面试试这个，让我们知道。

PS：不确定列显示复选框的问题不允许您检查它...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T21:18:00.193

我必须将所有列的标记添加到 html 端。关闭 AutoGenerateColumns，我打开 EnableAjaxViewState 和 EnableDataViewState 不确定是否需要这些。但是通过将它添加到 HTML 中，我可以调用代码

ig:WebDataGrid ID="dgvPunchs" runat="server" Width="800px" DataKeyFields="Key" AutoGenerateColumns="False" EnableAjaxViewState="True" EnableDataViewState="True" >

```
<Columns>
    <ig:BoundDataField DataFieldName="Key" Key="Key">
        <Header Text="Key" />
    </ig:BoundDataField>
    <ig:BoundDataField DataFieldName="Date" Key="Date">
        <Header Text="Date" />
    </ig:BoundDataField>
    <ig:BoundCheckBoxField DataFieldName="Worked" 
        Key="Worked">
        <Header Text="Worked" />
    </ig:BoundCheckBoxField>
    <ig:BoundCheckBoxField DataFieldName="Vaction" 
        Key="Vaction">
        <Header Text="Vaction" />
    </ig:BoundCheckBoxField>
    <ig:BoundCheckBoxField DataFieldName="Sick" 
        Key="Sick">
        <Header Text="Sick" />
    </ig:BoundCheckBoxField>
    <ig:BoundCheckBoxField DataFieldName="Holiday" 
        Key="Holiday">
        <Header Text="Holiday" />
    </ig:BoundCheckBoxField>
    <ig:BoundDataField DataFieldName="Error" Key="Error">
        <Header Text="Error" />
    </ig:BoundDataField>
</Columns>

<Behaviors>
    <ig:EditingCore>
        <Behaviors>
            <ig:CellEditing>
            </ig:CellEditing>
        </Behaviors>
    </ig:EditingCore>
</Behaviors> 
```

```
dgvPunchs.DataSource = pDates;
dgvPunchs.DataBind();
dgvPunchs.Columns[0].Hidden = true; 
```

# php - 删除 www。和 .com 来自使用正则表达式的字符串

> ID：11978584
> 
> 赞同：-4
> 
> 时间：2012-08-15T23:11:46.190
> 
> 标签：php, regex, string, preg-replace, str-replace

我想删除“www”。和来自这个字符串 'www.example.com' 的 '.com'

我想用正则表达式一步完成，但我仍在学习正则表达式。任何有关标志和语法的帮助和解释都将不胜感激，因此我可以了解它在做什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T23:19:11.643

不要使用正则表达式。有更简单的解决方案可用。

尝试这个：

```
$theString = 'www.stackoverflow.com';
$theName = explode('.', $theString)[1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T23:19:38.283

```
echo preg_replace('#^www\.|\.com$#', '', 'www.example.com'); 
```

从这里开始：[http ://rubular.com/r/MvyPO9ijnQ](http://rubular.com/r/MvyPO9ijnQ)

但是你真的不应该用正则表达式来做这件事，尤其是不要一举一动，不管这意味着什么。

看看： http: [//php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)（我知道你想通过解析 URL 来学习正则表达式，但不要）。

# php - Magento Bundle - 获取选项的属性

> ID：11978585
> 
> 赞同：1
> 
> 时间：2012-08-15T23:11:48.910
> 
> 标签：php, templates, magento, bundle

在 /template/bundle/catalog/product/view/options/type/bundle/option/select.phtml 下的 select.phtml 中，它具有为捆绑产品的选择下拉菜单创建选项的功能。

默认设置`echo $this->getSelectionTitlePrice($_selection, false)`用于 a 下的选项`foreach $_selections as $_selection`

这会产生 [产品选项名称] + [价格差异]

我正在捆绑服装，我想将其更改为该选项的尺寸属性（'pos_sizes'），因为产品名称中没有尺寸，尺寸属性是唯一的区别，不会有一个价格差异。所以我非常想将选项更改为 [POS_SIZES] 属性的下拉选项。

我尝试了多种方法，包括

```
$_option->getAttributeText('pos_sizes')

$attribute=Mage::getModel('catalog/product')->getResource()->getAttribute("pos_sizes") 
```

但是无法显示选项的属性。

select.phtml 顶部的可用变量是

```
<?php $_option      = $this->getOption(); ?>
<?php $_selections  = $_option->getSelections(); ?>
<?php $_default     = $_option->getDefaultSelection(); ?>
<?php list($_defaultQty, $_canChangeQty) = $this->_getDefaultValues(); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T23:37:27.947

我快到了。多玩一点就明白了。我必须先获取 $_selection 的 id，然后从中获取 AttributeText。

```
$bundledsize = Mage::getModel('catalog/product')->load($_selection->getId())->getAttributeText('pos_sizes'); 
echo $bundledsize; 
```

# driver - 虚拟内存系统中的设备驱动程序

> ID：11978587
> 
> 赞同：0
> 
> 时间：2012-08-15T23:12:15.333
> 
> 标签：driver, device, linux-device-driver, virtual-memory, memory-mapping

假设有一个设备使用内存映射 I/O，即有一个特定范围的物理内存分配给这个设备

如果不使用虚拟内存系统，那么通过使用相应物理地址完成的读/写操作来操作设备非常简单

如果有虚拟内存系统呢？

设备驱动程序需要知道分配给该设备的特定物理内存范围，但是如果它应该使用虚拟地址而不是物理地址，它如何访问该地址范围？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T04:52:09.983

在内存映射 IO 设备的情况下，该设备共享的任何物理地址都可以使用 ioremap() API [1] 映射到内核虚拟内存。

因此，在您的情况下，我们可以使用 ioremap() 映射物理地址 0x1234 以获取其内核虚拟地址并开始将数据写入该地址。

[1] [http://lxr.gwbnsh.net.cn/linux/arch/cris/mm/ioremap.c](http://lxr.gwbnsh.net.cn/linux/arch/cris/mm/ioremap.c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:29:16.507

很久没做过了，但我的回忆是，当你映射一块物理内存时，你的用户空间中的地址对应的是那块物理内存。写入用户空间地址就是写入物理内存。

# objective-c - Cocos2D 计分游戏

> ID：11978588
> 
> 赞同：0
> 
> 时间：2012-08-15T23:12:26.277
> 
> 标签：objective-c, ios, xcode, sdk, cocos2d-iphone

> **可能重复：**
> [Cocos2D 中的评分系统](https://stackoverflow.com/questions/11970067/scoring-system-in-cocos2d)

**我从之前提出的一个问题中得到了答复，但我是编码新手，不知道该怎么做。这是回复：**

> **"** @synthesize 一个 int 类型的 "score" 属性和一个 CCLabelTTF 类型的 "scoreLabel" 属性。
> 
> 在 -(void)init 中将你的 score 属性初始化为“0”
> 
> 在第 126 行，将“score”属性增加 1，并将该值设置为 CCLabelTTF。**"**

你能告诉我怎么做吗？请。链接到我的另一篇文章

----- [Cocos2D 中的评分系统](https://stackoverflow.com/questions/11970067/scoring-system-in-cocos2d)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:18:21.333

`score`在接口声明之后在 HelloWorldLayer.h 中创建一个属性，比如

```
@property (nonatomic, retain) int score; 
```

然后在您的 .m 文件中合成它，就在该`@implementation HelloWorldLayer`行之后。

创建设置和获取分数的方法：

```
-(int)getScore {
    return self.score;
}

-(void)setScore:(int)newScore {
    self.score = newScore;
} 
```

在`init`方法中，将属性的值设置为零，

```
if( (self=[super init] )) {
//... other stuff
[self setScore:0]
} 
```

您可以使用 setScore 方法更新分数，但我建议为此使用另一种方法调用 setScore 以便您可以通过单行调用在不同的地方使用它，并进行任何更改，例如在某些情况下分配更多分数，例如两个半秒内的碰撞等..

```
-(void)updateScore:(int)increment {
    int currentScore = [self getScore];
    [self setScore:(currentScore + increment)];
} 
```

同样，对于标签，

```
@property (nonatomic, retain) CCLabelTTF scoreLabel; // in header 
```

和

```
@synthesize scoreLabel; // in .m file 
```

同样，在您的 init 方法中，使用位置、层和初始文本等初始化[标签。然后您可以在 updateScore 方法中更新该文本。](http://www.cocos2d-iphone.org/api-ref/0.99.5/interface_c_c_label_t_t_f.html)

```
-(void)updateScore:(int)increment {
    int currentScore = [self getScore];
    [self setScore:(currentScore + increment)];

    [scoreLabel setString:[NSString stringWithFormat:@"Score: %i", [self getScore]]];
} 
```

确保在继续之前通读本[教程，以避免对常见任务造成混淆。](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html#//apple_ref/doc/uid/TP30001163-CH1-SW2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T00:10:20.587

当您合成一个私有变量（其他类看不到它）时，您允许其他类查看和/或修改该变量的值。

首先，您要创建变量：

```
NSMutableArray *_targets;
NSMutableArray *_projectiles;

int _score;
CCLabelTTF *_scoreLabel; 
```

然后在您的 init 方法中将其设置`_score`为`0`：

```
-(id) init
{
    if( (self=[super init] )) {
        [self schedule:@selector(update:)];
        _score = 0; 
```

然后增加（加 1）您的`_score`变量并将您的字符串（文本内容）设置`_scoreLabel`为该值。

```
 if (CGRectIntersectsRect(projectileRect, targetRect)) {
            [targetsToDelete addObject:target];     
            _score++;
            [_scoreLabel setString:[NSString stringWithFormat:@"%d", _score]];                    
        } 
```

该行`[_scoreLabel setString:[NSString stringWithFormat:@"%d", _score]];`是一种将整数转换为`_score`字符串 ( `NSString`) 的方法。这是一种旧的 C 方法，这`%d`意味着无论将要出现的内容都应该显示为整数，而不是浮点数（有小数点）。

看起来您还需要“实例化”您的标签并将其作为子级添加到图层中。实例化只是创建某事物实例的一个花哨术语。将“类”视为椅子的蓝图，将“实例”视为根据该蓝图创建的椅子。一旦你创建了椅子（一个实例），你可以修改它（画它，添加/删除腿等）。

因此，要实例化您的标签并将其添加到图层（本身）：

```
-(id) init
{
    if( (self=[super init] )) {
        [self schedule:@selector(update:)];
        _score = 0;

        //Create label
        _scoreLabel = [CCLabelTTF labelWithString:@"0" fontName:@"Marker Felt" fontSize:16];

        //Add it to a layer (itself)
        [self addChild:_scoreLabel]; 
```

# objective-c - 创建框架

> ID：11978589
> 
> 赞同：1
> 
> 时间：2012-08-15T23:12:30.530
> 
> 标签：objective-c, ios, xcode, frameworks, static-libraries

我正在尝试创建一个 iOS 框架（或静态库）供我们的客户使用。我想使用此处找到的框架工具创建一个框架：[https ://github.com/kstenerud/iOS-Universal-Framework](https://github.com/kstenerud/iOS-Universal-Framework)

它工作得非常好，但我们的框架/静态库引用了我们希望包含在框架中的其他静态库。基本上我们希望将 1 个文件拖放到客户的项目中，他们将能够非常轻松地使用所有内容。

如果不向他们发送我们的框架/静态库和我们引用的所有静态库，有没有办法将它包含在我们的框架中？此外，如果我们的客户引用相同的库，我们如何处理重复项？

提前致谢，如果有更简单的方法，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T16:52:08.163

没有办法包含这个...我们必须向他们发送静态库的副本或让他们包含自己的

# javascript - JavaScript 中的布尔对象是什么？

> ID：11978593
> 
> 赞同：2
> 
> 时间：2012-08-15T23:13:04.187
> 
> 标签：javascript, boolean

JavaScript 中的布尔对象是什么？JavaScript中的“一切都是对象”是真的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T23:14:33.047

[基元](http://es5.github.com/#x4.3.2)不是对象，其他一切（[任何标准对象](http://es5.github.com/#x15-toc)）都是对象。然而，大多数原语（除了`undefined`and之外的所有`null`）都有一个对象对应物。

所以

```
var a = false; 
```

不是一个对象，而是

```
var b = new Boolean(false); 
```

是。

由于两个对象仅在引用同一个对象时才相等，因此最好避免使用原语的对象版本：

```
a === false; // is true
b === false // is false   <- this is a problem 
```

或者特别是对于布尔对象，将它们与任何布尔运算符一起使用会产生意想不到的结果。对象引用的计算结果始终为`true`，因此 using 的结果`b`将是：

```
// remember
// a is the primitive value false
// b is a boolean object with value false

// NOT
!a // true
// but
!b // false

// AND
a && true // false
// but
b && true // true 
```

无论如何，使用这些对象版本并没有真正的优势，因为当您尝试调用它们的方法时，JavaScript 会[自动装箱原语。](http://en.wikipedia.org/wiki/Autoboxing#Autoboxing)这就是为什么调用如下：

```
var s = "HI THERE!".toLowerCase();
s = s.substring(0,2); 
```

是可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T23:16:48.113

布尔值、数字和字符串是类对象类型——它们有方法，但它们是不可变的。

# android - 我想在 android 联系人中填充新联系人或现有联系人的地址

> ID：11978594
> 
> 赞同：0
> 
> 时间：2012-08-15T23:13:10.940
> 
> 标签：android, location, contacts, street-address

根据我的要求，我长按任何位置地址并尝试将其添加到新联系人或现有联系人中，我应该能够在地址字段中显示位置地址。我尝试了以下解决方案，但没有奏效。我需要在街道、城市、邮政编码和州档案中填写地址。

尝试使用 Intent 和 putparceableArrayExtra，但无论哪种方式都不起作用。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T19:47:51.093

能够让它发挥作用。实际上 putParceableArrayExtra(InsertType, ) 工作正常。我的另一个应用程序没有处理传递给它的新附加内容。我能够在应用程序中实现解析，现在我可以在我的联系人中看到所有内容。

稍后我将使用帮助我使用 parceablearraylistextra 的 stackoverflow 链接更新帖子（我必须找到它）。

# objective-c - 拆分/复制 Xcode 项目的最佳方法

> ID：11978595
> 
> 赞同：0
> 
> 时间：2012-08-15T23:13:32.733
> 
> 标签：objective-c, xcode

拆分或复制 Xcode 项目的最佳方法是什么？

这是我的情况。我有一个相当大的工作区，里面有很多项目。其中一个项目变得有点太大了，我想以尽可能少的破坏性方式拆分它。我的想法是复制该项目，使其在工作区中出现两次。然后我可以重命名其中一个项目并从每个项目中删除我不需要的东西。在 Xcode 中是否有一种干净的方法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T15:54:11.993

我发现最好的方法是复制我想要复制的文件夹，重命名项目，然后将项目添加到工作区。然后我可以根据需要删除东西。

# android - Android 设备选择器在目标列中显示红色 X

> ID：11978600
> 
> 赞同：15
> 
> 时间：2012-08-15T23:14:07.553
> 
> 标签：android, android-actionbar, actionbarsherlock

我最近构建了一个 minSdkVersion 为 7 和 targetSdkVersion 为 10 的 Android 应用程序。我现在正在使应用程序平板电脑兼容并添加操作栏。因此，我将 targetSdkVersion 更新为 15，并在我的项目属性中将我的项目构建目标移至 Android 4.0.3，API 15。我还仔细检查了我的 Java 编译器是 1.6。

在不对代码进行任何其他更改的情况下，我尝试运行我的应用程序并在 Android 设备选择器中，我的两个物理设备（版本 2.3.4 和 3.1）在目标列中都有一个红色 X，而不是绿色复选标记.

我还在使用 ActionbarCompat 示例应用程序和 ActionbarSherlock 的示例应用程序，当我运行其中一个应用程序时，我的两台设备都会显示一个绿色复选标记。这两个示例应用程序的项目构建目标都设置为 4.0.3，并且与我的应用程序中的 sdkVersion 设置相同。据我所知，我的应用程序的设置与其他应用程序相同。为什么我的应用程序在目标列中我的设备版本旁边有一个红色的 X。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-07T23:41:21.263

在 Eclipse 中，更改 minSdkVersion 和 targetSdkVersion 后

如果“Android 设备选择器”仍然在设备上显示红色 X（应该是兼容的）。尝试：

*   打开“调试配置”或“运行配置”对话框
*   删除“Android应用程序”下的所有配置
*   重试右键单击项目 > 调试为 > Android 应用程序

所有兼容的设备现在应该变成绿色复选标记。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T18:40:40.817

这是因为您的设备运行的是 Android 版本 2.3.4 和 3.1，因此您至少必须有 minSdkVersion="10"。将 minSdkVersion 设置为 10 后，您将再次获得绿色复选标记。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-23T21:32:49.750

**AndroidManifest.xml：**

```
<uses-sdk android:minSdkVersion="7" android:targetSdkVersion="15" /> 
```

如果您的清单具有比您的设备更高的“targetSdkVersion”，它将在固件旁边显示“红十字（X）”。

如果您的 minSdkVersion 高于您的设备，它甚至不会运行

**更新：**

我测试了示例项目，并得到了与我从一开始就澄清的答案相同的结果。 [（运行与问题相同规格的项目的图像）](http://dl.dropbox.com/u/4962229/redCrossAndroid.png)

# apache2 - 使用 apache2 和 jetty 监听 2 个 IP 别名？

> ID：11978601
> 
> 赞同：0
> 
> 时间：2012-08-15T23:14:19.380
> 
> 标签：apache2, jetty

我的 ubuntu 12.04 服务器配置了两个 IP 别名：eth0:0 xxx.xxx.xxx.138 和 eth0:1 xxx.xxx.xxx.145 我想通过两个不同的应用程序为这两个 IP 地址提供服务：jetty web application在 eth0:0 上收听 apache2 网站上的 eth0:1 这可能吗？如果我在 eth0:1 地址上启动码头，只要 apache2 停止，它就可以正常工作。当我启动 apache 2 时，我得到以下信息：

```
 * Starting web server apache2                                              

    apache2: Could not reliably determine the server's fully qualified domain name, using xxx.xxx.xxx.138 for ServerName
(98)Address already in use: make_sock: could not bind to address xxx.xxx.xxx.145:80
no listening sockets available, shutting down
Unable to open logs
Action 'start' failed.
The Apache error log may have more information. 
```

Apache2 配置是标准配置，监听指令包含 xxx.xxx.xxx.145：

端口.conf：

```
#NameVirtualHost xxx.xxx.xxx.145:80
Listen xxx.xxx.xxx.145:80

<IfModule mod_ssl.c>
    # If you add NameVirtualHost *:443 here, you will also have to change
    # the VirtualHost statement in /etc/apache2/sites-available/default-ssl
    # to <VirtualHost *:443>
    # Server Name Indication for SSL named virtual hosts is currently not
    # supported by MSIE on Windows XP.
    Listen xxx.xxx.xxx.145:443
</IfModule>

<IfModule mod_gnutls.c>
    Listen xxx.xxx.xxx.145:443
</IfModule> 
```

000-默认

```
<VirtualHost xxx.xxx.xxx.145:80>
        ServerAdmin webmaster@localhost
        ServerName mquagliani
        DocumentRoot /var/www
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
        </Directory>

        ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
        <Directory "/usr/lib/cgi-bin">
                AllowOverride None
                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
                Order allow,deny
                Allow from all
        </Directory>

        ErrorLog ${APACHE_LOG_DIR}/error.log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn

        CustomLog ${APACHE_LOG_DIR}/access.log combined

    Alias /doc/ "/usr/share/doc/"
 <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

</VirtualHost> 
```

在码头方面，我有上下文 mtc.xml 包含

```
<Set name="virtualHosts">
    <Array type="String">
      <Item>www.mindthecheck.com</Item>
      <Item>xxx.xxx.xxx.138</Item>
      <Item>localhost</Item>
      <Item>127.0.0.1</Item>
    </Array>
  </Set> 
```

我哪里错了？我不想让 apache 成为代理，因为这会减慢码头应用程序的速度。我只想从两个不同的 IP 地址监听 jetty 和 apache。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T12:03:41.657

在 jetty.xml 中为连接器设置要监听的 ip，我怀疑你现在正在监听所有接口

# jquery - JQuery Waypoint 滚动停止在页脚

> ID：11978605
> 
> 赞同：2
> 
> 时间：2012-08-15T23:14:36.430
> 
> 标签：jquery, jquery-plugins, jquery-waypoints

我正在使用 JQuery Waypoint 滚动左侧导航。如何在页脚之前停止滚动？

```
<script type="text/javascript">
var $jq = jQuery.noConflict();

$jq(document).ready(function() {

$jq('.top').addClass('hidden');
 $jq.waypoints.settings.scrollThrottle = 30;

$jq("#toc").waypoint(function(event, direction) {
    $jq('.top').toggleClass('hidden', direction === "up");

    if (direction === 'down') {
        var cssObj = {'position' : 'fixed', 'top' : '3px', 'left' : '100px'}
    }
    else {
        var cssObj = {'position' : 'absolute', 'top' : '3px', 'left' : '100px'}
    }
    $jq('#toc').css(cssObj);
},{
    offset: '3'
});

 });
 </script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T23:17:24.590

您可以为页脚设置另一个路径点，其偏移量等于`#toc`元素的高度**加上**任何填充、边框和定位添加。

所以也许是这样的：

```
var toc = $("#toc");
$("footer").waypoint(function(event,direction){
    toc.css({
        position: "absolute",
        bottom: "403px"
    });
},{
    offset: toc.height() + 6
}); 
```

这样，一旦它检测到页脚顶部和页面顶部之间的空间量等于元素的总高度，`#toc`它就会返回`position:absolute`到`bottom`. `403px`调整它以匹配页脚的高度并适应页脚和`#toc`元素之间所需的间距。

[这](http://jsfiddle.net/purmou/wrwkp/)是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-15T06:34:12.047

以下是我使用最新版本的 Waypoint 实现它的方法，包括在您向上滚动时松开元素。

```
$('footer').waypoint({
    handler: function(direction) {
        if (direction == 'down') {
            $moduleTop.css({
                position: "absolute",
                top: $nextModule.offset().top - $moduleTop.outerHeight()
            });
        }
        else if (direction == 'up') {
            $moduleTop.css({
                position: '',
                top: ''
            });
        }
    },
    offset: $moduleTop.height()
}); 
```

# php - 返回不存在的 ID

> ID：11978607
> 
> 赞同：0
> 
> 时间：2012-08-15T23:14:56.400
> 
> 标签：php, mysql

我有一个 ID 列表，我编写了一个 MYSQL 查询来获取有关这些 ID 的信息。

我需要一种方法来确定哪些 ID 不再在数据库中，以便从 ID 列表中删除它们。

有没有一个简单的解决方案来做我现在想不到的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:09:58.137

创建一个附加（临时）表，用 ID 列表填充它，然后执行查询以查找不存在的 ID。例如 -

```
CREATE TEMPORARY TABLE temp(id INT);
INSERT INTO temp VALUES (1), (2), (8), (10);

-- View non existing ID:
SELECT t.id FROM temp t
  LEFT JOIN your_table a 
    ON a.id = t.id
  WHERE a.id IS NULL;

DROP TEMPORARY TABLE IF EXISTS temp; 
```

然后在 php 应用程序中读取此数据集并更新 ID 列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:24:34.183

这是在不知道您的表结构的情况下编写的，因此在我脑海中浮现出一个，但是...

如果您有两个表，ID 和 INFO，例如：

```
ID (IDCOL int, DATEENTERED datetime)
INFO (INFOID int, ID_ID int, ID_NAME varchar(50)) 
```

然后你可以查询

```
SELECT * FROM ID WHERE IDCOL NOT IN (SELECT ID_ID FROM INFO) 
```

这应该返回 ID 中没有相应条目的所有条目。

之后是编写适当的删除语句的情况。

整个事情可以一步完成

```
DELETE FROM ID WHERE IDCOL NOT IN (SELECT ID_ID FROM INFO) 
```

但我通常更喜欢在已定义的事务中进行删除，您可以在其中检查以确保在将更改提交到数据库之前没有搞砸它。

# backbone.js - 使用不同参数多次触发同一事件时出现 Backbone.Marionette Scope 问题

> ID：11978608
> 
> 赞同：1
> 
> 时间：2012-08-15T23:15:06.633
> 
> 标签：backbone.js, triggers, scope, marionette, backbone-events

# 情况

我正在尝试使用模型和集合呈现嵌套数据结构的概述。特别是，我正在加载一个`SubjectsCollection`，其中每个主题都有一些属性，其中一个应该是嵌套的`LessonsCollection`.

我的控制器加载`SubjectsCollection`. 一旦`SubjectsCollection`加载了 ，控制器就会渲染一个`SubjectListView`(a `Marionette.CollectionView`)，`SubjectsCollection`并显示在 a 中`Marionette.Region`。

中的每个`SubjectModel`都`SubjectListView`呈现为`SubjectLayout`(a `Marionette.Layout`)。

一旦`SubjectListView`显示在 中`Marionette.Region`，函数就会循环遍历并在(a ) 上为每个`SubjectLayout`触发一个事件 ( ) ，将作为参数传递给要接收的任何回调。`package-definition:subject:layout:ready``App.vent``Marionette.EventAggregator``SubjectLayout``SubjectLayout`

# 想要的效果

一个被调用的方法`openLessons`对事件做出反应`package-definition:subject:layout:ready`并加载一个`LessonsCollection`. 这应该发生多次（每次`SubjectLayout`渲染一次）。

每个都`LessonsCollection`应该呈现一个`LessonsListView`，并且`LessonsListView`应该显示在它们所属`SubjectLayout`的区域中。`SubjectsCollection`

该`SubjectLayout`实例应该作为参数传递给该`openLessons`方法，因此每个实例都`LessonsListView`可以显示在其对应的分配区域中`SubjectLayout`。

# 编码

这是我到目前为止的代码：

```
var PackageDefinition_Overview_Controller = Controller.extend({

  ...

  Data: {
    packageDefinition: {
      // attributes: {
      //   foo: 'bar',
      //   subjects: [{
      //     attributes: {
      //       baz: 'quux',
      //       lessons: []
      //     }
      //   }]
      // }
    }
  },

  // Initialization
  //---------------
  initialize: function() {

    ...        

    this.bindTo(App.vent, "package-definition:subject:layout:ready", this.openLessons);
  },

  ...

  openSubjects: function(packageDefinitionOverviewLayout) {
    var that = this,
        packageDefinition = packageDefinitionOverviewLayout.model;
        packageDefinition_id = packageDefinition.get('id'),
        subjects = packageDefinition.get('subjects') || new SubjectsCollection(),
        subjectsRegion = packageDefinitionOverviewLayout.subjects;

    ...

      subjects.load(packageDefinition_id);

    ...

    subjects.isLoaded.done(function() {
      packageDefinition.set({
        subjects: subjects
      });
      that.showSubjectListView(subjectsRegion, subjects);
    });

    ... 

  },

  openLessons: function(subjectLayout) {
    var that = this,
        subject = subjectLayout.model;
        subject_id = subject.get('id'),
        lessons = subject.get('lessons') || new LessonsCollection(),
        lessonsRegion = subjectLayout.lessons;

    ...

      lessons.load(subject_id);

    ...

    lessons.isLoaded.done(function() {
      console.log('Data', that.Data);
      subject.set({
        lessons: lessons
      });
      that.showLessonsListView(lessonsRegion, lessons);
    });

    ...

  },

  ...  

  showSubjectListView: function(region, subjects) {
    var subjectsListView = new SubjectsListView(subjects);
    region.show(subjectsListView);

    // Time to load the Lessons
    subjectsLayouts = subjectsListView.children;
    _.each(subjectsLayouts, function(subjectLayout) {
      App.vent.trigger("package-definition:subject:layout:ready", subjectLayout);
    }, this);
  },

  showLessonsListView: function(region, lessons) {
    var lessonsListView = new LessonsListView(lessons);
    region.show(lessonsListView);
  }

}); 
```

# 问题

尽管`package-definition:subject:layout:ready`被触发多次，并且 multiple`LessonsCollection`被加载。只有最后一个`SubjectLayout`收到它的`LessonsListView`.

此外，每个`SubjectsCollection`“课程”属性都包含最后`LessonsCollection`加载的内容。

所以很明显这里有一个范围界定问题。

# 问题

问题是：

1.  为什么所有人`SubjectsCollection`都会用 last 覆盖他们的“课程”属性`LessonsCollection`？
2.  为什么只有最后一个`SubjectLayout`实例收到一个`LessonsListView`？
3.  我该如何解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:04:07.493

# 解决了

好吧，这有点尴尬..原来问题一直是我不小心在全局范围内定义了一些变量，比如这里：

```
var that = this,
  subject = subjectLayout.model; // <-- should've been a comma... *headdesk*
  subject_id = subject.get('id'),
  lessons = subject.get('lessons') || new LessonsCollection(),
  lessonsRegion = subjectLayout.lessons; 
```

# tfs - TFS Pending Change 显示幻象更改

> ID：11978609
> 
> 赞同：0
> 
> 时间：2012-08-15T23:15:15.943
> 
> 标签：tfs

我遇到了一个奇怪的情况。将几个文件添加到 TFS 项目后，它们会显示在源代码管理浏览器中，并带有“编辑”的挂起更改。如果我尝试签入任何挂起的更改，TFS 会通知我没有挂起的更改，但源代码管理浏览器清楚地将它们显示为 Pending Change 作为“编辑”。我已经尝试过命令行和我能想到的任何其他技巧，但都无济于事。

其他任何人都见过这个，如果是这样，你是如何解决的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-20T16:46:33.607

我最近遇到了这个问题，我修复它的方法是通过让 Visual Studio 再次下载相同的项目副本来重新创建幻影文件夹。然后在挂起的更改中，我进行了右键单击/撤消更改，然后从工作区中删除了链接。它再也没有出现过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T21:56:46.770

有两件事可能导致这种情况。

1.  源代码管理资源管理器将显示您在当前工作区中的更改以及其他工作区中未决的更改。源代码管理资源管理器中的项目旁边是否有红色复选标记符号？如果不是，则在另一个工作区中签出此项目。
2.  待定更改窗口可能有一个工作区处于活动状态，而源代码管理资源管理器有另一个工作区处于活动状态。在这种情况下，它们不会为待处理的更改显示相同的视图。两个窗口的顶部都有一个工作区选择器。确保它们在同一个工作区。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T12:20:59.700

您可能已将它们签出，但文件是相同的。

您可以通过将服务器文件与本地工作空间进行比较来验证这一点。

要删除编辑状态，只需运行 'undo pending changes' 。

# php - 为什么getdate不存储在数据库中？

> ID：11978615
> 
> 赞同：1
> 
> 时间：2012-08-15T23:16:08.943
> 
> 标签：php, joomla

这是我的功能和日期

```
$data->datecreated = getdate(); 
```

下面的代码不会保存在数据库中。为什么？请注意，记录被插入，但 datecreated 字段看起来被忽略

```
public function generateCode($characters) {

        //Generate the code
        $possible = '23456789bcdfghjkmnpqrstvwxyz';
        $code = '';
        $i = 0;

        while ($i < $characters) {
            $code .= substr($possible, mt_rand(0, strlen($possible)-1), 1);
            $i++;
        }
        // Get the curent session id of the user        
        $session =  JFactory::getSession();
        $session_id = $session->getId();        

        //Create an stdClass
        $data =new stdClass();
        $data->sessionid = (integer)$session_id;
        $data->captchacode = (string)$code;     
        $data->datecreated = getdate();

        $db = JFactory::getDBO();

        $query = $db->getQuery(true);
        $query->delete($db->nameQuote('#__captchasessions'));
        $query->where($db->nameQuote('sessionid').'='.$db->quote($session_id));
        $db->setQuery($query);
        $db->query();

        $db->insertObject( '#__captchasessions', $data, id );       

        return $code;
    } 
```

这是表的结构

```
delimiter $$

CREATE TABLE `ok6ut_captchasessions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `sessionid` varchar(200) DEFAULT NULL,
  `captchacode` varchar(10) DEFAULT NULL,
  `datecreated` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=26 DEFAULT CHARSET=utf8$$ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T23:19:13.100

`getdate()`如果没有作为参数传入的时间戳，则返回一个包含当前日期详细信息的数组。

我希望您的数据库期望传入格式化的日期，而不是数组 - 如果您可以添加数据库结构，那可能会有所帮助。

编辑添加：

对于日期时间字段，我认为您需要以下内容：

```
$data->datecreated = date("Y-m-d H:i:s"); 
```

# reporting-services - SSRS 2008 - 如何在父组中间添加子组？

> ID：11978622
> 
> 赞同：1
> 
> 时间：2012-08-15T23:17:18.260
> 
> 标签：reporting-services, ssrs-2008

可能我遗漏了一些明显的东西，但我正在尝试在现有行组中创建一个跨四行的子行组，但我希望子组位于父组的第 3 行和第 4 行之间，并且应该只跨度 1 行。

在下图中，红色箭头显示了我要为“部门”创建 1 行（重复）子组的位置。

![在此处输入图像描述](../Images/eab19538f04770e71cf82f34980d154c.png)

最终输出应该是：

```
DESCR
  Headcount by Major
    Department1
    Department2
    .
    .
  Major to Faculty Ratio
DESCR2
  Headcount by Major
    Department3
    Department4
    .
    .
  Major to Faculty Ratio 
```

但是，当我尝试添加子组时（无论我从哪里添加），它都会在第一行创建子组（如下图所示）

![在此处输入图像描述](../Images/7d529261c08eff2845fdba968a890e89.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:04:33.663

您可以右键单击部门组所在的单元格顶部，然后选择插入行 - 外部组，将内部组的位置移动到您想要的位置。

（这并不能完全解决您的问题，但它可以让您将组放在您想要的位置）

# ruby-on-rails - Rails 如何将 ModelHelper 自动加载到 Model 中

> ID：11978625
> 
> 赞同：2
> 
> 时间：2012-08-15T23:17:23.693
> 
> 标签：ruby-on-rails, module, helpers, rails-models

我对 Rails 如何自动将 app/helpers 中的模块加载到模型中感兴趣。

也就是说：当 app/helpers/widget_helper.rb 存在并包含`WidgetHelper`该模块时，该模块会自动加载到 Widget 模型中。

我需要应用程序中的目录，其中包含要包含到模型中的任意代码，并且希望避免必须包含每个单独的模块。我认为模拟这个功能会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T04:48:29.497

仍然不确定 Helpers 是如何加载的，但考虑到 rails ，我花了一些时间找出一个很好的方法来做到这一点`config.after_initialize call`。

假设您想要一个`app/goods`目录，其中包含自动加载的 ModelGoods 命名模块。将以下代码添加到`application.rb`：

```
config.after_initialize do
  Dir["#{Rails.root}/app/goods/*_goods.rb"].each do |file|
    name = File.basename(file, ".rb").humanize.titleize.gsub(" ","")
    name.gsub("Goods","").constantize.send :include, "Goods::#{name}".constantize
  end
end 
```

这将解析`app/goods`子目录中的所有文件，并包含该目录中包含的任何命名模型的模块。

显然，您可以将“商品”替换为您想要的任何内容，但这代表了一种划分代码的好方法，而无需手动包含您创建的每个模块。

# php - 使用 formsubmit 发送 $_POST 变量

> ID：11978629
> 
> 赞同：0
> 
> 时间：2012-08-15T23:17:59.720
> 
> 标签：php, html

我正在尝试设置一个允许对视频文件进行播放和转码的内部网站。我设置了一个文件来跟踪设置。我现在正在做的是设置一个带有编码器选项的下拉框。当用户单击我想更新设置文件时，它会更新为所选内容。理想情况下，我希望该过程不更改网页而只自动更新，这可能是使用 ajax。

我在网络编码方面的经验非常有限。我现在遇到的问题是我下面的代码可以正常工作，但 $EncoderType 变量除外。

当我在周围加上引号时，`$_POST['encoder_Type']`我得到了一个错误：

> 解析错误：语法错误，意外的 '' (T_ENCAPSED_AND_WHITESPACE)，期望标识符 (T_STRING) 或变量 (T_VARIABLE) 或数字 (T_NUM_STRING) 位于 /var/www/index.php 的第 414 行

以下是我尝试过的引用版本。这也是给出错误的行：

> echo $EncoderType = "$_POST['encoder_type']";

```
 echo "<form ";
        echo $EncoderType = $_POST['encoder_type'];         
        echo "action=";                     
        echo exec("sed -i '8 c\EncoderType:$EncoderType:(1-H264 2-WMV8 3-MPEG 4-MPG4v2)' /home/root/settings");
        echo "method='post'>";
        echo '<select name="encoder_type" onChange="this.form.submit()">';
        echo '<option value="1">H264</option>';
        echo '<option value="2">WMV8</option>';
        echo '<option value="3">MPEG2</option>';
        echo '<option value="4">MPG4v2</option>';
        echo '</select>';
     echo '</form>'; 
```

这是我当前的输出：

```
EncoderType::(1-H264 2-WMV8 3-MPEG 4-MPG4v2) 
```

它应该是：

```
EncoderType:1:(1-H264 2-WMV8 3-MPEG 4-MPG4v2) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:24:59.013

您提供的代码非常有限。但试试这个：

```
echo "<form ";
    $EncoderType = (int)$_POST['encoder_type'];         
    echo "action=";                     
    echo exec("sed -i '8 c\EncoderType:".$EncoderType.":(1-H264 2-WMV8 3-MPEG 4-MPG4v2)' /home/root/settings");
    echo "method='post'>";
    echo '<select name="encoder_type" onChange="this.form.submit()">';
    echo '<option value="1">H264</option>';
    echo '<option value="2">WMV8</option>';
    echo '<option value="3">MPEG2</option>';
    echo '<option value="4">MPG4v2</option>';
    echo '</select>';
 echo '</form>'; 
```

回复您的编辑（echo $EncoderType = "$_POST['encoder_type']";)：那行不通。

```
<?php $EncoderType = "{$_POST['encoder_type']}"; 
```

可以，但是由于您在似乎是 root 帐户的情况下使用 EXEC（请永远不要这样做），请确保 $_POST 中的变量正常或无害。所以我做了这样的：

```
<?php $EncoderType = (int)$_POST['encoder_type']; 
```

那么你确定 $EncoderType 是一个整数，因此在这种情况下是无害的。并删除回声，我认为您不想在那个地方回显变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:21:45.403

我不确定您要做什么，但是如果您想设置表单的 enctype，您应该这样做：

```
echo $EncoderType . "=" . $_POST['encoder_type']; 
```

在这种情况下，您可能会错过以下行中的空格：

```
echo " action="; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T23:41:49.580

如果我没看错，你描述的是两个错误。首先，当您尝试分配给 $EncoderType 时会出现错误，这是您抛出的 PHP 错误文本。

这可以通过将 echo 行更改为读取来解决：

```
$EncoderType = $_POST['encoder_type']; 
```

其次，您的输出有错误（编辑 /home/root/settings），编码器类型不在实际输出中，这是有道理的，因为您的操作永远不会真正运行到我可以告诉 - 例如，我不认为你可以`exec()`作为一个动作，因为动作属性是发送数据的位置（即什么网页），而不是执行什么动作。

在您的情况下，我会编写一个简单的 php 页面，例如“process_action.php”，它看起来像：

```
<?php
  $encType = $_POST['encoder_type'];
  // You should probably rewrite the next line to use native PHP, rather than exec()!
  exec("sed -i '8 c\EncoderType:{$encType}:(1-H264 2-WMV8 3-MPEG 4-MPG4v2)' /home/root/settings"; 
?>

<html>
<head/>
<body>
  Changed encoder type to <?php echo $encType ?>
</body>
</html> 
```

我还将您的提交表单更改为纯 HTML - 据我所知，那里不需要任何动态的东西，所以有些形式：

```
 <form action='process_action.php' method='post'>
      <select name="encoder_type" onChange="this.form.submit()">
        <option value="1">H264</option>
        <option value="2">WMV8</option>
        <option value="3">MPEG2</option>
        <option value="4">MPG4v2</option>
      </select>
 </form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T23:30:43.740

如果我没看错，我认为这就是您所需要的：

```
echo "EncoderType='" . $_POST['encoder_type']. "' "; 
```

# knockout.js - 在 Coffee 脚本中将 JSON 数据分配给 Knockout 视图模型

> ID：11978630
> 
> 赞同：0
> 
> 时间：2012-08-15T23:18:00.567
> 
> 标签：knockout.js, coffeescript, asp.net-mvc-4

我的观点

```
<ul class="AvailableAdvertisers" data-bind="foreach: availableAdvertisers">
   <li class="advertiser" data-bind="selectedToggle: selected() == true, click: toggleSelected">
      <span class="name" data-bind="text: name"></span>
   </li>
 </ul> 
```

咖啡脚本

```
class wizardPageModel
    constructor: (@jsonObject) ->
        @availableAdvertisers = @jsonObject.SelectedAdvertisers

        @selectedAdvertisers = ko.observableArray() 
```

我想要做的是用我在视图加载时得到的 JSON 字符串初始化视图模型。

```
var testModel = @Html.Raw(Json.Encode(Model)); 
```

在我包含包含我的咖啡脚本类定义的 javascript 之后尝试执行 applyBindings。

```
<script src="/Scripts/Wizard.js" type="text/javascript"></script>
<script type="text/javascript">
$(document).ready(function(){
    var myJson = @testModel;
    ko.applyBindings(new wizardPageModel(myJson));
    });
</script> 
```

在调试期间，我看到 JSON 字符串很好，我可以在监视窗口中看到值。任何想法我做错了什么？谢谢。

编辑： $(document).ready(function(){ 抛出异常

> Microsoft JScript 运行时错误：预期对象

尝试将其替换为

> jQuery（函数（）{

那也不起作用。所以我做了

```
<script src="/Scripts/Wizard.js" type="text/javascript"></script>
<script type="text/javascript">
var myJson = @testModel;
 ko.applyBindings(new wizardPageModel(myJson)); 
</script> 
```

现在它给了我例外

> WizardPageModel 未定义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T21:29:54.523

你用什么引擎来编译 CoffeeScript？似乎你`wizardPageModel`的正在被放入`(function() {})()`. 如果您使用 Mindscape Web Workbench，那就可以了。移动到`Mindscape/Web Workbench Settings`，找到你的`.coffee`并检查`Emit bare JavaScript`。
如果您使用控制台工具进行编译，请查看相应的参数。

* * *

`wizardPageModel`检测此类问题的常用方法是在定义和使用中放置断点`ko.applyBindings(new wizardPageModel(myJson));`。然后，您将能够确定首先调用的内容并找出问题所在。

# javascript - Flash 播放隐藏在 Firefox v14 中

> ID：11978632
> 
> 赞同：0
> 
> 时间：2012-08-15T23:18:28.673
> 
> 标签：javascript, flash, firefox, colorbox

使用 ColorBox 播放 Flash 视频，只需通过`<object><embed>`自定义播放器中的 via 以及 FlowPlayer 中的流服务即可。

**`display:none`当“内联”ColorBox 关闭时，无论 CSS 隐藏状态如何( )， **Flash 都会继续播放。**这在任何其他浏览器中都不是这样，在旧版本的 Firefox 中也不是这样。*FF 似乎也是跨操作系统的罪魁祸首。***

 **我发现的唯一[解决方案](https://stackoverflow.com/questions/1806032)`.remove()`可以解决用于终止视频的问题。虽然这可能与 ColorBox 关闭有关，但为页面和站点上的多个 Flash 弹出窗口创建一个不可知的解决方案似乎并不可行。

想知道我还缺少什么来阻止这种行为？**

# mysql - 复杂的 MySQL 排序竞争位置

> ID：11978634
> 
> 赞同：0
> 
> 时间：2012-08-15T23:18:32.937
> 
> 标签：mysql

我有一个用于比赛的 MySQL 表，名为`users`. 现在，我希望能够创建一个 select 语句，按`post_comp DESC, posted_last ASC`. 在这种排序之后，首先返回的人是#1，第二行是#2，依此类推。但是，我想更进一步，返回表中特定用户的位置。现在，每个用户都有自己的 id `zbid`，. 我还需要添加`WHERE cid=3 AND post_comp>0`到查询的末尾。

这是我尝试过的：

`SELECT u.zbid,u.post_comp, @curRow := @curRow + 1 AS row, IF(u.zbid=123,1,0) AS me FROM users u, (SELECT @curRow := 0) r WHERE cid=3 AND post_comp > 0 ORDER BY u.post_comp DESC, u.posted_last ASC`

现在它所做的是返回以下内容： `zbid`, `post_comp`, `row`,如果它是我特别想要返回的行，则为 1，否则为 0 `me` 。`me`因此，如果我正在寻找用户的位置`zbid=123`，它会对表格进行排序，将所有数据带回给我，并且无论用户在哪里`zbid=123`，都会返回一个`me=1`结果。`row`表示用户在竞争中的位置。

现在，我这工作正常，唯一的问题是它返回所有这些行，我只希望它返回带有`me=1`. 我尝试将另一个附加`ORDER BY me DESC LIMIT 1`到最后，但这弄乱了之前的顺序并且没有用。还有其他建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T23:24:05.417

```
SELECT * 
FROM (
  SELECT u.zbid,u.post_comp, @curRow := @curRow + 1 AS row, 
         IF(u.zbid=123,1,0) AS me 
  FROM users u, (SELECT @curRow := 0) r 
  WHERE cid=3 AND post_comp > 0 
  ORDER BY u.post_comp DESC, u.posted_last ASC
) temp 
WHERE me=1 
```

# java - Jetty 没有收到我的春季申请

> ID：11978635
> 
> 赞同：4
> 
> 时间：2012-08-15T23:18:40.180
> 
> 标签：java, spring, spring-mvc, jetty

我有一个使用休眠、freemarker 的 Spring MVC 应用程序。它被设置为一个多 Maven 项目。我正在使用 IntelliJ 终极版。

码头开始很好，但是当我去

```
http://localhost:8080/ 
```

它只是输出我项目的文件夹，我可以在浏览器中查看我的源代码！

这是我目前的设置：

```
 final Server server = new Server(8080);

    ProtectionDomain domain = HttpServer.class.getProtectionDomain();
    URL location = domain.getCodeSource().getLocation();

    WebAppContext webAppContext = new WebAppContext();
    webAppContext.setResourceBase(location.toExternalForm());
    webAppContext.setDescriptor(location.toExternalForm() + "/WEB-INF/web.xml");
    webAppContext.setContextPath("/");
    webAppContext.setParentLoaderPriority(true);

    server.setHandler(webAppContext);

    server.start();
    server.join(); 
```

我的项目布局是一个多maven项目（使用intelli J），布局是这样的：

```
/myapp/src/main/java/main.java (this contains the above code to start jetty)
/myapp/src/main/webapp
/myapp/src/main/webapp/assets
/myapp/src/main/webapp/WEB-INF
/myapp/src/main/webapp/WEB-INF/web-context.xml (spring config file)
/myapp/src/main/webapp/WEB-INF/web.xml
/myapp/src/main/webapp/WEB-INF/views/ (parent folder for my freemarker template files)
/myapp/src/main/webapp/WEB-INF/views/home/index.ftl 
```

我的 web.xml 是：

```
<context-param>
    <param-name>log4jConfigLocation</param-name>
    <param-value>classpath*:log4j.properties</param-value>
</context-param>

 <servlet>
    <servlet-name>myapp</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/web-context.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>myapp</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

当我在 IntelliJ (11 ulimitate) 中运行它时，我得到以下输出：

```
2012-08-15 19:17:11,611 [main] INFO  org.eclipse.jetty.server.Server - jetty-7.6.2.v20120308
2012-08-15 19:17:11,886 [main] INFO  org.eclipse.jetty.webapp.StandardDescriptorProcessor - NO JSP Support for /, did not find org.apache.jasper.servlet.JspServlet
2012-08-15 19:17:11,962 [main] INFO  org.eclipse.jetty.server.handler.ContextHandler - started o.e.j.w.WebAppContext{/,file:/Users/me/projects/myapp/myapp-web/target/classes/}
2012-08-15 19:17:12,021 [main] INFO  org.eclipse.jetty.server.AbstractConnector - Started SelectChannelConnector@0.0.0.0:8080 
```

这显然是行不通的，因为当我使用带有 IntelliJ 的 tomcat 运行它时，我会得到一个巨大的输出，比如休眠、弹簧等。

我的 web 模块的 pom.xml 有：

```
..
 <packaging>war</packaging>
.. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T09:50:46.830

如果您的目标是在生产中运行它，并且您已经使用 maven 来构建您的应用程序，我建议您首先创建实际的 war 包：

```
mvn clean package 
```

然后，一旦你构建了你的 webapp，创建一个新的 Jetty 服务器，它从战争档案（而不是源代码）运行。

正如 Jetty[手册](http://wiki.eclipse.org/Jetty/Tutorial/Embedding_Jetty#Setting_a_Web_Application_Context)所述，它应该是这样的：

```
 Server server = new Server(8080);

    WebAppContext webapp = new WebAppContext();
    webapp.setContextPath("/");
    webapp.setWar("path_to_the_war_file/your_app.war");
    server.setHandler(webapp);

    server.start();
    server.join(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T03:28:46.223

您可能缺少上下文加载器侦听器。

```
<listener>
<listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/applicationContext.xml</param-value>
</context-param> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T14:25:28.817

与其手动调用 Jetty `main.java`，不如参考您的 Maven Jetty 插件`pom.xml`，然后通过运行启动您的应用程序`mvn jetty:run`

```
<build>
  <plugins>
    <plugin>
      <groupId>org.mortbay.jetty</groupId>
      <artifactId>jetty-maven-plugin</artifactId>
      <version>8.1.4.v20120524</version>
    </plugin>
  </plugin>
</build> 
```

相反，如果您的目标是创建一个`WAR`嵌入了 Jetty 副本的可执行文件，那么您希望这样处理任务：

```
 final Connector connector = new SelectChannelConnector();
    connector.setPort(8080);

    final Server server = new Server();
    server.addConnector(connector);
    server.setStopAtShutdown(true);

    final WebAppContext context = new WebAppContext();
    context.setContextPath("/");
    context.setServer(server);

    final ProtectionDomain protectionDomain = Main.class.getProtectionDomain();
    final URL location = protectionDomain.getCodeSource().getLocation();
    context.setWar(location.toExternalForm());
    server.addHandler(context);

    server.start();
    server.join(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-03T13:57:40.777

您是否尝试过设置 defaultsDescriptor 参数

```
webAppContext.setDefaultsDescriptor(JETTY_HOME+"/etc/webdefault.xml"); 
```

JETTY_HOME 是你安装 jetty 的地方，你可以找到 JETTY_HOME/etc/webdefault.xml 包含必要的设置。

# javascript - 导航快速消失

> ID：11978636
> 
> 赞同：-2
> 
> 时间：2012-08-15T23:18:46.350
> 
> 标签：javascript, jquery

1.  当您尝试将鼠标悬停在菜单上时，我的导航下拉菜单会迅速消失。我怎样才能将导航的消失延迟几毫秒/秒？

2.  同样，假设当您将鼠标悬停在 的`menu`（例如子项 0.1 等）上时`Folder 1/Folder 2`，我希望它具有蓝色以表明它处于活动状态。

请查看[此 JSFiddle](http://jsfiddle.net/SgyeB/)以查看 JS、CSS 和 HTML。

继续`fadesettings: {overduration: 350, outduration: 2000}`在 js 中编辑它只会改变动画速度。但这不是我想要的。我说的`DURATION`是菜单在消失之前存在而不是`speed of the animation`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:22:16.580

您传递给函数的变量（它有 100 毫秒的淡出）

让它300

`outduration: 300`

`fadesettings: {overduration: 350, outduration: 400}, //duration of fade in/ out`

至于颜色，您可以使用 css 添加它们：

```
.elementclass:hover {
     background-color:#0000FF; /* or whatever */
} 
```

# python - Django：显示 DecimalField 值

> ID：11978640
> 
> 赞同：3
> 
> 时间：2012-08-15T23:19:09.837
> 
> 标签：python, django, django-models, django-templates

我有一个模型`DecimalField`：

```
points_player1 = models.DecimalField(max_digits=3, decimal_places=1, blank=True, null=True) 
```

当我在模板中显示此字段时，它总是显示诸如`0.0`或之类的值`1.0`。但我想让这种行为更加用户友好：

1.  例如，如果用户输入`1`是否显示`1`（现在是 1.0）。
2.  如果用户输入是`1.5`它应该显示`1.5`。
3.  默认值为`0`，而不是`0.0`。

做这个的最好方法是什么？我的情况是`DecimalField`正确的选择吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-16T04:28:56.473

你可以 `{{decimal_field|floatformat}}`在模板中做，它只会在必要时四舍五入并显示“.0”。

更多参考[模板 - floatformat](https://docs.djangoproject.com/en/2.2/ref/templates/builtins/?from=olddocs#floatformat)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-11-26T09:08:49.380

如果由于某种原因您不能/不想使用 django 模板，您也可以修改模型保存方法，将其添加到模型的底部：

```
def save(self, *args, **kwargs):
    self.points_player1 = float(self.points_player1)
    super(YourModelName, self).save(*args, **kwargs) 
```

没试过，但应该可以。

# android - 可以让我创建的 Android 虚拟机使用有效的 SIM 卡与移动网络通信吗？

> ID：11978642
> 
> 赞同：0
> 
> 时间：2012-08-15T23:19:11.797
> 
> 标签：android, sms, emulation

我有一堆可用的 SIM 卡（确切地说是 400 个）。我目前有一个 android 2.2 模拟器，可以模仿真实 SIM 中的 IMEI 和 SIM 序列号。我目前正在将此模拟器移植到可以在 XenCenter 中运行的虚拟机上。我玩过几个脚本，它们可以转发消息并通过模拟器通过 telnet 回复。但这都是模仿的。我需要移动网络将这些虚拟机误认为是实际的物理电话。我们的想法是摆脱我们拥有的 400 多部物理电话并将它们虚拟化。

我的问题是：如果我有有效的 SIM 卡，是否可以获得一个能够发送和接收 SMS 消息的电话模拟器实例？例如，通过以太网模拟 GSM，甚至将 VM 连接到连接到物理 GSM 调制解调器的虚拟设备。因此，如果这个实体电话的电话号码是 555-555-4444，我可以摆脱实体电话并用虚拟电话替换它。发短信 555-555-4444 将导致 VM 收到消息。这甚至可能吗？我想这可能超出了我的范围。我能想到的唯一方法是将虚拟机桥接到物理 GSM 调制解调器或带有模拟器的 SMS 网关，该模拟器可以在其中假装真正的 SIM 卡。

想法？这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:49:14.680

SIM 上将有更多的参数，而不仅仅是 IMEI 和 SIMSerial。这些需要由调制解调器直接读取。

手机模拟器无法向实时网络发送短信。Android 上不存在 GSM 网络协议栈。

至于再次将VM桥接到物理GSM调制解调器，您将需要单独的GSM调制解调器，它应该读取SIM卡。Android 甚至没有 sim 阅读功能。

# magento - Magento：如何将自定义属性正确安装到数据库表中？

> ID：11978659
> 
> 赞同：0
> 
> 时间：2012-08-15T23:21:20.740
> 
> 标签：magento

我一直在对我的 magento 安装进行一些修改以使其符合我的需求，但我遇到了很多墙壁。这是我所做的一些事情，以防需要它作为我即将提出的问题的参考。

[Magento：向信用卡表单添加新字段](https://stackoverflow.com/questions/11854903/magento-add-new-field-to-credit-card-form)

[Magento：如何在客户信息字段中显示客户的电话号码](https://stackoverflow.com/questions/11849449/magento-how-to-display-customers-phone-number-on-customer-information-field)

[Magento：如何将订单/付款信息添加到 Admin-BackEnd](https://stackoverflow.com/questions/11939139/magento-how-to-add-order-payment-information-to-admin-backend)

[Magento：如何将数据保存到 order_payment 和 quote_payment](https://stackoverflow.com/questions/11957429/magento-how-to-save-data-to-order-payment-and-quote-payment)

所以我遵循了一些关于添加自定义属性的教程，但我对如何运行脚本将属性添加到正确的表感到困惑。

这就是为什么。

我注意到magento 已经附带的“电话”字段出现在几张桌子上。

eav_attributes (4 个实例) 然后电话字段的属性 ID 也出现在其他表中，所有 4 个实例。现在，我添加了一个移动电话号码字段，如我之前的问题中所见，但我不知道如何使它出现在所有具有必要值的表格中。

我现在的资源有限，无法提供更详细的信息，但如果有人能理解我要解释的内容，请帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:34:32.257

# 回答

*   使用实体模块的设置资源类执行的设置脚本。

# 为什么？

虽然存在所有 EAV 属性和实体共有的类和表（例如`eav_attribute`table 和`Mage_Eav_Model_Entity_Setup`），但每个 EAV 实体*可能*有一个附加的属性信息表。通用设置资源类`Mage_Eav_Model_Entity_Setup`具有`_prepareValues()`为所有通用属性元数据（即表中的列`eav_attribute`）设置默认值的方法。在 的情况下，除其他外`Mage_Customer`，还有`customer_eav_attribute`表格。`Mage_Customer`设置资源类`Mage_Customer_Model_Entity_Setup`覆盖此方法，调用父方法并添加*更多*存储在`customer_eav_attribute`表中的元数据默认值。

因此，虽然设置资源文件可以在任何上下文（设置类实例）中执行，但如果它正在修改其他模块的 EAV 配置，则需要使用正确的类来执行此操作。

```
<?php

$installer = Mage::getResourceModel('customer/setup','customer_setup');

$installer->startSetup();

$installer->addAttribute(
    'customer',
    'new_attribute_code',
    array('label'=>'Label','type' => 'text')
)

$installer->endSetup(); 
```

根据添加到客户/客户地址表格的需要，还有进一步的工作要做。此类工作的参考资料可在 中找到`Mage/Customer/sql/customer_setup/`。

# string - 调用replace-match时如何评估替换字符串中的lisp表达式？

> ID：11978660
> 
> 赞同：2
> 
> 时间：2012-08-15T23:21:30.030
> 
> 标签：string, emacs

我正在尝试格式化以下表格的多行 TAB 分隔数据

```
ID  Name    Duration    Start_Date  Finish_Date Predecessors    Successors  Resource_Group  Deadline    Constraint_Type 
```

使用下面的 lisp 代码进入字段列表。

```
(while (re-search-forward "\\(.*\\)\t\\(.*\\)\t\\(.*\\)\t\\(.*\\)\t\\(.*\\)\t\\(.*\\)\t\\(.*\\)\t\\(.*\\)\t\\(.*\\)\t\\(.*\\)\t\\(.*\\)\t\\(.*\\)\t\\(.*\\)\t\\(.*\\)\t\\(.*\\)\t\\(.*\\)" nil t)
    (replace-match 
"* \\2
   :PROPERTIES:
   :task_id: \\1
   :duration: \\3
   :start: \\4
   :finish: \\5
   :predecessors: \\6
   :successors: \\7
   :resource_group: \\8
   :deadline: \\9
   :constraint_type: \\,(match-string 10)
   :END:"
nil nil)) 
```

代码按预期执行，直到达到第 10 个反向引用的匹配字符串。我发现反向引用大于 9 的组的解决方案是使用 lisp 函数（匹配字符串 10）。当以交互方式使用 replace-regexp 时，如果替换字符串中的 lisp 代码以 '\,' 开头，则会对其进行评估，并且 ./(match-string 10) 在交互调用 replace-regexp 时的行为与我预期的一样；

但是，上述代码块中的 \\,(match-string 10) 会产生错误。我试过一、二、三、四等'\'，但它要么产生相同的错误，要么打印一个文字字符串。有谁知道使用此功能的方法或引用大于 9 的组号的方法？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T23:45:01.133

`\DIGIT`您可以自己显式地构造替换字符串，而不是在替换字符串中使用似乎不支持大于 9 的数字的序列。就像是：

```
(replace-match
 (concat "* " (match-string 2) "\n"
         "   :PROPERTIES:\n"
         "   :task_id: "         (match-string 1)  "\n"
         "   :duration: "        (match-string 3)  "\n"
         "   :start: "           (match-string 4)  "\n"
         "   :finish: "          (match-string 5)  "\n"
         "   :predecessors: "    (match-string 6)  "\n"
         "   :successors: "      (match-string 7)  "\n"
         "   :resource_group: "  (match-string 8)  "\n"
         "   :deadline: "        (match-string 9)  "\n"
         "   :constraint_type: " (match-string 10) "\n"
         "   :END:")
 nil t) 
```

哦，顺便说一句，`\,(...)`构造不支持`replace-match`，只有`query-replace-regexp`。

编辑：还要注意，`\,(...)`不只是进入替换字符串。那里有相当多的魔法。偷看窗帘`C-x ESC ESC`后使用`query-replace-regexp`。

# android - 通过 PendingIntent 授予对其他 Android 应用程序的 Internet 访问权限

> ID：11978661
> 
> 赞同：0
> 
> 时间：2012-08-15T23:21:36.090
> 
> 标签：android, android-intent, android-pendingintent, android-permissions

Android 应用 A 可以上网：

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

应用 B 无法访问 Internet。所以我想通过 a 为应用程序 A 提供互联网访问权限到应用程序`PendingIntent`B。这是`PendingIntent`为了什么，不是吗？

```
By giving a PendingIntent to another application, you are granting it the right to perform the operation you have specified as if the other application was yourself (with the same permissions and identity). 
```

这就是我发送`PendingIntent`应用程序 A 的方式：

```
Intent mainApp = new Intent(Intent.ACTION_MAIN);
mainApp.addCategory(Intent.CATEGORY_LAUNCHER);
mainApp.setClassName("com.other.package", "com.other.package.MainActivity");
int flags = PendingIntent.FLAG_UPDATE_CURRENT | Intent.FLAG_ACTIVITY_NEW_TASK;
PendingIntent pi = PendingIntent.getActivity(this, 23894729834, mainApp, flags);
try {
    pi.send();
}
catch (CanceledException e) { } 
```

这就是我尝试在应用程序 B（具有 launchMode=singleTask）中接收它的方式：

```
@Override
protected void onNewIntent(Intent i) {
    setIntent(i);
    // do some things with Internet access here
} 
```

但它不起作用！你知道为什么吗？我做错什么了？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:27:38.557

> 所以我想通过 PendingIntent 从应用 A 到应用 B 提供 Internet 访问权限。

这是不可能的，对不起。

> 这就是 PendingIntent 的用途，不是吗？

不。

让我们更仔细地看一下您引用的文档部分：

> 通过将 PendingIntent 提供给另一个应用程序，您授予它执行**您指定的操作**的权利，就好像另一个应用程序是您自己一样（具有相同的权限和身份）。

（粗体字表示强调）

应用程序 B 可以执行`PendingIntent`via ，如果您要将 发送*到*应用程序 B（例如，作为额外的）`send()`，它将像应用程序 A 执行它一样运行。然而：`PendingIntent` *`Intent`*

 **   您正在让 App A 执行`PendingIntent`via `send()`，启动 App B，而不是发送`PendingIntent`到 App B。

*   App B 并没有神奇地获得 App A 的权限，只是因为它恰好`PendingIntent`被 App A 创建的一些调用。

无论如何，您都无法“从应用程序 A 向应用程序 B 提供 Internet 访问权限”。App B 可以要求 App A 代表它执行请求（例如，通过发送到 App A 公开的服务的命令）。但是，您在执行此操作时需要非常小心，因为默认情况下，*您*不仅可以要求 App A 执行操作，而且设备上的任何其他应用程序也可以执行此操作，除非您使用签名级别的自定义权限保护 App A 的导出服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T23:55:16.630

PendingIntent 不授予执行任何操作的权限。它所做的只是使这个意图的启动就好像待处理的意图创建者自己做了一样。

例如，考虑您有一个有权启动受保护广播的应用程序。您的应用可以创建 pendingBroadcast 并将对象传递给没有此权限的任何其他应用，而其他应用可以使用此 pendingIntent 进行广播。*

# meteor - 流星集合查询“未定义”

> ID：11978663
> 
> 赞同：1
> 
> 时间：2012-08-15T23:21:51.737
> 
> 标签：meteor

我有代码

```
datas = new Meteor.Collection("datas")
var data = datas.findOne('101abcde1f2345ac00000001')

if (Meteor.is_client) {
    Meteor.startup(function () {
        console.log(data.name)
    });
} 
```

但是我在控制台中得到的是一个`undefined`错误。但是，如果我`console.log(data.name)`在 web 检查器的 javascript 控制台中输入（大概经过某种等待它可以工作。我已经将代码放入 Meteor.startup 以确保 DOM 已准备好。我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-16T14:12:13.597

看来您正在使用`autopublish`包。而且（当然），`Meteor.startup`不等待订阅完成。

通常，我们 在 Meteor 中使用**响应式上下文和数据来执行此操作 -**

```
datas = new Meteor.Collection("datas")

if (Meteor.is_client){
  Meteor.autosubscribe(function(){
    var data = datas.findOne('101abcde1f2345ac00000001');
    if (data){ console.log( data.name )}
  });
} 
```

任何时候`datas`集合有变化（？），函数`Meteor.autosubscribe`都会被调用。

# c# - 无法在c#中启动进程

> ID：11978664
> 
> 赞同：1
> 
> 时间：2012-08-15T23:22:02.080
> 
> 标签：c#

我编写了这段代码来启动一个进程：

```
var proc = new Process();
proc.StartInfo.Arguments = string.Format("{0} {1}", inputFilePath, outputFilePath);
proc.StartInfo.FileName = @Settings.GetImageMagickConvertPath();
proc.StartInfo.CreateNoWindow = false;
proc.StartInfo.UseShellExecute = false;
proc.Start(); 
```

这在本地完美运行。但是当我将此代码放在远程机器上时，此代码不再起作用（尝试启动 proc 时错误是“访问被拒绝”）。因此，我添加了用于使用 RDC（用户/密码）进行连接的凭据，以启动该过程：

```
proc.StartInfo.UserName = "user";

System.Security.SecureString secret = new System.Security.SecureString();

foreach (char c in "pass")
    secret.AppendChar(c);

proc.StartInfo.Password = secret; 
```

但我仍然收到同样的错误......

你们有什么可以解决这个问题的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:04:50.610

好的，现在已经解决了。

基本上我有两个问题：

1.  启动过程的路径不正确（而不是`folder/program.exe`我输入错误`folder/`，我收到“访问被拒绝”，这让我的生活变成了一场噩梦（开始寻找权限、帐户等）。如果微软得到改进，那就太好了此错误类似于“进程的路径错误”）。

2.  我必须将它作为本地服务（应用程序池）而不是应用程序池标识来运行。（并且不需要开始信息凭据）

涉及操作系统：Windows 2008 Server R1)

# objective-c - NSJSON“日期”返回 null

> ID：11978665
> 
> 赞同：0
> 
> 时间：2012-08-15T23:22:05.493
> 
> 标签：objective-c, xcode, ios5, json, nsjsonserialization

当我尝试自己的数据时，“日期”的 NSLog 返回 null。这是我来自网页的 json：

[{"date":"2012-08-13 12:00:00","timezone_type":3,"timezone":"EST5EDT"},{"date":"2012-08-13 10:00:00 ","timezone_type":3,"timezone":"EST5EDT"},{"date":"2012-08-13 13:00:00","timezone_type":3,"timezone":"EST5EDT"}]

这是我的代码：.m

```
#define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)
//#define kLatestKivaLoansURL [NSURL          URLWithString://@"http://api.kivaws.org/v1/loans/search.json?status=fundraising"]
#define kLatestKivaLoansURL [NSURL URLWithString:@"http://www.xxxxxxxxxxx.com/appointjson.php"]

#import "MyAvailTimesViewController.h"

@interface MyAvailTimesViewController ()

@end

@implementation MyAvailTimesViewController
@synthesize json;
- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    //Do any additional setup after loading the view.
    dispatch_async(kBgQueue, ^{
        NSData* data = [NSData dataWithContentsOfURL: 
                        kLatestKivaLoansURL];
        [self performSelectorOnMainThread:@selector(fetchedData:) 
                               withObject:data waitUntilDone:YES];

    });
}
- (void)fetchedData:(NSData *)responseData {
    //parse out the json data
    NSLog(@"%@",responseData);
    NSError* error;
    NSDictionary* json = [NSJSONSerialization 
                          JSONObjectWithData:responseData

                          options:kNilOptions 
                          error:&error];

    NSArray* latestLoans = [json objectForKey:@"date"];
    NSLog(@"date: %@", latestLoans);
    //NSLog(@"output2: %@", json); 
```

。H

```
#import <UIKit/UIKit.h>

@interface MyAvailTimesViewController : UIViewController {
}

@property(nonatomic, retain) NSDictionary *json;
@end 
```

我 responseData 时的 NS 日志为：2012-08-15 15:17:54.114 GBSB[480:15b03] <3c21444f 43545950 45206874 6d6c2050 55424c49 4320222d 2f2f5733 432f2f44 54442058 48544d4c 20312e30 20547261 6e736974 696f6e61 6c2f2f45 4e222022 68747470 3a2f2f77 77772e77 332e6f72 672f5452 2f786874 6d6c312f 4454442f 7868746d 6c312d74 72616e73 6974696f 6e616c2e 64746422 3e0a3c68 746d6c20 786d6c6e 733d2268 7474703a 2f2f7777 772e7733 2e6f7267 2f313939 392f7868 746d6c22 3e0a3c68 6561643e 0a3c7469 746c653e 47425342 204a534f 4e204665 65643c2f 7469746c 653e0a3c 2f686561 643e0a5b 7b226461 7465223a 22323031 322d3038 2d313320 31323a30 303a3030 222c2274 696d657a 6f6e655f 74797065 223a332c 2274696d 657a6f6e 65223a22 45535435 45445422 64617465 7d2c7b22 223a2232 3031322d 30382d31 33203130 3a30303a 3030222c 2274696d 657a6f6e 655f7479 7065223a 332c2274 696d657a 6f6e6522 3a224553 54354544 54227d2c 7b226461 7465223a 22323031 322d3038 2d313320 31333a30 303a3030222c2274 696d657a 6f6e655f 74797065 223a332c 2274696d 657a6f6e 65223a22 45535435 45445422 7d5d3c62 6f64793e 0a0a3c20c 626f 6473c 64739

我很难找到解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:27:04.903

这：

```
[{"date":"2012-08-13 12:00:00","timezone_type":3,"timezone":"EST5EDT"},{"date":"2012-08-13 10:00:00","timezone_type":3,"timezone":"EST5EDT"},{"date":"2012-08-13 13:00:00","timezone_type":3,"timezone":"EST5EDT"}] 
```

是一个数组，而不是字典。当你执行`[NSJSONSerialization JSONObjectWithData:...`返回的对象应该是一个`NSArray`. 所以当你打电话时，`objectForKey:`你应该看到一个异常。

如果您得到了，`nil`那么唯一明智的结论是您要求解析的 JSON 数据格式不正确。

检查`NSData`您的帖子后，您的服务器实际上正在返回：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>GBSB JSON Feed</title>
</head>
[{"date":"2012-08-13 12:00:00","timezone_type":3,"timezone":"EST5EDT"},{"date":"2012-08-13 10:00:00","timezone_type":3,"timezone":"EST5EDT"},{"date":"2012-08-13 13:00:00","timezone_type":3,"timezone":"EST5EDT"}]<body>

</body>
</html> 
```

这显然不是有效的 JSON；它是一个恰好显示 JSON 的 HTML 文档。

# java - 计算标准差的在线算法

> ID：11978667
> 
> 赞同：3
> 
> 时间：2012-08-15T23:22:08.553
> 
> 标签：java, algorithm, statistics, standard-deviation, online-algorithm

通常，我有一个更技术性的问题，但我会用一个数球的例子为你简化它。

假设我有不同颜色的球和为每种颜色保留的数组的一个索引（初始化为全 0）。每次我选择一个球，我都会将相应的索引增加 1。

球是随机挑选的，我一次只能挑选一个球。我唯一的目的是计算每种颜色的球数，直到我用完球。

我想计算不同颜色的球数量的标准偏差，*同时我正在计算它们*。在计算完所有球后，我不想通过再次遍历数组来计算它。

可视化：

随机排列的球：（`BBGRRYYBBGGGGGGB`每个字母代表颜色的第一个字母）从 0 到 3 的数组索引分别对应颜色 B、G、R 和 Y。当我完成挑选球时，我的阵列看起来像`[5,7,2,2]`。

在拥有最终数组后计算标准偏差非常简单，但我想在填充这个数组时这样做。

我想用 Java 做，我有大约 1000 种颜色。

实现它的最有效方法是什么？或者在拥有最终数组之前有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T23:24:17.740

您不需要数组来计算标准偏差。

只需跟踪点数、总和和总平方和。您可以随时计算平均值和标准差，而无需保留数组。

如果我了解您的要求，您将需要一个 Map ，其中颜色是键，统计实例是值。

这是一个为你做的课程。

```
package statistics;

/**
 * Statistics
 * @author Michael
 * @link http://stackoverflow.com/questions/11978667/online-algorithm-for-calculating-standrd-deviation/11978689#11978689
 * @since 8/15/12 7:34 PM
 */
public class Statistics {

    private int n;
    private double sum;
    private double sumsq;

    public void reset() {
        this.n = 0;
        this.sum = 0.0;
        this.sumsq = 0.0;
    }

    public synchronized void addValue(double x) {
        ++this.n;
        this.sum += x;
        this.sumsq += x*x;
    }

    public synchronized double calculateMean() {
        double mean = 0.0;
        if (this.n > 0) {
            mean = this.sum/this.n;
        }
        return mean;
    }

    public synchronized double calculateVariance() {
       double deviation = calculateStandardDeviation();
        return deviation*deviation;
    }

    public synchronized double calculateStandardDeviation() {
        double deviation = 0.0;
        if (this.n > 1) {
            deviation = Math.sqrt((this.sumsq - this.sum*this.sum/this.n)/(this.n-1));
        }
        return deviation;
    }
} 
```

这是它的单元测试：

```
package statistics;

import org.junit.Assert;
import org.junit.Test;

/**
 * StatisticsTest
 * @author Michael
 * @link http://www.wolframalpha.com/input/?i=variance%281%2C+2%2C+3%2C+4%2C+5%2C+6%29&a=*C.variance-_*Variance-
 * @since 8/15/12 7:42 PM
 */
public class StatisticsTest {

    private static final double TOLERANCE = 1.0E-9;

    @Test
    public void testCalculateMean() {
        double [] values = new double[] {
            1.0, 2.0, 3.0, 4.0, 5.0, 6.0
        };
        Statistics stats = new Statistics();
        for (double value : values) {
            stats.addValue(value);
        }
        double expected = 3.5;
        Assert.assertEquals(expected, stats.calculateMean(), TOLERANCE);
    }

    @Test
    public void testCalculateVariance() {
        double [] values = new double[] {
                1.0, 2.0, 3.0, 4.0, 5.0, 6.0
        };
        Statistics stats = new Statistics();
        for (double value : values) {
            stats.addValue(value);
        }
        double expected = 3.5;
        Assert.assertEquals(expected, stats.calculateVariance(), TOLERANCE);
    }

    @Test
    public void testCalculateStandardDeviation() {
        double [] values = new double[] {
                1.0, 2.0, 3.0, 4.0, 5.0, 6.0
        };
        Statistics stats = new Statistics();
        for (double value : values) {
            stats.addValue(value);
        }
        double expected = Math.sqrt(3.5);
        Assert.assertEquals(expected, stats.calculateStandardDeviation(), TOLERANCE);
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T23:27:48.950

由于使用总和计算平均值和标准偏差，因此您可以轻松地为这些实现适当的累加器。然后，当您需要实际值时，完成其余的计算（特别是除法）。

平方和是棘手的部分，因为您为每个输入增加一个频率。解决这个问题的一种方法是维护到目前为止看到的每种颜色的计数（使用适当的数据结构）。然后，当您在输入中看到一种颜色时，您可以减去其先前的正方形并将新的正方形加回（或等效地将两个正方形的差添加到您的累加器中）。

我将把它留给读者来实现这里描述的算法。

# performance - 从头开始合并列表列表

> ID：11978668
> 
> 赞同：2
> 
> 时间：2012-08-15T23:22:09.067
> 
> 标签：performance, algorithm, list, merge, erlang

我需要将排序列表合并到一个列表中（列表的数量可能会有所不同）。当我刚接触 Erlang - 我不知道 pretty function `lists:merge/1`。所以我实现了自己的`merge/1`功能。它的复杂性是 O(m*n) （m - 列表数量，n - 列表中元素的平均数量），我使用尾递归。这是我的功能：

```
-module( merge ).
-export( [ merge/1 ] ).

merge( ListOfLists ) ->
        merge( ListOfLists, [] ).

merge( [], Merged ) ->
        lists:reverse( Merged );
merge( ListOfLists, Merged ) ->
        [ [ Hfirst | Tfirst ] | ListOfLists_Tail ] = ListOfLists,
        % let's find list, which has minimal value of head
        % result would be a tuple { ListWithMinimalHead, Remainder_ListOfLists }
        { [ Hmin | Tmin ], ListOfLists_WithoutMinimalHead } =
        lists:foldl(
                fun( [ Hi | Ti ] = IncomingList, { [ Hmin | Tmin ], Acc } ) ->
                         case Hi < Hmin of
                                true ->
                                        % if incoming list has less value of head then swap it
                                        { [ Hi | Ti ], [ [ Hmin | Tmin ] | Acc ] };
                                false ->
                                        { [ Hmin | Tmin ], [ IncomingList | Acc ] }
                        end
                end,
                { [ Hfirst | Tfirst ], [] },
                ListOfLists_Tail ),
        % add minimal-valued head to accumulator, and go to next iteration
        case Tmin == [] of
                true ->
                        merge( ListOfLists_WithoutMinimalHead, [ Hmin | Merged ] );
                false ->
                        merge( [ Tmin | ListOfLists_WithoutMinimalHead ], [ Hmin | Merged ] )
        end. 
```

但是，在我知道之后`lists:merge/1`- 我决定测试我的解决方案的性能。

以下是一些结果：

```
1> c(merge).
{ok,merge}
2>
2> 
3> timer:tc( lists, merge, [ [ lists:seq(1,N) || N <- lists:seq(1,5) ]  ] ).   
{5,[1,1,1,1,1,2,2,2,2,3,3,3,4,4,5]}
3> 
3> timer:tc( merge, merge, [ [ lists:seq(1,N) || N <- lists:seq(1,5) ]  ] ). 
{564,[1,1,1,1,1,2,2,2,2,3,3,3,4,4,5]}
4> 
4> 
4> timer:tc( lists, merge, [ [ lists:seq(1,N) || N <- lists:seq(1,100) ]  ] ). 
{2559,
 [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1|...]}
5>  
5> timer:tc( merge, merge, [ [ lists:seq(1,N) || N <- lists:seq(1,100) ]  ] ). 
{25186,
 [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1|...]}
6> 
6> 
6> timer:tc( lists, merge, [ [ lists:seq(1,N) || N <- lists:seq(1,1000) ]  ] ). 
{153283,
 [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1|...]}
7>  
7> timer:tc( merge, merge, [ [ lists:seq(1,N) || N <- lists:seq(1,1000) ]  ] ). 
{21676268,
 [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1|...]}
8> 
```

**0.153 秒**给我留下了深刻的印象。**对比 21.676 秒。**我的功能运行非常缓慢。

我认为使用匿名函数会降低性能，但摆脱`fun`它并没有帮助。

你能指出我在哪里犯了主要错误吗？或者为什么模块列表中的函数要快得多？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T06:03:23.753

不同之处在于算法的复杂性。如果我没记错的话，您的算法是**O(m^2*n)**其中**n**是内部列表的长度，**m**是输入列表中的内部列表的数量。这是因为您的函数有效地遍历内部列表的整个列表以生成结果列表的一个元素。**因此，对于您的测试示例，运行时间与C1*N^3**成正比（在这种情况下，C1 是某个常数 < 1）。

然而，通常预排序列表的合并操作具有**O(n)**的复杂度，其中**n**是所有列表的总长度。因此，对于您的测试用例，复杂度应该是**O(n*m)**，即它应该与**C2*N^2**成比例。

实际上，正如您所看到的，当您的测试中的**N**增加 10 倍时，您的实现需要 860 倍以上的时间来产生结果，而“lists:merge/1”只需要 53 倍以上的时间来合并输入。比率会因实际输入大小和“形状”而异，但总体趋势仍然是 N^3 与 N^2。

标准的 'lists:merge/1' 并不是那么简单：[https](https://github.com/erlang/otp/blob/maint/lib/stdlib/src/lists.erl#L1441) ://github.com/erlang/otp/blob/maint/lib/stdlib/src/lists.erl#L1441 （'merge/1' 只是调用 ' mergel/1') 但事实上，即使是一个简单的、未优化的、非尾递归的“只需将头列表与合并的尾合并”，其性能也比您的实现要好得多：

```
merge2([]) ->
    [];
merge2([Ls|Lss]) ->
    merge2(Ls,merge2(Lss), []).

merge2([], Ls, Acc) ->
    lists:reverse(Acc) ++ Ls;
merge2(Ls, [], Acc) ->
    lists:reverse(Acc) ++ Ls;
merge2([H1|Ls1], [H2|_] = Ls2, Acc) when H1 =< H2 ->
    merge2(Ls1, Ls2, [H1|Acc]);
merge2(Ls1, [H2|Ls2], Acc) ->
    merge2(Ls1, Ls2, [H2|Acc]). 
```

所以再一次，就像实践中经常发生的那样：任何优化的第一步都是查看算法。

**UPD：**嗯，我的例子实际上也是**O(m^2*n)** - 就复杂性而言，并不比你的好。我们在这里可能需要的是“分而治之”的方法，它应该将复杂性提高到**O(m*n*ln(n))**

**UPD2：**对先前更新的更正和澄清：“分而治之”是指以下算法：

假设我们的输入列表中有**m个排序列表，每个列表由****n 个**元素组成。然后：

1.  将输入列表拆分为两个子列表，每个子列表中有**m/2 个**列表
2.  递归地将此算法应用于它们中的每一个。
3.  使用标准的 2 列表合并合并两个生成的排序列表。

该算法的渐近复杂度实际上是**O(n*m*ln(m))**，因为： 1\. 拆分操作在每个拆分级别上都是**O(m)**，因此可以忽略。2\. 合并操作在每一层都是**O(m*n)**：在上层（第一个拆分）我们需要合并两个列表，每个列表都有**n*m/2 个**元素，每个元素都有**O(n*m)**；在下一个级别（第二次拆分），我们需要进行两次独立合并，每次合并两个**n*m/4**元素列表，这也是**O(m*n)**，依此类推，直到**m=2**或**m=1** 3\. 数字级数显然是**log2(m)**所以结果复杂度是**O(n*m*ln(m))**

事实上，这个算法可以被认为只是[合并排序](http://en.wikipedia.org/wiki/Merge_sort)的一种变体，它稍微提前“停止”分裂（因此它有**ln(m)**而不是**ln(m*n) ）并且当****n=1**时它成为成熟的合并排序（而你的第一个算法实际上变成了[选择排序](http://en.wikipedia.org/wiki/Selection_sort)）

# visual-studio-2010 - VS2010 试图加载一个未引用的程序集

> ID：11978670
> 
> 赞同：0
> 
> 时间：2012-08-15T23:22:31.313
> 
> 标签：visual-studio-2010

在我解释实际问题之前，在一段未知的时间里，VS2010 没有设置为在 CLR 异常上中断。直到最近我在使用该应用程序时发现错误时才注意到这一点。这个选项是如何被关闭的对我来说是个谜。这可能与以下内容相关，也可能不相关。

现在我已经抛出了 CLR 异常，下面的详细异常会在以下位置停止 VS2010：

```
 using (UnitOfWork uow22 = new UnitOfWork())
  {
    bool useWebInt = uow22.Query<MCCommon.Web>().Where(o => o.Enabled == true).Select(o => o.OfflineEnabled).FirstOrDefault(); // <--- causes the exception
    enabled = useWebInt;
  } 
```

DevExpress 的任何用户都会识别 XPO UnitOfWork 并知道它包含在 DevEx dll 中。MCCommon.Web 对象包含在项目中正确引用的 dll 中。MCCommon 和 MCCommon.Web 没有对 MyCourtsAdmin 的引用。

以下是上述代码段产生的错误：

```
System.IO.FileNotFoundException occurred
  Message=Could not load file or assembly 'MyCourtsAdmin' or one of its dependencies. The system cannot find the file specified.
  Source=mscorlib
  FileName=MyCourtsAdmin
  FusionLog==== Pre-bind state information ===
LOG: User = KATOOMBA\Administrator
LOG: DisplayName = MyCourtsAdmin
 (Partial)
WRN: Partial binding information was supplied for an assembly:
WRN: Assembly Name: MyCourtsAdmin | Domain ID: 1
WRN: A partial bind occurs when only part of the assembly display name is provided.
WRN: This might result in the binder loading an incorrect assembly.
WRN: It is recommended to provide a fully specified textual identity for the assembly,
WRN: that consists of the simple name, version, culture, and public key token.
WRN: See whitepaper http://go.microsoft.com/fwlink/?LinkId=109270 for more information and common solutions to this issue.
LOG: Appbase = file:///C:/Users/Administrator/Documents/My Projects/MyCourts/bin/Debug/
LOG: Initial PrivatePath = NULL
Calling assembly : DevExpress.Data.v11.2, Version=11.2.6.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Users\Administrator\Documents\My Projects\MyCourts\bin\Debug\MyCourts.vshost.exe.Config
LOG: Using host configuration file: 
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v4.0.30319\config\machine.config.
LOG: Policy not being applied to reference at this time (private, custom, partial, or location-based assembly bind).
LOG: Attempting download of new URL file:///C:/Users/Administrator/Documents/My Projects/MyCourts/bin/Debug/MyCourtsAdmin.DLL.
LOG: Attempting download of new URL file:///C:/Users/Administrator/Documents/My Projects/MyCourts/bin/Debug/MyCourtsAdmin/MyCourtsAdmin.DLL.
LOG: Attempting download of new URL file:///C:/Users/Administrator/Documents/My Projects/MyCourts/bin/Debug/bin/DLLs/MyCourtsAdmin.DLL.
LOG: Attempting download of new URL file:///C:/Users/Administrator/Documents/My Projects/MyCourts/bin/Debug/bin/DLLs/MyCourtsAdmin/MyCourtsAdmin.DLL.
LOG: Attempting download of new URL file:///C:/Users/Administrator/Documents/My Projects/MyCourts/bin/Debug/MyCourtsAdmin.EXE.
LOG: Attempting download of new URL file:///C:/Users/Administrator/Documents/My Projects/MyCourts/bin/Debug/MyCourtsAdmin/MyCourtsAdmin.EXE.
LOG: Attempting download of new URL file:///C:/Users/Administrator/Documents/My Projects/MyCourts/bin/Debug/bin/DLLs/MyCourtsAdmin.EXE.
LOG: Attempting download of new URL file:///C:/Users/Administrator/Documents/My Projects/MyCourts/bin/Debug/bin/DLLs/MyCourtsAdmin/MyCourtsAdmin.EXE.

  StackTrace:
       at System.Reflection.RuntimeAssembly._nLoad(AssemblyName fileName, String codeBase, Evidence assemblySecurity, RuntimeAssembly locationHint, StackCrawlMark& stackMark, Boolean throwOnFileNotFound, Boolean forIntrospection, Boolean suppressSecurityChecks)
       at System.Reflection.RuntimeAssembly.LoadWithPartialNameInternal(AssemblyName an, Evidence securityEvidence, StackCrawlMark& stackMark)
  InnerException: 
```

现在 MyCourtsAdmin（在错误中引用）完全是一个单独的项目，我的项目和 MCCommon dll 都没有引用它。MyCourtsAdmin 确实引用了 MCCommon，但没有双边引用。

我已经在我的项目的整个目录结构中搜索了一个字符串“MyCourtsAdmin”，我能找到的唯一参考是在 myproject.suo 中。我当然不能编辑 myproject.suo，而且我认为我不应该这样做。

我很难过，并希望为解决此问题提供任何/所有意见。

# batch-file - 用于查找文件并将文件复制到当前目录以外的目标的批处理文件

> ID：11978671
> 
> 赞同：0
> 
> 时间：2012-08-15T23:22:33.467
> 
> 标签：batch-file, copy, cmd, move

我完成了一个 Java 程序，现在我正在创建一个批处理文件来设置它。我对批处理文件和 CMD 命令一无所知，这就是我问这个问题的原因:)。

这就是我已经拥有的：

```
@echo off
C:
md \Calc
D:
cd Calculator
move D:\Calculator\Calc.jar C:\Calc\ 
```

但是这需要用户将文件夹“计算器”放入 D:\，这可能很不方便，有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:33:20.153

您可以使用`PUSHD C:`更改目录，然后`POPD`将您返回到以前的当前目录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:39:51.750

要通过双击运行 .jar 文件，请在 Windows 中设置文件关联：

> [http://windowstipoftheday.blogspot.com/2005/10/setting-jar-file-association.html](http://windowstipoftheday.blogspot.com/2005/10/setting-jar-file-association.html)
> 
> ```
> Open the Windows Explorer, from the Tools select 'Folder Options...'
> Click the File Types tab, scroll down and select JAR File type.
> Press the Advanced button.
> In the Edit File Type dialog box, select open in Actions box and click Edit...
> Press the Browse button and navigate to the location the Java interpreter javaw.exe.
> In the Application used to perform action field, needs to display something similar to C:\Program Files\Java\j2re1.4.2_04\bin\javaw.exe" 
> ```
> 
> -jar "%1" % （注意：以 'javaw' 开头的部分必须完全一样；路径名的其他部分可以根据您使用的 Java 版本而有所不同）然后按 OK 按钮直到所有对话框关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T13:29:55.643

搜索文件，并将其复制到指定位置：

```
for /f "tokens=*" %%a in ('dir /b/s d:\calc.jar') do copy "%%a" c:\calc\ 
```

这有一个问题，它会将`calc.jar`找到的所有内容复制到该位置（覆盖旧位置）。

查看输出`dir /b/s d:\calc.jar`以查看它将找到哪些文件

# node.js - Amazon S3 EPIPE 错误

> ID：11978672
> 
> 赞同：2
> 
> 时间：2012-08-15T23:22:47.210
> 
> 标签：node.js, amazon-s3

**更新：**在向该用户添加完全访问策略权限后，它可以[从命令行](http://www.timkay.com/aws/)工作。现在，当我使用 Node 执行此操作时，没有错误，但我在 s3 文件管理器中看不到文件。

使用 Amazon 的 S3 服务时，我不断收到 EPIPE 错误。

我有点卡住，不确定如何进行。

我将 Node.js 与[Knox 模块](https://github.com/learnboost/knox)一起使用。

这是我的代码：

```
var client = knox.createClient({
    key: amazonAccessKeyId,
    secret: amazonSecretAccessKey,
    bucket: amazonBucketName
});

function moveFiles() {
    moveUploadedFile(req.files['aps-file'].path,'/aps-products.csv', this.parallel());
    moveUploadedFile(req.files['perry-craft-roof-file'].path,'/perry-craft-roof-products.csv', this.parallel());
    res.end('successful!');
}

function moveUploadedFile(srcPath, dstPath, callback) {
    client.putFile(srcPath, dstPath, { 'x-amz-acl': 'public' }, function (err) {
        if (err) {
            callback(new Error("Error uploading file for " + dstPath + ": " + err.message), srcPath);
            console.log(err);
            return;
        }

        console.log('Finished writing file ' + dstPath + ' to Amazon S3 Cloud');
        callback(null, srcPath);
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:23:49.967

好的，这些是我为解决此问题而采取的步骤：

1.  安装的 aws 命令行工具你可以在这里找到它：http: [//www.timkay.com/aws/](http://www.timkay.com/aws/)
2.  为我创建的 s3 用户添加了完全访问（管理员访问）策略。
3.  确保我可以使用以下命令写入该存储桶：`aws put /file/to/put /new-file`.
4.  `{'x-amz-acl': 'public' }`应该删除它，`'public-read'`否则它不会将文件添加到 s3（没有错误）。请注意，这`{'x-amz-acl': 'private' }`也有效。

# django - Django-CMS 插件 cmsplugin_blog 抛出 VariableDoesNotExist 错误

> ID：11978673
> 
> 赞同：0
> 
> 时间：2012-08-15T23:22:53.283
> 
> 标签：django, django-cms

我一直在使用 Django-CMS 在 Windows 7 上运行 Django 1.4 的站点上工作。安装 cmsplugin-blog 应用程序并且一切就绪后，尝试添加新博客页面时出现此错误（在[http:// localhost.com/admin/cmsplugin_blog/entry/add/](http://localhost.com/admin/cmsplugin_blog/entry/add/) )

**VariableDoesNotExist 在 /admin/cmsplugin_blog/entry/add/**

在 u"[{'csrf_token': , 'use_missing': True}]" 中查找键 [MEDIA_URL] 失败

...

**模板渲染期间出错**

在模板 C:\dev\virtualenvs\djangocmsenv\Lib\site-packages\cmsplugin_blog\templates\admin\cmsplugin_blog\admin_helpers.html 中，第 2 行出错

**（无法收到异常消息）**

```
{% if use_missing %}

    <script type="text/javascript" src="{{ STATIC_URL|default:MEDIA_URL }}missing/n11ndata.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL|default:MEDIA_URL }}missing/n11n.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL|default:MEDIA_URL }}missing/urlify2.js"></script>
{% endif %} 
```

插件的创建者建议我添加一个媒体或静态上下文处理器，但我已经有了

```
TEMPLATE_CONTEXT_PROCESSORS = (
    'django.contrib.auth.context_processors.auth',
    'django.core.context_processors.i18n',
    'django.core.context_processors.request',
    'django.core.context_processors.media',
    'django.core.context_processors.static',
    'cms.context_processors.media',
    'sekizai.context_processors.sekizai',
) 
```

这是我的静态/媒体根/url 设置

```
MEDIA_ROOT = os.path.join(PROJECT_PATH, "media")

MEDIA_URL = '/media/'

STATIC_ROOT = ''

STATIC_URL = '/static/'

STATICFILES_DIRS = (
    os.path.join(PROJECT_PATH, "static"),
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'django.contrib.comments',
    'cms',
    'mptt',
    'cmsplugin_blog',
    'djangocms_utils',
    'simple_translation',
    'tagging',
    'missing',
    'menus',
    'south',
    'sekizai',
    'cms.plugins.googlemap',
    'cms.plugins.link',
    'cms.plugins.picture',
    'cms.plugins.text',
    'cms.plugins.video',
    'cms.plugins.twitter',
    'cmsplugin_contact',
    'carouselplugin',
    'tinymce',
    'django.contrib.admin',
) 
```

谁能帮我一把。谢谢。

PS url 实际上是 127.0.0.1 而不是 localhost.com。不得不更改它，因为否则我无法提交我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:18:02.580

只需从 GitHub 存储库安装最新版本。您拥有的版本是 PyPi 的最新版本，它在 Django 1.4 之前发布，适用于 Django CMS 2.2（适用于 Django 1.3）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T00:07:22.850

听起来您没有在模板文件的顶部加载静态：

```
{% load static %}
{% get_static_prefix as STATIC_URL %} 
```

# path - JDK/JRE 的注册表/环境路径问题

> ID：11978674
> 
> 赞同：0
> 
> 时间：2012-08-15T23:22:58.350
> 
> 标签：path, jvm, java

问候大家。我来自 C++ 背景，但我想尝试一下 Java，并且一直在读一本书。不过，现在 JDK 出现了。基本上，我想做的是让它重新排列/重命名文件夹，而不是中断。我认为问题出在 JRE 和 JVM 中的某个地方——具体来说，如果我重新排列东西，它会说它无法使用以前的路径找到 jvm.config 文件，这是合乎逻辑的——它不再存在. 我的问题是，你如何改变这种行为，所以它，嗯，有效。我在 SO 网站上发现了一个类似的问题（我忘了是哪一个，可能在这里），详细说明了几乎相同的问题。也许是关于...安装程序的东西？或者，据我所知，添加某种注册表路径。（JavaHome 可能吗？）。然而，链接到参考或答案，没有让我清楚如何解决这个问题。因此，我在这里。

例如，假设我的目录有点像这样（或者更确切地说，是这样）...\Program\Java...

里面是jre。我将程序更改为编程 - 可能是不好的做法，但我觉得有必要更改它。关键是，除非我像以前一样保持它，否则它不再起作用。理想情况下，我实际上希望所有与 JDK 相关的文件，包括 JRE，都在一个 JDK 文件夹中。当然，还有我做的任何其他动作。如何解决此路径问题？

谢谢，如果你能帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:19:44.337

JDK 有一个嵌入式 JRE，您可以将 JRE 和 JDK 目录移动到文件系统的不同部分，它们仍然可以工作，但在 JRE 和 JDK 中更改布局将不起作用。

# c++ - Qt4：从 QDockedWidget 的子类访问 QtDesigner 创建的小部件

> ID：11978675
> 
> 赞同：0
> 
> 时间：2012-08-15T23:22:58.297
> 
> 标签：c++, qt4, qt-designer, qmainwindow, qdockwidget

我敢打赌，我的问题从它的标题来看很明显，但也可能不是 =)
所以让我详细解释一下……我创建了一个 QDockWidget，然后使用设计器将其转换（我的意思是提升为……）它为子类.

那么如何正确访问我放置的小部件？这个想法是所有子类的对象都在子类中处理。问题（您可能知道）是

```
this->children().count() 
```

返回这个：

```
QDockWidgetLayout(0x1022373d0) 
QDockWidgetTitleButton(0x102237510, name = "qt_dockwidget_floatbutton") 
QDockWidgetTitleButton(0x102235500, name = "qt_dockwidget_closebutton") 
QWidgetResizeHandler(0x102235de0) 
QAction(0x102221500) 
```

而且它们都不包含我想要获得的QLabels和其他tish）。然而，查看 ui_mainwindow.h 可以对此事有所了解。小部件位于 dockWidgetContents_3 上，它是一个没有父级的 QWidget。所以唯一的方法似乎是通过 MainWinsow 的 ui->... 访问它，并且考虑公开 ui 让我成为一个“非常悲伤的熊猫”......

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:54:05.590

当您说“我创建了一个 QDockWidget，然后使用设计器将其转换为子类”时，我唯一能想到的意思是您使用“提升到...”操作将其转换为占位符QDockWidget 的编码子类。这意味着它希望将代码中的版本放在那个位置。如果您的设计器具有在该停靠小部件中布置的小部件，它们将不会自动组合到该类定义中。它们将作为 ui 对象上的属性，与同一个停靠小部件平行。

如果您想将 QLabel 和 QPushButton 组合为该自定义子类的一部分，那么您需要做的是在代码中定义它们，而不是作为可视布局的一部分。然后他们将成为那个实际子类的成员。

截至目前，我相信您会在您的 ui 上找到一个嵌套的 QLabel：

```
ui->dockWidgetContents_3
ui->pushButton_1
ui->label_1 
```

（或者您选择将您的 ui 包含在您的课程中）

现在假设您希望仍然能够直观地设计 QDockWidget 的内容区域。您可能会做的是在视觉上将其设计为单独的小部件。然后`dockWidgetContents`将 QDockWidget 提升为您的自定义 QWidget。然后它将能够将此组合放置为具有自己子项的小部件。

```
ui->CustomDockWidget->widget()->label_1 
```

# python - 在 Python 中使用 super 执行父函数

> ID：11978676
> 
> 赞同：4
> 
> 时间：2012-08-15T23:22:59.223
> 
> 标签：python, python-2.7, super

我在 Python 中的超级函数有一些问题。假设我有这两个类：

```
class A(object):
     x=5
     def p(self):
             print 'A'
     def f(self):
             self.p()
             self.x+=1

class B(A):
    def p(self):
             print 'B'
    def f(self):
             super(B, self).f()
             self.x*=2

b = B()
b.f() 
```

然后 bx 将等于 12，但该函数将输出“B”，而不是“A”。我需要的是执行 Ap 而不是 Bp，我该如何实现？

谢谢你的时间 ：）

* * *

编辑：好的，我认为你错过了一些关于我的实际情况的细节，因为我的例子很糟糕。让我们来看看真正的代码。我有这两个类（Django 模型）：

```
class Comment(Insert, models.Model):

    content = models.TextField()
    sender = models.ForeignKey('logic.User')
    sent_on = models.DateTimeField(auto_now_add=True)

    def __insert__(self):
        self.__notify__()

    def __notify__(self):
        receivers = self.retrieve_users()
        notif_type = self.__notificationtype__()
        for user in receivers:
            Notification.objects.create(
                object_id=self.id,
                receiver=user,
                sender_id=self.sender_id,
                type=notif_type
            )

    def __unicode__(self):
        return self.content

    class Meta:
        abstract = True

class UserComment(Comment):

    is_reply = models.BooleanField()
    reply_to = models.ForeignKey('self', blank=True,
                                null=True, related_name='replies')
    receiver = models.ForeignKey('User', related_name='comments')

    def __insert__(self):
        super(UserComment, self).__insert__()
        self.__notify__()

    def __notification__(self, notification):
        if self.is_reply:
            return '%s has replied your comment' % self.sender
        return super(UserComment, self).__notification__(notification)

    def __notify__(self):
        # Notification objects "should" be created by Comment's __notify__
        Update.objects.create(
            object_id=self.id,
            target=self.receiver,
            type=self.__updatetype__(),
        )

    @classmethod
    @cache(prop_name='_notificationtype')
    def __notificationtype__(cls):
        return NotificationType.objects.get(name='USER_COMMENT')

    @classmethod
    @cache(prop_name='_updatetype')
    def __updatetype__(cls):
        return UpdateType.objects.get(name='USER_COMMENT')

    def retrieve_users(self):
        return [self.receiver]  # retrieve_users MUST return an iterable 
```

问题出在两个模型上的`__insert__`和`__notify__`方法上。`__insert__`是第一次将对象记录到数据库时调用的方法，我主要将其用于通知目的。然后，这就是我想要做的：

1.  创建一个 UserComment 对象并保存
2.  调用 UserComment 实例的`__insert__`
3.  调用 Comment's `__insert__`，它*应该*调用 Comment's`__notify__`
4.  调用 UserComment 实例的`__notify__`from`__insert__`

这可能以或多或少的简单方式实现，还是我必须重构我的代码？
再次感谢您的所有回答。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T23:28:20.613

你只是说你想执行`A.p()`：

```
class B(A):
    def p(self):
        print 'B'
    def super_p(self):
        return A.p(self) # prints 'A' 
```

如果你想确保它`A.p()`被执行，最好的办法是从你的方法中显式调用它`B`。正如 Rajesh 所说，避免这种情况的最佳方法是不要覆盖您打算在基类中调用的方法。

超类无法知道有关子类的任何信息。例如，如果您实例化子类 B 并且它继承了一个方法`x()`并覆盖了一个方法`p()`，那么当您调用`x()`时，它将调用**B**`p()`中的定义，而不是 A 中的（覆盖）定义。这正是您应该期望的 - 您'已经创建了一个混合类并重写了其中一个方法。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T01:07:06.870

请记住，它`self`指的是一个实例，因为`b`它是 B 的一个实例，所以 self.p() 指的是`method p() in class B`，而不是 A。所以要么`p()`从类 B 中删除方法，要么从 B 显式调用`A's p()`：

```
class B(A):
    def p(self):
             super(B, self).p()
             print 'B'
    def f(self):
             super(B, self).f()
             self.x*=2 
```

或者制作 A 的 pa staticmethod 并从 A 类中的 f() 调用它`A.p()`，特别是如果您不需要从该方法访问该类，使 p[成为“函数”而不是“方法”](https://stackoverflow.com/a/155655/1431750)：

```
class A(object):
    x=5
    @staticmethod
    def p():
        print 'A'
    def f(self):
        A.p()
        self.x+=1 
```

有了这个 B，输出是：

```
>>> b = B()
>>> b.f()
A
>>> b.x
12
>>> b.p()
A
B 
```

请注意 B 如何仅在`b.p()`调用中打印，而不是在调用时打印`b.f()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T23:47:01.083

观察代码中事件的进展：

> 自我.x = 5
> 
> 自我.x = 6
> 
> 自我.x = 12

给定您的代码，这是获得 12 作为输出的唯一方法。但是，如果我们从 A 类而不是 B 类运行它，则会出现以下行为：

> 自我.x = 5
> 
> 自我.x = 6

在我看来，你想要那种行为。唯一的区别在于线路`self.x += 2`。

这将我们引向一个更有趣的问题，即为什么在将方法重载为不同的方法后，您希望（甚至期望）子类的行为与其父类的方法完全相同！`A`执行功能`x+1`，而`B`执行功能`(x+1)*2`，这显然是不同的。方法重载的根本目的是表现出与父类不同的行为，你*瞧*，它做到了！**

# javascript - 如何使用 ViewBag 在 MVC3 Razor 下为 JavaScript 变量赋值

> ID：11978681
> 
> 赞同：1
> 
> 时间：2012-08-15T23:24:03.000
> 
> 标签：javascript, asp.net-mvc-3, razor

> **可能重复：**
> [如何在 MVC3 下分配 JavaScript 值](https://stackoverflow.com/questions/11978006/how-to-assign-javascript-value-under-mvc3)

我尝试执行以下操作

```
<script type="text/javascript">

var techIDs = "";

@if (ViewBag.URLParameters != null)
{
   techIDs = '@ViewBag.URLParameters';
}

</script> 
```

但这似乎是一个错误的方法。

任何线索如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T23:35:26.330

试试这个

```
var techIDs = "";
@if (ViewBag.URLParameters != null)
{
   @:techIDs = '@ViewBag.URLParameters';
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T23:39:48.143

也许：

```
<script>
    var techIDs = '@Html.Raw(ViewBag.URLParameters ?? String.Empty)';
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T23:36:24.120

我找到了其他方法

```
 var techIDs = "";

   @if (ViewBag.URLParameters != null)
   {
         <text>techIDs = '@ViewBag.URLParameters' ;</text>
   } 
```

# assembly - Z80 如何在内存的不同位置加载不同的程序块？

> ID：11978683
> 
> 赞同：0
> 
> 时间：2012-08-15T23:24:04.577
> 
> 标签：assembly, z80

## 我的问题

构建下面的代码我得到：“319920C30020C30A20FBED563E00C600CA0520F33E55D3073E00FBC9”

我的问题是我假设这将用零填充，这样每个代码块都位于程序存储器中请求的地址 0000H、0038H 和 2000H。

立即我可以看到手动进行填充的解决方法，但是 Z80 处理器如何加载上述程序，以位于正确的地址？

## 代码

```
STACK .EQU 2099H
.ORG 0000H
    ld  SP, STACK
    jp 2000H

.ORG 0038H
    jp  service_routine

.ORG 2000H
    EI
    IM 1 
    LD  A, 00H

LOOP:
    ADD A, 00H
    jp  z, LOOP

service_routine:
    DI
    ld  A, 55H
    out (07H),A
    ld  A, 00H
    EI
    ret 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:30:10.543

该`ORG`指令仅告诉汇编器您认为 PC 在代码中的那个点是什么。然后，汇编器可以使用它来计算相对跳转的正确代码。它不会指示汇编器或加载器实际加载该地址处的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:35:47.203

将磁盘映像转换为正在运行的程序的过程可能非常复杂。在过去，1k 个零块被视为对磁盘空间的严重浪费，但今天在不同的规模上也是如此——你可能会嘲笑 1K 个零，但没有人会怀疑文件中的 1G 个零会是浪费。

根据机器架构，该过程可能涉及的不仅仅是重新定位代码和数据块。例如，代码中的跳转地址可能必须被修补以引用外部模块的正确地址。

# node.js - 如何从 node.js 中的字符串创建 MongoDB Long DataType

> ID：11978686
> 
> 赞同：0
> 
> 时间：2012-08-15T23:24:14.497
> 
> 标签：node.js, mongodb

阅读有关 MongoDB[长数据类型](http://mongodb.github.com/node-mongodb-native/api-bson-generated/long.html)的页面- 它说我创建了一个这样的：

```
var myLong = new Long(low, high); 
```

其中低和高是较大的 64 位数字的有符号 32 位部分......

我使用[node-bigint将以下数字作为字符串](https://github.com/substack/node-bigint)

```
'164150943396226415094339622641509433' 
```

我如何转换这个 64 位的！？！将字符串转换为 Long 构造函数所需的 32 位低位和高位...

另外 - 使用字符串或 Long 索引的 Mongo $gt 搜索会更快吗？

在此先感谢 - 我已经超出了我的深度......

**编辑 1**

对 - 在[原始](https://stackoverflow.com/questions/11973275/node-js-saving-large-floating-point-numbers-into-mongo-for-searching)（更模糊）线程上 - 答案是这个数字对于 64 位来说太大了......

所以-我的问题是，将这个数字分成两部分保存和搜索的最快方法是什么，所以原始字符串变为：

```
'164150943396226415' and '094339622641509433' 
```

我应该把它们变成 Longs（在这种情况下，前导零呢）还是字符串搜索快/慢......

你可以重新表述这个问题：

在 MongoDB 中，Long 或 String 会更快：

```
'164150943396226415' 
```

再次感谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:13:27.637

正确的！

我一直在和我的朋友交谈——他已经解释了我所有被误导的假设......

数字 '164150943396226415094339622641509433' 对于 64 位来说太大了...

他说搜索字符串总是会逐个字符地进行，并且将数字拆分为实际 64 位数字的 2 互补对更快......

所以，对于上面的数字，我们有：

```
var higher = Long.fromString('1641509433962264150');
var lower = Long.fromString('94339622641509433'); 
```

然后做一个：

```
( this.higher > that.higher ) && (this.lower > that.lower) 
```

很抱歉问了一个基于我自己的误解的问题:)

# javascript - 倒计时后在 android 上使用 javascript 开始音频

> ID：11978687
> 
> 赞同：0
> 
> 时间：2012-08-15T23:24:15.067
> 
> 标签：javascript, android, html, audio

我想在 android 的浏览器中使用 javascript 在特定时间开始一个音频剪辑。以下带有 HTML5 的代码在我的笔记本电脑上运行良好，倒计时也适用于 android，我可以手动启动剪辑（4.1 果冻豆）。因此支持编解码器，javascript 本身对于笔记本电脑（linux）上的 firefox 和 chrome 应该没问题，但在 android 上有些问题：**audio.play() 不启动音频。但是，如果我制作一个调用 audio.play() 的按钮，它就可以工作。**

这是代码：

```
<html>
<head>
<title>countdown and play</title>
<script type="text/javascript">
deadline = new Date(2012,7,16,1,8,00);

function countdown() 
{
    var now = new Date();
    if (deadline-now <= 0){
        var audio = document.getElementsByTagName("audio")[0];
        audio.play();
        document.getElementById("countdown").innerHTML="time's up!";
    } else {
        document.getElementById("countdown").innerHTML=Math.ceil((deadline-now)/60000)+" minute(s) to go!";
        t=setTimeout(function(){countdown()},500);
    }
}
</script>
</head>
<body>
<p id="countdown">starting countdown</p>
<audio src="audio.ogg" preload="auto" controls>
<p>Your browser does not support the audio element </p>
</audio>
<script type="text/javascript">
var audio = document.getElementsByTagName("audio")[0];
audio.load();
audio.onloadeddata = countdown();
</script>
</body>
</html> 
```

有任何想法吗？提前致谢

# objective-c - 我如何将 FMDatabase 存储到 iCloud

> ID：11978693
> 
> 赞同：0
> 
> 时间：2012-08-15T23:24:37.677
> 
> 标签：objective-c, ios, xcode, icloud

您好，我正在尝试将 FMDatabase 保存到 iCloud。我只能保存 NSData 或 UIDocument 我该怎么办？有没有办法这样做？如果是这样，请让我知道任何输入将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:37:08.837

默认情况下，保存到 NSDocumentsDirectory 的所有文件都备份到 iCloud。FMDB 只是标准 SQLite API 的包装器，因此使用它创建的数据库可以很好地备份。有关 iCloud 备份的更多信息，[请阅读此处的文档](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/iCloud/iCloud.html)。

# ruby-on-rails - Separating back end and front end servers in Rails application?

> ID：11978695
> 
> 赞同：1
> 
> 时间：2012-08-15T23:24:50.020
> 
> 标签：ruby-on-rails, webserver, decoupling

I have a Rails application that does a lot of media encoding. I am handling it via background processes, but I see that CPU gets overloaded and the front end loading times are definitely slower than they should be (or were before the back end part became bigger).

So the problem: Rails app with media encoding features experiences CPU loads and front-end slowed down. Goal - decouple front-end and back-end (media encoding) part.

Question - what is the best approach to split an existing application into two parts (front-end part and back-end part)?

1) Is it a good idea to run two copies of app on two servers and make calls between then POSTing/PUTting information via HTTP (or connecting to a remote db)?

2) Is it a good idea to keep the CPU-intesive part wrapped up in Rails code, or should I aim to strip it off the Rails functionality?

If someone can point to a good guide on running multi-server Rails application, that would be great (search returns questions on multi-server Capistrano deployment, but I need some less specific recipes).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:50:04.297

A common approach that works well is to use a work queue like [Resque](https://github.com/defunkt/resque/).

**Managing the code**
For ease of management, keep the processing code and the app "in the app". Deploy two app-servers but run resque workers on the processing server.

**State changes**
If the processing jobs relate to ActiveRecord persisted objects you can poll state from the front-end and periodically update it from the backend during the encoding process.

You might find it useful to use [state machine](https://github.com/pluginaweek/state_machine).

**Your problems have moved**
Now you're cloud-scale™ :D More processing hosts running workers can be added if your queue gets too long. If your front-end is the only web-accessible host you can set up a rack middleware or run rainbows to proxy the processed results through the frontend to the client.

Sounds like an interesting project. Good luck!

# javascript - 函数声明后是否需要分号？

> ID：11978698
> 
> 赞同：24
> 
> 时间：2012-08-15T23:24:59.177
> 
> 标签：javascript

> **可能重复：**
> [JavaScript：我什么时候应该在花括号后使用分号？](https://stackoverflow.com/questions/2717949/javascript-when-should-i-use-a-semicolon-after-curly-braces)

有人在函数声明后添加了分号，但有人没有。这是在函数声明后添加分号的好习惯吗？

```
function test(o) {
}

function test(o) {
}; 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-15T23:29:51.937

[函数声明](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function)不需要（也不应该有）后面的分号：

```
function test(o) {
} 
```

但是，如果您将函数编写为[表达式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/function#Syntax)，例如下面的变量初始化器，那么该语句应该以分号终止，就像任何其他语句一样：

```
var a = function test(o) {
}; 
```

查看有关[构造函数与声明（语句）与表达式](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions#Constructor_vs._declaration_vs._expression)的更多信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T00:11:13.603

实际发生的情况是您在函数之后添加了一个空语句。

```
function test (o) { return o; }; 
```

可以看作类似于：

```
var test = 0;; 
```

第二个分号本身并不是一个***错误***。浏览器将其视为绝对没有发生任何事情的声明。

这里有两件事要记住。

这仅适用***于***函数声明和控制块（for/if/while/switch/etc）。

函数声明应该定义在你的作用域的底部，所以你不会遇到这样的问题：

```
function test () {}
(function (window, document, undefined) { /* do stuff */ }(window, document)); 
```

因为浏览器会假设您的意思是`function test() {}(/*return value of closure*/);` 哪个是错误。一个非常糟糕和令人讨厌的错误，很容易被忽视。

但这没关系，因为函数声明可以在 return 语句下并且仍然可以正常工作。

所以即使你想去：

```
function doStuff () {
    return (function () { /*process stuff*/ test(); }());
    function test () {}
} 
```

这会很有效。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-15T23:30:04.910

分号和函数声明：

```
function test(o) {
    // body
} // semicolon no

var test = function (o) {
    // body
}; // semicolon yes 
```

有关格式化代码问题，请参阅[JSLint](http://www.jslint.com/)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-15T23:28:15.103

不。

定义这样的函数时不需要分号。

但是，如果您定义这样的函数：

```
var test = function (o) {
} 
```

这不是绝对必要的，但您可能想要使用它们，特别是如果您将函数放在一行上。

第一种方式定义了一个函数，而第二种方式将一个函数赋值给一个变量，因此是一个语句。大多数语句用分号分隔。定义函数可以被认为是一个常见的反例，因为没有多少人使用它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T23:30:07.737

对于浏览器来说，这并不重要。就语义而言，仅在您对函数进行原型设计或使用函数语句时才重要。

```
function stuff(stuff) {
     alert(stuff);
} //don't need a semicolon

Object.prototype.stuff = function(stuff) {
    alert(stuff);
}; //need a semicolon
var stuff = function(stuff) {
    alert(stuff);
}; //need a semicolon 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T23:55:48.540

定义函数时不需要分号，但加分号也不是错误。

但是有一个例外，如果您使用函数包装器并传递参数，则**需要**在其间添加分号，例如：

```
(function(v){alert(v)})('1');
(function(s){alert(s)})('0') 
```

*   否则会导致错误：http: [//jsfiddle.net/twUD3/1/](http://jsfiddle.net/twUD3/1/)

`... Otherwise forget about them ...`

# c# - 具有类似 WPF 的 GUI 创建的多平台编程语言？

> ID：11978701
> 
> 赞同：1
> 
> 时间：2012-08-15T23:25:19.727
> 
> 标签：c#, .net, wpf, cross-platform, porting

我正在寻找一些可以让我像在 WPF 中一样简单（或更容易）编写 GUI 的语言，但这确实是跨平台的。Mono、Silverlite 等很好，但要么不支持 WPF，要么不可靠、不完整、不支持 Linux……我将用它来重写一些较旧的 WPF 应用程序，以便它们也可以在 Mac 和 Linux 上运行。

这是我的要求

1.  类似于 C# 和 WPF 的语法和编程技术。特别是，我需要这种语言来提供像 WPF 一样的 GUI 设计的标记样式。这意味着不像 Swing 那样旧的模糊代码方式。
2.  无需使用低级技术即可获得良好的 GUI 性能（如在 WPF 中）
3.  该语言不需要（由VM）解释它可以编译，但我更喜欢垃圾收集和高级编程，而不是处理指针、析构函数等。
4.  将不胜感激 C# 出色的语法功能，如 lambda 表达式、LINQ、属性等。

有没有这样的语言？是否有任何其他选项可以将这些应用程序移植到 Mac 和 Linux（除了单声道）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T23:46:06.760

不幸的是，没有真正跨平台的直接“C#/WPF”等价物。使用 Moonlight 的 Mono 可能是最接近的方法，尽管您出于各种原因排除了它。

就整体功能集而言，最接近的选项可能是使用[Qt](http://qt.nokia.com/products/)。这确实有一个非常不同的编程模型（C++ 而不是 C#），尽管在那里做了很多工作来简化内存管理，并且信号/插槽机制确实提供了（*一些*）与 .NET 相同的优势。

话虽如此，这仍然有很大的不同。QML 与 XAML 非常不同（尽管两者都试图提供一种标记设计风格）。但是，它确实提供了强大的高级图形编程，并且是真正的跨平台（并且在非 Windows 平台上得到很好的支持）。

# datagridview - datagridview 在匿名列表中抛出“对象与目标不匹配”类型

> ID：11978704
> 
> 赞同：1
> 
> 时间：2012-08-15T23:25:34.200
> 
> 标签：datagridview, linq-to-entities, datasource, anonymous-types, anonymous-class

我从连接中得到一个结果并将其存储在一个匿名对象中：

```
var res = from route in context.Route join cust in context.Customers on route.customer_id equals cust.customer_id select new {sell_id = route.sell_id, company_name = cust.company_name};
List<Object> mylist = res.ToList(); 
```

然后我尝试将另一个匿名方法（具有相同的“属性”）添加到列表中

```
Object ab = new {sell_id=23, company_name="foo"};
mylist.Add(ab); 
```

即使在监视窗口中调试时，列表的项目似乎和谐相处（它们看起来相同！），但 gridview 真的不喜欢它：

```
datagridview.datasource = mylist; 
```

我得到了例外`'Object does not match target type'`

上面的代码是为示例而简化的。我不想为连接创建一个特殊的类，而是使用匿名对象。

任何解决方法？

# c - pcap_loop 的最后一个参数中的编译器警告。指向不同大小的整数

> ID：11978705
> 
> 赞同：1
> 
> 时间：2012-08-15T23:25:40.560
> 
> 标签：c, pointers, tcp, warnings, pcap

我收到此警告：

```
cast to pointer from integer of different size 
```

尝试编译我的程序时。这段特殊的代码几乎是从一个示例 TCP 连接程序中提取的，我只是一个业余程序员，所以我猜这个解决方案很明显，但它让我发疯。

我对 pcap_loop 函数的理解是`u_char *`指向接收函数的第一个参数，对吧？如果是这种情况，为什么会收到警告？

因为我不太确定出了什么问题，所以我已经完整地包含了我认为相关的功能，我真的希望你们中的一些人能在这里找到它来帮助我。

```
void receive(u_char *args, const struct pcap_pkthdr *pkthdr, const u_char *buffer)
{
const int one = 1;
int LEN = *args;        
struct ipheader *ip;
struct tcpheader *tcp;

ip = (struct ipheader *)(buffer + LEN);
tcp = (struct tcpheader *)(buffer + LEN + sizeof (struct ipheader));

printf("%d\n", LEN);

printf("Packet received. ACK number: %d\n", ntohl (tcp->tcph_seqnum));
printf("Packet received. SEQ number: %d\n", nthol (tcp->tcph_acknum));
s_seq = nthol (tcp->tcph_seqnum);

send_syn_ack(s_seq, dip, sip, dport, sport);    

sleep(100);
}

void capture()
{
pcap_t *pd;
bpf_u_int32 netmask;
bpf_u_int32 localnet;
char *filter = ("ip dest host %s", dstip);      
char *dev = NULL;
char errbuf[PCAP_ERRBUF_SIZE];
struct bpf_program filterprog;
int dl = 0, dl_len = 0;

if ((pd = pcap_open_live(dev, 1514, 1, 500, errbuf)) == NULL) 
    {           
        fprintf(stderr, "cannot open device %s: %s\n", dev, errbuf);
        exit(1);
    }

pcap_lookupnet(dev, &localnet, &netmask, errbuf);
pcap_compile(pd, &filterprog, filter, 0, localnet);
if (pcap_setfilter(pd, &filterprog) == - 1)
    {
        fprintf(stderr, "cannot set pcap filter %s: %s\n", filter, errbuf);
        exit(1);
    }

pcap_freecode(&filterprog);
dl = pcap_datalink(pd);

switch(dl) {
    case 1:
        dl_len = 14;
        break;
    default:
        dl_len = 14;
        break;
}       

if (pcap_loop(pd, -1, receive, (u_char *)dl_len) < 0)   /* THIS IS THE LINE IN QUESTION */
    {
        fprintf(stderr, "cannot get raw packet: %s\n", pcap_geterr(pd));
        exit(1);
    }
} 
```

* * *

非常感谢你们俩！@pb2q 我有点困惑。当你说：

> 您需要传递它的地址，并确保变量是动态分配的或保持在范围内>回调执行时。

恐怕我不确定在此示例中如何将其转换为代码，并且我不希望代码马虎，尽管下面的建议似乎可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T23:45:06.783

该函数需要一个指向用户数据的指针，以传递给回调函数。您提供的参数是整数，而不是指针，如果在回调中使用，它将被解释为内存地址。这不是你想要的。

如果你想传递`dl_len`给回调，并且能够查看它的值（看起来它只是*14*），你需要传递它的*地址*，并确保变量是动态分配的或保持在范围内回调执行。

像这样传递一个指针 - 请注意`&`：

```
if (pcap_loop(pd, -1, receive, (u_char *) &dl_len) < 0) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T23:43:12.170

> 我对pcap_loop函数的理解是u_char *指向receive函数的第一个参数，对吧？如果是这种情况，为什么会收到警告？

正确的。我想你在 x64 上运行，问题出在这段代码中`(u_char *)dl_len)`。您正在尝试将一个 int（在您的平台上很可能是 4 个字节）转换为一个指针（在您的平台上很可能是 4 个字节）。

您的情况的快速解决方法是将类型更改`dl_len`为`long`. 更可取的解决方案是更改`(u_char *)dl_len)`为`reinterpret_cast<char*>(dl_len)`.

您还需要更改`int LEN = *args;`为`int LEN = args`，因为您不想尊重这个错误的内存指针。

# java - 帮助我理解这个循环在java中发生了什么

> ID：11978707
> 
> 赞同：1
> 
> 时间：2012-08-15T23:25:48.410
> 
> 标签：java, loops

```
PrintStream out = System.out;

    int sum = 0;
    for(int i = 0; i<5; i++)
        for(int j=i; j<5; j++)
            sum++;
    out.println(sum); 
```

输出：15。我不知道这是如何得到 15。我试着在脑海中解决它，我一直得到 25。

如果我们忽略第二个 for 循环，并将 sum++ 放在第一个 for 循环中，你会得到 5。但是我们如何从第二个 for 循环中得到 15？

```
PrintStream out = System.out;

    int sum = 0;
    for(int i = 0; i<5; i++)
        for(int j=i; j<5; j++);
            sum++;
    out.println(sum); 
```

输出： 1\. 如果你把 ; 在 for 声明之后。它停止了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T23:28:16.590

```
i = 0 => j goes from 0 to 4 => sum = 5  
i = 1 => j goes from 1 to 4 => sum = 5 + 4 = 9  
i = 2 => j goes from 2 to 4 => sum = 9 + 3 = 12  
i = 3 => j goes from 3 to 4 => sum = 12 + 2 = 14  
i = 4 => j goes from 4 to 4 => sum = 14 + 1 = 15 
```

您的第二个代码段无法按原样编译。

**编辑**

现在您的第二个代码段已编译：

```
for(int i = 0; i<5; i++)
    for(int j=i; j<5; j++);
        sum++; 
```

相当于（这就是为什么你应该总是使用大括号）：

```
for(int i = 0; i<5; i++) {
    for(int j=i; j<5; j++) {
    }
}
sum++; 
```

这就解释了为什么它输出 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:27:29.490

循环基本上是在创建一个三角数，特别是第 5 个三角数，例如 形式的数`n + (n - 1) + ... + 2 + 1`。

诀窍以及您**看**不到*25*结果的原因在于第二个循环：它仅从*当前*值迭代`i`到`5`.

在内部循环的每次迭代中，总和都会增加一次。由于循环技巧，内部循环迭代了 5 次，然后是 4 次，依此类推：

```
first iteration of the outer loop: j = 0 to 4 -> 5 increments
second iteration of the outer loop: j = 1 to 4 -> 4 increments  
... 3 increments
... 2 increments
... 1 increment 
```

5 + 4 + 3 + 2 + 1 = 15

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T23:27:56.970

输出为 15，因为在第一个循环的每次迭代中`j`被初始化为 的值。`i`

如果`j`改为初始化为零，则输出将为 25。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T23:31:41.713

得到 25，而不是

```
 for(int j=i j<5; j++); // inner loop
        sum++; 
```

采用

```
//......here
for(int j=0 j<5; j++); // inner loop
        sum++; 
```

你现在做的是 `(1+1+1+1+1) + (1+1+1+1) + (1+1+1) + (1+1) + (1)`，而你想要的是`(1+1+1+1+1).. 5 times`

ps为什么第二个代码中的循环是`for(int j=il j<5; j++);` ？`il`未定义，`;`即使您`il`之前已在某处定义，它也会停止。

# php - 公式/查询返回“错误”结果

> ID：11978708
> 
> 赞同：0
> 
> 时间：2012-08-15T23:25:49.520
> 
> 标签：php, mysql, math

我为以前的问题/问题获得了帮助，并且刚刚意识到给我的脚本返回了“错误”的数字/值（但不会触发 php/mysql 错误）。这是值：

成分＃1：**20.216卡路里**

成分＃2：**134.4564卡路里**

脚本*应*返回：**154.67**，但返回：**91.35**

编码：

```
<?php
//The Recipe selected
$recipe_id = $_POST['recipe_id'];

/*****************************************
 * Total CALORIES in this recipe
 *****************************************/

echo '<h4>Total calories in this recipe:</h4>';

$result = mysql_query(
  "SELECT SUM(ingredient_calories), ingredient_amount
  FROM recipe_ingredients
  INNER JOIN ingredients USING (ingredient_id)
  WHERE recipe_id = $recipe_id");

while ($row = mysql_fetch_array($result)) {
  $recipe_calories = (
    $row['SUM(ingredient_calories)']
    * $row['ingredient_amount']);
}
echo number_format($recipe_calories, 2);

mysql_free_result($result);
?> 
```

**成分**表存储每种成分的默认值和份量。

**recipes**表，存储/设置 recipe_id 和其他与查询无关的数据）

recipe_ingredients表映射**配方**中的成分并存储配方中使用的量。

我确定这是查询的问题，但我耳朵后面太湿了，无法确定问题。任何帮助是极大的赞赏 ：）

**更新：**这是表数据，根据要求

```
ingredients
-----------
ingredient_id
ingredient_name
ingredient_calories

recipes
-------
recipe_id
recipe_name

recipe_ingredients
------------------
recipe_id (fk)
ingredient_id (fk)
ingredient_amount 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:33:12.800

你不想要这个：

```
SELECT SUM(ingredient_calories), ingredient_amount 
```

在`SUM`一列而不是另一列可能是您的错误所在。事实上，当我在 mysql (5.0.51a) 中尝试这个查询时，我只是得到一个错误。

```
ERROR 1140 (42000): Mixing of GROUP columns (MIN(),MAX(),COUNT(),...) with no
GROUP columns is illegal if there is no GROUP BY clause 
```

改为这样做：

```
SELECT SUM(ingredient_calories * ingredient_amount) 
```

并从您的 php 中的单个结果行中获取该单个列：

```
$row = mysql_fetch_array($result)
$recipe_calories = $row[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T23:34:16.517

这是一个猜测，因为您实际上并没有说明问题是什么，但是，`$recipe_calories`结果中的每一行都会被覆盖。也许你的意思是：

```
$recipe_calories = 0;
while ($row = mysql_fetch_array($result)) {
  $recipe_calories += (
    $row['SUM(ingredient_calories)']
    * $row['ingredient_amount']);
} 
```

虽然你应该只用 SQL 来做这一切——没有必要用 PHP 来计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T00:52:00.557

弄清楚了！

做了以下调整：

```
$result = mysql_query(
  "SELECT ingredient_calories, ingredient_amount
  FROM recipe_ingredients
  INNER JOIN ingredients USING (ingredient_id)
  WHERE recipe_id = $recipe_id");

while ($row = mysql_fetch_array($result)) {
  $recipe_calories += (
    $row['ingredient_calories']
    * $row['ingredient_amount']);
}
echo number_format($recipe_calories, 2); 
```

问题解决了 ：）

# email - 本地 NuGet 库服务器无法发送电子邮件

> ID：11978709
> 
> 赞同：3
> 
> 时间：2012-08-15T23:25:53.793
> 
> 标签：email, nuget-server

有没有人能够让本地 NuGet 库运行，并能够发送帐户确认电子邮件？我已经能够让服务器在本地 SQLExpress DB 上正常运行，但我似乎无法从系统发送电子邮件。

他们使用一些名为 anglicangeek.markdownmailer 的库，我似乎找不到任何相关信息。

如果有人有小费，我很想听听！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-07T19:52:54.507

根据 NugetGallery 的 web.config 中解释的格式查找、取消注释和添加值

```
<add key="Gallery.SmtpUri" value="" /> 
```

# vba - 使用 VBA 将另一个工作簿中的工作表加载到 Excel 中

> ID：11978711
> 
> 赞同：1
> 
> 时间：2012-08-15T23:26:03.250
> 
> 标签：vba, excel

我正在尝试创建一个子例程，提示用户选择一个工作簿，然后将所选工作簿的第一个工作表添加为现有（活动）工作簿中的选项卡。然后将新选项卡命名为“数据”。这是我到目前为止使用的代码：

```
Sub getworkbook()
' Get workbook...
Dim ws As Worksheet
Dim filter As String
Dim targetWorkbook As Workbook

Set targetWorkbook = Application.ActiveWorkbook

' get the customer workbook
filter = "Text files (*.xlsx),*.xlsx"
caption = "Please Select an input file "
ws = Application.GetOpenFilename(filter, , caption)

ws.Add After:=Sheets(Sheets.Count)

ws.Name = "DATA"

End Sub 
```

此代码似乎不起作用，并返回以下错误：

> "ws.Add" 方法或 With Block 未设置。

任何帮助表示赞赏。

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T23:37:50.117

您已声明`ws`为工作表并`GetOpenFilename`返回文件名。我建议在此[链接](https://stackoverflow.com/questions/11955315/excel-vba-open-file-error-handling/11955839#11955839)中阅读我的帖子：

这是你正在尝试的吗？

**注意**：我没有做任何错误处理。我相信你可以解决这个问题。

```
Sub getworkbook()
    ' Get workbook...
    Dim ws As Worksheet
    Dim filter As String
    Dim targetWorkbook As Workbook, wb As Workbook
    Dim Ret As Variant

    Set targetWorkbook = Application.ActiveWorkbook

    ' get the customer workbook
    filter = "Text files (*.xlsx),*.xlsx"
    Caption = "Please Select an input file "
    Ret = Application.GetOpenFilename(filter, , Caption)

    If Ret = False Then Exit Sub

    Set wb = Workbooks.Open(Ret)

    wb.Sheets(1).Move After:=targetWorkbook.Sheets(targetWorkbook.Sheets.Count)

    ActiveSheet.Name = "DATA"
End Sub 
```

# php - 无法通过 SMTP 发送电子邮件，因为“550 - 不允许中继”

> ID：11978721
> 
> 赞同：3
> 
> 时间：2012-08-15T23:27:09.237
> 
> 标签：php, email, cakephp, smtp, mediatemple

我正在使用 CakePHP 向客户发送自动电子邮件。它一直运行良好，但似乎有些收件人没有收到我们的电子邮件。所以我决定使用 SMTP 选项来发送电子邮件，并通过我们位于 Media Temple 的电子邮件提供商发送电子邮件。但是，当尝试从 Media Temple 帐户发送电子邮件时，我收到错误“550 - 不允许中继”。听起来 Media Temple 服务器只是简单地不允许我通过它发送邮件。这很奇怪，因为我已经确认我使用的用户名和密码是正确的，并且我可以通过我的 macmail 客户端和 iPhone 邮件客户端通过 SMTP 发送邮件。我还确认我的 cakephp 电子邮件设置是正确的，因为我可以使用与 cakephp 中完全相同的配置的 gmail 帐户通过 SMTP 发送电子邮件。知道为什么我 我收到此错误以及如何解决？谢谢

这是处理发送电子邮件的代码。我在许多不同的控制器中使用这个类，就像使用常规的 EmailComponent 一样。

```
 class CanadafindsEmailerComponent extends EmailComponent 
{ 
    ...
    function send($content = null, $template = null, $layout = null) {  
    if(!in_array(TECHY_MONITOR_EMAIL,$this->bcc) && is_array($this->bcc))
        $this->bcc[]=TECHY_MONITOR_EMAIL;
    else if (!in_array(TECHY_MONITOR_EMAIL,$this->bcc) && !is_array($this->bcc))
        $this->bcc=array(TECHY_MONITOR_EMAIL);
    if(DEVSITE){//commented-out code are settings for smtp with gmail, which works fine
        $this->delivery = 'smtp'; 
        $this->smtpOptions = array(
            'port'=>'465',//'465', 
            'timeout'=>'30',//'30',
            'auth' => true,
            'host' => 'ssl://mail.thenumber.biz',//'ssl://smtp.gmail.com',
            'username'=>USERNAME,//'USERNAME@gmail.com',
            'password'=>SMTP_PASSWORD//,
        );
        $this->to=$this->correctFormatOn($this->to);
        $this->bcc=$this->correctFormatOn($this->bcc);
        $this->cc=$this->correctFormatOn($this->cc);
        $this->replyTo=$this->correctFormatOn($this->replyTo);
        $this->from=$this->correctFormatOn($this->from);
    }
    return parent::send($content,$template,$layout);
   }
   function correctFormatOn(&$email){
    if(is_array($email)){
        $copiedEmail=array();
        foreach($email as $singleEmail){
            $copiedEmail[]=$this->correctFormatOnSingle($singleEmail);
        }
        $email=$copiedEmail;
    }else{
        $email=$this->correctFormatOnSingle($email);
    }
    return $email;

   }

   function correctFormatOnSingle(&$email){
    $subEmails=explode(",",$email);
    $fixedSubEmails=array();
    foreach($subEmails as $subEmail){
        $fixedSubEmails[]=preg_replace('/<?([^< ]+)@([^>,]+)[>,]?/i', '<$1@$2>', trim($subEmail));
    }
    $email=implode(",",$fixedSubEmails);
    return $email;
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T23:03:11.783

我遇到的主要问题是客户端没有从我们的服务器接收电子邮件，（因此我想使用 SMTP 服务器来查看是否可以解决它，而不是服务器的默认电子邮件服务器）。但我设法让这些客户端通过进行一些其他更改来接收来自服务器的电子邮件，从而消除了使用 SMTP 和 Media Temple 电子邮件服务器的需要。（作为一个仅供参考，我发现我们收到了来自客户端电子邮件服务器的退回邮件，说明`Diagnostic-Code: smtp; 550 Access denied - Invalid HELO name (See RFC2821 4.1.1.1)`，但它们被直接发送回服务器，并进入 linux 用户帐户“www-data”。（我在 /var/mail/www-data 中阅读它们，仅使用 tail 和 vim）。我发现处理电子邮件发送的后缀将电子邮件发件人的主机名（即“HELO 名称”）标记为 canadafinds3，这是我在 Rackspace 中为服务器提供的名称，而不是域名：canadafinds.com。所以我在 /etc/postfix/main.cf 中更改了它，重新启动了 postfix，等等！这些特定客户不再有反弹，每个人都再次感到高兴。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T23:05:20.173

为了规避这个错误，我最终基于[http://www.dreamincode.net/forums/topic/36108-send-emails-using-php-smtp-direct/编写了自己的 PHP mail() 脚本。](http://www.dreamincode.net/forums/topic/36108-send-emails-using-php-smtp-direct/)

# macos - 需要有 Mac OS X Mountain Lion 的人吗？UDP 探针

> ID：11978723
> 
> 赞同：1
> 
> 时间：2012-08-15T23:27:32.057
> 
> 标签：macos, udp, osx-lion, dtrace

如果您有 Mac OS X Mountain Lion，您可以在终端屏幕上写入“sudo dtrace -ln udp:::”并为我复制结果吗？

我需要了解是否可用于新操作系统的 UDP 探测。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:29:58.030

这是我电脑上的回复。

```
 ID   PROVIDER            MODULE                          FUNCTION NAME
dtrace: failed to match udp:::: No probe matches description 
```

# ios - *** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，

> ID：11978726
> 
> 赞同：0
> 
> 时间：2012-08-15T23:27:48.703
> 
> 标签：ios, selector

我是新手`iOS`，我想实现一个启动屏幕并从数据库加载数据然后传输到另一个视图控制器以显示数据`UITableView` 这是我的代码

```
#import "SplashViewController.h"
#import "DataLoader.h"
#import "UISessionTable.h"
@interface SplashViewController ()  

@end
@implementation SplashViewController

@synthesize sessionsDataFromDatabase;

-(void) viewDidLoad{
    [super viewDidLoad];

   double  currentTime = [[NSDate date] timeIntervalSince1970];

    dispatch_queue_t downloadQueue = dispatch_queue_create("session data loader", NULL);
    dispatch_async(downloadQueue, ^{
        //code to load session into array

        self.sessionsDataFromDatabase = [DataLoader getSessions]; 
        dispatch_async(dispatch_get_main_queue(), ^{

            double differance = 5000.0 - ([[NSDate date] timeIntervalSince1970] - currentTime) ;

            differance = differance<0? 0:differance;

            [[NSTimer scheduledTimerWithTimeInterval: differance target:self
                                                              selector: @selector(pushToSessionTableViewController:) userInfo: nil repeats: NO]fire];

                    });
    });
    dispatch_release(downloadQueue);

}
-(void) viewDidUnload{
    [super viewDidUnload];
    self.sessionsDataFromDatabase = nil;
}
-(void) pushToSessionTableViewController{

    UISessionTable * obj = [[UISessionTable alloc]init ];

    [obj setSessionsData:self.sessionsDataFromDatabase];

    [self.navigationController pushViewController:obj animated:YES];

}
@end 
```

运行时出现以下错误

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 
'-[SplashViewController pushToSessionTableViewController:]: unrecognized selector sent 
to instance 0x6e45740' 
```

有什么建议吗？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T23:30:25.140

最后的冒号用于接收参数的方法，您的不接收任何内容。这就是它找不到该方法的原因（它假定它是另一个未声明的方法）。

代替

```
pushToSessionTableViewController: 
```

和

```
pushToSessionTableViewController 
```

# citrix - 注销思杰会话

> ID：11978729
> 
> 赞同：0
> 
> 时间：2012-08-15T23:28:06.010
> 
> 标签：citrix, xenapp

我想终止托管在 xen 应用服务器中的会话。当我传递以下参数以在命令行上执行时，例如

/username:TestUser /domain:TestDomina /password:xxxxyyyz /cmdline:logoff 使用 shell api 吗？

wfc 命令行 usgae 弹出。这是否意味着我们无法使用 wfc 中的命令行选项注销？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T03:15:01.143

要从用户正在运行的应用程序中注销当前会话，您可以使用以下命令。

```
WTSLogoffSession(WTS_CURRENT_SERVER_HANDLE, WTS_CURRENT_SESSION, false) 
```

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa383836%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383836%28v=vs.85%29.aspx)

# jquery - 如何简化 if/else 条件代码

> ID：11978730
> 
> 赞同：1
> 
> 时间：2012-08-15T23:28:07.833
> 
> 标签：jquery

我正在尝试简化以下脚本。条件语句似乎是多余的这里有人帮助我吗？非常感谢。

```
function createHelpImage(element, elementType){

  $element = $(element);
  if(elementType=='img'){

    $(document.createElement('img'))
    .attr({src:'inc/images/help_bubble.png', title:'help Image', 'class': 'helpImg'})
    .insertBefore($element)
    .css({'position':'absolute',
      'z-index':999
    })
    .position({
      my: 'left bottom',
      at: 'left center',
      of: $element

    });
  }else{
    $(document.createElement('img'))
    .attr({src:'inc/images/help_bubble.png', title:'help Image', 'class': 'helpImg'})
    .prependTo($element)
    .css({'position':'absolute',
      'z-index':999
    })
    .position({
      my: 'left bottom',
      at: 'left center',
      of: $element[0]

    });
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T23:33:45.967

尝试在最后一行使用[三元运算符：](http://en.wikipedia.org/wiki/?%3a#JavaScript)

```
 of: (elementType=='img') ? $elemen : $elemen[0] 
```

这是假设您的 if/else 代码块中只有最后一行不同。您的代码如下所示：

```
function createHelpImage(element, elementType){
    $(document.createElement('img'))
    .attr({src:'inc/images/help_bubble.png', title:'help Image', 'class': 'helpImg'})
    .insertBefore($element)
    .css({'position':'absolute',
      'z-index':999
    })
    .position({
      my: 'left bottom',
      at: 'left center',
      of: (elementType=='img') ? $element : $element[0]
    });  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T23:33:01.167

只需从 if/else 中删除冗余代码，使用变量来保存值，`of`然后在之后设置它

```
$element = $(element);
var of;
var img = $(document.createElement('img'))
    .attr({src:'inc/images/help_bubble.png', title:'help Image', 'class': 'helpImg'})       
    .css({'position':'absolute',
       'z-index':999
    })
if(elementType=='img'){
    img.insertBefore($element);
            of = $element;
}
else{
    img.prependTo($element);
            of = $element[0];
}
img.position({
    my: 'left bottom',
    at: 'left center',
    of: of
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T23:33:05.560

只需考虑差异并将 if 语句放在那些周围。有一个原则叫做 Don't Repeat Yourself（简称 DRY），适用于此。

# java - 使用发音时，如何在针对多模块 pom 运行时从一个页面链接所有其余 API？

> ID：11978735
> 
> 赞同：0
> 
> 时间：2012-08-15T23:28:15.127
> 
> 标签：java, rest, maven-2, enunciate

我可以针对我的多模块 pom 运行 mvn enunciate:docs，其中模块是服务的完整实现，并且站点是在每个服务下创建的（例如 service1/rest/api/target/site/wsdocs/index.html ) 但我希望通过 enunciate 将所有其他 API 链接在一个页面中。

我只使用 enunciate 来生成 API 和示例 xml/json 消息体。

这可能吗，还是我必须自己用一些脚本或你有什么来创建网站？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:25:36.307

这可能不是最好的解决方案，但您可以使用创建站点`maven-site-plugin`并从那里为您的其余部分指定不同的 API。您需要从那里创建一个 site.xml 和链接。

在 site.xml 中，您可以通过执行以下操作在菜单中添加链接：

```
<menu name="Overview">
        <item name="Description" href="index.html"/>
        <item name="API" href="api/index.html"/>
</menu> 
```

在前面的示例`api/index.html`中是我的 API 入口点。

# php - 如何使用 php 中的 imagebutton 更新数据库值

> ID：11978741
> 
> 赞同：0
> 
> 时间：2012-08-15T23:28:45.513
> 
> 标签：php, javascript, jquery, mysql, imagebutton

我正在处理一个 php 文件，绞盘显示一个包含数据库值的表。每行最后都有一个图像按钮，它应该改变状态，用图像显示。所以我认为这一切的简短功能必须是，点击转到脚本转到php或jQuery？按钮还必须将用户的 id 提供给下一个脚本或函数，或者操作系统有更好的方法吗？

这是我目前没有功能的基本方法

在 index.php 中

```
include("function.php");

while ($row_user = mysql_fetch_assoc($result_user)) {

    $sqle = mysql_query("
                    SELECT COUNT(*) FROM 
                       places2user                                 
                    WHERE
                       user = '".mysql_real_escape_string($row_user['ID'])."'

                    ");
            $res23 = mysql_fetch_array($sqle);

echo <table>
  echo <tr>
    echo "<td>".$row_user['ID']." </td><td><input type=\"image\" src=\"images/".htmlentities($row_user['receive'], ENT_QUOTES)."\" id=\"status\" name=\"status\" ></td>
  echo </tr>
echo </table>
} 
```

还有一个 function.php，带有一个 changestatus($id) 函数，它更新数据库值，但我认为，这不是正确的编码方式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:40:38.607

在编程时，不要只依赖 javascript。我总是只使用 html 和 css 创建表单，确保它有效，然后使用 jQuery 左右添加花哨的东西。这样你就知道表单在没有 javascript 的情况下也可以工作（非常适合没有它的用​​户）。

但是要回答你的问题：

如果你使用它，它应该做你想做的事：

```
<?php echo "<form action='?' method='post'>
<table>
<tr>
<td>".$row_user['ID']." </td>
<td><input type='hidden' name='userId' value='".$row_user['ID']."'/>
   <input type=\"image\" src=\"images/".htmlentities($row_user['receive'], ENT_QUOTES)."\" id=\"status\" name=\"status\" ></td>
  </tr>
</table></form>"; 
```

# android - 如何在屏幕关闭时保持 Activity 运行？

> ID：11978742
> 
> 赞同：11
> 
> 时间：2012-08-15T23:29:08.863
> 
> 标签：android

屏幕关闭时如何保持活动运行/活动？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T23:40:59.920

您将需要使用[PARTIAL_WAKE_LOCK](http://developer.android.com/reference/android/os/PowerManager.html#PARTIAL_WAKE_LOCK)来确保您的活动保持活跃。`android.permission.WAKE_LOCK`必须在您的清单中请求。但是，电池会消耗得更快，因此请记住尽快**释放**唤醒锁。

或者，改用**[服务](http://developer.android.com/reference/android/app/Service.html)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-24T07:30:00.157

在 Activity 的 onCreate 中，放入以下行：

```
Context mContext = getApplicationContext();
PowerManager powerManager = (PowerManager) mContext.getSystemService(Context.POWER_SERVICE);
final PowerManager.WakeLock wakeLock =  powerManager.newWakeLock(PARTIAL_WAKE_LOCK,"motionDetection:keepAwake");
wakeLock.acquire();

//Place this where you no longer need to have the processor running
wakeLock.release(); 
```

按下电源按钮后，如果您关闭了该活动，该活动仍应运行。

如果您像我一样，并且正在收集加速度计数据，请务必`sensorManager.unregisterListener(this);`从应用程序的 onPause 部分中删除默认设置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T23:43:06.567

还有一个好办法。几个月前我发现了这个，它可以节省一点电池寿命；）

[http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/](http://thinkandroid.wordpress.com/2010/01/24/handling-screen-off-and-screen-on-intents/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-16T02:34:43.783

确保清单文件中没有任何活动的“ android:noHistory="true" ”。当应用程序离开屏幕或屏幕关闭时，它会终止活动。

如果您希望您的应用程序即使屏幕关闭也保持活动状态，我认为您不需要做任何额外的事情：我的应用程序没有任何额外的代码，当我关闭屏幕并打开它时它仍然存在。但！Android 操作系统可能会在屏幕关闭一段时间后将其杀死，因此您可能应该在清单文件中使用 WAKE_LOCK。或者，您可以在清单文件中添加 'android:keepScreenOn="true"'，以在您的应用程序运行时始终保持屏幕开启。

# r - Read.CSV 在 R 中无法按预期工作

> ID：11978748
> 
> 赞同：7
> 
> 时间：2012-08-15T23:29:51.010
> 
> 标签：r, csv, read.csv

我难住了。通常，`read.csv`按预期工作，但我遇到了一个行为出乎意料的问题。这很可能是我的用户错误，但我们将不胜感激。

这是文件的网址

```
http://nces.ed.gov/ipeds/datacenter/data/SFA0910.zip 
```

这是我获取文件、解压缩并读入的代码：

```
 URL <- "http://nces.ed.gov/ipeds/datacenter/data/SFA0910.zip"
 download.file(URL, destfile="temp.zip")
 unzip("temp.zip")
 tmp <- read.table("sfa0910.csv", 
                   header=T, stringsAsFactors=F, sep=",", row.names=NULL) 
```

这是我的问题。当我在 Excel 中打开数据 csv 数据时，数据看起来符合预期。当我将数据读入 R 时，第一列实际上命名为 row.names。R 正在读取一行额外的数据，但我无法弄清楚导致 row.names 成为一列的“错误”发生在哪里。简单地说，它看起来像数据转移了。

然而，奇怪的是 R 中的最后一列似乎包含正确的数据。

以下是前几列中的几行：

```
tmp[1:5,1:7]
  row.names UNITID XSCUGRAD SCUGRAD XSCUGFFN SCUGFFN XSCUGFFP
1    100654      R     4496       R     1044       R       23
2    100663      R    10646       R     1496       R       14
3    100690      R      380       R        5       R        1
4    100706      R     6119       R      774       R       13
5    100724      R     4638       R     1209       R       26 
```

有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-16T02:08:57.380

我的提示：当分隔文件未按预期运行时，使用*count.fields()作为快速诊断。*

*首先，使用table()*计算字段数：

```
table(count.fields("sfa0910.csv", sep = ","))
# 451  452 
#   1 6852 
```

这告诉您，除了其中一行之外，所有行都包含 452 个字段。那么哪个是异常线呢？

```
which(count.fields("sfa0910.csv", sep = ",") != 452)
# [1] 1 
```

第一行是问题。检查时，除第一行之外的所有行都以 2 个逗号结尾。

现在的问题是：这是什么意思？标题行中是否应该有一个额外的字段被省略？还是附加到其他行的 2 个逗号有误？如果可能，最好联系生成数据的人，以澄清歧义。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T01:32:24.387

我有一个修复可能基于 mnel 的评论

```
dat<-readLines(paste("sfa", '0910', ".csv", sep=""))
ncommas<-sapply(seq_along(dat),function(x){sum(attributes(gregexpr(',',dat[x])[[1]])$match.length)})
> head(ncommas)
[1] 450 451 451 451 451 451 
```

第一列之后的所有列都有一个excel忽略的额外分隔符。

```
for(i in seq_along(dat)[-1]){
dat[i]<-gsub('(.*),','\\1',dat[i])
}
write(dat,'temp.csv')

tmp<-read.table('temp.csv',header=T, stringsAsFactors=F, sep=",")

> tmp[1:5,1:7]
  UNITID XSCUGRAD SCUGRAD XSCUGFFN SCUGFFN XSCUGFFP SCUGFFP
1 100654        R    4496        R    1044        R      23
2 100663        R   10646        R    1496        R      14
3 100690        R     380        R       5        R       1
4 100706        R    6119        R     774        R      13
5 100724        R    4638        R    1209        R      26 
```

故事的寓意....听Joshua Ulrich ;)

快速解决。在excel中打开文件并保存。这也将删除额外的分隔符。

或者

```
dat<-readLines(paste("sfa", '0910', ".csv", sep=""),n=1)
dum.names<-unlist(strsplit(dat,','))
tmp <- read.table(paste("sfa", '0910', ".csv", sep=""), 
                   header=F, stringsAsFactors=F,col.names=c(dum.names,'XXXX'),sep=",",skip=1)
tmp1<-tmp[,-dim(tmp)[2]] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-16T17:57:52.437

我知道您已经找到了答案，但是由于您的回答帮助我找到了答案，因此我将分享：

如果您读入 R 文件，其中不同行的列数不同，如下所示：

```
1,2,3,4,5
1,2,3,4
1,2,3 
```

它将被读入用 NA 填充缺失的列，如下所示：

```
1,2,3,4,5
1,2,3,4,NA
1,2,3,NA,NA 
```

**但！** 如果具有最大列的行不是第一行，如下所示：

```
1,2,3,4
1,2,3,4,5
1,2,3 
```

那么它会以一种有点混乱的方式阅读：

```
1,2,3,4
1,2,3,4
5,NA,NA,NA
1,2,3,NA 
```

（在你弄清楚问题之前压倒一切，之后就很简单了！）

只是希望它可以帮助某人！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2021-06-28T14:26:16.893

如果您使用本地数据，还要确保它位于正确的位置。确保将其放在您的工作目录中，并 `setwd("C:/[User]/[MyFolder]")` 直接在您的 R 控制台中进行更改。

# linux - 并行搜索 10000 个文件中的特定字符串模式

> ID：11978754
> 
> 赞同：2
> 
> 时间：2012-08-15T23:30:24.077
> 
> 标签：linux, bash, grep, solaris, sunos

**问题陈述：-**

我需要`String Pattern`在周围搜索一个特定`10000 files`的并在包含它的文件中找到记录`particular pattern`。我可以`grep`在这里使用，但是需要很多时间。

下面是我用来搜索 a`particular string pattern`之后`unzipping`的命令`dat.gz file`

```
gzcat /data/newfolder/real-time-newdata/*_20120809_0_*.gz | grep 'b295ed051380a47a2f65fb75ff0d7aa7^]3^]-1' 
```

如果我简单地计算解压后有多少个文件`dat.gz file`

```
gzcat /data/newfolder/real-time-newdata/*_20120809_0_*.gz | wc -l 
```

我绕过`10000 files`。我需要在所有这些中搜索上述字符串模式`10000 files`并找出包含上述内容的记录`String Pattern`。我上面的命令运行良好，但速度非常慢。

对此最好的方法是什么？我们是否应该`100 files`一次在`100 files parallelly`.

**笔记：**

我正在运行**SunOS**

```
bash-3.00$ uname -a
SunOS lvsaishdc3in0001 5.10 Generic_142901-02 i86pc i386 i86pc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T00:10:09.690

不要**并行**运行！！！！这会使磁盘头到处弹跳，速度会慢得多。

由于您正在阅读存档文件，因此有一种方法可以显着提高性能 - 不要将解压缩的结果写出来。理想的答案是解压缩到内存中的流，如果这不可行，则解压缩到 ramdisk。

无论如何，您确实需要一些并行性——一个线程应该获取数据，然后将其交给另一个进行搜索的线程。这样，您要么在磁盘上等待，要么在内核上等待解压缩，您不会浪费任何时间进行搜索。

（请注意，如果是 ramdisk，您将需要积极地读取它写入的文件，然后将它们杀死，这样 ramdisk 就不会被填满。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:45:22.363

您`gzcat .... | wc -l`没有表示 10000 个文件，它表示无论有多少文件，总共有 10000 行。

这是`xargs`存在的问题类型。假设您的版本`gzip`附带了一个名为`gzgrep`（或者可能只是`zgrep`）的脚本，您可以这样做：

```
find /data/newfolder/real-time-newdata -type f -name "*_20120809_0_*.gz" -print | xargs gzgrep 
```

这将运行一个`gzgrep`命令，其中包含尽可能多的单个文件的批次，因为它可以容纳在命令行上（有`xargs`限制数量的选项，或用于许多其他事情）。不幸的是，`gzgrep`仍然必须解压缩每个文件并将其传递给`grep`，但实际上并没有什么好的方法可以避免必须解压缩整个语料库才能进行搜索。但是，以这种方式使用`xargs`将减少需要生成的新进程的总数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T00:08:29.043

对于初学者，您需要将文件解压缩到磁盘。

这确实有效（在 bash 中），但您可能不想尝试同时启动 10,000 个进程。在未压缩的目录中运行它：

```
for i in `find . -type f`; do ((grep 'b295ed051380a47a2f65fb75ff0d7aa7^]3^]-1' $i )&); done 
```

因此，我们需要有一种方法来限制衍生进程的数量。只要机器上运行的 grep 进程数超过 10（包括进行计数的进程），这就会循环：

```
while [ `top -b -n1 | grep -c grep` -gt 10  ]; do echo true; done 
```

我已经运行了它，它可以工作....但是 top 运行时间很长，以至于它有效地将您限制为每秒一个 grep。有人可以对此进行改进，在启动新进程时将计数加一并在进程结束时减一吗？

```
for i in `find . -type f`; do ((grep -l 'blah' $i)&); (while [ `top -b -n1 | grep -c grep` -gt 10 ]; do sleep 1; done); done 
```

关于如何确定何时睡觉和何时不睡觉的任何其他想法？对不起，部分解决方案，但我希望有人有你需要的另一部分。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T20:21:54.633

如果不使用正则表达式，可以使用 grep 的 -F 选项或使用 fgrep。这可能会为您提供额外的性能。

# mysql - 提交运行 Django 应用程序所需的所有 MySQL 设置的好方法是什么？

> ID：11978756
> 
> 赞同：1
> 
> 时间：2012-08-15T23:30:31.457
> 
> 标签：mysql, django

我正在制作我的第一个 django 应用程序，我想将它提交给 git，以便有人可以克隆它并以最少的麻烦开始工作。我需要做的一件事是在我的本地 mysql 安装中创建一个新数据库并在那里创建一个新用户。我很乐意让某人克隆东西并为他们自动完成。有没有好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T02:55:22.670

使用[mysql-python](http://sourceforge.net/projects/mysql-python/)并编写 python 脚本来创建数据库或更改我的 shell 脚本以使其适合您的需要。

```
#!/bin/bash

function pre_checks() {

    if [[ "$1" -ne 3 ]]; then
        echo "Usage: $0 [DATABASE NAME] [USERNAME] [HOST]"
        return 1
    fi

    if ! command -v /usr/bin/mysql >/dev/null 2>&1; then
        echo "Mysql is not installed."
        return 1
    fi

    echo -n "Create the database '${2}' and the user '${3}' now? (y/n) "
    read ANSWER

    case "$ANSWER" in
        "y"|"Y")
            echo -n "Password for ${3}: "
            read -s USER_PW
            echo
            return 0 ;;
        "n"|"N"| *)
            echo "Bye."
            return 1 ;;
    esac
}

function create_db() {
    Q1="CREATE DATABASE IF NOT EXISTS ${1} CHARACTER SET utf8;"
    Q2="GRANT ALL ON *.* TO '${2}'@'${3}' IDENTIFIED BY '$USER_PW';"
    Q3="FLUSH PRIVILEGES;"
    Q4="SHOW DATABASES;"
    SQL="${Q1} ${Q2} ${Q3} ${Q4}"

    echo "Query:"
    echo "${SQL}"
    echo -n "Run query now? (y/n) "
    read ANSWER

    case "$ANSWER" in
        "y" | "Y" )
            /usr/bin/mysql -uroot -p -e "$SQL" || echo "Failure."
            ;;
        "n" | "N" | *)
            echo "Bye."
            return 1
            ;;
    esac
}

pre_checks "$#" "$1" "$2" && create_db "$1" "$2" "$3" 
```

# objective-c - 删除等于另一个数组的数组的对象是否会从两个数组中删除它们？

> ID：11978763
> 
> 赞同：0
> 
> 时间：2012-08-15T23:31:11.580
> 
> 标签：objective-c, arrays, nsarray

好吧，说我这样做。

```
NSMutableArray *array1=[NSMutableArray arrayWithObjects:@"poop", @"on", @"your", @"face", nil];

NSMutableArray *array2=array1;

[array2 removeAllObjects]; 
```

现在 array1 里面有对象吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T23:37:14.813

首先，你有没有试过看看会发生什么？:) 那应该马上回答你的问题。至于*为什么*会发生，那是因为在这个实例中只有一个数组。`array2`只是一个指向的指针`array1`（即，它们都指向同一个`NSMutableArray`实例）。所以是的，如果你使用 引用数组`array1`，你会看到它是空的。

现在，如果您有以下情况：

```
NSMutableArray *array2 = [NSMutableArray arrayWithArray:array1];
[array2 removeAllObjects]; 
```

`array1`仍然有它的元素，因为它`array2`是一个全新的`NSMutableArray`实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T23:41:47.663

如果您需要知道一个对象是否不同。你可以做==比较。或检查 %p 指针值。

```
if (array1 == array2) { NSLog(@"These variables point to the same array"); }

NSLog(@"Address of Array1 is (%p) Address of Array2 is (%p)",array1, array2); 
```

当 id 对象不同或完全相同时，这会给你一些想法。

如果指针是相同的值。它们是同一个对象。并且`(obj1 == obj2)`将导致`YES`对象指针的值相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T23:55:34.243

```
NSMutableArray *array1 = [NSMutableArray arrayWithObjects:@"one", @"two", nil]; 
```

在内存中使用字符串 @"one 和 @"two" 创建一个可变数组对象 ..并使数组对象指针`array1`指向内存中的该对象。

![在此处输入图像描述](../Images/cc1b9813b207728260664547b81d131d.png)

```
NSMutableArray *array2 = array1; 
```

创建另一个`array2`NSMutableArray 类型的指针，并使其指向 array1 指向的内存中的同一对象。

![在此处输入图像描述](../Images/2754dd32f1472fcdd4c8c1ce7c645cbf.png)

```
[array2 removeAllObjects]; 
```

从 array2 指向的可变 Array 对象中删除所有字符串

![在此处输入图像描述](../Images/4f515eb39788f3a8fb23bc87726ae828.png)

现在，由于 array1 和 array2 指向内存中的同一个对象，因此 array1 和 array2 现在都将指向内存中没有对象的可变数组对象。

# wordpress - 图片未在新的 wordpress 安装中显示

> ID：11978765
> 
> 赞同：0
> 
> 时间：2012-08-15T23:31:16.470
> 
> 标签：wordpress

刚刚安装了 Wordpress 3.4.1 的新副本。

没有插件，没有售后主题。只是使用二十一。

[http://14glenbrook.com/?p=5](http://14glenbrook.com/?p=5)

图像根本没有显示。它上传到 wp-content/uploads 中的正确目录，当 ftp 进入时，我可以看到文件夹中的图像。但是什么都没有显示。单击页面上的图像位置时也会出现 404 错误。检查文件夹权限，他们似乎是正确的'711'，不知道还有什么可以看的。

任何帮助表示赞赏，

肯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:19:41.553

“月”和“年”的文件夹权限不正确。更改为 755，一切都已修复。

# html - 如何相对于非父项定位元素？

> ID：11978769
> 
> 赞同：0
> 
> 时间：2012-08-15T23:32:05.310
> 
> 标签：html, css

我的页面上有以下设置：

![在此处输入图像描述](../Images/e4e64650c20bdd447b35f1dbc2a56dcb.png)

我想将输入元素相对于其下方的表格定位，并且我希望它们向右对齐，并且无论表格大小我都希望这种情况发生（因为不同的表格将具有不同的大小但具有相似的输入）。

我将如何实现这个目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:36:16.727

```
form {
    float: right;
    margin-right: /* until it looks good */
} 
```

这将完成你正在寻找的东西。如果您希望它真正与表格相关，则需要将其*放在*表格内并给它一个负的上边距。或者，将两者都放在一个父 div 中，并使它们都相对于父 div 相等。

# sencha-touch-2 - Sencha touch 适合 document.ready 类型的功能

> ID：11978770
> 
> 赞同：0
> 
> 时间：2012-08-15T23:32:19.413
> 
> 标签：sencha-touch-2

在 Jquery 中有一个函数

```
$(document).ready(function (){..} 
```

Sencha Touch 2有这样的东西吗？

我知道

```
Ext.Setup({ onReady: function () {...} }) 
```

但是我只能打电话`Ext.Setup`一次。如果我有多个视图，我将如何处理？我想要一个在加载视图时加载的函数。我必须通过控制器来做到这一点吗？我可以使用注入 index.html 的代码片段（平台构建在节点上并且需要这个）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:26:26.717

在需要视图的控制器内部，只需添加一个 init: function() { //do something }，extjs 将负责其余的工作...通常如果您尝试调用需要加载视图的函数，那么将“painted”侦听器添加到您的视图中，它将在视图渲染时被调用

# sql - Advantage Database 8.1 SQL IN 子句

> ID：11978772
> 
> 赞同：1
> 
> 时间：2012-08-15T23:32:48.463
> 
> 标签：sql, advantage-database-server

使用 Advantage Database Server 8.1 我无法成功执行查询。我正在尝试执行以下操作

```
SELECT * FROM Persons
WHERE LastName IN ('Hansen','Pettersen') 
```

检查列中的多个值。但是当我尝试在 Advantage 中执行此查询时出现错误。

*编辑*- 错误

poQuery：错误 7200：AQE 错误：状态 = 42000；本机错误 = 2115; [iAnywhere 解决方案][Adv​​antage SQL Engine]Expected lexical element not found:( 解析 SELECT 语句中的 WHERE 子句时出现问题。 -- SQL 语句中的错误位置为：46

这是我正在执行的 SQL

```
 select * from "Pat Visit" where 
DIAG1 IN = ('43644', '43645', '43770', '43771', '43772', '43773', '43774', 
'43842', '43843', '43845', '43846', '43847', '43848', '97804', '98961', 
'98962', '99078') 
```

*完毕*

有没有人知道我如何能做一些类似的有效率的事情？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T14:57:25.150

你有一个无关紧要`=`的语句之后`IN`。它应该是：

```
select * from "Pat Visit" where 
     DIAG1 IN ('43644', '43645', <snip> ) 
```

# shell - 阻止 Hadoop 将 JobClient 输出发送到命令行？

> ID：11978786
> 
> 赞同：0
> 
> 时间：2012-08-15T23:34:51.300
> 
> 标签：shell, command-line, hadoop, terminal, mapreduce

我正在尝试编写一个 shell 脚本，该脚本将在伪分布式集群上执行 Hadoop MapReduce 作业，但省略所有前面没有！的输出。我尝试将输出通过管道传输到 awk 并以这种方式对其进行过滤，这适用于大多数输出​​，但我仍然将输出从 JobClient 获取到终端。有没有办法防止这种情况？

我的代码目前如下所示：

```
#!/bin/sh

runtimes=$1

for i in {0..$runtimes}
do
  cd ~/Documents/hadoop-1.0.3
  bin/hadoop dfs -rmr /SC_out | awk "{}"
  bin/hadoop jar ../MapReduceTests/SyntaxCounter.jar mrt.SyntaxCounter /WC_in/ /SC_out/ | awk "{}"
  bin/hadoop dfs -cat /SC_out/part* | awk "\$0~/!Map/ {print \$0}"
done 
```

编辑：这是我想要压制的那种输出：

```
12/08/15 16:45:17 INFO mapred.JobClient: Running job: job_201208151042_0128
12/08/15 16:45:18 INFO mapred.JobClient:  map 0% reduce 0%
12/08/15 16:45:31 INFO mapred.JobClient:  map 100% reduce 0%
12/08/15 16:45:43 INFO mapred.JobClient:  map 100% reduce 100% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T18:44:55.867

这个输出在stderr，不是std out，所以修改如下：

```
bin/hadoop jar ../MapReduceTests/SyntaxCounter.jar mrt.SyntaxCounter \
    /WC_in/ /SC_out/  2>/dev/null | awk "{}" 
```

或者更简单地说，调用带有详细参数设置为 false 的作业：

```
job.waitForCompletion(false); 
```

# c++ - GLSL 照明作为平面 - 法线问题？

> ID：11978794
> 
> 赞同：0
> 
> 时间：2012-08-15T23:35:48.797
> 
> 标签：c++, opengl, glsl, shader

我目前正在研究一个 OpenGL 框架，最近创建了一个`.ply`（多边形文件格式）网格导入器。随着导入器的工作，我想在导入的网格上尝试一个简单的光照着色器，但遇到了问题。

该网格是著名的斯坦福兔子的低分辨率版本，取自[斯坦福 3D 扫描存储库](http://graphics.stanford.edu/data/3Dscanrep/)，最初被导入 Blender 以验证正确性，然后再次导出以获得与和`nX, nY, nZ`相对的值。该文件可在[http://pastebin.com/raw.php?i=xRmLYN0s找到](http://pastebin.com/raw.php?i=xRmLYN0s)`confidence``intensity`

正在发生的事情是光照着色器就像一个平面着色器，它会根据相机方向改变颜色。图片包含在这篇文章的末尾。

着色器来自 OpenGL 超级圣经，描述为`Simple diffuse, directional, and vertex based light`：

**顶点**

```
#version 140

uniform mat4 mvMatrix;
uniform mat4 pMatrix;
uniform vec4 vColor;

in vec4 vVertex;
in vec3 vNormal;

out vec4 vFragColor;

void main( void )
{
    mat3 mNormalMatrix;

    mNormalMatrix[0] = mvMatrix[0].xyz;
    mNormalMatrix[1] = mvMatrix[1].xyz;
    mNormalMatrix[2] = mvMatrix[2].xyz;

    vec3 vNorm = normalize(mNormalMatrix * vNormal);
    vec3 vLightDir = vec3(0.0, 0.0, 1.0);

    float fDot = max(0.0, dot(vNorm, vLightDir)); 
    vFragColor.rgb = vColor.rgb * fDot;
    vFragColor.a = vColor.a;

    gl_Position = ( pMatrix * mvMatrix ) * vVertex;
} 
```

**分段**

```
#version 140

in vec4 vFragColor;

void main( void )
{
    gl_FragColor = vFragColor;
} 
```

* * *

这可能是法线的问题吗？我已经验证它们是从模型文件中正确提取的，然后它们被输入到 VAO 中：

```
 glBindVertexArray( m_VAO );
    glEnableVertexAttribArray( ToolBox::Math::GLSL_ATTR::NORMAL );
    glBindBuffer( GL_ARRAY_BUFFER, m_NormalBuffer );
    glBufferData( GL_ARRAY_BUFFER, sizeof( GLfloat ) * num_elements, normals, GL_STATIC_DRAW );
    glVertexAttribPointer( ToolBox::Math::GLSL_ATTR::NORMAL, 3, GL_FLOAT, GL_FALSE, 0, ( const GLvoid* )0 );
    glBindVertexArray( 0 );
    glBindBuffer( GL_ARRAY_BUFFER, 0 ); 
```

这与用于空间 (x,y,z) 信息的 VAO 相同，过去曾用于颜色和纹理值。此外，着色器由自定义 ShaderManager 类解析，并且`vNormal`已确认该属性与上述代码段中的普通缓冲区绑定到相同的索引（`ToolBox::Math::GLSL_ATTR::NORMAL`又名`2`） 。`glBindAttribLocation`

据我所知，法线应该正确地从文件传递到着色器。但是如果我`vFragColor.rgb = vNormal.xyz`在顶点着色器中设置，兔子会变成纯红色。这不好，是吗？

那么有什么想法为什么着色器不起作用？不好吗？正常不通过吗？还有什么？

感谢您提供的任何帮助。如果您需要更多信息，请告诉我。

* * *

**图片**

**绕着兔子转：**

![在此处输入图像描述](../Images/7365f38d23c435ddc4189acd4456dc1f.png)

![在此处输入图像描述](../Images/aa49a99ac3b0cc8c421d97510edf3414.png)

![在此处输入图像描述](../Images/9f811b7f6f3a688c5374f00ef52f85da.png)

**环境`vFragColor.rgb = vNormal.xyz;`**

![在此处输入图像描述](../Images/94003735b36533e6965ecb358658472a.png)

**Blender中的模型（确认其正确性）**

![在此处输入图像描述](../Images/948eff474b7e28f97dff9d2fb41089e5.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T01:12:24.010

问题出在属性绑定中。不知何故，在我的着色器解析器中，我忘记区分正在读取的真实代码行和设置为全大写以进行不区分大小写的比较检查的代码行。

这导致该`GLSL_ATTR::NORMAL`指数势必`VNORMAL`反对`vNormal`. 奇怪的是，这个问题在位置/颜色/纹理工作期间从未出现过。感谢@Tim 试图帮助我解决这个只是一个愚蠢的错字的问题。

最后，兔子照原样亮了起来：

![在此处输入图像描述](../Images/f219e4c8e3c61bfe77883341cba34568.png)

# machine-learning - 如何从 Weka 的 GUI 中获取 SVM 的权重？

> ID：11978795
> 
> 赞同：2
> 
> 时间：2012-08-15T23:35:53.987
> 
> 标签：machine-learning, weka, svm, libsvm

我正在使用 WEKA GUI 进行分类。我合并了 LibSVM 库以使用 LibSVM 的线性内核。现在除了性能结果之外，我还想看看这个线性内核中的确切权重。有谁知道是否有办法做到这一点？我搜索并没有得到任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T07:37:19.810

公式是这样的：$w = \sum_i(\alpha_i x_i)$，其中 \alpha_i 是朗朗日乘数，x_i 是支持向量。我从来没有在 WEKA 中这样做过，但是这就是你在 MATLAB 中的做法，希望它是相当不言自明的，你可以很容易地从 WEKA 复制这段代码，最后我们使用的是同一个库（LIBSVM） ：

```
function [w b] = generate_w_b(model)
w = zeros(size(model.SVs,2),1);
for i=1:size(model.SVs,1),
    w = w+model.sv_coef(i)*model.SVs(i,:)';
end
b = model.rho; 
```

# php - 为简单的php密码创建会话

> ID：11978796
> 
> 赞同：1
> 
> 时间：2012-08-15T23:35:56.483
> 
> 标签：php, session, passwords

我需要能够存储在会话中提交的密码，因为目前使用 php_self 方法页面只是重新加载，好像用户没有正确输入密码（这发生在 Firefox 中，它实际上在没有会话的情况下工作正常在 Chrome / Safari 中），所以我相信它需要一个会话才能在 FF 中工作，但我对 PHP 很陌生，不知道如何解决这个问题，这里是代码：

提前致谢

```
<?php
session_start();

$Password = 'hello';

   if (isset($_POST['submit_pwd'])){
      $pass = isset($_POST['passwd']) ? $_POST['passwd'] : '';

      if ($pass != $Password) {
         showForm("error", "WRONG PASSWORD");
         exit();     
      }
   } else {
      showForm();
      exit();
   }

function showForm($Inputclass="mister", $Placeholder="PLEASE ENTER PASSWORD"){ 

?> 
```

使用 HTML：

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" name="pwd" id="pwd">

 <input class="<?php echo $Inputclass; ?>" name="passwd" type="password" size="79" style="margin-left: -100px;" placeholder="<?php echo $Placeholder; ?>"/>
         <br/>
             <input class="text" name="submit_pwd" value="Login" type="image" src="loginkey.png" style="position: relative; left: 240px; top: -35px;">

      </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:12:31.780

如果你点击按钮，那么 $_POST['submit_pwd_x'] 和 $_POST['submit_pwd_y'] 应该被设置，而不是 $_POST['submit_pwd']

如果您点击“输入”，则不应设置 $_POST['submit_pwd']、$_POST['submit_pwd_x'] 或 $_POST['submit_pwd_y'] - 但有时取决于浏览器。

你不能依赖任何一个，所以你的检查 if (isset($_POST['submit_pwd'])) 将不可靠

诀窍是在表单中添加一个隐藏字段，并在 $_POST 中检查该隐藏字段的提交。

* * *

有关答案的更多详细信息（基于评论）：

PHP 是

```
if (isset($_POST['formsubmitted'])){ 
    ....
} 
```

HTML 是

```
<form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" name="pwd" id="pwd"> 
     <input class="<?php echo $Inputclass; ?>" name="passwd" type="password" size="79" style="margin-left: -100px;" placeholder="<?php echo $Placeholder; ?>"/> 
     <br/>
     <input type="hidden" name="formsubmitted" value="1" /> 
     <input class="text" name="submit_pwd" value="Login" type="image" src="loginkey.png" style="position: relative; left: 240px; top: -35px;"> 

</form> 
```

* * *

编辑：

如果您不点击按钮（按回车键）：

*   IE 不会发送
*   FF,Opera 会发送 submit_pwd_x=0 和 submit_pwd_y=0
*   Chrome、Safari 将发送 submit_pwd_x=0、submit_pwd_y=0 和 submit_pwd

如果单击按钮：

*   IE 会发送 submit_pwd_x=X 和 submit_pwd_y=Y
*   FF,Opera 会发送 submit_pwd_x=X 和 submit_pwd_y=Y
*   Chrome、Safari 将发送 submit_pwd_x=X、submit_pwd_y=Y 和 submit_pwd

# c# - 从数据库加载大块数据时如何避免 OutOfMemoryException？

> ID：11978797
> 
> 赞同：2
> 
> 时间：2012-08-15T23:36:10.587
> 
> 标签：c#, linq, linq-to-sql, sql-server-2000, out-of-memory

比如说，我们有一个`text`包含 jpg 文件的二进制数据的大字段的表。任务是从磁盘上的数据库中获取这些文件。所以，起初我决定做以下事情：

```
MyDataContext dc = new MyDataContext();
foreach(ImageTable t in dc.ImageTable.OrderBy(i=>i.Id))
{
    using (StreamWriter writer = new StreamWriter(new FileStream(string.Concat(t.Name,".jpg"), FileMode.CreateNew), Encoding.GetEncoding(1251)))
    {
          writer.Write(t.Data);
          writer.Close();
    }
} 
```

但是一旦表格有大约 20,000 行，我很快就得到了一个`OutOfMemoryException`.

最后，为了避免将所有行加载到一个数据上下文中，我执行了以下操作：

```
MyDataContext dc = new MyDataContext();
foreach(int id in dc.ImageTable.OrderBy(i=>i.Id).Select(i=>i.Id))
{
     using (MyDataContext _dc = new MyDataContext())
     {
           ImageTable t = _dc.ImageTable.FirstOrDefault(i => i.Id == id);
           using (StreamWriter writer = new StreamWriter(new FileStream(string.Concat(t.Name,".jpg"), FileMode.CreateNew), Encoding.GetEncoding(1251)))
           {
                writer.Write(t.Data);
                writer.Close();
           }
      }
} 
```

所以每一行都由一个单独的数据上下文加载......没有内存问题！但这肯定不是完成任务的最佳方法。

有人可以提出一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T23:40:50.143

您可以尝试关闭[对象跟踪](http://msdn.microsoft.com/en-us/library/system.data.linq.datacontext.objecttrackingenabled.aspx)：

```
_dc.ObjectTrackingEnabled = false; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T23:40:56.990

1.  如果它已经有效：解决内存问题，性能满足您的应用程序需求，**这是一个很好的解决方案**。

2.  如果您仍然对结果不满意，您*可以*考虑离开`linq to sql`并查看`raw SQL`使用[SqlDataReader](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader%28v=vs.100%29.aspx)和*readonly*，*只向前*游标，以获得最大的读取操作效率。

希望这可以帮助。

# entity-framework - Entity Framework 5 生成 SQL 引用 NotMapped 属性

> ID：11978800
> 
> 赞同：0
> 
> 时间：2012-08-15T23:36:43.197
> 
> 标签：entity-framework, ef-code-first, entity-framework-5

我刚刚着手将项目从 Entity Framework 4.3.1 和 .NET 4 更新到 Entity Framework 5.0 和 .NET 4.5。我首先更新了 .NET 版本，并确保我引用的是 EF 5.0.0.0 而不是 .NET 4 兼容的 4.4.0.0。

我有一个类结构

```
public class MyBase
{
    [NotMapped]
    public bool MyProperty { get; set; }
}

public class MyDefinition : MyBase
{
    // Some other properties
} 
```

当我尝试加载一些 MyDefinition 实例时

```
using (MyContext ctx = new MyContext())
{
    ctx.Configuration.AutoDetectChangesEnabled = false;
    ctx.Configuration.LazyLoadingEnabled = false;
    ctx.Configuration.ProxyCreationEnabled = false;

    var defs = from def in ctx.MyDefinitions.AsNoTracking() select def;

    foreach (MyDefinition def in defs) // <-- Exception here
    {
        // Do stuff
    }
} 
```

我得到一个 SqlException

> 列名“MyProperty”无效。

就好像为了确定现有模式是否有效而尊重*NotMapped ，但 EF 5 生成的 SELECT 期望有一个**MyProperty*列。

基类和派生类在不同的程序集中定义。这两个程序集都经过仔细检查，以确保它们引用 EF 5.0.0.0 并以 .NET 4.5 为目标。

Intellisense 声称*NotMapped*是*System.ComponentModel.DataAnnotations.Schema.NotMapped*

如何防止 EF 5 选择不存在的列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T04:42:23.947

添加这个

```
using System.ComponentModel.DataAnnotations.Schema 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T00:27:25.033

哦！

我今天也更新到 VS 2012。与生成后事件无关的事情发生了，这导致包含基类的程序集的早期版本可用于派生类。修复构建后事件解决了该问题。

# java - 在 Mac OS X 上安装 Java 7：“此系统上已安装了更高版本的 JRE”

> ID：11978802
> 
> 赞同：1
> 
> 时间：2012-08-15T23:37:03.243
> 
> 标签：java, macos, java-7, osx-mountain-lion

尝试安装新发布[的 Java 7 Update 6 for Mac](http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1637588.html)时，安装程​​序终止打印以下错误消息：

> 此系统上已安装更高版本的 JRE

我之前安装了Java 7 Beta（实际上只是一个互联网插件），更新时遇到了一些问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T23:37:03.243

删除 Java 7 Internet Plugin 文件夹即可解决问题（推荐卸载 beta 的方式），安装程序现在可以成功运行。

跑

```
sudo rm -rf '/Library/Internet Plug-Ins/JavaAppletPlugin.plugin' 
```

或自行删除`/Library/Internet Plug-Ins/JavaAppletPlugin.plugin`。

之后不要忘记安装[JDK 7](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1637583.html)，否则您将无法选择Java 7。

# facebook-graph-api - IN 参数超过 20 时 Facebook FQL 错误

> ID：11978807
> 
> 赞同：0
> 
> 时间：2012-08-15T23:37:09.770
> 
> 标签：facebook-graph-api, facebook-fql, facebook-php-sdk

```
$fql = "SELECT link_id, owner, created_time, title, summary, url, image_urls FROM link WHERE owner IN (select uid2 from friend where uid1 = me() LIMIT 20) AND created_time >= $_7ago"; 
```

上面的查询效果很好。但是，当我将 LIMIT 从 20 增加到 21 或更高时，我得到一个错误并且查询返回 Null。我希望查询所有朋友共享的链接。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T02:06:30.843

该查询需要永远执行。只需在 Graph API 资源管理器中对其进行几次测试，即使从 20 个朋友那里获取链接也需要 > 28 秒。在我写这篇文章的时候，我有一个针对 100 个朋友的查询。我们会先看看它是否完成。

看起来如果您想获取所有朋友共享的所有链接，您需要将此查询分成更小的块并重复多次。

我可能会这样构建它，首先获取您最亲密的朋友的链接，然后深入挖掘与您没有共同点的人：

```
SELECT link_id, owner, created_time, title, summary, url, image_urls FROM link 
  WHERE owner IN (SELECT uid FROM user WHERE uid IN 
    (SELECT uid2 FROM friend WHERE uid1 = me()) 
    ORDER BY mutual_friend_count LIMIT $offset, 20)
  AND created_time >= $_7ago 
```

你会以`$offset`20 的倍数递增。

这最好作为异步查询来完成，您将快速获得初始结果，其他人将在可用时填写。获得所有这些结果需要很长时间。

（100好友查询5分钟后仍未返回结果。）

顺便说一句，不要忘记将您的问题标记为已解决。

# css - Tumblr 站点 div 在 ie8 或 9 中看起来不正确，但在 ie7 中看起来正确。使固定？

> ID：11978809
> 
> 赞同：0
> 
> 时间：2012-08-15T23:37:15.377
> 
> 标签：css, html, internet-explorer-9, css-float

这是我指的网站（内置css）freebirdbooks.com/tagged/about

我无法让我的网站仅在 ie8 和 ie9 中正确预览。在任何其他浏览器中看起来都很好。我应该提到我自己编写 HTML 和 CSS，但使用 Tumblr 作为客户端的内容管理系统。（直到我可以学习如何为我认为理想的客户编写自己的后端代码。）

该站点在大多数浏览器中看起来都很好。但仅在 ie8 和 ie9 中，我的容器和侧边栏 div“重叠”。我为您上传了一些预览图像到我的托管站点，因为由于我是新用户，他们不会让我这样做。

有没有什么办法解决这一问题？这个网站在过去非常有帮助，我感谢任何可以提前提供帮助的人。

[http://images.freebirdbooks.com/rightway.jpg](http://images.freebirdbooks.com/rightway.jpg) http://images.freebirdbooks.com/uglyway.jpg

利亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:54:01.890

这在 IE8 上对我有用（我没有 IE 9）：

添加

```
#sidebar{clear:both;} 
```

并删除

```
#wrapper #sidebar{min-height:1100px} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:57:19.427

确保关闭 headerimage div 中的所有锚标记。

# ruby-on-rails-3 - 复选框以在 Rails 上发送电子邮件 ruby

> ID：11978810
> 
> 赞同：0
> 
> 时间：2012-08-15T23:37:23.947
> 
> 标签：ruby-on-rails-3, email

我的问题是我不知道用电子邮件创建用户列表，并且在同一个列表中为每个用户都有一个复选框，然后最后有一个按钮“发送”并将所有电子邮件发送到选中用户，我暂时解决了：1）列表（索引视图）

```
<table>
<tr>
<th>Name</th>
<th>Email</th>
<th>Correo</th>
<th>Send Email</th>
<th></th>
<th></th>
<th></th>
 </tr>

<% var1 = []; i = 0 %>

<% @users.each do |user| %>
<tr id=<%= if user.value == 'No dispatched' 
         'c'
       elsif user.value == 'Dispatched'
         'a'
       else
         'b'
       end%> >
<td><%= user.name %></td>
<td><%= user.email %></td>
<td><%= user.value %></td>
<td><% var1[i] = user.name; i=i+1 %>
<%= button_to 'Activate/Desactivate', edit_send_path(user.id), :method => :get %>       </td>
</td>
<td><%= link_to 'Show', user %></td>
<td><%= link_to 'Edit', edit_user_path(user) %></td>
<td><%= link_to 'Destroy', user, :method => :delete, :data => { :confirm => 'Are you sure?' } %></td>
</tr>
<% end %>
</table>

<br />

<%= link_to 'New User', new_user_path %>

<%= button_to 'Send', {:controller => :Send, :action => :send}, :method => :get, :value => 2 %> 
```

2)发送控制器

```
class SendController < ApplicationController

def send
  @users = User.all
  @users.each do |user|
    if user.value == 'In Process'
    UserMailer.registration_confirmation(user).deliver
    user.value = 'Dispatched'
    user.save
end
  end
  redirect_to :controller => :users, :protocol => 'http'
end

def edit
user = User.find(params[:id])
    if user.value == 'In process'
    user.value = 'No dispatched'
    user.save
elsif user.value == 'No dispatched'
    user.value = 'In process'
    user.save
end
  redirect_to :controller => :users, :protocol => 'http'
end

end 
```

我正在使用标志“值”来检查电子邮件是否已发送

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T01:31:57.823

我为我的高级项目的一部分做了这个，我是这样做的：

为每个用户添加一个复选框，该复选框链接到 do 循环内每个用户的 id，如下所示：

```
<td><%= check_box_tag ':multiple_users[]', user.id %></td> 
```

在 do 循环下面添加一个 submit_tag，看起来像，注意这个名称只是为了区分我们在选择用户时使用的不同操作：

```
<%= submit_tag "Email Selected Users", :name => "selected"  %> 
```

在视图顶部的某处添加相应的表单标签，我的转到处理程序，但您的将转到您的“发送”操作，空哈希很重要：

```
<%= form_tag handle_checkbox_handler_path({}) do %> 
```

生成一个邮件程序，我没有这样做，我不知道怎么做，我相信谷歌会这样做:) 你还需要为邮件程序制作一个配置文件（再次谷歌这个，我帮不了你）。

拥有该邮件程序后，在其中创建一个操作以向用户发送电子邮件：

```
def email_user(email, subject, text_body)
  @text_body = text_body
  mail( :to => email, :subject => subject, :from => "monkey@feet.com")
end 
```

完成操作后，为电子邮件创建相应的视图（我的非常简单，它只是放置`@text_body`值。

```
<%= @text_body %> 
```

在您的发送操作中，将电子邮件发送给多个用户，这是我的代码，我不是 Ruby 专家，但它对我有用。而且它不是很干净，所以我会添加一些评论以提高您的可读性：

如果不是 params[':multiple_users'].nil？# 有多个用户要发邮件

```
 # Split the passed string and loop through each ID in the string sending an email to each user listed
    params[':users'].split.each do |u|

      # Emailer is my mailer's name, :subject and :message I passed into the action as well. email_user is the name of my mailer action, defined above.
      Emailer.email_user(User.find(u.to_i).email, params[:subject], params[:message]).deliver
    end
      redirect_to users_path, :notice => "Message was sent successfully"

   else # there is only one user to email 
    if Emailer.email_user(params[:email], params[:subject], params[:message]).deliver # Try to send, if fails tell them so
      redirect_to users_path, :notice => "Message was sent successfully"
    else
      redirect_to users_path, :alert => "Message failed to send"
    end
  end
end 
```

我希望这是可读的，至少给你一个起点。您还应该知道，我前面提到的 check_box_handler 会进行一些检查以确保没有发生任何不好的事情。

# sorting - 用图像排序的数据表

> ID：11978814
> 
> 赞同：0
> 
> 时间：2012-08-15T23:37:49.867
> 
> 标签：sorting, datatables

我有以下问题 - 我有一个包含 n 行的数据表。第一列是使用简单计数器的序列号。我的表格有一个功能，当我双击该行时，它变得可编辑，并且“检查”和“取消”图像显示在第一列中，就在序列号旁边。用户可以编辑行并相应地保存/取消行。这个逻辑的问题是，由于第一列中有图像，我无法根据第一列对表格进行排序。当我删除图像时，排序工作完美。

我知道这是一个奇怪的问题，但我真的不想为此更改编辑逻辑。

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T00:46:36.703

从 datatables.net 获得帮助。从第一列中删除了图像。在编辑事件中，使用 jQuery`append`并将`remove`元素添加/删除到第一列。

# python - 突出显示函数调用崇高文本（python）

> ID：11978816
> 
> 赞同：4
> 
> 时间：2012-08-15T23:37:57.667
> 
> 标签：python, syntax-highlighting, textmate, sublimetext2, sublimetext

我希望能够找到一种方法来用不同的颜色为 python**中的函数调用名称着色。**此行为适用于 C 语言，但不适用于 Python。这就是为什么我认为应该可以做到。

编辑：

我不是在寻找特定的配色方案语法，而是在寻找我必须添加到 Python.tmLanguage 中的特定行。

在尝试了 jdi 的建议后，我得到了这个：

![在此处输入图像描述](../Images/3e9e380cbcc67af4c87c9ce253521420.png)

我想要的只是数组颜色不同，而不是括号、对象调用方法等......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T01:52:53.443

您将需要编辑现有主题，或复制一个，修改它，然后设置为...然后您可以在底部添加类似这样的内容：

```
<dict>
    <key>name</key>
    <string>Function call</string>
    <key>scope</key>
    <string>meta.function-call - punctuation - meta.function-call.arguments</string>
    <key>settings</key>
    <dict>
        <key>foreground</key>
        <string>#FF0000</string>
    </dict>
</dict> 
```

这采用函数调用模式，并减去调用括号的子集，只留下名称。

默认主题位于：`Packages/Color Scheme - Default`

![突出显示的文本示例](../Images/262f8b5ebcc94ad92adee095ff1d9dd8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T22:49:46.160

这是我到目前为止所拥有的，它并不完美，但它有点工作：

我从捆绑在每个 ST2 中的 C.tmLanguage 文件中获取了这部分内容，并添加了一些内容，以便它可以与 Python.tmLanguage 文件中定义的 Python 中的一些默认函数不同的颜色：

```
 <dict>
        <key>captures</key>
        <dict>
            <key>1</key>
            <dict>
                <key>name</key>
                <string>punctuation.whitespace.function-call.leading.python</string>
            </dict>
            <key>2</key>
            <dict>
                <key>name</key>
                <string>support.function.any-method.python</string>
            </dict>
            <key>3</key>
            <dict>
                <key>name</key>
                <string>punctuation.definition.parameters.python</string>
            </dict>
        </dict>
        <key>match</key>
        <string>(?x) (?: (?= \s )  (?:(?&lt;=else|new|return) | (?&lt;!\w)) (\s+))?
(\b
    (?!(while|for|do|if|else|switch|catch|enumerate|return|r?iterate|
        __import__|all|abs|any|apply|callable|chr|cmp|coerce|compile|delattr|dir|
        divmod|eval|execfile|filter|getattr|globals|hasattr|hash|hex|id|
        input|intern|isinstance|issubclass|iter|len|locals|map|max|min|oct|
        ord|pow|range|raw_input|reduce|reload|repr|round|setattr|sorted|
        sum|unichr|vars|zip|basestring|bool|buffer|classmethod|complex|dict|enumerate|file|
        float|frozenset|int|list|long|object|open|property|reversed|set|
        slice|staticmethod|str|super|tuple|type|unicode|xrange|
        abs|add|and|call|cmp|coerce|complex|contains|del|delattr|
        delete|delitem|delslice|div|divmod|enter|eq|exit|float|
        floordiv|ge|get|getattr|getattribute|getitem|getslice|gt|
        hash|hex|iadd|iand|idiv|ifloordiv|ilshift|imod|imul|init|
        int|invert|ior|ipow|irshift|isub|iter|itruediv|ixor|le|len|
        long|lshift|lt|mod|mul|ne|neg|new|nonzero|oct|or|pos|pow|
        radd|rand|rdiv|rdivmod|repr|rfloordiv|rlshift|rmod|rmul|ror|
        rpow|rrshift|rshift|rsub|rtruediv|rxor|set|setattr|setitem|
        setslice|str|sub|truediv|unicode|xor
    )\s*\()(?:(?!NS)[A-Za-z_][A-Za-z0-9_]*+\b | :: )++                  # actual name
)
 \s*(\()</string>
        <key>name</key>
        <string>meta.function-call.python</string>
    </dict> 
```

这就是使用 Monokai Bright 主题输出的样子，虽然它非常微妙，但您可以注意到它`open`的格式与`array`.

![在此处输入图像描述](../Images/7d784014bc73b9795769cbd68db70636.png)

# objective-c - 在上传 HTTP 代码中使用 NSOperation

> ID：11978818
> 
> 赞同：0
> 
> 时间：2012-08-15T23:38:17.100
> 
> 标签：objective-c, ios, nsoperation

我需要实现一个子类，`NSOperation`该子类将文件上传到 HTTP 服务器，并且用户可以在操作期间取消文件上传。

这是目前的代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
  NSString *documentsDirectory = [paths objectAtIndex:0];
  NSString *imagePath = [documentsDirectory stringByAppendingPathComponent:filename];

  NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];

  [request setCachePolicy:NSURLRequestReloadIgnoringLocalCacheData];
  [request setHTTPShouldHandleCookies:NO];
  [request setTimeoutInterval:20];
  [request setHTTPMethod:@"POST"];

  NSString *boundary = @"------WebKitFormBoundary4QuqLuM1cE5lMwCy";

  NSString *contentType = [NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary];
  [request setValue:contentType forHTTPHeaderField: @"Content-Type"];

  NSMutableData *body = [NSMutableData data];
  NSString *FileParamConstant = @"uploadFile";
  NSData *imageData = [[NSData alloc] initWithContentsOfFile:imagePath];

  NSMutableDictionary *parameters = [[NSMutableDictionary alloc] initWithCapacity:11];
  [parameters setValue:@"Value" forKey:@"Server_required_param"];

  NSString *urlString = @"http://www.omeuendereco/uploadFile.php";   

  for (NSString *param in parameters) {

      [body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
      [body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; name=\"%@\"; filename=\"%@\"\r\n", FileParamConstant, filename] dataUsingEncoding:NSUTF8StringEncoding]];
      [body appendData:[[NSString stringWithString:@"Content-Type: image/jpeg\r\n\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
      [body appendData:imageData];
      [body appendData:[[NSString stringWithFormat:@"\r\n"] dataUsingEncoding:NSUTF8StringEncoding]];
  }

  [body appendData:[[NSString stringWithFormat:@"--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

  [request setHTTPBody:body];
  [request setURL:[NSURL URLWithString:urlString]];

  NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request
                                                                delegate:up
                                                        startImmediately:YES]; 

  [connection start]; 
```

问题是我必须在这段代码中实现一个 NSOperationqueue 我不知道如何。然后使用 NSOperation 的子类，我将能够取消上传操作。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-16T16:35:03.607

你到底是什么问题？如果您不知道如何创建子类 - 学习 Objective-C。

如果我不理解你（并且有一些复杂的问题，但我不这么认为），你有两个解决方案。

1.  创建那个子类，然后创建一个 NSOperationQueue 的实例，将该子类的一个实例添加到队列中。

2.  使用 AFNetworking 或 MKNetworkKit（MKNetworkKit 使用 NSOperation 和 NSOperationQueue）

# c++ - 如何将宏用于无符号长数？

> ID：11978826
> 
> 赞同：6
> 
> 时间：2012-08-15T23:39:51.263
> 
> 标签：c++, c, macros

这是我的代码：

```
#define MSK 0x0F
#define UNT 1
#define N 3000000000

unsigned char aln[1+N];
unsigned char pileup[1+N];

void set(unsigned long i)
{
    if ((aln[i] & MSK) != MSK ) {
        aln[i] += UNT;
    }
}
int main(void) {} 
```

当我尝试编译它时，编译器会这样抱怨：

```
 tmp/ccJ4IgSa.o: In function `set':
 bitmacs.c:(.text+0xf): relocation truncated to fit: R_X86_64_32S against symbol `aln' defined in COMMON \
 section in /tmp/ccJ4IgSa.o
  bitmacs.c:(.text+0x29): relocation truncated to fit: R_X86_64_32S against symbol `aln' defined in COMMON\
 section in /tmp/ccJ4IgSa.o
 bitmacs.c:(.text+0x32): relocation truncated to fit: R_X86_64_32S against symbol `aln' defined in COMMON\
  section in /tmp/ccJ4IgSa.o 
```

我认为原因可能`N`是太大了，因为如果我将 N 更改为 2000000000 可以成功编译。但我需要 3000000000 作为 N 的值..

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T23:43:09.970

根据您的原始问题：使用整数文字后缀*UL*（或类似的）来强制 N 的存储类型：

```
#define N 3000000000UL 
```

但是，（根据您对 HLundvall 的回答的评论）`relocation truncated to fit`错误显然不是由于这个原因——它可能（正如 Mystical 和 Matt Lacey 所说）太大而无法适应该细分市场。

* * *

顺便说一句，如果你问一个单独的问题来解释你试图用你的巨大数组完成什么，有人可能会提出一个更好的解决方案（更可能适合内存）

例如：

*   您的示例代码仅使用所示代码中每个字节的低半字节：您可以将其打包成一半大小（诚然，这仍然太大了）
*   根据您的访问模式，您可能能够将阵列保留在磁盘上并将工作子集缓存在内存中
*   如果我们知道您需要什么，可能会有更好的整体算法和数据结构

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T23:48:46.417

忽略数字文字不是正确类型的“正式”问题（有关正确语法，请参阅其他答案），这里的关键点是分配 3 GB 静态/全局数组是一个非常糟糕的主意。

`static`大多数平台上的全局¹变量直接从可执行映像映射，这意味着您的可执行文件必须大到 3 GB，即使对于当今的标准来说也相当大。即使在某些平台上可能会取消此限制（请参阅注释），您也无法控制如何处理分配失败。

最重要的是，全局变量不适用于这么大的东西，您可能会发现链接器（例如您找到的那个）和加载器施加的任意限制的问题。相反，您应该在堆上分配任何大于几 KB 的东西，使用`malloc`或`new`一些特定于平台的函数，优雅地处理运行时可能出现的故障。

不过，请记住，对于在几乎任何 32 位操作系统下运行的应用程序，不可能按照您的要求获得 3 GB 的连续内存，并且完全不可能获得多个这些阵列（=超过 4 GB连续内存），而无需使用特定于平台的技巧（例如，在给定时刻仅映射内存中数组的特定部分）。

另外，您确定自从您的程序开始运行以来您确实需要所有连续的内存吗？没有更好的数据结构/算法可以避免分配所有内存吗？

* * *

1.  一般而言，标准所称的具有*静态存储持续时间*的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T00:18:13.793

问题在于 gcc（默认情况下）使用 pc 相对访问来获取 x86_64 目标上的静态数据对象的地址，并且这些访问最多限制为 2^31 字节。因此，如果符号最终被放置在距离访问它的代码超过 2GB 的地方，当它尝试使用太大而无法容纳在操作说明。

`-mcmodel=large`您可以通过使用gcc 选项来避免此问题。这告诉它不要假设它可以使用 32 位 PC 相对偏移量来访问符号（除其他外）

请注意，常量字面量的类型后缀大多是无关紧要的——对于 int 来说太大的常量字面量将自动变成没有任何后缀的 long（如果需要，甚至可以变成 long long）。请参阅 C99 规范的 6.4.4.1.5。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T23:43:39.890

要输入 unsigned long 类型的数字常量，请使用：

```
#define N 3000000000UL 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-16T00:24:43.677

您的可执行文件试图将对象放入内存中超过 4GB 标记，这是不允许的。请参阅此链接：[http](http://www.technovelty.org/code/c/relocation-truncated.html) ://www.technovelty.org/code/c/relocation-truncated.html 。

来自文章：“如果你看到这个并且你不是手工编码，你可能想查看 gcc 的 -mmodel 参数。”

# php - 打印类变量时的问题

> ID：11978828
> 
> 赞同：-1
> 
> 时间：2012-08-15T23:40:04.907
> 
> 标签：php, oop

我正在创建一个像 MVC 这样的系统。
当我想调用视图文件时，我正在使用下面的类。编辑：与此同时，他可以这样做：[http ://www.youtube.com/watch?feature=player_detailpage&v=Aw28-krO7ZM#t=1166s](http://www.youtube.com/watch?feature=player_detailpage&v=Aw28-krO7ZM#t=1166s)

```
<?php 
class Call{    
    function __construct($fileName) {
        //$this->db = new Database;
        self::callFile($fileName);
    }

    function callFile($fileName)
    {
        $this->title = "example";
        $this->description = "example";
        $this->keywords = "example";
        $fileName = $fileName . '.php';
        require PAGESPATH.'common/header.php';
        require PAGESPATH.$fileName;
        require PAGESPATH.'common/footer.php';
    }
}
?> 
```

$fileName 是 index.php。Index.php 只有

```
Index Page.. 
```

我想在 header.php 中打印数据，如下所示：

```
<html>
    <head>
        <meta charset="utf-8">
    <title><?php if(isset($this->title)){echo $this->title;} ?> - WebProgramlama.tk</title>
    <meta name="description" content="<?php if(isset($this->description)){echo $this->description;}?>" />
    <meta name="keywords" content="<?php if(isset($this->keywords)){echo $this->keywords;} ?>" />
   </head>
   <body> 
```

但是我遇到了错误。

```
Fatal error: Using $this when not in object context in /var/www/webprogramlama/class/pages/common/header.php on line 4 
```

我能解决这个问题吗？注意：请小心！header.php 由 Call 类调用。header.php 在 Call 类中。

编辑：为什么[这](http://dl.dropbox.com/u/94293626/orn.zip)正在运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T03:29:56.763

别再看那个愚蠢的“教程”了。这太糟糕了，以至于有一次我真的开始笑了。

你不能在没有任何经验的情况下学习一门语言，然后就开始使用高级概念。MVC 就是这样的概念之一。要真正掌握它，您需要了解面向对象的编程以及与之相关的许多原则。

*   [单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)
*   [关注点分离](http://en.wikipedia.org/wiki/Separation_of_concerns)
*   [得墨忒耳法则](http://c2.com/cgi/wiki?LawOfDemeter)
*   [控制反转](http://martinfowler.com/articles/injection.html)
*   [里氏替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)

.. 等等。而且你不会仅仅通过阅读文章来理解这些原则。

至于如何解决您的问题，您可以阅读[这篇文章](http://codeangel.org/articles/simple-php-template-engine.html)。它将解释如何使用模板。这实际上是您的“mvc 教程”实际上是什么 - 制作路由机制和模板的糟糕指南。

此外，您必须了解，如果您这样做`self::something();`，它就在对象之外。您在类上调用静态方法，这实际上只是进行过程编程的糟糕方式。

您应该从学习PHP[**中 OOP 的基础知识**](http://uk.php.net/manual/en/language.oop5.php)开始，因为您不了解它。为了你自己的利益，至少一年远离 MVC 和框架。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T23:43:45.547

`$this->title`您需要在代码中创建对象的新实例，而不是在类外部调用元素，如下所示：

```
$callObject= new call($filename); 
```

然后像这样在页面中引用它：

```
$callObject->title; 
```

您只能使用`$this->`类本身内部的代码。在其他任何地方，您都需要创建一个对象，因此`$this`不存在 - 该类的对象存在 - 然后您必须通过其名称来引用它。同时，如果要调用`$callObject`你的变量，你不能像*在*类中那样引用它——因为那时你还没有创建它的实例，所以你需要通过`$this`语法来引用它这是一个很好的说法`my element called title`。

编辑：好的，我明白你现在在做什么，天哪。

这是相当危险的，因为您的 header.php 文件将包含大量*只能*在名为 class 的类中工作的内容 - 并且在每一种其他情况下都会产生可怕的错误。

PHP 会让你拥有`header.php`文件原样，但是当 PHP 评估内容时，你的对象是不完整的。您应该[阅读this question](https://stackoverflow.com/questions/4607181/why-i-cant-divide-a-class-over-several-files)，它将更详细地回答该部分。

编辑 2：不要在文件之间拆分函数。

如果里面的代码*只*`header.php`在函数中使用（看起来是这样），则将它的全部内容复制到类中 - 不要使用 a or试图即时粘贴它。*`require``include`*

 *一个班级永远不要有多个文件。文件有多长并不重要。

编辑3：

这是标题部分的代码应如下所示：

```
<?php 
class Call{    
    function __construct($fileName) {
    //$this->db = new Database;
    self::callFile($fileName);
    }

    function callFile($fileName)
    {
    $this->title = "example";
    $this->description = "example";
    $this->keywords = "example";
    $fileName = $fileName . '.php';
    echo "
<html>
    <head>
    <meta charset='utf-8'>
    <title>        
    ";
    echo (isset($this->title)) ? $this->title : "";
    echo "
 - WebProgramlama.tk</title>
    <meta name='description' content='
    ";
    echo (isset($this->description)) ? $this->description : "";
    echo "' />
    <meta name='keywords' content='
    ";
    echo (isset($this->contents)) ? $this->contents : "";
    echo "
' />
   </head>
   <body>
    ";

    //require PAGESPATH.$fileName;
    //require PAGESPATH.'common/footer.php';
    // you can only include files that don't use any $this-> type elements.
    }
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T23:43:37.053

`$this`在类之外没有上下文。创建你的类的一个实例并使用它。

```
<html>
    <head>
        <meta charset="utf-8">
<?php
    $class = new Call('filename');
?>    
    <title><?php if(isset($class->title)){echo $class->title;} ?> - WebProgramlama.tk</title>
    <meta name="description" content="<?php if(isset($class->description)){echo $class->description;}?>" />
    <meta name="keywords" content="<?php if(isset($class->keywords)){echo $class->keywords;} ?>" />
   </head>
   <body> 
```

摆脱你在函数中的`require`陈述；`callFile`他们没有地方在那里。*

# objective-c - UIButton 连接到 html

> ID：11978829
> 
> 赞同：0
> 
> 时间：2012-08-15T23:40:08.200
> 
> 标签：objective-c

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T23:48:01.050

是的，您应该只需要这些方法。

```
//First initialize the NSURLRequest.
- (id)initWithURL:(NSURL *)theURL
//Fire the request.
- (void)loadRequest:(NSURLRequest *)request 
```

在您的 IBAction 中。

```
//In your IBAction
NSURLRequest *req = [NSURLRequest initWithURL:[NSURL URLWithString:yourURL]];
[webView loadRequest:req]; 
```

# ruby-on-rails - rails 将电子邮件地址添加到 cc 而不实际将其发送到该地址

> ID：11978836
> 
> 赞同：0
> 
> 时间：2012-08-15T23:41:12.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, email, actionmailer

我有一个小的 Rails 脚本，可以接收我们内部员工的电子邮件并将其最近发送到真实地址。

我的工作流程如下所示：

管理员向客户真实地址和员工内部地址发送电子邮件，然后系统解析电子邮件将客户真实地址更改为系统内部，并将此电子邮件发送到他使用的员工真实地址，但此时我无法抄送客户内部地址，因为它会再次将此电子邮件发送给客户。

所以我的问题是，我如何将电子邮件地址添加到 cc 以便用户可以看到两个收件人，但没有实际将该电子邮件发送给客户。甚至可能吗？

# ms-access - 为什么数据表视图在基于排序和过滤的 adodb 记录集时仅显示 100 条记录

> ID：11978844
> 
> 赞同：0
> 
> 时间：2012-08-15T23:42:08.997
> 
> 标签：ms-access, adodb

我有一个 access 2003 前端数据库，其表单允许用户查看某些数据的排序和/或过滤视图。数据显示在子窗体中。

将基本数据（在打开表单时加载）检索到断开连接的 ADODB.Recordset 对象（静态客户端光标）中。子窗体的 Recordset 属性设置为断开连接的记录集并显示所有记录。

仅对记录集对象应用排序（在代码中），然后将子表单设置为使用排序的记录集，以显示应用了正确排序的数据。filter 属性设置为 adFilterNone 以使其正常工作。显示所有记录（正确）。

仅将过滤器（在代码中）应用于记录集对象，然后将子表单设置为使用过滤后的记录集，从而显示应用了正确过滤器的数据。sort 属性设置为空字符串以使其正常工作。显示匹配过滤器的所有记录（正确）。

当排序属性和过滤器属性都设置在记录集上，然后该记录集设置为子窗体的记录集属性时，仅显示前 100 条匹配记录（不正确）。它们按排序顺序显示。底层记录集对象显示过滤记录的正确记录计数，它们只是不会全部显示在表单上。

有谁知道为什么会发生这种情况，除了每次使用新的 SQL 字符串创建记录集之外，是否还有其他方法可以解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T20:03:14.700

您所看到的过滤和排序是 ADO 记录集的一个已知限制。

查看此页面上列出的 ADO Cons 列表。注意底部的那个： [http ://www.utteraccess.com/wiki/index.php/Choosing_between_DAO_and_ADO](http://www.utteraccess.com/wiki/index.php/Choosing_between_DAO_and_ADO)

我在 MS 的支持网站上找不到任何关于此的文档，所以我不知道这是一个错误还是仅仅是一个限制。我假设是后者。

仅供参考，我认为 MS 基本上已经忘记了 ADO（经典）。MDAC 的最后一个版本（这是您获取 ADO 的方式）是 2005 年 5 月 10 日。

至于此问题的解决方法，您可以尝试使用此功能。它返回一个新的、过滤和排序的记录集。只需在手边保留一个完整的大记录集，并在每次进行排序/过滤时使用此功能获取一个新记录集。这确实会增加您的整体资源使用量，尤其是内存。

我已经使用了这个功能，但它还没有经过全面测试，以确保它在各个方面都是防弹的。您可能会很快发现它的一些错误或限制。实际上我有一个注释，它需要某种工作，但我的注释不清楚，我现在没有时间测试它，我确实发现我在我的生产代码中使用了这个函数，所以我认为它正在工作。

```
Public Function GetFilteredRecordset(ByRef rsSource As ADODb.Recordset, _
                                        ByVal sWhere As String, _
                                        Optional ByVal sOrderBy As String, _
                                        Optional ByVal LockType As ADODb.LockTypeEnum = adLockUnspecified) As ADODb.Recordset

    Dim sOriginalOrderBy As String
    sOriginalOrderBy = rsSource.Sort
    Dim F As ADODb.Field
    For Each F In rsSource.Fields
        'Debug.Print F.Name
    Next F

    rsSource.Filter = sWhere
    If sOrderBy <> "" Then
        If Left(LCase(sOrderBy), 8) = "order by" Then sOrderBy = Trim(Right(sOrderBy, Len(sOrderBy) - 8))
        rsSource.Sort = sOrderBy
    End If
    Dim rsF As ADODb.Recordset

    Dim objStream As ADODb.Stream
    'Create a New ADO 2.5 Stream object
    Set objStream = New ADODb.Stream
    'Save the Recordset to the Stream object in XML format
    rsSource.Save objStream, adPersistXML
    'Create an exact copy of the saved Recordset from the Stream Object
    Set rsF = New ADODb.Recordset
    rsF.Open objStream, , , LockType

    rsSource.Filter = ""
    rsSource.Sort = sOriginalOrderBy
    'Close and de-reference the Stream object
    objStream.Close
    Set objStream = Nothing
    Set GetFilteredRecordset = rsF
End Function 
```

过滤 ADO 记录集的另一个奇怪限制是您的 OR 关键字必须始终位于顶层。尽管我不确定给出的示例是否准确，但我在上面发布的链接中也记录了这一点。

# c# - events v.s. async methods using TaskCompletionSource

> ID：11978846
> 
> 赞同：2
> 
> 时间：2012-08-15T23:42:42.137
> 
> 标签：c#, async-await

I am currently implementing an application protocol library relying on TCP/IP for transport (long lasting connection).

I am trying to achieve a nice asynchronous implementation relying on TAP pattern using C#5 async/await constructs, mainly to put into practice the concepts I have only seen in theory up until now.

The client can connect to a remote server and send requests to it. client receives response from the server as well as requests (full duplex mode).

From the point of view of the client code, the asynchronous call to my library to send a request to the server and receive the associated response is as simple as :

```
var rsp = await session.SendRequestAsync(req); 
```

From inside my protocol library, I am just buliding the request, converting it to bytes (to be sent on the network stream) and I call `WriteAsync` on the stream and I then await on a Task created just before sending the request, making use of a `TaskCompletionSource` object, which is basically waiting for the associated response to be received (and setting the result on the tcs), and then return the response to the client caller.

This part seems fine.

Now the "problem" concerns the part where server is sending requests to the client. There are different type of requests that the server can send to the client.

My protocol library is using an asynchronous loop to listen to the underlying stream (receiving incoming responses or requests from the server). This loop is reading responses/requests asynchronously on the stream, then in case of a request from the server, it raises an event corresponding to the request type (such as ReceivedRequestTypeA). The client code can subscribe to these events to be notified when a specific request type is received from the server. The event args of these contains all the parameters associated with the request as well as a response object, to be set by the client, which will be asynchronously sent on the stream by library once event handler code is completed.

The code for the asynchronous listen loop is as follow. Please do not mind the `while true`, not very pretty (cancelation pattern should be used instead), but this is not the point !

```
private async Task ListenAsync()
{
  while(true) 
  {
    Request req = await ReadRequestAsync();
    await OnReceivedRequest(req);
  }
} 
```

So the loop is calling the asynchronous method `ReadRequestAsync` which is just reading some bytes asynchronously in the stream until a complete request or response is available. Then it forwards the request to the asynchronous method `OnReceivedRequest` which code can be seen below :

```
private async Task OnReceivedRequest(Request req)
{
   var eventArgs = new ReceivedRequestEventArgs { Req = req };

   if (req is RequestTypeA)
   { ReceivedRequestTypeA(this, eventArgs); }

   [... Other request types ...]

   await SendResponseAsync(eventArgs.Resp);
} 
```

This asynchronous method raise the appropriate request type event. The client code is subscribed to this event, so its appropriate event handler method is called ... the client code does whatever it needs with the request and then construct a response and set it in the EventArgs object -end of event handler method-. The code resumes in OnReceivedRequest in the library, and the response is sent asynchronously (calling WriteAsync on the underlying stream).

I don't think this is a good approach, as it can completely block the asynchronous loop in the library if the event handler code on client side is doing a lengthy blocking operation (bye bye fully asynchronous protocol library, you are now becoming somehow synchronous due to client code). The same would happened if I was using an asynchronous task based delegate for events and awaiting on it.

I was thinking that instead of using events, I could have an asynchronous method `GetRequestTypeAAsync()` which would be implemented using `TaskCompletionSource` object in library, and the tcs result being set with the request in `OnReceivedRequest`. And on client code side, instead of subscribing to `ReceivedRequestTypeA` event, the code would rather consist of a loop arround `GetRequestTypeAAsync()`. Still as the client code must somehow provide a response to the library to be sent to server, I don't know how this could work ...

My brain is completely fuzzy right now and can't really think clear. Any suggestion for a nice design will be greatly appreciated.

Thanks !

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T00:37:59.173

I'm also working on `async`/`await` TCP/IP sockets, and I strongly recommend you take a look at TPL Dataflow. It's pretty easy to make `async`-friendly endpoints using two `BufferBlock`s (one for reads and one for writes).

In my system, the TCP/IP socket wrapper exposes a simple `ISourceBlock<ArraySegment<byte>>` representing the raw reads. This is then linked to a `TransformManyBlock` which performs [message framing](http://nitoprograms.blogspot.com/2009/04/message-framing.html), and from there it can be linked to a `TransformBlock` which parses the bytes into actual message instances.

This approach works best if you have a `RequestType` base class from which all your other message types inherit. Then you can have a single receiving task that just (asynchronously) receives `RequestType` message instances from the end of the dataflow pipeline.

# applescript - 从 chrome 保存文件时更改“kMDItemWhereFroms”扩展属性

> ID：11978851
> 
> 赞同：0
> 
> 时间：2012-08-15T23:43:28.497
> 
> 标签：applescript

我正在尝试在开始读研究生之前编写/收集一些生产力脚本。我想做的是跟踪我下载（主要是 pdf）文件以进行研究的上下文......例如，获取文件附加到的原始电子邮件。

幸运的是，Mac OS X 在文件的扩展属性中记录了下载 URL 以及引用 URL。但是，按照 google 处理附件的方式，原始电子邮件 URI 在实际文件下载开始之前会在一系列重定向中丢失。

我希望有一些 Apple Script 魔术来纠正`kMDItemWhereFroms`扩展属性以包含启动下载的页面的 URI。我能够（例如）获取活动标签的 URL

```
tell application "Google Chrome"
    get URL of active tab of first window
end tell 
```

并且可以通过执行更正扩展属性

```
xattr -w com.apple.metadata:kMDItemWhereFroms NEW_URL FILENAME 
```

但是，我缺少的是a) 的某种方式。获取最近下载的文件的路径名以自动运行`xattr`命令，或者可能是 b)。在 Apple Script 中创建备用下载工作流程，或 c)。其他一些绝妙的主意....？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:52:49.450

将其保存在您的文件夹操作文件夹中，并将其附加到您的下载文件夹中。

```
 on adding folder items to theFolder after receiving theFiles
    repeat with aFile in theFiles
        tell application "Google Chrome"
            activate
            set myUrl to URL of active tab of first window
        end tell

        set filePath to quoted form of POSIX path of aFile
        do shell script "xattr -w com.apple.metadata:kMDItemWhereFroms " & quoted form of myUrl & space & filePath

    end repeat
end adding folder items to 
```

# jax-rs - 未找到响应类 MyException 的消息正文编写器

> ID：11978855
> 
> 赞同：0
> 
> 时间：2012-08-15T23:43:40.053
> 
> 标签：jax-rs

我正在使用 Apache-cxf 来实现 Restful Web 服务。如果发生异常，我正在使用 ExceptionMapper 构建响应对象。如果发生任何异常，我会遇到错误。

“没有找到响应类 MyException 的消息正文编写器。”

我可以找到一些建议实现 MessageBodyWriter 的自定义 Writer 的帖子，但我不太清楚如果为构建响应传递的实体对象 (ErrorInfo) 是 jaxb 对象，为什么我需要自定义编写器。这可能是一个非常愚蠢的问题，但只是想了解。

```
@Provider
public class MyExceptionMapper implements
    ExceptionMapper<MyException> {

@Override
public Response toResponse(MyException ex) {
    Response.Status statusCode = exceptionMap.get(ex.getClass());
    ErrorInfo errorInfo=new ErrorInfo();
    errorInfo.setErrorCode(ex.getErrorCode());
    errorInfo.setErrorMessage(ex.getMessage());

    return Response.status(statusCode).entity(ex).build();
    }
}

@XmlRootElement(name = "errorInfo")
@XmlType(propOrder = { "errorCode", "errorMessage"})
public class ErrorInfo {
private String errorCode;
private String errorMessage;

public String getErrorCode() {
    return errorCode;
}
public void setErrorCode(String errorCode) {
    this.errorCode = errorCode;
}
public String getErrorMessage() {
    return errorMessage;
}
public void setErrorMessage(String errorMessage) {
    this.errorMessage = errorMessage;
}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-09T13:26:05.443

有同样的问题，对我来说设置内容类型明确解决了这个问题：

```
return Response.status(statusCode).entity(ex).type(MediaType.APPLICATION_JSON).build(); 
```

# solaris - 如何在 Solaris 11 中增加交换空间？

> ID：11978860
> 
> 赞同：0
> 
> 时间：2012-08-15T23:44:48.597
> 
> 标签：solaris

由于交换已满，我不断重启（！）我的 Solaris V20。如何为其添加更多空间？我已经分配了所有磁盘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T04:31:08.600

请参阅docs.oracle.com 上的 Solaris 11 文档中的*[调整 ZFS 交换和转储设备的大小。](http://docs.oracle.com/cd/E23824_01/html/821-1448/ggrln.html#ggvlr)*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T00:52:06.610

试试[这个教程](http://blog.deepreflect.net/2010/02/11/solaris-add-swap-to-zfs-disk/)。它适用于 Solaris 10，但它处理向 ZFS 磁盘添加交换空间并且应该对 Solaris 11 有效。

# python - Django 实例建立直到崩溃站点（更新：高度怀疑 Redis 死锁）

> ID：11978864
> 
> 赞同：0
> 
> 时间：2012-08-15T23:45:16.760
> 
> 标签：python, django, nginx, redis, deadlock

**有关可能的根本原因，请参见下面的 EDIT#2**

我的 Django 线程/进程（同时使用 'method=threaded' 和 'method=prefork' 时会发生同样的事情），每 10 分钟左右，随机构建，如下所示：http: [//i.imgur.com/VyUAv.png](http://i.imgur.com/VyUAv.png)例如很多这些过程：

`python ./manage.py runfcgi method=threaded host=localhost port=8888`

然后在一分钟左右的时间里，线程/进程建立起来足以取出我的网站。

站点负载非常小，但流量相当高，所以我认为这是某种阻塞问题。

有关如何解决甚至有效调试此问题的任何想法？谢谢。

**编辑：**我也从我的许多 Django 视图中大量使用 Redis。我现在开始研究 Redis 死锁问题是否是问题的根源......

**编辑#2：**当问题开始时，我看到 Redis 被固定在 100% CPU，这让我相信 Redis 死锁是核心问题。

我也收到了这个错误：

“（错误）加载 Redis 正在将数据集加载到内存中”

尝试通过此命令完全重启 Redis 时：

`./src/redis-cli flushall`

重要提示：我在一个单独的 EC2 微型实例上使用 Redis 2.2.7，而不是我的 Django Web 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T20:49:21.727

线程和进程是两个不同的东西。如果整个站点出现故障，原因很可能是线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T01:14:26.500

原来是 Redis 中的一个不起眼的错误。

Redis 更新，Redis 2.2.7 -> Redis 2.4.16 解决了这个问题。

# css - 页脚不会停留在 960 网格中

> ID：11978867
> 
> 赞同：0
> 
> 时间：2012-08-15T23:45:20.287
> 
> 标签：css, footer, 960.gs

我正在使用 960 网格系统，并且无法将页脚与网格以及页面底部保持一致。以下代码使用 0px 的 margin-left 和 margin-right 计算，而不是自动填充页面边缘之间的空间。

HTML

```
<footer class="botbar">
    <small class="contact">name address information</small>
    <small class="social">social media icons</small>
    <small class="humans">human info</small>
    <small class="copyright">&copy; info</small>
</footer> 
```

CSS

```
.botbar {
  /*properties of container_16*/
    margin-left:auto;
    margin-right:auto;
    width:960px;
  /*my styling*/
    clear: both;
    position: absolute;
    bottom: 0;}
.fcontact {
  /*properties of prefix_1*/
    padding-left:60px;
  /*properties of container_16+grid_4*/
    width:220px;
  /*properties of grid_4*/
    display:inline;
    float:left;
    margin-left:10px;
    margin-right:10px;
.social {
  /*properties of prefix_1*/
    padding-left:60px;
  /*properties of grid_4*/
    display:inline;
    float:left;
    margin-left:10px;
    margin-right:10px;
  /*properties of container_16+grid_4*/
    width:220px;
  /*properties of suffix_1*/
    padding-right:60px;}
.humans {
  /*properties of grid_4*/
    display:inline;
    float:left;
    margin-left:10px;
    margin-right:10px;
  /*properties of container_16+grid_4*/
    width:220px;
  /*properties of suffix_1*/
    padding-right:60px;}
.copyright{
  /*properties of grid_16*/
    display:inline;
    float:left;
    margin-left:10px;
    margin-right:10px;
  /*properties of container_16+grid_16*/
    width:960px;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T18:27:21.900

解决了它，能够做 .bottom 类并将其添加到页脚，因此`<footer class="botbar bottom">`不需要`<div>`

# c++ - 跨平台格式字符串

> ID：11978869
> 
> 赞同：0
> 
> 时间：2012-08-15T23:45:30.610
> 
> 标签：c++, multilingual, printf, format-string

到目前为止，我一直在使用 FormatString 使用编号变量（ 、 等）格式化多语言字符串`$1`-`$2`但是，它不是跨平台兼容的。

是否有一个`sprintf`跨平台的 -esque 功能可以做同样的事情？它不需要分配内存或任何东西 - 只需要能够处理可能位于字符串中不同位置的编号类型伪变量。

Boost 是可以的，如果它提供类似的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:49:38.013

我会看看 boost::format 。我已经使用了一段时间，而且效果很好。

另一种选择是使用 std::stringstreams 格式化输出。如果您不想或不能使用 boost，那几乎是唯一的可移植选项，另外，恕我直言，语法更具可读性。

与通常的 C API 相比，这两个库都是类型安全的，因此在 C++ 上下文中使用也更好、更安全。

# android - 移动设备 + Facebook 评论不起作用

> ID：11978870
> 
> 赞同：0
> 
> 时间：2012-08-15T23:45:50.750
> 
> 标签：android, ios, facebook

我已经在我的 Joomla 网站上安装了 facebook 评论，但在 android 和 iOS 设备中的视图很混乱，你只能看到 10% 的评论框![正如你在图片中看到的](../Images/9ea9803802192bf72357d121f9fc0503.png)

我已经尝试搜索可能的解决方案，但我没有找到运气。还有一点是，如果你把安卓浏览器设置为桌面模式，效果很好，但是在简单模式下，会出现随机的东西。

需要明确的是，图片是使用 android ICS 4.04 joomla 1.5 版本拍摄的。预览网站是 jeffrivera.com

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:05:43.760

Facebook 评论在 TechCrunch 上看起来不错，所以我怀疑是您网站的格式让它看起来很奇怪。有指向您网站的链接吗？您还可以粘贴包含 Facebook 评论插件的相关 HTML 吗？

![在此处输入图像描述](../Images/669a63821a068f2761568d7b6b3093ac.png)

# c# - 循环遍历集合时出错

> ID：11978871
> 
> 赞同：1
> 
> 时间：2012-08-15T23:45:54.273
> 
> 标签：c#

使用此代码：

```
Dictionary<DateTime, double> FlowInformation = new Dictionary<DateTime, double>();

foreach (DateTime key in FlowInformation)
{
    if (initialialrec != 0)
    {
        if (FlowInformation[key] > initialialrec)
            flow = key.ToShortDateString() + " " + key.ToShortTimeString() + "+";

        if (FlowInformation[key] < initialialrec)
            flow = key.ToShortDateString() + " " + key.ToShortTimeString()+"-";

        initialialrec = FlowInformation[key];
        file.WriteLine(flow);
    }

    FlowInformation.Clear();                    
} 
```

我得到一个编译错误：

```
Strategy\theFlowStrategy.cs 无法将类型“System.Collections.Generic.KeyValuePair”转换为“System.DateTime”   

```

我如何迭代这个集合？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T23:49:15.633

通用字典是`KeyValuePair`项目列表。

要循环播放键（正如您尝试做的那样），然后循环播放`FlowInformation.Keys`. 您也可以直接使用循环值`FlowInformation.Values`。

您可以做的另一件事是`KeyValuePair`用作迭代变量类型。这将使您不必`FlowInformation[key]`找出与您的键对应的值，因为该值将位于`.Value`迭代变量的属性中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T23:50:21.430

线

```
 foreach (DateTime key in FlowInformation) 
```

是不正确的。如错误消息所述，您的字典不包含 DateTime 对象，它包含 KeyValuePair 对象。

有几种方法可以解决这个问题。一种选择是遍历字典的*Keys*，它们确实是 DateTime 对象。

```
foreach (DateTime key in FlowInformation.Keys) 
```

另一种选择是遍历字典中的 KeyValuePair 对象，并根据需要提取键。

```
 foreach (var kvp in FlowInformation)
 {
     DateTime key = kvp.Key;
     ...
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T23:49:04.223

A`Dictionary<T,T>`包含一个列表`KeyValuePair<T,T>`。

我不知道你的整个代码，但我假设那`initialrec`是一个数字（`double`）并且`flow`是一个字符串。看一下这个：

```
 Dictionary<DateTime, double> FlowInformation = new Dictionary<DateTime, double>();

        double initialialrec;
        string flow;

        foreach (KeyValuePair<DateTime, double> Entry in FlowInformation)
        {
            if (initialialrec != 0)
            {
                if (Entry.Value > initialialrec)
                    flow = Entry.Key.ToShortDateString() + " " + Entry.Key.ToShortTimeString() + "+";

                if (Entry.Value < initialialrec)
                    flow = Entry.Key.ToShortDateString() + " " + Entry.Key.ToShortTimeString() + "-";

                initialialrec = Entry.Value;
                file.WriteLine(flow);
            }
        } 
```

但是，您不能`Clear`在循环内调用它。

# php - 如何使用 javascript 动态添加基于现有文件的 jquery 文件？

> ID：11978872
> 
> 赞同：0
> 
> 时间：2012-08-15T23:45:56.203
> 
> 标签：php, javascript, jquery, html

我有一个 jquery1.js 文件间歇性地与另一个 jquery2.js 文件冲突。我想仅在第一个 jquery 文件不存在时才加载第二个 jquery 文件，因为需要这些文件的模块会在整个站点中间歇性地显示。那么是否有可能在 javascript 中至少搜索字符串或内部 html 并对该结果做出决定？

即（在伪代码中）

```
if (jquery1 exists){do nothing}
else{document.write('<script>/jquery2.js</script>')} 
```

或类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T23:48:54.327

假设 jquery1.js 有 jQuery 命名空间`jQuery`（默认），您可以执行以下操作：

```
<script>!window.jQuery && document.write(unescape('%3Cscript src="/jquery2.js"%3E%3C/script%3E'))</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T00:00:18.423

您是否考虑过使用像[YepNope](http://yepnopejs.com/)这样的脚本加载器来管理这种依赖关系？

```
yepnope({
    test: window.jQuery,
    nope: 'jquery2.js',
    complete: function () {
        // Initialise any dependant scripts
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T23:50:25.293

我相信`$().jquery`会返回您正在使用的版本，因此您可以尝试`if($().jquery === undefined)`

# wcf - WCF 绑定文本块中的换行符

> ID：11978873
> 
> 赞同：0
> 
> 时间：2012-08-15T23:46:02.073
> 
> 标签：wcf, windows-phone-7, binding, textblock

我正在从前一页中提取数据，该页面是 wcf 服务的列表框中的选定项目。

我遇到的另一个错误是文本块没有读取我的数据中的格式。

这是从上一页引入数据的代码

```
private void LoadPlayer()
    {
        FrameworkElement root1 = Application.Current.RootVisual as FrameworkElement;
        var currentPlayer = root1.DataContext as PlayerProfile;
        _SelectedPlayer = currentPlayer;
    } 
```

这是xml

```
<TextBlock Height="Auto" TextWrapping="Wrap" Name="Blurb" Text="{Binding Bio}" xml:space="preserve" /> 
```

具体来说，我试图让 \r\n 在我的显示器中作为换行符工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:10:56.747

在这里查看答案：

[字符串属性中的换行符](https://stackoverflow.com/questions/183406/xaml-newline-in-string-attribute)

在您的情况下，您需要编写一个转换器（实现 IValueConverter 的东西），将包含 \r\n 的字符串数据转换为编码实体，即和 . 然后只需在您的绑定上使用该转换器。

```
public class EncodeCRLFConverter : IValueConverter
{
  public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
  {
    string stringtoconvert = value as string;

    if (input != null))
    {
        // Note there are different ways to do the replacement, this is
        // just a very simplistic method.

        stringtoconvert = stringtoconvert.Replace( "\r", "&#x0d;" );
        stringtoconvert = stringtoconvert.Replace( "\n", "&#x0a;" );

        return stringtoconvert;
    }
    return null;
  }

  public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
  {
    throw new Exception("The method or operation is not implemented.");
  }
} 
```

在某处创建转换器的实例……例如，通常在 .Resources 中……（在此示例中，我刚刚使用了 Window，因为我不知道您的 TextBlock 在里面）。

```
<Window.Resources>
<EncodeCRLFConverter x:Key="strconv"/>
<Window.Resources>

<TextBlock Height="Auto" TextWrapping="Wrap" Name="Blurb" Text="{Binding Bio, Converter={StaticResource strconv}}" /> 
```

# php - Drupal 7 文件上传（没有 hook_form）

> ID：11978877
> 
> 赞同：0
> 
> 时间：2012-08-15T23:46:46.927
> 
> 标签：php, javascript, post, file-upload, drupal-7

这是过去几天让我难过的一个难题。我在 Drupal 7 中使用模态表单，因此在 hook_form 系统之外工作，尝试上传图像。该表单是通过 ajax 帖子提交的，这使我无法将文件与帖子一起提交。我所做的是在 ajax 回调中，使用文件输入创建一个新的表单元素，然后触发提交，发布到我的模块定义页面。

原始输入元素：

```
<input type="file" id="chooseImage" name"someImage" class="form-file"> 
```

js触发提交：

```
$.ajax({
type:'POST',
url:$('#originalForm').attr('action'),
data: data,
success: function(response) {
    if (response.success) {
        $('<form id="imageForm" method="POST" action="upload/image/'+response.data.nid+'"></form>').appendTo($('#imageSubmit'));
        $('#chooseImage').appendTo($('#imageForm')); 
        console.log($('#imageForm'));
        $('#imageForm').submit(function(e){
            console.log(e);
            alert('freeze! hammertime...');
        });
        //This should post the file but it isn't...
        $('#imageForm').trigger('submit');
    }
},
dataType:'json'
}); 
```

提交事件显示文件属性就好了。但是，在后端，我的页面回调结束...

```
 function myModule_image_upload($param){
        error_log('number of files = '.sizeof($_FILES));
    } 
```

我显示没有发布任何文件。我猜在 .submit() 运行之后浏览器正在删除帖子中的文件数据，如果是这种情况，我可能对此无能为力，所以我必须在用于图像上传的钩子系统。

此外，无论这实际上在做什么，它似乎都会永久破坏看门狗，迫使我重新导入一个新的转储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:50:52.127

尝试这个：

```
$('<form id="imageForm" enctype="multipart/form-data" method="POST" action="upload/image/'+response.data.nid+'"></form>').appendTo($('#imageSubmit')); 
```

所以你忘了设置enctype。

另一个错误：

```
<input type="file" id="chooseImage" name"someImage" class="form-file"> 
```

应该

```
<input type="file" id="chooseImage" name="someImage" class="form-file"/> 
```

# r - 如何使用 R 将多项式回归集合的结果作为表格查看

> ID：11978878
> 
> 赞同：0
> 
> 时间：2012-08-15T23:46:47.603
> 
> 标签：r, aggregate-functions, regression

根据我在网上搜索的结果，以下是我将用来对数据执行 2 次多项式回归的方法（这是从网络中挑选出来的……我目前无法访问实际命令我对我的数据进行了执行，但我模仿了这个）：

```
Call:
lm(sample1$Population ~ poly(sample1$Year, 2, raw=TRUE))

Residuals:
    Min      1Q  Median      3Q     Max 
-46.888 -18.834  -3.159   2.040  86.748 

Coefficients:
                  Estimate Std. Error t value Pr(>|t|)    
(Intercept)       5263.159     17.655 298.110  < 2e-16 ***
sample1$Year        29.318      3.696   7.933 4.64e-05 ***
I(sample1$Year^2)  -10.589      1.323  -8.002 4.36e-05 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Residual standard error: 38.76 on 8 degrees of freedom
Multiple R-squared: 0.9407,     Adjusted R-squared: 0.9259 
F-statistic: 63.48 on 2 and 8 DF,  p-value: 1.235e-05 
```

我的数据集是一组数据的集合，每组有 70 多行对应于几个变量的月度数据测量值。我需要计算每组数据的回归，并找到二阶导数具有统计显着值的组。我想最终得到一个数据集，其中每个 group_id 包含一行，构成上面显示的摘要的每个数据点包含一列。

# android - 如何更改切换按钮的颜色？

> ID：11978880
> 
> 赞同：11
> 
> 时间：2012-08-15T23:47:12.253
> 
> 标签：android

> **可能重复：**
> [更改开关的“开启”颜色](https://stackoverflow.com/questions/11253512/change-on-color-of-a-switch)

当状态从绿色（真）变为红色（假）时，我需要`ToggleButton`改变颜色。我怎样才能改变`ToggleButton`颜色？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-16T00:05:09.670

在 res/values 文件夹中创建一个名为 colors.xml 的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="red">#ff0000</color>
    <color name="green">#00ff00</color>
</resources> 
```

在 drawable 文件夹中，创建一个 xml 文件 my_btn_toggle.xml：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_checked="false" android:drawable="@color/red"  />
    <item android:state_checked="true" android:drawable="@color/green"  />
</selector> 
```

并在 xml 部分定义您的切换按钮：

```
<ToggleButton
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="New ToggleButton"
    android:id="@+id/toggleButton"
    android:background="@drawable/my_btn_toggle"/> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-16T00:15:14.933

```
ToggleButton Btn=new ToggleButton(this);// or get it from the layout by ToggleButton Btn=(ToggleButton) findViewById(R.id.IDofButton);
        Btn.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                // TODO Auto-generated method stub
                if(isChecked)
                    buttonView.setBackgroundColor(Color.GREEN);
                else buttonView.setBackgroundColor(Color.RED);
            }
        }); 
```

# php - Joomla | PHP：在菜单结构中有一个类别博客列表/最新文章

> ID：11978888
> 
> 赞同：6
> 
> 时间：2012-08-15T23:48:44.510
> 
> 标签：php, joomla, joomla2.5, joomla1.7, joomla1.6

所以我有一个菜单，其中一些菜单项是动态类别列表。左侧导航中的类似内容（例如）：

```
Menu One
Category Two
  - Dynamic Article 1
  - Dynamic Article 2
  - Dynamic Article 3
Menu Three
Category Four
  - Dynamic Article 1
  - Dynamic Article 2
  - Dynamic Article 3 
```

## **编辑**

我认为我对菜单的描述不是很清楚，所以我将在这里扩展一下。

假设我有一个看起来非常时髦的左侧导航，并且组织方式如下：

```
 - About Us
   - Jack
   - Joe
   - Our Dog
 - Success Stories
   - Sammy in South Dakota
   - Delilah in Delaware
   - Arty from Arkansas
   - ....
 - Contact Us
 - Recent Articles
   - 9/4
   - 9/2
   - 8/30
   - 8/27
   - 8/25
   - ... 
```

在此过程中，将故事和文章转变为自己的类别是有意义的，因为它们经常更新，并且添加和删除菜单项的过程需要太多维护。我们还假设在“成功故事”和“近期文章”部分中，我想要最后的“x”篇文章，比如 5。

如果我只有一个菜单，我可以使用 Joomla 的近期新闻模块（类似于[“类别列表”](http://www.inmotionhosting.com/support/edu/joomla-25/menus/list-all-categories-options)，但会显示在菜单区域中）。但是，如果您尝试插入它，它将在您现有菜单之前或之后列出文章（例如，也许可以这样做：关于我们/联系我们/成功故事/最近的文章）。

我需要将它集成到菜单结构中，以便混合菜单项，它们是静态的（一个菜单链接转到一页）和动态的（菜单显示该类别的最后 x 篇文章）。在动态生成菜单时，需要将该类别列表作为子例程调用。或者菜单项（成功故事）需要被菜单结构中的类别列表替换。也许一个模块位置代替菜单，然后将最新消息放在那里？

* * *

我发现这篇[文章](https://stackoverflow.com/questions/9780166/joomla-menu-items-category-blog) 说要构建一个插件。这个[Joomla doc](http://docs.joomla.org/Menu_Items_Automatically_Pointing_to_New_Articles)虽然是 1.5 版，但看起来最新的新闻模块将插入菜单中——但那不是那样工作的。

我已经构建了超级简单的插件，并且正在学习 PHP 和 Joomla 开发 - 我将如何拦截菜单构造以插入类别列表？或者，如果有一种“开箱即用”的方式，我会全力以赴。如果它是一个[插件](http://docs.joomla.org/Plugin_Development)，你将如何拦截菜单？

我最初的想法是说如果 category = 15 然后打印出“category15”的模块位置。像[这样](https://stackoverflow.com/questions/8111570/how-to-creat-an-hierarchical-joomla-menu-structure)的东西。不知道我是否在正确的轨道上。

一如既往，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T09:29:23.443

自第 1 版以来，joomla 中就没有了。如果您按照这些步骤进行操作，您将被设置:)

## 我们需要一个 mod_menu 的模板覆盖，只需复制文件：

```
/modules/mod_menu/tmpl/default.php 
```

至

```
/templates/[YOUR_CURRENT TEMPLATE]/html/mod_menu/default.php 
```

注意：您可能需要创建文件夹 html 和 mod_menu，如果它们当前不存在

## 找到以下行：（〜第52行）

在 /templates/[YOUR_CURRENT TEMPLATE]/html/mod_menu/default.php

```
if (!empty($class)) {
    $class = ' class="'.trim($class) .'"';
} 
```

并在他们之后插入以下代码：

```
if(strpos($item->title, '#dynamic-cat') !== false)
{
    require_once(JPATH_SITE.DS.'components'.DS.'com_content'.DS.'models'.DS.'articles.php');
    $model  = new ContentModelArticles();
    $config = JFactory::getConfig();
    if($spcCat = (int) str_replace('#dynamic-cat','', $item->title)) {
        $model->setState('filter.category_id', $spcCat);
    }
    $db     = JFactory::getDBO();
    $db->setQuery($model->getListQuery());
    foreach($db->loadObjectList() as $tItem) {
        $link   = $config->get('sef') ? str_replace($item->alias, $tItem->id.'-'.$tItem->alias, $item->route) :  'index.php?option=com_content&view=article&id='.$tItem->id.'&Itemid='.$item->parent_id;
        $iclass = $item->anchor_css ? 'class="'.$item->anchor_css.'" ' : ''; ?>
        <li <?php echo $class;?> ><a <?php echo $iclass; ?>href="<?php echo $link ?>"><?php echo $tItem->title; ?></a></li><?php
    }
    echo '</ul>';
    continue;
} 
```

## 将被动态创建的链接替换的菜单项

1.  创建一个“单篇文章”类型的新菜单项
2.  在“必需的设置”中，从您想使用的类别中选择任何文章
3.  将“菜单标题”设置为 **#dynamic-cat 71**

    > ```
    >  where 71 is Category ID (optional) 
    > ```

4.  将“父项”设置为您要插入动态菜单的相应菜单项

刚刚创建的菜单项将动态替换为来自所选类别的文章链接（如果有）

让我知道这是否有任何问题。我一直在启用 SEF 和禁用 SEF 的 joomla > 1.6 站点上使用此方法

# bash - 在 bash/awk 中提取大括号之间的值的最佳方法是什么？

> ID：11978892
> 
> 赞同：6
> 
> 时间：2012-08-15T23:48:57.967
> 
> 标签：bash, shell, awk

我有这种格式的输出：

```
Infosome - infotwo: (29333) - data-info-ids: (33389, 94934) 
```

我想提取最后一对大括号中的最后两个数字。有时，最后一对大括号中只有一个数字。

这是我使用的代码。

```
echo "Infosome - infotwo: (29333) - data-info-ids: (33389, 94934)" | \
  tr "," " " | tr "(" " " | tr ")" " " | awk -F: '{print $4}' 
```

提取值的更干净的方法是什么？还是更优化的方式？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-15T23:51:50.573

试试这个：

```
awk -F '[()]' '{print $(NF-1)}' input | tr -d , 
```

这是对您的命令的一种重构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T23:58:58.970

```
 awk -F\( '{gsub("[,)]", " ", $NF); print $NF}' input 
```

会给

```
 33389  94934 
```

在这个问题的上下文中，我有点不清楚“最佳”/“专业”的含义，但这仅使用一个命令/工具，不确定是否符合条件。

*或*基于@kev 的方法（但不需要`tr`消除逗号）：

```
awk -F'[(,)]' '{print $4, $5}' input 
```

输出：

```
33389  94934 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T02:24:33.390

这也可以在纯 bash 中完成。假设文本总是看起来像问题中的示例，以下应该有效：

```
$ text="Infosome - infotwo: (29333) - data-info-ids: (33389, 94934)"
$ result="${text/*(}"
$ echo ${result//[,)]}
33389 94934 
```

这使用 shell “参数扩展”（您可以在 bash 的手册页中搜索）以与使用`tr`. 严格来说，第二行中的引号不是必需的，但它们有助于 StackOverflow 语法高亮。:-)

*您也可以通过查找您感兴趣的实际字段*来使其更加灵活。如果您使用的是 GNU awk，则可以使用多个字符指定 RS：

```
$ gawk -vRS=" - " -vFS=": *" '
  { f[$1]=$2; }
  END {
    print f["data-info-ids"];
    # Or you could strip the non-numeric characters to get just numbers. 
    #print gensub(/[^0-9 ]/,"","g",f["data-info-ids"]);
  }' <<<"$text" 
```

我更喜欢这种方式，因为它实际上解释了输入数据的本质——表示某种数组的结构化文本。

# mapreduce - 如何在 RavenDB 中构建 MapReduce 管道？

> ID：11978901
> 
> 赞同：2
> 
> 时间：2012-08-15T23:49:46.787
> 
> 标签：mapreduce, ravendb

我有一个关于 RavenDB 的理论问题 - 是否可以构建 MapReduce 管道？

例如，假设我有来自索引 1 的 MapReduce 输出 Y，我使用该输出进行一些查询，但我需要在 Y 上运行另一个 MapReduce 操作以获得一些较低级别的统计信息。

我是否可以编写可以进一步 MapReduce 索引 1 的输出的索引 2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T06:51:20.280

Aaronontheweb，暂时没有，没有。这是您可以使用 1.2 中的 Indexed Properties 捆绑包处理的功能

# xslt - 使用 xslt 在 xml 中显示 xml 元素

> ID：11978902
> 
> 赞同：0
> 
> 时间：2012-08-15T23:50:09.910
> 
> 标签：xslt, xslt-1.0

Ia 使用 XSLT 1.0，我确实有一个 XML，而看起来像这样

```
<item name="note"><value>&lt;p&gt;Add the &amp;lt;bean&amp;gt; tag pased below to the &amp;lt;beans&amp;gt; element in this file .... </value></item> 
```

我想在 HTML 中这样显示

```
Add the <bean> tag passed below to the <beans> element in this file. 
```

请注意，当我使用 disable-output-escaping=yes 时，<p> 将被转换为段落标签。

这就是我的 xslt

```
<xsl:template match="item[@name='note']">
    <xsl:value-of select="value" disable-output-escaping="yes" />
</xsl:template> 
```

使用此 xslt，它会忽略 bean 和 beans xml，并且不会显示在页面中。如何确保以我想要的方式显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T01:21:35.987

问题是您的某些实体已被“双重转义”。
`&amp;lt;bean&amp;gt;`应该`&lt;bean&gt;`

# spring - Grails / Spring rememberMe 为同一用户+会话并发处理多个浏览器

> ID：11978904
> 
> 赞同：1
> 
> 时间：2012-08-15T23:50:15.780
> 
> 标签：spring, grails

使用基于 Spring Security Core 的 grails 安全插件的 rememberme 功能。

我的config.groovy相关内容如下：

```
// Added by the Spring Security Core plugin:
grails.plugins.springsecurity.userLookup.userDomainClassName = 'org.blah.user.User'
grails.plugins.springsecurity.userLookup.authorityJoinClassName = 'org.blah.user.UserRole'
grails.plugins.springsecurity.authority.className = 'org.blah.user.Role'

grails.plugins.springsecurity.successHandler.defaultTargetUrl = '/home'

grails.plugins.springsecurity.rememberMe.persistent = true
grails.plugins.springsecurity.rememberMe.persistentToken.domainClassName = 'org.blah.user.PersistentLogin'

grails.plugins.springsecurity.rememberMe.key = 'blah'
grails.plugins.springsecurity.rememberMe.alwaysRemember = true
// set cookie expiration to one year
grails.plugins.springsecurity.rememberMe.tokenValiditySeconds = 31536000l 
```

有一个关于当同一个用户从多个客户端/浏览器登录时会发生什么的问题。我希望在所有浏览器中都记住 cookie，即每个浏览器需要一次登录，然后记住前进...这是默认行为，如果不是，如何实现？

此外，我想强制执行单个并发登录，即允许从多个位置登录，但仅限于每个用户一个活动会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T13:20:17.997

该插件不是开箱即用的。在高层次上，您可能需要执行以下操作：

1）编写自己的记住我身份验证过滤器，例如[http://www.to-string.com/2012/07/11/springsecurity-capturing-rememberme-success-event/](http://www.to-string.com/2012/07/11/springsecurity-capturing-rememberme-success-event/)

2）然后您必须更改自己的持久登录令牌以捕获其他一些数据，例如 IP 地址或浏览器，并将这两者保存在持久登录令牌中

3）编写你自己的remember Me服务，它扩展了TokenBasedRememberMeServices。您需要至少覆盖​​ 2 个方法 processAutoLoginCookie 和 makeTokenSignature 以添加您自己的逻辑来检查 cookie 的格式

4）在resources.groovy中将它们连接在一起......

```
 userDetailsService(com.yourclass.UserDetailsService)

    customRememberMeServices(com.yourclass.CustomRememberMeServices) {
        userDetailsService = ref("userDetailsService")
        key = "key"
    }

    rememberMeAuthenticationFilter(com.yourclass.CustomRememberMeAuthenticationFilter) {
        rememberMeServices = ref('customRememberMeServices')
        authenticationManager = ref("authenticationManager")
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:46:43.910

您正在寻找的是每台计算机的身份验证，而与使用的浏览器无关，而仅使用浏览器并仅登录一次是*不可能*安全*地*做到这一点的。

# vb.net - VBA Excel“需要变量”

> ID：11978905
> 
> 赞同：3
> 
> 时间：2012-08-15T23:50:18.820
> 
> 标签：vb.net, excel, vba

在 VBA excel 程序中遇到问题。

```
Sub code(s)
...
code = t
End Sub 
```

进而 ：

```
Sub CommandButton1_Click()
...
For i = 0 To size
    current_y = code(string_array(i))
...
End Sub 
```

当我运行该程序时，我收到此错误“需要变量”（不确定，我正在使用日文版的 excel）。子 CommandButton1_Click 突出显示，并且在 CommandButton1_Click 中选择了代码。不知道为什么，虽然它一定很简单......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T23:54:07.707

您正在尝试从 Sub 中返回结果。尝试将其声明为函数，因为它能够将值返回给调用者：

```
Function code(s)
...
code = t
End Function 
```

如果它更清楚，在我的英文版本中，错误消息是：

> 预期函数或变量

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:54:44.073

代码是否包含 Option Explicit？也许错误转化为“需要变量声明”？尝试删除选项显式 - 如果修复它删除该行，然后检查所有变量是否已声明（例如，将 current_y 暗淡为字符串）。

# javafx-2 - 在 JavaFX 折线图中重写系列

> ID：11978908
> 
> 赞同：2
> 
> 时间：2012-08-15T23:50:27.553
> 
> 标签：javafx-2

我有一个使用 lineChart 图表的 JavaFX 应用程序。我可以将图表写入应用程序并清除它，但是当我想编写一个新系列并显示它时，出现错误，

```
java.lang.IllegalArgumentException: Children: duplicate children added: 
```

我明白意思，但不明白如何解决（我对 Java 很陌生，更不用说 FX 了）。

这是来自我的控制器的相关代码（减去一些类声明）：

（由图表选项卡窗口中的“提交”按钮调用的方法）

```
@FXML
private void getEngDataPlot(ActionEvent event)  {

 //check time inputs
   boolean start = FieldVerifier.isValidUtcString(startRange.getText());
   boolean end = FieldVerifier.isValidUtcString(endRange.getText());
   type = engData.getValue().toString();

 // Highlight errors.
   startRangeMsg.setTextFill(Color.web(start ? "#000000" : "#ff0000"));
   endRangeMsg.setTextFill(Color.web(end ? "#000000" : "#ff0000"));

    if (!start || !end ) {
        return;
    }

    // Save the preferences.
    Preferences prefs = Preferences.userRoot().node(this.getClass().getName());
    prefs.put("startRange", startRange.getText());
    prefs.put("endRange", endRange.getText());
    prefs.put("engData", engData.getValue().toString());

    StringBuilder queryString = new StringBuilder();
    queryString.append(String.format("edit out",
            startRange.getText(),
            endRange.getText()));
        queryString.append(type);

    log(queryString.toString());

    // Start the query task.
    submitEngData.setDisable(true);
    // remove the old series.
    engChart.getData().clear();
    engDataProgressBar.setDisable(false);
    engDataProgressBar.setProgress(-1.0);
    //ProgressMessage.setText("Working...");
    Thread t = new Thread(new EngDataPlotTask(queryString.toString()));
    t.setDaemon(true);
    t.start();

} 
```

（上述方法调用的任务：）

```
public EngDataPlotTask(String query) {
    this.query = query;
    }

    @Override
    protected Void call() {
  try {
           URL url = new URL(query);
           String inputLine = null; 

           BufferedReader in = new BufferedReader(
           new InputStreamReader(url.openStream()));
       //    while ( in.readLine() != null){
                inputLine = in.readLine();  //}

             Gson gson = new GsonBuilder().create();  
             DataObject[] dbin = gson.fromJson(inputLine, DataObject[].class);
              in.close();

           for (DataObject doa : dbin)  {         
              series.getData().add(new XYChart.Data(doa.danTime, doa.Fvalue));    

           }

           xAxis.setLabel("Dan Time (msec)");

      } catch (Exception ex) {
            log(ex.getLocalizedMessage());
      }

           Platform.runLater(new Runnable() {
            @Override
            public void run() {
                submitEngData.setDisable(false);
                // do some pretty stuff
                String typeName = typeNameToTitle.get(type);

                series.setName(typeName); 
               // put this series on the chart
                engChart.getData().add(series);

                engDataProgressBar.setDisable(true);
                engDataProgressBar.setProgress(1.0);
              }
        });  

    return null;
    }
} 
```

图表第一次绘制，清除，然后出现异常。请求的堆栈跟踪如下：

```
Exception in runnable 
```

java.lang.IllegalArgumentException：孩子：添加了重复的孩子：父 = Group@8922394[styleClass=plot-content] at javafx.scene.Parent$1.onProposedChange(Unknown Source) at com.sun.javafx.collections.VetoableObservableList.add( Unknown Source) at com.sun.javafx.collections.ObservableListWrapper.add(Unknown Source) at javafx.scene.chart.LineChart.seriesAdded(Unknown Source) at javafx.scene.chart.XYChart$2.onChanged(Unknown Source) at com .sun.javafx.collections.ListListenerHelper$SingleChange.fireValueChangedEvent(Unknown Source) at com.sun.javafx.collections.ListListenerHelper.fireValueChangedEvent(Unknown Source) at com.sun.javafx.collections.ObservableListWrapper.callObservers(Unknown Source) at com .sun.javafx.collections.ObservableListWrapper.add（未知来源）在 com.sun.javafx.collections。ObservableListWrapper.add(Unknown Source) at edu.arizona.lpl.dan.DanQueryToolFX.QueryToolController$EngDataPlotTask$1.run(QueryToolController.java:231) at com.sun.javafx.application.PlatformImpl$4.run(Unknown Source) at com .sun.glass.ui.win.WinApplication._runLoop(Native Method) at com.sun.glass.ui.win.WinApplication.access $100(Unknown Source) at com.sun.glass.ui.win.WinApplication$2$1。在 java.lang.Thread.run(Thread.java:722) 运行（未知来源）WinApplication$2$1.run(Unknown Source) at java.lang.Thread.run(Thread.java:722)WinApplication$2$1.run(Unknown Source) at java.lang.Thread.run(Thread.java:722)

任何想法我做错了什么。我是 RANK NEWBIE，所以如果您想回复，请考虑到这一点。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T09:38:21.097

花了很长时间才找到解决此问题的解决方案。

请添加以下代码并测试：

```
engChart.getData().retainAll();
engChart.getData().add(series); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T11:15:33.703

根据您不完整的代码，我对根本原因的猜测是这一行：

```
engChart.getData().add(series); 
```

例如，您应该只在初始化块中添加一次系列。但我认为在您的任务线程中，您正在再次添加已经添加的同一系列并有提到的异常。如果您的目标是刷新唯一的系列数据，那么只需操作系列，获取它`engChart.getData().get(0);`并删除代码中的该行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-25T13:33:06.373

将系列添加到图表后，您所做的就是编辑系列。不要再次将其添加到图表中。图表将跟随系列发生的任何事情，即只需更改系列数据，图表将自动反映更改。

# android - Android 从非 ui-activity 类创建一个对话框

> ID：11978910
> 
> 赞同：0
> 
> 时间：2012-08-15T23:50:46.507
> 
> 标签：android, opengl-es, android-activity

我不需要活动上的创建对话框的代码。我使用 opengles，我正在使用我创建的渲染器类进行绘图。我认为 android 活动窗口的执行停留在主要活动中。我有我的绘图状态，当绘图达到一个状态时，我想发布一个对话框。所以这是一个问题，因为对话框构建器需要一个上下文，而渲染器类不是一个活动对象。我是 opengles 的新手，首先我所做的所有工作都存在于方法中

```
public void onDrawFrame(GL10 gl)
{ } 
```

所以我有 2 节课，第 1 节课是 ui 课

```
mainactivity extends activity 
```

第二个渲染器类

```
class mainrenderer implements GLSurfaceView.Renderer 
```

我想从第二类中使用活动操作，例如创建对话框。你能给我一个解决方案吗？谢谢。

换句话说，我想从一个不是 ui 类的类（渲染器）中创建一个对话框。

**已编辑**

`myrender = new Renderer1(this);` 我在渲染器的构造函数中传递了我的活动类的上下文

```
class Renderer1 implements GLSurfaceView.Renderer
/* initializations */

public Renderer(Context context) {
 super();
 mcontext = context; 
} 
```

之后我实现了该`on drawFrame`方法，当我达到一个状态时，我调用`alertdialogbox()` 下面给出的方法

```
 public void alertdialogbox()  /* some code */  AlertDialog.Builder
 builder = new AlertDialog.Builder(mcontext); 
```

但是当达到警报对话框调用的状态时，它会不断出错并且应用程序崩溃

错误开始于

> java.lang.RuntimeException：无法在未调用 Looper.prepare() 的线程内创建处理程序

**编辑 2 解决** 了我在主要活动中将处理程序初始化为：

```
Handler handler = new Handler() {
          @Override
          public void handleMessage(Message msg) {
              alertdialogbox();
             }
         }; 
```

alertdialogbox 是我在主活动类中声明并构造对话框的方法

再次在我实例化 GlsurfaceView 和 Glrenderer 的主要活动中，我传递了我之前初始化的处理程序：

```
 Renderer = new Renderer1(handler);  
after that at the class Renderer1

    class Renderer1 implements GLSurfaceView.Renderer
     Handler mhandler;

    public Renderer( Handler handler) {
     super();
     mhandler = handler; 
    }

    *
    *
public void onDrawFrame(){
*
*

if (state) 
{ 
alertdialogbox();
 }
}
*
*
     public void alertdialogbox()
        {

            mhandler.sendEmptyMessage(1);

        } 
```

最后我查看了我的对话框。

感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T12:56:38.803

从另一个类创建`AlertDialog`（或任何其他 UI 小部件）时，您必须具有对活动类的引用，并且使用该对象，您可以调用`activity.runOnUIThread()`以执行与 AlertDialog 相关的任何代码。

# c# - 如何防止诸如 Zalgo 文本之类的变音符号

> ID：11978912
> 
> 赞同：40
> 
> 时间：2012-08-15T23:51:04.800
> 
> 标签：c#, unicode, user-input, diacritics, zalgo

![嗯？](../Images/3cdf025dc0420d80dfe12ff025f6a0f9.png)

上图中的角色是几个月前由[Mikko Hyppönen 发布的推文，他是一位以计算机病毒研究和](https://i.stack.imgur.com/oN2yz.jpg)[TED](http://www.ted.com/speakers/mikko_hypponen.html)计算机安全演讲而闻名的计算机安全专家。关于 SO，我只会发布它的图像，但你明白了。这显然不是您想要在您的网站上传播并吓坏访问者的东西。

经过进一步检查，该字符似乎是一个泰语字母加上超过 87 个变音符号（甚至有限制吗？！）。这让我开始思考安全性、本地化以及如何处理此类输入。我的搜索将我引向Stack 上的[这个问题，然后是 Michael Kaplan 关于](https://stackoverflow.com/questions/249087/how-do-i-remove-diacritics-accents-from-a-string-in-net)[剥离变音符号](http://www.siao2.com/2007/05/14/2629747.aspx)的博客文章。在其中，他演示了如何将字符串分解为其“基本”字符（为简洁起见，此处进行了简化）：

```
StringBuilder sb = new StringBuilder();
foreach (char c in "façade".Normalize(NormalizationForm.FormD))
{
    if (char.GetUnicodeCategory(c) != UnicodeCategory.NonSpacingMark)
        sb.Append(c);
}
Response.Write(sb.ToString()); // facade 
```

我可以看到这在某些情况下会有用，但就用户输入而言，它会删除所有变音符号。正如卡普兰所指出的，删除某些语言中的变音符号可以完全改变单词的含义。这就引出了一个问题：**如何在用户输入/输出中允许一些变音符号，但排除其他极端情况，例如 Mikko Hyppönen 的 über 角色？**

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-16T08:38:40.880

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T08:34:19.463

我想我找到了一个使用`NormalizationForm.FormC`而不是`NormalizationForm.FormD`. 根据[MSDN](http://msdn.microsoft.com/en-us/library/system.text.normalizationform.aspx)：

> [FormC] 表示使用完整的规范分解对 Unicode 字符串进行规范化，然后如果可能的话，用它们的主要组合替换序列。

我认为这意味着它将字符分解为其基本形式，然后根据一组保持一致的规则重新组合它们。我认为这对于比较目的很有用，但在我的情况下它工作得很好。像`ü`, `é`, 和等字符`Ä`被准确地分解/重组，而虚假字符无法重组，因此保持其基本形式：

![在此处输入图像描述](../Images/5b1b0ac853b364d27d6791cde9ca25f6.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-20T11:38:34.910

# jquery - 动态输入日期选择器 - 未按预期工作

> ID：11978916
> 
> 赞同：1
> 
> 时间：2012-08-15T23:51:32.007
> 
> 标签：jquery, datepicker

我无法弄清楚我做错了什么。我已经动态生成了带有 class='freeze-date' 的输入字段，该字段仅适用于生成的第一个 datepicker 输入字段。我有代码@ [http://jsfiddle.net/Someguy2k/L9nvs/3/](http://jsfiddle.net/Someguy2k/L9nvs/3/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T23:59:24.527

您的注入标记存在几个问题。`id`每行元素中的所有属性都具有相同的值。
不仅是无效的 HTML，还会导致诸如此类的副作用。

jQuery 将寻找一个 id 并在找到第一个匹配项时停止。我通过将该值作为附加值添加到属性来
解决您的日历的特定问题。`i``id`

```
...  id='freezeby" + i + "'  ... 
```

见[**演示**](http://jsfiddle.net/FranWahl/e8rMv/)

如果您发现其他元素在与之交互时表现相同，很可能是由于与我看到其他`id`属性也有相同问题的相同原因。

**使用 Live()**

此外，您正在使用`live()`. Live 有几个问题，所有缺点都列​​在[**文档**](http://api.jquery.com/live/)中。`live()`内存泄漏、事件绑定的意外丢失、stopPropagation() 由于冒泡事件的方式等原因无法正常工作。

由于 jQuery 1.7`live()`已被弃用并且`on()`是首选。对于您的版本，最好使用[**bind()**](http://api.jquery.com/bind/)将事件绑定到静态元素，使用[**delegate()**](http://api.jquery.com/delegate/)将事件绑定到动态元素。

# php - 转换多词搜索字符串以用于 MySQL FULLTEXT 布尔模式

> ID：11978917
> 
> 赞同：1
> 
> 时间：2012-08-15T23:51:37.577
> 
> 标签：php, mysql, innodb, full-text-search

我正在使用 Innodb 的 FTS 功能来搜索我的数据库并返回按相关性排序的结果。使用布尔模式时，必须将搜索字符串转换为单个术语必须由某些运算符（如`+`、`~`、`-`、 ）分隔的形式`*`。

如果我有一个包含多个单词的搜索字符串，我如何（可能使用 PHP）转换搜索字符串，以便可以将其与`MATCH()... .AGAINST()`子句一起使用？

**搜索词：**

`stack over flow`

**SQL查询**：

```
SELECT * FROM mytable WHERE 
    MATCH ( name, description) 
    AGAINST ('+*stack* +*over* +*flow*' IN BOOLEAN MODE);" 
```

**匹配结果**

```
stack over flow
haystack hover flowers 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T23:59:54.357

对于模糊搜索，我这样做：

```
$search_words = explode(' ', $search);
foreach ($search_words as $foo) {
    $sql_search .= '*' . $foo . '* ' ;
} 
```

或常规：

```
$search_words = explode(' ', $search);
$sql_search = '+' . implode(" +", $search_words); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:56:43.907

```
$string = 'stack over flow';

$string = preg_replace('#\b(\S+)\b#', '+*\\1*', $string); # \b can be ommited

echo $string; # +*stack* +*over* +*flow* 
```

如果这是您正在寻找的解决方案之一。

# android - Android构建致命错误：地图：没有这样的文件

> ID：11978919
> 
> 赞同：0
> 
> 时间：2012-08-15T23:51:52.680
> 
> 标签：android, build, stl, customization

按照[https://source.android.com/source/initializing.html](https://source.android.com/source/initializing.html)上的说明进行构建，并使用`lunch full_grouper-user`它来生成 makefile。Android 源代码可以正常构建大约 5 分钟，然后在出现此错误时停止：

```
target arm C++: libwebrtc_system_wrappers <= external/webrtc/src/system_wrappers/source/map.cc
In file included from external/webrtc/src/system_wrappers/source/map.cc:11:0:external/webrtc/src/system_wrappers/source/../interface/map_wrapper.h:14:15: fatal error: map: No such file or directory compilation terminated.
make: *** [out/target/product/generic/obj/STATIC_LIBRARIES/libwebrtc_system_wrappers_intermediates/map.o] Error 1
make: *** Waiting for unfinished jobs.... 
```

有什么建议吗？看起来编译器找不到 STL 头文件，很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-18T21:16:39.727

修复了问题。在 Ubuntu 12.04 上为 Nexus 7 编译 Android。

这里的问题与在环境变量（在我的 .bashrc 中）中定义 NDK_ROOT 有关。webrtc makefile 中有一个错误导致它忽略包括 STL，因为定义了 NDK_ROOT。

因此，只需确保在构建时根本没有定义 NDK_ROOT。

# php - Zend 框架：动作不存在

> ID：11978926
> 
> 赞同：2
> 
> 时间：2012-08-15T23:52:47.443
> 
> 标签：php, zend-framework, zend-form

这是我的表单生成器功能：

```
private function getAddArtistForm() {
  $form = new Zend_Form();
  $form->setAction("saveArtist");
  $form->setMethod("post");
  $form->setName("addartist");
  ...
}
public function newAction()
{
  $form = $this->getAddArtistForm();
  $this->view->form = $form;

} 
```

我还有一个名为`saveArtistAction`：

```
public function saveArtistAction() {
...
} 
```

但是当我提交表单时，我收到以下错误：

```
Message: Action "saveartist" does not exist and was not trapped in __call() 
```

请求参数：

```
array (
  'controller' => 'artist',
  'action' => 'saveartist',
  'module' => 'default',
) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T23:55:12.550

如果你`action`用连字符指定怎么办：

```
'action' => 'save-artist', 
```

?

# java - 在 Windows 上将带有 POI 的 XXSF 表添加到现有的 excel 文件失败

> ID：11978927
> 
> 赞同：2
> 
> 时间：2012-08-15T23:52:57.703
> 
> 标签：java, permissions, apache-poi, xssf

我需要将工作表添加到现有的 excel 文件中，但我不知道如何使文件即时访问 r/w。

我阅读了一张大的 Excel 表格，并简化了我生成的表格中的数据。

在 linux 上，该程序运行良好，并在我需要的 excel 文件中添加了一张工作表。在 Windows 上，程序崩溃是因为我怀疑它没有用户从 Internet 下载的文件的写入权限。

我的问题是如何让 Java 将新工作表写回到我读过的 excel 文件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:57:29.473

这很简单。

1) 从输入流创建工作簿。

2）根据需要修改工作簿，包括创建新工作表。

3) 将工作簿写入输出流。

Stack Overflow 上已经有一个很好的例子。请参阅[使用 jxl api / Apache POI 编辑现有 excel 文件](https://stackoverflow.com/questions/521274/edit-existing-excel-files-using-jxl-api-apache-poi)

我在谷歌上很快就找到了这个例子，所以下次你有问题时，我建议你在提问之前仔细搜索一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-28T08:39:49.813

事实证明我在文件名中使用了无效字符，因此它在 Windows 上不起作用，但在 linux 上完全没问题。

# python - 'list' 对象在 Python 的 BeautifulSoup renderContents 中没有属性 'items'

> ID：11978928
> 
> 赞同：2
> 
> 时间：2012-08-15T23:53:00.273
> 
> 标签：python, django, beautifulsoup, html-sanitizing

为了从输入中删除不需要的/不安全的标签和属性，我使用了下面的代码（几乎完全由[http://djangosnippets.org/snippets/1655/](http://djangosnippets.org/snippets/1655/)提供）：

```
def html_filter(value, allowed_tags = 'p h1 h2 h3 div span a:href:title img:src:alt:title table:cellspacing:cellpadding th tr td:colspan:rowspan ol ul li br'):
    js_regex = re.compile(r'[\s]*(&#x.{1,7})?'.join(list('javascript')))
    allowed_tags = [tag.split(':') for tag in allowed_tags.split()]
    allowed_tags = dict((tag[0], tag[1:]) for tag in allowed_tags)
    soup = BeautifulSoup(value)
    for comment in soup.findAll(text=lambda text: isinstance(text, Comment)):
        comment.extract()
    for tag in soup.findAll(True):
        if tag.name not in allowed_tags:
            tag.hidden = True
        else:
            tag.attrs = [(attr, js_regex.sub('', val)) for attr, val in tag.attrs.items() if attr in allowed_tags[tag.name]]
    return soup.renderContents().decode('utf8') 
```

它适用于不需要的或列入白名单的标签、未列入白名单的属性，甚至是格式错误的 html。但是，如果存在任何列入白名单的属性，则会引发

```
'list' object has no attribute 'items' 
```

在最后一行，这对我没有多大帮助。`type(soup)`是`<class 'bs4.BeautifulSoup'>`它是否引发错误，所以我不知道它指的是什么。

```
Traceback:
[...]
File "C:\Users\Mark\Web\www\fnwidjango\src\base\functions\html_filter.py" in html_filter
  30\.     return soup.renderContents().decode('utf8')
File "C:\Python27\lib\site-packages\bs4\element.py" in renderContents
  1098\.             indent_level=indentLevel, encoding=encoding)
File "C:\Python27\lib\site-packages\bs4\element.py" in encode_contents
  1089\.         contents = self.decode_contents(indent_level, encoding, formatter)
File "C:\Python27\lib\site-packages\bs4\element.py" in decode_contents
  1074\.                                   formatter))
File "C:\Python27\lib\site-packages\bs4\element.py" in decode
  1021\.             indent_contents, eventual_encoding, formatter)
File "C:\Python27\lib\site-packages\bs4\element.py" in decode_contents
  1074\.                                   formatter))
File "C:\Python27\lib\site-packages\bs4\element.py" in decode
  1021\.             indent_contents, eventual_encoding, formatter)
File "C:\Python27\lib\site-packages\bs4\element.py" in decode_contents
  1074\.                                   formatter))
File "C:\Python27\lib\site-packages\bs4\element.py" in decode
  1021\.             indent_contents, eventual_encoding, formatter)
File "C:\Python27\lib\site-packages\bs4\element.py" in decode_contents
  1074\.                                   formatter))
File "C:\Python27\lib\site-packages\bs4\element.py" in decode
  983\.             for key, val in sorted(self.attrs.items()):

Exception Type: AttributeError at /"nieuws"/article/3-test/
Exception Value: 'list' object has no attribute 'items' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T23:58:19.130

尝试更换

```
tag.attrs = [(attr, js_regex.sub('', val)) for attr, val in tag.attrs.items() if attr in allowed_tags[tag.name]] 
```

和

```
tag.attrs = dict((attr, js_regex.sub('', val)) for attr, val in tag.attrs.items() if attr in allowed_tags[tag.name]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T23:58:27.867

看起来`renderContents()`希望您设置`attrs`为 a `dict`（这将有一个`items`方法），而不是您传递的元组列表。因此，`AttributeError`当它尝试访问它时会抛出。

要修复该错误，您可以在 Python 3 中使用字典推导：

```
tag.attrs = {attr: js_regex.sub('', val)) for attr, val in tag.attrs.items() if attr in allowed_tags[tag.name]} 
```

在 Python 2 中，不支持 dict 推导式，因此您应该将迭代器传递给`dict`构造函数：

```
tag.attrs = dict((attr, js_regex.sub('', val)) for attr, val in tag.attrs.items() if attr in allowed_tags[tag.name])) 
```

# php - 将错误消息传递到另一个页面

> ID：11978935
> 
> 赞同：1
> 
> 时间：2012-08-15T23:54:19.877
> 
> 标签：php, forms

哪些选项可用于将错误消息发送回表单页面？

我有一个表格`login.php`提交给`process.php`. `process.php`处理数据库连接、验证等。如果出现错误，我想将其传递回`index.php`.

IE：

```
 } else {
    session_destroy();
    header("Location: /login");
    $error = "Sorry, that user name or password is incorrect. Please try again.";
} 
```

由于这是两个不同的文件，可用于设置和检索错误的最佳选项是什么？`$_POST`, `$_GET`, `$_SESSION`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T23:58:39.983

对于您的具体情况，并使用给出的代码，`$_SESSION`是您最好的选择。IE：

```
$_SESSION['login_error_msg'] = "Sorry, that user name or password is incorrect. Please try again."; 
```

然后回到 index.php，您必须以某种方式检查该会话变量，例如：

```
if( ! empty($_SESSION['login_error_msg']))
{
    //display the message however you want
    unset($_SESSION['login_error_msg'];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T00:00:36.057

我建议使用 $_SESSION。一方面，您不必担心刷新，如果您使用了 $_GET，那么宇宙的渣滓可以共享一个页面并更改查询字符串以弄乱您页面上显示的内容。

如果您有 $_SESSION 并且为您拥有的每个表单创建唯一标识符，则可以显示警告，然后在输出警告后，取消设置 $_SESSION 数组中的值

例如设置它

```
$_SESSION['uniq_form']['warning'] = 'You got this wrong'; 
```

下一页：

```
echo $_SESSION['uniq_form']['warning'];
unset($_SESSION['uniq_form']['warning']); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-16T00:02:19.283

一个简单的解决方案是只使用 $_SESSION。

进程.php：

```
<?php 
 else {
//session_destroy();

$_SESSION['error'] = "Sorry, that user name or password is incorrect. Please try again.";
header("Location: /login");
exit():
} 
```

登录.php：

```
<?php if(isset($_SESSION['error'])){
   echo $_SESSION['error'];
   unset( $_SESSION['error'];
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T23:58:36.727

我认为 $_SESSION 将是您最好的选择，而不会向您的用户暴露太多信息。

# java - 使用发音为列表、数组、地图等的消息正文生成示例 xml/json？

> ID：11978936
> 
> 赞同：0
> 
> 时间：2012-08-15T23:54:31.593
> 
> 标签：java, rest, maven-2, enunciate

我能够通过 enunciate 生成 REST API 文档，我非常喜欢它为消息正文生成的示例 xml 和 json。我找不到如何让它为列表、数组、地图等生成那些。

我正在使用 maven，配置了 enunciate 插件（常规）和构建插件 maven 节点中的 docs 目标。

这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:42:43.937

不幸的是，Enunciate 目前不支持此功能。

原因是历史的。Enunciate 是在 JSON 流行之前编写的，因此最初的设计是只记录返回[JAXB](http://jaxb.java.net/)对象的 Web 服务。稍后添加了对 JSON 的支持，并且从那时起已多次增强。

即使在今天，Enunciate 的 JSON 支持也感觉像是二等公民，因为它仅在 POJO 上受支持，而且即使在那时，它也是基于 JAXB 注释而不是例如 Jackson 注释。仍然需要做一些工作才能使 JSON 成为一等公民，但是由于没有 Java 标准 JSON 注释集（如 JAXB 注释集），这项工作受到了阻碍。因此，如果今天完成了这项工作，则必须将其绑定到特定的 JSON 库实现（可能是 Jackson）。

# python - 用 mock 模拟嵌套属性

> ID：11978945
> 
> 赞同：12
> 
> 时间：2012-08-15T23:56:17.177
> 
> 标签：python, unit-testing, properties, mocking, nested

我有一个返回对象的函数调用：

```
r = Foo(x,y) 
```

where`r`有一组丰富的嵌套属性。例如，我可以访问`r.prop_a.prop_b.prop_c`. 我想模拟`Foo`，以便修改特定的叶属性`r`，即`r.prop_a.prop_b.prop_c`返回我控制的值：

```
>> r = Foo(x,y)
>> r.prop_a.prop_b.prop_c
'fish'
>> # some mock magic patching of Foo is taking place here
>> r = Foo(x,y)
>> r.prop_a.prop_b.prop_c
'my_fish' 
```

我不太关心中间属性。

**有没有一种优雅的方法可以用 mock 模拟嵌套[属性](http://www.voidspace.org.uk/python/mock/index.html)？**

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-16T00:09:11.607

如您所料替换模拟对象的属性调用：

```
>> r1 = r_original(x, y)
>> r1.prop_a.prop_b.prop_c
'fish'

>> returner = mock.MagicMock()
>> returner.prop_a.prop_b.prop_c = 'fish'
>> r_mocked = mock.MagicMock(spec_set=r_original, return_value=returner)
>> r2 = r_mocked(x, y)
>> r2.prop_a.prop_b
MagicMock name='returner.prop_a.prop_b' id='87412560'>
>> r2.prop_a.prop_b.prop_c
'fish' 
```

这使您可以在定义特定值的同时充分发挥模拟的作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-10T15:52:42.923

如果你想在别处暴露原始属性，你可以定义一个包装类：

```
class OverrideAttributePath(object):
    """A proxy class where we override a specific attribute path with the
    value given. For any other attribute path, we just return
    attributes on the wrapped object.

    """
    def __init__(self, thing, path, value):
        self._thing = thing
        self._path = path
        self._value = value

    def __dir__(self):
        return dir(self._thing)

    def __len__(self):
        return len(self._thing)

    def __getitem__(self, index):
        if self._path == [index]:
            return self._value
        elif self._path[0] == index:
            return OverrideAttributePath(
                self._thing[index], self._path[1:], self._value)
        else:
            return self._thing[index]

    def __getattr__(self, key):
        if self._path == [key]:
            return self._value
        elif self._path[0] == key:
            return OverrideAttributePath(
                getattr(self._thing, key), self._path[1:], self._value)
        else:
            return getattr(self._thing, key) 
```

那么用法如下：

```
>>> r = Foo(x,y)
>>> r2 = OverrideAttributePath(r, ['prop_a', 'prop_b', 'prop_c'], 'my_fish')
>>> r2.prop_a.prop_b.prop_c
'my_fish' 
```

# python - 从列表切片获取时间戳的 Python 错误

> ID：11978950
> 
> 赞同：1
> 
> 时间：2012-08-15T23:56:48.097
> 
> 标签：python, datetime, csv, slice

我正在编写一个脚本，将一个大的 CSV 文件分块成更小的分块文件。它交叉引用一个日志文件，该文件包含最后一个被分块的时间戳，因此只有晚于记录时间的时间戳被写入/分块。

csv 文件的第一列有一个时间戳`%Y%m%d %H%M%S`。CSV 文件还有四行我在脚本中不需要/不需要的标题信息，该`rows in ts_pre`子句将其删除。

该`log_lookup()`函数只是从日志中提取我正在查看的特定电台的 CSV 文件的最后一个时间序列。显然，我正在使用六个不同的站点，它们都有不同的信息列，除了它们都共享我在第二段中描述的相同结构。

部分脚本是：

```
import csv, sys, datetime

def log_lookup():  
    global STN_num
    global STN_date
    with open('/home/log.txt', 'rb') as open_log:    
        log_file = csv.reader(open_log)
            for row in log_file:
                for item in row:
                     STN_date.append(item)
            if find == 'STN_1':
                return STN_date[1]
            if find == 'STN_2':           
                return STN_date[2]
            if find == 'STN_3':
                return STN_date[3]
            if find == 'STN_4':
                return STN_date[4]
            if find == 'STN_5':
                return STN_date[5]
            if find == 'STN_6':
                return STN_date[6]

def get_ts(line):
    print line[0:19]
    return datetime.datetime.strptime(line, "%Y/%m/%d %H:%M:%S")

def main():
    log = str(log_lookup()) #useful for knowing when to start chunking 
    log_datetime = datetime.datetime.strptime(log, "%Y/%m/%d %H:%M:%S")       

    with open(sys.argv[1], 'rb') as open_file: 
        ts_from_file = csv.reader(open_file)
        for genrows in ts_from_file:            
            ts_pre.append(genrows)  
            for rows in ts_pre:             
                if rownum < 4:
                    ts_pre.pop()
                    rownum += 1
                else:       
                    for line in rows:                            
                        if get_ts(line) > log_datetime:                 
                            timeseries.append(line) 
```

日志文件很简单：

```
0
2011/10/06 18:40:00
2012/06/27 13:25:00
1900/01/01 00:00:00
2011/08/03 14:55:00
2012/06/27 20:05:00
2011/10/03 19:25:00 
```

... 0 作为占位符。*（很明显我不是程序员吗？）*

一个示例 CSV 文件如下所示：

```
"2011/10/03 16:40:00",0,0
"2011/10/03 16:45:00",1,0
"2011/10/03 16:50:00",2,0
"2011/10/03 16:55:00",3,0 
```

`ts_line(line)`当函数说的是我得到的错误`line[0:19]`是：

```
2011/10/03 16:40:00
0 
```

并且函数返回`0`并且 Python 抛出此错误：

```
ValueError: time data '0' does not match format '%Y/%m/%d %H:%M:%S' 
```

我已经验证`0`返回的是 CSV 文件中的第二项，但我很困惑为什么 Python 在我的切片选择中返回它。有人可以向我解释为什么它会返回该值以及我需要做什么才能让时间戳与日志时间戳进行比较？

对于额外的功劳，任何关于编码/风格的建议都会受到赞赏和/或建议以更好的方式完成我正在做的事情。我正在查看的 CSV 文件非常大*（~8 MB）*，所以效率越高越好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:01:51.483

看起来您正在调用`get_ts`csv 每一行中的每一列。

代替

```
for line in rows:                            
    if get_ts(line) > log_datetime:                 
        timeseries.append(line) 
```

尝试：

```
if get_ts(line[0]) > log_datetime:                 
    timeseries.append(line) 
```

# objective-c - 基于视图的 NSOutlineView 中的 NSAttributedString 呈现为普通字符串？

> ID：11978953
> 
> 赞同：2
> 
> 时间：2012-08-15T23:57:07.727
> 
> 标签：objective-c, cocoa, nstableview, nsoutlineview, nsattributedstring

我正在尝试为基于视图的 NSOutlineView 中的单元格添加一些格式。无论我尝试什么，文本都会在没有我指定的任何格式的情况下呈现。这是我目前的做法：

```
NSMutableAttributedString *versionString = [[NSMutableAttributedString alloc] 
                                             initWithString:myString];
[versionString addAttribute:NSForegroundColorAttributeName 
                      value:[NSColor redColor] range:NSMakeRange(0, 3)];

NSTableCellView result = [outlineView makeViewWithIdentifier:@"DataCell" 
                                                       owner:self];
result.textField.allowsEditingTextAttributes = YES;
result.textField.attributedStringValue = versionString; 
```

不能在 NSOutlineView 和标准 NSTextField 中呈现属性字符串吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-16T00:09:50.417

好的，问题是大纲视图突出显示样式是 Source。将其设置为常规或无将允许属性字符串。

# android - 在 android 中使用 JSON 在谷歌地图中绘制某些路线

> ID：11978961
> 
> 赞同：0
> 
> 时间：2012-08-15T23:58:37.070
> 
> 标签：android, google-maps, routes

我想在 Android 2.2 中使用 Google 地图绘制一条公交路线，并使用此示例[Google Maps API 版本差异](https://stackoverflow.com/questions/11323500/google-maps-api-version-difference/11357351#11357351)绘制了一条路线，但路线并不完全符合预期。它穿过一些不应该去的街道。我希望你能理解我。:) 我是新手，所以**我只想画一条穿过某些街道的路线，**公共汽车应该去哪里，但我不知道该怎么做.. 有没有我可以弄清楚的例子这该怎么做？**这可能吗？**

编辑：航点肯定有助于解决上述问题。但是是否可以在具有多个 JSON 请求的同一张地图上绘制更多路线以及如何做到这一点？我想画几条穿过城市的公交路线，但只知道画一条。我尝试使用新的 JSON 请求添加另一个字符串 URL，但它不起作用......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:11:30.640

您可以使用[航点](https://developers.google.com/maps/documentation/javascript/directions#Waypoints)来强制该路线通过这些航点。如果您不希望 Google Map API 为您呈现路径。

# sql-server - sql server 提示 NOLOCK 和 ROWLOCK

> ID：11978964
> 
> 赞同：1
> 
> 时间：2012-08-15T23:58:45.397
> 
> 标签：sql-server, rowlocking

我目前正在我的网站上调查一个烦人的问题。我们会定期在网站上发放奖品，但要参加比赛，人们必须登录。所以网站有时会变得很忙。我发现当很多人尝试登录和注册时，我会收到很多关于**UpdateUser、CheckPassword 和 GetUser**函数死锁的错误，然后服务器变得太忙，其他请求开始超时。

当我查看存储过程时，我发现“UpdateUser”上使用了 ROWLOCK。那些 ROWLOCK 会导致死锁吗？还是只有选择会导致死锁？

我正在考虑针对我的情况使用 NOLOCK，但经过一番研究，显然不建议这样做......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-14T11:13:10.690

正如*barry*已经解释的，这两个提示可以相互补充，但它们通常用于不同的上下文并解决不同的资源争用问题。

WITH (NOLOCK) 告诉服务器使用 READ UNCOMMITTED 事务隔离级别，这意味着您面临读取未提交（“脏”）行的风险，这些行可能随后被回滚，因此从未存在过。它确实可以防止经典的读取死锁，但会以获取无效数据为代价。

如果**GetUser**或**CheckPassword**操作有可能通过**UpdateUser**操作访问正在更新的用户的配置文件，则不建议使用 WITH (NOLOCK)。

WITH (ROWLOCK) 表提示可以与 SELECT、INSERT、UPDATE 和 DELETE 语句一起使用，以指示服务器仅对正在修改或添加的行应用 Range-Lock(s)，并避免升级锁到页或表级别。其余行未锁定，可以由另一个查询访问。

但是，如果 SQL Server 上的默认事务隔离级别是 READ COMMITTED 或更严格，并且未启用 SNAPSHOT READS，则如果查找条件匹配或重叠，则活动的 INSERT、UPDATE 或 DELETE 事务可能仍会阻止 SELECT 查询。

当查询仅影响单个或仅几行时使用提示，以防止锁定锁定不会被查询删除的行。这将使另一个查询同时读取不相关的行，而不必等待删除完成。

如果您在将删除大量行的查询上使用它，它可能会降低性能，因为数据库将尝试避免将锁升级到更大的范围，即使它会更有效。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-04T16:09:15.713

WITH (NOLOCK) 与 SELECT 语句一起使用，当检索数据的时间敏感性下降到微秒时不是 eccential，或者选择新添加的记录正确下降。

UPDATE 语句使用 WITH (ROWLOCK) 将行锁定保持在行级锁定，而不是将其升级为多于一行甚至是表锁定。

您应该始终在您的选择语句和更新语句中使用，以及您需要正确创建索引、缓存重复数据以避免快速查询数据库以获取变化不大的数据，并查看您的登录逻辑以确定如果它没有执行不必要的数据记录，并检查您的 SQL 错误日志以查找可能会减慢您网站访问速度的错误。

# java - 一些数据库逻辑，检索正确的条目

> ID：11978966
> 
> 赞同：1
> 
> 时间：2012-08-15T23:59:12.000
> 
> 标签：java, android, sql, database

所以关于我首先要做什么的一些细节。我有一个在线游戏系统，用户在其中写一个单词，然后将其发布到带有一些值的数据库中。这一切都很好。

这是一个数据库条目示例：

```
uniqueID   victim      rival    wordguess   won
   6      607260120   504374351     Gg       0 
```

现在的问题是，许多受害者可以与许多对手开始游戏，受害者如何检查他们是否对他们发起了游戏，以及他们是否已经对一个人发起了游戏？

我有两个 PHP 文件，目前用于通过这些行检查这些内容：

```
$query = "SELECT `rival` FROM currentgames WHERE `victim` = '$victim'";
echo $row["rival"].","; 
```

而受害者则相反。

现在在我的 Java 中，我正在检查 listarray 适配器中的当前值，如下所示：

```
for (int i = 0;i<NetPlay.rivalArray.length-1;i++)
        {
            Log.i("VICTIM ARRAY DATA ", NetPlay.rivalArray[i]);

            if (NetPlay.rivalArray[i].equals(f.id))
            {
                ingame = true;
                break;

            }
            else
            {
                ingame = false;

            }
        }

        for (int i = 0;i<NetPlay.victimArray.length-1;i++)
        {
            Log.i("RIVAL ARRAY DATA ", NetPlay.victimArray[i]);

            if (NetPlay.victimArray[i].equals(NetPlay.myId))
            {
                battle = false;
                break;
            }
            else
            {
                battle = true;

            }

        }

        if (battle.equals(false))
        {
            battleBtn.setVisibility(View.INVISIBLE);
        }
        else 
        {
            battleBtn.setVisibility(View.VISIBLE);
        }

        if (ingame.equals(true))
        {
            newgameBtn.setVisibility(View.INVISIBLE);
        }
        else 
        {
            newgameBtn.setVisibility(View.VISIBLE);
        } 
```

奇怪的是，我可以让玩家显示他们是否已经与对手进行了一场比赛，从而隐藏了“新游戏”按钮，但我无法让“接受游戏”按钮正常工作。数据库和 SQL 绝对是我的弱点，我真的想不出一个合适的方法来解决这个问题。最初的想法是在数据库中为每个用户/受害者提供他们自己的表，但是随后提出了在其他 UserId 的表中检查游戏与他们的问题，很快就会变得混乱。

我可能还应该添加这是在 listview 适配器内部进行的，因此每个 listview 项目的 f.id 都会发生变化，这些检查也会发生在每个 listview 适配器上，我意识到这不是很有效，但我的主要重点是得到它工作，然后从那里优化。

另外要注意的是，我的“新游戏”按钮工作正常，我认为第二个按钮几乎是同一类的东西，但无论我用哪种方式工作，它都不起作用，我确定它我只是忽略了一些东西。有什么想法吗？

好的，我已将其范围缩小到这样一个事实，即用于检查此人是否已针对您发起的游戏的 SQL 语句没有返回任何内容，所以这显然是我出错的地方，但我就是不知道是什么错了，各种办法都试过了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:12:16.493

不要选择某人已经与之对抗的所有玩家。相反，查询类似：

```
SELECT `uniqueID` 
FROM currentgames 
WHERE (`victim` = '$victim' AND `rival` = '$rival')
OR (`victim` = '$rival' AND `rival` = '$victim'); 
```

这样，您要么返回一行，要么不返回，并且您不需要检查返回的行来查看其中一行是否有问题。这也应该使您的接受逻辑更容易。

# ruby - 为什么我无法访问我的 Espresso 框架应用程序？

> ID：11978969
> 
> 赞同：0
> 
> 时间：2012-08-15T23:59:37.210
> 
> 标签：ruby

我正在尝试使用[Espresso 框架](https://github.com/slivu/espresso)，但在“hello world”示例中遇到了问题。

我已经实现了这段代码：

```
require 'e'

class App < E

  def hello
    "Hello World!"
  end

end

App.run 
```

当我运行命令`ruby hello.rb`时，我得到这个：

```
[2012-08-15 20:54:55] INFO  WEBrick 1.3.1
[2012-08-15 20:54:55] INFO  ruby 1.9.3 (2012-04-20) [i386-mingw32]
[2012-08-15 20:54:55] WARN  TCPServer Error: Normalmente é permitida apenas uma utilização de cada endereço de soquete (protocolo/endereço de rede/porta). - bind(2)
[2012-08-15 20:54:55] INFO  WEBrick::HTTPServer#start: pid=6460 port=80 
```

似乎它可以正常启动，但是当我尝试访问 URL`localhost:80/hello`时，它就不起作用了。我得到一个“未找到：/hello”，在控制台中的输出是：

```
[15/Aug/2012:20:56:47] "GET /hello HTTP/1.1" 404 17
- -> /hello 
```

谁能告诉我为什么这不起作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:09:09.793

我很确定它应该是：

```
require 'e'

class App < E

  map '/' #important

  def hello
    "Hello World!"
  end

end

App.run 
```

# django - django app 随机调用 sympy 测试

> ID：11978975
> 
> 赞同：0
> 
> 时间：2012-08-16T00:00:36.040
> 
> 标签：django

我的服务器上出现了一个问题，事情会突然锁定，所以我在 SO 上找到了一些漂亮的代码，并在服务器再次锁定时使用它来打印所有服务器线程的堆栈跟踪。

大多数线程都在做他们应该做的事情，但这一个看起来真的很奇怪。它似乎正在调用一个同情测试。我根本无法理解它是如何从模板标签变成 sympy 的。

```
File: "/opt/django-live1.0/django/core/handlers/wsgi.py", line 248, in __call__
  response = self.get_response(request)
File: "/opt/django-live1.0/django/core/handlers/base.py", line 80, in get_response
  response = middleware_method(request)
File: "/opt/django-live1.0/protected/middleware.py", line 16, in         process_request
  login_url = reverse('protected-login')
File: "/opt/django-live1.0/django/core/urlresolvers.py", line 351, in reverse
  *args, **kwargs)))
File: "/opt/django-live1.0/django/core/urlresolvers.py", line 272, in reverse
  possibilities = self.reverse_dict.getlist(lookup_view)
File: "/opt/django-live1.0/django/core/urlresolvers.py", line 194, in _get_reverse_dict
  self._populate()
File: "/opt/django-live1.0/django/core/urlresolvers.py", line 162, in _populate
  for pattern in reversed(self.url_patterns):
File: "/opt/django-live1.0/django/core/urlresolvers.py", line 244, in _get_url_patterns
  patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File: "/opt/django-live1.0/django/core/urlresolvers.py", line 239, in _get_urlconf_module
  self._urlconf_module = import_module(self.urlconf_name)
File: "/opt/django-live1.0/django/utils/importlib.py", line 35, in import_module
  __import__(name)
File: "/var/www/site/urls.py", line 12, in <module>
  from sitelib.urls import initialize_urls
File: "/opt/django-live1.0/utils/urls.py", line 11, in <module>
  admin.autodiscover()
File: "/opt/django-live1.0/utils/default_settings.py", line 178, in init_defaults
  logging.error("Error setting up logging: %s" % ex)
File: "/opt/django-live1.0/django/template/__init__.py", line 1049, in add_to_builtins
  builtins.append(import_library(module))
File: "/opt/django-live1.0/django/template/__init__.py", line 997, in import_library
  return mod.register
File: "/opt/django-live1.0/django/utils/importlib.py", line 36, in import_module
  return sys.modules[name]
File: "/opt/django-live1.0/misc/templatetags/misc_tags.py", line 427, in <module>
  @make_tag
File: "/usr/local/lib/python2.6/dist-packages/sympy-0.6.7-py2.6.egg/sympy/__init__.py", line 44, in <module>
  evalf._create_evalf_table()
File: "/usr/local/lib/python2.6/dist-packages/sympy-0.6.7-py2.6.egg/sympy/core/__init__.py", line 22, in <mod
ule>
  exec '%s = _cls()' % (_n)
File: "/usr/local/lib/python2.6/dist-packages/sympy-0.6.7-py2.6.egg/sympy/core/basic.py", line 2505, in <modu
le>
  from numbers import Rational, Integer
File: "/usr/local/lib/python2.6/dist-packages/sympy-0.6.7-py2.6.egg/sympy/mpmath/__init__.py", line 385, in <
module>
  doctests()
File: "/usr/local/lib/python2.6/dist-packages/sympy-0.6.7-py2.6.egg/sympy/mpmath/ctx_fp.py", line 12, in <mod
ule>
  class FPContext(StandardBaseContext):
File: "/usr/local/lib/python2.6/dist-packages/sympy-0.6.7-py2.6.egg/sympy/mpmath/ctx_base.py", line 31, in <m
odule>
  VisualizationMethods):
File: "/usr/local/lib/python2.6/dist-packages/sympy-0.6.7-py2.6.egg/sympy/mpmath/identification.py", line 840
, in <module>
  doctest.testmod()
File: "/usr/local/lib/python2.6/dist-packages/sympy-0.6.7-py2.6.egg/sympy/mpmath/libmp/__init__.py", line 63,
 in <module>
  from backend import (gmpy, sage, BACKEND, STRICT, MPZ, MPZ_TYPE,
File: "/usr/local/lib/python2.6/dist-packages/sympy-0.6.7-py2.6.egg/sympy/mpmath/libmp/libmpf.py", line 1317,
 in <module>
  pass
File: "/usr/local/lib/python2.6/dist-packages/sympy-0.6.7-py2.6.egg/sympy/mpmath/libmp/libintmath.py", line 4
25, in <module>
  def eulernum(m, _cache={0:MPZ_ONE}):
File: "/usr/local/lib/python2.6/dist-packages/sympy-0.6.7-py2.6.egg/sympy/mpmath/libmp/libintmath.py", line 6
5, in python_trailing
  return t 
```

@make_tag 只是将函数转换为模板标签的片段

有谁知道这怎么会发生？

# javascript - 自动更改 Twitter Bootstrap 选项卡

> ID：11978977
> 
> 赞同：12
> 
> 时间：2012-08-16T00:00:55.460
> 
> 标签：javascript, jquery, tabs, twitter-bootstrap

我希望 Twitter Bootstrap 选项卡按时间顺序更改。我使用它们有点像旋转木马。我希望标签每 10 秒更改一次。

这是一个例子： http: [//library.buffalo.edu](http://library.buffalo.edu)

单击新闻故事以了解我的意思。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-17T15:07:12.970

这样的事情会创建一个永无止境的轮播循环；它将在所有选项卡上循环循环，并在达到最后一个选项卡（更改`#yourTabWrapper`为包含您的选项卡标记的任何内容）之后返回第一个选项卡）：

```
var tabCarousel = setInterval(function() {
    var tabs = $('#yourTabWrapper .nav-tabs > li'),
        active = tabs.filter('.active'),
        next = active.next('li'),
        toClick = next.length ? next.find('a') : tabs.eq(0).find('a');

    toClick.trigger('click');
}, 3000); 
```

我们所做的只是找到活动选项卡，然后`click`在列表中的下一个选项卡上触发事件。如果没有*下*一个选项卡，我们在第一个选项卡上触发`click`事件。请注意，事件实际上是在 上触发的`a`，而不是`li`.

现在，如果您想添加逻辑以在用户悬停或手动单击选项卡时暂停或重置间隔，则需要单独添加，您将使用它`clearInterval(tabCarousel)`来停止循环。

这是一个基本的演示：

[**--- jsFiddle 演示 ---**](http://jsfiddle.net/jackwanders/R4gWd/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-11T11:30:04.193

修复了 AppSol 解决方案：

```
// Tab-Pane change function
    var tabChange = function(){
        var tabs = $('.nav-tabs > li');
        var active = tabs.filter('.active');
        var next = active.next('li').length? active.next('li').find('a') : tabs.filter(':first-child').find('a');
        // Use the Bootsrap tab show method
        next.tab('show')
    }
    // Tab Cycle function
    var tabCycle = setInterval(tabChange, 5000)
    // Tab click event handler
    $(function(){
        $('.nav-tabs a').click(function(e) {
            e.preventDefault();
            // Stop the cycle
            clearInterval(tabCycle);
            // Show the clicked tabs associated tab-pane
            $(this).tab('show')
            // Start the cycle again in a predefined amount of time
            setTimeout(function(){
                tabCycle = setInterval(tabChange, 5000)
            }, 30000);
        });
    }); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T11:12:34.277

另一个不错的选择是在单击选项卡时暂停幻灯片：

```
// Tab-Pane change function
var tabChange = function(){
    var tabs = $('.nav-tabs > li');
    var active = tabs.filter('.active');
    var next = active.next('li').length? active.next('li').find('a') : tabs.filter(':first-child').find('a');
    // Use the Bootsrap tab show method
    next.tab('show')
}
// Tab Cycle function
var tabCycle = setInterval(tabChange, 5000)
// Tab click event handler
$(this).find('.nav-tabs a').click(function(e) {
    e.preventDefault();
    // Stop the cycle
    clearInterval(tabCycle);
    // Show the clicked tabs associated tab-pane
    $(this).tab('show')
    // Start the cycle again in a predefined amount of time
    setTimeout(function(){
        tabCycle = setInterval(tabChange, 5000);
    }, 15000);
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-18T17:28:46.913

捕获悬停事件的一种方法。这实际上取决于您试图捕捉什么元素来停止骑自行车。选项卡或选项卡内容。这挂钩到选项卡。

```
$('.tabbable .nav-tabs > li').hover(function(){
  clearInterval(tabCarousel);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-29T09:25:04.297

我已将时钟添加到 Pallab 的代码中。因此，即使在我的情况下为 10 秒的超时期限之前单击了不同的选项卡，当前选项卡将显示 10 秒，并且选项卡将在 5 秒后自动选项卡。我是初学者，所以请忍受我的编码。

您必须在不到 10 秒的时间内单击 2 个或更多选项卡，一次单击一个选项卡。

```
// Tab-Pane change function

tabChange = function(){
    var tabs = $('.nav-tabs > li');
    var active = tabs.filter('.active');
    var next = active.next('li').length? active.next('li').find('a') : tabs.filter(':first-child').find('a');
    // Use the Bootsrap tab show method
    next.tab('show');
}    // Tab Cycle function
function settabchnge () {
    //alert("in set tab");
tabCycle = setInterval(tabChange, 5000);
}

settabchnge();

function cleartabchange () {
    clearInterval(tabCycle);
}

$(function(){

    var counterofclock = 1;
    var counterofmoreclicks = 1; 
    var clicked = false;
    var sec = 0;
    function startClock() {
        if (clicked === false) {
            clock = setInterval(stopWatch, 1000);
            clicked = true;
        }else if (clicked === true) {
        }
    }       
    function stopWatch() {
            sec++;
    }
    function stopClock() {
            window.clearInterval(clock);
            sec = 0;
            clicked = false;
    }
    $('.nav-tabs a').click(function(e) {
        if(counterofclock === 1){
            startClock();
            counterofclock = 2;
        }else {
            stopClock();
            startClock();
        }
        e.preventDefault();
        // Stop the cycle
        if (counterofmoreclicks == 2 && sec < 11){
            clearTimeout(starttabchnage);
        }
        counterofmoreclicks = 2;
        clearInterval(tabCycle);
        // Show the clicked tabs associated tab-pane
        $(this).tab('show')
        // Start the cycle again in a predefined amount of time
        starttabchnage = setTimeout(function(){ settabchnge();}, 10000);
    });

}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-16T05:41:26.583

Control user frequently clicks on navs manually, Here is a [fiddle](https://jsfiddle.net/ersamrow/rsp3waLn/) try to click multiple time on navs

```
 // Tab Cycle function
    var tabCycle = setInterval(tabChange, 5000)
    // Tab click event handler
    $(function(){
        $('.nav-tabs a').click(function(e) {
            e.preventDefault();
            // Stop the cycle
            clearInterval(tabCycle);
            // Start the cycle again in a predefined amount of time
            $(this).tab('show')
            setTimeout(function(){
              // Stop the cycle here too because if user clicked on tabs frequently then setTimeout function called too manny time  
                clearInterval(tabCycle);
                tabCycle = setInterval(tabChange, 5000)
            }, 15000);
        });
    });

    // Tab-Pane change function
    var tabChange = function(){
        var tabs = $('.nav-tabs > li');
        var active = tabs.filter('.active');
        var next = active.next('li').length? active.next('li').find('a') : tabs.filter(':first-child').find('a');
        next.tab('show')
    }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>

<ul class="nav nav-pills nav-tabs nav-stacked">
  <li class="active"><a href="#t1">Home</a></li>
  <li><a href="#t2">Menu 1</a></li>
  <li><a href="#t3">Menu 2</a></li>
  <li><a href="#t4">Menu 3</a></li>
</ul>
```

# java - 是什么让这个 android 库成为真正的 websocket 客户端库？

> ID：11978979
> 
> 赞同：1
> 
> 时间：2012-08-16T00:01:16.243
> 
> 标签：java, android, sockets, client, websocket

[https://github.com/koush/android-websockets/blob/master/src/com/codebutler/android_websockets/WebSocketClient.java](https://github.com/koush/android-websockets/blob/master/src/com/codebutler/android_websockets/WebSocketClient.java)

是什么让它成为真正的 websocket 客户端，而不仅仅是一个直接的 socket 客户端？我看到它构造了 HTTP 请求，我想知道 websocket 与普通 Java 套接字的正式“定义”实际上是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T14:42:14.293

WebSocket 协议由[IETF 6455](https://www.rfc-editor.org/rfc/rfc6455)定义。

koush [/android-websockets](https://github.com/koush/android-websockets)项目实现了 IETF 6455 版本的 WebSocket 协议。

WebSocket 连接以与 HTTP 兼容的握手开始，这使得它可以更轻松地与现有的 Web 基础设施集成。它还赋予了它安全的跨域能力。

一旦建立连接，WebSocket 连接就是全双工双向连接（例如不像 HTTP 长轮询）。但是，即使在这一点上，连接也不是原始套接字。WebSocket 是基于消息的（而不是像底层 TCP 层那样的流式传输），因此它需要数据框架以指示消息边界。每个 WebSocket 帧至少有 2 个字节的标头，用于指示帧的长度，是消息的最后一帧还是延续，数据是 UTF-8 还是原始二进制等。

此外，客户端（浏览器）到服务器 WebSocket 帧使用简单的运行 XOR 进行屏蔽，以避免 Web 中介（代理、缓存等）中的理论漏洞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T00:36:53.990

WebSocket 通过端口 80 处理 HTTP。这样的数据既可以是文本的也可以是二进制的，而且，已知的标头 - 预期的标记很容易看到，例如 HTTP 请求 302。然而，一个“普通的”Java Socket 可以是：

*   命名管道
*   TCP/IP
*   UDP
*   蓝牙

它是一种更通用的套接字机制，其中二进制数据速度具有最大吞吐量。

那将是“*定义*”，但它不是一成不变的，例如，您可以在通过 HTTP 发送之前通过 Base64 编码通过“WebSocket”发送二进制文件。

在 Koush 的案例中，他只是围绕标准***创建了一个包装器***（关键字是*wrapper*`Socket` ）来处理 HTTP 请求。它可以解释，因此它不是一成不变的。例如，可以轻松地围绕蓝牙创建一个包装器，并将其称为“ *BTSocket* ”，甚至可以将其称为“ *IPCSocket* ”，用于进程间通信`Socket`。

# java - Spring 资源事务管理

> ID：11978982
> 
> 赞同：0
> 
> 时间：2012-08-16T00:01:48.160
> 
> 标签：java, spring

使用 Spring 事务时，谁负责管理资源事务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T00:14:32.293

我猜“资源事务”是指在 XA 分布式事务的上下文中。然后 spring 将委托给应用服务器中的 JTA 和 JTS 来启动、提交、回滚与资源管理器的事务。

# cdn - 许多边缘位置的 Amazon Cloudfront 403 错误？

> ID：11978983
> 
> 赞同：0
> 
> 时间：2012-08-16T00:01:48.297
> 
> 标签：cdn, http-status-code-403, amazon-cloudfront

我们最近开始将 Amazon Cloudfront 作为 CDN 进行测试。我们发现非美国用户在请求文件时经常遇到 403 错误。

我们使用自定义来源（不是 S3）。有没有其他人经历过这个？我们可以进行配置更改以停止返回 403 吗？

当我在美国测试在国外报告 403 的文件时，我可以毫无问题地查看它们。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:11:26.107

不确定这是多么具体的答案，但对于遇到相同问题的任何人，我们将所有内容移至 S3 存储桶，这似乎解决了我们的问题！

# linux - OCR - 使用 tesseract 3.0 和 imagemagick 6.6.5 从图像中获取文本

> ID：11978986
> 
> 赞同：6
> 
> 时间：2012-08-16T00:02:08.750
> 
> 标签：linux, imagemagick, tesseract

我正在尝试构建一个允许我在图像中搜索文本的 shell 脚本。基于文本，脚本将尽力从图像中获取文本。我想要您对此的输入，因为该脚本似乎适用于大多数图像，但不适用于文本字体颜色与文本周围较小的环境相似的那些图像。

```
# !/bin/bash
# 
# imt-ocr.sh is image magick tessearc OCR tool that is used for finding out text in image
#
# Arguments:
# 1     -- image filename (with path)
# 2     -- text to search in image      (default to '')
# 3     -- occurence of text            (default to 1)
# Usage:
# imt-ocr.sh [image_filename] [text_to_search] [occurence]
#

image=$1
txt=$2
occurence=$3    # Default to 1
if [ "$occurence" == "" ]
then
        occurence=1
fi

get_major_color ()
# Returns the major color of an image with its hex value
#       Parameter:      Image filename (with path)
#       Return format:  Returns a string "hex_val_of_color major_color_name"
{
convert $1 -format %c histogram:info: > x.txt
cat x.txt | awk '{print $1}' > x1.txt
h=$(sort -n x1.txt | tail -1);
color_info=$(cat x.txt | grep "$h" | cut -d '#' -f2)
rm -rf x.txt x1.txt
echo "$color_info"
}

invert_color()
# Inverts the color hex value
#       Parameter:      Hex value to be inverted
#       Return format:  Returns in hex
{
input_color_hex=$1                                              # Input color's hex value
white_color_hex=FFFFFF                                          # White color's  hex vlaue
inv_color_hex=`echo $(printf '%06X\n' $((0x$white_color_hex - 0x$input_color_hex)))`
echo $inv_color_hex
}

start_scale=100
end_scale=300
increment_scale=100
tmp_img=dst.tif
attempt=1
for ((scale=$start_scale, attempt=$attempt; scale <= $end_scale ; scale=scale+$increment_scale, attempt++))
        do
                echo "IMT-OCR-LOG: Scaling image to $scale% in attempt #$attempt"
                convert $image -type Grayscale -scale $scale% $tmp_img
                tesseract $tmp_img OUT
                found_oc=$(grep -o "$txt" OUT.txt | wc -l)
                echo "IMT-OCR-LOG: Found $found_oc occurence(s) of text '$txt' in attempt #$attempt"
                if [ $occurence -le $found_oc ] && [ $found_oc -ne 0 ]
                then
                        echo "IMT-OCR-LOG: Printing out the last text found on image"
                        echo "IMT-OCR-LOG: ======================================================"
                        cat OUT.txt
                        echo "IMT-OCR-LOG: ======================================================"
                        rm -rf $tmp_img OUT.txt
                        exit 1
                else
                        echo "IMT-OCR-LOG: Getting major color of image in attempt #$attempt"
                        color_info=`get_major_color $image`
                        true_color=$(echo $color_info | awk '{print $2}')
                        true_val=$(echo $color_info | awk '{print $1}')
                        echo "IMT-OCR-LOG: Major color of image is '$true_color' with hex value of $true_val in attempt #$attempt"

                        # Blur the image
                        echo "IMT-OCR-LOG: Bluring image in attempt #$attempt"
                        convert $tmp_img -blur 1x65535 $tmp_img

                        # Flip the color
                        inverted_val=`invert_color $true_val`
                        echo "IMT-OCR-LOG: Inverting the major color of image from 0x$true_val to 0x$inverted_val in attempt #$attempt"
                        convert $tmp_img -fill \#$inverted_val -opaque \#$true_val $tmp_img

                        # Sharpen the image
                        echo "IMT-OCR-LOG: Sharpening image in attempt #$attempt"
                        convert $tmp_img -sharpen 1x65535 $tmp_img

                        # Find text
                        tesseract $tmp_img OUT
                        found_oc=$(grep -o "$txt" OUT.txt | wc -l)
                        echo "IMT-OCR-LOG: Found $found_oc occurence(s) of text '$txt' in attempt #$attempt"
                        if [ "$found_oc" != "0" ]
                        then
                                if [ $occurence -le $found_oc ]
                                then
                                        echo "IMT-OCR-LOG: Printing out the last text found on image"
                                        echo "IMT-OCR-LOG: ======================================================"
                                        cat OUT.txt
                                        echo "IMT-OCR-LOG: ======================================================"
                                        rm -rf $tmp_img OUT.txt
                                        exit 1
                                fi
                        fi
                fi

                rm -rf OUT.txt

        done

rm -rf $tmp_img 
```

这是一个有问题的示例示例，图片（test.jpeg）[http://www.igoipad.com/wp-content/uploads/2012/07/03-Word-Collage-iPad.jpeg](http://www.igoipad.com/wp-content/uploads/2012/07/03-Word-Collage-iPad.jpeg)

```
[admin@ba-callgen image-magick-tesseract-processing]$ sh imt-ocr.sh test.jpeg Common
IMT-OCR-LOG: Scaling image to 100% in attempt #1
Tesseract Open Source OCR Engine with Leptonica
IMT-OCR-LOG: Found 0 occurence(s) of text 'Common' in attempt #1
IMT-OCR-LOG: Getting major color of image in attempt #1
IMT-OCR-LOG: Major color of image is 'grey96' with hex value of F5F5F5 in attempt #1
IMT-OCR-LOG: Bluring image in attempt #1
IMT-OCR-LOG: Inverting the major color of image from 0xF5F5F5 to 0x0A0A0A in attempt #1
IMT-OCR-LOG: Sharpening image in attempt #1
Tesseract Open Source OCR Engine with Leptonica
IMT-OCR-LOG: Found 0 occurence(s) of text 'Common' in attempt #1
IMT-OCR-LOG: Scaling image to 200% in attempt #2
Tesseract Open Source OCR Engine with Leptonica
IMT-OCR-LOG: Found 1 occurence(s) of text 'Common' in attempt #2
IMT-OCR-LOG: Printing out the last text found on image
IMT-OCR-LOG: ======================================================
Settings M...
Text
Common words
Exclude numbers
word case
Theme & Layuul
Color theme
Fnnl
Word layout
Clrien lalion
7301
Lrmclsc ape
\u2018OTC
Ergl sw v.-ords >
li( `
I):Jntc1'\:1r\qa )
Landon Spring >
Hough Trad >
H3'fJ|1d :-Ialf >
H L

IMT-OCR-LOG: ======================================================
[admin@ba-callgen image-magick-tesseract-processing]$ 
[admin@ba-callgen image-magick-tesseract-processing]$ 
[admin@ba-callgen image-magick-tesseract-processing]$ 
[admin@ba-callgen image-magick-tesseract-processing]$ 
[admin@ba-callgen image-magick-tesseract-processing]$ 
[admin@ba-callgen image-magick-tesseract-processing]$ 
[admin@ba-callgen image-magick-tesseract-processing]$ sh imt-ocr.sh test.jpeg Portrait
IMT-OCR-LOG: Scaling image to 100% in attempt #1
Tesseract Open Source OCR Engine with Leptonica
IMT-OCR-LOG: Found 0 occurence(s) of text 'Portrait' in attempt #1
IMT-OCR-LOG: Getting major color of image in attempt #1
IMT-OCR-LOG: Major color of image is 'grey96' with hex value of F5F5F5 in attempt #1
IMT-OCR-LOG: Bluring image in attempt #1
IMT-OCR-LOG: Inverting the major color of image from 0xF5F5F5 to 0x0A0A0A in attempt #1
IMT-OCR-LOG: Sharpening image in attempt #1
Tesseract Open Source OCR Engine with Leptonica
IMT-OCR-LOG: Found 0 occurence(s) of text 'Portrait' in attempt #1
IMT-OCR-LOG: Scaling image to 200% in attempt #2
Tesseract Open Source OCR Engine with Leptonica
IMT-OCR-LOG: Found 0 occurence(s) of text 'Portrait' in attempt #2
IMT-OCR-LOG: Getting major color of image in attempt #2
IMT-OCR-LOG: Major color of image is 'grey96' with hex value of F5F5F5 in attempt #2
IMT-OCR-LOG: Bluring image in attempt #2
IMT-OCR-LOG: Inverting the major color of image from 0xF5F5F5 to 0x0A0A0A in attempt #2
IMT-OCR-LOG: Sharpening image in attempt #2
Tesseract Open Source OCR Engine with Leptonica
IMT-OCR-LOG: Found 0 occurence(s) of text 'Portrait' in attempt #2
IMT-OCR-LOG: Scaling image to 300% in attempt #3
Tesseract Open Source OCR Engine with Leptonica
IMT-OCR-LOG: Found 0 occurence(s) of text 'Portrait' in attempt #3
IMT-OCR-LOG: Getting major color of image in attempt #3
IMT-OCR-LOG: Major color of image is 'grey96' with hex value of F5F5F5 in attempt #3
IMT-OCR-LOG: Bluring image in attempt #3
IMT-OCR-LOG: Inverting the major color of image from 0xF5F5F5 to 0x0A0A0A in attempt #3
IMT-OCR-LOG: Sharpening image in attempt #3
Tesseract Open Source OCR Engine with Leptonica
IMT-OCR-LOG: Found 0 occurence(s) of text 'Portrait' in attempt #3
[admin@ba-callgen image-magick-tesseract-processing]$ 
```

如您所见，我可以找到文本“普通”，但找不到“肖像”。原因是肖像的字体颜色。任何有助于改进此脚本的帮助...

我正在使用 Centos 5。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-18T00:42:28.120

在操作输入图像时，不要人为地限制自己只评估一两种方法。您现在似乎只使用`-blur`和`-scale`。

您还应该考虑使用以下操作：

*   `-contrast`
*   `-despeckle`
*   `-edge`
*   `-negate`
*   `-normalize`
*   `-posterize`
*   `-type grayscale`
*   `-monochrome`
*   `-gamma`
*   `-antialias / +antialias`

`Input Image:` ![原始截图](../Images/5ce9a71973f6fd1660a5ac5ffe77a6bc.png)

例如，请参阅此命令产生的内容：

```
convert 03-Word-Collage-iPad.jpeg             \
    -scale 1000%                              \
    -blur 1x65535 -blur 1x65535 -blur 1x65535 \
    -contrast                                 \
    -normalize                                \
    -despeckle -despeckle                     \
    -type grayscale                           \
    -sharpen 1                                \
    -posterize 3                              \
    -negate                                   \
    -gamma 100                                \
    -compress zip                             \
     a.tif 
```

`Output Image:` ![输出图像](../Images/72a10694cf5091cdb29b77c5f8564cee.png)
（抱歉，当将 TIFF 上传到本网站时，它会自动转换为 PNG。因此，在下载上面看到的图像时，您并没有真正得到我的 TIFF——但您仍然会看到我的真实图片足够接近结果。）

**注 1：**我用这个 ImageMagick 版本对此进行了测试：

```
convert -version
  Version: ImageMagick 6.7.6-9 2012-05-12 Q16 http://www.imagemagick.org
  Copyright: Copyright (C) 1999-2012 ImageMagick Studio LLC
  Features: 
```

**注意 2：** ImageMagick 的较旧或较新版本的行为可能会有所不同，尤其是在`-posterize`!

这是 Tesseract 的 OCR 的结果`a.tif`：

```
tesseract a.tif OUT  &&  cat OUT.txt

Tesseract Open Source OCR Engine v3.01 with Leptonica
   Page 0
   Text
   Common words Remove English words >
   Exclude numbers
   Word case Don't change 1+
   Theme & Layout
   Color theme London Spring >
   Font Rough Trad >
   Word layout Half and Half >
   Orientation
   Landscape
   Q
   u
   -0
   "H
   I 
```

* * *

## 更新：

我验证了 ImageMagick 的最新版本`6.7.9-0`（昨天发布）不会产生与上面命令 + 屏幕截图（使用 version 制作）显示的完全相同的结果`6.7.6-9`。这是区别：

![在此处输入图像描述](../Images/80a6ea29b5b0c711392835dbd0c187de.png)

无论如何，我敢肯定，如果您稍微调整一下我的命令，使用各种参数，无论您的 ImageMagick 版本是什么，您都会让它为您工作......

# php - .csv 太多行无法上传？

> ID：11978987
> 
> 赞同：0
> 
> 时间：2012-08-16T00:02:14.103
> 
> 标签：php, csv

我真的不太了解PHP。但无论如何，我无法使用以下 php 上传 .csv 文件。该文件小于 5MB。这是怎么回事？总共有 79,500 行记录，只有四列和简单的值，如下所示：

```
27589   16990   161.7000095 0.838494
27589   17067   161.7000095 0.838494
27820   17144   315.7000095 0.859458
27820   17221   315.7000095 0.859458
27820   17606   315.7000095 0.866033
27820   17683   315.7000095 0.866033 
```

我对文件进行了剖析，上传了多达 6 万行数据并被炸掉了，也就是 1.93MB。除此之外的任何事情都行不通。错误代码为“ -- CSV file to load: failure to upload the file >>> Error code: 1
” 错误代码 1。

另外，我如何打印完整的 PHP 错误消息，而不仅仅是我不确定它对应的值“1”？即...输出打印像这样“UPLOAD_ERR_INI_SIZE: 1”？

```
<?php
// using upload at click from http://code.google.com/p/upload-at-click/
// FileData is the name for the input file

$file_result = "";
$file = $_FILES['Filedata'];

$allowedExtensions = array("csv", "txt");
$arrayVar = explode(".", $file["name"]);
$extension = end($arrayVar);

//commented out for “Only variables should be passed by reference” error
//$extension = end(explode(".", $file["name"]));

function isAllowedExtension($fileName) {
    global $allowedExtensions;
    return in_array(end(explode(".", $fileName)), $allowedExtensions);
}

if($file["error"] > 0){
    echo "failure to upload the file >>> ". "Error code: ".$file["error"]."<br>";
}else{
    //echo " >>> CURRENT DIR: ".getcwd() . "\n";
    $workDir = getcwd();

    $dir = substr($workDir, 0, -10);
    $path = $file["name"];
    $newFileLoc = $dir.$path;

    $file_result.=
    "<br>     Upload: " . $file["name"] . "<br>" .
    "     Type: " . $file["type"] . "<br>" .
    "     Size: " . $file["size"] . "<br>" .
    "     file uploaded to: ".$newFileLoc."<br>";

    // txt - text/plain
    // rtf - application/msword
    // dat/obj - application/octet-stream
    // csv - application/vnd.ms-excel
    // maximum 200 MB file - 200,000,000 k

    if (    ($file["type"] == "application/vnd.ms-excel" || $file["type"] == "text/plain")
            && isAllowedExtension($file["name"])
            && ($file["size"] < 200000000)
        )
        {   
            move_uploaded_file($file["tmp_name"], $newFileLoc);
            //echo $file_result.=" >>> File uploaded successfull!!";
            echo "|".$path;//"filePath : " . $newFileLoc;

        }else{
            echo " >>> NOT a file valid: ". isAllowedExtension($file["name"]);
        }       
} 
```

?>

这是其他用户为正确捕获错误而添加的行。请让我知道这是否正确对不起我根本不了解 PHP。无论如何，打印的错误只是“-- CSV file to load: failure to upload the file >>> Error code: 1
”

```
<?php
// using upload at click from http://code.google.com/p/upload-at-click/
// FileData is the name for the input file

ini_set('display_errors', 1); error_reporting(E_ALL);

$file_result = "";
$file = $_FILES['Filedata'];

$allowedExtensions = array("csv", "txt");
$arrayVar = explode(".", $file["name"]);
$extension = end($arrayVar); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T00:15:49.550

1.  设置你的[`upload_max_filesize`](http://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize)东西高于 2M
2.  你的[`post_max_size`](http://www.php.net/manual/en/ini.core.php#ini.post-max-size)应该高于2M
3.  确保[`max_execution_time`](http://www.php.net/manual/en/info.configuration.php#ini.max-execution-time)足够高
4.  [`memory_limit`](http://www.php.net/manual/en/ini.core.php#ini.memory-limit)也应该足够高，但应该是 16M 应该没问题。
5.  确保[`set_time_limit()`](http://ca3.php.net/manual/en/function.set-time-limit.php)足够高

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T00:15:25.840

只需增加 php.ini 文件中的上传大小：

*   [http://drupal.org/node/97193](http://drupal.org/node/97193)

# jquery - 了解 $.validator.unobtrusive.adapters.addBool() 方法

> ID：11978990
> 
> 赞同：16
> 
> 时间：2012-08-16T00:02:44.120
> 
> 标签：jquery, jquery-validate, asp.net-mvc-4, custom-attributes, unobtrusive-validation

我试图理解一些事情。

来自这篇博文[http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html)

> 桥接 HTML 和 jQuery Validate：适配器
> 
> **编写客户端验证器涉及两个步骤：为 jQuery Validate 编写验证器，以及编写从 HTML 属性中获取参数值并将其转换为 jQuery Validate 元数据的适配器**。前一个主题不在这篇博文的范围内（因为它实际上不是 MVC 特定的）。
> 
> jQuery.validator.unobtrusive.adapters 中有一个适配器集合。挂在适配器集合之外的是适配器注册方法 (add) 和三个可用于注册非常常见的适配器类型的助手（addBool、addSingleVal 和 addMinMax）。

请注意，它说**两个**步骤。

但是如果你看一下这篇文章[MVC3: make checkbox required via jQuery validate?](https://stackoverflow.com/questions/4934032/mvc3-make-checkbox-required-via-jquery-validate) 您只需要第二步（“编写适配器”）即可进行验证 - 通过添加以下代码行：

```
$.validator.unobtrusive.adapters.addBool("mandatory", "required"); 
```

我在一个新的 MVC 4 Internet 应用程序中测试了代码，它运行良好，这是超级简单的示例。

查看模型

```
public class SimpleViewModel
{
    [Mandatory(ErrorMessage = "You must agree to the Terms to register.")]
    [Display(Name = "Terms Accepted")]
    public bool IsTermsAccepted { get; set; }
} 
```

验证属性

```
public class MandatoryAttribute : ValidationAttribute, IClientValidatable
{
    public override bool IsValid(object value)
    {
        return (!(value is bool) || (bool)value);
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        ModelClientValidationRule rule = new ModelClientValidationRule();
        rule.ErrorMessage = FormatErrorMessage(metadata.GetDisplayName());
        rule.ValidationType = "mandatory";
        yield return rule;
    }
} 
```

看法

```
@model MvcApplication2.Models.SimpleViewModel

@{
    ViewBag.Title = "";
}    

@using (Html.BeginForm()) {
    @Html.ValidationSummary()
    @Html.CheckBoxFor(model => model.IsTermsAccepted)
    @Html.ValidationMessageFor(model => model.IsTermsAccepted)
    <input type="submit" value="Send" />
}

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    <script type="text/javascript">
        $.validator.unobtrusive.adapters.addBool("mandatory", "required");
    </script>
} 
```

所以基本上我有三个问题：

1.  是 $.validator.unobtrusive.adapters.addBool("mandatory", "required"); 除了编写属性类之外，您真的唯一需要的东西吗？

2.  它在幕后究竟做了什么？

3.  我在哪里可以找到关于 addBool 的好文档？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T13:29:26.177

除了评论中链接到的文章@BlueChippy，我在[这篇文章](http://blog.degree.no/2012/03/validation-of-required-checkbox-in-asp-net-mvc/)中找到了2.的答案。

1.  是的，这是除了属性之外唯一需要的东西。那是因为我们使用了一个已经存在的规则（*required*）。
2.  它有什么作用？

> *这只是为MandatoryAttribute*注册了一个新的验证适配器，其中第一个参数是适配器名称，第二个参数是 jQuery 验证规则的名称。适配器名称应该与我们之前指定的验证类型的值匹配，并且 jQuery 验证 required-rule 将要求用户选中复选框。

3\. 可以[在 Brad Wilson 博客上的这篇文章](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html)中找到更多信息。

# jquery - 如何使用 CSS（jQuery SVG 图像替换）更改 SVG 图像的颜色？

> ID：11978995
> 
> 赞同：462
> 
> 时间：2012-08-16T00:05:27.443
> 
> 标签：jquery, css, svg

这是我想出的一段方便的代码的自我问答。

目前，没有一种简单的方法可以嵌入 SVG 图像，然后通过 CSS 访问 SVG 元素。使用 JS SVG 框架的方法有很多种，但如果你所做的只是制作一个带有翻转状态的简单图标，它们就过于复杂了。

所以这就是我想出的，我认为这是迄今为止在网站上使用 SVG 文件的最简单的方法。它的概念来自早期的文本到图像替换方法，但据我所知，SVG 从未这样做过。

这是问题：

## **如何在不使用 JS-SVG 框架的情况下嵌入 SVG 并在 CSS 中更改其颜色？**

* * *

## 回答 #1

> 赞同：553
> 
> 时间：2012-08-16T00:05:27.443

首先，在 HTML 中使用 IMG 标签嵌入 SVG 图形。我使用 Adob​​e Illustrator 制作图形。

```
<img id="facebook-logo" class="svg social-link" src="/images/logo-facebook.svg"/> 
```

这就像您嵌入普通图像的方式一样。请注意，您需要将 IMG 设置为 svg 类。'social-link' 类只是为了举例。ID 不是必需的，但很有用。

然后使用这个 jQuery 代码（在单独的文件中或在 HEAD 中内联）。

```
 /**
     * Replace all SVG images with inline SVG
     */
        jQuery('img.svg').each(function(){
            var $img = jQuery(this);
            var imgID = $img.attr('id');
            var imgClass = $img.attr('class');
            var imgURL = $img.attr('src');

            jQuery.get(imgURL, function(data) {
                // Get the SVG tag, ignore the rest
                var $svg = jQuery(data).find('svg');

                // Add replaced image's ID to the new SVG
                if(typeof imgID !== 'undefined') {
                    $svg = $svg.attr('id', imgID);
                }
                // Add replaced image's classes to the new SVG
                if(typeof imgClass !== 'undefined') {
                    $svg = $svg.attr('class', imgClass+' replaced-svg');
                }

                // Remove any invalid XML tags as per http://validator.w3.org
                $svg = $svg.removeAttr('xmlns:a');

                // Replace image with new SVG
                $img.replaceWith($svg);

            }, 'xml');

        }); 
```

上面的代码所做的是查找所有具有类 'svg' 的 IMG，并将其替换为链接文件中的内联 SVG。巨大的优势是它允许您现在使用 CSS 来更改 SVG 的颜色，如下所示：

```
svg:hover path {
    fill: red;
} 
```

我编写的 jQuery 代码还跨原始图像 ID 和类进行了移植。所以这个 CSS 也可以：

```
#facebook-logo:hover path {
    fill: red;
} 
```

或者：

```
.social-link:hover path {
    fill: red;
} 
```

**你可以在这里看到一个例子：http: [//labs.funkhausdesign.com/examples/img-svg/img-to-svg.html](http://labs.funkhausdesign.com/examples/img-svg/img-to-svg.html)**

**我们有一个更复杂的版本，包括这里的缓存： [https ://github.com/funkhaus/style-guide/blob/master/template/js/site.js#L32-L90](https://github.com/funkhaus/style-guide/blob/master/template/js/site.js#L32-L90)**

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2016-02-01T09:21:15.100

风格

```
svg path {
    fill: #000;
} 
```

脚本

```
$(document).ready(function() {
    $('img[src$=".svg"]').each(function() {
        var $img = jQuery(this);
        var imgURL = $img.attr('src');
        var attributes = $img.prop("attributes");

        $.get(imgURL, function(data) {
            // Get the SVG tag, ignore the rest
            var $svg = jQuery(data).find('svg');

            // Remove any invalid XML tags
            $svg = $svg.removeAttr('xmlns:a');

            // Loop through IMG attributes and apply on SVG
            $.each(attributes, function() {
                $svg.attr(this.name, this.value);
            });

            // Replace IMG with SVG
            $img.replaceWith($svg);
        }, 'xml');
    });
}); 
```

* * *

## 回答 #3

> 赞同：41
> 
> 时间：2016-06-28T19:10:37.127

您现在可以在[大多数现代浏览器](http://caniuse.com/#feat=css-filters)（包括 Edge，但不包括 IE11）中使用[CSS`filter`属性。](https://developer.mozilla.org/en-US/docs/Web/CSS/filter)它适用于 SVG 图像以及其他元素。您可以使用或修改颜色，尽管它们不允许您单独修改不同的颜色。我使用以下 CSS 类来显示图标的“禁用”版本（其中原始是饱和颜色的 SVG 图片）：`hue-rotate``invert`

```
.disabled {
    opacity: 0.4;
    filter: grayscale(100%);
    -webkit-filter: grayscale(100%);
} 
```

这使得它在大多数浏览器中为浅灰色。在 IE（可能还有 Opera Mini，我还没有测试过）中，它明显被 opacity 属性淡化了，尽管它不是灰色的，但它看起来仍然相当不错。

[下面是Twemoji](https://twemoji.maxcdn.com/)铃铛图标的四个不同 CSS 类的示例：原始（黄色）、上述“禁用”类、`hue-rotate`（绿色）和`invert`（蓝色）。

```
.twa-bell {
  background-image: url("https://twemoji.maxcdn.com/svg/1f514.svg");
  display: inline-block;
  background-repeat: no-repeat;
  background-position: center center;
  height: 3em;
  width: 3em;
  margin: 0 0.15em 0 0.3em;
  vertical-align: -0.3em;
  background-size: 3em 3em;
}
.grey-out {
  opacity: 0.4;
  filter: grayscale(100%);
  -webkit-filter: grayscale(100%);
}
.hue-rotate {
  filter: hue-rotate(90deg);
  -webkit-filter: hue-rotate(90deg);
}
.invert {
  filter: invert(100%);
  -webkit-filter: invert(100%);
}
```

```
<!DOCTYPE html>
<html>

<head>
</head>

<body>
  <span class="twa-bell"></span>
  <span class="twa-bell grey-out"></span>
  <span class="twa-bell hue-rotate"></span>
  <span class="twa-bell invert"></span>
</body>

</html>
```

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2014-08-14T10:22:46.627

或者，您可以使用 CSS `mask`，授予的[浏览器支持](http://caniuse.com/css-masks)不好，但您可以使用后备

```
.frame {
    background: blue;
    -webkit-mask: url(image.svg) center / contain no-repeat;
} 
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2013-10-01T16:01:10.347

如果您可以在页面中包含文件（PHP 包含或通过您选择的 CMS 包含），您可以添加 SVG 代码并将其包含到您的页面中。这与将 SVG 源粘贴到页面中的效果相同，但会使页面标记更清晰。

好处是您可以通过 CSS 定位 SVG 的某些部分以进行悬停——不需要 javascript。

[http://codepen.io/chriscoyier/pen/evcBu](http://codepen.io/chriscoyier/pen/evcBu)

你只需要使用这样的 CSS 规则：

```
#pathidorclass:hover { fill: #303 !important; } 
```

请注意，该`!important`位是覆盖填充颜色所必需的。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2020-02-19T19:27:08.697

TL/DR：去这里-> [https://codepen.io/sosuke/pen/Pjoqqp](https://codepen.io/sosuke/pen/Pjoqqp)

解释：

我假设你有这样的html：

```
<img src="/img/source.svg" class="myClass"> 
```

绝对走过滤路线，即。您的 svg 很可能是黑色或白色。您可以应用过滤器使其成为您想要的任何颜色，例如，我有一个黑色 svg，我想要薄荷绿色。我首先将其反转为白色（从技术上讲，它是全 RGB 颜色）然后使用色调饱和度等。为了让它正确：

```
filter: invert(86%) sepia(21%) saturate(761%) hue-rotate(92deg) brightness(99%) contrast(107%); 
```

更好的是，您可以使用工具将所需的十六进制转换为过滤器： [https ://codepen.io/sosuke/pen/Pjoqqp](https://codepen.io/sosuke/pen/Pjoqqp)

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2015-01-27T09:34:39.407

@Drew Baker 提供了一个很好的解决方案来解决这个问题。代码工作正常。然而，那些使用 AngularJs 的人可能会发现对 jQuery 有很多依赖。因此，我认为为 AngularJS 用户粘贴一个遵循@Drew Baker 解决方案的代码是个好主意。

**AngularJs 方式相同的代码**

*1\. Html*：在您的 html 文件中使用波纹管标签：

```
<svg-image src="/icons/my.svg" class="any-class-you-wish"></svg-image> 
```

*2\. 指令*：这将是您识别标签所需的指令：

```
'use strict';
angular.module('myApp')
  .directive('svgImage', ['$http', function($http) {
    return {
      restrict: 'E',
      link: function(scope, element) {
        var imgURL = element.attr('src');
        // if you want to use ng-include, then
        // instead of the above line write the bellow:
        // var imgURL = element.attr('ng-include');
        var request = $http.get(
          imgURL,
          {'Content-Type': 'application/xml'}
        );

        scope.manipulateImgNode = function(data, elem){
          var $svg = angular.element(data)[4];
          var imgClass = elem.attr('class');
          if(typeof(imgClass) !== 'undefined') {
            var classes = imgClass.split(' ');
            for(var i = 0; i < classes.length; ++i){
              $svg.classList.add(classes[i]);
            }
          }
          $svg.removeAttribute('xmlns:a');
          return $svg;
        };

        request.success(function(data){
          element.replaceWith(scope.manipulateImgNode(data, element));
        });
      }
    };
  }]); 
```

*3.CSS*：

```
.any-class-you-wish{
    border: 1px solid red;
    height: 300px;
    width:  120px
} 
```

*4\. 使用 karma-jasmine 进行单元测试*：

```
'use strict';

describe('Directive: svgImage', function() {

  var $rootScope, $compile, element, scope, $httpBackend, apiUrl, data;

  beforeEach(function() {
    module('myApp');

    inject(function($injector) {
      $rootScope = $injector.get('$rootScope');
      $compile = $injector.get('$compile');
      $httpBackend = $injector.get('$httpBackend');
      apiUrl = $injector.get('apiUrl');
    });

    scope = $rootScope.$new();
    element = angular.element('<svg-image src="/icons/icon-man.svg" class="svg"></svg-image>');
    element = $compile(element)(scope);

    spyOn(scope, 'manipulateImgNode').andCallThrough();
    $httpBackend.whenGET(apiUrl + 'me').respond(200, {});

    data = '<?xml version="1.0" encoding="utf-8"?>' +
      '<!-- Generator: Adobe Illustrator 17.0.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->' +
      '<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">' +
      '<!-- Obj -->' +
      '<!-- Obj -->' +
      '<svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"' +
      'width="64px" height="64px" viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve">' +
        '<g>' +
          '<path fill="#F4A902" d=""/>' +
          '<path fill="#F4A902" d=""/>' +
        '</g>' +
      '</svg>';
    $httpBackend.expectGET('/icons/icon-man.svg').respond(200, data);
  });

  afterEach(function() {
    $httpBackend.verifyNoOutstandingExpectation();
    $httpBackend.verifyNoOutstandingRequest();
  });

  it('should call manipulateImgNode atleast once', function () {
    $httpBackend.flush();
    expect(scope.manipulateImgNode.callCount).toBe(1);
  });

  it('should return correct result', function () {
    $httpBackend.flush();
    var result = scope.manipulateImgNode(data, element);
    expect(result).toBeDefined();
  });

  it('should define classes', function () {
    $httpBackend.flush();
    var result = scope.manipulateImgNode(data, element);
    var classList = ["svg"];
    expect(result.classList[0]).toBe(classList[0]);
  });
}); 
```

* * *

## 回答 #8

> 赞同：17
> 
> 时间：2018-01-03T22:23:22.807

我知道你想用 CSS 来完成这个，但只是提醒一下，以防它是一个小而简单的图像 - 你总是可以在 Notepad++ 中打开它并更改路径/任何元素的填充：

```
<path style="fill:#010002;" d="M394.854,205.444c9.218-15.461,19.102-30.181,14.258-49.527
    ...
    C412.843,226.163,402.511,211.451,394.854,205.444z"/> 
```

它可以节省大量丑陋的脚本。对不起，如果它不在基地，但有时简单的解决方案可能会被忽略。

...即使交换多个 svg 图像的大小也可能比该问题的某些代码片段小。

* * *

## 回答 #9

> 赞同：7
> 
> 时间：2015-09-16T20:21:10.650

我写了一个指令来用 AngularJS 解决这个问题。它在[这里可用 - ngReusableSvg](https://github.com/OmriAharon/ngReusableSvg)。

它在渲染后替换 SVG 元素，并将其放置在`div`元素中，使其 CSS 易于更改。这有助于在不同的地方使用不同的尺寸/颜色使用相同的 SVG 文件。

用法很简单：

```
<object oa-reusable-svg
        data="my_icon.svg"
        type="image/svg+xml"
        class="svg-class"
        height="30"  // given to prevent UI glitches at switch time
        width="30">
</object> 
```

之后，您可以轻松拥有：

```
.svg-class svg {
    fill: red; // whichever color you want
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-10-01T02:53:15.067

这是`knockout.js`基于接受的答案的版本：

**重要：**它实际上也需要 jQuery 来替换，但我认为它可能对某些人有用。

```
ko.bindingHandlers.svgConvert =
    {
        'init': function ()
        {
            return { 'controlsDescendantBindings': true };
        },

        'update': function (element, valueAccessor, allBindings, viewModel, bindingContext)
        {
            var $img = $(element);
            var imgID = $img.attr('id');
            var imgClass = $img.attr('class');
            var imgURL = $img.attr('src');

            $.get(imgURL, function (data)
            {
                // Get the SVG tag, ignore the rest
                var $svg = $(data).find('svg');

                // Add replaced image's ID to the new SVG
                if (typeof imgID !== 'undefined')
                {
                    $svg = $svg.attr('id', imgID);
                }
                // Add replaced image's classes to the new SVG
                if (typeof imgClass !== 'undefined')
                {
                    $svg = $svg.attr('class', imgClass + ' replaced-svg');
                }

                // Remove any invalid XML tags as per http://validator.w3.org
                $svg = $svg.removeAttr('xmlns:a');

                // Replace image with new SVG
                $img.replaceWith($svg);

            }, 'xml');

        }
    }; 
```

然后只适用`data-bind="svgConvert: true"`于您的 img 标签。

此解决方案完全用`img`SVG 替换标签，并且不会考虑任何额外的绑定。

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-09-04T16:04:04.020

有一个名为 SVGInject 的开源库，它使用该`onload`属性来触发注入。[您可以在https://github.com/iconfu/svg-inject](https://github.com/iconfu/svg-inject)找到 GitHub 项目

这是一个使用 SVGInject 的最小示例：

```
<html>
  <head>
    <script src="svg-inject.min.js"></script>
  </head>
  <body>
    <img src="image.svg" onload="SVGInject(this)" />
  </body>
</html> 
```

加载图像后，`onload="SVGInject(this)`将触发注入，`<img>`元素将被`src`属性中提供的 SVG 文件的内容替换。

它解决了 SVG 注入的几个问题：

1.  SVG 可以隐藏，直到注入完成。如果在加载期间已经应用了样式，这很重要，否则会导致短暂的“无样式内容闪烁”。

2.  `<img>`元素会自动注入。如果动态添加 SVG，则不必担心再次调用注入函数。

3.  将随机字符串添加到 SVG 中的每个 ID，以避免在多次注入 SVG 时在文档中多次使用相同的 ID。

SVGInject 是纯 Javascript，适用于所有支持 SVG 的浏览器。

*免责声明：我是 SVGInject 的合著者*

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2017-11-07T20:41:21.797

这是一个没有框架的代码，只有纯 js ：

```
document.querySelectorAll('img.svg').forEach(function(element) {
            var imgID = element.getAttribute('id')
            var imgClass = element.getAttribute('class')
            var imgURL = element.getAttribute('src')

            xhr = new XMLHttpRequest()
            xhr.onreadystatechange = function() {
                if(xhr.readyState == 4 && xhr.status == 200) {
                    var svg = xhr.responseXML.getElementsByTagName('svg')[0];

                    if(imgID != null) {
                         svg.setAttribute('id', imgID);
                    }

                    if(imgClass != null) {
                         svg.setAttribute('class', imgClass + ' replaced-svg');
                    }

                    svg.removeAttribute('xmlns:a')

                    if(!svg.hasAttribute('viewBox') && svg.hasAttribute('height') && svg.hasAttribute('width')) {
                        svg.setAttribute('viewBox', '0 0 ' + svg.getAttribute('height') + ' ' + svg.getAttribute('width'))
                    }
                    element.parentElement.replaceChild(svg, element)
                }
            }
            xhr.open('GET', imgURL, true)
            xhr.send(null)
        }) 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-07-07T19:25:46.387

如果我们有更多这样的 svg 图像，我们也可以借助字体文件。
像[https://glyphter.com/](https://glyphter.com/)这样的网站可以从我们的 svg 中获取字体文件。

* * *

例如

```
@font-face {
    font-family: 'iconFont';
    src: url('iconFont.eot');
}
#target{
    color: white;
    font-size:96px;
    font-family:iconFont;
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2018-05-07T11:45:24.340

您可以为此使用数据图像。使用 data-image(data-URI) 您可以像内联一样访问 SVG。

**这是使用纯 CSS 和 SVG 的翻转效果。**

我知道这**很乱**，但你可以这样做。

```
 .action-btn {
    background-size: 20px 20px;
    background-position: center center;
    background-repeat: no-repeat;
    border-width: 1px;
    border-style: solid;
    border-radius: 30px;
    height: 40px;
    width: 60px;
    display: inline-block;
 }

.delete {
     background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg version='1.1' id='Capa_1' fill='#FB404B' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='482.428px' height='482.429px' viewBox='0 0 482.428 482.429' style='enable-background:new 0 0 482.428 482.429;' xml:space='preserve'%3e%3cg%3e%3cg%3e%3cpath d='M381.163,57.799h-75.094C302.323,25.316,274.686,0,241.214,0c-33.471,0-61.104,25.315-64.85,57.799h-75.098 c-30.39,0-55.111,24.728-55.111,55.117v2.828c0,23.223,14.46,43.1,34.83,51.199v260.369c0,30.39,24.724,55.117,55.112,55.117 h210.236c30.389,0,55.111-24.729,55.111-55.117V166.944c20.369-8.1,34.83-27.977,34.83-51.199v-2.828 C436.274,82.527,411.551,57.799,381.163,57.799z M241.214,26.139c19.037,0,34.927,13.645,38.443,31.66h-76.879 C206.293,39.783,222.184,26.139,241.214,26.139z M375.305,427.312c0,15.978-13,28.979-28.973,28.979H136.096 c-15.973,0-28.973-13.002-28.973-28.979V170.861h268.182V427.312z M410.135,115.744c0,15.978-13,28.979-28.973,28.979H101.266 c-15.973,0-28.973-13.001-28.973-28.979v-2.828c0-15.978,13-28.979,28.973-28.979h279.897c15.973,0,28.973,13.001,28.973,28.979 V115.744z'/%3e%3cpath d='M171.144,422.863c7.218,0,13.069-5.853,13.069-13.068V262.641c0-7.216-5.852-13.07-13.069-13.07 c-7.217,0-13.069,5.854-13.069,13.07v147.154C158.074,417.012,163.926,422.863,171.144,422.863z'/%3e%3cpath d='M241.214,422.863c7.218,0,13.07-5.853,13.07-13.068V262.641c0-7.216-5.854-13.07-13.07-13.07 c-7.217,0-13.069,5.854-13.069,13.07v147.154C228.145,417.012,233.996,422.863,241.214,422.863z'/%3e%3cpath d='M311.284,422.863c7.217,0,13.068-5.853,13.068-13.068V262.641c0-7.216-5.852-13.07-13.068-13.07 c-7.219,0-13.07,5.854-13.07,13.07v147.154C298.213,417.012,304.067,422.863,311.284,422.863z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e ");
     border-color:#FB404B;

 }

 .delete:hover {
     background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg version='1.1' id='Capa_1' fill='#fff' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' width='482.428px' height='482.429px' viewBox='0 0 482.428 482.429' style='enable-background:new 0 0 482.428 482.429;' xml:space='preserve'%3e%3cg%3e%3cg%3e%3cpath d='M381.163,57.799h-75.094C302.323,25.316,274.686,0,241.214,0c-33.471,0-61.104,25.315-64.85,57.799h-75.098 c-30.39,0-55.111,24.728-55.111,55.117v2.828c0,23.223,14.46,43.1,34.83,51.199v260.369c0,30.39,24.724,55.117,55.112,55.117 h210.236c30.389,0,55.111-24.729,55.111-55.117V166.944c20.369-8.1,34.83-27.977,34.83-51.199v-2.828 C436.274,82.527,411.551,57.799,381.163,57.799z M241.214,26.139c19.037,0,34.927,13.645,38.443,31.66h-76.879 C206.293,39.783,222.184,26.139,241.214,26.139z M375.305,427.312c0,15.978-13,28.979-28.973,28.979H136.096 c-15.973,0-28.973-13.002-28.973-28.979V170.861h268.182V427.312z M410.135,115.744c0,15.978-13,28.979-28.973,28.979H101.266 c-15.973,0-28.973-13.001-28.973-28.979v-2.828c0-15.978,13-28.979,28.973-28.979h279.897c15.973,0,28.973,13.001,28.973,28.979 V115.744z'/%3e%3cpath d='M171.144,422.863c7.218,0,13.069-5.853,13.069-13.068V262.641c0-7.216-5.852-13.07-13.069-13.07 c-7.217,0-13.069,5.854-13.069,13.07v147.154C158.074,417.012,163.926,422.863,171.144,422.863z'/%3e%3cpath d='M241.214,422.863c7.218,0,13.07-5.853,13.07-13.068V262.641c0-7.216-5.854-13.07-13.07-13.07 c-7.217,0-13.069,5.854-13.069,13.07v147.154C228.145,417.012,233.996,422.863,241.214,422.863z'/%3e%3cpath d='M311.284,422.863c7.217,0,13.068-5.853,13.068-13.068V262.641c0-7.216-5.852-13.07-13.068-13.07 c-7.219,0-13.07,5.854-13.07,13.07v147.154C298.213,417.012,304.067,422.863,311.284,422.863z'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e ");        
     background-color: #FB404B;
    }
```

```
<a class="action-btn delete">&nbsp;</a>
```

您可以在此处将您的 svg 转换为数据 url

1.  [https://codepen.io/elliz/full/ygvgay](https://codepen.io/elliz/full/ygvgay)
2.  [https://websemantics.uk/tools/svg-to-background-image-conversion/](https://websemantics.uk/tools/svg-to-background-image-conversion/)

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2018-06-06T20:17:41.530

由于 SVG 基本上是代码，因此您只需要内容。我使用 PHP 来获取内容，但你可以使用任何你想要的东西。

```
<?php
$content    = file_get_contents($pathToSVG);
?> 
```

然后，我在 div 容器中“按原样”打印内容

```
<div class="fill-class"><?php echo $content;?></div> 
```

最后在 CSS 上为容器的 SVG 子项设置规则

```
.fill-class > svg { 
    fill: orange;
} 
```

我用材质图标 SVG 得到了这个结果：

1.  Mozilla Firefox 59.0.2（64 位）Linux

[![在此处输入图像描述](../Images/398c7ee229ac0a1531266b2b1ed55d01.png)](https://i.stack.imgur.com/hny3K.jpg)

2.  Google Chrome66.0.3359.181 (Build 官方) (64 bits) Linux

[![在此处输入图像描述](../Images/bb7cb7e9eafe3a2d67203282596dfa2f.png)](https://i.stack.imgur.com/shBNk.jpg)

3.  Opera 53.0.2907.37 Linux

[![在此处输入图像描述](../Images/8c5873c577d5e46954ef576b80b53623.png)](https://i.stack.imgur.com/bcnwH.jpg)

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-06-08T06:15:40.960

如果您希望 jQuery 处理 DOM 中的所有 svg 元素并且您的 DOM 大小合理，那么所选的解决方案很好。但是如果你的 DOM 很大，并且你决定动态加载 DOM 的一部分，那么仅仅为了更新 svg 元素就必须重新扫描整个 DOM 是没有意义的。相反，请使用 jQuery 插件来执行此操作：

```
/**
 * A jQuery plugin that loads an svg file and replaces the jQuery object with its contents.
 *
 * The path to the svg file is specified in the src attribute (which normally does not exist for an svg element).
 *
 * The width, height and class attributes in the loaded svg will be replaced by those that exist in the jQuery object's
 * underlying html. Note: All other attributes in the original element are lost including the style attribute. Place
 * any styles in a style class instead.
 */
(function ($) {
    $.fn.svgLoader = function () {
        var src = $(this).attr("src");
        var width = this.attr("width");
        var height = this.attr("height");
        var cls = this.attr("class");
        var ctx = $(this);

        // Get the svg file and replace the <svg> element.
        $.ajax({
            url: src,
            cache: false
        }).done(function (html) {
            let svg = $(html);
            svg.attr("width", width);
            svg.attr("height", height);
            svg.attr("class", cls);
            var newHtml = $('<a></a>').append(svg.clone()).html();
            ctx.replaceWith(newHtml);
        });

        return this;
    };

}(jQuery)); 
```

在您的 html 中，指定一个 svg 元素，如下所示：

```
<svg src="images/someSvgFile.svg" height="45" width="45" class="mySVGClass"/> 
```

并应用插件：

```
$(".mySVGClass").svgLoader(); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-06-20T12:50:29.857

对于 :hover 事件动画，我们可以将样式留在 svg 文件中，例如

```
<svg xmlns="http://www.w3.org/2000/svg">
<defs>
  <style>
  rect {
    fill:rgb(165,225,75);
    stroke:none;
    transition: 550ms ease-in-out;
    transform-origin:125px 125px;
  }
  rect:hover {
    fill:rgb(75,165,225);
    transform:rotate(360deg);
  }
  </style>
</defs>
  <rect x='50' y='50' width='150' height='150'/>
</svg> 
```

[在 svgshare 上检查](https://svgshare.com/i/7Ac.svg)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-04-26T11:12:28.117

```
.carousel-control-prev-icon {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='rgb(3,122,247)' width='8' height='8' viewBox='0 0 8 8'%3e%3cpath d='M5.25 0l-4 4 4 4 1.5-1.5L4.25 4l2.5-2.5L5.25 0z'/%3e%3c/svg%3e");
} 
```

*   改变颜色： `fill='rgb(3,122,247)'`

# java - 通过eclipse中的文件夹灰色罢工

> ID：11978998
> 
> 赞同：1
> 
> 时间：2012-08-16T00:05:54.527
> 
> 标签：java, eclipse

我已经在这个项目上工作了一段时间。今天，通过一个项目（PhoneStreamingActivity）的文件夹出现了灰色罢工。为什么？我正在连接我项目的 jni 组件，并在它发生时在包之间移动一些文件。

![在此处输入图像描述](../Images/a742f0721ada53f459affd209fcbab82.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T02:38:41.137

从这个网站灰色条意味着方法已被弃用。也许文件夹中的某些内容已被弃用。

[http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/ref-icons.htm](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/ref-icons.htm)