# StackOverflow 问答 10519000-10519999

# objective-c - 在 Objective-C++ 中导入 Objective-C 标头？

> ID：10519002
> 
> 赞同：0
> 
> 时间：2012-05-09T15:16:19.453
> 
> 标签：objective-c, header-files, objective-c++

如何在 Objective-C++ 中导入 Objective-C 标头？

这是标题：

```
typedef struct _xmlDoc xmlDoc;
typedef struct _xmlNs xmlNs;
typedef struct _xmlAttr xmlAttr;
typedef struct _xmlNode {
    void* _field1;
    int _field2;
    char* _field3;
    struct xmlNode* _field4;
    struct xmlNode* _field5;
    struct xmlNode* _field6;
    struct xmlNode* _field7;
    struct xmlNode* _field8;
    xmlDoc* _field9;
    xmlNs* _field10;
    char* _field11;
    xmlAttr* _field12;
    xmlNs* _field13;
    void* _field14;
    unsigned short _field15;
    unsigned short _field16;
} xmlNode;

typedef struct _xmlDict xmlDict;
typedef struct _xmlDtd xmlDtd;
struct _xmlDoc {
    void* _field1;
    int _field2;
    char* _field3;
    struct xmlNode* _field4;
    struct xmlNode* _field5;
    struct xmlNode* _field6;
    struct xmlNode* _field7;
    struct xmlNode* _field8;
    struct xmlDoc* _field9;
    int _field10;
    int _field11;
    struct xmlDtd* _field12;
    struct xmlDtd* _field13;
    struct xmlNs* _field14;
    char* _field15;
    char* _field16;
    void* _field17;
    void* _field18;
    char* _field19;
    int _field20;
    struct xmlDict* _field21;
    void* _field22;
    int _field23;
    int _field24;
};

struct _xmlNs {
    struct xmlNs* _field1;
    int _field2;
    char* _field3;
    char* _field4;
    void* _field5;
    struct xmlDoc* _field6;
};

struct _xmlAttr {
    void* _field1;
    int _field2;
    char* _field3;
    struct xmlNode* _field4;
    struct xmlNode* _field5;
    struct xmlNode* _field6;
    struct xmlAttr* _field7;
    struct xmlAttr* _field8;
    struct xmlDoc* _field9;
    struct xmlNs* _field10;
    int _field11;
    void* _field12;
};

struct _xmlDtd;

struct _xmlDict;

typedef struct sqlite3 sqlite3;

typedef struct sqlite3_stmt sqlite3_stmt; 
```

编译我的项目时，它会引发以下错误：

```
Structs.h:49:3: error: typedef redefinition with different types ('struct _xmlNode' vs 'xmlNode')
} xmlNode;
  ^
Structs.h:36:9: note: previous definition is here
        struct xmlNode* _field4;
               ^
Structs.h:62:9: error: elaborated type refers to a typedef
        struct xmlDoc* _field9;
               ^
Structs.h:29:24: note: declared here
typedef struct _xmlDoc xmlDoc;
                       ^
Structs.h:65:9: error: elaborated type refers to a typedef
        struct xmlDtd* _field12;
               ^
Structs.h:52:24: note: declared here
typedef struct _xmlDtd xmlDtd;
                       ^
Structs.h:67:9: error: elaborated type refers to a typedef
        struct xmlNs* _field14;
               ^
Structs.h:30:23: note: declared here
typedef struct _xmlNs xmlNs;
                      ^
Structs.h:74:9: error: elaborated type refers to a typedef
        struct xmlDict* _field21;
               ^
Structs.h:51:25: note: declared here
typedef struct _xmlDict xmlDict;
                        ^
Structs.h:81:9: error: elaborated type refers to a typedef
        struct xmlNs* _field1;
               ^
Structs.h:30:23: note: declared here
typedef struct _xmlNs xmlNs;
                      ^
Structs.h:86:9: error: elaborated type refers to a typedef
        struct xmlDoc* _field6;
               ^
Structs.h:29:24: note: declared here
typedef struct _xmlDoc xmlDoc;
                       ^
Structs.h:96:9: error: elaborated type refers to a typedef
        struct xmlAttr* _field7;
               ^
Structs.h:31:25: note: declared here
typedef struct _xmlAttr xmlAttr;
                        ^
Structs.h:98:9: error: elaborated type refers to a typedef
        struct xmlDoc* _field9;
               ^
Structs.h:29:24: note: declared here
typedef struct _xmlDoc xmlDoc;
                       ^
Structs.h:99:9: error: elaborated type refers to a typedef
        struct xmlNs* _field10;
               ^
Structs.h:30:23: note: declared here
typedef struct _xmlNs xmlNs; 
```

这不是因为标题是用Objective-C编写的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:32:09.650

是的，问题是你没有定义任何 type `struct xmlNode`。你有一个 type`struct _xmlNode`和一个 type `xmlNode`，但没​​有`struct xmlNode`。`struct xmlNode`您可以用`xmlNode`或替换所有实例`struct _xmlNode`。

# html - 十六进制颜色，可能的组合

> ID：10519004
> 
> 赞同：0
> 
> 时间：2012-05-09T15:16:35.493
> 
> 标签：html, css, colors, hex

所以我在 html 和 css 中使用了十六进制颜色：`#000000`和`#000`，以及 alpha 变量`#00000000`

这为我们提供了 6 个字符、3 个字符和 8 个字符的十六进制版本。

按理说 3 个字符的版本也可以有一个 alpha 变量，使 5 个字符的版本看起来像`#00000`. 这是否存在并得到认可？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:18:49.867

从规格

> 与 RGB 值不同，RGBA 值没有十六进制表示法。

[http://www.w3.org/TR/css3-color/](http://www.w3.org/TR/css3-color/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:18:21.497

如果它确实存在，那将是一个四字符长的字符——为什么 alpha 通道应该得到八位，而其他通道只有四位？

我不相信它被支持。请注意，我见过的唯一可以识别的地方`#aarrggbb`是 IE 的过滤器属性...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T17:45:35.230

从 html/css 的角度回答这个问题——正如其他人所指出的，这在 CSS3 中不受支持。

也就是说，由于这个问题也被标记为“颜色”和“十六进制”，我确实想指出，Android 当前支持#AARRGGBB 格式，用于在其布局 xml 属性中使用并解析为 Color 对象。我以前在那里使用过它并取得了巨大的成功。

[http://developer.android.com/reference/android/graphics/Color.html#parseColor](http://developer.android.com/reference/android/graphics/Color.html#parseColor)

本文档显示 #RRGGBB 和 #AARRGGBB 是唯一受支持的十六进制表示。但是，我记得在过去的某个时候使用过#RGB，所以我认为#ARGB 也可以正常工作（与您最初假设的#AARGB 不同）。

如果您曾经在 Android 上尝试过，请务必告诉我结果！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T15:19:58.217

我一直不得不使用 rgba(255, 255, 255, 1.0) 来利用 alpha 通道。从未见过它在#ffffffff 语法中成功使用过。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T15:18:51.133

不。此外，它不是五位十六进制代码，而是四位十六进制代码，就像`#0000` **它**存在一样。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T15:26:15.607

目前是不可能的。在 www-style@w3.org 邮件列表上有一个相关的[讨论](http://lists.w3.org/Archives/Public/www-style/2011Sep/0048.html)，我提出了以下方便的语法：

*   `#cad8d9.0`— 零不透明度；
*   `#cad8d9.27`— 27% 不透明度；
*   `#cad8d9.275`— 27.5% 不透明度；
*   `#cad8d9`— 100% 不透明度（完全不需要不透明度组件，只使用常规十六进制值）。

但这已被拒绝（不幸的是，许多第三方的想法）。

# embedded-linux - 从截断的嵌入式 linux (arm) 核心转储中获取断言信息

> ID：10519005
> 
> 赞同：2
> 
> 时间：2012-05-09T15:16:36.153
> 
> 标签：embedded-linux, coredump

我没有足够的闪存空间在基于 OMAPL168 的便携式设备上存储完整的 linux 核心转储，但我特别想获得基本的断言参数（文件名、行号、断言测试）。此信息包含在完整的核心转储中，但似乎位于 5Meg 转储末尾附近的某个位置。我希望能够指定减小大小的核心转储的所需内容，因为 ulimit -cx 只会导致为您提供二进制文件的第一个 xK。任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T18:40:52.643

为什么不完全跳过核心转储，并有意将日志记录到文件或远程串行/网络监视器？

或者安装一个网络文件系统、USB 记忆棒甚至是一个 spi 模式的 SD 卡，然后设置核心转储到那里。

# c++ - QWidget::setLayout: 试图在 Widget "" 上设置 QLayout ""，它已经有一个布局

> ID：10519006
> 
> 赞同：15
> 
> 时间：2012-05-09T15:16:36.740
> 
> 标签：c++, qt, layout, widget

我正在尝试通过代码（而不是在 Designer 中）手动设置小部件的布局，但我做错了，因为我收到了以下警告：

> QWidget::setLayout: 试图在 Widget "" 上设置 QLayout ""，它已经有一个布局

而且布局也很混乱（标签在顶部，而不是底部）。

这是重现问题的示例代码：

```
Widget::Widget(QWidget *parent) :
    QWidget(parent)
{
    QLabel *label = new QLabel("Test", this);
    QHBoxLayout *hlayout = new QHBoxLayout(this);
    QVBoxLayout *vlayout = new QVBoxLayout(this);
    QSpacerItem *spacer = new QSpacerItem(40, 20, QSizePolicy::Fixed);
    QLineEdit *lineEdit = new QLineEdit(this);
    hlayout->addItem(spacer);
    hlayout->addWidget(lineEdit);
    vlayout->addLayout(hlayout);
    vlayout->addWidget(label);
    setLayout(vlayout);
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-09T16:02:23.223

所以我相信你的问题出在这一行：

```
QHBoxLayout *hlayout = new QHBoxLayout(this); 
```

特别是，我认为问题正在传递`this`到`QHBoxLayout`. 因为您`QHBoxLayout`不希望它成为 的顶级布局`this`，所以您不应该传递`this`给构造函数。

这是我的重写，我在本地侵入了一个测试应用程序，并且似乎工作得很好：

```
Widget::Widget(QWidget *parent) :
    QWidget(parent)
{
    QLabel *label = new QLabel("Test");
    QHBoxLayout *hlayout = new QHBoxLayout();
    QVBoxLayout *vlayout = new QVBoxLayout();
    QSpacerItem *spacer = new QSpacerItem(40, 20, QSizePolicy::Fixed);
    QLineEdit *lineEdit = new QLineEdit();
    hlayout->addItem(spacer);
    hlayout->addWidget(lineEdit);
    vlayout->addLayout(hlayout);
    vlayout->addWidget(label);
    setLayout(vlayout);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T15:51:43.417

问题是您正在使用`this`. 当你这样做时，它会将布局设置为`this`. 因此，调用 是多余的`setMainLayout()`。

# asp.net-mvc - 如何转换此 IQueryable 到数据库集 ?

> ID：10519008
> 
> 赞同：6
> 
> 时间：2012-05-09T15:16:41.453
> 
> 标签：asp.net-mvc, entity-framework, .net-4.0

这应该很简单，但我在 IF 块内的线路上被绊倒了。该行的错误是

> “无法将类型 'System.Linq.IQueryable[Patient]' 隐式转换为 'System.Data.Entity.DbSet[Patient]'。存在显式转换（您是否缺少演员表？）”

我尝试在无济于事后附加各种扩展名（`AsQueryable()`, `ToList()`, `AsEnumerable()`, 等） 。`.Contains()`

我在这里想念什么？该项目是使用 MVC 4 Beta 和 EF4 构建的

```
public ActionResult SearchIndex(string searchString)
{
    var patients = this.db.Patients;

    if (!String.IsNullOrEmpty(searchString))
    {
        patients = patients.Where(p => p.LastName.Contains(searchString));
    }

    return View(patients.ToList());

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T15:21:48.250

明确声明患者为`IQueryable<Patient>`

```
IQueryable<Patient> patients = this.db.Patients; 
```

或调用`AsQueryable`它：

```
var patients = this.db.Patients.AsQueryable(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T15:21:32.473

您可以更改类型`patients`以使其正常工作：

```
IQueryable<Patient> patients = this.db.Patients; 
```

# python - 一个 HTML 文件中的类属性重复

> ID：10519010
> 
> 赞同：0
> 
> 时间：2012-05-09T15:16:43.207
> 
> 标签：python, python-sphinx

我正在帮助使用 sphinx 记录软件项目。我们希望在一个 HTML 文件中涵盖 13 个类。这很方便。

我的问题：某些类具有相同名称的属性（请参阅下面两个类中的“宽度”和“重量”）。在生成的 HTML 文档文件中，单击属性“width”将始终跳转到 HTML 锚点“#width”，而不管我正在查看的类是什么。

有没有办法让 sphinx 生成唯一的锚名称？

```
:mod:`GSFontMaster`
===============================================================================

Implementation of the master object. This corresponds more or less with the "Masters" pane in the Font Info.

In Glyphs.app the glyphs of each master are reachable not here, but as :class:`Layers <GSLayer>` attached to the :class:`Glyphs <GSGlyph>` attached to the :class:`Font <GSFont>` object. See info graphic on top for better understanding.

.. class:: GSFontMaster

.. autosummary::

    name
    id
    weight
    width
    weightValue
    widthValue
    custom
    customValue
    ascender
    capHeight
    xHeight
    descender
    italicAngle
    verticalStems
    horizontalStems
    alignmentZones
    guideLines
    userData
    customParameters

----------
Properties
----------

.. attribute:: id

    Used to identify :class:`GSLayer <Layer>` in the Glyph

    :type: unicode

.. attribute:: name

    :type: string

.. attribute:: weight

    :type: string

.. attribute:: width

    :type: string

.. attribute:: weightValue

    Values for interpolation in design space.

    :type: float

.. attribute:: widthValue

    Values for interpolation in design space.

    :type: float

.. attribute:: custom

    :type: string

.. attribute:: customValue

    Values for interpolation in design space.

.. attribute:: ascender

    :type: float

.. attribute:: capHeight

    :type: float

.. attribute:: xHeight

    :type: float

.. attribute:: descender

    :type: float

.. attribute:: italicAngle

    :type: float

.. attribute:: verticalStems

    List of vertical stem values

    :type: list

.. attribute:: horizontalStems

    List of horizontal stem values

    :type: list

.. attribute:: alignmentZones

    Collection of :class:`GSAlignmentZone <GSAlignmentZone>`.

    :type: list

.. attribute:: guideLines

    Collection of :class:`GSGuideLine <GSGuideLine>`.

    :type: list

.. attribute:: userData

    A dictionary to store user data. Use a unique Key and only use object that can be stored in a Property list (string, list, dict, numbers, NSData) otherwise the date will not be recoverable from the saved file.

    :type: dict

.. attribute:: customParameters

    A dictionary of custom parameters

    :type: dict

:mod:`GSInstance`
===============================================================================

Implementation of the instance object. This corresponds more or less with the "Instances" pane in the Font Info.

.. class:: GSInstance

.. autosummary::

    active
    name
    weight
    width
    weightValue
    widthValue
    isItalic
    isBold
    linkStyle
    customParameters

----------
Properties
----------

.. attribute:: active

    :type: bool

.. attribute:: name

    :type: string

.. attribute:: weight

    :type: string

.. attribute:: width

    :type: string

.. attribute:: weightValue

    Values for interpolation in design space.

    :type: float

.. attribute:: widthValue

    Values for interpolation in design space.

    :type: float

.. attribute:: isItalic

    Italic flag for style linking

    :type: bool

.. attribute:: isBold

    Bold flag for style linking

    :type: bool

.. attribute:: linkStyle

    Linked style

    :type: string

.. attribute:: customParameters

    A dictionary of custom parameters

    :type: dict 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T20:08:29.737

您必须添加类`width`名：所以属性`GSFontMaster`应该如下所示：

```
.. attribute:: GSFontMaster.width

    :type: string 
```

（自动摘要条目必须根据完整的属性名称进行调整。）

# python - Beautifulsoup findall

> ID：10519025
> 
> 赞同：5
> 
> 时间：2012-05-09T15:17:47.003
> 
> 标签：python, xml, beautifulsoup

我有一些xml：

```
<article>
<uselesstag></uslesstag>
<topic>oil, gas</topic>
<body>body text</body>
</article>

<article>
<uselesstag></uslesstag>
<topic>food</topic>
<body>body text</body>
</article>

<article>
<uselesstag></uslesstag>
<topic>cars</topic>
<body>body text</body>
</article> 
```

有很多很多无用的标签。我想使用beautifulsoup 来收集正文标签中的所有文本及其相关的主题文本，以创建一些新的xml。

我是 python 新手，但我怀疑某种形式的

```
import arff
from xml.etree import ElementTree
import re
from StringIO import StringIO

import BeautifulSoup
from BeautifulSoup import BeautifulSoup

totstring=""

with open('reut2-000.sgm', 'r') as inF:
    for line in inF:
        string=re.sub("[^0-9a-zA-Z<>/\s=!-\"\"]+","", line)
    totstring+=string

soup = BeautifulSoup(totstring)

body = soup.find("body")

for anchor in soup.findAll('body'):
    #Stick body and its topics in an associated array?

file.close 
```

将工作。

1）我该怎么做？2) 我应该向 XML 添加根节点吗？否则它不是正确的 XML 是吗？

非常感谢

编辑：

我想要结束的是：

```
<article>
<topic>oil, gas</topic>
<body>body text</body>
</article>

<article>
<topic>food</topic>
<body>body text</body>
</article>

<article>
<topic>cars</topic>
<body>body text</body>
</article> 
```

有很多很多无用的标签。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T15:49:14.227

行。这是解决方案，

首先，确保您安装了“beautifulsoup4”：[http ://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-beautiful-soup](http://www.crummy.com/software/BeautifulSoup/bs4/doc/#installing-beautiful-soup)

这是我获取所有正文和主题标签的代码：

```
from bs4 import BeautifulSoup
html_doc= """
<article>
<topic>oil, gas</topic>
<body>body text</body>
</article>

<article>
<topic>food</topic>
<body>body text</body>
</article>

<article>
<topic>cars</topic>
<body>body text</body>
</article>
"""
soup = BeautifulSoup(html_doc)

bodies = [a.get_text() for a in soup.find_all('body')]
topics = [a.get_text() for a in soup.find_all('topic')] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T16:51:45.373

另一种删除空 xml 或 html 标签的方法是使用递归函数来搜索空标签并使用 .extract() 删除它们。这样，您不必手动列出要保留的标签。它还可以清除嵌套的空标签。

```
from bs4 import BeautifulSoup
import re
nonwhite=re.compile(r'\S+',re.U)

html_doc1="""
<article>
<uselesstag2>
<uselesstag1>
</uselesstag1>
</uselesstag2>
<topic>oil, gas</topic>
<body>body text</body>
</article>

<p>21.09.2009</p> 
<p> </p> 
<p1><img src="http://www.www.com/"></p1> 
<p></p> 

<!--- This article is about cars--->
<article>
<topic>cars</topic>
<body>body text</body>
</article>
"""

def nothing_inside(thing):
    # select only tags to examine, leave comments/strings
    try:
        # check for img empty tags
        if thing.name=='img' and thing['src']<>'':
            return False
        else:
            pass
        # check if any non-whitespace contents
        for item in thing.contents:
            if nonwhite.match(item):
                return False
            else:
                pass
        return True
    except:
        return False

def scrub(thing):
    # loop function as long as an empty tag exists
    while thing.find_all(nothing_inside,recursive=True) <> []:
        for emptytag in thing.find_all(nothing_inside,recursive=True):
            emptytag.extract()
            scrub(thing)
    return thing

soup=BeautifulSoup(html_doc1)
print scrub(soup) 
```

结果：

```
<article>

<topic>oil, gas</topic>
<body>body text</body>
</article>
<p>21.09.2009</p>

<p1><img src="http://www.www.com/"/></p1>

<!--- This article is about cars--->
<article>
<topic>cars</topic>
<body>body text</body>
</article> 
```

# visual-studio-2010 - 同时处理不同的分支

> ID：10519027
> 
> 赞同：0
> 
> 时间：2012-05-09T15:17:47.577
> 
> 标签：visual-studio-2010, git, git-extensions

我的解决方案在 GIT 中有两个分支。一个是 X 分支，另一个是 master。两个分支（本地）都指向相同的位置（物理文件是 c:\Git\Myproject）。我想在 diff VS 解决方案中同时使用这些分支。但是，当我在其中一个 VS 解决方案中更改分支时，我的其他 VS 解决方案的分支发生了更改，并且两个解决方案都指向同一个分支。我怎样才能防止这种情况？我想一次与不同的分支机构合作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:46:54.697

解决方案是使用`git-new-worktree`contrib 脚本根据需要创建尽可能多的工作树（工作目录）。然后，在它们中的每一个中，您都可以查看您想要的任何分支。

我不知道它是否适用于 Windows，而且我非常有信心您提到的围绕 Git 的 GUI 包装器不支持调用该脚本，因此您必须进行一些研究。

# opengl - 透明 OpenGL FB 背景增加 Xorg CPU 负载？

> ID：10519029
> 
> 赞同：0
> 
> 时间：2012-05-09T15:17:57.660
> 
> 标签：opengl, background, x11, transparent, compiz

我正在使用[这种方法](https://stackoverflow.com/a/9215724/44729)使我的 OpenGL 应用程序的背景透明（与 Compiz 合作）。

它运行完美，但我认识到一个事实：只要我的应用程序打开透明窗口（无论是否完成任何 OpenGL 绘图），Xorg 进程 CPU 负载都会增加到 ~30%。

谁能解释这种行为？我在想这种方法绕过了Xserver，整个处理都是由显卡完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T18:50:46.960

> 谁能解释这种行为？我在想这种方法绕过了Xserver，整个处理都是由显卡完成的？

X 服务器没有被规避，只是使用了它的其他部分。合成的问题是，窗口内容被表示为 X 可绘制对象（像素图），由 X 服务器管理。为了合成它，X 服务器必须根据合成器的请求执行到纹理的传输。这可能会导致一些管理开销，从而导致性能下降。

此外，大多数合成器的代码也很糟糕（就像编写 Compiz/Metacity/KWin 的人完全不知道 OpenGL 和 GPU 是如何工作的一样）。这是我的 TODO 列表中的项目之一（编写一个体面的合成器，它没有被切除）。

# jquery - 在指定位置插入文本（即在 100 个字符后 ，添加“阅读更多”）

> ID：10519030
> 
> 赞同：0
> 
> 时间：2012-05-09T15:17:59.360
> 
> 标签：jquery

问题标题总结了它，我不知道如何详细说明。在任何人提到 CSS3 属性之前，`text-overflow:ellipsis`我不能使用它，因为当包含的 div 中有几个`<p>`s 时它不起作用。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:22:43.223

```
$('p').each(function() {
    var txt = $(this).text();
    if (txt.length>100) {
        $(this).text(txt.substring(0,100)+'...');
    }
}); 
```

[小提琴](http://jsfiddle.net/adeneo/bh3ug/)

或者可能 ：

```
$('p').each(function() {
    var txt = $(this).text();
    if (txt.length>100) {
        $(this).html('<span>'+txt.substring(0,100)+'&nbsp;&nbsp;</span><a href="somemore">Read More</a>');
    }
}); 
```

[小提琴](http://jsfiddle.net/adeneo/bh3ug/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:20:12.130

我为此写了一个插件。我不再维护它了，但它应该仍然有效：http: [//www.jeremymartin.name/projects.php?project=jTruncate](http://www.jeremymartin.name/projects.php?project=jTruncate)

# c# - 字符串到字节数组转换c#

> ID：10519031
> 
> 赞同：0
> 
> 时间：2012-05-09T15:17:59.517
> 
> 标签：c#, asp.net, sql

我今天问了太多问题，但我还有一个问题。我正在尝试将图像保存到我的数据库中。我无法解决问题。当我尝试添加图像时，它说参数字符串无法转换为 BYTE []。实际上我将字节 [] 作为参数值。我试图解决，但我找不到任何答案，也许你可以帮助我。这是我的代码：

```
 Stream fs = FileUpload1.PostedFile.InputStream;
        BinaryReader br = new BinaryReader(fs);
        Byte[] bytes = br.ReadBytes((Int32)fs.Length);

        //insert the file into database
        string strQuery = "INSERT INTO Books(Book_Name, Author_Name, Image,In_Lib) VALUES (@BN, @AN, @IM,@LIB)";
        SqlCommand cmd = new SqlCommand(strQuery);
        string val1 = "" + TextBox1.Text;
        string val2 = "" + TextBox2.Text;
        cmd.Parameters.Add("@BN", SqlDbType.VarChar).Value = val1;
        cmd.Parameters.Add("@AN", SqlDbType.VarChar).Value= val2;
        cmd.Parameters.Add("@IM", SqlDbType.Binary).Value = bytes;
        cmd.Parameters.Add("@LIB", SqlDbType.Binary).Value = "NO";
        InsertUpdateData(cmd);
        lblMessage.ForeColor = System.Drawing.Color.Green;
        lblMessage.Text = "File Uploaded Successfully"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:20:19.170

此行无效：

```
cmd.Parameters.Add("@LIB", SqlDbType.Binary).Value = "NO"; 
```

根据您的 SQL，您似乎打算在那里使用 varchar。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T15:21:24.160

您已将字符串`"NO"`作为`Binary`参数的值传递`@LIB`：

```
cmd.Parameters.Add("@LIB", SqlDbType.Binary).Value = "NO"; 
```

我想那是你的问题。

# windows - Windows 'for' 脚本

> ID：10519032
> 
> 赞同：0
> 
> 时间：2012-05-09T15:18:05.447
> 
> 标签：windows, batch-file

我希望编写一个批处理文件，该文件采用当前的 IP/子网/网关/DNS 并对其进行静态设置（XP 及更高版本）。即使它已经是静态的，我在网上找到了一个脚本，但我需要找到当前 IP 信息的部分。如果适配器总是被命名为“本地连接”我会很好，但不是。任何人都可以帮忙吗？

```
@ECHO OFF

set varip=
set varsm=
set vargw=
set vardns1=
set vardns2=
set varhome=

ECHO Setting IP Address and Subnet Mask
netsh int ip set address name = "Local Area Connection" source = static addr = %varip% mask = %varsm%

ECHO Setting Gateway
netsh int ip set address name = "Local Area Connection" gateway = %vargw% gwmetric = 1

ECHO Setting Primary DNS
netsh int ip set dns name = "Local Area Connection" source = static addr = %vardns1%

ECHO Setting Secondary DNS
netsh int ip add dns name = "Local Area Connection" addr = %vardns2%

rem ECHO Here are the new settings for %computername%:
rem netsh int ip show config

pause 
```

谢谢，

埃里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T04:22:04.313

```
@ECHO OFF

ipconfig /all | findstr Ethernet | findstr IP Address | find str ( the first digit of your ip normally " 1 " ) > IP.txt

ipconfig /all | findstr Ethernet | findstr Subnet | find str ( the first digit of your subnet normally " 2 " ) > SUBNET.txt

ipconfig /all | findstr Ethernet | findstr Primary DNS | find str ( the first digit of your dns normally " 1 " ) > dns1.txt

ipconfig /all | findstr Ethernet | findstr Secondary DNS | find str ( the first digit of your dns normally " 1 " ) > .txt

 ipconfig /all | findstr Ethernet | findstr Default Gateway | find str ( the first digit of your gateway normally " 1 " ) > gateway.txt

 ipconfig /all | findstr Ethernet | findstr ISP | find str ( the first digit of your ISP normally " 1 " ) > home.txt

set ip=for /f "delims= " in ( IP.txt ) do ( set varip=IP.txt )
set sm=for /f "delims= " in ( SUBNET.txt ) do ( set varip=SUBNET.txt )
set gw=for /f "delims= " in ( gateway.txt ) do ( set varip=gateway.txt )
set dns1=for /f "delims= " in ( dns1.txt ) do ( set varip=dns1.txt )
set dns2=for /f "delims= " in ( dns2.txt ) do ( set varip=dns2.txt )
set home=for /f "delims= " in ( home.txt ) do ( set varip=home.txt )

ECHO Setting IP Address and Subnet Mask
netsh int ip set address name = "Local Area Connection" source = static addr = %varip%  mask     = %varsm%

ECHO Setting Gateway
netsh int ip set address name = "Local Area Connection" gateway = %vargw% gwmetric = 1

ECHO Setting Primary DNS
netsh int ip set dns name = "Local Area Connection" source = static addr = %vardns1%

ECHO Setting Secondary DNS
netsh int ip add dns name = "Local Area Connection" addr = %vardns2%

pause 
```

# java - 如何在播放框架中获得预定作业的结果？

> ID：10519040
> 
> 赞同：1
> 
> 时间：2012-05-09T15:18:19.197
> 
> 标签：java, playframework, scheduled-tasks, playframework-1.x

我安排了一个每隔几分钟运行一次的工作，但是当它完成后我如何得到这个工作的结果呢？

该作业从数据库中获取数据并返回结果。

由于只`Job.in()`返回`Job.now()`一个`promise`结果，我如何从每隔几分钟运行的计划作业中获取它。

我在用`playframework 1.2.5Rc1`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:21:38.003

您将不得不将结果存储在其他地方。然后，您可以在需要时查看结果。从计划的作业中“返回”结果并没有真正意义，因为您从未真正参考过它们。API 可以为第一个预定作业返回一个承诺，但这会使所有其他预定作业一无所知。

您可以做的一件事是让计划的作业将结果推送到[BlockingQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html)中。然后在代码的其他地方，您可以调用`take()`阻塞的方法，直到它可以将某些内容从队列中拉出。这有点像一个不断补充的承诺。它还可以让队列填满，而无需担心立即处理每个结果。

# php - 尝试从 PHP 执行 C 程序并输出到 Web 浏览器

> ID：10519041
> 
> 赞同：2
> 
> 时间：2012-05-09T15:18:19.820
> 
> 标签：php, linux

我有一个已编译为可执行文件的 C 程序。我可以从我的控制台运行这个程序。我试图通过我的网络浏览器获取该程序的输出，所以我在 PHP 中使用 exec 命令。当我从命令行执行它时，我的 PHP 脚本运行良好，但是当我通过浏览器调用它时，我没有得到任何输入。这是我的 PHP 程序

```
 <?php
    echo  exec('/var/www/html/./readcard');
    ?> 
```

readcard 程序有 777 个权限。我猜这个问题与权限有关？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:21:44.490

您没有捕获输出。to 的第二个参数[`exec`](http://php.net/manual/en/function.exec.php)由一个数组组成，输出行将被放置到该数组中。

```
<?php
$output=array();
$rv=0;
exec('/var/www/html/./readcard',$output,$rv);

if($rv!=0)
{
  die("readcard failed, got a return value of $rv\n");
}

foreach($output as $line)
{
  echo("<p>$line</p>\n");
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:20:43.557

您可能只是回显脚本的返回码，该码为零。您可以将输出重定向到一个文件，然后从 php 提供该文件，或者将输出流直接通过管道传回 php 代码。

尝试

```
<?php
    $output = array();
    exec('/var/www/html/./readcard', &$output);
?> 
```

# .htaccess - Windows 主机中的重定向规则

> ID：10519052
> 
> 赞同：0
> 
> 时间：2012-05-09T15:18:53.003
> 
> 标签：.htaccess, iis

我有一个由 goddady 托管的寡妇机器，我需要创建一个规则来转发任何带有指向不存在文件的 URL 的请求，以发送到 index.php。通常我会使用 .htaccess 来做到这一点，但它在 Windows 主机中有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:15:35.910

我找到了答案。我必须在根目录中放置一个名为“web.conf”的 xml 文件，它的工作方式与 .htaccess 相同。我从[ZendFramework 站点获取了规则](http://framework.zend.com/manual/en/project-structure.rewrite.html)

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <rewrite>
            <rules>
                <rule name="Imported Rule 1" stopProcessing="true">
                    <match url="^.*$" />
                    <conditions logicalGrouping="MatchAny">
                        <add input="{REQUEST_FILENAME}"
                             matchType="IsFile" pattern=""
                             ignoreCase="false" />
                        <add input="{REQUEST_FILENAME}"
                             matchType="IsDirectory"
                             pattern=""
                             ignoreCase="false" />
                    </conditions>
                    <action type="None" />
                </rule>
                <rule name="Imported Rule 2" stopProcessing="true">
                    <match url="^.*$" />
                    <action type="Rewrite" url="index.php" />
                </rule>
            </rules>
        </rewrite>
    </system.webServer>
</configuration> 
```

此规则将使服务器检查文件是否存在，如果不存在，则将请求转发到 index.php

# http - 为什么在 RESTful 调用中使用 HTTP GET 更新服务器上的状态不正确？

> ID：10519064
> 
> 赞同：9
> 
> 时间：2012-05-09T15:19:18.610
> 
> 标签：http, rest, post, get, restful-architecture

好的，我已经知道为什么在进行 RESTful 调用以更新服务器上某些内容的状态时不应该使用 HTTP GET 的***所有****原因*。因此每次返回可能不同的数据。而且我知道这是错误的，原因如下：

*   HTTP GET 调用应该是幂等的
*   N > 0 调用应始终返回相同的数据
*   违反 HTTP 规范
*   HTTP GET 调用通常是只读的

我相信还有更多的原因。但我需要一个具体的简单示例来证明，而不是“嗯，这违反了 HTTP 规范！”。...或者至少我希望有一个。我也已经阅读了以下内容，这些内容与上面列表中的内容更相似：[当我在 GET 调用上向服务器写入内容时，它是否违反了 RESTful？](https://stackoverflow.com/questions/9408472/does-it-violate-the-restful-when-i-write-stuff-to-the-server-on-a-get-call)& [HTTP POST 带有 URL 查询参数——好主意还是不好？](https://stackoverflow.com/questions/611906/http-post-with-url-query-parameters-good-idea-or-not)

例如，有人可以通过以下 RESTful 调用来证明上述内容以及为什么使用 HTTP GET 是错误的/不好的做法/不正确的

```
"MyRESTService/GetCurrentRecords?UpdateRecordID=5&AddToTotalAmount=10" 
```

我知道这是错误的，但希望它有助于提供一个例子来回答我原来的问题。所以上面会用 AddToTotalAmount = 10 更新 recordID = 5 然后返回更新的记录。我知道*应该*使用 POST，但假设我确实使用了 GET。

如何*准确*地回答我的问题，或者这会导致*实际*问题吗？除了上述项目符号列表中的所有违规行为之外，使用 HTTP GET 执行上述操作如何导致一些实际问题？太多次我遇到这样一种情况，我可以用“因为医生这么说”来证明事情的合理性，但我需要证明和更好地理解这一点。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-09T15:28:04.893

您会遇到问题的实际情况是，在 HTTP 实现失败的情况下，通常会重试 HTTP GET。因此，您可以在现实生活中遇到服务器多次接收相同 GET 的情况。如果您的更新是幂等的（您的更新是幂等的），那么就不会有问题，但如果它不是幂等的（例如为金额添加一些值），那么您可能会获得多个（不希望的）更新。

HTTP POST 永远不会重试，所以你永远不会遇到这个问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T15:48:02.600

如果某种形式的搜索引擎蜘蛛您的网站，它可能会无意中更改您的数据。

这发生在过去的谷歌桌面搜索中，导致人们丢失数据，因为人们将删除操作作为 GET 实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T19:42:07.450

这是一个重要原因，即 GET 应该是幂等的，而不是用于在跨站点请求伪造攻击方面更新服务器上的状态。出自本书：[专业的 ASP.NET MVC 3](https://rads.stackoverflow.com/amzn/click/com/1118076583)

> **幂等 GET**
> 肯定是个大词——但这是一个简单的概念。如果一个操作是幂等的，它可以被执行多次而不改变结果。一般来说，一个好的经验法则是，您可以通过使用 POST 仅更改数据库或站点中的内容来防止一整类 CSRF 攻击。这意味着注册、注销、登录等。至少，这在一定程度上限制了迷惑副手的攻击。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-25T13:55:00.530

还有一个问题。如果使用 GET 方法，数据将在 URL 本身中发送。在 Web 服务器的日志中，这些数据与请求路径一起保存在服务器的某处。现在假设如果有人可以访问/读取这些日志文件，您的数据（可以是用户 ID、密码、关键字、令牌等）就会被泄露。这是危险的，必须加以注意。

在服务器的日志文件中，不记录标头和正文，但请求路径为 . 因此，在 POST 方法中，数据在正文中发送，而不是在请求路径中，您的数据仍然是安全的。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-09T15:33:22.373

i think that reading this resource: [http://www.servicedesignpatterns.com/WebServiceAPIStyles](http://www.servicedesignpatterns.com/WebServiceAPIStyles) could be helpful to you to make difference between message API and resource api ?

# android - 在 Android 的 WebView 中播放高清视频

> ID：10519066
> 
> 赞同：1
> 
> 时间：2012-05-09T15:19:23.180
> 
> 标签：android, video, webview

当我在具有高清输出的设备上的应用程序的 Web 视图中播放 HTML5 视频时，与在 Android 的默认浏览器中播放的相同视频相比，它要模糊得多。

我已经在我的应用程序/webwiew 中使用了属性`hardwareAccelerated="true"`、、、`setPluginState(PluginState.ON)`等。`setPluginsEnabled(true)`

高清视频有什么特殊设置吗？

# iphone - 如何更改 UITabbarItem 的文本颜色以及如何在 iPhone 应用程序中添加自定义 TabBar？

> ID：10519068
> 
> 赞同：0
> 
> 时间：2012-05-09T15:19:29.143
> 
> 标签：iphone, ios, uitabbarcontroller, uitabbar

我想`UITabBar`在 iPhone 应用程序中加载不同的自定义以及如何将自定义彩色图像放入`UITabBar`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:23:27.977

试试[这个](http://ios-blog.co.uk/articles/tutorials/how-to-customize-the-tab-bar-using-ios-5-appearance-api/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:29:43.863

如果您愿意，您可以更改标签栏的背景图像。

像这样：

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController{
  NSUInteger index=[[tabBarController viewControllers] indexOfObject:viewController];
  switch (index) {
    case 0:{
        [_tabBar.tabBar setBackgroundImage:[UIImage imageNamed:@"Image1.png"]];
      break;
    }
    case 1:{
        [_tabBar.tabBar setBackgroundImage:[UIImage imageNamed:@"Image2.png"];
      break;
    }
    case 2:{
        [_tabBar.tabBar setBackgroundImage:[UIImage imageNamed:@"Image3.png"];
      break;
    }
    default:
      break;
  }
  return YES;
} 
```

# c# - 在 WCF REST 4 中是否可以将 HTML 作为响应格式之一返回

> ID：10519075
> 
> 赞同：11
> 
> 时间：2012-05-09T15:19:53.760
> 
> 标签：c#, wcf, rest

我正在编写一项服务，旨在供多个调用者使用，包括无法接收或解析 XML 或 JSON 的调用者。

我知道可以使用原始流从服务响应中返回 HTML，但我希望能够根据客户端传递的 Accepts-Type 标头返回 XML、JSON 或 HTML 之一。

我可以使用单独的 URL 来完成，但这正在替换一个已经具有良好定义的 API 层的系统。

有没有这样做的例子，或者有谁知道管道的哪些部分需要扩展？

（附录）：我已经了解 AutomaticFormatSelection 并已启用它，但我想从单个端点支持所有三种（或更多）格式（HTML、JSON、XML 等）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-12T14:56:23.773

是的，这是可能的。但是您需要创建一个新的*消息格式化程序*，它知道如何在 CLR 类型（操作响应）和 HTML 页面之间进行转换。最简单的方法是将原始格式化程序包装在新的格式化程序中，因此当您收到请求的响应时，`Accept: text/html`您使用您的逻辑，但对于其他请求，您使用原始格式化程序。

但是，格式化程序无法访问传入的请求，因此我们也可以使用消息检查器来提供它。

下面的代码显示了这种格式化程序/检查器对的一种可能实现。

```
public class StackOverflow_10519075
{
    [DataContract(Name = "Person", Namespace = "")]
    public class Person
    {
        [DataMember]
        public string Name { get; set; }
        [DataMember]
        public int Age { get; set; }
    }
    [ServiceContract]
    public interface ITest
    {
        [WebGet]
        Person GetPerson();
    }
    public class Service : ITest
    {
        public Person GetPerson()
        {
            return new Person { Name = "John Doe", Age = 33 };
        }
    }
    public class MyHtmlAwareFormatter : IDispatchMessageFormatter
    {
        IDispatchMessageFormatter original;
        public MyHtmlAwareFormatter(IDispatchMessageFormatter original)
        {
            this.original = original;
        }

        public void DeserializeRequest(Message message, object[] parameters)
        {
            this.original.DeserializeRequest(message, parameters);
        }

        public Message SerializeReply(MessageVersion messageVersion, object[] parameters, object result)
        {
            MyUseHtmlExtension useHtml = OperationContext.Current.Extensions.Find<MyUseHtmlExtension>();
            if (useHtml != null && useHtml.UseHtmlResponse)
            {
                StringBuilder sb = new StringBuilder();
                sb.AppendLine("<html><head><title>Result of " + useHtml.OperationName + "</title></head>");
                sb.AppendLine("<body><h1>Result of " + useHtml.OperationName + "</h1>");
                sb.AppendLine("<p><b>" + result.GetType().FullName + "</b></p>");
                sb.AppendLine("<ul>");
                foreach (var prop in result.GetType().GetProperties())
                {
                    string line = string.Format("{0}: {1}", prop.Name, prop.GetValue(result, null));
                    sb.AppendLine("<li>" + line + "</li>");
                }
                sb.AppendLine("</ul></body></html>");
                byte[] bytes = Encoding.UTF8.GetBytes(sb.ToString());
                Message reply = Message.CreateMessage(messageVersion, null, new RawBodyWriter(bytes));
                reply.Properties.Add(WebBodyFormatMessageProperty.Name, new WebBodyFormatMessageProperty(WebContentFormat.Raw));
                HttpResponseMessageProperty httpResp = new HttpResponseMessageProperty();
                reply.Properties.Add(HttpResponseMessageProperty.Name, httpResp);
                httpResp.Headers[HttpResponseHeader.ContentType] = "text/html";
                return reply;
            }
            else
            {
                return original.SerializeReply(messageVersion, parameters, result);
            }
        }

        class RawBodyWriter : BodyWriter
        {
            private byte[] bytes;

            public RawBodyWriter(byte[] bytes)
                : base(true)
            {
                this.bytes = bytes;
            }

            protected override void OnWriteBodyContents(XmlDictionaryWriter writer)
            {
                writer.WriteStartElement("Binary");
                writer.WriteBase64(this.bytes, 0, this.bytes.Length);
                writer.WriteEndElement();
            }
        }
    }
    public class MyHtmlAwareInspector : IDispatchMessageInspector
    {
        public object AfterReceiveRequest(ref Message request, IClientChannel channel, InstanceContext instanceContext)
        {
            HttpRequestMessageProperty httpRequest = (HttpRequestMessageProperty)request.Properties[HttpRequestMessageProperty.Name];
            string accept = httpRequest.Headers[HttpRequestHeader.Accept];
            string operationName = request.Properties[WebHttpDispatchOperationSelector.HttpOperationNamePropertyName] as string;
            if (accept == "text/html")
            {
                OperationContext.Current.Extensions.Add(new MyUseHtmlExtension { UseHtmlResponse = true, OperationName = operationName });
            }

            return null;
        }

        public void BeforeSendReply(ref Message reply, object correlationState)
        {
        }
    }
    class MyUseHtmlExtension : IExtension<OperationContext>
    {
        public void Attach(OperationContext owner) { }
        public void Detach(OperationContext owner) { }
        public bool UseHtmlResponse { get; set; }
        public string OperationName { get; set; }
    }
    public class MyHtmlAwareEndpointBehavior : IEndpointBehavior
    {
        public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
        {
        }

        public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
        {
        }

        public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
        {
            endpointDispatcher.DispatchRuntime.MessageInspectors.Add(new MyHtmlAwareInspector());
            foreach (DispatchOperation operation in endpointDispatcher.DispatchRuntime.Operations)
            {
                operation.Formatter = new MyHtmlAwareFormatter(operation.Formatter);
            }
        }

        public void Validate(ServiceEndpoint endpoint)
        {
        }
    }
    public static void Test()
    {
        string baseAddress = "http://" + Environment.MachineName + ":8000/Service";
        ServiceHost host = new ServiceHost(typeof(Service), new Uri(baseAddress));
        var endpoint = host.AddServiceEndpoint(typeof(ITest), new WebHttpBinding(), "");
        endpoint.Behaviors.Add(new WebHttpBehavior { AutomaticFormatSelectionEnabled = true });
        endpoint.Behaviors.Add(new MyHtmlAwareEndpointBehavior());
        host.Open();
        Console.WriteLine("Host opened");

        WebClient c;

        c = new WebClient();
        c.Headers[HttpRequestHeader.Accept] = "application/json";
        Console.WriteLine(c.DownloadString(baseAddress + "/GetPerson"));
        Console.WriteLine();

        c = new WebClient();
        c.Headers[HttpRequestHeader.Accept] = "text/xml";
        Console.WriteLine(c.DownloadString(baseAddress + "/GetPerson"));
        Console.WriteLine();

        c = new WebClient();
        c.Headers[HttpRequestHeader.Accept] = "text/html";
        Console.WriteLine(c.DownloadString(baseAddress + "/GetPerson"));
        Console.WriteLine();

        Console.Write("Press ENTER to close the host");
        Console.ReadLine();
        host.Close();
    }
} 
```

# c# - 检测不同的操作系统和平台

> ID：10519078
> 
> 赞同：0
> 
> 时间：2012-05-09T15:20:04.633
> 
> 标签：c#, mono, operating-system, cross-platform, platform

我正在开发一个跨平台开源项目。我的应用程序将支持 Android、iOS、MAC OS X、Windows 和 Linux。

第一个想法是使用以下代码：

```
Environment.OSVersion.Platform 
```

但这还不够，因为我无法涵盖 iOS 和 Android。我认为最好检查操作系统基础和版本来决定操作系统类型。例如，iOS 是一个基于 UNIX 的操作系统。所以我可以检查版本或其他一些属性以确保它是 iOS。

由于我无法访问 Android 或 iOS，并且我的搜索不成功，因此我需要您的帮助才能为每个操作系统获取这些版本。

此致，佩曼·莫尔塔扎维

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T21:52:20.853

这个怎么样？

```
public static bool IsAndroid {
   get {
      return (Type.GetType("Android.Runtime") != null);
   }
} 
```

也许：

```
public static bool IsIphoneOS {
   get {
      return (Type.GetType("MonoTouch.Constants") != null);
   }
} 
```

我认为这些仅适用于 MonoTouch 或 Mono for Android，但您可以使用相同的方法。要么依赖于构建平台的正确#define 值。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T15:36:08.643

我喜欢为我做这件事的跨平台功能。目前我必须创建一个带有 ifdefs 的函数，并在每个函数中调用特定的平台 API 调用。

```
#ifdef Q_WS_MACX
 return "MAC";
#else
 return "LINUX";
#endif 
```

显然我在 C++ Qt 中这样做

# perl - Perl - 重定向和设置cookie时的重定向循环

> ID：10519080
> 
> 赞同：2
> 
> 时间：2012-05-09T15:20:09.373
> 
> 标签：perl, redirect, cookies, cgi

我是一个 Perl 新手，我遇到了这个问题：

我有一个 _login.cgi 脚本，它管理登录并在凭据正确时重定向到 index.cgi 页面：

```
if (functions::check_credentials($input{"username"}, $input{"password"}) eq true ){

$session = new CGI::Session("driver:File", undef, {File::Spec->tmpdir});
$session->param("name", "Carcarlo Pravettoni");

$cookie = $page->cookie(CGISESSID => $session->id);
print $page->redirect( -URL => "index.cgi" -cookie=>$cookie);

} else {...} 
```

但是当我使用正确的凭据尝试它时，我得到一个无限重定向循环到 _login.cgi （这个脚本本身）。

相反，如果我不发送带有重定向的 cookie，一切正常：

```
if (functions::check_credentials($input{"username"}, $input{"password"}) eq true ){

$session = new CGI::Session("driver:File", undef, {File::Spec->tmpdir});
$session->param("name", "Carcarlo Pravettoni");

$cookie = $page->cookie(CGISESSID => $session->id);
print $page->redirect( -URL => "index.cgi");

} else {...} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:41:35.723

你这里有一个错字（后面缺少逗号`"index.cgi"`）：

```
print $page->redirect( -URL => "index.cgi" -cookie=>$cookie); 
```

我建议您启用[`strict`](http://perldoc.perl.org/strict.html)和[`warnings`](http://perldoc.perl.org/warnings.html)（并且可能[`diagnostics`](http://perldoc.perl.org/diagnostics.html)），并重构代码，直到没有错误/警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:10:32.267

```
if (functions::check_credentials($input{"username"}, $input{"password"}) eq true ) 
```

如果你没有`use strict`打开，那么这可能是不小心做了你想做的事。

Perl 没有 Boolean 原始类型，因此 Perl 可能将其解释`true`为 string `'true'`。而且很可能你在`check_credentials`函数中也犯了同样的错误，所以这两个错误相互抵消了。

更“Perlish”的方法是适当`check_credentials`地返回真值或假值（可能`1`和`undef`），并且`if`语句不检查特定值。

```
if (functions::check_credentials($input{"username"}, $input{"password"})) { ... } 
```

# c# - Ajax ModalPopupExtender 定位问题，未居中对齐

> ID：10519086
> 
> 赞同：0
> 
> 时间：2012-05-09T15:20:28.457
> 
> 标签：c#, asp.net, ajaxcontroltoolkit, modal-dialog, modalpopupextender

我正在使用 Ajax 工具包和 ModalPopExtender，工作正常，只是它的定位有一个很大的时间问题，我用它来显示图像，所有图像都有不同的高度和宽度，因此有时它看起来像屏幕的左下角它的一半离开屏幕，我可以通过指定 X 和 Y 坐标的值来修复它，但是由于图像大小会发生变化，如果图像太小，那么用户需要一直向上滚动指针。

问题是它出现在随机位置，但是一旦我滚动或调整页面大小，它就会将其重新定位到屏幕的确切中心（实际需要的位置）。

专家，请建议解决方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:03:58.657

貌似没有硬性的解决方案，我们也联系了 MSDN 团队，用 Jquery Light Box 代替了它。

# asp.net - VB.NET如何维护变量的值

> ID：10519091
> 
> 赞同：0
> 
> 时间：2012-05-09T15:20:40.040
> 
> 标签：asp.net, vb.net, variables

我是一名初学者开发人员..我需要帮助..请参阅以下示例..抱歉英语不好...

我有一个名为 str 的字符串变量，分配有“John”。单击第一个按钮时，我将其更改为“Dave”。单击第二个时，我将值显示为标签。我想见戴夫，但我只见约翰。这是为什么？

页面加载没有任何内容，其他地方也没有。我知道我可以参加会议，但这是在同一页上。我不能没有会话或视图状态吗？

谢谢。

```
 Partial Class  _Default
        Inherits System.Web.UI.Page

        Private str As String = "John"

        Protected Sub Button1_Click(sender As Object, e As System.EventArgs) Handles Button1.Click
            str = "Dave"        
        End Sub

        Protected Sub Button2_Click(sender As Object, e As System.EventArgs) Handles Button2.Click    
           Label1.Text = str
        End Sub
    End Class 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:29:51.003

欢迎来到无状态编程的世界；页面渲染后变量不存在；您需要使用 Session 对象来保存它们。

在您的按钮单击中，设置 Session("PersonName") = "Dave"

在 Page_Load 中，有如下代码：

str = Session("PersonName").ToString()

我强烈建议您通过一些 ASP.NET 编程教程来熟悉您需要的所有概念。

# php - 跟踪网站热链接我的图像

> ID：10519092
> 
> 赞同：4
> 
> 时间：2012-05-09T15:20:39.947
> 
> 标签：php, html

我允许访问者将 HTML 片段复制到他们自己的网站中，其中包括在我的网站上托管的图像。

跟踪链接这些图片的网站的最佳方法是什么？

我正在考虑创建一个类似的网页`getImage.php?imageID=12345`并将其用作我的代码片段中的图像 src，但我将如何获得哪个网站正在使用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:42:23.850

我相信链接您的图像的网站可以通过`$_SERVER['HTTP_REFERER']`.

# c# - ListViewItem.ListView 属性是如何设置的？

> ID：10519101
> 
> 赞同：0
> 
> 时间：2012-05-09T15:21:01.023
> 
> 标签：c#, .net

ListViewItem.ListView 属性将在添加到所有者 ListView 后自动设置。但是 ListViewItem.ListView 属性没有设置器。

`ListViewItem item = new ListViewItem(); // item.ListView == null here.` `listView.Items.Add( item ); // item.ListView != null where no setter.`

我想知道 ListViewItem.ListView 获取属性的实现。ListView.Items.Add() 方法中设置了哪些私有字段？如何？我正在尝试将类似的类关系创建为 ListView 和 ListViewItem 之间的关系。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:52:31.747

属性具有存储值的基础变量。可能添加到 ListView 的实现将此变量设置为正确的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T15:47:15.500

`ListViewItemCollection.Add`调用（间接）内部方法`ListViewItem`：

```
internal void Host(ListView parent, int ID, int index)
{
    this.ID = ID;
    this.listView = parent;
    if (index != -1)
    {
        this.UpdateStateToListView(index);
    }
} 
```

（您可以在 Reflector 或 JustDecompile 等反编译器中看到此代码）

# html - 使用 HTML5 的网站的通用菜单/标头广告

> ID：10519102
> 
> 赞同：0
> 
> 时间：2012-05-09T15:21:09.360
> 
> 标签：html

在学习制作 JSP 页面时，我被教导使用与所有其他页面分开的通用菜单页面，然后使用`<jsp:directive.include file="menu.jspx" />`.

在 HTML5 中是否有类似的方法可以做到这一点？或者有没有更好的方法在使用 HTML5 的每个页面上包含一个通用菜单/标头？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:46:59.480

执行此操作的标准方法是使用服务器端包含。大多数服务器都支持这一点。

[在这里进一步阅读](http://en.wikipedia.org/wiki/Server_Side_Includes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:49:19.330

不，html5 不这样做。

您在 JSP 中所做的是服务器端包含。您要求的是客户端包含，这些在 html5 中不存在。

我有充分的理由加载客户端的东西，你可以使用 javascript。看看 AJAX。许多 .js 库都有很好的支持，使其更容易。例如，jQuery 有一个 load() 函数，它可以消除一些痛苦。

我不建议在导航菜单中使用类似的东西。服务器端包含会更好。

如果你只是在做一个小项目，也许你是在本地做的，你只是想做它，这样你就不必到处复制粘贴页面块，php是一种简单的方法.

使用 XAMPP 之类的东西以易于遵循的方式在您的机器上运行 php。然后使用 php 的 include 函数，如下所示：[PHP Include](http://php.net/manual/en/function.include.php)做你想做的事。

# php - 拆分字符串以形成多维数组键？

> ID：10519108
> 
> 赞同：2
> 
> 时间：2012-05-09T15:21:22.510
> 
> 标签：php, arrays

我正在从 PHP 数组创建 JSON 编码数据，该数组可以是两到三层深度，看起来像这样：

```
[grandParent] => Array (
                       [parent] => Array (
                                         [child] => myValue 
                                      )
                    ) 
```

我拥有的方法只是在代码中手动创建嵌套数组，这需要我通过键入一些可怕的嵌套数组来使用我的“setOption”函数（稍后处理编码），但是：

```
$option = setOption("grandParent",array("parent"=>array("child"=>"myValue"))); 
```

在这种情况下，我希望能够通过使用与 javascript 类似的符号来获得相同的结果，因为我将在许多页面中设置许多选项，而上面的内容不是很可读，尤其是当嵌套数组包含多个键 - 而能够做到这一点会更有意义：

```
$option = setOption("grandParent.parent.child","myValue"); 
```

任何人都可以提出一种方法来通过拆分“。”上的字符串来创建多维数组。这样我就可以 json_encode() 将其转换为嵌套对象？

（setOption 函数的目的是将所有选项收集到一个大的嵌套 PHP 数组中，然后再一次将它们全部编码，所以这就是解决方案的所在）

编辑：我意识到我可以在代码中做到这一点：

```
$options['grandparent']['parent']['child'] = "myValue1";
$options['grandparent']['parent']['child2'] = "myValue2";
$options['grandparent']['parent']['child3'] = "myValue3"; 
```

这可能更简单；但是一个建议仍然会动摇（因为我将它用作更广泛对象的一部分，所以它`$obj->setOption(key,value);`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T15:48:34.183

如果尚未创建子数组并相应地设置键（**[此处为键盘](http://codepad.org/8vfEaJ9C)**），这应该为您填充子数组：

```
function set_opt(&$array_ptr, $key, $value) {

  $keys = explode('.', $key);

  // extract the last key
  $last_key = array_pop($keys);

  // walk/build the array to the specified key
  while ($arr_key = array_shift($keys)) {
    if (!array_key_exists($arr_key, $array_ptr)) {
      $array_ptr[$arr_key] = array();
    }
    $array_ptr = &$array_ptr[$arr_key];
  }

  // set the final key
  $array_ptr[$last_key] = $value;
} 
```

像这样称呼它：

```
$opt_array = array();
$key = 'grandParent.parent.child';

set_opt($opt_array, $key, 'foobar');

print_r($opt_array); 
```

为了与您的编辑保持一致，您可能希望对其进行调整以`array`在您的班级中使用...但希望这提供了一个开始的地方！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:44:20.393

怎么样`$option = setOption("grandParent", { parent:{ child:"myValue" } });`？

如果之前没有设置，doing`$options['grandparent']['parent']['child']`会产生错误。`$options['grandparent']['parent']`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:19:05.150

已接受答案的 OO 版本 (http://codepad.org/t7KdNMwV)

```
 $object = new myClass();
  $object->setOption("mySetting.mySettingsChild.mySettingsGrandChild","foobar");
  echo "<pre>".print_r($object->options,true)."</pre>";

  class myClass {

     function __construct() {
        $this->setOption("grandparent.parent.child","someDefault");
     }

    function _setOption(&$array_ptr, $key, $value) {

        $keys = explode('.', $key);

        $last_key = array_pop($keys);

        while ($arr_key = array_shift($keys)) {
            if (!array_key_exists($arr_key, $array_ptr)) {
                $array_ptr[$arr_key] = array();
            }
            $array_ptr = &$array_ptr[$arr_key];
        }

        $array_ptr[$last_key] = $value;
    }

    function setOption($key,$value) {

        if (!isset($this->options)) {
            $this->options = array();
        }

        $this->_setOption($this->options, $key, $value);
        return true;                        
    }

  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-26T11:28:40.270

@rjz 解决方案帮助了我，尽管我需要从存储在数组中的一组键创建一个数组，但是当涉及到数字索引时，它不起作用。对于那些需要从数组中存储的数组索引集创建嵌套数组的人，如下所示：

```
$keys = array(
    'variable_data',
    '0',
    'var_type'
); 
```

你会在这里找到解决方案：[Php array from set of keys](https://stackoverflow.com/questions/10765706/php-array-from-set-of-keys)

# sql-server - SQL Server 2008 和 Visual Studio 2010 中的命名管道错误

> ID：10519112
> 
> 赞同：0
> 
> 时间：2012-05-09T15:21:31.247
> 
> 标签：sql-server, visual-studio, visual-studio-2010, sql-server-2008, named-pipes

我只想手动连接到本地服务器。我右键单击“服务器资源管理器”中的“数据连接”按钮，然后选择“创建新的 SQL Server 数据库”。但是发生了命名管道提供的错误。我尝试了互联网上所有建议的解决方案。更改了 SQL Server 网络配置，按照告诉我的方式打开了端口 1433。重新启动计算机，重新安装所有内容，但不，它只是不起作用。在这里您可以看到可能的错误；

[MSDN 命名管道提供程序](http://blogs.msdn.com/b/sql_protocols/archive/2007/05/16/named-pipes-provider-error-40-could-not-open-a-connection-to-sql-server-microsoft-sql-server-error-xxx.aspx)

在我的情况下 xxx=2。我以为我不需要连接字符串，因为我在没有代码或其他东西的情况下手动连接。而且，当我在 Visual Studio 中打开数据库项目或服务器项目时，我仍然无法让它们工作。有什么建议吗？我知道还有其他类似的问题，但它们不能解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:49:39.877

> 我在没有代码或其他东西的情况下手动连接

我认为这意味着您正在尝试通过 Management Studio 进行连接？

*   为什么不使用服务器名称 'localhost\myInstance' 看看是否可以这样连接？
*   通过 Management Studio 连接时是否检查过连接字符串？如果您要连接到默认实例，请确保您没有`\MSSQLSERVER`在服务器名称的末尾添加。如果您在安装时命名了您的实例，请确保您正在使用它。
*   您是否在 Config Manager -> Network Configuration 中检查了是否为此实例启用了命名管道？
*   您是否检查过 SQL Server 服务是否正在运行？

# iphone - UIWebview中带有密码的pdf文件

> ID：10519122
> 
> 赞同：0
> 
> 时间：2012-05-09T15:21:50.917
> 
> 标签：iphone, objective-c, xcode, uiwebview

我想在我的请求中指定 PDF 文件的密码。这可能吗？目前我的代码如下：

```
NSString *nomPdf=_pdffile.name;

NSString *path = [[NSBundle mainBundle] pathForResource:nomPdf ofType:@"pdf"];
NSURL *url;
NSURLRequest *request;
if(path !=nil){
    url = [NSURL fileURLWithPath:path];
    request = [NSURLRequest requestWithURL:url];
} 
```

如何在此代码中传递 PDF 文件所需的密码字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:56:56.673

不完全是答案，但要排除选项，[听起来您不能](http://forums.adobe.com/message/3812698)将密码作为 URL 的一部分嵌入。

# java - 在jackrabbit中将blob从数据库迁移到文件系统

> ID：10519123
> 
> 赞同：3
> 
> 时间：2012-05-09T15:21:55.140
> 
> 标签：java, jackrabbit, jcr, jsr170

正如前面讨论中提出的[使用文件系统而不是数据库来存储 pdf 文件在 jackrabbit 中，](https://stackoverflow.com/questions/10347616) 我们可以使用`FileDataStore`将 blob 文件存储在文件系统而不是数据库中（我的情况是存储了大约 100 kb 大小的 pdf）。

我遇到的以下问题是处理以前存储在 blobstore 中的文件，我希望它们在切换到`FileDataStore`.

在使用方法时添加`FileDataStore`对 repository.xml 的支持后，我得到：`JcrUtils``getOrAddNode``ItemExistsException`

```
public static Node getOrAddNode(Node parent, String name)
        throws RepositoryException {
    if (parent.hasNode(name)) {
        return parent.getNode(name);
    } else {
        return parent.addNode(name);
    }
} 
```

例如`parent.hasNode(name)`，返回 false（似乎该项目不存在），但随后我们陷入代码`parent.addNode(name)`，从而引发 ItemExistsException。

有什么帮助吗？

是否有必要将 blob 迁移到`FileDataStore`或者存在某种配置，jackrabbit 可以同时在不同位置搜索 blob：在我的情况下是 mysql 数据库和文件系统。

一些评论：

我发现至少有几种方法可以帮助完成迁移工作：

*   规范[http://wiki.apache.org/jackrabbit/BackupAndMigration](http://wiki.apache.org/jackrabbit/BackupAndMigration) 讲述了使用 JCR API（`Session.exportSystemView(..)`然后`Session.importXML(..)`），使用`RepositoryCopier`API 等。
*   jackrabbit-jcr-import-export-tool（见[http://svn.apache.org/repos/asf/jackrabbit/sandbox/jackrabbit-jcr-import-export-tool/README.txt](http://svn.apache.org/repos/asf/jackrabbit/sandbox/jackrabbit-jcr-import-export-tool/README.txt)）
*   使用 jackrabbit 独立服务器 ( [http://jackrabbit.apache.org/standalone-server.html](http://jackrabbit.apache.org/standalone-server.html) )

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:34:07.320

可能存在存储库损坏。也就是说，节点包含给定名称的子节点条目（您要添加的节点），但子节点本身不存在。特别是在旧版本的 Jackrabbit 中，如果多个会话同时尝试更改相同的节点，您可能会遇到这种情况。

为了修复此类损坏问题，[捆绑数据库持久性管理器](http://jackrabbit.apache.org/api/1.5/org/apache/jackrabbit/core/persistence/bundle/BundleDbPersistenceManager.html)支持一致性检查和修复功能。您需要在 repository.xml 和 workspace.xml 文件中设置这些选项，然后重新启动 Jackrabbit。修复后，您可以再次禁用这些选项。

还有一种方法可以在运行时解决此类问题，方法是将系统属性设置`org.apache.jackrabbit.autoFixCorruptions`为`true`，然后遍历存储库中的所有节点。

# vb.net - 需要从 .net 打印 PDF 并选择不同的托盘进行输出

> ID：10519124
> 
> 赞同：0
> 
> 时间：2012-05-09T15:21:58.137
> 
> 标签：vb.net, printing, printdocument, acrobat-sdk

我的公司正在迁移到一个新系统，该系统的打印系统非常差，但它确实在文件系统上创建了 PDF。

我的老板让我创建一个应用程序来打印基于 JOB 编号的所有 PDF。

我已经让文件系统搜索工作了，我使用 acrobat sdk 打开每个文件并找到某些字符串来确定哪些页面去哪里。

我正在处理的问题是 Acrobat SDK 似乎不支持选择打印机设置。

我的第一个想法没什么大不了的，我只是更改了默认的 windows 打印机并更改了托盘，因此发票部分和设备清单从托盘 1 转到白纸，而汇款转到蓝纸上的托盘 2。

.net 中的打印文档似乎可以处理很多打印机设置，但我不确定 PDF 是否可以与打印文档一起使用。

寻求任何建议或帮助。

谢谢，

约书亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:03:26.597

我发现答案是使用 Win32。

这是帮助我克服一些障碍的网站：

[http://edinkapic.blogspot.com/2011/01/how-to-set-printer-default-paper-bin-in.html](http://edinkapic.blogspot.com/2011/01/how-to-set-printer-default-paper-bin-in.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-05T20:11:02.457

根本问题是 PDF 是文本和位图图像的矢量图形的组合。这一切都需要在可打印之前呈现为打印机可以理解的格式。

Ghostscript 可以很好地做到这一点，如果您需要从 .Net 执行此操作，GhostScript.Net 提供了出色的 vb.Net 接口。

> 我正在处理的问题是 Acrobat SDK 似乎不支持选择打印机设置。

您不能为此使用 Acrobat 的桌面版本，因为它不是为无人值守操作而设计的，并且需要用户界面。另外，我认为它违反了 Adob​​e 的许可。

# c# - 如何使用 RegEx 提取字符串的 IP

> ID：10519125
> 
> 赞同：5
> 
> 时间：2012-05-09T15:21:59.057
> 
> 标签：c#, regex, string, ip

如何使用 RegEx 提取下面字符串的 IP？

```
... sid [1544764] srv [CFT256] remip [10.0.128.31] fwf [] ...

```

我尝试了下面的代码，但没有返回预期值：

```
字符串模式 = @"remip\\[.\]";
MatchCollection mc = Regex.Matches(stringToSearch, pattern);

```

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T15:25:20.840

试试这个：

```
@"remip \[(\d+\.\d+\.\d+\.\d+)\]" 
```

澄清......你的不起作用的原因是因为你只`.`在`[`and内匹配`]`。single`.`仅匹配单个字符。您可以添加一个`*`（零个或多个）或一个`+`（一个或多个）以使其工作。此外，用括号括起来：`(`和`)`，意味着您可以直接从`MatchCollection`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T15:36:58.657

如果您将模式切换到

```
string pattern = @"remip\s*\[[^\]]*\]"; 
```

您将能够匹配地址字符串，即使它有错误（例如包含非数字、没有足够的点等）。无论如何，您很可能最终会在代码中验证地址，因此捕获*打算*用作 IP 地址的内容、在代码中显式验证它并生成更有意义的错误消息可能是一个好主意。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T15:28:29.527

您可以将分组与您的正则表达式一起使用：

```
@"remip\s\[(?<IP>\d+.\d+.\d+.\d+)\]" 
```

它将在“IP”组中返回结果

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-09T15:25:37.357

试试这个：

```
string pattern = @"remip\s\[.+?\]";
MatchCollection mc = Regex.Matches(stringToSearch, pattern ); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-23T05:50:39.247

试试这个。

```
String zeroTo255
            = "(\\d{1,2}|(0|1)\\"
              + "d{2}|2[0-4]\\d|25[0-5])";

        // Regex for a digit from 0 to 255 and
        // followed by a dot, repeat 4 times.
        // this is the regex to validate an IP address.
        String regex
            = zeroTo255 + "\\."
              + zeroTo255 + "\\."
              + zeroTo255 + "\\."
              + zeroTo255;

        MatchCollection mc = Regex.Matches(text, regex ); 
```

# regex - 带有特殊字符的多行正则表达式

> ID：10519126
> 
> 赞同：0
> 
> 时间：2012-05-09T15:22:05.703
> 
> 标签：regex

我希望有人可以帮助我解决这个正则表达式。我只用它来收集字符串中的单个单词，所以我不确定如何处理多行以及看起来像 ASCII 字符的内容。

这是文本块：

```
Information       - RETAILEAITRT00003 - Traitement        - Processing        - --->  Recovery from 05/09/2012 at 09:17:50 AM 

Information       - RETAILEAITRT00020 - Traitement        - Processing        - --->  Information recovery starts on 05/09/2012 at 09:17:50 AM 

Information       - RETAILEAITRT00021 - Traitement        - Processing        - ---->  File processing: C:\Program Files (x86)\Prog\Prog RIT\Web Orders\live\Prog Import\Order_110039354.tab
Information       - RETAILEAITRT00005 - Traitement        - Processing        - --->  End of information recovery on 05/09/2012 at 09:17:51 AM 
Information       - RETAILEAITRT00006 - Traitement        - Processing        -    -> 6 records read 
Information       - RETAILEAITRT00008 - Traitement        - Processing        -    -> 6 records processed 
Information       - RETAILEAITRT00010 - Traitement        - Processing        -    -> 6 integrated records 
Information       - RETAILEAITRT00015 - Traitement        - Processing        -    ->  No integration errors 

Information       - RETAILEAITRT00020 - Traitement        - Processing        - --->  Information recovery starts on 05/09/2012 at 09:17:51 AM 

Information       - RETAILEAITRT00021 - Traitement        - Processing        - ---->  File processing: C:\Program Files (x86)\Prog\Prog RIT\Web Orders\live\Prog Import\Order_110039355.tab
Third-party       -  : La raison sociale doit �tre renseign�e 
Third-party       - _SHIP : La raison sociale doit �tre renseign�e 
Erreur            - RETAILEAIDOC00008 - Document          - Document          - address The internal reference enables the recovery of a document. It is mandatory 
Erreur            - RETAILEAIDOC00008 - Document          - Document          - address The internal reference enables the recovery of a document. It is mandatory 
Information       - RETAILEAITRT00005 - Traitement        - Processing        - --->  End of information recovery on 05/09/2012 at 09:17:52 AM 
Information       - RETAILEAITRT00006 - Traitement        - Processing        -    -> 4 records read 
Information       - RETAILEAITRT00008 - Traitement        - Processing        -    -> 4 records processed 
Information       - RETAILEAITRT00012 - Traitement        - Processing        -    ->  No records integrated 
Information       - RETAILEAITRT00013 - Traitement        - Processing        -    -> 4 records contain errors 

Information       - RETAILEAITRT00003 - Traitement        - Processing        - --->  Recovery from 05/09/2012 at 09:33:03 AM 

Information       - RETAILEAITRT00020 - Traitement        - Processing        - --->  Information recovery starts on 05/09/2012 at 09:33:03 AM 

Information       - RETAILEAITRT00021 - Traitement        - Processing        - ---->  File processing: C:\Program Files (x86)\Prog\Prog RIT\Web Orders\live\Prog Import\Order_110039356.tab
Information       - RETAILEAITRT00005 - Traitement        - Processing        - --->  End of information recovery on 05/09/2012 at 09:33:05 AM 
Information       - RETAILEAITRT00006 - Traitement        - Processing        -    -> 6 records read 
Information       - RETAILEAITRT00008 - Traitement        - Processing        -    -> 6 records processed 
Information       - RETAILEAITRT00010 - Traitement        - Processing        -    -> 6 integrated records 
Information       - RETAILEAITRT00015 - Traitement        - Processing        -    ->  No integration errors 

Information       - RETAILEAITRT00020 - Traitement        - Processing        - --->  Information recovery starts on 05/09/2012 at 09:33:05 AM 

Information       - RETAILEAITRT00021 - Traitement        - Processing        - ---->  File processing: C:\Program Files (x86)\Prog\Prog RIT\Web Orders\live\Prog Import\Order_110039357.tab
Information       - RETAILEAITRT00005 - Traitement        - Processing        - --->  End of information recovery on 05/09/2012 at 09:33:06 AM 
Information       - RETAILEAITRT00006 - Traitement        - Processing        -    -> 6 records read 
Information       - RETAILEAITRT00008 - Traitement        - Processing        -    -> 6 records processed 
Information       - RETAILEAITRT00010 - Traitement        - Processing        -    -> 6 integrated records 
Information       - RETAILEAITRT00015 - Traitement        - Processing        -    ->  No integration errors 
```

但是，我只想要这个部分：

```
Information       - RETAILEAITRT00020 - Traitement        - Processing        - --->  Information recovery starts on 05/09/2012 at 09:17:51 AM 

Information       - RETAILEAITRT00021 - Traitement        - Processing        - ---->  File processing: C:\Program Files (x86)\Prog\Prog RIT\Web Orders\live\Prog Import\Order_110039355.tab
Third-party       -  : La raison sociale doit �tre renseign�e 
Third-party       - _SHIP : La raison sociale doit �tre renseign�e 
Erreur            - RETAILEAIDOC00008 - Document          - Document          - address The internal reference enables the recovery of a document. It is mandatory 
Erreur            - RETAILEAIDOC00008 - Document          - Document          - address The internal reference enables the recovery of a document. It is mandatory 
Information       - RETAILEAITRT00005 - Traitement        - Processing        - --->  End of information recovery on 05/09/2012 at 09:17:52 AM 
Information       - RETAILEAITRT00006 - Traitement        - Processing        -    -> 4 records read 
Information       - RETAILEAITRT00008 - Traitement        - Processing        -    -> 4 records processed 
Information       - RETAILEAITRT00012 - Traitement        - Processing        -    ->  No records integrated 
Information       - RETAILEAITRT00013 - Traitement        - Processing        -    -> 4 records contain errors 
```

还有一些特殊字符显示为奇怪的问号。我真的不知道从哪里开始。我想它必须寻找 ^Erreur，然后抓住它上面和下面的行，直到找到带有空格的 ^...？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:04:05.340

我能够让它与以下正则表达式一起工作：

```
Information.+recovery starts.+\n\n(?:.+\n)+(?:Erreur.+\n)+(?:.+\n)+ 
```

**注意：这需要使用“g”（全局）标志**（在 JavaScript 中测试成功）。不确定您使用的是哪种语言，但它应该有一个等效的标志。

是的，它非常丑陋:)。这基本上就是它要寻找的东西：

*   以“信息”开头并包含“恢复开始”字样的行
*   后跟一个空行
*   后跟至少一个通用行
*   后跟至少一行以“Erreur”开头的行
*   后跟任何连续的非空白行

# asp.net - ObjectDataSource 返回具有两个或多个表的 DataSet

> ID：10519128
> 
> 赞同：1
> 
> 时间：2012-05-09T15:22:06.373
> 
> 标签：asp.net, data-binding, dataset, objectdatasource

我正在编写自己的 ObjectDataSource SelectMethod，如下所示：

```
public class SomeDataprovider
{
    [DataObjectMethod(DataObjectMethodType.Select)]
    public DataSet GetData()
    {
        NWdbTableAdapters.CustomersTableAdapter a1 = new CustomersTableAdapter();
        NWdbTableAdapters.SuppliersTableAdapter a2 = new SuppliersTableAdapter();

        NWdb.CustomersDataTable dt1 = a1.GetTop10();
        NWdb.SuppliersDataTable dt2 = a2.GetTop10();
        dt1.TableName = "Table1";
        dt2.TableName = "Table2";
        DataSet ds = new DataSet();
        ds.Tables.Add(dt1);
        ds.Tables.Add(dt2);
        return ds;
    }
} 
```

页面中有两个gridview：

```
 <asp:GridView ID="GridView1" runat="server" DataSourceID="ObjectDataSource1">
    </asp:GridView>
    <asp:ObjectDataSource ID="ObjectDataSource1" runat="server" 
        SelectMethod="GetData" TypeName="odsMultipleDataTables.SomeDataprovider">
    </asp:ObjectDataSource>
    <asp:GridView ID="GridView2" runat="server" DataSourceID="ObjectDataSource1">
    </asp:GridView> 
```

我试图让“Table1”出现在 GridView1 中，“Table2”分别出现在 GridView2 中。但是当我在网格上设置 DataMember 属性时，我得到了错误。

![错误截图](../Images/0f2c84fc4f552177e6ceeb753236ce39.png)

怎么可能实现我正在寻找的东西？

# php - 将 PHP MySQL Web 应用程序离线移动

> ID：10519134
> 
> 赞同：0
> 
> 时间：2012-05-09T15:22:21.010
> 
> 标签：php, mysql, web-applications, offline-mode

我最近为我的公司构建了一个 Web 应用程序，现在他们希望它支持离线模式。更复杂的是，我的公司非常关注安全性，不希望我使用 Xampp 或 Mamp。该应用程序处理敏感数据，他们认为这些程序会以某种方式使数据对外界可见（尽管我完全确定情况会如此）。

无论如何，我正在寻找一种方法来让我的应用程序脱机运行，并且还支持以下技术：PHP、MySQL、jQuery。最困难的部分是我需要在典型的服务器环境之外执行 PHP 代码。

谁能给我一些关于如何实施这样一个系统的建议，以及我在安全和数据存储方面可能面临的任何相关漏洞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:43:31.803

你的问题有一些奇怪的地方

> 现在他们希望它支持离线模式

嗯，这很简单——熟悉[html5 的离线功能](http://www.html5rocks.com/en/features/offline)

> 更复杂的是，我的公司非常关注安全性，不希望我使用 Xampp 或 Mamp

您是否在台式机上部署了 Web 应用程序？或者你的意思是你被禁止使用网络服务器？Xampp/Mamp 是开发工具 - 您的面向公众的应用程序应该在专门为此目的配置的机器上，并带有运行 apache/nginx/iis/PHP5.4-builtin/任何您喜欢的网络服务器。

> 最困难的部分是我需要在典型的服务器环境之外执行 PHP 代码。

您的环境如何非典型？迈克提到了 php-gtk - 但 IMO 你不应该走那条路，除非你的要求是“桌面应用程序”+“绝对必须用 php 编写” - 你的问题不清楚。

> 我在安全和数据存储方面可能面临的任何相关漏洞

好吧，您放在用户可以访问的客户端（浏览器）上的本地存储中的任何内容 - 请记住这一点。不要将敏感数据发送到从您的角度来看，不安全和伪公共的位置，即某些用户的浏览器缓存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:51:41.173

假设你在他们的机器上为单个用户安装这个——你最好的办法是安装 apache/php/mysql，并将 apache 配置为拒绝来自任何远程 IP 地址的连接。

环境应该与您当前的应用程序基本相同，但系统中只有 1 个用户。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:31:05.827

如果您想运行 html/javascript，您可能需要在服务器/客户端环境中运行它，因为浏览器无法运行 php，而 php 应用程序作为独立应用程序需要一些东西来解析 html/css /javascript（它需要浏览器来显示它的视图）。

最好的做法是将应用程序放到您控制访问的服务器上。仅将访问控制设置为特定的 IP 地址，如果您可以在防火墙后面的 Intranet 上运行它，网络外部的任何人都无法访问它，则效果会更好。

PHP 可以在桌面环境中运行，但这里的关键是它不会运行您用来显示的 javascript/html。您可以将 php 与 php-gtk 之类的第三方库一起使用来制作不需要服务器或浏览器的桌面应用程序，但 php-gtk 没有最好的支持。

如果应用程序需要存储数据以供其他计算机/用户访问，则它需要位于网络上。如果不需要这样做，您可能会考虑使用针对桌面应用程序的不同编程语言，以便您可以使其完全脱机（例如 java 或 .NET）。

# android - 新活动崩溃

> ID：10519139
> 
> 赞同：-4
> 
> 时间：2012-05-09T15:22:42.213
> 
> 标签：android, crash, forceclose

我的应用程序有问题。启动“FusRoDAHnomusic”活动时，它会崩溃。我只是得到一个力量接近？

## FusRoDAH活动：

```
package com.frede.fusrodah;
import android.app.Activity;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.widget.Button;
import android.widget.RelativeLayout;
import com.google.ads.AdRequest;
import com.google.ads.AdSize;
import com.google.ads.AdView;

public class FusRoDAHActivity extends Activity {
    private AdView adView2;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.main);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        Button next = (Button) findViewById(R.id.button1);
        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent myIntent = new Intent(view.getContext(), FusRoDAH.class);
                startActivityForResult(myIntent, 0);
            }
        });

        Button next2 = (Button) findViewById(R.id.button4);
        next2.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent myIntent = new Intent(view.getContext(), FusRoDAHnomusic.class);
                startActivityForResult(myIntent, 0);
            }
        });

        // Create an ad.
        adView2 = new AdView(this, AdSize.BANNER, "XXXXXXXXXXXX");

        // Add the AdView to the view hierarchy. The view will have no size
        // until the ad is loaded.
        RelativeLayout layout = (RelativeLayout) findViewById(R.id.main1);
        layout.addView(adView2);

        // Create an ad request. Check logcat output for the hashed device ID to
        // get test ads on a physical device.
        AdRequest adRequest = new AdRequest();

        // Start loading the ad in the background.
        adView2.loadAd(adRequest);
    }

    /** Called before the activity is destroyed. */
    @Override
    public void onDestroy() {
        // Destroy the AdView.
        if (adView2 != null) {
            adView2.destroy();
        }
        super.onDestroy();
    }
} 
```

## FusRoDAH 音乐：

```
package com.frede.fusrodah;
import android.app.Activity;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.widget.Button;
import android.widget.RelativeLayout;
import com.google.ads.AdRequest;
import com.google.ads.AdSize;
import com.google.ads.AdView;

public class FusRoDAHnomusic extends Activity {
    private AdView adView3;
    @Override
    public void onBackPressed() {
        return;
    }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.fusrodahnomusic);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        final MediaPlayer mediaPlayer = MediaPlayer.create(getBaseContext(), R.raw.fusrodahnomusic);
        mediaPlayer.start(); // no need to call prepare(); create() does that for you

        Button next = (Button) findViewById(R.id.button3);
        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                mediaPlayer.stop();
                Intent intent = new Intent();
                setResult(RESULT_OK, intent);
                finish();
            }
        });

        // Create an ad.
        adView3 = new AdView(this, AdSize.BANNER, "XXXXXXXXXX");

        // Add the AdView to the view hierarchy. The view will have no size
        // until the ad is loaded.
        RelativeLayout layout = (RelativeLayout) findViewById(R.id.main1);
        layout.addView(adView3);

        // Create an ad request. Check logcat output for the hashed device ID to
        // get test ads on a physical device.
        AdRequest adRequest = new AdRequest();

        // Start loading the ad in the background.
        adView3.loadAd(adRequest);
    }

    /** Called before the activity is destroyed. */
    @Override
    public void onDestroy() {
        // Destroy the AdView.
            if (adView3 != null) {
                adView3.destroy();
            }

            super.onDestroy();
        }
    }
} 
```

## FUS RO DAH：

```
package com.frede.fusrodah;

import android.app.Activity;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.view.Window;
import android.widget.Button;
import android.widget.RelativeLayout;
import com.google.ads.AdRequest;
import com.google.ads.AdSize;
import com.google.ads.AdView;

public class FusRoDAH extends Activity {
    private AdView adView;

    @Override
    public void onBackPressed() {
        return;
    }

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.fusrodah);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        final MediaPlayer mediaPlayer = MediaPlayer.create(getBaseContext(), R.raw.fusrodah);
        mediaPlayer.start(); // no need to call prepare(); create() does that for you
        Button next = (Button) findViewById(R.id.button2);
        next.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                mediaPlayer.stop();
                Intent intent = new Intent();
                setResult(RESULT_OK, intent);
                finish();
            }
        });

        // Create an ad.
        adView = new AdView(this, AdSize.BANNER, "XXXXXXXXXXXX");

        // Add the AdView to the view hierarchy. The view will have no size
        // until the ad is loaded.
        RelativeLayout layout = (RelativeLayout) findViewById(R.id.fusrodah);
        layout.addView(adView);

        // Create an ad request. Check logcat output for the hashed device ID to
        // get test ads on a physical device.
        AdRequest adRequest = new AdRequest();

        // Start loading the ad in the background.
        adView.loadAd(adRequest);
    }

    /** Called before the activity is destroyed. */
    @Override
    public void onDestroy() {
        // Destroy the AdView.
        if (adView != null) {
            adView.destroy();
        }
        super.onDestroy();
    };
} 
```

日志猫：

```
03-31 22:06:05.485: D/webviewglue(797): nativeDestroy view: 0x3ab4f0
03-31 22:06:05.494: D/webviewglue(797): nativeDestroy view: 0x3ab3b8
03-31 22:06:05.505: D/dalvikvm(797): GC freed 393 objects / 17312 bytes in 267ms
03-31 22:06:05.514: E/webcoreglue(797): The real object has been deleted
03-31 22:06:05.544: E/webcoreglue(797): The real object has been deleted
03-31 22:06:07.394: W/MediaPlayer(797): info/warning (1, 44)
03-31 22:06:08.234: D/AndroidRuntime(797): Shutting down VM
03-31 22:06:08.254: W/dalvikvm(797): threadid=3: thread exiting with uncaught exception     (group=0x4001b188)
03-31 22:06:08.274: E/AndroidRuntime(797): Uncaught handler: thread main exiting due to uncaught exception
03-31 22:06:08.345: E/AndroidRuntime(797): java.lang.RuntimeException: Unable to start         activity ComponentInfo{com.frede.fusrodah/com.frede.fusrodah.FusRoDAHnomusic}:     java.lang.NullPointerException
03-31 22:06:08.345: E/AndroidRuntime(797):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2496)
03-31 22:06:08.345: E/AndroidRuntime(797):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
03-31 22:06:08.345: E/AndroidRuntime(797):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
03-31 22:06:08.345: E/AndroidRuntime(797):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
03-31 22:06:08.345: E/AndroidRuntime(797):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-31 22:06:08.345: E/AndroidRuntime(797):  at android.os.Looper.loop(Looper.java:123)
03-31 22:06:08.345: E/AndroidRuntime(797):  at android.app.ActivityThread.main(ActivityThread.java:4363)
03-31 22:06:08.345: E/AndroidRuntime(797):  at java.lang.reflect.Method.invokeNative(Native Method)
03-31 22:06:08.345: E/AndroidRuntime(797):  at java.lang.reflect.Method.invoke(Method.java:521)
03-31 22:06:08.345: E/AndroidRuntime(797):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
03-31 22:06:08.345: E/AndroidRuntime(797):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
03-31 22:06:08.345: E/AndroidRuntime(797):  at dalvik.system.NativeStart.main(Native Method)
03-31 22:06:08.345: E/AndroidRuntime(797): Caused by: java.lang.NullPointerException
03-31 22:06:08.345: E/AndroidRuntime(797):  at                 com.frede.fusrodah.FusRoDAHnomusic.onCreate(FusRoDAHnomusic.java:66)
03-31 22:06:08.345: E/AndroidRuntime(797):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
03-31 22:06:08.345: E/AndroidRuntime(797):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
03-31 22:06:08.345: E/AndroidRuntime(797):  ... 11 more
03-31 22:06:08.475: I/dalvikvm(797): threadid=7: reacting to signal 3
03-31 22:06:08.704: I/dalvikvm(797): Wrote stack trace to '/data/anr/traces.txt'
03-31 22:06:54.401: I/Process(797): Sending signal. PID: 797 SIG: 9 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:01:49.710

只需阅读您的堆栈跟踪。它`NullPointerException`在第 66 行说。65-66 是这样的：

```
RelativeLayout layout = (RelativeLayout) findViewById(R.id.main1);
layout.addView(adView3); 
```

所以这意味着`layout`这`null`意味着可能`main1`不在那个布局中。

# zend-framework - Zend 表单元素来自数据库

> ID：10519142
> 
> 赞同：-1
> 
> 时间：2012-05-09T15:22:47.810
> 
> 标签：zend-framework, zend-form

目前，我一直在使用 zend 框架为订单页面编写编辑功能

情况如下：

一个订单包含多个项目

```
Eg Order Number 1

Consists of Items

OrderListId   OrderId    title      Sent    dateSent     trackingNumber 
     1           1        Book A     0       12/12/12         44444
     2           1        Book B     1       10/01/12         51223
     3           1        Book C     0       01/02/12         33353
     and so on... 
```

**请注意：表存储在数据库中**

我需要有一个页面，用户可以在其中编辑标题、已发送、日期发送和 trackingNumber 字段。

如何使用 zend 表单填充这些字段以进行编辑。因为我想要一页，所以他们可以编辑所有这些订单列表项。而不是用户必须单击后退和前进来单独编辑每个订单列表项。

解决这种情况的最佳方法是什么？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T10:34:19.123

不久前我遇到了类似的问题，我想出了一个解决方案，我只是在表格行的末尾附加了一个更新链接，并填充了一个用于更新的表单，同时仍然显示当前信息。

以下代码示例是在我知道我在用 ZF 做什么之前构建的，所以它们可能有点混乱。我最终得到了处理我所有 CRUD 操作的单一视图。

**为清楚起见，删除了所有 css 选择器
显示视图：

```
<?php if (isset($this->leadtracks)): ?>
    <form method="post" action="/admin/track/deletetrack">
        <table>
            <tr>
                <th colspan="5"><?php $this->tableHeader() ?></th>
            </tr>
            <tr>
                <th>Select</th>
                <th>Shift</th>
                <th>Days Off</th>
                <th>Slots</th>
                <th>&nbsp;&nbsp;</th>
            </tr>
            <tr>
                <?php
                //begin foreach loop using alternate syntax
                foreach ($this->leadtracks as $lt):
                    ?>
                    <td><input type="checkbox" name="trackid[]"
                               value="<?php
            //trackid as value for checkbox
            echo $lt->trackid
                    ?>" style="width: 2px" /></td>
                    <td><?php
                       //find and display shift name
                       $lt->getShift();
                    ?></td>
                    <td><?php $lt->getDays(); ?></td>
                    <td><?php echo $this->escape($lt['qty'])?></td>
                    <td><a href="<?php
                //link to update action passing trackid and bidlocationid values
                echo $this->url(array('module' => 'admin',
                                      'controller' => 'track',
                                      'action' => 'updatetrack',
                                      'trackid' => $lt['trackid'],
                                      'bidlocationid' => $lt['bidlocationid']))
                    ?>">Update</a></td>

                </tr>
            <?php endforeach ?>
            <tr>
                <th colspan="5">
                    <input type="submit" name="submit" value="Delete Selected" />
                </th>
            </tr>
        </table>
    <?php endif; ?>
    <!-- further code removed for brevity -->
</form> 
```

updateAction()，只有一个action用于演示：

```
public function updatetrackAction() {

        //get form set new label and assign to view
        $form = new Admin_Form_Track();
        $form->submit->setLabel('Update Track');
        $form->addTrack->setLegend('Update A Track');
        $this->view->form = $form;

        try {
            //check is post and is valid and get values from form
            if ($this->getRequest()->isPost()) {
                if ($form->isValid($this->getRequest()->getPost())) {

                    $data = $form->getValues();
                    $trackId = $data['trackid'];

                    //save update data to database
                    $update = new Model();
                    $update->update($trackId, $data);
                    //generate meesage
                    $this->_helper->flashMessenger->addMessage(Zend_Registry::get('config')
                                                  ->messages->trackupdate->successful);
                    $this->getHelper('Redirector')->gotoSimple('addtrack');
                } else {
                    //if form is not vaild populate form for resubmission
                    $form->populate($this->getRequest()->getPost());
                }
            } else {
                //if form is not posted populate form with data from database
                $trackId = $this->_getParam('trackid', 0);
                if ($trackId > 0) {
                    $z = new Model();
                    $y = $z->getTrack($trackId)->toArray();
                    $form->populate($y);
                }
            }
        } catch (Zend_Exception $e) {
            $this->_helper->flashMessenger->addMessage($e->getMessage()->getTrace());
            $this->_redirect($this->getRequest()->getRequestUri());
        }
    } 
```

addAction() 和 deleteAction() 非常相似，并且使用通过 action() 助手调用的相同视图脚本。
结果是一个页面，其中添加、更新和删除操作是从用户认为的一个页面执行的（用于多次删除的复选框和用于更新的链接，每次刷新都会显示当前数据）。
尽管我确实将表单从一侧移动到另一侧作为一种视觉线索，但这并不重要，因为每个页面上的所有操作都可用。

更新视图：

```
<div>
    <h3><?php echo ucwords($this->escape(strtoupper($this->station) . ' - ' . $this->bidloc)); //page header ?></h3>
    <?php echo $this->form //edit/add form ?>
</div>
<div>
    <?php echo $this->action('displaytrack', 'track', 'admin') //display view ?>
</div> 
```

我确信这可以使用 partial() 视图助手来完成，而无需使用 action() 助手，而且我确信它可以内联完成，我只是没有花时间弄清楚如何去做。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:53:26.293

我建议使用[ZF 数据网格](http://zfdatagrid.com/)。

# jquery - 使用 Sizzle 解析 XML 文件？

> ID：10519144
> 
> 赞同：0
> 
> 时间：2012-05-09T15:22:53.067
> 
> 标签：jquery, xml, sizzle

我创建了一个库，用于从一组使用 jQuery 的 XML 文件中解析和提取信息。所以做这样的事情很简单：

```
$xml = $($.parseXML(xmlText))
title = $xml.find(".title>longName").text() 
```

然后我意识到我的小库不应该依赖于所有的 jQuery，而且我可能只使用 Sizzle 库就可以获得我想要的东西，因为这就是 jQuery 的 .find 方法的来源。但是，我一出门就遇到了麻烦。

Sizzle 似乎没有 parseXML 函数。有没有办法传入一大段 XML 文本并取回可以搜索的对象？

我注意到您可以将上下文传递给 Sizzle 的 find 函数。但是，Sizzle.find(".title", xmlText) 找不到任何东西。

有任何想法吗？是否可以像上面使用 jQuery 一样使用 Sizzle 解析 XML？

注意：我希望能够以无头方式或在 Node 上运行它，所以我不想使用像 DOMParser 这样的浏览器依赖项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:33:59.337

你可以`parseXML`从 jQuery 中使用：

```
function parseXML( data ) {
    if ( typeof data !== "string" || !data ) {
        return null;
    }
    var xml, tmp;
    try {
        if ( window.DOMParser ) { // Standard
            tmp = new DOMParser();
            xml = tmp.parseFromString( data , "text/xml" );
        } else { // IE
            xml = new ActiveXObject( "Microsoft.XMLDOM" );
            xml.async = "false";
            xml.loadXML( data );
        }
    } catch( e ) {
        xml = undefined;
    }
    if ( !xml || !xml.documentElement || xml.getElementsByTagName( "parsererror" ).length ) {
        throw new Error( "Invalid XML: " + data );
    }
    return xml;
} 
```

# c++ - C++中的命名空间

> ID：10519152
> 
> 赞同：1
> 
> 时间：2012-05-09T15:23:21.597
> 
> 标签：c++, namespaces

如何在 C++ 中使用可在不同头文件中访问的命名空间。可以说我在下面有这个：

```
// namespaces
#include <iostream>
using namespace std;

namespace first
{
  int var = 5;
}

namespace second
{
  double var = 3.1416;
}

int main () {
  cout << first::var << endl;
  cout << second::var << endl;
  return 0;
} 
```

我想在另一个类中使用第一个命名空间中的 var 变量...在另一个 .h 和 .cpp 文件中定义和实现？

```
//server.h
    #ifndef SERVER_H
    #define SERVER_H
    class server{
       server();
    //blah
    };
    #endif SERVER_H

//server.cpp
server::server()
{
    first::var = 3;
} 
```

可以这样做吗？当我尝试时，我收到一个错误，指出我的命名空间未定义。如果我在 .h 或 .cpp 中首先使用命名空间，则表示没有首先调用命名空间......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T15:28:18.163

除了在标题中包含命名空间之外，您还需要创建变量 extern：

```
//header.h
namespace first
{
  extern int var;
}

//implementation.cpp
#include "header.h"
namespace first
{
   int var = 5;
} 
```

如果变量不是`extern`，则在包含标头的任何位置都会生成一个符号，并且您将收到链接器错误。

如果您不想要额外的标头，您可以将变量声明为`extern`在您想要使用它的同一命名空间中：

```
//server.cpp
namespace first
{
   extern int var;
}
server::server()
{
    first::var = 3;
} 
```

**请注意**，一些答案可能声称您应该创建变量`static`。这是错误的，尽管它会编译，因为这样变量就不会充当全局变量。将为每个翻译单元创建一个副本。

# excel - 查找两个值

> ID：10519154
> 
> 赞同：0
> 
> 时间：2012-05-09T15:23:29.137
> 
> 标签：excel, match, vlookup

我正在尝试检查两个值是否并排存在。

在一张纸上我有：

```
Country     Language
UK          EN
UK          DE
UK          ES 
```

在另一张纸上我也有同样的情况。

我需要做的是确保 UK 和 EN 在第二张表的版本中匹配。

atm 我一直在尝试类似的东西`=VLOOKUP(B2, Sheet1!$A$1:$H$230, MATCH(Sheet2!C2, Sheet1!$D$1:$D$230, 0), FALSE)`

但我没有运气。

有谁可以帮我离开这里吗。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:46:05.790

如果你只需要一个真假结果，你可以使用 COUNTIFS

```
=COUNTIFS(Sheet1!$A$2:$A$4;A2;Sheet1!$B$2:$B$4;B2) 
```

对于 Excel 2003 和更早版本的使用

```
=COUNTIF(Sheet1!$A$2:$A$4;A2)*COUNTIF(Sheet1!$B$2:$B$4;B2) 
```

这将返回命中数，如果你只想 TRUE 或 FALSE 像这样包装它：

```
=COUNTIFS(Sheet1!$A$2:$A$4;A2;Sheet1!$B$2:$B$4;B2) > 0 
```

# jquery - jQuery 验证 - 验证特定字段的按键上的特定规则/方法

> ID：10519156
> 
> 赞同：3
> 
> 时间：2012-05-09T15:23:38.183
> 
> 标签：jquery, regex, jquery-validate

使用 jquery 验证： [http ://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

我还在模糊验证每个字段：

```
//validate each element on blur
    $('input, select, radio, checkbox').blur(function(){
        $("#createAccount").validate().element(this);
    }); 
```

我为密码添加了另一种方法 - 字母、数字、无空格/破折号：

```
//Additional validation methods:
jQuery.validator.addMethod("passwordCheck", function(value, element) {
    return this.optional(element) || /^[a-zA-Z0-9]+$/.test(value);
}, "Invalid characters"); 
```

几个问题：

我想验证除 passwordCheck 方法之外的所有内容的模糊密码字段。因此，其他方法（例如必需的方法）应该在模糊时验证 - 但如果输入了无效字符，那么我希望验证器随后触发该方法。

此外，在添加方法时，有没有办法将错误消息放入验证调用的消息部分（只是将它们全部保存在一个地方）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-14T13:14:29.123

这就是我为实现此目的所做的：

对于需要被忽略的输入，直到它有一个值，我在输入中添加了一个类 - “忽略”

```
$('.ignore').blur(function(){
        if( $(this).val()=="") {
         $(this).parent().removeClass("inputSuccess");
        }
    }); 
```

在函数中，如果输入具有类忽略且未输入任何值，则删除我在验证调用中设置的有效类。输入值时，将在这些项目上触发正常验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T09:40:03.953

HTML5 支持该`required`属性。因此，您可以通过以下方式进行检查：

```
<input type="password" name="password" required /> 
```

和

```
return !$(element).hasAttr("required"); 
```

但是，这会强制您在提交表单之前输入该字段。此外，您可以创建一个自定义属性，但我不知道这是否是一个好的解决方案。

[http://www.w3.org/WAI/GL/wiki/Techniques/HTML5/Using_the_required_attribute_to_indicate_a_required_input_field](http://www.w3.org/WAI/GL/wiki/Techniques/HTML5/Using_the_required_attribute_to_indicate_a_required_input_field)

# ruby-on-rails - 任何人都可以讲述 Ruby on Rails 中的 Grid 视图吗？

> ID：10519157
> 
> 赞同：1
> 
> 时间：2012-05-09T15:23:42.163
> 
> 标签：ruby-on-rails

我的数据库中有大量数据，我想使用 Ruby On Rails 在网格视图中显示这些数据。网格视图应该允许我更新单元格和删除行，类似于 ASP.NET 中的网格视图控件提供的功能。

有人知道 Ruby-On-Rails 中的类似功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:09:14.657

看看Extjs。你的 Rails 控制器可以向 Extjs 网格提供 JSON 数据

# vb.net - 捕获应用程序崩溃事件

> ID：10519161
> 
> 赞同：4
> 
> 时间：2012-05-09T15:23:56.810
> 
> 标签：vb.net, winforms, crash, crash-reports

我在 VB.Net 中做了一个应用程序。但是有些用户在启动时会遇到崩溃。那就是“一个问题导致该程序无法正常工作”，只需一个按钮“关闭程序”。由于应用程序加载时发生了很多事情，是否有可能知道导致问题的原因？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T15:34:48.843

如果在您的项目属性中启用了“应用程序框架”，请单击“应用程序”项目属性页面上的“查看应用程序事件”按钮。然后添加一个事件处理程序：

```
Partial Friend Class MyApplication
    Private Sub MyApplication_UnhandledException(ByVal sender As Object, ByVal e As Microsoft.VisualBasic.ApplicationServices.UnhandledExceptionEventArgs) Handles Me.UnhandledException
        ' ...
    End Sub
End Class 
```

如果您不使用应用程序框架，则应在整个`Main`方法周围放置一个 try catch 块。但是，这只会捕获主线程上发生的异常。如果您的应用程序是多线程的，您可以通过创建如下方法来处理来自所有线程的异常：

```
Public Sub UnhandledExceptionHandler(ByVal sender As Object, ByVal e As UnhandledExceptionEventArgs)
    ' ...
End Sub 
```

然后将其附加到您当前域的`UnhandledException`事件中，如下所示：

```
AddHandler AppDomain.CurrentDomain.UnhandledException, AddressOf UnhandledExceptionHandler 
```

然后，无论当前线程如何，都会针对您域中任何地方的所有未处理异常调用该事件处理程序。

# php - php中不一致的页面重定向

> ID：10519172
> 
> 赞同：1
> 
> 时间：2012-05-09T15:24:47.337
> 
> 标签：php

我已经在我的管理面板中的所有页面上设置了会话，如下所示：

```
session_start();

if(!isset($_SESSION['username']))
   header("Location: login.php?e=please+login+first"); 
```

这似乎在我的所有页面上都可以正常工作，但是现在当我刷新页面或单击链接时，页面会自动重定向到`login.php`. 这似乎很少发生。我不明白是什么导致了这个问题

例如，我的菜单栏如下：

```
home : doctors: hospitals:  feedback 
```

如果我在`hospitals.php`，几分钟后我点击`feedback.php`（或任何其他链接）我被重定向到`login.php`。下次如果我再次单击该链接，我将不会被重定向

这是我的 dologin.php 代码

```
$qry = "select * from admin where username='$uname' and password='$pwd'";
//echo $qry;exit;
$rs = mysql_query($qry,$con);
if($rec= mysql_fetch_array($rs))
{
  $_SESSION['username'] = $rec['username'];
    header("Location: index.php");
}
 else if (empty($uname))
{
     header("Location: login.php?e=Please+enter+username");
}
 else
 {
     header("Location: login.php?e=Invalid+username+or+password");
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:30:11.667

编辑：替换您的查询：

```
$qry = "select * from admin where username='$uname' and password='$pwd'"; 
```

有了这个：

```
$qry = "select * from admin where username='" . $uname . "' and password='" . $pwd . "'"; 
```

还要替换您的：

```
session_start(); 
```

和：

```
if (!isset($_SESSION)) {
  session_start();
} 
```

**建议：**我还建议将在文件之间重用的内容放在 PHP 包含中，例如 header.php。

**PS：**尝试接受更多的答案，它有助于激励人们回答你的问题。也让社区保持活力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:31:34.970

您可以尝试在使用标头重定向之前调用 session_write_close() 以确保会话已关闭。

# java - Java小程序奇怪的运行时性能差异

> ID：10519181
> 
> 赞同：0
> 
> 时间：2012-05-09T15:25:21.630
> 
> 标签：java, performance, applet

我有一个绘制一些简单动画的 Java 小程序。我看到这两种情况之间的性能存在巨大差异：

applet 标记指向本地 jar。动画相当流畅。

applet 标记指向远程服务器上完全相同的 jar。运行速度慢很多倍。

我不是在谈论下载/启动时间，问题在于运行时性能。

我很困惑，因为我认为一旦下载了小程序，它无论如何都会在本地运行，那么有什么区别？

服务器代码：

```
<applet 
 archive="Projects/atmaths_applet/dist/atmaths_applet.jar, 
 Projects/atmaths_applet/dist/lib/atmcore.jar"
 code="com/example/maths/applet/Main.class" width="600" height="400">
  <param name="script" value="a.axs"/>
</applet> 
```

本地代码：

```
<applet archive="/axs/atmaths_applet.jar, /axs/lib/atmcore.jar"
 code="com/example/maths/applet/Main.class"
 width="600" height="400">
  <param name="script" value="/axs/a.axs" />
</applet> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:32:10.273

I have tried running Java2D applications (including the Swing demo in the JDK) via X-Windows and it is VERY slow. If I use VNC or nomachine to the same system, the performance is smooth as expected.

# sharepoint - 通过 Java 访问 Office365 Sharepoint Web 服务 - Axis2

> ID：10519190
> 
> 赞同：5
> 
> 时间：2012-05-09T15:25:45.050
> 
> 标签：sharepoint, axis2, ntlm, claims-based-identity, office365

我们目前正在构建一个基于 Java 的服务器，该服务器可以通过 Axis2 与 Sharepoint 2007/2010 和 Office365 版本的 web 服务进行交互。似乎我们可以让基本/NTLM 身份验证与 Sharepoint 2007/2010 一起使用，但不能与 Office365 版本一起使用。

这可能是由于 Office365 版本仅支持基于声明的身份验证。我们真的可以通过 Java 进行身份验证吗？是否有对基于声明的身份验证的开源支持？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:16:33.867

基本上，您需要通过“手动”登录来生成 cookie。如果您使用 Microsoft 帐户，这将是看起来像 Live 的登录表单。

我现在不知道有任何 Java 实现。
您可以在此处找到 C# 中的实现：http: [//www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx](http://www.wictorwilen.se/Post/How-to-do-active-authentication-to-Office-365-and-SharePoint-Online.aspx)

# php - 自定义可重复的 Wordpress 自定义字段

> ID：10519192
> 
> 赞同：1
> 
> 时间：2012-05-09T15:25:49.840
> 
> 标签：php, wordpress, custom-fields, meta-boxes

遵循[本](http://wp.tutsplus.com/tutorials/reusable-custom-meta-boxes-part-3-extra-fields/)教程后，我成功创建了一个可重复类型的自定义字段。但是，我想把它带到下一个阶段，并拥有更复杂和先进的可重复领域。

我的元框数组定义如下：

```
array (
      'label'   => 'Repeatable',
      'desc'    => 'A description for the field.',
      'id'      => 'custom_repeatable',
      'type'    => 'repeatable'
) 
```

它使用以下代码显示：

```
 case 'repeatable':
        echo '
            <a class="repeatable-add button" href="#">+</a>
            <ul id="'.$field['id'].'-repeatable" class="custom_repeatable">';
            $i = 0;
            if ($meta) {
                foreach($meta as $row) {
                    echo '
                        <li><span class="sort hndle">|||</span>
                        <input type="text" name="'.$field['id'].'['.$i.']" id="'.$field['id'].'" value="'.$row.'" size="30" />
                        <a class="repeatable-remove button" href="#">-</a></li>';
                        $i++;
                }
            } else {
                echo '
                    <li><span class="sort hndle">|||</span>
                    <input type="text" name="'.$field['id'].'['.$i.']" id="'.$field['id'].'" value="" size="30" />
                    <a class="repeatable-remove button" href="#">-</a></li>';
            }
        echo '</ul>
            <span class="description">'.$field['desc'].'</span>';
break; 
```

我想做的第一件事是添加为第二个输入字段，从而保存两个独立的值。

但是，我不确定从哪里开始。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T09:48:44.317

您可以使用该教程的最新版本代码。

它在 github 中： [https ://github.com/tammyhart/Reusable-Custom-WordPress-Meta-Boxes](https://github.com/tammyhart/Reusable-Custom-WordPress-Meta-Boxes)

本周已更新，现在可重复的内容可以有多个字段（文本、图像等...）

# android - AndEngine：示例示例不起作用

> ID：10519194
> 
> 赞同：-2
> 
> 时间：2012-05-09T15:26:01.367
> 
> 标签：android, andengine

我刚刚从 AndEngine 主页复制了一个示例，但应用程序总是被迫在模拟器中停止:((。请帮助我。这是主要活动：

```
 public class HelloMe extends BaseGameActivity {

   private static final int CAMERA_WIDTH = 720;

   private static final int CAMERA_HEIGHT = 480;

  // ===========================================================
  // Fields
  // ===========================================================

   private Camera mCamera;
   private BitmapTextureAtlas mFontTexture;
   private Font mFont;

@Override
public Engine onLoadEngine() {
    // TODO Auto-generated method stub
    this.mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
       return new Engine(new EngineOptions(true, ScreenOrientation.LANDSCAPE, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), this.mCamera));

}

@Override
public void onLoadResources() {
    // TODO Auto-generated method stub
    this.mFontTexture = new BitmapTextureAtlas(256, 256, TextureOptions.BILINEAR_PREMULTIPLYALPHA);

    this.mFont = new Font(this.mFontTexture, Typeface.create(Typeface.DEFAULT, Typeface.BOLD), 32, true, Color.BLACK);

    this.mEngine.getTextureManager().loadTexture(this.mFontTexture);
    this.getFontManager().loadFont(this.mFont);

}

@Override
public Scene onLoadScene() {

    this.mEngine.registerUpdateHandler(new FPSLogger());

    final Scene scene = new Scene();
    scene.setBackground(new ColorBackground(0.09804f, 0.6274f, 0.8784f));

    final Text textCenter = new Text(100, 60, this.mFont, "Hello AndEngine!\nYou can even   have multilined text!", HorizontalAlign.CENTER);
    final Text textLeft = new Text(100, 200, this.mFont, "Also left aligned!\nLorem ipsum dolor sit amat...", HorizontalAlign.LEFT);
    final Text textRight = new Text(100, 340, this.mFont, "And right aligned!\nLorem ipsum dolor sit amat...", HorizontalAlign.RIGHT);

    scene.attachChild(textCenter);
    scene.attachChild(textLeft);
    scene.attachChild(textRight);

    return scene;
}

@Override
public void onLoadComplete() {
    // TODO Auto-generated method stub

}

} 
```

和清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.hello"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".HelloMe"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
     </activity>
 </application>

</manifest> 
```

我使用的是Android 4.0.3，并且已经在Build Path中添加了andengine.jar。AndEngine 只能在 Android 2.2 上运行吗？提前致谢：D。

PS：这是堆栈跟踪：

```
 05-09 22:04:08.311: E/AndroidRuntime(628): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.hello/com.hello.HelloMe}: java.lang.ClassNotFoundException: com.hello.HelloMe
        05-09 22:04:08.311: E/AndroidRuntime(628):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
        05-09 22:04:08.311: E/AndroidRuntime(628):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
        05-09 22:04:08.311: E/AndroidRuntime(628):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
        05-09 22:04:08.311: E/AndroidRuntime(628):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
        05-09 22:04:08.311: E/AndroidRuntime(628):  at android.os.Handler.dispatchMessage(Handler.java:99)
        05-09 22:04:08.311: E/AndroidRuntime(628):  at android.os.Looper.loop(Looper.java:137)
        05-09 22:04:08.311: E/AndroidRuntime(628):  at android.app.ActivityThread.main(ActivityThread.java:4424)
        05-09 22:04:08.311: E/AndroidRuntime(628):  at java.lang.reflect.Method.invokeNative(Native Method)
        05-09 22:04:08.311: E/AndroidRuntime(628):  at java.lang.reflect.Method.invoke(Method.java:511)
        05-09 22:04:08.311: E/AndroidRuntime(628):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
        05-09 22:04:08.311: E/AndroidRuntime(628):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
        05-09 22:04:08.311: E/AndroidRuntime(628):  at dalvik.system.NativeStart.main(Native Method)
        05-09 22:04:08.311: E/AndroidRuntime(628): Caused by: java.lang.ClassNotFoundException: com.hello.HelloMe
        05-09 22:04:08.311: E/AndroidRuntime(628):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
        05-09 22:04:08.311: E/AndroidRuntime(628):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
        05-09 22:04:08.311: E/AndroidRuntime(628):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
        05-09 22:04:08.311: E/AndroidRuntime(628):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
        05-09 22:04:08.311: E/AndroidRuntime(628):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T11:21:04.467

AndEngine，你使用的版本看起来不像最新的，不支持模拟器。尝试插入手机并运行它，它可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:24:32.400

添加“libs”文件夹并复制`andengine.jar`进去并编译。

# sql - Oracle 11g - 带时间戳的 Sql

> ID：10519195
> 
> 赞同：0
> 
> 时间：2012-05-09T15:26:08.607
> 
> 标签：sql, timestamp, oracle11g

我有一个名为 Evrak 的表，它有两列 Product_Date [timestamp(6)] 和 Evrak_Name[varchar2(50)]。有一条记录，名称为 Evrak Test，Product_Date 为
25-APR-12 12.00.00.000000000 PM。

当我想运行类似的查询时；

```
select * from Evrak Where Evrak.Product_Date  = TO_TIMESTAMP ('25.04.2012:00:00:00','DD.MM.YYYY:HH24:MI:SS') 
```

它确实返回了一个空记录，我尝试更改格式类型并使用了 to_date、to_char 方法但没有设法获取记录。我在这里想念什么？或者在查询时间戳列时有什么特殊用法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T21:02:51.273

尝试：

```
select * 
 from Evrak 
Where Evrak.Product_Date  = TO_TIMESTAMP ('25.04.2012:12:00:00','DD.MM.YYYY:HH24:MI:SS') 
```

既然你想`25-APR-12 12.00.00.000000000 PM`不想`25-APR-12 12.00.00.000000000 AM`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:31:55.883

Time stamps are finicky. Like floating point numbers, there may be insignificant bits that affect comparisons.

I would suggest returning things within a range. For instance, the following query returns time stamps within one second.

```
select *
from Evrak
Where abs(Evrak.Product_Date - TO_TIMESTAMP ('25.04.2012:00:00:00', 'DD.MM.YYYY:HH24:MI:SS')) < 1.0/(24*60*60) 
```

# google-app-engine - 在 Google App Engine 中将当前用户设置为自己创建的用户对象

> ID：10519199
> 
> 赞同：0
> 
> 时间：2012-05-09T15:26:36.017
> 
> 标签：google-app-engine, session

在 Google App Engine 中，您可以使用任何电子邮件地址创建用户对象。这些帐户不会与谷歌帐户连接。有没有办法将当前用户设置为这样的用户，而无需滚动我自己的会话管理或使用来自 webapp2 的会话？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:22:34.060

App Engine[用户 API](https://developers.google.com/appengine/docs/python/users/)支持 Google 帐户或 OpenID 标识符。

如果您需要不同的东西，您必须自己实施用户管理（或使用第三方库，如 webapp2.extras）

# dll - JNA 尝试访问本机 DLL 并获取模块未找到错误，缺少依赖项

> ID：10519208
> 
> 赞同：1
> 
> 时间：2012-05-09T15:26:52.410
> 
> 标签：dll, jna, unsatisfiedlinkerror, dependency-walker

我已经安装了 Visual Studio 2010 并且有一个我从其他人那里得到的项目，我可以成功地构建它而不会出现任何错误。我得到一个 Wrapper.dll，我想使用 JNA 访问它。我正在使用 Win7 64 位。

但我收到错误：java.lang.UnsatisfiedLinkError: Unable to load library 'Wrapper': The specified module could not be found。

Wrapper.dll 当然在正确的文件夹中，它是一个 32 位的 dll，我的 Java 程序也使用 32 位的 JRE，所以这不是错误的原因。

我使用 DependencyWalker 检查是否缺少 *.dll：

*   MSVCP80.DLL
*   MSVCR80.DLL
*   GPSVC.DLL
*   IESHIMS.DLL

是的，有一些缺失。我可以断定该错误与这些 DLL 丢失有关吗？但是为什么 Visual Studio 编译正确并且不抛出错误呢？如何解决这个问题以便访问 Wrapper.dll 中的这些函数？

我还读到下载 dll 可能不是正确的做法！（我知道 Wrapper.dll 依赖于另一个在 Visual Studio 2005 中构建的 dll 或源代码，如果感兴趣的话。）

**编辑：**

我发现 Wrapper.dll 依赖于其他三个可能是基于 MSVS2005 构建的 dll。这些需要上面提到的DLL（用dependencywalker检查），我猜因此Wrapper.dll也链接它们。

那么我该怎么做才能摆脱这些旧的 dll 呢？我是否需要使用 VS2010 构建其他三个 DLL，或者这是一个总是会出现的问题，这意味着您需要复制粘贴旧 DLL 才能使用依赖于这些的预编译库。

有没有办法让程序也可以在任何其他系统上运行而无需复制粘贴这些 DLL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:57:18.560

所有必需的 DLL 必须可供系统加载。如果您定义 jna.library.path，JNA 将在其中查找最初加载的 DLL 以及任何相关的 DLL。此外，还将搜索 java.library.path（本质上是 PATH）以查找相关的 DLL。

在该环境中构建、调试和运行代码时，MSVS 经常使用除 PATH 之外的路径。

解决方案：

a) 移除你并不真正需要的依赖；这可能包括告诉 MSVS 以不同的方式构建您的 DLL

b) 在您的自定义 DLL 旁边包含非系统 DLL（或在 PATH/java.library.path 中包含它们的位置）

**编辑**

a）您可以在与您的目录相同的目录中包含有问题的 DLL。这对目标系统的影响相当小，但如果它们是预期会在任何系统上的 DLL，则不必这样做。最好调整 java.library.path 以便所有系统 DLL 都可以访问。

b) 您可以重新编译您的依赖 DLL，并更加注意向后兼容性和显式链接。但是，根据 DLL 使用的功能，您可能无法删除依赖项。

MSVC[RP]80.DLL 分别是 C 和 C++ 运行时；您可能会或可能无法链接到以前的版本。

IESHIMS.DLL 是 IE 的一部分，应该在系统上，但可能位于您的程序无法访问的路径中。

GPSVC.DLL 与组安全策略有关，因此它应该在系统上可用（每当引入 DLL 时取模）。

# java - Android：在 MyLocationOverlay 中进行反向地理编码的最佳方法？

> ID：10519213
> 
> 赞同：0
> 
> 时间：2012-05-09T15:27:21.930
> 
> 标签：java, android, google-maps

我正在使用 MyLocationOverlay 在用户驾驶时使用用户位置更新地图。我正在尝试实现一个文本视图，以街道名称、城市和州的形式显示他们的当前位置。这一切都很好，但似乎 MyLocationOverlay 的更新频率导致地图滞后并冻结一两秒钟。我不确定文本 .setText 方法是否导致它冻结或该方法被调用的次数。使用名称城市和州更新用户的正确方法是什么？我正在使用一个新线程，这是正确的方法吗？这是我在 MyLocationOverlay 的 onLocationChanged 方法中的代码：

```
@Override
public synchronized void onLocationChanged(Location location) {
    super.onLocationChanged(location);
    mLocation = location;
    // only move to new position if enabled and we are in an border-area
    if (this.isMyLocationEnabled() && animateToCurrentLocation) {
        mMapController.animateTo(getMyLocation());
    }

    this.runOnFirstFix(new Runnable() {
        public void run() {
            Log.d(TAG, "Running");
            if (mLocation != null) {
                Geocoder gc = new Geocoder(mContext, Locale.getDefault());

                try 
                {
                    List<Address> addresses = gc.getFromLocation(mLocation.getLatitude(), mLocation.getLongitude(), 1);
                    if (addresses != null && addresses.size() > 0) 
                    {
                        txtStreetAddress.setText(addresses.get(0).getThoroughfare() + " " + addresses.get(0).getLocality() + ", " + addresses.get(0).getAdminArea());
                    }
                } catch (IOException e) 
                {

                }
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:16:37.047

您正在进行的地理编码器调用很可能是您程序中的瓶颈。我会减慢您对地理编码器的请求，看看您是否体验到性能提升。您可能会失去一些粒度，但您的应用程序可能会响应更快。

# iphone - 使用故事板添加的子视图优于手动添加的子视图？

> ID：10519216
> 
> 赞同：0
> 
> 时间：2012-05-09T15:27:28.420
> 
> 标签：iphone, objective-c, ios, xcode, storyboard

我对带有故事板的 x 代码的子视图有一个小问题。

我想用球做一个小应用。您必须单击它们，它们就会消失。我还想要一个暂停菜单。

所以我用故事板制作了一个带有 1 个视图（一般视图）、1 个子视图（暂停菜单）的 viewController（所以我在代码中看不到它们）

我想在这个 viewController 中有一个 EAGLView，所以我这样做了：

```
self.director = [CCDirector sharedDirector];
self.myglView = [EAGLView viewWithFrame:CGRectMake(0, 60, 320, 420)
                                pixelFormat:kEAGLColorFormatRGBA8
                                depthFormat:0       
                         preserveBackbuffer:NO
                                 sharegroup:nil
                              multiSampling:NO
                            numberOfSamples:0                   ];
}

[self.director setOpenGLView:self.myglView];

glBlendFunc(GL_ONE, GL_ONE_MINUS_SRC_ALPHA);
glClearColor(0.0, 0.0, 0.0, 0.0);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

self.myglView.opaque = NO;
self.myglView.backgroundColor = [UIColor clearColor];
[self.view addSubview:self.myglView]; 
```

我在这个 eaglview 中创建的 2D 世界中添加了一些身体（球），这是可行的，但现在当我想暂停游戏时。

我用这个“弹出”暂停菜单：

```
self.pauseView.hidden = false; 
```

出现暂停菜单，但所有球都在暂停菜单上：/

有人看到我的问题是什么吗？^^' 是否有图层或优先子视图之类的东西？

非常感谢您阅读和帮助我:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:34:39.223

如果您在情节提要中添加您的 pauseView，那么它将在您的视图加载时添加，即在您实际添加 EAGLView 之前。添加子视图就像将乐高积木堆叠在一起一样。最后添加的，在顶部。

您应该能够像这样在您的 pauseview 下添加 EAGLView：

```
[self.view insertSubview:self.myglView belowSubview:self.pauseView]; 
```

# c# - 在 C# 中获取套接字对象的流

> ID：10519221
> 
> 赞同：10
> 
> 时间：2012-05-09T15:27:47.220
> 
> 标签：c#, sockets, stream

我有一个通过 TCP/IP 进行通信的客户端-服务器应用程序。
我使用`System.Net.Sockets.Socket`类型对象通过 TCP 进行异步通信。基本上我打开连接发送/接收数据并关闭连接。而我的实现是基于 Socket 类型的对象。
现在我需要使用第三方 dll 来做一些事情。这个 dll 需要一个`System.IO.Stream`类型对象。所以我需要获取我的**Socket对象的****Stream**对象。 我怎样才能做到这一点？ 谢谢你。

 *** * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-09T15:31:33.910

真的很简单。NetworkStream 类的构造函数接受要包装的套接字：

[http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.aspx)

```
// NOTE: This demonstrates disposal of the stream when you are 
// done with it- you may not want that behavior.
using (var myStream = new NetworkStream(mySocket)) {
    my3rdPartyObject.Foo(myStream);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:37:15.513

试试看 System.Net.Sockets.SocketType.Stream ？

或者尝试查看 System.Net.Sockets.NetworkStream ？

[http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.aspx](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.aspx)**

# python - DJANGO：向 ModelMultipleChoiceField 添加“全选”选项？

> ID：10519224
> 
> 赞同：1
> 
> 时间：2012-05-09T15:27:54.597
> 
> 标签：python, django, forms, django-forms

有没有办法向 ModelMultipleChoiceField 添加其他选项？具体来说，我想添加一个“全选”选项，而不是最终用户必须单独选择所有选项。

当前模型形式：

```
class QueryForm(forms.Form):
    book = forms.ModelMultipleChoiceField(queryset=Book.objects.all()) 
```

我想要这样的东西：

```
class QueryForm(forms.Form):
    book = forms.ModelMultipleChoiceField(choices=(('Select All', 'Select All'),(Book.objects.all())) 
```

如何将全选选项添加到模型多项选择字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:47:58.623

这是在 Django 管理员中还是在您自己的表单中？如果是管理员，最简单的解决方案是简单地将字段添加到`ModelAdmin.filter_horizontal`or `ModelAdmin.filter_vertical`。Django 管理员将使用的特殊字段具有内置的“全选”选项。

如果它是您自己的形式，那么 JS 是您最好的选择，正如 @AdamKG 建议的那样。鉴于以下情况：

```
<div class="field">
    <select multiple="multiple" name="my_field">
        <option value="something">Something</option>
        ...
    </select>
    <a href="#" class="select-all">Select All</a>
</div> 
```

这一点 jQuery 应该可以解决问题：

```
$('.select-all').click(function(){
    $('option', $(this).parent()).attr('selected', 'selected');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T16:28:07.923

您需要将您`ModelMultipleChoiceField`的转换为`MultipleChoiceField`从`__init__()`. 添加带有标记（例如“全部”）的“全选”选项，而不是您将从实际模型中获得的 PK。然后只需在 POST 视图中检测到这一点并进行适当的设置。

# json - 在 Selenium 中执行 JSON

> ID：10519226
> 
> 赞同：3
> 
> 时间：2012-05-09T15:28:07.870
> 
> 标签：json, selenium, webdriver

我需要知道在硒测试中执行 JSON 的最简单方法。一个例子是我想 POST { "UserId":"234234" } 并测试返回的内容。目前使用 Advanced REST client chrome app 手动测试。我已经对这个主题进行了很多搜索，但没有遇到任何好的例子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:33:08.380

This doesn't sound like it's best solved by selenium. With Selenium you would interact with the form to get that value to post, and handle the subsequent AJAX response / page refresh. If you wish to POST data you should look at a library that performs those types of operations across the wire.

If you are looking for a HTTP library, then Apache has a [good one](http://hc.apache.org/httpclient-3.x/) (Java based).

# java - guava EventBus：这会/应该与 GWT 兼容吗？

> ID：10519230
> 
> 赞同：3
> 
> 时间：2012-05-09T15:28:23.380
> 
> 标签：java, gwt, reflection, annotations, guava

由于版本 10 guava 提供了[com.google.common.eventbus.EventBus](http://code.google.com/searchframe#UKMs0lhE9bg/trunk/guava/src/com/google/common/eventbus/EventBus.java&q=EventBus%20package%3ahttp://guava-libraries%5C.googlecode%5C.com) - 一个通用的 pub-sub 工具。它在源代码中未标记为与 GWT 兼容。我想知道是否可以将一些自定义代码预处理插入 gwt 编译器以将此（部分基于注释/反射的）API 映射到 javascript 中。

AFAIK 在 GWT java-to-js 编译器中添加了一些其他自定义扩展，例如[com.google.gwt.i18n.client.ConstantsWithLookup](https://developers.google.com/web-toolkit/doc/latest/DevGuideI18nConstants#ConstantsWithLookup)和很可能其他一些。我见过一些实验性的编译器扩展来添加对反射/注释的部分支持，但不确定是否需要它们以防我们处理一组特定的注释并且需要简单的类->方法->注释列表（不是完整的反射API）。

也许有人知道启用 GWT 的这个组件是否是由 guava 开发团队计划的？

谢谢，安东

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T08:38:22.700

这可能比 StackOverflow 更适合 guava-discuss，但是这里的 Guava 团队成员：不，我们不打算这样做。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-01-22T06:55:22.993

只是已经在使用这个（GWT 服务器+客户端兼容）：http: **[//www.gwtproject.org/javadoc/latest/com/google/gwt/event/shared/EventBus.html](http://www.gwtproject.org/javadoc/latest/com/google/gwt/event/shared/EventBus.html)**

在这里（教程）： http: **[//www.gwtproject.org/articles/mvp-architecture.html#events](http://www.gwtproject.org/articles/mvp-architecture.html#events)**

（也在这里回答：[https](https://stackoverflow.com/a/28082823/1915920) ://stackoverflow.com/a/28082823/1915920 ）

# php - 如果只给出 url，则创建网站的屏幕截图图像？

> ID：10519232
> 
> 赞同：3
> 
> 时间：2012-05-09T15:28:28.420
> 
> 标签：php, jquery, html, css

> **可能重复：**
> [使用 PHP 的网站截图](https://stackoverflow.com/questions/757675/website-screenshots-using-php)

我想知道如果只给出一个网址，是否可以创建一个类似屏幕截图的网站预览？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:45:53.830

**是的，您可以**，请阅读以下 stackoverflow 问题：

[使用 jquery 生成网站的屏幕截图](https://stackoverflow.com/questions/4550947/generating-a-screenshot-of-a-website-using-jquery)

[网站截图-使用-php](https://stackoverflow.com/questions/757675/website-screenshots-using-php)

有一些工具旨在将网站快照到图像，因此，将 Jquery 与 PHP 结合使用可以实现您的目标！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:48:45.133

您也可以使用像[BitPixels](http://www.bitpixels.com/)这样的服务。如果有任何同源问题，请使用 JSONP，它应该很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:45:00.050

只使用 JavaScript/jQuery？可能不会，因为这会违反[相同的原产地政策](http://en.wikipedia.org/wiki/Same_origin_policy)。即使可以，在 JavaScript 中将其制作成图像也是一项挑战。

# compiler-theory - 计算跟随集

> ID：10519234
> 
> 赞同：1
> 
> 时间：2012-05-09T15:28:30.767
> 
> 标签：compiler-theory

好的，我已经了解了如何计算 Follow_k(N) 集（N 是非终结符）：对于 A -> aBc 形式的每个生产规则，您将 First_k(First_k(c)Follow_k(A)) 添加到 Follow_k(B ) (a, c 是任意一组终结符和非终结符，甚至是 lambda)。...然后您重复此操作，直到没有可添加的内容为止。

但是产生式规则会发生什么，例如：S -> ABCD（A、B、C、D 都是非终结符）？

我应该
将 First_k(First_k(BCD)Follow_k(S)) 添加到 Follow_k(A) 还是
将 First_k(First_k(CD)Follow_k(S)) 添加到 Follow_k(B) 或
添加 First_k(First_k(D)Follow_k(S))到 Follow_k(C) 或
将 First_k(First_k(lambda)Follow_k(S)) 添加到 Follow_k(D) 或
执行以上所有操作？

更新：
让我们以下面的语法为例：

S -> ABC
A -> a
B -> b
C -> c

直观地说，Follow_1(S) = {} 因为在 S 之后没有任何内容
Follow_1(A) = {b} 因为 b 在 A 之后，
Follow_1(B) = {c} 因为 c 在 B 之后，
Follow_1(C) = {} 因为在 C 之后没有任何内容。
为了使用该算法获得此结果，您必须考虑 S -> ABC 的所有情况。

但我的判断或例子可能不正确，所以问题仍然悬而未决......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T23:51:24.357

If you run into trouble on other grammar problems like this, give this [online first, follow, & predict set finder](http://hackingoff.com/compilers/predict-first-follow-set) a shot. It's automatic and you can compare answers to its output to get a feel for how to work through these.

> But what happens for production rules like: S -> ABCD (A, B, C, D are all nonterminals)?

Here are the [rules for finding follow sets](http://homepages.maxnet.co.nz/brunnies/UNI/FirstAndFollowSets.html).

> 1.  First put $ (the end of input marker) in Follow(S) (S is the start symbol)
> 2.  If there is a production A → aBb, (where a can be a whole string) then everything in FIRST(b) except for ε is placed in FOLLOW(B).
> 3.  If there is a production A → aB, then everything in FOLLOW(A) is in FOLLOW(B)
> 4.  If there is production A → aBb, where FIRST(b) contains ε, then everything in FOLLOW(A) is in FOLLOW(B)

Let's use your example grammar:

*   S -> ABC
*   A -> a
*   B -> b
*   C -> c

    1.  Rule 1 says that follow(S) contains $.
    2.  Rule 2 gives us: follow(A) contains first(B); also, follow(B) contains first(C).
    3.  Rule 3 says that follow(C) contains follow (S).
    4.  None of your productions are nullable, so we don't care about rule #4\. A symbol is nullable if it derives ε or if it derives a nullable non-terminal symbol.

Nullability's [transitivity](http://en.wikipedia.org/wiki/Transitive_relation) can trip people up. Consider this grammar:

*   S -> A
*   A -> B
*   B -> ε

Since B derives ε, B's nullable. Since A derives B, which derives ε, A's nullable too. S derives A, which derives B, which derives ε, so S is nullable as well.

Granted, you didn't bring that up, but it's a common source of confusion in compiler courses, so I figured I'd lay it out.

Also, if you need some sample grammars to work through, [http://faculty.stedwards.edu/laurab/cosc4342/g1answers.txt](http://faculty.stedwards.edu/laurab/cosc4342/g1answers.txt) might be handy.

# .net - C#.NET 正则表达式：在编写带有排除项的组表达式方面需要帮助

> ID：10519235
> 
> 赞同：2
> 
> 时间：2012-05-09T15:28:34.297
> 
> 标签：.net, regex, regex-group

我不是专家，但我正在尝试编写 .NET 正则表达式来排除 SQL 注释行。不幸的是，我找不到关于如何使用排除组在另一个正则表达式匹配中查找正则表达式匹配的正确描述： ('.*?') 。

此正则表达式查找引号之间的所有文本，但它还包括 SQL 注释区域（/*..*/ 和 --..）：

```
'.*?' 
```

我尝试过的所有东西都没有按我的预期工作。

我的测试样本：

```
 IF @RetValue = 'Cat'
   /*SET @RetValue = 'WrongLocation
and it works here' */
   ------testing line
SET @Dude = 'Punto'
/* comments */
    -- But it doesn't work here because inside comments! 
    -- and this is aren't the end
    SET @RetValue = 'But this should
work here' 
```

正确的匹配应该只返回这个：

```
'Cat'
''Punto'
and
'But this should
work here' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T17:43:39.253

我找不到一个优雅的正则表达式来一步完成你想要的，但你可以分两步完成。

```
string commentFree = Regex.Replace(sourceString, @"\/\*.*?\*\/|\-\-[^\n]*\n", string.Empty, RegexOptions.Multiline | RegexOptions.Singleline); 
```

现在您可以`'[^']*'`在 commentFree 上运行 RegEx 来提取您的字段。

请注意，它`'[^']*'`比 更有效`'.*?'`，因为它消除了 RegEx 引擎回溯的需要。现在它将找到起始引号，继续查找本身不是引号的所有字符，并以结束引号结束。上面使用相同的技术来抓取`--`直到行尾的注释`\n`。

**编辑：** 或者，您可以使用该模式`\/\*.*?\*\/|\-\-[^\n]*\n|'[^']*'`匹配所有评论和引用块（不在评论中），然后仅使用`'`在迭代结果时开始的匹配项，因为这些将是引用块。

# wpf - 在 MVVM WPF 应用程序中的 ViewModel 之间传递数据

> ID：10519236
> 
> 赞同：0
> 
> 时间：2012-05-09T15:28:34.533
> 
> 标签：wpf, mvvm, unity-container

从我的一个 ViewModel 我有下面的调用，它从服务器获取信息。

```
 List<Customer> listOfCustomers = GetCustomerList(domain,password); 
```

在 MVVM 场景中将此信息 id listOfcustomers 传递给另一个 ViewModel (CustomerViewModel) 的最佳方式是什么。

我需要在这里使用 Unity，还是使用事件聚合器发布，如下 RichardOD 所述。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T16:28:57.110

您的登录 ViewModel 不应获取此信息。登录 ViewModel 用于登录，而不是用于提取数据。您的 CustomerViewModel 应该在用户成功验证*后*提取该数据——可能基于验证的用户名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:13:59.350

有点模糊的问题，但通常如果您希望以松散耦合的方式在 ViewModel 之间进行通信，那么您应该考虑使用[Event Aggregator](http://martinfowler.com/eaaDev/EventAggregator.html)。

# python - Python：如何在函数定义中避免 numpy RuntimeWarning？

> ID：10519237
> 
> 赞同：27
> 
> 时间：2012-05-09T15:28:34.723
> 
> 标签：python, numpy

我设计了一个简单的函数来返回一个数学函数，该函数可用于拟合实验数据。这些函数看起来很像以下内容：

```
def colecole_2(f,*p):
    term1=p[0] * ( 1 - 1 / (1 + numpy.power((0+1j) * 2 * numpy.pi * f * p[1], p[2])))
    term2=p[3] * ( 1 - 1 / (1 + numpy.power((0+1j) * 2 * numpy.pi * f * p[4], p[5])))
    return p[6]*(1-abs( term1+ term2)) 
```

不幸的是，我遇到了 RunTimeWarnings 的问题：

```
RuntimeWarning: overflow encountered in power
RuntimeWarning: overflow encountered in divide 
```

由于值太大或太小。我无法自己解决这个问题。有什么方法可以重新定义我的函数，让它在没有警告的情况下通过？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-11T22:46:58.820

您可以使用内置的上下文管理器[numpy.errstate 。](http://docs.scipy.org/doc/numpy/reference/generated/numpy.errstate.html#numpy.errstate)这将允许您将错误处理设置在 with 语句的上下文中。

```
import numpy
# warning is not logged here. Perfect for clean unit test output
with numpy.errstate(divide='ignore'):
    numpy.float64(1.0) / 0.0 
```

我最近在为一些遗留 python 代码编写单元测试时不得不这样做。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-09T15:52:13.423

用于`numpy.seterr`控制 numpy 在这种情况下的作用：http: [//docs.scipy.org/doc/numpy/reference/generated/numpy.seterr.html](http://docs.scipy.org/doc/numpy/reference/generated/numpy.seterr.html)

使用警告模块来控制如何显示或不显示警告： http: [//docs.python.org/library/warnings.html](http://docs.python.org/library/warnings.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-11T10:59:47.697

要解决这个问题，您可以通过修改调用函数的数组元素的类型来提高精度。

例如，如果将数组**a**与作为元素的大数字乘以大浮点数会引发异常

```
RuntimeWarning: overflow encountered in multiply 
```

然后在指定以下

```
a = np.array(a, dtype=np.float128) 
```

不会出现警告。

# php - 如何使用 file_get_contents() 加载远程文件？

> ID：10519238
> 
> 赞同：3
> 
> 时间：2012-05-09T15:28:40.190
> 
> 标签：php, file-get-contents, file-put-contents

现在有点抓挠我的头。
我正在尝试从远程 url 获取文件。我可以从本地文件中保存内容，但不能从远程文件中保存。

这有效：

```
file_put_contents(
    'file1.xml',
    file_get_contents('file2.xml')
); 
```

这不会：

```
file_put_contents(
    'file1.xml',
    file_get_contents('http://www.domain.com/xmlapi/search.aspx?query=places&lid=38')
); 
```

奇怪的是，我的其他脚本在第一次尝试时运行良好，但现在没有人可以访问远程 url。
我最近开始在 Heart Internet 上托管我的新 php 文件。我在其他服务器上有类似的脚本，完全没有问题。

这是我得到的错误：

> 警告：file_get_contents() [function.file-get-contents]: php_network_getaddresses: getaddrinfo failed: Name or service not known in /home/sites/mydomain/myfile.php on line 5`
> 
> 警告：file_get_contents（[http://www.domain.com/xmlapi/search.aspx?query=places&lid=38](http://www.domain.com/xmlapi/search.aspx?query=places&lid=38)）[function.file-get-contents]：无法打开流：php_network_getaddresses：getaddrinfo 失败：名称或服务不是在第 5 行的 /home/sites/mydomain/public_html/myfile.php 中已知

`allow_url_fopen`被设定为`On`

不同的域

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T15:49:40.260

检查php设置...

这可能是由于安全问题...“allow_url_fopen = On”

[http://www.php.net/manual/en/function.file-get-contents.php](http://www.php.net/manual/en/function.file-get-contents.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-07T15:02:20.677

> 警告：file_get_contents() [function.file-get-contents]: php_network_getaddresses: getaddrinfo failed: Name or service not known in /home/sites/mydomain/myfile.php on line 5`

这表明您使用的 URL 不正确，或者您的服务器上的 DNS 设置不正确。

# c - linux kernel/sched.c - find_process_by_pid - 如何从 ac 应用程序代码中使用它

> ID：10519242
> 
> 赞同：1
> 
> 时间：2012-05-09T15:28:46.423
> 
> 标签：c, linux-kernel

Linux-2.6.35.13 kernel/sched.c 有一个函数 find_process_by_pid()。我尝试使用以下代码：

```
int main()
{
    struct task_struct *p;
    pid_t pid;
    pid=2130; 

    p = find_process_by_pid(pid);

    printf("task_struct.state: %s\n", p->state);
    return 0;
} 
```

$ gcc getProcbyId.c -o getProcbyId

得到以下警告和错误：

```
getProcbyId.c: In function 'main':
getProcbyId.c:19:4: warning: assignment makes pointer from integer without a cast
getProcbyId.c:21:37: error: dereferencing pointer to incomplete type 
```

请给出如何解决这个问题的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T16:11:18.447

您不能直接将用户模式应用程序与内部内核功能联系起来。相反，由于安全性和内存模型差异（更不用说一般设计清洁度）等原因，您只能与内核应用适当检查和翻译的导出功能进行交互。

系统调用是内核函数的一小部分，可以从用户空间代码调用，这不是其中之一。

查找有关外部进程的信息的主要接口是 /proc 文件系统下的 PID 条目。本质上，这由一堆伪文件组成。其中大部分是文本文件，尝试读取一个文件将导致内核收集并提供适当的信息，就好像它是实际文件的内容一样。您可能对 /proc/PID##/sched 以及编号线程子目录下的类似文件感兴趣。

如果您拥有一个进程，您可以 ptrace() 它并在该进程视图中查看事物，但这更像是代理到另一个进程的用户空间视图的情况，而不是对内核对该进程的视图做很多事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:48:47.950

*从一般的角度来看*，该错误似乎是由您的代码中缺少头文件引起的。该函数返回一个指向结构的指针：`struct task_struct *` 但是当您访问结构的字段时，编译器需要知道它的定义，因此错误

无论如何，您确定您可以从用户空间调用上述函数吗？

您可能会发现对该主题有用的文档（即使有点旧）是[内核 - 用户空间接口](http://people.ee.ethz.ch/~arkeller/linux/kernel_user_space_howto.html)

# javascript - 如何在 Sencha Touch 2.0 中清除 cookie

> ID：10519246
> 
> 赞同：0
> 
> 时间：2012-05-09T15:28:52.210
> 
> 标签：javascript, extjs, javascript-framework, sencha-touch-2

登录到服务器端资产后，服务器会在我的 sencha touch 应用程序中设置 cookie。为了“注销”，我需要清除客户端的那些 cookie，但我不知道该怎么做。在 JQuery 中，我会做这样的事情：

```
$.cookie('cookiename', null) 
```

当我在我的 Sencha 应用程序中尝试我*认为*等效的东西时，它不起作用（我仍然可以在我发出的下一个 Ajax 请求中看到 cookie）。

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T13:28:25.647

您可以简单地使用[Ext JS 4.1 中的 Ext.util.Cookies 类](http://docs.sencha.com/ext-js/4-1/source/Cookies.html#Ext-util-Cookies)。虽然不是每个 Ext JS 4 类都必须与 Sencha Touch 2 兼容，但这个对我有用。在您的项目中使用此类时，请注意 Ext JS 与 Sencha Touch 具有不同的许可证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T22:32:58.960

Sencha Touch 不为您提供帮助。您将需要直接使用本机 JavaScript 方法来执行此操作。

[http://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

# visual-studio - Visual Studio 类中的方法名称列表

> ID：10519247
> 
> 赞同：5
> 
> 时间：2012-05-09T15:28:54.940
> 
> 标签：visual-studio, visual-studio-2008

我知道下拉列表显示类中的许多其他内容中的所有方法，但我正在制作一个流程图，为此我需要一个**列表**，就像类中所有方法的**文本一样。**我怎样才能得到这个列表，因为目前我正在手动将方法名称复制粘贴到一个列表中，这很麻烦，因为我有 600 种方法......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T15:38:42.220

使用 Visual Studio 的 Refactor 菜单，然后选择 Extract Interface。[Refactor->Extract Interface on MSDN for Visual Studio 2008](http://msdn.microsoft.com/en-us/library/fb3dyx26%28v=vs.90%29.aspx)。

![在此处输入图像描述](../Images/b6292468965caf3c0f7e11e7b19307da.png)

单击按钮全选，然后单击按钮确定。这将为您在项目中创建一个新文件。 ![在此处输入图像描述](../Images/73bfa5447aad78ae8b284e2109da5848.png)

然后，您可以根据需要复制和粘贴。

![在此处输入图像描述](../Images/c791649d559f6ffd7e3b8422bd9bbe43.png)

一定要回到你的班级并删除接口实现代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-10-11T13:23:54.787

我不知道自从 OP 写了这个问题以来事情是否发生了变化，但是有一个相对简单的方法，那就是使用类视图（Ctrl-Shift-C）。现在，此解决方案允许通过单击类视图中的适当类然后复制粘贴来按字母顺序检索类中的所有方法。

由于它不是针对整个项目，仅针对单个类，我想如果你有 600 个类，每个类有 1 个方法，这不是很吸引人，但如果每个类的方法分布合理，那应该不会那么糟糕。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T15:30:34.893

您可以使用反射来获取所有方法、属性等的列表，然后将它们写到控制台或文件中。

例如，如果您想在一个类中获取所有公共静态方法，您可以这样做：

```
// get all public static methods of MyClass type
MethodInfo[] methodInfos = typeof(MyClass).GetMethods(BindingFlags.Public |
                                                      BindingFlags.Static);
// sort methods by name
Array.Sort(methodInfos,
        delegate(MethodInfo methodInfo1, MethodInfo methodInfo2)
        { return methodInfo1.Name.CompareTo(methodInfo2.Name); });

// write method names
foreach (MethodInfo methodInfo in methodInfos)
{
  Console.WriteLine(methodInfo.Name);
} 
```

反射是系统可以在运行时查询对象的类型以及这些对象公开的方法和属性的一种方式。

在您的情况下，您不仅需要所有公共和静态方法，还需要所有方法。因此，您将对上面的代码进行适当的更改以获得它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-04T14:22:26.440

派对迟到了，但这是一种不会弄乱代码的方法。

*   使用像[Telerik JustDecompile](http://www.telerik.com/products/decompiler.aspx)这样的 Disassmbly 工具。
*   浏览并打开包含您的代码的程序集。
*   浏览到类型，在文本窗口中选择反汇编。
*   有了它，使用像[Notepad++](https://notepad-plus-plus.org/)这样的文本编辑器来格式化/清理文本。

# jquery - 具有计数机制的 jQuery UI 自动完成类别

> ID：10519249
> 
> 赞同：7
> 
> 时间：2012-05-09T15:28:57.210
> 
> 标签：jquery, jquery-ui, autocomplete, jquery-ui-autocomplete

我正在根据文档中的类别示例实现 jQuery UI 自动完成。我想将结果数添加到类别标题中，因此它不显示“产品”，而是显示“产品（3）”。我知道需要从示例中修改 _renderMenu 函数，但我无法理解如何修改它。任何帮助我走上正确的道路将不胜感激。

这是来自 jQuery UI 自动完成类别演示的示例代码：

```
 <script>
    $.widget( "custom.catcomplete", $.ui.autocomplete, {
        _renderMenu: function( ul, items ) {
            var self = this,
                currentCategory = "";
            $.each( items, function( index, item ) {
                if ( item.category != currentCategory ) {
                    ul.append( "<li class='ui-autocomplete-category'>" + item.category + "</li>" );
                    currentCategory = item.category;
                }
                self._renderItem( ul, item );
            });
        }
    });
    </script>
    <script>
    $(function() {
        var data = [
            { label: "anders", category: "" },
            { label: "andreas", category: "" },
            { label: "antal", category: "" },
            { label: "annhhx10", category: "Products" },
            { label: "annk K12", category: "Products" },
            { label: "annttop C13", category: "Products" },
            { label: "anders andersson", category: "People" },
            { label: "andreas andersson", category: "People" },
            { label: "andreas johnson", category: "People" }
        ];

        $( "#search" ).catcomplete({
            delay: 0,
            source: data
        });
    });
    </script>

<div class="demo">
    <label for="search">Search: </label>
    <input id="search" />
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T01:46:46.413

一个好的策略是创建一个对象/散列，将类别存储为键，并将与该类别匹配的项目数组存储为值。换句话说，你想构建这样的东西：

```
{ "Products": ["annhhx10", "annk K12", /*etc*/],
  "People": ["anders andersson", "andreas andersson", /*etc*/]
} 
```

一旦你构建了它，你就可以遍历它并输出每个类别及其值。这样做的好处是获取项目数所需要做的就是获取与当前类别对应的数组的长度。就像是：

```
$.widget("custom.catcomplete", $.ui.autocomplete, {
    _renderMenu: function(ul, items) {
        var self = this,
            categories = { };

        /* Build a dictionary/hash where keys are categories and values are 
         * arrays of items with that category 
         */
        $.each(items, function (index, item) {
            if (!categories.hasOwnProperty(item.category)) {
                 categories[item.category] = [item];
            } else {
                categories[item.category].push(item);
            }
        });

        /* Iterate over the hash we just built and display a category followed by its
         * items.
         */
        $.each(categories, function(category, items) {
            if (category) {
                ul.append("<li class='ui-autocomplete-category'>" + category + " (" + items.length + ")</li>");
            }
            $.each(items, function (index, item) {
                self._renderItem(ul, item);
            });
        });
    }
}); 
```

**示例：http:** [//jsfiddle.net/andrewwhitaker/vNtGd/](http://jsfiddle.net/andrewwhitaker/vNtGd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T09:32:17.323

```
$.widget("custom.catcomplete", $.ui.autocomplete, {
            _renderMenu: function (ul, items) {
                var self = this,
                currentCategory = "", itemCount = 0, itemsLength = items.length - 1;
                $.each(items, function (index, item) {
                    if (item.category != currentCategory) {
                        ul.find('.ui-autocomplete-category:last').text(function () { return $(this).text() + ' ' + itemCount });
                        ul.append("<li class='ui-autocomplete-category'>" + item.category + "</li>");
                        currentCategory = item.category;
                        itemCount = 1;
                    }
                    else {
                        itemCount++;
                    }

                    if (index === itemsLength) {
                        ul.find('.ui-autocomplete-category:last').text(function () { return $(this).text() + ' ' + itemCount });
                    }

                    self._renderItem(ul, item);
                });
            }
        }); 
```

# php - 即使设置了值，PHP $_SESSION 也会返回空数组

> ID：10519257
> 
> 赞同：3
> 
> 时间：2012-05-09T15:29:39.550
> 
> 标签：php, session

我正在尝试诊断 PHP 问题。我正在将值传递给`$_SESSION`数组，而这些值不会被数组获取。我曾经`var_dump($_SESSION)`看到什么被退回，我得到了`array (0){}`。即使我知道正在设置会话并且正在将值添加到数组中也是如此。

这是我的代码（index.php）的简化版本：

```
<?php
session_start();
var_dump($_SESSION); 

if ($_REQUEST['query'] == "" or is_null($_REQUEST['query'])) {
$errormsg = "You must enter a search term to query.  Please try again.";
}

?>

<form name="product_search" id="product_search" method="post" action="index.php">
<input size="60" type="text" name="query" id="query" <?php echo "value=\"" .  $_REQUEST['query'] . "\" "; ?>/>
<?php if (isset($errormsg)) {echo "<span class=\"errormsg\">" . $errormsg . "</span>";} ?>
<input type="submit" class="searchBtn" value="Search"/>

<?php
    $_SESSION['query'] = 'foo';
    $_SESSION['search_field'] = 'man';
    $_SESSION['results'] = 'chu';
?>

var_dump($_SESSION); //Will dump array(3) {...} 
```

要重新创建错误：

1.  加载页面。这里没问题；`var_dump($_SESSION)`顶部的返回`array(0) {}`，这是预期的，底部的返回一个三成员数组，也如预期的那样。
2.  在查询字段中提交带有某些内容的表单（以失败验证）。尽管`$_SESSION`在前一页加载时设置了变量，但第一个转储仍然返回`array(0) {}`。

我在这里简化了我的代码来解决这个问题，但是我有另一个页面毫无困难地返回了一个 $_SESSION 变量（并且第一个页面`var_dump`产生了一个成员数组）。这里的问题是我将表单提交给自己吗，如果是这样，除了`$_SESSION`数组之外还有其他方法可以将值从一个页面加载传递到下一个页面吗？我查看了 PHP 文档并搜索了高低，但没有发现任何有帮助的东西。

我还应该注意，会话 ID 在页面加载时是相同的，因此看起来会话状态从页面加载到页面加载都在维护。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-27T15:59:55.023

使用每个网页顶部的这一行：

`if (!isset($_SESSION)) { session_start(); }`

如果您初始化`$_SESSION`为较低级别的脚本，则 `$_SESSION 变量在较高级别中不可访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-16T03:42:10.810

session.cookie_secure = 1 可能会导致此问题

UPD：检查 session.cookie_secure 是否设置为 0 以表示非安全连接。

```
ini_set('session.cookie_secure', '0') 
```

为我工作。

UPD：类似的问题[PHP session.cookie_secure: Disables session when set to true](https://stackoverflow.com/questions/25047170/php-session-cookie-secure-disables-sessions-when-set-to-true)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:36:46.793

确保您的服务器配置允许会话 cookie。

```
session.use_cookies = 1 
```

另一种方法是会话 ID 在 GET 中传递，您必须专门将其附加到您没有执行的表单操作中。因此，一旦发布了值，就没有会话。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:40:21.390

会话是否正确启用？这是 PHP 服务器会话设置的文档 [http://www.php.net/manual/en/session.configuration.php](http://www.php.net/manual/en/session.configuration.php)

为了补充 Jeremy 的答案，您也可以拒绝 cookie。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T15:40:57.483

而不是 SESSION 您仍然可以像使用它一样使用 POST - 只需将变量及其值打包到一个（或多个）隐藏输入中（您可以从一个提交序列化 POST 并将其插入到隐藏输入中，或者您可以创建尽可能多的隐藏输入您从第一次提交就有变量）。然后在第二次提交中（可能是多步表单的第二步）您发布新数据，当然还有第一次提交的数据......

但我仍然更喜欢 session，因为它更容易（不必实现更多代码）。

您确定 SESSION 不会在每次页面加载/提交时重新生成吗？如果您在页面加载/提交时重新生成会话 ID，则旧会话（及其数据）会丢失，并且数据会插入到新会话 ID 下...

还有一个建议：忘记 $_REQUEST 除非您确定它是完全必要的，而是仅使用 $_GET 或 $_POST 从正确的渠道获取数据......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-14T20:20:47.903

这对游戏来说有点晚了，可能没有人遇到这个配置问题。事实上，我希望不会。

我的虚拟主机刚刚将我所有的网站移到了新服务器上。他们彻底搞砸了文件和目录权限，以及运行网络服务器和 php 脚本的用户。

看来

```
session.auto_start = 1 
```

标志会导致不同的用户（我不知道是哪个用户）尝试读取会话文件，而不是将其设置为 0 并仅使用

```
session_start(); 
```

在我的脚本中。

令人惊奇的权限问题是会话文件已写入但无法读取。所以自动启动会话总是空的。

# liferay - 部署 Liferay 6.1 主题

> ID：10519258
> 
> 赞同：2
> 
> 时间：2012-05-09T15:29:41.743
> 
> 标签：liferay

我对 Liferay 很陌生，但仍在尝试理解部署主题。在这一点上，我更像是一名设计师而不是开发人员，目前我的知识主要是 HTML/CSS，所以使用 SDK 插件一直很有趣，不用说。

但是我（mac 用户）目前注册为 6.1 EE 用户，并且使用 Liferay Developer Studio 只是试图在我的本地实例中部署一个测试主题来玩。我一直在关注 Liferay 文档：

[http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/creating-a-the-4](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/creating-a-the-4)

与使用 Eclipse 插件的 CE 用户相比，这对于使用 Developer Studio 的人来说是否仍然是正确的步骤，我发现自己很困惑。

这是我目前所处的位置：
- 在我只是为了好玩而编辑了一些元素之后，从 Liferay 示例项目（sample-styled-advanced-theme）导出了 .war 文件
- 放入 /liferay-portal-6.1.10- ee-ga1/deploy
- 确认主题在 tomcat-7.0.25/webapps/theme-name

当我进入我的本地门户并设置一个新站点时，我没有找到我的测试主题显示供我选择。我在这里缺少什么吗？如果 Liferay Developer Studio 可以提供示例主题，我不确定我是否还需要使用终端来处理任何事情。任何澄清都非常感谢。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T00:31:14.230

此链接可能会对您有所帮助，它具有步骤和配置 - [http://www.liferaysolution.com/2012/05/liferay-theme-creation.html](http://www.liferaysolution.com/2012/05/liferay-theme-creation.html)

正如标记所建议的那样，请密切注意日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T11:16:39.463

始终检查日志.. 如果它说“xxx-theme 可供使用”，那么只有它可以应用于页面。

您能否附上日志，这将有助于更好地了解您实际遇到的错误。

# java - 杰克逊克服下划线支持骆驼案

> ID：10519265
> 
> 赞同：195
> 
> 时间：2012-05-09T15:30:00.120
> 
> 标签：java, jackson

我从互联网上检索一个 JSON 字符串；像我见过的大多数 JSON 一样，它包含由下划线分隔的长键。本质上，我的目标是将 JSON 反序列化为 java 对象，但我不在 java 代码中使用下划线。

例如，我可能有一个`User`带有驼峰式字段的类`firstName`，同时我需要以某种方式告诉杰克逊将`first_name`键从 JSON 映射到`firstName`类字段。是否可以？

```
class User{
    protected String firstName;
    protected String getFirstName(){return firstName;}
} 
```

* * *

## 回答 #1

> 赞同：441
> 
> 时间：2012-07-24T13:35:29.383

您可以配置`ObjectMapper`将驼峰大小写转换为带下划线的名称：

```
objectMapper.setPropertyNamingStrategy(PropertyNamingStrategy.SNAKE_CASE); 
```

或者用这个注解来注解一个特定的模型类：

```
@JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class) 
```

在 Jackson 2.7 之前，该常量被命名为：

```
PropertyNamingStrategy.CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES 
```

* * *

## 回答 #2

> 赞同：136
> 
> 时间：2016-11-21T22:12:56.443

如果它是一个 spring boot 应用程序，在 application.properties 文件中，只需使用

> spring.jackson.property-naming-strategy=SNAKE_CASE

或使用此注解对模型类进行注解。

> @JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class)

* * *

## 回答 #3

> 赞同：129
> 
> 时间：2012-05-09T15:33:13.517

您应该`@JsonProperty`在要更改默认名称映射的字段上使用。

```
class User{
    @JsonProperty("first_name")
    protected String firstName;
    protected String getFirstName(){return firstName;}
} 
```

更多信息：[API](http://jackson.codehaus.org/1.1.2/javadoc/org/codehaus/jackson/annotate/JsonProperty.html)

* * *

## 回答 #4

> 赞同：55
> 
> 时间：2016-09-12T23:20:21.810

如果您希望将其用于单个类，则可以将[PropertyNamingStrategy](http://fasterxml.github.io/jackson-databind/javadoc/2.1.0/com/fasterxml/jackson/databind/PropertyNamingStrategy.html)与[@JsonNaming](http://www.lookatsrc.com/source/com/fasterxml/jackson/databind/annotation/JsonNaming.java?a=com.fasterxml.jackson.core:jackson-databind)一起使用，如下所示：

```
@JsonNaming(PropertyNamingStrategy.LowerCaseWithUnderscoresStrategy.class)
public static class Request {

    String businessName;
    String businessLegalName;

} 
```

将序列化为：

```
{
    "business_name" : "",
    "business_legal_name" : ""
} 
```

由于不赞成使用 in `Jackson 2.7`，因此您应该使用：`LowerCaseWithUnderscoresStrategy``SnakeCaseStrategy`

```
@JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class)
public static class Request {

    String businessName;
    String businessLegalName;

} 
```

* * *

## 回答 #5

> 赞同：31
> 
> 时间：2015-01-13T15:10:00.390

`@JsonProperty`以上关于和的答案`CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES`是 100% 准确的，尽管有些人（比如我）可能会尝试在 Spring MVC 应用程序中使用基于代码的配置来执行此操作。`Beans.java`这是实现预期效果的示例代码（我在里面）：

```
@Bean
public ObjectMapper jacksonObjectMapper() {
    return new ObjectMapper().setPropertyNamingStrategy(
            PropertyNamingStrategy.CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES);
} 
```

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2017-04-07T06:28:04.783

当前的最佳实践是在`application.yml`（或`properties`）文件中配置 Jackson。

例子：

```
spring:
  jackson:
    property-naming-strategy: SNAKE_CASE 
```

如果您有更复杂的配置要求，您还可以通过编程方式配置 Jackson。

```
import com.fasterxml.jackson.databind.PropertyNamingStrategy;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.http.converter.json.Jackson2ObjectMapperBuilder;

@Configuration
public class JacksonConfiguration {

    @Bean
    public Jackson2ObjectMapperBuilder jackson2ObjectMapperBuilder() {
        return new Jackson2ObjectMapperBuilder()
                .propertyNamingStrategy(PropertyNamingStrategy.SNAKE_CASE);
        // insert other configurations
    }

} 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2018-04-05T19:11:57.340

这里很少有答案表明以下 2 个不同版本的 Jackson 库的两种策略：

**对于杰克逊 2.6.***

```
ObjectMapper objMapper = new ObjectMapper(new JsonFactory()); // or YAMLFactory()
objMapper.setNamingStrategy(
     PropertyNamingStrategy.CAMEL_CASE_TO_LOWER_CASE_WITH_UNDERSCORES); 
```

**对于杰克逊 2.7.***

```
ObjectMapper objMapper = new ObjectMapper(new JsonFactory()); // or YAMLFactory()
objMapper.setNamingStrategy(
     PropertyNamingStrategy.SNAKE_CASE); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2020-09-03T10:07:01.643

注释所有模型类在我看来是一种矫枉过正，肯尼的回答对我不起作用[https://stackoverflow.com/a/43271115/4437153](https://stackoverflow.com/a/43271115/4437153)。序列化的结果还是骆驼案。

我意识到我的弹簧配置有问题，所以我不得不从另一个方面解决这个问题。希望有人觉得它有用，但如果我在做违反弹簧规则的事情，请告诉我。

**Spring MVC 5.2.5 和 Jackson 2.11.2 的解决方案**

```
@Configuration
@EnableWebMvc
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void configureMessageConverters(List<HttpMessageConverter<?>> converters) {
        ObjectMapper objectMapper = new ObjectMapper();
        objectMapper.setPropertyNamingStrategy(PropertyNamingStrategy.SNAKE_CASE);           

        MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();
        converter.setObjectMapper(objectMapper);
        converters.add(converter);
    }
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2021-04-21T08:02:51.003

为了注释模型类使用：

```
@JsonNaming(PropertyNamingStrategies.SnakeCaseStrategy.class) 
```

代替：

```
@JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class) 
```

自 2.12 起已弃用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-17T07:17:06.237

1.  您可以在我们类的字段上使用 @JsonProperty 注释将字段映射到我们 JSON 中的确切名称

    > ```
    > @JsonProperty("my_name")
    > private String myName; 
    > ```

2.  可以在类上使用@JsonNaming注解，所有字段都会使用snake case反序列化

    > ```
    > @JsonNaming(PropertyNamingStrategy.SnakeCaseStrategy.class) 
    > public class MyClassWithSnakeStrategy { ... 
    > ```

}

3.  您可以使用 ObjectMapper 上的 setPropertyNamingStrategy 方法来配置它以进行所有序列化

    > ObjectMapper objectMapper = new ObjectMapper()
    > .setPropertyNamingStrategy(PropertyNamingStrategy.SNAKE_CASE);

# javascript - 变量的 Javascript 范围无法正常工作

> ID：10519266
> 
> 赞同：0
> 
> 时间：2012-05-09T15:30:03.843
> 
> 标签：javascript, scope, global-variables

我是一个业余程序员，在一个小项目上遇到了困难。我想从 Google 电子表格中获取数据，修改数据并制作 Google Chart（使用 google chart api）。

下面的代码在 Firefox 中完美运行，但 Chrome 和 IE 不允许 dataTable 超出 handleQueryResponse(e) 函数的范围。我的第一个想法是从 handleQueryResponse(e) 函数返回 dataTable，但这在函数 (.send()) 内部调用。

任何帮助将不胜感激。

```
function getDataTable(link) {
     var dataTable= new google.visualization.DataTable();
     var queryTrip = new google.visualization.Query(link);
     queryTrip.send(handleQueryResponse);
     function handleQueryResponse(response) {

         if (response.isError()) {

             alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
             return;
         }

         dataTable = response.getDataTable();
         // I can verify this has the data through debugging in Chrome  
     }
     // Outside of the function handleQueryResponse the dataTable is gone
    return dataTable;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:45:46.843

调用异步函数 ( `queryTrip.send`)的函数**不能**返回取决于该异步函数调用结果的数据，也不能以其他方式使用该数据。

该数据*仅*在回调函数内部可用，以及随后*由*该回调调用的任何其他函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:34:17.760

as felix mentioned, it's probably asynchronous, meaning that variable no longer exists by the time the handleQueryResponse gets run because it's not run instantly within the scope of the function getDataTable.

You could put the variable for dataTable outside that scope ( into global scope ) than the handleQueryResponse would be able to write to it.

However you will want to initiate any functions that need to run after the dataTable is ready from within the handleQueryResponse function. Best course of action might be to use some sort of event driven handling for after the dataTable is ready.

# android - 在 Android SQLite 中使用 execSQL 进行 INSERT 操作

> ID：10519268
> 
> 赞同：2
> 
> 时间：2012-05-09T15:30:08.280
> 
> 标签：android, database, sqlite

从[文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang.String%29)和[这篇文章](https://stackoverflow.com/questions/9667031/difference-between-rawquery-and-execsql-in-android-sqlite-database)中 ，我知道`execSQL()` 执行单个 SQL 语句，该`SELECT`语句不是返回数据的 SQL 语句或任何其他 SQL 语句。还提到`execSQL()`不应该用于插入。

但我`execSQL()`用于插入如下：

```
db.execSQL("INSERT INTO LIST VALUES('খবর');"); //where LIST is a table 
```

这对我来说非常有效（没有`SELECT`关于 this的声明`INSERT`），但有人告诉我不要在[这里](https://stackoverflow.com/questions/10517550/sqlite-connection-in-android/10517929#10517929)使用它。

所以，我的问题是：**即使没有****附加语句****，该语句是否返回一个值？`INSERT``SELECT`**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:42:56.350

您可以使用它，只是不推荐，因为您不会收到任何可能由数据库生成的信息。您应该使用返回代码/光标/其他信息的方法让您知道发生了什么，以便在出现问题时处理它们。

关键是`execSQL`文档中的这一行：

```
It has no means to return any data (such as the number of affected rows). Instead, you're encouraged to use insert... 
```

重要的词是“鼓励”。您*可以*用于`execSQL`任何 SQL 命令，但您不会收到有关该过程的反馈，这使得用于您应该获得反馈的事情变得相当危险（除非您不在乎插入失败，或者只有 5 条记录中的 2 条得到了更新）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:43:08.547

`INSERT`语句不返回结果集，至少在 Sqlite 中没有。

Android 文档这样说[`execSQL`](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang.String%29)：

> 执行不是 SELECT 的单个 SQL 语句或任何其他返回数据的 SQL 语句。它无法返回任何数据（例如受影响的行数）。相反，我们**鼓励**您尽可能使用 insert(String, String, ContentValues), update(String, ContentValues, String, String[]) 等。

我不是 Android 程序员，但我当然不会被鼓励使用该`insert`函数而不是`execSQL`，*除非*我想检索[`rowid`](http://sqlite.org/lang_createtable.html#rowid)插入记录的 。此外，引用的解释充其量是令人困惑的，因为它暗示插入可能会返回一些数据。

请注意，可能有一些副作用会做出`insert`比 更好的选择`execSQL`，或者“最佳实践”要求您使用`insert`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-29T13:37:37.860

插入操作可以通过以下方式完成

```
 SQLiteDatabase db = this.getWritableDatabase();

    ContentValues values = new ContentValues();
    values.put(KEY_NAME, contact.getName()); // Contact Name
    values.put(KEY_PH_NO, contact.getPhoneNumber()); // Contact Phone

    // Inserting Row
    db.insert(TABLE_CONTACTS, null, values);
    //2nd argument is String containing nullColumnHack
    db.close(); // Closing database connection 
```

有关更多信息，请参阅代码链接 [http://www.blatin.in/2016/02/understanding-sqlite-database-in-android.html](http://www.blazin.in/2016/02/understanding-sqlite-database-in-android.html)

# html - Highcharts Pie Custom Legend，可能吗？

> ID：10519269
> 
> 赞同：2
> 
> 时间：2012-05-09T15:30:09.850
> 
> 标签：html, highcharts, legend

我正在使用 Highcharts 饼图。我在上面使用了图例，但注意到如果你开始在图例中添加太多项目；馅饼本身变得越来越小。因此，要纠正这一点，您必须使馅饼容器的高度越来越高以弥补这一点。好吧，如果您要在一页上有大量图表并且它们都是 1000 像素高以容纳多达 50 个图例项，那么这是不切实际的。

我看到不可能“包装”图例并让它自动扩展容器，同样不会使馅饼越来越小。所以我有两个问题：

1）是否可以将highcharts饼图图例放置在它自己的DIV中，以便它的高度可以自动扩展而不必担心饼图变小？

2）或者，是否可以创建自己的自定义图例？我一直在查看 highcharts 的点击事件，我想知道正确的函数代码是让自定义图例中的每个项目成为一个链接，当点击该链接时，会移动饼图的切片。根据我的研究，这似乎是不可能的。

如果您需要任何进一步的说明，请告诉我。

[(http://jsfiddle.net/Asd4A/192/)](http://jsfiddle.net/Asd4A/192/)

这是我为演示目的而使用的小提琴。现在，传奇从屏幕顶部射出。我需要它与底部对齐（在饼图下方），然后自动展开容器 div。（见上面的两个问题）。

提前感谢您的帮助，如果您需要其他任何帮助，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T12:35:36.943

正如您[在此处](http://www.highcharts.com/documentation/changelog#highcharts)看到的那样，已向其中添加了一个带有分页的选项，因此您如果再次查看您的示例，它将被 highcharts 分页。
我认为最新版本应该可以解决它。

# objective-c - 在方法内的循环中设置 NSWindow 和 UIView BackgroundColor 时遇到问题

> ID：10519271
> 
> 赞同：2
> 
> 时间：2012-05-09T15:30:12.443
> 
> 标签：objective-c, loops, uiview, background-color, nswindow

我在方法或循环中为 NSWindow (Mac OS X) 和 UIView (iOS) 设置背景颜色时遇到了很大的麻烦。以下设置背景颜色的代码仅适用于循环中的最后一行代码，即当 i、j、k 的所有值均为 255 时，屏幕变为白色作为适当的 RGB 混合。

```
`- (void) ChangeColorLoop
{
for (int i=0; i<=255; i++)
    for (int j=0; j<=255; j++)
        for (int k=0; k<=255; k++)
        {
            [NSThread sleepForTimeInterval: 0.1];
            //NSLog(@"%d, %d, %d", i, j, k);
            float red = (float) i/255;
            float green = (float) j/255;
            float blue = (float) k/255;    
            float alpha = 1.0f;
            UIColor *mixedColor = [UIColor colorWithRed:red green:green blue:blue alpha:alpha];
            //BackgroundView.backgroundColor = mixedColor;
            [BackgroundView setBackgroundColor:mixedColor];
        }
}` 
```

提前致谢，

杰瑞

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:55:23.383

从您的评论中听起来，这是在主线程上运行的。我看到它有几个问题。您没有看到颜色变化的根本原因是您的循环阻塞了主线程，并且视图（通常）仅在运行循环周期结束时重绘。直到整个循环完成后才会发生这种情况。有多种方法可以解决这个问题。最简单的可能是每次通过 for 循环手动运行运行循环。您还可以将此工作移至后台线程并将`setBackgroundColor:`调用分派到主队列。另一种方法是使用计时器（NSTimer 或计时器调度源）定期更新颜色。

在任何情况下，您都不应该在 for 循环中间休眠主线程。几乎没有充分的理由让主线程休眠，这样做会阻止您的 UI 更新或处理用户输入事件。

编辑：这是一些示例代码，显示了我提到的计时器方法：

```
@interface AppDelegate ()

@property (nonatomic, strong) NSTimer *colorChangeTimer;
@property (nonatomic) float red;
@property (nonatomic) float green;
@property (nonatomic) float blue;

@end

@implementation AppDelegate

- (id)init
{
    self = [super init];
    if (self) {
        self.red = 0.5;
        self.blue = 0.5;
        self.green = 0.5;
    }
    return self;
}

- (void)updateColors:(NSTimer *)timer
{
    NSColor *newColor = [NSColor colorWithDeviceRed:self.red green:self.green blue:self.blue alpha:1.0];
    [self.window setBackgroundColor:newColor];
    if (self.red >= 1.0) {
        [self.colorChangeTimer invalidate];
        self.colorChangeTimer = nil;
    }
    if (self.green > 1.0) {
        self.green = 0.0;
        self.red += 0.01;
    }
    if (self.blue >= 1.0) {
        self.blue = 0.0;
        self.green += 0.01;
    } else {
        self.blue += 0.01;
    }
}

- (IBAction)changeColors:(id)sender 
{
    if (self.colorChangeTimer != nil) return;
    self.colorChangeTimer = [NSTimer scheduledTimerWithTimeInterval:0.01 target:self selector:@selector(updateColors:) userInfo:nil repeats:YES];
}

@synthesize window = _window;
@synthesize colorChangeTimer = _colorChangeTimer;
@synthesize red = _red;
@synthesize green = _green;
@synthesize blue = _blue;

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:57:16.497

只有当您的代码返回到事件循环时，该`setBackgroundColor:`消息才会被执行，直到最后才会执行。这就是为什么只有最后一种颜色“需要”。

因此，您需要在后台线程上运行循环。*但是*`setBackgroundColor:`调用需要在主线程上（因为这是所有 UI 代码所在的位置）。

如果您使用 GCD，您的逻辑需要类似于：

```
-(void)changeColorLoop {
  dispatch_async(backgroundqueue, ^{
    for (;;) {
      // Do stuff
      dispatch_sync(main_queue, ^{
        [BackgroundView setBackgroundColor:mixedColor];
      });
    }
  });
} 
```

# c# - ExecuteReader(CommandBehavior.CloseConnection) 是否总是关闭连接？

> ID：10519273
> 
> 赞同：11
> 
> 时间：2012-05-09T15:30:31.477
> 
> 标签：c#, .net, database-connection

像这样编写这个辅助方法是否安全？它会一直关闭连接吗？我知道如果一切顺利，它会的，但是 ExecuteReader 会关闭连接，即使它抛出？

```
 public static IEnumerable<DbDataRecord> ExecuteSelect(string commandText, DbConnection conn)
    {
        using (DbCommand cmd = conn.CreateCommand())
        {
            cmd.CommandText = commandText;
            conn.Open();
            using (DbDataReader reader = cmd.ExecuteReader(CommandBehavior.CloseConnection))
            {
                foreach (DbDataRecord record in reader) { yield return record; }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T15:35:09.047

是的，即使它抛出异常，它也会关闭连接。如果您不指定`CommandBehavior.CloseConnection`并关闭连接，您的调用代码将无法访问阅读器的内容。

同样来自 MSDN：

> 执行命令时，关闭关联的 DataReader 对象时，关闭关联的 Connection 对象。

您应该确保阅读器在完成后关闭。所有这一切的好处是你已经将它包裹在 using 语句中，并且`try/catch/finally`在这种情况下你没有使用阅读器将被关闭，然后将关闭数据库连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-04T19:47:38.287

就我个人而言，我更喜欢使用`using`子句语句来*关闭/处理*连接，只是出于并行构造的原因-与良好的英语语法相同。
从我的角度来看，使用`CommandBehavior`是不平衡的，因此是不可预测的。

我经常告诉我的开发人员要简单而一致。
好像他们忘记设置`CommandBehavior`...

> 我不会看到它......
> 但如果他们不使用**`using`**声明......
> 我**会**看到它，因为它非常重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:35:02.987

是的，它会（在你正在做的 using 块内）。但是要访问您可能想要使用的数据 While DbDataReader.read 而不是迭代其内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:44:05.583

我知道这个问题与关闭连接有关；但是，连接不会被释放。要处理连接本身，您还需要将其包含在一个`using`块中：

```
using (DBConnection conn = new ...)
{
    using (DbCommand cmd = conn.CreateCommand())
    {
        cmd.CommandText = commandText;
        conn.Open();
        using (DbDataReader reader = cmd.ExecuteReader(CommandBehavior.CloseConnection))
        {
            foreach (DbDataRecord record in reader) { yield return record; }
        }
    }
} 
```

**更新**我认为这是一个有趣的问题，所以我编写了以下测试：

```
string connString = @"Data Source=.\SQLEXPRESS;Initial Catalog=msdb;Integrated Security=True;";
SqlConnection conn = new SqlConnection(connString);

try
{
using (SqlCommand cmd = conn.CreateCommand())
    {
        cmd.CommandText = "select  from MSdbms"; 
        conn.Open();
        Console.WriteLine(conn.State);
        using (IDataReader reader = cmd.ExecuteReader())//Will throw an exception - Invalid SQL syntax -see setting CommandText above
        {
            Console.WriteLine("here");
        }
    }
}
catch(Exception ex)
{  Console.WriteLine(conn.State); } //prints Open 
```

如果该行`using (IDataReader reader = cmd.ExecuteReader())`更改为：`using (DbDataReader reader = cmd.ExecuteReader(CommandBehavior.CloseConnection))`则打印**Closed**。要记住的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-20T20:49:56.533

如果您关闭阅读器和/或使用`using(var reader ...){}`块**YES**包装阅读器，则确保您的连接已关闭。

不包装也不关闭阅读器并`reader.Close()`保持我的连接打开。

# c# - Enumerable.Range 的内存消耗高？

> ID：10519275
> 
> 赞同：7
> 
> 时间：2012-05-09T15:30:36.550
> 
> 标签：c#, .net, linq, memory-management

最初我想知道是否`ToList`分配了比使用构造函数更多的内存`List<T>`（`IEnumerable<T>`没有区别）。

出于测试目的，我曾经`Enumerable.Range`创建一个源数组，我可以使用它来创建`List<int>`via 1.`ToList`和 2\. [constructor](http://msdn.microsoft.com/en-us/library/fkbw11z0.aspx)的实例。两者都在创建副本。

这就是我注意到以下之间内存消耗的巨大差异的原因：

1.  `Enumerable.Range(1, 10000000)`或者
2.  `Enumerable.Range(1, 10000000).ToArray()`

当我使用第一个并调用`ToList`生成的对象时，需要比数组（38,26MB/64MB）多出约 60% 的内存。

**问：**这是什么原因，或者我的推理错误在哪里？

```
var memoryBefore = GC.GetTotalMemory(true);
var range = Enumerable.Range(1, 10000000);
var rangeMem = GC.GetTotalMemory(true) - memoryBefore; // negligible
var list = range.ToList();
var memoryList = GC.GetTotalMemory(true) - memoryBefore - rangeMem;

String memInfoEnumerable = String.Format("Memory before: {0:N2} MB List: {1:N2} MB"
    , (memoryBefore / 1024f) / 1024f
    , (memoryList   / 1024f) / 1024f);
// "Memory before: 0,11 MB List: 64,00 MB"

memoryBefore = GC.GetTotalMemory(true);
var array = Enumerable.Range(1, 10000000).ToArray();
var memoryArray = GC.GetTotalMemory(true) - memoryBefore;
list = array.ToList();
memoryList = GC.GetTotalMemory(true) - memoryArray;

String memInfoArray = String.Format("Memory before: {0:N2} MB Array: {1:N2} MB List: {2:N2} MB"
   , (memoryBefore / 1024f) / 1024f
   , (memoryArray  / 1024f) / 1024f
   , (memoryList   / 1024f) / 1024f);
// "Memory before: 64,11 MB Array: 38,15 MB List: 38,26 MB" 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T15:36:58.923

这可能与添加到列表时用于调整后备缓冲区大小的加倍算法有关。当您分配为数组时，它的长度**是已知**的，并且可以通过检查`IList[<T>]`和/或来查询`ICollection[<T>]`；因此它可以分配一个数组，第一次调整大小，然后块复制内容。

对于序列，这是不可能的（序列不会以任何可访问的方式公开长度）；因此它必须改为回退到“继续填满缓冲区；如果已满，则将其翻倍并复制”。

显然，这需要大约两倍的内存。

一个有趣的测试是：

```
var list = new List<int>(10000000);
list.AddRange(Enumerable.Range(1, 10000000)); 
```

这将在最初分配正确的大小，同时仍使用序列。

tl;博士; 构造函数在传递一个序列时，首先检查它是否可以通过转换为众所周知的接口来获得长度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T15:38:13.417

这是因为用于在列表中创建后备数组的加倍算法。IEnumerable 没有 Count 属性，因此当您调用 ToList 时，它无法将支持数组预分配为目标大小。事实上，在每次调用 MoveNext 时，您都在调用 List 上的相应 Add。

但是 Array.ToList 可以覆盖基本 ToList 行为以将列表初始化为正确的容量。此外，它可能是它的构造函数中的 List，它试图将 IEnumerable 引用向下转换为已知的集合类型，例如 IList、ICollection、Array 等......

**更新**

事实上，它是在 List 的构造函数中确定参数是否实现了 ICollection：

```
public List(IEnumerable<T> collection)
{
  if (collection == null)
    ThrowHelper.ThrowArgumentNullException(ExceptionArgument.collection);
  ICollection<T> collection1 = collection as ICollection<T>;
  if (collection1 != null)
  {
    int count = collection1.Count;
    if (count == 0)
    {
      this._items = List<T>._emptyArray;
    }
    else
    {
      this._items = new T[count];
      collection1.CopyTo(this._items, 0);
      this._size = count;
    }
  }
  else
  {
    this._size = 0;
    this._items = List<T>._emptyArray;
    foreach (T obj in collection)
      this.Add(obj);
  }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T15:34:24.370

List is implemented as an array. When you exceed what it has allocated, it allocates another array double the size (essentially doubling the memory allocation). The default capacity is 4, and it doubles things from here on.

Most likely if you drop the number of items to say 7,500, you'll see the array drop to a little under 32 MBs, and the IList size to be 32 MBs.

You can tell `IList<T>` what the initial size should be, which is why if you give it the `IEnumerable<T>` at construction time, it *shouldn't* over allocate memory.

[Edit] after comments

In the case of `Enumerable.Range(a, b)` it returns an `IEnumerable<T>` only rather than an `ICollection<T>`. For `List<T>` to not overallocate the item passed during construction must also be an `ICollection<T>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:37:40.203

我猜是：

*   `Enumerable.Range(1, 10000000)`只创建一个 IEnumerable 并且不创建项目。

*   `Enumerable.Range(1, 10000000).ToArray()`创建一个数组，将内存用于数字

*   `Enumerable.Range(1, 10000000).ToList()`创建数字和附加数据来管理列表（部分之间的链接。列表可以更改其大小并需要以块为单位分配内存）。

# jquery - Highstock 图表错误：this.labelBBox 未定义第 30 行

> ID：10519276
> 
> 赞同：1
> 
> 时间：2012-05-09T15:30:38.397
> 
> 标签：jquery, highcharts, highstock

我有一个 Web 应用程序，其中包含大量功能齐全的 Highchart 图表。
我正在尝试在图表中实现 Highstock，但它直接在 Highstock 文件中给了我一个萤火虫错误：

```
this.labelBBox is undefined line 30 of Highstock.js 
```

我所有的库都是最新的（与在线演示版本完全相同）
我无法弄清楚为什么会出现此错误，这是我的代码：

```
function generateChart10(id, dataChart, currencies){
    // create the chart
    chart = new Highcharts.StockChart({
        chart : {
            renderTo : id,
            marginLeft: 15,
            borderColor: '#FFFFFF'
        },           
        rangeSelector : {
            enabled: false
        },
        navigator : {
            enabled: false
        },
        scrollbar : {
            enabled: false  
        },

        title : {
            text : ''
        },

        series : [{
            type : 'candlestick',
            name : currencies,
            data : dataChart
        }]
    });
} 
```

我的 dataChart 有这个值：

[[133650720080,0.9989,1.0022,0.9924.1.0022,0.9924,0.9996]，[1336334400 ],0.9981,0.9986,0.9921,0.9926] [1336075200,0.9921,0.9986]，[ [13335770000,0.9856,0.90.9867007>] [1335770000> [1335770000> [[1335770000>] [1335770000>] [1335770000> [[1335770000>] [1335470400万0.9858,0.987,0.98,0.9801],[1335384000000,0.9826,0.9865,0.9805,0.9858]]

有谁知道我为什么会出现这个错误？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:55:21.147

问题只是时间戳的顺序是相反的（从新到旧）。所以我只是颠倒了数组`dataChart`并修复了它！

# c++-cli - GCHandle.IsAllocated 不会为被破坏对象的弱句柄返回 false

> ID：10519277
> 
> 赞同：0
> 
> 时间：2012-05-09T15:30:38.667
> 
> 标签：c++-cli

在一些 C++/CLI 代码中，我有一个本地类，它有一个工厂方法`GetWrapper()`来创建自己的托管 .NET 包装对象。在内部，它通过 GCHandle 持有对其包装器的弱引用。当`GetWrapper()`被调用时，检查 GCHandle 并返回现有包装器的句柄，或者（如果它不再指向对象，因为旧包装器对象已被垃圾收集器销毁）创建一个新包装器回来。

```
// .h
class NativeClass
{
public:
    WrapperClass^ GetWrapper();
private:
    WrapperClass^ GetNewWrapper();
    GCHandle m_wrapperGCHandle;
};

// .cpp
WrapperClass^ NativeClass::GetWrapper()
{
    if(m_wrapperGCHandle.IsAllocated)
    {
        try
        {
            WrapperClass^ wrapper = nullptr;
            wrapper = dynamic_cast<WrapperClass^>(wrapperGCHandle.Target);

            if(wrapper == nullptr)
            {
                return GetNewWrapper();
            }
            else
            {
                return wrapper;
            }
         }
         catch(System::InvalidOperationException^)
         {
             return GetNewWrapper();
         }
    else
    {
        return GetNewWrapper();
    }
}

WrapperClass^ NativeClass::GetNewWrapper()
{
    WrapperClass^ wrapper = gcnew WrapperClass(/*some args*/);
    m_wrapperGCHandle = GCHandle::Alloc(wrapper, GCHandleType::Weak);
} 
```

现在奇怪的是它`m_wrapperGCHandle.IsAllocated` **总是**返回 true，即使包装器已被垃圾收集。MSDN[告诉](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.gchandle.isallocated.aspx)“在使用弱句柄时使用此属性来确定 GCHandle 是否仍然可用。”。但这总是正确的。如果它不可用，那么 Target 是一个 nullptr。

我错过了什么还是 MSDN 错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T13:43:07.570

我对 MSDN doco 的阅读是，在被调用`m_wrapprGCHandle.IsAllocated`之前将返回 true - 该属性正在检查句柄的状态，而不是句柄持有的引用的状态。`m_wrapperGCHandle.Free``IsAllocated`

正如您所指出的，`m_wrapperGCHandle.Target`当对象已被垃圾收集时，它是 null 。我使用了与示例代码中类似的方法来生成托管包装器类，我总是检查是否为空，如果`Target`为空，则重新生成包装器对象`Target`。

另外，一个建议……在我看来，您的代码中好像有句柄泄漏，因为您在`GCHandle::Alloc`没有相应调用的情况下进行`m_wrapperGCHandle.Free`调用。尝试将调用`Alloc`放在类构造函数中并将调用`Free`放在析构函数中：

```
NativeClass::NativeClass()
{
    m_wrapperGCHandle = GCHandle::Alloc(nullptr, GCHandleType::Weak);
}

NativeClass::~NativeClass()
{
    m_wrapperGCHandle.Free();
} 
```

那么你的`GetNewWrapper`方法很简单：

```
WrapperClass^ NativeClass::GetNewWrapper()
{
    m_wrapperGCHandle.Target = gcnew WrapperClass(/*some args*/);
} 
```

您可以从方法中删除`if(m_wrapperGCHandle.IsAllocated) - else`链`GetWrapper`。

# sharepoint-2010 - 从 SharePoint 链接打开 InfoPath 表单

> ID：10519278
> 
> 赞同：1
> 
> 时间：2012-05-09T15:30:41.600
> 
> 标签：sharepoint-2010, infopath2010

我有一个信息路径表单 (.xsn)，想从快速启动中打开该表单。链接是这样的（例如）：[http://SharePoint/Forms/Test2.xsn](http://SharePoint/Forms/Test2.xsn)

如何在不出现保存/打开对话框的情况下通过导航属性添加 .xsn 页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T17:53:29.753

坎贝尔，

尝试这个：

在注册表项：[HKEY_CLASSES_ROOT.xsn] 下，创建一个名为：“Content Type”=“application/octet-stream”的新字符串值

这不会提示您进入保存/打开对话框。

我希望这会有所帮助！

# gfortran - gfortran 错误：格式字符串中缺少前导左括号

> ID：10519279
> 
> 赞同：3
> 
> 时间：2012-05-09T15:30:49.643
> 
> 标签：gfortran

我从 gfortran 得到错误：

```
 write(*,'ERROR in subroutine rddist ')                                
               1 
```

错误： (1) 处的格式字符串中缺少前导左括号

io-cfs.f:6574.41:

```
 >    (nint(MOD(cld_scale*1000000.0, 1000000)) .NE. 0)) THEN               
                                     1 
```

错误：(1) 处固有的“mod”的“a”和“p”参数必须具有相同的类型

你能告诉我它的含义和解决方案吗？非常感谢。

迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:40:57.113

第一：`write(*,'ERROR in subroutine rddist ')`不是写字符串的指令`'ERROR in subroutine rddist '`。write 例程的第二个参数是一个格式字符串，应该是 begin`'(`和 end `)'`。由于您的格式字符串没有正确开始，编译器在那里发现了一个错误。你可能打算写的是：

```
write(*,*) 'ERROR in subroutine rddist ' 
```

现在查看 Fortran 文档中的“编辑描述符”以了解该`write`命令的第二个参数。

第二：`mod`内在函数要求它的两个参数具有相同的类型（和种类）。你给了它一个实数`cld_scale*1000000.0`和一个整数`1000000`。根据您希望结果的类型，将其中一个转换为另一个类型。对于类型转换，请查看函数`real`和`int`.

# jquery - jQuery 动画 scrollTop 在 IE 7 中不起作用

> ID：10519286
> 
> 赞同：10
> 
> 时间：2012-05-09T15:31:20.283
> 
> 标签：jquery, cross-browser

以下适用于 Chrome / FF 等...

```
$('body').animate({scrollTop : 0}, 0); 
```

但是，在 IE 7 中，它什么也不做。
有替代方案吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-09T15:35:45.583

**编辑**正如许多人所指出的，最好使用：

```
$('body, html').animate({scrollTop : 0}, 0); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-09T15:38:30.110

```
$('body, html').animate({scrollTop : 0}, 0); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T13:26:11.303

在 IE8 中，我`$(document).scrollTop()`用来获取 scrollTop 属性，`$('body').scrollTop()`否则`$('html').scrollTop()`会一直返回 0。

也许你可以使用

```
$(document).animate({scrollTop: 0}, 0);
$('html,body').animate({scrollTop: 0}, 0); 
```

使其适用于所有浏览器。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-07T07:20:37.057

放：

```
# FF、IE8        
document.documentElement.scrollTop = 100;

# chrome
document.body.scrollTop = 100; 
```

得到：

```
scrollTop = document.documentElement.scrollTop + document.body.scrollTop; 
```

# ios - 我可以将二进制形式的 iOS 应用程序传递给第三方为应用程序商店签名的代码吗？

> ID：10519287
> 
> 赞同：4
> 
> 时间：2012-05-09T15:31:24.420
> 
> 标签：ios, xcode, code-signing

作为一名独立的 iOS 开发人员，我想让我的合作伙伴自己签署应用程序并处理分发。但是，我并不总是能够将整个项目连同源代码（可能是机密的）一起传递给他们构建。Xcode 中是否有步骤使之成为可能？

我知道我可以使应用程序的关键部分成为一个单独的库，以链接到整个项目。在某些情况下它可能是合适的，但是在某些情况下，我想避免与兼容性问题和代码分离相关的额外负担。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:44:53.300

这似乎一直是*可能*的，但到目前为止我尝试过的所有方法都失败了。

我们要做的是让客户端传递一个 .p12 文件，其中包含他们的私钥和分发证书，以及 App Store 移动供应配置文件。

然后，我们构建并签署应用程序，并将其传递回客户端，以便他们使用 Application Loader 上传。这运作良好。

# bash - bash 提示 - 退出含义

> ID：10519289
> 
> 赞同：1
> 
> 时间：2012-05-09T15:31:25.377
> 
> 标签：bash, shell, exit, prompt

我是 bash 的初学者，通常使用 shell。当我打开一个终端时，它会出现这样的提示：

```
myusername@dev94:~> 
```

其中 myusername 为蓝色，dev94 为红色，> 为绿色（我知道这种颜色配置可能在我的 .bashrc 文件中）。这是我的问题：当我键入 exit 并按 Enter 时，会发生这种情况：

```
myusername@dev94:~>
exit
exit
myusername@dev94:~> 
```

myusername@dev94:~> 全是黑色，没有任何颜色。我输入exit之前的颜色和我输入exit之后的无色有什么区别？（附带说明，我只输入了第一个出口。当我按 Enter 键时，第二个出口自行出现。想知道第二个出口来自哪里。它只是每个 shell 中的 bash/shell 吗？）

如果我再次键入 exit（在无色提示符下）并按 Enter，则 shell 关闭。我可以理解shell进程退出并且窗口关闭。我的第二个问题：为什么当我第一次在彩色提示符下键入 exit 时它没有关闭。为什么第一个退出命令从有色提示变为无色提示？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:31:49.037

也许你的 shell 设置了一个 SHELL 变量，但这不是必须的，也不一定是正确的：

```
echo $SHELL
/bin/bash 
```

如果您在进程列表中查看 ps ax --forest：

```
ps ax --forest 
```

您应该自己找到 ps 命令，在内壳之上，在外壳之上。

# magento - Magento: How to get products by tag name?

> ID：10519290
> 
> 赞同：0
> 
> 时间：2012-05-09T15:31:31.633
> 
> 标签：magento

I am using Magento 1.7.0.0 CE and have a few questions.

How can i get products by tag name?

Is there any method in Magento that takes tag name and returns products assigned to that tag (tags are made by admin and products are assigned to it)

I ideally am looking for Mage Core API to do this. Does Mage Core API include this functionality?

Many thanks, Pez

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:19:31.970

You can just use the «addTag» filter to the collection:

```
$collection->addTagFilter($tagId); 
```

That should do the trick.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T19:13:48.487

```
$tagId = 3;  //Mage::getModel('tag/tag')->loadByName($tagName)->getId();

$collection = Mage::getResourceModel('tag/product_collection')
                    ->addAttributeToSelect('sku')
                    ->addAttributeToSelect('name')
                    ->addTagFilter($tagId);

print_r($collection->getData()); 
```

# java - BigBlueButton 中的永久房间

> ID：10519291
> 
> 赞同：0
> 
> 时间：2012-05-09T15:31:33.640
> 
> 标签：java, bigbluebutton

有没有办法在 BigBlueButton中创建**永久房间？**如果是这样，有什么提示吗？我想要做的是有一个永久会话，用户可以随时加入。

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:52:19.627

要了解如何创建永久房间，请查看 demo1.jsp 的源代码，它是 BigBlueButton 发行版中包含的 API 示例之一。你可以在

```
/var/lib/tomcat6/webapps/demo/demo1.jsp 
```

这是登录演示会议时运行的代码，您可以在此处查看：http: [//demo.bigbluebutton.org/](http://demo.bigbluebutton.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-23T06:11:03.123

如果你安装了bigbluebutton demo，登陆页面(demo1.jsp)“Demo meeting”是类似的东西

[http://docs.bigbluebutton.org/install/install.html#6-install-api-demos](http://docs.bigbluebutton.org/install/install.html#6-install-api-demos)

同样，如果您想为不同的用户提供不同的永久房间，您可以生成并维护唯一的会议 ID（例如 guid），并在每次用户请求会议时创建具有相同 ID 的会议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-22T15:36:36.780

您可以添加会话 /var/lib/tomcat6/webapps/demo/demo1.jsp

但我建议您自定义 wordpress。管理 bigbluebutton 的一切。

您可以很容易地集成**wordpress**以控制 bigbluebutton 会话（房间、密码、访问权限、访客帐户）、视频播放、基于用户的身份验证，您可以创建会议会话，您可以让他们等到演示者登录到房间。

# python - Django file system

> ID：10519299
> 
> 赞同：0
> 
> 时间：2012-05-09T15:32:02.123
> 
> 标签：python, django, filesystems

I have a web app which I am creating for screen writers. I need to have a filesystem so that the users can see which files they recently created. They also will have the option to create a new file which they will be able to edit and save online. I was wondering if anybody knows of a django app, that allows user to create and edit files.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:23:45.477

只需使用[正常的文件机制](https://docs.djangoproject.com/en/dev/ref/models/fields/#filefield)。Django 的文件字段是独立于存储的，并且会按照配置将它们保存到磁盘、WebDAV、S3 等。

# linq - Linq 获取下 n 条记录

> ID：10519303
> 
> 赞同：1
> 
> 时间：2012-05-09T15:32:19.440
> 
> 标签：linq, c#-4.0, linq-to-entities, linq-to-objects

我有一个带有寻呼机的网格，我试图从一个起始索引开始获取接下来的 25 条记录。

例如，我第一次返回 25 条记录，当我更改为下一条时，我想选择接下来的 25 条记录并跳过前 25 条。

使用 LINQ 最可取的方法是什么？

谢谢，阿拉

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T15:38:11.620

我会使用[Take](http://msdn.microsoft.com/en-us/library/bb503062.aspx)和[Skip](http://msdn.microsoft.com/en-us/library/bb358985.aspx)方法

```
var list = source.Skip(25 * page).Take(25); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:23:25.880

如果您想要更好的性能，您可以将您的记录集合划分为 25 组：这是一个 [简单的解决方案](https://stackoverflow.com/a/6362642/480799)和一个[有效的解决方案](https://stackoverflow.com/a/438208/480799)。

请记住，每次枚举 IEnumerable 时，都会执行创建它的语句，因此请务必在适当的时候使用 ToList()。

# php - PHP - 字符串到 64 位数字

> ID：10519305
> 
> 赞同：1
> 
> 时间：2012-05-09T15:32:25.743
> 
> 标签：php, twitter, 64-bit

我正在玩 Twitter API。有些数字（例如 Twitter ID）非常大，例如 199693823725682700。

我已经将此数字作为字符串格式，现在我需要将其更改为正常可读的数字，而不是像 1000xE09，因为我需要从该字符串转换的数字中减去 -1。然后，我还需要将数字作为字符串发送。

总之，在PHP中，如何将字符串更改为数字，例如“199693823725682700”为另一个字符串“199693823725682699”（原始数字-1）？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:16:02.430

如果 BCMath 不可用（如果可用，这将是更好的选择）此函数将递减存储为字符串的任意大小的整数。没有处理浮点数或科学记数法的插值，它只适用于带有可选符号的十进制数字字符串。

```
function decrement_string ($str) {

  // 1 and 0 are special cases with this method
  if ($str == 1 || $str == 0) return (string) ($str - 1);

  // Determine if number is negative
  $negative = $str[0] == '-';

  // Strip sign and leading zeros
  $str = ltrim($str, '0-+');

  // Loop characters backwards
  for ($i = strlen($str) - 1; $i >= 0; $i--) {

    if ($negative) { // Handle negative numbers

      if ($str[$i] < 9) {
        $str[$i] = $str[$i] + 1;
        break;
      } else {
        $str[$i] = 0;
      }

    } else { // Handle positive numbers

      if ($str[$i]) {
        $str[$i] = $str[$i] - 1;
        break;
      } else {
        $str[$i] = 9;
      }

    }

  }

  return ($negative ? '-' : '').ltrim($str, '0');

} 
```

[看到它工作](http://codepad.org/vzuemJ1D)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:35:57.740

当然。

BC 数学模块
函数[http://de.php.net/manual/en/function.bcsub.php](http://de.php.net/manual/en/function.bcsub.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T15:35:41.210

显然，目前在 php 中处理大整数的唯一方法是使用`bcmath`扩展。在 PHP6 中规划了 64 位整数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:34:43.493

你应该用 PHP 试试 GMP，

这是[手册](http://us.php.net/manual/en/intro.gmp.php)。

# javascript - How to Expand a Box Size Using jQuery Without affecting Page Layout

> ID：10519306
> 
> 赞同：1
> 
> 时间：2012-05-09T15:32:32.413
> 
> 标签：javascript, jquery, css

I would like to run a jquery which extends a box(div) without affecting on page layout.Here is a sample [http://themes.ddwebstudios.net/?theme=photon&type=html](http://themes.ddwebstudios.net/?theme=photon&type=html)

As you can see if you mouse over on the small transparent box under the image (accross the page) the box will be slideup without changing the page size.

I know how to use .hide() and .show() or slidedown and slideup functions with a display:hidden; box format but as you know there are some issue here as I would likw to display a portion of box and also I dont want to have any changes on pagelayout

Here is the sample which I tried to figure out how to do it, Can you please take a look at that and let me know how I can add a portion of magicDiv box (5% of top) before the row_3 and extend it to full size using jquery functions without affecting(defarming) the page layout?

[http://jsfiddle.net/Behseini/nuC69/2/](http://jsfiddle.net/Behseini/nuC69/2/)

Thanks for your time in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:42:03.400

这些框不会更改页面大小，因为它们使用绝对定位和 z-index。

如果您在`album-thumbs`打开 div 时通过右键单击它来检查它，您会看到它是使用 CSS 完成的：

![在此处输入图像描述](../Images/d95c602de445af827aea6fa241d04f78.png)

关键要素是：

```
position: absolute;
z-index: 10; 
```

此外，这不是您问题的一部分，您可以使用它`display: none;`来避免影响页面布局或`visibility: hidden;`仍然让 div 影响页面布局。( `display: hidden;`，正如你所写的，不是有效的 CSS)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:59:23.080

加藤很到位。这是 jQuery() 的 show hide() 部分的一个小片段

我的有点不同，因为我喜欢使用数组来存储扩展窗口的高度。这使我可以扩展各种高度的窗口并减少 jQuery 代码

```
$(document).ready(function () {
    //create a string array to store various window sizes then based upon the attribute id of the element

        //load the apporaiate array value
        var winHeight = ["220px",
                         "100px",
                         "90px",
                         "400px",
                         "150px"];

    $(function () {
        $('.div1').hide();
    });

    $('.div2').click(function () {
        var cssProp = winHeight[$(this).attr('id')];

        if ($('.div1').is(':hidden')) {
            $('.div1').show();
            $('.div1').animate({ "height": cssProp }, 'slow');
        }
        else {
            $('.div1').hide("slow");
            $('.div1').animate({ "height": "0px" }, 'slow');
        }
    }); 
```

唯一应用的CSS是

```
.div1
{
    margin: 5px;
    height: 0px;
    font-size: .9em;
    margin-left: auto;
    margin-right: auto;
} 
```

该值是通过在 div 元素中拾取属性 id 来分配的

```
<div id="1" class="div2" /> // would set the height to 100px 
```

当使用 hide() 时，它会将属性 hidden 附加到元素上，这就是我测试查看 div 元素的“视觉”状态的方式。在这个例子中，我在点击事件上有这个，但如果需要，您可以将事件逻辑更改为 .hover()

我已经修改[了您原来的 jsFiddle](http://jsfiddle.net/rlcrews/nuC69/6/)文件以显示一个工作示例

# ubuntu - 复制文件而不以 root 身份登录

> ID：10519308
> 
> 赞同：2
> 
> 时间：2012-05-09T15:32:47.173
> 
> 标签：ubuntu

我正在尝试将一些文件复制到 /var/www/ 文件夹中。如果我没有以 root 身份登录，我该怎么做。我知道我可以跳上终端并执行 sudo su 并进入 root 但我不确定如何从那里复制我的文件。或者，如果有一种方法允许使用 GUI 文件系统使用 root 密码进​​行复制和粘贴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:34:47.440

`sudo cp ~/path/to/file /var/www/`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:53:00.510

如果你想要 GUI，你可以用 sudo 运行 Nautilus

```
# gksudo nautilus 
```

为了更容易访问，如果您经常使用它，请右键单击您的应用程序菜单，选择`Edit Menus`并使用命令将一个项目添加到系统工具`gksudo nautilus`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-21T11:39:05.847

> 您可以打开 Ubuntu 的文件资源管理器，即“ `nautilus`”为`root`.

```
sudo nautilus 
```

现在你有充分的自由在任何地方做任何事情。

您只需以 root 身份登录一次，无需`sudo`每次都复制、移动、创建或删除任何需要 root 权限的文件。

希望，它可能会有所帮助...

# c - 这有什么意义：*(void **)(&fptr) = dlsym(handle, "my_function");`

> ID：10519312
> 
> 赞同：2
> 
> 时间：2012-05-09T15:33:08.113
> 
> 标签：c

代码来自这个页面： http: [//pubs.opengroup.org/onlinepubs/009695399/functions/dlsym.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/dlsym.html)

你能帮我理解这个吗？它获取函数指针的地址，将其转换为 void**，然后取消引用它。我不知道为什么它必须这样工作。

我感谢您的帮助！到目前为止，我得到的唯一建议是“从右到左阅读”或类似“从右到左循环阅读”。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T15:39:53.493

代码的意思是：

1.  取地址`fptr`。这个表达式的类型是指向函数的指针（某种特定类型）。
2.  将该指针表达式转换为“指向 void 的指针”。
3.  取消引用该指针以访问对象`fptr`，就好像它是 type的对象一样`void *`。
4.  将右边的结果赋值给第3步得到的左值。

不幸的是，在 POSIX 中编写这个示例的人已经破解了，因为第 3 步违反了 C 语言的别名规则，因此调用了未定义的行为。特别是，**现实世界的**编译器会以破坏预期用途的方式优化此代码。

这个例子的作者*试图*实现的是避免将右手边从*指向 void*的*指针转换为指向函数*的指针。这是基于 C 标准要求此强制转换生成警告的说法，但我已经彻底搜索过这样的要求，但找不到这样的要求。

如果确实存在这样的问题（警告要求），那么在不调用未定义行为（如 POSIX 文本中的坏例子）的情况下使警告静音的唯一方法是这样做：

```
void (*fptr)(); // or whatever function pointer type you want
void *temp = dlsym(handle, "my_function");
memcpy(&fptr, &temp, sizeof fptr); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:39:43.827

该函数返回一个函数指针。那个代码说嘿把我的函数指针变量给我它的地址。将其投射到`void **`. 现在尊重`void **`并将 void * = 的值设置为我从调用中获得的指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:08:24.200

`*(void **)(&fptr) = dlsym(handle, “my_function”);`

为了使这更简单，

`fptr`是一个指针。

`&fptr`是那个指针的地址。

您正在将其类型转换为`pointer to a pointer to a void`

然后引用并分配函数的返回值。

# ruby-on-rails - How to compare DateTimes when ActiveRecord returns time w/ timezone

> ID：10519315
> 
> 赞同：1
> 
> 时间：2012-05-09T15:33:10.557
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec

How do I solve this date and timzeone comparison problem in RSpec:

Code:

```
promotion.start_date.should == DateTime.strptime("2012-02-08", "%F") 
```

Result:

```
Failure/Error: promotion.start_date.should == DateTime.strptime("2012-02-08", "%F")
  expected: Wed, 08 Feb 2012 00:00:00 +0000
       got: Wed, 08 Feb 2012 00:00:00 EST -05:00 (using ==)
  Diff:
  @@ -1,2 +1,2 @@
  -Wed, 08 Feb 2012 00:00:00 +0000
  +Wed, 08 Feb 2012 00:00:00 EST -05:00 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-09T20:28:05.257

看起来您的开发机器上有 EST 时区，Rails 应用程序中有 UTC（默认）。我会说你的测试中的错误是合法的:) 在你的 Rails 应用程序中设置相同的时区，`config.time_zone = 'Eastern Time (US & Canada)'`错误就会消失。

# sql-server - ASP & SQL Server 错误：在与请求的名称或序号对应的集合中找不到项目

> ID：10519317
> 
> 赞同：0
> 
> 时间：2012-05-09T15:33:15.200
> 
> 标签：sql-server, asp-classic

我对此进行了大量研究并尝试了所有建议。

我在 SQL Server 表中有一个名为`LotSqFt`. 该表使用名为的存储过程进行更新`sp_EditRecord1`

```
SET ANSI_NULLS ON
SET QUOTED_IDENTIFIER ON
SET NOCOUNT ON
GO

ALTER PROCEDURE [dbo].[sp_EditRecord1]
   @LotID      INT,
   @LotSqFt    VARCHAR(16)
AS
    UPDATE Lot 
    SET LotSqFt = @LotSqFt
    WHERE LotID = @LotID 
```

我从 ASP 页面调用此过程，我收到以下错误：

> ADODB.Connection 错误 '800a0cc1'
> 在与请求的名称或序号相对应的集合中找不到项目。
> 
> /DTS/engine/processor.asp，第 110 行
> 
> 第 110 行是：
> 
> Response.Write(oDBc.Errors(0).Description)

我读过的所有内容都表明该列的名称错误或不存在。这对我来说不是这种情况，因为我可以在查询分析器中看到该列并从中检索数据。还有什么我忽略的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:46:17.797

发现 MS-SQL Server 实例上存在缓存问题。重新启动数据库服务器清除了问题并解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-15T18:53:40.207

就我而言，错误发生在*Classic ASP VBScript*行上，该行尝试使用在执行 时应检索的存储过程参数，`.Parameters.Refresh`例如：

```
Set cmd = server.createobject("ADODB.Command")

cmd.ActiveConnection = Conn 
cmd.CommandText = "your-stored-procedure-name-here"
' Response.Write ( "cmd.CommandText: " & cmd.CommandText & "<br />" & vbCrLf )
cmd.CommandType = adCmdStoredProc
cmd.CommandTimeout = 900 
cmd.Parameters.Refresh
' Response.Write ( "cmd.Parameters.Count: " & cmd.Parameters.Count & "<br />" & vbCrLf )
cmd.Parameters(1).Value = MyValue 
```

确保正确设置了执行存储过程的权限。为我工作。进行数据库还原后我失去了权限：

```
USE <database> ;
GO
GRANT EXECUTE ON stored-procedure TO user 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T16:21:22.957

除非您使用“SELECT”语句返回记录集，否则您将没有要迭代的数据库对象。

# javascript - 关于 jQuery ajax 调用，代码执行是如何工作的？

> ID：10519321
> 
> 赞同：0
> 
> 时间：2012-05-09T15:33:34.893
> 
> 标签：javascript, jquery

我对 javascript 的理解一直是代码是按顺序执行的，所以下一行要等到上一行执行后才会执行。

我有类似以下的东西，我试图用它来尝试一次保存一系列问题。

```
 for(var i = 1; i <= assessment_question_count; i++)
    {
        if(valid)
        {
            var sort = i;
            $.ajax(
            {
                type: "POST",
                url: '/assessmentquestion/create',
                data: 'assessment_id=' + assessment[1] + '&question_text=' + $('#assessment_question_text_' + sort).val() + '&assessment_question_type_id=' + 
                    $('assessment_question_type_' + sort).val() + '&sort_order=' + i,
                success: function (str) 
                {
                    var result = str.split('|');
                    if (result[0] == 'success') 
                    {
                        var message = '<br />Question saved ';
                        update_display_message(message);
                    }
                    else if(result[0] == 'fail')
                    {
                        valid = false;
                        var message = '<br />Error saving question ';
                    }
                    else 
                    {
                        valid = false;
                        var message = '<br />Error saving question ';
                    }
                }
            });
        }
    } 
```

我遇到的问题是它似乎在进行 ajax 调用后立即进入下一个循环，而不是等待它完成。有没有办法修改它，所以在之前的更新之前它不会尝试下一个问题？

编辑：我在想也许把它放在一个递归方法中，它会一直调用自己直到它完成。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T15:35:41.443

默认情况下，[ajax 异步工作](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。

设置`async`为`false`防止这种情况。

```
$.ajax(
            {
                type: "POST",
                url: '/assessmentquestion/create',
                async: false,
                etc... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:35:29.793

XMLHttpRequests 在浏览器中默认是异步的。如果您真的想要，您可以通过设置您的 ajax 选项使其同步`async: false`，但这是不可取的，因为这会锁定整个 UI - 在该请求返回之前几乎不会发生任何其他事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T20:09:05.987

通常最好减少到服务器的往返次数以完成任务。在您的情况下，在完成前等待响应的同时发送 X 个请求可能是一种糟糕的用户体验。

在我看来，最好将您的数据序列化到数组或 JSON 中，然后将集合集作为单个数据实体发布，进行验证并发送回包含所有验证错误和/或消息传递需求的 JSON 响应。

虽然这可能会增加客户端编码，但您需要这样做，它将提供更可靠的 UI 和更好的用户体验。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T15:35:56.800

是的。通过调用`$.ajax()`，您正在设置一个回调 ( `success`)，当数据返回时将调用该回调。无需中间等待；你会被打断，所以它进入下一个循环。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T15:38:20.693

问题是 ajax 调用异步发生因此名称，将以下内容添加到您的 ajax 调用中：

```
async : false 
```

# yaml - 将 yaml 解析器添加到 php.ini 文件

> ID：10519329
> 
> 赞同：5
> 
> 时间：2012-05-09T15:34:10.110
> 
> 标签：yaml, php

我想知道如何添加。我已经对文件`Yaml parser to php.ini in Ubuntu 12.04`进行了更改，但仍然无法正常工作。所以有人可以在这里帮助我吗？`php.ini``"extension=yaml.so"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-08-21T03:15:11.667

实际上，您必须为 PHP 扩展安装做如下的事情：

```
$ sudo apt-get install php-dev php-pear libyaml-dev
$ sudo pecl install yamL
$ sudo sh -c "echo 'extension=yaml.so' >> /etc/php5/mods-available/yaml.ini"
$ sudo php5enmod yaml 
```

干杯，Phase3.io 的 Karl

**更新**

要通过 pecl 为 php7 安装 yaml，请执行以下操作：

```
$ sudo pecl install yaml-2.0.0 && echo "extension=yaml.so" > /usr/local/etc/php/conf.d/ext-yaml.ini 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T12:26:21.440

我明白了。

我不得不在我的文件中写上`extension=yaml.so`没有任何引号的内容。`php.ini`

# ipad - Is it possible to create a thumbnail from a doc file as well as .xls file in ipad app

> ID：10519331
> 
> 赞同：-5
> 
> 时间：2012-05-09T15:34:23.773
> 
> 标签：ipad, thumbnails, xls, doc

Is it possible to create a thumbnail from a doc file as well as .xls file in ipad app..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T15:38:36.863

我很确定这是可能的。

# search - How do I search for the content of files in a Perforce depot (P4V)?

> ID：10519342
> 
> 赞同：6
> 
> 时间：2012-05-09T15:34:56.777
> 
> 标签：search, perforce, p4v, depot

I am currently using Perforce version 2010.2. It appears that this version does not have an integrated search functionality that will go through the content of every single file. My current P4V version only allows me to search for filenames but not for content.

Any input on this would be much appreciated.

Thank you in advance.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T18:44:01.467

我相信，试试 2010.1 版中添加的“p4 grep”命令。

# c# - 如何在没有密码的情况下访问 Cmis？

> ID：10519347
> 
> 赞同：4
> 
> 时间：2012-05-09T15:35:07.137
> 
> 标签：c#, alfresco, ntlm, cmis, dotcmis

我正在尝试使用 DotCmis ( [http://chemistry.apache.org/dotnet/dotcmis.html](http://chemistry.apache.org/dotnet/dotcmis.html) )通过 cmis 查询 Alfresco

只要我指定用户/密码，它就可以正常工作。

在不指定密码的情况下如何做到这一点？我想使用 CurrentIdentity 或其他东西，但我不能......

```
parameters[SessionParameter.BindingType] = BindingType.AtomPub;
parameters[SessionParameter.AtomPubUrl] = "http://server/alfresco/service/cmis";
parameters[SessionParameter.User] = "user";
parameters[SessionParameter.Password] = "password"; 
```

通过 Apache 文档，您似乎可以将 CmisBindingFactory 用于 ntlm，但我认为 dotCmis 不支持它。我对java / apache一无所知，所以我在这里迷失了。

可以实现吗？还是您可以建议任何其他图书馆？

非常感谢你，如果你能帮忙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T00:29:26.023

不确定这会有所帮助，但是：

dotCMIS 将在下一版本 (0.5) NTLM 中支持，对于 0.4，您可以下载补丁 [https://issues.apache.org/jira/browse/CMIS-531或从主干](https://issues.apache.org/jira/browse/CMIS-531)[https://svn.apache](https://svn.apache.org/repos/asf/chemistry/dotcmis/trunk/) 获取整个源代码 [.org/repos/asf/chemistry/dotcmis/trunk/](https://svn.apache.org/repos/asf/chemistry/dotcmis/trunk/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-28T08:16:35.857

DotCMIS 0.5 已经发布，感谢 Vincent，它现在应该可以开箱即用了 :-)

示例代码：

```
// Parameters.
Dictionary<string, string> parameters = new Dictionary<string, string>();
parameters[SessionParameter.AtomPubUrl] = "http://yourserver:port/alfresco/cmisatom"; // Change this to yours.
parameters[SessionParameter.BindingType] = BindingType.AtomPub;
parameters[SessionParameter.AuthenticationProviderClass] = "DotCMIS.Binding.NtlmAuthenticationProvider";

// No need for username and password, thanks to NTLM-based SSO (Single Sign On)
//parameters[SessionParameter.User] = "<username>";
//parameters[SessionParameter.Password] = "<password>";

SessionFactory factory = SessionFactory.NewInstance();
ISession session = factory.GetRepositories(parameters)[0].CreateSession();

// List all children of the root folder.
IFolder rootFolder = session.GetRootFolder();
foreach (ICmisObject cmisObject in rootFolder.GetChildren())
{
    Console.WriteLine(cmisObject.Name);
} 
```

请注意`AuthenticationProviderClass`线路。
确保不定义用户名和密码，否则将不起作用。

[完整的工作示例 C# 解决方案](https://github.com/nicolas-raoul/DotCmisNtlmSample/blob/master/DotCmisNtlmSample/Program.cs)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T13:40:38.287

我向 DotCmis 提交了一个补丁，现在最新版本可以与 Ntlm 一起使用。这在我这边在 Alfresco 上进行了测试。

抱歉，我在这里回答的时间太长了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:44:26.507

我不熟悉CMIS。从您的代码看来，参数未传递给服务器。您是否需要通过添加参数来做不同的事情？例如，

```
parameters.add(value, key....); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T15:52:41.757

> 在 WS-Security (UsernameToken) 中默认启用，并且必须提供用户名和密码。尝试禁用 WS-Security
> 
> 我不熟悉CMIS
> 
> 在这里检查..可能会有所帮助
> 
> [https://svn.apache.org/repos/infra/websites/production/chemistry/content/opencmis-client-bindings.html](https://svn.apache.org/repos/infra/websites/production/chemistry/content/opencmis-client-bindings.html)

# r - 创建与“.”类似的函数 来自 Plyr

> ID：10519351
> 
> 赞同：0
> 
> 时间：2012-05-09T15:35:34.687
> 
> 标签：r

希望有人可以发布一个类似于“。”的自定义函数的示例。在 plyr。

我拥有的是一个数据框。我不断运行查询的地方，例如：

```
sqldf("select * from event.df where Date in (select Date from condition.df where C_1 = 1 and (C_2 = 1 OR C_3 = 3)") 
```

我想要的是有一个基本上作用如下的功能：

```
.(C_1, C_2 + C_3) 
```

具体来说，一个公式向量定义了我用来选择数据的属性。我可以将“+”视为或“*”视为 AND 等...

我尝试查看“。”的返回类型。来自 plyr 但不明白。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T17:05:28.400

一个类似的函数`plyr:::.`是`plyr:::.`：

```
plyr:::.
function (..., .env = parent.frame()) 
{
    structure(as.list(match.call()[-1]), env = .env, class = "quoted")
}
<environment: namespace:plyr> 
```

这将返回一个列表并为其分配一个“引用”类。它所做的只是将 的参数`.()`与封闭环境中的列名相匹配。在不同的环境中尝试：

```
with(iris, .(Sepal.Length, Species))
List of 2
 $ Sepal.Length: symbol Sepal.Length
 $ Species     : symbol Species
 - attr(*, "env")=<environment: 0x2b33598> 
 - attr(*, "class")= chr "quoted" 
```

接下来你对这个对象做什么，取决于你的目的。有几种方法可用于处理此类：

```
methods(class="quoted")
[1] as.quoted.quoted* c.quoted*         names.quoted*     print.quoted*     [.quoted*        

   Non-visible functions are asterisked 
```

* * *

因此，如果您正在寻找类似的功能`.()`，也许您可​​以简单地使用`.()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:56:59.757

```
parse <- function (formula, blank.char = ".") 
{
    formula <- paste(names(formula), collapse = "")
    vars <- function(x) {
        if (is.na(x)) 
            return(NULL)
        remove.blank(strsplit(gsub("\\s+", "", x), "[*+]")[[1]])
    }
    remove.blank <- function(x) {
        x <- x[x != blank.char]
        if (length(x) == 0) 
            NULL
        else x
    }
    parts <- strsplit(formula, "\\|")[[1]]
    list(m = lapply(strsplit(parts[1], "~")[[1]], vars), l = lapply(strsplit(parts[2],  "~")[[1]], vars))
}

parse(.(a + b ~ c + d | e))

    $m
$m[[1]]
[1] "a" "b"

$m[[2]]
[1] "c" "d"

$l
$l[[1]]
[1] "e" 
```

# jquery - Zend 框架和 Jquery

> ID：10519352
> 
> 赞同：0
> 
> 时间：2012-05-09T15:35:36.707
> 
> 标签：jquery, jquery-ui, zend-framework

我已经多次使用 jquery，但我目前正在学习 Zend Framework。我认为我更好地理解它。

我正在尝试做一些简单的事情，比如从 jquery-ui 放置标签，但它不起作用。

这是我的布局文件：

```
 <!DOCTYPE html>
<html>
<head>

<meta charset="utf-8">

<script src="http://localhost/site/site/public/js/jquery-1.7.2.min.js"></script>
<script src="http://localhost/site/site/public/js/jquery-ui-1.8.20.custom.min.js"></script>

</head>
<body>

<?php echo $this->layout()->content; ?>

</body>
</html> 
```

这是我试图显示它的视图：

```
<script>
    $(function() {
        $( "#tabs" ).tabs();
    });
    </script>

<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
        <li><a href="#tabs-3">Aenean lacinia</a></li>
    </ul>
    <div id="tabs-1">
        <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
    </div>
    <div id="tabs-2">
        <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
    </div>
    <div id="tabs-3">
        <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>
        <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>
    </div>
</div> 
```

这是它显示的网站的源代码：

```
<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8">

<script src="http://localhost/site/site/public/js/jquery-1.7.2.min.js"></script>

<script src="http://localhost/site/site/public/js/jquery-ui-1.8.20.custom.min.js"></script>

</head>

<body>

<script>

    $(function() {

        $( "#tabs" ).tabs();

    });

    </script>

<div id="tabs">

    <ul>

        <li><a href="#tabs-1">Nunc tincidunt</a></li>

        <li><a href="#tabs-2">Proin dolor</a></li>

        <li><a href="#tabs-3">Aenean lacinia</a></li>

    </ul>

    <div id="tabs-1">

        <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>

    </div>

    <div id="tabs-2">

        <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>

    </div>

    <div id="tabs-3">

        <p>Mauris eleifend est et turpis. Duis id erat. Suspendisse potenti. Aliquam vulputate, pede vel vehicula accumsan, mi neque rutrum erat, eu congue orci lorem eget lorem. Vestibulum non ante. Class aptent taciti sociosqu ad litora torquent per conubia nostra, per inceptos himenaeos. Fusce sodales. Quisque eu urna vel enim commodo pellentesque. Praesent eu risus hendrerit ligula tempus pretium. Curabitur lorem enim, pretium nec, feugiat nec, luctus a, lacus.</p>

        <p>Duis cursus. Maecenas ligula eros, blandit nec, pharetra at, semper at, magna. Nullam ac lacus. Nulla facilisi. Praesent viverra justo vitae neque. Praesent blandit adipiscing velit. Suspendisse potenti. Donec mattis, pede vel pharetra blandit, magna ligula faucibus eros, id euismod lacus dolor eget odio. Nam scelerisque. Donec non libero sed nulla mattis commodo. Ut sagittis. Donec nisi lectus, feugiat porttitor, tempor ac, tempor vitae, pede. Aenean vehicula velit eu tellus interdum rutrum. Maecenas commodo. Pellentesque nec elit. Fusce in lacus. Vivamus a libero vitae lectus hendrerit hendrerit.</p>

    </div>

</div>

</body>

</html> 
```

我真的看不出有什么不妥。我测试了这些文件，看看我是否从正确的文件夹中调用它们并且它们可以工作。

我知道 Zend 有一个 ZendX 库，但我真的看不出它有什么优势，所以我试图手动完成。是不是要使用 jquery 我必须使用那个库？或者这有什么问题？！谢谢！

**——编辑我想我必须把主题。现在正在工作。手风琴在没有它的情况下工作，但我猜标签需要它。谢谢！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T20:54:28.560

我想我必须把主题。现在正在工作。手风琴在没有它的情况下工作，但我猜标签需要它。谢谢！

# html - 浏览器不使用 utf-8 但设置了元标记

> ID：10519356
> 
> 赞同：1
> 
> 时间：2012-05-09T15:35:47.423
> 
> 标签：html, browser, utf-8, character-encoding

这是我的页眉：

```
<!DOCTYPE html> 
<html> 
    <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
... 
```

如您所见，字符集设置为 utf-8，但 Chrome/Firefox 不会将页面打印为 utf-8。我猜那是因为服务器发送了这个标头：

```
Content-Type:text/html; charset=ISO-8859-15 
```

如何从我的 html 页面覆盖此标头？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T15:37:30.847

你不能。

HTTP 标头优先于声称等效的元元素。

修复您的服务器设置，使其发送正确的内容类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:42:30.347

您不能从您的 html 页面覆盖字符集。要寻找的东西：

1.  您的 Web 服务器可能配置有默认字符集。看看能不能改。请注意：这可能是一个全局设置，会影响特定`Content-Type`.

2.  尽管您确实`charset=UTF-8`在 html 文档中键入了内容，但您的 IDE/文本编辑器可能仍会使用不同的字符编码来保存它。如果您使用 *nix，您可以在命令行上检查任何文件的文件编码，如下所示：

    ```
    file -I filename.html 
    ```

    如果该命令的输出报告的不是`UTF-8`or `us-ascii`，您应该返回到您的 IDE/文本编辑器，并弄清楚如何在它保存为的文件上设置字符编码`UTF-8`。您的网络服务器可能会自动检测字符编码并相应地设置标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:53:49.317

您可以通过添加包含以下内容的 .htaccess 文件来更改服务器标头：

```
AddDefaultCharset UTF-8 
```

# wpf - 在网格顶部添加按钮

> ID：10519358
> 
> 赞同：1
> 
> 时间：2012-05-09T15:35:51.613
> 
> 标签：wpf, user-controls, wpf-controls

我有一个从 Grid 派生的用户控件

1.  如何在网格用户控件的右上角（网格上方）添加一个按钮？

我可以创建新的自定义控件并做到这一点。但我不想再次向用户公开网格的所有属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:48:36.883

我也遇到过类似的要求。我使用具有透明背景的额外面板来管理它。

以下是相同的伪代码

```
<Grid Background="Transparent" x:Name="rootGrid">
    <Grid x:Name="contentGrid" Margin = "0 50 50 0" Background="Blue">
    </Grid>
    <Button HorizontalAlignment="Right" VerticalAlignment="Top"  Width="200" Height="100">
    </Button>
<Grid> 
```

# c++ - 具有 2 个同时数据库连接的 QT 噩梦

> ID：10519368
> 
> 赞同：1
> 
> 时间：2012-05-09T15:36:39.553
> 
> 标签：c++, database, qt

我需要在我的 QT 代码中 **同时**读取 microsoft **ODBC**数据库和**postgres**数据库。

 ****问题**

1.  一旦我打开数据库连接，我如何指示 qsqlQuery 使用哪一个？
2.  为什么我的数据库连接失败但这些数据库存在

谢谢

```
#include <QtCore/QCoreApplication>
#include <QSqlDatabase>
#include <QSqlQuery>
#include <Qdebug>

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    //odbc
    QSqlDatabase dbODBC= QSqlDatabase::addDatabase("QODBC","microsoft_connection");
    dbODBC.setDatabaseName("BIO");
    if(!dbODBC.open())
    {
        qDebug()<<"failed to open BIO";
        exit(1);
    }
    //postgress
    QSqlDatabase dbPostgres= QSqlDatabase::addDatabase("QPSQL","postgres_connection");
    dbPostgres.setDatabaseName("makerere_boys_db");
    dbPostgres.setHostName("127.0.0.1");
    dbPostgres.setUserName("postgres");
    dbPostgres.setPassword("student");  
    if (!dbPostgres.open()) {
        qDebug()<<"failed to open postgres database";
        exit(1);
    }
    //how do i tell QSqlQuery to use dbODBC instead of dbPostgress?. Frustration follows
    QSqlQuery query;
    query.exec("SELECT * FROM fees");
    qDebug()<<query.value(0).toString();
    return a.exec();
    system("pause");
} 
```

上面的代码可以编译，但是 QSqlQuery 说数据库没有打开

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T16:04:38.553

请注意，您正在[将此](http://doc.qt.nokia.com/4.7-snapshot/qsqlquery.html#QSqlQuery-2)ctor 用于查询对象，并且仅对两个参数使用默认参数。注意文档所说的。因此，您告诉 ctor 使用默认数据库，该数据库必须是您的 postgres 数据库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T16:12:35.373

对于问题 #1：您需要将数据库作为参数传递给 QSqlQuery 构造函数：

```
QSqlQuery query(dbPostgres);
... 
```

对于问题 #2：查看 QSqlDatabase 类的文档。在`addDatabase`它的功能描述的底部指出：

> 在使用连接之前，必须对其进行初始化。例如，调用部分或全部 setDatabaseName()、setUserName()、setPassword()、setHostName()、setPort() 和 setConnectOptions()，最后调用 open()。

看起来你只是在调用 setDatabaseName。您可能需要向对象提供所描述的附加信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T23:15:40.460

```
QSqlQuery query1(QSqlDatabase::database("postgres_connection"));
query1.exec("SELECT * FROM fees");
while (query1.next()){
    QString col0 = query1.value(0).toString();
    QString col1 = query1.value(1).toString();
    qDebug() <<  QString("%1 , %2").arg(col0).arg(col1);
}

QSqlQuery query2(QSqlDatabase::database("microsoft_connection"));
query2.exec("SELECT * FROM fees");    
while (query2.next()){
    QString col0 = query2.value(0).toString();
    QString col1 = query2.value(1).toString();
    qDebug() <<  QString("%1 , %2").arg(col0).arg(col1);
} 
```

有点题外话，但您实际上并不需要实例化 a `QCoreApplication`(or `QApplication`) 来针对 RDBMS 运行查询。您可以放心地注释掉

```
// this line
#include <QtCore/QCoreApplication>
// and this line
QCoreApplication a(argc, argv);
// and this line
return a.exec(); 
```**

# sql - T-SQL将包含错误的查询插入另一个表

> ID：10519373
> 
> 赞同：1
> 
> 时间：2012-05-09T15:37:09.617
> 
> 标签：sql, tsql

我制作了一个程序来在一个表（主表）上执行插入/删除...我的程序还为另一个表（审计日志表）中的这个表上执行的操作（插入/删除）写了一个日志......程序为在审计日志表中的主表上执行的每个成功或失败操作写入日志...我的审计日志表中有一个字段，我想在其中移动操作失败的原因，如果操作将失败主桌..

我知道像 -503 ， +100 ， -803 这样的 sqlcode 的原因......但是我想为每个可能的 SQL 代码插入原因......

T-SQL 中是否有任何变量，我可以从中将 sql 错误文本消息插入表中..？？或者还有其他方法可以做到吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:42:10.367

尝试这样的事情：

```
BEGIN TRY
    -- Do your work on main table
END TRY
BEGIN CATCH

    INSERT INTO LOG_TABLE
    SELECT ERROR_NUMBER(),
           ERROR_MESSAGE()
END CATCH 
```

这假设 LOG_TABLE 只有两列，第一列是错误号，第二列是错误消息。您可以使用以下功能：

```
ERROR_LINE (Transact-SQL)
ERROR_NUMBER (Transact-SQL)
ERROR_PROCEDURE (Transact-SQL)
ERROR_SEVERITY (Transact-SQL)
ERROR_STATE (Transact-SQL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:42:00.193

是的，您可以这样做，但有一些复杂性和限制。这不是建议，只是一个答案。

SQLServer 提供了内置函数，例如 ERROR_MESSAGE()、ERROR_NUMBER() 以在 catch 块中使用。

如果您的插入/删除代码在自动提交模式下运行（没有开始传输，没有隐式事务），那么只需在 catch 块中记录错误消息和编号就可以了，因为插入和删除已经回滚或提交。

所以

```
begin try
    -- do work
end try
begin catch
    insert into audit_table select ERROR_MESSAGE(), ERROR_NUMBER()
end catch 
```

能行得通。

如果您的 TSQL 代码或客户端使用 begin tran 或隐式事务，catch 块中的逻辑必须考虑这一点，否则回滚原始事务时将回滚错误记录，不留下任何错误记录。

如果你有这样的...

```
begin try
    begin tran
    -- do work
    if xact_state() = 1 commit tran
    if xact_state() = -1 rollback tran
end try
begin catch
    -- Now there is a good chance a transaction is still pending or uncomittable.
    if xact_state() != 0 rollback tran -- assuming you always rollback.
    -- Insert will be recorded because previous transaction was cleared.
    insert into audit_table select ERROR_MESSAGE(), ERROR_NUMBER()
end catch 
```

如果您在 catch 块中不提交或回滚，并且您的事务是不可提交的，那么您的插入最终会回滚，并且您没有错误记录。

如果客户端正在管理事务，则可能无法记录错误信息，除非客户端对您的错误处理程序发出回滚没有问题。并且发出回滚本身可能会产生掩盖真正根本原因的错误。如果不考虑复杂性，如果客户端正在管理事务，那么让客户端也可以更容易地捕获和记录错误。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T15:58:25.047

--检查是否有错误然后----

```
 BEGIN  
         RAISERROR('something is wrong',16,2)  
         RETURN -20008  ---specify
    END 
```

根据返回的号码处理

# ruby - Ruby return 语句不适用于 super 关键字？

> ID：10519377
> 
> 赞同：15
> 
> 时间：2012-05-09T15:37:21.083
> 
> 标签：ruby

```
class Parent
  def test
    return
  end
end

class Child < Parent
  def test
    super
    p "HOW IS THIS POSSIBLE?!"
  end
end

c = Child.new
c.test 
```

我认为，由于类中的`test`方法`Parent`立即使用 return 语句，因此应该无法打印`Child`类的行。但它确实是打印出来的。这是为什么？

红宝石 1.8.7，Mac OSX。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T15:51:11.333

在这种情况下考虑调用的另一种方法`super`是如果它是任何其他方法：

```
class Parent
  def foo
    return
  end
end

class Child < Parent
  def test
    foo
    p "THIS SEEMS TOTALLY REASONABLE!"
  end
end

c = Child.new
c.test
# => "THIS SEEMS TOTALLY REASONABLE!" 
```

如果您真的想阻止对 的调用`p`，则需要`super`在条件中使用返回值：

```
class Parent
  def test
    return
  end
end

class Child < Parent
  def test
    p "THIS SEEMS TOTALLY REASONABLE!" if super
  end
end

c = Child.new
c.test
# => nil 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-09T15:40:41.717

`super`就像调用超类的方法实现的方法调用一样。在您的示例中，`return`关键字返回`Parent::test`并继续执行`Child::test`，就像任何其他方法调用一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-04-29T10:12:10.350

这是一种使用 yield 和 block 来解决它的方法。

```
class Parent
  def test
    return
    yield
  end
end

class Child < Parent
  def test
    super do
      p "HOW IS THIS POSSIBLE?!"
    end
  end
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-16T09:28:55.257

这是先辈的命令。

允许从增压方法提前返回的另一种方法是使用模块/关注实现（而不是继承）并将其添加到前面（而不是包含）。

```
class TestConcern
  def test
    return
    super # this line will never be executed
  end
end

class Child
  prepend TestConcern
  def test
    p "THIS LINE WILL NOT BE PRINTED... (but it's quite an obfuscated behaviour)"
  end
end 
```

顺便说一句，我发现这种混淆而不是简化。

# c# - C#的string.IndexOf怎么能执行得这么快，比普通的for循环find快10倍？

> ID：10519380
> 
> 赞同：15
> 
> 时间：2012-05-09T15:37:33.597
> 
> 标签：c#, string, search, indexof

我有一个很长的字符串（大小为**60MB**），我需要在其中找到有多少对 '<' 和 '>' 。

* * *

我首先尝试了自己的方式：

```
 char pre = '!';
        int match1 = 0;
        for (int j = 0; j < html.Length; j++)
        {
            char c = html[j];
            if (pre == '<' && c == '>') //find a match
            {
                pre = '!';
                match1++;
            }
            else if (pre == '!' && c == '<')
                pre = '<';
        } 
```

上面的代码在我的字符串上运行了大约**1000 ms**。

* * *

然后我尝试使用`string.IndexOf`

```
 int match2 = 0;
        int index = -1;
        do
        {
            index = html.IndexOf('<', index + 1);
            if (index != -1) // find a match
            {
                index = html.IndexOf('>', index + 1);
                if (index != -1)
                   match2++;
            }
        } while (index != -1); 
```

上面的代码只运行了大约**150 ms**。

* * *

我想知道让`string.IndexOf`跑步**如此之快**的魔力是什么？

任何人都可以启发我吗？

* * *

**编辑**

好的，根据@BrokenGlass 的回答。我修改了我的代码，他们不检查配对，而是检查字符串中有多少个“<”。

* * *

```
 for (int j = 0; j < html.Length; j++)
        {
            char c = html[j];
            if (c == '>')
            {
                match1++;
            }
        } 
```

上面的代码运行了大约**760 毫秒**。

* * *

使用`IndexOf`

```
 int index = -1;
        do
        {
            index = html.IndexOf('<', index + 1);
            if (index != -1)
            {
                match2++;
            }
        } while (index != -1); 
```

上面的代码运行了大约**132 毫秒**。**仍然非常非常快。**

* * *

**编辑 2**

阅读@Jeffrey Sax 的评论后，我意识到我在 VS 中以调试模式运行。

然后我在发布模式下构建并运行，好的，`IndexOf`仍然更快，但不再那么快了。

结果如下：

对于配对计数：**207ms VS 144ms**

对于正常的一个字符数：**141ms VS 111ms**。

我自己的代码的性能确实得到了改善。

* * *

**经验教训：当您进行基准测试时，请在发布模式下进行！**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T16:06:52.343

您是否在 Visual Studio 中运行计时？如果是这样，仅出于这个原因，您的代码运行速度就会明显变慢。

除此之外，在某种程度上，你是在比较苹果和橘子。这两种算法以不同的方式工作。

该版本在*仅*查找左括号和*仅*`IndexOf`查找右括号之间交替。您的代码遍历整个字符串并保留一个状态标志，指示它是在寻找左括号还是右括号。这需要更多的工作，预计会更慢。

 **这是一些代码，它们以与您的方法相同的方式进行比较`IndexOf`。

```
int match3 = 0;
for (int j = 0; j < html.Length; j++) {
    if (html[j] == '<') {
        for (; j < html.Length; j++)
            if (html[j] == '>')
                match3++;
    }
} 
```

在我的测试中，这实际上比该`IndexOf`方法快 3 倍。原因？字符串实际上并不像单个字符的序列那么简单。有标记、重音等。`String.IndexOf`正确处理所有额外的复杂性，但这是有代价的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T16:15:18.920

我唯一想到的是`IndexOf`iniside 字符串类的实际实现，即调用

```
callvirt    System.String.IndexOf 
```

如果我们使用反射器的功率（尽可能多地）最终进入

```
CompareInfo.IndexOf(..) 
```

调用，而是使用超快的 Windows 本机函数[FindNLSString](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318056%28v=vs.85%29.aspx)：

![在此处输入图像描述](../Images/3c7a4a29eae0ca4d195e2596e49ca3ab.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-09T16:25:42.083

直接比较您的托管实现和方法有点谬误`String.IndexOf`。的实现`IndexOf`主要是本机代码，因此具有与托管实现不同的一组性能特征。特别是本机代码避免了类型安全检查及其相应的开销，这些开销由 CLR 在托管算法中注入。

一个例子是使用数组索引

```
char c = html[j]; 
```

在托管代码中，此语句将验证这`j`是数组的有效索引`html`，然后返回该值。本机代码等效项仅返回内存偏移量，无需额外检查。这种检查的缺乏使本机代码在这里具有固有的优势，因为它可以避免在循环的每次迭代中添加额外的分支指令。

请注意，这种优势不是绝对的。JIT 可以很好地检查此循环并确定它`j`永远不会是无效索引并忽略生成的本机代码中的检查（在某些情况下它确实会这样做 IIRC）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T15:46:14.903

我希望`string.IndexOf`与您的第一个代码示例相比，运行速度至少快两倍（除了可能在那里进行的任何其他优化），因为您在每次迭代中都检查*了开始和结束字符。*`string.IndexOf`另一方面，您的实现将仅在成功找到开始字符后检查结束字符。这大大减少了每次迭代的操作次数（少了一个比较）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T16:32:29.063

使用 switch 语句而不是 if 测试也会加快速度。这段代码偶尔会胜过我机器上的 indexof 代码。

```
 int count = 0;
        bool open = false;
        for (int j = 0; j < testStr.Length; j++)
        {  
            switch (testStr[j])
            {
                case '<':
                    open = true;
                    break;
                case '>':
                    if (open)
                       count++;

                    open = false;
                    break;         
            }
        } 
```**

# php - 搜索组合的二维数组值？

> ID：10519386
> 
> 赞同：-1
> 
> 时间：2012-05-09T15:37:54.873
> 
> 标签：php, arrays, multidimensional-array

我有一个二维数组，我想知道如何使用 PHP 搜索它。我的数组是：

```
Array (
    [0] => Array (
        [Image] => 1.png
        [Manufacturer] => Manu1
        [Model] => Model1
    )
    [1] => Array (
        [Image] => 2.png 
        [Manufacturer] => Manu2
        [Model] => Model2
    ) 
    [2] => Array ( 
        [Image] => 3.png
        [Manufacturer] => Manu3
        [Model] => Model3
    )
) ] 
```

我希望人们能够做的是对制造商和型号的组合值进行“LIKE”搜索。即，如果有人搜索：

```
Ma = Would return all 
Mo = Would return all 
Manu3 = Would return Manu 3 Model3
Manu2 Mo =Would return Manu 2 Mo'XXXX'
Model1 = Would return Manu 1 Model 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:51:33.980

这是来自**Jeroen**的修复代码：

```
function searchArray($query, $array) {
    $tmp = array();
    $subq = explode(' ', $query);
    foreach ($array as $key => $val) {
        foreach($subq as $q) {
            if (strpos($val['Manufacturer'], $q) !== 0 || strpos($val['Model'], $q) !== 0) {
                $tmp[$key] = $val;
            }
        }
    }
    return $tmp;
}

print_r($tmp); 
```

# batch-file - 获取最后创建的目录批处理命令

> ID：10519389
> 
> 赞同：25
> 
> 时间：2012-05-09T15:38:05.700
> 
> 标签：batch-file

如何获取目录中最新的子文件夹？
我需要它来`MKLINK /D`指挥。

谢谢

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-09T15:52:04.040

```
FOR /F "delims=" %%i IN ('dir /b /ad-h /t:c /od') DO SET a=%%i
echo Most recent subfolder: %a% 
```

*（`%i`适用于 Windows 10）*

*   `/b`用于裸格式
*   `/ad-h`只有目录，但不是隐藏的
*   `t:c`表示使用创建日期进行排序（`t:w`用于最后写入日期）
*   `/od`先排序最旧的
*   执行`for /F`命令并将 a 设置为目录名称，最后一个是最新的。

如果您直接在命令行上执行此操作（而不是在批处理文件中），请`%`使用`%%`.

这适用于*当前目录*- 正如@iesou 指出的那样，`dir`如果您需要使用任何其他目录路径，则需要在之后添加目录路径。

具有指定目录路径的示例：

```
FOR /F "delims=" %%i IN ('dir "c:\Program Files" /b /ad-h /t:c /od') DO SET a=%%i 
```

* * *

为了防止遍历所有子文件夹，您可以将排序顺序更改为具有最新的第一个 ( `/o-d`) 并在第一次调用后退出 for 循环：

```
@echo off
FOR /F "delims=" %%i IN ('dir /b /ad-h /t:c /o-d') DO (
    SET a=%%i
    GOTO :found
)
echo No subfolder found
goto :eof
:found
echo Most recent subfolder: %a% 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-15T17:53:54.397

对带有空格的目录名称进行了一些改进

```
FOR /F " tokens=*" %%i IN ('dir /b /ad-h /od') DO (SET a=%%i) 
```

现在你得到 a=Application Data 而不是 a=Application
注意：注意“tokens”前面的空格

# f# - 将 OCaml 转换为 F#：F# 可以将值列表直接映射到标识符列表吗？

> ID：10519390
> 
> 赞同：4
> 
> 时间：2012-05-09T15:38:06.193
> 
> 标签：f#, ocaml

我正在将几个基于 OCaml 的模块转换为 F# 并遇到类似这样的情况

```
let [x; y; z] = map func1 ["a"; "b"; "c"] 
```

其中 `[x; y; z]`是标识符列表并 `map func1 ["a"; "b"; "c"]`返回函数列表。

目前我将列表中的每个值分别绑定到标识符，即

```
let fList = map func1 ["a"; "b"; "c"]
let x = fList.[0]
let y = fList.[1]
let z = fList.[2] 
```

标识符的使用是为了第二个功能，即

```
func2 x y z 
```

我知道我可以修改 func2 以接受一个列表，但由于 func2 实际上需要值以及每个参数的每个函数，所以它会更有效。IE

```
func2 (x g) (y h) (z i) 
```

我一直在寻找像 OCaml 一样有效地做到这一点的方法，但结果一无所获。我搜索了 unmap，解构，并查看了[List的方法](http://msdn.microsoft.com/en-us/library/ee353738.aspx)

F# 可以将值列表直接映射到标识符列表吗？

编辑

我正在转换的代码确实在它自己的库中定义了一个映射函数。

编辑

@OnorioCatenacci 这只是我写的一个例子，而不是试图花很多时间来创建一个真正的工作例子。真正的代码有版权，所以我不能在没有完全公开的情况下在这里使用它。我试图说明的一点是，我没有将常量值分配给标识符，而是将函数分配给标识符。我只是`map func1 ["a"; "b"; "c"]`为了表明这些函数是根据一些输入根据需要生成的，而不是硬编码的。真实代码构建逻辑电路模拟器，返回的函数是不同的逻辑电路；认为组合器。它都是自动定理证明器的一部分。Tomas 和 Daniel 理解了这个问题并给出了我用真实代码验证的正确答案。

换句话说`func1 "a"`，将使用参数返回一个函数`"a"`。`map func1 ['a", "b", "c"]`将返回一个函数列表。由于函数在 F# 中是[一等](http://en.wikipedia.org/wiki/First-class_function)的，因此它们可以作为值返回。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T15:47:40.643

您可以将映射应用于列表，然后使用模式匹配将元素绑定到 F# 中的标识符。语法与您编写的示例完全相同：

```
let [x; y; z] = List.map func1 ["a"; "b"; "c"] 
```

此示例的唯一问题是 F# 编译器无法静态验证结果是否为长度为 3 的列表，因此它会向您发出警告说*“此表达式上的模式匹配不完整”。*在这个例子中，它实际上不会发生，但是如果你重新定义`map`不正确，以至于它会丢弃第一个元素，代码就会中断。

这只是一个警告，所以你可以忽略它，但如果你想避免它，你需要`match`在意外情况下使用并抛出一些自定义异常：

```
match List.map func1 ["a"; "b"; "c"] with
| [x; y; z] ->
   // Continue here if the pattern matching does not fail
   func2 (x g) (y h) (z i) 
| _ -> invalidOp "Pattern matching failed" 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T16:07:48.347

如果您想避免 Tomas 提到的“不完整模式匹配”警告，您可以使用具有固定长度的元组并定义您自己的`map`函数：

```
module Tuple3 =
  let map f (a, b, c) = (f a, f b, f c)

let x, y, z = Tuple3.map func1 ("a", "b", "c") 
```

# jquery-plugins - Bootstrap 折叠插件 - 如何横向折叠

> ID：10519391
> 
> 赞同：4
> 
> 时间：2012-05-09T15:38:06.793
> 
> 标签：jquery-plugins, twitter-bootstrap

我希望向右（水平）折叠一个区域，而不是垂直折叠。有没有办法通过引导插件进行设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T15:45:53.473

我最终在宽度上使用了 JQuery[动画。](http://api.jquery.com/animate/)实现起来并不难，但我喜欢引导解决方案的地方在于它都在类属性中。太糟糕了，它似乎只能垂直工作。

# python - python2.7：使用 yaml 记录配置

> ID：10519392
> 
> 赞同：18
> 
> 时间：2012-05-09T15:38:11.300
> 
> 标签：python, python-2.7

我正在尝试从 yaml 文件配置记录器。在 docs.python.org 上，我找到了一个如何创建 yaml 文件的示例，我创建的文件如下所示：

```
formatters:
    simpleFormater:
        format: '%(asctime)s - %(levelname)s: %(message)s'
        datefmt: '%Y/%m/%d %H:%M:%S'

handlers:
    console:
        class: logging.StreamHandler
        formatter: simpleFormater
        level: DEBUG
        stream: ext://sys.stdout
    file:
        class : logging.FileHandler
        formatter: simpleFormater
        level: WARNING
        filename: songinfo.log

loggers:
    clogger:
        level: DEBUG
        handlers: [console]
    flogger:
        level: WARNING
        handlers: [file]

root:
    level: DEBUG
    handlers: [console, file] 
```

但我找不到如何加载配置的示例。我看到了一些关于加载它的内容：

```
logging.config.dictConfig(yaml.load(open('logging.conf', 'r'))) 
```

但这会引发“ValueError：字典未指定版本”

所以我的问题是：如何将它加载到 Python 中的记录器以及如何使用 clogger 和 flogger。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-09T15:44:46.773

通过阅读[python 文档](http://docs.python.org/dev/library/logging.config.html#dictionary-schema-details)，我们看到配置中有一个 required 键，上面写着`version`。

你需要在你的配置中有一行写着

```
version: 1 
```

或者，您可以这样做：

```
with open('logging.conf') as f:
    D = yaml.load(f)
    D.setdefault('version', 1)
    logging.config.dictConfig(D) 
```

# scala - Play 2.0 Scala 框架中的定时页面渲染

> ID：10519396
> 
> 赞同：6
> 
> 时间：2012-05-09T15:38:17.787
> 
> 标签：scala, playframework, playframework-2.0

是否可以在 Play Framework 中测量页面呈现所需的时间 - 或至少将页面发送到客户端所需的时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T04:35:01.340

如果您要询问服务器端的指标，那么您可能想要这个： http: [//metrics.codahale.com/](http://metrics.codahale.com/)

如果您在客户端询问，那么 Google Chrome 开发人员工具有一些惊人的功能：[http ://www.youtube.com/watch?v=OxW1dCjOstE](http://www.youtube.com/watch?v=OxW1dCjOstE)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-27T06:06:19.180

您可以使用 Firebug 测量将页面发送到客户端所需的时间。

[火狐的萤火虫](http://getfirebug.com/)

# visual-studio-2010 - 在 Visual Studio 2010 中查看 SQL 文件时 ReSharper 无法工作的任何原因？

> ID：10519401
> 
> 赞同：1
> 
> 时间：2012-05-09T15:38:32.603
> 
> 标签：visual-studio-2010, resharper, resharper-6.1

我安装了 ReSharper 6.1，并将它与 Visual Studio 2010 一起使用。ReSharper 工作得非常好，除非我打开一个 .sql 文件。

当 SQL 文件是活动窗口时，我的 ReSharper 快捷方式将停止工作。我不介意智能感知是否不适用于 SQL，但即使`CTRL`+`T`或`CTRL`++ （打开文件，打开类型`SHIFT`）`T`也不起作用。

使文件之间的切换更加不方便。

是否有在 sql 文件中禁用 ReSharper 快捷方式的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:45:06.177

*当您打开 SQL 文件时，是否来自全局*或*文本编辑器*以外的上下文的命令优先？

如果您转到*Tools > Options > Environment > Keyboard*，则会有一个名为*Data.SqlEditorResultsAsFile*的命令绑定到*Transact-SQL Editor*上下文中的*Ctrl+Shift+T 。*尝试删除此分配 - 这是否有助于控制回 ReSharper在*全局*和*文本编辑器*上下文中使用*Ctrl+Shift+T的**Go to Type ？*

# json - SDF (SearchDataFormat) 需要非典型 JSON

> ID：10519406
> 
> 赞同：0
> 
> 时间：2012-05-09T15:38:58.073
> 
> 标签：json, jackson, amazon-cloudsearch

使用 Jackson 连接到 Amazon CloudSearch，后者以 SDF 格式提取数据。这是一个例子：

```
[ {
  "type" : "add",
  "id" : "images_to_search_csv_1",
  "version" : 1336526759,
  "lang" : "en",
  "fields" : {
    "content" : "http://upload.wikimedia.org/wikipedia/commons/thumb/4/43/Timba%2B1.jpg/220px-Timba%2B1.jpg",
    "title" : "Simba",
    "source" : "wikipedia",
    "description" : "Simba the wolf dog.",
    "type" : "Image"
  }
}, {
  "type" : "add",
  "id" : "images_to_search_csv_2",
  "version" : 1336526760,
  "lang" : "en",
  "fields" : {
    "content" : "http://www.wolfzone1.com/photos/sedona-01d%20copy.jpg",
    "title" : "Wolf",
    "source" : "Wolf Zone",
    "description" : "Another wolf.",
    "type" : "Image"
  }
} ] 
```

请注意，这些字段是您提交的实体的字段。很明显，如果你只是将该实体绑定到 SDF 类，你会得到实体，然后是它的字段，但文件的结构最终会有所不同。我应该只编写代码以手动输出而不是让杰克逊来做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:34:08.037

您可以编写自定义反序列化器/序列化器，仅手动编写该部分的处理程序；注册可以在全球范围内针对类型进行，也可以在每个属性的基础上进行。这样，您可以大大减少显式工作量。也可以使用多阶段处理：首先绑定到通用的东西（Map，JsonNode），稍微转换结构，然后转换到/从 POJO（`ObjectMapper.convertValue()'）。

# facebook - 我可以在不请求用户权限的情况下显示页面的社交网络活动吗？

> ID：10519408
> 
> 赞同：0
> 
> 时间：2012-05-09T15:39:05.153
> 
> 标签：facebook, twitter, google-plus, pinterest

我想知道是否可以在没有扩展权限的情况下在我的网站中显示谁喜欢、分享、+1d、推文等？我在想这样的事情[http://awesomescreenshot.com/00b58w7eb](http://awesomescreenshot.com/00b58w7eb)

我知道我可以从大多数社交网络 api 中获得总数，但我不确定用户特定的数据。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T19:03:05.890

我可以在 Google+ 部分提供帮助 :)

给定一个 URL，没有 Google+ API 可以告诉您所有的转发、评论和 +1。但是，如果您确实设法识别与您的 URL 关联的活动，则可以使用 REST API 的[comments.list](https://developers.google.com/+/api/latest/comments/list)和[people.listByActivity](https://developers.google.com/+/api/latest/people/listByActivity)方法来查找这些详细信息。

如果您对以编程方式访问这些数据不感兴趣，而只是喜欢一些仪表板，您可能会对 Google Analytics（分析）[社交跟踪](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSocial)感兴趣。它使用来自各种共享按钮的回调来跟踪社交活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:58:49.567

通过 Twitter API 获取发了推文的人很容易。大多数推文和大多数个人资料一样都是公开的。

在 Facebook 上，您*应该*能够通过查询[stream_tags](https://developers.facebook.com/docs/reference/fql/stream_tag/)作为您的页面来获得它。

我试图做类似的事情，但我无法让它返回页面的任何数据（但我可以为用户返回。）即使你可以让它工作，F​​acebook 对流对象的限制（50 项或 30天的信息，以较少者为准，包括由于隐私设置而不会被您的查询返回的帖子）使这样的查询更难处理。

我还没有深入研究 Google 或 Pinterest API 来了解它们有多难。

# ruby-on-rails - Ruby on Rails - Has_many，批量分配问题

> ID：10519410
> 
> 赞同：0
> 
> 时间：2012-05-09T15:39:10.080
> 
> 标签：ruby-on-rails, has-many

我正在使用 rails 3.2.3 并且遇到批量分配问题。

我有一个酒店模型和一个 Hphoto 模型（与回形针集成）

我几乎尝试了所有方法，但仍然出现批量分配错误。

```
Can't mass-assign protected attributes: hphoto 
```

请看一下。

酒店模型

```
has_many :hphotos, :dependent=>:destroy
accepts_nested_attributes_for <other models>, :hphotos
attr_accessible: <other attributes>, :hphoto_attributes 
```

Hphoto模型

```
belongs_to :hotel
has_attached_file :photo,
:path => ":rails_root/public/system/:attachment/:id/:style/:filename",
:url => "/system/:attachment/:id/:style/:filename"

attr_accessible :hphoto_attributes

validates_attachment_presence :photo
validates_attachment_size :photo, :less_than => 2.megabytes
validates_attachment_content_type :photo, :content_type=> ['image/jpeg', 'image/png'] 
```

我的酒店控制器：

```
def new
    @hotel = Hotel.new
    @hotel.hphotos.build

    respond_to do |format|
      format.html 
      format.json { render :json => @hotel }
    end
  end

def create
    @hotel = Hotel.new(params[:hotel])
    <original scaffold code>
end 
```

谢谢你的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:02:21.900

该语句必须使用复数：

```
attr_accessible: <other attributes>, :hphotos_attributes 
```

在 Rails 3.2.3 上，我的 erb 如下所示：

```
<%= f.fields_for :hphotos, @hotel.hphotos do |photo_form| %>  
    <%= photo_form.label :size %>  
    <%= photo_form.text_field :size %>  
<% end %> 
```

# c++ - 相同的 C++ 'if' 语句，在 Linux/Windows 上的结果不同

> ID：10519412
> 
> 赞同：3
> 
> 时间：2012-05-09T15:39:26.567
> 
> 标签：c++, gcc, mingw, multiplatform

我发现了一个有趣的案例，相同的 C++ 代码在不同的系统上产生不同的结果。

```
#include <cstdio>
int main()
{
    int a=20, b=14;
    if(a*1.0/b*(a+1)/(b+1)==2) printf("YES!");
    else printf("NO!");
} 
```

使用 GCC 4.6.3 在 Ubuntu Linux 12.04 上编译，它输出**YES！**

使用 GCC 4.6.2 在 Windows 7 上编译它输出**NO！**

但是，使用：

```
double  c = a*1.0/b*(a+1)/(b+1);
if (c==2) printf("YES!");
... 
```

将返回**是！**在两台机器上。

**任何想法为什么会出现这种差异？**这是由编译器版本不匹配引起的（路径级别版本号应该没那么重要）？为什么它实际上输出**NO！**在 Windows 机器上，而这种情况显然是正确的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T15:40:49.830

因为您正在对浮点类型进行相等比较，通常不应依赖于机器到机器（或从编译器到编译器等）的特定位精确行为。

可能的原因包括编译器选择何时将浮点结果移出宽（80 位）浮点寄存器（语言标准和 IEEE-754 浮点标准都没有施加任何特定要求，AFAIK）。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-09T15:47:25.260

这只是一个猜测，您需要查看编译器的程序集输出才能确定。

一个编译器可能将中间结果留在浮点寄存器中，而另一个编译器将结果写入内存，将其从 80 位四舍五入到 64。也有可能一个编译器使用 SSE 而另一个不使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T15:43:52.400

这是因为浮点运算，请尝试使用 epsilon 比较：

```
#define EPSILON_EQUAL(a,b) ( fabs((a)-(b)) < (0.0001f) )

float f = a*1.0/b*(a+1)/(b+1);
if(EPSILON_EQUAL(f,2.0f)) printf("YES!"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:44:10.737

因为由于精度问题，比较像这样的浮点数是不正确的。

在数学中 2/3= (0.6666666 ... to infinity)//小学数学 :) 没有问题。

在计算中，此计算在浮点单元上进行（类似于 CPU，但专用于浮点计算）。现在这个浮点单元（FPU）可能会给你一个非常接近你实际答案的数字，但它们并不完全相同。因为它会截断结果。有一个专门用于浮点运算的整个领域。简而言之，切勿在比较中使用浮点数，因为您可能会得到相互矛盾的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T15:47:07.117

测试浮点数之间的相等性是有问题的。这是因为四舍五入错误，互联网上有很多很多关于此的文本。

您可以[在此处](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)、[此处](https://stackoverflow.com/questions/3049101/floating-point-equality-in-python-and-in-general)、[此处](https://stackoverflow.com/questions/3832592/test-for-floating-point-equality-fe-floating-point-equality)、[此处](http://discuss.fogcreek.com/joelonsoftware/default.asp?cmd=show&ixPost=161828)、[此处](http://randomascii.wordpress.com/2012/02/11/they-sure-look-equal/)查看此内容，并且基本上可以在 google 搜索中看到任何结果`floating point equality`。

# .net - 连接丢失后重新连接到 NamedPipeClientStream (.NET)

> ID：10519416
> 
> 赞同：2
> 
> 时间：2012-05-09T15:40:11.010
> 
> 标签：.net, named-pipes

我构建了两个应用程序。一个是客户端，另一个是服务器。

他们通过命名管道进行通信。客户端创建 NamedPipeClientStream。除非服务器关闭连接或服务器应用程序终止，否则一切正常。

终止后，客户端部分上的管道流将 IsConnected 属性设置为 false。还行吧。但是如果我试图重新打开 NamedPipeClientStream 它永远不会成功。重新启动服务器后，我希望客户端打开连接，但这永远不会发生。

每次尝试重新连接时都会引发 TimeOutException。唯一的解决方案是退出应用程序并重新启动它。但这不是我的选择。

任何人请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T16:15:24.100

没关系。

问题在于与服务器断开连接后没有关闭 clinet 端的读取管道。

解决方案是

```
try{
   while(true){
      ... Reading from the PIPE ...
   }
}
finally{
 pipeStream.Close();
 pipeStream.Dispose();
 IsRunning = false;
} 
```

永远不要忘记关闭和处理流！

# windows-phone-7.1 - XAML ListBoxItem 渐变颜色动画

> ID：10519417
> 
> 赞同：0
> 
> 时间：2012-05-09T15:40:21.510
> 
> 标签：windows-phone-7.1

设置所选列表视图项的渐变背景时遇到问题。每次我选择该项目时，它都会吐出一个错误。

这是我的 generic.xaml 部分代码

```
<VisualState x:Name="Selected">
<Storyboard>
    <ColorAnimation Duration="0" To="#577E7E7E" Storyboard.TargetProperty="Background.GradientStops[0].Color" Storyboard.TargetName="LayoutRoot" />
    <ColorAnimation Duration="0" To="#C6FFFFFF" Storyboard.TargetProperty="Background.GradientStops[1].Color" Storyboard.TargetName="LayoutRoot"/>
</Storyboard> 
```

最好的，J。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T10:02:15.350

Storyboard.TargetProperty="(Type.Background).GradientStops[0].Color"

# cross-browser - 使用 Knockout JS 和 Twitter Bootstrap .. pre-pend 图标在 IE 中看起来不错，但在 Chrome/Firefox 中不好

> ID：10519420
> 
> 赞同：0
> 
> 时间：2012-05-09T15:40:28.143
> 
> 标签：cross-browser, knockout.js, twitter-bootstrap

我一直在使用 Knockout JS，最近在 UI 中添加了 Twitter Bootstrap，它很棒。

然而，我最近发现我很棒的表单在 IE 中看起来不错，但在 Chrome/Firefox 中看起来很乱。

JSFiddle……先在 IE 中运行，然后在 Chrome/FF 中运行

[http://jsfiddle.net/smatthews1999/9SwJR/5/](http://jsfiddle.net/smatthews1999/9SwJR/5/)

谢谢，山姆

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:55:47.717

利用：

```
<button><i class="icon-star"></i></button> 
```

代替：

```
<button><i class="icon-star"/></button> 
```

# java - 未找到具有 Hibernate 依赖项的 JAR 的配置类

> ID：10519423
> 
> 赞同：0
> 
> 时间：2012-05-09T15:40:50.263
> 
> 标签：java, hibernate, maven, maven-3

我正在尝试在示例中使用休眠，但无法运行它。这是主要课程：

```
public class Main {
    public static void main(String[] args) {
        SessionFactory factory;

        try {
            Configuration configuration = new Configuration();
            configuration.configure("hibernate.cfg.xml");
            ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties()).buildServiceRegistry();
            factory = configuration.buildSessionFactory(serviceRegistry);
        } catch (Throwable ex) {
            System.err.println("Failed to create sessionFactory object." + ex);
            throw new ExceptionInInitializerError(ex);
        }

        System.out.println("**Example : Hibernate 4 SessionFactory**");
        System.out.println("----------------------------------------");
        Session session = factory.openSession();
        Transaction transaction = null;

        try {
            transaction = session.beginTransaction();
            transaction.commit();
        } catch (HibernateException e) {
            if (transaction != null)
                transaction.rollback();
            e.printStackTrace();
        } finally {
            session.close();
        }
    }
} 
```

我已经用

```
mvn clean install assembly:single 
```

但是当我运行 JAR 时，我得到了：

```
Exception in thread "main" java.lang.ExceptionInInitializerError
    at Main.main(Main.java:28)
Caused by: java.lang.NoClassDefFoundError: org/hibernate/cfg/Configuration
    at Main.main(Main.java:21)
Caused by: java.lang.ClassNotFoundException: org.hibernate.cfg.Configuration
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 1 more 
```

我的 POM：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>hibernate-test</groupId>
    <artifactId>hibernate-test</artifactId>
    <version>1.0</version>

    <properties>
        <hibernate.version>4.1.3.Final</hibernate.version>
    </properties>

    <dependencies>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>${hibernate.version}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate.version}</version>
        </dependency>

        <dependency>
            <groupId>org.hsqldb</groupId>
            <artifactId>hsqldb</artifactId>
            <version>2.2.8</version>
        </dependency>

    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <configuration>
                    <archive>
                        <manifest>
                            <addClasspath>true</addClasspath>
                            <mainClass>Main</mainClass>
                        </manifest>
                    </archive>
                </configuration>
            </plugin>

            <plugin>
                <artifactId>maven-assembly-plugin</artifactId>
                <configuration>
                    <archive>
                        <manifest>
                            <mainClass>Main</mainClass>
                        </manifest>
                    </archive>
                    <descriptorRefs>
                        <descriptorRef>jar-with-dependencies</descriptorRef>
                    </descriptorRefs>
                </configuration>
            </plugin>
        </plugins>
    </build>

</project> 
```

我做错了什么？

*编辑*：我用 JD-Gui 打开了结果 JAR，发现我的 JAR 中有配置类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:52:47.113

您应该使用 Maven 配置获得两个 jar 文件。如果你尝试运行 hibernate-test-1.0.jar 你会得到你得到的错误，因为它不包含依赖项。它本身是没有用的。

如果你运行 hibernate-test-1.0-jar-with-dependencies.jar 你不会得到 ClassNotFoundException。该 jar 文件是使用 maven-assembly-plugin 创建的，它包含您在 pom.xml 中定义的所有依赖项。

# joomla - 为什么我们要在 Joomla 中使用 JoomFish！2.5，如果 Joomla！2.5 提供多语言支持？

> ID：10519427
> 
> 赞同：2
> 
> 时间：2012-05-09T15:41:08.293
> 
> 标签：joomla, joomfish

我是 Joomla 的新手！我的问题是：

我成功安装了 JoomFish alpha 版本。如果 Joomla! 2.5 支持多语言，那我们为什么要选择 JoomFish？

JoomFish 和 Joomla 之间的主要区别是什么！2.5 多语言会提示人们去JoomFish 吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T14:43:03.040

JoomFish 尚不适用于 Joomla！2.5，但问题的答案是：

Joomla！2.5 确实允许本地形式的多语言支持，**但是您必须复制所有内容**（每个菜单，为每种语言创建一个主页等）。这种方法的主要问题（对我而言）是，如果您计划为每种语言创建一个具有相同结构的站点，并且如果您对主要语言进行了多次更改（例如添加更多菜单），您将不得不对每种语言进行这些更改！

JoomFish 所做的是对站点中的所有元素（菜单、文章、部分等）使用相同的结构。对于每种语言都具有相同结构的站点来说，这非常有用。例如：如果您隐藏一个菜单，则它在每种语言中都被隐藏。

**所以，总而言之：**

*   如果您计划为每种语言创建一个具有自定义/不同结构的多语言站点，那么我建议您使用 Joomla 的本地多语言技术！2.5；

*   如果您计划为每种语言使用相同的结构，特别是如果该结构非常大，我建议使用（当/如果可用）JoomFish。

正在开发一个新的扩展，与 JoomFish 非常相似，称为 FaLang：[http ://extensions.joomla.org/extensions/languages/multi-lingual-content/18210](http://extensions.joomla.org/extensions/languages/multi-lingual-content/18210)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T22:55:42.787

我不能对帖子发表评论，但想指出最后一个答案指出 Joomla 不允许您翻译内容是错误的。1.6 引入了原生翻译能力

在最新版本的 Joomla 中没有真正需要使用 Joomfish，这可以解释它的开发速度非常缓慢。它的主要缺点是它为每篇文章创建重复页面。没有办法关闭它们。例如，如果您将主站点翻译成多种语言，但也有一个博客，您只在其中添加一种语言的文章，那么这些文章也会以另一种语言存在，但会显示原始内容或消息说没有可用的内容。

有更好的组件可以与本地 Joomla 多语言一起使用，例如 Josetta。它在前端添加了一个翻译界面，您的翻译人员可以在其中登录并检查翻译状态。翻译文章时，它会设置菜单项与其他语言版本的关联。如果某些内容未翻译，则没有重复页面。

Joomfish 的另一个问题是额外的数据库查询确实会降低站点速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T09:49:30.530

本机 Joomla 语言系统用作过滤器，在实现它的扩展中，每个项目都用一种语言标记，然后只有标记为“所有语言”或活动语言的项目才会显示。您还需要为每种语言设置单独的菜单和类别。如果您对每种语言都有独立的结构，这很好用，例如，只有部分内容被翻译成第二语言或第三语言。

什么 JoomFish（也是 LanternFish [http://joogpot.eu/lanternfish](http://joogpot.eu/lanternfish)，它是与 joomla 3 兼容的高级/错误修复版本）是否为每种语言创建相同的结构（如此处的另一个答案中所述），然后将原件映射到翻译，所以它总是知道哪个项目是另一个项目的转换。这允许用户直接从一种语言的文章转到另一种语言的同一篇文章，这对于菜单、类别等所有基本内容都是一样的。例如，用户可以直接从 example.com/jooomla/images 转到德语 example.com/joomla/bilder 只需单击标志图标，而本地 Joomla 解决方案会在相同情况下将您带到德语页面前端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-16T08:41:10.937

从[这篇很棒的帖子](http://y-designs.com/blog/frustrations-with-multilingual-support-for-joomla.html)中，您可以看到在 Joomla 2.5 中进行翻译的不同方式

*   **Joomla 2.5**集成系统
*   **Joomla 2.5 的**乔塞塔****
***   **适用于 Joomla 1.5 的**Joomfish*******   **Joomla 2.5 的**法郎********

 ****系统 1 和 2 依赖于内容管理系统中的“双重内容”（假设是双语系统）。

系统 3 和 4 替换字符串/文本，而不是在 CMS 中加倍内容。翻译与原始内容分开记录在外部组件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T16:24:23.370

Joomla 只允许您安装和配置语言包，它不允许您翻译您的内容。然而，它会翻译预先构建的内容，例如登录表单等。JoomFish 允许您将自定义内容翻译成您在网站上安装的任何语言。****

# schema.org - Schema.org/AggregateRating 未显示丰富网页摘要

> ID：10519429
> 
> 赞同：1
> 
> 时间：2012-05-09T15:41:19.063
> 
> 标签：schema.org, microdata, google-rich-snippets

[我在我的产品页面（例如http://www.softwareadvice.com/crm/leadmaster-crm-profile/](http://www.softwareadvice.com/crm/leadmaster-crm-profile/)）上使用 Schema.org 的“reviews”、“aggregateRating”和其他标记。当页面上只有一条评论时，我会在 Google 中获得丰富的摘要。

但是，我无法为具有多个评论的产品显示丰富的摘要（例如[http://www.softwareadvice.com/crm/leadmaster-crm-profile/](http://www.softwareadvice.com/crm/leadmaster-crm-profile/)）。我通过查看搜索结果确认了这一点，但也在 Google 的 Rich Snippet 测试工具中测试了这个 URL。

我认为 Schema.org 标记存在一些问题。我已经测试了标记的几种变体，但无济于事。

我很想在这个问题上得到任何 Schema.org 专家的帮助。您是否介意查看“leadmaster-crm-profile” URL 的来源，如果我们在此页面中对 Schema.org 进行编码有任何明显问题，请告诉我：

# sql - 导出和导入 Oracle 表时遇到问题

> ID：10519430
> 
> 赞同：3
> 
> 时间：2012-05-09T15:41:20.500
> 
> 标签：sql, database, oracle, impdp

我正在使用 Oracle 11，但在两个数据库之间移动表时遇到问题。我已经成功导出了一个datadumb，如下所示：

```
expdp.exe www/www@xe tables=TABLE1,TABLE2,TABLE3 directory=dmpdir dumpfile=tables.dmp 
```

当我尝试：

```
impdp.exe www2/www2@xe tables=TABLE1,TABLE2,TABLE3 directory=dmpdir dumpfile=tables.dmp 
```

结果我得到了以下异常：

```
ORA-39002: invalid operation
ORA-39166: Object WWW2.TABLE1 was not found.
ORA-39166: Object WWW2.TABLE2 was not found.
ORA-39166: Object WWW2.TABLE3 was not found. 
```

如果我尝试：

```
impdp.exe www2/www2@xe remap_tables=WWW2:TABLE1,TABLE2,TABLE3 directory=dmpdir dumpfile=tables.dmp 
```

我得到：

```
LRM-00101: unknown parameter name 'remap_tables' 
```

在我的情况下，我无法使用数据库链接。导入和导出表时如何更改架构？我是否以某种方式误解了甲骨文？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T15:47:37.740

使用`REMAP_SCHEMA=WWW:WWW2`并删除该`tables=`子句。

```
impdp.exe www2/www2@xe REMAP_SCHEMA=WWW:WWW2 directory=dmpdir dumpfile=tables.dmp 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:48:11.937

我认为您需要[REMAP_SCHEMA](http://docs.oracle.com/cd/B28359_01/server.111/b28319/dp_import.htm#autoId37)参数。[REMAP_TABLE](http://docs.oracle.com/cd/B28359_01/server.111/b28319/dp_import.htm#autoId38) （注意拼写）参数用于更改表的名称，而不是它所属的模式。

# mongodb - 如何在猫鼬中进行原始 mongodb 操作？

> ID：10519432
> 
> 赞同：74
> 
> 时间：2012-05-09T15:41:21.757
> 
> 标签：mongodb, mongoose

我问这个是因为当我编写单元测试时，我想删除测试数据库并插入一些初始化数据，并在测试中检查 mongodb 中的数据。所以我需要对 mongodb 进行原始操作。

如何在猫鼬中做到这一点？我现在能做的只是创建连接，并在猫鼬的官方网站上找不到任何文档。

```
 var mongoose = require('mongoose');
 mongoose.connect('mongo://localhost/shuzu_test');

 // get the connection
 var conn = mongoose.connection; 
```

但是如何：

1.  删除数据库
2.  创建一个集合
3.  将一些数据写入集合
4.  查询一个集合
5.  删除一个集合

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2016-11-27T21:02:04.793

您可以使用原生 NodeJS 驱动程序运行 mongodb 命令，方法是使用`mongoose.connection.db`. 这将访问 NodeJS MongoDB 驱动程序，**您无需创建 mongoose 模型**。

### 一个插入

```
mongoose.connection.db.collection('userCollection').insert({
  username: 'captain1',
  firstName: 'Steve',
  lastName: 'Rogers', 
}); 
```

### 更新

```
mongoose.connection.db.collection('userCollection').update(
  {someFilterProperty: true},
  {$set: {
     siteId: new mongoose.mongo.ObjectId('56cb91bdc5946f14678934ba'),
     hasNewSiteId: true}},
  {multi: true});
}); 
```

您可以使用数据库连接数据库参考发送特定于该数据库的每个命令`mongoose.connection.db`。

这是猫鼬 API 文档： http: [//mongoosejs.com/docs/api.html#connection_Connection-db](http://mongoosejs.com/docs/api.html#connection_Connection-db)

**重要提示**：注意 NodeJS 驱动程序中的一些选项与 MongoDB shell 命令中的选项不同。例如`findOneAndUpdate()`使用`returnOriginal`而不是`returnNewDocument`. 有关更多信息，请参见[此处](https://stackoverflow.com/a/44172870/404699)和[此处](http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html#findOneAndUpdate)。

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-05-09T15:46:15.247

请参阅文档中有关“驱动程序访问”的部分：http: [//mongoosejs.com/](http://mongoosejs.com/)

基本上，您可以通过执行来访问[node-mongodb-native](https://github.com/mongodb/node-mongodb-native)驱动程序`YourModel.collection`，然后您可以`insert`或`remove`或`drop`或您需要的任何东西。

没有文档，但通过这种方法，您可以访问此处的所有内容： [https ://mongoosejs.com/docs/api.html#collection-js](https://mongoosejs.com/docs/api.html#collection-js)

**编辑：**

在您的情况下，您可能希望跳过在测试套件中使用 mongoose 并直接使用 [node-mongodb-native](https://github.com/mongodb/node-mongodb-native)，或者甚至编写一个可以在测试开始之前运行的简单[mongodb shell 脚本。](http://www.mongodb.org/display/DOCS/Scripting+the+shell)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-01-24T13:52:18.110

使用它在猫鼬中运行原始操作。

```
 Model_name.collection.insertMany(array, { ordered: false },function(err, success){
            console.log(success);
        }); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-12-29T08:02:09.740

*遇到了同样的麻烦，在测试后清理数据库，而实际答案只是因为缺少“代码块”而感到困惑，所以再次挖掘文档/代码，为了节省时间，发布这个;）*

Mongoose 集合扩展了 Mongodb 集合

> /* * 部分 collection.js * [http://mongoosejs.com/docs/api.html#collection-js](http://mongoosejs.com/docs/api.html#collection-js) */
> 
> 接口 CollectionBase 扩展 mongodb.Collection {
> 
> 文档： http: [//mongodb.github.io/node-mongodb-native/2.1/api/Collection.html](http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html)

连接也是如此：

> require('mongoose') 暴露的 Connection 类实际上是驱动的 NativeConnection 类。connection.js 定义了原生版本扩展的基类。请参阅： http: [//mongoosejs.com/docs/api.html#drivers-node-mongodb-native-connection-js](http://mongoosejs.com/docs/api.html#drivers-node-mongodb-native-connection-js)

所以所有“RAW”操作都可以在收集/连接上执行，假设你有

```
 var connection = mongoose.connection; 
```

然后：

**1.删​​除数据库：**

```
connection.dropDatabase() 
```

**2.创建一个集合**

```
connection.collection('newcollection') // creates if not exists 
```

**3.将一些数据写入集合**

```
connection.collection('mybenotnewcollection').bulkWrite([
  { insertOne: { whatewer: { you: 'need' } } },
]); 
```

**4.查询一个集合**

这显然不是一个问题：findAll, find, aggregate, all allowed (see the [Docs](http://mongodb.github.io/node-mongodb-native/2.1/api/Collection.html) )

**5.删除一个集合**

```
connection.collection('notsonewcollection').drop() 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-04-09T18:59:56.170

```
const mongoose = require('mongoose');
mongoose.connect(uri, options);
var db = mongoose.connection;
db.once('open', function () {
  db.collection('collection').find().toArray(function(err, result){
        console.log(result);
  });
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-14T04:12:18.480

mongoose 对象有一个 mongo 原型，可让您访问本机 mongo 驱动程序

```
mongoose.mongo 
```

# iphone - 如何调用委托方法，iphone

> ID：10519434
> 
> 赞同：1
> 
> 时间：2012-05-09T15:41:33.000
> 
> 标签：iphone, objective-c

给定：

> 1.  A 类及其代表
> 2.  classB 上有一个按钮

```
classA.h

@protocol classADelegate <NSObject>
- (void)method:(NSString *) name;
@end
@interface StoreChooser : UIViewController
@end
------------------------------------------------------
classA.m
-(IBAction)buttonCliked{
     // invoke delegate method from classA at here

}

classB.h
@interface classB : UIViewController <classADelegate>
@end

------------------------------------------------------
// Conform delegate of classA
classB.m
- (void)method:(NSString *) name { 
```

} @结尾 - - - - - - - - - - - - - - - - - - - - - - - - --------

我的目标：我需要 classB 在**buttonClicked**操作中调用 classA 的方法委托

**问题**：我应该怎么做才能实现我的目标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:16:28.250

只是为了确保我们在同一页面上:)

如果`ClassA`有委托`ClassADelegate`。这意味着当某些“事件”发生在 中时`ClassA`，`ClassA`将希望通过其委托通知其他类“事件”发生 - `ClassB`。`ClassA`将通过其委托 - 执行此操作`ClassADelegate`。

为此，`ClassB`必须`ClassA`告知它将充当`ClassA`' 代表。`ClassB`必须`ClassA`通过实现协议中列出的所有未标记为@optional 的方法来“符合”协议。

在代码中，您可以这样做：

```
// ClassA's delegate

@protocol ClassADelegate <NSObject>
- (void) didDoSomethingCool:(NSString *) name;
@end

// ClassA definition

@interface ClassA
// We'll use this property to call the delegate.
// id<XXX> means that which ever class is assigned to id MUST conform to XXX
@property (nonatomic, assign) id<ClassADelegate> classADelegate; 
- (void) doSomething;
@end

// Class A implementation

@implementation ClassA

@synthesize classADelegate;

- (void) doSomething
{
  // Do cool things here.
  // Now call delegate, in this example, this will be ClassB
  [classADelegate didDoSomethingCool:@"Hello from Class A"];
} 
```

现在我们需要进行连接，`ClassB`以便通知它发生了一些事情`ClassA`：

```
// ClassB definition

@interface ClassB<ClassADelegate>
// ClassB<ClassADelegate> lets the compiler know that ClassB is required to have all the 
// non-optional method that are listed in ClassADelegate. In short, we say that
// ClassB conforms to the ClassADelegate.
{
  ClassA *_classA;
}
@end 
```

现在在`ClassB`的实现文件中的某个地方，我们有以下内容。

```
// ClassB implementation

@implementation ClassB

- (id) init
{
  self = [super init];
  if(self)
  {
    // Just quickly creating an instance of ClassA.
    _classA = [ClassA new];
    // This is were we tell ClassA that ClassB is its delegate.
    _classA.classADelegate = self;
  }
  return self;
}

- (void) dealloc
{
  [_classA release];
  [super dealloc]; 
}

- (void) didDoSomethingCool:(NSString *) name
{
  // This is the method that ClassA will be calling via the 
  // [classADelegate didDoSomethingCool:@"Hello from Class A"] method call.
}

@end 
```

我希望这有帮助 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:47:13.397

给classA添加一个assign属性：

```
@property (nonatomic, assign) id<classADelegate> delegate; 
```

然后在classB的viewDidLoad方法中，调用：

```
[myClassAObject setDelegate:self]; 
```

然后在 A 类中，只需调用：

```
if (_delegate && [_delegate respondsToSelector:@selector(method:)]) {
       [_delegate method:@"string"];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T15:49:29.963

ClassB 需要对 ClassA 的引用。此代码不完整，但应该可以帮助您了解需要创建的关系。

B类.h

```
@interface classB: UIViewController <classADelegate>

@property (weak, nonatomic) id<classADelegate> delegate;

@end 
```

B类.m

```
-(id)init {
    self = [super init];
    if (self) {
        self.delegate = [[classADelegate alloc] init];
    }
}

-(IBAction)buttonClicked {
    [delegate method:@"name"];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:48:12.523

您需要将委托对象存储在 classA 中：

```
@interface classA : NSObject
{
    id<classADelegate> _delegate;
}

@property (nonatomic, assign, readwrite) id<classADelegate> delegate; 
```

并综合属性：

```
@implementation classA
...

@synthesize delegate = _delegate; 
```

然后在需要调用委托的方法中，需要测试委托对象和方法是否有效：

```
- (void)somethingHappened
{
    if ([_delegate respondsToSelector:@selector(method:)])
    {
        [_delegate method:@"Andy"];
    }
} 
```

最后符合 B 类中的委托协议：

```
@implementation classB
...

- (void)method:(NSString *)name
{
    [self buttonCliked:nil];
} 
```

# firefox-addon - 调试 SDK 插件时如何修改源代码而不重新运行 cfx 和 Firefox？

> ID：10519440
> 
> 赞同：5
> 
> 时间：2012-05-09T15:41:51.357
> 
> 标签：firefox-addon, firefox-addon-sdk

我正在使用附加 SDK 开发一个 Firefox 附加组件。到目前为止，我必须在修改源代码后关闭调试进程并执行“cfx run”。

所以我想知道如何在不重新运行 Firefox 的情况下编辑源代码，比如在 Chrome 中调试 JavaScript。使用注入脚本刷新页面后，有什么方法可以调试修改后的代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T16:12:39.867

我是 Wladimir Palant 的“Extension Auto-Installer”插件的忠实粉丝：

*   博客文章：[http ://adblockplus.org/blog/faster-extension-development-cycle-install-changes-automatically](http://adblockplus.org/blog/faster-extension-development-cycle-install-changes-automatically)
*   AMO 链接：[https ://addons.mozilla.org/en-US/firefox/addon/autoinstaller/](https://addons.mozilla.org/en-US/firefox/addon/autoinstaller/)

在 Firefox 中安装和配置后，您可以创建一个 shell 脚本来减少输入开销：

```
#!/bin/bash

# quick script to build the xpi and pass it on to the
# extension auto-installer extension running on port 8888

/path/to/addon-sdk/bin/cfx xpi && wget --post-file=add-on-name.xpi http://127.0.0.1:8888/ 
```

每次运行脚本时，wget 都会将新构建的 xpi 发布到 firefox，然后安装它。

# jmeter - 将线程数传递给 Jmeter 脚本

> ID：10519446
> 
> 赞同：0
> 
> 时间：2012-05-09T15:42:29.077
> 
> 标签：jmeter

根据[http://wiki.apache.org/jmeter/JMeterFAQ](http://wiki.apache.org/jmeter/JMeterFAQ)我应该能够在我的 JMeter Gui 中为我的 jmeter 测试计划指定用户/线程的数量，如：

```
 ${__property(group2.threads,,defaultvalue)} 
```

其中默认值可以是 1、2、3 等等...

当我尝试这样做时，我的测试甚至没有开始。

有小费吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:49:14.793

[property](http://jmeter.apache.org/usermanual/functions.html#__property)函数旨在读取 JMeter 自己的属性（主要来自文件 jmeter.properties）。在您的情况下，您使用的是 group2.threads ，除非您将其放入其中，否则它不会作为属性存在。

您可以创建自己的自定义属性并引用这些属性，也可以使用[_P](http://jmeter.apache.org/usermanual/functions.html#__P)在命令行中传入属性。

您也可以将测试本身根目录中的测试计划控件中的线程组的值写为用户定义的变量。

事实上，有很多选择。真的取决于你的要求。

# java - 你可以在 C++ 程序中创建一个 .java 文件吗？

> ID：10519451
> 
> 赞同：-2
> 
> 时间：2012-05-09T15:42:41.087
> 
> 标签：java, c++

我可以使用 c++ 创建一个 .java 文件吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T15:44:31.050

请参阅有关输入/输出的[文档。](http://www.cplusplus.com/doc/tutorial/files/)如果最后用 .java 命名文件，那么它就是一个 java 文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T15:46:10.910

```
void create_java_file(std::string classname) {
  std::ofstream out(classname + ".java");

  out << "class " << classname << "{ static void main(String [] args) { System.out.println("Hello"); } }";
}

create_java_file("Uhh"); 
```

# java - AspectJ 和 Maven

> ID：10519452
> 
> 赞同：3
> 
> 时间：2012-05-09T15:42:48.580
> 
> 标签：java, maven, aspectj

我试图让 AspectJ 在现有项目中工作（实际上我对那个项目了解不多，因为它似乎不重要）。

我们决定使用加载时间编织来避免使用**ajc**

因为我是 AspectJ 的新手，所以我首先创建了一个带有一些类和日志方面的示例项目：

```
@Aspect
public class LoggingAspect {

    @Pointcut("call(public de.test.beans.IPerson+.*(..))")
    public void logExecutions(JoinPoint jp) {}

    @Before("logExecutions(jp)")
    public void beforeExecutions(JoinPoint jp) {
        BeforeExecutionLog log = new BeforeExecutionLog(jp);
        System.out.println(log);                
    }

    @AfterReturning(pointcut = "logExecutions(jp)", returning = "ret")
    public void afterExecutions(JoinPoint jp, Object ret) {
        AfterExecutionLog log = new AfterExecutionLog(jp, ret);        
        System.out.println(log);        
    }    

} 
```

它工作正常，一切都很好。

作为下一步，我尝试将 AspectJ 和 Maven 一起使用。我只是稍微改变了日志方面（只是包）。

根据“AspectJ in Action”一书中的代码，我修改了我们的 maven pom.xml

```
 <dependencies>
            ...
        <dependency>
           <groupId>org.aspectj</groupId>
           <artifactId>aspectjrt</artifactId>
           <version>1.6</version>
        </dependency>

        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjweaver</artifactId>
            <version>1.6.12.M1</version>
        </dependency>       
       </dependencies>
        <plugin>                                                 
            <groupId>org.codehaus.mojo</groupId>            
            <artifactId>aspectj-maven-plugin</artifactId>
            <version>1.4</version>
            <executions>                                         
                <execution>                                      
                    <goals>                                      
                        <goal>compile</goal>                     
                    </goals>                                     
                    <configuration>                              
                        <source>1.5</source>                     
                        <target>1.5</target>                     
                    </configuration>                             
                </execution>                                     
            </executions>                                        
        </plugin> 
```

但是如果尝试调用**mvn clean install**我会得到数千个错误，第一个是：

```
[ERROR] Syntax error on token "call(public xxx.yyy.zzz.api.Service+.*(..))", "name pattern" expected
[ERROR] Method annotated with @Pointcut() for abstract pointcut must be abstract 
```

还有以下错误：

```
[ERROR] The method xyz() of type zyx must override a superclass method 
```

我想这些都是受我方面影响的方法。

谁能解释我，怎么了？

先感谢您

**升级版：**

我更新了我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:38:07.710

也许它对某人有用。

```
[ERROR] The method xyz() of type zyx must override a superclass method 
```

出现此错误，然后您尝试使用 javac ver1.5 编译代码，并对刚刚在 java 类中实现的方法进行 @Override 注释。

```
public interface A { void someMethod(); }
public class B implements A {
  @Override
  public void someMethod() {
    doSomething();
  }
} 
```

我用这个

```
<plugin>
  <groupId>org.apache.maven.plugins</groupId>
  <artifactId>maven-compiler-plugin</artifactId>
  <configuration>
    <source>1.6</source>
    <target>1.6</target>
  </configuration>
</plugin> 
```

[在这里详细](http://aspectj.2085585.n4.nabble.com/AspectJ-and-Override-annotation-td2081801.html)查找

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T17:35:31.753

您的示例似乎不完整，并且您显示的错误与代码不匹配，但我没有看到使用以下 pom.xml 编译方面类的任何问题：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.test</groupId>
    <artifactId>test2</artifactId>
    <version>0.0.1-SNAPSHOT</version>

    <dependencies>
        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjrt</artifactId>
            <version>1.6.11</version>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>aspectj-maven-plugin</artifactId>
                <version>1.4</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                        <configuration>
                            <source>1.5</source>
                            <target>1.5</target>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-20T12:33:48.287

名称模式中存在错误：缺少返回类型。尝试任何类型的 asterix：

```
@Pointcut("call(public * de.test.beans.IPerson+.*(..))") 
```

# java - 通过 Python 或 Perl 客户端执行 java 方法

> ID：10519454
> 
> 赞同：3
> 
> 时间：2012-05-09T15:42:50.357
> 
> 标签：java, python, perl, client

我有一个 java 应用程序作为服务器（安装在 Tomcat/Apache 上）和另一个 java 应用程序作为客户端。客户端的任务是获取一些参数并将它们传递给服务器，并在服务器上调用适当的方法来执行。

我想让客户端使用其他语言，如 Perl、Python 或 TCL。所以，我需要知道如何建立通信以及什么是通信结构。我不是在寻找一些代码，而是更多地了解如何通过其他语言执行一些 java 代码。我尝试用谷歌搜索它，但我主要找到了具体的问题/答案，而不是教程或类似的东西。我想知道我是否应该搜索特定的表达式？您是否知道任何教程或网站可以考虑所有方面来解释此类结构？非常感谢再见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:47:17.740

您所说的是Web 服务。一个必然结果是 XML 和 SOAP。在 Java、Python、C#、C++……任何语言中，您都可以创建符合标准模式的 Web 服务。使用 NetBeans（Oracle 的 Java IDE）很容易创建 Java Web 服务。否则，使用谷歌搜索“网络服务教程[你的编程语言]

# asp.net - 使用嵌套母版页时，ASP 菜单控件为空

> ID：10519457
> 
> 赞同：1
> 
> 时间：2012-05-09T15:43:09.093
> 
> 标签：asp.net, vb.net, visual-studio-2010, nested, master

我正在使用嵌套母版页。父级有一个菜单，但是当我单击指向使用子级主控的页面的链接时，菜单为空，并且出现错误。我通过创建一个找到菜单控件的递归方法来解决这个问题，但现在它在导航菜单上出现了两个相同的链接。有没有更好的方法来做到这一点？详情如下：

我有一个带有菜单的 MainMaster 页面：

```
<%@ Master Language="VB" AutoEventWireup="false" CodeFile="Site.master.vb" Inherits="Site" %>
Code.....

    <asp:Menu ID="NavigationMenu" RenderingMode="List" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                        <Items>
                            <asp:MenuItem NavigateUrl="~/link1.aspx" Text="one"/>
                            <asp:MenuItem NavigateUrl="~/link2.aspx" Text="two"/>
                        </Items>
    </asp:Menu>
    <asp:ContentPlaceHolder ID="ContentPlaceHolder" runat="server"/> 
```

还有一个嵌套在主主控中的 ChildMaster：

```
<%@ Master Language="VB" MasterPageFile="~/Site.Master" AutoEventWireup="false" CodeFile="admin.master.vb" Inherits="admin" %>

<asp:Content ID="Content1" ContentPlaceHolderID="Head" Runat="Server">
    <asp:ContentPlaceHolder ID="Head" runat="server">

    </asp:ContentPlaceHolder>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder" Runat="Server">

     <div>
        <asp:ScriptManager ID="ScriptManager1" runat="server" EnablePartialRendering="false"/>
        <asp:ContentPlaceHolder ID="ContentPlaceHolder" runat="server">
        </asp:ContentPlaceHolder>
     </div>

</asp:Content> 
```

在后面的 MainMaster 代码中，我需要确定登录的用户是否是管理员。如果是，我需要添加一个指向管理页面的链接：

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        If Not (Page.IsPostBack) Then
            Dim da As New Data
            Dim user As Integer
            user = Request.Cookies("userid").Value

            If (da.isAdmin(user)) Then
                Dim item As New MenuItem
                item.Text = "Admin"
                item.NavigateUrl = "~/Admin.aspx"
                Dim menu As Menu
                menu = FindControlRecursive("NavigationMenu")
                menu.Items.Add(item)

            End If
        End If
    End Sub 
```

但是，当我单击管理员链接时，我会收到一条错误消息，提示菜单为空。我在这里找到了解决方案： [在嵌套母版页中查找控件](https://stackoverflow.com/questions/728168/finding-controls-inside-nested-master-pages)

并使用此方法找到菜单控件（谢谢 Niranjan Kala）：

```
public static class PageExtensionMethods
{
    public static Control FindControlRecursive(this Control ctrl, string controlID)
    {
        if (string.Compare(ctrl.ID, controlID, true) == 0)
        {
            // We found the control!
            return ctrl;
        }
        else
        {
            // Recurse through ctrl's Controls collections
            foreach (Control child in ctrl.Controls)
            {
                Control lookFor = FindControlRecursive(child, controlID);
                if (lookFor != null)
                    return lookFor;
                // We found the control
            }
            // If we reach here, control was not found
            return null;
        }
    } 
```

现在我可以单击管理员链接，菜单不再为空，但它会创建管理员链接的副本。我不明白为什么会这样，或者如何以不同的方式进行修复。

编辑：没关系。我走错路了。我通过将菜单存储在会话中来修复它，然后如果菜单为空，我将获得存储在会话中的原始菜单。我根本不需要递归函数来找到控件。

```
 Session("menu") = NavigationMenu
        If NavigationMenu Is Nothing Then
            NavigationMenu = Session("menu")
        Else

            Dim data As New data
            Dim user As Integer
            user = Request.Cookies("userid").Value

            If (data.isAdmin(uid)) Then
                Dim item As New MenuItem
                item.Text = "Admin"
                item.NavigateUrl = "~/Admin.aspx"
                NavigationMenu.Items.Add(item)

            End If
        End If 
```

# automapper - AutoMapper 字典展平

> ID：10519460
> 
> 赞同：6
> 
> 时间：2012-05-09T15:43:19.657
> 
> 标签：automapper

我有一个`Dictionary<User, bool>`

用户如下：

```
 public class User {
   public string Username { get; set; }
   public string Avatar { get; set;
} 
```

第二种类型，bool，表示这个用户是否是登录用户的朋友。我想将此 Dictionary 展平为`List<UserDto`> UserDto 定义为：

```
public class UserDto {
   public string Username { get; set; }
   public string Avatar { get; set; }
   public bool IsFriend { get; set; }
} 
```

`IsFriend`表示字典的值。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-15T12:14:07.277

您应该能够只用一个映射¹做到这一点：

您需要将 a 映射`KeyValuePair<User, bool>`到`UserDto`. 这对于 AutoMapper 能够将字典的内容映射到`List<T>`我们最终创建的内容是必要的（更多的解释可以在[这个答案](https://stackoverflow.com/q/5995167/497356)中找到）。

```
Mapper.CreateMap<KeyValuePair<User, bool>, UserDto>()
    .ForMember(dest => dest.Username, opt => opt.MapFrom(src => src.Key.UserName))
    .ForMember(dest => dest.Avatar, opt => opt.MapFrom(src => src.Key.Avatar))
    .ForMember(dest => dest.IsFriend, opt => opt.MapFrom(src => src.Value)); 
```

`.Map`然后，在您的通话中使用映射：

```
Mapper.Map<Dictionary<User, bool>, List<UserDto>>(...); 
```

您不需要自己映射集合，因为 AutoMapper 可以处理将 映射`Dictionary`到 a`List`只要您已将集合的*内容*相互映射（在我们的例子中，映射`KeyValuePair<User, bool>`到`UserDto`）。

* * *

**编辑**：这是另一个不需要将每个`User`属性映射到的解决方案`UserDto`：

```
Mapper.CreateMap<User, UserDto>();
Mapper.CreateMap<KeyValuePair<User, bool>, UserDto>()
    .ConstructUsing(src => Mapper.Map<User, UserDto>(src.Key))
    .ForMember(dest => dest.IsFriend, opt => opt.MapFrom(src => src.Value)); 
```

¹[使用 AutoMapper 2.0]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T15:57:23.650

我知道我迟到了，但这似乎是使用 automapper 将字典映射到 .Net 类型（简单）的更通用的解决方案

```
public static IMappingExpression<Dictionary<string, string>, TDestination> ConvertFromDictionary<TDestination>(
        this IMappingExpression<Dictionary<string, string>, TDestination> exp)
{
    foreach (PropertyInfo pi in typeof(TDestination).GetProperties(BindingFlags.Instance | BindingFlags.Public | BindingFlags.NonPublic))
    {
        exp.ForMember(propertyName, cfg => cfg.MapFrom(r => r[propertyName]));
    }
    return exp;
} 
```

像这样使用它

```
Mapper.CreateMap<Dictionary<string, string>, TDestination>().ConvertFromDictionary(); 
```

其中 Tdestination 可以是 .NET 简单类型。对于复杂类型，您可以提供一个 Func/Action 委托并使用该函数进行映射。（在上面的 for-each 中）

例如。

```
if (customPropNameMapFunc != null && !string.IsNullOrEmpty(customPropNameMapFunc(propertyName)))
{
   exp.ForMember(propertyName, cfg => cfg.MapFrom(r => r[customPropNameMapFunc(propertyName)]));
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T16:08:43.283

对于像这样简单的事情，一个快速的 LINQ 查询就可以了。假设`dict`是你的`Dictionary<User,bool>`：

```
var conv = from kvp in dict
            select new UserDto
                    {
                        Avatar = kvp.Key.Avatar,
                        IsFriend = kvp.Value,
                        Username = kvp.Key.Username
                    }; 
```

# android - 在 Android 中分享推文

> ID：10519461
> 
> 赞同：0
> 
> 时间：2012-05-09T15:43:22.370
> 
> 标签：android, twitter

我正在开发一个 Android 应用程序，我想在 Twitter 上发布一条推文。我的问题是我不知道如何在 android 应用程序中创建推文。我搜索了信息，发现了两个可能对推文内容有益的库，它们是 JTwitter 和 Twitter4J。当我搜索信息时，人们也说OAuth很难，我对OAuth一无所知。如果我想与推文分享一张图片，图片可以是比特猫对象吗？而且，我如何在预先确定的推文中插入此图像？

感谢您花费的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T11:34:16.650

我发现解决此问题的最佳方法是使用共享意图。在下一个链接中，您将对此解决方案提出另一个问题，唯一的问题是只能与 twitter 的官方客户端合作。

[如何强制共享意图打开特定应用程序？](https://stackoverflow.com/questions/8308666/how-to-force-share-intent-to-open-a-specific-app/)

因此，使用该代码，您将能够使用 twitter 客户端发布您想要的推文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:57:05.613

我个人使用 Twitter4J 取得了巨大成功。但是，有一种更简单的分享方式可以将您的应用程序打开到更多社交网络。

您可以使用共享`Intent`。[这个博客](http://mobile.tutsplus.com/tutorials/android/android-sdk-implement-a-share-intent/)有一个很棒的教程，可以引导你完成每一步。要包含图像，您可以使用`sharingIntent.putExtra(Intent.EXTRA_STREAM, uri)`，其中`uri`是图像在设备上的路径（内容 URI 或直接文件路径）。

# javascript - 与使用 $.each 相比，将侦听器添加到 jQuery 类集的效率

> ID：10519465
> 
> 赞同：6
> 
> 时间：2012-05-09T15:44:04.700
> 
> 标签：javascript, jquery, optimization, jquery-plugins

最初的直觉告诉我，使用绑定或直接事件方法向一组 jQuery 元素添加侦听器，例如..

`$('.className').click(funcName);`

比使用 $.each 方法将侦听器一个接一个地添加到同一个集合要合适得多，因为...

`$('.className').each(function(){ $(this).click(funcName); });`

但是，当涉及到插件开发时，您正在处理用户在页面的整个生命周期中多次调用插件实例的可能性，在页面加载时以及在页面加载后很长时间通过 ajax，将处理程序应用于每个元素本身，而不是试图将处理程序抽象到它们的全局类集？

我正在处理的主要问题是“在事件处理方面，处理调用的插件的多个实例的最佳方法是什么？为了减少工作量？” 我知道我们可以绑定和取消绑定，但有更好的方法吗？

**编辑**

插件构造的部分代码

```
init : function(){

  this.each(function(opts){

  // adding event handlers here removes
  // the need to worry about multiple instances
  // and duplicate handles over the lifetime of the page

  });

  // adding 'global' handlers here may/may not be more
  // efficient, but adds an issue of multiple instances

  return this;

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T17:23:05.253

如果你调用`click`一次，jQuery 将遍历整个集合并单独绑定事件。*但是*，它会比您的替代方案更有效，因为它不会为集合中的每个元素构建一个新的 jQuery 对象，这将非常慢。

这是来自 jQuery 源的代码（它是`on`方法）：

```
return this.each( function() {
    jQuery.event.add( this, types, fn, data, selector );
}); 
```

[（event.js，第 936-8 行）](https://github.com/jquery/jquery/blob/247d824/src/event.js#L936)

`jQuery.event.add`，这是完成繁重工作的方法，不需要 jQuery 对象；普通的 DOM 对象就是它所需要的。这个循环（实际上与您的循环相同）在效率方面要优越得多，因为`$(this)`每次都会调用代码中的大瓶颈。

请注意，*最*有效的技术是使用相同[`on`](http://api.jquery.com/on)方法的事件委托。这可能看起来像这样：

```
$(document.body).on('click', '.className', funcName); 
```

这意味着“对于内部的每次点击`document.body`，检查它是否源自与选择器匹配的元素`.className`，如果是则运行`funcName`”。您可以替换`document.body`为包含所有潜在`.className`元素的任何其他元素。`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:05:53.787

您的问题是关于“效率”的，我认为这意味着“客户端的速度”。可能任何合理的方法对感知性能的影响都会很小，因此我建议您选择最容易维护的编码模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T17:10:34.473

```
$('.className').click(funcName); 
```

负载更少，因为它使用单个 jquery 对象

```
$('.className').each(function(){ $(this).click(funcName); }); 
```

更多负载，因为它使用初始实例，并且还通过 为每个“每个”元素生成一个新实例`$(this)`。如果`$('.className')`包含 50 个元素，那么您现在有 51 个 jQuery 对象，而不是单个对象。

至于插件开发，您可以使用 javascript 对象并`new`用于插件的每个实例。或者您可以定义一个父对象类，并使用`.each`它来设置实例。我希望这会有所帮助，在不知道你在做什么的情况下很难做出推荐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T18:19:49.523

唯一真正了解的方法是对其进行[分析](http://jsperf.com)。但是，我敢打赌，这是一个过早优化的练习。

`$(this)`循环调用对[运行时性能的影响可以忽略不计](https://stackoverflow.com/q/10433014/201952)。

`each`如果在循环中附加处理程序更容易和更清洁，那就去做吧。

# c# - ASP：将文件路径完整复制到我的代码隐藏方法中

> ID：10519469
> 
> 赞同：0
> 
> 时间：2012-05-09T15:44:07.000
> 
> 标签：c#, asp.net, database, file-upload, webforms

我想将一个 excel 文件复制到我的数据库中。我遇到的问题是我似乎无法将路径复制到代码隐藏中。这是我的asp代码：

```
 <asp:FileUpload id="FileUploadControl" runat="server" />
    <asp:Button runat="server" id="UploadButton" text="Upload" onclick="UploadButton_Click" />
    <br /><br />
    <asp:Label runat="server" id="StatusLabel" text="Upload status: " /> 
```

如果我在路径中硬编码，那么我的代码将起作用：

```
string path = @"C:\Users\moynik\Desktop\datatest.xls"; 
```

但如果我使用以下行，我只会得到一条无法正常工作的不同路径。

```
string path = Path.GetFullPath(FileUploadControl.FileName); 
```

但我需要使我的路径动态化，以便用户可以从自己的计算机上的不同目的地上传。谁能帮我吗。这是工作并将excel文件复制到我的数据库的功能

如果这是不可能的，如果他们想到一个解决方案，有人可以帮助我解决问题。谢谢

```
protected void UploadButton_Click(object sender, EventArgs e)
{
    if (FileUploadControl.HasFile)
    {
        try
        {
            string path = @"C:\Users\moynik\Desktop\datatest.xls";
            string connStr = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + path + ";Extended Properties=Excel 8.0;";

    using (OleDbConnection connection = new OleDbConnection(connStr))
            {
                OleDbCommand command = new OleDbCommand ("Select Name,Address,Age FROM [Sheet1$]", connection);

                connection.Open();

                using (DbDataReader dr = command.ExecuteReader())
                { 
                    string sqlConnectionString = "SERVER=<servername>;UID=schafc;Trusted_Connection=Yes;DATABASE=<dbname>;";

                    using (SqlBulkCopy bulkCopy = new SqlBulkCopy(sqlConnectionString))
                    {
                        bulkCopy.DestinationTableName = "<tableName>";
                        bulkCopy.WriteToServer(dr);
                    }
                }
            } 
            StatusLabel.Text = "Upload status: File uploaded!";
        }
        catch (Exception ex)
        {
            StatusLabel.Text = "Upload status: The file could not be uploaded. The following error occured: " + ex.Message;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:01:13.593

该文件实际上并不存在于您的服务器磁盘上，直到您将其保存在某处。[有关FileUpload.SaveAs Method](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.fileupload.saveas.aspx)的信息，请参阅 MSDN 文档。您手动指定的路径有效的唯一原因是该应用程序位于您的开发机器上，因此可以访问该文件。实际上，您对硬编码路径所做的事情是完全绕过上传控件。

```
string path = Path.Combine(@"C:\MyUploadDirectory", FileUploadControl.FileName);
FileUploadControl.SaveAs(path);
string connStr = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + path + ";Extended Properties=Excel 8.0;"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T15:49:59.283

FileUpload控件是一个服务端控件，代码

```
Path.GetFullPath(FileUploadControl.FileName); 
```

在服务器上执行，而不是在客户端。我不确定您所说的“我需要使我的路径动态化，以便用户可以从自己的计算机上的不同目的地上传”是什么意思。用户始终可以从其计算机上的任何目的地选择文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T15:52:56.380

尝试`Path.GetFileName(FileUploadControl.FileName)`代替`.GetFullPath`.

[http://asp.net-tutorials.com/controls/file-upload-control/](http://asp.net-tutorials.com/controls/file-upload-control/)

编辑：啊，我刚刚弄清楚你想要做什么。您需要先将 xls 文件上传到*服务器*位置，然后您可以将服务器上文件的路径传递到连接字符串中。

例如

```
string filename = Path.GetFileName(FileUploadControl.FileName);
string path = Server.MapPath("~/") + filename;
FileUploadControl.SaveAs(path);

string connStr = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + path + ";Extended Properties=Excel 8.0;";
... 
```

# python - 两个精灵互相发现

> ID：10519470
> 
> 赞同：2
> 
> 时间：2012-05-09T15:44:07.370
> 
> 标签：python, pygame, real-time-strategy

你好，堆栈溢出。你可能还记得我在我的 pygame 程序“Table Wars”中的单位生成问题。我决定将我的游戏范围改为即时战略而非回合制游戏。我希望这款游戏能够像顶级 Flash 游戏：“战争时代”那样玩。游戏中的几乎所有东西都可以正常工作：生成单位、游戏的 HUD，甚至是基础生命值。不幸的是，我似乎无法弄清楚如何实现单位攻击敌人或敌人基地的能力。以下是单位本身的概念：

*   该单位在团队基地周围的按键上`K_1`生成：从`Red_Infantry`类中生成一个精灵
*   该单位在生成时被添加到一个`Group`类中。有两个`Group`s，每个团队一个。
*   该单位通过 a`move_ip`内的呼叫移动，`def update`直到它到达靠近敌人基地的一个点，然后停止。

以下是我希望不同单位的战斗方式：

*   单位在其攻击范围内发现敌人时停止。不同的单位有不同的攻击范围
*   然后该单位以一秒的间隔进行攻击。
*   如果该单位成功将敌方单位的生命值降至 0，则敌方死亡，另一方可以继续
*   这个循环一直重复，直到单位到达敌方基地，然后它将每隔一秒攻击敌方基地。其中一个单位将能够对基地造成三倍的正常伤害。

这是我的代码示例，显示了`Red_Infantry`该类：

```
class Red_Infantry(pygame.sprite.Sprite):
def __init__(self, screen):
    pygame.sprite.Sprite.__init__(self)
    self.image, self.rect = load_image('Soldier_red.png', -1)
    self.rect.move_ip(random.randint(75, 100), random.randint(275, 325))
    self.selected = 0
    self.area = screen.get_rect()
    self.health = 100 #Soldiers are have mediocre toughness.
    self.attack_damage = 25 #The amount of damage it deals
    self.range = 20 #The attack range of the unit.
    self.update()
def update(self):
    self.rect.move_ip(1, 0)
    if self.rect.right >= 725: #This position is close to the enemy base...
        self.rect.right = 725 #...where it will then stop
    if self.health <= 0:  
        self.kill() #a simple code that kills the sprite if his health reaches 0 
```

主循环仅包含生成每个单位的能力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:04:10.590

从您的问题中，尚不完全清楚小组如何与每个小组互动以进行发现。在下文中，如果 A 的任何成员 a 在 B 的任何成员 b 的某个指定范围内，我将假设 A 组“发现”B 组。

最简单的方法是迭代所有 (a,b) 对。为此，您可以使用 itertools 库，例如...

```
spotted = False
for a, b in itertools.product(A.sprites( ), B.sprites( )):
    if is_in_range(a, b):
        spotted = True
        break 
```

这种方法的问题是计算成本相当高。（复杂度为 n**2。）此外，如果没有某种修剪和优化，您也必须为每对友好/敌人组运行此代码块。现在，如果保证每个组都有一些恒定的几何形状，那么我们可以使计算成本便宜得多。但是，假设组没有固定的几何形状，那么我建议您考虑使用几何包来为您做很多工作。这些软件包非常强大且非常高效……而且其中很多也非常易于使用。可能有特定于 PyGame 的几何包......我现在想不出任何包。

我经常使用[匀称的包装](http://pypi.python.org/pypi/Shapely)。如果我们使用 shapely，那么确定检测范围内的组的问题更像是......

```
import shapely
import shapely.geometry

#-- Build a polygon envelope around the members of the group.
pointsA = shapely.geometry.MultiPoint(map(lambda r: r.center, A.sprites( )))
pointsB = shapely.geometry.MultiPoint(map(lambda r: r.center, B.sprites( )))

#-- Ask shapely to give the minimum distance between the hulls that
#-- encompass the two groups.
distance = pointsA.convex_hull.distance(pointsB.convex_hull)

if distance < RANGE_OF_DETECTION:
   detected = True
else:
   detected = False 
```

请注意，我没有测试上面的代码......这只是为了演示使用 shapely 库来帮助进行几何计算的一般想法。

如果您是游戏编程的新手，您可能还想研究使用四叉树作为修剪需要完成多少几何计算的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T00:38:35.993

这是一个起点

```
class RedInfantry(pygame.sprite.Sprite):
    def __init__(self):
        self.screen = pygame.display.get_surface()
        self.image, self.rect = load_image('Soldier_red.png', -1)    
        self.rect.move_ip(random.randint(75, 100), random.randint(275, 325))
        self.target = None
        self.range = 20
        self.attack_cooldown = 200
        self.attack_last = 0

    def move_toward(self, target):
        # move toward players click destination, if one is set.
        # else toward my attack target

    def update(self):
        # move...
        self.find_target()
        self.move_toward(self.target)
        self.attack()
        # check HP
        if self.health <= 0:
            self.kill()

    def find_target(self):
        """finds new targets in range:
        for speed: only call this once every 200ms."""
        if self.target is not None: return
        for enemy in B.sprites():
            if distance(self.rect.center, enemy.rect.center) <= self.range:
                self.target = enemy
                return
        # else no targets in range
        self.target = None  

    def attack(self):
        """attack, if able.
        target exists? still alive? gun cooldown good?"""
        if self.target is None: return
        if self.target.health <= 0: return
        if not self.cooldown_ready(): return

        # all good, fire. could verify still in range. 
        self.target.damage(self.attack_damage)

    def cooldown_ready(self):
        # gun ready to fire? has cooldown in MS elapsed.
        now = pygame.time.get_ticks()
        if now - self.attack_last >= self.attack_cooldown:
            self.attack_last = now
            return True
        return False 
```

# android - Android - 分隔列表字符串

> ID：10519473
> 
> 赞同：2
> 
> 时间：2012-05-09T15:44:19.113
> 
> 标签：android, listview, textview

我正在从列表视图中单击的元素中检索字符串数据。

该元素有两行，一行名为“current”，另一行名为“name”。在我的 listItemOnClick() 中，我正在获取被单击的项目，然后对其执行 toString()。我得到的是这样的：

```
{current=SOMETHING, name=SOMETHING} 
```

我的问题是如何将这些分开？这是我的点击代码：

```
 protected void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    Object o = this.getListAdapter().getItem(position);
    String current = o.toString();

    ((TextView) findViewById(R.id.check)).setText(current);
} 
```

例如，我只想显示当前的。谢谢！

**编辑**

我的列表变量：

```
 static final ArrayList<HashMap<String,String>> listItems = 
        new ArrayList<HashMap<String,String>>();;
SimpleAdapter adapter; 
```

创建列表：

```
 for(int i=0; i<num_enter; i++){
    final int gi = i;
    adapter=new SimpleAdapter(this, listItems, R.layout.custom_row_view,new String[]{"name", "current"},  new int[] {R.id.text1, R.id.text2});
    setListAdapter(adapter);
    HashMap<String,String> temp = new HashMap<String,String>();
    temp.put("name", name[i]);
    temp.put("current", "Value: " + Integer.toString(current[i]));
    listItems.add(temp);
    adapter.notifyDataSetChanged();
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T15:51:02.383

您可以这样做（当/如果格式更改时，丑陋且容易出现未来错误） - 添加错误检查以防字符串格式不正确：

```
String s = "{current=CURRENT, name=NAME}";
s = s.substring(1, s.length() - 1); //removes { and }
String[] items = s.split(",");
String current = items[0].split("=")[1]; //CURRENT
String name = items[1].split("=")[1]; //NAME 
```

在您进行编辑之后，似乎 o 是一个 Map 所以您也可以编写（好多了）：

```
Map<String, String> map = (Map<String, String>) this.getListAdapter().getItem(position);
String current = map.get("current");
String name = map.get("name"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T16:02:05.277

哇，每个人都在走很长的路。直接从视图中获取数据。在这种情况下， View v 是您的布局行，因此您可以使用它找到各个文本视图`findViewById`并从中获取文本。使用您的代码将是这样的：

```
protected void onListItemClick(ListView l, View v, int position, long id) {
    super.onListItemClick(l, v, position, id);

    TextView nameTxt = (TextView) v.findViewById(R.id.Text1);
    TextView currentTxt = (TextView) v.findViewById(R.id.Text2);
    String name = nameTxt.getText().toString();
    String current = currentTxt.getText().toString();
} 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:56:04.043

这应该不是很困难：

```
protected void onListItemClick(ListView l, View v, int position, long id) {
// TODO Auto-generated method stub
super.onListItemClick(l, v, position, id);
Object o = this.getListAdapter().getItem(position);
String current = o.toString();

// first remove the first and last brace
current = current.substring(1,current.length()-1);
// then split on a comma
String[] elements = current.split(",");
// now for every element split on =
String[] subelements = elements[0].split("=");
String key1 = subelements[0];
String value1 = subelements[1];

subelements = elements[1].split("=");
String key2 = subelements[0];
String value2 = subelements[1];

((TextView) findViewById(R.id.check)).setText(current);
} 
```

# javascript - 在backbone.js 中使用全局变量.. 最佳实践

> ID：10519477
> 
> 赞同：2
> 
> 时间：2012-05-09T15:44:33.107
> 
> 标签：javascript, backbone.js

也许只是一个愚蠢的问题。
在所有示例中，我看到视图模型和集合都是全局变量。
这里是一个例子。[骨干简介](http://www.joezimjs.com/javascript/introduction-to-backbone-js-part-1-models-video-tutorial/)。
可以在不使用全局变量或命名空间的情况下定义模型视图和集合吗？
然后我怎样才能访问它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:00:05.137

好吧，@JayC 关于全局命名空间实际上是正确的，并且存在某种命名空间约定，但我实际上喜欢为每个主干类使用单独的模块，然后使用一个（或者没有，如果你知道你是什么）加载它做）命名空间。让我放置一个使用 CommonJS 的无全局变量应用程序的示例（实际上有一个很好的资源如何使用 RequireJS 来制作它）。

您需要的是非常简单且看起来像这个[gist](https://gist.github.com/2647024)的附加库。它基本上为您提供了 CommonJS 规范，可用于单独的文件或缩小的文件（例如 script.js 文件）。

所以假设你有 4 个文件，分别命名为 : `model.js`, `collection.js`, `view.js`，`app.js`它们看起来像这样：

```
// model.js
this.require.define({'model.js': function(exports, require, module) {(function() {
    var MyModel = Backbone.Model.extend({
        ...
    });

    module.exports = MyModel;
}).call(this)}});

// collection.js
this.require.define({'collection.js': function(exports, require, module) {(function() {
    var MyCollection = Backbone.Collection.extend({
        model : require('model.js');
    });

    module.exports = MyCollection;
}).call(this)}});

// view.js
this.require.define({'view.js': function(exports, require, module) {(function() {
    var MyView = Backbone.View.extend({
        initialize: function() {
            var Collection = require('collection.js');
            this.collection = new Collection();
        }
    });

    module.exports = MyView;
}).call(this)}});

// app.js
this.require.define({'app.js': function(exports, require, module) {(function() {
    var View = require('view.js');

    $(function() {
        new View();
    });
}).call(this)}}); 
```

html 文件中的脚本标签应如下所示：

```
<script src='jquery-underscore-backbone.js'></script>
<script src='commonjs.js'></script> <!-- this is the library from the gist -->
<script src='model.js'></script>
<script src='collection.js'></script>
<script src='view.js'></script>
<script src='app.js'></script> 
```

您可以缩小所有文件并仅加载一个（例如 script.js ）与所有这些文件的缩小内容，并且也可以工作。

通过这样做，您将没有全局命名空间填充，no `App.Class`, no `App.Collection`... 等。如果您确定自己在做什么，您甚至不必有`window.app`变量。

我知道它看起来很丑，因为包装器，但是有些框架会自动包装它，或者如果你使用 AJAX 模块加载（ requireJS ），你就不需要使用这个包装函数。

很好的例子（node.js）是：[Stich](https://github.com/sstephenson/stitch)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T16:09:14.667

您可以在任何您想要的地方定义您的模型和集合（以及它们各自的实例）。我会为模型等推荐某种全局命名空间约定，以供重用。一个简单的方法是：

```
window.ProjectModels = window.ProjectModels || {};  //use existing namespace  or create a new one.
ProjectModels.SomeModel = Backbone.Model.extend({ ...});
ProjectModels.SomeOtherModel = Backbone.Model.extend({ ...});
ProjectModels.SomeRelatedModel = ProjectModels.SomeModel.extend({ ...});
...
window.ProjectViews = window.ProjectViews || {};  //use existing namespace  or create a new one.
ProjectViews.SomeModelView = Backbone.View.extend({ ...});
ProjectViews.SomeOtherModelView = Backbone.View.extend({ ...});
ProjectViews.SomeRelatedModelView = ProjectViews.SomeModel.extend({ ...}); 
```

*您可能想知道为什么我没有将集合放在它们自己的命名空间中。我没有将集合放在它们自己的命名空间中的唯一原因是我可以看到一些情况，我可能会为某种分层集合/事物扩展 Backbone.Model；我也可以将模型与集合区分开来，因为我有一个命名集合 [Something]Collection 的约定......换句话说，我没有充分的理由，我只是按照我的口味去做。*

# database - 行建模和 EAV 之间的区别

> ID：10519484
> 
> 赞同：2
> 
> 时间：2012-05-09T15:44:54.757
> 
> 标签：database, database-design, data-modeling, database-schema, entity-attribute-value

行建模和 EAV（实体-属性-值）之间的主要区别是什么？
我认为 EAV 是行建模的一个子集，但我不能说明主要区别。
如果可能，请在您的答案中使用参考资料。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:42:51.757

好问题。

根据[维基百科的文章](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model#EAV_versus_row_modeling)，

> 行建模和EAV之间的区别是：
> 
> *   行建模表在其描述的事实方面是同质的：行项目表仅描述销售的产品。相比之下，EAV 表几乎包含任何类型的事实。
> *   行建模表中值列的数据类型由其记录的事实的性质预先确定。相比之下，在 EAV 表中，特定行中值的概念数据类型取决于该行中的属性。

所以这是我的看法：

*   行建模

    ```
    create table line_items (
      id int primary key,
      sale_id int,
      foreign key sale_id references sale(id),
      product_name varchar(50), -- this could also be a foreign key 
      price decimal(10, 2)
    ); 
    ```

    *   这有一定的类型安全性： `price`不能是一些垃圾字符串

    *   我们在此表中放入的唯一内容是订单项

    *   对我来说，这听起来就像正常的 1:many 关系（但我不确定，所以不要引用我的话）

*   实体属性值

    ```
    create table my_eav (
      entity_id int,
      foreign key (entity_id) references entity(id),
      attribute varchar(50),
      value varchar(50),
      primary key (entity_id, attribute)
    ); 
    ```

    *   这些值存储为`varchar`s - 但它们可以是数字、字符串、时间等。

    *   可以存储各种数据——鞋码、飞机重量、贝比·鲁斯在 1926 年击出的本垒打数

* * *

文章接着说：

> 下面列出了您需要超越标准行建模到 EAV 的情况：
> 
> *   各个属性的数据类型各不相同（如临床发现所示）。
> *   数据的类别众多，不断增长或波动，但每个类别中的实例（记录/行）数量非常少。在这里，使用常规建模，数据库的实体-关系图可能有数百个表：包含数千/数百万行/实例的表在视觉上与只有很少行的表相同程度地被强调。后者是转换为 EAV 表示的候选者。

因此，如果您有很多这样的 1:many 关系，您是否希望每个都有 1 个表，如行建模所要求的那样？而 EAV 将允许您将这些表（部分或全部）组合为 1。

# php - 如何确保用户观看整个视频？

> ID：10519485
> 
> 赞同：7
> 
> 时间：2012-05-09T15:44:55.490
> 
> 标签：php, youtube, youtube-api

# 背景：

我正在开发一个基于网络的教学程序（使用 Drupal 7，如果这很重要），它要求用户按顺序观看教育视频。我想确保他们在访问下一个视频之前完整地观看了每个视频。我对 YouTube API 非常陌生，但我仔细阅读了 PHP 开发人员指南，但没有找到任何有关如何执行此操作的信息。

我愿意接受任何合理的方式来实现这一点。我在想，检查是否命中了一个或两个随机时间码，以及电影是否播放完毕，如果不看视频就很难跳过。

# 所以要做到这一点，我需要弄清楚两件事：

1.  如何让服务器知道正在观看的视频何时达到选定的时间码，以及
2.  如何让服务器知道视频何时结束。

如果有人能指出我正确的方向，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:50:52.700

当视频播放器到达媒体文件的末尾（或接近末尾）时，您需要做的就是 ping 您的服务器。

您可以编写自己的（javascript 或 flash）视频播放器或修改现有的播放器之一。此技术不适用于 HTML5`<video>`标记。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T11:15:44.393

使用 youtube api，您可以“ping 服务器”

```
 function onPlayerStateChange(evt) {       
       if (evt.data == 0){
       alert (player.getDuration())
     }
 } 
```

然后，您可以获得剪辑的持续时间。进一步使用 api - 用户开始和停止的时间应该允许您计算出用户查看剪辑所花费的时间。将此与持续时间进行比较，如果匹配（或足够接近）触发奖励。

[https://developers.google.com/youtube/js_api_reference](https://developers.google.com/youtube/js_api_reference)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-13T19:01:49.967

我一直在做一些非常相似的事情，我决定使用 iframe api [https://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)使用自定义播放器并删除默认的 chrome，这可以防止他们跳过.

```
// api has been loaded
function onYouTubeIframeAPIReady(){
    var player = new YT.Player(el, {
        videoId: video_id,
        width: 700,
        playerVars: {
            controls: 0,
            modestbranding: 1,
            rel: 0              
        }, 
        events: {
            onStateChange: function(d){
                switch(d.data){
                    case YT.PlayerState.ENDED:
                        // send notification of video ended
                }
            }
        }
    });
}

    // async load of api
var tag = document.createElement('script');
tag.src = "//www.youtube.com/iframe_api";
var firstScriptTag = document.getElementsByTagName('script')[0];
firstScriptTag.parentNode.insertBefore(tag, firstScriptTag); 
```

当 youtube api 完全加载并设置 iframe 播放器时调用该函数。`el`是要替换为视频的 dom 对象，`video_id`是要加载的视频的 id。`controls: 0`是隐藏播放器镀铬的神奇位。然后在该`onStateChange`函数中，您可以发送一个 ajax 请求，或更改您的布局或在视频结束时您需要做的任何事情。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-10T20:27:24.930

Flash 和 JavaScript ***Player*** API 参考包括用于获取[Playback Status](https://developers.google.com/youtube/js_api_reference#Playback_status)的函数，特别是：

```
player.getCurrentTime():Number
Returns the elapsed time in seconds since the video started playing. 
```

我正在查看错误的 API 引用，但最终找到了它。耶。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-06T06:03:31.780

如果您使用 html5 和 JavaScript，您可以原生检查是否已播放整个视频或某些部分。

Html5 的视频 API 跟踪所有已播放的时间范围。查看[`<video>.played`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video)属性和[`TimeRanges`](https://developer.mozilla.org/en-US/docs/Web/API/TimeRanges)类的文档。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T17:46:59.187

在视频末尾放一个认证链接；使用该链接来验证他们是否收集了令牌。这不会解决检查点的问题，观众可以按下播放键走开，但检查点可能会发生这种情况。

Youtube 视频可以在课程期间使用上传界面中的注释功能插入链接。将最后 15 秒左右的注释中的编码链接与您网站的用户身份验证相结合，以创建服务器端凭据。

# asp.net-mvc-4 - Web API 操作名称

> ID：10519488
> 
> 赞同：2
> 
> 时间：2012-05-09T15:45:03.310
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我正在使用 ASP.NET Web API，我有以下内容：

```
public Guid GetLogon(string username, string password)
{
    return new X.Authentication().Logon(username, password);
}

public void PostLogoff(Guid sessionId)
{
    new X.Authentication().Logoff(sessionId);
} 
```

这是从客户端调用的，如下所示：

```
$(document).ready(function () {
    logon("MyUsername", "MyPassword", function (guid) {
        $("#sessionId").html(guid);

        logoff($("#sessionId").html(), function () {
            //Logged out action here
        });
    });        
}); 
```

这一切都有效，但我不喜欢在动作名称前加上 http 动词，如 GetLogon 或 PostLogoff。有没有办法让他们只是登录和注销？

我尝试了以下方法，但没有奏效：

```
[System.Web.Mvc.AcceptVerbs(HttpVerbs.Get)]
public Guid Logon(string username, string password)
{
    return new X.Authentication().Logon(username, password);
}

[System.Web.Mvc.AcceptVerbs(HttpVerbs.Post)]
public void Logoff(Guid sessionId)
{
    new X.Authentication().Logoff(sessionId);
} 
```

先感谢您

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:08:21.953

不确定这是否是原因，但在我的 APIController 中，AcceptVerbs 属性位于不同的命名空间中：

```
System.Web.Http.AcceptVerbs 
```

和属性在同一个命名空间`[HttpGet]`中`[HttpPost]`

我在同一个项目中有许多常规的 MVC 控制器；他们使用您上面描述的命名空间，但不使用 API 控制器

试试这个：

```
[System.Web.Http.AcceptVerbs("GET")]
public Guid Logon(string username, string password)
{
    return new X.Authentication().Logon(username, password);
}

[System.Web.Http.AcceptVerbs("POST")]
public void Logoff(Guid sessionId)
{
    new X.Authentication().Logoff(sessionId);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:12:32.453

如果您以 Get、Post、Put 或 Delete**开始**操作名称， ASP.NET Web API 将尝试*猜测方法。*例如：

 **```
public void DeleteItem(int id)
{
    ...
} 
```

将起作用，系统将发现它将由 DELETE 触发。

作为向后兼容性，`[HttpGet]`支持 etc 属性。**

# javascript - 如何替换某些回车换行符，后跟破折号 ？

> ID：10519489
> 
> 赞同：3
> 
> 时间：2012-05-09T15:45:08.830
> 
> 标签：javascript, jquery, replace, html-table, linefeed

如何使用 javascript 或 jQuery 替换网页中 TD 元素内的文本中的序列 ASCII 13 ASCII 10 - (CR LF DASH 或 /r/n-)？在 stackoverflow 和其他地方也有类似的问题，但列出的解决方案不适用于这种特定情况。传入的 HTML 是由我的客户的一个不会更改的旧软件动态生成的，但它引用了一个我可以更改的 javascript 文件。下面给出了该页面的简化版本。实际页面包含零到二十行数据，其中一些包含多行。我的用户在 Internet Explorer 8 上，以下两行都不起作用。我试过只替换回车并替换换行符。我已经从 javascript 和 jQuery 尝试过这个，没有任何明显的效果。当我从 Internet Explorer 8 保存页面并在十六进制编辑器中查看它时，客户端中存在回车符和换行符。问题的症结在于将文本中的 /n 暴露给 JavaScript。

我想执行此替换，因为我希望在元素页面中存在序列 /r/n- 的任何时候，两行文本都出现在显示的输出中。

请注意，我已经包含了两个版本的替换，一个 jQuery 和一个 JavaScript。我想要它做的也没有。

```
 <html>
    <head>
    <title>Page Testing </title>
    <script src="js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            $('td').each(function () {
                $this = $(this);
                $this.html($this.html().replace(/\r\n\-/g, "<br/>-"));
                this.innerHTML = (this.innerHTML.replace(/\r\n\-/g, "<br/>-"));
            });
        });
    </script>
    </head>
    <body>
    <table>
    <tbody>
    <tr>
     <td>-First Content
    -Second Line of Content</td>
    <td>-How I want it to look<br/>-After the transformation</td>
    </tr>
    </tbody>
    </table>
    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T23:28:38.993

您的问题是说您只关心在单独的行上显示它们，而不是特别关心替换 \r\n。

你可以考虑用css来解决这个问题。

```
<style>
    tr {
        white-space:pre-line;
    }
</style> 
```

[看看不同的空白值是如何工作的。](http://www.quirksmode.org/css/whitespace.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:56:09.213

这适用于您的特定情况：

```
$this.html($this.html().replace(/\s+\-/g, "<br /> -")); 
```

它不是查找 CRLF 字符，而是使用任何空格，后跟一个破折号。如果您的内容*中有空格*后面的破折号，它们也会添加 br 标签。

对于换行符，IE 8 有一些奇怪的行为。如果我得到解释，我会更新这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T15:48:37.677

你可以试试

```
$this.html().replace(/[\n\r]+\-/g, "<br/>-") 
```

它替换了换行符和回车符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:52:58.953

你只是替换\n-，但你说你试图替换的字符序列是\r\n-

尝试将 \r 放入替换表达式中。

\r 字符虽然不是通常支持的 windows/linux 换行符，但通常仍会在试图迎合所有人的浏览器/源查看器中显示为换行符。

# ruby - 获取每个 tr 然后是前两个 td

> ID：10519495
> 
> 赞同：0
> 
> 时间：2012-05-09T15:45:45.227
> 
> 标签：ruby, nokogiri

我使用 Nokogiri 作为一个简单的示例来获取邮政编码的市政税带 (http://www.voa.gov.uk/cti/InitS.asp?lcn=0)

这是我目前拥有的代码：

```
 a = Mechanize.new{ |agent|  agent.user_agent_alias = 'Mac Safari'}
 a.get('http://www.voa.gov.uk/cti/InitS.asp?lcn=0') do |page|
      form = page.form_with(:id => "frmInitSForm")
      form.txtPostCode = "NN15 6UA"
      page = a.submit form

      page.search("tr").each do |tr|
        textF = tr.text.strip
        textF.gsub!(/[\n]+/, "\n")
        puts textF

      end

    end
  end 
```

目前这会打印出里面的所有文本`tr`

然后我需要在里面`do`类似的东西

```
tdFirst = tr.children("td:first").text
tdSecond = tr.children("td:nth-child(2)").text 
```

我如何获得`first`和`second`td？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:00:52.337

在您的内部块中，尝试

```
tdFirst, tdSecond = tr.xpath('td')[0,2].map {|td| td.inner_text.strip}
puts "%s; %s" % [tdFirst, tdSecond] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:55:24.467

使用 nokogiri 时，如果你已经有了`tr`，那么你可以使用

```
tds  = tr.xpath('td')
first = tds[0].text
second = tds[1].text 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-11T18:24:20.263

比获取所有 TDs 然后削减它更好，您可以像这样使用 XPath：

```
td1, td2 = tr.xpath('td[1 or 2]').map(&:text).map(&:strip) 
```

或 CSS：

```
td1, td2 = tr.css('td:nth-child(1),td:nth-child(2)').map(&:text).map(&:strip) 
```

# entity-framework - 首先将外键关系添加到实体框架数据库

> ID：10519497
> 
> 赞同：1
> 
> 时间：2012-05-09T15:45:49.707
> 
> 标签：entity-framework, ado.net, mapping, asp.net-3.5, one-to-many

**我在TSQL**中有一个数据库，我使用**.NET 3.5 中的 ADO.NET Entity Framework**来创建匹配的实体。

在数据库中，关系没有被建模，但在关系中涉及的每个表中，都有一个字段表示另一个表的主键的**外键。**

例如（假设一个`Product`可以只有一个类别）：

```
Product ( ProdId(PK), ProdName, CatId(FK))

Category (CatId(PK), CatName) 
```

这种方式当然**没有参照完整性**约束。

在我的应用程序中，我从数据库生成 EF 实体，然后手动添加关系及其映射。**除了一对多的**关系，一切都很顺利。

**为多对多**关系指定的映射（通过关联表）不会给出任何类型的错误，为**一对多指定的映射**

> 错误 3007：映射片段时出现问题：列 [foreign_key] 在两个片段中都被映射到不同的概念侧属性。

现在我检查了**映射**，我改变了**基数**和**方向**，但它仍然不起作用。

我在互联网上读到我应该删除外键但是，我怎样才能映射数据库中的值？还有其他解决方案吗？

重要提示：我不能使用 .NET 4.0 我必须坚持使用 .NET 3.5

# windows-phone-7 - 在 Windows Phone 7 上需要小帮助

> ID：10519499
> 
> 赞同：0
> 
> 时间：2012-05-09T15:45:53.957
> 
> 标签：windows-phone-7

我正在创建一个应用程序.. 我面临一个小问题。我想得到这个东西...我有一个单选按钮。现在，只要单击此单选按钮，我就想循环播放一小段音乐。我正在使用 Visual Studio .. 无法使用表达式。我正在使用以下代码..

```
public partial class Page3 : PhoneApplicationPage
    {

        private SoundEffect s1;

        public Page3()
        {
            InitializeComponent();
            GameTimer gameTimer = new GameTimer();
            gameTimer.UpdateInterval = TimeSpan.FromMilliseconds(10000);

            // Call FrameworkDispatcher.Update to update the XNA Framework internals.
            gameTimer.Update += delegate { try { FrameworkDispatcher.Update(); } catch { } };

            // Start the GameTimer running.
            gameTimer.Start();

            // Prime the pump or we'll get an exception.
            FrameworkDispatcher.Update();

            LoadSound("Views/1.wav", out s1);

        }

        private void LoadSound(String SoundFilePath, out SoundEffect Sound)
        {
            // For error checking, assume we'll fail to load the file.
            Sound = null;

            try
            {
                // Holds informations about a file stream.
                StreamResourceInfo SoundFileInfo = App.GetResourceStream(new Uri(SoundFilePath, UriKind.Relative));

                // Create the SoundEffect from the Stream
                Sound = SoundEffect.FromStream(SoundFileInfo.Stream);
            }
            catch (NullReferenceException)
            {
                // Display an error message
                MessageBox.Show("Couldn't load sound " + SoundFilePath);
            }
        }

        private void radioButton1_Checked(object sender, RoutedEventArgs e)
        {

                try
                {
                    s1.Play();
                }
                catch (NullReferenceException)
                {
                    MessageBox.Show("Can't play, s1 is null.");
                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:50:53.963

这是我用来播放声音的代码，它有效：

```
private void PlaySound()
{
    Stream stream = TitleContainer.OpenStream("Media/Sounds/SomeFile.wav");
    SoundEffect effect = SoundEffect.FromStream(stream);
    FrameworkDispatcher.Update();
    effect.Play();
} 
```

此外，请确保您的声音文件被标记为内容。

# javascript - 如何在生态模板中打印_each方法的结果

> ID：10519502
> 
> 赞同：2
> 
> 时间：2012-05-09T15:46:13.977
> 
> 标签：javascript, coffeescript, underscore.js, eco

我确定我做错了很简单，但似乎找不到解释。我的模板中有以下行，它没有将任何值打印到 html 输出：

```
 <%= _.each(@place.get("hash"),(count, tag) -> "#{tag} ") %> 
```

此行将值打印到控制台非常好：

```
 <%= _.each(@place.get("hash"),(count, tag) -> console.log "#{tag} ") %> 
```

当我尝试使用打印命令并刷新时，谷歌浏览器会弹出一个打印菜单。我该如何解决这个问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T17:03:59.460

除了有用的 Underscore 方法 mu is too short[提到](https://stackoverflow.com/a/10520067/581845)之外，你还可以`for of`在 Eco 中使用 CoffeeScript 的 native：

```
<% for tag of @place.get("hash"): %>
  <%= tag %>
<% end %> 
```

如果您需要在每个元素周围添加一些标记，这可能很有用。例如：

```
<ul>
  <% for tag of @place.get("hash"): %>
    <li><%= tag %></li>
  <% end %>
</ul> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T16:18:19.520

下划线[`each`](https://github.com/documentcloud/underscore/blob/master/underscore.js#L74)不返回任何东西，所以`<%= _.each(...) %>`没有做任何有用的事情。你可以使用[`_.map`](http://underscorejs.org/#map)and [`join`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/join)：

```
<%= _(@place.get('hash')).map((count, tag) -> tag).join(' ') %> 
```

或者你可以使用[`_.keys`](http://underscorejs.org/#keys)and [`join`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/join)：

```
<%= _(@place.get('hash')).keys().join(' ') %> 
```

您`_.each`只是在提取密钥，因此您应该说出您的意思。

如果您使用的是 node.s，那么您也应该拥有[`Object.keys`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/keys)：

```
<%= Object.keys(@place.get('hash')).join() %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-05T09:59:05.580

这是一个使用下划线方法迭代哈希的示例`_.each`：

给定哈希：

```
articlesByMonth = {'2014-07': [{id: 1, title: 'foo'}, {id: 2, title: 'bar'}]} 
```

结合模板：

```
<ul>
  <% _.each articlesByMonth, (articles, month) =>: %>
    <%= month %>
    <ul>
      <% _.each articles, (article) =>: %>
        <li><%= article.title %></li>
      <% end %>
    </ul>
  <% end %>
</ul> 
```

# php - 用于 HTML 输入值的 php 变量字符串中 if isset 的正确连接

> ID：10519509
> 
> 赞同：1
> 
> 时间：2012-05-09T15:46:47.343
> 
> 标签：php, html

我有一个变量 $RepCom，如果它是 set，我希望它是输入 RepCom 的值。

我正在尝试找出正确的方法来完成这项工作......

```
$x_RepCom = '<input name="RepCom" type="text" value="'. if(isset($RepCom)){echo $RepCom; }.'">'; 
```

只是转储变量很好，但如果没有设置，我会得到一个未定义的错误。

```
 $x_RepCom = '<input name="RepCom" type="text" value="'.$RepCom.'">'; 
```

那么如何将 $RepCom 的 if isset 放入输入的值中呢？

我试过...

```
$x_RepCom = '<input name="RepCom" type="text" value="<?php if(isset($RepCom)){echo $RepCom; }?>">'; 
```

但这只是将字符串转储`<?php if(isset($RepCom)){echo $RepCom; }?>`到值中。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:48:54.660

你有正确的想法，你只是有错误的实施。

```
$RepComPrint = (isset($RepCom)) ? $RepCom : '';
$x_RepCom = '<input name="RepCom" type="text" value="'.$RepComPrint .'">'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T15:50:36.607

您可能希望将值作为变量：

```
if(!isset($RepCom))
    $RepCom='';

$x_RepCom = '<input name="RepCom" type="text" value="'.$RepCom.'">'; 
```

现在如果没有设置，它将被赋予一个空字符串的值，这将防止未定义的错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T15:55:52.720

你是函数式程序员吗？您编写的代码 ( `$x_RepCom = '<input name="RepCom" type="text" value="<?php if(isset($RepCom)){echo $RepCom; }?>">';`) 让我想起了如何在 Scheme 或 Haskell 中实现它。

PHP 的重要之处在于，像`if`它这样的控制结构不只是返回一个值；您不能将其任意插入代码中。

您必须在 PHP 中执行此操作的方式类似于

```
$x_RepCom = '<input name="RepCom" type="text" value="';
if(isset($RepCom)) { $x_RepCom .= $RepCom; }
$x_RepCom .= '>'; 
```

（为了清楚起见，写了很长的路）

# arrays - 在具有重复元素的数组中查找最大值

> ID：10519511
> 
> 赞同：3
> 
> 时间：2012-05-09T15:46:52.010
> 
> 标签：arrays, algorithm

两天前的一次采访中，我遇到了一个关于最佳地找到数组中的最大元素的问题，我对此有疑问。

面试官描述的数组由可能**重复**的整数值组成（不一定在连续的位置），它也由两部分组成（一部分可能为空）：第一部分按*非递减*顺序，第二部分按*非递增*顺序顺序，即如果a[n]是一个由n个整数值组成的数组，那么，a[i]<=a[i+1],i in [1,m] and a[j]>=a[j+ 1],j in [m,n] 和 m 介于 1 和 n 之间。现在，他们要求我以最有效的方式找到**数组中的最大值。**

我认为，由于某些元素可能会重复，因此我不能使用分而治之的策略来元素搜索空间。如果所有元素都不同，我们将能够使用*二分搜索在**lg n*时间内找到最大值。但是至少存在一个输入序列（可能当所有元素都相同时），我们至少需要对其进行 n-1 比较才能判断哪个元素最大。

 *面试官让我想一想能不能对输入做一些限制，让问题能在*lg n*时间内解决。我当时没能解决，还在思考。

如果您能帮助我思考，那将很有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T15:49:23.917

面试官想看看你是否知道[三元搜索](http://en.wikipedia.org/wiki/Ternary_search)：如果你要求部分严格递增然后严格递减，你就能得到答案`Log3(N)`。因此，面试官寻找的附加要求可能是重复条目（如果有）应该出现在升序-降序切换点的不同侧。*

# c# - 基于接口的设计和可选的方法参数

> ID：10519521
> 
> 赞同：1
> 
> 时间：2012-05-09T15:47:20.820
> 
> 标签：c#, .net, design-patterns, interface

我正在为新的 Web API 创建一个 C# 包装器库。

该服务提供了一组 API，其中每个方法接收几个强制参数和几个可选参数（每个方法可能接收不同的强制/可选参数）。

参数在 POST 方法中发送，作为一个长字符串 param=value¶m2=value2&....

已经习惯了基于界面的设计——在这种情况下是否合适？

我找不到一个好的解决方案来将所有 API 方法和参数映射到单个接口中，而不会创建方法重载，造成大混乱，这会使用户更难使用。

它的外观示例：

```
public interface IServiceAPI
{
    void MethodA(string mandatory, string mandatory2);
    void MethodA(string mandatory, string mandatory2, int optional);
    void MethodB(string mandatory);

    ... etc
} 
```

*   我知道在 .NET 4 中引入的可选参数。这不是一个好的解决方案，因为这个库是针对较低版本的 .NET，而且因为“可选参数”实际上只是一种设置默认值的方法，并且不是为了不发送参数的任何值。

基于接口的设计可能适合这里吗？或者换一种说法——基于界面的设计最适合哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:55:54.483

首先，我不认为设计一个有很多重载的接口是一个好主意。除非函数做一些*不同*的事情，否则你应该把它留给使用接口的人，如果他们想输入一些默认值。

也就是说，其次，您正在编写的实体似乎可以更好地作为基类为您服务。ServiceAPI 这个名字至少暗示了一些标准功能。通过这种方式，您可以拥有多个重载，并让任何子类覆盖主要方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:00:33.843

接口是正确的方法，但我认为您使用了错误的方法。我将创建一个 IOptionalParameter 接口，如下所示：

```
interface IOptionalParameter<T>
{
    public bool IsSet {get;}
    public T Value {get;}
} 
```

然后你可以在你的 API 中只公开一个方法，每个参数都是 IOptionalParameter 类型。

这也将使您用于构建 url 请求字符串的代码更整洁。如果有意义，您也可以将 Name 属性添加到接口，从而进一步简化它。

**更新**

总结三种不同的方法以及它们之间的权衡：

1.  重载 - 参数是可选的更清楚，但会导致实现中的潜在差异混淆并使实现有点混乱
2.  可空类型 - 不是很清楚参数是可选的，但在实现方面更清晰
3.  IOptionalParameter - 明确声明参数是否可选，实现很干净，但从客户端调用很糟糕

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-12T00:37:11.837

看来您的方法往往有多个参数。根据我的经验，3 个参数应该是最大的。为了解决这个问题（并作为副作用找到可选/必需参数的解决方案），我建议将参数打包到一个类中：

```
class MethodAParameters
{
    public string Required1 {get;set;} //add validation in setter (nulls are not allowed)
    public string Required2 {get;set;} //add validation in setter (nulls are not allowed)
    public int? Optional1 {get;set;} //nulls allowed

    public MethodAParameters(string required1, string required2)
    {
        Required1 = required1;
        Required2 = required2;
    }
} 
```

如您所见，这样的设计强制传递必需的参数（您不能在不指定参数的情况下创建参数实例）并允许添加可选参数。当然，如果某些方法共享相同的参数子集，那么您应该继承参数类。

如果空值也相关，那么前面提到的 IOptionalParameter 似乎是必要的（结合这个参数类方法）。

请记住，您的代码应该是[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)。当我查看您提供的示例时，我担心单一责任原则。当然，在不知道实际代码的情况下，我只是在猜测，所以将其视为一条建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T15:56:20.520

可空数据类型？

例如，而不是

```
void MethodA(string mandatory, string mandatory2);
void MethodA(string mandatory, string mandatory2, int optional); 
```

您可以将其简化为

```
void MethodA(string mandatory, string mandatory2, int? optional); 
```

但是，如果可选参数是引用类型，那么调用者可能不会那么明显地知道他们可以将 null 传递给它。

如果您有很多可选参数，例如 v`oid MethodC(string mandatory, string mandatory2, string optional1, int? optional1, string optional2);`您不想为所有可能的组合提供签名，您可以简单地提供：

```
MethodC(string mandatory, string mandatory2) // for people that just want the basic functionality
MethodC(string mandatory, string mandatory2, string optional1, int? optional1, string optional2); // for people that want to specify extra, and they can pass null for some of the optional ones if they like. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T05:05:29.443

我不确定您为什么要将其作为接口而不是常规类。其他类会实现此接口，还是您只是在寻找访问 API 的标准方式？

如果您只是在寻找访问 API 的标准方法，我建议您对构建器模式进行变体。构建器模式通常用于类，但我不明白为什么它也不能用于方法。有关几个基于类的示例，请参见[http://cdmckay.org/blog/2009/07/03/joshua-blochs-builder-pattern-in-csharp/ 。](http://cdmckay.org/blog/2009/07/03/joshua-blochs-builder-pattern-in-csharp/)

鉴于您提供的内容，这是我的尝试。如果有语法错误我很抱歉，我家的编辑器有点缺乏......

```
public class AccessServiceAPI
{
    private void MethodA(string mandatory, string mandatory2, string optional)
    {
        // do stuff
    }

    public class MethodABuilder
    {
        private string Mandatory { get; set; }
        private string Mandatory2 { get; set; }
        private string Optional { get; set; }

        public MethodABuilder( string mandatory, string mandatory2)
        {
            Mandatory = mandatory;
            Mandatory2 = mandatory;
            Optional = "default value";
        }

        public MethodABuilder Optional( string optional )
        {
            Optional = optional;
            return this;
        }

        public void Build()
        {
            MethodA(mandatory, mandatory2, optional);
        }
    }
} 
```

然后客户端会像这样调用该方法：

```
MethodABuilder.Builder(mandatory, mandatory2).Optional(optional).Build(); 
```

如果他们不想为可选参数设置值，他们可以跳过它。

# ios - ios下载mp4文件的问题

> ID：10519522
> 
> 赞同：0
> 
> 时间：2012-05-09T15:47:23.777
> 
> 标签：ios, nsurlconnection, nsdata, mp4, writetofile

我已经建立了一个连接以[将此 mp4 剪辑](http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4)下载到我的设备，并且我正在使用以下委托函数以“流”类型的方式存储数据。

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data 
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"BuckBunny.mp4"];

    [data writeToFile:filePath atomically:YES];
} 
```

但是，当5.3M​​B的文件下载完成后，我检查了保存文件的大小，它只有1KB，因此无法播放。我只是保存一小部分而不是我想要的全部吗？我需要做些什么不同的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:08:57.723

您需要在收到数据时连接数据。查看 NSMutableData 对象。数据完成后，将逻辑放入 connectionDidFinishLoading 委托方法中。

使用此示例，其中 receivedData 是您在开始下载之前初始化的属性。

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [receivedData appendData:data];
}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *filePath = [documentsDirectory stringByAppendingPathComponent:@"BuckBunny.mp4"];

    [receivedData writeToFile:filePath atomically:YES];
    [connection release];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-08T15:26:08.460

上面的答案将在下载时将整个视频保存在内存中。虽然这对于小视频可能很好，但不能用于较大的视频。您可以将数据附加到本地驱动器上的文件中，如下所示：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    NSFileHandle *handle = [NSFileHandle fileHandleForWritingAtPath:self.path];
    [handle seekToEndOfFile];
    [handle writeData:data];
} 
```

# c# - 为什么关闭我的启动画面会导致我的主窗口从不显示？

> ID：10519525
> 
> 赞同：2
> 
> 时间：2012-05-09T15:47:30.563
> 
> 标签：c#, wpf, startup, splash-screen

我在我的 App.xaml.cs 中重写了 OnStartup 方法，如下所示。但是，一旦我添加了启动画面关闭，我的主窗口就永远不会显示。调试器到达 main.Show() 行，但在完成执行后，应用程序关闭。有任何想法吗？

```
 protected override void OnStartup(StartupEventArgs e)
{
   base.OnStartup(e);

   SplashWindow splash = new SplashWindow();
   splash.Show();

   System.Threading.Thread.Sleep(5000);
   splash.Close();

   MainWindow main = new MainWindow();
   main.Show();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T15:52:17.100

因为默认值为[`ShutdownMode`](http://msdn.microsoft.com/en-us/library/system.windows.application.shutdownmode.aspx)，`OnLastWindowClose`所以当您关闭初始屏幕时，程序会退出。您可以通过在调用 base.OnStartup 后添加以下代码来更改此设置

```
this.ShutdownMode = ShutdownMode.OnMainWindowClose; 
```

如果这仍然不起作用，则将其设置为`OnExplicitShutdown`可能会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T15:52:57.910

Show方法打开 a[而不](http://msdn.microsoft.com/en-us/library/system.windows.window.show.aspx)`Window`等待它关闭。

您应该使用应用程序的[ShowDialog](http://msdn.microsoft.com/en-us/library/system.windows.window.showdialog.aspx)方法来停止执行，直到应用程序关闭。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:01:14.053

另一种解决方案是先加载主窗口，但将其可见性属性设置为隐藏。然后从那里启动您的启动画面，一旦它关闭，将可见性更改回可见。

# shell - 使用 AWK 合并两个数据集

> ID：10519530
> 
> 赞同：2
> 
> 时间：2012-05-09T15:47:47.267
> 
> 标签：shell, merge, awk

我有 2 个数据文件：`file01`和`file02`. 在这两个数据集中，字段是： (i) 标识符；(ii) 数字参考；(iii) 经度；(iv) 纬度。对于 中的每一行`file01`，我想`file02`使用相同的数字引用来搜索数据，然后找到`file02`最接近 中的标识符的标识符`file01`。

如果我`file01`使用以下代码将值手动传递给 awk 程序，我可以得到这个：

```
awk 'function acos(x) { return atan2(sqrt(1-x*x), x) }
BEGIN {pi=3.14159;
       ndist=999999999.1;
       date=1001;
       lo1=-1.20; lg1=lo1*(pi/180);
       la1=30.31; lt1=la1*(pi/180)
           }
{if($2==date) {ws=$1;
               lg2=$3*(pi/180);
               lt2=$4*(pi/180);
               dist= 6378.7 * acos( sin(lt1)*sin(lt2) + cos(lt1)*cos(lt2)*cos(lg2-lg1) );
               if(dist < ndist) {ndist=dist; ws0=ws}}}
END {print(ws0,ndist)}' file02
```

如您所见，`date`语句中的`lo1`和`la1`是`BEGIN`第 1 行中的值`file01`（请参阅下面的数据文件）。我的问题是我是否可以一次做到这一点，所以每次我在 中读取一行时`file01`，我都会获得最近的标识符和距离并附加到 中的行数据`file01`。我不知道某些 shell 命令是否可以以更简单的方式实现这一点，也许使用管道。

这两个数据文件的示例和所需的输出是：

=== 文件01 ===

```
A 1001 -1.2 30.31
A 1002 -1.2 30.31
B 1002 -1.8 30.82
B 1003 -1.8 30.82
C 1001 -2.1 28.55 
```

=== 文件02 ===

```
ws1 1000 -1.3 29.01
ws1 1001 -1.3 29.01
ws1 1002 -1.3 29.01
ws1 1003 -1.3 29.01
ws1 1004 -1.3 29.01
ws1 1005 -1.3 29.01
ws2 1000 -1.5 30.12
ws2 1002 -1.5 30.12
ws2 1003 -1.5 30.12
ws2 1004 -1.5 30.12
ws2 1005 -1.5 30.12
ws3 1000 -1.7 29.55
ws3 1001 -1.7 29.55
ws3 1002 -1.7 29.55
ws3 1003 -1.7 29.55
ws3 1004 -1.7 29.55
ws3 1005 -1.7 29.55
ws4 1000 -1.9 30.33
ws4 1001 -1.9 30.33
ws4 1002 -1.9 30.33
ws4 1003 -1.9 30.33
ws4 1004 -1.9 30.33
ws4 1005 -1.9 30.33 
```

=== 输出文件 ===

```
A 1001 -1.2 30.31 ws4 67.308
A 1002 -1.2 30.31 ws2 35.783
B 1002 -1.8 30.82 ws4 55.387
B 1003 -1.8 30.82 ws4 55.387
C 1001 -2.1 28.55 ws1 85.369 
```

**编辑#1：**考虑到@Eran 的建议，我编写了以下代码：

```
join -j 2 < (sort -k 2,2 file01) < (sort -k 2,2 file02) |
awk 'function acos(x) { return atan2(sqrt(1-x*x), x) }
     BEGIN {pi=3.14159}

     {if (last != $1 $2)
         {print NR, id,r,lon,lat,ws0,ndist;
          last = $1 $2;
          ndist=999999999.1

         } else {

          lg1=$3*(pi/180);
          lt1=$4*(pi/180);
          lg2=$6*(pi/180);
          lt2=$7*(pi/180);
          dist= 6378.7 * acos( sin(lt1)*sin(lt2) + cos(lt1)*cos(lt2)*cos(lg2-lg1) );
          if(dist< ndist) {ndist=dist; ws0=$5}
          id=$2;r=$1;lon=$3;lat=$4

          }
     }' 
```

该脚本的输出是：

```
1      
4  A 1001 -1.2 30.31 ws4 67.3078
7  C 1001 -2.0 28.55 ws3 115.094
11 A 1002 -1.2 30.31 ws2 35.7827
15 B 1002 -1.8 30.82 ws4 55.387 
```

**编辑#2**：使用@Dennis 的建议（经过一些修改），我得到了所需的输出。awk 脚本如下：

```
 awk 'function acos(x) { return atan2(sqrt(1-x*x), x) }
     BEGIN {pi=3.14159}
     NR==FNR {c++; a1[c]=$1;a2[c]=$2;a3[c]=$3;a4[c]=$4; next}
             {d++; b1[d]=$1;b2[d]=$2;b3[d]=$3;b4[d]=$4}

     END {
     for(k=1;k<=c;k++) {
         lg1=a3[k]*(pi/180);
         lt1=a4[k]*(pi/180);
         ndist=999999999.1;
         for(l=1;l<=d;l++) {
             if(b2[l]==a2[k]) {kk=b2[l];
                lg2=b3[l]*(pi/180);
                lt2=b4[l]*(pi/180);
                dist= 6378.7 * acos( sin(lt1)*sin(lt2) + cos(lt1)*cos(lt2)*cos(lg2-lg1) );
                if(dist<ndist) {ndist=dist; ws0=b1[l]}
             }
         }
         print a1[k],a2[k],a3[k],a4[k],ws0,ndist
     }
    }' file01 file02 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:04:23.843

将您的值从 file01 读入一个或多个数组。您可以`getline`在`BEGIN`块中使用，或者规范的方式是使用`FNR == NR`循环作为主要块之一。

```
FNR == NR {array[$1] = $1; ...; next } # read file01 into some arrays
{ for (item in array) { ... }     # process each item in the array(s) against each line in file02 
```

您的脚本将被调用为`awk '...' file01 file02`

`array1[c] = $1; array2[c] = $2; c++`您可以使用计数器索引它们并使用计数器迭代而不是使用`in`: ，而不是按字段值索引数组`for (i=0; i<c; i++)`。

当然，您应该选择有意义的数组名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:47:06.057

有趣的挑战。由于您必须先读取 file02 并将信息存储在数据结构中，所以我首先倾向于 Perl。

```
#!/usr/bin/perl
use strict;
use warnings;

# see http://perldoc.perl.org/Math/Trig.html
use Math::Trig qw(great_circle_distance deg2rad);
sub NESW {deg2rad($_[0]), deg2rad(90-$_[1])}

# read file02
my %data;
my $file2 = 'file02';
open my $fid, '<', $file2 or die "can't read $file2: $!\n";
while (<$fid>) {
    my ($id, $ref, $long, $lat) = split;
    push @{$data{$ref}}, [$id, $long, $lat];
}
close $fid;

$, = " ";

# process file01
my $file1 = 'file01';
open $fid, '<', $file1 or die "can't read $file1: $!\n";
while (<$fid>) {
    my ($id, $ref, $long, $lat) = split;
    my @here = NESW($long, $lat);
    my $min = 99_999_999;
    my (@min_id, $dist);

    while (my ($key, $listref) = each %data) {
        next unless $key == $ref;

        foreach my $trioref (@$listref) {
            my ($other_id, $other_long, $other_lat) = @$trioref;
            my @there = NESW($other_long, $other_lat);
            $dist = great_circle_distance(@here, @there, 6378.7);
            if ($dist < $min) {
                $min = $dist;
                @min_id = @$trioref;
            }
        }
    }

    printf "%s %d %s %s %s %6.3f\n", $id, $ref, $long, $lat, $min_id, $min;
}
close $fid; 
```

这输出

```
A 1001 -1.2 30.31 ws4 67.308
A 1002 -1.2 30.31 ws2 35.783
B 1002 -1.8 30.82 ws4 55.387
B 1003 -1.8 30.82 ws4 55.387
C 1001 -2.1 28.55 ws1 93.361 
```

我注意到“C”距离与您建议的距离不同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T05:13:14.577

要立即执行，请运行

```
join -j 2 <(sort -k 2,2 file01) <(sort -k 2,2 file02) 
```

并将其通过管道传输到 awk，在每次更改引用时执行计算：

```
gawk '{if (last != $1 $2) {calc_nearest_on_array; last=$1 $2; add_point_to_array} else {add_point_to_array}}' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-11T07:09:27.663

发射器：

```
@(do
   (defvar pi 3.1415926535)
   (defvar earth-radius 6378.7)
   (defun rad (deg) (/ (* deg pi) 180))
   (defun sphere-distance (lat0 lon0 lat1 lon1)
     (let ((lat0 (rad lat0)) (lat1 (rad lat1))
           (lon0 (rad lon0)) (lon1 (rad lon1)))
       (* earth-radius (acos (+ (* (sin lat0) (sin lat1))
                                (* (cos lat0) (cos lat1) (cos (- lon1 lon0)))))))))
@(next "file01")
@(collect)
@id @ref @lon0 @lat0
@  (filter :tonumber lon0 lat0)
@  (next "file02")
@  (bind (min-dist ws) (1e99 nil))
@  (collect)
@ws1 @ref @lon1 @lat1
@    (filter :tonumber lon1 lat1)
@    (do (let ((d (sphere-distance lat0 lon0 lat1 lon1)))
           (cond ((< d min-dist)
                  (set min-dist d)
                  (set ws ws1)))))
@  (end)
@  (do (format t "~a ~a ~0,2f ~0,2f ~a ~0,3f\n" id ref lon0 lat0 ws min-dist))
@(end) 
```

跑：

```
$ txr dist.txr
A 1001 -1.20 30.31 ws4 67.308
A 1002 -1.20 30.31 ws2 35.783
B 1002 -1.80 30.82 ws4 55.387
B 1003 -1.80 30.82 ws4 55.387
C 1001 -2.10 28.55 ws1 93.361 
```

# java - 自动获取中间证书的代码

> ID：10519533
> 
> 赞同：1
> 
> 时间：2012-05-09T15:47:56.593
> 
> 标签：java, ssl, openssl, pyopenssl

安装 SSL 证书时，还应包括中间证书。

我处理了很多 SSL 证书，并且花费了大量时间来追踪链中的中间件。

我想编写自动获取中间体的代码。我使用python和java，我不太关心实现。（运行命令和解析输出或使用一些本机 API）。

在我看来，这是一个非常有用的算法，我相信有人已经写过它。

1.  是否有可以执行此操作的 openssl 命令？搜索它，但找不到。
2.  有没有更好的方法 - 使用 python / Java ..

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T16:02:37.263

> 我想编写自动获取中间体的代码

如果最终证书（即您尝试验证的证书）包含有关在证书扩展中（通过`http`或`LDAP`例如）在何处找到颁发者 CA 证书的信息，则可以这样做。 然后您可以下载该证书并继续相同的过程（即查看以获取颁发者的颁发者证书），直到您构建整个链以进行验证。 `AIA``X.509v3`
`AIA`

这当然意味着您已经有了一个`PKI`（不仅仅是自己创建证书，例如通过`OpenSSL`）

# tableview - javafx中的单元工厂

> ID：10519534
> 
> 赞同：12
> 
> 时间：2012-05-09T15:47:59.550
> 
> 标签：tableview, javafx

我正在使用 JavaFx 2.0 和 Java 7。问题是关于 JavaFX 中的表视图。

下面的示例代码创建一个 firstName 列并为其分配单元工厂和单元值工厂。

```
Callback<TableColumn, TableCell> cellFactory = 
new Callback<TableColumn, TableCell>() {
    public TableCell call(TableColumn p) {
        return new EditingCell();
} };

TableColumn firstNameCol = new TableColumn("First Name");
    firstNameCol.setCellValueFactory(
        new PropertyValueFactory<Person,String>("firstName")
    );
firstNameCol.setCellFactory(cellFactory); 
```

我的要求是我有一列不直接映射到 Person 对象中的单个属性，而是通过连接 Person 对象的一个​​或多个属性创建的自定义值。

考虑一个场景，我有一个名为 Full Name 的表列，其值为 Prefix + Last Name + "," + First Name 。

1）在这种情况下，你将如何编写单元格值工厂？

```
firstNameCol.setCellValueFactory(
            new PropertyValueFactory<Person,String>(???????)
        ); 
```

2）你将如何编写单元工厂？

在这种情况下，我们是否需要同时实现单元值工厂和单元工厂，或者任何一个就足够了？如果一个就足够了，那么哪一个？

谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-10T10:26:26.813

直截了当，

[单元格值工厂](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TableColumn.html#cellValueFactoryProperty%28%29)：它就像一个“toString()”，只是该相关单元格的行项目的一部分。
[Cell Factory](http://docs.oracle.com/javafx/2/api/javafx/scene/control/TableColumn.html#cellFactoryProperty%28%29)：它是来自单元格项目的单元格的渲染器。如果单元格项目不是 a `Node`，则默认行为是 setText(cell.item.toString()) ，否则为 setGraphic((Node)cell.item) 。如果单元格应该支持编辑，或者如果您想要除 default 之外的更多图形（控件），请设置此属性`Label`。

因此，对于您的场景，使用默认值离开单元工厂就足够了 (2)。这是（1）的示例代码：

```
firstAndLastNameCol.setCellValueFactory(new Callback<TableColumn.CellDataFeatures<Person, String>, ObservableValue<String>>() {

    @Override
    public ObservableValue<String> call(TableColumn.CellDataFeatures<Person, String> p) {
        if (p.getValue() != null) {
            return new SimpleStringProperty(p.getValue().getPrefix() + " " + p.getValue().getFirstName() + "," + p.getValue().getLastName());
        } else {
            return new SimpleStringProperty("<no name>");
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-08T12:17:03.017

您也可以只修改数据对象的 getter 方法。在您的情况下，这是 Person 类，它包含 firstName、lastName 和（大概）前缀。

向 Person 类添加一个新方法：

```
public String getTotalName() {
  return this.prefix + " " + this.getLastName() + ", " + this.getFirstName();
} 
```

然后只需应用 CellValueFactory：

```
totalNameCol.setCellValueFactory(
  new PropertyValueFactory<Person,String>("totalName")
); 
```

我发现这比使用回调更舒服。

# css - Blackberry Bold 浏览器 - h3（可点击元素） - 浏览器插入蓝色背景

> ID：10519539
> 
> 赞同：0
> 
> 时间：2012-05-09T15:48:13.557
> 
> 标签：css, blackberry, mobile

stackoverflow 上有另一个帖子，标题为“黑莓浏览器自动插入蓝色背景”。这与我所看到的非常相似，但并不完全相同。我尝试将修复“outline:none”应用于我的元素，但我仍然看到蓝色背景。

似乎在 Blackberry Bold 9650 浏览器中默认应用了蓝色背景。有没有办法使用 CSS 来覆盖它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:41:32.590

为我解决这个问题的是添加**大纲：0 none;** 到我的CSS。它似乎是“0”和“无”的组合。由于我没有要测试的实际设备，因此我使用 Device Anywhere 来重新创建问题。所以，我没能花很多时间弄清楚究竟是否覆盖了默认值。不过，我想让你们都知道它已经解决了。

# api - 如何设置代理并使用 browsermob-proxy 进行测试？

> ID：10519555
> 
> 赞同：1
> 
> 时间：2012-05-09T15:49:16.257
> 
> 标签：api, rest, batch-file, proxy

我提前道歉，因为我是一个完整的菜鸟，没有提出我应该提出的具体问题……但我不知道从哪里开始！

我已经安装了 browsermob-proxy，运行了 browsermob-proxy 批处理文件来启动代理……但现在不知道该去哪里！

这是我能找到的最好的教程...请滚动到 REST API 部分

[https://github.com/lightbody/browsermob-proxy](https://github.com/lightbody/browsermob-proxy)

我知道我需要通过 API 与应用程序通信......但我不明白示例命令使用什么语言（是 linux shell 脚本）？这个 API 可以在 jQuery 或任何其他具有 POST/PUT/DELETE 功能的语言中执行吗？如果是这样......这些命令如何翻译？有谁知道使用 browsermob-proxy 的更好方法？

任何见解都非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T07:03:52.090

示例使用 curl 调用 API。它只是各种平台上可用于发出 http（和其他）请求的命令行库。我认为 REST API 应该能够被大多数语言调用...我没有使用 jQuery 的经验。所以没有当然

我已将 browsermob-proxy 与 Selenium 一起使用，方法是将其作为依赖项添加到我的 maven 项目中，正如您所指的教程的后面部分中所强调的那样。

我没有调用 API，但我相信 Java 中应该有很多库可以调用 REST API。googlin 上的一些链接： [Java 中的 RESTful 调用](https://stackoverflow.com/questions/3913502/restful-call-in-java)

[用于调用 REST 服务的 Java API](https://stackoverflow.com/questions/1289704/java-api-for-invoking-rest-services)

希望它有助于回答您的部分问题..

# java - CreateProcess error=206, 运行 main() 方法时文件名或扩展名太长

> ID：10519558
> 
> 赞同：128
> 
> 时间：2012-05-09T15:49:24.370
> 
> 标签：java, eclipse

我在 eclipse helios 中有这个错误：

**执行命令行时发生异常。无法运行程序“C:\Program Files (x86)\Java\jre6\bin\javaw.exe”（在目录“C:\Users\motiver\helios_workspace\TimeTracker”中）：CreateProcess error=206，文件名或扩展名是太长**

我进行了一些研究，但大多数问题都与在 Google App Engine 上工作时的 DataNucleus 有关。但我没有使用任何与 Google App Engine 远程相关的东西。我在 JBOSS 6 上使用 Servlet 3.0 做一个小项目。我使用 Hibernate 4.1.2 for ORM 和 RESTEasy 来公开 Web 服务。我创建了一个具有 main() 方法的 util 文件，该方法基本上删除并重新创建架构。当我需要一个干净的数据库进行测试时，我会运行 main() 方法。它在 Tomcat 7 上运行良好，但当我迁移到 JBoss 6 时它停止工作。

任何提示或解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-15T09:42:10.330

这个问题没有简单的（如单击几下或简单的命令）解决方案。

引用[Eclipse.org 中此错误报告中](https://bugs.eclipse.org/bugs/show_bug.cgi?id=327193)的一些答案，这些是解决方法。选择一个对你来说最不痛苦的：

*   减少类路径
*   使用目录而不是 jar 文件
*   使用包含所有其他 jar 的打包 jar 文件，使用清单文件中的 classpath 变量指向其他 jar
*   使用从配置文件中读取类路径的特殊类加载器
*   尝试使用错误报告文档中的附加补丁之一
*   使用自己的包装器，例如 ant

**更新**：2014 年 7 月之后，有一个更好的方法（感谢[@Brad-Mace 在下面的回答](https://stackoverflow.com/a/23299746/106342)：

如果您已经创建了自己的构建文件而不是使用`Project -> Generate Javadocs`，那么您可以添加`useexternalfile="yes"`到 Javadoc 任务，该任务是专门为解决这个问题而设计的。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-04-25T17:47:14.750

如果您创建自己的构建文件而不是使用`Project -> Generate Javadocs`您可以添加`useexternalfile="yes"`到`javadoc`专门用于解决此问题的任务。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-06-08T13:53:36.443

我今天遇到了这个问题，我能够使用[这个 Gradle 插件解决它](https://plugins.gradle.org/plugin/ua.eshepelyuk.ManifestClasspath)

它的[github 网址是这个](https://github.com/eshepelyuk/gradle-util-plugins)

如果您像我一样不知道 Gradle 是什么，但需要运行后端来完成前端工作，您需要做的是找到正在调用的*build.gradle*文件以启动您的 BE 服务器并将其添加到顶端：

```
plugins {
  id "ua.eshepelyuk.ManifestClasspath" version "1.0.0"
} 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2020-02-10T05:06:01.243

[![**在此处输入图片描述**](../Images/dd1e00e42a57f13643e8defce228499a.png)](https://i.stack.imgur.com/NCm5Z.png)

在 intellij 中有一个“缩短命令行”选项，选择“JAR manifest”或“@argFiles”可以解决问题，基本上它会将你冗长的类路径放入 jar 文件或临时文件中

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2020-11-04T17:47:32.787

**我在尝试在IntelliJ 2020.2的****Hibernate / JPA 控制台**中执行**JPQL**查询时遇到了这个问题

 ****将此添加到我的**.idea/workspace.xml**修复它

```
<component name="PropertiesComponent">

...
     <property name="dynamic.classpath" value="true"/>

...

</component> 
```

解决方案出处：[https ://youtrack.jetbrains.com/issue/IDEA-166929?_ga=2.167622078.1290412178.1604511702-23036228.1574844686](https://youtrack.jetbrains.com/issue/IDEA-166929?_ga=2.167622078.1290412178.1604511702-23036228.1574844686)

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2012-05-15T22:18:19.307

在这里回答我自己的问题，这样解决方案就不会被评论所掩盖。我从 Eclipse 中将项目导出为可运行的 jar，并执行了命令行“java -jar MyJar.jar”，它运行良好

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-01-31T01:00:36.027

这不是专门针对 eclipse 的，但我解决这个问题的方法是创建一个指向我的 maven 存储库的符号链接并将其指向类似“C:\R”的东西。然后我将以下内容添加到我的 settings.xml 文件中：

```
<localRepository>C:\R</localRepository> 
```

Maven 存储库路径导致了我的 Windows 机器的长度问题。

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2013-04-18T22:50:34.870

尝试更新您的 Eclipse 版本，该问题最近已关闭（2013-03-12）。检查错误报告[https://bugs.eclipse.org/bugs/show_bug.cgi?id=327193](https://bugs.eclipse.org/bugs/show_bug.cgi?id=327193)

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-01-02T06:54:20.537

问题很旧，但仍然有效。每当有新成员加入我的团队或将新代码段添加到现有代码中时，我经常会遇到这种情况。我们遵循的简单解决方法是通过向上移动目录来“减少类路径”。

如问题所述，这并非特定于日食。我在 IntelliJ Idea 14 和 2018 中也遇到了这个问题。

经过长时间的研究，我发现解决方案是设置

> 叉=假

在 ant 构建文件的 javc 中。

```
<javac destdir="${build.dir}" fork="false" debug="on">
    <classpath .../>
    <src ... />
    <patternset ... />
</javac> 
```

这就是我的 ant build javac 现在的样子。要了解有关 fork 的更多信息，请[参阅 ant 文档。](https://ant.apache.org/manual/Tasks/javac.html)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2014-05-22T19:52:22.937

在错误报告[Bug 327193](https://bugs.eclipse.org/bugs/show_bug.cgi?id=327193)中，它被认为是已修复的，但它最近在 Eclipse Kepler 4.3.2 中发生在我身上。

请下载 Eclipse Juno 或更新版本的补丁：

[https://bugs.eclipse.org/bugs/attachment.cgi?id=216593](https://bugs.eclipse.org/bugs/attachment.cgi?id=216593)

1.  下载后备份现有的 eclipse/plugins/org.eclipse.jdt.launching_3.*.jar
2.  将补丁中的类复制并粘贴到 org.eclipse.jdt.launching JAR（替换现有文件）。
3.  重新启动 Eclipse。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2019-12-02T22:09:31.657

将以下内容添加到您的 gradle 文件中：

```
plugins {
`id "com.github.ManifestClasspath" version "0.1.0-RELEASE"       
} 
```

见[https://plugins.gradle.org/plugin/com.github.ManifestClasspath](https://plugins.gradle.org/plugin/com.github.ManifestClasspath)

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2020-08-07T19:21:15.950

上面有多少人伤心，有很多插件可以在这个问题中执行绕过，例如：

```
plugins {
  id "ua.eshepelyuk.ManifestClasspath" version "1.0.0"
} 
```

或者

```
plugins {
  id "com.github.ManifestClasspath" version "0.1.0-RELEASE"
} 
```

但我发现更好的解决方案是杀死 JVM 进程，一切都完成了。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2020-03-09T12:33:49.003

尝试在 build.gradle ( `gradle version 4.10.x`) 文件中添加它并检查它`com.xxx.MainClass`是你的 main 方法所在的类：

```
plugins {
  id "ua.eshepelyuk.ManifestClasspath" version "1.0.0"
}
apply plugin: 'application'
application {
    mainClassName = "com.xxx.MainClass"
} 
```

上述更改必须解决问题，使用`run.sh`下面的脚本还有另一种方法可以解决此问题，但更多的是命令行修复，而不是在 IntelliJ 中启动`gradle bootRun`。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2015-01-06T20:44:09.837

我在调用 Maven 时遇到了同样的错误。

我的问题的根本原因`classpath`是非常大。更新类路径解决了这个问题。

有多种方法可以更新大型类路径，如下所述：[如何在 Windows 中设置长 Java 类路径？](https://stackoverflow.com/questions/201816/how-to-set-a-long-java-classpath-in-windows)

1.  使用通配符
2.  参数文件
3.  路径罐

由于我使用的是 Intellij，它们提供了使用我使用的参数文件的选项。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-04-06T17:44:06.730

试试这个：

> java -jar -Dserver.port=8080 build/libs/APP_NAME_HERE.jar

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-05-31T10:00:42.463

要解决它：

如果您使用的是 Eclipse：

将 .m2 存储库移至

c:\ 转到 Eclipse > Windows/Preferences/Maven/User Settings -> 创建您自己的 setting.xml 及其内容：

```
<settings>
  <localRepository>c:/.m2/repository</localRepository>
</settings> 
```

如果您使用的是 IntelliJ：转到 IntelliJ > 在“pom.xml”上单击鼠标右键 > maven > 创建“settings.xml”

及其内容：

```
<settings>
      xmlns="yourcontent"
      xmlns:xsi="yourcontent"
      xsi:schemaLocation="yourcontent.xsd">
  <localRepository>c:/.m2/repository</localRepository>
</settings> 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-06-20T01:34:56.737

就我而言，显示错误是因为系统 java 版本与 intellijj/eclipse java 版本不同。系统和用户有不同的 java 版本。如果您使用一个版本编译代码并尝试使用不同版本运行，则会出错。 [![用户java版本为1.8](../Images/824b816d8117eb2d4f34c33485344e24.png)](https://i.stack.imgur.com/vdkKF.png)

```
#The system java version is 1.7.131
$ java -version
java version "1.7.0_131" 
```

长话短说，确保您的代码由相同的 java 版本编译和运行。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2020-05-06T13:08:46.430

我正在使用旧版本的 gradle 插件，[这个](https://github.com/viswaramamoorthy/gradle-util-plugins)插件为我解决了这个问题。

用法（查看来源了解更多详情）：

> 为 Gradle 2.1 及更高版本的插件 DSL 构建脚本片段
> 
> ```
> plugins {
>   id "com.github.ManifestClasspath" version "0.1.0-RELEASE"
> } 
> ```
> 
> 构建脚本片段以用于较旧的 Gradle 版本或需要动态配置的地方
> 
> ```
> buildscript {
>   repositories {
>     maven {
>       url "https://plugins.gradle.org/m2/"
>     }
>   }
>   dependencies {
>     classpath "gradle.plugin.com.github.viswaramamoorthy:gradle-util-plugins:0.1.0-RELEASE"
>   }
> }
> 
> apply plugin: "com.github.ManifestClasspath" 
> ```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2020-07-08T17:26:29.167

在 Windows 机器中，命令行中的 jar 文件名/路径长度存在限制，因此您会看到以下错误消息，我尝试了很多搜索，即使我尝试应用上述解决方案，出于某种原因，它没有用，我找到了 Gradle 的工作片段（gradle-4.10.2-all.zip）

**错误：**

`CreateProcess error=206, The filename or extension is too long`

使用下面`gradle.build`的代码片段来修复 IntelliJ 或 STS 中的上述问题，或者 eclipse 任何东西。

**Gradle 代码修复：**

```
apply plugin: 'application'

task pathingJar(type: Jar) {
    dependsOn configurations.runtime
    appendix = 'pathing'

    doFirst {
        manifest {
            attributes "Class-Path": configurations.runtimeClasspath.files.collect { it.getName() }.join(' ')
        }
    }
}

task copyToLib(type: Copy) {
    into "$buildDir/libs"
    from configurations.runtime
}

bootRun {
    systemProperties = System.properties
    //This below line is for if you have different profiles prod, dev etc...
    //systemProperty 'spring.profiles.active', 'dev'
    jvmArgs('-Djava.util.logging.config.file=none')
    mainClassName = "com.xxxx.Main"
    dependsOn pathingJar
    dependsOn copyToLib
    doFirst {
        classpath = files("$buildDir/classes/java/main", "$buildDir/resources/main", pathingJar.archivePath)
    }
} 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2013-05-02T14:55:31.253

这是因为 DataNucleus 有时会用许多路径覆盖参数。

你必须用这个覆盖它们：

**-enhancerName ASM -api JDO -pu MediaToGo**

希望能帮到你！

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-10-31T10:39:16.867

我得到了同样的错误。尝试了清理、重建、invalidateCache、重新启动等解决方案，但没有任何效果。

我刚刚创建了一个短名称的新文件夹，并将所有文件（app 文件夹、gradle 文件等）复制到新文件夹中。在 android studio 中打开应用程序并且工作正常。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-03-09T12:07:13.860

为了解决以下错误，我做了足够的研究，但没有得到任何好的解决方案，我准备了这个脚本，它运行良好，想与公众分享并利用它并节省时间。

> CreateProcess error=206, 文件名或扩展名太长

如果您使用的是 Gradle 构建工具，并且可执行文件位于应用程序的 build/libs 目录中。 `run.sh`-> 在你的项目的根目录下创建这个文件，把下面的脚本复制进去，然后进入 git bash 并输入 run.sh 然后回车。希望这可以帮助！

```
#!/bin/bash
dir_name=`pwd`
if [ $# == 1 ] && [ $1 == "debug" ]
then
    port=$RANDOM
    quit=0
    echo "Finding free port for debugging"
    while [ "$quit" -ne 1 ]; do
        netstat -anp | grep $port >> /dev/null
        if [ $? -gt 0 ]; then
            quit=1
        else
            port=`expr $port + 1`
        fi
    done
    echo "Starting in Debug Mode on "$port
    gradle clean bootjar
    jar_name="build/libs/"`ls -l ./build/libs/|grep jar|grep -v grep|awk '{print $NF}'`
    #java -jar -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=$port $jar_name 
elif [ $# == 1 ] && [ $1 == 'help' ]
then
    echo "please use this commands"
    echo "------------------------"
    echo "Start in Debug Mode: sh run.sh debug"
        echo "Start in Run Mode: sh run.sh" 
    echo "------------------------"
else
    gradle clean bootjar
    word_count=`ls -l ./build/libs/|grep jar|grep -v grep|wc -w`
    jar_name=`ls -l ./build/libs/|grep jar|grep -v grep|awk '{print $NF}'`  
    jar_path=build/libs/$jar_name
    echo $jar_name
    #java -jar $jar_path
fi 
```

希望这可以帮助！！

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2021-03-17T05:46:10.347

对我来说，这是错误的 JDK 路径。请确保您有正确的 JDK 文件路径

文件 -> 项目结构

[![在此处输入图像描述](../Images/50c65cea11812f9bf1c211f21d1e8d10.png)](https://i.stack.imgur.com/Gz8LI.jpg)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-06-05T10:26:31.880

如果您使用的是 Android Studio，请尝试“文件”菜单中的“无效缓存/重新启动..”选项

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-09-15T06:15:07.713

我用`com.virgo47.ClasspathJar`插件来解决这个问题 [https://plugins.gradle.org/plugin/com.virgo47.ClasspathJar](https://plugins.gradle.org/plugin/com.virgo47.ClasspathJar)

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2022-01-12T14:31:22.020

如果您使用的是 VSCode：

1.  在 .vscode/ 中创建 launch.json 文件

2.  添加

    ```
    {"configurations": [{ "type": "java","shortenCommandLine ": "auto",}]} 
    ```

如果您使用的是 intellij ：

1.  打开 .idea/workspace.xml

2.  里面`<component name="PropertiesComponent">` 加`<property name="dynamic.classpath" value="true"/>`

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2013-11-02T14:45:24.140

该线程的有效答案是我的特殊情况的正确答案。为datanucleus指定ORM文件夹路径当然减少java路径编译。

[https://stackoverflow.com/a/1219427/1469481](https://stackoverflow.com/a/1219427/1469481)

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2016-02-04T00:46:13.830

**运行“ ant deploy** ”时出现以下错误

```
Cannot run program "C:\java\jdk1.8.0_45\bin\java.exe": CreateProcess error=206, The filename or extension is too long 
```

**通过在它之前运行' ant clean** '来修复它。

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2017-06-13T09:28:09.700

我在android studio中遇到了同样的错误。我能够通过在 IDE 中运行**Build** -> **Clean Project来解决它。**

* * *

## 回答 #30

> 赞同：-1
> 
> 时间：2018-08-01T17:52:11.690

我遇到了同样的问题，但我使用的是 netbeans。
我找到了一个解决方案，所以我在这里分享，因为我在任何地方都没有找到这个，所以如果你在 netbeans 上遇到这个问题，试试这个：（
名字可能是关闭的，因为我的 netbeans 是葡萄牙语）右键单击项目>属性> 构建 > 编译 > 取消选中在外部 VM 上运行编译。

* * *

## 回答 #31

> 赞同：-2
> 
> 时间：2018-05-22T06:23:45.093

这是因为你的项目目录名很长，这给了你一个很长的名字`CLASSPATH`。要么您需要减少添加的 jars `CLASSPATH`（确保仅删除不必要的 jars），要么最好的方法是减少项目目录并再次导入项目。这将减少`CLASSPATH`. 它对我有用。****

# jquery - 使用 jQuery 从不同的形式定义变量

> ID：10519561
> 
> 赞同：1
> 
> 时间：2012-05-09T15:49:39.360
> 
> 标签：jquery, html

我想从以前输入到文本框中的表单中获取信息。我目前正在尝试这样的事情：

```
var accNumber = $('#index.html').RegisterForm.cardNumberRegField.val(); 
```

我也试过

```
var tfscNum = document.RegisterForm.cardNumberRegField.value; 
```

我知道这是错误的。我要从中获取信息的 HTML 页面是`index.html`，表单 ID 是`RegisterForm`。该表单中文本框的 ID 是`cardNumberRegField`

编辑

这是我用于 textBox 和 index.html 页面上的按钮的 html 代码

```
<form id="RegisterForm" method="post" data-ajax="false" id="registerCardForm" action="register.html"> 
        <input type="text" id="cardNumberRegField" type="tel"  name="cardNumber" class="required number register" minlength="16" maxlength="16"/> 
        <input name="Submit" type="submit" class="button" value="Register"/>
    </form> 
```

有人知道这样做的正确方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:07:22.723

如果文本框在同一页面上并且您设置了 ID 属性，那么只会 `$('#cardNumberRegField').val();`返回该值。

# fft - 用 FFT 对振荡函数进行傅里叶积分/傅里叶变换

> ID：10519566
> 
> 赞同：0
> 
> 时间：2012-05-09T15:49:47.270
> 
> 标签：fft, dft, numerical-integration

`f(x) = cos(x^2)`并且`g(k) = pi^0.5 cos((pi*k)^2 - pi/4)`是傅里叶对。

我想`g(k)`通过傅里叶积分`f(x)`使用 FFT 来重现，即

近似`Integrate[ f(x) * exp(2 pi * ikx), {x, -inf, inf} ]`

和`Sum[ fn * exp(2 pi * ik x_n), {n, 0, N-1} ] * Delta_x`

然而，如果结果完全一致，则结果`g(k)`仅在非常小`k`的范围内一致（相同的代码适用于平滑傅里叶对，例如高斯函数）。`N`我猜问题是为and选择合适的值`Delta_x`。是否有任何既定的规则来选择它们？我在哪里可以找到文献中的相关主题（我已经阅读了数字食谱第 13.9 节，但它似乎没有解决我的问题）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T20:35:39.023

FFT 本质上是具有长度为 N 的矩形窗口的窗口 f(x)。对于在该窗口内不完全周期性的任何 k，这将产生不同的 g(k) 结果。您可以尝试选择 Delta_X 和 N，以便它们的结果是所需 k 的精确整数倍。

# c# - 将 LogService 添加到我的应用程序

> ID：10519567
> 
> 赞同：2
> 
> 时间：2012-05-09T15:49:52.340
> 
> 标签：c#, unit-testing, design-patterns, .net-3.5, singleton

我有一个应用程序（旧代码）

包含方法`Icomponent`的接口`save()`

以及许多实现它的类。

我想在每次保存（）之后添加日志。

**更新**：

我有几个设计想法：

*   Singelton Logger - 将在每个可记录的操作后调用

我认为这`LogService`是 singelton 的经典案例，但我读到它很难进行单元测试。

*   带 Ioc 的装饰器 + 记录器初始化

使用装饰器模式`Icomponent`和其他`log()`方法。

创建`LogService`从每个装饰器调用的类`log()`

*   AOP——面向方面编程

我读过一点，但不知道。

它适用于 c# 吗？

*   您对该解决方案的设计是什么？

**更新2**

看了代码，发现还有一层接口

在混凝土层之前。我认为我不应该装饰每个特定的界面。正确的？

```
I_AComponente : IComponente

I_BComponente : IComponente

A : I_AComponente

B : I_BComponente 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T19:22:35.270

它根本不必是单例的。考虑：

```
public void ComponentDecorator : IComponent
{
    private IComponent component;
    private ILogger logger;

    public ComponentDecorator(IComponent component, ILogger logger)
    {
        this.component = component;
        this.logger = logger;
    }

    public void Save()
    {
        this.component.Save();
        this.logger.Log("Some important message");
    }
} 
```

由于无论如何您都会将装饰组件注入到装饰器中，因此也可以注入记录器（这很容易测试）。`logger`从单元测试的角度来看，来自哪里将是无关紧要的。

此外，您应该检查现有的记录器，而不是滚动您自己的记录器，例如[Apache log4net](http://logging.apache.org/log4net/)。

**编辑**：

单例记录器难以测试的说法可能是因为 C# 中的单例通常会在`static`某处使用字段或静态类来实现。假设你有：

```
public static LoggerService
{
    public static Log(string message) { ... }
} 
```

现在，在您的装饰器方法中，您可能必须按照以下方式做一些事情：

```
public void Save()
{
    this.component.Save();
    LoggerService.Log("Some important message");
} 
```

这使得该`Save`方法的测试几乎不可能，因为您的方法内部具有紧密耦合的依赖关系。如果您可以将`LoggerService`测试配置为不写入文件系统，那还不错（但是，它仍然是解决问题而不是解决问题）。

在*通过接口注入时，*该问题自然而然地消失了。`LoggerService`可能仍然是静态类，但它可以简单地提供非静态记录器（并管理它们的生命周期/范围）。这根本不会使单元测试变得困难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:23:07.827

是的！AOP适用于CSharp [http://www.developerfusion.com/article/5307/aspect-orienting-programming-using-net/](http://www.developerfusion.com/article/5307/aspect-oriented-programming-using-net/)

AOP 是避免在整个代码中编写 Log 语句的好方法。这是您如何在您的应用程序中实现 AOP 的示例....但是，以下链接提供的方法的唯一缺点是您还需要配置 Castle Windsor [http://ayende.com/blog/3474/logging -aop 方式](http://ayende.com/blog/3474/logging-the-aop-way)

# session - CakePHP 保持会话从主域到子域

> ID：10519570
> 
> 赞同：12
> 
> 时间：2012-05-09T15:50:03.373
> 
> 标签：session, cakephp, authentication

我正在使用 Cakephp，但在跨子域维护会话时遇到问题。我的问题如下：

*   用户登录 'localhost/login'
*   如果经过身份验证，它们将被重定向到“customer.localhost/home”。

目前，Cake 正在为每个域（即 localhost 和 customer.localhost）创建一个 cookie。这意味着我不能让会话为用户工作。有没有办法将所有 cookie 域固定到父域，以保持会话跨子域工作？

我试过在我的引导程序中输入它，但它没有效果：ini_set('session.cookie_domain', '.localhost');

如果您认为这无法完成，请随时告诉我，以便我可以继续解决这个令人沮丧的问题。

非常感谢，

kSeudo

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-09T17:23:44.757

**会话（CakePHP 2.x）：**

要使会话 cookie 对您的所有子域和顶级域有效，您实际上需要在`APP/config/bootstrap.php`文件中自行设置：

```
ini_set('session.cookie_domain', '.domain.com'); 
```

然后，在您的`APP/config/core.php`文件中，将 Security 设置为低：

```
Configure::write('Security.level', 'low'); 
```

> “否则，referer_check 将设置为 CakeSession 对象第 441 行中的当前 HTTP_HOST。”

**会话（CakePHP 3.x）**

> 会话 cookie 路径默认为应用程序的基本路径。要更改这一点，您可以使用 session.cookie_path ini 值。例如，如果您希望会话在所有子域中持续存在，您可以执行以下操作：

```
Configure::write('Session', [
    'defaults' => 'php',
    'ini' => [
        'session.cookie_path' => '/',
        'session.cookie_domain' => '.yourdomain.com'
    ]
]); 
```

* * *

* * *

**饼干（CakePHP 2.x）：**

在[此页面上](http://book.cakephp.org/2.0/en/core-libraries/components/cookie.html)，它解释了您可以使用“域”变量：

> 允许访问 cookie 的域名。例如**，使用“.yourdomain.com”允许从您的所有子域进行访问。**

根据他们的示例代码：

```
<?php
public $components = array('Cookie');
public function beforeFilter() {
    parent::beforeFilter();
    $this->Cookie->name = 'baker_id';
    $this->Cookie->time =  3600;  // or '1 hour'
    $this->Cookie->path = '/bakers/preferences/';
    $this->Cookie->domain = 'example.com';
    $this->Cookie->secure = true;  // i.e. only sent if using secure HTTPS
    $this->Cookie->key = 'qSI232qs*&sXOw!';
    $this->Cookie->httpOnly = true;
} 
```

**饼干（CakePHP 3.x）：**

[在这里阅读](https://book.cakephp.org/3.0/en/controllers/components/cookie.html)。

> cookie 可用的域。要使 cookie 在 example.com 的所有子域上可用，请将 domain 设置为“.example.com”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-13T21:43:39.883

app/Config/core.php 中有一个配置来更改会话 cookie 域：

```
Configure::write('Session', array(
    'defaults' => 'php',
    'ini' => array(
        'cookie_domain' => '.example.com'
    )
)); 
```

# push-notification - StackMob Java 客户端

> ID：10519575
> 
> 赞同：1
> 
> 时间：2012-05-09T15:50:30.297
> 
> 标签：push-notification, apple-push-notifications, stackmob

我目前正在使用 stackmob 为 android 和 iOS 推送通知。我正在使用他们的 java 客户端发送推送通知。

我给出了正确的 API_KEY 和 API_SECRET。deviceToken 也是正确的，它有时会给我一个 401 错误，有时是一个 200 状态代码，但我无法收到任何推送通知。这是我的示例代码。

公共类 TestSample {

```
public static String API_KEY = "Some key";

public static String API_SECRET = "Some key";

public static String USER_OBJECT_NAME = "user";
public static int API_VERSION = 0;

public static void main(String[] args) {

       new TestSample();
}

public TestSample()
{       
    String deviceToken="Token";
    init();
    StackMob stackmob=getStackMobInstance();

    stackmob.registerForPushWithUser("rathi", deviceToken, new StackMobRawCallback() {

        @Override
        public void done(HttpVerb arg0, String arg1,
                List<Entry<String, String>> arg2, String arg3, Integer arg4,
                List<Entry<String, String>> arg5, byte[] arg6) {

             System.out.println("HEree1");
        }
    });

    StackMobPushToken x=new StackMobPushToken(registrationID, TokenType.iOS);

    final Map<String, String> payload = new HashMap<String, String>();
    ArrayList<StackMobPushToken>tokens=new ArrayList<StackMobPushToken>(); 
    tokens.add(x);

      payload.put("badge", "1");
      payload.put("sound", "customsound.wav");
      payload.put("alert", "Hello from Stackmob!");
      payload.put("other", "stuff");

    stackmob.pushToTokens(payload, tokens, new StackMobRawCallback() {

        @Override
        public void done(HttpVerb arg0, String arg1,
                List<Entry<String, String>> arg2, String arg3, Integer arg4,
                List<Entry<String, String>> arg5, byte[] arg6) {
             System.out.println("HEree");

        }
    });
}

public  void init() {
    StackMob.setStackMob(new StackMob(API_KEY, API_SECRET, USER_OBJECT_NAME, API_VERSION));
    //StackMob.getStackMob().setSession(new StackMobAndroidSession(c, StackMob.getStackMob().getSession()));
    StackMob.getStackMob().setSession(new StackMobSession(StackMob.getStackMob().getSession()));

    StackMob.setUserAgentName("iOS");
    StackMob.setLogger(new StackMobLogger());
    StackMob.getLogger().setLogging(true);
    StackMobRequest.setCookieStore(new StackMobCookieStore());

}

public static StackMob getStackMobInstance() {
    return StackMob.getStackMob();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T17:29:48.973

几点评论：

*   这段代码到底应该做什么？`"rathi"`首先，您使用伪造的设备令牌注册用户`"Token"`。`registrationID`然后，您向似乎未在任何地方定义的令牌发送推送。您是否希望在您的 Java 客户端中显示推送通知？整个推送通知概念与手机相关

*   如果`registrationID`指的是以前在手机上注册的令牌，那么您用它拨打的电话应该可以工作。通常，我希望像您这样的客户会打电话`pushToUsers()`而`broadcastPushNotification()`不是直接处理令牌。StackMob API 旨在抽象出那些实现细节

*   如果您仍然遇到问题，您可以发布您获得的控制台输出吗？我看到你已经打开了日志记录。更新到最新的 sdk 也总是好的。

# android - Android Admob android 清单错误

> ID：10519583
> 
> 赞同：2
> 
> 时间：2012-05-09T15:50:59.080
> 
> 标签：android, android-manifest, admob

我正在尝试将广告放入我的 Android 应用程序中，但出现了一个奇怪的错误。

我的应用程序在 Manifest 文件中启动。但它在模拟器中显示一个错误，提示“您必须在 AndroidManifest.xml 中使用 configChanges 声明 AdActivity。”

```
<activity android:name="com.google.ads.AdActivity"
                    android:configChanges="keyboardHidden|orientation|keyboard"/> 
```

每当我将它添加到清单文件时，我都无法编译。

```
<activity android:name="com.google.ads.AdActivity"
                    android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:58:12.960

首先最简单的部分是：您在 AndroidManifest.xml 中 AdActivity 定义的 configChanges 属性中缺少一些标志。如[AdMob SDK Docs](http://code.google.com/intl/de-DE/mobile/ads/docs/android/fundamentals.html)所示，定义需要如下所示：

```
<activity android:name="com.google.ads.AdActivity"    
android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

第二个——查原因是因为这三个属性在最新的SDK（>=13）支持，项目属性设置为Android2.2解决方案如下：

**a：**升级ADT下载最新的SDK

**b：** API修改Project Build Target Level，其值必须>=13，我选择Android 4.0。修改这些步骤：右键单击该项目，然后选择属性 -> Android -> Android 4.0

**c：**修改AndroidManifest.xml中targetSdkVersion和minSdkVersion的值是自己需要的值

```
<uses-sdk android:targetSdkVersion="8" android:minSdkVersion="7"/> 
```

如需更多帮助，[请参阅](http://blog.sina.com.cn/s/blog_768cfa590100utbi.html)

# magento - .phtml 页面中的 Magento 更改未反映

> ID：10519587
> 
> 赞同：0
> 
> 时间：2012-05-09T15:51:05.423
> 
> 标签：magento

我正在自定义`view.phtml`文件中的产品页面，我所做的更改未显示在前端。即使添加`<p>`标签也不会反映在前端。所有`css`更改都正常工作。

从本质上讲，phtml 文件中的更改只是不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:10:52.457

尝试以下操作：

*   在管理员中转到`System->Configuration->Developer`并打开`Template Path Hints`- 这将告诉您哪个模板文件控制哪个块。检查您正在编辑正确的文件。（注意，这不适合生产服务器/实时站点）。
*   你清除缓存了吗？

# php - Magento - 将变量/参数传递给静态块

> ID：10519590
> 
> 赞同：1
> 
> 时间：2012-05-09T15:51:23.743
> 
> 标签：php, magento

我正在使用 Magento CE 1.6.2 并希望显示来自特定类别的“新”产品。为此，我创建了一个像这样的静态块并传递了我想要的类别。

```
 {{block type="catalog/product_new" category_id="20" template="catalog/product/new.phtml"}} 
```

但是类别 ID 需要从我的 .phtml 文件之一中的代码动态传递。有没有办法创建一个我可以在这个静态块中使用的变量。就像我的 .phtml 代码是：

```
 $_categoryId = $this->getCurrentCategory()->getId(); //Store my category id 
```

可以做一些事情，以便我可以像这样将此变量传递给我的静态块，

```
 {{block type="catalog/product_new" category_id="var $_categoryId" template="catalog/product/new.phtml"}} //Which is nothing but 20 so that it displays new products from only category 20 
```

请帮忙 ！

编辑：我找到了一个类似的链接。我追随它，但没有成功。 [http://magentophp.blogspot.co.uk/2011/08/passing-paramters-to-magento-cms-static.html](http://magentophp.blogspot.co.uk/2011/08/passing-paramters-to-magento-cms-static.html)

任何人都可以帮助我点击链接并使其正常工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:54:28.070

它可能不完全符合您的要求，但可能会为您指明正确的方向：

在 phtml 文件中，您可以这样做：

```
$category = "23";
$this->getChild('home.catalog.product.new')->setData('category_id', $category);

echo $this->getChildHtml('home.catalog.product.new', false); 
```

注意最后一个'false'是告诉它不要缓存块。

您还需要将它包含在您的布局文件中，如下所示：

```
<block type="catalog/product_new" name="home.catalog.product.new" alias="product_new" template="catalog/product/new.phtml"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T06:57:13.733

你需要把

```
 $this->getChild('testpage')->setData("test", "xyz")
     echo $this->getChildHtml('testpage'); 
```

然后您可以通过以下方式调用/访问它

```
 $this->test; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-01T09:58:51.747

在 CMS 页面中使用，我们可以将变量放入如下块中：-

```
{{block type="yourmodule/testblock" product_id=10 template="module/yourmodule/bestproduct.phtml"}} 
```

或订单对象相同：-

```
{{block type="yourmodule/testblock" order=$order template="module/yourmodule/bestproduct.phtml"}} 
```

# ruby - 如何在 ruby 的 URI 库中使用变音符号

> ID：10519591
> 
> 赞同：9
> 
> 时间：2012-05-09T15:51:24.293
> 
> 标签：ruby, unicode, uri

这是问题所在：Ruby 的 URI 库不处理变音符号；IE

```
irb> require "uri"
irb* URI("http://abc.de/äöü")
URI::InvalidURIError: bad URI(is not URI?): http://abc.de/äöü 
```

我该如何处理？这是 Ruby 1.9.2，顺便说一句。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-05-26T14:53:08.160

解析前调用[URI.encode](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI/Escape.html#method-i-encode)：

```
require 'uri'
uri = URI(URI.encode("http://abc.de/äöü")) 
```

作为旁注，请注意，如果 URL 包含哈希片段 ( *#something* )，则必须手动拆分它：

```
require 'uri'
uri = URI(URI.encode('http://example.com/page.html') + '#' + URI.encode('anchor')) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T16:01:47.310

[Addressable](http://rubygems.org/gems/addressable) gem 是您想要用来处理 IRI 的。

# reverse-proxy - 我可以在 IIS ARR（反向代理）缓存中设置动态页面吗？

> ID：10519592
> 
> 赞同：2
> 
> 时间：2012-05-09T15:51:27.160
> 
> 标签：reverse-proxy, arr

它现在只缓存我的静态页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:14:38.530

要在 IIS 中代理缓存动态页面，您可以为所有动态页面设置缓存控制规则（请参阅[http://technet.microsoft.com/en-us/library/ee683925(WS.10).aspx](http://technet.microsoft.com/en-us/library/ee683925(WS.10).aspx)），或者仅适用于不存在缓存控制指令的情况，或者您可以在各个动态页面上设置缓存控制指令。

以下是如何在特定页面上设置缓存控制指令的代码示例：

```
var expires = new TimeSpan(5,0,0,0);
Response.Cache.SetExpires(DateTime.Now.Add( expires ) );
Response.Cache.SetMaxAge( expires ); 
Response.Cache.SetCacheability( HttpCacheability.Public );
Response.Cache.SetSlidingExpiration(true); 
```

在此处阅读有关 HttpCachePolicy 类的更多信息，它的方法和属性：http: [//msdn.microsoft.com/en-us/library/8haf374f](http://msdn.microsoft.com/en-us/library/8haf374f)

# wpf - wpf RowDetails模板焦点

> ID：10519593
> 
> 赞同：5
> 
> 时间：2012-05-09T15:51:33.823
> 
> 标签：wpf, datagrid

我目前有一个带有 rowdetailstemplate 的数据网格，其中包含另一个数据网格以显示父子关系。第二个网格有一列，其中包含一个按钮，单击该按钮会显示另一个对话框。

第一次显示行的详细信息时，用户必须在子网格中单击一次以获得焦点/激活它，然后再次单击以触发按钮单击事件。这仅在第一次显示行时发生。

就像第一次点击被网格吞噬。我已经尝试捕获 RowDetailsVisibilityChanged 事件以尝试聚焦按钮，但它似乎仍然没有解决问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-04T18:14:50.660

我会回答我自己的评论，它也可能对其他人有帮助。以下 MSDN 条目解释并解决了该问题： [http ://social.msdn.microsoft.com/Forums/vstudio/en-US/2cde5655-4b8d-4a12-8365-bb0e4a93546f/activating-input-controls-inside-datagrids- rowdetailstemplate-with-click?forum=wpf](http://social.msdn.microsoft.com/Forums/vstudio/en-US/2cde5655-4b8d-4a12-8365-bb0e4a93546f/activating-input-controls-inside-datagrids-rowdetailstemplate-with-single-click?forum=wpf)

问题是始终显示的行详细信息需要首先获得焦点。为了规避这个问题，需要一个数据网格预览处理程序：

```
<DataGrid.RowStyle>
    <Style TargetType="{x:Type DataGridRow}"  BasedOn="{StaticResource {x:Type DataGridRow}}">
        <EventSetter Event="PreviewMouseLeftButtonDown" Handler="SelectRowDetails"/>
    </Style>
</DataGrid.RowStyle> 
```

注意：我已经扩展了它，因为它破坏了我的自定义 DataGridRow 样式以继承当前使用的样式。

处理程序本身是

```
private void SelectRowDetails(object sender, MouseButtonEventArgs e)
{
    var row = sender as DataGridRow;
    if (row == null)
    {
        return;
    }
    row.Focusable = true;
    row.Focus();

    var focusDirection = FocusNavigationDirection.Next;
    var request = new TraversalRequest(focusDirection);
    var elementWithFocus = Keyboard.FocusedElement as UIElement;
    if (elementWithFocus != null)
    {
        elementWithFocus.MoveFocus(request);
    }
} 
```

它将焦点设置为行详细信息的内容，从而解决了单击两次的问题。

注意：这一切都取自 MSDN 线程，这不是我自己的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-28T07:50:57.503

我找到了一个很好的解决方案：D

我有一行代码可以解决这个问题，但有 10 行代码来描述问题所在。这是解决方案：

```
 protected override void OnPropertyChanged(DependencyPropertyChangedEventArgs e)
    {
        base.OnPropertyChanged(e);

        // to stop RowDetails from eating the first click.
        if (e.Property.Name == "SelectedItem" && CurrentItem == null) CurrentItem = SelectedItem;
    } 
```

[请在此处](http://elashi.blogspot.com/2014/04/wpf-datagrid-rowdetails-eats-first-click.html)查找详细信息。

# java - 在 Tomcat/Jetty 中执行多线程的正确方法

> ID：10519602
> 
> 赞同：3
> 
> 时间：2012-05-09T15:51:52.347
> 
> 标签：java, multithreading, tomcat, jetty

这是我的用例。

1.  客户端向服务器发送请求。
2.  服务器需要做以下2.a。进行网络调用以获取一些数据 (D)。
    2.b。创建一个处理器 (P) 来处理数据。
3.  P 处理 D 并将响应发送回客户端

创建处理器很昂贵（大约 1-3 秒）。但它不依赖于数据 D.

我的计划是使用两个不同的线程并行执行网络调用和处理器的创建。

我从未在应用服务器中进行过多线程编程。我的问题是处理应用程序服务器（特别是 Tomcat 和 Jetty）中的线程的最佳方法是什么

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T15:59:39.460

IMO 你最好的选择是使用[Executor](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executor.html)框架。这使得处理并发性变得更加容易。

这里有[几个](http://docs.oracle.com/javase/tutorial/essential/concurrency/executors.html) [教程](http://www.baptiste-wicht.com/2010/09/java-concurrency-part-7-executors-and-thread-pools/)可以帮助您入门。

您的代码在诸如 Tomcat 之类的 Web 容器中运行这一事实不应该过多打扰您。这意味着处理请求的实际线程实际上是一个工作线程，取自应用服务器本身管理的线程池。但是，只要您自己的线程干净地完成它们的工作（即仅修改仅限于该实际请求的数据并且不干扰其他外部线程），并且同时没有太多线程，一切都应该没事的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T16:02:57.607

Tomcat 7 支持 Servlet 3.0 并且它是异步 servlet - 它维护自己的线程池并提供标准 API 以在单独的线程中执行请求。您可以在此处查看示例：[Tomcat 7 中的异步 Servlets](http://developerlife.com/tutorials/?p=1437)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:33:03.143

如果创建处理器 (P) 的成本很高，您能否像创建数据库连接池一样预先创建一个 P 实例池并重新使用它们？

Apache Commons Pool 项目可以为您提供一个起点。

# iis - IIS7 工作进程指示中的高线程数是什么？

> ID：10519611
> 
> 赞同：1
> 
> 时间：2012-05-09T15:52:24.447
> 
> 标签：iis, deadlock, worker-process

我的服务器目前遇到一些问题。

我有一个一直陷入僵局的游泳池。它是集成模式下的 IIS7 工作进程。

我最近注意到在任务管理器 > 进程中；线程数异常高。（与任何其他工作进程的 50 个相比，最多运行 450 个线程）

这通常表示某个特定问题，还是我在黑暗中尝试解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T14:34:01.057

事实证明，由于查询字符串中的“/”，我们遇到了递归重定向错误。

# .net - 异步 CTP NullReference 或 ArgumentNullException (Windows Phone)

> ID：10519614
> 
> 赞同：1
> 
> 时间：2012-05-09T15:52:36.723
> 
> 标签：.net, windows-phone-7, asynchronous, nullreferenceexception, async-ctp

我在项目中使用 Async CTP 库时遇到问题。这是代码：

书页

```
protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);

        if (this.DataContext is BookViewModel)
        {
            var bookViewModel = this.DataContext as BookViewModel;
            bookViewModel.UpdateReviews();
        }
    } 
```

图书视图模型

```
public async void UpdateReviews()
    {
        Reviews.Clear();

        IEnumerable<Review> newReviews = null;
        try
        {
            newReviews = await BooksManager.GetBookReviews(this.Book.Sysno, 10, 0);
        }
        catch (Exception ex)
        {

        }

        if (newReviews != null)
        {
            foreach (var review in newReviews)
            {
                Reviews.Add(review);
            }
        }
    } 
```

图书管理员

```
public static async Task<IEnumerable<Review>> GetBookReviews(string sysno, uint limit, uint offset)
    {
        if (sysno == null)
            throw new ArgumentNullException("sysno");
        if (string.IsNullOrWhiteSpace(sysno))
            throw new ArgumentException("sysno");

        string url = CreateBookReviewsURL(sysno, limit, offset);

        var reviews = await DownloadDataAsync<IEnumerable<Review>>(url);
        return reviews;
    }

public static async Task<T> DownloadDataAsync<T>(string url)
    {
        if (url == null)
            throw new ArgumentNullException("url");

        var newUrl = url.Contains("?") ? 
            string.Format("{0}d={1}", url, DateTime.Now) :
             string.Format("{0}?d={1}", url, DateTime.Now); //to avoid caching

        string data = null;

        WebRequest webRequest = WebRequest.CreateHttp(newUrl);

        using (WebResponse response = await webRequest.GetResponseAsync())
        {

            if (response.Headers["StatusCode"] == "200")
            {
                using (var stm = response.GetResponseStream())
                {
                    using (var reader = new StreamReader(stm))
                    {
                        data = await reader.ReadToEndAsync();
                    }
                }
            }
        }

        var books = await ParseDataAsync<T>(data);
        return books;
    } 
```

它抛出 NullReferenceException

> 在 SmartLib.ViewModels.BooksViewModel.d_ *8.MoveNext()
> 在 System.Runtime.CompilerServices.TaskAwaiter.<>c* _DisplayClass5.b__1(Object state) 在 System.Reflection.RuntimeMethodInfo.InternalInvoke(RuntimeMethodInfo rtmi, Object obj, BindingFlags invokeAttr, System.Reflection.RuntimeMethodInfo.InternalInvoke（对象 obj，BindingFlags invokeAttr，BindingFlags 绑定器，Object[] 参数，CultureInfo 文化，StackCrawlMark 和 stackMark）上的 Binder 活页夹、对象参数、CultureInfo 文化、布尔 isBinderDefault、程序集调用者、布尔验证访问、StackCrawlMark 和 stackMark）在 System.Reflection.MethodBase.Invoke（对象 obj，对象 [] 参数）
> 在 System.Delegate.DynamicInvokeOne(Object[] args) 在 System.MulticastDelegate.DynamicInvokeImpl(Object[] args) 在 System.Delegate.DynamicInvoke(Object[] args) 在 System.Windows.Threading.DispatcherOperation.Invoke() 在 System .Windows.Threading.Dispatcher.Dispatch(DispatcherPriority priority) 在 System.Windows.Threading.Dispatcher.OnInvoke(Object context) 在 System.Windows.Hosting.CallbackCookie.Invoke(Object[] args) 在 System.Windows.Hosting.DelegateWrapper System.Windows.RuntimeHost.ManagedHost.InvokeDelegate 处的.InternalInvoke(Object[] args)
> (IntPtr pHandle, Int32 nParamCount, ScriptParam[] pParams, ScriptParam& pResult)

在 App.xaml.cs 中调用 BooksManager.GetBookReviews() 可以正常工作。

# .net - 通过 asp.net mvc 使用 amf 远程处理

> ID：10519617
> 
> 赞同：0
> 
> 时间：2012-05-09T15:52:41.217
> 
> 标签：.net, asp.net-mvc, actionscript-3, flash, amf

有人知道是否可以使用 amf 远程处理从 flash 调用 asp.net mvc 操作？

如果是，如何？应该使用哪些技术以及如何将它们结合起来

在闪存方面，它会是这样的：

```
 //Connect the NetConnection object
    var netConnection: NetConnection = new NetConnection();
    netConnection.connect("http://localhost:59147/Home/Index");

   //Invoke a call
   log("invoke call TestMethod");
   var responder : Responder = new Responder( handleRemoteCallResult, handleRemoteCallFault);
   netConnection.call('TestMethod', responder, "Test"); 
```

我试过了，它触发了动作，但我在请求中找不到任何软件的“TestMethod”和“Test”

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T14:02:39.510

我没有完整的答案，但这可以在一开始就帮助你。

您可以使用 FluorineFx，这是一个良好的开端，因为它实现了所有 AMF 东西，并且它具有 AMFWriter/Reader、AMFDeserializer 等，可以使用它们。

```
using System.Web.Mvc;
using FluorineFx.IO;

public class AMFFilterAttribute : ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        if (filterContext.HttpContext.Request.ContentType == "application/x-amf")
        {
            var stream = filterContext.HttpContext.Request.InputStream;

            var deserializer = new AMFDeserializer(stream);
            var message = deserializer.ReadAMFMessage();

            foreach (var body in message.Bodies) // not foreach, just the first one
            {
                filterContext.ActionParameters["method"] = body.Target;
                filterContext.ActionParameters["args"] = body.Content;
            }

            base.OnActionExecuting(filterContext);
        }
    }
}

[AMFFilter]
[HttpPost]
public ActionResult Index(string method, object[] args)
{
    return View();
} 
```

这只是第一部分。返回二进制数据和内容可以由某种自定义 ActionResult 处理，但是您知道如何从这里[AMF ActionResult for asp.net mvc 处理](https://stackoverflow.com/questions/9974392/amf-actionresult-for-asp-net-mvc)吗？

祝你好运。

# c# - 使用 Linq 和 C# 在列表中创建所有可能的项目组合

> ID：10519619
> 
> 赞同：8
> 
> 时间：2012-05-09T15:52:42.980
> 
> 标签：c#, linq, algorithm, list

我有一个类别表：

```
 Catid | Desciption
 1 | Color
 2 | Size
 3 | Material 
```

和一个类别项目表

```
 Catid | Name
 1 | Red
 1 | Blue
 1 | Green
 2 | Small
 2 | Med
 2 l Large
 3 | Cotton
 3 | Silk 
```

我需要遍历所有项目并将它们显示在这样的标签中：

```
 Red Small Cotton
 Red Small Silk
 Red Med Cotton
 Red Med Silk
 Red Large Cotton
 Red Large Silk
 Blue Small Cotton
 Blue Small Silk
 Blue Med Cotton
 Blue Med Silk
 Blue Large Cotton
 Blue Large Silk
 Green Small Cotton
 Green Small Silk
 Green Med Cotton
 Green Med Silk
 Green Large Cotton
 Green Large Silk 
```

**请注意：可能有更多或更少的类别。它不是预先确定的。**

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-09T16:06:04.713

```
var result = list.GroupBy(t => t.Id).CartesianProduct(); 
```

使用[Eric Lippert 博客](http://blogs.msdn.com/b/ericlippert/)中的[CartesianProduct 扩展方法](http://blogs.msdn.com/b/ericlippert/archive/2010/06/28/computing-a-cartesian-product-with-linq.aspx)：

```
static IEnumerable<IEnumerable<T>> CartesianProduct<T>(
  this IEnumerable<IEnumerable<T>> sequences) 
{ 
  IEnumerable<IEnumerable<T>> emptyProduct = new[] { Enumerable.Empty<T>() }; 
  return sequences.Aggregate( 
    emptyProduct, 
    (accumulator, sequence) => 
      from accseq in accumulator 
      from item in sequence 
      select accseq.Concat(new[] {item})); 
} 
```

* * *

*例子：*

```
var list = new[]
{
    new { Id = 1, Description = "Red"    },
    new { Id = 1, Description = "Blue"   },
    new { Id = 1, Description = "Green"  },
    new { Id = 2, Description = "Small"  },
    new { Id = 2, Description = "Med"    },
    new { Id = 2, Description = "Large"  },
    new { Id = 3, Description = "Cotton" },
    new { Id = 3, Description = "Silk"   },
};

var result = list.GroupBy(t => t.Id).CartesianProduct();

foreach (var item in result)
{
    Console.WriteLine(string.Join(" ", item.Select(x => x.Description)));
} 
```

*输出：*

```
Red Small Cotton
Red Small Silk
Red Med Cotton
Red Med Silk
Red Large Cotton
Red Large Silk
Blue Small Cotton
Blue Small Silk
Blue Med Cotton
Blue Med Silk
Blue Large Cotton
Blue Large Silk
Green Small Cotton
Green Small Silk
Green Med Cotton
Green Med Silk
Green Large Cotton
Green Large Silk 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-09T15:56:50.303

尝试使用交叉连接：

```
var combo = from l1 in List1
            from l2 in List2
            select new {l1, l2}; 
```

# java - 使用 Maven 连接多个独立的 Spring 应用程序

> ID：10519622
> 
> 赞同：2
> 
> 时间：2012-05-09T15:52:50.163
> 
> 标签：java, xml, spring, maven, applicationcontext

我的项目由多个 Spring 子项目组成：

*   服务1
*   服务2
*   服务3

每个 Service 对内部的其他 Bean 都有多个依赖项，因此每个 Service 都有一个 applicationContext.xml 将 Service 连接在一起。

我使每个子项目都成为独立的 maven 构建，我认为我可以创建一个 AllServicesTogether 应用程序来将这些服务{1..3} 连接在一起。

这通过向这些服务添加 Maven 依赖项来工作。

```
<dependencies>
    <dependency>
        <groupId>org.myproject</groupId>
        <artifactId>myproject-service{1..3}</artifactId>
        <version>0.1-SNAPSHOT</version>
    </dependency>
    ...
</dependencies> 
```

但是在 AllServicesTogether 应用程序中，所有子服务的连接都丢失了。我猜 Subservices 不是用 Subservice ApplicationContext 编译的，而是使用 AllServicesTogether ApplicationContext。

想法是封装 SubSerivces 的所有连接，并使用以下方法简单地连接 AllServicesTogether：

```
<beans ..>
    <bean class="org.myproject.service1.Service1"/>
    <bean class="org.myproject.service1.Service2"/>
    <bean class="org.myproject.service1.Service3"/>
</beans> 
```

我从花费数小时的较大项目中创建了这些子项目。是否可以使用这种接线方法，或者我是否需要包含所有这些服务中的 context.xml？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T18:59:59.977

您需要包含这些服务中的 context.xml。最好在 AllServicesTogether-context.xml 中使用“导入”来完成：

```
<import resource="classpath*:/META-INF/spring/service1-context.xml" />
<import resource="classpath*:/META-INF/spring/service2-context.xml" />
<import resource="classpath*:/META-INF/spring/service3-context.xml" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T02:37:12.293

使用类路径*:/META-INF/spring/*-context.xml

参考文献：</p>

1.  [Spring 应用上下文加载技巧](http://www.gridshore.nl/2008/05/13/spring-application-context-loading-tricks/)
2.  [带有来自 Jar 的多个 XML 文件的 Spring ApplicationContext](https://stackoverflow.com/questions/10523945/1190388)

# python - 如何分配一个名称是即时生成的python变量？

> ID：10519623
> 
> 赞同：0
> 
> 时间：2012-05-09T15:52:50.850
> 
> 标签：python

说我想做以下事情：

```
name = 1.2 
```

问题是“name”的字面名称是即时提供的（可能是“mike=1.2”、“john=1.2”、...）

希望我解释了我的问题，并提前感谢任何提示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:04:33.017

这是一个如何作为字典执行此操作的示例。

```
>>> people = {}
>>> people['mike'] = 1
>>> people['john'] = 2
>>> people['mike']
1
>>> people['john']
2
>>> print people
{'mike': 1, 'john': 2} 
```

[另请参阅此处](http://docs.python.org/tutorial/datastructures.html#dictionaries)和[此处](http://docs.python.org/library/stdtypes.html#dictionary-view-objects)的文档

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T15:57:25.747

您可以使用`globals()`或`locals()`根据所需的范围：

```
>>> globals()['foo'] = 'bar'
>>> foo
'bar'
```

但是，如果您要问这个问题，则意味着您做错了-*生成*变量本质上是一个坏主意。为此，您应该使用诸如字典之类的结构。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T15:55:54.560

你可以做

```
globals()['yourvariables'] = variable 
```

这会将变量添加到全局命名空间。我不会评论这是一个好主意还是一个坏主意。

# javascript - 如果另一个仍在运行，请立即启动 ajax 调用

> ID：10519628
> 
> 赞同：3
> 
> 时间：2012-05-09T15:53:16.473
> 
> 标签：javascript, jquery, python, web2py

假设我通过 ajax 启动一个循环函数，该函数等待来自设备（在本例中为条形码阅读器）的响应，如果按下“返回”按钮（当第一个函数仍在运行时），我需要执行另一个 ajax 调用。怎么可能做到？使用 abort 不起作用，因为服务器仍在循环周期内。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:56:24.833

只需发送另一个 ajax 请求，您可以同时有多个 ajax 请求。

```
sendFirstAjax();
sendSecondAjax(); // doesn't have to wait the first ajax to complete. 
```

# android - Android 上的蓝牙：如何检查我周围是否还有特定的 MAC 地址设备？

> ID：10519630
> 
> 赞同：0
> 
> 时间：2012-05-09T15:53:32.920
> 
> 标签：android, macos, bluetooth

这是我的代码，从文件中一一读取mac地址（我已经存储）。接下来我想检查我周围是否还有设备。有人可以帮助我吗？

```
private void search(){
                        String collected;
                       fis=openFileInput(FILENAME);
            byte[] dataArray= new byte[fis.available()];
            while(fis.read(dataArray) != -1){

                          collected = new String(dataArray);
                               // here i want to write that code...

            }//while

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:49:49.063

你有两个选择。

1.  做一个发现，看看它是否出现在结果中（即你是否得到了一个 ACTION_FOUND ）。我认为这是一个坏主意，因为它非常耗费资源，因为蓝牙无线电不能真正做任何其他事情，而且它消耗大量频谱，因为它必须在所有频道上广播。

2.  尝试连接到它，例如做一个套接字连接到一个已知的 UUID。如果设备不在附近，连接将在大约 5 秒内失败（大约是完成发现所需的三分之一）。如果设备在附近，并且您最近连接到它（因此您的蓝牙无线电知道它的时钟偏移），那么您将很快连接到它。

为了实现#2，这是我想到的方法：http: [//developer.android.com/reference/android/bluetooth/BluetoothSocket.html#connect()](http://developer.android.com/reference/android/bluetooth/BluetoothSocket.html#connect%28%29)

这里有一些使用它的代码：http: [//developer.android.com/guide/topics/wireless/bluetooth.html#ConnectingAsAClient](http://developer.android.com/guide/topics/wireless/bluetooth.html#ConnectingAsAClient)

# eclipse - 使用 jboss7 maven 插件和 Eclipse 调试时的问题

> ID：10519631
> 
> 赞同：0
> 
> 时间：2012-05-09T15:53:36.353
> 
> 标签：eclipse, maven, jboss7.x

当我放置断点时，我收到以下消息：“由于缺少行号属性，无法在**中安装断点。修改编译器选项以生成行号属性。”*

我找到了很多解决这个问题的答案，但没有一个解决了我的问题，所有这些答案都涉及 Ant+Eclipse。什么是 Maven+Eclipse 的解决方案？感谢

我想确保这个错误不是来自我。有人可以从以下原型生成应用程序：

```
<dependency>
    <groupId>org.jboss.spec.archetypes</groupId>
    <artifactId>jboss-javaee6-webapp-archetype</artifactId>
    <version>7.1.1.Beta1</version>
</dependency> 
```

并放置一个断点？感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:11:30.303

确保在 Java 的编译器选项中设置了 Debug：

[http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html](http://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html)

# python-3.x - 为 Python 3.2 配置 Komodo 编辑

> ID：10519632
> 
> 赞同：1
> 
> 时间：2012-05-09T15:53:45.667
> 
> 标签：python-3.x, komodo

我已经为 Komodo Edit 7 安装了 Python3.2，但无法让 KE 识别它。在编辑、首选项、语言、Python 3 下，我将其指向我的解释器“C:\Python32\python.exe”。

我已经尝试了以下不同版本的运行命令，但无济于事：

python3.2 "-u" "%F"

我还尝试更改默认的 Python 解释器，但它说“它是 3.2 版，不会运行 Python 2”。

如有必要，我很乐意将 Python 2.7 完全替换为 3.2 - 如果有人提供这些说明。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-10T19:52:11.563

我不得不更改我的 PATH 设置以使用 Python 3.2，而不是 2.7。我可以将运行命令保留为：

```
%(python) "-u" "%F" 
```

它使用默认的（3.2）解释器。可以在 Komodo Edit 中通过 Edit、Preferences、Environment 更改路径。

尽管出现，但我不相信在 Komodo Edit 7 中的 Python 版本之间切换而不更改默认解释器是可能的。但是，只需要一个简单的 PATH 更改。[甚至可以创建一个批处理文件来切换两个版本之间的路径。]

我希望这些信息可能对其他人有用。安迪。

# php - PHP SOAP服务器根本不返回值

> ID：10519637
> 
> 赞同：3
> 
> 时间：2012-05-09T15:54:02.840
> 
> 标签：php, soap, wsdl

这是这个紧迫的问题，经过几天的努力仍未解决。

[http://www.tabernus.com/ws/soap/server.php?WSDL](http://www.tabernus.com/ws/soap/server.php?WSDL)应该给你 WSDL 文件。

在 server.php 中，我想在调用“GetAuditInformation”方法时返回一个递增的序列号。

所以我在顶部写了这个简单的函数：

```
 <?php 
 function GetAuditInformation($serialNumber) {
 $serialNumber=$serialNumber +1;
 return $serialNumber;        
 }

 ini_set("soap.wsdl_cache_enabled", "0");
 $server = new SoapServer('wsMRMAudit.wsdl');
 $server->addFunction("GetAuditInformation"); 
 $server->handle();

?> 
```

我使用plumvoice SOAPtester 进行了测试，它能够通过WSDL 获取方法。

[http://www.plumvoice.com/soaptester/](http://www.plumvoice.com/soaptester/)

但是输入一个序列号，比如....1000，它应该返回 1001，但它返回 NULL。这是为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T16:04:58.987

传递给函数的参数不是数字，而是对象。你的函数定义应该是这样的：

```
function GetAuditInformation($x)
{
    return array('GetAuditInformationResult' => $x->SerialNumber + 1);
} 
```

对于完整的示例，让我也发布我的测试脚本，顺便说一句：

```
$s = new SoapClient('http://www.tabernus.com/ws/soap/server.php?WSDL', array('trace'=>true));

var_dump($s->GetAuditInformation(array('SerialNumber' => 1000)));

$req = $s->__getLastRequest();

function GetAuditInformation($x)
{
return array('GetAuditInformationResult' => $x->SerialNumber + 1);
}

$server = new SoapServer('http://www.tabernus.com/ws/soap/server.php?WSDL', array(
    'actor' => 'http://www.tabernus.com/ws/soap/',
    'soap_version' => SOAP_1_2
));
$server->addFunction('GetAuditInformation');

$server->handle($req); 
```

# c# - 我试图解析网站上的所有链接，但它不起作用可能是什么问题？

> ID：10519638
> 
> 赞同：0
> 
> 时间：2012-05-09T15:54:04.243
> 
> 标签：c#, regex

我使用这段代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.IO;
using System.Text.RegularExpressions;
using HtmlAgilityPack;

namespace HtmlParser
{
    public partial class Form1 : Form
    {

        // The HtmlWeb class is a utility class to get the HTML over HTTP
        HtmlWeb htmlWeb = new HtmlWeb();

        // Creates an HtmlDocument object from an URL
        HtmlAgilityPack.HtmlDocument document;

        // Targets a specific node
        HtmlNode someNode;

        public Form1()
        {
            InitializeComponent();
            document = htmlWeb.Load("http://www.walla.co.il");
            someNode = document.GetElementbyId("mynode");

            // If there is no node with that Id, someNode will be null
            if (someNode != null)
            {
                // Extracts all links within that node
                IEnumerable<HtmlNode> allLinks = someNode.Descendants("a");

                // Outputs the href for external links
                foreach (HtmlNode link in allLinks)
                {
                    // Checks whether the link contains an HREF attribute
                    if (link.Attributes.Contains("href"))
                    {
                        // Simple check: if the href begins with "http://", prints it out
                        if (link.Attributes["href"].Value.StartsWith("http://"))
                            richTextBox1.Text = link.Attributes["href"].Value.ToString();
                    }
                }
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

    }
} 
```

但它永远不会超过这条线：

```
someNode = document.GetElementbyId("mynode"); 
```

在这一行上使用了一个断点，它给了我一条消息：没有可用的源如果我没有使用断点，则程序正在运行，但我没有收到任何错误，但它也不起作用。

我应该怎么办 ？我不明白我应该放什么而不是“我的节点”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:57:23.203

探针正在尝试使用正则表达式来解析 HTML。

错误的具体原因是你有一个`?`和一个不应该存在的换行符，这会导致正则表达式无效。

您可以改用[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)来修复它。

# java - 从所有者类（一个 JFrame）中关闭一个 java modal JDialog

> ID：10519641
> 
> 赞同：2
> 
> 时间：2012-05-09T15:54:12.290
> 
> 标签：java, swing, modal-dialog, jdialog

我对这个问题感觉有点不好，因为我认为这可能不是 JDialog 应该使用的方式，但无论如何：

我有一个非常简单的 JDialog，它只包含一个标签，我想在应用程序正在运行一个仅在主摆动线程上运行几秒钟的任务的情况下显示它。该对话框必须是模型，以确保用户在执行短阻塞任务时不能单击主 GUI 上的任何内容。任务完成后，应该在没有任何用户交互的情况下处理模态对话框......这似乎不适用于模态对话框，因为一旦调用了 setVisible(true) 方法，执行似乎停止并且我可以' t弄清楚如何在没有用户交互的情况下从所有者方面关闭它......

我将非常感谢有关如何以不同方式实施此类阻止对话的帮助或建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T15:57:36.330

是的，如果您在 UI 线程上显示模式对话框，您的执行将停止。为了克服这个问题，您可以使用 SwingWorker 甚至只是创建一个新线程

# asp.net - 如何在 ASP 中制作可展开的图像按钮

> ID：10519642
> 
> 赞同：0
> 
> 时间：2012-05-09T15:54:24.553
> 
> 标签：asp.net, css, imagebutton

我正在为客户更新他们的 CSS 做一个私人项目。这是内置在 asp 中的。我正在尝试构建一个可扩展的提交按钮，就像这样：[http ://www.oscaralexander.com/tutorials/how-to-make-sexy-buttons-with-css.html](http://www.oscaralexander.com/tutorials/how-to-make-sexy-buttons-with-css.html)

问题是链接如下所示：

`<asp:Button runat="server" ID="SearchButton" CssClass="SearchButton" Text="" CausesValidation="false" OnClick="SearchButton_Click"/>`

我没有 A 标签可以做链接上的教程中的内容。它们主要在 IE 7 和 8 中运行，因此我需要使用图像而不是 CSS3 来适应它。

有什么见解吗？

非常感谢 ：）

Ĵ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:01:56.980

您在这里有几个选择。

首先，即使站点在 Asp.net 中，您仍然可以使用标准的客户端代码。这意味着您的 html 最终会看起来非常接近教程。但是，由于该按钮正在调用服务器端代码，因此您需要将其作为 javascript 事件进行处理。[这个答案](https://stackoverflow.com/a/8762320/259014)解释了如何做到这一点。

其次，您可以在控件的现有属性中进行`<asp:button>`操作。您可以将该教程中的所有样式设置为您正在创建的 CSS 类的一部分，并且在许多情况下`<asp:...>`，您还可以添加`style="..."`属性。也就是说，我不知道该`style="..."`属性是否适用于`<asp:button>`控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:42:14.813

我认为如果您使用`linkbutton`

```
<asp:LinkButton CssClass="button" ID="LinkButton1" runat="server" 
  onclick="LinkButton1_Click"><span>Bring world peace</span></asp:LinkButton> 
```

# mysql - 简单存储过程的排序规则的非法混合

> ID：10519645
> 
> 赞同：0
> 
> 时间：2012-05-09T15:54:38.043
> 
> 标签：mysql, sql, connector-j

我正在尝试在 MySQL 服务器 (5.5.23) 上使用 Connector/J 从 Java 运行存储过程。过程是

```
CREATE DEFINER = `[deleted]`@`localhost` PROCEDURE `GETGROUP` 
( IN `uname` CHAR( 16 ) CHARSET latin1 ) NOT DETERMINISTIC READS SQL DATA SQL 
SECURITY DEFINER SELECT `group` FROM `user` WHERE `username` = uname 
```

但是，它出错了

```
java.sql.SQLException: Illegal mix of collations (latin1_general_ci,IMPLICIT) 
and (latin1_swedish_ci,IMPLICIT) for operation '='" 
```

我在整个数据库中专门使用 latin1_general_ci，所以我不知道发生了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:07:21.307

如果您愿意，可以通过添加到其声明的末尾来强制`uname`使用。`latin1_general_ci``COLLATE latin1_general_ci`

# extjs-mvc - 在 extjs 4.1 中，我的 json 请求中添加了一个额外的 id 字段

> ID：10519647
> 
> 赞同：0
> 
> 时间：2012-05-09T15:54:53.507
> 
> 标签：extjs-mvc, extjs4.1

在我的控制器中，我使用“record.save”功能。在 extjs 4.07 中，这会将单个记录作为 json 发送。我在 4.1 中注意到它现在发送一个记录数组。这很好，因为我可以更新我的服务器控制器来处理一个数组（如果可以只指定一条记录就好了）

虽然我的主要问题是我在我的 json 中收到了两次属性“Id”。Id 是我的记录类的属性。如果您查看下面的 Json，您可以看到“Id”已附加到我的 Json 的末尾。这是什么原因？

```
[{
   "Id":"f3e7def0-42e6-41c9-a2ba-a04400b7c568",
   "QuotedPrice":"\u00a3500.00",
   "Notes":"",
   "JobQuantity":"0",
   "DeliveryDate":"",
   "ProjectId":"",
   "id":""
}] 
```

这是我的模型（我删除了一些 json 以使其更具可读性）

```
Ext.define('Mis.model.Job', {
    extend: 'Ext.data.Model',
    fields: [
                {
                    mapping: 'Id',
                    name: 'Id'
                }
                ,
                {
                    mapping: 'Value',
                    name: 'QuotedPrice'
                },
                {
                    mapping: 'Name',
                    name: 'Name'
                },
                {
                    mapping: 'JobType',
                    name: 'JobType'
                },
                {
                    mapping: 'ClientPo',
                    name: 'ClientPO'
                },
                {
                    mapping: 'FilesOver',
                    name: 'FilesOver'
                },
                {
                    mapping: 'PreviousJobId',
                    name: 'PreviousJobId'
                },
                {
                    mapping: 'EstimateValue',
                    name: 'Estimate'
                },
                {
                    mapping: 'SalesContact',
                    name: 'SalesContact'
                },
                {
                    mapping: 'AccountHandler',
                    name: 'AccountHandler'
                },
                {
                    mapping: 'AssemblyTime',
                    name: 'AssemblyTime'
                },
                {
                    mapping: 'DespatchDate',
                    name: 'DespatchDate'
                },
                {
                    mapping: 'ProductionFiles',
                    name: 'ProductionFiles'
                },
                {
                    mapping: 'Notes',
                    name: 'Notes'
                },
                {
                    mapping: 'Quantity',
                    name: 'JobQuantity'
                },
                {
                    mapping: 'DeliveryDate',
                    name: 'DeliveryDate'
                },
                {
                    mapping: 'ProjectId',
                    name: 'ProjectId'
                }
    ],
        proxy: {
           type: 'ajax',
           url: 'https://www.xxx.localhost/',
               api:
               {
                  read: '/Jobs/Read/' + jId, 
                  update: '/Jobs/Update',
                  create: '/Jobs/Update',
                  destroy: '/Jobs/Remove'
               },
               reader: {
                           type: 'json',
                           root: 'Jobs',
                           successProperty: 'success',
                           totalProperty: 'Total'
                       }
           }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:06:34.143

尝试将以下内容添加到您的模型中：

```
...
idProperty: 'Id',
... 
```

# sql-server - 结合 2 个简单的 SQL Server 查询？

> ID：10519649
> 
> 赞同：0
> 
> 时间：2012-05-09T15:55:02.857
> 
> 标签：sql-server, sql-server-2008, tsql

我有一张桌子：

```
id | Val
____________
1  | a
2  | s
3  | e
4  | f
5  | h 
```

我有一个接受 2 个参数的查询：

```
@id1 int
@id2 int 
```

此查询有 2 个内部变量：

```
@val1 int
@val2 int 
```

我需要为这些变量设置值：比如 -

```
select @val1=val from where id=@id1
select @val2=val from where id=@id2 
```

我想用**一个**查询来做......我试过了：

```
select @val1=val , @val2=val  
from  table
where id=@id2 or  id=@id1 
```

问题是 ：

`@val1`应该设置为`val`仅当`id=@id1`

**和**

`@val2`应该设置为`val`仅当`id=@id2`

（当 id=@id1 时，@val2 呢？它将获得什么价值？）

如何在 1 中编写这 2 个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:07:27.590

```
SELECT 
      @val1=CASE WHEN id=@id1 THEN Val ELSE @val1 END
    , @val2=CASE WHEN id=@id2 THEN Val ELSE @val2 END
FROM table
WHERE ID IN (@id1, @id2) 
```

要测试它：

```
CREATE TABLE #tmp (ID INT, VAL CHAR(1))
INSERT INTO #tmp VALUES (1,'a')
INSERT INTO #tmp VALUES (2,'s')
INSERT INTO #tmp VALUES (3,'e')
INSERT INTO #tmp VALUES (4,'f')
INSERT INTO #tmp VALUES (5,'h')

DECLARE @id1 INT=1
DECLARE @id2 INT=4

DECLARE @val1 CHAR(1)
DECLARE @val2 CHAR(1)

SELECT 
      @val1=CASE WHEN id=@id1 THEN Val ELSE @val1 END AS Val1
    , @val2=CASE WHEN id=@id2 THEN Val ELSE @val2 END AS Val2
FROM #tmp
WHERE ID IN (@id1, @id2)

SELECT @val1, @val2  --Returns a, f

DROP TABLE #tmp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:39:16.180

您还可以使用 UNION，这可能会或可能不会增加查询的可读性，具体取决于您询问的对象。我发现 CASE 语句或临时表解决方案更具可读性。

```
select @val1=val from where id=@id1 
UNION
select @val2=val from where id=@id2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:00:20.283

它对你有用吗：

```
select @val1=val1 , @val2=val2 
FROM
(
select  
MAX(CASE WHEN id = @id1 THEN val END) AS val1,
MAX(CASE WHEN id = @id2 THEN val END) AS val2  
from  table 
where id=@id2 or  id=@id1 
)a 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T16:03:03.233

怎么样？

```
select (select @val1=val from where id=@id1) as val1,
(select @val2=val from where id=@id2) as val2 
```

# ios - iOS - 滚动视图和 setContentSize

> ID：10519650
> 
> 赞同：1
> 
> 时间：2012-05-09T15:55:06.347
> 
> 标签：ios, xcode, uiscrollview, uitapgesturerecognizer

# 问题

我有一个滚动视图，里面有一些东西。要将信息加载到它，我使用的是`UITapGestureRecognizer`. 当点击它时，我的内容被加载到我的`mainScrollView`. 这张图片将有助于说明我要解释的内容。

![在此处输入图像描述](../Images/a47e458d46b08d0c3dc29944ea252b92.png)

这是我`setContentSize`在点击手势运行后设置的方法：

```
 CGSize s = self.mainScrollView.frame.size;
    s.height = self.bodyTxt.frame.origin.y + self.bodyTxt.frame.size.height;
    [self.mainScrollView setContentSize:s]; 
```

我正在`mainScrollView`根据 的高度设置 的高度`bodyTxt`，现在一切正常。

# 问题

如果我再次点击此手势以将相同的内容加载到我的滚动视图中，`bodyTxt`动画将滚动到底部，这使得用户必须滚动回滚动视图的顶部。

如果我第三次点击它，它就会恢复正常，内容回到滚动视图的顶部。

每次点击时，`mainScrollView`从顶部到底部的交替动画...

我不确定是什么导致了这个问题，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:17:03.810

如果每次调整大小时都将内容偏移量设置为 0，也许这会对您有所帮助

[mainScrollView setContentOffset:]

# php - 使用 PHPExcel 在电子表格中创建表格

> ID：10519652
> 
> 赞同：9
> 
> 时间：2012-05-09T15:55:10.740
> 
> 标签：php, phpexcel

在寻找答案时，我发现了很多关于将表格转换为电子表格或将电子表格输出为表格的问题，但没有关于使用 PHPExcel 在电子表格中创建 Excel 表格的问题。

我想在 Excel 中创建一个表格 - 也就是说，我想将一部分单元格/数据与电子表格的其余部分隔离开来，以便可以独立于工作表的其余部分对数据进行排序和过滤。这与在 Excel中执行`Insert`->相同。`Table`

这似乎是一件很常见的事情，但我在 PHPExcel 文档中找不到任何方法。

**如何使用 PHPExcel 在电子表格中创建表格？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T19:24:38.737

Insert/Table 只是一个 GUI“快捷方式”方法，用于对单元格块进行样式设置和设置自动过滤器。这两个都可以使用 PHPExcel 作为单独的任务来完成，但该库不提供通过单个方法调用执行此操作的“快捷方式”方式。

查看开发者文档的第 4.6.25 节，以及分发版 /Tests 目录中的 10autofilter.php 示例

# php - 在变量之间添加空格

> ID：10519653
> 
> 赞同：-5
> 
> 时间：2012-05-09T15:55:22.667
> 
> 标签：php

我正在为班级做一个项目，我需要在城市国家国家和 zip 变量之间简单地放置一个空格。请帮忙！谢谢！

代码如下所示：

```
echo "<p>";
echo $weather['current_observation']['display_location']['city']; 
echo $weather['current_observation']['display_location']['state']; 
echo $weather['current_observation']['display_location']['country']; 
echo $weather['current_observation']['display_location']['zip']; 
echo "</p><p>";
echo $weather['current_observation']['observation_time_rfc822'];
echo "</p><p>";
echo $weather['current_observation']['weather'];
echo "</p><p>";
echo $weather['current_observation']['temperature_string'];
echo "</p><p>";
echo $weather['current_observation']['wind_string'];
echo "</p>"; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T15:57:46.550

`echo '&nbsp';`在要添加空格的任何回显线之后回显。

或如评论中所述：

> *“不需要不间断的空间。常规`echo " ";`就可以了。- ceejayoz 2012 年 5 月 9 日 16:01”*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T15:57:41.120

怎么样

```
echo $weather['current_observation']['display_location']['city']; 
echo ' ';
echo $weather['current_observation']['display_location']['state']; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T15:58:43.670

您可以通过这种方式添加空格

`echo $weather['current_observation']['display_location']['city'] . " ";`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T16:01:02.413

最简单的：

```
echo " "; 
```

如果这不能解决问题，那么您已经将重要的细节排除在您的问题之外。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T15:58:42.533

您可以添加到字符串的末尾`.`

所以`"foo" . "bar"`返回`"foobar"`

我会写

```
echo $weather['current_observation']['display_location']['city'] . ' '; 
echo $weather['current_observation']['display_location']['state'] . ' '; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-09T16:01:24.373

对于正常空间做。

```
 echo $weather['current_observation']['display_location']['city'] . " ";
 echo $weather['current_observation']['display_location']['state'] . " ";
 echo $weather['current_observation']['display_location']['country'] . " ";
 echo $weather['current_observation']['display_location']['zip'] . " "; 
```

或用于 HTML 间距。

```
 echo $weather['current_observation']['display_location']['city'] . "&nbsp;";
 echo $weather['current_observation']['display_location']['state'] . "&nbsp;";
 echo $weather['current_observation']['display_location']['country'] . "&nbsp;";
 echo $weather['current_observation']['display_location']['zip'] . "&nbsp;"; 
```

# python - matplotlib 图中的链接时间轴（x 轴）

> ID：10519662
> 
> 赞同：3
> 
> 时间：2012-05-09T15:55:54.473
> 
> 标签：python, matplotlib, figure

这是基于生成第二个 x 轴，如上一篇文章中所述：

[matplotlib：添加具有透明背景的第二个轴（）？](https://stackoverflow.com/questions/7761778/matplotlib-adding-second-axes-with-transparent-background)

下面包括用于生成带有两个 x 轴的图的代码，这些 x 轴代表相同数据的两个不同时间单位：相对时间 ( `rel_time`) 和绝对时间 ( `abs_time`)。虽然上述方法很好地生成了两个轴，但它们之间的数据缩放比例不同。

如何生成一个带有两个链接的 x 轴的图？也就是说，绘制在两个轴上的数据应该相互对齐。

此外，有没有办法在不绘制数据（`y`）两次的情况下做到这一点？最后数据应该对齐，所以第二个图就在那里生成一个新的轴。

下面的代码：

```
# Based on question:
# https://stackoverflow.com/questions/7761778/matplotlib-adding-second-axes-with-transparent-background
import time
import numpy as np
import matplotlib.pyplot as plt

# Plot Data
rel_time = np.arange(-10.0, 40)  # seconds
abs_time = rel_time + time.time()  # epoch time
y = np.array([1.1, 1.2, 1.2, 1.1, 1.2, 1.1, 1.3, 1.3, 1.2, 1.1, 1.4, 1.7, 
              2.5, 2.6, 3.5, 4, 4.3, 4.8, 5, 4.9, 5.3, 5.2, 5.5, 5.1, 
              5.4, 5.6, 5.1, 6, 6.2, 6.2, 5.5, 6.1, 5.4, 6.3, 6.2, 6.5,
              6.3, 6.1, 6.5, 6.6, 6.1, 6.6, 6.5, 6.4, 6.6, 6.5, 6.2, 6.6,
              6.4, 6.8])  # Arbitrary data

fig = plt.figure()
fig.subplots_adjust(bottom=0.25)  # space on the bottom for second time axis

host = fig.add_subplot(111)  # setup plot

p1 = host.plot(rel_time, y, 'b-')  # plot data vs relative time
host.set_xlabel("Relative Time [sec]")
host.set_ylabel("DATA")

newax = host.twiny()  # create new axis
newax.set_frame_on(True)
newax.patch.set_visible(False)
newax.xaxis.set_ticks_position('bottom')
newax.xaxis.set_label_position('bottom')
newax.spines['bottom'].set_position(('outward', 50))
newax.plot(abs_time, y, 'k-')  # plot data vs relative time
newax.set_xlabel("Absolute Time [Epoch sec]")

plt.show() 
```

生成一个 x 轴不匹配的时间序列图： ![显示不同时间单位的不匹配 x 轴的时间序列图](../Images/747bfdcfed1b451c1e75eef39ed856d0.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T17:17:38.013

您需要为 x 轴指定限制。如果您添加这些行，它将执行此操作：

```
host.set_xlim(rel_time[0],rel_time[-1])
newax.set_xlim(abs_time[0],abs_time[-1]) 
```

绘制两条曲线：

![在此处输入图像描述](../Images/93d9dfe03af9d7b6e90a122717c196c8.png)

如果您不想绘制两次数据，只需删除该`newax.plot()`行即可。

# sql-server - SQL Server 最佳 X 匹配项

> ID：10519665
> 
> 赞同：3
> 
> 时间：2012-05-09T15:55:59.530
> 
> 标签：sql-server, sql-server-2008

我正在尝试执行一个查询，该查询可以返回 5 个条件中的大多数匹配的结果。但如果有一个 5 of 5 匹配，则优先。

为了说明我的问题，已经准备了以下 SQL。

```
declare @tmp table (
id int identity
,field1 nvarchar(60)
,field2 nvarchar(60)
,field3 nvarchar(60)
,field4 nvarchar(60)
,field5 nvarchar(60)
)

insert into @tmp values
    ('Bob','Jones','Mr','000001','bob@example.com')
insert into @tmp values
    ('Bill','Jones','','000002','bill@example.com')
insert into @tmp values
    ('Sue','Jones','Mrs','000003','jones@example.com')
insert into @tmp values
    ('Adrian','Jones','','000001','jones@example.com')
insert into @tmp values
    ('Bertha','Jones','Mrs','000001','jones@example.com')

select *
from @tmp

declare @key1 nvarchar(60), @key2 nvarchar(60), @key3 nvarchar(60), @key4 nvarchar(60), @key5 nvarchar(60)

select
    @key1 = 'Bertha'
    ,@key2 = 'Jones'
    ,@key3 = 'Mrs'
    ,@key4 = '000001'
    ,@key5 = 'jones@example.com'

select
    *
    ,case when field1 = @key1 then 1 else 0 end as X1
    ,case when field2 = @key2 then 1 else 0 end as X2
    ,case when field3 = @key3 then 1 else 0 end as X3
    ,case when field4 = @key4 then 1 else 0 end as X4
    ,case when field5 = @key5 then 1 else 0 end as X5
from @tmp 
```

如果您查看结果，您可以看到第 3 行和第 4 行在 3 个字段上匹配，但第 5 行在 5 个字段上匹配。因此，这是一个相同的匹配，这就是我想要返回的匹配。

但是，如果没有插入第 5 行，那么第 3 行和第 4 行是最佳匹配，在这种情况下，我希望返回那些。

我一直在努力思考如何最好地做到这一点，如果可以有所作为，我正在使用 SQL Server 2008。

在实际场景中，它们并不像本例那样都是简单的case语句，而是sub-select到其他表中。

我已经研究过 group by 并拥有，但我看不出在这种情况下如何使用它们。

如何在 SQL Server 中跨多个条件进行“最佳”类型匹配？

如果这看起来像页面告诉我的那样“主观”，请说出来，我会删除它。但我不认为这是主观的，因为这是我认为通常要求的 SQL 重复数据删除方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:00:53.567

考虑将您的列滚动`x`到一个 SUM 中以获得分数。这是您可以从中查询的 CTE（公用表表达式）。

```
;with mysum AS (
select    *
    ,case when field1 = @key1 then 1 else 0 end as X1
    ,case when field2 = @key2 then 1 else 0 end as X2
    ,case when field3 = @key3 then 1 else 0 end as X3
    ,case when field4 = @key4 then 1 else 0 end as X4
    ,case when field5 = @key5 then 1 else 0 end as X5
from @tmp)

SELECT id, field1, field2, field3, field4, field5, 
       SUM(x5+x4+x3+x2+x1) AS MatchScore 
FROM MySum
GROUP BY id, field1, field2, field3, field4, field5
ORDER BY MatchScore DESC 
```

# svn - 检查 subversion 中的最后一条提交消息

> ID：10519667
> 
> 赞同：22
> 
> 时间：2012-05-09T15:56:10.030
> 
> 标签：svn, version-control, command-line

为什么当我在提交后执行以下命令时，我得到了提交消息，但在所有其他时候我只得到一行破折号？

```
svn log -r head 
```

很多时候我想浏览到我的文件系统中的一个分支，检查它在颠覆中代表什么分支，并检查最后的提交消息是什么，但是这个命令似乎只有在我*刚刚*提交后运行它时才有效。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-09T16:01:33.640

如果您想获取分支的最后提交消息，请尝试以下操作：

```
svn log -l 1 BRANCH_URL 
```

这里`-l 1`是为了将日志的大小限制为最后一条消息。

如果您想检查当前工作副本中的最后一条提交消息，请尝试以下操作：

```
svn log -r COMMITTED 
```

# magento - Magento addAttributeToFilter 与多选

> ID：10519670
> 
> 赞同：4
> 
> 时间：2012-05-09T15:56:15.667
> 
> 标签：magento, addattribute

我在 Magento 多选属性上使用 addAttributeToFilter 时遇到问题。

我有一个汽车品牌的多选属性，所以内容是“奥迪”、“宝马”等。在我的示例中，我有一个轮胎产品，我从多项选择中选择了 5 个品牌。

我想展示将“BMW”品牌作为其选定字段之一的产品。

我已经尝试了以下所有这些都不起作用：

```
$products->addAttributeToFilter('make', array('like' => '%BMW%'));  
$products->addFieldToFilter('make', array('like' => '%BMW%'));  
$products->addAttributeToFilter('make', array('like' => '%38%')); // id of the attribute option 
```

似乎没有任何效果。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-09T16:39:08.813

解决方案是使用`Find In Set`查询，例如：

```
$this->_productCollection->addAttributeToFilter("make", array("finset"=>"38")); 
```

可以在这里看到讨论：http: [//www.magentocommerce.com/boards/viewthread/201312/](http://www.magentocommerce.com/boards/viewthread/201312/)

以及不同选项的列表：http: [//www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-8-varien-data-collections](http://www.magentocommerce.com/knowledge-base/entry/magento-for-dev-part-8-varien-data-collections)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-05T07:42:13.387

试试下面的语法 finset 它对我有用。

```
$collection->addAttributeToFilter($attribute,
    array(
        array('finset'=> array('237')),
        array('finset'=> array('238')),
        array('finset'=> array('239')),
    )
); 
```

# c - 构建最新的 Vala 版本（检查失败并且 valac 找不到共享库）

> ID：10519673
> 
> 赞同：1
> 
> 时间：2012-05-09T15:56:25.100
> 
> 标签：c, gcc, build, autotools, vala

我已经下载了最后两个[最新版本的 VALA](https://live.gnome.org/Vala/Release)（**v0.17.0**和**0.16.0**）并尝试在我的开发机器上构建（Ubuntu 10.0.4 和 gcc 4.4.3）。

当我构建 v **0.17.0**时，我注意到屏幕上闪现了一些错误。我运行`make check`并且`make test`都失败了（cc 错误）。

使用 v **0.17.0**，当我运行 valac 时出现以下错误：

> valac：加载共享库时出错：libval​​a-0.18.so.0：无法打开共享对象文件：没有这样的文件或目录

注意共享库的不同版本号（这是一个错误吗？）。无论如何，我搜索了我的整个系统以查看该文件是否是在我系统的其他地方创建的。未找到该文件。

然后我下载了 v **0.16.0**并构建了它。`make check`也`make test`再次失败。然而这次当我启动 valac 可执行文件时，我得到了这个错误：

> valac：加载共享库时出错：libval​​a-0.16.so.0：无法打开共享对象文件：没有这样的文件或目录

请注意，shlib low 具有正确的版本号。我满怀希望，然后我在我的机器上搜索了 shlib：

```
someone@yourbox:~/work/dev/c++/3rdparty/vala/vala-0.16.0$ find . -name 'libvala*' -type f 2>/dev/null
./codegen/libvala-0.16.la
./codegen/.libs/libvala-0.16.lai
./codegen/.libs/libvala-0.16.so.0.0.0
./libvala.pc
./libvala.pc.in
./vapi/libvala-0.16.vapi
./ccode/libvalaccode.la
./ccode/.libs/libvalaccode.a
./libvala-0.16.pc
./vala/.libs/libvalacore.a
./vala/libvalacore.la 
```

我正要创建一个指向共享库的符号链接，并将其放在路径中，以便 valac 可以找到它 - 直到我意识到我不应该这样做（make install 应该已经这样做了）。

这让我相信 v **0.17.0**和**0.16.0**都坏了 - 有没有其他人知道这一点 - 或者我错过了什么？

有没有人设法获得任何最新版本来构建 - 我需要什么来修复构建？（否则，vala 的最后一个稳定版本是什么）？

**[[更新]]**

我已经制作了 0.17.0 的构建日志，可[在此处获得](http://pastebin.com/nBrEwAX4)

make check 的输出（同样是 foe v 0.17.0）也可以[在这里找到](http://pastebin.com/s2xxEpDD)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-11T04:32:04.843

`make check`失败是无关的。一些测试用例依赖于 GDBus，它仅在 2.26 版本中添加到 GIO，根据[http://packages.ubuntu.com/lucid/libglib2.0-0，Ubuntu](http://packages.ubuntu.com/lucid/libglib2.0-0) 10.04 有 2.24。

您看到的 0.18 是 API/ABI 版本，并且是正确的。奇数次要版本是不稳定的，并带有下一个稳定版本的 API/ABI 版本（将 0.17.x 版本视为最终将成为 0.18 稳定系列的不稳定开发版本）。

至于找不到库，取决于您安装的前缀，您可能只需要运行`ldconfig`. AFAIK 不再需要此步骤（运行 Ubuntu 的人必须确认），但 10.04 是很久以前的......

如果您没有安装到标准位置，您可能需要相应地调整您的 LD_LIBRARY_PATH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-17T17:10:15.630

参考： [https ://help.ubuntu.com/community/Vala](https://help.ubuntu.com/community/Vala)

如果您使用 sudo make install ，当您发出第一个 valac 命令时，您可能会收到以下错误消息

valac：加载共享库时出错：libval​​a.so.0：无法打开共享对象文件：没有这样的文件或目录

这意味着编译器找不到这些库，但是它们正是它们应该在的位置，即在目录 /usr/local/lib 中。要在编译时更正错误，您将运行命令 sudo ldconfig 将链接器更新为动态库。

所以你可以运行这个命令：

> sudo ldconfig /usr/local/lib

添加此库路径

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T19:45:49.977

我收到错误：

> 加载共享库时出错：libval​​a-0.18.so.0：无法打开共享对象文件：没有这样的文件或目录

**所以** 我这样做了，现在正在工作

`sudo apt-get install build-essential flex bison libglib2.0-dev`

`sudo apt-get install checkinstall devhelp libgtk2.0-dev`

还有那套，现在一切都很好..希望对你有帮助

# sql - SQL 查询压缩

> ID：10519676
> 
> 赞同：0
> 
> 时间：2012-05-09T15:56:34.117
> 
> 标签：sql, tsql

我有两个非常相似的 SQL 查询，它们返回在不同工作区域上花费的分钟数。

是否可以将它们压缩为一个查询？

所需参数：

显示当前月份（IE 1 表示 1 月，4 表示 4 月）将两个查询的总分钟数显示为一个查询。

以下是我目前的疑问：

```
SELECT SUM(r.Minutes_Spent) AS 'Custom Programming and Consulting'
FROM TK_Project p
INNER JOIN TK_Task t
ON p.Project_ID = t.Project_ID JOIN TK_Time_Record r
ON t.ID = r.Task_ID
WHERE p.Company = 162
AND p.Name ='Technical Support'
AND r.Work_Date BETWEEN  '04/01/2001'  AND  '04/30/2012'
AND r.Type NOT LIKE '%non%'
AND (r.Type = 'Programming-Billable' OR r.Type = 'Consulting-Billable')

SELECT SUM(r.Minutes_Spent) AS 'Tech. Support / Data Maint. / Training'
FROM TK_Project p
INNER JOIN TK_Task t
ON p.Project_ID = t.Project_ID JOIN TK_Time_Record r
ON t.ID = r.Task_ID
WHERE p.Company = 162
AND p.Name ='Technical Support'
AND r.Work_Date BETWEEN  '04/01/2001'  AND  '04/30/2012'
AND r.Type NOT LIKE '%non%'
AND (r.Type = 'Data Maintenance' OR r.Type = 'Tech Support-Billable' OR r.Type = 'Training') 
```

以下是他们提供的数据：

```
Custom Programming and Consulting
90

Tech. Support / Data Maint. / Training
105 
```

是否可以将上述查询推送到一个查询中并返回以下数据：

```
Month      Custom Programming and Consulting      Tech. Support / Data Maint. / Training
  4                    90                                           105 
```

该月份需要显示查询的这一部分中的当前月份：

```
AND r.Work_Date BETWEEN  '04/01/2001'  AND  '04/30/2012' 
```

我不确定实现这一目标的最佳方法。我需要月份，因为我需要将其升级到的下一部分是从今天开始返回 12 个月以获取图形条形图报告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:15:04.910

是的 。. . 您只需要 SELECT 子句中的 case 语句以您需要的方式对值进行分组：

```
SELECT 
  SUM(case 
        when r.Type in ('Programming-Billable', 'Consulting-Billable')
        then r.Minutes_Spent
        end) AS "Custom Programming and Consulting",
  SUM(case 
        when (r.Type in ('Data Maintenance', 'Tech Support-Billable', 'Training')
        then r.Minutes_Spent
        end) AS "Tech. Support / Data Maint. / Training"
FROM TK_Project p 
INNER JOIN TK_Task t
  ON p.Project_ID = t.Project_ID 
JOIN TK_Time_Record r
  ON t.ID = r.Task_ID
WHERE p.Company = 162 
  AND p.Name ='Technical Support' 
  AND r.Work_Date BETWEEN  '04/01/2001'  AND  '04/30/2012' 
  AND r.Type NOT LIKE '%non%' 
```

# ipad - 我可以在 Web 应用程序/UiWebView 中的 iPad 键盘上设置区域设置/语言吗？

> ID：10519677
> 
> 赞同：0
> 
> 时间：2012-05-09T15:56:37.227
> 
> 标签：ipad, localization, uiwebview, webkit

我有一个 UIWebView，用户可以在其中通过本机键盘输入内容。是否可以设置语言环境，以便 Next、Prev 和 Done 等按钮使用本地语言？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T17:39:36.533

No, these are controlled by Safari, which gets the localization from the system.

# sencha-touch-2 - 如何在 Sencha Architect 2 中添加“Ext.require”

> ID：10519681
> 
> 赞同：2
> 
> 时间：2012-05-09T15:56:47.943
> 
> 标签：sencha-touch-2, sencha-architect

[按照此处](http://docs.sencha.com/touch/2-0/#!/guide/native_apis)的说明，为了使用本机 API，我需要在代码中添加一个“Ext.require()”。我如何在 Sencha Architect 2 中做到这一点？似乎自定义函数或事件之外的所有内容都是只读的，所以我不能只添加我自己的临时代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T23:29:50.017

正如 Bharat Nagwani 所建议的，Architect 现在包括一种方法来要求您希望动态加载的任何类。

几周前，我和 Luca Candela 在伦敦展示了一个小应用程序，演示了 Ext.device.Camera API 的使用。 [https://github.com/CaliLuke/NativeContacts](https://github.com/CaliLuke/NativeContacts)

为了在您的应用程序中包含设备 api，请执行以下操作：

*   进入 Sencha SDK 并将设备文件夹复制到您的项目目录中
*   在 Architect 中，单击 Application 节点
*   在配置面板中搜索“requires”
*   将“Ext.device.Camera”添加到需要的配置中
*   在配置面板中搜索“loader”
*   点击 Loader Config 右侧的 +
*   单击新添加的“Loader”节点（Application 的子节点）
*   添加路径 '{"Ext.device": "device/"}

所以总结一下，确保文件在那里。告诉应用程序您需要该类，然后告诉加载程序在哪里可以找到您刚刚放入项目文件夹的那些文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T18:13:26.743

Architect 中的下一个更新需要作为 Application 节点上的属性，因此您可以在那里添加它。现在只需在您的应用程序启动功能中添加需求，因为它是可写的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-01T08:04:45.990

需要代码的视图（或适用的MVC）定义了这个需求，所以只在需要的时候调用。

```
Ext.define('MyApp.view.SomePageView', {
    extend: 'Ext.Panel',
    alias: 'widget.somepageview',

    requires: [
        'Ext.device.Camera', // requires go here!
        '...'
    ] 
```

对于本机需求（不是自定义扩展的东西），请查看 Sencha Docs 的右侧列。对于此示例，对于 ST2.3.1，它可以位于[此处](http://docs.sencha.com/touch/2.3.1/#!/api/Ext.device.Camera)。在顶部，您可以看到 Ext.device.Camera 直接从 Ext.Base 下降，不需要 Ext.device。在定义的需求块的底部，有 Camera.js 的链接。打开该链接，您可以确切地看到发生了什么。通过定义`requires: ['Ext.device.Camera']`，您还可以自动加载所有这些操作所需的内容。

在 Architect 中，当您定义主 MVC 或 S 时，它被添加到 Application Requires。所以在 Architect 中，我将能够看到在 Application > Ext.app.Controller > views 下列出的 SomePageView。在构建过程中，通过应用程序的这条需求链将包含在最终包中，无论是使用 Architect 的构建，还是`sencha app build`使用 Sencha Cmd 等命令行调用。

# php - Google Drive SDK 示例 PHP 异常

> ID：10519684
> 
> 赞同：1
> 
> 时间：2012-05-09T15:56:52.813
> 
> 标签：php, google-drive-api

您好，我尝试按照以下步骤为 Google Drive Api 设置 Google 代码示例： [https ://developers.google.com/drive/examples/php](https://developers.google.com/drive/examples/php)

但是当我尝试身份验证时出现异常：

> 异常“apiAuthException”，消息“获取 OAuth2 访问令牌时出错，消息：“redirect_uri_mismatch”

知道我是否会在配置过程中遗漏一些东西吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:20:32.430

您是否在 API 控制台中注册了应用程序并且重定向 URI 与您的 Web 服务器的 URI 匹配？

您是否在 config.php 中设置了 REDIRECT_URI（连同 CLIENT_ID、CLIENT_SECRET）？

[https://developers.google.com/drive/examples/php#setting_up_the_client_id_client_secret_and_other_oauth_20_parameters](https://developers.google.com/drive/examples/php#setting_up_the_client_id_client_secret_and_other_oauth_20_parameters)

# python - 用 Python (numpy) 实现主题模型

> ID：10519690
> 
> 赞同：5
> 
> 时间：2012-05-09T15:57:08.150
> 
> 标签：python, numpy, machine-learning, lda, topic-modeling

最近，我使用 numpy 在 Python 上实现了 LDA 主题模型的 Gibbs 采样，参考了网站上的一些代码。在 Gibbs 采样的每次迭代中，我们删除一个（当前）单词，根据从 LDA 模型推断的后验条件概率分布为该单词采样一个新主题，并更新单词主题计数，如下所示：

```
for m, doc in enumerate(docs): #m: doc id
  for n, t in enumerate(doc): #n: id of word inside document, t: id of the word globally
    # discount counts for word t with associated topic z
    z = z_m_n[m][n]
    n_m_z[m][z] -= 1
    n_z_t[z, t] -= 1 
    n_z[z] -= 1
    n_m[m] -= 1

    # sample new topic for multinomial                
    p_z_left = (n_z_t[:, t] + beta) / (n_z + V * beta)
    p_z_right = (n_m_z[m] + alpha) / ( n_m[m] + alpha * K)
    p_z = p_z_left * p_z_right
    p_z /= numpy.sum(p_z)
    new_z = numpy.random.multinomial(1, p_z).argmax() 

    # set z as the new topic and increment counts
    z_m_n[m][n] = new_z
    n_m_z[m][new_z] += 1
    n_z_t[new_z, t] += 1
    n_z[new_z] += 1
    n_m[m] += 1 
```

在上面的代码中，我们使用多项式 scipy 函数对一个新的（单个）z 进行采样。

现在，我想实现[本文](http://people.kmi.open.ac.uk/yulan/PAPERS/JST_CIKM09.pdf)的联合情感主题模型。现在，我需要以下结构来跟踪所需的计数：

```
3D matrix containing # occurrences for a word for each topic, for each sentiment
3D matrix containing # occurrences for a topic, for each sentiment, for each document
2D matrix containing # occurrences for a topic, for each sentiment
2D matrix containing # occurrences for a sentiment for each document 
```

现在问题来了：在这个 Gibbs 采样器中，对于文档中看到的每个单词，现在都从条件后验中采样了一个新主题和一个情感标签（论文的第 4 页等式 5）。我现在如何在 Python 中“对这两个值进行采样”？

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-10T02:26:38.243

试试这个。从主题和情感标签的联合分布中采样仅意味着整个 T x S 矩阵的总和应为 1。

```
docs=[[0,1],[0,0],[1,0,1]]
D=len(docs)
z_d_n=[[0 for _ in xrange(len(d))] for d in docs]
l_d_n=[[0 for _ in xrange(len(d))] for d in docs]

V=2
T=2
S=2
n_m_j_k=numpy.zeros( (V,T,S) )
n_j_k_d=numpy.zeros( (T,S,D) )
n_j_k=numpy.zeros( (T,S) )
n_k_d=numpy.zeros( (S,D) )
n_d=numpy.zeros( (D) )

beta=.1
alpha=.1
gamma=.1

for d, doc in enumerate(docs): #d: doc id
    for n, m in enumerate(doc): #i: index of the word inside document, m: id of the word in the vocabulary
        # j is the topic
        j = z_d_n[d][n]
        # k is the sentiment
        k = l_d_n[d][n]
        n_m_j_k[m][j][k] += 1
        n_j_k_d[j][k][d] += 1
        n_j_k[j][k] += 1
        n_k_d[k][d] += 1
        n_d[d] += 1 

for d, doc in enumerate(docs): #d: doc id
    for n, m in enumerate(doc): #i: index of the word inside document, m: id of the word in the vocabulary
        # j is the topic
        j = z_d_n[d][n]
        # k is the sentiment
        k = l_d_n[d][n]
        n_m_j_k[m][j][k] -= 1
        n_j_k_d[j][k][d] -= 1
        n_j_k[j][k] -= 1
        n_k_d[k][d] -= 1
        n_d[d] -= 1 

        # sample a new topic and sentiment label jointly
        # T is the number of topics
        # S is the number of sentiments
        p_left = (n_m_j_k[m] + beta) / (n_j_k + V * beta) # T x S array
        p_mid = (n_j_k_d[:,:,d] + alpha) / numpy.tile(n_k_d[:,d] + T * alpha, (T,1) )
        p_right = numpy.tile(n_k_d[:,d] + gamma,(T,1)) /  numpy.tile(n_d[d] + S * gamma,(T,S))
        p = p_left * p_mid * p_right
        p /= numpy.sum(p)
        new_jk = numpy.random.multinomial(1, numpy.reshape(p, (T*S) )).argmax()
        j=new_jk/T
        k=new_jk%T

        z_d_n[d][n]=j
        l_d_n[d][n]=k
        n_m_j_k[m][j][k] += 1
        n_j_k[j][k] += 1
        n_k_d[k][d] += 1
        n_d[d] += 1 
```

# php - 如何修改 CKEditor 中的“格式”下拉菜单？

> ID：10519691
> 
> 赞同：13
> 
> 时间：2012-05-09T15:57:13.423
> 
> 标签：php, ckeditor

我正在尝试修改 CKEditor 中的“格式”下拉菜单，我认为我已正确遵循所有说明，但它不起作用。

我去了 _source/plugins/format/plugin.js 并改变了

```
CKEDITOR.config.format_tags = 'p;h1;h2;h3;h4;h5;h6;pre;address;div'; 
```

至

```
CKEDITOR.config.format_tags = 'h1;h2;div;p'; 
```

但是，当我添加“格式”下拉菜单时，我仍然会在其中获得所有原始选项 ( `p;h1;h2;h3;h4;h5;h6;pre;address;div`)，而不仅仅是我列出的选项。

我是在编辑错误的文件还是什么？还是我需要做其他事情来让它意识到选项已经改变？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-09T16:18:41.523

您应该编辑配置文件，而不是插件文件。

应该在文件夹的根目录下`ckeditor`，`config.js`

应该从：

```
CKEDITOR.editorConfig = function( config )
{ 
```

因此，您可能希望将其添加到其中（在上述之后，但在结束之前`}`）：

```
config.format_tags = 'h1;h2;div;p'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T10:14:33.870

尼克是对的。您不应该触摸源文件夹。只需使用位于 ckeditor 根目录中的 config.js 文件。另请参阅[CKEditor API 页面](http://docs.cksource.com/ckeditor_api/symbols/CKEDITOR.config.html#.format_tags)以了解更多自定义选项和[此处的开发人员指南](http://docs.cksource.com/CKEditor_3.x/Developers_Guide)。

# regex - 替换任何以@开头的单词

> ID：10519692
> 
> 赞同：0
> 
> 时间：2012-05-09T15:57:14.280
> 
> 标签：regex, coldfusion, coldfusion-9, coldfusion-8

我正在尝试替换字符串中以 @ 开头的任何单词...

我尝试了许多变体，但似乎都没有工作......

```
rereplace(getMessages.term, "[\s]?\B@\w+", "", "ALL") 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T16:29:48.423

CF 的内置正则表达式不支持后视，这是您实现这一目标所需的（因为您想在 @ 的“后面”（之前）查看并验证存在/不存在的内容，而不将其包含在您的匹配）。

但是，您可以轻松地使用 Java，以利用 Java 的正则表达式支持（它确实支持后视），就像这样：

```
<cfset Text = Text.replaceAll('(?<!\w)@\w+','') /> 
```

该`(?<!\w)`部分是一个消极的后视，说“确保在这个位置之前没有 \w”。

您可能还想考虑使用`(?<!\S)`which 将阻止任何非空白字符，或者如果您需要匹配特定字符然后使用`(?<![a-z_\-.,])`或其他。

# plone - 巨大的 PersistentMapping 持久保存在 Plone 中的每个内容对象上

> ID：10519696
> 
> 赞同：1
> 
> 时间：2012-05-09T15:57:20.137
> 
> 标签：plone, zope, zodb

每次保存对象时，都会在实例日志中收到以下警告：

```
[..]deployment/eggs/ZODB3-3.10.5-py2.6-linux-i686.egg/ZODB/Connection.py:660: UserWarning: The <class 'persistent.mapping.PersistentMapping'>
object you're saving is large. (29343532 bytes.) 
```

事实上，储蓄需要很长时间。在事务提交期间将 pdb 放入打印触发器的位置，并确实向我展示了 PersistentMapping 的写入类型：

```
{1: path_to_a_content_object,
 2: path_to_other_content_object,
 ...
 129000: path_to_yetanother_content_object } 
```

似乎我的站点中的每个内容对象都有一个条目。由于在提交期间发生这种情况，我看不到该映射的存储位置。

有没有人有一个指针可能是什么？

非常感谢！亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:26:31.590

看看[http://plone.org/documentation/kb/debug-zodb-bloat](http://plone.org/documentation/kb/debug-zodb-bloat)

# java - 为什么从 .jar 文件运行时没有图像？

> ID：10519700
> 
> 赞同：2
> 
> 时间：2012-05-09T15:57:25.743
> 
> 标签：java, image, jar

我正在尝试让我的面板显示图像作为背景。我已经可以在 NetBeans 中做到这一点，但是当我构建我的 jar 并运行它时，图像并没有显示在那里。我知道我必须以不同的方式访问它。我看过很多教程，但每个教程都展示了如何使用 ImageIcon 来完成，但我不需要那个，我只需要 Image。谁能指出我需要哪段代码来做到这一点？谢谢。

这是我的后台 JPanel 代码：

```
public class JPanelWB extends JPanel { // Creates JPanel with given image as background.

    private Image backgroundImage;

    public JPanelWB(String fileName){
        try {
            backgroundImage = ImageIO.read(new File(fileName));
        } catch (IOException ex) {
            new JDialog().add(new Label("Could not open image."+ex.getMessage()));
        }
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        // Draw the background image.
        g.drawImage(backgroundImage, 0, 0, getWidth(),getHeight(),this);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:20:13.270

是的，您正在尝试将图像作为文件读取——不要这样做，因为 Jar 文件中不存在文件。而是将其作为资源读入。

像这样：

```
public JPanelWB(String resourceName){
   try {
       // backgroundImage = ImageIO.read(new File(resourceName));
      backgroundImage = ImageIO.read(getClass().getResource(resourceName));
   } catch (IOException ex) {
       new JDialog().add(new Label("Could not open image."+ex.getMessage()));
   }
} 
```

但请注意，资源路径与文件路径不同。资源路径与类文件的位置有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-08T19:53:14.303

如果您想阅读新图像并将其作为背景导入，比我聪明的人已经回答了您的问题。

但是，如果您的问题与我的类似，那么这可能会有所帮助：

如果您已经有图像要显示，那么关键是从绝对路径调用它们。可执行类形式 JAR 将读取在虚拟机中创建的驱动器，而不是计算机中的物理驱动器。

将图像放在短路径文件夹中，例如

C:\J\项目\img\

并用绝对路径调用它们

"C:\\J\\proj\\img\\your_image.png" // （不要忘记双反斜杠。）

（如果您不介意路径长度，请将它们放在项目包内的图像文件夹中，然后从那里调用它们。）

NetBeans 会将它们打包到具有绝对路径的 JAR 中。在执行时，JRE 将在其中创建包含该路径的 JVM，从 JAR 中获取图像并将它们放入该虚拟路径。类将能够找到它们，因为它不是从物理驱动器读取路径，而是从自己在 JVM 中新创建的虚拟驱动器读取路径。

在这种情况下，避免 ImageIcon 只会更混乱，而不是更少。

您可以将“blackBoard”作为 JLabel 添加为 JFrame 的背景，将其布局设置为 null，如下所示：

```
 private JLabel blackBoard;
    private JLabel noteToSelf;
    //.....
    blackBoard = new JLabel();
    noteToSelf = new JLabel();
    //.....

    // putting JLabel "blackBoard" as background into JFrame
    blackBoard.setIcon(new ImageIcon("c:\\Java\\images\\MarbleTable.png"));
    getContentPane().add(blackBoard);
    blackBoard.setBounds(1, 1, 400, 440);
    blackBoard.setLayout(null); 
```

然后像这样将组件添加到“blackBoard”而不是您的 JFrame 中。

```
 // putting JLabel "noteToSelf" onto background
    noteToSelf.setIcon(new ImageIcon("c:\\Java\\images\\Sticker_a1.png"));
    // or:  noteToSelf.setText("Remind me at 6:30am...");
    blackBoard.add(noteToSelf);
    noteToSelf.setBounds(noteX, noteY, 64, 48); 
```

现在你的 JFrame 是桌面，“blackBoard”是上面的表格。

希望这可以帮助。

# sql - SQL Server - XML 的 XQuery

> ID：10519701
> 
> 赞同：0
> 
> 时间：2012-05-09T15:57:25.760
> 
> 标签：sql, xml, xquery

就像其他帖子一样，我需要从表中检索在 Xml 列上应用条件的任何行，例如，假设您有一个这样的 xml 列：

```
<DynamicProfile xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/WinTest">
  <AllData xmlns:d2p1="http://schemas.microsoft.com/2003/10/Serialization/Arrays">
    <d2p1:KeyValueOfstringstring>
      <d2p1:Key>One</d2p1:Key>
      <d2p1:Value>1</d2p1:Value>
    </d2p1:KeyValueOfstringstring>
    <d2p1:KeyValueOfstringstring>
      <d2p1:Key>Two</d2p1:Key>
      <d2p1:Value>2</d2p1:Value>
    </d2p1:KeyValueOfstringstring>
  </AllData>
</DynamicProfile> 
```

我的查询将能够返回 node value `<d2p1:Key> = 'some key value'`AND node value的所有行`<d2p1Value = 'some value value'`。

把它想象成一个动态表，其中 KEY 节点代表列名，Value 节点代表列的值。

以下查询不起作用，因为键和值节点不是连续的：

```
select * from MyTable where
MyXmlField.exist('//d2p1:Key[.="One"]') = 1
AND MyXmlField.exist('//d2p1:Value[.="1"]') = 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:01:31.943

不要将`//d2p1:key[.="One"]`and`//d2p1:Value[.="1"]`作为两个单独的搜索进行查找，而是执行一个同时查找两者的单个查询，如下所示：

`//d2p1:KeyValueOfstringstring[./d2p1:Key="One"][./d2p1:Value=1]`

# sencha-touch-2 - 单击事件到列表中的 div 在 ipad 上不起作用

> ID：10519702
> 
> 赞同：1
> 
> 时间：2012-05-09T15:57:28.547
> 
> 标签：sencha-touch-2

我将 html 添加到 Sencha 列表行，onClick 在 Windows 上的 Chrome 和 Safari 上运行良好，但点击事件在 iPad 上不起作用。请让我知道在 iPad 上制作示例的任何建议。

Sencha Fiddle 示例： [http ://www.senchafiddle.com/#MadlC#SPOJb#psFLV](http://www.senchafiddle.com/#MadlC#SPOJb#psFLV)

代码：

```
var store = Ext.create('Ext.data.Store', {
    fields: ['htmlRow'],
    autoLoad: true,
});

store.add([{ "htmlRow": "<div onclick='func_click1();' style='background:gray;width:70px;float:left'>Click 1</div><div onclick='func_click2()' style='background:yellow;width:70px;float:left'>Click 2</div>" }]);
store.add([{ "htmlRow": "Edt"}]);
store.add([{ "htmlRow": "Jamie"}]);
store.add([{ "htmlRow": "Aaron"}]);
store.add([{ "htmlRow": "Dave"}]);
store.add([{ "htmlRow": "Michael"}]);
store.add([{ "htmlRow": "Abraham"}]);
store.add([{ "htmlRow": "Jay"}]);

//define the application
Ext.application({

    launch: function() {

        Ext.Viewport.add({

            width: '100%',
            height: '100%',

            centered: true,
            hideOnMaskTap: false,

            layout: 'fit',

            items: [{
                xtype: 'list',
                disableSelection:true,  

                itemTpl: '<strong>{htmlRow}</strong>',
                store: store
            }]
        });
    }
});

function func_click1(){
    alert("Why This Click 1 Working on Safari and Google Chrome in Windows, But Not Working on Ipad !");
}
function func_click2(){
    alert("Why This Click 2 Working on Safari and Google Chrome in Windows, But Not Working on Ipad !");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:59:23.743

原因是“onclick”不能与点击输入设备（我的意思是触摸设备）一起使用，因为它是为点击而设计的，正如名称所述。

当您的列表中的一行被触摸时，获取反馈的正确（ST2）方法是收听列表的“itemtap”事件：

```
...
items: [{
            xtype: 'list',
            disableSelection:true,  

            itemTpl: '<strong>{htmlRow}</strong>',
            store: store,
            listeners: {
                 itemtap : function(list, index, target, record, event) {
                     // your code here
                 }
        }]
 ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T06:48:45.987

在 'itemtap' 事件中，您可以检查 'event' 参数以确定您的列表项的哪个区域被点击。在您的情况下，您可以执行以下操作：

*   1）在第一行的两个 div 中添加一个 id：

    store.add([{ "htmlRow": " `<div id='area1' onclick='func_click1();' style='background:gray;width:70px;float:left'>Click 1</div><div id='area2' onclick='func_click2()' style='background:yellow;width:70px;float:left'>Click 2</div>"`}]);

*   2）在itemtap监听器中：

    ```
    itemtap : function(list, index, target, record, event) {
        console.log(event.target.id);
        if (event.target.id=='area1') {
            alert('area1 clicked!');
        }
        if (event.target.id=='area1') {
            alert('area2 clicked!');
        }
    } 
    ```

请注意，如果您需要，“事件”参数中还有更多信息。

希望这可以帮助。

# c# - 如何使用 C# 切换目录？

> ID：10519704
> 
> 赞同：0
> 
> 时间：2012-05-09T15:57:36.207
> 
> 标签：c#, combobox, directory

[（这是关于这个问题](https://stackoverflow.com/questions/10517640/know-what-option-in-combobox-is-selected-in-c)的讨论的延续）我有在 C: 驱动器中的特定文件夹中查找的代码。它可以判断该文件夹中的内容，并获取用户选择的内容。但问题是切换到一个新的数据文件夹来获取代码。

运行程序所需的所有代码都保存在 Data 文件夹中，我正在实习的公司希望能够切换 Data 文件夹，以便他们可以更好地展示他们的软件，并让它面向任何他们展示它的人。

所以基本上我的程序需要切换数据文件夹，这样公司才能更好地展示他们的软件。

把我所有的代码贴出来，不多，大家可以看一下。

```
 using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Data;
    using System.Drawing;
    using System.Text;
    using System.Windows.Forms;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    namespace WindowsFormsApplication1
    {
        public partial class Form1 : Form
        {
             string defaultPath = @"C:\Mavro\MavBridge\";

            public Form1()
            {
                InitializeComponent();
                 dropdown();
            }

            private void button1_Click(object sender, EventArgs e)
            {
                //some sort of code to switch directory before close goes here
                MessageBox.Show("Data folder has been changed.", "Done");
                Application.Exit();
            }

            private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
            {
                 string path =  comboBox1.SelectedItem.ToString();

                 defaultPath = path;
            }

            private void buttonTest_Click_1(object sender, EventArgs e)
            {

            }
            public void dropdown()
            {
                string[] dispDirectories = Directory.GetDirectories(defaultPath, "Data*");
                comboBox1.Items.Clear();
                comboBox1.Items.AddRange(dispDirectories);
            }

        }
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:26:57.673

要回答您的第二个问题，关于从组合框显示中删除默认路径

```
//Where you load your directories
string[] dispDirectories = Directory.GetDirectories(@"c:\", "*.*");
// so here we will iterate through all the directories found and remove the default path from it.
for (int i=0;i<dispDirectories.Count();i++)
dispDirectories[i]=dispDirectories[i].Remove(0, defaultPath.Length); 
```

然后，您将路径更改为此。因为我们删除了默认路径，所以现在必须再次添加它。

```
string path =  defaultPath+comboBox1.SelectedItem.ToString();
defaultPath = path; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:16:49.057

查看您的 button1_Click 方法。将您的消息框更改为

```
MessageBox.Show("Data folder has been changed to "+defaultPath,"Done");

private void button1_Click(object sender, EventArgs e)
        {
            //some sort of code to switch directory before close goes here
            MessageBox.Show("Data folder has been changed to "+defaultPath,"Done");
            Application.Exit();
        } 
```

你会看到你已经改变了默认路径

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T16:02:35.883

编辑（@K'Leg 建议使答案更清楚）：*如果您想获取子目录，在您进行第一次选择后，*`dropdown()`您应该调用方法`comboBox1_SelectedIndexChanged`

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
            {
                 string path =  comboBox1.SelectedItem.ToString();
                 defaultPath = path;
                 dropdown();
            } 
```

更好的是在下拉（）中接收默认路径作为参数，在下一行

```
public void dropdown(string defaultPath)
            {
                string[] dispDirectories = Directory.GetDirectories(defaultPath, "Data*");
                comboBox1.Items.Clear();
                comboBox1.Items.AddRange(dispDirectories);
            } 
```

然后在 comboBox1_SelectedIndexChanged 中调用下拉方法：

```
dropdown(comboBox1.SelectedItem.ToString()); 
```

编辑：（基于对 OP 的评论）问题是您为 GetDirecotries 指定的过滤器，对于您传递给它的每个路径，它都会查找以 Data 开头的文件夹，然后是任何字符，例如 Data.Apple，现在当您将路径设置为 Data.Apple，它会再次查找应以 Data 开头的文件夹，您可以在某些情况下通过下拉方法中的过滤器

您可以将方法下拉列表定义为：

```
public void dropdown(string defaultPath, string filter)
        {
            string[] dispDirectories = Directory.GetDirectories(defaultPath, filter);
            comboBox1.Items.Clear();
            comboBox1.Items.AddRange(dispDirectories);
        } 
```

然后你可以第一次调用下拉菜单： public Form1() { InitializeComponent(); 下拉(@"C:\Mavro\MavBridge\","数据*"); } 然后在 SelectedIndexChanged 为：

```
dropdown(comboBox1.SelectedItem.ToString(),"*"); // * means select all 
```

# trigger.io - 在真实设备（IOS 或 Android）上运行时，trigger.io forge.logging.log（等）输出在哪里？

> ID：10519707
> 
> 赞同：3
> 
> 时间：2012-05-09T15:57:42.473
> 
> 标签：trigger.io

在真实设备（IOS 或 Android）上运行时，trigger.io forge.logging.log（等）输出在哪里？

例子，

```
forge.logging.log('inside my app'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:29:40.077

对于 iOS，日志输出在 XCode 管理器中可见：单击左侧边栏设备下的控制台。

对于 Android，如果您在设备上启动应用程序，则使用`forge run android`输出将通过管道传输到您的终端。如果您没有从我们的工具启动应用程序，日志输出仍然可用：`adb logcat`在终端中运行。

在这两种情况下，请确保您的日志记录模块[配置正确](http://docs.trigger.io/en/v1.3/modules/logging.html#config)。如果您将级别设置为`ERROR`，则不会出现调试级别消息！

# jsf - 如何将 selectManyCheckbox 中选择的数据存储到不同的对象中？

> ID：10519708
> 
> 赞同：3
> 
> 时间：2012-05-09T15:57:44.380
> 
> 标签：jsf, jsf-2

在我看来，我`StudentModelBean`用来存储表单中输入的数据。考虑我表格的这一部分：

```
<h:selectManyCheckbox value="#{}">
<f:selectItem itemLabel="English" itemValue="English" />
    <f:selectItem itemLabel="Hindi" itemValue="Hindi" />
    <f:selectItem itemLabel="Telugu" itemValue="Telugu" />
</h:selectManyCheckbox> 
```

我的要求是我需要将每个选定的项目值存储到`languageName`每个`Languages`对象的属性中。最后，我需要将它们放入`List`对象中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T17:56:31.983

您需要将整个`Language`对象作为可用项目和选定项目提供。您还需要创建一个在对象和`Converter`之间进行转换的`Language`对象`String`，这是强制性的，因为 HTML 输出和 HTTP 请求参数是一回事`String`。

假设您的`Language`对象有两个属性`code`，`name`并且您有一个应用程序范围的 bean，如下所示：

```
@ManagedBean
@ApplicationScoped
public class Data {

    private List<Language> languages;

    @PostConstruct
    public void init() {
        languages= new ArrayList<Language>();
        languages.add(new Language("en", "English"));
        languages.add(new Language("hi", "Hindi"));
        languages.add(new Language("te", "Telugu"));
        // ...
    }

    public List<Language> getLanguages() {
        return languages;
    }

} 
```

然后你可以按如下方式使用它：

```
<h:selectManyCheckbox value="#{bean.selectedLanguages}" converter="languageConverter">
    <f:selectItems value="#{data.languages}" var="language"
        itemValue="#{language}" itemLabel="#{language.name}" />
</h:selectManyCheckbox> 
```

用这个豆子

```
@ManagedBean
@ViewScoped
public class Bean {

    private List<Language> selectedLanguages;

    // ...
} 
```

和这个转换器

```
@FacesConverter("languageConverter")
public class LanguageConverter implements Converter {

    @Override
    public String getAsString(FacesContext context, UIComponent component, Object object) {
        return ((Language) object).getCode();
    }

    @Override
    public Object getAsObject(FacesContext context, UIComponent component, String submittedValue) {
        List<Language> languages = (List<Language>) context.getApplication().evaluateExpressionGet(context.getELContext(), "#{data.languages}", List.class);

        for (Language language : languages) {
            if (language.getCode().equals(submittedValue)) {
                return language;
            }
        }

        return null;
    }

} 
```

# asp.net - asp:Button 不会触发 onclick 事件

> ID：10519710
> 
> 赞同：0
> 
> 时间：2012-05-09T15:57:46.407
> 
> 标签：asp.net, aspbutton

我有一个按钮

```
<asp:Button ID="Button1" runat="server" Text="Submit"  onclick="RedirectToLocker"  
                 OnClientClick="return false;" UseSubmitBehavior="false" /> 
```

以及代码隐藏中的方法，例如

```
 public void RedirectToLocker(object sender, EventArgs e)
        {
            Response.Redirect(ConfigurationManager.AppSettings["LockerLoginURL"]);

        } 
```

但是当我单击按钮时，它不会点击方法中的代码。如果我删除 OnClientClick = "return false;" 然后按钮提交表单并转到错误的页面。我究竟做错了什么？

编辑：我正在使用 OnClientClick="return false;" 代码，因为没有它，按钮由于某种原因充当它嵌套的表单的提交，并立即重定向到表单操作 url，而不是点击我的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:02:16.010

当客户端事件处理程序返回 false 时，将省略回发。

```
OnClientClick="return false;" // <-- no postback 
```

所以你要么需要删除它，要么告诉我们为什么你真的想从 js-onclick 事件中返回 false。如果`Response.Redirect`转到错误的页面，您可能需要更改它。

**编辑**：因此，您通过将表单设置`Action`为另一个 url 来重定向到另一个页面。然后您可以将按钮设置[`PostBackUrl`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.postbackurl.aspx)为与当前页面相同的 url。然后它会命中代码隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:00:18.077

您需要删除`OnClientClick="return false;"`才能运行服务器端方法。

如果浏览器重定向到错误的页面，请`LockerLoginURL`检查`web.config`. 这应该与您被重定向到的 URL 匹配。

将此更改为正确的 URL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:00:41.893

删除**OnClientClick="return false;"**

# asp.net - ASP.NET：单击 LinkBut ton 时触发错误事件

> ID：10519714
> 
> 赞同：0
> 
> 时间：2012-05-09T15:57:55.190
> 
> 标签：asp.net, data-binding, event-handling, drop-down-menu, linkbutton

我有一个“购物车” `Repeater`，其中每个项目都有几个控件。我们关注的是 two `DropDownLists`， a`LinkButton`和 a `TextBox`。列表在一个验证组上，而按钮和文本框在另一个验证组上。

两个列表都有一个`OnSelectedIndexChanged`事件处理程序，它根据两者中的选择进行一些计算`DropDownLists`。两个列表也都有`AutoPostBack="True"`.

该按钮有一个`OnClick`处理程序，它还根据文本框中的数字进行一些计算。

我需要立即更新计算 - 所以我为`Repeater`每个事件处理程序添加了另一个数据绑定

**问题是**- 单击其中一个后，我无法从 TextBox 中获取值`DropDownLists`。它始终显示为 1。在后台，`OnSelectedIndexChanged`事件处理程序**首先**触发，然后按钮`OnClick`将触发。这只**发生**在我更改其中一个列表之后 - 从那一刻起，每次我单击该按钮时都会发生这种情况。在此之前 - 所有控件上的一切都是正常的。

你怎么看？下面是一些代码（我希望它不会太多，我包含了所有参与的内容） -**非常感谢！**

这是中继器模板：

```
 <ItemTemplate>
                    <tr>
                        <td class="size"><div><asp:DropDownList runat="server" ID="_selectSize" AutoPostBack="true" OnSelectedIndexChanged="selectChange" EnableViewState="true" TabIndex="<%#Container.ItemIndex%>" ValidationGroup="doNotValidate"></asp:DropDownList></div></td>
                        <td class="material"><div><asp:DropDownList runat="server" ID="_selectMaterial" AutoPostBack="true" OnSelectedIndexChanged="selectChange" EnableViewState="true" TabIndex="<%#Container.ItemIndex%>" ValidationGroup="doNotValidate"></asp:DropDownList></div></td>
                        <td class="quantity">
                            <div>
                                <div class="quantity_container"><asp:TextBox runat="server" ID="_txtAmount" name="quantity_<%#Container.ItemIndex%>" ValidationGroup="vCart"></asp:TextBox></div>
                                <div><asp:LinkButton runat="server" CssClass="refresh" id="_refreshCart" ValidationGroup="vCart"></asp:LinkButton></div>
                            </div>
                        </td>
                    </tr>
                </ItemTemplate> 
```

`Repeater.DataBound()`: _

```
Protected Sub rptCart_ItemDataBound(sender As Object, e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles rptCart.ItemDataBound
    If e.Item.ItemType = ListItemType.AlternatingItem OrElse e.Item.ItemType = ListItemType.Item Then
        Dim OrderItem As ProxyMarket.Item = CType(e.Item.DataItem, ProxyMarket.Item)
        Dim btnRemoveProduct As LinkButton = CType(e.Item.FindControl("_removeProduct"), LinkButton)
        Dim btnRefreshCart As LinkButton = CType(e.Item.FindControl("_refreshCart"), LinkButton)
        Dim txtAmount As TextBox = CType(e.Item.FindControl("_txtAmount"), TextBox)
        Dim sizeSelect As DropDownList = CType(e.Item.FindControl("_selectSize"), DropDownList)
        Dim materialSelect As DropDownList = CType(e.Item.FindControl("_selectMaterial"), DropDownList)

        btnRemoveProduct.CommandName = OrderItem.ID
        btnRefreshCart.CommandName = OrderItem.ID
        txtAmount.Text = OrderItem.Units

        AddHandler btnRemoveProduct.Click, AddressOf removeProduct
        AddHandler btnRefreshCart.Click, AddressOf refreshCart

        sizeSelect.DataSource = sizeList
        sizeSelect.DataBind()
        sizeSelect.SelectedIndex = s
        materialSelect.DataSource = materialList
        materialSelect.DataBind()
        materialSelect.SelectedIndex = m
    End If
End Sub 
```

这是`DropDownLists`事件处理程序：

```
Protected Sub selectChange(ByVal sender As DropDownList, ByVal e As System.EventArgs)
    Dim listing As New PriceListing
    Dim ddl As DropDownList
    Dim selectedIndex As Integer

    If sender.ID = "_selectSize" Then
        For Each rptrItem As RepeaterItem In rptCart.Items
            ddl = CType(rptrItem.FindControl("_selectMaterial"), DropDownList)
            If ddl.TabIndex = sender.TabIndex Then Exit For
        Next

        For Each listing In artDecoPricing
            If listing.Size = sender.SelectedValue Then Exit For
        Next

        selectedIndex = ddl.SelectedIndex
        s = sender.SelectedIndex
    ElseIf sender.ID = "_selectMaterial" Then
        For Each rptrItem As RepeaterItem In rptCart.Items
            ddl = CType(rptrItem.FindControl("_selectSize"), DropDownList)
            If ddl.TabIndex = sender.TabIndex Then Exit For
        Next

        For Each listing In artDecoPricing
            If listing.Size = ddl.SelectedValue Then Exit For
        Next

        selectedIndex = sender.SelectedIndex
        s = ddl.SelectedIndex
    End If

    Select Case selectedIndex
        Case 0
            Cart.Order.Items(sender.TabIndex).PriceUnit = listing.Canvas
        Case 1
            Cart.Order.Items(sender.TabIndex).PriceUnit = listing.Acrylic
        Case 2
            Cart.Order.Items(sender.TabIndex).PriceUnit = listing.Framed
        Case 3
            Cart.Order.Items(sender.TabIndex).PriceUnit = listing.Alucobond
    End Select

    Cart.SaveOrder()

    s = sender.SelectedIndex
    m = selectedIndex

    rptCart.DataSource = Cart.Order.Items
    rptCart.DataBind()
End Sub 
```

最后，`LinkButton` `OnClick`处理程序：

```
Protected Sub refreshCart(ByVal sender As Object, ByVal e As System.EventArgs)
    Dim btnRefreshCart As LinkButton = CType(sender, LinkButton)
    Dim amountStr As String
    Dim amount As Integer

    amountStr = CType(btnRefreshCart.Parent.FindControl("_txtAmount"), TextBox).Text
    If IsNumeric(amountStr) Then
        amount = CDbl(amountStr)
    Else
        amount = -1
    End If
    amount = IIf(amount > 0, amount, -30)

    For Each Item As ProxyMarket.Item In Cart.Order.Items
        If Item.ID = btnRefreshCart.CommandName Then
            Item.Units = amount
            Cart.Edit_Product(btnRefreshCart.CommandName, amount)
            Exit For
        End If
    Next

    rptCart.DataSource = Cart.Order.Items
    rptCart.DataBind()
End Sub 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:50:54.080

我找到了解决办法！

显然，这是因为 ASP.NET 中的视图状态限制导致`OnSelectedIndexChanged`在 Page_Load 上触发，无论用户是否实际选择了不同的值。

因此，当事件处理程序触发时，我正在检查它是`DropDownLists`调用我的还是其他控件 - 防止事件在不需要时触发 - 并保持页面上的所有事件处理完整：

```
Protected Sub selectChange(ByVal sender As DropDownList, ByVal e As System.EventArgs)
    Dim senderClientID = Page.Request.Params.Get("__EVENTTARGET")
    ' Run ONLY if the relevant select control was clicked,
    ' otherwise this is only fired because of ASP.NET limitations,
    ' and will screw up the original event:
    If senderClientID.IndexOf("_selectSize") <> -1 Or senderClientID.IndexOf("_selectMaterial") <> -1 Then
        'do stuff 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:10:47.260

我知道这已经得到了回答，但我遇到了一个非常相似的问题，有一个完全不同的解决方案，因为这是谷歌出现的第一篇文章，我想我会在这里添加它。

我有一个链接按钮，单击它时，但仅在 IE9 中，它似乎激活了页面上的另一个按钮并调用它的事件而不是它自己的事件。

经过一番混乱和谷歌搜索，我意识到不仅仅是我的按钮激活了另一个按钮，如果我点击了页面特定部分的任何位置。

在完全剥离我的页面后，我最终发现了问题。是这样的：

```
 <label style="width: 100%" /> 
```

一个空的标签标签。删除后一切正常。

# c# - 当同一个类初始化时，是否可以将一个类作为参数传递？

> ID：10519716
> 
> 赞同：0
> 
> 时间：2012-05-09T15:58:12.797
> 
> 标签：c#, class, arguments

班级：

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, InstanceContextMode = InstanceContextMode.PerSession)]
public class MainService : IChat
{
    IChatCallback ChatCallback = OperationContext.Current.GetCallbackChannel<IChatCallback>();
    Chat chat = new Chat(this);
    public void ShowChat()
    {
        chat.Show();
    }
    public void SendInstantMessage(string user, string message)
    {
        chat.RaiseMsgEvents(user, message);
        ChatCallback.InstantMessage(user, message);
    }
 } 
```

形式：

```
public partial class Chat : Form
{
    MainService service;

    public Chat(MainService service)
    {
        InitializeComponent();
        OnMsgReceivedEvent += new OnMsgReceived(callback_OnMsgReceivedEvent);
        this.service = service;
    }

    private void btnSend_Click(object sender, EventArgs e)
    {
        service.SendInstantMessage("Admin", txtMsg.Text);
    }
 } 
```

mainForm 使用这样的类：

```
 public partial class Form1 : Form
 {
    ServiceHost host;
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        host = new ServiceHost(typeof(WCF_Server.MainService));
        host.Open();
    }
 } 
```

在主窗体中，我只是传递类，没有初始化，但是在类中`ShowChat()`调用时，我需要显示聊天表单并访问此类方法，以便我可以发送消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:05:57.243

.NET 是一种面向对象的语言。事实上，每个类都是一个对象。

您得到的错误是因为您在全局级别上用“this”实例化一个对象。

## 更新

根据您的更新，您可以执行以下操作，它将起作用。您可能需要对其进行更多重构，以确保它不会破坏任何业务规则等。

```
[ServiceBehavior(ConcurrencyMode = ConcurrencyMode.Multiple, InstanceContextMode = InstanceContextMode.PerSession)]
public class MainService : IChat
{
    IChatCallback ChatCallback = OperationContext.Current.GetCallbackChannel<IChatCallback>();
    //Changed this to be just a declaration. This will be null,
    // as there is no object yet, this is really just a pointer to nothing.
    //This tells the system that you might/are planning to use an object called 
    //chat, but it doesn't exist yet.
    Chat chat;

    // Get your default constructor going. This will create the actual chat object, allowing the rest of your class to access it.
    public MainService()
    {
         //instantiate it! (or as some of our co-ops say "We're newing it")
         chat = new Chat(this);
    }

    //now that chat is actually instantiated/created you can use it.
    public void ShowChat()
    {
        chat.Show();
    }
    public void SendInstantMessage(string user, string message)
    {
        chat.RaiseMsgEvents(user, message);
        ChatCallback.InstantMessage(user, message);
    }
 } 
```

这只是个人的烦恼，但是有一个与全局变量同名的函数参数是……对我来说，不，不。我在您的 Chat.Chat(MainService) 函数中注意到了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:00:36.297

当然是的，只要创建一个以你的这个类为参数的方法并调用它......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:06:25.343

正如其他帖子所建议的那样，您需要重新考虑如何`chat`在课堂上实例化您的字段`example`。我会考虑延迟加载属性，就像这样......

```
private ChatForm _Chat = null;
private ChatForm Chat
{
    get
    {
        if (this._Chat == null)
        {
            this._Chat = new ChatForm(this);
        }
        return this._Chat;
    }
    set { this._Chat = value; }
} 
```

使用延迟加载将确保您能够`this`根据请求使用关键字。

# gcc - 使用 GSL 和 OpenMP 进行编译

> ID：10519718
> 
> 赞同：2
> 
> 时间：2012-05-09T15:58:13.740
> 
> 标签：gcc, openmp, gsl

在编译/编写 makefile 时，我并不是最好的。

我正在尝试编写一个同时使用 GSL 和 OpenMP 的程序。

我分别使用 GSL 和 OpenMP 没有问题，但是我在使用两者时遇到了问题。例如，我可以编译 GSL 程序 [http://www.gnu.org/software/gsl/manual/html_node/An-Example-Program.html](http://www.gnu.org/software/gsl/manual/html_node/An-Example-Program.html) 通过键入

```
$gcc -c Bessel.c
$gcc Bessel.o -lgsl -lgslcblas -lm
$./a.out 
```

它有效。

我还能够编译使用我在这里找到的 OpenMP 的程序： [为 OpenMP 中的每个内部循环启动一个线程](https://stackoverflow.com/questions/2215818/starting-a-thread-for-each-inner-loop-in-openmp)

在这种情况下，我输入

```
$gcc -fopenmp test_omp.c
$./a.out 
```

我得到了我想要的（我用过的所有 4 个线程）。

但是，当我简单地编写一个结合这两个代码的程序时

```
#include <stdio.h>
#include <gsl/gsl_sf_bessel.h>
#include <omp.h> 

 int
 main (void)
 {
   double x = 5.0;
   double y = gsl_sf_bessel_J0 (x);
   printf ("J0(%g) = %.18e\n", x, y);

int dimension = 4;
int i = 0;
int j = 0;
#pragma omp parallel private(i, j)
for (i =0; i < dimension; i++)
    for (j = 0; j < dimension; j++)
        printf("i=%d, jjj=%d, thread = %d\n", i, j, omp_get_thread_num());

return 0;

 } 
```

然后我尝试编译输入

```
$gcc -c Bessel_omp_test.c
$gcc Bessel_omp_test.o -fopenmp -lgsl -lgslcblas -lm
$./a.out 
```

GSL 部分有效（计算 Bessel 函数），但 OpenMP 部分仅使用一个线程。我不确定这里有什么问题...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:34:13.843

您错过了 OpenMP 部分中的工作共享指令`for`。它应该是：

```
// Just in case GSL modifies the number of threads
omp_set_num_threads(omp_get_max_threads());
omp_set_dynamic(0);

#pragma omp parallel for private(i, j)
for (i =0; i < dimension; i++)
    for (j = 0; j < dimension; j++)
        printf("i=%d, jjj=%d, thread = %d\n", i, j, omp_get_thread_num()); 
```

编辑：总结下面评论中的讨论，OP`-fopenmp`在编译阶段未能提供。这阻止了 GCC 识别 OpenMP 指令，因此没有生成并行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:28:12.903

`i`恕我直言，将变量声明`j`为共享是不正确的。尝试将它们声明为私有。否则，每个线程都会得到相同的结果`j`，并且`j++`会在线程之间产生竞争条件。

# video - MediaElement.js - 最好的跨浏览器文件类型/编码使用？

> ID：10519720
> 
> 赞同：3
> 
> 时间：2012-05-09T15:58:15.997
> 
> 标签：video, html5-video, video-encoding, mediaelement.js

我已经使用 MediaElement.js 在我的网站中实现了一个视频播放器。用户可以将视频上传到网站，播放器允许他们在网站的浏览器中观看视频。

但是，我遇到了一些问题，不同的浏览器能够播放某些格式，但不能播放其他格式。例如，MP4 文件有点参差不齐，在某些浏览器上运行良好，但在其他浏览器上无法播放。我相信这种情况正在发生，因为并非每个浏览器都支持每个视频编解码器。

我一直在考虑我应该建议用户上传特定格式/编码的视频，这些视频将能够在 Mac 和 Windows 上的跨浏览器环境中播放。我的问题是：MediaElement.js 是否可以在所有浏览器中播放任何格式？如果是这样，我应该推荐我的用户上传哪个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:01:31.137

我意识到这是一个老问题，但希望这个答案对遇到这个问题的其他人有所帮助。

以下是插件创建者推荐的设置：http: [//johndyer.name/ffmpeg-settings-for-html5-codecs-h264mp4-theoraogg-vp8webm/](http://johndyer.name/ffmpeg-settings-for-html5-codecs-h264mp4-theoraogg-vp8webm/)

使用 FFMPEG 和上述设置呈现在所有主要浏览器中都可以使用的视频。

# java - 如何定义仅限于特定类型集的泛型类？

> ID：10519721
> 
> 赞同：0
> 
> 时间：2012-05-09T15:58:20.123
> 
> 标签：java, templates, generics

考虑我有一个标准的泛型类，如下所示：

```
class Attribute<T>{
  public String name;
  public T value;
} 
```

是否可以将类型限制为某个预定义的集合，例如，考虑我只想拥有以下可用的属性：字符串、整数、布尔值、字节 []。

所以这是一种“半通用”类。

如果这是不可能的，那么实现这一点的最佳设计是什么？

也许类似的东西存在于其他库中，我可以采用相同的设计。这里的意图是这将成为 API 的一部分，所以我想让它对用户尽可能直观。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:55:23.710

半合理：将所有这些放在同一个包中：

```
public class Attribute<T> {
   Attribute() {
   }
}

public class StringAttribute extends Attribute<String> {
   public StringAttribute() {
       super();
   }
}

public class IntegerAttribute extends Attribute<Integer> {
   public IntegerAttribute() {
       super();
   }
} 
```

通过让构造函数没有访问修饰符，它使其受到包保护，因此唯一的子类必须在同一个包中。然后，您提供您想要允许的确切子类。

这并不完美，但总比没有好。

另一种选择是具有私有构造函数的嵌套类：

```
public class Attribute<T> {
    public T value;

    private Attribute() { }

    public static class StringAttribute extends Attribute<String> {
        public StringAttribute() {
            super();
        }
    }

    public static class IntegerAttribute extends Attribute<Integer> {
        public IntegerAttribute() {
            super();
        }
    }
} 
```

并创建：

```
Attribute<String> att = new Attribute.StringAttribute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:14:17.430

这不可能。您只能将参数类型限制为一个类型，或一组类型（全部）的子类型。

我能想到的实现您想要的那种限制的唯一方法是使用运行时类型测试；例如，在一个方法被传递一个`T`.

# php - 使用 AJAX 检索 JSON 数据

> ID：10519723
> 
> 赞同：2
> 
> 时间：2012-05-09T15:58:26.080
> 
> 标签：php, jquery, ajax, json

我试图从 JSON 对象中检索一些数据，其中包含位置信息，例如街道名称、邮政编码等。但是当我尝试将其放入我的 div 时，什么都没有被检索到。有人能看出我哪里出了问题吗？

这是我请求和检索数据的 ajax 代码

```
var criterion = document.getElementById("address").value;
$.ajax({
          url: 'process.php',
          type: 'GET',
          data: 'address='+ criterion,
          success: function(data) 
          {
              $('#txtHint').html(data);
              $.each(data, function(i,value)
                {
                    var str = "Postcode: ";
                    str += value.postcode;
                    $('#txtHint').html(str);
                });
            //alert("Postcode: " + data.postcode);
          },
          error: function(e) 
          {
            //called when there is an error
            console.log(e.message);
            alert("error");
          }
}); 
```

当它在浏览器中运行时，只会显示“邮政编码：未定义”。

这是从数据库中选择数据的 php 代码。

```
 $sql="SELECT * FROM carparktest WHERE postcode LIKE '".$search."%'";

$result = mysql_query($sql);

while($r = mysql_fetch_assoc($result)) $rows[] = $r;
echo json_encode($rows), "\n"; //Puts each row onto a new line in the json data 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:02:12.187

您缺少数据类型：

```
$.ajax({
  dataType: 'json'
}) 
```

您也可以使用[$.getJSON](http://api.jquery.com/jQuery.getJSON/)

**编辑：JSON 示例**

```
$.getJSON('process.php', { address: criterion } function(data) {
    //do what you need with the data
    alert(data);
}).error(function() { alert("error"); }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:01:01.290

看看你的代码在做什么。

首先，将数据直接放入`#txtHint`盒子中。

然后，对于每个数据元素，创建字符串`"Postcode: "+value.postcode`（甚至不检查是否`value.postcode`存在 - 它可能不存在）并`#txtHint`用它覆盖 html。

最终结果：脚本完全按照您的要求执行。

删除那个循环的东西，看看你得到了什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:12:22.853

使用

```
dataType: 'json' 
```

ajax 调用中的参数或使用[$.getJSON()](http://api.jquery.com/jQuery.getJSON/)它将自动将 JSON 数据转换为 JS 对象。

您还可以像这样在成功回调中使用[$.parseJSON()自己将 JSON 响应转换为 JS 对象](http://api.jquery.com/jQuery.parseJSON/)

```
data = $.parseJSON(data); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T16:37:00.883

这在您的网站上对我有用：

```
function showCarPark(){
    var criterion = $('#address').val();

    // Assuming this does something, it's yours ;)
    codeAddress(criterion);

    $.ajax({
        url: 'process.php',
        type: 'GET',
        dataType: 'json',
        data: {
            address: criterion
        },
        success: function(data)
        {
            $("#txtHint").html("");
            $.each(data, function(k,v)
            {
                $("#txtHint").append("Postcode: " + v.postcode + "<br/>");
            });
        },
        error: function(e)
        {
            alert(e.message);
        }

    });
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T16:02:49.897

您的 JSON 数据是否代表包含相同对象结构的多行？请在您的成功函数中提醒数据对象并将其发布，以便我们帮助您调试它。

# javascript - 如何将毫秒转换为分钟？

> ID：10519729
> 
> 赞同：1
> 
> 时间：2012-05-09T15:59:04.827
> 
> 标签：javascript

如果有人有任何解决方案，我还有一个问题，请帮助我。Ploblem 是这样的，我想在 javascript 中将毫秒转换为分钟，然后将分钟递减 60000 毫秒，直到它达到我正在使用此代码的当前时间：-

```
<?php
$date2   = date('Y-m-d H:i:s');
$currentdate = strtotime($date2);
$targetdate = strtotime('2012-05-09 21:30:00');
?>
<script type=text/javascript>
var currentdate = <?php echo $currentdate; ?>;
var targetdate = <?php echo $targetdate; ?>;
var difference = targetdate - currentdate;

var minutes = Math.floor(difference / 60);
var i = minutes;
var intID;
function decrementMin() {
    if(i==0)
    {
        clearInterval(intID);
        alert('Minute = Congratulation your time begin!');
    }
    if(i>=0){
    document.getElementById('minutes').innerHTML = i + "minutes";
    i--;
    }
}
decrementMin();
intID = setInterval('decrementMin()', 60000);
</script> 
```

问题是它们总共是 478 秒，当我们将其转换为分钟时，它变为 7.9666，但是通过使用 Math.floor() 它显示 7 分钟并在 0.9666 秒之前发出警报意味着 58 秒之前。如果有人有任何解决方案，请帮助我，我正在等待您的答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:06:10.490

.9666 分钟不是 9666 秒 - 它是 58 秒

# sencha-touch-2 - 点击 TabPanel 时如何调用控制器上的函数？煎茶触摸 2

> ID：10519731
> 
> 赞同：3
> 
> 时间：2012-05-09T15:59:15.250
> 
> 标签：sencha-touch-2, listener, tabpanel

我在 Sencha Touch 2 中有一个控制器和一个 TabPanel，我想在 TabPanel 上点击一个元素时调用一个函数：

TabPanel.js

```
Ext.define('app.view.principalTabPanel', {
    extend: 'Ext.tab.Panel',
    alias: 'widget.ptabpanel',
    config: {
        ui: 'light',
        items: [
            {
                xtype: 'container',
                itemId: 'idContnr',
                title: 'tap Me!',
                iconCls: 'bookmarks'
            }
        ],
        tabBar: {
            docked: 'bottom',
            ui: 'light'
        }
    }
}); 
```

控制器.js

```
Ext.define('app.controller.mainController', {
    extend: 'Ext.app.Controller',
    config: {
        control: {
            "ptabpanel #idContnr": {
                tap: 'takePhoto'
            }
        }
    },
    takePhoto: function() {
        console.log('toma foto!'); // Not Working :(
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:43:24.110

与其在选项卡上收听“点击”事件，不如在选项卡本身上收听“活动项目变化”。请参阅[http://docs.sencha.com/touch/2-0/#!/api/Ext.tab.Panel-event-activeitemchange](http://docs.sencha.com/touch/2-0/#!/api/Ext.tab.Panel-event-activeitemchange)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T18:13:35.850

它在侦听/查询 Sencha "ext-tab-2" 生成的 html-id 时起作用。

例如：

```
config: {
    control: {
        "ptabpanel #ext-tab-2": {
            tap: 'onButtonTap'
        }
    }
}, 
```

但现在的问题是如何更改 Sencha Touch 2 生成的“ext-tab-2”名称

@Borck：谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T18:46:25.167

您可以通过将此配置添加到选项卡面板来为选项卡栏按钮分配 ID：

```
tabBar: {
  id: 'myTabBar',
  items:[
    {
      id: 'myFirstTab'
    },
    {
      id: 'mySecondTab'
    },
    ...
   ]
 } 
```

# objective-c - iOS 益智游戏的设计模式

> ID：10519733
> 
> 赞同：1
> 
> 时间：2012-05-09T15:59:22.437
> 
> 标签：objective-c, ios, puzzle

我正在尝试使用 Objective C 创建一个基于 iOS 的益智游戏。至少有 30 种不同类型的益智/游戏，包括迷宫、井字游戏、小填字游戏等，都在一个 iOS 游戏中。如何继续创建视图、视图控制器等，我是在单独的 UIView 中托管每个拼图并在必要时将其作为子视图加载，还是为每个拼图使用单独的 UIViewController 并在它们之间导航？在应用过程中，我将一次又一次地重复使用拼图，并进行细微的更改 - 即，首先显示井字游戏，然后是迷宫，然后显示相同的井字游戏，但背景不同，颜色等，对于这种用于创建视图、视图控制器和在内存中保存图像、颜色、进度的应用程序，哪种设计模式最常用和最好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-10T16:50:47.750

您首先需要制作一个菜单（类），以便玩家可以决定他们想玩哪个游戏。

1.  创建一个新类（例如 mainMenuScene）
2.  确保新类显示您的菜单 png 和任何或所有按钮。
3.  不要忘记在视图控制器上导入您的类（mainMenuScene）。
4.  确保您的 viewController 首先以 MainMenuScene 开头。
5.  然后在您的 MainMenuScene 中实现 touchesBegan，以便当用户点击它时。该应用程序将转换为点击的游戏。
6.  将所有游戏设置在不同的类中，并将所有类连接到故事板。

我就是这样做的，但当然有十亿种方法。

另一种方法是使用列出您的游戏的表格视图控制器。然后连接故事板中的所有游戏。

# iphone - 设备旋转后修改的 CGAffineTransformScale

> ID：10519735
> 
> 赞同：4
> 
> 时间：2012-05-09T15:59:31.353
> 
> 标签：iphone, ios, uiview, cgaffinetransform, cgaffinetransformscale

我认为我正在执行转换

```
originalTransform = self.appContainer.transform;
self.appContainer.transform = CGAffineTransformMakeScale(.8, .8); 
```

![原始旋转](../Images/386df57e8c1f47f182e01628337b101d.png)

如果我不旋转设备，我可以使用

```
self.appContainer.transform = CGAffineTransformScale(originalTransform, 1, 1); 
```

不幸的是，如果我旋转设备，视图的变换矩阵会被视图旋转修改并破坏原始比例。如果我在旋转后撤消比例尺，我将`UIView`无法恢复到原来的全尺寸。

![旋转后](../Images/177cf75d38480adfb5cfe43f3a755b7b.png)

![原始比例后](../Images/cd9faf4068bb06a68bc1d0f403419e43.png)

我确定我需要在原始转换矩阵和新转换矩阵之间进行计算，但我不确定如何执行此操作。为了完成这项工作，我唯一能做的就是在旋转之前将比例恢复为 1

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    self.appContainer.transform = CGAffineTransformScale(originalTransform, 1, 1);
} 
```

然后用新修改的变换重新缩放它

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation               {
    self.appContainer.transform = CGAffineTransformMakeScale(.8, .8);
} 
```

这使它按我的预期工作，但不是回到全屏，然后回到 0.8 比例，我希望它从新的转换到正确的 0.8 比例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:10:53.080

如果要将其还原为原始状态，请尝试将转换设置为 CGAffineTransformIdentity。

```
self.appContainer.transform = CGAffineTransformIdentity; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T09:14:48.323

我认为您必须使用.....删除所有自动调整大小的蒙版

```
[self.appContainer setAutoresizingMask:UIViewAutoresizingNone]; 
```

# c# - 单元测试（连接到分析服务）在 TeamCity 上失败 - 但在同一台机器上的 VS 2010 上没有

> ID：10519736
> 
> 赞同：1
> 
> 时间：2012-05-09T15:59:39.247
> 
> 标签：c#, sql-server-2008, unit-testing, teamcity, business-intelligence

我编写了一些针对 SQL Server 分析服务运行 MDX 查询的代码。我的开发机器上的单元测试工作正常 - 但是 TeamCity 安装也运行单元测试，只有连接到分析服务的单元测试给出异常说明：

```
Test method GetNumCompaniesPerIndustryTest threw exception: 
Microsoft.AnalysisServices.AdomdClient.AdomdConnectionException: The connection either timed out or was lost. 
---> System.IO.IOException: Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host. 
---> System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host 
```

这是我之前的连接字符串不正确时遇到的错误。奇怪的是，带有 TeamCity 的服务器也安装了 VS 2010，因此我可以从 /buildAgent/work 文件夹打开解决方案并运行单元测试。VS 中的所有测试都可以正常工作 - 所以似乎没有连接问题。连接字符串位于应用程序范围内 DLL 内的设置文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:25:35.567

可能是权限。您的 TeamCity 构建代理在哪个帐户下运行？这是您登录机器​​的同一个帐户吗？您对服务使用什么类型的身份验证？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T19:04:24.703

错误“现有连接被远程主机强制关闭”通常是由分析服务器上的“TCP 烟囱卸载”设置引起的。有关它的更多信息，请参阅[此链接](http://blogs.msdn.com/b/cindygross/archive/2009/10/22/sql-server-and-tcp-chimney.aspx)。

要关闭设置，请在分析服务器上的命令 shell 中运行以下命令：

```
Netsh int ip set chimney DISABLED 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T11:06:34.013

原来，QA 环境与相应的用户在不同的应用程序池中运行。我必须将此用户添加到 BI 数据库用户。

# c++ - 源行长度限制

> ID：10519738
> 
> 赞同：23
> 
> 时间：2012-05-09T15:59:44.670
> 
> 标签：c++, c++11, standards

*所有*编译器都*必须*接受的源代码行的最大长度是多少？它在 C++11 中改变了吗？如果是这样，旧值是多少？

我问这个问题是因为我正在做一些繁重的预处理器巫术（不幸的是，模板不会削减它），这样做会使线条很快变大。我想保持安全，所以我不必担心平台 Y 上的编译器 X 可能会因为行太长而拒绝我的代码。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-09T16:03:29.397

C++2003，**附件 B，（资料性）实现数量**（抱歉，手头没有 C++2011）

> 2) 限制可能会限制包括以下描述的数量或其他数量。建议将每个数量后面的括号中的数字作为该数量的最小值。但是，这些数量仅作为指导，并不能确定合规性。
> 
> …</p>
> 
> *   一个逻辑源代码行中的字符 [65 536]。

您没有询问这些，但它们可能也很有用：

> *   在完整表达式中嵌套括号表达式的级别 [256]。
> *   在一个翻译单元中同时定义宏标识符 [65 536]。
> *   一个宏调用中的参数 [256]。
> *   内部标识符或宏名称 [1 024] 中的字符数。
> *   在一个翻译单元中同时定义宏标识符 [65 536]。
> *   一个宏定义中的参数 [256]。

* * *

*后记*：值得注意的是“一个逻辑源代码行”是什么。*逻辑源代码行***是**您所拥有的：

> *   物理源文件字符映射到基本源字符集
> *   三字母序列（2.3）被相应的单字符内部表示代替
> *   删除换行符和紧接在前面的反斜杠字符的每个实例

逻辑源代码行是您**之前**所拥有的：

> *   源文件被分解成预处理标记
> *   执行预处理指令并扩展宏调用。

[引自*C++ 2003, 2.1**翻译阶段***]

因此，如果 OP 担心宏扩展到超出合理的行长，那么我的回答是无关紧要的。如果 OP 担心他的源代码（在处理`\`,之后`\n`）可能太长，我的回答是成立的。

# javascript - SoundManager2 SWF 加载问题

> ID：10519739
> 
> 赞同：0
> 
> 时间：2012-05-09T15:59:44.893
> 
> 标签：javascript, flash, code-access-security

尝试从我们的 CDN 加载 Soundmanager2 的 SWF 文件。我假设我遇到了跨域闪存问题。有人做过吗？甚至有可能吗？

这就是我正在尝试的...

```
var allowxdomainscripting = true;
var xdomain = "*";
soundManager.url = 'http://cdn.mycompany.com/inc/soundmanager2.swf'; 
```

在文档中有一个非常模糊的引用，但它很模糊......

[http://www.schillmania.com/projects/soundmanager2/doc/generated/src/SoundManager2_AS3.html](http://www.schillmania.com/projects/soundmanager2/doc/generated/src/SoundManager2_AS3.html)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-30T20:53:43.647

**非常感谢！**

在浪费了几个小时试图让 SM2 SWF 嵌入工作之后，我完全偶然地偶然发现了这个答案。

我将“恢复”它以添加一些关键字，以便谷歌索引这个答案......也许下一个尝试在跨域环境中嵌入 SoundManager2 SWF 的人会比我做得快一点:)

我在闪存初始化时遇到的错误是：**错误调用 NPObject 上的方法**

在 JS 方面，这是破坏一切的代码：

```
// attempt to talk to Flash
flash._externalInterfaceTest(false);     <- KABOOM! 
```

NPObject 错误可能有很多含义，但通常（在我们的环境中）它意味着：*您试图通过 JS 在托管在不同域上的 Flash 电影上调用 ExternalInterface。*

过了一会儿，我打开了 SoundManager2 ActionScript 3 代码，看到了这个：

```
public var allow_xdomain_scripting:Boolean = false;
public var xdomain:String = "*";

[... other stuff ...]

if (allow_xdomain_scripting && xdomain) {
    Security.allowDomain(xdomain);
    version_as += ' - cross-domain enabled';
} 
```

当然，这意味着您可能正在使用的电影（无论是否调试）将无法从不同的域（CDN 或其他）访问。

正如@amlutz160 的回答中所述，解决方案是**使用 swf/soundmanager2_flash_xdomain.zip 中包含的文件，这些文件是使用 allow_xdomain_scripting = true 编译的**。

发布这个很尴尬，解决方案**很明显**，但是我为此浪费了很多时间，而且 AFAIK 那个神秘的 zip 文件的内容没有记录在任何地方（我[在 SM2 论坛上发现了一个切题的提及](https://getsatisfaction.com/schillmania/topics/soundmanager2_and_crossdomain)）。

PS：我将此答案转发给[Scott Schiller](https://twitter.com/schill)，所以也许他可以稍微更新一下 SoundManager2 文档：P

问候！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-04T22:01:49.193

我曾经也遇到过这个问题。SoundManager2 现在带有 swf 文件的跨域版本。

它们被压缩在 swf/soundmanager2_flash_xdomain.zip

[https://github.com/scottschiller/SoundManager2/tree/master/swf](https://github.com/scottschiller/SoundManager2/tree/master/swf)

只需解压缩并替换为 SoundManager2 提供的标准 .swf 文件，您的问题就会消失。

# haskell - 通过 cabal (cabal-install) 在命令行中指定 ghc 选项，而无需编辑软件包的 .cabal 文件

> ID：10519740
> 
> 赞同：11
> 
> 时间：2012-05-09T15:59:48.310
> 
> 标签：haskell, vector, ghc, cabal, compiler-flags

当我安装`vector`时：

```
cabal install vector 
```

如果我可以指定，我会收到很多`SpecConstr`限制警告，这些警告会消失`-fspec-constr-count=SOMETHING-HIGHER`。

1.  将

    ```
    cabal install vector -fspec-constr-count=HIGH 
    ```

    工作？

2.  如果`X`依赖`vector`，有没有办法在`X.cabal`我依赖`vector`最好的情况下说（如果`X`尚未安装）`-fpsec-constr-count=HIGH`？

3.  是否`vector`仍在维护或现在有更推荐的替代方案？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-09T16:08:29.603

您可以使用`--PROG-options=OPTS`.

```
cabal install vector --ghc-options=-fspec-constr-count=HIGH 
```

# string - 将 NSDate 转换为 NSString 时设置错误的年份

> ID：10519743
> 
> 赞同：2
> 
> 时间：2012-05-09T15:59:59.007
> 
> 标签：string, date, nsdate

我正在尝试以这种方式使用 NSDate 类别生成字符串：

```
NSString* dateString = nil;
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setLocale:[NSLocal currentLocale]];
[dateFormat setDateFormat:@"dd LLL YYYY"];
dateString = [dateFormat stringFromDate:self];
return dateString; 
```

转换工作正常，除了一种情况（我报告调试会话）：如果我尝试像这样转换 NSDate 对象：

```
(gdb) po self
2012-01-01 00:00:00 +0000 
```

我得到：

```
(gdb) po dateString
01 Jan 2011 
```

为什么年份要回到2011年？？？？

PS。我已经检查过[NSDate 返回错误的年份](https://stackoverflow.com/questions/3942005/nsdate-returns-wrong-year)并且我没有使用日本日历。

多谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:08:11.767

试试这个：

```
 NSDate *pickerDate = [NSDate date];
     NSCalendar*       calendar = [[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];
     NSDateComponents* components = [[[NSDateComponents alloc] init] autorelease];
        components.day = 0; //This value to take from today to next 1 or 2 or 3 days
        NSDate* newDate = [calendar dateByAddingComponents: components toDate: pickerDate options: 0];
        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setDateFormat:@"dd-MMMM"];
        NSString *textDate = [NSString stringWithFormat:@"%@",[dateFormatter stringFromDate:newDate]];
        [dateFormatter release]; 
```

# kendo-ui - 剑道网格不调用 MVC 动作

> ID：10519745
> 
> 赞同：1
> 
> 时间：2012-05-09T16:00:00.510
> 
> 标签：kendo-ui

我已经让 Kendo Grid 调用 MVC 动作，但是我在动作中的断点没有被击中，也没有返回任何内容。任何想法为什么？

JavaScript：

```
$("#grid").kendoGrid({
    dataSource: {
        type: "json",
        transport: {
            read: {
                url: "Sales/GetSalesHistory",
                dataType: "json",
                type: "GET",
                data: { id: "@ViewBag.CustomerEstimateKey" }
            }
        },
        schema: {
            data: "data",
            total: "total"
        }
    }
}); 
```

行动：

```
 [HttpGet]
    public JsonResult GetSalesHistory(int id)
    {
        List<Sales> sales = PestsLogic.GetSalesById(id);
        return Json(new { data = sales, total = sales.Count }, JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T15:21:18.840

将 url 属性更改为此修复它：

```
'@Url.Action("GetSalesHistory", "Sales")' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T17:59:37.963

我遇到了和你一样的问题。如果您在 URL 字符串中添加一个前导正斜杠，它看起来像这样 - URL:"/Sales/GetSalesHistory" 它也应该可以工作。

# extjs - 将值绑定到 extjs 中的表单字段时出错

> ID：10519746
> 
> 赞同：0
> 
> 时间：2012-05-09T16:00:01.603
> 
> 标签：extjs, extjs4, extjs-mvc

我在使用 ExtJs MVC 时遇到以下错误，

**未捕获的类型错误：无法调用未定义的方法“删除”**

我跟踪了上述错误，该错误转到我将值从模型绑定到视图的行，

```
Ext.getCmp('myForm').loadRecord(myModel); 
```

我的一些表单字段被禁用，我仍在绑定它们。这是问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:55:03.627

每当我的模型包含不规则数据时（尤其是在尝试将此不可用数据绑定到对偶列表时），就会发生错误。假设我的双重列表包含 (A,B,C) 之类的项目值，当我尝试绑定 D 时，就会发生此错误。

# c# - 将日期参数传递给对 MVC 操作的 ajax 调用的安全方法

> ID：10519748
> 
> 赞同：5
> 
> 时间：2012-05-09T16:00:07.687
> 
> 标签：c#, javascript, ajax, asp.net-mvc

我有一个 MVC 操作，它采用它的一个参数 a `DateTime`，如果我传递“17/07/2012”，它会抛出一个异常，指出参数为空但不能有空值，但如果我传递`01/07/2012`它，它会被解析为`Jan 07 2012`.

我以格式将日期传递给 ajax 调用，尽管配置了文化，`DD/MM/YYYY`我是否应该依赖格式？`MM/DD/YYYY``web.config`

这是一种简单的方法，只有一个日期参数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T16:02:49.087

在 Asp.NET-MVC 中发送日期参数有三个安全选项：

*   发送它，因为`YYYY/MM/DD`它是国际日期的 ISO 标准。
*   使用`POST`请求而不是`GET`请求。

*   如果要更改默认`Model Binder`绑定日期的方式：

您可以使用 IModelBinder 更改默认模型绑定器以使用用户文化

```
public class DateTimeBinder : IModelBinder
{
    public object BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        var value = bindingContext.ValueProvider.GetValue(bindingContext.ModelName);
        var date = value.ConvertTo(typeof(DateTime), CultureInfo.CurrentCulture);

        return date;    
    }
} 
```

在 Global.Asax 中写道：

```
ModelBinders.Binders.Add(typeof(DateTime), new DateTimeBinder());
ModelBinders.Binders.Add(typeof(DateTime?), new DateTimeBinder()); 
```

[在这个优秀的博客](https://stackoverflow.com/a/8035636/601179)上阅读更多内容，该博客描述了为什么 Mvc 框架团队为所有用户实现了默认文化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:13:42.760

gdoron 的答案对于将日期作为查询字符串传递是正确的。但是，如果它们作为表单值传递（后值），则应使用正确的文化（假设文化是属性配置的）。

# html - 动态交替右左对齐

> ID：10519753
> 
> 赞同：0
> 
> 时间：2012-05-09T16:00:25.487
> 
> 标签：html, css

假设我正在使用 PHP 按时间顺序从 MySQL 数据库中的多个帖子中提取文本。我希望我的帖子显示为左右交替排列。

重要的是，我希望帖子能够被删除。如果一个帖子被删除，我希望其他帖子保持动态交替对齐。

你能给我一些关于如何使用 CSS 做到这一点的想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:03:56.687

使用`:odd`和`:even`伪类（在较新的浏览器上）

例如

```
div:nth-child(odd) { text-align: left }
div:nth-child(even) { text-align: right } 
```

如果要在删除帖子后保留之前的顺序，只需`display: none`在删除帖子时设置（而不是从 DOM 中删除节点）

如果您想重新定位所有后续帖子，只需完全删除该节点

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T16:03:30.400

从 db 收到结果后，将类名放入 php 变量中。在 foreach 循环中，在循环运行时在两个类名之间来回切换。像这样：

```
//php file 
$alt = 'Row';

foreach($results as $row) {
    echo '<div class="' . $alt . '">some content</div>';
    $alt = ($alt == 'Row') ? 'altRow' : 'Row';
} 
```

然后在您的样式表中：

```
.Row {
    text-align: left;
}

.altRow { 
    text-align: right;
} 
```

# java - 使用 DOM 创建 XML 后，标头包含 UTF-8 吗？

> ID：10519757
> 
> 赞同：0
> 
> 时间：2012-05-09T16:00:38.903
> 
> 标签：java, xml, parsing, dom, utf-8

我需要在 Eclipse（对于 Java）下使用 DOM 并使用以下代码创建一个 XML 文件：

```
 // write the content into xml file
        TransformerFactory transformerFactory = TransformerFactory.newInstance();
        Transformer transformer = transformerFactory.newTransformer();
        DOMSource source = new DOMSource(doc);
        StreamResult result = new StreamResult(new File("output.xml"));  
        transformer.transform(source, result); 
```

我的 XML 的第一行是：

```
<?xml version="1.0" encoding="UTF-8"?> 
```

并不是 ：

```
<?xml version="1.0"?> 
```

我的问题是：

1.  这两个声明有什么区别？

2.  如何使用标头生成 XML 文件：`<?xml version="1.0"?>`

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:36:17.450

在现代世界中，文本文件具有“编码”，它定义了字符在文件中的表示方式。如果您的文件仅包含纯 ASCII 字符（0x01 到 0x7f），则您不会看到这一点，但如果您需要表示其他任何内容，例如符号或重音字符，那么文件的使用者需要知道这些字符是如何编码的。

有几种不同的方法来编码扩展字符，最常见的是 ISO-8859-x（其中 x 取决于语言）和 Unicode，它为每个可能的字符分配一个唯一的编号。ISO 代码页使用 0x80 到 0xFF 的范围来表示扩展字符。UTF-8 是一种以多个 8 位字节表示任意长度的 Unicode 字符（也称为“代码点”）的系统。相同的扩展字符（例如 e-circumflex）在不同的编码中会有不同的表示。

您使用的序列化程序配置为输出 UTF-8 编码。该文件的使用者必须知道使用了 UTF-8 编码，否则可能会破坏数据。您可能已经看到包含黑色菱形字符的网页，或者将撇号或其他特殊字符等内容替换为 2 个奇怪字符的文本。这些是编码/解码不兼容的症状。

可能有一种方法可以强制序列化程序省略编码声明，但如果你这样做，文件的使用者可能无法正确解码它，因为它必须猜测编码。

# asp.net - 在 IIS7.5 中使用自定义错误页面

> ID：10519767
> 
> 赞同：1
> 
> 时间：2012-05-09T16:00:56.430
> 
> 标签：asp.net, iis-7.5

我已将站点配置为使用 SSL，因此我在 web.config 中添加了以下部分

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <system.webServer>
        <httpErrors>
            <error statusCode="403" subStatusCode="4" path="D:\Data\www\Site\403.htm" responseMode="File" />
        </httpErrors>
    </system.webServer>
</configuration> 
```

一旦我包含它，当我访问[http://my-url/pagr/some.aspx](http://my-url/pagr/some.aspx)时，我收到了`The page cannot be displayed because an internal server error has occurred.`消息。如果我删除它，我可以看到默认的 403 错误页面。

我的配置有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:15:13.820

重置 IIS 以检查您设置的路径是否有效

或者

提供网站根目录的相对路径，而不是提供文件系统路径以检查它是否有效

将 403.htm 放在 web.config 所在的同一文件夹中。

```
<error statusCode="403" subStatusCode="4" path="403.htm" responseMode="File" /> 
```

# mysql - 通过套接字与mysql交互

> ID：10519773
> 
> 赞同：0
> 
> 时间：2012-05-09T16:01:19.463
> 
> 标签：mysql, sockets

我想知道是否有办法通过套接字使用 mysql 服务器。我想要的是连接正在运行的查询并通过建立套接字连接和发送数据包来获得结果。有谁知道我如何以这种方式与 mysql 交互？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:06:37.010

几乎每种语言都有一个 MySQL 客户端，所以我不确定你为什么要这样做。

但是，您基本上必须重新实现客户端库。该协议绝不简单： http: [//forge.mysql.com/wiki/MySQL_Internals_ClientServer_Protocol](http://forge.mysql.com/wiki/MySQL_Internals_ClientServer_Protocol)。

您也许可以编写基本功能，但一旦您深入了解协议的所有功能和角落，这将是一个规模巨大的项目（没有目的）。

# linux - 为什么日志文件的扩展名为 swp？

> ID：10519774
> 
> 赞同：3
> 
> 时间：2012-05-09T16:01:22.413
> 
> 标签：linux, logging, log4j

我的日志文件是在我的 Linux 服务器上的特定目录中生成的。有时，当我使用 查看该目录中的日志文件时`ls -lart`，我看到：

```
abc.log
.abc.log.swp 
```

谁能解释一下为什么日志文件有这个名字`.abc.log.swp`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T16:03:44.293

这些是`vim`“交换”文件——`vim`在您编辑文件时创建的临时文件。当您退出编辑器时，它们（通常）会自动删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T16:04:51.970

当您使用 vi 和其他一些编辑器编辑文件时，编辑器会创建一个扩展名为 .swp 的临时交换文件。如果出现问题并且编辑器崩溃或计算机死机，交换文件包含您的更改，因此您可以恢复到编辑后的文件。

关闭编辑器后，应立即删除交换文件。如果不是，并且您没有遇到崩溃，您可以简单地删除交换文件。

# perl - Perl：将 STDOUT 重定向到两个文件

> ID：10519779
> 
> 赞同：12
> 
> 时间：2012-05-09T16:01:41.767
> 
> 标签：perl, redirect, io, stream, stdout

如何将`STDOUT`流重定向到我的 Perl 脚本中的两个文件（重复）？目前我只是流式传输到一个日志文件中：

```
open(STDOUT, ">$out_file") or die "Can't open $out_file: $!\n"; 
```

我必须改变什么？谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T16:14:11.230

您也可以使用[`IO::Tee`](https://metacpan.org/module/IO::Tee).

```
use strict;
use warnings;
use IO::Tee;

open(my $fh1,">","tee1") or die $!;
open(my $fh2,">","tee2") or die $!;

my $tee=IO::Tee->new($fh1,$fh2);

select $tee; #This makes $tee the default handle.

print "Hey!\n"; #Because of the select, you don't have to do print $tee "Hey!\n" 
```

是的，输出有效：

```
> cat tee1
Hey!
> cat tee2
Hey! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T16:14:15.417

[File::Tee](http://search.cpan.org/perldoc?File%3a%3aTee)提供了您需要的功能。

```
use File::Tee qw( tee );
tee(STDOUT, '>', 'stdout.txt'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-09T16:18:02.413

使用`tee`PerlIO 层。

```
use PerlIO::Util;
*STDOUT->push_layer(tee => "/tmp/bar");
print "data\n";

$ perl tee_script.pl > /tmp/foo
$ cat /tmp/foo
data
$ cat /tmp/bar
data 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-09T16:03:26.590

如果您使用的是类 Unix 系统，请使用[*tee*](http://www.gnu.org/software/coreutils/manual/html_node/tee-invocation.html)实用程序。

```
$ perl -le '打印“你好，世界”' | 三通 /tmp/foo /tmp/bar
你好世界

$猫/tmp/foo /tmp/bar
你好世界
你好世界
```

要从您的程序中设置此复制，请设置从您`STDOUT`到外部*tee*进程的管道。传递`"|-"`给[`open`](http://perldoc.perl.org/functions/open.html)使这很容易做到。

```
#! /usr/bin/env perl

use strict;
use warnings;

my @copies = qw( /tmp/foo /tmp/bar );

open STDOUT, "|-", "tee", @copies or die "$0: tee failed: $!";

print "Hello, world!\n";

close STDOUT or warn "$0: close: $!"; 
```

演示：

```
$ ./stdout-副本-演示
你好世界！

$猫/tmp/foo /tmp/bar
你好世界！
你好世界！
```

# ruby-on-rails - 使用 Rails 创建下拉菜单

> ID：10519783
> 
> 赞同：0
> 
> 时间：2012-05-09T16:02:00.900
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, drop-down-menu

所以我目前有两个具有以下关联的模型：

```
class DnsRecord < ActiveRecord::Base
  validates :name, :presence => true, :uniqueness => true

  has_one :ip_address

  attr_accessible :name
end

class IpAddress < ActiveRecord::Base
  validates :ipv4, :presence => true, :uniqueness => true, :length => { :maximum => 45 }
  validates :ipv6, :presence => true, :uniqueness => true, :length => { :maximum => 45 }

  belongs_to :dns_record

  attr_accessible :ipv4, :ipv6
end 
```

在 dns_record 视图 (/app/views/dns_records) 中，当我在创建新的 dns_recrod 页面时，我想要一个下拉选择当前存在的 ip_addresses。这样，当我创建一个新的 dns_record 时，它就会有一个关联的 ip_address_id。

我对 ruby​​ 和 rails 很陌生，所以如果有人能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:13:31.060

Twitter 引导程序适合您。 [http://twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

它将帮助您入门并向您展示如何将下拉菜单合并到您的 Rails 应用程序中。它为您完成所有繁重的工作。享受。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:29:30.670

我不确定您的关联是否完全符合您的要求。根据您的问题，我假设您想要：

```
class DnsRecord < ActiveRecord::Base
  validates :name, :presence => true, :uniqueness => true
  belongs_to :ip_address
end

class IpAddress < ActiveRecord::Base
  validates :ipv4, :presence => true, :uniqueness => true, :length => { :maximum => 45 }
  validates :ipv6, :presence => true, :uniqueness => true, :length => { :maximum => 45 }
  has_one :dns_record
  attr_accessible :ipv4, :ipv6
end 
```

如果是这样，那么您可以使用 collection_select 为 dns_record 对象设置您的 ip_address。例子：

```
<% form_for @dns_record do |f| %>
  <%= f.collection_select :ip_address_id, IpAddress.all, :id, :ipv4 %>
<% end %> 
```

以上假设您正在使用 @dns_record 对象并且您的 dns_records 表有一个 ip_address_id (FK) 列。这也将使用 ip_addresses.ipv4 中的值作为下拉列表中的值。

# mod-rewrite - mod_rewrite 为 sef 启用 joomla 网站

> ID：10519787
> 
> 赞同：1
> 
> 时间：2012-05-09T16:02:09.943
> 
> 标签：mod-rewrite, joomla

我的网站已启用 sef 并在 joomla 中完成。

我需要的是重写规则，所以

[http://www.testsite.com/fr/corporate/news](http://www.testsite.com/fr/corporate/news) 指向 [http://www.testsite.com/corporate/news/?lang=fr](http://www.testsite.com/corporate/news/?lang=fr)

我尝试了一些 url 重写规则，但它会生成 404 错误类别未找到页面。我相信它会查找 thr fr 文件夹或名为 fr 的类别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:42:57.417

我假设您需要它来工作，无论之后是什么`/fr`？你可以尝试这样的事情：

```
RewriteRule ^/fr/(.*) /$1\?lang=fr [R=301,L] 
```

# iphone - 为 audioPlayerEndInterruption 方法委托 AVAudioPlayer

> ID：10519802
> 
> 赞同：0
> 
> 时间：2012-05-09T16:02:53.780
> 
> 标签：iphone, avaudioplayer

我的**ViewController**名称是**Mainviewcontroller**，我在其中执行 AVAudioplayer 的所有**操作**。

如果在 h 文件中我做

```
@class MainViewController;

@protocol MainViewControllerDelegate 

-(void)audioPlayerBeginInterruption:(AVAudioPlayer *)audioPlayer;

-(void)audioPlayerEndInterruption:(AVAudioPlayer *)audioPlayer;

@end

@interface MainViewController : UIViewController <UIActionSheetDelegate, InfoDelegate, AVAudioPlayerDelegate> 
```

我对上述声明感到困惑，我应该做**AVAudioPlayerDelegate**或**MainViewControllerDelegate**

如果我这样做**@protocolAVAudioPlayerDelegate**，那么我**会收到黄色警告，指出 AVAudioPlayer 的重复协议定义被忽略**

当我没有在其他任何地方定义**@protocolAVAudioPlayer时。**

我的另一个困惑是我应该先在 h 文件中声明这些方法，然后才在 m 文件中实现

```
-(void)audioPlayerBeginInterruption:(AVAudioPlayer *)audioPlayer;

-(void)audioPlayerEndInterruption:(AVAudioPlayer *)audioPlayer; 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T18:09:37.543

我认为您在这里误用了@protocol 构造。您可以继续删除整个 @protocol 块并实现您的类。您只需要指示您的类是 AVAudioPlayer 实例的委托，如下所示：

```
@interface MainViewController : UIViewController <UIActionSheetDelegate, InfoDelegate, AVAudioPlayerDelegate> 
```

然后，当您实例化您的 AVAudioPLayer 对象时，请务必将 MainViewController 分配为委托：

```
audioPlayInstance.delegate = self; 
```

最后，实现您希望在您的 AVAudioPlayer 实例上调用的两个方法（我在上面将其称为 audioPlayInstance）。您只需要将它们放在您的 .m 文件中，而不是您的标题中。这些方法的标头声明由 AVAudioPlayer.h 类文件处理。

祝你好运！

# javascript - Javascript - 大背景图像加载时间阻碍了我的 onLoad 函数

> ID：10519806
> 
> 赞同：2
> 
> 时间：2012-05-09T16:03:22.237
> 
> 标签：javascript, jquery, html

我在一个网站上有一张漂亮的背景图片，不幸的是需要一段时间才能加载。我的页面的其余部分由一个在正文加载时调用的函数驱动，如下所示：

```
<body onLoad="initialise()">
      ... 
```

因此，我的浏览器在调用 initialise() 之前等待后台完全加载。我如何在页面完全加载之前或至少在背景图像之前调用 initialise()。

感谢您的时间 ：）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T16:04:53.783

`</body>`只需在标签之前添加这个：

```
<script type="text/javascript">initialise();</script> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T16:06:31.630

如果您需要等到页面准备就绪，请尝试使用 jQuery 的 ready 事件：

```
<script type='text/javascript'>jQuery(document).ready(initialise)</script> 
```

这将在加载图像之前运行，但会等待所有 HTML。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T16:05:56.110

使用 jquery 的 ready() 方法。如果您不使用 jquery，请查看： [http](http://code.google.com/p/domready/) ://code.google.com/p/domready/ 这是一个专门用于这项工作的小型库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T16:07:30.920

如果 initialise() 不依赖于任何页面元素，那么您可以将其称为 head

```
<script type="text/javascript">
    initialise();
</script> 
```

如果 initialise() 需要页面元素，则将上述脚本放在 html 页面底部或使用 jquery 文档准备好

# c#-4.0 - Moq：在抽象类上验证受保护的方法被调用

> ID：10519808
> 
> 赞同：3
> 
> 时间：2012-05-09T16:03:29.367
> 
> 标签：c#-4.0, methods, tdd, moq, verify

这是我的测试

```
[TestClass]
public class RepositoryTests
{
    private APurchaseOrderRepository _repository;

    [TestInitialize]
    public void TestInitialize()
    {
        _repository = new FakePurchaseOrderRepository();
    }

    [TestMethod]
    public void RepositoryGetPurchaseOrdersForStoreCallsValidatePurchaseOrders()
    {
        var store = new Store();
        var mockRepo = new Mock<APurchaseOrderRepository>();
        mockRepo.Protected().Setup("ValidatePurchaseOrders", ItExpr.IsAny<List<PurchaseOrder>>());

        _repository.GetPurchaseOrders(store);

        mockRepo.Protected().Verify("ValidatePurchaseOrders", Times.Once(), ItExpr.IsAny<List<PurchaseOrder>>());
    } 
} 
```

APurchaseOrderRepository 和它的界面看起来像这样

```
public interface IPurchaseOrderRepository
{
    List<PurchaseOrder> GetPurchaseOrders(Store store);
}

public abstract class APurchaseOrderRepository : IPurchaseOrderRepository
{
    public abstract List<PurchaseOrder> GetPurchaseOrders(Store store);

    protected virtual bool ValidatePurchaseOrders(List<PurchaseOrder> purchaseOrders)
    {
        return true;
    }
} 
```

还有我的假货

```
public class FakePurchaseOrderRepository : APurchaseOrderRepository
{
    public override List<PurchaseOrder> GetPurchaseOrders(Store store)
    {
        var purchaseOrders = new List<PurchaseOrder>();

        ValidatePurchaseOrders(purchaseOrders);

        return purchaseOrders;
    }
} 
```

但是，我的测试失败了：

> 测试方法 PreSwapTests.RepositoryTests.RepositoryGetPurchaseOrdersForStoreCallsValidatePurchaseOrders 抛出异常：Moq.MockException：预期在模拟上调用一次，但为 0 次：模拟 => 模拟.ValidatePurchaseOrders(It.IsAny())
> 
> 配置的设置：mock => mock.ValidatePurchaseOrders(It.IsAny()), Times.Never 没有执行调用。

我究竟做错了什么？

笔记：

*   最小起订量 4.0.10827

更新：

我认为是这一行`mockRepo.Protected().Setup("ValidatePurchaseOrders");`，因为我需要将参数添加到它作为第二个参数，但我似乎无法正确理解。

更新 2：进行了一些修改，现在它可以编译了，但计数不正确......或者其他东西，错误消息和代码都在上面更新了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T17:14:21.583

意识到我做错了，改变了我的对象来处理这个测试

```
 [TestMethod]
    public void RepositoryGetPurchaseOrdersForStoreCallsValidatePurchaseOrders()
    {
        var store = new Store();

        var mockPurchaseOrderProvider = new Mock<IPurchaseOrderProvider>();
        var mockPurchaseOrderValidator = new Mock<IPurchaseOrderValidator>();
        var purchaseOrderRepository = new PurchaseOrderRepository(mockPurchaseOrderProvider.Object, mockPurchaseOrderValidator.Object);

        mockPurchaseOrderValidator.Setup(x => x.ValidatePurchaseOrders(It.IsAny<List<PurchaseOrder>>()));

        purchaseOrderRepository.GetPurchaseOrders(store);

        mockPurchaseOrderValidator.Verify(x => x.ValidatePurchaseOrders(It.IsAny<List<PurchaseOrder>>()), Times.Once());
    } 
```

现在我认为这是一个更好的结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:09:17.183

这是因为`ValidatePurchaseOrders`不在您的`IPurchaseOrderRepository`界面中。

存储库被声明为`private IPurchaseOrderRepository _repository;`它只能看到界面中的内容。

# vb.net - 在 Web 应用程序中使用服务器端 MsgBox() 是否错误？

> ID：10519811
> 
> 赞同：0
> 
> 时间：2012-05-09T16:03:31.347
> 
> 标签：vb.net

我有一个基于 vb.net 的 Web 应用程序，我在 MYPage.aspx.vb 中使用了 MsgBox()，我的期望是客户端上的用户应该单击一个按钮，并基于它进一步处理。

但是我听到有人建议 MsgBox() 在我的代码中运行良好，因为开发人员机器（我的开发箱）网络服务器在本地运行。这不适用于远程 Web 服务器或本地服务器之外的任何托管环境。

这是真的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:08:18.860

> 这是真的？

是的。服务器端代码*在服务器上*执行。VB.NET Code Behind 在服务器上执行。您在开发站上看到了它，因为服务器和客户端是同一台机器。

如果其他人从另一个客户端浏览到您的服务器，则该对话框将出现在服务器上，而用户将永远看不到它。

如果您需要对用户进行确认，则需要使用某种客户端代码，例如 JavaScript 和`confirm`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:11:34.110

Web 环境中没有 MessageBox。在服务器上显示 MessageBox 没有多大意义，但无论如何它都会编译。

因此，您要么需要使用[jQuery](http://jquerymessagebox.codeplex.com/)方法，要么需要使用简单的警报：

```
ScriptManager.RegisterStartupScript(page, page.GetType(), "MyScript", "alert('Hello World');", true) 
```

# asp.net-mvc-3 - ASP.NET MVC3：密码保护页面

> ID：10519822
> 
> 赞同：0
> 
> 时间：2012-05-09T16:04:25.250
> 
> 标签：asp.net-mvc-3, view, passwords

您好，在 MVC3 应用程序中，我想在页面上输入密码。

该页面可从调用控制器中的 ActionResult 的操作链接访问。并返回带有模型的视图。

向页面添加密码的最佳方法或最简单方法是什么。

类似于显示的弹出窗口，您必须输入密码，如果输入错误的密码，您将看不到页面（未加载视图）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T00:03:17.160

您可以在页面的获取操作上放置一个过滤器。

看看下面的链接

[http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)

# php - FQL NOT IN 等价运算符，如 <> 、 EXCEPT、 !=

> ID：10519823
> 
> 赞同：1
> 
> 时间：2012-05-09T16:04:25.730
> 
> 标签：php, facebook-fql

我正在尝试开发此代码：

```
$users = $facebook->api(array(
  'method' => 'fql.query',
  'query' =>    "SELECT uid, last_name, pic_big"
             + " FROM user WHERE uid IN ("
             + "     SELECT uid" 
             + "     FROM page_fan"
             + "     WHERE page_id='411133928921438'" 
             + "         AND uid IN ("
             + "             SELECT uid2 FROM friend WHERE uid1 = me()"
             + "         )"
             + ")"
)); 
```

这个想法是我不想使用运算符 IN 但不是 IN，但 FQL 不支持 NOT IN 之类的运算符，除了......我怎么能用 FQL 做到这一点？......

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-20T14:01:55.523

Facebook 确实支持 NOT IN。你只需要把它包在足够多的花括号里。

例如，要查找参加活动的不是当前用户或当前用户的朋友的用户：

```
SELECT uid, name FROM user WHERE uid IN (
  SELECT uid FROM event_member WHERE eid=209798352393506
)
AND NOT (uid=me())
AND NOT (uid IN (
  SELECT uid1 FROM friend WHERE uid2=me()
)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T11:57:55.860

刚刚找到了一种方法`NOT IN`，不得不分享这个好消息；）

```
SELECT post_id, actor_id, message FROM stream WHERE source_id in(a, b, c) and NOT (actor_id in (a, b, c)) 
```

这将从未知用户的多个页面获取消息，即用户的所有帖子或不是页面本身的页面，即粉丝。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-10T11:45:29.510

FQL中没有**NOT IN运算符。**您可以使用*IN*进行简单的选择并使用 PHP 进行否定。这有点开销，但据我所知，这是唯一的方法。

我找到了一个相关的帖子：[链接在这里](https://stackoverflow.com/a/8310831/1300817)。

# ruby-on-rails-3 - rails-translate-routes gem：是否可以翻译路线但保留（某些）原始路线？

> ID：10519824
> 
> 赞同：1
> 
> 时间：2012-05-09T16:04:27.293
> 
> 标签：ruby-on-rails-3, routes, carrierwave, translate

我正在使用 rails-translate-routes gem 仅翻译“前”路线。
我正在使用carrierwave在我的管理员中上传一些文件。这是一个上传者：

```
class CheatsheetUploader < CarrierWave::Uploader::Base
  [...]
  def store_dir
    "uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
  end
  [...]
end 
```

如您所见，路径使用模型的名称和字段的名称。

当我尝试获取文件时：

```
link_to "my file", download.cheatsheet.url 
```

路径是默认路径：

```
http://localhost:3000/uploads/download/cheatsheet/1/a_really_nice_file.pdf 
```

Rails 给了我一个很好的路由错误：

```
No route matches [GET] "/uploads/download/cheatsheet/1/a_really_nice_file.pdf" 
```

有什么办法处理这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-12T13:59:22.643

您可以将`keep_untranslated_routes: true`调用传递给`ActionDispatch::Routing::Translator.translate_from_file`.

例如：

```
ActionDispatch::Routing::Translator.translate_from_file(
  'config/locales/routes.yml',
  no_prefixes: true,
  keep_untranslated_routes: true) 
```

# iphone - iphone中视频的叠加视图

> ID：10519828
> 
> 赞同：0
> 
> 时间：2012-05-09T16:04:39.083
> 
> 标签：iphone, view, overlay

我是 iPhone 开发人员。我想在 iPhone 中添加对视频的过度查看。Overly view 上面会有按钮和标签。简而言之，将视频用作背景而不是 uiimage 。这可能吗？如果可能，那怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:11:02.657

我不确定这是你想要的，但如果是你可以试试这个：

```
[self.view insertSubview:self.mySecondView belowSubview:self.myThirdView]; 
```

这样，“mySecondView”将出现在“myThirdView”之上

# java - 关于通配符参数化类型的混淆

> ID：10519834
> 
> 赞同：1
> 
> 时间：2012-05-09T16:05:05.907
> 
> 标签：java, generics

我有 2 节课如下。据我了解，编译器不能在第 4 行（类 WildCard）抱怨，因为我的参数化类型是（Node？super Number> s0），因为对象是参数化类型中的数字的超级对象。但是编译器在 4,8 和 9 抱怨。为什么会这样。

```
public class Node<E> {

    private E data;

    public void setData(E obj) {
        data = obj;
    }

    public E getData() {
        return data;
    }
}

public class WildCard {

    static void checkIt(Node<? super Number> s0)
    {
        Object object=new Object(); //1
        Number number =1.5; //2
        Integer integer=10; //3

        s0.setData(object); //4
        s0.setData(number); //5
        s0.setData(integer); //6

        object=s0.getData(); //7
        number=s0.getData(); //8
        integer=s0.getData(); //9
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T16:38:24.867

问题如下：

`Node<? super Number>`意味着您可以`Node`使用类型`Number`或超类型的参数传入任何参数，例如`Object`.

由于您不知道该通用参数的确切类型，因此不允许进行某些操作。

以下是为什么有些行编译而有些行不编译的简短细分：

*   `s0.setData(object);`不能编译，因为你可能有一个`Node<Number>`which 不会你添加任意对象
*   `s0.setData(number);`编译因为`Number`匹配参数的所有可能类型
*   `s0.setData(integer);`编译因为`Integer`extends `Number`，因此上面的行适用

*   `object=s0.getData();`编译，因为任何数据对象都扩展`Object`，总是

*   `number=s0.getData();`无法编译，因为您可能有 a `Node<Object>`，因此数据对象可能有不同的类型（例如`String`）
*   `integer=s0.getData();` 无法编译，原因与上一行相同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:23:44.557

*Java 语言规范*说：

> 通配符可以有明确的界限，就像常规的类型变量声明一样。上限由以下语法表示，其中`B`是界限：
> 
> `? extends B`
> 
> 与在方法签名中声明的普通类型变量不同，使用通配符时不需要类型推断。因此，可以使用以下语法在通配符上声明下限，其中`B`是下限：
> 
> `? super B`

```
Reference(T referent, ReferenceQueue<? super T> queue); 
```

这里，可以将引用对象插入到元素类型是引用对象类型的超类型的**任何**`T`队列中；`T`是通配符的下限。

# javascript - 自动完成脚本获取对象预期错误

> ID：10519835
> 
> 赞同：0
> 
> 时间：2012-05-09T16:05:17.200
> 
> 标签：javascript, jquery, json

在网址[http://www.candyundies.com/template_non_product.php](http://www.candyundies.com/template_non_product.php)，我在搜索框上使用自动完成脚本来获取建议。我已经测试并在当前版本的 Chrome、Safari、Opera、Firefox 和 IE 8 中工作。但是，我注意到在 IE 8 中，在搜索框中输入第一个字母后，它会抛出一个 Object expected 错误，但脚本继续完美地工作。我确定这是语法错误或我忽略的一些小问题，但我似乎找不到问题。任何帮助将非常感激。

autocomplete.js 的内容：

```
// global variables
var acListTotal   =  0;
var acListCurrent = -1;
var acDelay       = 100;
var acURL         = null;
var acSearchId    = null;
var acResultsId   = null;
var acSearchField = null;
var acResultsDiv  = null;
function setAutoComplete(field_id, results_id, get_url) {
// initialize vars
acSearchId  = "#" + field_id;
acResultsId = "#" + results_id;
acURL       = get_url;
// create the results div
$("#auto").append('<div id="' + results_id + '"></div>');
// register mostly used vars
acSearchField   = $(acSearchId);
acResultsDiv    = $(acResultsId);
// on blur listener
acSearchField.blur(function(){ setTimeout("clearAutoComplete()", 100) });
// on key up listener
acSearchField.keyup(function (e) {
    // get keyCode (window.event is for IE)
    var keyCode = e.keyCode || window.event.keyCode;
    var lastVal = acSearchField.val();
    // check an treat up and down arrows
    if(updownArrow(keyCode)){
        return;
    }
    // check for an ENTER or ESC
    if(keyCode == 13 || keyCode == 27){
        clearAutoComplete();
        return;
    }
    // if is text, call with delay
    setTimeout(function () {autoComplete(lastVal)}, acDelay);
});
}
// treat the auto-complete action (delayed function)
function autoComplete(lastValue) {
// get the field value
var part = acSearchField.val();
// if it's empty clear the resuts box and return
if(part == ''){
    clearAutoComplete();
    return;
}
// if it's equal the value from the time of the call, allow
if(lastValue != part){
    return;
}
// get remote data as JSON
$.getJSON(acURL + part, function(json){
    // get the total of results
    var ansLength = acListTotal = json.length;
    // if there are results populate the results div
    if(ansLength > 0){
        var newData = '';
        // create a div for each result
        for(i=0; i < ansLength; i++) {
            newData += '<div class="unselected">' + json[i] + '</div>';
        }
        // update the results div
        acResultsDiv.html(newData);
        acResultsDiv.css("display","block");
        // for all divs in results
        var divs = $(acResultsId + " > div");
        // on mouse over clean previous selected and set a new one
        divs.mouseover( function() {
            divs.each(function(){ this.className = "unselected"; });
            this.className = "selected";
        });
        // on click copy the result text to the search field and hide
        divs.click( function() {
            acSearchField.val(this.childNodes[0].nodeValue);
            clearAutoComplete();
        });
    } else {
        clearAutoComplete();
    }
});
}
// clear auto complete box
function clearAutoComplete() {
acResultsDiv.html('');
acResultsDiv.css("display","none");
}
// treat up and down key strokes defining the next selected element
function updownArrow(keyCode) {
if(keyCode == 40 || keyCode == 38){
    if(keyCode == 38){ // keyUp
        if(acListCurrent == 0 || acListCurrent == -1){
            acListCurrent = acListTotal-1;
        }else{
            acListCurrent--;
        }
    } else { // keyDown
        if(acListCurrent == acListTotal-1){
            acListCurrent = 0;
        }else {
            acListCurrent++;
        }
    }
    // loop through each result div applying the correct style
    acResultsDiv.children().each(function(i){
        if(i == acListCurrent){
            acSearchField.val(this.childNodes[0].nodeValue);
            this.className = "selected";
        } else {
            this.className = "unselected";
        }
    });
    return true;
} else {
    // reset
    acListCurrent = -1;
    return false;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:20:02.093

问题解决了。请参阅 ocanal 的评论。

# r - R - 从给定约束的 2 个向量生成所有组合

> ID：10519836
> 
> 赞同：2
> 
> 时间：2012-05-09T16:05:30.567
> 
> 标签：r, combinations

我想生成两个向量的所有组合，给定两个约束：第一个向量中的字符永远不能超过 3 个，并且第二个向量中必须始终至少有一个字符。我还想改变组合中的最终字符数。

例如，这里有两个向量：

```
vec1=c("A","B","C","D")
vec2=c("W","X","Y","Z") 
```

假设我想要组合中的 3 个字符。可能的可接受的排列是：`"A" "B" "X"`或`"A" "Y" "Z"`。一个不可接受的排列是：`"A" "B" "C"`因为 . 中没有至少一个字符`vec2`。

现在说我想要组合中的 5 个字符。可能的可接受的排列是：`"A" "C" "Z" "Y"`或`"A" "Y" "Z" "X"`。一个不可接受的排列是：`"A" "C" "D" "B" "X"`因为有 >3 个字符来自`vec2`.

我想我可以`expand.grid`用来生成所有组合，然后以某种方式生成子集，但必须有一种更简单的方法。提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T17:32:09.400

我不确定这是否更容易，但是您可以使用此策略放弃不满足您的条件的排列：

1.  从中生成所有`vec1`可接受的组合。

2.  从中生成所有`vec2`可接受的组合。

3.  生成所有组合，从 1 中获取一种解决方案。+ 从 2 中获取一种解决方案。在这里，我将在之后使用条件 3 进行过滤。

4.  （如果你正在寻找组合，你就完成了，否则:) 在每个结果中产生所有字母排列。

现在，让我们

```
vec1 <- LETTERS [1:4]
vec2 <- LETTERS [23:26]

## lists can eat up lots of memory, so use character vectors instead.
combine <- function (x, y) 
  combn (y, x, paste, collapse = "")

res1 <- unlist (lapply (0:3, combine, vec1))
res2 <- unlist (lapply (1:length (vec2), combine, vec2)) 
```

现在我们有：

```
> res1
 [1] ""    "A"   "B"   "C"   "D"   "AB"  "AC"  "AD"  "BC"  "BD"  "CD"  "ABC"
[13] "ABD" "ACD" "BCD"
> res2
 [1] "W"    "X"    "Y"    "Z"    "WX"   "WY"   "WZ"   "XY"   "XZ"   "YZ"  
[11] "WXY"  "WXZ"  "WYZ"  "XYZ"  "WXYZ"

res3 <- outer (res1, res2, paste0)
res3 <- res3 [nchar (res3) == 5] 
```

所以你在这里：

```
> res3
 [1] "ABCWX" "ABDWX" "ACDWX" "BCDWX" "ABCWY" "ABDWY" "ACDWY" "BCDWY" "ABCWZ"
[10] "ABDWZ" "ACDWZ" "BCDWZ" "ABCXY" "ABDXY" "ACDXY" "BCDXY" "ABCXZ" "ABDXZ"
[19] "ACDXZ" "BCDXZ" "ABCYZ" "ABDYZ" "ACDYZ" "BCDYZ" "ABWXY" "ACWXY" "ADWXY"
[28] "BCWXY" "BDWXY" "CDWXY" "ABWXZ" "ACWXZ" "ADWXZ" "BCWXZ" "BDWXZ" "CDWXZ"
[37] "ABWYZ" "ACWYZ" "ADWYZ" "BCWYZ" "BDWYZ" "CDWYZ" "ABXYZ" "ACXYZ" "ADXYZ"
[46] "BCXYZ" "BDXYZ" "CDXYZ" "AWXYZ" "BWXYZ" "CWXYZ" "DWXYZ" 
```

如果您更喜欢将结果拆分为单个字母：

```
res <- matrix (unlist (strsplit (res3, "")), nrow = length (res3), byrow = TRUE)
> res
      [,1] [,2] [,3] [,4] [,5]
 [1,] "A"  "B"  "C"  "W"  "X" 
 [2,] "A"  "B"  "D"  "W"  "X" 
 [3,] "A"  "C"  "D"  "W"  "X" 
 [4,] "B"  "C"  "D"  "W"  "X" 
```

（剪断）

```
[51,] "C"  "W"  "X"  "Y"  "Z" 
[52,] "D"  "W"  "X"  "Y"  "Z" 
```

哪些是你的组合。

# c - 是否可以采用流程？

> ID：10519842
> 
> 赞同：25
> 
> 时间：2012-05-09T16:05:46.603
> 
> 标签：c, unix, parent, children, process-reaper

进程 A`fork()`的进程 B。

过程 A 死亡，因此`init`采用 B。

看门狗创建进程 C。

C 是否有可能从 中采用 B `init`？

* * *

**更新**：

或者，如果 C 是在 A 死之前创建的，而不`init`成为 B 的中间父级，甚至有可能让 C 直接采用 B（当 A 死时）？

* * *

**更新 1：**

此外，如果有任何意见说明为什么有可能采用我所描述的方式将是一件坏事或难以实施，我将不胜感激。

* * *

**Update-2** - 用例（父母和孩子指的是流程）：

我有一个应用程序使用父母来管理一大群孩子，这依赖于父母的管理设施。为了完成其工作，父母依赖于收到孩子终止的通知，这是通过接收相关`SIGCHLD`信号来完成的。

如果父母本身因某种事故（包括段错误）而死亡，我需要重新启动整个“家庭”，因为现在不可能在孩子终止时触发某些事情（这也可能是由于段错误）。

在这种情况下，我需要关闭所有孩子并重新启动整个系统。

避免这种情况的一种可能方法是建立一个备用进程，它可以接管死去的父母的角色...... - 如果它可以再次接收到继子女的`SIGCHLD`信号！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-11T11:00:01.287

不，绝对不可能。如果没有一些讨厌的竞争条件，它也无法实现。制作这些 API 的 POSIX 人员永远不会创建具有固有竞争条件的东西，所以即使您不介意，您的内核也不会很快得到它。

一个问题是 pid 被重复使用（它们是一种稀缺资源！），而且您也无法获得句柄或锁定一个；这只是一个数字。因此，比如说，在您的代码中的某处，您有一个变量，您可以在其中放置要重新设置的进程的 pid。然后你打电话`make_this_a_child_of_me(thepid)`。那时会发生什么？与此同时，其他进程可能已经退出并`thepid`更改为引用其他进程！哎呀。`make_this_a_child_of_me`如果不对unix 处理进程的方式进行大规模重组，就无法提供API。

请注意，对子 pid 进行 ing 的整个处理`wait`正是为了防止这个问题：进程表中仍然存在僵尸进程，以防止其 pid 被重用。然后，父进程可以通过它的 pid 引用它的子进程，确信进程不会退出并让子进程 pid 重用。如果子进程退出，它的 pid 将被保留，直到父进程捕获 SIGCHLD 或等待它。一旦进程被收割，它的 pid 立即可供其他程序在它们分叉时开始使用，但父进程保证已经知道它。

**对更新的响应**：考虑一个更复杂的方案，其中进程被重新分配给它们的下一个祖先。显然，这不可能在所有情况下都这样做，因为您经常想要一种与孩子断绝关系的方式，以确保您避免僵尸。init 很好地完成了这个角色。因此，流程必须通过某种方式来指定它打算收养或不收养其孙辈（或更低）。这种设计的问题与第一种情况完全相同：您*仍然*会遇到竞争条件。

如果再次由 pid 完成，则祖父母将自己暴露于竞争条件：只有父母能够获得 pid，因此只有父母真正知道 pid 与哪个进程一起使用。因为祖父母不能收割，所以不能确定孙进程没有改变它打算采用的进程（或不承认，取决于假设的 API 的工作方式）。请记住，在负载很重的机器上，没有什么可以阻止进程在几分钟内从 CPU 中取出，而整个负载可能在这段时间内发生了变化！不理想，但 POSIX 必须考虑到这一点。

最后，假设这个 API 不能通过 pid 工作，而只是一般地说，“将所有孙子发送给我”或“将它们发送给 init”。如果在子进程生成后调用它，那么您会像以前一样获得竞争条件。如果之前调用过它，那么整个事情就没用了：您应该能够稍微重构您的应用程序以获得相同的行为。也就是说，如果您在开始生成子进程之前就知道谁应该是谁的父进程，那么为什么不能一开始就以正确的方式创建它们呢？Pipes 和 IPC 确实能够完成所有必需的工作。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-09T16:13:21.740

不，您无法按照您所描述的方式强制执行 Reparenting。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-16T17:13:04.310

我不知道这样做的好方法，但拥有它的一个原因是运行的进程可以独立运行或向父进程添加功能。收养将作为事件的结果发生，由（尚未）孩子知道，但父母不知道。即将出生的孩子会向父母发送信号。父母会收养（或不收养）孩子。一旦成为父进程的一部分，父/子进程将能够对事件做出反应，而当单独站立时，它们都无法对事件做出反应。

这种对接行为可以编码到应用程序中，但我不知道如何实时进行。还有其他方法可以实现相同的功能。可以接受对接孩子的父母可以以父母以前不知道的新颖方式扩展其功能。

# javascript - get first 仅发生在数组中

> ID：10519851
> 
> 赞同：0
> 
> 时间：2012-05-09T16:06:21.427
> 
> 标签：javascript, jquery

我有一个包含三个元素的数组 X，我正在使用 $.inArray() 在另一个数组 Y 中搜索这三个元素 ...并返回 Y 中每个 X 元素的位置

```
X = [1,2,3] ;
y = [1,5,6,1,6,9,3,2] ; 
```

但是有重复, 1 在和中`y`出现了两次`y[0]``y[3]`

真实的例子在这里[http://jsfiddle.net/minagabriel/kHG9K/](http://jsfiddle.net/minagabriel/kHG9K/)

如何获得前 1 人入住并跳过其他人？

我将 1,2,3 的位置推到一个数组中，每个位置第一次出现

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:14:44.793

这在没有 jQuery 的情况下可以正常工作，并且`$.inArray`：

```
x = [1,2,3] ;
y = [1,5,6,1,6,9,3,2] ;

var z = {};

for (var i = 0; i < x.length; i++)
    for (var j = 0; j < y.length; j++)
        if (x[i] == y[j]) {
            z[x[i]] = j;
            break;
        }

console.log(z); 
```

​<code>z 是一个对象，其中包含元素 from`x`作为键，其位置作为值。

**更新。**将此应用于您的示例，这是可行的解决方案：http: [//jsfiddle.net/kHG9K/19/](http://jsfiddle.net/kHG9K/19/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:11:12.003

```
var x = [1,2,3];
var firstOccurrences = [];
var y = [1,5,6,1,6,9,3,2];

for (var i = 0, len = x.length; i < len; i++) {
    firstOccurrences.push(y.indexOf(x[i]));       
}

console.log(firstOccurrences); 
```

* * *

编辑：如下所述， indexOf() 在旧版本的 IE 中不可靠。这是一个更惯用的 jQuery 方法：

```
var x = [1,2,3];
var y = [1,5,6,1,6,9,3,2];

var firstOccurrences = $.map(x, function(item) { return $.inArray(item, y); }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:30:29.903

[http://jsfiddle.net/kHG9K/18/](http://jsfiddle.net/kHG9K/18/)

一旦找到它，我就从数组中删除它。

```
 if (start >= 0) {
        alert(y[i] + " " + "found it" + " " + " location" + z);
        y[i] = null;
    } 
```

注意：这不是循环数组的正确方法。用于`for(index;index<length;index++)`避免怪癖。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T16:19:59.667

jsFiddle：http: [//jsfiddle.net/kHG9K/16/](http://jsfiddle.net/kHG9K/16/)

```
var x = [1,2,3] ;
var y = [1,5,6,1,6,9,3,2] ;

function firstOccurence()
{
    for ( var a in x )
    {
       return $.inArray( x[a] , y );
    }
}

alert( firstOccurence() );    ​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T16:58:58.773

小提琴链接：[点击这里](http://jsfiddle.net/kETAH/3/)

你必须使用：

`$.inArray( value, array [, fromIndex] )`

在您的情况下，要从 y 数组中获取值 1 的索引，您可以简单地使用：

`$.inArray('1', y)`

检查 x 的每个值，如果存在于 y 中，并将每个索引保存在第三个数组 z 中：

```
var x = [1,2,3], y = [1,5,6,1,6,9,3,2], z = new Array(), i;
for(i = 0; i < x.length; i++) {
    var indexInY = $.inArray(x[i], y); // You get index -1 if the value is not found.
    z.push(indexInY);
    alert("Does x[" + i + "] with value = " + x[i] + 
                          " exist in y array? " + 
                          ((indexInY != -1) ? "Yes at position " + indexInY + "." : "No.")
                         );
}
alert("Indexes of x elements in y: [" + z + "]");

// Results:
// Does x[0] with value = 1 exist in y array? Yes at position 0.
// Does x[1] with value = 2 exist in y array? Yes at position 7.
// Does x[2] with value = 3 exist in y array? Yes at position 6.
//
// Indexes of x elements in y: [0,7,6] 
```

请注意，如果在数组中找不到您要查找的值，您将收到索引**-1 。**​</p>

小提琴链接：[点击这里](http://jsfiddle.net/kETAH/3/)

# vb.net - 写入文件，文件被另一个进程使用

> ID：10519853
> 
> 赞同：2
> 
> 时间：2012-05-09T16:06:27.743
> 
> 标签：vb.net, visual-studio-2010, writefile

好吧，所以我不知道为什么我不能写入文件。它说它正在被另一个进程使用。这是错误（IOException 未处理）：

```
The process cannot access the file 'C:\Temp\TempFile.cfg' because it is being used by another process. 
```

这是我用来写入文件的当前代码：

```
Dim myConfig
    Dim saveFileDialog1 As New SaveFileDialog()

    saveFileDialog1.Filter = "Configuration Files (*.cfg)|*.cfg"
    saveFileDialog1.FilterIndex = 2
    saveFileDialog1.RestoreDirectory = True

    If saveFileDialog1.ShowDialog() = DialogResult.OK Then
        myConfig = saveFileDialog1.OpenFile()
        If (myConfig IsNot Nothing) Then
            System.IO.File.WriteAllText(saveFileDialog1.FileName, TextBox1_Output_Module.Text & vbCrLf & TextBox2_Output_Module.Text & vbCrLf & TextBox3_Output_Module.Text)
            myConfig.Close()
        End If
    End If 
```

我不确定我错过了什么，因为我以为我昨天测试过它并且它有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T19:58:51.550

我想保持文件打开的过程是你自己的过程。
当您调用 saveDialog1.OpenFile() 时，您正在打开文件并返回一个流。
然后调用 WriteAllText() 尝试再次打开同一个文件，从而导致上述异常。
您可以简单地解决对 OpenFile() 的调用

```
 If saveFileDialog1.ShowDialog() = DialogResult.OK Then 
       File.WriteAllText(saveFileDialog1.FileName, TextBox1_Output_Module.Text & vbCrLf & TextBox2_Output_Module.Text & vbCrLf & TextBox3_Output_Module.Text) 
   End If 
```

请记住，WriteAllText() 创建一个新文件，将指定的字符串写入文件，然后关闭文件。如果**目标文件已经存在**，则会被覆盖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:50:46.190

好吧，这就是我最终做的事情，似乎工作得很好。我取出了 if 条件，其余的都保持原样。以后我总是可以为取消编写代码。

```
 Dim myConfig
    Dim saveFileDialog1 As New SaveFileDialog()

    saveFileDialog1.Filter = "Configuration Files (*.cfg)|*.cfg"
    saveFileDialog1.FilterIndex = 2
    saveFileDialog1.RestoreDirectory = True

    System.IO.File.WriteAllText(saveFileDialog1.FileName, TextBox1_Output_Module.Text & vbCrLf & TextBox2_Output_Module.Text & vbCrLf & TextBox3_Output_Module.Text) 
```

此代码用于确定/取消按钮。

```
 If saveFileDialog1.ShowDialog() = Windows.Forms.DialogResult.OK Then
        System.IO.File.WriteAllText(saveFileDialog1.FileName, TextBox1_Output_Module.Text & vbCrLf & TextBox2_Output_Module.Text & vbCrLf & TextBox3_Output_Module.Text)
    End If 
```

# linq - 将 SQL LINQ 结果绑定到 datagridview vb.net

> ID：10519857
> 
> 赞同：0
> 
> 时间：2012-05-09T16:06:38.913
> 
> 标签：linq, datagridview

我想创建一个 LINQ 到实体查询，从两个表中获取数据（连接）并将结果作为数据源绑定到 datagridview。

不幸的是，我似乎偶然发现了一个语法问题。

表 1：dcpricing.tblpricing 表 2：dcpropertydetail.tblpropertydetail

网格：grdpricing

```
Dim qry = (From propertyobj In dcPropertyDetail.tblproperydetail
                  Join Pricingobj In dcPricing.tblpricing
                  On propertyobj.prop_det_index Equals Pricingobj.prop_id
                  Where (propertyobj.prop_det_Status = 1)
                  Select propertyobj.prop_det_Name,          Pricingobj.prop_rental_double).ToList

grdpricing.datasource = qry 
```

传递查询时弹出错误并显示：[COLOR="Red"]指定的 LINQ 表达式包含对与不同上下文关联的查询的引用。[/COLOR]

我感谢所有帮助！斯蒂金

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:48:34.870

错误消息*准确地*告诉您问题所在 - 您有一个尝试跨越数据上下文的查询。具体来说，您的`tblpropertydetail`表来自`dcPropertyDetail`数据上下文，而您的`tblpricing`表来自`dcPricing`上下文。这在实体框架中是不允许的。

是否有某些原因您不能将它们放在相同的数据上下文中？如果它们位于不同的数据库中，请参阅[此问题](https://stackoverflow.com/questions/610197/ado-net-entity-framework-across-multiple-databases)以获取解决方法。

# oracle - Oracle 11g 文本：复合域索引 - 对来自不同表的列进行过滤

> ID：10519861
> 
> 赞同：2
> 
> 时间：2012-05-09T16:06:56.543
> 
> 标签：oracle, indexing, dns, composite, oracle-text

我正在使用 Oracle 11g 文本，

**AuthorTable** :（作者详细信息的表）AuthorId、AuthorName、AuthorDOB

**ArticleTable** : (文章内容表) ArticleId, WrittenDate, PublishDate, ARTICLE_TXT (CLOB)

**LocationTable**：（位置表）LocationId，LocationState，LocationCity

**ArticleAuthorAssocTable** : (文章-作者关联表) AuthorId, ArticleId

**LocAuthorAssocTable**：（作者位置关联表）AuthorId、LocationId、LocationStartDate、LocationEndDate

我的查询需要搜索 ARTICLE_TXT 上的任何输入搜索词以及 PublishDate / WrittenDate / AuthorDOB / LocationCity / LocationStartDate 范围上的任何其他查询。

由于我必须进行混合查询，因此我开始在 ArticleTable 上创建复合域索引 CDI。

```
 CREATE INDEX ARTICLE_TXT_CDI_IDX ON ArticleTable(ARTICLE_TXT) 
    INDEXTYPE IS ctxsys.CONTEXT 
    FILTER BY WrittenDate, PublishDate 
```

和查询为

```
SELECT 

/*+ domain_index_sort domain_index_filter(ARTICLE_TXT_CDI_IDX) */      article.ARTICLE_TXT, 

author.AuthorName , article.WrittenDate, article.PublishDate, LocationTable.LocationCity ,location.LocationStartDate, location.LocationEndDate 

FROM 

  ArticleTable article

  INNER JOIN 
  ArticleAuthorAssocTable  articleAuthorAssoc ON article.articleId = articleAuthorAssoc .articleId 

  INNER JOIN 
  AuthorTable author ON author.authorId= articleAuthorAssoc.authorId

  INNER JOIN 
  LocAuthorAssocTable locAuthorAssoc req ON author.authorId = locAuthorAssoc.authorId

INNER JOIN 
  LocationTable location ON location .authorId = locAuthorAssoc.authorId

WHERE

 CONTAINS(article.ARTICLE_TXT, 'Something') >0

 AND author.AuthorDOB BETWEEN TO_DATE('01/01/2001','MM/DD/YYYY') 
AND TO_DATE('12/31/2012','MM/DD/YYYY')

 AND location.LocationId IN (1,2) 
```

现在我的问题是：

1.  是否可以在不同表的列上使用 FILTER BY 创建复合域索引？
2.  有没有其他方法可以改进上述查询？

根据我的研究，一些选项正在使用物化视图、基于函数的索引、USER_DATASTORE

但不幸的是，仍然不知道如何使用它们......请用你的知识帮助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-17T14:20:50.430

我认为这个问题的最佳解决方案是向 ArticleTable 添加一个 XML 列，您可以在其中组合文章的所有必需信息。

然后，您需要向相关表添加触发器，以便在发生数据更改时重新创建此 xml。

通过这种方式，您可以索引此 xml 列并使用节组搜索非常具体的信息（例如“PATH_SECTION_GROUP”）

# java - Jersey hello world 给 404

> ID：10519862
> 
> 赞同：6
> 
> 时间：2012-05-09T16:07:05.577
> 
> 标签：java, tomcat, jersey

我的 java 类中有以下代码

```
import javax.ws.rs.*;
import javax.ws.rs.core.MediaType;

@Path("/hello")
public class Hello {
    //This method is called is TEXT_PLAIN is request
    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String sayPlainTextHello(){
        return "Hello World";
    }

    //this method is called if TEXT_XML is requested
    @GET
    @Produces(MediaType.TEXT_XML)
    public String sayXMLHello(){
        return "<?xml version=\"1.0\"?>"+"<Hello> Hello World"+"</hello>";
    }

    //this method is called if HTML is requested
    @GET
    @Produces(MediaType.TEXT_HTML)
    public String sayHtmlHello(){
        return "<html>"+"<title>"+"hello jersey"+"</title>"+"<body><h1>"+"hello World!!"+"</body></h1>"+"</html>";
    }
} 
```

当我键入时，我编译它并将其导出为 .WAR 文件

> [http://127.0.0.1/test_server/hello](http://127.0.0.1/test_server/hello)

我得到一个 404 。我在 WTP 中尝试过，cURL 他们都返回 404 .. 我使用的是 tomcat 7.0.26

注意：我在端口 80 上运行 Tomcat，其他 servlet 会按预期响应。

**web.xml 配置**

```
<display-name>Jersey_Test</display-name>
  <servlet>
    <servlet-name>Hello</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.example.service</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>Hello</servlet-name>
    <url-pattern>/*</url-pattern> 
```

以下 URL 给了我 Http status 500

```
 http://localhost/Jersey_Test/rest/hello
java.lang.ClassNotFoundException: com.sun.jersey.spi.container.servlet.ServletContainer 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-09T16:36:52.403

如果您根本没有注册 JAX-RS servlet 实现，就会发生这种情况`web.xml`。Jersey 需要以下配置：

```
<servlet>
    <servlet-name>jersey</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.example.service</param-value>
    </init-param>
</servlet>
<servlet-mapping>
    <servlet-name>jersey</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

`com.sun.jersey.config.property.packages`初始化参数值必须指向所有服务所在的包。但是，您的代码片段缺少`package`声明。我不确定是否为了简洁而省略了它，但是无包类对于包中本身的类是不可见的（例如 Tomcat 和 Jersey 引擎本身）。上面的`web.xml`例子假设你有一个

```
package com.example.service; 
```

在您的网络服务课程上。相应地修复或更改它。

请注意，URL 模式`/*`因此意味着所有请求都将通过 Jersey 传递。如果您还需要在同一个 webapp 中部署其他 servlet、JSP 或静态内容，您可能需要指定更具体的 URL 模式。例如

```
<url-pattern>/rest/*</url-pattern> 
```

您只需将请求 URL 更改为[http://localhost/test_server/rest/hello](http://localhost/test_server/rest/hello)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:29:33.540

看起来您在错误的位置注册了您的 servlet。仔细检查您的 servlet 的根 URL，并确保它与您点击的内容相匹配。

你试过打吗？：

```
http://127.0.0.1/hello 
```

请记住，`/hello`无论您的 servlet 的基本 URL 是什么，它都会出现。尝试在调试器中查看它以查看它的安装位置。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T14:46:18.993

问题已解决，我就是这样做的。

我从构建路径中删除了球衣 .jar 文件并将它们替换到`WEB-INF\lib`文件夹中，一切正常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-07T13:12:07.957

对我来说，`jar`添加了一个文件，文件系统中缺少`Build path -> Libraries`实际文件。`jar`

我从中删除了条目`build path`并在`pom.xml`. 像魅力一样工作。

# simplexml - simplexml_load_file 不是有效的 URI 问题

> ID：10519865
> 
> 赞同：0
> 
> 时间：2012-05-09T16:07:10.727
> 
> 标签：simplexml, php

我正在尝试从 xml 文件中读取数据以导入数据库。我在加载文件时遇到问题：

> **解析器警告：xmlns：x-schema:#Schema1 不是有效的 URI**

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-09T16:08:30.320

问题出在 XML 文件中，而不是在您的代码中。

您还可以尝试使用禁用警告

```
libxml_use_internal_errors(true); 
```

# c - 获取终端名称

> ID：10519866
> 
> 赞同：3
> 
> 时间：2012-05-09T16:07:15.680
> 
> 标签：c, terminal

我正在寻找如何使用 C 编程语言 (GNU/Linux) 获取终端仿真器的名称（《aterm》、《xterm》、《konsole》等）。我做了几项研究，但我没有找到任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:22:56.460

我怀疑是否有可靠的方法来检查这一点。

正如@larsmans 建议的那样，您可以检查`TERM`env 变量，但大多数模拟器使用相同的终端设置..

我会检查父进程 id ( `getppid`) 及其父进程 ( [linux: programmatically get parent pid of another process?](https://stackoverflow.com/questions/1525605/linux-programmatically-get-parent-pid-of-another-process) ) 等等，直到你找到一个名称看起来像终端模拟器的进程......

或者，如果您`pstree`只是处理其输出：

```
# pstree -As 12652
init---screen---bash---pstree 
```

（对不起，我没有 X 终端，所以我无法展示一个合适的例子）

无论如何，这些都不是完全可靠的，但可能会起作用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-09T16:25:25.777

终端的名称由`TERM`环境变量给出。

```
char *termtype = getenv("TERM");
printf("The terminal type is %s\n", termtype); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-09T10:17:04.593

看看这是否有效。我从 Emacs 以及 urxvt、xterm 和 rxvt 中对其进行了测试。

```
#!/bin/zsh

terminal_emulator_parents=`pstree -As $$`
tep_list=`echo $terminal_emulator_parents | tr -s "-" | tr "-" " " \
          | tac -s' ' | tr '\n' ' '`

found="false"
for process in `echo $tep_list`; do
    if [[ $process =~ ("urxvt"|"xterm"|"rxvt") ]]; then # here: add all
        found="true"                                    # terminal emulators
        break                                           # you can think of
    fi
done

if [[ $found == "true" ]]; then
    echo "Terminal emulator: $process"
else
    echo "Couldn't determine the terminal emulator."
fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-05T21:02:45.390

**使用pstree**建立前两个答案，我创建了一个环境变量来识别 .bashrc 中的终端仿真器类型，然后在我的脚本中，我可以访问该信息。

我使用它来使用 postactivate 将我的 guake 选项卡标题设置为当前虚拟环境并在 postdeactivate 中清除它，但是如果我在使用不同的终端程序时碰巧进入虚拟环境，我不希望调用 guake。

**这是我的代码：**

在 .bashrc

```
export TERM_TYPE=`pstree -As $$ | awk -F "---" '{print $2}'` 
```

在 postdeactivate 或 postactivate 中（将“终端”替换为所需的选项卡名称）

```
#!/bin/bash
# This hook is run after every virtualenv is deactivated.

if [ "$TERM_TYPE" == "guake" ]; then
  guake -r Terminal
fi 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-05T18:20:00.507

有函数：ctermid() 和 gettyname()

ctermid 返回指定字符串中的名称

getttyname 适用于选定的文件设备

# .net - Dataview RowFilter 正在更改 .NET 4.0 中的缓存数据集

> ID：10519867
> 
> 赞同：0
> 
> 时间：2012-05-09T16:07:16.153
> 
> 标签：.net, caching, dataset, dataview

我之前在 .NET 2.0 中使用过此代码，并且长期以来一直表现良好。我不知道4.0是否与此有关，但我无法解释输出。我把它提炼成这段代码：

```
Sub page_prerender(s As Object, e As EventArgs)
    cache_list()
    Dim dstar As DataSet = Cache("dstallarchives")
    Dim viewar As DataView = dstar.Tables("archive").DefaultView

    Response.Write(viewar.Count & "<br/>") 'output 891
    viewar.RowFilter = "customerid=25"
    Response.Write(viewar.Count & "<br/>") 'output 52

    'clear the dataview, create it fresh from the cache
    viewar = New DataView
    viewar = Cache("dstallarchives").tables("archive").defaultview
    Response.Write(viewar.Count) 'output 52???
End Sub 
```

Cache_list 在包含 891 条记录的数据集中插入一个表。52 有 customerid=25。您可以在上面看到我得到的输出，当它应该是 891 - 52 - 891 我通常不会创建中间 dstar 数据集，而是直接从缓存对象创建数据视图。但现在输出对我来说更没有意义了。请在我的笔记本电脑遭受 3 层楼跌落之前提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:30:00.223

我仍然不知道为什么以前的代码会这样，但我找到了解决问题的方法。声明 DataView 时，使用完整的构造函数：

```
viewarchive = New DataView(Cache("dstallarchives").tables("archive"), "", "", DataViewRowState.CurrentRows) 
```

如果有人可以向我解释这一点，我仍然想听听！

# c# - DeflateStream：在阅读时压缩文件

> ID：10519868
> 
> 赞同：3
> 
> 时间：2012-05-09T16:07:20.690
> 
> 标签：c#, wcf, stream, compression, deflate

[我正在尝试通过WCF](http://www.codeproject.com/Articles/20364/Progress-Indication-while-Uploading-Downloading-Fi)（一些 GB）发送大量数据。我想在使用 Streams 读取文件时压缩文件，但看起来 DeflateStream 有两种模式：

*   压缩（写入流）
*   解压（读取流）

这些模式都不适用于我的情况。我想从磁盘读取一个未压缩的文件并通过 WCF 返回一个压缩流。

有没有办法这样做，或者我必须使用临时文件（或 MemoryStream）？

是缺少功能还是由于某种原因不可能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T16:23:03.110

看起来您正在尝试在读取文件时进行压缩。deflatestream 的写入方式，压缩必须作为写入的一部分进行。尝试包装您通过线路发送的流，而不是您从磁盘读取的流。如果它们相同，则需要一个中间流。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T16:33:41.010

尝试使用这些方法来压缩和解压缩字节数组。

```
 private static byte[] Compress(byte[] data)
    {
        byte[] retVal;
        using (MemoryStream compressedMemoryStream = new MemoryStream())
        {
            DeflateStream compressStream = new DeflateStream(compressedMemoryStream, CompressionMode.Compress, true);
            compressStream.Write(data, 0, data.Length);
            compressStream.Close();
            retVal = new byte[compressedMemoryStream.Length];
            compressedMemoryStream.Position = 0L;
            compressedMemoryStream.Read(retVal, 0, retVal.Length);
            compressedMemoryStream.Close();
            compressStream.Close();
        }
        return retVal;
    }

    private static byte[] Decompress(byte[] data)
    {
        byte[] retVal;
        using (MemoryStream compressedMemoryStream = new MemoryStream())
        {
            compressedMemoryStream.Write(data, 0, data.Length);
            compressedMemoryStream.Position = 0L;
            MemoryStream decompressedMemoryStream = new MemoryStream();
            DeflateStream decompressStream = new DeflateStream(compressedMemoryStream, CompressionMode.Decompress);
            decompressStream.CopyTo(decompressedMemoryStream);
            retVal = new byte[decompressedMemoryStream.Length];
            decompressedMemoryStream.Position = 0L;
            decompressedMemoryStream.Read(retVal, 0, retVal.Length);
            compressedMemoryStream.Close();
            decompressedMemoryStream.Close();
            decompressStream.Close();
        }
        return retVal;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T16:18:21.540

你应该有类似的东西：

```
public void CompressData(Stream uncompressedSourceStream, Stream compressedDestinationStream)
{
    using (DeflateStream compressionStream = new DeflateStream(compressedDestinationStream, CompressionMode.Compress))
    {
        uncompressedSourceStream.CopyTo(compressionStream);
    }
}

public void DecompressData(Stream compressedSourceStream, Stream uncompressedDestinationStream)
{
    using (DeflateStream decompressionStream = new DeflateStream(uncompressedDestinationStream, CompressionMode.Decompress))
    {
        compressedSourceStream.CopyTo(decompressionStream);
    }
}

using (FileStream sourceStream = File.OpenRead(@"C:\MyDir\MyFile.txt))
using (FileStream destinationStream = File.OpenWrite(@"C:\MyDir\MyCompressedFile.txt.cp"))
{
    CompressData(sourceStream, destinationStream)
} 
```

另外，请注意，您可能必须更改应用程序的 .config 文件中的 WCF 设置，以允许传输非常大的内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-10T23:08:04.910

您可以将 DeflateStream 包装在您自己的流中。每次您想从压缩流中读取数据时，都必须将字节输入 deflatestream，直到它写入缓冲区。然后，您可以从该缓冲区返回字节。

```
public class CompressingStream : Stream
{
    private readonly DeflateStream _deflateStream;
    private readonly MemoryStream _buffer;
    private Stream _inputStream;
    private readonly byte[] _fileBuffer = new byte[64 * 1024];

    public CompressingStream(Stream inputStream)
    {
        _inputStream = inputStream;
        _buffer = new MemoryStream();
        _deflateStream = new DeflateStream(_buffer, CompressionMode.Compress, true);
    }

    public override int Read(byte[] buffer, int offset, int count)
    {
        while (true)
        {
            var read = _buffer.Read(buffer, offset, count);

            if (read > 0) return read;

            if (_inputStream == null) return 0;

            _buffer.Position = 0;
            read = _inputStream.Read(_fileBuffer, 0, _fileBuffer.Length);
            if (read == 0)
            {
                _inputStream.Close();
                _inputStream = null;
                _deflateStream.Close();
            }
            else
            {
                _deflateStream.Write(_fileBuffer, 0, read);
            }
            _buffer.SetLength(_buffer.Position);
            _buffer.Position = 0;
        }
    }

    public override bool CanRead
    {
        get { return true; }
    }
#region Remaining overrides...
} 
```

每当 wcf 从流中读取时，压缩流将写入压缩 DeflateStream，直到它从输出缓冲区 (_buffer) 中读取。这很丑陋，但它有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T18:00:50.773

我试图创建一个 Stream ，无论何时`Read`被调用：

*   从源文件中读取一大块数据
*   将块写入`DeflateStream` 连接到 MemoryStream 的
*   将 的内容复制`MemoryStream`到 Read`buffer`参数。

当然，这将更加困难，因为两个流的大小并不相似。

最后我取消了这个选项，因为我没有办法在不完全压缩的情况下预测生成的压缩文件的大小。

但是，读取文件能够预测文件大小，因此也许可以使用另一种实现`DeflateStream` 。

希望它可以帮助其他迷失的灵魂......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-03-02T15:12:05.183

适用于 blob 的 Azure API 具有 UploadStream(stream) 的替代方法。您可以使用 OpenWrite() 获取流。因此，现在您可以控制推送字节，因此可以在将内容流式传输到服务时进行压缩

```
using (var uploadStream = blob.OpenWrite())
using (var deflateStream = new DeflateStream(uploadStream, CompressionMode.Compress))
{
    stream.CopyTo(deflateStream);
} 
```

我没有检查 WCF API，但如果你不能这样做，我会感到惊讶。

# r - 如何在没有循环的情况下在 Base R 中创建包含组的线图？

> ID：10519873
> 
> 赞同：13
> 
> 时间：2012-05-09T16:07:35.900
> 
> 标签：r

我需要使用以下数据创建一个带有组的简单线图：

```
test = data.frame(x =  rep(1:3, each = 2),
                  group =  rep(c("Group 1","Group 2"),3),
                  groupcd= rep(c(1,2),3),
                  y=   c(22,8,11,4,7,5)
                  ) 
```

我可以用 GGPLOT 轻松做到：

```
library(ggplot2)
    #GGPLOT
    qplot(x=x, y=y, 
           data=test, 
           colour=group, 
           main="GGPLOT line plot with groups") +
      geom_line() 
```

![在此处输入图像描述](../Images/49c1ed18006d9b6aab4f0be603e3b52c.png)

我也可以用 TRELLIS 做到这一点：

```
library(lattice)
xyplot(y~x,
       type="b",
       group=group,
       data=test,
       main="TRELLIS line plot with groups",
       auto.key =list(
         lines = TRUE)
       ) 
```

![在此处输入图像描述](../Images/88cc8734a74f01e609dd41548ae0d413.png)

但是，我现在有点不愿意使用 GGPLOT 或 TRELLIS。我希望能够使用 Base R 创建此图。使该图在 Base R 中工作的唯一方法是使用 for 循环：

```
# set up empty plot
plot(test$y ~test$x,  ylab="y", xlab="x", type="n", main="Base R line plot with groups")
colors<-c("red","blue")
#plot each group in the for loop
number_of_groups <- as.numeric(max(unique(test$groupcd))) #calculate number of groups
for (i in 1:number_of_groups) 
{
  temp <- subset(test,  groupcd==i )
  lines(temp$x, temp$y, col=colors[i])  
  points(temp$x, temp$y, col=colors[i])  
}
legend("top", legend=unique(test$group), text.col =colors  ) 
```

![在此处输入图像描述](../Images/9d928336be9cc6361321d03ea3b3bfec.png)

这种方法似乎相当复杂。在base R中有没有更简单的方法来做到这一点？基本 R 绘图功能中是否有组选项？非常感谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-10T00:22:03.103

像这样的东西作为工作的基础怎么样：

```
test = data.frame(x = rep(1:3, each = 2),
                  group = rep(c("Group 1", "Group 2"), 3),
                  group_cd = rep(c(1, 2), 3),
                  y = c(22, 8, 11, 4, 7, 5))

xvals <- split(test$x, test$group)
yvals <- split(test$y, test$group)

plot(1:max(unlist(xvals)), ylim = c(0, max(unlist(yvals))), type = "n")
# thanks to @BenBolker for refining this next key line
mapply(lines, xvals, yvals, col = c("red", "blue"), pch = 1:2, type = "o") 
```

结果：

![在此处输入图像描述](../Images/0fa8d870d879a30d6095f424e18fdcf9.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-10T00:37:38.087

使用 MATPLOT 的不同方法：

```
library(reshape)
test = data.frame(x =  rep(1:3, each = 2),
                  group =  rep(c("Group 1","Group 2"),3),
                  groupcd= rep(c(1,2),3),
                  y=   c(22,8,11,4,7,5)
                  )
colors<-c("red","blue")

#Transform  data to wide format 
test_transposed<-reshape(test, 
                         idvar='x',
                         drop="group",
                         timevar="groupcd", 
                         direction="wide")
colors<-c("red","blue")

#drop x column
test_transposed$x<-NULL

matplot(test_transposed, 
        type = "b",
        ylab="y",
        col=colors,
        main="MATPLOT with groups",
        pch = 1:2)

legend("top", 
       legend=unique(test$group), 
       lty=1:2, 
       col=colors,
       pch=1:2  ) 
```

![在此处输入图像描述](../Images/ddde207c3d9f140b49dbeceb4f364650.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T18:36:07.400

我也想知道这个。我的面板数据没有完全覆盖 x 轴（年），因此类似矩阵的解决方案可能会变得复杂。相反，我和...

```
mytest = data.frame(
              x =  rep(1:3, each = 2),
              groupcd= rep(c(1,2),3),
              y=   c(22,8,11,4,7,5)
              )
mytest = rbind(mytest,c(2,3,15),c(3,3,17))

plottables <- split(mytest,mytest$groupcd)
plot(y~x,dat=plottables[[1]],type="l",xlim=range(mytest$x),ylim=range(mytest$y))
lapply(plottables,function(z)points(y~x,dat=z,type="l")) 
```

# controls - 内容背面的 Nivo 滑块控件 Z-Index 无法单击/外部控件

> ID：10519875
> 
> 赞同：0
> 
> 时间：2012-05-09T16:07:39.690
> 
> 标签：controls, slider, z-index, nivo-slider

我有一个网站，我正在使用内容背面的 nivo 滑块和水平宽度，一切正常，但控件“箭头”和“项目符号”不能正常工作。

示例：[http ://www.aiguapool.mx/test/](http://www.aiguapool.mx/test/)

在 IE 8 和 IE9 中，您可以单击并工作，但在 Firefox 和 chrome 中不做任何事情，就像某些 div 覆盖并且不让用户单击按钮。Nivo Slider 几乎没有动过，我刚刚为包含此 CCS 代码的 nivo 滑块创建了一个包装器

```
.slider-wrap {<br>
    overflow: hidden;<br>
    position: absolute;<br>
    width: 1490px;<br>
    height: 535px;<br>
    top: 80px;<br>
    left: 50%;<br>
    margin-left: -745px;<br>
    z-index: -1;<br>
} 
```

所以我的问题是为什么在 IE 上工作而不是在 Firefox 和 Chrome 甚至 Safari 上工作，如果我缺少一些东西，我尝试的另一种方法是生成一个外部控件但没有工作（控件没有响应）例如。

```
$("#previousButton, #nextButton").click(function (e) {

         // Prevent the link from being followed
         e.preventDefault();

         // Initialize variables 
         var buttonId = this.id,
          buttonClass = ("previousButton" == buttonId) ? ".nivo-prevNav" : ".nivo-nextNav";

         // Trigger the slider button
         $(".nivo-directionNav").find(buttonClass).click();
    });

$("#triangleNodePrev").click(function(){$(".nivo-directionNav .nivo-prevNav").click()})
$("#triangleNodeNext").click(function(){$(".nivo-directionNav .nivo-nextNav").click()})

$(".nivo-directionNav .nivo-prevNav").click()

$(".nivo-directionNav .nivo-nextNav").click() 
```

并创建一个链接`<a href="#" id="previousButton">Back</a>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T17:37:18.480

经过多次尝试，我终于解决了。我不得不提到我使用网格系统，所以我在顶部有 1 个容器用于标题，在底部有一个容器用于内容。

所以我调整了内容容器的 CSS：

```
.container_content {
    position: absolute;
    margin-left: -540px;
    width: 1050px;
    padding: 0 15px;
    background: url(../images/estructura/bg-content-albercas.png) no-repeat;
    min-height: 200px;
    top: 560px;
    left: 50%;
    padding-top: 40px;
    z-index:99;
} 
```

一切正常。

# facebook - Monotouch Facebook Binding Publish to Wall 崩溃

> ID：10519879
> 
> 赞同：0
> 
> 时间：2012-05-09T16:07:57.053
> 
> 标签：facebook, binding, xamarin.ios

[我从https://github.com/mono/monotouch-bindings](https://github.com/mono/monotouch-bindings)下载并构建了 facebook-binding 身份验证有效，但是当我尝试将某些内容发布到我的墙上时，我遇到了本地崩溃。在“发布到墙上”对话框出现后，当我单击“取消”以及单击“共享”时，应用程序崩溃。实际帖子已成功发布到我的墙上，但崩溃不是很有趣:)

**这是本机堆栈跟踪：**

在 (wrapper managed-to-native) MonoTouch.UIKit.UIApplication.UIApplicationMain (int,string[],intptr,intptr) 在 MonoTouch.UIKit.UIApplication.Main (string[],string,string) [0x00042] 在 /Developer /MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:29 at sample.AppDelegate.Main (string[]) [0x00000] in /Users/fusonic/Projects/facebook/sample/Main.cs:263 at (wrapper运行时调用) .runtime_invoke_void_object (object,intptr,intptr,intptr)

```
0   sample                              0x0009e72c mono_handle_native_sigsegv + 284
1   sample                              0x00013ab8 mono_sigsegv_signal_handler + 248
2   libSystem.B.dylib                   0x9474805b _sigtramp + 43
3   ???                                 0xffffffff 0x0 + 4294967295
4   sample                              0x000094f3 -[FBDialog webView:shouldStartLoadWithRequest:navigationType:] + 735
5   UIKit                               0x0115b8d4 -[UIWebView webView:decidePolicyForNavigationAction:request:frame:decisionListener:] + 222
6   UIKit                               0x0115d59e -[UIWebViewWebViewDelegate webView:decidePolicyForNavigationAction:request:frame:decisionListener:] + 77
7   CoreFoundation                      0x0219551d __invoking___ + 29
8   CoreFoundation                      0x02195437 -[NSInvocation invoke] + 167
9   CoreFoundation                      0x021c049a -[NSInvocation invokeWithTarget:] + 74
10  WebKit                              0x06b43aa4 -[_WebSafeForwarder forwardInvocation:] + 164
11  CoreFoundation                      0x021960c9 ___forwarding___ + 889
12  CoreFoundation                      0x02195ce2 _CF_forwarding_prep_0 + 50
13  CoreFoundation                      0x0219551d __invoking___ + 29
14  CoreFoundation                      0x02195437 -[NSInvocation invoke] + 167
15  WebCore                             0x076e3ae3 _ZL11SendMessageP12NSInvocation + 35
16  WebCore                             0x076e4115 _ZL20HandleDelegateSourcePv + 101
17  CoreFoundation                      0x0220397f __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE0_PERFORM_FUNCTION__ + 15
18  CoreFoundation                      0x02166b73 __CFRunLoopDoSources0 + 243
19  CoreFoundation                      0x02166454 __CFRunLoopRun + 1012
20  CoreFoundation                      0x02165db4 CFRunLoopRunSpecific + 212
21  CoreFoundation                      0x02165ccb CFRunLoopRunInMode + 123
22  GraphicsServices                    0x03e95879 GSEventRunModal + 207
23  GraphicsServices                    0x03e9593e GSEventRun + 114
24  UIKit                               0x00fa5a9b UIApplicationMain + 1175
25  ???                                 0x0d080a05 0x0 + 218630661
26  ???                                 0x09ffaf18 0x0 + 167751448
27  ???                                 0x09ffac10 0x0 + 167750672
28  ???                                 0x09ffad66 0x0 + 167751014
29  sample                              0x00017e22 mono_jit_runtime_invoke + 722
30  sample                              0x00177d2e mono_runtime_invoke + 126
31  sample                              0x0017be14 mono_runtime_exec_main + 420
32  sample                              0x00181235 mono_runtime_run_main + 725
33  sample                              0x00075025 mono_jit_exec + 149
34  sample                              0x00010d2f main + 2202
35  sample                              0x0000d5a9 start + 53 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T13:59:16.583

好的，问题是因为 GC 正在收集 Handler Delegate。当保持对委托的引用时，该示例有效。

修复可以在这里找到：[https ://github.com/mono/monotouch-bindings/pull/46](https://github.com/mono/monotouch-bindings/pull/46)

# tomcat - Icefaces打开jsf和icefaces jar文件数百次

> ID：10519880
> 
> 赞同：0
> 
> 时间：2012-05-09T16:08:03.657
> 
> 标签：tomcat, icefaces

我只是让我系统的所有用户尝试同时登录。我的服务器因这个错误而崩溃：

```
SEVERE: Socket accept failed
Throwable occurred: java.net.SocketException: Too many open files
    at java.net.PlainSocketImpl.socketAccept(Native Method)
    at java.net.PlainSocketImpl.accept(PlainSocketImpl.java:449)
    at java.net.ServerSocket.implAccept(ServerSocket.java:473)
    at java.net.ServerSocket.accept(ServerSocket.java:441)
    at org.apache.tomcat.util.net.DefaultServerSocketFactory.acceptSocket(DefaultServerSocketFactory.java:59)
    at org.apache.tomcat.util.net.JIoEndpoint$Acceptor.run(JIoEndpoint.java:212)
    at java.lang.Thread.run(Thread.java:736)
May 9, 2012 10:04:11 AM org.apache.tomcat.util.net.JIoEndpoint$Acceptor run 
```

我运行了一个 lsof 命令来查看 tomcat 用户打开了哪些文件，并得到了一个巨大的文件列表。大多数看起来很正常，但后来我遇到了大约 700 个相同文件的条目，这是该输出的一个片段：

```
java    12285 tomcat  256r   REG                8,3  1470076    1040880 /usr/share/tomcat7/shared/nmsc/icefaces-ace-3.0.0.RC2.jar
java    12285 tomcat  257r   REG                8,3  1955103    1040820 /usr/share/tomcat7/shared/nmsc/jsf-impl-2.1.4.jar
java    12285 tomcat  258r   REG                8,3  1955103    1040820 /usr/share/tomcat7/shared/nmsc/jsf-impl-2.1.4.jar
java    12285 tomcat  259r   REG                8,3   271669    1040879 /usr/share/tomcat7/shared/nmsc/icefaces-3.0.0.RC2.jar
java    12285 tomcat  260r   REG                8,3  1470076    1040880 /usr/share/tomcat7/shared/nmsc/icefaces-ace-3.0.0.RC2.jar
java    12285 tomcat  261r   REG                8,3  1470076    1040880 /usr/share/tomcat7/shared/nmsc/icefaces-ace-3.0.0.RC2.jar
java    12285 tomcat  262r   REG                8,3  1470076    1040880 /usr/share/tomcat7/shared/nmsc/icefaces-ace-3.0.0.RC2.jar
java    12285 tomcat  263r   REG                8,3  1470076    1040880 /usr/share/tomcat7/shared/nmsc/icefaces-ace-3.0.0.RC2.jar
java    12285 tomcat  264r   REG                8,3  1470076    1040880 /usr/share/tomcat7/shared/nmsc/icefaces-ace-3.0.0.RC2.jar
java    12285 tomcat  265r   REG                8,3  1470076    1040880 /usr/share/tomcat7/shared/nmsc/icefaces-ace-3.0.0.RC2.jar
java    12285 tomcat  266r   REG                8,3  1470076    1040880 /usr/share/tomcat7/shared/nmsc/icefaces-ace-3.0.0.RC2.jar
java    12285 tomcat  267r   REG                8,3  1470076    1040880 /usr/share/tomcat7/shared/nmsc/icefaces-ace-3.0.0.RC2.jar
java    12285 tomcat  268r   REG                8,3  1470076    1040880 /usr/share/tomcat7/shared/nmsc/icefaces-ace-3.0.0.RC2.jar
java    12285 tomcat  269r   REG                8,3  1955103    1040820 /usr/share/tomcat7/shared/nmsc/jsf-impl-2.1.4.jar
java    12285 tomcat  270r   REG                8,3  1955103    1040820 /usr/share/tomcat7/shared/nmsc/jsf-impl-2.1.4.jar
java    12285 tomcat  271r   REG                8,3   271669    1040879 /usr/share/tomcat7/shared/nmsc/icefaces-3.0.0.RC2.jar
java    12285 tomcat  272r   REG                8,3  1470076    1040880 /usr/share/tomcat7/shared/nmsc/icefaces-ace-3.0.0.RC2.jar
java    12285 tomcat  273r   REG                8,3  1470076    1040880 /usr/share/tomcat7/shared/nmsc/icefaces-ace-3.0.0.RC2.jar
java    12285 tomcat  274r   REG                8,3   271669    1040879 /usr/share/tomcat7/shared/nmsc/icefaces-3.0.0.RC2.jar
java    12285 tomcat  275r   REG                8,3  1955103    1040820 /usr/share/tomcat7/shared/nmsc/jsf-impl-2.1.4.jar
java    12285 tomcat  276r   REG                8,3  1470076    1040880 /usr/share/tomcat7/shared/nmsc/icefaces-ace-3.0.0.RC2.jar
java    12285 tomcat  277r   REG                8,3  1955103    1040820 /usr/share/tomcat7/shared/nmsc/jsf-impl-2.1.4.jar
java    12285 tomcat  278r   REG                8,3   271669    1040879 /usr/share/tomcat7/shared/nmsc/icefaces-3.0.0.RC2.jar
java    12285 tomcat  279r   REG                8,3  1470076    1040880 /usr/share/tomcat7/shared/nmsc/icefaces-ace-3.0.0.RC2.jar
java    12285 tomcat  280r   REG                8,3  1470076    1040880 /usr/share/tomcat7/shared/nmsc/icefaces-ace-3.0.0.RC2.jar
java    12285 tomcat  281r   REG                8,3  1955103    1040820 /usr/share/tomcat7/shared/nmsc/jsf-impl-2.1.4.jar
java    12285 tomcat  282r   REG                8,3  1470076    1040880 /usr/share/tomcat7/shared/nmsc/icefaces-ace-3.0.0.RC2.jar
java    12285 tomcat  283r   REG                8,3   271669    1040879 /usr/share/tomcat7/shared/nmsc/icefaces-3.0.0.RC2.jar
java    12285 tomcat  284r   REG                8,3  1470076    1040880 /usr/share/tomcat7/shared/nmsc/icefaces-ace-3.0.0.RC2.jar
java    12285 tomcat  285r   REG                8,3  1955103    1040820 /usr/share/tomcat7/shared/nmsc/jsf-impl-2.1.4.jar 
```

我增加了 tomcat 用户允许的文件句柄数量，以便让我度过早上，但是为什么 tomcat 会为每个 HTTP 请求（这似乎是正在发生的事情）打开一个新的 icefaces 和 jsf 副本而不是使用类加载器在启动时加载的文件副本？我什至不知道从哪里开始解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:23:07.510

就个人而言，我会从分析器开始（我使用 YourKit，因为它们为开源开发人员提供免费副本），拍摄内存快照，然后搜索这些文件名。这应该会导致文件、URL 或类似的对象，希望能提供一些关于问题所在的线索。如果没有，您将需要开始跟踪对象分配，这要昂贵得多但可行。其他分析器可用；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T16:43:52.347

我刚刚运行了我们的 ACE 展示示例，并没有看到随着每个请求增加文件句柄的行为。您是否可能在应用程序中使用复合组件？直到最近（Mojarra 2.1.7）才修复的 Mojarra 版本中有一个与核心复合组件类相关的错误：

[http://java.net/jira/browse/JAVASERVERFACES-2113](http://java.net/jira/browse/JAVASERVERFACES-2113)

它记录了打开但未关闭的 InputStream。在 Windows 上，这会锁定文件并防止它们被重新部署。在其他系统上，这可能会解释您所看到的行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:18:49.360

你在使用新的 G1 垃圾收集器吗？如果是这样，您可能已经在您的某个库或代码中发现了一个错误。与以前的实现相比，新的 G1 垃圾收集器似乎不太倾向于关闭文件。

这里有一个写得很好的例子：http: [//mark.koli.ch/2011/01/leaky-pipes-remember-to-close-your-streams-when-using-javas-runtimegetruntimeexec.html](http://mark.koli.ch/2011/01/leaky-pipes-remember-to-close-your-streams-when-using-javas-runtimegetruntimeexec.html)

# java - 如何替换 Android Activity 用于我的自动化测试的对象类的实现？

> ID：10519892
> 
> 赞同：2
> 
> 时间：2012-05-09T16:08:43.077
> 
> 标签：java, android, eclipse, unit-testing, android-activity

我在测试 Android Activity 时需要为接口使用不同的实现类，而不是在生产中运行时。我熟悉使用模拟对象，但问题是 Android 上的 Activity 是由操作系统而不是我实例化的，所以当我获得对 Activity 的引用时，它已经被实例化并且已经使用了实现类。就我而言，我正在谈论的类是 Login 类。对于我的自动化测试，我希望能够控制登录结果。这是我的例子：

```
class MainActivity extends Activity {

    public void onCreate(Bundle savedState) {
        super.onCreate(savedState);
        setContentView(R.layout.main);
        LoginMgr aLoginMgr = new LoginMgrImpl();
        if (aLoginMgr.authenticated()) {
            //do something
        } else {
            //do something else
        }
    }
}

public interface LoginMgr {
    public boolean authenticated();
} 
```

在图书馆的其他地方，我有一个实现类：

```
public class LoginMgrImpl implements LoginMgr {
    //authenticate
} 
```

在自动化测试期间，我希望能够`LoginMgrImpl`用一个测试版本替换生产，该版本将返回我测试所需的布尔值。这是我需要帮助的地方，因为我看不到如何`MainActivity`使用不同的`LoginMgrImpl`. 如果这很重要，我正在使用 Eclipse。当我调用 getActivity() 时，`ActivityInstrumentationTestCase2<MainActivity>`测试类会为我创建。`MainActivity`它调用无参数构造函数，所以我没有机会在`LoginMgrImpl`那里改变。Eclipse 控制构建，所以我看不到`MainActivity`用不同的实现库构建的方法。

你们中的任何一个更有经验的人可以为我指明一个成功自动化测试的方向吗？我不能是唯一一个试图模拟 Activity 对象使用的一些测试类的人，但我花了几个小时试图在论坛中找到解决方案，但没有成功。帮助！

* * *

根据大家的反馈，我尝试了各种解决方案，并找到了两个我可以接受的解决方案。

**解决方案 1**：一个在标记答案中进行了解释，涉及在 Eclipse 中设置一个单独的“项目”，该项目具有指向原始 src、res、assets 文件夹以及`AndroidManifest.xml`. 然后，我可以修改项目链接版本的项目属性，以引用支持我的测试的不同库实现。这有效，但感觉很笨拙。

* * *

**解决方案 2**：为我的项目定义一个 Application 子类，该子类保留`LoginMgr`. 然后将从 Application 实例中`MainActivity`检索。`LoginMgr`在测试期间，我可以`ActivityUnitTestCase<MainActivity>`用来注入一个引用模拟 LoginMgr 的模拟应用程序。以下是代码片段：

主要应用：（确保`AndroidManifest.xml`包括`<Application android:name="MainApplication" ...>`）

```
class MainApplication extends Application {

    private static LoginMgr sLoginMgr = new LoginMgrImpl();

    public LoginMgr getLoginMgr() {
        return sLoginMgr;
    }

} 
```

MainActivity 必须修改为：

```
class MainActivity extends Activity {

    public void onCreate(Bundle savedState) {
        super.onCreate(savedState);
        setContentView(R.layout.main);

        // 2 lines added
        MainApplication aApplication = (MainApplication)getApplication();
        LoginMgr aLoginMgr = aApplication.getLoginMgr();

        if (aLoginMgr.authenticated()) {
            //do something
        } else {
            //do something else
        }
    }
} 
```

单元测试必须是这样的：

```
public class MainActivityTest extends ActivityUnitTestCase<MainActivity> {

  public MainActivityTest() {
    super(MainActivity.class);
  }

  public void testUseAlternateLoginMgr() {
    MainApplication aMockApplication = new MainApplication()
    {
      @Override
      public LoginMgr getLoginMgr() {
        return new LoginMgr() {
          public boolean authenticated() {              {
            return true;
          }
        };
      }
    };

    setApplication(aMockApplication);

    Intent aDependencyIntent = new Intent("android.intent.action.MAIN");
    Activity aMainActivity = startActivity(aDependencyIntent, null, null);
    // verify results
  }
} 
```

我可能会使用模拟框架而不是手动编码的模拟，但这只是一个说明。

我认为解决方案2是更好的方法。谢谢@yorkw！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:57:09.963

当我需要在 Android 应用程序中模拟或存根某些对象时，我已将需要存根的对象的创建隔离到 Application 类中的一个简单的单一位置；然后只需手动评论或取消评论我想要的版本，具体取决于它是否是测试。这绝对不是自动化的，也不是很理想，但它确实有效。

例如，让您的 Application 类拥有 LoginMgr 的（静态）实例，并使其可以通过静态方法访问。您可以使用某种配置数据来告诉 Application 类使用哪个实现。将配置数据传递到应用程序的一种方法是通过清单中的节点，如此[处](http://blog.iangclifton.com/2010/10/08/using-meta-data-in-an-androidmanifest/)`<meta-data>`所述。您甚至可以通过声明一个特殊的“测试”活动来自动执行此操作，该活动包括该节点（而不是该节点是 的子节点），并用于从活动中获取它。然后，您的 Eclipse 启动配置将指定要启动此“测试”活动，而不是常规的“默认”活动。`<meta-data>``<application>``getPackageManager().getActivityInfo(getComponentName(), PackageManager.GET_META_DATA)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T14:53:31.237

测试我的应用程序的一种方法是使用 linux 中的符号链接来创建我的应用程序的“可测试”版本，该版本使用与生产中使用的库不同的库。为此，我在 Eclipse 中创建了两个项目，Application 和 ApplicationTestable。应用程序是真正的项目。ApplicationTestable 是一个虚拟项目，它具有指向与 Application 相同的 src、res 和 assets 目录的符号链接。我还添加了一个指向 AndroidManifest.xml 文件的符号链接。然后，我通过进入项目属性并选择库的测试版本而不是生产版本，将 ApplicationTestable 链接到库的测试版本。然后我进入 jUnit 测试所在的 ApplicationTest 项目的项目属性，并让它引用 ApplicationTestable 项目。在这种情况下，我的库的测试版本总是对登录进行身份验证，而库的生产版本需要有效的 ID 和密码，并会尝试针对真实服务器进行身份验证。我仍然对更优雅的解决方案持开放态度，但我会继续使用这个解决方案，直到有人提供更好的想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-24T06:56:04.797

我已经实现了您的第一个解决方案，但它迫使我使用 AndroidUnitTestCase 类并且存在未解决的问题：ActionBar 类[getActionBar() 中的 NPE 在设备/模拟器上工作正常，但在测试用例中返回 null](https://stackoverflow.com/questions/23189694/getactionbar-works-fine-on-devices-simulator-but-returns-null-in-testcases?noredirect=1#comment35596953_23189694)

我的解决方案是使用这样的东西：

```
public class LoginHelper {
    private static LoginMgr _loginMgr ;

    public static LoginMgr get_LoginMgrImpl(){
        if(_loginMgr == null) _loginMgr = new LoginMgrImpl();
        return _loginMgr ;
    }

    public static void set_LoginMgrImpl(LoginMgr loginMgr){
        _loginMgr = loginMgr ;
    }
} 
```

在单元测试构造函数中设置适当的接口模拟实现，仅此而已。

```
public class ApplicationTest extends ActivityInstrumentationTestCase2<TestActivity> {
    TestActivity _activity;

    public ApplicationTest() {
        super(TestActivity.class);
        LoginHelper.set_LoginMgrImpl(new MockLoginMgr());
    }

    public void test1(){
        assertTrue(getActivity() != null);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T21:23:39.210

您可能想研究使用依赖注入来解决此问题。我知道的两个用于 Android 的 DI 框架是[RoboGuice](http://code.google.com/p/roboguice/)和[Google Guice](http://code.google.com/p/google-guice/)。它们看起来非常相似，甚至可能以某种方式相关；但我没有进行足够的调查以了解差异或关系。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T17:28:30.720

也许我遗漏了一些基本的东西，但我会将子类`Activity`化为`MainActivity`，然后实现两个构造函数：

```
public MainActivity() {
  this(new LoginMgrImpl());
}

public MainActivity(LoginMgr loginMgr) {
  this.loginMgr = loginMgr;
} 
```

然后我会重命名`LoginMgr`为`AuthenticationService`. 然后我将重命名`LoginMgrImpl`为`BlahBlahBlahAuthenticationService`，其中“BlahBlahBlah”描述了我如何实现身份验证。（`InMemoryAuthenticationService`？？`LdapAuthenticationService`）

# ssrs-2008 - 需要 SQL Server 2012 报告服务身份验证

> ID：10519895
> 
> 赞同：1
> 
> 时间：2012-05-09T16:08:50.360
> 
> 标签：ssrs-2008, reporting-services

我们的团队创建了一个 ASP 网站，它使用 reportviewer 控件从报表服务器呈现报表。

在主报表上，我们使用 Go to URL 在新窗口（弹出）中显示子报表。我在 IIS 服务器上托管了这个网站。

当我们尝试访问主报告（即 Home.aspx）时，我们正在从报告服务器获取主报告的内容，并且它没有要求我提供凭据。

但是当我们点击子报告的链接时。它要求弹出窗口的凭据。我不明白为什么它只要求弹出窗口而不是主报告的凭据。如果我的 SSRS 配置不正确，那么它也应该询问主报告的凭据，但它只提示弹出窗口。

我们使用的是 SSRS 2008。SSRS 和 IIS 都在同一台机器上。我们使用了 javascript 函数来表达 Go to URL。

以下是这两种情况的屏幕截图。

主报告 - 在新弹出窗口中打开的子报告链接（此处不询问凭据）

![在此处输入图像描述](../Images/fedf1a10bf42f0d273a34e145577ef1b.png)

子报表弹出窗口（提示输入凭据）

![在此处输入图像描述](../Images/52dad9dd1ab8253a7f6bbbe59c975e68.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T15:48:08.573

现在我考虑了更长的时间，“转到 URL”是一个报告操作，所以你并没有完全使用“子报告”。子报表是在另一个报表中打开报表的组件。

更接近您需要的操作将是钻取报告，但这将在实际报告的相同上下文中打开新报告。

关于凭据，我认为这是在询问，因为您是新跃点。

按照我的思路（这只是一个猜测，如果我说一些荒谬的话，请原谅我），当您调用 report1 时，连接会转到 report1 -> 数据源（1hop，很好）。当您从report1 调用report2 时，report1 将凭据发送到report2（1 跳），report2 尝试连接到数据源（第二跳），而AD 仅支持一跳，这就是我认为它正在请求凭据的原因。

也许如果您配置[kerberos](http://blogs.technet.com/b/askds/archive/2008/06/13/understanding-kerberos-double-hop.aspx)身份验证，它可能会工作......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T12:38:46.923

我们最终无法使用 Kerberos，因为我们无法对我们的服务器进行此类更改。我毫不怀疑它会起作用，因为我们已经删除了身份验证，从而消除了登录问题，因此我们可以在我们的网络上试用报告。

# sql - 用于排除包含非数字字符的行的 Oracle SQL 查询

> ID：10519898
> 
> 赞同：0
> 
> 时间：2012-05-09T16:09:01.177
> 
> 标签：sql, regex, oracle

我有以下运行良好的 oracle 查询

```
SELECT c.customercode, s.sales_id 
FROM customers c 
LEFT JOIN sales s ON c.customercode = s.sales_id
WHERE c.address IS NOT NULL 
```

它返回的结果看起来像这样：

```
customercode        sales_id
12345678            456
34534534            678
23423423            X123 
```

我想做的是排除 sales_id 包含除数字字符以外的任何内容的行。所以上面的结果不包括第三行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:13:04.477

您可以使用正则表达式。在这种情况下，`regexp_like( sales_id, '^[[:digit:]]*$' )`

```
SQL> with x as (select 12345678 code, '456' sales_id from dual union all
  2             select 34534534, '678' from dual union all
  3             select 23423423, 'X123' from dual)
  4  select *
  5    from x
  6   where regexp_like( sales_id, '^[[:digit:]]*$' );

      CODE SALE
---------- ----
  12345678 456
  34534534 678 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:25:00.467

[TRANSLATE](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions196.htm)也可以：

```
WITH q AS (
SELECT '12345678' customercode,'456' sales_id FROM dual
UNION ALL
SELECT '34534534','678' FROM dual
UNION ALL
SELECT '23423423','X123' FROM dual
)
SELECT *
  FROM q
 WHERE TRANSLATE(sales_id,'A1234567890','A') IS NULL; 
```

# java - 有没有办法快速计算字符串的签名以帮助检测字符串的变化？

> ID：10519902
> 
> 赞同：1
> 
> 时间：2012-05-09T16:09:16.497
> 
> 标签：java, string, signature

我们有一个非关键标签，其值为字符串。我们要检查标签值的变化。但是我们不想进行字符串比较，因为这涉及客户端-服务器，而是我们想为字符串计算某种值并使用该值来帮助检测字符串的变化。由于字符串是非关键的，我们想知道是否有一个非常简单和快速的解决方案来计算这样的值，以帮助检测字符串的变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:12:02.833

**使用 .hashCode()**

`String.hashCode()`不完美，因为它是有损的。因此，字符串可能会更改并且具有相同的哈希码。（但这不会经常发生）几乎每次字符串发生变化时，它的哈希码也会发生变化。

所以你知道你在做什么，代码`String.hashCode()`是这样的：

```
public int hashCode() {
    int h = hash;  // the cached hash value
    int len = count;  // the number of characters in the string
    if (h == 0 && len > 0) {
        int off = offset;
        char val[] = value;

        for (int i = 0; i < len; i++) {
            h = 31*h + val[off++];
        }
        hash = h;
    }
    return h;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:15:25.540

是的。但如果您需要唯一性，请不要使用哈希码。使用 SHA256 摘要。

```
String tag = "...";
MessageDigest md = MessageDigest.getInstance("SHA-256");
md.update(text.getBytes("UTF-8"));
byte[] digest = md.digest(); 
```

# sql - 运行多个 SQL 语句的 ADO 命令：无法返回错误消息：使用 Connection.Errors 集合

> ID：10519912
> 
> 赞同：5
> 
> 时间：2012-05-09T16:09:57.527
> 
> 标签：sql, vba, ms-access, ado, adodb

我在各种表上有一些触发器，它们使用 raiserror 告诉用户他试图做坏事。我想以原子方式运行多个插入和更新，如果其中一个触发器这么说，则回滚。我在前世是邪恶的，所以我正在使用 Access VBA。

如果第一条语句有问题，我的 VBA 中会出现运行时错误。但是，如果第二个或后续语句调用 raiserror 那么我看不到任何错误消息。

解决方案：检查 connection.Errors 集合。

这是一个 Access 2007 ADP 前端和一个 SQL 2005 数据库。

下面的 VBA 是显示效果的最低限度。如果我将所有原子语句包装在存储过程中，我会得到相同的效果。

我认为我很聪明，将我的验证尽可能靠近数据库。明显不是！

如果您愿意尝试下面的代码，请在 CommandText 中交换 s1 和 s2 的顺序并欣赏不同的结果。

```
Public Sub TestSqlErrors2()
'CREATE TABLE [dbo].[tblStuff]([id] [int] IDENTITY primary key NOT NULL,[stuff] [varchar](255) NULL)
Dim cmd As ADODB.Command
Dim cnn As ADODB.Connection
Dim r As Long
Dim s1 As String
Dim s2 As String

s1 = " insert into tblStuff(stuff) values ('aaa')  "
s2 = " if 1=1 begin raiserror ('me, i''m just a lawnmower',16,1)  rollback transaction end "

Set cnn = Application.CurrentProject.Connection
Set cmd = New ADODB.Command
Set cmd.ActiveConnection = cnn
'cnn.BeginTrans 'makes no difference
cmd.CommandText = "begin transaction " & s2 & s1 & " commit transaction "
cmd.Execute r
'cnn.CommitTrans
'cnn.Errors.count is either 2 or 0
End Sub 
```

我尝试了各种组合。在下面的存储过程中，我明确（重新）提出了一个错误。但是，该错误不会传递回 VBA。

```
--CREATE TABLE [dbo].[tblStuff]([id] [int] IDENTITY primary key NOT NULL,[stuff] [varchar](255) NULL)
alter proc AddMoreStuff2
as
begin try
  begin transaction
  --swap the two statements below around to see the difference
  --if the first statement is raiserror then a run-time error appears in VBA
  --if not, no error appears in VBA, although no records are added
  insert into tblStuff(stuff) values ('aaa') 
  if 1=1 begin raiserror ('me, i''m just a lawnmower',16,1)  rollback transaction     end
  commit transaction
end try
begin catch
  declare @errormessage varchar(1024)
  set @errormessage = error_message()
  raiserror ( @errormessage, 16, 1 )
end catch 
```

调用这个新过程的 VBA 代码是......

```
Public Sub TestSqlErrors2()
Dim cmd As ADODB.Command
Dim cnn As ADODB.Connection
Dim r As Long

Set cnn = Application.CurrentProject.Connection
Set cmd = New ADODB.Command
Set cmd.ActiveConnection = cnn

cmd.CommandText = "exec AddMoreStuff2"
cmd.Execute r

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T18:12:29.930

请参阅[http://support.microsoft.com/kb/254304](http://support.microsoft.com/kb/254304)

> PRB：ADO 错误集合不包含用户定义的错误消息
> 
> 使用 ActiveX 数据对象 (ADO) 执行 SQL Server 存储过程 (SP) 不会使用 SP 中引发的用户定义错误填充 Connection 对象的 ADO 错误集合。仅当使用 SQL Server 的 OLE DB 提供程序 (SQLOLEDB) 建立与 SQL Server 数据库的 ADO 连接时，才会出现此行为。

您必须在 sql 脚本的开头显式设置 nocount 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T11:18:00.083

DAO 不会引发 VBA 错误，但会填充连接 .Errors 集合。所以我可以在每次 Execute 调用后检查它以获取错误描述。例如：

```
Dim errorMessage As String
Dim e As Object
For Each e In cnn.Errors
    errorMessage = errorMessage & e.Description
Next
If Len(errorMessage) > 0 Then
    Err.Raise 64000 - 1, Left(cmd.CommandText, 20), errorMessage
End If 
```

# python - 如何在 Python 中打印出字符串“\b”

> ID：10519914
> 
> 赞同：3
> 
> 时间：2012-05-09T16:10:03.620
> 
> 标签：python, string, compiler-construction

在我的编译器课程中，我决定用 Python 编写编译器，因为我喜欢用 Python 编程，尽管我遇到了一个关于如何打印字符的有趣问题。我正在编写的词法分析器要求以非常特殊的方式将包含换页符和退格字符的字符串打印到标准输出：用双引号括起来，并分别打印为 \f 和 \b。我得到的最接近的：

```
print("{0!r}".format("\b\f")) 
```

产生

```
'\x08\x0c' 
```

注意单引号和 utf8 编码。我关心的其他两个字符的相同命令几乎可以工作：

```
print("{0!r}".format("\n\t")) 
```

给出：

```
'\n\t' 
```

需要明确的是，我需要符合规范的结果（包括引号）是

```
"\b\f" 
```

简单的方法，如查找 \b 和 \f 并用“\b”和“\f”替换它们似乎不起作用......“\”只是 Python 打印反斜杠的方式，所以我似乎永远无法正如人们所期望的那样，只得到“\b\f”。

使用各种字符串编码似乎没有帮助。我已经得出结论，我需要编写一个自定义 string.Formatter，但我想知道是否还有另一种我错过的方法。

编辑：感谢所有的答案。不过，我认为我在提出这个问题方面做得并不好。根本问题是我将字符串格式化为原始格式，因为我希望文字换行符显示为“\n”，而文字制表符显示为“\t”。但是，当我开始使用原始格式打印字符串时，我失去了打印出“\b”和“\f”的能力，正如下面所有答案所暗示的那样。

我今晚会确认这一点，但基于这些答案，我认为我应该使用的方法是正常格式化输出，并捕获所有文字“\n”、“\t”、“\b”和“ \f" 带有转义序列的字符，将根据需要打印它们。我仍然希望避免使用 string.Formatter。

EDIT2：我要使用的最后一种方法是使用非原始字符串格式。非抽象版本看起来像：

```
print('"{0!s}"'.format(a.replace("\b", "\\b").replace("\t", "\\t").replace("\f", "\\f").replace("\n","\\n"))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T16:11:43.983

使用原始字符串：

```
>>> print(r'\b')
    \b 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T16:16:34.190

```
print("{0!r}".format("\b\f".replace("\b", "\\b").replace("\f", "\\f"))) 
```

或者，更干净：

```
def escape_bs_and_ff(s):
    return s.replace("\b", "\\b").replace("\f", "\\f")

print("{0!r}".format(escape_bs_and_ff("\b\f")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:18:18.927

```
>>> print(r'"\b\f"')
"\b\f" 
```

表示原始`r`或逐字字符串，这意味着它不会尝试将内容解析`\n`为换行符，而是从字面上生成字符串`\n`。

# java - 在这种情况下是否需要检查零（在模数和加法之后）？

> ID：10519916
> 
> 赞同：0
> 
> 时间：2012-05-09T16:10:06.040
> 
> 标签：java, collections, int, modulo

如果我有例如`int size`并且包含例如列表的大小，那么进行`int distance`操作`mod`ie`distance%size`是`(-size - 1) <= distance <= (size - 1)`

即距离永远在这个范围内`(-size - 1) <= distance <= (size - 1)`

如果我对此是正确的，那么[在 JDK 中的 CollectionsRotate 中](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Collections.java#Collections.rotate1%28java.util.List,int%29)进行以下条件检查的含义是什么？

```
 if (size == 0)
    return;  
 distance = distance % size;  
if (distance < 0)  
   distance += size;  
if (distance == 0)  //Why this check????
    return; 
```

我在这里可能是错误的或生疏的，但我认为`distance`此时不会因为添加而为空。如果列表是`0`我们一开始就不会达到那个条件。
那么需要这个条件检查吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T16:15:13.400

如果`distance == n * size`(n 一个 int) 那么`distance%size == 0`. 例如如果`distance == 0`或`distance == size`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T16:15:17.717

好吧，`if (distance < 0)`但是距离也可以`0`，因此跳过 `distance += size;`。因此检查`distance == 0`.

您还可以使用以下代码编写代码 `else if`：

```
//if distance is < 0, distance + size can't be 0 (due to the modulo before)
//however, distance could be 0 at this point if distance was 0 before or became 0 due to the modulo
if (distance < 0)  
   distance += size;  
else if (distance == 0)  //Why this check????
   return; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:15:06.313

如果 size 为 5 且 distance 为 0，则永远不会进行加法，并且在遇到检查时距离将为零。

# eclipse - 来自具有相对路径的文件的 JavaFX 2 媒体

> ID：10519919
> 
> 赞同：3
> 
> 时间：2012-05-09T16:10:14.307
> 
> 标签：eclipse, javafx-2

我正在尝试使用相对路径（在 Eclipse 中）创建一个 JavaFX 2 媒体实例。我已经通过写这个来尝试它：

```
Media media= new Media("file://test.flv"); 
```

这给了我一个 MEDIA_INACCESSIBLE 类型的 MediaException。我要加载的文件位于我的 Eclipse 项目根文件夹中。

我知道这个问题的答案[How to target a file (a path to it in Java/JavaFX)](https://stackoverflow.com/questions/10062270/how-to-target-a-file-a-path-to-it-in-java-javafx)但这仅涵盖使用绝对路径或作为资源加载文件。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T17:39:17.973

**1.**如果你想从相对于你的**`.java/.class`**文件的路径加载媒体，你必须使用资源加载。没有其他人可以确定他们的位置。

`.toExternalForm()`如果您出于某种原因不喜欢原始资源，只需添加：

```
Media media= new Media(getClass().getResource("test.flv").toExternalForm()); 
```

**2.**如果你想加载与你的应用程序的工作目录相关的媒体**，**你可以尝试下一个：

```
Media media = new Media(new File("test.flv").toURI().toString()); 
```

# postgresql - 尝试为当天的 3CX 拨出通话时长统计信息编写查询

> ID：10519921
> 
> 赞同：0
> 
> 时间：2012-05-09T16:10:14.547
> 
> 标签：postgresql, pbx, 3cx, pabx

到目前为止，我已经设法编写了一个查询来列出用户拨打的所有拨出电话及其持续时间，但我正在寻找的是，而不是所有单个呼叫的列表，而是持续时间的总和。

```
SELECT starttime, duration, is_answ, is_fromoutside, from_no
  FROM callhistory3
 WHERE is_answ = 't'
   AND is_fromoutside = 'f'
   AND starttime >= CURRENT_DATE
   AND from_no = '101'; 
```

持续时间的格式为 00:00:00:00.000 (Days:Hours:Minutes:Seconds.Hundredths)，所以我的问题实际上是如何将其加起来并将其显示为持续时间的单个数字，而不是列表每个通话都有自己单独的持续时间？

我的最终查询如下给任何有兴趣的人：

```
SELECT from_no, SUM(duration), COUNT (*)
  FROM callhistory3
 WHERE is_answ = 't'
   AND is_fromoutside = 'f'
   AND starttime >= CURRENT_DATE
 GROUP BY from_no
 ORDER BY from_no; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T17:13:04.330

如果持续时间确实总是具有这种格式：

```
SELECT from_no, sum(duration)
  FROM callhistory3
  WHERE is_answ = 't'
    AND is_fromoutside = 'f'
    AND starttime >= CURRENT_DATE
    AND from_no = '101'
  GROUP BY from_no
  ORDER BY from_no; 
```

好吧，如果您真的只是为了一个人而这样做，`from_no`您可以通过选择 the`sum()`并省略`GROUP BY`and`ORDER BY`子句来简化它，但您似乎可能想要一个列表；为此，您只需更改上面的 WHERE 子句。

# c# - 自定义 DataContext 和远程数据库

> ID：10519923
> 
> 赞同：1
> 
> 时间：2012-05-09T16:10:22.900
> 
> 标签：c#, asp.net, asp.net-mvc-4

我检查了这个网站，但没有找到任何解决方案。我用mvc4做了一个网站。我写了自定义数据实体。但是，该应用程序在 localhost 上运行良好，但我无法在远程服务器上使用它。

这是我的配置 web.config 连接字符串

```
<add name="DefaultConnection" connectionString="Data Source=ipaddress;Initial Catalog=DataContext;User ID=user;Password=pass" providerName="System.Data.SqlClient" /> 
```

这是我的数据上下文。这会在本地 sql server 中创建新的数据库。如何使用此设置使用远程服务器？

```
public class DataContext : DbContext
{
    public DbSet<Sayfalar> sayfa { get; set; }
    public DbSet<Uyeler> uye { get; set; }
    public DbSet<Roller> rol { get; set; }
    public DbSet<Loglar> log { get; set; }
    public DbSet<Resimler> resim { get; set; }
}

class dbYenile : DropCreateDatabaseIfModelChanges<DataContext>
{
    protected override void Seed(DataContext context)
    {
        MembershipCreateStatus Durum = new MembershipCreateStatus();
        Membership.CreateUser("demo", "123456", "demo@demo.com", "soru", "cevap", true, out Durum);
        Durum = new MembershipCreateStatus();
        Membership.CreateUser("demo1", "123456", "demo1@demo.com", "soru", "cevap", true, out Durum);
        Roles.CreateRole("Yonetici");
        Roles.AddUsersToRoles(new string[] { "demo" }, new string[] { "Yonetici" });
        //Console.WriteLine(Hatalar.uyelikHatalari(Durum));
    }
} 
```

这里 Global.asax.cs 的 application_start 无效。

```
Database.SetInitializer<DataContext>(new dbYenile());
        AreaRegistration.RegisterAllAreas();

        RegisterGlobalFilters(GlobalFilters.Filters);
        RegisterRoutes(RouteTable.Routes);

        BundleTable.Bundles.RegisterTemplateBundles(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T03:59:02.957

EF 默认使用与从 DbContext 派生的类命名相同的数据库连接，这意味着您上面的连接应命名为“DataContext”，而不是“DefaultConnection”。如果要保留连接名称，可以将其添加到 DataContext 类中：

```
 public DataContext: base("DefaultConnection") {} 
```

否则将 web.config 中的连接字符串重命名为“DataContext”

# iphone - hidesBottomBarWhenPushed 用于自定义视图

> ID：10519927
> 
> 赞同：2
> 
> 时间：2012-05-09T16:10:38.837
> 
> 标签：iphone, uinavigationcontroller

我想为 mya 应用程序构建一个自定义标签栏，但我有一个小问题：内置的 tabBar 支持`hidesBottomBarWhenPushed`. 有没有办法告诉我的应用我`CustomTabBar`是底栏？**这就是我想要做的*（相同的 UINavController）*：**

```
 +---------+        +---------+
                              |---------|        |---------| 
                              |         |        |         |
                              |  [btn]  |  --->  |   2nd   |
                              |         |   |    |  view   |
                              |---------|   |    |         |
          there's tabbar -->  | 1  |  2 |   |    |         |  <- no tabbar
                              +---------+   |    +---------+
                                            |
                              pushViewController:animated: 
```

我`CustomTabBarController`的层次结构很像原来`UITabBarController`的：

```
CustomTabBarController
  |- UINavigationController (root: FirstViewController) <- there's a button
  |- UINavigationController (root: SecondViewController) 
```

有没有办法做到这一点？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T10:27:31.600

基于这个答案[https://stackoverflow.com/a/4987542/263503](https://stackoverflow.com/a/4987542/263503)，我在我的自定义标签栏控制器类中实现了以下内容：

**CustomTabBarController.h**

```
@interface CustomTabBarController : UITabBarController <UINavigationControllerDelegate> 
```

**CustomTabBarController.m**

```
- (void)navigationController:(UINavigationController *)navigationController
  willShowViewController:(UIViewController *)viewController
                animated:(BOOL)animated
{
    if (viewController.hidesBottomBarWhenPushed) {
        self.tabBarImage.hidden = YES;
    } else if ([viewController isKindOfClass:[CustomViewController class]]) {
        self.tabBarImage.hidden = NO;
    }
} 
```

此外，我需要知道何时再次显示标签栏的自定义图像。所以我检查添加到 tabBar.viewcontrollers 的视图控制器的类

希望这可以帮助。

# jquery - 在所有下拉列表中选择禁用类似信息的框

> ID：10519928
> 
> 赞同：0
> 
> 时间：2012-05-09T16:10:39.960
> 
> 标签：jquery, drop-down-menu

我有 3 个选择框，都填充了相同的数据。使用 jquery 我想要么 a) 禁用相同的选项，要么 b) 从其他两个选择框中删除相同的选项。我已经发布了下面的html。你会注意到我已经在 select disabled 中有一些标题，这些标题需要保持这种状态。无论用户从哪个选择框开始，这都需要工作。因此，如果选择三个选项 2，则选择 1 和 2 被禁用。

jquery 一直在逃避我几个小时。

编辑：我忘了添加一些东西。如果您更改您的选择，我需要它来启用先前选择的选项。另外，我希望每个列表中的第一个选项 (--) 始终可用。

```
<fieldset class="fields1">
        <dl>
            <dt><label for="char_cs">test:</label></dt>
            <dd>
                <select id="char_cs1" name="char_cs1" class="char_cs">
                    <option value="">--</option>
                    <option disabled="disabled">header 1</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                    <option disabled="disabled">header 2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    <option disabled="disabled">header 3</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                </select>
            </dd>
        </dl>
        <dl>
            <dd>
                <select id="char_cs2" name="char_cs2" class="char_cs">
                    <option value="">--</option>
                    <option disabled="disabled">header 1</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                    <option disabled="disabled">header 2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                    <option disabled="disabled">header 3</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                </select>
            </dd>
        </dl>
        <dl>
            <dd>
                <select id="char_cs3" name="char_cs3" class="char_cs">
                    <option value="">--</option>
                    <option disabled="disabled">header 1</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                    <option disabled="disabled">header 2</option>
                        <option value="3">3</option>
                            <option value="4">4</option>
                    <option disabled="disabled">header 3</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                </select>
            </dd>
        </dl>
        </fieldset> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:52:14.257

尝试这个：

```
$('.char_cs').change(function() {
    var ary = new Array();
    $('.char_cs option:selected').each(function() {
        if ($(this).val().length > 0) {
            ary.push($(this).val());
        }
    });
    $('.char_cs option').each(function() {
        if ($(this).val().indexOf('header')!=0) {
            if ($.inArray($(this).val(), ary) > -1) {
                $(this).attr('disabled', 'disabled');
            } else {
                $(this).removeAttr('disabled');
            }
        }
    });
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/53DDt/2/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T17:32:29.713

看看[这里](http://jsfiddle.net/sDeCW/2/)。我已经做到了，它不会禁用活动选择中的条目。同样，一旦您更改了所选选项，它就会在其他选择中可用。

```
$(".char_cs").change(function(){
    $("select>option:not([value^=header])").removeAttr("disabled");
    $(".char_cs").each(function()
    {
        var id = $(this).attr("id").substring(7);
        var val = $(this).val();
        $(".char_cs:not([id=char_cs"+id+"])>option(:not[value=--],[value="+val+"])").attr("disabled","disabled");
    });
});​ 
```

# jquery - 跨越多个固定高度列的正文文本

> ID：10519939
> 
> 赞同：1
> 
> 时间：2012-05-09T16:11:16.933
> 
> 标签：jquery, css, multiple-columns

我的网站上有某些帖子的格式类似于使用 CSS3 多列的杂志，例如[这篇文章](http://riggl.es/post/16847560083/the-real-cost-of-digital)。我想将 IE 用户包含在 jQuery Columnizer 插件中，但这仍然不能解决我最大的问题。正如您在我的帖子链接中看到的那样，文章文本很长，需要向上滚动到下一列的顶部才能继续阅读。我想创建一系列 3 列 div，比如 600px 高（也可以通过字数而不是高度来设置），正文跨越它们。有些帖子需要一个这样的 div，有些则需要几个，因此解决方案需要适应不同的帖子长度。我已经搜索过，但没有找到任何涵盖我的特殊情况的东西。关于如何做到这一点的任何想法？

# javascript - 使用 jQuery 更改单击元素的样式并从具有相同类的其他元素中删除该样式

> ID：10519944
> 
> 赞同：0
> 
> 时间：2012-05-09T16:11:41.730
> 
> 标签：javascript, jquery

**编辑：修复它！感谢那些说要发布我的 HTML 的人——我看了看它，并没有意识到我有两次“appname”类。**

```
<li class="<?php echo $apid; ?> appname appname_getinfo appname_<?php echo $apid; ?>">
       <span class="appname"><?php echo $apname; ?></span>
</li> 
```

**所以，我删除了“”，它的工作原理！**

假设我有一个类的三个元素：

埃尔一

埃尔二

埃尔三

当我点击 EL ONE 时，我想让它加粗。当我点击 EL 2 时，它应该变成粗体并且 EL ONE 应该变成正常重量。当我接下来单击 EL THREE 时，它应该变为粗体，EL TWO 变为正常重量。

我的脚本：

```
//// app info ////
$("li.appname_getinfo").click(function(){

    var appID = this.className.split(' ')[0];
    $.get("wishlist/appinfo.php?pw=R32kd63DL&apid=" + appID, function(data){                                
        $("div#appinfo").html(data);                            
    });

    $("div#appinfo").show();

    $(".appname").css("font-weight", "normal");
    $(this).css("font-weight", "bold");

}); 
```

我以为我可以将“appname”类的所有设置设置为正常，然后将 $(this) 更改为粗体，但它不起作用。（它不允许任何粗体）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:28:55.517

虽然我怀疑问题是，如上所述，类名不匹配，但另一个原因可能是因为您在“li”元素中有一个容器，并且该容器设置为 font-weight normal。您在 LI 元素上设置粗体，但如果其中的元素是普通字体，那么在 LI 上设置它不会做任何事情......例如

```
...
<style>
span { font-weight:normal; }
</style>
...
<ul>
   <li class="appName"><span>this text will not bold when you bold the LI because it's in a span, and spans are styled with normal font-weight</span>
   </li>
<ul> 
```

Chrome 的开发工具将帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:15:12.453

首先，根据经验，直接从 js 添加类而不是 css。其次，您将粗体规则应用于`".appname"`而不是`"li.appname_getinfo"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:24:24.150

需要使用一个`$().each`来为每个项目添加处理程序。我的代码是：

```
$('.appName').each(
  function(index, item){
    $(item).click(
      function(e) {
        $('.appName').css('fontWeight', 'normal');
        $(this).css('fontWeight', 'bold');
    });
}); 
```

在 Chrome 中测试，它似乎像你描述的那样工作

# jquery - 现有 javascriptMVC 网站的移动 Web 框架

> ID：10519945
> 
> 赞同：0
> 
> 时间：2012-05-09T16:11:42.490
> 
> 标签：jquery, jquery-mobile, backbone.js, ember.js, javascriptmvc

我有一个非常复杂的网站，使用 javascriptMVC 和 jQuery 作为主要库开发，并使用 JSON API。现在我正在面对移动网络开发，并且必须对要使用的框架做出决定。我能覆盖的手机越多越好。

由于该网站是使用 javascriptMVC 开发的，我想继续使用相同的框架更有意义。我查看了其他选项，例如骨干.js 或 ember.js，它们真的很想玩，但找不到比使用开发人员已经知道的框架有很大的好处。

也就是说，我正在考虑使用 javascriptMVC + jQuery Mobile。不要假装就此展开长时间的讨论。根据您的经验，这是一种正确的方法吗？或者您认为最好的解决方案是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T14:43:17.723

当您在客户端 MVC 中时，请查看此处[http://www.html5rocks.com/en/mobile/cross-device/#toc-mvc](http://www.html5rocks.com/en/mobile/cross-device/#toc-mvc)，您会有所了解。

# c# - IIS 和 RestSharp -> 响应正文因 40 倍错误而被截断？

> ID：10519948
> 
> 赞同：3
> 
> 时间：2012-05-09T16:11:47.477
> 
> 标签：c#, asp.net-mvc-3, iis, iis-7, restsharp

**情况**

看起来很简单：我有一个在 IIS 7 上运行的服务。一个客户端发布数据（应用程序/json），我在接受数据之前验证数据。

如果我不接受它，我真的很想返回一个 406 和 ~same~ 数据作为正文（可能更改/更正）[1]。不幸的是，这会导致响应体被截断，也就是无效的 json。

首先，让我们为我的错误启用直通，否则 IIS 会尝试变得聪明：

`<httpErrors errorMode="Detailed" existingResponse="PassThrough">
</httpErrors>`

我的代码的相关部分在道德上与此等效：

```
HttpResponseBase response = context.HttpContext.Response;

response.StatusCode = StatusCode;
response.StatusDescription = StatusDescription;

if (!string.IsNullOrEmpty(ContentType))
    response.ContentType = ContentType;
else
    response.ContentType = "application/json";

if (ContentEncoding != null)
    response.ContentEncoding = ContentEncoding;

using (var sw = new StreamWriter(response.OutputStream))
{
    sw.Write(JsonConvert.SerializeObject(Data));
} 
```

在客户端，我目前正在做一个幼稚的事情（找到 json 截断的问题）

```
var response = myRestClient.Execute(myRestRequest); 
```

**问题**

如果响应返回状态码 200，我得到这个

```
response.ContentLength == 69345
response.RawBytes.Length == 69345 
```

如果我只更改*返回*的状态码（在我的情况下为 406），返回*完全相同的数据*，我会看到：

```
response.ContentLength == 69345
response.RawBytes.Length == 65536 // <--- Not! Good! 
```

现在，65536 这个数字太神奇了，不可能是宇宙射线的巧合或非常可重现的结果。如果我的数据长度超过无符号短，谁*现在*想变得聪明并丢弃我的数据？我现在将尝试深入研究 RestSharp 代码库，但我真的很怀疑 IIS 再次欺骗了我。

1：如果这是一个坏主意，请详细说明为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-21T19:33:27.910

看看这篇文章：[RestSharp RestResponse is truncating content to 64 kb](https://stackoverflow.com/questions/25570525/restsharp-restresponse-is-truncating-content-to-64-kb/37951481#37951481)

这是因为 RestSharp 使用 .NET Framework 中的 HttpWebRequest 类。此类具有称为 DefaultMaximumErrorResponseLength 的静态属性。该属性决定了错误响应的最大长度，该属性的默认值为 64Kb。

# android - 首选项更改仅在重新启动应用程序时发生

> ID：10519950
> 
> 赞同：0
> 
> 时间：2012-05-09T16:11:54.593
> 
> 标签：android, checkbox, listener, sharedpreferences, changelistener

我正在编写一个应用程序，我添加了一个首选项菜单，它可以工作，但是只有在我重新启动应用程序时才会发生更改，任何人都知道如何在不退出应用程序的情况下进行更改？？？提前致谢 ;）

我的代码（来自主要活动）：

```
preferencias = preferenceManager.getDefaultSharedPreferences(TimeToSpeechActivity.this);

OnSharedPreferenceChangeListener listener = new SharedPreferences.OnSharedPreferenceChangeListener() {
      public void onSharedPreferenceChanged(SharedPreferences prefs, String key) {
       //nothing here, do I have to put anything?
      }
    };
preferencias.registerOnSharedPreferenceChangeListener(listener);

getPrefs();
changefont(fuente, letra);
if (boole == true) {fontcolors();}

private void getPrefs(){
      fuente = Typeface.createFromAsset(getAssets() , preferencias.getString("elegirfuente", "fonts/Default.ttf"));
     letra = Integer.parseInt(preferencias.getString("fontstyle", "0"));
     bol = preferencias.getBoolean("randomcolors", true);
 } 
```

我什么都没有放在偏好活动中，我必须放什么吗？

另外，我必须编辑这个吗？：`(SharedPreferences prefs, String key)`我问这个是因为我还没有创建`prefs`和`key`变量

提前致谢！！！;)

EDIT1：添加了偏好活动

```
 public class PantallaOpciones extends PreferenceActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);

       addPreferencesFromResource(R.xml.opciones);
          }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:19:43.080

也许你想使用 SharedPreferences 如下：

```
String PREFS_NAME = "com.example.sp", PREFS_TEST = "com.examples.sp.test";
SharedPreferences preferences;

preferences = getSharedPreferences(PREFS_NAME,MODE_PRIVATE);
// This is how you instantiate a SharedPreference object.

preferences.edit().putString(PREFS_TEST,"TEST").commit();
// This way the preference is actually modified and saved. 
```

# svn - SVN 存储库的临时分支

> ID：10519957
> 
> 赞同：2
> 
> 时间：2012-05-09T16:12:20.873
> 
> 标签：svn

在一次办公室搬迁过程中，我们的 SVN 服务器损坏了，我们的管理员不认为无论搬家如何都要备份存储库。事实证明，我们的SVN服务器可能需要长达两周的时间才能修复（一些具有专有RAID的专用存储设备需要寄回给供应商），但同时我们需要进行一些协作开发和我们组合的 SVN 知识有些有限。

对我们来说，最好的情况显然是我们从我们的一个沙箱创建一个新的存储库，当我们的服务器再次运行时，以这样一种方式合并两者，就像服务器永远不会关闭一样。这可能吗？如果可以，我们如何做到这一点？如果这不可行，我们有哪些选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T18:58:33.630

我会使用 git 作为临时源代码控制系统。

以下步骤可能有效：

*   当您的 svn 服务器离线时，以正常方式使用 git（[指南](https://stackoverflow.com/questions/315911/git-for-beginners-the-definitive-practical-guide)）
*   当您的服务器返回时，请使用`git svn fetch`拉入您的 svn 存储库。[更多信息](http://blog.tfd.co.uk/2008/11/21/adding-a-branch-to-git/)
*   然后`git rebase`在 git 存储库中的 svn 分支上执行 git 提交。
*   然后推回svn服务器`git svn dcommit`

注意`git svn`不支持`svn:externals`

# php - 将颜色数组插入 foreach 循环

> ID：10519959
> 
> 赞同：1
> 
> 时间：2012-05-09T16:12:24.227
> 
> 标签：php, arrays, loops, foreach, array-push

```
$legend = array();
$color[] = ('000000', 'ff0000', 'fasd3f');
    foreach ($stats as $row) {

        if ($row->countofmsg > 0) {

            array_push($legend, "<div class='legend_label'><div class='color-block' style='background:#".$color.";'></div>".ucwords($row->msg)."<div class='legend_count'>$row->count</div></div><div class='clear'></div>");

        }

    } 
```

这是我的代码，我想做的是设置一个颜色数组$color []，然后在foreach循环数组中，调用数组中的第一个颜色，然后调用第二个和第三个，依此类推foreach 吐了出来。然后当它到达数组中的最后一个颜色时，在颜色数组的开头重复。

会踢出类似的东西：

```
(color1) msg - count
(color2) msg - count
(color3) msg - count
etc.. 
```

如果有重复的问题，请告诉我，我尝试研究它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:15:06.893

```
$legend = array();
$color[] = ('000000', 'ff0000', 'fasd3f');
$colorSize = count($color);

foreach ($stats as $row) {
    if ($row->countofmsg > 0) {
        array_push($legend, "<div class='legend_label'><div class='color-block' style='background:#".$color[(3 % $colorSize)].";'></div>".ucwords($row->msg)."<div class='legend_count'>$row->count</div></div><div class='clear'></div>");
    }
} 
```

**由@watcher 建议编辑**，但我知道之前已经发布了正确的答案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T16:19:53.533

这假设您的`$stats`数组是整数索引的

```
$legend = array();
$color[] = ('000000', 'ff0000', 'fasd3f');
$colorCount = count($color);
foreach ($stats as $k => $row) {
    if ($row->countofmsg > 0) {
            $legend[] = "<div class='legend_label'><div class='color-block' style='background:#".$color[ ($k % $colorCount) ].";'></div>".ucwords($row->msg)."<div class='legend_count'>$row->count</div></div><div class='clear'></div>";
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T16:16:08.140

按照此处的说明使用模数： [https ://stackoverflow.com/a/7237074/496735](https://stackoverflow.com/a/7237074/496735)

除了在你的情况下做 %3 而不是 %2

`$color = $colors[$i % 3]; // where $i is the current row`

# css - 尝试使用内联语句“撤消”几个 CSS 选项

> ID：10519969
> 
> 赞同：0
> 
> 时间：2012-05-09T16:13:07.033
> 
> 标签：css, html-lists, inline-styles

我试图通过在“li”标签中放置内联样式语句来“撤消”未编号列表中的样式。我的一切看起来都是我想要的，除了我错过了子弹。

下面是原始 CSS 和我的内联样式选项来覆盖它们：

```
#account_header li {
    border-bottom: 1px solid #888888;
    border-top: 1px solid #888888;
    display: inline;
    list-style-type: none;
    margin: 0;
    overflow: hidden;
    padding: 0 10px 0 0;
    color: #AA2222;
    font-family: "arial","helvetica";
    font-size: 16px;
    font-weight: bolder;
} 
```

这是我的“li”标签内的内容：

```
<li style="border: none;display: block;margin: 0;overflow: hidden;padding: 0;list-style:disc outside none;"> 
```

在此先感谢...我已经在这上面浪费了很多时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:40:39.970

从您的内联 CSS 中删除`display: block;`和删除`overflow: hidden;`，它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T14:17:04.233

我认为没有人会相信这个，但结果证明是overflow-x 和overflow-y 选项。它们被设置为“隐藏”，我必须查看 Firebug 中的“计算”选项卡才能看到它（我是一个 CSS 新手，所以我以前从未听说过这些）。基本上，我按照李斯特先生的建议做了一个非常简单的列表，将计算出来的样式复制到文本文件中，并使用 UltraStudio 的比较功能来查看差异。

我希望有一种更简单的方法可以将设置恢复为默认值！

这是我目前所拥有的：

```
<li style="border: none;display: list-item;margin: 0;padding: 0;visibility: visible;overflow-y: visible;overflow-x: visible;list-style:disc outside none;" > 
```

谢谢大家的帮助！

# mysql - 非常复杂的 SQL 查询

> ID：10519972
> 
> 赞同：-2
> 
> 时间：2012-05-09T16:13:09.110
> 
> 标签：mysql, sql, complexity-theory

我有一个复杂的查询，我无法得到正确的答案。
有3张表：

*联系人*（**pk**为 INT，**名称**为 VARCHAR，...）
*会话*（**pk**为 INT，**联系人**为 INT，...）
*消息*（**pk**为 INT，**会话**为 INT，...）

`session.contact`指向`contact.pk`。_ 并且`message.session`到`session.pk`.
当`session.contact`为零时，则此行没有联系。`contact.pk`永远不会为零。

现在我想获取特定消息的所有名称。我的尝试是这样的：

> SELECT message.pk, contact.name FROM message, session, contact WHERE message.session = session.pk AND session.contact = contact.pk

但是我没有得到正确的返回行数。应该是2459，有2075。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:16:25.847

首先，你怎么知道那是正确的行数？

其次，您应该使用`JOIN`类似于以下的正确语法：

```
SELECT message.pk, contact.name
FROM message m
LEFT JOIN session s
    on m.session = s.pk
LEFT JOIN contact c
    on s.contact = c.pk 
```

# php - 给定一个 url 创建一个网站的图像

> ID：10519975
> 
> 赞同：-2
> 
> 时间：2012-05-09T16:13:11.643
> 
> 标签：php, jquery, html

如果使用 php 给定一个 url，是否可以创建网站的图像？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:16:32.507

如果您可以更改您的网络服务器，您可以使用 wkhtmltopdf： [http ://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:16:50.970

在 PHP 中没有标准的方法来做到这一点。任何解决方案都需要额外的库/文件。

话虽如此，您可以使用许多生成器来使用几乎任何后端语言来完成此任务 - 生成图像的负载将被远程处理，而不会让您的服务器陷入困境。

*   [http://www.thumboo.com/](http://www.thumboo.com/)
*   [http://www.shrinktheweb.com/](http://www.shrinktheweb.com/)
*   [http://www.websnapr.com/](http://www.websnapr.com/)
*   [http://www.thumbalizr.com/](http://www.thumbalizr.com/)
*   [http://snapcasa.com/](http://snapcasa.com/)
*   [更多关于谷歌](https://www.google.com/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1#hl=en&sclient=psy-ab&q=website%20thumbnail%20generator&oq=website%20thumbnail&aq=1c&aqi=g1g-c3&aql=&gs_l=serp.11.1.0j0i7l3.3272.3746.0.5057.2.2.0.0.0.0.74.131.2.2.0...0.0.opnry4C8x3c&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&fp=ecb6a798695883bc&ion=1&biw=1680&bih=922&pf=p&pdl=300)

这种方法的缺点是您的站点需要依赖外部服务才能正常运行。这可能会也可能不会太糟糕，因为您可以迁移到许多此类服务。

# arrays - 如何将 Perl 数组作为标量传递给子例程？

> ID：10519981
> 
> 赞同：2
> 
> 时间：2012-05-09T16:13:25.537
> 
> 标签：arrays, perl, scalar

这里是一位新生的 Perl 开发人员。我一直在绞尽脑汁，在网上到处搜索，试图弄清楚这一点……很生气，我来找你寻求澄清。

我有以下代码（只剩下相关部分），其余部分正在工作）：

```
my @arrMissingTids;
@arrMissingTids = %hshTids;

my $missingtid;
foreach $missingtid (@arrMissingTids) {
    print "$missingtid\n";
} 
```

这很好用，返回我想要在数组中的值：

```
500000246,500000235,500000185,500000237,500000227,500000252 
```

但是，当我将它传递给子例程并将其包含在变量名中时，它不会提供上面写的列表，而只是提供数字 1。代码如下：

```
myqry(@arrMissingTids);

sub myqry($) {

    my $missingtids = @_;

    $sql = "select 
        i.tid i_tid, i.name i_name
        from 
        instrument i
        where i.tid in ($missingtids)";

    print "$sql/n";
} 
```

打印 $sql 返回以下内容：

```
Select i.tid i_tid, i.name i_name from instrument i where i.tid in (1) 
```

当我希望它返回以下内容时：

```
Select i.tid i_tid, i.name i_name from instrument i where i.tid in (500000246,500000235,500000185,500000237,500000227,500000252) 
```

在此先感谢您提供正确方向的任何指示！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T16:22:20.173

这里存在三个问题。第一个是使用函数原型，别管它，看看[为什么 Perl 5 的函数原型不好？](https://stackoverflow.com/questions/297034/why-are-perl-5s-function-prototypes-bad).

第二个是函数调用和函数本身接收方的类型不匹配。要么两次都使用数组，要么两次都使用数组引用。

第三个是将数据作为 SQL 查询的一部分，可能为[SQL 注入攻击](http://bobby-tables.com)打开了大门。这可以通过将查询字符串与占位符组合起来与[DBI](http://p3rl.org/DBI)一起使用来安全地缓解。

```
myqry(@arrMissingTids);
sub myqry {
    my @missingtids = @_;
    $sql = "select
        i.tid i_tid, i.name i_name
        from
        instrument i
        where i.tid in (" . join(',', ('?') x @missingtids) . ")";
    print "$sql\n";
    # $dbh->selectall_arrayref($sql, {}, @missingtids)
} 
```

* * *

```
myqry(\@arrMissingTids);
sub myqry {
    my @missingtids = @{ shift() };
    $sql = "select
        i.tid i_tid, i.name i_name
        from
        instrument i
        where i.tid in (" . join(',', ('?') x @missingtids) . ")";
    print "$sql\n";
    # $dbh->selectall_arrayref($sql, {}, @missingtids)
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T16:30:59.820

如果有人还没有提到它，这里的原型是一个问题：

```
sub myqry($) { 
```

考虑一下：

```
sub test1($) {
    print "$_\n" foreach @_;
}

sub test2 {
    print "$_\n" foreach @_;
}

my @args = ('a', 'b', 'c');

test1(@args);
test2(@args); 
```

和输出：

```
3
a
b
c 
```

到目前为止，您已经意识到标量上下文中的数组只是元素的数量，例如：

```
my $n = @args; 
```

`$n`是 3。通过将数组传递给子例程，将其简化为标量，最终得到一个 arg，即数组中元素的数量。然后你这样做：

```
my $missingtids = @_; 
```

由于子定义中的 ，它总是只有一个`($)`（数组已经减少到一个元素）。因此，您得到**1**。

0.02 美元：perl 中的 IMO 原型是个坏主意；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T16:23:11.863

问题就在这里：

```
my $missingtids = @_; 
```

您`@_`在**标量上下文**中调用数组。这意味着您正在`$missingtids`分配`@_`. 解决此问题的一种方法是传递数组引用：

```
sub myqry {

    my $missingtids_ref = shift;
    my @missingtids=@$missingtids_ref;

    $sql = "select 
        i.tid i_tid, i.name i_name
        from 
        instrument i
        where i.tid in (" . join(",",@missingtids) . ")";

    print "$sql/n";
} 
```

有关更多信息，请查看[`perldoc perlref`](http://perldoc.perl.org/perlref.html)和[`perldoc perldata`](http://perldoc.perl.org/perldata.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T16:19:45.843

所以你想创建字符串

```
... in (1,2,3,4) 
```

采用[`join`](http://perldoc.perl.org/functions/join.html)

```
myqry(join(',', @arrMissingTids)) 
```

但那是由内而外的。这会更好：

```
sub myqry {
    my $missingtids = join(',', @_);

    return "select 
        i.tid i_tid, i.name i_name
        from 
        instrument i
        where i.tid in ($missingtids)
    ";
}

myqry(@arrMissingTids); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-11T16:00:05.527

感谢所有的帮助。毕竟，我最终摆脱了原型并使用了这段代码，它运行良好，并且是从上面的所有帮助中拼凑而成的：

```
myqry(@arrTids);

sub myqry {
   $missingtids = join(",",@_);

   .rest of code...
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-09T16:18:41.757

未经测试，但可能是正确的：

```
myqry(\@arrMissingTids);

sub myqry($) {

    my $missingtids = shift; # or $_[0]

    $sql = "select 
        i.tid i_tid, i.name i_name
        from 
        instrument i
        where i.tid in (" . join(',', @{$missingtids}) . ")";

    print "$sql/n";
} 
```

当然，您可以传递数组本身而不是引用，但是您需要更改原型并重写数组引用。但上面的东西应该让你继续前进。

# java - 重新加载 Spinner 时显示先前选择的答案

> ID：10519984
> 
> 赞同：0
> 
> 时间：2012-05-09T16:13:38.820
> 
> 标签：java, android, android-spinner

我正在寻找一种在重新加载微调器时显示先前选择的答案的方法。

目前，用户可以从微调控件上的选择中进行选择，这是通过 XML 文件设置的。然后将该选择写入 SQLite 数据库 - 这与特定作业有关。

当我将所需作业的数据重新加载回我的应用程序时，问题就出现了——我希望微调器立即显示从数据库加载回的先前选择的响应。

谁能指出我在正确的位置以了解如何更改微调器中第一个显示的项目？

编辑：添加了我到目前为止的 Spinner 代码。

```
// Terrain Spinner

        Spinner s = (Spinner) findViewById(R.id.spinnerTerrain);

        //I think it is here i need to implement the suggested answer

        s.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener(){

        @Override
        public void onItemSelected(AdapterView<?> adapter, View v, int i, long lng) {
            Property.terrain = adapter.getItemAtPosition(i).toString();

        }

        @SuppressWarnings("rawtypes")
        @Override
        public void onNothingSelected(AdapterView arg0) {
        //do something else
        }
        }); 
```

我喜欢并理解您查找匹配数组位置的方法 - 我可以澄清一下如何更改适配器（因为我目前似乎没有）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:21:31.457

我认为您需要在 Spinner 适配器中设置适配器的位置。`theSpinnerAdapter.setSelection(someIntegerIndicatingPosition);`

要获得该位置，您可能需要在 ArrayList 中进行查找，假设这是您的微调器的来源，以找到该项目并获取它的位置。像这样的东西：

```
public int FindPositionOfItem(String itemValue)
{
    int itemPosition = 0;

    //Loop through each item in the list of spinner items
    for(String itemInList: allSpinnerItems)
    {
        //Check if the current item matches the item retrieved from the database
        if(itemInList.equals(itemValue))
        {
            break;
        }

        itemPosition++;
    }

    return result;
} 
```

然后从数据库中获取值后，只需将其传递给该方法即可获取位置。

```
int positionOfSelectedItem = FindPositionOfItem(valueCapturedFromDB);
theSpinnerAdapter.setSelection(positionOfSelectedItem); 
```

**编辑**：如果您使用 ArrayAdapter 作为 Spinner 适配器，我认为您可以这样做`int position = adapter.getPosition(stringRetrievedFromDatabase)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T18:05:33.923

我不太了解您的问题，但是我想您只想在从数据库中获取先前选择的项目之后在微调器处选择该项目，对吗？

如果是这样，你可以改进类似的东西：

```
 Spinner s = ...;
        Cursor c = getPreviouslySelectedItemFromDatabase();
        if (c != null && c.moveToFirst()) {
            String property = c.getString(c.getColumnIndexOrThrow("previous_item")); // That's the column on the db
            c.close();

            final int count = s.getAdapter().getCount();
            for (int index = 0; index < count; count++) {
                String value = (String) s.getAdapter().getItem(index);
                if (TextUtils.equals(value, property)) {
                    s.setSelection(index);
                    break;
                }
            }
        } 
```

如果您只想在整个 UI 中保持微调器状态，请查看以下内容：

```
 Spinner s = ...;
//After selected
        SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(this);
        SharedPreferences.Editor editor = settings.edit();
        editor.putInt(PREF_LAST_SELECTED_POS, s.getSelectedItemPosition());
        editor.commit();
//-----------------     
//At the moment you want to retain the state of the spinner 
        SharedPreferences settings = PreferenceManager.getDefaultSharedPreferences(this);
        int position = settings.getInt(PREF_LAST_SELECTED_POS, 0);

        s.setSelection(position); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T16:19:54.073

您可以在数据库中添加一`previouslySelected`列，然后`ORDER BY`在该字段中获取先前选择的答案以显示在列表顶部。

# vb.net - 在回发之前捕获数据（转发器中的用户控件）

> ID：10519986
> 
> 赞同：1
> 
> 时间：2012-05-09T16:13:47.500
> 
> 标签：vb.net, postback, preload

我在 ASP:Repeater 中有几个用户控件。它们是“添加到购物篮”用户控件，带有用于数量的文本输入和用于将项目添加到购物篮的按钮。

我的问题是，每当我在数量文本框中输入一个值时，该值就会被重置为 1。我认为这是因为包含页面重新初始化了转发器（其中包含 UserControls），并且在触发 UserControl 的单击事件之前数量再次变为 1。

谁能告诉我如何在回发发生之前捕获文本框中的值，我很高兴现在将这些数据粘贴到会话中。

我在想我需要一些类似于 PreLoad 的东西？但这对我不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T10:32:17.640

最后，我能够通过捕获用户控件的 Unload 事件来捕获价值

```
 Protected Sub Page_Unload(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Unload
            Dim quantity As Integer
            Session("Quantity" & litProductId.Text) = If(Integer.TryParse(txtQuantity.Text, quantity), quantity, 1)
        End Sub 
```

我还必须将产品 ID 放在隐藏文字中，因为此时属性值似乎已经消失。感觉有点像黑客，但现在完成了工作。很高兴听到任何其他解决方案

# c# - Entity Framework 3 - 链式导航属性中的过滤器元素

> ID：10519996
> 
> 赞同：1
> 
> 时间：2012-05-09T16:14:31.423
> 
> 标签：c#, linq, entity-framework

我试图限制在一系列导航链中选择的元素。大致顺序如下：Order -> Preference(s) -> PreferenceCard -> Item(s) -> OrderItem

笔记：

*   一个订单可以有多个偏好。
*   偏好有 1 张偏好卡。
*   偏好卡由项目组成。
*   OrderItem 包含有关特定于订单的项目的详细信息。

如何将 OrderItems 的选择限制为仅与我的订单相关联的那些？我的`Include("Preference.PreferenceCard.Item.OrderItem")`只是抓取所有 OrderItems，即使它们与订单不对应。

我试过一个`Where()`子句，但它似乎没有做任何事情：

```
.Where(
    o => o.Preference.Any(
        p => p.PreferenceCard.Items.Any(
            item => item.OrderItem.Any(
                orderItem => orderItem.OrderId == o.OrderId)))) 
```

我如何通过 OrderId 正确过滤 OrderItems，甚至通过导航属性链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T16:42:38.457

我相信对这些类型的问题造成混淆的主要来源是理解来自 EntityFramework 的实体与普通类不同。如果您不想操纵您的数据结构或其导航属性（添加、修改、删除），并且您只想拥有数据的自定义视图，那么您应该返回匿名类型或 POCO（普通旧 CLR 对象） ）。您可以声明自己的类并相应地分配属性。

```
public class OrderView
{
  public int Id { get; set; }
  public IEnumerable<OrderItem> OrderItems { get; set; }
  ...
}

var query = from o in context.Orders
            select new OrderView
            {
              Id = o.Id,
              OrderItems = //custom filtering
              ...
             }; 
```

# jakarta-ee - 自动注册 JNDI 资源

> ID：10519997
> 
> 赞同：0
> 
> 时间：2012-05-09T16:14:34.257
> 
> 标签：jakarta-ee, jndi, glassfish-3

我想知道是否可以通过部署war文件来为mysql数据库连接池完全注册JNDI资源。这可能吗？

或者有没有其他方法可以在没有管理控制台的情况下使用 JNDI 文件。我有一个任务，我必须使用 JSTL 来访问数据库，我们必须将它部署在我们无法访问管理控制台的中央 glassfish 3 服务器上。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-13T08:12:59.160

是的，有一种方法可以在不与管理控制台交互的情况下配置资源，但这将是特定于服务器的。例如，对于 glassfish，您必须创建一个`glassfish-resources.xml`文件并将其放在`WEB-INF`. 以下是示例内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE resources PUBLIC "-//GlassFish.org//DTD GlassFish Application Server 3.1 Resource Definitions//EN" "http://glassfish.org/dtds/glassfish-resources_1_5.dtd">

<resources>
<jdbc-connection-pool
 name="jdbc/test_pool"
 res-type="javax.sql.DataSource"
 datasource-classname="org.apache.derby.jdbc.ClientDataSource"
 pool-resize-quantity="1"
 max-pool-size="5"
 steady-pool-size="0"
 statement-timeout-in-seconds="30" >
   <property name="PortNumber" value="1527"></property>
      <property name="Password" value="APP"></property>
      <property name="User" value="APP"></property>
      <property name="serverName" value="localhost"></property>
      <property name="DatabaseName" value="testConnection"></property>
      <property name="connectionAttributes" value=";create=true"></property>
 </jdbc-connection-pool>
 <jdbc-resource pool-name="jdbc/test_pool" jndi-name="jdbc/test"></jdbc-resource>
</resources> 
```

请注意，创建的资源将是**application-scoped**。这意味着，您必须使用`java:app`前缀通过 JNDI 名称来查找它，如下所示：

```
@Named
@SessionScoped
public class TestConnectionBean implements Serializable {

    @Resource(name = "java:app/jdbc/test")
    private javax.sql.DataSource dataSource;

    public void test() throws SQLException {
        Connection conn = null;
        try {
            conn = dataSource.getConnection();
        } catch (SQLException e) {
            e.printStackTrace();
        }
        DatabaseMetaData metaData = conn.getMetaData();
        System.out.println(metaData.getDriverName());
        System.out.println(metaData.getDatabaseProductName());
    }

} 
```

如果您需要创建全局范围的资源，则必须使用以下方法之一：

*   管理控制台
*   CLI asadmin 实用程序
*   手动编辑 domain.xml