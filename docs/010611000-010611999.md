# StackOverflow 问答 10611000-10611999

# iphone - 忘记添加 iPad 故事板，现在模拟器一直在运行 iPhone 故事板

> ID：10611001
> 
> 赞同：0
> 
> 时间：2012-05-16T01:50:58.643
> 
> 标签：iphone, ios, xcode, ipad

我创建了一个针对 iPhone 的 XCode，过去几周我写了很多代码，现在我需要添加 iPad 故事板（我忘了创建通用设备......）

所以我刚刚添加了一个针对 ipad 的新故事板，并为其命名，但每次我运行调用模拟器的应用程序时，它都会调用 Iphone 视图

我错过了什么？，我真的不想创建一个新应用程序并将所有文件传输到它

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T02:02:11.673

首先，您需要将项目设置更改为通用。然后，您需要将 iPad 的主情节提要文件指向正确的位置。完成此操作后，单击带有产品名称的栏的右侧（停止按钮旁边），然后选择 iPad xx 模拟器。

# php - 在 PHP 中向后遍历 foreach 循环

> ID：10611009
> 
> 赞同：2
> 
> 时间：2012-05-16T01:51:46.890
> 
> 标签：php

我这里有一个 foreach 循环，可以将数据库中的图像显示到网页上。我想做的是向后遍历 foreach 循环，因此最新的内容首先显示在网页上。这是我的代码：

```
$sql = "SELECT COUNT(*) FROM 'UPLOADPICS'";

    if ($sth = $dbhandle->query($sql)){
        if ($sth->fetchColumn() > 0){
            $sql = "SELECT link FROM 'UPLOADPICS'";
            foreach ($dbhandle->query($sql) as $row){
                $content = $row['link'];
                ?>
                <img src="<?php echo $content ?>" />
                <br/>
                <br/>
                <?php
            }
        }

        else {
            print "No rows matched the query";
        } 
```

这可能吗？提前非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T01:55:18.137

而不是向后循环，您可以对结果进行排序以[`ORDER BY`](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)首先显示最近的项目。这通常是最常用的方法。

```
SELECT foo, bar 
FROM uploadpics 
ORDER BY 
  date DESC 
```

当然，这不仅仅是一个建议；无论如何，如果不先将它们加载到新的数组集合中，然后向后迭代，您将无法反向运行这些值 - 所以您会浪费一些宝贵的时间和资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T08:21:52.323

如果您的表中没有日期字段..您可以按 id 以降序排序

```
 $sql = "SELECT link FROM `UPLOADPICS` ORDER BY `id` DESC"; 
```

如果你不喜欢，你可以使用 array_reverse() 函数

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-23T10:36:42.950

```
<?php
    $a = array('a', 'b', 'c');
    for ($i = count($a) - 1; $i >= 0; --$i) {
        echo $a[$i];
    }
    echo "\n";
 ?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T01:55:30.710

您可以对数组进行计数并使用一个简单的索引变量向后迭代它，该变量在每次迭代中减 1。

```
$arr = $dbhandle->query($sql);
$i = count($arr) - 1;

while ($i >= 0)
{
    $content = $arr[$i]['link'];
    ?>
    <img src="<?php echo $content ?>" />
    <?php
    $i--;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-16T05:04:00.467

好吧，包括`Order By`会更合适，但您可能没有日期字段！

使用 php 的[array_reverse() 函数](http://php.net/manual/en/function.array-reverse.php)将反转数组；在您的情况下，首先反转数组，然后应用 foreach。

希望这可以帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-05T21:50:31.233

```
$array=array("uno"=>array(1),"pepito"=>array(1),"clase"=>array(1),"a123"=>array(1));
echo 'normal<br>';
foreach($array as $k=>$v){
    echo $k." = ".$v."<br>";
}
echo 'back<br>';
foreach(array_reverse($array) as $k=>$v){
    echo $k." = ".$v."<br>";
} 
```

# cppcheck - 无法从 cppcheck 生成 XML 输出

> ID：10611011
> 
> 赞同：7
> 
> 时间：2012-05-16T01:51:59.510
> 
> 标签：cppcheck

我正在使用[cppcheck](http://cppcheck.sourceforge.net/)对 C 代码进行静态分析，但似乎无法获得 XML。我要求 Jenkins 使用 XML 文件

这是我到目前为止所尝试的：

运行cppcheck.sh

```
#!/bin/sh
cd obj/msc
cppcheck --enable=all -I. -I. -I. -I. -I. -I. -I. -I. -I. -I. -I. /usr/include/ -I. obj/fap/ \
-DSUNOS -DSS -DSS_MT -DANSI -D_GNU_SOURCE -DSS_LINUX -D_REENTRANT -D__EXTENSIONS__ -DSUNOS -DCNS_PH1 -DDBG_TIMESTAMP -DLX_PRNT_TIMESTAMP \
-DDEBUGP -DLX -DLCLXT -DLXT_V1 -DLCLXUILXT -DLCXULILXT -DXU  -DLX -DLCLLX  -DSM -DLWLCLLX -DLCLXMILLX -DLCSMLXMILLX -DHR -DLX -DLCHRT \
-DLCHRUIHRT -DLCHRLIHIT -DLCLXLIHRT -DXU -DLCXULIHRT  -DLX -DLX_RTP -DLX_FASTRC -DCMINET_BSDCOMPAT -DSS_TICKS_SEC=100 -DCMFILE_REORG_1 \
-DCM_INET2 -D_GNU_SOURCE -DCMFILE_REORG_2 -DSSINT2 -DCMKV2 -DHI_MULTI_THREADED -DxCM_PASN_DBG -DxCCPU_DEBUG -DxRNC_OUTPUT_CONSOLE \
-DxCCPU_DEBUG_TRACE -DCCPU_DEBUG1 -DSS_PERF -DNO_ERRCLS -DNOERRCHK -DSS_M_PROTO_REGION -DxCCPU_DEBUG_TRACE1 -DxCCPU_DEBUG_TRACE2 \
-DCCPU_MEAS_CPU -DSTD_CCPU_IU -UMULTIPLE_CN_SUPPORT -DLONG_MSG -DTEST_CNS -UDCM_RTP_SESSID_ARRAY -DHR *.c *.h --xml ../../cppcheck-result.xml 
```

我确实在标准输出上获取 XML，但不在文件中

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T06:08:05.660

我是一名 Cppcheck 开发人员。

您需要将报告通过管道传输到文件。

```
cppcheck file1.c --xml 2> cppcheck-result.xml 
```

关于命令行的一个小提示，在大多数情况下最好使用*.* 而不是**.c *.h*。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-13T19:52:05.180

实际上，这是获取正确 xml 输出的命令。

```
cppcheck --xml --xml-version=2 --enable=all <path1> <path2> 2>samplecppcheck.xml 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-08T21:47:12.417

这`2>`部分显然是*shell*语法，并且仅适用于 shell 解释器的上下文。那么，如果不是从 shell 运行，而只是一个普通的“带参数的命令”类型的接口（如`env`、等）`xargs`，该怎么办？`docker run`

不用说，显而易见的解决方法，将整个东西包装在`sh -c`. 这将是指定输出文件的不合理的复杂性，并且清楚地表明您做错了什么。

包装脚本可让您以正确的方式解决问题

```
#!/bin/sh
exec "$@" 2> result.xml 
```

…但这将是一个文件，这本身可能是一个复杂的问题。幸运的是，该脚本可以写成这样的内联形式：

```
sh -c 'exec "$0" "$@" 2> result.xml' cppcheck … 
```

这现在是一个普通参数列表的形式，因此适用于所有 shell，以及非 shell，如`docker run`.

# c# - 将 PHP 转换为 .Net C#

> ID：10611013
> 
> 赞同：2
> 
> 时间：2012-05-16T01:52:42.123
> 
> 标签：c#, php, methods

我正在“重新开发”一个前一段时间在 PHP 中启动的应用程序。涉案开发人员很久以前就离开了公司，所有联系他的努力都被搁置了。

我不需要帮助将整个站点转换为一个非常简单的应用程序。但是，我们正在与 API 服务集成（谁的文档很差），我在理解他们的 dateTime 字符串时遇到了问题。

这是关于他们如何使用日期时间的摘录（唯一的一点）。

" 日期时间表示为使用日月年小时分钟和秒的算法派生的数字，如下所示：

```
date=year<<20; 
date|=month<<16; 
date|=day<<11; 
date|=hour<<6;
date|=minute; 
```

从给定的数字中解包日期如下：

```
year=(date & 0xfff00000) >> 20;
month=(date & 0x000f0000) >> 16;
day=(date & 0x0000f800) >> 11; 
hour=(date & 0x000007c0) >> 6; 
minute=(date & 0x0000003f); 
```

"

现在是我的问题。开发人员（这是一个工作示例）创建了以下 PHP 函数，可将时间戳转换为所需格式。我不确定按位时间戳是否是“通用算法”。

我试过环顾四周，找不到任何东西。

```
/**
 * Converts a unixtime stamp to a bitwise timestamp
 * 
 * @access public
 * @param mixed $unixtime
 * @return void
 */
function convert_unixtime_to_bitwise($unixtime)
{
    /*$year = date('Y', $unixtime);
    $month = date('m', $unixtime);
    $day = date('j', $unixtime);
    $hour = date('G', $unixtime);
    $min = date('i', $unixtime);*/

        $year = date('Y', $unixtime);
    $month = date('m', $unixtime);
    $day = date('j', $unixtime);
    $hour = date('G', $unixtime);
    $min = date('i', $unixtime);

    $date = 0;
    $date = $year << 20;
    $date |= $month << 16;
    $date |= $day <<11;
    $date |= $hour <<6;
    $date |= $min;

    return $date;
}

/**
 * Converts a bitwise datestamp to a standard unixtime stamp
 * 
 * @access public
 * @param mixed $timestamp
 * @return void
 */
function convert_bitwise_to_unixtime($timestamp)
{
    $dateline = array();

    $dateline['year'] = ($timestamp & 0xfff00000) >> 20;
    $dateline['month'] =($timestamp & 0x000f0000) >> 16;
    $dateline['day'] = ($timestamp & 0x0000f800) >> 11;
    $dateline['hour'] = ($timestamp & 0x000007c0) >> 6;
    $dateline['min'] = ($timestamp & 0x0000003f);

    return mktime($dateline['hour'], $dateline['min'], 0, $dateline['month'], $dateline['day'], $dateline['year']);
} 
```

任何人都可以帮助我以最简单的方式将其转换为 .Net。理想情况下，我会为 datetime 对象编写一个扩展方法以返回“按位？” 对象和扩展方法将按位时间戳转换为日期时间时间戳。理想情况下，我最终会得到类似于 bel..

```
public static class Extensions
{
    public static BitWiseDateStamp ToBitWiseDateStamp(this DateTime timeStamp)
    {
        return BitWiseDateStamp.New(timeStamp);
    }

}

public class BitWiseDateStamp
{
    private string _value;

    public string Value
    {
        get { return _value; }
        set { _value = value; }
    }

    public static BitWiseDateStamp New(DateTime date)
    {
        var b = new BitWiseDateStamp();

        var bitWiseStr = string.Empty; 

        //= Convert to bitwise string format...

        b.Value = bitWiseStr;
        return b;
    }

    public override string ToString()
    {
        return this._value;
    }

    public DateTime ToDateTime()
    {
        var date = DateTime.MinValue;
        var dateStr = string.Empty;

        //== Convert bitwise string to date string respresenation

        DateTime.TryParse(dateStr, out date);
        return date;
    }
} 
```

我非常感谢任何人可以提供的任何帮助。

干杯，

尼科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T02:14:24.603

也许我错过了一些东西，但这不会吗？

```
public class BitwiseDateStamp
{
    private readonly int _value;

    public BitwiseDateStamp(DateTime dt)
    {
        this._value = dt.Year << 20;
        this._value |= dt.Month << 16;
        this._value |= dt.Day << 11;
        this._value |= dt.Hour << 6;
        this._value |= dt.Minute;
    }

    public BitwiseDateStamp() : this(DateTime.Now)
    {   
    }

    public DateTime ToDateTime()
    {
        int year = this._value >> 20;
        int month = (this._value & 0x000f0000) >> 16;
        int day = (this._value & 0x0000f800) >> 11;
        int hour = (this._value & 0x000007c0) >> 6;
        int minute = this._value & 0x0000003f;

        return new DateTime(year, month, day, hour, minute, 0);
    }

    public override string ToString()
    {
        return this._value.ToString();
    }
} 
```

和

```
public static class DateTimeExtensions
{
    public static BitwiseDateStamp ToBitwiseDateStamp(this DateTime dt)
    {
        return new BitwiseDateStamp(dt);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T02:24:47.920

我认为 BitWiseDateStamp 类不需要。可以这样实现：

```
public static class Extensions
{
    public static ulong ToDateStamp(this DateTime dt)
    {
        return (dt.Year << 20 | dt.Month << 16 | dt.Day << 11 | dt.Hour << 6 |                        dt.Minute);
    }

    public static DateTime FromDateStamp(this ulong stamp)
    {
        return new DateTime((stamp & 0xfff00000) >> 20,
                            (stamp & 0x000f0000) >> 16,
                            (stamp & 0x0000f800) >> 11,
                            (stamp & 0x000007c0) >> 6,
                            (stamp & 0x0000003f),
                            0 // 0 seconds
                           );
    }

} 
```

# android - 如何更新 ViewPager 内容？

> ID：10611018
> 
> 赞同：11
> 
> 时间：2012-05-16T01:54:10.363
> 
> 标签：android, listview, android-viewpager, pager, indicator

我`PageAdapter`每周都有这个，对于每个寻呼机我都有相同的布局。我的问题是如何在更改日期时更新正确的 listView。当我更改寻呼机创建新寻呼机并删除其他寻呼机的日期时，发生这种情况时，我的 listview 指向新寻呼机而不是当前寻呼机。例如，是星期三，我保存列表视图参考​​，当我更改为星期二时，创建星期一寻呼机并删除星期四，并且我的参考点指向最后一页创建（星期一），但我在星期二。

我的页面适配器：

```
ListView lvwConfig;

@Override
public Object instantiateItem(View pager, int position) {
    LayoutInflater inflater = (LayoutInflater) mContext
        .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = inflater.inflate(R.layout.pager_layout, null);
    lvwConfig = (ListView) v.findViewById(R.id.lvwConfig);
    ((ViewPager) pager).addView(v, 0);

    return v;
} 
```

我想`ListView`总是指向当前项目的列表视图。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-16T06:47:33.713

阅读这篇文章：[PagerAdapter](https://stackoverflow.com/questions/7263291/viewpager-pageradapter-not-updating-the-view)

您可以在 PagerAdapter 中实现此功能：

```
public int getItemPosition(Object object){
     return POSITION_NONE;
} 
```

之后，您可以使用此功能：

```
yourPagerAdapterObject.notifyDataSetChanged(); 
```

如果您有太多要显示的视图，则此方法很糟糕。总是重新计算所有视图。但在你的情况下，对于某些观点，没关系。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-13T15:00:36.177

在 PagerAdapter 中覆盖 getItemPosition 更容易，但效率更低。这样，当您调用 时`notifyDataSetChanged()`，视图寻呼机将删除所有视图并重新加载它们。这样就获得了重装效果。[alvarolb 建议的](https://stackoverflow.com/questions/7263291/viewpager-pageradapter-not-updating-the-view/8024557#8024557)另一个选项是在实例化新视图时使用`setTag()`方法。`instantiateItem()`然后`notifyDataSetChanged()`，您可以使用`findViewWithTag()`来查找要更新的视图，而不是使用。

# android - 不能掉帧？

> ID：10611019
> 
> 赞同：5
> 
> 时间：2012-05-16T01:54:11.273
> 
> 标签：android, eclipse, debugging

有没有一个技巧可以让“Drop To Frame”与 Android 一起工作？该选项对我无效。

![在此处输入图像描述](../Images/85c54031ef322439c9604b262b8be666.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T06:01:51.863

我希望这是可能的，但我不这么认为。

其他不错的功能，如“所有实例...”、“实例计数”和观察点（在变量访问/修改时停止调试）也不可用。我想是因为 DalvikVM 不支持这个功能。

[从关于Drop to frame 的](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fviews%2Fdebug%2Fref-droptoframe.htm)Eclipse 文档：

> 请注意，此命令仅在当前 VM 支持 drop to frame 并且所选堆栈帧不是顶部帧或本机方法中的帧时才可用。

[在描述所有实例](http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2Freference%2Fviews%2Fshared%2Fref-allinstances.htm)的页面上可以找到类似的注释：

> 仅当您当前使用的 Java 虚拟机支持实例检索时，此命令才可用。

[在此处](https://stackoverflow.com/questions/10697639/show-all-instances-missing-in-eclipse-debug-view)查看我对自己的类似问题的回答。

也许有一个选项可以在 Dalvik 上启用此功能。

**编辑**

它可能没有什么价值，但是如果您使用单元测试（使用 JUnit 或 Robolectric），那么所有这些功能都可用（因为我认为是在本机 JVM 上运行）并且非常有用。

干杯，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:19:29.773

从[这里](https://bugs.eclipse.org/bugs/show_bug.cgi?id=102484)我得到以下评论

> 仅当您正在调试的程序支持该操作时，该操作才会启用。例如，Java 调试器在支持它的 VM（1.4.x 或更高版本）上调试时支持该操作，并且在您要下降到的点之上的调用堆栈上没有本机方法。

# asp.net - 回发之前是否有视图状态事件？

> ID：10611026
> 
> 赞同：3
> 
> 时间：2012-05-16T01:54:50.533
> 
> 标签：asp.net, postback, viewstate, listboxitems

考虑以下情况：添加到客户端文本框中的文本值在回发时添加到视图状态（因此当页面重新加载时该值仍然存在于文本框中）。

当我通过 jquery 将值从 listbox1 移动到 listbox2 时，为什么 listbox2 中的项目不会添加到视图状态。（注意：项目是在 POST 之前选择的，listbox2 中的值在服务器上通过 request.form.getvalues("listbox2").getvalue(index).tostring() 回发时可用）

我不是在找工作，我有。我想知道“为什么”没有添加 listbox2 值。是否为文本框而不是列表框触发了一些事件？只是想更好地了解发生了什么。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T02:20:07.943

> 添加到客户端文本框中的文本值在回发时添加到视图状态（因此当页面重新加载时该值仍然存在于文本框中）。

这种说法是不正确的。服务器控件的值`TextBox`在回发中被保留，因为浏览器在发布数据中发送它，并且在回发时`TextBox`将值从发布数据复制到其`Text`属性。不涉及视图状态，您可以通过设置来验证`EnableViewState="False"`。（我在这里假设`TextBox`是可见并启用的；否则，浏览器*不会*在发布数据中发送其值，并且需要视图状态*来*保留该值。）

> 当我通过 jquery 将值从 listbox1 移动到 listbox2 时，为什么 listbox2 中的项目不会添加到视图状态。

对于多选`ListBox`服务器控件，浏览器会在发布数据中发送每个选定项目的值。在回发时，`ListBox`查看 post 数据中的每个值，在其集合中搜索相应的项目`Items`，并将该项目的`Selected`属性设置为`True`。它不会将无法识别的值添加到`Items`集合中；相反，如果启用了事件验证，则会引发“无效的回发或回调参数”异常。同样，不涉及视图状态。

# java - 解析 WSDL 的简单方法

> ID：10611034
> 
> 赞同：8
> 
> 时间：2012-05-16T01:55:42.583
> 
> 标签：java, parsing, wsdl

我正在尝试解析 WSDL 以获取操作、端点和示例有效负载。用户输入的 WSDL。我找不到这样做的教程。

我只能找到那些生成我不需要的源代码的。我尝试过使用 XBeans，但显然我需要 Saxon。没有撒克逊人，有没有一种简单的轻量级方法可以做到这一点？

例如

```
 <?xml version="1.0"?>
  <definitions name="StockQuote"
  targetNamespace=
    "http://example.com/stockquote.wsdl"
  xmlns:tns="http://example.com/stockquote.wsdl"
  xmlns:xsd1="http://example.com/stockquote.xsd"
  xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
  xmlns="http://schemas.xmlsoap.org/wsdl/">
   <types>
   <schema targetNamespace=
     "http://example.com/stockquote.xsd"
     xmlns="http://www.w3.org/2000/10/XMLSchema">
      <element name="TradePriceRequest">
        <complexType>
           <all>
             <element name="tickerSymbol" 
               type="string"/>
           </all>
        </complexType>
      </element>
      <element name="TradePrice">
        <complexType>
          <all>
            <element name="price" type="float"/>
          </all>
        </complexType>
      </element>
   </schema>
   </types>
   <message name="GetLastTradePriceInput">
     <part name="body" element=
       "xsd1:TradePriceRequest"/>
   </message>
   <message name="GetLastTradePriceOutput">
     <part name="body" element="xsd1:TradePrice"/>
   </message>
   <portType name="StockQuotePortType">
     <operation name="GetLastTradePrice">
       <input message="tns:GetLastTradePriceInput"/>
       <output message="tns:GetLastTradePriceOutput"/>
     </operation>
   </portType>
     <binding name="StockQuoteSoapBinding"
       type="tns:StockQuotePortType">
       <soap:binding style="document"
         transport=
           "http://schemas.xmlsoap.org/soap/http"/>
     <operation name="GetLastTradePrice">
       <soap:operation
         soapAction=
           "http://example.com/GetLastTradePrice"/>
         <input>
           <soap:body use="literal"/>
         </input>
         <output>
           <soap:body use="literal"/>
         </output>
       </operation>
     </binding>
     <service name="StockQuoteService">
       <documentation>My first service</documentation>
       <port name="StockQuotePort" 
         binding="tns:StockQuoteBinding">
         <soap:address location=
           "http://example.com/stockquote"/>
       </port>
     </service>
    </definitions> 
```

应获取操作：GetLastTradePrice、GetLastTradePrice

端点：StockQuotePort

样本有效载荷：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:stoc="http://example.com/stockquote.xsd">
   <soapenv:Header/>
   <soapenv:Body>
      <stoc:TradePriceRequest/>
   </soapenv:Body>
</soapenv:Envelope> 
```

这就像 SoapUI 所做的那样。但我主要关心的是能够解析 WSDL。更多上下文是上传 WSDL，然后将结果显示在 GWT 应用程序中（文件上传必须转到 servlet）。所以我需要解析文件并创建一个 GWT 能够理解的对象。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T06:58:07.217

这看起来不错：[http ://www.membrane-soa.org/soa-model-doc/1.4/java-api/parse-wsdl-java-api.htm](http://www.membrane-soa.org/soa-model-doc/1.4/java-api/parse-wsdl-java-api.htm)

虽然对我来说第一次尝试没有用，所以我编写了一个方法来返回示例 wsdl 的建议结果——在 J2SE6 之外没有依赖关系。

```
public String[] listOperations(String filename) throws FileNotFoundException, SAXException, IOException, ParserConfigurationException {
  Document d = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new FileInputStream(filename));
  NodeList elements = d.getElementsByTagName("operation");
  ArrayList<String> operations = new ArrayList<String>();
  for (int i = 0; i < elements.getLength(); i++) {
    operations.add(elements.item(i).getAttributes().getNamedItem("name").getNodeValue());
  }
  return operations.toArray(new String[operations.size()]);
} 
```

似乎您想要删除重复项，因为每个操作在 WSDL 中列出了两次。使用 Set 很容易。上传完整的 Eclipse 项目，在此处显示唯一和非唯一结果：[https ://github.com/sek/wsdlparser](https://github.com/sek/wsdlparser)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-13T06:14:37.347

我使用easywsdl。

[一个开始的地方](http://easywsdl.ow2.org/user-guides.html)

```
Maven:
<dependency>
  <groupId>org.ow2.easywsdl</groupId>
  <artifactId>easywsdl-wsdl</artifactId>
  <version>2.1</version>
</dependency>

// Read a WSDL 1.1 or 2.0
WSDLReader reader = WSDLFactory.newInstance().newWSDLReader();
Description desc = reader.read(new URL("http://file/path/document.wsdl"));
// Endpoints take place in services. 
// Select a service
Service service = desc.getServices().get(0);

// List endpoints
List<Endpoint> endpoints = service.getEndpoints(); 

// Read specific endpoint
//An endpoint has getBinding and then you getInterface from binding and so on
Endpoint specificEndpoint = service.getEndpoint("endpointName");

// Add endpoint to service
service.addEndpoint(specificEndpoint);

// Remove a specific enpoint
service.removeEndpoint("endpointName");

// Create endpoint
Endpoint createdEndpoint = service.createEndpoint();
service.addEndpoint(createdEndpoint);

My sample code:
    try {
        // Read a WSDL 1.1 or 2.0
        WSDLReader reader = WSDLFactory.newInstance().newWSDLReader();
        Description desc = reader.read(new URL("file:///C:/your/file/path/sample.wsdl"));
        // Endpoints take place in services. 
        // Select a service
        Service service = desc.getServices().get(0);
        List<Endpoint> endpoints = service.getEndpoints();
        //Gets address of first endpoint
        System.out.println(endpoints.get(0).getAddress());
        //Gets http method
        System.out.println(endpoints.get(0).getBinding().getBindingOperations().get(0).getHttpMethod());
        //Gets input type
        System.out.println(endpoints.get(0).getBinding().getInterface().getOperations().get(0).getInput().getElement().getType().getQName().getLocalPart());

    } catch (WSDLException | IOException | URISyntaxException e1) {
        e1.printStackTrace();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-25T11:09:13.777

```
 private static String getMethodNameFromWSDL(String wsdlPath) throws FileNotFoundException, SAXException, IOException, ParserConfigurationException {

        String tagPrefix = null;
        String namespace =null;
        String location = null;
        NodeList nd = null;
        Set<String> operations = new HashSet<String>(); 
        NodeList nodeListOfOperations = null;
        String attr ="http://www.w3.org/2001/XMLSchema"

        Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new ByteArrayInputStream(convertURLToString(wsdlPath).getBytes()));

        NodeList allNodesOfDocumnet = document.getChildNodes();

        for(int index = 0;index<allNodesOfDocumnet.getLength();index++){
            if( document.getFirstChild().getNodeName().equalsIgnoreCase("#comment")){
                    document.removeChild(document.getFirstChild());
            }    
        }

       int l =  document.getFirstChild().getAttributes().getLength();
       for (int i = 0; i < l; i++) {
         String cmpAttribute =  document.getFirstChild().getAttributes().item(i).getNodeValue();
             if(cmpAttribute.equals(attr)){
                 tagPrefix =  document.getFirstChild().getAttributes().item(i).getNodeName().replace("xmlns:", "");
             }
        }

        System.out.println(tagPrefix);
        String str1=tagPrefix+":import";
        String str2="wsdl:import";
        String str3 ="operation"; 
        String str4 ="wsdl:operation"; 
        // Getting Namespace
                if((document.getElementsByTagName(str1).getLength()>0)||(document.getElementsByTagName(str2).getLength()>0)){

                            if(document.getElementsByTagName(tagPrefix+":import").getLength()>0)
                                 nd =document.getElementsByTagName(tagPrefix+":import");

                            else if (document.getElementsByTagName("wsdl:import").getLength()>0) 
                                 nd =document.getElementsByTagName("wsdl:import");  

                            for (int k = 0; k < nd.item(0).getAttributes().getLength(); k++) {
                                String strAttributes = nd.item(0).getAttributes().item(k).getNodeName();

                                if(strAttributes.equalsIgnoreCase("namespace")){
                                    namespace = nd.item(0).getAttributes().item(k).getNodeValue();
                                    System.out.println("Namespace : "+namespace);
                                }
                                else {
                                     location = nd.item(0).getAttributes().item(k).getNodeValue();
                                     System.out.println("Location : "+location);
                                }

                            }
                }else{
                        namespace = document.getFirstChild().getAttributes().getNamedItem("targetNamespace").getNodeValue();
                        System.out.println("Namespace : "+namespace);
                    }   

                //Getting  Operations 

                 if((document.getElementsByTagName(str3).getLength()>0)||(document.getElementsByTagName(str4).getLength()>0)){

                    if(document.getElementsByTagName(str3).getLength()>0){
                        nodeListOfOperations =document.getElementsByTagName(str3);
                    }
                    else if (document.getElementsByTagName(str4).getLength()>0) {
                         nodeListOfOperations =document.getElementsByTagName(str4);
                    }
                    for (int i = 0; i < nodeListOfOperations.getLength(); i++) {
                            operations.add(nodeListOfOperations.item(i).getAttributes().getNamedItem("name").getNodeValue()); 
                    }

                }   

            if(location!=null){ 
                if(operations.isEmpty()){   
                    Document documentForOperation = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new ByteArrayInputStream(convertURLToString(location).getBytes()));
                    NodeList nodesOfNewDoc = documentForOperation.getChildNodes();
                    for(int index = 0;index<nodesOfNewDoc.getLength();index++){
                        if( documentForOperation.getFirstChild().getNodeName().equalsIgnoreCase("#comment")){
                                document.removeChild(document.getFirstChild());
                        }       
                    }

                    NodeList nodeList  = documentForOperation.getElementsByTagName(str4);
                    for (int i = 0; i < nodeList.getLength(); i++) {
                        operations.add(nodeList.item(i).getAttributes().getNamedItem("name").getNodeValue()); 
                    }
                }

            }

            for (String string : operations) {
                System.out.println(string);
            }
       System.out.println(operations.toString());           
        return operations.toString();           
    }

public static String convertURLToString(String url){

    StringBuilder response = null;  

    try {    

        URL urlObj = new URL(url);
        URLConnection urlConnection = urlObj.openConnection();
        urlConnection.setDoOutput(true);
        urlConnection.connect();    
        //urlConnection.setConnectTimeout(30000);       
        BufferedReader reader = new BufferedReader(new 
           InputStreamReader(urlConnection.getInputStream()));
        response = new StringBuilder();
        String inputLine;

        while ((inputLine = reader.readLine()) != null){
            response.append(inputLine);
        }

        reader.close();

    } catch (IOException e) {
        e.printStackTrace();
    }

    return response.toString();     
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-16T15:28:18.640

嗨@Rebzie，您可以使用JDOM 非常简单且轻量级。我使用解析 XML 文件。我希望能帮助你。:)

# delphi - 需要 Delphi 6 示例在 TIdSmtp 发送操作期间更新进度条，特别是对于大型附件

> ID：10611038
> 
> 赞同：1
> 
> 时间：2012-05-16T01:56:38.813
> 
> 标签：delphi, smtp, progress-bar, indy

我正在使用 Indy TIdSmtp 组件发送电子邮件。我发送的电子邮件会有一个很大的附件，通常在 5 到 40 MB 的范围内。我想更新一个进度条，它将显示发送的整体进度占需要发送的字节总数的百分比。我不在乎它是否真的很精确，只要足以让观看进度条的人指示整个电子邮件发送过程的进度。

有人可以指出我如何执行此操作的代码示例吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T02:43:52.237

`TIdSMTP`在将电子邮件发送到服务器时对其进行即时编码。正在发送的字节总数是未知的。您能够确定一个甚至相当接近的值的唯一方法是`TStream`通过该`TIdMessage.SaveToStream()`方法将电子邮件编码为一个临时值，然后获取该`TStream.Size`属性的值。由于您正在编码大型附件，这将需要一些时间和大量的内存开销。由于`TIdSMTP`只会在传输过程中再次重新编码电子邮件，因此`TStream.Size`由于各种电子邮件标头（例如时间戳和 MIME 边界）的动态特性，无法保证实际传输的字节数与临时值匹配。

要确定实际发送了多少字节，请使用`TIdSMTP.OnWork...`事件，其中`AWorkMode`参数将设置为`wmWrite`。由于`TIdSMTP.Send()`事先不知道它将发送多少字节，因此事件的`AWorkCountMax`参数将为，但至少您会知道实际的电子邮件数据何时开始编码/发送（在与服务器交换了几个命令之后）。事件的参数将是实际发送的字节总数。触发事件时，电子邮件已完成发送。`TIdSMTP.OnWorkBegin``0``TIdSMTP``AWorkCount``TIdSMTP.OnWork``TIdSMTP.OnWorkEnd`

根据 temp`TStream.Size`属性和事件的`AWorkCount`参数`TIdSMTP.OnWork`，您将能够显示进度条的百分比近似值。不能保证 100% 准确，但会很接近。

# android - 安卓。这不好用吗？是一个错误？设置边距

> ID：10611039
> 
> 赞同：2
> 
> 时间：2012-05-16T01:57:05.617
> 
> 标签：android, android-layout, layoutparams

通过将边距设置为零，图像会填满屏幕。但是要将边距设置为 100，除了右侧之外，它都适合。为什么这样做？

* * *

```
ImageView imagen = new ImageView(this);
RelativeLayout relative = new RelativeLayout(this);
RelativeLayout.LayoutParams labelLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
relative.setLayoutParams(labelLayoutParams);
RelativeLayout rl = new RelativeLayout(this);
RelativeLayout.LayoutParams layoutImagenClicker = new RelativeLayout.LayoutParams
(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT);
layoutImagenClicker.setMargins(0, 0, 0, 0);
imagen.setBackgroundResource(R.drawable.barra_seek_bar);
imagen.setLayoutParams(layoutImagenClicker);
rl.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
rl.addView(imagen);
relative.addView(rl);
setContentView(relative); 
```

![paddins 零图像](../Images/fb2c457d4f30fa2912114d3020cee684.png)

* * *

```
ImageView imagen = new ImageView(this);
RelativeLayout relative = new RelativeLayout(this);
RelativeLayout.LayoutParams labelLayoutParams = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);
relative.setLayoutParams(labelLayoutParams);
RelativeLayout rl = new RelativeLayout(this);
RelativeLayout.LayoutParams layoutImagenClicker = new RelativeLayout.LayoutParams
(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT);
layoutImagenClicker.setMargins(100, 100, 100, 100);
imagen.setBackgroundResource(R.drawable.barra_seek_bar);
imagen.setLayoutParams(layoutImagenClicker);
rl.setLayoutParams(new LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
rl.addView(imagen);
relative.addView(rl);
setContentView(relative); 
```

![paddins 图片一百](../Images/2a5f56b32a3ebebbd843ccb57b719e02.png)

* * *

**具有相同填充的不同边距？**

```
layoutImagenClicker.setMargins(0, 0, 0, 0);
layoutImagenClicker.setMargins(100, 100, 100, 100); 
```

* * *

看这个！

```
layoutImagenClicker.setMargins(100, 100, 200, 100); 
```

![一只忙碌的猫](../Images/423f9fabe168dc67a4d2c63ff26aa2eb.png)

相同的结果集边距右 100 或 200。这是一个错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:03:08.227

尝试在 RelativeLayout 包装器上设置填充，然后删除图像视图上的边距。至于你原来的问题，我不知道它为什么会搞砸，但从边距到填充是我一直喜欢的......

```
ImageView imagen = new ImageView(this);
RelativeLayout relative = new RelativeLayout(this);
RelativeLayout.LayoutParams labelLayoutParams = new RelativeLayout.LayoutParams
        (LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT);

// Padding on the RelativeLayout
relative.setPadding(100,100,100,100);

relative.setLayoutParams(labelLayoutParams);
RelativeLayout rl = new RelativeLayout(this);
RelativeLayout.LayoutParams layoutImagenClicker = new RelativeLayout.LayoutParams
         (RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT);

// Remove the margin on the child
//layoutImagenClicker.setMargins(100, 100, 100, 100);

imagen.setBackgroundResource(R.drawable.barra_seek_bar);
imagen.setLayoutParams(layoutImagenClicker);
rl.setLayoutParams(new LayoutParams    (LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT));
rl.addView(imagen);
relative.addView(rl);
setContentView(relative); 
```

祝你好运

# javascript - 在play框架中从javascript调用java函数

> ID：10611049
> 
> 赞同：2
> 
> 时间：2012-05-16T02:00:00.637
> 
> 标签：javascript, jquery, json, playframework

我正在使用游戏框架做一个项目。

单击某些链接（例如“show”）后，例如正在调用 car.show(55) 并在 car.show 中执行一些数据库查询。然后列表操作正在完成。

我想要做的是，从 java 脚本文件中调用 removegivencar 函数。

我是说，

当所有汽车都列在 html 文件中时。我会用那辆车的 id 调用一个 js 函数。

例如：移除我的车

我想在 js 中调用 car.removegivencar 函数而不是 html

因为我有车的身份证。我应该做@{car.removMyOwremovegivencar(mycar.id)} 操作...

我试过了

```
function removeMyCar(id)
{
window.location="@{car.removMyOwremovegivencar(id)}";
} 
```

或 window.location="@{car.removMyOwremovegivencar(" + id + ")"

等等，但做不到:(((请在这个问题上驱动我......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T06:19:47.010

如果它写得正确，那么它应该可以工作。但事实上，这是从数据库中删除实体的一个坏例子。那是因为您尝试使用的 GET 请求。使用 GET 进行删除不仅合乎逻辑，而且在某些情况下对您的应用程序也可能是危险的。但是，如果您以这种方式使用它，请检查以下内容：

您的路由文件应包含以下内容：

```
GET    /car/remove/{id}         car.removMyOwremovegivencar() 
```

还要确保将 id 参数传递给您尝试调用 js 代码的视图。我没有看到任何其他原因导致此代码无法正常工作。

**但考虑更好的方法：**

这是使此操作 POST 或 DELETE 并对其进行 AJAX 调用：

路线：

```
DELETE   /car/{id}         car.removMyOwremovegivencar() 
```

和你的 JS（使用 jQuery）：

```
function removeMyCar(id)
{
   $.ajax({
    type: "DELETE",
    url: "@{car.removMyOwremovegivencar()}",
    data: {
      id:id
    }
   });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T03:22:28.630

简短的回答是您不能直接从 javascript 调用 java 方法/函数。但是，您可以向将调用您的函数的服务器端资源发出 ajax 请求。ajax 请求的结果将是您选择的任何格式的函数的结果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T19:24:21.883

这篇文章可以帮助你：[javaScriptRouter](http://franzgranlund.wordpress.com/2012/03/29/play-framework-2-0-javascriptrouter-in-java/)

在此示例中，您可以使用此代码获取 url

`var url = jsRoutes.controllers.Application.plus(num1,num2).url;`

# c++ - 隐式 DLL 链接和类内部函数

> ID：10611050
> 
> 赞同：0
> 
> 时间：2012-05-16T02:00:02.783
> 
> 标签：c++, dll, linker

我正在尝试为 SQLite 编写一个包装类，以便使用隐式链接通过 DLL 公开，即生成库和头文件供消费者编译和链接。

目前我正在导出包装类，但是当我尝试编译使用这个包装类的项目时，我收到关于无法解析 sqlite API 调用的链接器错误，例如 sqlite3_open。包装类和消费者都是 C++，但 sqlite 是 C。

为什么消费者需要知道没有暴露给它的函数（包装类的全部要点）？这是否意味着我需要修改 SQLite 标头以更改其函数以对所有函数/我要包装的函数进行适当的 _declspec(dllexport) 装饰？这种变化有替代方案吗？

链接器错误：

```
libsqlite.lib(sqlitewrapper.oxl) : error LNK2019: unresolved external symbol _sq
lite3_close referenced in function "public: virtual __thiscall CSQLiteWrapper::~
CSQLiteWrapper(void)" (??1CSQLiteWrapper@@UAE@XZ)

libsqlite.lib(sqlitewrapper.oxl) : error LNK2019: unresolved external symbol _sq
lite3_open referenced in function "public: __thiscall CSQLiteWrapper::CSQLiteWra
pper(class ATL::CStringT<char,class ATL::StrTraitATL<char,class ATL::ChTraitsCRT
<char> > > const &)" (??0CSQLiteWrapper@@QAE@ABV?$CStringT@DV?$StrTraitATL@DV?$C
hTraitsCRT@D@ATL@@@ATL@@@ATL@@@Z)

libsqlite.lib(sqlitewrapper.oxl) : error LNK2019: unresolved external symbol _sq
lite3_free referenced in function "public: virtual void __thiscall CSQLiteWrappe
r::Exec(class ATL::CStringT<char,class ATL::StrTraitATL<char,class ATL::ChTraits
CRT<char> > > const &,int (__cdecl*)(void *,int,char * *,char * *))" (?Exec@CSQL
iteWrapper@@UAEXABV?$CStringT@DV?$StrTraitATL@DV?$ChTraitsCRT@D@ATL@@@ATL@@@ATL@
@P6AHPAXHPAPAD2@Z@Z)

libsqlite.lib(sqlitewrapper.oxl) : error LNK2019: unresolved external symbol _sq
lite3_exec referenced in function "public: virtual void __thiscall CSQLiteWrappe
r::Exec(class ATL::CStringT<char,class ATL::StrTraitATL<char,class ATL::ChTraits
CRT<char> > > const &,int (__cdecl*)(void *,int,char * *,char * *))" (?Exec@CSQL
iteWrapper@@UAEXABV?$CStringT@DV?$StrTraitATL@DV?$ChTraitsCRT@D@ATL@@@ATL@@@ATL@
@P6AHPAXHPAPAD2@Z@Z) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:43:28.270

您是否将包装器静态链接到 SQLite 库？这样做应该意味着一切都存在于您的库中，而不仅仅是一个网关，因此链接器错误应该消失。那是假设您当然不想将 SQLite 库与包装器分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T22:51:47.710

我的问题的根本原因是我使用“lib”命令来生成我然后链接的库。正如 Ixop 所提到的，在这种情况下，我需要确保将 SQLite 添加到我的库中，即使它没有直接暴露在 DLL 中。

然而，对于隐式链接，我应该做的是使用[IMPLIB](http://msdn.microsoft.com/en-us/library/67wc07b9%28v=vs.100%29.aspx)链接器指令来生成库。对我构建它的方式进行更改解决了这个问题。

# android - Android 设备兼容性

> ID：10611053
> 
> 赞同：0
> 
> 时间：2012-05-16T02:00:31.337
> 
> 标签：android, submit

我编写了一个简单的应用程序，它只对 Android 使用滑动手势，但是当我将它上传到 Play 商店时，它说它只能用于 0 台设备。

这是来自 Play 提交页面的兼容性报告

```
This application is only available to devices with these features, as defined in your application manifest.
Screen layouts: SMALL NORMAL LARGE XLARGE
Required device features
android.hardware.touchscreen
This application is available to over 0 devices. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T02:39:33.487

通过链接答案解决。为简单起见，您只需切换到 APK 选项卡，然后“激活”APK 文件。

# java - 是否有任何“技巧”来加快对非常大的背包组合类型概率的采样？

> ID：10611057
> 
> 赞同：12
> 
> 时间：2012-05-16T02:01:07.953
> 
> 标签：java, algorithm

更新：*我已经意识到由于涉及大量数据（15k+ 项），无法以当前形式回答以下问题。我刚刚发现，我要帮助的小组只是让它运行一个月，然后终止它以使用结果（这就是他们希望在更快的时间内获得更多结果的原因）。这对我来说似乎很疯狂，因为他们只使用前几组数据（大列表中的最后一项从未被使用过）。所以我正在修改这个问题以获得预期输出的样本（解决方案的近似值不是完整的解决方案）。在更短的时间内完成此任务的最佳方法是什么？他们似乎想要一个多样化的结果样本，是遗传算法起作用还是某种采样技术？问题的其余部分保持不变（相同的输入/输出），但我*

* * *

我的问题不完全是背包问题，但非常接近。基本上，我试图找到等于特定值的 X 项的每个组合。我从我的一个朋友那里听说了这个问题，他在一个小型学校研究实验室工作，这个过程在那里运行，大约需要 25 天才能完成。看起来真的很可怕，所以我主动提供帮助（对我有好处，我可以学习并帮助一些非常好的人），所以我想出了如何通过多线程来扩展它（我将包括下面的代码），这个将他们的处理时间缩短了几天，但我仍然不满意，所以我只是将我的代码移植到 GPU 上工作，但我并不满意（尽管他们很高兴，因为它更快，而且我捐赠了我的旧显卡）因为我只是利用硬件而不是任何算法。马上，

那么在这样的背景下，我能做些什么来加快算法速度吗？我的直觉告诉我不，因为因为他们需要每一种组合，所以从逻辑上讲，计算机必须处理每一种组合（数十亿），但我以前在这里看到了令人惊奇的事情，即使是很小的加速也可以在处理的天数内产生影响.

我喜欢超过 10 个版本的代码，但这里有一个使用多线程的 Java 版本（但它和 gpu 之间的逻辑几乎相同）。

基本逻辑：

```
for (int c = 100; c >= 0; c--) {
    if (c * x_k == current.sum) { //if result is correct then save
        solutions.add(new Context(0, 0, newcoeff));
        continue;
     } else if (current.k > 0) { //if result is not equal but not end of list then send to queue
         contexts.add(new Context(current.k - 1, current.sum - c * x_k, newcoeff));
     }
 } 
```

完整代码：

```
import java.util.Arrays;
import java.util.ArrayDeque;
import java.util.Queue;
import java.util.concurrent.ConcurrentLinkedQueue;
import java.util.concurrent.LinkedBlockingDeque;
import java.util.concurrent.Callable;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.ThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

public class MixedParallel
{
    // pre-requisite: sorted values !!
    private static final int[] data = new int[] { -5,10,20,30,35 };

    // Context to store intermediate computation or a solution
    static class Context {
        int k;
        int sum;
        int[] coeff;
        Context(int k, int sum, int[] coeff) {
            this.k = k;
            this.sum = sum;
            this.coeff = coeff;
        }
    }

    // Thread pool for parallel execution
    private static ExecutorService executor;
    // Queue to collect solutions
    private static Queue<Context> solutions;

    static {
        final int numberOfThreads = 2;
        executor =
            new ThreadPoolExecutor(numberOfThreads, numberOfThreads, 1000, TimeUnit.SECONDS,
                                   new LinkedBlockingDeque<Runnable>());
        // concurrent because of multi-threaded insertions
        solutions = new ConcurrentLinkedQueue<Context>();
    }

    public static void main(String[] args)
    {
        System.out.println("starting..");
        int target_sum = 100;
        // result vector, init to 0
        int[] coeff = new int[data.length];
        Arrays.fill(coeff, 0);
        mixedPartialSum(data.length - 1, target_sum, coeff);

        executor.shutdown();
        // System.out.println("Over. Dumping results");
        while(!solutions.isEmpty()) {
            Context s = solutions.poll();
            printResult(s.coeff);
        }
    }

    private static void printResult(int[] coeff) {
        StringBuffer sb = new StringBuffer();
        for (int i = coeff.length - 1; i >= 0; i--) {
            if (coeff[i] > 0) {
                sb.append(data[i]).append(" * ").append(coeff[i]).append(" + ");
            }
        }
        System.out.println(sb);
    }

    private static void mixedPartialSum(int k, int sum, int[] coeff) {
        int x_k = data[k];
        for (int c = 0; c <= 100; c++) {
            coeff[k] = c;
            int[] newcoeff = Arrays.copyOf(coeff, coeff.length);
            if (c * x_k == sum) {
                //printResult(newcoeff);
                solutions.add(new Context(0, 0, newcoeff));
                continue;
            } else if (k > 0) {
                if (data.length - k < 2) {
                    mixedPartialSum(k - 1, sum - c * x_k, newcoeff);
                    // for loop on "c" goes on with previous coeff content
                } else {
                    // no longer recursive. delegate to thread pool
                    executor.submit(new ComputePartialSum(new Context(k - 1, sum - c * x_k, newcoeff)));
                }
            }
        }
    }

    static class ComputePartialSum implements Callable<Void> {
        // queue with contexts to process
        private Queue<Context> contexts;

        ComputePartialSum(Context request) {
            contexts = new ArrayDeque<Context>();
            contexts.add(request);
        }

        public Void call() {
            while(!contexts.isEmpty()) {
                Context current = contexts.poll();
                int x_k = data[current.k];
                for (int c = 0; c <= 100; c++) {
                    current.coeff[current.k] = c;
                    int[] newcoeff = Arrays.copyOf(current.coeff, current.coeff.length);
                    if (c * x_k == current.sum) {
                        //printResult(newcoeff);
                        solutions.add(new Context(0, 0, newcoeff));
                        continue;
                    } else if (current.k > 0) {
                        contexts.add(new Context(current.k - 1, current.sum - c * x_k, newcoeff));
                    }
                }
            }
            return null;
        }
    }
} 
```

以下是数据/方法的一些特征：

*   所有数字都是短裤（似乎没有数字超过 +/- 200 的值）
*   有重复项（但没有零值）
*   for 循环将系数限制为 100（这是一个硬数字，并告诉它不会改变）。这限制了结果
*   项目数量有限制，但它是可变的，由我的朋友实验室决定。我一直在使用 2 对组合进行测试，但我的朋友告诉我他们使用 30-35 对（这不是涉及整个数据集的组合）。这也限制了结果失控
*   我的朋友提到他们所做的后处理涉及删除所有包含少于 30 个系数或超过 35 个系数的结果。在我当前的代码中，如果`newcoeff`变量超过一个数字（在本例中为 35），我会中断，但也许有一种方法甚至不处理结果低于 30。*这可能是减少处理时间的一个大领域。*现在看来，他们生成了大量无用的数据来获取他们想要的数据。
*   他们的数据集是 10k-15k 个项目（负/正）
*   我只收到 3 个项目，两个列表（一个数据和一个用于识别数据的 ID 号）和一个目标总和。然后我保存一个包含该列表中所有数据组合的文件。
*   我愿意在这里提供帮助，因为这部分花费了最长的时间，在数据传到我这里之前，他们会对其进行处理（尽管他们自己不会生成数据），一旦我将文件发送给他们，他们就会对其应用自己的逻辑并进行处理它。因此，我唯一关注的是获取 3 个输入并生成输出文件。
*   使用线程和 GPU 已将问题减少到在一周内完成，但我在这里寻找的是改进算法的想法，以便我可以利用软件而不仅仅是硬件 gpu 来提高速度。从代码中可以看出，它现在只是蛮力。所以理想情况下，我想要可以线程化的建议。

更新2：我认为问题本身很简单/很常见，但问题是大规模运行，所以这是我在进行测试时得到的真实数据（它没有它得到的那么大，但它大约有 3,000 个项目，所以如果你想测试您不必自己生成它）：

```
private static final int target_sum = 5 * 1000;
private static final List<Integer> data = Arrays.asList( -193, -138, -92, -80, -77, -70, -63, -61, -60, -56, -56, -55, -54, -54, -51, -50, -50, -50, -49, -49, -48, -46, -45, -44, -43, -43, -42, -42, -42, -42, -41, -41, -40, -40, -39, -38, -38, -38, -37, -37, -37, -37, -37, -36, -36, -36, -35, -34, -34, -34, -34, -34, -34, -34, -33, -33, -33, -32, -32, -32, -32, -32, -32, -32, -32, -31, -31, -31, -31, -31, -31, -31, -30, -30, -30, -30, -30, -29, -29, -29, -29, -29, -29, -29, -29, -29, -28, -28, -28, -28, -27, -27, -27, -27, -26, -26, -26, -26, -26, -26, -25, -25, -25, -25, -25, -25, -25, -25, -24, -24, -24, -24, -24, -24, -24, -24, -24, -24, -23, -23, -23, -23, -23, -23, -23, -23, -22, -22, -22, -22, -22, -22, -22, -22, -22, -21, -21, -21, -21, -21, -21, -21, -20, -20, -20, -20, -20, -20, -20, -19, -19, -19, -19, -19, -19, -19, -19, -19, -19, -19, -19, -19, -19, -18, -18, -18, -18, -18, -18, -18, -18, -18, -18, -18, -18, -18, -18, -18, -18, -18, -17, -17, -17, -17, -17, -17, -17, -17, -17, -17, -17, -17, -17, -17, -17, -17, -17, -16, -16, -16, -16, -16, -16, -16, -16, -16, -16, -16, -16, -16, -16, -16, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26, 26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28, 28, 29, 29, 29, 29, 30, 30, 30, 30, 30, 30, 30, 31, 31, 31, 31, 31, 32, 32, 32, 32, 33, 33, 33, 33, 34, 34, 34, 34, 34, 34, 34, 35, 35, 35, 35, 36, 36, 36, 36, 37, 37, 38, 39, 39, 39, 40, 41, 41, 41, 41, 41, 42, 42, 43, 43, 44, 45, 45, 46, 47, 47, 48, 48, 49, 49, 50, 54, 54, 54, 55, 55, 56, 56, 57, 57, 57, 57, 57, 58, 58, 58, 59, 60, 66, 67, 68, 70, 72, 73, 73, 84, 84, 86, 92, 98, 99, 105, 114, 118, 120, 121, 125, 156); 
```

我正在学习编程和算法，所以如果我遗漏了任何东西或没有意义的东西，请告诉我。请注意，我知道由于数据量大，这似乎是不可能的，但事实并非如此（我已经看到它运行并且它的变体已经运行了多年）。请不要让规模分散真正的问题，如果您使用 10 个变量并且它比我的 10 个变量蛮力快 10%，那么我相信它会在更大的数据上更快。我不是想把灯关掉，我在寻找可以提供更快结果的小改进（或更大的设计改进）。另外，如果有任何假设需要放松，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T05:34:31.293

这使用动态编程来解决您在示例中给出的相同问题。它已更新为通过跟踪值的索引而不是其值来处理重复值，并更正了忽略某些解决方案的错误。

```
public class TurboAdder {
    private static final int[] data = new int[] { 5, 10, 20, 25, 40, 50 };

    private static class Node {
        public final int index;
        public final int count;
        public final Node prevInList;
        public final int prevSum;
        public Node(int index, int count, Node prevInList, int prevSum) {
            this.index = index;
            this.count = count;
            this.prevInList = prevInList;
            this.prevSum = prevSum;
        }
    }

    private static int target = 100;
    private static Node sums[] = new Node[target+1];

    // Only for use by printString.
    private static boolean forbiddenValues[] = new boolean[data.length];

    public static void printString(String prev, Node n) {
        if (n == null) {
            System.out.println(prev);
        } else {
            while (n != null) {
                int idx = n.index;
                // We prevent recursion on a value already seen.
                if (!forbiddenValues[idx]) {
                    forbiddenValues[idx] = true;
                    printString((prev == null ? "" : (prev+" + "))+data[idx]+"*"+n.count, sums[n.prevSum]);
                    forbiddenValues[idx] = false;
                }
                n = n.prevInList;
            }
        }
    }

    public static void main(String[] args) {
        for (int i = 0; i < data.length; i++) {
            int value = data[i];
            for (int count = 1, sum = value; count <= 100 && sum <= target; count++, sum += value) {
                for (int newsum = sum+1; newsum <= target; newsum++) {
                    if (sums[newsum - sum] != null) {
                        sums[newsum] = new Node(i, count, sums[newsum], newsum - sum);
                    }
                }
            }
            for (int count = 1, sum = value; count <= 100 && sum <= target; count++, sum += value) {
                sums[sum] = new Node(i, count, sums[sum], 0);
            }
        }
        printString(null, sums[target]);

    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T04:28:30.927

您要解决的问题称为[数字分区](http://en.wikipedia.org/wiki/Partition_problem)。这是背包问题的一个特例。如果这些值都是整数并且您试图获得值 M，那么您可以在 O(n*M) 时间内找到一个解决方案。枚举所有组合可能是指数的，因为可能存在指数数量的解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T04:20:36.073

要使用动态规划解决此问题，所有成本都必须是非负整数，并且您需要一个数组，只要您尝试实现的总成本 - 数组的每个元素都对应于由其偏移量表示的成本的解决方案在数组中。由于您需要所有解决方案，因此数组的每个元素都应该是解决方案的最后一个组件的列表。您可以通过要求解决方案的最后一个组件的成本至少与解决方案的任何其他组件一样多来减小此列表的大小。

鉴于此，一旦您将数组填充到长度为 N，则通过考虑其 100 个多重性中的每一个的每个可能项来填充条目 N+1。对于每个这样的项目，您从 N+1 中减去（多重乘以成本），并看到要获得 N+1 的总成本，您可以使用该项目加上成本 N+1-thisCost 的任何解决方案。因此，您查看数组 - 回到您已经填写的条目 - 看看是否有 N+1-thisCost 的解决方案，如果有，以及当前的成本*多重性是否至少与某个项目一样高在数组[N+1-thisCost] 中，您可以在偏移量 N+1 处为 item、multiplicity 添加一个条目。

一旦您将数组扩展到您的目标成本，您就可以从 array[finalCost] 处理后备词，查看那里的答案并减去它们的成本以找出要查看的 array[finalCost - costOfAnswerHere] 以找到完整的解决方案。

这个解决方案没有明显的并行版本，但有时动态编程的加速足够好，它可能仍然更快——在这种情况下，很大程度上取决于最终成本有多大。

这与普通的动态编程有点不同，因为您想要每个答案 - 希望它仍然会给您带来某种优势。想一想，最好在数组中简单地设置一个可能/不可能标志，说明该数组的偏移是否有解决方案，然后在回溯时重复检查可能的组合。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-19T10:48:43.703

如果您不需要详尽而精确的解决方案，您可以尝试近似问题。然后程序将以伪多项式甚至多项式时间运行。

见[http://en.m.wikipedia.org/wiki/Knapsack_problem#Approximation_algorithms](http://en.m.wikipedia.org/wiki/Knapsack_problem#Approximation_algorithms)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-20T00:44:21.237

给出的样本数据中有 137 个唯一值（忽略重复）。

如果您承认可以通过调整系数将随机从数据中提取的 30 个不同值的几乎任何组合按摩成至少一个有效的解决方案，那么必须至少有 C(137,30)=1.54E30 个解决方案，恰好有 30 个术语（以及另一个 5.31E30 有 31 个术语，1.76E31 有 32 个术语，5.60E31 有 33 个术语等）。

因此，如果您的目标只是对有效解决方案的抽样，而不是不可能的详尽列表，那么我认为理想的方法是随机选择您的目标项数，然后调整它们的系数以达到目标值以产生单个样品，并重复所需数量的样品。

下面是一个应用这种技术的程序。在我相当普通的笔记本电脑（1.3Ghz AMD E-300）上，我在 2.249 秒内生成了 15000 个独特的解决方案，目标是每个样本 32 个术语。

```
import java.util.Arrays;
import java.util.HashMap;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Random;
import java.util.TreeMap;

public class ComboGen {

    private static final int[] data = { -193, -138, -92, -80, -77, -70, -63, -61, -60, -56, -56, -55, -54, -54, -51, -50, -50,
            -50, -49, -49, -48, -46, -45, -44, -43, -43, -42, -42, -42, -42, -41, -41, -40, -40, -39, -38, -38, -38, -37, -37,
            -37, -37, -37, -36, -36, -36, -35, -34, -34, -34, -34, -34, -34, -34, -33, -33, -33, -32, -32, -32, -32, -32, -32,
            -32, -32, -31, -31, -31, -31, -31, -31, -31, -30, -30, -30, -30, -30, -29, -29, -29, -29, -29, -29, -29, -29, -29,
            -28, -28, -28, -28, -27, -27, -27, -27, -26, -26, -26, -26, -26, -26, -25, -25, -25, -25, -25, -25, -25, -25, -24,
            -24, -24, -24, -24, -24, -24, -24, -24, -24, -23, -23, -23, -23, -23, -23, -23, -23, -22, -22, -22, -22, -22, -22,
            -22, -22, -22, -21, -21, -21, -21, -21, -21, -21, -20, -20, -20, -20, -20, -20, -20, -19, -19, -19, -19, -19, -19,
            -19, -19, -19, -19, -19, -19, -19, -19, -18, -18, -18, -18, -18, -18, -18, -18, -18, -18, -18, -18, -18, -18, -18,
            -18, -18, -17, -17, -17, -17, -17, -17, -17, -17, -17, -17, -17, -17, -17, -17, -17, -17, -17, -16, -16, -16, -16,
            -16, -16, -16, -16, -16, -16, -16, -16, -16, -16, -16, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15,
            -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -15, -14, -14, -14, -14,
            -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -14, -13, -13, -13, -13, -13, -13, -13,
            -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13, -13,
            -13, -13, -13, -13, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12, -12,
            -12, -12, -12, -12, -12, -12, -12, -12, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11,
            -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -11, -10, -10, -10, -10, -10,
            -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10, -10,
            -10, -10, -10, -10, -10, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9,
            -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9, -9,
            -9, -9, -9, -9, -9, -9, -9, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8,
            -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -8, -7,
            -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7,
            -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7,
            -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -7, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6,
            -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6,
            -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6, -6,
            -6, -6, -6, -6, -6, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5,
            -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5,
            -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5, -5,
            -5, -5, -5, -5, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4,
            -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4,
            -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4,
            -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4, -4,
            -4, -4, -4, -4, -4, -4, -4, -4, -4, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3,
            -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3,
            -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3,
            -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3,
            -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -3, -2, -2, -2, -2,
            -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2,
            -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2,
            -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2,
            -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2,
            -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -2, -1, -1, -1, -1, -1, -1,
            -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
            -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
            -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
            -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1,
            -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 1, 1, 1, 1, 1, 1,
            1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
            1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
            1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,
            1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2,
            2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
            2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
            2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
            2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3,
            3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
            3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
            3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,
            3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 4, 4, 4, 4,
            4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
            4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4,
            4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5,
            5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5,
            5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5, 5,
            5, 5, 5, 5, 5, 5, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,
            6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6,
            6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 6, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,
            7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7,
            7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 7, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,
            8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8,
            8, 8, 8, 8, 8, 8, 8, 8, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9,
            9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 9, 10, 10, 10, 10, 10, 10, 10,
            10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
            10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11,
            11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 11, 12, 12, 12, 12, 12, 12, 12, 12,
            12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 12, 13, 13, 13, 13, 13, 13, 13, 13, 13,
            13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 13, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14,
            14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 14, 15, 15, 15, 15, 15, 15, 15, 15, 15, 15,
            15, 15, 15, 15, 15, 15, 15, 15, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16, 16,
            16, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 18,
            18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21,
            21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 24,
            24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 25, 26, 26,
            26, 26, 26, 26, 27, 27, 27, 27, 27, 27, 27, 27, 27, 27, 28, 28, 28, 28, 28, 28, 29, 29, 29, 29, 30, 30, 30, 30, 30,
            30, 30, 31, 31, 31, 31, 31, 32, 32, 32, 32, 33, 33, 33, 33, 34, 34, 34, 34, 34, 34, 34, 35, 35, 35, 35, 36, 36, 36,
            36, 37, 37, 38, 39, 39, 39, 40, 41, 41, 41, 41, 41, 42, 42, 43, 43, 44, 45, 45, 46, 47, 47, 48, 48, 49, 49, 50, 54,
            54, 54, 55, 55, 56, 56, 57, 57, 57, 57, 57, 58, 58, 58, 59, 60, 66, 67, 68, 70, 72, 73, 73, 84, 84, 86, 92, 98, 99,
            105, 114, 118, 120, 121, 125, 156 };

    private static Map<Integer, Integer> buildCounts(int[] rawData) {
        Map<Integer, Integer> buckets = new TreeMap<Integer, Integer>();
        int i = 0;
        for (i = 0; i < rawData.length; i++) {
            if (buckets.containsKey(rawData[i])) {
                buckets.put(rawData[i], buckets.get(rawData[i]) + 1);
            } else {
                buckets.put(rawData[i], 1);
            }
        }
        weights = new int[buckets.size()];
        counts = new int[buckets.size()];
        i = 0;
        for (Entry<Integer, Integer> entry : buckets.entrySet()) {
            weights[i] = entry.getKey();
            counts[i] = entry.getValue();
            i++;
        }
        return buckets;
    }

    private static int[] weights;
    private static int[] counts;
    private static Random random = new Random(System.nanoTime());

    private static int[] placeChips(int[] chips, int targetPairs) {
        int unplaced = targetPairs;
        int[] placements = new int[unplaced];
        Arrays.fill(chips, 0);
        if (unplaced > chips.length) {
            throw new IllegalStateException("Coefficient pairs must not exceed unique data values.");
        }
        while (unplaced > 0) {
            int idx = random.nextInt(counts.length);
            if (chips[idx] == 0) {
                chips[idx] = 1 + random.nextInt(100);
                unplaced--;
            }
        }
        int ppos = 0;
        for (int cpos = 0; cpos < chips.length; cpos++) {
            if (chips[cpos] > 0) {
                placements[ppos++] = cpos;
            }
        }
        return placements;
    }

    static int sum(int[] chips) {
        int sum = 0;
        for (int i = 0; i < chips.length; i++) {
            sum += weights[i] * chips[i];
        }
        return sum;
    }

    public static void adjustFactors(int[] chips, int[] placements, int target) {
        int sum = sum(chips);
        Map<Integer, Integer> weightIdx = new HashMap<Integer, Integer>();
        for (int placement : placements) {
            weightIdx.put(weights[placement], placement);
        }
        while (sum != target) {
            // System.out.print(sum + ",");
            int idx = 0;
            if ((sum > target) && weightIdx.containsKey(sum - target) && (chips[weightIdx.get(sum - target)] > 1)) {
                idx = weightIdx.get(sum - target);
            } else if ((sum < target) && weightIdx.containsKey(sum - target) && (chips[weightIdx.get(sum - target)] > 1)) {
                idx = weightIdx.get(sum - target);
            } else if ((sum > target) && weightIdx.containsKey(target - sum) && chips[weightIdx.get(target - sum)] < 100) {
                idx = weightIdx.get(target - sum);
            } else if ((sum < target) && weightIdx.containsKey(target - sum) && chips[weightIdx.get(target - sum)] < 100) {
                idx = weightIdx.get(target - sum);
            } else {
                idx = placements[random.nextInt(placements.length)];
            }
            int weight = weights[idx];
            if (sum < target) {
                if (weight > 0 && chips[idx] < 100) {
                    chips[idx]++;
                    sum += weight;
                } else if (weight < 0 && chips[idx] > 1) {
                    chips[idx]--;
                    sum -= weight;
                }
            } else {
                if (weight > 0 && chips[idx] > 1) {
                    chips[idx]--;
                    sum -= weight;
                } else if (weight < 0 && chips[idx] < 100) {
                    chips[idx]++;
                    sum += weight;
                }
            }
        }
    }

    private static String oneRandomSet(int targetSum, int targetPairs) {
        int[] chips = new int[counts.length];
        int[] placements = placeChips(chips, targetPairs);
        adjustFactors(chips, placements, targetSum);
        int sum = sum(chips);
        StringBuffer sb = new StringBuffer();
        for (int placement : placements) {
            sb.append(weights[placement]);
            sb.append(" * ");
            sb.append(chips[placement]);
            sb.append(" + ");
        }
        sb.setLength(sb.length() - 2);
        sb.append(" = ");
        sb.append(sum);
        sb.append("\n");
        return sb.toString();
    }

    public static void main(String[] ARGV) {
        int targetSum = 5000;
        int targetPairs = 32;
        int targetResults = 15000; // Produce this many solutions
        buildCounts(data);
        StringBuffer sb = new StringBuffer();
        long timer = System.nanoTime();
        for (int i = 0; i < targetResults; i++) {
            sb.append(oneRandomSet(targetSum, targetPairs));
        }
        double seconds = (System.nanoTime() - timer) / 1000000000d;
        double millisPerSol = 1000 * seconds / targetResults;
        System.out.println(sb.toString());
        System.out.println(String.format("%d solutions in %1.3f seconds @ %1.3f millis per sol", targetResults, seconds,
                millisPerSol));
    }

} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-16T03:04:57.470

你可能想检查一下“[动态编程](http://en.wikipedia.org/wiki/Dynamic_programming)”的概念，动态编程与普通递归不同，主要是节省大量时间；因为它通过以二维数组的形式保存它们来避免重新计算值，所以本[教程](http://www.es.ele.tue.nl/education/5MC10/Solutions/knapsack.pdf)可能会对您有所帮助

注意：背包问题被认为是动态规划的入门问题，搜索“背包动态规划”会帮助你更多

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-23T23:31:09.983

I may be wrong but could this be viewed as a integer partition (was Triangle number, but I remembered I misremembered ) problem?

If that's the case, each entry would have a membership to a set of results for a given sum. Precalculating and caching the membership results for a given sum (yes a huge table) could form a very quick solution.

I could probably do it, but I'd need a large data set. Interesting though...

Consult the guru Knuth [http://cs.utsa.edu/~wagner/knuth/fasc3b.pdf](http://cs.utsa.edu/~wagner/knuth/fasc3b.pdf)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-18T05:42:44.963

编辑：我保留这个答案（至少现在）以保留评论线程

~~好的，我很困惑，但无论如何我都会发布我的想法，如果我错了，稍后编辑/删除它们。如果我真的离题很远，你可以这么说，我会删除整个答案。~~

~~首先，在我看来，由于零是一个有效的数据值，并且零适用于所有位置，因此您在计算所有这些组合时会遇到额外的麻烦。更糟糕的是，在我看来，您的算法有一个实际错误，因为它会错过一些组合，其中列表开头的项目组合总和为零，因为一旦找到项目组合，您就会终止该调查线程产生目标总和的列表的末尾。~~

接下来，在我看来，对于列表中的每个项目，您都在尝试 100 个（实际上是 101 个）不同的值：x*100、x*99、...、x*0。如果我是对的，那么问题空间的大小是 100^n，其中 n 是数据元素的数量。对于 n=100 更不用说 n=10,000，您无法检查它。您的程序甚至可能终止的唯一方法是因为您在列表末尾找到总和并终止这些调查线程。（哦，对了，现在你告诉我，当非零系数的元素数量超过 3、没有 50、没有 60、没有某个变量数时，你会终止线程。问题空间仍然太大。）

~~事实上，据我统计，您的测试数据有 283 个零。因此，您可以将这些数据元素乘以 [1,100] 的 100^283 个组合添加到您获得的任何其他答案中。假设宇宙中的粒子数量估计为 10^80，100^283 种组合将不可能打印在纸上。~~

~~否则我搞错了。如果是这样，请提示我。~~

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-19T06:27:57.060

您的代码与您的问题陈述不匹配，因此不清楚如何继续。

您说数据列表包含负值并包含重复项。你举一个例子，两者兼而有之。实际上，这些值仅限于 [-200,200] 范围内的非零整数，但数据列表至少为 2,000，通常为 10,000 或更多，因此必须有重复项。

让我们回顾一下您的“基本逻辑”：

```
for (int c = 100; c >= 0; c--) {
    if (c * x_k == current.sum) { //if result is correct then save
        solutions.add(new Context(0, 0, newcoeff));
        continue;
     } else if (current.k > 0) { // recurse with next data element
         contexts.add(new Context(current.k - 1, current.sum - c * x_k, newcoeff));
     }
} 
```

在其他地方，您声明数据必须按数字顺序排序，并且您从列表的尾部开始，k = n -1（因为零索引），所以您首先从最大的开始。该`then`子句终止递归。虽然这在您正在解决的问题中可能很好，但这不是您所描述的问题，因为它忽略了总和为零的较小数据值的所有组合。

另一方面，将包括所有总和为零的较大值的组合。

例如，让我们看一下示例列表中的最后一项，156，目标总和为 5000。

156 * 100 = 15600 所以在你输入负数之前它不会匹配目标总和。当然

```
(100 * -100) + (100 * -6) + (100 * 156) = 5000 
```

这种组合有效。（您的示例数据集不包括 -100，但它确实有两个 -40 和一个 -20，因此如果您想忠实于数据集，请将它们组合起来。我使用 -100 来保持示例简单因为你说数据集可能包括-100。）

但是当然

```
(100 * -100) + (100 * -6) + (c * -1) + (c * 1) + (100 * 156) = 5000 
```

对于任何 c，因此输出中将有 100 个这样的组合（1 <= c <= 100）。但是数据集中有 50 个。当你达到 100 * 50 = 5000 时，你会终止递归，所以你永远不会得到

```
(c * -1) + (c * 1) + (100 * 50) = 5000 
```

因此，您的代码或问题陈述都有问题。可能两者兼而有之，因为即使不考虑系数，10,000 个项目一次取 60 个会产生大约 10^158 个组合，但除了递归的提前终止之外，我认为没有任何东西可以阻止您测试所有这些组合的总和，即使计算值的成本为零，您也无法进行那么多比较。

# configuration - 如何确定用户的“初始化并编写未标记为安全的 ActiveX 控件的脚本”的 IE 设置

> ID：10611064
> 
> 赞同：1
> 
> 时间：2012-05-16T02:01:52.583
> 
> 标签：configuration, vbscript, activex

我有这样的代码，它可以从我们的 Intranet 打开 Word 文档进行编辑，显然是在单击相关按钮时调用的：

```
 Dim objWord
  Sub Btn956_onclick()
    call OpenDoc("\\server01\folder1\docname.docx")
  End Sub
  Sub OpenDoc(strLocation)
    Set objWord = CreateObject("Word.Application")
    objWord.Visible = true
    objWord.Documents.Open strLocation
  End Sub 
```

为了让它在 IE（我们的员工标准浏览器）中工作，我需要让他们一次性更改他们的互联网安全设置（否则他们只会收到一个 javascript 错误）。特别是，Intranet 区域的“初始化和编写未标记为安全的 ActiveX 控件”设置从禁用更改为启用。

为了帮助用户在没有技术帮助的情况下更新此设置，我需要一种方法来通知他们在设置不正确时需要更改设置。**有没有一种方法可以以编程方式检测到上述 OpenDoc 命令失败，因为他们没有更新他们的设置？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T07:18:18.470

您必须阅读注册表才能这样做。但是操作系统和IE版本依赖的地方。例如，对于 IE6 HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\Internet Settings 和 HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Windows\CurrentVersion\Internet Settings 以及其他可能也是如此。

这也取决于您的站点所在的安全区域。要读取脚本中的注册表，用户需要足够的权限。另一方面，如果用户有足够的权限，你可以从你的脚本中设置设置，他应该只需要确认一些我认为的提示。

我认为您最好的选择是使用组策略正确设置设置并将这些设置分发到工作站。如果您不使用组策略，您可以通过登录脚本或让他们通过双击手动加载 .reg 文件来寻找和测试正确的注册表项和分发。

# java - 如何在 Java Netbeans 代码中运行 reg 文件

> ID：10611067
> 
> 赞同：0
> 
> 时间：2012-05-16T02:02:15.740
> 
> 标签：java, netbeans, registry

请帮我解决：如何在 java netbeans 中运行 .reg 文件？如果我在不同的计算机上打开程序，如何自动设置源文件？

我有一个这样的 reg 文件：

```
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services\USBSTOR]
"Start"=dword:00000004 
```

这是我的 Java 代码：

```
/**
 * Creates new form Form_DisableEnable
 */
public Form_DisableEnable() {
    initComponents();

    Dimension x = Toolkit.getDefaultToolkit().getScreenSize();
    Dimension y = getSize();
    setLocation(
    (x.width - y.width)/2,
    (x.height - y.height)/2);
}

/**
 * This method is called from within the constructor to initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is always
 * regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jButton1 = new javax.swing.JButton();
    jButton2 = new javax.swing.JButton();
    jTextField1 = new javax.swing.JTextField();
    jLabel1 = new javax.swing.JLabel();
    jMenuBar1 = new javax.swing.JMenuBar();
    jMenu1 = new javax.swing.JMenu();
    jMenuItem2 = new javax.swing.JMenuItem();
    jMenu2 = new javax.swing.JMenu();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
    setTitle("Disable/Enable USB");

    jButton1.setText("Disable");
    jButton1.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton1ActionPerformed(evt);
        }
    });

    jButton2.setText("Enable");

    jLabel1.setText("IP Address");

    jMenu1.setText("File");

    jMenuItem2.setText("Sign out");
    jMenuItem2.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jMenuItem2ActionPerformed(evt);
        }
    });
    jMenu1.add(jMenuItem2);

    jMenuBar1.add(jMenu1);

    jMenu2.setText("Helps");
    jMenuBar1.add(jMenu2);

    setJMenuBar(jMenuBar1);

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(37, 37, 37)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                .addComponent(jLabel1)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addGroup(layout.createSequentialGroup()
                        .addComponent(jButton1)
                        .addGap(18, 18, 18)
                        .addComponent(jButton2))
                    .addComponent(jTextField1)))
            .addContainerGap(213, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addGap(25, 25, 25)
            .addComponent(jLabel1)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
            .addComponent(jTextField1, javax.swing.GroupLayout.PREFERRED_SIZE, 32, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                .addComponent(jButton1)
                .addComponent(jButton2))
            .addContainerGap(168, Short.MAX_VALUE))
    );

    pack();
}// </editor-fold>

private void jMenuItem2ActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
    if(JOptionPane.showConfirmDialog(null,"Are You sure want to logout ? ","Caution",
            JOptionPane.OK_CANCEL_OPTION,JOptionPane.INFORMATION_MESSAGE)==JOptionPane.OK_OPTION) {
        LoginForm dexs=new LoginForm();
        dexs.setVisible(true);
        this.dispose();
    }
}

private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    // TODO add your handling code here:
}

/**
 * @param args the command line arguments
 */
public static void main(String args[]) {
    /*
     * Set the Nimbus look and feel
     */
    //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
    /*
     * If Nimbus (introduced in Java SE 6) is not available, stay with the
     * default look and feel. For details see
     * http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html
     */
    try {
        for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
            if ("Nimbus".equals(info.getName())) {
                javax.swing.UIManager.setLookAndFeel(info.getClassName());
                break;
            }
        }
    } catch (ClassNotFoundException ex) {
        java.util.logging.Logger.getLogger(Form_DisableEnable.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (InstantiationException ex) {
        java.util.logging.Logger.getLogger(Form_DisableEnable.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        java.util.logging.Logger.getLogger(Form_DisableEnable.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    } catch (javax.swing.UnsupportedLookAndFeelException ex) {
        java.util.logging.Logger.getLogger(Form_DisableEnable.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
    }
    //</editor-fold>

    /*
     * Create and display the form
     */
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new Form_DisableEnable().setVisible(true);
        }
    });
}
// Variables declaration - do not modify
private javax.swing.JButton jButton1;
private javax.swing.JButton jButton2;
private javax.swing.JLabel jLabel1;
private javax.swing.JMenu jMenu1;
private javax.swing.JMenu jMenu2;
private javax.swing.JMenuBar jMenuBar1;
private javax.swing.JMenuItem jMenuItem2;
private javax.swing.JTextField jTextField1;
// End of variables declaration} 
```

提前致谢。问候，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:34:43.557

试试这个来导入注册表文件：

```
Desktop.getDesktop().open(new File("c:/file.reg")); 
```

如果文件在 jar 中，那么您可能需要将其写入临时文件并打开该文件。

编辑：

尝试类似于以下代码片段来加载注册表文件，将其复制到临时文件，然后使用默认注册表编辑器打开临时文件：

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    loadRegFile("/resource/disable.reg");
}

public void loadRegFile(String filePath){
    try {
        //create temp file
        File temp = File.createTempFile("temp", ".reg");
        temp.deleteOnExit();

        BufferedWriter out = new BufferedWriter(new FileWriter(temp));

        //load an appropriate registry file
        InputStream in = getClass().getResourceAsStream(filePath);
        //copy to temp file
        IOUtils.copy(in,out); 
        out.close();

        //open using regedit
        Desktop.getDesktop().open(temp);
    } catch (IOException ex) {
        ex.printStackTrace();
    }
} 
```

# squarespace - 为什么我的原始 HTML 内容出现在页脚下方？

> ID：10611070
> 
> 赞同：1
> 
> 时间：2012-05-16T02:02:53.493
> 
> 标签：squarespace

我的 SquareSpace 网站上有一个原始的 HTML 页面，我在里面建了一个表格。

出于某种原因，我的 SquareSpace 页脚（以及随之而来的所有间距）出现在我正在编写的 HTML 之上。

我怀疑是`<table>`标签本身导致了问题，因为`<h2>`标签和随附的内容出现在页脚上方。如果我使用另一个常见的标签，比如`<b>`，它也会出现在页脚上方。

有任何想法吗？

[这是有问题的页面](http://www.etpnebraska.com/products/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T02:14:33.780

你忘记了结束标签

```
 <td><p>230 VAC<br />

                          32 A</p></td>

                        <td><p>IEC 62196-2 <br />

                          e-mobility Type-2</p></td>

                        <td><p>Bollard</p></td>

                        <td>Europe</td>

                        <td><img src="http://i.imgur.com/UI7oC.jpg" width="50" height="80" alt="CT2500" /></td>

                      </tr>
[needs a closing table tag here]

</div></div> <!-- Content -->

    </div></div> <!-- Page Body -->

    <div id="pageFooterWrapper"><div id="pageFooter">

              Copyright &copy; 2012, Electric Transportation Partners | Nebraska.  All rights reserved.

    </div></div> 
```

# php - PHP XML 调用属性

> ID：10611072
> 
> 赞同：1
> 
> 时间：2012-05-16T02:03:08.683
> 
> 标签：php, xml

*我发布了类似这样的内容，没有任何回应，但这是因为我没有提供足够的数据。我关闭了那个并做了这个，因为它更好地描述了。我不打算做这个。*

我的代码：

```
 <?php
$q = $_GET['q'];
$xml = simplexml_load_file("http://ws.spotify.com/search/1/track?q=".$q."");

echo $xml->tracks . "<br />";
$num = 0;
foreach($xml->children() as $child){
    $num ++;
    if($num < 5){
        echo "<a href='".$child->attributes(href)."' title=''>".$child->name . " by " . $child->artist->name . "</a><br />";
    }
}

 ?> 
```

我试图将“href”的属性称为轨道。

在 Spotify 的网站上，他们显示：

```
<?xml version="1.0" encoding="utf-8"?>
<tracks xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/" xmlns="http://www.spotify.com/ns/music/1">
  <opensearch:Query role="request" startPage="1" searchTerms="foo"/>
  <opensearch:totalResults>768</opensearch:totalResults>
  <opensearch:startIndex>0</opensearch:startIndex>
  <opensearch:itemsPerPage>100</opensearch:itemsPerPage>
  <track href="spotify:track:3ZsjgLDSvusBgxGWrTAVto">
    <name>The Pretender</name>
    <artist href="spotify:artist:7jy3rLJdDQY21OgRLCZ9sD">
      <name>Foo Fighters</name>
    </artist>
    <id type="isrc">USRW30700007</id>
    <id type="isrc">USRW30700007</id>
    <track-number>1</track-number>
    <length>269.373000</length>
    <popularity>0.79251</popularity>
  </track>
  ...
</tracks> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T02:06:40.787

SimpleXML 中的属性非常“简单”；-)

```
foreach ($xml->children() as $child) {
    ...
    $href = (string)$child['href'];
} 
```

# java - 使用 weblogic 的 JTA 事务无法按预期工作

> ID：10611074
> 
> 赞同：0
> 
> 时间：2012-05-16T02:03:32.223
> 
> 标签：java, jakarta-ee, weblogic, jta

我的应用程序已锁定数据库表，因为 JTA 尚未使用回滚或提交命令完成您的操作。

该应用程序在具有两个托管服务器的集群中运行在 weblogic 10.3 上。

可以访问数据库的方法是同步的，其中方法内部的第一部分执行查询，第二部分调用另一个方法来执行合并。这个方法有注解@Transaction(read-only=false)。

JTA 事务由 weblogic 执行。

我的问题是，根据所描述的场景，什么可能会在数据库中生成锁？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T02:45:10.523

在我看来是一个线程问题，没有获得锁。

> 可以访问数据库的方法是同步的，其中方法内部的第一部分执行查询，第二部分调用另一个方法来执行合并。

检查两个方法是否需要两个不同的锁，如果是则可能导致死锁，如果方法1中的线程一直等待锁访问方法2。

# hibernate - Hibernate 抱怨未定义的别名。这是什么意思？

> ID：10611078
> 
> 赞同：1
> 
> 时间：2012-05-16T02:04:52.630
> 
> 标签：hibernate

我在数据库中有一个没有休眠映射的表。我试图使用以下代码对表进行查询：

```
List theList = session().createSQLQuery("select field_A from table_A").list(); 
```

我得到这个错误：

```
org.hibernate.QueryException: undefined alias: field_A [select field_A from table_A] 
```

我真的不明白这是什么意思。我可以知道解决此问题的最佳方法是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:53:56.743

我已经解决了问题。解决方案如下：

```
List theList = session()
   .createSQLQuery("select * from table_A")
   .addScalar("field_A", Hibernate.STRING)
   .list(); 
```

此代码来自此[Hibernate 文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querysql.html "休眠文档")

# facebook - 如何自动播放嵌入的 Facebook 视频？

> ID：10611081
> 
> 赞同：10
> 
> 时间：2012-05-09T18:33:54.910
> 
> 标签：facebook, video

此[页面](http://www.labnol.org/internet/embed-facebook-videos-in-web-pages/9715/)显示如何为任何 Facebook 视频创建嵌入代码以将它们嵌入外部网站。

有没有办法在页面加载时自动开始播放？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2016-05-22T21:11:30.473

对我来说最好的方法是使用这样的 Facebook URL：[https ://www.facebook.com/v2.3/plugins/video.php?allowfullscreen=true&autoplay=true&container_width=800&href=https%3A%2F%2Fwww.facebook .com%2Fredbull%2Fvideos%2F10155801793140352%2F&locale=en_US&sdk=joey](https://www.facebook.com/v2.3/plugins/video.php?allowfullscreen=true&autoplay=true&container_width=800&href=https%3A%2F%2Fwww.facebook.com%2Fredbull%2Fvideos%2F10155801793140352%2F&locale=en_US&sdk=joey)

它比嵌入网址更好。视频适合视口，您可以使用查询字符串/参数控制自动播放。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-15T19:06:35.920

不幸的是，[Facebook 的政策](https://www.google.co.uk/search?rlz=1C1SKPM_enGB448GB448&sourceid=chrome&ie=UTF-8&q=facebook%20autoplay%20media#q=facebook%20policy%20%22autoplay%22%20site:facebook.com&hl=en&rlz=1C1SKPM_enGB448GB448&prmd=imvns&ei=n6ayT9DqF4jDhAezn6Fv&start=0&sa=N&bav=on.2,or.r_gc.r_pw.r_cp.,cf.osb&fp=9d1b2ebaf21cf886&biw=1920&bih=955)禁止自动播放内容（谢天谢地）。

我试图追踪实际的政策文件，但它被人们谈论它在 Facebook 上被禁止的 SERPS 噪音淹没了！！[您可以在StackOverflow](https://stackoverflow.com/questions/8403320/facebook-pages-and-flash-content-autoplay)和[WebApps](https://webapps.stackexchange.com/questions/17818/what-is-considered-media-when-referring-to-facebook-pages-autoplay-policy)上找到支持这一概念的问题。

StackOverflow 是官方的 Facebook 开发人员支持渠道，因此他们的用户可能会了解更多有关该主题的信息。

也有可能一些 jQuery 能够伪造点击，但 facebook 更新它的代码如此频繁，以至于我怀疑任何黑客都会持续很长时间。

最佳答案是使用 YouTube 或其他允许您在他们的网络之外分享的频道。对于显然对在其自身边界之外共享视频不感兴趣的网络，不要依赖一种骇人听闻的解决方案。

用户可以轻松更改其视频的隐私设置，如果嵌入内容变得流行，Facebook 可能会尝试破坏嵌入内容的能力。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T19:26:20.220

对于 Youtube，`&autoplay=1`在用于自动播放视频的 URL 末尾添加。例如：

如果访问视频的 URL 是：

```
http://www.youtube.com/v/xxx
```

自动播放网址为：

```
http://www.youtube.com/v/xxx&autoplay=1
```

以上适用于 Youtube，但 Facebook 有点不同：

在代码的嵌入部分中自动播放您网站上的视频，添加以下参数：

```
<param name="autoplay" value="true"> 
```

此方法也适用于其他网站，主要是那些使用基于 Flash 的视频播放器的网站。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-02T07:11:48.243

从今天最新的 Facebook SDK 开始，您可以通过将 data-autoplay="true" 添加到嵌入代码的 div 标签来被动地自动播放视频。

参考：[https ://developers.facebook.com/docs/plugins/embedded-video-player](https://developers.facebook.com/docs/plugins/embedded-video-player)

我刚刚在我自己的项目中实现了这一点，它确实有效，但到目前为止它只会被动播放（在静音模式下）。这与您在 Facebook 上滚动浏览新闻提要时所看到的体验相似。用户必须手动取消视频静音。

我希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-15T21:10:58.523

> 等待点击
> 
> 指示是否在允许时自动播放 Flash 对象 (false)。出于安全和美观的原因，false 在配置文件中不起作用，除非在 AJAX 调用之后。默认值为真

[https://developers.facebook.com/docs/reference/fbml/swf/](https://developers.facebook.com/docs/reference/fbml/swf/)

您必须将示例代码从底部更改为 facebook 视频，就像在您提供的链接中解释的那样。

没试过，但也许有帮助

问候

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T19:47:51.513

由于我没有视频 ID，因此无法对其进行测试，但添加“播放”或“自动播放”参数可能会起作用：

```
<object width="400" height="224" >
 <param name="allowfullscreen" value="true" />
 <param name="allowscriptaccess" value="always" />
 <param name="movie" value="http://www.facebook.com/v/xxx" />
 <param name="autoplay" value="true" />
 <embed src="http://www.facebook.com/v/xxx" type="application/x-shockwave-flash"
   allowscriptaccess="always" allowfullscreen="true" width="400" height="224" autoplay="true">
 </embed>
</object> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-29T16:57:28.643

这里的答案有些过时，所以只要有更新的答案，您可以查看[Facebook 文档](https://developers.facebook.com/docs/plugins/embedded-video-player "Facebook 开发人员 - 嵌入式视频播放器")了解所有详细信息。

**TL;博士：**

这是从 Facebook 嵌入视频的样子：

```
<html>
<head>
  <title>Your Website Title</title> 
</head>
<body>

  <!-- Load Facebook SDK for JavaScript -->
  <div id="fb-root"></div>
  <script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.6";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));</script>

  <!-- Your embedded video player code -->
  <div class="fb-video" data-href="https://www.facebook.com/facebook/videos/10153231379946729/" data-width="500" data-show-text="false">
    <div class="fb-xfbml-parse-ignore">
      <blockquote cite="https://www.facebook.com/facebook/videos/10153231379946729/">
        <a href="https://www.facebook.com/facebook/videos/10153231379946729/">How to Share With Just Friends</a>
        <p>How to share with just friends.</p>
        Posted by <a href="https://www.facebook.com/facebook/">Facebook</a> on Friday, December 5, 2014
      </blockquote>
    </div>
  </div>

</body>
</html> 
```

**以下 html 标记可让您将自动播放设置为 true：**

```
<div class="fb-video" data-href="<video-post-url>" data-autoplay="true"> 
```

的默认值`data-autoplay`当然是`false`。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-05-15T17:55:18.640

您嵌入哪些视频并不重要。添加代码

**&自动播放=1**

到您要嵌入的视频的 URL 末尾应解决问题并允许视频自动播放。

# java - 在Android中编译java文件后的注释会发生什么？

> ID：10611087
> 
> 赞同：10
> 
> 时间：2012-05-16T02:05:15.827
> 
> 标签：java, android, compiler-construction, comments, apk

Android 编译器是如何工作的？它会在编译时删除 Java 代码和 Android XML 文件中的注释吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-16T02:31:53.850

Java 文件中的注释在编译成类文件时会被删除或忽略。类文件不是供人类阅读的——它们经过优化以在虚拟机上高效运行。如果要保留注释，它们只会导致类文件大于所需的大小，并且没有额外的好处（即编译器和虚拟机不理解注释，所以为什么要包含它们）

对于 XML 文件，通常会保留注释。编译后的类文件只有一个用途（在虚拟机上运行），而 XML 文件可以用于多种用途。例如，您可以将 XML 文件加载到应用程序中并对其进行操作。根据应用程序中 XML 文件的使用情况，可能需要在其中保留注释 - 事实上，您的应用程序可能会专门寻找注释。因为 XML 文件可能有广泛的用途，所以不会从 XML 文件中删除注释，以防它们被用于其他目的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-16T02:19:52.727

文件的字节码/.class 版本中不存在注释。编译时编译器会忽略注释。

编译器的工作方式是将所有高级语言代码转换为机器可理解的代码......一次全部......不像解释器那样逐行......在Android的情况下......编译器将.java源文件转换为它的字节码/.class 文件..然后是 .dex 文件（Dalvik 可执行文件）.. Android 中的所有应用程序都运行在一个名为 Dalvik 虚拟机的虚拟机之上，该虚拟机需要 .dex 文件..

尝试使用任何存档器打开一个 zip 之类的 apk 文件 .. 你会在其中看到 classes.dex 文件..

就 xml 文件而言 .. 仅当您在屏幕上显示某些内容（即正在呈现的活动）时，应用程序才会使用它们..所以在显示活动时..其对应的 xml 文件用于构建 UI .. 这个过程称为充气！

编辑：[但我现在记得的一点是......Android手机中存在的系统应用程序......例如所有谷歌提供的应用程序（Gmail，地图等）......联系人，Phone.apk等......所有这些都是系统apks..存在于/system/app/目录中..它们可能包含也可能不包含.dex文件。

如果它们在 apk 文件中包含 .dex（就像我们开发的任何普通应用程序一样）..那么 ROM 被称为 de-odexed ROM（Android 操作系统的固件）.. 但这反过来会导致启动速度变慢由于将所有 .dex 文件从系统 .apk 文件复制到 dalvik 缓存，因此第一次安装 ROM。因为在系统启动/引导时需要系统 apk 的所有 .dex 文件。

但是如果 ROM 是 odexed .. 系统 .apk 的所有 .dex 文件都不存在于 .apk 中，而是作为 /system/app/ 目录中的单独文件 .. 扩展名为 .odex

对于您和我开发的所有应用程序（非系统应用程序）.​​.只是 Play 商店的应用程序..这些确实包含 .apk 内的 .dex ]

编辑：我知道它与工作或问题没有太大关系..但只是想提一下 .dex 文件在 sys 和非 sys 应用程序中的位置差异！:)

希望它有所帮助！:)

# windows - 如何找出在Windows中打开的EXE

> ID：10611088
> 
> 赞同：3
> 
> 时间：2012-05-16T02:05:26.253
> 
> 标签：windows, winapi, file-io

当您尝试在 Windows 资源管理器中删除一个文件并且该文件正在使用中时，它会弹出一个对话框，说明**文件正在使用**中，并继续为您提供打开该文件的文件名。

例如，

[![例子](../Images/e4c365b62c73856885b3cb711d5657bd.png)](https://i.stack.imgur.com/WIqwR.png)

我见过涉及内核驱动程序的黑客攻击，但如果 Windows Explorer 可以做到，那么一定有更简单的方法。

获取此信息的最佳和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T03:30:41.777

从 windows vista 开始，您可以使用该[`IFileIsInUse`](http://msdn.microsoft.com/en-us/library/bb775874%28v=vs.85%29)界面，如果您想支持旧版本的 windows，您可以使用[NtQuerySystemInformation](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724509%28v=vs.85%29.aspx)、[NtQueryInformationFile](http://msdn.microsoft.com/en-us/library/windows/hardware/ff556646%28v=vs.85%29.aspx)和[NtQueryObject](http://msdn.microsoft.com/en-us/library/bb432383%28v=vs.85%29.aspx) WinApi 函数，有关此主题的更多信息，请查看我对这个[问题](https://stackoverflow.com/questions/8726906/delphi-finding-the-process-that-is-accessing-a-file-from-my-program)的回答。

# facebook - “登录 facebook”按钮在 iPhone 上不显示，在 iPad 上显示

> ID：10611090
> 
> 赞同：0
> 
> 时间：2012-05-16T02:05:43.180
> 
> 标签：facebook, webview, foursquare, appcelerator-mobile

我正在使用 Appcelerator 创建一个应用程序。在我的应用程序中，我会要求用户使用 Foursquare 登录。

我正在使用 webView 访问 Foursquare 的登录页面并访问以下 URL：

```
https://foursquare.com/oauth2/authenticate?client_id=MY_CLIENT_ID&response_type=token&redirect_uri=MY_REDIRECT_URI 
```

但是，我注意到 iPhone 和 iPad 的行为有所不同。

这是 iPhone 上的登录屏幕：

![在此处输入图像描述](../Images/aab879b3a7ffca0dd3879631458a0200.png)

这是 iPad 上的登录屏幕：

![在此处输入图像描述](../Images/da0a957f264be9202d586fc2b7adb2b2.png)

所以，我的问题是：有没有办法在 iPhone 上显示“登录 Facebook”按钮？

提前致谢，

杰伊桑托斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:26:10.957

听起来像是四方正在做的事情。我没有我之前发送过 httpClient 请求并且您能够修改用户代理字符串。也许不显示，因为 iPhone 会显示按钮，但它很可能在手机上看起来不正确。

Titan 内置支持添加 facebook 登录按钮。不完全确定 oauth 是如何工作的，但你可以添加这个按钮（比如在 iphone 上作为右导航按钮），然后如果用户以这种方式登录，oauth 令牌是否会正确保存到foursquare，用户登录？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T02:27:57.050

您可以通过将 display=touch 添加到查询字符串来使其始终*不*显示 facebook 选项，但其他显示似乎被忽略，而不是让您覆盖移动浏览器检测。

# python - 如何在 OS X 10.7 上安装 libz.1.2.3.dylib？

> ID：10611099
> 
> 赞同：0
> 
> 时间：2012-05-15T22:40:01.437
> 
> 标签：python, gzip, iphone

我想安装 libz.1.2.3.dylib 以用于构建 iPhone 应用程序。OS X 10.7.4 有 libz.1.2.5.dylib。但是，我将压缩数据发送到的服务器具有 zlib 1.2.3（由 Python 使用）。而且，当它尝试解压缩 gzip 压缩的数据时，会出现错误：

```
encoded = 'H4sIAAAAAAAAA4uuVspTslLySi0uTlVwSs0rSS0qUdJRygSKGQHpAiWraCVDS0MTY0MLUwszc6XYWh2ojvyMPAX3osSMxFyoekO4egsTc1NjY3NLCxOE+qDEvJR8BZfSlFSoclNDA2O4DnMLc3MDCwMDAwugjlgAp2IZdpUAAAA='
>>> decoded = base64.b64decode(encoded)>>> zlib.decompress(decoded)Traceback (most recent call last):
 File "<stdin>", line 1, in <module>
zlib.error: Error -3 while decompressing data: incorrect header check
>>> zlib.decompress(decoded, 16)Traceback (most recent call last):
 File "<stdin>", line 1, in <module>
zlib.error: Error -2 while preparing to decompress data 
```

但是，它适用于我本地机器上的 Python。

所以，我猜想用 libz.1.2.3.dylib 构建 iOS 应用程序会解决问题。如果这是最好的方法，我该如何安装？否则，有没有办法让 zlib 1.2.5（在 OS X 10.7 上）与 libz 1.2.3（在服务器上）配合得很好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T05:13:29.507

不幸的是，您的猜测不正确。所有版本的 zlib 都可以解压缩所有其他版本的 zlib 产生的压缩数据，向前和向后。回到 1.2.3 将无济于事。

问题是您有一个 gzip 流，但您要求 zlib 将其解码为 zlib 流。gzip 和 zlib 是 deflate 压缩数据的不同包装器。您需要让 zlib 解码 gzip 流。

您可以使用`wbits`参数执行此操作。试试`zlib.decompress(decoded, 31)`。

**更新：**

[我查看了他们 zlib 模块上](http://docs.python.org/library/zlib.html)的 Python文档，这太可怕了。设计也有问题。该页面的标题为“12.1.zlib — 与 gzip 兼容的压缩”。然而`zlib.compress`and`zlib.compressobj`函数压缩为 zlib 格式，与 gzip*不*兼容！此外，似乎没有办法提供`zlib.compress`生成 gzip 格式的选项，而[实际的 zlib 库](http://zlib.net/)支持这种格式。（与上面提到的选项没有什么相似之处，`zlib.decompress`实际上它确实允许解码 gzip 输入。）

`wbits`参数的文档`zlib.decompress`没有提到`wbits`超过 15 的值的可能性以及它们的作用。事实上，它说最高值为 15。

为 提供`wbits`参数是没有意义的`zlib.decompress`，但不是`zlib.compress`。通常值 (8..15) 的全部意义在于允许生成需要较少内存来解压缩的压缩流。如果你不能生产它们，那么你永远不会提供`wbits`8..14 的参数并期望它能够工作。

负值的文档`wbits`说标准 gzip 标头被禁止。他们设法在那一次犯了两个错误。首先，抑制是压缩器会做的事情，通过抑制放气数据周围的包装器。在这种情况下，解压缩器只是解码原始 deflate 数据，而不是寻找包装器。其次，如果由 生成，它将是一个 zlib 包装器，而`zlib.compress`不是模块无论如何都无法生成的 gzip 包装器。

我想我现在就停止阅读它，因为我一直在寻找问题。

# emacs - 初始化文件未在 Emacs 中加载？

> ID：10611102
> 
> 赞同：0
> 
> 时间：2012-05-16T02:07:11.030
> 
> 标签：emacs, initialization

我正在尝试完成让 Emacs 作为 Python IDE 工作的复杂过程。但是，该`.emacs`文件似乎没有加载。`Ctrl`- `h`，`v`向我展示`user-init-file`了它应该是什么，`/home/txx/.emacs`。但是，我的`load-path`不包括我想要的，例如`~/.emacs.d/`.

我`.emacs`文件中的代码很长，所以我把它放在[Pastebin](http://pastebin.com/PpXW3nnW)中。

我正在使用 Fedora 16。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T03:16:53.160

从您的`Pastebin`- 看起来好像您要添加到您的路径周围的双引号`load-path`无法识别。

```
(add-to-list 'load-path “~/.emacs.d/”) 
```

您应该使用标准`"`（稍后在 .emacs 中使用）。

至少，这解决了我在尝试加载 .emacs 时遇到的第一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T13:22:08.167

注意：您真的不希望该`~/.emacs.d`目录位于您的. 中`load-path`，相信我（如果您这样做，迟早会遇到奇怪的不当行为）。如果您想将软件包安装`~/.emacs.d`在.`~/.emacs.d/packages``load-path`

# javascript - 从网站获取数据

> ID：10611104
> 
> 赞同：-2
> 
> 时间：2012-05-16T02:07:35.240
> 
> 标签：javascript, jquery, html, screen-scraping

我如何从网站上报废（获取）数据。

示例：- 我有一个网站说 www.getfinancialdata.com

现在我想通过从我的系统运行脚本/url到这个网站来获取数据，然后

对数据进行排序并保存在电子表格中。

我已经为一个简单的网站做了这件事，我可以在其中查看网页正文中的 HTML 内容（在我查看源代码之后）但是当我查看源代码时我的问题是有点复杂，我看到它是 DOM 数据（没有简单的 html 内容）有填充数据的 jquery 函数。我可以从 DOM（Jquery）中获取数据吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T02:18:49.483

我已经成功地使用[Selenium](http://seleniumhq.org/download/)来抓取使用大量 javascript 的网站。如果它显示在浏览器中，您可以使用 Selenium 获取它。它是 Java，但有一些绑定可以从您最喜欢的脚本语言中驱动它；我使用 Python。

您可能还想研究像[Crowbar](http://simile.mit.edu/wiki/Crowbar)和[PhantomJS](http://phantomjs.org/)这样的无头浏览器。我喜欢 selenium 的一点是，能够看到它驱动浏览器有助于我的调试。还有一个 Firefox 插件（IDE）可以生成一些基本代码来帮助您入门……您只需单击它，它就会记录您所做的事情（该代码肯定总是需要按摩/大量编辑，但是在您学习如何执行此操作时会有所帮助）。

请注意，这是一件*非常困难*的事情。尤其是大规模。网站是杂乱无章的，它们彼此不同，并且随着时间的推移而变化。根据您的态度，这使得刮擦是令人愤怒或有趣的挑战。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T02:36:58.853

如果“www.getfinancialdata.com”为自己所有，建议使用webservice或webapi与您的客户沟通。您将获得干净的 xml 数据或 json 数据，而不是 html 代码。

# javascript - window.location.replace ：权限被拒绝和未捕获的异常

> ID：10611107
> 
> 赞同：0
> 
> 时间：2012-05-16T02:07:55.217
> 
> 标签：javascript, html, permission-denied

我正在使用该页面在 javascript 中编写 oauth 客户端，在用户在身份验证服务器上输入凭据后，它会尝试重定向回我的 javascript 页面（使用：window.location.replace）并失败并显示“权限被拒绝”有什么限制windows.location.replace(...) ？

```
Javascript file is stored locally. 
```

## 错误详情

“权限被拒绝”出现在 IE 中，而 Mozilla FF 显示：

错误：未捕获的异常：[异常...“组件返回失败代码：0x80004005（NS_ERROR_FAILURE）[nsIDOMLocation.replace]”nsresult：“0x80004005（NS_ERROR_FAILURE）”位置：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:10:00.250

> Javascript 文件存储在本地。

似乎您必须先将文件上传到服务器！

# mysql - EAV表中的MySQL排序错误

> ID：10611108
> 
> 赞同：1
> 
> 时间：2012-05-16T02:07:58.463
> 
> 标签：mysql

我有一个实体属性模型，用于存储与用户相关的信息。然后，我还尝试对仅包含按降序排列的数字的特定实体进行排序。我正在运行如下查询：

```
SELECT * FROM `user_meta` WHERE `key` = 'children'   ORDER BY `user_meta`.`value`  DESC 
```

直到最近，当用户有 11 个时，我才遇到此查询的问题`children`，现在结果如下所示

```
+-----+----------+-------+
| uid | key      | value |
+-----+----------+-------+
|  1  | children | 5     |
|  1  | children | 3     |
|  1  | children | 3     |
|  1  | children | 2     |
|  1  | children | 11    |
|  1  | children | 1     |
+-----+----------+-------+ 
```

我已经尝试了这个查询的各种不同的修改，但没有发现任何解决这个排名问题的方法，其中 5 > 11。它可能有用，但如果这会影响 MySQL 使用的排序算法，则`key`和`value`属性都是如此。`varchar(250)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:12:31.923

当您的列是一种`CHAR`类型时，就会发生这种情况。它比较字符串而不是数字。

您可以在订购时投射它：

```
ORDER BY CAST(`user_meta`.`value` AS UNSIGNED) 
```

或者对于有符号整数：

```
ORDER BY CAST(`user_meta`.`value` AS SIGNED) 
```

另请参阅：[强制转换函数和运算符](http://dev.mysql.com/doc/refman/5.0/en/cast-functions.html)

# git - 如何查看本地分支和远程分支之间指定文件的差异？

> ID：10611112
> 
> 赞同：4
> 
> 时间：2012-05-16T02:08:42.823
> 
> 标签：git, version-control, git-diff

如何查看指定文件中本地分支和远程分支之间的差异？

我知道这个命令：

```
git diff <local branch> <remote-tracking branch> 
```

但它给出了两个分支之间所有文件的差异，而我只关心一个指定文件的更改。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T02:31:54.313

看一下`git diff --help`，它向您展示了：

```
git diff [options] <commit> <commit> [--] [<path>...] 
```

所以，你快到了。代替：

```
git diff <local branch> <remote-tracking branch> 
```

您可以使用：

```
git diff <local branch> <remote-tracking branch> path/to/file 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T03:55:37.127

虽然其他答案会起作用，但您希望养成使用“--”作为文件路径分隔符的习惯。如果没有分隔符，分支名称、文件名和其他内容之间可能会混淆。

```
git diff <local> <remote> -- /path/to/file 
```

另请注意，对于您的文件路径，您可以改为使用目录，例如 /path/to/，并仅获取该目录中文件的差异。您也可以尝试使用 'git difftool ...' 来获得视觉差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T02:31:46.980

像这样：

```
git diff <local branch> <remote-tracking branch> /path/to/file 
```

# c# - SaveFileDialog 仅显示具有特定扩展名的文件

> ID：10611114
> 
> 赞同：5
> 
> 时间：2012-05-16T02:08:55.930
> 
> 标签：c#, savefiledialog

我想保存具有两个选项（.Png 或 .Jpeg）的图像，因此我只需要显示具有**Png 和 Jpeg 格式**的文件，例如当我们选择*将类型保存为* **所有图像**时，它会在对话框中显示所有类型的图像。那我该怎么做呢？

```
using(SaveFileDialog saveFileDialog1 = new SaveFileDialog())
{
     saveFileDialog1.InitialDirectory = Convert.ToString(Environment.SpecialFolder.MyPictures);
     saveFileDialog1.Filter = "Images (*.Png + Jpeg)|*.Png + *.Jpeg";
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T02:13:35.993

你会寻找这样的过滤器：

```
"Images (*.png,*.jpeg)|*.png;*.jpeg"; 
```

或可选：

```
"Images (*.png,*.jpeg)|*.png;*.jpeg|All files (*.*)|*.*" 
```

# html - 修复带有双引号的 HTML 属性值

> ID：10611117
> 
> 赞同：3
> 
> 时间：2012-05-16T02:09:37.817
> 
> 标签：html, regex, perl, text, xml-twig

`href`我在标签的属性中有一组具有非法语法的 HTML 文件`<a>`。例如，

```
<a name="Conductor, "neutral""></a> 
```

或者

```
<meta name="keywords" content="Conductor, "hot",Conductor, "neutral",Hot wire,Neutral wire,Double insulation,Conductor, "ground",Ground fault,GFCI,Ground Fault Current Interrupter,Ground fault,GFCI,Ground Fault Current Interrupter,Arc fault circuit interrupter,Arc fault breaker,AFCI," /> 
```

或者

```
<b>Table of Contents:</b><ul class="xoxo"><li><a href="1.html" title="Page 1: What are "series" and "parallel" circuits?">What are "series" and "parallel" circuits?</a> 
```

我正在尝试使用 Perl 的`XML::Twig`模块处理文件`parsefile_html($file_name)`。当它读取具有此语法的文件时，会出现以下错误：

```
x has an invalid attribute name 'y""' at C:/strawberry/perl/site/lib/XML/Twig.pm line 893 
```

我需要的是一种让模块接受错误语法并处理它的方法，或者是一个正则表达式来用单引号查找和替换属性中的双引号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T04:09:32.240

给定您的 html 示例，以下代码有效：

```
use Modern::Perl;

my $html = <<end;
<meta name="keywords" content="Conductor, "hot",Conductor, "neutral",Hot wire,Neutral wire,Double insulation,Conductor, "ground",Ground fault,GFCI,Ground Fault Current Interrupter,Ground fault,GFCI,Ground Fault Current Interrupter,Arc fault circuit interrupter,Arc fault breaker,AFCI," />
<a name="Conductor, "neutral""></a>
end

$html =~ s/(?<=content=")(.*?)(?="\s*\/>)/do{my $capture = $1; $capture =~ s|"||g;$capture}/eg;
$html =~ s/(?<=name=")(.*?)(?="\s*>)/do{my $capture = $1; $capture =~ s|"||g;$capture}/eg;

say $html; 
```

输出：

```
<meta name="keywords" content="Conductor, hot,Conductor, neutral,Hot wire,Neutral wire,Double insulation,Conductor, ground,Ground fault,GFCI,Ground Fault Current Interrupter,Ground fault,GFCI,Ground Fault Current Interrupter,Arc fault circuit interrupter,Arc fault breaker,AFCI," />
<a name="Conductor, neutral"></a> 
```

我担心没有实现可变长度的后视，所以如果等号之前或之后有一些空格，模式匹配就会失败。但是，很可能页面是一致创建的，因此匹配不会失败。

当然，首先尝试对文件副本进行替换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T14:11:10.853

我能想到的合理安全地做到这一点的唯一方法是使用两个嵌套的评估 ( `/e`) 替换。下面的程序使用这个想法并处理您的数据。

外部替换查找字符串中的所有标签，并将它们替换为包含调整后的属性值的标签。

内部替换查找标记中的所有属性值，并将它们替换为相同的值，并删除所有双引号。

```
use strict;
use warnings;

my $html = <<'HTML';
<meta name="keywords" content="Conductor, "hot",Conductor, "neutral",Hot wire,Neutral wire,Double insulation,Conductor, "ground",Ground fault,GFCI,Ground Fault Current Interrupter,Ground fault,GFCI,Ground Fault Current Interrupter,Arc fault circuit interrupter,Arc fault breaker,AFCI," />
<a name="Conductor, "neutral""></a>
<a href="1.html" title="Page 1: What are "series" and "parallel" circuits?">
HTML

$html =~ s{(<[^>]+>)}{

  my $tag = $1;

  $tag =~ s{ \w+= " \K ( [^=<>]+ ) (?= " (?: \s+\w+= | \s*/?> )) }
  {
    (my $attr = $1) =~ tr/"//d;
    $attr;
  }egx;

  $tag;
}eg;

print $html; 
```

**输出**

```
<meta name="keywords" content="Conductor, hot,Conductor, neutral,Hot wire,Neutral wire,Double insulation,Conductor, ground,Ground fault,GFCI,Ground Fault Current Interrupter,Ground fault,GFCI,Ground Fault Current Interrupter,Arc fault circuit interrupter,Arc fault breaker,AFCI," />
<a name="Conductor, neutral"></a>
<a href="1.html" title="Page 1: What are series and parallel circuits?"> 
```

# regex - 匹配单词和单词的任意数量的第一个连续字符

> ID：10611124
> 
> 赞同：0
> 
> 时间：2012-05-16T02:10:33.547
> 
> 标签：regex

有没有更简单的方法来编写以下正则表达式，特别是避免使用“？”的所有分组 可选字符？

```
/^w(o(r(d)?)?)?$/ 
```

它**应该**与以下内容匹配：

*   w
*   我
*   工作
*   单词

并且**不应该**匹配，仅作为示例：

*   写
*   wd
*   呜
*   wrr
*   世界
*   wrdo
*   秩序
*   rd
*   异地

在这种特殊情况下，它是一个非常短的词，但您可以通过下一个示例看到事情如何很快变得丑陋。

正则表达式匹配每个单词的*垂直*或*水平*以及任意数量的第一个连续字符：

```
/^h(o(r(i(z(o(n(t(a(l)?)?)?)?)?)?)?)?)?|v(e(r(t(i(c(a(l)?)?)?)?)?)?)?)$/ 
```

我正在使用 ruby​​，但我认为这个问题适用于任何使用正则表达式的语言，所以我会感谢任何语言的答案。虽然对perl不太了解...

我只发现了一个与我类似的问题，但没有显示任何更好的解决方案，无论如何，[这里是链接](https://stackoverflow.com/questions/6747309/match-any-substring-from-the-beginning-of-a-word)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T02:41:54.173

`OR`你可以用一个表达式来简化它：

```
/^(w|wo|wor|word)$/ 
```

或通过从输入文本（在伪代码中）制作正则表达式来*反转*测试：

```
"word" matches /input + ".*"/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T02:37:08.517

如果你用不同的方式做呢？例如（我不熟悉 ruby​​，所以我将使用 python）：

```
s = "hor"

if "horizontal".startswith (s):
    h = True
if "vertical".startswith (s):
    v = True 
```

或类似的规定

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T02:53:03.443

虽然丑陋且难以阅读，但我会创建一个函数来为每个单词创建正则表达式。例如，如果它是 PHP，我会将其公式化如下：

```
function rx_from_word($word='',$escapeNeeded=true) {
    $rx = ''; $i = strlen($word);
    while (--$i > -1) {
        if ($escapeNeeded && strpos('|/{}[]().*\\+^$',$word{$i}) !== false) $char = '\\'.$word{$i};
        // I'm not sure if I missed any special character above.
        else $char = $word{$i};
        if ($i > 0) $rx = '(' . $char . $rx . ')?';
        else $rx = $char . $rx;
    }
    return $rx;
}

function rx_from_words($words=array(),$matchFull=false) {
    $rx = $matchFull ? '^' : '';
    foreach ($words as $word) $rx .= rx_from_word($word) . '|';
    return substr($rx,0,-1) . ($matchFull ? '$' : '');
}

$words = array('horizontal','vertical','$10');
$rx = rx_from_words($words,1);
echo "<pre>$rx</pre>"; 
```

这将输出

> ^h(o(r(i(z(o(n(t(a(l)?)?)?)?)?)?)?)?)?|v(e(r(t(i(c (a(l)?)?)?)?)?)?)?|\$(1(0)?)?$

# mysql - 从表中选择示例记录

> ID：10611125
> 
> 赞同：0
> 
> 时间：2012-05-16T02:11:02.467
> 
> 标签：mysql

我有一张这样的桌子：

```
id make model year
1 chevy camaro 1969
2 chevy camaro 1967
3 ford mustang 1967
4 chevy corvette 1984
5 pontiac gto 1971
6 pontiac grandam 1987 
```

我想返回一个记录集，其中包含 make 中每个不同值的一行（所有列）。结果示例：

```
1 chevy camaro 1969
3 ford mustang 1967
5 pontiac gto 1971 
```

顺序对我来说并不重要；它不需要是确定性的。这样我就可以轻松地为不同的用例选择示例数据，而无需将整个表格内容发送给开发人员。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T02:15:10.663

在 MySQL 中，您可能能够摆脱：

```
SELECT id, make, model, year
  FROM AnonymousTableAboutCars
 GROUP BY make, model; 
```

对于大多数其他 SQL DBMS，您可能会这样做：

```
SELECT id, make, model, year
  FROM AnonymousTableAboutCars AS a
  JOIN (SELECT MIN(id)
          FROM AnonymousTableAboutCars
         GROUP BY make, model
       ) AS m
    ON a.id = m.id; 
```

聚合的选择取决于您；MAX 是一种有效的、确定性的替代方案。

# php - 如何在 PHP 中创建最后一个数组编号 id +1 的 JavaScript 数组？

> ID：10611126
> 
> 赞同：1
> 
> 时间：2012-05-16T02:11:06.333
> 
> 标签：php, javascript, arrays

好的，我一直在寻找这个有点棘手的问题的答案。我有一个使用 JavaScript 数组列表运行随机 Google 搜索的网站。我有另一个站点与另一个站点一起允许用户输入他们自己的搜索主题。这些用户输入的值进入我喜欢称之为游乐场的巨大文本文件中。

我想要做的是让 Php 脚本将用户输入的值写入 JavaScript 数组，但使用最后输入的 JavaScript 数组中的数组编号 id 加 1。

示例：最后输入的数组是`rand[60] = "hello";` Jon Doe enters `"test"`。php脚本写入`topics.js`fie，`rand[61] = "test";`

我已经有一个用于 php 的文件编写脚本...

```
<?php
//Idea Poster
$idea = $_POST['idea'];

//Idea DATA
$data = "$idea \n\n ";

//Idea Writer
$fh = fopen("Ideas.txt", "a");
fwrite($fh, $data);

//Closer
fclose($fh);
//Reload Page
$page = "POSindex.php";
$sec = "0";
header("Refresh: $sec; $page");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:29:27.743

您可以保持编写脚本不变，然后编写脚本来读取 .txt 文件并将其即时转换为 JSON 数组。

假设你想形成一个有效的 JS 文件：

```
echo 'var topics = ', json_encode(file('Ideas.txt')); 
```

**优化**

上面的脚本总是会读取文件并将内容编码为 JSON；这可以通过保留缓存文件来优化。

```
if (!file_exists('topics.json') || filemtime('topics.json') < filemtime('Ideas.txt')) {
    // changes were made to Ideas.txt
    $topics_js = 'var topics = ' . json_encode(file('Ideas.txt'));
    // update cache file
    file_put_contents('topics.json', $topics_js);
    echo $topics_js;
} else {
    // read from cached file
    readfile('topics.json');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T02:24:15.303

只需首先以 json 格式存储您的数据。

```
<?php
//Idea Poster
$idea = $_POST['idea'];

//Idea DATA
$data = "$idea \n\n ";

//Idea File (contains a json array)
$fh = fopen("Ideas.json", "r");
$contents = fread($fh, filesize("Ideas.json"));
fclose($fh);

// decode json
$ideas = json_decode($contents);
// add the new entry
$ideas[] = $idea;

// write it out 
$fh = fopen("Ideas.json", "w");
fwrite($fh, json_encode($ideas));
fclose($fh);

//Reload Page
$page = "POSindex.php";
$sec = "0";
header("Refresh: $sec; $page");
?> 
```

或者，如果您确实需要该文件是单行纯文本，则可以使用 php 'file' 函数将其作为 php 数组读入，然后通过 'json_encode' 运行以获取 json 数组。您可能需要对文件中的双倍间距做一些事情，但基本上您应该得到您正在寻找的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T02:13:26.693

请改用 JSON 数组。从文件中读取 JSON，对其进行解码，将元素添加到数组中，对其进行编码，然后将其写出。

# jquery - 为什么 $(“img”)[0] 不起作用？

> ID：10611128
> 
> 赞同：3
> 
> 时间：2012-05-16T02:11:44.010
> 
> 标签：jquery

代码：

```
<img src="image1.jpg" alt="This is 1 test.">

<img src="image2.jpg" alt="This is 2 test"> 
```

jQuery代码：

```
 alert($('img')[0].attr('alt')); 
```

为什么没有弹出一个框，并显示`This is 1 test.`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T02:13:51.190

你可能想用[`eq`](http://api.jquery.com/eq/)这个：

```
 alert($('img').eq(0).attr('alt')); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-16T02:17:08.957

直接回答你的问题：

它不起作用，因为`[0]`返回选择器的本机 DOM 元素，它没有名为`.attr()`. 您需要使用`.eq(index)`，它基本上提取出`index`由`$()`. 请注意，它`$()`返回一个*类似数组的*对象，而不是一个数组本身（因此`[0]`不能开箱即用）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T02:17:13.230

`$("img")[0]`返回原始 DOM 元素。您想要包装 DOM 元素的 jQuery 对象。

用于`$("img").eq(0)`获取 jQuery 对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T02:18:36.833

`$('img')[0]`返回 HTMLElement 对象，而不是 jquery 对象，因此它没有方法`.attr`。如果你想使用它，你应该这样做`$('img')[0].getAttribute('alt')`。

或者你仍然想要 jquery 对象，你可以使用`$('img').first().attr('alt')`.

# linux - 我将如何进行这项工作？

> ID：10611131
> 
> 赞同：1
> 
> 时间：2012-05-16T02:12:14.633
> 
> 标签：linux, bash, grep, diff, md5sum

```
#!/bin/bash
#James Kenaley 20120513
#Server Monitor Script
while read -r name ip content
do
    ip_status=`ping -w1 $ip | grep -c "100%"`
    web_status=`nmap -n -PN -p 80 $ip | grep -c open`
    ssh_status=`nmap -n -PN -p 22 $ip | grep -c open`
    content_status=`diff <(curl -s $ip | md5sum) <(cat $content) | grep -c -e "<" -e ">"`
    if [ $web_status -eq 1 ]
    then
            echo "The webserver is running on $name @ $ip"
    else
            echo "  The webserver is offline on $name @ $ip"
    fi

    if [ $ssh_status -eq 1 ]
    then
            echo "SSH is enabled on $name @ $ip"
    else
            echo "  SSH has been disabled on $name @ $ip"
    fi

    if [ $content_change -gt 0 ]
    then
            echo "  The content has changed on $name's webserver"
    else
            echo "The content is the same"
    fi
done < server.list 
```

我知道最简单的方法就是比较另一个变量中的内容，但我真的希望将比较保持在一行中。因此，如果有人可以帮助我，我将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T02:15:39.330

`diff`并且`grep`都支持`-q`。直接在`if`语句中使用它们，而不是捕获它们的输出并单独比较。

# cakephp - cakephp 中加载的第一个文件

> ID：10611135
> 
> 赞同：2
> 
> 时间：2012-05-16T02:12:36.473
> 
> 标签：cakephp, cakephp-1.3

我正在准备面试，我是 cakephp 新手，在互联网上搜索时，我遇到了这个问题......
“当你使用 cakephp 运行应用程序时，第一个加载的文件是什么？”
回答：
面试官：当你使用 cakephp 运行应用程序时，第一个加载的文件是什么？
候选人：你能改变那个文件吗？面试官：是
的 bootstrap.php ，是的，是可以改变的，要么通过 index.php ，要么通过 htaccess
哪个文件先加载，如果那个特定的文件是不可改变的。
我试图找出答案，但无法得到答案。
有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T10:37:09.170

第一个被加载的文件`index.php`（根据`.htaccess`重写规则）在 webroot 文件夹中，它将在包含路径中添加 CakePHP 的核心

**CakePHP 1.3**

```
if (!defined('CORE_PATH')) {
        if (function_exists('ini_set') && ini_set('include_path', CAKE_CORE_INCLUDE_PATH . PATH_SEPARATOR . ROOT . DS . APP_DIR . DS . PATH_SEPARATOR . ini_get('include_path'))) {
            define('APP_PATH', null);
            define('CORE_PATH', null);
        } else {
            define('APP_PATH', ROOT . DS . APP_DIR . DS);
            define('CORE_PATH', CAKE_CORE_INCLUDE_PATH . DS);
        }
    }
    if (!include(CORE_PATH . 'cake' . DS . 'bootstrap.php')) {
        trigger_error("CakePHP core could not be found.  Check the value of CAKE_CORE_INCLUDE_PATH in APP/webroot/index.php.  It should point to the directory containing your " . DS . "cake core directory and your " . DS . "vendors root directory.", E_USER_ERROR);
    } 
```

**CakePHP 2.1**

```
if (!defined('CAKE_CORE_INCLUDE_PATH')) {
        if (function_exists('ini_set')) {
            ini_set('include_path', ROOT . DS . 'lib' . PATH_SEPARATOR . ini_get('include_path'));
        }
        if (!include('Cake' . DS . 'bootstrap.php')) {
            $failed = true;
        }
    } else {
        if (!include(CAKE_CORE_INCLUDE_PATH . DS . 'Cake' . DS . 'bootstrap.php')) {
            $failed = true;
        }
    } 
```

然后它包括`bootstrap.php`两种情况。

所以答案是：`index.php`你**不应该修改它**（除非你在某些[特殊情况下](http://book.cakephp.org/2.0/en/installation/advanced-installation.html)），那么`app/Config/bootstrap.php`你[**可以修改它**](http://book.cakephp.org/2.0/en/development/configuration.html#bootstrapping-cakephp)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-17T15:41:17.280

这可能会有所帮助：

从 cake 2.6 开始，这里是要加载的配置文件的顺序

```
core.php
database.php
bootstrap.php
routes.php 
```

# html - 溢出：隐藏属性在 iphone、ipad 上不起作用 Jquery 垂直滑块

> ID：10611137
> 
> 赞同：2
> 
> 时间：2012-05-16T02:12:41.553
> 
> 标签：html, jquery-ui, css

我必须制作一个灯泡形状（即使是椭圆也可以）垂直滑块的原型。问题是，当我拖动滑块时，它会以矩形方式增长，因此在 iphone 和 ipad 上不会采用椭圆形（因为它是父元素）。我已经能够添加触摸手势，但属性溢出：隐藏似乎无法正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:37:51.357

给你的滑块容器边框半径，而不是添加溢出：隐藏。它适用于 iOS 和 Android：

```
.container {
width: 100%; /* Your slider width, percent or pixels... */
height: 100%; /* Your slider height*/
border-radius: 100%; /* Circle or ellipse, depends of parent element */
overflow: hidden; /* Crop content to border */
background: yellow; /* Irrelevant */
position: relative; /* Takes control of inner elements, could be irrelevant too */
} 
```

它里面的所有东西都将被裁剪到边界。

# c# - 没有条件怎么写Join

> ID：10611139
> 
> 赞同：0
> 
> 时间：2012-05-16T02:13:03.217
> 
> 标签：c#, .net-4.0

我只想在一起。

```
var MenAndRandomPartners
                    = Men.Join(Partners, ..... ???? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T02:16:28.807

你想要的是一个[CROSS JOIN](http://msdn.microsoft.com/en-us/library/bb882533.aspx)，它可以用 LINQ 来完成

```
var MenAndRandomPartners = 
    from man in Men
    from partner in Partners
    select new
    {
        man, partner
    }; 
```

你也让我很好奇如何用扩展方法编写它，所以这里是扩展方法的方式：

```
var MenAndRandomPartners = 
    Men.SelectMany(man => Partners, (man, partner) => new {man, partner}); 
```

在这种情况下，我认为 LINQ 方式更明确，虽然......只是我的意见，但我确信

# html - 为什么'/>'会在gedit的html文档中导致文本着色错误？

> ID：10611143
> 
> 赞同：2
> 
> 时间：2012-05-16T02:13:47.433
> 
> 标签：html, gedit, textcolor

```
$('#chatlog').append('<span class="'+colorCode+'">'+newMsg+'</span><br />'); 
```

看到`/>`行尾的吗？那两个字变成了青蓝色，之后的一切都是黑色的——几乎就像一个错误。在文档中该点之后不存在文本着色。

如果我将其更改为（在和`<br / >`之间有一个空格），那么它可以解决问题。但首先是什么导致了这个问题？`/``>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T05:30:17.837

我从来没有使用过 Gedit，但是旧的 html 规范不允许自闭合标签——你可能只需要告诉它 html/xhtml/html5/whatever 的风格。一个快速的谷歌搜索表明这是通过选择右下角的语法突出显示语言来完成的。:)

# ios - 我可以在 IOS 模拟器中安装“应用商店”吗？

> ID：10611146
> 
> 赞同：116
> 
> 时间：2012-05-16T02:13:54.887
> 
> 标签：ios, app-store, simulator

我电脑里的IOS模拟器没有应用商店。我想使用应用商店来测试我在模拟器上编写的程序。

是否可以在我的模拟器中安装应用商店？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-05-16T02:16:25.477

**这是不可能的**

模拟器不运行**ARM**代码，仅运行**x86**代码。除非您拥有来自 Apple 的原始源代码，否则您不会在模拟器上看到 App Store。

即使您没有开发人员帐户，您编写的应用程序也可以通过直接从 Xcode 运行在模拟器中进行测试。要在实际设备上测试您的应用程序，您需要加入[Apple 开发者](https://developer.apple.com/)计划。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-02-23T10:43:33.860

不，根据苹果[在这里](https://developer.apple.com/library/ios/documentation/IDEs/Conceptual/iOS_Simulator_Guide/InteractingwiththeiOSSimulator/InteractingwiththeiOSSimulator.html#//apple_ref/doc/uid/TP40012848-CH3-SW8)：

> 注意：您不能在模拟环境中从 App Store 安装应用程序。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-01-16T07:19:19.837

您可以安装其他版本，但不能安装 Appstore 版本。

从**Xcode 8.2**中，将构建拖放到模拟器以进行安装。

[https://stackoverflow.com/a/41671233/1522584](https://stackoverflow.com/a/41671233/1522584)

# iphone - 尝试实现后退按钮但不断崩溃

> ID：10611159
> 
> 赞同：1
> 
> 时间：2012-05-16T02:16:20.330
> 
> 标签：iphone, xcode4.2, modalviewcontroller

尝试运行代码，但它在调试控制台中崩溃或以 SIGABRT 消息终止

```
- (IBAction)backButtonPushed:(id)sender {

    ViewController *backView = [backView initWithNibName:nil bundle:NULL];
    backView.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
    [self presentModalViewController:backView animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:20:16.523

不知道你想用这行代码做什么，但无论如何它都是错误的：

```
ViewController *backView = [backView initWithNibName:nil bundle:NULL]; 
```

从 backView 为 nil 的角度来看，您的崩溃很可能是由于该行（当您尝试将其呈现为模态视图控制器时，崩溃将在两行之后发生），或者实际上是其他一些对象，因为它是从未正确初始化。

你真正需要做的是（假设你有一个相应的接口文件，又名“nib”）：

```
ViewController *backView = [[ViewController alloc] initWithNibName:@"<your controller's nib name here>" bundle:NULL]; 
```

或者，如果您完全以编程方式创建 ViewController，则使用：

```
ViewController *backView = [[ViewController alloc] init]; 
```

或者您定义的任何初始化方法。

# nginx - 如何在 webfaction 上重启 nginx？

> ID：10611163
> 
> 赞同：0
> 
> 时间：2012-05-16T02:16:46.837
> 
> 标签：nginx, webfaction

我按照这篇文章安装 nginx 并使用它为 webfaction 上的另一个 django 应用程序提供服务- [http://www.ravelrumba.com/blog/install-nginx-webfaction/](http://www.ravelrumba.com/blog/install-nginx-webfaction/) 我已经使用 sbin/nginx 启动了 nginx，如文章中所述。我关闭了那个 ssh 会话，所以服务器继续运行。我现在想重新启动，令我非常沮丧的是无法弄清楚如何。此外，我看不到任何相关日志，我检查了 /home/logs/user 和 /home/logs/frontend 和 nginx/logs 并且那里有旧文件，但似乎没有持续更新（我的网站正在运行并且一些操作不起作用，我收到“页面不可用”错误，但这些日志都没有显示任何内容。我已经尝试 ps -ef | grep nginx 找出 nginx pid 并重新启动，但是当我尝试杀死一个 nginx 进程时，它说没有权限。

sbin/nginx 停止或启动或重新启动不起作用。这听起来一定很愚蠢，但现在已经尝试了几个小时，希望能提供任何帮助。

此外，尝试了以下 -

```
[xxx@xxx nginx]$ sbin/nginx -s quit 
nginx: [error] open() "/home/xxx/webapps/nginx/logs/nginx.pid" failed (2: No such file or directory) 
[xxx@xxx nginx]$ sbin/nginx -s reload 
nginx: [error] open() "/home/xxx/webapps/nginx/logs/nginx.pid" failed (2: No such file or directory) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-12T09:18:42.293

我只是做

```
$ cd ~/weapps/my-app-name
$ ./bin/restart 
```

我的 capistrano（或 mina）部署脚本中也有此步骤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T03:53:14.757

Restart nginx service in webfaction servers

```
[xxx@xxx nginx]$ sbin/nginx -p /home/xxx/webapps/myapp/nginx/ -s reload 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-06T20:41:23.843

从 webfaction 的任意目录重启 nginx：

```
ssh your_username.webfactional.com
$ $HOME/webapps/[app_name]/nginx/sbin/nginx -p $HOME/webapps/[app_name]/nginx/ -s reload 
```

# php - 使用 AJAX/JSON/PHP 的 jquery 电子邮件表单？

> ID：10611169
> 
> 赞同：0
> 
> 时间：2012-05-16T02:17:16.260
> 
> 标签：php, json, forms, jquery, email-validation

我是表单的新手，但我觉得我错过了一些简单的东西。除了“错误”警报之外，根本没有“成功”。

这是 index.html 文件中的表单代码。

```
<form id="contact-form" name="contact-form" method="post">
    <div id="formResponse"></div>

    <label for="name">NAME:</label>
    <input type="text" name="name" id="name" /><br/>

    <label for="email">EMAIL:</label>
    <input type="text" name="email" id="email" /><br/>

    <label for="message">MESSAGE:</label>
    <textarea name="message" rows="20" cols="20" id="message"></textarea><br/>

    <input type="submit" name="submit" value="SEND" class="submit" />
</form> 
```

我的 .js 文件中的 Ajax 代码

```
$('.submit').click(form_registration);

function form_registration () {

    var input_data = $('#contact-form').serialize(); 

$.ajax({    
    type: 'post',
    url: '../contact.php',
    data: input_data,
    dataType: 'json',
    success: function( msg ){
        alert('SUCCESS!');
    },
    error: function(){ 
        alert('ERROR!');
        alert(input_data);
    }
});   

} 
```

contact.php 文件

```
< ?php 

    if($_POST) {

    $name = trim($_POST['name']);
    $email = trim($_POST['email']);
    $msg = trim($_POST['msg']);

    <!-- //email address settings -->
    $my_address = "MY EMAIL ADDRESS GOES HERE";
    $headers = "From: ".$email;
    $message = "Contact name: $name\nContact Email: $email\nContact Message: $msg";

    $to = $my_address;

    if ( $name == "")
    {
        echo 'Name field is required';
        <!-- $result = "Name field is required"; -->
    }
    else if (!preg_match("/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/", $email))
    {
        echo 'Enter a valid email address';
        <!-- $result = "Enter a valid email address"; -->
    }
    else if ( strlen($msg) < 10 )
    {
        echo 'Write more than 10 characters';
        <!-- $result = "Write more than 10 characters"; -->
    }

    else
    {
    mail($to, $subject, $message, $headers);
    echo "Your mail has been sent succesfully!";
    }

    if ($javascript_enabled == "true") {
        echo 'javascript enabled';
        die();
    }   
}
?> 
```

这是[示例](http://alt.justinbillmeier.com)。点击底部的联系链接。非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-28T13:42:14.713

试试这个代码。我已经对您的代码进行了一些更改，并且现在可以正常运行。

联系方式.html

```
<head>
    <script type="text/javascript" src="js/jquery.js"></script>
</head>
<body>
    <form id="contact" action="contact.php" name="contact" method="post">

<div id="formResponse"></div>

<label for="name">NAME:</label>
<input type="text" name="name" id="name" /><br/>

<label for="email">EMAIL:</label>
<input type="text" name="email" id="email" /><br/>

<label for="sub">SUBJECT</label>
<input type="sub" name="sub" id="subject" /><br/>

<label for="message">MESSAGE:</label>
<textarea name="message" rows="20" cols="20" id="message"></textarea><br/>

<input type="submit" name="submit" value="SEND" class="submit" />
</form>
</body> 
```

联系方式.php

```
<?php
 if($_POST) {

    $name = trim($_POST['name']);
    $email = trim($_POST['email']);
    $msg = trim($_POST['message']);
    $subject = trim($_POST['sub']);
    //email address settings
    $my_address = "nitish@kinsh.in";
    $headers = "From: ".$email;
    $message = "Contact name: $name\nContact Email: $email\nContact Message: $msg";
    $to = $my_address;
    if ( $name == "")
    {
        echo 'Name field is required';
        $result = "Name field is required"; 
    }
    else if (!preg_match("/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,4})$/", $email))
    {
        echo 'Enter a valid email address';
        $result = "Enter a valid email address"; 
    }
     else if( strlen($subject) == "")
    {
        echo 'Please Write Subject';
        $result = "Please Write Subject"; 
        }
        else if ( strlen($msg) < 10 )
    {
        echo 'Write more than 10 characters';
        $result = "Write more than 10 characters"; 
    }
    else
    {
        mail($to, $subject, $message, $headers);
        echo "Your mail has been sent succesfully!";
    }
}
?> 
```

联系.js

```
$('.submit').click(form_registration);
function form_registration () {

var input_data = $('contact-form').serialize(); 
            $.ajax({
            type: 'post',
            url: 'contact.php',
            data: input_data,
            dataType: 'json',
            success: function( msg ){
            alert('SUCCESS!');
        },
        error: function(){
            alert('ERROR!');
            alert(input_data);
        }
});  
 return false; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:10:23.333

好的，首先你必须在右括号之前添加 to`return false`以防止提交`form_registration()``}``form`

其次，您`contact.php`没有有效的开始`PHP`标签更改`< ?php`为`<?php`

搏一搏...

# javascript - 如何使用 jQuery 设置输入文本的值

> ID：10611170
> 
> 赞同：367
> 
> 时间：2012-05-16T02:17:24.730
> 
> 标签：javascript, jquery, html, asp.net-mvc-3

我有一个输入文本是这样的：

```
<div class="editor-label">
    @Html.LabelFor(model => model.EmployeeId, "Employee Number")
</div>

<div class="editor-field textBoxEmployeeNumber">
    @Html.EditorFor(model => model.EmployeeId) 
    @Html.ValidationMessageFor(model => model.EmployeeId)
</div> 
```

哪个产生以下html

```
<div class="editor-label">
  <label for="EmployeeId">Employee Number</label>
</div>

<div class="editor-field textBoxEmployeeNumber">
  <input class="text-box single-line" data-val="true" data-val-number="The field EmployeeId must be a number." data-val-required="The EmployeeId field is required." id="EmployeeId" name="EmployeeId" type="text" value="" />

  <span class="field-validation-valid" data-valmsg-for="EmployeeId" data-valmsg-replace="true"></span>
</div>
```

我想使用 jquery 设置这个输入文本的值，所以我这样做了：

```
<script type="text/javascript" language="javascript">
    $(function() {
        $('.textBoxEmployeeNumber').val("fgg");
    });
</script> 
```

但是，它不起作用...我的语法有什么错误？

* * *

## 回答 #1

> 赞同：558
> 
> 时间：2012-05-16T02:22:36.710

您的选择器正在检索文本框的周围`<div class='textBoxEmployeeNumber'>`而不是其中的输入。

```
// Access the input inside the div with this selector:
$(function () {
  $('.textBoxEmployeeNumber input').val("fgg");
}); 
```

### 看到输出 HTML 后更新

如果 ASP.NET 代码可靠地输出`<input>`带有 id 属性的 HTML `id='EmployeeId'`，您可以更简单地使用：

```
$(function () {
  $('#EmployeeId').val("fgg");
}); 
```

否则，您将需要在浏览器的错误控制台中验证您没有其他导致此失败的脚本错误。上面的第一个示例[在此演示中正常工作。](http://jsfiddle.net/a2fDQ/)

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2013-08-13T13:52:51.847

使用 jQuery，我们可以使用以下代码：

按输入名称选择：

```
$('input[name="textboxname"]').val('some value') 
```

按输入类选择：

```
$('input[type=text].textboxclass').val('some value') 
```

按输入 id 选择：

```
$('#textboxid').val('some value') 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-16T07:20:05.780

```
$(document).ready(function () {
    $('#EmployeeId').val("fgg");

    //Or
    $('.textBoxEmployeeNumber > input').val("fgg");

    //Or
    $('.textBoxEmployeeNumber').find('input').val("fgg");
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-06-04T08:56:08.077

对于具有 id 的元素

```
<input id="id_input_text16" type="text" placeholder="Ender Data"></input> 
```

您可以将值设置为

```
$("#id_input_text16").val("testValue"); 
```

文档[在这里](http://api.jquery.com/val/)。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-01-18T16:35:09.887

这是上课的

```
$('.nameofdiv').val('we are developers'); 
```

对于 ID

```
$('#nameofdiv').val('we are developers'); 
```

现在，如果你有一个输入形式，你可以使用

```
$("#form li.name input.name_val").val('we are awsome developers'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-16T01:27:32.367

这是文件上传的另一种变体，它具有比默认文件上传浏览按钮更好看的引导按钮。这是html：

```
<div class="form-group">
        @Html.LabelFor(model => model.FileName, htmlAttributes: new { @class = "col-md-2  control-label" })
        <div class="col-md-1 btn btn-sn btn-primary" id="browseButton" onclick="$(this).parent().find('input[type=file]').click();">browse</div>
        <div class="col-md-7">
            <input id="fileSpace" name="uploaded_file"  type="file" style="display: none;">   @*style="display: none;"*@
            @Html.EditorFor(model => model.FileName, new { htmlAttributes = new { @class = "form-control", @id = "modelField"} })
            @Html.ValidationMessageFor(model => model.FileName, "", new { @class = "text-danger" })
        </div>
    </div> 
```

这是脚本：

```
 $('#fileSpace').on("change", function () {
        $("#modelField").val($('input[name="uploaded_file"]').val()); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-04-08T06:46:47.450

在纯js中会更简单

```
EmployeeId.value = 'fgg'; 
```

```
EmployeeId.value = 'fgg';
```

```
<div class="editor-label">
  <label for="EmployeeId">Employee Number</label>
</div>

<div class="editor-field textBoxEmployeeNumber">
  <input class="text-box single-line" data-val="true" data-val-number="The field EmployeeId must be a number." data-val-required="The EmployeeId field is required." id="EmployeeId" name="EmployeeId" type="text" value="" />

  <span class="field-validation-valid" data-valmsg-for="EmployeeId" data-valmsg-replace="true"></span>
</div>
```

# regex - 如果我们知道一个CFG只生成正则语言，我们能得到对应的正则表达式吗？

> ID：10611171
> 
> 赞同：9
> 
> 时间：2012-05-16T02:17:37.193
> 
> 标签：regex, context-free-grammar, regular-language

众所周知，给定一个正则语法，我们有算法来获取它的正则表达式。

但是如果给定的语法是上下文无关的语法（但它只生成常规语言），比如

*   `S->aAb` *   `A->bB` *   `B->cB|d` 

    是否有任何现有的算法可以得到一般的正则表达式？

    谢谢！</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-04T19:44:17.690

在最一般的意义上，没有解决方案。确定 CFG 是否为正则的问题是无法确定的（Greibach Theorem，[http://www.cis.upenn.edu/~jean/gbooks/PCPh04.pdf](http://www.cis.upenn.edu/~jean/gbooks/PCPh04.pdf)的最后 3 页）如果我们可以将 CFG 转换为正则表达式，我们可以在任何语法上使用该算法并使用其成功/失败来确定该语言是否是常规语言。

因此，相反，当已知 CFG 生成正则语言时，要么它的语言是已知的（因此可以直接转换为 RegEx），要么有一些语法的属性可以利用。每个属性都有自己的算法用于转换为 RegEx。

例如，如果语法是[右线性](http://en.wikipedia.org/wiki/Linear_grammar)的，那么每个产生式的形式都是 A->bC 或 A->a。这可以转换为 NFA，其中：

1) 每个非终结符都有一个状态，外加一个接受状态。

2) 起始符号 S 为起始状态。

3) A->bC 是输入 b 上从 A 到 B 的转换

4) A->a 是从 A 到输入 a 的接受状态的转换。

然后可以通过状态消除将此 NFA 转换为正则表达式（[http://www.math.uaa.alaska.edu/~afkjm/cs351/handouts/regular-expressions.pdf](http://www.math.uaa.alaska.edu/~afkjm/cs351/handouts/regular-expressions.pdf)的第 5-8 页）。左线性语法的类似过程将交换开始和接受状态。

除此之外，还可以利用常规语言的闭包特性。比如题中的语言不是线性的，但是可以写成S->S'b，S'->aA。现在 S' 是右线性的，并且 S 是两个不相交的线性文法的串联。连接两个表达式以获得最终表达式。联合的类似逻辑。

# html - 在屏幕上绘图时，它会绘制并替换使其跳转的布局

> ID：10611172
> 
> 赞同：0
> 
> 时间：2012-05-16T02:17:58.517
> 
> 标签：html, css

在页面上：[http](http://hebe-tutorat.org/) : //hebe-tutorat.org/ 加载时，它会显示顶部的图像滚动条，空间很大（？！），最后使它靠近，并替换它靠近，使整个图像跳转（重绘？）....

问题：是什么让它这样做，以及如何解决它......

以前从未见过，所以我不知道如何解决这个问题......以及谷歌找到解决方案的方法，它在mac上的firefox中，悲伤...... FF变成IE？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T06:35:25.387

我使用 Firefox 和 NoScript 给它一个更好的外观 - 你使用 javascript 更改菜单项的字体：

![在此处输入图像描述](../Images/56555a16e29314af2ddbbb5dad07d316.png)

# java - POI 公式评估器 IFERROR

> ID：10611175
> 
> 赞同：2
> 
> 时间：2012-05-16T02:18:35.857
> 
> 标签：java, apache-poi

我正在使用 POI 3.8 来读取 excel 我正在使用 POI 的用户模型 api，它能够同时读取 HSSF 和 XSSF 但是在评估公式 POI 3.8 不支持 Excle 的 IFERROR 函数时存在一些问题是否有任何替代方法，我不想将公式转换为 ISERROR，因为旧版本的 excel 不支持它。

我知道 POI 3.8 不支持 IFERROR 但我能做些什么来完成它 - 在此先感谢

以下是线程“主”org.apache.poi.ss.formula.eval.NotImplementedException 中的异常异常：在 org.apache.poi.ss.formula.WorkbookEvaluator.addExceptionInfo(WorkbookEvaluator.java 评估单元格 Sheet1!F1 时出错:356) 在 org.apache.poi.ss.formula.WorkbookEvaluator.evaluate(WorkbookEvaluator.java:229) 在 org.apache.poi.ss.formula.WorkbookEvaluator.evaluateAny(WorkbookEvaluator.java:297)。 poi.xssf.usermodel.XSSFFormulaEvaluator.evaluateFormulaCellValue(XSSFFormulaEvaluator.java:264) at org.apache.poi.xssf.usermodel.XSSFFormulaEvaluator.evaluate(XSSFFormulaEvaluator.java:117) at TestFormula.cellValue(TestFormula.java:48) at TestFormula .loadCell(TestFormula.java:37) 在 TestFormula.loadRows(TestFormula.java:29) 在 TestFormula.testRun(TestFormula.java:22) 在 FISValidator.main(FISValidator.java:27) 引起：org.apache.poi.ss.formula.eval.NotImplementedException: IFERROR at org.apache.poi.ss.formula.atp.AnalysisToolPak$NotImplemented.evaluate( AnalysisToolPak.java:40) 在 org.apache.poi.ss.formula.UserDefinedFunction.evaluate(UserDefinedFunction.java:64) 在 org.apache.poi.ss.formula.OperationEvaluatorFactory.evaluate(OperationEvaluatorFactory.java:129) 在 org .apache.poi.ss.formula.WorkbookEvaluator.evaluateFormula(WorkbookEvaluator.java:491) 在 org.apache.poi.ss.formula.WorkbookEvaluator.evaluateAny(WorkbookEvaluator.java:287)UserDefinedFunction.evaluate(UserDefinedFunction.java:64) at org.apache.poi.ss.formula.OperationEvaluatorFactory.evaluate(OperationEvaluatorFactory.java:129) at org.apache.poi.ss.formula.WorkbookEvaluator.evaluateFormula(WorkbookEvaluator.java:第491章）在 org.apache.poi.ss.formula.WorkbookEvaluator.evaluateAnyUserDefinedFunction.evaluate(UserDefinedFunction.java:64) at org.apache.poi.ss.formula.OperationEvaluatorFactory.evaluate(OperationEvaluatorFactory.java:129) at org.apache.poi.ss.formula.WorkbookEvaluator.evaluateFormula(WorkbookEvaluator.java:第491章）在 org.apache.poi.ss.formula.WorkbookEvaluator.evaluateAny

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-04T08:56:02.997

编辑：由于较新的 Apache POI API 支持 IFERROR()

* * *

我最近也遇到了 IFERROR 的问题。所以我为此写了一个小技巧。希望这可以帮助：

请注意， **IFERROR(value, value_if_error)** 与 **IF(ISERROR(value), value_if_error, value)的作用相同**

所以我在评估它们之前替换了这些公式。您需要做的就是调用**replaceIfErrorFormulas()**它将自动遍历整个工作表。

```
public static final int SIZE = "IFERROR(".length();   

private void replaceIfErrorFormulas(Sheet pSheet)
{
   for (Row row : pSheet)
   {
      for (Cell cell : row)
      {
         if ((cell != null) && 
             (cell.getCellType() == Cell.CELL_TYPE_FORMULA) &&
             (cell.getCellFormula().indexOf("IFERROR") != -1))
         {
            cell.setCellFormula(buildFormulaString(cell.getCellFormula()));
         }
      }
   }
}

private String buildFormulaString(String pFormula)
{
   if (pFormula.indexOf("IFERROR") == -1)
   {
      return pFormula;
   }

   String[] values = new String[2]; // will hold value, value_if_error
   char[] tokens = pFormula.toCharArray();
   int length = computeLength(pFormula); // length of IFERROR substring
   int iBegin = pFormula.indexOf("IFERROR");
   int iEnd = iBegin + length - 1;
   assert (iEnd < pFormula.length());      
   int iParam = 0;  // 0: value; 1: value_if_error
   int numPar = 0;  // number of parentheses

   // Split the parameters into VALUE and VALUE_IF_ERROR in values[]
   for (int i = iBegin; i < (length + iBegin) ; i++)
   {
      if (tokens[i] == '(')
      {
         values[iParam] += tokens[i];
         numPar++;
      }
      else if (tokens[i] == ')')
      {
         if (iParam < 1)
         {
            values[iParam] += tokens[i];
         }
         numPar--;
      }
      else if (Character.getType(tokens[i]) == Character.MATH_SYMBOL)
      {
         values[iParam] += tokens[i];
      }
      else if (tokens[i] == ',')
      {
         if (numPar > 1)
         {
            values[iParam] += tokens[i];
         }
         else
         {
            values[iParam++] += ')';
            numPar--;
         }
      }
      else
      {
         values[iParam] += tokens[i];
      }
      if (numPar < 0 && iParam == 1)
      {
         break;
      }
   }

   // Re-assign those parameters back to strings, removing the null character 
   String value        = values[0];
   String valueIfError = values[1];
   value        = value.substring(4 + SIZE - 1);
   valueIfError = valueIfError.substring(4);

   // Build new Formula that is equivalent to the old one.
   String newFormula = "IF(ISERROR(" + value + ")," 
                                     + valueIfError + ","
                                     + value +")";

   // Concatenate the untouched parts of the old formula to the new one      
   String left = pFormula.substring(0, iBegin);
   String right = pFormula.substring(iEnd + 1, pFormula.length());
   newFormula = left + newFormula + right;

   return buildFormulaString(newFormula);
}

// by checking the parentheses proceededing IFERROR, this method
// determines what is the size of the IFERROR substring
private int computeLength(String pFormula) 
{
   int length = SIZE;
   int numPar = 1; // Number of parentheses
   int iStart = pFormula.indexOf("IFERROR");
   char [] tokens = pFormula.toCharArray();

   for (int i = length + iStart; i < pFormula.length(); i++)
   {
      if (numPar == 0)
          break;
      if (tokens[i] == '(')
          numPar++;
      else if (tokens[i] == ')')
          numPar--;
      length++;
   }
   return length;
} 
```

* * *

**更新：**我已将公式修改为更好！=D 之前：它只会替换位于字符串开头的公式，并且除了它之外没有任何其他公式或参数。之后：现在它在整个字符串中搜索 IFERROR 的实例并替换它们 ALL =D

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-06-19T12:04:16.340

IFERROR 现在已在 poi-3.10 中实现。因此，您无需破解即可升级到该版本。

# linux - 链接到共享库 Linux

> ID：10611177
> 
> 赞同：4
> 
> 时间：2012-05-16T02:18:45.567
> 
> 标签：linux, shared-libraries

共享库是因为它们是从磁盘上的同一个文件加载而共享的，还是因为它们被加载到内存中一次并且每个人都共享同一个内存区域而共享？在 Linux 中，它们是否被加载一次并几乎映射到每个进程空间？这是如何运作的？

编辑：当我说 shared 我想我的意思是**动态链接**，但如果有区别请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T02:23:21.937

通常是后者（尽管`$LD_PRELOAD`改变了这一点；有关详细信息，请参见`ld.so(8)`手册页的**ENVIRONMENT**部分）。CPU TLB 用于将库的页面映射到应用程序的进程空间。

# jquery - 如何使用 jQuery(this) 来定位特定项目

> ID：10611181
> 
> 赞同：0
> 
> 时间：2012-05-16T02:18:51.363
> 
> 标签：jquery, hide, this, parent

提前感谢您的帮助，因为我是 jQuery 的新手。首先，让我解释一下我要做什么。我正在构建一个 wordpress 主题，我想让评论在帖子列表中可见，而不是像默认行为那样仅显示单个帖子。为了防止评论列表在每篇文章中失控，我想使用 jQuery 来隐藏它们，直到您单击一个按钮。以下是其中一篇文章的 html 示例：

```
<div class="comments_section>
  <p class="comments_link">1 Comment</p>
  <p class="PostAComment_link">1 Comment</p>
  <ul class="Comments">
    <li>Comment1</li>
    <li>Comment1</li>
  </ul>
</div> 
```

然后我有以下jQuery：

```
jQuery(document).ready(function() {
jQuery(".Comments").hide();
//toggle the componenet with class msg_body
jQuery(".comments_link").click(function()
{
  jQuery(".Comments").slideToggle();
}); 
```

因此，当您单击 .comments_link 类的文本时，它会取消隐藏/隐藏 .Comments 类的 UL。它可以工作，除了单击链接会切换具有该类的所有 UL。如何仅定位特定 .comments_section div 中的 .comments div？

再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:22:42.983

你可以试试这个：

```
jQuery(this).siblings(".Comments").slideToggle(); 
```

click 事件处理程序`this`中的哪个元素被单击，因此`jQuery(this).siblings()`（显然）为您提供该元素的兄弟姐妹，并且该[`.siblings()`方法](http://api.jquery.com/siblings/)可选地允许您选择与特定选择器匹配的兄弟姐妹（在本例中为“.Comments”）。

这假设您有多个“comments_section”div，每个 div 中只有一个评论链接和评论列表。

# html - IE9 与 IE7/8 中的输入框文本对齐方式

> ID：10611182
> 
> 赞同：0
> 
> 时间：2012-05-16T02:18:56.433
> 
> 标签：html

我有一个输入框，它位于 Div 标签内。我的问题是，当我在此输入按钮中键入 spome 文本时，文本的对齐方式在 IE9 中看起来不错，但是当我在 IE7/IE8 中键入文本时，文本对齐到顶部，而不是居中。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T05:40:22.557

这是不同浏览器中的行高问题，所以我使用这种方法

[http://jsfiddle.net/DA3s5/](http://jsfiddle.net/DA3s5/)

```
<span>
     <input name="" value="" type="text" />
</span>

span{ border:1px solid red; background:gray;}

span input{ border:none; background:none;} 
```

# vb.net - 刻度不工作的新日期（计算下一次计时器将触发）

> ID：10611186
> 
> 赞同：0
> 
> 时间：2012-05-16T02:19:16.897
> 
> 标签：vb.net, datetime, date, timer, intervals

我正在设置（小时）的计时器间隔：

```
Timer1.Interval = ((CInt(ComboBox24.SelectedItem.ToString()) * 60 * 60) * 1000) 
```

然后计算 ticks 事件将触发的下一个 DateTime：

```
MessageBox.Show("Next Timer Will Occur At: " & New Date(DateTime.Now.Ticks + Timer1.Interval)) 
```

每次我调用 MessageBox 时，它都会显示下一个事件现在将触发（确切日期、小时、分钟、秒）。

我看不出我在哪里出错了，因为当我简单地对计算进行消息框化时，它清楚地显示了单独的数字（刻度）和大量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T02:21:20.683

`Ticks`与毫秒不同。使用`Date.Now.TotalMilliseconds`. 或者，更好的是`AddMilliseconds`：

```
MessageBox.Show("Next Timer Will Occur At: " & DateTime.Now.AddMilliseconds(Timer1.Interval)) 
```

# iphone - 没有网络连接时，iOS 会在 MKMapView 中加载地图数据吗

> ID：10611187
> 
> 赞同：0
> 
> 时间：2012-05-16T02:19:33.437
> 
> 标签：iphone, ios

我使用 MKMapView 进行位置基础开发，然后我发现 mapView 只是在屏幕上显示一些灰色网格而没有网络连接，所以我的问题是：MKMapview 在离线时加载地图数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T02:24:11.570

**不可以。**您需要有效的互联网连接才能查看地图数据。但是，一些切片已缓存，但这些切片仍需要在某个时候下载。

此外，您将无法在这些图块中搜索位置，并且距离/坐标数据也可能不准确。

# get - Soundcloud API - 通过 created_at 订购结果

> ID：10611189
> 
> 赞同：2
> 
> 时间：2012-05-16T02:19:52.180
> 
> 标签：get, soundcloud

我正在尝试向 SoundCloud API 执行 GET 请求，该 API 按搜索词提取 5 个最新曲目。这是我的查询网址：

```
'http://api.soundcloud.com/tracks.json?{client_id={}&q={search_term}&limit=5&streamable=true&order=created_at' 
```

但是，这不会按 created_at 顺序返回轨道。我宁愿不必解析最新曲目的数据。我也试过了`order=latest`。

**编辑：**这是我的确切查询 URL（减去客户端 ID）和输出：

```
http://api.soundcloud.com/tracks.json?client_id={}&q=the%20fray&limit=5&streamable=true&order=created_at

[ { kind: 'track',
id: 16393251,
created_at: '2011/06/02 13:44:54 +0000',
user_id: 3050663,
duration: 40269,
commentable: true,
state: 'finished',
original_content_size: 1337259,
sharing: 'public',
tag_list: '',
permalink: 'the-fray',
description: '',
streamable: true,
downloadable: false,
genre: '',
release: '',
purchase_url: null,
purchase_title: null,
label_id: null,
label_name: '',
isrc: '',
video_url: null,
track_type: '',
key_signature: '',
bpm: null,
title: 'The Fray',
release_year: null,
release_month: null,
release_day: null,
original_format: 'm4a',
license: 'all-rights-reserved',
uri: 'http://api.soundcloud.com/tracks/16393251',
permalink_url: 'http://soundcloud.com/justasterisms/the-fray',
artwork_url: null,
waveform_url: 'http://w1.sndcdn.com/YcZLLwkjn2oz_m.png',
user: 
 { id: 3050663,
   kind: 'user',
   permalink: 'justasterisms',
   username: 'justasterisms',
   uri: 'http://api.soundcloud.com/users/3050663',
   permalink_url: 'http://soundcloud.com/justasterisms',
   avatar_url: 'http://a1.sndcdn.com/images/default_avatar_large.png?2262bae' },
stream_url: 'http://api.soundcloud.com/tracks/16393251/stream',
playback_count: 1676,
download_count: 0,
favoritings_count: 6,
comment_count: 0,
attachments_uri: 'http://api.soundcloud.com/tracks/16393251/attachments' },
{ kind: 'track',
id: 45035516,
created_at: '2012/05/02 04:42:13 +0000',
user_id: 16225631,
duration: 175530,
commentable: true,
state: 'finished',
original_content_size: 4213990,
sharing: 'public',
tag_list: '',
permalink: 'fray-fowling',
description: '',
streamable: true,
downloadable: true,
genre: '',
release: '',
purchase_url: null,
purchase_title: null,
label_id: null,
label_name: '',
isrc: '',
video_url: null,
track_type: '',
key_signature: '',
bpm: null,
title: 'Fray Fowling',
release_year: null,
release_month: null,
release_day: null,
original_format: 'mp3',
license: 'all-rights-reserved',
uri: 'http://api.soundcloud.com/tracks/45035516',
permalink_url: 'http://soundcloud.com/the-talismen/fray-fowling',
artwork_url: null,
waveform_url: 'http://w1.sndcdn.com/cw8gJ5nC2QHr_m.png',
user: 
 { id: 16225631,
   kind: 'user',
   permalink: 'the-talismen',
   username: 'The Talismen',
   uri: 'http://api.soundcloud.com/users/16225631',
   permalink_url: 'http://soundcloud.com/the-talismen',
   avatar_url: 'http://a1.sndcdn.com/images/default_avatar_large.png?2262bae' },
stream_url: 'http://api.soundcloud.com/tracks/45035516/stream',
download_url: 'http://api.soundcloud.com/tracks/45035516/download',
playback_count: 63,
download_count: 4,
favoritings_count: 0,
comment_count: 0,
attachments_uri: 'http://api.soundcloud.com/tracks/45035516/attachments' },
{ kind: 'track',
id: 26629456,
created_at: '2011/10/28 19:23:40 +0000',
user_id: 8445112,
duration: 159956,
commentable: true,
state: 'finished',
original_content_size: 4094284,
sharing: 'public',
tag_list: '',
permalink: 'samora-the-fray',
description: '',
streamable: true,
downloadable: false,
genre: 'Metal',
release: '',
purchase_url: null,
purchase_title: null,
label_id: null,
label_name: '',
isrc: null,
video_url: null,
track_type: null,
key_signature: null,
bpm: null,
title: 'Samora - The Fray',
release_year: null,
release_month: null,
release_day: null,
original_format: 'mp3',
license: 'all-rights-reserved',
uri: 'http://api.soundcloud.com/tracks/26629456',
permalink_url: 'http://soundcloud.com/theundergroundtour/samora-the-fray',
artwork_url: 'http://i1.sndcdn.com/artworks-000013441907-zfq9uz-large.jpg?2262bae',
waveform_url: 'http://w1.sndcdn.com/PGZOOd4DRbp4_m.png',
user: 
 { id: 8445112,
   kind: 'user',
   permalink: 'theundergroundtour',
   username: 'The Underground Tour',
   uri: 'http://api.soundcloud.com/users/8445112',
   permalink_url: 'http://soundcloud.com/theundergroundtour',
   avatar_url: 'http://i1.sndcdn.com/avatars-000007060505-pny4ej-large.jpg?2262bae' },
stream_url: 'http://api.soundcloud.com/tracks/26629456/stream',
playback_count: 811,
download_count: 0,
favoritings_count: 4,
comment_count: 0,
attachments_uri: 'http://api.soundcloud.com/tracks/26629456/attachments' },
{ kind: 'track',
id: 43622727,
created_at: '2012/04/19 04:37:43 +0000',
user_id: 15152175,
duration: 212011,
commentable: true,
state: 'finished',
original_content_size: 1752217,
sharing: 'public',
tag_list: 'soundcloud:source=iphone-record',
permalink: 'the-fray-heartbeat',
description: null,
streamable: true,
downloadable: true,
genre: null,
release: null,
purchase_url: null,
purchase_title: null,
label_id: null,
label_name: null,
isrc: null,
video_url: null,
track_type: 'recording',
key_signature: null,
bpm: null,
title: 'The Fray -- heartbeat',
release_year: null,
release_month: null,
release_day: null,
original_format: 'm4a',
license: 'all-rights-reserved',
uri: 'http://api.soundcloud.com/tracks/43622727',
permalink_url: 'http://soundcloud.com/nataliazea/the-fray-heartbeat',
artwork_url: 'http://i1.sndcdn.com/artworks-000021902063-s1cezf-large.jpg?2262bae',
waveform_url: 'http://w1.sndcdn.com/2IToTsm3iiCv_m.png',
user: 
 { id: 15152175,
   kind: 'user',
   permalink: 'nataliazea',
   username: 'nataliazea',
   uri: 'http://api.soundcloud.com/users/15152175',
   permalink_url: 'http://soundcloud.com/nataliazea',
   avatar_url: 'http://i1.sndcdn.com/avatars-000013390559-q9pep5-large.jpg?2262bae' },
stream_url: 'http://api.soundcloud.com/tracks/43622727/stream',
download_url: 'http://api.soundcloud.com/tracks/43622727/download',
playback_count: 563,
download_count: 45,
favoritings_count: 2,
comment_count: 0,
created_with: 
 { id: 124,
   kind: 'app',
   name: 'SoundCloud iOS',
   uri: 'http://api.soundcloud.com/apps/124',
   permalink_url: 'http://soundcloud.com/apps/iphone',
   external_url: 'http://itunes.com/app/soundcloud' },
attachments_uri: 'http://api.soundcloud.com/tracks/43622727/attachments' },
{ kind: 'track',
id: 119301,
created_at: '2009/01/21 18:50:00 +0000',
user_id: 62320,
duration: 158824,
commentable: true,
state: 'finished',
original_content_size: 2546372,
sharing: 'public',
tag_list: '',
permalink: 'the-fray-interview',
description: '',
streamable: true,
downloadable: true,
genre: '',
release: '',
purchase_url: null,
purchase_title: null,
label_id: null,
label_name: '',
isrc: '',
video_url: null,
track_type: '',
key_signature: '',
bpm: null,
title: 'The Fray interview',
release_year: null,
release_month: null,
release_day: null,
original_format: 'mp3',
license: 'all-rights-reserved',
uri: 'http://api.soundcloud.com/tracks/119301',
permalink_url: 'http://soundcloud.com/mattlissack/the-fray-interview',
artwork_url: null,
waveform_url: 'http://w1.sndcdn.com/1Ehu7uCn4vg6_m.png',
user: 
 { id: 62320,
   kind: 'user',
   permalink: 'mattlissack',
   username: 'mattlissack',
   uri: 'http://api.soundcloud.com/users/62320',
   permalink_url: 'http://soundcloud.com/mattlissack',
   avatar_url: 'http://a1.sndcdn.com/images/default_avatar_large.png?2262bae' },
stream_url: 'http://api.soundcloud.com/tracks/119301/stream',
download_url: 'http://api.soundcloud.com/tracks/119301/download',
playback_count: 613,
download_count: 5,
favoritings_count: 0,
comment_count: 0,
attachments_uri: 'http://api.soundcloud.com/tracks/119301/attachments' } ] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T08:06:14.103

从这里的文档：http: [//developers.soundcloud.com/docs/api/tracks](http://developers.soundcloud.com/docs/api/tracks) 你可以使用 `&order=created_at`或`&order=hotness`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-28T08:02:59.767

仅供参考 [https://developers.soundcloud.com/blog/removing-hotness-param](https://developers.soundcloud.com/blog/removing-hotness-param)

我不知道每个人仍然面临同样的问题，但我是，所以我把这篇文章留在这里:)

# .net - 对象从其容器中移除自身

> ID：10611193
> 
> 赞同：0
> 
> 时间：2012-05-16T02:20:18.290
> 
> 标签：.net, oop

什么是好的 OOP 方式？

现在，每个对象都包含对其容器的引用以及其键或索引的副本，以在该容器中标识自己。DeleteMe() 方法调用容器的 Delete(key) 方法。我认为这很糟糕，因为紧密耦合、循环引用和键/索引的重复副本。

我想这样做的原因是因为每个对象都在 UI 中表示，并且有一个由自身生成的上下文菜单，其中包含“删除”和“重命名”等选项。

我听说可以在这里使用代表或事件，但我并不真正了解它们背​​后的动机，以及它们是否只是对我来说的 YAGNI。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:30:40.970

理想情况下，删除、重命名操作不应该属于对象，这些应该只属于容器。

> > 我想这样做的原因是因为每个对象都在 UI 中表示，并且有一个由自身生成的上下文菜单，带有“删除”和“重命名”等选项

容器上的静态操作应该像这样调用

```
 container.Delete(Object)
  container.Rename(Object, String newName) 
```

通过在对象本身上创建 DeleteMe，Rename，您正在创建依赖于容器的对象，然后它不能用于存储在 List、Dictionary 等其他容器中（否则 DeleteMe 将失败）

现在对于 Delete Handler 应该从容器中删除对象的要求，您可以使用[command pattern](http://en.wikipedia.org/wiki/Command_pattern)。例如

```
DeleteCommand command = new DeleteCommand(); // Create new Command 
CommandManager.Register(command); // Create CommandManager class that will have mechanism of registering command, and has reference to object container. method is something like command.Set(Object container)
command.Execute(this); // pass instance as parameter, and in the Execute it will be similar to container.Remove(parameter); 
```

以上代码只是大纲，大家可以根据需求自定义。可以类似地添加其他操作（如重命名）。

# mysql - 当您需要一对字段同时匹配时，如何执行类似 IN() 的操作？

> ID：10611194
> 
> 赞同：2
> 
> 时间：2012-05-16T02:20:18.333
> 
> 标签：mysql

我有一个网络（内联网）工具，可以将用户列表解析为名字和姓氏的数组。然后我循环遍历该数组（可能是 50 次），例如：

```
SELECT * FROM users WHERE last_name = array[x].last AND first_name = array[x].first 
```

是否有可能以某种方式同时查询所有这些名字/姓氏组合，就像`IN`具有两个属性的语句一样。

如果可能的话，我会喜欢一个查询，该查询返回找到的每个匹配项的记录集（我想就像一个带有 2 个属性的 IN 语句）。我对 MySQL 不是很好，但我猜这就像让一个子查询收集任何名字匹配的列表，然后另一个子查询收集任何姓氏匹配。

实际上，您知道如果我只是在那里进行查询，因为`where first_name IN () OR last_name in ()`我会有一个包含任何可能匹配的结果集，然后我可以遍历该结果集，最后检查名字和姓氏都匹配的位置。这个数据库很快，但它很大。例如，有 8,000 多个用户

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:24:47.537

这是 MySQL[行构造函数](http://dev.mysql.com/doc/refman/5.0/en/row-subqueries.html)的一个很好的技巧：

```
CREATE TABLE users (
    first VARCHAR(50),
    last Varchar(50)
);

INSERT INTO users (first, last) VALUES
('Bill', 'Gates'), ('Steve', 'Jobs'), ('Jon', 'Skeet');

SELECT *
  FROM users
 WHERE (first, last) = ('Bill', 'Gates')
    OR (first, last) = ('Steve', 'Jobs')
    OR (first, last) = ('Jon', 'Skeet'); 
```

[http://sqlfiddle.com/#!2/6ef9a/2](http://sqlfiddle.com/#!2/6ef9a/2)

它也适用于`IN`：

```
SELECT *
  FROM users
 WHERE (first, last) IN(
   ('Bill', 'Gates'), ('Steve', 'Jobs'), ('Jon', 'Skeet')
); 
```

[http://sqlfiddle.com/#!2/6ef9a/6](http://sqlfiddle.com/#!2/6ef9a/6)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T02:23:27.087

您可以[`UNION`](http://dev.mysql.com/doc/refman/5.6/en/union.html)将一堆单独的 SQL 查询放在一起并获得一个结果集。

```
SELECT * FROM users WHERE last_name = array[0].last AND array[0].first = first_name
    UNION
SELECT * FROM users WHERE last_name = array[1].last AND array[1].first = first_name
    UNION
SELECT * FROM users WHERE last_name = array[2].last AND array[2].first = first_name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T02:27:40.123

您可以先连接名称，然后使用 IN 子句。

```
SELECT * FROM users WHERE CONCAT_WS('|', last_name, first_name) IN (...); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T06:12:10.550

8000 条记录对于现代数据库来说并不“庞大”……它是“微小的”。也就是说，如果您当前的解决方案对您来说性能不够快（您确实测量了性能并在询问之前发现它是不可接受的，对吧？），“正确”的解决方案如下：

1.  向表中添加`nameKey`列（字符串）
2.  编写一个触发器以在插入时填充它并使用“lastName|firstName”进行更新；也就是说，姓氏、数据中不会出现的分隔符和名字的串联。
3.  在上面创建索引
4.  `IN()`搜索时，在子句中提供串联的“lastName|firstName”键。

# php - javascript中memoization的真实世界示例？

> ID：10611196
> 
> 赞同：3
> 
> 时间：2012-05-16T02:20:23.797
> 
> 标签：php, javascript, recursion, memoization

我找到了诸如阶乘计算之类的例子来解释[memoization](http://en.wikipedia.org/wiki/Memoization)。这些很有帮助，但我正在寻找更深入的理解。

我想知道是否有人可以描述这种技术在现实世界中的应用，以及为什么他们使用它而不是递归或者他们认为使用记忆化可能有助于他们优化的任何其他方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T02:34:22.750

记忆比缓存更具体一点。

考虑使用选择器在 DOM 中搜索元素，就像使用 jQuery 一样。说，`$('.some-selector')`。在这种情况下，我调用函数`$`，告诉它为我找到所有具有 CSS 选择器“.some-selector”的元素。假设文档很大，我需要调用`$('.some-selector')`很多次。

您可以假设每次调用`$('.some-selector')`都将返回相同的结果，因此，每次调用时执行实际处理都是浪费精力。因此，`$`可以使用参数（在这种情况下为“.some-selector”）作为某个查找表或字典中的键。第一次使用该参数调用函数时，它会正常处理，使用参数作为键将结果放入字典中，然后返回结果。后续调用会发现该键在字典中有一个值，表示已经计算过的结果，所以它只是返回那些之前的结果。最终效果是您不会浪费时间寻找您已经知道的结果。

一个粗略的 JavaScript 示例：

```
var _dictionary = {};

function $(selector) {
   if (_dictionary[selector]) return _dictionary[selector]; // lookup the results of the selector and return them if they exist

   // otherwise, execute the function's logic normally
   // TODO: search logic
   var results = doSearch();

   _dictionary[selector] = results;

   return results;

} 
```

[此链接](http://addyosmani.com/blog/faster-javascript-memoization/)更详细，甚至包括`memoize`可用于任何其他功能的通用 JS 函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T02:26:42.047

您可以使用 memoization 进行各种缓存。例如，您可以缓存一些 ajax 调用的结果。

例子：

```
var cache = new Array()

function memoized_ajax(url, callback) (
  if (cache[url]) {      
    callback(cache[url]);  // we already know the result for this url
  }
  else {
    $.ajax({
      url: url,
      success: function(data) {
        cache[url] = data;   // we will remember result for this url
        callback(data);
    });
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-16T02:31:11.263

如果你愿意，你可以删除它，因为我不能真正回答你的问题（即给你一个使用记忆的例子），但我想指出记忆是为了解决与递归完全不同类型的问题。记忆化*存储*方法调用的输出，以便派生未来相同方法调用（相同参数和对象绑定）的结果是查找而不是计算。递归是一种函数算法。这意味着它们并不反对，因为您可以记住递归函数的输出。

# ruby-on-rails - 有条件的集合选择

> ID：10611197
> 
> 赞同：0
> 
> 时间：2012-05-16T02:20:50.753
> 
> 标签：ruby-on-rails

再会！我有两个下拉菜单。一个用于区域，一个用于分区。当我从区域菜单中选择一个选项时，我希望过滤我的分区菜单，其中仅包含所选区域上的分区。这是我的代码示例：

```
<td>
    <label for="docu_reg">Region</label>
    <%= collection_select :docu, :reg, Region.find(:all), :reg_name, :reg+name, {:include_black => 'None' } %>
</td>
<td>
    <label for="docu_div">Division</label>
    <%= collection_select :docu, :division, Division.find(:all, :order => "div_name ASC", :div_name, :div_name, {:include_blank => 'None'} %>
</td> 
```

它目前正在工作，但它显示了所有的部门:) 我在 Rails 上使用 ruby​​。感谢以后的回复=D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:03:08.250

您需要 javascript 来实现这一点，而且还有很多方法可以做到这一点。我认为没有人可以在这里准确地解释如何做到这一点，所以你真的应该搜索一些教程。

这个有点旧，也许有一些新的方法（也许更好）来做到这一点，但这会给你一些关于你应该如何做的提示。

[http://railscasts.com/episodes/88-dynamic-select-menus](http://railscasts.com/episodes/88-dynamic-select-menus)

# session - 避免用户使用旧会话/其他用户会话访问网页

> ID：10611198
> 
> 赞同：0
> 
> 时间：2012-05-16T02:20:55.947
> 
> 标签：session, login

我试图在 30 分钟后销毁当前用户会话。它工作正常。问题是

1）当其他用户在新选项卡中打开网页链接时，他们设法访问该页面而无需进行 tru 登录过程。

我试过按照这个教程

[http://www.homeandlearn.co.uk/php/php14p3.html](http://www.homeandlearn.co.uk/php/php14p3.html)

```
<?PHP

session_start();

if (!(isset($_SESSION['login']) && $_SESSION['login'] != '')) {
header ("Location: login.php");
}

?> 
```

但它不工作。因为旧会话尚未被销毁（不到 30 分钟）..

我应该怎么办？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:03:17.130

通常，用户的登录会话存储在每个网站的单个 cookie 中，该 cookie 在单个浏览器的所有窗口和选项卡中共享。清除浏览器中的 cookie 将需要您再次登录，因为当您下次访问远程网站（您的 PHP 站点）时，您将不再使用旧会话 id 传递 cookie。

当两个人使用相同的浏览器时，这会给您带来问题，因为您网站的 cookie 对两个人来说都是相同的。

您的一个选择是在您的 PHP 站点上提供一个手动“注销”按钮，这将在 30 分钟超时发生之前破坏会话。但是，不能保证用户在完成后会单击此按钮。

[来自会话 id 传递](http://www.php.net/manual/en/session.idpassing.php)的 PHP 文档：

> 传播会话 id 有两种方法：
> 
> *   饼干
>     
>     
> *   网址参数
>     
>     
> 
> session 模块支持这两种方法。Cookie 是最佳选择，但由于它们并不总是可用，我们还提供了另一种方式。第二种方法将会话 ID 直接嵌入到 URL 中。

这表明还有另一个选项可供您启用运行时选项`session.use_trans_sid`，并且会话 ID 嵌入在每个 url 中，而不是存储在 cookie 中。有了这个，你会得到类似于`mysession=123`以下网址末尾的值：`www.example.com/home.php?mysession=123`

因此，如果用户 1 访问 www.example.com 并执行登录`mysession=123`，那么只要他们的会话处于活动状态，每个链接都会在其末尾出现。

然后用户 2 在新选项卡中浏览到 www.example.com 并要求他们再次登录，因为`mysession=###`他们输入的 url 中没有值。在此选项卡上登录后，每个链接都会有一个新的 mysession 值，例如`www.example.com/home.php?mysession=345`

**警告：**大多数网站更喜欢使用 cookie 是有原因的，您可以在这篇关于PHP 文档中的[use-trans-sid 设置的说明中看到。](http://www.php.net/manual/en/session.configuration.php#ini.session.use-trans-sid)

> 与基于 cookie 的会话管理相比，基于 URL 的会话管理具有额外的安全风险。例如，用户可以通过电子邮件将包含活动会话 ID 的 URL 发送给他们的朋友，或者用户可以将包含会话 ID 的 URL 保存到他们的书签并始终使用相同的会话 ID 访问您的站点。

# jquery - 单击其中包含 DIV1 内容的 DIV1 后创建叠加层

> ID：10611201
> 
> 赞同：0
> 
> 时间：2012-05-16T02:21:08.987
> 
> 标签：jquery

基本上，我有一页内容都放在 .box 中。

我需要的是当我单击 .box 并在叠加层中有 .box 内容时创建一个叠加层。

我不确定我是否做得对，因为我是 jQuery 的新手。我创建了一个类 .overlay 并在单击时将该类添加到 .box 但它根本不起作用。这是我的代码，所以我希望有人能引导我走向正确的方向。

```
.overlay {
position: fixed;
top:0;
left:0;
width: 100%;
height: 100%;
background-color: #000;
filter:alpha(opacity=50);
-moz-opacity:0.5;
-khtml-opacity: 0.5;
opacity: 0.5;
z-index: 10000;
}

(function () {

$(document).ready(function(){
       $(".box").click(function(){
           $(".overlay").removeClass("overlay");
           $(this).addClass("overlay");
   });   

       $(document).click(function(){
           $(".overlay").removeClass("overlay");
       });
   });
}(jQuery)); 
```

html

```
<div class="box overlay">
<p>content></p>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T02:27:48.817

既然你有这个代码

```
$(document).click(function(){
           $(".overlay").removeClass("overlay");
       }); 
```

只要有点击事件，它就会删除`overlay`类，因为根据您的问题，您只需要在单击时将其删除`.box`，您不需要此代码，或者如果您在单击任何特定元素时将其删除，请提供适当的选择器对于 id、class 等元素

编辑根据评论：

当前，您正在加载元素时添加覆盖类，这导致了问题。

将您的 html 更改为

```
<div class="box">
   <p>content></p>
</div> 
```

你的 javascript

```
$(".box").click(function() {
    $(".overlay").removeClass("overlay");
    $(this).addClass("overlay");
}); 
```

[演示](http://jsfiddle.net/mprabhat/CsztD/4/)

# c# - 在这种情况下，Regex 的正确用途是什么？

> ID：10611202
> 
> 赞同：0
> 
> 时间：2012-05-16T02:21:12.967
> 
> 标签：c#, regex

我有必要解析和转换某种 URL 部分，我现在是这样做的：

```
Regex s_re = new Regex(@"^/(lang_([^/]*)/)?([^/]*)([^\?]*)\??(.*)$", RegexOptions.IgnoreCase);

const string Url = "...";

MatchCollection matches = s_re.Matches(Url);
if(matches.Count==0) return false;//can't find matches

string strLang = s_re.Replace(Url, @"$2");
string strAddr = s_re.Replace(Url, @"$3"); 
```

我是否正确理解在这种情况下我的 URL 被解析了 3 次（原始匹配和每次替换）。在最好的情况下，它应该只解析一次，并且应该使用结果。

我怀疑我应该使用其他东西，而不是跟随“替换”的调用，但找不到确切的东西。

您能否提一些建议？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:33:36.297

你应该这样做：

```
Match match = regexData.Match(line);
if (!match.Success) return false;
string val1 = match.Groups[0].Value;
string val2 = match.Groups[1].Value; 
```

此外，您可能希望将 RegexOptions.CultureInvariant 与 RegexOptions.IgnoreCase 一起使用，否则它会使用本地文化的大小写约定而不是 unicode。[更多关于 msdn](http://msdn.microsoft.com/en-us/library/yd1hzczs.aspx)

# java - 如何将数据从 Java 客户端发送到 C++ 服务器？

> ID：10611205
> 
> 赞同：1
> 
> 时间：2012-05-16T02:21:28.880
> 
> 标签：java, c++, sockets, client

Java 客户端可以使用 TCP 连接到 C++ 服务器。Java 客户端在 Win7 上。C++ 服务器位于 Linux 上。

问题是我无法成功地将数据发送到 C++ 服务器。Java代码是：

```
public static void main (String [] args ) throws IOException {
    Socket sock = new Socket("10.217.140.200",7000); 

    String id = "TEST";
    char encoding = 'a';

    ObjectOutputStream oos = new ObjectOutputStream(sock.getOutputStream());
    oos.flush();

    oos.writeObject(encoding); 
```

* * *

在您的帮助之后，我现在使用 outputstream 并且它可以工作。请记住删除，`ObjectOutputStream oos = new ObjectOutputStream(sock.getOutputStream());`否则它将向 C++ 服务器输出 4 个字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T02:26:12.007

您正在使用[`ObjectOutputStream`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)，它执行[Java 对象序列化](http://java.sun.com/developer/technicalArticles/Programming/serialization/)。这不是（很容易）跨语言移植的。由于您只发送一个字符串，因此您不需要使用`ObjectOutputStream`- 只需使用`OutputStream`从套接字返回的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:49:44.910

在更新您的代码以不使用 ObjectOutputStream 之后，我猜测您的问题可能出在 C++ 服务器中，或者是因为在通过套接字传输之前没有将字符串转换为 ASCII。Java 字符串可以用各种编码表示，包括 Unicode。

这对你有用吗？

```
public static void main (String [] args ) throws IOException
{
    Socket sock = new Socket("10.217.140.200",7000);
    String id = "TEST";

    OutputStream oos = sock.getOutputStream();

    oos.write( id.getBytes("US-ASCII") );
    oos.flush();
} 
```

如果没有，请通过编辑您的问题发布您更新的客户端和服务器端代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T02:39:41.523

我强烈建议使用一些 3rd-party 库来序列化您的对象。手动操作非常耗时（对您而言）并且容易出错。

[我个人是Google Protocol Buffers](http://code.google.com/p/protobuf/)的忠实粉丝。我在几乎所有项目（Java 服务器、.Net 客户端、C++ 客户端）中都积极使用它。

***它是什么？** 协议缓冲区是一种以高效且可扩展的格式对结构化数据进行编码的方法。Google 几乎所有内部​​ RPC 协议和文件格式都使用协议缓冲区。*

不同语言的实现列表在**[这里](http://code.google.com/p/protobuf/wiki/ThirdPartyAddOns)**。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T03:01:21.747

你也可以在你的 C++ 端使用 JNI 来处理反序列化的东西。

您不能直接使用 C++ 反序列化 Java 对象。

# javascript - jQuery 插件 this.attr("id") 未定义

> ID：10611207
> 
> 赞同：1
> 
> 时间：2012-05-16T02:21:38.503
> 
> 标签：javascript, jquery, jquery-plugins

为什么来电`console.log(this.attr("id"));`未定义？

```
(function( $ ) {
    $.fn.fs_suggest = function(options) {
        console.log(this.attr("id"));
    };
})( jQuery );

$("#places_search").fs_suggest(); 
```

这是HTML：

```
<div class="search_container" id="search">
    <form data-remote="false" method="get" action="/search">
        <input type="text" placeholder="search places" name="query" id="places_search">
        <input type="submit" value="search">
    </form>
</div> 
```

我正在尝试获取对调用 .fs_suggest() 函数的元素的引用，在本例中为 $("#places_search")

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T02:23:05.197

我想你想要这个：

```
console.log($(this).attr("id")); 
```

除非我弄错了，否则`this`指的是一个 DOM 元素（它没有`attr`函数），而`$(this)`获取实际的 jQuery 对象（它有）。

* * *

如果这（或者我的意思是`this`？呵呵……）不起作用，那么您只是在不正确的选择器上调用该函数。

* * *

在进一步阅读 jQuery 文档后，您的问题似乎出在您提供给我们的上下文之外的其他地方。你是在 DOM 正确加载之前调用你的插件吗？（例如在 之外`$(document).ready()`）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T02:53:30.923

我不是 100% 这个符号产生的东西：

```
$.fn.fs_suggest = function(options) {
... 
```

但是如果`$.fn`解析为一个对象并且`fs_suggest`是该对象的一个​​属性，那么`this`函数内部将引用该对象而不是 DOM 元素或 jQuery 包装元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T18:32:06.630

我已经解决了这个问题。问题是我没有将对 fs_suggest() 的调用放在文档就绪块中。所以答案就是这样称呼它。

places.js.coffee：

```
$ ->    
    $("#places_search").fs_suggest() 
```

在另一个文件中插件：

```
(function( $ ) {
    $.fn.fs_suggest = function(options) {
        console.log(this.attr("id"));
    };
})( jQuery ); 
```

现在将看到“this”，并将等同于 $("#places_search")。

# r - R：eval（parse（））错误消息：即使在解析中指定了“text =”，也无法打开文件

> ID：10611209
> 
> 赞同：4
> 
> 时间：2012-05-16T02:21:48.263
> 
> 标签：r, parsing, loops, eval

我正在多次对国家列表进行分析，并且在每次迭代期间，应将结果添加到向量中。下面我展示了一个简化的例子，没有一个国家的循环。即使我彻底寻找解决方案，我也找不到答案。

```
#this is my simplified country vector with just 1 country    
country<-c("Spain")

#This is the vector that should hold the results of multiple iterations
#for now, it contains only the result of the first iteration   
Spain.condition1<- 10

#reading result vector in a variable (this is automized in a loop in my code)
resultVector<-paste(country,"condition1",sep=".")

#when I call the content of the vector with parse, eval
#I see the content of the vector as expected

eval(parse(text=resultVector))

#however, when I try to add a second result to it

eval(parse(text=resultVector))[2]<-2

#I get following error message: 

#Error in file(filename, "r") : cannot open the connection
#In addition: Warning message:
#In file(filename, "r") :
#  cannot open file 'Spain.condition1': No such file or directory 
```

任何人都可以帮助我或让我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T02:45:10.763

分配给`eval`不能保证有效。这是使用它通常不是一个好主意的多种原因之一`eval`。

为什么不将国家及其条件存储在命名列表中，如下所示：

```
conditions = list()
conditions[["Spain"]] = list()
conditions[["Spain"]][["condition1"]] <- 10
conditions[["Spain"]][["condition1"]][2] <- 2

conditions[["Spain"]][["condition1"]]
# [1] 10  2 
```

ETA：使用循环（我不确切知道您的问题的结构是什么，但这是一般的想法）：

```
countries = c("Spain", "England", "France", "Germany", "USA") # and so on
conditions = c("Sunny", "Rainy", "Snowing") # or something

data = list()
for (country in countries) {
    data[[country]] <- list()
    for (condition in conditions) {
        data[[country]][[condition]] <- 4 # assign appropriate value here
    }
} 
```

它也可以由制表符分隔的文件构建，或以适合您的问题的任何方式生成 - R 功能强大。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T02:59:05.553

David 的解决方案要好得多，但您可以使用 get 和 assign 来做到这一点。

```
country <- "Spain"
Spain.condition1 <- 10
resultVector <- paste(country, "condition1", sep=".")
eval(parse(text=resultVector))
#[1] 10

# Now this is one way to modify that object
# Note that we *need* to assign to a temporary object
# and just using get(resultVector)[2] <- 2 won't work
tmp <- get(resultVector)
tmp[2] <- 2
assign(resultVector, tmp)
Spain.condition1
#[1] 10  2

# We could alternatively do this with eval
# Even if it is a bad idea
eval(parse(text = paste0(resultVector, "[2] <- 3")))
Spain.condition1
#[1] 10  3 
```

# facebook - 检查 Facebook 用户登录状态

> ID：10611218
> 
> 赞同：-6
> 
> 时间：2012-05-16T02:23:05.713
> 
> 标签：facebook

我有一个网站。我用 PHP 来做。在主页中，我想检查用户是否仍登录/未登录 facebook。

如果 facebook 会话可用 alert("OK") 否则 alert("No")

我已经尝试过这段代码，但它对我不起作用

```
<html> 
<head> 

</head>

<body> 
<script>
function logged() {
    alert('logged');
}
function notlogged() {
    alert('not logged');
}
</script>
<script src="http://www.facebook.com/ajax/composer/attachment/question/question.php" onload="logged()" onerror="notlogged()">
</body> 
</html> 
```

当我从 Facebook 注销后，此代码警报已记录。

这段代码有什么问题？

谢谢

此致; 塔里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T02:27:34.273

这段代码什么都不做。这段代码不可能做任何有用的事情。

# .net - 使用外键作为复合主键对第一个联结表进行建模？

> ID：10611219
> 
> 赞同：1
> 
> 时间：2012-05-16T02:23:10.187
> 
> 标签：.net, entity-framework, entity-framework-4.1, ef-model-first

我有一个`Job`表和一个`Contact`表，我需要创建另一个表`JobContact`以允许多对多，但我希望`JobId`and`ContactId`用作其主键。

我在设计器上需要它，所以我可以向它添加额外的列。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:43:24.997

在这种情况下，您必须在设计器中创建新实体并将和`JobContact`标记为实体键。之后，您可以向该实体添加其他属性并与实体创建一对多关系。`JobId``ContactId``Job``Contact`

# spring - Spring 2.5 SpringJUnit4ClassRunner 在使用 tx:annotation-driven 时无法自动装配

> ID：10611227
> 
> 赞同：0
> 
> 时间：2012-05-16T02:23:42.120
> 
> 标签：spring, autowired

测试代码

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:transactional/batch/context.xml" })
public class TransactionTest {
@Autowired
TestBatch testBatch; 
```

案例 1：TestBatch 自动连接到 TransactionTest 成功

上下文.xml

```
<context:annotation-config />
<bean id="testBatch" class="transactional.batch.TestBatch"/>
<tx:annotation-driven transaction-manager="transactionManager" proxy-target-class="true"/> 
```

案例2：但是这个案例失败了。

上下文.xml

```
<context:annotation-config />
<bean id="testBatch" class="transactional.batch.TestBatch"/>
<tx:annotation-driven transaction-manager="transactionManager"/> 
```

例外

```
引起：org.springframework.beans.factory.BeanCreationException：无法自动装配字段：transactional.batch.TestBatch transactional.batch.TransactionTest.testBatch；嵌套异常是 org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义类型 [transactional.batch.TestBatch] 的唯一 bean：未满足类型 [class transactional.batch.TestBatch] 的依赖关系：预计至少有 1 个匹配 bean
    在 org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:435)
    在 org.springframework.beans.factory.annotation.InjectionMetadata.injectFields(InjectionMetadata.java:105)
    在 org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessAfterInstantiation（AutowiredAnnotationBeanPostProcessor.java:240）
    ... 19 更多
原因：org.springframework.beans.factory.NoSuchBeanDefinitionException：没有定义类型 [transactional.batch.TestBatch] 的唯一 bean：类型 [class transactional.batch.TestBatch] 的不满足依赖性：预计至少有 1 个匹配 bean
    在 org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:613)
    在 org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:412)
    ... 21 更多

```

唯一不同的是`tx:annotation-driven`'`proxy-target-class`属性。

为什么要`tx:annotation-driven`控制自动线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:22:08.777

我的猜测是它`TestBatch`实现了一个接口，并且有`@Transactional`它的一些方法。

`<tx:annotation-driven>`将为`TestBatch`. 默认情况下，如果`TestBatch`实现了任何接口，则此代理对象将实现这些接口，但不会扩展`TestBatch. If you use`proxyTargetClass `, then the generated proxy object will instead subclass`TestBatch`。

由于您的单元测试要求对象是 type `TestBatch`，这意味着您必须`proxyTargetClass`在配置中使用。或者，更改您的单元测试以使用其中一个`TestBatch`接口，而不是`TestBatch`直接使用类型。

# python - 为什么 Python2.x 中新式类的“对象”父类不写成“对象”？

> ID：10611228
> 
> 赞同：2
> 
> 时间：2012-05-16T02:23:51.453
> 
> 标签：python, class, inheritance, object, styles

也许我有错误的印象，但是`class`对象的父类不会是一个类吗？如果是这样，为什么 Python 的作者不遵循良好的样式约定并将`object`类大写以`Object`将其表示为类对象？[这是一堂课](https://stackoverflow.com/a/7375621/881224)吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-16T02:27:45.090

*它遵循不*首字母大写的内置类型（`str`、`int`、`float`、`complex`、`file`、`type`等）的约定。

# iphone - postNotification 的观察者被多次调用

> ID：10611234
> 
> 赞同：4
> 
> 时间：2012-05-16T02:24:54.667
> 
> 标签：iphone, nsnotificationcenter

我正在使用 SplitViewController。在 MasterViewController 的 viewDidLoad 中：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(reloadMasterTable:) name:ReloadMasterTableNotification object:_detailViewController]; 
```

在 DetailViewController 中，我有两个文本字段。在 didEndEditing 上：

```
- (void)textFieldDidEndEditing:(UITextField *)textField {
    if ([_detailItem isKindOfClass:[Pill class]]) {
        Pill *p = (Pill *)_detailItem;

        if (textField.tag == TEXTFIELD_NAME_TAG) {
            p.name = textField.text;
        }

        if (textField.tag == TEXTFIELD_NOTE_TAG) {
            p.note = textField.text;
        }

        [self updateMasterTableView];
    }
}

- (void)updateMasterTableView {
    if ([_detailItem isKindOfClass:[Pill class]]) {
        Pill *currentPill = (Pill *)_detailItem;

        NSUInteger indexToReplace = [[[DataManager sharedInstance] pillArray] indexOfObject:currentPill];
        [[[DataManager sharedInstance] pillArray] replaceObjectAtIndex:indexToReplace withObject:currentPill];

        NSLog(@"i should update row: %i", indexToReplace);

        NSIndexPath *path = [NSIndexPath indexPathForRow:indexToReplace inSection:0];
        NSDictionary *dict = [[NSDictionary alloc] initWithObjectsAndKeys:path, @"IndexPath", nil];
        [[NSNotificationCenter defaultCenter] postNotificationName:ReloadMasterTableNotification object:self userInfo:dict];
    }
} 
```

从 NSLog 来看，当 text field 委托方法被调用时，它只被调用一次，然后 updateMasterTableView 被调用一次。当我通过调试器运行它时，在 reloadMasterTableView: 方法上放置一个断点，它会通过该方法两次。这是为什么？谢谢。

或者，如果有更好的方法可以在两个视图之间进行同步，我会全力以赴。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:50:36.203

我认为实现这一点的更好方法是实现委托模式。

在您的详细控制器 .h 中定义一个协议

```
@protocol PillDetailViewControllerDelegate <NSObject>

- (void)PillDetailViewController:(PillDetailViewController *)vc didUpdatePillAtIndexPath:(NSIndexPath)indexpath;

@end 
```

并添加委托属性

```
@property (nonatomic, assign) id<PillDetailViewControllerDelegate>delegate; 
```

在您的详细控制器.m 中，

```
@synthesize delegate; 
```

而不是在`updateMasterTableView`do 中发布您的通知：

```
[self.delegate PillDetailViewController:self didUpdatePillAtIndexPath:path]; 
```

最后在您的 MasterView 控制器中，设置委托并响应回调

希望这可以帮助

# c++ - Qt 中的 SQLite 验证

> ID：10611235
> 
> 赞同：0
> 
> 时间：2012-05-16T02:25:01.257
> 
> 标签：c++, sqlite, qt

问题：验证传入（编程）sqlite 数据库。在“验证”下，我的意思是检查数据库是否具有特定的表、表名、列（名称、类型、外键和主键）。

Qt 提供了一些方法，但我仍然找不到如何检查表、列类型中的外键。

有人优雅地解决了这个问题吗？也需要示例=）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T06:13:50.370

您需要手动完成。这是一个用于检查所需表的简单（未经测试）示例。

```
bool hasRequiredTables()
{
    QStringList reqTables;
    QStringList tables;

    reqTables<< "table1" << "table2" << "table3" << "etc";

    QString sql = "SELECT name FROM sqlite_master"
                  " WHERE type = 'table'"
                  " AND name NOT LIKE 'sqlite%';";

    QSqlQuery query ( sql, QSqlDatabase::database () );

    if ( !query.isValid() ){
       return false;
    }

    while ( query.next() )
       tables.append ( query.value ( 0 ).toString() );

    foreach ( QString t, reqTables ){
        if ( !tables.contains ( t, Qt::CaseInsensitive ) ){
           //qDebug() << "non-existent table: " << t;
           return false;
        }
    }

    // OK
    return true;
} 
```

一旦您对`sqlite_master`表中可用的信息足够熟悉，其他检查应该与此一样微不足道。

# java - 如何在 Eclipse 中轻松创建模型/UML？

> ID：10611237
> 
> 赞同：5
> 
> 时间：2012-05-16T02:25:18.740
> 
> 标签：java, eclipse, macos, uml, eclipse-emf-ecore

我正在尝试为几个包和大约 30 类代码创建一个图表。我需要能够展示这一切是如何相互联系和协同工作的。我研究了 eUML2，但据说它不适用于我的操作系统（Mac OS X 10.6.8）。因此，我并没有尝试使用 Ecore 手动创建一个，但这需要很长时间。有没有人有什么建议？谢谢。（仅供参考，代码是Java）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T09:36:52.687

您需要使用 UML 工具反转您的代码。

我知道 Omondo 与 Mac OS 配合得很好，因为我的一个队友正在使用它，他可以反转多个包以创建单个 UML 模型，但它不是免费的。我们还可以在使用同一模型时混合使用 PC 和 Mac。真的很酷:-)

# mysql - mysql，在 amazon/bitnami 上安装 phpmyadmin

> ID：10611243
> 
> 赞同：1
> 
> 时间：2012-05-16T02:26:35.443
> 
> 标签：mysql, amazon-ec2, amazon-web-services, phpmyadmin, bitnami

谁知道如何安装phpmyadmin？

我真的不知道从哪里开始这是我第一次安装 phpmyadmin。

如果您发布指向有关它的教程的链接，我将不胜感激；）

谢谢，庞吉利南国王

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T13:58:33.933

如果你想在亚马逊中使用 BitNami，你可以启动一个已经包含 phpMyAdmin的[BitNami LAMPStack AMI 。](http://bitnami.org/stack/lampstack#cloudImage)此外，如果您启动[BitNami Wordpress](http://bitnami.org/stacks)、Joomla 或任何其他 php 应用程序将包括 phpMyAdmin。

另一种选择是在 Amazon 中启动任何 Linux 映像并使用本机安装程序来安装 LAMP Stack。

无论如何，一旦您安装了这些信息，如果您想远程访问 phpMyAdmin，[这些信息可能对您有用。](http://wiki.bitnami.org/Components/phpMyAdmin_and_phpPgAdmin)

# ios5 - iOS ViewController Tableview 委托函数未被调用

> ID：10611246
> 
> 赞同：0
> 
> 时间：2012-05-16T02:27:22.103
> 
> 标签：ios5, uiviewcontroller, delegates

我有一个包含 TableView 的常规 ViewController。我正在使用情节提要来布置所有内容，但没有调用任何 TableView 委托函数。我需要做些什么来将 ViewController 设置为 TableView 的委托。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T02:30:00.123

您需要为表视图设置数据源和委托。转到情节提要并 ctrl+单击表视图并将其拖动到将控制表视图的视图控制器。将显示一个弹出窗口，您可以选择它作为数据源和委托。

# google-app-engine - Appengine：将数据上传到不同的实体类型

> ID：10611247
> 
> 赞同：0
> 
> 时间：2012-05-16T02:27:33.430
> 
> 标签：google-app-engine, google-cloud-datastore

假设我有实体种类 A，我创建了另一个与种类 A 调用种类 B 相同的实体种类。我使用内置加载程序下载了实体种类 A。我想将所有实体类型 A（我刚刚下载）上传到数据存储中的实体类型 B。这可能吗？

基本上我想将下载的数据上传到不同的类型。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T17:52:47.313

是的，散装装载机可以做到这一点。

# postgresql - 在 postgresql 中计算时间

> ID：10611256
> 
> 赞同：0
> 
> 时间：2012-05-16T02:28:01.737
> 
> 标签：postgresql

我在我的数据库中记录了一个事务的开始时间，并且我对每个这样的事务都有一个时间限制。我想在超时时发出警报。这是我能想到的两种方法。

1）让数据库自动计算，这样我就可以选择超过限制的记录。

2）从我的脚本中调用函数，给出当前时间，并计算数据库中每个事务的时间，然后选择老化的。

我更喜欢第一个解决方案，但我不知道该怎么做。我正在使用 Postgresql。有人帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:04:10.163

在 Postgres 中，您可以对时间值使用算术运算符。见这里： [http ://www.postgresql.org/docs/8.0/static/functions-datetime.html](http://www.postgresql.org/docs/8.0/static/functions-datetime.html)

您还可以创建一个“interval”类型的字面值，它表示开始时间和持续时间（或开始和停止时间，取决于您更喜欢如何看待它）。

因此，您可以执行以下操作（尚未测试）：

```
SELECT * FROM some_table 
WHERE timestamp_column - interval '1 hour' <= 0; 
```

# php - Cookie 在 Codeigniter 中的会话结束时过期

> ID：10611261
> 
> 赞同：1
> 
> 时间：2012-05-16T02:28:58.197
> 
> 标签：php, codeigniter, cookies, session-cookies, setcookie

我正在使用以下代码在我的 codeigniter 应用程序中设置一个 cookie。工作正常..但是cookie在会话结束时过期..请帮助

```
$cookie = array(
        'name'   => 'tvcUsername',
        'value'  => $email,
        'expire' => time()+86500,
        'domain' => 'http://localhost/tvc',
        'path'   => '/',
        'prefix' => '',

    );

    $this->input->set_cookie($cookie); 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:37:46.497

我能想到两件事：

a) localhost 不是有效域，因此不会为所有浏览器保存 cookie。为“my.dev.server”或“localhost.dev”创建自己的主机并指向 127.0.0.1（您可能还需要配置 apache 以响应该名称 - 但首先尝试更改 HOSTS 文件）

b）此外，您的“域”包括一个方案和一个路径 - 这可能会导致问题？设置为“localhost.dev”（删除“http://”和“/tvc”部分 - 一旦您离开 localhost。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T19:02:43.153

过期时间以秒为单位设置，将添加到当前时间。**不包括时间**，而只包括您希望 cookie 有效的秒数。

来源： [http ://ellislab.com/codeigniter/user-guide/libraries/input.html](http://ellislab.com/codeigniter/user-guide/libraries/input.html)

# jquery-mobile - 如何使用phonegap修复标题栏

> ID：10611273
> 
> 赞同：0
> 
> 时间：2012-05-16T02:31:12.320
> 
> 标签：jquery-mobile, cordova

我正在使用 phonegap 开发一个 android 应用程序，我想修复一个标题栏以防止滚动。它看起来像是 facebook 应用程序顶部的 facebook 标题栏。

我该怎么做？

问候。

![在此处输入图像描述](../Images/218316ac03f7f9b4e39f025b8cd47991.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T05:17:00.693

您可以通过在 jquery mobile 中使用固定工具栏来实现这一点。jquery mobile 文档页面中详细记录了如何实现这一点。这里是它的链接 - [http://jquerymobile.com/demos/1.1.0/docs /toolbars/bars-fixed.html](http://jquerymobile.com/demos/1.1.0/docs/toolbars/bars-fixed.html)

请注意，JQM 中正确的“固定”工具栏支持仅限于以下浏览器

```
Browser support for fixed toolbars

iOS5 – iPhone and iPad
Android 2.2 and 2.3
Android 3.x tablets (Honeycomb)
Android 4.x (ICS)
Chrome for Android (beta)
BB Playbook 1-2
BB7
Nook Color/Tablet
Kindle Fire
Kindle 3
All modern desktop browsers (IE, Firefox, Safari, Chrome, etc.) 
```

如JQM官方博客中所述 - [http://jquerymobile.com/blog/2012/04/13/announcing-jquery-mobile-1-1-0/](http://jquerymobile.com/blog/2012/04/13/announcing-jquery-mobile-1-1-0/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T05:16:54.083

如果我正确理解您的问题，您可以使用 JQM 的固定工具栏。

```
<div data-role="header" data-position="fixed">
    <h1>Fixed Header</h1>
</div> 
```

这是一个简单的 jqm 页面来说明这一点。[http://jsfiddle.net/codaniel/y7XAW/1/](http://jsfiddle.net/codaniel/y7XAW/1/)

# c - 如何从 stdio 打印和读取字符串

> ID：10611275
> 
> 赞同：1
> 
> 时间：2012-05-16T02:31:17.560
> 
> 标签：c

我需要知道如何从用户那里读取输入并打印答案。我该如何使用 char 数组来执行此操作？

这是我正在使用的代码

```
int array[500];
char array2[200];
printf("Please Enter The number of names: ");
scanf("%d",&num);

for(i=0;i<num;i++){
    array[i]=0;
    array2[i]="";
}
printf("\nPlease Enter names:");
for(i=0;i<num;i++){
    scanf("names: %s",array2[i]);
}
for(i=0;i<num;i++){
    printf("\n %s",array2[i]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T06:33:49.577

还行吧：

```
#include <stdio.h>

#define MAX_PEOPLE 128

static inline clear()
{
    while (getchar() != '\n');
}

int main()
{
    int num, i;
    int array[500];
    char array2[MAX_PEOPLE][200];
    printf("Please Enter The number of names: ");

    while (1)
    {
        if (scanf("%d",&num) != 1 || num > MAX_PEOPLE)
        {
            clear();
            printf("Again: ");
            continue;
        }

        break;
    }

    for(i = 0; i < num; i++)
    {
        array[i] = 0;
        array2[i][0] = '\0';
    }

    printf("\n");
    for(i = 0; i < num; i++)
    {
        printf("Please Enter names: ");
        scanf("%s",array2[i]);
    }

    printf("\n");
    for(i = 0; i < num; i++)
    {
        printf("arr[%d] = %s\n", i, array2[i]);
    }

    return 0;
} 
```

# c++ - 在理解 C++ 中的基本类的一小部分时需要帮助吗？

> ID：10611281
> 
> 赞同：2
> 
> 时间：2012-05-16T02:32:29.000
> 
> 标签：c++

有人可以解释一下 CVector CVector::operator+ (CVector param) 中正在做什么。点运算符如何与 temp 一起使用。我明白你什么时候做 object.function() 但是做 object.object 有什么意义？这只是让它们彼此相等吗？使困惑！​​！

```
#include <iostream>
using namespace std;

class CVector {
  public:
int x,y;
CVector () {};
CVector (int,int);
CVector operator + (CVector);
};

CVector::CVector (int a, int b) {
  x = a;
  y = b;
}

CVector CVector::operator+ (CVector param) {
   CVector temp;
   temp.x = x + param.x;
   temp.y = y + param.y;
   return (temp);
 }

 int main () {
   CVector a (3,1);
   CVector b (1,2);
   CVector c;
   c = a + b;
   cout << c.x << "," << c.y;
   return 0;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T02:36:14.483

这称为[运算符重载](http://www.cplusplus.com/doc/tutorial/classes2/)。在这种情况下，它允许您将两个 CVector 对象添加在一起，如`main`函数所示。

在`a + b`main 函数中发生时，调用对象的`operator+`方法，以. 因此，它构造了一个结合两者坐标的对象，并将其返回。`a``b``param``temp`

ETA：重读你的问题，我想你可能也在问什么

```
temp.x = x + param.x; 
```

方法。请注意，C++ 对象不仅具有可以调用的函数（如`object.function()`），它们还具有成员，这些成员本身就是可以访问和更改的变量。在这种情况下，`x`和`y`是属于`CVector`该类的整数。仔细阅读[本教程。](http://www.cplusplus.com/doc/tutorial/classes/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T02:40:22.753

我想你在问以下问题：

```
temp.x = x + param.x;
temp.y = y + param.y; 
```

在这种情况下，`.`操作员只访问临时`CVector`对象的成员。

您会在您的文件中看到`class CVector`您拥有公共实例成员`x`和`y`. CVector 对象的每个实例都有自己的 x 和 y`int`变量。

```
class CVector { 
  public: 
     int x,y; 
     ...
} 
```

因此 temp.x 正在访问值以进行读取或赋值，就像您访问代码块中的任何其他局部变量一样：

```
void SomeCalc(CVector temp){
   int sum;
   int z = 1;
   temp.x = 2;
   sum = z + temp.x; // sum now equals 3
} 
```

# dynamic - 使用 Jquery.Load() 动态加载时，Google CSE 无法正确加载

> ID：10611283
> 
> 赞同：0
> 
> 时间：2012-05-16T02:32:59.843
> 
> 标签：dynamic, jquery-load, google-custom-search

这是我目前正在开发的网站：[http ://www.nbtc.org/nv/index.php](http://www.nbtc.org/nv/index.php)

感谢 SO 社区以前的帮助，按钮将主“内容”div 动态更改为按钮指向的任何链接。除了右上角的“搜索”按钮外，它们都工作得很好。

我们正在使用 Google CSE，这是他们给我的代码：

```
 <div id="cse" style="width: 100%;">Loading</div>
    <script src="http://www.google.com/jsapi" type="text/javascript"></script>
    <script type="text/javascript"> 
    google.load('search', '1', {language : 'en', style : google.loader.themes.V2_DEFAULT});
    google.setOnLoadCallback(function() {
    var customSearchOptions = {};  var customSearchControl = new google.search.CustomSearchControl(
    '005348393200361091503:k_xdk0rs2og', customSearchOptions);
    customSearchControl.setResultSetSize(google.search.Search.FILTERED_CSE_RESULTSET);
    customSearchControl.draw('cse');
    }, true);
    </script> 
```

正如您在测试站点所看到的，当您单击按钮时，文本被加载到 div 中，但没有任何反应，它只是说“正在加载”。如果您再次按下该按钮，整个网站将变为空白。

如果您右键单击并在新选项卡中打开链接，它就可以正常工作。

我认为必须有一个简单的解决方案，我环顾四周，但没有找到这种情况的答案。我已经在使用 jquery 来执行其他功能，@nicodemus13 提出了一种在 jquery 中重写 google 代码的方法来回答这个问题：

[页面加载后如何加载谷歌的自定义搜索引擎（CSE）JS API？](https://stackoverflow.com/questions/6978242/how-to-load-googles-custom-search-enginecse-js-apis-after-page-loads)

但是谷歌给我的代码的细节是不同的，我不知道如何适应它。

谢谢！布伦登

# django - 仅在 Django 中测试项目

> ID：10611289
> 
> 赞同：6
> 
> 时间：2012-05-16T02:34:13.380
> 
> 标签：django, django-testing, django-1.4, django-contrib, django-contenttypes

当我尝试`python manage.py test`在我的 Django (1.4) 项目中运行时，出现错误：

```
ERROR: test_site_profile_not_available (django.contrib.auth.tests.models.ProfileTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/home/slacy/src/tmp/env/local/lib/python2.7/site-packages/django/contrib/auth/tests/models.py", line 29, in test_site_profile_not_available
    del settings.AUTH_PROFILE_MODULE
  File "/home/slacy/src/tmp/env/local/lib/python2.7/site-packages/django/utils/functional.py", line 215, in __delattr__
    delattr(self._wrapped, name)
AttributeError: AUTH_PROFILE_MODULE 
```

这[记录](https://code.djangoproject.com/ticket/17966)在 Django 错误中，并建议仅测试特定应用程序而不是全部。但是我的项目没有应用程序，`models.py`只是驻留在项目根目录中。要在 Django 中测试特定的*应用程序*，它看起来像[这样](https://docs.djangoproject.com/en/dev/topics/testing/?from=olddocs#running-tests)：

```
$ ./manage.py test animals
Note that we used animals, not myproject.animals. 
```

这意味着无法指定要测试的根目录。我将如何测试我的项目目录？

请注意，此错误是[有关单元测试发现的更大讨论](https://code.djangoproject.com/ticket/17365)的一部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T13:25:54.020

我会推荐使用[django-discover-runner](https://github.com/jezdez/django-discover-runner)。它允许您指定和完整的虚线路径来测试。

> 如果您只运行 ./manage.py 测试，它将发现并运行 TEST_DISCOVER_ROOT 设置（文件系统路径）下的所有测试。如果您运行 ./manage.py test full.dotted.path.to.test_module，它将在该模块中运行测试（您也可以传递多个模块）。如果你给它一个指向包（如 Django 应用程序）的单个虚线路径，如 ./manage.py test myapp 并且该包本身不直接包含任何测试，它将在该包的所有子模块中进行测试发现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T04:26:23.483

创建一个名为 apps 的新目录，将整个应用程序移入其中减去 settings.py、manage.py、urls.py 以及 django-admin.py startproject 默认添加的任何其他内容，然后运行

```
./manage.py test apps 
```

将来，请避免将整个应用程序保存在一个目录中。正是出于这个原因，根据功能将其分成子应用程序

# python - 在 BeagleBone 上读取模拟输入，避免“分段错误”错误

> ID：10611294
> 
> 赞同：3
> 
> 时间：2012-05-16T02:34:50.390
> 
> 标签：python, beagleboard, angstrom-linux

我是 Beaglebone 的新手，并且一直在进行非常好的点击，直到弹出这个奇怪的问题。在发帖之前，我整个周末都在试图弄清楚。

我正在尝试使用 Angstrom 3.2.5+ 的 beaglebone 中的多个传感器读取模拟输入，但我遇到了一个我认为可能是硬件问题的问题。

使用这个[Python 脚本](https://gist.github.com/2698550)和[Alexander Hiam 的 PyBBIO](https://github.com/alexanderhiam/PyBBIO)，我已经能够成功地测试光敏电阻（该值对偶然光的响应越来越多）：

```
# Import PyBBIO library:
from bbio import *

# Create a setup function:
def setup(): pass # Nothing to do here

# Create a main function:
def loop():

  print "-----"

  print "AIN0 [P9.39] - " + str(analogRead(A0))
  print "AIN1 [P9.40] - " + str(analogRead(A1))
  print "AIN2 [P9.37] - " + str(analogRead(A2))
  print "AIN3 [P9.38] - " + str(analogRead(A3))
  print "AIN4 [P9.35] - " + str(analogRead(A4))
  print "AIN5 [P9.36] - " + str(analogRead(A5))
  print "AIN6 [P9.33] - " + str(analogRead(A6))
  print "AIN7 [P9.39] - " + str(analogRead(A7))

  delay(500)

# Start the loop:
run(setup, loop) 
```

但是，我使用上面的脚本阅读的任何其他模拟输入 (AINx(2-7)) 总是显示我插入 AIN1 的光敏电阻的相同值

而且，可能相关，我无法使用 cat 读取任何 AINx(1-7) 错误

```
cat /sys/bus/platform/devices/tsc/ain1
Segmentation fault 
```

有任何想法吗？我真的被困住了。提前致谢。

PS：更多信息...

我的电路由一个 10k 电阻和一个光敏电阻组成。我的引脚连接是：

*   接头 P9 引脚 32 (VDD_ADC(1.8V)) 到光电管的一端
*   接头 P9 引脚 34 (GNDA_ADC) 到电阻器的另一端
*   接头 P9 引脚 39 (AIN0) 连接到光电管的另一侧以及下拉电阻的一端

这是与我自己的电路匹配的图像： ![在此处输入图像描述](../Images/df9cff2eae548c3f96f98d344d679a93.png)

所有 AINx(1-7) 的结果，然后是一些......

```
# cat /sys/bus/platform/devices/tsc/ain0 
cat: /sys/bus/platform/devices/tsc/ain0: No such file or directory 
# cat /sys/bus/platform/devices/tsc/ain1 
Segmentation fault 
# cat /sys/bus/platform/devices/tsc/ain2 
Segmentation fault 
# cat /sys/bus/platform/devices/tsc/ain3 
Segmentation fault 
# cat /sys/bus/platform/devices/tsc/ain4 
Segmentation fault 
# cat /sys/bus/platform/devices/tsc/ain5 
Segmentation fault 
# cat /sys/bus/platform/devices/tsc/ain6 
Segmentation fault 
# cat /sys/bus/platform/devices/tsc/ain7 
Segmentation fault 
# cat /sys/bus/platform/devices/tsc/ain8 
Segmentation fault 
# cat /sys/bus/platform/devices/tsc/ain9 
cat: /sys/bus/platform/devices/tsc/ain9: No such file or directory 
```

**更新 1**

我编辑了[analog_test_simple.py](https://gist.github.com/2698550)文件以显示BeagleBone 上的所有ADC 端口。这是外壳*没有*插入传感器的结果。

```
-----
AIN0 [P9.39] - 3948
AIN1 [P9.40] - 4016
AIN2 [P9.37] - 4002
AIN3 [P9.38] - 3934
AIN4 [P9.35] - 4001
AIN5 [P9.36] - 3935
AIN6 [P9.33] - 3968
AIN7 [P9.39] - 4005
-----
AIN0 [P9.39] - 3946
AIN1 [P9.40] - 4005
AIN2 [P9.37] - 3945
AIN3 [P9.38] - 3957
AIN4 [P9.35] - 4018
AIN5 [P9.36] - 3945
AIN6 [P9.33] - 3967
AIN7 [P9.39] - 3955
... 
```

如果我重新插入传感器，我的值会发生变化，但同样，它们都是一样的：

```
-----
AIN0 [P9.39] - 2836
AIN1 [P9.40] - 2836
AIN2 [P9.37] - 2837
AIN3 [P9.38] - 2831
AIN4 [P9.35] - 2840
AIN5 [P9.36] - 2837
AIN6 [P9.33] - 2837
AIN7 [P9.39] - 2837
-----
AIN0 [P9.39] - 2834
AIN1 [P9.40] - 2834
AIN2 [P9.37] - 2829
AIN3 [P9.38] - 2825
AIN4 [P9.35] - 2826
AIN5 [P9.36] - 2817
AIN6 [P9.33] - 2815
AIN7 [P9.39] - 2815
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-17T15:33:20.057

好的，答案是有两个独立的问题，都是使用 PyBBIO 库引起的。继续阅读...

**问题 1：传感器值不一致/不正确**

对我的问题的评论中的一个建议促使我在[我原来的基于 PyBBIO 的脚本中添加延迟](https://gist.github.com/2698550)。这是没有传感器的情况：

```
# python PyBBIO/examples/analog_test_simple.py
-----
AIN0 [P9.39] - 3955
AIN1 [P9.40] - 4015
AIN2 [P9.37] - 4012
AIN3 [P9.38] - 3950
AIN4 [P9.33] - 3998
AIN5 [P9.36] - 4007
AIN6 [P9.35] - 3984
-----
AIN0 [P9.39] - 4007
AIN1 [P9.40] - 3953
AIN2 [P9.37] - 4005
AIN3 [P9.38] - 3941
AIN4 [P9.33] - 3956
AIN5 [P9.36] - 3934
AIN6 [P9.35] - 3946
... 
```

这是我插入传感器后的结果：

```
# python PyBBIO/examples/analog_test_simple.py
-----
AIN0 [P9.39] - 2888
AIN1 [P9.40] - 2894
AIN2 [P9.37] - 2899
AIN3 [P9.38] - 2907
AIN4 [P9.33] - 2914
AIN5 [P9.36] - 2912
AIN6 [P9.35] - 2914
-----
AIN0 [P9.39] - 2912
AIN1 [P9.40] - 2905
AIN2 [P9.37] - 2901
AIN3 [P9.38] - 2891
AIN4 [P9.33] - 2896
AIN5 [P9.36] - 2890
AIN6 [P9.35] - 2896
... 
```

您可以看到插入传感器仍然会影响所有值，无论延迟如何。

在考虑了这一点后，我决定尝试在不使用 PyBBIO 的情况下使用脚本重复结果。我编写了一个新的 Python 文件，使用 Python[模块](https://gist.github.com/2718676)[测试和打印 BeagleBone 上每个模拟输入引脚的读数`os`](https://gist.github.com/2718676)。该文件用于`os.system('cat ...')`打印值，并在每个值之间包含一个短暂的延迟。这是代码：

```
import os,time
i = 1

while(True):
    os.system("cat /sys/bus/platform/devices/tsc/ain" + str(i))
    print " - AIN" + str(i-1)
    if i==7: 
        i=1
        time.sleep(.5)
        print "------"
    else:
        i+=1    
    time.sleep(.1) 
```

以下是未将任何组件插入 BeagleBone 的结果：

```
# python analog-test-all-pins.py
------
3943 - AIN0
3819 - AIN1
3955 - AIN2
2018 - AIN3
2093 - AIN4
3583 - AIN5
3658 - AIN6
------
3947 - AIN0
3746 - AIN1
3959 - AIN2
2034 - AIN3
2123 - AIN4
3547 - AIN5
3644 - AIN6
... 
```

以下是上面插入 AIN0 的光敏电阻电路的结果：

```
# python analog-test-all-pins.py
------
2915 - AIN0
3347 - AIN1
3556 - AIN2
1478 - AIN3
1602 - AIN4
2393 - AIN5
2402 - AIN6
------
2913 - AIN0
3337 - AIN1
3560 - AIN2
1487 - AIN3
1606 - AIN4
2350 - AIN5
2489 - AIN6 
```

以下是插入 AIN2 的光敏电阻电路数据线的结果：

```
# python analog-test-all-pins.py
------
3939 - AIN0
3792 - AIN1
2881 - AIN2
1986 - AIN3
2089 - AIN4
3462 - AIN5
3543 - AIN6
------
3923 - AIN0
3791 - AIN1
2866 - AIN2
1960 - AIN3
2055 - AIN4
3528 - AIN5
3615 - AIN6
... 
```

AIN3：

```
# python analog-test-all-pins.py
------
3951 - AIN0
3764 - AIN1
3933 - AIN2
2899 - AIN3
2134 - AIN4
3606 - AIN5
3737 - AIN6
------
3960 - AIN0
3823 - AIN1
3957 - AIN2
2910 - AIN3
2118 - AIN4
3635 - AIN5
3645 - AIN6
... 
```

![光敏电阻和 TMP36 传感器](../Images/eba11439f5711821ed80c912a10d3dd2.png)

以下是我将光敏电阻数据线插回 AIN0 并将[TMP36 温度传感器](http://www.sparkfun.com/products/10988)插入 AIN3 的结果。

```
# python analog-test-all-pins.py
------
2866 - AIN0
3340 - AIN1
3540 - AIN2
885 - AIN3
1591 - AIN4
2348 - AIN5
2389 - AIN6
------
2872 - AIN0
3339 - AIN1
3551 - AIN2
884 - AIN3
1560 - AIN4
2383 - AIN5
2434 - AIN6
... 
```

并且只是为了确认正在读取传感器而不影响其他引脚，这是 AIN5 上的 TMP36

```
# python analog-test-all-pins.py
------
2897 - AIN0
3338 - AIN1
3557 - AIN2
1464 - AIN3
1578 - AIN4
888 - AIN5
2459 - AIN6
------
2901 - AIN0
3344 - AIN1
3561 - AIN2
1460 - AIN3
1579 - AIN4
889 - AIN5
2395 - AIN6
... 
```

这使我得出结论，导致此问题的 PyBBIO 库存在问题。它也导致了第二个问题，虽然我不知道如何......

**问题2：分段错误错误**

我遇到的`Segmentation fault`错误问题是由于 PyBBIO 库中的某些问题。例如，如果我重新启动 BeagleBoard 并运行：

```
# cat /sys/bus/platform/devices/tsc/ain1
3953
# cat /sys/bus/platform/devices/tsc/ain2
3818 
```

`os`我使用该模块从 Python 脚本中获得与上述输出相匹配的值。

但是，如果我运行任何访问 AIN 引脚的 PyBBIO 脚本（上面的示例），然后`cat`再次运行，我会收到错误消息：

```
# cat /sys/bus/platform/devices/tsc/ain1
Segmentation fault
# cat /sys/bus/platform/devices/tsc/ain2
Segmentation fault 
```

如果我重新启动电路板（拔下并插入电源），我可以`cat`再次使用：

```
# cat /sys/bus/platform/devices/tsc/ain1
2890
# cat /sys/bus/platform/devices/tsc/ain2
3366 
```

我还尝试使用[Matt Richardson 的 mrBBIO 库](https://github.com/mrichardson23/mrBBIO)，使用[这个文件](https://gist.github.com/2719543)：

```
from mrbbio import *

def setup():
    #pinMode("P9.36", INPUT)
    pass

def loop():

    print "-----"

    for key, value in analogPinDef.items():
        # There is currently an error in mrBBIO, as the analogPinDef dict points to:
        # ain[0-6] in /sys/devices/platform/tsc/ while it should point at: ain[1-7]
        if key=="P9.39": 
            print analogRead(key) + " - " + value
            delay(100)

    delay(1000)

run (setup,loop) 
```

得到这个：

```
# python mrbbio/analog-test-all-pins.py
-----
2005 - ain4
3636 - ain6
3812 - ain2
2114 - ain5
3872 - ain3
3950 - ain1
-----
2002 - ain4
3530 - ain6
3787 - ain2
2059 - ain5
3895 - ain3
3952 - ain1
...
Cleaning up. Unexporting the following pins: 
```

而且我发现它不会影响我获得结果的能力`cat`——可能是因为它在最后导出了引脚。

```
# cat /sys/bus/platform/devices/tsc/ain1
3960
# cat /sys/bus/platform/devices/tsc/ain2
3830 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T10:29:16.910

AIN0 和 AGND 之间的下拉电阻不应超过 1K Ohm。ADC 输入电流非常有限 (2 uA)。为确保您的分压器电路不会影响 ADC 输入电路，您应该通过分压器电阻器提供足够的电流，从而降低其值。建议最多 1K 欧姆。

# ruby-on-rails - rails 模型对象的未定义方法

> ID：10611296
> 
> 赞同：1
> 
> 时间：2012-05-16T02:34:59.090
> 
> 标签：ruby-on-rails, undefined

我的模型有一个非常奇怪的错误。

我的视图代码有：

```
Pickup by: <%= link_to Trip.find_by_pickedpost_id(post).volunteer.name, Trip.find_by_pickedpost_id(post).volunteer %> 
```

但无法呈现页面。表明：

```
NoMethodError in Posts#index

Showing /Users/rails_projects/pickup/app/views/posts/_post.html.erb where line #31 raised:

undefined method `volunteer' for nil:NilClass
Extracted source (around line #31):

28:                 </div>
29:             <% else %>
30:             
31:                 Pickup by: <%= link_to     Trip.find_by_pickedpost_id(post).volunteer.name, Trip.find_by_pickedpost_id(post).volunteer %>
32:             <% end %>
33:         <% end %>
34:     </li>
Trace of template inclusion: app/views/posts/index.html.erb

Application Trace | Framework Trace | Full Trace
app/views/posts/_post.html.erb:31:in   `_app_views_posts__post_html_erb___3981341078159890289_70243818995260'
app/views/posts/index.html.erb:5:in `_app_views_posts_index_html_erb__1562091740607633290_70243844957440' 
```

在rails控制台中，我尝试调用志愿者方法没有问题：

```
1.9.2-p290 :016 > Trip.find_by_pickedpost_id(post11)
Trip Load (0.3ms)  SELECT "trips".* FROM "trips" WHERE "trips"."pickedpost_id" = 11 LIMIT 1
 => #<Trip id: 10, pickedpost_id: 11, volunteer_id: 30, created_at: "2012-05-12 16:49:50",   updated_at: "2012-05-12 16:49:50"> 

1.9.2-p290 :017 > Trip.find_by_pickedpost_id(post11).volunteer.name
Trip Load (0.3ms)  SELECT "trips".* FROM "trips" WHERE "trips"."pickedpost_id" = 11 LIMIT 1
User Load (0.3ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 30 LIMIT 1
 => "Ari Runte" 
```

实际上不仅是志愿者方法，我尝试在行程对象上调用的所有方法都会产生未定义的方法错误，甚至是 Trip.find_by_pickedpost_id(post11).id

我试图渲染 Trip.find_by_pickedpost_id(post) 并且页面渲染旅行对象很好。

```
Pickup by: #<Trip:0x007fc5d4866608> 
```

可能是什么问题呢？

添加一些观察：

当我将代码更改为

```
<%= link_to Trip.find_by_pickedpost_id(post).some_invalid_method, ....%>, 
```

页面呈现

```
undefined method `some_invalid_method' for #<Trip:0x007fc5d6ec8fd0> 
```

与之比较

```
undefined method `volunteer' for nil:NilClass 
```

当方法实际上合法时，为什么页面会为行程对象呈现“Nil”？

谢谢

# python - Scrapy 的 HTMLXPathSelector 在解析 html 页面时导致“分段错误”

> ID：10611298
> 
> 赞同：1
> 
> 时间：2012-05-16T02:35:09.930
> 
> 标签：python, scrapy

发生“分段错误”，scrapy 停止运行。检查网站网址后，我发现它应该属于一个带有 href 属性但没有值的标签。像这样：“ `<a href> dummy </a>`”我怀疑这是由lxml .so lib引起的，如何处理？至少防止蜘蛛停止问题。我的代码片段：

```
hxs = HtmlXPathSelector(response)
sites = hxs.select('//a')
for site in sites:
   list_title= site.select('text()').extract()
   list_link = site.select('./@href').extract() #????(crash here when parsing <a href></a>) 
```

顺便说一句，抓取的网站是'http://mil.news.sohu.com/' 运行环境：scrapy 0.15.1 和 python 2.7.3，预安装 openssl0.12，因为scrapy 的 openssl0.13 默认没有安装成功。

非常感谢亚伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-26T15:05:14.227

我已经解决了这个问题。这是由 scrapy 默认安装的 libxml2 版本 2.6.26 引起的。将 libxml2 更新到 2.7.4，解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T16:32:32.390

他们要么重新引入了该错误，要么必须有其他原因导致此问题：

```
me:~$ scrapy version -v
Scrapy  : 0.16.3
lxml    : 3.0.2.0
libxml2 : 2.7.8
Twisted : 12.0.0 
```

# mysql - 全文检索问题

> ID：10611303
> 
> 赞同：0
> 
> 时间：2012-05-16T02:36:16.197
> 
> 标签：mysql, database, search, full-text-search

我怎样才能使它在搜索时，搜索必须包含所有单词。就好像现在，例如，如果用户搜索 cadillac escalade，搜索结果将包括具有 cadillac 的每一行和具有 eldorado 的每一行，即使它们不在同一行中。

php代码：

```
<?php

    /* connect to MySQL */

    $query = "

        SELECT *,

            MATCH(title, body) AGAINST ('cadillac eldorado') AS score

        FROM articles

        WHERE MATCH(title, body) AGAINST('cadillac eldorado')

    ";

    $sql = MySQL_query($query);

    /* display the results... */

?> 
```

所以我试图做到这一点，所以在搜索标题和正文时，这两个字段结合起来必须包含两个单词才能被计算在内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:52:25.457

您可以使用布尔模式： [http ://dev.mysql.com/doc/refman/5.0/en/fulltext-boolean.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-boolean.html)

启用此功能后，您只需在每个术语前加上一个 +，就像在 Google 上一样。

# mysql - 给定本地主机访问权限时如何访问 MySQL 数据库？

> ID：10611304
> 
> 赞同：1
> 
> 时间：2012-05-16T02:36:18.463
> 
> 标签：mysql, database, connection, localhost

我用谷歌搜索了这个主题，但找不到答案。

我正在为某人开发一个网站，我需要访问他们的 MySQL 数据库。他们只给了我本地主机访问权限以及用户名和密码。

如何通过 Dbninja 之类的工具连接到数据库？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:44:49.727

您可以使用*ssh 端口转发*将本地端口映射到其服务器上的端口。

这是一篇简短的文章，介绍了如何执行此操作：

[http://onlamp.com/onlamp/excerpt/ssh_11/index3.html](http://onlamp.com/onlamp/excerpt/ssh_11/index3.html)

如果您在 windows 上使用终端程序*putty* ，这里有一篇文章介绍如何做到这一点：

[http://katsande.com/ssh-port-forwarding-for-mysql-using-putty](http://katsande.com/ssh-port-forwarding-for-mysql-using-putty)

基本上，您 ssh 到远程机器，然后将该机器上的端口“映射”到本地机器上的端口。然后你可以将你的 db 程序连接到本地端口，就好像你从 localhost 连接到远程机器一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T02:41:06.370

你100%确定吗？默认情况下，如果您使用 root 登录且没有密码，MySQL 支持具有完整管理员权限的 localhost。你在运行 Win/Linux 并且你安装了 MySQL 的二进制/源代码版本吗？

可能有人玩弄了您的 MySQL 表，其中包含所有用户帐户和权限等的详细信息，因此请尝试重新安装它。如果没有，请查看 Ryan 在[http://www.devarticles.com/art/1/134](http://www.devarticles.com/art/1/134)上关于 MySQL 权限的文章。它包含设置 MySQL 用户需要知道的一切

# c++ - Boost Spirit lex 将令牌值写回输入流

> ID：10611306
> 
> 赞同：3
> 
> 时间：2012-05-16T02:37:05.563
> 
> 标签：c++, boost, lex, boost-spirit, boost-spirit-lex

我想知道 boost::spirit::lex 中是否有办法将令牌值写回输入流（可能在编辑后）并再次重新扫描。我基本上在寻找的是 Flex 中 unput() 提供的功能。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T20:07:46.903

听起来您只想接受不同顺序但含义相同的令牌。

事不宜迟，这里有一个完整的示例，展示了如何完成此操作，无论输入顺序如何都会公开标识符。输出：

```
Input 'abc(' Parsed as: '(abc'
Input '(abc' Parsed as: '(abc' 
```

代码

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/lex_lexertl.hpp>
#include <iostream>
#include <string>

using namespace boost::spirit;

///// LEXER
template <typename Lexer>
struct tokens : lex::lexer<Lexer>
{
    tokens()
    {
        identifier = "[a-zA-Z][a-zA-Z0-9]*";
        paren_open = '(';

        this->self.add
            (identifier)
            (paren_open)
            ;
    }

    lex::token_def<std::string> identifier;
    lex::token_def<lex::omit> paren_open;
};

///// GRAMMAR
template <typename Iterator>
struct grammar : qi::grammar<Iterator, std::string()>
{
    template <typename TokenDef>
        grammar(TokenDef const& tok) : grammar::base_type(ident_w_parenopen)
    {
        ident_w_parenopen = 
              (tok.identifier >> tok.paren_open)
            | (tok.paren_open >> tok.identifier) 
            ;
    }
  private:
    qi::rule<Iterator, std::string()> ident_w_parenopen;
};

///// DEMONSTRATION
typedef std::string::const_iterator It;

template <typename T, typename G>
void DoTest(std::string const& input, T const& tokens, G const& g)
{
    It first(input.begin()), last(input.end());

    std::string parsed;
    bool r = lex::tokenize_and_parse(first, last, tokens, g, parsed);

    if (r) {
        std::cout << "Input '" << input << "' Parsed as: '(" << parsed << "'\n";
    }
    else {
        std::string rest(first, last);
        std::cerr << "Parsing '" << input << "' failed\n" << "stopped at: \"" << rest << "\"\n";
    }
}

int main(int argc, char* argv[])
{
    typedef lex::lexertl::token<It, boost::mpl::vector<std::string> > token_type;
    typedef lex::lexertl::lexer<token_type> lexer_type;
    typedef tokens<lexer_type>::iterator_type iterator_type;

    tokens<lexer_type> tokens;
    grammar<iterator_type> g (tokens);

    DoTest("abc(", tokens, g);
    DoTest("(abc", tokens, g);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T00:16:48.757

我最终实现了自己的 unput() 功能，如下所示：

```
 struct unputImpl
   {
      template <typename Iter1T, typename Iter2T, typename StrT>
      struct result {
         typedef void type;
      };

      template <typename Iter1T, typename Iter2T, typename StrT>
      typename result<Iter1T, Iter2T, StrT>::type operator()(Iter1T& start, Iter2T& end, StrT str) const {
         start -= (str.length() - std::distance(start, end));
         std::copy(str.begin(), str.end(), start);
         end = start;
      }
   };

   phoenix::function<unputImpl> const unput = unputImpl(); 
```

然后可以像这样使用它：

```
 this->self += lex::token_def<lex::omit>("{SYMBOL}\\(")
        [
           unput(_start, _end, "(" + construct<string>(_start, _end - 1) + " "),
           _pass = lex::pass_flags::pass_ignore
        ]; 
```

如果未输入的字符串长度大于匹配的标记长度，它将覆盖一些先前解析的输入。您需要注意的是确保输入字符串在开始时有足够的空白空间来处理为第一个匹配的令牌调用 unput() 的情况。

# .net - 带有用于角色授权的空格的 AD 组

> ID：10611313
> 
> 赞同：4
> 
> 时间：2012-05-16T02:38:18.123
> 
> 标签：.net, web-config, authorization, roles

我正在尝试让角色授权与 AD 组一起工作。但是，由于它包含空格，因此它似乎不起作用。

我尝试过没有空格的 AD 组，它们工作正常。

```
<authorization>
 <allow roles=".\IS Software Delivery - Staff" />
 <deny users="*" />
</authorization> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-09T15:19:34.233

**我的解决方案是**在 Active Directory 设置完成后重新启动我的开发 PC。（实际上，我测试时重新启动了几次。）

**我确信**您得出的结论与“名称中的空格无效”相同，但是当我寻求答案时，我发现那不是真的。

之所以出现这种情况，是因为一旦我怀疑“空格”是问题所在，我测试的其他组就没有空格。但它们也是几个月前定义的（最近没有变化）。

我最好的理解是，通过 Visual Studio 运行的本地 IIS（快速？）在首次运行时缓存其对您的 AD 组的视图（在启动后不久，可能在第一次测试时）。所以，当我在 Active Directory 中创建了一些组，然后去 VS Express 进行测试时，我有很多挫败感。注意：当我发布到服务器 IIS 时，我从来没有遇到过这个问题。

另一个可能导致延迟（沮丧）的因素（不是我的情况）是用户和组的 AD 知识通常由一组服务器共享，通常分布在多个物理站点上。在每个服务器都知道信息之前，这可能会导致短暂的延迟（10 到 30 分钟）。

# jquery - jQuery 事件订阅者 - 如何获取事件参数

> ID：10611315
> 
> 赞同：1
> 
> 时间：2012-05-16T02:38:44.677
> 
> 标签：jquery, jquery-mobile

我正在使用 jQuery mobile 并正在启动一个对话框，如下所示：

```
$.mobile.changePage('#someDiv', { role: 'dialog', params: callbackFunction }); 
```

我正在监听该事件，我希望能够访问上面定义的参数，但无法弄清楚如何从以下访问它：

```
$('#someDiv').on('pageshow', function(evt){
  //hmm... how to access the role or params values above?
}); 
```

谢谢，

安迪

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:52:12.403

我想您可以简单地使用`data`来存储参数，例如：

```
$.mobile.changePage('#someDiv', { role: 'dialog'});
$('#someDiv').data('params', callbackFunction); 
```

和

```
$('#someDiv').on('pageshow', function(evt){
  var someVar = $(this).data('params');
}); 
```

# python - wx.Python 中的高分辨率时序

> ID：10611319
> 
> 赞同：0
> 
> 时间：2012-05-16T02:39:29.697
> 
> 标签：python, timing, wxwidgets

我正在尝试在 wxPython 应用程序中运行物理模拟（使用 ODE）。我的第一次尝试使用计时器以 100Hz 的频率运行我的模拟，但实际上它以接近 60Hz 的频率运行。模拟的速率准确很重要，因此我编写了一个小线程，它会休眠 0.01 秒，然后（通过 wx.PostEvent）向运行（和渲染）模拟的主 UI 线程发送一条消息。

这完全挂起了应用程序，并且从日志记录中我可以看到并非我发送的所有事件（以 100Hz 频率）都在处理中。因此，我假设我正在填满消息队列并且我的 UI 停止运行。

当我将线程设置为以 50Hz 运行时，一切正常。但我的意思是，这是 2012 年，我有 8 个内核以荒谬的千兆赫或其他频率运行。在我看来，准确的 100Hz 似乎并没有要求那么多。从长远来看，它只需要准确，一些抖动（比如说 10%）就可以了。

有任何想法吗？顺便说一下，这是我的线程代码

```
def TimerThreadFunction(self):
    while self.ContinueTimer:
        time.sleep(0.01)
        wx.PostEvent(self.frame, TickEvent()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:00:06.817

如果它只是一个实时模拟，您可以使用总模拟时间调整每一步的睡眠秒数：

```
import time

def sim_step():
    import random
    for i in xrange(random.randint(1000, 10000)):
        pass

start = time.time()
sim_time = 0
while True:
    sim_step()
    sim_time += 1
    to_sleep = max(0, sim_time*0.001 - (time.time() - start))
    time.sleep( to_sleep )
    if sim_time % 1000 == 0:
        print sim_time, time.time() 
```

# lua - display.newImage() 如何从 lua 中的另一个目录生成图像 - 电晕

> ID：10611322
> 
> 赞同：0
> 
> 时间：2012-05-16T02:39:39.743
> 
> 标签：lua, directory, coronasdk

我只想清理我的电晕项目的项目目录，所以我想使用目录对其进行分组。所有图像的示例，我有一个`img`目录。

我的项目目录在 `C:\Documents and Settings\Administrator\My Documents\MyProject\img`

所以在我的代码中

`display.newImage("img.png",0,0,true)`

至

`display.newImage("C:\Documents and Settings\Administrator\My Documents\MyProject\img\img.png",0,0,true)`

和

`display.newImage("img\img.png",0,0,true)`

但我得到了这个错误。

```
WARNING: Failed to find image(img.png) 
```

我的问题是，我怎样才能得到`img.png`from`img`目录使用`display.newImage()`？我怎样才能得到它的目录路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:26:11.357

你需要给正斜杠

```
display.newImage("img/img.png",0,0,true) 
```

# android - 如何将库注入 Android zygote 进程？

> ID：10611324
> 
> 赞同：4
> 
> 时间：2012-05-16T02:39:42.550
> 
> 标签：android, c, android-ndk

我想编写一个应用程序将库注入到 android 进程中。最重要的是我必须

在远程进程中映射一个安全内存，用于执行注入的功能。

现在问题出在这里，除了Zygote，所有的进程都可以实现memorymapping！

虽然我将 LR 寄存器设置为 0x00000000，但仍然阻塞在 waitpid()

----- 我没有收到 SIGSEVG 信号，希望大家帮帮我，谢谢。

[**获取资源**](https://bitbucket.org/mikukon/android-test/overview)

```
 //fake saved return address, triggering a SIGSEGV to catch
    regs->ARM_lr = 0x00000000;

    ptrace_setregs( pid, regs );

    ptrace_cont(pid);

    int status;
    int id = 0;
    do {
            id = waitpid(pid, &status, WUNTRACED);//The process was blocked ....! Why..?
            printf("[+] id:%d,signal:%d\n",id,WSTOPSIG(status));
    } while ((id != pid) || (WSTOPSIG(status) != SIGSEGV)); 
```

# python - 解析包含纳秒的日期时间字符串

> ID：10611328
> 
> 赞同：42
> 
> 时间：2012-05-16T02:40:15.720
> 
> 标签：python, datetime, strptime, time-precision

我有一些时间格式为 HH:MM::SS.nano_seconds 的日志文件（例如 01:02:03.123456789）。我想在 python 中创建一个日期时间，这样我就可以巧妙地对时间进行数学运算（例如，计算时差）。strptime使用 %f在*微秒内效果很好。*Python datetime 和 time 模块真的不支持纳秒吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-16T04:46:10.583

您可以[从源代码](https://github.com/python/cpython/blob/3.8/Lib/datetime.py#L1558-L1599)中看到`datetime`对象不支持比微秒更精细的任何东西。正如 Mike Pennington 在评论中指出的那样，这可能是因为[计算机硬件时钟几乎没有那么精确](https://stackoverflow.com/questions/2394485/get-posix-unix-time-in-seconds-and-nanoseconds-in-python)。维基百科说[HPET](http://en.wikipedia.org/wiki/High_Precision_Event_Timer)的频率“至少 10 MHz”，这意味着每 100 纳秒有一个滴答声。

如果您可以忍受扔掉最后三位数字（无论如何这可能不太有意义），您可以通过将输入字符串切成小数点后只有六位数字并使用解析来解析它`%f`。否则，看起来您必须自己实现减法。

* * *

很久以后的更新：numpy 和 pandas 现在都（有些不同）支持时间戳，包括跟踪纳秒的可能性，这通常是很好的解决方案。如何查看其他答案。

Python 3.7+ 在( [PEP 564](https://www.python.org/dev/peps/pep-0564/) ) 中也有[`time.time_ns`](https://docs.python.org/3/library/time.html#time.time_ns)相关函数，但在.`time``datetime`

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2019-09-11T09:18:11.180

这是一个旧线程，但仍然......

您可以使用 Pandas 功能来实现这一点。我有像“2019-03-22T14:00:01.700311864Z”这样的时间戳，我通过以下方式转换为时间戳：

```
 firstStamp = pd.to_datetime(firstStampString, format='%Y-%m-%dT%H:%M:%S.%fZ')
    lastStamp = pd.to_datetime(lastStampString, format='%Y-%m-%dT%H:%M:%S.%fZ')

    deltaTime = lastStamp - firstStamp 
```

这工作正常。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-01-24T22:07:10.947

您可以很自然地使用纳秒甚至更精确的时间单位（ps、fs、as）和`numpy`. Numpy 有自己的[Datetimes 和 Timedeltas](https://docs.scipy.org/doc/numpy-1.11.0/reference/arrays.datetime.html)实现，所以你可以尝试`np.datetime64`：

```
import numpy as np
def str_to_ns(time_str):
     """
     input: time in a format `hh:mm:ss.up_to_9_digits`
     """
     h, m, s = time_str.split(":")
     int_s, ns = s.split(".")
     ns = map(lambda t, unit: np.timedelta64(t, unit),
              [h,m,int_s,ns.ljust(9, '0')],['h','m','s','ns'])
     return sum(ns) 
```

然后您可以通过以下方式使用此功能：

```
>>> src = "1:2:34.123456789"
>>> out = str_to_ns(src)
>>> print(out)
3754123456789 nanoseconds
>>> out / np.timedelta64(1,'h')
1.0428120713302778
>>> out / np.timedelta64(1,'m')
62.568724279816664
>>> out / np.timedelta64(1,'s')
3754.123456789 
```

算术也是可能的：

```
>>> t1, t2 = str_to_ns("1:0:12.12345678"), str_to_ns("1:0:12.12")
>>> t1 - t2
numpy.timedelta64(3456780,'ns') 
```

我同意这不是*那么*自然，但是通过这种方式，您可以使用`numpy`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2021-02-19T01:35:45.617

如果您实际上并不关心纳秒，但您仍然希望能够解析秒内具有 >6 位小数的日期时间，则可以使用[python-dateutils](https://dateutil.readthedocs.io/en/stable/parser.html#dateutil.parser.isoparse)库。

例如，尝试使用标准 lib datetime 包：

```
>>> from datetime import datetime
>>> datetime.strptime('2021-02-14T02:27:57.96119078Z', '%Y-%m-%dT%H:%M:%S.%fZ')
ValueError: time data '2021-02-14T02:27:57.96119078Z' does not match format '%Y-%m-%dT%H:%M:%S.%fZ' 
```

但是使用 python-dateutils，它实际上会解析它而不会引发错误：

```
>>> from dateutil.parser import isoparse
>>> isoparse('2021-02-14T02:27:57.96119078Z')
datetime.datetime(2021, 2, 14, 2, 27, 57, 961190, tzinfo=tzutc()) 
```

请注意，它不会保留纳秒（也不会正确舍入 - 它只是在 6 个小数位后截断），但它至少不会破坏解析 >6 个小数位。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-12-31T14:59:52.243

```
def parse_nanodate(s):
  """
  parse date, ignore nanoseconds
  sample input: 2020-12-31T16:20:00.000000123Z
  --> 123ns will be ignored
  """
  if s[-1] == 'Z':
    # add explicit UTC timezone, to make strptime happy
    s += '+0000'
  return datetime.datetime.strptime(
    s[0:26]+s[29:], '%Y-%m-%dT%H:%M:%S.%fZ%z') 
```

# php - PHP注册的关闭函数有时不被调用

> ID：10611330
> 
> 赞同：2
> 
> 时间：2012-05-16T02:40:19.523
> 
> 标签：php

我想做一个长期的工作，我不能修改最大执行时间，所以我采取了一个解决方案：**当脚本要关闭时，脚本会向自己发送一个http请求，所以脚本可以继续运行。** 这是我的测试脚本 t.php

```
<?php 
define('DS', DIRECTORY_SEPARATOR);
define('ROOT', dirname(__FILE__));

function post_request_async($url, ARRAY $data) {
    // Convert the data array into URL Parameters like a=b&foo=bar etc.
    $data = http_build_query($data);
    // parse the given URL
    $url = parse_url($url);
    $host = $url['host'];
    $path = $url['path'];
    $port = isset($url['port']) ? $url['port'] : "80";
    $fp = fsockopen($host, $port, $errno, $errstr, 5);
    if ($fp){
        $req = "";
        $req.="POST $path HTTP/1.0\r\n";
        $req.="Host: $host\r\n";
        $req.="Content-type: application/x-www-form-urlencoded\r\n";
        $req.="Content-length: ". strlen($data) ."\r\n";
        $req.="Connection: close\r\n\r\n";
        $req.= $data;
        fputs($fp, $req);
        fclose($fp);
    }
}

set_time_limit(10);
register_shutdown_function("shutdown_func");

file_put_contents(ROOT.DS."zz.txt", date("Y-m-d H:i:s")." start -->".PHP_EOL, FILE_APPEND);

function shutdown_func(){
    file_put_contents(ROOT.DS."zz.txt", date("Y-m-d H:i:s")." shutdown_func -->".PHP_EOL, FILE_APPEND);
    post_request_async("http://127.0.0.1/t.php", array());
    exit();
}

for(;;) {
    sleep(2);
}
?> 
```

但是结果很奇怪：zz.txt

```
2012-05-16 10:11:42 start -->
2012-05-16 10:11:54 shutdown_func -->
2012-05-16 10:11:54 start -->
2012-05-16 10:12:04 shutdown_func -->
2012-05-16 10:12:04 start -->
2012-05-16 10:12:14 shutdown_func -->
2012-05-16 10:12:14 start -->
2012-05-16 10:12:26 shutdown_func -->
2012-05-16 10:12:26 start -->
2012-05-16 10:12:38 shutdown_func -->
2012-05-16 10:12:38 start -->
2012-05-16 10:12:48 shutdown_func -->
2012-05-16 10:12:48 start -->
2012-05-16 10:12:58 shutdown_func -->
2012-05-16 10:12:58 start -->
2012-05-16 10:13:08 shutdown_func -->
2012-05-16 10:13:08 start -->
2012-05-16 10:13:18 shutdown_func -->
2012-05-16 10:13:18 start -->
2012-05-16 10:13:28 shutdown_func -->
2012-05-16 10:13:28 start -->
2012-05-16 10:13:40 shutdown_func -->
2012-05-16 10:13:40 start -->
2012-05-16 10:13:50 shutdown_func -->
2012-05-16 10:13:50 start -->
2012-05-16 10:14:02 shutdown_func -->
2012-05-16 10:14:02 start -->
2012-05-16 10:14:14 shutdown_func -->
2012-05-16 10:14:14 start -->
2012-05-16 10:14:26 shutdown_func -->
2012-05-16 10:14:26 start -->
2012-05-16 10:14:36 shutdown_func -->
2012-05-16 10:14:36 start -->
2012-05-16 10:14:48 shutdown_func -->
2012-05-16 10:14:48 start -->
2012-05-16 10:14:58 shutdown_func -->
2012-05-16 10:14:58 start -->
2012-05-16 10:15:08 shutdown_func -->
2012-05-16 10:15:08 start -->
2012-05-16 10:15:18 shutdown_func -->
2012-05-16 10:15:18 start --> 
```

php_errors.log

```
[16-May-2012 02:11:54 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:12:04 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:12:14 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:12:26 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:12:38 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:12:48 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:12:58 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:13:08 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:13:18 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:13:28 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:13:40 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:13:50 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:14:02 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:14:14 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:14:26 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:14:36 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:14:48 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:14:58 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:15:08 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:15:18 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:15:28 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 41
[16-May-2012 02:15:28 UTC] PHP Fatal error:  Maximum execution time of 10 seconds exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 33 
```

看起来关闭功能被调用了大约 22 次，但突然没有被调用。

我的 php 版本是 5.3.9，服务器是 IIS 7.5 真的需要一些帮助！非常感谢！

**------------------------更新1------------- ------------------**

经过一番挖掘，我在 php 源代码中找到了一个测试脚本。看起来注册的关闭功能可能会超时。

```
<?php
set_time_limit(1);
register_shutdown_function("plop");

function plop() {
    $ts = time();
    while(true) {
        if ((time()-$ts) > 2) {
            echo "Failed!";
            break;
        }
    }
}
plop();
?> 
```

结果是：

```
Fatal error: Maximum execution time of 1 second exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 9

Fatal error: Maximum execution time of 1 second exceeded in E:\eclipse_php_workspace\caijiche_new2\t.php on line 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:30:46.343

从开始到结束需要 12 秒（请参阅 zz.txt 中的计时器），最大执行时间设置为 10 秒。所以有问题。

通常我将时间限制截止时间设置为（最大执行时间 - 5 秒），但由于您只有 10 秒和 2 秒的覆盖时间，因此您应该将关闭时间设置为 7 秒。

* * *

如果您从浏览器启动它，则可能优先从 META Refresh 指令实际执行“调用自身”。通过这种方式，您可以发出一个带有状态和元刷新的小型 HTML 页面。（这也是我的首选路线！）如果您不是从浏览器运行 cron 或其他后端进程，请忽略。

* * *

编辑（以节省输入太多评论）以响应“它现在已停止，但几分钟后又回来了”。

我的猜测是，如果你仍然有 PHP 脚本调用自己，它可能会消耗越来越多的内存，并且永远不允许 iteslf 进行垃圾收集。Apache 中的每个 PHP 脚本需要大约 10MB 的 Apache 开销，再加上另外 2-3MB 的 PHP 脚本 - 所以你调用自己的次数越多，它就会越加并最终变慢。

所以你需要回到其中一个建议：

a) 如果从浏览器调用，与 PHP 调用自身相反，发出

```
<html>
   <head>
      <meta http-equiv="refresh" content="1; url=http://127.0.0.1/t.php">
   </head>
   <body>
     Echo going to <a href="http://127.0.0.1/t.php">http://127.0.0.1/t.php</a>
   </body>
</html> 
```

这意味着在 PHP 脚本中有调用自身；PHP 也可以呼吸并且可以收集垃圾，尽管只运行一个简单的脚本就不需要中断 - 停止循环应该可以解决它。

问题：如果你的连接失败，或者互联网失败，那么响应将不会发生并且脚本会中断，所以：

b) 一种变体是创建一个每 10 秒调用一次服务器的 javascript。超时后不要做任何事情，因为 Javascript 只会再次启动该过程。

c) 最好的方法是，如果您希望它“永远”运行，请从 cron 作业将 PHP 脚本作为命令行 (php -q /var/www/html/Myphp.php > /dev/nul) 运行。将 cron 作业设置为每分钟运行一次。向脚本添加一个计数器，该计数器在每次调用自身时递增，然后在第 6 次调用（即 1 分钟）后停止。这样，在脚本终止并允许自己被清理之前，您最多循环 5 次。

d) 或者，如果您可以编写一个快速的 shell 脚本，只需创建调用 PHP 命令行的 shell 脚本，然后等待 10 秒并再次调用它，共 6 次。从每分钟运行的 cron 触发该脚本。这样，您就没有 Apache 开销（节省套接字、节省内存）以及避免 lopping 问题。

e）还有其他变化 - 取决于您在服务器上获得的权限......

不保证他们会解决你的问题，但是一个无休止地调用自己的函数正在编程禁止，所以我至少会给第一个刺穿，看看它是否有效，然后研究更复杂的。

# android - 如何将数据库连接到我的安卓搜索按钮

> ID：10611332
> 
> 赞同：0
> 
> 时间：2012-05-16T02:40:37.843
> 
> 标签：android, sqlite

如何只需单击“搜索”按钮，从我的 SQLite 数据库中检索数据，并将其显示在我的应用程序中？

我的活动：

```
public class EKaDEMActivity extends Activity implements OnClickListener {

    //EditText ET;
    public static final String KEY_ROWID = "Dic_id";
    public static final String colID="_id";
    public static final String colKD="KD_word";
    public static final String colENG="ENG_word";
    public static final String colMAL="Malay_word";
    public static final String colAudio="KD_audio";

    private static final String dbName="Dictionary";
    private static final String dbTable="tbl_Dictionary";
    private static final int dbVersion = 2;

    static final String viewEmps="ViewEmps";

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ImageButton button = (ImageButton)findViewById(R.id.button_one);
        button.setOnClickListener(this);

    }
    @Override
    public void onClick(View arg0) {
        // TODO Auto-generated method stub  

        EditText ET = (EditText) findViewById(R.id.AutoTextBox);
        ET = (EditText) findViewById(R.id.AutoTextBox);

        String s = ET.getText().toString();
        TextView TV = (TextView)findViewById(R.id.DefTextView);
        TV.setText("Welcome Using Kadazandusun-English-Malay Mobile Dictionary Application");
        boolean r = s.contentEquals("dog");
        if (r == true)
        {
            String str = "  M: Anging \n\n" + "  KD: Tasu ";
            TextView text = (TextView)findViewById(R.id.DefTextView);
            text.setText(str);
        }
        else
        {
            TV.setText("   Word not found");

        }               
    }

} 
```

这是我的 Database.java

```
public static final String KEY_ROWID = "Dic_id";
public static final String colID="_id";
public static final String colKD="KD_word";
public static final String colENG="ENG_word";
public static final String colMAL="Malay_word";
public static final String colAudio="KD_audio";

private static final String dbName="Dictionary";
private static final String dbTable="tbl_Dictionary";
private static final int dbVersion = 1;

static final String viewEmps="ViewEmps";

public Database(Context context, String name, CursorFactory factory,
        int version) {
    super(context, dbName, null, dbVersion);
    // TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
    // TODO Auto-generated method stub
    db.execSQL("CREATE TABLE " + dbTable + " (" +
            KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
            colKD + " TEXT NOT NULL, " +
            colENG + " TEXT NOT NULL, " +
            colMAL + " TEXT NOT NULL, );");

    db.execSQL("CREATE VIEW "+viewEmps+
            " AS SELECT "+dbTable+"."+colID+" AS _id,"+
            " "+dbTable+"."+colKD+","+
            " "+dbTable+"."+colENG+","+
            " "+dbTable+"."+colMAL+""+
            " FROM "+dbTable
            );
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    // TODO Auto-generated method stub
    db.execSQL("DROP TABLE IF EXISTS "+ dbTable);
    onCreate(db);
}

 void AddWord(Word wrd)
 {

     SQLiteDatabase db= this.getWritableDatabase();

    ContentValues cv=new ContentValues();

    cv.put(colKD, wrd.getKD());
    cv.put(colENG, wrd.getENG());
    cv.put(colMAL, wrd.getMAL());
    //cv.put(colDept,2);

    db.insert(dbTable, colKD, cv);
    db.close();

}

 public int UpdateWrd(Word wrd)
 {
    SQLiteDatabase db=this.getWritableDatabase();
    ContentValues cv=new ContentValues();
    cv.put(colKD, wrd.getKD());
    cv.put(colENG, wrd.getENG());
    cv.put(colMAL, wrd.getMAL());
    return db.update(dbTable, cv, colID+"=?", new String []{String.valueOf(wrd.getID())});

 }

 public void DeleteWrd(Word wrd)
 {
     SQLiteDatabase db=this.getWritableDatabase();
     db.delete(dbTable,colID+"=?", new String [] {String.valueOf(wrd.getID())});
     db.close();

 }

Cursor getWord()
 {
     SQLiteDatabase db=this.getWritableDatabase();

     Cursor cur= db.rawQuery("SELECT * FROM "+viewEmps,null);
     return cur;
 } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:47:49.200

**将这两个函数添加到您的数据库类中。**

```
public Cursor searchall()throws Exception// For searching all record 
{
    return db.rawQuery("Select * from info ORDER BY regno ",null);
}

public Cursor search(String regno)throws Exception // for searching record with where clause
{
    return db.rawQuery("Select * from info where regno='"+regno+"'",null);
} 
```

**将此代码添加到您的搜索按钮**

```
btnreg.setOnClickListener(new View.OnClickListener() {

public void onClick(View v) 
{
    try 
    {
    String num = regno.getText().toString();
        dba.open();
        cursor = dba.search(num);
        if (cursor.moveToFirst()) 
        {
            do 
            {
                regno.setText(cursor.getString(0));
                name.setText(cursor.getString(1));
                fname.setText(cursor.getString(2));
                age.setText(cursor.getString(3));
                city.setText(cursor.getString(4));
            }
            while (cursor.moveToNext());
            dba.close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:50:35.270

你应该阅读更多关于 SQLite 和 Android 的教程，你了解其中一些，但你可以学到更多。

您需要在 EKaDEMActivity 中创建一个 Database 对象，可能是这样的：

```
Database database;
...

onCreate() {
    ...
    database = new Database(this);
} 
```

替换这个：

```
boolean r = s.contentEquals("dog");
if (r == true) 
```

有类似的东西：

```
Cursor cursor = database.getWord(s);
if(cursor.moveToNext()) {
    ...
    text.setText(cursor.getString(cursor.getColumnIndex(colKD))); 
```

在 getWords() 中：

```
Cursor getWord(String word) {
     SQLiteDatabase db=this.getWritableDatabase();

     return db.rawQuery("SELECT * FROM "+viewEmps + " WHERE " + colENG + "=?", new String[] { word });
} 
```

这只会搜索一个英文单词并显示您的 KD 列中的匹配单词，您必须根据需要更改它。理解每次搜索单词时获取一个新的可写数据库效率非常低，您应该只调用一次 getWritableDatabase() 并将 db 保存在类变量中。此外，您应该在完成后关闭光标或将它们传递给 Activity，以便它会自动为您关闭它们。祝你好运！

# android - 三星 Galaxy Tab 10.1 (P7510) 上的硬件音量+- 按钮错误，出现系统音量条时无法触发 onKeyDown 事件

> ID：10611336
> 
> 赞同：1
> 
> 时间：2012-05-16T02:40:58.977
> 
> 标签：android, galaxy-tab

我的应用程序在其他安卓手机上运行正常，但三星 Galaxy Tab 10.1 (P7510) 和安卓 3.1/3.2。

第一次按下硬件音量+/音量-按钮时，API onKeyDown 和 KeyEvent.KEYCODE_VOLUME_DOWN/KeyEvent.KEYCODE_VOLUME_UP 很好触发（出现系统音量条）。但再次按下硬件音量+/音量-按钮，onKeyDown() 将不会被触发，直到系统音量条消失。

当用户每次按音量+/音量-但无法捕获 onKeyDown 时，我需要处理一些事情.....

该问题仅出现在 Samsung Galaxy Tab 10.1 (P7510) 和 Moto XOOM 上。是android 3.x的问题吗？</p>

其他运行 android 2.x 或 4.x 的设备都可以。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T13:31:32.740

尝试改写`dispatchKeyEvent`方法`onKeyDown`。在所有情况下，当您处理事件时，返回`true`. 在其他情况下返回`super.dispatchKeyEvent`。

# css - Facebook Like 按钮，响应式设计，深色/浅色背景

> ID：10611340
> 
> 赞同：0
> 
> 时间：2012-05-16T02:41:21.773
> 
> 标签：css, responsive-design

目前，我已经使用响应式设计创建了一个网站，因此它可以在移动设备和台式机上查看。我在使用 Facebook like 按钮时遇到问题，因为宽度大于移动屏幕，但我已经解决了这个问题。

唯一的问题是，在 iPad 和更高分辨率的网站上，Facebook Like 按钮使用了深色方案。

在移动设备网站上，Facebook Like 按钮需要使用灯光方案。

我该如何改变？

有问题的网站位于[http://chinchinapp.com](http://chinchinapp.com)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:45:31.370

你已经缩小了你的 CSS，所以它不可能确切地看到你在做什么，但是，它应该像将 facebook 按钮的图像设置为背景图像然后使用媒体查询将图像换成更轻的图像一样简单移动维度。

# c# - 将 RouteData.Values 与操作参数结合

> ID：10611349
> 
> 赞同：3
> 
> 时间：2012-05-16T02:43:06.960
> 
> 标签：c#, asp.net-mvc, routing

我在`RouteData`自定义中设置了一些`Action Filter`

```
filterContext.RouteData.Values.Add("accountId", accountId);
filterContext.RouteData.Values.Add("permission", (int)permission); 
```

然后我有如下动作

```
public ActionResult Get(Guid accountId, int permission, int id) {

} 
```

**我可以`RouteData`通过路由将值与操作参数结合吗？如果是这样，怎么做？**

我只想使用一个 URL，例如

```
http://localhost/Users/Get/1 
```

*他们的路由数据存在并且可以通过使用来检索*

```
Guid accountId = (Guid)RouteData.Values["accountId"];
Permission permission = (Permission)RouteData.Values["permission"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T02:56:22.413

您应该创建一个 custom `ValueProvider`，而不是一个 action 过滤器。
有关详细信息，请参阅[此处](http://msdn.microsoft.com/en-us/magazine/hh781022.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T07:10:42.870

您可以使用 ActionParameters 属性：

```
public class MyActionFilterAttribute: ActionFilterAttribute
{
    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        filterContext.ActionParameters["accountId"] = Guid.NewGuid();
        filterContext.ActionParameters["permission"] = 456;
    }
} 
```

进而：

```
public class HomeController : Controller
{
    [MyActionFilter]
    public ActionResult Index(Guid accountId, int permission, int id)
    {
        return Content(string.Format("accountId={0}, permission={1}", accountId, permission));
    }
} 
```

当您请求时`/home/index/123`，将显示以下内容：

```
accountId=f72fddb8-1c35-467b-a479-b2668fd5b2ec, permission=456 
```

# java - 关于如何在java中实现各种图像过滤器的任何好的资源

> ID：10611352
> 
> 赞同：0
> 
> 时间：2012-05-16T02:43:45.453
> 
> 标签：java, image, image-processing, graphics

大家好，我是java图形的新手，我想学习如何在java中实现那些花哨的过滤器，即算法，但我找不到任何关于它的综合资源。有什么好的推荐吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:09:32.710

我发现以下资源非常方便：

[http://www.jhlabs.com/ip/filters/](http://www.jhlabs.com/ip/filters/)

我不确定你到底想要什么（全面？），但上面的内容让我很快就上了曲线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:12:14.387

我所知道的在 Java 中处理图像的最佳资源是《***Filthy Rich Clients 》一书***

[http://filthyrichclients.org/](http://filthyrichclients.org/)

有关各种图像过滤器的非常详细和教学信息。任何使用 Java 图形堆栈的人都必须阅读。

# python - 如何引用未继承的类

> ID：10611353
> 
> 赞同：0
> 
> 时间：2012-05-16T02:43:46.043
> 
> 标签：python

我有 2 个类，一个用于移动单位的机器人类和一个用于跟踪它们所在位置的地图类。一个图集有一个图集类和多个机器人类。我如何使用机器人类的 Atlas 中的函数。

```
class Atlas:
    def __init__(self):
        self.robots = []
        self.currently_occupied = {}

    def add_robot(self, robot):
        self.robots.append(robot)
        self.currently_occupied = {robot:[]}   

    def all_occupied(self):
        return self.currently_occupied

    def occupy_spot(self, x, y, name):
        self.currently_occupied[name] = [x, y]

class Robot():
    def __init__(self, rbt):
        self.xpos = 0
        self.ypos = 0
        atlas.add_robot(rbt)  #<-- is there a better way than explicitly calling this atlas
        self.name = rbt

    def step(self, axis):
        if axis in "xX":
            self.xpos += 1 
        elif axis in "yY":
            self.ypos += 1
        atlas.occupy_spot(self.xpos, self.ypos, self.name)

    def walk(self, axis, steps=2):
        for i in range(steps):
            self.step(axis)

atlas = Atlas()  #<--  this may change in the future from 'atlas' to 'something else' and would break script
robot1 = Robot("robot1")
robot1.walk("x", 5)
robot1.walk("y", 1)
print atlas.all_occupied() 
```

我今年 14 岁，刚接触编程。这是一个练习程序，我在 google 或 yahoo 上找不到。请帮忙

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T02:48:05.533

您只能访问您引用的对象的方法。也许您应该将 的实例传递`Atlas`给初始化程序。

```
class Robot():
  def __init__(self, rbt, atlas):
    self.atlas = atlas
     ...
    self.atlas.add_robot(rbt) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T05:12:40.293

这是您可以做到的一种方法

```
class Atlas:
    def __init__(self):
        self.robots = []
        self.currently_occupied = {}

    def add_robot(self, robot):
        self.robots.append(robot)
        self.currently_occupied[robot.name] = []
        return robot

    def all_occupied(self):
        return self.currently_occupied

    def occupy_spot(self, x, y, name):
        self.currently_occupied[name] = [x, y]

class Robot():
    def __init__(self, rbt):
        self.xpos = 0
        self.ypos = 0
        self.name = rbt

    def step(self, axis):
        if axis in "xX":
            self.xpos += 1 
        elif axis in "yY":
            self.ypos += 1
        atlas.occupy_spot(self.xpos, self.ypos, self.name)

    def walk(self, axis, steps=2):
        for i in range(steps):
            self.step(axis)

atlas = Atlas()
robot1 = atlas.add_robot(Robot("robot1"))
robot1.walk("x", 5)
robot1.walk("y", 1)
print atlas.all_occupied() 
```

# wireless - 如何动态禁用 Windows 无线节能？

> ID：10611356
> 
> 赞同：0
> 
> 时间：2012-05-16T02:44:02.620
> 
> 标签：wireless, ndis, power-saving

我们在无线节能方面存在一些问题。如果我们在当前电源计划中将无线适配器设置的省电模式设置为最高性能，所有问题都消失了。但是，这确实会影响电池寿命。所以我们想找到一种方法以编程方式关闭 Wi-Fi 省电，仅在我们的程序运行时。

我们尝试设置 OID_DOT11_POWER_MGMT_REQUEST，但失败并显示 0xC0010017，这意味着 NDIS_STATUS_INVALID_OID。不过查询没问题。

另一种方法是修改当前的电源方案，但是如果用户在我们的程序运行时切换电源方案，可能会导致问题和混乱。

这里的大师知道更好的方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T08:09:38.720

OID_DOT11_POWER_MGMT_REQUEST 在设置时不应失败。您应该为您的 WiFi 供应商提交一个错误。请注意，此 oid 的实现由供应商负责，因此您获得的真正节能完全取决于供应商的驱动程序实现和设备特性。

# asp.net-mvc-3 - 来自 ServiceStack 的 ASP.NET MVC 插件架构

> ID：10611357
> 
> 赞同：0
> 
> 时间：2012-05-16T02:44:34.813
> 
> 标签：asp.net-mvc-3, servicestack, pluggable

ServiceStack 模块非常有趣。Iplugin 接口也非常适合 Rest 服务。但是可插拔mvc在哪里呢？:) 你有什么计划吗？当我说可插拔 Mvc 时，我指的是可插拔区域！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T04:57:13.840

You can also use ServiceStack's high-perf, testable caching, session, config and authentication/authorization components inside MVC websites as well - as described in [ServiceStack's MVC PowerPack](http://www.servicestack.net/mvc-powerpack/).

This [previous answer](https://stackoverflow.com/questions/10571450/should-servicestack-be-the-service-layer-in-an-mvc-application-or-should-it-call/10572977#10572977) shows how you can freely share any dependencies between ServiceStack and MVC by registering them in ServiceStack's built-in IOC and sharing them with MVC Controller factory.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:01:41.307

为什么不简单地询问是否有针对 ASP.NET MVC3 的插件系统？

我已经描述了如何使用我的 contrib 项目来创建插件：http: [//blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/](http://blog.gauffin.org/2012/05/griffin-mvccontrib-the-plugin-system/)

# ios - iOS CoreData NSPredicate 一次查询多个属性

> ID：10611362
> 
> 赞同：21
> 
> 时间：2012-05-16T02:45:19.743
> 
> 标签：ios, core-data, nspredicate, nsfetchrequest

我正在尝试使用 a来查询 我调用`UISearchBar`的 a 的多个属性，每个人都有一个and属性。现在，我的代码可以对其中一个或另一个属性执行搜索（获取），但不能同时执行两个。`NSManagedObject``NSManagedObject``Person``name``socialSecurity`

```
- (void) performFetch
{       
    [NSFetchedResultsController deleteCacheWithName:@"Master"];  

    // Init a fetch request
    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"MainObject" inManagedObjectContext:self.managedObjectContext];
    [fetchRequest setEntity:entity];

    // Apply an ascending sort for the color items
    //NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"Term" ascending:YES selector:nil];
    NSSortDescriptor *sortDescriptor;
    sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"fullName" ascending:YES selector:@selector(caseInsensitiveCompare:)];    

    NSArray *descriptors = [NSArray arrayWithObject:sortDescriptor];
    [fetchRequest setSortDescriptors:descriptors];

    // Recover query
    NSString *query = self.searchDisplayController.searchBar.text;
    //if (query && query.length) fetchRequest.predicate = [NSPredicate predicateWithFormat:@"Term contains[cd] %@", query];
    if(searchValue==1)
    {
        if (query && query.length) fetchRequest.predicate = [NSPredicate predicateWithFormat:@"name contains[cd] %@", query];
    }
    else {
        if (query && query.length) fetchRequest.predicate = [NSPredicate predicateWithFormat:@"socialSecurity contains[cd] %@", query];
    }        

    // Init the fetched results controller
    NSError *error;
    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"pLLetter" cacheName:nil];

    self.fetchedResultsController.delegate = self;

    if (![[self fetchedResultsController] performFetch:&error]) NSLog(@"Error: %@", [error localizedDescription]);

    [self.tableView reloadData];
} 
```

我不知道如何将这两个属性放入此语句中...

```
if (query && query.length) fetchRequest.predicate = [NSPredicate predicateWithFormat:@"name contains[cd] %@", query]; 
```

任何帮助或想法将不胜感激。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-16T08:31:50.433

你可以使用一个[`NSCompoundPredicate`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSCompoundPredicate_Class/Reference/Reference.html).

像这样：

```
NSPredicate *predicateName = [NSPredicate predicateWithFormat:@"name contains[cd] %@", query];
NSPredicate *predicateSSID = [NSPredicate predicateWithFormat:@"socialSecurity contains[cd] %@", query];
NSArray *subPredicates = [NSArray arrayWithObjects:predicateName, predicateSSID, nil];

NSPredicate *orPredicate = [NSCompoundPredicate orPredicateWithSubpredicates:subPredicates];

request.predicate = orPredicate; 
```

也有一个`NSCompoundPredicate`：`AND``andPredicateWithSubpredicates:`

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-16T08:30:22.900

`NSPredicate`您可以使用通常的布尔操作数（例如 AND/OR ）在 an 中附加多个搜索词。

像这样的东西应该可以解决问题。

```
[NSPredicate predicateWithFormat:@"name contains[cd] %@ OR ssid contains[cd] %@", query, query]; 
```

希望有帮助:)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-12-10T23:36:20.887

除了@Matthias 的回答，您还可以使用 NSCompoundPredicate 进行这样的 AND 操作。

**对象-C - AND**

```
NSPredicate *predicate1 = [NSPredicate predicateWithFormat:@"X == 1"];
NSPredicate *predicate2 = [NSPredicate predicateWithFormat:@"X == 2"];
NSPredicate *predicate = [NSCompoundPredicate andPredicateWithSubpredicates:@[predicate1, predicate2]]; 
```

**斯威夫特 - 和**

```
let predicate1:NSPredicate = NSPredicate(format: "X == 1")
let predicate2:NSPredicate = NSPredicate(format: "Y == 2")
let predicate:NSPredicate  = NSCompoundPredicate(andPredicateWithSubpredicates: [predicate1,predicate2] ) 
```

**斯威夫特 3 - 和**

```
 let predicate1 = NSPredicate(format: "X == 1")
    let predicate2 = NSPredicate(format: "Y == 2")
    let predicateCompound = NSCompoundPredicate(type: .and, subpredicates: [predicate1,predicate2]) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-11-13T10:18:12.723

Swift2 的完整解决方案

```
let request = NSFetchRequest(entityName: "Location")
let subPredicate1 = NSPredicate(format: "(name = %@)", searchString)
let subPredicate2 = NSPredicate(format: "(street = %@)", searchString)
let subPredicate3 = NSPredicate(format: "(city = %@)", searchString)

request.predicate = NSCompoundPredicate(type: .or, subpredicates: [subPredicate1, subPredicate2, subPredicate3]) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-09T17:47:33.427

为避免警告**Incompatible pointer types initializing 'NSCompoundPredicate *_strong' with an expression of type 'NSPredicate *'**，请替换以下内容：

```
NSCompoundPredicate * predicate = [NSCompoundPredicate orPredicateWithSubPredicates:subPredicates]; 
```

有了这个：

```
NSPredicate * predicate = [NSCompoundPredicate orPredicateWithSubpredicates:subPredicates]; 
```

来源：[NSCompoundPredicate](https://stackoverflow.com/questions/13647089/nscompoundpredicate)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-01T03:27:51.600

在 CISMGF.com 上的 Fraser Hess 有一个很好的搜索示例。您可以在[http://www.cimgf.com/2008/11/25/adding-itunes-style-search-to-your-core-data-application/阅读这篇文章](http://www.cimgf.com/2008/11/25/adding-itunes-style-search-to-your-core-data-application/)

我基于帖子的代码是：

```
NSArray *searchTerms = [searchText componentsSeparatedByString:@" "];
if ([searchTerms count] == 1) { // Search in name and description
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(name contains[cd] %@) OR (desc contains[cd] %@)", searchText, searchText];
    [self.searchFetchedResultsController.fetchRequest setPredicate:predicate];
} else { // Search in name and description for multiple words
    NSMutableArray *subPredicates = [[NSMutableArray alloc] init];
    for (NSString *term in searchTerms) {
        NSPredicate *pred = [NSPredicate predicateWithFormat:@"(name contains[cd] %@) OR (desc contains[cd] %@)", term, term];
        [subPredicates addObject:pred];
    }
    NSPredicate *predicate = [NSCompoundPredicate andPredicateWithSubpredicates:subPredicates];
    [self.searchFetchedResultsController.fetchRequest setPredicate:predicate];
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-03-03T06:13:01.040

如果您想在多个属性中搜索任何匹配的内容（例如 UISearchControllerDelegate），这可能很有用：

```
NSString *searchFor = @"foo";
NSArray *fields = @[@"Surname", @"FirstName", @"AKA", @"Nickname"]; // OR'd dictionary fields to search
NSMutableArray *predicates = NSMutableArray.new;
for (NSString *field in fields) {
    [predicates addObject:[NSPredicate predicateWithFormat:@"(%K BEGINSWITH[cd] %@)", field, searchFor]];
}
NSPredicate *search = [NSCompoundPredicate orPredicateWithSubpredicates:predicates]; 
```

然后，您可以使用它来过滤字典数组：

```
NSArray *results = [bigArray filteredArrayUsingPredicate:search]; 
```

（BEGINSWITH[cd] 并不神奇，只是意味着它将匹配字符串的开头并且不区分大小写。根据您的匹配条件进行更改。）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-10-21T13:43:56.780

对于斯威夫特：

```
var predicate = NSCompoundPredicate(
        type: .AndPredicateType,
        subpredicates: [predicate1, predicate2]
    ) 
```

# jsp - 404 错误，未从 servlet 加载结果 jsp

> ID：10611368
> 
> 赞同：-2
> 
> 时间：2012-05-16T02:46:04.607
> 
> 标签：jsp, servlets, webforms, http-status-code-404

我已经映射了一个 servlet 和一个 jsp 表单。填写完表格后，我应该会得到一个确认页面，其中包含所填写内容的摘要，并且应该发送一封电子邮件（使用 gmail 远程），但到目前为止没有任何反应，甚至没有错误消息。它加载回注册表所在的 jsp 文件。任何想法为什么会发生这种情况？

过程中根本没有数据库交互。

这是 Servlet：

```
package eBooks.controller;

import eBooks.business.User;
import eBooks.util.MailUtil;

import java.io.IOException;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import javax.mail.MessagingException;
import javax.servlet.RequestDispatcher;
import javax.servlet.http.HttpSession;

public class ContactServlet extends HttpServlet{

protected void doPost(HttpServletRequest request,
                      HttpServletResponse response)
                      throws ServletException, IOException
{
    // get parameters from the request
    String fName = request.getParameter("fName_contact");
    String lName = request.getParameter("lName");
    String emailAddress = request.getParameter("emailAddress");
    String subject = request.getParameter("subject_contact");
    String messageArea = request.getParameter("messageArea");

    // Create a user object and store the object
    User user = new User(fName, lName, emailAddress, subject, messageArea);

    HttpSession session = request.getSession();
    session.setAttribute("user", user);

    // send email to user

    String to = emailAddress;
    String from = "somemail@gmail.com";
    String emailSubject = subject;
    String body = "Dear " + fName + ", \n\n"+
            "Thanks for contacting us. This is a confirmation to inform you that"
            + "we received your message.\n\n"
            + "Our team is reviewing your message and we will get back to you as soon"
            + "as possible. \n\n"
            + "Regards,\n\n"
            + "Matt \n"
            + "CEO";
    boolean isBodyHtml = false;

    try
    {
        MailUtil.sendMail(to, from, emailSubject, body, isBodyHtml);
    }
    catch(MessagingException e)
    {
        String errorMessage =
              "Error Unable to send email. " +
                "Check your Server (Glassfish) logs for details.<br/>" +
                "Note: You may need to configure your system again.<br/>"+ 
              "Error Message: " + e.getMessage();
        request.setAttribute("errorMessage", errorMessage);
        this.log(
                "Unable to send email. \n" +
                "Here is the email you tried to send \n"+
                "====================================\n"+
                "To:" + emailAddress + "\n"+
                "FROM: " + from + "\n" +
                "SUBJECT: " + subject + "\n"+
                "\n" +
                body + "\n\n");
    }

    // forward request and response to JSP page
    String url = "/WEB-INF/view/confirmation.jsp";
    RequestDispatcher dispatcher = getServletContext().getRequestDispatcher(url);
    dispatcher.forward(request, response);
} 
```

}

这是联系表格：

```
 <%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

    <%@page contentType="text/html" pageEncoding="UTF-8"%>

<!DOCTYPE html>
<html>
    <head>

        <link rel="stylesheet" type="text/css" href="css/stylesheet.css">

        <%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

        <title>Contact</title>

    </head>

    <body>

    <div id="page-container">

<c:import url="/WEB-INF/includes/main-nav.jspf"/>

            <div id="header-content">     

                <h1> [ Contact ] </h1>
                <p>&nbsp;</p>
                <p>&nbsp;</p>

                <h2>Share your thoughts with us:</h2>

                <form action="contactEmail" method="post">

                        <p class="name">
                                <input type="text" name="fName" id="fName"
                                       value ="${User.fName}"/>

                                <label for="fName">First Name</label>
                        </p>

                        <p class="name">
                                <input type="text" name="lName" id="lName"
                                    value ="${user.lName}"/>
                                <label for="lName">Last Name</label>
                        </p>

                        <p class="email">
                                <input type="text" name="emailAddress" id="emailAddress"
                                    value="${user.emailAddress}"/>
                                <label for="emailAddress">E-mail</label>
                        </p>

                        <p class="web">
                                <input type="text" name="subject" id="subject"
                                       value="${user.subject}"/>
                                <label for="subject">Subject</label>
                        </p>

                        <p class="text-message">
                            <label for="messageArea">Your message: </label><br>
                            <br>                        
                            <textarea name="messageArea" id="messageArea" 
                                     >${user.message}</textarea>

                        </p>

                        <p class="submit">
                                <input type="button" 
                                       onClick="validate(this.form)" value="Submit">                
                        </p>

                    </form>

                <p>&nbsp;</p>

                <script language="JavaScript">
                    function validate(form){
                        if(form.fName.value==""){
                            alert("Please fill your first name");
                            form.fName.focus();
                        }
                        else if(form.lName.value==""){
                            alert("Please fill your last name");
                            form.lName.focus();
                        }
                        else if(form.subject.value==""){
                            alert("Please fill the subjetct");
                            form.subject.focus();                      
                        }
                        else if (form.messageArea.value==""){
                            alert("The message cannot be empty");
                            form.text_message_area.focus();
                        }

                        else{
                            form.submit();
                        } 
                    }
                </script>

            </div>

            <div id="content-assist">

                <div class ="padding">

                    <h2>We are located at:</h2>

                    <p>153 West 139th Street New York, NY<br>

                    </p>
                        <p>We are currently undergoing a 'face lift', so if you have any questions or would like more information about the services we provide please feel free to contact us.</p>

                    <h2>Give us a call:</h2>
                        <p>Phone:   212- 470-5024<br />
                        Fax:     (212) xxx xxxx<br />
                        Email:   <a href="mailto:info@noemailLuistest.com">info@LuisDomainTest.com</a><br />
                        ZIP: 10030, New York, USA</p>
                        <p><a href="contact.jsp">More contact information…&lt;/a></p>

                </div>

            </div>

    <c:import url="/WEB-INF/includes/footer.jspf"/> 
```

这是确认jsp：

```
 <%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">      

        <link rel="stylesheet" type="text/css" href="css/stylesheet.css">

        <%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

        <title>Dashboard</title>
    </head>
    <body>

<div id="page-container">

    <c:import url="/WEB-INF/includes/main-nav.jspf"/>

    <div id="confirmation-top">     

            <h2>[ Confirmation ]</h2>

        </div>

        <div id="confirmation">     

            <h2> Awesome! We got your message </h2>

            <p>Thanks for contacting us. Your message has been submitted and it
            will be reviewed by our specialist in the order in which it was received.</br>
            <br>    

            A confirmation email has been sent to ${sessionScope.user.emailAddress} </p>

            <form action="index.jsp">
                <input type="submit" value="/index.jps" name="home_btn" />
            </form>

                <p>
                    <i>${requestScope.errorMessage}</i>
                </p>

            <br>
        </div>

    <c:import url="/WEB-INF/includes/footer.jspf"/> 
```

这是 emailUtil：

```
 package eBooks.util;

import java.util.Properties;
import javax.mail.MessagingException;
import javax.mail.Session;
import javax.mail.Message;
import javax.mail.Address;
import javax.mail.Transport;
import javax.mail.internet.InternetAddress;
import javax.mail.internet.MimeMessage;

public class MailUtil {

    //private static String mailhost = "smtp.gmail.com";

    public static void sendMail(String to, String from, String body, 
                                String subject, boolean bodyIsHtml)
                                throws MessagingException
    {

        // 1 - get session 
        Properties props = new Properties();
        props.put("mail.transport.protocol", "smtps");
        props.put("mail.smtps.host", "smtp.gmail.com");
        props.put("mail.smtps.port", 465);
        props.put("mail.smtps.auth", "true");
        props.put("mail.smtps.quitwait", "false");
        Session session = Session.getDefaultInstance(props);
        session.setDebug(true);

        // 2 - create a message
        Message message = new MimeMessage(session);
        message.setSubject(subject);
        if(bodyIsHtml)
            message.setContent(body, "text/html");
        else
            message.setText(body);

        // 3 - address the message
        Address fromAddress = new InternetAddress(from);
        Address toAddress = new InternetAddress(to);
        message.setFrom(fromAddress);
        message.setRecipient(Message.RecipientType.TO, toAddress);

        // 4 - send the message
        Transport transport = session.getTransport();
        transport.connect("somemail2@gmail.com", "password123");
        transport.sendMessage(message, message.getAllRecipients());
        transport.close();
    }

} 
```

这是 servlet xml：

```
 <!-- the definition fo r the servlets -->
<servlet>
    <servlet-name>ContactServlet</servlet-name>
    <servlet-class>eBooks.controller.ContactServlet</servlet-class>
</servlet>
<!-- the mapping for the servlets -->
<servlet-mapping>
    <servlet-name>ContactServlet</servlet-name>
    <url-pattern>/WEB-INF/view/contactEmail</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T05:54:12.433

您是否检查过 servlet 是否被调用？

问题出在这里 `<form action="contactEmail" method="post">` ，你的映射说 `<url-pattern>/WEB-INF/view/contactEmail</url-pattern>`

尝试改变

`<url-pattern>/contactEmail</url-pattern>`

# java - Android 和 SOAP 调用

> ID：10611369
> 
> 赞同：1
> 
> 时间：2012-05-16T02:46:28.680
> 
> 标签：java, android, soap, android-4.0-ice-cream-sandwich

我正在尝试构建一个对我网站上的 php 页面进行肥皂调用的 Android 应用程序。经过在线调查，我注意到Android没有该支持。我找到了一些可以让肥皂在我的 Android 应用程序上运行的解决方案，但我的问题是哪一个是最好的和最容易实现的？如何让 SOAP 在我的 android 应用程序上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:26:38.670

ksoap2-android 是我的选择。看看这篇文章和答案：[Android 中的 Webservice SOAP](https://stackoverflow.com/q/10598734/716075)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-03T18:36:08.183

你可以试试[http://easywsdl.com](http://easywsdl.com)。这是使用 ksoap2 库的在线生成器。它节省了我很多时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T07:23:05.687

ksoap2 是一个很好的解决方案，您可以在此处的谷歌代码中找到它：[ksoap2](http://code.google.com/p/ksoap2-android)。

在这里您可以找到几个开始使用 ksoap2 的链接以及其他一些问题：[单击](http://code.google.com/p/ksoap2-android/wiki/Links)

# jquery - 一系列 facebook 可抓取的 html 文件是否允许从使用 Jquery 动态更改的站点正确发布类似消息？

> ID：10611371
> 
> 赞同：1
> 
> 时间：2012-05-16T02:47:16.497
> 
> 标签：jquery, facebook, facebook-like, facebook-javascript-sdk

我创建了一个音乐发现网络应用程序，我正在尝试与 Facebook 集成。前端本质上是一种使用 HTML5 画布的交互式体验，这意味着它全部存在于一个页面中。

我有一些存在于画布上的 html 代码来显示类似 facebook 的按钮。这个赞按钮对应于当前在画布应用程序中查看的歌曲。使用 jquery，我正在动态更改 的`href`，`fb:like`效果很好。同样，我正在使用`window.history.pushState()`.

这很好用，除了单击“赞”按钮时打印在用户提要上的消息始终与加载的原始页面有关（也就是没有加载任何歌曲的 web 应用程序）。因此，我开始考虑使用 OpenGraph 来更改所述消息。

根据 facebook 上的类似按钮页面：

> **Facebook 什么时候抓取我的页面？**
> 
> Facebook 需要抓取您的页面以了解如何在网站周围显示它。
> 
> Facebook 每 24 小时抓取一次您的页面，以确保属性是最新的。当 Open Graph 页面的管理员单击 Like 按钮以及将 URL 输入 Facebook URL Linter 时，该页面也会被抓取。Facebook 会观察您 URL 上的缓存标头 - 它会按优先顺序查看“过期”和“缓存控制”。但是，即使您指定更长的时间，Facebook 也会每 24 小时抓取一次您的页面。

如上所述，我现在正在创建自己的 url，每次更改歌曲时都会动态更改（无需重新加载站点）。我可以相对轻松地重新编码我的服务器，以便如果有人请求其中一个 URL，返回的 HTML 文件将包含与相关歌曲对应的元标记。让我们假设我这样做并编写了一个脚本来将所有这些 url 卷曲到 facebook。如果用户现在在我的 web 应用程序上单击与给定歌曲相对应的点赞按钮，该消息是否会对应于之前被 facebook 抓取的元标记，还是只是我目前收到的常规消息具有误导性?

最好的，
萨米

PS如果没有人知道这个问题的答案，我明天会把所有的代码都写出来让大家知道。

PPS 在相关说明中，是否有人知道是否使用 OpenGraph 更改点赞按钮单击的文本是否需要将`scope="public_actions"`属性设置为`fb:like`HTML 代码中的元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:08:49.257

你在做什么没有问题，你只需要做两件事：

1.  让服务器为用户可以共享的每个 url 返回正确的 og 元数据。

2.  动态改变like按钮容器数据后，需要调用[FB.XFBML.parse](http://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)方法。我不确定如果您只更改*href*属性它将如何工作，我建议您从 dom 中完全删除 like 按钮，插入一个新的 fb:like 然后调用*FB.XFBML.parse*。

# javascript - js Highcharts中的可点击栏？

> ID：10611374
> 
> 赞同：21
> 
> 时间：2012-05-16T02:48:19.313
> 
> 标签：javascript, jquery, click, highcharts

我有带[*Highcharts*](http://www.highcharts.com/)**的水平**条形图。如何**使每个栏都可以点击**事件，例如“警报”？[](http://www.highcharts.com/)

 ***例如，我有这个系列：

```
series : [{
    name: 'John',
    data: [5, 3, 4, 7, 2]
}, {
    name: 'Jane',
    data: [2, 2, 3, 2, 1]
}, {
    name: 'Joe',
    data: [3, 4, 4, 2, 5]
}]; 
```

我还应该做什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-16T03:13:00.750

您可能会发现[Highcharts Options Reference](http://api.highcharts.com/highcharts#plotOptions.series.point.events.click)是一个很好的起点。

在参考资料中，这是一个柱形图示例，其中单击列会触发警报。

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-point-events-click-column/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/plotoptions/series-point-events-click-column/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-28T20:55:30.623

我需要做类似的事情。希望能帮助到你。

免责声明：我正在使用 GWT Highcharts 包装器！

以下是我所做的重点：

1）我创建了一个接口 FooCallback ，它有一个方法 bar( int index ) 并实现了它

2) 创建了一个方法 getBarClickCallback，它返回一个 JavascriptObject（函数），它以 FooCallback 作为参数

3）我在图表选项/plotOptions/series/point/events/click中添加了一个点击回调，将它传递给getBarClickCallback

4) 一旦点击了一个栏，就会调用 FooCallback.bar( int index )

...

```
chart.setOption("/plotOptions/series/point/events/click",getBarClickCallback(this));

private native static JavaScriptObject getBarClickCallback(FooCallback callback) /*-{
    return function()
    {
        if( this.x !== "undefined" && this.x >= 0 ){
            callback.@com.FooCallback::bar(I)(this.x);
        }
    };
}-*/;

public void bar( int index ){
    //handle chosen index
} 
```

...

此外，我想听类别标签的点击（顺便说一下，我展示了一个包含类别的倒置条形图）

1) 创建了一个方法来定位 dom 中的类别并向它们添加点击事件。我将其命名为 addLabelClickHandler(FooCallback callback, String chartId) 并使用 jquery 添加事件。

2) 添加一个 ChartLoadEventHandler 调用 addLabelClickHandler() 将参数转发到 addLabelClickHandler(FooCallback callback, String chartId)

3) 单击轴类别后，将调用 FooCallback.bar( int index ) ...

```
chart.setLoadEventHandler(new ChartLoadEventHandler() {

    @Override
    public boolean onLoad(ChartLoadEvent chartLoadEvent) {
    addLabelClickHandler();
    return false;
    }
    });

private void addLabelClickHandler(){
    addLabelClickHandler(this,chart.getElement().getId());
}

private native static void addLabelClickHandler(FooCallback callback, String chartId)/*-{
        try {
            var search = '#' + chartId + ' .highcharts-axis-labels:first text';
            $wnd.jQuery(search).each(
                    function(i, j) {
                        $wnd.jQuery(this).css("cursor", "pointer");
                        $wnd.jQuery(this).click(function() {
                            callback.@com.FooCallback::bar(I)(this.x);
                        });
                    });
        } catch (err) {
            console.log(err);
        }

    }-*/; 
```

杰夫

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-13T08:51:02.453

在 Plotoption 下添加点击事件

```
plotOptions: {
                series: {
                    point: {
                        events: {
                            click: function () {
                                    alert(this.category)
                            }
                        }
                    }
                }
            } 
```***

# ios - 在 UIWebview 中打开图像

> ID：10611375
> 
> 赞同：0
> 
> 时间：2012-05-16T02:48:21.583
> 
> 标签：ios, uiwebview

我正在尝试向移动 Safari 添加类似的功能。也就是说，当用户点击并按住 中的图像时`UIWebView`，我希望弹出一个选项以打开`UIWebView`. 类似于您在计算机上的浏览器中右键单击图像并选择“在新选项卡/新窗口中打开图像”。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T01:20:23.203

使用了本教程： http: [//www.icab.de/blog/2010/07/11/customize-the-contextual-menu-of-uiwebview/](http://www.icab.de/blog/2010/07/11/customize-the-contextual-menu-of-uiwebview/)。

归功于： [UIWebView - 在 <img> 标签上启用操作表](https://stackoverflow.com/questions/5163831/uiwebview-enabling-action-sheets-on-img-tags)

# android - Settings.Secure.HTTP_PROXY 在 ICS 中已弃用，但没有关于更换的信息

> ID：10611381
> 
> 赞同：13
> 
> 时间：2012-05-16T02:49:05.353
> 
> 标签：android, proxy, settings, android-4.0-ice-cream-sandwich

Android 开发人员文档对以下内容进行了说明`Settings.Secure.HTTP_PROXY`：

> 全局 http 代理的主机名和端口。在主机和端口 TODO 之间使用 ':' 分隔符 - 不赞成使用 global_http_proxy_host 等

但没有任何关于`global_http_proxy_host`. 现在我总是`null`在尝试阅读时得到`Settings.Secure.HTTP_PROXY`。

`Settings.Secure.HTTP_PROXY`在 ICS 之前的所有版本中都可以正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T06:33:11.870

您可以使用 Java Reflection 设置在 ICS 上测试的全局代理。

**更新代码**

```
Activity activity = this;

private void setProxtAndPortOnICS(String porxyServer2, int port2)
{
            try
{
  Class jwcjb = Class.forName("android.webkit.JWebCoreJavaBridge");
  Class params[] = new Class[1];
  params[0] = Class.forName("android.net.ProxyProperties");
  Method updateProxyInstance = jwcjb.getDeclaredMethod("updateProxy", params);

  Class wv = Class.forName("android.webkit.WebView");
  Field mWebViewCoreField = wv.getDeclaredField("mWebViewCore");
  Object mWebViewCoreFieldIntance = getFieldValueSafely(mWebViewCoreField, oauthPage);

  Class wvc = Class.forName("android.webkit.WebViewCore");
  Field mBrowserFrameField = wvc.getDeclaredField("mBrowserFrame");
  Object mBrowserFrame = getFieldValueSafely(mBrowserFrameField, mWebViewCoreFieldIntance);

  Class bf = Class.forName("android.webkit.BrowserFrame");
  Field sJavaBridgeField = bf.getDeclaredField("sJavaBridge");
  Object sJavaBridge = getFieldValueSafely(sJavaBridgeField, mBrowserFrame);

  Class ppclass = Class.forName("android.net.ProxyProperties");
 Class pparams[] = new Class[3];
 pparams[0] = String.class;
 pparams[1] = int.class;
 pparams[2] = String.class;
 Constructor ppcont = ppclass.getConstructor(pparams);

 updateProxyInstance.invoke(sJavaBridge, ppcont.newInstance("my.proxy.com", 1234, null)); 
}
catch (Exception ex)
{    
 }

 }

 private Object getFieldValueSafely(Field field, Object classInstance) throws IllegalArgumentException, IllegalAccessException {
   boolean oldAccessibleValue = field.isAccessible();
   field.setAccessible(true);
   Object result = field.get(classInstance);
   field.setAccessible(oldAccessibleValue);
   return result;      
} 
```

现在您可以使用代理服务器过滤掉 url。

或者看看[这个](http://madeye.me/2012/04/04/how-to-set-http-proxy-in-android-webview)中文的博客，但是你可以阅读它很容易理解的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-19T21:01:27.053

我只是按照文档中的说明进行操作，但它对我来说`Settings.Secure.HTTP_PROXY`是目前不被弃用的。文档中的（草率）注释只是开发人员的注释，这是 Android 团队将来*可能会考虑做的事情。*

# exception - 哈斯克尔“例外”

> ID：10611382
> 
> 赞同：14
> 
> 时间：2012-05-16T02:49:22.460
> 
> 标签：exception, haskell, exception-handling

我有一组用户、组以及用户和组之间的映射。我有各种操作这些集合的函数，但是不能为不存在的用户添加用户<->组映射，也不能删除仍然有用户作为成员的组等。

所以基本上我希望这些函数抛出必须由调用者明确处理的“异常”。

我首先想到的是返回这样的东西：

```
data Return r e = Success r | Exception e 
```

如果调用者未能与`Exception`.

这是最好的方法吗，是否有一个预先打包的解决方案可以做到这一点？注意我需要在纯代码中抛出和捕获“异常”，而不是 IO Monad。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-16T02:59:01.323

是的，这是一个很好的方法，它在标准库中：`Return r e`与`[Either](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#t%3aEither) e r`. 您甚至可以像在 中使用异常一样编写代码`IO`（即，不必在每个步骤中使用模式匹配显式处理错误）：`Monad`for 的实例`Either`传播错误，就像`Maybe`monad 一样（但`e`在错误的情况下）。例如：

```
data MyError
    = Oops String
    | VeryBadError Int Int

mightFail :: T -> Either MyError Int
mightFail a = ...

foo :: T -> T -> Int -> Either MyError Int
foo a b c = do
    x <- mightFail a
    y <- mightFail b
    if x == y
        then throwError (VeryBadError x y)
        else return (x + y + c) 
```

如果`mightFail a`or`mightFail b`返回`Left someError`，那么`foo a b c`也会；错误会自动传播。（在这里，`throwError`这只是一种很好的编写方式`Left`，使用来自 的函数[`Control.Monad.Error`](http://hackage.haskell.org/packages/archive/mtl/latest/doc/html/Control-Monad-Error.html)；还有`catchError`捕获这些异常的方法。）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-16T03:04:15.503

您描述的`Return r e`类型正是标准类型

```
data Either a b = Left a | Right b 
```

您可能希望使用 mtl 包的所谓[“错误单子”](http://hackage.haskell.org/packages/archive/mtl/2.1.1/doc/html/Control-Monad-Error.html)（更合适的名称是“异常单子”）。（或者，`ExceptionT`如果您不想使用 mtl，则可以在 monadLib 包中。）这允许您通过调用`throwError`和来在纯代码中进行错误处理`catchError`。 [在这里](http://www.haskell.org/haskellwiki/All_About_Monads#Example_3)您可以找到一个示例来说明如何使用它。

# jquery - 在点击功能上显示/隐藏多个 div

> ID：10611386
> 
> 赞同：0
> 
> 时间：2012-05-16T02:50:10.157
> 
> 标签：jquery

[http://jsfiddle.net/studioband/pG87G/6/](http://jsfiddle.net/studioband/pG87G/6/) 此链接是我正在设计的网站的一部分。我已经设法让显示/隐藏和滑动切换工作，当您单击“项目信息”或“订阅”链接时，您可以看到这一点。

问题是我需要一个 div 在另一个以相同的切换动画打开时关闭。我想在相关标题链接时保留它，例如。'project info' 它将像当前一样关闭显示的 div。

我已经研究并发现了具有类似问题的帖子，但未能成功找到适用于 jquery 1.7+ 的正确解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:03:17.213

Hiya**演示** [http://jsfiddle.net/PquXL/show](http://jsfiddle.net/PquXL/show) **或** [http://jsfiddle.net/PquXL/](http://jsfiddle.net/PquXL/)

我在这里使用链接，这将有所帮助:) 所以现在“当另一个 div 以相同的切换动画打开时关闭一个 div”让我知道我是否错过了任何东西。

请避免使用准备好的2个文件，干杯！

**jQuery代码**

```
/* PROJECT REVEAL DIV*/
/* SUBSCRIBE REVEAL DIV*/
$(document).ready(function(){

        $(".slidingDiv").hide();
        $(".show_hide").show();

        $(".slidingDiv_subscribe").hide();
        $(".show_hide_subscribe").show();

    $('.show_hide').click(function(){
        //$(this).toggle();
        $(".slidingDiv_subscribe").slideUp();
        $(".slidingDiv").slideToggle();
    });

    $('.show_hide_subscribe').click(function(){
        //$(this).toggle();
         $(".slidingDiv").slideUp();
        $(".slidingDiv_subscribe").slideToggle();
    });

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T02:57:33.040

编写一个绑定到您的事件的 javascript 函数。

在函数内部，获取您想要隐藏/显示的 div 元素的 id 并使用它来执行适当的操作。

# python - 如何在python中使文本成为类对象

> ID：10611393
> 
> 赞同：-1
> 
> 时间：2012-05-16T02:52:09.237
> 
> 标签：python, myro, calico-project

这是我的整个代码：

```
from Graphics import *
import random
import time
from Myro import *
pt = Point(100,50)
pink = makeColor(200,100,150)
black = makeColor(0,0,0)
red = makeColor(255, 0, 0)
green = makeColor(0, 255, 0)
blue = makeColor(0, 0, 255)
purple = makeColor(255, 0, 255)
orange = makeColor(255, 153, 0)

win = Window("name", 1000, 500)
p1 = Point(0,0)
p2 = Point(200, 300)
p3 = Point(200,0)
d3 = Dot(p3)
p4 = Point(400, 300)
d4 = Dot(p4)
p5 = Point(400, 0)
p6 = Point(600, 300)
p7 = Point(600, 0)
p8 = Point(800,300)
p9 = Point(800,0)
p0 = Point(1000, 300)

win.setBackground(pink)
class Classes(object):
    WIDTH = 200
    HEIGHT = 300

    five = Rectangle(p9, p0)
    five.setOutline(black)
    five.setFill(orange)
    five.draw(win)
    four = Rectangle(p7, p8)
    four.setOutline(black)
    four.setFill(purple)
    four.draw(win)
    three = Rectangle(p5, p6)
    three.setOutline(black)
    three.setFill(blue)
    three.draw(win)
    two = Rectangle(p3, p4)
    two.setOutline(black)
    two.setFill(green)
    two.draw(win)
    one = Rectangle(p1, p2)
    one.setOutline(black)
    one.setFill(red)
    one.draw(win)

    '''def __init__(self,p,win):
        def numClasses(self):
            num = ask("How many classes do you have? Enter a number 1-5")
            int(num)
            if num == 1:

        def askOne(self):
            one = ask'''

'''class classOne(Classes):
    def __init__(self, win):
        Classes.__init__(self, win)
        self.appearance.setFill(red)
        self.appearance.setOutline(black)'''

        #self.append(win)
class classTwo(Classes):
    def __init__(self, win):
        Classes.__init__(self,win)
        self.appearance= Text(Point(100, 10), "Class 1")
        self.appearance.fontSize = 10
        self.appearance.setFill(black)
        self.appearance.draw(win)
        win.flip()
class classThree(Classes):
    def __init__(self, win):
        Classes.__init__(self,  win)
        self.appearance.setFill(blue)
        self.appearance.setOutline(black)
class classFour(Classes):
    def __init__(self,  win):
        Classes.__init__(self,  win)
        self.appearance.setFill(orange)
        self.appearance.setOutline(black)
class classFive(Classes):
    def __init__(self,  win):
        Classes.__init__(self, win)
        self.appearance.setFill(purple)
        self.appearance.setOutline(black)

t = time.strftime("%Y-%m-%d")
ti = Text(Point(win.getWidth()/2, 475), t)
ti.fontSize = 26
ti.setFill(black)
ti.draw(win)

title = Text(Point(win.getWidth()/2, 440), "Schedule for the week of:")
title.setFill(black)
title.fontSize = 20
title.draw(win)

classes = [] 
```

另一件事，Window 是我正在使用的版本中的一个函数，我无法定义它，因为它是预定义的。它只是打开一个单独的窗口（1000 x 500）像素，您可以在其中绘制东西。我只需要知道当在课程下输入文本时如何显示文本。它适用于矩形/点/形状，但不适用于文本。我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T16:06:03.997

首先 - 虽然你描述了类（你告诉 Python classThree 应该是什么样子以及它应该如何工作），但你实际上从未创建过一个类！

其次 - 如果您绘制文本，那么框，框将覆盖文本并且您将看不到它。

第三 - 你真的在这里严重滥用课程。看起来您正在尝试制作一个学校日历，并为每个学校期间制作一个单独的 Python 课程 - 获取应该是数据的内容并将其作为代码进行硬连接。相反，您应该有一个通用的 Period Python 类，然后在每个学校期间创建一个单独的实例。

即，而不是

```
a = FirstPeriod()
b = SecondPeriod()
c = ThirdPeriod() 
```

你应该考虑

```
a = Period("First", blue, black)
b = Period("Second", orange, black)
c = Period("Third", purple, black) 
```

为什么？

*   它使你想要完成的事情更加明显
*   它减少了代码量（从而减少了调试量）
*   它使以后的更改变得更加容易

**编辑：**这是一些经过大量重组的代码 - 我没有安装 Calico，因此它未经测试，但我希望它能给你一个想法：

```
import Myro
from Graphics import Window, Point, Dot, Text, makeColor
import random
import time

Black  = makeColor(0,0,0)
White  = makeColor(255,255,255)
Red    = makeColor(255, 0, 0)
Green  = makeColor(0, 255, 0)
Blue   = makeColor(0, 0, 255)
Purple = makeColor(255, 0, 255)
Pink   = makeColor(200,100,150)
Orange = makeColor(255, 153, 0)
Grey   = makeColor(165, 165, 165)

Monday, Tuesday, Wednesday, Thursday, Friday = range(5)

class Period(object):
    def __init__(self,
        className="<spare>",
        textColor=Black,
        bgColor=White,
        borderColor=Black,
        schedule=None
    ):
        self.name     = className
        self.text     = textColor
        self.bg       = bgColor
        self.border   = borderColor
        self.schedule = schedule or []

    def draw(self, win, rows, columns):
        for day,(start,length) in self.schedule:
            # draw background box
            box = Rectangle(
                Point(columns[day],  rows[start]),
                Point(columns[day+1],rows[start+length])
            )
            box.setFill(self.bg)
            box.setOutline(self.border)
            box.draw(win)
            # draw class name
            label = Text(Point(columns[day]+10,rows[start]+40), self.name)
            label.fontSize = 9
            label.setFill(self.text)
            label.draw(win)

def Week(object):
    def __init__(self, label, periods=None):
        self.label   = label
        self.periods = periods or []

    def draw(self, win, left, top, width, height):
        # how much room to reserve at the top
        label_space = 40

        # draw label at top
        label = Text(Point(Point(left+0.5*width, top+0.5*label_space)), self.label)
        label.fontSize = 20
        label.setFill(Black)
        label.draw(win)

        # figure out the grid for displaying the calendar boxes
        days = 5
        columns = [left + width*n/days for n in range(days+1)]
        periods = 5
        rows = [top + label_space + (height-label_space)*n/periods for n in range(periods+1)]

        # draw class periods based on the grid
        for p in self.periods:
            p.draw(win, rows, columns)

def main():
    win = Window("My window", 1000, 500)
    win.setBackground(Pink)

    week = Week("14 May 2012",
        [
            Period("Math",    bgColor=Red,   schedule=[(Monday,(0,1)), (Wednesday,(0,1)), (Friday,(0,1))]),
            Period("Geology", bgColor=Grey,  schedule=[(Monday,(1,1)), (Tuesday,(0,1)), (Thursday,(0,1))]),
            Period("English", bgColor=Blue,  schedule=[(Tuesday,(1,1)), (Wednesday,(3,1)), (Thursday,(1,1))]),
            Period("LUNCH",   bgColor=White, schedule=[(Monday,(2,1)), (Tuesday,(2,1)), (Wednesday,(2,1)), (Thursday,(2,1)), (Friday,(2,1))]),
            Period("Gym",     bgColor=Orange, schedule=[(Tuesday,(3,2)), (Thursday,(3,2))])
        ]
    )
    week.draw(win, 10, 10, 980, 290)
    # have to do something here to prevent closing immediately?

if __name__=="__main__":
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:12:04.783

如果您创建类的实例，您的代码应该将文本写入屏幕。所以如果你在你的课程下面添加这个，

```
c2 = classTwo(win) 
```

它应该将 classTwo 的对象绘制到窗口。

另外，我之前误解了 win.flip() 部分。它不应该在代码中。

# regex - 正则表达式 - 在出现 2 次分隔符后拆分/分离

> ID：10611396
> 
> 赞同：0
> 
> 时间：2012-05-16T02:52:22.930
> 
> 标签：regex, separator

我需要`aaa|aaa|aaa/bbb|bbb|bbb` 分成`aaa|aaa|aaa`和`bbb|bbb|bbb`。

很简单，只是根据`/`.

但是不，我也可以有这种情况：

```
aaa|aa/a|aaa/bbb|bb/b|bbb 
```

所以我需要使用该`/`字符进行拆分，但仅在该`|`字符出现 2 次之后。

有任何想法吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:28:00.350

您是否使用任何特定的语言？这样的事情怎么样？

```
(.*\|.*\|.*)\/(.*) 
```

# c++ - 在 g++ 中使用 __attribute__ 的不平衡括号

> ID：10611400
> 
> 赞同：6
> 
> 时间：2012-05-16T02:52:43.367
> 
> 标签：c++, c, gcc, compiler-errors

今天我尝试了一个我前段时间开发的项目。当它遇到编译错误时我很惊讶，因为我已经使用 g++ 成功编译了我的项目。

这个简短的片段重现了遇到错误的行：

```
int main() {
    __attribute__((aligned(16)) char arr[5];
} 
```

这会产生此错误：

```
test.cpp:2:32: error: expected ')'
    __attribute__((aligned(16)) char arr[5];
                               ^
                               ) 
```

如您所见，有一个不平衡的括号。有三个“（”和两个“）”。这显然看起来应该实际上会产生编译错误。

这是 this 关键字的有效用法吗？[我似乎在文档](http://www.unixwiz.net/techtips/gnu-c-attributes.html)上找不到任何表明它的东西。

我正在使用 g++ 4.5.2 和 clang 2.8。

请注意，当使用 gcc 而不是 g++ 时会检测到此错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T03:16:29.490

这将是一个编译器错误。编译器看到`__attribute__`后面跟着两个左括号，一些其他标记，然后是两个右括号，这可能是 an`__attribute__`应该是什么样子的“定义”，例如

> <属性> ::=`__attribute__` `'(('`某物`'))'`

我的猜测是，两者之间的标记被解释为`aligned(16`并且奇迹般地它仍然有效。

# visual-studio-2012 - 使用 Bullseye Coverage 在 VS11 上编译 C++ 项目时发生错误

> ID：10611401
> 
> 赞同：1
> 
> 时间：2012-05-16T02:52:46.380
> 
> 标签：visual-studio-2012, bullseye

**使用 Bullseye Coverage 在 VS11 上编译 C++ 项目时发生错误。错误信息是：**

```
1>ClCompile:
1>  BullseyeCoverage Compile C++ 8.5.4 Windows License 6960 
1>  Copyright (c) Bullseye Testing Technology 1990-2012
1>c:\Program Files (x86)\Microsoft Visual Studio 11.0\VC\include\collection.h(50): error : expected ';', near 'new'
1>
1>Build FAILED. 
```

**有人遇到这个问题吗？你能给我一些建议来解决它吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T20:43:57.743

刚刚发布 VS11 时，覆盖构建存在许多错误。尝试将 Bullseye 更新到最新版本，错误应该会在那里修复。

# jquery - Greasemonkey：删除插件添加的事件处理程序

> ID：10611402
> 
> 赞同：-1
> 
> 时间：2012-05-16T02:52:46.630
> 
> 标签：jquery, event-handling, greasemonkey

我正在尝试删除由“滚动”插件添加到页面中的 keydown 事件处理程序。

该页面是这样的：http: [//www.nacion.com/2012-05-15/Mundo/nobel-de-economia-cree-posible-pronta-desaparicion-de-zona-euro-.aspx](http://www.nacion.com/2012-05-15/Mundo/nobel-de-economia-cree-posible-pronta-desaparicion-de-zona-euro-.aspx)

基本上我希望当我使用键盘上的向下/向上箭头时，页面会向下而不是应用插件的小框。我尝试获取插件的实例，但由于某种原因，一旦加载页面，它就无法使用。

另一种方法是在加载页面脚本之前强制加载greasemonkey脚本（这样我可以使用greasemonkey将其删除）但我不知道这是否可能。

任何想法将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T05:33:39.027

该页面似乎使用[jQueryTOOLS Scrollable](http://jquerytools.org/demos/scrollable/index.html)的自定义或错误实现。

糟糕的 UI 体验是由主页中的这段代码触发的：

```
<script>
    // initialize scrollable para ademas
    jQuery(document).ready(function() {
        $("div.scroller_ademas").scrollable({
            size: 1,
            items: '#ademasaldea',
            vertical: true
        }).mousewheel({
            items: '#ademasaldea'
        });
    });
</script> 
```

并且所有应该工作的`unbind()`调用和`keyboard = false`设置都不会影响键盘劫持！

幸运的是，违规行为`<script>`是相当原子的，因此 Greasemonkey 可以阻止违规的 JS 而不会影响其他任何东西。

使用[令人惊叹的`checkForBadJavascripts`实用工具](https://gist.github.com/2620135)阻止 JS 。

像这样：

```
// ==UserScript==
// @name        _Block scrollable that's run amuck.
// @namespace   _pc
// @include     http://www.nacion.com/*
// @run-at      document-start
// @require     https://gist.github.com/raw/2620135/checkForBadJavascripts.js
// ==/UserScript==

checkForBadJavascripts ( [
    [false, /items\:\s+'\#ademasaldea'/, null]
] ); 
```

请注意，这也会阻止“Ademas en El Mundo”框可滚动，但您可以通过添加

```
window.addEventListener ("load", function () {
    GM_addStyle ('#ademasaldea { height: 100%; overflow-y: scroll; }');
}, false); 
```

到脚本。

# android - Android 部署定制

> ID：10611405
> 
> 赞同：0
> 
> 时间：2012-05-16T02:53:20.450
> 
> 标签：android, deployment

在 Android 设备上部署期间是否可以执行自定义步骤？例如，我想检查设备配置以了解我的应用程序是否可以在那里运行。当然，我可以在运行时进行测试，但在自定义期间检查似乎是一个更好的解决方案

谢谢叶夫根尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:14:45.830

您可以做的是创建一个应用程序（安装程序），它将安装应用程序并让安装程序运行检查，然后让它下载应用程序。

此外，如果它的简单内容（例如不支持小屏幕或旧版本的 Android）[Android Manifest](http://developer.android.com/guide/topics/manifest/manifest-intro.html)将值得研究。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T03:03:24.250

不，您无法做任何事情，包括在安装和运行应用程序之前检查有关设备的任何信息。

# html - 在 Textarea 上禁用多行输入

> ID：10611408
> 
> 赞同：1
> 
> 时间：2012-05-16T02:53:59.750
> 
> 标签：html, text, input, field

我知道我可以使用文本输入字段，但出于某些逻辑原因，我想知道这是否可能。我确信我可以使用 JavaScript 来禁用输入或类似的东西，但我更好奇它是否可以直接使用 HTML。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T02:55:07.753

没有 Javascript，你不能做这种事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T01:06:47.890

您可以使用文本输入并设置高度。

# c - 如何在函数中使用 FMOD_SOUND？

> ID：10611411
> 
> 赞同：0
> 
> 时间：2012-05-16T02:54:15.460
> 
> 标签：c, fmod

我想通过在函数中使用 FMOD 来收听声音。我之前想说的是，我可以听到所有其他声音，但它们没有与函数一起使用。

这是代码的摘录：

**头文件.h**

```
void leson(FMOD_SOUND *caisse); 
```

现在是代码：

```
#include <fmod.h>

FMOD_SYSTEM *system;
FMOD_SOUND *caisse;
FMOD_RESULT resultat8;
FMOD_System_Create(&system);
FMOD_System_Init(system, 1, FMOD_INIT_NORMAL, NULL);

resultat8 = FMOD_System_CreateSound(system, "sound/caisse.wav", FMOD_CREATESAMPLE, 0, &caisse);
if (resultat8 != FMOD_OK)
{
    fprintf(stderr, "error");
    exit(EXIT_FAILURE);
} 
```

我想用键 V 调用函数 leson()

```
 switch(event.type)
            {

                    case SDL_KEYDOWN:
                    switch(event.key.keysym.sym)
                            {

                                case SDLK_v:
                                leson(&caisse);
                                break; 
```

这里是 leson()

```
void leson(FMOD_SOUND *caisse)

{
FMOD_System_PlaySound(system, FMOD_CHANNEL_FREE, caisse, 0, NULL);
fprintf(stderr, "test");

} 
```

当我按 V 时，文件 stderr 包含线路测试，所以开关没问题，但为什么我听不到这个声音？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T19:49:47.133

乍一看，声音看起来应该正在播放。要快速找出此错误，您需要修复错误检查。设置 resultat8 等于每个 FMOD 函数，就像你对 FMOD_System_CreateSound 所做的那样，然后把

```
if(resultat8 != FMOD_OK) 
{
  printf("%s", FMOD_ErrorString(resultat8));
} 
```

在每次 FMOD 函数调用之后。如果发生错误，这将打印出返回的错误消息。

# google-prediction - Google Prediction API：编程与 API Explorer 访问和“超出用户速率限制”错误。

> ID：10611412
> 
> 赞同：2
> 
> 时间：2012-05-16T02:54:18.913
> 
> 标签：google-prediction

我在使用 Google Prediction API 时遇到问题。我不知道哪些信息可能相关，因此我将提供所有可能相关的信息。如果信息过多，我深表歉意。

我在网络应用程序中使用 Google Prediction API。我首先通过 API Explorer 训练模型。当我尝试通过在 GAE 上运行并使用服务帐户身份验证的 Java 程序访问经过训练的模型时，我看不到模型。然后，我从我的 Java 程序中以编程方式使用同一个存储桶中的相同文件训练了一个模型。现在我可以使用我的程序中的模型，但我无法使用 API 资源管理器查看模型。当我查看 API 控制台中的 API 使用情况时，我看到它根据正在运行的 Web 应用程序按预期上升（我只有 1 个使用 Google API 的程序）。我还在配额选项卡中将每次使用限制更改为 200 req/sec/user。

我遇到的问题是，当我的程序进行一系列预测调用时，第 5 次调用失败并显示消息“超出用户速率限制”。5 次调用发生在 5 秒内（实际请求周期是 1 秒内的百分之几秒）。

我假设我通过控制台设置的 200 req/sec 限制没有应用于我正在使用的模型，并且正在应用默认的 1 req/sec 速率（因此 5 req in 5 secs它）。我进一步假设发生这种情况的原因与我无法从 API 资源管理器中看到该模型的原因相同，但我不确定这一点。

当我使用 API Explorer 时，我使用拥有 API 帐户和 GAE 帐户的同一个帐户以及我在生成 p12 密钥和我用来调用的服务帐户时登录的同一个帐户登录预测 API。

有没有人看到任何可以解释为什么我看到我看到的东西/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T02:16:50.353

问题解决了。给出错误的是 OAuth 服务器。我很惊讶 OAuth 服务器会有这样的限制。

# opencv - GoodFeatureToTrackDetector 给出不一致的时间结果 - opencv

> ID：10611413
> 
> 赞同：1
> 
> 时间：2012-05-16T02:54:20.143
> 
> 标签：opencv

我正在比较 OpenCV2.2 提供的特征检测器的性能，作为视觉特征匹配的基础。主要是 FAST 和 GFTT

我正在使用 openCV2.2 的 GoodFeaturesToTrackDetector 从一组图像中提取角点。我正在监控每个关键点的时间和速度。问题是对于相同的图像数据库，检测功能时间与运行时间不同。即使使用调试和断点运行它的时间也不同[使用调试更快！]

有时它的工作速度非常快，而其他的则不然。

我正在使用VS2010。

# grails - 如何使用 codenarc 插件创建自定义规则集？

> ID：10611414
> 
> 赞同：2
> 
> 时间：2012-05-16T02:54:21.293
> 
> 标签：grails, groovy, codenarc

我目前正在使用`codenarc plugin`，并且我想为其自定义 codenarc 规则集属性以检查我的代码的正确缩进。

有没有人试过这个？

请帮忙。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T01:40:26.877

CodeNarc（当前）不包括任何检查/强制代码缩进的规则。虽然欢迎您贡献一份！

您可以在以下位置查看所有规则的列表： [http ://codenarc.sourceforge.net/codenarc-rule-index.html](http://codenarc.sourceforge.net/codenarc-rule-index.html)

格式化规则在： [http ://codenarc.sourceforge.net/codenarc-rules-formatting.html](http://codenarc.sourceforge.net/codenarc-rules-formatting.html)

克里斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-19T18:35:42.137

使用`Indentation`规则。这包含在`rulesets/formatting.xml`. 这将检查类、字段和方法声明以及语句的缩进（仅限空格；不是制表符）。默认为每个缩进级别 4 个空格，这可以通过`spacesPerIndentLevel`属性进行配置。有关详细信息，请参阅[此页面](https://codenarc.github.io/CodeNarc/codenarc-rules-formatting.html)。

启用规则后，默认 HTML 报告中的违规报告如下所示： [显示违反“缩进”规则的示例报告](https://i.stack.imgur.com/0aJ5R.png)。

# objective-c - 如何将数组对象输入 NSMutableArray？

> ID：10611415
> 
> 赞同：1
> 
> 时间：2012-05-16T02:54:25.743
> 
> 标签：objective-c, ios, nsmutablearray

sortedArray 包含 100 多个需要按“时间”键中的“小时”组织的对象。结果是有一个数组数组来填充表的各个部分并使用小时作为索引。“时间”的形式是 - 2012-05-15 07:20:00

```
NSInteger d = 0;
NSInteger prevd;
NSMutableArray *tempArray = [[NSMutableArray alloc] init];
detailArray = [[NSMutableArray alloc] init];
for (NSInteger i = 0; i < 24; ++i)
    [detailArray addObject:[NSNull null]];

for (NSArray *item in sortedArray) {
    prevd = d;
    d = [[[[item objectAtIndex:0] objectForKey:@"time"] substringWithRange:NSMakeRange(11, 2)] intValue];
    if (d > prevd && prevd != 0) {
        [detailArray replaceObjectAtIndex:d withObject:tempArray];
        [tempArray removeAllObjects];
    }
    [tempArray addObject:item];
} 
```

对象没有以正确的 detailArray 位置结束或根本没有结束。例如，`[detailArray objectAtIndex:6]`给出时间为 14（下午 2 点）的项目。

我错过了什么？

**使用第一个答案编辑以更正代码。**就是现在：

```
NSInteger d = 0;
NSInteger prevd;
NSMutableArray *tempArray = nil;
detailArray = [[NSMutableArray alloc] init];
for (NSInteger i = 0; i < 24; ++i)
    [detailArray addObject:[NSNull null]];

for (NSArray *item in sortedArray) {
    prevd = d;
    d = [[[[item objectAtIndex:0] objectForKey:@"time"] substringWithRange:NSMakeRange(11, 2)] intValue];
    if (d > prevd) {
        tempArray = NSMutableArray array];
        [detailArray replaceObjectAtIndex:d withObject:tempArray];
    }
    [tempArray addObject:item];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T03:04:02.190

你不能像这样重用 tempArray，你最终会得到包含多个条目的 detailArray，这些条目都指向同一个 tempArray 实例。（即每个有时间的时隙都将以最后一个时隙的数组结束）。

代替

```
[detailArray replaceObjectAtIndex:d withObject:tempArray];
[tempArray removeAllObjects]; 
```

你会想要的

```
tempArray = [NSMutableArray array];
[detailArray replaceObjectAtIndex:d withObject:tempArray]; 
```

这样每个时隙都有自己的数组。而且您还需要将 tempArray 的原始声明更改为

```
NSMutableArray *tempArray = nil; 
```

# ios - 在我的 UIViewController 中，我希望用户选择两个选项之一。xcode 中实现此功能的简单 ui 元素是什么？

> ID：10611418
> 
> 赞同：0
> 
> 时间：2012-05-16T02:54:51.470
> 
> 标签：ios

我不想使用 UITableView 也不想使用 pickerView 因为我只有两个选项可供选择。我怎么能以最简单的方式实现它。xcode 中没有某种无线电选项吗？

此外，我的 UIView 上有一个空间拐杖来合并 PickerView！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:39:38.680

如果它们是类似布尔值的选项，请使用`UISwitch`. 否则`UISegmentedControl`就是你的朋友。

# jquery - jQuery将变量的内容传递给选择器

> ID：10611423
> 
> 赞同：0
> 
> 时间：2012-05-16T02:55:25.987
> 
> 标签：jquery, variables

我有点 jQuery 菜鸟，但我找不到一个非常基本的问题的答案！

我正在尝试创建一个系统，用户可以在其中单击列表中的单词，然后 jQuery 获取该列表项的内容，将其添加到变量中，然后在我的演示中为另一个列表中的任何项目添加背景颜色它找到那个词。

代码似乎可以创建变量，并且变量的内容是正确的，但是我无法让它在选择器的 :contains(variable) 部分中使用变量的内容。如果我手动添加一个单词，例如铝，它似乎工作正常。

我敢肯定这只是我使用该语言的经验不足，但几天来一直在谷歌中搜寻非常复杂的系统，但没有这样的基础知识。

您可以从下面看到我正在使用 alert(test) 来检查变量是否包含正确的字符串，然后我试图将该字符串传递给 :contains(test) 或 (#test) 以便它搜索突出显示 table.selection-items 中包含此字符串的行。

任何想法都会很棒。对不起，这是一个菜鸟问题！

感谢 Simon

HTML

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="config-test.js" type="text/javascript"></script>

<style type="text/css">
.highlight {
    color: #F00;
}
.selection-itemsdiv {
    display: block;
    width: 200px;
    background-color:#CCC;
}
</style>
</head>

<body>

<p class="no-script">For the selection guide to work you must have javascript enabled</p>

<ol class="selection-criteria">
    <li>Is this for a hazardous location? For example ex d rated enclosures?
        <ol class="hazardous">
            <li>Yes</li>
            <li>No</li>
        </ol>
    </li>

    <li>Materials
        <ol class="material">
            <li>Plastic</li>
            <li>Steel</li>
            <li>Aluminium</li>
            <li>Stainless Steel</li>
        </ol>
    </li>
    <li>IP Rating
        <ol class="iprating">
            <li>IP55</li>
            <li>IP56</li>
            <li>IP65</li>
            <li>IP66</li>
        </ol>
    </li>
</ol>

<table class="selection-items">
    <thead>
        <tr>
            <td>Image</td>
            <td>Range</td>
            <td>Hazardous Location</td>
            <td>Material</td>
            <td>IP Rating</td>
            <td>Smallest Size</td>
            <td>Biggest Size</td>
        </tr>
            <tr>
                <td>1</td>
                <td>2</td>
                <td>3</td>
                <td>4</td>
                <td>5</td>
                <td>6</td>
                <td>7</td>
            </tr>
    </thead>
    <tbody>
        <tr>
            <td class="image">Image</td>
            <td class="range">Universal NI (Steel)</td>
            <td class="hazardous">No</td>
            <td class="material">Steel</td>
            <td class="iprating">IP66</td>
            <td class="smlsize">300x200x150</td>
            <td class="lrgsize">1200x800x300</td>
        </tr>
            <tr>
                <td class="image">Image</td>
                <td class="range">Monarch IP (Stainless)</td>
                <td class="hazardous">No</td>
                <td class="material">Stainless Steel</td>
                <td class="iprating">IP66</td>
                <td class="smlsize">300x200x175</td>
                <td class="lrgsize">2000x800x600</td>
            </tr>

            <tr>
                <td class="image">Image</td>
                <td class="range">Monarch IP (Aluminium)</td>
                <td class="hazardous">No</td>
                <td class="material">Aluminium</td>
                <td class="iprating">IP66</td>
                <td class="smlsize">407x407x272</td>
                <td class="lrgsize">2007x807x602</td>
            </tr>   

            <tr>
                <td class="image">Image</td>
                <td class="range">Connector TE (Steel)</td>
                <td class="hazardous">No</td>
                <td class="material">Steel</td>
                <td class="iprating">IP66</td>
                <td class="smlsize">150x150x80</td>
                <td class="lrgsize">600x200x120</td>
            </tr>   

            <tr>
                <td class="image">Image</td>
                <td class="range">Connector TE (Steel)</td>
                <td class="hazardous">No</td>
                <td class="material">Stainless Steel</td>
                <td class="iprating">IP66</td>
                <td class="smlsize">150x150x80</td>
                <td class="lrgsize">600x200x120</td>
            </tr>   

            <tr>
                <td class="image">Image</td>
                <td class="range">Exe Sloping Roof Terminal Box</td>
                <td class="hazardous">Yes</td>
                <td class="material">Stainless Steel</td>
                <td class="iprating">IP66</td>
                <td class="smlsize">300x200x150</td>
                <td class="lrgsize">1200x800x300</td>
            </tr>   

    </tbody>
</table>

<div class="selection-itemsdiv">
<h3>Connector TE</h3>
<p>No</p>
<p>Stainless Steel</p>
<p>IP66</p>
<p>300x200x150</p>
<p>1200x800x300</p>
</div>

</body>
</html> 
```

jQuery

```
$(document).ready(function() {

// This removes the Script warning on the page
    $('p.no-script').remove();

$('ol.selection-criteria ol li').click(function() {

    $(this).addClass('highlight');

    if($('ol.selection-criteria ol li').hasClass('highlight')) {
        var test = $(this).html();
        alert(test);
        $('table.selection-items tbody tr:contains(#test)').css('background-color','#dddddd')
    }
    else {
    }

});

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T02:57:48.987

```
$('table.selection-items tbody tr').contains(test).css('background-color','#dddddd') 
```

# meteor - 是否可以更改流星默认的 html 扩展名

> ID：10611424
> 
> 赞同：2
> 
> 时间：2012-05-16T02:55:37.990
> 
> 标签：meteor

只要文件具有 .handlebars 或 .hbs 扩展名，我正在使用支持把手的 WebStorm。

看起来流星中的所有模板都使用**.html**扩展名。

可以定制吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T11:56:30.320

是的，您可以更改模板智能包中的扩展名。

打开

```
/packages/templating/package.js 
```

你会看到

```
"html", function (bundle, source_path, serve_path, where) { 
```

在第 30 行或附近。将其更改为

```
"hbs", function (bundle, source_path, serve_path, where) { 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-02-18T20:57:59.637

我可能有点晚了。

我认为 Webstorm 允许您为车把添加扩展和其他插件。

> 要让插件处理 html 文件，请打开 Settings->File Types 并在列表中找到“Handlebars”。然后，在下面的“Registered Patterns”窗格中，添加“*.html”。

来源：github

# java - 等效于 Java 中的 vb.net 'Except' 方法

> ID：10611425
> 
> 赞同：-1
> 
> 时间：2012-05-16T02:55:45.333
> 
> 标签：java, vb.net

我想在java中完全这样做

[比较两个字符串 ArrayList](https://stackoverflow.com/questions/3885700/compare-two-string-arraylists)

接受的答案是完美的.. 'Except' 方法...在 Java 中是否有类似的方法...确定标准 Java 库中没有，但第三方库中是否有类似 apache 的东西？

PS我用谷歌搜索了这个..找不到任何东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:09:24.853

您想查找 list`a`中不存在的元素 list `b`。

怎么样：

```
a.removeAll(b); 
```

这将删除`b`from的所有元素`a`。根据定义，剩下的`a`东西就是不在的东西`b`。

如果您不能或不想更改`a`，请将其复制并`removeAll()`在副本上执行。

更一般地说，如果您在 Java 中的集合类不支持`removeAll()`，则创建一个支持它的集合类型，并`a`在该新对象上执行删除。

如果列表很大，您可能希望创建一个`HashSet`from`a`例如，这样删除（即删除的内部查找部分）可以比`List`子类型更有效地进行。

# objective-c - 动态 UITableView 上的 ContentOffset

> ID：10611426
> 
> 赞同：3
> 
> 时间：2012-05-16T02:55:47.453
> 
> 标签：objective-c, cocoa-touch, uitableview, contentoffset

我已将“加载”单元格硬编码为表格视图的最后一个单元格，生成此单元格时，我会调用一些方法从 Web 服务加载新数据，并在收到响应时保存数据，发送通知并在我的表格视图上调用 reloadData。

我想做同样的事情，但我的表格的第一个单元格。

我的表格是时间函数，因此向下滚动会显示较晚日期的项目，其想法是让用户滚动更高并加载较早的项目。

我似乎无法成功设置初始偏移量来隐藏这个加载单元，因为如果它被显示，那么它当然会开始加载早期的数据。我知道，`scrollToRowAtIndexPath:atScrollPosition:animated:`但找不到合适的位置来调用它（索引路径：1:0 第 1 行第 0 节）。

正如我之前提到的，我需要在调用创建任何单元格之前设置此可见部分。

有没有人在表格视图的开头尝试过这种单元格？

如何在第一个单元格甚至被调用加载之前设置我的表格视图的初始可见部分？

我应该在这里做一些更花哨的事情吗？就像有一个 tableviewHeader 一样，当它显示时，我在索引路径 0:0 处插入一行，这是加载器，并在我 reloadTable 后将其删除？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-17T18:41:49.077

我使用了 contentInset，而不是在`viewDidLoad`.

```
[self.tableView setContentInset:UIEdgeInsetsMake(-50,0,0,0)]; 
```

当生成索引路径 [0,0] 处的行时，我重置了插图，这发生在`tableView:cellForRoWAtIndexPath:`

```
[self.tableView setContentInset:UIEdgeInsetsMake(0,0,0,0)]; 
```

每次在表视图上发送 reloadData 消息之前，我都会重新放置该插图：

```
- (void)reload{
    [self.tableView setContentInset:UIEdgeInsetsMake(-50,0,0,0)];
    [self.tableView reloadData];
} 
```

这意味着我的加载单元只有在查看时才会出现在屏幕上，当新数据进入并重新加载表格时，我会将偏移量放回去。

# html - 是否有重复图像延伸到其包含/父元素之外？

> ID：10611428
> 
> 赞同：0
> 
> 时间：2012-05-16T02:55:53.010
> 
> 标签：html, css

我在页面底部有一个包含在“主”元素中的重复图像，我希望它沿着整个 x 轴延伸；现在，“main”有一个固定的宽度，所以图像只会重复到那个点。

我怎样才能让它超越这个范围？例如，整个 x 轴？

主要的：

```
.main {
margin:0 auto;
width:960px;
position:relative;
} 
```

页脚：

```
footer  {
padding:49px 20px 0;
height:98px;
font-family: Arial, Helvetica, sans-serif;
background-image: url(../images/bg_bottom.png);
} 
```

源码实现：

```
<div class="main">
        <footer>

                [content]

        </footer>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:42:31.540

为此，您将不得不使用职位。特别是，您将需要一个带有`position:absolute`and的页脚`width:100%`（在其中，带有 的图像`background-repeat:repeat-x`）。

您可以找到更多搜索页脚位置的信息，例如：

[固定位置的页脚](http://mark-allen.net/notes/layout/footer/)

[固定页脚](http://css-tricks.com/snippets/css/fixed-footer/)

[将 CSS 页脚放在他们的位置](http://www.kathymarks.com/archives/2005/09/putting_css_footers_in_their_place.html)

# silverlight - 如何让列表框中的每个控件设置自己的高度，然后将此高度镜像到列表框中的所有其他项目？

> ID：10611431
> 
> 赞同：1
> 
> 时间：2012-05-16T02:56:28.863
> 
> 标签：silverlight, xaml, data-binding

似乎应该很简单，但我很难过！

我有一个包含多个 MyControl 实例的列表框（通过数据绑定到 ObserveableCollection）。

MyControl 能够设置它的高度（基于它内部发生的事情）。

当任何其他实例更改其自身高度时，我希望列表框中的每个 MyControl 实例都可以增长和缩小。即：它们总是具有相同的高度。

就像我说的 - 看起来应该很简单，但我让自己陷入了事件、属性和绑定的网络中，我似乎找不到一个简单的例子来说明如何有效地做到这一点。当我将单个 MyControl 放在页面上时，它可以完美地调整自身大小。只是不在列表框中。谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T06:56:09.360

将 ItemsPanelTemplate 设置为 Panel 的子类，该子类根据您自己的算法布置其子类。

# ios - KeychainItemWrapper 链接错误

> ID：10611434
> 
> 赞同：6
> 
> 时间：2012-05-16T02:57:08.347
> 
> 标签：ios, keychain

我只是尝试使用 Apple 提供的 KeychainItemWrapper，但每次都出现链接错误：

> 架构 i386 的未定义符号：“_OBJC_CLASS_$_KeychainItemWrapper”，引用自：DataModel.o 中的 objc-class-ref
> 
> ld：未找到体系结构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我已经包含了安全框架并检查了为什么 Apple 包含在 Xcode 项目中，但我似乎找不到其他问题所在。

```
_keychain = [[KeychainItemWrapper alloc] initWithIdentifier:@"com.website.project" accessGroup:nil];
[_keychain setObject:_username forKey:(id)kSecAttrAccount];
[_keychain setObject:_password forKey:(id)kSecValueData]; 
```

我还将“com.website.project”添加到我的钥匙串访问组中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T03:03:30.327

确保 KeychainItemWrapper 在“编译源”列表中。

# html - IE9 浮动重复/删除错误？

> ID：10611441
> 
> 赞同：1
> 
> 时间：2012-05-16T02:57:58.423
> 
> 标签：html, css, internet-explorer-9

我希望其他人对这里发生的事情有一些意见。当我在 09 年最初在[这个](http://clcm.org/backup.html)网站上工作时，我在几个版本的 Internet Explorer 上对其进行了测试，它工作得可以接受，但在 IE9 中它是[这样](http://i963.photobucket.com/albums/ae120/dog_man_star/Screen-Shot-2012-05-15-at-618.jpg)的。（正确版本和 IE9 版本的比较。应该很明显哪个是哪个版本。）最让我困惑的是包含正文的框似乎已被复制。虽然我在这里确实有两个元素可能会造成重复的印象，但我删除了一个，它仍然做了同样的事情。如果未设置高度，似乎是导致问题的“文本框” div 效果会更好。然后它与可能 100 像素的标题之间存在垂直间隙，但它不再重复或位于侧边栏下方。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:06:23.983

您遇到了一些破坏站点布局的标记问题。例如：

```
<ul>  
  <li><a href="communityed.html">Community Education and Training</a></li>      
  <li><a href="outreach.html">Outreach</a> <!-- no closing </li> -->
  <li><a href="cals.html">CLCM Programs</a></li>
</ul> 
```

您还忘记关闭`<h1>`：

```
<div id="linksline">
  <h1>Links
</div> 
```

修复这些解决了您在 IE9 中的布局。

请记住，*始终验证*. 您可以在 IE9 中轻松执行此操作，方法是按 F12，然后选择*Validate*选项，然后选择*HTML*。

![在此处输入图像描述](../Images/b152e5c40a5634e2c42997f878eb4750.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T05:03:05.010

这是您的错误，h1 标签未关闭第 74 行

```
<div id="linksline">
    <h1>
    Links</div> 
```

# algorithm - 有序列表的复合哈希

> ID：10611443
> 
> 赞同：3
> 
> 时间：2012-05-16T02:58:23.540
> 
> 标签：algorithm, hash

假设我有某种类型的 n 个对象（x1，x2，...，xn）的有序列表（例如，可变长度二进制数据文件）。

这些对象中的每一个都经过安全散列（例如 SHA1）以产生 m 位散列码（h1、h2、...、hn）

我现在希望将这些哈希码组合成一个复合码，该码可以唯一且安全地（忽略可忽略的碰撞概率）识别有序列表。

（假设对象很大并且不能再次读取它们的实际数据）

一种幼稚且不正确的方法是将哈希码异或在一起。这具有不希望的特性，即 (x1, x2) 将具有与 (x2, x1) 相同的复合代码。

通过什么算法可以组合哈希码以获得所需的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T12:46:21.603

出于一致性和安全原因，我将通过将 SHA-1 应用于各个 SHA-1 哈希的串联来组合列表项的各个哈希。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T12:21:59.473

可能您可以使用与 java 中相同的算法来处理列表哈希，这是 32 位哈希码的示例

```
int hashCode = 0;
for(Element e:list) {
   hashCode = 31*hashCode + (e==null ? 0 : e.hashCode());
} 
```

对于多层，您可以使用另一个素数。我希望你能理解这个算法的主要思想，并且可以应用于任意 m 位哈希码。

# performance - `let` 在 Clojure 中是如何实现的，它的开销是多少？

> ID：10611444
> 
> 赞同：14
> 
> 时间：2012-05-16T02:58:24.597
> 
> 标签：performance, clojure, let

我可以看到两种实现`let`绑定的方法。首先，从[SICP 可知](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-26.html#%_thm_4.6)，`let`可以实现为**lambda 函数**。这很方便和简单，但考虑到每个 lambda( `fn`) 在 JVM 中被翻译成单独的类以及`let`在普通程序中使用的次数，这似乎非常非常昂贵。

其次，`let`绑定可以直接转换为**本地 Java 变量**。这几乎没有开销，但是将绑定存储在堆栈上会破坏语言语义：在这种情况下，创建闭包是不可能的 - 保存的值将在堆栈展开后立即被销毁。

那么 Clojure 中使用的实际实现是什么？指向 Clojure 源代码中的相应行表示赞赏。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-16T03:02:12.230

`let`绑定变量作为**最终**本地值存储在堆栈中。

由于它们是最终的，因此可以在需要时将它们绑定到闭包中（这类似于在 Java 的匿名内部类中使用最终局部变量的方式）。在底层，JVM 将值复制到代表闭包的对象中（它被存储为最终字段）。结果，即使在堆栈帧消失后，闭包仍然有效。

总体而言，let-bound 变量的开销极低，从性能角度来看，您应该毫不犹豫地使用它们。在 JVM 上可能无法做得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T19:22:32.307

局部变量是指针，分配在堆栈上，指向堆上的值/对象。指针超出范围，但只要闭包保留指向它的指针，对象就会保持活动状态。

# c# - Visual Studio 2010 上的警告，但没有错误。

> ID：10611448
> 
> 赞同：0
> 
> 时间：2012-05-16T02:59:34.600
> 
> 标签：c#, wpf

我在这里有一个 WPF C# 应用程序，终于解决了错误。但是在我运行程序之后，它可以工作，只是有 7 个警告，我不知道它是关于什么的。我需要知道它是否会对我的项目造成任何问题..

警告：

1.  CA2214：Microsoft.Usage：“PoseViewModel.PoseViewModel()”包含一个调用链，该调用链导致调用该类定义的虚拟方法。查看以下调用堆栈以了解意外后果：

    PoseViewModel..ctor() ViewModelBase.get_IsInDesignMode():Boolean PoseViewModel.set_IsTracking(Boolean):Void ObservableObject.RaisePropertyChanged (Expression>):Void

2.  CA2000：Microsoft.Reliability：在方法“SpeechController.InitSpeechRecognition()”中，对象“<> *g_initLocal()”并未沿所有异常路径进行处理。在对象'<>g* _initLocal()' 的所有引用超出范围之前调用 System.IDisposable.Dispose。

3.  CA1901：Microsoft.Portability：正如您在代码中声明的那样，P/Invoke 'NativeWrapper.mouse_event(uint, int, int, int, int)' 的参数 'dwExtraInfo' 在 64 位平台上将是 4 字节宽。这是不正确的，因为此 API 的实际本机声明表明它在 64 位平台上应该是 8 字节宽。请参阅 MSDN 平台 SDK 文档以帮助确定应使用什么数据类型而不是“int”。

4.  CA1401：Microsoft.Interoperability：更改 P/Invoke 'NativeWrapper.SetCursorPos(int, int)' 的可访问性，使其不再从其程序集外部可见。

5.  CA1401：Microsoft.Interoperability：更改 P/Invoke 'NativeWrapper.mouse_event(uint, int, int, int, int)' 的可访问性，使其不再从其程序集外部可见。

6.  CA1060：Microsoft.Design：因为它是一个 P/Invoke 方法，所以应该在名为 NativeMethods、SafeNativeMethods 或 UnsafeNativeMethods 的类中定义“NativeWrapper.SetCursorPos(int, int)”。

7.  CA1060：Microsoft.Design：因为它是一个 P/Invoke 方法，所以应该在名为 NativeMethods、SafeNativeMethods 或 UnsafeNativeMethods 的类中定义“NativeWrapper.mouse_event(uint, int, int, int, int)”。

帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:56:08.523

看起来您为项目启用了代码分析。这些警告主要是为可重用框架设计的，但如果需要，最好分析它们并修复它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:39:34.507

所以......这就是警告。它们不是错误，只是警告。该应用程序可以运行，但代码的某些部分对于 Visual Studio 来说是可疑的。只需尝试修复它们以确保您生产的产品的质量。

例如，第二个似乎非常重要。

# csv - 关于 d3.js：如何让 csv 支持中文数据？

> ID：10611449
> 
> 赞同：0
> 
> 时间：2012-05-16T02:59:47.490
> 
> 标签：csv, d3.js

如何使 d3.csv 支持中文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T07:47:30.320

D3 应该支持任何字符集，或者宁可忽略它。如果您遇到问题，这很可能是由您的浏览器引起的。检查您的浏览器设置和您正在加载的页面的[字符编码](http://www.webstandards.org/learn/articles/askw3c/dec2002/)。

# cuda - 如何使用 make_cudaExtent 正确定义 cudaExtent？

> ID：10611451
> 
> 赞同：3
> 
> 时间：2012-05-16T03:00:09.640
> 
> 标签：cuda, volume, multidimensional-array

我想在 CUDA 中有一个 3d 浮点数组，这是我的代码：

```
#define  SIZE_X 128 //numbers in elements
#define  SIZE_Y 128
#define  SIZE_Z 128
typedef float  VolumeType;
cudaExtent volumeSize = make_cudaExtent(SIZE_X, SIZE_Y, SIZE_Z); //The first argument should be SIZE_X*sizeof(VolumeType)??

float *d_volumeMem;
cutilSafeCall(cudaMalloc((void**)&d_volumeMem, SIZE_X*SIZE_Y*SIZE_Z*sizeof(float)));

.....//assign value to d_volumeMem in GPU

cudaArray *d_volumeArray = 0;
cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc<VolumeType>();
cutilSafeCall( cudaMalloc3DArray(&d_volumeArray, &channelDesc, volumeSize) ); 
cudaMemcpy3DParms copyParams = {0};
copyParams.srcPtr = make_cudaPitchedPtr((void*)d_volumeMem, SIZE_X*sizeof(VolumeType), SIZE_X, SIZE_Y); //
copyParams.dstArray = d_volumeArray;
copyParams.extent = volumeSize;
copyParams.kin = cudaMemcpyDeviceToDevice;
cutilSafeCall( cudaMemcpy3D(&copyParams) ); 
```

实际上，我的程序运行良好。但我不确定结果是否正确。这是我的问题，在 CUDA liberay 中，它说 make_cudaExtent 的第一个参数是“字节宽度”，另外两个是元素的高度和深度。所以我认为在我上面的代码中，第五行应该是

```
cudaExtent volumeSize = make_cudaExtent(SIZE_X*sizeof(VolumeType), SIZE_Y, SIZE_Z); 
```

但是这样一来，cutilSafeCall(cudaMemcpy3D(©Params));中就会出现错误“invalid argument”。为什么？

另一个难题是 strcut cudaExtent，正如 CUDA 库所述，它的组件宽度代表“引用数组内存时的元素宽度，引用线性内存时的字节数”。所以我认为在我的代码中，当我引用 volumeSize.width 时，它应该是元素中的数字。但是，如果我使用

```
 cudaExtent volumeSize = make_cudaExtent(SIZE_X*sizeof(VolumeType), SIZE_Y, SIZE_Z); 
```

volumeSize.width 将为 SIZE_X*sizeof(VolumeType)(128*4)，即字节数而不是元素数。

在许多 CUDA SDK 中，他们使用 char 作为 VolumeType，所以他们只是使用 SIZE_X 作为 make_cudaExtent 中的第一个参数。但是我的是浮动的，所以，如果我需要使用它来创建 3D 数组，任何人都可以告诉我创建 cudaExtent 的正确方法是什么？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-19T08:30:12.763

让我们回顾一下文档的内容`cudaMemcpy3D`：

> 范围字段定义元素中传输区域的尺寸。如果 CUDA 数组参与复制，则根据该数组的元素定义范围。如果没有 CUDA 数组参与复制，则范围在 unsigned char 的元素中定义。

以及类似的`cudaMalloc3DArray`注释文档：

> 所有值都在元素中指定

因此，您需要为两个调用形成的范围需要在元素中具有第一个维度（因为其中一个分配`cudaMemcpy3D`是一个数组）。

但是您的代码中可能存在不同的问题，因为您正在`d_volumeMem`使用`cudaMalloc`. `cudaMemcpy3D`预计线性源内存已分配有兼容的间距。您的代码只是使用大小的线性分配

```
SIZE_X*SIZE_Y*SIZE_Z*sizeof(float) 
```

现在，您选择的尺寸可能会为您正在使用的硬件产生兼容的间距，但不能保证它会这样做。我也建议使用`cudaMalloc3D`分配线性源内存。围绕您的小代码片段构建的扩展演示可能如下所示：

```
#include <cstdio>

typedef float  VolumeType;

const size_t SIZE_X = 8;
const size_t SIZE_Y = 8;
const size_t SIZE_Z = 8;
const size_t width = sizeof(VolumeType) * SIZE_X;

texture<VolumeType, cudaTextureType3D, cudaReadModeElementType> tex; 

__global__ void testKernel(VolumeType * output, int dimx, int dimy, int dimz)
{
    int tidx = threadIdx.x + blockIdx.x * blockDim.x;
    int tidy = threadIdx.y + blockIdx.y * blockDim.y;
    int tidz = threadIdx.z + blockIdx.z * blockDim.z;

    float x = float(tidx)+0.5f;
    float y = float(tidy)+0.5f;
    float z = float(tidz)+0.5f;

    size_t oidx = tidx + tidy*dimx + tidz*dimx*dimy;
    output[oidx] = tex3D(tex, x, y, z);
}

inline void gpuAssert(cudaError_t code, char *file, int line, bool abort=true)
{
   if (code != cudaSuccess) 
   {
      fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
      if (abort) exit(code);
   }
}

#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }

template<typename T>
void init(char * devPtr, size_t pitch, int width, int height, int depth)
{
    size_t slicePitch = pitch * height;
    int v = 0;
    for (int z = 0; z < depth; ++z) {
        char * slice = devPtr + z * slicePitch;
        for (int y = 0; y < height; ++y) {
            T * row = (T *)(slice + y * pitch);
            for (int x = 0; x < width; ++x) {
                row[x] = T(v++);
            }
        }
    }
}

int main(void)
{
    VolumeType *h_volumeMem, *d_output, *h_output;

    cudaExtent volumeSizeBytes = make_cudaExtent(width, SIZE_Y, SIZE_Z);
    cudaPitchedPtr d_volumeMem; 
    gpuErrchk(cudaMalloc3D(&d_volumeMem, volumeSizeBytes));

    size_t size = d_volumeMem.pitch * SIZE_Y * SIZE_Z;
    h_volumeMem = (VolumeType *)malloc(size);
    init<VolumeType>((char *)h_volumeMem, d_volumeMem.pitch, SIZE_X, SIZE_Y, SIZE_Z);
    gpuErrchk(cudaMemcpy(d_volumeMem.ptr, h_volumeMem, size, cudaMemcpyHostToDevice));

    cudaArray * d_volumeArray;
    cudaChannelFormatDesc channelDesc = cudaCreateChannelDesc<VolumeType>();
    cudaExtent volumeSize = make_cudaExtent(SIZE_X, SIZE_Y, SIZE_Z);
    gpuErrchk( cudaMalloc3DArray(&d_volumeArray, &channelDesc, volumeSize) ); 

    cudaMemcpy3DParms copyParams = {0};
    copyParams.srcPtr = d_volumeMem;
    copyParams.dstArray = d_volumeArray;
    copyParams.extent = volumeSize;
    copyParams.kind = cudaMemcpyDeviceToDevice;
    gpuErrchk( cudaMemcpy3D(&copyParams) ); 

    tex.normalized = false;                      
    tex.filterMode = cudaFilterModeLinear;      
    tex.addressMode[0] = cudaAddressModeWrap;   
    tex.addressMode[1] = cudaAddressModeWrap;
    tex.addressMode[2] = cudaAddressModeWrap;
    gpuErrchk(cudaBindTextureToArray(tex, d_volumeArray, channelDesc));

    size_t osize = 64 * sizeof(VolumeType);
    gpuErrchk(cudaMalloc((void**)&d_output, osize));

    testKernel<<<1,dim3(4,4,4)>>>(d_output,4,4,4);
    gpuErrchk(cudaPeekAtLastError());

    h_output = (VolumeType *)malloc(osize);
    gpuErrchk(cudaMemcpy(h_output, d_output, osize, cudaMemcpyDeviceToHost));

    for(int i=0; i<64; i++)
        fprintf(stdout, "%d %f\n", i, h_output[i]);

    return 0;
} 
```

您可以自己确认纹理读取的输出与主机上的原始源内存匹配。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2019-02-20T17:27:00.003

您的代码是正确的，因为涉及 cudaArray。给数组的 channelDesc 保存有关浮动大小（4 字节）的信息。您的范围规格。使用“* sizeof(VolumeType)”将在两个内存指针之间正确复制（使用 srcPtr、dstPtr）。srcPos 和 dstPos 也必须以字节为单位，即第一个参数“* sizeof(VolumeType)”。

取决于 GPU/驱动程序，3d 操作可能仍会出现音高问题。我见过这个，但很少见（2^n 维应该没问题）。您也可以在一个 for 循环中使用 cudaMemCpy2DToArray 将其分解，因为它应该更能容忍音调。没有 cudaMalloc2D，因此任何始终正确的 2d 操作音高都由 SDK 发出。

# jquery - 在 IE (jquery) 中向选择添加新元素并不总是有效

> ID：10611454
> 
> 赞同：0
> 
> 时间：2012-05-16T03:00:24.710
> 
> 标签：jquery, internet-explorer, dom

我有一个奇怪的问题。在 IE 下有时下面的代码不起作用。

它应该调用一个 url 来获取一个 json 元素。它在 Chrome 下一直有效，但在 IE 中有时我必须重新加载页面。

```
jQuery('#' + returnElementId).children().remove().end();
               for(i=0;i<response.data.length;i++) {
                   jQuery('#' + returnElementId).append(jQuery("<option/>", {
                      value: response.data[i].id,
                      text: response.data[i].name
                  }));
               } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T13:03:23.617

```
 $('#' + returnElementId).html('');

    $.each(response.data, function (i, entity) {
        $('#' + returnElementId).append($("<option />", { 'value': entity.id, 'text': entity.name }));
    }); 
```

对于现场演示，请参阅此链接：http: [//jsfiddle.net/nanoquantumtech/UFCF4/](http://jsfiddle.net/nanoquantumtech/UFCF4/)

# encoding - 什么是字符编码，我为什么要打扰它

> ID：10611455
> 
> 赞同：41
> 
> 时间：2012-05-16T03:00:28.453
> 
> 标签：encoding, character-encoding

我对*字符编码*的概念很困惑。

什么是Unicode、GBK等？编程语言如何使用它们？

我需要费心去了解他们吗？有没有一种更简单或更快的编程方式，而不必麻烦自己？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-16T03:21:13.267

（请注意，我松散地/通俗地使用其中一些术语来进行更简单的解释，但仍能抓住关键点。）

一个字节只能有 256 个不同的值，即 8 位。

由于字符集中有超过 256 个字符的字符集，因此一般不能简单地说每个字符都是一个字节。

因此，必须有描述如何将字符集中的每个字符转换为字节序列的映射。一些字符可能映射到单个字节，但其他字符必须映射到多个字节。

这些映射是编码，因为它们告诉您如何将字符编码为字节序列。

至于 Unicode，在非常高的层次上，Unicode 试图为每个字符分配一个唯一的数字。显然，这个数字必须比一个字节宽，因为有超过 256 个字符 :) Java 使用 Unicode 版本，其中每个字符都分配一个 16 位值（这就是为什么 Java 字符是 16 位宽并且具有整数值从 0 到 65535）。当您获得 Java 字符的字节表示时，您必须告诉 JVM 您要使用的编码，以便它知道如何选择字符的字节序列。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2015-08-01T10:47:43.910

# ASCII 是基础

最初 1 个字符始终存储为 1 个字节。一个字节（8 位）有可能区分 256 个可能的值。但实际上**只使用了前 7 位**。所以只定义了 128 个字符。该集称为**ASCII 字符集**。

*   `0x00`-`0x1F`包含转向代码（例如 CR、LF、STX、ETX、EOT、BEL、...）
*   `0x20`-`0x40`包含数字和标点符号
*   `0x41`-`0x7F`主要包含字母字符
*   `0x80`-`0xFF`第 8 位 = 未定义。

法语、德语和许多其他语言需要额外的字符。（例如`à, é, ç, ô, ...`）在 ASCII 字符集中不可用。所以他们用第 8 位来定义他们的字符。这就是所谓的“**扩展 ASCII** ”。

问题是额外的 1 位没有足够的容量来覆盖世界上所有的语言。所以每个地区都有自己的 ASCII 变体。有许多扩展的 ASCII 编码（`latin-1`非常流行）。

热门问题：***“ASCII 是字符集还是编码”***？`ASCII`是一个字符集。但是，在编程`charset`中`encoding`被广泛用作同义词。如果我想引用只包含 ASCII 字符的编码（第 8 位始终为 0）：那就是`US-ASCII`.

# Unicode 更进一步

**[Unicode](https://nl.wikipedia.org/wiki/Unicode)是字符集的一个很好的例子——而不是编码**。它使用与 ASCII 标准相同的字符，但它使用附加字符扩展列表，这为每个字符提供了 format 的代码点`u+xxxx`。它的野心是包含全世界使用的所有字符（和流行图标）。

**UTF-8、UTF-16 和 UTF-32 是应用 Unicode 字符表的编码。**但是他们每个人在如何编码方面都有略微不同的方式。UTF-8 在编码 ASCII 字符时仅使用 1 个字节，提供与任何其他 ASCII 编码相同的输出。但对于其他字符，它将使用第一位来指示将跟随第二个字节。

**[GBK](https://en.wikipedia.org/wiki/GBK)是一种编码，就像 UTF-8 一样使用多个字节。**原理差不多。第一个字节遵循 ASCII 标准，因此只使用了 7 位。但就像 UTF-8 一样，第 8 位可用于指示存在第 2 个字节，然后用它来编码 22,000 个汉字中的一个。主要区别在于，**它不遵循 Unicode 字符集**，相反它使用了一些中文字符集。

# 解码数据

当您对数据进行编码时，您使用一种编码，但是当您对数据进行解码时，您需要知道使用了哪种编码，并使用相同的编码对其进行解码。

**不幸的是，编码并不总是被声明或指定。**如果所有文件都包含一个前缀来指示它们的数据存储在什么编码中，那将是理想的。但在许多情况下，应用程序仍然只需要假设或猜测它们应该使用什么编码。（例如，它们使用操作系统的标准编码）。

**对此仍然缺乏认识，因为许多开发人员甚至不知道编码是什么。**

# 哑剧类型

Mime 类型有时会与编码混淆。它们是接收器识别正在到达的数据类型的有用方法。这是一个示例，说明 HTTP 协议如何使用 mime 类型声明定义其内容类型。

```
Content-Type: text/html; charset=utf-8 
```

这是另一个造成混乱的重要来源。mime 类型描述了消息包含**的数据**`text/xml`类型（例如, `image/png`, ...）。在某些情况下，它还会另外描述数据是**如何**编码的（即`charset=utf-8`）。2个困惑点：

1.  并非所有 mime 类型都声明编码。在某些情况下，它只是可选的，有时甚至完全没有意义。
2.  语法`charset=utf-8`增加了语义混淆，因为如前所述，UTF-8 是一种编码而不是字符集。但如前所述，有些人只是互换使用这两个词。

例如，在这种情况下，`text/xml`声明编码是没有意义的（并且`charset`参数将被简单地忽略）。相反，**XML 解析器通常会读取文件的第一行，寻找`<?xml encoding=...`标记。**如果它在那里，那么他们将使用该编码重新打开文件。

[发送电子邮件时](https://stackoverflow.com/questions/15044027/utf-8-charset-doesnt-work-with-javax-mail/27404861#27404861)也存在同样的问题。电子邮件可以包含 html 消息或仅包含纯文本。同样在这种情况下，mime 类型用于定义内容的类型。

但总而言之，mime 类型并不总是足以解决问题。

# 编程语言中的数据类型

对于 Java（和许多其他编程语言），除了编码的危险之外，将字节和整数转换为字符也很复杂，因为它们的内容存储在不同的范围内。

*   一个字节被存储为一个有符号字节（范围：`-128`到`127`）。
*   java中的`char`类型存储在2个无符号字节中（范围`0`：-）`65535`
*   流返回范围`-1`为的整数`255`。

如果您知道您的数据仅包含 ASCII 值。然后通过适当的技能，您可以将数据从字节解析为字符或立即将它们包装在字符串中。

```
// the -1 indicates that there is no data
int input = stream.read();
if (input == -1) throw new EOFException();

// bytes must be made positive first.
byte myByte = (byte) input;
int unsignedInteger = myByte & 0xFF;
char ascii = (char)(unsignedInteger); 
```

# 捷径

**Java 中的捷径是使用读取器和写入器，并在实例化它们时指定编码。**

```
// wrap your stream in a reader. 
// specify the encoding
// The reader will decode the data for you
Reader reader = new InputStreamReader(inputStream, StandardCharsets.UTF_8); 
```

正如前面对 XML 文件所解释的，这并不重要，因为任何体面的 DOM 或 JAXB 编组器都会检查编码属性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-16T03:31:12.103

字符编码是您用来解决为使用与您不同语言的人编写软件的问题的方法。

您不知道字符是什么以及它们是如何排序的。因此，您不知道这种新语言中的字符串在二进制中会是什么样子，坦率地说，您不在乎。

你所拥有的是将字符串从你说的语言翻译成他们说的语言（比如翻译）的方法。您现在需要一个能够以二进制形式表示两种语言而不会发生冲突的系统。编码就是那个系统。

它允许您编写无论语言以二进制表示的方式如何都可以工作的软件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-02T10:01:01.107

大多数计算机程序必须使用自然语言（人类使用的语言）的某些文本与人交流。但是计算机没有表示文本的基本方法：基本的计算机表示是由字节和字组成的位序列，硬件支持将位序列解释为固定宽度的 base-2（二进制）整数和浮点实数。因此，计算机程序必须具有将文本表示为位序列的方案。这基本上就是字符编码。字符编码没有本质上明显或正确的方案，因此存在许多可能的字符编码。

然而，实际的字符编码有一些共同的特点。

1.  编码文本被分成一系列*字符*（字素）。

2.  每个已知的可能字符都有一个编码。文本的编码由文本字符的编码顺序组成。

3.  每个可能的（允许的）字符都分配有一个唯一的无符号（非负）整数（有时称为*代码点*）。因此，文本被编码为无符号整数序列。不同的字符编码在它们允许的字符以及它们如何分配这些唯一整数方面有所不同。大多数字符编码不允许使用已经存在和已经存在的许多人类书写系统（脚本）使用的所有字符。因此，字符编码在它们可以表示的文本方面完全不同。即使是可以表示相同文本的字符编码也可以用不同的方式表示它，因为它们的代码点分配不同。

4.  编码字符的无符号整数被编码为位序列。字符编码的不同之处在于它们用于此编码的位数。当这些位被分组为字节时（如流行编码的情况），字符编码的字节序可能不同。字符编码的不同之处在于它们是固定宽度（每个编码字符的位数相同）还是可变宽度（对某些字符使用更多位）。

因此，如果计算机程序接收到旨在表示某些文本的字节序列，则计算机程序**必须**知道用于该文本的字符编码，如果它要对该文本进行任何类型的操作（除了将其视为一个不透明的值并原封不动地转发它）。唯一的可能性是文本伴随有指示使用的编码的附加数据*或*程序要求（假设）文本具有特定编码。

类似地，如果计算机程序必须将文本发送（输出）到另一个程序或显示设备，它必须要么告诉目的地使用的字符编码，*要么*程序必须使用目的地期望的编码。

在实践中，**几乎所有字符编码问题**都是在目的地期望使用一种字符编码发送的文本而实际使用不同的字符编码发送时引起的。这通常是由计算机程序员*造成*的关于输出。

# ruby-on-rails - 重置密码验证错误：密码太短错误，即使密码在范围内

> ID：10611457
> 
> 赞同：1
> 
> 时间：2012-05-16T03:00:51.303
> 
> 标签：ruby-on-rails, ruby-on-rails-3

最近，我将密码验证代码更改为以下代码，以便创建不需要密码和密码确认的表单[如何在 Rails 中使用 form_for 仅更改模型中的一个属性](https://stackoverflow.com/questions/10566865/how-to-only-change-one-attribute-in-a-model-using-form-for-in-rails)。

请注意，我没有使用 has_secure_password 来生成我的加密密码。我在 RailsTutorial 中使用了每个 Hartl 的 SHA2.hexdigest。

用户.rb

```
before_save :encrypt_password, :unless => Proc.new { |u| u.password.blank? }
validates_presence_of :password, :if => :should_validate_password?
validates_confirmation_of :password, :if => :should_validate_password?
validates_length_of :password, :minimum => 6, :maximum => 40, :allow_blank => true
#changing :allow_blank from false to true above fixed my problem.

def should_validate_password?
  updating_password || new_record?
end 
```

我在记住我/重置密码[http://railscasts.com/episodes/274-remember-me-reset-password](http://railscasts.com/episodes/274-remember-me-reset-password)上关注了这个 Railscast ，但我一直收到这个错误：

**`ActiveRecord::RecordInvalid in PasswordResetsController#create`**

**`Validation failed: Password is too short (minimum is 6 characters)`**

当我尝试为现有用户生成 auth_tokens 以及尝试提交我的电子邮件以获取重置链接时，就会发生这种情况。我可以通过注释掉这段代码来暂时删除这个验证，一切正常。

我尝试重新登录用户帐户以更改密码，使其在范围内（9 个字符长），但我仍然收到相同长度的验证错误消息。

有小费吗？

我不知道问题出在哪里。我不明白为什么要验证我的密码。

这是我在密码重置控制器中的创建操作：

```
def create
  user = User.find_by_email(params[:email])
  user.send_password_reset if user
  redirect_to root_path, :notice => "Email sent with password reset"
end 
```

这是我的密码重置表格：

```
<%= form_tag password_resets_path, :method => :post do %>
  <div class="field">
    <%= label_tag :email %>
    <%= text_field_tag :email, params[:email] %>
  </div>
  <div class="actions"><%= submit_tag "Reset Password" %></div>
<% end %> 
```

让我知道你们是否需要任何其他文件。

编辑：使用工作解决方案对代码进行了更改。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-04T15:07:32.503

你不需要：should_validate_password？

我刚刚添加了一个 Proc，如下所示：

```
validates :password, length: { minimum: 6 }, unless: Proc.new { |user| user.password.nil? }
validates :password_confirmation, presence: true, unless: Proc.new { |user| user.password.nil? } 
```

或者你可以使用这个分组`with_options`

请参阅： http: [//guides.rubyonrails.org/v3.2.13/active_record_validations_callbacks.html](http://guides.rubyonrails.org/v3.2.13/active_record_validations_callbacks.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T09:04:17.460

出现错误是因为您验证了 password_confirmation。这意味着它也将期望一个范围内的值。

您可以通过执行以下操作来解决此问题：

```
validates :password,  length:     { minimum: 8, allow_nil: true },
                      confirmation: true 
```

# c++ - 什么时候应该将物体置于物理学的“静止”状态？

> ID：10611458
> 
> 赞同：2
> 
> 时间：2012-05-16T03:00:52.120
> 
> 标签：c++, algorithm, physics, game-physics

什么时候应该将物体置于物理学的“静止”状态？

我过去读过，对于物理学，在某个值（例如速度）达到一个非常小的范围后，该对象应该处于“静止”状态。这应该怎么做，什么时候做？或者，这只是一种糟糕的技术？

从我前段时间的阅读中回忆起，当确定会发生碰撞并且碰撞时间是一个非常小的值（例如 0.00001f）时，存在一种潜在的情况。但是，这似乎可能会出现误报，这是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:26:31.063

这是一个相当模糊的术语，它完全取决于您的物理模拟的要求。也就是说，如果您*知道它不会受到伤害，*那么让对象“休息”可能是一种非常有效的优化。

许多物理引擎都有所谓的“冻结”状态，这仅仅意味着它们不会处理冻结的物体，直到某些条件发生（或根本不发生）。“静止”也可能意味着动态物体（速度接近零）被视为静态物体，这通常更快，因为不需要更新空间数据结构。

> > 这应该怎么做，什么时候做？

在实现这一点时，您几乎肯定需要做一些实验来调整参数，不要指望它会立即起作用。

“如何”是一个没有更多细节无法回答的问题（即哪个物理引擎、框架、自己的开发......？）。

# iphone - Core Graphics 文本比 Core Text 快得多 - 我觉得我错过了一些东西

> ID：10611459
> 
> 赞同：5
> 
> 时间：2012-05-16T03:01:11.303
> 
> 标签：iphone, objective-c, ios, core-graphics, core-text

这是我用来在核心图形中显示一些文本的代码：

```
int y = MESSAGE_FRAME.origin.y + 8;

if (month) y = y + 27;
int height = [JHomeViewCellContentView heightOfMessage:self.entry.message];

CGRect rect = CGRectMake(MESSAGE_FRAME.origin.x + 8, y, MESSAGE_FRAME.size.width - 16, height);

UIFont *font = [UIFont fontWithName:@"Crimson" size:15.0f];

[[UIColor colorWithWhite:0.2 alpha:1.0] setFill];

[self.entry.message drawInRect:rect withFont:font lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentLeft]; 
```

如果我想在核心文本中显示相同的文本，这里是代码：

```
CGRect rect2 = CGRectMake(MESSAGE_FRAME.origin.x + 8, self.bounds.size.height - y - height + 2, MESSAGE_FRAME.size.width - 16, height);

    UIFont *font = [UIFont fontWithName:@"Crimson" size:15.0f];
    CGFloat lineHeight = [font lineHeight];

    CTFontRef fontRef = CTFontCreateWithName((CFStringRef)@"Crimson", 15.0f, NULL);

    CGFloat lineSpacing = 0;

    CTParagraphStyleSetting settings[] = {
        { kCTParagraphStyleSpecifierMinimumLineHeight, sizeof(lineHeight), &lineHeight },
        { kCTParagraphStyleSpecifierMaximumLineSpacing, sizeof(lineSpacing), &lineSpacing },

    };

    CTParagraphStyleRef paragraphStyle = CTParagraphStyleCreate(settings, sizeof(settings) / sizeof(settings[0]));

    NSMutableDictionary *attDictionary = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                   (__bridge_transfer id)fontRef, (NSString *)kCTFontAttributeName,
                                          (id)[[UIColor colorWithWhite:0.2 alpha:1.0] CGColor], (NSString *)kCTForegroundColorAttributeName,
                                          paragraphStyle, kCTParagraphStyleAttributeName,
                                          nil];

     NSAttributedString *attString = [[NSAttributedString alloc] initWithString:self.entry.message attributes:attDictionary];

    //Flip the coordinate system
    CGContextSetTextMatrix(context, CGAffineTransformIdentity);
    CGContextTranslateCTM(context, 0, self.bounds.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);

    CGMutablePathRef path = CGPathCreateMutable();
    CGPathAddRect(path, NULL, rect2);

    self.framesetter = CTFramesetterCreateWithAttributedString((__bridge_retained CFAttributedStringRef)attString);
    CTFrameRef theFrame = CTFramesetterCreateFrame(self.framesetter, CFRangeMake(0, [attString length]), path, NULL);

    CFRelease(path);

    CTFrameDraw(theFrame, context);
    CFRelease(theFrame); 
```

显然，尽管更加冗长，核心文本意味着比核心图形更快，这就是我学会如何做到这一点的原因。但是在仪器中运行这段代码，核心图形实现了 5 毫秒，而核心文本在 14 毫秒内完成。我觉得我在这里错过了一些东西。drawInRect 几乎快了 3 倍，我听说它应该更慢。我已经尽我所知改进了底部的代码，但我不是专家，我会很感激任何帮助。

为了澄清，我正在将一段文本绘制到视图上。这就是我想做的。并且所有文本都具有相同的外观。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:37:43.097

我不使用 CT 的东西，但在我看来，你在每次绘制时都设置了不变的字体和其他属性。尝试将所有内容分解为注释“翻转坐标系，并缓存 attString。

这应该会提高速度，以便进行更好的面对面测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-26T02:29:43.940

NSMutableAttributedString 确实允许您通过 replaceCharactersInRange:withString 更改字符串：

设置属性字典后，可以通过以下方式限制对属性字符串的进一步字符串更新： [myAttString replaceCharactersInRange:NSMakeRange(0, myAttString.text.length) withString:newString]

并绘制脏矩形。此外，我发现 CGContextSetTextMatrix 在使用 CTFrameDraw 时几乎没有意义。

另一个快速说明，我在 CTFontRef 和 CTParagraphStyleRef 上没有看到任何版本。它们也遵循“创建规则”并且需要 CFRelease()'d。

我最近一直在努力通过自己的核心文本学习曲线，似乎已经取得了一些有希望的结果。我希望你自己的优化能给你同样的希望。

# python - Lambda 函数和变量范围

> ID：10611461
> 
> 赞同：4
> 
> 时间：2012-05-16T03:01:31.917
> 
> 标签：python, lambda, pyqt, pyqt4, scope

目前，我的代码是这样的：

```
for control in self.controls():
  self.connect(control, SIGNAL('clicked()'), lambda: self.button(control.objectName())) 
```

当我运行我的代码时，我的`lambda`函数将`control`成为我的元素列表中的*最后一个*元素，这不是我期望发生的。

奇怪的是，当我手动运行`lambda`每个循环时，它对每个循环都运行良好，但最终仍然存在与以前相同的问题：

```
for control in self.controls():
  func = lambda: self.button(control.objectName())
  func() # Prints the correct output

  self.connect(control, SIGNAL('clicked()'), func) # When triggered, still breaks 
```

我的`self.button()`功能被简单定义：

```
def button(self, name):
    print name 
```

我通过打印and的输出检查了`control`and`func`每个循环的唯一性，它们都返回了唯一的数字。除此之外，是正确的对象名称。`id(control)``id(func)``control.objectName()`

我有一种感觉，这是一个变量范围的问题，因为我通常不会`lambda`在我的代码中经常使用 s。有没有人看到任何明显的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:04:25.773

[啪啪声。](http://code.activestate.com/recipes/502271/)

```
for control in self.controls():
  self.connect(control, SIGNAL('clicked()'), lambda control=control:
    self.button(control.objectName())) 
```

# c++ - 带有 MSVC 的可变参数模板

> ID：10611463
> 
> 赞同：0
> 
> 时间：2012-05-16T03:01:57.250
> 
> 标签：c++, visual-c++

今天我遇到了一个可怕的问题。我一直在研究一个使用可变参数模板的类的整个框架。事实证明，我正在使用的那个人使用 Visual Studio，它还不支持可变参数模板。

我尝试通过使用宏无缝地移植该功能，但经过长时间的工作，它看起来似乎是不可能的。问题是模板的参数数量可能从零变化到四个（或可变参数模板的无穷大）。

即使我的宏是制作的，并以这样的方式使用：

```
template<>
Signal<void ()>
{
// My class
}; 
```

或者

```
template<typename param1>
Signal<void (param1)>
{
// My class
}; 
```

但问题是它看起来不适用于 gcc（所以我假设它也不适用于 vc）。

标头没有显示任何错误，但是如果我尝试像这样实例化类：

```
Signal<> mySignal; 
```

我收到这些错误：

```
error: wrong number of template arguments (0, should be 1) 
```

由于我没有找到有关该主题的信息，因此我至少想知道我正在尝试的方法是否可行？或者如果我真的要再次编写数百行代码，因为微软认为可变参数模板不够重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:20:43.173

您不能有没有参数的模板，解决问题的常用方法是使用`void`或任何其他占位符。请注意，由于您正在模拟一个类似函数的对象，您可以通过使用作为函数签名的单一类型来简化它：

```
Signal< void() > 
```

这样，总是有一个模板参数，您只需要为签名具有 0 到 4 个参数的情况提供该模板的特化：

```
template <typename S>
struct Signal;

template <typename arg1>
struct Signal<void (arg1)> { ... };
template <typename arg1, typename arg2>
struct Signal<void (arg1,arg2)> { ... }; 
```

如果您正在构建信号/处理程序或事件库，我建议您查看现有实现。例如，考虑使用或至少查看 boost signals/signals2 库中的代码。

* * *

> 标头没有显示任何错误，但是如果我尝试像这样实例化类：

```
Signal<> mySignal; 
```

问题是您的模板采用单个参数，即函数签名，但您没有提供任何参数。在实例化时，您*需要*提供模板参数。您可能的意思是：

```
Signal<void ()> mySignal; 
```

# css - 我必须总是为每个浏览器声明不同的 webkit 样式吗？

> ID：10611465
> 
> 赞同：1
> 
> 时间：2012-05-16T03:02:01.287
> 
> 标签：css, webkit, vendor-prefix

我已经开始发现某些 css 声明的重复有点乏味。

例如，如果我想利用旋转变换并在 mozilla、chrome/safari 上执行类似来回旋转的操作，即我必须执行以下操作：

```
@-webkit-keyframes wiggle {
0% {-webkit-transform:rotate(12deg);}
50% {-webkit-transform:rotate(-6deg);}
100% {-webkit-transform:rotate(12deg);}
}

@-moz-keyframes wiggle {
0% {-moz-transform:rotate(12deg);}
50% {-moz-transform:rotate(-6deg);}
100% {-moz-transform:rotate(12deg);}
}

@-ms-keyframes wiggle {
0% {-ms-transform:rotate(12deg);}
50% {-ms-transform:rotate(-6deg);}
100% {-ms-transform:rotate(12deg);}
} 
```

然后当然我需要单独应用这些：

```
.wiggle {
 -webkit-animation: wiggle 5s infinite;
 -moz-animation:    wiggle 5s infinite;
 -ms-animation:     wiggle 5s infinite;
} 
```

在所有这些中，唯一不同的是 ms、moz 和 webkit，我觉得它们有点愚蠢。理想情况下，上面的 20 行代码可以精简到 8 行。但是每个浏览器似乎都在相互交战，因此各地的 css 编码人员都不得不受苦。

这是 CSS 和浏览器实现计划继续推进这些事情的方式吗？有没有更好更短的方法？这样做似乎不利于创造更 DRY 的编码体验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:15:00.440

如果您想利用“最前沿”的 css，那么答案可能会在很长一段时间内保持“是”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T06:49:44.173

我建议您使用像 LESS 这样的框架，它允许您在类（甚至函数）中调用类，这里是示例

```
.box-shadow(@style, @c) when (iscolor(@c)) {
  box-shadow:         @style @c;
  -webkit-box-shadow: @style @c;
  -moz-box-shadow:    @style @c;
} 
```

然后在需要单行的地方调用它

```
div { .box-shadow(0 0 5px, 30%) } 
```

如您所见，您可以使用变量，因此您只能使用一个预设，然后针对要应用阴影的特定选择器对其进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T04:28:46.087

看看[prefixmycss](http://prefixmycss.com/)，[prefixfree](http://leaverou.github.com/prefixfree/)，特别是[CSS3](http://css3please.com/)好吗？它们将帮助您节省大量编写如此长的 CSS 的时间。

# c - 关于 AT&T 汇编语法 (%esp,1)

> ID：10611468
> 
> 赞同：2
> 
> 时间：2012-05-16T03:02:14.710
> 
> 标签：c, assembly, att

当我阅读一些反汇编代码时，由于我不了解 AT&T 语法，我不知道 (%esp,1) 之类的代码是什么意思。

```
11      printf("%x", a);
0x401386        <main+182>:    movl  $0x1,0x4(%esp,1)
0x40138e        <main+190>:    movl  $0x40300d,(%esp,1)
0x401395        <main+197>:    call  0x401810 <printf> 
```

有人可以告诉它是什么意思吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:07:04.290

```
 ; Decompiled, sort of, back to C
                              ; ==============================
    movl  $0x1,0x4(%esp,1)    ; %esp[1] = 1 (the "1" really means, "add 4")
    movl  $0x40300d,(%esp,1)  ; %esp[0] = "%x"
    call  0x401810 <printf>   ; push return address and branch to printf 
```

似乎编译器知道*a*等于*1*，并且它已经向下调整了堆栈指针以为参数腾出空间。也许它结合了将空间推入堆栈和函数序言。

一般来说，寻址模式看起来像......

```
r    ; register
(r)  ; memory, register contains the address
8(r) ; memory, displacement of 8 off the register 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T03:13:18.280

这个 wikibook 似乎有一些关于 GNU 汇编器及其 AT&T 语法的信息：

[http://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax](http://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax)

我还找到了有关 Gas 的这两个文档来源，但它们似乎不是很清楚或有用：

1.  [http://webster.cs.ucr.edu/AsmTools/Gas/GasDoc/as_toc.html](http://webster.cs.ucr.edu/AsmTools/Gas/GasDoc/as_toc.html)
2.  [http://sourceware.org/binutils/docs-2.17/as/index.html](http://sourceware.org/binutils/docs-2.17/as/index.html)

# jquery - jQuery - 如何使用 load() 每分钟自动加载一次内容

> ID：10611470
> 
> 赞同：1
> 
> 时间：2012-05-16T03:02:22.723
> 
> 标签：jquery, load

我有一个脚本，它通过点击函数使用 load() 加载内容。

我想将其更改为每隔一分钟自动加载内容，就像幻灯片一样。

我有 3 个视频需要循环播放。

请有人指出我正确的方向，我不知道从哪里开始。我当前的脚本如下。

谢谢

**根据 elliot-bonneville 的回答，我已经更新了下面的代码。我仍然需要找到一种方法来循环播放这些视频。**

**JS**

```
// define var video
var video = $('div.video');
var linkOne = $('.video_1').attr('href');
var linkTwo = $('.video_2').attr('href');
var linkThree = $('.video_3').attr('href');

setInterval(function() {
// load content into video
video.load( linkTwo + ' .content' , function() {
    // remove loading text
    $('.load').remove();
});
}, 10000) // 60000 milliseconds = one minute

setInterval(function() {
// load content into video
video.load( linkThree + ' .content' , function() {
    // remove loading text
    $('.load').remove();
});
}, 10000) // 60000 milliseconds = one minute

setInterval(function() {
// load content into video
video.load( linkOne + ' .content' , function() {
    // remove loading text
    $('.load').remove();
});
}, 10000) // 60000 milliseconds = one minute 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T04:01:06.213

Use `setTimeout`

I think something like the below. I haven't tested it yet, so there might be some syntax errors. But hopefully you understand. let me know if anything doesn't make sense.

One reason I am using `setTimeout` rather `setInterval` is that this way, another timer doesn't get fired until after the load has completed. In this case, it won't matter too much as you are only doing it every 1 minute, but in some cases, the server latency might be more then the interval time. Also, this way, if for whatever reason, the script/server goes down and a successful reply isn't received then another call won't be made.

```
// define var video
var video = $('div.video');
var currentVid=1;
var maxVid=3;

setTimeout(cycleVideo, 10000) // 60000 milliseconds = one minute

function cycleVideo() {
    // load content into video
    var link = $('.video_'+currentVid).attr('href');
    video.load( link + ' .content' , function() {
        // remove loading text
        $('.load').remove();
        if(currentVid==maxVid) currentVid=1; else currentVid++;
        setTimeout(cycleVideo, , 10000) // 60000 milliseconds = one minute

    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T03:05:48.343

使用`setInterval`，像这样：

```
setInterval(function() {
    var link = $('#yourAElementId').attr('href');

    // load content into video
    video.load( link + ' .content' , function() {
        // remove loading text
        $('.load').remove();
    });
}, 60000); // 60000 milliseconds = one minute 
```

# c++ - 我收到错误“链接：错误 LNK2001：无法解析的外部符号 _WinMainCRTStartup”

> ID：10611472
> 
> 赞同：5
> 
> 时间：2012-05-16T03:02:52.823
> 
> 标签：c++, windows, visual-studio, winapi, linker-errors

请帮忙。在 Visual Studio 2008 上，我收到以下错误。

```
============================================================

   1>Microsoft (R) Windows Resource To Object Converter Version 9.00.30729.01
   1>Copyright (C) Microsoft Corporation.  All rights reserved.
   1>adding resource. type:ICON, name:1, language:0x0409, flags:0x1010, size:744
   1>adding resource. type:ICON, name:2, language:0x0409, flags:0x1010, size:296
   1>adding resource. type:GROUP_ICON, name:128, language:0x0409, flags:0x1030, size:34
   1>adding resource. type:DIALOG, name:100, language:0x0409, flags:0x1030, size:374
   1>adding resource. type:DIALOG, name:102, language:0x0409, flags:0x1030, size:784
   1>adding resource. type:VERSION, name:1, language:0x0409, flags:0x30, size:928
   1>adding resource. type:STRING, name:7, language:0x0409, flags:0x1030, size:68

   1>LINK : error LNK2001: unresolved external symbol _WinMainCRTStartup

   1>.\Release/DiskTest.exe : fatal error LNK1120: 1 unresolved externals

   1>Build log was saved at "file://c:\WinIRDir\Utilities\DiskTest\Release\BuildLog.htm"
   1>DiskTest - 2 error(s), 0 warning(s)
   1>Build log was saved at "file://c:\WinIRDir\Utilities\CommApp\Release\BuildLog.htm"
============================================================== 
```

这是情况。- DiskTest.exe 是我的解决方案中的 3 个项目之一 - 该项目非常适合 Debug x64、Release x64 和 Debug Win32。发行版 Win32 是唯一产生这些错误的版本。- 我花了几个小时比较所有 4 种配置/机器组合的属性页面，并且确信从一个版本到下一个版本都没有丢失任何属性。我特别注意了“附加依赖项”、“附加库目录”、“输入”等。当然，.lib 文件的路径指向 \Debug 或 \Release，以及各自配置或平台的 \x86 或 \x64 .

该项目唯一的“附加依赖项”是用于调试的 SBF_Util.lib 和 SBF_Utild.lib。我确保该库的所有 4 个版本（调试 win32 和 x64，以及发布 win32 和 x64）都存在于每个“附加库目录”中指定的文件夹中我还检查了每个版本的库的 dumpbin 以确保平台匹配.

我见过缺少主入口点的其他情况，但在这种情况下，所有其他版本都没有问题，只有在 Win32 Relase 版本上会产生此错误，所以我认为我不需要更改任何内容编码。

任何人都可以提供任何线索吗？，我没有想法。任何想法将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T21:35:15.193

难以置信的！！！

我发现了问题！导致这个严重错误的原因非常简单：“空间”

事实证明，在 Configuration->C/C++->OutputFiles->Object File Name 下：我有：“$(IntDir)\”

直到我非常仔细地注意 Kdiff3 窗口才注意到空格，并注意到这个小下划线表示空格。
这个空间已经存在了几个月，因为这个项目一直无人看管（在我加入之前），因为没有人能找到它的修复方法，所以他们就停止使用它。很可能是复制粘贴错误。

谢谢大家的想法。特别是 Xearinox 的第一个答案让我考虑比较所有模式。我会尝试找一些时间来编写一个工具来将项目/解决方案文件解析为一个 4 列的表格，其中列出了所有配置和平台的所有属性，以便我们可以轻松地比较它们。再次感谢大家。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T04:05:06.133

Open up your project's settings page, go to **Linker** → **System** and examine the **SubSystem** property. Make sure it's set to the same value in all project configurations by switching the configuration from the configuration drop-down box.

Assuming that your intended entry point is `main` (or one of its variants such as `_tmain` or `wmain`), you want to make sure to use the SubSystem property is set to **CONSOLE**.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T17:24:35.517

缺少作为入口点的 WinMain。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-13T15:27:30.160

就我而言，我试图编译的文件具有错误的属性。

我在文件扩展名中创建了带有杂散字符的文件，因此我的项目给了它错误的 Item Type: `Does not participate in build`。

重命名后，我进入它的属性，并将项目类型更改为`<reset to default>`，将其重置为`C/C++ Compiler`。

# ios - 下一个 ios sdk 版本可能没有完整的（/任何）谷歌地图实现。现在使用谷歌地图逻辑是 ios 开发的明智选择吗？

> ID：10611482
> 
> 赞同：2
> 
> 时间：2012-05-16T03:03:42.947
> 
> 标签：ios, google-maps

以防万一 Apple 自己实现了 techcrunch 在此处报告的某种形式的 Map Logic：http: [//techcrunch.com/2012/05/11/come-ios-6-apple-will-reportedly-kiss-google-地图-再见/](http://techcrunch.com/2012/05/11/come-ios-6-apple-will-reportedly-kiss-google-maps-goodbye/)

在 ios 中实现任何依赖于 Google Maps 的逻辑是否明智？特别是当您仍处于可以选择的开发阶段时？

我只需要在不涉及 sim 卡的情况下知道用户所在的国家/地区（应该在 iPod 上运行），所以除了使用谷歌的反向地理编码以防万一，我还有更安全的选择吗？

# wpf - wpf中的HeaderedContentControl有什么用？

> ID：10611491
> 
> 赞同：13
> 
> 时间：2012-05-16T03:04:41.887
> 
> 标签：wpf, xaml

我正在开发 WPF，但 UI 已针对古吉拉特语进行了本地化。在我的 window.xaml 中，我有 2 行和 2 列。

我无法使用 HeaderedContentControl 标记。代码在这里：

```
<Border
            Grid.Row="1" Grid.Column="1"
            Style="{StaticResource MainBorderStyle}"
            Padding="0"
            BorderThickness="0,0,0,1"
            Background="#f9f9f9">
            <HeaderedContentControl
                VerticalContentAlignment="Stretch"
                Content="{Binding Path=CurrentWorkspace}"
                Style="{StaticResource MainWorkspaceStyle}"
                ContentTemplate="{StaticResource WorkspaceTemplate}"/>
        </Border> 
```

请解释它并解释内容模板的作用。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-16T03:21:22.050

A`HeaderedContentControl`是一个显示其他控件的控件，但也为此提供了一个标题（如一个`GroupBox`或窗口标题）。

绑定到一组数据——在本`HeaderedContentControl`例中为“CurrentWorkspace”。

`ContentTemplate`描述了应该如何显示该数据。在这种特殊情况下，它是一种称为“WorkspaceTemplate”的东西，它将被定义为项目中某处的静态资源——要么在资源 XAML 文件中，要么在您的窗口中，在`<Window.Resources>`XAML 的顶部下方。

无论它在哪里，如果您搜索整个解决方案，`WorkspaceTemplate`您最终应该会看到它是在哪里定义的。

# c# - 如何使用 itextsharp 在不同页面上编写和拆分数据表？

> ID：10611493
> 
> 赞同：1
> 
> 时间：2012-05-16T03:04:47.167
> 
> 标签：c#, datatable, split, itextsharp

首先，这是我的代码：

```
 string pdfTemplate = Application.StartupPath + "\\Templates\\Template Medico.pdf";
                    string newFile = Application.StartupPath + "\\Relatórios\\Relatório Médico_" + dataArquivo + ".pdf";

                    PdfReader pdfReader = new PdfReader(pdfTemplate);
                    PdfStamper pdfStamper = new PdfStamper(pdfReader, new FileStream(newFile, FileMode.Create));

                    AcroFields pdfFormFields = pdfStamper.AcroFields;

                    // Form Filling
                    pdfFormFields.SetField("data", data);
                    pdfFormFields.SetField("medico_nome", campo);
                    pdfFormFields.SetField("numero_consultas", numeroConsultas);

                    // Table Building
                    int numColumns = ds.Tables[0].Columns.Count;
                    PdfPTable datatable = new PdfPTable(numColumns);
                    datatable.DefaultCell.Padding = 10;
                    datatable.WidthPercentage = 100; 
                    datatable.DefaultCell.HorizontalAlignment = Element.ALIGN_LEFT;
                    float[] columnWidths = { 80, 80, 80, 80, 80, 80, 80, 80, 80 };
                    datatable.SetWidths(columnWidths);
                    float[] totalWidth = { 80, 80, 80, 80, 80, 80, 80, 80, 80 };
                    datatable.SetTotalWidth(totalWidth);

                    // Table Header
                    for (int k = 0; k < ds.Tables[0].Columns.Count; k++)
                    {
                        Phrase collumname = new Phrase(ds.Tables[0].Columns[k].ColumnName, FontFactory.GetFont("Verdana", 9));
                        datatable.AddCell(collumname);
                    }
                    // Lines and Columns
                    if (ds.Tables[0].Rows.Count <= 9) // less than 9 rows = no problem, no new pages and table spliting needed
                    {
                        for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
                        {
                            for (int j = 0; j < ds.Tables[0].Columns.Count; j++)
                            {
                                datatable.DefaultCell.BackgroundColor = iTextSharp.text.BaseColor.WHITE;
                                datatable.DefaultCell.HorizontalAlignment = iTextSharp.text.Element.ALIGN_LEFT;
                                Phrase phrase = new Phrase(ds.Tables[0].Rows[i][j].ToString(), FontFactory.GetFont("Verdana", 9));
                                datatable.AddCell(phrase);
                            }
                        }
                        // Write down the table on page 2
                        PdfContentByte content = pdfStamper.GetUnderContent(2);
                        datatable.WriteSelectedRows(0, -1, 70.0f, 495.0f, content);
                    }
                    else
                    {
                        int newPage = 3;
                        int currentPage = 2;
                        for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
                        {
                            for (int j = 0; j < ds.Tables[0].Columns.Count; j++)
                            {
                                datatable.DefaultCell.BackgroundColor = iTextSharp.text.BaseColor.WHITE;
                                datatable.DefaultCell.HorizontalAlignment = iTextSharp.text.Element.ALIGN_LEFT;
                                Phrase phrase = new Phrase(ds.Tables[0].Rows[i][j].ToString(), FontFactory.GetFont("Verdana", 9));
                                datatable.AddCell(phrase);
                            }
                            if (i > 0 && i % 9 == 0)
                            {   //How do i print the table ONLY every 9 iterations? (9 iterations = 9 rows)
                                PdfContentByte content = pdfStamper.GetUnderContent(currentPage);
                                // Or how do i make a loop using the rowStart and rowEnd arguments of the
                                // WriteSelectedRows function in order to write only a set of 9 rows for each page?
                                datatable.WriteSelectedRows(0, -1, 70.0f, 495.0f, content);
                                pdfStamper.InsertPage(newPage, pdfReader.GetPageSize(2));
                                newPage++;
                                currentPage++;
                            }
                        }
                    } 
```

该代码对我目前遇到的主要问题进行了很好的评论，但真正更大的问题，如线程标题中所述，是通过行和列以某种方式“拆分”或“控制”循环/迭代以匹配页，跳到另一页，继续写表。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-18T04:10:07.053

伙计们，我花了 2 天时间和很多咖啡，但我做到了，这是代码：

```
 else
                {
                    int newPageNumber = 3;
                    int currentPage = 2;
                    int lastLinePrinted = 0;
                    int maxLine = 9;
                    bool lastPage = false;
                    for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
                    {
                        for (int j = 0; j < ds.Tables[0].Columns.Count; j++)
                        {
                            datatable.DefaultCell.BackgroundColor = iTextSharp.text.BaseColor.WHITE;
                            datatable.DefaultCell.HorizontalAlignment = iTextSharp.text.Element.ALIGN_LEFT;
                            Phrase phrase = new Phrase(ds.Tables[0].Rows[i][j].ToString(), FontFactory.GetFont("Verdana", 9));
                            datatable.AddCell(phrase);
                        }
                        // must decrement the ds.Tables[0].Rows.Count here, 
                        // otherwise it'll never enter the code below, we'll
                        // increment it back when we reach the last page
                        if ((i > 0 && i % 9 == 0) || i == ds.Tables[0].Rows.Count - 1)
                        {
                            PdfContentByte content = pdfStamper.GetUnderContent(currentPage);
                            datatable.WriteSelectedRows(lastLinePrinted, maxLine, 70.0f, 495.0f, content);
                            if (!lastPage)
                            {
                                pdfStamper.InsertPage(newPage, pdfReader.GetPageSize(2));
                                newPage++;
                                currentPage++;
                                lastLinePrinted = maxLine;
                                maxLine += 9;
                            }
                            if (maxLine > ds.Tables[0].Rows.Count)
                            {
                                maxLine = ds.Tables[0].Rows.Count+1;
                                lastPage = true;
                            }
                        }
                    }
                } 
```

希望它能帮助更多的人:D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T12:33:31.890

您可以通过充分使用更轻松地做到这一点`WriteSelectedRows`

```
int pageRows=0;    
while (pageRows<datatable.Rows.Count+8)
      {
         content.BeginText();
         table.WriteSelectedRows(pageRows, pageRows+9, 20, 550, cb);
         pageRows = pageRows + 9;
         content.EndText();
         document.NewPage();
       } 
```

您一次写 9 行，然后调用一个新页面。

# php - 如何递归循环这个？

> ID：10611494
> 
> 赞同：0
> 
> 时间：2012-05-16T03:04:51.767
> 
> 标签：php

我现在有

```
Array(1 => Array("aaa","bbb","ccc"))
Array(2 => Array("eee","fff","ggg","hhh")) 
```

我想做一个字符串

```
$a = "ST_Union(ST_Union('aaa','bbb'),'ccc')" 
$b = "ST_Union(ST_Union(ST_Union('eee','fff'),'ggg'),'hhh')" 
```

我怎么能在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:11:37.373

**UPD**：稍微更新了解决方案，现在更加简单易读：

[http://ideone.com/tdIXT](http://ideone.com/tdIXT)

```
function wrapWithUnion(array $params)
{
    if (is_null($params[0])) {
        return "'{$params[1]}'";
    }

    return "ST_Union({$params[0]},'{$params[1]}')";
}

$arr = array("eee","fff","ggg","hhh");

$result = null;

foreach ($arr as $val) {
    $result = wrapWithUnion(array($result, $val));
}

var_dump($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:07:51.343

在 PHP 中，您可以使用[implode()](http://php.net/manual/en/function.implode.php)函数，它将数组的元素连接成一个字符串，由您选择的“胶水”分隔。

例子：

```
$arr1 = Array("aaa","bbb","ccc");

$str1 = implode(",",$arr1);
//aaa,bbb,ccc

$str2 = implode($arr1);
//aaabbbccc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T03:26:33.637

试试这个。

```
function wrapWithUnion($input)
{
    $template = 'ST_Union(%1$s, %2$s)';
    $output = "'" . array_shift($input) . "'";
    while ($item = array_shift($input))
    {
        $output = sprintf($template, $output, "'" . $item . "'");
    }

    return $output;
} 
```

但是，如果输入数组中的项目少于 2 个，你想做什么？此功能可能无法像您希望的那样处理这些情况。

# javascript - 如何让在我的画廊中单击针对 setInterval 的项目符号？

> ID：10611500
> 
> 赞同：0
> 
> 时间：2012-05-16T03:05:58.813
> 
> 标签：javascript, jquery, gallery, setinterval

我无法完成这项工作：在我的画廊中，如果我单击“项目符号”（当 setInterval 已经运行时），则会出现错误，例如：

当我让画廊运行时：编辑：单击项目符号无法正常工作：

```
var current = 0;
/* click on BULLETS : i think the problem is in this function */
pts.live('click', function () {
        var index = $(this).index();

        clearInterval(timer);
        current = index-1;
        timer = setInterval(function() { showImage(current) },2000); 

        return false;
    }); 
```

* * *

编辑：感谢 Gavriel，确实使用 addClass 似乎更好！但我无法修复单击项目符号：当我单击项目符号时，我想“停止”间隔并直接转到我单击的图像。是否可以？当我尝试它时（请参见下文），“当前”图像保持原样，它保持 1-2 秒，然后再次开始间隔，好像什么也没发生......你知道吗？

```
/* click on BULLETS :  */
pts.live('click', function () {
        var index = $(this).index();

        clearInterval(timer);

        li.removeClass('next');
        li.eq(index).addClass('next');
        showImage();

        timer = setInterval(function() { nextImage() }, 1000);

        return false;

    });

//TIMER
var timer = setInterval(function() { nextImage() }, 1000);
li.eq(0).addClass('next');

function nextImage(){
    var index = $('#contG').find('li:.next').index();
    $('#contG').find('li:.next').removeClass('next').addClass('current');

    /*design bullet */
    var pts_li = $("#points").find('ul').find('li');
        pts_li.removeClass('activ');

    /* limit */
    var total = li.length; //3

    if (index+1>total-1) {
        index = 0;
    } else {
        index = index+1;
    }

    li.eq(index).removeClass('current').addClass('next');
    pts_li.eq(index).addClass('activ');

    showImage();
}

/* SHOWIMAGE */
function showImage(){
    //clearInterval(timer);
    $('#contG').find('li:.next').fadeIn("slow");//FADEIN
    $('#contG').find('li:.current').fadeOut("slow");//FADEOUT
} 
```

* * *

编辑 N°2：最后的战斗

好的，我终于找到了解决方法... :-) 谢谢 Firebug：

这是代码：

```
pts.live('click', function () {
        var index = $(this).index();

        clearInterval(timer);

        $('#contG').find('li:.next').removeClass('next').addClass('current');

        li.eq(index).removeClass('current').addClass('next');

        showImage();
        timer = setInterval(function() { nextImage() }, 2500);

        return false;
    }); 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T18:37:07.030

您的问题是全局当前变量的使用。开始使用闭包：

```
(function(c){
    timer = setInterval(function() { showImage(c) },2000);
})(current); 
```

这样，在单击的那一刻，您将把 current 传递给函数，2 秒后，您将把该值传递给 showImage 而不是 current'v 值，无论它在 2 秒后可能是什么。

然而，试图了解你想要做什么......我认为更好的方法是这样的：

我不会对你通过 current 的值“计算”的元素进行淡入淡出，而是尝试使用类来“签署”“当前”元素：$(this).addClass("current") 或类似的东西，在淡入淡出时我会使用 $('#contG').find('li:.current').fadeOut("slow", function(){$(this).removeClass("current")});

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T05:33:03.330

你在哪里滑？我的意思是将下一个图像移动到框架的代码在哪里？你能分享整个代码吗？（或jsfiddle？）

另外，我建议使用`$(this)`而不是找到项目符号的索引，然后再次从其索引中选择它，

```
pts.live('click', function () {
        clearInterval(timer);
        li.removeClass('next');
        $(this).addClass('next');
        showImage();

        timer = setInterval(function() { nextImage() }, 1000);

        return false;

    }); 
```

`fadeOut`需要时间来完成，但是`fadeOut`是异步的，`fadeOut and fadeIn`会同时执行，所以我会推荐类似的东西。（这可能是您的问题的原因）

```
 function showImage(){ 
        $('#contG').find('li:.current').fadeOut("slow",function(){
            $('#contG').find('li:.next').fadeIn("slow");
        }
    } 
```

**ps**
不要使用`live`，它已弃用。改为使用`on`。

# java - 用于 OSGi 服务的 ProgressMonitor

> ID：10611504
> 
> 赞同：1
> 
> 时间：2012-05-16T03:06:42.103
> 
> 标签：java, eclipse, osgi, progressmonitor

我想为 OSGi 服务实现 ProgressMonitor。我了解 IProgessMonitor 的协议以及它应该如何在服务中使用。

但是，我不知道 IProgressMonitor 的实现会是什么样子。此外，在 OSGi 服务的情况下，我如何获取/读取进度状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T15:59:32.990

OSGi 服务没有进度或状态指示器。如果您希望为长时间运行的调用设置一些东西，则必须以特定于应用程序的方式进行，因为没有标准。

阻塞调用将在完成时返回，如果它是非阻塞调用，那么它可能会提供某种回调或基于事件的响应，但同样，这将是特定于应用程序的。

IProgressMonitor 是一个 Eclipse 的东西，它与 OSGi 没有直接关系。

# ruby-on-rails - 在 Rails 中复制 ActiveRecord，使用现有参数创建新对象的问题

> ID：10611505
> 
> 赞同：3
> 
> 时间：2012-05-16T03:06:46.957
> 
> 标签：ruby-on-rails, ruby

我试图在我的应用程序中复制 Rails 中的资源并且遇到了一些问题。

设置是：我有一个用户可以使用的“项目模板”库，然后修改生成的项目。我目前有这样的设置：

```
@temp_item = @template_item.dup
@new_item = @user.items.create(@temp_item.attributes) 
```

但是我遇到了一个问题，它也试图跨受保护的属性进行复制（即 created_at 和 updated_at）。我宁愿不单独列出每个属性，所以我的问题是，**有没有办法排除在这种情况下被复制的属性？**

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T03:44:50.633

将米沙的好建议融入我的原始答案。

```
@temp_item_attributes = @template_item.attributes.reject{ |k,v|
  %w(created_at updated_at).include?(k)
}
@new_item = @user.items.create(@temp_item_attributes) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T04:06:02.963

我同意 Mark 的 using ，但我不[`reject`](http://apidock.com/ruby/v1_9_3_125/Array/reject)使用`case`/ ，而是这样做：`when`

```
@template_item.attributes.reject{ |k,v| %w(created_at updated_at).include?(k) } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T04:47:58.310

在我看来，您应该结合使用 Mark Paine 和 Mischa 的答案，即：

```
temp_item_attributes = @template_item.attributes.reject do |k,v|
  %w(created_at updated_at).include?(k)
end
@new_item = @user.items.create(temp_item_attributes) 
```

我不敢相信这种行为没有方便的方法；我没有仔细看，但没有找到。

# javascript - 在 Rails 部分鼠标悬停时显示/隐藏 div

> ID：10611506
> 
> 赞同：-1
> 
> 时间：2012-05-16T03:07:00.710
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试在悬停时显示/隐藏的部分内添加设置链接。

部分已经显示了每个项目的 ID。

```
.item{:id => dom_id(campaign)}
  .. content here 
```

我对如何编写一个仅在父 div 悬停时显示/隐藏链接的 js 函数有点困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:31:38.003

根据您的 jquery 标记和 haml 示例，如果您的 html 如下所示：

```
.parent_div
  .item{:id => dom_id(campaign)} 
```

然后你的 jQuery 看起来像这样：

```
$('.parent_div').hover(
  function() {
    $(this).find('.item').show();
  }
, function() {
    $(this).find('.item').hide();
  }
); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T04:01:13.677

甚至你可以用javascript做到这一点..

例如，

```
function showDiv() {
document.getElementById('test').style.display = "block";
}
function hideDiv(){
document.getElementById('test').style.display = "hide";
}

<div id='test' onmouseover='showDiv()' onmouseout='hideDiv()'>
content...
</div> 
```

# google-chrome-extension - 开发 Google Chrome 扩展程序所需的开发者许可协议

> ID：10611509
> 
> 赞同：3
> 
> 时间：2012-05-16T03:07:11.643
> 
> 标签：google-chrome-extension, licensing

开发 Google Chrome 扩展程序时需要什么样的许可协议？

在 iPhone 的情况下，有“iPhone 开发者程序许可协议”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T20:38:50.823

没有任何。但是，当您将应用程序上传到 Chrome 网上应用店时，即表示您同意[Google Chrome 网上应用店开发者协议](https://developers.google.com/chrome/web-store/terms)。如果您自行托管您的应用程序，则您不必同意任何事情（使用 Chrome/Chromium 的普通软件许可除外，这与应用程序开发没有直接关系）。

Apple 要求您接受他们的许可协议作为获得开发工具的先决条件。如果没有开发人员工具，您将无法制作任何 iOS 应用程序，尤其是因为 iOS 有一个禁止应用程序在其应用程序商店之外分发的方案。

Chrome 没有这些限制。任何人都可以开始为它开发，没有进入障碍。事实上，除了扩展打包器之外，真的没有开发者工具；如果您想开始开发 Chrome 应用程序，只需设置一个`manifest.json`并开始制作使用其 JavaScript API 的网页。虽然 Chrome 网上应用店可能是您获得最多曝光率的地方，但您可以自由地将 Chrome 应用程序托管在您喜欢的任何地方，而不会受到任何处罚或限制。

# windows - 如何有选择地从一系列文件中复制文本并粘贴到一个文件中？

> ID：10611510
> 
> 赞同：0
> 
> 时间：2012-05-16T03:07:22.437
> 
> 标签：windows, batch-file, concatenation

我在一堆单独的文件夹中有大量同名文件。例如：
mods\Lady Knight\media\units\items\armor
mods\Paladin\media\units\items\armor
mods\Necromancer\media\units\items\armor

在这些文件夹中的每一个中都会有例如：
a_chest_magic_04a.dat
a_chest_magic_04b.dat
a_chest_magic_04c.dat

这些 .dat 文件实际上只是具有不同扩展名的 .txt 文件。在这些文件中的每一个中都有一堆文本行，这些文本行在不同文件夹中的同名文件中是相同的。因此，例如这些的前几行：

mods\Lady Knight\media\units\items\armor\a_chest_magic_04a.dat
mods\Paladin\media\units\items\armor\a_chest_magic_04a.dat
mods\Necromancer\media\units\items\armor\a_chest_magic_04a.dat

将完全相同，但在

mods\Lady Knight\media\units\items\armor\a_chest_magic_04a.dat mods\Lady Knight\media\units\items\armor\a_chest_magic_04b.dat

文本会有所不同。
但是，在每个文件的末尾都是这样的：

```
[WARDROBE]
<STRING>CLASS:DESTROYER
<STRING>TEXTURE:media/wardrobe/destroyer/dest_scale_chest.png
<STRING>MESH:media/wardrobe/destroyer/scale_set.mesh
<STRING>ICON:scalevest
[/WARDROBE]
[WARDROBE]
<STRING>CLASS:ALCHEMIST
<STRING>TEXTURE:media/wardrobe/alchemist/alchemist_hvyleather_chest.png
<STRING>MESH:media/wardrobe/alchemist/hvyleather_set.mesh
[/WARDROBE]
[WARDROBE]
<STRING>CLASS:VANQUISHER
<STRING>MESH:media/wardrobe/vanquisher/vanquisher_buckled.mesh
<STRING>TEXTURE:media/wardrobe/vanquisher/buckled_chest.png
<STRING>ICON:vanq_buckled_body
[/WARDROBE]
[WARDROBE]
<STRING>CLASS:LADY KNIGHT
<STRING>TEXTURE:media\wardrobe\ladyknight\buckled_chest.png
<STRING>MESH:media\wardrobe\ladyknight\vanquisher_buckled.mesh
<STRING>ICON:vanq_buckled_body
[/WARDROBE]
[/UNIT] 
```

最后一组 [WARDROBE] 标记之间的行在文件的每个版本中都不同。我想要做的是将它们组合起来，以便在最后列出所有这些不同的 [WARDROBE] 组，因此**a_chest_magic_04a.dat**的最后一部分看起来像这样：

```
[WARDROBE]
<STRING>CLASS:DESTROYER
<STRING>TEXTURE:media/wardrobe/destroyer/dest_scale_chest.png
<STRING>MESH:media/wardrobe/destroyer/scale_set.mesh
<STRING>ICON:scalevest
[/WARDROBE]
[WARDROBE]
<STRING>CLASS:ALCHEMIST
<STRING>TEXTURE:media/wardrobe/alchemist/alchemist_hvyleather_chest.png
<STRING>MESH:media/wardrobe/alchemist/hvyleather_set.mesh
[/WARDROBE]
[WARDROBE]
<STRING>CLASS:VANQUISHER
<STRING>MESH:media/wardrobe/vanquisher/vanquisher_buckled.mesh
<STRING>TEXTURE:media/wardrobe/vanquisher/buckled_chest.png
<STRING>ICON:vanq_buckled_body
[/WARDROBE]
[WARDROBE]
<STRING>CLASS:LADY KNIGHT
<STRING>TEXTURE:media\wardrobe\ladyknight\buckled_chest.png
<STRING>MESH:media\wardrobe\ladyknight\vanquisher_buckled.mesh
<STRING>ICON:vanq_buckled_body
[/WARDROBE]
[WARDROBE]
<STRING>CLASS:PALADIN
<STRING>MESH:media/wardrobe/paladin/vanquisher_buckled.mesh
<STRING>TEXTURE:media/wardrobe/paladin/buckled_chest.png
<STRING>ICON:paladin_buckled_body
[/WARDROBE]
[WARDROBE]
<STRING>CLASS:NECROMANCER
<STRING>TEXTURE:media/wardrobe/alchemist/alchemist_hvyleather_chest.png
<STRING>MESH:media/wardrobe/alchemist/hvyleather_set.mesh
[/WARDROBE]
[/UNIT] 
```

大约有十几个文件夹，每个文件夹都包含相同的 150 个左右文件的略有不同的副本。我可以复制其中一个文件夹作为主文件的起点。最终目标是（150 个文件的）主副本，其中包含来自每个不同文件夹源文件的衣柜部分。我更喜欢在 Windows 中执行此操作，因为过去我遇到过 Windows 和 Linux 回车不一样的麻烦。

大约一年半前，我在大学里有一个基本的脚本课，但这远不止于此。我认为批处理文件的逻辑类似于

1）从每个文件的末尾删除 [/UNIT]
2）从文件的每个实例中复制最后一个衣柜部分并将其连接到主文件的末尾
3）对文件夹中的每个文件重复上述操作
4）添加 [ /UNIT] 到主文件的末尾

有一些老板脚本技能的人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:22:59.013

你的策略很好。

1.  迭代所有文件，`FOR`是你的朋友。`HELP FOR`在命令行中阅读并尝试一些简单的东西

    ```
    for /r %a in (a_chest_*.dat) do @echo %a 
    ```

    确保你得到你想要的所有文件

2.  要将此代码移动到 BAT 文件中，您需要将 %a 替换为 %%a。此外，您希望复制第一个文件以用作所有其余文件的种子。试试这样的..

    ```
    set first=
    for /r %%a in (a_chest_*.dat) do (
      echo %%a
      if .!first!==. (
        copy %%a wardrobes.txt
        set first=%%a
      ) 
    ) 
    ```

3.  提取每个文件的最后一个 WARDROBE 部分有点棘手

    因为您只想提取 WARDROBE 部分的最后一次出现，您需要读取文件两次，第一次是找到应该开始复制的行，第二次是实际进行提取。

    `FOR`是你的朋友，先找到最后一个[WARDROBE]和最后一个[/UNIT]的台词

    ```
    set linenum=0
    for /f "tokens=* delims=" %%a in (a_chest_magic_04c.dat ) do (
      set /a linenum+=1
      if %%a==[WARDROBE] set fromhere=!linenum!
      if %%a==[/UNIT] set tohere=!linenum!
    ) 
    ```

    其次，找到那个地方并提取线条

    ```
    set linenum=0
    for /f "tokens=* delims=" %%a in (a_chest_magic_04c.dat ) do (
     set /a linenum+=1
     if !linenum! geq !fromhere! (
       if !linenum! lss !tohere! (
        echo %%a
       )
     )
    )
    goto :eof 
    ```

4.  把我们迄今为止得到的碎片放在一起

    ```
    @echo off
    setLocal EnableDelayedExpansion
    set first=
    for /r %%a in (*.dat) do (
      if .!first!==. (
        copy %%a wardrobes.txt
        set first=%%a
      ) else (
        (
          call :extractlastwardrobe %%a
        ) >>wardrobes.txt
      )
    )
    goto :eof

    :extractlastwardrobe
    set linenum=0
    for /f "tokens=* delims=" %%a in (%1) do (
      set /a linenum+=1
      if %%a==[WARDROBE] set fromhere=!linenum!
      if %%a==[/UNIT] set tohere=!linenum!
    )
    set linenum=0
    for /f "tokens=* delims=" %%a in (%1) do (
      set /a linenum+=1
      if !linenum! geq !fromhere! (
        if !linenum! lss !tohere! (
          echo %%a
        )
      )
    )
    goto :eof 
    ```

你**几乎**完成了。您仍然需要从种子文件中删除 [/UNIT] 行并将其添加到结果文件的末尾。我把它留作练习。

# php - 将任务添加到我的游戏

> ID：10611512
> 
> 赞同：-2
> 
> 时间：2012-05-16T03:07:38.473
> 
> 标签：php, javascript

我终于决定在我的游戏中添加任务。我希望任务彼此独立。也许以后的一个，一个在访问该任务之前完成了另一个任务。反正。

我该怎么做？我想了很多。我是一个 PHP/Javascript/Mysqli 人。

您与 NPC 交谈，如果您选择正确的“答案”，他们将开始任务。你做任务，你可能需要和其他 NPC 交谈。这一切都取决于。我如何存储对话并显示它们？

谢谢。

***编辑***

这就是我“完成”的事情。

```
var people = [];
people[1]=['name'=>'Joe'];
people[1]['questions'][1] = 'Why, hello there';
people[1]['questions'][1]['send'] = 1;
people[1]['questions'][2] = 'My name is Joe, You seem to be new around here';
people[1]['questions'][2]['send'] = 2;
people[1]['questions'][3] = 'Why certainly! How about I send you on a quest to help you.  It will get you aquainted with Corgate';
people[1]['questions'][3]['send'] = makequest(1);
people[1]['answers'][1] = array('Hello, who are you?');
people[1]['answers'][1]['send'] = 2;
people[1]['answers'][2] = array("I'm not new! Good bye!",'Yes I am, Can you help me?');
people[1]['answers'][2]['send'][1] = 3;
people[1]['answers'][2]['send'][2] = endthis(); 
```

很草率。是的。基本上，它从问题开始。然后“发送”到具有该 ID 的答案。然后，根据选择的答案数组，然后将其发送到相应的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:21:53.670

我基本上会用你数据库中的表来做。

如果对话都是线性的，您可以搜索下一个 NPC 响应

```
SELECT NPC.response WHERE NPC.previous = ? AND NPC.player_response = ? 
```

在哪里？是NPC最后说的话，以及玩家是如何回应的。

如果玩家选择了“错误”的响应，则没有任何内容与查询匹配，NPC 将保持沉默。

# objective-c - 为应用内购买实施一种以上的购买类型

> ID：10611514
> 
> 赞同：2
> 
> 时间：2012-05-16T03:08:03.113
> 
> 标签：objective-c, ios, xcode, in-app-purchase

这是使用 Apple 的文档编辑的表格，并按照建议。我用 2 个独立的 IBAction 创建了 2 个独立的按钮。

```
UIButton *buyCredit1 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    buyCredit1.frame = scrollViewFrame;
    [buyCredit1 setTitle:@"A bundle of 10 credits - 99¢" forState:UIControlStateNormal];
    buyCredit1.tag = 10;
    [scrollView addSubview:buyCredit1];
    [buyCredit1 addTarget:self
                   action:@selector(purchase10credit:)
         forControlEvents:UIControlEventTouchUpInside];

UIButton *buyCredit2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    buyCredit2.frame = scrollViewFrame;
    [buyCredit2 setTitle:@"A bundle of 30 credits - 1.99¢" forState:UIControlStateNormal];
    buyCredit2.tag = 30;
    [scrollView addSubview:buyCredit2];
    [buyCredit2 addTarget:self
                   action:@selector(purchase30credit:)
         forControlEvents:UIControlEventTouchUpInside];

-(IBAction)purchase10credit:(id)sender{
    SKMutablePayment *payment = [[SKMutablePayment alloc] init];
    payment.productIdentifier = @"Bundle.10.credits";

    [[SKPaymentQueue defaultQueue] addPayment:payment];
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
    [[SKPaymentQueue defaultQueue] addPayment:payment];
}
-(IBAction)purchase30credit:(id)sender{
    SKMutablePayment *payment = [[SKMutablePayment alloc] init];
    payment.productIdentifier = @"Bundle.30.credits";

    [[SKPaymentQueue defaultQueue] addPayment:payment];
    [[SKPaymentQueue defaultQueue] addTransactionObserver:self];
    [[SKPaymentQueue defaultQueue] addPayment:payment];
}
-(void) productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response{
    SKProduct *validProduct = nil;
    int count = [response.products count];
    if (count > 0) {
        validProduct = [response.products objectAtIndex:0];
    }
    else if (!validProduct) {
        NSLog(@"No Products Available");
    }
} 
```

这是 Apple 反映的用于应用内购买的文档

```
-(void) productsRequest:(SKProductsRequest *)request didReceiveResponse:(SKProductsResponse *)response{
    SKProduct *validProduct = nil;
    int count = [response.products count];
    if (count > 0) {
        validProduct = [response.products objectAtIndex:0];
    }
    else if (!validProduct) {
        NSLog(@"No Products Available");
    }
}
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction *transaction in transactions)
    {
        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:
                [self completeTransaction:transaction];
                break;
            case SKPaymentTransactionStateFailed:
                [self failedTransaction:transaction];
                break;
            case SKPaymentTransactionStateRestored:
                [self restoreTransaction:transaction];
            default:
                break;
        }
    }
}

- (void) updateCredit: (NSString *)productIdentifier { 
    //Adding to plist
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0]; 
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"data.plist"]; 

    NSMutableArray *currPlist = [[NSMutableArray alloc] initWithContentsOfFile: path];

    NSString *lastEx = [currPlist objectAtIndex:0];
    int lastScore = [[currPlist objectAtIndex:1] intValue];
    int numberOfTries = [[currPlist objectAtIndex:2] intValue];
    int totalScore = [[currPlist objectAtIndex:3] intValue];
    int avg = [[currPlist objectAtIndex:4] intValue];
    int credit = [[currPlist objectAtIndex:5] intValue];

    credit += 10;

    NSString *currentCredit = [NSString stringWithFormat:@"%d credits",credit];
    creditShow.text = currentCredit;

    NSMutableArray *updatePlist = [[NSMutableArray alloc] init];
    [updatePlist addObject:lastEx];
    [updatePlist addObject:[NSNumber numberWithInt:lastScore]];
    [updatePlist addObject:[NSNumber numberWithInt:numberOfTries]];
    [updatePlist addObject:[NSNumber numberWithInt:totalScore]];
    [updatePlist addObject:[NSNumber numberWithInt:avg]];
    [updatePlist addObject:[NSNumber numberWithInt:credit]];
    [updatePlist writeToFile: path atomically:YES]; 
}

- (void) completeTransaction: (SKPaymentTransaction *)transaction
{
    // Your application should implement these two methods.
    [self updateCredit:transaction.payment.productIdentifier];

    // Remove the transaction from the payment queue.
    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
}

- (void) restoreTransaction: (SKPaymentTransaction *)transaction
{

    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
}

- (void) failedTransaction: (SKPaymentTransaction *)transaction
{
    if (transaction.error.code != SKErrorPaymentCancelled) {
        // Optionally, display an error here.
    }
    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
} 
```

在 - (void) updateCredit: (NSString *)productIdentifier 中，我如何创建 2 个单独的信用更新？一个用于信用 += 10（用于购买 0.99 美分和信用 += 30（用于 1.99 美元）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T03:23:20.037

检查您的 (id)sender`purchase:`并确定按下了哪个按钮（您可以为按钮设置标签属性，例如 tag=1 表示 10 个积分，tag=5 表示 50 个积分）。然后您可以设置另一个应用内购买：

```
UIButton *tempButton = (UIButton *)sender;
if (tempButton.tag == 1)
payment.productIdentifier = @"Bundle.10.credits";
else
payment.productIdentifier = @"Bundle.50.credits"; 
```

至于更新状态是推荐的方式：

```
- (void)paymentQueue:(SKPaymentQueue *)queue updatedTransactions:(NSArray *)transactions
{
    for (SKPaymentTransaction *transaction in transactions)
    {
        switch (transaction.transactionState)
        {
            case SKPaymentTransactionStatePurchased:
                [self completeTransaction:transaction];
                break;
            case SKPaymentTransactionStateFailed:
                [self failedTransaction:transaction];
                break;
            case SKPaymentTransactionStateRestored:
                [self restoreTransaction:transaction];
            default:
                break;
        }
    }
}

- (void) completeTransaction: (SKPaymentTransaction *)transaction
{
    // Your application should implement these two methods.
    [self recordTransaction:transaction];
    [self provideContent:transaction.payment.productIdentifier];

    // Remove the transaction from the payment queue.
    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
}

- (void) restoreTransaction: (SKPaymentTransaction *)transaction
{
    [self recordTransaction: transaction];
    [self provideContent: transaction.originalTransaction.payment.productIdentifier];
    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
}

- (void) failedTransaction: (SKPaymentTransaction *)transaction
{
    if (transaction.error.code != SKErrorPaymentCancelled) {
        // Optionally, display an error here.
    }
    [[SKPaymentQueue defaultQueue] finishTransaction: transaction];
} 
```

In-App Purchase的正确实现在[Apple官方的In-App Purchase Programming Guide中可以找到。](https://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/StoreKitGuide/Introduction/Introduction.html)

# outlook - 为什么 AppointmentItem 的 send 事件会被调用多次？

> ID：10611515
> 
> 赞同：1
> 
> 时间：2012-05-16T03:08:19.210
> 
> 标签：outlook, vsto

我为每个`AppointmentItem`的发送事件添加了一个事件处理程序。这个事件处理程序只是做一些日志记录的事情。我通过 Outlook 2003 创建会议，然后两次更新会议。最后我检查了日志。

```
this.Application.Inspectors.NewInspector += new Microsoft.Office.Interop.Outlook.InspectorsEvents_NewInspectorEventHandler(_inspectors_NewInspector);

private void _inspectors_NewInspector(Microsoft.Office.Interop.Outlook.Inspector inspector)
{
    if(inspector.CurrentItem is Outlook.AppointmentItem)
    {
        _appointmentEvent = inspector.CurrentItem as Outlook.ItemEvents_10_Event;
        _appointmentEvent.Send += new Microsoft.Office.Interop.Outlook.ItemEvents_10_SendEventHandler(_appointmentEvent_Send);
    }
}

private void _appointmentEvent_Send(ref bool Cancel)
{
    Log.WriteLog("InspectorWrapper: _appointmentEvent_Send Enter");
    Log.WriteLog("InspectorWrapper: _appointmentEvent_Send Exit");
} 
```

我检查日志。我发现发送事件处理程序会被调用很多次。

> 2012-05-16 10:07:21:066：InspectorWrapper：_appointmentEvent_Send 进入
> 2012-05-16 10:07:21:067：InspectorWrapper：_appointmentEvent_Send 退出
> ...
> 2012-05-16 10:07:27:281： InspectorWrapper：_appointmentEvent_Send 进入
> 2012-05-16 10:07:27:283：InspectorWrapper：_appointmentEvent_Send 退出
> 2012-05-16 10:07:27:283：InspectorWrapper：_appointmentEvent_Send 进入
> 2012-05-16 10:07:27:284 ：InspectorWrapper：_appointmentEvent_Send Exit
> ...
> 2012-05-16 10:07:32:607：InspectorWrapper：_appointmentEvent_Send Enter
> 2012-05-16 10:07:32:608：InspectorWrapper：_appointmentEvent_Send 退出
> 2012-05-16 10:07 :32:609: InspectorWrapper: _appointmentEvent_Send Enter
> 2012-05-16 10:07:32:609：InspectorWrapper：_appointmentEvent_Send 退出
> 2012-05-16 10:07:32:610：InspectorWrapper：_appointmentEvent_Send 进入
> 2012-05-16 10:07:32:610：InspectorWrapper：_appointmentEvent_Send出口

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:23:35.303

您应该将日志记录添加到`NewInspector`事件中，以查看您锁定`AppointmentItem.Send`事件的次数。我的假设是这`NewInspector`是你的问题。最佳实践是使用自定义`InspectorWrapper`作为容器来管理活动检查器列表，以避免多个事件锁定。

`FindOutlookInspector`作为参考，请查看[此 MSDN 参考](http://msdn.microsoft.com/en-us/library/bb226712.aspx#officeoutlookribbon__modifycode)。

```
internal static List<OutlookInspector> m_Windows;       
internal static OutlookInspector FindOutlookInspector(object window)
{
    foreach (OutlookInspector inspector in m_Windows)
        if (inspector.Window == window)
            return inspector;
    return null;
} 
```

# mysql - 如何选择可用的日期切片

> ID：10611518
> 
> 赞同：0
> 
> 时间：2012-05-16T03:09:01.687
> 
> 标签：mysql, select, join, temp-tables

我正在尝试制作一个简单的预订系统。我有一个名为的表`reservation`，其中包含预订时间和预订它的客户的 ID（请参阅下面的架构）。我还有另一张桌子`room`，这张桌子是房间类型的，所以每种类型的房间在这张桌子上都有一个关于它的大小和价格的条目。还有另一张桌子`rooms`，用于实际进入每个房间。在我尝试进行的查询中，我想选择一个房间，它是特定类型的，并且在给定的时间片内可用。像这样的东西；

```
Select number from rooms where type = 4 and available between $start-date and $end-date; 
```

我不知道如何在查询的一部分之间编写可用的。我的架构的相关部分如下；

```
CREATE TABLE IF NOT EXISTS `reservation` (
  `rid` int(11) NOT NULL AUTO_INCREMENT, /* reservation id */
  `number` int(11) NOT NULL, /* number of the room for this reservation */
  `cid` int(11) NOT NULL, /* customer id */
  `begin` date NOT NULL,
  `end` date NOT NULL,
  PRIMARY KEY (`rid`),
);

CREATE TABLE IF NOT EXISTS `room` (
  `rid` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) COLLATE utf8_unicode_ci NOT NULL,
  `size` tinyint(3) unsigned NOT NULL,
  `price` float NOT NULL,
  PRIMARY KEY (`rid`)
);

CREATE TABLE IF NOT EXISTS `rooms` (
  `number` smallint(5) unsigned NOT NULL,
  `type` int(11) NOT NULL,
  `available` tinyint(1) NOT NULL,
  `cid` int(11) DEFAULT NULL,
  PRIMARY KEY (`number`),
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:33:54.007

虽然与您所拥有的表结构不完全相同，但这是[另一个预订查询的链接...](https://stackoverflow.com/questions/10332345/mysql-booking-site-query-db-optimization/10336709#10336709)您可以查看那里的方式/原因，但是您应该可以通过这样做来获得您正在寻找的东西...

```
SELECT DISTINCT        
      rooms.number
   FROM        
      rooms
         LEFT JOIN reservations res
            ON rooms.number = res.number
           AND (  res.begin between '2012-04-05' and '2012-04-08'                
               OR res.end between '2012-04-05' and '2012-04-08' )
   WHERE          
          rooms.type = 4
      AND res.number IS NULL 
```

前提是查看每个房间并在相关日期内专门寻找预订。如果任何保留或结束日期在该范围内，则其已被占用。如果没有，则没有预订，因此可用。因此，LEFT JOIN 将始终允许返回房间（提供类型 = 4），但也只有在预订表编号值为 NULL 时，表示文件上没有预订，没有记录，空匹配......房间是可用的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T06:05:11.863

我不确定这是否是一个好的解决方案，但我最终这样做了：

```
SELECT number, room.price
FROM rooms
JOIN room on room.rid = rooms.type 
WHERE rooms.type = ".$room_id."
AND rooms.number NOT IN (
    SELECT number FROM reservation
    WHERE end >= FROM_UNIXTIME(".$start.")
    AND begin <= FROM_UNIXTIME(".$end.")
) LIMIT 1; 
```

# pyrocms - 如何在不删除 PyroCMS 中的模块表记录的情况下更新模块？

> ID：10611524
> 
> 赞同：0
> 
> 时间：2012-05-16T03:09:59.907
> 
> 标签：pyrocms

我有一个产品模块。它工作正常。

我可以在 pyrocms 的管理员上添加、更新、删除和列出产品。

但现在我需要添加 4 列，即

有货、有货、现货、已发货

类似于上面的列。

每当我卸载我的模块时，它总是会删除 default_products 表。

希望有人可以帮助..非常感谢

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T13:11:51.507

您应该在 details.php 文件中使用升级功能。在该函数中，您必须插入所有查询来操作表。通过控制面板上传新模块后，您将看到“升级”按钮，该按钮将执行所有更改表查询。

```
function upgrade($old){
//Your alter table query
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T11:54:51.857

通过手动将列添加到表中，您正在开发的模块可以正常工作。无需进一步工作。

尽管您需要更新模块的 detail.php 才能安装和卸载模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T03:40:37.077

我最后有一些建议

1.  您可以在数据库表中手动添加这些字段。
2.  备份此表并将这些字段添加到模块的 detail.php 中，这样当您再次安装这些模块时，您可以从旧表中导入数据。

希望这会有所帮助。

# c# - 用“new”初始化的 Fixed(){} 中的多个指针不起作用

> ID：10611525
> 
> 赞同：2
> 
> 时间：2012-05-16T03:10:09.947
> 
> 标签：c#, .net, unsafe, fixed-statement

当我尝试使用 fixed 初始化一个新的 char* 数组，同时与其他事物一起被初始化时，它不起作用。下面的代码就是一个例子

```
fixed (char* buffer = new char[25])
{
     //This works just fine
}; 

fixed (char* origionalPhrase = phrase, char* buffer = new char[25])
{
    //This does not
} 
```

语法解析器将新的 char[25] 强调为“无法将类型 'char[]' 隐式转换为 'char*'”。我需要将这两个变量都初始化为 char* 数组。第一个变量，originalPhrase 变量初始化得很好。MSDNN 文档指出：

```
fixed (byte* ps = srcarray, pd = dstarray) {...} 
```

将工作。

我使用[了这篇](http://msdn.microsoft.com/en-us/library/f58wzh21.aspx)MSDN 文章。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T07:14:51.257

好吧，MSDN 示例只有一个 char *（或实际上是 byte *）。删除第二个。

```
fixed(char* origionalPhrase = phrase, buffer = new char[25])
//                                   ^-- removed char*
{
   // ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-02T11:58:46.203

```
fixed(char* origionalPhrase = phrase)
{
   fixed(char* buffer = new char[25])
   {
   ....
   ....
       now you can use origionalphrase and buffer inside.
   }
} 
```

# php - 未启用安全浏览的用户无法看到我的 Facebook 应用

> ID：10611531
> 
> 赞同：1
> 
> 时间：2012-05-16T03:10:55.343
> 
> 标签：php, facebook, ssl

我使用 PHP 创建了一个简单的 FB 应用程序。为了满足 FB 的新规定，我已经在我的服务器上安装了 SSL 证书。但是，只有在启用安全浏览时才能看到该应用程序，否则它将仅显示一个空白画布。

我知道 FB 默认情况下未启用安全浏览。发生这种情况有什么原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:07:37.423

In your login url make sure you gave url http:// not https://

```
 $loginUrl=$facebook->getLoginUrl(array(
    'scope'         => 'scopes',
    'redirect_uri'  =>'http://apps.facebook.com/YOURAPPNAMESPACE/'
      )); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:12:56.480

当您在请求 URI 中看到 HTTP 时，您可以转发用户以使用 HTTPS。

```
// forced HTTPS mechanism used in heroku Facebook App
if (substr(AppInfo::getUrl(), 0, 8) != 'https://' && $_SERVER['REMOTE_ADDR'] != '127.0.0.1') {
    header('Location: https://'. $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']);
    exit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T04:56:46.380

检查开发人员页面的应用程序设置，您可能已经`HTTPS URL`在`Canvas URL`

# c++ - 如何将字节数据从套接字写入 C 中的无符号字符向量？

> ID：10611535
> 
> 赞同：0
> 
> 时间：2012-05-16T03:11:19.487
> 
> 标签：c++, c, sockets, jpeg, unsigned-char

我正在使用 bsd 套接字在 C 中开发一个服务器，在该套接字中我从客户端接收 jpeg 帧。

帧数据作为 jpeg 格式的字节数据流到达服务器。

由于字节等效是 C 中的无符号字符，因此我在 sock.recv() 函数的多次迭代中将这些数据接收到无符号字符向量中。

问题是当我将此数据写入 .jpg 文件时，它仅将文件大小显示为 4 个字节。

我还检查了在帧的所有迭代中从 recv 缓冲区中挑选的字节数等于发送帧的总大小，但不知何故，它们没有正确写入我使用的向量中。

有谁知道该怎么做？谢谢 ！

这是我从套接字读取数据的代码：

```
int Socket::readFrame(vector<unsigned char> &buffer,int buffsize){
MyLog Log;
buffer.resize(buffsize);
int nChars;
int readlen;
fd_set fset;            
struct timeval tv;      
int sockStatus;
FD_ZERO(&fset);
FD_SET(socketHandle, &fset);
tv.tv_sec = 0;
tv.tv_usec = 50;
sockStatus = select(socketHandle + 1, &fset, NULL,&fset, &tv);      
if (sockStatus <= 0) {
    return sockStatus;
}

int i;
for(i=0;i<buffsize;i+=nChars){
    cout<<"I="<<i<<endl;
    //Log.v("Reading");
    FD_ZERO(&fset);
    FD_SET(socketHandle, &fset);
    tv.tv_sec = 5;
    tv.tv_usec = 0;
    sockStatus = select(socketHandle + 1, &fset, NULL,&fset, &tv);
    if (sockStatus < 0) {
        return -1;
    }
    nChars = ::recv(socketHandle, &buffer[0] , buffsize-i, MSG_NOSIGNAL);
    cout<<nChars<<endl;
    if (nChars <= 0) {
        return -1;
    }

}
    cout<<buffer.data();
    return i;
} 
```

是的，我在服务器上正确接收数据，因为我还在 PYTHON 中创建了一个假服务器并成功地重建了那里的帧。这是我在 python 中所做的：

```
import socket,thread
import string
import array
host="172.16.82.217"
port=54321
s=socket.socket()
s.setsockopt(socket.SOL_SOCKET,socket.SO_REUSEADDR,1)
s.bind((host,port))
s.listen(5)
conn,address=s.accept()
if conn:
    print "accepted"
totalLength=""
for i in range(0,10):
    data=""
    mylen=0
    dataRecv=0
    file1 = open("myfile%d.jpg"%i,"w")
    length=conn.recv(1024)
    print length
    conn.send("recvd\n")
    mylen=int(length)

    while dataRecv<mylen:
        newData=""
        newData=conn.recv(1)
        if not newData:
            break
        data+=newData
        dataRecv+=len(newData)

    file1.write(data)
    file1.close()
    print len(data)
conn.close()
s.close() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:43:38.183

`recv()`返回接收数据的大小。

因此，您可以从`recv()`.

如果您从`recv()`返回值中获取文件大小（4 个字节），则可能是传输数据有问题（`socket`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T04:16:46.030

在黑暗中彻底刺伤。您是否使用 sizeof 来确定要写入的字节数并在指针上使用 sizeof ：

```
unsigned char *data = ...
write(fd, data, sizeof(data)); 
```

如果这是您的问题， sizeof 只是返回指针本身使用的字节数。由于这是二进制数据，因此您需要跟踪从 recv 获得的字节数并使用它：

```
size_t total_bytes = 0;
...
ssize_t bytes = recv(...);
if (bytes != -1)
  total_bytes += bytes;
....
write(fd, data, total_bytes); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:07:29.177

根据你到目前为止所说的，看起来你的代码不存在这样的东西（我没有编译器，所以可能存在一些语法错误）：

```
ofstream out;
out.open("SOMEFILE.jpg", ios::out | ios::binary);

while(moreFrames) {
    int bytesRead = clientsocket.readFrame(buffer, frameSize);
    out.write(reinterpret_cast<char*>(buffer.data()), bytesRead);

    // some check to see if there are more frames.
}

out.close(); 
```

有些事情要注意。您是否以二进制模式打开 jpeg 文件？您是否将正确的大小写入文件？您是否只在开始时打开文件+在最后一帧之后关闭它（而不是为每一帧打开/写入/关闭？）

对于您发布的代码，似乎有几个问题需要考虑。这个：

```
nChars = ::recv(socketHandle, &buffer[0] , buffsize-i, MSG_NOSIGNAL); 
```

应该是这样的

```
nChars = ::recv(socketHandle, &buffer[i] , buffsize-i, MSG_NOSIGNAL); 
```

否则，每当您绕过循环时，您都是从缓冲区的开头（`buffer[0]`）开始，而不是缓冲区中的第一个空槽（`buffer[i]`）。

您的 for 循环仅在`buffersize`要从套接字读取的字节数或更多字节时才有效。如果图像由多个帧组成（其中一个很小），或者图像小于一个帧，我希望您的方法中止返回`-1`. 这真的是你想做的吗？我建议也许这样：

```
if (nChars <= 0) {
    return -1;
} 
```

应该是这样的：

```
if (nChars <= 0) {
    if (i <= 0) {
        return -1;
    }
    break;
} 
```

这样，只要您从套接字中读取了某些内容，您就会返回它，从而允许短帧。但这实际上取决于您的应用程序，这只是要记住的事情。

您不能用于`cout << buffer.data()`输出从套接字读取的二进制信息，因为它会假定输入为空终止。您可以使用 写入二进制数据`cout.write((const char*)buffer.data(), bufferContentSize)`，但请记住，这样做会将二进制数据写入您的控制台（可能会注意到所有数据都是可见的，并且可能会产生各种其他影响，具体取决于您的控制台在解释控制字符时）。

# wcf - WCF+AzureServiceBus 是否提供类似于 WCF+MSMQ 的传出队列功能？

> ID：10611547
> 
> 赞同：0
> 
> 时间：2012-05-16T03:13:05.783
> 
> 标签：wcf, azure, servicebus

在 WCF+MSMQ 中，发送的消息首先通过传出队列路由，以在目标队列脱机时提供有保证的传递。我找不到任何信息表明此相同策略可用于 Azure 服务总线的任何 WCF 绑定。虽然瞬态故障处理框架非常适合处理与 Azure 的短期连接问题，但我的网络和 Azure 服务总线之间的变量太多，无法保证在长期中断时交付。

WCF+Azure 服务总线是否有等效的传出队列概念？如果不是，有什么替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:34:31.967

还没有。服务总线上的所有入队操作都是远程的。我们有一个示例 (http://code.msdn.microsoft.com/windowsazure/Brokered-Messaging-MSMQ-a31c6644) 展示了如何从 MSMQ 桥接到服务总线，我们不太可能将其包装到产品中并使其成为长期故事。这里的逻辑是 MSMQ 存在于 Windows 的每个副本中，因此使用 MSMQ 作为桥头堡是有意义的。在此之前，您可以将此作为示例，以使用私有 MSMQ 队列作为本地足迹，然后从那里转发到 SB

# c# - 反射：使用委托设置通用对象的属性

> ID：10611551
> 
> 赞同：2
> 
> 时间：2012-05-16T03:14:31.067
> 
> 标签：c#, reflection

我正在开发一个简单的 ORM 库，实际上非常简单......

我有一个类型为 T 的查询

```
public IEnumerable<T> Query<T>(string query) 
```

该方法采用 T 类，它获取属性，遍历它们并相应地设置它们

```
aProperty.SetValue(tmpGenericObjectOfTypeT, newValue, null); 
```

我的问题是 SetValue 非常慢，我看到了两种选择，使用 Reflection.Emit 或使用委托，不幸的是我不知道如何做这些。

正如我所读到的，使用委托更优雅，我想要那个解决方案，但我真的不知道该怎么做，我搜索并发现了很多关于如何使用委托调用方法的信息，但不是如何设置属性...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:37:40.723

知道如何获取/设置属性的[动态方法](http://msdn.microsoft.com/en-us/library/exczf7b9.aspx)或[表达式树是这里的方法。](http://msdn.microsoft.com/en-us/library/bb397951.aspx)快速简单。

*   使用反射检查您的类型的接口
*   构建 getter/setter`Actions/Funcs`并将它们缓存在将它们与原始类型相关联的对象中。
*   在后续操作中使用缓存的 getter/setter。

与反射相比，您应该会看到至少 20 倍的性能提升（如果不是 50-100 倍的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:33:49.917

HyperDescriptor 工作得很好（基于ReflectionEmit）。 [http://www.codeproject.com/Articles/18450/HyperDescriptor-Accelerated-dynamic-property-acces](http://www.codeproject.com/Articles/18450/HyperDescriptor-Accelerated-dynamic-property-acces)

“委托”方法可能是指表达式树？

# ios - 来自 CMSampleBufferRef 源的音频信号处理

> ID：10611559
> 
> 赞同：2
> 
> 时间：2012-05-16T03:16:41.770
> 
> 标签：ios, avfoundation

在 iOS 4.1+ 上录制实时视频时，我有一个assetWriterAudioInput 被输入了一个 CMSampleBufferRef 。我想要完成的是在将音频样本处理到assetWriter之前实时处理它们 - 在改变来自麦克风的音频的同时保存视频。关于这样做的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:24:30.043

令我惊讶的是，没有必要使用已处理的信号创建新的 CMSampleBufferRef。使用问题中公开的样本：[通过 AVAssetReader 读取音频样本](https://stackoverflow.com/questions/4972677/reading-audio-samples-via-avassetreader)，并就地处理它们，音频工作。有两个警告：1）缓冲区非常小，每个块大约 1024 个样本，所以我看不出如果不实时访问更远的样本，如何创建空间/回声效果。2）我相信 CMSampleBufferRef 时间信息非常严格，所以不允许时间拉伸，必须以这种方式就地完成。第 2 条限制对我来说不是问题，第 1 条也不太麻烦，因为我主要追求的是音高转换，而且使用 Dirac LE 库效果很好。

# eclipse - Eclipse“HTML 预览”未显示我的更改

> ID：10611561
> 
> 赞同：1
> 
> 时间：2012-05-16T03:16:54.173
> 
> 标签：eclipse, html

第一次 Eclipse 用户在这里。我正在使用“用于 JavaScript Web 开发人员的 Eclipse IDE”、Indigo Service Release 2，并且在我的项目中包含了 EaselJS 库。本地主机上的 HTTP 预览是我的服务器。

我的问题是，当我对正在处理的 index.html 文件进行更改并选择“运行”时，HTTP 预览（在 Eclipse IDE 窗口的一部分中运行）不会显示更改后的 index.html 文件；它只是显示旧的。

如果我启动 Firefox 并为其提供相同的 URL（http://localhost:8080/static1/index.html，因为“static1”是我的项目名称），它会很好地加载新的 index.html。

是否有某种方法可以更改 HTTP 预览以重新加载 index.html？我怀疑这取决于某些缓存版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-25T16:44:58.570

转到 .html 文件，右键单击它-->用-->网页编辑器打开。. . 您在下方面板中输入的内容将直接反映在上方面板中。. . . :>

# linux - 调试嵌入式系统时如何发送“中断”？

> ID：10611564
> 
> 赞同：2
> 
> 时间：2012-05-16T03:17:23.557
> 
> 标签：linux, embedded

全部，

如您所知，在调试嵌入式系统时，我们通常通过 uart 控制台与目标设备通信。现在我想在linux内核中测试“Magic sysrq”功能，它需要向控制台驱动程序发送一个“break”。我发现“中断”是什么意思，似乎我需要将 TX 线的电气保持在低电平一段时间。
我的问题是如何从 APUE（unix 中的高级程序）发送这个中断“字符”，我必须调用函数“tcsendbreak”，这意味着我必须编写一个程序。如果我可以使用一些特殊的键来发送它，我会徘徊，比如 ^C 等。
不要使用“echo”x > /proc/sysrq-trigger“”，我知道，只是在其他方式上讨论:)

这是我的终端设置，我用 ckermit 与目标交谈。

```
stty -a < /dev/ttyUSB0 
speed 115200 baud; rows 0; columns 0; line = 0;
intr = ^C; quit = ^\; erase = ^?; kill = ^U; eof = ^D; eol = <undef>; eol2 = <undef>;
swtch = <undef>; start = ^Q; stop = ^S; susp = ^Z;
rprnt = ^R; werase = ^W; lnext = ^V; flush = ^O; min = 1; time = 0;
-parenb -parodd cs8 hupcl -cstopb cread clocal -crtscts
ignbrk -brkint ignpar -parmrk -inpck -istrip -inlcr -igncr -icrnl -ixon -ixoff -iuclc 
-ixany -imaxbel -iutf8
-opost -olcuc -ocrnl onlcr -onocr -onlret -ofill -ofdel nl0 cr0 tab0 bs0 vt0 ff0
-isig -icanon -iexten -echo echoe echok -echonl -noflsh -xcase -tostop -echoprt echoctl  
echoke 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T03:25:58.477

从[文档](http://www.math.utah.edu/lab/man/kermit.html)来看，它看起来`Control-\ B`会在 C-Kermit 中发送中断。

其他方法...

> 发送休息的一种方法是：
> 
> 1.  切换到较低的速度
> 2.  发送 Nul (0) 或 @ (40 [16] ) - 具有许多连续 0 位的字符将产生称为 BREAK 的帧错误。
> 3.  切换回原来的速度
> 
> 如您所述，另一种方法是使用`<termios.h>`线路控制功能。
> 
> ```
> #include <termios.h>
> 
> int tcsendbreak(int fildes, int duration); // "duration" is ignored 
> ```

# python - 基于选定的单选按钮在 Tkinter 中启动命令？

> ID：10611566
> 
> 赞同：3
> 
> 时间：2012-05-16T03:17:35.237
> 
> 标签：python, command, radio-button, tkinter

我想根据选择的单选按钮更改按钮的功能和文本。现在发生的情况是，一旦启动应用程序，两个命令就会同时运行，而不是基于选择了哪个单选按钮。

```
import tkinter as tk
import time

## Time variables for the Pomodoro
pomo = 60 * 25 ## 60 seconds times number of minutes
btime = 60 * 5 ## 60

class ExampleApp(tk.Tk):
    def __init__(self):
        tk.Tk.__init__(self)        
        self.label = tk.Label(self, text="25:00", width=10, font="Helvetica 20")
        self.label.pack()
        self.remaining = 0
        self.button = tk.Button(self)
        self.button.pack()

        pomocommand = self.button.configure(text="Pomodoro", state=tk.NORMAL, command= lambda: self.pomodoro(pomo)) #Switch back to the pomodoro timer
        breakcommand = self.button.configure(text="Break", state=tk.NORMAL, command= lambda: self.breaktime(btime)) #Switch to the break timer

        countercommand = self.button.configure(text="Counter", state=tk.NORMAL, command= print('cheese'))

        self.radvar = tk.IntVar()
        self.radvar.set('1')
        self.radio = tk.Radiobutton(self, text="Pomodoro", variable = self.radvar, value=1, indicatoron=0, command = pomocommand)
        self.radio.pack(anchor=tk.W)
        self.radio = tk.Radiobutton(self, text="Counter", variable = self.radvar, value=2, indicatoron=0, command = countercommand)
        self.radio.pack(side=tk.LEFT)

    def pomodoro(self, remaining = None):
        self.button.configure(state=tk.DISABLED)
        if remaining is not None:
            self.remaining = remaining

        if self.remaining <= 0:
            self.label.configure(text="Time's up!")
            breakcommand
        else:
            self.label.configure(text= time.strftime('%M:%S', time.gmtime(self.remaining))) #Integer to 'Minutes' and 'Seconds'
            self.remaining = self.remaining - 1
            self.after(1000, self.pomodoro)

    def breaktime(self, remaining = None):
        self.button.configure(state=tk.DISABLED)
        if remaining is not None:
            self.remaining = remaining

        if self.remaining <= 0:
            self.label.configure(text="Time's up!")
            pomocommand
        else:
            self.label.configure(text= time.strftime('%M:%S', time.gmtime(self.remaining))) #Integer to 'Minutes' and 'Seconds'
            self.remaining = self.remaining - 1
            self.after(1000, self.breaktime)

if __name__ == "__main__":
    app = ExampleApp()
    app.mainloop() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T08:26:38.377

您正在做的是调用函数`self.button.configure(...)`而不是传递**函数本身**。这是一个小例子：

```
def test(a):
    return a+4

callback_1 = test(2) # callback_1 will be (2+4) = 6, because you called the function. Notice the parens ()
callback_2 = test    # callback_2 will be the function test, you did not call it
# So, you can do:
callback_2(some_value) # will return (some_value + 4), here you called it 
```

基本上发生的事情是您正在使用第一个示例，因此该函数被调用 in `__init__`，并且应该在那里完成它应该做的事情。你想要的是类似于第二个的东西，因为 Tkinter 想要调用一些东西（一个函数或 any `callable`）。所以应该是函数`pomocommand`而`break`不是调用函数的结果。（你可以尝试做`print pomocommand`，看看它不是一个函数。）

解决方案是要么创建一个新函数，要么使用 lambdas。这里：

```
def pomocommand(self):
    pomocommand = self.button.configure(text="Pomodoro", state=tk.NORMAL, command= lambda: self.pomodoro(pomo)) #Switch back to the pomodoro timer

# and in your __init__ method:
def __init__(self):
    # ...
    self.radio = tk.Radiobutton(self, text="Pomodoro", variable = self.radvar, value=1, indicatoron=0, command = self.pomocommand)
    # ... 
```

你对另一个按钮做同样的事情。不建议在此处使用 lambda，因为它是一个很长的语句（self.button.configure 部分），因此您的代码将不可读。但我看到你正在使用 lambda，所以你可能会明白。

作为旁注，像你一样使用 lambda 时要小心。这`pomo`是一个全局变量，但如果不是，您可能会遇到麻烦。看到[这个问题](https://stackoverflow.com/questions/10452770/python-lambdas-binding-to-local-values)。（现在没关系，所以你可以忽略这个：D）。

# pdf - 将页面从 DOC 提取到新 DOC

> ID：10611570
> 
> 赞同：0
> 
> 时间：2012-05-16T03:19:34.983
> 
> 标签：pdf, ms-word, pdf-generation

我们正在开发一种打印服务器，允许用户上传 DOC 并通过 HP ePrint 打印出来。它需要支持页面提取。

我尝试使用宏（在 Adob​​e Acrobat Reader Pro 和 MS Word 的帮助下）将页面提取为 PDF。但事实证明，PDF 的大小可能比预期的要大。

有什么方法可以将页面（不丢失格式 - 例如 DOC 中的表格）从 DOC 提取到 DOC，以便大小可以近似为大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T08:17:12.870

这是一个困难的要求。听起来您一开始就遇到了 2 个问题（大型 PDF 和格式丢失）。您可能应该更多地说明“提取”的含义以及为什么 PDF 是您的解决方案的一部分，因为这与“上传和打印”和“文档到文档”完全不同。这样读者就会有更多的建议给你。

如果可能的话，我建议你尝试从不同的角度来解决这个问题，因为我怀疑你不太可能获得一个好的、有效的、稳定的结果。一种可能的方法是将 DOC 转换为 PDF，然后在打印之前使用 iText 或其他一些 PDF 库来处理 PDF。这实际上取决于您要实现的目标-提取/合并/转换的细节。

# css - 在 CSS 中严格设计带有圆形边缘的分隔导航

> ID：10611575
> 
> 赞同：0
> 
> 时间：2012-05-16T03:20:35.560
> 
> 标签：css

我的导航栏看起来像：

```
 <div id="navbar">
        <ul class="tabnavcenter">
          <li class="active"><a href="#tab1" data-toggle="tab">Test</a></li>
          <li class="aaron"><a href="#tab2" data-toggle="tab">Test</a></li>
          <li><a href="#tab3" data-toggle="tab">Test</a></li>
          <li><a href="#tab4" data-toggle="tab">Test</a></li>
          <li><a href="#tab5" data-toggle="tab">Test</a></li>
        </ul>
   </div> 
```

我的导航栏 CSS 看起来像：

```
ul.tabnavcenter    {

    background: #fff;
    padding:0px 0px;
    font-size:14px;
    font-weight:bold;
    color:#000;
    overflow:hidden;
    width:957px;
    background-image: -moz-linear-gradient(top, #cacaca, #848484);
    background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#cacaca), to(#848484));
                         }
  ul.tabnavcenter li {
    float:left;
    border-right: #DDDDDD 1px solid;
     list-style-type:none;
                }

    ul.tabnavcenter li.active  {
       background-image: -moz-linear-gradient(top, #cacaca, #4B4B4B);
       background-image: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#cacaca), to(#4B4B4B));

            }

   ul.tabnavcenter li:hover {
       background: #7D7D7D;
       cursor:pointer;
                            } 
```

有没有一种可能的方法可以仅使用 CSS 将圆角边缘添加到第一个和最后一个链接？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:24:04.787

我将您的代码放入 JS Fiddle 中，但不清楚您要如何处理最后一个链接（因为向右渐变，圆形边缘看起来很奇怪）。

[http://jsfiddle.net/Kk7vK/](http://jsfiddle.net/Kk7vK/)

> 有没有一种可能的方法可以仅使用 CSS 将圆角边缘添加到第一个和最后一个链接？

可以使用`:first-child`和选择第一个/最后一个`:last-child`。浏览器对 的支持很好（IE7+）`first-child`，对`last-child`.

**例子**

```
ul.tabnavcenter > LI:first-child{ /* do something different */ } 
```

CSS 选择器参考：[http ://www.w3.org/TR/selectors/](http://www.w3.org/TR/selectors/)

可以使用`border-radius`（使用特定于供应商的前缀，例如`-moz-border-radius`）来实现圆角边缘。Internet Explorer 支持`border-radius`从 IE9 开始（尽管有< IE9 的[polyfills](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-browser-Polyfills)）。

# iphone - UITableView 更新数据源

> ID：10611576
> 
> 赞同：0
> 
> 时间：2012-05-16T03:20:40.570
> 
> 标签：iphone, objective-c, ios

在 UIViewController 我有一个 UITableView 和一个 NSArray 数据列表，我试图用 [cellForRowAtIndexPath:indexPath] 中的数据列表填充表格视图。在 UIViewController 的 viewDidLoad 中，我写

```
 datalist = [LoadingService getDatalist] 
```

LoadingService 正在从网络加载数据以填充数据列表，getDatalist 消息返回数据列表。我知道在 viewdidload 中，datalist 可能没有数据，所以 UITableView 中没有显示数据。我的问题是，当数据列表更新时，如何在 UITableView 中显示数据列表的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T03:24:59.553

答：不要。

如果您没有数据，则显示微调器 (UIActivityIndi​​catorView) 或进度视图 (UIProgressView) 以至少表明您的应用正在处理，否则用户将对感知的延迟感到沮丧。然后，当您的函数返回可接受的数据时，`-reloadData`只要您是上述表格的代表，调用它就会在表格中显示您新更新的数组。许多服务器也一次全部返回响应，而不是分块。

如果您碰巧对一个输入使用多个响应，因为每个响应都加载到数组/数据源中，请调用 -reloadData 以给出“实时更新”的错觉。

# c# - SQLite 中的 NHibernate 和 Utc 日期时间

> ID：10611579
> 
> 赞同：1
> 
> 时间：2012-05-16T03:20:56.613
> 
> 标签：c#, sqlite, nhibernate

让我们考虑一下 NHibernate 中的以下简单类：

```
 <?xml version="1.0" encoding="utf-8" ?>
    <hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
       assembly="MyTests.Tests"
       namespace="MyTests.Tests">
    <class name="TestClass" table="TestTable" dynamic-update="true">
    <id name="Id" column="Id" type="UInt64" unsaved-value="0">
    <generator class="native" />
    </id>
    <property name="Date1" type="UtcDateTime"></property>
    </class>
    </hibernate-mapping> 
```

该类定义如下。

```
public class TestClass  {
    virtual public UInt64 Id { get; set; }
    virtual public DateTime? Date1 { get; set; }
} 
```

以下用例在针对 MySql 和 SQLite 执行时会产生不同的结果。

```
 [Test]
    public void Test1() {
        //Get Now without Milliseconds
        DateTime now = DateTime.UtcNow;
        now = new DateTime(now.Ticks - (now.Ticks % TimeSpan.TicksPerSecond), now.Kind);

        TestClass tc1 = new TestClass() { Date1 = now };
        using(ISession s = NewSession(c))
        using(ITransaction tx = s.BeginTransaction()) {
            s.Save(tc1);

            tx.Commit();

        }

        using(ISession s = NewSession(c))
        using(ITransaction tx = s.BeginTransaction()) {
            TestClass tc2 = s.Load<TestClass>(tc1.Id);
            Assert.IsNotNull(tc2);

            Assert.AreEqual(DateTimeKind.Utc, tc1.Date1.Value.Kind, "Checking kinds of tc1");
            Assert.AreEqual(tc1.Date1.Value.Kind, tc2.Date1.Value.Kind, "Comparing Kinds");

            Assert.AreEqual(now, tc2.Date1, "Comparing datetime values");
        }   
    } 
```

当使用的数据库是 SQLite 时，最后一个断言失败。

当我查看 SQLite 文件时，我可以看到日期是正确的（UTC 值）。

当它被读回时，它是用 DateTimeKind.Utc 读取的，但是该*值*是本地时间。

如果我使用 MySql，则不会发生此问题。

SQLite 中的表由 NHibernate 使用 CreateSchema 创建，并由 SQLite 管理员报告为

```
CREATE TABLE TestTable (Id  integer primary key autoincrement, Date1 DATETIME) 
```

尊敬的大师，您知道问题和解决方案是什么吗？这似乎是一个有人必须以前见过的问题......

谢谢蒂梅克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-28T18:54:42.707

我知道这是一个老问题，但答案可能对其他人有所帮助......如果您使用的是[System.Data.SQLite](http://system.data.sqlite.org)提供程序，您只需要`DateTimeKind=Utc`在连接字符串中指定。日期现在将被读取为 UTC。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T06:40:48.657

我对 sqlite 和 sql server 有类似的问题。我将所有 DateTime.Kind 更改为未指定，然后它不会更改它。我不确定这是否是我这边的错误，也没有时间进一步分析它。[如果您可以隔离问题并证明它是一个错误，那么如果您在错误跟踪器](https://nhibernate.jira.com/secure/Dashboard.jspa)中报告它会很棒。

# http - apache2/Ubuntu10.10 端口 8080 无响应

> ID：10611580
> 
> 赞同：0
> 
> 时间：2012-05-16T03:21:03.153
> 
> 标签：http, apache2, port, ubuntu-10.10

我家有一台运行 Ubuntu 10.10 的计算机。我正在尝试制作服务器并托管我自己的网站，并且我正在运行 LAMP（Linux、Apache、MySql、PHP）服务器。但是我的 IPS 阻止了端口 80 上的传入流量。为了解决这个问题，除了端口 80 之外，我希望我的服务器从端口 8080 接收 HTTP 请求。但是在我尝试将端口 8080 添加到接受的端口文件后，我的浏览器无法访问它。它显示“mywebsite.com 上的服务器响应时间过长。”。有谁知道为什么它超时并且不返回网页，或者我该如何解决这个问题？这是我到目前为止所做的：

port.conf 文件包含：

```
NameVirtualHost *:80
Listen 80
Listen 8080 
```

apache2.conf 文件包含：

```
# Include the virtual host configurations:
Include sites-enabled/
NameVirtualHost *:80
NameVirtualHost *:8080 
```

站点可用/默认文件包含：

```
<VirtualHost *:80 *:8080>
        ServerAdmin webmaster@localhost 
```

最后我重新启动了apache：

> $: /etc/init.d/apache2 重启

据我所知，所有这些都应该为 HTTP 请求添加端口 8080。当我在网络浏览器中输入“localhost”或“localhost:8080”时，它会返回我的网站。如果我输入“mysite.com”或“mysite.com:80”，该站点也可以正常工作。但是当我搜索“mysite.com:8080”时，我的网站无法正常工作；而是超时。“mysite.com:80”工作的原因是因为我从本地网络中访问该站点，所以我不需要通过调制解调器，它会阻塞端口 80。有谁知道为什么这不起作用？

修复：我很笨，忘记在我的 Ubuntu 防火墙上可接受的端口列表中添加端口 8080。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:54:19.870

你有没有用wireshark或类似的东西看过请求？localhost 将通过环回设备，我猜当您请求 mysite.com 时，请求将通过真实的网络设备发出。检查请求是否再次从您的网络返回 - 端口 8080 可能在其他地方被阻止。

# java - Java 2d 游戏不使用平铺地图

> ID：10611584
> 
> 赞同：1
> 
> 时间：2012-05-16T03:21:35.827
> 
> 标签：java, slick2d

我决定用 Java 制作一个 2d 游戏（使用 slick2d 库和 MarteEngine），我尝试在没有平铺地图的情况下完成它。如果没有平铺地图，我即将完成的任务似乎将非常困难。这些任务是路径和碰撞（建筑物和玩家/NPC之间）。

轻松实现寻路和碰撞系统几乎是不可能的吗？我想我总是可以在游戏中手动创建一个网格，但考虑到我必须移动它，因为我有一个功能相机，这可能会变得有点混乱。

此外，我所说的碰撞是指单元相互进入并成为一个单元。我想这可以归类为路径，但我没有解决方案来修复它们重叠。

任何想法表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T03:27:11.330

许多游戏仍然将地图划分为图块，即使它不是基于图块的游戏。

原因是您可以通过检查对象是否与其当前图块或任何相邻图块中的任何对象重叠来进行碰撞检测。只要您的对象不大于瓷砖，这种碰撞检测方案就可以保证解决所有可能的碰撞。

**编辑**

如果您有不基于图块的现有图形，则仍然值得使用这种“虚拟”网格进行碰撞检测等。如果您想检测碰撞，可以将特定网格方块标记为完全或部分“阻塞”地图特征等。

# prolog - 获取每个集合的总和为 X 的集合列表

> ID：10611585
> 
> 赞同：3
> 
> 时间：2012-05-16T03:21:51.640
> 
> 标签：prolog, clpfd

我试图弄清楚如何生成一个集合列表，其中每个集合的长度为 N，每个集合的总和为 X。

我找到了这段代码：

```
num_split(0,[]).
num_split(N, [X | List]):-
   between(1,N,X),
   plus(X,Y,N),
   num_split(Y,List). 
```

我可以使用它来获取总和 X 的集合列表：

```
num_split(6,List),length(List,5).
List = [1, 1, 1, 1, 2] ;
List = [1, 1, 1, 2, 1] ;
List = [1, 1, 2, 1, 1] ;
List = [1, 2, 1, 1, 1] ;
List = [2, 1, 1, 1, 1] ;
false. 
```

问题是这些都是排列，我正在寻找组合。我正在寻找的输出应该是这样的`get_combos(Sum,Length,List)`：

```
get_combos(6,2,List).
List = [5,1];
List = [4,2];
List = [3,3];
false. 
```

任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T07:04:58.523

如果您有权访问[CLP(FD)](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.7%27,swi%28%27/doc/Manual/clpfd.html%27%29%29)库，则可以使用以下代码：

```
:- [library(clpfd)].

get_combos(Sum, Length, List) :-
    length(List, Length),
    List ins 1 .. Sum,
%   all_distinct(List), not really useful here
    sum(List, #=, Sum),
    chain(List, #<),
    label(List). 
```

测试：

```
?- get_combos(10,3,L).
L = [1, 2, 7] ;
L = [1, 3, 6] ;
L = [1, 4, 5] ;
L = [2, 3, 5] ; 
```

也许我误解了你的问题。使用这个链

```
...
chain(List, #=<),
.... 
```

获取可能的重复值：

```
?- get_combos(10,3,L).
L = [1, 1, 8] ;
L = [1, 2, 7] ;
L = [1, 3, 6] ;
L = [1, 4, 5] ;
L = [2, 2, 6] ;
L = [2, 3, 5] ;
L = [2, 4, 4] ;
L = [3, 3, 4] ;
false. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T03:41:55.143

在数组中的连续值之间强制执行“相等或更大”的限制。

您可以将其添加为另一个谓词：

```
is_combination([]).
is_combination([_]).
is_combination([A,B|List]) :- A =< B, is_combination([B|List]).

get_combos(Sum, Length, List) :-
    num_split(Sum, Length, List),
    is_combination(List). 
```

不幸的是，在 num_split/3 末尾添加它并不一定会提高其性能，因此将其直接添加到算法中会稍微好一点：

```
get_combos(_, 0, []).
get_combos(Sum, 1, [Sum]).
get_combos(Sum, Length, [A, B|List]) :-
    between(1, Sum, A),
    plus(A, NextSum, Sum),
    plus(1, NextLength, Length),
    get_combos(NextSum, NextLength, [B|List]),
    A =< B. 
```

我不确定这可以获得多少性能，因为比较必须在递归之后进行，因为小于或等于运算符 (=<) 需要完全实例化两个操作数才能使其工作。

# javascript - 函数写入（消息）不起作用

> ID：10611590
> 
> 赞同：1
> 
> 时间：2012-05-16T03:22:40.467
> 
> 标签：javascript

我正在学习 PluralSight JavaScript 基础课程，他将此代码输入到 jsbin (jsbin.com) 的 JavaScript 窗口中

```
function write(message) {
  document.getElementById('message').innerHTML += message + '<br/>';
}

var streetNumber = 49;

var streetName = "Brunswick";

write(typeof streetNumber + " " + streetNumber);

write(typeof streetName + " " + streetName); 
```

当他预览时，它会写出类型和值。该视频已有一年之久，现在 jsbin 有一个渲染（不是预览）按钮。当我输入上面的代码并渲染时，我得到一个空白屏幕。

我尝试将代码粘贴到 .html 文件中

```
<!DOCTYPE html>
<html>

<head>
<!--<meta charset=utf-8 />-->
<title>JS Test</title>

</head>
<body>
  <p id="hello">Hello World</p>
<script>
function write(message) {
  document.getElementById('message').innerHTML += message + '<br/>';
}

var streetNumber = 49;

var streetName = "Brunswick"';

write(typeof streetNumber + " " + streetNumber);

write(typeof streetName + " " + streetName);

</script>
</body>
</html> 
```

然后在 IE9 中打开文件，最新版本的 Chrome、Firefox、Safari 和 Opera（我的操作系统是 Win7 Ult）。它们都显示 Hello World，仅此而已。我可能在这里遗漏了一些非常简单的东西，有人可以帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T03:26:27.750

您没有消息元素。`#hello`将元素更改为`#message`.

```
<p id="hello">Hello World</p> 
```

对此

```
<p id="message">Hello World</p> 
```

这是`getElementById`代码有地方打印输出所需要的。如果没有具有请求 ID 的元素，则不会出现任何内容，因此不会打印任何内容。

您也有语法错误：

```
/*                          v----- This little guy here doesn't belong. */
var streetName = "Brunswick"'; 
```

请注意此字符串末尾的匹配单引号。删除它，你应该很高兴：

# php - 如何格式化表格以在 PHP 中显示图像

> ID：10611592
> 
> 赞同：0
> 
> 时间：2012-05-16T03:23:47.937
> 
> 标签：php, image, loops, foreach, html-table

我有一个数组中的图像，我希望它们显示在一个有**3 列**的表中！

很明显，在 HTML 中，它就像：

```
<table>
    <tr>
        <td><img src="image1.jpg"></td>
        <td><img src="image2.jpg"></td>
        <td><img src="image3.jpg"></td>
    </tr>
    <!-- and so on... -->
</table> 
```

所以我希望它用 PHP 打印出来，但问题是代码。

我的代码是这样的：

```
 $photos = array(     "image1",
                        "image2",
                        "image3",
                        "image4",
                        "image5",
            );
    foreach ($photos as $photo) {
        $i = 0;
        if ($i < 3) {
            echo '<td><center><img src="'.$photo.'.jpg"></td>';
            $i++;
        } elseif ($i == 3) {
            echo '</tr><tr>';
            $i = 0;
        }
    } 
```

我不知道似乎是什么问题，每次我回显变量`$i`时，它都会像 11111111111111111111111111111111111111111111 一样回显。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T03:26:39.060

改变这个

```
foreach ($photos as $photo) {
        $i = 0; 
```

到

```
$i = 0;
foreach ($photos as $photo) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T03:26:42.453

为什么 $i 在 foreach 循环中？应该是这个原因。$i 在每个循环周期开始时被初始化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T04:03:51.497

尝试`display:inline-block;`在 css 中代替。这很好用。

这是一个例子......

```
<img src="image1.jpg" style="display:inline-block;>
<img src="image2.jpg" style="display:inline-block;>
<img src="image3.jpg" style="display:inline-block;> 
```

您甚至可以询问是否要在图像中添加文本或其他内容...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T04:31:28.663

我发现对这种事情使用 array_chunk 更优雅。

```
$chunks = array_chunk($photos, 3);
foreach ($chunks as $chunk)
{
    echo '<tr>';
    foreach ($chunk as $photo)
    {
        echo '<td><img src="', $photo, '.jpg" /></td>';
    }
    echo '</tr>';
} 
```

另外，不要使用“中心”标签，它已被弃用。使用 CSS 对齐内容。

此外，严格来说，这不是 HTML 表格的用途。当然他们工作得很好。实际上，它们比“正确”的解决方案效果更好，但它们是不正确的。不过，如果您只需要快速修复，请继续使用它们。这样做实际上不会导致任何问题。

# sql - 根据类别向记录添加数字的 SQL 代码

> ID：10611597
> 
> 赞同：0
> 
> 时间：2012-05-16T03:24:28.160
> 
> 标签：sql, sql-server, database, sql-server-2008, tsql

我有下表：

```
UserID      Sub     EID 
1       TA      1
1       TA      6
1       TA      2
2       TA      7
2       GB      7
3       TA      6
3       TA      1
3       GB      7
3       MX      7
3       MX      6 
```

我正在尝试运行一个 sql 语句，该语句将通过添加一个从 1 开始的数字来转换“Sub”字段，每次特定用户 ID 有重复项。下面是我应用该语句后表格的外观。我不知道如何实现这一点。我正在使用 SQL Server 2008。

```
UserID      Sub     EID
1       TA1     1
1       TA2     6
1       TA3     2
2       TA1     7
2       GB1     7
3       TA1     6
3       TA2     1
3       GB1     7
3       MX1     7
3       MX2     6 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T03:33:41.047

使用`ROW_NUMBER()OVER`. 此示例使用表变量：

```
DECLARE @t TABLE(UserID INT, Sub VARCHAR(5), EID INT);
INSERT INTO @t VALUES
(1,'TA',1)
, (1,'TA',6)
, (1,'TA',2)
, (2,'TA',7)
, (2,'GB',7)
, (3,'TA',6)
, (3,'TA',1)
, (3,'GB',7)
, (3,'MX',7)
, (3,'MX',6);

SELECT UserID
, Sub=Sub+CAST(ROW_NUMBER()OVER(PARTITION BY UserID, Sub ORDER BY UserID) AS VARCHAR(30))
, EID
FROM @t 
```

结果：

```
UserID      Sub                                 EID
----------- ----------------------------------- -----------
1           TA1                                 1
1           TA2                                 6
1           TA3                                 2
2           GB1                                 7
2           TA1                                 7
3           GB1                                 7
3           MX1                                 7
3           MX2                                 6
3           TA1                                 6
3           TA2                                 1 
```

# mysql - 在哪里存储静态信息，例如关于、历史、条款、联系信息

> ID：10611598
> 
> 赞同：0
> 
> 时间：2012-05-16T03:24:38.957
> 
> 标签：mysql, html, apache, web

人们在哪里存储不经常更改的静态网页信息？示例是关于页面、历史记录、术语、联系信息等。

人们通常只是将其编码到 html 中，还是应该将其存储在数据库中？

你们有什么感想？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:29:24.807

是的，他们通常只是在 HTML 模板/页面中对其进行编码。此类静态页面不需要数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T06:21:05.010

是的，它只是 HTML 文件或模板文件，不需要存储在数据库中，如果你想从后端编辑该页面，那么你必须存储在数据库中。

# javascript - JavaScript 等待 facebook 按钮加载

> ID：10611600
> 
> 赞同：0
> 
> 时间：2012-05-16T03:24:57.557
> 
> 标签：javascript, facebook

我的网站上有一个 facebook 按钮（通过 XFBML 和他们的 JS SDK 实现），我需要根据它的大小动态定位它（我必须找出它的宽度/高度）。

问题是，window.load 对此不起作用，因为按钮是异步加载的（我认为这是原因）。由于这个原因，按钮最终出现在错误的位置（JS 在错误的渲染阶段获取高度/宽度）。

仅在呈现 facebook 按钮后如何调用函数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:30:34.043

在`xfbml.rende`小部件呈现后调用：http: [//developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/](http://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)

# c++ - 在 C++ Builder XE2 中使用 TDictionary

> ID：10611606
> 
> 赞同：3
> 
> 时间：2012-05-16T03:26:10.497
> 
> 标签：c++, dictionary, c++builder, c++builder-xe2

目前我想`TDitionary`在 C++ Builder XE2中使用

阅读[文档](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Generics.Collections.TDictionary)后，我认为这应该很容易，但我什至无法创建`TDictionary`对象...

我的代码：

```
#include <vcl.h>
#pragma hdrstop
#include <Generics.collections.hpp>
#include "TDictionaryTest.h"

#pragma package(smart_init)
#pragma resource "*.dfm"
TForm2 *Form2;

void __fastcall TForm2::FormCreate(TObject *Sender)
{
    TDictionary__2 <String, String> *Dir = new  TDictionary__2<String, String>(0);
    delete Dir;
} 
```

错误信息：

```
[ILINK32 Error] Error: Unresolved external '__fastcall           System::Generics::Collections::TDictionary__2<System::UnicodeString,   System::UnicodeString>::~TDictionary__2<System::UnicodeString, System::UnicodeString>()'  referenced from ...\PRACTICE\C++\WIN32\DEBUG\TDICTIONARYTEST.OBJ
[ILINK32 Error] Error: Unresolved external '__fastcall System::Generics::Collections::TEnumerable__1<System::Generics::Collections::TPair__2<System::UnicodeString, System::UnicodeString> >::~TEnumerable__1<System::Generics::Collections::TPair__2<System::UnicodeString, System::UnicodeString> >()' referenced from ...\PRACTICE\C++\WIN32\DEBUG\TDICTIONARYTEST.OBJ
[ILINK32 Error] Error: Unresolved external 'System::Generics::Collections::TDictionary__2<System::UnicodeString, System::UnicodeString>::' referenced from ...\PRACTICE\C++\WIN32\DEBUG\TDICTIONARYTEST.OBJ
[ILINK32 Error] Error: Unresolved external '__fastcall System::Generics::Collections::TDictionary__2<System::UnicodeString, System::UnicodeString>::TDictionary__2<System::UnicodeString, System::UnicodeString>(int)' referenced from ...\PRACTICE\C++\WIN32\DEBUG\TDICTIONARYTEST.OBJ
[ILINK32 Error] Error: Unable to perform link 
```

有人有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T18:23:39.917

就像@mhtaqia 所说，C++ 还不能实例化 Delphi 的泛型类，只有在 Delphi 代码创建它们时才使用它们。对于 C++ 代码，您应该改用 STL `std::map`：

```
#include <map> 

void __fastcall TForm2::FormCreate(TObject *Sender) 
{ 
    std::map<String, String> *Dir = new std::map<String, String>; 
    delete Dir; 
} 
```

或者：

```
#include <map> 

void __fastcall TForm2::FormCreate(TObject *Sender) 
{ 
    std::map<String, String> Dir; 
} 
```

附带说明：永远**不要**在 C++ 中使用`TForm::OnCreate`and`TForm::OnDestroy`事件。它们是 Delphi 习惯用法，可以在 C++ 中产生非法行为，因为它们可以分别在派生构造函数之前和派生析构函数之后触发。请改用实际的构造函数/析构函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T06:36:51.073

`TDictionary`仅用于访问 Delphi 变量和字段。您不能在 C++ 代码中使用和实例化它。模板类在完全定义在头文件中时可用。

# c# - 在循环中检查文本框的有效输入或尝试 catch c#

> ID：10611615
> 
> 赞同：0
> 
> 时间：2012-05-16T03:26:49.427
> 
> 标签：c#, forms, exception-handling

我在验证用户输入时遇到问题，我有以下循环，它肯定会捕获它，但是当循环再次开始时，用户没有机会输入不同的值，所以值是相同的，只是创建了一个无限循环。

```
 private void guess_Click(object sender, EventArgs e)
    {

        int guessInt = 0;

        bool pass = false;
        int number;
        while (pass == false)
        {
            if (guessInput.Text != "")
            {
                pass = Int32.TryParse(guessInput.Text, out number);
                if (pass)
                {
                    guessInt = number;
                }
                else
                {
                    MessageBox.Show("You did not enter an integer, please enter a integer", "Invalid Values", MessageBoxButtons.OK, MessageBoxIcon.Error);
                    guessInput.Text = "";
                }
            }
            else MessageBox.Show("You did not enter anything, please enter a integer", "Invalid Values", MessageBoxButtons.OK, MessageBoxIcon.Error);
        }
        guess.Enabled = false;
        next_Guess.Enabled = true;

        if (guessInt == randomArray[x])
        {
            result.Text = ("You Win! The correct number was " + randomArray[x]);
            right += 1;
            correctAnswers.Text = right.ToString();

        }
        else
        {
            result.Text = ("Sorry you lose, the number is " + randomArray[x]);
            wrong += 1;
            incorrectAnswers.Text = wrong.ToString();

        }

        hintLabel.Enabled = false;
        x++;
    } 
```

那么用户如何有机会重新输入一个值并重新开始循环，或者我应该在这里使用 try/catch 尝试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:47:47.430

```
int number;
if(string.IsNullOrEmpty(guessInput.Text))
{
  MessageBox.Show("You did not enter an integer, please enter a integer", "Invalid Values", MessageBoxButtons.OK, MessageBoxIcon.Error);
  return;
}
if(Int32.TryParse(guessInput.Text, out number))
{
  guessInt = number; 
}else
{
  MessageBox.Show("You did not enter an integer, please enter a integer", "Invalid Values",      MessageBoxButtons.OK, MessageBoxIcon.Error);
   guessInput.Text = "";
   return;
}

// when come to here you have guessInt, process it 

   guess.Enabled = false;
    next_Guess.Enabled = true;

    if (guessInt == randomArray[x])
    {
        result.Text = ("You Win! The correct number was " + randomArray[x]);
        right += 1;
        correctAnswers.Text = right.ToString();

    }
    else
    {
        result.Text = ("Sorry you lose, the number is " + randomArray[x]);
        wrong += 1;
        incorrectAnswers.Text = wrong.ToString();

    }

    hintLabel.Enabled = false;
    x++; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T03:32:51.203

看来你不需要一段时间：

```
 int number;

          if(guessInput.Text != "")
          {
              var pass = Int32.TryParse(guessInput.Text, out number);
              if (pass)
              {
                 guessInt = number;        
              }
              else
              {
                 MessageBox.Show("You did not enter an integer, please enter a integer", "Invalid Values", MessageBoxButtons.OK, MessageBoxIcon.Error);
                 guessInput.Text = "";
              }
           } 
```

如果您还想验证空值，只需删除第一个 if：

```
 int number;

          var pass = Int32.TryParse(guessInput.Text, out number);
          if (pass)
          {
             guessInt = number;        
          }
          else               {
             MessageBox.Show("You did not enter an integer, please enter a integer", "Invalid Values", MessageBoxButtons.OK, MessageBoxIcon.Error);
             guessInput.Text = "";
          } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T03:36:47.530

一旦用户在消息框上单击“确定”，循环将再次运行，而不给用户更改值的机会。

您需要做的是仅在他们输入猜测时运行验证。也就是说，与其有一个循环，不如有一些由事件（例如单击按钮）或由 winforms 提供的验证回调触发的代码。

这是我发现的关于使用验证回调的示例和简短文章：http: [//blog.scosby.com/post/2010/02/11/Validation-in-Windows-Forms.aspx](http://blog.scosby.com/post/2010/02/11/Validation-in-Windows-Forms.aspx)

在该示例中，请参见：

*   `private void buttonSave_Click`- 这是您放置消息框的地方，并且

*   `private void textBoxNumber_Validating`- 这是您放置`pass = Int32.TryParse(guessInput.Text, out number)...`代码的地方。

# mysql - mysql错误“无法通过套接字'/var/run/mysqld/mysqld.sock连接到本地MySQL服务器”

> ID：10611619
> 
> 赞同：2
> 
> 时间：2012-05-16T03:27:51.933
> 
> 标签：mysql, command-line, command-line-interface

我在访问我的数据库时遇到问题，

当我尝试运行`mysql -h localhost -u root -p` 并输入密码时

我收到这种错误

```
ERROR 2002 (HY000): Can't connect to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) 
```

想知道为什么我会得到这个。

当我输入`mysql --version`

我没有错误并收到此消息：`mysql Ver 14.14 Distrib 5.5.22, for debian-linux-gnu (x86_64) using readline 6.2`

但是当我输入这个命令时，`mysql -v`我得到一个错误，上面写着：

`ERROR 2002 (HY000): Can't connect to local MySQL server through socket /var/run/mysqld/mysqld.sock' (2)`

我想`mysql --version`并且`mysql -v`是desame

任何帮助都感激不尽。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:48:14.943

当 MySQL 服务未运行时，我收到该错误。你在什么操作系统上？我在 Debian GNU/Linux 上，所以我用

```
# service mysql start 
```

但其他系统可能会使用不同的东西，比如`start`or`invoke-rc.d`或什么东西。

# javascript - 单击锚点时显示更多div？

> ID：10611622
> 
> 赞同：1
> 
> 时间：2012-05-16T03:28:35.207
> 
> 标签：javascript, jquery, html, css

我什至不确定这会被称为什么，所以我不知道要寻找什么，但我想要做的是有一个固定的按钮，当它被点击时会加载更多的 div。

我有 15 个带有“box”类的 div，我只想显示 3 个带有“box”类的 div。在显示所有 15 个 div 之前，如何再显示 3 个 div？

```
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>

<a href="#" title="">Load 3 More boxes</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:32:07.200

您可能应该在锚点上添加一个`id`或一个`class`，以便将其与同一页面上的其他锚点区分开来。毕竟，我们不希望所有这些都添加新`div`元素：

```
// Handle the click event of our anchor
$("a.addMore").on("click", function(e){
  // Show the next three hidden .box elements immediately
  $(".box:hidden:lt(3)").show(0, function(){
    // If there are no more hidden elements, remove our link
    !$(".box:hidden").length && $(e.target).remove(); 
  });
// Trigger a click to load in our first three
}).trigger("click"); 
```

演示：http: [//jsbin.com/amituh/5/edit](http://jsbin.com/amituh/5/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:43:30.560

```
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div class="box">text text text text</div>
<div id="garage" style="display:none">
  <div class="box">text text text text</div>
  <div class="box">text text text text</div>
  <div class="box">text text text text</div>
  <div class="box">text text text text</div>
  <div class="box">text text text text</div>
  <div class="box">text text text text</div>
  <div class="box">text text text text</div>
</div>

<a href="javascript:next3();" title="">Load 3 More boxes</a>

function next3() {
  var box = document.getElementById("garage");
  if(box.firstElementChild) box.parentNode.insertBefore(box.firstElementChild, box);
  if(box.firstElementChild) box.parentNode.insertBefore(box.firstElementChild, box);
  if(box.firstElementChild) box.parentNode.insertBefore(box.firstElementChild, box);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T03:34:41.087

看到这个小提琴（更新删除锚）：http: [//jsfiddle.net/MaqYL/5/](http://jsfiddle.net/MaqYL/5/)

最初：

```
 $(".box:gt(2)").hide(); 
```

点击锚点：

```
$("a").click(function(){
    var hiddens = $(".box:hidden");
    hiddens.slice(0,3).show();
    if(hiddens.length <= 3)
    {
        $(this).remove();
    }    
}); 
```

为了防止其他锚这样做，你最好给`id`你的锚。

# jquery - JQuery Datepicker 应该只显示日期

> ID：10611623
> 
> 赞同：4
> 
> 时间：2012-05-16T03:28:47.643
> 
> 标签：jquery, jquery-ui, jquery-ui-datepicker

我只想在文本上显示日期而不显示时间，但即使我设置了日期选择器的格式，它似乎也不起作用。而且我不想在日期选择器中显示时间。请看下图，我想删除**黄色突出显示**的。

```
var defaultFormat = { dateFormat: 'mm/dd/yy' };
$.datepicker.setDefaults(defaultFormat);
$('#EM_Date').datetimepicker({
    showHour: false,
    showMinute: false
}); 
```

![在此处输入图像描述](../Images/b335185c81bdeb7927d347b213d1bc09.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T03:41:08.017

使用 $( "#EM_Date" ).datepicker();​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-23T07:01:59.593

使用这种格式，

```
$('.picker').datetimepicker({ dateFormat:dateFormat: 'mm/dd/yy'  '', timeFormat: 'hh:mm tt', dateonly:true }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-13T18:46:06.280

**功能：**

```
<script type="text/javascript">
$(function () {
$('.datePicker').datepicker({ dateFormat: 'yy-mm-dd' });
});
</script> 
```

**输入字段**

```
<input type="text" name="date" id="date" class="datePicker" /> 
```

**示例**（日期格式*dd/mm/yy*）：

![在此处输入图像描述](../Images/769ff09f5ba3a262dd8a96d0ba30d3ca.png)

# android - 无法在 Android 2.2 上播放 RTSP 流（3gp 编码）

> ID：10611627
> 
> 赞同：2
> 
> 时间：2012-05-16T03:29:43.410
> 
> 标签：android, stream, rtsp

我尝试播放 RTSP 流“rtsp://217.146.95.166:554/playlist/ch27yqcif.3gp”（此流在 KM Player 上测试并且它是活动的）并且还尝试从“m.youtube.com”播放，但是不是成功。当程序运行时，它给我一个错误“抱歉这个视频无法播放”。

这是我的代码。

```
 VideoView videoView = (VideoView) findViewById(R.id.myvideoView);
 MediaController mediaController = new MediaController(this);
 mediaController.setAnchorView(videoView);
 Uri video = Uri.parse("rtsp://217.146.95.166:554/playlist/ch27yqcif.3gp");

                 videoView.setMediaController(mediaController);
                 videoView.setVideoURI(video);
                 videoView.start(); 
```

该应用程序运行并下载数据一段时间并给我错误“抱歉无法播放此视频”

当我尝试这个 http 链接时，它播放得很好。 [http://3gpvideos.org/wp-content/uploads/2012/13/Ishq%20Mein%20Ruswaa%20Full%20Song.3gp](http://3gpvideos.org/wp-content/uploads/2012/13/Ishq%20Mein%20Ruswaa%20Full%20Song.3gp)

我尝试了很多不同的 RTSP 链接和格式，但都没有成功。这段代码有什么问题。

日志详细信息..

```
05-16 08:52:38.633: D/MediaPlayer(275): Couldn't open file on client side, trying server side
05-16 08:53:52.272: W/MediaPlayer(275): info/warning (1, 26)
05-16 08:53:52.272: I/MediaPlayer(275): Info (1,26)
05-16 08:53:52.313: E/MediaPlayer(275): error (1, -1)
05-16 08:53:52.313: E/MediaPlayer(275): Error (1,-1)
05-16 08:53:52.313: D/VideoView(275): Error: 1,-1 
```

# android - Android TextView 向下偏移

> ID：10611641
> 
> 赞同：5
> 
> 时间：2012-05-16T03:32:10.090
> 
> 标签：android, android-layout, textview, gravity

我在 LinearLayout 中有一个带有两个按钮和一个 TextView 的活动。我的 TextView 向下偏移，文本不适合框内。你能解释发生了什么吗？我认为它与填充有关，并且我已经阅读了一些关于 TextView 填充的危险的讨论，但这并不能解释为什么文本在底部被截断。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:background="#800080">

    <Button
        android:text="This"
        android:background="@drawable/button_red" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
    />
    <Button
        android:text="That"
        android:background="@drawable/button_green" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
    />
    <TextView 
        android:text="Copious amounts of text that overflows onto several lines on a small screen, causing the TextView to dangle below the buttons.  Why it does this I can't imagine.  I only hope someone can help me with this." 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#533f93"
    />
</LinearLayout> 
```

此代码产生此显示：

![用户界面](../Images/96c4697501f43f96963ff65c60b6f254.png)

紫色是LinearLayout，蓝色是TextView。如您所见，TextView 的顶部低于按钮的顶部，底部低于 LinearLayout 的底部。当我将文本添加到 TextView 时，LinearLayout 会适当增加它的高度，但是由于 TextView 是偏移的，所以我总是会丢失最后一行的底部。

我运行了 Hierarchy Viewer，它给了我这个线框：

![来自 Hierarchy Viewer 的线框图像](../Images/9813625992ba18ecf2b9b35da46e5416.png)

它显示了顶部的垂直偏移，但错过了 TextView 的底部。选择了 LinearLayout 的相同线框如下所示：

![来自 Hierarchy Viewer 的线框图像 - 已选择 LinearLayout](../Images/767354d7c5c503b8538897e0dcb73ef6.png)

根据 Hierarchy Viewer 的说法，按钮的顶部是 0，但 TextView 的顶部是 7。我尝试了各种修复，主要来自这个站点：

```
 android:paddingTop="0dp"
    android:background="@null"
    android:includeFontPadding="false" 
```

这些都没有解决我的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T03:54:28.970

将`android:baselineAligned`您的属性设置`LinearLayout`为`false`.

从文档：

> 当设置为**false**时，防止布局对齐其子项的基线。当孩子使用不同的重力值时，此属性特别有用。默认值为**true**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T04:53:07.210

将 Textview 的 layout_gravity 设置为 center_vertical

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="wrap_content" 
android:layout_height="wrap_content"
android:orientation="horizontal"
android:background="#800080">

<Button
    android:text="This"

    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
/>
<Button
    android:text="That"

    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
/>
<TextView 
    android:text="Copious amounts of text that overflows onto several lines on a small screen, causing the TextView to dangle below the buttons.  Why it does this I can't imagine.  I only hope someone can help me with this." 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#533f93"
android:layout_gravity="center_vertical"/>
</LinearLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T03:56:02.347

尝试像这样为 TextView 设置 layout_gravity：

```
<TextView 
    android:text="Copious amounts of text that overflows onto several lines on a small screen, causing the TextView to dangle below the buttons.  Why it does this I can't imagine.  I only hope someone can help me with this." 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#533f93"
    android:layout_gravity="top"
/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-18T08:07:33.730

如果您对多个 TextView 有此问题，您可以添加`android:gravity="center_vertical"`到`LinearLayout`

# azure - 有没有办法列出服务命名空间中依赖方应用程序的所有活动连接？

> ID：10611644
> 
> 赞同：0
> 
> 时间：2012-05-16T03:32:57.347
> 
> 标签：azure, servicebus

我们想列出给定领域的所有活动发件人和收件者。是否有任何 API 可用于查询服务总线以获取此信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:40:51.387

最近几个月，我们多次收到这个问题。在接下来的几个月中，我们将向服务总线添加更好的指标，而活动侦听器的数量是列表中排名靠前的计数器之一。发件人更难，因为这个数字非常不稳定。我们有一个规范的功能来提供跨多个仪表的趋势，并且发件人是一种趋势可能是显示流量外观的合理方式。

不幸的是，我无法提供更好的时间表。

克莱门斯

# php - html代码中str_replace时出错

> ID：10611645
> 
> 赞同：-2
> 
> 时间：2012-05-16T03:33:08.667
> 
> 标签：php

我有一个示例代码html：

```
$text = '<img src="abc.jpg" alt="abc" /> abc def ghi abc xyz';
echo str_replace('abc', 'has replace', $text); 
```

当我回显结果在标签`<img/>`中时，将“”替换`abc`为“ `has replace`”=>错误

如何当运行结果是：

```
<img src="abc.jpg" alt="abc" /> has replace def ghi has replace xyz 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T05:06:11.023

我有一个想法：

```
$k=0;
$arr = array();
$regex = '/(<img.*?\/>)/ism';
if(preg_match_all($regex, $text, $tmp)) {
   if(isset($tmp[0])) {             
      for($i = 0;$i < count($tmp[0]); $i++) {
         $arr[0][$k] = $tmp[0][$i];
         $arr[1][$k] = md5($tmp[0][$i]);
         $text = str_replace($arr[0][$k], $arr[1][$k], $text);
         $k++;
      }
   }
} 
```

然后你可以替换：

```
echo str_replace('abc', 'has replace', $text); 
```

现在的结果是： $text = '74d3ae3af91872413da1db45d88ddd4a abc def ghi abc xyz'; // img 已经是 md5

最后你可以：

```
for($i = 0;$i < $k; $i++) {
    $text   = str_replace($arr[1][$i], $arr[0][$i], $text);
} 
```

希望你会成功

# c# - 使用数据库内容递归地填充树

> ID：10611651
> 
> 赞同：0
> 
> 时间：2012-05-16T03:34:25.720
> 
> 标签：c#, data-structures, reference, tree, recursive-datastructures

我正在使用一个[使用 POCOs 的 ORM](https://github.com/ServiceStack/ServiceStack.OrmLite)。

每个表（类）都包含对其他表的引用。

```
public class Table1 {
    [AutoIncrement]
    public Int32 Id { get; set; }
    [Index(Unique = true)]
    public string FieldA { get; set; }
}

public Table2 {
    [AutoIncrement]
    public Int32 Id { get; set; }
    [Index(Unique = true)]
    public Table1 FieldA { get; set; }
    public int FieldB { get; set; }
}

public Table3 {
    [AutoIncrement]
    public Int32 Id { get; set; }
    [Index(Unique = true)]
    public List<Table2> FieldA { get; set; }
    [References(typeof(Table2))]
    public int Table2_id { get; set; }
} 
```

**我将如何填充 Table3 的树，它将引用的 Table2 和后续的 Table1 展开到子树中？**

感谢所有建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:48:15.633

可能是这样的吗？

```
var root = new {TopLevelNodes = Table3.Select(t3=> new {Id = t3.Table2_id, SubLevel = t3.FieldA.Select(t2=>new {t2.FieldA})})}; 
```

# symfony - 使用 Symfony2 和 Doctrine 的 PHP 复合设计模式

> ID：10611653
> 
> 赞同：1
> 
> 时间：2012-05-16T03:34:34.283
> 
> 标签：symfony, doctrine-orm, composite

有没有任何带有教义的[复合模式的例子？](http://en.wikipedia.org/wiki/Composite_pattern)[我的意思是使用Doctrine](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/index.html)注释的 PHP 源代码。

我可以在这里找到装饰器模式：http: [//docs.doctrine-project.org/projects/doctrine-orm/en/latest/cookbook/decorator-pattern.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/cookbook/decorator-pattern.html)但复合模式没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T17:44:04.803

您应该能够使用继承映射（请参阅[http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/inheritance-mapping.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/inheritance-mapping.html)）以及与你想要的类型（见[http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/association-mapping.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/association-mapping.html)）

# iphone - 返回错误布局后的admob单击

> ID：10611655
> 
> 赞同：0
> 
> 时间：2012-05-16T03:34:38.767
> 
> 标签：iphone, ios, cocos2d-iphone, admob

我使用 cocos2d 结合 AdMob ，正常我的应用程序运行良好，但点击广告并返回游戏后，布局错误，我的游戏是横向的！

涉及 AdMob 后情况会发生变化。AdMob 有一个广告类型“电影”。点击广告后，弹出全屏模式，播放电影，然后返回游戏。游戏变了，原来是横屏模式，从广告回来后好像是竖屏模式，而且游戏缩放了，一切都不好了。我试图`CCDirector`在从广告返回后更新视图控制器/，但它不起作用。

找到了一种解决方法：只需将设备旋转到对应的横向模式，一切都会恢复正常。

只是想知道是否有任何方法可以防止告诉客户手动旋转它？你以前遇到过这种情况吗？

```
_viewController = [[UIViewController alloc] init];
_viewController.view = [[CCDirector sharedDirector] openGLView];

_admobView = [[GADBannerView alloc] initWithAdSize:kGADAdSizeBanner];
_admobView.adUnitID = ADMOB_PUBLISHER_ID;
_admobView.delegate = self;

GADRequest *request = [GADRequest request];
request.testing = YES;

[_admobView setRootViewController:_viewController];
[_admobView loadRequest:request];

[_viewController.view addSubview:_admobView]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T05:04:08.667

我之前遇到过类似的问题，原因是我创建了一个新的`UIViewController`并将其设置`rootViewController`为 AdMob 视图 - 就像你正在做的那样：

```
_viewController = [[UIViewController alloc] init];
_viewController.view = [[CCDirector sharedDirector] openGLView];
...
[_admobView setRootViewController:_viewController]; 
```

这会导致从某种广告返回时出现布局问题。我现在在我的应用程序中所做的就像：

```
adMobView.rootViewController = [RootViewController sharedInstance];
[[[CCDirector sharedDirector] openGLView] addSubview:adMobView]; 
```

where`[RootViewController sharedInstance]`是一个类方法，它返回应用程序中的唯一实例`RootViewController`。详情请参考我对另一个问题的回答：[https ://stackoverflow.com/a/10222956/1241690](https://stackoverflow.com/a/10222956/1241690)

（对于 cocos2d 2.x，第二行应该是：

```
[[[CCDirector sharedDirector] view] addSubview:adMobView]; 
```

)

# java - 无法使用 Apache 从 Android 向 Django 网络服务器发出 http 请求

> ID：10611658
> 
> 赞同：0
> 
> 时间：2012-05-16T03:35:01.807
> 
> 标签：java, android, django, apache, http

我正在尝试向我的 django 网络服务器发出发布请求（通过浏览器访问时行为正确）

我的邮政编码：

```
 HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://23.23.237.174/save-item");

    try {
        // Add your data
        List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
        nameValuePairs.add(new BasicNameValuePair("user_email", WeShouldActivity.ACCOUNT_NAME));
        for (Field f : mData.keySet()) {
            nameValuePairs.add(new BasicNameValuePair(f.getName(), mData.get(f)));
        }
        httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

        // Execute HTTP Post Request
        HttpResponse response = httpclient.execute(httppost);
        Log.v("GETREFERRALSSERVICE", "backing up items");

    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        Log.v("GETREFERRALSSERVICE", e.getMessage());
    } catch (IOException e) {
        // TODO Auto-generated catch block
        Log.v("GETREFERRALSSERVICE", e.getMessage());
    } 
```

我在 apache2/access.log 中的完整错误（error.log 中没有显示任何内容）

```
174.253.199.12 - - [16/May/2012:03:25:15 +0000] "POST /save-item HTTP/1.1" 500 53055 "-" "Apache-HttpClient/UNAVAILABLE (java 1.4)" 
```

有谁知道这可能是什么/如何解决？

注意：这是一个错误。该请求没有通过我的视图，它在浏览器中使用完全相同的 url。我首先在视图中打印出请求，但 error.log 中没有显示任何内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-24T15:34:42.887

尝试这个：

```
HttpClient client = new DefaultHttpClient();    
client.getParams().setBooleanParameter("http.protocol.expect-continue", false); 
```

这解决了我的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T03:45:42.663

'Apache-HttpClient/UNAVAILABLE (java 1.4)' 只是 Android 用户代理字符串，而不是错误消息。服务器端有问题，你应该尝试通过添加日志等来调试它。服务器端是否需要身份验证？如果是这样，您可能缺少会话 cookie 等。

顺便说一句，由于您似乎添加了两个以上的项目，因此使用 new 确实没有意义，`ArrayList<NameValuePair>(2)`只需使用默认构造函数即可。

# android - Android：我如何解析这个混合的 json 响应

> ID：10611659
> 
> 赞同：0
> 
> 时间：2012-05-16T03:35:17.187
> 
> 标签：android, arrays, json, parsing, object

唯一可以保证始终存在的是 messagesByDate obj。名为“2012 年 5 月 15 日”的数组和对象是由服务器（无控制）根据该日期是否存在消息而生成的。

如果您注意到表示的第一个日期是一个数组，而其他日期是包含其他已编号对象的对象。

问题 1：我如何在不知道会出现什么日期的情况下解析这个？

问题 2：一些消息在数组中而不是在对象中。如何将它们全部放在一个 ArrayList 中。而是它是否在一个数组中，因为该数组并不总是在那里。

请任何帮助将不胜感激，因为我已经到最后一根头发了

谢谢。

```
{
"messagesByDate":{
  "15 May 2012":[
     {
        "id":"1383483367",
        "conversation_id":"274618561",
        "user_id":"4318264",
        "message":"ok will do",
        "date_sent":"1337133515",
        "date_sent_ago":"7 mins ago"
     },
     {
        "id":"1380222533",
        "conversation_id":"274618561",
        "user_id":"5159567",
        "message":"ok well hmu",
        "date_sent":"1337085122",
        "date_sent_ago":"13 hrs ago"
     },
     {
        "id":"1380172978",
        "conversation_id":"274618561",
        "user_id":"5159567",
        "message":"superhead",
        "date_sent":"1337083910",
        "date_sent_ago":"13 hrs ago"
     },
     {
        "id":"1380130860",
        "conversation_id":"274618561",
        "user_id":"5159567",
        "message":"you ready B",
        "date_sent":"1337082797",
        "date_sent_ago":"14 hrs ago"
     },
     {
        "id":"1378841432",
        "conversation_id":"274618561",
        "user_id":"5159567",
        "message":"hit my cell tho",
        "date_sent":"1337054524",
        "date_sent_ago":"22 hrs ago"
     },
     {
        "id":"1378836763",
        "conversation_id":"274618561",
        "user_id":"5159567",
        "message":"whats up baby",
        "date_sent":"1337054475",
        "date_sent_ago":"22 hrs ago"
     }
  ],
  "12 May 2012":{
     "6":{
        "id":"1362948558",
        "conversation_id":"274618561",
        "user_id":"4318264",
        "message":"ok ima text u",
        "date_sent":"1336819668",
        "date_sent_ago":"3 days ago"
     }
  },
  "11 May 2012":{
     "7":{
        "id":"1361356267",
        "conversation_id":"274618561",
        "user_id":"5159567",
        "message":"yea thats cool",
        "date_sent":"1336790738",
        "date_sent_ago":"3 days ago"
     },
     "8":{
        "id":"1357783913",
        "conversation_id":"274618561",
        "user_id":"5159567",
        "message":"sorry im here. would u like to exchange numebers instead?",
        "date_sent":"1336722533",
        "date_sent_ago":"4 days ago"
     },
     "9":{
        "id":"1357759262",
        "conversation_id":"274618561",
        "user_id":"5159567",
        "message":"hello?",
        "date_sent":"1336721851",
        "date_sent_ago":"4 days ago"
     }
     }
   }
} 
```

答案排序-有点

```
JSONObject dateHolder = r.getJSONObject("messagesByDate");
    Iterator holderItr = dateHolder.keys();

    while(holderItr.hasNext()){

        String thisdate = holderItr.next().toString();
        Object date = dateHolder.get(thisdate);

        if (date instanceof JSONArray) {
            System.out.println(thisdate+" is an ARRAY.");
            JSONArray jarray = (JSONArray) date;
            for(int x=0;x<jarray.length();x++){
                String msgId = jarray.getJSONObject(x).getString("id");
                String msgConvoId = jarray.getJSONObject(x).getString("conversation_id");
                String msgUserId = jarray.getJSONObject(x).getString("user_id");
                String msgBody = jarray.getJSONObject(x).getString("message");
                String msgDateSent = jarray.getJSONObject(x).getString("date_sent");
                String msgDateSentAgo = jarray.getJSONObject(x).getString("date_sent_ago");
                HashMap<String,String> temp = new HashMap<String,String>();
                temp.put("msgId",msgId);
                temp.put("msgUserId", msgUserId);
                temp.put("msgBody", msgBody);
                temp.put("msgDateSent", msgDateSent);
                temp.put("msgDateSentAgo", msgDateSentAgo);
                messages.add(temp);

            }
        } else {
            System.out.println(thisdate+" is an OBJECT.");
            JSONObject jobj = (JSONObject) date;
            Iterator insideDate = jobj.keys();
            while(insideDate.hasNext()){
                String number = insideDate.next().toString();
                System.out.println(number);
                String msgId = jobj.getJSONObject(number).getString("id");
                String msgConvoId = jobj.getJSONObject(number).getString("conversation_id");

                String msgUserId =jobj.getJSONObject(number).getString("user_id");

                String msgBody = jobj.getJSONObject(number).getString("message");

                String msgDateSent = jobj.getJSONObject(number).getString("date_sent");

                String msgDateSentAgo = jobj.getJSONObject(number).getString("date_sent_ago");
                HashMap<String,String> temp = new HashMap<String,String>();
                temp.put("msgId",msgId);
                temp.put("msgUserId", msgUserId);
                temp.put("msgBody", msgBody);
                temp.put("msgDateSent", msgDateSent);
                temp.put("msgDateSentAgo", msgDateSentAgo);
                messages.add(temp);

            }
        }
    } 
```

这为我提供了 HashMap 中的所有消息，并将其添加到 ArrayList 中，称为我想要的消息，但按日期排序。json按日期列出...有人知道是否有办法直接读取json吗？或者我的 WHILE 和 FOR 循环是否有问题？我可以按键对哈希图进行排序吗？我会用谷歌搜索...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:03:34.603

首先创建一个这样的类：

```
import java.util.LinkedList;
import android.util.Log;

public class Message{

    private LinkedList<String> id              = new LinkedList<String>();
    private LinkedList<String> conversation_id = new LinkedList<String>();
    private LinkedList<String> user_id     = new LinkedList<String>();
    private LinkedList<String> message     = new LinkedList<String>();
    private LinkedList<String> date_sent       = new LinkedList<String>();
    private LinkedList<String> date_sent_ago   = new LinkedList<String>();

    public LinkedList<String> getId() {
        return id;
    }

    public void setId(String id) {
        this.id.add(id);
    }

.
.
.
    // For checking response after you get info from server
    public void printContent() {
        for(String str : id)
            Log.i("Id>>>", str);
.
.
.
    }

} 
```

然后您需要在 onCreate() 中调用 server 添加以下代码：

```
 if(Manager.isOnline(this)) // Check Internet connection and if you find it then
            new MyAsyncTask().execute(); 
```

现在，您应该添加这个类：

```
public class MyAsyncTask extends AsyncTask<Void, Void, Boolean> {

        @Override
        protected void onPreExecute() {
            Log.i(TAG, "MyAsyncTask is about to start...");
            showProgressBar();
        }

        @Override
        protected Boolean doInBackground(Void... params) {
            boolean status = false; 

            // Get News items in json format
            msg = getMessageItems(); // msg is an instance of Message class define it as global variable.
            msg.printContent(); // Check result in logcat

            if(msg != null)
                status = true;

            return status;
        }

        @Override
        protected void onPostExecute(Boolean result) {
            Log.i(TAG, "MyAsyncTask finished its task. Data returned to caller.");

            if(result)
                displayData();

            hideProgressBar();
        }
    } 
```

在这里，我们将连接到服务器，获取 Json 数据并解析它。

```
private Menu getMenuItems() {
    Message mMessage = new Message ();
    String response = null;
    String connection = **YOUR_URL**;

    try {
        URL url = new URL(connection);
        HttpURLConnection conn = (HttpURLConnection) url.openConnection();

        int responseCode = conn.getResponseCode();
        Log.i(TAG, "Try to open: " + connection);
        Log.i(TAG, "Response code is: " + responseCode);
        if (responseCode == HttpURLConnection.HTTP_OK) {
            BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));
            if (in != null) {
                StringBuilder strBuilder = new StringBuilder();
                // Read character by character              
                int ch = 0;
                while ((ch = in.read()) != -1)
                    strBuilder.append((char) ch);

                // get returned message and show it
                response = strBuilder.toString();
                Log.i("JSON returned by server:", response);

                JSONObject jObject = new JSONObject(response);
                JSONArray contestantObjects = jObject.getJSONArray("**messagesByDate**");
                for(int i=0; i<contestantObjects.length(); i++){
                    mMessage .setId(contestantObjects.getJSONObject(i).getString("id").toString());
// Repeat this to get all of other items
                }
            }

            in.close();

        } else
            Log.e(TAG, "Couldn't open connection in getMenuItems()");

    } catch (IOException e) {
        e.printStackTrace();
    } catch (JSONException e) {
        e.printStackTrace();
    }

    return mMessage;
} 
```

现在你有一个对象，它的每个项目都是一个列表。您可以在显示方法中做任何您想做的事情。您可以将其作为对象传递给适配器以显示其数据。

```
private void displayData() {
        messageAdapter.setData(msg);
        listView.setAdapter(messageAdapter);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:45:03.877

```
JSONObject json = service.getJunk();
JSONObject msgJson = json.getJSONObject("messagesByDate");
for( Iterator it = msgJson.keys(); it.hasNext(); ) {
    Object obj = msgJson.get( (String)it.next() );
    if( obj instanceof JSONObject ) {
       JSONObject jobj = (JSONObject)obj;
       // process json object
    } else {
       JSONArray arry = (JSONArray)obj;
       // process array
    }
} 
```

# android - 从服务器下载图像并保存在android的数据库中

> ID：10611669
> 
> 赞同：0
> 
> 时间：2012-05-16T03:36:48.570
> 
> 标签：android, image, download

我正在使用延迟加载（fedorvlasov/lazylist）方法从服务器下载图像，但我的问题是，一旦我从服务器获取图像，我想将其保存在数据库中，但有些图像只保存在数据库中.请让我知道正确的方法。如果我实现了队列，问题就解决了。

```
public class ImageLoader {

    private Map<ImageView, String> imageViews=Collections.synchronizedMap(new WeakHashMap<ImageView, String>());
    ExecutorService executorService; 

    public ImageLoader(Context context){
     //   fileCache=new FileCache(context);
        executorService=Executors.newFixedThreadPool(0);
    }

   // final int stub_id=R.drawable.stub;
    public void DisplayImage(String url, ImageView imageView)
    {
        imageViews.put(imageView, url);
        Bitmap bitmap=null;//memoryCache.get(url);
        if(bitmap!=null)
            imageView.setImageBitmap(bitmap);
        else
        {
            queuePhoto(url, imageView);
            //imageView.setImageResource(stub_id);
        }
    }

    private void queuePhoto(String url, ImageView imageView)
    {
        PhotoToLoad p=new PhotoToLoad(url, imageView);
        executorService.submit(new PhotosLoader(p));
    }

    private Bitmap getBitmap(String url) 
    {
  //      File f=fileCache.getFile(url);

        //from SD cache
//        Bitmap b = decodeFile(f);
//        if(b!=null)
//            return b;

        //from web
        try {
            Bitmap bitmap=null;
        /*    URL imageUrl = new URL(url);
            HttpURLConnection conn = (HttpURLConnection)imageUrl.openConnection();
            conn.setConnectTimeout(30000);
            conn.setReadTimeout(30000);
            conn.setInstanceFollowRedirects(true);
            InputStream is=conn.getInputStream();
            OutputStream os = new FileOutputStream(f);
            Utils.CopyStream(is, os);
            os.close();
            bitmap = decodeFile(f);*/
            DefaultHttpClient mHttpClient = new DefaultHttpClient();  
            HttpGet mHttpGet = new HttpGet(url);  
            HttpResponse mHttpResponse = mHttpClient.execute(mHttpGet);  
         //   if (mHttpResponse.getStatusLine().getStatusCode() == HttpStatus.SC_OK)
            {  
              HttpEntity entity = mHttpResponse.getEntity();  
            if ( entity != null) 
            {  
//              String String=EntityUtils.toByteArray(entity).toString();
//              String=convertResizedImage(String);
                InputStream inputStream = null;
                inputStream = entity.getContent();
            //  byte[] imgarrbyte = new byte[inputStream.available()];
                //inputStream.read(imgarrbyte); 

                bitmap = BitmapFactory.decodeStream(inputStream);

                ByteArrayOutputStream bos = new ByteArrayOutputStream();
                bitmap.compress(CompressFormat.PNG, 100, bos);

                String  cardimage = Base64.encodeToString(bos.toByteArray(),
                            Base64.DEFAULT);

                byte[] imgarrbyte = null;
                try {
                    if (cardimage!= null) {
                        // Utils.writetoFile(, String.valueOf(position));
                        byte[] tempByArr = cardimage.getBytes();

                        imgarrbyte = Base64.decode(tempByArr,Base64.DEFAULT);

                    }

                if (imgarrbyte != null && imgarrbyte.length > 0) {
                     bitmap = BitmapFactory.decodeByteArray(imgarrbyte, 0,
                            imgarrbyte.length);

                }
                }catch(OutOfMemoryError oome)
                {
                    oome.printStackTrace();
                }

          } 

            }

            return bitmap;
        } catch (Exception ex){
           ex.printStackTrace();
           return null;
        }
    }

    public String convertResizedImage(String imagedata) {
        try {
            // Step 1 : Image decoded
            byte[] imageAsBytes = new byte[imagedata.length()];

            imageAsBytes = Base64.decode(imagedata.getBytes("UTF8"),
                    Base64.DEFAULT);

            BitmapFactory.Options opts = new BitmapFactory.Options();
            int IMAGE_MAX_SIZE = 240, scale = 1;

            if (opts.outHeight > IMAGE_MAX_SIZE
                    || opts.outWidth > IMAGE_MAX_SIZE) {

                scale = (int) Math.pow(2, (int) Math.round(Math
                        .log(IMAGE_MAX_SIZE
                                / (double) Math.max(opts.outHeight,
                                        opts.outWidth))
                        / Math.log(0.5)));

            }

            // Step 2 : Compress the BITMAP

            opts.inSampleSize = scale;
            opts.inPurgeable = true;
            opts.inPreferredConfig = Bitmap.Config.ARGB_4444;
            // Decode with inSampleSize
            opts.inJustDecodeBounds = false;
            opts.inDither = false;

            opts.inScaled = false;

            // STEP 3 :
            Bitmap bitMapimage = BitmapFactory.decodeByteArray(imageAsBytes, 0,
                    imageAsBytes.length, opts);

            String tempstr = new String();
            if (bitMapimage != null) {
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            bitMapimage.compress(CompressFormat.JPEG, 100, bos);

                tempstr = Base64.encodeToString(bos.toByteArray(),
                        Base64.DEFAULT);
            }

            return tempstr;
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;

    }

    //decodes image and scales it to reduce memory consumption
    private Bitmap decodeFile(File f){
        try {
            //decode image size
            BitmapFactory.Options o = new BitmapFactory.Options();
            o.inJustDecodeBounds = true;
            BitmapFactory.decodeStream(new FileInputStream(f),null,o);

            //Find the correct scale value. It should be the power of 2.
            final int REQUIRED_SIZE=70;
            int width_tmp=o.outWidth, height_tmp=o.outHeight;
            int scale=1;
            while(true){
                if(width_tmp/2<REQUIRED_SIZE || height_tmp/2<REQUIRED_SIZE)
                    break;
                width_tmp/=2;
                height_tmp/=2;
                scale*=2;
            }

            //decode with inSampleSize
            BitmapFactory.Options o2 = new BitmapFactory.Options();
            o2.inSampleSize=scale;
            return BitmapFactory.decodeStream(new FileInputStream(f), null, o2);
        } catch (FileNotFoundException e) {}
        return null;
    }

    //Task for the queue
    private class PhotoToLoad
    {
        public String url;
        public ImageView imageView;
        public PhotoToLoad(String u, ImageView i){
            url=u; 
            imageView=i;
        }
    }

    public void getImageSize(byte[] imgarrbyte, String fileName) {
        File file = new File("/mnt/sdcard/", fileName);     
        FileOutputStream fos;

        try {
            fos = new FileOutputStream(file);

            fos.write(imgarrbyte);

        } catch (IOException e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
    }

    class PhotosLoader implements Runnable {
        PhotoToLoad photoToLoad;
        PhotosLoader(PhotoToLoad photoToLoad){
            this.photoToLoad=photoToLoad;
        }

        @Override
        public void run() {
            if(imageViewReused(photoToLoad))
                return;
            Bitmap bmp=getBitmap(photoToLoad.url);

            if(imageViewReused(photoToLoad))
                return;
            addBitmapTodb(photoToLoad.url,bmp); //saving in database works sometimes.
            BitmapDisplayer bd=new BitmapDisplayer(bmp, photoToLoad);
            Activity a=(Activity)photoToLoad.imageView.getContext();
            a.runOnUiThread(bd);
        }
    }

    private  void addBitmapTodb(String url, Bitmap bitmap) {
        if (bitmap != null) {
            Log.i("Bitmap", "addBitmapTodb==========");
            Dao updateimage=new Dao();          
            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            bitmap.compress(CompressFormat.PNG, 100, bos);
            String  cardimage = Base64.encodeToString(bos.toByteArray(),
                        Base64.DEFAULT);
            updateimage.updateimageindb(url,cardimage);

        }
    }

    boolean imageViewReused(PhotoToLoad photoToLoad){
        String tag=imageViews.get(photoToLoad.imageView);
        if(tag==null || !tag.equals(photoToLoad.url))
            return true;
        return false;
    }

    //Used to display bitmap in the UI thread
    class BitmapDisplayer implements Runnable
    {
        Bitmap bitmap;
        PhotoToLoad photoToLoad;
        public BitmapDisplayer(Bitmap b, PhotoToLoad p){bitmap=b;photoToLoad=p;}
        public void run()
        {
            if(imageViewReused(photoToLoad))
                return;
            if(bitmap!=null)
                photoToLoad.imageView.setImageBitmap(bitmap);
           // else
             //   photoToLoad.imageView.setImageResource(stub_id);
        }
    }

} 
```

* * *

感谢您再次回复:) 是的，如果您在上面的代码中检查函数 addBitmapTodb，我目前正在做同样的事情。问题在这里，我使用 cursoradapater 并通过传递 imageurl 从 getview 函数调用 imageloader，我观察到一些问题，如 1.if我在 listview 上滚动，相同的图像 url 请求被发送到 imageloader 以下载图像 2.一些图像只保存在数据库中（可能是因为同步问题），我想避免这样的问题，所以我需要一些帮助这个。

# devise - Devise 能做哪些 Authlogic 不能做的事情？

> ID：10611670
> 
> 赞同：5
> 
> 时间：2012-05-16T03:36:50.490
> 
> 标签：devise, authlogic

Rails 社区似乎正在离开 Authlogic，转而支持 Devise。我已经使用 Authlogic 一年多了，想知道原因是什么。这只是营销，还是有充分的理由？在这一点上，我使用了 Devise 并且更喜欢 Authlogic，但如果有充分的理由进行切换，我当然会。

我已经阅读了很多关于设计的文章，但我不知道兴奋来自哪里。我喜欢 Devise 这个想法的主要原因是社区的支持——在撰写本文时，stackoverflow 有 605 个问题用于 Authlogic，2580 个问题用于 Devise。

非常感谢任何输入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T16:10:38.760

1.  设计是可靠的，有很多功能并且有巨大的社区支持。
2.  Devise 与许多其他重要项目集成和/或被许多其他重要项目使用——例如 OmniAuth 或 ActiveAdmin。
3.  [何塞·瓦利姆](https://github.com/josevalim)！

我的意思是说真的，你知道有多少人拥有超过 1500 个 github 关注者？他是 Rails 的核心贡献者，主要编写设计，并且是 ruby​​ 和 Rails 社区中最有影响力的人之一。

# performance - Erlang二进制匹配效率

> ID：10611671
> 
> 赞同：0
> 
> 时间：2012-05-16T03:37:07.997
> 
> 标签：performance, binary, erlang, matching

匹配之间有什么区别：

```
fun(Binary) ->
    [Value, Rest] = binary:split(Binary, <<101>>)
end 
```

和

```
fun(Binary) ->
    [Value, <<Rest/binary>>] = binary:split(Binary, <<101>>)
end 
```

我在想一个人可能会在遍历二进制文件时简单地增加一个计数器并保留子二进制指针，而另一个将复制一个新的二进制文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T11:00:45.917

我认为您可以通过`timer`模块的`tc/N`功能对其进行测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T15:23:39.453

我可以通过两种方式考虑模式匹配。

方法一：

```
[A,B] = [<<"abcd">>,<<"fghi">>] 
```

方法二：

```
[A, <<B/binary>>] = [<<"abcd">>,<<"fghi">>] 
```

除非您需要确保 B 是二进制的，否则方法 2 将花费更长的时间，几微秒，因为它不仅将 <<"fghi">> 分配给 B，而且还要确保它是二进制的。

但是，如果您需要比方法 2 更多的解析，您可以走得更远，这是方法 1 做不到的。

```
[A, <<B:8, Rest/binary>>] = [<<"abcd">>,<<"fghi">>]. 
```

# c# - 数据合同有什么用？

> ID：10611675
> 
> 赞同：-2
> 
> 时间：2012-05-16T03:38:08.170
> 
> 标签：c#, mvvm

在这里，我使用的是 wpf。在我的代码中，有一个由 datacontect 命名的文件夹：它包含如下代码：

```
public interface IAccountCategoryDataSource
{
    bool Add(AccountCategory accountCategory);
    bool Update(AccountCategory accountCategory);
    bool Remove(AccountCategory accountCategory);

    AccountCategory GetById(int id);
    AccountCategory GetByName(string name);
    IEnumerable<AccountCategory> GetByParentCategory(AccountCategory category);
    IEnumerable<AccountCategory> GetTopLevelCategories();
    IEnumerable<AccountCategory> GetBySearchTerm(string searchTerm);
    IEnumerable<AccountCategory> GetAll();

    event EventHandler<ObjectAddedEventArgs> AccountCategoryAdded;
    event EventHandler<ObjectUpdatedEventArgs> AccountCategoryUpdated;
    event EventHandler<ObjectRemovedEventArgs> AccountCategoryRemoved;
} 
```

还有其他文件夹数据源：这里的数据源与上述文件有关

```
public class AccountCategoryDataSource : IAccountCategoryDataSource
{
    public int ReferenceCountOf(AccountCategory accountCategory)
    {
        int count = 0;

        string query = "select count(*) from account_categories where parent_category=" + accountCategory.Id
                     + " union select count(*) from accounts where category=" + accountCategory.Id;

        DataTable dataTable = SQLiteHelper.ExecuteQuery(query);
        foreach (DataRow row in dataTable.Rows)
        {
            count += Convert.ToInt32(row[0]);
        }

        return count;
    }

    #region IAccountCategoryDataSource Members

    public bool Add(AccountCategory accountCategory)
    {
        string query = "insert into account_categories(name, description, parent_category) values("
                            + "'" + accountCategory.Name + "', "
                            + "'" + accountCategory.Description + "', "
                            + accountCategory.ParentCategory.Id
                            + ")";
        accountCategory.Id = SQLiteHelper.ExecuteInsert(query);

        if (accountCategory.Id > 0)
        {
            if (AccountCategoryAdded != null)
            {
                AccountCategoryAdded(this, new ObjectAddedEventArgs(accountCategory));
            }

            return true;
        }

        return false;
    }

    public bool Update(AccountCategory accountCategory).................. 
```

这与模型 floder 的 accountcategory 类有关

```
public class AccountCategory : IDataErrorInfo, IValidable
{
    #region State Properties

    public int Id { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public AccountCategory ParentCategory { get; set; }
    public bool Builtin { get; set; }

} 
```

并执行 :helper 类

```
 public class SQLiteHelper
{
    public static DataTable ExecuteQuery(string query)
    {
        DataTable dataTable = new DataTable();

        SQLiteConnection conn = new SQLiteConnection(Settings.Default["DBConnectionString"].ToString());

        using (SQLiteCommand cmd = new SQLiteCommand(query, conn))
        {
            conn.Open();

            SQLiteDataReader reader = cmd.ExecuteReader();
            dataTable.Load(reader);
            reader.Close();

            conn.Close();
        }

        return dataTable;
    }.......................... 
```

请解释数据契约的简要作用。以及它如何与助手、模型和数据源交互。它是否提供 linq to sql 概念？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:43:23.523

[DataContract](http://msdn.microsoft.com/en-us/library/ms733127.aspx)是一个 WCF 概念。它与 WPF 无关（直到它与 WCF 通信）。

从您的代码看来，它只是一个包含[数据访问层](http://www.simple-talk.com/dotnet/.net-framework/.net-application-architecture-the-data-access-layer/)类的文件夹，并且似乎与 WCF 无关

# c++ - 输入的 if 语句 (cin)

> ID：10611676
> 
> 赞同：2
> 
> 时间：2012-05-16T03:38:33.537
> 
> 标签：c++

练习了一些 C++，我从一本书中遇到了一些代码。对我来说，使用带有 break 接缝的 if 语句有点不必要：

if (!(cin >> dstep)) 中断；

这对我来说有点骇人听闻，只需使用没有 if 或 break 的 cin >> dstep 即可正常运行程序。有什么想法吗？

```
 int main()
                {
                    using namespace VECTOR;

                    srand(time(0));     //seed random-number generator
                    double direction;
                    Vector step;        //creates default object
                    Vector result(0.0, 0.0);    //
                    unsigned long steps = 0;
                    double target;
                    double dstep;

                    cout << "Enter target distance (q to quit): ";

                    while (cin >> target)
                    {
                        cout << "Enter step length: ";
                        if (!(cin >> dstep))    //if NOT inputing into dstep THEN break/means if INPUTING is TRUE, keep going and don't break out of loop
                            break; 
                      //cin >> dstep  // why not just use this?
                        while (result.magval() < target)
                        {
                            direction = rand() % 360;
                            step.set(dstep, direction, 'p'); //sets the values dstep and direction based on the form; in this case 'p'
                            result = result + step;
                            steps++;
                        }
                        cout << "After " << steps << " steps, the subject "
                            "has the following location:\n";
                        cout << result << endl;
                        result.polar_mode();
                        cout << " or\n" << result << endl;
                        cout << "Average outward distance per step = "
                            << result.magval() / steps << endl;
                        steps = 0;
                        result.set(0.0, 0.0);
                        cout << "Enter target distance (q to quit): ";
                    }
                    cout << "Bye!\n";

                    cin.get();
                    return 0;
                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T03:41:37.143

您必须启用异常或检查每个流输入操作，否则当输入格式错误时，您可能会陷入无限循环或得到错误结果。

# cocoa - GCDAsyncSocket 读取数据问题

> ID：10611679
> 
> 赞同：0
> 
> 时间：2012-05-16T03:39:12.430
> 
> 标签：cocoa, gcdasyncsocket

我有一个使用 GCDAsyncSocket 作为网络接口库的 Cocoa 直播视频程序。播放视频帧时有明显的卡顿。例如，视频上的时间几乎是正常时间的两倍。通过性能检查，发现GCDAsyncSocket的readDataToLength方法调用过于稀疏。以下是带有时间戳的日志：

```
2012-05-16 11:18:27.054 DVRLibDemo[1181:903] readDataToLength
2012-05-16 11:18:27.256 DVRLibDemo[1181:903] readDataToLength
2012-05-16 11:18:27.285 DVRLibDemo[1181:903] readDataToLength
2012-05-16 11:18:27.452 DVRLibDemo[1181:903] readDataToLength
2012-05-16 11:18:27.475 DVRLibDemo[1181:903] readDataToLength
2012-05-16 11:18:27.697 DVRLibDemo[1181:903] readDataToLength
2012-05-16 11:18:27.726 DVRLibDemo[1181:903] readDataToLength
2012-05-16 11:18:27.856 DVRLibDemo[1181:903] readDataToLength 
```

我在创建套接字时设置了一个单独的委托调度队列，但这并没有多大帮助。该消息有一个固定的标头，我首先读取标头然后读取有效负载。

```
- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag
{    
    DVRConnection *conn = [self getConnectionWithSocket:sock];

    //DebugLogInfo(@"Receive raw data: %@ for connection: %d", data, conn.tag);

    if (conn != nil && conn.connected)
    {
        if (tag == TAG_XM_MESSAGE_HEADER)
        {
            uint32_t bodyLen = [_parser parseMessageHeader:data];
            [sock readDataToLength:bodyLen withTimeout:-1 tag:TAG_XM_MESSAGE_PAYLOAD];
        }
        else if (tag == TAG_XM_MESSAGE_PAYLOAD)
        {
            [_parser parseMessage:data forConnection:conn device:self];
            [sock readDataToLength:XM_MESSAGE_HEADER_LENGTH withTimeout:-1 tag:TAG_XM_MESSAGE_HEADER];
        }
    }
} 
```

有谁知道提高从套接字读取数据的速度？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T11:17:50.933

你用了`GCDAsyncUdpSocket`吗？`GCDAsyncSocket`在您的情况下（视频传输），我认为 UDP 会比 TCP ( ) 执行得更好。UDP 不检查数据是否成功发送。所以数据不能保证被传递，但好处是它会执行得更快。在视频或音频数据发送中，UDP 是首选，因为某些数据丢失没有显着影响。

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:10:38.340

它变成了 parseMessage 代码中的错误。每次读取后我都没有正确清除缓冲区。

# java - 动态环境中的只读访问小程序

> ID：10611680
> 
> 赞同：2
> 
> 时间：2012-05-16T03:39:23.223
> 
> 标签：java, permissions, applet

我已经开始制作我的第一个小程序，并且正在以比我预期的更快的速度放大所有内容，现在我遇到了障碍。该小程序设计为在动态环境中工作，它将读取特定文件夹以及该文件夹中子文件夹中的所有文件。我遇到的问题是，一旦在我的测试服务器上建立它，它就会给出：

```
access denied("java.io.FilePermission" "\basefolder" "read") 
```

我的研究告诉我，这是因为尤其是小程序一开始就不受信任。不幸的是，我尝试了很多解决方案，但似乎都没有。我目前正在使用 eclipse 来创建我的小程序。因此，如果我试图制作一个从文件服务器上的动态文件夹读取和显示网站信息的小程序，那么授予这些权限的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:44:35.090

> ..授予这些权限的最佳方法是什么？

问题并不完全符合您的预期。底线是小程序不能`File`在服务器上创建对象（例如获取目录的文件列表）。这不是因为权限，而是文件和服务器的工作方式。

要获取文件列表将需要服务器的帮助。“帮助”是指提供小程序可以读取的文件列表的服务器。

如果服务器设置为提供列表，并且小程序是从该服务器托管的，则它不需要特殊或额外的权限。

# php - foreach mysqli删除循环麻烦

> ID：10611691
> 
> 赞同：0
> 
> 时间：2012-05-16T03:41:06.967
> 
> 标签：php, checkbox, mysqli, foreach

我非常接近解决我的问题，这就是我所在的位置：

```
 while ($row = mysqli_fetch_array($r,MYSQLI_ASSOC))
    {
        echo '<tr><td align="left">' .
        $row['title'] . '</td><td align="left">'
        . $row['genre'] . '</td><td align="left">'
        . $row['length'] . '</td><td align="left">'
        . $row['created'] . '</td><td align="left">'
        . $row['views'] . '</td><td align="left">' //. var_dump($row) //dump row value for testing
        . '<input type="checkbox" name="checkbox[]"  value= "'.$row['upload_id'].'"'.' />'.' </td>'. '</tr>';

    }
    echo '</table>'; // Close the table 
```

和删除功能：

```
function submit_delete() {
  if(!is_null($_POST['delete']) && !is_null($_POST['checkbox'])) { //Check to see if a delete command has been submitted.
    //This will dump your checkbox array to your screen if the submit works.
    //You can manually check to see if you're getting the correct array with values
    var_dump($_POST['checkbox']);//Comment this out once it's working.
    deleteUploads($id_array);

  }
  else {
    echo "Error: submit_delete called without valid checkbox delete.";var_dump($_POST['checkbox']);
  }
}

    function deleteUploads ($id_array) {
      if (count($id_array) <= 0) {   echo "Error: No deletes in id_array!"; var_dump($_POST['checkbox']); return; }//bail if its empty
      $delete_success = false;
      foreach ($id_array as &$id) {
        $sql = "DELETE FROM `upload` WHERE `upload_id`=$id AND `owner_id`={$_SESSION['user_id']}";
        $result = $mysqli->query($sql) or die(mysqli_error($mysqli));
        if ($result) { $delete_success = true; }
      }

      if($delete_success) {
        header('Location: newwriter_profile.php');
      } else {
        echo "Error: ".mysqli_error();
      }
    }

    //Test deleteUploads (remove once you know the function is working)
    //$test_ids = array();
    //$test_ids[] = 5;//make sure this id is in the db
    //$test_ids[] = 7;//this one too
    submit_delete();
    //deleteUploads($id_array);//should remove ids 10 and 9//

    mysqli_close($dbc); 
```

我已经确定`id_array`没有为复选框获取正确的`$_POST`值。vardump 显示它具有正确的上传 ID，然后我 vardump`id_array`并显示为 NULL。任何帮助将不胜感激。

目前：

```
 function submit_delete() {
  if(!is_null($_POST['delete']) && !is_null($_POST['checkbox'])) { //Check to see if a delete command has been submitted.
    //This will dump your checkbox array to your screen if the submit works.
    //You can manually check to see if you're getting the correct array with values
   // var_dump($_POST['checkbox']);//Comment this out once it's working.
    $id_array = $_POST['checkbox'];
    var_dump($id_array);
    deleteUploads($id_array);

  }
  else {
    echo "Error: submit_delete called without valid checkbox delete.";//var_dump($_POST['checkbox']);
  }
}

function deleteUploads ($id_array) {
  if (count($id_array) <= 0) {   echo "Error: No deletes in id_array!"; return; }//bail if its empty
  $delete_success = false;
  foreach ($id_array as $id) {
    $sql = "DELETE FROM `upload` WHERE `upload_id`=$id AND `owner_id`={$_SESSION['user_id']}";
    $result = $mysqli->query($sql) or die(mysqli_error($mysqli));
    if ($result) { $delete_success = true; }
  }

  if($delete_success) {
    header('Location: newwriter_profile.php');
  } else {
    echo "Error: ".mysqli_error();
  }
} 
```

在 id_array=POST 之后我得到了正确的 vardump，但是在我提交删除之后，视图源表明在我的结尾之后没有任何内容被读取（侧边栏和页脚消失）。当前未报告任何错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T03:48:13.003

似乎没有任何地方为 $id_array 赋值。例如你打电话的地方：

```
deleteUploads($id_array) 
```

那时没有分配给 $id_array 的值。

$id_array 应该有什么价值？$_POST 数组中是否有需要分配给 $id_array 的值？

另外我认为这里可能有一个放错位置的“&”：

```
foreach ($id_array as &$id) 
```

我认为应该只是：

```
foreach ($id_array as $id) 
```

# optimization - Erlang二进制优化已知整数

> ID：10611694
> 
> 赞同：-1
> 
> 时间：2012-05-16T03:41:23.270
> 
> 标签：optimization, binary, erlang, integer

是否可以进一步优化：

```
Binary = <<"2345", 1, "restofmessageexistshere">>

get_integer_value(Binary) ->
    [Num, _, LastRest] = integer_value(Binary),
    [Num, LastRest].

integer_value(<<1, _Rest/binary>>) ->  [0, 1, _Rest];
integer_value(<<H:8, Rest/binary>>) ->
    % io:format("~n~p~n", [Rest]),
    [Num, Exp, LastRest] = integer_value(Rest),
    [(H-48)*Exp + Num, Exp*10, LastRest].

Expected Result ->  [2345, "restofmessageexistshere"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T12:17:23.983

您可以使用如下函数：

```
integer_value(Bin) ->
    integer_value(Bin, 0).

integer_value(<<Char, Tail/binary>>, Acc) when (Char >= $0) and (Char =< $9) ->
    integer_value(Tail, Acc * 10 + (Char - $0));
integer_value(<<1, Tail/binary>>, Acc) ->
    [Acc, Tail];
integer_value(Bin, _Acc) ->
    %% Throw an exception if the argument is not in the correct format
    erlang:error(badarg, [Bin]). 
```

如果你打电话`integer_value(<<"2345", 1, "restofmessageexistshere">>)`，你会得到`[2345, "restofmessageexistshere"]`。

此功能解决了您的问题，但正如之前的海报所说，您可能需要解释您想要做什么以确保这是您问题的最佳解决方案。

# c# - 动态创建的 LinkBut ton 回发但不调用 onClick 方法

> ID：10611695
> 
> 赞同：0
> 
> 时间：2012-05-16T03:41:23.443
> 
> 标签：c#, asp.net

我的问题是页面发回但没有调用该方法。

这是我在 RenderProducts 方法中创建链接按钮的地方

```
for (var counter = 1; counter <= numberOfPages; counter++)
        {

            var pagingLink = new LinkButton
                                 {
                                     Text = " " + counter.ToString(CultureInfo.InvariantCulture) + " ",
                                     ID = "page" + counter
                                 };
            pagingLink.Attributes["runAt"] = "server";
            pagingLink.Attributes["class"] = "paging-link";
            pagingLink.Attributes.Add("AutoPostBack", "true");
            pagingLink.Attributes.Add("AutoEventWireup", "true"); 
            pagingLink.Click +=ChangePage;

            paging.Controls.Add(pagingLink);
        } 
```

它正在调用的方法

```
 public void ChangePage(object sender, EventArgs args)
    {
        // handle this particular case
        RenderProducts(2);
    } 
```

为了完整起见，您将在 PostBack 上看到我阻止它的默认操作

```
 protected void Page_Load(object sender, EventArgs e)
    {
        GetSideBar();
        BuildRefineSearch();
        PopulateList();
        PerformSearch();
        if(!IsPostBack )
        {
            RenderProducts(1);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:42:01.620

我将所有内容移至
覆盖保护的 void OnInit(EventArgs e)

因为这是一个用户控件，所以这解决了我的问题。

感谢[Chandermani](https://stackoverflow.com/users/361151/chandermani)让我思考我的活动何时开始。

# validation - UPS 地址验证仅使用邮政编码

> ID：10611699
> 
> 赞同：2
> 
> 时间：2012-05-16T03:42:04.513
> 
> 标签：validation, street-address, ups

我正在使用 UPS API 进行地址验证。我对这个 API 很陌生，刚刚开始学习。

1.  我想验证仅基于邮政编码的地址，即我不想提供州名。它在测试集成环境中不起作用。有什么帮助吗？

2.  我想仅使用街道地址和邮政编码来验证地址。我不想提供州和城市名称。那可能吗？到目前为止还没有工作。

如果我同时提供州和邮政编码，它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-17T21:12:46.180

您对 UPS API 的投入程度如何？我的经验是，如果他们在 API 中没有它，它不会很快发生。还有其他可用的 API 可让您仅根据地址和邮政编码验证地址。通常，如果您的邮政编码正确，则无需提供城市或州。地址验证所需的最低要求是街道地址和邮政编码或街道地址和城市/州。每个月需要验证多少个地址？如果您不需要很多，可以使用许多免费的 API。全国地址服务器是一个，SmartyStreets.com 是另一个。（我在 SmartyStreets.com 工作。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T17:08:42.070

如果您为政治部门 1 和政治部门 2 提供空白值，则返回的结果应包括城市和州。您仍然必须提供有效地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-02T07:16:17.960

在 C++ 应用程序中，街道地址验证器 UPS API 中使用了以下 XML 输入。请使用适当的许可证号、用户 ID 和密码。

```
<?xml version=\"1.0\"?>
<AccessRequest   xml:lang=\"en-US\"><AccessLicenseNumber>{LicenceNo}</AccessLicenseNumber><UserId>{UserId}</UserId><Password>{Passwd}</Password></AccessRequest>
<?xml version=\"1.0\"?>
<AddressValidationRequest xml:lang=\"en-US\">
  <Request><TransactionReference><CustomerContext>Your Test Case Summary Description</CustomerContext><XpciVersion>1.0</XpciVersion></TransactionReference><RequestAction>XAV</RequestAction><RequestOption>3</RequestOption>
  </Request>
  <AddressKeyFormat><AddressLine>608 E. Evergreen Rd</AddressLine><PoliticalDivision2>LEBANON</PoliticalDivision2>    <PoliticalDivision1>PA</PoliticalDivision1><PostcodePrimaryLow>17042</PostcodePrimaryLow><CountryCode>US</CountryCode> </AddressKeyFormat>
</AddressValidationRequest> 
```

并收到以下输出。

```
<?xml version=\"1.0\"?>
<AddressValidationResponse>
  <Response>
    <TransactionReference><CustomerContext>Your Test Case Summary Description</CustomerContext> <XpciVersion>1.0</XpciVersion></TransactionReference> <ResponseStatusCode>1</ResponseStatusCode><ResponseStatusDescription>Success</ResponseStatusDescription>
  </Response>
  <ValidAddressIndicator/>
  <AddressClassification><Code>1</Code><Description>Commercial</Description></AddressClassification>
  <AddressKeyFormat><AddressClassification><Code>1</Code><Description>Commercial</Description></AddressClassification><AddressLine>608 E EVERGREEN RD</AddressLine><Region>LEBANON PA 17042-7925</Region><PoliticalDivision2>LEBANON</PoliticalDivision2><PoliticalDivision1>PA</PoliticalDivision1><PostcodePrimaryLow>17042</PostcodePrimaryLow><PostcodeExtendedLow>7925</PostcodeExtendedLow><CountryCode>US</CountryCode></AddressKeyFormat>
</AddressValidationResponse> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-23T18:26:46.920

除了 UPS API 之外，另一个潜在的解决方案是服务对象地址验证 Web 服务。完全披露，我为 Service Objects 工作，但 Web 服务客观上符合您的需求。

它可以仅使用 address1 和 zipcode 字段来处理地址。Web 服务可以验证信息、附加城市、州、邮编+4、记录任何更正/更改，并提供指示地址可交付性的交付点验证 (DPV) 代码。下面是显示实际服务响应的示例输入和输出。

如果您有兴趣试用 API，可以使用[免费试用密钥](https://www.serviceobjects.com/products/address-validation/usps-address-validation?zut=10611699#freeTrial)进行测试。您想了解更多关于技术细节的详细信息，请查看[开发人员指南](https://docs.serviceobjects.com/display/devguide/DOTS+Address+Validation+-+US+3?zut=10611699)

示例输入：

地址1：27 E Cota St Ste 500

邮编：93101

```
{
  "Addresses":[
      {
        "Address1":"27 E Cota St Ste 500",
        "Address2":"",
        "City":"Santa Barbara",
        "State":"CA",
        "Zip":"93101-7602",
        "IsResidential":"false",
        "DPV":"1",
        "DPVDesc":"Yes, the input record is a valid mailing address",
        "DPVNotes":"26,28,39",
        "DPVNotesDesc":"The input address matched the ZIP+4 record,The input address matched the DPV record,Highrise apartment\/office building address",
        "Corrections":"10,23",
        "CorrectionsDesc":"City change,State change",
        "BarcodeDigits":"931017602254",
        "CarrierRoute":"C006",
        "CongressCode":"24",
        "CountyCode":"083",
        "CountyName":"Santa Barbara",
        "FragmentHouse":"27",
        "FragmentPreDir":"E",
        "FragmentStreet":"Cota",
        "FragmentSuffix":"St",
        "FragmentPostDir":"",
        "FragmentUnit":"Ste",
        "Fragment":"500",
        "FragmentPMBPrefix":"",
        "FragmentPMBNumber":""
      }
  ],
  "IsCASS":true
} 
```

# iphone - 如何扩展由 XIB 创建的 UIViewController？

> ID：10611700
> 
> 赞同：2
> 
> 时间：2012-05-16T03:42:12.973
> 
> 标签：iphone, uiviewcontroller, inheritance

我有一个带有一些通用控件的通用视图控制器（由 XIB 创建）。我想创建继承该通用视图控制器的子视图控制器。我想在父视图和子视图中都使用 XIB。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:51:46.407

回答您的问题，尽管问题似乎很模糊-

1.  我想创建继承该通用视图控制器的子视图控制器。你可以简单地使用喜欢 -`ChildViewController : ParentViewController`

2.  我想在父视图和子视图中都使用 XIB。在加载这些视图控制器时，您可以`initWithNibName: bundle:`在此处使用和传递 xib。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:48:56.650

[请参阅可能对您有所帮助的本教程](http://aseriesoftubes.com/articles/ipad-development-101-orientation/)

我认为，这与您所说的要对两个视图控制器使用相同的 xib 相同。您需要做一些工作，但不工作本教程将向您展示如何做到这一点。

# java - 为什么 SSL 握手有时会杀死我的 CPU？

> ID：10611702
> 
> 赞同：9
> 
> 时间：2012-05-16T03:42:29.617
> 
> 标签：java, security, ssl, https, bouncycastle

我们遇到了一个非常奇怪的问题：我们正在使用[Selenium](http://seleniumhq.org/) HTTP 代理的修改版本（更类似于[BrowserMob 代理](https://github.com/webmetrics/browsermob-proxy)）并发现在某些情况下，我们无法可靠地重现，CPU 会停止运行处理 SSL 连接时。

堆栈转储显示线程要么卡在这里：

```
"ProxyHandler$SslRelay3-1" prio=10 tid=0x09f9a400 nid=0x81f runnable [0xb2e69000]
   java.lang.Thread.State: RUNNABLE
    at java.math.BigInteger.multiply(BigInteger.java:1144)
    at java.math.BigInteger.lucasLehmerSequence(BigInteger.java:820)
    at java.math.BigInteger.passesLucasLehmer(BigInteger.java:750)
    at java.math.BigInteger.primeToCertainty(BigInteger.java:730)
    at java.math.BitSieve.retrieve(BitSieve.java:188)
    at java.math.BigInteger.largePrime(BigInteger.java:606)
    at java.math.BigInteger.<init>(BigInteger.java:511)
    at org.bouncycastle.crypto.generators.DHParametersHelper.generateSafePrimes(Unknown Source)
    at org.bouncycastle.crypto.generators.DHParametersGenerator.generateParameters(Unknown Source)
    at org.bouncycastle.jcajce.provider.asymmetric.dh.KeyPairGeneratorSpi.generateKeyPair(Unknown Source)
    at com.sun.net.ssl.internal.ssl.DHCrypt.<init>(DHCrypt.java:76)
    at com.sun.net.ssl.internal.ssl.ServerHandshaker.setupEphemeralDHKeys(ServerHandshaker.java:797)
    at com.sun.net.ssl.internal.ssl.ServerHandshaker.trySetCipherSuite(ServerHandshaker.java:702)
    at com.sun.net.ssl.internal.ssl.ServerHandshaker.chooseCipherSuite(ServerHandshaker.java:633)
    at com.sun.net.ssl.internal.ssl.ServerHandshaker.clientHello(ServerHandshaker.java:425)
    at com.sun.net.ssl.internal.ssl.ServerHandshaker.processMessage(ServerHandshaker.java:139)
    at com.sun.net.ssl.internal.ssl.Handshaker.processLoop(Handshaker.java:516)
    at com.sun.net.ssl.internal.ssl.Handshaker.process_record(Handshaker.java:454)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:884)
    - locked <0x8a18f238> (a com.sun.net.ssl.internal.ssl.SSLSocketImpl)
    - locked <0x8a18f2c0> (a java.lang.Object)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1112)
    - locked <0x8a18f2c8> (a java.lang.Object)
    at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:744)
    at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
    - locked <0x8a18f300> (a com.sun.net.ssl.internal.ssl.AppInputStream)
    at org.openqa.jetty.util.LineInput.fill(LineInput.java:477)
    at org.openqa.jetty.util.LineInput.fillLine(LineInput.java:555)
    at org.openqa.jetty.util.LineInput.readLineBuffer(LineInput.java:301)
    at org.openqa.jetty.util.LineInput.readLineBuffer(LineInput.java:285)
    at org.openqa.jetty.http.HttpRequest.readHeader(HttpRequest.java:239)
    at org.openqa.jetty.http.HttpConnection.readRequest(HttpConnection.java:866)
    at org.openqa.jetty.http.HttpConnection.handleNext(HttpConnection.java:912)
    at org.openqa.jetty.http.HttpConnection.handle(HttpConnection.java:837)
    at org.openqa.jetty.http.SocketListener.handleConnection(SocketListener.java:243)
    at org.openqa.jetty.util.ThreadedServer.handle(ThreadedServer.java:357)
    at org.openqa.jetty.util.ThreadPool$PoolThread.run(ThreadPool.java:534) 
```

多个堆栈转储显示 generateSafePrimes() 正在持续运行，并且每个后续堆栈转储显示正在运行的 java.math.BigInteger 中的位置略有不同。但是，很难判断事情到底在哪里卡住了，或者是否存在合法的无限循环（尽管我对此表示怀疑）。

进一步调查，我能够使用 -Djavax.net.debug=ssl 设置捕获相关输出，对于一个*工作*示例和一个*损坏*的示例。

当一切正常时，握手几乎立即发生，我们看到这个调试输出，导致正确的 Diffie-Hellman 密钥交换：

```
ProxyHandler$SslRelay3-9, setSoTimeout(10000) called
ProxyHandler$SslRelay3-9, READ: TLSv1 Handshake, length = 171
*** ClientHello, TLSv1
RandomCookie:  GMT: 1320359479 bytes = { 176, 253, 143, 106, 114, 151, 90, 1, 9, 53, 221, 254, 160, 42, 176, 239, 1, 222, 180, 41, 56, 115, 203, 185, 74, 68, 2, 27 }
Session ID:  {}
Cipher Suites: [Unknown 0x0:0xff, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, Unknown 0x0:0x88, Unknown 0x0:0x87, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA, Unknown 0x0:0x84, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_RC4_128_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_RC4_128_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, Unknown 0x0:0x45, Unknown 0x0:0x44, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_RC4_128_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_RC4_128_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, Unknown 0x0:0x96, Unknown 0x0:0x41, SSL_RSA_WITH_RC4_128_MD5, SSL_RSA_WITH_RC4_128_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_FIPS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA]
Compression Methods:  { 0 }
Unsupported extension server_name, [host_name: REDACTED]
Extension elliptic_curves, curve names: {secp256r1, secp384r1, secp521r1}
Extension ec_point_formats, formats: [uncompressed]
Unsupported extension type_35, data: 
***
%% Created:  [Session-10, TLS_DHE_RSA_WITH_AES_128_CBC_SHA]
*** ServerHello, TLSv1
RandomCookie:  GMT: 1320359480 bytes = { 85, 189, 191, 119, 135, 205, 134, 161, 254, 164, 83, 102, 9, 149, 182, 59, 83, 201, 110, 233, 114, 168, 166, 192, 80, 250, 204, 121 }
Session ID:  {79, 179, 22, 56, 209, 63, 115, 246, 134, 192, 16, 222, 203, 184, 204, 251, 145, 49, 200, 163, 218, 68, 78, 13, 96, 106, 79, 11, 93, 61, 187, 48}
Cipher Suite: TLS_DHE_RSA_WITH_AES_128_CBC_SHA
Compression Method: 0
***
Cipher suite:  TLS_DHE_RSA_WITH_AES_128_CBC_SHA
*** Certificate chain
chain [0] = [
[
  Version: V3
  Subject: CN=REDACTED, OU=Test, O=CyberVillainsCA, L=Seattle, ST=Washington, C=US
  Signature Algorithm: SHA1withRSA, OID = 1.2.840.113549.1.1.5

  Key:  RSA Public Key
            modulus: 9fff00e7f363191e3d3dc0aa85a2791776ecab2d8365ab4026a5e051ff60b6ce11e484a6279f5e123559dfa44479797c7b04a97d1bcfa0e10479d616deeb48cd5c40890041786106a4e88b365585113b107a80be9b3bdf19672a3ffb40a7fac583cae69d262bad1a74ce888f84643733affdbd4f939178eb060f3a32a34345d7
    public exponent: 10001

  Validity: [From: Sun May 22 02:45:42 UTC 2011,
               To: Thu Apr 20 02:45:42 UTC 2017]
  Issuer: C=US, OU=CyberVillians Certification Authority, O=CyberVillians.com
  SerialNumber: [    01375389 64a8]

Certificate Extensions: 5
[1]: ObjectId: 2.5.29.14 Criticality=false
SubjectKeyIdentifier [
KeyIdentifier [
0000: D1 6A D0 8E B2 7E B4 90   C3 7C 30 D1 5B F2 70 71  .j........0.[.pq
0010: 94 B4 3F A8                                        ..?.
]
]

[2]: ObjectId: 2.5.29.35 Criticality=false
AuthorityKeyIdentifier [
KeyIdentifier [
0000: 0A BC 17 95 34 6B BC 87   1B 5B 4C FD F5 63 85 2D  ....4k...[L..c.-
0010: B4 8F F5 6C                                        ...l
]

]

[3]: ObjectId: 2.5.29.31 Criticality=false
CRLDistributionPoints [
  [DistributionPoint:
     [URIName: http://127.0.0.1:4444/selenium-server/sslSupport/blank_crl.pem]
]]

[4]: ObjectId: 2.5.29.37 Criticality=false
ExtendedKeyUsages [
  serverAuth
  clientAuth
  2.16.840.1.113730.4.1
  1.3.6.1.4.1.311.10.3.3
]

[5]: ObjectId: 2.5.29.19 Criticality=true
BasicConstraints:[
  CA:false
  PathLen: undefined
]

]
  Algorithm: [SHA1withRSA]
  Signature:
0000: 13 CA C0 80 2D BE AC 9D   3F 58 EF A9 C9 C4 E3 43  ....-...?X.....C
0010: FE ED 5A 14 0A 04 6B 67   ED 19 EF 8D C2 14 53 6D  ..Z...kg......Sm
0020: 1A 3F B8 99 8E 2B B1 0F   50 83 F1 5A 56 43 5F 8B  .?...+..P..ZVC_.
0030: 8B 0A EE 98 04 D7 32 FC   B9 FE 43 57 97 0B FC 46  ......2...CW...F
0040: 02 4E A4 8F F3 F0 65 BD   20 28 76 DB 29 16 B6 16  .N....e. (v.)...
0050: 3B 57 D3 B3 24 21 C5 AC   64 8E 95 C9 92 06 DC 95  ;W..$!..d.......
0060: F8 B4 62 74 8C 44 8D 96   83 94 0F 5C EE B0 A4 8B  ..bt.D.....\....
0070: 5A EA 1E 58 B2 A3 8B 0E   E1 79 5F 06 BF EE E3 A9  Z..X.....y_.....

]
***
*** Diffie-Hellman ServerKeyExchange
DH Modulus:  { 189, 165, 218, 21, 118, 110, 155, 89, 53, 21, 128, 88, 254, 47, 40, 106, 51, 167, 219, 167, 68, 153, 230, 233, 63, 125, 198, 5, 12, 230, 7, 156, 21, 89, 142, 17, 146, 200, 33, 197, 86, 116, 41, 212, 22, 176, 162, 138, 121, 124, 107, 57, 27, 209, 42, 131, 182, 254, 178, 211, 86, 112, 32, 222, 185, 43, 212, 180, 71, 200, 174, 22, 11, 172, 213, 135, 217, 124, 40, 120, 218, 170, 182, 151, 131, 89, 191, 59, 214, 52, 56, 119, 212, 5, 163, 107 }
DH Base:  { 173, 84, 126, 57, 69, 157, 241, 124, 0, 60, 149, 36, 136, 75, 82, 91, 142, 16, 240, 117, 1, 146, 23, 25, 218, 139, 127, 216, 27, 183, 252, 214, 189, 253, 2, 42, 125, 1, 73, 84, 49, 69, 80, 239, 179, 134, 236, 96, 175, 244, 36, 206, 203, 163, 251, 64, 83, 253, 74, 94, 114, 248, 210, 145, 130, 225, 252, 33, 56, 100, 6, 53, 163, 138, 154, 7, 142, 209, 10, 230, 107, 233, 77, 189, 151, 46, 115, 77, 93, 57, 47, 178, 121, 240, 183, 255 }
Server DH Public Key:  { 36, 153, 18, 99, 95, 39, 135, 103, 245, 21, 20, 161, 159, 246, 67, 6, 183, 101, 8, 62, 161, 21, 211, 95, 193, 13, 248, 152, 101, 138, 143, 247, 29, 176, 255, 165, 78, 140, 108, 243, 219, 222, 59, 181, 4, 71, 51, 164, 1, 80, 97, 70, 66, 189, 175, 19, 248, 11, 77, 84, 112, 134, 139, 222, 81, 12, 45, 173, 173, 102, 141, 195, 80, 244, 20, 251, 109, 246, 24, 194, 140, 201, 29, 251, 26, 191, 9, 201, 45, 107, 59, 28, 148, 25, 220, 215 }
Signed with a DSA or RSA public key
*** ServerHelloDone
ProxyHandler$SslRelay3-9, WRITE: TLSv1 Handshake, length = 1332 
```

然而，当事情被破坏时，情况就大不相同了，我们甚至都没有尝试过 DH 交换：

```
ProxyHandler$SslRelay3-1, setSoTimeout(10000) called
ProxyHandler$SslRelay3-1, READ: TLSv1 Handshake, length = 171
*** ClientHello, TLSv1
RandomCookie:  GMT: 1320358903 bytes = { 148, 198, 81, 98, 2, 66, 235, 221, 74, 170, 130, 205, 43, 139, 18, 60, 121, 148, 234, 153, 3, 89, 48, 153, 168, 196, 80, 54 }
Session ID:  {}
Cipher Suites: [Unknown 0x0:0xff, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, Unknown 0x0:0x88, Unknown 0x0:0x87, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA, Unknown 0x0:0x84, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_RC4_128_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_RC4_128_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, Unknown 0x0:0x45, Unknown 0x0:0x44, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_RC4_128_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_RC4_128_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, Unknown 0x0:0x96, Unknown 0x0:0x41, SSL_RSA_WITH_RC4_128_MD5, SSL_RSA_WITH_RC4_128_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_FIPS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA]
Compression Methods:  { 0 }
Unsupported extension server_name, [host_name: REDACTED]
Extension elliptic_curves, curve names: {secp256r1, secp384r1, secp521r1}
Extension ec_point_formats, formats: [uncompressed]
Unsupported extension type_35, data: 
***
Finalizer, called close()
Finalizer, called closeInternal(true)
Finalizer, called close()
Finalizer, called closeInternal(true)
INFO 05/16 02:46:23 b.n.w.a.LoadTestTra~ - Reported 0 slices representing 0 transactions
INFO 05/16 02:46:23 b.n.w.a.LoadTestTra~ - Collected 0 transactions
Finalizer, called close()
Finalizer, called closeInternal(true)
Finalizer, called close()
Finalizer, called closeInternal(true)
INFO 05/16 02:46:33 b.n.w.a.LoadTestTra~ - Reported 0 slices representing 0 transactions
INFO 05/16 02:46:33 b.n.w.a.LoadTestTra~ - Collected 0 transactions
Finalizer, called close()
Finalizer, called closeInternal(true)
Finalizer, called close()
Finalizer, called closeInternal(true)
INFO 05/16 02:46:43 b.n.w.a.LoadTestTra~ - Reported 0 slices representing 0 transactions
INFO 05/16 02:46:43 b.n.w.a.LoadTestTra~ - Collected 0 transactions
Finalizer, called close()
Finalizer, called closeInternal(true)
Finalizer, called close()
Finalizer, called closeInternal(true)
INFO 05/16 02:46:53 b.n.w.a.LoadTestTra~ - Reported 0 slices representing 0 transactions
INFO 05/16 02:46:53 b.n.w.a.LoadTestTra~ - Collected 0 transactions
Finalizer, called close()
Finalizer, called closeInternal(true)
Finalizer, called close()
Finalizer, called closeInternal(true)
INFO 05/16 02:47:03 b.n.w.a.LoadTestTra~ - Reported 0 slices representing 0 transactions
INFO 05/16 02:47:03 b.n.w.a.LoadTestTra~ - Collected 0 transactions
Finalizer, called close()
Finalizer, called closeInternal(true)
Finalizer, called close()
Finalizer, called closeInternal(true)
Acceptor [SSL: ServerSocket[addr=0.0.0.0/0.0.0.0,port=0,localport=35182]], setSoTimeout(10000) called
ProxyHandler$SslRelay2-0, setSoTimeout(10000) called
ProxyHandler$SslRelay2-0, READ: TLSv1 Handshake, length = 165
*** ClientHello, TLSv1
RandomCookie:  GMT: 1320359212 bytes = { 59, 24, 42, 178, 241, 201, 150, 61, 101, 15, 153, 40, 167, 176, 22, 250, 205, 245, 89, 8, 156, 34, 122, 161, 4, 99, 40, 108 }
Session ID:  {}
Cipher Suites: [Unknown 0x0:0xff, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, Unknown 0x0:0x88, Unknown 0x0:0x87, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA, Unknown 0x0:0x84, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_RC4_128_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_RC4_128_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, Unknown 0x0:0x45, Unknown 0x0:0x44, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_RC4_128_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_RC4_128_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, Unknown 0x0:0x96, Unknown 0x0:0x41, SSL_RSA_WITH_RC4_128_MD5, SSL_RSA_WITH_RC4_128_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_FIPS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA]
Compression Methods:  { 0 }
Unsupported extension server_name, [host_name: sb-ssl.google.com]
Extension elliptic_curves, curve names: {secp256r1, secp384r1, secp521r1}
Extension ec_point_formats, formats: [uncompressed]
Unsupported extension type_35, data: 
***
Acceptor [SSL: ServerSocket[addr=0.0.0.0/0.0.0.0,port=0,localport=53331]], setSoTimeout(10000) called
ProxyHandler$SslRelay3-0, setSoTimeout(10000) called
ProxyHandler$SslRelay3-0, READ: TLSv1 Handshake, length = 171
*** ClientHello, TLSv1
RandomCookie:  GMT: 1320359212 bytes = { 124, 252, 208, 200, 213, 33, 188, 186, 19, 175, 247, 227, 126, 10, 57, 66, 29, 66, 230, 145, 66, 28, 210, 98, 167, 31, 240, 85 }
Session ID:  {}
Cipher Suites: [Unknown 0x0:0xff, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, Unknown 0x0:0x88, Unknown 0x0:0x87, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA, Unknown 0x0:0x84, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_RC4_128_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_RC4_128_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, Unknown 0x0:0x45, Unknown 0x0:0x44, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_RC4_128_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_RC4_128_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, Unknown 0x0:0x96, Unknown 0x0:0x41, SSL_RSA_WITH_RC4_128_MD5, SSL_RSA_WITH_RC4_128_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_ECDSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_RSA_WITH_3DES_EDE_CBC_SHA, SSL_DHE_DSS_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_RSA_WITH_3DES_EDE_CBC_SHA, TLS_ECDH_ECDSA_WITH_3DES_EDE_CBC_SHA, SSL_RSA_FIPS_WITH_3DES_EDE_CBC_SHA, SSL_RSA_WITH_3DES_EDE_CBC_SHA]
Compression Methods:  { 0 }
Unsupported extension server_name, [host_name: REDACTED]
Extension elliptic_curves, curve names: {secp256r1, secp384r1, secp521r1}
Extension ec_point_formats, formats: [uncompressed]
Unsupported extension type_35, data: 
***
INFO 05/16 02:47:13 b.n.w.a.LoadTestTra~ - Reported 0 slices representing 0 transactions
INFO 05/16 02:47:13 b.n.w.a.LoadTestTra~ - Collected 0 transactions
Finalizer, called close()
Finalizer, called closeInternal(true)
Finalizer, called close()
Finalizer, called closeInternal(true)
INFO 05/16 02:47:23 b.n.w.a.LoadTestTra~ - Reported 0 slices representing 0 transactions
INFO 05/16 02:47:23 b.n.w.a.LoadTestTra~ - Collected 0 transactions
Finalizer, called close()
Finalizer, called closeInternal(true)
Finalizer, called close()
Finalizer, called closeInternal(true)
INFO 05/16 02:47:33 b.n.w.a.LoadTestTra~ - Reported 0 slices representing 0 transactions
INFO 05/16 02:47:33 b.n.w.a.LoadTestTra~ - Collected 0 transactions
INFO 05/16 02:47:43 b.n.w.a.LoadTestTra~ - Reported 0 slices representing 0 transactions
INFO 05/16 02:47:43 b.n.w.a.LoadTestTra~ - Collected 0 transactions
Finalizer, called close()
Finalizer, called closeInternal(true)
Finalizer, called close()
Finalizer, called closeInternal(true)
INFO 05/16 02:47:53 b.n.w.a.LoadTestTra~ - Reported 0 slices representing 0 transactions
INFO 05/16 02:47:53 b.n.w.a.LoadTestTra~ - Collected 0 transactions
INFO 05/16 02:48:03 b.n.w.a.LoadTestTra~ - Reported 0 slices representing 0 transactions
INFO 05/16 02:48:03 b.n.w.a.LoadTestTra~ - Collected 0 transactions
Finalizer, called close()
Finalizer, called closeInternal(true)
Finalizer, called close()
Finalizer, called closeInternal(true)
Finalizer, called close()
Finalizer, called closeInternal(true)
Finalizer, called close()
Finalizer, called closeInternal(true)
INFO 05/16 02:48:13 b.n.w.a.LoadTestTra~ - Reported 0 slices representing 0 transactions
INFO 05/16 02:48:13 b.n.w.a.LoadTestTra~ - Collected 0 transactions
INFO 05/16 02:48:14 o.o.s.s.SeleniumDri~ - Got result: Timed out after 120000ms on session 5a7b389b01c041fcb3632c2f5056043b 
```

该日志跨越 2 分钟的时间范围，其中几乎没有任何事情发生。还有一些与 sb-ssl.google.com 相关的额外 SSL 日志记录（也被阻止），但这可以忽略 - 它只是 Firefox 浏览器检查到[Google 的安全浏览 API](https://developers.google.com/safe-browsing/)。

我应该注意：大约一个月前，已经对 Selenium 代理提出了类似的[投诉](http://code.google.com/p/selenium/issues/detail?id=3498)，但通过升级到最新版本的 BouncyCastle[解决了这些投诉。](http://code.google.com/p/selenium/source/detail?r=16442)但是，我们发现问题*偶尔*仍然会发生，我们无法弄清楚原因。

我希望 StackOverflow 系列能够阐明为什么有时线程会卡在*org.bouncycastle.crypto.generators.DHParametersHelper.generateSafePrimes*中，而其他时候日志显示我们立即直接进入此关键行：

```
%% Created:  [Session-10, TLS_DHE_RSA_WITH_AES_128_CBC_SHA] 
```

感谢您的任何见解！

编辑：我应该补充一点，我们在 Linux 上使用 Java 1.6.0_18-b07（32 位和 64 位受影响）、Selenium 2.21 和 BouncyCastle 1.47。

编辑#2：我刚刚确认使用 Java 7 时不存在此问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T04:09:30.540

So check the full comment thread, but basically after a lot of debugging I discovered that upgrading to Java 7 resolved the issue. Not sure what the original issue was with Java 6, but we're just going to go ahead with Java 7\. I hope this helps someone in the future!

# jquery - 使用 jQuery UI 对话框的 ASP.Net 图像按钮删除确认

> ID：10611711
> 
> 赞同：0
> 
> 时间：2012-05-16T03:43:25.297
> 
> 标签：jquery, asp.net, jquery-ui, webforms

我正在使用中继器来显示数据行。每行都有一个删除图像按钮。我想使用 jQuery UI 添加一个确认对话框。单击删除图像按钮时，对话框正确显示。我不确定的是，当单击对话框上的 OK 按钮时，如何从 jQuery 调用 Image 按钮的事件处理程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T03:49:37.650

你可以做这样的事情，检查[Jquery Dialogbox](http://jqueryui.com/demos/dialog/#modal-confirmation)示例，同时绑定你附加事件处理程序的中继器。像这样

```
yourbutton.Attributes.Add("onclick","Deletbox('" + yourDeleteID + "'))"; 
```

javascript函数：

```
var deleteId;//this the global variable to hold the value 

function Deletebox(ID)
{
  ( "#YourDialog" ).data('DeleteID',ID).dialog('open');
} 
```

这是用于对话框初始化程序

```
 $( "#YourDialog" ).dialog({
                    modal: true, //this will make a modal form
                                open:function()
                                {
                                      deleteId=$(this).data('DeleteID'); 
                                },
                    buttons: { // this is the buttons which you are going to show in box
                        "Delete all items": function() {
                            CallYourdeletionMethodFromServer(deleteId)// by using $.Ajax function
                        },
                        Cancel: function() {
                            $( this ).dialog( "close" );
                        }
                    }
                }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:53:06.323

您可以在 OK 按钮单击处理程序中调用该`__doPostBack`函数。您需要保留最初单击以打开对话框并将其作为第一个参数传递的按钮的 ID。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T10:45:54.417

```
<div class="Parent">
        <div>
            test1
        </div>
        <div>
            <input type="button" value="Delete" onclick="Deletemessage(1,this);" />
        </div>
    </div>
    <div class="Parent">
        <div>
            test2
        </div>
        <div>
            <input type="button" value="Delete" onclick="Deletemessage(1,this);" />
        </div>
    </div>

function Deletemessage(id, obj) {
            $('<div></div>').appendTo('body')
                    .html('<div><h6>Are you want to delete this part?</h6></div>')
                    .dialog({
                        modal: true, title: 'Delete message', zIndex: 10000, autoOpen: true,
                        width: 'auto', modal: true, resizable: false,
                        buttons: {
                            Ok: function () {
                                $(obj).removeAttr('onclick');

                                //                                $.ajax({
                                //                                    url: '/yourPath', type: 'Post', dataType: 'json',
                                //                                    data: { 'id': id },
                                //                                    success: function (data) {
                                $(obj).parents('.Parent').remove();

                                //Or

                                //window.location.reload();

                                //                                    }
                                //                                });

                                $(this).dialog("close");
                            },
                            Cancel: function () {
                                $(this).dialog("close");
                            }
                        },
                        close: function (event, ui) {
                            $(this).remove();
                        }
                    });
        }; 
```

对于现场演示，请参阅此链接：http: [//jsfiddle.net/nanoquantumtech/9NKXq/](http://jsfiddle.net/nanoquantumtech/9NKXq/)

# geolocation - 如何在 Windows 8 中设置桌面位置？

> ID：10611714
> 
> 赞同：1
> 
> 时间：2012-05-16T03:43:35.110
> 
> 标签：geolocation, windows-8

正在开发一个原型 Windows 8 Metro 应用程序并希望使用`Geolocator`. 我知道如何使用模拟器模拟位置。但我只是好奇是否有办法为我的实际桌面设置位置信息（去年没有幸运地去 BUILD 并得到一台平板电脑......）

# php - 创建新的 MVC 文件无法正常工作

> ID：10611722
> 
> 赞同：1
> 
> 时间：2012-05-16T03:45:39.553
> 
> 标签：php, mysql, cakephp

我有一个由以前的员工制作的 cakephp 应用程序，它的结构定义为从下图可以看出我现在被困在如何弄清楚在我被要求添加另一个控制器的当前情况下我应该做什么, 模型和视图。在 views 文件夹中，有一些文件夹用于存储与特定控制器和模型匹配的不同视图。我还创建了一个文件夹并将其命名为 new_foo。

现在你看到 app_controller.php 了吗？该文件包含所有可用于初始化要调用任何控制器的菜单（导航栏）的信息。

菜单被定义为一个数组，例如

```
menu=array(
    array(
        'label' => __("Menu Item", true),
        'controller' => 'MenuController',
        'action' => 'MenuAction'
                        ),
    array(
        'label' => __("Another item", true),
        'controller' => 'AnotherMenusController',
        'action' => 'AnotherAction'
        )); 
```

我还定义了一个这样的元素，然后为自己创建了一个新的控制器类，例如

AnotherMenusController.php // 请注意复数

```
class  AnotherMenusController extends AppController
{
    $this->loadModel('AnotherMenu'); // Please note the plural
    function AnotherAction()
    {
        $this->AnotherMenu->modelFunc();    
    }
} 
```

我还创建了一个类似的模型类

```
class AnotherMenu extends AppModel
{
    function modelFunc()
    {
        print_r("Oh that is it ?");
    }   
} 
```

但是，当我尝试在本地主机中运行应用程序时，总是会收到错误报告

> 未找到错误：在此服务器上未找到请求的地址“/anothermenus/anotheraction”。

虽然我已经可以在菜单项中创建一个链接，哦，这似乎无关紧要。我绝望地希望只有有人能够阐明这一点，让我感觉好一点。我感谢您提供的任何帮助。

再次感谢您的关心。

图片在以下链接中

[http://imgur.com/RyV3A](http://imgur.com/RyV3A)

我目前的问题是服务器无法识别我的控制器功能，我现在应该更改什么？

我应该错过注册一些东西，以便在这个特定问题上为我解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:43:44.660

My first guess would be that your problem is that your local webserver is not respecting the .htaccess. The route the menu is redirecting you to is '/anothermenus/anotheraction' but the webserver reports that such path doesn't exist. It is possible that the app is configured for production use and your local webserver isn't configured exactly the same.

Check what happens with other menus and if the paths they link to are similar to the one of the menu you added or not. I would also verify CakePHP's and the webserver's logs to verify which one is returning the error. If it is the webserver the webserver's config (or .htaccess files) are to be reviewed. If it is CakePHP's, then you need to keep looking at your code (and disregard this answer)

# c# - Java 构造函数不是那么直观。或者可能不是 Java，而是不直观的 C #

> ID：10611726
> 
> 赞同：6
> 
> 时间：2012-05-16T03:46:38.203
> 
> 标签：c#, java, rationale

给定这个 Java 代码，它会输出**0 和 4**：

```
class A{
   A() {  print();   }
   void print() { System.out.println("A"); }
}

class B extends A{
   int i =   Math.round(3.5f); 

   public static void main(String[] args){
      A a = new B();
      a.print();
   }
   void print() { System.out.println(i); }
} 
```

使用相同的 C# 代码，输出**4 和 4**

使用系统；

```
class A{
   internal A() {  print();   }
   virtual internal void print() { Console.WriteLine("A"); }
}

class B : A{
   int i =  (int) Math.Round(3.5f); 

   public static void Main(string[] args){
      A a = new B();
      a.print();
   }
   override internal void print() { Console.WriteLine(i); }
} 
```

虽然我发现 Java 上的输出应该是 4 和 4，但答案实际上是 Java 上的 0 和 4。然后我用C#试了一下，答案是4和4

是什么赋予了？Java 的基本原理是，在构建 B 期间，A 仍在初始化（因此，如果 Java 说 A 仍在初始化，我假设 B 仍在初始化），因此默认值应为 0。因此在 Java 中输出为 0 和 4。

***为什么 C# 构造函数的行为与 Java 不同，反之亦然？***

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-16T04:11:59.780

这是因为构造函数中对象初始化的顺序不同。

Java中发生了什么：

*   （空，隐式） B 的构造函数被调用
*   调用 A 的超类构造函数（打印 0，因为 i 未初始化）
*   i在超类构造函数*之后*初始化
*   print() 被调用（打印 4）

C# 中发生了什么：

*   （空，隐式） B 的构造函数被调用
*   i 在调用超类构造函数*之前*被初始化
*   调用 A 的超类构造函数（打印 4，因为 i 已经初始化）
*   print() 被调用（打印 4）

既不是对也不是错——这只是编译器对构造操作的排序方式不同。就我个人而言，我认为 Java 排序稍微合乎逻辑，因为对我来说，在子类初始化发生之前完全构造超类是有意义的。

无论哪种方式，由于逻辑可能会变得相当复杂，我建议您通常避免在对象构造期间调用虚拟方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T06:09:19.457

Java中的初始化顺序：

1.实例的存储被擦除为零，自动将对象中的所有基元设置为其默认值（数字为零，布尔值和字符等价）和对空的引用。

2.`class A`调用base的构造函数。它将调用 in 中的`print`方法`class B`，因为它是一个被覆盖的方法。`i`此时为 0。

3.执行B类的成员初始化。现在`i`是4。

为了不产生这种意外，不要在构造函数中调用任何非静态或非私有方法，因为它们可能在派生类中被覆盖。

# hibernate - 高品质 | 结果获取地图

> ID：10611731
> 
> 赞同：2
> 
> 时间：2012-05-16T03:47:48.810
> 
> 标签：hibernate, map

我有一个 pojo Person 字段：id/name/age/gender。

我希望从 HQL 返回一个映射，其中 Person.id 作为键，Person 对象作为值。HQL 应该是什么样的？

我试过这个：

```
select new map(p.id,new Person(p.name,p.age,p.gender)) from Person 
```

这是获得所需结果的正确方法吗？我想避免使用基于 java 的操作来根据收到的结果准备地图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-12T09:43:48.297

使用此 HQL：

```
select new map(p.id, p ) from Person p 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T10:14:16.980

不它不是。对于`select new ...`每一行，构造函数都会执行，每行有一个实例，query.list() 为您提供这些实例的列表。

您必须编写 Java 代码来读取列表的每一行并将其放入地图中。这只是几行代码。（或者您使用接受 id 列和列表作为参数的构造函数编写自己的地图实现，然后在那里进行操作，但这可能更复杂。）

# ruby-on-rails - 在嵌入式 ruby 中指定 link_to 的类

> ID：10611733
> 
> 赞同：2
> 
> 时间：2012-05-16T03:48:14.553
> 
> 标签：ruby-on-rails

我将如何在此处指定 :class => "" ？：

```
<li><%= link_to "#" current_user  %></li> 
```

泰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:49:30.543

```
<li><%= link_to "#", current_user, :class => "class-name"  %></li> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T04:00:44.097

检查以下，

```
 <%= link_to "Articles", articles_path, :id => "news", :class => "article" %>
   # => <a href="/articles" class="article" id="news">Articles</a> 
```

有关更多信息，请查看：- [http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to)

# sql-server - 如何在 SQL Server 中生成具有正态分布的数字

> ID：10611737
> 
> 赞同：8
> 
> 时间：2012-05-16T03:48:20.303
> 
> 标签：sql-server, sql-server-2008, normal-distribution

我正在尝试播种一些数据，是否有在 SQL Server 中生成遵循正态分布曲线的数字？

比如：我会指定平均值、标准差和计数，然后我会得到一个数字列表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-20T19:39:24.987

随机正态分布

```
UPDATE TABLE 
SET COLUMN = CAST(SQRT(-2*LOG(RAND()))*SIN(2*PI()*RAND(CHECKSUM(NEWID())))as decimal(5,3))    
from TABLE 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-16T05:21:34.687

引用[http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=135026](http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=135026)你可以试试

```
CREATE FUNCTION [dbo].[udf_NORMSDIST]
(
            @x FLOAT
)
RETURNS FLOAT
AS
/****************************************************************************************
NAME: udf_NORMSDIST
WRITTEN BY: rajdaksha
http://www.sqlteam.com/forums/topic.asp?TOPIC_ID=135026
DATE: 2009/10/29 
PURPOSE: Mimics Excel's Function NORMSDIST

Usage: SELECT dbo.udf_NORMSDIST(.5)

REVISION HISTORY

Date Developer Details
2010/08/11 LC Posted Function

*****************************************************************************************/

BEGIN 
DECLARE @result FLOAT
DECLARE @L FLOAT
DECLARE @K FLOAT
DECLARE @dCND FLOAT
DECLARE @pi FLOAT
DECLARE @a1 FLOAT
DECLARE @a2 FLOAT
DECLARE @a3 FLOAT
DECLARE @a4 FLOAT
DECLARE @a5 FLOAT

--SELECT @L = 0.0
SELECT @K = 0.0
SELECT @dCND = 0.0

SELECT @a1 = 0.31938153
SELECT @a2 = -0.356563782
SELECT @a3 = 1.781477937
SELECT @a4 = -1.821255978
SELECT @a5 = 1.330274429
SELECT @pi = 3.1415926535897932384626433832795

SELECT @L = Abs(@x)

IF @L >= 30
BEGIN
IF sign(@x) = 1
SELECT @result = 1
ELSE
SELECT @result = 0
END
ELSE
BEGIN
-- perform calculation
SELECT @K = 1.0 / (1.0 + 0.2316419 * @L)
SELECT @dCND = 1.0 - 1.0 / Sqrt(2 * @pi) * Exp(-@L * @L / 2.0) *
(@a1 * @K + @a2 * @K * @K + @a3 * POWER(@K, 3.0) + @a4 * POWER(@K, 4.0) + @a5 * POWER (@K, 5.0))
IF (@x < 0)
SELECT @result = 1.0 - @dCND
ELSE
SELECT @result = @dCND

END

RETURN @result
END 
```

您显然可以抵消结果以更改平均值并将其包装在一个函数中以根据需要进行迭代以返回所需的样本点数量。如果您需要帮助，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-12T10:23:18.690

例如（愚蠢的 SO 正文解析器）： [http ://www.sqlservercentral.com/articles/SQL+Uniform+Random+Numbers/91103](http://www.sqlservercentral.com/articles/SQL+Uniform+Random+Numbers/91103)

# arrays - 使用 ModelSim 在 Verilog 中创建数组

> ID：10611738
> 
> 赞同：0
> 
> 时间：2012-05-16T03:48:35.690
> 
> 标签：arrays, verilog, modelsim

我正在尝试使用下面的代码在 ModelSim 中使用 Verilog 中的数组声明一个 1MB 内存模型。我还需要在地址空间中有地址 0x80020000。

```
parameter MEM_START = 32'h7FFA_0000;
parameter MEM_END = 32'h800A_0000;
reg [7:0] MEMORY [MEM_START:MEM_END]; 
```

上面的代码编译得很好，但是当我尝试模拟它时它给出了以下错误：

```
# Loading project.memoryModule
# ** Fatal: (vsim-3419) Array with element size 2 and index range 2147090432 downto -2146828288 is too large.
#    Time: 0 ns  Iteration: 0  Instance: Project/memoryModule.v
# FATAL ERROR while loading design
# Error loading design 
```

但是，如果我将内存索引从 7FEF_FFFF 初始化为 7FFF_FFFF，这也应该是 1 MB，一切都很好，我可以在模拟中看到分配的内存。如果我将范围从 7FEF_FFFF 修改为 8000_0000，我现在在编译期间会出现内部数据大小溢出。为什么内存的结束范围在错误（2的补码）中显示为-2146828288（FFFF FFFF 800A 0000）？

我在网上看到的所有示例都显示较小的记忆，即 256 个单词，所以 reg [7:0] MEMORY [0:255]) 所以我不确定我的逻辑是否有问题，或者问题是否与我机器上的硬件。我正在使用 32 位版本的 Modelsim 并且有 4 GB 的 RAM。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T12:06:32.693

该数组中的每个条目将是两个字节，因为每个位可以是`0`、`1`或。该数组是条目，即十进制的 2147614720 个条目。`Z``X``0x80020000`

2 * 2147614720 是 4295229440**在一个阵列上**是 4 + 1 GB 。

相信我，你不想这样做。即使只是将单个值写入所有这些位置也需要大量的模拟时间。

如果您在 SystemVerilog 中，则使用以地址作为索引的关联数组。这只会将内存用于存储有内容的位置。否则，我建议您将内存包装在将较小的数组移动到地址空间的正确部分的东西中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T20:56:04.143

起初这看起来像一个错误，但也许不是。数组索引被视为常量整数表达式。

> 指定数组索引的表达式应为常量整数表达式。常量表达式的值可以是正整数、负整数或零。

该规范对常量整数也非常清楚，并且它们与变量整数不同。

> 没有大小和基本格式的简单十进制数应视为有符号整数，而如果包含 s 指示符，则使用基本格式指定的数字应视为有符号整数，如果仅使用基本格式，则应视为无符号整数。

但是，该参数被强制为整数类型（即使它是常量），它始终是有符号的。这是规范中隐含的。

> 在应用任何值覆盖后，没有类型或范围规范的参数声明应默认为分配给参数的最终值的类型和范围。

如果您运行 sim 并使用 MEM_END 打印出一些算术结果，它可能会充当 32 位有符号值。您看到的消息肯定与正在签名的 MEM_END 一致。就个人而言，我永远不会以这种方式使用偏移数组索引。

* * *

要解决此问题，您可以尝试以下几种方法：

*   使用无符号函数：

    ```
    reg [7:0] MEMORY [$unsigned(MEM_START):$unsigned(MEM_END)];
    ```

*   如果你需要一个 1MB 的范围，你可以使用 0x8000_0000..0x8010_0000 然后忽略索引中的 MSB。

*   如果您需要测试地址的 MSB，您可以在内存模型中应用偏移量。

*   使用 64 位版本的 Modelsim。

*   用于``define`避免参数，尽管并不理想，因为定义是全局的并且参数是作用域的。

    ```
    `define MEM_START 32'h7FFA_0000;
    `define MEM_END   32'h800A_0000; 
    reg [7:0] MEMORY [`MEM_START:`MEM_END];
    ```

如果不确切知道您要做什么，就很难回答这个问题。

# c# - VS Server Explorer - 列未出现在列列表中？

> ID：10611741
> 
> 赞同：0
> 
> 时间：2012-05-16T03:48:49.680
> 
> 标签：c#, .net, visual-studio, sql-server-ce, server-explorer

对于 SQL compact 4 db 中的现有表

添加一列类型位，单击确定，但它没有显示在 DataEditor 中，也没有显示在列列表中但它在 Table Schema 编辑器中

我可以使用 ErikJ 的 SQL 紧凑工具箱编辑数据，但很好奇我在这里可能违反了哪些规则导致这种行为？？？

仅供参考 - 列名称是未显示的 IsSys，我添加了其他位列进行测试，它们出现在列列表中！

更新 - sql 在下面，IsSys 和 IsSystem 都没有出现在 Server Explorer 的列列表或 ServerExplorer 的 DataEditor 中，尽管它们出现在 Table Schema Editor 中

```
CREATE TABLE [ProblemTable] (
  [AttrId] int NOT NULL  IDENTITY (30,1)
, [AttrTypeId] int NOT NULL
, [SelText] nvarchar(50) NOT NULL
, [SeqNum] int NOT NULL DEFAULT 9999
, [UpdatedBy] int NOT NULL DEFAULT 1
, [UpdatedAt] datetime NOT NULL DEFAULT getdate()
, [AttrKey] nvarchar(40) NOT NULL
, [IsEnabled] bit NOT NULL DEFAULT 1
, [IsShown] bit NOT NULL DEFAULT 1
, [IsSys] bit NULL DEFAULT 0
, [IsSystem] bit NOT NULL DEFAULT 0
);
GO 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:34:09.503

有趣 - 这似乎是“设计使然” - 同样以 __Sys 开头的表名也被过滤掉了。如上面链接的西班牙语文章中所述，请勿使用 IsSys 作为列名！

# .net - 在 C# 中直接访问 Winform 消息泵

> ID：10611745
> 
> 赞同：0
> 
> 时间：2012-05-16T03:49:02.507
> 
> 标签：.net, winforms, multithreading

在 C# 中更新 Windows 窗体上的控件时，有两个标准选项 Invoke 或 BeginInvoke，它们最终都会调用 Win32 函数 PostMessage()，它将调用添加到 GUI 的消息泵队列中。我一直使用异步版本（BeginInvoke），但想知道使用它是否有任何效率低下，可以通过滚动自己的消息泵填充器来规避。有没有人这样做，如果有，为什么有必要？

# vb.net - VB.NET 中的多重替换

> ID：10611750
> 
> 赞同：5
> 
> 时间：2012-05-16T03:49:53.477
> 
> 标签：vb.net

我正在制作一个程序，即脚本转换器。我尝试了替换命令 `TextBox1.Text.Replace("Hi", "Hello").Replace("Hello", "HI")` ，但这不起作用。它不能正确替换第二次。

请帮忙...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T04:05:25.657

Replace() 方法实际上并不更改字符串的内容。因此，您必须将新值分配给某些东西。

一个例子：

```
someString = "First Example"

someString.Replace("First", "Second")

// someString is still "First Example"

newString = "Hello World".Replace("Hello", "Hi")

// newString is now "Hi World" 
```

一些例子： http: [//www.dotnetperls.com/replace-vbnet](http://www.dotnetperls.com/replace-vbnet)

**更新：**

从您最近的评论中，您似乎想要它：

```
TextBox1.Text.Replace("Hi", "temp").Replace("Hello", "HI").Replace("temp", "Hello") 
```

因为第二次替换正在处理第一次替换的结果。它不再适用于原始文本。因此，要将 'hi' 与 'hello' 和 'hello' 与 'hi' 切换，你必须有一些中间值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T04:06:32.997

```
Protected Sub Button1_Click(sender As Object, e As System.EventArgs) Handles Button1.Click
    TextBox1.Text = TextBox1.Text.Replace("Hi", "Hello").Replace("Hello", "HI")
End Sub 
```

我想这就是你想要的，对我有用

# actionscript-3 - 在 Actionscript 中调整图像大小

> ID：10611753
> 
> 赞同：0
> 
> 时间：2012-05-16T03:50:51.310
> 
> 标签：actionscript-3, flash

我正在尝试使用 Loader 和 URL 在 Actionscript 中获取图像。图像很好，活动完成后我可以在屏幕上显示它。我想要做的是调整屏幕上的图像大小。我无法做到这一点。我该如何进行？

我尝试设置 loader.content.width 不起作用。我尝试设置 loader.content.scaleX 也没有用。我是这方面的新手，我做错了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T03:55:21.993

[`Loader`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html)继承自`DisplayObject`，意味着您需要直接修改`width`,`height`等：

```
loader.width = 100;
loader.height = 120;
// etc 
```

您可以通过以下实例直接修改此处列出的任何属性`Loader`：

[`Loader`- 财产摘要。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html#propertySummary)

# javascript - ajax 可以在两个客户端之间传递函数调用吗？

> ID：10611754
> 
> 赞同：2
> 
> 时间：2012-05-16T03:51:01.743
> 
> 标签：javascript, jquery, ajax, xmlhttprequest

**问题**

*   是否可以简单地通过 ajax/xhr 来传达事件或 javascript？

*   如果是这样，这将是*多么*异步/同步？

**语境**

*   我正在尝试构建一个基于 javascript/jquery 的基本 pong 多人网络应用程序。我考虑了如何在两个客户端上同步玩家之间的移动，并决定尽可能多地保留客户端。玩弄了一些想法，（就像我考虑使用具有 3 个布尔值的 txt 文件和为每个游戏调用一个用户 ID 一样糟糕）但我真的想不出任何更好的方法，而不是使用某种js后端引擎。（我真的*不想*这样做）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T03:53:06.690

您可以为此使用 WebSocket (HTML5)。大多数现代浏览器都支持它。

[http://slides.html5rocks.com/#web-sockets](http://slides.html5rocks.com/#web-sockets)

更多信息：[http ://www.html5rocks.com/en/tutorials/websockets/basics/](http://www.html5rocks.com/en/tutorials/websockets/basics/)

有趣的事实：Stackoverflow 也使用 WebSocket！*ws://sockets.ny.stackexchange.com*

在多人游戏中使用 WebSocket 的示例：

*   [http://browserquest.mozilla.org/](http://browserquest.mozilla.org/)
*   [http://rawkets.com/](http://rawkets.com/)
*   [http://jfd.github.com/wpilot/](http://jfd.github.com/wpilot/)
*   [谷歌搜索](https://www.google.com/search?ie=UTF-8&q=WebSocket+games)

# php - PHP上传文件限制

> ID：10611758
> 
> 赞同：1
> 
> 时间：2012-05-16T03:51:36.380
> 
> 标签：php, upload

我正在将个人资料图片上传到服务器上的目录。该脚本工作正常，但是除了要上传的小文件大小的图像外，我似乎什么也得不到。超过 2mb 的任何东西都失败了。我无权访问 php.ini，但我在 htaccess 中添加了以下内容，但没有运气。我已经尝试了所有其他我可以在网上找到的解决方案，但没有运气。有任何想法吗？

```
php_value upload_max_filesize 10M
php_value post_max_size 10M
php_value max_input_time 400
php_value max_execution_time 400 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T03:58:57.710

首先，检查`phpinfo()`运行时设置是什么；如果它们仍然显示`2M`（默认），则 Apache 可能不遵守 .htaccess 文件

通常我会告诉你确保你在 Apache 配置的虚拟主机声明中有这个：

```
AllowOverride Options FileInfo 
```

但是在共享主机上不会给你这些权限（极不可能）。`php_value`您应该咨询您的托管服务提供商，看看他们是否可以通过在您的虚拟主机中添加设置来为您提高这些限制

或者，按照@Satya 的建议，通过分块上传文件（例如，一次上传 1MB）来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T03:57:45.723

如果您不能对 php.ini 进行更改，那么恐怕您将不得不尝试任何基于 jquery 的上传器，例如 valum 或 blueimp

# javascript - 带有 GoToLocation 控件的缩放至、平移至按钮和 XY 坐标文本框的 JavaScript 问题

> ID：10611759
> 
> 赞同：0
> 
> 时间：2012-05-16T03:51:40.700
> 
> 标签：javascript, jquery, asp.net, arcgis

我在 ASP.NET (.ascx) 中创建了一个用户控件，它结合了 ArcGIS Map 和 ArcGIS Web ADF 中的几个基本控件（GoToLocation、ScaleBar 和 ESRI 工具栏）。GoToLocation 控件无法正常工作，因为它的 javascript 没有找到用于显示 X 和 Y 坐标的文本框，也没有找到“缩放至”和“平移至”按钮。

然后我尝试用这个 jquery+javascript 解决这个问题：

**2012 年 5 月 21 日更新**：我尝试在 fixGTL 之后添加 GoToLocation1.Refresh 或 GoToLocation1.RaisePostBackEvent（参见下面的代码），但似乎控件没有刷新或重新加载。

```
$(document).ready(function () {
            fixGTL();
        <% 
            //GoToLocation1.RaisePostBackEvent(""); 
            GoToLocation1.Refresh(); 
        %>
        });

        function fixGTL() {
            var txtX = $('#[id$="_GoToLocationX"]');
            var idX = txtX.attr("id");
            //alert(idX);
            var idX_2 = idX.split('_');
            if (idX_2.length = 6) {
                txtX.attr('id', idX_2[0] + '_' + idX_2[2] + '_' + idX_2[3] + '_' + idX_2[4] + '_' + idX_2[5]);
            }

            var txtY = $('#[id$="_GoToLocationY"]');
            var idY = txtY.attr("id");
            //alert(idY);
            var idY_2 = idY.split('_');
            if (idY_2.length = 6) {
                txtY.attr('id', idY_2[0] + '_' + idY_2[2] + '_' + idY_2[3] + '_' + idY_2[4] + '_' + idY_2[5]);
            }

            var btnZoomTo = $('#[id$="_ZoomTo"]');
            var idZoomTo = btnZoomTo.attr("id");
            var idZoomTo_2 = idZoomTo.split('_');
            if (idZoomTo_2.length = 6) {
                btnZoomTo.attr('id', idZoomTo_2[0] + '_' + idZoomTo_2[2] + '_' + idZoomTo_2[3] + '_' + idZoomTo_2[4] + '_' + idZoomTo_2[5]);
            }

            var btnPanTo = $('#[id$="_PanTo"]');
            var idPanTo = btnPanTo.attr("id");
            var idPanTo_2 = idPanTo.split('_');
            if (idPanTo_2.length = 6) {
                btnPanTo.attr('id', idPanTo_2[0] + '_' + idPanTo_2[2] + '_' + idPanTo_2[3] + '_' + idPanTo_2[4] + '_' + idPanTo_2[5]);
            }
        } 
```

**问题：** 我的脚本成功更改了文本框的 ID 和按钮的 ID，但 GoToLocation 的 javascript 仍然找不到文本框和按钮。

这是一段取自 Firebug 的 javascript 代码（抱歉，我无法发布图片，因为我是这里的新手）：

```
ESRI.ADF.UI.GoToLocation.callBaseMethod(this, 'initialize');
(1) var id = this.get_id();
    var splitId = id.split('_');
    this._displayX = $get(splitId[0] + '_' + id + "_GoToLocationX");
    this._displayY = $get(splitId[0] + '_' + id + "_GoToLocationY");
(2) this._zoomToButton = $get(splitId[0] + '_' + id + "_ZoomTo");
    this._panToButton = $get(splitId[0] + '_' + id + "_PanTo");
(3) if (this._zoomToButton != null) {
        $addHandler(this._zoomToButton, "mousedown", Function.createDelegate(this, this._zoomTo));
        $addHandler(this._zoomToButton, "keydown", Function.createDelegate(this, this._zoomKeyPress));
} 
```

奇怪的是，当我在断点 1 上使用 firebug 进行调试时，它可以找到文本框和按钮（_displayX、_displayY、_zoomToButton 和 _panToButton 不为空）。但是，如果我从 2 号或 3 号断点进行调试，或者我直接加载它（不在 firebug 中调试），则脚本无法找到文本框和按钮。

**HTML ：** 这是我从 firebug 中获取的 HTML。

```
<div id="pnlGoTo" class="ui-dialog-content ui-widget-content">
<span id="ctl00_MapBasic1_GoToLocation1" style="overflow:hidden;display:inline-block;height:75px;width:380px;">
<table cellspacing="2" cellpadding="2" style="position:relative;margin:0px 0px 0px 0px;top:0px;left:0px;">
<tbody>
<tr>
<td width="381px" align="left">
<table cellspacing="2" cellpadding="2">
<tbody>
<tr>
<td>
X:
<input id="ctl00_ctl00_MapBasic1_GoToLocation1_GoToLocationX" type="text" style="height:15px;font-size:small;width:157px;" name="ctl00$MapBasic1$ctl00_MapBasic1_GoToLocation1_GoToLocationX">
</td>
<td>
Y:
<input id="ctl00_ctl00_MapBasic1_GoToLocation1_GoToLocationY" type="text" style="height:15px;font-size:small;width:157px;" name="ctl00$MapBasic1$ctl00_MapBasic1_GoToLocation1_GoToLocationY">
</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr>
<td></td>
</tr>
<tr>
<td align="right">
<input id="ctl00_ctl00_MapBasic1_GoToLocation1_ZoomTo" type="button" style="height:25px;width:70px;font-size:small;" value="Zoom To" name="ctl00$MapBasic1$ctl00_MapBasic1_GoToLocation1_ZoomTo">
<input id="ctl00_ctl00_MapBasic1_GoToLocation1_PanTo" type="button" style="height:25px;width:70px;font-size:small;" value="Pan To" name="ctl00$MapBasic1$ctl00_MapBasic1_GoToLocation1_PanTo">
</td>
</tr>
</tbody>
</table>
</span>
</div>
</div> 
```

**目标 ：**

~~目标是让 _displayX、_displayY、_zoomToButton 和 _panToButton 不为空。~~

我只需要找到如何重新加载/刷新控件，因为它的名称已从我的 javascript 中更改。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T09:39:17.603

最后我找到了解决我的问题的方法。我使用这个 由 ESRI 创建的[Go To Location 控件](http://resources.arcgis.com/gallery/gallery/file/details?entryID=16171F59-1422-2418-7FF3-DB0A7F89926A)

一切正常。

# cakephp - Cakephp: $session->flash(); 给我错误

> ID：10611761
> 
> 赞同：1
> 
> 时间：2012-05-16T03:52:01.777
> 
> 标签：cakephp, cakephp-2.1

尽管几年前在学校的旧版 cakephp 中使用过 cakephp，但我还是很陌生。现在它需要我们使用 $session->flash(); 显示我们的错误信息。我把它放在我的 view/layouts/default.ctp 中，这就是我得到的

```
Call to a member function flash() on a non-object in
C:\xampp\htdocs\blog\app\View\Layouts\default.ctp on line 9 
```

这是我的代码：

```
class PostsController extends AppController {
    var $name = 'Posts';
    var $helpers = array('Html', 'Form', 'Session');

public function delete($id = null) {
    $this->Post->id = $id;
        if (!$id) {
            $this->Session->setFlash(_('Post does not exist!', true));
            $this->Session->redirect(array('action'=>'index'));
        }
        if ($this->Post->delete($id)) {
            $this->Session->setFlash(__('Post deleted', true));
            $this->redirect(array('action' => 'index'));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T05:22:25.823

你必须`$this->Session->flash()`在你的布局中使用，`$session->flash()`是在 CakePHP 1.x 中使用的方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-16T04:13:22.850

$this->Session->setFlash(__('Post deleted', true)); 为什么使用 double under score 你可以简单地使用

$this->Session->setFlash('帖子已删除');

# javascript - div在ios5上有黑色背景

> ID：10611763
> 
> 赞同：0
> 
> 时间：2012-05-16T03:52:06.743
> 
> 标签：javascript, jquery, html, ios5, html5-video

我正在制作一个页面，其中有一个 div、一个视频数组和按钮。有问题的 div 放置在`<video>`标记之前，并显示为黑色，而不是设置为的背景图像。我尝试将 div 放在不同的位置，在 CSS 中或直接链接图像，淡入淡出`<video>`，甚至为视频放置海报图像，使其不为空白。没有。

我能得到一些帮助吗，这必须在星期一完成（连同其他五件事），所以我很赶时间。

javascript是

```
$(document).ready(function () {
    var video = $('#myVid');
    //before everything get started
    video.on('loadedmetadata');

    $('li, .thumbs').on('click', function () {
        $('.thumbs').bind('click', function() {
        $('#MyT').fadeIn(0);
        $('.slider').fadeIn(0);
        $('.timeBar').fadeOut(0);
        });
        var numb = $(this).index(),
            videos = ['images/talking1.m4v', 'images/talking2.m4v', 'images/talking1.m4v', 'images/talking2.m4v', 'images/talking1.m4v', 'images/talking2.m4v'
            ],
            myVideo = document.getElementById('myVid');
            myVideo.src = videos[numb];
            myVideo.load();
    setTimeout(function(){
        myVideo.play();
    }, 200);
    $('#myVid').bind("playing", function() {
        $('#MyT').fadeOut(1000);
        $('.timeBar').delay(250).fadeIn(0);

    });

    $('#myVid').bind("ended", function () {
        $('.slider').fadeOut(0);
        $('.timeBar').fadeOut(0);

    });

});
}); 
```

[相关] CSS 是

```
 #bigPic {
        position:absolute;
        background-image:url(images/IMG_08532.jpg);
        margin-left:-8px;   
        margin-top:-16px;
        height:768px;   
        width:1024px;   
    }
    #wrapper {
        width: 1024px;  
        height: 768px;
    }
    #myVid{ 
        position:absolute;
        top:0;  
        left:0;
        margin:none;    
        padding:none;

    } 
```

然后html是

```
<div id="wrapper">
<div id="MyT" class="norm"></div>
    <div id="bigPic">
    <video id="myVid" class="normal" type="m4v" showlogo="false" height="768" width="1024" poster="images/IMG_08532.jpg"/>

</div>
<div class="buttons">
        <div id="content">
            <div class='slider'><div class="control"><div class="progress"><span class="timeBar"></span></div></div></div>
            <ul class='thumbs'>
              <div style="top:0px;"><li rel='1'><img src="graphics/filler.png" alt="" width="280" height="128" /></li></div>
              <div style="top:128px;"><li rel='2'><img src="graphics/filler2.png" alt="" width="280" height="128" /></li></div>
              <div style="top:256px;"<li rel='3'><img src="graphics/filler.png" alt="" width="280" height="128" /></li></div>
              <div style="top:384px;"><li rel='4'><img src="graphics/filler2.png" alt="" width="280" height="128" /></li></div>
              <div style="top:512px;"><li rel='5'><img src="graphics/filler.png" alt="" width="280" height="128" /></li></div>
              <div style="top:640px;"><li rel='6'><img src="graphics/filler2.png" alt="" width="280" height="128" /></li></div>
            </ul>
       </div>
  </div>
</div> 
```

*编辑*

这不是视频，我尝试了一些东西，它是不可见的（并且也淡出），然后它在点击时又回来了。看起来它实际上是 div“myT”，但图像链接在其他 div 上时工作正常。

请有人帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T08:07:23.547

我猜大黑是 ios 显示的“视频”。我会尝试的是：让 div 在视频之后（而不是在视频周围），绝对定位将其移动到视频上。而onclick只是隐藏它。不幸的是，您必须再次单击视频才能开始，因为苹果不允许您从 javascript 执行此操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:20:18.567

由于您已经尝试了许多方法，例如设置`<video>`海报并将图像设置为`div`包含视频的背景，但都没有奏效，因此问题很可能出在图像或图像路径上。简而言之，找不到图像。确保图像路径相对而言是正确的，并且图像存在于该路径中。

# jquery - 重写图片的url

> ID：10611765
> 
> 赞同：0
> 
> 时间：2012-05-16T03:52:12.563
> 
> 标签：jquery, asp.net-mvc

我试图使用一些插件在弹出窗口中显示图像。我试过Thickbox，fancybox，但没有用。

我认为我的网址有问题。

这是我的代码：

```
<a href='@Url.Action("GetSchemaImage", "Hall", new {folderName = @Model.FolderName })' class="fancybox"><img src='@Url.Action("GetSchemaImage", "Hall", new {folderName = @Model.FolderName })'/></a> 
```

这是控制器的操作：

```
public ActionResult GetSchemaImage(string folderName)
        {
            if(string.IsNullOrWhiteSpace(folderName))
                return new EmptyResult();
            var folder = ConfigurationManager.AppSettings["SchemasFolder"];
            var path = Path.Combine(folder, folderName);
            var schemaImage = Directory.GetFiles(path, "*.*").FirstOrDefault(s => s.EndsWith(".png") || s.EndsWith(".jpg"));
            if (schemaImage != null) 
                return File(Path.Combine(path, schemaImage), "image/png");
            return new EmptyResult();
        } 
```

这是生成的标记：

```
<a class="fancybox" href="/Hall/GetSchemaImage?folderName=marineclub"><img src="/Hall/GetSchemaImage?folderName=marineclub"></a> 
```

正如我所说，我认为 URL: 中的问题`/Hall/GetSchemaImage?folderName=marineclub`。插件无法理解这一点。

我认为 URL 必须如下：/Hall/GetSchemaImage/marineclub。我怎样才能重写我的代码以使 fancybox 可以工作？

这是javascript代码：

```
$(function () {            
        $(".fancybox").fancybox({ type: image });
}) 
```

非常感谢。

**更新：** 这是所有路线：

```
public static void RegisterRoutes(RouteCollection routes)
        {
            var entryRoute = new PageEntry("page/{name}/",
                                           new RouteValueDictionary(
                                               new
                                               {
                                                   controller = "DynamicPage",
                                                   action = "Index",
                                                   name = String.Empty
                                               }),
                                               new RouteValueDictionary(new { name = @".+" }),
                                           new MvcRouteHandler());

            routes.Add("display-page",
                       entryRoute);

            routes.MapRoute("Event Overview", "{city}/{type}/{id}",
                            new {city="astana", controller = "BaseEvent", action = "EventOverview"}, new {city = new CityConstraint()});

            routes.MapRoute(
                "Cinema", // Route name
                "{city}/cinema", // URL with parameters
                new { city = "astana", controller = "Cinema", action = "Index" }, // Parameter defaults
                new { city = new CityConstraint() }
            );

            routes.MapRoute(
                "Concert", // Route name
                "{city}/concert", // URL with parameters
                new { city = "astana", controller = "Concert", action = "Index" }, // Parameter defaults
                new { city = new CityConstraint() }
            );

            routes.MapRoute(
                "Club", // Route name
                "{city}/club", // URL with parameters
                new { city = "astana", controller = "Club", action = "Index" }, // Parameter defaults
                new { city = new CityConstraint() }
            );

            routes.MapRoute(
                "Children", // Route name
                "{city}/children", // URL with parameters
                new { city = "astana", controller = "Children", action = "Index" }, // Parameter defaults
                new { city = new CityConstraint() }
            );

            routes.MapRoute(
                "Sport", // Route name
                "{city}/other", // URL with parameters
                new { city = "astana", controller = "Other", action = "Index" }, // Parameter defaults
                new { city = new CityConstraint() }
            );

            routes.MapRoute(
                "Theater", // Route name
                "{city}/theater", // URL with parameters
                new { city = "astana", controller = "Theater", action = "Index" }, // Parameter defaults
                new { city = new CityConstraint() }
            );  

            routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Home", action = "Index", id = UrlParameter.Optional });

            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                "Activate",
                "Account/Activate/{username}/{key}",
                new
                {
                    controller = "Account",
                    action = "Activate",
                    username = UrlParameter.Optional,
                    key = UrlParameter.Optional
                });

            routes.MapRoute(
               "ResetPassword",
               "Account/Reset/{email}/{key}",
               new
               {
                   controller = "Account",
                   action = "Reset",
                   email = UrlParameter.Optional,
                   key = UrlParameter.Optional
               });
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:38:43.817

因此，如果您想要这样的 URL：`/Hall/GetSchemaImage/marineclub`您可以做**以下**两件事之一：

*   像这样更改您的**操作方法，使其与您的默认路由匹配：**

    ```
    public ActionResult GetSchemaImage(string id) 
    ```

    所以现在`Hall/GetSchemaImage/marineclub`=>`{controller}/{action}/{id}`

**或者**

*   添加**路由**以匹配您的控制器：

    ```
    routes.MapRoute(
                "ImageStuff", // Route name
                "{controller}/{action}/{folderName}", // URL with parameters
                new { controller = "Hall", action = "GetSchemaImage",
                    folderName = UrlParameter.Optional });
                    //^^ if set optional it will null if not specified. 
    ```

# jquery - 任何人都知道一个很酷的 jquery 进化图片吗？

> ID：10611766
> 
> 赞同：1
> 
> 时间：2012-05-16T03:52:19.223
> 
> 标签：jquery, image, jquery-plugins, user-interface

有点奇怪的请求，但是有没有人知道任何很酷的 jquery 插件可以根据数字（例如声誉点）改变其图片的设计或形状？

类似于 StackOverflow 用户图标，它们似乎时不时地变化和变形（可能基于声誉），我想知道是否有人知道类似的方法来做到这一点。

感谢您的输入！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T04:15:46.027

我不知道任何 jQuery 插件，但是建议您可以创建一些可以将字符串或散列转换为图像（甚至可能在画布元素中）的效果并不是不合理的，尽管它可能是最好将其远离客户端计算机并在服务器上执行此类操作。

前段时间 Stack Overflow 推出了一个自定义的 gravatar-ish 替代方案来“独角兽化”每个人的化身。[您可以在http://unicornify.appspot.com/use-it](http://unicornify.appspot.com/use-it)了解有关该特定设置的更多信息，以及它的历史：[https ://meta.stackexchange.com/questions/37328/my-godits-full-独角兽](https://meta.stackexchange.com/questions/37328/my-godits-full-of-unicorns)。这是[@balpha](https://stackoverflow.com/users/115866/balpha)的工作。

可以理解，Gravatar 将他们的算法保持在锁定和密钥之下。[Avatarco](http://code.google.com/p/avatarco/)是一种开源 PHP 替代方案，旨在提供类似于 Gravatar 的功能。我鼓励您仔细阅读他们的资料，以便更好地了解您如何完成类似的事情。

# wso2 - WSO2 数据服务服务器和 LDAP 集成

> ID：10611769
> 
> 赞同：2
> 
> 时间：2012-05-16T03:52:36.043
> 
> 标签：wso2, wso2dss

我目前正在尝试将 WSO2 数据服务服务器与我公司的 LDAP 服务器集成。我已密切遵循 DSS 管理指南中的步骤： [http](http://wso2.org/project/data-services/2.6.3/docs/user-core/admin_guide.html#LDAP) ://wso2.org/project/data-services/2.6.3/docs/user-core/admin_guide.html#LDAP 在以下部分：5\. 如何配置外部 LDAP 用户存储/Active Directory 用户存储

经过一些故障排除后，我能够使用
CARBON_HOME\repository\conf\user-mgt.xml中的 LDAP 设置启动 DSS 服务器

但是，当我尝试通过管理页面登录时@

```
https://localhost:9443/carbon/admin/login.jsp 
```

使用我的 LDAP 用户 ID 和密码，我无法成功登录。

CARBON_HOME\repository\logs\wso2carbon.log 中的错误消息：

> WARN {org.wso2.carbon.core.services.util.CarbonAuthenticationUtil} - 在 [2012-05-16 11:33:49,0720] 从 IP 地址 127.0.0.1 {org 的管理员登录尝试“userID[0]”失败.wso2.carbon.core.services.util.CarbonAuthenticationUtil}

以下是我的配置文件：

```
<UserManager>
    <Realm>
        <Configuration>
                <AdminRole>admin</AdminRole>
                <AdminUser>
                     <UserName>userID</UserName>
                     <Password>XXXXXX</Password>
                </AdminUser>
            <EveryOneRoleName>everyone</EveryOneRoleName> <!-- By default users in this role sees the registry root -->
            <Property name="url">jdbc:h2:repository/database/WSO2CARBON_DB;DB_CLOSE_ON_EXIT=FALSE</Property>
            <Property name="userName">wso2carbon</Property>
            <Property name="password">wso2carbon</Property>
            <Property name="driverName">org.h2.Driver</Property>
            <Property name="maxActive">50</Property>
            <Property name="maxWait">60000</Property>
            <Property name="minIdle">5</Property>
        </Configuration>
    <!-- If product is using an external LDAP as the user store in read only mode, use following user manager -->
        <UserStoreManager class="org.wso2.carbon.user.core.ldap.LDAPUserStoreManager">
            <Property name="ReadOnly">true</Property>
            <Property name="MaxUserNameListLength">100</Property>
            <Property name="ConnectionURL">ldap://ldap.xx.xx.xx:389</Property>
            <Property name="ConnectionName">cn=ssssss,OU=YYYYYY,dc=aa,dc=bb,dc=cc</Property>
            <Property name="ConnectionPassword">pppppp</Property>
            <Property name="UserSearchBase">DC=aa,DC=bb,DC=cc</Property>
            <Property name="UserNameListFilter">(objectClass=user)</Property>
            <Property name="UserNameAttribute">cn</Property>
            <Property name="ReadLDAPGroups">false</Property>
            <Property name="GroupSearchBase">ou=system</Property>
            <Property name="GroupNameListFilter">(objectClass=groupOfNames)</Property>
            <Property name="GroupNameAttribute">cn</Property>
            <Property name="MembershipAttribute">member</Property>
            <Property name="UserRolesCacheEnabled">true</Property>
        <Property name="ReplaceEscapeCharactersAtUserLogin">true</Property>
        </UserStoreManager>
        <AuthorizationManager
            class="org.wso2.carbon.user.core.authorization.JDBCAuthorizationManager">
            <Property name="AdminRoleManagementPermissions">/permission</Property>
            <!-- Uncommenting the following element will enable the periodically running permission update task.
             It is disabled by default. -->
            <!-- <Property name="UpdatePermissionTreePeriodically">true</Property> -->
        </AuthorizationManager>
    </Realm>
</UserManager> 
```

我还提到了这个链接： [http](http://wso2.org/library/knowledge-base/import-ldap-users-carbon-based-products) ://wso2.org/library/knowledge-base/import-ldap-users-carbon-based-products 关于“如何将 LDAP 用户导入 WSO2 碳基产品”但它没有t 似乎适用于 DSS，因为它在用户管理页面中没有“添加外部用户存储”选项。

将感谢我做错了什么的任何建议。我正在使用 wso2dataservices-2.6.3。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-19T15:21:27.710

Are you trying to login as the admin user - which is mentioned as the top of the user-mgt.xml or as any other user in the LDAP?

If you are trying to login as a non-admin user, you need to first login as admin user and enable login permission to every one role.

The second reference you have provided doesn't apply to the current versions of the products.

Thanks, Hasini.

# android - Android Custom RadioButton Override onDraw 不断调用

> ID：10611779
> 
> 赞同：0
> 
> 时间：2012-05-16T03:55:20.683
> 
> 标签：android, radio-button

我创建了一个自定义 RadioButton 类，并覆盖其 onDraw 函数，如下所示：

```
@Override
public void onDraw(Canvas canvas) {

        Log.d( "Custom radio button" ,  "this run onDraw() "  + (times++) +  " times! ");  
    } 
```

其实onDraw函数里面有很多代码，但是我已经全部注释掉了，但是onDraw函数还是被一次又一次的调用……

我尝试将自定义单选按钮添加到单选组，如下所示：

```
 radioGroup = (RadioGroup)findViewById(R.main.radioGroup);
    customRadioButton = new customRadioButton(this);
    radioGroup.addView(customRadioButton); 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T14:47:04.763

该`OnDraw()`函数被设计为在应用程序过程中被多次调用（无论何时`View`失效，在其他情况下也是如此）。可能是出于某种原因多次调用它。它是被一遍又一遍地调用（就像一个无限循环）还是因为它被多次调用而担心？

# c# - 使用 C# 将 infopath 表单下载为 XML 文件

> ID：10611782
> 
> 赞同：2
> 
> 时间：2012-05-16T03:55:44.370
> 
> 标签：c#, .net, infopath

我正在尝试使用 C#在我的一个 Intranet 站点上下载 InfoPath 表单，例如 _http://ABC/XYZ/abc/PhysicsDept/Requests/Myform.xml （这是变量**formName的值）。**我正在使用下面的代码

```
using (WebClient client = new WebClient())
{
    // Set the credentials to be used for download from Sharepoint
    client.Credentials = CredentialCache.DefaultCredentials;
    client.DownloadFile(formName, "tempForm.xml");
} 
```

tempForm.xml 已创建，但遗憾的是它包含一些奇怪的 html 数据，这肯定是我不想要的。如果我只是尝试打开链接，取自 formName 的值，那么我可以轻松地将其视为 XML，因此链接正确且有效。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T04:43:16.267

很可能您最终会使用 HTML 呈现表单 (XML)，因为相应的表单模板已启用浏览器。

添加 "?NoRedirect=true" 查询参数（请参阅[Query Parameters for Browser-Enabled forms](http://msdn.microsoft.com/en-us/library/ms772417%28v=office.12%29.aspx)）以强制文件下载。（应该还有其他方法，我现在不记得了……）

# actionscript-3 - Flash：第一行中的文本抗锯齿错误

> ID：10611783
> 
> 赞同：0
> 
> 时间：2012-05-16T03:55:44.873
> 
> 标签：actionscript-3, flash, text, antialiasing

![这就是问题](../Images/b626590078c733e6fd63c11498cf6fb5.png)

如您所见，字母 P 存在抗锯齿问题。

我尝试将 AntiAliasType.ADVANCED 更改为 NORMAL ... 结果相同。

也许如果有一些 padding-top 属性......但没有。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:22:00.277

您可以调整文本字段的清晰度和厚度：

```
var textfield:TextField = new TextField;
textfield.antiAliasType = AntiAliasType.ADVANCED;
textfield.sharpness = 100;
textfield.thickness = 100; 
```

了解您的字体、嵌入和文本格式，任何缩放、舞台质量和大小都会有所帮助；就像在代码中看到您的编程实现一样。检查您的 TextField 边界 - 确保适当的高度。

每个反别名，`AntiAliasType.ADVANCED`应该产生更高的质量；但是，当接近超过 48pt 的较大字体时，它并不是最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:49:23.560

尝试将文本字段放置在具有纯色矩形（与主背景相同）的精灵中，没有纯色背景的高级抗锯齿文本字段可能会导致渲染问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T09:52:10.777

检查您的文本字段坐标 (x, y) 是否为全像素（整数）。

# windows - 我的代码坏了吗？windows下的ftp脚本

> ID：10611786
> 
> 赞同：0
> 
> 时间：2012-05-16T03:55:53.673
> 
> 标签：windows, ftp, batch-file, windows-server-2003

我编写了一些脚本，这些脚本将文件从服务器 ftp 传输到本地机器。脚本在不同模式下具有不同的行为。

如果我以交互方式运行它，则 ftp 很好：

```
ftp> mget *abc*.reviewed
200 Type set to A.
200 PORT command successful.
150 Opening ASCII mode data connection for xxx_abc_yyyymmdd.reviewed(506 bytes).
226 Transfer complete.
ftp: 506 bytes received in 0.00Seconds 506000.00Kbytes/sec. 
```

如果我在 windows 任务计划程序中安排它，它只显示以下内容：

```
ftp> mget *abc*.reviewed
200 Type set to A. 
```

我怀疑后面有错误，但没有日志。我做错了什么？

我的代码示例：

```
call :Logic > E:\ftp_%yyyymmdd%.log 2>&1 
exit /b 0
:Logic
ftp -i -s:C:\App\XXX\bin\ftp_script.txt some.host.net 
```

我将输出写入日志文件，但我不知道错误流是否已成功配置。我可能会丢失一些错误日志。

ftp_script.txt 的内容：

```
username
password
lcd E:\YYY
cd /XXX/YYY/ZZZ
mget *abc*.reviewed
mget *bcd*.reviewed
mget *cde*.reviewed
bye 
```

* * *

进一步的案例研究：

该脚本计划在每天晚上 8 点运行。我今天检查了服务器，发现目标服务器包含我想要的文件，最后修改的属性是下午 6:54。所以文件应该在晚上 8 点出现，并且在昨天的计划中它们不是 ftp。

我假设最后修改的属性等于它被复制（从其他目录）或重命名（文件应该从 .csv 重命名为 .reviewed ）的时间。

我在下午 12:40 安排了一个一次性任务来运行脚本，并且文件成功地从目标服务器 ftp 到本地服务器。

这真的很令人困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:23:19.603

这可能是防火墙在主动 FTP 模式下拒绝连接的问题，您可以尝试设置被动模式发出 PASV 命令（**QUOTE PASV**与 Windows ftp.exe），看看这是否解决了问题（有关两种不同模式的更多详细信息，请参见[此处](http://slacksite.com/other/ftp.html)) .
我还建议您设置调试以便从服务器获取详细信息（添加 DEBUG 命令）。
如果您不传输文本，请记住也包含 BINARY 命令。

# iphone - 如何使用 iwebkit 获取 iPhone 的唯一标识符 (UDID)？

> ID：10611790
> 
> 赞同：0
> 
> 时间：2012-05-16T03:56:19.133
> 
> 标签：iphone, udid, iwebkit

> **可能重复：**
> [我可以通过带有 js Web 应用程序的 Safari 检索 ipad 唯一设备标识符吗？](https://stackoverflow.com/questions/3764115/can-i-retrieve-an-ipad-unique-device-identifier-that-through-safari-with-a-js-we)
> [UIDevice uniqueIdentifier 已弃用 - 现在该怎么办？](https://stackoverflow.com/questions/6993325/uidevice-uniqueidentifier-deprecated-what-to-do-now)

如何使用 iwebkit 获取 iPhone 的唯一标识符 (UDID)...任何代码？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-05-16T04:03:05.537

这是不可能的，如果是这样，那应该是错误。

// 以下解决方法（参考）可能会对您有所帮助.. //

[http://whatismyudid.com/](http://whatismyudid.com/)

希望，这可以帮助你..

# css - 如何更改sencha中Select Field的选定值的颜色？

> ID：10611792
> 
> 赞同：2
> 
> 时间：2012-05-16T03:56:52.557
> 
> 标签：css, sencha-touch-2

如何更改sencha中Select Field的选定值的颜色？默认情况下显示为灰色。

```
 {

                    xtype: 'selectfield',
                    ui: 'text',
                    value : 12,
                    cls:'b',
                    style: {
                        'font-size':'12px',
                    },
                    options: belts
                }, 
```

在我的 app.scss 我有：

```
.b
{
color:black !important;
 } 
```

我也试过：

```
 {

                    xtype: 'selectfield',
                    ui: 'text',
                    value : 12,
                    cls:'b',
                    style:  'font-size:12px;color:black',
                    options: belts
                }, 
```

谁能帮帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:37:39.990

我实际上希望文本以黑色显示。改变

```
ui:'text' 
```

到

```
ui:'plain' 
```

帮我解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-23T09:03:07.850

试试这种方式：-

```
{
  xtype: 'selectfield',
  label: 'Choose one',
  inputCls:'selecttext',
  options: [
             {text: 'First Option',  value: 'first'},
             {text: 'Second Option', value: 'second'},
             {text: 'Third Option',  value: 'third'}
           ]
} 
```

在 css 中制作类

```
.selecttext{
   color: #f25454 !important;
   -webkit-text-fill-color:#f25454 !important;
   background-color: #2d2d2d;
} 
```

# c# - mvvm 中的 poco 是什么？

> ID：10611793
> 
> 赞同：-1
> 
> 时间：2012-05-16T03:57:06.807
> 
> 标签：c#, mvvm

在这里，我在 WPF 中使用 MVVM，并且我读到它包含 poco。我还读到它包含香草属性。

```
 public class AccountCategory : IDataErrorInfo, IValidable
    {
        #region State Properties

        public int Id { get; set; }
        public string Name { get; set; }
        public string Description { get; set; }
        public AccountCategory ParentCategory { get; set; }
        public bool Builtin { get; set; }

    } 
```

那是什么？linq to sql 是 Microsoft 实体框架吗？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:05:19.290

我猜他们指的是实体框架。POCO 的意思是“普通的旧 CLR 对象”。一些 ORM 要求实体从特定的基类继承，在类和属性上使用特殊属性以及其他方法，以便将对象映射到数据库。

Linq To SQL 要求您使用设计器生成的类，它使用属性和类似的东西。

“POCO”方法是指 ORM 可以映射任何对象，而不需要特殊属性或基本类型。因此，我假设他们在谈论 EF，因为 4+ 支持 POCO 映射。

# ruby-on-rails - 如何在where子句中组合两个条件？

> ID：10611795
> 
> 赞同：39
> 
> 时间：2012-05-16T03:57:23.197
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有以下内容：

```
time_range = (1.month.ago.beginning_of_month..1.month.ago.end_of_month)

Comment.where(:created_at => time_range).count 
```

如何使用如下语句添加到 where 子句：

```
.where("user_id is not in (?)",[user_ids]). 
```

我怎样才能将两者结合起来？谢谢

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-05-16T03:59:51.813

如果你想要一个“AND”条件查询，试试这个：

```
Comment.
  where(:created_at => time_range).
  where("user_id is not in (?)",[user_ids]) 
```

这将产生如下 SQL： `select ... where ... AND ...`

如果你想让 WHERE 子句更复杂，例如: `where ( a AND b) OR (c AND d)`，你必须自己将条件组合到子句中，例如

```
Comment.where("(a AND b ) OR (c AND d)") 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-06-17T04:55:11.343

```
User.where(["name = ? and email = ?", "Joe", "joe@example.com"]) 
```

这会很好。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-08-21T14:40:31.353

```
User.where(name: 'Joe', email: 'joe@example.com') 
```

# javascript - 有没有办法动态加载本地JS文件？

> ID：10611796
> 
> 赞同：12
> 
> 时间：2012-05-16T03:57:44.077
> 
> 标签：javascript, google-chrome

出于开发目的，我希望能够轻松地将本地存储的脚本加载到浏览器中，而不必复制粘贴到控制台。

创建新`<script>`元素不起作用，它会给出`Not allowed to load local resource: file://....`错误（在 Chrome 中）。

此外，创建用户脚本也行不通——我每次进行编辑时都必须重新安装它。

有没有另一种方法可以通过小书签/等轻松加载本地脚本？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-16T05:04:05.297

在 Chrome 中，您可以创建一个扩展程序来保存您需要加载的所有本地文件。它将使您的文件可以通过`chrome-extension://...`而不是`file://...`

在新文件夹中创建一个名为`manifest.json`的文件并填写：

```
{
  "name": "File holder",
  "manifest_version": 2,
  "version": "1.0",
  "web_accessible_resources": ["test.js", "other.js", "yetanother.js"]
} 
```

然后，将您要加载的所有脚本放在该新目录中，并确保它们包含在`web_accessbile_reources`清单列表中。通过转到`chrome://extensions`、启用`Developer Mode`和选择新文件夹来加载扩展`Load unpacked extension...`。

现在您可以使用 访问扩展目录中的所有文件`chrome-extension://[app_id]/[file_name]`，其中“ `app_id`”是页面上为扩展列出的哈希`chrome://extensions`。请注意，由于协议和主机名与您进行实际工作的位置不同（除非您决定在扩展文件夹中进行所有开发，这可能对您来说是可以接受的），因此扩展资源是跨域的，并且只能是通过`<script>`标签加载。

现在从控制台，您可以执行以下操作：

```
var s = document.createElement("script");
s.src = "chrome-extension://aefigdoelbemgaedgkcjpcnilbgagpcn/test.js";
document.body.appendChild(s); 
```

（假设您的文件是`test.js`并且您的应用程序 ID 是`aefigdoelbemgaedgkcjpcnilbgagpcn`。）

我知道，打字有点麻烦，但也许您可以将`chrome-extension://[app_id]`部分存储为速记变量？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T05:09:12.603

遗憾的是，[Chrome 不允许您通过 AJAX 加载本地文件](http://code.google.com/p/chromium/issues/detail?id=40787)；但是，您可以通过启动带有标志的浏览器来解决此限制`--disable-web-security`（详细信息因主机操作系统而异）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-03T07:39:39.837

运行 chrome 为： `chrome.exe --allow-file-access-from-files` 从 CLI

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-23T13:52:46.870

你需要运行本地http服务器

这是一个很好的文档：

[https://developer.mozilla.org/en-US/docs/Learn/Common_questions/set_up_a_local_testing_server](https://developer.mozilla.org/en-US/docs/Learn/Common_questions/set_up_a_local_testing_server)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-16T05:03:58.457

您是否尝试过从页面到 js 文件的相对路径，所以...

src='/js/javascript.js'

# php - 如何防止单词在“echo”命令中重复？

> ID：10611801
> 
> 赞同：1
> 
> 时间：2012-05-16T03:58:25.653
> 
> 标签：php, while-loop, left-join, echo

我第一次遇到这种奇怪的情况，并且考虑到我在 PHP 中的新状态，它更加令人困惑。在下面的查询中，“asked by”一词的重复次数超出了应有的次数。它重复的次数与我猜它不应该显示的条目数量有关。

代码：

```
$sql = "SELECT DISTINCT 
          allowed_permissions.post_id, 
          client_visit.client_reason, 
          accounts.full_name, 
          client_visit.type 
        from allowed_permissions 
          LEFT JOIN 
            client_visit 
              on allowed_permissions.post_id = client_visit.visit_id 
          LEFT JOIN 
            accounts 
              ON client_visit.system_id = accounts.system_id 
        where    
          allowed_permissions.allowed_to_view = '$uid'";

$result = mysql_query($sql);

$query = mysql_query($sql) or die ("Error: ".mysql_error());

if ($result == "") {
  echo "";
}
echo "";

$rows = mysql_num_rows($result);

if($rows == 0) {

} elseif($rows > 0) {
  while($row = mysql_fetch_assoc($query)) {
    $reason = $row['client_reason'];
    $person = $row['full_name'];
    //Here the asked word gets repeated...
    echo"$reason asked by $person"; 
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:22:41.897

令人惊讶的是，只有“询问”会被重复……“询问”似乎更有可能。您会得到一堆不包含 $reason 或 $person 的行，因此 PHP 打印出文字文本并省略了变量。如果是这种情况，您可以通过执行以下操作来解决它：

```
if ( ! empty( $reason ) && ! empty( $person ) ) {
    echo $reason . ' asked by ' . $person;
} 
```

如果这样可以解决它，您仍然应该处理查询中的更大问题。这显然不太对。如果没有更多的上下文，很难说你应该如何解决它。我猜你需要放弃 DISTINCT 并实现一个 GROUP BY 子句。

# unit-testing - Grails 2.0.3 集成测试因奇怪原因而失败（域模型上的 save() 不可用于第二次调用 setup 方法）

> ID：10611802
> 
> 赞同：0
> 
> 时间：2012-05-16T03:58:32.487
> 
> 标签：unit-testing, grails, groovy, grails-2.0

我最近开始认真地使用 Grails 2.0，但我遇到了一个对我来说没有多大意义的障碍。我已经编写了一个集成测试，它对控制器使用 @TestFor 注释，但是我从中得到了非常奇怪的错误。以下是测试，精简到重复此问题的最小情况：

```
import org.junit.*
import grails.test.mixin.TestFor

@TestFor(OrderController)
class OrderControllerIntegrationTests {

    public EndUser user

    @Before public void initialize() {
        user = new EndUser(username: UUID.randomUUID().toString(), password: "secret");
        user.save()
    }

    @Test public void get() {
        assert true
    }

    @Test public void create() {
        assert true
    }

} 
```

总之，我得到的输出是我的测试设置中的 save() 方法不再存在于此类中的第二个测试。这似乎……很奇怪。

以下是 grails test-app exampleapp.OrderControllerIntegrationTests 的完整输出：

```
Testsuite: exampleapp.OrderControllerIntegrationTests
Tests run: 2, Failures: 0, Errors: 1, Time elapsed: 0.769 sec
------------- Standard Output ---------------
--Output from get--
2012-05-15 22:35:03,491 [main] DEBUG transaction.JDBCTransaction  - begin

2012-05-15 22:35:03,493 [main] DEBUG transaction.JDBCTransaction  - current autocommit status: true

2012-05-15 22:35:03,493 [main] DEBUG transaction.JDBCTransaction  - disabling autocommit

2012-05-15 22:35:03,689 [main] DEBUG hibernate.SQL  - insert into widget_user (id, version, password, username, class) values (null, ?, ?, ?, 'exampleapp.EndUser')

2012-05-15 22:35:03,970 [main] DEBUG transaction.JDBCTransaction  - rollback

2012-05-15 22:35:03,970 [main] DEBUG transaction.JDBCTransaction  - re-enabling autocommit

2012-05-15 22:35:03,970 [main] DEBUG transaction.JDBCTransaction  - rolled back JDBC Connection

--Output from create--
2012-05-15 22:35:03,979 [main] DEBUG transaction.JDBCTransaction  - begin

2012-05-15 22:35:03,979 [main] DEBUG transaction.JDBCTransaction  - current autocommit status: true

2012-05-15 22:35:03,979 [main] DEBUG transaction.JDBCTransaction  - disabling autocommit

2012-05-15 22:35:04,207 [main] DEBUG transaction.JDBCTransaction  - rollback

2012-05-15 22:35:04,207 [main] DEBUG transaction.JDBCTransaction  - re-enabling autocommit

2012-05-15 22:35:04,207 [main] DEBUG transaction.JDBCTransaction  - rolled back JDBC Connection

------------- ---------------- ---------------
------------- Standard Error -----------------
--Output from get--
--Output from create--
------------- ---------------- ---------------

Testcase: get took 0.51 sec
Testcase: create took 0.251 sec
    Caused an ERROR
No signature of method: exampleapp.EndUser.save() is applicable for argument types: () values: []
Possible solutions: save(), save(), save(boolean), save(java.util.Map), save(boolean), save(java.util.Map)
groovy.lang.MissingMethodException: No signature of method: exampleapp.EndUser.save() is applicable for argument types: () values: []
Possible solutions: save(), save(), save(boolean), save(java.util.Map), save(boolean), save(java.util.Map)
    at exampleapp.OrderControllerIntegrationTests.initialize(OrderControllerIntegrationTests.groovy:17) 
```

有没有人有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-26T15:13:30.283

@TestFor 仅用于单元测试。

您可以通过执行以下操作注入控制器

```
class OrderControllerIntegrationTests extends GroovyTestCase {
    OrderController orderController
    EndUser user

    @Before
    void initialize() {
        user = new EndUser(username: UUID.randomUUID().toString(), password: "secret");
        user.save()
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:52:33.827

您没有使用`@Mock`EndUser 类，所以我不确定您是如何让它在第一次测试中工作的。

我会将注释添加到您的课程中，看看是否可以解决它：

```
@TestFor(OrderController)
@Mock([EndUser])
class OrderControllerIntegrationTests{ 
```

# visual-studio - Visual Studio 11 使用 vs2005 解决方案

> ID：10611803
> 
> 赞同：1
> 
> 时间：2012-05-16T03:58:41.750
> 
> 标签：visual-studio, projects-and-solutions

是否可以在vs11中打开vs2005解决方案并保存而不转换解决方案。比如我老板用vs2005，我想用vs11。这可能吗？

# android - 如何使图像透明android

> ID：10611806
> 
> 赞同：0
> 
> 时间：2012-05-16T03:59:06.090
> 
> 标签：android

想我有一个从媒体商店的专辑封面加载的位图，它有 100% 的透明值，我怎样才能将其更改为 50 或 30？

另外，您知道我可以使图像变成黑白的任何方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:15:17.337

使用以下方法：

```
/**
 * @param bitmap The source bitmap.
 * @param opacity a value between 0 (completely transparent) and 255 (completely
 * opaque).
 * @return The opacity-adjusted bitmap.  If the source bitmap is mutable it will be
 * adjusted and returned, otherwise a new bitmap is created.
 */
private Bitmap adjustOpacity(Bitmap bitmap, int opacity)
{
    Bitmap mutableBitmap = bitmap.copy(Bitmap.Config.ARGB_8888, true);
    Canvas canvas = new Canvas(mutableBitmap);
    int colour = (opacity & 0xFF) << 24;
    canvas.drawColor(colour, PorterDuff.Mode.DST_IN);
    return mutableBitmap;
} 
```

此处说明：http: [//blog.uncommons.org/2011/01/12/adjusting-the-opacity-of-an-android-bitmap/](http://blog.uncommons.org/2011/01/12/adjusting-the-opacity-of-an-android-bitmap/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T05:27:22.623

将 alpha 设置在 0 到 255 之间！！

alpha 设置为 45 将使图像透明

ViewName.getBackground().setAlpha(65);

# shell - Shell：如何将除最后修改的所有文件移动到另一个目录

> ID：10611812
> 
> 赞同：0
> 
> 时间：2012-05-16T03:59:27.820
> 
> 标签：shell

如何移动目录中的所有文件，除了最近修改时间的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T14:20:52.083

假设几乎没有：

```
mv $(ls -lt | grep ^- | awk 'NR>1 {print $NF}') other_directory 
```

我们用`ls -l|grep ^-`grep 搜索普通文件。`ls -t`按 mtime 对它们进行排序，最年轻的在前。awk 然后剥离最年轻的文件，只打印文件名。Unix不酷吗！？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T20:04:03.030

实际上是通过使用以下方法弄清楚的：

`find /Users/tb582/Desktop/scripts/output -type f -maxdepth 1 -not -cmin -2 -exec mv {} /Users/tb582/Desktop/scripts/output/archive \;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T14:06:40.590

假设 GNU coreutils：

```
stat -c "%Y:%F:%n" * |
sort -t: -n |
grep ':regular file:' |
head -n -1 |
cut -d: -f3- |
xargs mv -t other_directory 
```

*   `stat`发出修改后的类型和文件类型
*   `sort`按时间排序
*   `grep`忽略子目录
*   `head`列出除最新文件之外的所有文件
*   `cut`仅提取文件名
*   `xargs`提供文件名作为参数`mv`

# scala - SBT 编译源文件而不考虑时间戳

> ID：10611817
> 
> 赞同：3
> 
> 时间：2012-05-16T03:59:57.520
> 
> 标签：scala, sbt

我观察到 SBT 每次发出“编译”任务时都会编译所有源文件，而不管自上次编译以来的时间戳。以下是我的 build.sbt 文件：

```
name := "HelloSbt"

scalaVersion := "2.8.2"

unmanagedSourceDirectories in Compile := List(file("src")) 
```

以下是我的项目结构（忽略项目和目标目录）：

```
./src
./src/Hello1.scala
./src/a
./src/a/Hello2.scala
./build.sbt 
```

这两个源文件只是用于测试目的的空对象定义。

当我输入“sbt compile”时，我得到了以下信息：

```
[info] Compiling 2 Scala sources to... 
```

我可以在目标目录中找到新编译的类文件。

在不修改任何源文件的情况下，一分钟后，再次输入“sbt compile”，我得到了相同的信息和类文件，除了类文件的时间戳是最新的。我期待第二次编译不会找到任何修改过的源文件，也不应该发生编译。

我在 Windows 7 和 Debian 中都进行了测试。在测试期间，我没有打开任何编辑器。有人可以提供一些关于如何设置自定义 src 目录的提示，同时仍然只能编译自上次构建以来修改过的文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T05:49:55.193

那是因为您使用的是相对路径，就好像它是绝对路径一样。我很惊讶它甚至会产生结果，但是，无论如何，你应该这样写：

```
unmanagedSourceDirectories in Compile <<= baseDirectory(base => List(base / "src")) 
```

# ios - ipod 4th gen wont load app

> ID：10611819
> 
> 赞同：0
> 
> 时间：2012-05-16T04:00:33.623
> 
> 标签：ios, ios5

Ive tested my app on the iphone 3GS+, and all the ipads and it just gives me a black screen after the loading screen is done. Its an openGL ES app, and after buying one here is the stack trace. Anyone know what is the problem?

```
0 Husky Bus Free 0x001950da + 0
1 Husky Bus Free 0x00195d04 + 0
2 libsystem_c.dylib 0x32a0b7ec _sigtramp + 48
3 libGPUSupportMercury.dylib 0x37c360b4 gpus_KillClient + 24
4 libGPUSupportMercury.dylib 0x37c365c0 gpusSubmitDMABuffers + 136
5 IMGSGX543GLDriver 0x3396e536 SubmitPacketsIfAny + 158
6 IMGSGX543GLDriver 0x3396e65a glrFlushContextToken + 38
7 GLEngine 0x34b4ec50 gliPresentViewES + 216
8 OpenGLES 0x358506ba -[EAGLContext presentRenderbuffer:] + 66
9 Husky Bus Free 0x000e72aa + 0
10 Foundation 0x3512360c __NSFireTimer + 144
11 CoreFoundation 0x355d3a32 __CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 14
12 CoreFoundation 0x355d3698 __CFRunLoopDoTimer + 364
13 CoreFoundation 0x355d226e __CFRunLoopRun + 1206
14 CoreFoundation 0x355554a4 CFRunLoopRunSpecific + 300
15 CoreFoundation 0x3555536c CFRunLoopRunInMode + 104
16 GraphicsServices 0x371f1438 GSEventRunModal + 136
17 UIKit 0x33061cd4 UIApplicationMain + 1080
18 Husky Bus Free 0x000e666c + 0
19 Husky Bus Free 0x000e1393 + 0 
```

# assembly - 跨平台/架构汇编语言

> ID：10611826
> 
> 赞同：6
> 
> 时间：2012-05-16T04:01:52.227
> 
> 标签：assembly, architecture, programming-languages, cross-platform, bytecode

我知道汇编语言通常不是跨平台的。即使使用 NASM 之类的东西，您仍然需要针对不同的架构和平台使用不同的代码，这些架构和平台具有不同的运行时和中断等事物的实现。但是如果有人因为喜欢而想用汇编语言编程，那么有没有跨平台跨架构的汇编语言的实现呢？

**编辑：**

不是传统意义上的汇编，而是一种看起来很像汇编的低级编程语言呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T05:37:18.993

我认为 Donald Knuth 的[MMIX](http://en.wikipedia.org/wiki/MMIX)是您可能感兴趣的。Knuth 在他[的计算机编程艺术一书中](http://en.wikipedia.org/wiki/The_Art_of_Computer_Programming)用这种机器/汇编语言编写程序。迄今为止，没有 CPU 直接支持它。只有模拟器。哦，有人做了一个可以运行它的FPGA。但仅此而已。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-06T03:21:49.340

LLVM 是一种低级语言（其目的是编译器后端），看起来很像 AT&T 汇编，如果不是差 10 倍的话。这是一个例子：

```
define i32 @add_sub(i32 %x, i32 %y, i32 %z) {
entry:
  %tmp = add i32 %x, %y
  %tmp2 = sub i32 %tmp, %z
  ret i32 %tmp2
} 
```

这与以下手写 x86 程序集*大致等效：*

```
; Body
mov eax, edi
add eax, esi
sub eax, edx
ret 
```

LLVM llc 3.3 生成以下代码（为了便于阅读，缩进不同）：

```
 .file    "add_sub.ll"
    .text
    .globl    add_sub
    .align    16, 0x90
    .type    add_sub,@function
add_sub:                        # @add_sub
    .cfi_startproc
# BB#0:                         # %entry
    lea    EAX, DWORD PTR [RDI + RSI]
    sub    EAX, EDX
    ret
.Ltmp0:
    .size    add_sub, .Ltmp0-add_sub
    .cfi_endproc

    .section    ".note.GNU-stack","",@progbits 
```

相关代码是这样的：

```
lea    EAX, DWORD PTR [RDI + RSI]
sub    EAX, EDX
ret 
```

如您所见，LLVM 有一个非常强大的优化器。它可能是您将得到的最接近的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-16T04:08:01.750

不，C 语言可能是最接近跨平台低级语言的语言。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-16T04:14:50.953

以下链接似乎是相关的。 [为什么字节码编程不像汇编编程那样流行或流行？](https://stackoverflow.com/questions/5925975/why-is-programming-in-bytecode-not-as-popular-or-prevalent-as-programming-in-ass)

特别是ikegami的回答：

> 人工汇编语言旨在满足其设计语言的需求，并且与它们有非常密切的关系，而不是硬件。在高级语言中，没有什么比用它们更容易实现的了。<

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-16T05:11:37.907

编辑：

汇编语言通常与机器代码或该处理器/系统的指令集具有一对一的关系。根据定义，系统是不同的，因为它们具有不同的指令集。所以，根据定义，你不能有一个跨系统的指令集，所以没有跨系统的汇编语言，它仍然被称为汇编语言。

如果你愿意的话，你会发现最接近的是虚拟指令集，它们接近于机器级别，因为它们具有许多指令集共有的属性，与机器代码是一对一或一对多的关系，但不是特定于一台机器尤其。例如 java 字节码、python 字节码、pascal p-code 等。这些都是基于堆栈的机器，大多数处理器都有堆栈或者可以使用加载和存储轻松实现基于堆栈的机器。基于堆栈的机器使用很少的寄存器，这是获得跨系统的另一种方式，并且不会让在各种指令集上实现起来太痛苦。基于堆栈的也是 small-c 后端的核心，这就是为什么它很容易从一个系统移植到另一个系统的原因。历史总是重演，

如果你喜欢汇编，你可能会发现 java 或 python 后端很有趣，也许很有趣。他们可能没有汇编语言，只有机器代码，因此您可能需要编写自己的汇编程序。就我个人而言，我会从反汇编程序开始以了解语言，然后另辟蹊径，编写字节码或创建汇编程序。为特定处理器实现虚拟机可能同样有趣。

您关于喜欢汇编语言然后使用 NASM 一词的评论意味着 x86。x86 是一种有点令人不快的汇编语言，如果您没有体验过其他人，那么那里有许多更漂亮的汇编语言。您应该尝试它们，而不是寻找一种适合所有人的尺寸（您实际上不会找到）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-16T04:13:54.313

正如您所说，组装不是跨平台的（您可以删除“典型”部分）。我自己没有太多信息，但看起来像[C -](http://www.cminusminus.org/index.html)可能会让您感兴趣，因为它们是他们页面中描述的“可移植汇编语言”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-25T08:37:37.243

您可能正在寻找 C。C 太简单了：任何构建另一种跨平台汇编语言的尝试最终都会变成另一种 C。

芯片极其多样化：不同数量的寄存器、不同的约定、不同的指令。一个筹码可能先用左脚进门，另一个先用右脚进门。看看他们的标准或手册，都像牛津高级词典一样厚。必须将所有这些抽象出来以编写跨平台代码。

# css - use custom fonts with wkhtmltopdf

> ID：10611828
> 
> 赞同：35
> 
> 时间：2012-05-16T04:02:02.310
> 
> 标签：css, fonts, wkhtmltopdf

I am trying to use custom fonts in my PDF generated with wkhtmltopdf. I read that you can't use google webfonts and that wkhtmltopdf uses truetype .ttf file. Can anyone confirm that? So I downloaded a .ttf file from google webfont and put in on my server, then used the font face:

```
 @font-face {
        font-family: Jolly;
        src: url('../fonts/JollyLodger-Regular.ttf') format('truetype');
    } 
```

and font family:

```
 <style type = "text/css">
        p { font-family: 'Jolly', cursive; }
    </style> 
```

And now the text that is supposed to render with Jolly Lodger font doesn't appear at all, page is blank.

What am I doing wrong?

PS: I tried with different .ttf files.

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-16T07:10:05.837

由于它是一种 Google Web 字体，因此您无需`@font-face`在样式表中编写，只需在源代码中使用以下链接标记：

```
<link href='http://fonts.googleapis.com/css?family=Jolly+Lodger' rel='stylesheet' type='text/css'> 
```

和

```
 <style type = "text/css">
    p { font-family: 'Jolly Lodger', cursive; }
</style> 
```

将工作。

顺便说一句，在您的代码中，您将`@font-face`family 定义为`font-family: Jolly;`并使用它`p { font-family: 'Jolly Lodger', cursive; }`是错误的，因为它与 font-family 名称不匹配。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-02-13T22:14:21.047

我打赌你正在使用 IIS 从网络包装器调用 wkhtmltopdf。这就是为什么有些人说它确实对他们有用。他们可能是从命令行调用 wkhtmltopdf，在这种情况下，它可以解析 CSS URL()s 中的相对链接，但如果您从 snappy 等调用它，您可以通过指定类似 say 的 URL 来解决问题`URL('http://localhost/myfolder/fonts/JollyLodger-Regular.ttf')`。

wkhtmltopdf 0.11.0_rc1 中似乎无法正确解析 CSS URL() 标记中的相对链接，但某些早期版本可能工作正常。其他 CSS URL() 标签也会出现同样的问题，例如在调用背景图像时 - 解析文件位置已损坏。有趣的是，在图像的情况下，如果您使用`<IMG SRC=>`0.11.0_rc1 ，即使提供了相对路径，也能够找到该文件。问题似乎仅限于 CSS 中的 URL() 标记。

**编辑：**我发现如果你在路径中使用`file:///`所有**正**斜杠，那么它就可以工作。换句话说`URL('file:///D:/InetPub/wwwroot/myfolder/fonts/JollyLodger-Regular.ttf')`应该工作。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-03-04T01:48:52.050

[正如](https://stackoverflow.com/a/16972315/3384225)[Yardboy](https://stackoverflow.com/users/9550/yardboy)上面所说的，我们发现在我们的 CSS 中对 truetype 字体进行 base64 编码效果很好。但我想分享一些额外的见解。

我们使用 4 种自定义字体，所有字体都是唯一命名`'Light'` `'Medium'`的等等。

我使用 openssl 工具包进行 base64 编码，效果很好。但是您也可以使用[fontsquirrel](http://www.fontsquirrel.com/tools/webfont-generator)。只要确保去掉所有其他字体类型（`'woff'` `'otf'`.. ）。我们发现`truetype`独家使用神秘地起作用。

*编码文件，修剪输出并添加到剪贴板*

```
openssl base64 -in bold.ttf | tr -d '\n' | pbcopy 
```

在 Windows 中，您应该安装 openssl 并将其添加到路径然后

```
openssl base64 -in bold.ttf | tr -d '\n' | clip 
```

或者干脆使用[这种网站](https://www.giftofspeed.com/base64-encoder/)

*添加到 css 字体 src 属性*

```
 @font-face {
      font-family: 'Bold';
      font-style: normal;
      font-weight: normal;
      src: url(data:font/truetype;charset=utf-8;base64,BASE64...) format("truetype");
    } 
```

渲染输出将取决于您的`wkhtmltopdf`版本和风格。因为我们的服务器运行 Debian，而我在 OSX 上开发，所以我在本地 VM 上进行了测试。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-11-16T19:24:26.930

如果您有 .ttf 文件或 .woff 文件，请使用以下语法

```
@font-face {
   font-family: 'Sample Name';
   src: url(/PathToFolderWhereContained/fontName.ttf) format('truetype');
   } 
```

不要使用`ttf`它不起作用，而是使用全名`'truetype'`，如果你有 .woff 然后使用`'woff'`格式。就我而言，它起作用了。

但是，最好的做法是使用指向 Google 字体 API 的链接，如果不符合您的标准，则最好使用该技术，然后使用上述技术它会起作用

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-06T21:16:46.610

我发现 Arman H.'s solution (base64 encoding the fonts) over this question就像一个魅力：[Google Web Fonts and PDF generation from HTML with wkhtmltopdf](https://stackoverflow.com/questions/6721295/google-web-fonts-and-pdf-generation-from-html-with-wkhtmltopdf)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-08-15T12:59:28.477

我也会在这里添加我的答案，以防有人需要它。

我一直在使用基于[wkhtmltopdf](https://github.com/webgio/Rotativa)的 Rotativa，我最终使用的是以下内容：

```
@font-face {
    font-family: "testfont";
    src: url("/UI/Fonts/609beecf-8d23-4a8c-bbf5-d22ee8db2fc9.woff") format("woff"),
         url("/UI/Fonts/1cd9ef2f-b358-4d39-8628-6481d9e1c8ce.svg#1cd9ef2f-b358-4d39-8628-6481d9e1c8ce") format("svg");
} 
```

...而且似乎 Rotativa 正在采用 SVG 版本。如果我对它们重新排序，它仍然可以工作，但如果我删除 SVG 版本，它就会停止工作。

可能值得一试。但是，找不到任何关于为什么会这样的好的文档

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-26T08:09:27.080

在完成了所有建议的解决方法（一些确实有效）之后，我遇到了一种更简单的解决方案：

```
<style>
@import 'https://fonts.googleapis.com/css?family=Montserrat';
</style> 
```

您可以简单地使用`@import`符号来包含字体。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-05-14T14:56:27.440

我个人不得不将字体系列设置在 a `div`（我最初想要 a `span`）

```
<style>
@font-face {
    font-family: 'CenturyGothic';
    src: url("fonts/century-gothic.ttf") format('truetype');
}

.title {
    font-family: 'CenturyGothic', sans-serif;
    font-size: 22pt;
}
</style>

...

<div class="title">This is Century Gothic</div> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-18T13:47:39.777

以防万一您还没有解决任何问题：

请尝试使用独立版本的*wkhtmltopdf*而不是可安装的。

我有一个类似的问题，但它通过使用解决：

[https://github.com/wkhtmltopdf/packaging/releases/download/0.12.6-1/wkhtmltox-0.12.6-1.mxe-cross-win64.7z](https://github.com/wkhtmltopdf/packaging/releases/download/0.12.6-1/wkhtmltox-0.12.6-1.mxe-cross-win64.7z)

解压缩文件 > 转到 bin 文件夹 > 运行您的命令。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-06-24T07:03:26.887

使用 @import 不获取字体，您需要将 .ttf 文件添加到项目中

# ios - UItextView dismiss keyboard on tap outside the textview

> ID：10611831
> 
> 赞同：3
> 
> 时间：2012-05-16T04:02:32.747
> 
> 标签：ios, uiview, uitextview, uikeyboard

i have a `custom UIView` which is presented from a `UIViewController`. This view controller can present one of several such views. One of these views has a `UITextView`. when one begins entering text in the `UITextView`, the keyboard is shown. however, I want to dismiss the keyboard whenever the user taps anywhere outside the textview. as multiple `UIViews` can be presented by the UIViewController based on certain condition, I encapsulated the `UITextView` delegate methods etc in the `custom UIView`, I did this using Notifications from within the `custom UIView` like

```
- (void)configureView
{ 
NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];

[nc addObserver:self selector:@selector(keyboardWillShow:) name:
 UIKeyboardWillShowNotification object:nil];

[nc addObserver:self selector:@selector(keyboardWillHide:) name:
 UIKeyboardWillHideNotification object:nil];

self.tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self
                                                           action:@selector(didTapAnywhere:)];
}

-(void) keyboardWillShow:(NSNotification *) note {
[self addGestureRecognizer:self.tapRecognizer];
}

-(void) keyboardWillHide:(NSNotification *) note
{
[self removeGestureRecognizer:self.tapRecognizer];
}

-(void)didTapAnywhere: (UITapGestureRecognizer*) recognizer {    
[self.detailsTextView resignFirstResponder];
} 
```

however, when the didTapAnywhere is called, the keyboard does not get dismissed even when the resignfirstresponder ties place. FYI, the delegate for the `UITextView` is the `custom UIView`.

ple help in how to do this

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T09:10:06.313

尝试

> [self.view endEditing:YES];

而不是辞去第一响应者的职务。这应该可以解决问题。奇怪的是为什么标准方法不起作用......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T09:10:16.010

你必须包括`UITextViewDelegate`在你的班级和`detailsTextView.delegate = self`你的`viewDidLoad`或任何你初始化你的 detailsTextView 的商品中。我希望这能解决你的问题......

# android - 在edittext上如何禁用键盘弹出？

> ID：10611833
> 
> 赞同：92
> 
> 时间：2012-05-16T04:02:43.150
> 
> 标签：android, android-edittext

在我的应用程序中，我所有屏幕的第一个视图是 EditText，因此每次我进入屏幕时都会弹出屏幕键盘。手动单击 EditText 时如何禁用此弹出窗口并启用它？？？？

```
 eT = (EditText) findViewById(R.id.searchAutoCompleteTextView_feed);

    eT.setOnFocusChangeListener(new OnFocusChangeListener() {

        public void onFocusChange(View v, boolean hasFocus) {

            if(hasFocus){
            InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE); 
            imm.hideSoftInputFromWindow(eT.getWindowToken(), 0);
            }
        }
    }); 
```

xml代码：

```
<ImageView
    android:id="@+id/feedPageLogo"
    android:layout_width="45dp"
    android:layout_height="45dp"
    android:src="@drawable/wic_logo_small" />

<Button
    android:id="@+id/goButton_feed"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:text="@string/go" />

<EditText
    android:id="@+id/searchAutoCompleteTextView_feed"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@id/goButton_feed"
    android:layout_toRightOf="@id/feedPageLogo"
    android:hint="@string/search" />

<TextView
    android:id="@+id/feedLabel"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/feedPageLogo"
    android:gravity="center_vertical|center_horizontal"
    android:text="@string/feed"
    android:textColor="@color/white" />

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/ButtonsLayout_feed"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true" >

    <Button
        android:id="@+id/feedButton_feed"
        android:layout_width="wrap_content"
        android:layout_height="30dp"
        android:layout_margin="0dp"
        android:layout_weight="1"
        android:background="@color/white"
        android:text="@string/feed"
        android:textColor="@color/black" />

    <Button
        android:id="@+id/iWantButton_feed"
        android:layout_width="wrap_content"
        android:layout_height="30dp"
        android:layout_margin="0dp"
        android:layout_weight="1"
        android:background="@color/white"
        android:text="@string/iwant"
        android:textColor="@color/black" />

    <Button
        android:id="@+id/shareButton_feed"
        android:layout_width="wrap_content"
        android:layout_height="30dp"
        android:layout_margin="0dp"
        android:layout_weight="1"
        android:background="@color/white"
        android:text="@string/share"
        android:textColor="@color/black" />

    <Button
        android:id="@+id/profileButton_feed"
        android:layout_width="wrap_content"
        android:layout_height="30dp"
        android:layout_margin="0dp"
        android:layout_weight="1"
        android:background="@color/white"
        android:text="@string/profile"
        android:textColor="@color/black" />
</LinearLayout>

<ListView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/feedListView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_above="@id/ButtonsLayout_feed"
    android:layout_below="@id/feedLabel"
    android:textSize="15dp" >
</ListView> 
```

第三个视图（EditText）是焦点所在。

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-12-17T04:53:39.890

最好的解决方案在于 Project Manifest 文件*(AndroidManifest.xml)*`activity` ，在构造中添加以下属性

> 安卓：windowSoftInputMode="stateHidden"

* * *

**例子：**

```
 <activity android:name=".MainActivity" 
              android:windowSoftInputMode="stateHidden" /> 
```

**描述：**

*   *当 Activity 成为用户关注的焦点时，软键盘的状态（无论是隐藏还是可见）。*
*   *对 Activity 的主窗口进行的调整——是否将其调整为更小以为软键盘腾出空间，或者是否将其内容平移以使当前焦点在窗口的一部分被软键盘覆盖时可见。*

**介绍于：**

*   *API 级别 3。*

[链接到文档](http://developer.android.com/guide/topics/manifest/activity-element.html#wsoft)

**注意：** *此处设置的值（“stateUnspecified”和“adjustUnspecified”除外）会覆盖主题中设置的值。*

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2012-05-16T07:44:42.467

您必须在 EditText 上方创建一个具有“假”焦点的视图：

就像是 ：

```
<!-- Stop auto focussing the EditText -->
<LinearLayout
    android:layout_width="0dp"
    android:layout_height="0dp"
    android:background="@android:color/transparent"
    android:focusable="true"
    android:focusableInTouchMode="true">
</LinearLayout>

<EditText
    android:id="@+id/searchAutoCompleteTextView_feed"
    android:layout_width="200dp"
    android:layout_height="wrap_content"
    android:inputType="text" /> 
```

在这种情况下，我使用了 LinearLayout 来请求焦点。希望这可以帮助。

这工作得很好......感谢Zaggo0

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2016-03-28T03:43:23.587

```
 edittext.setShowSoftInputOnFocus(false); 
```

现在您可以使用任何您喜欢的自定义键盘。

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2016-11-16T14:42:57.570

人们在这里提出了许多很好的解决方案，但我在 EditText 中使用了这种简单的技术（java 和 AnroidManifest.xml 中不需要任何内容​​）。只需在 EditText 上直接将您的可聚焦和可聚焦InTouchMode 设置为 false。

```
 <EditText
        android:id="@+id/text_pin"
        android:layout_width="136dp"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:textAlignment="center"
        android:inputType="numberPassword"
        android:password="true"
        android:textSize="24dp"
        android:focusable="false"
        android:focusableInTouchMode="false"/> 
```

我的意图是在应用程序锁定活动中使用此编辑框，我要求用户输入 PIN 并且我想显示我的自定义 PIN 键盘。在 Android Studio 2.1 上使用 minSdk=8 和 maxSdk=23 进行测试

[![在此处输入图像描述](../Images/36abec510241972b0f398822c5c9235c.png)](https://i.stack.imgur.com/maoMo.png)

* * *

## 回答 #5

> 赞同：20
> 
> 时间：2015-02-06T11:57:37.487

在您的活动课程中添加以下代码。

```
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

当用户单击 EditText 时，键盘将弹出

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2012-05-16T04:06:21.857

您可以使用以下代码禁用屏幕键盘。

```
InputMethodManager im = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
im.hideSoftInputFromWindow(editText.getWindowToken(), 0); 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2016-10-17T04:45:00.597

**两个简单的解决方案：**

***第一个解决方案***添加到清单 xml 文件中的代码行下方。在清单文件 (AndroidManifest.xml) 中，在活动构造中添加以下属性

安卓：windowSoftInputMode="stateHidden"

**例子：**

```
<activity android:name=".MainActivity" 
          android:windowSoftInputMode="stateHidden" /> 
```

**第二种解决方案**是在活动中添加以下代码行

```
//Block auto opening keyboard  
  this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN); 
```

我们可以使用上述任何一种解决方案。谢谢

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2012-05-16T06:06:52.567

为 InputMethodManager 声明全局变量：

```
 private InputMethodManager im ; 
```

在 onCreate() 下定义它：

```
 im = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
 im.hideSoftInputFromWindow(youredittext.getWindowToken(), 0); 
```

将 onClickListener 设置为 oncreate() 中的编辑文本：

```
 youredittext.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        im.showSoftInput(youredittext, InputMethodManager.SHOW_IMPLICIT);
    }
}); 
```

这将起作用。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2012-05-18T07:02:38.437

使用下面的代码，写在下面`onCreate()`

```
InputMethodManager inputManager = (InputMethodManager)
                                   getSystemService(Context.INPUT_METHOD_SERVICE); 
inputManager.hideSoftInputFromWindow(getCurrentFocus().getWindowToken(),
                                   InputMethodManager.HIDE_NOT_ALWAYS);         
getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_HIDDEN); 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-05-28T07:20:27.303

试试看.......我用代码解决了这个问题：-

```
EditText inputArea;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
inputArea = (EditText) findViewById(R.id.inputArea);

//This line is you answer.Its unable your click ability in this Edit Text
//just write
inputArea.setInputType(0);
} 
```

默认情况下，您可以在计算器上输入任何内容，但您可以设置任何字符串。

尝试一下

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2017-07-03T10:53:05.347

好吧，我遇到了同样的问题，我只是在 XML 文件中处理了可聚焦的问题。

```
<EditText
            android:cursorVisible="false"
            android:id="@+id/edit"
            android:focusable="false"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" /> 
```

您可能也在寻找安全性。这也将对此有所帮助。

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2018-03-12T19:18:53.020

感谢@AB 提供好的解决方案

```
 android:focusableInTouchMode="false" 
```

在这种情况下，如果您要在编辑文本中禁用键盘，只需在编辑文本标语中添加 android:focusableInTouchMode **="false"即可。**

在 Android Studio 3.0.1 minsdk 16 , maxsdk26 中为我工作

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2012-05-16T04:14:55.017

试试这个：

```
EditText yourEditText= (EditText) findViewById(R.id.yourEditText); 
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE); 
imm.showSoftInput(yourEditText, InputMethodManager.SHOW_IMPLICIT); 
```

要关闭，您可以使用：

```
InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE); 
 imm.hideSoftInputFromWindow(yourEditText.getWindowToken(), 0); 
```

在您的代码中尝试这样的操作：

```
ed = (EditText)findViewById(R.id.editText1);

InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);  
imm.hideSoftInputFromWindow(ed.getWindowToken(), 0);  

ed.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);  
        imm.showSoftInput(ed, InputMethodManager.SHOW_IMPLICIT);  
    }
}); 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2017-01-21T10:36:44.673

您唯一需要做的就是添加`android:focusableInTouchMode="false"`到 xml 中的 EditText 等等。（如果有人仍然需要知道如何用简单的方法做到这一点）

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-06-07T10:41:30.723

在您的方法中使用以下代码`onCreate()`-

```
 editText = (EditText) findViewById(R.id.editText);
    editText.requestFocus();
    editText.postDelayed(new Runnable() {
        public void run() {
            InputMethodManager keyboard = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
            keyboard.hideSoftInputFromWindow(
                    editText.getWindowToken(), 0);
        }
    }, 200); 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2017-05-11T07:01:36.957

对于 Xamarin 用户：

```
[Activity(MainLauncher = true, 
        ScreenOrientation = ScreenOrientation.Portrait, 
        WindowSoftInputMode = SoftInput.StateHidden)] //SoftInput.StateHidden - disables keyboard autopop 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-09-12T09:17:40.703

```
 <TextView android:layout_width="match_parent"
                 android:layout_height="wrap_content"

                 android:focusable="true"
                 android:focusableInTouchMode="true">

                <requestFocus/>
      </TextView>

      <EditText android:layout_width="match_parent"
                android:layout_height="wrap_content"/> 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2017-10-02T08:26:22.847

如果您使用的是 Xamarin，则可以添加此

```
Activity[(WindowSoftInputMode = SoftInput.StateAlwaysHidden)] 
```

此后您可以在 OnCreate() 方法中添加此行

```
youredittext.ShowSoftInputOnFocus = false; 
```

如果目标设备不支持上述代码，可以在EditText点击事件中使用下面的代码

```
InputMethodManager Imm = (InputMethodManager)this.GetSystemService(Context.InputMethodService);
Imm.HideSoftInputFromWindow(youredittext.WindowToken, HideSoftInputFlags.None); 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2017-12-20T08:19:21.113

我发现以下模式在我想显示一个对话框以获取输入的代码中对我很有效（例如，文本字段中显示的字符串是从对话框中的复选框列表中进行选择的结果，而不是通过键盘输入的文本）。

1.  禁用编辑字段上的软输入焦点。我无法禁用整个活动，因为我确实希望在相同布局中使用键盘的编辑字段。
2.  文本字段中的初始单击会产生焦点更改，重复单击会产生单击事件。所以我覆盖了两者（这里我不重构代码来说明两个处理程序做同样的事情）：

    ```
    tx = (TextView) m_activity.findViewById(R.id.allergymeds);
    if (tx != null) {
        tx.setShowSoftInputOnFocus(false);
        tx.setOnFocusChangeListener(new View.OnFocusChangeListener() {
            @Override
            public void onFocusChange(View view, boolean hasFocus) {
                if (hasFocus) {
                    MedicationsListDialogFragment mld = new MedicationsListDialogFragment();
                    mld.setPatientId(m_sess.getActivePatientId());
                    mld.show(getFragmentManager(), "Allergy Medications Dialog");
                }
            }
        });
        tx.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View view) {
                MedicationsListDialogFragment mld = new MedicationsListDialogFragment();
                mld.setPatientId(m_sess.getActivePatientId());
                mld.show(getFragmentManager(), "Allergy Medications Dialog");
            }
        });
    } 
    ```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2016-10-12T20:09:18.803

在我正在构建的一个 Android 应用程序中，我有三个水平排列`EditText`的 s 。`LinearLayout`我必须防止在加载片段时出现软键盘。除了设置`focusable`和`focusableInTouchMode`为 true之外`LinearLayout`，我还必须设置`descendantFocusability`为`blocksDescendants`。在`onCreate`，我打电话`requestFocus`给`LinearLayout`。这可以防止在创建片段时出现键盘。

布局 -

```
 <LinearLayout
       android:id="@+id/text_selector_container"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:weightSum="3"
       android:orientation="horizontal"
       android:focusable="true"
       android:focusableInTouchMode="true"
       android:descendantFocusability="blocksDescendants"
       android:background="@color/black">

       <!-- EditText widgets -->

    </LinearLayout> 
```

在`onCreate`-`mTextSelectorContainer.requestFocus();`

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2017-04-08T15:07:12.533

如果有人仍在寻找最简单的解决方案，请将以下属性设置为`true`您的父布局

```
android:focusableInTouchMode="true" 
```

例子：

```
<android.support.constraint.ConstraintLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:focusableInTouchMode="true">

.......
......
</android.support.constraint.ConstraintLayout> 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2017-05-09T10:48:40.720

使用它来启用和禁用 EditText....

```
InputMethodManager imm;

imm = (InputMethodManager)
getApplicationContext().getSystemService(Context.INPUT_METHOD_SERVICE);

if (isETEnable == true) {

    imm.toggleSoftInput(InputMethodManager.SHOW_IMPLICIT, 0);
    ivWalllet.setImageResource(R.drawable.checkbox_yes);
    etWalletAmount.setEnabled(true);
    etWalletAmount.requestFocus();
    isETEnable = false;
    } 
else {

    imm.toggleSoftInput(InputMethodManager.HIDE_IMPLICIT_ONLY,0);
    ivWalllet.setImageResource(R.drawable.checkbox_unchecked);
    etWalletAmount.setEnabled(false);
    isETEnable = true;
    } 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-05-20T12:44:35.853

试试这个答案，

```
editText.setRawInputType(InputType.TYPE_CLASS_TEXT);
editText.setTextIsSelectable(true); 
```

注意：仅适用于 API 11+

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2017-05-21T05:56:04.820

```
private InputMethodManager imm;

...

editText.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        v.onTouchEvent(event);
        hideDefaultKeyboard(v);
        return true;
    }
});

private void hideDefaultKeyboard(View et) {
  getMethodManager().hideSoftInputFromWindow(et.getWindowToken(), 0);
}

private InputMethodManager getMethodManager() {
        if (this.imm == null) {
            this.imm = (InputMethodManager)  getContext().getSystemService(android.content.Context.INPUT_METHOD_SERVICE);
        }
  return this.imm;
} 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2021-03-22T09:49:50.707

当您想在任何事件上隐藏屏幕上的键盘时，请尝试以下代码行。它对我有用。

```
context.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN );

final InputMethodManager inputMethodManager = (InputMethodManager) activity.getSystemService(Activity.INPUT_METHOD_SERVICE);

if (inputMethodManager.isAcceptingText())       inputMethodManager.hideSoftInputFromWindow(context.getCurrentFocus().getWindowToken(), 0); 
```

* * *

## 回答 #26

> 赞同：-1
> 
> 时间：2016-11-11T11:29:57.740

对于您活动中的任何文本视图（或使用 android:layout_width="0dp" android:layout_height="0dp" 创建假的空文本视图）并为该文本视图添加下一个： android:textIsSelectable="true"

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2018-07-05T08:42:12.310

只需`<request focus/>`从 xml 文件中删除标签。

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2018-11-14T09:38:03.467

只需要在布局 xml`android:focusable="false"`中特别添加属性。`EditText`然后你可以编写点击列表器`EditText`而不弹出键盘。

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2018-12-05T13:58:44.773

问题可以使用排序，无需将editText inputType设置为任何值，只需添加以下行editText.setTextIsSelectable(true);

# c# - 导出到 Excel - QueryString 中的“&”问题

> ID：10611835
> 
> 赞同：0
> 
> 时间：2012-05-16T04:02:48.333
> 
> 标签：c#, asp.net, vb.net

我有三个查询字符串（querystring1=100、querystring2=A&B、querystring3=300），并且 URL 显示为`http://mywebsite.com?querystring1=100&querystring2=A%26B&querystring3=300`. （querystring2“A&B”被编码为“A%26B”）。它正在正确返回数据，到目前为止没有问题。但是，我的 ExportToExcel 方法具有

```
Response.Write("<script>window.open('" & Request.Url.ToString & "&excel=true&PageSize=" & TotalRecs.ToString() & "','_new', '');
history.go(-1);
</script>") 
```

无法正常工作，因为在呈现页面时 URL 中的 querystring2 被解码为“A&B”，即 `http://mywebsite.com?querystring1=100&querystring2=A&B&querystring3=300&excel=true&PageSize=3`. 它将查询字符串值作为“A”而不是“A&B”。有人能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T04:05:54.790

采用`Server.UrlEncode`

[http://msdn.microsoft.com/en-us/library/zttxte6w.aspx](http://msdn.microsoft.com/en-us/library/zttxte6w.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T05:32:57.967

试试这个：

```
string querystring2="A&B";
Response.Redirect("http://mywebsite.com?querystring2"+ Server.UrlEncode(querystring2)); 
```

# ruby-on-rails - Rails 3 after_save 用于跟踪更新历史

> ID：10611838
> 
> 赞同：0
> 
> 时间：2012-05-16T04:03:13.183
> 
> 标签：ruby-on-rails

这篇文章的原因是为了获得关于是否有一种“Rails 方式”来做我正在尝试的事情的反馈。我这样做的方式似乎有点笨拙并且容易出现人为错误。

我有多个表，我想存储历史记录，包括更新记录的时间和日期。谁更新它并不重要。

目前，我整理了以下[尚未测试，某些语法可能是错误的]，但似乎其他人会有这种需求并且会有更好的方法来做到这一点，是否有一种方法在数据库级别而不是在我不知道的其他一些内置方法/回调上实现它。

模型 CreateDdiPlanHistorical 的生成包括在 create_history 方法中下面看到的其他字段之上的 updated_at:datetime，我的理解是应该自动填充正在添加或修改的历史表中的任何记录。

（为了清楚起见，去掉了验证和关联）

```
class CallDdiPlan < ActiveRecord::Base
  attr_accessible :active, :ddi_count, :plan_name, :price

  after_save :create_history

  private

    def create_history
      CallDdiPlanHistorical.create({:active => this.active, :ddi_count => this.ddi_count, :plan_name => this.plan_name, :price => this.price, :call_ddi_plan_id => this.id})
    end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:30:21.650

你可以做一些自己动手的解决方案，但如果你真的想让老板开心，请使用经过审核的 gem：

```
https://github.com/collectiveidea/audited 
```

# json - Is there a more compact form of JSON for table data?

> ID：10611841
> 
> 赞同：1
> 
> 时间：2012-05-16T04:03:40.547
> 
> 标签：json, optimization

I have data in a table that looks something like this:

```
Col1, DataColumn
0   , 1
16  , 42
0   , 9 
```

The most obvious JSON representation seems to be a list of associative arrays, but the JSON text would have `Col1` and `DataColumn` repeated in it a lot.

Is there a JSON-standard way to store this without repeating the headers? My thought so far is to store it all as a list of lists and just know that the first row is names and the rest is data.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T04:08:51.947

使用数组来保存信息

```
{ 
    "headers" : ["one","two","three"],
    "rows" : [
        [1,2,3],
        [4,5,6],
        [7,8,9]
    ]
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T04:08:15.527

如果你想要紧凑的怎么办：

```
{"Col1": [0, 16, 0], "DataColumn": [1, 42, 9]} 
```

# mysql - 将多列合并为一列，为mysql中的每一列创建一行

> ID：10611847
> 
> 赞同：0
> 
> 时间：2012-05-16T04:04:50.497
> 
> 标签：mysql, unpivot

我有一个包含以下列的 mysql 表

```
SNP
Probe
Genotype_00
Mean_00
Std_00
Genotype_01
Mean_01
Std_01
Genotype_11
Mean_11
Std_11 
```

我希望该表具有以下列：

```
SNP
Probe
Genotype
Mean 
Std 
```

其中对于每一对 (SNP,Probe) 我有三行，一个对应于每个基因型。

例如行

```
rs1 probe1 AA 5.6 0.3 AG 4.3 0.2 GG 3.4 0.1 
```

应该转化为

```
rs1 probe1 AA 5.6 0.3
rs1 probe1 AG 4.3 0.2
rs1 probe1 GG 3.4 0.1 
```

谁能帮我找到一种方法来做到这一点？提前非常感谢，任何建议将不胜感激

罗塞拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:13:53.420

使用跟随列创建表。

```
SNP
Probe
Genotype
Mean 
Std 
```

然后一一执行这些SQL语句

```
INSERT INTO new_table
SELECT SNP, Probe, Genotype_00, Mean_00, Std_00
FROM old_table

INSERT INTO new_table
SELECT SNP, Probe, Genotype_01, Mean_00, Std_01
FROM old_table

INSERT INTO new_table
SELECT SNP, Probe, Genotype_11, Mean_00, Std_11
FROM old_table 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T04:13:59.837

您可以简单地使用 SNP Probe Genotype Mean Std 创建一个新表，然后使用

```
insert into NEWTABLE
select SNP, Probe, Genotype_00, Mean_00, Std_00
from old table 
```

然后将 00 更改为 01 和 11，再次运行查询。

但是，由于 snp 对不会彼此相邻，您可能需要创建索引。

# facebook - How to display FB icon on a Facebook avatar?

> ID：10611851
> 
> 赞同：0
> 
> 时间：2012-05-16T04:05:25.643
> 
> 标签：facebook, facebook-graph-api, user-interface

How to display the FB logo on the image? like this: [avatar](http://external.ak.fbcdn.net/safe_image.php?d=AQBxxmDnWcPft_dH&url=http://profile.ak.fbcdn.net/hprofile-ak-snc4/49869_1022247481_8924_q.jpg&logo&v=5&t=1337139335&ttl=3888000&sig=HPquGIV3J7zPpNVbSpdelA--~B)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:22:16.663

我认为图片可能仅由使用照片编辑器（如 photoshop 或某种类型）的人编辑。我的朋友还在他的 FB 头像上给出了一些标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T04:26:39.357

You can overlay an image over it if you use css to do this very easily if you are just looking to do this on your website, otherwise, use photoshop to create an image with it included.

# javascript - 如何使用sencha touch2在单页中显示列表和其他标签

> ID：10611855
> 
> 赞同：1
> 
> 时间：2012-05-16T04:06:17.643
> 
> 标签：javascript, sencha-touch, sencha-touch-2

我是sencha touch2的新手。我想在想要的显示列表中显示下面的一些文本标签。所以我定义了一些标签并访问 twitter 服务它将给出数据列表。下面是我的代码。

1.  在这段代码中，如果我评论了extend：'Ext.form.Panel'，如果我使用了extend：'Ext.navigation.View'，那么列表数据将显示但不会显示定义的标签。
2.  如果我评论扩展：'Ext.navigation.View'，如果我使用扩展：'Ext.form.Panel'，则列表数据不会显示，但会显示定义的标签。

请告诉我我的代码有什么问题：

**代码：**

```
Ext.define("E:\SenchaTouch.view.Main", {
  extend: 'Ext.form.Panel',
  //extend: 'Ext.navigation.View',
  xtype: 'companyprofilepage',
  id: 'companyprofile',
  config: { 
    items: [
    { 
      xtype: 'toolbar',
      docked: 'top',
      title: 'My Toolbar'
    },
    { 
      xtype: 'titlebar',
      title: 'Title name'
    },
    {
      margin: '10',
      xtype: 'label',
      html: 'Info1'
    },
    { 
      margin: '10',
      xtype: 'label',
      html: 'A company is a business organization. It is an association or collection of individual real '
    }, 
    {
      xtype: 'list',
      itemTpl: '{title}', 
      store: {
        autoLoad: true,
        fields: ['from_user', 'text', 'profile_image_url'],
        proxy: {
          type: 'jsonp',
          url: 'http://search.twitter.com/search.json?q=Sencha Touch',
          reader: {
            type: 'json',
            root: 'results'
          }
        }
      },
      itemTpl: '<img src="{profile_image_url}" /><h2>{from_user}</h2><p>{text}</p>'
    }] 
  }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T21:29:12.360

只有创建 Ext.Panel({}) 并在这些 Panel 中放置其他 Sencha 元素。我希望能帮助你。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T08:26:08.243

原因是`navigationview`并且`panel`设置了这个配置：`layout: 'card'`默认情况下。

要将所有组件显示在单个页面上，请扩展`Ext.Container`并添加`layout: 'vbox'`到其配置中。

希望能帮助到你。

# wpf - How to remove border in WPF Visual Studio designer

> ID：10611861
> 
> 赞同：2
> 
> 时间：2012-05-16T04:07:05.703
> 
> 标签：wpf, visual-studio, window, border

When I'm trying to design an interface in the designer on Visual Studio, a white border surrounds all of my windows.

When I set a background for the window, it will be contained within this white border, but when it runs, the background will expand into the white area from the designer. All major outer margins are set to 0.

This makes it impossible to design anything due to the IDE changing my layout when it compiles.

How do I remove this border?

[edit] Sorry, i forgot a sample of the code!, here's the top half the outer most xml minus the resources

```
<Window x:Class="BuildSaverAlpha4.Main_Window"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Main_Window" DataContext="{Binding RelativeSource={RelativeSource Self}}" ResizeMode="NoResize" AllowsTransparency="False" WindowStyle="None" mc:Ignorable="d" xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" Activated="Window_Activated" Deactivated="Window_Deactivated" Closing="Window_Closing" BorderBrush="{x:Null}" Foreground="{x:Null}" WindowStartupLocation="CenterScreen" Height="562" Width="911" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" Margin="0">

<Grid Height="Auto" Width="Auto" Name="outerGrid" Margin="0,0,0,0">
    <Grid Height="41" HorizontalAlignment="Left" Margin="12,20,0,0" Name="grid1" VerticalAlignment="Top" Width="872" Background="#5DFF0000">
    </Grid>
    <Grid Background="#5DFF0000" Height="38" HorizontalAlignment="Left" Margin="12,72,0,0" Name="grid2" VerticalAlignment="Top" Width="872"></Grid>
    <TabControl Name="tabControl1" Margin="12,0,0,38" Background="{x:Null}" 
```

![](../Images/9c3ecd28aee576bd234f4a91144e86c0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:40:19.790

是的，这似乎是 VS 2008 和 2010 的问题：

[http://social.msdn.microsoft.com/Forums/en/wpf/thread/69cff97e-52d6-4130-8713-daf130580f54](http://social.msdn.microsoft.com/Forums/en/wpf/thread/69cff97e-52d6-4130-8713-daf130580f54)

如果您使用表达式，则选择 WindowStyle=None 将正确删除边框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T06:38:21.107

您的控件没有填充窗口。如果没有看到 xaml，很难发布代码来解决这个问题，但如果它是一个网格，那么请确保标记中没有固定的宽度或高度。其他控件要查看的其他内容是将Horizo​​ntalalignment 和verticalalignment 设置为“Stretch”。如果您可以发布此窗口的 XAML，那么我会尝试为您更正。

# ruby - 'No tests were found' when trying to run rspec on Rubymine

> ID：10611862
> 
> 赞同：0
> 
> 时间：2012-05-16T04:07:24.407
> 
> 标签：ruby, rspec, bdd, rubymine

I'm trying to do a Ruby Kada, but when I try to run my spec, I get "No tests were found."

I have 2 files in my project:

`poker_hands.rb`, which contains:

```
def announce_winner (s)
   'Player x is the winner.'
end 
```

and `poker_hands_spec.rb`, which contains:

```
require 'rspec'
require 'poker_hands'

define 'poker_hands' do
   it 'should announce a winner' do
      x = announce_winner('')
      x.should == 'Player x is the winner.'
   end
end 
```

I'm running RubyMine 4.0.3 and rspec 2.10.0

edit: [**Here is a copy of my stacktrace**](http://pastebin.com/4ZNhvfMQ)

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T06:00:47.567

用于定义上下文的 rspec 关键字是**`describe`**，而不是`define`。

# javascript - 如何从定义的函数中选择单击的链接？

> ID：10611867
> 
> 赞同：1
> 
> 时间：2012-05-16T04:08:13.960
> 
> 标签：javascript, jquery, ajax, hash, navigation

我正在构建一个 AJAX 可导航站点（代码取自[CSS-Tricks](http://css-tricks.com/dynamic-page-replacing-content/)），它在标记中使用常规链接，但通过 .js 将它们替换为哈希链接。

我不希望用户能够单击只会重新加载相同内容的链接。因为我正在使用哈希，所以对于主页以外的任何页面（首次加载时），这个问题都会自行解决（如果用户单击当前 URL 哈希的哈希链接，则不会发生任何事情）。

我有一个一直有效的解决方案，直到我将它定义为一个函数（因为我需要重用它）。它使用 $(this) 来获取被点击的链接，如果是指向当前页面则返回 false。但是，现在这将返回窗口（作为数组对象）而不是单击的链接。

我怎样才能选择点击的链接呢？

```
// Use hashes instead of reloads to navigate the site.
function initiateHashNav(linkContainers) {
  var $this = $(this);
  $(linkContainers).delegate('a', 'click', function() {
    // Restrict clicking on link for current page.
    if ($this.attr('href') == window.location.href) {
      return false;
    } else {
      // The hash shouldn't contain window.location (clean URLs are happy URLs!).
      window.location.hash = $this.attr('href').substr(window.location.origin.length);
      return false;
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:24:39.093

Just move the declaration of `$this` into the correct scope like this:

```
function initiateHashNav(linkContainers) {
  $(linkContainers).delegate('a', 'click', function() {
     var $this = $(this);
    // Restrict clicking on link for current page.
    if ($this.attr('href') == window.location.href) {
      return false;
    } else {
      // The hash shouldn't contain window.location (clean URLs are happy URLs!).
      window.location.hash = $this.attr('href').substr(window.location.origin.length);
      return false;
    }
  });
} 
```

Every function in javascript is a scope. Each scope in has a context (this) and if one is not set, the window object becomes the context.

jQuery.fn.delegate sets the matched element as context in the eventhandler, thus `this` is a HtmlAncherElement inside the delegate event handler. But outside in the function `initiateHashNav` there is no set context,and so it is just the window object

# c++ - 如何检查运算符优先级

> ID：10611869
> 
> 赞同：1
> 
> 时间：2012-05-16T04:08:21.340
> 
> 标签：c++, operator-keyword

我想检查“*(get the of a pointer)和++”的运算符的优先级，我应该如何设计一个句子然后测试它？

```
char* s
*s++; 
```

这不能测试 ++ 运算符，因为它在右边。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T04:15:19.507

您没有指定，但从您的示例中，我假设您指的是*后缀*运算符 ++ 而不是*前缀*形式。在这种情况下，你的表达：

```
*s++; 
```

**是**对运算符优先级的一个很好的测试，因为它可以解释为：

```
(*s)++;    // -> increment the char pointed at by s 
```

或者：

```
*(s++);    // -> increment the pointer s itself 
```

取决于哪个运算符绑定得更紧密（具有更高的优先级）。

事实上，C/C++ 中的规则是后缀运算符总是比前缀运算符绑定得更紧密，所以上面的第二种解释是正确的。

要实际**查看**程序中发生了哪些情况，您需要进一步设置和输出 - 特别是您需要先初始化`s`以指向某个对象。

请说您是否需要后半部分的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T04:18:01.350

您可以通过制作一个小程序然后检查输出来“测试”。

```
int main() {
    char c[] = "hello";
    char* s = c;
    std::cout << *s++ << std::endl;　// prints 'h'
    std::cout << *s << std::endl;　// prints 'e'
} 
```

# textmate - 如何在 Textmate 2 文件浏览器上更改字体？

> ID：10611870
> 
> 赞同：2
> 
> 时间：2012-05-16T04:08:27.173
> 
> 标签：textmate, textmate2

如何配置 Textmate 2 文件浏览器窗口以使用 Textmate 1.5 中的（较小的）字体？

　 ![在此处输入图像描述](../Images/faf446dda13e78100a687e41dcb4578f.png) 　 ![在此处输入图像描述](../Images/c08dcfd8b4c0322c91670a1e0b5c282a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T10:36:24.237

目前这是不可能的。我确实尝试在邮件列表档案中找到参考，但在 IRC 上可能没有看到这个。

# c# - 使用 DataGridView_CellFormatting 非常缓慢地显示数据

> ID：10611881
> 
> 赞同：0
> 
> 时间：2012-05-16T04:10:22.707
> 
> 标签：c#, winforms, datagridview

我正在使用`DataGridView`. 在显示数据之前，我正在验证它存在于数据库中的“帐户值”（这是 DataGridView 中的列之一）。

如果该值不存在，我将更改该特定单元格的前景色。这工作正常，但显示速度很慢（因为它是逐个单元格进行的）。

如何快速显示数据？

这是我的代码：

```
public void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{ 
    if (e.RowIndex != null)
    {
       for (int i = 0; i < indexes.Count; i++)
       {
           int id = Convert.ToInt32(indexes[i].ToString());
           objPreview.dataGridView1.Rows[id].Cells[1].Style.ForeColor =
               System.Drawing.Color.Red;
       }
    }
} 
```

# php - 警告：imagejpeg() [function:imagejpeg]: gd-jpeg: JPEG library 报告不可恢复的错误

> ID：10611883
> 
> 赞同：23
> 
> 时间：2012-05-16T04:10:31.503
> 
> 标签：php, wordpress

我在我的根文件夹上安装了 wordpress，

直到昨天它工作正常，但今天它给出了以下错误，我猜想生成缩略图，

```
Warning: imagejpeg() [function:imagejpeg]: gd-jpeg: JPEG library reports unrecoverable error: in public_html/wp-includes/media.php on line 459 
```

有人对这个警告有任何想法吗？

请帮我

以下代码在第 459 行

```
if ( !imagejpeg( $newimage, $destfilename, apply_filters( 'jpeg_quality', $jpeg_quality, 'image_resize' ) ) ) 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2014-01-10T13:20:28.990

您可能试图从中创建一个图像`jpeg`不是`jpeg`.

我在**PHP**中测试缩略图脚本时遇到了同样的错误。然后我发现我的输入文件的标题是`png`虽然它的扩展名是`.jpg`.

所以，我编辑了我的脚本，以便如果在创建图像时出现错误`jpeg`，它会尝试从创建它`png` *（或者`gif`如果发生另一个错误）*。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-19T19:17:53.513

**1）检查磁盘空间**

您的系统必须有足够的磁盘空间

**2）检查内存限制**

在您的 php 中设置更多内存：

```
ini_set("memory_limit","256M"); 
```

**3) 检查 post_max_size 和 upload_max_filesize**

在您的 htaccess 文件中设置更多：

```
php_value post_max_size 16M
php_value upload_max_filesize 6M 
```

**4）把@放在函数前面**

```
@imagejpeg(..............); 
```

第 1 点）对我有用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-06-14T07:08:34.247

您必须使用函数来正确确定图像的 mime 类型。具有 jpg 扩展名的 png 图像将导致此错误。

为避免此错误，您必须获得[正确的 mime 类型](http://php.net/manual/en/function.mime-content-type.php)的图像。

```
function getImage($path) {
switch(mime_content_type($path)) {
  case 'image/png':
    $img = imagecreatefrompng($path);
    break;
  case 'image/gif':
    $img = imagecreatefromgif($path);
    break;
  case 'image/jpeg':
    $img = imagecreatefromjpeg($path);
    break;
  case 'image/bmp':
    $img = imagecreatefrombmp($path);
    break;
  default:
    $img = null; 
  }
  return $img;
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-06-19T13:15:08.813

我有同样的错误。但现在我解决了同样的问题。

答案是：我们正在上传 png 并将其转换为 jpg 。
请检查 jpg 是否有效。我们需要将 png 转换为 jpg 以便其他功能可用，请检查相同。

下面的代码对于使用 GD 库转换图像很有用。

```
//variable declare or parameter use
$originalImage ="1.jpg";
$quality=100; // for jpg good quality
$outputImage;   //for source file save.  

// jpg, png, gif or bmp?
    $exploded = explode('.',$originalImage);
    $ext = $exploded[count($exploded) - 1]; 

    if (preg_match('/jpg|jpeg/i',$ext))
        $imageTmp=imagecreatefromjpeg($originalImage);
    else if (preg_match('/png/i',$ext))
        $imageTmp=imagecreatefrompng($originalImage);
    else if (preg_match('/gif/i',$ext))
        $imageTmp=imagecreatefromgif($originalImage);
    else if (preg_match('/bmp/i',$ext))
        $imageTmp=imagecreatefrombmp($originalImage);
    else
        return 0;

    // quality is a value from 0 (worst) to 100 (best)
    imagejpeg($imageTmp, $outputImage, $quality);
    imagedestroy($imageTmp); 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-04-06T07:40:31.710

在 PHP7 上`imagecreatefromjpeg`，当您尝试打开无效文件时开始抛出致命错误，甚至`@`标志都无法捕获。

请改用以下内容：

```
$im = imagecreatefromstring(file_get_contents($filename));
if ($im !== false) { ... } 
```

# c - 如何在C编程中删除矩阵的零行和零列

> ID：10611887
> 
> 赞同：-3
> 
> 时间：2012-05-16T04:11:34.153
> 
> 标签：c, matrix

在 matlab 中删除零行或列很容易，但我在当前的 c 代码中遇到了这个问题，我必须删除所有零行和列以使我的求解器更快。我找不到任何简单的方法。你能以任何方便的方式帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:25:21.743

简单的方法是逐行遍历，然后逐列遍历，检查是否为零，如果为真，则将该行/列替换为最后一个并删除最后一个（free()，如果它是动态的和 m-- 或 n--如果是静态的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T15:11:58.170

## *仅*删除前导和尾随行和列

我们可以实现一种矩阵方式，使这些操作相当有效。

您分配一个大块来保存最大数量的数据，就好像它是一个 2D 数组 ( `[][]`)，然后执行

```
typedef struct {
   size_t aJ;      /* Allocated row length. Needed for computing positions */
   size_t uI, uJ;  /* Number of row/cols in use currently. For range checking */
   size_t oI, oJ;  /* Offset to the start of the first used row/col */
   double *matrixA /* the storage */
} MatrixT; 
```

您将需要编写初始化和清理例程。老 c 手会注意到我们可以在这里使用数组技巧（或漂亮的新可变长度成员工具）

访问元素 (i,j) 类似于

```
double* element(MatrixT*this, size_t i, size_t j) {
  double* base = this->matrixA + oI*aJ + oJ;
  /* range checking if desired */
  return (base + i*aJ + j);
} 
```

这具有从普通二维数组访问元素的复杂性大约两倍的复杂性，并且可以以稍微清晰为代价简化为单行（但您的编译器可能会为您执行此操作）。

删除行和列涉及减少适当的“使用值”以及适当的“偏移”值（如果您从前面获取它）。

因为该结构比普通的旧 2D 数组更复杂并且需要更多的簿记，所以您需要将所有操作都包含在函数中。

* * *

老 Fortran77 程序员可能会认为这是对 *“将连续子数组传递给函数”*习语的重新实现。

# php - PHP 包含路径。它总是来自根目录吗？

> ID：10611890
> 
> 赞同：0
> 
> 时间：2012-05-16T04:12:44.027
> 
> 标签：php

我想从根目录引用文件，即使调用新文件的文件位于目录本身中。可能的？

*即
从/includesheader.php 文件中：include("/styles/style.css")
从reports/customers.php 文件中：include("/reports/sales.php")*

**/Styles**
style.css
**/Reports**
sales.php
customers.php
**/Includes**
connection.php
header.php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:13:40.073

不，这是不可能的。

领先`/`总是指根

# jquery - 在 jquery UI datepicker 范围内使用 altFormat 和 altField

> ID：10611891
> 
> 赞同：5
> 
> 时间：2012-05-16T04:12:49.250
> 
> 标签：jquery, jquery-ui, datepicker, jquery-ui-datepicker

我正在尝试获取“从”和“到”的日期范围以将其添加到我的数据库中。我使用 altFormat 和 altField 以 DB 格式 (yy-mm-dd) 捕获日期，同时使用 Datepicker jquery UI 组件在 UI 中显示正常日期格式。

我的问题是：如何在 Datepicker UI 范围内使用它。我在哪里可以为我的 from 和 to 日期选择器指定 altField？

[http://jqueryui.com/demos/datepicker/#date-range](http://jqueryui.com/demos/datepicker/#date-range)

我的代码：

```
var dates = $( "#hotel_display_checkin_date, #hotel_display_checkout_date" ).datepicker({
        defaultDate: "+1w",
        changeMonth: true,
        numberOfMonths: 1,
        altFormat: "yy-mm-dd",
        altField: "#hotel_checkin_date",
        onSelect: function( selectedDate ) {
            var option1 = this.id == "hotel_display_checkin_date" ? "minDate" : "maxDate",

                instance = $( this ).data( "datepicker" ),
                date = $.datepicker.parseDate(
                    instance.settings.dateFormat ||
                    $.datepicker._defaults.dateFormat,
                    selectedDate, instance.settings ),
                    options = {option1: date}
            dates.not( this ).datepicker( "option", options );
        }
        }); 
```

我尝试将 altField 选项添加到 options = {option1: date}，但这不起作用

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-16T04:36:45.183

您的主要问题是您尝试对`altField`入住和退房日期使用相同的日期：

```
altField: '#hotel_checkin_date' 
```

如果分别绑定它们：

```
var opts = {
    defaultDate: "+1w",
    changeMonth: true,
    numberOfMonths: 1,
    altFormat: "yy-mm-dd"
    onSelect: function(selectedDate) { ... }
};

$('#hotel_display_checkin_date').datepicker(
    $.extend({
        altField: '#hotel_checkin_date'
    }, opts)
);
$('#hotel_display_checkout_date').datepicker(
    $.extend({
        altField: '#hotel_checkout_date'
    }, opts)
);​ 
```

这样您就可以指定单独`altField`的 s 那么事情应该会更好。

演示：http: [//jsfiddle.net/ambiguous/bJ8bh/1/](http://jsfiddle.net/ambiguous/bJ8bh/1/)

# jsp - 单击链接时，如何将门户视图 JSP 重定向到同一 WAR 文件中的另一个 JSP？

> ID：10611893
> 
> 赞同：0
> 
> 时间：2012-05-16T04:12:57.520
> 
> 标签：jsp, portal, jsr286

嗨，我有一个简单的要求，但实现起来真的很困惑。我有一个 portletvview.jsp，并且该页面中有一个链接。单击该链接时，我应该打开一个弹出页面，这是我的第二个 jsp。如何在 JSR-286 Basic Portlet 中实现这一点？真的很感激任何帮助..

谢谢，哈利

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:19:55.853

我没有得到完整的问题。但据我所知，你需要这样的东西

将此函数放入 javacript 文件或 html 页面的 header 标记中

```
 function myPopup() 
     {
            window.open( "place the link for the next jsp here" )
     }

<input type="button" onClick="myPopup()" value="POP!"> 
```

# c++ - 在 Qt 应用程序中编译多个 .cpp 文件

> ID：10611895
> 
> 赞同：2
> 
> 时间：2012-05-16T04:13:35.263
> 
> 标签：c++, qt, qt4, qt-creator

我刚开始学习Qt并编译并执行了这个spinet

```
#include <qapplication.h>
#include <qlabel.h>

int main(int argc, char *argv[])
{
QApplication app(argc, argv);
QLabel *label = new QLabel("Linux is wonderful", 0);
app.setMainWidget(label);
label->show();
return app.exec();
} 
```

我使用以下步骤使其运行：qmake -project

qmake .pro 文件

制作

但是这里这段代码将被写在一个.cpp文件中，所以我想问一下当有多个.cpp文件时如何处理大型项目。如果有多个 .cpp 文件，编译和执行要遵循哪些步骤。请解释一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T04:16:22.340

对于多个 .cpp 文件，您的 .pro 文件中应包含以下内容：

```
SOURCES = main.cpp otherfile.cpp yet_another_file.cpp 
```

...很多人会将它分散在多行中，就像这样，以使其更易于阅读：

```
SOURCES = main.cpp \
          otherfile.cpp \ 
          yet_another_file.cpp 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T04:19:46.400

如果您使用 Qt，我建议您使用 Qt Creator。Creator 可以轻松管理用于创建 make 文件的 .pro 文件。它还包括一个非常有用的调试器，其中包括一种 Intellisense 形式，供我们这些来自 MSVS 的人使用。

在 Creator 中，创建一个新的 Qt Desktop 应用程序，然后从那里开始。还有，`Add New...`是`Add Existing...`你的朋友。

# ios - 基于状态栏的方向检测未命中

> ID：10611900
> 
> 赞同：0
> 
> 时间：2012-05-16T04:13:55.453
> 
> 标签：ios, ios5

我连接到方向更改通知。我注意到 iPad 从纵向到横向旋转 90 度时，我可能会收到多达 3 个通知。他们中的最后一个并不总是正确的，这让我认为当我真的是直的和水平的风景时我是在纵向的。

我以通知为借口实时获取方向。也许我不应该这样做，但这就是我现在正在做的事情：

```
 UIInterfaceOrientation interfaceOrientation = [UIApplication sharedApplication].statusBarOrientation; 
```

难道我做错了什么？显然我是，问题是什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:34:01.557

如前所述，唯一一致的方向信息是`-willRotateToInterfaceOrientation:`.

# php - PHP 字符串文字和编译器优化

> ID：10611910
> 
> 赞同：1
> 
> 时间：2012-05-16T04:15:13.127
> 
> 标签：php, optimization, php-opcode

> **可能重复：**
> [php 中的单引号与双引号是否有性能优势？](https://stackoverflow.com/questions/482202/is-there-a-performance-benefit-single-quote-vs-double-quote-in-php)

我想知道在定义*不包含变量*`"`的字符串时使用 s 时PHP 代码是否会受到性能影响，与不执行额外解析的情况相比。*`'`*

 *例如，PHP 将尝试解析由`"`but not定义的字符串中的变量`'`。

```
$myString = "Greetings earthlings!";
echo '$myString'; //literally outputs the string '$myString'
echo "$myString"; //literally outputs the string "Greetings earthlings" 
```

所以我的问题是，一直以来我一直在编写这样的代码：

```
echo "Greetings earthlings"; 
```

我一直在浪费周期吗？或者 PHP 是否智能/优化到足以知道我的*真正*意思是：

```
echo 'Greetings earthlings'; 
```

?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-16T04:28:45.363

[VLD](http://pecl.php.net/package/vld)的一些工作告诉我，两个程序都编译为相同的字节码（使用 PHP 5.3）：

```
line     # *  op                           fetch          ext  return  operands
---------------------------------------------------------------------------------
   2     0  >   ECHO                                                     'Hello+world'
   3     1    > RETURN                                                   1 
```

结论：现代版本的 PHP 完全没有区别。没有任何。使用你觉得最好的任何东西。

* * *

但是，两者之间存在差异`echo "Hello $world"`：

```
compiled vars:  !0 = $world
line     # *  op                           fetch          ext  return  operands
---------------------------------------------------------------------------------
   1     0  >   ADD_STRING                                       ~0      'Hello+'
         1      ADD_VAR                                          ~0      ~0, !0
         2      ECHO                                                     ~0
         3    > RETURN                                                   null 
```

并且`echo "Hello " . $world`：

```
compiled vars:  !0 = $world
line     # *  op                           fetch          ext  return  operands
---------------------------------------------------------------------------------
   1     0  >   CONCAT                                           ~0      'Hello+', !0
         1      ECHO                                                     ~0
         2    > RETURN                                                   null 
```

不过，我会毫不犹豫地称其为重要。实际的现实世界性能差异很可能是微不足道的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T04:20:01.377

可以运行基准测试来查看。我为 PHP 4 做过，发现进行字符串连接比嵌入变量快得多（一个数量级？我不记得了）。相比之下，双引号中的纯字符串只比单引号快一点。

但那是针对 PHP *4*的。后来我为 PHP *5*运行了相同的测试，性能差异几乎可以忽略不计。*

# android - ToggleButton 在自定义 ArrayAdapter 中多次自检

> ID：10611913
> 
> 赞同：1
> 
> 时间：2012-05-16T04:15:37.357
> 
> 标签：android, android-arrayadapter, togglebutton

我是 Android 平台的新手，但不是 java 的新手。

问题：

每次我选择 ToggleButton，whitch 都在 ArrayAdapter 中，然后选择了一个以上的 ToggleButton。

```
private Context context;
private List<DayListItem> list;

public DayListAdapter(Context context, List<DayListItem> objects) {
    super(context, R.layout.day_row, objects);
    this.context = context;
    this.list = objects;
}

@Override
public int getPosition(DayListItem item) {
    return list.indexOf(item);
}

@Override
public int getCount() {
    return list!=null?list.size():0;
}

static class ViewHolder{
    protected RelativeLayout rl;
    protected TextView position;
    protected TextView time;
    protected TextView info;
    protected ToggleButton button;
}

@Override
public DayListItem getItem(int position) {
    return list.get(position);
}

@Override
public long getItemId(int position) {
    return list.get(position).getID();
}

@Override
public View getView(final int position, View convertView, final ViewGroup parent) {
    View view = convertView;
    final ViewHolder viewHolder;
    if(view == null){
        LayoutInflater inflate = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        view = inflate.inflate(R.layout.day_row, null);
        viewHolder = new ViewHolder();
        viewHolder.rl = (RelativeLayout) view.findViewById(R.id.alarmCLICK);
        viewHolder.position = (TextView) view.findViewById(R.id.alarmPOSITION);
        viewHolder.time = (TextView) view.findViewById(R.id.alarmSETtime);
        viewHolder.info = (TextView) view.findViewById(R.id.alarmINFO);
        viewHolder.button = (ToggleButton) view.findViewById(R.id.alarmTOGGLE);

        view.setTag(viewHolder);
    }else{
        viewHolder = (ViewHolder) view.getTag();
    }
    viewHolder.time.setText(list.get(position).getTime());
    viewHolder.info.setText(list.get(position).getInfo());
    viewHolder.position.setText(String.valueOf(position));
    viewHolder.button.setSelected(list.get(position).isSelected());
    viewHolder.rl.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            Dialog dialog = new Dialog(v.getContext());
            dialog.setContentView(R.layout.alarm_list);
            dialog.setTitle(String.valueOf(position));
            dialog.setCancelable(true); 
            dialog.show();
        }
    });
    viewHolder.button.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            if(viewHolder.button.isChecked()){
                Log.w("position",String.valueOf(position));
                list.get(position).setSelected(true);
            }else list.get(position).setSelected(false);
        }
    });     
    return view;
} 
```

我不知道为什么每次移动列表时都会重新绘制 ToggleButtons。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T04:30:59.700

您正在使用自定义适配器。在这里我正在编写解决方案，使用它可以解决您的问题。我也从复选框面临同样的问题。试试这个。首先将切换按钮的状态保存到数组列表中。

私有 ArrayList toggle_state = null;

然后我将在自定义适配器构造函数中将所有状态设置为 false：

```
for (int i=0; i < no_of_elements.size(); i++) {
    itemChecked.add(i, false);
} 
```

设置按钮单击时的实际切换状态：

```
 holder.cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView,
                                     boolean isChecked) {
            itemChecked.set(position, isChecked);

        }
    }); 
```

其中 cb 是切换按钮。

在自定义适配器的 getView 方法中写入：

```
holder.cb.setChecked(itemChecked.get(position)); 
```

这将解决您的问题。

# r - 附加到具有动态名称的列表

> ID：10611915
> 
> 赞同：29
> 
> 时间：2012-05-16T04:16:18.130
> 
> 标签：r, list, append, names

我在 R 中有一个列表：

```
a <- list(n1 = "hi", n2 = "hello") 
```

我想附加到这个*命名*列表，但名称必须是动态的。也就是说，它们是从字符串创建的（例如：`paste("another","name",sep="_")`

我试过这样做，但不起作用：

```
c(a, parse(text="paste(\"another\",\"name\",sep=\"_\")=\"hola\"") 
```

这样做的正确方法是什么？最终目标只是附加到此列表并动态选择我的名字。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-16T04:35:19.030

您可以只使用带有双括号的索引。以下任何一种方法都应该有效。

```
a <- list(n1 = "hi", n2 = "hello")
val <- "another name"
a[[val]] <- "hola"
a
#$n1
#[1] "hi"
#
#$n2
#[1] "hello"
#
#$`another name`
#[1] "hola"

 a[[paste("blah", "ok", sep = "_")]] <- "hey"
 a
#$n1
#[1] "hi"
#
#$n2
#[1] "hello"
#
#$`another name`
#[1] "hola"
#
#$blah_ok
#[1] "hey" 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-16T04:39:25.290

您可以使用`setNames`动态设置名称：

```
a <- list(n1 = "hi", n2 = "hello")
c(a,setNames(list("hola"),paste("another","name",sep="_"))) 
```

结果：

```
$n1
[1] "hi"

$n2
[1] "hello"

$another_name
[1] "hola" 
```

# sql - 需要 SQL Distinct 的帮助

> ID：10611918
> 
> 赞同：0
> 
> 时间：2012-05-16T04:16:47.853
> 
> 标签：sql, distinct

原表

```
+-- Col 1 --+-- Col 2 --+
+--   1   --+--   a   --+
+--   1   --+--   b   --+
+--   1   --+--   c   --+
+--   2   --+--   d   --+
+--   3   --+--   e   --+
+--   3   --+--   f   --+
+-----------------------+ 
```

结果 ：

```
+-- Col 1 --+-- Col 2 --+
+--   1   --+--   a   --+
+--   2   --+--   d   --+
+--   3   --+--   e   --+
+-----------------------+ 
```

知道如何区分表格吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:28:11.293

“DISTINCT”适用于结果集中的每一列。

“GROUP BY”将提供您需要的结果，但您需要考虑“col2”在您的结果集中是否有任何实际意义。

```
 SELECT col1, min(col2) as col2
      FROM T
     GROUP BY col1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T04:21:18.957

```
SELECT t.Col1, t.Col2
FROM T t
WHERE NOT EXISTS(SELECT *
                 FROM T s
                 WHERE t.Col1 = s.Col1 AND t.Col2 > s.Col1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T04:21:49.370

col1 中的相同值在 col2 中没有相同的值，因此如果您选择两列，则 DISTINCT 无法生成结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T04:37:44.237

如果使用 SQL Server，表名为 TEST，则可以在 T-SQL 中使用 CROSS APPLY，如下所示：

```
SELECT DISTINCT Col1, TEST2.Col2 FROM TEST
CROSS APPLY (SELECT TOP 1 Col2 FROM TEST TEST2
        WHERE TEST2.Col1 = TEST.Col1) TEST2 
```

# php - 将列表变成列

> ID：10611919
> 
> 赞同：0
> 
> 时间：2012-05-16T04:17:05.890
> 
> 标签：php, css, product

我的问题是 css 打破了一个列表项，成为下一个看起来很难看的列的一部分。

我该如何解决[这个问题](http://www.woonbel.nl/)

这是css和循环

```
.cbt{clear:both;}

container-main{ width:960px;}

ul {
    -moz-column-count: 4;
    -moz-column-gap: 20px;
    -webkit-column-count: 4;
    -webkit-column-gap: 20px;
    column-count: 4;
    column-gap: 20px;
}

li{border:solid 1px #555;}

.item-vol{ height:250px;}

<div id="container-main" style="background-color:#F6F6F6;">

  <?php
echo '<div><br>winkelwagen_id is: <span style="color:red;"><b>'.$winkelwagen_id.'</b></span></div><br>';
//select all the items into the database and show them to screen

$q = "SELECT item_id, naam, prijs, img FROM shbel_items";
$q2 = "SELECT item_id,aantal FROM shbel_winkelwagen_items where winkelwagen_id = $winkelwagen_id";
//extracting every single item
$records = $crud->rawSelect($q);
        $items = $records->fetchAll(PDO::FETCH_ASSOC);

echo"<UL>";
for($i=0, $cnt = 5; $i<$cnt; $i++){

foreach($items as $item)

    {

        if( $winkelwagen->productBestaat($item['item_id'] )){
            //voeg verwijder/toevoegen knop toe aan html afhankelijk van een match

        }

    ?>
     <LI>    
    <div class="item-vol"><form action="/" method="post" id="">
    <div><img height="100" width="100" src="<?php echo("/images/".$item['img']); ?>" /></div>
    <div>Item naam: <?php echo($item["naam"]); ?></div>
    <div>Omschrijving <?php echo($item["omschrijving"]); ?></div>
    <div><input type="checkbox" name="toevoegen[]" value="<?php echo($item['item_id']); ?>"/>
    <span><input name="aantal" type="text" size="10" value=""></span></div>
    <div><input id="" type="submit" value="toevoegen" name="action"/></div> 
            <input name="item_id" type="hidden" value="hidden">
    </form>
    </div>
    </LI>
    <?php

    }
}// EINDE FOR LOOP
?>

  </ul>
  </div><!--    EINDE CONTAINER-MAIN--> 
```

谢谢，理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:36:18.633

我认为您可以在 CSS 容器（即 UL）中设置一个高度。

```
ul {
    -moz-column-count: 4;
    -moz-column-gap: 20px;
    -webkit-column-count: 4;
    -webkit-column-gap: 20px;
    column-count: 4;
    column-gap: 20px;
    height: 760px;
} 
```

（我不确定所需的实际高度。这与您那里的代码一起使用，但我没有加载图像，所以请尝试一下）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T04:44:11.967

将高度添加到 UL

在萤火虫设置

```
`height: 1013px;` 
```

为我工作

希望这可以帮助

# iphone - XCode 4.2 自定义模板创建？

> ID：10611920
> 
> 赞同：0
> 
> 时间：2012-05-16T04:17:16.453
> 
> 标签：iphone, ios, xcode, ipad

我必须为 Xcode 创建自己的模板。我正在使用 4.2 的 Xcode 版本。

自定义模板必须有一些包含一些文件和类的组。

你能否在这方面指导我。

谢谢，伊斯瓦尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T18:17:15.230

在 Xcode 4 中创建自定义项目模板很困难，Apple 没有记录。如果您仍想创建自定义项目模板，请阅读以下文章：

[创建自定义 Xcode 4 项目模板](http://meandmark.com/blog/2011/12/creating-custom-xcode-4-project-templates/)

# javascript - 配置 Google Drive API 和 SDK

> ID：10611922
> 
> 赞同：-1
> 
> 时间：2012-05-16T04:17:30.540
> 
> 标签：javascript, apex-code, google-drive-api

我正在尝试将 Salesforce 的 DrEdit 示例应用程序安装到 GAE 上。应用程序运行，但保存或打开文件会导致 HTTP 403“访问未配置错误”。

我还尝试将 API Access>Client ID 的值用于 Web 应用程序。Google Drive SDK> OAuth Client ID 也被设置为 Drive SDK 和 Web 应用程序客户端 ID。但是，在 Api 访问服务中同时启用（Api、SDK）后，我仍然遇到同样的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T22:36:31.000

请参阅关于此的重复帖子：[Google Drive HTTP 403 “Access Not Configured”错误](https://stackoverflow.com/questions/10597993/google-drive-http-403-access-not-configured-error)

* * *

给出的答案副本：

您能否确保在 Google API 控制台上注册您的应用程序并首先为其启用 Drive API 和 SDK？

这一切都在这里描述：[https ://developers.google.com/drive/register](https://developers.google.com/drive/register)

然后确保在 DrEdit 的配置文件中使用您的客户端 ID 和客户端密码。

# c# - Application.Idle 事件每次触发

> ID：10611924
> 
> 赞同：1
> 
> 时间：2012-05-16T04:17:52.760
> 
> 标签：c#, winforms

我有一个用户控件，我在该控件的 Load 事件下注册了空闲事件。

```
Control_Load(object sender, System.EventArgs e)
{
    Application.Idle += new EventHandler(Application_Idle);
} 
```

我知道这将在应用程序完成处理并达到空闲状态时触发。但是我真的很困惑什么是空闲的应用程序，这个用户控制加载事件在哪里注册空闲事件处理程序。当我每次遇到断点时，它会做什么这表示？

例如，我创建了一个包含此代码的表单

```
int counter = 0;
private void Form1_Idle(object sender, System.EventArgs e)
{
    counter++;
    label1.Text = counter.ToString();
}

private void Form1_Load(object sender, System.EventArgs e)
{
    Application.Idle +=new EventHandler(Form1_Idle);
} 
```

然后我创建了一些具有某些操作的表单。根据我的理解标签计数器不应该增加当我通过我创建的按钮进行操作时，因为它不是处于空闲状态，但现在发生的事情甚至是一些操作通过单击按钮标签计数器正在增加，除非我按下表单标题栏并移动表单。

即使这是主应用程序窗口，我还需要在关闭窗口时分离这些事件处理程序。如果是这样，如果我在 dispose 方法中这样做就足够了吗？

```
protected override void Dispose(bool disposing) 
```

**更新** 如果我通过键盘按一些文本说“LARSEN”，在按字母“L”和“A”之间会发生空闲事件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T05:29:02.457

每次应用程序有空闲时间时都会调用 Idle 事件，而不仅仅是一次。如果您希望它被调用一次，请在完成后分离事件处理程序，如下所示：

```
Application.Idle -= Application_Idle; 
```

这也是您应该在关闭应用程序之前从事件中分离出来的方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T04:24:14.613

每次处理完所有消息且没有消息时触发。至于处理，根据 MSDN “因为这是一个静态事件，所以在处理应用程序时必须分离事件处理程序，否则会导致内存泄漏。” - 所以我想在表单处理上分离它（或者如果它的处理程序与表单有关，可能在表单关闭上）就足够了。

**upd：**消息循环在您的 Program.cs[中启动，如下所示：](http://msdn.microsoft.com/en-us/library/ms157902.aspx)

```
 [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new frmMain());
    } 
```

它处理所有消息，如鼠标移动、按键等。您可能应该在某个地方详细阅读它，可能是一本书，但是是的，在您的第一次按键被处理之后，在您按下第二个键之前很久就会出现“空闲”状态。

**upd2：**如果您想检测“真正的空闲”，您可能需要在此处理程序中启动（并重新启动）某种计时器，当它到期时，可能会检查 CPU 负载或类似情况，具体取决于确切的所需条件。

# javascript - 在带有 JQuery 的 Dashcode 中使用 $(this)

> ID：10611925
> 
> 赞同：0
> 
> 时间：2012-05-16T04:17:56.857
> 
> 标签：javascript, jquery, xcode, dashcode

我可能是我生命中第二次使用 dashcode。致力于查看仪表板小部件的局限性。

我有一个名为 onclick() 的函数。单击元素时，我想使用“$（this）”。我不断收到一个通用错误“'undefined' is not an object”。一旦我删除了这一行：

```
var t = $(this); 
```

我不再收到错误消息。

我在 Dashcode 小部件中查找有关 JQuery 限制的信息的运气为零。

# android - ExpandableListView 的 SimpleCursorTreeAdapter 和 CursorLoader

> ID：10611927
> 
> 赞同：22
> 
> 时间：2012-05-16T04:18:42.827
> 
> 标签：android, simplecursoradapter, expandablelistadapter, android-cursorloader

我正在尝试通过使用 a 来异步查询提供`CursorLoader`程序`SimpleCursorTreeAdapter`

这是我的`Fragment`类，它实现了`CursorLoader`

```
public class GroupsListFragment extends ExpandableListFragment implements
  LoaderManager.LoaderCallbacks<Cursor> {

  private final String DEBUG_TAG = getClass().getSimpleName().toString();      

  private static final String[] CONTACTS_PROJECTION = new String[] {
    ContactsContract.Contacts._ID,
    ContactsContract.Contacts.DISPLAY_NAME };  

  private static final String[] GROUPS_SUMMARY_PROJECTION = new String[] {
    ContactsContract.Groups.TITLE, ContactsContract.Groups._ID,
    ContactsContract.Groups.SUMMARY_COUNT,
    ContactsContract.Groups.ACCOUNT_NAME,
    ContactsContract.Groups.ACCOUNT_TYPE,
    ContactsContract.Groups.DATA_SET };

  GroupsAdapter mAdapter;

  @Override
  public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    populateContactList();

    getLoaderManager().initLoader(-1, null, this);
  } 

  public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    // This is called when a new Loader needs to be created.
    Log.d(DEBUG_TAG, "onCreateLoader for loader_id " + id);
    CursorLoader cl;
    if (id != -1) {
      // child cursor
      Uri contactsUri = ContactsContract.Data.CONTENT_URI;
      String selection = "(("
        + ContactsContract.CommonDataKinds.GroupMembership.DISPLAY_NAME
        + " NOTNULL) AND ("
        + ContactsContract.CommonDataKinds.GroupMembership.HAS_PHONE_NUMBER
        + "=1) AND ("
        + ContactsContract.CommonDataKinds.GroupMembership.DISPLAY_NAME
        + " != '') AND ("
        + ContactsContract.CommonDataKinds.GroupMembership.GROUP_ROW_ID
        + " = ? ))";
      String sortOrder = ContactsContract.CommonDataKinds.GroupMembership.DISPLAY_NAME
        + " COLLATE LOCALIZED ASC";
      String[] selectionArgs = new String[] { String.valueOf(id) };

      cl = new CursorLoader(getActivity(), contactsUri,
        CONTACTS_PROJECTION, selection, selectionArgs, sortOrder);
    } else {
      // group cursor
      Uri groupsUri = ContactsContract.Groups.CONTENT_SUMMARY_URI;
      String selection = "((" + ContactsContract.Groups.TITLE
        + " NOTNULL) AND (" + ContactsContract.Groups.TITLE
        + " != '' ))";
      String sortOrder = ContactsContract.Groups.TITLE
        + " COLLATE LOCALIZED ASC";
      cl = new CursorLoader(getActivity(), groupsUri,
        GROUPS_SUMMARY_PROJECTION, selection, null, sortOrder);
    }

    return cl;
  }

  public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    // Swap the new cursor in. 
    int id = loader.getId();
    Log.d(DEBUG_TAG, "onLoadFinished() for loader_id " + id);
    if (id != -1) {
      // child cursor
      if (!data.isClosed()) {
        Log.d(DEBUG_TAG, "data.getCount() " + data.getCount());
        try {
          mAdapter.setChildrenCursor(id, data);
        } catch (NullPointerException e) {
          Log.w("DEBUG","Adapter expired, try again on the next query: "
            + e.getMessage());
        }
      }
    } else {
      mAdapter.setGroupCursor(data);
    }

  }

  public void onLoaderReset(Loader<Cursor> loader) {
    // This is called when the last Cursor provided to onLoadFinished()
    // is about to be closed.
    int id = loader.getId();
    Log.d(DEBUG_TAG, "onLoaderReset() for loader_id " + id);
    if (id != -1) {
      // child cursor
      try {
        mAdapter.setChildrenCursor(id, null);
      } catch (NullPointerException e) {
        Log.w("TAG", "Adapter expired, try again on the next query: "
          + e.getMessage());
      }
    } else {
      mAdapter.setGroupCursor(null);
    }
  }

  /**
  * Populate the contact list
  */
  private void populateContactList() {
    // Set up our adapter
    mAdapter = new GroupsAdapter(getActivity(),this,
      android.R.layout.simple_expandable_list_item_1,
      android.R.layout.simple_expandable_list_item_1,
      new String[] { ContactsContract.Groups.TITLE }, // Name for group layouts
      new int[] { android.R.id.text1 },
      new String[] { ContactsContract.Contacts.DISPLAY_NAME }, // Name for child layouts
      new int[] { android.R.id.text1 });

    setListAdapter(mAdapter);
  }
} 
```

这是我的子类的适配器`SimpleCursorTreeAdapter`

```
public class GroupsAdapter extends SimpleCursorTreeAdapter {

  private final String DEBUG_TAG = getClass().getSimpleName().toString();

  private ContactManager mActivity;
  private GroupsListFragment mFragment;

  // Note that the constructor does not take a Cursor. This is done to avoid
  // querying the database on the main thread.
  public GroupsAdapter(Context context, GroupsListFragment glf,
    int groupLayout, int childLayout, String[] groupFrom,
    int[] groupTo, String[] childrenFrom, int[] childrenTo) {

    super(context, null, groupLayout, groupFrom, groupTo, childLayout,
      childrenFrom, childrenTo);
    mActivity = (ContactManager) context;
    mFragment = glf;
  }

  @Override
  protected Cursor getChildrenCursor(Cursor groupCursor) {
    // Given the group, we return a cursor for all the children within that group
    int groupId = groupCursor.getInt(groupCursor
      .getColumnIndex(ContactsContract.Groups._ID));

    Log.d(DEBUG_TAG, "getChildrenCursor() for groupId " + groupId);

    Loader loader = mActivity.getLoaderManager().getLoader(groupId); 
    if ( loader != null && loader.isReset() ) { 
      mActivity.getLoaderManager().restartLoader(groupId, null, mFragment); 
    } else { 
      mActivity.getLoaderManager().initLoader(groupId, null, mFragment); 
    } 

  }

} 
```

问题是，当我单击父组之一时，三件事中的一件会以一种不一致的方式发生。

1）要么组打开，孩子们出现在它下面

2) 组没有打开并且`setChildrenCursor()`调用抛出一个`NullPointerException`错误，该错误在 try catch 块中被捕获

3）组不开，不报错

以下是扩展组并显示子项的场景中的一些调试输出：

当显示所有组时，它会输出：

```
05-20 10:08:22.765: D/GroupsListFragment(22132): onCreateLoader for loader_id -1
05-20 10:08:23.613: D/GroupsListFragment(22132): onLoadFinished() for loader_id -1 
```

-1 是组游标的loader_id

然后，如果我特别选择一个组（我们称之为 A 组），它会输出：

```
05-20 23:22:31.140: D/GroupsAdapter(13844): getChildrenCursor() for groupId 67
05-20 23:22:31.140: D/GroupsListFragment(13844): onCreateLoader for loader_id 67
05-20 23:22:31.254: D/GroupsListFragment(13844): onLoadFinished() for loader_id 67
05-20 23:22:31.254: D/GroupsListFragment(13844): data.getCount() 4
05-20 23:22:31.254: W/GroupsListFragment(13844): Adapter expired, try again on the next query: null 
```

小组没有扩大，`NullPointerException`被抓住了。然后，如果我选择另一个组（我们称之为 B 组），它会输出：

```
05-20 23:25:38.089: D/GroupsAdapter(13844): getChildrenCursor() for groupId 3
05-20 23:25:38.089: D/GroupsListFragment(13844): onCreateLoader for loader_id 3
05-20 23:25:38.207: D/GroupsListFragment(13844): onLoadFinished() for loader_id 3
05-20 23:25:38.207: D/GroupsListFragment(13844): data.getCount() 6 
```

这一次，`NullPointerException`没有抛出。而不是 B 组扩展，A 组被扩展。

任何人都可以解释`setChildrenCursor()`呼叫所表现出的行为吗？

我认为组/子 CursorLoaders 如何在`onCreateLoader()`. 对于该组`CursorLoader`，我只想要手机中的所有组。子级`CursorLoader`应包含组内的所有联系人。有谁知道可能是什么问题？

**更新**

感谢@Yam 的建议，我现在修改了`getChildrenCursor()`方法。我现在选择 groupCursor 位置而不是 ContactsContract.Groups._ID 的值来传递给 initLoader() 调用。我还将逻辑更改为仅在 loader 不为 null 且 loader isReset 为 false 时调用 restartLoader() 。

```
protected Cursor getChildrenCursor(Cursor groupCursor) {
  // Given the group, we return a cursor for all the children within that
  // group
  int groupPos = groupCursor.getPosition();
  Log.d(DEBUG_TAG, "getChildrenCursor() for groupPos " + groupPos);

  Loader loader = mActivity.getLoaderManager().getLoader(groupPos);
  if (loader != null && !loader.isReset()) {
    mActivity.getLoaderManager().restartLoader(groupPos, null, mFragment);
  } else {
    mActivity.getLoaderManager().initLoader(groupPos, null, mFragment);
  }

  return null;
} 
```

这绝对更有意义，并且不会表现出有时而不是其他时间扩展组的一些不稳定行为。

但是，有些联系人显示在他们不属于的组下。还有一些组中确实有联系人，但不会显示任何联系人。所以现在看来`getChildrenCursor()`​​问题可能已经解决了。

但是现在看起来是如何在`onCreateLoader()`方法中实例化 CursorLoaders 的问题。子游标的方法中 的`CursorLoader`返回是否被不正确地实例化？`onCreateLoader()`

**更新**

所以我已经确定了我的问题之一。在该`getChildrenCursor()`方法中，如果我将 groupId 传递给该`initLoader()`方法，那么在该`onCreateLoader()`方法中，当`CursorLoader`创建它时，它将获得查询的正确 groupid 参数。但是，在`onLoadFinished()`调用中`setChildrenCursor()`传递的是第一个参数的加载程序 ID，而不是 groupPosition。我猜我必须将加载器 ID 映射到某些数据结构中的组位置。但我不确定这是否是最好的方法。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-12T01:32:10.087

所以我发现我需要将 loaderids 映射到 groupPositions ，这解决了我的问题：

这是我的`Fragment`类，它实现了`CursorLoader`

```
public class GroupsListFragment extends ExpandableListFragment implements
  LoaderManager.LoaderCallbacks<Cursor> {

  private final String DEBUG_TAG = getClass().getSimpleName().toString();      

  private static final String[] CONTACTS_PROJECTION = new String[] {
    ContactsContract.Contacts._ID,
    ContactsContract.Contacts.DISPLAY_NAME };  

  private static final String[] GROUPS_PROJECTION = new String[] {
    ContactsContract.Groups.TITLE, ContactsContract.Groups._ID };

  GroupsAdapter mAdapter;

  @Override
  public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    populateContactList();

    // Prepare the loader. Either re-connect with an existing one,
    // or start a new one.
    Loader loader = getLoaderManager().getLoader(-1);
    if (loader != null && !loader.isReset()) {
      getLoaderManager().restartLoader(-1, null, this);
    } else {
      getLoaderManager().initLoader(-1, null, this);
    }
  } 

  public Loader<Cursor> onCreateLoader(int id, Bundle args) {
    // This is called when a new Loader needs to be created.
    Log.d(DEBUG_TAG, "onCreateLoader for loader_id " + id);
    CursorLoader cl;
    if (id != -1) {
      // child cursor
      Uri contactsUri = ContactsContract.Data.CONTENT_URI;
      String selection = "((" + ContactsContract.Contacts.DISPLAY_NAME
        + " NOTNULL) AND ("
        + ContactsContract.Contacts.HAS_PHONE_NUMBER + "=1) AND ("
        + ContactsContract.Contacts.DISPLAY_NAME + " != '') AND ("
        + ContactsContract.CommonDataKinds.GroupMembership.GROUP_ROW_ID
        + " = ? ))";
      String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
        + " COLLATE LOCALIZED ASC";
      String[] selectionArgs = new String[] { String.valueOf(id) };

      cl = new CursorLoader(getActivity(), contactsUri,
        CONTACTS_PROJECTION, selection, selectionArgs, sortOrder);
    } else {
      // group cursor
      Uri groupsUri = ContactsContract.Groups.CONTENT_URI;
      String selection = "((" + ContactsContract.Groups.TITLE
        + " NOTNULL) AND (" + ContactsContract.Groups.TITLE
        + " != '' ))";
      String sortOrder = ContactsContract.Groups.TITLE
        + " COLLATE LOCALIZED ASC";
      cl = new CursorLoader(getActivity(), groupsUri,
        GROUPS_PROJECTION, selection, null, sortOrder);
    }

    return cl;
  }

  public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    // Swap the new cursor in. 
    int id = loader.getId();
    Log.d(DEBUG_TAG, "onLoadFinished() for loader_id " + id);
    if (id != -1) {
      // child cursor
      if (!data.isClosed()) {
        Log.d(DEBUG_TAG, "data.getCount() " + data.getCount());

        HashMap<Integer,Integer> groupMap = mAdapter.getGroupMap();
        try {
          int groupPos = groupMap.get(id);
          Log.d(DEBUG_TAG, "onLoadFinished() for groupPos " + groupPos);
          mAdapter.setChildrenCursor(groupPos, data);
        } catch (NullPointerException e) {
          Log.w("DEBUG","Adapter expired, try again on the next query: "
            + e.getMessage());
        }
      }
    } else {
      mAdapter.setGroupCursor(data);
    }

  }

  public void onLoaderReset(Loader<Cursor> loader) {
    // This is called when the last Cursor provided to onLoadFinished()
    // is about to be closed.
    int id = loader.getId();
    Log.d(DEBUG_TAG, "onLoaderReset() for loader_id " + id);
    if (id != -1) {
      // child cursor
      try {
        mAdapter.setChildrenCursor(id, null);
      } catch (NullPointerException e) {
        Log.w("TAG", "Adapter expired, try again on the next query: "
          + e.getMessage());
      }
    } else {
      mAdapter.setGroupCursor(null);
    }
  }

  /**
  * Populate the contact list
  */
  private void populateContactList() {
    // Set up our adapter
    mAdapter = new GroupsAdapter(getActivity(),this,
      android.R.layout.simple_expandable_list_item_1,
      android.R.layout.simple_expandable_list_item_1,
      new String[] { ContactsContract.Groups.TITLE }, // Name for group layouts
      new int[] { android.R.id.text1 },
      new String[] { ContactsContract.Contacts.DISPLAY_NAME }, // Name for child layouts
      new int[] { android.R.id.text1 });

    setListAdapter(mAdapter);
  }
} 
```

这是我的子类的适配器`SimpleCursorTreeAdapter`

```
public class GroupsAdapter extends SimpleCursorTreeAdapter {

  private final String DEBUG_TAG = getClass().getSimpleName().toString();

  private ContactManager mActivity;
  private GroupsListFragment mFragment;

  protected final HashMap<Integer, Integer> mGroupMap;

  // Note that the constructor does not take a Cursor. This is done to avoid
  // querying the database on the main thread.
  public GroupsAdapter(Context context, GroupsListFragment glf,
    int groupLayout, int childLayout, String[] groupFrom,
    int[] groupTo, String[] childrenFrom, int[] childrenTo) {

    super(context, null, groupLayout, groupFrom, groupTo, childLayout,
      childrenFrom, childrenTo);
    mActivity = (ContactManager) context;
    mFragment = glf;
    mGroupMap = new HashMap<Integer, Integer>();
  }

  @Override
  protected Cursor getChildrenCursor(Cursor groupCursor) {
    // Given the group, we return a cursor for all the children within that group
    int groupPos = groupCursor.getPosition();
    int groupId = groupCursor.getInt(groupCursor
      .getColumnIndex(ContactsContract.Groups._ID));
    Log.d(DEBUG_TAG, "getChildrenCursor() for groupPos " + groupPos);
    Log.d(DEBUG_TAG, "getChildrenCursor() for groupId " + groupId);

    mGroupMap.put(groupId, groupPos);

    Loader loader = mActivity.getLoaderManager().getLoader(groupId); 
    if ( loader != null && !loader.isReset() ) { 
      mActivity.getLoaderManager().restartLoader(groupId, null, mFragment); 
    } else { 
      mActivity.getLoaderManager().initLoader(groupId, null, mFragment); 
    } 

    return null;    
  }

  //Accessor method
  public HashMap<Integer, Integer> getGroupMap() {
    return mGroupMap;
  }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-29T18:59:25.057

在我的例子中，我使用 initLoader（或 restartLoader）的第一个参数为回调提供组位置，并使用 Bundle 在 getChildrenCursor 中获取子数据。

喜欢以下；

```
public class ExpandableListAdapter extends SimpleCursorTreeAdapter implements LoaderManager.LoaderCallbacks<Cursor> {
    private Context mContext;
    private LoaderManager mManager;

    public ExpandableListAdapter(
            Context context, ExpandableListAdapterListener listener, LoaderManager manager, Cursor groupCursor,
            int groupLayout, String[] groupFrom, int[] groupTo,
            int childLayout, String[] childFrom, int[] childTo) {
        super(context, groupCursor, groupLayout, groupFrom, groupTo, childLayout, childFrom, childTo);
        mContext  = context;
        mManager  = manager;
    }
    @Override
    protected Cursor getChildrenCursor(Cursor groupCursor) {
        final long idGroup = groupCursor.getLong(groupCursor.getColumnIndex("_id"));
        Bundle bundle = new Bundle();
        bundle.putLong("idGroup", idGroup);
        int groupPos = groupCursor.getPosition();
        if (mManager.getLoader(groupPos) != null && !mManager.getLoader(groupPos).isReset()) {
            mManager.restartLoader(groupPos, bundle, this);
        }
        else {
            mManager.initLoader(groupPos, bundle, this);
        }
        return null;
    }
    @Override
    public Loader<Cursor> onCreateLoader(int groupPos, Bundle bundle) {
        long idGroup = bundle.getLong("idGroup");
        return new CursorLoader(
                mContext,
                Provider.URI,
                new String[]{Table.ID, Table.ID_GROUP, Table.TITLE, Table.CONTEXT},
                Table.ID_GROUP + " = ?",
                new String[]{String.valueOf(idGroup)},
                Table.CREATED + " DESC"
        );
    }
    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
        setChildrenCursor(loader.getId(), cursor);
    }
    @Override
    public void onLoaderReset(Loader<Cursor> loader) {
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T03:07:18.243

我对使用 ExpandableListView 有不好的体验。它在不同的 Android 版本中的行为是不同的。如果您还没有深入了解它，您可能想考虑重新设计您的界面。

无论如何，对于你的问题，我建议你回顾这 3 点。

首先，在您调用初始化子游标加载器时

```
mActivity.getLoaderManager().initLoader(groupId, null, mFragment); 
```

您传入的 groupId 是 ContactsContract.Groups._ID 的值。然后，您在 setChildrenCursor 的第一个参数中使用此 id。这可能是错误的。不要将 groupId 传递给 initLoader，而是尝试传递组光标位置。例如：

```
int iGroupPos = groupCursor.getPosition();
if ( loader != null && !loader.isReset())
    mActivity.getLoaderManager().restartLoader(iGroupPos, null, mFragment); 
else
    mActivity.getLoaderManager().initLoader(iGroupPos, null, mFragment); 
```

其次，您可以看到，在我上面建议的代码中，您可能应该仅在 loader 不为 null 且 loader isReset 为 false 时调用 restartLoader。

第三，您需要为 getChildrenCursor 调用返回一个值，我认为它可能应该为 null。

# c++ - 如何在 C++ 中有效地实现支持算术的无穷大和负无穷大？

> ID：10611930
> 
> 赞同：2
> 
> 时间：2012-05-16T04:19:12.943
> 
> 标签：c++, math

简单的解决方案是：

```
class Number
{
public: 
    bool isFinite();
    bool isPositive();
    double value();

    ...

private:
    double value_;
    bool isFinite_;
    bool isPositive_;

    ...
}; 
```

我担心的是效率：

来自有效的 C++：改进程序和设计的 55 种特定方法（第 3 版），作者：Scott Meyers：

> 即使小对象具有廉价的复制构造函数，也可能存在性能问题。一些编译器以不同的方式处理内置类型和用户定义类型，即使它们具有相同的底层表示。例如，一些编译器拒绝将只包含双精度的对象放入寄存器中，尽管他们很乐意定期将裸双精度放在那里。当这种事情发生时，最好通过引用传递这些对象，因为编译器肯定会将指针（引用的实现）放入寄存器中。

有没有办法绕过效率问题？例如一个使用一些汇编语言魔法的库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-16T04:28:09.110

几乎没有理由为 double 实现 Number 类。double 格式已经实现了 Infinity、NaN 和 signage 作为原始基本 double 类型的一部分。

其次，您应该首先编写代码以确保正确性，然后再尝试优化，此时您可以考虑分解出特定的数据结构并重写代码和算法。

现代编译器在编写好代码方面通常非常高效，并且通常比大多数人类程序员做得更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T04:30:51.307

对于您的*具体*示例，我将按原样使用双打，而不是在课堂上使用。它们非常适合和定义用于处理无穷大。

在更一般的意义上，您应该使用微不足道的解决方案，并且只在（或者，更有可能，如果）它成为问题时才担心性能。

这意味着对它进行编码并在您将要使用它的许多场景中对其进行测试。

如果它仍然在您的性能要求范围内执行，请不要担心尝试对其进行优化。你应该*有*一些更具体的性能要求，“我希望它尽可能快地运行”:-)

请记住，效率*并不*总是意味着“尽可能快，无论成本如何”。这意味着在不必牺牲其他东西（如可读性或可维护性）的情况下实现您的目标。

如果您进行一个使用户等待 0.1 秒的完整操作并将其优化到快十倍的程度，那么用户根本不会注意到这一点（我说“完成”，因为显然*，*如果它做了一万次，没有某种临时结果）。

记住，*测量，不要猜测！*

# c# - 如何实现 Data Extender 以在组件创建页面中填充列表？

> ID：10611935
> 
> 赞同：3
> 
> 时间：2012-05-16T04:19:58.213
> 
> 标签：c#, tridion

我是 Tridion 中数据扩展器概念的新手。我了解到它需要来自 SDL Tridion 2011 SP1 在线文档的配置文件和 cs 文件。是否需要为此使用核心服务？请解释一下步骤。提前致谢。早期反应表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-16T05:45:32.177

请阅读 Jaime Santos Alcón 的这篇优秀文章：

[http://jaimesantosalcon.blogspot.com/2012/04/sdl-tridion-2011-data-extenders-real.html](http://jaimesantosalcon.blogspot.com/2012/04/sdl-tridion-2011-data-extenders-real.html)

它准确地解释了您需要哪些步骤以及涉及哪些文件。

# facebook - Facebook Like 按钮：它如何选择要显示的图像

> ID：10611943
> 
> 赞同：7
> 
> 时间：2012-05-16T04:20:39.487
> 
> 标签：facebook, facebook-like, facebook-social-plugins

我在我的网站上添加了“喜欢”按钮。

一般来说，它工作正常，唯一的问题是当用户添加一些文本并将其发布到他的帖子包含图像的配置文件中时。选择的图像没有任何意义，它是菜单项之一，没有任何意义。

您能否建议如何向 facebook 提供更好的图像？我在他们的文档（http://developers.facebook.com/docs/reference/plugins/like/）中没有看到任何相关信息，可能我忽略了这一点？

谢谢你。

PS 非常相似的问题：有什么方法可以建议他想要分享的用户文本（一旦用户点击“喜欢”按钮就会出现）？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T10:31:51.133

您可以通过将 Open Graph 标记添加到包含“Like”按钮的每个页面的 head 部分来指定图像。

您可以在 og:image 标记中指定图像 URL，Facebook 将在用户的个人资料条目中使用此图像。

og:title 也是如此 - 这将是用户个人资料中新条目的标题。og:site_name（将在标题下显示为灰色文本）等。

有关详细说明，请参阅[http://developers.facebook.com/docs/reference/plugins/like/](http://developers.facebook.com/docs/reference/plugins/like/)和 [http://developers.facebook.com/docs/opengraphprotocol/](http://developers.facebook.com/docs/opengraphprotocol/) 。

您可以将 Open Graph 标记用于两个版本的“喜欢”按钮 - iframe 和 XFBML。

将标签添加到页面后，您可以使用[http://developers.facebook.com/tools/debug](http://developers.facebook.com/tools/debug)检查它们是否正常。

# javascript - 书签需要 Javascript 帮助

> ID：10611947
> 
> 赞同：0
> 
> 时间：2012-05-16T04:21:11.253
> 
> 标签：javascript, url, bookmarks

嘿，我有这个小 javascript 书签

`javascript:(function(){ window.open('http://www.mywebsite.com/index.php?currentsite#bookmark'); })()`

如何将当前网站的 url 放入该 url？我听说过使用`document.URL`但我不知道如何使用当前浏览的站点的 URL 将其放入书签中的 URL。目前的意思是结果是`http://www.mywebsite.com/index.php?currentsite=document.URL#bookmark`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-16T04:30:08.117

```
javascript:(function(){ window.open('http://www.mywebsite.com/index.php?currentsite=' + encodeURIComponent(location.href) + '#bookmark'); })() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T04:30:45.323

尝试 window.location 或 document.location.href 或 window.location.href 我忘记了哪个有效:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-16T04:32:57.737

尝试改用这个：

```
javascript:( function(){window.open('http://www.mywebsite.com/index.php?'+document.location.href+'#bookmark');} )() 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T04:31:59.653

只需使用 window.location.href - 像这样：

```
window.open( 'http://<someurl>?' + window.location.href + '#somebookmark' ); 
```

window.location.href 会给你当前帧的href。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-16T04:33:24.523

我不确定您在说什么，但如果您想获取完整的 URL 以及 anker，您可以`document.location.href` [http://www.w3schools.com/jsref/prop_doc_url.asp](http://www.w3schools.com/jsref/prop_doc_url.asp)

您可以使用位置对象[http://www.w3schools.com/jsref/obj_location.asp访问 URL 的各个部分](http://www.w3schools.com/jsref/obj_location.asp)

您的代码应如下所示：

```
function(){ 
    var url = document.location.href;
    window.open('http://www.mywebsite.com/index.php?currentsite = ' + url); 
} 
```

不知道这是否是你想要做的。

# iphone - 根据自定义单元格高度动态uitableviewcell高度

> ID：10611952
> 
> 赞同：0
> 
> 时间：2012-05-16T04:21:40.087
> 
> 标签：iphone, ios, uitableview

我想知道，有没有办法读取您将在 uitableviewcell 中使用的自定义 tableview 单元格的高度，然后您可以对 uitableviewcell 说这个 ---> 高度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T04:33:16.833

我不完全理解你的问题，但你想为每个自定义单元格设置高度吗？如果是，那么您可以通过以下方式进行：

假设我在索引 0 处有自定义单元格，其余的单元格是我的默认单元格，或者也可以是自定义单元格。

```
- (CGFloat)tableView:(UITableView *)_tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (indexPath.row == 0 ) {
       return 105.0;
    }else {
        return 80.0;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T04:32:22.123

不，您在 xib/storyboard 中设置的高度**仅用于显示目的**，不会转移到代码中。

更改高度的唯一方法是从您的自定义子类中，通过覆盖`tableView:heightForRowAtIndexPath:`.

如果你有很多不同的高度，你总是可以继承 UITableViewCell 并添加一个在看到你的子类时使用的`height`属性。`tableView:heightForRowAtIndexPath:`然后，在您的故事板中，选择您的单元格，转到身份检查器，并为高度添加一个**用户定义的运行时属性**，并使用您需要的值。

# php - php，如何在zend框架内发送手动帖子？

> ID：10611954
> 
> 赞同：1
> 
> 时间：2012-05-16T04:21:52.080
> 
> 标签：php, zend-framework, redirect, post, get

我不确定问题是否正确，但这是我的情况：

我有两个动作： `indexAction`和`searchAction`

第三个动作看起来像这样：

```
public function customsearchAction()
{
    $request = $this->getRequest();
    if($request->isPost()){

        $category = $request->getParam('select_category');
        $searchString   = $request->getParam('header_search_form');

        if($category == 'index'){
            $this->_redirector->gotoSimple('index', 'index', null,
                                   array('term' => $searchString )
                                   );
        }
        if($category == 'search'){
            $this->_redirector->gotoSimple('search', 'index', null,
                                   array('term' => $searchString )
                                   );
        }
    }
} 
```

这很好，花花公子，唯一的问题是重定向添加了`term`作为获取字符串，而不是像我需要的那样的帖子。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T04:30:05.413

浏览器重定向将始终将术语添加到 GET 以处理下一个请求。您可以在这里做的是使用 ZF MVC 内部重定向 using 'forward' 。

```
$this->_forward('search','index',null,array('term' => $searchString )); 
```

在你的搜索里面动作

```
$searchString = $this->_getParam('term'); 
```

# perl - 自动点击网站并执行任务

> ID：10611959
> 
> 赞同：-1
> 
> 时间：2012-05-16T04:22:21.280
> 
> 标签：perl

我想将我的电子邮件作为允许的电子邮件地址添加给使用我的程序的人。在亚马逊，我需要遵循一系列程序来确保我的电子邮件地址被允许。我想知道是否可以使用 perl 模块自动执行此过程，因为它非常重复。我必须登录，然后单击管理 kindle，然后以用户身份单击其他几个按钮。我将如何使用 perl 脚本自动执行此过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T08:36:18.927

听起来你想要[WWW::Mechanize](https://metacpan.org/module/WWW%3a%3aMechanize)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T04:48:37.510

你有两个选择。您可以使用greasemonkey 运行浏览器脚本以使用javascript 自动为您点击，或者您可以使用您选择的编程语言和curl 来获取您需要的页面，抓取数据，然后通过get 或post 重新提交该数据，具体取决于网站使用什么。如果您知道要按下最终按钮的页面的 url，您可以发出 curl 请求以登录，然后发出 curl 请求以假装您刚刚单击了该页面上的按钮。大多数情况下，您不需要访问两者之间的所有页面。但有时，你会。Curl 可能很复杂，对新用户来说有点令人生畏，但这里有一个 perl 的 curl 模块[http://search.cpan.org/perldoc?WWW::Curl](http://search.cpan.org/perldoc?WWW::Curl)如果你需要学习如何使用它，这里有一个很好的资源[http://php.net/manual/en/ref.curl.php](http://php.net/manual/en/ref.curl.php)是在php里面的，不过我觉得所有的功能都应该和perl里面的一样。亚马逊不应该，但如果他们确实阻止 curl 请求，只需将标题从浏览器复制到 curl 并使用它们。祝你好运！

# ruby - 如何在 Windows 上的 Middleman 中使用自定义项目模板

> ID：10611964
> 
> 赞同：0
> 
> 时间：2012-05-16T04:22:50.750
> 
> 标签：ruby, middleman

我为 Middleman 创建了一个自定义项目模板。[文档](http://middlemanapp.com/guides/getting-started/)说明我应该将模板存储在文件`~/.middleman/`夹中。这在 Mac 上运行良好，但我应该在 Windows 7 上将模板存储在哪里？

我试过把它放在目录中`.middleman`的一个文件夹中`%UserProfile%`。但是当我运行时`middleman init --help`，自定义模板不会显示在可用模板列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T02:15:40.877

我已经解决了这个问题。回家的路不是我所期望的。我`puts File.expand_path("~/")`在 Ruby 中运行以找出 Middleman 期望该`.middleman`目录位于何处。

# c - 如何使用稍后在 C 中重新分配的值初始化数组

> ID：10611970
> 
> 赞同：1
> 
> 时间：2012-05-16T04:24:37.130
> 
> 标签：c, data-structures

我有大约 12000 个预先知道的值，我需要在程序的早期将它们放入一个数组中。在某些情况下，我稍后需要使用 realloc 调整这个数组的大小。有没有办法用 malloc/calloc 初始化一个数组，或者用其他几个值填充一个数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-16T04:26:43.070

You cannot initialize a `malloc`ed array this way, your best chance is to have it statically in your program, and copy it to a `malloc`ed array at the beginning of the run, e.g.:

```
static int arr[] = {1,2,3,4};
static int * malloced_arr;

// in the init function
malloced_arr = malloc(sizeof(arr));
if (malloced_arr)
{
    memcpy(malloced_arr, arr, sizeof(arr));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-16T04:36:11.930

这就是零长度数组有用的东西。例如：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct values {
    int x[4];
    int y[0];
} V = { {1, 2, 3} };

int
main( int argc, char ** argv )
{
    int *t;
    int i;
    struct values *Y;

    (void) argc; (void) argv;
    /* Allocate space for 100 more items */
    Y = malloc( sizeof *Y + 100 * sizeof *Y->y );
    t = Y->x;
    memcpy( Y, &V, sizeof V );
    t[3] = 4;

    for( i = 0; i < 4; i++ )
        printf( "%d: %d\n", i, t[ i ]);

    return 0;
} 
```

当然，这实际上只是一个客厅技巧，对 Binyamin 的解决方案没有任何好处，并且引入了许多完全不必要的混淆。

# ruby-on-rails - How can I speed up the creation of 5,000 records for my rspec tests?

> ID：10611973
> 
> 赞同：9
> 
> 时间：2012-05-16T04:24:48.233
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, testing, rspec

I am using Ruby on Rails 3.2.2, FactoryGirl 3.1.0, FactoryGirlRails 3.1.0, Rspec 2.9.0 and RspecRails 2.9.0\. In order to test my application I have to create a lot of records (about 5000) in the database, but that operation is very slow (it takes more than 10 minutes to create records). I proceed like this:

```
before(:each) do
  5000.times do
    FactoryGirl.create(:article,)
  end
end 
```

How can I improve my spec code so to go faster?

*Note*: Maybe the slowness is given by (5) article callbacks that run before and after each article creation process, but I can skip those (since the only things I have to test are articles and not associated models) if those slow creation of records... is it possible to make that and is it the right way to proceed?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T04:49:35.090

当你开始处理大量这样的记录时，最好直接在 sql 中进行，以避免你不需要的 ActiveRecord 开销。
我会根据您的 sql 实现编写脚本或创建存储过程来执行此操作。它很可能会在几秒钟内完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T04:48:34.717

我不是测试专家，但我认为 FactoryGirl 不应该有这种用途。应该只是创建一些记录。

想想如果你真的需要这么多记录进行测试，如果需要，是否必须在每次测试之前“重置”它们？（是的，您在每次测试之前创建它们，因此您实际上是在创建 5000*number_of_tests 记录）。原始 sql 脚本不是一种选择吗？因此，当您的测试数据库被创建时，所有这些记录也会被创建。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T04:59:05.833

正如其他人所提到的，工厂不应该是大批量的。为什么任何合理的单元测试都需要 5,000 条记录？

也就是说，速度变慢的部分原因是**#create**在构建后将每条记录保存到数据库中。您可能想改用**FactoryGirl.build**；请参阅[使用工厂](https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md)。

当然，您将用 I/O 密集型进程换取内存密集型进程。如果这不是您真正想要的，请考虑使用**#build**实例化足够的记录来执行每个单独的测试，或者使用针对批量加载优化的[夹具文件。](http://guides.rubyonrails.org/testing.html#the-low-down-on-fixtures)

# android - Android SharedActionProvider without displaying latest used action

> ID：10611974
> 
> 赞同：0
> 
> 时间：2012-05-16T04:25:19.420
> 
> 标签：android

By default Android `SharedActionProvider` shows last used action(facebook, twitter etc..). How do I disable not to show recent used action.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T05:21:13.157

目前无法自定义此功能，因此您无法禁用它。

# actionscript-3 - Bug in TextArea control of Flash

> ID：10611975
> 
> 赞同：0
> 
> 时间：2012-05-16T04:25:20.370
> 
> 标签：actionscript-3, flash, apache-flex

```
<s:TextArea id="txtAddress" x="118" y="31" width="150" height="88" maxChars="100"
                                tabIndex="2"/>

txtAddress.text="AAAAAAAAAAAA CCCCCCCCCCCCCCCCCCCCCC P OABCDEFGHIJKLMNOPQRSTUVWXYZWSDER-682021"; 
```

This actionscript code crashes flash plugin. Some times it will not crash but the text inside the text area will be overwrite twice. The same is happening with every browser I have tested. I think this is flash's bug. **(Please note that if width of the textarea or if the value changes, it will work fine)** Can any one comment on this?

**Below is the markup code:**

```
<s:BorderContainer x="2" y="32" height="125" width="565"  borderColor="#488AC7" 
                           backgroundColor="#EEF0EE" cornerRadius="2">
            <s:TextInput id="txtPhoneNo" x="407" y="3" width="150" maxChars="15" tabIndex="3"/>
            <s:Label x="12" y="13" text="Name" fontWeight="normal" />
            <s:TextInput x="118" y="3" width="150" id="txtName" maxChars="100" tabIndex="1" />
            <s:Label x="12" y="40" text="Address" fontWeight="normal"/>
            <s:TextArea id="txtAddress" x="118" y="31" width="150" height="88" maxChars="100"
                        tabIndex="2"/>
            <s:Label  x="302" y="13" text="Phone No." fontWeight="normal"/>
            <s:Label x="302" y="40" text="Mobile" fontWeight="normal" />
            <s:TextInput id="txtMobile" x="407" y="31" width="150" maxChars="15" tabIndex="4"/>
            <s:Label x="302" y="70" text="Email" fontWeight="normal" />
            <s:TextInput id="txtEmail" x="407" y="60" width="150" maxChars="100" tabIndex="5"/>
            <s:Label x="302" y="101" text="ECS Account NO"/>
            <s:TextInput id="txtECSAcNo" x="407" y="91" width="150" tabIndex="6"/>
        </s:BorderContainer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:37:37.213

这与您的系统或实现是隔离的。

您提供的是功能性的：

![文本区](../Images/b3bd17df52d82c1fb89549d2c58ed0fc.png)

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark"
               xmlns:mx="library://ns.adobe.com/flex/mx"
               creationComplete="creationCompleteHandler(event)">

    <fx:Script>
        <![CDATA[
            import mx.events.FlexEvent;

            protected function creationCompleteHandler(event:FlexEvent):void
            {
                txtAddress.text = "AAAAAAAAAAAA CCCCCCCCCCCCCCCCCCCCCC P OABCDEFGHIJKLMNOPQRSTUVWXYZWSDER-682021";
            }
        ]]>
    </fx:Script>

    <s:TextArea id="txtAddress"
                x="118"
                y="31"
                width="150"
                height="88"
                maxChars="100"
                tabIndex="2" />

</s:Application> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T09:05:14.277

似乎在其他地方，您将 textarea 的字体大小设置为无效值。我之前也遇到过同样的问题，也许你只是将​​它设置为某个值，例如“10px”。

# backbone.js - Backbone.js 不呈现

> ID：10611977
> 
> 赞同：1
> 
> 时间：2012-05-16T04:25:24.287
> 
> 标签：backbone.js

由于某种原因，我的收藏没有呈现。找不到原因。

```
TreeItem = Backbone.Model.extend({

});

TreeList = Backbone.Collection.extend({
  model: TreeItem,
  url: "/get_tree_list"
});

window.tree_list = new TreeList();

// VIEW

window.TreeItemView = Backbone.View.extend({
  tagName: 'li',
  initialize: function(){
    _.bindAll(this, 'render');
  },
  render: function(){
    $(this.el).html('<span>'+this.model.get('title')+'</span>');
    return this;
  }
});

window.TreeListView = Backbone.View.extend({
  el: "#tree-structure",
  events: {

  },
  initialize: function() {
    _.bindAll(this, 'appendItem', 'render');
    tree_list.bind('add', this.appendItem);
    tree_list.fetch();
    this.render();
  },
  render: function() {
    tree_list.each(this.appendItem);
    return this;
  },
  appendItem: function(item){
    var tree_item_view = new TreeItemView({
      model: item
    });
    $(this.el).append(tree_item_view.render().el);

  }
});

var tree_list_view = new TreeListView; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T05:03:45.707

Backbone.js 提供了很多需要解释的地方，这就是人们新出错的地方。你的错误本质上是根本性的。您将视图直接绑定到模型

*   请参阅呈现集合实例的初始化函数！

*   始终在任何地方创建模型，然后将集合作为参数传递给视图的构造函数。检查我的小提琴

*   永远不要在模型、视图或集合中调用渲染。它们必须在应用程序文件中

### 提琴手

[http://jsfiddle.net/35QGM/](http://jsfiddle.net/35QGM/)

# asp.net-mvc - 带列表的 MVC 局部视图

> ID：10611978
> 
> 赞同：2
> 
> 时间：2012-05-16T04:25:57.313
> 
> 标签：asp.net-mvc, razor, asp.net-mvc-partialview

**已回答**

**Dbaseman 是正确**的，但为了简化这一切，我不需要模式，我的代码现在看起来像这样：

```
[ChildActionOnly]
public ActionResult RecentNews()
{
    return PartialView(db.Articles.ToList());
} 
```

和

```
@{Html.RenderAction("RecentNews");} 
```

**下面是我的旧代码，它不起作用**

我无法让以下工作正常进行，我不确定我是否接近正确的轨道。如果我创建一个视图，代码一切正常，但如果我创建一个部分视图并将其添加到其他视图，则代码不会。无论我尝试什么，我似乎都得到了错误：对象引用未设置为对象的实例。

在我看来，我有：

```
@Html.Partial("RecentNews") 
```

我的动作是这样的：

```
public ActionResult RecentNews()
{
    var rn = (from m in db.Articles
                select new RecentNews
                {
                    ArticleHeading = m.ArticleHeading
                });
    return View(rn);

    //return View(db.Articles.ToList());
} 
```

我的模态：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace melbournesportsstadium.Models
{
    public class RecentNews
    {
        public string ArticleHeading { get; set; }
    }
} 
```

还有我的RecentNews.cshtml：

```
@model List<melbournesportsstadium.Models.RecentNews>

<table>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.ArticleHeading)
        </td>
    </tr>
}

</table> 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T04:42:03.503

你得到“空引用”，因为局部视图没有接收任何模型；@Html.Partial 不返回控制器，它直接呈现视图。将其更改为 @Html.Action("RecentNews") 它应该可以工作。

# iphone - UIToolbar translucent like photos app

> ID：10611979
> 
> 赞同：0
> 
> 时间：2012-05-16T04:26:01.760
> 
> 标签：iphone, uitoolbar, uiappearance

I was wondering how to make the UIToolbar look transparent like the photos app where it allows the photo below it to be seen. I have my UIToolbar placed in IB. In IB, I set both the tintColor and backgroundColor to ClearColor.

In code, I also do:

```
_webViewToolbar.translucent = YES;
_webViewToolbar.alpha = 0.5; 
```

Unfortunately, it only looks like this:

![enter image description here](../Images/09615505e4e83ee2f98693c82109e2dd.png)

Any thoughts? Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T04:34:12.777

检查以下代码行

```
 _toolbar.barStyle = UIBarStyleBlackTranslucent;//Deprecated 
```

**编辑**

```
 _toolbar.barStyle = UIBarStyleBlack;
  _toolbar.translucent = YES; 
```

检查`UIInterface.h`类`UIKit.Framework`

你会发现以下

```
// for UINavigationBar and UIToolBar

 typedef enum {
 UIBarStyleDefault          = 0,
 UIBarStyleBlack            = 1,

 UIBarStyleBlackOpaque      = 1, // Deprecated. Use UIBarStyleBlack
 UIBarStyleBlackTranslucent = 2, // Deprecated. Use UIBarStyleBlack and set the translucent property to YES
 } UIBarStyle; 
```

问候，尼尔。

# c# - Kinect 机身颜色

> ID：10611986
> 
> 赞同：1
> 
> 时间：2012-05-16T04:27:19.560
> 
> 标签：c#, wpf, kinect

我正在编写一个需要去除背景（播放器所在的位置）的应用程序，并用某种颜色或任何字符掩盖用户身体（如[https://stackoverflow.com/questions/10599658/how-to-create-kinect-头像](https://stackoverflow.com/questions/10599658/how-to-create-kinect-avatar)）。
提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T00:00:08.033

[Channel 9](http://channel9.msdn.com/coding4fun/kinect/Display-Kinect-color-image-containing-only-players-aka-background-removal)上的教程，即使是在旧的 beta 2 中，也很容易转换。这是最终代码（已转换）

```
 public static class KinectExtensions
    {
        public static WriteableBitmap CreateLivePlayerRenderer(this KinectSensor sensor)
        {
            if (sensor.DepthStream.FrameWidth == 0)
                throw new InvalidOperationException("Either open the depth stream before calling this method or use the overload which takes in the resolution that the depth stream will later be opened with.");
            return CreateLivePlayerRenderer(sensor, sensor.DepthStream.FrameWidth, sensor.DepthStream.FrameHeight);
        }

        public static WriteableBitmap CreateLivePlayerRenderer(this KinectSensor sensor, int depthWidth, int depthHeight)
        {
            AllFramesReadyEventArgs d = new AllFramesReadyEventArgs();
            using (DepthImageFrame depthImage = d.OpenDepthImageFrame())
            {
                WriteableBitmap target = new WriteableBitmap(depthWidth, depthHeight, 96, 96, PixelFormats.Bgra32, null);
                var depthRect = new System.Windows.Int32Rect(0, 0, depthWidth, depthHeight);

                sensor.DepthFrameReady += (s, e) =>
                {
                    Debug.Assert(depthImage.Height == depthHeight && depthImage.Width == depthWidth);
                };

                sensor.ColorFrameReady += (s, e) =>
                {
                    // don't do anything if we don't yet have a depth image
                    DepthImageFrame colorImage = depthImage;
                    if (colorImage.BytesPerPixel == null) return;

                    byte[] color = new byte[sensor.ColorStream.FramePixelDataLength];
                    e.OpenColorImageFrame().CopyPixelDataTo(color);

                    byte[] output = new byte[depthWidth * depthHeight * 4];

                    // loop over each pixel in the depth image
                    int outputIndex = 0;
                    for (int depthY = 0, depthIndex = 0; depthY < depthHeight; depthY++)
                    {
                        for (int depthX = 0; depthX < depthWidth; depthX++, depthIndex += 2)
                        {
                            short[] bits = new short[colorImage.BytesPerPixel];
                            depthImage.CopyPixelDataTo(bits);
                            // combine the 2 bytes of depth data representing this pixel
                            short depthValue = (short)(bits[depthIndex] | (bits[depthIndex + 1] << 8));

                            // extract the id of a tracked player from the first bit of depth data for this pixel
                            int player = bits[depthIndex] & 7;

                            // find a pixel in the color image which matches this coordinate from the depth image
                            int colorX, colorY;
                            ColorImagePoint colorPoint = depthImage.MapToColorImagePoint(depthImage.Width, depthImage.Height, sensor.ColorStream.Format);

                            // ensure that the calculated color location is within the bounds of the image
                            colorX = colorPoint.X;
                            colorY = colorPoint.Y;

                            output[outputIndex++] = color[(4 * (colorX + (colorY * e.OpenColorImageFrame().Width))) + 0];
                            output[outputIndex++] = color[(4 * (colorX + (colorY * e.OpenColorImageFrame().Width))) + 1];
                            output[outputIndex++] = color[(4 * (colorX + (colorY * e.OpenColorImageFrame().Width))) + 2];
                            output[outputIndex++] = player > 0 ? (byte)255 : (byte)0;
                        }
                    }
                    target.WritePixels(depthRect, output, depthWidth * PixelFormats.Bgra32.BitsPerPixel / 8, 0);
                };
                return target;
            }
        }
    } 
```

我在[https://stackoverflow.com/questions/10599658/how-to-create-kinect-avatar/10600919#10600919](https://stackoverflow.com/questions/10599658/how-to-create-kinect-avatar/10600919#10600919)的回答解释了如何创建角色。祝你好运！希望这可以帮助！

# iphone - 调用 actionSheet clickedButtonAtIndex 使崩溃

> ID：10611987
> 
> 赞同：0
> 
> 时间：2012-05-16T04:27:28.637
> 
> 标签：iphone, ios

我想将操作表放入重用类，但是当我单击操作表时，应用程序崩溃并且错误是 EXC_BAD_ACCESS。

MOTestAction.h

```
#import <Foundation/Foundation.h>

@interface MOTestAction : NSObject<UIActionSheetDelegate>
{
    UIActionSheet * actionSheet;
}
- (id) initWithAction;
- (void) showInView:(UIView *) view;
@end 
```

MOTestAction.m #import "MOTestAction.h"

```
@implementation MOTestAction

- (id) initWithAction
{
    self = [super init];

    if (self) {
        actionSheet = [[UIActionSheet alloc]initWithTitle:nil delegate:self cancelButtonTitle:@"Cancle" destructiveButtonTitle:nil otherButtonTitles:nil, nil];

        }
        return self;
    }

- (void) showInView:(UIView *) view
{
    [actionSheet showInView:view];

}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex;
{

}

@end 
```

呼叫者，召集者：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically 
    MOTestAction * moActionSheet = [[MOTestAction alloc]initWithAction];
    [moActionSheet showInView:self.navigationController.toolbar];

} 
```

# ios - 使用静态库进行单元测试

> ID：10611988
> 
> 赞同：7
> 
> 时间：2012-05-16T04:27:32.243
> 
> 标签：ios, xcode, ocunit

我有一个带有用户界面项目 (UI) 和核心逻辑项目 (Core) 的 XCode 工作区。我想在 UI 项目中进行 OCUnit 单元测试，所以我添加了一个新的测试目标，就像通常所做的那样。

我能够很好地运行测试，直到我为主 UI 目标中的类输入导入语句，这反过来又引用了 Core 项目。

我得到的错误是“找不到词汇或预处理器问题'xxx.h'文件”。当我直接构建主 UI 目标时，我没有收到此消息。

就好像主 UI 目标在构建时知道 Core，但是当它从测试目标中引用时，它似乎对 Core 一无所知。

我采取了使用“Link Binaries with Libraries”添加对核心项目的引用的步骤列表中的项目保持红色。线索？也许吧，但链接列表中的红色引用并没有阻止 UI 目标构建和使用核心类。我还使主要目标成为测试目标的依赖项。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-31T19:15:18.347

确保查看 Apple 示例代码“单元测试”： [https ://developer.apple.com/library/ios/#samplecode/UnitTests/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011742](https://developer.apple.com/library/ios/#samplecode/UnitTests/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011742)

确保您的库项目在您的 OCUnit 测试目标的构建阶段设置为依赖项，并且它作为库链接。

在 Xcode 中打开您的项目。在文件菜单中，转到项目设置...（或工作空间设置...，如果您使用的是工作空间）。单击 Advanced... 并确保选中 Unique。清洁和重建。

检查您的 BUILD_PRODUCTS_DIR 以查看您的库的标题是否显示在那里。如果没有，首先检查库目标中的构建阶段，以确保您需要的标头位于 Public 部分（Project 部分也可以工作，但请尝试 Public 看看是否能解决您的问题）。

这涵盖了人们在您的情况下似乎遇到的最常见问题。如有疑问，请对照您的检查 UnitTests 示例中的目标设置。祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-08T21:38:24.420

除了 Jon Reid 的回答之外，我还必须执行以下操作：在您的测试目标中，转到 Build Settings。将“始终搜索用户路径”设置为“是”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T18:23:16.050

在您的测试目标中，转到构建设置。将静态库标题的路径添加到标题搜索路径。

# android - KSOAP 错误异常

> ID：10611989
> 
> 赞同：0
> 
> 时间：2012-05-16T04:27:37.190
> 
> 标签：android, ksoap2

我在我的应用程序中使用 SOAP 服务。我收到错误消息

```
 SoapFault - faultcode: 'soap:Client' faultstring: 'System.Web.Services.Protocols.SoapException: Server was unable to read request. ---> System.InvalidOperationException: There is an error in XML document (1, 301). ---> System.InvalidOperationException: The specified type was not recognized: name='authentication', 
```

我的 SOAP 请求结构是：

```
 <authentication>
    <LoginID>string</LoginID>
    <Password>string</Password>
  </authentication>
  <Id>int</Id>
  <Str>string</Str> 
```

我的代码是：

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

                PropertyInfo usrid =new PropertyInfo();
            usrid.setName("LoginID");
            usrid.setValue(userid);
            usrid.setType(String.class);
            request.addProperty(usrid);        

//          
            PropertyInfo pass =new PropertyInfo();
            pass.setName("Password");
            pass.setValue(password);
            pass.setType(String.class);
            request.addProperty(pass);

                PropertyInfo rote =new PropertyInfo();
            rote.setName("Id");
            rote.setValue(4114616);
            rote.setType(int.class);
            request.addProperty(rote);
//          
            PropertyInfo dte =new PropertyInfo();
            dte.setName("Str");
            dte.setValue(date);
            dte.setType(String.class);
            request.addProperty(dte);

 androidHttpTransport.call(SOAP_ACTION,envelope);              
//              SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
                System.out.println("subbu");
                Object response=(Object)envelope.getResponse();---->I think i am getting error here. 
```

任何人都可以帮助我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:40:44.543

查看以下链接：

*   [http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks](http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks)
*   [http://seesharpgears.blogspot.com/2010/10/ksoap-android-web-service-tutorial-with.html](http://seesharpgears.blogspot.com/2010/10/ksoap-android-web-service-tutorial-with.html)

`authentication`是一个复杂的对象，但您已经连续添加了所有属性。尝试这样的事情：

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

SoapObject authenticate = new SoapObject(NAMESPACE, "authenticate");
authenticate.addProperty("LoginID", "login");
authenticate.addProperty("Password", "password");

request.addSoapObject(authenticate);
request.addProperty("Id", "123");
request.addProperty("Str", "string"); 
```

# winforms - 如何从不同的表单（不是主表单）将数据添加到 datagridview

> ID：10611992
> 
> 赞同：0
> 
> 时间：2012-05-16T04:28:02.400
> 
> 标签：winforms, datagridview

我有一个程序，界面是这样的..

从 ms sql 加载 datagridview 中的数据

![在此处输入图像描述](../Images/3a6822f545873dc717c3fc8303a83ac1.png)

并添加数据使用此表格

![在此处输入图像描述](../Images/9639985dd2a20d5299b3c31fcbbbdca9.png)

但我无法将数据添加到主窗体中的datagridview，所以我必须做些什么才能使数据可以从Form2输入......

之前感谢您的回答..我希望有人可以帮助我的问题

# sql - 我需要一个允许我将描述列拆分为 4 列的 sql 语句

> ID：10611993
> 
> 赞同：0
> 
> 时间：2012-05-16T04:28:05.033
> 
> 标签：sql

我需要一个允许我将描述列拆分为 4 列的 SQL 语句

描述包含以下内容，分隔符为“=”

```
Mary=123=456=payment 
```

这需要分成以下几部分：

```
Claimant   Voucher _no   Rec_NO   descr  
Mary       123           456      payment 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T05:59:02.743

许多 RDBMS 以原生方式或通过扩展为您提供正则表达式函数。由于我来自 PostgresSQL 世界并且您没有指定您正在使用的 RDBMS，那么我将举例说明如何在 PostgreSQL 中执行此操作。

您可以为此目的使用[regexp_split_to_table()函数：](http://www.postgresql.org/docs/current/interactive/functions-string.html#FUNCTIONS-STRING-OTHER)

```
SELECT entry
  FROM regexp_split_to_table('Mary=123=456=payment', '=') AS t(entry); 
```

您可以检查[SQL Fiddle](http://www.sqlfiddle.com/#!1/d41d8/204)上的输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-16T05:37:38.700

SQL 语言不用于计算目的。使用更高级别（编程语言，ORM）以获得更快的速度。您的 RDBMS 应该支持子查询、字符串函数（[SUBSTRING](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_substr)、[LOCATE](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_locate)）。MySQL中的以下代码

[http://www.sqlfiddle.com/#!2/ec808/26](http://www.sqlfiddle.com/#!2/ec808/26)

```
CREATE TABLE Table1(
data varchar(2000)
)

INSERT INTO Table1(data) values('Mary=123=456=payment');
INSERT INTO Table1(data) values('Mary232=123=456=payment');
SELECT SUBSTRING(data, 1,pos1-1) as Claimant       ,
SUBSTRING(data, pos1+1,pos2-pos1-1) as Voucher_no,
SUBSTRING(data, pos2+1,pos3-pos2-1) as Rec_NO,
SUBSTRING(data, pos3+1) as descr FROM (
 SELECT 

data,
LOCATE('=',`data`) as pos1,
LOCATE('=',`data`,LOCATE('=',`data`)+1) as pos2,
LOCATE('=',`data`,LOCATE('=',`data`,LOCATE('=',`data`)+1)+1) as pos3
FROM table1) as subq; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T05:59:16.927

在 Oracle 上，您必须使用

```
select substr(description, 1, instr(description, '=') - 1) part1,
   substr(description, instr(description, '=') + 1,
                       instr(description, '=', 1, 2) - instr(description, '=') - 1) part2,
   substr(description, instr(description, '=', 1, 2) + 1,
                       instr(description, '=', 1, 3) - instr(description, '=', 1, 2) - 1) part3,
   substr(description, instr(description, '=', 1, 3) + 1) part4
from your_table; 
```

MySQL 有类似的结构。

# php - 在包含到另一个页面的文件中添加 Expires Header

> ID：10611996
> 
> 赞同：1
> 
> 时间：2012-05-16T04:28:19.847
> 
> 标签：php, caching, header

我有 2 两个 php 页面。一个是主要页面，包含第二个页面，我想向其中添加过期标头，但出现以下错误

```
 Warning: Cannot modify header information -
 headers already sent by (output started at.. 
```

在第一个

```
ob_start('ob_gzhandler', 6);

/// lots of html here

include("pageTwo.php");

/// lots of html here

ob_end_flush(); 
```

在第二页

```
ob_start();
header('Expires: '.gmdate('D, d M Y H:i:s \G\M\T', time() + 3600));

/// lots of html here

ob_end_flush(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-16T04:37:57.003

不要使用模式并在应用压缩之前`6`尝试*裸露。*

```
<?php
ob_start();

// include ...

ob_end_flush();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T04:36:14.067

您需要在您的 php 页面生成任何输出之前发送标头。

这将**不起作用**：

```
<?php 
     print 'test';
     header( 'Expires: .... ' );
?> 
```

这将起作用：

```
<?php
     header( 'Expires: .... ' );
     print 'test';
?> 
```

所以基本上你需要改变哪个页面发送标题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T04:41:08.823

您不能在标题之前放置任何回显字符串的内容，因为标题应该首先出现，而不是作为常规文本。您可以添加常规元标记。并通过 php 示例设置过期时间

```
 <meta http-equiv="expires" content="<?php echo date(whatever type); ?>" /> 
```