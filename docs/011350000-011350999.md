# StackOverflow 问答 11350000-11350999

# matrix - 使用 Direct2D 将角映射到任意位置

> ID：11350000
> 
> 赞同：3
> 
> 时间：2012-07-05T18:04:06.667
> 
> 标签：matrix, directx, direct2d, sharpdx, srt

我正在使用 WIC 和 Direct2D（通过 SharpDX）将照片合成为视频帧。对于每一帧，我都有找到每个角的确切坐标。虽然照片本身是标准纵横比（例如 4:3 或 16:9），但插入点不是——它们可以旋转、缩放和倾斜。

![在此处输入图像描述](../Images/df17d55548f94cf1d76700d02335d63d.png)

现在我知道在 Direct2D 中我可以应用矩阵变换来完成此操作……但我不确定如何。我看到的例子更多是关于应用特定的转换（例如旋转 30 度），而不是试图匹配一个确切的目的地。

鉴于我知道上面的确切坐标（A、B、C、D），有没有一种简单的方法可以将源图像映射到目标上？或者，在给定源坐标和目标坐标的情况下，我将如何生成矩阵？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:42:59.440

如果 Direct3D 是一个选项，您需要做的就是将四边形渲染为两个三角形（将青蛙纹理映射到其上）。

为确保没有伪影，请将四边形渲染为索引网格，就像[此处](https://github.com/ananthonline/graffiti/blob/master/Graffiti.Core/Primitives/Quad.cs)的示例一样（请注意，它在两个三角形中共享顶点 0 和顶点 2）。当然，您可以将实际的顶点坐标替换为 A、B、C 和 D。

首先，您可以查看有关 SlimDX 的[这些教程，这是一组出色的 DirectX .NET 绑定。](http://slimdx.org/tutorials.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T12:22:47.697

用 Direct2D 实现这一点实际上是不可能的。使用带有自定义顶点着色器的 Direct2D1.1（来自 Win8 Metro）可能会实现这一点，但最终，正如 ananthonline 所建议的那样，使用 Direct3D11 会更容易做到这一点。

您还可以使用更易于设置的三角形条带图元（您不需要创建索引缓冲区）。对于坐标，您可以直接将坐标发送到顶点着色器而无需任何变换（顶点着色器会将输入 SV_POSITION 直接复制到像素着色器）。您只需将坐标映射到 x [-1,1] 和 y[-1,1]。我建议您从 SharpDX MiniCubeTexture 示例开始，更改矩阵以执行正交投影（而不是示例透视）。

# c++ - 在多个线程中覆盖方法

> ID：11350004
> 
> 赞同：4
> 
> 时间：2012-07-05T18:04:22.187
> 
> 标签：c++, multithreading

我已经实现了自己的内存管理器，并像这样覆盖了 new 和 delete 运算符：

```
/** Override the Standard C++ new operator */
void* operator new (size_t size);
/** Override the Standard C++ delete operator */
void operator delete (void *p); 
```

这工作正常，但现在我正在一个具有大量堆分配的多线程环境中开发。为了避免堆争用，我希望每个线程都有自己的内存管理器实例。如何使运算符覆盖指向该线程的内存管理器实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-16T22:07:04.060

线程本地存储可以工作。

# java - 如何在 JSP 中的 LinkedHashMap 中执行 foreach 循环？

> ID：11350007
> 
> 赞同：1
> 
> 时间：2012-07-05T18:04:25.183
> 
> 标签：java, jsp, foreach, linkedhashmap

我对jsp没有太多经验。在java中我可以，但是打开一个块不好 <% %>

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T18:08:25.490

您可以使用 JSTL foreach 来迭代 HashMap。

```
<c:forEach var="type" items="${yourMap}">
   Key is ${type.key}
   Value is ${type.value}
</c:forEach> 
```

注意：如果您使用的是 Tomcat，则需要将 JSTL 库显式复制到类路径。我知道的其他服务器默认带有 JSTL。

# c#-4.0 - 如何从文件路径中获取 .exe 文件版本号

> ID：11350008
> 
> 赞同：85
> 
> 时间：2012-07-05T18:04:35.147
> 
> 标签：c#-4.0, version, fileversioninfo

我正在使用带有 C# 代码的 .Net 3.5/4.0。

我试图在我的 C: 驱动器上获取 exe 文件的版本号。

例如路径是：c:\Program\demo.exe。如果demo.exe的版本号是1.0。

如何使用此路径获取版本号？

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-07-05T18:07:17.287

您可以使用[FileVersionInfo.FileVersion](http://msdn.microsoft.com/en-us/library/system.diagnostics.fileversioninfo.fileversion.aspx)从路径中获取它。

```
var versionInfo = FileVersionInfo.GetVersionInfo(pathToExe);
string version = versionInfo.FileVersion; // Will typically return "1.0.0.0" in your case 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2014-04-27T15:18:36.437

2018 年更新和现代化（例如 C#6 的字符串插值）：

接受的答案部分不正确（ProductVersion 通常不返回三部分版本）并且有点误导：

这是一个更完整的答案。为了让正文不太长，我把它分成了一个简短的（呃）摘要，这对很多人来说可能“足够”了。您没有义务阅读详细的第二部分，所以请不要 tl;dr :-)

**简短的摘要：**

1.  每个文件都有不同的版本（汇编版本、文件版本、产品版本），但通常你会让**它们都等于**在文件级别上没有得到“版本地狱”（它会来得足够早）。

2.  文件版本（在资源管理器中可见并在设置/安装中使用）是我认为最重要的问题。

3.  为此，只需在**AssemblyInfo.cs**文件中注释掉 fileversion，如下所示。这确保了一个文件的三个可能的不同版本是相同的！

    **[程序集：AssemblyVersion("1.1.2\. *")]
    //[程序集：AssemblyFileVersion("1.1.2.* ")]**

4.  例如，对于语义版本控制，您只想从可能的 4 中获得 3 个版本部分：

对每个 Visual Studio 构建进行自动构建计数很有用。但是这种构建计数对于告诉您的内部或外部客户并不总是有用的。因此，为了向 Windows 提及文件版本，在标题对话框中，我建议只显示三个部分 v1.2.3（当然还有语义版本控制）：

```
using System.Diagnostics;
...

var versInfo= FileVersionInfo.GetVersionInfo(pathToVersionedFile); 
string fileVersionFull = versInfo.FileVersion; // No difference here for versinfo.ProductVersion if recommendation in AssemblyInfo.cs is followed
string fileVersionSemantic = $"V{versInfo.FileMajorPart}.{versInfo.FileMinorPart}.{versInfo.FileBuildPart}";
string fileVersionFull2 =    $"V{versInfo.FileMajorPart}.{versInfo.FileMinorPart}.{versInfo.FileBuildPart}.{versInfo.FilePrivatePart}"; 
```

*FileVersionFull2*只是展示了如何处理所有 4 个部分，除了它包含与*FileVersionFull*相同的“V” 。

**细节：**

首先是关于如何获取和设置三个版本的备忘单：

*文件版本：* [程序集：AssemblyFileVersion(..)] => System.Diagnostics.FileVersionInfo.FileVersion

*产品版本：* [程序集：AssemblyInformationalVersion(..)] => System.Diagnostics.FileVersionInfo.ProductVersion

*程序集版本：* [程序集：AssemblyVersion(..)] => System.Reflection.Assembly.Version

尤其是违约可能会令人困惑。推荐 SO 链接以了解详细信息：[FileVersionInfo 和 AssemblyInfo](https://stackoverflow.com/questions/4466019/fileversioninfo-and-assemblyinfo)

**EntryAssembly 与 ExecutingAssembly**
为了充分考虑获取正在运行的应用程序版本的每种情况，请在其他地方搜索更多详细信息，例如： [获取程序集位置、GetAssembly().Location 或 GetExecutingAssembly().Location 哪个](https://stackoverflow.com/questions/27059748/which-is-better-for-getting-assembly-location-getassembly-location-or-getexe)
更好如果应该使用 EntryAssembly 或 ExecutingAssembly，会造成混淆。它们都有优点和警告。如果您的以下代码与 .exe 不在同一个程序集中，例如在辅助程序集中，事情会变得更加复杂。通常你会使用 EntryAssembly 来获取 .exe 的版本。
但是：对于 Visual Studio 中的单元测试来测试并行 .exe 项目中的例程，GetEntryAssembly() 不起作用（我的环境：NUnit，VS2017）。但是 GetExecutingAssembly() 至少不会崩溃，只有在单元测试期间，您才能获得测试项目的汇编版本。对我来说已经足够好了。可能有些情况并不那么简单。
如果需要，您可以将声明省略为静态，从而真正有可能在一个程序中获取多个不同程序集的版本。

```
public static class AppInfo
{
  public static string FullAssemblyName { get; }
  ..

  static AppInfo()
  {
      Assembly thisAssembly = null;
      try
      {
          thisAssembly = Assembly.GetEntryAssembly();
      }
      finally
      {
          if (thisAssembly is null)
              thisAssembly = Assembly.GetExecutingAssembly();
      }
      FullAssemblyName = thisAssembly.Location;
      var versInfo = FileVersionInfo.GetVersionInfo(FullAssemblyName);
      ..
  }
} 
```

**产品版本与文件版本：文件**
的产品版本也显示在 Windows 资源管理器中。我建议在最“客户可见”的文件（主要是应用程序的主要 .exe）中最大限度地区分 ProductVersion 和 FileVersion。但它当然可以选择区分“主”应用程序的每个文件，并让它们都拥有客户看到的所有“营销”ProductVersion。但经验表明，过多地尝试同步技术版本和营销版本既没必要也不便宜。混乱并没有真正减少，成本增加了。所以这里第一部分描述的解决方案应该主要是这样做的。

**历史：程序集版本与文件版本：** 具有不同版本的一个原因也是一个 .NET 程序集最初可以由多个文件（模块）组成 - 理论上。这不被 Visual Studio 使用，也很少在其他地方使用。这可能是提供区分这两个版本的可能性的一个历史原因。从技术上讲，程序集版本与 .NET 相关版本相关，如 GAC 和并行版本，文件版本与经典设置更相关，例如在更新期间覆盖或共享文件。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2014-06-11T16:04:53.340

在接受的答案中，引用了“pathToExe”。

可以按如下方式检索和使用此路径：

```
var assembly = Assembly.GetExecutingAssembly();
var fvi = FileVersionInfo.GetVersionInfo(assembly.Location);
var version = fvi.FileVersion; // or fvi.ProductVersion 
```

希望这可以避免有人做一些不必要的额外步骤。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-07-17T13:52:07.483

`Program`你的班级名称在哪里：

```
Console.WriteLine("Version = " + typeof(Program).Assembly.GetName().Version.ToString()) ; 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-07-05T18:08:52.217

我不确定这是否是您正在寻找的，但是：

[http://www.daniweb.com/software-development/csharp/threads/276174/c-code-to-get-dll-version](http://www.daniweb.com/software-development/csharp/threads/276174/c-code-to-get-dll-version)

它说，

```
// Get the file version info for the notepad.
FileVersionInfo myFileVersionInfo =  FileVersionInfo.GetVersionInfo(Environment.SystemDirectory + "\\notepad.exe");

// Print the file name and version number.
Console.WriteLine("File: " + myFileVersionInfo.FileDescription + '\n' + "Version number: " + myFileVersionInfo.FileVersion); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-14T01:24:26.737

使用这个，它的工作原理：

```
using System.Reflection;

string v = AssemblyName.GetAssemblyName("Path/filename.exe").Version.ToString(); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-06-15T22:53:06.820

这很好用并返回 AssemblyVersion 中提供的版本：

```
using System.Reflection;

infoFileVersionInfo versInfo = FileVersionInfo.GetVersionInfo("path.exe");
string version = $"v{versInfo.FileMajorPart}.{versInfo.FileMinorPart}.{versInfo.FileBuildPart}"; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-03-20T03:35:48.697

*   解决方案 1

    ```
    Dim fileVer As FileVersionInfo = FileVersionInfo.GetVersionInfo(Environment.CurrentDirectory + "\yourExe.exe")
    yourLabel.Text = fileVer.FileVersion 
    ```

*   解决方案 2

    获取文件版本号

    ```
    yourLabel.Text = Application.ProductVersion 
    ```

两种解决方案都会给出 1.0.0.0

# android - 在 Android 中打开链接时出现编码错误

> ID：11350015
> 
> 赞同：1
> 
> 时间：2012-07-05T18:05:34.680
> 
> 标签：android, android-layout

我正在使用以下代码在 android text.setText("http://www.youtube.com/watch?v=Ii2FHbtVJzc"); android:autoLink="web" android:linksClickable="true"

我无法打开链接，因为上面的链接在浏览器中打开为[http://www.youtube.com/E2%80%bwatch?v=Ii2FHbtVJzc](http://www.youtube.com/E2%80%bwatch?v=Ii2FHbtVJzc)

%80% 是多余的字符。

# string - 在 Perl 中获得浮点数的精度？

> ID：11350017
> 
> 赞同：2
> 
> 时间：2012-07-05T18:05:43.570
> 
> 标签：string, perl, floating-point, decimal

假设我有一个 Perl 变量：

`my $string = "40.23";`

`my $convert_to_num = $string * 1;`

有没有办法可以找到这个浮点值的精度？到目前为止，我的解决方案是简单地遍历字符串，找到“。”的第一个实例，然后开始计算小数位数，在这种情况下返回 2。我只是想知道这种事情是否有更优雅或内置的功能。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T20:07:43.627

这是 $nstring 中“期间后的事物数量”的答案

```
length(($nstring =~ /\.(.*)/)[0]); 
```

匹配部分首先找到 。(\.)，然后匹配其他所有内容 (.*)。由于 .* 在括号中，因此它作为第一个数组元素 ([0]) 返回。然后我用 length() 函数计算有多少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:33:54.103

您在 Perl 中使用普通变量所做的任何事情都将取决于您使用的编译器和硬件。如果您真的关心精度，请使用

```
use "Math::BigFloat"; 
```

并设置所需的属性。位数在 Math::BigFloat 中更恰当地称为准确度。

```
use Math::BigFloat;

Math::BigFloat->accuracy(12);
$n = new Math::BigFloat "52.12";

print "Accuracy of $n is ", $n->accuracy(), " length ",scalar($n->length()),"\n"; 
```

将返回

```
52.1200000000 的精度为 12 长度 4

```

# windows - 带有 Windows 的 Django：双反斜杠还是前斜杠？

> ID：11350019
> 
> 赞同：3
> 
> 时间：2012-07-05T18:05:51.517
> 
> 标签：windows, django, syntax

所以，我是一个初学者，现在正在尝试使用 Eclipse pydev 中的“Practical Django Projects”和 windows 来学习 django。

无论如何，主要问题是我使用 Windows，它似乎建议我应该在 settings.py 的评论中使用前斜杠。但默认情况下，数据库已设置为：

```
'NAME': 'C:\\Users\\dtc\\Documents\\Eclipse\\cms\\sqlite.db' 
```

当我浏览这本书时，它要我添加以下内容：

```
url(r'^tiny_mce/(?P<path>.*)$', 'django.views.static.serve',
             { 'document_root': '/path/to/tiny_mce/' }), 
```

但是在我改为双反斜杠 \\path\\to\\... 之前，该路径不起作用，所以我想我不应该担心使用双反斜杠。

如果有人能给我一些关于这方面的见解，那就太好了，因为它让我在尝试学习 django 时感到头疼。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:14:26.150

使用 python 获取当前目录并使用您需要添加的任何内容调用它的连接。这将使它跨平台，因为 python 会为你转换反斜杠和正斜杠。

```
import os    
CURRENT_DIR = os.path.dirname(__file__)

TEMPLATE_DIRS = (
    os.path.join(CURRENT_DIR, 'templates')
) 
```

这样可以节省您的打字时间，并且路径将是正确的。如果您查看 django 生成的 settings.py，它会告诉您即使在 Windows 上也始终使用 /。

```
# Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
# Always use forward slashes, even on Windows.
# Don't forget to use absolute paths, not relative paths. 
```

最后一件事，你的网址应该使用正斜杠，因为这就是 django 将如何使用它们。

希望有帮助

# java - 如何改进我的词汇表模型？

> ID：11350020
> 
> 赞同：1
> 
> 时间：2012-07-05T18:05:56.960
> 
> 标签：java

我正在用 Java编写一个小型**词汇查看器。**你可以

*   将词汇添加到语言
*   在语言之间切换
*   查看每种语言的概述（有很多词汇）
*   详细看词汇

有趣的是，如果在多种语言中添加了一个词汇表，我想显示**所有语言**的翻译（我知道这会导致语言学方面的错误连接，但这只是为了训练我的 Java 技能）。

目前我有以下课程：

*   `VocabularyList (Observable)`，对于许多人来说，这只是一个列表实现，`<Vocabulary>`带有用于按语言等检索的附加方法。我的所有概述页面都观察到这个列表，当这个列表中的某些内容发生变化时，它会刷新视图。
*   `Vocabulary`它用于保存所有**语言的**`HashMap<Language, ArrayList<String>> meanings`所有含义（例如，我可以说德语中的*helfen与英语中的**help*或*aid*的含义相同）。
******   `Language`这只是一个表示语言的类（通过 ISO 代码和名称）*****

 *****目前，我还将所有内容都存储在**同一个序列化文件**中。我想要序列化而不是数据库来让整个事情变得简单。

但是，我感觉这个模型是完全错误的，因为：

*   我无法分别访问每种语言的词汇表（即使我的程序中有语言的选择字段），所以每次用户观看概览页面时我都必须遍历整个列表
*   即使有人只观看概述（而不是包含所有语言翻译的详细信息页面），我也总是承担所有语言的开销

但是，如果我想保持所有不同词汇语言之间的关系，我真的不知道应该如何更好地实现它。

下一个想法是：

*   **为每种**语言创建一个词汇表

但是那样整个关系的事情就会很困难。*例如，如果我从俄语列表中*删除了一个词汇表，我将不得不从所有其他语言列表中删除指向它的所有链接。

你会建议什么模型设计？我完全同意还是它已经以某种方式正确？作为 Web 开发人员，我一直只使用数据库（主要是关系数据库），在这种情况下，我只需要删除多对多关系表中的条目。但是在处理对象时，一切似乎都不同了。*****

# c# - 用任务替换无限线程循环（消息泵）

> ID：11350026
> 
> 赞同：3
> 
> 时间：2012-07-05T18:06:11.403
> 
> 标签：c#, asynchronous, task-parallel-library, producer-consumer

在我的应用程序中，我必须监听多个不同的队列并反序列化/调度在队列中收到的传入消息。

实际上，为了实现这一点，我正在做的是每个 QueueConnector 对象在构造时创建一个新线程，该线程执行一个无限循环，并阻塞调用 queue.Receive() 以接收队列中的下一条消息，如下面的代码所示：

```
// Instantiate message pump thread
msmqPumpThread = new Thread(() => while (true)
{
   // Blocking call (infinite timeout)
   // Wait for a new message to come in queue and get it
   var message = queue.Receive();

   // Deserialize/Dispatch message
   DeserializeAndDispatchMessage(message);
}).Start(); 
```

我想知道是否可以使用 Task(s) 替换此“消息泵”，而不是通过新线程上的无限循环。

我已经为消息接收部分做了一个任务（见下文），但我真的不知道如何将它用于消息泵（我可以一遍又一遍地回忆完成相同的任务，继续，替换无限循环如上面代码中的单独线程？）

```
Task<Message> GetMessageFromQueueAsync()
{
    var tcs = new TaskCompletionSource<Message>();

    ReceiveCompletedEventHandler receiveCompletedHandler = null;

    receiveCompletedHandler = (s, e) =>
    {
       queue.ReceiveCompleted -= receiveCompletedHandler;
       tcs.SetResult(e.Message);
    };

    queue.BeginReceive();

    return tcs.Task;
} 
```

在这种情况下，通过在单独的线程（使用阻塞调用 => 阻塞线程）中使用任务而不是无限循环，我会获得什么吗？如果是的话，如何正确地做到这一点？

请注意，此应用程序没有很多 QueueConnector 对象，也没有（可能最多 10 个连接器），这意味着通过第一个解决方案最多有 10 个线程，因此内存占用/性能启动线程在这里不是问题。我宁愿考虑调度性能/ CPU 使用率。会有什么不同吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:12:42.113

当线程数较少时，异步代码通常会有更多的开销和更少的吞吐量。当线程数量非常多时，非阻塞代码最有用，这会导致 a) 由于堆栈而浪费大量内存和 b) 上下文切换。由于更多的分配、更多的间接性和更多的用户内核转换，它具有显着的开销。

对于低线程数（< 100），您可能不必担心。尝试专注于编写可维护、抗错误和简单的代码。使用线程。

# css - 如何制作以中间为中心的可调整大小的菜单？

> ID：11350032
> 
> 赞同：0
> 
> 时间：2012-07-05T18:06:41.720
> 
> 标签：css, css-float, positioning

请帮忙！！！

CSS：

```
body
{
 margin: 0px;
 padding: 0px;
}

body #header {

     width:100%;
     clear:both;
     height:90px;
     /*overflow:hidden*/;
     box-shadow: 1px 0px 10px 2px #000;
     } 

body #header #h_l {
   width: 30%;
  height: 90px;
background-image: linear-gradient(top, #e1e1e1 40%, #9d9d9d 99%);
background-image: -o-linear-gradient(top, #e1e1e1 40%, #9d9d9d 99%);
background-image: -moz-linear-gradient(top, #e1e1e1 40%, #9d9d9d 99%);
background-image: -webkit-linear-gradient(top, #e1e1e1 40%, #9d9d9d 99%);
background-image: -ms-linear-gradient(top, #e1e1e1 40%, #9d9d9d 99%);

background-image: -webkit-gradient(linear, left top, left bottom, color-stop(40%, #e1e1e1), color-stop(99%, #9d9d9d)); /* Safari 4+, Chrome 2+ */  

 filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#e1e1e1', endColorstr='#9d9d9d'); /* IE6 & IE7 */  
   -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr='#e1e1e1', endColorstr='#9d9d9d')"; /* IE8+ */  

background-image: -webkit-gradient(
    linear,
    left top,
    left bottom,
    color-stop(0.40, #e1e1e1),
    color-stop(0.99, #9d9d9d)
);
 float:left;
}

body #header #h_l #logo {

    float: right;
  /*-ms-interpolation-mode:bicubic; */
    max-width: 100%;
    width: auto\9; /* ie8 */ 
}

body #header #h_r {
   width: 70%;
  height: 90px;
background: #747474;

  float: right;
}

body #header #h_r #menu {

    position: relative;
    left: -50px;
    float:left;
  /*-ms-interpolation-mode:bicubic; */
    max-width: 100%;
    width: auto\9; /* ie8 */ 
  } 
```

HTML：

```
<body >

    <div id="header">

    <div id="h_l">

        <img id="logo"  title="logo" alt="logo" src="{HTTP}{WEBSITE}/images/newlook/MM/logo_plus100px_right.png" >
    </div>
    <div id="h_r">
        <span ><img id="menu" title="" alt="" src="{HTTP}{WEBSITE}/images/newlook/MM/Home_but.png" ></span><span ><img id="menu" title="" alt="" src="{HTTP}{WEBSITE}/images/newlook/MM/Divider_1.png" ></span><span ><img id="menu" title="" alt="" src="{HTTP}{WEBSITE}/images/newlook/MM/Solutions_but.png" ></span><span ><img id="menu" title="" alt="" src="{HTTP}{WEBSITE}/images/newlook/MM/Divider_1.png" ></span><span ><img id="menu" title="" alt="" src="{HTTP}{WEBSITE}/images/newlook/MM/Support_but.png" ></span><span ><img id="menu" title="" alt="" src="{HTTP}{WEBSITE}/images/newlook/MM/Divider_1.png" ></span><span ><img id="menu" title="" alt="" src="{HTTP}{WEBSITE}/images/newlook/MM/Company_but.png" ></span><span ><img id="menu" title="" alt="" src="{HTTP}{WEBSITE}/images/newlook/MM/Divider_1.png" ></span><span ><img id="menu" title="" alt="" src="{HTTP}{WEBSITE}/images/newlook/MM/Contact_but.png" ></span><span ><img id="menu" title="" alt="" src="{HTTP}{WEBSITE}/images/newlook/MM/Divider_1.png" ></span><span ><img id="menu" title="" alt="" src="{HTTP}{WEBSITE}/images/newlook/MM/Blog_but.png" ></span><span ><img id="menu" title="" alt="" src="{HTTP}{WEBSITE}/images/newlook/MM/Divider_1.png" ></span><span ><img id="menu" title="" alt="" src="{HTTP}{WEBSITE}/images/newlook/MM/Reseller_but.png" ></span><span ><img id="menu" title="" alt="" src="{HTTP}{WEBSITE}/images/newlook/MM/Divider_1.png" ></span><span ><img id="menu" title="" alt="" src="{HTTP}{WEBSITE}/images/newlook/MM/Apps_but.png" ></span>
    </div>

    </div>
</body> 
```

为什么右侧菜单中的元素在浏览器窗口调整大小时不断在新的一行中进行？我怎样才能让它停止这样做并让它像左边的图像一样调整大小，在浏览器窗口调整大小时（好像整个菜单都是一个完整的块）？它可以用 CSS 完成还是我需要制作一个 javascript？感谢任何回答的人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:24:30.197

如果没有实际图像，很难理解您在此处尝试实现的目标。我在这里转载了你的案例：

[http://jsfiddle.net/gVQ8x/1/](http://jsfiddle.net/gVQ8x/1/)

我刚刚在这里设置了百分比宽度（这`-ms-interpolation-mode`部分是做什么用的？）：

```
body #header #h_r #menu {
    position: relative;
    left: -50px;
    float:left;
  /*-ms-interpolation-mode:bicubic; */
    max-width: 100%;
    width: 6%; /* was auto\9 */
} 
```

我强烈建议您不要使用 IE hack。改用条件类：http: [//paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)

另一个可能在未来引起问题的重要问题是您的文档中有多个共享相同 id 的元素，即前面提到的`body #header #h_r #menu`. 如果您希望 javascript DOM 操作正常且可预测地工作，则 id 必须是唯一的。

# windows - 如何使用 perl 隐藏击键并将其发送到命令提示符窗口？

> ID：11350034
> 
> 赞同：0
> 
> 时间：2012-07-05T18:06:48.600
> 
> 标签：windows, perl, background

我已经使用 Win32::GUItest 编写了一个 perl 脚本来将击键发送到 windows 中的命令提示符窗口，现在当我的脚本运行时，它使用 perl 中的系统函数并打开一个新的 cmd.exe 文件并将击键发送给它。直到这里一切正常，但我不希望该命令提示符窗口可见并且用户手动运行脚本。我希望将击键发送到后台的 cmd.exe 窗口中。我想使用 schtasks 使用 windows 64 位服务器来安排脚本。

请不要建议我使用`Proc::Background`，除非您真的尝试过此任务，否则您可以使用它们`Win32::Service`。`Win32::Daemon`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:33:20.163

我认为您可以使用[`Win32::Console`](http://search.cpan.org/~jdb/Win32-Console-0.09/Console.pm).

我没有这方面的经验，但文档听起来很有希望：因为有一个`Display()`功能，我假设控制台默认是隐藏的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T22:51:05.273

您需要将[WM_CHAR](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646276%28v=vs.85%29.aspx)或[WM_UNICHAR](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646288%28v=vs.85%29.aspx)消息发送到有问题的窗口，而不是依赖于处于活动状态并处于前台的窗口。

这个例子似乎对我有用。在将键发送到在窗口中`links`运行时，我能够切换到其他应用程序。`cmd.exe`当我输入完电子邮件时，链接已经导航到`example.com`.

```
#!/usr/bin/env perl

use strict; use warnings;
use Encode qw(encode);
use Time::HiRes qw( usleep );
use Win32::GuiTest qw(SendMessage ShowWindow WaitWindow);

use constant WM_CHAR => 0x0102;
use constant SW_HIDE => 0;
use constant SW_SHOW => 5;

system qw(start links);

my $hwnd = WaitWindow('Links', 5);

ShowWindow $hwnd, SW_HIDE;

send_message($hwnd, "ghttp://example.com/\r");

ShowWindow $hwnd, SW_SHOW;

send_message($hwnd, "q\r", 3_000_000);

sub send_message {
    my ($hwnd, $msg, $delay) = @_;

    $delay ||= 25_000;
    my @keys = encode_keys($msg);

    for my $key (@keys) {
        SendMessage $hwnd, WM_CHAR, $key, 0;
        usleep $delay;
    }
    return;
}

sub encode_keys {
    my ($msg) = @_;
    map ord, map encode('UTF16-LE', $_), split //, $msg;
} 
```

# java - Iterator 接口方法 hasNext()、next()、remove() 定义在哪里？因为接口从不定义方法，只声明

> ID：11350035
> 
> 赞同：2
> 
> 时间：2012-07-05T18:06:59.707
> 
> 标签：java, interface, iterator, polymorphism

像 hasNext()、next()、remove() 等迭代器接口方法在哪里定义？接口不定义方法，只声明在其他类中定义的方法。我们如何通过Iterator引用直接访问hasext()、next()等方法？例如：

```
List l = new LinkedList();
l.add(1);
l.add(2); 
Iterator iter = l.iterator();
while(iter.hasNext())
{
    Object o = iter.next();
    System.out.println(o);
} 
```

在上面使用引用 iter（迭代器引用）的示例中，我们可以在 iter 引用中分配任何方法吗？请给我一个代码示例。直到现在我都无法理解这个概念。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:10:46.390

如果您的问题是：LinkedList 迭代器的实现在哪里，答案是：它是作为 LinkedList 类的私有内部类实现的：

```
private class ListItr implements ListIterator<E> {
    private Node<E> lastReturned = null;
    private Node<E> next;
    private int nextIndex;
    private int expectedModCount = modCount;

    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:09:59.297

您知道您可以通过查看可以下载的 java 源代码自己找到答案，或者您可以打印出返回此处的迭代器的类。

但更一般地说，这一点是抽象的。这里的设计师专门设计的让你不用担心这些细节

# java - 结束语句是否足够好，还是我们还必须关闭每个结果集？

> ID：11350036
> 
> 赞同：1
> 
> 时间：2012-07-05T18:07:11.827
> 
> 标签：java, jdbc

我们有一个 java 应用程序，我们使用多个语句变量。为什么需要不止一个语句的问题是，有时在为循环内的一个结果运行循环时，我们需要完成一些其他查询操作。大部分地方单条stmt用了很多次，最后我们关了。我们现在要确认的是，我们没有关闭结果集变量，并且我们注意到内存的使用量在波动。那么，在我们得到结果后立即关闭结果集或在 stmt 即将结束之前关闭结果集的最佳机制是什么？关闭？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:24:58.450

根据 JDBC 规范和[`Statement.close()`API 文档](http://docs.oracle.com/javase/7/docs/api/java/sql/Statement.html#close%28%29)，它应该足够了：

> 注意：当 Statement 对象关闭时，其当前的 ResultSet 对象（如果存在）也将关闭。

基于此，您应该能够假设您只需要关闭一个语句。但是，由于 Statement 的生命周期可能比使用从它获得的单个 ResultSet 更长，因此通常尽快关闭 ResultSet 是一个好主意。

语句可以具有更长的生命周期，因为例如您再次使用它来执行另一个查询，或者在 PreparedStatement 的情况下使用不同的参数再次执行查询。如果您执行另一个查询，之前获得的 ResultSet 将被关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:17:47.047

完成后关闭它，与任何其他资源相同。Mo 指出要坚持更长时间，特别是如果您要测量记忆力，这意味着记忆问题。

# mysql - 终端mysql查询

> ID：11350042
> 
> 赞同：4
> 
> 时间：2012-07-05T18:07:32.213
> 
> 标签：mysql, terminal

我正在寻找使用终端来执行 mysql 查询。我目前通过 sql 工作台连接到 sql db，但想通过终端执行此操作。这可能吗？

我已经通过自制软件安装了 mysql

当我在终端中点击 mysql 时，它说找不到命令，也许除了自制设置之外我还需要做其他事情？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T18:15:01.483

进入目录：

```
mysql/bin 
```

从命令行执行查询：

```
mysql -u [username] -p [dbname] -e [query] 
```

例子：

`mysql -u root -p database -e "select * from user"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:12:00.563

```
mysql --help 
```

你也可以这样做：

```
cat dump.sql | mysql -u user -p password database 
```

或者：

```
echo "select * from abc;" | mysql -u user -p password database 
```

# javascript - Datatable Javascript 显示水平滚动条

> ID：11350046
> 
> 赞同：0
> 
> 时间：2012-07-05T18:07:47.507
> 
> 标签：javascript, jquery, datatable

你能帮忙吗？

```
 <table id="myTable">
                    <thead>
                        <tr/>
                    </thead>
<tbody/>
                </table> 

    "bJQueryUI": false,
    "bProcessing": false,
    "bServerSide": true,
    "bFilter": true,
    "bAutoWidth": false,
    "bDeferRender": true,
    "bScrollCollapse": true,
    "oScroller": {
        serverWait: true
    },
    "bInfo": true,
    "aaSorting": [
        [1, 'asc']
    ], // Default first column sort
    "sDom": 'tiS', 
```

表格在滚动时不断调整大小

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:57:21.550

我认为你的表结构是根据数据表计算的，尝试创建一个这样的表：

```
<table class="display" id="example">
    <thead>
        <tr>
            <th>Title 1</th>
            <th>Title 2</th>
            <th>Title 3</th>
        </tr>
    </thead>
    <tbody>
         <tr>
            <td>Res 1</td>
            <td>Res 2</td>
            <td>Res 3</td>
         </tr>
    </tbody>
</table> 
```

如果你愿意，你不能设置一个 `<tfoot>`

试试这个，如果可行，设置`$("#example").dataTable({...});`.

# java - Android - 如何处理两指触摸

> ID：11350064
> 
> 赞同：8
> 
> 时间：2012-07-05T18:08:58.970
> 
> 标签：java, android, events, multi-touch

文档对此进行了说明：

> 手势以带有 ACTION_DOWN 的运动事件开始，该事件提供第一个向下指针的位置。随着每个向下或向上的附加指针，框架将相应地生成带有 ACTION_POINTER_DOWN 或 ACTION_POINTER_UP 的运动事件。

所以我在我的活动中完成了 onTouchEvent 函数的覆盖：

```
@Override
public boolean onTouchEvent(MotionEvent MEvent) 
{

    motionaction = MEvent.getAction();

    if(motionaction == MotionEvent.ACTION_DOWN)
    {
        System.out.println("DEBUG MESSAGE POINTER1 " + MEvent.getActionIndex() );
    }

    if(motionaction == MotionEvent.ACTION_POINTER_DOWN)
    {
        System.out.println("DEBUG MESSAGE POINTER2 "  + MEvent.getActionIndex() );
    }

} 
```

不幸的是，第二个 if 从未输入。该活动包含 2 个视图和 2 个**OnTouchListener**，我知道仅当活动的视图不消耗事件时才会调用 onTouchEvent ，因此我尝试在侦听器中返回 false ，这样我只能识别第一根手指触摸**但是**这避免了侦听器接收 ACTION_UP 事件并且不允许我识别第二个手指触摸。我也尝试在侦听器中返回 true，但是在手动调用 onTouchEvent 函数之后，但这也让我也只能识别第一个手指触摸。

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-06T06:39:38.477

我相信您的代码缺少屏蔽操作，例如：

```
switch (motionaction & MotionEvent.ACTION_MASK) {
case MotionEvent.ACTION_POINTER_DOWN:
} 
```

此代码应该能够检查 ACTION_POINTER_DOWN。

祝你好运并告诉我们会发生什么。

汤米奎

# python - 测试一个值是否在集合中并分配变量

> ID：11350065
> 
> 赞同：4
> 
> 时间：2012-07-05T18:08:59.330
> 
> 标签：python

给定这个集合和一个指示所选水果的输入 GET 参数

```
fruit = {'apple', 'banana', 'orange', 'pear'} 
```

有没有一种紧凑的方法可以在 python 的一行中做到这一点？

```
chosen = request_obj.get('fruit', '')

if chosen not in fruit:
    chosen = '' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:21:54.413

这是另一种方式：

```
>>> fruit = {'apple','banana','orange','pear'}
>>> d = {'fruit': 'apple'}
>>> d['fruit'] if 'fruit' in d and d['fruit'] in fruit else ''
'apple'
>>> d['fruit'] = 'watermellon'
>>> d['fruit'] if 'fruit' in d and d['fruit'] in fruit else ''
'' 
```

不过，老实说，我认为您所拥有的更具可读性和更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:16:24.107

你可以简单地做 -

```
fruit = {'apple', 'banana', 'orange', 'pear'}
input_get_param = 'some_other_fruit'

if input_get_param in fruit:
    chosen = input_get_param
    print 'pear is in the set'
else:
    chosen = '' 
```

我更喜欢首先设置查找，因为 python`set`实现使用哈希表作为它的底层数据结构。这解释了 O(1) 成员资格检查，因为在哈希表中查找项目平均是 O(1) 操作。所以查找是相当便宜的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T18:17:07.023

```
>>> fruit = {'apple','banana','orange','pear'}
>>> d = {'fruit': 'apple'}
>>> chosen = '' if d.get('fruit','') not in fruit else d.get('fruit','')
>>> chosen
'apple'
>>> d['fruit'] = 'watermellon'
>>> chosen = '' if d.get('fruit','') not in fruit else d.get('fruit','')
>>> chosen
'' 
```

# vba - Outlook VBA 更改邮件字体大小

> ID：11350066
> 
> 赞同：3
> 
> 时间：2012-07-05T18:09:03.043
> 
> 标签：vba, outlook

我有改变消息敏感度的代码。它确实有效，但字体大小发生了变化。代码有问题吗？

```
Public Sub MakeThisConfidential()
    Application.ActiveInspector.CurrentItem.Sensitivity = olConfidential
    Application.ActiveInspector.CurrentItem.Save
    Set MsgSub = Outlook.Application.ActiveInspector.CurrentItem
    Set objMail = Outlook.Application.ActiveInspector.CurrentItem
    Subject = MsgSub.Subject
    MsgSub.Subject = Subject & " - [CONFIDENTIAL]"
    email = objMail.Body
    info = vbNewLine & "AUTO TEXT: This message has been marked as 'CONFIDENTIAL' please treat it as such"
    objMail.Body = email & info
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T20:27:15.237

您可能想使用该`.HTMLBody`属性而不是`.Body`.

此外，VBA 中的连接字符是`&`，[而不是](https://stackoverflow.com/questions/11318016/why-is-selection-find-not-returning-all-results-in-word-vba/11318477#comment14901092_11318477) `+`。

如果使用`.Body`，您将需要使用`vbNewLine`来创建换行符。如果使用`.HTMLBody`，您将需要使用 HTML/CSS 语法，例如`<p></p>`创建空间。

# macos - NSImage 和视网膜显示混淆

> ID：11350070
> 
> 赞同：5
> 
> 时间：2012-07-05T18:09:10.180
> 
> 标签：macos, cocoa, osx-lion, retina-display, nsimage

我想在 NSImage 上添加十字架，这是我的代码：

```
-(NSSize)convertPixelSizeToPointSize:(NSSize)px
{
    CGFloat displayScale = [[NSScreen mainScreen] backingScaleFactor];
    NSSize res;
    res.width = px.width / displayScale;
    res.height = px.height / displayScale;
    return res;
}

-(void)awakeFromNib
{
    CGFloat scale = [[NSScreen mainScreen] backingScaleFactor];

    NSLog(@"backingScaleFactor : %f",scale);

    NSImage *img = [[[NSImage alloc]initWithContentsOfFile:@"/Users/support/Pictures/cat.JPG"] autorelease];

    NSBitmapImageRep *imgRep = [NSBitmapImageRep imageRepWithData:[img TIFFRepresentation]];
    NSSize imgPixelSize = NSMakeSize([imgRep pixelsWide],[imgRep pixelsHigh]);
    NSSize imgPointSize = [self convertPixelSizeToPointSize:imgPixelSize];
    [img setSize:imgPointSize];

    NSLog(@"imgPixelSize.width: %f , imgPixelSize.height:%f",imgPixelSize.width,imgPixelSize.height);
    NSLog(@"imgPointSize.width: %f , imgPointSize.height:%f",imgPointSize.width,imgPointSize.height);

    [img lockFocus];
    NSAffineTransform *trans = [[[NSAffineTransform alloc] init] autorelease];
    [trans scaleBy:1.0 / scale];
    [trans set];

    NSBezierPath *path = [NSBezierPath bezierPath];     
    [[NSColor redColor] setStroke];
    [path moveToPoint:NSMakePoint(0.0, 0.0)];
    [path lineToPoint:NSMakePoint(imgPixelSize.width, imgPixelSize.height)];
    [path moveToPoint:NSMakePoint(0.0, imgPixelSize.height)];
    [path lineToPoint:NSMakePoint(imgPixelSize.width, 0.0)];

    [path setLineWidth:1];
    [path stroke];
    [img unlockFocus];

    [imageView setImage:img];

    imgRep = [NSBitmapImageRep imageRepWithData:[img TIFFRepresentation]];
    NSData *imageData = [imgRep representationUsingType:NSJPEGFileType properties:nil];
    [imageData writeToFile:@"/Users/support/Pictures/11-5.JPG" atomically:NO];
} 
```

在非视网膜显示器上，结果是： ![在此处输入图像描述](../Images/5bafecfa7e08629169bb67ed796d61e9.png)

和控制台显示：

```
2012-07-06 00:53:09.889 RetinaTest[8074:403] backingScaleFactor : 1.000000
2012-07-06 00:53:09.901 RetinaTest[8074:403] imgPixelSize.width: 515.000000 , imgPixelSize.height:600.000000
2012-07-06 00:53:09.902 RetinaTest[8074:403] imgPointSize.width: 515.000000 , imgPointSize.height:600.000000 
```

但是在视网膜显示器上（我没有使用真正的视网膜显示器而是 hidpi 模式）： ![在此处输入图像描述](../Images/0438b44dce5add32be1a9a3c13adf0cb.png)

安慰：

```
2012-07-06 00:56:05.071 RetinaTest[8113:403] backingScaleFactor : 2.000000
2012-07-06 00:56:05.083 RetinaTest[8113:403] imgPixelSize.width: 515.000000 , imgPixelSize.height:600.000000
2012-07-06 00:56:05.084 RetinaTest[8113:403] imgPointSize.width: 257.500000 , imgPointSize.height:300.000000 
```

如果我省略这些行：

```
NSAffineTransform *trans = [[[NSAffineTransform alloc] init] autorelease];
            [trans scaleBy:1.0 / scale];
            [trans set]; 
```

![在此处输入图像描述](../Images/9c06da2c5793187d288d2766da0b7fa0.png)

但是，如果我将 [NSAffineTransform scaleBy] 更改为 1.0，结果是正确的

```
NSAffineTransform *trans = [[[NSAffineTransform alloc] init] autorelease];
        [trans scaleBy:1.0];
        [trans set]; 
```

![在此处输入图像描述](../Images/4cfb53a39a2d2bcc42e5b1b3dfb2e7e3.png)

安慰：

```
2012-07-06 01:01:03.420 RetinaTest[8126:403] backingScaleFactor : 2.000000
2012-07-06 01:01:03.431 RetinaTest[8126:403] imgPixelSize.width: 515.000000 , imgPixelSize.height:600.000000
2012-07-06 01:01:03.432 RetinaTest[8126:403] imgPointSize.width: 257.500000 , imgPointSize.height:300.000000 
```

有人可以解释一下吗？hidpi 模式与视网膜显示不同吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-09T12:40:53.437

我想我找到了答案。如果 NSAffineTransform 设置为 NSImage 的上下文，它会将坐标系转换为像素维度，即 2 x 点维度。即使它是这样的空：

```
NSAffineTransform *trans = [[[NSAffineTransform alloc] init] autorelease];
[trans set]; 
```

我不知道这是一个错误还是它的工作方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T22:46:35.280

重置转换不是错误（参考您自己的答案）。使用 hidpi 使默认转换成为让大多数高级代码按原样正常工作的转换。重置为恒等变换会撤消此操作以将坐标系与像素 1:1 对齐。

一个人应该很少需要这样做。简化您的代码以取出图像代表和转换更改，您可以得到：

```
NSImage *img = [[[NSImage alloc]initWithContentsOfFile:@"/Users/support/Pictures/cat.JPG"] autorelease];
NSSize size = img.size;

NSBezierPath *path = [NSBezierPath bezierPath];     
[[NSColor redColor] setStroke];
[path moveToPoint:NSMakePoint(0.0, 0.0)];
[path lineToPoint:NSMakePoint(size.width, size.height)];
[path moveToPoint:NSMakePoint(0.0, size.height)];
[path lineToPoint:NSMakePoint(size.width, 0.0)];

[path setLineWidth:1];
[path stroke];
[img unlockFocus];

[imageView setImage:img];
... 
```

这应该可以工作，除了线将改为 2 个物理像素宽（但当然与常规屏幕上的图像的宽度相似）。试试这个更简单的特殊情况来解决这个问题：

```
[path setLineWidth:(img.scale > 1) ? 0.5 : 1.0]; 
```

# .htaccess - 在 www 之后添加 index.php。用 .htaccess 删除

> ID：11350071
> 
> 赞同：1
> 
> 时间：2012-07-05T18:09:10.810
> 
> 标签：.htaccess, codeigniter

我知道从 CodeIgniter URI 中删除 index.php 很简单`RewriteRule ^(.*)$ index.php/$1 [L]`。我的问题是由于我的 .htaccess 文件中的其他一些规则而发生的。

我的问题是当用户访问 www.mydomain.com/blog 时，他们会被重定向到 mydomain.com/index.php/blog，当有斜杠时不会发生这种情况；www.mydomain.com/blog/ 正确重定向到 mydomain.com/blog。我真的不希望 index.php 在那里。另外一个注意事项是，理想情况下，如果用户在 URL 中输入 index.php，我希望他们能够访问没有的 URL。

我当前的 .htaccess 文件是这样的：

```
RewriteEngine on
RewriteBase /

# Protect CI system folders
RewriteCond %{REQUEST_URI} ^/(application|system)/(.*)$
RewriteRule ^(.*)$ index.php/$1 [L]

# Prevent rewriting URIs that exist: (-d directory -f files)
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{SCRIPT_FILENAME} !-f

# Remove index.php
RewriteRule ^(.*)$ index.php/$1 [L] 

# Remove www.
RewriteCond %{HTTP_HOST} !^mydomain.com$ [NC]
RewriteRule ^(.*)$  http://mydomain.com/$1 [R=301,L]

# Remove trailing slash
RewriteRule ^(.+)/$ http://mydomain.com/$1 [R=301,L] 
```

我对调整 .htaccess 文件比较陌生；请让我知道那里是否有任何可以针对优化、不良做法等进行调整的内容，其中大部分是通过谷歌漫游创建的！

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:36:46.480

规则的顺序很重要。尝试移动`RewriteRule ^(.*)$ index.php/$1 [L]`到底部。记得`$config['index_file']`在你的`application/config/config.php`

# c# - 在代码隐藏中使用（静态）HTML 控件，使用 C#/ASP.NET 进行编码

> ID：11350083
> 
> 赞同：2
> 
> 时间：2012-07-05T18:10:08.293
> 
> 标签：c#, asp.net, html

我正在使用 ASP.NET 中的 C# 在 VS10 中工作。在我的设计表单中，我有一个 textArea（标准 HTML 控件）。

```
 <textarea id="Text1"  rows = "8"; cols="30" onkeyup="AutoGrowTextArea(this)"   name="S1"> </textarea> 
```

现在在我的代码隐藏页面中，我使用 C# 对控件进行编码。我已经为 textArea 提供了一个自动扩展功能，这是我在项目中需要的。我需要这个 TextArea 作为服务器控件，就像我们在设计页面中放置一个文本框一样，我们可以在代码隐藏页面中使用它来编码，因为它是一个服务器控件。但是，textArea 不是服务器控件。我已经浏览了网站上以前的帖子，但我没有得到足够有用的东西。我什至尝试过使用 [<% %>] 系统和 [runat="server"] 但它没有帮助。我想做的是在代码隐藏页面中使用textArea，即在编码空间中调用它，就像我们可以调用TextBox控件对象一样。所以，任何人都可以帮我解决这个问题，，，问候.. 用于自动增长文本框的 javascript 是：

```
 <script type="text/javascript"> 

function AutoGrowTextArea(textField) 
```

{

```
if (textField.clientHeight < textField.scrollHeight) 

{

 textField.style.height = textField.scrollHeight + "px";

 if (textField.clientHeight < textField.scrollHeight)

{

textField.style.height = (textField.scrollHeight * 2 - textField.clientHeight) + "px";

} 

}

} 

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:13:00.077

尝试这个

添加`runat="server"`到标签

```
<textarea id="Text1" runat="server"  rows = "8" cols="30" onkeyup="AutoGrowTextArea(this)" name="S1"> </textarea> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:14:06.957

您可以操作原始 html 控件，设置控件的**runat="server"**属性。

```
 <textarea id="Text1" runat="server"  rows = "8"; cols="30" onkeyup="AutoGrowTextArea(this)"   name="S1"> </textarea> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T18:17:48.437

```
<asp:TextBox id="thisIsMyTextBox" runat="server" multiline="true" width="200px" onkeyup="AutoGrowTextArea(this)" height="80px" style="resize:none;"></asp:TextBox> 
```

您可以根据需要使用宽度/高度！

> 函数 AutoGrowTextArea(textField)
> 
> {
> 
> ```
>  if(textField.Lenght()%50==0)//50 is the number of character in your textbox
> 
>    {
> 
>             if (textField.clientHeight < textField.scrollHeight) 
> 
>             {
> 
>                     textField.style.height = textField.scrollHeight + "px";
> 
>                     if (textField.clientHeight < textField.scrollHeight)
> 
>                     {
> 
>                              textField.style.height = (textField.scrollHeight * 2 - textField.clientHeight) + "px";
> 
>                     } 
> 
>      } 
> ```
> 
> }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T18:53:33.070

您可以在标记中添加 runat="server" ，它将成为服务器控件。

您还可以在后面的代码中创建服务器控件。声明（在 Visual Basic 中）：

```
Protected WithEvents foo As Global.System.Web.UI.HtmlControls.HtmlGenericControl = Global.System.Web.UI.HtmlControls.HtmlGenericControl("textarea") 
```

如果你想在你的所有项目中使用某些东西，你可以声明一个继承自 Control 或 HtmlGenericControl 的类，你可以在你的新控件的任何地方实现你需要实现的任何东西。

# android - 自定义摄像头Android预览图与显示图不同

> ID：11350085
> 
> 赞同：1
> 
> 时间：2012-07-05T18:10:24.043
> 
> 标签：android, camera

我正在开发一个使用手机摄像头的 Android 应用程序，并且我正在使用自定义代码。

问题是预览中显示的图像不正确（图像纵横比不正确）。

如果我使用以下代码：

```
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {

   Camera.Parameters params = mCamera.getParameters();
   List<Camera.Size> sizes = params.getSupportedPreviewSizes();
   Camera.Size selected = sizes.get(0);
   params.setPreviewSize(selected.width,selected.height);
   mCamera.setParameters(params);
   mCamera.startPreview(); 
```

预览图像还可以（我认为图像顶部和底部的一小部分没有显示）。

然后的问题是调用takePicture方法后显示的捕获图像未正确显示（图像纵横比不正确，图像似乎被压缩到视图中），即使我将图片保存到文件也会出现图像没问题。

我想知道在这两种情况下是否可以正确显示图像。建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T15:46:59.477

解决方案很简单，但我不知道**我必须手动设置正确的纵横比**（这不是一个自动过程，我认为它是，而且这一步在大多数操作方法中都没有解释）。最后，我以这种方式解决了它：

1.  `params.getSupportedPreviewSizes()`使用和获取支持的大小`params.getSuppertedPictureSize()`。

2.  **根据度量**计算最佳纵横比**`width`（宽度/高度）并`height`传入`surfaceChanged(SurfaceHolder holder, int format, int width, int height)`.**

***   调用 before 方法分别使用`setPreviewSize`和设置最佳预览尺寸和图片尺寸。`setPictureSize``startPreview()`** 

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:29:30.207

如果您保存了图像并且它正确显示，则问题不在于正在拍摄的图像，而在于您将其显示给用户的方式。如果您使用的是 ImageView，请确保您使用的是 src（不是背景），因为 src 将保持纵横比，但背景会拉伸和扭曲图像以填充背景。同样，您可以设置 android:adjustViewBounds="true" 让 ImageView 调整其边界以保持纵横比。**

# ruby-on-rails - 普遍的 sql 数据库到 ruby on rails

> ID：11350086
> 
> 赞同：0
> 
> 时间：2012-07-05T18:10:36.913
> 
> 标签：ruby-on-rails, pervasive

嘿伙计们，我想知道如何将普遍的 sql 同步到另一个数据库或直接将其连接到 ruby​​ on rails？

我的会计系统使用普遍的 sql，目前我正在尝试使用从数据库到我的 ruby​​ 应用程序的 ODBC 连接。

我目前正在使用这个网站：

[http://odbc-rails.rubyforge.org/](http://odbc-rails.rubyforge.org/)

以前有没有人这样做过，因为到目前为止，我对如何进行连接并从远程数据库获取数据感到非常困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T09:18:27.397

我意识到这有点晚了，但是在基于 Windows 的系统上，您可以通过执行以下操作使用 OLE DB 连接到 pervasive：

```
 require 'win32ole'
    conn = WIN32OLE.new('ADODB.Connection')
    conn.Open = ('Provider=PervasiveOLEDB;Data Source=DEMODATA;')

    recordset = ('Select * from some_table',conn)
    data = recordset.GetRows.transpose
    recordset.Close 
```

虽然没有用于 ole db 和活动记录的适配器。只需将适配器设置为 odbc 就可以工作，但我并不肯定。

如果您可以 setup 和 odbc dsn 您也可以按照[此处](http://cstrahan.com/2009/06/03/odbc-via-ruby-windows.html)描述的方式连接到 pervasive 。

[如果您可以使用 JRuby，则可以访问此处](https://stackoverflow.com/questions/1432026/btrieve-pervasive-db-and-ruby)描述的 JDBC 连接。

# javascript - 在 JavaScript/HTML5 中显示 3D 模型

> ID：11350090
> 
> 赞同：30
> 
> 时间：2012-07-05T18:10:58.510
> 
> 标签：javascript, html, 3d, webgl

我正在考虑在浏览器中渲染 3D 模型。我应该使用什么工具/应该看哪些地方？

我不知道模型将是什么数据格式，我可能会要求以任何我想要的方式格式化数据。

我正在查看[three.js](http://mrdoob.github.com/three.js/)，但它似乎需要WebGL 才能工作，这在IE 中似乎不受支持。

是否存在“跨浏览器兼容的 HTML 3d 渲染引擎”？:)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-05T18:20:14.023

我还没有玩过 3D，但我知道 HTML5 的 3D 资源的好地方。

[http://www.html5rocks.com/en/gaming](http://www.html5rocks.com/en/gaming)

这是一个关于如何使用`Three.js`框架创建 3D 模型的教程。

[http://www.html5rocks.com/en/tutorials/three/intro/](http://www.html5rocks.com/en/tutorials/three/intro/)

这可能会对您有所帮助。祝你好运。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-04T17:05:33.087

我还需要你一直在寻找的东西并做了一些研究。

我找到**了 JSC3D**（[https://code.google.com/p/jsc3d/](https://code.google.com/p/jsc3d/)）。这是一个完全用 Javascript 编写并使用 HTML 画布的项目。它已针对 Opera、Chrome、Firefox、Safari、IE9 等进行了测试。

然后你就有了**p3d.in**和**Sketchfab**等服务，它们为你提供了一个很好的阅读器来查看网页上的 3D 模型：它们使用 HTML5 和 WebGL。他们都有免费版本。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-07T14:18:36.100

几年后，我会投票给three.js，因为

即 11 支持 webgl（在多大程度上我不能向你保证，因为我通常在 chrome 中）

并且，至于将外部模型导入到 three.js 中，这里是 mrdoob 更新的加载器的链接（太多了！）

2019 年 11 月更新：THREE.js 加载器现在要多得多，将它们全部发布几乎没有意义：只需转到此链接

[http://threejs.org/examples](http://threejs.org/examples) 并查看加载器 - 至少 20 个

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-09T12:53:19.487

您是否使用 3D 工具（例如 Maya）？对于玛雅，您可以查看[http://www.inka3d.com](http://www.inka3d.com)

# websphere - 将 *.html 映射到 servlet 后，Websphere 未使用欢迎文件列表

> ID：11350091
> 
> 赞同：0
> 
> 时间：2012-07-05T18:11:00.227
> 
> 标签：websphere, web.xml

我正在使用 IBM WebSphere (WAS) 7.0.0.19 来托管基于 Java 的 Web 应用程序，并且我需要将扩展​​ *.html 映射到特定的 servlet，以便我可以对用户提供的 HTML 进行一些服务器端清理文件。（服务器读取文件，用一些额外的信息对其进行扩充，并将修改后的内容透明地提供给查看页面的人。）

不幸的是，当我这样做时，欢迎文件停止工作。以前，如果我输入目录的 URL，服务器会查找 index.html 并提供它。现在，我刚刚得到一个 403 禁止规则（“禁止 - 按规则。”）。访问日志不再显示任何内容——它们只是声明服务器规则禁止目录索引，这是正确的。我不希望网络服务器为没有 index.html 的目录构建目录，但是当有 index.html 时，我希望它提供该文件。

我的第一个想法是它试图通过我的 servlet 提供 index.html，servlet 找不到文件（因为 url 缺少“index.html”），因此它认为没有 index.html。但是，我输入了一些调试代码，并且非常确信当我只是转到目录本身时，servlet 代码永远不会运行。

我真的不关心 index.html 是否通过 servlet 提供服务——在这个特定文件的情况下，servlet 无论如何都会吐回原始文件。我只希望 index.html 由某些东西提供服务。

这是我的 web.xml 的相关部分

```
<servlet-mapping>
    <servlet-name>PageScrubber</servlet-name>
    <url-pattern>*.html</url-pattern>
</servlet-mapping>        

<welcome-file-list>         
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
</welcome-file-list> 
```

对于它的价值，在添加 servlet 映射之前 index.htm 和 index.jsp 无法正常工作。以前只有 index.html 有效。但是，现在它们都不起作用。

我在两个 Oracle 产品中使用了相同的 web.xml：WebLogic (WLS) 和 Oracle Application Server (OAS)，没有任何问题。

我很有信心只是添加了这个清理器 servlet 导致了问题，因为删除该指令会导致目录索引重新开始工作。

在使用扩展文档根目录时，我确实发现了一些关于welcome-file-list 不起作用的注释，并且我尝试将 com.ibm.ws.webcontainer.EnablePartialURLtoExtendedDocumentRoot 设置为 true，但这似乎并没有改变任何东西。

我几乎没有想法。有没有人对为什么找不到我的 index.html 有任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T05:55:12.120

**警告：**我在这里工作的内存不足。

Welcome 文件曾经由 File Serving Servlet（或类似的东西）提供服务。

此信息将位于 WebSphere 扩展文件中。

我会退后一步，删除您的 pageScrubber 并获取服务 Servlet 的文件以提供欢迎文件，并在返回使用 PageScrubber 之前查看一切是否正常。

这些是我最初的想法。

高温高压

# google-drive-api - 如何将“打开方式”流程限制为单个文件？

> ID：11350094
> 
> 赞同：0
> 
> 时间：2012-07-05T18:11:20.967
> 
> 标签：google-drive-api

我想防止在用户单击打开时将多个文件 ID 发送到我的应用程序...

或者我希望在选择多个文件时将我的应用程序从打开状态中删除。

类似于选择多个原生 Google 文档。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:42:26.530

您目前无法执行此操作。你能做的最好的就是在你最后处理它。这可以通过在发送多选时引发错误或打开第一个文件并警告用户来实现。

# c++ - int p = *(int *)i 和 int p = *(int *)&i 之间的区别

> ID：11350096
> 
> 赞同：1
> 
> 时间：2012-07-05T18:11:33.150
> 
> 标签：c++, c, pointers, casting

在最近的一次微软采访中提出了以下问题。

这两个声明有什么区别？

```
int p=*(int*)i; 
int p=*(int*)&i; 
```

我认为第一个`i`是指针，第二个`i`是变量。
还有别的事吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T18:16:00.573

第一个是获取 中包含的值`i`，将其视为指针，并检索`int`该地址处的任何值（如果可能）。

第二个获取 的地址`i`，将其转换为指向 int 的指针，并检索该地址处的值。如果`i`是`int`，则相当于`p=i;`。如果不是，它将获取`CHAR_BIT *sizeof(int)`从 的地址开始的第一位`i`，并（尝试）将它们视为`int`，并将创建的任何值分配给`p`。

编辑：是的，作为@R。Martinho Fernandes 指出，如果`i`有一个重载的`operator &`，它可能会做一些与上述任何一个完全不同的事情（即，而不是它的地址将以其返回`i`的任何内容开头）。`operator &`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:18:12.523

如果您知道该语言，那么这个问题可以归结为两者之间的区别是什么

```
i 
```

和

```
&i 
```

答案是，在第一种情况下它是`i`，在第二种情况下它是地址`i`，然后你就可以对这两个中的任何一个进行所有这些转换。

# c# - 任何第三方的 asp.net 身份验证

> ID：11350097
> 
> 赞同：1
> 
> 时间：2012-07-05T18:11:36.290
> 
> 标签：c#, asp.net

我想让用户能够使用任何帐户登录到我的网站：Facebook、Yahoo、Windows Live...

它类似于 Stack Overflow 帐户身份验证。

我需要用 asp.net (.NET) 来做；我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:16:15.163

简而言之：

您必须为每个站点获取 api，并将它们与您的站点集成。它们主要在 JS 中（据我所知），因此您可以将它们与任何语言一起使用，

以下是一些api链接：

[https://developers.facebook.com/docs/guides/web/](https://developers.facebook.com/docs/guides/web/)

[http://developer.yahoo.com/auth/](http://developer.yahoo.com/auth/)

[http://www.programmableweb.com/api/windows-live-id-web-authentication](http://www.programmableweb.com/api/windows-live-id-web-authentication)

[http://openid.net/](http://openid.net/)

每个都提供了有关如何使用它们的示例，因此请阅读；）

祝你好运！

# php - 更新mysql中的日期时间变量

> ID：11350099
> 
> 赞同：4
> 
> 时间：2012-07-05T18:11:39.580
> 
> 标签：php, mysql, datetime

我正在尝试使用`DateTime`变量更新我的 MySQL 数据库。

```
$interval = 'P' . $days . 'DT' . $hours. 'H' . $minutes. 'M' . $seconds . 'S'  ;
$date = new DateTime("NOW");
$date->add(new DateInterval($interval)); 
```

现在 SQL 更新：

```
$query = "UPDATE table
SET table.table_date = '$date' ";
mysql_query($query);
mysql_query($query); 
```

如果我`var_dump`是`$date`变量，它会显示正确的属性：

```
object(DateTime)#4 (3) { ["date"]=> string(19) "2012-07-05 20:04:14" ["timezone_type"]=> int(3) ["timezone"]=> string(13) "Europe/Berlin" } 
```

但它只是不会被插入。如果我尝试 NOW() 而不是 $date，它会完美运行。我的错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:17:45.587

试试这个：

```
"UPDATE table SET table.table_date = '{$date->format('Y-m-d H:i:s')}'" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T18:22:21.607

它不起作用，因为您试图将对象直接插入到字符串中。您需要做的是首先将对象转换为可用的日期时间字符串：

```
$futuredate = $date->format('Y-m-d H:i:s');
$query = "UPDATE table SET table.table_date = '$futuredate'"; 
```

# activerecord - Yii 框架：如何使用 CActiveRecord.beforeFind()？

> ID：11350102
> 
> 赞同：0
> 
> 时间：2012-07-05T18:11:47.303
> 
> 标签：activerecord, yii, yii-events

我需要`beforeFind(`在`CActiveRecord`.

基本上，我需要在执行数据库中的实际搜索之前转换一些数据。

如何更改内部即将发生的即将发生的查找操作`beforeFind()`？弄乱`$this`属性没有用，因为它甚至没有填充，这有点令人惊讶。我已经看到文档提到了一个“隐藏的 CDbCriteria 参数”，但我无法猜测如何使用它...... 不幸的是，关于这个主题的文档很少。

我需要做的很简单：我有一个用于存储 IP 地址的表格列。从可伸缩性的角度来看，最有效的设计是对列使用 VARBINARY(16) 数据类型。例如，请参阅[此](https://stackoverflow.com/questions/6427786/ip-address-storing-in-mysql-database)SO 问题页面（和答案）。因此，最干净的解决方案是拥有并为用户透明地工作`beforeFind()`。`afterFind()``beforeSave()`

`inet_pton()`在代码堆栈中，IP 地址将是普通的点分四边形，而在 DB 级别中，在使用 PHP 的方法之后/之前的钩子方法之后进入该领域的任何内容。

它应该很酷。它很酷 - 使用`afterFind()`and `beforeSave()`，我有手头对象的 ip_address 属性，由我的超级操纵能力支配。

这是重点，也是需要：事情是，我不知道如何在`beforeFind()`. 我不能盲目`mergeWith()`，因为我需要检查 ip_address 属性是否是原始标准的一部分，并且我不知道该怎么做。

帮助！蒂亚:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:45:56.167

我在 yii 论坛上有[一个很好的建议。](http://www.yiiframework.com/forum/index.php/topic/33422-how-to-use-cactiverecordbeforefind/page__view__findpost__p__160925)基本上，我只需要在子类中覆盖 findByAttributes() 即可：)

# javascript - 按下鼠标时如何在 Chrome 中保持悬停状态？

> ID：11350106
> 
> 赞同：0
> 
> 时间：2012-07-05T18:12:11.503
> 
> 标签：javascript, jquery, google-chrome, dom, event-handling

`mousedown`当我的用户按下自定义下拉列表时，我正在停止一个事件。这是为了避免在用户有效拖动鼠标时浏览器的默认文本突出显示行为。

我`event.preventDefault()`在处理函数中使用 jQuery 调用来执行此操作并返回 false。

这具有预期的效果，除了在 Chrome 中它还阻止 CSS`:hover`状态在鼠标仍被按下时工作。

Firefox 不会遇到同样的问题。文本突出显示被取消，并且 :hover 状态继续工作，因为用户在鼠标仍然按下的情况下滚动项目。

有没有一种方法也可以在 Chrome 中使用？

我可以添加更多`mouseover`的处理程序来添加自定义类，但我更喜欢更优雅的解决方案，这样我就可以在我的 CSS 中使用 :hover 伪类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T22:04:41.727

在文档 mousedown 上，只需将此类添加到正文中：

```
.stopSelect {
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
} 
```

这将阻止文本选择。在 mouseup 上删除类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:24:52.627

您可以将您的 CSS 定义为 :hover, .hover { ... } 然后只需在鼠标悬停时切换类

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T18:17:01.413

为了防止突出显示文本，有一个 CSS3 属性。我在一个 SO 问题中找到了这个信息。“[防止突出显示文本表](https://stackoverflow.com/questions/1319126/prevent-highlight-of-text)”

编辑：我认为这个“[如何使用 CSS 禁用文本选择突出显示？](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting) ”更好，因为涵盖了更多浏览器，从而使其更具跨浏览器。

# css - 从远程主机上的 CSS 样式表加载图像

> ID：11350108
> 
> 赞同：3
> 
> 时间：2012-07-05T18:12:32.963
> 
> 标签：css, image, loading

我有以下文件结构：

```
On server 'site1.com':
- images\background.jpg
- index.html

On server 'site2.com':
- css\main.css 
```

在 site1.com 上的文件“index.html”上，我指向 site2.com/css/main.css 上的样式表。

在文件'main.css'上，我有一条规则说：`background-image: url(images/background.jpg);`

问题是文件'index.html'没有加载'background.jpg'作为它的背景。我该如何解决？唯一的方法是`background-image: url(site1.com/images/background.jpg);`在样式表规则中写入绝对路径？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T18:17:57.077

使用完整链接`background-image: url(http://site1.com/images/background.jpg);` ，绝对路径不包括域。绝对路径示例`background-image:url(/images/background.jpg);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:22:27.390

由于 CSS 文件中引用的 URL 与 CSS 文件本身相关，因此它不会从 site1.com 加载 background.jpg。因此，您可以在 CSS 中使用图像文件的完整 URL，或者您可以加载具有站点特定样式的附加样式表。

您将首先从 site2.com 加载 CSS，然后再从 site1.com 加载 CSS。在这种情况下，您的 site1 CSS 文件中的唯一样式是`background-image: url(images/background.jpg);`因为这个新的 CSS 文件托管在 site1.com 上，它将正确引用 images 文件夹。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-16T05:20:44.797

您当前的设置：

```
On server 'site1.com':
    - images\background.jpg
    - index.html

On server 'site2.com':
    - css\main.css 
```

文件 'index.html' 不会加载 'background.jpg' 作为其背景，因为`main.css`&`background.jpg`位于不同的域中。

**原因：**
当您编写相对路径 `images/background.jpg`时，服务器假定所有这些相对路径都**相**对于`main.css`，而不是相对于任何`*.html`或`*.php`使用`main.css`. 所以`images/background.jpg`假设为`site2.com/images/background.jpg`，它不存在，因此图像不会加载。

**解决方案：**
要通过写入相对路径来使用`background.jpg`，请尝试将文件夹移动到然后您可以为要使用的任何资源编写. `index.html``background-image: url(images/background.jpg);``images``site2.com``relative path``main.css`

在这种情况下，您的设置应该是：

```
On server 'site1.com':
    - index.html

On server 'site2.com':
    - css\main.css
    - images\background.jpg 
```

你的 CSS 规则应该是：

```
background-image: url(../images/background.jpg); 
```

这意味着：从当前目录（`css`）上上一个目录，然后进入`images`并`background.jpg`使用它作为背景图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T19:27:32.040

唯一的解决方案是使用完整的 URL，但是，没有什么能阻止您在客户端或服务器端功能处理图像 URL。

# ios - 为什么我的应用无法正确解析视频链接？

> ID：11350109
> 
> 赞同：0
> 
> 时间：2012-07-05T18:12:35.007
> 
> 标签：ios, xml-parsing, mpmovieplayercontroller

所以我对一般的编码非常陌生（我的背景是视频制作），我的任务是创建一个 iPhone 应用程序。Xcode 实际上很容易使用教程之类的东西，但是我遇到了我不知道的事情的砖墙。反正……就这样吧。

我遵循了 YouTube 上关于在 iOS 中解析 XML 的教程。效果很好。但是，本教程将 XML 解析为标签。那部分工作得很好。但是，我正在尝试使用定制的 XML 文档解析播客 RSS 提要，并且我希望视频的链接转到播放的按钮，而不是填写标签。所以我假设我可以将已经工作的链接传递到使用 MPMoviePlayerViewController 的按钮中。没用。

它给出了一个关于将 NSString 作为 URL 传递的错误。然后我使用 NSUrl 制作视频链接。没有错误，但视频无法播放。关于我做错了什么的任何想法？

我包含的唯一代码是 DetailViewController.m 文件，因为其他所有内容都可以正常工作，即使链接在标签中正确显示。它只是没有正确连接到按钮。当您在模拟器中点击播放按钮时，它会启动电影播放器​​并仅显示“正在加载...”屏幕。任何帮助将不胜感激。

```
 #import "DetailViewController.h"
    #import <MediaPlayer/MediaPlayer.h>

    @implementation DetailViewController
    @synthesize theList;

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        self.title = theList.title;
        theTitle.text = theList.title;
        theAuthor.text = theList.author;
        playAudio.text = theList.audio;
        playVideo.text = theList.video;

    }

    - (void)viewDidUnload
    {

        [super viewDidUnload];
    }

    - (IBAction)playVid:(id)sender {

        NSURL *playVid = [NSURL URLWithString:theList.video];

        MPMoviePlayerViewController *mpViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:playVid];

        [mpViewController shouldAutorotateToInterfaceOrientation:UIInterfaceOrientationPortrait];

        [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait animated:YES];

        [self presentMoviePlayerViewControllerAnimated:mpViewController];

    }
    @end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T15:17:56.133

在我的情况下，我想通了，至少是使它起作用的解决方案。

看起来我使用的解析器计算了我在 XML 文件中使用的标签之外的换行符。我删除了它们，它起作用了。我还在 Stackoverflow 上发现了这个问题：

[iOS：NSString 丢失 URL，显示 (null)](https://stackoverflow.com/questions/10851314/ios-nsstring-loses-url-null-is-shown)

我能够解决它。非常感谢 H2CO3 和 Justin Paulson 帮助我找出我的 NSURL 为空。

# c++ - 将二维向量初始化为类变量 C++

> ID：11350112
> 
> 赞同：3
> 
> 时间：2012-07-05T18:12:51.403
> 
> 标签：c++, class, vector

我正在构建一个类，其中一个变量是二维向量。如何设置它以便我有一个初始大小？我尝试了以下但在数字常量之前出现错误，预期为“，”或“...”。另外，我尝试将值设置为 pncode 的每一行都会出错，数组下标的类型无效“[int]”。

这是课程：

```
#ifndef POSTNET_H_
#define POSTNET_H_

#include <iostream>
#include <cstdlib>
#include <string>
#include <vector>
using namespace std;

class postnet
{
private:
    vector<vector<int>> pncode(5, vector<int>(5));
    void encode(vector<int> zip)
    {
        for(int i = 0; i < 5; i++)
        {
            if(zip[i] == 1 || zip[i] == 2 || zip[i] == 3 || zip[i] == 4 || zip[i] == 5 || zip[i] == 6)
                pncode[i][0] = 0;
            else
                pncode[i][0] = 1;

            if(zip[i] == 1 || zip[i] == 2 || zip[i] == 3 || zip[i] == 7 || zip[i] == 8 || zip[i] == 9)
                pncode[i][1] = 0;
            else
                pncode[i][1] = 1;
            if(zip[i] == 1 || zip[i] == 4 || zip[i] == 5 || zip[i] == 7 || zip[i] == 8 || zip[i] == 0)
                pncode[i][0] = 0;
            else
                pncode[i][0] = 1;
            if(zip[i] == 2 || zip[i] == 4 || zip[i] == 6 || zip[i] == 7 || zip[i] == 9 || zip[i] == 0)
                pncode[i][0] = 0;
            else
                pncode[i][0] = 1;
            if(zip[i] == 3 || zip[i] == 5 || zip[i] == 6 || zip[i] == 8 || zip[i] == 9 || zip[i] == 0)
                pncode[i][0] = 0;
            else
                pncode[i][0] = 1;
        }
    }
    void decode(vector<int> zip)
    {
        int zipd[5];

        for(int i = 0; i < 5; i++)
        {
            zipd[0] = pncode[i][0] * 7;
            zipd[1] = pncode[i][1] * 4;
            zipd[2] = pncode[i][2] * 2;
            zipd[3] = pncode[i][3] * 1;
            zipd[4] = pncode[i][4] * 0;

            for(int j = 0; j < 5; j++)
            {
                zip[i] += zipd[j];
            }
            if(zip[i] == 11)
                zip[i] = 0;
        }
    }

public:
    postnet()
    {
        for(int i = 0; i < 5; i++)
            for(int j = 0; j < 5; j++)
                pncode[i][j] = 0;
    }
    postnet(vector<int> zip)
    {
        encode(zip);
    }
    postnet(vector<vector<int> > pnc)
    {
        for(int i = 0; i < 5; i++)
            for(int j = 0; j < 5; j++)
                pncode[i][j] = pnc[i][j];
    }
    void print_zip()
    {
        vector<int> zipc(5);
        decode(zipc);

        for(int i = 0; i < 5; i++)
            cout << zipc[i];

        cout << endl;
    }

    void print_pncode()
    {
        cout << "1";
        for(int i = 0; i < 5; i++)
            for(int j = 0; j < 5; j++)
                cout << pncode[i][j];
        cout << "1" << endl;
    }

};

#endif /* POSTNET_H_ */ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:37:46.020

您现在拥有的代码，`vector<vector<int>> pncode(5, vector<int>(5));`对于 C++11 编译器来说已经足够了。在此之前，您必须在构造函数中进行初始化`pncode`。（您可能还需要在尖括号之间添加一个空格；`>>`。）

```
postnet(vector<int> const &zip)
    : pncode(5, vector<int>(5))
{
    encode(zip);
}
postnet(vector<vector<int> > const &pnc = vector<vector<int> >(5, vector<int>(5)))
{
    assert(pnc.size()==5);
    for (int i=0;i<pnc.size();++i)
        assert(pnc[i].size()==5);

    pncode = pnc;
} 
```

我还冒昧地用默认参数替换了您的默认构造函数，将参数类型更改为 const&，并消除了向量元素的手动复制。

# c# - 中止请求时 IIS/C# 中会发生什么

> ID：11350119
> 
> 赞同：11
> 
> 时间：2012-07-05T18:13:30.953
> 
> 标签：c#, ajax, iis, xmlhttprequest

所以我正在考虑用户粘贴链接并且服务器端代码抓取提供的链接并使用该链接的内容（例如页面标题、描述、缩略图等）进行响应的功能。

用户同时可以更改链接，并且在这样做时，应该在客户端中止 ajax 请求。

我想知道 IIS 服务器中到底发生了什么，特别是我的 C# 代码。

*   响应线程是否终止？
*   Response 对象现在返回 null，还是 Response.Write 抛出异常？
*   响应线程中是否会抛出异常？（那个甚至没有意义，但无论如何）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:28:25.093

如果服务器代码检查 的状态`Response.IsClientConnected`，它可以在客户端中止请求时停止工作并产生空响应，否则它将照常完成请求。

请求处理不会因为没有人再等待而自动中止。服务器代码必须主动检查请求的状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:17:58.653

您的 Web 服务器不知道客户端取消了请求。请求仍将得到满足，并将发回响应。您编写的客户端脚本需要能够处理页面的当前状态。

如果您确定您不关心响应，我建议您在客户端中止请求：

```
xhr.abort() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T18:19:10.790

如果在写入响应之前关闭连接客户端，则会引发错误说明。当响应从服务器返回时，您可以选择不处理它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T18:39:05.543

一旦请求发布到服务器，IIS 将开始执行服务器端代码。现在服务器可以决定是否需要执行代码。

在整个页面周期中，您可以检查 Guffa 提到的 Request.IsClientConnected 并终止执行。

但是，是的，这完全取决于您所拥有的场景。

希望能帮助到你。

# android - 在 Android 上获取 Adsense 收入

> ID：11350124
> 
> 赞同：0
> 
> 时间：2012-07-05T18:13:57.323
> 
> 标签：android, google-api, adsense, adsense-api

我是安卓开发新手。我目前正在尝试实施应用程序，查询 AdSense 收入。

我找到了[AdSense Management API v1.1 (Rev. 18) 1.7.2-beta](http://javadoc.google-api-java-client.googlecode.com/hg/apis/adsense/v1.1/index.html)。

问题是：是否有可能使用 API 浏览器密钥获得收入，是否有任何示例（因为此库中没有示例）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T00:14:33.413

AdSense 管理 API有一个[Java 命令行示例](https://github.com/googleads/googleads-adsense-examples/tree/master/java/v1.x)和一个[Android 示例](https://github.com/googleads/googleads-adsense-examples/tree/master/android)。两者都使用[用于 Google API 的 Java 客户端库](http://code.google.com/p/google-api-java-client)。

如需快速了解如何开始使用 AdSense Management API 和 Java 客户端库，您可以查看[此客户端库指南](https://developers.google.com/adsense/management/getting_started)。

希望这可以帮助！

# android - 在 AndroidManifest 上找不到活动

> ID：11350128
> 
> 赞同：1
> 
> 时间：2012-07-05T18:14:18.217
> 
> 标签：android

下午好，

我有一个调用另一个的活动。代码如下：

```
Intent i = new Intent(getApplicationContext(),Menu.class);
                    startActivity(i); 
```

当我运行应用程序时，出现以下错误：

**android.content.ActivityNotFoundException：找不到明确的活动类 {proyecto.uvigo/android.view.Menu}；您是否在 AndroidManifest.xml 中声明了此活动？**

我不明白出了什么问题，因为我已经说过，AndroidManifest 上的活动菜单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="proyecto.uvigo"
  android:versionCode="1"
  android:versionName="1.0">

<uses-permission android:name="android.permission.INTERNET" />

<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".Inicio"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
<uses-permission android:name="android.permission.INTERNET" />
<activity android:name=".Login"></activity>
<activity android:name=".Menu"></activity>
<activity android:name=".RecuperarPass"></activity>
<activity android:name=".Auxiliar"></activity>
<activity android:name=".MiPerfil"></activity>
<activity android:name=".CambiarPass"></activity>
</application> 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T18:17:40.577

这是因为您的代码`android.view.Menu`用作`Activity`而不是您的`Menu`类。试试这个：

```
Intent i = new Intent(getApplicationContext(), proyecto.uvigo.Menu.class);
startActivity(i); 
```

或者，您可以将您的`Menu`类重命名为类似`UvigoMenu`或`UvigoMenuActivity`在您的类和清单中，以避免这样的混淆。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:18:21.120

我不确定，但有问题`Unable to find explicit activity class {proyecto.uvigo/android.view.Menu};`。为什么`android.view.Menu`？请检查是否导入 android.view.Menu 类。如果是，请使用此

```
Intent i = new Intent(getApplicationContext(), proyecto.uvigo.Menu.class); 
```

或导入`proyecto.uvigo.Menu`而不是`android.view.Menu`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T18:19:10.640

启动菜单活动为：

```
Intent i = new Intent(getApplicationContext(), proyecto.uvigo.Menu.class);
startActivity(i); 
```

或者

```
Intent i= new Intent();
i.setComponent(new ComponentName("proyecto.uvigo", "proyecto.uvigo.Menu"));
startActivity(i); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T18:18:05.900

改变

```
<activity android:name=".Menu"></activity> 
```

到

```
<activity android:name=".Menu">
<intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
</activity> 
```

# cocoa - 获取强制退出窗口中登记的应用程序

> ID：11350129
> 
> 赞同：1
> 
> 时间：2012-07-05T18:14:19.877
> 
> 标签：cocoa, nsrunningapplication

我正在尝试检索在强制退出窗口中登记的所有应用程序。

当我使用以下代码行使用 runningAppications 方法时：

```
[[NSWorkspace sharedWorkspace] runningApplications]; 
```

它正在招募许多未在强制退出窗口中登记的额外应用程序。

任何人都可以建议我实现它的一些方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:26:18.723

以下数组包含“强制退出应用程序”窗口中列出的应用程序：

```
NSArray *apps = [[NSWorkspace sharedWorkspace] valueForKeyPath:@"launchedApplications.NSApplicationName"]; 
```

# typo3 - TYPO3 ext：同一页面上的评论和多个实例

> ID：11350131
> 
> 赞同：0
> 
> 时间：2012-07-05T18:14:24.950
> 
> 标签：typo3

我[`comments`](http://typo3.org/extensions/repository/view/comments)在一个页面上多次包含扩展名。每个`StoragePid`元素的 都是不同的。当我从一个实例按下提交按钮时`comments`，其他实例也会提交消息。有什么办法可以分开这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T12:25:56.147

我可以向您推荐我的扩展程序[`toctoc_comments`](http://typo3.org/extensions/repository/view/toctoc_comments)。它可以导入旧*评论*，并且可以在具有相同 StoragePid 的网页上多次使用。

新扩展是基于 AJAX 的，其功能比*comments*多出大约（估计...）500% 。*包括评级*、评论回复、网页预览。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T20:08:31.043

没有扩展名“tx_comments”。您似乎刚刚发布了表名。那么你到底指的是哪个扩展？

# core-data - Core Data，以字符串类型存储html

> ID：11350137
> 
> 赞同：1
> 
> 时间：2012-07-05T18:14:43.993
> 
> 标签：core-data

String 数据类型允许我存储多少信息？我正在寻找存储完整的 html 文本。这可能/推荐吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:41:51.253

CoreData 字符串将容纳很多。如果有的话，它应该只受底层实现的限制。我之前在核心数据中存储了完整的网页，完全没有问题。

如果我有更多时间，我会编写一个小循环，在核心数据中逐渐增长一个字符串，以查看是否达到了限制，如果是，那么该限制在哪里（也许我稍后会）。

# python - 有没有关于使用python进行端口转发的简单描述？

> ID：11350145
> 
> 赞同：6
> 
> 时间：2012-07-05T18:15:19.163
> 
> 标签：python, sockets, networking, port

我可以在同一台机器上使用简单的套接字通信

服务器：

```
import socket

s = socket.socket()
host = socket.socket()
port = 8000
s.bind((host,port))
s.listen(5)
while true:
     c,addr = s.accept()
     print 'got connection from', addr
     c.send('thank you for connecting')
     c.close() 
```

客户：

```
import socket 

s = socket.socket()
host=socket.gethostname()
port = 8000
s.connect((host,port))
print s.recv(1024) 
```

如果要在我的笔记本电脑和我工作的私人服务器之间进行通信，需要进行哪些更改？我从搜索中发现，端口转发是最好的方法，但没有找到任何关于如何去做的解释或教程。

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T10:24:03.947

如果您真的不需要在 python 中执行此操作，只需使用 netcat：-

[http://netcat.sourceforge.net/](http://netcat.sourceforge.net/)

端口转发或端口映射 在 Linux 上，NetCat 可用于端口转发。以下是在 NetCat 中进行端口转发的九种不同方法（但不支持 -c 开关 - 这些与 netcat 的“ncat”化身一起使用）：

```
nc -l -p port1 -c ' nc -l -p port2'
nc -l -p port1 -c ' nc host2 port2'
nc -l -p port1 -c ' nc -u -l -p port2'
nc -l -p port1 -c ' nc -u host2 port2'
nc host1 port1 -c ' nc host2 port2'
nc host1 port1 -c ' nc -u -l -p port2'
nc host1 port1 -c ' nc -u host2 port2'
nc -u -l -p port1 -c ' nc -u -l -p port2'
nc -u -l -p port1 -c ' nc -u host2 port2' 
```

资料来源：- [http://en.wikipedia.org/wiki/Netcat#Port_Forwarding_or_Port_Mapping](http://en.wikipedia.org/wiki/Netcat#Port_Forwarding_or_Port_Mapping)

它通常作为大多数 *nix 发行版的标准配置，并且还有一个 Win32 端口：-

[http://www.stuartaxon.com/2008/05/22/netcat-in-windows/](http://www.stuartaxon.com/2008/05/22/netcat-in-windows/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:07:51.577

如果您关心 Python 端口转发实现，有一个古老但很棒的 ActiveState 配方，它仅使用 Python 标准库（socket、asyncore）实现异步端口转发服务器。您可以在[code.activestate.com](http://code.activestate.com/recipes/483732-asynchronous-port-forwarding/)上四处寻找。

PS 还有一个脚本的线程版本的链接。

# php - 提交后如何在yii中保留值

> ID：11350153
> 
> 赞同：2
> 
> 时间：2012-07-05T18:16:03.320
> 
> 标签：php, yii

在 PHP YII 中做一个搜索表单，我需要在其中输入 2 个日期字段 Startdate 和 enddate，提交后我将从 contacteddate 介于这些开始日期和结束日期之间的表中获取所有记录。

问题是提交后我的文本框值消失了。提交后如何保留？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T07:45:32.220

您可以使用 ajax 来检索结果，而不是默认提交，这样您的过滤器值就不会改变。默认提交行为加载（导航）到 url，因此您的值消失。

您可以使用它[`CHtml::ajaxSubmitButton()`](http://www.yiiframework.com/doc/api/1.1/CHtml#ajaxSubmitButton-detail "http://www.yiiframework.com/doc/api/1.1/CHtml#ajaxSubmitButton-detail")来轻松实现此功能。一个样品：

```
echo CHtml::ajaxSubmitButton(
    'AjaxSearch', // label
    $url,// url that will search
    array('update'=>'#resultdiv'),// the element with id 'resultdiv' will be updated with the search result
    $htmlOptions 
); 
```

# jquery - 使用具有 Jquery 的模板更新视图的 Grails remoteFunction 可以识别模板中的元素

> ID：11350154
> 
> 赞同：3
> 
> 时间：2012-07-05T18:16:05.173
> 
> 标签：jquery, ajax, templates, grails

我有一个带有按钮的视图，当它被单击时，它会调用 remoteFunction(ajax Call) 以使用具有与之关联的 jQuery 函数的模板更新 div。但是那个 jQuery 函数不能识别更新后的 div 中的元素。因此 jQuery 函数无法正常工作以呈现视图。

**我的观点**看起来像

```
<input type="button" value="Something" id="someButton" class="button" onclick="someFunction()"/>
<div id="updateDiv"> </div> 
```

单击按钮时调用的**js**看起来像

```
function someFunction() {
    ${remoteFunction(controller:'myController', action:'someAction',update: 'updateDiv'
    )};     
    functionForJQuery();
}
function functionForJQuery(){
    var $someThing = $('.someClassName');
} 
```

在**myController**中，

```
def someAction= {
    //doSomething
    render (view:"/templates/_myTemplate")
} 
```

最后**_myTemplatetemplate**，

```
<g:textField class="someClassName" value="someValue" /> 
```

但就像我上面说的，当调用 functionForJquery 时，它不识别那个 textField。有人可以帮我解决这个问题吗？

而且我也尝试过 onComplete，或者在 remoteFunction 之后。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T20:03:46.073

查看要在选择器中使用的 jQuery `.on`（jQuery 1.7 或更高版本）函数或`.delegate`（1.7 之前的）函数。这些将处理程序附加到页面首次加载或动态添加时存在的选定元素。像这样的东西：

```
function functionForJQuery(){
    $('body').delegate(".someClassName", "click", function() {
       //do whatever here
    });
} 
```

这会将函数附加到事件的`body`with 类中的元素。`someClassName``click`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T13:10:22.060

在您的控制器中，

尝试作为

```
 def someAction= {
  render template:"/templates/_myTemplate", model:model;
  } 
```

代替

```
 def someAction= {
//doSomething
render (view:"/templates/_myTemplate")
} 
```

祝你好运

# java - java中的JFrame jframe.add(button);

> ID：11350161
> 
> 赞同：4
> 
> 时间：2012-07-05T18:16:35.100
> 
> 标签：java, swing

我必须写： jframe.getContentPane().add(button);

但我发现当我只写它时它也有效

jframe.add(按钮);

这两种方法有什么区别？写 JFrame.getContentPane().add(button); 是否有利？?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:20:19.823

这是一个品味问题。我总是使用 getContentPane().add(..)，因为我认为它更容易阅读/知道实际发生了什么

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:26:25.000

尝试这个........

**在 Java 1.5 到来之前**，使用了 jframe.getContentPane().add(button) ......这是合法的做法......

**但是从 Java 1.5 起，包括 myframe.add(button)... 也是一种合法的做法。** 就像**使用 Classname 访问静态变量是合法的做法一样。 ..但是您仍然可以使用类实例访问静态变量...**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T18:23:33.093

因此，您应该知道应该将诸如等元素`JButton`添加`JTextArea`到`Container`您的方法中：

```
getContentPane() 
```

返回`Container`此帧的对象。因此，这两种方法的工作方式相同，但您应该使用第二种方法。

如果您将拥有包含许多元素的大型*应用程序，则第一种方法的**可读性*较差，通常建议使用第二种方法。

区别不是：

> Jframe.add() - 将指定的组件附加到此容器的末尾。这是 Container.addImpl 的一种便捷方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T18:31:25.327

[类 javadoc`JFrame`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFrame.html)对此很清楚

> JFrame 类与 Frame 略有不兼容。与所有其他 JFC/Swing 顶级容器一样，JFrame 包含一个 JRootPane 作为其唯一的子项。根窗格提供的内容窗格通常应包含 JFrame 显示的所有非菜单组件。这与 AWT Frame 的情况不同。作为方便的 add 及其变体，remove 和 setLayout 已被覆盖以根据需要转发到 contentPane。这意味着您可以编写：

```
 frame.add(child); 
```

> 并且孩子将被添加到 contentPane。

# c - 从 C 语言中的 XML 标记中获取值

> ID：11350164
> 
> 赞同：0
> 
> 时间：2012-07-05T18:16:51.867
> 
> 标签：c, linux

如何从 xml 标签中提取值？下面是存储在指针变量响应中的 XML。

```
<Response>
<ID>App1</ID>
<operationID>654164615</operationID>
<mainReturnResult>
<returnCode>2000</returnCode>
<returnString> Success – Successful Result </returnString>
</mainReturnResult>
<totalDuration>647</totalDuration>
<Result>
<jobID>job1</jobID>
<mainReturnResult>
<returnCode>2000</returnCode>
<returnString> Success – Successful Result </returnString>
</mainReturnResult>
<duration>78</duration>
/*still more xml tags*/

-Data.to.be.taken
        data comes here which have to extracted
-Done.with.data 
```

我只需要返回代码和 xml 末尾的数据。我正在使用 strstr 来获取标签返回码的值。但是当我的朋友看到​​我这样做时，他说这是一种不好的做法。但是，我只需要 1\. 返回代码来了解状态和 2\. 从 xml 中提取数据。

那么，您能否建议我在不使用任何库的情况下进行这两项活动的有效方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:20:10.267

只需解析它。

虽然我已经编写了很多代码来解析这样的东西（主要是在 C# 中），但您可以在这里做一些非常简单的事情。

只需扫描文本即可`<returnCode>`。您想要的文本在此之后开始。它在下一次出现时结束`</returnCode>`。简单的。

# mysql - 使用大量 SQL 调用加速慢速函数

> ID：11350167
> 
> 赞同：0
> 
> 时间：2012-07-05T18:17:00.703
> 
> 标签：mysql, ruby-on-rails, ruby

我需要生成一个报告，该报告返回给定时间范围内的一组数字。

例如，我需要返回给定月份的观看分钟数。这是我现在运行的

```
presentation = Presentation.find(1)
presentation.video.stats.minutes_by_date(Date.new(2012,6,1),Date.new(2012,6,30))

def self.by_date(start_date,end_date)
    vals = Array.new
    (start_date..end_date).map { |date|
      yesterdays_stat = daily_watched(date.yesterday)
      todays_stat = daily_watched(date)

      if todays_stat > 0
        if yesterdays_stat > 0
          difference = todays_stat - yesterdays_stat
        else
          difference = todays_stat
        end
        watched_in_meg = (difference / 1024).round(2)
        vals.push (watched_in_meg / first.video.meg_per_minute).round(2)
      else
        vals.push 0
      end
    }
    vals
  end

  def self.daily_watched(date)
    # get the total bytes for the from both flash and mp4
    total_bytes = 0
    bytes = where(["DATE(generated_date) = ?", date]).group("kbytes")
    .order('generated_date')
    bytes.each do |byte|
      total_bytes += byte.kbytes
    end
    total_bytes
    # Get the bytes of both flash and mp4
  end 
```

输出需要如下所示：

`[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 54.09, 54.09, 54.09, 54.09, 54.09, 54.09, 54.09, 54.09, 54.09, 54.09, 0]`

问题是每个演示文稿必须运行 30 次，而我有 10 到 500 个演示文稿。

有没有办法提高效率？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:29:33.517

您可以从通过单个查询获取所有日期的统计信息开始，然后通过一次遍历数组来计算差异。

查询大致如下所示：

```
result = Thing.select("DATE(generated_date) as date, SUM(kbytes) as sum_kbytes").group("DATE(generated_date)").where...
result.each{|i| puts "#{i.date} #{i.sum_kbytes}"} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:24:47.437

预先计算每天每个演示文稿的差异 var。然后从这个函数中的预先计算的表中读取。

# spring-mvc - @Transactional 似乎没有创建任何事务

> ID：11350175
> 
> 赞同：3
> 
> 时间：2012-07-05T18:17:12.420
> 
> 标签：spring-mvc, postgresql-9.1, transactional

我正在尝试在 Spring MVC 应用程序中使用 @Transactional 来获得原子性。问题是似乎每当调用带注释的函数时，它都不会创建事务。这是我目前的设置：

应用上下文：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd" >

    <!-- Root Context: defines shared resources visible to all other web components -->

    <tx:annotation-driven transaction-manager="txManager"/>

    <bean id="txManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" >
        <property name="driverClassName" value="org.postgresql.Driver" />
        <property name="url" value="jdbc:postgresql://localhost:5432/qas" />
        <property name="username" value="postgres" />
        <property name="password" value="P0stgr3s" />   
    </bean>

    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate" >
        <constructor-arg name="dataSource" ref="dataSource" />
    </bean>

</beans> 
```

控制器文件：

```
package com.silverthorn.txtest;

import java.text.DateFormat;
import java.util.Date;
import java.util.Locale;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;

/**
 * Handles requests for the application home page.
 */
@Controller
public class HomeController {

    private static final Logger logger = LoggerFactory.getLogger(HomeController.class);

    @Autowired
    private TagsDAO tagsDAO;

    /**
     * Simply selects the home view to render by returning its name.
     */
    @RequestMapping(value = "/", method = RequestMethod.GET)
    public String home(Locale locale, Model model) {
        logger.info("Welcome home! the client locale is "+ locale.toString());

        Date date = new Date();
        DateFormat dateFormat = DateFormat.getDateTimeInstance(DateFormat.LONG, DateFormat.LONG, locale);

        String formattedDate = dateFormat.format(date);

        model.addAttribute("serverTime", formattedDate );

        return "home";
    }

    @RequestMapping(value="/tags", method=RequestMethod.GET)
    public @ResponseBody ResponseDocument addTags(@RequestParam("tag") String[] tags) {
        ResponseDocument doc = new ResponseDocument();

        try {
            tagsDAO.addTags(tags);
        } catch ( RuntimeException e ) {
            doc.setError("Could not add tags");
        }

        return doc;
    }

} 
```

和 DAO 文件：

```
package com.silverthorn.txtest;

import java.util.HashMap;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

@Repository("tagsDAO")
public class TagsDAO {

    @Autowired 
    private NamedParameterJdbcTemplate jdbcTemplate;

    @Transactional(propagation = Propagation.REQUIRED)
    public void addTags(String[] tags) {
        Map<String, Object> params = new HashMap<String, Object>();
        for(String tag : tags) {
            params.put("tag", tag);
            jdbcTemplate.update("INSERT INTO qas.tags (tag) VALUES (:tag)", params);
        }
    }

} 
```

以下是事务应该失败时的输出日志示例：

```
DEBUG: org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
DEBUG: org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO qas.tags (tag) VALUES (?)]
DEBUG: org.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
DEBUG: org.springframework.jdbc.core.JdbcTemplate - SQL update affected 1 rows
DEBUG: org.springframework.jdbc.datasource.DataSourceUtils - Returning JDBC Connection to DataSource
DEBUG: org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL update
DEBUG: org.springframework.jdbc.core.JdbcTemplate - Executing prepared SQL statement [INSERT INTO qas.tags (tag) VALUES (?)]
DEBUG: org.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
DEBUG: org.springframework.jdbc.datasource.DataSourceUtils - Returning JDBC Connection to DataSource
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [org/springframework/jdbc/support/sql-error-codes.xml]
INFO : org.springframework.jdbc.support.SQLErrorCodesFactory - SQLErrorCodes loaded: [DB2, Derby, H2, HSQL, Informix, MS-SQL, MySQL, Oracle, PostgreSQL, Sybase]
DEBUG: org.springframework.jdbc.support.SQLErrorCodesFactory - Looking up default SQLErrorCodes for DataSource [org.apache.commons.dbcp.BasicDataSource@704fb]
DEBUG: org.springframework.jdbc.datasource.DataSourceUtils - Fetching JDBC Connection from DataSource
DEBUG: org.springframework.jdbc.datasource.DataSourceUtils - Returning JDBC Connection to DataSource
DEBUG: org.springframework.jdbc.support.SQLErrorCodesFactory - Database product name cached for DataSource [org.apache.commons.dbcp.BasicDataSource@704fb]: name is 'PostgreSQL'
DEBUG: org.springframework.jdbc.support.SQLErrorCodesFactory - SQL error codes for 'PostgreSQL' found
DEBUG: org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator - Translating SQLException with SQL state '23505', error code '0', message [ERROR: duplicate key value violates unique constraint "tags_pkey"
  Detail: Key (tag)=(hello) already exists.]; SQL was [INSERT INTO qas.tags (tag) VALUES (?)] for task [PreparedStatementCallback] 
```

从日志文件中可以看出，似乎没有创建事务。在没有创建事务的情况下，显然无法回滚对数据库的更新。我已经把头撞到墙上了 2 天了，并且无法更接近获得所需的行为。我能得到的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:07:16.793

Just to make sure - if you don't have CGLIB libraries in your path that could be the issue. You will require CGLIB as your @Repository does not have an interface and Spring will create a CGLIB proxies for @Transactional annotated classes in that cases(which fails if CGLIB is not present). You may use either CGLIB or aspectj proxies.

# jquery - 如何从表中删除除前两个和最后一个之外的所有行？

> ID：11350179
> 
> 赞同：11
> 
> 时间：2012-07-05T18:17:35.847
> 
> 标签：jquery, html-table, jquery-selectors

我已经看到了很多关于如何选择除第一行和最后一行之外的所有内容的问题，但我想知道如何选择除前两行和最后一行之外的所有内容。现在我可以选择除前两个之外的所有内容：

```
$("#sometable").find("tr:gt(1)").remove(); 
```

我也需要一些方法来获得最后一个。也许某种方式可以结合

```
:not(:last) 
```

?

我对 jQuery 相当陌生，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-05T18:20:54.303

这就是你需要的：

```
$("#sometable").find('tr').slice(2,-1).remove() 
```

[**演示**](http://jsfiddle.net/bQhQ3/)

我和[@Evan的解决方案的](http://jsperf.com/removingtablerows)[jsperf](https://stackoverflow.com/users/483349/evan-mulawski)。

![在此处输入图像描述](../Images/6c9f58febcb8d42b214ceb129194afc0.png)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-07-05T18:19:58.217

只需组合选择器：

```
$("#sometable").find("tr:gt(1):not(:last)").remove(); 
```

[JSFiddle](http://jsfiddle.net/gqnQC/)

# xml - 使用 XML 的 Silverlight 数据库

> ID：11350189
> 
> 赞同：1
> 
> 时间：2012-07-05T18:18:05.720
> 
> 标签：xml, silverlight, linq

我正在将旧应用程序移植到 Silverlight（第 5 版）。该应用程序有许多带有组合框的表单，这些组合框的项目是有条件地填充的。这在旧应用程序中通过存储在应用程序中的 Access 数据库进行处理，并使用 DAO 对象库进行查询。我在想 Silverlight 会让我模仿这个功能，但我发现 Silverlight 不允许本地数据库存储和操作（如果我错了，请纠正我）。我无法通过 Web 服务路线进行数据库操作，因为该应用程序必须在 Mac 和 Windows 上脱机工作并且脱离浏览器。

所以，我正在寻找替代品。看来我可以使用 XML 和 LINQ 来实现一种准数据库。我的问题是它仍然可以在 Mac 和 Windows 平台上运行吗？也欢迎任何其他替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:50:29.863

你可以使用 siaqodb (http://siaqodb.com/) 这个是商业的。另一种选择[http://sterling.codeplex.com/](http://sterling.codeplex.com/)

这将存储在您的隔离存储中，但如果您想将其保存在用户硬盘中，您可以使用 OOB 受信任的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:51:31.970

感谢您提供的所有建议。我将在对问题的评论中接受布拉德的建议并使用独立存储。虽然我希望我可以只使用 COM 和 MS SQL CE，但我需要跨平台。我也希望我可以只使用第三方解决方案，但我们正在努力不依赖第三方软件并且也远离额外成本。

Linq to XML 被证明非常有用：http: [//msdn.microsoft.com/en-us/library/bb387087.aspx](http://msdn.microsoft.com/en-us/library/bb387087.aspx)

# php - 这有什么问题？

> ID：11350210
> 
> 赞同：-1
> 
> 时间：2012-07-05T18:19:43.113
> 
> 标签：php

有人可以帮我修复这段代码吗？我收到一些奇怪的错误：

```
Wrong parameter count for in_array() in /home/dearyout/public_html/lib/header.php on line 128 
```

代码：

```
<?php 
  $pages = array("random-number-generator", "calculator"); 
    if (in_array(stripos($_SERVER['REQUEST_URI'], $pages))) { 
    echo "active"; 
   } 
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:21:16.043

您对括号的使用不正确：

```
<?php 
  $pages = array("random-number-generator", "calculator"); 
    if (in_array(stripos($_SERVER['REQUEST_URI']), $pages)) { 
    echo "active"; 
   } 
?> 
```

这段代码不会做你想做的事，但至少你的问题得到了回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:43:51.203

我们可以轻松地消除错误（请参阅@John_Conde 的回答），但这里更大的问题是您的代码没有意义。

您*似乎*正在尝试在 REQUEST_URI 中的任何位置查找两个字符串之一。但这不是 URI 的结构方式。

这是您可能的意思的严格翻译。然后我会解释为什么它是错误的。

```
function stripos_array($haystack, $needles, $offset=0) {
    foreach ($needles as $needle) {
        if (FALSE!==stripos($haystack,$needle,$offset)) {
            return True;
        }
    }
    return False;
}

$pages = array("random-number-generator", "calculator");
if (stripos_array($_SERVER['REQUEST_URI'], $pages) {
     echo 'active';
} 
```

这怎么可能是您正在做的事情的正确实施？看一些样本：

```
stripos_array('/not-a-random-number-generator', $pages) // true!
stripos_array('/some/other/part/of/the/site?searchquery=calculator+page', $pages); // true!
stripos_array('/random-number-generator/calculator', $pages); // true!! but meaningless!! 
```

我强烈怀疑您真正想要做的是使用一些*真正的*url 路由。这里有两种可能性：

1.  使用查询参数；网址看起来像`http://example.org/index.php?page=calculator`

    ```
    if (isset($_GET['page']) && in_array($_GET['page'], $pages)) .... 
    ```

2.  使用路径段；网址看起来像`http://example.org/index.php/calculator`

    ```
    $path = trim($_SERVER['PATH_INFO'], '/');
    $pathsegments = explode('/', $path);
    if (isset($pathsegments[0]) && in_array($pathsegments, $pages)) ... 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T18:22:33.523

您只需将一个参数传递给`in_array`函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T18:22:48.967

你来做这件事：

```
<?php 
  $pages = array("random-number-generator", "calculator"); 
  $variable = stripos($_SERVER['REQUEST_URI'], $pages);
    if (in_array($variable)) { 
    echo "active"; 
   } 
?> 
```

什么时候`in_array()`需要两个参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T18:31:48.993

猜测您想检查是否`$_SERVER['REQUEST_URL']`包含来自 的字符串之一`$pages`，您可能需要以某种方式遍历这些字符串。也许是这样的：

```
<?php 
    $pages = array('random-number-generator', 'calculator');
    foreach($pages as $p) {
        if (stripos($_SERVER['REQUEST_URI'], $p)!==false) echo "active";
    } 
```

# ssl - 从 .crt 安装 ssl - 如何从此文件中获取公共和私有？

> ID：11350211
> 
> 赞同：1
> 
> 时间：2012-07-05T18:19:46.780
> 
> 标签：ssl, ssl-certificate

我得到了一个如下所示的 .crt 文件：

```
-----BEGIN CERTIFICATE-----
...etc.etc....
-----END CERTIFICATE----- 
```

在我的 nginx 设置中，我有一个公钥和私钥文件的位置。

如何从中生成这两个文件？这就是它通常的工作方式吗？

# jar - 为什么我的 JAR 文件没有创建序列化？

> ID：11350212
> 
> 赞同：0
> 
> 时间：2012-07-05T18:19:50.450
> 
> 标签：jar

我从一个 Java 项目创建了一个 jar 文件。我现在什至可以运行它，但是当我从JAR 文件之外的*普通*二进制代码运行程序时，它不会保存正确存储的序列化文件。

当你有一个jar文件时你不能创建新文件吗？

这就是我编写文件的方式：

```
FileOutputStream fileOut = new FileOutputStream("data/vocabulary.ser");
ObjectOutputStream out = new ObjectOutputStream(fileOut);
out.writeObject(this);
out.close();
fileOut.close(); 
```

我的 JAR 文件如下所示：

```
META-INF
    MANIFEST.MF
name
    stefankoch
        … 
```

其中 name/stefankoch/... 是我的项目命名空间。

我尝试在 jar 文件（根目录）中创建一个`data`目录，但它也不起作用。`data`jar 文件所在的目录中还有一个目录，但也没有使用该目录。

如何允许 jar 文件创建文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T16:36:36.610

基本上，您不应该将用户输入的信息添加到 JAR 文件中，它们属于**用户的主目录**。

这可以阅读

```
System.getProperty("user.home") 
```

用户主目录中的文件也可以在 JAR 文件中使用。

# python - 正则表达式删除第一组零

> ID：11350214
> 
> 赞同：1
> 
> 时间：2012-07-05T18:20:00.920
> 
> 标签：python, regex

我有以下示例字符串，我只想删除一组零。

示例字符串是

> AAL000007200100000787777388300000

我只想删除第一组零，其余的保持不变。我想结束

> AAL7200100000787777388300000

我已经尝试了以下方法，但它总是太贪婪并且也需要第二组零！

```
#!/usr/bin/env python3
import re

suffixdrop = re.split("\B0+\B", "AAL000007200100000787777388300000", re.I)
if suffixdrop: #found a suffix here
        print(suffixdrop) 
```

打印的结果是

> ['AAL'，'72'，'100000787777388300000']

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:25:32.787

`\B`匹配单词边界的反义词，这听起来不像你想要的。

如果要删除非数字字符后的第一组连续 0，请尝试以下操作：

```
In [7]: print x
AAL000007200100000787777388300000

In [8]: print re.sub("^(\D+)0+", r"\1", x)
AAL7200100000787777388300000 
```

`re.sub("^(\D+)0+", r"\1", x)`表示“匹配行首后跟任意数量的非数字字符，后跟任意数量的 0 字符”并将其替换为第一组非数字字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:26:12.723

我会这样做：

```
re.sub(r'0+', '', "AAL000007200100000787777388300000", count=1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T18:33:09.683

`(?<=^\D*?)(0+)(?=.*$)`用空字符串替换正则表达式的匹配

# python - 基于第一个字母的映射字符串

> ID：11350227
> 
> 赞同：1
> 
> 时间：2012-07-05T18:20:41.613
> 
> 标签：python

我有一个要根据项目名称的字母混淆的项目列表。例如：

```
ABC_Classified
BXY_Classified
ZX_Classified 
```

钥匙：

```
A -> Adam
B -> Bale
Z -> Talking 
```

结果：

```
ABC_Classified ==> Adam
BXY_Classified ==> Bale
ZX_Classified ==> Talking 
```

第一种方法是非常重复的，为此有 26`if/elif`条语句。

完成上述任务的最佳和最简洁的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:30:08.527

您可以使用字典将字母映射到名称，然后捕获`KeyError`不存在的键，`IndexError`以防传入空字符串。

```
names = {
    'A': 'Adam',
    'B': 'Bale',
    ...
    'Z': 'Talking'
}

def obfuscate(s):
    try:
        return names[s[0]]
    except (KeyError, IndexError):
        return None 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:26:22.443

使用字典？

```
mapping = {
    'A': 'Adam',
    'B': 'Bale',
    'Z': 'Talking'
    # etc...
}

name = mapping[your_string[0]] 
```

如果查找失败，它会抛出一个 KeyError

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T18:32:38.400

我必须说，我不确定这种混淆的确切目的是什么，但这和你要找的一样吗？

```
# the name strings
names = ["ABC_Classified","BXY_Classified","ZX_Classified"]

# the letter-to-obfuscated string mappings
key = { "A":"Adam", "B":"Bale", "Z":"Talking" } 

# doing a lookup
key[ names[0][0] ] # ABC_Classified ==> Adam

# optionally create a new, direct mapping
dict( [ (obf, key[ obf[0] ]), for obf in names ] )
# {'BXY_Classified': 'Bale', 'ABC_Classified': 'Adam', 'ZX_Classified': 'Talking'} 
```

# objective-c - 每个文件都是用 Objective-C 编译的吗？

> ID：11350228
> 
> 赞同：2
> 
> 时间：2012-07-05T18:20:44.070
> 
> 标签：objective-c, xcode, compiler-construction, clang

我想知道，当我在 Objective-C 中构建项目时编译了哪些代码 - 我的项目中的每一行代码，或者只有那些从 main.c 调用的代码，然后从那些被调用的代码他们？

我的意思是，编译器是否将项目与简单连接的域分开并编译链接到主域的域，还是只编译所有域？

谢谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:25:51.150

编译器不对您的代码执行语义分析。它完全按照您告诉它编译的内容进行编译——Xcode 通常以将每个文件编译到您的应用程序中的方式调用编译器。但是，没有必要编译/链接不使用类/函数的文件；尽管不编译使用类/函数的文件会导致链接错误（也就是说，编译器在将最终可执行文件的目标代码放在一起时将无法在二进制文件中找到某些符号）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T18:26:45.370

项目中的所有文件都将被编译，除了不包含在任何 .m 文件中的头文件，或者有条件地禁止包含的头文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T18:43:18.563

一个 Xcode 项目由一个或多个目标组成。

对于您可以定义的每个目标，编译了哪些 *.m 文件

[![编译目标](../Images/01c5efe6c1df63cccc24c54b9c3a84ef.png)](https://i.stack.imgur.com/TuKUe.jpg)

如果您将新文件添加到项目中，您可以指定将添加到哪个目标。（其实这是我经常看到的一个地方，主要目标没有被选中——小心）

[![在此处输入图像描述](../Images/d86ac79575c4c537103fe60367ac4516.png)](https://i.stack.imgur.com/OpDFY.jpg)

# sql - 获取 TIME(7) 的平均值

> ID：11350230
> 
> 赞同：4
> 
> 时间：2012-07-05T18:20:55.300
> 
> 标签：sql, sql-server, tsql, average

```
ProcessTime: 00:00:00.0000012
RegexResolveTime: 00:00:00.0000421
MessageResolveTime: 00:00:00.0001269 
FullProcessTime: 00:00:00.0001734 
```

好的，我上面有 4 列 datatype `Time(7)`。我需要获取这些单独列的所有条目的平均值，但`Time(7)`它不是`AVG`运算符的有效类型！

如何获得一`Time(7)`列的平均值？

我要补充一点，这些是时间跨度，而不是离散的时间点，即使 SQL 服务器认为它们是这样的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:34:03.890

您不能平均 TIME，因为 TIME 代表一个时间点，而不是持续时间。我建议两种方法之一。

1.  **首选方法**：将持续时间存储为整数，以毫秒、微秒、纳秒为单位，你有什么。如果需要，这将使您更加精确。

2.  来回应用转换，以便您可以平均从午夜开始的增量而不是实际时间值。

```
DECLARE @x TABLE (ProcessTime TIME(7));

INSERT @x VALUES ('00:00:00.0000012'), ('00:00:00.0000016');

SELECT DATEADD(NANOSECOND, AVG(DATEDIFF(NANOSECOND, '00:00:00.0000000', ProcessTime)), 
  CONVERT(TIME, '00:00:00.0000000'))
FROM @x; 
```

结果：

```
00:00:00.0000014 
```

但这在你看来是不是错了？如果您不存储时间点并且只关心持续时间，请存储持续时间。显示时始终可以将其格式化为时间。

# selection - 随机通用抽样应如何与遗传编程中的精英主义相结合？

> ID：11350231
> 
> 赞同：1
> 
> 时间：2012-07-05T18:20:59.203
> 
> 标签：selection, genetic-algorithm, rank, genetic-programming, stochastic

实施了排名选择 (“RS”) 和随机通用抽样 (“SUS”) [ *Baker，1987* ] 我现在想介绍精英主义（将最适合的上一代成员重新引入下一代）以观察其声称的好处.

有提到 SUS 和精英主义的结合，例如 Melanie Mitchell 在*An Introduction to Genetic Algorithms*中的引用。但是，我遇到了一个（非常模糊的）在线参考，建议避免结合使用这两种方法。我想知道在后一种情况下，不正确的实现是否是两种方法不兼容的原因。

因此，如果对 GP 更有经验的人能提供关于如何结合 SUS 和精英主义的描述，我将不胜感激。根据我对这两种机制的了解，逻辑实现是从种群大小 N 中选择 K 最适合的个体，然后对整个排名种群（包括 K 精英）执行 SUS，但只进行 NK 选择（而不是 N 选择将在没有精英主义的情况下发生）。

有人能够确认这个提议的实现在数学上是合理的，以及推荐的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T02:32:47.953

将精英主义和随机通用抽样结合起来当然没有问题。我建议您阅读一篇论文[为什么在多目标遗传算法中使用精英主义和共享？](ftp://ftp.cs.bham.ac.uk/.snapshot/hourly.4/pub/authors/W.B.Langdon/biblio/gecco2002/GA310.pdf)它专门解决了在 SUS 案例中使用精英主义的好处。

此外，因为您似乎感兴趣，所以我知道另一篇论文更侧重于您可能感兴趣的选择函数的理论背景（他们将 SUS 称为轮盘赌选择）[选择对噪声适应度优化的影响](http://paul.rutgers.edu/~sgoschin/papers/GECCO_2011.pdf)

祝你好运！

# string - 如何在 CMD 中检查并执行多项其他操作

> ID：11350232
> 
> 赞同：2
> 
> 时间：2012-07-05T18:21:04.300
> 
> 标签：string, if-statement, cmd, windows-console

===== CMD 批处理文件=====

我正在尝试检查一个变量==“字符串”，然后回显消息并运行程序，否则它必须退出出口 1，如果有其他任何东西甚至是空的。

我已经尝试了很多并使用了谷歌，但我似乎不断收到语法错误和意想不到的错误，CMD 确实很难解决，尽管它很旧但功能强大。

所以我想了解的是我的括号或结构有什么问题，因为它告诉我（是意外或语法错误或尚未预料到......讨厌。

我的结构如下：

```
echo off
if "%1"=="imre" goto imre (
echo found parameter "%1"
) else if NOT %1=="imre" echo you failed 
```

只是不工作；我明白了

> （出乎意料

如果我尝试调整它，还有其他语法错误......

我想要的只是：（这是我写的，但它不起作用）

```
if %variable%=="hello" (
echo hello is correct 
echo now lets start this program 
start /w excel.exe
) else (
exit 1
) 
```

这不起作用，我不明白我做错了什么。这是正在尝试实现的 CMD Batch

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:43:48.830

是的，你的报价不一致。但我相信 goto 导致了这个问题，因为它领先于你想做的其他事情。

尝试这个：

```
echo off
if "%1"=="imre" (
echo found parameter "%1"
goto imre 
) else if NOT "%1"=="imre" echo you failed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:39:09.470

您的`%variable%`变量实际上包含`"hello"`还是仅包含`hello`？

如果你的参数没有引号，你应该使用这个：

```
if "%variable%"=="hello" (
    echo hello is correct 
    echo now lets start this program 
    start /w excel.exe
) else (
    exit 1
) 
```

这样，如果您传入`Hello`，`%variable%`您实际上是在比较`"hello" == "hello"`。

# c# - C#语法糖类似于SQL的IN比较？

> ID：11350233
> 
> 赞同：3
> 
> 时间：2012-07-05T18:21:08.840
> 
> 标签：c#, syntactic-sugar

我经常发现自己在写类似于以下的条件句：

```
if(Path.GetExtension(filename) == ".pdf" || Path.GetExtension(filename)== ".doc")
{
    // do something
} 
```

每个我想测试的文件扩展名调用一次 Path.GetExtension() 似乎有点多余。当然，我可以做这样的事情：

```
string fileExtension = Path.GetExtension(filename);
if(fileExtension == ".pdf" || fileExtension == ".doc")
{
    // do something
} 
```

但考虑到我只使用 fileExtension 进行比较，没有别的，为文件扩展名声明一个变量似乎不是很优雅。

在 SQL 中，我可以使用 IN 运算符：

```
SELECT file FROM table WHERE fileExtension IN(".pdf", ".doc") 
```

这使我可以在不重复的情况下进行测试。

C# 是否提供任何类似于 SQL 的语法糖，我不必重复被比较的变量或相等运算符？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T18:22:09.617

只需创建一个新的内联数组并调用`Contains`：

```
if((new[]{ ".pdf", ".doc"}).Contains(fileExtension))
{
    // Do Something
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T18:30:43.643

如果您关心可读性，您可以选择

```
switch (fileExtension)
{
    case ".pdf":
    case ".doc":
        // do something                
        break;
} 
```

如果您必须以不同的方式处理其他扩展，这也是未来的证明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T18:23:56.210

贾斯汀的回答肯定会做到这一点。但对我来说似乎有点矫枉过正。当然，除非您已经在集合中拥有要比较的扩展，否则与像在第二个示例中那样直接比较它们相比，似乎效率要低得多。（您的第一个示例是 IMO 的错误方法。）

但请注意，像在第二个示例中那样将结果存储在变量中可能非常有效。如果该变量仅用于随后的比较，编译器可以进行各种优化。它甚至可能根本不需要创建变量。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-31T22:32:16.173

虽然我看到您已经接受了解决方案，但我想提交我的解决方案，因为我认为它更符合您的意图。

```
public static bool In(this object source, params object[] collection)
{
    return collection.Contains(source);
} 
```

用法：

```
if(Path.GetExtension(filename).In(".pdf", ".doc"))
{
    //Do something
} 
```

希望有帮助。

编辑：在文件扩展名中添加句点以准确反映“GetExtension”的功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T18:33:43.733

如果你真的想让它读起来像 SQL 运算符，你可以使用扩展方法。

```
public static bool In(this object o, IEnumerable c)
{
    foreach (object i in c)
    {
        if (i.Equals(o))
        {
            return true;
        }
    }
    return false;
} 
```

用法：

```
string fileExtension = ".pdf";
string[] acceptedFileExtensions = new[] { ".pdf", ".doc" };

if (fileExtension.In(acceptedFileExtensions))
{
    // Do something
} 
```

# javascript - Google 在打开时映射 infowindow 事件

> ID：11350234
> 
> 赞同：17
> 
> 时间：2012-07-05T18:21:13.440
> 
> 标签：javascript, jquery, google-maps, google-fusion-tables

嗨，我正在使用谷歌融合表和谷歌地图，问题是我的标记正确显示，但我想在 inforwindow 中插入一些图像。所以问题是我查询这些标记的位置，这些标记可以有很多类别（这就是我不能使用合并表的原因）。当用户点击标记时，信息窗口会显示并显示标记上的信息。它曾经只包含类别的文本，但我想从每个类别中检索图标以将其显示在信息窗口上。问题是第二个查询花费的时间比显示信息窗口的时间长。所以我做了一个蹩脚的修复，我补充说

```
$('#infoWindowsCatDer').append(info); 
```

在第二个查询结束时，所以我想您可以看到问题，如果窗口显示时间比查询长一点会发生什么。这是应该由事件处理的事情，对吗？

是否有活动

```
lastWindow.open(map); 
```

那么当信息窗口完全打开时，它可以附加图像吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-22T01:32:18.153

InfoWindow 对象在`domready`附加（完全加载）到 DOM 时触发事件事件。您可以在 API 文档中看到这一点：[https ://developers.google.com/maps/documentation/javascript/reference#InfoWindow](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)

然后，您可以有一个像下面这样的侦听器，在它自己加载后将内容加载到 infoWindow 中：

```
var referenceToInfoWindow = new google.maps.InfoWindow({content: 'My info' });

google.maps.event.addListener(referenceToInfoWindow, 'domready', function(){
    //code to dynamically load new content to infowindow
    //for example:
    //    var existing_content = referenceToInfoWindow.getContent();
    //    var new_content = "...";
    //    referenceToInfoWindow.setContent(existing_content + new_content);
}); 
```

# c# - Crystal Report 的动态查询，“没有可用的有效报表源。”

> ID：11350237
> 
> 赞同：1
> 
> 时间：2012-07-05T18:21:27.813
> 
> 标签：c#, asp.net, crystal-reports-2010

我正在尝试使用动态数据源创建 Crystal Report。当我单击报表按钮时，水晶报表显示得很好，但是当我单击水晶报表工具栏上的任何按钮（即下一页、导出到等）时，我会弹出错误消息“没有有效的报表源可用。”

这是我的 C# 代码的样子：

```
private void GenerateReport()
{
    using (DataContext reports = new DataContext())
    {
        var results = //Linq Query;

        ReportDocument pr = new ReportDocument();
        pr.Load(Server.MapPath(@"CrystalReport1.rpt"));
        pr.SetDataSource(results.ToList());

        CrystalReportViewer1.ReportSource = pr;
        CrystalReportViewer1.DataBind();
    }
} 
```

任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:41:33.600

所以，我不能用另一种方式让它工作，但我确实让它以不同的方式工作。首先，我在 aspx 页面中添加了一个 CrystalReportSource 控件，

```
<CR:CrystalReportSource ID="CrystalReportSource1" runat="server">
   <Report FileName="CrystalReport1.rpt">
  </Report>
</CR:CrystalReportSource> 
```

然后在文件后面的代码中，我没有将数据源直接设置为 CrystalReportViewer1，而是将其设置为 CrystalReportSource，然后将其设置为 CrystalReportViewer1 的报表源。现在一切正常！

```
using (DataContext reports = new DataContext())
{
    var results = //Linq Query;
    CrystalReportSource1.ReportDocument.SetDataSource(results.AsEnumerable());

    CrystalReportViewer1.ReportSourceID = "CrystalReportSource1";
    CrystalReportViewer1.RefreshReport();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-22T12:31:49.603

我刚刚使用 CrystalReportViewer **Navigate Event解决了这个问题**

在查看报告按钮中，我已在会话中保存报告文档

```
 Protected Sub Button1_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Button1.Click
   ' -- the ds is dataset variable containing data to be displayed in the report

    rptDoc.SetDataSource(ds)
    Session.Add("rptdoc", rptDoc)
    CrystalReportViewer1.ReportSource = rptDoc

    End Sub 
```

然后在 CrystalReportViewer 的导航事件中，我将 CrystalReportViewer 数据源设置为 Session

```
Protected Sub j(ByVal source As Object, ByVal e As CrystalDecisions.Web.NavigateEventArgs) Handles CrystalReportViewer1.Navigate

    rpt.SetDataSource(ds)
    CrystalReportViewer1.ReportSource = session("rptdoc")

End Sub 
```

因此，每次导航到报表中的另一个页面之前，CrystalReportViewer 数据源都会设置为会话中保存的报表文档。

# mongodb - MongoDB：更改文档结构查询

> ID：11350240
> 
> 赞同：0
> 
> 时间：2012-07-05T18:21:31.897
> 
> 标签：mongodb, data-modeling

我们已经对我们的数据模型进行了更改，我们希望将其应用于我们其中一个集合中的所有文档：

```
{
  "id":60,
  "measurement":{
    "steps":1274.0
  },
  "date":"2012-05-15T00:00:00Z"
} 
```

到：

```
{  
  "id":60,
  "measurement":{
      "distance":{
          "steps":1274.0}
      },
  "date":"2012-05-15T00:00:00Z"
} 
```

本质上，我们想进一步嵌套 field `steps`，将它放在`distance`field 之下。

至于`measurement.step`，我们想转换`measurement.miles`为`measurement.distance.miles`和。`measurement.minutes``measurement.time.minutes`

任何想法和/或建议将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:33:12.503

假设您要询问如何编写架构更改脚本，这在问题中并不是很清楚：我会做这样的事情，除非您有更多文档结构案例或混合案例：

```
// find all the measurement documents with steps
db.coll.find({"measurement.steps":{$exists:true}}).forEach(function(doc) {      
  // create a new distance subdoc with the steps
  doc.measurement.distance = {steps:doc.measurement.steps};
  // delete the old steps subdoc
  delete doc.measurement.steps;
  // save the document
  db.coll.save(doc);
});
// find all the measurement documents with miles
db.coll.find({"measurement.miles":{$exists:true}}).forEach(function(doc) {
  // create a new distance subdoc with the miles
  doc.measurement.distance = {miles:doc.measurement.miles};
  delete doc.measurement.miles;
  db.coll.save(doc);
});
// find all the measurement documents with minutes
db.coll.find({"measurement.minutes":{$exists:true}}).forEach(function(doc) {
  // create a new time subdoc with the minutes
  doc.measurement.time = {minutes:doc.measurement.minutes};
  delete doc.measurement.minutes;
  db.coll.save(doc);
}); 
```

您可以很容易地在您选择的语言/驱动程序中执行等效操作以确保类型，但在 shell 中执行此操作可能更快。希望能帮助到你。

# sql - 如何选择下一行中的一列？

> ID：11350241
> 
> 赞同：0
> 
> 时间：2012-07-05T18:21:35.393
> 
> 标签：sql, database, sql-server-2005, stored-procedures

如何通过存储过程在下一行中选择 QuestionId？

（客户端：屏幕上将显示一个问题（QuestionId：3）。单击下一个按钮时，将显示下一个问题（QuestionId：7））。

**注意;** QuestionId 必须在每次执行后根据 RowId 增量和连续更改（如 1-3-7-8 ...）。也可以删除任何问题，因此保持订单很重要。

```
+-------+------------+--------------+
| RowId | QuestionId | QuestionText |
+-------+------------+--------------+
| 1     | 1          | aaaa         |
| 2     | 3          | bbbb         |
| 3     | 7          | cccc         |
| 4     | 8          | dddd         |
| 5     | 13         | eeee         |
| 6     | 17         | ffff         |
| 7     | 24         | gggg         |
| 8     | 30         | hhhh         |
+-------+------------+--------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:24:56.110

试试这个：

```
CREATE PROCEDURE dbo.GetNextQuestion

@QuestionID int

AS 

SET NOCOUNT ON

SELECT TOP 1 RowId, QuestionId, QuestionText
    FROM Questions
    WHERE QuestionID > @QuestionID
    ORDER BY QuestionID

GO 
```

单击“下一步”按钮应将当前问题 ID 传递给存储过程。

# xml - 保留 XSL 样式表中的空格

> ID：11350242
> 
> 赞同：2
> 
> 时间：2012-07-05T18:21:41.240
> 
> 标签：xml, xslt, whitespace, xalan

我正在尝试转换此 XML：-

```
<list>
  <unit>
    <data1>a</data1>
    <data2>b</data2>
    <data3>c</data3>
  </unit>
</list> 
```

对此：-

```
<list>
  <unit>
    <category1>
      <data1>a</data1>
      <data2>b</data2>
    </category1>
    <category2>
      <data3>c</data3>
    </category2>
  </unit>
</list> 
```

使用 XSL。我正在使用以下 XSL：-

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:s="some_namespace">

<xsl:template match="@*|node()">
  <xsl:copy>
    <xsl:apply-templates select="@*|node()" />
  </xsl:copy>
</xsl:template>

<xsl:template match="//s:unit" xml:space="preserve">
  <xsl:copy>
  <category1>
    <xsl:apply-templates select="./s:data1"/>
    <xsl:apply-templates select="./s:data2"/>
  </category1>
  <category2>
    <xsl:apply-templates select="./s:data3"/>
  </category2>
  </xsl:copy>
</xsl:template>

</xsl:stylesheet> 
```

现在，这保留了缩进，但完全把它弄乱了。这就是我得到的：-

```
 <list>
<unit>
  <category1>
    <data1>a</data1>
    <data2>b</data2>
  </category1>
  <category2>
    <data3>c</data3>
  </category2>
</unit>
  </list> 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-12T02:47:58.020

> 我在这里想念什么？

我认为不应该弄乱 XSLT 处理器的默认缩进。

大多数情况下，`<xsl:output indent="yes"/>`和的组合`<xsl:strip-space elements="*"/>`足以获得良好的缩进。

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="unit">
  <unit>
      <category1>
       <xsl:apply-templates select="*[not(position() >2)]"/>
      </category1>
      <category2>
       <xsl:apply-templates select="*[position() >2]"/>
      </category2>
  </unit>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时：**

```
<list>
      <unit>
        <data1>a</data1>
        <data2>b</data2>
        <data3>c</data3>
      </unit>
</list> 
```

**产生想要的、缩进良好的结果**：

```
<list>
  <unit>
    <category1>
      <data1>a</data1>
      <data2>b</data2>
    </category1>
    <category2>
      <data3>c</data3>
    </category2>
  </unit>
</list> 
```

**当使用以下七个 XSLT 处理器中的任何一个运行转换时，都会产生相同的结果**：

*   AltovaXML (XML-SPY)。

*   .NET XslCompiledTransform。

*   .NET XslTransform。

*   撒克逊 6.5.4。

*   Saxon 9.1.05（XSLT 2.0 处理器）。

*   XQSharp/XMLPrime（XSLT 2.0 处理器）。

*   AltovaXml（用于 XSLT 2.0）。

**MSXML3/4/6 的情况更复杂**——这些 XSLT 处理器的缩进只包含一个换行符，因此每个元素都在一个新行上，但出现在行首。

对于这些 XSLT 处理器，我使用以下两遍处理，第一遍是上述转换，第二遍适用于Nikolai Grigoriev 提出**[的 XML 漂亮打印机的](http://www.dpawson.co.uk/xsl/sect2/pretty.html#d8625e19)**第一遍结果，可在维护的**[XSLT 常见问题解答站点中找到](http://www.dpawson.co.uk/xsl/index.html)****[戴夫·](http://www.dpawson.co.uk/)**鲍森：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ext="urn:schemas-microsoft-com:xslt"
 exclude-result-prefixes="ext">
 <xsl:output method="xml"/>
 <xsl:strip-space elements="*"/>

 <xsl:param name="indent-increment" select="'   '" />

 <xsl:variable name="vrtfPass1">
  <xsl:apply-templates select="/*"/>
 </xsl:variable>

 <xsl:variable name="vPass1" select="ext:node-set($vrtfPass1)"/>

 <xsl:template match="node()|@*">
  <xsl:copy>
   <xsl:apply-templates select="node()|@*"/>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="/">
  <xsl:apply-templates select="$vPass1/*" mode="pass2"/>
 </xsl:template>

 <xsl:template match="unit">
  <unit>
      <category1>
       <xsl:apply-templates select="*[not(position() >2)]"/>
      </category1>
      <category2>
       <xsl:apply-templates select="*[position() >2]"/>
      </category2>
  </unit>
 </xsl:template>

  <xsl:template match="*" mode="pass2">
     <xsl:param name="indent" select="'&#xA;'"/>

     <xsl:value-of select="$indent"/>
     <xsl:copy>
       <xsl:copy-of select="@*" />
       <xsl:apply-templates mode="pass2">
         <xsl:with-param name="indent"
              select="concat($indent, $indent-increment)"/>
       </xsl:apply-templates>
       <xsl:value-of select="$indent"/>
     </xsl:copy>
  </xsl:template>

  <xsl:template match="comment()|processing-instruction()" mode="pass2">
     <xsl:copy />
  </xsl:template>

  <!-- WARNING: this is dangerous. Handle with care -->
  <xsl:template match="text()[normalize-space(.)='']" mode="pass2"/>

</xsl:stylesheet> 
```

**当对同一个（提供的）XML 文档（上图）执行此转换时，生成的结果具有所需的缩进**：

```
<?xml version="1.0" encoding="UTF-16"?>
<list>
   <unit>
      <category1>
         <data1>a
         </data1>
         <data2>b
         </data2>
      </category1>
      <category2>
         <data3>c
         </data3>
      </category2>
   </unit>
</list> 
```

这些都是我计算机上的 XSLT 处理器。我建议尝试最后的转换——它很可能会用 Xalan-C 产生想要的结果。

**请注意**：

最后一个转换使用 MSXML 特定的扩展函数 xxx:node-set()，属于 MSXML 特定的命名空间：

```
xmlns:ext="urn:schemas-microsoft-com:xslt" 
```

**对于 Xalan，这需要替换为**：

```
xmlns:ext="http://exslt.org/common" 
```

**或者，如果不支持 EXSLT，则使用本机 Xalan 命名空间**：

```
xmlns:ext="http://xml.apache.org/xalan 
```

在最后一种情况下，对`ext:node-set()`函数的调用必须替换为对`ext:nodeset()`（注意缺少的破折号）的调用：

```
 <xsl:variable name="vPass1" select="ext:nodeset($vrtfPass1)"/> 
```

# php - 使用 php 发布数据属性

> ID：11350247
> 
> 赞同：1
> 
> 时间：2012-07-05T18:21:56.437
> 
> 标签：php, jquery, ajax, custom-data-attribute

我在发布数据属性的值时遇到了麻烦，例如 data-fruit="orange" 我基本上想用 jQuery ajax 来做，我想它看起来像这样

```
var fruit = $(".fruit img").attr("data-skin");

$('.box').click(function() {
  $.ajax({
    url: 'fruits.php',
    type: 'post',
    data: fruit
  });
}); 
```

php $_POST 应该像这样：

```
$friutType = $_POST['data-friut'] 
```

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:24:55.190

您需要将键/值对发送到`data`，而不仅仅是一个值。

```
$.ajax({
    url: 'fruits.php',
    type: 'post',
    data: {fruit: fruit}
}); 
```

然后在 PHP 中：

```
$friutType = $_POST['fruit'] 
```

# unit-testing - 在没有浏览器的情况下运行 jstd-maven-plugin 测试

> ID：11350248
> 
> 赞同：3
> 
> 时间：2012-07-05T18:22:02.383
> 
> 标签：unit-testing, maven, htmlunit, js-test-driver, jasmine-maven-plugin

我已经启动并运行了*jsTestDriver*，并且我使用*jstd-maven-plugin*在构建期间运行测试。

该*插件*需要指定*浏览器*才能工作，我想使用类似*rhino*或*htmlunit*的东西，它们实际上不会启动浏览器。

*jasmine-maven-plugin*使用*htmlunit*执行此操作，并且效果很好。

有没有办法为*jstd-maven-plugin*指定一个无头浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-18T15:30:58.583

与其他 JavaScript 测试框架相比，我更喜欢 JsTestDriver 的原因之一是测试是在真实浏览器上进行的，并且允许我在使用我的应用程序的所有主要浏览器上进行测试，并验证与旧版本 IE 的兼容性问题，例如.

如果您更喜欢运行完整的无头 JavaScript 测试服务器，那么 JsTestDriver 可能不是您的最佳选择。我认为[CasperJS](http://casperjs.org/)是实现这一目标的一个非常好的选择。它使用 PhantomJS，一个可编写脚本的无头 WebKit 引擎来运行测试。

就我而言，我有一个完整的无头服务器运行 JsTestDriver 的实例，而其他服务器带有几个虚拟机，具有常见的 SO/浏览器组合（Windows/IE7；Windows/IE8；Linux/Firefox ......），其中将实际浏览器连接到无头 JsTestDriver 服务器。但如果您不需要使用真正的浏览器，CasperJS 替代方案可能是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:17:45.483

JsTestDriver 需要一个浏览器来运行 javascriptcode。因此，没有浏览器就无法运行测试。

有一种方法可以在虚拟监视器中打开浏览器。这在这个问题中有所描述： [Run Headless JsTestDriver?](https://stackoverflow.com/questions/11144537/run-headless-jstestdriver/11162213#11162213)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-10T11:05:52.977

JSTD maven 插件可以扩展来运行 phanatomjs。

# python - 如何解析 django 模板并呈现特定标签

> ID：11350249
> 
> 赞同：2
> 
> 时间：2012-07-05T18:22:05.363
> 
> 标签：python, django, django-templates

是否可以解析 django 模板并仅呈现特定标签？这个[片段](http://djangosnippets.org/snippets/942/)接近我正在寻找的，但它不会返回整个模板。基本上如果我有这个模板作为输入

```
<html>
<title>{% block title%}{% endblock %}</title>
<body>
{% block content %}
{% mycustomtag "args" %}
{% endblock content %}
</body>
</html> 
```

我只想渲染`mycustomtag`这是我正在寻找的输出

```
<html>
<title>{% block title%}{% endblock %}</title>
<body>
{% block content %}
<p>Result from mycustomtag</p>
{% endblock content %}
</body>
</html> 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T12:13:01.540

如果我正确理解了您的问题，那么有一种方法可以使用`{% verbatim %}`标签。它将[在 Django 1.5 中添加](https://docs.djangoproject.com/en/dev/releases/1.5/#verbatim-template-tag)，但现在您可以将其用作自定义标签 - 这是源代码：[https ://code.djangoproject.com/ticket/16318](https://code.djangoproject.com/ticket/16318)

这里唯一的缺点是你不能直接使用这个模板，它需要双重渲染。如果这是您所需要的 - 那么一切都很好。

要使用它，您需要做的就是用 {% verbatim %} 将其他标签括起来：

```
{% load my_custom_tags %}  <-- this is needed to load the 'verbatim' and 'mycustomtag' tags
{% verbatim %}
<html>
<title>{% block title%}{% endblock %}</title>
<body>
{% block content %}
{% endverbatim %}

{% mycustomtag "args" %}

{% verbatim %}
{% endblock content %}
</body>
</html>
{% endverbatim %} 
```

我用这个模板做了一个简单的测试：

```
@register.simple_tag
def mycustomtag(a):
    return "<p>%s</p>" % a

....

from django.template import loader, Context
print loader.get_template("test.html").render(Context({})) 
```

这将打印以下内容：

```
<html>
<title>{%block title%}{%endblock%}</title>
<body>
{%block content%}

<p>args</p>

{%endblock content%}
</body>
</html> 
```

希望这会有所帮助。

# php - CakePHP 出错 - 注意 (8)：未定义变量：uri

> ID：11350250
> 
> 赞同：2
> 
> 时间：2012-07-05T18:22:07.787
> 
> 标签：php, cakephp

我开始了`CakePHP`，我正在关注官方页面上的博客教程。

但是当我到达教程的**创建帖子视图部分（** [http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/part-two.html](http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/part-two.html)）时，我得到了一个错误。

创建教程中提到的文件后，我指示浏览器`http://mypersonalspace.host.mobi/posts/index`查看其是否正常工作。但是页面显示下一个错误：

**注意（8）：未定义变量：uri [CORE/Cake/Network/CakeRequest.php，第 247 行]**

我不知道该怎么做，因为我还没有碰过那个文件。我什至将我所有的 CakePHP 安装移到了*httpdocs*根文件夹，因为我最初将它放在一个名为*framework*的子文件夹中。我检查了文件寻找错别字或其他东西，但我不知道。

你能帮我吗？

我正在使用 2.2.0 版本，`CakePHP`并且我的网络服务器托管在子域（`http://mypersonalspace.host.mobi`）中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:27:07.763

变量`$uri`未定义。在`CORE/Cake/Network/CakeRequest.php`line 签到`247`。

或放在`247`行前：

```
$uri = isset($uri) ? $uri : ''; 
```

# iframe - 文本重叠 iframe

> ID：11350251
> 
> 赞同：0
> 
> 时间：2012-07-05T18:22:08.263
> 
> 标签：iframe, overlap

我在一个页面上有两个 iframe，但我不知道为什么文本与第二个 iframe 重叠。有什么建议么？谢谢！

```
<h1>Spanish&nbsp;Springs Library&nbsp; </h1>
<hr />
<div align="left" id="text" style="float: left;">
<div border="0" align="right" id="tour" style="float: right; width: 450px; height: 300px;"><iframe width="448" frameborder="0" src="http://tours.blackhawkvirtualmedia.com/public/vtour/full/55789" border="0" height="280"></iframe>
<div border="0" align="right" id="map" style="float: right; width: 200px; height: 200px;"><iframe scrolling="no" marginwidth="0" width="200" frameborder="0" src="http://maps.google.com/maps/ms?ie=UTF8&amp;hl=en&amp;oe=UTF8&amp;msa=0&amp;msid=108756021178700849594.000457097404325161dd5&amp;ll=39.618251,-119.728832&amp;spn=0.026447,0.034332&amp;t=p&amp;z=13&amp;output=embed" marginheight="0" height="200"></iframe><br /><small>View <a href="http://maps.google.com/maps/ms?ie=UTF8&amp;hl=en&amp;oe=UTF8&amp;msa=0&amp;msid=108756021178700849594.000457097404325161dd5&amp;ll=39.618251,-119.728832&amp;spn=0.026447,0.034332&amp;t=p&amp;z=13&amp;source=embed" target="_blank">a larger version</a> of this map</small> </div>
</div>
<p><a href="/repository/files/8/SS_09_10.pdf" target="_blank" title="Calendar of Events">Calendar of Events</a><br />7100A Pyramid Lake Highway<br />Sparks, NV 89436 </p>
<p><strong><br />Hours:</strong>&nbsp; Mon, 10am - 6pm<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Tue - Wed,&nbsp;Noon - 8pm<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thurs, 10am - 6pm<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sun, 10am - 5pm&nbsp;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fri - Sat, Closed<br /><strong>Phone:</strong> 775-424-1800<br /><strong>FAX:</strong>&nbsp;&nbsp;&nbsp;&nbsp; 775-424-1840 </p>
<p>Spanish Springs Library is located on the Pyramid Highway in Spanish Springs. An octagonal building with open spaces set off by a 64 foot ceiling over the atrium, comfortable seating and thirty-nine public access/Internet computers, it is truly a destination for the entire family. Features include a drive-through service point to pick up and drop off materials, and a 24-hour book return. </p>
<p>The Nell J. Redfield Foundation Young People's Library features a unique oversized stack of books at the entrance and a separate Story Time room. Seven of the thirty-nine public computers (including an adult station so parents and children can work side by side, and two children&rsquo;s games computers) and a family restroom complete the area as a family friendly place.</p>
<p>The teen zone is a comfortable place with eight of the thirty-nine public access computers and an area for group study and projects.</p>
<p>Programs for all ages are offered including Story Times, guest speakers and artists, craft programs, book discussion for all ages, an art gallery, displays, and much more!</p>
<p>An ADA computer station with a Braille printer is available to the public.</p>
<p>E.L. Cord community meeting rooms provide spaces for groups to meet and groups may arrange to stay after the library is closed.</p>
<p>Self-serve features include express check-out, the ability to pick up holds, Downloadable ebook and audio-book station, automated computer sign-ups, and printing. Offering wireless internet access and printing from your laptop, laptop locks, a public fax machine, a flatbed scanner for public use, and study rooms, the library is truly a destination for the whole family.</p>
<p>Citizens may request exam proctoring at the Spanish Springs Library.&nbsp; </p>
<p>The atmosphere is enhanced by the cozy fireplace, coffee cart and comfortable seating throughout the building.</p>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:45:59.703

您的代码非常混乱。尝试`<p>`在文本中仅使用一个标签，对于天/小时，使用`<table>`. 如果您可以使用 a`<div>`并将文本的格式设置`<iframe>`为谷歌地图的第一个和最后一个位置。

# php - PHP & Delphi COM+ DLL & 串口

> ID：11350252
> 
> 赞同：0
> 
> 时间：2012-07-05T18:22:09.370
> 
> 标签：php, delphi, com, serial-port

这是我最近的问题...

我这里有一些使用 Delphi 5 开发的遗留 COM+ DLL。其中一个 DLL 具有使用以下代码在 COM 串行端口上编写内容的方法：

```
AssignFile(fport,'COM1');
Rewrite(fport);
Write(fport,'some command');
CloseFile(fport); 
```

当我们开始编写前端以使用 PHP 时，我们使用 IIS 上的 WebService 来访问 COM+ DLL。那时我不知道我可以使用 PHP 中的 COM 类来做到这一点。但它工作正常。

所以今天我将 php 更改为使用 COM 类并摆脱了 IIS。DLL被调用，函数被执行，但是串口通讯根本不起作用。我试图`try..except`在 Delphi 代码上添加一些，但没有抛出异常。

也许与php进程不必访问串口的权限有关？

提前感谢您提供任何线索！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:50:05.553

DLL 已在使用机器上注册，`regsvr32`但出现错误。我将它安装到组件服务中，现在一切正常。

# linux-kernel - 有条件地包含 kbuild 中的源

> ID：11350255
> 
> 赞同：2
> 
> 时间：2012-07-05T18:22:17.220
> 
> 标签：linux-kernel

假设有一个带有一些函数 func_a 的源文件 ac。我想根据某些功能定义调用 func_a，并且还希望基于理想的相同功能定义将 ac 包含在模块中。

所以在我总是存在的模块源中（比如main.c）我可以有类似的东西

```
#ifdef FEATURE_A
func_a();
#endif 
```

并在模块的 kbuild 中类似于

obj-$(CONFIG_SAMPLE) += sample.o sample-objs := main.o utils.o

# 仅当定义了 FEATURE_A 时，才将 ac 包含到示例模块中

？？？

但这可能没有意义，因为一个是预处理器指令，另一个是编译器/链接器/构建指令。也许预处理器指令使用 kbuild 定义的某些标志的另一种方式更有意义？有没有办法做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T07:12:57.117

我将通过指出 sysctl 支持如何有条件地包含在 NFS 模块中来回答您的问题（我确信还有其他示例，但这是我所熟悉的）：

*   [包括/linux/nfs_fs.h](http://lxr.linux.no/linux+v3.4.4/include/linux/nfs_fs.h#L509)
*   [fs/nfs/Makefile](http://lxr.linux.no/linux+v3.4.4/fs/nfs/Makefile#L19)
*   [fs/nfs/super.c](http://lxr.linux.no/linux+v3.4.4/fs/nfs/super.c#L414)

内核配置系统维护一个文件“include/linux/autoconf.h”，它将您的配置选项公开为 C 预处理器宏。因此，根据您是否配置了 sysctl 支持，上面列出的文件的编译方式会有所不同。

*如果启用 sysctl 支持：*头文件“include/linux/nfs_fs.h”检查宏`CONFIG_SYSCTL`并声明 C 函数`nfs_register_sysctl()`。此函数在“fs/nfs/super.c”中调用。Makefile (seeing `nfs-y += sysctl.o`) 指示构建系统将文件“fs/nfs/sysctl.c”编译到定义函数的模块中`nfs_register_sysctl()`。

*如果禁用 sysctl 支持：*头文件“include/linux/nfs_fs.h”检查宏`CONFIG_SYSCTL`并将预处理器宏声明`nfs_register_sysctl()`为`0`. 该宏在“fs/nfs/super.c”中用于绕过一些（死）错误处理代码。Makefile (seeing `nfs-n += sysctl.o`) 不会编译或链接“fs/nfs/sysctl.c”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:08:10.183

请阅读[3.7 编译标志](http://www.mjmwired.net/kernel/Documentation/kbuild/makefiles.txt#287)。

据我了解，在编译时传递的 Kconfig 选项和预处理宏之间存在无懈可击的关系。由内核开发人员定义在编译期间使用哪些预处理器标志。

例如在`net/rds/Makefile`：

```
ccflags-$(CONFIG_RDS_DEBUG)    :=      -DDEBUG 
```

`DEBUG`如果你的内核配置了 Kconfig 选项，这里预处理器标志将被传递`CONFIG_RDS_DEBUG`。

# php - 在日期之间搜索（日期为 VARCHAR）

> ID：11350256
> 
> 赞同：0
> 
> 时间：2012-07-05T18:22:19.973
> 
> 标签：php, mysql, date, between

我有几个日期以以下格式存储为 varchar：01-01-2012

我想在日期之间进行搜索，但遗憾的是它没有按预期工作。我寻找了具有相同问题（有点）的其他线程，但那里提供的答案对我不起作用。

这是我的代码：

```
$fromday = $_POST['fromday'];
$frommonth = $_POST['frommonth'];
$fromyear = $_POST['fromyear'];

$tillday = $_POST['tillday'];
$tillmonth = $_POST['tillmonth'];
$tillyear = $_POST['tillyear'];

$vanaf = "$fromday-$frommonth-$fromyear";
$tot = "$tillday-$tillmonth-$tillyear";

// zoeken
$sel = "SELECT * FROM bestelling WHERE verzenddatum >= '$vanaf' AND verzenddatum <= '$tot'";
$dosel = mysql_query($sel) or die(mysql_error());

while($row = mysql_fetch_assoc($dosel))
{
    $datum = $row['verzenddatum'];

    echo $datum;
} 
```

请让我知道我做错了什么！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T18:32:23.103

它没有返回任何行，因为查询没有对有效`DATE`或`DATETIME`字段进行比较。您应该将日期存储为一种`DATE`类型，但您可以这样做：

```
// Switch the order of date elements:
$vanaf = mysql_real_escape_string("$fromyear-$frommonth-$fromday");
$tot = mysql_real_escape_string("$tillyear-$tillmonth-$tillday");

$sel = "SELECT * FROM bestelling WHERE STR_TO_DATE(verzenddatum, '%d-%m-%Y') BETWEEN '$vanaf' AND 'tot'"; 
```

该`mysql_real_escape_string()`函数只是降低了 SQL 注入的风险，这是您的原始代码容易受到攻击的地方。

MySQL 函数[`STR_TO_DATE()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)将字符串转换为有效的 MySQL`DATE`类型。`%d-%m-%Y`是您当前在 varchar 字符串中使用的格式，但`STR_TO_DATE`会将其转换为`'%Y-%m-%d'`MySQL 可以用来进行范围比较的格式。

另外，我使用`BETWEEN`SQL 中的语法，因为它与`val >= val1 AND val <= val2`. 它更清晰，更简单：`val BETWEEN val1 AND val2`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:29:29.723

您需要将日期存储为`DATE`字段类型或`DATETIME`字段类型。使用脚本迁移数据库（在小型数据库上不应该太难：备份表，将所有日期转换为正确的格式，更改架构，然后重新插入数据。如果备份爆炸，请恢复备份。 ) 修复此问题后，一切都会按预期工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T18:44:43.963

我**强烈**建议您现在通过将字段转换为适当的字段来解决此问题`DATE`并忍受痛苦，而不是等到这种方法将导致不可避免的性能问题出现。如果你不能，试试这个：

```
$fromday = $_POST['fromday'];
$frommonth = $_POST['frommonth'];
$fromyear = $_POST['fromyear'];

$tillday = $_POST['tillday'];
$tillmonth = $_POST['tillmonth'];
$tillyear = $_POST['tillyear'];

$sel = "SELECT * FROM bestelling WHERE SUBSTRING(verzenddatum, 7, 4) BETWEEN '$fromyear' AND '$tillyear' AND SUBSTRING(verzenddatum, 4, 2) BETWEEN '$frommonth' AND '$tillmonth' AND SUBSTRING(verzenddatum, 1, 2) BETWEEN '$fromday' AND '$tillday';" 
```

（这里的希望是，如果记录的日期在“从年”和“到年”之外，MySQL 查询优化器会注意到这一点并提前退出）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T18:26:48.323

MySQL 的标准日期格式是 'year-month-day' 试试这个`$vanaf = "$fromyear-$frommonth-$fromday";`并对`$tot`. 试试看它是否有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T18:30:25.460

一些理论：

```
$startdate = sprinf('%04d-%02d-%02d', $year, $month, $day);
$enddate = sprinf('%04d-%02d-%02d', $year, $month, $day);

$query = "SELECT * FROM orders WHERE date BETWEEN '{$startdate}' AND '{$enddate}'"; 
```

我的提示：花一些时间在 PDO 和准备好的声明上。不要再使用 mysql_ 函数了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-05T18:32:13.787

由于您使用的是 PHP，因此您可以将 MySQL 中的数据类型设置为`INT`(Integer) 并使用 UNIX Timestamps 作为日期。这是搜索大于和小于值的好方法。

你可以使用类似的东西：

```
$fromday = strtotime($_POST['fromday']); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-11-15T10:26:20.910

```
Change Only Mysql query it's Working.

select * from Your_table_name
where STR_TO_DATE(  "your_date_field" ,  '%d/%m/%Y' )
BETWEEN  STR_TO_DATE("your_first_date", '%d/%m/%Y')
AND  STR_TO_DATE("your_second_date", '%d/%m/%Y') 
```

# ruby - 如何在 Ruby 中获取桌面路径

> ID：11350262
> 
> 赞同：3
> 
> 时间：2012-07-05T18:22:32.937
> 
> 标签：ruby

是否有跨平台的方式来获取 Ruby 中的 Dekstop 路径？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T00:53:42.543

`ENV['HOME'] + '/Desktop'`应该适用于所有窗口。我不确定osx，linux经常没有桌面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:26:25.237

您可以尝试 Dir.pwd 来获取当前路径。

[http://ruby-doc.org/core-1.9.3/Dir.html#M002316](http://ruby-doc.org/core-1.9.3/Dir.html#M002316)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-22T15:38:41.143

ENV['HOME']+'/Desktop' 应该适用于所有 Windows 和 OSX

# java - 如何在android中缩放矩形？

> ID：11350267
> 
> 赞同：0
> 
> 时间：2012-07-05T18:22:53.877
> 
> 标签：java, android

我希望能够在 android 上缩放 Rect 使其适合整个屏幕 这是我到目前为止的代码： public class MainView extends View {

```
private Main main;
private Rect facebook_rect;

public MainView(Context context){
    super(context);
    this.main = (Main) context;
    setFocusable(true);
    setFocusableInTouchMode(true);
}

@Override
protected void onDraw(Canvas canvas){
    Paint background = new Paint();
    background.setColor(getResources().getColor(R.color.main_background));
    canvas.drawRect(0, 0, getWidth(), getHeight(), background);

    Paint facebookPaint = new Paint();
    facebook_rect = new Rect(0,0,getWidth(),getHeight()/5);
    facebookPaint.setColor(getResources().getColor(R.color.facebook_color));
    canvas.drawRect(facebook_rect,facebookPaint);
}

@Override
public boolean onTouchEvent(MotionEvent event){
    if(event.getAction()!=MotionEvent.ACTION_DOWN)
        return super.onTouchEvent(event);
    animate("facebook");

    return true;
}

private void animate(String string) {
    Animation anim = AnimationUtils.loadAnimation(main, R.anim.scale_anim_1stpos);
    facebook_rect.startAnimation(anim);

}
} 
```

但是这个：“facebook_rect.startAnimation(anim);” 不起作用......关于如何做到这一点的任何想法？

编辑：我也有这个作为我的动画 xml 文件

```
<?xml version="1.0" encoding="utf-8"?>
<scale xmlns:android="http://schemas.android.com/apk/res/android"
       android:fromYScale="1.0" android:toYScale="3.0"
       android:pivotX="0"
       android:pivotY="0"
       android:interpolator="@android:anim/linear_interpolator"
       android:duration="700" android:fillAfter="true" >
</scale> 
```

我想要达到的效果类似于 Apple 的新票务应用存折，以防万一你有更好的想法。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T10:49:47.053

首先取屏幕尺寸

```
DisplayMetrics displayMetrics = new DisplayMetrics();    
getWindowManager().getDefaultDisplay().getMetrics(displayMetrics ); 
```

接下来找到比例因子

```
 float scale = displayMetrics.densityDpi; 
```

接下来使用绘图功能缩放画布

```
canvas.drawRect(left-20*scale, top-20*scale, right+20*scale, bottom, mPaint); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:51:10.200

如果您想缩放可以使用的东西`canvas.scale(scaleFactor, scaleFactor);`

第一个比例因子是要在 X 中缩放的量，第二个是在 Y 中缩放的量。

对于动画部分，请查看此[链接](http://android-er.blogspot.com/2011/09/implement-slide-in-and-slide-out.html)，也许它可以提供帮助。

# c# - 从类创建 UI

> ID：11350272
> 
> 赞同：2
> 
> 时间：2012-07-05T18:23:15.740
> 
> 标签：c#, xaml, user-interface, code-generation

我正在寻找一种可以从类生成用户界面的工具。让我举个例子。

这个类有一些伪属性：

```
class BussinessModel
{
    [UiReadOnly]
    [UiSingleLine]
    public int Id { get; set; }

    [UiSingleLine]
    public string Tile { get; set; }

    [UiMultiLine]
    public string Description { get; set; }
} 
```

可以像这样生成一个 UI（用于 ui 的 XAML）：

![生成的ui](../Images/901aca5bccbcb164703bc4f37e7f3f13.png)

**编辑：** 我想提一下我想要“准备使用”的绑定，当给定的类是视图模型（MVVM）时可以使用这些绑定

**有没有什么工具可以做这样的事情（单击一下）？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:08:01.483

你基本上需要的是一个数据表单。

对“wpf 数据表”的搜索提供以下链接：

[http://www.silverlightshow.net/items/Creating-Rich-Data-Forms-in-Silverlight-3-Introduction.aspx](http://www.silverlightshow.net/items/Creating-Rich-Data-Forms-in-Silverlight-3-Introduction.aspx)

对于验证属性，您可以从这个开始：

[http://msdn.microsoft.com/en-us/magazine/ee335695.aspx](http://msdn.microsoft.com/en-us/magazine/ee335695.aspx)

也有一些商业可用的，主要来自 Telerik 或 ComponentOne。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T10:26:02.723

您可以查看裸对象（[https://github.com/NakedObjectsGroup/NakedObjectsFramework](https://github.com/NakedObjectsGroup/NakedObjectsFramework)）

也许可执行 UML ( [https://en.wikipedia.org/wiki/Executable_UML](https://en.wikipedia.org/wiki/Executable_UML) )

裸对象将在运行时从类定义动态生成 W​​eb UI。它还通过 EntityFramework 处理持久性。

# c# - 每个财产授权的实体

> ID：11350276
> 
> 赞同：1
> 
> 时间：2012-07-05T18:23:50.020
> 
> 标签：c#, sql, sharepoint, authentication, properties

我有一个 ListItem（Sharepoint），但让我们将其视为一个简单的类/实体。现在这个实体有一个属性名称 Status 和其他属性。

我需要实现每个属性/角色/状态授权。

示例： **角色**= 经理，**字段**=RequestName，**状态**=01 权限：读取、更新

**角色**= 经理，**字段**=RequestName，**状态**=05 权限：读取

如您所见，授权我基本上基于 3 个变量：角色、状态、属性

现在，我需要在 UI 中根据用户可以看到或编辑它的事实来禁用/隐藏一些控件。这可以通过几个 sql 表和一些连接轻松完成。

鉴于实体可能有 30-100 个属性，我需要知道何时禁用/隐藏 UI 中的控件。

您认为最好的方法是什么：

1.  查询数据库 30 次，查看用户是否可以读取某个属性

2.  加载给定角色和状态的所有字段的权限，在内存中循环遍历集合并获取当前字段权限。

我对性能/内存平衡感兴趣。我也对其他授权算法持开放态度，让 3 个变量（角色/状态/属性）决定权限。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:34:59.013

在一个简单的内存列表中保存 100 个小对象既简单又快速。如果属性名称是唯一的，您可以使用索引集合，这样更快。

如果它们没有不断更新，则没有理由查询数据库。

# node.js - Socket.io 不适用于 Firefox 和 Chrome

> ID：11350279
> 
> 赞同：2
> 
> 时间：2012-07-05T18:23:56.123
> 
> 标签：node.js, socket.io

我正在尝试开发一个简单的聊天应用程序。这是我的**chat.js**文件。

```
var app = require('http').createServer(handler)
, io = require('socket.io').listen(app)
, fs = require('fs');
app.listen(8124);
function handler (req, res) {
fs.readFile(__dirname + '/chat.html',
function (err, data) {
if (err) {
res.writeHead(500);
return res.end('Error loading chat.html');
}
res.writeHead(200);
res.end(data);
});
}
io.sockets.on('connection', function (socket) {
    socket.on('addme',function(username) {
        socket.username = username;
        socket.emit('chat', 'SERVER', 'You have connected');
        socket.broadcast.emit('chat', 'SERVER', username + ' is on deck');
    });
    socket.on('sendchat', function(data) {
        io.sockets.emit('chat', socket.username, data);
    });
    socket.on('disconnect', function() {
        io.sockets.emit('chat', 'SERVER', socket.username + ' has left the building');
    });
}); 
```

还有我的**chat.html**文件。

```
<head>
<meta charset="utf-8">
<title>bi-directional communication</title>
<script src="/socket.io/socket.io.js"></script>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
$(document).ready(function(e) {
    var socket = io.connect('http://localhost:8124/');
    $('#submit').click(function(e) {
        e.preventDefault();
        v = $('#uname').val();
        $('#username').html('');
        socket.emit('addme', v);
    });

    socket.on('chat',function(username, data) {
        var p = document.createElement('p');
        p.innerHTML = username + ': ' + data;
        document.getElementById('output').appendChild(p);
    });
    window.addEventListener('load',function() {
        document.getElementById('sendtext').addEventListener('click',
        function() {
            var text = document.getElementById('data').value;
            socket.emit('sendchat', text);
        }, false);
    }, false);

});
</script>
</head>
<body>
<div id="output"></div>
<div id="username">
  <input type="text" name="uname" id="uname">
  <input type="submit" name="submit" id="submit" value="Submit">
</div>
<div id="send">
  <input type="text" id="data" size="100" /><br />
<input type="button" id="sendtext" value="Send Text" />
</div>
</body>
</html> 
```

我通过在 node.js 命令提示符中键入**node chat.js**`http://localhost:8124/`然后在我的浏览器地址栏中键入来测试代码。问题是，虽然这在 IE9 上完美运行，但在 Firefox 和 Chrome 上却没有任何反应。

当我在 chrome 或 firefox 上运行它时，我在 Node.js 命令提示符上收到以下内容。

```
info  - socket.io started
   debug - served static content /socket.io.js
   debug - client authorized
   info  - handshake authorized 0yJjYvt7o36BTX6T_hXA
   debug - setting request GET /socket.io/1/websocket/0yJjYvt7o36BTX6T_hXA
   debug - set heartbeat interval for client 0yJjYvt7o36BTX6T_hXA
   debug - client authorized for
   debug - websocket writing 1::
   debug - setting request GET /socket.io/1/xhr-polling/0yJjYvt7o36BTX6T_hXA?t=1
341573194770
   debug - setting poll timeout
   debug - discarding transport
   debug - cleared heartbeat interval for client 0yJjYvt7o36BTX6T_hXA
   debug - setting request GET /socket.io/1/jsonp-polling/0yJjYvt7o36BTX6T_hXA?t
=1341573204771&i=0
   debug - setting poll timeout
   debug - discarding transport
   debug - clearing poll timeout
   debug - clearing poll timeout
   debug - jsonppolling writing io.j[0]("8::");
   debug - set close timeout for client 0yJjYvt7o36BTX6T_hXA
   debug - jsonppolling closed due to exceeded duration
   debug - setting request GET /socket.io/1/jsonp-polling/0yJjYvt7o36BTX6T_hXA?t
=1341573224817&i=0
   debug - setting poll timeout
   debug - discarding transport
   debug - cleared close timeout for client 0yJjYvt7o36BTX6T_hXA
   debug - clearing poll timeout
   debug - jsonppolling writing io.j[0]("8::");
   debug - set close timeout for client 0yJjYvt7o36BTX6T_hXA
   debug - jsonppolling closed due to exceeded duration
   debug - setting request GET /socket.io/1/jsonp-polling/0yJjYvt7o36BTX6T_hXA?t
=1341573244856&i=0 
```

这样下去。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T11:47:46.853

谢谢你 ebohlman 的时间，但我解决了这个问题。在我的**chat.js 中**，我添加了以下行。

```
io.configure('development', function(){
  io.set('transports', ['xhr-polling']);
}); 
```

现在我的chat.js 看起来像。

```
var app = require('http').createServer(handler)
, io = require('socket.io').listen(app)
, fs = require('fs');

app.listen(8124);

io.configure('development', function(){
  io.set('transports', ['xhr-polling']);
});

function handler (req, res) {
fs.readFile(__dirname + '/chat.html',
function (err, data) {
if (err) {
res.writeHead(500);
return res.end('Error loading chat.html');
}
res.writeHead(200);
res.end(data);
});
}
io.sockets.on('connection', function (socket) {
    socket.on('addme',function(username) {
        socket.username = username;
        socket.emit('chat', 'SERVER', 'You have connected');
        socket.broadcast.emit('chat', 'SERVER', username + ' is on deck');
    });
    socket.on('sendchat', function(data) {
        io.sockets.emit('chat', socket.username, data);
    });
    socket.on('disconnect', function() {
        io.sockets.emit('chat', 'SERVER', socket.username + ' has left the building');
    });
}); 
```

但我仍然不知道可能导致错误的原因。知道的请解释一下！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:08:12.167

我在尝试发布到 AppFog 时遇到了同样的问题。这是由 AppFog 尚不支持 websockets 引起的，因此您的修复通过强制 socket.io 使用长轮询/AJAX 来工作。AppFog 正在根据他们的网站支持 websockets，但没有给出日期。

不幸的是，我发现的大多数云 PaaS 提供商还不支持 websocket。我现在正在测试的一个值得注意的例外是 Nodejitsu： [http ://nodejitsu.com/](http://nodejitsu.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-23T04:35:44.657

我认为这将有助于了解这个问题，以及它是如何解决的，我搜索了很多，最后我得到了

[socket.io 中的“xhr-polling”配置有什么作用？](https://stackoverflow.com/questions/9244225/what-does-xhr-polling-config-do-in-socket-io)

谢谢你

# facebook - 滚动条现在出现在 Firefox 中，而不是任何其他浏览器中。7月5号才开始

> ID：11350281
> 
> 赞同：2
> 
> 时间：2012-07-05T18:24:15.457
> 
> 标签：facebook, firefox, canvas, scrollbar

这是一个从今天开始的特定于 Firefox 的错误。IE 和 Chrome 不显示任何滚动条。我正在进行所有适当的 Facebook 调用以自动扩展页面。

我有 FB.Canvas.setAutoGrow(); FB.Canvas.setSize(true);

插入 css: Overflow : hidden 在 html 标签上将解决问题，但会破坏我的许多页面。没有任何工作。即使使用 css: Overflow:hidden 垂直/水平滚动条仍然会出现但被禁用。

以前，firefox 总是显示禁用的底部滚动条，但现在它也显示启用的垂直滚动条。垂直滚动条一夜之间爬了起来，现在显示在我的应用程序的实时版本上。Facebook 端发生了一些变化，开始显示垂直滚动条。

除了现在出现的垂直滚动条之外，firefox 还显示了一个无法摆脱的禁用底部滚动条，我在 Firefox 的 facebook 上的每个应用程序上都看到了这个底部滚动条。

您可以通过访问 apps.facebook.com/Ovrlap-App 查看实际存在的错误。

Firefox 一直有一个禁用的底部滚动条，我完全不知道如何摆脱它。但是这个新的垂直滚动条今天才出现。

在此先感谢，-Rob

# c - 如何在 C 中将 char '5' 转换为 int '5'？

> ID：11350286
> 
> 赞同：2
> 
> 时间：2012-07-05T18:24:36.450
> 
> 标签：c, char, int

> **可能重复：**
> [如何将单个 char 转换为 int](https://stackoverflow.com/questions/439573/how-to-convert-a-single-char-into-an-int)

我正在开发一个程序，该程序需要从字符串中提取一个整数，然后将其添加到其他整数中。

IE 输入“123456789”。我可以取出第 5 个字符“5”，但我需要将它添加到另一个 int。如果我尝试将其转换为 int，它会返回 ASCI 值。有什么方法可以将 char 转换为对应的 int 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T18:25:29.573

只需减去 character 的 ASCII 值`'0'`。

例如`'5' - '0' = 5`

# android - onGetViewFactory 只为多个小部件调用一次

> ID：11350287
> 
> 赞同：14
> 
> 时间：2012-07-05T18:24:37.697
> 
> 标签：android, android-appwidget

我有一个使用`ListView`. 我创建了一个扩展类`RemoteViewsService`：

```
public class AppWidgetService extends RemoteViewsService {
    @Override
    public RemoteViewsFactory onGetViewFactory(Intent intent) {
        return (new AppWidgetListFactory(this.getApplicationContext(), intent));
    }
} 
```

在我的`AppWidgetProvider`中，我为小部件的每个实例（对于每个`appWidgetId`）调用以下方法：

```
private static void fillInList(RemoteViews widget, Context context, int appWidgetId) {
    Intent intent = new Intent(context, AppWidgetService.class);
    intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetId);
    widget.setRemoteAdapter(R.id.appwidget_listview, intent);
} 
```

的构造函数`AppWidgetListFactory`

```
public AppWidgetListFactory(Context context, Intent intent) {
    this.context = context;
    appWidgetId = intent.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, AppWidgetManager.INVALID_APPWIDGET_ID);

    System.out.println("New TVAPWLF for: " + appWidgetId);
    trains = WidgetData.getInstance().widgetMap.get(appWidgetId);
} 
```

现在的问题是，该`fillInList`方法被调用的频率与小部件的实例一样频繁，但该`onGetViewFactory`方法只被调用一次。这会导致所有小部件显示相同的数据。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-07-08T22:34:34.933

我自己没有对此进行测试，但是查看 的源代码`RemoteViewsService.onBind()`，我相信你不能仅仅改变 Intent 中的额外内容，以便它检测到需要对你的`onGetViewFactory()`方法进行新调用，因为它使用`Intent.filterEquals()`了比较：

> 出于意图解析（过滤）的目的，确定两个意图是否相同。也就是说，如果它们的动作、数据、类型、类和类别相同。这不会比较意图中包含的任何额外数据。

我建议通过 Intent 的数据传递您需要的信息（小部件 ID？），可能类似于：

```
private static void fillInList(RemoteViews widget, Context context, int appWidgetId) {
    Intent intent = new Intent(context, AppWidgetService.class);
    intent.setData(Uri.fromParts("content", String.valueOf(appWidgetId), null));
    widget.setRemoteAdapter(R.id.appwidget_listview, intent);
} 
```

并分别在接收方：

```
public TreinVerkeerAppWidgetListFactory(Context context, Intent intent) {
    this.context = context;
    appWidgetId = Integer.valueOf(intent.getData().getSchemeSpecificPart());

    System.out.println("New TVAPWLF for: " + appWidgetId);
    trains = WidgetData.getInstance().widgetMap.get(appWidgetId);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-07-15T20:29:26.253

根据上面的描述，如果您设置的意图不是字符串，您可以做的另一个技巧是：

```
Random random = new Random();
intent.setType(String.valueOf(random.nextInt(1000))); 
```

这将调用 onGetViewFactory();

# sql - 如果可能，尝试通过 SQL 在 Rails 中获取一周中每一天的第一条记录

> ID：11350290
> 
> 赞同：0
> 
> 时间：2012-07-05T18:24:51.667
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, activerecord

我每周查看项目。对于每个项目，我都在为一周中的每一天获取第一条记录。对我来说重要的是始终获得当天的第一条记录，并知道哪些工作日没有记录。现在，我在嵌套的 for 循环中为每个项目 + 星期几组合使用单独的 SQL 字符串来执行此操作。

这感觉不对。看来我应该能够通过 Group By 和 Limit 使用 ActiveRecord / SQL 来获得这个，并使用 Ruby/Rails 来处理结果。这可能吗？

提前致谢。- 大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:17:02.840

这能完成工作吗？（使用 MySQL）

```
@projects = []
for day in 1..7
  @projects.push Project.where("DAYOFWEEK(project_date) = ?", day).where(:project_date => Time.now.all_week).order('project_date desc').first
end
#Time.now.all_week assumes you're working with Rails 3.2 
```

查看[MySQL 文档中的 DATEOFWEEK()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayofweek)

你可以用

```
for pj in @project
  p pj.project_date if pj.project_date #nil if no project found
end 
```

# java - 如何在 Java 中使用数组值作为字段？a1.section[2] = 1;

> ID：11350299
> 
> 赞同：0
> 
> 时间：2012-07-05T18:25:11.930
> 
> 标签：java, android

Java 新手，无法弄清楚我希望是什么简单的东西。

我将“部分”保存在一个数组中：

```
//Section.java
public static final String[] TOP = {
    "Top News",
    "http://www.mysite.com/RSS/myfeed.csp",
    "top"
}; 
```

我想做这样的事情：

```
Article a1 = new Article();
a1.["s_" + section[2]] = 1;  //should resolve to a1.s_top = 1; 
```

但它不会让我，因为它不知道“部分”是什么。（我敢肯定，经验丰富的 Java 人会对这种尝试感到畏缩......但我的搜索结果是关于如何做到这一点的空白）

**澄清：**

我的文章 mysqlite 表有文章“部分”的字段：

```
s_top
s_sports
...etc 
```

`1`从 XML 文件导入时，如果它属于该类别，我想将该字段设置为 a 。我可以有 switch 语句：

```
//whatever the Java version of this is
switch(section[2]) {
    case "top": a1.s_top = 1; break;
    case "sports": a1.s_sports = 1; break;
    //...
} 
```

但我认为将它写成一行会容易得多：

```
a1["s_"+section[2]] = 1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:16:15.570

在 Java 中，以您尝试做的方式去做您想做的事情是一件痛苦的事。

如果您不想使用 switch/case 语句，则可以使用反射来提取您尝试设置的成员属性：

```
Class articleClass = a1.getClass();
Field field = articleClass.getField("s_top");
field.set(a1, 1); 
```

它会起作用，但它可能会很慢，而且它是解决这个问题的一种非典型方法。

或者，您可以将 a`Map<String>`或 a存储`Map<String,Boolean>`在您的类中，并在called中`Article`有一个公共函数，并且当您迭代时，您可以将各个部分字符串（或字符串/值映射）放入每个 的映射中。因此，与其静态定义哪些部分可能存在并给每个部分一个是或否，您将允许可能部分的列表是动态的并基于您的 xml 导入。`Article``putSection(String section)``Article``Article`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:07:13.110

Java 变量不是“动态的”，例如取消链接动作脚本。您不能在编译时不知道变量的情况下调用或分配变量（好吧，您可以使用反射，但它远非复杂）

所以是的，解决方案是有一个 switch case（仅适用于 java 1.7 的字符串），或者使用 hashmap 或等效的

或者，如果是关于导入 XML，也许你应该看看[JAXB](http://www.mkyong.com/java/jaxb-hello-world-example/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T18:52:56.717

如果您尝试从对象中获取属性，则需要确保您的对象中有“getter”和“setter”。您还必须确保`Section`在您的文章类中定义。

就像是：

```
class Article{
  String section;   

  //constructor
  public Article(){
  };

  //set section
  public void setSection(Section section){
  this.section = section;
}
  //get section
  public String getSection(){
  return this.section; 

} 
```

# java - 线程环境中同步的 HashMap 中缺少项目

> ID：11350300
> 
> 赞同：1
> 
> 时间：2012-07-05T18:25:15.517
> 
> 标签：java, multithreading

我知道您必须围绕任何会改变哈希图结构（放置或删除）的东西进行同步，但在我看来，您还必须围绕哈希图的读取同步，否则您可能正在阅读，而另一个线程正在改变结构哈希图。

所以我同步gets和puts到我的hashmap。我可以用来测试的唯一机器只有一个处理器，所以在系统投入生产并开始出现故障之前，我从来没有任何真正的并发。我的哈希图中缺少项目。我认为这是因为两个线程同时写入，但根据下面的代码，这应该是不可能的。当我将线程数减少到 1 时，它开始完美地工作，所以这绝对是一个线程问题。

细节：

```
// something for all the threads to sync on
private static Object EMREPORTONE = new Object();

    synchronized (EMREPORTONE)
      {
        reportdatacache.put("name.." + eri.recip_map_id, eri.name);
        reportdatacache.put("subjec" + eri.recip_map_id, eri.subject);
        etc...
      } 
```

……和其他地方……

```
 synchronized (EMREPORTONE)
      {
        eri.name = (String)reportdatacache.get("name.." + eri.recip_map_id);
        eri.subject = (String)reportdatacache.get("subjec" + eri.recip_map_id);
        etc...
      } 
```

就是这样。我在函数之间传递reportdatacache，但这只是对哈希图的引用。

另一个重要的一点是，它在应用服务器中作为 servlet 运行（具体来说是 iplanet，但我知道你们中没有人听说过）

但无论如何，EMREPORTONE 对于网络服务器进程来说是全局的，没有两个线程应该能够互相踩踏，但我的 hashmap 却被破坏了。有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:28:47.770

是的，同步不仅在写作时很重要，在阅读时也很重要。虽然将在互斥情况下执行写入，但读取器可能会访问映射的错误状态。

我**不建议**您在任何情况下**手动****同步**Java 集合，有线程安全的对应项：[Collections.synchronizedMap](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Collections.html#synchronizedMap%28java.util.Map%29)和[ConcurrentHashMap](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html)。使用它们，他们将确保在多线程环境中访问它们是安全的。

 **进一步提示，似乎每个人都在访问`datareportcache`. 该对象只有一个实例吗？为什么不在缓存本身上同步呢？但是在尝试解决问题时忘记使用**java.util.concurrent 中**的糖。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:32:40.940

在 servlet 容器环境中，静态变量依赖于类加载器。所以你可能认为你正在处理相同的静态实例，但实际上它可能是完全不同的一个。

此外，检查您是否不通过其他地方的转义引用使用地图并从中写入/删除键。

是的，请改用 ConcurrentHashMap 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T20:26:57.623

在我看来，这里有 3 种可能性：

1.  您正在锁定两个不同的对象。 但是，访问 的代码`EMREPORTONE`仅在一个文件中。好吧，那不是。但我建议锁定而不是。更干净的代码。`private static``reportdatacache``reportdatacache``EMREPORTONE`

2.  你错过了一些读或写的`reportdatacache`地方。还有其他对地图的访问不是`synchronized`. 东西永远不会从缓存中删除吗？

3.  这不是同步问题，而是竞争条件问题。hashmap 中的数据很好，但是您希望缓存中的数据，但它们还没有被其他线程存储。也许 2 个请求同时`eri`进入，并且它们都将值放入缓存中？也许检查返回的旧值`put(...)`是否始终为空？也许解释更多关于您如何知道地图中缺少项目的信息将对此有所帮助。

顺便说一句，您正在这样做：

```
reportdatacache.put("name.." + eri.recip_map_id, eri.name);
reportdatacache.put("subjec" + eri.recip_map_id, eri.subject); 
```

但看起来你真的应该`eri`通过它的 id 来存储它。

```
reportdatacache.put(recip_map_id, eri); 
```

那么您就不会使用`"name.."`前缀创建假密钥。或者，也许您应该创建一个`NameSubject` `private static class`将名称和主题存储在缓存中。清洁器。

希望这里有帮助。**

# android - 基于 xml 文件的动态文本视图中的错误

> ID：11350308
> 
> 赞同：-1
> 
> 时间：2012-07-05T18:25:54.987
> 
> 标签：android, textview

我有一个基于 xml 文件的动态文本视图.....请帮助我的代码......

我的代码

MessageViewPage.java

```
package com.dpn.pack;

public class MessageViewPage extends Activity {

TextView tv1=new TextView(this);
ScrollView sv;
String nickname,body;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.message_view_page);

    Bundle b = getIntent().getExtras();

    nickname= b.getString("nick");
    body=b.getString("body");

    LayoutInflater vi = (LayoutInflater) getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View v = vi.inflate(R.layout.message_view_page, null);

    // fill in any details dynamically here
    TextView textView = (TextView) v.findViewById(R.id.textViewSender);
    textView.setText("Sender : "+nickname);

    // insert into main view
    View insertPoint = findViewById(R.id.textViewSender);
    insertPoint.addView(v, 0, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT));

}

} 
```

我的xml文件如下

message_view_page.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:padding="5dp" 
android:background="@drawable/view">

<TextView
    android:id="@+id/textViewSender"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="18dp"
    android:layout_marginTop="35dp"
    android:textColor="#FFFFFF"
    android:textSize="20dp" />

<TextView
    android:id="@+id/textViewBody"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/textViewSender"
    android:layout_below="@+id/textViewSender"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="40dp"
    android:textSize="15dp"
    android:textColor="#F69DD1" />

<Button
    android:id="@+id/buttonReply"
    android:layout_width="100dp"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="45dp"
    android:layout_marginBottom="50dp"
    android:text="Reply" />

<Button
    android:id="@+id/buttonListen"
    android:layout_width="100dp"
    android:layout_height="50dp"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:layout_marginRight="45dp"
    android:layout_marginBottom="50dp"
    android:text="LIsten" />

</RelativeLayout> 
```

我有一个错误

```
insertPoint.addView(v, 0, new ViewGroup.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT)); 
```

请哪位大神告诉我解决办法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T05:24:37.593

您在代码中使用了一行，但是 如果不添加应该 在 此行之后添加的 xml 文件，您`RelativeLayout item = (RelativeLayout) findViewById(R.id.textViewSender);` 可以获取id。`textViewSender``message_view_page.xml`

`setContentView(R.layout.message_view_page);`
`super.onCreate(savedInstanceState);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:20:33.770

您的 insertPoint 为空。因为在调用 findViewById 之前没有设置布局。所以它不会找到任何东西。

你必须打电话

```
setContentView(R.layout.message_view_page); 
```

前。

# character-encoding - wget 和特殊字符

> ID：11350310
> 
> 赞同：12
> 
> 时间：2012-07-05T18:26:06.017
> 
> 标签：character-encoding, wget

我在本地使用 wget 来获取小型 Web 应用程序的静态快照。当我这样做时，生成的 html 文件会以奇怪的字符代替引号和撇号返回。

我能做些什么来避免这种行为？

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-11-15T02:01:39.673

我建议尝试：

```
--restrict-file-names=nocontrol 
```

来源： http: [//www.win.tue.nl/~aeb/linux/misc/wget.html](http://www.win.tue.nl/~aeb/linux/misc/wget.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-07-05T18:43:56.690

听起来您`--remote-encoding`可能需要指定`--remote-encoding=utf-8`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-19T13:42:02.017

我遇到了同样的问题，但后来我发现我的浏览器显示的网页编码错误。例如在 Firefox 中，我只需要更改视图 -> 字符编码 -> Unicode。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-12T06:51:33.007

浏览镜像时，我遇到了这个不同的问题（`wget`带有特殊字符和引号的镜像显示为 Unicode“unknown char”, `?`）。

问题变成与不同的服务器编码有关，而不是取决于`wget`. 原始服务器是一个旧的 Windows+IIS 安装，配置为使用 ISO-8859 编码提供 HTML 页面，而镜像是一个配置为提供 UTF-8 页面的 Linux+Apache 服务器。

解决方案是将 Apache 配置为服务 ISO-8859 页面，将指令添加到正确的虚拟主机`AddDefaultCharset ISO-8859-1`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-25T02:35:05.033

似乎`wget`无法猜测编码，因此您需要在您的网络应用程序的 html 响应中使用它：

`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-06T22:23:55.183

我也有这样的问题。我下载的页面似乎被压缩了。您可以使用 wget 中的 -S 选项进行检查。你会发现一个

> 内容编码：gzip

线。在这种情况下，我使用 zcat 来读取文件。

# java - Junit 4 - 在测试类中运行所有测试

> ID：11350311
> 
> 赞同：0
> 
> 时间：2012-07-05T18:26:10.723
> 
> 标签：java, unit-testing, interface, junit4

我一直在设置一些合同 JUnit 4 测试（遵循回答这个[问题](https://stackoverflow.com/questions/11157042/java-contract-tests)的建议） - 例如，如果我有一个接口（我在示例中包含了泛型，因为我在我的项目中使用它们） - 但是，这个是一个显着简化的示例：

```
public interface MyInterface<T> {
  public T myMethod();
} 
```

我可以创建一个抽象的合同测试 - 例如：

```
public abstract class AbstractMyInterfaceTest<T> {

  private final MyInterface<T> _impl;  
  // plus, store stuff to test against;

  public AbstractMyInterfaceTest(MyInterface<T> impl, ... stuff to test against){
    _impl = impl;
    // stuff to test against...
  } 

  @Test
  public void testMyMethod(){
    // test some stuff...
  }
} 
```

...并为每个实现（我正在运行`@RunWith(Parameterized.class)`）扩展这个抽象测试类。我还将一些变量传递给抽象测试类来测试接口的实现。

然而，实际上，一些接口返回的对象是其他接口的实现，我希望能够使用该接口的抽象合约类来测试这个实现（......并针对相关变量）。例如，一个方法`MyInterface`可能返回一个迭代器——它是一个接口。我有一个单独的`AbstractIteratorTest`，它针对一组值运行 Iterator 的合同测试，并且我想检查实现`Iterator`返回的返回值是否通过了预期的一组值`MyInterface`的合同测试。`AbstractIteratorTest`

目前，我将以下内容添加到抽象测试类中：

```
// N.b. not setting @Test - so doesn't run all tests twice...
public void runTests(){
  testMyMethod();
  // etc.
} 
```

但是，这不会独立运行每个测试（例如，`setUp()`在每个测试方法之前运行），因此如果这些合同测试期望每个测试的实现处于特定状态，则会出现问题。（一个具体的例子是测试`Iterator`接口的实现，其中每个测试方法都可以改变被测试的状态`Iterator`）

有没有更好的方法来做到这一点，也许是利用 JUnit 4 中的特性？

我已经看到有关`@RunWith(Suite.class)`注释的内容，但这似乎是关于从单个测试类运行多个测试类，并且不允许您将变量传递到正在运行的不同测试类中。可能有一种方法可以使用它 `Suite`来解决我的问题，但我不确定它是什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T08:28:19.227

首先，如果您要对抽象测试类进行子类化，则不需要使用`Parameterized`. 您可以使用`Parameterized`而不是子类化，但您不太可能同时需要两者。除非您想测试每个实现的多个实例，我将在下面演示！

一种方法是让返回实例的测试只是更多的子类或`AbstractAnotherInterfaceTest`.

假设你有：

```
public abstract class AbstractAnotherInterfaceTest {

    private AnotherInterface instance;

    protected AbstractAnotherInterfaceTest(AnotherInterface instance) {
        this.instance = instance;
    }

    @Test
    public void everythingIsOkay() {...}

} 
```

你有：

```
public class Pony implements AnotherInterface { ... }
public class PonyProducingMyInterface implements MyInterface<Pony> { ... } 
```

你可以写：

```
@RunWith(Parameterized.class)
public class PonyTest extends AbstractAnotherInterfaceTest {

    @Parameterized.Parameters
    public static Collection<Pony> ponies() {
        return Arrays.asList(
            new Pony(), // base case
            new PonyProducingMyInterface().myMethod() // testing the factory
        );
    }

    public PonyTest(Pony instance) {
        super(pony);
    }

} 
```

诚然，这有点奇怪，因为该`new PonyProducingMyInterface().myMethod()`案例实际上是对 , 的测试`PonyProducingMyInterface`，但被归类为`AbstractAnotherInterfaceTest`.

我能想到的唯一方法会`AbstractAnotherInterfaceTest`在某些子类中使用测试`AbstractMyInterfaceTest`是编写一个自定义`ParentRunner`，它知道如何将实例设置`AbstractAnotherInterfaceTest`为实例的子类`AbstractMyInterfaceTest`。您可能希望使其具有通用性，使用注释来指导该过程。

# asp.net-mvc - 类库、MVC 和数据注释

> ID：11350325
> 
> 赞同：0
> 
> 时间：2012-07-05T18:26:48.993
> 
> 标签：asp.net-mvc

我是 MVC 的新手，不确定正确的设计。

我有在各种应用程序中使用的类对象。我采用了编写自定义视图模型类的方法，以便可以访问所有这些对象中的属性并具有强类型。如果不在视图模型中重新键入我的所有类代码，有没有办法使用数据注释验证这些对象中的属性？如果我的方法和设计都错了，请告诉我。

```
[Required]        
public User user = new User("username");
//User has lots properites and methods, could i validate inside my class code? 
```

//我想避免将以下内容放在我的自定义视图模型类中，//因为我已经有一个包含这些内容的类库：

```
public class User
{

    [Required]
    [StringLength(160)]
    public string prop1 { get; set; }
    [Required]
    [StringLength(160)]
    public string prop2 { get; set; }
    [Required]
    [StringLength(160)]
    public string prop3 { get; set; }

    public User(string token)
    {
        SetUser(token);
    }

    public void SetUser(string token)
    {
        this.prop1 = "this";
        this.prop2 = "this2";
        this.prop3 = "this3";

    } 
```

============ 很高兴知道我可以，但我在一些问题上遇到了挫折。在我看来，我有：@Html.EditorFor(modelItem => modelItem.user.prop1)

我把数据注释的东西放在我的类域中。当它渲染时，它确实显示了注释。

```
<input class="text-box single-line" data-val="true" data-val-length="The field prop1 must be a string with a maximum length of 5." data-val-length-max="5" data-val-required="The prop1 field is required." id="user_prop1" name="user.prop1" type="text" value="somevalue" /> 
```

但是当我去我的控制器时，参数为空。我想是因为名字是user.prop1。我尝试了一个文本框，我在其中指定了 name 属性，但我的控制器仍然无法为我的参数获取值。

=====================

```
 @model TrainingCalendar.Models.Training

            @{
                ViewBag.Title = "Signup";
            }

            <h2>Signup</h2>

            <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
            <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

            @using (Html.BeginForm("ConfirmSignup", "Training", FormMethod.Post))
            {
                @Html.ValidationSummary(true)
                <fieldset>
                    <legend>Training</legend>
                    <p>
                    @Html.Label("date", Model.SpecifiedCourse.strClassDate)
                    </p>
                    <p>
                    @Html.Label("time", Model.SpecifiedCourse.Time)
                    </p>
                    <p>
                    @Html.Label("instructor", Model.SpecifiedCourse.Instructor)
                    </p>
                    <p>
                    @Html.Hidden("id", Model.SpecifiedCourse.ID)
                    </p>
                    <table>
                        <tr>
                            <td>@Html.LabelFor(modelItem => modelItem.ApplicationUser.prop1)</td>
                            <td>@Html.EditorFor(modelItem => modelItem.ApplicationUser.prop1)</td>
                            <td style="color:Red">@Html.ValidationMessageFor(modelItem => modelItem.ApplicationUser.prop1)</td>
                        </tr>
                        <tr>
                            <td>@Html.LabelFor(modelItem => modelItem.ApplicationUser.prop2)</td>
                            <td>@Html.EditorFor(modelItem => modelItem.ApplicationUser.prop2)</td>
                            <td style="color:Red">@Html.ValidationMessageFor(modelItem => modelItem.ApplicationUser.prop2)</td>
                        </tr>

                    </table>   
                    <p>
                        <input type="submit" value="Sign Up" />
                    </p>
                </fieldset>
            }

            <div>
                @Html.ActionLink("Back to List", "Index")
            </div> 
```

====================

```
 public ActionResult ConfirmSignup(
                        int id,
                        string prop1,
                        string prop2)
                    {
                        SignUpForClass();
                    return View();
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:31:07.387

绝对可以在类代码中使用数据注释属性。如果您在视图模型中封装类，请在视图中填充封装类的属性。在验证过程中，将根据您在类声明中指定的数据注释属性验证类成员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:14:29.520

我也偶然发现了这一点，我最终做的（我不知道它是最好的还是最正确的）也有数据注释，这些注释主要影响我的类库的 DOM 中的数据库，例如 MaxLength、Required、等等，然后在我的视图模型中，我有主要与验证相关的数据注释，例如正则表达式、日期时间格式、最大值或最大长度。通过这种方式，我将系统的两个不同方面的角色分开。视图模型是从我的 DOM 到我的视图可以使用的格式的转换，我的 DOM 专门用于定义数据在数据库中的外观。

# google-places-api - Google Places API 评论，更改排序顺序？

> ID：11350326
> 
> 赞同：1
> 
> 时间：2012-07-05T18:26:56.390
> 
> 标签：google-places-api, review

好吧，根据文档[https://developers.google.com/places/documentation/#PlaceDetails，Google](https://developers.google.com/places/documentation/#PlaceDetails) Places API 现在能够显示来自特定位置的 5 条评论，这非常棒！但这些评论是由“最有帮助”推出的，这是 Google + 本地页面上的默认顺序。

我认为，如果这些评论是最新发布的，那会更有帮助，这样您就可以指出上次发布评论的时间。

更改评论排序顺序是否有任何考虑？或者有什么方法可以确定何时通过 API 发布新评论？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T00:57:21.043

目前无法确定是否通过 Places API 发布了新评论。如果您认为此功能或评论排序将是有用的功能，您可以在[此处](http://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request)提交“Places API - 功能请求” 。

# java - 在 List of Lists 中查找每个列表中存在的元素

> ID：11350327
> 
> 赞同：-2
> 
> 时间：2012-07-05T18:27:05.687
> 
> 标签：java, list, grails

我在java（grails）中有一个列表列表，我正在尝试查找列表中每个列表中存在的元素。有没有人有一个快速的方法来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:37:22.870

如果列表有独特的元素，你可以这样做（但独特的元素我知道一个元素可以放在几个列表中，但每个列表只能放置一次。否则，如果第一个列表包含 [1,2,2,3] 而其他包含[x,2,y] 作为输出，您将看到 [2,2] 而不是 [2] )

```
List tmpList=new ArrayList<>(lists.get(0));
for(int i=1; i<lists.size(); i++)
    tmpList.retainAll(new ArrayList<>(lists.get(i)));
System.out.println(tmpList); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:32:15.300

取 1 个链接列表，复制它，然后检查所有其他链接列表。

如果列表没有元素，则从新创建的列表中删除该元素。

您可以将新创建​​的列表实现为映射或哈希表，以降低时间复杂度。

无论哪种方式，除非您的列表已排序或其他方式，否则您的算法不能比 O(n) 快，其中 n 是所有列表中所有元素的总和

我概述的算法是 O(nm) 其中 m 是您最小列表的计数。

# db2 - 如何在 DB2 中以 varchar 格式按日期查询第二个 10 条记录

> ID：11350331
> 
> 赞同：0
> 
> 时间：2012-07-05T18:27:28.103
> 
> 标签：db2

假设下表；

```
column name | type
id          | int
date        | varchar 
```

当我使用

```
SELECT ROWNUMBER() OVER( ORDER BY TYPE_DATE ) as ROWID,
       TO_DATE( date, 'mm\dd\yyyy' ) as TYPE_DATE,
       * 
FROM TABLE 
```

我总是得到以下错误：

```
SQL0104N an expected token "*" was found following .... <select_sublist> 
```

这里有三个问题：

1.  为什么不能`*`在这里使用？
2.  为什么这个新列不能用于`OVER()`
3.  如何获取第二组 10 条记录，按格式化列排序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T22:30:35.980

要回答您的第一个问题，这是因为您指定了附加列，而 DB2 无法将其扩展`*`为列列表。您可以通过添加表标识符`FROM TABLE T`并使​​用公开的标识符来展开列列表来解决此问题`SELECT ..., T.*`

[正如您在信息中心](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0000875.html)的这张图表上所见，您只能使用 EITHER `*`OR 表达式和`exposed-name.*`

```
>--+-*-----------------------------------------------+---------><
| .-,-------------------------------------------. |   
| V                                             | |   
'---+-expression--+-------------------------+-+-+-'   
    |             | .-AS-.                  | |       
    |             '-+----+--new-column-name-' |       
    '-exposed-name.*--------------------------' 
```

对于二和三，列不能通过`SELECT`别名引用来访问同一子句中函数的值。您可以将其向下推入子选择，然后使用该`OVER()`功能。然后，您可以通过添加以下内容来获取所需的行`BETWEEN`：

```
SELECT ROWNUMBER() OVER( ORDER BY TYPE_DATE ) as ROWID, T1.*
FROM (
    SELECT TO_DATE( date, 'mm\dd\yyyy' ) as TYPE_DATE, T.* 
    FROM TABLE T
) T1
WHERE ROWNUMBER() OVER( ORDER BY TYPE_DATE ) BETWEEN 10 AND 20
ORDER BY TYPE_DATE 
```

# video - 带有令牌链接的 go:video 标签

> ID：11350333
> 
> 赞同：1
> 
> 时间：2012-07-05T18:27:29.250
> 
> 标签：video, facebook-opengraph, token, amazon-cloudfront

我正在尝试为我的网站使用 OG 标签并分享视频。这工作正常，但一段时间后我分享的视频链接过期。该链接来自云端，并设置为大约 15 分钟的有限时间。在阅读了有关 Facebook 每 24 小时抓取新元数据的页面后，我尝试将视频的时间限制延长至 36 小时，但它没有获得新链接。我也试图强迫它[https://developers.facebook.com/tools/debug/](https://developers.facebook.com/tools/debug/) 没有运气。

Facebook在抓取时不会更新视频标签吗？还是我错过了一些参数？

```
<meta property="og:type" content="movie" />
<meta property="og:url" content="<?php echo $url; ?>" />
<meta property="og:video:height" content="<?php echo $version['height']?>" /> 
<meta property="og:video:width" content="<?php echo $version['width']?>" /> 
<meta property="og:video:type" content="application/x-shockwave-flash" />
<meta property="og:title" content="<?php echo $pageMetaData['title']?>" /> 
<meta property="og:description" content="<?php echo $pageMetaData['description']?>" />
<meta property="og:image" content="<?php echo $this->Image->resize('/img/videos/'.$video['Video']['image1'], $width=200, $height=200, $aspect = true, $htmlAttributes = array(),$fulltag = false, $cut = false, $return = false);?>" />
<meta property="og:video" content="<?php echo urlencode($link)?>&autostart=true" /> 
```

# android - 如何使用 egit 将带有 git 的 Android 项目导入工作区？

> ID：11350334
> 
> 赞同：1
> 
> 时间：2012-07-05T18:27:30.820
> 
> 标签：android, eclipse, git, egit

在我的项目中，我使用了一些托管在 github 上的 Android 库，例如[facebook android sdk](https://github.com/facebook/facebook-android-sdk)。到目前为止，我下载了带有库的 .zip 并将其添加到我的工作区。这使得保持最新的图书馆成为一项乏味的工作。

我想在 Eclipse 中使用“Import > Git”选项来导入 Android 项目。之后使用“Team > Pull”获取这些项目的最新版本。那可能吗？如何？

我的两个主要问题是：

*   那里的android项目不在存储库的根目录中，并且
*   没有 .project 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:19:37.827

使用更新管理器或市场客户端将 Mylyn 和[Mylyn Github 连接器](http://wiki.eclipse.org/EGit/GitHub/UserGuide)安装到 Eclipse 中。之后你可以使用*Import -> Git -> From Github*并且只需要给它 github 项目的存储库名称。这将克隆存储库，因此您在系统本地拥有文件（但在 Eclipse 工作区中尚未称为普通项目）。

与使用连接器或任何其他方法克隆 github 存储库无关，之后您需要[将克隆的代码导入工作区](http://wiki.eclipse.org/EGit/User_Guide#Importing_projects)，以便 Eclipse 了解并可以将其作为普通 Java/Android/任何项目进行管理。这最好通过打开 git 透视图、展开存储库节点并使用存储库“工作目录”节点上的上下文菜单“导入项目”来完成。对于没有 .project 文件的项目，您需要使用[import as new project](http://wiki.eclipse.org/EGit/User_Guide#Use_the_New_Projects_Wizard)选项。

# java - java中迭代代码的问题

> ID：11350335
> 
> 赞同：-2
> 
> 时间：2012-07-05T18:27:31.460
> 
> 标签：java

我想转换下面给出的递归函数：

```
 LinkedList i=a; //a contains the nodes which are adjacent to the last element of g
 for(String i1: i )
{
  if(g.contains(i1) || i1.equals("o"))
   { continue; }
  g.addLast(i1);
  func(g);
  g.removeLast();
} 
```

我想将上述程序转换为迭代程序。有人可以帮忙吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:46:45.757

```
LinkedList i=a; //a contains the nodes which are adjacent to the last element of g
   for(String i1: i )
   {
      if(g.contains(i1) || i1.equals("o"))
       { continue; }
      g.addLast(i1);
      func(g);
      g.removeLast();
   } 
```

因此，通过它看起来好像步骤如下：
1）检查当前字符串是否存在或者它是否等于“o”
2a）如果是，则继续
2b）否则将当前字符串放在列表的末尾。
3) 重复步骤 1->2
4) 删除列表的最后一个元素

如果考虑到这些步骤，我要使代码尽可能简单，它看起来像这样：

```
func(LinkedList ll)  
{  

    Set set = new HashSet(ll);  //removes all duplicates  
    if(set.contains("o")  {  set.remove("o") ;}  //these are strings so that works
    LinkedList newLL = new LinkedList(set);  //order still retained  
    newLL.poll();  //remove last element
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:50:12.587

如果我正确理解您的代码，它会找到所有可用的路径，对吗？

我在您的第二个代码中看到的主要 2 个问题是：

*   在递归版本中，您通过调用 func 处理带有 currentNode 的路径，然后删除 currentNode。在迭代版本中，您将visitedNodes 放入“待处理”堆栈中，然后在处理之前更改visitedNodes ！
*   相关问题：你总是在同一个visitedNodes上堆叠

所以一些解决方案是在堆栈中放入visitedNodes + 元素currentNode 的副本。visitedNodes 不会以这种方式改变

如果需要，我可以做一些代码

# java - 如何实现与 Oracle 驱动程序类一起使用的 isValid 连接12？

> ID：11350336
> 
> 赞同：0
> 
> 时间：2012-07-05T18:27:33.277
> 
> 标签：java, oracle, jdbc, connection

我需要实施

```
boolean isValid(int timeout) 
```

就像在 jdk6 中的 java.sql.Connection 一样。但应该使用 Oracle 瘦驱动程序类 12。很明显我可以运行小查询，但是超时呢？我应该为它创建单独的线程吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-21T06:51:57.497

对于 OJDB7：

*isValid(int timeout)* - 是方法 pingDatabase(int i)
*pingDatabase()*的包装器- 进行查询“SELECT 'x' FROM DUAL”。
*pingDatabase(int i)* - 在单独的线程中进行相同的查询。

答案 - 是的，您必须在单独的线程中提出一个小请求。

```
try {
    Thread thread = new Thread(new Runnable() {
        public void run() {
            try {
                result = ...make query and verify result
            } catch(Throwable throwable) {
                return false;
            }
        }
    });
    thread.start();
    thread.join(timeout);
    return result;
catch(InterruptedException interruptedexception) {
    return false;
} 
```

# objective-c - 如何创建具有通用助手的实用程序类？

> ID：11350338
> 
> 赞同：1
> 
> 时间：2012-07-05T18:27:38.823
> 
> 标签：objective-c

我想创建一个具有我需要的常用功能的实用程序类。所以它们必须是静态的，而不是泄漏内存。

假设我想添加这个将 NSString 转换为 NSNumber 的函数：

```
NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterDecimalStyle];
NSNumber * myNumber = [f numberFromString:@"42"];
[f release]; 
```

我怎样才能返回结果而不泄漏？

我必须为此使用自动释放吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:32:30.463

当返回具有不确定所有权的对象时，使用*自动释放*来避免内存泄漏。`NSNumber`的`numberFromString:`方法已经返回一个自动释放的值，所以你不需要在你的情况下做任何特别的事情。对于其他类的对象，您可以这样做：

```
MyClass *ret = [[[MyClass alloc] initWithSomeValue:42] autorelease]; 
```

请注意，如果您使用 ARC，则无需执行任何操作：编译器足够聪明，可以为您解决大部分问题。

在 Java/C++/C# 的 Objective C 中，静态方法被称为*类方法*。`+`您在声明中用 a而不是表示它们`-`，并记住您不能从实现中访问实例方法。

在标题中：

```
@interface MyHelper : NSObject
+(NSString*)format:(NSNumber*)num;
@end 
```

在实施中：

```
@implementation MyHelper

+(NSString*)format:(NSNumber*)num {
    return [num stringValue];
}

@end 
```

# c# - 如何为控件分配订单号？

> ID：11350340
> 
> 赞同：1
> 
> 时间：2012-07-05T18:27:47.997
> 
> 标签：c#, winforms

我创建了一个将所有控件绘制到面板的方法，但它根据我列出的顺序绘制它们，这意味着 PictureBox1 将始终*位于*所有其他图片框的后面。例子：

```
e.Graphics.DrawImage(PictureBox1.BackgroundImage,
    new Rectangle(PictureBox1.Location, PictureBox1.Size));

e.Graphics.DrawImage(PictureBox2.BackgroundImage,
    new Rectangle(PictureBox2.Location, PictureBox2.Size)); 
```

**它首先**绘制 PictureBox1 ，然后是 PictureBox2 ，**然后是****PictureBox3**，以此类推...

这意味着 PictureBox2 被绘制在 PictureBox1 上，而 PictureBox3 被绘制在 PictureBox2 上。这是显示重叠图像的图片：![](../Images/f5765bb42d6aceaa1eb2b4d3a4b7019c.png)

现在，当我在焦点位于 picturebox2 上时按下按钮时，我希望更改 DrawImage 顺序，以便最后绘制 PictureBox2。我相信你们中的一个人对此有很好的解决方案，我想听听您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:56:10.730

在您的问题中，您没有明确说明是什么决定了面板中所有其他图片框的顺序。但是，您可以使用[SetChildIndex](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.setchildindex.aspx)实现相同的效果。例如，要将 PictureBox1 的位置与 PictureBox2 交换，您可以执行以下操作：

```
var p1ndex = panel.Controls.IndexOf(pBox1);
var p2ndex = panel.Controls.IndexOf(pBox2);
panel.Controls.SetChildIndex(pBox1, p1ndex);
panel.Controls.SetChildIndex(pBox2, p2ndex); 
```

在这里，`pBox1`可能是您悬停的最后一个 PictureBox 和`pBox2`当前悬停的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:30:38.407

假设这是 WinForms，您可以调用

```
picturebox2.BringToFront() 
```

在重绘它之前。

如果您需要更好的控制，而不仅仅是“让我在所有其他控件之上”，您可以使用[GetChildIndex](http://msdn.microsoft.com/en-us/library/1fz293fh.aspx)和[SetChildIndex](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.setchildindex.aspx)。

# scala - 如何在scala中交错2个列表的元素

> ID：11350341
> 
> 赞同：8
> 
> 时间：2012-07-05T18:27:49.477
> 
> 标签：scala, scalaz

我想以这样的方式组合两个任意长度的列表，即第二个列表中的元素在每个第 n 个元素之后插入到第一个列表中。如果第一个列表长度小于 n，则没有插入结果。

所以有

```
val a = List(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15)
val b = List(101,102,103)
val n = 3 
```

我希望结果列表如下所示：

```
List(1,2,3,101,4,5,6,102,7,8,9,103,10,11,12,13,14,15) 
```

我使用`foldLeft`on进行了这项工作`a`，但我想知道如何使用 Scalaz 完成相同的逻辑？

感谢大家的回答。他们都对我有帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-06T10:48:41.247

Meet my apomorphism friend

```
def apo[A, B](v: B)(f: B => Option[(A, Either[B, List[A]])]): List[A] = f(v) match {
   case None => Nil
   case Some((a, Left(b)))   => a :: apo(b)(f)
   case Some((a, Right(as))) => a :: as 
} 
```

Your interleave method can be implemented like this

```
def interleave[A](period: Int, substitutes: List[A], elems: List[A]): List[A] =
  apo((period, substitutes, elems)){
    case (_, _, Nil)       => None
    case (_, Nil, v :: vs) => Some((v, Right(vs)))
    case (0, x :: xs, vs)  => Some((x, Left((period, xs, vs))))
    case (n, xs, v :: vs)  => Some((v, Left((n - 1, xs, vs))))  
  } 
```

This gives:

```
scala> interleave(3, b, a)
res1: List[Int] = List(1, 2, 3, 101, 4, 5, 6, 102, 7, 8, 9, 103 , 10, 11 , 12, 13, 14, 15) 
```

The good point is the computation ends when a or b are Nil unlike foldLeft. The bad news is interleave is no more tail recursive

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-06-14T16:00:15.847

这变得非常简单`zipAll`。此外，您可以选择第二个数组的元素数量（在本例中为 1）：

```
val middle = b.grouped(1).toList
val res = a.grouped(n).toList.zipAll(middle, Nil, Nil)
res.filterNot(_._1.isEmpty).flatMap(x => x._1 ++ x._2) 
```

或者，如果您愿意，单行：

```
a.grouped(n).toList.zipAll(b.map(List(_)), Nil, Nil).filterNot(_._1.isEmpty).flatMap(x => x._1 ++ x._2) 
```

您还可以创建一个隐式类，因此您可以调用`a.interleave(b, 3)`或使用可选的第三个参数`a.interleave(b, 3, 1)`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-06T03:08:17.427

这个怎么样：

```
 def process[A](xs: List[A], ys: List[A], n: Int): List[A] = 
   if(xs.size <= n || ys.size == 0) xs
   else xs.take(n):::ys.head::process(xs.drop(n),ys.tail,n) 
```

* * *

```
scala> process(a,b,n) 
res8: List[Int] = List(1, 2, 3, 101, 4, 5, 6, 102, 7, 8, 9, 103, 10, 11, 12, 13, 14, 15)

scala> val a = List(1,2,3,4,5,6,7,8,9,10,11) 
a: List[Int] = List(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11)

scala> process(a,b,n) 
res9: List[Int] = List(1, 2, 3, 101, 4, 5, 6, 102, 7, 8, 9, 103, 10, 11)

scala> val a = List(1,2,3,4,5,6,7,8,9) 
a: List[Int] = List(1, 2, 3, 4, 5, 6, 7, 8, 9)

scala> process(a,b,n) 
res10: List[Int] = List(1, 2, 3, 101, 4, 5, 6, 102, 7, 8, 9)

scala> val a = List(1,2,3,4,5,6,7,8) 
a: List[Int] = List(1, 2, 3, 4, 5, 6, 7, 8)

scala> process(a,b,n) 
res11: List[Int] = List(1, 2, 3, 101, 4, 5, 6, 102, 7, 8) 
```

* * *

您的要求是“如果第一个列表长度小于 n，则没有插入结果”，那么我的代码应更改为：

```
 def process[A](xs: List[A], ys: List[A], n: Int): List[A] = 
   if(xs.size < n || ys.size == 0) xs
   else xs.take(n):::ys.head::process(xs.drop(n),ys.tail,n) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-06T05:52:24.960

没有 Scalaz 和递归。

```
scala> a.grouped(n).zip(b.iterator.map{ Some(_) } ++ Iterator.continually(None)).flatMap{ case (as, e) => if (as.size == n) as ++ e else as }.toList
res17: List[Int] = List(1, 2, 3, 101, 4, 5, 6, 102, 7, 8, 9, 103, 10, 11, 12, 13, 14, 15) 
```

通用方式：

```
def filled[T, A, That](a: A, b: Seq[T], n: Int)(implicit bf: CanBuildFrom[A, T, That], a2seq: A => Seq[T]): That = {
  val builder = bf()
  builder.sizeHint(a, a.length / n)
  builder ++= a.grouped(n).zip(b.iterator.map{ Some(_) } ++ Iterator.continually(None)).flatMap{ case (as, e) => if(as.size == n ) as ++ e else as }
  builder.result()
} 
```

用法：

```
scala> filled("abcdefghijklmnopqrstuvwxyz", "1234", 3)
res0: String = abc1def2ghi3jkl4mnopqrstuvwxyz

scala> filled(1 to 15, 101 to 103, 3)
res1: scala.collection.immutable.IndexedSeq[Int] = Vector(1, 2, 3, 101, 4, 5, 6, 102, 7, 8, 9, 103, 10, 11, 12, 13, 14, 15)

scala> filled(1 to 3, 101 to 103, 3)
res70: scala.collection.immutable.IndexedSeq[Int] = Vector(1, 2, 3, 101)

scala> filled(1 to 2, 101 to 103, 3)
res71: scala.collection.immutable.IndexedSeq[Int] = Vector(1, 2) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-05T20:50:03.730

关于什么：

```
def interleave[A](xs: Seq[A], ys: Seq[A], n: Int): Seq[A] = {
  val iter = xs grouped n
  val coll = iter zip ys.iterator flatMap { case (xs, y) => if (xs.size == n) xs :+ y else xs }
  (coll ++ iter.flatten).toIndexedSeq
}

scala> interleave(a, b, n)
res34: Seq[Int] = Vector(1, 2, 3, 101, 4, 5, 6, 102, 7, 8, 9, 103, 10, 11, 12, 13, 14, 15)

scala> interleave(1 to 2, b, n)
res35: Seq[Int] = Vector(1, 2)

scala> interleave(1 to 6, b, n)
res36: Seq[Int] = Vector(1, 2, 3, 101, 4, 5, 6, 102)

scala> interleave(1 to 7 b, n)
res37: Seq[Int] = Vector(1, 2, 3, 101, 4, 5, 6, 102, 7)

scala> interleave(1 to 7, Nil, n)
res38: Seq[Int] = Vector(1, 2, 3, 4, 5, 6, 7)

scala> interleave(1 to 7, Nil, -3)
java.lang.IllegalArgumentException: requirement failed: size=-3 and step=-3, but both must be positive 
```

它很短，但它不是最有效的解决方案。例如，如果您使用 Lists 调用它，则附加操作 (`:+`和`++`) 是昂贵的 ( `O(n)`)。

编辑：对不起。我现在注意到，你想用 Scalaz 找到解决方案。不过答案可能有用，因此我不会删除它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-03-23T18:19:07.830

这是你想要的：

```
import scala.annotation.tailrec

@tailrec
final def interleave[A](base: Vector[A], a: List[A], b: List[A]): Vector[A] = a match {
  case elt :: aTail => interleave(base :+ elt, b, aTail)
  case _ => base ++ b
}

...

interleave(Vector.empty, a, b) 
```

# python - 在列表中一次迭代两个项目的方法？

> ID：11350342
> 
> 赞同：12
> 
> 时间：2012-07-05T18:27:49.917
> 
> 标签：python, maya

我想知道是否有更好的方法在列表中一次迭代两个项目。我经常使用 Maya，它的一个命令 (listConnections) 返回一个交替值列表。该列表将类似于 [connectionDestination、connectionSource、connectionDestination、connectionSource]。要对这个列表做任何事情，理想情况下我想做类似的事情：

```
for destination, source in cmds.listConnections():
    print source, destination 
```

当然，您可以使用 [::2] 迭代列表中的所有其他项目并枚举和源将是索引 + 1，但是您必须添加对奇数列表和内容的额外检查。

到目前为止，我想出的最接近的事情是：

```
from itertools import izip
connections = cmds.listConnections()
for destination, source in izip(connections[::2], connections[1::2]):
    print source, destination 
```

这不是很重要，因为我已经有了做我想做的事的方法。这似乎是应该有更好的方法的事情之一。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T18:33:24.450

您可以使用以下方法对可迭代的项目进行分组，取自文档[`zip()`](http://docs.python.org/library/functions.html#zip)：

```
connections = cmds.listConnections()
for destination, source in zip(*[iter(connections)]*2):
    print source, destination 
```

或者对于更易读的版本，使用itertools 文档中的 grouper[配方](http://docs.python.org/library/itertools.html#recipes)：

```
def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-15T15:21:27.070

所有，很好的问题和答案。我想提供另一个解决方案来补充 Andrew Clark 的回答（使用 itertools 的道具！）。他的答案像这样返回每个值：

`iterable = [0, 1, 2, 3, 4, 5, 6,...] n = 2 grouper(n, iterable, fillvalue=None) --> [(0, 1), (2, 3), (3, 4), (5, 6),...]`

在下面的代码中，每个值将出现在 n 个子序列中。像这样：

```
def moving_window(n, iterable):
  start, stop = 0, n
  while stop <= len(iterable):
      yield iterable[start:stop]
      start += 1
      stop += 1 
```

`--> [(0, 1), (1, 2), (2, 3), (3, 4),...]`

这种“移动窗口”或“内核”的常见应用是科学和金融中的移动平均线。

另请注意，yield 语句允许根据需要创建每个子序列，而不是将其存储在内存中。

# jquery - 如何在数据表中插入 TD

> ID：11350345
> 
> 赞同：0
> 
> 时间：2012-07-05T18:28:00.053
> 
> 标签：jquery, datatables

在示例页面上度过了一个上午，似乎无法发现为什么这不起作用。

目的是用 ajax（当前是一个示例 txt 文件）填充表，并在每一行中添加一列以允许编辑和删除。尝试了以下代码的各种变体（已演变为丑陋），但可以看出为什么它不起作用。没有任何类型的错误（在萤火虫或其他任何地方）它只是没有像代码“应该”那样添加列。

```
jQuery(document).ready(function($) {
    $(function() {
        tableActions();

        function initTable ()
        {
            var myTable = $('#example').dataTable( {
                "iDisplayLength": 10,
                "bJQueryUI": true,
                "sPaginationType": "full_numbers",
                "bProcessing": true,
                "bStateSave": false,
                "sAjaxSource": 'datatables_example_arrays.txt',
                "aLengthMenu": [[10, 15, 25, -1], [10, 15, 25, "All"]],
                "bRetrieve": true
            } );
            return myTable;
        }

        function tableActions ()
        {
            var oTable = initTable();
            /* Insert an 'edit' column with image to the table */
            var nCloneTh = document.createElement( 'th' );
            var nCloneTd = document.createElement( 'td' );
            nCloneTd.innerHTML = '<img src="title_edit.png">';
            nCloneTd.className = "center";

            $('#example thead tr').each( function () {
                oTable.insertBefore( nCloneTh, this.childNodes[0] );
            } );

            $('#example tbody tr').each( function () {
                oTable.insertBefore(  nCloneTd.cloneNode( true ), this.childNodes[0] );
            } );
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:59:44.597

根据[http://api.jquery.com/insertBefore/](http://api.jquery.com/insertBefore/)

你要这个：

```
$('#example thead tr').each( function () {
    $(nCloneTh).insertBefore(this.childNodes[0]);
}); 
```

虽然可能更“jQuery”的方式来做到这一点是：

```
$('#example thead tr').prepend(nCloneTh); //untested but should work 
```

**编辑**：

好的，我在他的示例与您的示例中看到的唯一真正区别是他在初始化 dataTables 之前附加了“行扩展器”td。

我不确定你的 JSON 输入是什么样的，但这就是我的做法（我会尽量让它有点通用）：

```
aoColumns: [{
    mDataProp: 'Id',
    sClass: 'center',
    bUseRendered: false,
    fnRender: function (o) {
        return '<img src="media/open.png" class="row-expander" alt="" />';
    }
}, {
    mDataProp: 'NoteCount',
    sClass: 'center',        
    bUseRendered: false,
    fnRender: function (o) {
        return String.format('<img src="media/blue/{0}.png" alt="" class="notes-count" />', o.aData.NoteCount);
    }
}, {
    mDataProp: 'Name',
    bUseRendered: false,
    fnRender: function (o) {
        return String.format('<a href="./MyObjHome.aspx?ID={1}">{0}</a>', o.aData.Name, o.aData.Id);
    }
}, // add more columns
] 
```

这样，您无需在每次重新渲染表格时都添加额外的单元格...... dataTables 的内部将处理您的“假”列，该列仅用于保存扩展状态的图像。

如果您使用的是二维数组而不是对象数组，这会变得有点棘手。上述示例的数据源如下所示：

```
[{
    Id: some-guid,
    Name: 'My Object Name',
    NoteCount: 4
}, {
    Id: some-guid-2,
    Name: 'My Second Name',
    NoteCount: 10
}] 
```

# jquery - jQuery 实时预览/选择器不工作

> ID：11350346
> 
> 赞同：0
> 
> 时间：2012-07-05T18:28:06.053
> 
> 标签：jquery, jquery-selectors

好的。jQuery 不是我的强项。我在另一个 DIV 中显示人们输入的实时地址。必须有：

1）在没有所有变量的情况下迭代字段的更好方法？

2）我的选择 onchange 不起作用/显示值？

非常感谢任何想法/帮助。

```
jQuery(function($) {
    var billfirstname = $('#billing_first_name'),
    preview_first_name = $('#billing_first_name_mirror');
    var billlastname = $('#billing_last_name'),
    preview_last_name = $('#billing_last_name_mirror');
    var billadd1 = $('#billing_address_1'),
    preview_bill1 = $('#billing_address_1_mirror');
    var billadd2 = $('#billing_address_2'),
    preview_bill2 = $('#billing_address_2_mirror');
    var billcity = $('#billing_city'),
    preview_bcity = $('#billing_address_city_mirror');
    var billstate = $('#billing_state option:selected'),
    preview_bstate = $('#billing_address_state_mirror');

    billfirstname.bind('keyup blur change click', function(e) {
       preview_first_name.text(billfirstname.val());
    });

    billlastname.bind('keyup blur change click', function(e) {
       preview_last_name.text(billlastname.val());
    });

    billadd1.bind('keyup blur change click', function(e) {
       preview_bill1.text(billadd1.val());
    }); 

    billadd2.bind('keyup blur change click', function(e) {
       preview_bill2.text(billadd2.val());
    });
    billcity.bind('keyup blur change click', function(e) {
       preview_bcity.text(billcity.val());
    });
    billstate.bind('change',function(e) {
       preview_bstate.text(billstate.val());
    });  

}); 
```

HTML 看起来像这样 - 除了 billstate 的 selet 之外，它都可以正常工作：

```
 <p class="form-row form-row-first" id="billing_first_name_field">
                <label for="billing_first_name" class="">First Name <abbr class="required" title="required">*</abbr></label>
                <input type="text" class="input-text" name="billing_first_name" id="billing_first_name" placeholder="" value="" />
            </p>    

<p class="form-row form-row-last" id="billing_last_name_field">
                <label for="billing_last_name" class="">Last Name <abbr class="required" title="required">*</abbr></label>
                <input type="text" class="input-text" name="billing_last_name" id="billing_last_name" placeholder="" value="" />
            </p><div class="clear"></div>   

<p class="form-row " id="billing_company_field">
                <label for="billing_company" class="">Company Name</label>
                <input type="text" class="input-text" name="billing_company" id="billing_company" placeholder="" value="" />
            </p><div class="clear"></div>   

<p class="form-row form-row-wide" id="billing_address_1_field">
                <label for="billing_address_1" class="">Address <abbr class="required" title="required">*</abbr></label>
                <input type="text" class="input-text" name="billing_address_1" id="billing_address_1" placeholder="" value="" />
            </p>    

<p class="form-row form-row-wide" id="billing_address_2_field">
                <label for="billing_address_2" class="hidden">Address 2</label>
                <input type="text" class="input-text" name="billing_address_2" id="billing_address_2" placeholder="" value="sdfgsdfgs" />
            </p><div class="clear"></div>   

<p class="form-row form-row-third" id="billing_city_field">
                <label for="billing_city" class="">City <abbr class="required" title="required">*</abbr></label>
                <input type="text" class="input-text" name="billing_city" id="billing_city" placeholder="" value="sdfgs" />
            </p>    

<p class="form-row form-row-third-smaller-inline select" id="billing_state_field">
                <label for="billing_state" class="">State / Province <abbr class="required" title="required">*</abbr></label>
                <select name="billing_state" id="billing_state" class="select">
                    <option value="" >---</option><option value="AK" >AK</option><option value="AZ" >AZ</option><option value="AR" >AR</option><option value="CA" >CA</option><option value="CO" >CO</option><option value="CT" >CT</option><option value="DE" >DE</option><option value="DC" >DC</option><option value="FL" >FL</option><option value="GA" >GA</option><option value="HI" >HI</option><option value="ID" >ID</option><option value="IL" >IL</option><option value="IN" >IN</option><option value="IA" >IA</option><option value="KS" >KS</option><option value="KY" >KY</option><option value="LA" >LA</option><option value="ME" >ME</option><option value="MD" >MD</option><option value="MA" >MA</option><option value="MI" >MI</option><option value="MN" >MN</option><option value="MS" >MS</option><option value="MO" >MO</option><option value="MT" >MT</option><option value="NE" >NE</option><option value="NV" >NV</option><option value="NH" >NH</option><option value="NJ" >NJ</option><option value="NM" >NM</option><option value="NY"  selected='selected'>NY</option><option value="NC" >NC</option><option value="ND" >ND</option><option value="OH" >OH</option><option value="OK" >OK</option><option value="OR" >OR</option><option value="PA" >PA</option><option value="RI" >RI</option><option value="SC" >SC</option><option value="SD" >SD</option><option value="TN" >TN</option><option value="TX" >TX</option><option value="UT" >UT</option><option value="VT" >VT</option><option value="VA" >VA</option><option value="WA" >WA</option><option value="WV" >WV</option><option value="WI" >WI</option><option value="WY" >WY</option><option value="  " >---</option><option value="BC" >BC</option><option value="ON" >ON</option><option value="NL" >NL</option><option value="NS" >NS</option><option value="PE" >PE</option><option value="NB" >NB</option><option value="QC" >QC</option><option value="MB" >MB</option><option value="SK" >SK</option><option value="AB" >AB</option><option value="NT" >NT</option><option value="NU" >NU</option><option value="YT" >YT</option>
                </select>
            </p>    

<p class="form-row form-row-third-last input-text" id="billing_postcode_field">
                <label for="billing_postcode" class="">Zipcode <abbr class="required" title="required">*</abbr></label>
                <input type="text" class="input-text" name="billing_postcode" id="billing_postcode" placeholder="" value="" />
            </p>    

<p class="form-row form-row-first select" id="billing_country_field">
                <label for="billing_country" class="">Country <abbr class="required" title="required">*</abbr></label>
                <select name="billing_country" id="billing_country" class="select">
                    <option value="" >Select Country</option><option value="US"  selected='selected'>United States</option><option value="CA" >Canada</option>
                </select>
            </p><div class="clear"></div>   

<p class="form-row form-row-first input-text" id="billing_email_field">
                <label for="billing_email" class="">Email Address <abbr class="required" title="required">*</abbr></label>
                <input type="text" class="input-text" name="billing_email" id="billing_email" placeholder="" value="" />
            </p>    

<p class="form-row form-row-last input-text" id="custom_billing_phone_field">
                <label for="custom_billing_phone" class="">Phone <abbr class="required" title="required">*</abbr></label>
                <input type="text" class="input-text" name="custom_billing_phone" id="custom_billing_phone" placeholder="" value="" />
            </p><div class="clear"></div> 
```

进而写入我的 div （当然没有完成 - 只是测试）：

```
 <div id="shipadddiv">
    <span class="mirror_billing_first_name" id="billing_first_name_mirror"></span>&nbsp;&nbsp;<span class="mirror_billing_last_name" id="billing_last_name_mirror"></span><br>
    <span id="billing_address_1_mirror"></span>
    <span class="" id="billing_address_2_mirror"></span>
    <span id="billing_address_city_mirror"></span>&nbsp;&nbsp;<span id="billing_state_mirror"></span>&nbsp;&nbsp;<span id="billing_postcode_mirror"></span>

    </div> 
```

**编辑 - 找出 onchange 选择。那是一个拼写错误。已更正，现在正在工作。代码运行良好，但要点是 - 可能有 400 种更好的方法可以更有效地编写它。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:37:00.157

好吧，您可以通过向您的 html 输入添加属性来概括这一点。该属性，我们称之为 preview-id 将包含预览控件 id。

接下来只需编写一个选择器来查找所有具有预览属性的镜像输入，并使用结果创建绑定。

**html**

```
<input type="text" id="first-name" mirror-id="first-name-preview" />

<span id="first-name-preview" /> 
```

**jQuery**

```
$('input[mirror-id]').bind('keyup blur change click', function(e) {
    $('#' + this.attr('mirror-id')).text(this.val());
}); 
```

未经测试的 jQuery，但希望你能明白

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:40:52.097

这是可以解决问题 1 和 2 的示例。

```
$(document).ready(function(){
    var fields = ["billing_first_name","billing_last_name","billing_address_1","billing_address_2","billing_city","billing_address_city","billing_state"];
    for(var i=0; i<fields.length; i++){
         $("#" + fields[i]).bind('keyup blur change click', {'field': fields[i]}, function(event){
            $("#" + event.data.field + "_mirror").text($(this).val());
        });
    }
}); 
```

示例：[jsFiddle](http://jsfiddle.net/RG42q/2/)

# java - Runtime.exec().waitFor() 实际上并没有等待

> ID：11350347
> 
> 赞同：12
> 
> 时间：2012-07-05T18:28:15.093
> 
> 标签：java, multithreading, runtime.exec

我有一些代码使用 Runtime.exec() 来运行外部 .jar（作为 IzPack 安装程序构建）。

如果我像这样从命令行运行这个 external.jar：

```
java -jar external.jar 
```

然后命令提示符在应用程序完成之前不会返回控制。但是，如果我从某个 java 类中运行 external.jar，请使用：

```
Process p = Runtime.getRuntime().exec("java -jar external.jar");
int exitCode = p.waitFor();
System.out.println("Process p returned: " + exitCode); 
```

然后`p`几乎立即返回成功代码`0`，尽管 external.jar 尚未完成执行（我也通过`ProcessBuilder`外部文件执行的路线尝试过）。

为什么它等待从命令行返回，而不是在另一个 java 程序中执行时？

我还设置了 3 个罐子，A、B 和 C，其中 A 调用 B 调用 C（使用`Runtime.exec()`），其中 C`Thread.sleep`持续 10 秒，作为一个简单的测试，并且正如预期的那样，A 直到 10 秒后才返回它运行。

我认为这可能是 external.jar 的某种线程问题，其中执行正在从一件事移交给另一件事，但鉴于它直接从命令行工作，我有点希望看到相同的行为（可能是天真）从另一个 java 程序中调用时。

我已经使用 Java 6 在 Windows 和 Ubuntu 上对此进行了测试。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-30T08:32:54.550

another possible way to achieve this might be to capture the output of the process and wait for it to finish.

For example:

```
Process tr = Runtime.getRuntime().exec( new String[]{"wkhtmltopdf",mainPage,mainPagePDF});
BufferedReader stdOut=new BufferedReader(new InputStreamReader(tr.getInputStream()));
String s;
while((s=stdOut.readLine())!=null){
       //nothing or print
} 
```

Normally the output stream is tr.getInputStream() but depending on the program you are executing the process output stream migh be:

*   tr.getInputStream()
*   tr.getErrorStream()
*   tr.getOutputStream()

By doing this while loop you force your program to wait the process to finish.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-23T10:52:54.320

您可以使用流程生成器....

```
ProcessBuilder pb = new ProcessBuilder("java", "-jar", "/fielname.jar");
Process p = pb.start();
p.waitFor(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:06:07.447

您是否正在生成一个新线程来处理进程的生成？如果是这样，原始程序将继续独立于生成的进程运行，因此 waitFor() 将仅适用于新进程而不是父进程。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-07T06:19:51.743

`Process.waitFor()`对于某些本机系统命令是无用的。

您需要获取进程的输出以确定是否返回。

我为你写了一个示例代码

```
/**
 * 
 * @param cmdarray      command and parameter of System call
 * @param dir           the directory execute system call
 * @param returnImmediately   true indicate return after system call immediately; 
     *                          false otherwise.
 *  if set true, the returned call result does not have reference value
 * @return the return code of system call , default is -1
 */
public static int systemCall(String[] cmdarray,File dir,boolean returnImmediately)
{
  int result = -1;
  try {
   Process p = Runtime.getRuntime().exec(cmdarray,null,dir);
  if(!returnImmediately)
  {
   java.io.InputStream stdin = p.getInputStream();
   java.io.InputStreamReader isr = new java.io.InputStreamReader(stdin);
   java.io.BufferedReader br = new java.io.BufferedReader(isr);
   String line = null;
   while ( (line = br.readLine()) != null)
      System.out.println(line);
      }
      try{result =  p.exitValue();}
        catch(Exception ie){;}
      } catch (IOException e) {
        e.printStackTrace();}

  return result;
}

public static void main(String[] argc){             
  String[] cmdarray = {"jar","cvf","s2.jar","*"};
  File dir = new File("D:\\src\\struts-2.3.1");
  int k = systemCall(cmdarray,dir,true);
  System.out.println("k="+k);
 } 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-12-10T10:31:33.850

我在使用控制台执行某些软件的过程中遇到了同样的问题，我只是使用 process.waitFor() 解决了它

对我来说，它工作得很好。

```
 try{
        Process tr = Runtime.getRuntime().exec( new String[]{ "wkhtmltopdf",frontPage,frontPagePDF});
        tr.waitFor();
    } catch (Exception ex) {
        EverLogger.logEntry("Error al pasar a PDF la portada", "error", "activity");
        return;
    } 
some more code here. 
```

# objective-c - UIBarButton initWithTitle

> ID：11350356
> 
> 赞同：0
> 
> 时间：2012-07-05T18:28:49.687
> 
> 标签：objective-c, uisplitviewcontroller, uibarbuttonitem

我有一个拆分视图应用程序。在纵向模式下，菜单在单击后会消失。为了解决这个问题，我添加了一个新按钮，它只是应该显示菜单：

```
- (void)viewDidLoad {
    [super viewDidLoad];

    // FORM LIST button was dissapearing, this adds it back everytime
    UIBarButtonItem *btnMenu = [[UIBarButtonItem alloc]initWithTitle:@"Forms List" style:UIBarButtonItemStyleBordered target:self action:@selector(showMenu:)];
    self.navigationItem.leftBarButtonItem = btnMenu;

} 
```

每次我加载该视图时都会出现。我的问题是我收到一个错误：

```
Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[DetailViewController showMenu:]: unrecognized selector sent to instance 0x9d58810 
```

我很确定问题出在这一行：

```
UIBarButtonItem *btnMenu = [[UIBarButtonItem alloc]initWithTitle:@"Forms List" style:UIBarButtonItemStyleBordered target:self action:@selector(showMenu:)]; 
```

我的问题是：（1）showMenu：合适的方法吗？(2) 目标应该是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:32:11.283

确保你的方法有参数

```
- (void)showMenu:(id)sender
- (IBAction)showMenu:(id)sender 
```

如果它没有参数，那么如果它只是`-(void)showMenu`，那么您应该从 中删除`:`（冒号）`@selector(showMenu:)`。

当您`showMenu`从实际视图（即`Main View`）调用 时，showMenu 方法应该在您的`Main View`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:42:52.373

感谢你们所有人，我发现我的代码存在多个问题。

(1) 我认为 showMenu 是一个内置函数，并没有在我的程序中的任何地方声明它。

(2) 我不知道目标或行动是如何起作用的。

谢谢你们（女孩？）！

# magento - 获取已删除类别的 id [Magento]

> ID：11350363
> 
> 赞同：0
> 
> 时间：2012-07-05T18:29:02.707
> 
> 标签：magento, adminhtml

如何从 Observer 获取已删除类别的 id？

config.xml 标记

```
<adminhtml>
    <events>
        <catalog_category_delete_after>
            <observers>
                <my_module>
                    <type>singleton</type>
                    <class>my_module/observer</class>
                    <method>onCategoryDeleteAfter</method>
                </my_module>
            </observers>
        </catalog_category_delete_after>
    </events>
</adminhtml> 
```

观察者代码类似于：

```
class My_Module_Model_Observer
{
    public function onCategoryDeleteAfter() {    
        #do something with deleted category id
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:56:09.510

使用传递的 $observer 变量。

```
class My_Module_Model_Observer
{
    public function onCategoryDeleteAfter($observer) {
        $observer->getEvent()->getCategory();
    }
} 
```

# magento - Magento 管理网格的不同表名

> ID：11350364
> 
> 赞同：1
> 
> 时间：2012-07-05T18:29:11.967
> 
> 标签：magento

我已经使用以扩展名命名的表构建了一个扩展。现在我想更改表名并在其后面添加“_items”。我在所有可以找到名称但没有结果的 de 类中更改了名称。我肯定错过了一些东西，但不确定是什么。任何帮助将不胜感激在哪里定义表名

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:41:55.310

在 config.xml 中，您可以将标签内的内容更改为您希望它指向的任何表名。只是不要更改实体名称（在您的情况下是这样）。您不应该更改任何类中的任何内容。这就是 Magento 体系结构的美妙之处，您的类不依赖于表模式（即表名）。

# javascript - 如何使用 jQuery 突出显示 DIV 的特定部分？

> ID：11350365
> 
> 赞同：0
> 
> 时间：2012-07-05T18:29:12.333
> 
> 标签：javascript, jquery, css

我正在使用 Visual Studio 2010 和 jQuery 1.7。

假设我的页面完全覆盖了 div 宽度 100% 和高度 100%。

我只想选择一个特定的部分并更改该部分的 CSS，例如，用不同的颜色突出显示它。

我想使用 jQuery 突出显示 DIV 的特定部分

请帮帮我！！！！

**更新**

```
<html>
<head></head>
<body>
behind the whole html of the page this 
div overlay's the html tag
<div Style="width:100%; height:100%; z-index:100000;">
</div>
</body>
</html> 
```

我不想选择像 bugmuncher.com 这样的文本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:34:51.377

对某个 div id 或类执行突出显示。

```
$('#id').css('backgroundColor', 'yellow'); 
```

确保使用 span 标签包装特定代码。

```
Your sentence with a <span id="id">highlighted</span> part. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:58:09.793

也许试试[jquery hilighter 插件](http://johannburkard.de/blog/programming/javascript/highlight-javascript-text-higlighting-jquery-plugin.html)。使用简单。

# javascript - 焦点（）将不起作用

> ID：11350366
> 
> 赞同：2
> 
> 时间：2012-07-05T18:29:14.970
> 
> 标签：javascript, jquery

我在这里不知所措，以前从来没有遇到过这个问题。
我无法让 focus() 在任何浏览器中工作。我正在使用 jquery，甚至无法让它与标准 javascript 一起使用。我也尝试添加超时，但仍然没有。我在警报中得到的只是“未定义”。

这是输入

```
<input type="text" name="SearchBox" id="SearchBox" class="SearchBox" /> 
```

这是jquery

```
$(document).ready(function(){
    setTimeout(function(){
        $("#SearchBox").focus();
    }, 0);
    alert($("*:focus").attr("id"));
}); 
```

我已经将页面剥离到上面的内容，以防有东西干扰它但仍然没有成功。它必须是我想念的简单的东西！！！！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T18:31:57.183

在文档就绪处理程序完成之前，搜索框不会获得焦点。

当您调用 时`setTimeout`，即使超时设置为零，JavaScript 也不会处理该超时，直到当前函数完成。这是因为 JS 是单线程的。

以零超时调用`setTimeout`就像说“这是我希望你做的事情，一旦这个函数完成。”

`alert`因此，在调用之后，搜索框才会获得焦点。

[一个例子](http://jsfiddle.net/NtTNf/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:46:16.220

尝试这个..

```
$(document).ready(function(){
    setTimeout(function(){
        $('#SearchBox').focus();
    },0);
    $(":input").focus(function(){
        alert($(this).attr("id"));
    });
}); 
```

# ios5 - UITableViewCell 子类中的 IFTweetLabel 未显示

> ID：11350367
> 
> 赞同：1
> 
> 时间：2012-07-05T18:29:18.777
> 
> 标签：ios5, uitableview, ios

现在我正在制作一个 twitter 应用程序，我正在使用 IFTweetLabel。我创建了一个 TableViewCell 子类，但是当我运行它时，标签会出现。

这是.h：

```
#import <UIKit/UIKit.h>
#import "IFTweetLabel.h"

@interface twitterTextCell : UITableViewCell
@property (strong, nonatomic) IFTweetLabel *customtextLabel;

@end 
```

这是实现：

```
#import "twitterTextCell.h"

@implementation twitterTextCell
@synthesize customtextLabel;

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    // Initialization code
    customtextLabel.backgroundColor = [UIColor orangeColor];
    self.customtextLabel.frame = CGRectMake(240, 60, 345, 109);
    [self addSubview:customtextLabel];

    NSLog(@"Custom Label Text: %@", customtextLabel.text);
}
return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
[super setSelected:selected animated:animated];

// Configure the view for the selected state
}
-(UILabel *)textLabel
{
return nil;
} 
```

这是 tableviewdelegate 的 cellforrow 中的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
static NSString *CellIdentifier = @"Cell";

twitterTextCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {

    cell = [[twitterTextCell alloc] initWithStyle:UITableViewCellStyleSubtitle  reuseIdentifier:CellIdentifier];
        }

NSDictionary *tweet = [self.timeLineData objectAtIndex:indexPath.row];

    if ([tweet objectForKey:@"text"] != nil) {

        NSString *allText = [[tweet objectForKey:@"text"] stringByDecodingHTMLEntities];

        cell.customtextLabel.numberOfLines = 4;
        cell.textLabel.numberOfLines = 4;
        cell.customtextLabel.text = allText;
        cell.textLabel.text = allText;
        cell.customtextLabel.linksEnabled = YES;

        NSDictionary *whoPostedTweet = [tweet objectForKey:@"user"];
        cell.detailTextLabel.text = [whoPostedTweet objectForKey:@"name"];
        NSURL *imageURL = [NSURL URLWithString:[NSString stringWithFormat:@"%@", [whoPostedTweet objectForKey:@"profile_image_url"]]];
        [cell.imageView setImageWithURL:imageURL placeholderImage:[UIImage imageNamed:@"placeholder.png"]];
        cell.backgroundColor = [UIColor clearColor];
        [cell.imageView.layer setCornerRadius:7.0f];
        [cell.imageView.layer setMasksToBounds:YES];
        return cell;

        } else {

        [self getTwitterData];
        NSLog(@"nil called(else) ");
        return cell;
        }

    return cell;
        } 
```

毕竟这一切只显示图像和detailtextview。我删除了默认的文本视图，因为如果我没有正常显示文本，但它不是 IFTweetLabel。我有一个问题是如何重新定位detailtextabel，使其位于IFTweetLabel 下。任何事情都非常感谢，我在这两个问题上都需要帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:36:07.373

我认为您的问题是您没有分配 customTextLabel。

只需在设置背景颜色之前分配相同的`initWithStyle`. 即，`self.customtextLabel = [[[IFTweetLabel alloc] init] autorelease]`;

# javascript - 如何将辅助 y 轴添加到 highcharts

> ID：11350368
> 
> 赞同：3
> 
> 时间：2012-07-05T18:29:28.563
> 
> 标签：javascript, highcharts

我最近开始使用 highcharts javascript 库，遇到了一种情况，我应该在现有折线图中添加辅助 y 轴。这是来自 highcharts 网站的一个示例，类似于我正在处理的图表 ==> [折线图](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/line-basic/)

我正在尝试做的是在右侧添加第二个 y 轴，颜色为蓝色，并在交替线上使用刻度值 0、1、2 和 3。这似乎很容易，并通过以下方式尝试但未能成功

```
yAxis: [{
                title: {
                    text: 'Temperature (°C)'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: 'red'
                }]
            }, {
                title: {
                    text: 'Temperature (F)'
                },
                plotLines: [{
                    value: 0,
                    width: 1,
                    color: 'blue'
                }]
            }], 
```

请指导我。提前致谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-05T18:31:48.460

请参阅此[文档](http://api.highcharts.com/highcharts/xAxis.opposite)和此[演示](http://jsfiddle.net/gh/get/jquery/1.7.1/highslide-software/highcharts.com/tree/master/samples/highcharts/yaxis/opposite/)。请注意，您不必使轴与图表相对。您可以对同侧轴使用偏移量。

诀窍是您需要一个多轴设置列表，并且该系列需要确定它使用哪个从零开始的轴：

```
Highcharts.chart('container', {
    chart: {
        marginRight: 80 // like left
    },
    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },
    yAxis: [{
        lineWidth: 1,
        title: {
            text: 'Primary Axis'
        }
    }, {
        lineWidth: 1,
        opposite: true,
        title: {
            text: 'Secondary Axis'
        }
    }],

    series: [{
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]
    }, {
        data: [144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4, 29.9, 71.5, 106.4, 129.2],
        yAxis: 1
    }]
}); 
```

（编辑：文档需要链接到 xAxis.opposite 因为 yAxis.opposite 丢失，添加了 jsfiddle 代码的副本，添加了关于多轴的注释。）

# java - 在 JFreeChart 中的 XYLineChart 顶部放置一个圆圈

> ID：11350380
> 
> 赞同：1
> 
> 时间：2012-07-05T18:30:37.730
> 
> 标签：java, jfreechart

我使用 JFreeChart 绘制了标准正态分布：

```
NormalDistributionFunction2D normalDistributionFunction2D = new NormalDistributionFunction2D(0.5, 0.15);
XYDataset dataset = DatasetUtilities.sampleFunction2D(normalDistributionFunction2D, 0.0, 1.0, 1000, "Normal");
JFreeChart chart = ChartFactory.createXYLineChart("MyTitle --, "", "", xySeriesCollection, PlotOrientation.VERTICAL, false, false, false); 
```

![标准正态分布](../Images/84d4901560228709cae703428d9e25fa.png)

最重要的是，我想在给定点放置一个圆圈。我计算圆的 [x,y] 坐标没有问题，但我不确定如何将它添加到图表中。任何帮助表示赞赏。下面是我想要实现的 MS Paint 组合。

![在此处输入图像描述](../Images/02aa22bfd89eec3b9392fcd49aa0aff7.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T19:01:42.703

您绝对不需要覆盖paint 方法或在顶部添加图层。JFreeChart 已经支持这种行为。

正确的做法是给图表添加注解，具体来说：

```
chart.getPlot().addAnnotation(new XYShapeAnnotation(new Ellipse2D.Double(x - radius, y - radius, radius + radius, radius + radius)) 
```

其中 x 和 y 是圆的中心。请注意，坐标在您的绘图空间中，而不是图形空间中。JFreeChart 会在渲染时自动转换它们。

看看： [http](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/annotations/XYShapeAnnotation.htm) ://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/annotations/XYShapeAnnotation.htm http://www.java2s.com/Code/Java/Chart/JFreeChartPlotOrientationDemo2。 htm

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:49:07.970

如果您有该点的坐标，则可以：

1.  将您的图表添加到 JPanel 并在其上绘制圆圈`paintComponent`（有点困难，因为您必须补偿图表边框
2.  在仅包含一个点的同一图表上绘制第二个系列。请参阅这篇[文章](https://stackoverflow.com/questions/6665354/changing-the-shapes-of-points-in-scatter-plot/6669529#6669529)以定义自定义形状以呈现数据点 - 您可以定义要呈现为数据点的圆圈

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-13T05:19:45.477

一种方法是将具有 x 和 y 坐标的点添加到系列中，例如 (0,0)。现在，现在设置，`renderer.setSeriesShape(series,new Ellipse2D.Double(-3, -3, 6, 6));`您可以更新系列并使点也可移动。

# jquery - 如果孩子有 CSS，则调整父级大小并使用 jQuery 获取子级索引

> ID：11350382
> 
> 赞同：1
> 
> 时间：2012-07-05T18:30:38.913
> 
> 标签：jquery, css

如果孩子身高发生变化，我正在尝试动态更改多个父母的高度。

每个父母只有一个具有 z-index 样式的孩子。

这是我根据我的发现尝试做的

HTML

```
<div class="parent">
    <div class="child"></div>
    <div class="child2"></div>
    <div class="child3"></div>
</div>
<br>

<div class="parent">
    <div class="child" style="z-index:1;"></div>
    <div class="child2"></div>

</div>
<br>

<div class="parent">
    <div class="child" ></div>
    <div class="child2" style="z-index:1;"></div>

</div> 
```

查询

```
$(".parent").each(function() {

  var divIndex = ;
  var divHeight = ;  

  if ($('this').children().css('z-index') == '1')
{
   // Get height and index of the single specific element with z-index css 
}

$('this').resize();
    $('this').delegate();

}); 
```

[JSFiddle](http://jsfiddle.net/shavindra/EgbLk/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:10:55.940

我会这样做：

```
$('.parent').children().filter(function() {
        return this.style.zIndex==='1';
    }).each(function(index, elem) {
        var divIndex=$(elem).index(),
            divHeight=$(elem).css('height');
        $(elem).resize();
        $(elem).delegate();
});​ 
```

在您的小提琴中，z-index=1 的元素都没有高度。不知道 resize 和 delegate 函数是做什么的，但我认为它们是你正在使用的函数。

要将父“.parent”元素的大小调整为与 z-index=1 在调整大小时动态调整的元素相同的高度，您可以这样做：

```
$('.parent').children().filter(function() {
        return this.style.zIndex==='1';
    }).each(function(index, elem) {
        var divIndex=$(elem).index(),
            divHeight=$(elem).css('height');
        $(elem).on('resize', function() {
            $(this).closest('.parent').css('height', $(this).height());
        });
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:07:16.917

您的代码充满了 javascript 错误，更具体地说是 $('this') 的使用，去掉单引号：$(this);

由于使用 id 而不是类，大多数 CSS 不会设置样式。

这是一个更新的 jsfiddle，它纠正了错误，并将让您走上迭代父子 div 的正确轨道：

[http://jsfiddle.net/EgbLk/4/](http://jsfiddle.net/EgbLk/4/)

```
$('.parent').children().each(
    function(){

      var divIndex = null ;
      var divHeight = null ;          

      if($(this).css('z-index') === '1') {
         alert('z-index is 1'); 
      }

      $(this).parent().resize();
      $(this).parent().delegate();      
    }
); 
```

这是一些“更正”的 CSS：

```
.parent {
    width: 100px;
    padding: 10px;
    background:#ff0000;
}

.child2 {
    position: absolute;
    width: auto;
    left: 0px;
    right: 0px;
    height:20px
}

.child {
    position: absolute;
    width: auto;
    left: 0px;
    right: 0px;
    height:50px
        z-index:1;
}

.child3 {
    position: absolute;
    width: auto;
    left: 0px;
    right: 0px;
    height:100px
} 
```

# wpf - 扩展玻璃边框的拖放问题

> ID：11350387
> 
> 赞同：1
> 
> 时间：2012-07-05T18:30:59.650
> 
> 标签：wpf, border, drag, aero, aero-glass

我正在玩 WPF 中的玻璃边框，但我发现了一个问题。当我扩展窗口的玻璃边框时，拖放功能将不再起作用……例如，将 GridSplitter 拖到结尾处出现异常。

我的主窗口的 XAML：

```
<Window 
    x:Class="ChromeDragDrop.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:shell="clr-namespace:Microsoft.Windows.Shell;assembly=Microsoft.Windows.Shell"
    xmlns:local="clr-namespace:ChromeDragDrop"
    Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style TargetType="{x:Type local:MainWindow}">
            <Setter Property="shell:WindowChrome.WindowChrome">
                <Setter.Value>
                    <shell:WindowChrome GlassFrameThickness="-1" ResizeBorderThickness="4" CaptionHeight="36"/>
                </Setter.Value>
            </Setter>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type local:MainWindow}">
                        <ContentPresenter Content="{TemplateBinding Content}"></ContentPresenter>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>
    <Grid Margin="50">
        <Grid.RowDefinitions>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
        </Grid.RowDefinitions>    
        <Border Background="Lime" Opacity="0.8"></Border>
        <Border Background="Gray" Opacity="0.8" Grid.Row="1"></Border>
        <GridSplitter Background="Red" Height="10" ShowsPreview="True"  ResizeDirection="Rows" HorizontalAlignment="Stretch" Grid.Row="1" VerticalAlignment="Top"></GridSplitter>
    </Grid>
</Window> 
```

例外：

```
System.NullReferenceException was unhandled
  Message=Object reference not set to an instance of an object.
  Source=PresentationFramework
  StackTrace:
       at System.Windows.Controls.GridSplitter.OnDragDelta(DragDeltaEventArgs e)
       at System.Windows.Controls.GridSplitter.OnDragDelta(Object sender, DragDeltaEventArgs e)
       at System.Windows.Controls.Primitives.DragDeltaEventArgs.InvokeEventHandler(Delegate genericHandler, Object genericTarget)
       at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
       at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
       at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
       at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
       at System.Windows.UIElement.RaiseEvent(RoutedEventArgs e)
       at System.Windows.Controls.Primitives.Thumb.OnMouseMove(MouseEventArgs e)
       at System.Windows.UIElement.OnMouseMoveThunk(Object sender, MouseEventArgs e)
       at System.Windows.Input.MouseEventArgs.InvokeEventHandler(Delegate genericHandler, Object genericTarget)
       at System.Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target)
       at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
       at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
       at System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
       at System.Windows.UIElement.RaiseTrustedEvent(RoutedEventArgs args)
       at System.Windows.UIElement.RaiseEvent(RoutedEventArgs args, Boolean trusted)
       at System.Windows.Input.InputManager.ProcessStagingArea()
       at System.Windows.Input.InputManager.ProcessInput(InputEventArgs input)
       at System.Windows.Input.InputProviderSite.ReportInput(InputReport inputReport)
       at System.Windows.Interop.HwndMouseInputProvider.ReportInput(IntPtr hwnd, InputMode mode, Int32 timestamp, RawMouseActions actions, Int32 x, Int32 y, Int32 wheel)
       at System.Windows.Interop.HwndMouseInputProvider.FilterMessage(IntPtr hwnd, WindowMessage msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at System.Windows.Interop.HwndSource.InputFilterMessage(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       at MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
       at System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
       at MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler)
       at System.Windows.Threading.Dispatcher.InvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
       at MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       at MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
       at System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
       at System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
       at System.Windows.Application.RunDispatcher(Object ignore)
       at System.Windows.Application.RunInternal(Window window)
       at System.Windows.Application.Run(Window window)
       at System.Windows.Application.Run()
       at ChromeDragDrop.App.Main() in C:\Project\CSharp\Learn\WPF\ChromeGlass\ChromeDragDrop\ChromeDragDrop\obj\x86\Debug\App.g.cs:line 0
       at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
       at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       at System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:24:05.233

您是否尝试过`AdronerDecorator`在窗口的根目录添加一个？我遇到了同样的异常，但在我的情况下，我的 WPF 控件托管在`HwndSource`MFC 窗口中。有关详细信息，请参阅[此 MS 知识库文章](http://support.microsoft.com/kb/955940/de)。

# ajax - Grails：将 javascript 变量传递给模板

> ID：11350388
> 
> 赞同：0
> 
> 时间：2012-07-05T18:31:00.430
> 
> 标签：ajax, grails, gsp

我是 ajax 新手，所以也许这很明显。我尝试了许多不同的不起作用的方法。我有javascript，当您单击按钮时：

1.  从控制器获取一些数据的 ajax 调用 - 返回一个对象
2.  在我将在页面上显示的模板中显示该数据

这是javascript/ajax：

```
<script type="text/javascript">
  $("#show").click(function () {
    $.ajax({  url: '/Myproject/result/index',
              type: "POST",
              data: { id: id},

          success: function(result) {
             alert("Success:" + result);  // Can see getting object back.
          }});
    $(".resulttable").show();
  }); 
```

这是 grails 视图模板中的关键行：

```
<g:each in="${allResults}" status="i" var="result"> 
```

1.  如何从 javascript 获取数据到 gsp 代码（即 allResults）？
2.  我是否必须“刷新”此模板才能显示新数据？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:35:36.183

你不需要编写你的 ajax 调用。您可以在 html 中使用一些 Grails 实习生标签：

*   [http://grails.org/doc/latest/ref/Tags/remoteFunction.html](http://grails.org/doc/latest/ref/Tags/remoteFunction.html)
*   [http://grails.org/doc/latest/ref/Tags/submitToRemote.html](http://grails.org/doc/latest/ref/Tags/submitToRemote.html)
*   [http://grails.org/doc/latest/ref/Tags/remoteLink.html](http://grails.org/doc/latest/ref/Tags/remoteLink.html)

按照链接，你会发现一些很好的例子......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:08:23.023

你不能让你的 javascript/jquery 代码填充 gsp 中的东西，因为 gsp 是在服务器端处理的，而 javascript 是在客户端处理的，在 gsp 呈现所有 html 文档并用你的模型填充它们之后。你需要知道你的页面已经被处理过了，所以像 ${variables} 这样的东西不会被重新加载。所以当你这样做时：

`$(".resulttable").show();`

它不会显示您正在等待的结果。您必须使用 javascript 代码重新加载结果表。

因此，如果您在这里使用 ajax，您应该使用该函数`success`通过 javascript/jquery 更改您的 html 表，因为您已经有了您想要的响应。也许[这篇](http://www.ibm.com/developerworks/java/library/j-grails11188/index.html)文章可以帮助你。哦，我认为如果在您的 ajax 调用中定义一个 dataType 会更好（json 在您的情况下效果很好），如下所示：

```
$("#show").click(function () {
    $.ajax({  url: '/Myproject/result/index',
              type: "POST",
              data: { id: id},
              dataType: 'json',
              success: function(result) {
                  alert("Success:" + result);  // Can see getting object back.
              }});
    $(".resulttable").show();
  }); 
```

只是为了弄清楚您从控制器那里得到了什么样的响应。

# c# - 如何使用 Json.NET 将 IHtmlString 序列化为 JSON？

> ID：11350392
> 
> 赞同：7
> 
> 时间：2012-07-05T18:31:19.163
> 
> 标签：c#, json, json.net

我有一个包含通过 JSON 发布的原始 HTML 的字段，该字段最近从字符串转换为 IHtmlString。当这种变化发生时，该字段从一个 JSON 字符串变为一个空对象，并且一堆消耗 JSON 的东西开始爆炸。

```
// When it was a string...
{
    someField: "some <span>html</span> string"
}

// When it became an IHtmlString...
{
    someField: { }
} 
```

忽略任何反对 JSON 中原始 HTML 的参数，因为它对这个项目没有实际意义，我如何在我的 JSON 序列化中获得预期的字符串？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T18:31:20.473

### 背景

Json.NET 和默认的 .NET JavaScriptSerializer 都会将 的实例`IHtmlString`视为没有属性的对象，并将其序列化为空对象。为什么？因为它是一个只有一个方法的接口，并且方法不会序列化为 JSON。

```
public interface IHtmlString {
    string ToHtmlString();
} 
```

### 解决方案

对于 Json.NET，您需要创建一个自定义`JsonConverter`来使用`IHtmlString`并输出原始字符串。

```
public class IHtmlStringConverter : Newtonsoft.Json.JsonConverter {
    public override bool CanConvert(Type objectType) {
        return typeof(IHtmlString).IsAssignableFrom(objectType);
    }

    public override void WriteJson(Newtonsoft.Json.JsonWriter writer, object value, Newtonsoft.Json.JsonSerializer serializer) {
        IHtmlString source = value as IHtmlString;
        if (source == null) {
            return;
        }

        writer.WriteValue(source.ToString());
    }

    public override object ReadJson(Newtonsoft.Json.JsonReader reader, Type objectType, object existingValue, Newtonsoft.Json.JsonSerializer serializer) {
        // warning, not thoroughly tested
        var html = reader.Value as string;
        return html == null ? null : System.Web.Mvc.MvcHtmlString.Create(html);
    }
} 
```

有了它，将你的 new 实例发送`IHtmlStringConverter`到 Json.NET 的`SerializeObject`调用。

```
string json = JsonConvert.SerializeObject(objectWithAnIHtmlString, new[] { new IHtmlStringConverter() }); 
```

### 示例代码

对于一个控制器演示的示例 MVC 项目，请访问[此问题的 GitHub 存储库](https://github.com/patridge/JsonNetIHtmlStringTesting)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-01T17:01:23.660

上面的答案没有通过将 ReadJson 更改为下面的代码来考虑类型，应该可以解决这个问题。参考：[https ://sebnilsson.com/blog/serialize-htmlstring-mvchtmlstring-in-json-net/](https://sebnilsson.com/blog/serialize-htmlstring-mvchtmlstring-in-json-net/)

```
var value = reader.Value as string;

// Specifically MvcHtmlString
if (objectType == typeof(MvcHtmlString))
{
    return new MvcHtmlString(value);
}

// Generally HtmlString
if (objectType == typeof(HtmlString))
{
    return new HtmlString(value);
}

if (objectType.IsInterface && objectType == typeof(IHtmlString))
{
    return new HtmlString(value);
}

// Fallback for other (future?) implementations of IHtmlString
return Activator.CreateInstance(objectType, value); 
```

**更新：**向 IHtmlString 添加接口检查。

# fiddler - Fiddler2 - 我如何对请求正文进行 URlDecode 以供查看？

> ID：11350393
> 
> 赞同：3
> 
> 时间：2012-07-05T18:31:19.290
> 
> 标签：fiddler, urldecode

我正在使用 Fiddler 调试一些特别痛苦的 AJAX 代码，并且在发送到服务器的 POST 请求中，Request BODY 是 UrlEncoded。这导致我不得不将文本剪切并粘贴到在线应用程序中，以将文本 UrlDecode 到请求的 JSON 对象中。必须有更好的方法来做到这一点。

有谁知道我如何使提琴手自动 URLDecode POST 请求的正文？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T18:02:22.130

好吧，你可以简单地按`CTRL+E`本地解码。但根据格式，您也可以使用 WebForms Inspector。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T12:11:49.370

Fiddler 可以以您喜欢的任何方式操纵 HTTP 请求和响应： [https ://stackoverflow.com/a/23615119/264181](https://stackoverflow.com/a/23615119/264181)

# php - HTML PHP 连接

> ID：11350411
> 
> 赞同：-5
> 
> 时间：2012-07-05T18:32:29.607
> 
> 标签：php, html

我在想是否有可能 - 比方说 - 我有一个链接点击时会转到所述页面，但它实际上会向目标页面发送一个值。假设值是 pageno。

我可以这样做吗

```
<a href="displaypage.html?pageno=1"> 
```

这种事情会奏效吗？我的意思是我想要这样的 php

```
<?php $pageno=$_POST['pageno']; ?> 
```

然后是其他一些过程的东西。回过头来，我希望 php 文件获取在链接中设置的 pageno。那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:33:40.113

这将是`$_GET['var']`，是的，这是可能的。

```
<a href="mypage.php?var=53">Click here</a> 
```

我的页面.php：

```
<?php
$var=$_GET['var'];
// ... process $var
// go to wherever
echo $var; // show the var
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:35:38.040

`$_POST`通过 POST 方法（通常是表单）发送内容时使用超全局变量。如果要获取 URL 中的参数，请使用`$_GET`超全局数组。您可以`$_REQUEST`将超全局数组用于 POST 或 GET 值。

是的，有可能得到这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T18:34:28.287

听起来您在谈论`GET`将参数传递到`$_GET`数组而不是数组的请求`$_POST`。

```
$pageno=$_GET['pageno']; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T18:35:42.190

```
<?php 
echo '<a href="www.mysite.com/index.php?value='.$value.'">Link</a>';
?> 
```

# python - python中的OOP编程

> ID：11350412
> 
> 赞同：3
> 
> 时间：2012-07-05T18:32:29.897
> 
> 标签：python, oop

我正在阅读 Dietel 的 C++ 编程书籍。在本书中，他们提到程序员应该如何只发布代码的接口部分而不是实现。

所以把它带到python：

我有 2 个文件：1）实现文件 = accountClass.py 和 2）接口文件 = useAccountClass.py

我已经编译了实现文件并获得了.pyc文件。所以当我将我的代码提供给其他人时，我会提供给他 .pyc 文件和接口文件，对吗？

另外，如果我只向其他人提供 .pyc 文件，我可以期望他自己编写接口吗？我会说不。但是我有一个挥之不去的疑问：

numpy 和 scipy 的创建者没有与我们的最终用户共享实现。而且我认为他们也不共享任何接口。但是我们仍然可以在 numpy 和 scipy 中搜索不同的类及其方法。所以，使用这个 numpy 和 scipy 的例子，我想我想问的是：

如果我只向他/她提供已编译的实现文件（在本例中为 accountClass.pyc），其他人是否可以为我的代码创建接口？该人如何知道我在实现中定义了哪些类和方法？我的意思是，他们会使用

```
if __name__ = "__main__" : 
    blah blah 
```

还是有其他方法？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:22:02.337

你*完全*错了。或者，也许这是一本可怕的书，作者犯了严重的错误。使用其他代码的代码确实应该，除非有重要的反驳，遵守接口而不关心实现的细节。然而，即使在静态编译为机器代码（例如 C++）的世界中，这并不意味着您应该锁定实现的源代码。

是否有人可以访问实现，以及他们是否在编写特定代码时利用这些知识，是完全不同的问题。哎呀，在处理其他代码（例如其他模块）时，即使实现的作者也可以/应该仍然对接口进行编程。同样，即使您将实现锁定在远离某人的地方，他们也很可能依赖不属于接口一部分的实现怪癖。如果静态编译机器代码的世界中的任何人只提供头文件和目标文件，而不提供源代码，那是因为这些项目是封闭源代码，而不是鼓励客户之间的良好编程实践。

在 Python 中，您的问题毫无意义——没有“接口”和“实现”文件，只有运行并定义函数、类和其他值的代码。没有您要提供的接口文件之类的东西。您提供了一个实现和（希望）文档，其中详细说明了接口和可能的实现细节。并且一旦导入一个模块，类对象、函数对象和其他对象就会包含大量信息（在许多情况下，包括生成大部分文档的文本）。对于像 numpy 这样的扩展模块也是如此。请注意，它们的实现*是*可访问，它只是没有包含在所有发行版中，因为它用处不大。使用 Python 代码，您实际上必须分发源代码，因为其他任何内容都是特定于平台的。

附带说明一下，.pyc 文件是相当高级的，并且在反汇编时很容易理解（这就像导入模块并在`dis`内部的任何函数上运行 stdlib 模块一样简单）。我认为这是一个次要的技术问题，因为它已经是一个错误的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:19:35.813

Deitel 对 C++ 程序员的建议不适用于 Python，原因有很多：

1.  Python 不会编译成机器码，所以无论你以何种形式提供程序，别人阅读代码都相对容易。

2.  Python 没有 .h 和 .c 文件，您只能提供 .py 或 .pyc 文件。

3.  无论如何，将代码视为秘密有点愚蠢。您的代码中有哪些内容需要对其他人隐藏？

Numpy 和 Scipy 主要在 C 中实现，这就是为什么您没有源代码，为了您自己的方便。喜欢的可以获取源码。该代码的“接口”是您可以导入然后调用的模块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:36:30.100

您不应该将“用户界面”与“类界面”混淆。如果您有一个 useAccountClass 文件，如果我理解正确的话，该文件可能会使用 accountClass 文件中定义的类和方法执行一些任务。

如果您将文件发送给其他人，他们不应该“猜测”您编译的类做了什么。这就是 DOCUMENTATION 的用途：描述模块中包含的函数（编译或未编译）、它们采用哪些参数、返回哪些值、期望它们做什么、它们执行的任务的“意义”。

作为一个抽象示例，假设您有一个图像处理类。如果该类具有 function `findCircles(image)`，则文档应说明它需要一个可能包含圆的图像，并返回图像中包含的圆心坐标的列表或数组。如何检测圆圈并不重要，您无需知道即可使用该功能。现在如果函数被调用`findCircles(image, gaussian_threshold=10)`，调用者必须知道函数使用了一些“gaussian_threshold”参数，也就是说，调用者需要知道函数的内脏，而在 OOP 中这是不好的。如果您决定将来使用另一种算法，则必须重写使用该函数的每个代码，因为`gaussian_threshold`最有可能不再有意义。

因此，在 OOP 中，接口是用于与对象通信的抽象，它只需要知道规范参数或输入，以便以问题的语言执行任务，而不是实现的语言（可以随时更改） ）。

从这个意义上说，文档是向用户（在这种情况下是另一个开发人员）保证，如果向其提供合理的输入，该功能将按预期执行。

现在最终用户，一个想要使用您的程序的非技术人员，将需要整个工作程序（控件和视图），而不仅仅是类定义（模型）。

希望这会有所帮助，我必须推荐书籍“Code Complete 2nd ed”。和“实用程序员 - 从新手到大师”作为关于广泛主题的非常有启发性的读物。

# objective-c - 目标 C. 正则表达式消除 3 个点之后的任何内容

> ID：11350416
> 
> 赞同：0
> 
> 时间：2012-07-05T18:32:41.377
> 
> 标签：objective-c, ios5, ios4

我编写了以下代码以消除 3 个点之后的任何内容

```
currentItem.summary = @"I am just testing. I am ... the second part should be eliminated";
NSError * error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"(.)*(/././.)(.)*" options:0  error:&error];

if(nil != regex){
    currentItem.summary = [regex stringByReplacingMatchesInString:currentItem.summary
                               options:0  range:NSMakeRange(0, [currentItem.summary length])
                                               withTemplate:@"$1"];
} 
```

但是，我的输入和输出是一样的。正确的输出应该是“我只是在测试。我是”。

我试图使用正则表达式来做到这一点，因为我有一个在字符串上运行的其他正则表达式的数据库。我知道性能可能不如纯文本查找或替换，但所涉及的字符串很短。我还尝试使用“\”来转义正则表达式中的点，但我收到了警告。

还有一个类似主题的问题，但匹配字符串不适用于目标 c。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:51:48.563

这更容易，并将完成您想要的：

```
NSRange range = [currentItem.summary rangeOfString:@"..."];
if (range != NSNotFound) {
    currentItem.summary = [currentItem.summary substringToIndex:range.location];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T18:46:31.043

您的模式中有正斜杠 ,`/`而不是反斜杠 , `\`。此外，如果您希望匹配三个点之前的所有内容，您应该使用`(.*)`- 标记所有匹配的内容`.*`。（模式中的其他括号是多余的。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T18:53:38.030

不错的选择：

```
NSScanner *scanner = [NSScanner scannerWithString:currentItem.summary];   
[scanner scanUpToString:@"..." intoString: &currentItem.summary]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T19:23:18.877

我为您的问题推荐的正则表达式：

```
regularExpressionWithPattern:@"^(.*)\\s*\\.{3}.*$" 
```

这个和你的主要区别：

*   使用反斜杠转义特殊字符
*   使用`^`and`$`锚定在字符串的开头和结尾
*   仅捕获有趣的部分`()`
*   `...`通过忽略任意数量的空白字符 ( `\s*`)去除 之前的空白。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T19:48:34.837

在更正斜线和其他改进之后，我的最终表达是：

```
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"^(.*)\\.{3}.*$" 
                                                                                options:0 
                                                                                error:&error]; 
```

# jquery - 使用 jQuery 获取最大的文本字段 ID

> ID：11350417
> 
> 赞同：0
> 
> 时间：2012-07-05T18:32:45.213
> 
> 标签：jquery

所有，我的页面上有以下隐藏字段：

```
<input type="hidden" name="timeline_num[]" id="timeline_num" value="<?php echo $i; ?>"> 
```

页面上可以有多个。可以有从 1 到 100 或更多的任何地方，并且在该范围内可以有任何数量。因此，例如，如果我的页面上有 49 个，我想找到最高的一个。所以在那个例子中，我希望我的 jQuery 返回 49。

我该怎么做呢？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:34:58.180

```
$('[name="timeline_num[]"]').length 
```

它将返回具有`timeline_num[]`as`name`属性的元素数量。

```
$('[name="timeline_num[]"]').last().val() 
```

它将返回带有`timeline_num[]`as`name`属性的最后一个元素的值（我假设您处于循环中，因为`$i`最后一个是最大的）。

# apache - 从应用服务器根目录提供 GWT 应用程序

> ID：11350418
> 
> 赞同：0
> 
> 时间：2012-07-05T18:32:48.447
> 
> 标签：apache, gwt, jetty

我有一个 GWT 应用程序，我将它作为 WAR 文件部署到 Jetty 8 服务器。

我希望它可以通过

```
http://<myserver>/ 
```

代替

```
http://<myserver>:8080/MyApp/MyApp.html 
```

我知道我可以将 Jetty 配置为在端口 80 而不是 8080 上运行，或者让 apache 实例在端口 80 上运行并将请求转发到在 8080 上运行的 Jetty（虽然看不到后者的好处）。但是如何部署 GWT 应用程序以在服务器 ROOT 上访问？

到目前为止，我看到我可以在 Jetty/contexts 文件夹中创建 myapp.xml 并放入

```
<Set name="contextPath">/</Set> 
```

那里。我还可以将 MyApp.html 重命名为 index.html。但我不确定这是“推荐”的方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:23:42.680

我想你几乎回答了你自己的问题：

应用程序服务器（例如 Jetty）负责上下文路径，因此您必须以某种方式在应用程序服务器中设置它。这对于每个服务器都是不同的，例如在 Tomcat 中，实现此目的的一种可能性是将 war 文件重命名为 ROOT.war。（我不知道如何在 Jetty 中做到这一点的所有可能方法。）

**注意**：直接转到上下文 URL 时提供的文件可以在您的 中确定`web.xml`，使用

```
<welcome-file-list>
  <welcome-file>MyApp.html</welcome-file>
</welcome-file-list> 
```

因此，您不必将其重命名为 index.html。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T23:35:40.133

好的，接受我自己的答案：
在 Jetty/contexts 文件夹中创建 myapp.xml

谢谢你，克里斯！

# html - 重叠的 CSS 元素

> ID：11350420
> 
> 赞同：0
> 
> 时间：2012-07-05T18:32:55.213
> 
> 标签：html, css, layout

我想让蓝色元素坐在绿色圆圈的中间和后面。我怎样才能做到这一点？另外，为什么绿色圆圈和蓝色元素之间有一个随机的边缘空间？

![在此处输入图像描述](../Images/4da3232fe089643b1d12d0c99122e3c4.png)

```
#profile-circle {
    margin-right: auto; margin-left: auto;
    height: 164px; width: 164px;
    border-radius: 84px 84px 84px 84px;
}

#main-container {
    margin-right: auto; margin-left: auto;
    height: 400px; width: 450px;
} 
```

[http://jsfiddle.net/LqJ79/](http://jsfiddle.net/LqJ79/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:37:28.520

`position: relative` 会在这里帮助你。它允许您使用`z-index`将圆圈放在盒子上，也可以使用`top`它将相对于其当前位置移动盒子。问题`position: absolute`在于它将元素从流程中取出，我认为这不是你需要的。

```
#profile-circle {
    position: relative;
    z-index: 100;
}

#main-container {
    position: relative;
    z-index: 50;
    top: -100px;
} 
```

[查看演示](http://jsfiddle.net/LqJ79/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:41:40.043

您可以`position: fixed; top:10px; left: 10px; z-index: 1;` 在 css 中制作和什么不在来移动它们。像这样：

[http://jsfiddle.net/LqJ79/](http://jsfiddle.net/LqJ79/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T18:46:54.613

两者之间的“神奇”空间是由于 div 用户信息中的边距。我将 CSS 更改为以下内容：

```
#user-info {
height: auto;
width: 380px;
margin-right: auto;
margin-left: auto;
} 
```

这将删除空间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T18:37:19.910

使用属性“位置：绝对；” 在第二个框中，我使用以下内容更新了 js fiddle CSS：

```
#main-container {
    margin-right: auto;
    margin-left: auto;
    height: 400px;
    width: 450px;
    background-color: blue;
    position: absolute;
    top: 80px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T18:38:46.287

向上移动蓝色元素的最简单方法是设置负上边距：

```
margin-top: -82px; 
```

但是，使用您当前的标记，蓝色元素将位于顶部。

您可以将绿色元素放在 HTML 中的蓝色元素下方，然后使用 CSS 将其向上滑动，或者您可以：

1.  `position: relative;`在两个元素上使用
2.  在蓝色和绿色元素上设置 a`z-index`以确定哪个出现在顶部（给绿色元素一个更大的数字，使其出现在顶部）
3.  设置`top: -82px;`在蓝色元素上以将其向上滑动到绿色元素下方

它们之间的空间是由于您的利润：

```
margin-top: 15px;
margin-bottom: 5px; 
```

# java - 类“属性”与“成员”与“变量”与“字段”的术语

> ID：11350423
> 
> 赞同：26
> 
> 时间：2012-07-05T18:33:05.637
> 
> 标签：java, oop, attributes, field, terminology

似乎开发人员在引用存储在类实例中的一段数据时经常互换使用这些术语。

每个术语之间是否有任何技术差异，或者可以互换使用它们？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T18:36:05.633

“成员”是更广泛的术语。它引用该类中的所有内容（实例方法/变量等）

“属性/变量/字段”相同，也可以使用“成员”。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-06T18:22:32.370

基于答案的多样性，类“属性”、“字段”和“变量”相对可互换使用，但因人而异。因此，最好将它们混为一谈，而不是依赖细微差别。

有一个共识，一个类“成员”包括方法和数据，所以它与其他的不同。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-05T18:41:02.437

**成员：**通常用于定义变量和方法。

**属性：**属性是对象的实例变量。

**变量：**原始变量和对象引用变量作为实例或局部变量。

**字段：**字段标记实例变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-05T18:40:29.470

属性：类中属性的抽象概念。例如，一个 Person 类可能有一个 lastName 属性。属性与字段的使用取决于属性类型的“复杂程度”。更简单的类型通常称为属性。

成员：this 指的是绑定到对象实例的方法或变量

变量：一个抽象概念，表示给定名称表示一个可以变化的值，并且经常可以更改

字段：字段类似于属性，尽管字段有时用于表示比属性更复杂的东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-05T19:47:21.570

我见过的一般用法：

属性 - 几乎是标准的英语词典含义。通常用于更抽象的概念，例如 Java (bean) 属性而不是成员、变量或字段。

member -程序外可见的方法和*字段。*在 C# 中包括属性和事件。

变量 - 通常是局部变量。有时指的是*字段*，尤其是在尝试定义*字段*时。

字段 - 类和实例变量；在整个类中可见的变量。

*（我自己尝试这样使用这些词，所以如果我弄错了，请告诉我！）*

# objective-c - 如何检查 NSString 是否包含具有特定格式的字符串？

> ID：11350424
> 
> 赞同：1
> 
> 时间：2012-07-05T18:33:07.680
> 
> 标签：objective-c, cocoa-touch, ios5, foundation

如何检测某个 NSString 是否包含这样的字符串格式，例如：

我想检查一个字符串是否是某种格式。例如，如果我有字符串格式，`@"%d %d/%d %@"`我希望我的代码在与 比较时返回 YES，如果我将其与 比较，我希望我的代码`@"1 1/2 oz"`返回 NO `@"20 ml"`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:38:44.243

您要使用的是正则表达式。这种特定情况的正则表达式是

```
[0-9]+\ [0-9]+\/[0-9]+\ [a-zA-Z]+ 
```

尝试使用[NSRegularExpression](https://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)。

这也是一个[正则表达式教程](http://www.regular-expressions.info/tutorial.html/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:38:57.177

你可以使用[NSRegularExpression](http://developer.apple.com/library/iOS/#documentation/Foundation/Reference/NSRegularExpression_Class/Reference/Reference.html)

```
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:yourPattern options:NSRegularExpressionCaseInsensitive  error:&error]; 
```

# php - PHP不在电子邮件中呈现HTML

> ID：11350426
> 
> 赞同：0
> 
> 时间：2012-07-05T18:33:12.263
> 
> 标签：php, drupal

我有一个 Drupal Web 应用程序，可以在下订单时发送电子邮件。我们有 HTMLMail 来格式化带有主题的传出消息。目前，页眉和页脚已正确包装，因为它们应该与图形一起使用，但正文显示的是原始 HTML 代码。

例子：

```
<p>We have received your order and one of our representatives will review your information shortly. If you have any questions about this order please call us at (phone). Please reference your reservation number when calling. Here are the details of your order:</p><div class="item-list"><h3>Order Summary</h3><ul><li class="first"><span class="confirmation-label">Confirmation Number:</span> 
```

等等等等。在邮件模板中，只需执行 'echo $body;' 打印应包含上述内容的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:35:01.890

将正文的内容类型设置为`text/html`并确保您没有任何代码自动转义它。

# python - 导入dll文件时python ctypes失败

> ID：11350429
> 
> 赞同：2
> 
> 时间：2012-07-05T18:33:24.357
> 
> 标签：python, dll, ctypes

我是 python 的新手，现在在 python 中导入 dll 时遇到问题。通过参考网上找到的一些提示，我尝试使用下面的 ctypes 并出现错误提示。

```
>>> import ctypes
>>> dl=ctypes.WinDll('C:\\Python27\\Lib\\site-packages\\UdfManagerPython.dll')

Traceback (most recent call last):
  File "<pyshell#2>", line 1, in <module>
    dl=ctypes.WinDll('C:\\Python27\\Lib\\site-packages\\UdfManagerPython.dll')
AttributeError: 'module' object has no attribute 'WinDll'

>>> dl=ctypes.cdll.LoadLibrary('C:\\Python27\\Lib\\site-packages\\UdfManagerPython.dll')

Traceback (most recent call last):
  File "<pyshell#3>", line 1, in <module>
    dl=ctypes.cdll.LoadLibrary('C:\\Python27\\Lib\\site-packages\\UdfManagerPython.dll')
  File "C:\Python27\lib\ctypes\__init__.py", line 431, in LoadLibrary
    return self._dlltype(name)
  File "C:\Python27\lib\ctypes\__init__.py", line 353, in __init__
    self._handle = _dlopen(self._name, mode)
WindowsError: [Error 126] 
```

我做错了什么还是这个 dll 没有按照 python 标准编写脚本？我已上传到[MediaFire](http://www.mediafire.com/?9o55s5he13llhgi)供您分析。非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:49:53.497

我将 DLL 加载`UdfManagerPython.dll`到[Dependency Walker](http://www.dependencywalker.com/)中，它指出该 DLL 依赖于`python22.dll`. 当我试图在 Python (2.7) 解释器中加载这个 DLL 时，我得到一个消息框，它或多或少地告诉我同样的事情：

> 程序无法启动，因为您的计算机缺少 python22.dll。尝试重新安装程序以解决此问题。

所以看起来这个 DLL 是为了与 Python 2.2 一起使用，而不是你正在使用的 Python 2.7。

我没有安装 Python 2.2。如果你这样做了，也许你会收到不同的错误信息给我。

还值得指出的是，您不能`ctypes`与 Python 2.2 一起使用，因为[`ctypes`仅支持 Python 2.3 onwards](http://python.net/crew/theller/ctypes/)。

我不知道这个 DLL 是从哪里来的。我用谷歌搜索了它的名字，得到了所有四个结果，其中一个就是这个问题。

顺便说一句，如果可以找到 DLL 本身但缺少 DLL 的依赖项，我会看到“找不到指定的模块”形式的错误。因此，如果您收到这样的消息，并且您确定 DLL 本身存在，请检查其依赖关系。

**编辑**：我尝试安装 Python 2.2 以查看是否可以加载此 DLL。安装 Python 2.2 后，您至少可以加载此 DLL，但如果您尝试调用其中任何一种`init...`方法，Python 会崩溃。（我不知道要传递什么参数，所以我没有传递它们。）

以下是我尝试调用其中一种方法时发生的情况：

```
Python 2.7.3（默认，2012 年 4 月 10 日，23:31:26）[MSC v.1500 32 位（英特尔）] 在 win32 上
输入“帮助”、“版权”、“信用”或“许可”以获取更多信息。
>>> 从 ctypes 导入 *
>>> l = CDLL("UdfManagerPython.dll")
>>> l.initPyUdfNumber()
致命的 Python 错误：解释器未初始化（版本不匹配？）

此应用程序已请求运行时以不寻常的方式终止它。
请联系应用程序的支持团队以获取更多信息。
```

我用谷歌搜索了这条错误消息的第一行，我从大多数结果中得到的反复出现的主题是，这个错误表明你正在尝试加载一个扩展模块，该模块链接到一个版本的 Python 与不同版本的 Python。

所以在回答你在评论中的问题时，不，我不相信有办法在 Python 2.7 中加载这个 DLL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:39:26.567

WinDll 应该全部小写。

```
dl = ctypes.windll('C:\\Python27\\Lib\\site-packages\\UdfManagerPython.dll') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:09:06.417

尝试`WinDLL`或`CDLL`。

我从未`LoadLibrary`直接在 中使用过`ctypes`，但看起来它仍然可能找不到 DLL。确保它在您的系统路径上。（或者在与 Python 模块相同的目录中。）

# java - Hibernate：运行更新查询的问题

> ID：11350434
> 
> 赞同：0
> 
> 时间：2012-07-05T18:33:44.277
> 
> 标签：java, sql, oracle, hibernate

`update query`我看到在 Hibernate 中有两种创建方法。首先，您可以使用我们拥有 hql 的标准方法，例如：

```
Query q = session.createQuery("update" + LogsBean.class.getName() + " LogsBean " + "set LogsBean.jobId= :jobId where LogsBean.jobId= :oldValue ");
            q.setLong("jobId", jobId);
            q.setLong("oldValue", 0);
            return q.executeUpdate(); 
```

或者我们可以去跑

```
getHibernateTemplate.saveorupdate(jobId); 
```

现在我`java.lang.IllegalArgumentException: node to traverse cannot be null!`开始运行第一个查询并且我不确定 hwo 是否在`getHibernateTemplate`示例中提供条件，我想`jobIds`在值匹配 0 的日志表中更新，所以我想运行类似的东西

```
Update logs set jobId = 23 where jobId = 0 
```

以上是我试图运行的简单`sql`查询，但我想通过休眠运行它，尝试了几种方法但它不起作用，有什么建议吗？

**更新：**

正如 Jeff 所指出的，问题在更新后没有空间，因此问题得到了解决，但值仍然没有更新，我已经为 hibernate 更新了 show_sql true 并检查可能是问题的原因，将运行由 hibernate 生成的查询再次运行 db 并查看记录是否已更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:33:49.227

有几件事可能会帮助您解决此问题：

*   返回什么[`.executeUpdate()`](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/Query.html#executeUpdate%28%29)，0（因为它没有更新任何行）？
*   它会抛出一个[`HibernateException`](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/HibernateException.html)你正在默默捕捉或重新抛出的东西吗？
*   [`FlushMode`](http://docs.jboss.org/hibernate/orm/4.1/javadocs/org/hibernate/FlushMode.html)你配置了哪个？
*   更新是否到达数据库？您可以打开数据库服务器的查询日志。

# c# - 用于在子属性上执行现有表达式的 Linq 表达式

> ID：11350435
> 
> 赞同：3
> 
> 时间：2012-07-05T18:33:52.300
> 
> 标签：c#, linq, linq-to-entities, expression-trees

这是一个简单的类

```
public class Parent
{
    public Child Child { get; set; }
} 
```

这是我正在尝试实施的方法

```
Expression<Func<Parent, long>> GetChildIDExpr(Expression<Func<Child, long>> objectIdExpr)
{
    //So I need to return an expression that can accept a Parent
    //and apply the given expression to its Child property.
} 
```

听起来很简单，但我就是做不出来！

我怎样才能实现这个方法？

**编辑：**

我正在使用 LINQ to Entities，所以调用`Expression.Invoke`不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:37:07.207

最终，您似乎想要组合表达式。但问题是：表达式树是不可变的，它们将保持它们的参数引用，这使得它们很难链接在一起。然而，这并不是说它不能完成（或者不是太难）。但是，您需要[ExpressionVisitor](https://stackoverflow.com/a/9132775/370412)的帮助，它将交换父参数引用和子参数引用。

```
class SwapVisitor : ExpressionVisitor
{
    private readonly Expression from, to;
    public SwapVisitor(Expression from, Expression to)
    {
        this.from = from;
        this.to = to;
    }
    public override Expression Visit(Expression node)
    {
         return node == from ? to : base.Visit(node);
    }
} 
```

然后，您可以将它们链接在一起`GetChildIDExpr`：

```
Expression<Func<Parent, long>> GetChildIDExpr(Expression<Func<Child, long>> objectIdExpr)
{
    Expression<Func<Parent, Child>> parentEX = p => p.Child;
    var swap = new SwapVisitor(objectIdExpr.Parameters[0], parentEX.Body);
    var newExpr = Expression.Lambda<Func<Parent, long>>(
           swap.Visit(objectIdExpr.Body), parentEX.Parameters);
    return newExpr;
} 
```

试试看，让我们知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-06T12:22:40.817

您可以将 LinqKit [http://www.albahari.com/nutshell/linqkit.aspx](http://www.albahari.com/nutshell/linqkit.aspx) 与`AsExpandable()`and `Compile()`/一起使用`Invoke()`，它将内联外部表达式，允许在 Linq-to-sql 或 Linq-to-entities 中使用

# r - 使用 r 缩放水平和垂直线/刻度图（地图）

> ID：11350449
> 
> 赞同：2
> 
> 时间：2012-07-05T18:35:08.570
> 
> 标签：r, plot, ggplot2

这是我要绘制的小示例（2 组和 2 个子组，只是为了简单起见，但是我可能有 n 个组和 k 个子组）。

```
grp <- c(  1,   1,   1,  1, 1,  1, 1, 1, 1,  2,2, 2, 2,2, 2, 2, 2, 2)
sgrp <- c("A", "A", "A", "A", "A",  "B", "B", "B", "B" ,  "A", "A", "A", "A",
  "B", "B", "B", "B", "B")
pos <- c(1.1, 2.1, 3.2, 4.1, 5.0,1.1, 2.0, 5.0, 6.2,1.0, 3.0, 4.1, 5.0,1.0,
 2.1, 3.01, 4.0, 5.02)
mydf <- data.frame (grp, sgrp, pos)
   grp sgrp  pos
1    1    A 1.10
2    1    A 2.10
3    1    A 3.20
4    1    A 4.10
5    1    A 5.00
6    1    B 1.10
7    1    B 2.00
8    1    B 5.00
9    1    B 6.20
10   2    A 1.00
11   2    A 3.00
12   2    A 4.10
13   2    A 5.00
14   2    B 1.00
15   2    B 2.10
16   2    B 3.01
17   2    B 4.00
18   2    B 5.02 
```

Pos 确定刻度需要在 x 轴上的位置。中心线（长线）从零开始，到 grp + 1 的最大位置结束。是否可以制作这样的图表？

生成的图表应如下所示：

![在此处输入图像描述](../Images/b56b9316b89180ce32765703b4813148.png)

编辑：这是我可以做的小技巧，但没有达到（不接近）我想要的：

```
dgp <- c(0, 0, 0, 0, 0,  0.15, 0.15,0.15, 0.15 ,  0, 0, 0, 0,  
0.15, 0.15, 0.15, 0.15, 0.15)
mydf$dumv <- grp + dgp
plot(mydf$pos, mydf$dumv, pch = "+", ylab = "groups", xlab = "pos") 
```

![在此处输入图像描述](../Images/df4bc9de7c4a7f6f5537583c2715334c.png)

**再次更新：**，有一些想法，但存在问题：

```
require(ggplot2)

grp <- c(  1,   1,   1,  1, 1,  1, 1, 1, 1,  2,2, 2, 2,2, 2, 2, 2, 2)
sgrp <- c("A", "A", "A", "A", "A",  "B", "B", "B", "B" ,  "A", "A", "A", "A",
  "B", "B", "B", "B", "B")
position <- c(1.1, 2.1, 3.2, 4.1, 5.0,1.1, 2.0, 5.0, 6.2,1.0, 3.0, 4.1, 5.0,1.0,
 2.1, 3.01, 4.0, 5.02)
mydf <- data.frame (grp, sgrp, pos)
dgp <- c(0, 0, 0, 0, 0,  0.15, 0.15,0.15, 0.15 ,  0, 0, 0, 0,
0.15, 0.15, 0.15, 0.15, 0.15)
mydf$barheight <- c(0.25)
mydf$group <- grp + dgp

ggplot(mydf) +
  geom_line(aes(position, factor(group), group = factor(group)),
            size = 2, colour = "purple") +
  geom_rect(aes(y = factor(group),
                xmin = position - 0.02,
                xmax = position + 0.02,
                ymin = group - barheight/2,
                ymax = group + barheight/2)) 
```

问题： .... (1) 我不能使组非因子，矩形的位置错误，我想把 A，B 放在一起，而 1 和 2 之间有间隙。

(2) 在真实数据中，我会有两个以上的组，我可以自动计算 dgp。

![在此处输入图像描述](../Images/5e63fca8ac69a8c08460e2f04e2b57ac.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:18:34.013

```
 plot(NULL, ylim=c(0,4), xlim=range(mydf$pos))
 abline(h=1:4 ,col=1:2 )
 with(mydf, segments(x0=pos, y0=as.numeric(interaction(mydf$grp, mydf$sgrp))-.2, 
                     y1=as.numeric(interaction(mydf$grp, mydf$sgrp))+.2,
                     col= mydf$grp, lty=as.numeric(mydf$sgrp)) ) 
```

（我还不是 ggplot 用户，所以这是基本图形。您可以调整`ylim`并添加`ylab`参数以正确标记。您可能还想使用`yaxt="n"`和`axis()`标记您的组和子组。） ![在此处输入图像描述](../Images/0c67784654e39ea78efeea8924b2dfa3.png)

这是使用交互值从垂直位置向量中选择的替代设置。

```
 plot(NULL, ylim=c(0.5,4.5), xlim=range(mydf$pos))
 with(mydf, segments(x0=pos, 
             y0=c(1.3,1.7,3.3,3.7)[as.numeric(interaction(mydf$grp, mydf$sgrp))]-.1, 
             y1=c(1.3,1.7,3.3,3.7)[as.numeric(interaction(mydf$grp, mydf$sgrp))]+.1, 
             col= mydf$sgrp, lty=as.numeric(mydf$grp)) )
abline(h=c(1.3,1.7,3.3,3.7) ,col= rep(1:2, each=2), lty=1:2,lwd=3) 
```

![在此处输入图像描述](../Images/d50cd81c130d340924c7f1d058cb1dc3.png)

# c++ - C++11 中的尾端迭代器失效

> ID：11350454
> 
> 赞同：26
> 
> 时间：2012-07-05T18:35:37.870
> 
> 标签：c++, iterator

[关于 C++迭代器失效规则](https://stackoverflow.com/q/6438086/985943)的最流行的帖子声称，不清楚过去的迭代器（即，由`end()`、`cend()`、`rend()`和返回的那些`crend()`）是否根据与普通迭代器相同的规则失效，后者指向容器。这些针对 2003 年和 2011 年 C++ 的声明遵循讨论[End iterator invalidation rules](https://stackoverflow.com/q/6440392/985943)的帖子，其中接受的答案表明 2003 年标准在此问题上模棱两可。这个结论基于 23.1/10 中的评论（在 的上下文中`swap()`），这似乎暗示当规范没有明确提到过去迭代器的失效时，它们可能会失效。

对该帖子问题的评论（由 mike-seymour 撰写）表明 C++11 在这个问题上是明确的，在`deque`s 的情况下。我的问题是关于所有容器：

*   在 C++11 中，是否有任何容器操作可能使过去的迭代器无效，并且这种行为在语言规范中是模棱两可的？

换个说法，

*   在执行一个容器操作后，我是否可以相信一个过去迭代器的有效性，但它并没有说它可能会使过去的迭代器失效？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-08T20:50:22.167

> 我的问题是关于所有容器：
> 
> *   在 C++11 中，是否有任何容器操作可能使过去的迭代器无效，并且这种行为在语言规范中是模棱两可的？

我不确定您所说的“这种行为在语言规范中不明确的地方”是什么意思，但肯定有一些操作会使过去的操作符无效（如插入 a`std::vector`或`std::string`）。

> 换个说法，
> 
> *   在执行一个容器操作后，我是否可以相信一个过去迭代器的有效性，但它并没有说它可能会使过去的迭代器失效？

您可以像任何其他迭代器一样信任过去的迭代器：任何不会（可能）使迭代器无效的操作都不会使它们无效。除了标准可能存在错误之外，所有操作都没有说它们（可能）使操作员无效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:52:05.317

如果标准说该操作不会使迭代器无效，您应该能够信任它。其他任何东西都应该被视为标准库实现中的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-15T09:09:50.370

至少在 GCC 结束迭代器对 std::map 无效：

```
#include <set>
#include <stdlib.h>
#include <assert.h>
int main() {
  std::set<int> a;
  a.insert(1);
  std::set<int>::reverse_iterator rit(a.rbegin());
  ++rit;
  assert(rit==a.rend());
  a.erase(a.begin());
  assert(a.rend()==rit); // FAIL
} 
```

# c - 使用结构内的固定数组映射变化的内存块

> ID：11350457
> 
> 赞同：1
> 
> 时间：2012-07-05T18:35:45.303
> 
> 标签：c, arrays, struct

```
struct image_struct {
    unsigned int width;
    unsigned int height;
    char mode;
    char depth;
    unsigned char data[13];
}

image_struct* newImage( unsigned int width, unsigned int height, char depth ) {

    image_struct* image = (image_struct*)malloc(
        sizeof(image_struct) - 13 + width * height * depth );

    return( image );
} 
```

Visual Studio 不会抱怨访问超过 13 个字节的固定数组，这是不可取的吗？我的意图是通过对带有内置头文件的结构使用直接内存写入来避免处理文件 IO 中的头文件。为标题道歉。:\

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:40:04.943

您可以使用一个技巧，在结构的末尾定义一个零长度数组。然后，您可以分配`sizeof`结构加上您想要的数组的大小，并获得您想要的任何大小的数组，在运行时而不是编译时决定。以下是有关它的一些信息：

[http://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html](http://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html)

注意事项：

1.  您必须分配适量的内存。即使您没有分配它，您也可以访问结构之外的内存。但这是您代码中的一个错误。内存可能用于其他用途，或跨越边界等。最坏的情况是它会覆盖其他一些数据，并且您不会发现它，直到您的程序的某些其他部分表现异常。永远不要使用你没有分配的堆内存。

2.  分配后，您无法调整数组的大小，而不`realloc`需要整个 struct + 数组的大小。

3.  数组必须是数组的最后一个元素

4.  确保您知道数组的长度。也许将长度存储在结构中的字段中并进行自己的边界检查，以确保您的指针算法（/数组索引访问）不会出错。

这仅适用于在堆上分配的结构，而不适用于堆栈上的自动变量。

# asp.net - 我想使用 Gridview 作为输入字段，没有数据开始。是否有捷径可寻？

> ID：11350458
> 
> 赞同：1
> 
> 时间：2012-07-05T18:35:46.573
> 
> 标签：asp.net, .net, vb.net, gridview

先感谢您。

使用 .NET 和 VB，我希望将 Gridview 用作带有复选框的输入表单网格。我希望每个填写表格的人在数据库中都有一个唯一的条目，因此数据源将为空。有没有办法显示复选框并让gridview显示没有任何源数据？我们试图远离虚拟数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:17:05.257

您可以在 EmptyDataTemplate 中定义您的列

[http://forums.asp.net/p/1436652/3240106.aspx](http://forums.asp.net/p/1436652/3240106.aspx)

[http://geekswithblogs.net/casualjim/archive/2006/05/04/77151.aspx](http://geekswithblogs.net/casualjim/archive/2006/05/04/77151.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T01:57:34.953

请参阅下面的文章，这些文章将解释在没有数据时如何显示网格标题。然后您可以简单地隐藏/取消隐藏页脚行，您可以在其中输入数据并保存数据。

[http://technico.qnownow.com/2012/06/11/how-to-add-footerrow-to-gridview-which-has-no-value-initially/](http://technico.qnownow.com/2012/06/11/how-to-add-footerrow-to-gridview-which-has-no-value-initially/)

[http://technico.qnownow.com/2012/06/07/show-grid-header-when-there-are-no-rows-in-gridview-control/](http://technico.qnownow.com/2012/06/07/show-grid-header-when-there-are-no-rows-in-gridview-control/)

# git - 在 TortoiseGit 上使用 ssh 私钥

> ID：11350459
> 
> 赞同：0
> 
> 时间：2012-07-05T18:35:51.547
> 
> 标签：git, ssh, private-key, tortoisegit

我在一台计算机上创建了一个 ssh 私钥以与 TortoiseGit 一起使用。然后我将我的私钥发送到我的另一台计算机，但是当我尝试在 Tortoise Git 上设置我的私钥时收到一条错误消息。

错误信息是：

> 保存配置失败（键：“remote.f1.puttykeyfile”，值：“D:\Documentos Ronaldo\ronaldo_private_key.ppk”）。

我已经重新安装了 TortoiseGit，但问题仍然存在。你知道我能做什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T19:42:02.750

我已经解决了执行新克隆并使用 ssh 获取新克隆的问题。

# python - 使用 Python 从网页中提取图片链接

> ID：11350464
> 
> 赞同：2
> 
> 时间：2012-07-05T18:36:35.920
> 
> 标签：python, image, python-2.7, web-scraping

所以我想得到这个页面上的所有图片（nba 球队）。 [http://www.cbssports.com/nba/draft/mock-draft](http://www.cbssports.com/nba/draft/mock-draft)

但是，我的代码提供的远不止这些。它给了我，

```
<a href="/nba/teams/page/ORL"><img src="http://sports.cbsimg.net/images/nba/logos/30x30/ORL.png" alt="Orlando Magic" width="30" height="30" border="0" /></a> 
```

我怎样才能缩短它只给我，`http://sports.cbsimg.net/images/nba/logos/30x30/ORL.png.`

我的代码：

```
import urllib2
from BeautifulSoup import BeautifulSoup
# or if your're using BeautifulSoup4: 
# from bs4 import BeautifulSoup

soup = BeautifulSoup(urllib2.urlopen('http://www.cbssports.com/nba/draft/mock-draft').read())

rows = soup.findAll("table", attrs = {'class': 'data borderTop'})[0].tbody.findAll("tr")[2:]

for row in rows:
  fields = row.findAll("td")
  if len(fields) >= 3:
    anchor = row.findAll("td")[1].find("a")
    if anchor:
      print anchor 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:51:25.557

要将所有图像保存在[http://www.cbssports.com/nba/draft/mock-draft](http://www.cbssports.com/nba/draft/mock-draft)，

```
import urllib2
import os
from BeautifulSoup import BeautifulSoup
URL = "http://www.cbssports.com/nba/draft/mock-draft"
default_dir = os.path.join(os.path.expanduser("~"),"Pictures")
opener = urllib2.build_opener()
urllib2.install_opener(opener)
soup = BeautifulSoup(urllib2.urlopen(URL).read())
imgs = soup.findAll("img",{"alt":True, "src":True})
for img in imgs:
    img_url = img["src"]
    filename = os.path.join(default_dir, img_url.split("/")[-1])
    img_data = opener.open(img_url)
    f = open(filename,"wb")
    f.write(img_data.read())
    f.close() 
```

要将任何特定图像保存在[http://www.cbssports.com/nba/draft/mock-draft](http://www.cbssports.com/nba/draft/mock-draft)上，请使用

```
soup.find("img",{"src":"image_name_from_source"}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:16:40.517

我知道这可能是“创伤性的”，但是对于那些自动生成的页面，您只想将那些该死的图像拿走并且永远不会回来，采用所需模式的 quick-n-dirty 正则表达式往往是我的选择（没有 Beautiful Soup 依赖是一个很大的优势）：

```
import urllib, re

source = urllib.urlopen('http://www.cbssports.com/nba/draft/mock-draft').read()

## every image name is an abbreviation composed by capital letters, so...
for link in re.findall('http://sports.cbsimg.net/images/nba/logos/30x30/[A-Z]*.png', source):
    print link

    ## the code above just prints the link;
    ## if you want to actually download, set the flag below to True

    actually_download = False
    if actually_download:
        filename = link.split('/')[-1]
        urllib.urlretrieve(link, filename) 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-25T10:12:24.867

您可以使用此函数从 url 获取所有图像 url 的列表。

```
#
#
# get_url_images_in_text()
#
# @param html - the html to extract urls of images from him.
# @param protocol - the protocol of the website, for append to urls that not start with protocol.
#
# @return list of imags url.
#
#
def get_url_images_in_text(html, protocol):
    urls = []
    all_urls = re.findall(r'((http\:|https\:)?\/\/[^"\' ]*?\.(png|jpg))', html, flags=re.IGNORECASE | re.MULTILINE | re.UNICODE)
    for url in all_urls:
        if not url[0].startswith("http"):
            urls.append(protocol + url[0])
        else:
            urls.append(url[0])

    return urls

#
#
# get_images_from_url()
#
# @param url - the url for extract images url from him. 
#
# @return list of images url.
#
#
def get_images_from_url(url):
    protocol = url.split('/')[0]
    resp = requests.get(url)
    return get_url_images_in_text(resp.text, protocol) 
```

# php - 在 PHP 中将“'”替换为“'”

> ID：11350466
> 
> 赞同：6
> 
> 时间：2012-07-05T18:36:37.743
> 
> 标签：php, str-replace, apostrophe

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:39:27.633

```
$stdin = mb_str_replace('’', '\'', $stdin); 
```

Implementation of `mb_str_replace()` here: [http://www.php.net/manual/en/ref.mbstring.php#107631](http://www.php.net/manual/en/ref.mbstring.php#107631)

I mean this:

```
<?php
function mb_str_replace($needle, $replacement, $haystack) {
   return implode($replacement, mb_split($needle, $haystack));
}
echo mb_str_replace('’', "'", "String’s Title"); 
```

It may solve encoding problems.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:42:04.340

Try this

```
$s = "String’s Title";
$h = str_replace("’","'",$s);
echo $h; 
```

Also can Try with preg_replace

```
echo preg_replace('/\’/',"'","String’s Title"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T18:42:45.473

I have just tested this:

```
echo str_replace('&#8217;', "'", $cardnametitle);
//Outputs: String's Title 
```

Edit: I believe that entries in your database have been `htmlentities`ed.

Note: I'm pretty sure this is not a good solution, even though it did solve your problem I think there should be a better way to do it.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T18:49:55.143

I don't know why `str_replace()` is not working for you.

I feel you haven't tried it in correct way.

Refer **[LIVE DEMO](http://codepad.org/hWneoESh)**

```
<?php
    $str = "String’s Title";
    echo str_replace('’', '\'', $str) . "\n";
    echo str_replace("’", "'", $str);
?> 
```

## OUTPUT:

```
String's Title
String's Title 
```

## UPDATE 1:

You may need to try setting the header as

```
header('Content-Type: text/html; charset=utf-8'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-12T04:47:58.843

I came across a similar issue trying to replace apostrophes with underscores... I ended up having to write this (and this was for a WordPress site):

```
$replace = array(",","'","’"," ","&#8217;","&#8211;");
$downloadTitle = str_replace( $replace,"_",get_the_title($gallery_id)); 
```

I'm new to PHP myself, and realize this is pretty hideous code, but it worked for me. I realized it was the "’" that REALLY needed to be factored in for some reason.

# arrays - 找到 5 个元素的中位数

> ID：11350471
> 
> 赞同：7
> 
> 时间：2012-07-05T18:37:00.237
> 
> 标签：arrays, algorithm, median

在最近的一次微软采访中提出了以下问题

给定一个大小为 5 的未排序数组。需要多少次最小比较才能找到中位数？然后他将其扩展为 n 大小。

根据我的说法，5 个元素的解决方案是 6

```
1) use 3 comparisons to arrange elements in array such that a[1]<a[2] , a[4]<a[5] and a[1]<a[4]
a) compare a[1] and a[2] and swap if necessary
b) compare a[4] and a[5] and swap if necessary 
c) compare a[1] and a[4].if a[4] is smaller than a[1] , then swap a[1] wid a[4] and a[2] wid a[5]
2)if a[3]>a[2].if a[2]<a[4] median value = min(a[3],a[4]) else median value=min(a[2],a[5]) 
3)if a[3]<a[2].if a[3]>a[4] median value = min(a[3],a[5]) else median value=min(a[2],a[4]) 
```

**这可以扩展到n个元素。如果不是，除了快速选择，我们如何在 O(n) 中的 n 个元素中找到中位数**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:00:59.197

Select 算法将列表分为五个元素的组。（剩下的元素暂时被忽略。）然后，对于每组五个，计算中位数（如果可以将五个值加载到寄存器中并进行比较，则该操作可能会非常快 - 最少 6 次比较）。然后在这个 n/5 个元素的子列表上递归调用 Select 以找到它们的真实中值。

# php - reddit API - 从 subreddit 中提取图像

> ID：11350481
> 
> 赞同：2
> 
> 时间：2012-07-05T18:37:53.063
> 
> 标签：php, xml, json, reddit

我正在寻找 reddit API 中的示例。我想从某个 subreddit ( [http://www.reddit.com/r/VillagePorn](http://www.reddit.com/r/VillagePorn) ) 中提取图像并将它们放在网页上。我见过其他网站这样做（主要是，`imgur.com/r/*`），但我不知道怎么做。

我试过`http://www.reddit.com/r/VillagePorn/.xml`了，但这只是返回图片的缩略图。甚至连链接本身都没有。

我应该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:49:41.793

如果您愿意，可以查看[Reddit API 。](https://github.com/reddit/reddit/wiki/API)任何链接都可以添加`/.json`到它的末尾并获取相关信息，包括图片的源链接。

我不确定您是如何创建此页面的，但[这个问题](https://stackoverflow.com/questions/8191105/how-to-extract-url-data-from-reddit-api-using-json?rq=1)也可能对您有所帮助。

# c# - 保持模型中的数据安全

> ID：11350485
> 
> 赞同：0
> 
> 时间：2012-07-05T18:38:13.713
> 
> 标签：c#, asp.net-mvc, model

假设我有一个 Web 应用程序和一个`innerPage`为应用程序调用的视图，其模型如下所示：

```
public class innerPageModel
{
    public bool isFirstTime = true;
    public List<int> threadIDList;

} 
```

这是我的控制器`innerPage`：

```
public ActionResult innerPage(InnerPageModel model)
{
   if (model.isFirstTime == true)
   {
       Thread t = new Thread(Work);
       model.threadIDList.Add(t.ManagedThreadID);
       model.isFirstTime = false);

   } 
   System.Diagnostics.Debug.Write((model.threadIDList.Count).toString());
} 
```

现在我的`innerPage`视图每 5 秒刷新一次，因此每次都会遍历我的`innerPage`控制器。问题是每次我遍历控制器后我的模型中的所有数据都会被重置（每次它进入 if 块，表明`model.isFirstTime`当我只想遍历 if 块时它被重置为 true第一次）。同样，我`model.threadIDList`的每次都被重置。

有没有办法让我将数据保存在我的模型中，这样每次我的视图刷新时它都不会丢失？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:41:45.527

MVC 模型假设控制器将被调用，返回一个 ActionResult 然后完成。

在控制器操作中启动线程似乎[并不安全。](http://haacked.com/archive/2011/10/16/the-dangers-of-implementing-recurring-background-tasks-in-asp-net.aspx)

如果您需要在 HTTP 请求之间保留数据，您可以将其存储在[Session](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.session%28v=vs.98%29.aspx)或[Cache](http://msdn.microsoft.com/en-us/library/system.web.httpruntime.cache.aspx)中，具体取决于数据是针对每个用户还是对网站来说是全局的。

如果您需要真正的后台处理，请查看

*   [WebBackgrounder](https://github.com/NuGet/WebBackgrounder)
*   [石英网](http://quartznet.sourceforge.net/)
*   [流利调度器](http://fluentscheduler.codeplex.com/)

# numpy - 从 txt 文件计算平均值、标准差的有效方法

> ID：11350488
> 
> 赞同：1
> 
> 时间：2012-07-05T18:38:37.007
> 
> 标签：numpy, python-2.7, python, pandas

这是许多 txt 文件中的一个的副本。

```
Class 1:
Subject A:
posX posY posZ  x(%)  y(%)
  0   2    0    81    72
  0   2   180   63    38
 -1  -2    0    79    84
 -1  -2   180   85    95
  .   .    .    .     .
Subject B:
posX posY posZ  x(%)   y(%)
  0   2     0    71     73
 -1  -2     0    69     88   
  .   .     .    .      .
Subject C:
posX  posY posZ x(%)   y(%)
  0    2    0    86     71
 -1   -2    0    81     55
  .    .    .     .     .
Class 2:
Subject A:
posX posY posZ  x(%)  y(%)
  0   2    0    81    72
 -1  -2    0    79    84
  .   .    .    .     . 
```

*   班级、科目、行条目的数量都各不相同。
*   Class1-Subject A 总是有 posZ 条目，其中 0 与 180 交替
*   按班级和科目计算 x(%)、y(%) 的平均值
*   按类别和主题计算 x(%)、y(%) 的标准偏差
*   在计算平均值和 std_deviations 时也忽略 180 行的 posZ

我在 excel 中开发了一个笨拙的解决方案（使用宏和 VBA），但我宁愿在 python 中寻求更优化的解决方案。

numpy 非常有用，但 .mean()、.std() 函数仅适用于数组——我仍在研究它以及 panda 的 groupby 函数。

我希望最终输出如下所示（1\. 按类别，2\. 按主题）

```
 1\. By Class                 
             X     Y                      
 Average                        
 std_dev     

 2\. By Subject  
             X     Y
 Average
 std_dev 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T00:21:14.220

我认为使用字典（和字典列表）是熟悉在 python 中处理数据的好方法。要像这样格式化数据，您需要读取文本文件并逐行定义变量。

开始：

```
for line in infile:
    if line.startswith("Class"):
        temp,class_var = line.split(' ')
        class_var = class_var.replace(':','')   
    elif line.startswith("Subject"):
        temp,subject = line.split(' ')
        subject = subject.replace(':','') 
```

这将创建对应于当前班级和当前主题的变量。然后，你想读入你的数值变量。读取这些值的一个好方法是通过一个`try`语句，它会尝试将它们变成整数。

```
 else:
        line = line.split(" ")
        try:
            keys = ['posX','posY','posZ','x_perc','y_perc']
            values = [int(item) for item in line]
            entry = dict(zip(keys,values))
            entry['class'] = class_var
            entry['subject'] = subject
            outputList.append(entry)
        except ValueError:
            pass 
```

这会将它们放入字典形式，包括先前定义的类和主题变量，并将它们附加到 outputList。你最终会得到这个：

```
[{'posX': 0, 'x_perc': 81, 'posZ': 0, 'y_perc': 72, 'posY': 2, 'class': '1', 'subject': 'A'},
{'posX': 0, 'x_perc': 63, 'posZ': 180, 'y_perc': 38, 'posY': 2, 'class': '1', 'subject': 'A'}, ...] 
```

等等

然后，您可以通过子集字典列表（应用排除 posZ=180 等规则）来平均/获取 SD。这是按班级平均的：

```
classes = ['1','2']
print "By Class:"
print "Class","Avg X","Avg Y","X SD","Y SD"
for class_var in classes:   

    x_m = np.mean([item['x_perc'] for item in output if item['class'] == class_var and item['posZ'] != 180])
    y_m = np.mean([item['y_perc'] for item in output if item['class'] == class_var and item['posZ'] != 180])
    x_sd = np.std([item['x_perc'] for item in output if item['class'] == class_var and item['posZ'] != 180])
    y_sd = np.std([item['y_perc'] for item in output if item['class'] == class_var and item['posZ'] != 180])

    print class_var,x_m,y_m,x_sd,y_sd 
```

您必须尝试打印输出才能获得您想要的内容，但这应该可以帮助您入门。

# ios - 如何在另一个选项卡的视图控制器中为协议设置委托？

> ID：11350489
> 
> 赞同：1
> 
> 时间：2012-07-05T18:38:42.713
> 
> 标签：ios, model-view-controller, delegates, protocols

我想要一些专家的 MVC 设计反馈：

我有一个带有 2 个选项卡的 UITabBarController，每个选项卡都通向一个带有 VC 堆栈的导航控制器。

第一个选项卡路径上的最后一个视图控制器将显示图像。我希望将该图像存储在表格中，并在选择第二个选项卡时随时查看。

如何将此图像从第一个选项卡-> NaVController->last VC (image VC) 发送到第二个选项卡-> NavController->table VC？

我有几个选择：

1- 在 tableVC 中创建一个类方法并让 imageVC 调用该类方法并将该图像直接保存到用户默认值中。这似乎违背了 MVC

2- 在 imageVC 中使用方法和委托属性创建协议，并让表 VC 采用该方法将图像保存在数组中。这里的问题是设置委托的唯一位置是在 ViewDidLoad 中：

```
[[[[self.tabBarController.viewControllers objectAtIndex:0] viewControllers] objectAtIndex:1] setDelegate:self]; 
```

这里的问题是，如果用户从一开始就选择第二个选项卡，应用程序将崩溃，因为很明显 viewControllers 还没有加载到第一个选项卡的导航堆栈上。同样，如果用户先看到 1 张图像，然后选择第二个选项卡，它将执行并设置委托，但不会保存第一个选择的图像。

必须有一个更简单的方法......

在此先感谢 KB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:52:42.773

我认为您应该将数据模型与视图控制器分开一点。遵循 MVC 方法，模型不应该知道它是如何表示的。因此，对模型进行更改`ImageVC`不应涉及直接调用任何其他 VC。

我会创建一个单独的实体，例如`SelectedImages`，并从中添加图像`ImageVC`，并`TableVC`在需要显示自身时从中读取。`SelectedImages`可以是应用程序委托中的属性、Core Data 实体、单例类或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:52:30.997

您可以让 AppDelegate 成为两个 VC 的代表。然后，当第一个选项卡选择图像时，它可以进行某种`[self.delegate setTheImage:theImage];`调用。第二个选项卡可以调用它的委托（AppDelegate），类似于`theImage = [self.delegate getTheImage];`. 如果尚未选择图像，则让 AppDelegate 传递 nil 并`theImage == nil`在显示第二个选项卡之前检查（并可能放置某种界面对象，让用户知道发生了什么）。

下面是一些将 AppDelegate 设置为委托的代码：

```
AppDelegate* appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
self.delegate = appDelegate; 
```

然后你的 AppDelegate 可以有一个像'theImage'这样的图像属性：

```
-(void) setTheImage:(UIImage *)image:
{
    self.theImage = image;
}

-(UIImage *) getTheImage
{
    if(self.theImage)
        return self.theImage;
    else
        return nil;
} 
```

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:39:10.477

选项 2 变体：

MainVC 可以采用 ImageVC 协议，并将图像设置为 TableVC。TableVC 必须是 MainVC 属性

# django - Django form.clean()，cleaned_data KeyError

> ID：11350498
> 
> 赞同：2
> 
> 时间：2012-07-05T18:39:08.563
> 
> 标签：django, forms

在[Django 1.4 文档](https://docs.djangoproject.com/en/1.4/ref/forms/validation/)中，它说`clean_<fieldname>`首先运行方法，然后执行表单`clean`方法。

我有以下代码示例。该表单与 FormPreview 一起使用。当`pmid`表单中的字段为空时，它应该抛出`ValidationError`异常，但它不会发生。

```
class MyForm(forms.Form):
    pmid = forms.CharField()
    .. other fields ..

    def clean(self):
        cd = super(MyForm, self).clean()
        cd['pmid'] # returns KeyError and it's not in cd
        return cd 
```

我不覆盖任何`clean_<field>`方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:41:03.853

首先，如果您只想确保某个字段不为空，则只需添加`required=True`即可。例如：

```
class MyForm(forms.Form):
    pmid = forms.CharField(required=True)
    ... 
```

你完成了。

但是，即使您不能那样做，您*仍然*不会在 中验证它`clean`，而是在`clean_<fieldname>`文档中描述的那样。

```
def clean_pmid(self):
    pmid = self.cleaned_data.get('pmid')
    if not pmid:
        raise forms.ValidationError('pmid cannot be blank')
    return pmid 
```

# ruby - Ruby Hash .keys 和 .values，可以安全地假设相同的顺序吗？

> ID：11350500
> 
> 赞同：30
> 
> 时间：2012-07-05T18:39:14.493
> 
> 标签：ruby, hash

基本的 irb 测试表明 Ruby Hash以匹配`.keys`的`.values`顺序返回。假设是这种情况是否安全？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-05T18:45:14.977

是的。根据[Hash 的 Ruby 文档](http://www.ruby-doc.org/core-1.9.3/Hash.html "用于哈希的 Ruby 文档")，“哈希按照插入相应键的顺序枚举它们的值。” 因此，如果以相同的方式创建哈希，您应该始终获得相同的顺序。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-05T19:04:48.360

取决于您正在运行的 Ruby 版本。在 1.8 之前，枚举不是按插入顺序排列的。从 1.9 开始，它将根据插入顺序枚举键和值，因此，是的，只要您运行 1.9 就可以安全地假设。

# qt - qt 4.8.0 上的应用程序比 4.7.4 慢

> ID：11350504
> 
> 赞同：0
> 
> 时间：2012-07-05T18:39:35.480
> 
> 标签：qt, qt4.7, qt4.8

我有一个使用 Qt 4.7.4 开发的应用程序，但我遇到了按钮（太小）点击区域的问题（报告了错误）。所以我改用 Qt 4.8.0。现在我的按钮问题已解决，但我的应用程序运行速度比使用 Qt 4.7.4 运行时要慢得多。有什么我需要做的吗？各种设置...

谢谢

# php - 如何在文本框中插入数字而不是选项类型

> ID：11350505
> 
> 赞同：1
> 
> 时间：2012-07-05T18:39:44.107
> 
> 标签：php, javascript

我需要帮助将值附加到文本框中。发生的情况是，使用下面的相关代码，用户可以将表格行中的“选项类型”添加到文本框中。例如，如果用户单击“添加”按钮并且在该行中选项类型为“AD”，它会在文本框中添加“AD”。但我不希望它在文本框中添加“AD”。我希望它在文本框中添加一个数字，而不是“真或假”和“是或否”选项，它们可以按原样插入。每种选项类型的编号如下：

```
Option Type             Number

A-C                     3
A-D                     4
A-E                     5
A-F                     6

...

A-Z                     26
True or False           True or False
Yes or No               Yes or No 
```

我的问题是如何将所有字母选项类型的数字（真或假，是或否保持不变）插入文本框中？

以下是将表格行中的选项类型插入文本框的相关代码：

表格行和添加按钮：

```
 echo "<table border='1' id='resulttbl'>
      <tr>
      <th class='optiontypeth'>Option Type</th>
      </tr>";
      foreach ($searchResults as $key=>$question) {
        echo '<td class="optiontypetd">'.htmlspecialchars($searchOption[$key]).'</td>';
        echo "<td class='addtd'><button type='button' class='add' onclick=\"parent.addwindow('$searchOption[$key]');\">Add</button></td></tr>";
}
      echo "</table>"; 
```

以下是选项类型当前插入的文本框：

```
<input type="text" name="gridValues" class="gridTxt maxRow" id="mainGridTxt" readonly="readonly" /> 
```

下面是它当前将选项类型插入到上面的文本框中的函数：

```
function addwindow(gridValues) { 

    if(window.console) console.log();

    if($(plusbutton_clicked).attr('id')=='mainPlusbutton') { 
        $('#mainGridTxt').val(gridValues);  
        } 

    $.modal.close(); 
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:51:53.133

在更改输入字段的值之前添加检查，例如：

```
if( questionText != "True or False" && questionText != "Yes or No" )
{
   // caution pseudo-code ahead:
   var myNumbers = {};
   myNumbers["A-C"] = "3";
   myNumbers["A-D"] = "4";
   // ...
   myNumbers["A-Z"] = "26";
   questionText = myNumbers[questionText];
}

$('#mainGridTxt').val(questionText); 
```

还有很多其他方法可以将 questionText 转换为正确的数字，但我只是展示了您可以容纳非 T/F 或 -Y/N 响应的逻辑。

# python - 使用 Python 的基本 I/O 来操作或创建 Python 文件？

> ID：11350509
> 
> 赞同：0
> 
> 时间：2012-07-05T18:39:54.990
> 
> 标签：python, code-generation

最有效的方法 - 我知道它不是很有效，但老实说我找不到更好的方法 - 操作 Python (.py) 文件，添加/减去/附加代码，是使用我的基本文件/O 模块包含在 Python 中吗？

例如：

```
obj = open('Codemanipulationtest.py', 'w+')
obj.write("print 'This shows you can do basic I/O?'")
obj.close() 
```

将操作我拥有的一个名为“codemanipulationtest.py”的文件，并向其中添加一条打印语句。这是可以解决的问题，还是有任何更简单或更安全/有效的方法来操作/创建新的 python 代码？

我读过这个：[解析一个 .py 文件，读取 AST，修改它，然后写回修改后的源代码](https://stackoverflow.com/questions/768634/python-parse-a-py-file-read-the-ast-modify-it-then-write-back-the-modified)

老实说，I/O 方法似乎更容易。我对 Python 有点陌生，所以我可能只是表现得很愚蠢......在此先感谢您的任何回复。

*编辑*

这一切的重点只是玩弄代码的效果。我正在考虑将我最终使用的任何东西连接到某种学习算法，看看它一次生成少量代码的效果如何，看看它可以从那里去哪里......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:51:16.530

这取决于您将使用生成的代码做什么。您有几个选项，每一个都比上一个更高级。

*   创建文件并导入
*   创建一个字符串和`exec`它
*   编写代码以直接创建类（或模块）而不是文本，将您需要的任何功能插入其中
*   直接生成 Python 字节码并执行它！

如果您正在编写将被其他程序员使用和修改的代码，那么第一种方法可能是最好的。否则，对于大多数用例，我建议使用第三种。最后一个只适用于受虐狂和前汇编语言程序员。

如果您想修改现有的 Python 源代码，有时可以通过基本的搜索和替换来进行简单的修改，特别是如果您对正在使用的源文件有所了解，但更好的方法是`ast`模块。这为您提供了 Python 源代码的抽象表示，您可以对其进行修改，然后直接编译成 Python 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:11:37.733

为了生成代码，我会将其分解为各种类、IF 类、FOR 类等。然后您可以使用输出，其中每个类都有一个 to_str() 方法，您可以依次调用该方法。

```
statements = [ ... ]

obj = open( "some.py", "w+" )

for s in statements:
    obj.write( s.to_str() )

obj.close() 
```

通过这种方式，您可以轻松地扩展您的项目，并且它会更易于理解和灵活。而且，它与您想要的简单写入方法的使用保持一致。

根据学习算法，这种对各种类别的突破可以很好地导致一种用于代码的伪遗传算法。您可以将基因组编码为一系列语句，然后您只需要找到一种方法来将参数传递给每个语句（如果需要）等。

# c - 轻量级和可扩展的 C 编译器前端

> ID：11350511
> 
> 赞同：3
> 
> 时间：2012-07-05T18:40:02.370
> 
> 标签：c, parsing, compiler-construction

有谁知道是否有轻量级 C 编译器前端？我真的只需要词法分析 + 解析 + 语义检查，我需要对其进行代码生成和静态分析。提前致谢

阿尔贝托

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T18:43:15.317

试试 TCC：[http ://bellard.org/tcc/](http://bellard.org/tcc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:42:58.193

查看[clang](http://clang.llvm.org/index.html)，一个 LLVM 的开源前端。

# c# - WinForms ListBox 追加选择

> ID：11350514
> 
> 赞同：0
> 
> 时间：2012-07-05T18:40:09.717
> 
> 标签：c#, winforms, listbox

我有一个`ListBox`. `SelectionMode = MultiExtended`我希望 ListBox 的*默认*行为是“追加”。换句话说，您在按住控制键时获得的行为应该是 ListBox 的默认被动功能。

我该怎么做？我需要手动订阅“Mouse Down”和“Key Down”事件吗？有没有我缺少的设置？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:42:03.393

丑陋的解决方案，但我能做的最好。

```
 [DllImport("user32.dll", SetLastError = true)]
    static extern void keybd_event(byte bVk, byte bScan, int dwFlags, int dwExtraInfo);

    public const byte KEYEVENTF_KEYUP = 0x02;
    public const int VK_CONTROL = 0x11;

    private void listBox1_MouseEnter(object sender, EventArgs e)
    {
        keybd_event(VK_CONTROL, (byte)0, 0, 0);
    }

    private void listBox1_MouseLeave(object sender, EventArgs e)
    {
        keybd_event(VK_CONTROL, (byte)0, KEYEVENTF_KEYUP, 0);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:45:47.237

使用`MultiSimple`模式

[http://msdn.microsoft.com/en-us/library/system.windows.forms.selectionmode(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.selectionmode(v=vs.80).aspx)

```
SelectionMode = SelectionMode.MultiSimple 
```

# c# - EF 一对多外键没有子导航属性

> ID：11350517
> 
> 赞同：11
> 
> 时间：2012-07-05T18:40:24.977
> 
> 标签：c#, entity-framework, foreign-keys, code-first

使用代码优先实体框架和 .NET 4，我试图在父母与孩子之间创建一对多的关系：

```
public class Parent
{
    [Key]
    public int ParentId { get; set; }
    [Required]
    public string ParentName { get; set; }
    public IEnumerable<Child> Children { get; set; }
}

public class Child
{
    [Key]
    public int ChildId { get;  set; }
    [ForeignKey]
    public int ParentId { get; set; }
    [Required]
    public string ChildName { get; set; }
} 
```

[正如这里](https://stackoverflow.com/questions/8452725/entity-framework-map-foreign-key-without-navigation-property/8455916#8455916)所指出的，为了将外键关系带入数据库，必须链接实际对象，而不仅仅是它们的 ID。如果让子级包含对其父级的引用（[示例](https://stackoverflow.com/a/5543702/1180926)），则执行此操作的正常方法。

但是如何在*我的*实现中强制执行外键，这是相反的方式（父引用子）？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-05T20:18:40.283

首先：您不能`IEnumerable<T>`用于集合导航属性。EF 将忽略此属性。改为使用`ICollection<T>`。

更改此设置后，在您的特定示例中，您无需执行任何操作，因为外键属性名称遵循约定（`ParentId`主体实体中的主键名称`Parent`），因此 EF 将检测到所需的一对多关系`Parent`并`Child`自动。

如果您有另一个“非常规”的 FK 属性名称，您仍然可以使用 Fluent API 定义这样的映射，例如：

```
public class Child
{
    [Key]
    public int ChildId { get;  set; }

    public int SomeOtherId { get; set; }

    [Required]
    public string ChildName { get; set; }
} 
```

映射：

```
modelBuilder.Entity<Parent>()
    .HasMany(p => p.Children)
    .WithRequired()
    .HasForeignKey(c => c.SomeOtherId); 
```

据我所知，不可能用数据注释定义这种关系。属性的使用`[ForeignKey]`需要外键属性所在的依赖实体中的导航属性。

# php - 在 php 中获取 pgsql 结果集的详细字段信息

> ID：11350518
> 
> 赞同：1
> 
> 时间：2012-07-05T18:40:25.727
> 
> 标签：php, postgresql

我一直在尝试从 php 中的 Postgresql 获取结果集中字段的完整元信息（类似于 mysql_fetch_field()，它提供了很多关于字段定义的信息）。虽然我可以使用以下功能来查找一些信息：

```
$name = pg_field_name($result, 1);
$table = pg_field_table($result, 1);
$type = pg_field_type($result, 1); 
```

我找不到一种方法来获取有关该字段是否允许空值、是否包含 blob 数据（按字段定义）、是否是主要的、按定义的唯一键等的详细信息。mysql_fetch_field() 以某种方式提供了所有这些信息，即很有用。

我真的很想用某种方法直接从 php 获取该信息，但如果那不可能，那么也许有人创建了一个例程，它可能能够以某种方式从 pgsql 结果集中提取该信息。

PS：这看起来很有希望，但页面上的警告不是一个好兆头： http: [//php.net/manual/en/pdostatement.getcolumnmeta.php](http://php.net/manual/en/pdostatement.getcolumnmeta.php)

另外，我目前没有使用 PDO，但如果没有解决方案，那么 PDo 特定的答案也足够了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-06T06:55:55.583

您可以使用如下查询在您的列上找到元数据：

```
select * from information_schema.columns 
where table_name = 'regions' and column_name = 'capital' 
```

这应该提供在 mysql_fetch_field 中找到的所有信息。我不是 php 编码器，所以也许有人知道包装这个查询的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T19:18:19.307

全部;

惊讶地发现 pgsql 在 PHP 中没有列计数例程。我查找的所有帮助都从“information_schema.columns”中获得了总数，这不是您在逐个单元处理时想要的。

所以这里有几个快速使用的功能：

```
// Test Cell by Cell
echo "Testing Cell by Cell! <br>";
$sql   = "SELECT * FROM sometable;
$res   = pg_query($sql);
$r_cnt = pg_numrows($res) or die("Error: Row Count Failed!");
$c_cnt = pg_numcols($res) or die("Error: Col Count Failed!");
echo "C=> $c_cnt R=> $r_cnt <br>";
for ($n=1; $n<=$r_cnt; $n++) {
    for ($x=1; $x<=$c_cnt; $x++) {
       echo "Cell=> pg_result($res,$n,$x) <br>";
    }  // end while $x
}  // end while $n

function pg_numcols($res) {
    $spos   = strpos(strtoupper($this->db_sql),'SELECT')+6;
    $fpos   = strpos(strtoupper($this->db_sql),'FROM');
    $lenp   = $fpos - $spos;
    $t_str  = substr($this->db_sql,$spos,$lenp);
    $x_str  = explode(',',trim($t_str));
    $result = count($x_str);
    return $result;
}  // end function 
```

希望你喜欢！

# javascript - 从服务器端代码获取会话信息到客户端代码

> ID：11350522
> 
> 赞同：1
> 
> 时间：2012-07-05T18:40:34.333
> 
> 标签：javascript, node.js, cookies, backbone.js, express

在我正在使用 Node、Express 和 Backbone 开发的网站上，我让用户使用常规的 HTML 表单登录，成功登录后，会创建一个用户会话。在服务器端访问此会话信息很容易，让我可以访问用户 ID、用户名等，但我不确定如何在 Backbone 中访问此信息。

我想获取 UserID，这样我就可以为 Collection 创建一个 URL，如下所示：

```
url: '/api/users/'+ this.userID +'/movies'; 
```

但我不确定如何最好地根据服务器端的会话数据获取用户 ID。这是否需要创建另一个模型——例如，通过特定的 url/get 请求从服务器获取会话数据的“用户”模型？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:34:00.263

我想出了一些东西，但仍然愿意接受建议：

首先，在 Express.js 中创建一个返回 userId 的函数：

```
app.get('/api/current-user', middleware.requiresLogin, function(req, res){
  res.send(req.session.user._id);
}); 
```

其次，在客户端，使用 Backbone 模型或 $.get 请求检索 ID：

```
var userID = $.get("/api/current-user");

$.when(userID).then(function(data){
    var user = new userCollection(data);
    user.fetch();
}); 
```

使用您的收藏和模型执行此操作：

```
window.userModel = Backbone.Model.extend({
    idAttribute: "_id"
});

var userCollection = Backbone.Collection.extend({
    model: userModel,
    initialize: function(options){
        this.url = "/api/users/"+options+"/movies";
        this.model.urlRoot = "/api/users/"+options+"/movies";
    }
}); 
```

myModel.save(); 然后正常工作。

# django - django + 与 ORM 混淆

> ID：11350524
> 
> 赞同：0
> 
> 时间：2012-07-05T18:40:39.640
> 
> 标签：django, amazon-rds

尽管遵循了文档，但我收到了一个奇怪的错误。我有以下模型：

```
class UserToken(models.Model):
    token = models.CharField(max_length=100)
    user = models.ForeignKey(User) 
```

每当我`UserToken.objects.get(token=tokenValue)`在本地为 MySQL 做（tokenValue 是我正在寻找的值）时，一切正常。我得到了预期的价值。但是，当我在 Amazon RDS 中的 MySQL 实例上执行相同操作时，我不断收到以下错误：

`ERROR Unknown exception: UserToken matching query does not exist.`

我在这里有什么遗漏吗？为什么这样的语句在 RDS 中不起作用？

**[编辑]**

只是为了澄清，令牌值确实存在。我检查了数据库只是为了确定。我还尝试了以下方法：

`ut = UserToken.objects.raw("select * from user_token")`（只是为了测试..表中只有一个条目）并且我收到以下错误：`Unknown exception: 'RawQuerySet' object has no attribute 'token'`。是否有一个原因？该`token`领域确实存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:09:30.457

我真的不确定这有什么不同......但以前我正在做`request.raw_post_data`的是获取用户发送给我的 json 消息。我将其更改为`request.POST`并`request.body`以某种方式解决了问题。以防万一其他人面临这个难以调试的问题！

# ruby-on-rails-3 - Rails 3.2 基本关系 has_many

> ID：11350527
> 
> 赞同：0
> 
> 时间：2012-07-05T18:40:51.543
> 
> 标签：ruby-on-rails-3, activerecord

我已经重读了协会的 Rails 指南，但仍然把我的头撞到墙上。我在 Stack Overflow 上看到了一些高级问题，但无法确定它们是否能阐明我的问题。也许我还没有把我的思想包裹在这件事上。请告诉我我没有看到什么。

我有一个 School.rb，其中 has_many Events，has_many Venues。每个活动和场地都属于_to School。我正在尝试将场地与活动联系起来。它们与学校相关联，因为它们具有匹配的 school_id。正如预期的那样，学校的名称很容易在 Event#show 和 Venue#show 中应用。诀窍是如何制作 Event 控制器以使用 school_id 在 Event#show 页面中拉取 Venue 的 addy？

我的尝试不断丢失，所以我开始思考也许我必须让 Event belongs_to Venue 和 Venue has_many Events。这是正确的做法吗？

我尝试 <%= @event.venue.address %> 失败，因为 nil:NilClass 的“未定义方法‘地址’

也许我想多了，但正如我上面提到的，我知道的不够多，无法提出正确的问题。如果我用英语进行查询，它将是“获取其 school_id 与当前/活动事件的 school_id 匹配的 Venue 实例。” 那有意义吗？我试图在rails guide中找到接近的东西并尝试了这个：

```
 @venues = Venue.where(:school_id => @school_id) 
```

[]:ActiveRecord::Relation 的未定义方法“地址”。场地地址在场地模型中。

这是我的school.rb：

```
 class School < ActiveRecord::Base

  has_many :events, :dependent => :destroy   
 has_many :venues, :dependent => :destroy
 has_and_belongs_to_many :users
  belongs_to :event   belongs_to :venue
  def self.fetch_for_name(_name)
 school = self.new(:name => _name)
  end 
 end 
```

这是我的 event.rb：

```
class Event < ActiveRecord::Base

resourcify
belongs_to :school
 belongs_to :venue
 end 
```

这是我的 Venue.rb：

```
 class Venue < ActiveRecord::Base

  resourcify
  belongs_to :school
   has_many :events

   end 
```

请帮我克服这一步，山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:24:23.630

您需要查看指南的[这一](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association) 部分，并确保您有 has_many through 地点和事件之间的关系，如链接中所述...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:49:33.820

要执行您所要求的确切操作，您将在 Venue 中创建一个方法来查询给定事件。

```
class Venue < ActiveRecord::Base
  resourcify
  belongs_to :school
  has_many :events
  def self.venue_for_event(event)
    where("school_id = ?", event.school_id)
  end
end 
```

但是，有一些关于您的模型的问题要问。为什么一所学校有很多活动和场地，却又属于一个活动和场地？你想用这些模型解决什么问题？如果学校是把场地和活动联系在一起的粘合剂，那就考虑把它变成`has_many, :through`关系中的连接模型

# c# - 如何创建多个excel表

> ID：11350534
> 
> 赞同：2
> 
> 时间：2012-07-05T18:41:22.450
> 
> 标签：c#, asp.net

好吧，我只需要创建一个 excel 文件，两张表都使用 2 个不同的 DataTable 填充，它提供了用户只需单击保存的名称，下一个代码允许我将一个数据表添加到一张表（我正在使用 C# ，asp.net，而不是使用Visual Studio，我在记事本中写我的代码）：

```
string name2="Centroids";
        HttpContext context = HttpContext.Current;
        context.Response.Clear();
        foreach (System.Data.DataRow row in _myDataTable2.Rows)
        {   
            for (int i = 0; i < _myDataTable2.Columns.Count; i++)
                {
                context.Response.Write(row[i].ToString().Replace(",", string.Empty) + ",");
            }
        context.Response.Write(Environment.NewLine);
        }
    context.Response.ContentType = "text2/csv";
    context.Response.AppendHeader("Content-Disposition", "attachment; filename=" + name2 + ".csv"); 
```

但我不知道如何创建第二张工作表并使用第二个 DataTable，任何关于如何找到解决方案的想法，这样用户只需保存和下载一个文档，而不是保存程序中的许多 DataTable

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:07:42.453

您可能想探索使用 EPPlus 的可能性。以我的经验，使用 Response 对象有很多限制，并且需要花费太多的开发精力来生成 Excel 文件。

网址： [http ://epplus.codeplex.com/](http://epplus.codeplex.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T19:13:05.203

您应该使用开源库来生成本机 excel 文件，您无法使用 csv 创建两个工作表。

使用[NPOI](http://npoi.codeplex.com/) (xls) 或/和[EPPlus](http://epplus.codeplex.com/) (xlsx) 并完全控制您的 excel 导出，在此答案[https://stackoverflow.com/a/9569827/351383](https://stackoverflow.com/a/9569827/351383)中，您可以看到使用 EPPlus 从 DataTable 创建 excel 文件的示例。您可以编辑该方法以接受 DataTable 列表并为每个表创建新工作表，这很简单，只需：

```
ExcelPackage pack = new ExcelPackage();
ExcelWorksheet ws = pack.Workbook.Worksheets.Add(sheetName); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-18T04:02:04.423

```
public bool LlenarExcelxlsx(List<DatosEntidad> listaOrigen)
{
    bool exito = false;
    string[] tipoLista = { "A", "B", "C" };
    string nombreArchivo = @"D:\prueba.xlsx";

    IWorkbook wb = new XSSFWorkbook();
    using (FileStream fileData = new FileStream(nombreArchivo, FileMode.Create, FileAccess.Write))
    {
        for (int k = 0; k < tipoLista.Length; k++)
        {
            List<DatosEntidad> listaDestino = listaOrigen
                .Where(c => c.tipo == tipoLista[k]).ToList();

            DataTable dt = ToDataTable(listaDestino);

            ISheet sheetx = wb.CreateSheet("Res_" + tipoLista[k] + k);
            ICreationHelper cH = wb.GetCreationHelper();
            for (int i = 0; i < dt.Rows.Count; i++)
            {
                IRow row = sheetx.CreateRow(i);
                for (int j = 0; j < 13; j++)
                {
                    ICell cell = row.CreateCell(j);
                    cell.SetCellValue(cH.CreateRichTextString(dt.Rows[i].ItemArray[j].ToString()));
                }
            }
        }
        wb.Write(fileData);
        exito = true;
    }
    return exito;
} 
```

# r - 将一个因子列转换为多个布尔列

> ID：11350537
> 
> 赞同：7
> 
> 时间：2012-07-05T18:41:38.910
> 
> 标签：r, data.table

给定数据如下：

```
library(data.table)
DT <- data.table(x=rep(1:5, 2)) 
```

我想将此数据拆分为 5 个布尔列，指示每个数字的存在。

我可以这样做：

```
new.names <- sort(unique(DT$x))

DT[, paste0('col', new.names) := lapply(new.names, function(i) DT$x==i), with=FALSE] 
```

但这使用了一个讨厌`lapply`的东西，它可能比 data.table 替代方案慢，而且这个解决方案让我觉得不是很“data.table-ish”。

是否有更好和/或更快的方法来创建这些新列？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T18:54:03.583

怎么样`model.matrix`？

```
model.matrix(~factor(x)-1,data=DT)

   factor(x)1 factor(x)2 factor(x)3 factor(x)4 factor(x)5
1           1          0          0          0          0
2           0          1          0          0          0
3           0          0          1          0          0
4           0          0          0          1          0
5           0          0          0          0          1
6           1          0          0          0          0
7           0          1          0          0          0
8           0          0          1          0          0
9           0          0          0          1          0
10          0          0          0          0          1
attr(,"assign")
[1] 1 1 1 1 1
attr(,"contrasts")
attr(,"contrasts")$`factor(x)`
[1] "contr.treatment" 
```

显然，您可以投入`model.matrix`到`[.data.table`给出相同的结果。不确定它是否会更快：

```
DT[,model.matrix(~factor(x)-1)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T23:28:04.560

还有`nnet::class.ind`

```
library(nnet)

cbind(DT, setnames(as.data.table(DT[, class.ind(x)]),paste0('col', unique(DT$x)))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-03T03:15:19.977

```
library(data.table)
DT <- data.table(x=rep(1:5, 2))

# add column with id
DT[, id := seq.int(nrow(DT))]

# cast long table into wide
DT.wide <- dcast(DT, id ~ x, value.var = "x", fill = 0, fun = function(x) 1) 
```

# c# - 遍历odata中关系的关系

> ID：11350542
> 
> 赞同：0
> 
> 时间：2012-07-05T18:41:52.617
> 
> 标签：c#, linqpad

我有一个实体说具有属性 Dnshostname 和导航属性 TechnicalProductsHosted 的计算机。Computers to TechnicalProductsHosted 是多对一和一对多的关系。TechnicalProductsHosted 是 odata 中的 TechnicalProducts。实体 TechnicalProducts 具有具有多对一关系的导航属性责任用户。ResponsibleUser 是 odata 中的 Employee。员工有一个导航属性 Manager 与多对一关系。当我点击经理时，它会将我带到员工实体。我希望获得经理姓名列表。我正在使用 Linqpad。下面是代码。

```
void Main()
    {
    var a = from cpuid in Computers
          where cpuid.DnsHostName == "xyz"
          select new {
    ITManager = cpuid.TechnicalProductsHosted.Select (x => x.ResponsibleUser.Manager.Select(z => new { ITManager = z.Name })),
          };
    Console.WriteLine(a);
    } 
```

这是错误。'LINQPad.User.Employee' 不包含'Select' 的定义，并且找不到接受'LINQPad.User.Employee' 类型的第一个参数的扩展方法'Select'（按F4 以添加使用指令或程序集引用)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:10:07.383

我假设 Manager 属性是一个单例（它不是一个集合）。在这种情况下，您可以在其上使用 Select。而是使用这样的东西：

```
var q = from cpuid in Computers
     where cpuid.DnsHostName == "xyz"
     select new {
         ITManagers = cpuid.TechnicalProductsHosted
             .Select (x => x.ResponsibleUser.Manager.Name)
     }; 
```

这将为您提供具有指定主机名的计算机列表，并在每台计算机上列出负责该产品的报告的经理列表。请注意，虽然可能有重复。

如果您可以描述查询应该实现的目标，那么可能会有更好的选择。

# java - 在 Eclipse 中复制一个 android 应用程序项目？

> ID：11350543
> 
> 赞同：0
> 
> 时间：2012-07-05T18:41:53.873
> 
> 标签：java, android, eclipse

是否可以复制我的 android 应用程序并给它一个新的命名空间？为另一个事件创建此应用程序的副本，而不是遍历并复制/粘贴所有文件，我希望能够复制该项目并选择一个新的命名空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:03:30.547

您可以创建项目的副本，在 'src/' 文件夹中选择包名称，按 F2 ，设置新名称并自动更新所有引用。虽然它可能不会正确更新所有引用，但它会更新其中的大部分。

# oracle - oracle-索引组织表

> ID：11350545
> 
> 赞同：1
> 
> 时间：2012-07-05T18:42:00.013
> 
> 标签：oracle

IOT ( `Index Organized Table`) 的用例是什么？

假设我有桌子

1.  ID
2.  姓名
3.  姓

我知道物联网，但对用例有点困惑`IOT`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:53:00.353

您的三列不是一个好的用例。

当您经常访问表中的许多连续行时，IOT 最有用。然后定义一个主键，以便表示所需的顺序。

一个很好的例子可能是时间序列数据，例如历史股票价格。为了绘制一个股票的股价图表，读取许多行并带有连续的日期。

所以主键是股票代码（或证券 ID）和日期。附加列可能是最后价格和交易量。

一个常规的表——即使在股票和日期上有索引——也会慢得多，因为实际的行将分布在整个磁盘上。这是因为您无法影响行的顺序，并且因为数据是每天插入的（而不是逐个代码）。

在索引组织的表中，同一个股票代码的数据最终在几个磁盘页面上，并且可以很容易地找到所需的磁盘页面。

表的设置：

```
CREATE TABLE MARKET_DATA
  (
    TICKER VARCHAR2(20 BYTE) NOT NULL ENABLE,
    P_DATE DATE NOT NULL ENABLE,
    LAST_PRICE NUMBER,
    VOLUME     NUMBER,
    CONSTRAINT MARKET_DATA_PK PRIMARY KEY (TICKER, P_DATE) ENABLE
  )
  ORGANIZATION INDEX; 
```

典型查询：

```
 SELECT TICKER, P_DATE, LAST_PRICE, VOLUME
 FROM MARKET_DATA
 WHERE TICKER = 'MSFT'
 AND P_DATE BETWEEN SYSDATE - 1825 AND SYSDATE
 ORDER BY P_DATE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T13:45:13.897

将索引组织的表视为索引。我们都知道索引的意义：提高对特定数据行的访问速度。这是在列子集上构建复合索引的技巧的性能优化，可用于满足常用查询。如果索引可以完全满足查询投影中的列，则优化器知道它根本不需要从表中读取。

物联网正是对其逻辑混乱采取的这种方法：构建索引并丢弃基础表。

决定是否将表实现为 IOT 有两个标准：

1.  它应该由一个主键（一个或多个列）和最多一个其他列组成。（好吧，也许是另外两列，但这是一个警告标志）。
2.  表的*唯一*访问路径是主键（或其前导列）。

第二点是吸引大多数人的地方，也是物联网用例很少见的主要原因。Oracle 不建议在 IOT 上构建其他索引，这意味着任何不从主键驱动的访问都将是全表扫描。如果表很小并且我们不需要经常通过其他路径访问它，这可能无关紧要，但它是大多数应用程序表的杀手。

候选表也可能具有相对较少的行数，并且可能是相当静态的。但这不是硬性规定；当然，仍然可以考虑将一个符合上面列出的两个标准的巨大的、易变的表作为物联网来实现。

那么是什么造就了一个好的候选dor索引组织呢？参考数据。大多数代码查找表是这样的：

```
code number not null primary key
description not null varchar2(30) 
```

几乎总是我们只对获取给定代码的描述感兴趣。因此，将其构建为 IOT 将节省空间并减少获取描述的访问时间。

# java - Hotmail 等效的 IMAP

> ID：11350551
> 
> 赞同：0
> 
> 时间：2012-07-05T18:42:19.640
> 
> 标签：java, imap, pop3, hotmail, email-client

我们需要为不支持 IMAP 的 Hotmail 构建一个客户端。据我了解，您必须使用带有 POP3 的交换，但 POP3 不支持将邮件从一个文件夹移动到另一个文件夹。我们需要以下功能：

*   能够阅读邮件而不将其标记为“已读”
*   可以删除邮件
*   能够将邮件从收件箱移到另一个文件夹并标记为已读

有什么办法可以让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T20:09:41.157

简短的回答，不。

从 Microsoft 获得 ActiveSync 协议的许可。

Hotmail 有一个 Outlook 连接器。也许有大量的 JNI，但首先检查许可证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-14T16:20:15.937

更新：[Outlook 现在支持 IMAP](http://blogs.office.com/2013/09/12/outlook-com-now-has-imap/)。Hotmail 使用相同的服务器。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-05T18:57:17.267

您可以使用 JavaMail 做所有您需要的事情。这是[API](http://javamail.kenai.com/nonav/javadocs/)

这是一个从收件箱中获取所有未读邮件并将其标记为已读的示例。查看文件夹类（特别是`copyMessages()`方法）将消息移动到新文件夹。

```
import java.util.Properties;
import javax.mail.*;
import javax.mail.search.FlagTerm;

public class Driver {
    public static void main(String[] args){

        // Create properties (disable security checks on server)
        Properties props = new Properties();

        // Get session
        Session session = Session.getDefaultInstance(props, null);

        try{
            // Get the store
            Store store = session.getStore("pop3");
            store.connect("servername", "username", "password");

            //connection configuration
            Folder folder = store.getFolder("INBOX");
            folder.open(Folder.READ_WRITE);

            //get all unread messages in the inbox
            FlagTerm ft = new FlagTerm(new Flags(Flags.Flag.SEEN), true); 
            Message[] messages = folder.search(ft);

            for (int i = messages.length -1; i>=0; i--) {
                    messages[i].setFlag(Flags.Flag.SEEN, true);
                }

            // Close connection 
            folder.close(false);
            store.close();
        }
        catch(Exception e){
                  e.printStackTrace();
        }
    } 
```

# javascript - 在 d3.js 中创建嵌套的 SVG 节点

> ID：11350553
> 
> 赞同：5
> 
> 时间：2012-07-05T18:42:45.167
> 
> 标签：javascript, d3.js

我刚刚开始使用 d3js，发现我必须为要链接到背景数据结构的每个元素创建多个选择器，例如单独的选择器，例如一个用于覆盖文本，一个用于矩形以制作带注释的条，这很奇怪图形。

```
svg.selectAll("rect")
.data(data)
.enter()
    .append("rect")
    .attr('y',function(d,i){return i*10;})
    .attr('height',10)
    .attr('width',function(d){return d.interestingValue})
    .fill('#00ff00');

svg.selectAll("text")
.data(data)
.enter()
    .append("text")
    .attr('y',function(d,i){return i*10;})
    .fill('#0000ff')
    .text(function(d){return d.interestingValue}); 
```

有没有更方便的方法将这些组合成一个单一的选择和 enter() 链来创建矩形和文本元素？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-06T16:04:39.200

使用[G（组）元素](http://www.w3.org/TR/SVG/struct.html#Groups)。使用单个数据连接来创建 G 元素，然后附加您的 rect 和 text 元素。例如：

```
var g = svg.selectAll("g")
    .data(data)
  .enter().append("g")
    .attr("transform", function(d) { return "translate(0," + i * 10 + ")"; });

g.append("rect")
    .attr("height", 10)
    .attr("width", function(d) { return d.interestingValue; });

g.append("text")
    .text(function(d) { return d.interestingValue; }); 
```

# php - 正则表达式 - 查询、隔离

> ID：11350555
> 
> 赞同：0
> 
> 时间：2012-07-05T18:42:50.420
> 
> 标签：php, regex

我有以下字符串。

> 安德鲁 - 鲍勃 - 杰伊 vs 约翰

现在所有四个名称都可以随时更改，但我唯一真正关心的是如何将 Jay 与 John 隔离在此常量之前的名称之外，格式始终遵循

```
world1 - world2 - X vs Y 
```

我如何检查 X 与 Y 而忽略前 2 个？

我试过了。

```
'%- (.*?) Vs (.*)$%'; 
```

无济于事。

任何帮助将不胜感激。

另外-根据建议，我该如何处理测试用例，在该测试用例中，除了两个参与者的姓名之外，我希望忽略最左边的所有内容-示例包括..

```
www.GrindTimeNow.NET: Magz vs K-mo (Tryouts)

SMACK/ URL PRESENTS JC VS GA

POISONPEN.TV PRESENTS PH VS DIRT BAG DAN

KOTD - Rap Battle - Arsonal vs Illmaculate

DON'T FLOP - ‬Rap Battle - Arkaic Vs Dekay 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T18:46:19.730

因此，您只需要捕获两个由“vs”和一些空格分隔的名称。这应该有效：

```
%(\w+)\s+vs\s+(\w+)%i 
```

[在 regexr 上查看演示](http://regexr.com?31f1q)

# asp.net-mvc - ASP.NET MVC ActionLink 保留“旧”路由参数

> ID：11350562
> 
> 赞同：2
> 
> 时间：2012-07-05T18:43:06.207
> 
> 标签：asp.net-mvc

我的两个过滤链接：

```
@Html.ActionLink("Customer 1", "Index", new { customer = 1  })
@Html.ActionLink("Project A", "Index", new { project = "A"  }) 
```

我的带有过滤功能的控制器：

```
public ViewResult Index(int? customer, int? project) {
        var query = ...

        if (customer != null) {
            query = query.Where(o => o.CustomerID == customer);
        }

        if (project != null) {
            query = query.Where(o => o.ProjectID == project);
        }
        return View(query.ToList());
} 
```

我现在可以过滤客户或项目，但不能同时过滤两者！

如果我点击客户 1，`url = Object?customer=1`

如果我点击项目 A，`url = Object?project=a`

我希望能够先单击客户 1，然后单击项目 A 并获得`url = Object?customer=1&project=a`

这是可能的还是我应该以其他方式做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:53:24.097

为什么不对第二个链接使用这样的东西：

```
@Html.ActionLink("Project A", "Index", new { customer = ViewContext.RouteData["customer"],  project = "A"  }) 
```

这样，客户参数在您提供时传入，但在为空时将传递 NULL。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:54:33.410

执行此操作的正确方法是将具有各种参数的模型返回到您的视图中。

**模型**

```
public class TestModel {
   public int? Customer { get; set; }
   public int? Project { get; set; }
   public List<YourType> QueryResults { get; set; }
} 
```

**看法**

```
@model Your.Namespace.TestModel

...

@Html.ActionLink("Project A", "Index", new { customer = Model.Customer, project = Model.Project }) 
```

**控制器**

```
public ViewResult Index(TestModel model) {
    var query = ...

    if (model.Customer != null) {
        query = query.Where(o => o.CustomerID == model.Customer);
    }

    if (model.Project != null) {
        query = query.Where(o => o.ProjectID == model.Project);
    }

    model.QueryResults = query.ToList();

    return View(model);
} 
```

# delphi - Delphi RTTI：获取属性的类

> ID：11350563
> 
> 赞同：6
> 
> 时间：2012-07-05T18:43:10.187
> 
> 标签：delphi, properties, delphi-2010, rtti

使用 Delphi 2010 和 RTTI，我知道如何获取对象的类类型以及如何获取/设置对象属性的值和类型，但是如何确定属性来自继承链中的哪个类？我想以不同于主类的方式使用基类的属性。

考虑这段代码：

```
TClassBase = class(TObject)
published
  property A: Integer;
end;

TClassDescendant = class(TClassBase)
published
  property B: Integer;
end;

procedure CheckProperties(Obj: TObject);
var
  ctx: TRttiContext;
  objType: TRttiType;
  Prop: TRttiProperty;
begin
  ctx := TRttiContext.Create;
  objType := ctx.GetType(Obj.ClassInfo);
  for Prop in objType.GetProperties do begin
    if Prop.GetClassType is TClassBase then
      // do something special with base class properties
    else
      // standard functionality on all other properties
  end;
end; 
```

问题是属性没有 GetClassType。ClassType 只返回 TRttiInstancePropertyEx 而不是属性所属的类的名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T21:50:55.733

另一种选择是使用 的[`Parent`](http://docwiki.embarcadero.com/Libraries/en/System.Rtti.TRttiMember.Parent)属性[`TRttiProperty`](http://docwiki.embarcadero.com/Libraries/en/System.Rtti.TRttiProperty)，从这里您可以访问该属性所属的类。

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  Rtti,
  SysUtils;

type
  TClassBase = class(TObject)
    private
      FA: Integer;
   published
    property A: Integer read FA;
  end;

  TClassDescendant = class(TClassBase)
    private
      FB: Integer;
    published
    property B: Integer read FB;
  end;

procedure CheckProperties(Obj: TObject);
var
  ctx: TRttiContext;
  objType: TRttiType;
  Prop: TRttiProperty;
begin
  ctx := TRttiContext.Create;
  objType := ctx.GetType(Obj.ClassInfo);
   for Prop in objType.GetProperties do
   if TRttiInstanceType(Prop.Parent).MetaclassType=TClassBase then
     Writeln(Format('The property %s is declarated in the TClassBase class',[Prop.Name]))
   else
     Writeln(Format('The property %s is not declarated in the TClassBase class',[Prop.Name]))
end;

begin
  try
   //CheckProperties(TClassBase.Create);
   CheckProperties(TClassDescendant.Create);
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  Readln;
end. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T20:29:07.263

我不知道是否可以获得引入属性的类，但您可以使用常规 RTTI 解决您的问题：

```
begin
  ...

  for Prop in objType.GetProperties do begin
    if Assigned(GetPropInfo(TClassBase, Prop.Name)) then
      // do something special with base class properties
    else
      // standard functionality on all other properties
  end;
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T21:43:27.050

您可以使用[GetDeclaredProperties](http://docwiki.embarcadero.com/Libraries/en/System.Rtti.TRttiType.GetDeclaredProperties)方法获取在当前类中声明的属性，然后与[GetProperties](http://docwiki.embarcadero.com/Libraries/en/System.Rtti.TRttiType.GetProperties)方法返回的值进行比较。

试试这个样本。

```
{$APPTYPE CONSOLE}

{$R *.res}

uses
  Rtti,
  SysUtils;

type
  TClassBase = class(TObject)
    private
      FA: Integer;
   published
    property A: Integer read FA;
  end;

  TClassDescendant = class(TClassBase)
    private
      FB: Integer;
    published
    property B: Integer read FB;
  end;

procedure CheckProperties(Obj: TObject);

  function ExistProp(const PropName:string; List:TArray<TRttiProperty>) : Boolean;
  var
   Prop: TRttiProperty;
  begin
   result:=False;
    for Prop in List do
     if SameText(PropName, Prop.Name) then
     begin
       Result:=True;
       break;
     end;
  end;

var
  ctx: TRttiContext;
  objType: TRttiType;
  Prop: TRttiProperty;
  CurrentClassProps : TArray<TRttiProperty>;
begin
  ctx := TRttiContext.Create;
  objType := ctx.GetType(Obj.ClassInfo);
  CurrentClassProps:=objType.GetDeclaredProperties;
   for Prop in objType.GetProperties do
   if ExistProp(Prop.Name, CurrentClassProps) then
     Writeln(Format('The property %s is declarated in the current %s class',[Prop.Name, obj.ClassName]))
   else
     Writeln(Format('The property %s is declarated in the base class',[Prop.Name]))
end;

begin
  try
   //CheckProperties(TClassBase.Create);
   CheckProperties(TClassDescendant.Create);
  except
    on E: Exception do
      Writeln(E.ClassName, ': ', E.Message);
  end;
  Readln;
end. 
```

# php - Cron 作业正在运行，但未执行 / 处于冻结状态

> ID：11350568
> 
> 赞同：0
> 
> 时间：2012-07-05T18:43:34.910
> 
> 标签：php, shell, cakephp, cron, crontab

我以前从未见过这个问题，我很困惑。我有 3 个通过 CakePHP 的控制台系统执行 PHP 代码的 cron 作业。所有 3 个作业已经运行了几个月，没有任何问题，并且继续运行。奇怪的问题是这些 cron 作业的输出总是相同的，但是当我手动运行代码时，它是正确的更新输出。我将每个作业的输出记录到 txt 文件中，以便查看时间戳和输出。

以下是 txt 文件中一项作业的输出（7 月 5 日 12:30 运行）：

```
Welcome to CakePHP v2.1.2 Console
---------------------------------------------------------------
App : app
Path: /var/www/html/app/
---------------------------------------------------------------

- Calculating stats
- 79 players calculated

---------------------------------------------------------------

CalculateStats complete!
Shell took 9.4434700012207 seconds 
```

这是我手动运行 shell 时的输出：

```
Welcome to CakePHP v2.1.2 Console
---------------------------------------------------------------
App : app
Path: /var/www/html/app/
---------------------------------------------------------------

- Calculating stats
- 188 players calculated

---------------------------------------------------------------

CalculateStats complete!
Shell took 6.4958961009979 seconds 
```

当作业再次运行（每 4 小时）时，输出将与第一个示例相同。就好像这项工作陷入了冻结状态，我不太确定如何解决它。

我已禁用缓存，检查 PATH 并确保 crontab 中有一个尾随换行符。所有作业（和我自己）也以 root 用户身份运行。作为参考，这是我的 crontab。

```
0 0-23/4 * * * /var/www/html/lib/Cake/Console/cake -app /var/www/html/app/ calculate_stats > /root/calculate_stats.txt

30 0-23/4 * * * /var/www/html/lib/Cake/Console/cake -app /var/www/html/app/ aggregate_votes > /root/aggregate_votes.txt

0 15 * * 3 /var/www/html/lib/Cake/Console/cake -app /var/www/html/app/ game_sprint_reset > /root/game_sprint_reset.txt 
```

有任何想法吗？

# javascript - 如何解析 json 字符串警报

> ID：11350570
> 
> 赞同：-1
> 
> 时间：2012-07-05T18:43:43.397
> 
> 标签：javascript, html, json

嗨，我如何解析这个 json 字符串：`{"Error":true, "data":["not available","somethinghere"]}`

但是那个字符串我是从这样的警报中得到的：

`alert(ff.Result.value);`

我需要从该警报中获取 json 字符串中的“不可用”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:48:57.300

大多数现代浏览器都支持 JSON 对象：

```
var errorObject = JSON.parse(ff.Result.value);
alert(errorObject.data[0]); 
```

请参阅[浏览器原生 JSON 支持 (window.JSON)](https://stackoverflow.com/questions/891299/browser-native-json-support-window-json)

使用 json2.js 的示例：

```
<script src="https://raw.github.com/douglascrockford/JSON-js/master/json2.js"></script>
<script>
    var errorObject = JSON.parse(ff.Result.value);
    document.getElementById('someId').innerHTML += errorObject.data[0];
</script> 
```

# paypal - 购物车/账单地址逻辑

> ID：11350578
> 
> 赞同：0
> 
> 时间：2012-07-05T18:44:09.473
> 
> 标签：paypal, logic, shopping-cart, payment, billing

你们中的一些人可能知道（如果您阅读我之前的 24932049023 问题：P）我正在开发一个购物网站。
付款将由 PayPal 处理，我想知道在这种情况下我是否真的需要拥有用户的帐单地址。这不像我必须验证他们的信用卡真实性......

我知道这不是一个编码问题，而是一个逻辑问题，我只是没有这种网站的经验，我真的不知道去哪里/问谁。

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:46:27.047

不，您不需要存储用户的地址信息。只需将用户发送到 Paypal，当他们回来时处理信息，一切都设置好了。

它真的很容易。

# jquery - 带有 jquery 的地址列表对象

> ID：11350579
> 
> 赞同：0
> 
> 时间：2012-07-05T18:44:10.623
> 
> 标签：jquery, html-lists

我想用 jquery 来解决这个列表。

```
<ul> <li id="unique_id"> Some Stuff </li> </ul> 
```

有人可以告诉我我是怎么做到的。这行不通。

```
$('ul li #unique_id').blink(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:45:47.317

```
$('ul li#unique_id').blink(); 
```

后面的空格`li`表示它应该寻找带有`id`of的后代`unique_id`；你想要一个`li`与一个`id`的`unique_id`。

但是，通常，您*不想*那么具体。`id`s 意味着在整个页面中是唯一的，并且不那么具体甚至可以更有效：

```
$('#unique_id').blink(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:46:43.307

要定位 LI 元素：

```
$('#unique_id').blink(); //it has a unique ID 
```

以 UL 元素为目标：

```
$('#unique_id').closest('ul').blink(); //it still has an ID 
```

# php - 如何检查 PHP 是否支持 multi_curl？

> ID：11350580
> 
> 赞同：2
> 
> 时间：2012-07-05T18:44:11.360
> 
> 标签：php, windows, curl, wampserver, curl-multi

我有一段使用 cURL 进行发布请求的 PHP 代码，它使用 curl_multi_* 函数来提高性能。

在我托管的 PHP 服务器上一切正常。

但它在 127.0.0.1 的 WAMPServer 上失败了。单个 cURL 请求在 WAMPServer 上工作得很好，但`curl_multi_select()`在脚本最终超时之前只会返回 -1。

代码...是 PHP.net 的 curl_multi_exec 手册页上的示例 #1：[http](http://www.php.net/manual/en/function.curl-multi-exec.php) ://www.php.net/manual/en/function.curl-multi-exec.php 这是导致无限循环的片段：

```
$active = null;

do {
    $mrc = curl_multi_exec($mh, $active);
} while ($mrc == CURLM_CALL_MULTI_PERFORM);

while ($active && $mrc == CURLM_OK) {
    if (curl_multi_select($mh) != -1) {
        do {
            $mrc = curl_multi_exec($mh, $active);
        } while ($mrc == CURLM_CALL_MULTI_PERFORM);
    }
} 
```

测试时禁用了 Vista 的防火墙。

有谁知道如何让 curl_multi_* 在 WAMPServer 上工作，或者有什么方法可以从 PHP 脚本中检测对 curl_multi_* 的支持，以便我可以回退？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-07T20:40:52.143

用于`function_exists('curl_multi_select')`检测支持。

[http://php.net/manual/en/function.function-exists.php](http://php.net/manual/en/function.function-exists.php)

# visual-studio-2012 - 无法在 Windows 8 Metro Apps 中使用自定义控件

> ID：11350581
> 
> 赞同：1
> 
> 时间：2012-07-05T18:44:11.937
> 
> 标签：visual-studio-2012

我正在尝试在 Windows 8 Metro Apps 中使用自定义控件。**如果我在同一解决方案**中的其他项目中引用我的自定义控件但无法成功地将控件引用添加到**不同解决方案**中的不同项目，则它工作正常。

每次我在我的项目中添加对控件扩展的引用时，我总是得到这个错误“内存不足，无法继续程序”

我已经从这个链接中获得了帮助，但它在 Windows 8 Release preview 上不起作用：

[http://timheuer.com/blog/archive/2012/03/07/creating-custom-controls-for-metro-style-apps.aspx](http://timheuer.com/blog/archive/2012/03/07/creating-custom-controls-for-metro-style-apps.aspx)

Windows 8 发布预览 Visual Studio 2012 测试版

# sql - 查询有多少学生退出

> ID：11350583
> 
> 赞同：0
> 
> 时间：2012-07-05T18:44:37.583
> 
> 标签：sql, tsql

我需要写一个查询来了解有多少学生在第一期之后退出。如果学生在场，我们不会存储记录，所以我不能说学生是否在第一期出席并且有 6 条缺勤记录（我们有 7 天）。我所拥有的只是下面架构中的信息。我有一个我写的查询，但它不起作用。需要一些关于从这里去哪里的帮助。

谢谢

![在此处输入图像描述](../Images/cbf5e745aac526efe0c0ef23d67d56c3.png)

```
 Select student_id, Count(*) AS #ofPerAbsent

    From Attend_Student_Detail

    where School_Year='1112' and School_Number='0031'
    and Absent_Date='2012-04-13' and Absent_Code IN ('ABU','ABX')

    Group by Student_ID

    Having count(*)<=6

ORDER BY #ofPerAbsent desc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:19:46.213

据我所知，你会想要计算所有缺勤减去第一期后缺勤的数量，所以我认为这样的事情应该可行。

```
SELECT 
  A.student_id, 
  (Count(A.student_id) - B.absences_after) as absences     
FROM 
  attend_student_detail as A
LEFT JOIN (
  SELECT 
    Z.student_id,
    Count(Z.student_id) as absences_after
  FROM
    attend_student_detail as Z
  WHERE school_year='1112' AND school_number='0031'
    AND absent_date='2012-04-13' AND absent_code IN ('ABU','ABX')
    AND absent_period <> "period one"
  GROUP BY Z.student_id
) as B
ON B.student_id = A.student_id
GROUP BY A.student_id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T18:55:30.370

因此，您确定学生在第一期后退出的标准是 Absent_Code 或“ABU”或“ABX”？

如果该假设是正确的，那么您可以进行如下查询以获取每天符合该条件的学生人数......

```
SELECT COUNT(DISTINCT(Student_ID))
FROM Attend_Student_Detail
WHERE Absent_Code IN ('ABU','ABX')
GROUP BY Absent_Date 
```

如果您愿意，您可以进一步筛选 WHERE 子句中的特定日期。

顺便说一句，您的架构对我来说没有多大意义；因此，如果上述内容不是您要查找的内容，请您多解释一下您的架构，我相信我可以提供帮助。

# animation - 3D ScrollView 帮助 - 喜欢音乐的应用

> ID：11350589
> 
> 赞同：0
> 
> 时间：2012-07-05T18:45:07.490
> 
> 标签：animation, 3d, uiscrollview

我正在尝试制作 3D“轮子”类型的东西。页面上将有 3 或 5 个项目。

顶部或焦点将填满页面的大部分，然后将有两个缩小更多和侧面。

我知道它必须使用滚动视图和一些动画。

我想做的一个很好的例子是 lanscape 中的音乐应用程序。![在此处输入图像描述](../Images/1b3c3f95fd419427f319d1c8d77afe00.png) ![在此处输入图像描述](../Images/60d2b6370f6c0012f9037374c51d2895.png)

我该怎么做呢？谢谢先进，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-20T14:41:56.867

看看这个开源库。 [http://github.com/nicklockwood/iCarousel](http://github.com/nicklockwood/iCarousel)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T10:18:20.273

看看这个 androidlibraries [http://listview.android-libraries.com/](http://listview.android-libraries.com/)

# vbscript - 重命名文件的批处理脚本

> ID：11350606
> 
> 赞同：0
> 
> 时间：2012-07-05T18:46:11.433
> 
> 标签：vbscript, batch-file

我已经彻底寻找可以做到这一点的脚本，因为我知道这个问题已经被问过了......但我对编程知之甚少。我有 66 个文件夹，每个文件夹包含 6 个以 _0、_1、..._5 结尾的文件。示例文件名为 DSC_7789 Panorama_cube_0。我需要一个可以在每个文件夹上运行的脚本，将_0 替换为_f，将_1 替换为_r，将_2 替换为_b，将_3 替换为_l，将_4 替换为_u，将_5 替换为_d。因此 DSC_7789 Panorama_cube_0 将更改为 DSC_7789 Panorama_cube_f。实际上，我自己曾经做过所有这些……花了一整天的时间。谁能指出我的写作方向？我假设这将在 Visual Basic 中运行。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:04:14.703

REN 命令非常有限，但在您的情况下，它就是所需要的。

重命名当前目录中的文件：

```
ren *_0 *_f
ren *_1 *_r
ren *_2 *_b
ren *_3 *_l
ren *_4 *_u
ren *_5 *_d 
```

重命名当前目录及其所有子文件夹中的所有文件（递归）：

```
for /d /r %%F in (.) do (
  ren "%%~fF\*_0" *_f
  ren "%%~fF\*_1" *_r
  ren "%%~fF\*_2" *_b
  ren "%%~fF\*_3" *_l
  ren "%%~fF\*_4" *_u
  ren "%%~fF\*_5" *_d
) 
```

要重命名特定文件夹中的所有文件：

```
for /d /r "c:\your\root\here" %%F in (.) do (
  ren "%%~fF\*_0" *_f
  ren "%%~fF\*_1" *_r
  ren "%%~fF\*_2" *_b
  ren "%%~fF\*_3" *_l
  ren "%%~fF\*_4" *_u
  ren "%%~fF\*_5" *_d
) 
```

**编辑**

对于任何感兴趣的人，我终于发现并记录了 Windows RENAME 如何处理通配符的规则。请参阅[Windows RENAME 命令如何解释通配符？](https://superuser.com/q/475874/109090). 我最初在 StackOverflow 上发布了问答，但它被迁移到了 SuperUser。

# function - Haskell 糖用于包含函数 ex 的“适用”类广告。同构

> ID：11350608
> 
> 赞同：0
> 
> 时间：2012-07-05T18:46:18.050
> 
> 标签：function, haskell, adt, isomorphism

具体来说，受 J 的共轭运算符 (g&.f = (f inverse)(g)(f)) 的启发，我需要一种方法来增加具有附加信息的函数。显而易见的方法是使用 ADT。就像是：

```
data Isomorphism a b = ISO {FW (a -> b) , BW (b -> a)}
(FW f) `isoApp` x = f x
(BW g) `isoApp` x = g x 
```

但是当大多数时候你只需要 forward 函数时，对应用程序函数的需求确实会损害代码的可读性。非常有用的是一个类：

```
class Applyable a b c | a b -> c where
    apply :: a -> b -> c 
```

（我认为 b 可以用存在量词隐含，但我不能确定我不会弄错签名）

现在应用程序将被隐式化，因此您可以只写

```
f x 
```

就像任何其他功能一样。前任：

```
instance Applyable (a -> b) a b where
    apply f x = f x
instance Applyable (Isomorphism a b) a b where
    apply f x = (FW f) x

inverse (Iso f g) = Iso g f 
```

那么你可以写这样的东西：

```
conjugate :: (Applyable g b b) => g -> Iso a b -> b -> a
f `conjugate` g = (inverse f) . g . f 
```

理想情况下，可以推断出类型签名

但是，这些语义似乎很复杂，因为您还需要修改 (.) 以支持 Applyable 而不是函数。有没有办法简单地欺骗类型系统将可应用数据类型视为所有正常目的的函数？是否有根本原因表明这是不可能的/一个坏主意？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:59:46.940

据我所知，函数应用程序可能是整个 Haskell 语言中你*无法*覆盖的一件事。

但是，您可以为此设计某种*运算符*。诚然`f # x`不如 好`f x`，但比 好`f `isoApp` x`。

# language-agnostic - 我如何从数十亿条推文中找到前 10 个主题标签

> ID：11350612
> 
> 赞同：5
> 
> 时间：2012-07-05T18:46:27.597
> 
> 标签：language-agnostic, twitter

这是有人问我的一个面试问题，我真的没有很好的答案。我想知道是否有人可以帮助我理解解决方案：

“你有数十亿条推文流入。你将如何找出前 10 个主题标签？”

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T18:53:49.077

创建一个地图，其中一个主题标签作为键，一个计数器作为值。

增加您收到的每条推文中每个标签的计数器。

检查计数器的值以找到前 10 个。

您对问题的措辞不包括任何会禁止这种简单解决方案的限制。在面试的情况下，我会问一些明确的问题来引出这些限制。

在诸如“它必须在线性时间内运行”和“它必须使用恒定数量的内存”等约束条件下，出现了更多有趣的答案。

* * *

我不确定对于所提出的问题是否有一个恒定的记忆解决方案，但我知道一个用于相关（通常更有用）的问题：识别构成给定结果部分的元素。我把它[作为一个类似问题的答案。](https://stackoverflow.com/a/3260905/3474)

（我说“更有用”，因为如果给定项目的总比例低于阈值，则它比真正的“前 10 名”材料更有可能是噪音。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T18:50:16.733

您可能无法分析所有推文，因此您只需分析随机样本。从该样本中找到前 10 名，您就可以找到前 10 名（在某种程度上可以确定，具体取决于样本大小和样本质量）。

我不认为他们在这里寻找实际的解决方案，而是更多地探索您的思考过程，以了解如何解决（实际上）不可能的问题。

# python - NLTK 和 Lucene 之间的 Stemmers 兼容性

> ID：11350616
> 
> 赞同：1
> 
> 时间：2012-07-05T18:46:42.653
> 
> 标签：python, lucene, nlp, nltk, stemming

我在 Java 中使用 Lucene 来索引语料库并从中提取词干词表。我使用EnglishAnalyzer进行词干。然后我把单词表交给 Python 来用 NLTK 做一些事情。NLTK 中是否有与 Lucene 的 EnglishAnalyzer 使用的词干分析器完全兼容的词干分析器？

我知道我也可以使用 PyLucene 来规避这一点，但我想尽量减少依赖关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T01:44:49.383

[您可以在http://text-processing.com/demo/stem/](http://text-processing.com/demo/stem/)上试用各种 NLTK 词干分析器，并使用结果与 Lucene 的 EnglishAnalyzer 的工作方式进行比较。它很可能实现了一种常见的算法，即 Porter 或 Lancaster。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T02:43:39.133

所以如果我没记错的话，lucene 有几个由其他人贡献的词干分析器（即雪球、egothor、stempel）。仅考虑雪球词干分析器与 NLTK 搬运工词干分析器，甚至 NLTK api 都建议雪球词干分析器更可靠。请参阅[http://nltk.googlecode.com/svn/trunk/doc/api/nltk.stem.porter-module.html](http://nltk.googlecode.com/svn/trunk/doc/api/nltk.stem.porter-module.html)。

如果我们对英语词干进行多次比较（使用[http://snowball.tartarus.org/demo.php](http://snowball.tartarus.org/demo.php)和[http://text-processing.com/demo/stem/](http://text-processing.com/demo/stem/)）

**雪球：**

```
cat -> cat
computer -> comput
argues -> argu 
```

**NLTK 搬运工：**

```
cat computer argue ->
cat comput argu 
```

所以从演示来看，它们似乎几乎相同，但可以肯定的是，我会坚持滚雪球并继续用 java 编码，因为 NLTK api 建议这样做。

P/S：嗨 Marc Schuler，（我是疯狂的亚洲人，你的名字不带“d”）

# iphone - 应用商店版本崩溃但在调试模式下没关系

> ID：11350620
> 
> 赞同：3
> 
> 时间：2012-07-05T18:46:56.287
> 
> 标签：iphone, ios, xcode

我在应用商店有一个应用。更新我的应用程序后，它在启动后立即崩溃。（看到黑屏不到一秒钟，然后就像我按下了主页按钮。）

我在连接到 xcode 的 iphone 上对其进行了测试，在调试模式下没问题。

我在 5.1.0 中测试过，没问题。

当我从应用商店下载它时它崩溃了。

有人遇到过 5.1.1 的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T20:13:23.250

Apple 承认 AppStore 中新上传的二进制文件存在问题。到目前为止，建议应用程序开发人员推迟向 App Store 提交应用程序，直到此问题得到解决。这是一个[链接](http://www.iclarified.com/entry/index.php?enid=23004)。

# iphone - CorePlot：在实时绘图中更新 X 轴范围

> ID：11350625
> 
> 赞同：1
> 
> 时间：2012-07-05T18:47:29.580
> 
> 标签：iphone, ios, xcode, ios5, core-plot

我已经检查了大多数似乎最相关的问题，但没有一个真正涉及我目前遇到的一些麻烦。我的问题是，虽然我知道无论我如何尝试更新它都需要更新 plotSpace.xRange，但要么什么都没有发生，要么我崩溃了。

我目前正在做的是我在 RealTimeScatterPlot.m 文件中声明了 2 个全局变量（xMinVal，xMaxVal），这些是我在绘图初始化时用于 plotSpace.xRange 计算的变量。然后，托管绘图视图的视图控制器包含一个函数，该函数每秒生成并绘制一个随机点。在这个函数中，我跟踪查看是否有超过 25 个（我的默认 x 轴范围目前是从 0 到 50）点，如果有，我会尝试将 RealTimeScatterPlot.m 中的全局值加一，这理论上应该将我的图表视图移动 1。第一次增量发生，尽管视图没有移动，我也不能再次增量，因为值保持不变。如果看到代码有助于让我知道，我会编辑它，但它都非常简单/通用。一世'

任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:10:12.640

您可以轻松地做您想做的事情，例如更新 tableview 数据。这是我所做的部分代码，您可以参考。希望这可以帮助你。

```
-(void) fetchArrayOffeedback {

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Pulse"
                                              inManagedObjectContext:appDelegate.managedObjectContext];
    [fetchRequest setEntity:entity];

    NSPredicate *predictate = [NSPredicate predicateWithFormat:@"sessionKey == %@", appDelegateiPhone.strSessionId];

    [fetchRequest setPredicate:predictate];

    NSSortDescriptor *sort = [[NSSortDescriptor alloc]
                              initWithKey:@"date" ascending:YES];
    [fetchRequest setSortDescriptors:[NSArray arrayWithObject:sort]];
    [sort release];

    NSError *error;

    chartData = (NSMutableArray*)[appDelegate.managedObjectContext
                                            executeFetchRequest:fetchRequest error:&error];

    [chartData retain];
    NSLog(@"array count :%d", [chartData count]);

    [graph reloadData];

    CPXYPlotSpace *plotSpace = (CPXYPlotSpace *)graph.defaultPlotSpace;
    plotSpace.xRange = [CPPlotRange plotRangeWithLocation:CPDecimalFromFloat(0.0) length:CPDecimalFromFloat(fiveHour*3)];   
}

- (void)constructScatterPlotForFeedback
{
    [graph release];

    graph = [[CPXYGraph alloc] initWithFrame:CGRectZero];
    graph.delegate = self;
    CPTheme *theme = [CPTheme themeNamed:kCPPlainWhiteTheme];
    [graph applyTheme:theme];
    feedbackChart.hostedGraph = graph;
    [feedbackChart setBackgroundColor:[UIColor clearColor]];

    graph.paddingLeft = 0.0;
    graph.paddingTop = 0.0;
    graph.paddingRight = 0.0;
    graph.paddingBottom = 0.0;

    graph.plotAreaFrame.paddingLeft = 5.0;
    graph.plotAreaFrame.paddingTop = 10.0;
    graph.plotAreaFrame.paddingRight = 10.0;
    graph.plotAreaFrame.paddingBottom = 10.0;

    NSTimeInterval oneHour =  60 * 60;

    CPXYPlotSpace *plotSpace = (CPXYPlotSpace *)graph.defaultPlotSpace;
    plotSpace.allowsUserInteraction = YES;
    plotSpace.delegate = self;

    float xRange;
    xRange = [chartData count] + 1.0;

    if (xRange>5) {
        xRange = 5.0;
    }
    plotSpace.xRange = [CPPlotRange plotRangeWithLocation:CPDecimalFromFloat(0.0) length:CPDecimalFromFloat(fiveHour*3)];
    plotSpace.yRange = [CPPlotRange plotRangeWithLocation:CPDecimalFromFloat(-20.0) length:CPDecimalFromFloat(40.0)];

    CPLineStyle *gridline = [CPLineStyle lineStyle];
    gridline.lineColor = [CPColor grayColor];
    gridline.lineWidth = 1.0f;  

    CPXYAxisSet *axisSet = (CPXYAxisSet *)graph.axisSet;
    CPXYAxis *x = axisSet.xAxis;
    x.majorIntervalLength = CPDecimalFromFloat(fiveHour);
    x.minorTicksPerInterval = 0;
    x.labelOffset=0;

    NSDate *refDate = [NSDate date];
    NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init] autorelease];

    dateFormatter.dateFormat = @"HH:mm:ss";

    CPTimeFormatter *timeFormatter = [[[CPTimeFormatter alloc] initWithDateFormatter:dateFormatter] autorelease];
    timeFormatter.referenceDate = refDate;
    x.labelFormatter = timeFormatter;

    CPXYAxis *y = axisSet.yAxis;

    y.minorTicksPerInterval = 0;
    y.orthogonalCoordinateDecimal = CPDecimalFromString(@"0.0");
    y.majorIntervalLength = CPDecimalFromString(@"5");
    y.majorGridLineStyle = nil;

    y.visibleRange = [CPPlotRange plotRangeWithLocation:CPDecimalFromFloat(-20.0f) length:CPDecimalFromFloat(40.0f)];
    CPConstraints yConstraints = {CPConstraintNone, CPConstraintFixed};
    y.isFloatingAxis=YES;
    y.constraints=yConstraints;

    CPScatterPlot *dataSourceLinePlot = [[[CPScatterPlot alloc] init] autorelease];
    dataSourceLinePlot.identifier = @"FeedBack Plot";
    dataSourceLinePlot.dataLineStyle.lineWidth = 3.f;
    dataSourceLinePlot.dataLineStyle.lineColor = [CPColor blackColor];
    dataSourceLinePlot.dataLineStyle.dashPattern = [NSArray arrayWithObjects:[NSNumber numberWithFloat:1.0f], [NSNumber numberWithFloat:1.0f], nil];
    dataSourceLinePlot.dataSource = self;

    dataSourceLinePlot.opacity = 0.0f;
    dataSourceLinePlot.cachePrecision = CPPlotCachePrecisionDecimal;

    CABasicAnimation *fadeInAnimation = [CABasicAnimation animationWithKeyPath:@"opacity"];
    fadeInAnimation.duration = 1.0f;
    fadeInAnimation.removedOnCompletion = NO;
    fadeInAnimation.fillMode = kCAFillModeForwards;
    fadeInAnimation.toValue = [NSNumber numberWithFloat:1.0];
    [dataSourceLinePlot addAnimation:fadeInAnimation forKey:@"animateOpacity"];

    CPColor *areaColor1 = [CPColor colorWithComponentRed:0.3 green:0.3 blue:1.0 alpha:0.8];
    CPGradient *areaGradient1 = [CPGradient gradientWithBeginningColor:areaColor1 endingColor:[CPColor clearColor]];
    areaGradient1.angle = -90.0f;

    NSUInteger i;

    [graph addPlot:dataSourceLinePlot];

    NSMutableArray *contentArray1 = [NSMutableArray arrayWithCapacity:100];

    NSMutableArray *customTickLocations = [[NSMutableArray alloc] init];
    NSMutableArray *xAxisLabels = [[NSMutableArray alloc] init];
    for ( i = 0; i < [chartData count]; i++ ) {
    //for ( i = 0; i < 10; i++ ) {  
        [customTickLocations addObject:[NSDecimalNumber numberWithInt:i]];
        [xAxisLabels addObject:[NSString stringWithFormat:@"%0.1f", 5.0 * i]];
        Pulse *objPulse1 = (Pulse *)[chartData objectAtIndex:i];
//      id x = [NSNumber numberWithFloat:i*fiveHour];
        id x = [NSNumber numberWithFloat:i];
        id y = [NSNumber numberWithFloat:[objPulse1.feedBack floatValue]];
        NSLog(@"point of gragh for Performance x:%@, y : %@ ", x, y);
        [contentArray1 addObject:[NSMutableDictionary dictionaryWithObjectsAndKeys:x, @"x", y, @"y", nil]];
    }

    NSLog(@"Axis lable count : %d", [xAxisLabels count]);
    NSMutableArray *customLabels = [NSMutableArray arrayWithCapacity:[chartData count]];
    NSUInteger labelLocation = 0;

    for (NSNumber *tickLocation in customTickLocations) {
        NSLog(@">>>>>>>>>>>>>>>>> tick location");
        CPAxisLabel *newLabel = [[CPAxisLabel alloc] initWithText: [xAxisLabels objectAtIndex:labelLocation++] textStyle:x.labelTextStyle];
        newLabel.tickLocation = [tickLocation decimalValue];
        newLabel.offset = x.labelOffset + x.majorTickLength - 5.0f;
        newLabel.rotation = 0;
        [customLabels addObject:newLabel];
        [newLabel release];
    }

    x.axisLabels =  [NSSet setWithArray:customLabels];

    arrScatter = contentArray1;
    [arrScatter retain];
}

-(NSUInteger)numberOfRecordsForPlot:(CPPlot *)plot 
{

    if ( [(NSString *)plot.identifier isEqualToString:@"FeedBack Plot"] ) {
        return [chartData count];
    }

    return 0;
}

-(NSNumber *)numberForPlot:(CPPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index
{
    switch ( fieldEnum ) {
        case CPScatterPlotFieldX:
            return (NSDecimalNumber *)[NSDecimalNumber numberWithUnsignedInteger:index*fiveHour];
        case CPScatterPlotFieldY:
        {
            Pulse *objPulse1 = (Pulse *)[chartData objectAtIndex:index];
            return [NSNumber numberWithFloat:[objPulse1.feedBack floatValue]];          
        }
    }
    return nil;
}

-(CGPoint)plotSpace:(CPPlotSpace *)space willDisplaceBy:(CGPoint)displacement {

    return CGPointMake(displacement.x, 0);
}

/*
-(NSNumber *)numberForPlot:(CPPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index 
{
    NSDecimalNumber *num = nil;

    if ( [(NSString *)plot.identifier isEqualToString:@"FeedBack Plot"] ) {
        if ( [arrScatter count] != 0) {
            num = [[arrScatter objectAtIndex:index] valueForKey:(fieldEnum == CPScatterPlotFieldX ? @"x" : @"y")];
        }
    }
    return num;
 }
*/

-(CPLayer *)dataLabelForPlot:(CPPlot *)plot recordIndex:(NSUInteger)index {

        Pulse *objPulse1 = (Pulse *)[chartData objectAtIndex:index];
        float value = [objPulse1.feedBack floatValue];       
        //CPTextLayer *textLayer = [[CPTextLayer alloc] initWithText:[NSString stringWithFormat:@"%d", value]];

        CPTextStyle *textStyle = [CPTextStyle textStyle];
        textStyle.color = [CPColor blackColor];

        CPTextLayer *textLayer = [[CPTextLayer alloc] initWithText:[NSString stringWithFormat:@"%0.1f", value] style:textStyle];
        return textLayer;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-22T21:46:24.983

我像这样子类化了真实的绘图图：

注意：我没有放一些我在这里使用的方法来绘制标签并决定图表的酷我放了现在的代码来展示创建实时绘图的想法。

在我的.h

```
#import <CorePlot/CorePlot.h>
#import <Cocoa/Cocoa.h>
#import "sharedPrefferences.h"
#import "RMBlurredView.h"//Not really needed I am just using it for my custom label
@interface GenericCPTGraphView : NSView <CPTPlotDataSource,CPTPlotSpaceDelegate>
{

    CPTGraphHostingView *hostView;
    CPTXYGraph *graph;
    NSMutableArray *plotData;
    NSTextField* percentLabel;
    CPTMutableLineStyle *lineStyle;
    CPTScatterPlot *dataSourceLinePlot;
    NSInteger currentIndex;
    NSTimer* dataTimer;
    BOOL animated;
}

-(void)updateGraph :(NSNumber*)Load;//method that will add the new Dots to the plot.
@end 
```

在我的.m

```
#define SECTION_COUNT 15 //maybe will be changed to 16 who knows.

static const double kAlpha     = 0.25; // smoothing constant

static const NSUInteger kMaxDataPoints = 40;
static NSString *const kPlotIdentifier = @"Data Source Plot";
@implementation GenericCPTGraphView

- (id)initWithFrame:(NSRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {
        plotData  = [[NSMutableArray alloc] initWithCapacity:kMaxDataPoints];
        [self generateData];//create plot method
        [self checkGraph];
    }
    return self;
}

-(void)checkGraph
{
    currentIndex=0;
    NSDate *refDate       = [NSDate dateWithNaturalLanguageString:@"12:00 Oct 29, 2009"];
    NSTimeInterval oneDay = 1;
    // Create graph from theme
    graph = [[CPTXYGraph alloc] initWithFrame:CGRectZero];
    CPTTheme *theme = [CPTTheme themeNamed:kCPTSlateTheme];
    [graph applyTheme:theme];
    graph.paddingLeft = 1.0;
    graph.paddingTop = 1.0;
    graph.paddingRight = 1.0;
    graph.paddingBottom = 1.0;
    graph.fill = [CPTFill fillWithColor:[CPTColor clearColor]];
    graph.plotAreaFrame.fill = [CPTFill fillWithColor:[self getCPTColorObjectFromHexString:@"062118" alpha:1.0]];
    graph.plotAreaFrame.borderLineStyle = nil;
    graph.plotAreaFrame.cornerRadius = 0;
    hostView = [[CPTGraphHostingView alloc]initWithFrame:CGRectMake(0,0,self.frame.size.width,self.frame.size.height)];
    hostView.hostedGraph = graph;
    RMBlurredView *LabelView = [[RMBlurredView alloc]initWithFrame:CGRectMake(1,0+hostView.frame.size.height-16 , hostView.frame.size.width-2, 15)];
    [LabelView setTintColor:[sharedPrefferences colorWithHexColorString:@"000000" alpha:0.5]];
    NSTextField* textLabel = [[NSTextField alloc]initWithFrame:CGRectMake(0, 1,     LabelView.frame.size.width, 15)];
    dataSourceLinePlot.identifier     = (__bridge id<NSCopying,NSCoding,NSObject>)(kMDItemIdentifier);
    [textLabel setTextColor:[NSColor whiteColor]];
     //    textLabel
    [textLabel setBezeled:NO];
    [textLabel setDrawsBackground:NO];
    [textLabel setEditable:NO];
    [textLabel setSelectable:NO];
    [textLabel setStringValue:@"LOAD"];
    [textLabel sizeToFit];
    percentLabel = [[NSTextField alloc]initWithFrame:CGRectMake(0, 1, LabelView.frame.size.width, 15)];
    [percentLabel setTextColor:[NSColor whiteColor]];
    [percentLabel setBezeled:NO];
    [percentLabel setDrawsBackground:NO];
    [percentLabel setEditable:NO];
    [percentLabel setSelectable:NO];
   // [percentLabel setStringValue:@"X%"];
    //[percentLabel sizeToFitWithAlignmentRight];
    LabelView.blurRadius = 0;
    dataSourceLinePlot = [[CPTScatterPlot alloc] init];
    dataSourceLinePlot.dataSource = self;
    [graph addPlot:dataSourceLinePlot];
    // Setup scatter plot space
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
    plotSpace.allowsUserInteraction = NO;
    plotSpace.delegate = self;
    CABasicAnimation *fadeInAnimation = [CABasicAnimation animationWithKeyPath:@"opacity"];
    fadeInAnimation.duration = 1.0f;
    fadeInAnimation.removedOnCompletion = NO;
    fadeInAnimation.fillMode = kCAFillModeForwards;
    fadeInAnimation.toValue = [NSNumber numberWithFloat:1.0];
    [dataSourceLinePlot addAnimation:fadeInAnimation forKey:@"animateOpacity"]; 
    [graph addPlot:dataSourceLinePlot];
    NSTimeInterval xLow       = 0.0;
    plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(xLow) length:CPTDecimalFromDouble(oneDay * 40.0)];
    plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromDouble(0.0) length:CPTDecimalFromDouble(100.0)];
    // Axes
    CPTXYAxisSet *axisSet = (CPTXYAxisSet *)graph.axisSet;
    CPTXYAxis *x          = axisSet.xAxis;
    x.hidden = YES;
    x.majorIntervalLength         = CPTDecimalFromFloat(oneDay);
    x.orthogonalCoordinateDecimal = CPTDecimalFromDouble(0.0);
    x.minorTicksPerInterval       = 0;
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    dateFormatter.dateStyle = kCFDateFormatterShortStyle;
    CPTTimeFormatter *timeFormatter = [[CPTTimeFormatter alloc] initWithDateFormatter:dateFormatter];
    timeFormatter.referenceDate = refDate;
    x.labelFormatter            = timeFormatter;
    CPTXYAxis *y = axisSet.yAxis;
    y.hidden = YES;
    y.majorIntervalLength         = CPTDecimalFromDouble(0.5);
    y.minorTicksPerInterval       = 1;
    y.orthogonalCoordinateDecimal = CPTDecimalFromFloat(oneDay);
    // Create a plot that uses the data source method
    //CPTScatterPlot *dataSourceLinePlot = [[CPTScatterPlot alloc] init];
    y.minorTicksPerInterval = 0;
    [LabelView addSubview:percentLabel];
    [LabelView addSubview:textLabel];
    [graph.hostingView addSubview:LabelView];
    [self addSubview:hostView];
}

-(void)updateGraph :(NSNumber*)Load
{    
    if ( dataSourceLinePlot ) {
        if ( plotData.count >= 40 ) {
            [plotData removeObjectAtIndex:0];
            [dataSourceLinePlot deleteDataInIndexRange:NSMakeRange(0, 1)];
        }
        CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)graph.defaultPlotSpace;
        plotSpace.xRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromUnsignedInteger(0) length:CPTDecimalFromUnsignedInteger(kMaxDataPoints - 2)];
        plotSpace.yRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromUnsignedInteger(0) length:CPTDecimalFromUnsignedInteger(1)];
        NSUInteger location       = (currentIndex >= kMaxDataPoints ? currentIndex - kMaxDataPoints + 2 : 0);
        CPTPlotRange *newRange = [CPTPlotRange plotRangeWithLocation:CPTDecimalFromUnsignedInteger(location)
                                                          length:CPTDecimalFromUnsignedInteger(kMaxDataPoints - 2)];
    plotSpace.xRange = newRange;
    currentIndex++;
    [plotData addObject:[NSNumber numberWithDouble:((Load.doubleValue - kAlpha) / 100.0)]];
    [percentLabel setStringValue:[NSString stringWithFormat:@"%ld%%",(Load.integerValue) ]];
    graph.borderWidth = 0.0 ;
    dataSourceLinePlot.borderWidth = 0.0;
    [dataSourceLinePlot setBorderWidth:0.0];
    dataSourceLinePlot.identifier = @"Date Plot";
    lineStyle = [dataSourceLinePlot.dataLineStyle mutableCopy];
    lineStyle.lineWidth              = 2.0;
    [percentLabel sizeToFitWithAlignmentRight];
    lineStyle.lineColor = [self decideColor: [self numberOfSectionsToHighlight:Load.doubleValue]];
    dataSourceLinePlot.dataLineStyle = lineStyle;
    [dataSourceLinePlot insertDataAtIndex:(plotData.count - 1) numberOfRecords:1];//inserting object to the plot. 
} 
```

}

```
#pragma mark -
#pragma mark Plot Data Source Methods

-(NSUInteger)numberOfRecordsForPlot:(CPTPlot *)plot
{
    NSLog(@"%lu",(unsigned long)plotData.count);
    return plotData.count;
}
 -(NSNumber *)numberForPlot:(CPTPlot *)plot field:(NSUInteger)fieldEnum recordIndex:(NSUInteger)index
{
    NSNumber *num = nil;

    switch ( fieldEnum ) {
        case CPTScatterPlotFieldX:
            num = [NSNumber numberWithUnsignedInteger:index + currentIndex - plotData.count];
            break;

        case CPTScatterPlotFieldY:
            num = [plotData objectAtIndex:index];
            break;

        default:
            break;
    }

return num;
}
@end 
```

# php - PHP将MySQL结果循环到数组中

> ID：11350631
> 
> 赞同：1
> 
> 时间：2012-07-05T18:48:03.213
> 
> 标签：php, mysql, arrays

我有一个名为,和`people`列的表。`id (PK)``fname``lname`

设置数据循环很简单：

```
$rs = mysql_query("SELECT * FROM people");
while($row=mysql_fetch_array($rs)){
    ...do stuff...
} 
```

但是，我要做的是自动将列/值对循环到一个数组中。

因此，如果我添加了一个新列，我可以调用中心函数并在遍历数组时`email`从中提取。`$results['email']`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:49:42.730

使用[`mysql_fetch_assoc()`](http://php.net/mysql_fetch_assoc)，它返回一个以列名作为值的关联数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T18:56:40.543

```
$rs = mysql_query("SELECT * FROM people");
$results = array();
while(false !== ($row=mysql_fetch_assoc($rs))){
    $id = $row['id'];
    $results[$id] = $row;
} 
```

$results 现在是一个多维数组，每个元素都是 fieldname => fieldvalue 元素的数组

```
Array
(
    [1] => Array
        (
            [id] => 1
            [fname] => John
            [lname] => Smith
        )
    [3] => Array
        (
            [id] => 3
            [fname] => Karen
            [lname] => Berry
        )
) 
```

# ios - Ipad Mirroring - 如何镜像不同的视图？

> ID：11350633
> 
> 赞同：2
> 
> 时间：2012-07-05T18:48:20.140
> 
> 标签：ios, objective-c, ipad, mirroring

我不知道“镜像”是否是正确的术语，但我有一个 Ipad 应用程序，它可以拍照并将它们保存在核心数据中。我用谷歌搜索，但找不到我需要的代码。

我想要的是让电视显示与 iPad 不同的图像。例如，如果我不拍照，电视会在屏幕上显示保存的图像。当我拍摄一张新照片时，它会停止并显示新照片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T19:14:34.887

我在参考指南中找到了我想要的。

[http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AirPlayGuide/EnrichYourAppforAirPlay/EnrichYourAppforAirPlay.html%23//apple_ref/doc/uid/TP40011045-CH6-DontLinkElementID_3](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/AirPlayGuide/EnrichYourAppforAirPlay/EnrichYourAppforAirPlay.html%23//apple_ref/doc/uid/TP40011045-CH6-DontLinkElementID_3)

# html - 如何使用 WAI-ARIA 创建完全可访问的嵌套下拉列表？

> ID：11350634
> 
> 赞同：1
> 
> 时间：2012-07-05T18:48:20.937
> 
> 标签：html, jquery, accessibility, wai-aria

几天前，我开始在 Internet 上搜索有关 WAI-ARIA 的教程和文档，以了解几乎所有类型的 AJAX 请求。

我习惯于使用 jQuery 和 AJAX 编码嵌套的下拉列表。它工作得很好，但不是本机可访问的。例如，我们需要使用 WAI-ARIA 特定标签来“启用”各种动态内容（例如 AJAX）的可访问性。

我的要求之一如下：

*   假设我有一个 State 下拉菜单，它使用 onchange 事件更新 Region 下拉菜单。如何使用 WAI-ARIA 和 jQuery 与屏幕阅读器进行交互，以告知用户 Region 下拉列表已更新？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-06T03:56:25.390

我的 2c 是 aria-controls 可能更适合这里。

您在此处描述的 UI 听起来与您在在线购买产品时经常看到的国家/州选择非常相似。这些的典型模式是：

```
<label for="country">Country:</label>
<select id="country" aria-controls="state">
    <option value="">Select a country...</option>
    <option value="Andorra">Andorra</option>
    <option value="Belgium">Belgium</option>
    ...
</select>
<br>
<label for="state">State:</label>
<select id="state">
    <option value="">(Select a country first)</option>
    ... options here populated when country changes ...
</select> 
```

这里有几点需要注意：

*   我在每个选择开始时使用“占位符”选项条目。这有两个好处。首先，它提供了关于用户应该如何使用 UI 的强化文档——如果他们最终以某种方式首先查看第二个字段，它将引导他们到第一个字段。其次，它避免了用户不小心选择了一个默认值：您的代码可以检查默认的“选择...”是否是提交的，并提醒用户选择一个实际值。而且，此外，它隐藏了内容选项正在改变用户的事实。

*   不过，这里的主要内容是这两个选择之间的关系应该从表单或页面中的上下文中清楚地看出。不管你有没有看到，遇到这样的表单的用户不需要被明确告知状态选择的内容已经改变，因为他们会从表单设计和上下文中期待这一点。人们知道州是特定于一个国家的（例如，德国没有“加利福尼亚”），与县类似，因此已经对这些如何运作有所期待。

在这里使用`aria-live`感觉不合适。它实际上是为*异步*更新的页面区域设计的，否则用户将不得不连续轮询，来回阅读，以扫描更改。聊天面板可能是典型的例子：当来自另一端的某人的消息出现时，您希望屏幕阅读器在消息出现时读出消息，而不必手动去寻找它。相比之下，这里的 UI 更加同步；当国家/地区发生变化时，州会在那里填充，然后（*），这是预期的行为。

ARIA 确实有一个[`aria-controls="ids..."`](http://www.w3.org/TR/wai-aria/states_and_properties#aria-controls)属性，这似乎更合适：规范说它用于当一个控件影响另一个控件的可见性或内容时，这似乎描述了这里发生的事情。我不知道是否有任何屏幕阅读器支持这一点，或者当它出现时他们会读出什么 - 我可能会调查这个并稍后更新这个答案。但无论如何，前面的要点适用，无论如何，表单的行为和语义应该是显而易见的。

--

(*) 如果您异步更新内容，仍然存在一个问题 - 例如。通过通过 ajax 而不是从页面上已经加载的数组获取县列表，那么在选择国家和结果可用于下一次选择之间可能会有延迟。aria-live 在这里不再是正确的解决方案，因为您不想读出新内容，您只想让用户知道选择现在可以使用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T21:29:21.603

对于这个用例，我将添加[`aria-live`](http://www.w3.org/WAI/PF/aria-practices/#LiveRegions)和[`aria-atomic`](http://www.w3.org/WAI/PF/aria/states_and_properties#aria-atomic)属性，示例代码：

```
<select id="foo" aria-live="assertive" aria-atomic="true">
    <option value="nw">Northwest</option>
    <option value="ne">Northeast</option>
    <option value="se">Southeast</option>
    <option value="sw">Southwest</option>
</select> 
```

我认为这`assertive`是该`aria-live`属性的正确值，但`polite`可能更合适。该`aria-atomic`属性用于告诉浏览器/AT，当发生更改时，必须将区域作为一个整体呈现。您也可以考虑[`aria-disabled: true`](http://www.w3.org/WAI/PF/aria/states_and_properties#aria-disabled)最初在选择上使用，然后`false`在使用与状态选择关联的值更新它之前将其切换到。

**编辑**

好的，我已经使用 NVDA 和 IE9 以及 Firefox 13.01 进行了一些测试。我目前没有可用的 JAWS，所以如果有人可以使用 JAWS 测试页面，那就太好了。 ~~据我所知，VoiceOver 尚不支持`aria`属性~~刚刚在 10.7 (Lion) 上使用 Chrome + Voiceover 进行了测试，Voiceover 确实似乎支持`aria-live`.

[此处提供测试页面](http://sandbox.pangram.net/live.html)。

我使用了一个简单的脚本来模拟将数据加载到区域选择中（使用对象）：

```
var options = [],
    regions = {
    'nw': 'Northwest',
    'ne': 'Northeast',
    'se': 'Southeast',
    'sw': 'Southwest'
}

$(document).ready(function() {
    $.each(regions, function(key, value) {
        options.push('<option value="'+ key +'">'+ value +'</option>');
    });

    $('.block').on('change, focusout', '.states', function() {
        $(this).parent().children('.regions')
            .attr({'disabled': false, 'aria-disabled': false})
            .html(options.join(''));
    });

    window.setTimeout(
        function() {
            $('#speak').text('assertive!');
        },
        3000
    );
}); 
```

玩了一会儿之后的一些观察（我当然不是屏幕阅读器方面的专家，所以如果我错过了什么，请告诉我）......

*   不建议使用 HTML`disabled`属性，因为您真的不希望在状态选择被聚焦之前加载区域数据，并且由于关联的区域选择在聚焦时被禁用，因此在跳到下一个控件时会跳过它（您可以在下面的录音中听到这一点。）奇怪的是，Firefox 会宣布区域选择的值，即使它没有聚焦它。

*   在没有属性的示例中，我发现`polite`and之间的行为没有区别`assertive`，或者就此而言。`aria-live`我认为 FF13 和 IE9 都支持`aria-live`，但从最后但代码 ( `$('#speak')...`) 看来 IE9 不支持？

*   也许通过 AJAX 模拟加载的延迟将是一件好事。

您可以收听录音：[IE9](http://sandbox.pangram.net/ie9-nvda.mp3)、[Firefox 13](http://sandbox.pangram.net/ff13.01-nvda.mp3)

# php - Paypal 结帐回调 url 在 1x1 img 中显示唯一的销售 id 以进行跟踪

> ID：11350635
> 
> 赞同：2
> 
> 时间：2012-07-05T18:48:27.307
> 
> 标签：php, paypal, checkout, paypal-ipn

客户要求我显示：

```
<img src='https://www.trackingserver.com.au/saleServlet?MID=43&PID=55&CRID=&ORDERID=<input orderId!>&ORDERAMNT=<input order amount!>&NUMOFITEMS=1' border='0' width='1' height='1'> 
```

在[http://www.clientsite.com.au/paypalsuccess.htm](http://www.clientsite.com.au/paypalsuccess.htm)回调 url

无论如何用贝宝返回的值动态填充和值。

客户当前正在使用 Paypal Standard > 添加到购物车按钮 ( [https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_paypal_shopping_cart](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_html_paypal_shopping_cart) )

我看不到任何关于在重定向时获取值的信息...我希望能够在 php 版本的 paypalsuccess.html 中处理来自 Paypal 的请求标头并提取有问题的数据。将其放入 img 中。

可能的？我应该去哪里看？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:03:10.117

当使用 PDT 传输回站点时，您可以从完整销售中获取数据：[https ://www.paypal.com/cgi-bin/webscr?cmd=p/xcl/rec/pdt-intro-outside](https://www.paypal.com/cgi-bin/webscr?cmd=p/xcl/rec/pdt-intro-outside)

我不鼓励使用它，因为可以在 Paypal 上完成订单，而无需再次转移到该网站。IPN 是接收订单信息的最可靠方式：[https ://www.paypal.com/ipn/](https://www.paypal.com/ipn/)

但是，由于 IPN 都是服务器端的东西，它不会真正帮助您解决您的问题，因此您需要使用 cURL 与您提供的 URL 联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T20:18:30.317

听起来您需要实施 PayPal 的 IPN 系统。

在这里阅读：[https ://www.paypal.com/ipn/](https://www.paypal.com/ipn/)

基本上你：

1.  编写您的 IPN 脚本。
2.  将该脚本添加到每个 PayPal 按钮中（或者您可以手动设置您的 paypal 帐户以始终通知该脚本任何付款）。
3.  然后，每当有人付款时，PayPal 都会向该脚本发送一条 POST 消息。该 POST 消息几乎包含您可以通过 PayPal 控制面板看到的所有信息。

# mysql - 大规模迭代

> ID：11350637
> 
> 赞同：0
> 
> 时间：2012-07-05T18:48:49.277
> 
> 标签：mysql

我正在寻找解决此问题的最佳方法的建议。我有一个包含 135 个独特结果（价格）的表格，每个价格都会影响三个独立衍生品的结果，随着价格的变化，三个衍生品中每一个的价值也会发生变化。每个衍生品可以附加多达 21 个不同数量中的任何一个，其中衍生品的数量乘以价格结果，以获得特定衍生品数量和价格的结果。

我已经交叉加入衍生品以获得所有独特的组合（90,000+），但是当我尝试将可能的组合与价格交叉加入时，系统太慢并且经常停止响应。我还尝试使用 while 循环插入每个可能的组合，提取所需的统计信息，然后运行下一个 senerio，但无济于事。

简而言之，形成真正大规模的交叉连接或迭代的最佳方式是什么。

马特

# html - 列表元素“点”最终在节元素之外

> ID：11350640
> 
> 赞同：1
> 
> 时间：2012-07-05T18:49:03.877
> 
> 标签：html, css

我正在创建一个`<ul>`并由标签`<li>`包装。`<section>`除了列表样式（点）显示在我的`<section>`标签之外，一切正常。我不确定为什么。如果有人可以分享提示，我将不胜感激。非常感谢。

我的 html

```
<section id='test'>
    <ul>
       <li>line 1 jiofjisojfoisdjfoisjfio</li>
       <li>line 2 jiofjisojfoisdjfoisjfio</li>
       <li>line 3 jiofjisojfoisdjfoisjfio</li>
       <li>line 4 jiofjisojfoisdjfoisjfio</li>
       <li>line 5 jiofjisojfoisdjfoisjfio</li>
       <li>line 6 jiofjisojfoisdjfoisjfio</li>
       <li>line 7 jiofjisojfoisdjfoisjfio</li>
   </ul>

</section> 
```

CSS

```
section { 

    display: block;
    width: 1200px;
    margin: 50px auto;
    border: 3px solid red;

} 
```

显示是这样的。。

```
 ----------------------
*| line 1 jioj..       |
*| line 2 jiof..       |
*| line 3 jiof..       |
*| line 4 jiof..       |
*| line 5 jiof..       |
*| line 6 jiof..       |
 ----------------------- 
```

黑点位于部分标签之外。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:59:52.617

显示它很好[DEMO](http://jsfiddle.net/8WQDY/)

保持未选中 JSFiddle 上的 Normalized CSS 复选框

# spring - 找不到类 [org.springframework.orm.hibernate.LocalSessionFactoryBean]

> ID：11350644
> 
> 赞同：0
> 
> 时间：2012-07-05T18:49:15.863
> 
> 标签：spring, hibernate

**我遇到了spring hibernate的问题，有人可以帮我解决这个问题吗？我想我得到了我项目中的所有库：sping-orm ...**

> 2012 年 7 月 5 日下午 2:13:58 org.springframework.context.support.AbstractApplicationContext prepareRefresh INFO：刷新 org.springframework.context.support.ClassPathXmlApplicationContext@4e3eca90：启动日期 [Thu Jul 05 14:13:58 EDT 2012]；上下文层次结构的根 2012 年 7 月 5 日下午 2:13:58 org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions INFO：从类路径资源 [spring.xml] 加载 XML bean 定义 2012 年 7 月 5 日 2:13:59 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons INFO：在 org.springframework.beans.factory.support.DefaultListableBeanFactory@d576e70 中预实例化单例：定义 bean [myDataSource,mySessionFactory,hibernateTemplate,expertiseDao]；工厂层次结构的根 2012 年 7 月 5 日下午 2:13:59 org.springframework.beans.factory.support。DefaultSingletonBeanRegistry destroySingletons INFO：销毁 org.springframework.beans.factory.support.DefaultListableBeanFactory@d576e70 中的单例：定义 bean [myDataSource,mySessionFactory,hibernateTemplate,expertiseDao]；工厂层次结构的根线程“主”org.springframework.beans.factory.CannotLoadBeanClassException中的异常：找不到类路径资源中定义的名称为“mySessionFactory”的bean的类[org.springframework.orm.hibernate.LocalSessionFactoryBean] [spring.xml ]; 嵌套异常是 java.lang.ClassNotFoundException: org.springframework.beans.factory.support.AbstractBeanFactory.resolveBeanClass(AbstractBeanFactory.java:1262) at org.springframework.beans.factory.support 的 org.springframework.orm.hibernate.LocalSessionFactoryBean。 AbstractAutowireCapableBeanFactory。

![](../Images/2db712a5bbe4437819542bc697b2617e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-17T05:40:30.693

似乎没有提供正确的包名称。我快速搜索了类 LocalSessionFactoryBean 并意识到它在同一个包中不可用。可能是构建它的 Spring 框架的版本和可用的运行时库的差异。

# maven - Jenkins中Artifactory的授权不起作用

> ID：11350646
> 
> 赞同：0
> 
> 时间：2012-07-05T18:49:20.287
> 
> 标签：maven, continuous-integration, jenkins, artifactory

我正在使用 Artifactory 2.4.0 和 Jenkins 1.438，我有几个模块的 maven 项目。需要 Jenkins 将所有模块（jar 和一场由此产生的战争）部署到远程 Artifactory 服务器中。

我的 artifactory 用户管理员使用默认密码（密码），我尝试在 jenkins 上执行的所有构建都可以正常工作。因此，当我决定更改 de Artifactory 管理员密码并使用新的管理员凭据更新我的设置时，我在 jenkins 构建日志中出现以下错误：

无法在项目 PilotoExemplo 上执行目标 org.apache.maven.plugins:maven-deploy-plugin:2.7:deploy (default-deploy)：无法部署工件：无法传输工件 br.com.pilotoExemplo:pilotoExemplo:pom:2.1 .0.11-20120705.160113-1 从/到快照（{ip_server}/artifactory/libs-snapshot-local）：无法传输文件：{ip_server}/artifactory/libs-snapshot-local/br/com/pilotoExemplo/pilotoExemplo/2.1 .0.11-SNAPSHOT/pilotoExemplo-2.1.0.11-20120705.160113-1.pom。返回码是：401

以前有人见过这个问题吗？我在谷歌上没有找到类似这样的搜索。

这是我的 settings.xml：

```
 <mirrors>
    <mirror>
      <mirrorOf>*</mirrorOf>
      <name>repositorio</name>
      <url>{ip_server}/artifactory/repo</url>
      <id>repositorio</id>
    </mirror>
  </mirrors>

  <profiles>
    <profile>
      <repositories>
        <repository>
          <snapshots>
            <enabled>true</enabled>
          </snapshots>
          <id>central</id>
          <name>libs-release</name>
          <url>{ip_server}/artifactory/libs-release/</url>
        </repository>
        <repository>
          <snapshots />
          <id>snapshots</id>
          <name>libs-snapshot</name>
          <url>{ip_server}/artifactory/libs-snapshot/</url>
        </repository>
      </repositories>
      <pluginRepositories>
        <pluginRepository>
          <snapshots>
            <enabled>false</enabled>
          </snapshots>
          <id>central</id>
          <name>plugins-release</name>
          <url>{ip_server}/artifactory/plugins-release</url>
        </pluginRepository>
      </pluginRepositories>
      <id>artifactory</id>
      <distributionManagement>
    <repository>
        <id>release</id>
        <url>{ip_server}/artifactory/libs-release-local/</url>
    </repository>
    <snapshotRepository>
        <id>snapshot</id>
        <url>{ip_server}/artifactory/libs-snapshot-local/</url>
    </snapshotRepository>
      </distributionManagement>
    </profile>
  </profiles>

  <activeProfiles>
    <activeProfile>artifactory</activeProfile>
  </activeProfiles>

  <servers>
    <server>
      <id>snapshot</id>
       <username>admin</username>
      <password>newPassword</password>
    </server>

    <server>
      <id>release</id>
      <username>admin</username>
      <password>newPassword</password>
    </server>

    <server>
      <id>repositorio</id>
       <username>admin</username>
      <password>newPassword</password>
    </server>

  </servers> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T01:06:37.607

使用明文密码解决问题的提示：

*   访问并登录 Artifactory。
*   登录后，单击屏幕右上角的用户名。
*   输入您的密码，然后在 em Unlockbutton 中输入密码，启用加密密码。
*   复制将显示在屏幕下方的标签并将其粘贴到 settings.xml 文件中。如果您更喜欢只复制密码，请确保让它与下面显示的标记完全一致，包括密码开头的“\”。
*   请记住在您的 POM.xml 中使用定义在标签中的服务器 id 来调整标签
*   单击更新按钮并准备就绪！检查下一个项目发布时是否一切都会顺利进行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T20:07:08.890

据我所知，Jenkins 作业可以有自己的 M2 存储库，或者他们使用用户的存储库。所以答案可能是，**您的 jenkins 作为服务**（可能作为本地系统帐户）运行，**而不是以您的用户的名义**运行。

您可以在 Jenkins 设置/系统信息页面 (yourcontextroot/systemInfo) 中查看用户名。所以基本上解决方案是为正在运行的用户放置相同的设置文件，就像你一样。

# excel - 通过 vba 分配单元格公式时出现运行时错误 1004

> ID：11350647
> 
> 赞同：0
> 
> 时间：2012-07-05T18:49:28.563
> 
> 标签：excel, excel-2007, excel-formula, vba

从代码中，根据特定的标准，我试图将公式分配给特定的单元格。查看代码

```
 For l = 8 To lEND
        lPriorNum = .Range("N" & l)
        If lPriorNum = 1 Then
            sFormula = "=ROUND(IF(AND(N" & l & "=1,K" & l & "=0),O" & l & _
            "/100*M" & l & ",(IF(AND(N" & l & "=1,K" & l & "<>0,K" & l & _
            "<M" & l & "),K" & l & ",M" & l & "))),2)"
        Else
            sFormula = "=ROUND(IF(P" & l & "=0,0,(IF(AND(N" & l + 1 & _
            "<>1,K" & l + 1 & "<>0,M" & l + 1 & ">R" & l + 1 & _
            "),K" & l + 1 & ",(IF(AND(N" & l + 1 & "<>1,K" & l + 1 & _
            "<>0,P" & l & ">0,P" & l & "<K" & l + 1 & "),+P" & l & _
            ",(IF(AND(N" & l + 1 & "<>1,K" & l + 1 & "=0,P" & l & _
            "<=0),0,(IF(O" & l + 1 & "/100*SUM(M" & l + 1 & "-L" & l & _
            ")>M" & l + 1 & ",0,(IF(O" & l + 1 & "/100*SUM(M" & l + 1 & _
            "-R" & l & ")<M" & l + 1 & ",O" & l + 1 & "/100*SUM(M" & l + 1 & _
            "-R" & l & "),(IF(M" & l + 1 & "<=R" & l + 1 & ",IF(P" & l + 1 & _
            "-K" & l + 1 & "<0,0,+M" & l + 1 & "-K" & l + 1 & ")))))))))))))),2)"
        End If            
        .Range("L" & l).Select
        Selection.NumberFormat = "0.00"
        ActiveCell.Formula = sFormula
        Selection.NumberFormat = "0.00"
        ' Total Payout Available
        sFormula = Range("Tot_Pay_Avail").Formula
        .Range("P" & l).Select
        Selection.NumberFormat = "0.00"
        ActiveCell.Formula = sFormula
        Selection.NumberFormat = "0.00"
        ' Final Dist Running Bal
        sFormula = Range("Final_Dist_RB").Formula
        .Range("Q" & l).Select
        Selection.NumberFormat = "0.00"
        ActiveCell.Formula = sFormula
        Selection.NumberFormat = "0.00"
        sFormula = Range("Payout_Amt_Sum").Formula
        .Range("R" & l).Select
        Selection.NumberFormat = "0.00"
        ActiveCell.Formula = sFormula
        Selection.NumberFormat = "0.00"

        sFormula = vbNullString
    Next l 
```

当 lPriorNum = 1 时，填充 L 的代码可以正常工作。当 lPriorNum 不为 1 时，以下是 sFormula 中的公式，这不起作用。我收到 1004 错误：

=ROUND(IF(P9=0,0,(IF(AND(N10<>1,K10<>0,M10>R10),K10,(IF(AND(N10<>1,K10<>0,P9> 0,P91,K10=0,P9<=0),0,(IF(O10/100*SUM(M10-L9)>M10,0,(IF(O10/100*SUM(M10-R9)

有人告诉我这个公式只适用于 Excel 2010，我正在 2007 年进行测试，但是，2010 年的用户在测试时遇到了同样的错误。这个公式或语法的编写方式可能有什么问题？电子表格上的单元格格式为不带逗号和 2 位小数的数字。我浏览了这里和其他网站的一些帖子，但我认为我的问题可能比我在其他帖子中找到的更具体......

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:46:20.830

您需要在 2007 版本中创建一个新工作簿。将公式粘贴`=ROUND(IF(P9=0,0,(IF(AND(N10<>1,K10<>0,M10>R10),K10,(IF(AND(N10<>1,K10<>0,P9>0,P9<K10),+P9,(IF(AND(N10<>1,K10=0,P9<=0),0,(IF(O10/100*SUM(M10-L9)>M10,0,(IF(O10/100*SUM(M10-R9)<M10,O10/100*SUM(M10-R9),(IF(M10<=R10,IF(P10-K10<0,0,M10-K10)))))))))))))),2)`到 excel 2007 中没有错误。

将相同的公式粘贴到 97-2003 .xls 文件中会给我*太多嵌套级别*错误。请注意，**转换**后的文件会出现相同的问题

# objective-c - 如何使用 PhFacebook 将多个 NSImage 上传到 Facebook？

> ID：11350648
> 
> 赞同：0
> 
> 时间：2012-07-05T18:49:34.197
> 
> 标签：objective-c, xcode, facebook, macos, cocoa

我知道如何使用 PhFacebook 将简单的文本上传到 facebook，但我不知道如何使用相同的框架将多个 nsimage 上传到 facebook？
任何人都可以用示例代码解释我吗？
谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:28:12.963

您需要自己编写代码，但尝试将它们放入一个`NSArray`然后循环通过它们，每次上传。

# asp.net - 如何在文本框的 textchange 事件上运行客户端脚本？

> ID：11350651
> 
> 赞同：-2
> 
> 时间：2012-07-05T18:49:48.470
> 
> 标签：asp.net

假设您有 TextBox 控件，并且用户在其中输入任何键。当用户输入键时，在该事件中，按下的键存储到数组中并向他显示任何其他字符。

例子 。假设我输入“x”，但文本框应该显示“p”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:25:19.293

听起来你需要一些 JavaScript！使用此代码，无论用户按什么键，文本框都会输入“p”。如果你真的想发疯，你可以混入一个随机字母生成器。

```
 <script type="text/javascript">        
    function ScrewyKeypad(evt) {
        var info = document.getElementById('<%= TextBox2.ClientID %>').value;
        document.getElementById('<%= TextBox2.ClientID %>').value = info + 'p'
        return false;
    } 
```

```
 <asp:TextBox ID="TextBox2" runat="server" onkeypress="return ScrewyKeypad(event)" ></asp:TextBox> 
```

并确保在页面加载事件中注册脚本：

```
 if (!IsPostBack)
    {
        TextBox2.Attributes.Add("onkeypress", "return ScrewyKeypad(event)");            
    } 
```

# css - 标签云样式

> ID：11350652
> 
> 赞同：0
> 
> 时间：2012-07-05T18:49:53.663
> 
> 标签：css

我正在尝试按照[此处所述设置](http://calebogden.com/advanced-css-tags/)[我的博客标签云的](http://festivals.ie/blog/index)样式。我已按照说明进行操作，但有一个小问题。我似乎无法弄清楚如何将每个标签的白色部分（下面以红色圈出）更改为透明，以便阴影背景显示出来。

![在此处输入图像描述](../Images/dcd71102db4e33f1ccb83240652a3319.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:57:37.623

它之所以有效，是因为演示页面的背景是白色的。下面的 CSS 是设置此颜色的位置：

```
.cloud .tag:before {
    border-color: #FFF transparent; 
```

最简单的方法是将 更改为`#FFF`与背景最匹配的颜色。您不能只将其设置为透明，因为标签（黄色/橙色的东西）是一个框，这只是在该框的左侧制作了一个具有不同左边框的三角形，使其看起来像箭头。

看，在这里我改变了它`transparent #000`来说明它是如何制作箭头的。

![在此处输入图像描述](../Images/ea323e4397848f5a20ad06b232af15db.png)

您甚至无法判断是否将其从 更改`#FFF`为`#EEE`。

```
border-color: #eee transparent; 
```

![在此处输入图像描述](../Images/08c40408db9091bb58965521bddff500.png)

# twitter - 如何启用转推？

> ID：11350658
> 
> 赞同：-2
> 
> 时间：2012-07-05T18:50:14.507
> 
> 标签：twitter, package, umbraco

我下载并检查了，所以我不显示转推。但我有点想要它们，我该如何改变呢？其他设置也不错。

我试过查看 xslt 文件，但似乎只是调用宏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T22:19:51.837

您必须`include_rts`在 REST 调用中设置为 true 才能获得转发。

# javascript - JQuery 将一个表格滑出，另一个表格滑出循环

> ID：11350660
> 
> 赞同：1
> 
> 时间：2012-07-05T18:50:21.370
> 
> 标签：javascript, jquery, html

我有两个表格形式（每个表格都在一个带有“box”类的 div 中）我正在尝试使用 jquery 动画将一个表格移出屏幕，然后将另一个表格移入，然后当那个按钮再次单击时，原始表单会从移动的位置返回。这是其中一种形式的 HTML（两者几乎相同，另一种的 id 为“box2”）。

```
<a href="#" class="button" style="margin-top: 0px; height: 15px;">Click here to edit!</a>
<div class="box1" style="margin-top: 10px;">
    <form name="getinfo" onSubmit="return validateForm()" method="POST" action="process.php">
        <table class="info" cellpadding="10px">
        <tr>
            <td style="text-align: right; font-size: 13px;">First Name:</td>
            <td id="trfname"><input name="fname" class="infod" type="input" /></td>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-size: 13px;">Last Name:</td>
            <td id="trlname"><input name="lname" class="infod" type="input" /></td>
            </td>
        </tr>
        <tr>
            <td style="text-align: right; font-size: 13px;">Cascade:</td>
            <td id="trcascade"><input name="cascade" class="infod" type="input" /></td>
            </td>
        </tr>
    </form>
    </table>
</div> 
```

这是我正在尝试的代码，但它似乎不起作用。没有控制台错误。

```
$('.button').click(function() {
    var index = $(this).index(".button");
    var $box = $(".box:eq(" + index + ")");

    $(".box").not($box).animate({
        left: '150%'
    }, 500);

    if ($box.offset().left < 0) {
        $box.css("left", "150%");
    } else if ($box.offset().left > $('#main').width()) {
        $box.animate({
            left: '50%',
        }, 500);
    }
}); 
```

编辑：这里的完整代码：http: [//jsfiddle.net/vCguL/](http://jsfiddle.net/vCguL/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:02:15.487

[http://jsfiddle.net/iambriansreed/d4Ruz/](http://jsfiddle.net/iambriansreed/d4Ruz/)

jQuery

```
$(function(){

    $('a.button').toggle(function() {
        $('#box1').animate({'left':'-400px'});
        $('#box2').css({'left':'400px'}).animate({'left':'0'});
    },function() {
        $('#box1').css({'left':'400px'}).animate({'left':'0'});
        $('#box2').animate({'left':'-400px'});
    });

});​ 
```

# python - subprocess.call 环境变量

> ID：11350669
> 
> 赞同：16
> 
> 时间：2012-07-05T18:51:02.150
> 
> 标签：python, environment-variables, call, subprocess, popen

我使用 Popen 是因为我需要环境，如下所示：

```
Popen(
    ["boto-rsync", "..."],
    env={"PATH":"/Library/Frameworks/Python.framework/Versions/2.7/bin/"},
    ) 
```

问题是`Popen`将命令作为新线程运行。有什么方法可以传递`env`或`subprocess.call`阻止`Popen`创建新线程？谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-05T20:21:36.887

您可以以`env`与 with 完全相同的方式使用 with call `popen`：

```
subprocess.call(
    ["boto-rsync", "..."],
    env={"PATH":"/Library/Frameworks/Python.framework/Versions/2.7/bin/"},
    ) 
```

# objective-c - 带有 NSFetchedResultsController 和背景上下文的 UIManagedDocument

> ID：11350670
> 
> 赞同：0
> 
> 时间：2012-07-05T18:51:02.427
> 
> 标签：objective-c, ios, core-data, nsfetchedresultscontroller, uimanageddocument

我正在尝试使以下工作。

我有一个表格视图，它在表格视图中显示从 API 获取的数据。为此，我正在使用 NSFetchedResultsController：

```
self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                        managedObjectContext:self.database.managedObjectContext
                                                                      sectionNameKeyPath:nil
                                                                               cacheName:nil]; 
```

我在这样的背景上下文中创建我的实体：

```
 NSManagedObjectContext *backgroundContext;
    backgroundContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    backgroundContext.parentContext = document.managedObjectContext; 

    [backgroundContext performBlock:^{
        [MyAPI createEntitiesInContext:backgroundContext];

        NSError *error = nil;
        [backgroundContext save:&error];
        if (error) NSLog(@"error: %@",error.localizedDescription);

        [document.managedObjectContext performBlock:^{
            [document updateChangeCount:UIDocumentChangeDone];
            [document.managedObjectContext save:nil];
        }]; 
```

现在，每当我获得新数据（以及如上所示的插入/更新实体）时，我的 NSFetchedResultsController 就无法正常工作。特别是，我总是更新一个实体（而不是创建一个新实体），但我的表格视图显示了两个实体。一旦我重新启动应用程序，它就会正确显示。

如果我在 self.database.managedObjectContext 中创建实体（[MyAPI createEntities]），一切正常。

知道我做错了什么吗？浏览 SO 上的现有线程让我认为我的做法是正确的。同样，如果我不在后台上下文中保存核心数据（但在 document.managedObjectContext 上），那么它可以正常工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T14:12:18.113

我今天在 Apple 开发论坛上读到了类似的问题。也许这与您的问题相同，[https://devforums.apple.com/message/666492#666492](https://devforums.apple.com/message/666492#666492)，在这种情况下，可能存在错误（或者至少有其他有相同问题的人可以讨论！）。

假设它不是，听起来你想要做的事情应该完全可以使用嵌套上下文，因此假设`UIManagedDocument`.

我唯一的保留是我一直在尝试使用批处理加载`UIManagedDocument`，但它似乎不适用于嵌套上下文（[https://stackoverflow.com/q/11274412/1347502](https://stackoverflow.com/q/11274412/1347502)）。我认为它的主要好处之一`NSFetchedResultsController`是它能够通过批量加载来提高性能。因此，如果这不能完成，`UIManagedDocument`也许`NSFetchedResultsController`还没有准备好使用，`UIManagedDocument`但我还没有深入了解这个问题。

撇开这一保留不谈，我阅读或查看的有关嵌套上下文和后台工作的大部分说明似乎都是使用**对等**子上下文完成的。您所描述的是父、子、孙配置。在 WWDC 2012 视频“Session 214 - Core Data Best Practices”（+ 16:00 分钟）中，Apple 建议在此场景的父上下文中添加另一个对等上下文，例如

```
backgroundContext.parentContext = document.managedObjectContext.parentContext; 
```

该工作在此上下文中异步执行，然后通过调用将其推送到父级以保存在后台上下文中。然后将异步保存父级，并且任何对等上下文（在本例中为`document.managedObjectContext`）将通过获取、合并或刷新来访问更改。这也在`UIManagedDocument`文档中进行了描述：

*   *如果合适，您可以将数据从后台线程直接加载到父上下文。您可以使用 parentContext 获取父上下文。将数据加载到父上下文意味着您不会干扰子上下文的操作。您只需执行 fetch 即可检索在后台加载的数据。*

*[编辑：重新阅读它可能只是推荐 Jeffery 的建议，即根本不创建任何新上下文，而只是使用父上下文。]*

话虽如此，文档还建议您通常不要在子上下文中调用 save 而是使用`UIManagedDocument`的 save 方法。这可能是您调用 save 的时候，也可能是问题的一部分。正如 Jeffery 所提到的，更强烈地不鼓励在父上下文上调用 save。我读过的关于堆栈溢出的另一个答案建议仅`updateChangeCount`用于触发`UIManagedDocument`保存。但我还没有从 Apple 读到任何东西，所以在这种情况下，调用该`UIManagedDocument saveToURL:forSaveOperation:completionHandler:`方法可能适合让所有内容同步并保存。

我想下一个明显的问题是如何通知 NSFetchedResultsController 发生了变化。我很想像上面讨论的那样简化设置，然后`NSManagedObjectContextObjectsDidChangeNotification`在不同的上下文中订阅各种或保存通知，并查看在`UIMangedDocument`保存、自动保存或将背景更改保存到父级时调用哪些通知（如果有的话）（假设在这种情况下是允许的）。我假设`NSFetchedResultsController`连接到这些通知是为了与基础数据保持同步。

或者，您可能需要在主上下文中手动执行获取、合并或刷新以获取更改，然后以某种方式通知`NSFetchedResultsController`它需要刷新？

就我个人而言，我想知道是否`UIManagedDocument`已准备好用于一般消费，今年的 WWDC 上没有提及它，而是提出了关于如何构建更复杂的解决方案的冗长讨论：“Session 227 - Using iCloud with Core Data”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-26T10:22:53.160

在我从服务器获取数据的方法中，我首先创建实体，然后调用这两个方法来保存对文档的更改：

```
[self.managedObjectContext performBlock:^{
     // create my entities

     [self.document updateChangeCount:UIDocumentChangeDone];
     [self.document savePresentedItemChangesWithCompletionHandler:^(NSError *errorOrNil) {
            ...
      }];
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:37:28.197

因为您要在不同的上下文中更新结果，所以我认为您需要调用`[self.fetchedResultsController performFetch:&error]`视图控制器`-viewWillAppear:`方法。

* * *

**更新后**

好的，你不应该打电话给`[backgroundContext save:&error]`or `[document.managedObjectContext save:nil]`。请参阅：[UIManagedDocument 类参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIManagedDocument_Class/Reference/Reference.html)

> 您通常应该使用标准的 UIDocument 方法来保存文档。如果您直接保存子上下文，您只会将更改提交到父上下文而不是文档存储。如果您直接保存父上下文，您将回避文档执行的其他重要操作。

我必须使用`-insertedObjects`并`obtainPermanentIDsForObjects:error:`持久化在上下文中创建的新对象。

接下来，我认为您不需要创建一个新的上下文来在后台运行。`document.managedObjectContext.parentContext`应该是运行更新的可用后台上下文。

最后，我不`[document updateChangeCount:UIDocumentChangeDone]`经常打电话。这是由文档自动处理的。您仍然可以随时执行此操作，但这不是必需的。

这是我如何称呼你的`-createEntitiesInContext`方法。

```
[document.managedObjectContext.parentContext performBlock:^{
    [MyAPI createEntitiesInContext:document.managedObjectContext.parentContext];

    NSSet *objects = [document.managedObjectContext.parentContext insertedObjects];
    if (objects.count > 0) {
        NSError *error = nil;
        [document.managedObjectContext.parentContext obtainPermanentIDsForObjects:objects error:&error]
        if (error) NSLog(@"error: %@",error.localizedDescription);
    }
}]; 
```

# gem - 如何使用 spree 1.1.1 安装“spree-dropdown-variants”

> ID：11350673
> 
> 赞同：0
> 
> 时间：2012-07-05T18:51:13.430
> 
> 标签：gem, spree

我正在使用 spree 1.1.1 并面临安装“spree-dropdown-variants”的问题，因为它没有 GEM 文件。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T07:08:08.267

fork 项目并添加 gemspec。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-19T23:41:10.137

我已经分叉了 GEM 并安装了，一切都很顺利，但是 javascript 有一些问题。（它正在选择第一个变体，但无法选择第二个变体选项）。没有冒犯**“狂欢下拉变体”**团队的问题可能是版本。

所以我已经转移到[spree_flexi_variants](https://github.com/jsqu99/spree_flexi_variants)并完成了我的要求。感谢 spree_flexi_variants 团队。

# mysql - 从 mysql CLI 有没有办法从文件中获取查询的解释计划？

> ID：11350680
> 
> 赞同：-2
> 
> 时间：2012-07-05T18:51:51.417
> 
> 标签：mysql, database, sql-execution-plan

从 MySQL CLI 有没有办法从文件中获取查询的执行计划？

假设文件中有以下查询`some-sql.sql`

```
select *
from table 
```

通过以下方式调用：

```
mysql> source some-sql.sql 
```

有没有办法获得这个查询的执行计划？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T18:54:24.613

在 .sql 文件中添加“解释”子句作为第一行。

# sql - 合并两个表的连接结果

> ID：11350686
> 
> 赞同：1
> 
> 时间：2012-07-05T18:52:09.917
> 
> 标签：sql, postgresql, union, left-join

我有 3 张桌子

```
items
  tag_id
  mark_id

tags_users
  tag_id
  user_id

marks_users
  mark_id
  user_id 
```

有没有办法`items`为特定的`user_id`无`UNION`和嵌套选择选择唯一的？

```
SELECT items.*
FROM items
INNER JOIN tags_users ON tags_users.tag_id = items.tag_id
AND  tags_users.user_id = 5

UNION

SELECT items.*
FROM items
INNER JOIN marks_users ON marks_users.mark_id = items.mark_id
AND marks_users.user_id = 5 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:53:29.547

### 链接者`(tag_id, mark_id)`

```
SELECT DISTINCT i.*
FROM   tags_users  tu  
JOIN   marks_users mu USING (user_id)
JOIN   items       i  USING (tag_id, mark_id)
WHERE  tu.user_id = 5; 
```

如果`DISTINCT`您在列上定义了多列主键或唯一键，则不需要。

### 由`tag_id` *或链接* `mark_id`

@Gordon 的回答是完全有效的。但它会表现得很*糟糕*。
这会快得多：

```
SELECT i.*
FROM   items i  
WHERE  EXISTS (
    SELECT 1
    FROM   tags_users  tu
    WHERE  tu.tag_id = i.tag_id
    AND    tu.user_id = 5
    )
OR     EXISTS (
    SELECT 1
    FROM   marks_users mu 
    WHERE  mu.mark_id = i.mark_id
    AND    mu.user_id = 5
    ); 
```

假设条目`items`本身在 上是唯一的`(tag_id, mark_id)`。

## 为什么*要快得多*？

如果您`JOIN`使用两个不相关的表（如@Gordon 的回答），您可以有效地形成一个**cross join**，它以随着行数的增加而迅速降低性能而闻名。O(N²)。说，你有：

*   100 个用户，100 个标签和 100 个标记。
*   每个组合都存在（简单的假设设置，现实生活中的数据将不太平衡）。
*   在每个表中产生 10,000 行。

这将发生在@Gordon 的查询中：

1.  加入 to 的`items`行`tags_users`。每个项目连接到 100 行，结果为 10,000 x 100 = 1,000,000 行。（！）
2.  加入到`marks_users`. 每行连接到 100 个标记，从而产生 100,000,000 行。（！！）
3.  应用该`WHERE`子句并且许多重复项被 折叠`DISTINCT`，从而产生 10,000 行。

用 测试[`EXPLAIN ANALYZE`](http://www.postgresql.org/docs/current/interactive/sql-explain.html)。即使数量很少并且数量不断增加，差异也会很明显。

[**SQL小提琴。**](http://sqlfiddle.com/#!1/81dc3/4)

## 基准

我在我的机器上使用此设置进行了一些快速测试（第 9.1 页）：

### 戈登的询问

```
SELECT DISTINCT i.*
FROM   items i
LEFT   JOIN tags_users tu on i.tag_id = tu.tag_id
LEFT   JOIN marks_users mu on i.mark_id = mu.mark_id
WHERE  5 IN (tu.user_id, mu.user_id); 
```

总运行时间：**38229.860 毫秒**

### 消毒版

将条件拉`user_id`入`JOIN`子句从根本上减少了组合，但它仍然是一个**（更小）的 cross join**。

```
SELECT DISTINCT i.*
FROM   items i
LEFT   JOIN tags_users tu on i.tag_id = tu.tag_id AND tu.user_id = 5
LEFT   JOIN marks_users mu on i.mark_id = mu.mark_id AND mu.user_id = 5
WHERE  tu.user_id = 5 OR mu.user_id = 5; 
```

总运行时间：**110.450 毫秒**

### 使用 EXISTS 半连接

（参见上面的查询）
使用此查询，每行检查一次是否符合条件。您不需要 a `DISTINCT`，因为从一开始就不会重复行。

总运行时间：**26.569 毫秒**

### 联盟

为了完整起见，带有`UNION`. 使用`UNION`, 不`UNION ALL`删除重复项：

```
SELECT i.*
FROM   items i 
JOIN   tags_users  tu ON i.tag_id = tu.tag_id AND tu.user_id = 5
UNION
SELECT i.*
FROM   items i 
JOIN   marks_users mu ON i.mark_id = mu.mark_id AND mu.user_id = 5; 
```

总运行时间：**178.901 毫秒**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:16:14.430

我认为您可以通过将表连接在一起并查看标签和标记表中的用户 ID 来做到这一点。您必须小心获取重复项。

以下是如何执行此操作的示例：

```
select distinct i.tag_id, i.user_id
from items i left outer join
     tags_users tu
     on i.tag_id = tu.tag_id left outer join
     marks_users mu
     on i.mark_id = mu.mark_id
where 5 in (tu.user_id, mu.user_id) 
```

或者您可以将 where 子句更改为：

```
where tu.user_id = 5 or mu.user_id = 5 
```

我想强调一下，这个答案解决了原始问题，该问题询问了制定查询的特定方式（不使用连接或子查询）。这个查询可能效率不高；但是，它回答了最初的问题。我不知道为什么最初的问题会对答案施加这些限制，但我选择不解决限制，只解决被问到的问题。我绝对使用联合和子查询；事实上，我有时会因为过度使用后者而受到批评。

在某些数据库中，这将被有效地编译；其他人（如 postgres）似乎做得更差。但是，最初的问题没有指定数据的大小，也没有给出任何关于性能需求的暗示。

# javascript - javascript崩溃iPad浏览器

> ID：11350691
> 
> 赞同：0
> 
> 时间：2012-07-05T18:52:33.723
> 
> 标签：javascript, ipad, crash, carousel

我在创建和填充图像轮播的函数中有一些 javascript。在前 5 或 6 次在弹出窗口中激活它后它工作正常，但最终它使浏览器崩溃。我认为存在某种泄漏，例如其中的某些内容需要在再次创建之前被删除。我知道这是轮播，因为如果我去掉脚本的那部分，它就不会崩溃了。

这是轮播脚本：

```
/* carousel */

var carousel,
el,
i,
page,
slides;

carousel = new SwipeView('#wrapper', {
                         numberOfPages: slides.length,
                         hastyPageFlip: true
                         });

// Load initial data
for (i=0; i<3; i++) {
    page = i==0 ? slides.length-1 : i-1;

    el = document.createElement('span');
    el.innerHTML = slides[page];
    carousel.masterPages[i].appendChild(el)
}

carousel.onFlip(function () {
                var el,
                upcoming,
                i;

    for (i=0; i<3; i++) {
        upcoming = carousel.masterPages[i].dataset.upcomingPageIndex;

        if (upcoming != carousel.masterPages[i].dataset.pageIndex) {
            el = carousel.masterPages[i].querySelector('span');
            el.innerHTML = slides[upcoming];
        }
    }
}); 
```

每次我单击启动浮动窗口的链接时，此脚本都会运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:04:38.617

我发现我需要清除我的包装器 div。在我的函数调用开始时：

```
document.getElementById('wrapper').innerHTML = ""; 
```

似乎工作。

# android - android' 未被识别为内部或外部命令

> ID：11350692
> 
> 赞同：39
> 
> 时间：2012-07-05T18:52:33.727
> 
> 标签：android, command-line

我正在尝试让新的 GCM 服务为我工作，所以我一直按照此处所述的演示进行操作：http: [//developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)

到目前为止，一切正常。但是，我现在应该`ant`使用命令行来构建文件，这就是事情停止工作的地方。

出于某种原因，这个命令`$ android update project --name GCMDemo -p . --target android-16`给了我一个非常好的

```
'android' is not recognized as an internal or external command,
operable program or batch file. 
```

通常可以通过快速的 Google 搜索轻松解决此问题，但我还没有找到其他用户遇到此问题。有人可以告诉我问题是什么吗？我有根据的猜测是我需要将 Android 工具文件夹添加到我的`PATH`.，但我宁愿先确定。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-07-05T18:54:51.843

您的猜测是正确的，只需将包含 android.bat(tools 文件夹) 的文件夹添加到 PATH。否则系统将无法找到该程序。

其他可能性是将目录（使用 cd）更改为工具文件夹，然后从那里执行命令。由于当前目录（不管它是什么）通常在 PATH 中，系统会找到它。但这并不方便，因为您经常希望在不同的目录中执行此命令。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-07-31T02:04:18.527

在您的系统上找到 android.bat。在我的（win 8 x64）它位于 C:\Users\{username}\AppData\Local\Android\sdk\tools\android.bat

打开命令控制台，然后使用“doskey”命令：

```
doskey android=C:\Users\{username}\AppData\Local\Android\sdk\tools\android.bat $* 
```

这将继续在打开的命令控制台中工作。使其永久化更加困难：[http ://darkforge.blogspot.com/2010/08/permanent-windows-command-line-aliases.html](http://darkforge.blogspot.com/2010/08/permanent-windows-command-line-aliases.html)

您也可以尝试按照另一张海报的建议将其添加到您的 PATH 中，但这对我不起作用。我建议使用简单的 gui 来执行此操作，例如[https://patheditor2.codeplex.com/](https://patheditor2.codeplex.com/)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-07-28T16:56:15.950

在 Windows 7 中，导航到

> 控制面板\系统和安全\系统>高级系统设置>环境变量

并更新路径以包含以下内容：

```
<android-root>\android-sdk-windows\tools 
```

如果存在多个路径，请使用分号分隔路径。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2016-12-15T15:55:38.110

在 Windows 10 上，同时添加：

```
C:\Users\Parag Jain\AppData\Local\Android\sdk\tools
C:\Users\Parag Jain\AppData\Local\Android\sdk\build-tools 
```

到 System 和 User 的**PATH**环境变量。确保关闭命令提示符并重新启动新提示符，然后尝试该命令。

[![图片](../Images/d6be169c1e766b992fa2d0a162d9ab75.png)](https://i.stack.imgur.com/VmlJa.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-03-04T04:22:40.303

编译以前的答案我做了以下工作以使 Android SDK 和 gradle 工作（无论如何你需要 gradle 工作来编译你的 Android 项目）：

1.  先决条件。你在我的电脑上找到的文件夹中安装了 Java jdk、Android SDK 和 gradle。请检查一下：

    ```
    C:\Program Files\Java\jdk1.X.X_XX\
    C:\Users{username}\AppData\Local\Android\sdk\
    C:\Program Files\Android\Android Studio\gradle\gradle-X.X\ 
    ```

2.  设置三个新的系统变量（控制面板\系统和安全\系统高级系统->设置->环境变量-系统变量）。不要忘记更改 java 和 gradle 版本。

    ```
    JAVA_HOME C:\Program Files\Java\jdk1.X.X_XX
    ANDROID_HOME  C:\Users\{username}\AppData\Local\Android\sdk
    GRADLE_HOME   C:\Program Files\Android\Android Studio\gradle\gradle-X.X\ 
    ```

3.  将以下路径添加到系统路径（控制面板\系统和安全\系统高级系统->设置->环境变量-系统变量）：

    ```
    %JAVA_HOME%
    %ANDROID_HOME%\tools\
    %ANDROID_HOME%\platform-tools
    %GRADLE_HOME%\bin 
    ```

4.  关闭并再次打开您的 Dos 应用程序（Cmd 终端等）。您可能需要重新启动计算机，以确保系统可以看到这些变量。如果您不想重新启动，可以使用@wordsforthewise 的建议

    ```
    doskey android=C:\Users\{username}\AppData\Local\Android\sdk\tools\android.bat $* 
    ```

5.  使用终端命令检查 Android SDK 和 gradle 是否正常工作

    ```
    $ java -version
    $ android list target
    $ gradle -v 
    ```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-02T21:42:04.810

什么对我有用：将 ANDROID_HOME 变量设置为系统变量而不是用户变量。

我正在使用 Windows 10，不确定这是否重要。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-09-15T08:03:44.543

我使用以下步骤永久解决了此问题。

操作系统版本：windows 7 64 位解决方案：为 android sdk 和 gradle 设置环境变量

第 1 步：创建新的“ANDROID_HOME”用户变量变量名称：ANDROID_HOME 变量值 C:\Users{user_name}\AppData\Local\Android\sdk\

第 2 步：创建新的“GRADLE_HOME”用户变量变量名称：GRADLE_HOME 变量值 C:\Program Files\Android\Android Studio\gradle\gradle-xx\ *不要忘记更改和 gradle 版本。

第三步：创建“ANDROID_HOME”系统变量变量名：ANDROID_HOME变量值C:\Users{user_name}\AppData\Local\Android\sdk\

第四步：新建“GRADLE_HOME”系统变量 变量名：GRADLE_HOME 变量值 C:\Program Files\Android\Android Studio\gradle\gradle-xx\ *不要忘记更改和gradle版本。

重新打开命令提示符并确认以下命令输出： 1\. gradle -v 2\. android list target

# linux - 将 -N 选项与 qsub 一起使用时出错

> ID：11350694
> 
> 赞同：0
> 
> 时间：2012-07-05T18:52:48.920
> 
> 标签：linux, qsub, sungridengine

我尝试`qsub -N "compile-$*"`在 Makefile 中使用它并给出以下错误，因为在这种情况下 $* 等于“compile-obj/linux/flow”。

```
qsub: ERROR! argument to -N option must not contain / 
```

我正在使用的整个命令是：-

```
qsub -P bnormal -N "compile-obj/linux/flow" -cwd -now no -b y -l cputype=amd64 -sync yes -S /bin/sh -e /remote//qsub_files/ -o /remote/qsub_files/ 
```

知道如何在运行 qsub 时在命名中包含斜杠吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:22:17.053

I'm not familiar with `qsub`, but make just executes what command you supply it. So I suspect you constructed illegal `qsub` command.

Maybe [Automatic-Variables](http://www.gnu.org/software/make/manual/make.html#Automatic-Variables) section of GNU make can help you too.

Adding a whole rule to question can help.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T09:25:57.807

我通过将 / 替换为 - 来操作传递给 -N 选项的名称来解决问题。这个对我有用。谢谢。

# cloud-foundry - Micro Cloud Foundry 离线模式

> ID：11350695
> 
> 赞同：-1
> 
> 时间：2012-07-05T18:52:51.353
> 
> 标签：cloud-foundry

在上周，我花了所有时间尝试以离线模式访问 MCF。我在公司网络（代理）后面工作，MCF 尝试做与本地网络冲突的事情。

我已经学习了几个不同的教程，例如[1\. 使用 MCF 脱机](http://docs.cloudfoundry.com/infrastructure/micro/using-mcf.html#working-offline-with-micro-cloud-foundry)工作和[2\. 使用 MCF 脱机工作](http://blog.cloudfoundry.com/2011/09/08/working-offline-with-micro-cloud-foundry/)。但结果保持不变，即使我在我的 ubuntu 上更改了所有类型的配置。

**试图设定目标。**

vm 目标 http://api.mycloud.me

HTTP 异常：Errno::ECONNREFUSED:Connection denied - connect(2)

**MCF 控制台显示以下信息：**

身份：mycloud.me（好的）

管理员：admin@mycloud.me

IP 地址 10.0.xx（网络启动/离线）

**当我 ping 到 IP 地址时，我得到了肯定的回报。**

PING 10.0.xx (10.0.xx) 56(84) 字节数据。

来自 10.0.xx 的 64 个字节：icmp_req=1 ttl=62 time=1.06 ms

来自 10.0.xx 的 64 个字节：icmp_req=2 ttl=62 time=0.896 ms

来自 10.0.xx 的 64 个字节：icmp_req=3 ttl=62 time=0.880 ms

--- 10.0.2.15 ping 统计 ---

3个发送，3个接收，0%丢包，时间2000ms

rtt 最小值/平均值/最大值/mdev = 0.880/0.948/1.069/0.089 毫秒

但是，如果我尝试对端口 80 或 ssh 进行 telnet，则会收到连接被拒绝错误。

**ssh：连接到主机 mycloud.me 端口 22：连接被拒绝**

我不知道我需要做些什么来解决这个问题，如果有人有帮助我找出解决方案的提示，我将非常感激。

干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T15:57:58.587

好的伙计们！我修好了！

所以，在了解了一些问题之后，我终于可以连接到微云了。我仍在验证上面两个教程中的信息，因为可能有一些冲突的数据。

我没有测试是否需要为dhclient设置nameserver，但是第二个教程似乎更可靠。提示一个，在单独的终端上运行 ssh -L 隧道，并保持打开状态。对于像我这样不习惯使用网络管理的人来说，这不是很清楚。

谢谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T21:09:36.220

给定分配的 IP 地址，您似乎正在使用桥接网络，您是否尝试过将 VM 配置更改为使用 NAT？

这将使用您的本地计算机和 VM 独有的接口，并且不应受到您的公司网络的影响。

# javascript - JQuery 调用不应调用 onclick 的函数？

> ID：11350696
> 
> 赞同：0
> 
> 时间：2012-07-05T18:52:52.010
> 
> 标签：javascript, jquery, html, css, navigation

看看这个 JSFiddle：http: [//jsfiddle.net/kZ3Af/25/](http://jsfiddle.net/kZ3Af/25/)

我很好地固定了基本导航。但是，当我尝试单击任何导航项时，整个菜单都会消失？那是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:55:12.290

你为什么这样做

```
$('.navcontent').hide(); 
```

见[更新 30](http://jsfiddle.net/kZ3Af/30/)。

【*两分钟后……*】

好的，我想我明白了：你想在 list`interior`和`exterior`. 我对您的 HTML 进行了一些重组（不要将`<div>`s 放入`<a>`s 中），这就是您的样式有点偏离的原因。然后我按照 Steven Lu 的建议更改了选择器：尝试[更新 36](http://jsfiddle.net/kZ3Af/36/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T18:55:15.717

您正在调用`$('.navcontent').hide();`它隐藏了您`<ul>`的所有课程`navcontent`，这就是整个菜单消失的原因。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T18:57:34.330

您的声明：

```
$('#column1 a').click(function(){
    switchlist($(this));
}); 
```

匹配所有链接的内部内容，导致您的`switchlist`函数被触发。

你需要用一个新的 id 包裹你的顶部导航，并将选择器更改为类似

```
$('#topnav a').click(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T18:55:30.230

你调用`$('.navcontent').hide();`你的点击处理程序。只需删除它，它应该可以工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-05T19:41:14.743

选择直接锚子：$('#column1 > a').click

# c# - 实施战略模式。我必须每次都“更新”吗？

> ID：11350698
> 
> 赞同：3
> 
> 时间：2012-07-05T18:52:59.297
> 
> 标签：c#, strategy-pattern

我正在尝试实施[策略模式。](http://en.wikipedia.org/wiki/Strategy_pattern)这是我的实现的一部分：

```
public List<string> GetOrderedEmployeeNames(IOrderByStrategy strategy)
{
   return GetEmployeeFullNames().OrderBy(strategy.Order);
} 
```

现在每次我调用这个函数时我都必须写：

```
var employees = GetOrderedEmployeeNames(new OrderByFamilyName()); 
```

每次都以正确的方式“更新”策略还是我执行不正确？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T18:55:28.267

如果实现的类`IOrderByStrategy`没有任何状态（即每次都表现相同），那么您不妨将其存储在某个字段中，以节省重新编写`new`它的时间。

也就是说，这`new`是一个非常有效的操作，如果你没有在一个紧密的循环中调用它，那么继续做你正在做的事情可能会更简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T18:57:45.333

不一定，尽管创建对象可能不会损害任何东西，因为我假设它们主要是方法并且不包含大量数据。

一些替代方案：

*   实现一个`StrategyFactory`创建新实例或保存对flyweights（由某个键索引的小对象，如字符串）的引用
*   将策略实现为单例，但如果有很多策略，这可能会比您需要的开销更大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T19:24:58.807

如果策略具有相同的行为，您可以存储属性。如果没有，您可以使用参数创建对象。

```
 private IOrderByStrategy orderByStrategy;
    public IOrderByStrategy OrderByStrategy
    {
         get
         {
            if(orderByStrategy != null)
               return orderByStrategy;
            else
               return new OrderByStrategy();
         }
    }
var employees = GetOrderedEmployeeNames(OrderByStrategy); 
```

第二种情况：

```
var employees = GetOrderedEmployeeNames(new OrderByFamilyName("familyname","DESC")); 
```

# sql-server - 如何使用 TSQL 脚本将一个表拆分为另一个表

> ID：11350702
> 
> 赞同：-1
> 
> 时间：2012-07-05T18:53:30.650
> 
> 标签：sql-server, tsql

到目前为止我有这个代码：

```
DECLARE @AddressIDS TABLE
(
    AddressID int
)

INSERT INTO Address(Street1, City, StateCode, ZipCode)
OUTPUT inserted.AddressID INTO @AddressIDS
SELECT Street1, City, StateCode, ZipCode
    FROM Contact 
```

现在我需要将 ID 放在表的`@AddressIDS`后面。`AddressID``Contact`

这更好地描述了我在 TSQL 中尝试做的事情：

![在此处输入图像描述](../Images/9c29d089646fbba2ddf0cbdcc9d300ce.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T18:58:09.167

假设 Street1 + City + StateCode + ZipCode 是唯一的，或者多个联系人可以共享同一个 AddressID，那么您不需要在中间步骤中提取 AddressID 值。您只需执行插入地址，然后：

```
UPDATE c 
  SET AddressID = a.AddressID
  FROM dbo.Contact AS c
  INNER JOIN dbo.Address AS a
  ON c.Street1 = a.Street1
  AND c.City = a.City
  AND c.StateCode = a.StateCode 
  AND c.ZipCode = a.ZipCode; 
```

# android - OnCheckedChangeListener & OnClickListener in android -- Button half-works on first click, finishes on second click?

> ID：11350703
> 
> 赞同：1
> 
> 时间：2012-07-05T18:53:31.943
> 
> 标签：android, radio-button, onclicklistener, oncheckedchanged

Well... here's a problem it looks like I'm not the first to experience looking through other questions, however I can't find one that's Android-specific (others are C++ or straight java with different scenarios).

I have a calculator that determines your fuel mileage needs with given user inputs. The thing I'm adding now is a "burnoff" aspect where you can calculate the weight lost over the course of the race. Before adding the weight/burnoff element, everything worked fine.

Now, everything calculates normally ***except the weight*** on the first click.

On the second click (and subsequent clicks) it calculates properly. I suspect it has something to do with the switch statement and its location, but I could be wrong.... and even if I'm not, I'm not sure how to change it.

Looking for help on getting it all functioning properly on the first click. Thanks!

EDIT: The non-exception Toast text I put in as a debugger to determine if it was a math issue or what in the code. It pops up with "0.0" on the first click, then either "6.2" or "6.6" on subsequent clicks.

* * *

```
 package com.tomcat.performance;

    import android.app.Activity;
    import android.os.Bundle;
    import android.view.Gravity;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.RadioButton;
    import android.widget.RadioGroup;
    import android.widget.RadioGroup.OnCheckedChangeListener;
    import android.widget.TextView;
    import android.widget.Toast;

    public class Fuelsimple extends Activity implements OnCheckedChangeListener{

double fuelweight;

public void onCheckedChanged(RadioGroup group, int checkedId) {
    // TODO Auto-generated method stub
    switch (checkedId){
    case R.id.rbMethanol:
        fuelweight = 6.6;
        break;
    case R.id.rbGasoline:
        fuelweight = 6.2;
        break;}
}

@Override
protected void onCreate(Bundle savedInstanceState){
super.onCreate(savedInstanceState);
setContentView(R.layout.fuelsimple);

RadioGroup rgFuelType = ((RadioGroup) findViewById (R.id.rgFuelType));
rgFuelType.setOnCheckedChangeListener(this);
RadioButton rbMethanol = ((RadioButton) findViewById(R.id.rbMethanol));
RadioButton rbGasoline = ((RadioButton) findViewById(R.id.rbGasoline));

Button gen = ((Button) findViewById(R.id.submit));  
gen.setOnClickListener(new View.OnClickListener() { 

        public void onClick(View v) {
    // TODO Auto-generated method stub      

            EditText fuelUsed, pracLaps, featureLaps;

            pracLaps = ((EditText) findViewById(R.id.pracLaps));
            fuelUsed = ((EditText) findViewById(R.id.fuelUsed));
            featureLaps = ((EditText) findViewById(R.id.featureLaps));
            TextView textLPGValue, textFuelNeededValue, textBurnoffValue;
            try{
            double pracLapsVar = Double.parseDouble(pracLaps.getText().toString());
            double fuelUsedVar = Double.parseDouble(fuelUsed.getText().toString());
            double featureLapsVar = Double.parseDouble(featureLaps.getText().toString());

            double efficiency = (pracLapsVar / fuelUsedVar);
            double fuelNeeded = (featureLapsVar / efficiency);
            double burnoff = (1.05 * (fuelNeeded * fuelweight));

            Toast andJelly = Toast.makeText(Fuelsimple.this, String.valueOf(fuelweight), Toast.LENGTH_LONG);
            andJelly.show();

            textLPGValue = ((TextView) findViewById(R.id.textLPGValue));
            textFuelNeededValue = ((TextView) findViewById(R.id.textFuelNeededValue));
            textBurnoffValue = ((TextView) findViewById(R.id.textBurnoffValue));

            textLPGValue.setText(String.valueOf(String.format("%.3f", efficiency)) + " laps per gallon");
            textFuelNeededValue.setText(String.valueOf(String.format("%.3f", fuelNeeded)) + " gallons");
            textBurnoffValue.setText(String.valueOf(String.format("%.2f", burnoff)) + " pounds");
            } catch (NumberFormatException e) {Toast andEggs = Toast.makeText(Fuelsimple.this, "Please complete all fields and enter your fuel & lap info in decimals or whole numbers.", Toast.LENGTH_LONG); andEggs.show();} 
            catch (NullPointerException n) {Toast andEggs = Toast.makeText(Fuelsimple.this, "Please enter ALL lap and fuel data.", Toast.LENGTH_LONG);
            andEggs.show();}
        }}
);      
}
    public void onClick(View v) {
    }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:39:10.583

As far as I can tell, your variable fuelWeight is never initialized until a radio button is pressed. The simplest way to fix this would be to call `setChecked(true)` on either rbmethanol or rbGasoline **after setting the listener**, maybe right below where you initialize those variables. Doing it after setting the listener is important, because you want the switch statement to be resolved. Right now, before you press a radio button, fuelWeight, as with all numeric primitive data types, will be initialized to 0\. This is probably the reason your first calculations are wrong.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-07T22:21:46.573

You can also have a look at CheckChangeListener.It is called whenever the check state changes.

```
cbSave.setOnCheckedChangeListener(new OnCheckedChangeListener() {
            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                int visibility = isChecked ? View.VISIBLE : View.GONE;
                findViewById(R.id.nameInstructions).setVisibility(visibility);
                findViewById(R.id.name).setVisibility(visibility);

} 
```

# hibernate - 我对嵌入式 ID 使用哪些注释？

> ID：11350706
> 
> 赞同：1
> 
> 时间：2012-07-05T18:53:38.840
> 
> 标签：hibernate, hbm2ddl

我想使用我拥有的三个 pojo，并使用 Hibernate 的能力在我的数据库中生成与它们匹配的表。这些类是电影、评分者和评分。这里是电影。评分者实际上是一回事，因为它也有一个与之相关的评分列表。

```
public class Movie{    
    @Id
    @GeneratedValue(generator = "IdGenerator", strategy = Generation Type.TABLE)
    @TableGenerator(name = "IdGenerator",
    pkColumnValue = "movieId")
    private long id;
    private String name;
    @OneToMany(mappedBy = "id.rater")
    private List<Rating> ratings;
} 
```

评分相差很大。我正在使用 EmbeddedId。这是我到目前为止所拥有的。

```
public class Rating{
    @Embeddable
    public static class RatingId
        {
            @ManyToOne
            @JoinColumn(name = "movieId")
            private Movie movie;
            @ManyToOne
            @JoinColumn(name = "raterId")
            private Rater rater;
        }
    @EmbeddedId
    private RatingId id;
    private String comment;
    private int rating;
    } 
```

所以我问这个：使用这个嵌入式 id 设置需要什么特殊的注释？此外，哪个是 hbm2ddl 值的正确关键字？看起来我想使用“create”值，但阅读更多内容说它会导致 Hibernate 清空预先存在的表。我没看错吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T14:58:22.273

关于 hbm2ddl 的关键字，“update”：更新架构，“create”：创建架构，销毁以前的数据。所以，我猜“更新”是您要查找的关键字。？

来到应该用于设置嵌入ID的注释，它是“@EmbeddedID”。当主键本身需要是嵌入对象时使用它。您是什么意思“使用此嵌入式 ID 设置需要什么特殊注释？”

# hibernate - 使用 DAO 休眠

> ID：11350708
> 
> 赞同：1
> 
> 时间：2012-07-05T18:53:47.170
> 
> 标签：hibernate, jersey, dao

我正在使用 Jersey 实现一个 Restful Web 服务。我有一个使用休眠将数据映射到数据库的包。我是使用 DAO 休眠的新手：

我在 GenericDao 类中有一个方法：

```
public abstract class GenericDAO<T> extends DAOFactory {

    private final Class classe;

        public GenericDAO(Class classe) {
            this.classe = classe;
        }

           public List<T> findByCriteria(List<Criterion> list) throws Exception {
                Criteria criteria = getSession().createCriteria(classe);
                for (int i = 0; i < list.size(); i++) 
                   criteria.add(list.get(i));
                return criteria.list();
            }
        } 
```

然后我有我的 DAO 类，如：

```
public class TaskDAO extends GenericDAO<Task> {

    public TaskDAO() {
        super(Task.class);
    }
} 
```

然后我在服务类中使用这个方法，它工作得很好，如下所示：

```
 public Response get(long projectId, String username) {
    List<Criterion> list = new ArrayList<Criterion>();
    Criterion c = Restrictions.eq("project.id", projectId);
    list.add(c);
    List<Deliverable> deliverables = deliverableDAO.findByCriteria(list);
    return deliverables
} 
```

问题出在另一个 Service 类中的这个方法中：

```
public Response get(String username) {
    List<Criterion> list = new ArrayList<Criterion>();
    Criterion c = Restrictions.eq("user.username", username);
    list.add(c);
    List<Task> tasks = taskDAO.findByCriteria(list);
    return tasks;
} 
```

如您所见，“Restrictions.eq("project.id", projectId)" 对我来说很好，但是“Restrictions.eq("user.username", username)" 可能与 'user.username' 有问题，有
什么帮助吗？

堆栈跟踪中的错误如下：

```
javax.ws.rs.WebApplicationException: org.hibernate.QueryException: could not resolve property: user.username of: se.softwerk.timelog.model.Task
    at se.softwerk.controller.services.TaskService.get(TaskService.java:29)
    at se.softwerk.timelog.controller.TaskManager.taskList(TaskManager.java:72)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at com.sun.jersey.spi.container.JavaMethodInvokerFactory$1.invoke(JavaMethodInvokerFactory.java:60)
    at com.sun.jersey.server.impl.model.method.dispatch.AbstractResourceMethodDispatchProvider$ResponseOutInvoker._dispatch(AbstractResourceMethodDispatchProvider.java:205)
    at com.sun.jersey.server.impl.model.method.dispatch.ResourceJavaMethodDispatcher.dispatch(ResourceJavaMethodDispatcher.java:75)
    at com.sun.jersey.server.impl.uri.rules.HttpMethodRule.accept(HttpMethodRule.java:288)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.ResourceClassRule.accept(ResourceClassRule.java:108)
    at com.sun.jersey.server.impl.uri.rules.RightHandPathRule.accept(RightHandPathRule.java:147)
    at com.sun.jersey.server.impl.uri.rules.RootResourceClassesRule.accept(RootResourceClassesRule.java:84)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1469)
    at com.sun.jersey.server.impl.application.WebApplicationImpl._handleRequest(WebApplicationImpl.java:1400)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1349)
    at com.sun.jersey.server.impl.application.WebApplicationImpl.handleRequest(WebApplicationImpl.java:1339)
    at com.sun.jersey.spi.container.servlet.WebComponent.service(WebComponent.java:416)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:537)
    at com.sun.jersey.spi.container.servlet.ServletContainer.service(ServletContainer.java:708)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:928)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:539)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:298)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.hibernate.QueryException: could not resolve property: user.username of: se.softwerk.timelog.model.Task
    at org.hibernate.persister.entity.AbstractPropertyMapping.propertyException(AbstractPropertyMapping.java:83)
    at org.hibernate.persister.entity.AbstractPropertyMapping.toColumns(AbstractPropertyMapping.java:98)
    at org.hibernate.persister.entity.BasicEntityPropertyMapping.toColumns(BasicEntityPropertyMapping.java:61)
    at org.hibernate.persister.entity.AbstractEntityPersister.toColumns(AbstractEntityPersister.java:1801)
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.getColumns(CriteriaQueryTranslator.java:522)
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.findColumns(CriteriaQueryTranslator.java:537)
    at org.hibernate.criterion.SimpleExpression.toSqlString(SimpleExpression.java:66)
    at org.hibernate.loader.criteria.CriteriaQueryTranslator.getWhereCondition(CriteriaQueryTranslator.java:419)
    at org.hibernate.loader.criteria.CriteriaJoinWalker.<init>(CriteriaJoinWalker.java:123)
    at org.hibernate.loader.criteria.CriteriaJoinWalker.<init>(CriteriaJoinWalker.java:92)
    at org.hibernate.loader.criteria.CriteriaLoader.<init>(CriteriaLoader.java:93)
    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1464)
    at org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java:374)
    at se.softwerk.timelog.model.dao.GenericDAO.findByCriteria(GenericDAO.java:33)
    at se.softwerk.controller.services.TaskService.get(TaskService.java:24) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:12:04.883

您正在使用变量“classe”。它是什么？请显示定义。

您应该为特定类创建 Criteria 实例。所以如果你想返回一个用户对象的列表，你应该重构代码看起来像这样：

```
public List<T> findByCriteria(Class<?> askFor, List<Criterion> list) throws Exception {
        Criteria criteria = getSession().createCriteria(askFor);
        for (int i = 0; i < list.size(); i++) 
           criteria.add(list.get(i));
        return criteria.list();
    } 
```

然后像这样使用它：

```
public Response get(String username) {
   List<Criterion> list = new ArrayList<Criterion>();
   Criterion c = Restrictions.eq("user.username", username);
   list.add(c);
   //this will create an alias
   List<Task> tasks = taskDAO.findByCriteria(Task.class, list);
   return tasks;
} 
```

您应该重新设计您的代码，因为您想要实现的是为 Task.user.username 创建一个别名条件。请阅读手册的相应部分（15.4）[http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:21:36.453

您需要创建一个连接才能访问任务用户的字段：

```
criteria.createAlias("user", "theUser");
criteria.add(Restrictions.eq("theUser.username", username); 
```

对于任务的项目ID，您不需要这样做，因为项目的ID作为外键直接存储在任务表中。

设计说明：您的 DAO 不会增加太多价值。特别是，它没有将服务类与持久性 API（在本例中为 Hibernate）隔离开来。您可以直接在您的服务类中使用 Hibernate 会话，它不会有太大变化。将服务类与持久性 API 完全隔离是有用的，主要有两个原因：

*   它使职责更清晰：服务类包含业务逻辑，而 DAO 包含持久性逻辑
*   它允许模拟 DAO 以便对服务进行单元测试。

# node.js - Express 下更复杂的静态文件服务

> ID：11350714
> 
> 赞同：3
> 
> 时间：2012-07-05T18:54:10.450
> 
> 标签：node.js, express

最好用一个例子来解释。假设我有一个目录 /images，其中有图像 a.png、b.png 和 c.png。

然后我有一个目录/foo/images，里面有一个图片b.png，和/images中的b.png不同。

[我想要它，所以如果收到http://mydomain.com/foo/images/a.png](http://mydomain.com/foo/images/a.png)的请求，它将提供图像 /images/a.png。[但是，如果对http://mydomain.com/foo/images/b.png](http://mydomain.com/foo/images/b.png)的请求进入，它将在 /foo/images 中获得 b.png 的版本。也就是说，它首先检查 foo/images/，如果没有该名称的文件，它会退回到 /images。

我可以使用 res.sendfile() 来做到这一点，但我更喜欢使用内置功能（如果存在）或某人的优化模块，同时不会失去中间件可能提供的好处（缓存等）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:20:58.317

`/foo/images/`如果文件不存在，这将拦截请求并重定向它们，仍然使用静态中间件并适当缓存

```
var imageProxy = require('./imageProxy.js');

// intercept requests before static is called and change the url
app.use( imageProxy );

// this will still get cached
app.use( express.static(__dirname + '/public') ); 
```

在 imageProxy.js 内部：

```
var url = require('url');
var fs  = require('fs');
var ROOT = process.execPath + '/public';

exports = function(req, res, next) {
   var parts = url.parse(req.url);
   // find all urls beginnig with /foo/images/
   var m = parts.pathname.match(/^(\/foo(\/images\/.*))/);
   if( m ) {
      // see if the override file exists
      fs.exists(ROOT+m[1], function (exists) {
         if( !exists ) { req.url = ROOT+m[2]; }
         // pass on the results to the static middleware
         next();
      });
   }
 }); 
```

如果您出于某种原因想访问原始 URL，它仍然可以在`req.originalUrl`

# qt - QSystemTrayIcon，打开除主窗口以外的其他对话框关闭应用程序

> ID：11350718
> 
> 赞同：3
> 
> 时间：2012-07-05T18:54:30.840
> 
> 标签：qt, indicator, tray

正如标题所说，如果我制作了一个系统托盘图标，该图标可以选择通过那里打开另一个对话框（例如首选项），当我关闭另一个对话框时，当我调用 this>close(); 时整个应用程序都会关闭；使用该首选项对话框。拿这个示例代码：main.cpp：

```
#include <QtGui/QApplication>
#include "mainwindow.h"

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    MainWindow w;
    w.show();

    return a.exec();
} 
```

主窗口.cpp

```
#include "mainwindow.h"
#include "ui_mainwindow.h"

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
    trayIcon = new QSystemTrayIcon(this);
    trayIcon->setIcon(QIcon(":/icons/error.png"));
    //replace 'error' with 'video' and recompile. The indicator isn't shown!
    trayIcon->setToolTip("Test");
    QMenu *changer_menu = new QMenu;
    Show_action = new QAction(tr("S&how"),this);
    Show_action->setIconVisibleInMenu(true);
    connect(Show_action, SIGNAL(triggered()), this, SLOT(show_me()));
    changer_menu->addAction(Show_action);
    changer_menu->addSeparator();

    Preferences_action = new QAction(tr("Preferences"), this);
    Preferences_action->setIconVisibleInMenu(true);
    connect(Preferences_action, SIGNAL(triggered()), this, SLOT(showpref()));
    changer_menu->addAction(Preferences_action);

    Quit_action = new QAction(tr("&Quit"), this);
    Quit_action->setIconVisibleInMenu(true);
    connect(Quit_action, SIGNAL(triggered()), this, SLOT(quit_me()));
    changer_menu->addAction(Quit_action);
    trayIcon->setContextMenu(changer_menu);
}

void MainWindow::showpref(){
    pref=new Preferences(this);
    pref->exec();
}

MainWindow::~MainWindow()
{
    delete ui;
}

void MainWindow::on_pushButton_clicked()
{
    trayIcon->show();
    this->hide();
}

void MainWindow::show_me(){
    this->show();
}

void MainWindow::quit_me(){
    this->close();
} 
```

主窗口.h：

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QSystemTrayIcon>

#include "preferences.h"

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private slots:
    void on_pushButton_clicked();
    void show_me();
    void quit_me();
    void showpref();

private:
    Ui::MainWindow *ui;
    QSystemTrayIcon *trayIcon;
    QAction *Show_action;
    QAction *Preferences_action;
    QAction *Quit_action;
    Preferences *pref;
};

#endif // MAINWINDOW_H 
```

首选项.cpp：

```
#include "preferences.h"
#include "ui_preferences.h"

Preferences::Preferences(QWidget *parent) :
    QDialog(parent),
    ui(new Ui::Preferences)
{
    ui->setupUi(this);
}

Preferences::~Preferences()
{
    delete ui;
}

void Preferences::on_pushButton_clicked()
{
    /HERE THE WHOLE PROGRAM CLOSES. I WANT ONLY THE PREFERENCES DIALOG TO CLOSE, THE INDICATOR TO STAY
    close();
} 
```

首选项.h：

```
#ifndef PREFERENCES_H
#define PREFERENCES_H

#include <QDialog>

namespace Ui {
class Preferences;
}

class Preferences : public QDialog
{
    Q_OBJECT

public:
    explicit Preferences(QWidget *parent = 0);
    ~Preferences();

private slots:
    void on_pushButton_clicked();

private:
    Ui::Preferences *ui;
};

#endif // PREFERENCES_H 
```

图标.qrc：

错误.png

文件error.png在这里：http: [//i.imgur.com/beSvX.png](http://i.imgur.com/beSvX.png)

将上述所有文件保存到同一目录并编译为：

```
qmake -project
qmake *.pro
qmake
make 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T08:35:20.467

做一个小测试，打开主窗口，不要关闭它。打开首选项窗口并关闭它。您的应用程序不应该以这种方式退出。现在关闭主窗口，应用程序将退出。这是因为 QApplication 属性“quitOnLastWindowClosed”默认设置为 true。你应该打电话

```
int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    a.setQuitOnLastWindowClosed(false);
    MainWindow w;
    w.show();

    return a.exec();
} 
```

另请注意，每次要显示首选项时，您都会在创建新的首选项实例时从 MainWindow 泄漏内存。你可以这样做：

```
MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow),
    pref(NULL)
{
    // snap, your code goes here
}

void MainWindow::showpref(){
    if( ! pref )
        pref=new Preferences(this);

    pref->exec();
} 
```

# c# - 在 32 位 Windows 上 WTSQueryUserToken 后出现“Win32Exception：操作成功完成”（64 位工作）

> ID：11350720
> 
> 赞同：1
> 
> 时间：2012-07-05T18:54:36.360
> 
> 标签：c#, .net, winapi, interop, win32exception

我正在用 C# 开发一个小型 Windows 服务，它需要在某些时候与 Win32 API 进行互操作。我收到以下对我没有意义的异常：

`System.ComponentModel.Win32Exception: The operation completed successfully`

在此 C# 代码段的最后一行之后：

```
var sessionId = Kernel32.WTSGetActiveConsoleSessionId();
var userTokenPtr = new IntPtr();
if (!WtsApi32.WTSQueryUserToken(sessionId, out userTokenPtr))
{
    throw new Win32Exception(Marshal.GetLastWin32Error());
} 
```

这是我在声明`WTSQueryUserToken`中的方式`WtsApi32`：

```
[DllImport("Wtsapi32.dll", EntryPoint="WTSQueryUserToken")]
[return: MarshalAs(UnmanagedType.Bool)]
public static extern bool WTSQueryUserToken
(
    [In, MarshalAs(UnmanagedType.U8)] ulong sessionId, 
    [Out] out IntPtr phToken
); 
```

一些事实：

*   这在 64 位 Win7 上完美运行，但**在 32 位 Win7 上失败**。
*   执行此操作时不可能达到[10,000 个句柄限制](http://support.microsoft.com/kb/327699)，这是一个非常小的 Windows 服务中的第一个 Win32 调用。
*   我认为可能存在一些潜在的 Win32 错误，但一些错误用 0 覆盖了错误代码，从而给了我“成功”错误消息，但我不知道如何确认甚至诊断这一点。
*   当我捕捉到异常时，sessionId 为 1，userTokenPtr 为 0。但是，GetLastError 返回 0，所以我不知道发生了什么。
*   **我发现这个问题的几乎所有答案都与[用户控件的不当处置有关](http://nomagichere.blogspot.com.ar/2008/03/systemcomponentmodelwin32exception-is.html)。由于这是一项 Windows 服务，*因此并非如此*。**

我猜我的 WTSQueryUserToken 声明一定有问题，因为它只在 32 位 Windows 上失败，这让我认为这是一个编组问题。但是，我仍然看不到它可能是什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:04:59.173

我们将您的 sessionId 参数定义为 ac# ulong - 一个无符号的 64 位整数，而实际的函数导出需要一个 Win32 ulong - 一个无符号的 32 位整数。

[c# ulong数据类型](http://msdn.microsoft.com/en-us/library/t98873t4%28v=vs.71%29.aspx)

[Win32 数据类型](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383751%28v=vs.85%29.aspx#LONG)

# java - Collections.newSetFromMap(»ConcurrentHashMap«) 与 Collections.synchronizedSet(»HashSet«)

> ID：11350723
> 
> 赞同：15
> 
> 时间：2012-07-05T18:54:42.963
> 
> 标签：java, collections, concurrency, thread-safety, hashset

显然，有两种方法可以使用 Java 的实用程序类来获取[线程安全的](https://en.wikipedia.org/wiki/Thread_safety) [HashSet实例。](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/HashSet.html)[`Collections`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Collections.html)

*   [Collections.newSetFromMap](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Collections.html#newSetFromMap(java.util.Map)) ( [ConcurrentHashMap](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentHashMap.html) )
*   [Collections.synchronizedSet](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Collections.html#synchronizedSet(java.util.Set)) ( [HashSet](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/HashSet.html) )

我问：

*   它们有何不同？
*   哪个，在什么情况下，比另一个更受欢迎？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-05T19:04:03.923

你可能想到的是

```
Set<Type> set = Collections.newSetFromMap(new ConcurrentHashMap<Type, Boolean>()); 
```

这支持并发更新和读取。它的迭代器不会抛出 ConcurrentModicationException。然而

```
Set<Type> set = Collections.synchronizedSet(new HashSet<Type()); 
```

重量更轻，但一次只允许一个线程访问集合。如果要对其进行迭代，则需要显式锁定该集合，如果您不以安全的方式更新它（在迭代时），您仍然可以获得 CME

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-05T18:59:00.717

第一个返回一个 Set 基本上具有与作为参数传递的映射相同的线程安全和性能保证。如果地图不是线程安全的，那么集合也不会是线程安全的。您通常使用此方法从并发映射创建并发集，因为 API 中没有 ConcurrentHashSet。

第二个返回给定集合的代理，它的所有方法都是同步的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-11T10:32:05.737

实际上你可能会得到几个 Set 线程安全的实现。

一、Collections.synchronizedSet(new HashSet

我不会推荐这个解决方案。它本身是线程安全的，在并发环境中仍然必须小心使用。看：

```
Stack stack = new SynchronizedArrayStack(new ArrayStack());
...
// don't do this in a multi-threaded environment
if (!stack.isEmpty()) {
  stack.pop();              // can throw IllegalStateException
} 
```

因此，您必须使用客户端锁定：

```
synchronized(stack) {
  if (!stack.isEmpty()) {
    stack.pop();
  }
} 
```

二、Set 接口的第二种可选并发实现 - CopyOnWriteArraySet。但是，此解决方案不应在您期望进行多次搜索或插入的环境中使用。但是每个元素的迭代成本 O(1) 比 HashSet 快，并且它有一个优势，在某些应用程序中非常引人注目。

三、最后一个使用CuncurrentHashMap的实现：

```
Collections.newSetFromMap(new ConcurrentHashMap<Type, Boolean>()); 
```

它使用 java.util.concurrent.locks.Lock 的实现。该映射将自身划分为可以单独锁定的部分，从而提高了并发性。因此，您应该在最后两个选项之间进行选择。

Thera 也是有序集合实现的选项。我建议你阅读`Java Generics and Collections` 章节`11.5 Collections and Thread Safety`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-07T12:51:04.847

Collections API 将地图的构建留给客户端，如下所示：

```
ConcurrentHashMap<String, Boolean> conMap = new   ConcurrentHashMap<String, Boolean>();
Set<String> users = Collections.newSetFromMap(conMap);
System.out.println("Users: " + users);
users.add("Jon");//results in adding to the conMap instance
users.add("Tyron");
System.out.println("Users: " + users);
System.out.println("conMap = " + conMap); 
```

添加到集合也添加到地图

用户：[Tyron, Jon] conMap = {Tyron=true, Jon=true}

```
conMap.put("Jubin", Boolean.FALSE);
System.out.println("Users: " + users);
System.out.println("conMap = " + conMap); 
```

添加到地图也会导致添加到集合

用户：[Tyron, Jubin, Jon] conMap = {Tyron=true, Jubin=false, Jon=true}

ConcurrentHashMap.newKeySet 使用 KeySetView 创建新的 HashMap

```
ConcurrentHashMap.KeySetView<String, Boolean> keySetView = ConcurrentHashMap.newKeySet();
keySetView.add("Feba");
System.out.println("keySetView = " + keySetView);
System.out.println("keySetView.getMap() = " + keySetView.getMap()); 
```

keySetView = [Feba] keySetView.getMap() = {Feba=true}

```
keySetView.getMap().put("BeN",Boolean.TRUE);
System.out.println("keySetView = " + keySetView);
System.out.println("keySetView.getMap() = " + keySetView.getMap()); 
```

keySetView = [BeN, Feba] keySetView.getMap() = {BeN=true, Feba=true}

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-07-05T18:58:51.423

你误会了。newSetFromMap() 不提供线程安全。再次检查 Javadoc。

还有一个小问题就是这两种方法的输入类型不同。

# php - javascript + 使用 URL 发送多个字符串

> ID：11350725
> 
> 赞同：0
> 
> 时间：2012-07-05T18:54:51.370
> 
> 标签：php, javascript, xml, get

我有一个脚本，它调用另一个 php 页面并使用 PHP get 传递值。

一个变量 q 与 URL 一起发送，其中 str 是一个变量。

```
xmlhttp.open("GET","getdata.php?q="+str,true); 
```

我有几个要在 URL 字符串中发送的多个变量。

如何发送多个变量。

沿着：

```
xmlhttp.open("GET","getdata.php?q="+str+"y="+str2+"z="+str3,true); 
```

然后 URL 将类似于

```
page.php?q=Peter&y=John&z=Smith 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-05T18:57:21.803

您需要用 & 号分隔它们，并且可能也对它们进行 URL 编码：

```
xmlhttp.open("GET","getdata.php?"
    + "q=" + encodeURIComponent(str)
   + "&y=" + encodeURIComponent(str2)
   + "&z=" + encodeURIComponent(str3), true); 
```

另外，没问题；）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T18:58:24.970

似乎您只是忘记了与号：

```
xmlhttp.open("GET","getdata.php?q="+str+"&y="+str2+"&z="+str3,true);
                                         ^          ^ 
```

但是，更重要的是，您需要[转义字符串](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)：

```
str = encodeURIComponent(str); 
```

在将它们用作 url 参数之前。另请参阅[本文](http://xkr.us/articles/javascript/encode-compare/)和有关编码功能的[问题。](https://stackoverflow.com/q/75980/1048572)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T18:57:39.180

您需要在字符串之间添加一个＆符号：

```
xmlhttp.open("GET","getdata.php?q="+str+"&y="+str2+"&z="+str3,true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-05T18:57:47.200

您实际上就在那里，您的请求/uri 中唯一缺少的是请求参数之间的 & 符号：

```
xmlhttp.open("GET","getdata.php?q="+str+"&y="+str2+"&z="+str3,true); 
```

# java - 如何将我的 Eclipse 项目转换为较早的 Java 版本？

> ID：11350733
> 
> 赞同：26
> 
> 时间：2012-07-05T18:55:30.043
> 
> 标签：java, eclipse, backwards-compatibility

我在 Eclipse 中有一个项目，它以前使用过 JRE7 并引用了 JRE7 系统库。我现在绝对需要它在 JRE6 中运行。我没有使用任何 Java 7 特定语法，因此源代码本身是完全兼容的。这是我已经做的：

*   我安装了JDK6。
*   然后我转到**Window > Preferences > Java > Installed JREs**并将 JRE6 设置为默认值。
*   **我将项目的构建路径**配置为引用 JRE6 系统库而不是 JRE7 系统库。
*   最后我转到**运行配置> JRE**并将其设置为在 JRE6 中运行。

在最后一步之后，对话框顶部立即显示一条消息，内容为：

> JRE 与项目 .class 文件不兼容：1.7

当我运行项目时，我收到以下错误消息：

```
java.lang.UnsupportedClassVersionError: ExampleProcessingApp : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:73)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:212)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:314)
    at sun.applet.AppletClassLoader.loadClass(AppletClassLoader.java:146)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at sun.applet.AppletClassLoader.loadCode(AppletClassLoader.java:608)
    at sun.applet.AppletPanel.createApplet(AppletPanel.java:798)
    at sun.applet.AppletPanel.runLoader(AppletPanel.java:727)
    at sun.applet.AppletPanel.run(AppletPanel.java:380)
    at java.lang.Thread.run(Thread.java:679) 
```

正如我之前提到的，该项目的实际代码与 Java 6 语法没有什么不同，因此它将在 JRE6 中运行。所以大概我需要以某种方式从源代码重新编译所有 .class 文件。我认为 Eclipse 会自动执行此操作。有任何想法吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-07-05T19:00:26.557

首先，清理你的项目：

项目 > 清洁

如果这不能解决问题...

其次检查您的项目特定的 java 编译器：

项目 > 属性 > Java 编译器

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-12-15T15:39:33.627

Colin 提供的第二种方法对我有用。

以下是该方法所有步骤的直观表示：

![在此处输入图像描述](../Images/df93f0ed3b86431456bcb12bd0834cf3.png) ![在此处输入图像描述](../Images/beab9cb3ecb1439d1ae9e64dd258f267.png) ![在此处输入图像描述](../Images/c2d489d00b5c061855e3e03ef0b55394.png) ![在此处输入图像描述](../Images/25616b2bb1042a3b9f94fd9659708eb8.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-05T19:00:23.393

> 我认为 Eclipse 会自动执行此操作。有任何想法吗？

除非您要求 Eclipse 这样做，否则 Eclipse 不会清理所有项目。它只清理您修改过的源的生成类文件。您应该对解决方案进行干净构建，重新构建所有内容并再次运行，它应该可以正常工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-12-27T09:42:10.210

谢谢大家。虽然它已经解决了，但我想添加另一种方法来添加另一种风味。

* * *

可以通过在文件 project_directory/.settings/org.eclipse.jdt.core.prefs 中手动编辑项目首选项，然后在 eclipse 中刷新项目来完成。

[![从 1.7 更改为 1.6](../Images/e798d3a87a1595ec03622b332749c3af.png)](https://i.stack.imgur.com/QWFGf.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-08-30T14:42:12.707

我遇到了一个清理项目并没有解决问题的案例。实际上，我必须关闭并重新打开特定项目才能使其正常工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-06T11:16:23.780

更改**项目->属性->Java编译器->编译器合规级别**

# sql - SQL -- SELECT 语句 -- 将字符串连接到

> ID：11350739
> 
> 赞同：1
> 
> 时间：2012-07-05T18:55:46.217
> 
> 标签：sql

我有一个 SQL 问题。除了我以粗体突出显示的部分之外，在下面的 SELECT 语句中一切正常。我想要做的是允许用户在数据库中搜索特定的规则。不幸的是，我实际上没有 Rule 列，因此我需要连接某些字段值以创建一个字符串，用于与用户的搜索文本进行比较。

知道为什么粗体部分不起作用吗？理论上，我希望这条语句检查字符串“Rule”+part_num（其中part_num 是part_num 字段中包含的值）是否等于searchtext 的值（searchtext 的值是从我的PHP 脚本中获得的）。

我为 SQL 目的对连接字符串进行了一些研究，但似乎没有一个符合要求。有人有什么建议吗？

```
SELECT id, 
       part_num, 
       part_title, 
       rule_num, 
       rule_title, 
       sub_heading_num, 
       sub_heading, 
       contents 
FROM   rules 
WHERE  part_title LIKE "%'.$searchtext.'%" 
        OR rule_title LIKE "%'.$searchtext.'%" 
        OR sub_heading LIKE "%'.$searchtext.'%" 
        OR contents LIKE "%'.$searchtext.'%" 
        OR "rule" + part_num LIKE "%'.$searchtext.'%"  --RULE PLUS PART_NUM DOESN'T WORK
ORDER  BY id; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:00:04.660

由于您没有指定使用哪个数据库，我将假设 SQL Sever。

在 SQL Server 中，字符串是用单引号`'I'm a string'`而不是双引号指定的。

有关示例，请参阅MSDN 上的[+（字符串连接）](http://msdn.microsoft.com/en-us/library/aa276862%28v=sql.80%29.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:03:06.977

另一种可能性是 part_num 是一个数字。如果是这样，请在连接之前将数字转换为字符串 (varchar)。

# r - 如何删除由 R（或 Excel）中不同列中的两个单元格定义的重复记录

> ID：11350740
> 
> 赞同：0
> 
> 时间：2012-07-05T18:55:54.610
> 
> 标签：r, duplicates

我想根据顺序颠倒的两个单元格中的值的组合删除列表中的重复记录。我使用 melt 从矩阵中提取列表，但它需要一个完整的矩阵，因此每条记录都有一个副本。例如，我的数据现在看起来像：

```
meltID   individual1   individual2   distance
42            A              B          14.0
72264         A              C          12.5
5399          C              A          12.5
92200         B              C          18.1 
```

第 72264 和 5399 行是重复的。

除了熔化之外，还有什么东西可以从三角矩阵中提取出来吗？或者R中有其他方法可以做到这一点吗？

干杯，史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T18:59:08.120

`subset(yourData, individual < individual2)`或者`subset(yourData, individual <= individual2)`如果你想要对角线。

# mysql - 索引是否适用于 MySQL 中的 LIKE 语句？

> ID：11350742
> 
> 赞同：1
> 
> 时间：2012-07-05T18:55:54.803
> 
> 标签：mysql, indexing

我有一张桌子`(id, title)`，`id`PK在哪里。对于查询`SELECT * FROM table WHERE title LIKE "%stackoverflow%"`，我尝试了索引`title`和全文索引`title`。我曾经`EXPLAIN`检查索引是否有效，但两者都不起作用。

我被告知 index 不适用于`LIKE "%...%"`. 是这样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:04:55.707

noup 它不会工作，但是如果你的索引是 'xxx%' 它会工作，

另一件事是你的 MySQL 版本早于 5.6 你的引擎必须是 MyIsam 或 Aria，但它不能是 Innodb 有一个文本索引

# c++ - 原始位图数据到 jpeg 或 png C++

> ID：11350752
> 
> 赞同：6
> 
> 时间：2012-07-05T18:56:16.127
> 
> 标签：c++, bitmap, png, jpeg, libpng

我有字节数组，其中每三个字节描述 1 个像素（RGB）。任务是将其转换为 jpeg 或 png。

实际上，我正在使用 Zint（用于生成条形码的开源库），它使用 libpng 生成图像文件并将其保存到文件系统，但在 Zint 中，除了生成图像之外的函数 png_plot() 还将其保存在磁盘上，这是不可取的。

结果我认为有两种方法：
1.从位图字节数组到bmp-> jpeg / png（使用其他一些lib）
2.编写钩子或类似于png_plot（）

你能给我一些建议吗？谢谢你。

更新：对于@peacemaker

```
 FILE *f;

zint_symbol *my_symbol;

my_symbol = ZBarcode_Create();

ZBarcode_Encode_and_Buffer(my_symbol, (unsigned char *)argv[1], 0, 0);

f = fopen("bitmap.bmp", "w");

fwrite(my_symbol->bitmap, sizeof(*(my_symbol->bitmap)), my_symbol->bitmap_height * my_symbol->bitmap_width, f);

ZBarcode_Delete(my_symbol);

fclose(f); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-14T15:13:07.833

为了在图像格式之间进行转换，最简单的方法是使用由[MFC](http://msdn.microsoft.com/en-us/library/d06h2x6e%28v=vs.90%29.aspx)和[ATL](http://msdn.microsoft.com/en-us/library/t9adwcde%28v=vs.90%29.aspx)共享并在头文件 atlimage.h 中定义的[CImage类。](http://msdn.microsoft.com/en-us/library/bwea7by5%28v=vs.90%29.aspx)

```
CImage image; 
HRESULT res = image.Load("in.bmp");
image.Save("out.jpg");
image.Save("out.gif");
image.Save("out.png");
image.Save("out.tif"); 
```

* * *

如果您有一个 RGB 缓冲区并想创建一个位图：只需创建一个位图头并将其保存到文件中，然后将 RGB 缓冲区添加到其中。

要创建头文件，您可以使用头文件 WinGDI.h 中定义的[GDI中的](http://msdn.microsoft.com/en-us/library/windows/desktop/dd145203%28v=vs.85%29.aspx)[BITMAPFILEHEADER](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183374%28v=vs.85%29.aspx)、[BITMAPINFOHEADER](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183376%28v=vs.85%29.aspx)和[RGBQUAD](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162938%28v=vs.85%29.aspx)结构

以下是有关如何填充标题数据的示例：

```
BITMAPINFOHEADER bmpInfoHdr;

bmpInfoHdr.biSize = sizeof(BITMAPINFOHEADER);
bmpInfoHdr.biHeight = nHeight;
bmpInfoHdr.biWidth =  nWidthPadded;
bmpInfoHdr.biPlanes = 1;
bmpInfoHdr.biBitCount = bitsPerPixel;           
bmpInfoHdr.biSizeImage = nHeight * nWidthPadded * nSPP; 
bmpInfoHdr.biCompression =  BI_RGB; 
bmpInfoHdr.biClrImportant = 0;  
bmpInfoHdr.biClrUsed = 0;
bmpInfoHdr.biXPelsPerMeter = 0;
bmpInfoHdr.biYPelsPerMeter = 0;
bmpFileHdr.bfType = BITMAP_FORMAT_BMP;
bmpFileHdr.bfSize =  (DWORD) (sizeof(BITMAPFILEHEADER) + bmpInfoHdr.biSize +
                      sizeof(RGBQUAD)*numColors + bmpInfoHdr.biSizeImage);
bmpFileHdr.bfReserved1 = 0;
bmpFileHdr.bfReserved2 = 0;
bmpFileHdr.bfOffBits = (DWORD) (sizeof(BITMAPFILEHEADER) + bmpInfoHdr.biSize + 
                        sizeof(RGBQUAD)*numColors); 
```

请注意，位图是倒置存储的，并且图像的宽度必须在 DWORD 上对齐，RLE 压缩的位图除外。（它们必须是 4 字节的倍数，如有必要，请添加填充）。

```
if ((nWidth%4) != 0)
    nPadding = ((nWidth/4) + 1) * 4; 
```

保存缓冲区时，将所需的填充添加到每一行...

总而言之，这些是从 rgb 缓冲区创建位图文件所需的步骤：

```
//1\. create bmp header 

//2\. save header to file:
 write(file, &bmpFileHdr, sizeof(BITMAPFILEHEADER));
 write(file, &bmpInfoHdr, sizeof(BITMAPINFOHEADER));
 write(file, &colorTable, numColors * sizeof(RGBQUAD));

//3\. add rgb buffer to file:
for(int h=0; h<nHeight; h++) {
   for(int w=0; w<nWidth; w++) {
      //3.a) add row to file
      //3.b) add padding for this row to file
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T06:35:25.903

我使用了 ATL 的 CImage 类。

```
int width=0, height=0;
char * val = "9788994774480"; 
zint_symbol *my_symbol;
my_symbol = ZBarcode_Create();

//ZBarcode_Encode_and_Buffer(my_symbol,(unsigned char *) val, 0, 0);
ZBarcode_Encode(my_symbol, (unsigned char *) val, 0);
ZBarcode_Buffer(my_symbol, 0);

height = my_symbol->bitmap_height;
width = my_symbol->bitmap_width;
char * imgBits = my_symbol->bitmap;

CImage img;
img.Create(width, height, 24 /* bpp */, 0 /* No alpha channel */);

int nPixel = 0;
for(int row = 0; row < height; row++)
{
    for(int col = 0; col < width; col++)
    {
        BYTE r = (BYTE)imgBits[nPixel];
        BYTE g = (BYTE)imgBits[nPixel+1];
        BYTE b = (BYTE)imgBits[nPixel+2];
        img.SetPixel(col, row , RGB(r, g, b));

        nPixel += 3;
    }
}

img.Save("CImage.bmp", Gdiplus::ImageFormatBMP);

ZBarcode_Delete(my_symbol); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-22T09:32:27.353

除了使用 SetPixel 之外，还有其他方法吗？我遇到了 SetPixel 的主要性能问题，需要一种替代方法...我尝试使用**CreateDIBSection**无济于事。条码显示倾斜且无法使用。这是我的代码：

```
void *bits = (unsigned char*)(my_symbol->bitmap);
HBITMAP hBitmap = CreateDIBSection(pDC->GetSafeHdc(), &info, DIB_RGB_COLORS, (void **)&pDestData, NULL, 0);
memcpy(pDestData, my_symbol->bitmap, info.bmiHeader.biSizeImage);
img.Attach(hBitmap); 
```

产生相同结果的另一个选项是：

```
 BITMAPINFO info;
    BITMAPINFOHEADER BitmapInfoHeader;    
    BitmapInfoHeader.biSize = sizeof(BITMAPINFOHEADER);   
    BitmapInfoHeader.biWidth = my_symbol->bitmap_width;
    BitmapInfoHeader.biHeight = -(my_symbol->bitmap_height);
    BitmapInfoHeader.biPlanes = 1;   
    BitmapInfoHeader.biBitCount = 24;   
    BitmapInfoHeader.biCompression = BI_RGB;  
    BitmapInfoHeader.biSizeImage = 0;   
    BitmapInfoHeader.biXPelsPerMeter = 0;   
    BitmapInfoHeader.biYPelsPerMeter = 0;   
    BitmapInfoHeader.biClrUsed = 0;   
    BitmapInfoHeader.biClrImportant = 0;

    info.bmiHeader = BitmapInfoHeader;

    HBITMAP hbmp = CreateDIBitmap(dc, &BitmapInfoHeader, CBM_INIT, (LPVOID *)my_symbol->bitmap, (LPBITMAPINFO)&info, DIB_RGB_COLORS);
    img.Attach(hbmp); 
```

# tsql - 在列上运行两次函数

> ID：11350753
> 
> 赞同：0
> 
> 时间：2012-07-05T18:56:19.507
> 
> 标签：tsql

假设我有一个数据库。让我们将此数据库称为 Utils。在`Utils`我有 2 个功能。好的，可以说我目前在 db 工作`MyDatabase`。我需要计算表格中的一些字段。这就是我目前的做法：我的 select 语句如下所示

```
SELECT *, 
   column1= UTILS.dbo.Function1(ID)
   column2 =UTILS.dbo.Function1(Name
   column3 =UTILS.dbo.Function1(Address)
INTO ##temp_table1 
FROM MyDatabase.dbo.Customers

SELECT *, 
   column1= UTILS.dbo.Function2(ID)
   column2 =UTILS.dbo.Function2(Name
   column3 =UTILS.dbo.Function2(Address)
INTO ##temp_table2
FROM MyDatabase.dbo.Customers 
```

问题在于我不仅要计算 3 列。我有大约 100 个。所以我真的不想重复 select 语句两次，因为如果发生更改，那么我必须在两个容易出错的地方更改它，使我的脚本非常长且难以阅读以及其他问题.

我的解决方案

```
 USE Utils; GO;    
    DECLARE @strSQL VARCHAR(MAX)
    SET @strSQL = '    
        SELECT *, 
               column1= UTILS.dbo.temp_function(ID)
               column2 =UTILS.dbo.temp_function(Name
               column3 =UTILS.dbo.temp_function(Address) '

    exec sp_rename 'UTILS.dbo.Function1' ,'temp_function'
    exec (@strSQL + 'into temp_table1 FROM Customers')
    exec sp_rename 'temp_function' ,'UTILS.dbo.Function1'

    exec sp_rename 'UTILS.dbo.Function2' ,'temp_function'
    exec (@strSQL + 'into temp_table2 FROM Customers')
    exec sp_rename 'temp_function' ,'UTILS.dbo.Function2' 
```

但我不喜欢这个解决方案，因为我必须更改数据库才能使用`sp_rename`. 这也让我谨慎。MSDN 建议不要这样做。

有什么好的方法可以克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T13:47:59.323

您可以通过如下更改解决方案轻松避免使用 sp_rename：

```
USE Utils; GO;    
DECLARE @strBaseSQL VARCHAR(MAX)
       ,@strSQL VARCHAR(MAX)

SET @strBaseSQL = '    
    SELECT *, 
           column1= UTILS.dbo.temp_function(ID)
           column2 =UTILS.dbo.temp_function(Name
           column3 =UTILS.dbo.temp_function(Address) '

SELECT @strSQL = REPLACE(@strBaseSQL, 'UTILS.dbo.temp_function', 'UTILS.dbo.function1')
EXEC (@strSQL + 'into temp_table1 FROM Customers')

SELECT @strSQL = REPLACE(@strBaseSQL, 'UTILS.dbo.temp_function', 'UTILS.dbo.function2')
EXEC (@strSQL + 'into temp_table2 FROM Customers') 
```

# haskell - Haskell 壁时振荡器

> ID：11350755
> 
> 赞同：1
> 
> 时间：2012-07-05T18:56:20.933
> 
> 标签：haskell, time

我正在寻找一个 Haskell 函数，它会产生一个值，该值会随着墙壁时间的流逝而缓慢变化（并且可能会在一段时间后回绕）。我真的不介意它是`IO Integer`或`IO Double`还是什么。我只想要一个随着挂墙时间的流逝而缓慢变化的值。

大概在`time`包裹深处的某处埋藏着一个答案。（或者也许`old-time`，但我认为它已被弃用？）但是，这个`time`包看起来真的*非常*复杂。而且我实际上并不*关心*时区或人类可读的时间表示或任何东西。我只想要一个随着挂墙时间的流逝而变化的数字。

谁能给我看一个简单的代码片段来做到这一点？（没有我花了三天时间试图弄清楚`time`包裹的复杂性......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:06:17.400

来自[真实世界的 Haskell](http://book.realworldhaskell.org/read/systems-programming-in-haskell.html)书：

```
Prelude> import System.Time
Prelude System.Time> getClockTime
Loading package old-locale-1.0.0.2 ... linking ... done.
Loading package old-time-1.0.0.6 ... linking ... done.
Thu Jul  5 20:04:22 BST 2012
Prelude System.Time> getClockTime >>= (\(TOD sec _) -> return sec)
1341515116
Prelude System.Time> getClockTime >>= (\(TOD sec _) -> return sec)
1341515118
Prelude System.Time> getClockTime >>= (\(TOD sec _) -> return sec)
1341515121 
```

# java - jsf 2.0 (myfaces) 中的 ajax 调用，在渲染完成之前调用 ajax 标签中的 onevent Javascript 函数

> ID：11350769
> 
> 赞同：11
> 
> 时间：2012-07-05T18:57:26.250
> 
> 标签：java, javascript, jsf-2, dojo

这是我第一次在论坛上提问，因为通常我的问题已经被提问和回答了。我还没有找到适合我的这个问题的答案，所以这里是：

我在 JSF 2.0 中进行 Ajax 调用，如下所示：

```
< f :ajax listener="#{myReferenceController.clearRequiredReferenceNumber}"
    onevent="resetFocus" execute="@form"
    render=":resultsForm:ResultsDisplay" /> 
```

侦听器中的所有内容都运行良好，然后在我的 .xhtml 页面中的数据表中按预期呈现数据。问题是我调用的 Javascript`onevent`似乎在渲染完成之前被调用，因此将焦点重置到我的列的过程`datatable`不起作用，因为`datatable`删除然后重新添加到Ajax 完成重新渲染时的 DOM。

我正在我的 Javascript 中查找“成功”的状态，希望此时渲染已经完成。唉，事实并非如此，我的`getElementById`（实际上`dojo.byId`）没有在数据表中找到元素。我知道我的 Javascript 函数在正常情况下工作，因为我在没有 Ajax 调用的情况下调用相同的函数，并且在那里一切正常。

如果我可以避免在表格中呈现我试图将焦点设置到的单元格，那就太好了，但是我的听众正在 ajax 调用中对这个单元格进行更改。我不知所措，所以对此的任何想法将不胜感激。

-- 对 Balusc 的回应（听说过你的好消息，顺便说一句）

嗯，我认为我实际上是在正确的轨道上，但似乎仍然遇到了麻烦。我正在检查“成功”，即使成功，也无法在这里设置焦点。这是我正在检查“成功”的 Javascript 函数：此函数在另一种情况下工作，它不附加到 Ajax 事件。

```
function resetFocus(data) {
    var theRow = dojo.byId("resultsForm:selectedRow").value;               
    if (data.status == "success") {
        dojo.query('[widgetId]',dojo.byId('theResultsDataTable'))
            .forEach(function(node) {
                var widget = dijit.byNode(node);
                var theId = widget.attr("id")                                             
                if (theId.indexOf(':' + theRow + ':') != -1) {
                    if (theId.indexOf('theOrppoNum') != -1) {
                        widget.focus();
                        widget.attr("isFocused",true);
                    }
                }
            });
    }
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-05T19:29:02.780

附加到`onevent`属性的函数实际上将被调用**3**次。一次是在发送ajax 请求之前，一次是在ajax 响应到达之后，一次是在成功更新HTML DOM 时。您应该为此检查`status`给定数据参数的属性。

```
function onEventFunction(data) {
    var status = data.status; // Can be "begin", "complete" or "success".

    switch (status) {
        case "begin": // Before the ajax request is sent.
            // ...
            break;

        case "complete": // After the ajax response is arrived.
            // ...
            break;

        case "success": // After update of HTML DOM based on ajax response..
            // ...
            break;
    }
} 
```

因此，在您的特定情况下，您只需添加检查状态是否为`success`.

```
function resetFocus(data) {
    if (data.status == "success") {
        // Do your job here.
    }
} 
```

# python - 按子字符串标准过滤 pandas DataFrame

> ID：11350770
> 
> 赞同：709
> 
> 时间：2012-07-05T18:57:34.047
> 
> 标签：python, string, pandas, dataframe

我有一个带有一列字符串值的 pandas DataFrame。我需要根据部分字符串匹配选择行。

像这样的成语：

```
re.search(pattern, cell_in_question) 
```

返回一个布尔值。我熟悉的语法，`df[df['A'] == "hello world"]`但似乎无法找到对部分字符串匹配执行相同操作的方法，例如`'hello'`.

* * *

## 回答 #1

> 赞同：1140
> 
> 时间：2012-07-17T21:52:18.983

根据 github issue [#620](https://github.com/pydata/pandas/issues/620)，看起来您很快就可以执行以下操作：

```
df[df['A'].str.contains("hello")] 
```

更新：[矢量化字符串方法（即 Series.str）](http://pandas.pydata.org/pandas-docs/stable/text.html#text-string-methods)在 pandas 0.8.1 及更高版本中可用。

* * *

## 回答 #2

> 赞同：337
> 
> 时间：2014-11-10T17:05:17.600

我在 ipython 笔记本的 macos 上使用 pandas 0.14.1。我尝试了上面建议的行：

```
df[df["A"].str.contains("Hello|Britain")] 
```

并得到一个错误：

> 无法使用包含 NA / NaN 值的向量进行索引

但是当添加“==True”条件时它工作得很好，如下所示：

```
df[df['A'].str.contains("Hello|Britain")==True] 
```

* * *

## 回答 #3

> 赞同：259
> 
> 时间：2019-03-25T09:58:20.610

> ### 如何从 pandas DataFrame 中选择部分字符串？

这篇文章是为那些想要

*   在字符串列中搜索子字符串（最简单的情况）
*   搜索多个子字符串（类似于[`isin`](https://stackoverflow.com/q/19960077/4909087)）
*   匹配文本中的整个单词（例如，“blue”应该匹配“the sky is blue”而不是“bluejay”）
*   匹配多个完整的单词
*   了解“ValueError：无法使用包含 NA / NaN 值的向量进行索引”背后的原因

...并且想更多地了解哪些方法应该优于其他方法。

（PS：我看过很多关于类似主题的问题，我认为把这个留在这里会很好。）

> **友好的免责声明**，这篇文章很*长*。

* * *

### 基本子串搜索

```
# setup
df1 = pd.DataFrame({'col': ['foo', 'foobar', 'bar', 'baz']})
df1

      col
0     foo
1  foobar
2     bar
3     baz 
```

[`str.contains`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.contains.html)可用于执行子字符串搜索或基于正则表达式的搜索。搜索默认为基于正则表达式，除非您明确禁用它。

这是一个基于正则表达式的搜索示例，

```
# find rows in `df1` which contain "foo" followed by something
df1[df1['col'].str.contains(r'foo(?!$)')]

      col
1  foobar 
```

有时不需要正则表达式搜索，因此请指定`regex=False`禁用它。

```
#select all rows containing "foo"
df1[df1['col'].str.contains('foo', regex=False)]
# same as df1[df1['col'].str.contains('foo')] but faster.

      col
0     foo
1  foobar 
```

性能方面，正则表达式搜索比子字符串搜索慢：

```
df2 = pd.concat([df1] * 1000, ignore_index=True)

%timeit df2[df2['col'].str.contains('foo')]
%timeit df2[df2['col'].str.contains('foo', regex=False)]

6.31 ms ± 126 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
2.8 ms ± 241 µs per loop (mean ± std. dev. of 7 runs, 100 loops each) 
```

如果不需要，请避免使用基于正则表达式的搜索。

**寻址`ValueError`s**
有时，对结果执行子字符串搜索和过滤会导致

> ```
> ValueError: cannot index with vector containing NA / NaN values 
> ```

这通常是因为对象列中的混合数据或 NaN，

```
s = pd.Series(['foo', 'foobar', np.nan, 'bar', 'baz', 123])
s.str.contains('foo|bar')

0     True
1     True
2      NaN
3     True
4    False
5      NaN
dtype: object

s[s.str.contains('foo|bar')]
# ---------------------------------------------------------------------------
# ValueError                                Traceback (most recent call last) 
```

任何不是字符串的东西都不能应用字符串方法，所以结果是 NaN（自然）。在这种情况下，指定`na=False`忽略非字符串数据，

```
s.str.contains('foo|bar', na=False)

0     True
1     True
2    False
3     True
4    False
5    False
dtype: bool 
```

**如何一次将其应用于多个列？**
答案就在问题中。使用[**`DataFrame.apply`**](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html)：

```
# `axis=1` tells `apply` to apply the lambda function column-wise.
df.apply(lambda col: col.str.contains('foo|bar', na=False), axis=1)

       A      B
0   True   True
1   True  False
2  False   True
3   True  False
4  False  False
5  False  False 
```

下面的所有解决方案都可以使用按列的`apply`方法“应用”到多个列（这在我的书中是可以的，只要你没有太多的列）。

如果您有一个包含混合列的 DataFrame，并且只想选择对象/字符串列，请查看[`select_dtypes`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.select_dtypes.html).

* * *

### **多子串搜索**

这最容易通过使用正则表达式 OR 管道的正则表达式搜索来实现。

```
# Slightly modified example.
df4 = pd.DataFrame({'col': ['foo abc', 'foobar xyz', 'bar32', 'baz 45']})
df4

          col
0     foo abc
1  foobar xyz
2       bar32
3      baz 45

df4[df4['col'].str.contains(r'foo|baz')]

          col
0     foo abc
1  foobar xyz
3      baz 45 
```

您还可以创建术语列表，然后加入它们：

```
terms = ['foo', 'baz']
df4[df4['col'].str.contains('|'.join(terms))]

          col
0     foo abc
1  foobar xyz
3      baz 45 
```

有时，明智的做法是避开您的术语，以防它们包含可以解释为[正则表达式元字符的字符](https://docs.python.org/3/howto/regex.html#matching-characters)。如果您的条款包含以下任何字符...

```
. ^ $ * + ? { } [ ] \ | ( ) 
```

然后，您需要使用[`re.escape`](https://docs.python.org/3/library/re.html#re.escape)来*逃避*它们：

```
import re
df4[df4['col'].str.contains('|'.join(map(re.escape, terms)))]

          col
0     foo abc
1  foobar xyz
3      baz 45 
```

`re.escape`具有转义特殊字符的效果，因此它们被逐字处理。

```
re.escape(r'.foo^')
# '\\.foo\\^' 
```

* * *

### **匹配整个单词**

默认情况下，子字符串搜索搜索指定的子字符串/模式，无论它是否是全字。为了只匹配完整的单词，我们需要在这里使用正则表达式——特别是，我们的模式需要指定单词边界（`\b`）。

例如，

```
df3 = pd.DataFrame({'col': ['the sky is blue', 'bluejay by the window']})
df3

                     col
0        the sky is blue
1  bluejay by the window 
```

现在考虑，

```
df3[df3['col'].str.contains('blue')]

                     col
0        the sky is blue
1  bluejay by the window 
```

v/s

```
df3[df3['col'].str.contains(r'\bblue\b')]

               col
0  the sky is blue 
```

* * *

### **多个全词搜索**

与上面类似，除了我们`\b`在连接模式中添加了一个单词边界（ ）。

```
p = r'\b(?:{})\b'.format('|'.join(map(re.escape, terms)))
df4[df4['col'].str.contains(p)]

       col
0  foo abc
3   baz 45 
```

哪里`p`像这样，

```
p
# '\\b(?:foo|baz)\\b' 
```

* * *

### 一个很好的选择：使用[列表理解](https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions)！

因为你能！[你应该！](https://stackoverflow.com/questions/54028199/for-loops-with-pandas-when-should-i-care)它们通常比字符串方法快一点，因为字符串方法很难向量化并且通常具有循环实现。

代替，

```
df1[df1['col'].str.contains('foo', regex=False)] 
```

在列表组合中使用`in`运算符，

```
df1[['foo' in x for x in df1['col']]]

       col
0  foo abc
1   foobar 
```

代替，

```
regex_pattern = r'foo(?!$)'
df1[df1['col'].str.contains(regex_pattern)] 
```

在列表组合中使用[`re.compile`](https://docs.python.org/3/library/re.html#re.compile)（缓存您的正则表达式）+ ，[`Pattern.search`](https://docs.python.org/3/library/re.html#re.Pattern.search)

```
p = re.compile(regex_pattern, flags=re.IGNORECASE)
df1[[bool(p.search(x)) for x in df1['col']]]

      col
1  foobar 
```

如果“col”有 NaN，那么代替

```
df1[df1['col'].str.contains(regex_pattern, na=False)] 
```

利用，

```
def try_search(p, x):
    try:
        return bool(p.search(x))
    except TypeError:
        return False

p = re.compile(regex_pattern)
df1[[try_search(p, x) for x in df1['col']]]

      col
1  foobar 
```

* * *

### 部分字符串匹配的更多选项：[`np.char.find`](https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.core.defchararray.find.html#numpy.core.defchararray.find), [`np.vectorize`](https://docs.scipy.org/doc/numpy/reference/generated/numpy.vectorize.html), [`DataFrame.query`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.query.html).

除了`str.contains`和列表推导之外，您还可以使用以下替代方法。

**`np.char.find`**
仅支持子字符串搜索（阅读：无正则表达式）。

```
df4[np.char.find(df4['col'].values.astype(str), 'foo') > -1]

          col
0     foo abc
1  foobar xyz 
```

**`np.vectorize`**
这是一个循环的包装器，但比大多数 pandas`str`方法的开销要小。

```
f = np.vectorize(lambda haystack, needle: needle in haystack)
f(df1['col'], 'foo')
# array([ True,  True, False, False])

df1[f(df1['col'], 'foo')]

       col
0  foo abc
1   foobar 
```

可能的正则表达式解决方案：

```
regex_pattern = r'foo(?!$)'
p = re.compile(regex_pattern)
f = np.vectorize(lambda x: pd.notna(x) and bool(p.search(x)))
df1[f(df1['col'])]

      col
1  foobar 
```

**`DataFrame.query`**
通过 python 引擎支持字符串方法。这并没有提供明显的性能优势，但对于了解您是否需要动态生成查询仍然很有用。

```
df1.query('col.str.contains("foo")', engine='python')

      col
0     foo
1  foobar 
```

`query`有关方法和`eval`方法系列的更多信息，[请参阅使用 pd.eval() 在 pandas 中进行动态表达式评估](https://stackoverflow.com/questions/53779986/dynamic-expression-evaluation-in-pandas-using-pd-eval)。

* * *

### 推荐使用优先级

1.  （第一）`str.contains`，因为它的简单性和易于处理 NaN 和混合数据
2.  列表推导，因为它的性能（特别是如果您的数据是纯字符串）
3.  `np.vectorize`
4.  （最后的）`df.query`

* * *

## 回答 #4

> 赞同：60
> 
> 时间：2016-10-12T21:04:32.060

如果有人想知道如何执行相关问题：***“按部分字符串选择列”***

利用：

```
df.filter(like='hello')  # select columns which contain the word hello 
```

并通过部分字符串匹配选择行，传递`axis=0`给过滤器：

```
# selects rows which contain the word hello in their index label
df.filter(like='hello', axis=0) 
```

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2014-04-10T15:36:14.217

快速说明：如果您想根据索引中包含的部分字符串进行选择，请尝试以下操作：

```
df['stridx']=df.index
df[df['stridx'].str.contains("Hello|Britain")] 
```

* * *

## 回答 #6

> 赞同：22
> 
> 时间：2014-11-10T19:26:27.313

假设您有以下内容`DataFrame`：

```
>>> df = pd.DataFrame([['hello', 'hello world'], ['abcd', 'defg']], columns=['a','b'])
>>> df
       a            b
0  hello  hello world
1   abcd         defg 
```

您始终可以`in`在 lambda 表达式中使用运算符来创建过滤器。

```
>>> df.apply(lambda x: x['a'] in x['b'], axis=1)
0     True
1    False
dtype: bool 
```

这里的技巧是使用 中的`axis=1`选项`apply`将元素逐行传递给 lambda 函数，而不是逐列传递。

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2020-04-29T17:31:18.607

如果您需要对pandas 数据框列中的字符串进行*不区分大小写的搜索：*

```
df[df['A'].str.contains("hello", case=False)] 
```

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2021-05-29T08:16:45.537

您可以尝试将它们视为字符串：

```
df[df['A'].astype(str).str.contains("Hello|Britain")] 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2021-03-30T12:06:24.307

假设我们在 dataframe 中有一个名为“ENTITY”的列`df`。我们可以过滤我们的`df`, 以获得整个数据框`df`，其中“实体”列的行不包含“DM”，方法是使用如下掩码：

```
mask = df['ENTITY'].str.contains('DM')

df = df.loc[~(mask)].copy(deep=True) 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2012-07-06T17:08:46.797

这是我最终为部分字符串匹配所做的。如果有人有更有效的方法，请告诉我。

```
def stringSearchColumn_DataFrame(df, colName, regex):
    newdf = DataFrame()
    for idx, record in df[colName].iteritems():

        if re.search(regex, record):
            newdf = concat([df[df[colName] == record], newdf], ignore_index=True)

    return newdf 
```

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2021-02-16T09:41:59.340

一个更通用的示例 - 如果在字符串中查找单词的一部分或特定单词：

```
df = pd.DataFrame([('cat andhat', 1000.0), ('hat', 2000000.0), ('the small dog', 1000.0), ('fog', 330000.0),('pet', 330000.0)], columns=['col1', 'col2']) 
```

句子或单词的特定部分：

```
searchfor = '.*cat.*hat.*|.*the.*dog.*' 
```

创建显示受影响行的列（可以随时根据需要过滤掉）

```
df["TrueFalse"]=df['col1'].str.contains(searchfor, regex=True)

    col1             col2           TrueFalse
0   cat andhat       1000.0         True
1   hat              2000000.0      False
2   the small dog    1000.0         True
3   fog              330000.0       False
4   pet 3            30000.0        False 
```

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2019-11-20T13:22:49.663

对于带有特殊字符的字符串，使用 contains 效果不佳。虽然找到工作。

```
df[df['A'].str.find("hello") != -1] 
```

* * *

## 回答 #13

> 赞同：3
> 
> 时间：2020-02-20T13:06:07.517

也许您想在 Pandas 数据框的所有列中搜索一些文本，而不仅仅是在它们的子集中。在这种情况下，以下代码将有所帮助。

```
df[df.apply(lambda row: row.astype(str).str.contains('String To Find').any(), axis=1)] 
```

警告。这种方法虽然很方便，但速度相对较慢。

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2021-06-24T01:40:21.803

我的 2c 价值：

我做了以下事情：

```
sale_method = pd.DataFrame(model_data['Sale Method'].str.upper())
sale_method['sale_classification'] = \
    np.where(sale_method['Sale Method'].isin(['PRIVATE']),
             'private',
             np.where(sale_method['Sale Method']
                      .str.contains('AUCTION'),
                      'auction',
                      'other'
             )
    ) 
```

* * *

## 回答 #15

> 赞同：2
> 
> 时间：2019-06-01T14:56:35.663

在此之前有一些答案可以完成所要求的功能，无论如何我想展示最普遍的方式：

```
df.filter(regex=".*STRING_YOU_LOOK_FOR.*") 
```

通过这种方式，无论以何种方式编写，您都可以获得您要查找的列。

（显然，您必须为每种情况编写正确的正则表达式）

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2022-02-22T20:23:22.397

有点类似于@cs95 的答案，但在这里您不需要指定引擎：

```
df.query('A.str.contains("hello").values') 
```

# java - 如何为我使用 maven 创建的库生成 java doc 和源

> ID：11350777
> 
> 赞同：0
> 
> 时间：2012-07-05T18:57:51.307
> 
> 标签：java, maven, javadoc, m2eclipse

这可能是一个小问题，但我无法找到答案。我编写了一个名为 Utilities 的库并使用了 java doc 样式的注释。使用 maven（eclipse 中的 m2e 插件）。我正在使用 Maven 安装选项。我正在获取一个 jar 文件，并将该 jar 文件推送到中央存储库并在另一个项目中重用相同的库。我能够使用该库并成功完成我的项目，但是当我执行 ctrl 单击时，我无法从我的项目中看到库代码。当我将鼠标悬停在方法上时，我也无法看到参数描述。

我知道这是因为我的项目没有找到源代码和 java doc 。

那么如何为我的库生成源代码、java doc 并使用 maven 将它们附加到我的项目中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:07:57.230

看：

*   [Cookbook：如何附加源代码和 javadoc 工件？](http://maven.apache.org/plugin-developers/cookbook/attach-source-javadoc-artifacts.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:05:55.827

您需要使用在此链接中找到的 Maven 源插件：

[http://maven.apache.org/plugins/maven-source-plugin/usage.html](http://maven.apache.org/plugins/maven-source-plugin/usage.html)

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-source-plugin</artifactId>
    <version>2.1.2</version>
    <executions>
        <execution>
            <id>attach-sources</id>
            <phase>verify</phase>
            <goals>
                <goal>jar-no-fork</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T19:05:56.200

您必须将源代码和 javadoc JAR 与库 JAR 一起部署。AFAIR 你可以使用：

```
$ mvn clean javadoc:jar source:jar deploy 
```

或者：

```
$ mvn clean deploy -DperformRelease=true 
```

# 也可以看看：

*   [如何部署 Javadoc jar 文件？](http://maven.apache.org/plugins/maven-javadoc-plugin/faq.html#How_to_deploy_Javadoc_jar_file)
*   [Maven 2：在您的项目中部署 Javadoc](http://garbuz.com/2010/08/01/maven-2-deploying-javadoc-with-your-project/)
*   [Maven 2：部署项目源](http://garbuz.com/2010/07/31/maven-2-deploying-project-sources/)
*   [将 javadocs 和源附加到 Maven 安装/部署](http://sea36.blogspot.no/2009/02/attaching-javadocs-and-sources-to-maven.html)

# android - 在android应用程序中使用grideview显示图像

> ID：11350785
> 
> 赞同：-5
> 
> 时间：2012-07-05T18:58:23.320
> 
> 标签：android

我尝试了许多在 gridview 中显示图像的代码，但应用程序在模拟器中关闭了。这是我的代码...

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);        
    final GridView ObjGrid = (GridView)findViewById(R.id.gridview);
    ObjGrid.setAdapter(new ImageAdapter(this));        
} 
```

ImageAdapter 类如上

```
public class ImageAdapter extends BaseAdapter {

int[] images = new int[]{
        R.drawable.pic1,
        R.drawable.pic2,
        R.drawable.pic3,
        R.drawable.pic4,
        R.drawable.pic5,
        R.drawable.pic6
    };
private Context cont;
public ImageAdapter(Context applicationContext) {
    cont = applicationContext;
}

@Override
public int getCount() {
    // TODO Auto-generated method stub
    return images.length;
}

@Override
public Object getItem(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

@Override
public long getItemId(int arg0) {
    // TODO Auto-generated method stub
    return arg0;
}

@Override
public View getView(int arg0, View ConvertView, ViewGroup arg2) {
    ImageView iv;
    if(ConvertView == null)
    {
        iv = new ImageView(cont);
        iv.setLayoutParams(new GridView.LayoutParams(180, 180));
        iv.setScaleType(ScaleType.CENTER_CROP);
        iv.setPadding(0, 8, 8, 8);          
    }
    else
    {           
        iv=(ImageView)ConvertView;
    }
    iv.setImageResource(images[arg0]);
    return null;
} 
```

}

请给我解决方案，如果有任何可能将项目文件提供给下载，那么这对我来说将非常有帮助......谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:06:40.130

您在 getView 方法中返回 null 。您应该在那里返回视图（在您的情况下，您正在生成的 ImageView），而不是 null！

# haskell - Coloring console output in windows

> ID：11350788
> 
> 赞同：4
> 
> 时间：2012-07-05T18:58:38.883
> 
> 标签：haskell, cmd, package, ghci, hackage

I was trying to find if it is possible to colour console output in windows system. I found that [Console - Ansi](http://hackage.haskell.org/packages/archive/ansi-terminal/0.5.0/doc/html/System-Console-ANSI.html) but i cant find any information about coloring output in windows prompt.

I woudl appreciate information about my problem.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:34:26.530

It's been a while, but I *think* the correct usage is:

```
setRGB [SetColor Foreground Yellow, SetColor Background Red]

```

to set yellow writing on a red background. Also `setTitle` followed by a `String` sets the console window title.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-28T17:33:46.470

It worked for me like this:

set the foregroundcolor to Yellow

```
 setSGR [SetColor Foreground Vivid Yellow] 
```

and then reset it to normal after putting your String on the screen

```
 putStrLn "ayellowstring"
    setSGR [Reset] 
```

You need

```
 import System.Console.ANSI 
```

to do this

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-05-09T08:40:10.623

PowerShell and the console setting will be the solution.Console only have 16 colors,but you can config any 16 colors you like(i.e. you can make gray scale console)

[this link explain how to](http://www.cnblogs.com/iiaijimaai/archive/2012/09/23/2659194.html)

# actionscript-3 - AS3：多个“获取”URLRequests 不起作用

> ID：11350789
> 
> 赞同：2
> 
> 时间：2012-07-05T18:58:48.330
> 
> 标签：actionscript-3, urlloader, urlrequest

我正在尝试通过使用带有 URLLoader 的 GET URLRequest 从服务器读取数据，它确实有效。问题是，它只能工作一次。

```
public class Settings
{
    private static var request:URLRequest;
    private static var loader:URLLoader;

    public static function getRequest(url:String):void
    {
        request = new URLRequest(url);
        request.method = URLRequestMethod.GET;

        loader = new URLLoader();
        loader.addEventListener(flash.events.Event.COMPLETE, responseHolder);
        loader.load(request);
    }
} 
```

每当我打开 Flash 应用程序并将其放入并调用 getRequest 时，我都会从 URLLoader 获得正确的数据。每当我之后调用它时，我仍然会收到响应并且 Event.COMPLETE 仍然被调度，但接收到的数据始终是从第一个 GET 获得的数据。只有当我关闭并重新打开应用程序时，GET 才会真正获取最新数据。

我还运行了一个远程调试会话来测试它，结果证明只有这个函数的第一次调用甚至与它试图读取的服务器进行通信。

我能想到的唯一解释是 URLRequest 和 URLLoader 在读取数据后没有被清除，所以当另一个 GET 被调用时，它们只是重用最后获取的数据而不尝试联系服务器。但我正在清除它们，如下所示：

```
 //in Settings class
    private static function responseHolder(e:flash.events.Event):void
    {
        request = null;
        loader.removeEventListener(flash.events.Event.COMPLETE, responseHolder);
        loader.close();
        loader = null;
    } 
```

我需要做些什么来重新启用 GET URLRequests 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-06T13:41:24.867

您应该尝试在 URL 末尾添加一个随机数，以防止浏览器缓存：

```
request = new URLRequest(url + "?n=" + Math.random()*10000); 
```

我知道这很丑，但它可能会起作用。

希望就是这样。

# php - 在 PHP 中解析 JSON 的正确方法是什么？

> ID：11350790
> 
> 赞同：-1
> 
> 时间：2012-07-05T18:58:50.850
> 
> 标签：php, json

我从 Node JS 服务返回以下 JSON 字符串：

```
"{\"success\":true,\"isavailable\":true}" 
```

当我尝试在 PHP 中使用 json_decode() 时，我在 var_dump 上得到以下信息：

```
string '{"success":true,"isavailable":true}' (length=35) 
```

所以，我开始做以下事情：

```
$str = str_replace("\"{", "'{", $str);
$str = str_replace("}\"", "}'", $str);
$str = str_replace('\"','"',$str); 
```

当我这样做时，我从返回最后一个错误和一个 NULL 值中得到一个语法错误。

那么，在 PHP 中解析这个 JSON 字符串的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:02:11.530

```
$obj = json_decode("{\"success\":true,\"isavailable\":true}");
echo $obj->success;
echo $obj->isavailable; 
```

**结果：**

```
11 
```

这里`1`代表`true`（您的 json 中的实际值），例如真实值。

[您可以在这个工作示例](http://codepad.org/kGxUNabC)中看到一个演示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:03:21.160

正确的解决方案（假设输入正是 OP 中的内容）是用于`trim()`在调用后摆脱前导和尾随双引号`stripslashes()`：

```
$str = '"{\"success\":true,\"isavailable\":true}"';
$str = trim( stripslashes( $str), '"');
var_dump( json_decode( $str)); 
```

现在，[你得到](http://viper-7.com/y8fyeI)：

```
object(stdClass)#1 (2) { ["success"]=> bool(true) ["isavailable"]=> bool(true) } 
```

我还确认该字符串似乎是双重编码的，因此它也可以正确解码：

```
$str = '"{\"success\":true,\"isavailable\":true}"';
var_dump( json_decode( json_decode( $str))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:01:22.407

采用

```
json_decode(stripslashes($json_string)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T19:15:13.797

您的输入无效，假设：

```
$this = '"{\"success\":true,\"isavailable\":true}"'; 
```

是你真正拥有的。

所以这不是真正的 json_decode 问题，而是斜杠和尾随引号。

您可以通过替换或修剪来修复它，就像上面提到的那样。

```
$obj = json_decode(trim(stripslashes('"{\"success\":true,\"isavailable\":true}\"'), '"')); 
```

要访问它，只需执行以下操作：

```
$obj->success 
```

和

```
$obj->isavailable 
```

你会得到 1 因为 true 是一个布尔值。

但就个人而言，您应该考虑转义响应，以避免这些对 JSON 字符串的“黑客攻击”。斜线和引号之类的东西不应该不转义地发送。

当然，如果这是您自己的 JSON 响应。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-05T19:00:27.773

`$parsed = json_decode($whatever);`

# haskell - 如何从我的 Windows XP 机器中清除 Haskell 安装？

> ID：11350793
> 
> 赞同：10
> 
> 时间：2012-07-05T18:58:54.720
> 
> 标签：haskell

我尝试卸载 Haskell 平台，但包数据库保持不变。如何从我的系统中彻底清除 Haskell？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-23T12:07:57.470

cabal 和 ghc 都维护了一些额外的数据，这些数据当前没有被平台安装程序卸载，但值得庆幸的是，它们表现良好并将其数据存储在适当的应用程序数据文件夹中。

假设您只安装了用户级别的包，在 windows 平台上删除它们的最简单方法是`%APPDATA%`在 windows 运行对话框或 windows 资源管理器栏中键入，这应该打开应用程序数据文件夹的根目录，然后删除`ghc`和`cabal`文件夹。

顺便说一句，在卸载平台之前，您可以使用命令`ghc-pkg list --user`查看安装了哪些用户级别的软件包，列表顶部将包括 ghc 存储本地用户文件的路径。显然，省略`--user`标志将提供系统范围的信息。

如果您不了解该`ghc-pkg`程序，请查看该程序，`ghc-pkg --help`因为您通常可以使用它解决软件包问题。

希望有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T10:59:23.010

在我的系统 (Windows XP) 上，Cabal 将文件存储在以下位置：

```
C:\Documents and Settings\username\Application Data\cabal
C:\Program Files\Haskell Platform\lib 
```

第一个位置用于“本地”包安装，第二个位置用于“全局”包安装。在 Windows 上，Cabal 通常默认为本地，但您可以要求它改为全局。

你可以直接*删除*下的文件夹`Documents and Settings`。HP 卸载程序应该已删除 下的所有内容`Program Files`，但如果您进行了一些全局安装，它可能无法正常工作。（？）

无论如何，这是我最好的猜测。HTH。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-05T19:45:28.990

您可以删除包目录的内容。我不确定它在哪里（在 Windows 上相当于 $HOME/.cabal），但是你可以从 GHCI 找到它：

```
:m System.Directory
getAppUserDataDirectory "cabal" 
```

编辑：我认为`$HOME/Application Data/cabal`如果你有更新版本的 Windows。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-06T00:43:03.237

Cabal也放在这里：
`C:\Users\%USERNAME%\AppData\Roaming\cabal\bin`

# iphone - Cocos2d if 语句逻辑不工作

> ID：11350795
> 
> 赞同：1
> 
> 时间：2012-07-05T18:59:05.097
> 
> 标签：iphone, if-statement, cocos2d-iphone, logic

if 语句是： `//these x & y do not affect the if statement they are used for the result 6 lines down. int x = enemy.position.x; int y = enemy.position.y; NSLog(@"%G,%G", leftJoystick.velocity.x, leftJoystick.velocity.y);`

```
if ((leftJoystick.stickPosition.x < 1 && leftJoystick.stickPosition.x > -1)&& leftJoystick.stickPosition.y > 0) {
    enemy.position = ccp(x,y-1);
    NSLog(@"North");
    return;
} 
```

在反馈中，它显示`-0.0544645,0.998516`有效并且它记录北，但`-0.0725357,0.997366`不起作用。我不明白为什么？

我正在尝试在 cocos2d 中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T20:40:06.920

您正在记录速度，但您的逻辑在位置上运行。把它弄清楚，也许答案会更清楚。

# .net - 如何创建/更新可能存在或不存在的 XML 节点？

> ID：11350798
> 
> 赞同：2
> 
> 时间：2012-07-05T18:59:12.370
> 
> 标签：.net, xml, linq, xpath

是否有可用的方法（即无需我创建自己的递归方法），用于给定的 xpath（或其他标识层次位置的方法）来创建/更新 XML 节点，如果该节点不存在，将在其中创建节点？如果父节点也不存在，则需要创建它。我确实有一个包含所有可能节点的 XSD。

即之前：

```
<employee>
   <name>John Smith</name>
</employee> 
```

想这样称呼：

```
CoolXmlUpdateMethod("/employee/address/city", "Los Angeles"); 
```

后：

```
 <employee>
       <name>John Smith</name>
       <address>
         <city>Los Angeles</city>
       </address>
    </employee> 
```

或者甚至是一种创建节点的方法，给定一个 xpath，如果父节点不存在，它将递归地创建它们？

就应用程序而言（如果重要的话），这是采用仅包含填充节点的现有 XML 文档，并从另一个系统向其添加数据。新数据可能已经在源 XML 中填充了值，也可能没有。

当然，这不是罕见的情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:01:18.637

好吧，我们所做的是创建一个表示 XML 的类（我们使用 XSD2Code 从 XSD 生成一个），当它被反序列化/序列化时，它可以为您做那种事情（XMLSerializer）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-25T08:06:58.857

Chris Knight 的解决方案有一个错误。如果你有：

```
<a></a>
<b>
  <a>
  </a>
</b> 

and do 
UpdateOrCreate ("<b><a>") 
it will update first node , not nested one. 
```

这是我的功能：

```
/// <summary>
/// Creates nessecary parent nodes using the provided Queue, and assigns the value to the last child node.
/// </summary>
/// <param name="ele">XElement to take action on</param>
/// <param name="nodes">Queue of node names</param>
/// <param name="value">Value for last child node</param>
/// <param name="attr1Name">Optional name for an attribute, can be null</param>
/// <param name="attr1Val">Optional value for an attribute, can be null</param>
/// returns created/updated element        
public static XElement UpdateOrCreateXmlNode(XElement ele, Queue<string> nodes, string value, string attr1Name = null, string attr1Val = null)
{            
    int fullQueueCOunt = nodes.Count;
    for (int i = 0; i < fullQueueCOunt; i++)
    {
        string node = nodes.Dequeue();
        XElement firstChildMatch = ele.Elements(node).FirstOrDefault();
        if (firstChildMatch == null)
        {
            XElement newChlid = new XElement(node);
            ele.Add(newChlid);
            ele = newChlid;
        }
        else
            ele = firstChildMatch;
    }
    if (attr1Name != null && attr1Val != null)
    {
        if (ele.Attribute(attr1Name) == null)
            ele.Add(new XAttribute(attr1Name, attr1Val));
        else
            ele.Attribute(attr1Name).Value = attr1Val;
    }
    ele.Value = value;
    return ele;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T21:13:36.517

我以前做过这样的事情。我正在使用 LINQ to XML。我为 XElement 创建了一个扩展方法，它采用节点名称队列和列表中最后一个节点的值。这是我做的扩展方法：

```
/// <summary>
    /// Creates nessecary parent nodes using the provided Queue, and assigns the value to the last child node.
    /// </summary>
    /// <param name="ele">XElement to take action on</param>
    /// <param name="nodes">Queue of node names</param>
    /// <param name="value">Value for last child node</param>
    public static void UpdateOrCreate(this XElement ele, Queue<string> nodes, string value)
    {
        string previousNodeName = "";
        int fullQueueCOunt = nodes.Count;
        for (int i = 0; i < fullQueueCOunt; i++)
        {
            string node = nodes.Dequeue();
            if (ele.Descendants(node).FirstOrDefault() == null)
            {
                if (!string.IsNullOrEmpty(previousNodeName))
                {
                    ele.Element(previousNodeName).Add(new XElement(node));
                }
                else
                {
                    // use main parent node if this is the first iteration
                    ele.Add(new XElement(node));
                }
            }
            previousNodeName = node;
        }
        // assign the value of the last child element
        ele.Descendants(previousNodeName).First().Value = value;
    } 
```

这是一个示例实现：

```
XElement element = XElement.Parse(
                "<employee>" +
                   "<name>John Smith</name>" +
                "</employee>");
            Queue<string> nodeQueue = new Queue<string>();
            nodeQueue.Enqueue("address");
            nodeQueue.Enqueue("city");
            element.UpdateOrCreate(nodeQueue, "myValue"); 
```

这将采用输入 XML：

```
<employee>
  <name>John Smith</name>
</employee> 
```

并将其更改为：

```
<employee>
  <name>John Smith</name>
  <address>
    <city>myValue</city>
  </address>
</employee> 
```

如果“地址”和/或“城市”节点已经存在，这也将起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-31T09:45:07.867

我自己也在为此苦苦挣扎，所以我想我会添加一个使用 C# 与 .Net 2.0 一起使用的答案。

```
private static void addOrUpdateNode(XmlDocument xmlDoc, string xpath, string value)
{
    XmlNode node = xmlDoc.SelectSingleNode(xpath);
    if (node == null)
    {
        //node does not exist, so create it
        string newNodeString = String.Format(
            "<city>{0}</city>", value); //as per OP's example
        StringReader sr = new StringReader(newNodeString);
        XmlTextReader reader = new XmlTextReader(sr);
        XmlNode newNode = xmlDoc.ReadNode(reader);
        //adding to root of document, you may want to
        //navigate to a different part of the doc
        xmlDoc.AppendChild(newNode);
    }
    else
    {
        node.Value = value;
    }
} 
```

请原谅我让它变得非常粗糙和未经测试，任何想要清理它的人都可以随意编辑。

# java - 播放不断写入光盘？在 Amazon ec2 上导致更高的账单

> ID：11350800
> 
> 赞同：24
> 
> 时间：2012-07-05T18:59:20.817
> 
> 标签：java, linux, scala, amazon-ec2, playframework-2.0

我有一个 Amazon ec2 微型实例（一个 VPN 服务器）可以玩。
问题是亚马逊会为您在微型实例中执行的每个磁盘 IO 收取费用。
该实例运行的是 CentOS 风格的 Amazon Linux。

我已经在服务器上的 Play 2.0(.2) 框架中启动了一个 Scala 应用程序，并且我是唯一一个连接到该应用程序的人。

我观察到服务器上每隔几秒就会提交 IO 事务，为了缩小范围，我安装了一个名为`iotop`.

这是几秒钟后的输出。

```
TID  PRIO  USER     DISK READ  DISK WRITE  SWAPIN     IO>    
23333 be/4 root        0.00 B/s   11.91 K/s  0.00 %  0.00 %  
COMMAND java -Dsbt.ivy.home=/usr/play-2.0.2/framework/../repository -Djava.runtime.name=OpenJDK ~/jars/slf4j-api.jar:/usr/play-2.0.2/repository/local/org.slf4j/jul-to-slf4j/1.6.4/jars/j 
```

来自日志文件的猫

```
cat /home/ec2-user/socketTest/logs/application.log
2012-07-05 11:43:31,881 - [INFO] - from play in main
Listening for HTTP on port 9000... 
```

所以 Play 不会向日志文件写入任何内容。

第一个问题我是否理解 iotop 正确，Play 确实是磁盘 IO 窃贼。
如果是这样，为什么玩使用 IO？

我的应用程序是一个简单的 websocket 示例。本质上，它将输入回显到输出。即使您没有通过 websocket 推送任何内容，也会发生 IO。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-06T02:11:45.147

我终于找到了答案。

通过观察 Play 何时进行 IO 事务，我立即执行了以下命令：

```
touch -d '-10 seconds' /tmp/newerthan
find / ! -fstype proc -newer /tmp/newerthan 
```

这返回了一个有趣的行：

```
/tmp/hsperfdata_root/23320 
```

在谷歌搜索时，我偶然发现了来自 sun JVM 的 Bug ID: 5012932[创建子目录 "hsperfdata_xxx"](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=5012932)。Java 这样做是为了实现 JRE 的非侵入性可观察性，他们声称这是一个特性而不是一个错误，这就是它没有得到解决的原因。
为禁用此“功能”而提出的解决方案是使用未记录的选项`-XX:-UsePerfData`。我试过了，但不幸的是 Play 一直在进行 IO 交易。

但经过更多挖掘后，我发现了另一个开关`-XX:+PerfDisableSharedMem`。

所以我`export _JAVA_OPTIONS="-XX:+PerfDisableSharedMem"`在开始 Play 之前执行了。

而且... Voilà Play 停止了 IO 交易！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-06T00:05:43.517

如果您想知道正在写入*哪些*`inotifywait`文件，您可以使用软件包中附带的`inotify-tools`（至少 Fedora 是这么称呼它的）：

```
$ inotifywait -r -m /opt /etc /var -e ATTRIB -e CREATE -e MODIFY -e DELETE
Setting up watches.  Beware: since -r was given, this may take a while!
Watches established.
/var/tmp/ CREATE etilqs_uOXWfa8v7DkNBgd
/var/tmp/ DELETE etilqs_uOXWfa8v7DkNBgd
/var/tmp/ MODIFY etilqs_uOXWfa8v7DkNBgd
/var/tmp/ MODIFY etilqs_uOXWfa8v7DkNBgd
/var/tmp/ MODIFY etilqs_uOXWfa8v7DkNBgd
  ... 
```

显然，用您怀疑感兴趣的任何目录替换上面的“/opt /etc /var”。

`lsof`几乎可以肯定，它比在循环中运行并获取其输出要高效得多。但是你可能不应该让它在生产中运行很长时间。

无论如何，一旦您知道正在写入哪些文件，您就可以很好地停止它。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T00:53:04.010

您还可以递归您的目录并按（或其他）`ls`排序`atime``mtime`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-07-06T01:57:43.683

另一个解决方案（简单但有用）：

```
# watch df 
```

然后你可以运行它来更深入：

```
# du -s /your/path/ 
```

# c++ - 为什么 google breakpad 不能处理所有崩溃？我该如何调试这些案例？

> ID：11350801
> 
> 赞同：6
> 
> 时间：2012-07-05T18:59:24.013
> 
> 标签：c++, exception, crash, crash-dumps, google-breakpad

我正在使用[google-breakpad](http://code.google.com/p/google-breakpad/)。这是一个在后台运行的错误报告程序，用于报告另一个进程的崩溃。

它几乎适用于所有情况。

但是，它有时无法捕获崩溃。没有报告，也没有转储文件。它只是崩溃。崩溃的最后一条线索是 Windows 事件消息。

如何调试这些崩溃？什么会导致 Breakpad 无法处理崩溃？我可以使用什么方法来调试这种情况？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T23:04:47.940

Visual C++ C/C++ 运行时库将`SetUnhandledExceptionFilter`在某些情况下删除钩子集；例如，当它检测到缓冲区溢出或其他安全问题时。

[此 Microsoft 反馈页面](https://connect.microsoft.com/feedback/ViewFeedback.aspx?FeedbackID=101337&SiteID=210)列出了在大多数情况下如何阻止此行为，但指出在不引入安全问题的情况下缓冲区溢出情况是不可能的。

# php - 在文本框中显示值的 php 变量

> ID：11350810
> 
> 赞同：0
> 
> 时间：2012-07-05T19:00:23.193
> 
> 标签：php

我需要让用户从下拉框中选择要编辑的任务。我需要获取此值并执行`SELECT`查询以使用此查询的结果填写表单。我的下拉菜单工作正常。我通过`$_POST['taskID']`变量准确地传递了值。我正在将正确的值加载到`$taskName`. 我`print_r`在底部添加了和回声作为测试，以确保我得到了正确的值。我尝试使用在论坛中找到的所有语法选择。这将包括单引号、使用回声、添加分号等。我在`.php`文件中使用它。任何帮助将不胜感激。

这是我正在使用的代码：

```
Task Name: <input type="text" size="32" maxlength="32" value="<?= $taskName ?>" /><br /><br /> 
        <?php
        $tidHolder = $_POST['taskID'];
            include( 'inc/mice.inc.php' );
                $cxn = mysqli_connect( $host, $user, $password, $database );
                $sql = "SELECT taskName FROM taskManager_tasks WHERE tid = '$tidHolder'" ;
                $sqlResult = mysqli_query( $cxn, $sql);

                if (!$sqlResult)
                {
                    die('Could not connect: ' . mysql_error());
                }
                $row = mysqli_fetch_assoc($sqlResult);
                $taskName=$row['taskName'];
                echo $tidHolder;
                print_r($_POST);
                echo $taskName;
            ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:04:02.473

线

```
Task Name: <input type="text" size="32" maxlength="32" value="<?= $taskName ?>" /> 
```

在您*获得*`$taskName`. 所以把它放在那个代码块的末尾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:04:36.950

代替

```
 <?= $taskName ?> 
```

尝试

```
<?php echo $taskName ?> 
```

# javascript - 收音机风格但有图像

> ID：11350815
> 
> 赞同：0
> 
> 时间：2012-07-05T19:00:34.720
> 
> 标签：javascript, jquery, html

我正在寻找类似单选按钮的东西，但没有文字，只有图像。像这样的东西是我想在下面设计的。我想让它在点击它的某个图像时。但我希望它像单选按钮 html 编码那样发送一个值。

我应该如何进行编码，或者是否有任何提示或我应该遵循的任何内容？只是不知道如何处理它。

基本上我想要一些可以像单选按钮一样工作的东西，但在下面的主题中。

![我想要的风格](../Images/fe96edfad4c328a35521375ae805f329.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:03:06.367

就个人而言，我会使用 jQuery。为每个“收音机”（带有收音机类的 div）添加一个 onclick 以运行一个函数，该函数从所有 div 中删除“选定”类并将其添加到单击的对象中。

示例：http: [//jsfiddle.net/dGWJp/](http://jsfiddle.net/dGWJp/)

如果您需要从收音机中检索数据，请`data-value="valuehere"`按照 HTML5 规范为每个收音机 div 提供一个（也适用于较旧的 HTML！），使用 jquery 找到选定的 div，然后从那里获取“数据值”属性。

在开始时设置一个`selected`以`radio`强制选择。

# c++ - 使用 TLS 减少缓存未命中？

> ID：11350816
> 
> 赞同：0
> 
> 时间：2012-07-05T19:00:37.573
> 
> 标签：c++, multithreading, thread-local-storage

如果我在多线程程序中使用线程本地存储，会减少缓存未命中吗？

编辑：由于每个线程都有自己的内存池，最后访问的内存是否更有可能仍在 CPU 缓存中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:14:08.193

**比什么**少的缓存未命中？

TLS 只是确保不同线程对不同数据进行操作的众多方法之一（显而易见的一种是将每个线程的数据放在自己的堆栈上）。

如果您的线程不写入相同的数据，您将获得更好的缓存行为（因为这将使所有其他内核的相应缓存行无效），但是您使用哪种方法来确保线程对不同数据进行操作是无关紧要的这方面。

（不过，还有其他与 TLS 相关的开销。它不是魔法，也不是灵丹妙药。大多数时候，这是错误的解决方案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:09:53.827

不，由于缓存并没有真正按照线程池大小进行组织，因此它们独立于您正在考虑的选择而工作。

# r - R中的自动曲线拟合

> ID：11350821
> 
> 赞同：6
> 
> 时间：2012-07-05T19:01:01.007
> 
> 标签：r, curve-fitting

有没有使用许多简单模型自动拟合曲线的包？
通过简单的模型，我的意思是：

*   ax+b
*   ax^2+bx+c
*   a*log(x) + b
*   a*x^n+b
*   斧头/(1+bx)
*   ax^n/(1+bx^n)
*   ...

最好的方法是有一个函数，它接受两个向量参数 X 和 Y，并返回一个拟合简单模型及其 SSE 的列表。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-05T19:26:09.570

试试这个。 `rhs`是右侧的字符向量，`x`并且`y`是数据。它为每个构造公式`fo`，然后提取参数并将每个参数设置为 1 作为起始值。最后，它运行`nls`并返回排序后的 SSE，结果是通过右侧命名的 SSE 向量。如果`verbose=TRUE`（默认情况下），那么它还会显示每个拟合的输出。

```
sse <- function(rhs, x, y) sort(sapply(rhs, function(rhs, x, y, verbose = TRUE) {
    fo <- as.formula(paste("y", rhs, sep = "~"))
    nms <- setdiff(all.vars(fo), c("x", "y"))
    start <- as.list(setNames(rep(1, length(nms)), nms))
    fm <- nls(fo, data.frame(x, y), start = start)
    if (verbose) { print(fm); cat("---\n") }
    deviance(fm)
}, x = x, y = y))

## test

set.seed(123)
x <- 1:10
y <- rnorm(10, x)

# modify to suit
rhs <- c("a*x+b", "a*x*x+b*x+c")

sse(rhs, x, y) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T19:56:21.400

您还可以查看提供评估分数多项式的函数的包。到目前为止，这些似乎是`mboost`（使用函数`FP`）和`mfp`（使用函数`mfp`）。尽管我没有尝试过这些软件包，但它们背后的理论符合您的需求。

该`mfp`软件包于 2005 年在[R-News中进行了描述。](http://CRAN.R-project.org/doc/Rnews/Rnews_2005-2.pdf)

可能感兴趣的两个参考是

Royston P, Altman D (1994) 使用连续协变量的分数多项式进行回归。应用统计。3：429–467。

Sauerbrei W, Royston P (1999) 构建多变量预后和诊断模型：使用分数多项式转换预测变量。皇家统计学会杂志（A 系列）162：71-94。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-18T19:42:48.827

您可以拟合回归样条曲线并通过手动调整自由度几次来找到合适的拟合。尝试以下功能：

```
spline.fit <- function(x, y, df=5) {
  ## INPUT: x, y are two vectors (predictor and response);
  ##        df is the number of spline basis.  Increase "df" to fit more adaptively to the data.
  require(splines) # available as default R Package.
  bx <- bs(x, df)  # B-spline basis matrix as New Predictors (dimension is "length(x)" by "df")
  f <- lm(y ~ bx)  # Linear Regression on Spline Basis (that is, "df" number of new predictors)
  fy <- fitted(f)  # Fitted Response
  plot(x, y); lines(x, fy, col="blue", lwd=2) # Make a plot to show the fit.
  invisible(list(x=bx, y=fy, f=f))    # Return the Basis (new predictors), Fitted Y, Regression
}

if (F) {                                # Unit Test
  spline.fit(1:100, rnorm(100))
  spline.fit(1:100, rnorm(100), df=20)
} 
```

# sql - AVG 和 GROUP BY

> ID：11350823
> 
> 赞同：0
> 
> 时间：2012-07-05T19:01:05.423
> 
> 标签：sql, sql-server, group-by, average

我有一组记录，我从中选择和平均各种数据，并按小时分组。似乎这个函数/查询在平均方面做得很好，因为我得到了 744 条记录而没有问题。然而，从 6 月 8 日到 6 月 16 日，它似乎跳过了平均和分组。尽管数据如此庞大，我已经梳理过试图找到可能发生这种情况的原因。似乎这些行中的数据与其他行中的数据没有什么不同，应该没有理由跳过从 6 月 8 日到 6 月 16 日的记录。有 NULLS，但我认为 AVG 会跳过这些数据? 有没有人见过这种跳过记录的特殊模式，尤其是与 AVG 和 GROUP BY 函数有关的情况？

日期格式：YYYY-MM-DD HH:MM:SS.000 数据库管理器：Microsoft Corporation 的 SQL Server Management Studio

工作数据链接（此数据已正确平均）： [https ://docs.google.com/spreadsheet/ccc?key=0Av--kLXVY_a3dHA5UjBKYXc3UmRhQW9RN0NGbXl1NHc](https://docs.google.com/spreadsheet/ccc?key=0Av--kLXVY_a3dHA5UjBKYXc3UmRhQW9RN0NGbXl1NHc)

非工作数据链接（此数据因某种原因被完全跳过）： [https ://docs.google.com/spreadsheet/ccc?key=0Av--kLXVY_a3dFZqX3RuYVNWYWpVemNmSS12bzhIOXc](https://docs.google.com/spreadsheet/ccc?key=0Av--kLXVY_a3dFZqX3RuYVNWYWpVemNmSS12bzhIOXc)

用于平均和分组的查询：

```
`INSERT INTO AverageRawData(DateTime,
SCR1_EXHAUST_GAS_TEMP,SCR1_NOX_LEVEL,SCR1_NH3_FLOW_RATE,SCR1_O2_LEVEL,SCR1_NOx,
SCR2_EXHAUST_GAS_TEMP,SCR2_NOX_LEVEL,SCR2_NH3_FLOW_RATE,SCR2_O2_LEVEL,SCR2_NOx,
SCR3_EXHAUST_GAS_TEMP,SCR3_NOX_LEVEL,SCR3_NH3_FLOW_RATE,SCR3_O2_LEVEL,SCR3_NOx,
SCR4_EXHAUST_GAS_TEMP,SCR4_NOX_LEVEL,SCR4_NH3_FLOW_RATE,SCR4_O2_LEVEL,SCR4_NOx,
CAT1_FUEL_FLOW_RATE,CAT2_FUEL_FLOW_RATE,CAT3_FUEL_FLOW_RATE,
VOLVO1_FUEL_FLOW_RATE,VOLVO2_FUEL_FLOW_RATE,VOLVO3_FUEL_FLOW_RATE,VOLVO4_FUEL_FLOW_RATE,VOLVO5_FUEL_FLOW_RATE,
TOTAL_NOx)

SELECT MIN(DateTime),
AVG(Convert(decimal(10,3),SCR1_EXHAUST_GAS_TEMP)),
AVG(Convert(decimal(10,3),SCR1_NOX_LEVEL)),
AVG(Convert(decimal(10,3),SCR1_NH3_FLOW_RATE)),
AVG(Convert(decimal(10,3),SCR1_O2_LEVEL)),
AVG(Convert(decimal(10,3),SCR1_NOx)),
AVG(Convert(decimal(10,3),SCR2_EXHAUST_GAS_TEMP)),
AVG(Convert(decimal(10,3),SCR2_NOX_LEVEL)),
AVG(Convert(decimal(10,3),SCR2_NH3_FLOW_RATE)),
AVG(Convert(decimal(10,3),SCR2_O2_LEVEL)),
AVG(Convert(decimal(10,3),SCR2_NOx)),
AVG(Convert(decimal(10,3),SCR3_EXHAUST_GAS_TEMP)),
AVG(Convert(decimal(10,3),SCR3_NOX_LEVEL)),
AVG(Convert(decimal(10,3),SCR3_NH3_FLOW_RATE)),
AVG(Convert(decimal(10,3),SCR3_O2_LEVEL)),
AVG(Convert(decimal(10,3),SCR3_NOx)),
AVG(Convert(decimal(10,3),SCR4_EXHAUST_GAS_TEMP)),
AVG(Convert(decimal(10,3),SCR4_NOX_LEVEL)),
AVG(Convert(decimal(10,3),SCR4_NH3_FLOW_RATE)),
AVG(Convert(decimal(10,3),SCR4_O2_LEVEL)),
AVG(Convert(decimal(10,3),SCR4_NOx)),
AVG(Convert(decimal(10,3),CAT1_FUEL_FLOW_RATE)),
AVG(Convert(decimal(10,3),CAT2_FUEL_FLOW_RATE)),
AVG(Convert(decimal(10,3),CAT3_FUEL_FLOW_RATE)),
AVG(Convert(decimal(10,3),VOLVO1_FUEL_FLOW_RATE)),
AVG(Convert(decimal(10,3),VOLVO2_FUEL_FLOW_RATE)),
AVG(Convert(decimal(10,3),VOLVO3_FUEL_FLOW_RATE)),
AVG(Convert(decimal(10,3),VOLVO4_FUEL_FLOW_RATE)),
AVG(Convert(decimal(10,3),VOLVO5_FUEL_FLOW_RATE)),
AVG(Convert(decimal(10,3),TOTAL_NOx))
FROM jmusa_LOG1
GROUP BY DATEPART(DD,DateTime),DATEPART(HH,DateTime)` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:17:19.090

假设您正在使用 Oracle 数据库，请尝试对您看不到数据的所有列执行 NVL(R1_EXHAUST_GAS_TEMP,0)。

这是来自 docs.oracle：

> 除 COUNT(*) 和 GROUPING 之外的所有聚合函数都忽略空值。您可以在聚合函数的参数中使用 NVL 函数将值替换为空值。COUNT 从不返回 null，而是返回一个数字或零。对于所有剩余的聚合函数，如果数据集不包含行，或仅包含带有空值的行作为聚合函数的参数，则该函数返回空值。

正如他们所建议的，使用 NVL 应该可以解决您的问题。

链接：[http ://docs.oracle.com/cd/B19306_01/server.102/b14200/functions001.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions001.htm)

# python - Flask-Testing 模块没有这样的测试方法错误

> ID：11350824
> 
> 赞同：4
> 
> 时间：2012-07-05T19:01:06.020
> 
> 标签：python, testing, flask

在尝试了#python 和#pocoo 之后来到这里。我正在为烧瓶应用程序编写单元测试，并想测试重定向。官方的烧瓶教程对此没有任何内容，所以我尝试使用它：[http ://packages.python.org/Flask-Testing/](http://packages.python.org/Flask-Testing/)

这是我到目前为止测试教程应用程序的代码（应用程序代码在这里：[https](https://github.com/mitsuhiko/flask/tree/master/examples/flaskr/) ://github.com/mitsuhiko/flask/tree/master/examples/flaskr/ ）

```
from flaskext.testing import TestCase
import flaskr
from flask import Flask

class FlaskrTest(TestCase):

    def create_app(self):
        app = Flask(__name__)
        app.config['TESTING'] = True
        return app

    def test_add_entry(self, title, text):
        resp = app.post('/add', data=dict(title='blah',
            text='Blooh'), follow_redirects=True)
        self.assertRedirects(resp, '/')

if __name__ == '__main__':
    myTest = FlaskrTest()
    myTest.test_add_entry() 
```

这是我得到的错误：

```
Traceback (most recent call last):
  File "flaskr_test.py", line 17, in <module>
    myTest = FlaskrTest()
  File "/usr/lib/python2.7/unittest/case.py", line 185, in __init__
    (self.__class__, methodName))
ValueError: no such test method in <class '__main__.FlaskrTest'>: runTest 
```

我会很感激任何帮助。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-24T10:29:59.357

运行测试的最简单方法是用于`unittest.main`收集测试，因为. 所有其他支持类的测试收集器都应该可以工作。`flask.ext.testing.TestCase``unittest.TestCase``nose``unittest.TestCase`

一个简单的示例`unittest.main`如下所示：

```
import unittest

# Here your TestCases

if __name__ == '__main__':
    unittest.main() 
```

`unittest`将发现所有测试用例和测试方法，但请注意类和方法名称必须以`test`.

免责声明：我是 Flask-Testing 的维护者。

# google-maps - 在没有 Google Maps API 的情况下计算两个地址之间的距离？

> ID：11350825
> 
> 赞同：3
> 
> 时间：2012-07-05T19:01:06.247
> 
> 标签：google-maps, distance

**除了使用 Google Maps API**计算两个地址之间的距离（不是纬度/经度点）之外，还有其他方法吗？“乌鸦飞”的距离很好——我不需要行驶距离。

我可以使用[**Vicenty 公式**](http://www.movable-type.co.uk/scripts/latlong-vincenty.html)或[**Haversine 公式**](http://www.movable-type.co.uk/scripts/latlong.html)来计算它，但我仍然需要将我的地址转换为纬度/经度坐标。

我不能使用 Google Maps API，因为它需要我显示地图，并且我需要这个距离来在我的服务器上进行内部计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:08:09.820

您的问题不在于如何计算距离，您已经知道如何计算（Vicenty 公式或 Haversine 公式）。您的问题是如何在不使用 Google Maps API 地理编码器的情况下对两个地址进行地理编码。

有可用的开源地理编码器，如果是美国，大部分数据都是免费提供的，如果不是美国，您可能需要付费才能获得准确（足够）的数据。

试试[这个搜索的结果](http://groups.google.com/group/google-maps-api/search?group=google-maps-api&q=open+source+geocoder&qt_g=Search+this+group)

这个在讨论中经常出现：[http ://www.geonames.org/](http://www.geonames.org/)

# vb6 - 为 Outlook 2010 加载项禁用 DEP

> ID：11350826
> 
> 赞同：4
> 
> 时间：2012-07-05T19:01:08.803
> 
> 标签：vb6, outlook, add-in, dep

有没有办法做到这一点？

我的旧版 VB6 插件利用旧版（可能是 C++）第三方组件来进行一些 UI“皮肤”增强。它在 Outlook 2000-2007 中运行良好，但在 2010 年由于 DEP 而失败 - 可能是我的“皮肤”组件访问内存的方式。

如果我在 Outlook 中全局禁用 DEP（通过信任中心），它可以正常工作，但这对我的客户来说不是一个可行的解决方案。

**我尝试将我的 DLL 添加到系统属性 > 性能 > DEP**中的 DEP 退出列表中，但它似乎没有任何影响。也没有将“皮肤”DLL、运行它的 MS VB6 虚拟机，甚至 Outlook.EXE 添加到列表中。

如果有人能指出我正确的方向：从 DEP 禁用我的加载项，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-10T11:45:26.227

我相信这不是由于 DEP，而是因为与早期版本相比，它们完全改变了与 Outlook 2010 交互的方式。他们（作为微软）表示，虽然旧代码仍然可以工作......但他们不能保证顺利运行。

# css - 如何在 Twitter Bootstrap 中设计全屏日历视图？

> ID：11350827
> 
> 赞同：4
> 
> 时间：2012-07-05T19:01:13.177
> 
> 标签：css, twitter-bootstrap, fullcalendar

我需要设计一个日历视图，并且我想使用 Twitter Bootstrap，因为我习惯将它用于较小的项目。

但是 12 列跨度系统似乎不适合创建日历视图。

因此，如果我有一个 span12 行，并且我想创建一个子行，我需要 7 个均匀间隔的日历框。我看不出我怎么能做到这一点。

我想只创建一个 span12，然后在其中应用我自己的 CSS。绕过引导系统。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T19:38:02.313

为什么不尝试下载**仅网格**、自定义为 7 列的引导程序？您可能需要*网格系统*和*布局*

这里：http: [//twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

然后，您只需在创建的样式表中的几条规则前面**添加您自己的选择器**，您就应该拥有自己的 7 列网格。

对于流体网格，如果需要，请确保

```
@gridColumns*@fluidGridColumnWidth + (@gridColumns-1)*@fluidGridGutterWidth <= 100 
```

您感兴趣的变量是

*   `@gridColumns`： 列数
*   `@gridColumnWidth`: 一个静态列的宽度
*   `@gridGutterWidth`: 静态列之间的空间宽度
*   `@fluidGridColumnWidth`: 一个流体柱的宽度
*   `@fluidGridGutterWidth`: 流体柱之间的空间宽度

静态容器的总宽度将给出为

```
@gridColumns*@gridColumnWidth + (@gridColumns-1)*@gridGutterWidth 
```

享受 ！

# android - Adobe Flex Mobile - TextArea 拒绝在 Android 上滚动，StageWebView 根本不会滚动

> ID：11350828
> 
> 赞同：1
> 
> 时间：2012-07-05T19:01:16.707
> 
> 标签：android, ios, apache-flex, mobile, adobe

我试图让 Spark TextArea 组件在添加文本时自动向下滚动。

首次填充 TextArea 时，垂直滚动条位于底部。但是，如果我附加更多文本，它就会完全拒绝滚动。它在iOS平台上工作，但它不会在Android上！

根据此处找到的示例，我尝试执行以下操作：http: [//devgirl.org/2010/12/16/automatically-scroll-flex-mobile-textarea/](http://devgirl.org/2010/12/16/automatically-scroll-flex-mobile-textarea/)

```
StyleableTextField(TextArea1.textDisplay).htmlText += textHTML;
StyleableTextField(TextArea1.textDisplay).scrollV++; 
```

我还尝试了以下两行代码：

```
StyleableTextField(TextArea1.textDisplay).verticalScrollPosition = int.MAX_VALUE - 1;
TextArea1.scrollToRange(int.MAX_VALUE, int.MAX_VALUE); 
```

没有任何效果！每当更新 TextArea 时，它只会向上滚动到顶部，或者根本不移动。

我什至尝试更改程序，以便将 HTML 内容显示在 StageWebView 中。但我根本无法让那个滚动，即使在 iPad 上也是如此。我尝试调用 JavaScript 函数 (document.getElementById('id').focus()) 以及在代码中插入隐藏的锚标记，并在其上调用 loadURL()。两种解决方案都不起作用。

有人可以帮我解决这个问题吗？我完全被难住了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-23T22:50:57.167

您可以使用默认文本字段，但请注意，当文本输入聚焦时，您必须处理自动滚动到该文本字段之类的所有内容（因此，如果您将文本输入放置得太靠近键盘区域，它将被键盘覆盖），SoftKeyboardType 可能显示不正确（如数字键盘）...从我的角度来看，舞台文本是文本输入的最佳选择。

这是我的工作，以使您的 StageText 文本输入按预期工作。

1.  复制 StyleableStageText 的内容并创建一个新文件，如 ExtendedStyleableStageText

2.  在 ExtendedStyleableStageText 添加 2 个函数：

    公共函数 freezeStageText(){ if(stageText){ if(stageText.visible){ createProxyImage(); } stageText.visible = false; stageText.stage = null; } }

    公共函数 unFreezeStageText():void{ if(stageText){ if(!stageText.visible){ disposeProxyImage(); } stageText.visible = true; stageText.stage = 舞台；}
    }

3.  将 spark.skins.mobile.supportClasses.StageTextSkinBase 的内容复制到一个新文件，如 ExtendedStageTextSkinBase。

4.  在您的 ExtendedStageTextSkinBase 中将 textDisplay 更改为 ExtendedStyleableStageText
5.  复制 spark.skins.mobile.StageTextInputSkin 的内容并创建您自己的文本输入皮肤文件。在您的皮肤中，皮肤类应该扩展您新创建的 ExtendedStageTextSkinBase 文件并添加函数

    ```
     protected function commitCurrentState():void{
          super.commitCurrentState();
          if(currentState == 'disabled'){
             textDisplay.freezeStageText();
          }else{
             textDisplay.unFreezeStageText();
          }
        } 
    ```

6.  在您需要使用文本输入的任何视图中，如果您需要在视图顶部显示一个弹出窗口，请确保将所有启用的文本输入更改为 false，或者如果您需要在滚动时正确定位文本，您可以将 TouchInteractionStart 和 TouchInteractionEnd 添加到滚动条，然后监听事件，当用户开始触摸并滚动滚动条时，禁用视图中可见的所有文本输入，当用户停止触摸时，重新启用所有文本输入。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-02T10:54:32.073

如果 TextArea 和 TextInput 使用它们的 StageText 外观，则它们不支持滚动。您需要将 TextArea 设置为使用“TextAreaSkin”进行滚动才能正常工作。
TextArea 和 TextInput 在使用 StageText 皮肤时甚至不支持软键盘的滚动/平移。

原因是当 TextArea 使用 StageText 皮肤时，AIR 实际上使用的是操作系统原生文本框并将其放置在您的 displayList 之上。这就是为什么使用 StageText 外观的文本框将始终出现在所有其他显示对象之上的原因。
这可能很好，因为我们可以在我们的应用程序中使用本机显示对象，让我们可以访问操作系统必须提供的所有服务（自动更正、android 软键盘上的“下一步”/“完成”按钮等），但是有很多情况下你不能使用它们。

因此，您要么必须返回到 TextAreaSkin，因为您不再获得设备本机软键盘，所以它很臭，或者找到一种方法来解决您的滚动需求。

我不了解 StageWebView，但我怀疑它有同样的问题（原生组件位于 displayList 之上）。

# php - curl_setopt 与 CURL_POSTFIELDS 参数返回 false

> ID：11350830
> 
> 赞同：1
> 
> 时间：2012-07-05T19:01:21.890
> 
> 标签：php, post, curl

我在我的 php 代码中设置 post 参数时遇到问题。我有以下代码行：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_POSTFIELDS, "a=b"); 
```

在我的本地机器上，上面对 curl_setopt 的调用有效，并返回 true。但是，在我的服务器上，它返回 false。我能想到的两者之间的唯一区别是，在我的本地机器上我有 php 5.3.8 而服务器有 5.3.10。

关于为什么会发生这种情况或我能做些什么来解决它的任何想法？提前致谢。

附加信息：上面的这些代码行实际上是我尝试调试所看到的 curl 问题并将问题缩小到失败的行的结果。我遇到的问题实际上是在 Twilio api 中。在我的代码中，我调用：

```
$twilioClient = new Services_Twilio($twilioAccountSid, $twilioAccountToken);
$message = $twilioClient->account->sms_messages->create($fromNumber, $toNumber, $body); 
```

并且该调用引发了异常。通过函数调用跟踪将我带到 Services_Twilio_TinyHttp->call() 函数。第 62 行 (curl_setopt_array) 正在返回错误事件，尽管它在本地工作。可以在这里找到代码[https://github.com/twilio/twilio-php/blob/master/Services/Twilio/TinyHttp.php](https://github.com/twilio/twilio-php/blob/master/Services/Twilio/TinyHttp.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:59:05.003

看起来您缺少此代码：

```
curl_setopt($ch, CURLOPT_POST, TRUE); 
```

将 CURLOPT_POST 设置为 TRUE 的定义是：*TRUE 表示进行常规 HTTP POST。这个 POST 是普通的 application/x-www-form-urlencoded 类型，最常用于 HTML 表单。*

您可以在此处阅读有关各种 curl_setopt 选项的所有信息：http: [//php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)

# mdx - 在 MDX Where 子句中不过滤计算成员

> ID：11350834
> 
> 赞同：0
> 
> 时间：2012-07-05T19:01:28.577
> 
> 标签：mdx

为什么 where 子句过滤器适用于 [All subcategoty] 成员而不适用于 [All_Category] ​​成员？

```
with member [All_Category] as
    ([Product].[Category].[All Products],[Measures].[Reseller Sales Amount])
member [All_SubCategory] as
    ([Product].[Subcategory].[All Products],[Measures].[Reseller Sales Amount])
select 
    {[All_Category],
    [All_SubCategory],
    [Measures].[Reseller Sales Amount]} on 0
from [Adventure Works]
where [Product].[Category].&[4] 
```

结果：

```
All_Categry     All_SubCategry      Reseller Sales Amount

$80,450,596.98  $571,297.93     $571,297.93 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:55:54.377

因为`[All_Category]`改变了当前类别的表达。

我觉得`[Product].[Category].[All Products]`和`[Product].[Subcategory].[All Products]`不属于同一个**等级**。

# java - 当用户使用 PageIndicator 在选项卡上滑动时如何创建文本淡入淡出效果

> ID：11350836
> 
> 赞同：3
> 
> 时间：2012-07-05T19:01:38.603
> 
> 标签：java, android, viewpagerindicator

**将 Jake Wharton 的TitlePagerIndicator**更改 为在标签之间滑动时产生您在 Google Play 商店中看到的文本淡化效果所需的最少工作量是多少？我认为关键在于修改**onDraw()**但这需要我弄清楚他的代码和他的数学。如果有更简单的解决方案，我会更喜欢。

我也试过**TitlePagerIndicator.setFadingEdgeLength(100)**，但这似乎没有任何作用。我知道你必须做**TitlePagerIndicator.setHorizo​​ntalFadingEdgeEnabled(true)**但仍然没有任何褪色效果。

以下是基于 Jake 示例之一的代码：

```
public class SampleTitlesStyledMethods extends BaseSampleActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.simple_titles);

        mAdapter = new TestTitleFragmentAdapter(getSupportFragmentManager());

        mPager = (ViewPager)findViewById(R.id.pager);
        mPager.setAdapter(mAdapter);

        TitlePageIndicator indicator = (TitlePageIndicator)findViewById(R.id.indicator);
        mIndicator = indicator;
        indicator.setViewPager(mPager);

        final float density = getResources().getDisplayMetrics().density;
        indicator.setBackgroundColor(0x18FF0000);
        indicator.setFooterColor(0xFFAA2222);
        indicator.setFooterLineHeight(1 * density); //1dp
        indicator.setFooterIndicatorHeight(3 * density); //3dp
        indicator.setFooterIndicatorStyle(IndicatorStyle.Underline);
        indicator.setTextColor(0xAA000000);
        indicator.setSelectedColor(0xFF000000);
        indicator.setSelectedBold(true);

        //my code, doesn't seem to do anything though...
        indicator.setHorizontalFadingEdgeEnabled(true);
        indicator.setFadingEdgeLength(1000);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T14:13:17.213

我知道这很旧，但您应该在[这里](https://stackoverflow.com/questions/11876078/creating-blurring-effect-on-both-sides-of-viewpagerindicator)查看答案，它对我很有用

# css - CSS margin-left 属性不存在？

> ID：11350838
> 
> 赞同：0
> 
> 时间：2012-07-05T19:01:43.803
> 
> 标签：css, margin

我试图在我的页面上水平和垂直居中一些东西......我在stackoverflow上看到了几个遇到同样问题的人，但我尝试了那里发布的解决方案（与溢出有关的事情：隐藏，不同的浮动，内联块等），但似乎没有一个工作。

在这里您可以看到 CSS 验证失败：< [http://jigsaw.w3.org/css-validator/validator?uri=http%3A%2F%2Fwww.applemktcap.com%2Fcss%2Fmain.css&profile=css3&usermedium=all&warning= 1&vextwarning=&lang=en](http://jigsaw.w3.org/css-validator/validator?uri=http%3A%2F%2Fwww.applemktcap.com%2Fcss%2Fmain.css&profile=css3&usermedium=all&warning=1&vextwarning=&lang=en) >

margin-left 不是公认的属性？如果你去那个站点的主页，< [http://applemktcap.com](http://applemktcap.com) >，你可以看到生成的 JS 小程序没有居中。

我知道这与 JS 无关，因为我从我的站点中剥离了所有内容并将一些简单的文本放入容器中，但它仍然向右移动。一定只是我正在查看的一些简单的 CSS 错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:03:27.433

`margin-leftâ`不是有效属性。看起来在“margin-left”之后有一个奇怪的字符需要删除。最好重新编写那行代码。

您的 CSS 文件显示了这一点：

```
margin-leftâ€‹: -350px; 
```

# cassandra - 使用 libQTcassandra (C++) 在 cassandra 中存储 jpeg 图像

> ID：11350840
> 
> 赞同：1
> 
> 时间：2012-07-05T19:01:48.480
> 
> 标签：cassandra

我对 cassandra 很陌生，我已经在 linux 机器上安装了 cassandra 和 libQTcassandra。我想将 .jpg 或 .png 之类的图像文件插入 cassandra（图像很小，几 MB）。

如何将图像文件发送到 cassandra 服务器以插入列族的列？请你给我一个C++代码的例子。

我知道我可以使用图像文件名作为列名，但我不知道如何将图像文件发送到 cassandra。任何帮助是极大的赞赏...

谢谢， 斯瓦特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T16:42:22.657

我不熟悉 libQtCassandra 库，但查看 API 似乎您需要做的是使用`QCassandraValue`包含图像数据的字节数组填充。该类`QCassandraValue`实现了一个接受 a 的构造函数，`QByteArray`可用于此目的。

# sorting - 事件模拟是否需要优先级队列？

> ID：11350841
> 
> 赞同：3
> 
> 时间：2012-07-05T19:01:53.273
> 
> 标签：sorting, heap, simulation, priority-queue, heapsort

现在在我的基本事件模拟引擎中，我只是简单地使用事件对象列表来根据模拟的每一步的优先级进行更新。我这样做是因为可以在事件更新期间创建新事件并将其附加到列表中，当事件到期时，我只需将其与列表中的最后一个事件“交换并弹出”以提高性能。我应该只使用两个优先级队列吗？似乎对每一步排序的 n log n 至少是相同的，如果不比将所有事件（n log n？）出队的成本低的话，将每个未过期的事件放入另一个列表中，该列表内置到下一个更新步骤的优先级队列中.

**编辑：**我认为更倾向于将“事件”称为“进程”，然后将整个事情称为进程调度模拟。队列中的每个对象都按优先级顺序更新其状态，然后只有当它过期（进入某种结束状态）时，它才会被丢弃并且不会重新插入队列中。这就是只有一个优先级队列可能是个问题的原因。当一个对象被重新插入时，它仍然具有最低的优先级，并且会再次被拉出。我正在考虑使用第二个队列来插入所有新生成的进程对象和未过期的进程对象，而不考虑优先级，然后我可以构建堆并在下一个更新周期开始之前将其与活动队列交换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-07T13:59:34.193

通常，您应该在（顺序）离散事件模拟器中**使用一个事件队列。**我不太清楚你对“过期”事件的意思，但如果这些事件因为它们不再有效而被忽略，一个简单的解决方案是丢弃它们而不是处理它们，例如看这个伪 Java 代码：

```
 while (!terminationConditionMet() && !eventQueue.isEmpty()) {
   Event currentEvent = eventQueue.getNextEvent();
   if(currentEvent.isExpired())
     continue;
   List<Event> newEvents = currentEvent.process();
   eventQueue.addEvents(newEvents); 
 } 
```

通常（对于足够大的事件集），这应该比在每一步之后重新排序事件列表要快得多。

顺便说一句，许多事件队列实现在 O(1) 中实现了出队，即使对于某些操作，它们*最坏情况下*的性能可能并不比排序好，但实际实现工作得更好（即它们具有更小的常量/更好的平均性能）。如果您正在使用 Java，您可能想查看[JAMES II](http://jamesii.org)，它提供了多种事件队列实现并且是开源的（*免责声明：我是开发人员之一*）。

**编辑（解决重新制定的问题）**：

*通常，实现基于流程的*离散事件模拟的一种便捷方式是[协程](https://en.wikipedia.org/wiki/Coroutine)，例如，请参阅[此报告](http://www.akira.ruc.dk/~keld/research/javasimulation/JAVASIMULATION-1.1/docs/Report.pdf)了解详细信息。但是，如果您想坚持自己的实现，您仍然可以将优先级更改为元组`(timeStep,processPriority)`并使用上述伪代码的改编版本，如下所示：

```
while (!terminationConditionMet() && !queue.isEmpty()) {

 //Read out event
 Tuple minTime = queue.getMinTime();
 ProcessEvent currentEvent = queue.dequeue();

 //Execute event
 List<ProcessEvent> newlySpawnedProcesses = processEvent.process();

 //Re- and enqueue new events
 int nextTimeStep = minTime.getTime() + 1;
 if(!currentEvent.finalStateReached())
   queue.requeue(currentEvent, new Tuple(nextTimeStep, currentEvent.getPriority())); 
 for(ProcessEvent event : newlySpawnedProcesses)
   queue.enqueue(event, new Tuple(nextTimeStep, event.getPriority()));     
} 
```

当然，这假设您正在使用足够通用的事件队列实现，以允许您指定自己的时间/优先级顺序，例如通过指定自定义比较器。

# jquery - 如何为 Web 开发快速创建复杂的 Web 控件？

> ID：11350850
> 
> 赞同：0
> 
> 时间：2012-07-05T19:02:27.630
> 
> 标签：jquery, css, spring, jakarta-ee

我知道 J2EE、Spring、jquery、JS、CSS。每当我们构建任何 Web 应用程序时，大多数时候它都需要构建复杂的 HTML 控件。jquery 中免费提供的插件很好，但大多数时候它需要大量定制，这需要大量时间，因此会延迟项目交付。

有什么方法可以快速构建复杂的 Web 应用程序控件？如何快速开发Web应用程序？是否有任何工具或开源项目可以生成代码并使开发过程更快？

到目前为止，我主要使用 100% 手动编码开发项目？那么通常每个人都使用手动编码开发 java/j2ee Web 应用程序还是有任何自动化工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T19:11:25.267

您不应该为控件构建 HTML。HTML 应该传达您所交付内容的含义，这就是它的重点。

插件是用来修补的。我们不能总是使用

```
<div id="specific_name">
    <img rel="slider" href="whatever">
    <span rel="caption">Hello</span>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:10:25.427

JavaScript MVC 框架可以轻松管理复杂的控件。

Flixster / Rotten Tomatoes 是一家 Spring 商店，使用 JavaScript、Backbone.js 和 jQuery UI 创建了这个带有复杂 UI 控件（全手写）的网站： [http ://www.rottentomatoes.com/dvd/netflix/?debug=true](http://www.rottentomatoes.com/dvd/netflix/?debug=true)

从概念上讲，这就是他们使用 Backbone.js 的方式：

*   searchquery 模型包含所有搜索参数和结果
*   多个视图（tomatometer 范围、发布日期）绑定到同一个模型，并在用户切换复选框或前后移动滑块时更新它。

您不必使用 Backbone，还有其他 JavaScript 框架，例如 Ember.js 和 Angularjs。我强烈建议您使用框架——当您处理任何复杂性时，它们可以帮助您快速开发。

# asp.net-mvc - ASP.NET WebApi 与 MVC？

> ID：11350853
> 
> 赞同：148
> 
> 时间：2012-07-05T19:02:30.403
> 
> 标签：asp.net-mvc, asp.net-web-api

使用 ASP.NET MVC 控制器，您可以以不同的格式公开数据。AspNetWebAPI 是专门为创建 API 而设计的，但是我可以使用 MVC 控制器轻松地做到这一点，我不清楚在什么情况下它会比传统的 MVC 控制器更好。我对 WebApi 的好处显而易见并且值得为我的应用程序添加另一个复杂层的场景感兴趣。

**问题：**就 MVC 而言，使用 asp.net WebApi 的优点和/或缺点是什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-07-05T19:23:21.163

WebApi 允许创建可以通过 HTTP 而不是通过 WCF 或 SOAP 等正式服务公开的服务。另一个不同之处在于 WebApi 如何使用 Http 协议并使其成为真正的 First class Http 公民。

**更新：** ASP.NET Core、Web API 已集成到 MVC 项目类型中。类`ApiController`被合并到`Controller`类中。更多信息：[https ://wildermuth.com/2016/05/10/Writing-API-Controllers-in-ASP-NET-MVC-6](https://wildermuth.com/2016/05/10/Writing-API-Controllers-in-ASP-NET-MVC-6)

比较、讨论和教程的相关链接：

*   [MVC5 与 WebApi 项目](https://stackoverflow.com/questions/22589245/difference-between-mvc-5-project-and-web-api-project)
*   [ASP.NET MVC 和 ASP.NET Web API 之间的区别](http://www.dotnettricks.com/learn/webapi/difference-between-aspnet-mvc-and-aspnet-web-api)
*   [ASP.NET Core 介绍](https://mva.microsoft.com/en-US/training-courses/introduction-to-aspnet-core-with-visual-studio-2017-16841?l=Mn1Ba0CgD_3201937555)包括 MVC、Web API 演示
*   [ASP.NET Web API 入门](https://docs.microsoft.com/en-us/aspnet/web-api/overview/getting-started-with-aspnet-web-api/)教程

[![在此处输入图像描述](../Images/4dbc49805e71e3d6c737b44d14e93122.png)](https://i.stack.imgur.com/Af5xg.jpg)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-07-05T19:20:32.027

WebAPI 吐出 OData，因此您可以获得使用 OData 的所有优势。例如，使用 WebAPI，您可以获得：

*   查询选项，如 $filter、$top、$orderby 等。
    *   使用传统的 MVC 控制器，您需要自己实现这些。
*   格式标准化
    *   有一些 OData 客户端可以理解您的 RESTful API 的底层格式。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2016-12-16T23:49:05.713

**Asp.Net Web API VS Asp.Net MVC** **1**。Asp.Net MVC 用于创建返回视图和数据的 Web 应用程序，但 Asp.Net Web API 用于创建完整的 HTTP 服务，以简单的方式仅返回数据而不返回视图。[![在此处输入图像描述](../Images/b0d0389e2fe42901f4a1fb4ea03c8af8.png)](https://i.stack.imgur.com/B7FuD.png)

 ****2** . Web API 有助于在 .NET Framework 上构建 REST-ful 服务，它还支持内容协商（它是关于确定客户端可以接受的最佳响应格式数据。它可以是 JSON、XML、ATOM 或其他格式的数据)，不在 MVC 中的自托管。

**3** . Web API 还负责根据请求中的 Accept 标头返回特定格式的数据，例如 JSON、XML 或任何其他格式，您不必担心。MVC 仅使用 JsonResult 返回 JSON 格式的数据。

**4** . 在 Web API 中，请求被映射到基于 HTTP 动词的动作，但在 MVC 中，它被映射到动作名称。

**5** . Asp.Net Web API 是新框架，是核心 ASP.NET 框架的一部分。Web API 中存在的模型绑定、过滤器、路由和其他 MVC 功能与 MVC 不同，存在于新的 System.Web.Http 程序集中。在 MVC 中，这些功能存在于 System.Web.Mvc 中。因此，Web API 也可以与 Asp.Net 一起使用，并作为一个独立的服务层。

**6** . 您可以在单个项目中混合 Web API 和 MVC 控制器来处理高级 AJAX 请求，这些请求可能以 JSON、XML 或任何其他格式返回数据并构建完整的 HTTP 服务。通常，这将被称为 Web API 自托管。

**7** . 当您混合使用 MVC 和 Web API 控制器并且想要实现授权时，您必须创建两个过滤器，一个用于 MVC，另一个用于 Web API，因为两者不同。

**8** . 此外，Web API 是轻量级架构，除了 Web 应用程序外，它还可以与智能手机应用程序一起使用。

原始来源在[这里](http://www.dotnettricks.com/learn/webapi/difference-between-aspnet-mvc-and-aspnet-web-api)

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-10-16T12:39:30.463

在某些时候，您可能想完全忘记 ASP.NET MVC。如果您是 .NET 开发人员，但您想构建单页应用程序（例如使用 Angular），您将希望获得 RESTful 服务 (WebAPI) 的好处，而无需 ASP.NET MVC 带来的所有不必要的臃肿。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-01-06T11:07:30.060

相似之处

1.  两者都继承自`ihttphandler`异步请求，因此基本上 apicontroller 或 mvc 控制器都是 web.http 的包装器

差异：

1.  MVC 控制器非常繁重，如果您可以查看它的定义，您可以看到它使用了多少接口和基本代码，Web API 是更轻的控制器，并通过其传递的参数来区分请求（是的，我们也可以更改它！）

2.  MVC 控制器有太多功能，例如返回视图、操作结果、javascript 结果等，但在 Web API 中具有 JSON 或 XML。

3.  API 用于实现 Restful(GET, POST, PUT, DELETE, OPTIONS) 服务，这些服务可以在任何地方独立托管而无需依赖视图，MVC 控制器无法支持它，因为它与视图紧密集成。

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-11-13T19:14:18.163

这张图片似乎显示了事情的不同之处和相似之处。我希望这对我有帮助。

[![在此处输入图像描述](../Images/1d56156b6265c4de4c0ca0d5177b1940.png)](https://i.stack.imgur.com/95usu.jpg)

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-08-25T11:00:45.490

ASP.NET MVC 和 ASP.NET Web api 它们都用于不同的目的

**ASP.NET**

ASP.NET 提供了三个用于创建 Web 应用程序的框架：Web 窗体、ASP.NET MVC 和 ASP.NET 网页。这三个框架都是稳定和成熟的，您可以使用其中任何一个来创建出色的 Web 应用程序。无论您选择何种框架，您都将随处获得 ASP.NET 的所有优势和功能。

每个框架都针对不同的开发风格。您选择哪一种取决于您的编程资产（知识、技能和开发经验）、您正在创建的应用程序类型以及您熟悉的开发方法的组合。所有三个框架都将在 ASP.NET 的未来版本中得到支持、更新和改进。

**MVC**

ASP.NET MVC 为您提供了一种强大的、基于模式的方法来构建动态网站，该方法可以清晰地分离关注点，并让您可以完全控制标记以实现愉快、敏捷的开发。ASP.NET MVC 包含许多特性，这些特性支持快速、友好的 TDD 开发，以创建使用最新 Web 标准的复杂应用程序。

**网络 API**

ASP.NET Web API 是一个框架，可让您轻松构建覆盖广泛客户端（包括浏览器和移动设备）的 HTTP 服务。ASP.NET Web API 是在 .NET Framework 上构建 RESTful 应用程序的理想平台。

你可以在这里阅读更多表格 [http://www.dotnet-tricks.com/Tutorial/webapi/Y95G050413-Difference-between-ASP.NET-MVC-and-ASP.NET-Web-API.html](http://www.dotnet-tricks.com/Tutorial/webapi/Y95G050413-Difference-between-ASP.NET-MVC-and-ASP.NET-Web-API.html)

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2017-04-27T10:17:29.197

ASP.NET MVC 专注于简化 HTML 的输出。ASP.NET Web API 专注于简化原始数据的输出。

在 WebForms 世界中，ASP.NET MVC 相当于 .aspx 页面，而 ASP.NET Web API 相当于 .asmx

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-07-26T14:22:08.810

Asp.Net MVC 用于创建返回视图和数据的 Web 应用程序，但 Asp.Net Web API 用于以简单的方式创建完整的 HTTP 服务，只返回数据而不返回视图。

Web API 有助于在 .NET 框架上构建 REST-ful 服务，并且它还支持内容协商（它是关于确定客户端可以接受的最佳响应格式数据。它可以是 JSON、XML、自托管，但不是在 MVC 中。

Web API 还负责根据请求中的 Accept 标头返回特定格式的数据，例如 JSON、XML 或任何其他格式，您不必担心。MVC 仅使用 JsonResult 返回 JSON 格式的数据。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-05-16T09:19:58.077

通常，WebAPI 用于 MVC 可以生成更多类型输出的数据服务。

WebAPI 无疑简化了我们创建数据服务的方式。为此目的，它既干净又容易。MVC 附带了一些更多的工具。

MVC 可以生成 WebAPI 可以输出的任何输出。在 MVC 中可以轻松地从模板生成输出。我在 WebAPI 中找不到这样做的理由。PHP 开发人员和老 ASP 程序员可能从过去就知道这种态度，您可以在其中构建包含 C# 代码的 HTML 文件。

WebAPI- DATA MVC - 数据、UI/HTML、XHTML、文件、模板等。**

# gsm - 自动接收手机短信到超级终端

> ID：11350855
> 
> 赞同：1
> 
> 时间：2012-07-05T19:02:54.190
> 
> 标签：gsm, at-command

我正在超级终端和我的手机上尝试使用 AT 命令作为 GSM 调制解调器。我正在使用 LG-C305，到目前为止，我已经能够成功使用很多 AT 命令。我遇到很多麻烦的是在超级终端上自动接收短信。

我可以从超级终端发送短信，阅读手机上已有的短信等。我不能做的是直接向超级终端接收新短信，或者至少是收到新短信的通知。

有人在这里问了完全相同的问题，但他解决问题的方式对我不起作用，我不知道如何联系他，这是他问题的链接：

[AT 命令接收自动短信通知](https://stackoverflow.com/questions/5980625/question-regarding-at-command-receiving-automatic-notification)

当我接到电话时，超级终端会通知我，这意味着连接正常，应该不是问题。

应该可以解决问题的 AT 命令是 AT+CNMI，但我用过很多次，有各种组合（AT+CNMI=1,2,0,0,0 / AT+CNMI= 1,1,0,0,0 / 等），但没有一个有效。

任何输入将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-11T10:31:04.357

设置：`at+cnmi=2,1`那么当有短信进来时手机会发送：存储号码`+CMTI: "ME",n` 在哪里。`n`使用`n`in`at+cmgr=n`阅读消息。

# c# - 将 z-index 添加到窗口

> ID：11350856
> 
> 赞同：0
> 
> 时间：2012-07-05T19:02:58.993
> 
> 标签：c#, javascript, jquery

如何将 zindex 值添加到以下字符串，以便弹出窗口始终位于顶部？

```
string winopen = "Window.Open('Details - " + name + "', 'test.aspx', 'dest=" + destination.Value + "&id=" + id.Value + "', [250,250], [100,100], true); return false;";
button1["onclick"] = winopen ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:09:45.713

你有没有尝试让你的窗口成为焦点？

```
var mywindow;
function OpenWindowOnTop(url)
{
   mywindow=window.open(url,'name', ... snip ...[250,250], [100,100], true);
   if (window.focus) {
       mywindow.focus()
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:10:20.223

您也可以尝试使用[Dependent Parameter](http://www.java2s.com/Tutorial/JavaScript/0380__Window/windowopen.htm)，它将弹出作为子窗口打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:07:42.720

添加`winopen.focus();`以将焦点带到新创建的窗口。

# haskell - 为什么 MVar 不适用于`par`？

> ID：11350857
> 
> 赞同：2
> 
> 时间：2012-07-05T19:03:02.697
> 
> 标签：haskell, concurrency, parallel-processing

只是好奇。如果我有 2 个线程使用 生成`forkIO`，它们之间的通信可以使用`MVar`. 我想知道在使用并行 Haskell 的 spark 时是否同样适用`par`。我知道`par`不会创建一个实际的线程，而只是一个指向可以并行发生的一些计算的指针。

以下代码编译，`main`引发以下错误：`thread blocked indefinitely in an MVar operation`.

```
t1 a = putMVar a "Hi"
t2 a = do
  v <- takeMVar a
  print v

main1 = do
  a <- newEmptyMVar
  forkIO (t1 a)
  forkIO (t2 a)

main = do
  a <- newEmptyMVar
  (t1 a) `par` (t2 a) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-05T19:19:13.010

> 我想知道在使用使用 par 创建的并行 Haskell 火花时是否同样适用

不，这真的不可能。这`MVar`是一种显式的、非确定性的通信机制，用于手动控制线程时使用。`par`sparks 是一个更高级别的抽象，GHC 运行时为您处理通信。

当您尝试触发 IO 操作时，什么都不会发生，因为触发的操作只能是纯计算。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T14:37:57.157

据我所知，一个线程应该先运行takeMVar，然后运行putMVar。这样，一个线程会阻止其他线程对 MVar 的访问。

# python - 我在 Python 中的图形收缩算法表现得很奇怪

> ID：11350864
> 
> 赞同：0
> 
> 时间：2012-07-05T19:03:21.697
> 
> 标签：python, algorithm, graph

我已经为这个问题写了一些代码。(python27)

图形表示为具有 freezeset 键和 freezeset 集的字典：

```
sample_graph = {frozenset([7]): set([frozenset([4]), frozenset([5]), frozenset([3])]), frozenset([5]): set([frozenset([7]), frozenset([2]), frozenset([1])]), frozenset([3]): set([frozenset([7]), frozenset([4]), frozenset([2]), frozenset([1])]), frozenset([6]): set([frozenset([4]), frozenset([2]), frozenset([1])]), frozenset([4]): set([frozenset([6]), frozenset([7]), frozenset([3]), frozenset([1])]), frozenset([1]): set([frozenset([6]), frozenset([4]), frozenset([5]), frozenset([2]), frozenset([3])]), frozenset([2]): set([frozenset([6]), frozenset([5]), frozenset([3]), frozenset([1])])} 
```

输出应该是一个只有两个节点的图，它们是图中所有节点的冻结集。此时它会遇到 KeyError。

```
def kargerMinCut(graph):
if len(graph) == 2:
    return graph
u = random.choice(graph.keys())   # u and v are frozensets, idea is that they form
v = random.choice(list(graph[u])) # a clique in a single frozenset
for node in graph:
    if node != u and node != v:
        links = graph[node]       
        if u in links or v in links:
            links.add(frozenset(tuple(u | v))) # combine u and v to form one link
            links.discard(u)                   # delete old links to u and v
            links.discard(v)            
            graph[node] = links
graph[u | v] = graph[u] | graph[v]             # new key for u and v 
del graph[u], graph[v]                         # u and v are no longer needed
return kargerMinCut(graph) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:08:09.767

我认为问题可能出在`is`关键字的使用上。请注意，在 python 中，`is`仅当两个参数引用*完全相同的*对象时才返回 true （相当于`char* == char*`C++ 中。`==`如果内容相同，则运算符返回 true （相当于`string == string`C++ 中）。

所以与其`is not`尝试`!=`。

在 python 中遍历图形中的元素时，我曾经遇到过同样的问题。:)

PS--另外，我会把下面这行写成一个完整的`if`：

```
links.add(frozenset(tuple(u | v))) if u in links or v in links else None 
```

# batch-file - 从批处理调用时Perl脚本不返回任何值？

> ID：11350867
> 
> 赞同：0
> 
> 时间：2012-07-05T19:03:36.393
> 
> 标签：batch-file, for-loop

我正在从批处理中调用 perl 脚本并提供适当的参数，它应该返回 1、2、3 或 4。但事实并非如此。我从命令行检查了 Perl 的输出，它们输出了正确的结果，我认为它在批处理语法中

### 批：

```
@echo off 
setlocal enabledelayedexpansion
FOR /F "delims=*" %%I IN ('Perl C:/ExecutionSDKTest_10.2.2/TestProp1noRefCheck.pl 844') DO     set lineCase=%%I  
echo line case is !lineCase! 
```

### 珀尔：

```
use strict;
use warnings;
sub main1;

my $arg1 =shift;
main1($arg1);
exit;
sub main1
{
            #Returns 1,2,3 Depending on testNum passed
            my @gp1= (829,845,851,859,864,867);
            my @gp2= (861,863,865);
            # my @gp4= (826-828,830-839,843-844,847-850,852-854,860-862,883);
    # my @gp3= (877-882,884);
            my $val1=1;
            my $val2=2;
            my $val3=3;
            my $val4=4;

            if((grep /^$arg1$/,@gp1) || ($arg1 >=822 && $arg1<=824))
            {     
                            # print "$val1\n";
                            return $val1;

            } elsif ((grep /^$arg1$/,@gp2) || ($arg1>=855 && $arg1<=858))
            {
            #print "$val2\n";
                            return $val2;
            } elsif (($arg1==884) || ($arg1>=877 && $arg1<=882))
            {
            #print "$val3\n";
                            return $val3;
            } else
            {
                #print "$val4\n";
                            return $val4;

            }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T03:41:40.663

我做了一个`test.cmd`这样的：

```
@echo off 
setlocal enabledelayedexpansion
for %%I in (%*) do (
   call perlfake %%I
   set lineCase=!ERRORLEVEL!
   echo line case [for %%I] is !lineCase!
) 
```

然后`perlfake.cmd`在同一目录下创建：

```
@echo off 
set /a returnvalue="%1 %% 4 + 1"
REM echo (%1 mod 4) + 1 = %returnvalue%
exit /b %returnvalue% 
```

然后调用`test 1 2 3 4 844 35`。

结果：

```
line case [for 1] is 2
line case [for 2] is 3
line case [for 3] is 4
line case [for 4] is 1
line case [for 844] is 1
line case [for 35] is 4 
```

确定实际返回值的逻辑与您的 perl 代码不同，但正如您所见，这只是假代码。

因此，通过将调用更改为：

```
REM call perlfake %%I
call Perl C:/ExecutionSDKTest_10.2.2/TestProp1noRefCheck.pl %%I 
```

关于您的 Perl 脚本，当您执行以下操作时，我可以看到您正在丢弃 main1 的返回值：

```
main1($arg1);
exit; 
```

你想要这样的东西：

```
my $result = main1($arg1);
exit $result; 
```

像这样退出 Perl 将设置错误级别。

*编辑：*

我现在已经下载了 ActiveState 的 Perl 5.14.2，并更改了我的批处理以调用您的 perl 脚本，并返回 $result。现在一切正常，例如： `test.cmd 844 861`

回报：

```
line case [for 844] is 4
line case [for 861] is 2 
```

# ubuntu - 某些主机名的单独名称服务器

> ID：11350868
> 
> 赞同：1
> 
> 时间：2012-07-05T19:03:41.063
> 
> 标签：ubuntu, dns, nameservers

在我的家庭局域网上，我有许多计算机。它们连接到将我连接到 Internet 并充当 LAN 上的 DHCP 服务器和名称服务器的路由器。

我的一些计算机是 Ubuntu 计算机，我正在尝试在它们上设置一个好的 /etc/resolv.conf。问题是我的路由器作为名称服务器*真的很*糟糕（非常非常慢），所以我更喜欢使用外部名称服务器，例如 Google 的名称服务器或 OpenDNS。

但是这些公共域名服务器显然不知道我本地机器的 IP 地址。

所以这是我的问题：有没有办法配置 /etc/resolv.conf 以便某些主机名由一个名称服务器解析，而其他主机名由另一个名称服务器解析？

（我的猜测是否定的，在这种情况下，我将不得不设置固定的 IP 地址。但我希望避免这种情况。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:09:30.207

在需要在本地名称服务器和 Internet 名称服务器之间进行选择的计算机上安装本地转发名称服务器。使用[Unbound](http://unbound.net/)，因为它是轻量级且易于为此任务配置的。

将其放入未绑定配置中：

```
stub-zone:
        name: "internal.example.com"
        stub-host: internal.nameserver.ip.address
forward-zone:
        name: "."
        forward-host: internet.nameserver.ip.address 
```

放入以便本地主机上的应用程序`nameserver 127.0.0.1`将`/etc/resolv.conf`使用此 Unbound 实例。

现在，当您尝试解析时`myhost.internal.example.com`，它会将查询发送到`internal.nameserve.ip.address`，当您尝试解析`www.google.com`时，它将查询发送到`internet.nameserver.ip.address`。

希望您的所有本地主机都归类在上面的单个本地域 ( `internal.example.com`) 下。不幸的是，您的廉价路由器+DHCPserver+DNSserver 很可能会将它知道的所有主机名都粘贴到其合成的根区域中。如果是这种情况，那么您必须将它们一一列出，如下所示：

```
stub-zone:
        name: "hostname1"
        stub-host: internal.nameserver.ip.address
stub-zone:
        name: "hostname2"
        stub-host: internal.nameserver.ip.address
stub-zone:
        name: "hostname3"
        stub-host: internal.nameserver.ip.address
forward-zone:
        name: "."
        forward-host: internet.nameserver.ip.address 
```

这个问题当然是现在你在不同的机器上有一堆 Unbound 实例，你必须配置和设置。您可以通过让 LAN 上的一台主机提供此服务并充当所有其他主机的递归名称服务器来避免这种情况，但如果您要这样做，那么您最好将该主机设置为 DHCP 服务器和权威名称服务器也适用于本地主机，并首先摆脱缓慢的嵌入式 DHCP+DNS 服务器。

# spring - Spring：如何通过 httpinvokerservice 返回 httpinvoker-proxy 类

> ID：11350871
> 
> 赞同：1
> 
> 时间：2012-07-05T19:03:49.800
> 
> 标签：spring, proxy-classes, httpinvoker

我有一个带有 spring 和 HttpInvokationServiceExporter 的小型应用程序服务器（tomcat）。

这些课程在服务器上：

```
public interface IAccount{
    public IUser getUser();
}

public class Account implements IAccount{
    private IUser user; 

    public Account(IUser user){
        this.user = user
    } 

    @Override 
    public IUser getUser(){return this.user}
}

public interface IUser{
    public String getName();
}

public class User implements IUser(){
    private String name;

    public User(String name){
        this.name = name;
    }

    @Override
    public String getName(){ return this.name) }
} 
```

我的 HttpInvokerService Exporter 将 Account-class 的一个实例导出到使用 IAccount 作为服务接口的客户端，到目前为止一切顺利。

如果我现在尝试在客户端调用 getUser() 方法，客户端会尝试将返回的对象反序列化为 User-Object 并抛出异常，因为它不知道 User 类。

但我希望它像从 HttpInvokerServiceExporter 获得的代理，以便使用 IUser 作为服务接口从服务器上的用户类调用方法，而不是将结果反序列化到用户类。客户端应该只知道接口而不知道这些的实现。

我希望您能理解我的问题，如果您需要在服务器端和客户端或 web.xml 上查看我的 applicationContext.xml，请随时询问:)

Ps：也可以随意编辑标题，因为我几乎无法用几句话描述我的问题

# xml - xQuery 将字符串转换为 xhtml

> ID：11350876
> 
> 赞同：1
> 
> 时间：2012-07-05T19:04:26.450
> 
> 标签：xml, xquery, marklogic

我的脚本构建了一个我需要输出到的字符串`xhtml`，但`xdmp:unquote()`似乎不喜欢带引号的属性值，特别是引号。我最终在输出中的实际引号 (") 应该是引号字符实体。

这是字符串：

```
let $title_opts :=  if ( "M.D." eq $acad_title )
                then
                    '<option selected="SELECTED" value="M.D.">M.D.</option><option value="D.O.">D.O.</option>'
                else if ( "D.O." eq $acad_title ) 
                then
                    '<option value="M.D.">M.D.</option><option selected="SELECTED" value="D.O.">D.O.</option>'
                else
                    '<option value="M.D.">M.D.</option><option value="D.O.">D.O.</option>' 
```

和输出：

```
return <select name="title" id="title">
            { xdmp:unquote( $title_opts ) }
        </select> 
```

尖括号可以很好地使用`xdmp:unquote()`，但引号不能。如何让所有内容正确显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T20:34:37.643

不要将 XQuery 元素构造为字符串。如果您需要返回多个顶级元素并且无法将它们包装在另一个元素中，请使用序列。

```
let $title_opts :=  if ( "M.D." eq $acad_title )
                then
                (
                    <option selected="SELECTED" value="M.D.">M.D.</option>,
                    <option value="D.O.">D.O.</option>
                )
                else if ( "D.O." eq $acad_title ) 
                then
                (
                    <option value="M.D.">M.D.</option>,
                    <option selected="SELECTED" value="D.O.">D.O.</option>
                )
                else
                (
                    <option value="M.D.">M.D.</option>,
                    <option value="D.O.">D.O.</option>
                ) 
```

无论如何最好使用`switch`-statement：

```
let $title_opts := switch ($acad_title) 
    case "M.D." return
        (
            <option selected="SELECTED" value="M.D.">M.D.</option>,
            <option value="D.O.">D.O.</option>
        )
    case "D.O." return
        (
            <option value="M.D.">M.D.</option>,
            <option selected="SELECTED" value="D.O.">D.O.</option>
        )   
    default return
        (
            <option value="M.D.">M.D.</option>,
            <option value="D.O.">D.O.</option>
        ) 
```

或者，如果您使用元素构造函数，则仅根据需要添加属性。

```
let $title_opts :=
    (
        element { "option" } {
            if ( "M.D." eq $acad_title )
            then attribute { "selected" } {"selected" }
            else (),
            attribute { "value" } { "M.D." },
            "M.D."
        },
        element { "option" } {
            if ( "D.O." eq $acad_title )
            then attribute { "selected" } {"selected" }
            else (),
            attribute { "value" } { "D.O." },
            "D.O."
        }
    ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-09T15:24:39.840

看来您正在尝试为 xhtml 构建选项元素。虽然我喜欢提供的许多其他解决方案中的 XQuery，但我相信代码有太多硬编码。为什么不将生成选项 XHTML 元素的工作转移到辅助函数中呢？

```
declare function local:xhtml-options( $options as xs:string*, $selected as xs:string*) as element(option)* {

    for $option in $options
    return
        element option {
            if($option = $selected) then attribute selected {"SELECTED"} else (),
            attribute value {$option},
            text { $option }
        }

};

local:xhtml-options( ("M.D.", "D.0"), $acad_title ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:53:47.300

好的，所以看起来我必须将我的选项构建为选择元素，而不是字符串：

```
let $title_opts :=  if ( "M.D." eq $acad_title )
                then
                    element select {
                        attribute name {"title"}, 
                        attribute id {"title"}, 
                        element option {
                            attribute selected {"SELECTED"},
                            attribute value {"M.D."},
                            "M.D."
                        }, 
                        element option {
                            attribute value {"D.O."},
                            "D.O."
                        }
                    }
                else if ( "D.O." eq $acad_title ) 
                then
                    element select {
                        attribute name {"title"}, 
                        attribute id {"title"}, 
                        element option {
                            attribute value {"M.D."},
                            "M.D."
                        }, 
                        element option {
                            attribute selected {"SELECTED"},
                            attribute value {"D.O."},
                            "D.O."
                        }
                    }
                else
                    element select {
                        attribute name {"title"}, 
                        attribute id {"title"}, 
                        element option {
                            attribute value {"M.D."},
                            "M.D."
                        }, 
                        element option {
                            attribute value {"D.O."},
                            "D.O."
                        }
                    } 
```

返回 { $title_opts }

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-24T05:43:46.137

如果您要完全生成每个案例，您可以使用较短的文字 xml 构造函数，因为所有 qnames 都是常量

...

使用动态构造函数的建议是因为您可以更轻松地有条件地生成元素的一部分，从而减少重复代码。完全构建每个变体会破坏该好处......产生相同的结果但使用最多的代码。

imho dericksons 是最优雅的

所有变体在功能上都是等效的，并且应该具有相似的性能

# c - 如何确定操作系统是否是 C 中的 POSIX？

> ID：11350878
> 
> 赞同：28
> 
> 时间：2012-07-05T19:04:37.543
> 
> 标签：c, gcc, posix

> **相关问题**
> [如何在 C/C++ 中检测操作系统？](https://stackoverflow.com/questions/430424/how-can-i-detect-the-operating-system-in-c-c)

如何找出我在 GCC 或 ANSI C 中运行的操作系统？

如果我能知道我是否在 POSIX 上运行，我会很好。

* * *

更新：

无论是在编译时还是运行时，对我来说都没有区别。我在调试例程中使用它，所以性能并不那么重要。

我正在寻找路径分隔符。Windows 和 Unix/Linux/BSD 就可以了。

而且，我正在尝试在路径上找到基本名称。我找到了一些解决方案，但这些解决方案包含很多我不想要的内容。我要[修改这个解决方案](http://www.koders.com/c/fidEB79B7607A210C3BB7B813E793465F9D469AE912.aspx)。

* * *

我在 Mac OS X 10.4.11 上，按照[这个 URL](http://bytes.com/topic/c/answers/215864-determine-os-compiler)，我执行并得到以下输出：

```
mac $ touch myfile.c
mac $ gcc -std=c99 -E -dM myfile.c
#define __DBL_MIN_EXP__ (-1021)
#define __FLT_MIN__ 1.17549435e-38F
#define __CHAR_BIT__ 8
#define __WCHAR_MAX__ 2147483647
#define __DBL_DENORM_MIN__ 4.9406564584124654e-324
#define __FLT_EVAL_METHOD__ 0
#define __DBL_MIN_10_EXP__ (-307)
#define __FINITE_MATH_ONLY__ 0
#define __GNUC_PATCHLEVEL__ 1
#define __SHRT_MAX__ 32767
#define __LDBL_MAX__ 1.79769313486231580793728971405301e+308L
#define __APPLE_CC__ 5367
#define __UINTMAX_TYPE__ long long unsigned int
#define __LDBL_MAX_EXP__ 1024
#define __SCHAR_MAX__ 127
#define __USER_LABEL_PREFIX__ _
#define __STDC_HOSTED__ 1
#define __LDBL_HAS_INFINITY__ 1
#define __DBL_DIG__ 15
#define __FLT_EPSILON__ 1.19209290e-7F
#define __LDBL_MIN__ 2.00416836000897277799610805135016e-292L
#define __ppc__ 1
#define __strong 
#define __APPLE__ 1
#define __DECIMAL_DIG__ 33
#define __LDBL_HAS_QUIET_NAN__ 1
#define __DYNAMIC__ 1
#define __GNUC__ 4
#define __DBL_MAX__ 1.7976931348623157e+308
#define __DBL_HAS_INFINITY__ 1
#define __STRICT_ANSI__ 1
#define __weak 
#define __DBL_MAX_EXP__ 1024
#define __LONG_LONG_MAX__ 9223372036854775807LL
#define __GXX_ABI_VERSION 1002
#define __FLT_MIN_EXP__ (-125)
#define __DBL_MIN__ 2.2250738585072014e-308
#define __DBL_HAS_QUIET_NAN__ 1
#define __REGISTER_PREFIX__ 
#define __NO_INLINE__ 1
#define _ARCH_PPC 1
#define __FLT_MANT_DIG__ 24
#define __VERSION__ "4.0.1 (Apple Computer, Inc. build 5367)"
#define __BIG_ENDIAN__ 1
#define __SIZE_TYPE__ long unsigned int
#define __FLT_RADIX__ 2
#define __LDBL_EPSILON__ 4.94065645841246544176568792868221e-324L
#define __NATURAL_ALIGNMENT__ 1
#define __FLT_HAS_QUIET_NAN__ 1
#define __FLT_MAX_10_EXP__ 38
#define __LONG_MAX__ 2147483647L
#define __FLT_HAS_INFINITY__ 1
#define __STDC_VERSION__ 199901L
#define _BIG_ENDIAN 1
#define __LDBL_MANT_DIG__ 106
#define __WCHAR_TYPE__ int
#define __FLT_DIG__ 6
#define __INT_MAX__ 2147483647
#define __LONG_DOUBLE_128__ 1
#define __FLT_MAX_EXP__ 128
#define __DBL_MANT_DIG__ 53
#define __WINT_TYPE__ int
#define __LDBL_MIN_EXP__ (-968)
#define __MACH__ 1
#define __LDBL_MAX_10_EXP__ 308
#define __DBL_EPSILON__ 2.2204460492503131e-16
#define __INTMAX_MAX__ 9223372036854775807LL
#define __FLT_DENORM_MIN__ 1.40129846e-45F
#define __PIC__ 1
#define __FLT_MAX__ 3.40282347e+38F
#define __FLT_MIN_10_EXP__ (-37)
#define __INTMAX_TYPE__ long long int
#define __GNUC_MINOR__ 0
#define __DBL_MAX_10_EXP__ 308
#define __LDBL_DENORM_MIN__ 4.94065645841246544176568792868221e-324L
#define __PTRDIFF_TYPE__ int
#define __LDBL_MIN_10_EXP__ (-291)
#define __LDBL_DIG__ 31
#define __POWERPC__ 1
mac $ 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-07-05T19:25:01.183

Single UNIX Specification 需要存在[`unistd.h`](http://pubs.opengroup.org/onlinepubs/7908799/xsh/unistd.h.html)，它可以告诉您 POSIX 版本（通过`_POSIX_VERSION`宏）。

*但是，`unistd.h`如果您还不知道您实际上是在 UNIX 上编译，您怎么能包含呢？*

这就是[这个 GCC 文档](http://gcc.gnu.org/onlinedocs/cpp/System_002dspecific-Predefined-Macros.html)派上用场的地方。根据它，测试是否存在或评估是否真实`__unix__`应该告诉您系统是 UNIX。所以：

```
#ifdef __unix__
/* Yes it is a UNIX because __unix__ is defined.  */

#include <unistd.h>

/* You can find out the version with _POSIX_VERSION.
..
..  */

#endif 
```

`__unix__`未在 Mac OS X 上定义，因此要考虑到这一点，您可以改为：

```
#if defined (__unix__) || (defined (__APPLE__) && defined (__MACH__)) 
```

要获取系统上特定于系统的预定义宏列表，您可以执行：

```
cpp -dM /dev/null 
```

例如，我的 GNU/Linux 系统还另外定义`__linux__`了`__gnu_linux__`一些`__unix__`其他的东西。

* * *

您必须查看的另一个有用文档是[此 Wiki](http://sourceforge.net/apps/mediawiki/predef/index.php?title=Operating_Systems#UNIX_Environment)。

它[继续提出一种](http://sourceforge.net/apps/mediawiki/predef/index.php?title=Standards#Unix_Standards)以类似于我上面描述的方式检测 POSIX 的存在和版本的方法。

* * *

**编辑：**由于您确实想要执行所有这些操作，因为您想决定使用哪个目录分隔符，请查看[此 URL](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365247%28v=vs.85%29.aspx)。它说：

> **注意** Windows API 中的文件 I/O 函数将“/”转换为“\”作为将名称转换为 NT 样式名称的一部分，除非使用“\?\”前缀，如以下部分所述。

我不会在 Windows 上编程，或者对此一无所知，所以我不能说我已经依靠这个了~~。~~

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-22T01:38:17.453

[可以使用autoconf 工具](https://www.gnu.org/software/autoconf/manual/autoconf-2.63/html_node/Header-Templates.html "配置标题模板")来解决您的问题`unistd.h`，然后`#define HAVE_UNISTD_H 1`在生成的`config.h`if`unistd.h`中添加一行，但我发现 autoconf 有点难以使用，而且非常过时。

如果你有任何机会使用**cmake**，你可以用同样的方法解决它。你可以创建一个`config.h.in`包含这样的东西：

```
#ifndef CONFIG_H
#define CONFIG_H

#cmakedefine HAVE_UNISTD_H 1

#endif 
```

你的项目`CMakeLists.txt`看起来像这样：

```
project(MyApp)

include(CheckIncludeFiles)
check_include_file("unistd.h" HAVE_UNISTD_H)

configure_file(config.h.in config.h @ONLY)

add_executable(${PROJECT_NAME} main.c) 
```

然后从命令行生成：

```
cmake . -G"Unix Makefiles" 
```

或生成 Xcode 项目（仅限 OSX）：

```
cmake . -G"Xcode" 
```

或生成 Visual Studio 2013 解决方案项目（仅限 Windows）：

```
cmake . -G"Visual Studio 12 2013 Win64" 
```

**cmake 生成器 = 史诗般的胜利**

如果您的操作系统是 POSIX，那么您生成的`config.h`应该如下所示：

```
#ifndef CONFIG_H
#define CONFIG_H

#define HAVE_UNISTD_H 1

#endif 
```

否则，它将如下所示：

```
#ifndef CONFIG_H
#define CONFIG_H

/* #undef HAVE_UNISTD_H */

#endif 
```

然后你就可以自由地使用你信任的生成`config.h`：

```
#include "config.h"

#if HAVE_UNISTD_H
#   include <unistd.h>
#endif

int main (int argc, const char * argv[])
{
#if defined(_POSIX_VERSION)
     /* POSIX code here */
#else
     /* non-POSIX code here */
#endif
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-05-20T21:09:35.430

我知道这是一个死问题，但我不得不添加这个。

在 C++17 中，现在有一个`__has_include`可以在`#if`指令中使用的宏。这意味着您可以像这样检查 posix 合规性：

```
#if __has_include(<unistd.h>)
    // System is posix-compliant
#else
    // System is not posix-compliant
#endif 
```

干杯：D！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-07T02:39:00.557

这是我最终得到的结果：

```
#include <stdio.h>
/*
NAME
    basename -- return pointer to last component of a pathname

Distribution: This function is in the public domain. 

Origin of function:
http://www.koders.com/c/fidEB79B7607A210C3BB7B813E793465F9D469AE912.aspx

SYNOPSIS
    char *basename (const char *name)

DESCRIPTION
    Given a pointer to a string containing a typical pathname
    (/usr/src/cmd/ls/ls.c for example), returns a pointer to the
    last component of the pathname ("ls.c" in this case).

Restrictions:
    Presumes a UNIX or DOS/Windows style path with UNIX or DOS/Windows 
    style separators.
*/

/*
NAME:
    basename: 

Function:
    return pointer to last component of a pathname

Distribution: 
    This function is in the public domain. 

Origin of function:
    http://www.koders.com/c/fidEB79B7607A210C3BB7B813E793465F9D469AE912.aspx

SYNOPSIS:
    char *basename (const char *name)

DESCRIPTION:
    Given a pointer to a string containing a typical pathname
    (/usr/src/cmd/ls/ls.c for example), returns a pointer to the
    last component of the pathname ("ls.c" in this case).

Restrictions:
    Presumes a UNIX or DOS/Windows style path with UNIX or
    DOS/Windows style separators.
    Windows volumes are only a-zA-Z.
    The original code suggests ISALPHA.

*/

char * basename (const char *name)
{
const char *base;
// predefined OS symbols
// http://sourceforge.net/apps/mediawiki/predef/index.php?title=Operating_Systems#UNIX_Environment

#ifndef DIR_SEPARATOR
#  define DIR_SEPARATOR '/'
#endif

#ifndef DIR_SEPARATOR_2 
#  define DIR_SEPARATOR_2 '\\'
#endif

// Check if we are running Unix like os
//   else assume Windows.  Note if we guess wrong, it's not
//   so bad because Windows includes the Unix separator.
#if defined (__unix__) || (defined (__APPLE__) && defined (__MACH__))
#  define IS_DIR_SEPARATOR(ch) ((ch) == DIR_SEPARATOR)
#else
#  define IS_DIR_SEPARATOR(ch) \
(((ch) == DIR_SEPARATOR) || ((ch) == DIR_SEPARATOR_2))
/* Skip over the disk name in MSDOS pathnames. */
if (isalpha(name[0]) && name[1] == ':') 
    name += 2;
#endif

for (base = name; *name; name++)
    {
    if (IS_DIR_SEPARATOR (*name))
        {
        base = name + 1;
        }
    }
return (char *) base;
}

int main (int argc, const char * argv[]) {
    /* Return the basename of a pathname. */

#define S1 "/usr/src/cmd/ls/ls.c"
#define S2 "/usr/src/cmd/ls/abc"
#define S3 "a:/usr/src/cmd/ls/def"
#define S4 "ghi"
#define S5 "jkl.txt"
#define S6 "d:\\usr\\src\\cmd\\mno.txt"
#define S7 "d:pqm.txt"

printf(S1 "  \t is %s\n",basename(S1));
printf(S2 "  \t is %s\n",basename(S2));
printf(S3 "  \t is %s\n",basename(S3));
printf(S4 "  \t is %s\n",basename(S4));
printf(S5 "  \t is %s\n",basename(S5));
printf(S6 "  \t is %s\n",basename(S6));
printf(S7 "  \t is %s\n",basename(S7));
    return 0; 
```

}

# javascript - 这两种调用 JavaScript 匿名函数有什么区别？

> ID：11350882
> 
> 赞同：0
> 
> 时间：2012-07-05T19:04:54.140
> 
> 标签：javascript

这两种运行 JavaScript 函数的方式有什么区别？

```
(function() {
    //Code #1
})(); 
```

和

```
(function() {
    //Code #2
}()); 
```

我已经看过这两个，我倾向于使用#1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:10:12.937

无——它们都是自执行匿名函数，从父命名空间中隐藏变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:05:54.850

根本没有功能上的区别……只是一种风格。

# scala - 此 PHP 行的 Scala MD5 等效项

> ID：11350884
> 
> 赞同：1
> 
> 时间：2012-07-05T19:04:57.277
> 
> 标签：scala

这个 MD5 调用有 3 个参数，“MD5”，字符串，然后是 $transaction_key

```
hash_hmac("md5", $api_login_id . "^" . $fp_sequence . "^" . $fp_timestamp . "^" . $amount . "^", $transaction_key); 
```

我将如何在 Scala 中重现它？我找不到需要“密钥”的 MD5 函数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-05T19:39:14.093

[这是从这个 Java 答案](https://stackoverflow.com/a/11102291/334519)派生的 Scala 版本：

```
def encode(message: String, key: String) = {
  val mac = javax.crypto.Mac.getInstance("HmacMD5")
  mac.init(new javax.crypto.spec.SecretKeySpec(key.getBytes, "HmacMD5"))
  mac.doFinal(message.getBytes).map("%02x".format(_)).mkString
} 
```

`hash_hmac`在几个快速测试中，它为我产生了与 PHP 相同的输出。

# ajax - wordpress wpdb->更新不起作用

> ID：11350886
> 
> 赞同：2
> 
> 时间：2012-07-05T19:05:01.600
> 
> 标签：ajax, wordpress

我无法使用 wpdb->update 进行更新

这是我的代码：

```
$tweet = $_POST['tweet'];
$id = $_POST['id'];
$wpdb->update( $table_name, array('id' => $id , 'tweet' => $tweet ), array( 'id' => $id ),array("%d","%s"), array("%d") ); 
```

我认为没有错，但我无法更新

感谢先进

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T11:47:14.250

```
$data_update = array('title' => $title ,'parent_id' => $parent_id);
$data_where = array('id' => $id);
$wpdb->update($table_name , $data_update, $data_where); 
```

简单&工作;)

# c# - LINQ 查询以选择对象和计数

> ID：11350888
> 
> 赞同：1
> 
> 时间：2012-07-05T19:05:09.313
> 
> 标签：c#, linq, fluent-nhibernate

我正在尝试进行查询以生成装箱单，并且需要一般订单信息以及订单包含的物品数量。

这是我的基本查询：

```
var orders = (from cert in _orderRepository.GetAll()
                           where !cert.PrintedPackSlip
                           orderby cert.CardNumber
                           //group cert by cert.CardNumber
                           //into certGrp
                           select cert); 
```

我需要做的是按 CardNumber 分组并计算有多少订单有该卡号。

如果可能的话，我希望它像*字典*一样出来

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:39:14.837

如果我理解正确，对于每个订单，您要列出该卡号的订单总数，在这种情况下，以下应该有效：

```
 var orders = (from cert in _orderRepository.GetAll()
                      join cert2 in _orderRepository.GetAll()
                      on cert.CardNumber equals cert2.CardNumber
                      where !cert.PrintedPackSlip 
                      where !cert2.PrintedPackSlip
                      group cert by cert
                      into certGrp
                      select certGrp).ToDictionary(o => o.Key,o => o.Count()) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:10:52.933

可能是这样的：

```
var orders = from cert in _orderRepository.GetAll()
                       where !cert.PrintedPackSlip
                       orderby cert.CardNumber
                       group cert by cert.CardNumber into certGrp
                       select new {CardNumber = certGrp.Key, Count = certGrp.Count());

foreach(var item in orders)
    Console.WriteLine("item.CardNumber: " + item.CardNumber + " item.Count: " + item.Count.ToString()); 
```

# php - 从 CodeIgniter 中的库调用 get_instance 时出现错误 500

> ID：11350889
> 
> 赞同：1
> 
> 时间：2012-07-05T19:05:10.827
> 
> 标签：php, codeigniter

我正在尝试使用从“会话”库加载的一些附加信息来扩展 CodeIgniter 日志库。根据此处的信息，这似乎是可能的：http: [//codeigniter.com/user_guide/general/creating_libraries.html](http://codeigniter.com/user_guide/general/creating_libraries.html)

因此，我在应用程序/库中创建了一个名为 MY_Log.php 的文件，其中包含以下内容：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class MY_Log extends CI_Log {
    function __construct() {
        parent::__construct();
        $CI =& get_instance();
        $CI->load->library('session');
    }
}
?> 
```

问题是，每当我从该文件中调用 get_instance 时，都会收到“500 内部服务器错误”。我尝试用最新版本（2.1.2）的新副本换出我的 codeigniter 系统目录，但我得到了同样的错误。我究竟做错了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:46:08.037

CI_Log 库不再存在 - 这反过来也意味着文件夹`MY_Log.php`内的`core`文件将不再自动加载。

这意味着您应该删除前一个类的扩展并在您的库中实现所需的功能。

供将来参考，当您收到 500 服务器错误时，您可以查看服务器上的错误日志。它很可能会告诉您出了什么问题。

# perl - 使用 Parse::RecDescent 解析带有嵌套括号的字符串

> ID：11350898
> 
> 赞同：3
> 
> 时间：2012-07-05T19:06:00.363
> 
> 标签：perl, parsing, parentheses, parse-recdescent

我正在尝试使用[`Parse::RecDescent`](https://metacpan.org/module/Parse%3a%3aRecDescent)可以解析括号表达式和一元运算符的解析器`?`。

到目前为止，我在创建解析器时失败了，因为规则`expression`是左递归的：

```
use strict;
use warnings;
use Parse::RecDescent;

my $test = <<END;
((foo)? bar)
END

my $grammar = q(
    parse: expression(s)
    expression: string | parend | expression(s)
    parend : "(" (string | expression) ")" /\??/
    string : /\w+/ /\??/

);
my $parser = Parse::RecDescent->new($grammar);
my $result = $parser->parse($test);
if($result){
    print $result;
}else{
    print STDERR "Invalid grammar\n";
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-05T19:31:17.327

首先，您从最低优先级到最高优先级。

```
parse  : expr /\Z/

expr   : list

list   : unary(s?)

unary  : unary '?'
       | term

term   : '(' expr ')'
       | STRING

STRING : /\w+/ 
```

当然，

```
unary  : unary '?'
       | term 
```

不起作用，因为它是左递归的。[Parse::RecDescent 中的运算符关联性和消除左递归](http://www.perlmonks.org/?node_id=553889)可以帮助您摆脱它。我们得到

```
unary  : term unary_(s?)
unary_ : '?' 
```

但这不会为我们构建正确的树。因此，让我们从扁平化“ `(s?)`”开始。

```
unary  : term unary_
unary_ : '?' unary_
       | 
```

然后我们可以使用 subrule args 来创建正确的树。

```
unary  : term unary_[ $item[1] ]
unary_ : '?' unary_[ [ 'postfix?' => $arg[0] ] ]
       | { $arg[0] } 
```

* * *

全部一起：

```
use strict;
use warnings;
use Data::Dumper      qw( Dumper );
use Parse::RecDescent qw( );

my $grammar = <<'END';
   {
      use strict;
      use warnings;
   }

   parse  : expr /\Z/ { $item[1] }

   expr   : list

   list   : unary(s?) { [ $item[0] => @{ $item[1] } ] }

   unary  : term unary_[ $item[1] ]
   unary_ : '?' unary_[ [ 'postfix?' => $arg[0] ] ]
          | { $arg[0] }

   term   : '(' expr ')' { $item[2] }
          | STRING { [ string => $item[1] ] }

   STRING : /\w+/

END

my $parser = Parse::RecDescent->new($grammar)
   or die "Invalid grammar\n";
my $tree = $parser->parse("((foo bar)? baz)\n")
   or die "Invalid text\n";
print(Dumper($tree)); 
```

# c++ - C++ 引用和引用参数

> ID：11350899
> 
> 赞同：0
> 
> 时间：2012-07-05T19:06:00.273
> 
> 标签：c++

请看下面的代码片段——我已经声明了 3 个函数（即 1 个传递一个 int 和其他传递对一个 int 的引用）。执行程序后，我发现调用函数（tripleByReference）后“count”变量的值没有改变以反映它的三元组（count 仍然等于 5）。然而，调用函数 (tripleByReferenceVoid) 会修改变量，但这是因为变量（计数）直接发生了变化。

我知道，通过引用传递，调用者使被调用函数能够直接访问调用者的数据并对其进行修改，但这无法通过将变量传递给函数（tripleByReference）来实现 - 请帮助我理解这一点。

```
#include <iostream>
using namespace std;

/* function Prototypes */
int tripleByValue(int);
int tripleByReference(int &);
void tripleByReferenceVoid(int &);

int main(void)
{
    int count = 5;

    //call by value
    cout << "Value of count before passing by value is: " << count << endl;
    cout << "Passing " << count << " by value, output is: "
         << tripleByValue(count) << endl;
    cout << "Value of count after passing by value is: " << count << endl;

    //call by reference - using int tripleByReference
    cout << "\n\nValue of count before passing by reference is: " << count << endl;
    cout << "Passing " << count << " by reference, output is: " 
         << tripleByReference(count) << endl;
    cout << "Value of count after passing by reference is: " << count << endl;

     //call by reference - using void tripleByReference
     tripleByReferenceVoid(count);
     cout << "\n\nValue of count after passing by reference is: " << count << endl;
    cout << endl;
    system("PAUSE");
    return 0;
}//end main

int tripleByValue (int count) {
    int result = count * count * count;
    return result; 
}//end tirpleByValue function

int tripleByReference(int &count) {
     int result = count * count * count;
     return result; //perform calcs     
}//end tripleByReference function

void tripleByReferenceVoid(int &count) {
     count *= count * count;
}//end tripleByReference function 
```

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:08:51.940

`tripleByReference`不会更改的值，`count`因为您从未分配给它。您正在返回值。

`tripleByReferenceVoid`是不同的。您正在分配给它 ( `count *= ...`)，这就是反映这些更改的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-05T19:13:43.870

在您的函数`tripleByReference`中，您甚至没有尝试修改 的值`count`，而在您的函数中，`tripleByReferenceVoid`您正在显式修改`count`。因此，明显和预期的效果：后一个函数修改`count`，前者没有。即，这些功能完全按照您明确和有意识地要求他们做的事情，而且只做您明确要求他们做的事情。

像这样的问题很难回答，因为几乎不可能理解是什么让你问这个问题。您似乎对这两个函数的行为不同这一事实感到困惑。但是，当您自己明确地将它们写成在特定方面有所不同时，为什么它会让您感到困惑？

# javascript - JavaScript getElementsByTagName 不起作用

> ID：11350900
> 
> 赞同：-1
> 
> 时间：2012-07-05T19:06:03.950
> 
> 标签：javascript, html, hyperlink

我有一个 HTML 页面，上面有几个链接。我想让所有这些链接在不同的选项卡中打开，所以我尝试使用

```
var foo = document.getElementsByTagName("a");
for(var i = 0; i < foo.length; i++) {
    foo[i].target = "_blank";
} 
```

但是为什么这不起作用（据我所知，`getElementsByTagName()`返回一个数组，我还不如错了）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:08:27.183

尝试使用`setAttribute`并将您的脚本放入`window.onload`处理程序中（这是为了确保`DOM Hierarchy`完全构建并且您可以访问`DOM Element`s）：

```
window.onload = function(){
   var foo = document.getElementsByTagName("a");
   for(var i = 0; i < foo.length; i++) {
       foo[i].setAttribute('target', '_blank');
   }
}; 
```

实际上`getElementsByTagName`返回`NodeList`对象，它有一些类似的功能`Array`，但它不是一个`Array`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-14T15:36:42.343

我也有同样的问题，我得到了答案。n 答案是：在结束 boday 标记之后使用指向您的 javascript 的链接，例如：

```
<!DOCTYPE html>
<html>
<head>

</head>
<body>
<a src="#">link</a>
<a src="#">link</a>
<a src="#">link</a>
<a src="#">link</a>
<a src="#">link</a>
<a src="#">link</a>

<input type="text" size="20"><br>
<input type="text" size="20"><br>
<input type="text" size="20"><br><br>

<script src="JavaScript/alert.js">

</script>
</body>
</html> 
```

# lisp - 如何让 Lisp 忘记以前导出的符号？

> ID：11350903
> 
> 赞同：8
> 
> 时间：2012-07-05T19:06:11.677
> 
> 标签：lisp, common-lisp, slime, sbcl

这就是我从包中导出符号`:bar`的方式：`:baz``foo`

```
(in-package :cl-user)
(defpackage foo
   (:use :cl)
   (:export :bar :baz))
(in-package :foo) 
```

当我`:baz`从导出符号列表中删除时，SBCL 抱怨并且编译失败。

```
 warning: 
     FOO also exports the following symbols:
       (FOO:BAZ) 
```

如何在`:baz`不重新加载 SLIME 的情况下让 SBCL 忘记？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-05T19:23:43.143

**SBCL**：

```
* (apropos "unexport")

UNEXPORT (fbound)

* (documentation 'unexport 'function)

"Makes SYMBOLS no longer exported from PACKAGE."

* (apropos "unintern")

UNINTERN (fbound)

* (documentation 'unintern 'function)

"Makes SYMBOL no longer present in PACKAGE. If SYMBOL was present then T is
returned, otherwise NIL. If PACKAGE is SYMBOL's home package, then it is made
uninterned." 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-06T05:36:01.180

有很多关于这些问题的文档，您应该阅读或重读。乍一看，这个包/符号的东西听起来很微不足道，但它与其他语言所做的事情有很大的不同，值得一读（即，当涉及到包和符号时，尝试重用来自其他语言的知识特别危险）。

如果在阅读文档后仍然遇到问题，请尝试重新阅读它们（通过遇到问题获得的经验将帮助您专注于相关部分；在阅读之间不陷入麻烦的情况下重新阅读恕我直言，效率并不高）。

我发现一些有用的链接：

*   [http://www.lispworks.com/documentation/HyperSpec/Body/11_.htm](http://www.lispworks.com/documentation/HyperSpec/Body/11_.htm)
*   [http://www.gigamonkeys.com/book/programming-in-the-large-packages-and-symbols.html](http://www.gigamonkeys.com/book/programming-in-the-large-packages-and-symbols.html)
*   [http://www.flownet.com/ron/packages.pdf](http://www.flownet.com/ron/packages.pdf)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-11-09T11:00:14.027

搜索把我带到了这里，但我遇到了稍微不同的问题。

```
; caught WARNING:
;   MY-PACKAGE also uses the following packages:
;     (DEPENDENCY) 
```

对于这种情况，需要

```
* (documentation 'unuse-package 'function)

"Remove PACKAGES-TO-UNUSE from the USE list for PACKAGE." 
```

# mysql - MySQL连接多个表

> ID：11350904
> 
> 赞同：4
> 
> 时间：2012-07-05T19:06:12.593
> 
> 标签：mysql, sql, join

我有三张桌子：

```
t1.estimate, t1.mid, t1.description, t1.status

t2.mid, t2.mname, t2.mphone, t2.memail

t3.estimate, t3.action 
```

我需要加入这些表，但我遇到的问题是 t2 和 t3 可能不包含要加入到 t1 的记录。表 t1 是将应用过滤器的主表。加入“mid”时，表 t2 将有 99.9% 的时间包含匹配项。但是表 t3 是一个仅存储信息并在用户将其输入表时创建估计值的表。t1 中可以有 40,000 多条记录，但 t3 中只有 5,000 条。

这是我当前的代码，但它只显示所有三个表中的记录。即使在 t2 和 t3 上没有要加入的记录，我也希望从 t1 显示值。

```
SELECT DISTINCT
    t1.estimate, t1.mid, t2.mname, t1.description,
    t1.status, GROUP_CONCAT(t3.action)
FROM t1
LEFT OUTER JOIN t2 ON t1.mid = t2.mid
LEFT OUTER JOIN t3 ON t1.estimate = t3.estimate
WHERE t1.status LIKE '0%'
GROUP BY t3.estimate 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:16:55.660

如果没有记录加入，您需要更改您`GROUP BY`的使用`t1.estimate`而不是NULL。`t3.estimate``t3.estimate`

# python - uWSGI 中的 timer 和 rbtimer 有什么区别？

> ID：11350907
> 
> 赞同：5
> 
> 时间：2012-07-05T19:06:22.243
> 
> 标签：python, timer, uwsgi

我正在寻找向我当前的应用程序添加简单的重复任务，我正在查看 uwsgi 信号 api，并且有两个装饰器`@timer`和`@rbtimer`. 我已经尝试过至少查看文档甚至是 python 源代码，但它看起来可能比 c 实现中的某个地方更低级别。

我熟悉红黑树的概念，但我不确定这与计时器有何关系。如果有人可以解决问题或将我指向我可能错过的文档，我将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T21:57:20.757

@timer 使用内核级工具，因此它们在您可以创建的最大计时器数量方面受到限制。

@rbtimer 完全是用户空间，因此您可以以较低的精度创建无限数量的计时器

# php - 批量检查一百万个域的 HTTP 标头

> ID：11350910
> 
> 赞同：0
> 
> 时间：2012-07-05T19:06:31.833
> 
> 标签：php, python, ruby, http, asynchronous

我正在寻找一百万多个域的 HTTP 标头（即查找 200/404/302）

在这一点上，我不需要正文 HTML（尽管稍后我可能会），所以最好使用 HEAD 请求而不是 GET。我知道有些服务器不支持 HEAD 并且愿意为了保持简单而牺牲那些无法检查的服务器。

我已经尝试了许多用 PHP 编写的解决方案（curl、multi curl、几个 DIY curl 并行选项），但它们都不够快。

我很乐意使用任何语言，理想的结果是找到一个已经编译的 C 应用程序，只需获取一个 url 列表并吐出标题。例如，我使用一个预滚动的 DNS 应用程序来检查所有这些域的 DNS 设置，我所要做的就是打开一个管道并将其提供给它的域，它会在它们进入时将答案吐回（不一定在相同的顺序）。

它需要异步或线程化才能足够快。

我探索了一些 python 选项（如 Twisted 框架和 liburl2），但无法获得任何可靠的启动和运行。

希望有人能帮我指出一个现成的解决方案！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:13:22.173

看看[gevent](http://www.gevent.org/intro.html#example)，尤其是基于它的库。例如：[https ://github.com/gwik/geventhttpclient](https://github.com/gwik/geventhttpclient)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T22:30:50.373

首先，对于那些因为可疑而拒绝投票的人：这就是谷歌所做的。我非常感谢他们这样做。据我们所知，这位先生或女士正在构建更好的搜索引擎，我们将在 8 年后使用。

但正如 Rogue Coder 所说：我们不应该都粗心大意地做这件事。

关于问题：您无法获取域的标题。您从完成对 URL 的 HTTP 请求获得标头。

至于解决方案：您可以将 python 与许多可用的 http 库之一一起使用，例如内置的 httplib。由于请求量很大，您将需要使用线程来并行发出多个请求。下面的例子太简单了。在现实生活中，您将使用线程池。此外，拥有许多同时连接会带来其自身的问题。所以：你希望它有多快？

```
import httplib
from threading import Thread
import time

hosts = [ 'www.google.com', 'www.yahoo.com', 'nos.nl' ]
responses = {}

class StatusChecker(Thread):

    def __init__(self, hostname):
        Thread.__init__(self)
        self.hostname = hostname

    def run(self):
        conn = httplib.HTTPConnection(self.hostname)
        conn.request("HEAD", "/index.html")
        res = conn.getresponse()
        responses[self.hostname] = res.status

if __name__ == "__main__":
    for h in hosts:
        StatusChecker(h).start()

    time.sleep(10)
    print responses 
```

这将给出类似的东西：

```
$ python test.py
{'nos.nl': 200, 'www.yahoo.com': 301, 'www.google.com': 200} 
```

# javascript - Firefox 插件不会打开带有 url 的新标签页

> ID：11350912
> 
> 赞同：0
> 
> 时间：2012-07-05T19:06:35.940
> 
> 标签：javascript, firefox, firefox-addon, firefox-addon-sdk

我试过这段代码：

```
var contextMenu = require("context-menu");
var menuItem = contextMenu.Item({
  label: "Test name",
  contentScript:  'self.on("click", function () {' + 
                  '  window.open("options.html", "_blank");' +
                  '});'
}); 
```

但是当我单击新的上下文菜单项时，出现以下错误：

> 安全错误：*“le Site”*上的内容可能无法加载或链接到 chrome://browser/content/options.html。

我必须授予 get 哪些权限？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T06:27:03.190

在内容脚本的情况下，似乎相对地址解析不正确 - 结果您试图`chrome://browser/content/options.html`在正确禁止的窗口中打开。只需指定完整的地址，就可以了：

```
'  window.open("http://example.com/options.html", "_blank");' + 
```

# c# - 在标记中使用 C# 从数据网格中获取值

> ID：11350913
> 
> 赞同：3
> 
> 时间：2012-07-05T19:06:38.017
> 
> 标签：c#, .net, markup

我想首先说我不确定如何正确表达我的目标，所以可能有很多关于如何做我想做的事情的例子，我只是找不到它们。
话虽这么说，我的解释可能有点罗嗦，所以我很感激任何和所有的帮助。

我在以前创建的 .Net 网页和 sql 数据库中加入了一项新功能。该代码当前从数据库返回一个 DataSet 并将其绑定到一个数据网格。从那里将其加载到网页上的表格中。我的新列需要做的是从当前行中获取主键并使用它来调用存储过程以获取更多数据。

```
<asp:TemplateColumn SortExpression="siteAdmin" HeaderText="SITE ADMIN">
    <ItemTemplate>
        <asp:Label runat="server" Text='<%# listAdmin("siteAdmin", ***issue is here*** ) %>'>
        </asp:Label>
    </ItemTemplate>
</asp:TemplateColumn> 
```

标记中的代码调用一个方法，该方法调用我需要检索我正在寻找的字符串的存储过程。我遇到的问题是弄清楚如何获取主键，它是 listAdmin() 方法的第二个参数的 int。每一行的主键都是从数据库中返回的名为“trackingId”的数据集列中

任何帮助将不胜感激。如果我可以清除任何东西，请询问。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T19:10:29.270

您可以尝试以下方法：

```
<asp:TemplateColumn SortExpression="siteAdmin" HeaderText="SITE ADMIN">
<ItemTemplate>
    <asp:Label runat="server" Text='<%# listAdmin("siteAdmin", Eval("trackingId")) %>'>
    </asp:Label>
</ItemTemplate> 
```

# spring - Spring MVC 请求编码问题

> ID：11350918
> 
> 赞同：0
> 
> 时间：2012-07-05T19:07:04.130
> 
> 标签：spring, jquery, spring-mvc, encode

我正在开发一个 Spring MVC 应用程序，但在编码方面遇到了一些问题。

这就是问题所在：在浏览器上我输入“ **João** ”，在我提交表单后，在控制器上我有“ **João** ”。我的 Firefox 配置为 UTF-8，所以我的 Eclispe。如果我使用 Firebug 检查发送的参数，该值仍然正确。

这是我的编码配置：

在 web.xml 上，我拥有的第一件事是：

```
<filter>
    <filter-name>encoding-filter</filter-name>
    <filter-class>
        org.springframework.web.filter.CharacterEncodingFilter
    </filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
</filter>

<locale-encoding-mapping-list>
    <locale-encoding-mapping>
        <locale>pt-BR</locale>
        <encoding>UTF-8</encoding>
    </locale-encoding-mapping>
    <locale-encoding-mapping>
        <locale>pt</locale>
        <encoding>UTF-8</encoding>
    </locale-encoding-mapping>
    <locale-encoding-mapping>
        <locale>en</locale>
        <encoding>UTF-8</encoding>
    </locale-encoding-mapping>
</locale-encoding-mapping-list>

<filter-mapping>
    <filter-name>encoding-filter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

在 JSP 上：

```
<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%> 
```

在表格上：

```
<form:form method="post" ... acceptCharset="UTF-8"> 
```

在servelt-context.xml 上：

```
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
    <beans:property name="contentType" value="text/html;charset=UTF-8" />
</beans:bean> 
```

在我的 pom.xml (Maven) 中：

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <java-version>1.6</java-version>
    <org.springframework-version>3.1.0.RELEASE</org.springframework-version>
    <org.aspectj-version>1.6.10</org.aspectj-version>
    <org.slf4j-version>1.6.1</org.slf4j-version>
</properties> 
```

要调用服务器，我正在使用 JQuery load() 函数，如下所示：

```
var params = form.serialize();
$.ajaxSetup({
    contentType: 'text/html; charset=UTF-8'
});
$("#content").load(url, params); 
```

我拼命尝试时包含了这个**$.ajaxSetup**，但它没有效果。

我注意到在**参数**上我有这个“ **João** ”作为“ **Jo%C3%83%C2%A3o** ”。我使用 Firebug 改回“João”，但仍然遇到同样的问题。

编辑：还包括 URIEncoding="UTF-8" 我的**apache-tomcat-7.0.27\conf\server.xml**：

```
<Connector port="8080" protocol="HTTP/1.1"
   connectionTimeout="20000"
   redirectPort="8443" 
   URIEncoding="UTF-8" /> 
```

有什么神奇的想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T20:03:49.600

这有帮助吗（有同样的问题）：

[https://stackoverflow.com/a/6644019/169277](https://stackoverflow.com/a/6644019/169277)

另外例如：在我使用的方法中，我对编码没有任何问题：

```
@RequestMapping(value = "/test")
    public ResponseEntity<String> test(Locale loc, String code, HttpServletResponse response) {
        //enforce right encoding
        HttpHeaders responseHeaders = new HttpHeaders();
        responseHeaders.add("Content-Type", "text/html; charset=utf-8");

        return new ResponseEntity<String>("João"), responseHeaders, HttpStatus.CREATED);
    } 
```

尝试将变量或值打印到标准输出，这样您就知道这不是弹簧问题。还要检查文件编码（eclipse中的java文件），右键单击->属性->文本文件编码（在底部）。将其设置为`UTF-8`。希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:41:39.243

我通过 maven tomcan 插件（**mvn clean tomcat:run**）运行应用程序，它忽略了 Tomcat 配置文件。因此，我在 pom.xml 中包含了**uriEncoding**，就像这样：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>tomcat-maven-plugin</artifactId>
    <version>1.1</version>
    <configuration>
        <uriEncoding>${project.build.sourceEncoding}</uriEncoding>
    </configuration>
</plugin> 
```

然后我的属性完成了将编码设置为 UTF-8 的技巧：

```
<properties>
...
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <java-version>1.6</java-version>
...
</properties> 
```

# php - 连接到 gateway.sandbox.push.apple 时的 SSL/TLS 警报

> ID：11350923
> 
> 赞同：1
> 
> 时间：2012-07-05T19:07:25.333
> 
> 标签：php, iphone, openssl, apple-push-notifications

运行代码时

```
openssl s_client -connect gateway.sandbox.push.apple.com:2195 -cert ECert.pem -key EKey.pem 
```

我得到错误

```
5155:error:14094416:SSL routines:SSL3_READ_BYTES:sslv3 alert certificate unknown:/SourceCache/OpenSSL098/OpenSSL098-44/src/ssl/s3_pkt.c:1102:SSL alert number 46
5155:error:140790E5:SSL routines:SSL23_WRITE:ssl handshake failure:/SourceCache/OpenSSL098/OpenSSL098-44/src/ssl/s23_lib.c:182: 
```

我试图重新开始并获得证书，我试图再次获得私钥，但如果有人能给我建议如何解决这个问题，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-14T22:24:51.783

警报 46 是`certificate_unknown`（来自[RFC 5246，第 7.2 节](https://www.rfc-editor.org/rfc/rfc5246)）。它的意思是：

> 在处理证书时出现了其他一些（未指定）问题，使其不可接受。

您提供的客户端凭据/证书被 Apple 拒绝。

另请参阅信息安全堆栈交换上的[SSL 相互身份验证失败。](https://security.stackexchange.com/q/61578)

* * *

> 如何解决这个问题会很棒。

看起来您生成了自己的凭据。您应该提供 Apple 接受的凭据。

我认为 Apple 开发人员计划的目标之一是为您提供可接受的身份（其他包括经常性收入流）。根据开发者计划，Apple 将验证签名请求并为您颁发此类事情的证书。

如果您想知道，我认为在这种情况下您无法避免使用 Apple 开发人员计划。（对于它的价值，我通常不同意开发者计划的要求，并每年向我收取 200 美元来使用我的 iOS 设备和 MacBook）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T16:38:25.840

您可能需要添加 -verbose。

这首先告诉您的是，签署了签署了 gateway.sandbox.push.apple.com 的 CA 的 CA 的根 CA 不在默认的 openSSL 包中。

在上述情况下，该证书适用于：

```
i:/O=Entrust.net/OU=www.entrust.net/CPS_2048 incorp. by ref. (limits liab.)/OU=(c) 1999 Entrust.net Limited/CN=Entrust.net Certification Authority (2048) 
```

您可以从[http://www.entrust.net/knowledge-base/technote.cfm?tn=8412](http://www.entrust.net/knowledge-base/technote.cfm?tn=8412)获取，并可以使用 -CAfile* 添加到上述命令。

一旦这样做，您应该能够建立正确的连接并至少在服务器证书上获得 OK：

```
 Verify return code: 0 (ok) 
```

德。

*: 你也可以作弊 - 只需添加 -showcert; 它为您提供服务器的证书；将其剪切并粘贴到 server-cert.pem 中并添加“-CAfile server-cert.pem”，openssl 不会在树上进一步验证它。

# php - Yii 调试工具栏错误：找不到 javascript 库

> ID：11350924
> 
> 赞同：0
> 
> 时间：2012-07-05T19:07:38.577
> 
> 标签：php, javascript, yii, toolbar, xdebug

我今天（2012 年 7 月 5 日）从 github 下载了调试工具栏，并按照安装说明进行操作。

[https://github.com/malyshev/yii-debug-toolbar](https://github.com/malyshev/yii-debug-toolbar)

我收到以下 javascript 错误：

“未捕获的 ReferenceError：yiiDebugToolbar 未定义”

...在这一行：

```
(function($) {$(function(){yiiDebugToolbar.init()})}(jQuery)); 
```

我检查了一下，yii.debugtoolbar.js 库安装在“assets/84af4f51”下。我还单步执行了 php 代码，并确认在 YiiDebugToolbar.php 中为这个文件调用了 registerScriptFile()。

有点卡住这里发生的事情。这是一个错误还是我错过了一些设置步骤？

我在跑：

Yii 1.1.9

# mysql - Rails 应用程序无法连接到 mysql，无法通过套接字 '/var/run/mysqld/mysql.sock' 连接到本地 MySQL 服务器 (2) (Mysql2::Error)

> ID：11350929
> 
> 赞同：5
> 
> 时间：2012-07-05T19:07:56.963
> 
> 标签：mysql, ruby-on-rails, ubuntu

我目前被困在 Rails 项目的（我希望是新手）问题上（这是我的第一个 Rails 项目，所以如果我错过任何重要的事情，我深表歉意）。我已经在这里待了几个小时，似乎找不到任何解决方案。我已经尝试了以下线程的解决方案但无济于事。

[通过socket连接本地MySQL服务器](https://stackoverflow.com/questions/6525917/connect-to-local-mysql-server-through-socket)

[无法通过套接字连接到本地 MySQL 服务器](https://stackoverflow.com/questions/2182919/cant-connect-to-local-mysql-server-through-socket)

[无法通过套接字 '/tmp/mysql.sock' 连接到本地 MySQL 服务器 (2)](https://stackoverflow.com/questions/7843731/cant-connect-to-local-mysql-server-through-socket-tmp-mysql-sock-2)

[无法通过套接字“/tmp/mysql.sock”连接到本地 MySQL 服务器](https://stackoverflow.com/questions/7310967/cant-connect-to-local-mysql-server-through-socket-tmp-mysql-sock)

名单还在继续，无论如何，有些线程与我的情况相似，其他人只是抓着稻草。让我快速概述一下我的情况。

*   该项目是在mac上开发的
    *   我最近设置了一个测试服务器作为学习部署过程的一种手段
    *   服务器正在运行 Ubuntu Server 12.04

我设法按照一些教程进行设置，包括[Capistrano](https://github.com/capistrano/capistrano/wiki/2.x-From-The-Beginning)部署教程，直到：

```
$ rake RAILS_ENV=production db:schema:load 
```

这是我第一次遇到无法连接到本地 MySQL 服务器错误的地方。

如果我使用 --trace 运行它，我会得到以下输出：

```
** Invoke db:schema:load (first_time)
** Invoke environment (first_time)
** Execute environment
rake aborted!
Can't connect to local MySQL server through socket '/var/run/mysqld/mysql.sock' (2)
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `connect'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `initialize'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `new'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `mysql2_connection'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:277:in `new_connection'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:287:in `checkout_new_connection'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:235:in `block (2 levels) in checkout'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:230:in `loop'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:230:in `block in checkout'
/usr/share/ruby-rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:229:in `checkout'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:95:in `connection'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:374:in `retrieve_connection'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_specification.rb:168:in `retrieve_connection'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_specification.rb:142:in `connection'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/model_schema.rb:308:in `clear_cache!'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/railtie.rb:91:in `block (2 levels) in <class:Railtie>'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:418:in `_run__427268845__prepare__407057367__callbacks'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `__run_callback'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:81:in `run_callbacks'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/actionpack-3.2.2/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/actionpack-3.2.2/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/initializable.rb:30:in `instance_exec'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/initializable.rb:30:in `run'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/initializable.rb:55:in `block in run_initializers'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/initializable.rb:54:in `each'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/initializable.rb:54:in `run_initializers'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/application.rb:136:in `initialize!'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/railtie/configurable.rb:30:in `method_missing'
/var/www/little_oven_deploy/releases/20120705162026/config/environment.rb:5:in `<top (required)>'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `require'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `block in require'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:236:in `load_dependency'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `require'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/application.rb:103:in `require_environment!'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/application.rb:292:in `block (2 levels) in initialize_tasks'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_chain'
/usr/share/ruby-rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/task.rb:176:in `block in invoke_prerequisites'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `each'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/task.rb:174:in `invoke_prerequisites'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/task.rb:157:in `block in invoke_with_call_chain'
/usr/share/ruby-rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top_level'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/bin/rake:19:in `load'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@global/bin/rake:19:in `<main>'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/bin/ruby_noexec_wrapper:14:in `eval'
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/bin/ruby_noexec_wrapper:14:in `<main>'
Tasks: TOP => db:schema:load => environment 
```

我的 database.yml 文件如下：

```
# MySQL.  Versions 4.1 and 5.0 are recommended.
#
# Install the MYSQL driver
#   gem install mysql2
#
# Ensure the MySQL gem is defined in your Gemfile
#   gem 'mysql2'
#
# And be sure to use new-style password hashing:
#   http://dev.mysql.com/doc/refman/5.0/en/old-client.html
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: little_oven_devel
  pool: 5
  username: devel
  password: Development1
  socket: /var/run/mysqld/mysql.sock

# Warning: The database defined as "test" will be erased and
# re-generated from your development database when you run "rake".
# Do not set this db to the same as development or production.
test:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: little_oven_test
  pool: 5
  username: root
  password:
  socket: /tmp/mysql.sock

production:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: little_oven_production
  pool: 5
  username: production
  password: Production1
  socket: /var/run/mysqld/mysql.sock 
```

请注意，我已经更改了套接字变量的位置以与我认为是 ubuntu 上的 .sock 文件相对应，因为这与 mac OSX 上的标准安装不同。

最后，我在运行时也遇到了同样的错误

```
rails c 
```

具有以下输出：

```
/usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `connect': Can't connect to local MySQL server through socket '/var/run/mysqld/mysql.sock' (2) (Mysql2::Error)
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/mysql2-0.3.11/lib/mysql2/client.rb:44:in `initialize'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `new'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/mysql2_adapter.rb:16:in `mysql2_connection'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:277:in `new_connection'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:287:in `checkout_new_connection'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:235:in `block (2 levels) in checkout'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:230:in `loop'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:230:in `block in checkout'
    from /usr/share/ruby-rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:229:in `checkout'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:95:in `connection'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_pool.rb:374:in `retrieve_connection'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_specification.rb:168:in `retrieve_connection'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/connection_adapters/abstract/connection_specification.rb:142:in `connection'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/model_schema.rb:308:in `clear_cache!'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activerecord-3.2.2/lib/active_record/railtie.rb:91:in `block (2 levels) in <class:Railtie>'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:418:in `_run__485859349__prepare__1069885904__callbacks'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:405:in `__run_callback'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:385:in `_run_prepare_callbacks'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activesupport-3.2.2/lib/active_support/callbacks.rb:81:in `run_callbacks'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/actionpack-3.2.2/lib/action_dispatch/middleware/reloader.rb:74:in `prepare!'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/actionpack-3.2.2/lib/action_dispatch/middleware/reloader.rb:48:in `prepare!'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/application/finisher.rb:47:in `block in <module:Finisher>'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/initializable.rb:30:in `instance_exec'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/initializable.rb:30:in `run'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/initializable.rb:54:in `each'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/initializable.rb:54:in `run_initializers'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/application.rb:136:in `initialize!'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /var/www/little_oven_deploy/releases/20120705162026/config/environment.rb:5:in `<top (required)>'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `require'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `block in require'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/activesupport-3.2.2/lib/active_support/dependencies.rb:251:in `require'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/application.rb:103:in `require_environment!'
    from /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/railties-3.2.2/lib/rails/commands.rb:40:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

我想指出位置 /usr/share/ruby-rvm/gems/ruby-1.9.2-p318@rails_3_2/gems/mysql2-0.3.11/lib/mysql2/client.rb 是有效的。此外，mysql 正在运行，我可以通过以下方式访问它：

```
mysql -u production -p 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-05T20:43:30.087

您也可以在 database.yml 中从生产环境中删除套接字规范

```
production:
  # socket: /var/run/mysqld/mysql.sock 
```

我知道性能略有下降，但它让我遇到了类似的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-28T02:31:38.083

`/tmp/mysqld.sock`是 OSX 的套接字位置。

在 linux Mint/Ubuntu 上，它应该位于`/var/run/mysqld/mysql.sock`.

如果不是，则该位置应在 MySQL 配置文件之一中引用，名为`my.cnf`. 如果您输入，这些文件的位置和加载顺序将打印出来

`mysql --help`

进入一个终端。如果在指定路径找不到该`my.cnf`文件，则该文件不存在，所以忽略它，并在加载顺序中查找下一个。

^ 这是验证您的袜子配置的简单、可靠的方法。

Josh Lewis 的回答应该是有效的，因为我的 Rails 4.0.3 安装默认省略了套接字线 - 所以我假设它是由安装预定义或自动配置的，这不是你应该担心的事情。

不是要重提一个老问题，但它会成为谷歌搜索的热门列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T20:39:37.243

一些随机的想法：

*   谁是所有者`/var/run/mysqld/mysql.sock`？我知道它在您提到的第一个链接中，但也许您错过了它。您运行命令的用户是否可以访问它？

*   也许默认 MySQL 端口 ( `3306`) 被阻止？我想它可能会阻止 Rails，即使你在本地运行东西，因为在 Unix 设计中，端口无处不在。如果您在 Amazon 上运行，请注意默认情况下它们会关闭所有端口（以及默认情况下会丢弃所有 PING 请求，但这是另一个问题），您可能必须单击其仪表板中的选项

*   尝试将`host: 127.0.0.1`和添加`port: 3306`到您的生产配置设置

*   尝试删除`pool`和`reconnect`选项，看看会发生什么（这是一个完全疯狂的猜测）

*   那里有一些想法，在这种情况下，您应该卸载`mysql-client`并`mysql-server`打包并再次安装它们，但我还没有看到为什么会这样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-31T08:58:32.270

$ mysqld

*f 错误“mysql-files”目录*

$ sudo mkdir /var/lib/mysql-files

$ sudo chown -R mysql:mysql /var/lib/mysql-files/

$ sudo chmod 700 /var/lib/mysql-files/

# jsf - 如何将输入文本值作为方法参数从 JSF 页面传递给 Managedbean？

> ID：11350931
> 
> 赞同：2
> 
> 时间：2012-07-05T19:07:58.290
> 
> 标签：jsf, jakarta-ee

我想在提交表单时将输入文本值作为方法参数从 jsf 页面传递给 managedbean。喜欢

```
<h:form>
   <p:inputText name="fname"/>
   <P:commandButton value="Submit" action="#{myClass.save(inputText value as parameters)}">
</h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:05:57.263

标准方法如下：

```
<h:form> 
    <p:inputText value="#{myClass.inputValue}"/> 
    <p:commandButton value="Submit" action="#{myClass.doSomething}"> 
</h:form> 
```

**我的班级**：

```
@ManagedBean
@ViewScoped
public class myClass {
    private String inputValue;

    // getter and setter for inputValue

    public void doSomething() {
    }
} 
```

当用户点击按钮时， before`doSomething`被调用，`JSF`关心读取`inputText`组件中输入的值，在必要时对其进行验证，并`inputValue`根据 EL 表达式调用 setter 类`#{myClass.inputValue}`（请注意，EL 自动理解`setter`在这种情况下必须调用）。这是非常基本的 JSF。我建议学习一些 Java EE 6 教程（例如[this](http://docs.oracle.com/javaee/6/tutorial/doc/)）。

# javascript - 谷歌可视化 - 不兼容的数据表：错误：表包含比预期更多的列

> ID：11350934
> 
> 赞同：2
> 
> 时间：2012-07-05T19:08:09.147
> 
> 标签：javascript, google-visualization

我在创建 GeoChart 时遇到问题。我的代码如下所示：

```
var table = new google.visualization.DataTable();

//set the columns for the table
table.addColumn('string', 'Latitude');
table.addColumn('string', 'Longitude');
table.addColumn({
    type: 'string',
    role: 'tooltip'
});
table.addColumn('number', 'Music Consumers');

var rows = [
    ["42.651445", "-73.755254", "Albany-Schenectady-Troy NY", 100],
    ["35.2225", "-80.837539", "Charlotte NC", 106],
    ...
];

table.addRows(rows); 
```

上面的代码产生一个红色的错误框，图表应该是这样的：

```
Incompatible data table: Error: Table contains more columns than expected (Expecting 3 columns) 
```

我已经验证行列表中的所有列表确实有 4 个成员（lat、long、desc、value）。知道为什么它说它只需要 3 列吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T23:27:55.513

所以我已经确定了这个问题，我最初发布的代码有几个问题。首先， lat / long 应该是数字列类型，并且行需要将 lat 和 long 格式化为数字（parseFloat 适用于此）。

正确的代码如下所示：

```
//set the columns for the table
table.addColumn('number', 'LATITUDE', 'Latitude');
table.addColumn('number', 'LONGITUDE', 'Longitude');
table.addColumn('string', 'DESCRIPTION', 'Description');
table.addColumn('number', 'VALUE', 'Music Consumers');

var rows = [
    [42.651445, -73.755254, "Albany-Schenectady-Troy NY", 100],
    [35.2225, -80.837539, "Charlotte NC", 106],
    ...
];

table.addRows(rows);

var geochart = new google.visualization.GeoChart($mapContainer[0]);
geochart.draw(...); 
```

# jquery - 如何将 (document).ready 添加到现有的 jquery 函数文件

> ID：11350941
> 
> 赞同：2
> 
> 时间：2012-07-05T19:09:02.273
> 
> 标签：jquery

我有一个带有 AJAX 函数的 jquery 函数文件。现在我需要将**(document).ready**函数添加到同一个文件中。我的问题是我应该在现有的 function() 块之外添加这个函数还是将它保留在里面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:28:36.283

如果是这样，您可以将其添加到外部：

```
function doMyAjax() {
    $.ajax({
        type: 'POST',
        stuff: more 
        ect...
    }).done(function(data) {
        $(element).html(data);
    });

    $("element").on('DOMNodeModified', function(event) {
        $(event.target).appendTo('body');
    });
}

$(function() {  //same as $(document).ready(function(){..});
    doMyAjax(); //function is executed after DOM is ready
}); 
```

或者您可以将所有代码包装在其中：

```
$(function() {  //same as $(document).ready(function(){..});
    //all my code goes here and is executed after DOM is ready
}); 
```

涨2个！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:36:08.303

在包含的文件之外添加 $(document).ready() 函数，然后从那里调用文件中的函数来执行您需要在其他代码中执行的任何操作。IE

```
var myStuff = myStuff || {
   init: function() {
     ///run stuff needed in document.ready here
   }
}

$(document).ready(function(){
    myStuff.init();
}); 
```

这里的黄金法则是每页只在 1 个地方调用 $(document).ready。

# mysql - 如何获得每个类别的前 5 名

> ID：11350946
> 
> 赞同：0
> 
> 时间：2012-07-05T19:09:28.413
> 
> 标签：mysql, sql

我正在使用mysql。我有一个名为 flow_data 的表有两个属性类别和视图。category 是 int 类型，views 是 int 类型。类别有 0-4（例如 num 0 是视频，num 1 是图片），查看次数取决于用户点击的次数。我想查询每个类别的 top5 视图的数据。

```
SELECT DISTINCT id, cat, title, file, type, tags
FROM flow_data 
ORDER BY views 
LIMIT 5 
```

它仅返回不基于每个类别的 top5 视图。

任何想法？谢谢你提前。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:57:27.997

在 oracle 和 sql server 中有排名查询，您可以在 mysql 中搜索排名等价物。你可能会看到[这里](http://www.oreillynet.com/pub/a/mysql/2007/04/12/emulating-analytic-aka-ranking-functions-with-mysql.html)。你也可能会看到[这个](http://frishit.com/2010/07/mysql-selecting-top-n-per-group/)和[这个](https://stackoverflow.com/questions/4729406/mysql-returning-the-top-5-of-each-category)

# json - 如何使用 Text.JSON 解析从 Haskell 中的文件读取的字符串

> ID：11350948
> 
> 赞同：1
> 
> 时间：2012-07-05T19:09:32.243
> 
> 标签：json, haskell

我正在用 Haskell 编写一个应用程序，其中作为我的持久性系统的一部分，我将我的数据结构转换为 JSON 格式，然后将它们写入磁盘。稍后，我想通过读取文件并通过 JSON 解析器运行它来重构对象来加载它们。

但是，读取部分出现问题，导致 JSON 模块无法解析字符串。

首先，我在工作中使用 Text.JSON (json-0.5)。我正在写入文件的数据类型称为`WorkoutEvent`，并且我已经验证它可以使用以下命令完美地编码和解码为 JSON：

```
decode $ encode evt :: Result WorkoutEvent 
```

因此，考虑到这一点，我创建了一堆事件并将它们写入一个文件，生成的文件如下所示（当我在文本编辑器中打开它时）：

```
{"type":"AddWorkout","data":{"uuid":"473b7964-8197-49ac-be3b-2b3804f1fbb5","date":"2012-03-30","workout_type":"Pushups","description":"","sets":[6]}}
{"type":"AddWorkout","data":{"uuid":"9f83363a-5298-4778-9c80-7dfa0d2ea6f9","date":"2012-04-02","workout_type":"Pushups","description":"","sets":[6,6]}}
{"type":"AddWorkout","data":{"uuid":"a60806a0-efd6-4647-bc62-a48298ce55cd","date":"2012-04-04","workout_type":"Pushups","description":"","sets":[]}} 
```

等等等等。文件中的每一行代表我已序列化的一个完整对象。

然后我使用 readFile 加载文件，我没有发现任何问题：

```
*Main> f <- readFile "/home/savanni/Documents/workouts.json-stream"
*Main> take 50 f
"{\"type\":\"AddWorkout\",\"data\":{\"uuid\":\"473b7964-8197"
*Main> putStrLn $ take 50 f
{"type":"AddWorkout","data":{"uuid":"473b7964-8197 
```

到目前为止，一切都很好。当我尝试解码数据时，问题就来了：

```
*Main> decode f :: Result [WorkoutEvent]
Error "Invalid tokens at end of JSON string: \"{\\\"type\\\":\\\"A\"" 
```

如果我说`putStrLn f`我看到了输出并且看到输出中的任何地方都没有 \ 序列。如果我只是`f`在命令行输入，我会看到上面的转义序列，但我在任何地方都看不到任何多个-\ 转义序列。

那么，最后，我应该如何使用 Text.JSON 模块从文件中读取 JSON 数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:15:04.433

每行都是有效的 JSON，但整个文件不是，因此您需要逐行解码。类似（未经测试）：

```
map (decode :: String -> Result WorkoutEvent) $ lines f 
```

# c# - 在 ASP.NET 成员资格提供程序中删除具有重复电子邮件的用户

> ID：11350949
> 
> 赞同：1
> 
> 时间：2012-07-05T19:09:32.873
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-2

我正在寻找最有效的方法来删除我的 asp.net MVC2 网站中使用默认会员提供程序的重复电子邮件的用户。

我们启动了这个网站并且没有将唯一的电子邮件设置为 true，现在我正在尝试实现忘记用户名/密码功能，我已经意识到超过 100 个用户已经重新注册，因为他们忘记了密码并且没有忘记密码特征。这是一个问题，因为我需要让用户输入他们的电子邮件以向他们发送他们的用户名和密码重置电子邮件。这失败了，因为多个用户共享一封电子邮件。我希望我在启动前注意到 web.config 中的独特电子邮件选项，这样会省去很多麻烦。:(

我想轻松地删除所有这些帐户，而不必一个一个地手动删除，然后我会联系他们并让他们知道他们的重复帐户已创建。

这样做的最佳方法是什么？一些用户使用同一电子邮件注册多达 5 次。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:16:54.420

您可以调用`Membership.GetAllUsers()`以获取所有用户的列表。

然后按 分组`MembershipUser.Email`，决定保留哪一个（例如，保留最近的帐户`LastActivityDate`），并删除其他帐户（`Membership.DeleteUser`）。

编写一个小程序来完成这一切是微不足道的。当然，您可能需要考虑在删除用户帐户之前是否应该咨询用户。例如，您可以发送一封电子邮件告诉他们，如果他们在一段时间内不回复，该帐户将被自动删除。

# java-native-interface - 无法为 JNI 生成头文件

> ID：11350950
> 
> 赞同：1
> 
> 时间：2012-07-05T19:09:40.563
> 
> 标签：java-native-interface

我编译`HelloWorld.c`成功。我更改为所在的目录`HelloWorld.class`。我`javah -jni HelloWorld`在终端中输入了头文件。我有以下错误消息。问题是什么？我正在使用 Mac OSX 开发 Android 应用程序。

```
error: cannot access HelloWorld
bad class file: ./HelloWorld.class
class file contains wrong class: Test.HelloWorld
Please remove or make sure it appears in the correct subdirectory of the classpath.

com.sun.tools.javac.util.Abort
javadoc: error - fatal error
2 errors 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:15:45.733

我猜您的 HelloWorld.class 位于子文件夹 Test 中。您不应在该文件夹内，而是在已编译包的 ROOT 文件夹中。所以走出那个测试文件夹，然后再试一次`javah -jni Test.HelloWorld`

顺便说一句，如果您甚至还没有标头，我不明白您如何“*成功编译您的 HelloWorld.c ”。*但我正在回答被问到的问题。

# jquery - 更改不适用于新添加的行

> ID：11350951
> 
> 赞同：0
> 
> 时间：2012-07-05T19:09:44.433
> 
> 标签：jquery

所有，我有以下 jQuery 代码：

```
jQuery("#add_timeline_row").on("click", function(event){
    if(event.preventDefault){
        event.preventDefault();
    }else{
        event.returnValue = false;
    }
    var total_rows = jQuery('[name="timeline_num[]"]').length;
    alert(total_rows);
    total_rows = total_rows + 1;
    jQuery.post(site_url + "add_row.php", { total: total_rows },
        function(response) {
            jQuery('#timeline_table tr:last').after(response);
        });
}); 
```

如果用户单击按钮，这可以正常工作，并且基本上在我的 DOM 完成加载后添加一行。我添加了 .on 函数，以便 jQuery 识别它，因为 DOM 已经加载。我的问题是它创建了一个选择字段。然后，如果选择了某个选择值，我将使用以下 jQuery 删除一行：

```
jQuery('.event_selection').on('change' ,function(){
    var selected_event = jQuery(this).val();
    var fullId = jQuery(this).attr('id');
    var event_id = fullId.split('_');
    if(selected_event=="delete"){
        jQuery("#row"+event_id[1]).remove();
    }
}); 
```

对于在 DOM 中添加的任何行，这些行都会被删除，但是对于我通过我的第一个 jQuery 片段添加的任何新行，更改不会得到重新识别。为什么这不能按我的预期工作？

**编辑：** 我为此创建了一个 JS 小提琴。可以在这里找到：http: [//jsfiddle.net/Kc5R8/](http://jsfiddle.net/Kc5R8/)

单击“添加新行”后，它会失去所有功能，并且在更改新下拉框时不会产生警报。

感谢您提前提供任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T20:53:46.040

您必须将 on 方法绑定到容器，然后指定选择器。

看看 [http://jsfiddle.net/ZFGFv/2/](http://jsfiddle.net/ZFGFv/2/)

```
jQuery('table').on('change', '.event_selection' ,function(){
    ... your code
}); 
```

​这样，JQuery 将监听容器并监视每个具有 .event_selection 类的 DOM 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:17:23.537

尝试：

```
$(document).on('change', '.event_selection', function(){
    if (this.value == "delete") {
        $("#row"+this.id.split('_')[1]).remove();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:12:18.663

我也注意到了这种行为，并通过将“.on”的调用更改为“.live”来解决它

```
jQuery('.event_selection').live('change' ,function(){
    var selected_event = jQuery(this).val();
    var fullId = jQuery(this).attr('id');
    var event_id = fullId.split('_');
    if(selected_event=="delete"){
        jQuery("#row"+event_id[1]).remove();
    }
}); 
```

# coldfusion - 在 ColdFusion 中，如果它是 0，是否有一个 numberFormat() 掩码可以去掉小数点？

> ID：11350958
> 
> 赞同：12
> 
> 时间：2012-07-05T19:09:58.943
> 
> 标签：coldfusion, coldfusion-9, number-formatting

我正在尝试格式化数字，以便显示 2 个小数位，除非它是一个整数 - 然后我不希望显示小数点。我试过`0.00`,`_.__`和`9.99`几种组合。是否有`numberFormat`可以得到这个结果的函数的掩码？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-05T19:29:48.463

```
<cfif int(x) eq x>
  #int(x)#
<cfelse>
  #DecimalFormat(x)#
</cfif> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-05T19:16:17.423

您可以将变量除以 1，然后显示整数，不带小数位。

```
<cfset a = 5.00>
<cfset b = 5.55>

<cfoutput>#a/1#, #b/1#</cfoutput> 
```

输出是`5, 5.55`。而不是`5.00, 5.55`如果你不除以1。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-05T19:28:05.423

我不认为有一个现有的功能，但[这个四舍五入的例子](https://stackoverflow.com/a/10021060/104223)可能会奏效：

```
 round(yourNumber * 100) / 100 
```

**编辑：** 正如 JasonM 在评论中提到的，这不会为`1.1`.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-04-18T14:45:45.763

好的，我知道这个问题已经存在多年了，我的解决方案非常愚蠢，但它满足了我的需求：

```
#replace(dollarformat(list_price), '.00', '')# 
```

我知道这是美元格式而不是数字格式，但概念是一样的。

哈哈。如果它是愚蠢的并且有效，那它就不是愚蠢的，对吧？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-17T20:06:02.673

还是超级恶心。WTF Adob​​e？

```
#REReplace(REReplace(DecimalFormat(value), "0+$", "", "ALL"), "\.+$", "")# 
```

信用：[http ://www.webveteran.com/blog/web-coding/coldfusion/trimming-a-decimal-with-coldfusion-regex/](http://www.webveteran.com/blog/web-coding/coldfusion/trimming-a-decimal-with-coldfusion-regex/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-12T21:19:15.383

我知道它已经很长时间了，但是如果你首先对值进行 Numberformat ，然后修剪它，你会得到想要的结果...... NumberFormat 使它在小数点后有尾随数字 - 如果它们只是 TRIM 将消除尾随小数零。

5.55 会导致 5.55 ， 5.00 会导致 5 ， 5.5 会导致 5.5

ETC

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-09-19T22:11:09.567

我更喜欢我的代码[像煎饼一样扁平，](https://blog.codinghorror.com/flattening-arrow-code/)并尽可能避免使用条件语句。因此，如果您对降级到 Java 感到满意，您可以使用[DecimalFormat](https://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)来获得您想要的结果。

```
<cfset n = JavaCast("double", 1.0) />
<cfset x = CreateObject("java", "java.text.DecimalFormat").init() />
<cfset x.applyPattern("##.##") />
<cfset y = x.format(n) /> 
```

下面的一个班轮也可以工作。

```
<cfset y = CreateObject("java", "java.text.DecimalFormat").init( "##.##" ).format( JavaCast("double", 1.0) ) /> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-07-19T02:17:21.527

我会使用precisionEvaluate() + numberFormat() + replaceFirst(regex)

```
<cfscript>
numberFormat( precisionEvaluate( num ), '_.00' ).replaceFirst( '\.00$', '' );
</cfscript> 
```

例如：

```
50.00 -> 50
0.00 -> 0
0.001 -> 0
0.006 -> 0.01
123.45 -> 123.45
4/3 -> 1.33
5.24596 -> 5.25
pi() -> 3.14
12345678901234567890 -> 12345678901234567000 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-12-17T03:46:47.430

```
reReplace(numberFormat(val, "__.00"), "\.00$", "") 
```

# android - 一些安卓系统上传乱码图片

> ID：11350959
> 
> 赞同：5
> 
> 时间：2012-07-05T19:10:01.610
> 
> 标签：android, post, photos

首先，我使用此代码将照片保存到 Android 的 SD 卡：

```
PictureCallback jpegCallback = new PictureCallback() {
        public void onPictureTaken(byte[] data, Camera camera) {

    FileOutputStream outStream = null;

    currentFilename = String.format("%d", System.currentTimeMillis());              
    outStream = new FileOutputStream("/sdcard/" + currentFilename + ".jpg");                    
    outStream.write(data);
    outStream.close();

    }
}; 
```

然后我使用此代码在 Android 设备上上传照片：

```
public void uploadPhoto() {

        try {

            // Create HttpPost
            HttpPost post = new HttpPost("http://www.example.com/upload.php");
            HttpClient client = new DefaultHttpClient();
            client.getParams().setParameter(CoreProtocolPNames.PROTOCOL_VERSION, HttpVersion.HTTP_1_1);
            MultipartEntity entity = new MultipartEntity( HttpMultipartMode.BROWSER_COMPATIBLE );

            // Add the Picture as "userfile"
            entity.addPart( "userfile", new FileBody( 
                new File( "/sdcard/", currentFilename + ".jpg" ),
                "image/jpeg")
            );

            // Send the data to the server
            post.setEntity( entity );
            client.execute( post );

        } catch (Exception e) {
            // catch
        } finally {
            // finally
        }

} 
```

这适用于我运行 Android 2.2.2 的 LG Optimus V 和运行 Android 2.3.4 的 Droid X

但是 - 一位拥有运行 2.3.4 的 HTC Evo（与我的 Droid X 相同）的用户正在经历她上传的所有照片在保存到她的手机时（以及当它们到达服务器时）都被打乱了。图像看起来像一组锯齿状的彩色线条。

关于这里可能发生的事情以及可以采取哪些措施来解决问题的任何想法？

## 更新：

我能够访问这部手机，当我从 sdcard 中提取 jpg 文件时，它说文件大小为 3.5 - 4.0 MB，但它们无法打开并且可能已损坏......但另一个文件电话正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T21:06:07.910

看起来图片大小有问题。当宽度和高度是乱码图像的错误结果时，将数据从数组解码到图片。

可能会使用支持的屏幕尺寸拍摄照片：

```
Parameters params = camera.getParameters();
List<Camera.Size> sizes = params.getSupportedPictureSizes(); 
```

尝试将其中一个，例如最大的，设置为图片大小：

```
List<Size> sizes = params.getSupportedPictureSizes();
Size theBiggest=null;
int maxWidth = 0;
for (Size s : sizes) {
    if (s.width > maxWidth) {
        maxWidth = s.width;
        theBiggest = s;
    }
}

params.setPictureSize(theBiggest.width, theBiggest.height);
camera.setParameters(params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T18:16:43.383

图像需要缓存到 sdcard 以实现完整（非压缩）大小。步骤很简单

1.  捕捉图像
2.  将捕获的图像保存到 SD 卡
3.  从 sdcard 加载保存的图像
4.  将其转换为字节数组并添加为 ByteArrayBody，或者您可以跳过第 3 步并使用缓存文件创建文件正文。

注意：目前我远离我的电脑。如果没有详细的帖子，我会发布详细的答案。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-22T17:32:16.307

将JPEG格式的位图压缩到输出流中。假设`data`是一个`Bitmap` 类型

```
currentFilename = String.format("%d", System.currentTimeMillis());              
outStream = new FileOutputStream("/sdcard/" + currentFilename + ".jpg");   
data.compress(Bitmap.CompressFormat.JPEG, 90, outStream );    
outStream.close(); 
```

您可以将压缩比参数更改为`compress`api.. 例如，传递 80 以获得 80% 的压缩率。

[这篇文章](http://code.google.com/p/android/issues/detail?id=6066)可能与您的问题有关。

# java - 如何从 JSObject 转换为 Map（反之亦然）或列出 JSObject 成员

> ID：11350967
> 
> 赞同：4
> 
> 时间：2012-07-05T19:10:49.220
> 
> 标签：java, javascript, json, applet, jsobject

在**Javascript**中，我有以下代码：

```
var r=applet.foo({var0:99,var1:'foo',var2:applet}); 
```

在我的**Java**小程序中，我有以下内容：

```
public JSObject foo(JSObject args){
    System.out.println("The function is correctly invoked");
    //In fact, the following works perfectly:
    System.out.println("var1 is:"+(String)args.getMember("var1"));
    JSObject w=JSObject.getWindow(this);
    JSObject j=(JSObject)w.eval("new Object();");
    Map m=new Hashmap();

    //TODO here all the keys and values of args should be added to m

    m.put("hello","world");

    //TODO here all the keys and values of m should be added to j

    return j;
} 
```

如何才能做到这一点？（**待办事项**）

* * *

阅读[http://docstore.mik.ua/orelly/web/jscript/ch19_06.html](http://docstore.mik.ua/orelly/web/jscript/ch19_06.html)，我注意到 JSObject 有一个 getSlot 方法，但如果我这样做

```
args.getSlot(0) 
```

我只有一个例外：

```
netscape.javascript.JSException: No such slot 0 on JavaScript object
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T23:33:06.033

不幸的是，Errandir 的解决方案仅在您知道可用于访问要获取其属性名称的对象的全局变量名称时才有效。您需要知道此名称才能向`keys`对象添加方法，并稍后使用`JSObject`的[call方法调用它。](http://www.oracle.com/webfolder/technetwork/java/plugin2/liveconnect/jsobject-javadoc/netscape/javascript/JSObject.html#call%28java.lang.String,%20java.lang.Object%5B%5D%29)当然，您可以将对象的全局名称传递给 Java（如果有的话）。此解决方案看起来不太好，尤其是当您无法在全局上下文中引用您的对象时。

作为替代方案，我建议在评论中使用`this`' `JSObject`eval[方法](http://www.oracle.com/webfolder/technetwork/java/plugin2/liveconnect/jsobject-javadoc/netscape/javascript/JSObject.html#eval%28java.lang.String%29)，假设它会完成所有工作。它确实如此。但令人失望的是，它只能在 Mozilla Firefox 和 Opera 中按预期工作。在 Internet Explorer 9 和 Google Chrome（在 Windows 7 和 Ubuntu 12.04 LTS 下测试）`this`中，`eval`方法总是指小程序的文档窗口，而忽略`JSObject`实际代表的 JavaScript 对象实例。我不知道这是一个错误还是这些浏览器对[LiveConnect](http://www.oracle.com/technetwork/java/javase/documentation/liveconnect-docs-349790.html)的支持非常差。

好消息是在适当的上下文中执行指定函数的`call`方法。`JSObject`牢记这一点，我终于找到了如何检索 JavaScript 对象属性名称列表的解决方案。这个想法是使用`eval`方法在全局上下文中定义一个临时函数。该函数必须接收我们想要获取其属性的 JavaScript 对象，并将这些属性的名称作为数组返回。之后，我们可以通过传递相关 JavaScript 对象的 Java 表示的`JSObject`'方法调用临时函数（在我下面的方法中或在问题中听起来）。最后，可以删除临时功能。`call``jsObject``args`

```
public static ArrayList<String> getJsObjectPropertiesNames(Applet applet, JSObject jsObject) {

    if (applet == null || jsObject == null)
        return null;

    // Retrieving global context - a JSObject representing a window applet belongs to
    JSObject globalContext;
    try {

        globalContext = JSObject.getWindow(applet);
    }
    catch (JSException ex) {

        return null;
    }

    // Checking whether passed object is not an array
    try {

        jsObject.getSlot(0);
        return null;
    }
    catch (JSException e) {

    }

    String keysFunctionName = String.format("_getKeys%d", Calendar.getInstance().getTimeInMillis());
    jsObject.eval("window['" + keysFunctionName + "'] = function(jsObject) { return Object.keys(jsObject) }");
    JSObject propertiesNamesJsObject = (JSObject)globalContext.call(keysFunctionName, new Object[] { jsObject });
    jsObject.eval("delete(window['" + keysFunctionName + "'])");

    ArrayList<String> propertiesNames = new ArrayList<>();
    try {

        int slotIndex = 0;
        while (true) {

            Object propertyName = propertiesNamesJsObject.getSlot(slotIndex);
            if (propertyName instanceof String)
                propertiesNames.add((String)propertyName);
            slotIndex++;
        }
    }
    catch (JSException e) {

    }

    return propertiesNames;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-17T10:21:10.317

作为一种解决方案，您可以按照[此处](https://stackoverflow.com/questions/208016/how-to-list-the-properties-of-a-javascript-object#208020)`keys`的建议定义方法（您可以在您的 java 代码中使用）。然后你可以得到像这样的键：`JSObject.eval(...)`

```
JSObject keys = (JSObject)args.call("keys", Collections.EMPTY_LIST);
keys.getSlot(0); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-08-07T02:13:52.657

下面我打印一个字符串，请修改它以获得您需要的任何内容。

```
public final static String getKeys = "{var keys = [];for (var key in this) {keys.push(key);} keys;}";

private static String printProperties(final Object o,
                                      final boolean printType,
                                      final int level,
                                      final String tab) {
    final StringBuilder sb = new StringBuilder(100);
    if (printType) {
        sb.append("(");
        sb.append(o.getClass().getSimpleName());
        sb.append(") ");
    }
    if (o instanceof JSObject) {
        sb.append("{\n");
        final JSObject js = (JSObject) o;
        final JSObject keys = (JSObject) js.eval(getKeys);
        boolean needComma = false;
        for (int i = 0;; i++) {
            final String key = (String) keys.getSlot(i);
            if ((key != null) && !(key.equals("undefined"))) {
                final Object val = js.getMember(key);
                if (!needComma) {
                    needComma = true;
                } else {
                    sb.append(",\n");
                }
                sb.append(multitab(tab, level));
                sb.append(key);
                sb.append(":");
                sb.append(printProperties(val, printType, level + 1, tab));
            } else {
                break;
            }
        }
        sb.append("\n");
        sb.append(multitab(tab, level - 1));
        sb.append("}");
    } else {
        sb.append(o);
    }
    return sb.toString();
}

private final static String tab = "  ";

private static String multitab(final String tab,
                               int i) {
    final StringBuilder sb = new StringBuilder();
    while (i-- > 0) {
        sb.append(tab);
    }
    return sb.toString();
} 
```

# r - 从 R 脚本中看起来很奇怪的对象中提取数据

> ID：11350972
> 
> 赞同：0
> 
> 时间：2012-07-05T19:11:04.817
> 
> 标签：r

在我的 R 脚本中...

我有一个`myObject`看起来像这样的对象：

```
> myObject
          m    convInfo        data        call dataClasses     control 
      FALSE       FALSE       FALSE       FALSE       FALSE       FALSE 
```

这是从合适的地方返回的东西`is.na(obj)`。`obj``nls`

我正在尝试测试第一项是否为 FALSE 而不是 TRUE。我怎样才能把它提取出来？我试过`myObject$m`了，但没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:57:19.940

您有一个命名（逻辑）向量。

```
> v <- 1:5
> names(v) <- LETTERS[1:5]
> is.na(v)
    A     B     C     D     E 
FALSE FALSE FALSE FALSE FALSE 
> myObj <- .Last.value 
```

您可以像处理任何其他原子向量一样处理它：

```
> myObj[1]
    A 
FALSE 
> myObj[1] == FALSE
   A 
TRUE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:19:24.007

返回的对象`nls()`是一个列表。on a list的行为`is.na()`在 what is an is not 的意义上有些特殊`NA`。来自`?is.na`：

```
Value:

     The default method for ‘is.na’ applied to an atomic vector returns
     a logical vector of the same length as its argument ‘x’,
     containing ‘TRUE’ for those elements marked ‘NA’ or, for numeric
     or complex vectors, ‘NaN’ (!) and ‘FALSE’ otherwise.  ‘dim’,
     ‘dimnames’ and ‘names’ attributes are preserved.

     The default method also works for lists and pairlists: the result
     for an element is false unless that element is a length-one atomic
     vector and the single element of that vector is regarded as ‘NA’
     or ‘NaN’. 
```

根据上面引用的文本确定的`t`逻辑向量也是如此`TRUE`。因此所有`FALSE``t`

```
t[1]
t["m"]
head(t, 1) 
```

提取 的第一个元素`t`。如果您想测试，`FALSE`那么我可以尝试：

```
!isTRUE(t[1]) 
```

例如

```
> set.seed(1)
> logi <- sample(c(TRUE,FALSE), 5, replace = TRUE)
> logi
[1]  TRUE  TRUE FALSE FALSE  TRUE
> !isTRUE(logi[1])
[1] FALSE 
```

该`$`版本不起作用的原因`$`是记录*仅*适用于非原子向量。`logi`（或你的`t`）是一个原子向量，因为它包含相同类型的元素。

```
> is.atomic(logi)
[1] TRUE
> names(logi) <- letters[1:5]
> logi$a
Error in logi$a : $ operator is invalid for atomic vectors
> logi["a"]
   a 
TRUE 
```

# objective-c - 如何强制仅在桌面上打开 NSWindow？

> ID：11350973
> 
> 赞同：0
> 
> 时间：2012-07-05T19:11:16.823
> 
> 标签：objective-c, xcode, macos, cocoa, window

我有一个状态栏应用程序，它有一些窗口，但如果我在应用程序中全屏显示，窗口会在它前面打开。如何强制在桌面上打开窗口并将用户移动到桌面？
我寻求在 Twitter.app 中发生的事情：当您尝试使用状态栏按钮“New Tweet...”发布新推文时，新推文窗口在桌面上打开。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T21:25:07.227

试试[NSApplicationPresentationOptions](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/NSApplication/currentSystemPresentationOptions)。您所要做的就是设置`currentSystemPresentationOptions`

# ios - 显示提示时iOS5 UINavigationBar背景图像问题

> ID：11350976
> 
> 赞同：4
> 
> 时间：2012-07-05T19:11:30.407
> 
> 标签：ios, uinavigationcontroller, uinavigationbar, uiappearance

我正在使用 iOS 5 中的新外观代理来为我的 UINavigationBar 设置背景图像。

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"ZSNavigationBG.png"] forBarMetrics:UIBarMetricsDefault];
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"ZSNavigationLandscapeBG.png"] forBarMetrics:UIBarMetricsLandscapePhone]; 
```

这工作正常，但我需要设置导航栏的提示属性。当我这样做时，导航栏的高度会增加，并且我的背景图像不再垂直填充该导航栏，因此看起来很糟糕。

使用自定义背景图像时，如何通过提示说明高度变化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-05T20:25:20.453

该图像应该是[可拉伸的图像](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImage_Class/DeprecationAppendix/AppendixADeprecatedAPI.html#//apple_ref/occ/instm/UIImage/stretchableImageWithLeftCapWidth%3atopCapHeight%3a)，因此它可以在任一方向延伸而不会破坏任何东西。

# ios - 从服务器下载和保存大量图像时的 iOS 内存问题 (ARC)

> ID：11350978
> 
> 赞同：4
> 
> 时间：2012-07-05T19:11:40.753
> 
> 标签：ios, image, memory, download, nsfilemanager

以下代码从不同大小的服务器下载 700 多个图像，这里的问题是内存（即使使用 ARC）永远不会释放，最终会出现内存警告，然后应用程序退出。我在这种方法中尝试过@autoreleasepool，但似乎没有用。此外，我尝试在不同位置停止 for 循环，以查看内存是否在完成后释放，但事实并非如此。

此方法在 for 循环中调用并接收图像 url 和短名称。它已经在后台线程和主线程中进行了尝试，结果相同（内存方面）。

```
-(void)saveImage:(NSString*)image name:(NSString*)imageName{     
    int k = 0;
    for (int j = 0; j < [imageName length]; j++) {
        if ([imageName characterAtIndex:j] == '/') {
            k = j;
        }
    }if (k != 0) {
        imageName = [imageName substringFromIndex:k+1];
    }    

    NSString *fullPath = [documentsDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@", imageName]]; 

    if ([fileManager fileExistsAtPath:fullPath]) {
        [fileManager removeItemAtPath:fullPath error:nil];
    }

    NSURL *url = [NSURL URLWithString:image];
    NSData *data = [[NSData alloc]initWithContentsOfURL:url];
    NSLog(@"Saved: %d:%@", [fileManager createFileAtPath:fullPath contents:data attributes:nil], url); 
    data = nil;
}  

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

int cacheSizeMemory = 4*1024*1024; // 4MB
int cacheSizeDisk = 32*1024*1024; // 32MB
NSURLCache *sharedCache = [[NSURLCache alloc] initWithMemoryCapacity:cacheSizeMemory diskCapacity:cacheSizeDisk diskPath:@"nsurlcache"];
[NSURLCache setSharedURLCache:sharedCache];

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
self.window.rootViewController = self.viewController;
[[UIApplication sharedApplication] setStatusBarHidden:YES];
[self.window makeKeyAndVisible];
return YES;
}

- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application {
NSLog(@"mem warning, clearing cache");
[[NSURLCache sharedURLCache] removeAllCachedResponses];
} 
```

![分配](../Images/389a066bd64355cd2d0dac4a09f0d815.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-06T16:35:59.480

根据您的屏幕截图，我认为问题在于 NSURL 缓存而不是实际的 NSData 对象。您可以尝试以下方法：

在您的应用程序委托中，设置初始 URL 缓存：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    // Do initial setup
    int cacheSizeMemory = 16*1024*1024; // 16MB
    int cacheSizeDisk = 32*1024*1024; // 32MB
    NSURLCache *sharedCache = [[NSURLCache alloc] initWithMemoryCapacity:cacheSizeMemory diskCapacity:cacheSizeDisk diskPath:@"nsurlcache"];
    [NSURLCache setSharedURLCache:sharedCache];

    // Finish the rest of your didFinishLaunchingWithOptions and head into the app proper
} 
```

将以下内容添加到您的应用程序委托中：

```
- (void)applicationDidReceiveMemoryWarning:(UIApplication *)application {
    [[NSURLCache sharedURLCache] removeAllCachedResponses];
} 
```

将创建一个缓存文件：`"Library/Caches/your_app_id/nsurlcache"`

Apple 示例的链接在这里：[URL Cache](https://developer.apple.com/library/ios/#samplecode/URLCache/Introduction/Intro.html)

代码未经测试，但这个（或类似的）应该对你的问题进行排序+加上你可以试验缓存大小。

您可以使用此代码发布另一个分配的屏幕截图吗？我希望看到内存使用停止增长并趋于平缓。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:19:07.287

" `dataWithContentsOfURL`" 返回一个自动释放的 NSData 对象[，它通常在运行循环结束或方法结束时才会被释放](https://stackoverflow.com/questions/673372/when-does-autorelease-release-on-an-iphone-app)，所以难怪你很快就会填满内存。

将其更改为显式的“ `initWithContentsOfURL`”方法，然后在您完全完成图像数据时通过执行“ ”[*强制释放。*](https://stackoverflow.com/questions/9244735/objective-c-arc-when-to-use-autoreleasepool)`data = nil;`

# c# - 无法在 .Net 中连接到 SQL Server 2008

> ID：11350983
> 
> 赞同：1
> 
> 时间：2012-07-05T19:12:15.900
> 
> 标签：c#, .net, database, sql-server-2008

我正在开发 C# Web 服务。

我已经部署了一个 Web 服务，它在我的本地系统上运行良好，但是当我尝试在我的虚拟专用服务器上运行相同的服务时，它返回一个错误。

这是我的连接字符串

```
Data Source = <serverinstance>\\SQLEXPRESS; Initial Catalog = DomainTable; User ID= <serverinstance>\\admin; Password = <Windows_Login_Password> 
```

在此之前我使用这个连接字符串

```
Data Source=<serverinstance>\\SQLEXPRESS; Initial Catalog=DomainTable; Integrated Security=SSPI"; 
```

他们都不为我工作。请帮助它真的很重要

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:13:54.997

> 数据源=serverinstance\SQLEXPRESS；
> -----------------------------------------^ 这里只有一个斜线

还要确保远程服务器可以看到您引用的任何`<serverinstance>`. 你可能有这个，`localhost`但你的网络服务器不认为你的机器是本地主机。它也可能无法通过名称访问它，特别是如果它位于不同的域中。

如果您尝试使用 Windows 身份验证，那么您根本不应该使用：

> 用户 ID = serverinstance\admin；密码 = Windows_Login_Password

哇，**永远不要在任何地方硬编码 Windows 密码**。如果要使用 SQL 身份验证，则设置 . 否则，您应该使用它而不是用户 ID / 密码：

> 持久安全信息 = true;

并确保 IIS 用户已被授予访问您的 SQL Server 的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:19:22.793

试试吧；

```
"data source=.\\SQLEXPRESS;Integrated Security=SSPI;initial catalog=DomainTable" 
```

我相信用户名/密码一般只需要远程连接，你必须为指定的数据库设置它们。如果您没有要求登录凭据，上面的连接字符串应该可以让您继续在本地计算机上运行 sqlexpress 实例。

**编辑**

如果您使用 IIS 来托管，这是我最近为部署和设置应用程序池以使用 SQL Express 2008 所做的一篇文章中的一部分。即使您不使用 IIS，您仍然需要执行类似的操作使用 SQL Server 正确设置您的托管环境。

**步骤 1 为 IIS USER 创建数据库登录**

在 MS SQL SERVER 的安全部分，需要右键单击用户和您的 IIS APPPOOL（IIS APPPOOL\apppoolname，在第 1 部分第 2 步中创建）。查看 dp.'s answer here for more step- [Add IIS 7作为 SQL Server 登录的 AppPool 身份](https://stackoverflow.com/questions/1933134/add-iis-7-apppool-identities-as-sql-server-logons)

**步骤 2 为数据库上的 IIS USER 设置权限**

右键单击数据库名称，然后单击属性。在权限部分添加您刚刚创建的 APPPOOL 用户，一定要给他 Execute \Select permissions required 。

注意：Website1 也需要执行、选择、删除、插入权限。Website2 也在使用这个不应该的应用程序池，因为我们不需要让用户在 trimdynamics 应用程序中拥有这种功能。我们可以分离应用程序池，以便我们的修剪动态 IIS USRS 仅获得执行和选择权限。

如果这没有帮助，如果没有对托管结构的具体了解，就很难说出真正发生了什么，因为从开发环境部署到生产环境时会有很多问题:(

# ubuntu-12.04 - 如何将交换添加到运行 Ubuntu 12.04 LTS 的 Amazon EC2 实例？

> ID：11350985
> 
> 赞同：6
> 
> 时间：2012-07-05T19:12:22.950
> 
> 标签：ubuntu-12.04

默认 Ubuntu 12.04 LTS 出于某种原因不会创建交换。安装后是否有“正确”的方法来添加它？

```
root@aux3:/root# df -h
已使用的文件系统大小可用使用百分比已安装在
/dev/xvda1 8.0G 1.4G 6.3G 18% /
udev 1.9G 12K 1.9G 1% /dev
tmpfs 751M 188K 750M 1%/运行
无 5.0M 0 5.0M 0% /运行/锁定
无 1.9G 0 1.9G 0% /run/shm
/dev/xvdb 394G 79G 296G 21% /mnt

root@aux3:/root# swapon -s
文件名
root@aux3:/root# free -m
             缓存的已用空闲共享缓冲区总数
电话：3750 3730 20 0 75 3433
-/+ 缓冲区/缓存：221 3528
交换：0 0 0
根@aux3:/根#

```

### 更新：通过交换文件找到临时解决方案：

（虽然我仍在寻找“正确”的方式）

```
dd if=/dev/zero of=/mnt/swap1 bs=1024 count=4M
mkswap /mnt/swap1
chown root.root /mnt/swap1
chmod 600 /mnt/swap1
交换 /mnt/swap1

```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-05T05:57:39.407

因为我花了一天的大部分时间为自己理解这个问题，并且因为提取 ayurchen 的链接需要进行谷歌缓存搜索，所以我想我会发布一个稍微更详细的演练，借鉴 ayurchen 非常有用的答案。

## 什么是交换空间，为什么要使用它？

交换空间是 Linux（和大多数其他操作系统）在实际物理内存开始变得拥挤时用于从内存中存储对象的磁盘空间。因为磁盘通常比内存慢，Linux 将最近最少使用的对象首先存储在交换中，并尽可能多地保存在内存中。如果可能，通常建议使用与内存大小相等的交换空间。[在此处](https://help.ubuntu.com/community/SwapFaq)查看有关交换空间的更多详细信息。

## 我应该在哪里设置？

我也开始使用的 Ubuntu 12.04 LTS AMI 最初配置为没有交换空间，因为存储设备的大小和数量可能会有所不同。但大多数都自动配备了大型**免费**临时存储设备。由于 S3 存储受成本限制，因此临时驱动器是交换文件的好地方。我的设备名称与问题中提到的相同`/dev/xvdb`，但您可以在实例启动期间配置它。

## 如何在我的临时存储驱动器上设置交换空间？

交换空间可以设置在单个文件中，也可以设置在设备的分区上。文件可以由磁盘上的不相邻块表示，而分区是一组预定义的相邻块。由于磁盘读写速度更快，您不必长时间移动读取头，因此使用分区可以获得更好的性能。（这就是为什么上述问题使用文件作为临时解决方案打折的原因。）

Linux 带有许多管理磁盘分区的程序，包括 fdisk、sfdisk、parted 等。我们将使用`sfdisk`，因为它可以接受来自 shell 脚本的所有必要参数。这很重要，因为每次我们“停止”我们的实例时都会丢失临时存储。因此，我们在每次启动实例时自动运行的文件中设置了一个脚本，`/etc/rc.local`.

```
# Unmount the drive in-case it is already mounted. Umount throws an error if
# it wasn't mounted, so we add || : to continue the script in that case
umount /dev/xvdb || :

# Each line below is a partition (4 maximum master partitions for this partition 
# type). Can can generally use the default arguments, supplying only the amount
# of space we want in blocks (512 came out to ~4gb for me), and the partition
# type (82 for swap, 83 for general linux is default). This will create:
# dev/xvdb1 with 1024 blocks
# dev/xvdb2 with the remainder of the disk
sfdisk /dev/xvdb << EOF
,512,82
;
;
;
EOF

# Now we format the swap partition:
mkswap /dev/xvdb1

# And the remainder. You can choose amoung the various filesystem types, but
# make sure you have the necessary formatter installed. To check, ls /sbin/mk*
mkfs.ext4 /dev/xvdb2 
```

最后，我更喜欢将我的挂载信息包含在 中`/etc/fstab`，这是 Ubuntu 上的一个系统文件，它规定了如何自动处理各种可用设备。它也在启动时运行。

```
/dev/xvdb1      swap    swap    sw,nobootwait      0 0
/dev/xvdb2      /mnt2   ext4    defaults,nobootwait        0 0 
```

nobootwait 选项是为了确保 Ubuntu 不会在启动时挂起“/dev/xvdb(1/2) 的磁盘驱动器尚未准备好或不存在。继续等待，或按 S 跳过安装或按 M 进行手动恢复。”

`/mnt2`确保在您计划使用 mkdir 安装它的位置或任何位置创建一个文件夹。

## 如何调试我遇到的问题？

您可以运行 rc.local 脚本`sudo /etc/rc.local`来观察它运行的问题。`sudo fdisk -l`运行后应该显示您的新分区。如果看起来没问题，请尝试使用`sudo mount /dev/xvdb1`. 这将使用您在 fstab 中保存的配置。如果失败，请尝试使用您的安装参数并相应地调整 fstab。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-28T19:56:36.053

也许你正在寻找这个：http: [//inprvt.com/index.php/blogs/entry/how-to-add-swap-space-on-a-linux-based-ec2-server](http://inprvt.com/index.php/blogs/entry/how-to-add-swap-space-on-a-linux-based-ec2-server)

见第二种方法。您需要重新分区您的临时存储设备。我会将这些内容放在 /etc/rc.local 中：

```
umount /dev/xvdb # in case it is already mounted
sfdisk /dev/xvdb << EOF
,1024,82
,
;
;
EOF
mkswap /dev/xvdb1 && swapon /dev/xvdb1
mkfs.xfs -f /dev/xvdb2 && mount /dev/xvdb2 /mnt 
```

有两点需要注意：

*   上面的 1024 是以块为单位的大小（82 是 Linux 交换分区类型）。似乎对于不同的实例，块大小可能不同（就像设备名称一样）。因此，首先进行实验或根据 sfdisk 输出计算适合您的内容。
*   mkfs.xfs 通常需要几秒钟。mkfs.ext4 可能需要半小时（在 1TB 卷上）。YMMV 取决于您选择的文件系统。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-07T13:00:12.617

找到了负责按需创建和删除交换文件的交换空间守护进程**。**它只需要很少的调整就可以将交换文件保存在临时驱动器上。

在我看来，这似乎是最优雅的解决方案：

```
DEBIAN_FRONTEND=noninteractive apt-get -y install swapspace
echo 'swappath="/mnt"' >> /etc/swapspace.conf
service swapspace restart 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-26T01:07:31.857

我首先设置`swapspace`（必须从源代码构建一个），但后来决定**退回**到手动解决方案，因为我更喜欢在生产环境中对内存进行**更多控制。**

我假设 2 个实例块设备的安装已经在`/etc/fstab`as`/.inst0`和`/.inst1`.

添加类似这样的内容`/etc/rc.local`：

```
setup_swap()
{
  for D in /.inst0 /.inst1; do
    findmnt $D || continue
    cd $D || continue
    test -r swapfile || dd if=/dev/zero of=swapfile bs=1M count=12292
    chmod 600 swapfile
    mkswap swapfile
    swapon swapfile
  done
}

setup_swap 
```

该代码与 EC2 实例存储（又名 SSD，又名“临时”，每次停止实例时都会销毁）完全兼容，并且对重启友好。

请记住，创建和/或启用交换文件需要一段时间，所以**在重新启动后****给它一点时间**看看它是否有效。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-13T22:55:15.940

要在引导时启用交换（在按照上述说明创建交换文件之后），请将以下条目添加到 /etc/fstab：

```
/mnt/swap1 swap swap defaults 0 0 
```

# php - 保护对 PHP API 的访问

> ID：11350989
> 
> 赞同：4
> 
> 时间：2012-07-05T19:12:47.257
> 
> 标签：php, iphone, api, rest, hash

我有一个 iPhone 应用程序在服务器上使用我的 php api，但如果有人知道 url，它当前是打开的。我想确保没有人可以使用这个 API，直到我准备好让它成为一个公共 api（如果我什至这样做的话）

我读过[这篇文章](http://www.thebuzzmedia.com/designing-a-secure-rest-api-without-oauth-authentication/)，但我不确定他们说的是什么意思：

> [客户] 在进行 REST API 调用之前，将一堆唯一数据组合在一起（这通常是您打算发送的所有参数和值，它是 AWS 网站上代码片段中的“数据”参数）

我不明白如果我用我的 api 秘密散列我计划发送的参数，如果我发送未加密的参数/值，这比仅仅散列 api 秘密更安全。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T19:19:31.683

HTTPS API 并使用 API 密钥。然后您会知道只有拥有密钥的人（在本例中为您）才能访问 API。

你说得对，它并不更安全。这就是为什么我建议您使用 SSL 连接。除非您计划对来回传输的所有内容进行加密。

公钥/私钥方案也可以很好地工作。HTTPS 需要**很少的努力**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-05T19:26:37.400

[数字签名](http://en.wikipedia.org/wiki/Digital_signature)提供了一种验证通过不安全连接发送的消息的方法。

设置：每个客户端都有自己的**私钥**和**公钥**（客户端只需要保存私钥）。服务器将存储每个客户端的公钥。公钥对所有人都是可见的，并且可以被服务器用来识别客户端。只有客户端知道的私钥，它永远不会向任何人显示。

客户端对请求进行签名：连同其余的请求数据，客户端将对组合的请求数据进行哈希处理，并使用私钥对哈希进行加密。服务器将以相同的方式生成哈希（将签名排除在哈希计算之外），然后使用公钥解密签名。如果哈希匹配，则请求是真实的。

请注意，HTTPS 允许客户端证书，因此您可以利用现有工具来完成上述所有操作，而无需编写一行服务器端代码（您只需配置您的 Web 服务器；唯一的技巧是确保仅服务器接受它已经拥有的证书）。此外，客户端代码的数量应该是最少的：除了设置连接以使用客户端证书之外，您不需要做更多的事情。由于您正在控制客户端，因此您可以使用自签名证书并将服务器添加为证书颁发机构。[关于在 iPhone 应用程序中](https://stackoverflow.com/search?q=iPhone%20HTTPS%20%2bclient%20%2bcertificate&submit=search)使用客户端证书有很多关于 SO 的问题；您可以从阅读它们开始。

Note also that any scheme to protect the web API only works so long as copies of the app are in trusted hands. Should anyone untrustworthy get ahold of it, they can use the app or extract any secret data used by the app and access the API as they will.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:18:37.003

出于开发目的，您可以只使用您的 Web 服务器设置来仅允许来自您的 IP 的请求。

# javascript - 如何以反向/从右到左的顺序显示阿拉伯网站的 nivo-slider 分页？

> ID：11350990
> 
> 赞同：0
> 
> 时间：2012-07-05T19:12:55.433
> 
> 标签：javascript, css, nivo-slider

我在阿拉伯语网站上使用 nivo-slider。现在的问题是分页需要看起来像 8765 而不是 1,2,3,4

我怎么能[http://nivo.dev7studios.com/demos/](http://nivo.dev7studios.com/demos/)的分页让它对我有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T19:22:52.620

您可以尝试在 nivo-control DOM 元素上将 float:left 覆盖为 float:right。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:25:43.630

尝试在你的 head 标签中添加这些样式，在 nivo-slider.css 之后

```
.nivo-controlNav nivo-control{
float: right;
} 
```

# android - Android 蓝牙网络共享

> ID：11350991
> 
> 赞同：3
> 
> 时间：2012-07-05T19:12:56.110
> 
> 标签：android, bluetooth

我正在尝试通过蓝牙连接系绳（与其他设备共享 Android 手机互联网连接）。我需要这个才能在无根电话上工作。

我不是在寻找任何应用程序。我正在寻找实现（源代码、脚本等）

我们也可以使用 PPP 来做到这一点吗？（点对点协议）

有没有人尝试过这个并且运气好？

我打算为此编写一个应用程序。

任何帮助将不胜感激。

谢谢

Sayooj Valsan

# jquery - 使用 JQuery 循环交替图像 scr

> ID：11350993
> 
> 赞同：0
> 
> 时间：2012-07-05T19:12:58.240
> 
> 标签：jquery, image, loops, src

好的，所以我在网站的内容部分中有一张图片（id = "slideshow"）。我正在尝试创建一个使用 JQuery 交替图像 src 的循环。这是我到目前为止的代码。它似乎循环通过，但它显示的唯一 src 更改是最后一个。结果，glossy.jpg 是我看到的唯一图像。我知道它必须在某种程度上工作，因为光泽.jpg 不是我设置的原始 src。一旦我得到每张图片，我会整理其余的代码。任何答案都非常感谢=）

```
 $(document).ready(function() {

    for (i = 1; i <= 100; i++){
    $("#slideshow").attr("src", "Images/image1.jpg").fadeTo(3000, 1.00);
    $("#slideshow").fadeTo("slow", 0.00);
    $("#slideshow").attr("src", "Images/image2.jpg").fadeTo(3000, 1.00);
    $("#slideshow").fadeTo("slow", 0.00);
    $("#slideshow").attr("src", "Images/glossy1.jpg").fadeTo(3000, 1.00);
    $("#slideshow").fadeTo("slow", 0.00);
    }
    }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:20:58.847

考虑此代码用于您正在制作的图像旋转器。

```
var images = new Array ('test1.png', 'test2.png', 'test3.png');
var index = 1;

function rotateImage()
{
  $('#myImage').fadeOut('fast', function()
  {
    $(this).attr('src', images[index]);

    $(this).fadeIn('fast', function()
    {
      if (index == images.length-1)
      {
        index = 0;
      }
      else
      {
        index++;
      }
    });
  });
}

$(document).ready(function()
{
  setInterval (rotateImage, 2500);
}); 
```

这将是 HTML

```
<div id="test">
  <img id="myImage" src="test1.png" alt="image test" />
  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit...</p>
</div> 
```

因为您可以在将 URL 存储到其中的同时使用数组，然后使用`setInterval()`函数进行相同的旋转。

参考：[www.burnmind.com](http://www.burnmind.com/howto/how-to-create-a-simple-automatic-image-rotator-using-jquery)

# c - 转换为 int 和浮点错误？

> ID：11350994
> 
> 赞同：8
> 
> 时间：2012-07-05T19:13:00.033
> 
> 标签：c, casting, floating-point, integer

```
myInt = int( 5 * myRandom() ) 
```

**myRandom()**是一个随机生成的浮点数，*应该*是 0.2。

所以这个语句**应该评估为 1**。

我的问题：是否有可能**由于浮点错误它不会评估为 1**？

例如，如果由于浮点错误，应该是*0.2*的东西会比这*更少*吗？例如，IE 考虑以下 3 种可能性：

```
int(5 * 0.2 )                = 1 //case 1 normal
int(5 * 0.2000000000000001 ) = 1 //case 2 slightly larger, its OK
int(5 * 0.1999999999999999 ) = 0 //case 3 negative, is NOT OK, as int() floors it 
```

case3甚至可能吗？*0.1999999999999999**是*浮点错误的结果吗？到目前为止，我实际上从未见过负的 epsilon，只有情况 2，当它稍微大一点时，这没关系，就像当它被强制转换为 int() 时，它会“降低”它的正确结果。但是，对于负 epsilon，“地板”效应将使生成的 0.9999999999999996 评估为 0。

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-05T19:25:51.570

myRandom 不可能返回 .2，因为 .2 不能表示为浮点数或双精度数，假设您的目标系统使用 IEEE 754 二进制浮点标准，这是绝大多数的默认值。

如果 myRandom() 返回最接近 0.2 的可表示数，则 myInt 将为 1，因为可表示为浮点数的最接近 .2 的数略大于 0.2（它是 0.20000000298023223876953125），最接近的可表示双精度也是如此（0.200000000000000011102230246225156509042361）66809042361 .

在其他情况下，这将不是真的。例如，最接近 0.6 的双精度数是 0.59999999999999997779553950749686919152736663818359375，所以 myInt 将是 2，而不是 3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-05T19:19:27.410

是的，这是可能的，至少就 C 标准而言。

该值`0.2`不能以二进制浮点格式精确表示。因此，返回的值`myRandom()`将略低于或略高于数学值`0.2`。C 标准允许任一结果。

现在很可能 IEEE 语义只允许结果略大于`0.2`- 但 C 标准不需要 IEEE 语义。这是假设结果是从 value 中尽可能精确地得出的`0.2`。如果该值是由一系列浮点运算生成的，每个运算都会引入一个小错误，那么它很容易小于或大于`0.2`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T19:23:39.110

这不是浮点*错误*，而是浮点的工作方式。任何不是 1/（2 的幂）的分数都无法精确表示，并且将向上*或向下*舍入到最接近的可表示数字。

您可以通过在转换为整数之前乘以大于 1 的小 epsilon 来修复您的代码。

```
myInt = int( 5 * myRandom() * 1.000000000000001 ) 
```

看看[每个计算机科学家应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T19:58:42.340

为什么不将浮点数乘以 5.0，然后使用 round 函数正确舍入呢？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-05T19:52:31.690

这是可能的，具体取决于您选择的数字。要检查特定数字，您始终可以以很高的精度打印它们： printf("%1.50f", 0.2)*

# c# - C#如何正确地从内存中卸载类？

> ID：11350999
> 
> 赞同：0
> 
> 时间：2012-07-05T19:13:34.510
> 
> 标签：c#, dynamic, loading, .net-assembly

我正在开发一个服务在后台连续运行的解决方案，并且可以在运行时添加/删除插件 DLL。该服务将在需要时加载必要的插件，运行它们并卸载它们。这是当前给我带来麻烦的卸载部分：一旦某个类第一次成功加载（变量 tc），即使更新了 DLL 文件，它也永远不会重新加载。我想我没有正确卸载类/程序集/应用程序域，所以我很感激一些关于走最后一英里的建议。

编辑：我更新了帖子以反映最近的代码更改，并解释了卸载何时没有效果：问题没有出现在 Linux Ubuntu（通过 Mono）上，但它出现在 Windows 2008 Server 上，当我试图用较新的文件版本替换某个插件 DLL。似乎 .NET 框架已将程序集缓存在某处，并且无需重新加载它就很高兴。DLL 文件名没有改变，但 File Version 属性不同，所以我希望运行时将先前加载的 DLL 版本与正在加载的版本进行比较，如果版本号不同，则使用较新的版本。如果我稍微更改代码以从具有不同名称的 DLL 文件加载程序集，则重新加载会按预期进行。

```
using System;
using System.Reflection;

namespace TestMonoConsole
{
    public interface ITestClass
    {
        void Talk();
    }
    class MainClass
    {
        public static void Main (string[] args)
        {
            string pluginPath = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location);

            string classAssembly = "TestClass";
            string className = "TestMonoConsole.TestClass";
            string command = "";
            do
            {
                try
                {
                    System.AppDomain domain = System.AppDomain.CreateDomain(classAssembly);
                    string pluginAssemblyFile = pluginPath + "/" + classAssembly + ".dll";
                    System.IO.StreamReader reader = new System.IO.StreamReader(pluginAssemblyFile, System.Text.Encoding.GetEncoding(1252), false);
                    byte[] b = new byte[reader.BaseStream.Length];
                    reader.BaseStream.Read(b, 0, System.Convert.ToInt32(reader.BaseStream.Length));
                    domain.Load(b);
                    reader.Close();
                    ITestClass tc = (ITestClass) Activator.CreateInstance(domain, classAssembly, className).Unwrap();
                    tc.Talk();
                    System.AppDomain.Unload(domain);
                }
                catch (System.IO.FileNotFoundException e)
                {
                    Console.WriteLine (String.Format("Error loading plugin: assembly {0} not found", classAssembly));
                }
                command = Console.ReadLine();
            } while (command == "");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-05T19:23:52.723

您正在将类型直接创建到主机域中。使用 Activator.CreateInstance 时需要根据[http://msdn.microsoft.com/en-us/library/ms224132(v=vs.90).aspx指定域](http://msdn.microsoft.com/en-us/library/ms224132(v=vs.90).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T19:31:26.610

您正在自己的 AppDomain 中实例化插件类型。在多次实现插件框架之后，我强烈建议考虑使用 MEF（托管扩展框架）作为解决方案，因为它可以处理这些常见的代码隔离问题。如果您不想要 MEF，一种方法是实现一个“远程控制”类，该类将充当应用程序域之间的通信器。您可以在远程类上调用一个方法，该方法将在辅助应用程序域中实例化和运行代码。

[MEF 文档](http://mef.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-05T19:30:32.467

无法从 AppDomain 卸载类型和程序集。因此，您需要创建新的 AppDomain、加载类型、完成所有工作，然后卸载该域。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-05T19:27:31.183

此外，您可以利用托管加载项框架（MAF、System.AddIn）为您执行此操作，而不是重新发明此机制。[在这里](http://www.developerfusion.com/article/9396/creating-extensible-applications-with-maf/)查看快速入门。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-13T17:34:50.430

根据[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/ms404279.aspx)，CLR 默认不使用卷影复制。您可以尝试按照以下步骤启用它：

1.  创建一个[AppDomainSetup](http://msdn.microsoft.com/en-us/library/9hc77a1s)。
2.  在 AppDomainSetup 实例中将 ShadowCopyFiles 设置为 true。
3.  在 AppDomainSetup 实例中，将 ShadowCopyFilesDirectories 设置为包含您希望能够在运行时覆盖的程序集的目录路径。这可能只是插件程序集所在的目录。
4.  在 AppDomainSetup 实例中，根据您的需要设置其他所有内容。
5.  使用以 AppDomainSetup 作为参数的 AppDomain.CreateAppDomain[的](http://msdn.microsoft.com/en-us/library/system.appdomain.createdomain)重载之一。
6.  尝试更换插件程序集。

它适用于 Mono 而不是 CLR (Windows) 的事实可能意味着[CLI](http://en.wikipedia.org/wiki/Common_Language_Infrastructure)未指定默认情况下是否应启用卷影复制。