# StackOverflow 问答 10939000-10939999

# javascript - 使用 jQuery 的 OSX Snow Leopard 开始屏幕页面转换

> ID：10939001
> 
> 赞同：0
> 
> 时间：2012-06-07T20:01:49.177
> 
> 标签：javascript, jquery, animation, css-transitions

有一个关于 jQuery 页面转换的非常直接的问题。我想复制我的 Mac 从启动到显示桌面时所做的转换。我想为此使用jQuery。有没有人偶然发现了一些冷酷的资源来帮助我重定向？

您可以在此处观看有关我正在寻找的过渡的视频：[http ://www.youtube.com/watch?v=-I9F4JswFXI](http://www.youtube.com/watch?v=-I9F4JswFXI)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:11:36.920

这是使用 CSS3 过渡，但会为其他浏览器优雅地回退。基本上我们设置了一个完整的页面包装 div 并使其不可见且略小。然后，当我们制定`.show`类时，它将过渡到全尺寸和全不透明度。

然后我们在页面加载时触发这个，你应该几乎和狮子一样。:)

**CSS**

```
#fullPageWrapper{
    -webkit-transition:all 1s;
    -moz-transition:all 1s;
    -ms-transition:all 1s;
    -o-transition:all 1s;
    transition:all 1s;
    -webkit-transform:scale(0.8);
    -moz-transform:scale(0.8);
    -ms-transform:scale(0.8);
    -o-transform:scale(0.8);
    transform:scale(0.8);
    opacity:0;
}

#fullPageWrapper.show{
    -webkit-transform:scale(1);
    -moz-transform:scale(1);
    -ms-transform:scale(1);
    -o-transform:scale(1);
    transform:scale(1);
    opacity:1;
} 
```

**jQuery**

```
$(function(){
     $(window).on('load', function(){
          setTimeout(function(){
              $('#fullPageWrapper').addClass('show');
          },16);         
     });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:11:51.570

不知道可用的资源。但是您可以使用 jQuery Fade（用于隐藏启动屏幕）、Load（用于使用 AJAX 加载图像内容）和 Zoom（用于在启动时放大图像）来创建它。

这些链接将帮助您：

[http://api.jquery.com/fadeOut/](http://api.jquery.com/fadeOut/)

[http://api.jquery.com/load/](http://api.jquery.com/load/)

[如何使用 jQuery 在页面加载时放大 div？](https://stackoverflow.com/questions/7073422/how-to-zoom-a-div-in-on-page-load-with-jquery)

# php - php中的in_array函数总是返回false

> ID：10939005
> 
> 赞同：1
> 
> 时间：2012-06-07T20:01:52.297
> 
> 标签：php, arrays, compare

我有一个这样的数组。

```
 $flds = array("fn", "ln", "em"); 
```

我有另一个像这样的关联数组。这是从 JSON POST 动态返回的。

```
 $ret = array("fn" => "xyz", "ln" => "abc", "em" => "s.2", "another" => "123") 
```

我想搜索第一个数组是否存在于第二个数组中。我这样做了：

```
 if ( in_array( $flds, array_keys($ret))) 
      echo "exists";
  else 
      echo "does not"; 
```

它总是返回“不”。当我打印时，$flds 和 array_keys($ret) 看起来完全一样。

这里有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T20:04:48.287

该代码正在寻找整个 $flds 数组作为 $ret 中的一个值；

您可能想要使用[array_intersect()](http://us2.php.net/manual/en/function.array-intersect.php)然后检查结果的长度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:23:09.363

`in_array()`函数搜索元素是否是数组的元素。在您的情况下，您想确定第一个数组是否是第二个数组中键的子集。让我告诉你什么有效，什么无效：

```
/* check if 'fn' is an array key key of $ret */
in_array('fn', array_keys($ret)) // true

/* check if array('fn') is an element of array(array('fn'), 'en') */
in_array(array('fn'), array(array('fn'), 'en')) // true

/* check if $flds is a key of $ret */
in_array( $flds, array_keys($ret)) // false

/* check if all elements of $flds are also keys of $ret */
array() === array_diff($flds, array_keys($ret)) // true 
```

# objective-c - 使用默认导航栏文本

> ID：10939011
> 
> 赞同：0
> 
> 时间：2012-06-07T20:02:20.730
> 
> 标签：objective-c, ios, uinavigationcontroller, storyboard, uinavigationitem

我正在使用情节提要并开发 iPhone 应用程序并使用导航控制器。

当我实现它时，我注意到它使用视图的名称而不是使用默认的“后退”文本，有没有办法强制它使用“后退”？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:10:39.380

来自[http://osmorphis.blogspot.com/2009/03/trapping-uinavigationbar-back-button.html](http://osmorphis.blogspot.com/2009/03/trapping-uinavigationbar-back-button.html)

> 您可以在标准后退按钮上更改的唯一内容是文本。默认情况下，这是控制器的标题。您可以使用如下代码更改它：

```
[self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"New Title" style:UIBarButtonItemStyleBordered target:nil action:nil]; 
```

只需更换

```
initWithTitle:@"New Title" 
```

和

```
initWithTitle:@"Back" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:11:33.927

在提问之前尝试搜索。

似乎您可以将以下代码添加到调用向下钻取的控制器中，即主详细信息中的主控。

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStylePlain target:nil action:nil];
self.navigationItem.backBarButtonItem = backButton;
[backButton release]; 
```

归功于 iPhoneGuy：[iPhone Dev SDK](http://www.iphonedevsdk.com/forum/iphone-sdk-development/2033-how-change-nav-bar-back-button-title.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:19:41.220

当您显示 时`UINavigationController`，大概在应用程序的委托中，使应用程序的委托也成为导航控制器的委托。然后观察视图控制器被弹出和推送：

**应用控制器.h**

```
#import <UIKit/UIKit.h>

@interface AppController.h : NSObject 
<UIApplicationDelegate, UINavigationControllerDelegate> 
{
    UIWindow *window;
    UINavigationController *viewController;
}
/* MARK: Interface Outlets */
@property (nonatomic, retain) IBOutlet UIWindow *window;
@property (nonatomic, retain) IBOutlet UINavigationController *viewController;
@end 
```

**应用控制器.h**

```
#import "AppController.h"

@implementation AppController.h
/* MARK: Init and Dealloc */
- (void)dealloc {
    self.window = nil;
    self.viewController = nil;

    [super dealloc];
}

/* MARK: Interface Outlets */
@synthesize window, viewController;

/* MARK: Application Delegate */
- (BOOL)application:(UIApplication *)application 
didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    assert(self.window != nil);
    assert(self.viewController != nil);

    self.viewController.delegate = self;

    /* other initialization */

    [self.window makeKeyAndVisible];

    return YES;
}

/* MRK: Navigation Controller Delegate */
- (void)navigationController:(UINavigationController *)navigationController 
      willShowViewController:(UIViewController *)vc 
                    animated:(BOOL)animated
{
    UIBarButtonItem *myItem = /* initialize */;

    navigationController.topViewController.navigationItem.backBarButtonItem = nil;
    navigationController.topViewController.navigationItem.backBarButtonItem = myItem;
}
@end 
```

此外，您可以通过检查`-[NSObject isKindOfClass:]`所需视图控制器的匹配来忽略自定义视图控制器。

# objective-c - 更改 MPMusicPlayerController 队列而不暂停播放

> ID：10939013
> 
> 赞同：2
> 
> 时间：2012-06-07T20:02:32.077
> 
> 标签：objective-c, ios, mpmusicplayercontroller

是否可以对 MPMusicPlayerController 的队列进行更改，而不会出现 setQueueWithItemCollection 造成的小延迟？我已阅读文档，他们说这是正常行为。但是在我正在开发的应用程序中，对队列的更改可能会非常频繁地应用。目前，我只是对歌曲之间的队列进行更改，以免让用户注意到太多。但这仍然很烦人。

它可以在线程中完成还是聪明的事情？

谢谢

# php - 我可以使用 CodeIgniter 表单验证类来登录用户吗

> ID：10939017
> 
> 赞同：0
> 
> 时间：2012-06-07T20:02:38.363
> 
> 标签：php, security, codeigniter, validation

我知道如何为 codeigniter 编写自定义表单验证，我正在考虑将我的登录验证函数写入表单验证回调函数。我的理论是，使用 codeigniter 表单验证类向用户反馈登录失败是一种简单的方法。

我看不出这有什么问题，当然它会起作用，但是这种方法有什么固有的坏处吗？它会增加我的网络应用登录安全性的潜在弱点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:09:01.690

您当然可以为此目的使用 Codeigniter 的表单验证库。

但是，我建议不要编写自己的身份验证系统并使用现有的，例如`Tank Auth`或`ION Auth`。

# javascript - Rally App SDK 2.0：过滤存储以获取 rallymultiobjectpicker

> ID：10939019
> 
> 赞同：1
> 
> 时间：2012-06-07T20:02:43.430
> 
> 标签：javascript, extjs, rally

我正在尝试使用 rallymultiobjectpicker（不确定为什么没有单个对象选择器）来提取投资组合项目列表。但是，我想按“投资组合项目类型”字段过滤结果。我对修改后的 storeCfg 参数的识别没有运气。任何修改似乎都被忽略了，即使是简单地将“名称”字段的排序从“ASC”更改为“DESC”。

这是一个基本示例：

```
this.pis = Ext.widget('rallymultiobjectpicker', {
    items: [{
        modelType: 'portfolio item'
    }],
    storeCfg: {
        autoLoad: false,
        fetch: "Name, PortfolioItemType",
        pageSize: 200,
        filters: [
            {
                property: 'PortfolioItemType',
                value: 'Initiative'
            }
        ],
        sorters: [
            {
                property: 'Name',
                direction: 'DESC'
            }
        ],
        remoteGroup: false,
        remoteSort: false,
        remoteFilter: false,
        limit: Infinity
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:13:38.617

我会在你写的时候尝试解决你的问题。

多对象选择器的单个对象版本是[组合框](https://rally1.rallydev.com/apps/2.0p/doc/#!/api/Rally.ui.ComboBox)。作为选择任何类型的投资组合项目的旁注，我可能会使用选择[器](https://rally1.rallydev.com/apps/2.0p/doc/#!/api/Rally.ui.dialog.ChooserDialog)组件。选择器和组合框组件运行良好，除非它们中有太多选项。选择器是一种很好的方式，可以让您的用户准确地找到他们正在寻找的对象，而无需为他们提供一百万长的列表来查看。

PortfolioItemType 也是一个对象，而不仅仅是一个字符串值。但是您可以通过它的名称进行查询，如下所示。

```
<!DOCTYPE html>

<script type="text/javascript" src="/apps/2.0p/sdk.js"></script>

<script type="text/javascript">
    Rally.onReady(function() {
        Ext.define('CustomApp', {
            extend: 'Rally.app.App',
            componentCls: 'app',

            launch: function() {

                Ext.create('Rally.ui.dialog.ChooserDialog', {
                    artifactTypes: ['portfolioitem'],
                    autoShow: true,
                    listeners: {
                        artifactChosen: function(selectedRecord) {
                            Ext.Msg.alert('Chooser', selectedRecord.get('Name') + ' was chosen');
                        },
                        scope: this
                    },
                    storeConfig : {
                        filters: [
                            {

                                property: 'PortfolioItemType.Name',
                                value: 'Initiative'
                            }
                        ]
                    }
                });
            }
        });

        Rally.launchApp('CustomApp', {
            name: 'Tacos'
        });
    });
</script> 
```

这是一个多对象选择器

```
<!DOCTYPE html>

<script type="text/javascript" src="https://rally1.rallydev.com/apps/2.0p/sdk.js"></script>

<script type="text/javascript">
    Rally.onReady(function() {
        Ext.define('CustomApp', {
            extend: 'Rally.app.App',
            componentCls: 'app',

            launch: function() {
                this.add({
                    xtype: 'rallymultiobjectpicker',
                    modelType: 'portfolioitem',
                    storeConfig : {
                        filters: [
                            {

                                property: 'PortfolioItemType.Name',
                                value: 'Initiative'
                            }
                        ]
                    },
                    listeners:{
                        collapse:function(picker){
                            console.log(picker.getValue());
                        }
                    }
                });
            }
        });

        Rally.launchApp('CustomApp', {
            name: 'Tacos'
        });
    });
</script> 
```

# xtk - X.file api 不存在

> ID：10939024
> 
> 赞同：0
> 
> 时间：2012-06-07T20:03:08.203
> 
> 标签：xtk

指向它的 api 链接已失效。不确定它的计划，但最好有一个文件对象来保存加载的文件，这样就不必在每次需要时都加载图像和颜色表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:05:30.283

API 回来了： http: [//api.goxtk.com/renderer3D.html](http://api.goxtk.com/renderer3D.html)

X.file 对象是私有的。对所有数据流进行排序是没有意义的，因为它会浪费内存。解析是一项耗时的任务，加载量不大，因此不会有任何收获。

# sql - 如何使用动态 SQL 生成列组？

> ID：10939026
> 
> 赞同：3
> 
> 时间：2012-06-07T20:03:16.193
> 
> 标签：sql, sql-server, tsql, pivot

人们喜欢得到不同种类和数量的水果，我想帮助他们。我有一个看起来像这样的表：

```
name    fruit   count   temp
-----------------------------
Jim     apple    3      hot
Jim     banana   7      cold
Jim     orange   12     cold
Sam     plum     5      hot
Sam     peach    1      hot
Bob     cherry   4      cold
Bob     banana   11     hot
Bob     orange   9      cold
Bob     kiwi     6      hot 
```

每个人可能有 1 或 1000 行，我不知道提前多少行，所以我认为这需要动态列列表。我需要它看起来像这样：

```
name    fruit_1 count_1 temp_1  fruit_2 count_2 temp_2  fruit_3 count_3 temp_3  fruit_4 count_4 temp_4
-------------------------------------------------------------------------------------------------------
Jim     apple     3      hot    banana    7      cold   orange    12     cold   null     null   null
Sam     plum      5      hot    peach     1      hot    null     null    null   null     null   null
Bob     cherry    4      cold   banana    11     hot    orange     9     cold   kiwi      6     hot 
```

当您不知道会有多少行时[，sql 2005 中 PIVOT](https://stackoverflow.com/questions/198716/pivot-in-sql-2005#199763)的代码适用于解析一列，但我无法让它适用于多列。我尝试创建额外的`@select_list`变量，我可以使用它来创建列，但是我无法在其中获取我想要的数据，而且我不知道如何像我想要的那样交织顺序（例如 f1、c1、t1、 f2,c2,t2 与 f1,f2,c1,c2,t1,t2 等）

这是我一直未能成功调整的代码：

```
CREATE TABLE #stackoverflowTest(
    [name] [varchar](3) NOT NULL,
    [fruit] [varchar](12) NOT NULL,
    [number] [int] NOT NULL,
    [temp] [varchar](4) NOT NULL)

INSERT INTO #stackoverflowTest
VALUES ('Jim','apple',3,'hot'),
    ('Jim','banana',7,'cold'),
    ('Jim','orange',12,'cold'),
    ('Sam','plum',5,'hot'),
    ('Sam','peach',1,'hot'),
    ('Bob','cherry',4,'cold'),
    ('Bob','banana',11,'hot'),
    ('Bob','orange',9,'cold'),
    ('Bob','kiwi',6,'hot')

DECLARE @sql AS varchar(max)
DECLARE @pivot_list AS varchar(max)
DECLARE @select_list AS varchar(max) 

SELECT @pivot_list = COALESCE(@pivot_list + ', ', '') + '[' + CONVERT(varchar, PIVOT_CODE) + ']'
    ,@select_list = COALESCE(@select_list + ', ', '') + '[' + CONVERT(varchar, PIVOT_CODE) + '] AS [fruit_' + CONVERT(varchar, PIVOT_CODE) + ']'
FROM (
    SELECT DISTINCT PIVOT_CODE
    FROM (
        SELECT name, fruit, number, temp, ROW_NUMBER() OVER (PARTITION BY name ORDER BY name,number) AS PIVOT_CODE
        FROM #stackoverflowTest
    ) AS rows
) AS PIVOT_CODES

SET @sql = '
;WITH p AS (
    SELECT name, fruit, number, temp, ROW_NUMBER() OVER (PARTITION BY name ORDER BY name,number) AS PIVOT_CODE
    FROM #stackoverflowTest
)
SELECT name, ' + @select_list + '
FROM p
PIVOT (
    MIN(fruit)
    FOR PIVOT_CODE IN (
        ' + @pivot_list + '
    )
) AS pvt
'
EXEC (@sql) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T20:19:02.533

我不会真的尝试为此使用 PIVOT，它很快就会陷入混乱状态。

这可能更简单：

```
DECLARE @sql AS varchar(max)
DECLARE @select_list AS varchar(MAX) 

SELECT @select_list = ISNULL(@select_list + ', ', '') + 'SUM(CASE WHEN PIVOT_CODE = ' + [PIVOT_CODE] + ' THEN number ELSE NULL END) AS number_' + [PIVOT_CODE] + ', MIN(CASE WHEN PIVOT_CODE = ' + [PIVOT_CODE] + ' THEN temp ELSE NULL END) AS temp_' + [PIVOT_CODE] + ', MIN(CASE WHEN PIVOT_CODE = ' + [PIVOT_CODE] + ' THEN fruit ELSE NULL END) AS fruit_' + [PIVOT_CODE]
FROM (
    SELECT DISTINCT PIVOT_CODE
    FROM (
        SELECT name, fruit, number, temp, CONVERT(varchar(20), ROW_NUMBER() OVER (PARTITION BY name ORDER BY NAME,number)) AS PIVOT_CODE
        FROM #stackoverflowTest
    ) AS rows
) AS PIVOT_CODES

SET @sql = '
;WITH p AS (
    SELECT name, fruit, number, temp, ROW_NUMBER() OVER (PARTITION BY name ORDER BY name,number) AS PIVOT_CODE
    FROM #stackoverflowTest
)
SELECT name, ' + @select_list + '
FROM p GROUP BY name'
EXEC (@sql) 
```

# php - 在 OpenCart 中创建和加载模块？

> ID：10939029
> 
> 赞同：2
> 
> 时间：2012-06-07T20:03:26.800
> 
> 标签：php, opencart

我想在目录/模型目录的新文件夹中添加一个模型 php 文件。

```
<?php
class ModeloPaginacion extends Model{
    public function contarGarages(){
        $query = $this->db->query ("SELECT COUNT(*)AS total FROM  `" . DB_PREFIX . "vendors`");
        return $query->row['total'];
        //return "29";
    }//fin funcion

}//fin class

?> 
```

当我想在 home.php 控制器中加载这个模型时，整个项目似乎坏了，因为它没有在浏览器上显示任何内容。家庭控制器中的负载会产生错误。当我评论确实行时，项目工作得很好。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:51:02.107

上面有几个问题。首先，你没有正确命名你的模型，所以它永远不会工作。所以让我们假设这将在一个`catalog/model/tool/`名为的文件夹中`paginacion.php`

您首先将模型定义为

```
class ModelToolPaginacion extends Model { 
```

然后在你的控制器中调用它，你首先需要加载它然后调用它

```
$this->load->model('tool/paginacion');
$this->model_tool_paginacion->contarGarages(); 
```

哪个应该适合你。注意所有链接的命名约定（工具和分页）

# google-apps-script - 如何删除多页文档中的空白页？

> ID：10939031
> 
> 赞同：1
> 
> 时间：2012-06-07T20:03:34.317
> 
> 标签：google-apps-script

编辑：添加了一个答案，因为编辑会很长（见答案2）

在[之前关于文档合并的帖子](https://stackoverflow.com/questions/10692669/how-can-i-generate-a-multipage-text-document-from-a-single-page-template-in-goog)之后，我最终得到了一个工作脚本（谢谢 Henrique ;）但我仍然有一个小问题：最终的“合并”文档有时包含我想删除的空白页面（取决于其他文档内容） . 我找不到一个简单的方法来做到这一点。脚本是这样的：

```
function mergeDocs(docIDs) {  // parameter docIDs is an array of Doc IDs
  var baseDocname = DocumentApp.openById(docIDs[0]).getName();// typical name = IMPRESSION_page_07_07-06-2012__20:57
  var modelDoc = DocsList.getFileById(docIDs[0]);
  var newmodelName=baseDocname.substr(0,11)+'multipage'+baseDocname.substring(18);
  var baseDocId = DocsList.copy(modelDoc,newmodelName).getId();// make a copy of firstelement and give it new basedocname build from the serie(to keep margins etc...)
  var baseDoc = DocumentApp.openById(baseDocId)
  var body = baseDoc.getActiveSection();
//
  for( var i = 0; i < docIDs.length; ++i ) {
    var otherCopy = DocumentApp.openById(docIDs[i]).getActiveSection();
    var totalElements = otherCopy.getNumChildren();
    for( var j = 0; j < totalElements; ++j ) {
      var element = otherCopy.getChild(j).copy();
      var type = element.getType();
      if( type == DocumentApp.ElementType.PARAGRAPH )
        body.appendParagraph(element);
      else if( type == DocumentApp.ElementType.TABLE )
        body.appendTable(element);
      else if( type == DocumentApp.ElementType.LIST_ITEM )
        body.appendListItem(element);
      else
        throw new Error("According to the doc this type couldn't appear in the body: "+type);
    }
     body.appendPageBreak(); // if content length is too short avoids breaking page layout
  }
} 
```

“PageBreak”（有时）会导致空白页，我知道（！），但有必要保持完美的页面布局（我正在使用此文档打印标签）。这是[一个典型示例的链接](https://docs.google.com/document/d/10IAGM4ExGI3xOAJlxj6-Luc5aWGd6fIaprGkvyCiVHI/edit)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:57:27.277

好吧，Serge，我认为 API 上没有任何东西可以告诉元素属于哪个页面。所以，解决这个问题会很棘手:)

在蝙蝠的右边，我想到了一种“内部”的方法。我的意思是，你知道哪个页面给你带来了麻烦。如果它总是相同的（例如，您有固定数量的标签），您可以循环计算分页符并删除坏的分页符。

但如果那不可能，这是我的猜测，至少你知道你的布局。您可以测试看看有多少标签完全适合一个页面，然后计算您的标签，这样当它发生时，您就可以跳过附加分页符。这看起来是一个更好的解决方案。

再说一次，根据您的布局，这可能是不可能的或太难了。所以，我能想到的最后一件事是检查文档 DOM，看看当页面上单独出现分页符时是否发生任何特定模式。既然这有点奇怪，我猜谷歌文档可能会自动在这个页面上插入一个空段落，所以它不是“无子”，或者类似的东西，甚至可能是一个属性，我不知道。我所知道的是，这将需要大量的努力，进行调查以深入了解 Document DOM 的工作原理。如果你不这样做，我将来可能不得不这样做，因为我经常将文档作为模板使用。当我这样做时，我会更新我的答案，如果你在我之前没有这样做:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T17:12:29.110

我修改了脚本，让它给我恒定的结果，并编写了一个分析函数来获取文档的结构。我发现将所有这些都放在答案中而不是编辑我的第一个问题可能是一个更好的主意，因为它有点长。1°简化脚本：

```
function mergeDocs(docIDs) {
  var baseDocname = DocumentApp.openById(docIDs[0]).getName();// typical name = IMPRESSION_page_07_07-06-2012__20:57
  var modelDoc = DocsList.getFileById(docIDs[0]);
  var newmodelName=baseDocname.substr(0,11)+'multipage'+baseDocname.substring(18);
  var baseDocId = DocsList.copy(modelDoc,newmodelName).getId();// make a copy of firstelement and give it new basedocname build from the serie(to keep margins etc...)
  var baseDoc = DocumentApp.openById(baseDocId)
  var body = baseDoc.getActiveSection();
  var headpara='  *  '
  for (dd=1;dd<baseDoc.getNumChildren();++dd){
  baseDoc.removeChild(baseDoc.getChild(dd))
  }
  for( var i = 0; i < docIDs.length; ++i ) {
    var otherCopy = DocumentApp.openById(docIDs[i]).getActiveSection();
    var totalElements = otherCopy.getNumChildren();

    for( var j = 0; j < totalElements; ++j ) {
      var element = otherCopy.getChild(j).copy();
      var type = element.getType();
      if( type == DocumentApp.ElementType.PARAGRAPH ){
        }
      else if( type == DocumentApp.ElementType.TABLE){
        body.appendTable(element);
          if (i<docIDs.length-1){
              body.appendPageBreak();
              body.appendParagraph(headpara);// add a string '  *  ' to trace it
              }
        }
    }
  }
} 
```

2°分析功能：

```
function analyse() {
  var Doc = DocumentApp.openById('1UOr44ju8Li6yCSlmFbMRdimNpR2BjCGjcLkrwG9jW74');
    var totalElements = Doc.getNumChildren();
    var el=[]
    for( var j = 0; j < totalElements; ++j ) {
      var element = Doc.getChild(j);
      var type = element.getType();
Logger.log(j+" : "+type)
       if (type =='PARAGRAPH'){
       el[j]=element.getText()
       };
    }
Logger.log(el)    
} 
```

最后是这个分析的结果：

```
0 : PARAGRAPH
1 : PARAGRAPH
2 : TABLE
3 : PARAGRAPH
4 : PARAGRAPH
5 : PARAGRAPH
6 : TABLE
7 : PARAGRAPH
8 : PARAGRAPH
9 : PARAGRAPH
10 : TABLE
11 : PARAGRAPH
12 : PARAGRAPH
13 : PARAGRAPH
14 : TABLE
15 : PARAGRAPH
[, , NOT_FOUND, , ,   *  , NOT_FOUND, , ,   *  , NOT_FOUND, , ,   *  , NOT_FOUND, ] 
```

（“ * ”是脚本添加的段落，“NOT_FOUND”是表格）所以，现在我知道分页符显示为段落，文档自己在表格之间创建段落（这会导致空白页），但即使当我尝试使用 element.removeFromParent() 删除不需要的段落时，我一直有这些空白页......我现在有点迷路了 ;-) 抱歉这么久。

# java - 如何在运行时创建指定类类型的对象？

> ID：10939035
> 
> 赞同：1
> 
> 时间：2012-06-07T20:03:57.693
> 
> 标签：java

假设我有这样的方法

```
 public void readAndInitialize(StringReader reader, Class className)
  {
    // Here, I want to to something like this - 

   // obj = new (object of the specified className)

      obj.readAndInitialize(reader);
  } 
```

如何在 Java 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T20:09:54.860

虽然每个人都很快指出了`Class.forName("com.myorg.MyClass");`相关`newInstance()`方法，但重要的是要记住它只会调用不带参数的默认构造函数。

如果发现需要调用该类的特定构造函数，则需要使用反射找到正确的构造函数，然后调用它。

```
import java.lang.reflect.Constructor;
import java.lang.reflect.Type;
import static java.lang.System.out;

public class ConstructorSift {
    public static void main(String... args) {
    try {
        Class<?> cArg = Class.forName(args[1]);

        Class<?> c = Class.forName(args[0]);
        Constructor[] allConstructors = c.getDeclaredConstructors();
        for (Constructor ctor : allConstructors) {
        Class<?>[] pType  = ctor.getParameterTypes();
        for (int i = 0; i < pType.length; i++) {
            if (pType[i].equals(cArg)) {
            out.format("%s%n", ctor.toGenericString());

            Type[] gpType = ctor.getGenericParameterTypes();
            for (int j = 0; j < gpType.length; j++) {
                char ch = (pType[j].equals(cArg) ? '*' : ' ');
                out.format("%7c%s[%d]: %s%n", ch,
                       "GenericParameterType", j, gpType[j]);
            }
            break;
            }
        }
        }

        // production code should handle this exception more gracefully
    } catch (ClassNotFoundException x) {
        x.printStackTrace();
    }
    }
} 
```

列出了所有的构造函数，[这里有一个教程](http://docs.oracle.com/javase/tutorial/reflect/member/ctorLocation.html)。

找到所需的构造函数后，可以像这样调用它

```
import java.lang.reflect.Constructor;
import java.lang.reflect.Field;
import java.lang.reflect.InvocationTargetException;
import java.util.HashMap;
import java.util.Map;
import java.util.Set;
import static java.lang.System.out;

class EmailAliases {
    private Set<String> aliases;
    private EmailAliases(HashMap<String, String> h) {
    aliases = h.keySet();
    }

    public void printKeys() {
    out.format("Mail keys:%n");
    for (String k : aliases)
        out.format("  %s%n", k);
    }
}

public class RestoreAliases {

    private static Map<String, String> defaultAliases = new HashMap<String, String>();
    static {
    defaultAliases.put("Duke", "duke@i-love-java");
    defaultAliases.put("Fang", "fang@evil-jealous-twin");
    }

    public static void main(String... args) {
    try {
        Constructor ctor = EmailAliases.class.getDeclaredConstructor(HashMap.class);
        ctor.setAccessible(true);
        EmailAliases email = (EmailAliases)ctor.newInstance(defaultAliases);
        email.printKeys();

        // production code should handle these exceptions more gracefully
    } catch (InstantiationException x) {
        x.printStackTrace();
    } catch (IllegalAccessException x) {
        x.printStackTrace();
    } catch (InvocationTargetException x) {
        x.printStackTrace();
    } catch (NoSuchMethodException x) {
        x.printStackTrace();
    }
    }
} 
```

同样，[来自关于反射的教程](http://docs.oracle.com/javase/tutorial/reflect/member/ctorInstance.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T20:06:16.260

请注意，在您的示例中，您将 className 作为`Class`对象传递，因此您可以这样做：

```
className.newInstance(); 
```

但我怀疑您正在寻找一种将类名作为 a 传递的方法`String`，在这种情况下，过程是（这里`className`是 a `String`）：

```
Class class = Class.forName(className());
Object obj = class.newInstance(); 
```

请注意，您还需要处理`Exceptions`两个调用引发的问题。

这是最简单的情况，不包括，例如特定的构造函数。

请参阅Class[的文档](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T20:06:18.303

```
public void readAndInitialize(StringReader reader, String className)  //className changed to String
  {
    // Here, I want to to something like this - 
   // obj = new (object of the specified className)

      //try this:
      Class myclass = Class.forName(className);
      Object obj = myclass.newInstance();

      obj.readAndInitialize(reader);
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T20:08:12.843

如果我正确理解了这个问题。应该像这样创建给定类的对象：

```
if (yourClass != null) {
    Object yourObject = null;
    try {
        yourObject = yourClass.newInstance();
    } catch (InstantiationException e) {
        LOGGER.error("", e);            
    } catch (IllegalAccessException e) {
        LOGGER.error("", e);

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T20:09:36.487

您可以使用 Class.newInstance()（仅适用于零参数构造函数）或 Constructor.newInstance() 来做您想做的事。有关工作示例，请参见[此处。](http://docs.oracle.com/javase/tutorial/reflect/member/ctorInstance.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T20:37:09.143

取决于您是否已经获得了一个对象或只是一个带有类名的字符串，我会执行以下操作：

1.  像上面描述的那样，使用反射，用你的类名字符串实例化对象；如果你已经得到一个对象，你可以跳过这一步
2.  确保您的对象继承自通过 instanceof 提供公共方法 readAndAnalyze(...) 的类或接口
3.  通过 instanceof 将您的对象投射到您在上面一步检查的类
4.  调用方法并继续

# ruby - emacs中的Ruby模式：运行irb时如何选择运行哪个版本的ruby？

> ID：10939036
> 
> 赞同：3
> 
> 时间：2012-06-07T20:03:59.253
> 
> 标签：ruby, emacs

我安装了几个版本的 ruby​​，当我在 emacs 上运行“run-ruby”时，它会启动与 ruby​​ 1.8.7 关联的 irb，而我想使用 ruby​​ 1.9.3 中的 irb。有人知道如何配置吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T00:23:17.627

另请查看[rvm.el](https://github.com/senny/rvm.el)。如果您正在切换，即使只是一次，安装[Ruby 版本管理器](https://rvm.io//)(rvm) 并且切换很容易，而且在 emacs 中也同样容易。

一石两鸟。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T20:35:39.113

如果您正在使用`inf-ruby.el`，则需要将`ruby-program-name`变量更改为相应的程序。默认值为`irb --inf-ruby-mode`，我认为您还需要指定`--inf-ruby-mode`命令行选项。

# android - 裁剪、缩放和居中位图

> ID：10939040
> 
> 赞同：0
> 
> 时间：2012-06-07T20:04:28.923
> 
> 标签：android, image, crop

我在纵向模式的文件中有一张图片，我想用作壁纸。到目前为止这很容易。但图片的比例与我的设备屏幕不同。所以屏幕底部有一个空白部分。我对图形工作真的很糟糕。如何缩放位图以适合我的屏幕？只要看到的部分居中，我是否丢失信息都没关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:06:03.870

首先，您将图像放入`Bitmap`具有[公共静态位图 decodeResource (Resources res, int id)](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeResource%28android.content.res.Resources,%20int%29)的图像中（如果图像是应用程序资源，则可以使用[公共静态位图 decodeFile (String pathName)](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeFile%28java.lang.String%29)来读取文件）

然后将该位图作为参数传递给下一个方法，其中包含要从中裁剪的矩形，`Bitmap`结果您将获得一个裁剪的位图：

[public static Bitmap createBitmap（位图源，int x，int y，int width，int height）](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28android.graphics.Bitmap,%20int,%20int,%20int,%20int%29)

```
Bitmap bmp = BitmapFactory.decodeResource( getResources() , R.drawable.your_image );
Bitmap croppedBmp = Bitmap.createBitmap(bmp, 100, 100, 400, 800); 
```

这是你需要的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:11:47.607

这听起来像是 9patch 工具的工作

[http://developer.android.com/guide/developing/tools/draw9patch.html](http://developer.android.com/guide/developing/tools/draw9patch.html)

您可以使用此工具设置要拉伸的区域以及保持相同的区域。

# android - 需要为 imageview 调整图像大小

> ID：10939041
> 
> 赞同：1
> 
> 时间：2012-06-07T20:04:37.630
> 
> 标签：android, image, imageview, bitmapfactory

我有一个 8 mp 的图像，但它无法在 ImageView 上显示，因为它的文件太大。如何使用 BitmapFactory 重新调整它的大小，然后将此新图像作为 XML 中 ImageView 的源传递？

我的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/select"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Select" />

    <Button
        android:id="@+id/info"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Info" />

</LinearLayout>

<ImageView
    android:id="@+id/test_image_view"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

我的活动：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ImageView view;

    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inSampleSize=8; //also tried 32, 64, 16
    Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher, options);
    Drawable d = new BitmapDrawable(bmp);

    view = (ImageView) findViewById(R.id.test_image_view);
    view.setImageDrawable(d);

    setContentView(R.layout.main);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T20:17:10.877

**You can't pass it into XML**

For what? Load it, when you need it. In your case it's better to use BitmapFactory.Options:

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize=16; //image will be 16x smaller than an original. Note, that it's better for perfomanse to use powers of 2 (2,4,8,16,32..).
Bitmap bmp=BitmapFactory.decodeSomething(..., options) //use any decode method instead of this
Drawable d=new BitmapDrawable(bmp); 
```

and then just set it to your `ImageView`

```
ImageView iv; //initialize it first, of course. For example, using findViewById.
iv.setImageDrawable(d); 
```

Note, that you should recycle your bitmap, after you used it (after ImageView is not visible anymore):

```
bmp.recycle(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T20:08:50.183

我不相信您可以以编程方式调整图像大小，然后在 XML 中使用它。XML 文件中的所有内容几乎都是静态的，并且在编译时读取，因此没有回头路。您将使用 BitmapFactory，然后在 java 中设置图像。

# css - CSS 对齐表格内的表格

> ID：10939046
> 
> 赞同：0
> 
> 时间：2012-06-07T20:05:02.463
> 
> 标签：css, css-tables

我有一张桌子，里面有四个其他桌子。我希望内部四个表格与它们所在的单元格的左上角对齐，但我希望内部表格的单元格中的数据在其单元格的中心对齐。当我将属性移到 CSS 中时，一切都出错了。我可能看得太明显了。

此外，我所有的行线和列线都消失了。

基本上我只需要正确的 CSS 来完成此操作并恢复行和列行。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:29:00.930

假设日期实际上是表格的，并且根据您提供的少量信息，您大概打算这样做吗？

[jsfiddle.net/qgSAJ/8/](http://jsfiddle.net/qgSAJ/8/)

如果数据不是表格的，Patrick James McDougle divs 无疑是要走的路

# facebook - 为什么我无法通过 Facebook/Graph API 查看朋友的相册？

> ID：10939051
> 
> 赞同：2
> 
> 时间：2012-06-07T20:05:18.267
> 
> 标签：facebook, facebook-graph-api

1.  我请求了一个具有**user_photos**和**friend_photos**权限的访问令牌
2.  我做了`graph.facebook.com/[friend's id]/albums?access_token=[access token]`
3.  对于我的一些朋友，我得到了结果，而对于其他朋友，我得到了一个空`JSON`数据`set { "data": [ ] }`

如果我使用 Facebook 为我生成的访问令牌做*同样的事情*`developers.facebook.com/docs/reference/api/`，以便与他们在 Core Concepts > Graph API 页面上的示例一起使用。
我可以毫无问题地访问我朋友的所有相册。所以显然令牌和权限是问题所在。

那么我做错了什么？该文档似乎表明 friends_photos 应该是一个足够的权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:09:14.590

每个用户都可以在他们的隐私设置中说明，如果他们的朋友向应用程序授予好友权限，他们想与应用程序共享什么样的信息。

因此，如果某个用户说，“不要让应用程序访问我的相册/照片/任何东西，只是因为朋友认为我可能愿意分享它们”——那么你当然不会得到那个人的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T06:36:20.130

CBroe 似乎是正确的。

由于我找不到它，可以通过转到隐私设置 > 应用程序、游戏和网站 > 人们如何将您的信息带到他们使用的应用程序 > 取消检查我的照片来找到从应用程序中排除所有用户照片和相册的设置.

这是一个屏幕截图：

![在此处输入图像描述](../Images/6aa9c5475d1d699e2923ac122e1f0834.png)

# jquery-ui - 为什么 jQuery UI 对话框在 IE8 中打开 2 个模式？

> ID：10939055
> 
> 赞同：0
> 
> 时间：2012-06-07T20:05:33.200
> 
> 标签：jquery-ui, internet-explorer-8, jquery-ui-dialog

每当单击特定按钮时，我都会运行 jQuery.post()：

```
function createNewImage () {
    jQuery.post("create/new/image.php", {some:params}, function (data) {
        loadImageSelector(data);
    }, "json");
} 
```

当`create/new/image.php`成功运行并且服务器准备好接受图像并将其附加到新创建的数据库行时，我们打开这个 jQuery UI 对话框模式：

```
function loadImageSelector(data) {
    jQuery('<iframe src="script.php?id=' + data.param + '" /></iframe>').dialog({
        modal: true,
        width: 500,
        height: 400,
        resizable: false,
        title: "Upload an Image"
    });
} 
```

问题是在 IE8 上我看到 2 个对话框弹出。1 包含完整内容`script.php`并且看起来正确，但在此之上是另一个对话框，它只有一个标题（“上传图像”）和一个关闭按钮 - 没有内容（iframe）。此行为在 IE9/Chrome/Firefox 中不会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:02:04.540

这有点意思。上面的代码正在关闭 2 个 iframe，而 IE8 以某种方式做出反应并创建了 2 个模式。

第一个标签通过自身关闭，`/>`但随后包含另一个`</iframe>`标签。这是偶然的，但我发现它的反应如此有趣。

无论如何，确保标记存在，因为它应该 ( `<iframe ...></iframe>`) 解决了问题。

# ruby-on-rails - Rails 协会将 form_for 放在一个块中

> ID：10939057
> 
> 赞同：0
> 
> 时间：2012-06-07T20:05:47.727
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我想要做的是能够添加注释并将它们与 Rails 中的客户端相关联。

我的客户端模型如下所示：

```
class Client < ActiveRecord::Base
  attr_accessible :company_name, :contact_name, :email_address, :phone_number,
                                :street_address, :city, :state, :zip

  has_many :notes, dependent: :destroy

end 
```

我的笔记模型如下所示：

```
class Note < ActiveRecord::Base
  attr_accessible :content
  belongs_to :client
  default_scope order: 'notes.created_at DESC'

  validates :client_id, presence: true
end 
```

我的客户的 index.html.erb 如下所示：

```
<% @clients.each do |client| %>
   .
   .
   .
   <%= form_for(@notes) do |f| %>
                        <%= f.text_area :content, placeholder: "Compose new note..." %>
                        <%= f.submit "Add Note", class: "buttonPri addnote" %> 
                    <% end %>
<% end %> 
```

在我的客户控制器中，我有：

```
def index
    if signed_in?
        @clients = Client.all
  @note = client.notes.build
    else
        redirect_to signin_path
      end
end 
```

在我的笔记控制器中：

```
def create
    @note = client.notes.build(params[:note])
    if @note.save
      flash[:success] = "Note Created"
      redirect_to root_path
        else
      render 'static_pages/home'
      end
    end 
```

`undefined local variable or method client for #<ClientsController:0x007f835191ed18>`加载客户端索引页面时出现错误。我认为正在发生的是控制器看不到块变量`client`，我需要将其移出控制器并进入 form_for。这是正确的方法吗？我该怎么做？

我正在查看 rails API 并发现了这一点：

```
<%= form_for([@document, @comment]) do |f| %>
 ...
<% end %>
Where @document = Document.find(params[:id]) and @comment = Comment.new. 
```

这是我需要进入的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:14:29.410

问题是您`client`在控制器中指的是，但这没有定义。

根据您的示例：

```
def create
  @note = client.notes.build(params[:note])
  if @note.save
    flash[:success] = "Note Created"
    redirect_to root_path
  else
    render 'static_pages/home'
  end
end 
```

`client`应该从哪里来？通常它是由父控制器类在`before_filter`调用中加载的，通常看起来像：

```
before_filter :load_client

def load_client
  @client = Client.find_by_id!(params[:client_id])
end 
```

可能是您`client`定义了一个正在返回的方法，`nil`因为它找不到某些东西。在这种情况下，您应该追踪它并查看问题所在。这就是使用`find!`which 抛出异常而不是悄悄失败通常是更好的方法的地方。

当您看到与调用方法有关`nil`的错误时，表明某些内容没有正确加载，因此您应该追踪丢失的对象。

# java - Java 采样率转换

> ID：10939059
> 
> 赞同：3
> 
> 时间：2012-06-07T20:06:00.980
> 
> 标签：java, audio, wav

在我的 Java 代码中，我想将 44100 Hz 的 WAV 文件转换为 8000 Hz 的 WAV 文件。我知道我必须先进行低通滤波，然后再抽取（+插值）（DSP 理论），但我不想从头开始实现它。

我正在寻找一个可以有效地做到这一点的图书馆。你知道任何？

我可以将 wav 文件读入缓冲区，也可以将 wav 文件从缓冲区写入文件，如果这样可以更容易的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:03:21.343

你应该看看[FMJ](http://fmj-sf.net/index.php)。它[为 ffmpeg 提供了一个包装器](http://fmj-sf.net/ffmpeg-java/getting_started.php)，可以非常有效地处理各种转换工作（包括音频重采样）。

# java - 尝试捕捉错误

> ID：10939060
> 
> 赞同：1
> 
> 时间：2012-06-07T20:06:06.593
> 
> 标签：java, jdbc, try-catch

```
public class ConnectionManager {
    private static String url = "jdbc:mysql://localhost:3306/prototypeeop";    
    private static String driverName = "com.mysql.jdbc.Driver";   
    private static String usernsme = "root";   
    private static String pasword = "triala";
    private static Connection con;
    private static String url;

    public static Connection getConnection() {
        try {
            Class.forName(driverName);
            try {
                con = DriverManager.getConnection(url, username, password);
            } catch (SQLException ex) {
                // log an exception. fro example:
                System.out.println("Failed to create the database connection."); 
            }
        } catch (ClassNotFoundException ex) {
            // log an exception. for example:
            System.out.println("Driver not found."); 
        }
        return con;
    }
} 
```

嘿，我正在做这个类，我得到一个“classnotfound 异常永远不会在相应的 try 语句的主体中引发”？这与我的 try 和 catch 块有关，我想知道问题出在哪里。对于 try 错误，它说“必须在抛出未报告的异常 java.lang.classnotfound excpetion 之前捕获或声明它”。

对于明显的问题，我深表歉意，但我也是尝试捕捉障碍的新手。我知道这与我没有声明此类错误有关，因为 SQLException 已在 java.sql 包中声明；因此，为什么我没有收到错误。（我在代码中包含“import java.sql package”，因为我使用的是 JDBC 连接类）。该类基本上建立了一个连接并返回该连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:10:35.057

你的文字很难理解......如果我正确理解你的问题，这可能是答案：

您必须捕获 SQLException，因为 DriverManager.getConnection 声明它可能会引发此异常。ClassNotFoundException 可能由 Class.forName 抛出，因此您也必须捕获它。但是，您可以使用一个带有两个 catch 子句而不是两个的 try 块。

我想最好的办法是你能重新解释这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:17:04.733

It will throw a ClassNotFoundException exception. Just create a new .java file and see. I have tried it.Copy the below code into a new java file.

```
import java.sql.DriverManager;
import java.sql.SQLException;

import com.mysql.jdbc.Connection;

public class ConnectionManager {
    private static String url = "jdbc:mysql://localhost:3306/prototypeeop";
    private static String driverName = "com.mysql.jdbc.Driver";
    private static String usernsme = "root";
    private static String pasword = "triala";
    private static Connection con;

    public static Connection getConnection() {
        try {
            Class.forName(driverName);
            try {
                con = (Connection) DriverManager.getConnection("", "", "");
            } catch (SQLException ex) {
                // log an exception. fro example:
                System.out.println("Failed to create the database connection.");
            }
        } catch (ClassNotFoundException ex) {
            // log an exception. for example:
            System.out.println("Driver not found.");
        }
        return con;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:20:46.637

如果此代码直接来自您的编辑器，则您需要修复此问题

您声明`usernsme`并`pasword`

```
private static String usernsme = "root";
private static String pasword = "triala"; 
```

但使用`username`和`password`

```
con = DriverManager.getConnection(url, username, password); 
```

也许将第一行更改为

```
private static String username = "root";
private static String password = "triala"; 
```

这个问题也会消失。

如果此代码不是来自您的编辑器，那么如果您需要帮助，您可能应该向我们提供真实代码。

# android - Admob 背景颜色

> ID：10939067
> 
> 赞同：2
> 
> 时间：2012-06-07T20:06:25.910
> 
> 标签：android, android-layout, admob

我已经阅读了有关 Admob 的背景颜色的其他问答，并同意那里的答案。单独来看，即使是“标准”广告看起来也很奇怪，我无法让它们看起来像我想要的那样。

这是我的布局部分：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads"
[..]
    <com.google.ads.AdView
        android:id="@+id/adViewMain"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#6D0504"
        ads:background="#6D0504"
        ads:adSize="BANNER"
        ads:adUnitId="a…xxxxx"
        ads:loadAdOnCreate="false" />
[..] 
```

在活动的 OnCreate 部分：

```
 AdView adview = (AdView)findViewById(R.id.adViewMain);
    AdMobAdapterExtras extras = new AdMobAdapterExtras()
    .addExtra("color_bg", "6D0504")
    .addExtra("color_bg_top", "6D0504")
    .addExtra("color_border", "6D0504")
    .addExtra("color_link", "000080")
    .addExtra("color_text", "808080")
    .addExtra("color_url", "008000");

    AdRequest adreq = new AdRequest();
    adreq.setNetworkExtras(extras);
    adview.setBackgroundColor(Color.parseColor("#6D0504"));
    adview.loadAd(adreq); 
```

虽然我用满载的大炮拍摄（尽可能设置背景颜色并尽量避免边框），但我似乎不可能在任何显示的广告上实现颜色的任何变化。

为了至少实现 /something/，我去了 AdMob 配置面板并尝试从那里强制设置颜色，但它只允许设置背景颜色并强制我使用丑陋的边框和看起来什么都没有的“光泽”效果但在渐变背景上很奇怪！

即使尝试直接在管理面板中设置颜色的“蛮力”尝试，有时根据我的设置显示“某种”方式的广告仍然会以标准的黑色背景和蓝色边框显示原因。

我错过了什么，还是功能真的那么错误或不一致？只是好奇我是否可以解决这个问题或必须等待更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T23:03:51.180

您通过 正确设置了颜色参数`AdmobAdapterExtras`，但这些参数目前仅适用于 AdMob 文字广告，不适用于 AdSense 补余文字广告。目前没有办法改变这些广告的颜色。

要验证 AdMob 文字广告颜色是否有效，您可以创建自己的 AdMob 文字自家广告，并验证是否使用了这些背景颜色。

# android - Adobe Air Mobile（iOS、Android）和来电

> ID：10939071
> 
> 赞同：1
> 
> 时间：2012-06-07T20:06:34.740
> 
> 标签：android, ios, air, phone-call

我正在考虑在我的 Air 应用程序中处理音频中断（来电、日历或时钟事件）。目标操作系统是 iOS 和 Android。

我已经有一个在发生此类事件时暂停和恢复我的应用程序的工作实现，源自 Apple 处理此类中断的指南（[链接](https://developer.apple.com/library/ios/#DOCUMENTATION/Audio/Conceptual/AudioSessionProgrammingGuide/HandlingAudioInterruptions/HandlingAudioInterruptions.html "关联")）

有谁知道我可以在 AIR 平台中利用哪些事件？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:20:07.590

I believe the listeners for

```
addEventListener(Event.ACTIVATE, activateListener);
addEventListener(Event.DEACTIVATE, deactivateListener); 
```

might be the ones to use.

# nginx - 添加 nginx 作为 ubuntu 服务停止和重新加载不起作用

> ID：10939072
> 
> 赞同：9
> 
> 时间：2012-06-07T20:07:03.983
> 
> 标签：nginx, init.d

我的 nginx 是从源代码编译的，只给出标志`--conf-path=/etc/nginx/nginx.conf`

一切正常，我试图使用[这个](https://github.com/JasonGiedymin/nginx-init-ubuntu)服务 init.d 脚本将 nginx 作为系统服务，

这是我只做了 2 个小改动的脚本：

```
1\. DAEMON=/usr/local/nginx/sbin/nginx

2.NGINX_CONF_FILE="/etc/nginx/nginx.conf" 
```

然后 sudo service nginx 启动

有用

```
yozloy@SNDA-172-17-10-158:/usr/local$ sudo service nginx start
 * Starting Nginx Server...
   ...done 
```

.

但是服务 nginx 停止并服务 nginx 重新加载

给我一个错误

```
yozloy@SNDA-172-17-10-158:/usr/local$ sudo service nginx stop
 * Stopping Nginx Server...
   ...fail! 
```

并且错误未出现在 log/error.log 文件中

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-07-23T20:01:32.773

我在 Ubuntu 12.04 上遇到过类似的 Nginx 问题，nginx 从源代码编译，init 脚本取自与你类似的源代码。

服务在初始化文件中启动良好，但停止或重新启动没有。最后，原因是 nginx.conf 和 init 脚本中 pid 文件的路径不同。确保它们都指向同一个位置。

# javascript - d3 javascript点击时交替颜色

> ID：10939082
> 
> 赞同：12
> 
> 时间：2012-06-07T20:08:13.803
> 
> 标签：javascript, d3.js

我刚开始玩 d3，想知道如何在单击元素时更改元素的颜色。

这个小提琴改变了点击它的圆圈的颜色，但是我想在再次点击后让颜色恢复为白色。

当前代码：

```
var sampleSVG = d3.select("#viz")
        .append("svg")
        .attr("width", 100)
        .attr("height", 100);    

    sampleSVG.append("circle")
        .style("stroke", "gray")
        .style("fill", "white")
        .attr("r", 40)
        .attr("cx", 50)
        .attr("cy", 50)
        .on("click", function(){d3.select(this).style("fill", "magenta");}); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-07T20:46:16.093

让自己成为一个切换功能并将其传递给点击：http: [//jsfiddle.net/maniator/Bvmgm/6/](http://jsfiddle.net/maniator/Bvmgm/6/)

```
var toggleColor = (function(){
   var currentColor = "white";

    return function(){
        currentColor = currentColor == "white" ? "magenta" : "white";
        d3.select(this).style("fill", currentColor);
    }
})(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T21:04:42.340

这也奏效了，尽管是以一种更简陋的方式。. .

```
var PointColors = ['white', 'magenta']
var sampleSVG = d3.select("#viz")
    .append("svg")
    .attr("width", 100)
    .attr("height", 100);    

sampleSVG.append("circle")
    .style("stroke", "gray")
    .style("fill", "white")
    .attr("r", 40)
    .attr("cx", 50)
    .attr("cy", 50)
    .on("click", function(){
        PointColors = [PointColors[1], PointColors[0]]
        d3.select(this).style("fill", PointColors[0]);}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T21:08:02.947

编辑：在 Chrome 中不起作用，在 FF 中起作用。问题出在填充属性中：

```
this.style.fill 
```

Chrome 将“白色”更改为“#FFFFFF”。

顺便说一句，更清晰的解决方案应该是切换课程。

```
.on("click", function(){var nextColor = this.style.fill == "white" ? "magenta" : "white";
        d3.select(this).style("fill", nextColor);}); 
```

见[http://jsfiddle.net/kUZuW/](http://jsfiddle.net/kUZuW/)

# html - 使图像适合 HTML 表格中的指定行高

> ID：10939083
> 
> 赞同：3
> 
> 时间：2012-06-07T20:08:25.393
> 
> 标签：html, image, html-table, percentage

我有一个 HTML 表格，我想在其中放置一个像这样的标题的图像：

```
 <table style="height: 500px">
        <tr>
            <td style="height: 20%"><img src="http://example.com/MgCHv2" style="width: auto; height: 100%" /></td>
            <td style="height: 20%">Some Random Title</td>
        </tr>
        <tr>
            <td style="height: 20%"><img src="http://example.com/MgCHv2" style="width: auto; height: 100%" /></td>
            <td style="height: 20%">Some Random Title</td>
        </tr>
        <tr>
            <td style="height: 20%"><img src="http://example.com/MgCHv2" style="width: auto; height: 100%" /></td>
            <td style="height: 20%">Some Random Title</td>
        </tr>
        <tr>
            <td style="height: 20%"><img src="http://example.com/MgCHv2" style="width: auto; height: 100%" /></td>
            <td style="height: 20%">Some Random Title</td>
        </tr>
        <tr>
            <td style="height: 20%"><img src="http://example.com/MgCHv2" style="width: auto; height: 100%" /></td>
            <td style="height: 20%">Some Random Title</td>
        </tr>
    </table>​ 
```

我已将图像的高度指定为 100%。然而，这是原始图像大小的 100%，而我希望它是父元素的 100%（所以表格的高度为 20%）。图像（以及单元格）的宽度应按比例调整大小。

有谁知道如何做到这一点？这是 JSFiddle 链接：http: [//jsfiddle.net/rbzej/](http://jsfiddle.net/rbzej/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:52:03.830

抱歉，这是不可能的；尝试设置表格或单元格的高度只会影响最小高度，因为表格单元格的高度至少是内容所需的最小高度。由于您的图像指定了 100% 的高度，这是没有意义的，因为我们还不知道单元格的高度，所以使用图像的自然高度来代替。

# macos - 使用 Excel 中的数据在网站上注册人员

> ID：10939087
> 
> 赞同：0
> 
> 时间：2012-06-07T20:08:48.053
> 
> 标签：macos, forms, excel, web, automator

我在课堂上教书，也在网上教书。我想在我们的网站上注册我的学生（我的姓名、地址、出生日期和电子邮件地址在 Excel 表格中）。他们应该自己这样做，但不是每个人都这样做。尽管参加在线课程是课程的一部分。有没有办法使用我拥有的 Excel 数据自动填写网站上的表格？我有一个 MAC，所以我在考虑 MAC automator，但我对这种东西不太熟悉。谢谢。

2012 年 6 月 8 日添加：我无法发布链接，因为它不是公共网站。该表格类似于 xtCommerce 商店的客户注册表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T23:36:53.733

我将使用 Perl 模块[Spreadsheet::ParseExcel](http://search.cpan.org/~jmcnamara/Spreadsheet-ParseExcel-0.59/lib/Spreadsheet/ParseExcel.pm)和[WWW::Mechanize](http://search.cpan.org/~jesse/WWW-Mechanize-1.72/lib/WWW/Mechanize.pm)用 Perl 来实现这一点。

使用前者从电子表格中提取数据，后者用于导航到网站、填写字段并提交表单。

# mysql - 内部联接返回大量重复项

> ID：10939090
> 
> 赞同：0
> 
> 时间：2012-06-07T20:08:56.643
> 
> 标签：mysql, inner-join

我正在使用以下查询将两个表连接在一起：

```
SELECT SDA.smachIPAddress,
DPP.ScanName,
DPP.pspplMSSeverity,
DPP.PatchMissing,
DPP.ScanDate
FROM patchtest_withsev DPP
INNER JOIN patchtest_withip SDA
ON DPP.ScanName =SDA.ScanName 
```

并接收2351行数据

当我在 patchtest_withsev 表中查询所有记录时，它只返回 99，而 patchtest_withip 表只返回 99。

谁能明白为什么这个查询会产生如此大的不匹配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:11:52.970

似乎两个表都有几行具有相同的值`ScanName`。

例如：

```
table1:
f1 | f2
 1 | a
 1 | b
 2 | c
 2 | c

table2:
f1 | f2
 1 | a
 1 | b
 2 | c 
```

table1 INNER JOIN table2 ON table1.f1 = table2.f1 给出：

```
table1.f1 | table1.f2 | table2.f1 | table2.f2
        1 |         a |         1 |         a
        1 |         a |         1 |         b
        1 |         b |         1 |         a
        1 |         b |         1 |         b
        2 |         c |         2 |         c
        2 |         c |         2 |         c 
```

为避免结果中的行完全重复，请尝试使用`DISTINCT`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:16:35.777

If there are 99 entries in each table, assuming there were no unique values for scanName, you could potentially have 99x99=9801 entries in your results.

If you are getting true duplicates, try SELECT DISTINCT.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:14:33.267

如果有多个记录`patchtest_withip`与您加入的条件匹配，`patchtest_withsev`您可能会得到这样的结果。根据您得到的结果，我会说其中有 23-24 条记录与中的每条记录`patchtest_withip`相同`ScanName``patchtest_withsev`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T20:12:14.690

任一表中的 ScanName 是否有重复值？如果是这样，那么 SQL 将为每个匹配返回一行，这会很快增加行数。（例如，如果第一个表中有 3 行具有给定值，而第二个表中有 6 行具有该值，则 SQL 将返回 18 行）。

# iphone - 无法使 if/else 语句起作用

> ID：10939091
> 
> 赞同：0
> 
> 时间：2012-06-07T20:08:58.560
> 
> 标签：iphone, objective-c, ios, ipad

我有一个模式视图，要求用户在继续之前验证他/她的电子邮件。此模式视图可以从应用程序中的两个不同位置呈现。在一个地方，它来自另一个模态视图。这是我一次关闭两个模态视图的代码（效果很好）。

```
MYUser *thisUser = [MyUser thisUser];
[thisUser refreshInBackgroundWithBlock:^(MyObject *thisUser, NSError *error) {
if (thisUser){
  if ([[thisUser objectForKey:@"emailVerified"] intValue]) {
    [self dismissViewControllerAnimated:YES completion:^{
      MyLoginViewController *controller = (MyLoginViewController *)self.presentingViewController;
      [controller verifiedEmail];
      }
    }];
  } else {
      NSLog(@"Not verified");
  }
} else {
    NSLog(@"%@", error);
  }
}]; 
```

当我尝试添加检查以防它不是来自另一个模式视图时，问题就开始了。我尝试将此 if 语句插入到我的`dismissViewControllerAnimated:complete:^`块中：

```
* if ([self.presentingViewController respondsToSelector:@selector(verifiedEmail)]){}
if ([self.presentingViewController isMemberOfClass:[MyLoginViewController class]]){}
* if ([self.presentingViewController class] == [MyLoginViewController class]){} 
```

这些都不起作用。它们要么失败（在 *'d 的情况下）要么使应用程序崩溃。我认为问题在于`self.presentingViewController`不是类型转换，但如果 I`NSLog(@"%@", [self.presentingViewController class]);`和`NSLog(@"%@", [MyLoginViewController class]);`，输出看起来相同。

有任何想法吗？谢谢。

**用解决方案编辑**

事实证明，您不能`self.presentingViewController`在完成块内部调用，因为它就`null`在此时。我将代码修改为：

```
MYUser *thisUser = [MyUser thisUser];
id presentingVC = self.presentingViewController;
[thisUser refreshInBackgroundWithBlock:^(MyObject *thisUser, NSError *error) {
if (thisUser){
  if ([[thisUser objectForKey:@"emailVerified"] intValue]) {
    [self dismissViewControllerAnimated:YES completion:^{
    if ([presentingVC isMemberOfClass:[MyLoginViewController class]]){
      MyLoginViewController *controller = (MyLoginViewController *)presentingVC;
      [controller verifiedEmail];
      }
    }];
  } else {
      NSLog(@"Not verified");
  }
} else {
    NSLog(@"%@", error);
  }
}]; 
```

它现在运行良好。感谢您让我指出正确的方向！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:17:15.437

你有没有尝试过

isKindOfClass:[MyLoginViewController 类]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:20:35.823

您的代码应如下所示，而不是使用`isMemberOfClass:`try`isKindOfClass:`

```
[self dismissViewControllerAnimated:YES completion:^{

if ([self.presentingViewController isKindOfClass:[MyLoginViewController class]]) {
MyLoginViewController *controller = (MyLoginViewController*)self.presentingViewController;    
[controller verifiedEmail];

   }

}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:32:27.783

对于任何有类似问题的人@Mike_Z 找到了解决方案。

> 事实证明，您不能在完成块内调用 self.presentingViewController，因为此时它为空。我将代码修改为：

```
MYUser *thisUser = [MyUser thisUser];
id presentingVC = self.presentingViewController;
[thisUser refreshInBackgroundWithBlock:^(MyObject *thisUser, NSError *error) {
if (thisUser){
  if ([[thisUser objectForKey:@"emailVerified"] intValue]) {
    [self dismissViewControllerAnimated:YES completion:^{
    if ([presentingVC isMemberOfClass:[MyLoginViewController class]]){
      MyLoginViewController *controller = (MyLoginViewController *)presentingVC;
      [controller verifiedEmail];
      }
    }];
  } else {
      NSLog(@"Not verified");
  }
} else {
    NSLog(@"%@", error);
  }
}]; 
```

> 它现在运行良好。感谢您让我指出正确的方向！

# asp.net - 使用经典 ASP 打开 GZIP

> ID：10939096
> 
> 赞同：0
> 
> 时间：2012-06-07T20:09:17.097
> 
> 标签：asp.net, asp-classic, gzip

有什么方法或代码示例可以用经典的 asp 打开 GZIP 流吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:32:27.647

这个[COM 对象](http://www.xstandard.com/en/documentation/xzip/)将完成这项工作。

[http://www.xstandard.com/en/documentation/xzip/](http://www.xstandard.com/en/documentation/xzip/)

# javascript - 城市飞艇 + Cordova 1.7+

> ID：10939098
> 
> 赞同：1
> 
> 时间：2012-06-07T20:09:24.007
> 
> 标签：javascript, ios, cordova, urbanairship.com

有人有使用 Cordova 1.7 的 Urban Airship 的示例/插件/资源吗？

我遇到的所有示例和插件都很旧。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-09T07:15:45.523

我们使用[https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PushNotification](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/PushNotification)

然后您需要将设备令牌发送到 UA - 我们使用这两个函数来执行此操作 - 在第一个中设置您的 app_key 和 secret。然后从某个地方调用它..

```
 function registerDevice(callback) {
        console.log("calling registerDevice");
        window.plugins.pushNotification.registerDevice({alert:true, badge:true, sound:true},function(status) {
                if (status.deviceToken) {
                    window.token = status.deviceToken;
                    if (status) {
                        registerUAPush(token, "https://go.urbanairship.com/", "YOUR_APP_KEY", "YOUR_APP_SECRET", callback);
                    } else {
                        callback(false);
                        alert("error?");
                    }
                }
        });
    } 
```

调用

```
function registerUAPush(deviceToken, host, appKey, appSecret, callback) {

        console.log('Registering with Urban Airship Push Service...');

        var request = new XMLHttpRequest();

        // open the client and encode our URL
        request.open('PUT', host+'api/device_tokens/'+deviceToken, true, appKey, appSecret);

        // callback when request finished
        request.onload = function() {
            console.log('Status: ' + this.status + '<br>');

            if(this.status == 200 || this.status == 201) {
                // register UA push success
                console.log('UA push service successfully registered.');
            } else {
              // error
                console.log('Error when registering UA push service.<br>error: '+this.statusText);
            }

            callback(this.status == 200 || this.status == 201);

        };

        request.send();
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-20T18:55:47.557

urbanairship 在这里发布了 android/ios 的库和示例：[https ://github.com/urbanairship/phonegap-ua-push](https://github.com/urbanairship/phonegap-ua-push)

# html - 带有 IE 的 iframe 和背景图像

> ID：10939100
> 
> 赞同：2
> 
> 时间：2012-06-07T20:09:27.383
> 
> 标签：html, css, internet-explorer, iframe

我正在尝试将背景图像插入到一个`iframe`中，虽然它在 Firefox 中完全按预期工作，但 IE 完全忽略了它：

```
<iframe style="background: #ffffff url('/images/load.gif') no-repeat fixed center; width:100%; height:100%;" id="frm" align="middle" scrolling="auto" frameborder="0"></iframe> 
```

万一它很重要，背景图像是一个动画“加载”GIF，并且由 JS 动态设置的`src`属性。`iframe`这个想法是，当源文档加载时，它会覆盖背景，在此之前它只是一个活动指示器。

我在某处发现这可能是由于缺少或错误的文档类型引起的，我的说：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

如何让 IE 播放得很好，并在 iframe 源加载所需的几秒钟内显示背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:30:07.117

1.  在 iframe 元素上设置`allowtransparency=true`属性。
2.  使 iframe 的原始文档的背景透明，也许通过使用`<iframe src="javascript:'<body bgcolor=transparent>';">`

# vb.net - 如何以迭代和递归方式打印字符串的所有排列？VB.NET

> ID：10939106
> 
> 赞同：0
> 
> 时间：2012-06-07T20:09:43.893
> 
> 标签：vb.net, string

任何人都可以帮助我如何以迭代和递归方式打印字符串的所有排列吗？我更喜欢 VB.NET 或者只是伪代码就可以了。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T22:43:46.910

递归方法如下：

基本情况：1 个字母的排列是一个元素。

一般情况：一组字母的排列是每个字母的列表，与其他字母的每个排列连接。

解释：

如果集合只有一个字母，则返回该字母。排列(a) -> a

如果集合有两个字母，则为每个字母返回它以及其余字母的排列。

排列（ab）->

a + 排列(b) -> ab

b + 排列(a) -> ba

对于集合中的每个字母，返回与其余字母集的排列连接的字母。

排列（abc）->

a + 排列(bc) --> abc, acb

b + 排列(ac) --> bac, bca

c + permutation(ab) --> cab, cba

# python - 金字塔替换 URL Matchdict 中的双正斜杠

> ID：10939108
> 
> 赞同：1
> 
> 时间：2012-06-07T20:09:48.997
> 
> 标签：python, regex, pyramid

本质上，我只是在 Pyramid 内部构建一个 API 重定向路由来处理跨域 AJAX 请求，而不使用 JSONP。

我添加了一条路线，如下所示：

```
config.add_route("api","/api/{url:.*}") 
```

我想用它来捕获这样的 URL：

```
http://domain.com/api/http://location.of/other/api 
```

但是，当从 Request matchdict 中获取捕获的 URL 后缀时，我得到以下信息：

```
http:/location.of/other/api 
```

我猜在 URL 处理/匹配期间已经完成了一些转义？如何避免这种情况，并使用两个正斜杠获得所需的 URL？

*即使我将 URL 作为 GET 参数传递，问题仍然存在。也许这与 Pyramid 的 multidicts 的工作方式有关？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T00:12:13.093

这是*任何*基于 WSGI 的应用程序的基本限制。在将 URL 传递给 WSGI 应用程序之前，URL 会经过 urldecode 并压缩斜线。如果要保留斜杠，则需要对它们进行两次 urlencode。AFAIK 无法使用查询字符串解决此问题。

我想我应该指出原始 URL 是可用的，但是您必须从中解析出您自己关心的部分。它在`request.url`. `request.path_info`是 Pyramid 和大多数 WSGI 应用程序用来调度 URL 的，因为它只包含相对于应用程序安装位置的子路径。

# git - Git错误：inflate：数据流错误（数据检查不正确）

> ID：10939120
> 
> 赞同：0
> 
> 时间：2012-06-07T20:10:32.290
> 
> 标签：git, heroku

虽然我通常可以进行提交，也可以提交`push`到其他远程存储库（例如 Github），但是当我尝试 a 时，`git push heroku master`我得到了这个错误：

```
 error: inflate: data stream error (incorrect data check)
    fatal: loose object ae1711b15b2793ae756797eebdfafc051d52a215 (stored in .git/objects/ae/1711b15b2793ae756797eebdfafc051d52a215) is corrupt 
```

如果我这样做，`git fsck --no-dangling`我会收到相同的消息。

这些是heroku遥控器：

```
heroku  git@heroku.com:fppis.git (fetch)
heroku  git@heroku.com:fppis.git (push) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:24:46.950

不确定究竟是什么导致了这个问题，但我通过将 GitHub 远程克隆到一个新的本地存储库并将其再次推送到 Heroku 来解决这个问题。

# java - 在 Java 中同时读取和写入文件

> ID：10939122
> 
> 赞同：0
> 
> 时间：2012-06-07T20:10:34.957
> 
> 标签：java, file-io

所以我的场景如下：

我有一个目录，每隔 X 秒就有一个 Java 应用程序轮询该目录以查看是否添加了任何新文件。如果检测到新文件（可能通过未知的 FTP 实现传输到那里），我想查看文件以查看它是否以特定字符串结尾（即“allData”）。如果该字符串存在，我将根据我的需要开始解析它，因为该文件被认为已成功传输。

所以问题是正在传输的文件可能非常大（几 GB），我不希望在整个文件完全传输之前开始解析（由结尾的“allData”字符串指示）。当我想查看该字符串的文件时，搜索必须快速且内存消耗低。由于这个原因，我使用了一个 RandomAccessFile 对象（只读模式），它将文件描述符设置为非常接近文件的末尾，然后我开始使用该 FD 和 BufferedReader 进行搜索。

我的问题是我在 Java 应用程序中打开文件是否会影响正在执行的文件传输。因为它可能是应用程序在文件传输之前开始读取（以决定是否已传输整个文件）的情况。在这样的实现中会发生任何令人讨厌的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:13:50.433

我会让远程端使用 ftp 传输文件，然后让远程端将文件从 "filename.file.incomplete" 重命名为 "filename.file" ，然后您可以轮询没有“不完整”的内容结束。

# php - 上传未指定临时名称的文件

> ID：10939124
> 
> 赞同：7
> 
> 时间：2012-06-07T20:10:36.653
> 
> 标签：php, file-upload

我有一个处理上传文件的 PHP 脚本。它通常工作正常，但我偶尔会收到上传错误。当我检查`$_FILES`数组时，我可以看到：

失败的文件：

```
Array ( [Filedata] => Array (
      [name] => cbj2_web.pdf 
      [type] => 
      [tmp_name] => 
      [error] => 1 
      [size] => 0 ) ) 
```

有效的文件：

```
Array ( [Filedata] => Array ( 
        [name] => tick.png 
        [type] => application/octet-stream 
        [tmp_name] => /tmp/phpL8oYLc 
        [error] => 0 
        [size] => 1108 ) ) 
```

我不确定出了什么问题，也不知道如何查明它。这是处理文件的第一步，所以我没有任何代码对文件做任何事情。

有什么建议么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-07T20:12:10.293

从[http://php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)：

> 值：1；上传的文件超过了 php.ini 中的 upload_max_filesize 指令。

因此，您需要编辑 php.ini 文件以将 upload_max_filesize 值增加到更高的值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T20:13:01.693

你得到一个`error`of `1`。这是`UPLOAD_ERR_INI_SIZE`.

从[http://php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)：

> 上传的文件超出了[`upload_max_filesize`](http://www.php.net/manual/en/ini.core.php#ini.upload-max-filesize)php.ini 中的指令。

# objective-c - 具有两个项目的 Xcode 4 工作区无法访问彼此的文件

> ID：10939125
> 
> 赞同：1
> 
> 时间：2012-06-07T20:10:37.623
> 
> 标签：objective-c, xcode4, workspace

我在工作区中有两个项目。项目 A 需要访问项目 B (Kal) 中的一些文件。当我进行导入时（在项目 A 中），我启动 #import 并且弹出窗口让我可以选择我可用的所有文件。我选择 Kal.h，然后立即得到红旗说它找不到文件。

根据[Apple Docs on Workspaces](http://developer.apple.com/library/ios/#featuredarticles/XcodeConcepts/Concept-Workspace.html)，XCode 应该自动找到文件......这不是真的吗？我还需要设置搜索路径等吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-07T20:57:23.747

您引用的段落表明与您想要的内容略有不同。特别是，工作区可以访问两组文件，但对等项目无权访问彼此的文件。

如果您的项目 A 需要访问项目 B 中的文件，您可以设置项目 A 包含对项目 B 的引用的工作区。在这种情况下，项目 A 将有权访问项目 B 的文件，反之亦然。这将适用于标题或目标文件。

要将一个项目添加到工作区中的另一个项目，请在工作区中选择项目 A，然后`File > Add Files to Project A...`在标准文件窗口中选择并选择项目 B 的项目文件。这会将其添加到项目 A，从而使项目 A 可以访问项目 B 文件。

# jquery - 将传入的 HTML 传递给 jQuery 会将脚本元素移出其原始上下文

> ID：10939128
> 
> 赞同：0
> 
> 时间：2012-06-07T20:10:45.887
> 
> 标签：jquery, ajax

我有一种情况，在 AJAX 调用后，我从我们的服务器收到了 HTML 响应。我需要拉出一个特定元素及其子元素，并将其注入 DOM。

目前我的 AJAX 回调看起来像：

```
var onSuccess = function (rawData) {
    var rawData = $(rawData);
    var data = rawData.find("#foo");
    $("#bar").append(data);
}; 
```

`#foo`除非包含`<script>`元素，否则这很好用。经过一番摸索，我确定问题出现在第一步：

```
var rawData = $(rawData); 
```

将 HTML 传递给 jQuery 会将所有`<script>`元素从其原始上下文中拉出并使其成为顶级元素。随后`.find("#foo")`未能将先前嵌套的`<script>`元素带入其中，因为它们已被移动到其他地方。

当我将原始 HTML 直接注入 DOM 时，一切正常，但是我们的系统很旧，需要大量的按摩才能将返回的内容限制为感兴趣的元素，所以现在我需要能够扫描总响应并只取我需要的东西。其中包括那些`<script>`元素。

有什么建议么？

[后续] 谢谢大家的帮助。

我最终根据我的需要调整了[这个解决方案](https://stackoverflow.com/a/7330106/1116887)，使我的 AJAX 成功回调看起来像这样：

```
var onSuccess = function (rawData) {
  var data = $(rawData);
  var scripts = data.filter("script[someAttribute='someValue']");
  var elementOfInterest = data.find("#foo"); // scripts above used to live in #foo
  $("#target").append(elementOfInterest);
  $("body").append(scripts);
}; 
```

请注意，这需要我向要继承的嵌套脚本元素添加一个特殊属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:04:28.443

此函数接受一个 html 字符串，从中剥离脚本，将 html 附加到目标，然后执行脚本。这个函数结合ajax来获取html应该可以解决你的问题。

```
function cleanInsert(html, target, filter) {
    var outHTML = html, $content = $(target);
    outHTML = outHTML.replace(/<script/ig, "<div class='iscript'").replace(/<\/script/ig, '</script');
    outHTML = $(outHTML);
    if (filter) {
        outHTML = filter.call(outHTML);
    }
    var scripts = outHTML.filter('div.iscript').detach();
    $content.html(outHTML);
    scripts.each(function() {
        var $this = $(this),
            s = document.createElement("script");
        if ($this.attr('src') != "") {
            s.src = $this.attr('src');
        } else {
            s.nodeValue = $this.text();
        }
        $content[0].appendChild(s);
    });
}​ 
```

用法：

```
$.get("myurl.php",function(html){
    cleanInsert(html,"#bar", function(){
        return this.find("#foo");
    });
}); 
```

该函数改编自 history.js 示例中的代码。

但是请注意，HTML 中包含的脚本必须是顶级的，例如在`<head></head>`或 的直接子级中`<body>`，或者作为顶级元素。如果这是一个问题，则需要调整该功能以进行补偿。

更新：~~啊，这没有考虑到你只想要 html 中的`#foo`.~~ 更新。

更新：重要的是要注意，由于工作`document.write()`方式的原因，任何使用此功能或任何其他附加 html 的方法都无法正常运行的脚本`document.write()`。

# php - PHP数组通过引用传递值

> ID：10939130
> 
> 赞同：2
> 
> 时间：2012-06-07T20:10:51.633
> 
> 标签：php, arrays, reference

我有一小段代码用于测试 array_walk 测试。

我认为我可以对 foreach 做同样的事情，但是当我传递值时它不会被修改：

```
<?php
$frutas = [ "d" => "limón", "a" => "naranja", "b" => "banana", "c" => "manzana" ];

function test_alter(&$elemento)
{
  $elemento = "prefijo: $elemento";
  echo "$elemento <br>";
}

foreach($frutas as $clave => $valor) {
  test_alter($valor, $clave);
}
print_r( $frutas ); 
?> 
```

哪个输出：

```
prefijo: limón
prefijo: naranja
prefijo: banana
prefijo: manzana
Array ( [d] => limón [a] => naranja [b] => banana [c] => manzana ) 
```

显然没有修改数组值，尽管它是通过引用传递的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T20:16:27.233

您正在传递`$valor`给函数...`foreach`值不是“引用”值，因此您正在更改临时值，而不是实际的数组值...

在你的 foreach 循环中试试这个：

```
test_alter($frutas[$clave]); 
```

或者，您可以：

```
foreach($frutas as $clave => &$valor){
    test_alter($valor, $clave);
} 
```

# django - 没有数据库的 Django 静态站点搜索

> ID：10939131
> 
> 赞同：0
> 
> 时间：2012-06-07T20:10:52.577
> 
> 标签：django, search, static

我有一个我托管的私人网站，用 Django 创建，只有静态内容。我想搜索该站点，但该站点未连接到数据库，这使我无法使用大多数预制的后端/前端搜索实用程序。有没有人知道如何完成这个搜索，或者任何可以在这种情况下工作的应用程序。

感谢您提供的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:15:30.800

使用[Xapian](http://xapian.org/)或[Whoosh](http://packages.python.org/Whoosh/index.html)。两者都不需要独立的数据库。（Xapian 设置起来稍微困难一些，但比 Whoosh 快得多*）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:24:12.187

虽然你说你的站点没有连接数据库，但是你可以加一个。对于私人网站， **SQLite**应该可以做到这一点，它能够支持每天约 100.000 分贝的点击（根据他们的网站：[http](http://www.sqlite.org/whentouse.html) ://www.sqlite.org/whentouse.html ）。

如果您没有大量流量并且不想使用一些需要运行一些单独的守护进程的 RDBMS 解决方案，SQLite 是最好的方法之一——它在 Python/Django 中很容易支持，并且不需要任何服务器，只是将用作数据库的文件的路径。

# c++ - 确定 NTFS 卷是否安装在外部

> ID：10939132
> 
> 赞同：3
> 
> 时间：2012-06-07T20:10:53.670
> 
> 标签：c++, windows, ntfs, mount

我有一个使用卷过滤器驱动程序在 Windows 操作系统上跟踪 NTFS 卷更改的软件。当卷在安装我的驱动程序的操作系统之外安装和修改时，我需要处理一个条件。

是否可以计算出卷的“最后安装时间”？或任何其他允许我判断音量是否已安装在我的驱动程序控制之外的参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:01:41.583

我不知道“最后安装时间”，但有一个“日志文件打开计数”。如果您查看[http://www.opensource.apple.com/source/ntfs/ntfs-64/kext/ntfs_logfile.h](http://www.opensource.apple.com/source/ntfs/ntfs-64/kext/ntfs_logfile.h)，您会看到`RESTART_AREA`如下结构：

> ```
> /* 40*/ le32 restart_log_open_count;/* 每增加一个计数器
>                                      重新启动日志文件的时间
>                                      在打开日志文件时的挂载时间。
>                                      创建时设置为随机值。Win2k
>                                      将其设置为当前的低 32 位
>                                      NTFS 格式的系统时间（参见 time.h）。*/
> /* 44*/ le32 保留；/* 保留/对齐到 8 字节边界。*/
> /* sizeof() = 48 (0x30) 字节 */
> } __attribute__((__packed__)) RESTART_AREA;
> 
> ```
> 
> 你可以看到它的末尾是一个`restart_log_open_count`你可以用来跟踪坐骑的地方。您将查看该值并将其与保存的值进行比较。它应该等于保存的值加一。如果是这样，则自您上次控制以来尚未安装它。

# objective-c - iOS：如何获取嵌套关系 parent.child.theObjectsIWant 的所有对象

> ID：10939133
> 
> 赞同：1
> 
> 时间：2012-06-07T20:11:02.473
> 
> 标签：objective-c, ios, core-data

对于一个嵌套关系，我会这样做：

```
NSMutableArray *allClusters = [NSMutableArray arrayWithArray:[form.clusters allObjects]]; 
```

但是我该怎么办？：

```
NSMutableArray *allQuestions = [NSMutableArray arrayWithArray:[form.clusters.questions allObjects]]; 
```

集群和问题都是一对多的关系。

欢迎任何帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:43:31.013

```
 NSSet *allQuestionsOfForm = [form valueForKeyPath:@"clusters.questions"]; 
```

**编辑：**

正如 glorifiedHacker 所说，上面的代码返回一个嵌套集。要获得展平集，请使用：

```
 NSSet *allQuestionsOfForm = [form valueForKeyPath:@"clusters.@distinctUnionOfSets.questions"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:24:19.410

看起来您正在处理嵌套集，因此您可能只需要遍历父集以收集子集中的项目：

```
NSMutableArray *allQuestions = [NSMutableArray array];

for(Cluster *cluster in form.clusters) {
    [allQuestions addObjectsFromArray:[cluster.questions allObjects]];
} 
```

如果这不是您所追求的，那么您需要在原始问题中添加更多细节。

# jquery - 使用 link_to 传递 text_field 值

> ID：10939134
> 
> 赞同：2
> 
> 时间：2012-06-07T20:11:03.077
> 
> 标签：jquery, ruby-on-rails

```
<%= text_field_tag 'search_name', :class => 'search_save' %>
<%= link_to "Save search" , save_search_path(@some_value), :remote => true, :method => :post %> 
```

有没有办法通过给定的链接传递 search_name 文本字段的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T04:12:13.177

如果您尝试将值发布到服务器，您应该使用 HTML 表单。这就是他们的设计目的。实际上，当您`:method => :post`为帮助程序指定 as on 选项时`link_to`，Rails 会动态创建一个 HTML 表单，该表单会在单击链接时立即发送。为什么不这样做呢？

```
<%= form_tag '/save_search' do -%>
  <%= text_field_tag 'search_name', :class => 'search_save' %>

  <%= submit_tag 'Save search' %>
<% end -%> 
```

这会将值发布到服务器（可`params[:search_name]`在控制器操作中访问），就像需要的一样。

如果它是一个美学问题（例如，您认为按钮很丑，而是想要链接），您总是可以设置提交按钮的样式，使其看起来像一个带有普通旧 CSS 的链接。对用户来说，它看起来像一个链接，但更重要的是，它的行为就像一个按钮，无需任何额外的逻辑即可提交表单。

如果您仍然不相信使用表单是可行的方法并且您热衷于使其工作，那么您可以使用 jQuery 来做到这一点。让我们使用您的示例代码并稍微修改一下

```
<%= text_field_tag 'search_name', :class => 'search_save' %>
<%= link_to "Save search" , save_search_path(@some_value), :id => 'save_search' %> 
```

然后在您的内部您`application.js`可以添加以下内容。

```
$(function() {
    // Add click event binding to `Save search` link
    $("#save_search").on("click", function(event) {
        event.preventDefault(); // don't trigger default

        // get the value inside the text field
        var name = $("#search_name").val();

        $.post('/save_search', { search_name: name }, function(data) {
            // log the result from the server, or whatever...
            console.log(data);
        });
    });
}); 
```

当有人点击“保存搜索”链接并使用指定数据对服务器进行 AJAX 调用时，将触发此事件（除非用户做了一些愚蠢的事情，比如禁用 JavaScript）。控制器操作将能够通过 访问此数据`params[:search_name]`。希望这可以帮助。快乐编码！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T03:08:03.137

这可能与[Ruby on rails 重复 - 将表单中的 text_field 值传递给不同控制器中操作的参数](https://stackoverflow.com/questions/5285513/ruby-on-rails-pass-text-fields-value-in-form-to-a-parameter-for-an-action-in)

但这里有一个答案：[http ://railspikes.com/2007/4/17/partial_dom_submit_with_link_to_remote](http://railspikes.com/2007/4/17/partial_dom_submit_with_link_to_remote)

它可能需要针对较新版本的导轨进行修改。该`:submit`选项似乎不再存在。如果链接转到某个`GET`操作，您可以使用 javascript 更改事件来更改`href`链接上的。我相信也有办法通过`POST`操作来做到这一点。

我用这个页面让它工作：[https ://makandracards.com/makandra/1383-rails-3-make-link_to-remote-true-replace-html-elements-with-jquery](https://makandracards.com/makandra/1383-rails-3-make-link_to-remote-true-replace-html-elements-with-jquery)

# android - admob 到 listactivity 让我很困惑

> ID：10939135
> 
> 赞同：0
> 
> 时间：2012-06-07T20:11:10.927
> 
> 标签：android, admob, listactivity

我正在尝试在我的 listactivity 中将 admob 设置为我的 listactivity 的标题我正在使用它来设置列表：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.listview, values); 
```

和 (R.layout.listview) 只有这个：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="10dp"
style="@style/Font"
android:gravity="right" >
</TextView> 
```

它工作正常，然后我将其添加到设置 admob ：

```
adView = new AdView(this, AdSize.BANNER, "xxxxxxx");
LinearLayout layout = (LinearLayout)findViewById(R.id.mainLayout);
layout.addView(adView);
adView.loadAd(new AdRequest()); 
```

但它给了我一个错误

我真的很困惑！

我尝试将 adView 设置为标题：

```
lv.addHeaderView(adView, null, false); 
```

但这无济于事

请....有什么帮助吗？或分步教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:38:08.990

You're experiencing the crash because `LinearLayout layout = (LinearLayout)findViewById(R.id.mainLayout);` is trying to find a LinearLayout element in your xml file with an id of `mainLayout` and it doesn't exist.

Embedding ads within a ListView is a bit complicated. You'll need to write your own ListAdapter to support ads. You can pull heavily from this [AdMobListAdapter](http://code.google.com/p/google-mobile-dev/source/browse/adcatalog/src/com/google/ad/catalog/layouts/ListViewExampleListAdapter.java?repo=ad-catalog-android) example which takes in your array adapter and embed ads every 10 list items. Using the example link above, your calling code would look like [this](http://code.google.com/p/google-mobile-dev/source/browse/adcatalog/src/com/google/ad/catalog/layouts/ListViewExample.java?repo=ad-catalog-android) (posted below for reference):

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,R.layout.listview, values);
AdMobListAdapter adMobAdapter = new AdMobListAdapter(this, arrayAdapter);
setListAdapter(adMobAdapter); 
```

# java - 单击“发送”settext 从文本字段到 textarea

> ID：10939137
> 
> 赞同：3
> 
> 时间：2012-06-07T20:11:19.077
> 
> 标签：java, user-interface, action, listener, settext

希望有人能给我一点建议。我对 Java 真的很陌生（1-2 周），并且一直在使用教程来做到这一点，但我尝试的任何方法都不能让我做一个（简单的）任务。

当我单击 GUI 中的发送按钮时，我希望它在我的 GUI 上的 JTextArea 中设置文本/添加文本，我在 JTextField 中输入了该文本。我在下面提供了我的代码，以便有人可以指导我出错的地方。

```
package firstjavagui;

import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;

public class FirstJavaGui extends JPanel implements ActionListener {
    private static ActionListener e;
    protected JTextField tf;
    protected JTextArea ta;
    protected JButton send;
    private final static String newL = "\n";

    public FirstJavaGui() {
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        throw new UnsupportedOperationException("Not supported yet.");
    }

    public class e implements ActionListener {  
        @Override
        public void actionPerformed(ActionEvent e) { 
            String text = tf.getText();

            if (send.isSelected()) {
                ta.setText(text + newL);
            }    
        }
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame("Thomas' first application");

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(575,300);

        JMenuBar mb = new JMenuBar();

        JMenu m1 = new JMenu("File");
        JMenu m2 = new JMenu("Help");

        mb.add(m1);
        mb.add(m2);

        JMenuItem m21 = new JMenuItem("Save");
        JMenuItem m22 = new JMenuItem("Exit");

        m1.add(m21);
        m1.add(m22);

        JButton send = new JButton("Send");

        JButton reset = new JButton("Start/Restart");

        JLabel enter = new JLabel("Enter text here:");

        JTextField text = new JTextField(25);

        JPanel p = new JPanel();
        p.add(enter);
        p.add(text);
        p.add(send);
        p.add(reset);

        JTextArea ta = new JTextArea();

        frame.getContentPane().add(BorderLayout.SOUTH,p);
        frame.getContentPane().add(BorderLayout.NORTH, mb);
        frame.getContentPane().add(BorderLayout.CENTER, ta);

        send.addActionListener(e);

        frame.setVisible(true);
    }
} 
```

如果有人可以帮助我，将不胜感激。

我认为这是因为我的所有按钮等都在我的 main 中，所以我的操作无法将“发送”识别为按钮......但是如果我在 main 方法之外编写我的 gui，它不会编译..我是新手对此，但我正在学习。只需要一只小手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:08:55.097

欢迎来到 Java。您正在使用您的代码到达那里，但有一些小问题。

第一个问题围绕“e”。你有两个叫做 e 的东西，一个是一个类，一个是一个引用对象的变量：

```
// Reference to an object
private static ActionListener e;
...
// Class
public class e implements ActionListener{
... 
```

现在你永远不会给你的对象引用一个值，所以它会是空的。对于 ActionListeners（响应 UI 中的事件的对象）来说，这不是一个好主意。您需要创建一个实现 ActionListener 的类的实例以响应事件。这是一个典型的例子：

```
...
ExitListener listener = new ExitListener();
button.addActionListener(listener)
...
private class ExitListener implements ActionListener {
    @Override
    public void actionPerformed (ActionEvent e) {
        System.exit(0);
    }
} 
```

ExitListener 是一个 ActionListener。为了响应事件，您需要创建一个 ExitListener 实例并将该实例传递给按钮。顺便说一句，“e”对于一个类来说是一个非常糟糕的名字——总是让你的类名具有描述性。

第二个问题很经典，每个人在开始使用Java时都会遇到这个问题。问题围绕着静态的使用。我不会详细介绍，因为它是一个大主题，但基本上从声明为静态的方法（例如 main(...)）中，您只能访问在类中声明的也标记为静态的变量。对于静态变量，只有一个实际变量。对于非静态变量，类的每个实例都有一个变量。

基本上，对于您的测试程序，您可以选择将所有内容设为静态（包括当前称为“e”的类），或者您可以创建 FirstJavaGui 的实例，然后您可以使用非静态。

# python - 领域特定语言，标准文件格式

> ID：10939138
> 
> 赞同：1
> 
> 时间：2012-06-07T20:11:31.690
> 
> 标签：python, xml, json, standards, dsl

XML 是一种用于存储文档的良好文件格式：带有元数据的内容。JSON 是一种很好的存储数据的文件格式。

是否有擅长编码操作的类似文件格式标准？换句话说，是否有一种标准文件格式可以很好地编码小型轻量级特定领域的语言？我想到的是仅由字符串数据和不超过十几个简单命令组成的简单 DSL。我的语言将包括以非常简单的方式（没有条件或循环）调用一个又一个命令。

目前，我使用 XML 对一系列操作进行编码，其中每个标记代表不同的命令。SAX 解析器将每个元素作为函数调用分派。很难看；只是感觉不像是一个优雅的解决方案。

理想情况下，我会在 python 中工作，而不是编写自己的解析器......试图从使用已建立的标准文件格式中获益。一个后备是使用 python 本身，但如果要找到一个语言中立的标准，我当然更喜欢语言中立的标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:18:03.033

If XML does the job, but readability is an issue, it might well be a good use case for [YAML](http://en.wikipedia.org/wiki/YAML). ([Python support](http://pyyaml.org/)).

There's a good [CodingHorror post](http://www.codinghorror.com/blog/2008/05/xml-the-angle-bracket-tax.html) concerning the "XML angle-bracket tax"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T21:41:39.890

Qt 的 QML 框架通过扩展[QML 语言](http://doc.qt.nokia.com/4.7-snapshot/qdeclarativeintroduction.html)元素集以包含由 C++ 对象支持的自定义元素，为[DSL 开发](https://vperi.com/2012/06/04/custom-domain-specific-languages-with-qt-declarative-qml/)提供了另一种途径。Python 绑定可用于[PySide](http://qt-project.org/wiki/Category:LanguageBindings::PySide)。

尽管 QML 主要用于 UI 开发，但 QML 可以扩展为表示任意对象树。

例如，这个[片段](http://qt.gitorious.org/pyside/pyside-examples/blobs/HEAD/examples/declarative/extending/chapter1-basics/basics.py)定义了一个新的 QML 元素 (PieChart)，然后在 QML 系统中注册并在 QML 语言中使用。

```
import sys
from PySide.QtCore import *
from PySide.QtGui import *
from PySide.QtDeclarative import *

class PieChart (QDeclarativeItem):
   ... 
```

PieChart 在 QML 系统中注册：

```
 qmlRegisterType(PieChart, 'Charts', 1, 0, 'PieChart'); 
```

在[QML](http://qt.gitorious.org/pyside/pyside-examples/blobs/HEAD/examples/declarative/extending/chapter1-basics/app.qml)（DSL）端，我们可以导入和使用 PieChart：

```
import Charts 1.0
import Qt 4.7

Item {
    ...

    PieChart {
        id: aPieChart
        anchors.centerIn: parent
        width: 100; height: 100
        name: "A simple pie chart"
        color: "red"
    }
 ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-02T13:39:26.703

最后，我使用 S 表达式在 Python 中实现了一个简单的解释器。解析器很容易在网上找到（大约半页代码），并且可以通过使用函数装饰器来简单地实现该语言的函数。

# database - JSON 输出中的无效字符

> ID：10939152
> 
> 赞同：0
> 
> 时间：2012-06-07T20:12:03.957
> 
> 标签：database, json

我从我的服务器获取了一些代表搜索结果的 JSON。我从 Sphider 获得它，它是一个 PHP 搜索引擎。如果您有兴趣，我已经在[此处](https://stackoverflow.com/questions/10888704/getting-sphider-to-output-json)首先询问了有关获取 JSON 的问题。

所以这个 JSON 对我来说看起来不错。当我把它放入[这个验证器](http://jsonformatter.curiousconcept.com/)时，它说“发现无效字符。[代码 18，结构 66]”我不确定这是什么意思，但我想我应该更仔细地看看它抱怨的那一行如果有任何奇怪的字符。我发现的只是空格*应该*在的 0x20s（空格） 。

现在，我认为最大的提示是：当我将验证器输出中的“无效”JSON 复制到输入中并再次运行它时，它会起作用，说明 JSON 是有效的。我不知道该怎么做。

那么验证器是什么意思呢？此外，此文本是从数据库中提取的，是什么导致它输出“无效字符”？

这是 JSON：

```
{   "result_report":"Displaying results 1 - 2 of 2 matches (0.03 seconds) ",  "results":[    {   "idented":"false",   "num":"1",  "weight":"[100.00%]",  "link":"http://www.avtainsys.com/articles/PHP_Markdown",  "title":"PHP <b>Markdown</b>",   "description":"  Full documentation of <b>Markdown</b>'s syntax is available on John's <b>Markdown</b> page: http://daringfireball.net/projects/<b>Markdown</b>/   Installation and Requirement  PHP <b>Markdown</b> requires PHP version 4.0.5 or later.  WordPress  PHP <b>Markdown</b>",  "link2":"http://www.avtainsys.com/articles/PHP_Markdown",  "size":"31.0kb" },  {   "idented":"false",   "num":"2",  "weight":"[3.46%]",  "link":"http://www.avtainsys.com/articles",  "title":"Recent Articles",   "description":" systems         PHP <b>Markdown</b>     by Some Guy     Some information regarding using the PHP <b>Markdown</b> library, it's deployment, and some things to watch out for.            MD Example      by Hassan El-Mehalawi       A simple example",  "link2":"http://www.avtainsys.com/articles",  "size":"3.3kb" },  {  "num":"-1" }  ],  "other_pages":[   {  "title":"1",  "link":"search.php?query=markdown&start=1&search=1&results=10&type=and&domain=",      "active":"true"     }     ]  } 
```

在这里它被格式化：

```
{
   "result_report":"Displaying results 1 - 2 of 2 matches (0.03 seconds) ",
   "results":[
      {
         "idented":"false",
         "num":"1",
         "weight":"[100.00%]",
         "link":"http://www.avtainsys.com/articles/PHP_Markdown",
         "title":"PHP <b>Markdown</b>",
         "description":"  Full documentation of <b>Markdown</b>'s syntax is available on John's <b>Markdown</b> page: http://daringfireball.net/projects/<b>Markdown</b>/   Installation and Requirement  PHP <b>Markdown</b> requires PHP version 4.0.5 or later.  WordPress  PHP <b>Markdown</b>",
         "link2":"http://www.avtainsys.com/articles/PHP_Markdown",
         "size":"31.0kb"
      },
      {
         "idented":"false",
         "num":"2",
         "weight":"[3.46%]",
         "link":"http://www.avtainsys.com/articles",
         "title":"Recent Articles",
         "description":" systems       PHP <b>Markdown</b>    by Some Guy   Some information regarding using the PHP <b>Markdown</b> library, it's deployment, and some things to watch out for.         MD Example    by Hassan El-Mehalawi   A simple example",
         "link2":"http://www.avtainsys.com/articles",
         "size":"3.3kb"
      },
      {
         "num":"-1"
      }
   ],
   "other_pages":[
      {
         "title":"1",
         "link":"search.php?query=markdown&start=1&search=1&results=10&type=and&domain=",
         "active":"true"
      }
   ]
} 
```

需要明确的是，格式化的 JSON 是使用我上面链接的格式化程序/验证器格式化的。这是我输入原始“无效”输出后得到的输出。

由于观察到上述未格式化的 JSON 实际上是有效的，因此这里是输出上述 JSON 的 URL：

[http://avtainsys.com/sphider/search.php?query=markdown&search=1](http://avtainsys.com/sphider/search.php?query=markdown&search=1)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T20:43:14.397

它与标签有关；它在清除验证器标识的字符串中的空格后解析（来自实际源）。从技术上讲，标签应该像`\t`JSON 字符串一样被转义（尽管有些解析器可能不关心）。

# c# - 检查服务器是否启用了 TRACE

> ID：10939156
> 
> 赞同：0
> 
> 时间：2012-06-07T20:12:18.007
> 
> 标签：c#, .net-3.5, trace

我正在寻找一种方法来检查**远程**服务器上是否启用了 TRACE，有人知道该怎么做吗？内置库是否具有此功能？

到目前为止，我的程序使用 WebRequest、URI 和 TcpClient 库，其中一个库是否有它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:31:11.583

如果您查看 msdn 网站，它会解释

```
using System.web 
```

有 TraceContext.IsEnabled

[MSDN 说明](http://msdn.microsoft.com/en-us/library/system.web.tracecontext.isenabled.aspx)

# java - 在创建对象时设置其属性

> ID：10939157
> 
> 赞同：1
> 
> 时间：2012-06-07T20:12:21.443
> 
> 标签：java, swing

我有时会看到这样的代码：

```
new myJFrame().setVisible(true); 
```

我不完全知道它是如何工作的，但它实际上创建了 a`myJFrame`并将其设置为可见，作为将其设置为在其构造函数上可见的替代方法。

我想知道的是，是否有办法在 JMenuItem 或 JButton 上执行此操作，以自动为其分配 ActionListener 而无需先显式声明它，如：

```
myJMenu.add(new JMenuItem("Item").addActionListener(myActionListener)); 
```

就我所尝试的而言，这是行不通的。

我并不完全*需要*它来工作，我只是想知道它是否可能，因为它可以为我节省一些时间。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:17:35.203

Your proposed code won't work because `JMenuItem.addActionListener()` does not return anything (it's a void method), so there is nothing to pass as the argument to `JMenu.add()`.

In the first example, there is also nothing returned, but it doesn't matter.

As mentioned by @biziclop, in some styles of coding most methods return `this` so that they can be chained together. For example, [Builders](http://en.wikipedia.org/wiki/Builder_pattern) which use a [Fluent Interface](http://en.wikipedia.org/wiki/Fluent_interface) tend to do this.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T20:14:08.307

它被称为[方法链接](http://en.wikipedia.org/wiki/Method_chaining)，简单地说，一个类要么支持它，要么不支持它，这取决于它是如何编写的。

它的完成方式很简单：

```
public class Bar {

   private Set<Foo> foos;

   public Bar addFoo( Foo foo ) {
     this.foos.add( foo );
     return this;
   }
} 
```

从这里你也可以看到为什么不能链接不是以这种方式编写的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T22:10:44.667

作为替代方案，请考虑使用采用 的`JMenuItem`构造函数`Action`：

```
myJMenu.add(new JMenuItem(new AbstractAction("Item") {

    @Override
    public void actionPerformed(ActionEvent e) {
        ...
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T20:17:23.597

if you want nastiness you can do an anonymous extension of a non-final class and add an anonymous constructor to initialize stuff:

```
ArrayList ar=new ArrayList()  
    {
      {
        add(new Object());
      }
    }; 
```

# c++ - OpenMP 性能

> ID：10939158
> 
> 赞同：20
> 
> 时间：2012-06-07T20:12:24.347
> 
> 标签：c++, c, multithreading, openmp

首先，我知道这种 [type of] 问题经常被问到，所以让我先说我已经阅读了尽可能多的内容，但我仍然不知道交易是什么。

我已经并行化了一个*巨大的*外部 for 循环。循环迭代的次数变化，通常在 20-150 之间，但循环体做了大量的工作，调用了很多本地密集的线性代数例程（例如，代码是源代码的一部分，而不是外部依赖项） . 在循环体中，有 1000 多个对这些例程的调用，但它们完全相互独立，所以我认为这将是并行性的主要候选者。循环代码是 C++，但它调用了很多用 C 编写的子例程。

代码如下所示；

```
<declare and initialize shared variables here>
#ifdef _OPENMP
#pragma omp parallel for                            \
  private(....)\
  shared(....)              \
  firstprivate(....) schedule(runtime)
#endif
  for(tst = 0; tst < ntest; tst++) {

     // Lots of functionality (science!)
     // Calls to other deep functions which manipulate private variables only
     // Call to function which has 1000 loop iterations doing matrix manipulation
     // With no exaggeration, there are probably millions 
     // of for-loop iterations in this body, in the various functions called. 
     // They also do lots of mallocing and freeing
     // Finally generated some calculated_values

     shared_array1[tst] = calculated_value1;
     shared_array2[tst] = calculated_value2;
     shared_array3[tst] = calculated_value3;

 } // end of parallel and for

// final tidy up 
```

我相信根本不应该有*任何*同步——线程访问共享变量的唯一时间是`shared_arrays`，并且它们访问这些数组中的唯一点，索引为`tst`。

问题是，当我增加线程数量时（在多核集群上！）我们看到的速度（我们调用这个循环 5 次）如下；

```
 Elapsed time   System time
 Serial:        188.149          1.031
 2 thrds:       148.542          6.788
 4 thrds:       309.586        424.037       # SAY WHAT?
 8 thrds:       230.290        568.166  
16 thrds:       219.133        799.780 
```

可能值得注意的是系统时间在 2 到 4 个线程之间的巨大跳跃，事实上，当我们从 2 到 4 时，经过的时间翻了一番，然后慢慢减少。

我已经尝试过大量的`OMP_SCHEDULE`参数，但没有运气。这是否与每个线程大量使用 malloc/new 和 free/delete 的事实有关？这一直以 8GB 内存运行 - 但我猜这不是问题。坦率地说，系统时间的巨大增加使得线程看起来像是阻塞了，但我不知道为什么会发生这种情况。

**更新 1** 我真的认为错误共享会成为问题，所以重新编写了代码，以便循环将它们的计算值存储在线程本地数组中，然后将这些数组复制到最后的共享数组中。可悲的是，这没有任何影响，尽管我自己几乎不相信。

按照@cmeerw 的建议，我运行了 strace -f，在所有初始化之后只有数百万行

```
[pid 58067] futex(0x35ca58bb40, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>
[pid 58066] <... futex resumed> )       = -1 EAGAIN (Resource temporarily unavailable)
[pid 58065] <... futex resumed> )       = -1 EAGAIN (Resource temporarily unavailable)
[pid 57684] <... futex resumed> )       = 0
[pid 58067] <... futex resumed> )       = 0
[pid 58066] futex(0x35ca58bb40, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>
[pid 58065] futex(0x35ca58bb40, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>
[pid 58067] futex(0x35ca58bb40, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>
[pid 58066] <... futex resumed> )       = 0
[pid 57684] futex(0x35ca58bb40, FUTEX_WAIT_PRIVATE, 2, NULL <unfinished ...>
[pid 58065] <... futex resumed> )       = 0
[pid 58067] <... futex resumed> )       = 0
[pid 57684] <... futex resumed> )       = -1 EAGAIN (Resource temporarily unavailable)
[pid 58066] futex(0x35ca58bb40, FUTEX_WAIT_PRIVATE, 2, NULL <unfinished ...>
[pid 58065] futex(0x35ca58bb40, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>
[pid 58066] <... futex resumed> )       = -1 EAGAIN (Resource temporarily unavailable)
[pid 57684] futex(0x35ca58bb40, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>
[pid 58065] <... futex resumed> )       = 0
[pid 58066] futex(0x35ca58bb40, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>
[pid 57684] <... futex resumed> )       = 0
[pid 58067] futex(0x35ca58bb40, FUTEX_WAIT_PRIVATE, 2, NULL <unfinished ...>
[pid 58066] <... futex resumed> )       = 0
[pid 58065] futex(0x35ca58bb40, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>
[pid 58067] <... futex resumed> )       = -1 EAGAIN (Resource temporarily unavailable)
[pid 58066] futex(0x35ca58bb40, FUTEX_WAIT_PRIVATE, 2, NULL <unfinished ...>
[pid 57684] futex(0x35ca58bb40, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>
[pid 58065] <... futex resumed> )       = 0
[pid 58067] futex(0x35ca58bb40, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>
[pid 58066] <... futex resumed> )       = -1 EAGAIN (Resource temporarily unavailable)
[pid 57684] <... futex resumed> )       = 0
[pid 58067] <... futex resumed> )       = 0
[pid 58066] futex(0x35ca58bb40, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>
[pid 58065] futex(0x35ca58bb40, FUTEX_WAIT_PRIVATE, 2, NULL <unfinished ...>
[pid 58066] <... futex resumed> )       = 0
[pid 58065] <... futex resumed> )       = -1 EAGAIN (Resource temporarily unavailable)
[pid 58066] futex(0x35ca58bb40, FUTEX_WAIT_PRIVATE, 2, NULL <unfinished ...>
[pid 57684] futex(0x35ca58bb40, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>
[pid 58067] futex(0x35ca58bb40, FUTEX_WAIT_PRIVATE, 2, NULL <unfinished ...>
[pid 58066] <... futex resumed> )       = -1 EAGAIN (Resource temporarily unavailable)
[pid 58065] futex(0x35ca58bb40, FUTEX_WAKE_PRIVATE, 1 <unfinished ...>
[pid 57684] <... futex resumed> )       = 0 
```

任何人有任何想法是什么意思？看起来线程过于频繁地进行上下文切换，或者只是阻塞和解除阻塞？当我设置为 0`strace`的相同实现时，`OMP_NUM_THREADS`我根本没有得到这些。比较一下，使用 1 个线程时生成的日志文件为 486 KB，使用 4 个线程时生成的日志文件为 266 MB。

换句话说，并行版本调用了额外的 4170104 行日志文件......

**更新 2**

正如汤姆所建议的那样，我尝试将线程绑定到特定的处理器无济于事。我们在 OpenMP 3.1 中，所以我使用`export OMP_PROC_BIND=true`. 相同大小的日志文件和相同的时间范围。

**更新 3**

情节变厚了。到目前为止只在集群上进行了分析，我通过 Macports 安装了 GNU GCC 4.7，并第一次在我的 Macbook 上编译（使用 openMP）（Apple 的 GCC-4.2.1 在启用 OpenMP 时会引发编译器错误，这就是为什么我直到现在还没有在本地编译和并行运行它）。在 Macbook 上，您基本上可以看到您所期望的趋势

```
 C-code time
 Serial:         ~34 seconds
 2 thrds:        ~21 seconds
 4 thrds:        ~14 seconds
 8 thrds:        ~12 seconds
16 thrds:         ~9 seconds 
```

我们看到接近尾声的回报递减，尽管这并不奇怪，因为我们在这个测试数据上迭代的几个数据集有 <16 个成员（所以，我们生成了 16 个线程，比如`for-loop`7 次迭代） .

所以，现在问题仍然存在——为什么集群的性能下降得这么厉害。今晚我将尝试不同的四核 linuxbox。集群使用 GNU-GCC 4.6.3 编译，但我不敢相信它本身会产生如此大的影响？

既没有`ltrace`也没有`GDB`安装在集群上（由于各种原因我无法安装它们）。如果我的 linuxbox 提供类似集群的性能，我将在`ltrace`那里运行相应的分析。

**更新 4**

天啊。我决斗将我的 Macbook Pro 引导到 Ubuntu (12.04) 并重新运行代码。这一切都在运行（这有点让人放心），但我看到了我在集群上看到的相同的、奇怪的不良性能行为，以及数百万次`futex`调用的相同运行。鉴于我在 Ubuntu 和 OSX 中的本地计算机之间的唯一区别是软件（而且我使用相同的编译器和库 - 大概`glibc`OSX 和 Ubuntu 没有不同的实现！）我现在想知道这是否适合与 Linux 如何调度/分配线程有关。无论如何，在我的本地机器上让一切变得简单一百万倍，所以我将继续前进，`ltrace -f`看看我能找到什么。我为集群写了一个解决方法`forks()`关闭一个单独的进程，并在运行时提供完美的 1/2，因此绝对有可能获得并行性......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T15:15:02.397

因此，在进行了一些相当广泛的分析之后（感谢[这篇关于 gprof 和 gdb 时间采样的信息的精彩帖子](https://stackoverflow.com/a/378024/615257)），其中涉及编写一个大型包装函数来生成用于分析的生产级代码，很明显，在我的绝大多数时间里使用 gdb 中止正在运行的代码并运行`backtrace`堆栈在`STL <vector>`调用中，以某种方式操作向量。

该代码将一些向量`parallel`作为私有变量传递到该部分，这似乎工作正常。然而，在取出所有向量并用数组替换它们（以及其他一些使这项工作正常工作的诡计）之后，我看到了显着的加速。使用小的人工数据集，加速几乎是完美的（即，当你将线程数加倍时，一半的时间），而使用真实数据集，加速并不那么好，但这在上下文中是完全有意义的代码是如何工作的。

似乎无论出于何种原因（可能是`STL<vector>`实现中的一些静态或全局变量？）当循环通过数十万次并行迭代时，都会出现一些深层锁定，这发生在 Linux（Ubuntu 12.01 和 CentOS 6.2）中但不是在 OSX 中。

我真的很想知道为什么我会看到这种差异。STL 的实现方式是否有所不同（OSX 版本是在 GNU GCC 4.7 下编译的，Linux 也是如此），或者这与上下文切换有关（如 Arne Babenhauserheide 所建议的）

总之，我的调试过程如下；

*   从内部进行初步分析`R`以识别问题

*   确保没有`static`变量充当共享变量

*   分析`strace -f`并且`ltrace -f`这对于识别锁定是罪魁祸首非常有帮助

*   分析以`valgrind`查找任何错误

*   尝试了各种计划类型（自动、引导、静态、动态）和块大小的组合。

*   尝试将线程绑定到特定处理器

*   通过为值创建线程本地缓冲区来避免错误共享，然后在结束时实现单个同步事件`for-loop`

*   从并行区域内删除了所有`mallocing`和`freeing`- 对问题没有帮助，但确实提供了一个小的一般加速

*   尝试了各种架构和操作系统——最终并没有真​​正帮助，但确实表明这是 Linux 与 OSX 的问题，而不是超级计算机与桌面的问题

*   构建一个使用调用实现并发的版本`fork()`——在两个进程之间有工作量。这将 OSX 和 Linux 上的时间减半，这很好

*   构建了一个数据模拟器来复制生产数据负载

*   gprof 分析

*   gdb 时间采样分析（中止和回溯）

*   注释掉向量操作

*   如果这不起作用，[Arne Babenhauserheide 的链接](https://stackoverflow.com/questions/5875989/does-multithreading-emphasize-memory-fragmentation)看起来很可能有一些关于 OpenMP 内存碎片问题的关键内容

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T20:18:57.710

It's hard to know for sure what is happening without significant profiling, but the performance curve seems indicative of [False Sharing](http://en.wikipedia.org/wiki/False_sharing)...

> threads use different objects but those objects happen to be close enough in memory that they fall on the same cache line, and the cache system treats them as a single lump that is effectively protected by a hardware write lock that only one core can hold at a time

Great article on the topic at Dr Dobbs

[http://www.drdobbs.com/go-parallel/article/217500206?pgno=1](http://www.drdobbs.com/go-parallel/article/217500206?pgno=1)

In particular the fact that the routines are doing a lot of malloc/free could lead to this.

One solution is to use a pool based memory allocator rather than the default allocator so that each thread tends to allocate memory from a different physical address range.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T13:40:53.557

由于线程实际上不交互，您可以将代码更改为多处理。最后你只会有消息传递，并且可以保证线程不需要同步任何东西。

这是 python3.2-code 基本上可以做到这一点（出于性能原因，您可能不想在 python 中执行此操作 - 或者将 for-loop 放入 C 函数并通过 cython 绑定它。您将从代码中看到为什么我还是用 Python 展示它）：

```
from concurrent import futures
from my_cython_module import huge_function
parameters = range(ntest)
with futures.ProcessPoolExecutor(4) as e:
    results = e.map(huge_function, parameters)
    shared_array = list(results) 
```

而已。将进程数增加到可以放入集群的作业数，并让每个进程只需提交和监视一个作业以扩展到任意数量的调用。

没有交互的巨大函数和小的输入值几乎需要多处理。一旦你有了它，切换到 MPI（几乎无限扩展）并不太难。

从技术方面来看，Linux 中的 AFAIK 上下文切换非常昂贵（具有大量内核空间内存的单片内核），而在 OSX 或 Hurd（Mach 微内核）上要便宜得多。这*可能*解释了您在 Linux 上看到的大量系统时间，但在 OSX 上却没有。

# java - 无法使用命令行编译 Android/Java 项目

> ID：10939162
> 
> 赞同：1
> 
> 时间：2012-06-07T20:12:42.007
> 
> 标签：java, android, command-line, compilation

我不熟悉使用 Eclipse 以外的任何东西来编译 Java 项目。我正在尝试使用命令行来编译一个使用 Android 的 java 文件，但我没有成功。

我一直在尝试以下变体（我的根目录是我的项目目录）：

```
 javac -classpath C:\Program_Files\Java\jdk1.7.0_04\bin;
          C:\Program_Files\Android\android-sdk\platforms\android-15\android.jar
          src\package1\package2\projectName.Java 
```

它一直没有工作。我收到很多错误说：

```
 package android.content does not exist
    package android.database does not exist
    package android.net does not exist
    package android.os does not exist
    package android.util does not exist 
```

我在这里做错了什么吗？我怎样才能让它识别那些 android 包？有人可以在这里指出我正确的方向吗？我已经阅读了一堆关于 javac、命令行和类路径的文档，但我似乎无法确定这里的主要问题。谢谢你。

**新的**

我不确定这些信息是否会有所作为......但是当我在 Eclipse 中运行我的程序时，它使用带有目录的 Android 2.2`C:\Program_Files\Android\android-sdk\platforms\android-8\android.jar`而不是`C:\Program_Files\Android\android-sdk\platforms\android-15\android.jar`. 这有什么改变吗？但是，当我尝试转到计算机上的该文件夹时……它不存在。该`android-15`文件夹是存在的。我尝试将我的类路径更改为带有 的目录`android-8`，但不幸的是它没有改变任何东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:14:29.053

有一个[关于如何从命令行构建的指南](http://developer.android.com/guide/developing/building/building-cmdline.html)。尝试：

> 蚂蚁释放

或者

> 蚂蚁调试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:36:42.977

对于类路径，我认为您的目录不正确。一方面，bin 子目录通常具有 Windows 系统上的 EXE 或 DLL。

例如，我的 JRE 1.6 是路径“ **C:\Program Files\Java\jdk1.6.0_25\lib** ”。另一个可能的问题是目录 Program_Files，我的没有下划线，而是一个空格。如果我在命令行而不是 Eclipse 上编译，我会在这个路径周围加上引号。

CLASSPATH 可以采用多个目录。所以为了试验，使用几个目录来修复编译错误。

**新** 的 My Android SDK 位于 C:\android-sdk-windows\tools。android-sdk-windows 有很多 JAR 文件；找到所有带有 JAR 的目录。我觉得这就是！把它当作你的幸运日。

祝你好运，

汤米奎

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:15:45.747

我觉得这可能是两件事中的一件。首先，您的路径不正确，但在这种情况下似乎没问题。

第二件事，在这里暗中拍摄，Android是否支持java 1.7？尝试使用 1.6 看看是否有帮助。

任何使用 1.7 的人，我还没有尝试过，但我知道使用不同的驱动程序版本编译源代码很时髦。

# android - 运行 Android Marketplace Crawler（'hg' 目录？）

> ID：10939166
> 
> 赞同：1
> 
> 时间：2012-06-07T20:13:02.797
> 
> 标签：android, version-control, mercurial, web-crawler

我无法确定如何在这里运行 Android Marketplace Crawler：[http ://code.google.com/p/android-marketplace-crawler/](http://code.google.com/p/android-marketplace-crawler/)

我想我只是不明白爬虫应该如何运作——首先，来源[——http](http://code.google.com/p/android-marketplace-crawler/source/checkout) ://code.google.com/p/android-marketplace-crawler/source/checkout——说我可以使用命令创建爬虫的本地副本

```
hg clone https://code.google.com/p/android-marketplace-crawler/ 
```

我应该如何运行这个命令？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:25:54.183

该`hg`命令是一个名为[Mercurial](http://mercurial.selenic.com/)的分布式版本控制系统。您将首先安装 Mercurial 命令行实用程序，然后从您的 shell（OS X 上的终端）运行给定的命令。这将检查`android-marketplace-crawler`到您当前工作目录的源代码副本。

# android - 不保存怎么拍照？

> ID：10939171
> 
> 赞同：0
> 
> 时间：2012-06-07T20:13:36.107
> 
> 标签：android, android-camera

嘿，我正在尝试使用 Android 的相机而不将图像保存到 SD 卡。我希望用户能够拍照（带预览），然后对其进行一些修改，然后选择是否保存。

现在在[这个](https://stackoverflow.com/questions/6390163/deleting-a-gallery-image-after-camera-intent-photo-taken)问题中，他们解决了在保存图像后删除图像的方法，但这对我来说似乎不是正确的选择。

我怎样才能做到这一点？

没有内置选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:37:28.520

这看起来像是从相机预览中获取图像而不创建任何文件的一个很好的示例：

[http://marakana.com/forums/android/examples/39.html](http://marakana.com/forums/android/examples/39.html)

请注意，拍摄的图像可能非常大，因此使用的内存也可能非常大。您应该考虑在这种情况下对其进行采样。

# android - TableLayout 中的图像视图

> ID：10939174
> 
> 赞同：1
> 
> 时间：2012-06-07T20:13:52.207
> 
> 标签：android, android-tablelayout

我有一个相当复杂的布局，其中包含一个相对布局的 ScrollView。RelativeLayout 包含一个充满 ImageViews 的 TableLayout。大约有40张图片。它们都是 jpeg，它们的宽度正好是 200 像素。

如果我将表格分为三列，它工作正常。但是，如果我尝试将表格布置在两列中，则第一列可以很好地显示图像，但在第二列中，图像被“截断”并且图像的最右侧部分不可见。

现在我想出的解决方法是创建一个“填充图像”，它是一个 50 像素宽和 100 像素高的矩形。我把它放在表格第一行的第三列，这使它成为一个三行表格，并将其他两列揉成一团，以便它们都可以阅读。但似乎应该有更好的方法。

这是我的 xml 的片段（这里包括第一行中的填充图像。

```
 <TableLayout
        android:id="@+id/pls_table"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@id/pl_title"
        android:shrinkColumns="*"
        android:stretchColumns="*" >

        <TableRow android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/pls_1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:adjustViewBounds="true"
                android:clickable="true"
                android:onClick="tsdetail2"
                android:scaleType="fitCenter"
                android:src="@drawable/abng_pl" />

            <ImageView
                android:id="@+id/pls_2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:adjustViewBounds="true"
                android:clickable="true"
                android:onClick="tsdetail2"
                android:scaleType="fitCenter"
                android:src="@drawable/ag_supply_pl" />

            <ImageView
                android:id="@+id/pls_fill"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:adjustViewBounds="true"
                android:scaleType="fitCenter"
                android:src="@drawable/filler_image" />
        </TableRow>

        <TableRow android:layout_height="wrap_content" >

            <ImageView
                android:id="@+id/pls_3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:adjustViewBounds="true"
                android:clickable="true"
                android:onClick="tsdetail2"
                android:scaleType="fitCenter"
                android:src="@drawable/beard_implement_pl" />

            <ImageView
                android:id="@+id/pls_4"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:adjustViewBounds="true"
                android:clickable="true"
                android:onClick="tsdetail2"
                android:scaleType="fitCenter"
                android:src="@drawable/j_r_tire_pl" />
        </TableRow> 
```

# apache - 带有变量的 Apache ErrorDocument 外部重定向

> ID：10939178
> 
> 赞同：7
> 
> 时间：2012-06-07T20:13:57.090
> 
> 标签：apache, errordocument

在 Apache 中是否可能发生这样的事情...（即重定向到外部 url，其路径导致传递 403 错误）

```
ErrorDocument 403 http://www.sample.com/{{REDIRECT_URL}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-17T15:01:27.907

`ErrorDocument`不幸的是，配置选项不支持服务器变量扩展。您可以尝试使用**本地**脚本，它将为您发出重定向。

```
ErrorDocument 403 /cgi-bin/error.cgi 
```

请注意，该脚本必须是本地的，否则您将无法通过`REDIRECT_*`变量。在脚本本身中，您可以发出重定向语句：

```
#!/usr/bin/perl
my $redirect_status = $ENV{'REDIRECT_STATUS'} || '';
my $redirect_url = $ENV{'REDIRECT_URL'} || '';

if($redirect_status == 403) {
    printf("Location: http://%s%s\n", 'www.sample.com', $redirect_url);
    printf("Status: %d\n", 302);
}
print "\n"; 
```

有关更多见解，请参阅 Apache 文档[http://httpd.apache.org/docs/2.4/custom-error.html](http://httpd.apache.org/docs/2.4/custom-error.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-27T09:56:20.410

我创建 /Publication 目录，但我希望这将由主 index.php 提供服务，因为该目录中有文件。

/Publication?page=1 将由 /index.php 提供，/Publication/file.pdf 是驻留在此目录中的文件。

Apache 返回 403 错误，因为 /Publication 目录无权列出。当您将 403 错误重定向到 /index.php 时，您无法捕获变量。我认为可以使用 REDIRECT_QUERY_STRING 变量，但这会弄乱我的 php 类。

我更改了 mod_rewrite 配置以捕获目录服务，请参阅“#”，删除 ErrorDocument 403 指令，因为不需要。

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  RewriteCond %{REQUEST_FILENAME} !-f
#  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^(.*)$ index.php?path=$1 [L,QSA]
</IfModule> 
```

我有的

```
/Publication > /index.php?path=Publication

/Publication/?page=1  > /index.php?path=Publication&page=1

/Publication/file.pdf > /Publication/file.pdf 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-16T19:44:14.377

是的！但仅从 Apache 2.4.13 开始：

> 从 2.4.13 开始，可以在指令内部使用表达式语法来生成动态字符串和 URL。

（来自[https://httpd.apache.org/docs/2.4/mod/core.html#errordocument](https://httpd.apache.org/docs/2.4/mod/core.html#errordocument)）

以下配置将导致 HTTP 302 响应：

```
ErrorDocument 403 http://www.example.com%{REQUEST_URI} 
```

请注意缺少斜线，因为以斜线`%{REQUEST_URI}`开头。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-07T20:45:39.373

我认为这是可能的，因为文档说.. [http://httpd.apache.org/docs/2.0/mod/core.html#errordocument](http://httpd.apache.org/docs/2.0/mod/core.html#errordocument)

也许是这样：

```
ErrorDocument 403 http://www.sample.com/?do=somthing 
```

# css - 无法打印 iFrame

> ID：10939179
> 
> 赞同：6
> 
> 时间：2012-06-07T20:13:57.157
> 
> 标签：css, iframe, browser, printing

[**这个问题的简化版：** ]

为什么 iFrame 有时会拒绝打印？例如，点击`print preview`这两个页面：

1.  [http://fiddle.jshell.net/gJDv4/1/show/](http://fiddle.jshell.net/gJDv4/1/show/)
2.  [http://fiddle.jshell.net/gJDv4/2/show/](http://fiddle.jshell.net/gJDv4/2/show/)

在打印预览中，iFrame 在第一个示例中可见，但在第二个示例中隐藏。[第一个](http://fiddle.jshell.net/Skfen/)和[第二个](http://fiddle.jshell.net/Skfen/1/)iFrame 之间的**唯一**代码差异是 CSS 属性 ( ) 已添加到第二个示例中的 iFrame。`margin: 20px;`

* * *

[**长（原）版：** ]

我正在构建一个预览/打印页面，该页面组装了一堆独立的 HTML 文件，这些文件引用了他们自己的样式表和 javascript 文件。

*   [http://jsfiddle.net/GJKkm/16/](http://jsfiddle.net/GJKkm/16/)

这个想法是所有文件都显示在 iFrame 中以供预览，然后在打印时，每个 iFrame（可能会跨越多个页面）打印出来，就好像它是自己的文档一样。

但是，当我打印（或打印预览）时，iFrame 要么不显示任何内容，要么只打印第一页，截断 iFrame 的剩余页面。

*   [http://fiddle.jshell.net/GJKkm/16/show/](http://fiddle.jshell.net/GJKkm/16/show/)（使用此链接打印预览，而不是上面的那个）

在我制作多页之前，iFrame 打印（和打印预览）就好了：

*   [http://fiddle.jshell.net/GJKkm/7/show/](http://fiddle.jshell.net/GJKkm/7/show/)

这种行为的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T20:24:58.140

`print()`您可以通过在其窗口上调用该函数来打印各个 iframe 中的文档....

所以像这样打印文件2：

```
$('#iframeTwo')[0].contentWindow.print() 
```

这里是一个 jsfiddle，我在其中添加了触发单个打印的按钮...

[http://jsfiddle.net/sg3s/GJKkm/17/](http://jsfiddle.net/sg3s/GJKkm/17/)

至于为什么浏览器在打印其父文档时不打印 iframe 内的内容。可能与这些文档实际上并不是它们所显示的文档的一部分这一事实有关......把它想象成一个单独的窗口（你可以`window.open()`在 js 中生成一个），然后巧妙地侵入主窗口视口限制为 iframe 上指定的任何内容的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-31T23:05:40.647

我想出了一个方法来解决它。

目的是通过使用 javascript 操作 DOM 将所有 iframe 的内容获取到父窗口中。

使用此解决方案，您甚至可以避免 iframe 超过一页时被切断的问题。

这是代码：

```
<script>

 pages =[] // initiate an empty list here

function printPage() {

var frames = document.getElementsByTagName('iframe');
// get all the iframes and loop over them
// then push their innerHTML into the list
for (var i = 0; i < frames.length; i++){ 
   pages.push(frames[i].contentWindow.document.body.innerHTML); 
;
}
if (pages && pages.length) {

// this if statement, just checks to ensure our list is not empty before running the code.

// here is the magic, we now set the parent window to be equal to all the concatenated iframes innerHTML
window.content.document.body.innerHTML = pages;
// then we print this new window that contains all the iframes
window.print();
} 
else {
// do nothing
}

}
</script> 
```

有了这个，你只会得到一个打印对话框来打印所有的 iframe。

请记住，在您的父页面 HTML 中，您将拥有以下代码来调用 printPage 函数。

```
<input type="submit" value="Print All"
  onclick="javascript:printPage()"
 /> 
```

# javascript - a4j:commandButton 在按下回车键时被调用

> ID：10939180
> 
> 赞同：1
> 
> 时间：2012-06-07T20:14:08.107
> 
> 标签：javascript, jsf

我有两个组件，一个搜索字段和一个命令按钮。命令按钮用于分隔任务。因此，当输入字段获得焦点并且用户按 Enter 键时，它应该重定向到搜索结果页面，并且不应调用命令按钮。

```
<s:span>
    <h:inputText value="#{search.input}" onkeypress="performSearch(event)"/>
    <a4j:commandButton image="icon.jpg" action="#{some action}" ajaxSingle="true">
    </a4j:commandButton>
</s:span> 
```

performSearch 是一个 javascript 函数，它调用 Enter 上的实际搜索。

现在，commandButton 的操作在输入字段上按回车键时被调用。有什么想法可以解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:32:55.290

按下回车键时`onkeypress`应该返回。`false`这将阻止回车键的默认操作。

就这样，

```
onkeypress="return performSearch(event)" 
```

有类似的东西

```
function performSearch(event) {
    // ...

    if (notEnterPressed) {
        return true;
    }

    // Perform search.
    // ...

    return false;
} 
```

# c++ - Visual Studio C++ 2010 错误 LNK2019：未解析的外部符号

> ID：10939183
> 
> 赞同：2
> 
> 时间：2012-06-07T20:14:13.470
> 
> 标签：c++, visual-studio-2010, visual-c++, linker

我正在使用 Microsoft Visual Studio C++ 2010 Express Edition，并且正在尝试使用 SDL_ttf.lib 编译 SDL 项目并收到以下错误消息：

```
1>SDL.obj : error LNK2019: unresolved external symbol _TTF_CloseFont referenced in function "void __cdecl DrawTextW(struct SDL_Surface *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,int,int,int,int,int,int,int,int,int)" (?DrawTextW@@YAXPAUSDL_Surface@@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHHHHHHHH@Z)

1>SDL.obj : error LNK2019: unresolved external symbol _TTF_RenderText_Shaded referenced in function "void __cdecl DrawTextW(struct SDL_Surface *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,int,int,int,int,int,int,int,int,int)" (?DrawTextW@@YAXPAUSDL_Surface@@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHHHHHHHH@Z)

1>SDL.obj : error LNK2019: unresolved external symbol _TTF_OpenFont referenced in function "void __cdecl DrawTextW(struct SDL_Surface *,class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >,int,int,int,int,int,int,int,int,int)" (?DrawTextW@@YAXPAUSDL_Surface@@V?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@HHHHHHHHH@Z)

1>SDL.obj : error LNK2019: unresolved external symbol _TTF_Init referenced in function "bool __cdecl Init(void)" (?Init@@YA_NXZ)

1>SDL.obj : error LNK2019: unresolved external symbol _TTF_Quit referenced in function _SDL_main 
```

我已经搜索了解决方案，但没有找到任何可以解决我的问题的方法。我没有忘记链接 SDL_ttf.lib，我也将文件夹与它链接，包含标题并将 SDL_ttf.dll 放入我的项目文件夹中。

PS 我对 SDL_image 有同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:23:34.403

通常，该错误来自未按[此处](http://msdn.microsoft.com/en-us/library/799kze2z%28v=vs.80%29.aspx)所述定义的外部对象。

像这样

```
// LNK2019b.cpp
// LNK2019 expected
struct C {
   static int s;
};

// Uncomment the following line to resolve.
// int C::s;

int main() {
   C c;
   C::s = 1;
} 
```

您可能需要定义 _TTF 对象的实际实例，例如 SDL::_TTF_XXX

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T14:34:59.987

我以前遇到过这样的错误：

> 错误 LNK2019：无法解析的外部符号 _TTF_Quit
> 错误 LNK2019：无法解析的外部符号 _SDL_Init
> 错误 LNK2019：无法解析的外部符号 _TTF_Init

因为我的项目属性`Project|Properties|Configuration Properties|Linker|Input|Additional Dependencies`丢失：“SDL.lib SDLmain.lib SDL_ttf.lib SDL_image.lib”

# asynchronous - 将 Openssl 与异步 Winsock 一起使用

> ID：10939188
> 
> 赞同：3
> 
> 时间：2012-06-07T20:14:33.170
> 
> 标签：asynchronous, openssl, winsock

我有一个异步 winsock 实现（服务器和客户端），我想将 Openssl 添加到以实现安全连接。例如，服务器将处理这些消息：

FD_ACCEPT、FD_READ、FD_WRITE 和 FD_CLOSE

我发现一篇文章提出了一种将 Openssl 添加到异步程序的方法

[http://funcptr.net/2012/04/08/openssl-as-a-filter-%28or-non-blocking-openssl%29/](http://funcptr.net/2012/04/08/openssl-as-a-filter-%28or-non-blocking-openssl%29/)

其代码如下所示：

```
 class SSLFilter {
        public:
            SSLFilter(SSL_CTX* ctxt,
                      std::string* nread,
                      std::string* nwrite,
                      std::string* aread,
                      std::string* awrite);
            virtual ~SSLFilter();

            void update();

        private:
            bool continue_ssl_(int function_return);

            SSL * ssl;
            BIO * rbio;
            BIO * wbio;

            std::string* nread;
            std::string* nwrite;
            std::string* aread;
            std::string* awrite;
    };

    SSLFilter::SSLFilter(SSL_CTX* ctxt, 
                         std::string* nread, 
                         std::string* nwrite,
                         std::string* aread,
                         std::string* awrite)
                          :
                         nread(nread), 
                         nwrite(nwrite), 
                         aread(aread), 
                         awrite(awrite)

        rbio = BIO_new(BIO_s_mem());
        wbio = BIO_new(BIO_s_mem());

        ssl = SSL_new(ctxt);

        SSL_set_accept_state(ssl);
        SSL_set_bio(ssl, rbio, wbio);
    }

    SSLFilter::~SSLFilter() {
        SSL_free(_ssl);
    }

    void SSLFilter::update(Filter::FilterDirection) {
        // If we have data from the network to process, put it the memory BIO for OpenSSL
        if (!nread->empty()) {
            int written = BIO_write(rbio, nread->c_str(), nread->length());
            if (written > 0) nread->erase(0, written);
        }

        // If the application wants to write data out to the network, process it with SSL_write
        if (!awrite->empty()) {
            int written = SSL_write(ssl, awrite->c_str(), awrite->length());

            if (!continue_ssl_()) {
                throw std::runtime_error("An SSL error occured.");
            }

            if (written > 0) awrite->erase(0, written);
        }

        // Read data for the application from the encrypted connection and place it in the string for the app to read
        while (1) {
            char *readto = new char[1024];
            int read = SSL_read(ssl, readto, 1024);

            if (!continue_ssl_()) {
                delete readto;
                throw std::runtime_error("An SSL error occured.");
            }

            if (read > 0) {
                size_t cur_size = aread->length();
                aread->resize(cur_size + read);
                std::copy(readto, readto + read, aread->begin() + cur_size);
            }

            delete readto;

            if (static_cast<size_t>(read) != 1024 || written == 0) break;
        }

        // Read any data to be written to the network from the memory BIO and copy it to nwrite
        while (1) {
            char *readto = new char[1024];
            int read = BIO_read(wbio, readto, 1024);

            if (read > 0) {
                size_t cur_size = nwrite->length();
                nwrite->resize(cur_size + read);
                std::copy(readto, readto + read, nwrite->begin() + cur_size);
            }

            delete readto;

            if (static_cast<size_t>(read) != 1024 || read == 0) break;
        }
    }

    bool SSLFilter::continue_ssl_(int function_return) {
        int err = SSL_get_error(ssl, function_return);

        if (err == SSL_ERROR_NONE || err == SSL_ERROR_WANT_READ) {
            return true;
        }

        if (err == SSL_ERROR_SYSCALL) {
            ERR_print_errors_fp(stderr);
            perror("syscall error: ");
            return false;
        }

        if (err == SSL_ERROR_SSL) {
            ERR_print_errors_fp(stderr);
            return false;
        }
        return true;
    } 
```

以下是使用此过滤器的步骤：

在程序启动时根据需要设置 SSL_CTX 结构，以便在 SSLFilter 中使用它。设置套接字/事件循环并接受（）新套接字。创建四个新的 std::string 并创建一个新的 SSLFilter，传入您创建的 SSL_CTX 和四个缓冲区。将新套接字添加到事件循环以等待读取。

现在，从事件循环接收到读取就绪状态后，应执行以下操作：

将数据读入 nread 缓冲区。调用 SSLFilter::update() 查看 aread 是否不为空，随意处理数据 根据需要写入数据到 awrite，如果数据写入 awrite，调用 SSLFilter::update(WRITE) 处理数据 查看 nwrite 是否为不为空，如果是这样，则将套接字添加到事件循环以准备写入。

从事件循环接收到写入就绪状态后，您应该执行以下操作：

将 nwrite 中的数据写入套接字。如果 nwrite 为空，则从事件循环中删除套接字以进行写入（这样您就没有事件循环通知您可以写入，即使您没有要写入的内容）。

我的问题是： * 我可以将此方法与 async winsock 一起使用吗？还是我应该考虑另一种实现？* 是否需要进行任何更改？* 我如何处理 WOULDBLOCKS？

谢谢你的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T11:38:55.933

早在 2002 年，我就为 Windows Developer Magazine 写了一篇关于此的文章，在[此处转载](http://www.lenholgate.com/blog/2002/11/using-openssl-with-asynchronous-sockets.html)。本文解释了如何将 OpenSSL 与异步 winsock 调用一起使用，并提供了与标准异步 winsock 调用一起使用且易于集成到 IOCP 样式异步调用中的代码。

# javascript - 拉斐尔的“矩阵”是什么

> ID：10939195
> 
> 赞同：20
> 
> 时间：2012-06-07T20:14:49.240
> 
> 标签：javascript, svg, raphael

我试图更好地理解 raphael.js，但我发现 raphael.js 文档有时会令人困惑，有时会有点含糊。

谁能向我解释什么是矩阵以及如何使用它？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-28T15:40:57.193

在拉斐尔的任何地方，几乎没有关于 Matrix 的好的、清晰的信息。然而，好消息是，它与 SVG 和 CSS3 中的矩阵转换几乎完全相同。

有一些关于 SVG 中矩阵变换的指南，但它们通常假设您已经了解矩阵数学。如果你不这样做没有多大用处。

然而，[在 CSS3 中有一个很好的矩阵数学指南](http://www.useragentman.com/blog/2011/01/07/css3-matrix-transform-for-the-mathematically-challenged/)。它还附带一个[矩阵构造集](http://www.useragentman.com/matrix/)（截至 2013 年 2 月，它在 Chrome 中不起作用，但在 Firefox 中起作用）。由于 CSS3 和 Raphael 矩阵变换背后的数学原理本质上是相同的，因此您可以使用此工具生成一组矩阵变换数，然后将它们应用到 Raphael 中，结果应该或多或少相同。

矩阵变换的超级快速概览：

*   这是一组 6 个数字，用于计算拉斐尔形状边界框的每个角在转换完成后的位置。在它们之间，这 6 个数字几乎可以创建任何缩放、变换、旋转和剪切效果。
*   它是 Raphael 变换的幕后引擎：Raphael 将变换转换为矩阵坐标。矩阵坐标可能会令人难以置信：除非您正在做一些极其复杂的事情，否则通常最好让它在引擎盖下完成它。
*   这是一个[**XKCD 笑话**](http://xkcd.com/184/)，说明了矩阵变换背后的 6 个数字之间的数学关系。你会觉得这很有趣，或者，它会让你相信最好让 Raphael 在幕后自己做数学......

![在此处输入图像描述](../Images/debb666a004732462285483e5fde00cc.png)

*   查看**元素的当前矩阵状态**：
    *   直接查看元素的矩阵对象：`someElement.matrix`是一个对象，每个数字由字母给出（例如`{a:1,b:0,c:0,d:1,e:0,f:0}`。直接设置这些不会改变对象（所以你不能这样做`someElement.matrix.b = 3;`）
    *   您可以使用以下方法将当前矩阵反向转换为包含转换属性的更易读的对象`someElement.matrix.split()`
    *   您还可以将矩阵反向转换为转换字符串`someElement.matrix.toTransformString();`
*   如果您需要**手动设置矩阵**，您可以通过以下方式之一进行。所有这些都从先前的变换中替换或动画：
    *   **动画（使用数组）**：`someElement.animate({transform: ['m',0.5, -0.5, 0.5, 0.5, -0.5, 0.5]}, 1000);`
    *   **即时（使用数组）**：`someElement.transform(['m',0.5, -0.5, 0.5, 0.5, -0.5, 0.5]);`
    *   **动画（使用字符串）**：`someElement.animate({transform: 'm0.5 -0.5 0.5 0.5 -0.5 0.5'}, 1000);`
    *   **即时（使用字符串）**：`someElement.transform('m0.5 -0.5 0.5 0.5 -0.5 0.5');`
*   这是默认的矩阵字符串：`1 0 0 1 0 0`. 应用它会将转换重置为其默认状态。
*   每个矩阵数字的含义很难描述。*孤立地*，`a`像 x-scale，`b`像 y-shear，`c`像 x-shear，`d`像 y-scale 一样工作，`e`并且`f`像 x 和 y 移动。但它们以数学上复杂的方式相互作用。这并不简单。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T22:58:40.367

不了解 Raphaël，但查看文档并了解其他绘图 API，我会做出一个半受过教育的猜测。

在图形（Raphaël 和其他任何地方）中，矩阵用于变换（移动、旋转等）艺术品。您会为 HTML5`canvas`元素本身找到一个类似的 API。

当您使用该`Element.transform`方法移动和旋转绘图表面时。就像在重新开始绘画之前将一张纸移到笔下一样。在内部，此类转换是使用转换矩阵完成的。这是一个非常有用的功能，虽然一开始有点神秘。事实上，这也是 3D 图形的工作方式。

此外，矩阵可以相互添加，因此您可以拥有一个水平平移的矩阵，一个垂直平移的矩阵，一个旋转的矩阵（依此类推），然后将它们加在一起以获得组合效果。

同样，我在这里推断；我不认识拉斐尔。但这是图形中矩阵的基本用途。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T23:23:52.573

此外，除了上述之外，Raphael 曾经仅限于旋转缩放平移，但随着作者将 Matrix 暴露在语法中，任何变换都可以用于 2d 图形

访问[http://www.irunmywebsite.com/raphael/additionalhelp.php](http://www.irunmywebsite.com/raphael/additionalhelp.php) 获取交互式示例 您可以通过在下拉列表中选择“矩阵”并完成这些示例进行过滤。您还可以按矩阵搜索以获取不同的示例子集。

例如，有一种名为“skew”的变换类型。如果您在页面上搜索此内容，您将看到另一个显示此内容的示例。

不要害羞矩阵，这是一个有趣的主题

在 iPod 上，所以无法超链接

# ruby - 如何防止 update_attributes！快捷回调？

> ID：10939197
> 
> 赞同：3
> 
> 时间：2012-06-07T20:14:56.353
> 
> 标签：ruby, ruby-on-rails-3

我想在保存事件之前进行检查，以便每次更新特定字段时都可以发出警报。我尝试使用“更改”来检测它，但 update_attributes 快捷方式是数据库验证，所以我无法使用更改？

例如，这会注意到变化：

```
m = Player.new
m.name = "Tom"
m.changed?  
=> true 
```

但这不会：

```
m = Player.new
m.update_attributes!(name: "John")
m.changed?  
=> false 
```

任何想法我可以如何以不同的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:20:17.333

`changed?``true`如果您的对象上存在非持久更改，则返回。在您致电后，该对象是最新的——因此`false`返回。检查`ActiveModel::Dirty`模块，其中有几个实用程序来处理对象的更改。`previous_changes`可以做到这一点，也许有更适合您的用例的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T20:22:04.510

请记住，这`changed?`是指自上次保存点以来所做的更改。调用`update_attributes!`具有保存它并应用您的更改的效果。

该`changed?`方法和相关调用将只返回尚未保存的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:30:24.777

你可以使用

```
m.attributes = {name: "John"} 
```

# opengl - 将 OpenGL 4 矩阵转换为 VRML T*R*S

> ID：10939200
> 
> 赞同：2
> 
> 时间：2012-06-07T20:15:20.353
> 
> 标签：opengl, 3d, linear-algebra, vrml, x3d

我正在尝试将场景从直接模式 OpenGL 程序导出到 VRML。

在 OpenGL 和 VRML 中，可以将面分组为具有自己相对于场景原点的平移、旋转和缩放的对象。

在 OpenGL 中，这些存储为一个 4 矩阵，表示一个矩阵中的平移和旋转/缩放[[1]](http://www.songho.ca/opengl/gl_transform.html)。在 VRML 中，这些必须表示为单独的平移、旋转和缩放向量[[2]](http://graphcomp.com/info/specs/sgi/vrml/spec/part1/concepts.html#CoordinateSystems) [[3]](http://graphcomp.com/info/specs/sgi/vrml/spec/part1/nodesRef.html#Transform)。

如何以这种方式分解任意 4 矩阵？

我更喜欢使用库函数来执行此操作，以最大限度地减少我必须维护的代码并减少出错的机会。我在 Windows 上使用 C#，可以访问任何 CLR 或 Windows 本机 DLL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:46:13.213

看看Monogame 源[代码](https://github.com/mono/MonoGame/blob/develop/MonoGame.Framework/Matrix.cs#L2081)中的 Matrix.Decompose 代码。

[请记住](http://www.mindcontrol.org/~hplus/graphics/matrix-layout.html)- OpenGL 矩阵是列优先的，而 DirectX/XNA 是行优先的。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:17:10.903

> 如何以这种方式分解任意 4 矩阵？

变换的最右边一列是平移向量**T**。

提取比例和旋转有点复杂。您需要找到旋转轴和旋转角度。基本上你在这里处理一个特征向量问题：找到在矩阵变换下不变的向量。这就是特征向量的情况。旋转是正交变换。因此，旋转矩阵的任何非正常部分都是缩放。*您可以通过首先对矩阵进行正交归*一化来提取此缩放，从而产生缩放因子**S**。最后，您可以解决特征向量问题以找到两个反平行特征向量，即旋转轴。相应的特征值指定旋转的 cos(α)，它为您提供旋转轴和角度**R。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-11T17:01:51.830

SFMatrix4f/d 和 SFMatrix3/d 具有在其组件中分解矩阵的内置函数。这是规范中的页面：[http](http://www.web3d.org/documents/specifications/19777-1/V3.0/Part1/functions.html#t-Matrix4Functions) ://www.web3d.org/documents/specifications/19777-1/V3.0/Part1/functions.html#t-Matrix4Functions 。

在 JavaScript 中，您可以键入：

```
function foo (matrix4f)
{
   var translation = new SFVec3f ();
   var rotation    = new SFRotation ();
   var scale       = new SFVec3f ();

   matrix4f .getTransform (translation, rotation, scale);
} 
```

一些浏览器支持作为第四个和第五个参数来 getTransform 一个 scaleOrientation 和 center 参数。

# android - Adobe Flex Mobile 4.6 - 从浏览器启动应用程序

> ID：10939203
> 
> 赞同：1
> 
> 时间：2012-06-07T20:15:34.623
> 
> 标签：android, ios, apache-flex, mobile, air

我正在尝试开始开发我的公司在 Adob​​e AIR 中开发的 Flex Mobile 应用程序（使用 Flash Builder）。该应用程序最初将针对 iPhone 和 Android 发布，最终还将针对 BlackBerry PlayBook 平板电脑发布。

但是，其中一个要求是我们需要能够从设备上的浏览器启动应用程序，并将参数传递给它。

我不确定我做错了什么，但我无法让它发挥作用。我已将以下代码块放在 Android 部分。我目前只是在使用 Android 进行初步测试。将 APK 放到 Android 设备上很容易，我这里有一个。

```
 <application>
                <activity android:name=".MyUriActivity">
                    <intent-filter>
                        <action android:name="android.intent.action.VIEW" />
                        <category android:name="android.intent.category.DEFAULT" />
                        <category android:name="android.intent.category.BROWSABLE" />
                        <data android:scheme="myapp" android:host="path" /> 
                    </intent-filter> 
                </activity> 
            </application> 
```

我也有处理事件的代码：

```
import mx.events.FlexEvent;

        protected function application_preinitializeHandler(event:FlexEvent):void
        {
            NativeApplication.nativeApplication.addEventListener(
                InvokeEvent.INVOKE, onInvoke);
        }

        private function onInvoke(event:InvokeEvent):void
        {
            // You can parse argument value from event.arguments property
            Text1.text = "Arguments: " + event.arguments;
        } 
```

allowBrowserInvocation 标志设置为 true。

I tried creating a test HTML page with the following links, but I just get a "Webpage not available" message in the Android browser.

```
<a href="myapp:">myapp:</a>

<br><br>

<a href="myapp:#Intent;action=android.intent.action.view;end">click to load apk</a> 
```

I've read all of the following posts, but I'm still having trouble. Can someone please help me out? What am I missing?

[How to register some URL namespace (myapp://app.start/) for accessing your program by calling a URL in browser in Android OS?](https://stackoverflow.com/questions/2430045/how-to-register-some-url-namespace-myapp-app-start-for-accessing-your-progr/2430468#2430468)

[How to implement my very own URI scheme on Android](https://stackoverflow.com/questions/2448213/how-to-implement-my-very-own-uri-schema-on-android)

[Open a Native AIR app via URL?](https://stackoverflow.com/questions/8956316/open-a-native-air-app-via-url)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T14:11:17.870

Okay...I'm not sure what I did, maybe the break I took for a glass of water helped. But when I just tried it again, it works.

I cleared out the manifest section, and tried again, with the example from this site:

[http://dreamingwell.com/articles/archives/2011/06/flex-mobile-cus-2.php](http://dreamingwell.com/articles/archives/2011/06/flex-mobile-cus-2.php)

And now it works...but I thought I tried that already...

(Moved from comments to an actual answer, now that StackOverflow is allowing me to do so)

# javascript - javascript错误[未定义jsonFlickrApi]

> ID：10939206
> 
> 赞同：2
> 
> 时间：2012-06-07T20:15:47.093
> 
> 标签：javascript, json, api, flickr

我调用了一个 FlickrAPI，它返回`xmlhttp.responseText`如下所示：

```
jsonFlickrApi({"photos":{"page":1, "pages":200, "perpage":100, "total":"19934",
 "photo":[{"id":"7315581986", "owner":"62691288@N00", "secret":"504915125a", 
"server":"7090", "farm":8, "title":"China, Tiananmen Square", "ispublic":1,
 "isfriend":0, "isfamily":0}, {"id":"7308693706",
... 
```

我尝试像这样解析它：

```
var jsonResponse = xmlhttp.responseText ;
jsonResponse = eval("("+jsonResponse + ")");
var output += jsonResponse.photos.photo[1].id ;
alert(output); 
```

萤火虫告诉我：`jsonFlickrApi is not defined`

*   为什么我会收到此错误消息？

*   为什么我必须首先使用'eval'？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T20:51:45.053

似乎您得到了对您的请求的[JSONP](http://en.wikipedia.org/wiki/JSONP)响应，而不是 JSON 响应。[JSONP](http://en.wikipedia.org/wiki/JSONP)是一个 JSON 对象，包装在一个函数调用中。所以只需定义函数`jsonFlickrApi`，它会在响应可用时调用：

```
function jsonFlickrApi (response) {
  console.log(
     "Got response from Flickr-API with the following photos: %o", 
     response.photos
  );
  // Handle the response here. I.E update the DOM, trigger event handlers etc.
}

// Later in your XMLHttpRequest code:
var jsonResponse = xmlhttp.responseText ;
// This will call the jsonFlickrApi-function.
eval("("+jsonResponse + ")"); 
```

# java - Java中的文本到语音转换

> ID：10939207
> 
> 赞同：0
> 
> 时间：2012-06-07T20:15:56.293
> 
> 标签：java, text-to-speech

我目前正在创建一个多语种词典。我也在考虑为其添加发音功能。

我需要知道在 Java 中是否有一些功能可以做到这一点。我想要的是一些将单词作为参数并说出来的函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:38:47.270

如果您想要更接近正确发音的东西，您可能想尝试 Google Text-to-Speech（假设您的应用程序可以自由访问网络）。虽然没有官方 API，但使用起来相当简单：

只需请求：

```
http://translate.google.com/translate_tts?tl=en&q=[TEXT] 
```

这将返回音频/mpeg 文件。

[http://techcrunch.com/2009/12/14/the-unofficial-google-text-to-speech-api/](http://techcrunch.com/2009/12/14/the-unofficial-google-text-to-speech-api/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:08:43.803

您可能需要考虑研究一个[Java Speech API 。](http://java.sun.com/products/java-media/speech/reference/api/index.html)我个人从未使用过它，但它可能是一个不错的起点。

# .net - 根据他的父母设置用户控制位置

> ID：10939208
> 
> 赞同：0
> 
> 时间：2012-06-07T20:15:58.523
> 
> 标签：.net, winforms, user-controls

我可以根据用户控件的表单设置 Top 和 Left 属性，这样我就不需要去控件的每个实例来设置它了吗？

```
ucBar.Left = (Me.ClientSize.Width - ucBar.Width) - 12
ucBar.Top = 12 
```

我希望 uc 位于表单的右上角，这就是我在表单上设置它的方式。但是我对太多表格有这个控制，无法打开每个表格并添加这条拖线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:32:54.197

为了在您将 UC 放在表单上时发生这种情况：

```
ucBar.ParentChanged += new EventHandler(ucBar_ParentChanged); 
```

和：

```
void ucBar_ParentChanged(object sender, EventArgs e)
{
    //Do that stuff here.
} 
```

# image-processing - 用于原始二进制文件的 opencv

> ID：10939211
> 
> 赞同：1
> 
> 时间：2012-06-07T20:16:19.493
> 
> 标签：image-processing, opencv, computer-vision

我有一个文件，它使用 opencv 将拜耳过滤器应用于图像到黑白图片以赋予它 RGB 值。当我运行一个 16 位无符号整数图像时一切正常，但是当我运行一个 8 位无符号整数时，我得到以下错误代码：

```
OpenCV Error: Unspecified error (could not find a writer for the specified extension) in imwrite_, file /build/buildd/opencv-2.3.1/modules/highgui/src/loadsave.cpp, line 276
terminate called after throwing an instance of 'cv::Exception'
  what():  /build/buildd/opencv-2.3.1/modules/highgui/src/loadsave.cpp:276: error: (-2) could not find a writer for the specified extension in function imwrite_ 
```

你知道我可以下载任何插件或扩展来处理更多图像类型吗？我正在使用 Ubuntu 命令行运行程序，处理程序是用 C++ 编写的。我使用 python 成像库进行了初始处理以将其从 16 位无符号整数更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:25:15.573

在运行之前，您总是可以编写将 8 位`unsigned int`图像转换为 16 位的代码。[这篇文章](https://stackoverflow.com/questions/6909464/convert-16-bit-depth-cvmat-to-8-bit-depth)告诉你如何，小菜一碟！`unsigned int`

# python - 如何计算最近的半正定矩阵？

> ID：10939213
> 
> 赞同：23
> 
> 时间：2012-06-07T20:16:21.817
> 
> 标签：python, matrix, numpy

我从 R 开始使用 Python，并尝试使用 Python 重现我习惯于在 R 中做的许多事情。R 的 Matrix 库有一个非常漂亮的函数，称为`nearPD()`找到最接近给定矩阵的正半正定 (PSD) 矩阵。虽然我可以编写一些代码，但作为 Python/Numpy 的新手，如果已经存在某些东西，我不会对重新发明轮子感到太兴奋。关于 Python 中现有实现的任何提示？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-07T21:40:03.380

我不认为有一个库可以返回你想要的矩阵，但这里是 Higham (2000) 的近东正半定矩阵算法的“只是为了好玩”编码

```
import numpy as np,numpy.linalg

def _getAplus(A):
    eigval, eigvec = np.linalg.eig(A)
    Q = np.matrix(eigvec)
    xdiag = np.matrix(np.diag(np.maximum(eigval, 0)))
    return Q*xdiag*Q.T

def _getPs(A, W=None):
    W05 = np.matrix(W**.5)
    return  W05.I * _getAplus(W05 * A * W05) * W05.I

def _getPu(A, W=None):
    Aret = np.array(A.copy())
    Aret[W > 0] = np.array(W)[W > 0]
    return np.matrix(Aret)

def nearPD(A, nit=10):
    n = A.shape[0]
    W = np.identity(n) 
# W is the matrix used for the norm (assumed to be Identity matrix here)
# the algorithm should work for any diagonal W
    deltaS = 0
    Yk = A.copy()
    for k in range(nit):
        Rk = Yk - deltaS
        Xk = _getPs(Rk, W=W)
        deltaS = Xk - Rk
        Yk = _getPu(Xk, W=W)
    return Yk 
```

当对论文中的示例进行测试时，它会返回正确的答案

```
print nearPD(np.matrix([[2,-1,0,0],[-1,2,-1,0],[0,-1,2,-1],[0,0,-1,2]]),nit=10)
[[ 1\.         -0.80842467  0.19157533  0.10677227]
 [-0.80842467  1\.         -0.65626745  0.19157533]
 [ 0.19157533 -0.65626745  1\.         -0.80842467]
 [ 0.10677227  0.19157533 -0.80842467  1\.        ]] 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-08-30T22:03:00.547

我会提交一个非迭代的方法。这是从[Rebonato 和 Jackel (1999)](http://www.quarchome.org/correlationmatrix.pdf)（第 7-9 页）略微修改的。迭代方法可能需要很长时间来处理超过几百个变量的矩阵。

```
import numpy as np

def nearPSD(A,epsilon=0):
   n = A.shape[0]
   eigval, eigvec = np.linalg.eig(A)
   val = np.matrix(np.maximum(eigval,epsilon))
   vec = np.matrix(eigvec)
   T = 1/(np.multiply(vec,vec) * val.T)
   T = np.matrix(np.sqrt(np.diag(np.array(T).reshape((n)) )))
   B = T * vec * np.diag(np.array(np.sqrt(val)).reshape((n)))
   out = B*B.T
   return(out) 
```

[代码是从这里](http://statsadventure.blogspot.com/2011/12/non-pd-matrices-in-r-cont.html)围绕 R 中的非 PD/PSD 矩阵的讨论中修改的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-07-25T12:50:54.197

这可能是对考虑相关矩阵和协方差矩阵的 DomPazz 答案的愚蠢扩展。如果您要处理大量矩阵，它也会提前终止。

```
def near_psd(x, epsilon=0):
    '''
    Calculates the nearest postive semi-definite matrix for a correlation/covariance matrix

    Parameters
    ----------
    x : array_like
      Covariance/correlation matrix
    epsilon : float
      Eigenvalue limit (usually set to zero to ensure positive definiteness)

    Returns
    -------
    near_cov : array_like
      closest positive definite covariance/correlation matrix

    Notes
    -----
    Document source
    http://www.quarchome.org/correlationmatrix.pdf

    '''

    if min(np.linalg.eigvals(x)) > epsilon:
        return x

    # Removing scaling factor of covariance matrix
    n = x.shape[0]
    var_list = np.array([np.sqrt(x[i,i]) for i in xrange(n)])
    y = np.array([[x[i, j]/(var_list[i]*var_list[j]) for i in xrange(n)] for j in xrange(n)])

    # getting the nearest correlation matrix
    eigval, eigvec = np.linalg.eig(y)
    val = np.matrix(np.maximum(eigval, epsilon))
    vec = np.matrix(eigvec)
    T = 1/(np.multiply(vec, vec) * val.T)
    T = np.matrix(np.sqrt(np.diag(np.array(T).reshape((n)) )))
    B = T * vec * np.diag(np.array(np.sqrt(val)).reshape((n)))
    near_corr = B*B.T    

    # returning the scaling factors
    near_cov = np.array([[near_corr[i, j]*(var_list[i]*var_list[j]) for i in xrange(n)] for j in xrange(n)])
    return near_cov 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-28T09:39:53.170

我知道这个线程很旧，但是这里提供的解决方案对我的协方差矩阵并不满意：转换后的矩阵看起来总是与原始矩阵大不相同（至少对于我测试的情况）。因此，基于此答案中提供的解决方案，我将在这里留下一个非常简单的[答案](https://math.stackexchange.com/a/1380345/537140)：

```
import numpy as np

def get_near_psd(A):
    C = (A + A.T)/2
    eigval, eigvec = np.linalg.eig(C)
    eigval[eigval < 0] = 0

    return eigvec.dot(np.diag(eigval)).dot(eigvec.T) 
```

这个想法很简单：我计算对称矩阵，然后进行特征分解以获得特征值和特征向量。我将所有负特征值归零并构造回矩阵，该矩阵现在将是半正定的。

为了完整起见，我留下一个简单的代码来检查矩阵是否使用 numpy 是半正定的（基本上检查所有特征值是否都是非负的）：

```
def is_pos_semidef(x):
    return np.all(np.linalg.eigvals(x) >= 0) 
```

# php - 致命错误：未捕获的异常“PDOException”和消息“找不到驱动程序”

> ID：10939214
> 
> 赞同：0
> 
> 时间：2012-06-07T20:16:24.030
> 
> 标签：php, mysql, database, pdo, xampp

我是 Web 开发的新手，今天，就像我在本地服务器上练习（使用 XAMPP Apache 和 MySQL 服务）一样，我收到了以下错误消息：

```
 Fatal error: Uncaught exception 'PDOException' with message 'could not find driver' in C:\xampp\htdocs\blog\resources\query functions.php:3 Stack trace: #0 C:\xampp\htdocs\blog\resources\query functions.php(3): PDO->__construct('dblib:host=loca...', 'admin', 'root') #1 C:\xampp\htdocs\blog\resources\main.php(23): include('C:\xampp\htdocs...') #2 {main} thrown in C:\xampp\htdocs\blog\resources\query functions.php on line 3 
```

`C:\xampp\htdocs\blog that includes main.php`from中有 index.php 文件`C:\xampp\htdocs\blog\resources`，然后 main.php 在同一目录中包含另一个名为`queryfunctions.php`. main.php 只有一行代码，即包含`queryfunctions.php`. 然后在那个文件中我写了这个：

```
$database = new PDO('dblib:host=localhost;dbname=test;charset=UTF-8', "admin", "root"); 
```

然后每当我去测试它时它都会给我错误。我已经阅读了几个问题和答案，但没有任何帮助。在我的 PHP 信息中，这些是安装的 PDO 驱动程序：`mysql, odbc, sqlite, sqlite2`.

> MySQL 的 PDO 驱动程序：客户端 API 版本 mysqlnd 5.0.8-dev - 20102224 - $Revision: 310735 $。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:19:38.290

If you are trying to connect to MySQL, use the MySQL connection string:

```
$database = new PDO('mysql:host=localhost;dbname=test', "admin", "root"); 
```

The `dblib` driver you are using is for Microsoft SQL and Sybase. If you are using XAMPP, chances are you are using MySQL not Microsoft SQL. If you are using Microsoft SQL, you will need to download and install it: [http://www.php.net/manual/en/ref.pdo-dblib.php](http://www.php.net/manual/en/ref.pdo-dblib.php)

# javascript - Javascript：如何将数组值作为参数传递给要使用 Function::arguments 读取的函数

> ID：10939216
> 
> 赞同：3
> 
> 时间：2012-06-07T20:16:33.250
> 
> 标签：javascript

我承认，这个问题看起来很奇怪。

我想在 javascript 中计算数组数组的笛卡尔积以下函数（来自[https://stackoverflow.com/questions/4796678/javascript-golf-cartesian-product](https://stackoverflow.com/questions/4796678/javascript-golf-cartesian-product)）为我执行此操作：

```
function cartesianProductOf() {
  return Array.prototype.reduce.call(arguments, function(a, b) {
    var ret = [];
    a.forEach(function(a) {
      b.forEach(function(b) {
        ret.push(a.concat([b]));
      });
    });
    return ret;
  }, [[]]);
} 
```

但是，它需要这样调用： `product([1, 2, 3], [4], [5, 6]); # => [[1, 4, 5], [1, 4, 6], [2, 4, 5], [2, 4, 6], [3, 4, 5], [3, 4, 6]]`

但我所拥有的是一个维度未知的数组数组，按照上面的例子可以说：

`var arrOfArr = [[1, 2, 3], [4], [5, 6]];`

当我事先不知道数组的 nr 时，我如何将`arrOfArr`（如在单个数组中）的内容作为多个参数传递给函数？`Product``arrOfArr`

即： product(arrOfArr) 显然不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:24:10.850

嗯，通常情况下，写完问题后你就知道答案了；）`cartesianProductOf.apply(null,arrOfArr);`

# javascript - Javascript Cookie Redirect

> ID：10939217
> 
> 赞同：1
> 
> 时间：2012-06-07T20:16:33.607
> 
> 标签：javascript, redirect, cookies

When people type in my URL, I want them to click North Carolina or Virginia. After they click, it redirects them to either www.myurl.com/nc or www.myurl.com/va. After they answer that question, next time they visit my site, it will redirect them to the appropriate page without clicking NC or VA again. Here's what I've got so far. I feel like I'm close, but I honestly have no clue what I'm doing.

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
<head> 
   <title></title> 
</head>
<body> 
   <a href="#" onClick="window.location = "http://www.myurl.com/nc"" value="nc">North Carolina</a>
   <br />
   <br /> 
   <a href="#" onClick="window.location = "http://www.myurl.com/va"" value="va">Virginia</a> 
   <script type="text/javascript" src="script.js"></script> 
   <script type="text/javascript">
      function setCookie {
         document.body.style.state = size; 
         createCookie('state', size, 90);
      }
      var state = readCookie('state'); 
      if (state !== null)
      { 
         // cookie exists setCookie(state);
      } 
    </script> 
</body> 
</html> 
```

I also have separate script file with the following code:

```
// JavaScript Document 
function createCookie(name,value,days) {
    if (days) {
       var date = new Date(); 
       date.setTime(date.getTime()+(days*24*60*60*1000));   
       var expires = "; 
       expires="+date.toGMTString(); 
    } else var expires = "";
    document.cookie = name+"="+value+expires+";
    path=/"; 
}
function readCookie(name) { 
    var nameEQ = name + "=";
    var ca = document.cookie.split(';'); 
    for(var i=0;i < ca.length;i++) {
        var c = ca[i]; 
        while (c.charAt(0)==' ')
           c = c.substring(1,c.length); 
        if (c.indexOf(nameEQ) == 0) 
           return c.substring(nameEQ.length,c.length);
    } 
    return null; 
} 
function eraseCookie(name) {
    createCookie(name,"",-1);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:39:35.190

```
onClick="window.location = "http://www.myurl.com/nc"" 
```

是错误的，因为双引号中有双引号。使里面的单引号（`'`）。当用户点击一个链接时，它应该调用一个带有用户想要访问哪个站点的参数的 javascript 函数。

```
// state will be wither "nc" or "va"
function redirect(state) {
    createCookie('state', state, 90);
    window.location.href = "http://www.myurl.com/" + state;
} 
```

将来，如果 cookie 已经设置，请使用与上述函数相同的方法重定向用户。

# android - 广播和意图过滤器

> ID：10939220
> 
> 赞同：1
> 
> 时间：2012-06-07T20:16:35.840
> 
> 标签：android, service, android-activity, broadcast, intentfilter

服务发送此广播：

```
Intent _broadcast = new Intent();
_broadcast.setAction("it.lorenzoff.uselesssoftware");
sendBroadcast(_broadcast); 
```

为什么我在***不同包***中的 Activity 没有启动？在第二个包中，我将活动声明如下：

```
<activity
  android:name=".FunnyActivity"
  android:launchMode="singleInstance" 
  android:clearTaskOnLaunch="true" >        
  <intent-filter>
    <action android:name="it.lorenzoff.uselesssoftware" />
  </intent-filter>      
</activity> 
```

我必须声明一个 BroadcastReceiver 来管理这个意图吗？但我只想开始一个活动......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:19:57.460

是的。您需要创建一个 BroadcastReceiver 来捕获此意图，然后启动活动。

现在你调用 sendBroadcast(intent) 但是，你的 Activity 的意图过滤器不会得到这个。它只获得 startActivity(intent)。

# github - github上拉不了

> ID：10939221
> 
> 赞同：0
> 
> 时间：2012-06-07T20:16:38.247
> 
> 标签：github

我按照[github setup 上](https://help.github.com/articles/create-a-repo)的说明进行操作。一切都很顺利，直到我进入“git push origin master”。

当我输入时，我收到了错误消息：

```
**To https://github.com/anc1revv/Dash-Website.git
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'https://github.com/anc1revv/Dash-Website.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details.* 
```

然后我输入“git pull”并得到错误：

```
warning: no common commits

remote: Counting objects: 3, done.

remote: Total 3 (delta 0), reused 0 (delta 0)

Unpacking objects: 100% (3/3), done.

From https://github.com/anc1revv/Dash-Website
 * [new branch]      master     -> origin/master

You asked me to pull without telling me which branch you
want to merge with, and 'branch.master.merge' in
your configuration file does not tell me, either. Please
specify which branch you want to use on the command line and
try again (e.g. 'git pull <repository> <refspec>').

See git-pull(1) for details.
If you often merge with the same branch, you may want to
use something like the following in your configuration file:
    [branch "master"]
    remote = <nickname>
    merge = <remote-ref>
    [remote "<nickname>"]
    url = <url>
    fetch = <refspec>
See git-config(1) for details." 
```

有什么建议么？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:26:15.700

嗯。git repo 和你的 repo 是不同的，没有任何共同点。这就是它失败的原因。我建议你先重做 github 的东西和 CLONE，看看你得到了什么。

# java - Why would JAXB generate single List > field from two fields in the Schema?

> ID：10939225
> 
> 赞同：1
> 
> 时间：2012-06-07T20:16:48.913
> 
> 标签：java, jaxb, xsd

Why would this Schema:

```
<xsd:complexType name="ErrType">
<xsd:sequence minOccurs="0" maxOccurs="unbounded">
 <xsd:element name="errorCode" type="xsd:string"/>
 <xsd:element name="errorDescription" type="xsd:string"/>
</xsd:sequence>
</xsd:complexType> 
```

Generate to this Java code:

```
class ErrType {
  @XmlElementRefs({
    @XmlElementRef(name = "errorCode", namespace = "http://somewhere/blah.xsd", type = JAXBElement.class),
    @XmlElementRef(name = "errorDescription", namespace = "http://somewhere/blah.xsd", type = JAXBElement.class)
  })
  protected List<JAXBElement<String>> errorCodeAndErrorDescription;
  // ... 
} 
```

I would have expected something more like:

```
class ErrType extends ArrayList<ErrTypeEntry> {}
class ErrTypeEntry {
  protected String errorCode
  protected String errorDescription;
} 
```

Okay, so I guess the answer is: because it does. Combining two fields into a single one seems very undesirable. It removed important structure unnecessarily.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:50:50.717

我的猜测是，您必须将架构写得更像这样，才能（结构上）更接近您的期望：

```
<xsd:complexType name="ErrTypeEntry">
  <xsd:sequence>
    <xsd:element name="errorCode" type="xsd:string"/>
    <xsd:element name="errorDescription" type="xsd:string"/>
  </xsd:sequence>
</xsd:complexType>

<xsd:complexType name="Errors">
  <xsd:sequence>
    <xsd:element name="error" type="ErrTypeEntry" minOccurs="0" maxOccurs="unbounded"/>
  </xsd:sequence>
</xsd:complexType> 
```

# asp.net - ASP.NET Gridview 列没有 ID？

> ID：10939228
> 
> 赞同：5
> 
> 时间：2012-06-07T20:17:12.360
> 
> 标签：asp.net, gridview

我希望能够`GridView`使用我分配的唯一标识符来控制代码隐藏中列的可见性。这样，我可以动态决定要显示和隐藏哪些列，而且我不必每次添加新列时都更改代码。

我想到的最好的方法是使用`HeaderText`列作为唯一标识符，并创建一个循环遍历所有`DataControlField`对象的函数`GridView.Columns`，搜索请求的 HeaderText。

尽管`DataControlField`对象不能具有可以像`GridView.Columns["AssignableID"]`. 是否存在`DataControlField`不能以这种方式工作的 ID 属性的编程原因，或者它只是一个不存在的功能？

我的问题更多是关于它不存在的原因，而不是隐藏列问题的实际解决方案，但如果有人有更好的方法来实现这一点，我将不胜感激。

根据请求，以下是通过 HeaderText 进行搜索的示例：

```
protected DataControlField GetColumn(GridView grid, string columnName)
{
    foreach (DataControlField column in grid.Columns)
    {
        if (column.HeaderText == columnName)
        {
            return column;
        }
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:22:09.867

首先，我就在你身边。我也认为这样的代码

```
myGridView.Columns[0].Visible = false; 
```

与（伪代码）相比，可读性较差且更容易出错：

```
myGridView.Columns["UserName"].Visible = false; 
```

因此，您的问题为什么没有`ID`财产`DataControlField`是有道理的。

正如我已经评论过的：

> 显式声明的列字段可以与自动生成的列字段结合使用。当两者都使用时，首先呈现显式声明的列字段，然后是自动生成的列字段。自动生成的列字段**不会添加到 Columns 集合**中。

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.columns.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.columns.aspx)

我假设以上以及存在不同类型的事实`DataControlFields`like [`TemplateField`](http://msdn.microsoft.com/en-us/library/kzy6wxz7%28v=vs.100%29)，[`BoundField`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.aspx)或者[`ButtonField`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.buttonfield.aspx)是没有`ID`属性的原因，因为它是不可预测的。其中一些是手动添加的（以声明方式或以编程方式），另一些可能是自动添加的（fe `ButtonFields`，ID 将自动生成），一些包含在[`Columns`集合](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.columns.aspx)中，而另一些则不包含，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-21T09:35:59.487

ASP.NET 网格视图列没有可在代码中访问的 ID 或唯一值。

我们可以使用索引或名称。

例如：

使用索引：

```
 if(Grid.Columns[0].Visible == true)  
    Grid.Columns[0].Visible = false;

 if(Grid.Columns[0].Visible == false)  
    Grid.Columns[0].Visible = true; 
```

使用名称：

```
 if(Grid.Columns["ColumnName"].Visible == true)  
    Grid.Columns["ColumnName"].Visible = false;

 if(Grid.Columns["ColumnName"].Visible == false)  
    Grid.Columns["ColumnName"].Visible = true; 
```

# java - itext to convert xhtml to pdf

> ID：10939237
> 
> 赞同：2
> 
> 时间：2012-06-07T20:18:06.577
> 
> 标签：java, pdf, xhtml, itext

I have a XHTML file with text fields and check boxes; when i am trying to convert my xhtml to pdf using ITextRenderer; iText is dropping form fields (like checkboxes and text boxes in pdf).

my code looks

```
ITextRenderer renderer = new ITextRenderer ();
renderer.setDocument(new File("input.xhtml").toURI().toURL.toString());
renderer.layout();
renderer.createPDF("outputstream"); 
```

Can some one provide sample code snippet to handle the above scenario using iText; i am using iText 5.1.3 version.

My XHTML looks like

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <title>FULL</title>
      <style media="screen" type="text/css">
                    fieldset table { width:98%;border: 1px groove; margin:0 auto; }
                    fieldset table  tr { border: 1px groove; }
                    fieldset table  th { border: 1px groove; }
                    fieldset table  td { border: 1px groove; }
                    fieldset &gt; table [id=inspectionStatus] thead {border: 1px groove;background:#446BEC;text-align:center;}
                    fieldset &gt; table [id=inspectionStatus]  tr { border: 1px groove; }
                    fieldset &gt; table [id=inspectionStatus]  th { border: 1px groove; }
                    fieldset &gt; table [id=inspectionStatus]  td { border: 1px groove; }
                    fieldset table thead {border: 1px groove;background:#446BEC;text-align:center;}
                    fieldset table tbody tr th {text-align:left;background:#C6DEFF;width:28%}
                    fieldset table tbody tr td {text-align:center} [type=text] {margin-left:5%;} *[type=text]{width:90%;} 
                    fieldset table tbody tr td [type=checkbox] {margin:0 auto;} *[type=checkbox]{width:90%;} 
                    fieldset table caption {font-weight:bold;color:#0840F8;}
                    fieldset {width:98%;font-weight:bold;border:1px solid #446BEC;}
                </style>
   </head>
   <body>
     <fieldset id="PersonTable">
         <legend>Person Information</legend>
         <table id="PersonDisplay">
            <thead>
               <tr>
                  <th>Identifier</th>
                  <th>Name</th>
                  <th>Comment</th>
                  <th>Pass</th>
                  <th>Fail</th>
               </tr>
            </thead>
            <tbody>
               <tr>
                  <td>1234</td>
                  <td> William Jones</td>
                  <td>
                     <input type="text"/>
                  </td>
                  <td>
                     <input type="checkbox"/>
                  </td>
                  <td>
                     <input type="checkbox"/>
                  </td>
               </tr>
            </tbody>
         </table>
      </fieldset>
   </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-09-04T07:28:53.617

最简单的方法是使用 pdfHTML。它是一个 iText7 附加组件，可将 HTML5 (+CSS3) 转换为 pdf 语法。

代码非常简单：

```
 HtmlConverter.convertToPdf(
        "<b>This text should be written in bold.</b>", // html to be converted
        new PdfWriter(
            new File("C://users/lsamudrala/output.pdf")  // destination file
        )
    ); 
```

要了解更多信息，请访问[http://itextpdf.com/itext7/pdfHTML](http://itextpdf.com/itext7/pdfHTML)

# asp.net-mvc-4 - visual studio 2012 RC 无法加载类型 System.Web.Http.RouteParameter

> ID：10939239
> 
> 赞同：12
> 
> 时间：2012-06-07T20:18:10.990
> 
> 标签：asp.net-mvc-4, .net-4.5, visual-studio-2012

我的 PC 上安装了 VS 11 Beta、.net 4.5 和 MVC 4 beta。我刚刚下载了最新的 RC，现在当我尝试运行 Web 项目时收到此错误消息。我尝试重新安装 .net 4.5 并卸载并重新安装 VS 12 RC，但这并没有奏效。[我在这里](http://www.christophdebaene.com/blog/2012/04/06/building-the-source-code-of-asp-net-web-api/)尝试了这个建议，但也没有用。

**堆**

```
Could not load type 'System.Web.Http.RouteParameter' from assembly 'System.Web.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.TypeLoadException: Could not load type 'System.Web.Http.RouteParameter' from assembly 'System.Web.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.

Source Error:

Line 26:                 defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
Line 27:             );
Line 28:         }
Line 29:     }
Line 30: }

Source File: c:\projects\testNew\testNew\App_Start\RouteConfig.cs    Line: 28

Stack Trace:

[TypeLoadException: Could not load type 'System.Web.Http.RouteParameter' from assembly 'System.Web.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.]
   testNew.RouteConfig.RegisterRoutes(RouteCollection routes) in c:\projects\testNew\testNew\App_Start\RouteConfig.cs:28
   testNew.MvcApplication.Application_Start() in c:\projects\testNew\testNew\Global.asax.cs:25

[HttpException (0x80004005): Could not load type 'System.Web.Http.RouteParameter' from assembly 'System.Web.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.]
   System.Web.HttpApplicationFactory.EnsureAppStartCalledForIntegratedMode(HttpContext context, HttpApplication app) +9841101
   System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +118
   System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +172
   System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +336
   System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +296

[HttpException (0x80004005): Could not load type 'System.Web.Http.RouteParameter' from assembly 'System.Web.Http, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9850940
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +101
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +254

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.17626 
```

**编辑 6**

我使用`fuslogvw`并发现该项目是`System.Web.Http.dll`从这里引用的

```
C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Web.Http\v4.0_4.0.0.0__31bf3856ad364e35 
```

而不是我的项目。重命名这个文件使我的项目工作，但我显然不能在我的共享主机站点上这样做。

我已经手动引用了 dll

```
C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 4\Assemblies 
```

并将其设置为`Copy to Local`. 它仍然从`gac_msil`. 我该如何覆盖这个？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-16T09:14:14.663

我有同样的问题，并在谷歌搜索错误时发现了这个问题。当我查看 Windows 上已安装的程序时，我看到安装了 3 个 MVC 4“应用程序”：

1.  MVC 4 VS 2010 工具
2.  MVC 4
3.  MVC 4（捆绑包）

我卸载了“MVC 4”应用程序，然后我的项目运行良好。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-12T14:41:25.483

现在的答案是从文件夹中替换 dll

```
C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 4\Assemblies 
```

进入

```
C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Web.Http\v4.0_4.0.0.0__31bf3856ad364e35 
```

从 Beta 升级到 RC 在另一台机器上工作。我希望这对将来的某人有所帮助。

如果我找到更好的答案，我会更新

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-09T12:22:43.150

我建议您也从 MVC4 Beta 升级到 MVC4 RC：[http](http://www.asp.net/mvc/mvc4) ://www.asp.net/mvc/mvc4 并且根据发行说明：'您可以将 ASP.NET MVC 4 Developer Preview 和 Beta 升级到 ASP.NET无需卸载的 MVC 4 Release Candidate。

我就是这样做的，并摆脱了错误。

原因是您的应用程序指向 GAC 中的旧 MVC4 Beta。

另一种方法是使用此链接中提到的 DEVPATH 环境变量。 [http://www.christophdebaene.com/blog/2012/04/06/building-the-source-code-of-asp-net-web-api/](http://www.christophdebaene.com/blog/2012/04/06/building-the-source-code-of-asp-net-web-api/)

文森特

# c++ - 模板类中构造函数的语法

> ID：10939242
> 
> 赞同：6
> 
> 时间：2012-06-07T20:18:18.323
> 
> 标签：c++, templates, compiler-errors

我正在尝试创建一个通用的循环缓冲区模板，但有一些我无法理解的语法错误。错误出现在我的构造函数中，尽管我似乎已经以相同的方式参数化了析构函数并且那个方法有效。我遵循了 Stroustrup C++ 中的示例，他在范围解析运算符之前以及函数名称中使用了一个参数，就像我一样。我也确定没有循环依赖，因为我只编译一个文件。此外，实现和声明在同一个文件 (CircBuf.h) 中，并且没有对应的 .cpp 文件，因此链接也不应该成为问题。我已经尝试按照[此](http://www.parashift.com/c++-faq-lite/templates.html#faq-35.2)解决方案添加“内联”关键字，但我得到了同样的错误。

```
/* CircBuf.h */
template<typename T> class CircBuf {
  // don't use default ctor                                                                                                                                               
  CircBuf();

  int size;
  T *data;
public:
  CircBuf(int);
  ~CircBuf();
};

template<typename T> CircBuff<T>::CircBuf<T>(int i) {
  data = new T[i];
}
template<typename T> CircBuf<T>::~CircBuf<T>() {
  delete data;
} 
```

生成文件

```
all:
        g++ -g -pedantic CircBuf.h -o prog 
```

编译器错误

```
CircBuf.h:13:22: error: ‘CircBuff’ does not name a type 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T20:19:51.990

`CircBuff`当然没有命名类型，您想要的类型的名称是`CircBuf`单个`f`.

请注意，您还需要丢失`<T>`构造函数和析构函数的尾随。

# xcode - xCode, table view cells in distance order

> ID：10939244
> 
> 赞同：0
> 
> 时间：2012-06-07T20:18:32.893
> 
> 标签：xcode, uitableview, ios5

In my app I am trying to make a table view order it self within distance order from the device! So lets say I have 20 rows in the table, they then go into distance order.

The only problem is, I am quite new to making apps so may need quite a detailed explanation! I have been trying to do this now for ages...

If someone assist what code and what I need to do in Xcode please do! Will be highly appreciated!!

any help?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T20:52:11.347

我强烈建议阅读 CLLocation（[http://developer.apple.com/library/ios/#DOCUMENTATION/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreLocation/Reference/CLLocation_Class/CLLocation/CLLocation.html)），因为它会为您提供您需要计算的所有信息出用户的当前位置。然后，一旦您有了当前位置，就可以使用该位置和每个位置的纬度/经度来计算距离。一旦您在对象上设置了距离，您就可以按对象上的属性（在您的情况下为俱乐部）对它们进行排序。

我正在使用以下代码段来计算从用户当前位置到另一个位置（在本例中为设施）的距离：

```
Facility *facility = [_facilities objectAtIndex:i];
CLLocation *facilityLocation = [[CLLocation alloc] initWithLatitude:[facility.latitude floatValue] longitude:[facility.longitude floatValue]];
if(facilityLocation){
    CLLocationDistance distance = [currentLocation distanceFromLocation:facilityLocation];
    double mileConversion = distance * 0.000621371192;

    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    formatter.maximumFractionDigits = 1;
    facility.distanceFromCurrentLocation = [formatter numberFromString:[formatter stringFromNumber:[NSNumber numberWithDouble:mileConversion]]];
} 
```

不久前，我从某处获得了英里转换，这是因为一英里有 1,609.344 米。如果您只需要仪表，则可以排除该转换。另请注意，我仅使用 1 个小数来显示 UI。

# php - PHP cURL 不起作用 - Windows 7 64 位上的 WAMP

> ID：10939248
> 
> 赞同：170
> 
> 时间：2012-06-07T20:18:47.573
> 
> 标签：php, curl, wamp

我在 Windows 7 64 位上安装了[WAMP 。](http://en.wikipedia.org/wiki/WAMP)cURL 不起作用，但我仍然从 WAMP 托盘中启用了它。

我还取消`extension=php_curl.dll`了`php.ini`PHP 和 Apache 文件夹的注释。

Windows 给我一条错误消息，

> PHP 启动：无法加载动态库 'c:/wamp/bin/php/php5.4.3/ext/php_curl.dll' - 应用程序无法启动，因为它的并排配置不正确。请查看应用程序事件日志或使用命令行 sxstrace.exe 工具了解更多详细信息。”

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：309
> 
> 时间：2012-06-11T08:58:47.210

转到[http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/并下载与您的](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)[PHP](http://en.wikipedia.org/wiki/PHP)对应的 cURL 版本**“固定卷曲扩展：”下的**版本。

因此，如果您有 PHP 5.3.13，请下载“php_curl-5.3.13-VC9-x64.zip”。首先尝试“VC”版本。然后替换 ext 文件夹中的 php_curl.dll。这对我有用。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-12-03T05:20:34.733

我有同样的问题。在尝试了几乎所有方法并挖掘 Stack Overflow 之后，我终于找到了原因。*[尝试分别从PHP 5.4.3 和 PHP 5.3.13 x64 (64 bit) for Windows](http://www.anindya.com/php-5-4-3-and-php-5-3-13-x64-64-bit-for-windows/)*下载“fixed curl extension” 。

我已经下载了“php_curl-5.4.3-VC9-x64”，它对我有用。我希望它有所帮助。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-05-05T12:12:17.103

为我工作：

*   转到[此链接](http://www.anindya.com)
*   在“Fixed curl extensions:”下下载 *php_curl-5.4.3-VC9-x64.zip*
*   替换`php_curl.dll`文件`ext`夹中的文件。

这对我有用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-13T04:47:31.193

我自己为此苦苦挣扎。最后，PHP 5.3.1 版和 Apache 2.2.9 工作...

我得到了缺少 php5.dll 的一致错误。为此，我将所有`php.ini`不需要的旧文件（在 WAMP 文件夹之外）重命名为`old_ohp.ini`.

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-18T17:07:47.447

该错误与 PHP 无关。这意味着您以某种方式依赖于 Apache 的 mod_deflate，但未加载 Apache 模块。尝试在 httpd.conf 中启用 mod_deflate 或注释掉有问题的行（在 httpd.conf 中搜索 DEFLATE）。

至于 PHP curl 扩展，你必须确保它在 php.ini 中被激活。确保将 extension_diris 设置为 php_curl.dll 所在的目录：

extension_dir = "C:/whatever" 然后添加

扩展=php_curl.dll

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-08-23T20:38:39.330

步骤如下：

1.  关闭 WAMP（如果正在运行）
2.  导航`WAMP\bin\php\<your version of PHP>`
3.  编辑文件`php.ini`
4.  搜索 curl，取消注释`extension=php_curl.dll`
5.  导航`WAMP\bin\Apache\<your version of Apache>\bin\`
6.  编辑文件 php.ini
7.  搜索 curl，取消注释`extension=php_curl.dll`
8.  保存两者
9.  重启 WAMP

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-24T10:43:04.607

我认为 cURL 不适用于 WAMP 2.2e。我尝试了你所有的解决方案，但仍然没有奏效。我得到了以前的版本（2.2d），它可以工作。

所以只需下载以前的版本：D

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-06-23T15:31:53.027

好吧，只需卸载 WAMP 64 位并使用 32 位版本。它在我的情况下有效。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-13T13:12:15.533

这就是我设法正确加载 CURL 的方式。在我的情况下，php 是从 zip 包安装的，所以我必须将 php 目录添加到 PATH 环境变量中。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-04-22T21:00:21.397

确保您的系统 PATH 环境变量包含安装 PHP 的目录。停止 Apache 服务器并再次重新启动它。幸运的是，CURL 将开始工作。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-11-05T18:08:37.560

这项工作对我来说： [http](http://www.mediafire.com/?3ay381k3cq59cm2) ://www.mediafire.com/?3ay381k3cq59cm2 下载将文件粘贴到 ext 文件夹 PHP 5.4.3

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-03-21T18:07:56.930

我遇到了在 win8 wamp3 php5.6 上无法使用 curl 的问题。重新安装 wamp（x64 版本，因为我在系统信息中有 x64）使它工作正常。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-02-01T07:21:31.570

`"curl=cainfo"`在文档中取消注释`php.ini`当所有其他方法仍然不起作用时，这在安装 Prestashop 时帮助了我。

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2012-10-05T23:06:16.503

这对我有用

Soren 从另一个 SO 线程回答 - [CURL for WAMP](https://stackoverflow.com/questions/693385/curl-for-wamp?rq=1)

“某处似乎存在错误。如果您在 Win 7 64 位上遇到此问题，请尝试安装 apache 插件版本 2.2.9 和 php 插件版本 5.3.1 并切换到 WAMP 中的那些，然后激活 CURL 扩展。那行得通为了我。”

# apache - htaccess Subdomain RewriteRule

> ID：10939252
> 
> 赞同：0
> 
> 时间：2012-06-07T20:19:06.590
> 
> 标签：apache, .htaccess, mod-rewrite, subdomain

I've been trying to rewrite the following URL:

> [http://subdomain.domain.com/pages/my100page.html](http://subdomain.domain.com/pages/my100page.html)

to:

> [http://subdomain.domain.com/index.php?id=my100page](http://subdomain.domain.com/index.php?id=my100page)

This is what I came up with after researching:

> RewriteEngine On
> RewriteCond %{HTTP_HOST} ^subdomain.domain.com$ [NC]
> RewriteRule ^pages/([^/]*).html$ /index.php?id=$1 [L,R=301]

But that didn't work, I ended up on a 404 error page. My .htaccess file is stored in the root of my website (not the subdomain folder), if that is any help.

How could I get this to work?

Thanks,
Daviga404

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:42:21.653

你似乎有这样的目录

```
MainSite/
  ---SubDomain/
  ---.htaccess 
```

如果您的子域的 DocumentRoot 是 SubDomain 目录，您应该将您的 .htaccess 文件放在 SubDomain 目录中并简单地使用 RewriteRule 指令：

```
RewriteEngine On
RewriteRule ^pages/([^/]*).html$ /index.php?id=$1 [L,R=301] 
```

希望这有帮助

咪咪兹

# iphone - iOS - how to call writeJavascript with parameters in phoneGap / Cordova

> ID：10939253
> 
> 赞同：3
> 
> 时间：2012-06-07T20:19:21.033
> 
> 标签：iphone, ios, cordova, phonegap-plugins

I have a js method testPN(param), which I need to call from my native app. I am using these lines to achieve that -

```
NSString *jsStatement = [NSString stringWithFormat:@"testPN(%@);", custData];
[self writeJavascript:jsStatement]; 
```

This somehow does not work. If I change to testPN() without any argument and call it like this it works -

```
NSString *jsStatement = [NSString stringWithFormat:@"testPN();"];
[self writeJavascript:jsStatement]; 
```

custData is just a regular non-null NSString* Any idea as to what I could be doing wrong?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T09:43:34.740

> `NSString *jsStatement = [NSString stringWithFormat:@"testPN(%@);", custData];`

您可能忘记在 javascript 函数的参数中添加引号。
`@"testPN(%@);"`应该`@"testPN('%@');".`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-28T14:46:43.410

看看这个维基：[http ://wiki.phonegap.com/w/page/36753496/How%20to%20Create%20a%20PhoneGap%20Plugin%20for%20iOS](http://wiki.phonegap.com/w/page/36753496/How%20to%20Create%20a%20PhoneGap%20Plugin%20for%20iOS)

那有什么帮助吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T13:17:18.240

**@Suchi**，如果您像下面这样使用**self.webView**，它将正常工作，

尝试这个...

NSString *jsStatement = [NSString stringWithFormat:@"testPN(%@);", custData];

```
[self.webView stringByEvaluatingJavaScriptFromString:jsStatement]; 
```

# c - C - 在多个函数中使用结构

> ID：10939263
> 
> 赞同：-2
> 
> 时间：2012-06-07T20:19:52.270
> 
> 标签：c, data-structures

我已经检查了谷歌一个小时。我曾尝试使用 typdef，但我得到了相同的结果。我对结构范围有些困惑。我敢肯定，我错过了一些愚蠢的事情。

示例，打印 0：

```
#include <stdio.h>
struct info
{
    int i;
};
struct info testinfo;

int test()
{

    testinfo.i = 5;
}

int main()
{
    printf("%d", testinfo.i);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T20:23:08.913

两个 struct info 都具有块范围，因为您将它们声明为局部变量。因此它们是不同的对象。在文件范围内仅声明一个（在任何函数之外）。

（有问题的代码已经过编辑，这个答案是指最初的错误）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T20:24:15.557

这与 struct 无关 - 您会看到任何类型的相同行为。发生的事情是每个`testinfo`都在不同的范围和命名空间中。

此外，您永远不会调用您的函数。

您可以将其设为`testinfo`全局，也可以通过指针传递它，这是一个更好的主意：

```
#include <stdio.h>

struct info
{
    char* buf;
};

int test(struct info* testinfo)
{
    testinfo->buf = "test"; // it's a bad idea to have a char* to a literal
                            // you should probably allocate new storage
}

int main()
{
    struct info testinfo;
    test(&testinfo);
    printf("%s", testinfo.buf);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T20:23:53.270

您将需要将变量传递`testinfo`给函数`test()`或`test()`返回一个`info`结构

这是第一个选项：

```
int test(struct info * ti) {
  ti->buf = "test";
}
int main() {
  struct info testinfo;
  test(&testinfo);
  printf("%s", testinfo.buf);
} 
```

*注意*：`*`表示指向结构的指针，否则您将复制结构并且对它的任何修改只会发生在副本中（因此`main`' 的版本不会改变）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T20:23:56.523

当你这样做

```
printf("%s", testinfo.buf); 
```

testinfo.buf 没有分配！尝试

```
struct info testinfo;
testinfo.buf = (char *) malloc(123); 
```

<编辑>

```
strcpy(testinfo.buf, "hello world!"); 
```

</编辑>

```
printf("%s", testinfo.buf); 
```

获得分配的缓冲区。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T20:26:49.143

你不能做一个

```
testinfo.buf = "test" 
```

1.  您必须为字符串分配空间， buf 只是一个字符指针。

`struct info { char buf[10]; /*10 is the space for buf*/ };`

您也应该`strcpy(dest,source)`在分配字符串时使用。而且你也没有打电话给测试。把这两件事整理出来，你就会得到输出。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T20:28:09.907

约翰，您需要`test`在`printf`.

IE

```
int main()
{
  test();
  printf("%d", testinfo.i);
  return(0);
} 
```

# ibm-midrange - 在 CL 中增加文本字段

> ID：10939278
> 
> 赞同：2
> 
> 时间：2012-06-07T20:21:11.687
> 
> 标签：ibm-midrange, control-language

我必须更改 iSeries 计算机上的 CL 程序。原始 CL 有一个名为 &SEQ 的变量。它是一个值为“001”的文本字段。有没有办法在 CL 中添加一个值以使其成为“002”？我不熟悉 CL 编程，所以我不知道您是否可以对字符变量执行数学函数。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T21:09:50.777

为此，您必须使用 *DEC CL 变量，然后将其移动到文本字段中。在程序顶部添加以下行：

```
DCL &SEQNBR *DEC 3 VALUE(1) 
```

然后在程序中要增加序列号的地方执行以下操作：

```
CHGVAR &SEQNBR VALUE(&SEQNBR + 1)
CHGVAR &SEQ VALUE(&SEQNBR) 
```

这里发生了什么？您将数值变量 &SEQNBR 声明为初始值为 1。然后使用 CHGVAR 命令将其递增。这使其值为 2。然后将其移动到文本字段 &SEQ，它将接收值为“002”。

# c# - 使用 windbg 检测挂起的 C# 应用程序中的死锁

> ID：10939285
> 
> 赞同：3
> 
> 时间：2012-06-07T20:21:42.217
> 
> 标签：c#, windbg, hung

我在 C# 2.0 中使用线程池的多线程应用程序每隔几周就会在 prod 中挂起。

我做了一个同步块

```
!syncblk

Index SyncBlock MonitorHeld Recursion Owning Thread Info SyncBlock Owner
  201 05b9493c 979 1 05bc1040 bcc 45 022f3490 System.Collections.ArrayList
 2875 05b4c914 1 1 17b99e10 1af8 290 024862d8 MyProg.MyChildClass
 3045 05b4dbec 1 1 17ca7e98 1990 664 02392120 MyProg.MyChildClass
 3046 05b4dc1c 1 1 17ca8668 1038 666 02394b00 MyProg.MyChildClass
 3194 05b4f80c 3 1 05b5b638 1594 31 02537b88 MyProg.MyChildClass
 3072 05b4e114 1 1 17d660f0 1120 848 023dd578 MyProg.MyChildClass
 3073 05b4e144 1 1 17c45c30 1884 518 023dfc2c MyProg.MyChildClass
 3390 05b51cfc 3 1 16cefcc0 1350 102 02768868 MyProg.MyChildClass
 3072 05b4e114 1 1 17d660f0 1120 848 023dd578 MyProg.MyChildClass
 3073 05b4e144 1 1 17c45c30 1884 518 023dfc2c MyProg.MyChildClass

```

我删除了数百行如下所示：

```
3073 05b4e144 1 1 17c45c30 1884 518 023dfc2c MyProg.MyChildClass 

```

持有 979 个监视器的线程正在锁定一个数组列表，但所有其他正在等待的线程都在尝试获取不同对象上的 readerlock。

我确实知道所有读取器线程都试图获取哪个锁，但我不知道谁持有该锁。我怎么发现？

MonitorHeld = 1 的所有线程都具有类似的 clrstack 和 dso 输出。这是持有 979 个锁 (id = 45) 和等待读取器线程 (id = 290) 的线程的 dso 和 clrstack 输出。同样，当我执行 ~* e !clrstack 时，Monitor.Enter 的所有线程都具有与以下 2 个线程上的 clrstack 相同的堆栈

```
0:000> ~45e !clrstack
操作系统线程 ID：0xbcc (45)
ESP EIP     
17fbe590 77d2013d [GCFrame: 17fbe590]
17fbe6cc 77d2013d [HelperMethodFrame: 17fbe6cc] System.Threading.Monitor.Enter(System.Object)
17fbe720 00638427 MyProg.MyParentClass.ClockTimeElapsed(System.DateTime)
17fbe798 00637cf6 MyProg.MyEngine.ClockTimeElapsed（System.Object）
17fbe830 71df843f System.Threading._TimerCallback.TimerCallback_Context(System.Object)
17fbe838 71e302ff System.Threading.ExecutionContext.Run（System.Threading.ExecutionContext，System.Threading.ContextCallback，System.Object）
17fbe850 71df83ab System.Threading._TimerCallback.PerformTimerCallback(System.Object)
17fbe9dc 74071b4c [GCFrame: 17fbe9dc]

```

```
0:000> ~45e!dso
操作系统线程 ID：0xbcc (45)
ESP/REG 对象名称
17fbe5a8 022a2ff4 System.Globalization.DaylightTime
17fbe5ac 022a2f3c System.Int32
17fbe5c8 02537b88 MyProg.MyChildClass
17fbe738 02537b88 MyProg.MyChildClass
17fbe740 02537b88 MyProg.MyChildClass
17fbe7ac 11572f28 System.Collections.ArrayList+ArrayListEnumeratorSimple
17fbe7b0 022f3490 System.Collections.ArrayList
17fbe7b4 0231860c System.String 加载 MyConfig.txt 时出错
17fbe7c0 022f3014 MyProg.MyEngine
17fbe84c 0231b48c System.Threading._TimerCallback
17fbe9fc 0231b48c System.Threading._TimerCallback

```

```
0:000> ~290e !clrstack
操作系统线程 ID：0x1af8 (290)
ESP EIP     
2e77f39c 77d2013d [HelperMethodFrame_1OBJ: 2e77f39c] System.Threading.ReaderWriterLock.AcquireReaderLockInternal(Int32)
2e77f3f8 0c3630d4 MyProg.MyEngine.GetBuyValue()
2e77f424 076fd4ad MyProg.MyParentClass.Execute(System.Object)
2e77f474 71e19fcf System.Threading._ThreadPoolWaitCallback.WaitCallback_Context(System.Object)
2e77f47c 71e302ff System.Threading.ExecutionContext.Run（System.Threading.ExecutionContext，System.Threading.ContextCallback，System.Object）
2e77f494 71e1a533 System.Threading._ThreadPoolWaitCallback.PerformWaitCallbackInternal（System.Threading._ThreadPoolWaitCallback）
2e77f4a8 71e1a3c9 System.Threading._ThreadPoolWaitCallback.PerformWaitCallback(System.Object)
2e77f638 74071b4c [GCFrame: 2e77f638]

```

```
0:000> ~290e!dso
操作系统线程 ID：0x1af8 (290)
ESP/REG 对象名称
2e77f35c 022f3014 MyProg.MyEngine
2e77f360 02369b98 System.Threading.ContextCallback
2e77f378 02369b98 System.Threading.ContextCallback
2e77f3dc 023188f8 System.Threading.ReaderWriterLock
2e77f400 024862d8 MyProg.MyChildClass
2e77f410 02369b98 System.Threading.ContextCallback
2e77f430 024862d8 MyProg.MyChildClass
2e77f43c 024862d8 MyProg.MyChildClass
2e77f460 02369b98 System.Threading.ContextCallback
2e77f490 1156dd74 System.Threading._ThreadPoolWaitCallback

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T21:19:24.083

我认为你应该试试这个人写的扩展 dll SOSEX [http://stevestechspot.com/](http://stevestechspot.com/)，有一个`!dlk`命令试图找到死锁，他最近添加了一些你会感兴趣的新命令：

> !mlocks – 列出所有托管锁和非托管 CriticalSection，以及它们的所有者线程 ID。!mwaits - 列出所有等待的线程，如果可以确定，列出它们正在等待的锁对象。

# html - 如何在动态高度 div 中垂直居中文本？

> ID：10939288
> 
> 赞同：42
> 
> 时间：2012-06-07T20:22:01.580
> 
> 标签：html, css, centering

```
<body>
    <div style="position:absolute; height:100%; width:100%;">
        <h1 style="text-align:center;">Text</h1>
    </div>
</body> 
```

无论 div 元素有多高，如何在 div 标签内垂直居中 h1 标签？即如果用户更改他的浏览器高度，我希望 h1 根据新高度在中心垂直对齐。

谢谢。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-06-07T20:36:54.903

我遇到过的最好的解决方案是利用该`display`属性并将包装元素设置为 a`table`以允许在`vertical-align:middle`元素上的使用居中：

**请参阅此** [工作小提琴示例](http://jsfiddle.net/zuul/JrhQh/)！

**HTML**

```
<body>
    <div>
        <h1>Text</h1>
    </div>
</body> 
```

**CSS**

```
body {width: 100%; height: 100%;}   /* this is just to "view" the div height...*/

div {
    position:absolute; height:100%; width:100%;
    display: table;
}
h1 {
    display: table-cell;
    vertical-align: middle;
    text-align:center;
} 
```

* * *

# 经测试

**Windows XP 专业版 2002 Service Pack 3**

*   互联网浏览器 8.0.6001.18702
*   歌剧 11.62
*   火狐 3.6.16
*   Safari 5.1.2
*   谷歌浏览器 18.0.1025.168 m

**Windows 7 家庭版服务包 1**

*   Internet Explorer 9.0.8112.164211C
*   歌剧 11.62
*   火狐12.0
*   Safari 5.1.4
*   谷歌浏览器 18.0.1025.168 m

**Linux Ubuntu 12.04**

*   火狐12.0
*   Chromium 18.0.1025.151（开发人员内部版本 130497 Linux）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-07T21:44:03.507

我发现最不突兀和最不混乱的答案需要在元素`<span>`之前插入一个标签：http: [//jsfiddle.net/Wexcode/axRxE/](http://jsfiddle.net/Wexcode/axRxE/)`<h1>`

HTML：

```
<div>
    <span></span><h1>Text</h1>
</div>​ 
```

CSS：

```
div { text-align: center; /* horizontally center */ }
div span {
    height: 100%;
    vertical-align: middle;
    display: inline-block; }
div h1 {
    vertical-align: middle;
    display: inline-block; }​ 
```

将此技术扩展到垂直对齐到浏览器高度：http: [//jsfiddle.net/Wexcode/axRxE/1/](http://jsfiddle.net/Wexcode/axRxE/1/)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-08-22T22:43:05.903

我有最简单的 3 行 css 会让你大吃一惊，你会想“为什么我一开始没有想到这个”。在您希望垂直居中放置的元素上使用它，并且父容器只需添加 100% 的高度。

```
position: relative;
top: 50%;
transform: translateY(-50%); 
```

位置可以是相对的、绝对的或固定的。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-03-29T02:13:32.433

2012 年，接受的答案是正确/最佳选择。

快进 8 年，每个主流浏览器（IE10+）[都支持 flex box ：](https://caniuse.com/#feat=flexbox)

```
display: flex;
align-items: center;
flex-direction: column;  /* To also center horizontally, change to `rows` or remove */ 
```

*注意：如果您关心 IE10，则需要`-ms-`根据我上面的超链接包含前缀版本。*

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-07T20:25:26.400

[http://jsfiddle.net/xQBbQ/](http://jsfiddle.net/xQBbQ/)

```
<body>
    <div style="position:absolute; height:100%; width:100%;">
        <h1 style="text-align:center; height:20px; position:relative; top:50%; margin-top:-10px;">Text</h1>
    </div>
</body> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-06-07T21:11:35.783

有一个**跨（桌面）浏览器解决方案**可以使用 CSS2 + CSS3 完成此操作，无需任何 Javascript。

**工作于**

*   IE5+
*   Gecko（Mozilla、Firefox、Netscape 7）
*   歌剧 7+
*   征服者 3+
*   Webkit 浏览器（Safari、谷歌浏览器）
*   还有更多（未经测试的移动浏览器）

**文档：**具有未知高度的 CSS 最终解决方案中的垂直居中：
[http ://www.jakpsatweb.cz/css/css-vertical-center-solution.html](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

**清洁 jsFiddle 示例**：http : [//jsfiddle.net/WYgsP/](http://jsfiddle.net/WYgsP/)

* * *

**HTML**

```
<div class="outerBox">
    <div class="helper">
        <div class="boxWithUnknownHeight">
            any text<br>
            any height<br>
            any content, for example generated from DB<br>
            everything is vertically centered
        </div>
    </div>
</div>​ 
```

**CSS**

```
.outerBox {
    display: table;
    height: 400px;
    #position: relative; /* ie hack */
    overflow: hidden;
    border: 1px solid red;
}

.helper {
    #position: absolute; /* ie hack */
    #top: 50%; /* ie hack */
    display: table-cell;
    vertical-align: middle;
}

.boxWithUnknownHeight {
    #position: relative; /* ie hack */
    #top: -50%;
    border: 1px solid green
}​ 
```

* * *

它可以工作，即使我通过 Firebug 等添加文本和换行符。
*为了让您的 CSS 免受无效 CSS-Hacks 的影响，我建议您使用[条件注释](http://msdn.microsoft.com/en-us/library/ms537512(v=vs.85).aspx)并使用浏览器特定代码创建单独的 CSS。*

未知高度的垂直居中如何工作以及为什么：[**详细说明**](http://www.jakpsatweb.cz/css/css-vertical-center-solution.html)

* * *

**[此处](https://stackoverflow.com/questions/10968726/best-practice-vertical-align-center-content-on-div)使用`display: table`and or or `display: table-cell`and or 绝对定位的**其他解决方案**。**

 *** * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-07T20:30:27.973

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
<!--
body {
    background-color: #0c0c0c;
}
.object {
    background-color: #666666;
    height: 350px;
    width: 600px;
}
.verticalCenter {
    width:600px;
    height:350px;
    position:absolute;
    left:50%;
    top:50%;
    margin:-175px 0 0 -300px;
}
-->
</style>
</head>
<body>
    <div class="verticalCenter">
        <div class="object">cetnered</div>
    </div>
</body>
</html> 
```

您必须在 .verticalCenter 类中设置与要居中的对象（div、flash、图像、文本）相同的高度和宽度。并且边距必须是这些高度和宽度的一半。

如果您动态更改该对象，我认为没有解决方案。除非，也许使用 javascripts。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-07T20:33:19.043

这是一个相当简单的解决方案。它主要基于设置`display:table-cell`和选择像中间这样的垂直对齐方式。

HTML：

```
<div id="vertical">
    <p>this text is vertically centered.  It's long enough to wrap, and should work for any size chunk of content.</p>
    <p>Heck, it even works with multiple items in the middle.</p>
</div>​​ 
```

CSS：

```
#vertical {
    display:table-cell;
    vertical-align:middle;
    height: 500px;
    width: 300px;
}​ 
```

JSFiddle：http: [//jsfiddle.net/6Re3E/1/](http://jsfiddle.net/6Re3E/1/)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-02-05T20:53:23.957

我用桌子做所有事情。`display: table`当某些东西已经存在时，我个人不喜欢使用或类似的东西。

```
<table style="width: 100%; height: 100%;">
    <tr>
        <td>
            <!-- Whatever you want vertically and horizontally centered -->
        </td>
    </tr>
</table> 
```

使用相同的方法，您可以为您的案例执行以下操作：

```
<div id="container-div" style="position: relative">
    <div id="random-content-that-changes-container-height-and-width" style="height: 600px; width: 400px;">
    <div style="position: absolute; top: 0; right: 0; left: 0; bottom: 0">
        <table style="width: 100%; height: 100%;">
            <tr>
                <td>
                    <!-- Whatever you want vertically and horizontally centered -->
                </td>
            </tr>
         </table>
     </div>
</div> 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2012-06-07T20:26:03.847

从我的角度来看，`div`在这种情况下是不合适的选择。我的建议是选择它`table`的`vertical-align`风格`td`。**

# c# - 如何在 C# 中合并两个头文件？

> ID：10939292
> 
> 赞同：-1
> 
> 时间：2012-06-07T20:22:32.287
> 
> 标签：c#

我有两个文件如下：第一个 file1.txt -

```
 4
 suzan w kieth
 Terry s Greenberg
 Ron   q xxx
 Tu    L ip 
```

第二个文件 file2.txt -

```
2
Lily s great
Rowina q Joseph 
```

两个文件的第一个记录是该文件中的记录数，并且两个文件具有完全相同的格式。

我想要第三个文件，其中包含以下记录 -

```
6
suzan w kieth
Terry s Greenberg
Ron   q xxx
Tu    L ip
Lily s great
Rowina q Joseph 
```

有什么建议可以合并这些文件吗？或最快的方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:33:22.617

[将字符串转换为 int](http://msdn.microsoft.com/en-us/library/bb397679.aspx)

[TextReader.ReadLine](http://msdn.microsoft.com/ru-ru/library/system.io.textreader.readline)

[TextReader.WriteLine](http://msdn.microsoft.com/en-us/library/system.io.textwriter.writeline.aspx)

```
using System;
using System.IO;

namespace csharp_station.howto
{
    class TextFileReader
    {
        static void Main(string[] args)
        {
            TextReader tr1 = new StreamReader("file1.txt");
            TextReader tr2 = new StreamReader("file2.txt");
            TextWriter tw = new StreamWriter("result.txt");

            int count1 = Convert.ToInt32(tr1.ReadLine());
            int count2 = Convert.ToInt32(tr2.ReadLine());
            tw.WriteLine(count1 + count2);

            for(int i = 0; i < count1; i++)
            {
                tw.WriteLine(tr1.ReadLine());
            }

            for(int i = 0; i < count2; i++)
            {
                tw.WriteLine(tr2.ReadLine());
            }

            tr1.Close();
            tr2.Close();
            tw.Close();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:44:13.580

最简单的方法是使用[`Enumerable.Concat`](http://msdn.microsoft.com/en-us/library/bb302894.aspx)：

```
var file1Lines = System.IO.File.ReadAllLines(file1Path);
var file2Lines = System.IO.File.ReadAllLines(file2Path);
int totalCount = int.Parse(file1Lines.First()) + int.Parse(file2Lines.First());
var file3FirstLine = new[] { totalCount.ToString() };
var file3Lines = file3FirstLine.Concat(file1Lines.Skip(1))
                               .Concat(file2Lines.Skip(1));
System.IO.File.WriteAllLines(file3Path, file3Lines); 
```

# c++ - 用于 Windows 的简单 C++ 编译器

> ID：10939295
> 
> 赞同：8
> 
> 时间：2012-06-07T20:22:51.910
> 
> 标签：c++

以为我会用 C++ 而不是一些解释性语言编写一些东西（因为我需要简单的性能）并四处尝试不同的工具。

首先我发现 cygwin 因为它有 g++，但它需要 cygwin.dll 来运行 exe。

然后我尝试了mingw，但似乎我需要在libgcc和libgstd之类的发行版中包含一些dll，这会使可执行文件膨胀到大约MB（我真的不需要那么多字节来执行简单的文件I / O )

然后我查看了 Visual C++ 2010，因为我已经安装了它，但看起来我需要安装 2008 才能使用 .net framework 3.5。好吧，我不介意使用 4.0，但我想有很多人在他们的 Windows 机器上没有 4.0，读取文件会很不方便。

我可以使用什么来允许我传递小型 exe（例如：几 KB 的价值）来执行将在大多数 Windows 机器上运行的简单一次性事情？（因为它只与 Windows 用户相关）

还是我应该只使用 C 并使用 gcc 进行 mingw？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T21:03:37.960

至少有一些明显的候选人：

VC++：从 VC++ 2010 开始支持一些 C++11 特性。VC++11（目前处于 beta 测试阶段）增加了一些。具有相当不错的代码生成，很多人认为是您可以获得的最好的调试器，以及产生相当混合评论的 IDE。许多使用过它们的人认为老一代的 IDE（VC++5 和 6）至少在某些方面更好，但是从那以后编译器已经有了很大的改进，以至于老的 IDE 确实不是大多数人的选择（除了支持古代代码）。

MinGW：STL 的当前包具有 gcc 4.7.0，它（至少可以说）比 VC++ 具有更好的 C++11 支持。它包括很多移植的 Unix/Linux 工具，但基本上是一个仅限命令行的环境。如果您想要 IDE 之类的东西，则必须单独安装/配置它。

Cygwin：这也是基于 gcc 的，但他们没有将编译器移植到 Windows，而是将 Linux 移植到 Windows，并在移植的 Linux 上运行编译器。显然我夸大了（有点）但不是很多——Cygwin 主要是在 Windows 上运行 Linux/Unix 代码，尽可能少做改动。他们发布的工具也适合这一点——它正在尽最大努力成为在 Windows 内核下运行的类 Unix 环境。它绝对不会是我进行任何新开发的首选。

Qt Creator/SDK：这是 gcc 的另一个封装，但带有一个 IDE。如果您想使用 Qt 编写代码，它可能是您的首选。否则，我*可能会*避免它——虽然它可能可以正常工作，但它是在假设 Qt 作为默认值的情况下编写的。

Eclipse/CDT：您也可以找到它与 g++ 的副本一起打包。至少在我上次尝试的时候，它需要在配置上做很多工作，才能让它正确编译。如果您将 Eclipse 用于其他目的，那么将其用于 C++ 可能是值得的。否则，我个人会避免它。

C++ Builder：在 Borland 时代，这是微软主导地位的最大挑战者。Embarcadero 似乎正试图让它重新回到主流。这里的重点*似乎*更多地放在 IDE、GUI 工具包等上，而不是编译器本身。编译器本身*似乎*有点落后于 gcc 和/或 VC++。入门版的价格为 150 美元，并且将输出的销售额限制为 1000 美元，此时您需要将 1000 美元的大部分用于升级到专业版。

Clang：最近开始的主要编译器，但真正致力于成为最好的编译器之一。具有任何可用编译器的一些最佳诊断。以 LLVM 为目标，它为它提供了多种用于运行时分析等的工具。不过，它的主要企业赞助商是 Apple，因此虽然它在 Windows 上的 OS/X 上开箱即用（现在是那里的默认编译器），但您需要自己做更多的*事情*——AFAIK，您需要一些其他编译器安装并工作（并且真的知道如何使用它）来安装它。在 Windows 上，这有点像从垃圾场买一辆肌肉车。通过足够的工作，您最终可能会得到城里最酷的汽车——但在 Windows 上，它目前更像是一个项目而不是一个工具。

通常要避免的还有一些：

1.  大约 2008 年之前的任何版本的 VC++。只是 C++ 的低级实现。
2.  4.x 之前的任何 g++ 版本。同样，C++ 的低级实现。
3.  djgpp：几乎是最糟糕的。这确实针对带有（自定义）DOS 扩展器的 MS-DOS。一个古老版本的 gcc 完善了它的可怕之处。
4.  OpenWatcom：也主要针对 MS-DOS。它使用了一个比 djgpp 更好的 DOS 扩展器，但微弱的赞美几乎是该死的。编译器甚至不是非常接近于符合 C++98；C++11 更新让我觉得不太可能很快（如果有的话）。
5.  数字火星：Walter Bright 现在主要使用他自己的 D 语言。尽管 C++ 编译器仍然可用，但它编译的 C++ 已经相当过时了。

总结：如果你想要一个 IDE，VC++ Express 是明确的选择。如果您更关心最新的 C++11 功能并且不介意从命令行工作，那么 MinGW 可能是首选。其他的肯定有利基，但如果你的目标主要是新的、编写可移植的 C++，我会认为它们中的大多数都逊色。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T20:29:08.520

我目前在[http://nuwen.net/mingw.html使用 Stephan Lavavej 的 MinGW 发行版](http://nuwen.net/mingw.html)

我使用它使用 gcc 生成 .exe 文件。

您只需要对他包含的工具集合感到满意即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-07T16:42:15.660

我知道您的问题提到“允许我传递小型 exe”，但如果您（像我一样）对有时只运行 C++ 代码而不创建 exe 感兴趣，您可能想尝试[Compile and Execute C++ Online](https://www.tutorialspoint.com/compile_cpp_online.php) .

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T20:34:20.247

> 然后我查看了 Visual C++ 2010，因为我已经安装了它，但看起来我需要安装 2008 才能使用 .net framework 3.5

嗯，C++ 和 .NET 彼此*没有任何*关系。

Visual Studio 是适用于 Windows*的C++ 编译器。*大多数其他人充其量只能提供较差的Windows支持。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-07T20:25:51.210

对于 Windows 上的简单 C/C++ 编译器，很难击败 djgpp： http: [//www.delorie.com/djgpp/](http://www.delorie.com/djgpp/)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-07T20:30:01.280

恕我直言：如今，拥有几 kb 的 exe 的唯一方法是使用 .net 框架，比如 2.0 尽可能兼容。

我猜你使用什么工具，你至少会静态链接标准库的某些部分，这将打破你对小型 exe 的要求。

# visual-studio - 无法让捆绑/缩小在 VS2012 中工作

> ID：10939296
> 
> 赞同：7
> 
> 时间：2012-06-07T20:22:54.750
> 
> 标签：visual-studio

我正在使用 Visual Studio 2012 RC

我创建了一个 ASP.NET 4 Web 应用程序/Internet 应用程序

在一个视图中，我有这个代码：

```
<script type="text/javascript">
  $(function () {
    alert("Test");
  });
</script> 
```

尽管进行了长时间的搜索，但我无法使捆绑/缩小工作。在 _Layout.cshtml 我有以下内容。我什么也没做。有人可以告诉我我需要做什么吗？非常感谢。

```
 @Styles.Render("~/Content/themes/base/css", "~/Content/css")
  @Scripts.Render("~/bundles/modernizr")

  @*This line Does Not Work*@
  @Scripts.Render("~/Scripts/js")

  @*This Line Does Work*@ 
  <script type="text/javascript" src="~/Scripts/jquery-1.7.2.js"></script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-01T02:38:06.867

首先创建您的脚本包，然后添加您想要的任何脚本。

```
public static void RegisterBundles(BundleCollection bundles)
{
    bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
        "~/Scripts/jquery-1.*",
        "~/Scripts/jquery-ui-1.8.20.js"));
} 
```

然后在你的页面中使用@Scripts.Render，如下所示：

```
@Scripts.Render("~/bundles/jquery"); 
```

请注意，我在上面的 ScriptBundle 中指定的路径与我在 Scripts.Render 中使用的路径相同。

按照这篇文章[http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)。

# c# - lambda 表达式中的结构引用

> ID：10939302
> 
> 赞同：2
> 
> 时间：2012-06-07T20:23:12.890
> 
> 标签：c#, lambda, struct

我在使用 lambda 表达式在定义 lambda 表达式的函数中引用本地值来设置结构中的值时遇到问题。如果我理解正确，该结构是在 lambda 函数中按值传递的，但我希望它通过引用传递。我不知道怎么做。

测试代码：

```
public struct partialData
{
    public int foo;
}
public struct futureData
{
    public int bar;
}

// if you change this to a class, everything works as desired.
public struct someStruct 
{
    public partialData pd;
    public futureData fd;
}
class Apple
{
    private Action<object> toBeSet;
    public someStruct makeStruct(partialData pd)
    {
        someStruct ss = new someStruct();
        ss.pd = pd;

        toBeSet = new Action<object>(
             (futureValue) => ss.fd = (futureData)futureValue
        );
        return ss;
    }
    public void futureSet(futureData fd)
    {
        toBeSet.Invoke(fd);
    }
}

class Program
{
    static void Main(string[] args)
    {
        partialData pd;
        pd.foo = 1;
        futureData fd;
        fd.bar = 2;
        Apple ap=new Apple();
        someStruct ss= ap.makeStruct(pd);
        ap.futureSet(fd);
        // I'd like it to be 1,2, it results in 1,0
        Console.WriteLine("foo is: "+ss.pd.foo + ", bar is: "+ss.fd.bar);
        Console.In.ReadLine();
    }
} 
```

注意：这些结构是由其他人编写的（并且用于互操作），我无法将它们更改为类。我喜欢我目前的设计，所以我希望有一种方法来保持这种设计，但只是让 Action 中的结构表现为一个类。不更改为类的另一个原因是某些结构嵌套得很深，并且需要花费更多的精力来更新，而不是我认为应该有的必要。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T20:39:14.570

如果你想通过引用传递结构，那么你需要你自己的带`ref`参数的委托类型（它不在标准`Action<>`和集合中`Func<>`）。

此外，当使用 lambdas 时，编译器无法推断类型`ref`和`out`参数，因此，您必须显式声明它们或使用良好的旧匿名委托语法（这看起来与声明类型的 lambdas 非常相似）：

```
struct S
{
    public int f;
}

delegate void DoDelegate(ref S s);

public static void M()
{
    var s = new S();

    DoDelegate delegate2 = (ref S st) => st.f = 5;
    DoDelegate delegate1 = delegate(ref S st) { st.f = 10; };

    delegate1.Invoke(ref s);
    delegate2.Invoke(ref s);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T20:32:42.033

将结构放在持有者类中并传递持有者类的实例。

```
public class SomeStructHolder
{
    public someStruct theStruct;
} 
```

# python - 使用 PyUnit 运行所有测试用例

> ID：10939305
> 
> 赞同：1
> 
> 时间：2012-06-07T20:23:18.257
> 
> 标签：python, unit-testing, python-unittest

我记得在 JUnit 中有一种方法可以运行您创建的每个 TestCase 或仅运行选定文件中的那些。

有没有办法在 PyUnit 中实现这一点？

我可以轻松地运行我当前打开的文件中的测试，但我想要运行所有测试的选项（分布在不同的文件中）。

我见过TestSuite，但我的理解是，每次创建新的TestCase 时都需要手动将TestCase 添加到TestSuite。我希望能自动完成这个。

例如，我有以下测试用例（每个都有几种`test<Method Name>`方法）：

```
class TestFamily(unittest.TestCase)
class TestFamilyMember(unittest.TestCase) 
```

如何在`TestFamily`AND中运行所有测试`TestFamilyMember`？

**选择**

检查[鼻子测试](http://nose.readthedocs.org/en/latest/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:44:27.690

您是否尝试过在[测试发现模式下](http://docs.python.org/library/unittest.html?highlight=unittest#test-discovery)运行 unittest ？

在您的项目目录中，键入`python -m unittest discover`. 这将运行当前目录中可直接导入的文件中的所有测试。

从 PyUnit/unittest 文档中，为此工作：

> 为了兼容测试发现，所有测试文件必须是可从项目顶层目录导入的模块或包

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T15:52:40.020

此外，如果您将所有测试都放在一个文件夹中，请右键单击该文件夹并转到`Run As`.

应该有一个用于 pyunit 测试的选项（名称可能因您的配置而异，我的显示 Python 单元测试。您可以从下一个选项（`Run As`, `Run Configurations`）更改配置。

编辑：另外，检查单元测试文档[http://docs.python.org/py3k/library/unittest.html?highlight=unittest#unittest](http://docs.python.org/py3k/library/unittest.html?highlight=unittest#unittest)。IIRC，您可以将测试套件附加到另一个测试套件（与将测试附加到套件的方式相同）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-08T03:16:38.130

是的，有一种方法可以在 PyUnit 中使用 TestLoader 运行所有测试用例

注意：确保所有测试方法都以注释测试开始

希望这个博客对你有帮助！

[http://scriptforandroid.blogspot.in/2017/04/python-unittest-pyunit.html?m=1](http://scriptforandroid.blogspot.in/2017/04/python-unittest-pyunit.html?m=1)

# perl - 使用 Perl 发送电子邮件

> ID：10939306
> 
> 赞同：2
> 
> 时间：2012-06-07T20:23:19.593
> 
> 标签：perl, email

我正在尝试使用 Perl 发送电子邮件。基本上我有一个 Perl 脚本，它以一种很好的格式打印出一份报告。我希望通过电子邮件发送该报告。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T21:33:11.920

如果机器没有配置 sendmail，我通常使用[Mail::Sendmail](https://metacpan.org/module/Mail%3a%3aSendmail)

```
use Mail::Sendmail;

%mail = (smtp    => 'my.isp.com:25',
         to      => 'foo@example.com',
         from    => 'bar@example.com',
         subject => 'Automatic greetings',
         message => 'Hello there');

sendmail(%mail) or die; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T20:30:10.173

[MIME::Lite](http://search.cpan.org/perldoc?MIME::Lite)是许多人使用的强大模块。它易于使用，包括如果您想附加文档。

```
use MIME::Lite;
my $msg = MIME::Lite->new(
    From    => $from,
    To      => $to,
    Subject => $subject,
    Type    => 'text/plain',
    Data    => $message,
);
$msg->send; 
```

由于它`sendmail`默认使用（而不是 SMTP），因此您甚至不需要配置它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T20:50:55.997

值得一提的是，如果你的机器上碰巧有 Outlook 并 cpan 了 Outlook 模块：

```
 # create the object
 use Mail::Outlook;
 my $outlook = new Mail::Outlook();

  # start with a folder
  my $outlook = new Mail::Outlook('Inbox');

  # use the Win32::OLE::Const definitions
  use Mail::Outlook;
  use Win32::OLE::Const 'Microsoft Outlook';
  my $outlook = new Mail::Outlook(olInbox);

  # get/set the current folder
  my $folder = $outlook->folder();
  my $folder = $outlook->folder('Inbox');

  # get the first/last/next/previous message
  my $message = $folder->first();
  $message = $folder->next();
  $message = $folder->last();
  $message = $folder->previous();

 # read the attributes of the current message
 my $text = $message->From();
 $text = $message->To();
 $text = $message->Cc();
 $text = $message->Bcc();
 $text = $message->Subject();
 $text = $message->Body();
  my @list = $message->Attach();

  # use Outlook to display the current message
  $message->display;

  # Or use a hash
  my %hash = (
    To      => 'suanna@live.com.invalid',
    Subject => 'Blah Blah Blah',
     Body    => 'Yadda Yadda Yadda',
  );

  my $message = $outlook->create(%hash);
  $message->display(%hash);
  $message->send(%hash); 
```

请注意，[.invalid TLD](http://en.wikipedia.org/wiki/.invalid)不是真实的，因此上述地址将不会发送。无论如何，我在这里对模块中的内容做了一个体面的解释——这发送了一条信息！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-21T20:28:01.780

没有 CPAN 库的最简单方法：

```
#!/usr/bin/perl

$to = 'toAddress@xx.com';       # to address
$from = 'fromAddress@xx.com';   # from address
$subject = 'subject';           # email subject
$body = 'Email message content';# message

open(MAIL, "|/usr/sbin/sendmail -t");     
print MAIL "To: $to\n";
print MAIL "From: $from\n";
print MAIL "Subject: $subject\n\n";
print MAIL $body;    
close(MAIL);

print "Email Sent Successfully to $to\n"; 
```

# android - AudioRecord 与新的 HTC One 系列 Android 手机

> ID：10939311
> 
> 赞同：2
> 
> 时间：2012-06-07T20:24:01.210
> 
> 标签：android, audiorecord, android-audiorecord

我在市场上有一个使用 AudioRecord 类录制音频并将其保存到 SD 卡的应用程序。使用新 HTC One 系列手机的用户无法录制。

开始录制时，它会在 SD 卡中保存一个 1kb 的文件，然后停止。通常它至少会创建一个 44KB 的标头，所以我相信它会在 prepare() 函数的某个地方停止。我没有 HTC 来测试这个，所以我傻眼了。我附上了我用来录制的课程，我正在录制未压缩的音频。在我的记录活动中，我使用构造函数初始化 extAudioRecorder 对象，如下所示：

```
extAudioRecorder = new ExtAudioRecorder(true, 
AudioSource.MIC, 
44100, 
AudioFormat.CHANNEL_IN_MONO, 
AudioFormat.ENCODING_PCM_16BIT); 
```

我觉得这应该适用于较新的手机。

任何帮助，将不胜感激。这是我用于录制的课程的完整来源。它也可能对 LG Optimus One 手机做同样的事情。

```
public class ExtAudioRecorder implements Runnable
{
private final static int[] sampleRates = {44100, 22050, 11025, 8000};
private static final String AUDIO_RECORDER_FOLDER = "FOLDER";
String sdPath = Environment.getExternalStorageDirectory().getPath();
File file = new File(sdPath,AUDIO_RECORDER_FOLDER);
String FullFilePath;
String fileName;
static int sampleRate;
private volatile boolean recording = false;
double RecordReadDelayInSeconds = 0;
double RecordDelayInSeconds = 0;

private MediaPlayer mPlayer;
private static String mp3Path = Environment.getExternalStorageDirectory() + "/FOLDER/tmp/tmp.mp3";

 double beatDelayInSeconds = 0;

public ExtAudioRecorder getInstanse(Boolean recordingCompressed)
{
    ExtAudioRecorder result = null;

    if(recordingCompressed)
    {
        result = new ExtAudioRecorder(  false, 
                                        AudioSource.MIC, 
                                        sampleRates[3], 
                                        AudioFormat.CHANNEL_IN_MONO,
                                        AudioFormat.ENCODING_PCM_16BIT);
    }
    else
    {
        int i=0;
        do
         {
            result = new ExtAudioRecorder(  true, 
                                            AudioSource.MIC, 
                                            sampleRates[i], 
                                            AudioFormat.CHANNEL_IN_MONO,
                                            AudioFormat.ENCODING_PCM_16BIT);
            sampleRate = sampleRates[i];

        } while((++i<sampleRates.length) & !(result.getState() == ExtAudioRecorder.State.INITIALIZING));
    }
    return result;
}

/**
* INITIALIZING : recorder is initializing;
* READY : recorder has been initialized, recorder not yet started
* RECORDING : recording
* ERROR : reconstruction needed
* STOPPED: reset needed
*/
public enum State {INITIALIZING, READY, RECORDING, ERROR, STOPPED};

public static final boolean RECORDING_UNCOMPRESSED = true;
public static final boolean RECORDING_COMPRESSED = false;

// The interval in which the recorded samples are output to the file
// Used only in uncompressed mode
private static final int TIMER_INTERVAL = 120;

// Toggles uncompressed recording on/off; RECORDING_UNCOMPRESSED / RECORDING_COMPRESSED
private boolean         rUncompressed;

// Recorder used for uncompressed recording
private AudioRecord     audioRecorder = null;

// Recorder used for compressed recording
private MediaRecorder   mediaRecorder = null;

// Stores current amplitude (only in uncompressed mode)
private int             cAmplitude= 0;

// Output file path
private String          filePath = null;

// Recorder state; see State
private State           state;

// File writer (only in uncompressed mode)
private RandomAccessFile randomAccessWriter;

// Number of channels, sample rate, sample size(size in bits), buffer size, audio source, sample size(see AudioFormat)
private short                    nChannels;
private int                      sRate;
private short                    bSamples;
private int                      bufferSize;
private int                      aSource;
private int                      aFormat;

// Number of frames written to file on each output(only in uncompressed mode)
private int                      framePeriod;

// Buffer for output(only in uncompressed mode)
private byte[]                   buffer;

// Number of bytes written to file after header(only in uncompressed mode)
// after stop() is called, this size is written to the header/data chunk in the wave file
private int                      payloadSize;

/**
*
* Returns the state of the recorder in a RehearsalAudioRecord.State typed object.
* Useful, as no exceptions are thrown.
*
* @return recorder state
*/
public State getState()
{
    return state;
}

/*
*
* Method used for recording.
*
*/
private AudioRecord.OnRecordPositionUpdateListener updateListener = new AudioRecord.OnRecordPositionUpdateListener()
{
    @Override
    public void onPeriodicNotification(AudioRecord recorder)
    {
        if (state != State.STOPPED)
        {
        audioRecorder.read(buffer, 0, buffer.length); // Fill buffer
        try
        { 
            randomAccessWriter.write(buffer); // Write buffer to file
            payloadSize += buffer.length;
            if (bSamples == 16)
            {
                for (int i=0; i<buffer.length/2; i++)
                { // 16bit sample size
                    short curSample = getShort(buffer[i*2], buffer[i*2+1]);
                    if (curSample > cAmplitude)
                    { // Check amplitude
                        cAmplitude = curSample;
                    }
                }
            }
            else    
            { // 8bit sample size
                for (int i=0; i<buffer.length; i++)
                {
                    if (buffer[i] > cAmplitude)
                    { // Check amplitude
                        cAmplitude = buffer[i];
                    }
                }
            }
        }
        catch (IOException e)
        {
            Log.e(ExtAudioRecorder.class.getName(), "Error occured in updateListener, recording is aborted");
            stop();
        }
        }
    }

    @Override
    public void onMarkerReached(AudioRecord recorder)
    {
        // NOT USED
    }
};
/** 
 * 
 * 
 * Default constructor
 * 
 * Instantiates a new recorder, in case of compressed recording the parameters can be left as 0.
 * In case of errors, no exception is thrown, but the state is set to ERROR
 * 
 */ 
public ExtAudioRecorder(boolean uncompressed, int audioSource, int sampleRate, int channelConfig, int audioFormat)
{
    try
    {
        rUncompressed = uncompressed;
        if (rUncompressed)
        { // RECORDING_UNCOMPRESSED
            if (audioFormat == AudioFormat.ENCODING_PCM_16BIT)
            {
                bSamples = 16;
            }
            else
            {
                bSamples = 8;
            }

            if (channelConfig == AudioFormat.CHANNEL_IN_MONO)
            {
                nChannels = 1;
            }
            else
            {
                nChannels = 2;
            }

            aSource = audioSource;
            sRate   = sampleRate;
            aFormat = audioFormat;

            framePeriod = sampleRate * TIMER_INTERVAL / 1000;
            bufferSize = framePeriod * 2 * bSamples * nChannels / 8;
            if (bufferSize < AudioRecord.getMinBufferSize(sampleRate, channelConfig, audioFormat))
            { // Check to make sure buffer size is not smaller than the smallest allowed one 
                bufferSize = AudioRecord.getMinBufferSize(sampleRate, channelConfig, audioFormat);
                // Set frame period and timer interval accordingly
                framePeriod = bufferSize / ( 2 * bSamples * nChannels / 8 );
                Log.w(ExtAudioRecorder.class.getName(), "Increasing buffer size to " + Integer.toString(bufferSize));
            }

            audioRecorder = new AudioRecord(audioSource, sampleRate, channelConfig, audioFormat, bufferSize);

            if (audioRecorder.getState() != AudioRecord.STATE_INITIALIZED)
                throw new Exception("AudioRecord initialization failed");
            audioRecorder.setRecordPositionUpdateListener(updateListener);
            audioRecorder.setPositionNotificationPeriod(framePeriod);
        } else
        { // RECORDING_COMPRESSED
            mediaRecorder = new MediaRecorder();
            mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
            mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
            mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);               
        }
        cAmplitude = 0;
        filePath = null;
        state = State.INITIALIZING;
    } catch (Exception e)
    {
        if (e.getMessage() != null)
        {
            Log.e(ExtAudioRecorder.class.getName(), e.getMessage());
        }
        else
        {
            Log.e(ExtAudioRecorder.class.getName(), "Unknown error occured while initializing recording");
        }
        state = State.ERROR;
    }
}

/**
 * Sets output file path, call directly after construction/reset.
 *  
 * @param output file path
 * 
 */
public void setOutputFile(String argPath)
{

    try
    {
        if (state == State.INITIALIZING)
        {
            filePath = argPath;
            if (!rUncompressed)
            {
                mediaRecorder.setOutputFile(sdPath + "/FOLDER/" + filePath);                    
            }
        }
    }
    catch (Exception e)
    {
        if (e.getMessage() != null)
        {
            Log.e(ExtAudioRecorder.class.getName(), e.getMessage());
        }
        else
        {
            Log.e(ExtAudioRecorder.class.getName(), "Unknown error occured while setting output path");
        }
        state = State.ERROR;
    }
}

/**
 * 
 * Returns the largest amplitude sampled since the last call to this method.
 * 
 * @return returns the largest amplitude since the last call, or 0 when not in recording state. 
 * 
 */
public int getMaxAmplitude()
{
    if (state == State.RECORDING)
    {
        if (rUncompressed)
        {
            int result = cAmplitude;
            cAmplitude = 0;
            return result;
        }
        else
        {
            try
            {
                return mediaRecorder.getMaxAmplitude();
            }
            catch (IllegalStateException e)
            {
                return 0;
            }
        }
    }
    else
    {
        return 0;
    }
}

/**
 * 
* Prepares the recorder for recording, in case the recorder is not in the INITIALIZING state and the file path was not set
* the recorder is set to the ERROR state, which makes a reconstruction necessary.
* In case uncompressed recording is toggled, the header of the wave file is written.
* In case of an exception, the state is changed to ERROR
*    
*/
public void prepare()
{
    try
    {
        if (state == State.INITIALIZING)
        {
            if (rUncompressed)
            {
                if ((audioRecorder.getState() == AudioRecord.STATE_INITIALIZED) & (filePath != null))
                {
                    // write file header

                       if(!file.exists())
                            file.mkdirs();

                    fileName = filePath;
                    FullFilePath = file.getAbsoluteFile() + "/" +  fileName;
                    randomAccessWriter = new RandomAccessFile(FullFilePath, "rw");

                    randomAccessWriter.setLength(0); // Set file length to 0, to prevent unexpected behavior in case the file already existed
                    randomAccessWriter.writeBytes("RIFF");
                    randomAccessWriter.writeInt(0); // Final file size not known yet, write 0 
                    randomAccessWriter.writeBytes("WAVE");
                    randomAccessWriter.writeBytes("fmt ");
                    randomAccessWriter.writeInt(Integer.reverseBytes(16)); // Sub-chunk size, 16 for PCM
                    randomAccessWriter.writeShort(Short.reverseBytes((short) 1)); // AudioFormat, 1 for PCM
                    randomAccessWriter.writeShort(Short.reverseBytes(nChannels));// Number of channels, 1 for mono, 2 for stereo
                    randomAccessWriter.writeInt(Integer.reverseBytes(sRate)); // Sample rate
                    randomAccessWriter.writeInt(Integer.reverseBytes(sRate*bSamples*nChannels/8)); // Byte rate, SampleRate*NumberOfChannels*BitsPerSample/8
                    randomAccessWriter.writeShort(Short.reverseBytes((short)(nChannels*bSamples/8))); // Block align, NumberOfChannels*BitsPerSample/8
                    randomAccessWriter.writeShort(Short.reverseBytes(bSamples)); // Bits per sample
                    randomAccessWriter.writeBytes("data");
                    randomAccessWriter.writeInt(0); // Data chunk size not known yet, write 0

                    buffer = new byte[framePeriod*bSamples/8*nChannels];
                    state = State.READY;
                }
                else
                {
                    Log.e(ExtAudioRecorder.class.getName(), "prepare() method called on uninitialized recorder");
                    state = State.ERROR;
                }
            }
            else
            {
                mediaRecorder.prepare();
                state = State.READY;
            }
        }
        else
        {
            Log.e(ExtAudioRecorder.class.getName(), "prepare() method called on illegal state");
            release();
            state = State.ERROR;
        }
    }
    catch(Exception e)
    {
        if (e.getMessage() != null)
        {
            Log.e(ExtAudioRecorder.class.getName(), e.getMessage());
        }
        else
        {
            Log.e(ExtAudioRecorder.class.getName(), "Unknown error occured in prepare()");
        }
        state = State.ERROR;
    }
}

/**
 * 
 * 
 *  Releases the resources associated with this class, and removes the unnecessary files, when necessary
 *  
 */
public void release()
{
    if (state == State.RECORDING)
    {
        stop();
    }
    else
    {
        if ((state == State.READY) & (rUncompressed))
        {
            try
            {
                randomAccessWriter.close(); // Remove prepared file
            }
            catch (IOException e)
            {
                Log.e(ExtAudioRecorder.class.getName(), "I/O exception occured while closing output file");
            }
            //delete file
            //(new File(filePath)).delete();
        }
    }

    if (rUncompressed)
    {
        if (audioRecorder != null)
        {
            audioRecorder.release();
        }
    }
    else
    {
        if (mediaRecorder != null)
        {
            mediaRecorder.release();
        }
    }
}

/**
 * 
 * 
 * Resets the recorder to the INITIALIZING state, as if it was just created.
 * In case the class was in RECORDING state, the recording is stopped.
 * In case of exceptions the class is set to the ERROR state.
 * 
 */
public void reset()
{
    try
    {
        if (state != State.ERROR)
        {
            release();
            filePath = null; // Reset file path
            cAmplitude = 0; // Reset amplitude
            if (rUncompressed)
            {
                audioRecorder = new AudioRecord(aSource, sRate, nChannels+1, aFormat, bufferSize);
            }
            else
            {
                mediaRecorder = new MediaRecorder();
                mediaRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
                mediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
                mediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
            }
            state = State.INITIALIZING;
        }
    }
    catch (Exception e)
    {
        Log.e(ExtAudioRecorder.class.getName(), e.getMessage());
        state = State.ERROR;
    }
}

/**
 * 
 * 
 * Starts the recording, and sets the state to RECORDING.
 * Call after prepare().
 * 
 */
public void start()
{
    if (state == State.READY)
    {
        if (rUncompressed)
        {
            payloadSize = 0;
            RecordReadDelayInSeconds = 0;
            RecordDelayInSeconds = 0;

            mPlayer = new MediaPlayer();
            try {
                mPlayer.setDataSource(mp3Path);
                mPlayer.prepare();
            } catch (IllegalArgumentException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (SecurityException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            long recordstarted = System.nanoTime();
            audioRecorder.startRecording();
            long recordstopped = System.nanoTime();
            long recordDelay = recordstopped - recordstarted;

            double RecordDelayInSeconds = recordDelay / 1000000.0;

            Log.i("StartRecording() Delay in seconds", String.valueOf(RecordDelayInSeconds));

            long recordreadstarted = System.nanoTime();
            audioRecorder.read(buffer, 0, buffer.length);
            long recordreadstopped = System.nanoTime();
            long recordreadDelay = recordreadstopped - recordreadstarted;
            RecordReadDelayInSeconds = recordreadDelay / 1000000.0;
            Log.i("Record read() Delay in seconds", String.valueOf(RecordReadDelayInSeconds));

            long mediastarted = System.nanoTime();
            mPlayer.start();
            long  mediastopped = System.nanoTime();
            long  beatDelay = mediastopped - mediastarted;

            beatDelayInSeconds = 0;
            beatDelayInSeconds = (beatDelay) / 1000000000.0;
            Log.i("Beat Delay in seconds", String.valueOf(beatDelayInSeconds));

        }
        else
        {
            mediaRecorder.start();
        }
        state = State.RECORDING;
    }
    else
    {
        Log.e(ExtAudioRecorder.class.getName(), "start() called on illegal state");
        state = State.ERROR;
    }
}

/**
 * 
 * 
 *  Stops the recording, and sets the state to STOPPED.
 * In case of further usage, a reset is needed.
 * Also finalizes the wave file in case of uncompressed recording.
 * 
 */
public void stop()
{
    if (state == State.RECORDING)
    {
        if (rUncompressed)
        {
            audioRecorder.stop();

            try
            {
                randomAccessWriter.seek(4); // Write size to RIFF header
                randomAccessWriter.writeInt(Integer.reverseBytes(36+payloadSize));

                randomAccessWriter.seek(40); // Write size to Subchunk2Size field
                randomAccessWriter.writeInt(Integer.reverseBytes(payloadSize));

                randomAccessWriter.close();

                //mPlayer.stop();
            }
            catch(IOException e)
            {
                Log.e(ExtAudioRecorder.class.getName(), "I/O exception occured while closing output file");
                state = State.ERROR;
            }
        }
        else
        {
            mediaRecorder.stop();
        }
        state = State.STOPPED;
    }
    else
    {
        Log.e(ExtAudioRecorder.class.getName(), "stop() called on illegal state");
        state = State.ERROR;
    }
}

/* 
 * 
 * Converts a byte[2] to a short, in LITTLE_ENDIAN format
 * 
 */
private short getShort(byte argB1, byte argB2)
{
    return (short)(argB1 | (argB2 << 8));
}

public String[] GetFileProperties()
{
    String[] fileProperties = new String[3];
    fileProperties[0] = FullFilePath;
    fileProperties[1] = fileName;
    fileProperties[2] = Integer.toString(sampleRate);

    return fileProperties;
}

@Override
public void run() {
    android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_URGENT_AUDIO);
    start();

}

public void StopMediaPlayer()
{

    try {
        mPlayer.stop();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}

public boolean isRecording() {
    return recording;
}

public int GetSampleRate()
{
    return sampleRate;
}

public double GetBeatDelay()
{
    return beatDelayInSeconds;
}

public int GetRecordDelay()
{
    return (int)(RecordReadDelayInSeconds +RecordDelayInSeconds);

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T18:19:27.740

我能够使这些值起作用：
AudioSource.MIC
44100
AudioFormat.CHANNEL_IN_MONO
AudioFormat.ENCODING_PCM_16BIT

使用此代码尝试所有值：
[https ://github.com/lnanek/Misc/tree/master/TestOneXAudioRecord](https://github.com/lnanek/Misc/tree/master/TestOneXAudioRecord)

它在 One X (AT&T)、One X (Europe) 和 One S (T-mobile) 上输出此日志条目：
D/ ***TestOneXAudioRecordActivity*** (10500)：尝试率 44100Hz，位：2，通道：16
D/ ***TestOneXAudioRecordActivity*** (10500 ): AudioRecord.getState = AudioRecord.STATE_INITIALIZED
I/ ***TestOneXAudioRecordActivity*** (10500): 初始化一个 AudioRecord = android.media.AudioRecord@40ddbcf0

有一次，程序无法初始化 AudioRecord，但我重新启动了设备，它开始工作了。我认为另一个程序正在使用麦克风，或者我之前的一次尝试没有发布 AudioRecord，这意味着硬件很忙。因此，请确保您尝试重新启动手机并且没有任何其他录音应用程序运行。

# php - 我可以在传递 GET 变量的同时在 PHP 中保留旧的 GET 变量吗

> ID：10939317
> 
> 赞同：4
> 
> 时间：2012-06-07T20:24:33.113
> 
> 标签：php, sorting, get

我使用 GET 进行分页， ?page=1 是第一页，依此类推。

问题是，我想对数据进行排序，使用 GET 是更好的方法，如下所示：

```
?page=1&sort=date 
```

如果我尝试这样做并单击第 2 页，它将转到 ?page=2 并取消排序。

我也尝试过，但是当从一个页面转到另一个页面时`$_SERVER['QUERY_STRING']`，我最终会在地址栏中堆积。`?page=#`

这是我的分页链接的生成方式：

```
<a href='{$_SERVER['PHP_SELF']}?page=$nextpage'>Next</a> 
```

我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T20:29:34.300

您可以按照以下方式做一些事情：

```
// Check if there are any GET parameters
if (!empty($_GET)) {
    $link = "?page=2";

    // Loop through the parameters
    foreach ($_GET as $parameter => $value) {
      // Append the parameter and its value to the new path
      $link .= "&" . $parameter . "=" . urlencode($value);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T20:28:24.253

您可能想查看此线程： [如何使用带有 php 的表单将 GET 变量添加到当前页面 url 的末尾？](https://stackoverflow.com/questions/3068837/how-can-i-add-get-variables-to-the-end-of-the-current-page-url-using-a-form-with)

基本上使用`$_SERVER['REQUEST_URI']`来获取当前的 url 和变量，并在链接中附加获取变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T20:30:03.100

`$_GET`是一个数组，因此您可以遍历其中的元素以重新创建新 URL。[PHP 页面上`$_GET`](http://php.net/manual/en/reserved.variables.get.php)有许多示例，其中包括[一个](http://www.php.net/manual/en/reserved.variables.get.php#105061)显示如何遍历数组以从 URL 中删除 GET 参数的示例。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-07T20:30:14.023

如果您想将排序参数添加到您的 url（如果它已经设置），您可以执行以下操作：

```
$qs_sort = isset($_GET['sort']) ? '&sort=' . urlencode($_GET['sort']) : ''; 
```

然后更改您`<a>`要回显的内容以附加`$qs_sort`到网址的末尾：

```
<a href='{$_SERVER['PHP_SELF']}?page=$nextpage$qs_sort'>Next</a> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T20:28:38.677

您需要决定在每个页面上显示多少项目。知道这一点后，您可以轻松地使用页面 GET 变量来确定要从数据库中查询的项目子集，例如，如果每个页面显示 10 个项目，那么第一页是项目 0 到 9，第 2 页是 10 到 19等。当然，这要求您的数据库支持某种选择数据子集的方式。

当然，如果您使用数据库中的一致查询，它将始终以相同的方式排序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-07T20:29:49.783

有几个选项：

*   将排序参数添加到每个分页链接
*   将最新的排序列存储在用户的会话中（注意，当用户打开多个选项卡时，这样做的缺点是效果不佳）
*   如果您使用 ajax 进行分页，请在页码上添加事件处理程序，并让 javascript 存储当前排序字段并在 GET 请求中发送它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-07T20:30:29.410

你可以在这里做的事情很少......

1.  添加/更改 GET 参数时，请确保另外更改所有指向其他页面的链接。如果您有一个`<a href="?page=1">`确保`&sort=date`在选择排序功能时追加。

2.  单击链接时，您可以使用 jQuery 附加排序参数 -

```
var _currentSortMethod = 'date';
$("a.someOtherLink").on('click',function(e){
  window.locaton.href = $(this).attr('href') + '&sort=' + _currentSortMethod;
  e.preventDefault();
}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-06-07T20:31:11.767

在您的代码中，如果您正在控制 URL 链接，那么您只需将该排序变量再次传递给您的 URL 链接，如下所示：

```
<?php     $sorting = $_REQUEST['sort'];
          $page = $_REQUEST['page'];
          $page = $page + 1;
          echo '<a href="datapage.php?page=' . $page . '&sort=' . $sorting. '>Next Page</a>';
?> 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-06-07T20:31:34.087

只需将其添加回 URL。

```
<?php $sort = (isset($_GET['sort'])) ? "&sort=".$_GET['sort'] : ""; ?>

<a href="link.php?page=2<?php echo $sort; ?>">link</a> 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-06-07T20:34:03.710

绘制链接进行排序时，检测当前页面并记下包含该页面的链接。此外，在绘制分页器链接时，用检测到的排序写下它们。

假设您在第 2 页并按标题降序对列表进行排序，您的链接应如下所示：

*   按标题排序

```
<a href="?page=2&amp;sort=title+desc>Title</a> 
```

*   按顺序排序

```
<a href="?page=2&amp;sort=order+desc>Order</a> 
```

*   分页页面 1

```
<a href="?page=1&amp;sort=title+desc>1</a> 
```

*   分页第 3 页

```
<a href="?page=3&amp;sort=title+desc>3</a> 
```

等等...

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-06-07T21:06:22.910

你可以试试这个：

```
$query = new HttpQueryString();
$query->set("page", $nextPage);
echo "http://www.example.com/?" . $query->toString(); 
```

以下是有关 HttpQueryString 类的一些附加文档：[http ://www.php.net/manual/en/class.httpquerystring.php](http://www.php.net/manual/en/class.httpquerystring.php)

希望有帮助！

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-06-07T20:29:51.680

大规模分页通常通过数据库 API 完成。小规模的分页可以通过[PHP 会话](http://php.net/manual/en/features.sessions.php)使用 $_SESSION 变量来完成。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2017-04-03T12:57:29.493

对于任何想要保留当前参数的解决方案，如果给定新值则更新并附加新参数的解决方案，这可以完成工作：

### 代码

```
$domainurl='https://' . $_SERVER['SERVER_NAME'];
$currenturl=$domainurl . $_SERVER['PHP_SELF'];

function urlVars($new=array()) {
    $url=$GLOBALS['currenturl'];
    $vars=array_merge($_GET, $new);
    foreach ($vars as $key => $var) {
        $params[$x]='&' . $key . '=' . $var;
        $x++;
    } $str='?' . trim(implode($params), '&');
    return $url .= $str;
} 
```

### 使用示例：

```
 <a href="' . urlVars(array('page'=>'2', 'view'=>'30', etc.)) . '">Go To Page 2 & Show 30 Results</a> 
```

使用`$currenturl`仅返回当前页面的域和路径的变量，而不是返回查询字符串的 $_SERVER['REQUEST_URI'] 也解决了重复查询问题并允许更改先前设置的参数。

这是因为`array_merge()`会将两个或多个数组粘在一起，如果有多个同名的键，最后一个声明的键会占上风，而其他所有键都被否定。并且由于`$_GET`数组是用旧参数填充的，所以它**必须**在`$new`数组之前。例子：

```
$_GET['page']='1';
if ($new['page']='1') {array_merge($_GET, $new);} // 'page'=>'1'
elseif ($new['page']='4') {array_merge($_GET, $new);} // 'page'=>'4'

$_GET['page']='4';
if ($new['page']='2') {array_merge($_GET, $new);} // 'page'=>'2' 
```

### 笔记

此功能的一个简洁功能以及我辛辛苦苦使用它几个小时直到它完美的全部原因是，您不必在每次有新链接/表单或在另一个中关闭一些数组时都指定相同的参数包含可能的参数键的脚本。您放入`$new`数组中的所有参数都是新的（显然）或正在更改的参数。它是通用的！

# objective-c - 清除远程 APN 的警报

> ID：10939318
> 
> 赞同：0
> 
> 时间：2012-06-07T20:24:39.557
> 
> 标签：objective-c, push-notification, alert, apple-push-notifications

我有一个应用程序在后台接收远程 APN 通知。如果通知样式是横幅，则效果很好。

但是，当通知样式为警报并收到 10 个 APN 时，用户必须在为第一个警报选择“启动”后关闭后续警报框。

应用程序启动后有什么方法可以清除警报吗？

我在 applicationDidBecomeActive: 和 applicationWillEnterForeground 中尝试了以下内容：

```
[application cancelAllLocalNotifications];
application.applicationIconBadgeNumber = 0; 
```

但它不起作用。其他人有这个问题吗？

另外，我知道这是可能的，因为 WhatsApp 能够做到这一点。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:53:45.037

我很清楚你想在这个主题中实现什么。但是，您的代码将不起作用。

```
[application cancelAllLocalNotifications]; 
```

“cancelAllLocalNotifications”仅适用于本地通知 - 由应用程序安排并由同一设备上的 iOS 交付。

正如苹果所讨论的，当您的应用程序处于后台时，APNs 会处理远程通知。如果您的应用程序处于前台或当前处于活动状态，您的代理将管理通知。

* * *

尝试在应用程序中处理通知[：didReceiveRemoteNotification](https://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application%3adidReceiveRemoteNotification%3a)

这是一个示例：（您可以从此处管理有效负载）：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo {

    for (id key in userInfo) {
        NSLog(@"key: %@, value: %@", key, [userInfo objectForKey:key]);
    }    

} 
```

* * *

您还可以检查您的应用程序是否处于前台或您的应用程序是否处于活动状态：

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo{
    if(application.applicationState == UIApplicationStateActive) {
        // app active.
    }
    else {
        // app not active
    }
} 
```

# android - Android 模拟器设置

> ID：10939321
> 
> 赞同：1
> 
> 时间：2012-06-07T20:25:03.077
> 
> 标签：android, emulation

我已经编写 Droids 大约 7 个月了，尽管我很喜欢某些功能，但大部分时间似乎都花在让模拟器正常工作上......

无论我创建哪种类型的 AVD，相机都无法工作，视频无法播放，而且我刚刚发现 Google 地图也无法使用。我的目标是 2.2 到 4.0，但没有成功。

有没有人有类似的问题？有没有人找到解释这些东西在模拟器中工作所需的基本设置的资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T18:37:30.360

最新的开发人员工具现在包括通过网络摄像头支持的摄像头（截至 2012 年 6 月 28 日）。还有许多其他不错的附加功能（通过系留设备输入的传感器等）。详细信息：[Google I/O 2012 - Android 开发者工具中的新功能](http://youtu.be/Erd2k6EKxCQ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:37:54.427

1.  Google Maps 在您可能没有使用过 Google API 的模拟器上运行
2.  关于播放视频，Android Emulator 支持 H.263 编码和解码，H.264 AVC 和 MPEG-4 SP 都只能解​​码，确实处理视频播放的能力非常有限，所以我建议你使用真正的 Android 设备

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:39:26.033

您不能在模拟器上使用相机。[在 Android 模拟器中使用相机](https://stackoverflow.com/questions/2884620/using-camera-in-the-android-emulator)

不过，我在这里发现了一些有趣的东西：[Android 中的 Live Camera Previews](http://www.tomgibara.com/android/camera-source)

不要使用模拟器测试视频播放。它处理视频播放的能力非常有限。使用实际的 Android 设备。

# asp.net-mvc - 如何让 MVC 忽略未定义的部分？

> ID：10939323
> 
> 赞同：1
> 
> 时间：2012-06-07T20:25:04.027
> 
> 标签：asp.net-mvc, asp.net-mvc-3

在 ASP.NET MVC 3 中，如果您在布局中未定义的视图中定义部分，则会引发异常。有没有办法从**视图**中标记部分选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:30:41.310

当然，有一个`RenderSection`方法的重载，它采用第二个参数来定义是否需要该部分：

```
@RenderSection("javascript", false) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T04:22:20.743

您不能在布局中未定义的视图中呈现部分。

您可以假设*layout 是一个抽象类*，而*view 是一个具体的实现*。布局中定义的部分只不过是将在视图中实现的抽象方法。

因此，在视图中添加一个未在布局中定义的部分是一种实现甚至不存在的抽象方法。如果你在视图中定义一个部分，它就像向一个具体的类添加一个抽象方法，并将视图更改为一个布局。希望这能回答你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:31:54.413

```
@RenderSection("SomeSection", false)
@if (!IsSectionDefined("SomeSection")) { } 
```

第二部分不是必需的，但如果你想在默认情况下做某事，如果它不可用。

# asp.net-mvc-3 - 添加谷歌recaptcha服务器端验证MVC3

> ID：10939329
> 
> 赞同：3
> 
> 时间：2012-06-07T20:25:34.860
> 
> 标签：asp.net-mvc-3, visual-studio-2010

我一直在遵循 google recaptcha 说明，现在我想添加服务器端验证：

[https://developers.google.com/recaptcha/docs/verify](https://developers.google.com/recaptcha/docs/verify)

但是当我查看该页面时，我得到了一些方法的描述，但没有关于我在视图中究竟写了什么的说明。我究竟在视图上写了什么来调用谷歌的验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:12:13.420

确保您在控制器中引用 Recaptcha，然后在帖子上进行验证

```
@using Recaptcha; // goes in your controller 
```

这是如何验证服务器端的示例

```
[HttpPost]
[RecaptchaControlMvc.CaptchaValidator]
public ActionResult ForgotPassword(CheckUsernameViewModel model, bool captchaValid, string captchaErrorMessage) {
    if(ModelState.IsValid) {
        if(captchaValid) {
            // do stuff
        }
        ModelState.AddModelError("", captchaErrorMessage);
    }
    return View(model);
} 
```

有关所有信息，请参阅我在此处发布的答案以正确实施演练。

[如何在 MVC3 应用程序中实现 Google reCaptcha？](https://stackoverflow.com/questions/9740402/how-to-implement-google-recaptcha-in-an-mvc3-application/9740583#9740583)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:39:17.283

您可以使用 ASP.NET Web Helpers Library。它包含呈现 ReCaptcha 的方法，以及其他常见的小部件。这是NuGet 包的[链接。](http://nuget.org/packages/microsoft-web-helpers)

# cucumber - cuke4duke.Table.rows() 和 cuke4duke.Table.raw() 有什么区别？

> ID：10939330
> 
> 赞同：1
> 
> 时间：2012-06-07T20:25:35.497
> 
> 标签：cucumber

[cuke4duke.Table.rows()](http://cukes.info/cuke4duke/cuke4duke/apidocs/cuke4duke/Table.html#rows%28%29) 和[cuke4duke.Table.raw()](http://cukes.info/cuke4duke/cuke4duke/apidocs/cuke4duke/Table.html#raw%28%29)有什么区别 ？

我发现当我传递一个只有一行的表时，rows() 返回一个大小为 0 的列表；

**黄瓜步骤**

```
Then I see the following projects in the ProjectList
| My Private Project | 
```

**Java 实现**

```
@Then ("^I see the following projects in the ProjectList$")
public void iSeeTheFollowingProjectsInProjectList(cuke4duke.Table table) {
    table.rows().size(); // gives 0 
    table.raw().size(); // gives 1 
```

~~但以下确实按预期工作~~它确实！

**黄瓜步骤**

```
Then I see the following projects in the ProjectList
| Regression Project 3 |
| My Private Project | 
```

**Java 实现**

```
@Then ("^I see the following projects in the ProjectList$")
public void iSeeTheFollowingProjectsInProjectList(cuke4duke.Table table) {
    // When I asked, I thought this was returning 2, but it's not, it's returning 1
    table.rows().size();
    table.raw().size(); // gives 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T09:24:36.973

您的结果在 Cucumber-Ruby 中无法重现。
对于第一种情况`Table#rows()`，返回 0 个结果和`Table#raw()`- 1 个结果
对于第二种情况`Table#rows()`，返回 1 个结果和`Table#raw()`- 2 个结果

`Table#rows()`将第一行识别为表头。

所以如果你的结果是真的（我没有检查过），它可能是 Cuke4Duke 中的一个错误。

[但是Cuke4Duke](https://github.com/cucumber/cuke4duke/blob/master/README.textile)上的所有工作都已失效，因此无法修复。

# c# - Ninject 使用 ninject 注入泛型类型的所有实例

> ID：10939331
> 
> 赞同：9
> 
> 时间：2012-06-07T20:25:45.407
> 
> 标签：c#, ninject, constructor-injection

我希望能够使用 ninject 将特定泛型类型的所有实例注入到一个类中。例如，我有一堆类似于以下格式的自定义提取器：

```
public interface IExtract<TEntity> 
{ 
    TEntity ExtractFrom(MyBulkExportedEntity exportedEntity);
} 
```

我想将这些提取器的所有实例注入到一个类中，该类负责使用 ninject 多重绑定处理这个文件。

IE

```
public class ProcessDataExtract
{
    /*This isn't valid c# but demonstrates the intent of what i would like to do*/
    public ProcessDataExtract(IEnumerable<IExtract<>> allExtractors)
    {
    }

    public void Process(MyBulkExportedEntity exportedEntity)
    {
        /*loop through all of the extractors and pull relevant data from the object*/
    }
} 
```

在过去，我通过拥有一个直接访问内核的管理类（IProvideExtractors）来做到这一点，但我不喜欢这种方法，并且想知道是否有人知道更好的方法来做到这一点。使用 ninject 多重绑定，我可以得到我有兴趣使用的所有实例`kernel.GetAll(typeof(IExtract<>))`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-14T11:25:29.983

我正在寻找相关的东西：我不想使用约定扩展单独指定所有绑定。

**首先：**您需要注入`List<IExtract>`和继承`IExtract<T> : IExtract`. 这仅仅是因为在 C# 中您不能指定包含不同泛型的集合的类型。正如您在问题中指出的那样，它是无效的语法 - 除了这个答案之外，还有一个很好的理由。

您可以稍后将 的元素`IExtract`从列表中拉出并使用反射来获取泛型类型参数并将其转换回来。或者，如果您知道您正在寻找什么提取器：

```
public IExtract<T> GetExtractor<T>() {
    return (IExtract<T>)Extractors.Find(e => e is ExtractImpl<T>);
} 
```

现在你可能有一堆你想要一些`T`绑定到 IExtract` 的类。

```
Bind<IExtract>().To<ExtractImpl<MyEntity>>();
Bind<IExtract>().To<ExtractImpl<YourEntity>>(); 
```

在哪里

```
MyEntity : BaseEntity
YourEntity : BaseEntity 
```

您可以指定一个约定如下

```
Kernel.Bind(x => x.FromThisAssembly().SelectAllClasses()
    .InheritedFrom<BaseEntity>()
    .BindWith(new GenericArgumentBindingGenerator(typeof(IExtract<>)))); 
```

哪里`GenericArgumentBindingGenerator`定义为：

```
public class GenericArgumentBindingGenerator : IBindingGenerator
{
    private readonly Type m_Generic;

    public GenericArgumentBindingGenerator(Type generic)
    {
        if (!generic.IsGenericTypeDefinition)
        {
            throw new ArgumentException("given type must be a generic type definition.", "generic");
        }
        m_Generic = generic;
    }

    public IEnumerable<IBindingWhenInNamedWithOrOnSyntax<object>> CreateBindings(Type type, IBindingRoot bindingRoot)
    {
        if (type == null)
            throw new ArgumentNullException("type");
        if (bindingRoot == null)
            throw new ArgumentNullException("bindingRoot");
        if (type.IsAbstract || type.IsInterface)
        {
            return Enumerable.Empty<IBindingWhenInNamedWithOrOnSyntax<object>>();
        }

        var bindings = new List<IBindingWhenInNamedWithOrOnSyntax<object>>();
        IBindingWhenInNamedWithOrOnSyntax<object> binding = bindingRoot
            .Bind(typeof(IExtract)) // you maybe want to pass typeof(IExtract) to constructor
            .To(m_Generic.MakeGenericType(type));

        bindings.Add(binding);

        return bindings;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-18T09:18:11.057

这个问题的答案似乎是没有办法用ninject做到这一点

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T20:41:48.403

**选项 A**

我很确定你可以这样做：

```
public class ProcessDataExtract
{
    public ProcessDataExtract<TExtract>(IEnumerable<IExtract<TExtract>> allExtractors)
    {
    }
    ...etc...
} 
```

`Load`然后在绑定模块的方法中列出您的绑定：

```
...
Bind<IExtract<TEntity>>().To<SomeConcreteExtract>();
Bind<IExtract<TEntity>>().To<AnotherConcreteExtract>();
Bind<IExtract<TEntity>>().To<YetAnotherConcreteExtract>();
... 
```

NInject 会将它们传递给您的构造函数，该构造函数会宣传对它们的依赖。我过去成功地做到了这一点。

**选项 B**

改变

```
public interface IExtract<TEntity> 
{ 
    TEntity ExtractFrom(MyBulkExportedEntity exportedEntity);
} 
```

到

```
public interface IExtract
{ 
    TEntity ExtractFrom<TEntity>(MyBulkExportedEntity exportedEntity);
} 
```

这将允许：

```
 public ProcessDataExtract<TExtract>(IEnumerable<IExtract<TExtract>> allExtractors)
    {
    }
    ...etc... 
```

成为：

```
 public ProcessDataExtract(IEnumerable<IExtract> allExtractors)
    {
    }
    ...etc... 
```

NInject 绑定也将被调整：

```
...
Bind<IExtract>().To<SomeConcreteExtract>();
Bind<IExtract>().To<AnotherConcreteExtract>();
Bind<IExtract>().To<YetAnotherConcreteExtract>();
... 
```

# java - Java int 数组到 StringBuilder

> ID：10939332
> 
> 赞同：5
> 
> 时间：2012-06-07T20:25:48.990
> 
> 标签：java, arrays, integer, stringbuilder

如何在while循环中将带有UTF-8字符串的int数组转换为StringBuilder？例如：
int 数组：71, 73, 70, 56, 57, 97, 149, 0, 55, 0, 247...
结果字符串： GIF89a• €÷€ € €ÀÜÀ¦Êð*?ª*?ÿ ...
该行包含拉丁文、西里尔文和亚洲字符，以及各种符号和数字

```
do buffer.append((char)num[++i]);
while((byte)buffer.charAt(buffer.length()-1) != -1); 
```

此方法分解所有非拉丁字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:35:55.460

首先将 int[] 转换为 byte[] 如下：

```
 //intArray contains your data...
    byte[] utf8bytes = new byte[intArray.length];
    for(int i = 0; i < intArray.length; i++)
    {
        utf8bytes[i] = (byte) intArray[i];
    } 
```

然后从您的字节创建一个字符串，指定 UTF-8 作为编码：

```
 String asString = new String(utf8bytes, "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:31:23.197

[您正在读取一个 GIF89a 文件](http://www.w3.org/Graphics/GIF/spec-gif89a.txt)作为每个字节一个整数，然后将其打印出来，就像它是一个文本字符串一样。主要问题是该文件中的整数（字节）实际上并未映射到有意义的文本字符，因此在映射无法呈现部分字母表的情况下，它将呈现您的文本编码要求的任何内容（在我看来很多垃圾）。

图形信息并不总是清晰地映射到文本。虽然有 256 个可能的字节值，有时一个或多个字节将代表一个字符，但英文字母表中只有 26 个字母，它们以大写和小写形式表示。除了十位数字和少量标点符号外，您还可以获得大约 80 个不同的字符，这些字符在一篇文章中很常用。剩下的 160 多个字符是控制代码、使用多字节的信号或映射到存在的字符以支持外语的显示。

该垃圾是最接近当前字符集的有效字节到字符映射的东西。如果您想要更好的输出，请尝试读取包含映射到与字符相关的数据的文件。

# delphi - 将流写入 RCDATA 资源

> ID：10939342
> 
> 赞同：6
> 
> 时间：2012-06-07T20:26:48.020
> 
> 标签：delphi, resources, stream

在 delphi 中，如何将 MemoryStream 写入数据资源？

```
procedure StringtoRes (filename:string; Inputstream: TMemoryStream);
var
 hUpdate: THandle;
begin
 hUpdate := BeginUpdateResource(PChar(filename), True);
 UpdateResource(hUpdate, RT_RCDATA, 'ID', LANG_NEUTRAL,InputStream,InputStream.Size);
 EndUpdateResource(hUpdate,False);
end; 
```

这段代码给了我访问冲突和强烈的不足感，因为我什至不知道从哪里开始修复它。有没有人？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T20:30:28.487

在 的`lpData`参数中`UpdateResource()`，需要传递`TMemoryStream.Memory`属性的值而不是`TMemoryStream`对象指针，例如：

```
procedure StringtoRes (const FileName: string; Inputstream: TMemoryStream); 
var 
  hUpdate: THandle; 
begin 
  hUpdate := BeginUpdateResource(PChar(FileName), True); 
  try
    UpdateResource(hUpdate, RT_RCDATA, 'ID', LANG_NEUTRAL, InputStream.Memory, InputStream.Size); 
  finally
    EndUpdateResource(hUpdate, False); 
  end;
end; 
```

# java - 在java中接收参数问题

> ID：10939345
> 
> 赞同：1
> 
> 时间：2012-06-07T20:26:49.947
> 
> 标签：java, android

我是 Android 新手，正在尝试开发一个简单的 Android 应用程序。我正在尝试将来自不同活动的两个值作为参数发送给第三个。问题是我使用这两个值的方法没有看到用户输入的值。提前致谢。该活动中的代码是：

```
public class NewAcount extends Activity {

    private DecimalFormat twoDigits = new DecimalFormat("0.00");
    TextView final_Amount;
    EditText price, amount_Entered;
    double userr_Entered_Amount, itemPricee, result;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        setContentView(R.layout.transparent);
        // amount of money the user wants to spend daily
        amount_Entered = (EditText) findViewById(R.id.et_Amount);
        // item price
        price = (EditText) findViewById(R.id.et_Price);

        final_Amount = (TextView) findViewById(R.id.tv_Account_Result);
        // set the text view value
        final_Amount.setText(twoDigits.format(getTotal()));

    }

    public double getItemPrice(double itemPrice) {
        this.itemPricee = itemPrice;
        System.out.println("the item price in the new account activity is "
                + itemPricee);

        return itemPricee;
    }

    public double getUserAmountEntered(double user_Entered_Amount) {

        this.userr_Entered_Amount = user_Entered_Amount;
        System.out.println("the user amount in the new account activity is "
                + userr_Entered_Amount);

        return userr_Entered_Amount;

    }

    public double getTotal() {
        // Here where the problem is. it's not seeing
        // userr_Entered_Amount and itemPricee
            // and returns result as zero

result=getUserAmountEntered(userr_Entered_Amount)-getItemPrice(itemPricee);

        System.out.println("the result is " + result);
        return result;
    }

} 
```

FinanceAppActivity.java 我正在发送输入的金额：

```
 if (amount_Entered.getText().toString().length() > 0) {
        // start your expenses app activity
        Intent openYourExpensesActivity = new Intent(
                "android.intent.action.FINANCESQLLITE");
        startActivity(openYourExpensesActivity);
        double user_Entered_Amount=Double.parseDouble(amount_Entered.getText().toString());
        //send amount entered to new account activity           
        NewAcount na=new NewAcount();           
        na.getUserAmountEntered(user_Entered_Amount);
    } 
```

YourExpenses.java 发送项目价格

```
 // to determine which button was clicked
    switch (v.getId()) {
    case R.id.btn_Add:
        boolean didItWork = true;
        try {
            String itemName = item.getText().toString();
            itemPrice = Double.parseDouble(price.getText().toString());         
            Price entry = new Price(YourExpenses.this);
            entry.open();
            // passing both strings to create entry method
            entry.creatEntry(itemName, itemPrice);  
            entry.close();
            NewAcount na=new NewAcount();
            //send item price to new account activity
            na.getItemPrice(itemPrice);
        } catch (Exception e) {
            //code here                 
        } finally {

            if (didItWork) {
                Dialog d = new Dialog(this);
                d.setTitle("Inserted successfully!");
                TextView tv = new TextView(this);
                tv.setText("Success");
                d.setContentView(tv);
                d.show();
                try {
                    Thread.sleep(500);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                Intent openNewAccount = new Intent("android.intent.action.TRANSPARENT");
                startActivity(openNewAccount);

            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:30:51.897

您只是想调用公共功能吗？这是行不通的，因为“通常”一次只有一个 Activity 有前景。您可以将带有意图的值作为附加值传递，使用共享首选项，最极端的扩展应用程序并使用它来容纳所有数据。

# xcode - 我在哪里可以找到 Core Image Fun House 应用程序

> ID：10939346
> 
> 赞同：4
> 
> 时间：2012-06-07T20:27:00.907
> 
> 标签：xcode, ios5, core-image

我知道这不是技术问题，但我希望这里的其他开发人员可以帮助我。我正在开始一个需要利用 CIFilters 的项目，我知道在以前版本的 Xcode 中，捆绑了 Core Image Fun House。我在我的机器上的任何地方都找不到它，我还下载了其他开发人员工具来自 Apple 开发网站。

Core Image Fun House 不再支持和分发了吗？如果没有，是否有人有另一个应用程序，我可以在编写实际代码之前弄乱各种 CIFilter 选项？这可能会加快开发速度并减少猜测和检查。

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T18:52:28.537

[这篇博客文章](http://cmwolfe.blogspot.com/2012/08/core-image-fun-house-on-mountain-lion.html)向您展示了从哪里获取它以及如何为现代版本的操作系统编译它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-06T18:55:31.987

As mentioned previously, the link posted by @TOMATO is for the deprecated version. The new version, and other WWDC 2013 code, is available via these steps:

*   Navigate to :[https://developer.apple.com/wwdc/resources/](https://developer.apple.com/wwdc/resources/)
*   Click on WWDC 2013 Sample Code
*   (Log in)
*   Download iOS_CIFunHouse.zip and iOS_DeHaze.zip

Credit to the Core Image evangelist, Allan Schaffer.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-29T00:26:55.787

看起来它已被弃用：[https ://developer.apple.com/legacy/library/samplecode/FunHouse/Introduction/Intro.html](https://developer.apple.com/legacy/library/samplecode/FunHouse/Introduction/Intro.html)

# java - 使用反射编写通用 Java 对象映射器的指南

> ID：10939348
> 
> 赞同：0
> 
> 时间：2012-06-07T20:27:18.490
> 
> 标签：java, reflection, mapping, persistence

我想**为 Java 对象编写一个通用映射器**，将它们映射成**另一种格式**。通常有设计良好的解决方案，但是在这种情况下，目前的解决方案是**不可配置**的，并且输出不是我想要的。

我已经开始**使用 Annotations 和 Java Reflection 编写我的自制解决方案**。问题是我注意到有很多**边缘情况**，例如如何一般地处理枚举、集合等。所有这些都必须考虑，当你的示例数据集没有涵盖所有边缘情况时，这并不容易找到一切。

是否有类似**指南**来查找应该考虑的所有**不同类型的 Java 类型，这样我就不会错过实现中的某些内容？**

# ember.js - 哪个更快：（ arr.contains(val) || $.inArray(val,arr) ）？

> ID：10939349
> 
> 赞同：0
> 
> 时间：2012-06-07T20:27:21.517
> 
> 标签：ember.js

哪个更快？

```
arr.contains(val); 
```

或者

```
$.inArray(val, arr); 
```

有没有准确的测试方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T00:22:16.287

如果您正在寻找一种简单的 JS 基准测试方法，我建议您使用 jsperf.com。

# iphone - 如何将选择器视图的指示器设置为特定值

> ID：10939350
> 
> 赞同：0
> 
> 时间：2012-06-07T20:27:31.563
> 
> 标签：iphone, uipickerview

当您单击按钮时，我的单元格包含一个按钮，选择器视图将像下面的图像一样弹出操作![在此处输入图像描述](../Images/40e7074af2aaa244ad71d865c049fd0e.png)

**问题 ：**

如何更改，以使指标移动到我的按钮中显示的正确值。

例如，我的按钮显示 8，如果您点击它，将弹出选择器视图，指示器选择 8。

如果你知道如何定制这个。请就这个问题给我建议。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:42:12.677

您可以执行以下操作：

```
- (void)selectRow:(NSInteger)row inComponent:(NSInteger)component animated:(BOOL)animated 
```

您可以通过为按钮添加 IBAction 来使用它。

```
-(IBAction)userTappedNumber{
    //Call your picker view's method here.
    [self.pickerView selectRow:8 inComponent:0 animated:YES];
} 
```

为了将来参考，请尝试查看 Apple 的参考资料，并在提出简单问题之前通过 google 和 Stack Overflow 搜索搜索类似问题。 [Apple 的 UIPickerView 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPickerView_Class/Reference/UIPickerView.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:30:54.300

使用这个方法

```
- (void)selectRow:(NSInteger)row inComponent:(NSInteger)component animated:(BOOL)animated 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-15T22:58:05.940

有一种方法可以在不知道其在数组中的位置的情况下找到特定值。

首先，将您要查找的值转换为字符串

```
stringValue = [NSString stringWithFormat:@"%d",intValue]; 
```

其次，创建一个循环来查找数组中的值并选择它：

```
int i = 0;
    for(NSString* number in arrayName)
    {
        if ([stringValue isEqualToString:number]){
            [pickerViewName selectRow:i inComponent:0 animated:YES ];
        }
        i++;
    } 
```

# ubuntu - 提取时出现意外的 EOF 错误。

> ID：10939354
> 
> 赞同：0
> 
> 时间：2012-06-07T20:27:57.280
> 
> 标签：ubuntu, tar

我的 tar 存档有问题

我已经尝试过其他线程[Tar error: Unexpected EOF in archive](https://stackoverflow.com/questions/1325888/tar-error-unexpected-eof-in-archive)但我的问题以不同的方式出现。

历史。

在我的旧 Ubuntu 笔记本电脑死机后，我得到了一台新笔记本电脑。我拔出硬盘并压缩了我的旧主目录。

在我的新系统上安装 Ubuntu 后，我复制了 OLDhome.tar.gz 文件。

我单独提取了一些文件，但直到最近才真正需要旧房子上的任何东西。

我最近使用 Ubuntu 附带的默认存档管理器打开了存档，在打开时我收到了上面的错误消息。

最初的家庭驱动器大小约为 30GB（在压缩之前）。我可以“解压缩”存档，它大约为 1.2 GB，如果我使用 gzrecover 实用程序，我只能提取少量的原始文件和目录（使用 cpio）。

这是我的问题。有什么方法可以“恢复”我保存到磁盘上的原始文件（记得我之前可以打开它并从中提取文件），因为我觉得文件现在比它小得多曾是。

这是由于我提取了存档深处的几个单独文件造成的吗？

磁盘上是否还会有原始存档的“足迹”（就像删除文件仅标记磁盘上的扇区以允许它们被覆盖一样），如果是这样，是否有工具可以访问它？

我现在丢失了一些我不想丢失的半重要文件，我认为我的存档是它们的合理备份。

存档是使用默认存档器 om xubuntu 12.04（64 位）制作的。

原来的家早已不复存在，我用外部驱动器备份了我妻子的电脑，然后“清理”它并为她重新安装窗户。该驱动器已多次“格式化”（请记住，几周前我还可以访问存档并从中提取了一些我需要的文件）。

提前感谢您的任何建议。

大卫。

# configuration - 使用设置 Jetty 类路径的问题

> ID：10939356
> 
> 赞同：5
> 
> 时间：2012-06-07T20:28:06.577
> 
> 标签：configuration, jetty, classpath, classnotfoundexception

我有一个不想与我的 web 应用程序捆绑在一起的外部 jar。我把它放在码头的类路径上。不幸的是，我部署的环境非常严格，我只能写入两个目录：一个包含上下文，一个包含 webapps。

我选择将我的外部 jar 放在 webapp 目录中。为了让它对我的 webapp 可见，我正在配置 WebAppContext 以查看这个额外的 jar。这是我的 myAppContext.xml 文件

```
<Configure id="myContext" class="org.mortbay.jetty.webapp.WebAppContext">
<Set name="contextPath">/myApp</Set>
<Set name="war"><SystemProperty name="jetty.home" default="."/>/webapps/myApp.war</Set>
<Set name="defaultsDescriptor"><SystemProperty name="jetty.home" default="."/>/etc/webdefault.xml</Set>
<Set name="extraClasspath"><SystemProperty name="jetty.home" default="."/>/webapps/myExternalJAR.jar</Set>
<New class="com.mycompany.mypackage.MyExternalClass"></New> 
```

最后一行尝试实例化可以在我的外部 jar 中找到的 MyExternalClass。启动码头时，我在配置文件的这一行得到一个 ClassNotFoundException。

有什么我想念的吗？根据规范，这应该有效。对于如何处理此问题的任何建议，我将不胜感激。

# arrays - 将相同的数组分配给行列表

> ID：10939361
> 
> 赞同：0
> 
> 时间：2012-06-07T20:28:22.610
> 
> 标签：arrays, matlab, matrix

我有一个对应于一些 x,y 值的 nx2 矩阵，我想做的是用一些值替换 1x2 行的子集。目前我使用 find() 获取该子集。例如，如果我有以下矩阵：

```
 k=    [1 2
        3 4
        5 6
        7 8
        9 0] 
```

我在其他一些相关的 5x1 数组上使用 find() 来表示索引

```
indices = [1 3 5] 
```

然后，我想快速将 k 中的第 1、3 和 5 行更改为相同的预定行，例如 [-2 -6]。所以结果会是...

```
 k=     [-2 -6
          3  4
         -2 -6
          7  8
         -2 -6] 
```

我知道对于单个行，我可以只执行 k(1,:) = [-2 -6] 但我似乎无法找到通常对行列表执行此操作的语法。k(indices,:) = [-2 -6] 不是有效的语法。对于第 1 列和第 2 列，当然有两行解决方案，但我认为有一种紧凑的方法可以做到这一点。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:50:12.277

您需要确保要放入旧矩阵的矩阵的大小与要替换的元素的大小相同。在这种情况下，`size(k(indices,:)) = [3 2]`。用于`repmat`生成合适大小的矩阵，然后赋值成功。

```
replacement = [-2 -6];

k(indices,:) = repmat(replacement,length(indices),1)

k =

-2    -6
 3     4
-2    -6
 7     8
-2    -6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:16:00.407

您还可以使用单索引重复该行：

```
row = [-2 -6];
k(indices,:) = row(ones(size(indices)),:); 
```

# php - 这个 MySQL 查询 (PHP) 有什么问题？

> ID：10939369
> 
> 赞同：1
> 
> 时间：2012-06-07T20:28:55.883
> 
> 标签：php, mysql, mysqli

所以我有一小段代码由于某种原因不想实际工作。我一直试图找出原因，但无济于事。

```
$mysqli =& db::connect();

$sql = "SELECT * FROM `my_table`";
$result = $mysqli->query($sql);
if( ! $result ) die( "SQL Error ($mysqli->errno): $mysqli->error" );
while($row = $result->fetch_assoc())
{
//Do something here
} 
```

我收到以下错误：

> PHP 致命错误：在非对象上调用成员函数 fetch_assoc()

尝试运行该脚本时。

有什么建议么？

编辑：如有必要，请提供更多信息：我要查询的表中有 174 条记录。运行 PHP 5.3 和 MySQL 5.1。我可以在 phpMyAdmin 中毫无问题地运行相同的查询。

编辑 2：是的，这是完整的查询。这是 var_dump 的结果：

```
object(mysqli_result)#2 (5) { 
    ["current_field"]=> int(0) 
    ["field_count"]=> int(16) 
    ["lengths"]=> NULL 
    ["num_rows"]=> int(174) 
    ["type"]=> int(0) 
} 
```

编辑3：剪掉它，因为它根本没有用。

编辑4：

我似乎找不到任何关于为什么不能在 while 循环中使用 mysqli_result 对象的信息。我找到的每个答案最终都会回到“确保你有一个 mysqli_result”，从上面的 var_dump 可以看出，我肯定会这样做。稍后我将不得不回到这一点，但任何建议都会很棒。

编辑5：

感谢@Quassnoi 在检查 $result 变量上的辅助分配方面的提示。在循环执行期间就是这种情况，因为我有一个条件语句可以检查数据库的另一部分，但仅限于某些条件。对于这样的小条件检查，我可能应该坚持使用准备好的语句。

# iphone - 如何按字母顺序排列 MPMusicPlayerController？

> ID：10939372
> 
> 赞同：1
> 
> 时间：2012-06-07T20:29:03.270
> 
> 标签：iphone, ios, xcode, mpmusicplayercontroller, mpmediaquery

我需要按字母顺序排列 ipod 队列。

使用以下代码，歌曲不按字母顺序排列

```
MPMediaQuery *everything = [[MPMediaQuery alloc] init];

everything = [MPMediaQuery songsQuery];

[musicPlayer setQueueWithQuery:everything];

[self.musicPlayer play] 
```

使用以下代码，歌曲按字母顺序排列，但加载时间超过 60 秒

```
MPMediaQuery *everything = [[MPMediaQuery alloc] init];

everything = [MPMediaQuery songsQuery];

[everything setGroupingType: MPMediaGroupingTitle];

NSArray *collections = [everything collections];

MPMediaItemCollection *firstCollection = [collections
objectAtIndex:0];

NSMutableArray *combinedMediaItems = [[firstCollection items]
mutableCopy];

for(int i = 1; i < [collections count]; i++) {

    NSArray *newMediaItems = [[collections objectAtIndex:i] items];

    [combinedMediaItems addObjectsFromArray: newMediaItems];

}

[self.musicPlayer setQueueWithItemCollection: [MPMediaItemCollection
collectionWithItems: (NSArray *) combinedMediaItems]];

[self.musicPlayer play]; 
```

你能帮助我吗？谢谢。

# iphone - 子类化 UIView 但没有接触

> ID：10939373
> 
> 赞同：0
> 
> 时间：2012-06-07T20:29:03.810
> 
> 标签：iphone, ios, uiview

所以我有一个用 IB 制作的 UIView。我将该类设置为我的自定义 UIView 类，以便我可以从该视图中获取触摸。但由于某种原因，我屏幕上的 UIView 不是我的自定义类。我试着铸造它：

```
myView = (CustomUIView *)myView; 
```

我还尝试将其设置为等于 CustomUIView：

```
myView = [[CustomUIView alloc] init]; 
```

（当我将对象添加到屏幕时，这会导致错误（我猜这是因为我已经覆盖了 IBOutlet 或其他东西。

那么我怎样才能从这个视图中获得触摸（触摸开始，触摸取消等）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:33:13.733

看看将 UIGestureRecognizers 添加到您的视图中。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html)

我认为这是你最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:40:32.683

确保您的插座也符合`CustomUIView`标题中的新类：

```
#import "CustomUIView.h"

.....

IBOutlet CustomUIView *myView; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:53:38.557

您可以以编程方式进行，

```
CustomUIView *custom = [[CustomUIView alloc] initWithFrame:self.view.frame];
self.view = custom;
[custom release]; 
```

并在 CustomUIView 上实现 UIResponder

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

}
- (void)touchesCancelled:(NSSet *)touches withEvent:(UIEvent *)event {

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T21:51:40.823

大声笑方式愚蠢，我有另一个 UIView 以编程方式添加到 customUIView 填充 customUIView 防止任何触摸通过。

# javascript - Javascript RegExp，在捕获组中失败

> ID：10939374
> 
> 赞同：0
> 
> 时间：2012-06-07T20:29:04.237
> 
> 标签：javascript, regex, capture-group

```
"aaa bbb ccc \n.000.\n 111".match(/^(?=\.).*(?=\.$)/m) 
```

我在上面的代码中寻找的结果是`000` 但一直给我`.000`，请注意零之前的点。最后一个点可以正常工作，但第一个点不行。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:32:32.923

似乎您想使用后视 ( `/(?<=^\.).*(?=\.$)/m`)，JavaScript 没有这些。请改用捕获组。

```
/^\.(.*)\.$/m 
```

例如：

```
var match = str.match(/^\.(.*)\.$/m);
alert(match[1]); 
```

# javascript - 在 Ember.js 路由中使用动态段

> ID：10939377
> 
> 赞同：0
> 
> 时间：2012-06-07T20:29:19.643
> 
> 标签：javascript, ember.js

我无法理解 Ember.js 路由的工作原理，尤其是如何使用路由中的动态段。

例如，如果您想从重置密码页面获取令牌并在表单提交中使用它，您将如何获取令牌？下面的代码尝试在页面上打印令牌作为中间步骤，但它不会呈现 TokenView。做错了什么？谢谢。

```
window.App = Em.Application.create({});

App.IndexView = Em.View.extend({
    template: Em.Handlebars.compile(
        '<h1>Index</h1>'
    )
});

App.ResetView = Em.View.extend({
    template: Em.Handlebars.compile(
        '<h1>reset view </h1>'
    )
});

App.TokenView = Em.View.extend({
    template: Em.Handlebars.compile(
        '<h1>token view {{token_id}}</h1>'
    )
});

App.Router = Ember.Router.extend({

    rootElement:'#content',
    location: 'hash',
    enableLogging: true,

    root: Ember.State.extend({

        index: Ember.ViewState.extend({
            route: '/',
            view: App.IndexView
        }),

        passwordReset: Ember.ViewState.extend({
            route: '/reset',
            view: App.ResetView,

            token: Ember.ViewState.extend({
                route: '/:token_id',
                view: App.TokenView
            })
        })
    })
});

App.router = App.Router.create();
App.initialize(App.router); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:51:59.960

您应该查看最先进的文档，了解`Router`哪些正在进行中但可用@ [https://emberjs-staging-new.herokuapp.com/guides/outlets#toc_the-router](https://emberjs-staging-new.herokuapp.com/guides/outlets#toc_the-router)

# javascript - 链接到单独页面上的 div 并在单击链接时突出 显示 div

> ID：10939378
> 
> 赞同：-2
> 
> 时间：2012-06-07T20:29:22.100
> 
> 标签：javascript, jquery

我试图在侧面导航中突出显示特定的 div onclick 链接。到目前为止，它可以工作（在默认页面上），但是当您转到不同的页面然后单击侧面导航中的项目时，它将锚定到指定的 div，但不会突出显示。我需要重新点击链接才能突出显示。

```
var App = {
    SetBaseLine: function() {
    jQuery("#priceRange, #satisfaction").removeClass("activeListColor");
    }
};

jQuery(document).ready(function() {
    jQuery('a#priceLink').click(function(e) {
        App.SetBaseLine();
        jQuery('#priceRange').addClass('activeListColor');
    });
    jQuery('a#satisfactionLink').click(function(e) {
        App.SetBaseLine();
        jQuery('#satisfaction').addClass('activeListColor');
    });

    <div id="priceRange">
            <div class="header">Price Range<br /><a id="button1" href="javascript:toggle3('colcontent1','button1');" ><img src="images/more-info-button.png" width="76" height="20" /></a></div>
            <div class="col2 topSpace">Packages  start at $29.99/month</div>
            <div class="col3"><span>Best Value</span><img src="images/red-trophy.png" class="trophy" /><br />Packages  start at $19.99/month</div>
            <div class="col4 topSpace">Packages  start at $29.99/month</div>
    </div> <!-- End of priceRange div -->

<div id="satisfaction">
         <div class="header">Customer Satisfaction <br /><a id="button2" href="javascript:toggle3('colcontent2','button2');" ><img src="images/more-info-button.png" width="76" height="20" /></a></div>
            <div class="col2 topSpace">American  Customer Satisfaction Index (ACSI) Rating: 68 </div>
            <div class="col3"><span>Most Popular</span><img src="images/red-trophy.png" class="trophy" /><br />American  Customer Satisfaction Index (ACSI) Rating: 71 </div>
            <div class="col4 topSpace">American  Customer Satisfaction Index (ACSI) Rating: 61 </div>
    </div> <!-- End of satisfaction div --> 
```

有什么建议么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:16:43.167

当您更改页面时，DOM 没有及时准备好移除和添加高亮类。

所以你可以做的是设置一个全局变量，每当你加载页面时，你想要突出显示的列表项，你检查该变量的值并突出显示相应的列表项，然后将其无效。

# javascript - 制作动画时防止矢量缩小到其原始大小

> ID：10939382
> 
> 赞同：0
> 
> 时间：2012-06-07T20:29:37.053
> 
> 标签：javascript, vector, svg, raphael

在我的演示中：http: [//jsfiddle.net/7QA43/8/](http://jsfiddle.net/7QA43/8/) 我已经将矢量设置为它的大小的 3 倍，并且在滚动时它只需要旋转 90 度，而是缩小到原来的大小。有没有办法防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:39:08.037

尝试添加`s3`到您的变换动画中。

```
function hovering(e){
         this.animate({
            transform: 'r90,s3',
             'stroke-width':'5'
        }, 500);
} 
```

[http://jsfiddle.net/7QA43/9/](http://jsfiddle.net/7QA43/9/)

# jquery - 使用jQuery淡入网页

> ID：10939384
> 
> 赞同：1
> 
> 时间：2012-06-07T20:29:45.033
> 
> 标签：jquery

我正在尝试做的事情：

```
#leftSide          #rightSide (display:none)
 _______________ _______________________________________________
|               |                                               |
| category      |                                               |
|  -link        |                                               |
|  -link        |                                               |
|               |                                               |
| category      |                                               |
|  -link        |                                               |
|  -link        |                                               |
|               |              content                          |
|               |                                               |
|               |                                               |
|               |                                               |
|               |                                               |
|               |                                               |
|               |                                               |
|               |                                               |
|               |                                               |
|_______________|_______________________________________________| 
```

每次我单击某个类别中的链接时，我都想淡入`#rightSide`该链接的内容。

我知道如何在 onclick 中淡入淡出，但我不知道如何在不刷新页面的情况下每次加载新内容。

任何帮助表示赞赏，不一定要调用。有没有人这叫什么，在不刷新页面的情况下加载内容？任何指针表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:36:27.600

> 有没有人这叫什么，在不刷新页面的情况下加载内容？

那是[阿贾克斯](http://en.wikipedia.org/wiki/Ajax_%28programming%29)。

* * *

* * *

至于您的问题，`rel`请为左侧栏中的链接分配属性：

```
<a href="#" rel="div_1">Link 1</a>
<a href="#" rel="div_2">Link 2</a>
<a href="#" rel="div_3">Link 3</a> 
```

然后为每个具有与其属性相同的值的链接分配`id`元素`div`（假定在您的内容区域内）`rel`：

```
<div id="div_1">Div 1</a>
<div id="div_2">Div 2</a>
<div id="div_3">Div 3</a> 
```

现在有了 jQuery，你只需要这样做：

```
$('a[rel^=div]').click(function(){
  $('#' + this.rel).fadeIn();
}); 
```

这样当一个链接被点击时，jQuery 会读取它的值并在你的内容区域显示相应的 div 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:34:26.833

看一下[加载](http://api.jquery.com/load/)方法。您将处理点击事件，通过 AJAX/.load 拉入内容并应用您想要的任何效果。就像是：

```
$("link").click(function() {
    var $content = $("#rightSide");

    $content.fadeOut(1000, function() {
        // Load content after transition is completed
        $content.load("aUrl", function() {
            // Show content after content is fetched
            $content.fadeIn(1000);
        });
    }); 

    return false;
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:34:40.717

一个非常基本的实现：

```
$('#left-list').on('click', 'a:link', function(){
    var href = $(this).attr('href');
    $('#right-side').fadeOut(500, function(){
        $(this).load(href, function(){
            $(this).fadeIn(500);
        });
    });

    return false;
}); 
```

但是有一些事情，例如更新您的 URL 以及您需要考虑的事情。

看看这篇文章：[http](http://tutorialzine.com/2009/09/simple-ajax-website-jquery/) ://tutorialzine.com/2009/09/simple-ajax-website-jquery/ - 它涵盖了使用 jQuery 加载内容，包括保留 URL。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T20:57:44.623

我会在淡出的同时立即发送 ajax 请求`#rightSide`，然后在新内容可用时立即开始淡入。

```
$("#leftSide").on("click","a[href]",function(e){
    e.preventDefault();
    $("#rightSide").stop(true,true).fadeOut();
    $.get(this.href).done(function(){
        $("#rightSide").stop(true,true).fadeIn();
    });
}); 
```

这样做的好处是内容立即开始加载，而不是在右侧完成淡出时开始加载，并且内容在可用时立即开始淡入，而不是等待先前的内容淡出。

我不建议在这种情况下使用动画，但这是你的决定。

# entity-framework - 实体框架如何只选择几个字段或用 STE 延迟加载？

> ID：10939389
> 
> 赞同：1
> 
> 时间：2012-06-07T20:29:54.247
> 
> 标签：entity-framework, lazy-loading, self-tracking-entities

我正在使用实体框架和原始 sql 查询。我有一个观点，但在某些情况下，我只想获得几个字段，因为一个字段是文件流并且它的大小很大。

但是，当我使用例如以下 sql 时：

```
select Name, Surname from persons 
```

我得到一个例外，说读者没有字段 XXX。这是因为我的视图实体，拥有视图的所有字段，但是执行查询时，结果并没有返回所有字段。

我想使用原始 sql 并获取类型人员的列表，我的意思是我想避免使用 var 类型。

我不能使用延迟加载，因为我使用的是 STE，并且自跟踪实体不支持延迟加载。

可以这样做吗？只选择视图的几个字段，还是只使用我需要的字段创建一个新视图？如果这是正确的，实体框架只能返回所有字段吗？在某些情况下，这可能效率低下。

总之，我想知道是否可以只选择一些带有 STE 和原始 sql 的字段。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T20:37:05.863

我不太确定是否将其应用于自我跟踪实体，但您过去一直这样做的方式是使用比您的实体更小的匿名类（或您创建的类）：

```
context.People.Select(p=>new { Name = p.Name, Surname = p.Surname }) 
```

这将执行类似于您的问题中列出的 SQL 选择

# amazon-web-services - 将本地文件放入 Amazon EBS 卷的最快方法是什么？

> ID：10939390
> 
> 赞同：2
> 
> 时间：2012-06-07T20:29:56.880
> 
> 标签：amazon-web-services

我一直在使用多部分上传将 200+GB 的文件放入 S3。然后我必须通过 Web 界面将其下载到 EBS 卷中。还有比这更有效的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T21:07:06.817

您可以将 EBS 卷附加到 EC2 实例并在该实例上运行 FTP 服务器。将 FTP 服务器指向附加的 EBS 卷，然后通过 FTP 上传您的文件 - 它将直接写入 EBS 卷。

您可能希望使用可以支持恢复中断传输的 FTP 服务器和客户端，例如[FileZilla](http://filezilla-project.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:13:42.570

**选项 A**

使用 AWS Import/Export 服务将文件复制到硬盘并将物理媒体运送到 Amazon 可能会更快、更容易：

> [http://aws.amazon.com/importexport/](http://aws.amazon.com/importexport/)

然后，AWS 会将内容复制到您指定的 S3 或 EBS 卷中，并将磁盘寄回给您。

**选项 B**

这是我建议测试的另一种方法：

1.  将文件分成多个部分（例如，使用“split”）

2.  创建 EBS 卷并附加到正在运行的 EC2 实例（较大以获得高带宽）

3.  rsync 使用压缩 (-z) 与多个并行运行的 rsync 进程同步片段。 *并行处理多个以解决延迟问题至关重要，否则会减慢传输速度。*

4.  将这些片段粘贴回目标 EBS 卷上的单个文件中（例如，使用“cat”）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T03:45:15.257

为什么不将 EBS 附加到 EC2 实例，然后只保存`rsync`文件？`rsync`如果文件传输在完成之前断开连接，则允许您执行从压缩到自动完成的所有操作。

`rsync -a --progress myfile ec2-50-19-445-218.compute-1.amazonaws.com:~/`

# python - 当 nan 在列表中排在第一位时，matplotlib 问题

> ID：10939391
> 
> 赞同：3
> 
> 时间：2012-06-07T20:29:59.680
> 
> 标签：python, graph, matplotlib, nan, figure

我有两个数字列表，我使用 matplotlib 在 Python 中绘制图形。但是，如果其中一个列表以 nan 的值开头，matplotlib 将不会绘制我拥有的 15k+ 点中的任何一个。但是，如果在第一个值之后的列表中某处有一个 nan 值，它会简单地跳过它并很好地绘制其他点。我很好奇如何在不改变第一个 nan 值的情况下解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:44:31.227

您可以使用该`numpy.isnan`功能来掩盖您的列表：

```
a=np.array([np.nan,1,2,3,4,np.nan])
mask=~np.isnan(a)
maskedA=a[mask]

#... Plot maskedA here, continue working with a as you normally would. 
```

我不确定你为什么要保留第一个 nan 值——除了简单地忽略它之外，你还想让 matplotlib 做什么？即你的这个陈述是什么意思——“我很好奇如何在不改变第一个 nan 值的情况下解决这个问题。”

# jquery - 使用 $.getJSON 方法和 PHP

> ID：10939403
> 
> 赞同：1
> 
> 时间：2012-06-07T20:30:49.003
> 
> 标签：jquery, getjson

我正在尝试使用 $.getJSON 函数返回数据。我有以下名为 page.html 的 html 文件

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" " http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd ">
<html xmlns=" http://www.w3.org/1999/xhtml ">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Request json test</title> 
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $("button").click(function(){

    $.getJSON("json-data.php",function(result){
     alert(result);
    });

  });

});
</script> 
</head>
<body>
<button>Get JSON data</button>
<div id="showdata"></div>
</body>
</html> 
```

我还有以下名为 json-data.php 的 PHP 文件：

```
<?php
//request data from the database
//code here to connect to database and get the data you want

/* Example JSON format 
{
  "item1": "I love jquery4u",
  "item2": "You love jQuery4u",
  "item3": "We love jQuery4u"
}
*/
$item1 = "I love jquery4u";
$item2 = "You love jquery4u";
$item3 = "We love jquery4u";
//return in JSON format
echo "{";
echo "item1: ", json_encode($item1), "\n";
echo "item2: ", json_encode($item2), "\n";
echo "item3: ", json_encode($item3), "\n";
echo "}";
?> 
```

我只是尝试使用警报功能来查看 PHP 文件中的数据，但是它不起作用。有谁知道为什么？

谢谢，吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:34:37.410

这是因为您的 json 格式无效：

```
$items = array("item1" => "I love jquery4u", "item2" => "You love jquery4u", "item3" => "jquery4u");

echo json_encode($items); 
```

# php - 确定纬度/经度是否在界限内

> ID：10939408
> 
> 赞同：12
> 
> 时间：2012-06-07T20:30:59.340
> 
> 标签：php, javascript, geospatial

我有兴趣确定 lat/lng 位置是否在范围内，并寻找有关算法的建议。（javascript或php）

这是我到目前为止所拥有的：

```
var lat = somelat;
var lng = somelng;

if (bounds.southWest.lat < lat && lat < bounds.northEast.lat && bounds.southWest.lng < lng && lng < bounds.northEast.lng) {
     'lat and lng in bounds
} 
```

这行得通吗？谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-07T21:24:38.757

您帖子中的简单比较适用于美国的坐标。但是，如果您想要一个安全地检查国际日期变更线（经度为 ±180°）的解决方案：

```
function inBounds(point, bounds) {
    var eastBound = point.long < bounds.NE.long;
    var westBound = point.long > bounds.SW.long;
    var inLong;

    if (bounds.NE.long < bounds.SW.long) {
        inLong = eastBound || westBound;
    } else {
        inLong = eastBound && westBound;
    }

    var inLat = point.lat > bounds.SW.lat && point.lat < bounds.NE.lat;
    return inLat && inLong;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-02T23:43:40.683

当您询问 Javascript 和 PHP（我在 PHP 中需要它）时，我将 CheeseWarlock 的出色答案转换为 PHP。与 PHP 一样，它的优雅程度要低得多。:)

```
function inBounds($pointLat, $pointLong, $boundsNElat, $boundsNElong, $boundsSWlat, $boundsSWlong) {
    $eastBound = $pointLong < $boundsNElong;
    $westBound = $pointLong > $boundsSWlong;

    if ($boundsNElong < $boundsSWlong) {
        $inLong = $eastBound || $westBound;
    } else {
        $inLong = $eastBound && $westBound;
    }

    $inLat = $pointLat > $boundsSWlat && $pointLat < $boundsNElat;
    return $inLat && $inLong;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-20T07:39:00.923

这是 CheeseWarlock 的 Js 答案的略微优化版本，即短路。

```
const inBounds = (point, bounds) => {
    const inLat = point.lat > bounds.sw.lat && point.lat < bounds.ne.lat
    if (!inLat) return false

    const eastBound = point.lng < bounds.ne.lng
    const westBound = point.lng > bounds.sw.lng
    return (bounds.ne.lng < bounds.sw.lng)
        ? eastBound || westBound
        : eastBound && westBound
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-04T11:53:41.280

这是我的代码，我为 mysql 修改了它的 mysql 函数，现在我们可以直接从 sql 查询中检查我们的 long lat 是否在界限内。

特别感谢[CheeseWarlock](https://stackoverflow.com/users/1399558/cheesewarlock)和[Chris Rae](https://stackoverflow.com/users/498949/chris-rae)的解决方案谢谢先生

```
select inBounds("58.25173","-100.21041","89.71691425364952","180","-88.9294031317244","-180") 
```

你可以像这样在查询中调用这个函数

```
DELIMITER $$
CREATE FUNCTION inBounds(pointLat FLOAT, pointLong FLOAT, boundsNElat FLOAT, boundsNElong FLOAT, boundsSWlat FLOAT, boundsSWlong FLOAT) RETURNS VARCHAR(30)
 BEGIN
  DECLARE westBound FLOAT ;
  DECLARE eastBound FLOAT ;
  DECLARE inLong FLOAT DEFAULT 0 ;
  DECLARE inLat FLOAT DEFAULT 0 ;
  IF (pointLong < boundsNElong) THEN 
    SET eastBound = 1;
  End if;
  IF (pointLong > boundsSWlong) THEN
    SET westBound = 1;
  End if;

  IF (boundsNElong < boundsSWlong) THEN
      IF (eastBound || westBound) THEN
         SET inLong = 1;
     END if;
  ELSE 
     IF (eastBound && westBound) THEN 
         SET inLong = 1;
     END IF;
  END IF;
  IF (pointLat > boundsSWlat && pointLat < boundsNElat) THEN
    SET inLat = 1;
  END IF;
  RETURN inLat && inLong;
END$$
DELIMITER ; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-26T14:00:36.430

我尝试过以下方法对我有用。

```
 bool inBounds(LatLng point, LatLngBounds bounds) {
    var x1 = math.min(bounds.southwest.latitude, bounds.northeast.latitude);
    var x2 = math.max(bounds.southwest.latitude, bounds.northeast.latitude);
    var y1 = math.min(bounds.southwest.longitude, bounds.northeast.longitude);
    var y2 = math.max(bounds.southwest.longitude, bounds.northeast.longitude);
    return (x1 < point.latitude &&
        x2 > point.latitude &&
        y1 < point.longitude &&
        y2 > point.longitude);
  } 
```

# cassandra - Hector querySuperColumns 仅返回部分超级列

> ID：10939411
> 
> 赞同：3
> 
> 时间：2012-06-07T20:31:07.957
> 
> 标签：cassandra, super-columns

我有以下代码打算获取所有超列的键，然后找到目标数据。但事实证明，它只返回部分超级列（例如 - 400 个中的 100 个）。有什么原因以及如何解决它？

```
 SuperCfResult<UUID, Long, UUID> superCfResult = sTemplate.querySuperColumns(key);
        Collection<Long> supercolumns = superCfResult.getSuperColumns(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T18:55:08.253

我对 Hector 模板 API 不是很熟悉，但是除非您指定计数，否则默认值通常为 100，因此您应该尝试调用`sTemplate.setCount()`并指定更高的值 - 可能`Integer.MAX_VALUE`。

# php - Facebook 无限循环（&state= 和 &code= 参数不断刷新，但仅在 FIREFOX 上）PHP

> ID：10939416
> 
> 赞同：0
> 
> 时间：2012-06-07T20:31:16.820
> 
> 标签：php, facebook, url, facebook-graph-api, infinite-loop

请调试，这是我网站上的一个 PHP 页面，用于处理应用程序的 Facebook 权限。

问题 - 我的用户应该：
**>>**单击我网站上的链接*（“安装链接”）*
**>>**发送到页面：`install.php`处理 Facebook 身份验证的页面
**>>**然后重定向到登录页面：`index.php`

当用户点击链接时，原来是：

```
http://SITE.COM/install.php?cover=image.jpg&id=001&title=TITLE+HERE 
```

在 Firefox 上，**会发生这种情况**- 用户被重定向到我无法弄清楚的**无限循环，并且它永远不会结束或停止。**
（我已经在 3 个浏览器上尝试过：Chrome、Firefox 和 Safari -**这只发生在 FIREFOX 上**）

```
 http://SITE.COM/install.php?cover=image.jpg&id=001&title=TITLE+HERE&state=df50b9c92366fe3167a561b74b570ab1&code=AQAnWnd4lcDVUhb34F5OTnE4ef9y_H3wqRarcse69ELjf5cWeT_MvAbMkIELaUDeoDCTyyge3FrbLNbhnbInAF0ksk9LREmkOygzXN1WDja_yGdSmZS_z_LfL2JtCfIFZKO72ilIkCUPFy5GmoKyQf_XEEacG1Wxp5jnRD-nJeEdiq8tjVYbK0Q6LpD2r_RIhh2SnFfra_MbZu_rBEOyiHx1#_=_ 
```

添加了新参数：`&state=`和`&code=`，这些新参数通过刷新自身和生成新变量使浏览器保持忙碌。这就像一个永无止境的等待。

这是`install.php`处理事情的页面：（
假设建立了数据库连接并且正确填写了appId和Secret）

```
 require_once('./facebook.php'); // FACEBOOK LIBRARY
  $config = array(
  'appId' => '#',
  'secret' => '#',
  'fileUpload' => true,
  );

  $facebook = new Facebook($config);
  $user_id = $facebook->getUser();

  define('REDIRECT_URI',"http://SITE.COM/covers/index.php?cover=uploaded&id=".$_GET['id']."&title=".$_GET['title']."");

// GET IMAGE FROM URL
  $img = $_GET['cover'];
  $photo = './covers/'.$img.''; // PATH TO THE PHOTO ON THE LOCAL FILESYSTEM
  $caption = 'I found this Cover at <3 http://SITE.COM';

    if($user_id) {

      try {
        // UPLOAD PHOTO TO USER'S PROFILE
        $ret_obj = $facebook->api('/me/photos', 'POST', array(
                                         'source' => '@' . $photo,
                                         'message' => $caption
                                         )
                                      );

        $login_url = $facebook->getLoginUrl($params = array('redirect_uri' => REDIRECT_URI));
        echo ("<script> top.location.href='".$login_url."'</script>");

      } catch(FacebookApiException $e) {
        $login_url = $facebook->getLoginUrl( array(
                       'scope' => 'email,status_update,publish_stream,photo_upload'
                       )); 
        echo '<script> window.location = "' . $login_url . '"; </script>';
        error_log($e->getType());
        error_log($e->getMessage());
      }   
    $api_call = array(
        'method' => 'users.hasAppPermission',
        'uid' => $user_id,
        'ext_perm' => 'publish_stream'
    );
    $can_post = $facebook->api($api_call);
    if ($can_post) {
    $user = $facebook->api('/me');
    $photolink = 'http://graph.facebook.com/'.$user['id'].'/picture';

            # ACTIVE SESSION, CHECK IF THE USER HAS ALREADY REGISTERED
            $query = mysql_query("SELECT * FROM users WHERE account = 'facebook' AND userId = " . $user['id']);
            $result = mysql_fetch_array($query);

            # IF NOT, ADD USER TO DATABASE
            if (empty($result)) {
                $query = mysql_query("INSERT INTO users (oauth_uid, userId, username, first_name, last_name, email, picture, account) VALUES ('facebook', '{$user['id']}', '{$user['name']}', '{$user['first_name']}', '{$user['last_name']}','{$user['email']}', '".$photolink."', 'facebook')");
                $query = mysql_query("SELECT * FROM users WHERE id = " . mysql_insert_id());
                $result = mysql_fetch_array($query);
            }

        # NOW POST THIS ON USER'S TIMELINE
        $facebook->api('/' . $user_id . '/feed', 'post', array(
            'message' => 'JUST A TEST!',
            'name' => 'APP TESTING',
            'description' => 'THIS IS A TEST',
            'caption' => 'This is just a TEST! Hooray!',
            'picture' => 'http://test.com/test.jpg',
            'link' => 'http://SITE.COM/'
        ));
        echo 'Posted!';
    } else {
        die('Permissions required!');
    }
      echo '<br /><a href="' . $facebook->getLogoutUrl() . '">logout</a>';
    } else {

      // NOT LOGGED IN
      $login_url = $facebook->getLoginUrl( array( 'scope' => 'email,status_update,publish_stream,photo_upload') );
        echo '<script> window.location = "' . $login_url . '"; </script>';

    } 
```

（该脚本在 Chrome 和 Safari 上按预期工作。）

我是唯一一个对此进行测试的人，所以当我说“用户”时，我实际上只是指我自己。**;o)**
**我的 cookie 没有被禁用**，所以我不认为就是这样。

谁能弄清楚发生了什么？谢谢你的时间，我很感激。

* * *

如果我的 Facebook 上没有安装该应用程序，它实际上会使用以下 URL 进入**oauth 对话框页面**：

```
https://www.facebook.com/dialog/oauth?client_id=225230310923314&redirect_uri=http%3A%2F%2FWWW.SITE.COM%2Fcovers%2Finstall.php%3Fcover%3D685970AG58759_1338938036.jpg%26id%3D151%26title%3DZoidberg%2Bof%2BFuturama&state=f4bb3c13a2392fe0e24c3dc539e18aae&scope=email%2Cpublish_stream%2Cphoto_upload 
```

然后，如果您继续，则在此 URL 请求额外的权限：

`https://www.facebook.com/dialog/permissions.request`

所以至少我们知道它走了那么远......
现在在这个页面上，我害怕点击“**允许**”，因为不可避免的重定向会发生。

但无论如何，*请允许*...

奇怪的是，它重定向到 BACK to `install.php`... 即使它应该转到`index.php`现在。难怪它循环！但问题是，我不知道如何解决这个问题。@_@

添加`'redirect_uri' => 'INDEX.PHP'`使它停止在 Chrome 和 Safari 上工作（正确重定向但不发布图像等），虽然它修复了 Firefox 中的重定向错误，但它不会执行脚本中指定的任何操作（例如发布、上传等），所以我们现在有 3 个浏览器，而不是只有 1 个浏览器。

所以这显然不是解决方案。

* * *

**编辑**- 在尝试了*一切*之后，我意识到我是唯一一个遇到这个问题的人，它适用于其他人。所以，耶！

* * *

**编辑：解决方案**- 好吧，我正在更新这个，让我实际做过的每个人都找到导致无限重定向循环的问题。

造成这种情况的原因是 Facebook 库正在吐出一个错误（APP 内缺少隐私政策），并且每次发生这种情况时，它都会将用户返回到它所在的最后一个页面（特别是 install.php 页面） ，但是因为我的脚本将用户发送到 Facebook，这就是它进入无限循环的原因。Facebook 会继续将用户发送回去，而我的脚本会继续将用户发送到 Facebook。

我通过注释掉`// throw $e;`Facebook 库中的所有内容以抑制错误来解决了这个问题。

这些错误与代码无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:35:26.007

> 我的 cookie 没有被禁用，所以我认为不是这样。

不要*假设*——**检查**…！

结合重定向设置的 Cookie 有时会很棘手。也许最好不要依赖cookie，而是以它应该工作的方式实现服务器端身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T09:20:18.303

**解决方案：**嗯，我正在更新这个，让大家知道我确实找到了导致无限重定向循环的问题。*（这也是一个相当晚的更新，就像晚了几年一样，但无论如何......）*

造成这种情况的原因是 Facebook 库正在吐出一个错误（在 APP 中**缺少隐私政策**/ Facebook 对所有 APP 的要求），每次发生这种情况时，它都会将用户返回到它所在的最后一页（特别是`install.php`页面），但是因为我的脚本将用户发送到 Facebook，所以它只是进入了无限循环。
Facebook 会继续将用户发送回来，而我的脚本会继续将用户发送到 Facebook。

我通过注释掉`throw $e;`Facebook 库中的所有内容以抑制错误来解决了这个问题。因为这只是因为缺少隐私政策并且没有任何代码相关，所以这样做感觉很好。

这些错误与代码无关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T22:51:48.173

我遇到了同样的问题。我检查了几次代码，似乎一切正常。完成所有操作后，我检查了我的应用程序 ID 和密码，并意识到（愚蠢的我）配置数组中的密码是错误的。更改密码后，刷新问题消失。如果您仅在 IE 中遇到此问题，请尝试将`header('P3P: CP="CAO PSA OUR"');`其放在页面顶部。

# c++ - VC++ 6.0：实际参数太多

> ID：10939420
> 
> 赞同：1
> 
> 时间：2012-06-07T20:31:32.400
> 
> 标签：c++, parameters, compiler-errors, visual-c++-6

我正在使用使用简单 API 的 USB 安全密钥。我所要做的就是包含他们的头文件并拨打我的电话。我有一个可以正常工作的示例 C 程序，并且几乎可以做到这一点：

```
HINSTANCE hDll;
FARPROC dongle;
WORD retcode, handle[16], SD_p1, SD_p2, SD_p3, SD_p4;
DWORD lp1, lp2;
BYTE buffer [1024];
SD_p1 = 0x1C76; // example password 1
SD_p2 = 0x8078; // example password 2
SD_p3 = 0;
SD_p4 = 0;

hDll = GetModuleHandle("dongle.dll");

if (hDll == NULL)
{
    hDll = LoadLibrary("dongle.dll");
    if (hDll == NULL)
    {
        printf("Can't find dongle.dll\n");
        return;
    }
}

dongle = GetProcAddress(hDll, "dongle");

retcode = dongle(SD_FIND, &handle[0], &lp1, &lp2, &SD_p1, &SD_p2, &SD_p3, &SD_p4, buffer); 
```

所以一切正常。找到了加密狗，随后调用加密狗上的不同功能也可以正常工作。但是，当我将这个完全相同的代码插入到我想要保护的 C++ 应用程序中时，我收到以下错误：

```
error C2197: 'int (__stdcall *)(void)' : too many actual parameters 
```

这发生在 retcode = dongle() 调用上。我不明白为什么编译器会认为我的应用程序中有太多参数，但在示例应用程序中却没有。我确实找到了[一篇](http://support.microsoft.com/kb/117428)关于在 C 与 C++ 中以这种方式使用 GetProcAddress() 之间的区别的文章，但我不确定这是否是我在这里看到的问题，或者我将如何在这个特定场景中应用该解决方案.

我需要知道的是如何让这个 C 代码在 C++ 中编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:42:51.947

您需要使用更好的类型定义`dongle`：

```
/* I didn't know what type SD_FIND was, assumed DWORD */
typedef WORD (CALLBACK *DONGLEPTR)(DWORD,WORD*,DWORD*,DWORD*
                                  ,WORD*,WORD*,WORD*,WORD*,BYTE*);

DONGLEPTR dongle; /* <-- need to change this type as well */

/* ... */

dongle = (DONGLEPTR)GetProcAddress(hDll, "dongle");

/* ... */
retcode = dongle(SD_FIND, ...); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:43:58.760

那篇文章正是您遇到的问题。在 C 中，列表中没有参数的函数定义是可以接受任意数量参数的函数。这实际上意味着编译器不会检查您传递给函数的参数的数量和类型。在 C++ 中，编译器总是检查传递给函数的参数的数量和类型。因此，您需要为函数调用使用具有正确数量和类型的参数的 typedef。

所以像：

```
typedef WORD (CALLBACK* DONGLEPROC)(DWORD, LPWORD, LPDWORD , LPDWORD , LPWORD, LPWORD, LPWORD, LPWORD, LPBYTE); 
```

# php - 密码长度错误不会出现

> ID：10939423
> 
> 赞同：1
> 
> 时间：2012-06-07T20:31:34.417
> 
> 标签：php, registration

我设置了一个错误（“密码长度必须介于 6 到 32 个字符之间”），因此当用户尝试使用少于 6 个字符的密码进行注册时，他们会收到该错误并且无法注册，但无论多短密码，错误没有出现，它只是继续注册。请帮忙，谢谢！这是代码：

```
<?php

$submit = $_POST['submit'];

$name = strip_tags($_POST['fullnamefield']);
$email = strip_tags($_POST['regemailfield']);

$password = strip_tags($_POST['regpasswordfield']);
$repeatpassword = strip_tags($_POST['regpasswordconfirmfield']);
$date = date("Y-m-d");

if ($submit)
{
  if ($name&&$email&&$password&&$repeatpassword)
  {
    $password = md5($password);
    $repeatpassword = md5($repeatpassword);

    if ($password==$repeatpassword)
    {
      if (strlen($name)>32||strlen($email)>1024)
      {
        echo "Length of name or email is too long. Please try again";
      }
      else
      {
        if (strlen($password)>32||strlen($password)<6)
        {
          echo "password must be between 6 and 25 character!";
        }
      }
    }
    else
      echo "Your passwords do not match!";
  }
  else
    echo "Please fill in all fields!";
}

?> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T20:33:18.347

在使用 md5() 之前检查长度

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:34:32.330

这是因为您在 MD5 中散列密码并将 $password 变量更改为 32 个字符的字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:35:00.653

当您在 md5 函数中发送密码时，该函数实际上会创建一个 32 个字符的十六进制数字（哈希），因此您的检查是无用的。

# c# - 实体模型的序列化c#

> ID：10939426
> 
> 赞同：1
> 
> 时间：2012-06-07T20:31:48.620
> 
> 标签：c#, asp.net, entity-framework, serialization, entity

序列化时我不时收到此错误，我不知道我需要序列化哪个文件。页面在加载其他时间时打开和关闭。这是我得到的错误：

> System.Web.HttpException (0x80004005)：无法序列化会话状态。在“StateServer”和“SQLServer”模式下，ASP.NET 将序列化会话状态对象，因此不允许不可序列化的对象或 MarshalByRef 对象。如果自定义会话状态存储在“自定义”模式下完成类似的序列化，则适用相同的限制。---> System.Runtime.Serialization.SerializationException：在程序集“EntityFrameworkDynamicProxies-Nop.BusinessLogic，版本=1.0.0.0，CultureToken=neutral”中键入“System.Data.Entity.DynamicProxies.Product_CC06DC79809AC788823D74B88F94CCB7155ADCE697911AF73214FB8B5F2B2EB4”作为可序列化的。在 System.Runtime.Serialization.FormatterServices。
> 在 System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Serialize（流序列化流，对象图，标头 [] 标头，布尔 fCheck）
> 在 System.Web.Util.AltSerialization.WriteValueToStream(Object value, BinaryWriter writer) 在 System.Web.Util.AltSerialization.WriteValueToStream(Object value, BinaryWriter writer) 在 System.Web.SessionState.SessionStateItemCollection.WriteValueToStreamWithAssert(Object value, BinaryWriter writer ) 在 System.Web.SessionState.SessionStateItemCollection.Serialize(BinaryWriter writer) 在 System.Web.SessionState.SessionStateUtility.Serialize(SessionStateStoreData item, Stream stream) 在 System.Web.SessionState.SessionStateUtility.SerializeStoreData(SessionStateStoreData item, Int32 initialStreamSize, Byte []& buf, Int32& 长度, Boolean compressionEnabled) 在 System.Web.SessionState.SqlSessionStateStore.SetAndReleaseItemExclusive(HttpContext context, String id, SessionStateStoreData item,System.Web.SessionState.SessionStateModule.OnReleaseState(Object source, EventArgs eventArgs) 在 System.Web.HttpApplication.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() 在 System.Web.HttpApplication. ExecuteStep(IExecutionStep step, Boolean& completedSynchronously)

所以基本上我认为是实体模型的东西，但我想知道如何序列化它。提前致谢， Laziale

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T04:02:00.177

System.Data.Entity.DynamicProxies.Product（此类错误）

应该在类上添加**[DataContract]**属性，在这样的字段上添加**[DataMember]**

```
using System.Runtime.Serialization;
[DataContract]
public class Account
{
    [DataMember]
    public System.Guid ID { get; set; }
    [DataMember]
    public System.Guid AccountSubTypeID { get; set; }
    [DataMember]
    public Nullable<int> IndustryTypeID { get; set; }
} 
```

# java - 将 Java 窗口输出为网络摄像头流

> ID：10939429
> 
> 赞同：3
> 
> 时间：2012-06-07T20:31:56.727
> 
> 标签：java, ffmpeg, streaming, transparency, webcam

我想用Java编写一个程序，可以在屏幕上显示动画覆盖。

然后，屏幕将使用名为 x-split 的单独程序在互联网上进行流式传输。

这样做的一个好方法是在 java 中创建一个透明窗口，它将显示动画文件（具有透明度），并且此窗口的输出（其显示）理想情况下应该出现在网络摄像头设备列表中，以便可以轻松地被x-split 这将允许它被安排在我当前正在播放的游戏屏幕上。

这种类型的示例程序是显示网络摄像头图像并将“虚拟眼镜”覆盖在人脸图像上的程序，然后可以将其作为输出凸轮传输。

我找到了 java 6u10-translucent-shapes 库来创建透明窗口，但我不知道如何流式传输它。

我已经阅读了一些建议 JMF 和 FFMpeg 可能是要走的路，但我不确定要安装什么以及如何安装。

任何帮助或指导教程将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-10T05:46:50.460

我不确切知道您要实现的目标，但是流式传输屏幕的外部程序呢？像[http://screen-stream.en.softonic.com](http://screen-stream.en.softonic.com)这样的东西？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T07:24:48.657

您可以制作一个未装饰`JFrame`的`AWTUtilities`类（我认为这是您在 Java6u10 中发现的`Window`透明度）并在那里制作所有动画。用于每*x*毫秒`java.awt.Robot.getScreenCapture(Rectangle)`捕获一张图像。用来做计时：*`javax.swing.Timer`*

 *```
Timer timer = new Timer(x, new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        arrayOfImages[imageCount] = java.awt.Robot.getScreenCapture(r);
        count++;
    }
}); 
```

我找到了一个 Java 包装器 - Jffmpeg - 来使用（[http://jffmpeg.sourceforge.net/download.html](http://jffmpeg.sourceforge.net/download.html)）。您将需要 JMF - [http://www.oracle.com/technetwork/java/javase/tech/index-jsp-140239.html](http://www.oracle.com/technetwork/java/javase/tech/index-jsp-140239.html) - 以及在 Jffmpeg 文档页面中编写的一些其他内容。FMJ ( [http://fmj-sf.net/ffmpeg-java/getting_started.php](http://fmj-sf.net/ffmpeg-java/getting_started.php) ) 是另一种选择。

[FFmpeg](http://ffmpeg.org/download.html)需要用[Git下载](http://git-scm.com/)

最后，来自另一个论坛（[http://www.blackhatworld.com/blackhat-seo/youtube/330165-command-line-program-convert-image-video.html](http://www.blackhatworld.com/blackhat-seo/youtube/330165-command-line-program-convert-image-video.html)）的这个帖子向您展示了如何将保存的图像转换为视频. **您可能想完全跳过 Jffmeg 步骤。相反，您可以将所有图像保存到文件中，然后使用 Runtime.getRuntime().exec(String) 将其转换为视频以执行命令行。但是如果你这样做，你将无法使你的程序独立于平台**

Java 中的视频有点乏味和烦人，因此您可能希望完全切换到另一种语言，使用更简单的库和 API。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T07:34:47.157

使用 java.awt 的 Robot 类。它有一个 getScreenCapture(Rectangle) 方法，可用于获取屏幕一部分的 BufferedImages。这些 BufferedImages 可以使用代码进行编辑，然后可以通过全屏应用程序显示来使其闪烁（并消失以重新捕获新图像。）。或者，您可以使用上述方法使用透明的 java 全屏应用程序对其进行过滤，并将其显示在您的小程序上以进行“x-treamed”。

然而，我最大的问题是你希望如何控制你的游戏？另外，你为什么要为了一件容易解决的事情做这么大的事情。

如果您只是使用屏幕录制软件将其变成电影，然后使用 Windows Movie Maker 根据您的需要进行修改，它会更简单、更同步。**您无需在代码上浪费时间**。=)

我希望这会有所帮助。*

# c++ - 人们是如何如此快速地浏览 LinkedIn 密码文件的？

> ID：10939434
> 
> 赞同：1
> 
> 时间：2012-06-07T20:32:16.350
> 
> 标签：c++, large-files

我已经获得了该文件，它是 258 MB（解压缩） 已经有网站能够在文件发布当天下午 2:00 之前确认哈希密码是否在列表中。昨晚拿到了，写了一个简短的C++程序，逐行读取文件并插入MySQL

```
ifstream fin ("c:/xampp/htdocs/combo_not.txt");
string    myStr;

while(getline(fin, myStr))  
  {                    

 mysql_query(conn, ("INSERT INTO passwords(password) VALUES('" + myStr + "')").c_str());   

  } 
```

我意识到这个问题可能会被否决（甚至关闭），但这是一个我想要回答的真实问题。一个人如何在很短的时间内遍历这么大的文件？您无法在记事本中打开文件并按此`CTR F`方式进行搜索，因为程序将耗尽内存。到目前为止，我的表只有不到 100 万条记录，而 c++ 控制台程序到现在已经运行了大约 12 个小时或更长时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:35:02.683

您使用索引..二进制搜索和散列非常非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:16:03.057

```
<?php
echo sha1("password")
?> 
```

**打开命令提示符并输入以下命令：**

```
sort hacked.txt /o sorted_data.txt 
```

**文件排序后，然后键入此命令**

```
findstr "string" sorted_data.txt 
```

如果您的密码在列表中，它将在终端中打印出来。如果您的密码不在列表中，请尝试用“0”字符替换前五（5）个字符令人惊讶的是，我的密码在列表中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T04:49:24.660

MySQL默认[启用自动提交](http://dev.mysql.com/doc/refman/5.0/en/commit.html)。这意味着您正在为每一行启动并提交一个事务，其中包括磁盘写入和刷新。

设置自动提交关闭：

```
mysql_autocommit(conn, 0); 
```

在循环之前，然后调用：

```
mysql_commit(conn); 
```

循环之后。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T20:43:29.347

他们可能没有尝试将密码插入数据库，或者没有尝试使用散列密码本身的聚集索引将密码插入数据库。

# coding-style - 数据对象接口

> ID：10939435
> 
> 赞同：1
> 
> 时间：2012-06-07T20:32:24.723
> 
> 标签：coding-style, standards

是否有不使用数据对象上的接口契约的最佳实践。

我的应用程序中有几个自定义控件，我希望每个人都保持创建控件的标准。为此，我创建了一个接口，它公开了一些标准属性，我的所有控件都应该实现该接口。我检查了自定义控件是否实现了接口，否则会抛出异常。

这是牢记最佳实践的正确方法，还是有更好的方法来实现相同的结果？

# c++ - 在 C++ 中将整数填充/嵌入到字符串中

> ID：10939438
> 
> 赞同：1
> 
> 时间：2012-06-07T20:32:31.523
> 
> 标签：c++, string, casting, byte, stringstream

我有一些必须匹配某个数据包协议的数据。我将所说的数据作为 std::string 获取。

我需要取一些整数值并将它们放在特定位置的字符串中。我不想将整数转换为字符串值；我想复制实际的字节值。

例如，如果我的字符串是“abcdefg”，并且我有一个 2 字节短的值，我想将其放入第一个位置，我不想要“a25defg”。我想要“a”+ 0x00 + 0x19 +“defg”（请原谅我。这是我能想到的最好的方式来说明我想要的东西）。

有没有一种巧妙的方法可以使用常规的 C++ 字符串来做到这一点？由于系统要求，我在这里不可能升压。

据我所知，stringstream 可能会有所帮助，但我看到的所有示例都将数字/短/整数转换为它的 ascii 版本，这不是我想要的。

我可以用 char 数组轻松做到这一点，但我想知道我是否可以用字符串做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:36:03.290

不推荐，但您可以重新解释它：

```
short something = 25;
string something_string(reinterpret_cast<unsigned char*>(&something),
                        sizeof(something));
// something_string == 19 00 
```

不过，您需要注意字节序，（例如`hton`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T20:39:20.297

您说使用 char 数组很容易，但使用 std::strings 也很容易！

```
std::string str = "abcdef";
short val = 25;
str[1] = val>>8;
str[2] = val&255; 
```

这按你想要的方式工作。如果协议是大端的。

**编辑：**
仅当您想替换字符串中的现有字符时，这才有效。要从头开始创建一个新字符串，或者在末尾添加一个值，请参阅 Dani 的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:38:18.517

```
template<size_t N>
void cram_helper( unsigned long long value, char* const dst )
{
    char* p = dst + N;
    while (p > dst) { *--p = value & 0xFF; value >>= 8; }
}

template<typename T>
void cram( T t, char* dst )
{
    cram_helper<sizeof(T)>(t, dst);
}

char buffer[] = { "abcdefg" };
short s = 25;
cram(s, buffer+1);

string buffer1 = "abcdefg";
cram(s, &buffer[1]); 
```

* * *

```
template<size_t N, typename Container>
void cram_helper( unsigned long long value, Container& dst, int initial_index )
{
    char index = initial_index + N;
    while (index > initial_index) { dst[--index] = value & 0xFF; value >>= 8; }
}

template<typename T, typename Container>
void cram( T t, Container& dst, size_t initial_index = 0 )
{
    cram_helper<sizeof(T)>(t, dst, initial_index);
}

std::string buffer2 = "abcdefg";
short s = 25;
cram(s, buffer2, 1); 
```

# java - Java SAX 解析器 startElement 看不到标签

> ID：10939440
> 
> 赞同：1
> 
> 时间：2012-06-07T20:32:33.653
> 
> 标签：java, android, xml-parsing, sax, saxparser

示例 XML：

```
<rss version="2.0">
<channel>
<title>The Channel Title Goes Here</title>
<description>
The explanation of how the items are related goes here
</description>
<link>/events</link>
<item>
<title>
<![CDATA[ some title ]]>
</title>
<description>
<![CDATA[ ]]>
</description>
<content:encoded xmlns:content="http://stuff.com">
<![CDATA[ 
    <event>
        <name>some name</name>
        <startdate>some date</startdate>
        <starttime>some time</starttime>
        <location>some place</location>
        <description></description>
    </event>
]]>
</content:encoded>
</item>
<item>
</item>
...
</channel>
</rss> 
```

我的 SAX 解析器`startElement`方法从不进入以下`if`语句，但 sysout 将“事件”打印到 logcat。为什么它永远`localName.equals("event")`找不到`true`？

```
@Override
public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException 
{
    System.out.println(localName);

    if (localName.equals("event"))      // <-- never goes in here
    {
        // do stuff
    }
} 
```

这与 CDATA 以及我如何设置解析器有关吗？这是我实例化所有内容的方式：

```
URL sourceUrl = new URL(kEventsURL);

SAXParserFactory spf = SAXParserFactory.newInstance();
SAXParser sp = spf.newSAXParser();
XMLReader xr = sp.getXMLReader();

MyXMLHandler myXMLHandler = new MyXMLHandler();
xr.setContentHandler(myXMLHandler);
xr.parse(new InputSource(sourceUrl.openStream())); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:41:22.210

[在此处](https://stackoverflow.com/questions/2784183/what-does-cdata-in-xml-mean)阅读第一个答案以了解为什么它无法识别标签开始。您可能应该使用来自元素的文本运行另一个解析器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T18:14:48.177

而不是“localName”，尝试“qName”

# c# - 在 1 个端点、WCF、Mono 中找不到客户端端点配置“*”

> ID：10939445
> 
> 赞同：6
> 
> 时间：2012-06-07T20:33:13.557
> 
> 标签：c#, linux, wcf, mono, wcf-endpoint

嘿伙计们，

我正在尝试使用 Mono 从我的 Ubuntu 主机访问托管在虚拟机（Windows 7）上的 Web 服务。

我可以导入 wdsl 文件并生成服务参考。我从另一个正确访问 Web 服务的工作客户端复制了 App.config。

当我尝试使用系统连接到网络服务时；

```
namespace MonoTest
{
class MainClass
{
    public static void Main (string[] args)
    {
        Console.WriteLine ("Hello World!");
        TestServer.Service1Client client = new TestServer.Service1Client("Test");
        Console.WriteLine(client.GetData(12));
        Console.ReadLine();
    }
}
} 
```

我收到一个错误：

```
System.InvalidOperationException: Client endpoint configuration 'Test' was not found in 1 endpoints.
  at System.ServiceModel.ChannelFactory.ApplyConfiguration (System.String endpointConfig) [0x00000] in <filename unknown>:0 
  at System.ServiceModel.ChannelFactory.InitializeEndpoint (System.String endpointConfigurationName, System.ServiceModel.EndpointAddress remoteAddress) [0x00000] in <filename unknown>:0 
  at System.ServiceModel.ChannelFactory`1[MonoTest.TestServer.IService1]..ctor (System.String endpointConfigurationName, System.ServiceModel.EndpointAddress remoteAddress) [0x00000] in <filename unknown>:0 
  at System.ServiceModel.ClientBase`1[MonoTest.TestServer.IService1].Initialize (System.ServiceModel.InstanceContext instance, System.String endpointConfigurationName, System.ServiceModel.EndpointAddress remoteAddress) [0x00000] in <filename unknown>:0 
  at System.ServiceModel.ClientBase`1[MonoTest.TestServer.IService1]..ctor (System.ServiceModel.InstanceContext instance, System.String endpointConfigurationName) [0x00000] in <filename unknown>:0 
  at System.ServiceModel.ClientBase`1[MonoTest.TestServer.IService1]..ctor (System.String endpointConfigurationName) [0x00000] in <filename unknown>:0 
  at MonoTest.TestServer.Service1Client..ctor (System.String endpointConfigurationName) [0x00000] in <filename unknown>:0 
  at MonoTest.MainClass.Main (System.String[] args) [0x0000a] in /home/***/WebserviceTest/MonoTest/MonoTest/Main.cs:11 
```

我的 App.config 文件如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <system.serviceModel>
        <bindings>
            <wsHttpBinding>
                <binding name="WSHttpBinding_IService1" />
            </wsHttpBinding>
        </bindings>
        <client>
            <endpoint name="Test"
                address="http://192.168.178.34:8732/Design_Time_Addresses/TestServer/Service1/"
                binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IService1"
                contract="ServiceReference1.IService1" >
                <identity>
                    <dns value="localhost" />
                </identity>
            </endpoint>
        </client>
    </system.serviceModel>
</configuration> 
```

有没有人使用Linux使它工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-27T02:12:47.513

Mono 的 WSDL 导入工具还不支持自动配置生成，您需要在`app.config`.

您在此处看到的错误意味着 WCF 找不到终结点配置部分。

**问题的详细技术原因**

你得到这个是因为 Visual Studio 和 Mono 有一种不同的、不兼容的方式来引用配置部分。

在 Visual Studio 中添加服务引用时，它会自动在您的`app.config`. generate 中的“合同名称”`<endpoint ... contract="contract name">`不一定是 generated 中数据合同类的完全限定名称`Reference.cs`。

相反，Visual Studio 发出

```
 [ServiceContractAttribute(ConfigurationName="contract name")]
    public interface YourContract {
            ....
    } 
```

与元素中的`ConfigurationName`相同`<endpoint ... contract="...">`，这就是 WCF 查找端点配置的方式。

在 Mono 中，由于我们还不支持配置文件生成，我们发出

```
 [ServiceContractAttribute]
    public interface YourContract {
            ....
    } 
```

如果没有`ConfigurationName`参数，则默认为该接口的完全限定名称。

**如何解决您的问题**

要使其工作，您需要编辑文件并在元素`app.config`中使用服务合同接口的完全限定名称。`<endpoint ... contract="...">`

在您的情况下，更改`contract="ServiceReference1.IService1"`为`contract="TestServer.IService1"`应该这样做。

否则，查看生成的`Reference.cs`，搜索带有 a 的接口`[ServiceContractAttribute]`以及它所在的 C# 命名空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T11:17:40.450

Mono WCF 是 dotnet WCF 的部分实现，因此不支持少数功能和绑定：

还有一篇文章说

没有计划支持的组件

> **WSHttpBinding**及其依赖项 TransactionFlow ReliableSession

请参阅： [http ://www.mono-project.com/WCF_Development](http://www.mono-project.com/WCF_Development)

# python - openpyxl 基本搜索

> ID：10939450
> 
> 赞同：0
> 
> 时间：2012-06-07T20:33:24.977
> 
> 标签：python, xlsx, openpyxl

我正在尝试搜索 excel 文档，如果 mp3 文件的名称在 excel 文档中匹配，它会打印出找到名称实例的行。

这就是我所拥有的：

```
from mutagen.easyid3 import EasyID3
from openpyxl import load_workbook
import glob
import re
import os
for name in glob.glob('*.mp3'):
  audio = EasyID3(name)
  wb = load_workbook('xl.xlsx')
  sh = wb.get_sheet_by_name('Russian')
  for row in sh:
    if row.value == name:
      print row.number 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:53:31.613

首先，您正在加载工作簿并为每个`.mp3`文件查找工作表。将该代码移出循环。

第二个问题是您尝试迭代 worksheet `sh`，这是不可迭代的。

第三个问题是你测试`row.value`同名，你可能想要`sh.cell[0].value`

您的代码应该看起来更像：

```
from mutagen.easyid3 import EasyID3
from openpyxl import load_workbook
import glob
import re
import os
wb = load_workbook('xl.xlsx')
sh = wb.get_sheet_by_name('Russian')
for name in glob.glob('*.mp3'):
    audio = EasyID3(name)
    for row_index in range(sh.get_highest_row()):
        if sh.cell(row=row_index, column=0).value == name:
            print(row_index) 
```

正如@Bill Kidd 所指出的，在 openpyxl 2.4.2 中，您必须替换`.get_highest_row()`为`.max_row`（没有大括号！）。

# python - 带有 cElementTree 的 ParseError 无效字符

> ID：10939452
> 
> 赞同：0
> 
> 时间：2012-06-07T20:33:28.520
> 
> 标签：python, xml, xml-parsing

我正在尝试迭代地解析最后带有校验和的树，使用：

```
import xml.etree.cElementTree as et
for event, elem in et.iterparse("C:\myXMLfile.xml"):
    if elem.tag == "Signature":
        elem.clear() 
```

`ParseError: reference to invalid character number: line 4205, column 25`这在这个字符上引发了一个：`<Signature value="e?'O;????5?u??c???]????<??jX" />`

我认为该`elem.clear()`声明将是一种解决方法，但似乎它在清除之前处理​​了该属性。有没有办法在不先处理它的情况下清除这个元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:53:17.890

这就是我最终要做的事情：

1.  将 XML 文件作为文本读入内存。
2.  使用正则表达式查找标记。
3.  删除开始标签和结束标签之间的所有内容。
4.  重写为 XML 文件。
5.  解析新的 XML 文件。
6.  继续我的快乐之路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T23:10:06.823

查看[xml.etree.cElementTree.iterparse 的定义](http://docs.python.org/library/xml.etree.elementtree.html#xml.etree.ElementTree.iterparse)，您会注意到事件的可选参数，您可以在其中报告“开始”事件（默认为“结束”事件）。您可以利用它在开始事件之后执行 elem.clear() 并继续将结束事件作为双分支`if`语句。

# c# - 优雅的对象扩展

> ID：10939455
> 
> 赞同：2
> 
> 时间：2012-06-07T20:33:40.143
> 
> 标签：c#, dynamic, data-structures

问题是 - 使用当前上下文或场景所需的附加数据扩展某些对象的最佳方法是什么。

例如，我有 Product 类，它具有基本（核心）属性，如 ID、名称和价格。产品实例主要用作业务层操作的输入/输出，也用于在其他应用层之间传递信息。

例如，当我需要在 GUI 中列出带有一些扩展信息（如制造商、制造商、一些计算值等）的产品时，我通常会创建返回一组行的 SP，然后我需要存储这些附加数据在项目实例中。我不想使用这些附加属性中的每一个来扩展 Product 类（类最终会变得沉重和不优雅，缺少主要功能），我也不想将 Product 子类化以添加新属性（这会在某些情况下增加复杂性） .

我的想法是放置一个或多个复杂属性（存储对象及其属性），这些属性将存储用于各种场景的附加数据，但我不确定这是一个好的解决方案。

你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:37:46.567

听起来您遇到了模型与视图模型的问题。ViewModel 仅用于显示目的，因此拥有具有额外属性的视图模型并将模型映射到 UI 级别的视图模型是一种有效的设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:51:06.343

您可能会考虑构建两个类。一个，称为`ProductSummary`，将包含一些产品数据的只读表示：

```
public class ProductSummary
{
    public int Id { get; }
    public string Name { get; }
    public double Price { get; }
} 
```

第二个类，称为`ProductDetail`，将包含所有产品数据的读写表示：

```
public class ProductDetail
{
    public int Id { get; }
    public string Name { get; set; }
    public double Price { get; set; }
    public string Manufacturer { get; set; }

    private ProductDetail()
    {
    }

    public double ComputeValue()
    {
    }

    public static ProductDetail(ProductSummary summary)
    {
        var newProduct = new ProductDetail();
        // load Product data using primary key from summary.Id      
        // populate newProduct from loaded data
        return newProduct;
    }
} 
```

该类`ProuctSummary`最终成为关键产品信息的轻量级只读容器。数据集合`ProductSummary`可用于填充列表等。

一旦需要编辑产品，您可以使用`ProductSummary`对象中的 ID 来加载较重的`ProductDetail`类，您可以将其用于编辑场景。

这似乎是多余的工作，但请考虑应为特定用例设计类。如果您有一个轻量级只读摘要类的用途，以及一个可编辑类的单独用例，那么您可能需要考虑两个单独的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:40:02.757

我个人会扩展课程，但您也可以按照以下方式做一些事情：

```
public class Product
{
    ...

    public List<ProductProperty> AdditionalProperties { get; set; }
}

class ProductProperty
{
    public string Name { get; set; }
    public object Data { get; set; }
} 
```

请记住，绝对不是最佳实践；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T20:48:43.953

所以......如果我理解这个正确性：

*   您不想将产品类扩展为继承“产品”的子类
*   您不想将所有额外的“情境”属性添加到 Product 类本身

鉴于此，您正在寻找一种根据情况向对象添加临时属性的方法？

我会为“自定义属性”推荐一个标准的简单 HashTable 扩展。

```
private HashTable CustomProperties { get; set; }

//Note: all three of these functions are unecessary if you make the hashtable public, but they do look good as far as an interface goes.
public void AddCustomProperty (String key, Object value)
{
    CustomProperties.Add(key, value);
}

public void RemoveCustomProperty (String key)
{
    CustomProperties.Remove(key);
}

public object GetCustomProperty (String key)
{
    return CustomProperties[key];
} 
```

这使您可以将所需的任何属性作为 KeyValue 对直接存储到 Products 对象中。现在，显示它们变得更加有趣，因为您不能再使用直接数据绑定了……编辑也是如此。但是直接设置框和标签很容易。

另一种解决方案 -**运行时类型**

声明一个实际上并不存在但可以像它一样使用的自定义类型。

```
var ExtProduct = new {
    MyCustomProp = "whatever I want",
    ProductBase = productInstace }; 
```

根据需要延长。

您也可以使用列表执行此操作

```
var ExtProductList = from a in ProductList select new {
    MyCustomProp = "Whatever I want",
    ProductBase = a }; 
```

这是一个非常临时的东西，在将值传递给其他东西时几乎没有用，但对于从连接列表或临时值的 UI 显示进行自定义计算具有巨大的实用性。当您需要自定义值可编辑时，它们有点难以捕捉，但不是很明显。

# algorithm - 解决循环链表的方法是什么？

> ID：10939456
> 
> 赞同：0
> 
> 时间：2012-06-07T20:33:59.563
> 
> 标签：algorithm, linked-list

给定一个循环链表，实现一个在循环开始时返回节点的算法。

定义： Cicular Link list：一个（损坏的）链表，其中一个节点的next指针指向一个更早的节点，从而在链表中形成一个循环。

示例：输入：A->B->C->D->E->C[与之前相同的 C] 输出：C

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T20:37:52.670

您可以使用[乌龟和兔子算法](http://en.wikipedia.org/wiki/Cycle_detection)：

1.  从两个指针开始，调用一个 the`tortoise`和另一个 the`hare`
2.  在每个时间步，乌龟前进一次，兔子前进两次
3.  重复直到它们相等

这为您提供了循环内的元素。要找到循环的开头：

1.  让乌龟一步一步前进，数数步数
2.  停下来，直到你到达野兔

这将允许您找到循环的长度。然后你只需要一步一步`size-length`来找到开始，`size`你的“链表”中的元素数量在哪里。

这也称为弗洛伊德循环检测算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:39:32.430

*检测*循环的常用算法是让两个指针/迭代器在列表中前进，一个前进一个元素，另一个前进两个。如果两个迭代器曾经指向同一个元素，则列表中有一个循环。

找到循环后，您可以收集集合中的所有元素，然后从列表的开头开始，直到找到该集合中的元素。这个元素可以被认为是循环的“开始”

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T20:40:13.570

最简单的算法是使用数据结构来存储已经访问过的元素。您可以使用哈希表（大约 O(n)）或简单的排序数组 O(nlog(n))。

您还可以假设您的链表是一个图形，并使用常用的[循环检测](http://en.wikipedia.org/wiki/Cycle_detection)算法之一。

# c - != C 语言中的符号查询

> ID：10939467
> 
> 赞同：3
> 
> 时间：2012-06-07T20:34:58.820
> 
> 标签：c, operators

```
int x = 15 ;
printf ( "\n%d \t %d \t %d", x != 15, x = 20, x < 30 ) ; 
```

代码的输出是 1 20 1 但我认为它应该是 0 20 1 因为 15 == 15...

我面临“x！= 15”部分的问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T20:36:45.773

您正在为 x 分配一个新值`x = 20`。

您不能对函数调用的参数列表中的这些操作假定任何特定顺序。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T20:45:21.367

根据我的经验，在大多数 C/C++ 编译器下，大多数参数列表都是从右到左处理的，即使规范没有说明*所需*的评估顺序。

了解了有*多少*编译器工作后，您的参数列表将像这样评估

```
printf ( "\n%d \t %d \t %d", x != 15, x = 20, x < 30 ) ; 
```

（可能）按以下顺序评估

```
x < 30  => 1
x = 20 (assigns x to 20, returning 20) => 20
x != 15 => 1 (because x is now 20) 
```

如果此评估顺序适用于您的编译器，则像这样重新排列参数

```
printf ( "\n%d \t %d \t %d", x < 30, x = 20, x != 15 ) ; 
```

应该屈服

```
1 20 0 
```

因为比较`x != 15`将在`x`重新分配到 20 之前发生。

这个练习的教训是通常避免在列表结构中赋值（看起来像“a、b、c、d”的东西），或者*至少*不要在同一个列表结构中读取分配的变量，因为你不能保证有权从左或从左到右的评估（它取决于编译器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T21:11:03.657

您的代码存在未指定的行为：标准并未规定执行表达式的顺序是从左到右。试试这个

```
int x = 15 ;
int result1 = (x != 15);
int result2 = (x = 20);
int result3 = (x < 30);
printf ( "\n%d \t %d \t %d", result1, result2, result3 ) ; 
```

# java - JodaTime 中的时区格式错误

> ID：10939471
> 
> 赞同：1
> 
> 时间：2012-06-07T20:35:14.257
> 
> 标签：java, datetime, date, jodatime

我有以下使用 Joda 时间的片段：

```
import org.joda.time.DateTime;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.format.DateTimeFormatter;

DateTimeFormatter dateTimeFormatter = DateTimeFormat.forPattern("HH z")
String dateTime = dateTimeFormatter.print(new DateTime())
println DateTime.parse(dateTime, dateTimeFormatter) 
```

但它会抛出 IllegalArgumentException：

```
Invalid format: "16 EDT" is malformed at "EDT" 
```

我想念什么？

编辑：非常适合`DateTimeFormat.forPattern("HH")`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:53:30.640

根据[DateTimeFormat javadoc](http://joda-time.sourceforge.net/apidocs/org/joda/time/format/DateTimeFormat.html)，无法解析时区名称（'z'）。

**编辑：** 要解析时区，我会考虑使用'Z'和实际的时区偏移量（例如东部的-0500）。还有`withOffsetParsed()`你可能想要研究的 DateTimeFormatter 中的方法——例如。`dateTimeFormatter.withOffsetParsed().parseDateTime("16 -0500");`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T04:48:29.413

问题是 EDT 不是有效*的唯一*时区名称。解析器在这方面非常严格。EDT 可以适用于美国或澳大利亚。

# css - 在 Twitter Bootstrap 中居中导航

> ID：10939481
> 
> 赞同：37
> 
> 时间：2012-06-07T20:35:48.040
> 
> 标签：css, twitter-bootstrap, center, navbar

我希望能够使页面的导航死点居中，并使其以不同的分辨率保持居中。我不想使用偏移量将其推过或向左移动，因为这只会在不同的浏览器宽度下搞砸。这是我正在搞乱的典型栏，但 ul 总是左对齐。

```
 <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
           <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                     <span class="icon-bar"></span>
                     <span class="icon-bar"></span>
                     <span class="icon-bar"></span>
                </a>
                <div class="nav-collapse">
                     <ul class="nav">
                          <li class="active"><a href="#">Menu</a></li>
                          <li><a href="#">On Tap</a></li>
                          <li><a href="#">Shows</a></li>
                          <li><a href="#">Surfwear</a></li>
                          <li><a href="#" >Contact</a></li>
                     </ul>
                </div><!--/.nav-collapse -->
           </div><!-- container -->
      </div><!-- navbar-inner -->
 </div><!--  navbar navbar-fixed-top --> 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-07T21:03:44.557

[Modify twitter bootstrap navbar](https://stackoverflow.com/questions/10568103/modify-twitter-bootstrap-navbar)的可能副本。我想这就是你正在寻找的（复制）：

```
.navbar .nav,
.navbar .nav > li {
  float:none;
  display:inline-block;
  *display:inline; /* ie7 fix */
  *zoom:1; /* hasLayout ie7 trigger */
  vertical-align: top;
}

.navbar-inner {
  text-align:center;
} 
```

如链接答案中所述，您应该使用这些属性创建一个新类并将其添加到导航 div。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-05T13:41:18.753

对于任何需要 Bootstrap 3 的人来说，现在都容易多了。

新`nav-justified`类可用于将所有导航栏链接居中。

[http://www.bootply.com/g3g125MLGr](http://www.bootply.com/g3g125MLGr)

```
<div class="navbar">
  <ul class="nav nav-justified" id="myNav">
    <li><a href="#">Home</a></li>
    <li><a href="#">Link</a></li>
    <li><a href="#">Link</a></li>
    <li><a href="#">Link</a></li>
    <li><a href="#">Link</a></li>
    <li><a href="#">Link</a></li>
    <li><a href="#">Link</a></li>
  </ul>
</div> 
```

或者使用一点 CSS，您可以只将品牌/徽标居中，并将左/右链接分开..

[http://www.bootply.com/3iSOTAyumP](http://www.bootply.com/3iSOTAyumP)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-07T20:53:11.583

您可以制作`.navbar`固定宽度，然后将其左右边距设置为`auto`.

[演示](http://jsfiddle.net/qDUH3/)

```
.navbar{
    width: 80%;
    margin: 0 auto;
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-02T14:00:16.297

[http://www.bootply.com/3iSOTAyumP](http://www.bootply.com/3iSOTAyumP)在此示例中，折叠按钮不可点击，因为 .navbar-brand 在前面。

[http://www.bootply.com/RfnEgu45qR](http://www.bootply.com/RfnEgu45qR)有一个更新版本，其中折叠按钮实际上是可点击的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-21T19:52:53.320

```
.navbar-right { 
    margin-left:auto;
    margin-right:auto; 
    max-width :40%;   
    float:none !important;
} 
```

只需复制此代码并根据`max-width`需要进行更改

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-19T17:14:20.993

我更喜欢这个：

```
<nav class="navbar">
  <div class="hidden-xs hidden-sm" style="position: absolute;left: 50%;margin-left:-56px;width:112px" id="centered-div">
    <!-- this element is on the center of the nav, visible only on -md and -lg -->
    <a></a>
  </div>

  <div class="container-fluid">
    <!-- ...things with your navbar... -->
      <div class="visible-xs visible-sm">
        <!-- this element will be hidden on -md and -lg -->
      </div>
    <!-- ...things with your navbar... -->
  </div>
</nav> 
```

该元素完全居中，并且会在某些屏幕尺寸上隐藏（例如，-xs 和 -sm 对我来说没有位置）。我从 Twitter 的实际导航栏中得到这个想法

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-18T02:38:37.277

使用基本导航引导的代码

```
<!--MENU CENTER`enter code here` RESPONSIVE -->

  <div class="container-fluid">
        <div class="container logo"><h1>LOGO</h1></div>
      <nav class="navbar navbar-default menu">
        <div class="container-fluid">
          <!-- Brand and toggle get grouped for better mobile display -->
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#defaultNavbar2"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button>
           </div>
          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class="collapse navbar-collapse" id="defaultNavbar2">
            <ul class="nav nav-justified" >
              <li><a href="#">Home</a></li>
              <li><a href="#">Link</a></li>
              <li><a href="#">Link</a></li>
              <li><a href="#">Link</a></li>
              <li><a href="#">Link</a></li>
              <li><a href="#">Link</a></li>
              <li><a href="#">Link</a></li>
            </ul>
          </div>
          <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
      </nav>
    </div>
  <!-- END MENU-->
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-06-10T15:41:45.123

对于 Bootstrap v4，请检查：

[https://v4-alpha.getbootstrap.com/components/pagination/#alignment](https://v4-alpha.getbootstrap.com/components/pagination/#alignment)

只向 ul.pagination 添加类：

```
<nav">
  <ul class="pagination justify-content-center">
    <li class="page-item disabled">
      <a class="page-link" href="#" tabindex="-1">Previous</a>
    </li>
    <li class="page-item"><a class="page-link" href="#">1</a></li>
    <li class="page-item"><a class="page-link" href="#">2</a></li>
    <li class="page-item"><a class="page-link" href="#">3</a></li>
    <li class="page-item">
      <a class="page-link" href="#">Next</a>
    </li>
  </ul>
</nav> 
```

# r - R 2.15.0 的 betareg 包

> ID：10939484
> 
> 赞同：1
> 
> 时间：2012-06-07T20:34:50.827
> 
> 标签：r

在升级到版本 2.15.0 之前，我之前一直在旧版本的 R（我认为是 2.13）上使用 betareg（我正在运行 Ubuntu，所以我只是将 UCLA 镜像添加到我的 sources.list。）现在事情不工作。这是一个带有提示的示例对话：

```
> require(betareg)
Loading required package: betareg
Warning message:
In library(package, lib.loc = lib.loc, character.only = TRUE, logical.return = TRUE,  :
there is no package called ‘betareg’
> install.packages("betareg")
Installing package(s) into ‘/home/tim/R/i686-pc-linux-gnu-library/2.15’
(as ‘lib’ is unspecified)
Warning: unable to access index for repository http://cran.sixsigmaonline.org/src/contrib
Warning message: 
package ‘betareg’ is not available (for R version 2.15.0) 
```

我不确定该怎么做。理想情况下，我可以在 2.15 中使用这个包（因为我很快就会在使用它的远程服务器上工作——我不是管理员。）但是，如果能听到我想到的任何修复，我将不胜感激。谢谢。

编辑：很抱歉交叉验证的人把事情搞混了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:44:45.023

您可能需要查看不同的镜像，因为包 betareg 通过了所有包检查。

[http://cran.r-project.org/web/checks/check_results_betareg.html](http://cran.r-project.org/web/checks/check_results_betareg.html)

（当我尝试使用浏览器提供的镜像时，我收到了包目录的 404 消息。）

# testflight - 测试人员都显示为匿名用户

> ID：10939491
> 
> 赞同：22
> 
> 时间：2012-06-07T20:36:56.993
> 
> 标签：testflight

为什么我的所有崩溃日志都显示匿名用户，当他们都有一个 testflight 帐户并且我在测试飞行初始化中设置 uuid 时？

在我的单身人士中：

```
#define kTestFlightTest 1 
```

在应用程序初始化中：

```
[TestFlight takeOff:kTestFlightToken];
#ifdef kTestFlightTest
    [TestFlight setDeviceIdentifier:[[UIDevice currentDevice] uniqueIdentifier]];
#endif 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-14T18:22:49.663

刚刚通过电子邮件向 TestFlight 发送了有关它的信息，并得到了一个具有魅力的解决方案的回复。UDID 代码：

```
[TestFlight setDeviceIdentifier:[[UIDevice currentDevice] uniqueIdentifier]]; 
```

需要先去：

```
[TestFlight takeOff:kTestFlightToken]; 
```

交换这些，一切正常。:-D

我已经通过电子邮件回复说谢谢，但这应该是他们在文档中真正提到的内容（如此简单，但并不那么明显）。

**编辑：**此答案仅适用于iOS 7**之前**的 iOS 版本。正如评论中所述，iOS 7`[[UIDevice currentDevice] uniqueIdentifier]`完全删除。有一些方法可以`NSUUID`从 iOS 6 制作 UUID，但我不相信这些方法可以与 TestFlight 一起使用，因为它们是由每个应用程序的用户设备创建的，并且无法知道它在外部是什么。我敢肯定，TestFlight 的男女老少都在寻找一种方法来跟踪用户是谁，但在那之前，要习惯于看到“匿名用户”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T08:06:45.103

我还在我的代码中添加了相同的内容，例如

> [TestFlight setDeviceIdentifier:[[UIDevice currentDevice] uniqueIdentifier]];

在起飞之前，但在 ios 5 中不推荐使用此方法，因此我添加了以下方法

```
[TestFlight setDeviceIdentifier:[NSString stringWithFormat:@"%@",[[UIDevice currentDevice] identifierForVendor]]]; 
```

But still i am getting anonymous issues. i have written it to Testflight support but no luck yet. for two devices it shows user device name properly but not working on other tester's device.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T15:52:30.667

I've just performed some tests. Clearly there is no proper way to get the UDID anymore as @Danny Parker mentioned in a comment above. To test this I hardcoded my UDID in the app and submitted it to TestFlight. Any checkpoints or feedback resulted as messages from me. No more anonymous checkpoints and feedback. Obviously this is useless as I need each tester's UDID to see what checkpoints they hit. I guess TestFlight will have to find a different way to associate devices to logs.

# r - 从源代码构建 Slidify 包

> ID：10939496
> 
> 赞同：2
> 
> 时间：2012-06-07T20:37:45.957
> 
> 标签：r, github, package

是否有其他人有问题从 github 构建 slidify 包。我想玩，但安装返回错误。这是我使用的命令和导致的错误：

```
> library(devtools)
Rtools not on path and not installed in default location.
Warning message:
package ‘devtools’ was built under R version 2.14.2 
> install_github('slidify', 'ramnathv')
Installing github repo(s) slidify/master from ramnathv
Installing slidify.zip from https://github.com/ramnathv/slidify/zipball
Installing slidify
* checking for file 'C:\Users\btibert\AppData\Local\Temp\RtmpsrQIgw\ramnathv-slidify-954647c/DESCRIPTION' ... OK
* preparing 'slidify':
* checking DESCRIPTION meta-information ... OK
Warning in .write_description(db, ldpath) :
  Unknown encoding with non-ASCII data: converting to ASCII
* checking for LF line-endings in source and make files
* checking for empty or unneeded directories
* building 'slidify_0.1.tar.gz'
 ERROR
packaging into .tar.gz failed
Error: Command failed (1)
In addition: Warning message:
running command '"C:/PROGRA~1/R/R-214~1.1/bin/i386/R" CMD build "C:\Users\btibert\AppData\Local\Temp\RtmpsrQIgw\ramnathv-slidify-954647c" --no-manual --no-vignettes' had status 1 
```

我在 Windows 7 上，但这是我的会话信息以防万一：

```
> sessionInfo()
R version 2.14.1 (2011-12-22)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] devtools_0.6 plyr_1.7.1   RODBC_1.3-4 

loaded via a namespace (and not attached):
[1] RCurl_1.9-5.1 tools_2.14.1 
```

更新：更新到 R 2.15.0 后，我收到以下错误（即使在安装 Rtools 之后）：

```
Warning: invalid package 'Files/R/R-2.15.0/library'
Error: ERROR: cannot cd to directory 'C:/Program'
Error: Command failed (1)
In addition: Warning message:
running command '"C:/PROGRA~1/R/R-215~1.0/bin/i386/R" CMD INSTALL C:\Users\btibert\AppData\Local\Temp\Rtmp8oMxGU/slidify_0.1.tar.gz --library=C:/Program Files/R/R-2.15.0/library' had status 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:26:53.820

您正在运行 R 2.14.1（根据您的 SessionInfo）。slidify 将 R (>= 2.15.0) 作为依赖项，因此您将无法按原样安装它。如果可能，我建议升级到 2.15。

我试图让它与 2.14.1 一起工作，但它没有发生。不过，它在 2.15 上运行得非常好。

~~我不知道究竟是什么依赖于 R 2.15，但为了安全起见，ramnathv 可能会将其作为依赖项。我将它分叉并将依赖关系减少到 2.14 ( `install_github('slidify', 'Dasonk')`)，它可以在我的 R2.14.1 副本上正常安装，但我实际上没有测试任何功能。~~

~~因此，如果您无法更新 R，您可以尝试从我的 fork 中获取它，或者如果您有 github 帐户，您可以自己 fork，然后更改依赖项。如果确实有需要 2.15 的功能，您可以尝试找出解决方法，然后向 ramnathv 发送拉取请求。~~

# dojo - jsonp数据显示无效标签错误

> ID：10939502
> 
> 赞同：0
> 
> 时间：2012-06-07T20:38:17.273
> 
> 标签：dojo, jsonp

从其他帖子中，我认为这个错误只是意味着我的远程服务器没有以 jsonp 的形式返回我的结果，而只是它所在的 json。

```
{"rules":[{"value":"AllState"},{"value":"Cidade de Goa beach"},
    {"value":"Euro 2012"},{"value":"Euro&2012"},
    {"value":"Euro2012"},{"value":"European&Championship"},
    {"value":"Holiday Inn Resort"}]} 
```

现在有人告诉我包括回调参数等，但这不起作用。除了 Web 服务之外，我不知道有任何其他方法可以从我的带有 dojo 小部件的 Web 应用程序中获取我的数据。如何使服务器返回 jsonp，或者我可以更改 web 服务来执行此操作，我在 Visual Studio 2010 中创建为 WCF 服务。

```
 function search() {
     var targetNode = dojo.byId("rules");
     var jsonpArgs = {
        //url: "https://webservceexmaple.com/data_collectors/4/rules.json",
        jsonp: "jsonp",
        headers:{'X-Requested-With': null},
        content: {
            screenName: "testing"
        },
        load: function (data) {
            targetNode.innerHTML = "<pre>" + dojo.toJson(data, true) + "</pre>";
        },
        error: function (error) {
            targetNode.innerHTML = "An unexpected error occurred: " + error;
        }
    };
    dojo.io.script.get(jsonpArgs);
}
dojo.ready(search); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:48:33.583

您可能会在这里找到很多答案[http://msdn.microsoft.com/en-us/magazine/gg585144.aspx](http://msdn.microsoft.com/en-us/magazine/gg585144.aspx)

实现服务器端服务不是“刚刚”完成的，请在 c# 角落查看[http://www.c-sharpcorner.com/uploadfile/sridhar_subra/sumption-wcf-asmx-rest-service-using-jquery/](http://www.c-sharpcorner.com/uploadfile/sridhar_subra/consuming-wcf-asmx-rest-service-using-jquery/)

# c++ - 指针的真正“点”是什么？

> ID：10939503
> 
> 赞同：1
> 
> 时间：2012-06-07T20:38:18.077
> 
> 标签：c++, pointers

我已经用 Java 编程了很多，之前也涉足过 C++。我在各种 C++ 书籍中阅读过有关指针的内容，并在书籍中完成了各种示例。

我了解指针的基础知识，但有一件事我一直不清楚。指针在现实世界中的应用是什么？我的意思是，在什么情况下使用指针比仅通过引用传递更有益（比如在 Java 中？）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T20:44:48.827

> 我的意思是，在什么情况下使用指针比仅通过引用传递更有益（比如在 Java 中？）

Java 和许多其他语言中的引用基本上是指针之上的抽象。在 C（不是 C++）中，没有办法像在 C++ 中使用引用那样“通过引用传递”，因为不存在这种抽象，所以这永远不可能。C++ 添加了引用作为新的抽象。

使用 C++，您可以通过引用传递，这通常是首选。但是，在某种程度上，实际的动态内存分配仍将使用指针。

话虽如此，您可以在 C++ 中使用指针做一些事情，从而提高效率。了解内存和那里存储的内容允许您直接操作该数据，而无需在某些语言中获得抽象的开销。这不是“安全的”（很容易做一些危险和坏事）——但它通常很有用。（有些语言，如 C#，也允许您这样做，这非常有用，尽管它们要求您明确将该代码标记为“不安全”以允许它。）

话虽如此，指针通常在 C++ 中抽象。 [智能指针](http://www.boost.org/doc/libs/1_49_0/libs/smart_ptr/smart_ptr.htm)提供了许多相同的好处，而没有使用“原始”指针的副作用和危险......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:43:23.830

主要区别（至少对我而言）是您选择其中一个的时间。我认为如果您需要进行指针运算或为其分配 NULL 值，则使用指针，否则只需坚持引用；他们做这项工作。

# ios - 在新视图中编辑 UITableViewCell 的常用方法

> ID：10939505
> 
> 赞同：0
> 
> 时间：2012-06-07T20:38:20.513
> 
> 标签：ios, ios5

我想实现某种标准方法来编辑单元格值。这个想法是让它像 iphone 上的设置一样工作，在您单击值后，您将进入新视图并根据类型对其进行编辑。

一种方法是处理单元格的“点击”并打开模式视图：

```
(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

但我不知道是否有一种通用/好的方法如何使用通用视图根据“类型”（文本、多项选择、日期等）编辑字段来处理此编辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:08:45.737

通常，如果您想编辑一个字段，您应该推送一个新视图而不是模态显示它。不幸的是，您将不得不实现要推送的编辑视图。

# javascript - 将其分配给隐藏 div 中的多个链接时出现 zclip 问题

> ID：10939506
> 
> 赞同：0
> 
> 时间：2012-06-07T20:38:26.143
> 
> 标签：javascript, jquery

我正在使用 ZClip (http://www.steamdev.com/zclip/) 在多个链接的网页上启用“复制到剪贴板”功能。在这种情况下，我面临 2 个问题：

1.  在使用 ZClip 的页面中，有 4 个 div 列出了用户之前上传的图像文件、视频文件、音频文件和文档。这些 div 中的每一个一次只能看到一个，例如，用户将单击音频选项卡以查看所有音频文件，然后如果他单击视频选项卡，则显示音频文件的 div 将被隐藏，并且一个视频将被显示等等。可能是因为 ZClip 使用 Flash，它无法在父元素被隐藏的 HTML 元素中“加载”其依赖的 swf。因此，我在单击每个选项卡时加载 zclip 实例。这是问题一。我想加载一次，而不必每次单击选项卡时都重新加载。
2.  我在每个链接上启用了 zclip afterCopy 操作，同时在它们上初始化 zclip。在这个 afterCopy 函数中，会显示一个警告框，通知用户文本已复制到剪贴板。现在，由于每次单击选项卡时我都在加载 zclip 实例，所以 afterCopy 操作被应用了不止一次，因此警报框弹出不止一次。因此，如果我两次来到视频选项卡并单击复制链接按钮，那么我会看到 2 个警报框。如果我三次出现在视频选项卡上，则出现 3 个警报框。

我已经尝试`$('a.copy').zclip('remove');`在链接上使用初始化 zclip 之前。此功能显示在 zclip 网站上，但并没有导致摆脱额外的警报框。它只删除与链接关联的 swf，而不是绑定到链接的事件。基本上，我想要一些关于如何执行以下任一操作的指导：

1.  在选择选项卡之前将其从已应用的现有项目中“取消绑定”zclip。
2.  或某种方式 zclip 仅应用于多个链接一次，而不管其应用的链接是否在隐藏的 div 内
3.  或者更好的是，只使用一个 zclip 实例在多个“复制”链接上使用。因此，如果单击每个链接以将某些内容复制到剪贴板，它会使用相同的 zclip 实例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T03:13:00.653

萨根比特，

我想到了几种方法。

首先，假设您的四个图像/视频/音频/文档 div 中的每一个的 HTML 是这样的：

```
<div class="content" ...>
    ...
    <input class="copyMe" /><!-- the element whose value is to be copied -->
</div> 
```

这两种方法都依赖于一个“复制”按钮，当 zClip 初始化时它是可见的：

```
<a id="copy">Copy</a> 
```

您的 HTML 无疑是不同的，但调整以下想法以适应它应该相当简单。

## 将“复制”按钮移动到活动 div

该解决方案依赖于：

*   将“复制”按钮放置在 DOM 中的任何位置，前提是它在页面加载时可见
*   使“复制”按钮相对于其当前位置起作用
*   在每个内容 div 中提供一个带有 的空元素（例如 span 或 div）`class="copyWrapper"`，“复制”按钮可以移动到其中
*   `.copyWrapper`每次单击选项卡时，将“复制”按钮移动到活动面板的元素中。

初始化 zClip 如下：

```
var $copyButton = $('a#copy').zclip({
    path: 'js/ZeroClipboard.swf',
    copy: function() {
        return $(this).closest('div.content').find('.copyMe').val(); //$(this) is assumed correct
    }
}); 
```

并按如下方式初始化选项卡（假设 jQuery UI “选项卡”）：

```
$(".selector").tabs({
    ...
    show: function(event, ui) {
        $(ui.panel).find('.copyWrapper').append($copyButton);
    }
}); 
```

## 静态“复制”按钮

该解决方案依赖于：

*   更改页面设计以将“复制”按钮放置在内容 div 之外
*   使“复制”按钮适用于当前可见的任何内容 div。

初始化 zClip 如下：

```
$('a#copy').zclip({
    path: 'js/ZeroClipboard.swf',
    copy: function(){
        return $('.content:visible').find('.copyMe').val();
    }
}); 
```

## 动态一次性 zClip 初始化

该解决方案依赖于：

*   首次显示每个 div 的“复制”按钮（胸膜）时对其进行初始化
*   在初始化时引发布尔标志，以禁止在重新访问选项卡时进一步尝试重新初始化。

javascript:

```
$(".selector").tabs({
    ...
    show: function(event, ui) {
        var $panel = $(ui.panel);
        if(!$panel.data('zClip_initialized')) { //If zClip not initialized in theis panel, then initialize it.
            $('a.copy').zclip({
                path: 'js/ZeroClipboard.swf',
                copy: function() {
                    return $(this).closest('tr').find('.....').val();//Lots of guesswork here. You should have written this already.
                }
            });
            $panel.data('zClip_initialized', true);//Raise a boolean flag to indicate that zClip is already initialized
        }
    }
}); 
```

# c++ - 如何指示一个类不支持某些运算符？

> ID：10939507
> 
> 赞同：0
> 
> 时间：2012-06-07T20:38:30.293
> 
> 标签：c++, error-handling, compiler-errors, operator-overloading

我正在编写一个表示序数比例的类，但没有逻辑零点（例如时间）。这个比例应该允许加减法（`operator+`, `operator+=`, ...），但不允许乘法。

然而，我一直认为这是一种很好的做法，即当重载某个组的一个运算符（在本例中为数学运算符）时，还应该重载属于该组的所有其他运算符。在这种情况下，这意味着我还需要重载乘法和除法运算符，因为如果用户可以使用`A+B`他可能希望能够使用其他运算符。

有没有一种方法可以用来在编译器时为此抛出错误？最简单的方法是 no 重载运算符`operator*`，......但添加比`operator* is not know for class "time"`.

或者这是我真的不应该关心的事情（*RTFM 用户*）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T20:41:23.727

实现一个运算符只是为了发出未实现的信号似乎是做作的。如果有的话，您可以将其定义为`private`成员函数，并`static_assert`在其中放置一个如果有人（可能是朋友）尝试使用它时显示编译器错误。

未实施运算符时的最佳解决方案：不实施它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T20:44:02.870

> 然而，我一直认为这是一种很好的做法，即当重载某个组的一个运算符（在本例中为数学运算符）时，还应该重载属于该组的所有其他运算符。

错误的。唯一的组是`+`和`+=`- 然后*可能* `-`是和`-=`。“算术运算符”一般不是一个组。考虑类似的东西`std::string`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T22:36:20.783

简短版：有些数学结构有加法但没有乘法，所以不用担心。重载对您所表示的数学结构有意义的运算符。如果有人试图将两次相乘，那么这个错误`no match for operator* in ...`对任何 C++ 程序员都应该是有意义的。如果您认为他们真的会对为什么不能乘以两次感到困惑，您可以在文档中进行扩展。我认为编译器的工作并不是知道*为什么*运算符对给定的类没有意义，并在错误消息中表达出来。

长版：粗略地说，具有“算术运算符”`+`并且`-`是一个*组*的集合的数学术语（通常您不会使用该符号`+`表示组运算符，除非该运算符是可交换的，因此是*Abelian group*）。一个有乘法但没有加法的集合也可以是一个组，只要你离开`0`集合。加法和乘法在结构上相似——重要的区别是乘法通常允许至少一个元素没有逆 ( `0`)，而加法通常不允许。

`+`有时也用作符号，如自然数中的加法、序列连接，甚至是集合并集，其中元素通常没有逆。在那种情况下，你甚至没有一个组，只有一个二进制函数，你不会定义 unary `-`，你也可能不会定义 binary `-`。在这种情况下，可以说`+`是运算符的错误选择，但为时已晚`std::string`。

如果你的组也有`+`和，并且满足关于和之间关系的某些条件，那么它就是一个*环*，或者如果除了加法恒等元之外的每个元素都有一个乘法逆元（因此它有一个良好的行为） ，那么它就是一个*域。*`-``*``+``*`**`/`**

 **关于时间，考虑两个不同的概念通​​常很有用：绝对时间和持续时间。您可以将两个持续时间相加（给出一个持续时间），或者一个绝对时间和一个持续时间（给出一个绝对时间），但是将两个绝对时间相加是没有意义的（什么是“上周一加下周四”？）。

这种行为类似于在指针（代替绝对时间）和整数（代替持续时间）上定义的运算符，这并非完全巧合。你可以做`(char*)0 + 0`，但你做不到`(char*)0 + (char*)0`。所以绝对时间没有添加剂`operator+(abstime, abstime)`，但可以有`operator+(abstime, duration)`。

Durations are like numbers, but they have a physical dimension. It makes sense to multiply a duration by a dimensionless number (`2.4 * 3s == 7.2s`), but only rarely to multiply together two durations, and when you do the result is not a duration since its units are seconds-squared.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T20:43:30.167

只需声明重载的运算符，但不要实现它。在编译时，链接器会大惊小怪。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-07T20:42:19.277

编辑：我注意到您希望在使用它时调用它，那么最好不要实现它，或者可能使用 assert 命令来解决运行时错误。

```
assert("Message"); 
```**

# flash - 用于 Lion OSX 的 mtasc？

> ID：10939509
> 
> 赞同：3
> 
> 时间：2012-06-07T20:38:57.377
> 
> 标签：flash, gnu-make, mtasc, swfmill

我在我的 Lion OSX 机器上设置 mtasc 时遇到了一些麻烦。我目前正在尝试运行一个makefile脚本，它是：

SWFMILL := swfmill MTASC := mtasc

MTASCSTDLIB := /usr/share/mtasc/std

main: $(SWFMILL) 简单的 src/jscam.xml jscam.swf $(MTASC) -v -swf jscam.swf -main jscam.as -version 8 -cp src -cp $(MTASCSTDLIB)

清洁：rm -f jscam.swf

我很确定 SWFMil 设置得很好，但是在运行这个 make 文件时，我得到：

Mikes-iMac:js $ make swfmill simple src/jscam.xml jscam.swf mtasc -v -swf jscam.swf -main jscam.as -version 8 -cp src -cp /usr/share/mtasc/std 启动“mtasc " 失败：不再支持 PowerPC 架构。make: *** [main] 错误 2

也许我应该使用更新的 mtasc 版本（这是我从错误中得到的假设）？我只是在网上找不到任何东西，可以清楚地说明该版本是否存在，或者是否有另一种方法可以使这项工作。[我最近在http://www.grindheadgames.com/mtasc-permission-denied-error-fix](http://www.grindheadgames.com/mtasc-permission-denied-error-fix)看到了一篇关于 mtasc 的博客文章，这让我认为它应该仍然适用于 Lion，因为它适用于他们。

提前致谢！

# r - 重新排序因子会给出不同的结果，具体取决于加载的包

> ID：10939516
> 
> 赞同：18
> 
> 时间：2012-06-07T20:39:27.380
> 
> 标签：r, namespaces, masking, operator-precedence

我想创建一个条形图，其中条形按高度而不是按字母顺序按类别排序。当我加载的唯一包是 ggplot2 时，这很好用。但是，当我加载更多包并运行创建、排序和绘制数据框的相同代码时，条形图又恢复为按字母顺序排序。

我每次使用都检查了数据框`str()`，结果发现数据框的属性现在不同了，即使我每次都运行相同的代码。

下面列出了我的代码和输出。谁能解释不同的行为？为什么加载一些明显不相关的包（在某种意义上说我正在使用的函数似乎都没有被新加载的包掩盖）会改变运行该`transform()`函数的结果？

案例1：只加载了ggplot2

```
library(ggplot2)

group = c("C","F","D","B","A","E")
num = c(12,11,7,7,2,1)
data = data.frame(group,num)
data1 = transform(data, group=reorder(group,-num))

> str(data1)
'data.frame':   6 obs. of  2 variables:
 $ group: Factor w/ 6 levels "C","F","B","D",..: 1 2 4 3 5 6
  ..- attr(*, "scores")= num [1:6(1d)] -2 -7 -12 -7 -1 -11
  .. ..- attr(*, "dimnames")=List of 1
  .. .. ..$ : chr  "A" "B" "C" "D" ...
 $ num  : num  12 11 7 7 2 1 
```

案例 2：加载多个包，然后再次运行相同的代码

```
library(plyr)
library(xtable)
library(Hmisc)
library(gmodels)
library(reshape2)
library(vcd)
library(lattice)

group = c("C","F","D","B","A","E")
num = c(12,11,7,7,2,1)
data = data.frame(group,num)
data1 = transform(data, group=reorder(group,-num))

> str(data1)
'data.frame':   6 obs. of  2 variables:
 $ group: Factor w/ 6 levels "A","B","C","D",..: 3 6 4 2 1 5
 $ num  : num  12 11 7 7 2 1 
```

**更新：会话信息（）**

案例 1：加载 ggplot2 后运行 sessionInfo()

```
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
  [1] C/en_US.UTF-8/C/C/C/C

attached base packages:
  [1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
  [1] ggplot2_0.9.1

loaded via a namespace (and not attached):
  [1] MASS_7.3-18        RColorBrewer_1.0-5 colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       grid_2.15.0       
[7] labeling_0.1       memoise_0.1        munsell_0.3        plyr_1.7.1         proto_0.3-9.2      reshape2_1.2.1    
[13] scales_0.2.1       stringr_0.6        tools_2.15.0 
```

案例 2：加载附加包后运行 sessionInfo()

```
> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
  [1] C/en_US.UTF-8/C/C/C/C

attached base packages:
  [1] grid      splines   stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
  [1] lattice_0.20-6   vcd_1.2-13       colorspace_1.1-1 MASS_7.3-18      reshape2_1.2.1   gmodels_2.15.2  
[7] Hmisc_3.9-3      survival_2.36-14 xtable_1.7-0     plyr_1.7.1       ggplot2_0.9.1   

loaded via a namespace (and not attached):
  [1] RColorBrewer_1.0-5 cluster_1.14.2     dichromat_1.2-4    digest_0.5.2       gdata_2.8.2        gtools_2.6.2      
[7] labeling_0.1       memoise_0.1        munsell_0.3        proto_0.3-9.2      scales_0.2.1       stringr_0.6       
[13] tools_2.15.0 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-07T21:36:08.173

发生这种情况是因为：

1.  `gmodels`进口`gdata`
2.  `gdata`为`reorder.factor`

开始一个干净的会话。然后：

```
methods("reorder")
[1] reorder.default*    reorder.dendrogram* 
```

现在加载`gdata`（或加载`gmodels`，具有相同的效果）：

```
library(gdata)
methods("reorder")
[1] reorder.default*    reorder.dendrogram* reorder.factor 
```

注意没有掩蔽，因为`reorder.factor`在 base 中不存在

重新创建问题，但这次显式调用不同的包：

```
group = c("C","F","D","B","A","E")
num = c(12,11,7,7,2,1)
data = data.frame(group,num) 
```

基本 R 版本（使用`reorder.default`）：

```
str(transform(data, group=stats:::reorder.default(group,-num)))
'data.frame':   6 obs. of  2 variables:
 $ group: Factor w/ 6 levels "C","F","B","D",..: 1 2 4 3 5 6
  ..- attr(*, "scores")= num [1:6(1d)] -2 -7 -12 -7 -1 -11
  .. ..- attr(*, "dimnames")=List of 1
  .. .. ..$ : chr  "A" "B" "C" "D" ...
 $ num  : num  12 11 7 7 2 1 
```

`gdata`版本（使用）`reorder.factor`：

```
str(transform(data, group=gdata:::reorder.factor(group,-num)))
'data.frame':   6 obs. of  2 variables:
 $ group: Factor w/ 6 levels "A","B","C","D",..: 3 6 4 2 1 5
 $ num  : num  12 11 7 7 2 1 
```

# azure - 从队列接收多条消息而没有循环

> ID：10939519
> 
> 赞同：5
> 
> 时间：2012-06-07T20:39:57.517
> 
> 标签：azure, azure-worker-roles, servicebus, azure-queues, azureservicebus

我正在使用 Azure 服务总线来管理带有 webrole 和 workerrole 的消息。

我需要知道如何在不使用循环的情况下一次从队列中获取多条消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T23:37:48.443

服务总线队列无法一次检索多个消息，但您*可以*设置预取，将缓存消息（从而提高性能）。更多关于预取的信息在[这里](http://msdn.microsoft.com/en-us/library/windowsazure/hh528527.aspx)。

如果您确实需要批量读取消息，请考虑@AvkashChauhan 指出的内容：Windows Azure 存储队列支持在单个事务中一次读取多达 32 条消息。您需要单独删除每个队列消息；没有批量删除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-30T02:41:38.007

您可以使用 Microsoft.ServiceBus.Messaging 的 ReceiveBatch 方法：

```
private MessageReceiver messageReceiver;
var brokeredMessagesList = messageReceiver.ReceiveBatch(100); 
```

您可以在队列上加锁，直到接收到的批次处理完成，在您完成处理后，您可以调用 CompleteBatch 来释放队列上的锁：

```
 List<Guid> messageLockTokenList = new List<System.Guid>();
                foreach(BrokeredMessage message in brokeredMessagesList)
                {
                    messageLockTokenList.Add(message.LockToken);
                }
                messageReceiver.CompleteBatch(messageLockTokenList) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T23:10:23.533

从队列中检索消息时，在单个存储事务中将多条消息一起批处理。队列服务 API 中的 GetMessages 方法可以在单个事务中将指定数量的消息出队

通过 GetMessages 方法检索消息时，Queue Service API 在单个出队操作中支持的最大批处理大小限制为 32。超过此限制将导致运行时异常。

访问此处了解更多详细信息：http: [//windowsazurecat.com/2010/12/best-practices-for-maximizing-scalability-and-cost-effectiveness-of-queue-based-messaging-solutions-on-windows-azure/](http://windowsazurecat.com/2010/12/best-practices-for-maximizing-scalability-and-cost-effectiveness-of-queue-based-messaging-solutions-on-windows-azure/)

# if-statement - SSIS如何在数据流中做一个长的“if语句”？

> ID：10939531
> 
> 赞同：0
> 
> 时间：2012-06-07T20:41:12.943
> 
> 标签：if-statement, ssis

这是当前表的外观：

![在此处输入图像描述](../Images/19d3b0c98b8e61344ca86e7c619745a2.png)

在该表中，“Y”表示测试日期。

现在我想添加一个名为“TestDate”的列，它将根据“Monday”...和“Sunday”中的值显示测试日期。基本逻辑如下：

```
IF  MONDAY ='Y'
    TestDays = 'M' ;
else IF TUESDAY  ='Y'
    TestDays ='T' ;
 .... 
```

但是，我不知道如何在 SSIS 中做到这一点。如果我在派生列中使用“？：”，那么它会太长太复杂。有没有人有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T10:24:24.637

使用脚本组件。这样，您就可以在可维护的 .NET 脚本中编写逻辑。

[http://msdn.microsoft.com/en-us/library/ms136118.aspx](http://msdn.microsoft.com/en-us/library/ms136118.aspx)
[http://msdn.microsoft.com/en-us/library/ms181225.aspx](http://msdn.microsoft.com/en-us/library/ms181225.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T11:36:28.293

如果您不想沿着脚本路线走，但又想保留 '?:'s short ，则可能会将它们分开。

有两个派生列任务，第一个任务为每一天生成一个名称列，第二个任务将这些名称列连接在一起。

# c# - NHibernate 上的引用完整性与抽象类

> ID：10939536
> 
> 赞同：-1
> 
> 时间：2012-06-07T20:41:33.710
> 
> 标签：c#, nhibernate

我有这种情况，一个抽象的产品基类和两个具体的子类（汽车、自行车）。然后是拥有 InvoiceItem 集合的 Invoice。InvoiceItem 引用一个 Product 实例。这是hbms：

产品类别

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
               assembly="MyAssembly"
               namespace="MyNamespace">
<class name="Product" abstract="true">
    <id name="Id" column="id">
        <generator class="guid.comb" />
    </id>
    <property name="Code" column="code" type="string" not-null="true" />
    <property name="Name" column="name" type="string" not-null="true" />

    <set name="Items" inverse="true">
        <key column="productId" />
        <one-to-many class="InvoiceItem"/>
    </set>
    <union-subclass name="Car" table="Cars">
        <property name="EngineName" column="engineName" not-null="true" />
        </union-subclass>
        <union-subclass name="Bike" table="Bikes">
            <property name="ShifterSpeedCount" column="shifterSpeedCount" type="int" not-null="true" />
        </union-subclass>
    </class>
</hibernate-mapping> 
```

发票项目类

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"
               assembly="MyAssembly"
               namespace="MyNamespace">
<class name="InvoiceItem" table="InvoiceItems">
    <id name="Id" column="id">
        <generator class="guid.comb" />
    </id>

    <property name="Price" column="price" precision="15" scale="3" not-null="true" />
    <property name="Count" column="count" type="int" not-null="true" />
    <many-to-one name="Product" column="productId" foreign-key="FK_ProductInvoiceItems"  />
</class>
</hibernate-mapping> 
```

我遇到的问题是，当我删除 Car 的实例时，NHibernate 不会检查 InvoiceItem 中的完整性，因此在删除之后，我的引用损坏了，从而导致了问题。

问题是由于继承引起的，productId列不能引用单个表，导致NHibernate不生成FK。

这个场景非常简单，所以可能手动检查参考很简单。但是如何在更复杂的项目中解决这个问题呢？有没有办法强制 NHibernate 自动检查完整性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:12:36.730

实现一个`IPreDeleteEventListener`和伪代码

```
Product p = entity as Product;
if (p != null && p.InvoiceItems.Count > 0)
    throw new MyException(); 
```

# svn - SVN 命令行客户端输出乱码 Unicode 而不是英文

> ID：10939537
> 
> 赞同：3
> 
> 时间：2012-06-07T20:41:40.280
> 
> 标签：svn

[http://i.imgur.com/1qvVv.png](http://i.imgur.com/1qvVv.png)

这是它的屏幕截图。

我在 Windows 7 上运行 svn，也许这会有所不同？

当我运行语言环境时：

```
C:\Program Files (x86)\Subversion>locale
LANG=
LC_CTYPE="C.UTF-8"
LC_NUMERIC="C.UTF-8"
LC_TIME="C.UTF-8"
LC_COLLATE="C.UTF-8"
LC_MONETARY="C.UTF-8"
LC_MESSAGES="C.UTF-8"
LC_ALL= 
```

如何将 LANG 设置回 en_US？有任何想法吗？

我还尝试了 Pekka 建议的链接，导出功能对我不起作用（？）。

注意：在 windows 命令行上显示 unicode，当我在 Cygwin 上尝试 svn 时，它工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T17:09:30.100

从正确的来源重新安装摆脱了问题...

# mongodb - 列族存储与文档存储

> ID：10939539
> 
> 赞同：8
> 
> 时间：2012-06-07T20:41:48.627
> 
> 标签：mongodb, cassandra, redis, nosql

我读过几篇文章，例如[这篇](https://stackoverflow.com/questions/7565012/how-does-column-oriented-nosql-differ-from-document-oriented)文章，比较了像 MongoDb、CouchDb 和 CouchBase 这样的文档存储与像 Cassandra 这样的列族存储。

一个比较是，文档存储在更高的粒度级别上工作，而不是让您处理文档的各个部分的列族存储。我发现这根本不正确，因为 Redis 通过[hset 操作支持这一点，](http://www.jarvana.com/jarvana/view/redis/clients/jedis/1.3.1/jedis-1.3.1-javadoc.jar!/redis/clients/jedis/Jedis.html) [mongodb](http://www.mkyong.com/mongodb/java-mongodb-update-document/)也是如此。

那么是否有这样的论点，即尽管这两种类型的解决方案都允许更新/读取文档的某些部分，但列族存储在这方面比文档存储更有效？

这是否也意味着我应该采用文档存储路径来插入和读取繁重的应用程序，而采用列族路径来更新和读取繁重的应用程序？

还有哪些其他差异可以帮助我选择一种解决方案而不是另一种？

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-08T19:33:16.990

我建议主要区别在于查询模型。它们都可以存储相似的数据结构（例如，您可以将 JSON 文档放入 CF 存储中），但文档存储通常为您提供按值查询的功能，而 CF 存储通常不提供。然而，界限越来越模糊，随着每个数据库项目的成熟，这种概括似乎变得越来越不适用。例如，Cassandra（一个流行的 CF 存储）确实提供了一些带有二级索引的按值查询功能。然而，大多数 CF 存储要求您以您打算读取的方式写入数据，这意味着您必须根据查询来考虑您的数据模型。

在我看来，各种数据库技术之间还有其他同样重要的区别，例如一致性模型、数据中心复制能力、扩展模型、易于管理、缓存能力等。

# iphone - OBJC_CLASS_$_MTSCRA”，引用自

> ID：10939540
> 
> 赞同：3
> 
> 时间：2012-06-07T20:41:54.393
> 
> 标签：iphone, ios, api

我试图通过链接使示例代码运行下载

[http://www.magtek.com/support/software/downloads/sw/99510108.zip](http://www.magtek.com/support/software/downloads/sw/99510108.zip)

这是一个读卡器 api，这是一个示例代码。当我运行此代码时，我得到了错误：

```
ld: warning: ignoring file /Users/gaurav.garg/Downloads/99510108/SampleCode/Lib/libMTSCRA.a, missing required architecture i386 in file
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_MTSCRA", referenced from:
      objc-class-ref in MagTekDemoAppDelegate.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

MTSCRA 类只是一个头文件，我检查过的解决方案是我们必须在目标的构建构建阶段的编译源路径中添加 .m 文件......但不幸的是我没有 MTSCRA.m 文件.MTscra.h 有 AudioToolBox 和 externalAccesory 框架。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-07T02:11:41.007

实际上问题在于 MagTek 为您提供了两个单独的 .a 文件。

如果您查看 Release-iphoneos 中的那个并运行以下命令：

```
> lipo -info libMTSCRA.a 
Architectures in the fat file: libMTSCRA.a are: armv7 (cputype (12) cpusubtype (11)) 
```

同样，如果您查看 Release-iphonesimulator 中的那个...

```
> lipo -info libMTSCRA.a 
input file libMTSCRA.a is not a fat file
Non-fat file: libMTSCRA.a is architecture: i386 
```

所以真正的答案是通过使用 lib 工具将两者结合起来，然后创建单独的 DEBUG 和 RELEASE 库搜索路径，为 DEBUG 创建一个新的 libMTSCRA.a，它是 n-way FAT。

首先，您将转到 MagTek 保存两个不同版本的 libMTSCRA.a 的上述目录。当您在那里时，您将运行以下命令：

```
libtool -static -o libMTSCRA_FAT.a Release-iphoneos/libMTSCRA.a Release-iphonesimulator/libMTSCRA.a 
```

检查输出文件时，您应该看到：

```
>lipo -info libMTSCRA_FAT.a 
Architectures in the fat file: libMTSCRA.a are: armv7 (cputype (12) cpusubtype (11)) i386 
```

然后在您的项目中，创建两个文件夹（也称为组）“debug”和“release”，然后重新构建 DEBUG 和 RELEASE 库搜索路径以使用这些各自的目录。

最后，将 libMTSCRA_FAT.a 重命名为 libMTSCRA.a 并将其放在调试搜索路径中，以保持 iOS (armv7 (cputype (12) cpusubtype (11))) 处于发布状态。我们这样做的原因是，虽然在调试模式下使用这个新创建的 .a 文件可能没问题，但将其推送到生产环境被认为是不好的，因为我们无法确认合并的库是 100% 我们想要的（拱门的合并）。

等等瞧！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-08T16:38:00.883

```
Undefined symbols for architecture i386: 
```

这意味着您要链接的库没有 i386 的符号。这意味着您不能使用模拟器。您将需要在设备上运行示例或获取为模拟器创建的库版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T21:18:41.497

您需要确保包含该库所需的所有框架。

# c++ - C++11 Lambda 和模板导致奇怪的链接器行为

> ID：10939543
> 
> 赞同：4
> 
> 时间：2012-06-07T20:42:09.127
> 
> 标签：c++, templates, c++11, g++, multiple-definition-error

在我的代码中，我有包含依赖于一些模板参数的 lambda 表达式的函数模板。最近我遇到了链接器错误，可能是由于我的 g++ 编译器的更新，但不幸的是，我并不确切知道。

我将举一个小例子来说明这个问题。因为这是一个链接器问题，我们必须创建几个文件来演示它。我们有`common.hpp`，它包含一个通用模板函数，两个模块`a.cpp`/`a.hpp`和`b.cpp`/`b.hpp`使用该函数和一个`main.cpp`包含该`main`函数的模块。

```
// common.hpp
#include <algorithm>

template <class Iterator, typename Iterator::value_type x>
void
my_transform(Iterator begin, Iterator end)
{
  std::transform(begin, end, begin,
                 [] (typename Iterator::value_type y) { return x+y; });
} 
```

文件`a.cpp`：

```
// a.cpp
#include "common.hpp"
#include "a.hpp"

void a(std::vector<int>& vec)
{
  my_transform<std::vector<int>::iterator, 5>(vec.begin(), vec.end());
} 
```

文件`a.hpp`

```
#include <vector>
void a(std::vector<int>& vec); 
```

文件`b.cpp`：

```
// b.cpp
#include "common.hpp"
#include "b.hpp"

void b(std::vector<int>& vec)
{
  my_transform<std::vector<int>::iterator, 5>(vec.begin(), vec.end());
} 
```

文件`b.hpp`

```
#include <vector>
void b(std::vector<int>& vec); 
```

文件`main.cpp`

```
int main() { return 0; } 
```

如果我编译和链接使用

```
g++-4.7 -std=c++11 -c a.cpp
g++-4.7 -std=c++11 -c b.cpp
g++-4.7 -std=c++11 -c main.cpp
g++ a.o b.o main.o 
```

我收到一个`multiple-definition`错误：

```
b.cpp:(.text+0x30): multiple definition of `void my_transform<__gnu_cxx::__normal_iterator<int*, std::vector<int, std::allocator<int> > >, 17>(__gnu_cxx::__normal_iterator<int*, std::vector<int, std::allocator<int> > >, __gnu_cxx::__normal_iterator<int*, std::vector<int, std::allocator<int> > >)::{lambda(int)#1}::operator int (*)(int)() const'
a.o:a.cpp:(.text+0x30): first defined here 
```

基本上它说 lambda 表达式已经在 a.xml 中定义。好的。如果我将模板参数`b`从 5 更改为 7，一切正常。

问题：

1.  这是我应该期待的还是它的错误`g++`？我很确定我使用早期版本的 debian 包编译了这段代码`g++-4.7`。
2.  除了不使用 lambda 之外，还有其他解决方法吗？我认为，如果生成的符号是静态的，则不会有任何问题。**更新：解决方法：制作 my_transform`static`或`inline`.**

这个问题不是很重要。“不要在这里使用 lambdas”方法没有问题，但我很好奇。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T22:26:34.803

这是 g++ 中的一个错误，它是在 4.7.0-11 和[4.7.0-12](http://packages.debian.org/changelogs/pool/main/g/gcc-4.7/gcc-4.7_4.7.0-12/changelog)之间引入的（我测试了这两个 Debian 版本）。[gcc-snapshot (20120601-1)](http://packages.debian.org/changelogs/pool/main/g/gcc-snapshot/gcc-snapshot_20120601-1/changelog)也很好，不幸的是，我也不知道它们之间有什么区别 - 4.7.0-12 是 6 天后和不同的分支，我没有 gcc存储库在这里进行比较）。我在 gcc 的 bugzilla 中找不到相关条目。

该标准的相关部分是

> 类类型（第 9 条）、枚举类型（7.2）、带外部链接的内联函数（7.1.2）、类模板（第 14 条）、**非静态函数模板**（14.5.6）可以有多个定义、类模板的静态数据成员 (14.5.1.3)、类模板的成员函数 (14.5.1.1) 或在程序中未指定某些模板参数的模板特化 (14.7、14.5.5)，前提是每个定义出现在不同的翻译单元中，并且只要定义满足以下要求……那么程序的行为就好像有一个 D *[D is that class/function/whatever]*的定义。

将此段应用于 时`my_transform`，您会看到它是一个非静态函数模板，它满足要求（为简洁起见，省略），因此程序应该表现得好像整个程序中只有一个定义。不管里面有什么，这都成立，所以`operator()`lambda 是否存在都无关紧要`inline`（应该是，但实际上并不重要¹）。

顺便说一句，穷人的 lambda 函数等效（实际上应该等效于 AFAIK）

```
template <class Iterator, typename Iterator::value_type x>
void
my_transform(Iterator begin, Iterator end)
{
  struct Foo {
    auto operator()(typename Iterator::value_type y) const -> decltype(x+y) { return x+y; }
  };
  std::transform(begin, end, begin,
                 Foo());
} 
```

仍然有效。

[1：我不确定它本身是否会受到 ODR 的约束，因为它没有联系（参见 5.1.2/3 和 3.5/8）]

[为了确保我不会忘记它，该错误是由提交[f899a730d4f41b6a20b5508059a450f3a9347316引入的](http://gcc.gnu.org/git/gitweb.cgi?p=gcc.git;a=commitdiff;h=f899a730d4f41b6a20b5508059a450f3a9347316)]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:39:36.363

这看起来像编译器/链接器问题 4.6.1 没有它。

此命令在您的系统上输出什么？

```
nm -C a.o | grep 'lambda(int)#1' 
```

?

在 4.6.1 中，有一个弱符号（ 的实例化`std::transform`）和一个本地符号（`operator()`用于 lambda）。根本没有`operator int (*)(int)() const`定义（似乎导致问题的原因）。

# rabbitmq - RabbitMQ 管理 Web 控制台不显示队列或交换

> ID：10939545
> 
> 赞同：16
> 
> 时间：2012-06-07T20:42:17.857
> 
> 标签：rabbitmq

我已经设置了 rabbitmq 2.8.2 并运行了 Web 管理界面。队列和交换不显示数据。

rabbitmqctl list_queues 工作并显示我的队列。

我已经完成了rabbitmqctl stop_app、start_app .. 以及服务rabbitmq-server 重启。

知道如何获取要填充的队列和交换详细信息吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-08T21:43:22.867

我已经删除了来宾用户并为自己创建了一个新用户。我的新用户没有访问/vhost 的权限。添加该权限解决了我的问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-25T15:09:25.847

Rabbitmq 用户只有查看他们默认创建的队列的权限。此外，如果您希望用户有权访问管理控制台，您需要授予正确的权限。

为了解决这个问题，我跑了：

```
rabbitmqctl set_user_tags <user> management 
```

在 RabbitMQs 网站上有更多关于设置访问管理控制台的正确权限的信息：[https ://www.rabbitmq.com/management.html](https://www.rabbitmq.com/management.html)

# android - 不同移动平台的文件格式是什么

> ID：10939553
> 
> 赞同：2
> 
> 时间：2012-06-07T20:43:14.613
> 
> 标签：android, ios, windows-phone-7, blackberry, mobile

我正在尝试了解有关移动应用程序开发的更多信息。iOS 应用程序包含在“ipa”文件中。

android、BlackBerry 和 Windows Phone Mobile 的文件格式是什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T20:49:15.693

我们在谈论应用程序分发格式，对吗？

*   Windows 电话 7：XAP。这是一个重命名的 ZIP。
*   安卓：APK。这是一个重命名的 ZIP。
*   Windows 移动：CAB。也是一种压缩格式，与 ZIP 类似但不完全相同。许多流行的存档器都可以打开它们。
*   黑莓：ALX 用于侧载，JAD 和 COD 用于无线安装。JAD 是一个文本文件，COD 是二进制文件，但不知道里面有什么。
*   三星bada：ZIP。就如此容易。

请注意，Windows Phone 7 和 Windows Mobile（6.x 及更低版本）具有完全不同的应用分发模型。WinMo 公开其文件系统，因此从技术上讲，不需要特定的应用程序分发格式 - 您可以将 EXE 复制到 Program Files 并随心所欲地运行它。一些老派应用程序希望您这样做。不过，CAB 更方便 - 它们只需单击即可安装。

WinPhone7 仅支持从 MS Marketplace 安装。XAP 是编译器发出的格式，您提交到市场。

所有这些都是包装格式。这些文件通常包含可执行文件、库（如果有）、资源、资产和描述应用程序的清单。如果您想知道可执行文件的格式 - 那完全是另一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:49:19.523

大多数应用程序文件实际上是具有不同结尾的 zip 文件。您可以通过将它们重命名为 .zip 来打开它们。Androids 的结尾是 .apk。[http://en.wikipedia.org/wiki/APK_(file_format)](http://en.wikipedia.org/wiki/APK_%28file_format%29)在某些情况下，在 Mac 上重命名和打开这些应用程序文件可能会失败。最好使用 Windows 或 Linux 机器。

# sql-server - 如何在 SQL Server 的 SELECT 中使用先前的计算？

> ID：10939563
> 
> 赞同：1
> 
> 时间：2012-06-07T20:43:52.213
> 
> 标签：sql-server, ms-access

我使用过 MS Access，但我不是 SQL Server 专家。现在我发现了一个令我困惑的不同之处。（我使用的是 SQL Server 2008。）

我正在 SELECT 中进行一些计算，并希望在下一个计算中使用一个计算的结果。

假设我们有一个包含两个字段的产品表 - 名称和价格。在 MS Access 中，此查询工作正常：

```
 SELECT Name, Price * 2 AS DoublePrice, DoublePrice * 2 AS QuadPrice
  FROM Products 
```

即我在下一个使用第一个计算的结果。这给出了我期望的结果-名称+价格的两倍+价格的四倍。

但这不会在 SQL Server 下编译 - 我在第二次计算中得到一个“未知字段：DoublePrice”错误。

有什么办法可以使这项工作？即稍后在同一个SELECT 中使用（命名）计算？我做了一些相当大的计算，并希望在其他计算中建立这些值。并且为此添加额外的视图/子选择感觉很愚蠢......

感谢您的帮助！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:00:00.503

不，不是直接的。您可以使用派生表、CTE、a`CROSS APPLY`甚至重新计算：

```
-- derived table
SELECT *, DoublePrice * 2 AS QuadPrice
FROM (  SELECT Name, Price * 2 AS DoublePrice
        FROM Products) P

-- CTE
;WITH CTE AS
(
    SELECT Name, Price * 2 AS DoublePrice
    FROM Products
)
SELECT *, DoublePrice * 2 AS QuadPrice
FROM CTE

-- Just do the calculation again
SELECT Name, Price * 2 AS DoublePrice, (Price * 2) * 2 AS QuadPrice
FROM CTE

-- CROSS APPLY
SELECT *, 2 * DoublePrice AS QuadPrice
FROM Products P
CROSS APPLY (SELECT 2 * Price) AS T(DoublePrice) 
```

# database - 树系统中基于角色的访问控制

> ID：10939569
> 
> 赞同：4
> 
> 时间：2012-06-07T20:44:08.483
> 
> 标签：database, database-design, rbac

我试图找出为结构为树系统的用户权限系统创建数据库的最佳方法。

（用于说明目的）我有三个级别的控制：`1`物业组、`2`物业、`3`建筑。一个属性组有几个属性，一个属性有几个建筑物。

我想在每个级别上设置管理。

a`PropGroupAdmin`可以查看和编辑设置属性组内的所有属性，以及里面的建筑物。

a`PropAdmin`只能查看设置的属性和其中的建筑物

和一个`BldngAdmin`只能查看设置的建筑物

我设想它的工作方式是用户 Bobby 是一个属性组 ID 为 102 的 PropGroupAdmin。这将转化为我可以从视图中读取的一系列特定权限。

我的问题是如何设置 GroupPrivileges 表以能够继承（如果这是正确的话）层次结构？本质上允许我创建一个视图，我可以阅读该视图以查看用户是否具有执行任务的正确权限。

我创建了一个小图表，说明我想象它会如何工作。 ![在此处输入图像描述](../Images/efe8966b239752c762aa865d95532e62.png)

我知道这不会这样工作，我只是想弄清楚热以进行更改以获得类似的结果。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T20:58:35.570

为什么要重新发明轮子？为什么不实施基于角色的访问控制标准？[http://csrc.nist.gov/groups/SNS/rbac/](http://csrc.nist.gov/groups/SNS/rbac/)

所有数据库都有实现。

[http://www.tonymarston.net/php-mysql/role-based-access-control.html](http://www.tonymarston.net/php-mysql/role-based-access-control.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T22:52:00.847

如果这还不算太晚，请看一下：

[http://vita.codeplex.com/wikipage?title=guide_authorization](http://vita.codeplex.com/wikipage?title=guide_authorization)

# php - htmlentities 究竟对其中的字符串 htmlentities 做了什么？

> ID：10939571
> 
> 赞同：0
> 
> 时间：2012-06-07T20:44:10.573
> 
> 标签：php

```
var_dump(htmlentities("&lt;space&gt;")); 
```

返回`string(21) "&lt;space&gt;",`

21个字符吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:46:02.007

实际上它返回了其他东西：

```
<? var_dump(htmlentities("&lt;space&gt;")); ?>
string(21) "&amp;lt;space&amp;gt;" 
```

您看到的是转义字符串的未**转义**版本:)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:46:16.403

有空格或特殊格式。

`"&amp;lt;space&amp;gt;"`= 21 个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:46:46.377

因为它将 & 符号转换为它的 HTML 实体。

```
& => &amp; 
```

所以，你真的得到了字符串：

```
&amp;lt;space&amp;gt; 
```

这是21个字符。

您可以在浏览器上查看源代码以查看上面的确切字符串。如果您不查看源代码，浏览器将转换`&amp;`回`&`，这就是为什么您只能看到`&lt;space&gt;`.

# xcode - 什么条件可以启用 Xcode 4“产品 > 测试”菜单选项？

> ID：10939578
> 
> 赞同：1
> 
> 时间：2012-06-07T20:44:47.147
> 
> 标签：xcode, octest

在 Xcode 4 中为产品启用“测试”选项的原因尚不完全清楚。当您创建具有关联`.octest`目标的新项目时，它会启用。

是否有标志或选项可以将特定目标链接为对另一个目标的测试？参考资料似乎只谈论在他们工作时进行测试，而不是让他们首先工作。

我想要做的是使用非 Objective-C 测试框架，在本例中为[Catch](http://www.levelofindirection.com/journal/2010/12/28/unit-testing-in-c-and-objective-c-just-got-easier.html)，用于测试跨平台 C++ 应用程序。带有相关 Foundation 库的 Objective-C 在目标上不可用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T20:19:32.277

如果您需要将第三方测试框架添加到 Xcode 项目中，您可以通过替换与运行默认情况下的`otest`.

添加一个将您的第三方测试套件编译为可执行形式的目标。这与 .octest 目标无关。

在“Build Phases”、“Target Dependencies”下将此目标添加为主要“.octest”目标的依赖项，以确保根据需要编译测试。

将“运行脚本”部分替换为执行测试所需的任何内容。通常它看起来像：

```
DYLD_LIBRARY_PATH=$TARGET_BUILD_DIR "${TARGET_BUILD_DIR}/myCustomTests" 
```

这假定有一个`myCustomTests`由自定义测试目标生成的可执行文件，并且还将其配置`DYLD_LIBRARY_PATH`为包含构建目录，以便正确加载任何自定义库。

# c# - 将两个相关的 DataSet 绑定到两个 DataGrid

> ID：10939581
> 
> 赞同：0
> 
> 时间：2012-06-07T20:44:56.830
> 
> 标签：c#, wpf, mvvm, datagrid, wpfdatagrid

我在将 DataSet 与两个相关的表绑定时遇到问题，我已经搜索了很多次。我不确定如何使用 WPF DataGrid 执行此操作（它似乎与使用 WinForms DataGrid 不同）。

我正在使用 MVVM 模式并将我的 DataContext 与我的 DataSet 关联，一个网格绑定`ItemsSourceProperty`到其中一个表。我想知道您如何在其中选择一项`dataGrid1`并将相关行自动绑定到`dataGrid2`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T07:26:45.587

您只需要知道您的关系名称。让我们假设表是**Student**和**Classes**并且关系名称是：**FK_Student_Classes**，那么您的绑定如下所示：

```
 <DataGrid x:Name="grdStudents" ItemsSource="{Binding MyDataSet.Student}" AutoGenerateColumns="True" Grid.Row="0"/>
    <DataGrid ItemsSource="{Binding ElementName=grdStudents, Path=SelectedItem.FK_Student_Classes}" Grid.Row="1"/> 
```

当您在学生网格中选择一行时，您将在班级网格中看到所有相关行。

# android - Android预打包数据库更新

> ID：10939582
> 
> 赞同：1
> 
> 时间：2012-06-07T20:45:00.757
> 
> 标签：android, database, sqlite, upgrade

我正在为 android 开发一个测验类型的应用程序，并旨在能够随着时间的推移扩展问题库。为此，我预先打包了 SQLite 数据库，并在升级时检查更新并覆盖它：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    if(newVersion>oldVersion) {
        InputStream inputStream = null;
        OutputStream outStream = null;
        String dbFilePath = DATABASE_PATH + DATABASE_NAME;
        try {
            inputStream = myContext.getAssets().open("questions.db");
            outStream = new FileOutputStream(dbFilePath);
            byte[] buffer = new byte[1024];
            int length;
            while ((length = inputStream.read(buffer))>0) {
                outStream.write(buffer, 0, length);
            }

            outStream.flush();
            outStream.close();
            inputStream.close();

        } catch(IOException e) {
            throw new Error("problem copying database from resource file");
        }
    }
} 
```

我不确定的是如何保存一个问题是否已被尝试（并防止它在升级时被覆盖）。看来我的选择是：

1) 为每个问题 id 保存一个布尔共享首选项（可能有很多 sharedprefs）

2）创建一个单独的数据库来保存已回答问题的数据（似乎有点矫枉过正）

3) 将结果数据保存在同一数据库的单独表中，然后确保在升级时仅覆盖问题表

4) 将用户数据保留在问题表中自己的列中，但防止该列被覆盖。

在上面，4 似乎是最优雅的（虽然不确定是否可能）。最好的方法是什么（如果是选项 3 或 4，我该如何修改代码？！）

非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:31:22.073

如果要保留旧数据库中的数据，请使用 SQL 解析/读取两个数据库的记录。仅在旧数据库中插入新问题，因此获取新数据库将通过“插入或更新”语句获取所有数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:33:21.717

没门！由于 SQLite 数据库的结构，您不能自己更改其文件

但也许你必须选择：

1.  读取所有数据库，更改您想要的表然后编写它。
2.  将您的可重写表分开存储。（这个解决方案是假的，我知道）

# php - 将 Google 信任徽章添加到 Magento

> ID：10939583
> 
> 赞同：4
> 
> 时间：2012-06-07T20:45:01.757
> 
> 标签：php, magento, google-trusted-stores

我正在尝试将 Google Trust Badge 添加到我的 magento 商店。我试图在 Magento 网站上搜索扩展程序，但找不到。我需要将以下代码粘贴到产品和结帐页面还是必须对其进行更改？如果有人能引导我走向正确的方向，我将不胜感激。

```
<!-- BEGIN: Google Trusted Store -->
<script type="text/javascript">
  var gts = gts || [];

  gts.push(["id", "54785"]);
  gts.push(["google_base_offer_id", "ITEM_PRODUCT_SEARCH_ID"]);
  gts.push(["google_base_subaccount_id", "ITEM_PRODUCT_SEARCH_ACCOUNT_ID"]);
  gts.push(["google_base_country", "ITEM_PRODUCT_SEARCH_COUNTRY"]);
  gts.push(["google_base_language", "ITEM_PRODUCT_SEARCH_LANGUAGE"]);

  (function() {
    var scheme = (("https:" == document.location.protocol) ? "https://" : "http://");
    var gts = document.createElement("script");
    gts.type = "text/javascript";
    gts.async = true;
    gts.src = scheme + "www.googlecommerce.com/trustedstores/gtmp_compiled.js";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(gts, s);
  })();
</script>
<!-- END: Google Trusted Store -->

<!-- START Trusted Stores Order -->
<div id="gts-order" style="display:none;">

  <!-- start order and merchant information -->
  <span id="gts-o-id">MERCHANT_ORDER_ID</span>
  <span id="gts-o-domain">MERCHANT_ORDER_DOMAIN</span>
  <span id="gts-o-email">CUSTOMER_EMAIL</span>
  <span id="gts-o-country">CUSTOMER_COUNTRY</span>
  <span id="gts-o-currency">CURRENCY</span>
  <span id="gts-o-total">ORDER_TOTAL</span>
  <span id="gts-o-discounts">ORDER_DISCOUNTS</span>
  <span id="gts-o-shipping-total">ORDER_SHIPPING</span>
  <span id="gts-o-tax-total">ORDER_TAX</span>
  <span id="gts-o-est-ship-date">ORDER_EST_SHIP_DATE</span>
  <span id="gts-o-has-preorder">HAS_BACKORDER_PREORDER</span>
  <span id="gts-o-has-digital">HAS_DIGITAL_GOODS</span>
  <!-- end order and merchant information -->

  <!-- start repeated item specific information -->
  <!-- item example: this area repeated for each item in the order -->
  <span class="gts-item">
    <span class="gts-i-name">ITEM_NAME</span>
    <span class="gts-i-price">ITEM_PRICE</span>
    <span class="gts-i-quantity">ITEM_QUANTITY</span>
    <span class="gts-i-prodsearch-id">ITEM_PRODUCT_SEARCH_ID</span>
    <span class="gts-i-prodsearch-store-id">ITEM_PRODUCT_SEARCH_ACCOUNT_ID</span>
    <span class="gts-i-prodsearch-country">ITEM_PRODUCT_SEARCH_COUNTRY</span>
    <span class="gts-i-prodsearch-language">ITEM_PRODUCT_SEARCH_LANGUAGE</span>
  </span>
  <!-- end item 1 example -->
  <!-- end repeated item specific information -->

</div>
<!-- END Trusted Stores --> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T00:12:34.280

[实施 Google 可信商店](http://support.google.com/trustedstoresmerchant/bin/answer.py?hl=en&answer=2609862)：[#3 将 JavaScript 添加到您的站点](http://support.google.com/trustedstoresmerchant/bin/answer.py?answer=2609894)：

Google 实际上希望您将第一部分放在网站的*每个*页面上。无需在模板文件中执行此操作，您可以将其添加到 System > Configuration > General > Design 中的 Footer > Miscellaneous HTML。我删除了`ITEM_PRODUCT_SEARCH_ID`和`ITEM_PRODUCT_SEARCH_ACCOUNT_ID`，但请随时编辑您的产品页面以添加此数据。这是代码：

```
<!-- BEGIN: Google Trusted Store -->
<script type="text/javascript">
  var gts = gts || [];

  gts.push(["id", "54785"]);
  gts.push(["google_base_country", "US"]);
  gts.push(["google_base_language", "en"]);

  (function() {
    var scheme = (("https:" == document.location.protocol) ? "https://" : "http://");
    var gts = document.createElement("script");
    gts.type = "text/javascript";
    gts.async = true;
    gts.src = scheme + "www.googlecommerce.com/trustedstores/gtmp_compiled.js";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(gts, s);
  })();
</script>
<!-- END: Google Trusted Store --> 
```

![Magento 系统/配置/设计/页脚 HTML 的屏幕截图](../Images/fa6be5d194df9493109f2b56e75ead58.png)

其余代码只需在**Checkout Success**页面 (app/design/frontend/{your}/{theme}/template/checkout/success.phtml) 上即可。我们需要加载订单以获取客户的电子邮件、国家和订单数据。您需要实施逻辑来确定是否有任何项目延期交货、是否有任何项目正在下载以及何时发货。在该文件中的任何位置添加：

```
<?php
    $orderId = $this->getOrderId();
    $order = Mage::getModel('sales/order')->loadByIncrementId($orderId);
    $customer = Mage::getModel('customer/customer')->load($order->getCustomerId());
    $address = $order->getShippingAddress();
    $backorder = false; // some backorder logic
    $download = false; // some download logic
    $shipDate = new Zend_Date(); // some logic to determine ship date
?>
<!-- START Trusted Stores Order -->
<div id="gts-order" style="display:none;">

<!-- start order and merchant information -->
<span id="gts-o-id"><?php echo $orderId; ?></span>
<span id="gts-o-domain">{www.yourstore.com}</span>
<span id="gts-o-email"><?php echo htmlentities($customer->getEmail()); ?></span>
<span id="gts-o-country"><?php echo htmlentities($address->getCountryId()); ?></span>
<span id="gts-o-currency">USD</span>
<span id="gts-o-total"><?php echo $order->getGrandTotal(); ?></span>
<span id="gts-o-discounts">-<?php echo $order->getDiscountAmount(); ?></span>
<span id="gts-o-shipping-total"><?php echo $order->getShippingAmount(); ?></span>
<span id="gts-o-tax-total"><?php echo $order->getTaxAmount(); ?></span>
<span id="gts-o-est-ship-date"><?php echo $shipDate->toString('yyyy-MM-dd'); ?></span>
<span id="gts-o-has-preorder"><?php echo $backorder ? 'Y' : 'N'; ?></span>
<span id="gts-o-has-digital"><?php echo $download ? 'Y' : 'N'; ?></span>
<!-- end order and merchant information -->

<!-- start repeated item specific information -->
<?php foreach ($order->getAllItems() as $item): ?>
<span class="gts-item">
<span class="gts-i-name"><?php echo htmlentities($item->getName()); ?></span>
<span class="gts-i-price"><?php echo $item->getBasePrice(); ?></span>
<span class="gts-i-quantity"><?php echo (int)$item->getQtyOrdered(); ?></span>
<span class="gts-i-prodsearch-country">US</span>
<span class="gts-i-prodsearch-language">en</span>
</span>
<?php endforeach; ?>
<!-- end repeated item specific information -->

</div>
<!-- END Trusted Stores --> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T21:11:30.673

您可以在底部插入该代码以`app/design/frontend/default/USED_TEMPLATE/template/checkout/onepage.phtml`使其显示在最终结帐页面上。

您需要使用 Magento 函数填充变量并输出它们。例如：

```
// Magento .phtml-style
<?php $cart = Mage::getSingleton( 'checkout/cart' ); ?>
<span class="gts-i-quantity"><?php echo $cart->getItemsCount(); ?></span>` 
```

或者你走很长的路，在自己的扩展中使用 Magento 钩子在任何你想要的地方展示谷歌片段，而不需要在模板中实现它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-20T04:17:19.100

代码肯定需要在 app 文件夹 (app/design/frontend/ *yourtheme* /template/checkout/ success.phtml) 中的结帐成功页面上。我在这里找到了关于[magento 徽章实现](http://www.lifetimemediagroup.com/2015/10/19/google-trusted-stores-on-magento/)的答案，但就像几个答案表明它很重要一样，它是逻辑的，并且每个商店通常都不同，具体取决于您正在运行的扩展和自定义开发。

```
 <!– START Google Trusted Stores Order –&gt;
<div id=”gts-order” style=”display:none;” translate=”no”&gt;

<!– start order and merchant information –&gt;
<span id=”gts-o-id”&gt;<?php echo $orderId; ?></span>
<span id=”gts-o-domain”&gt;[INSERT URL (www.example.com)]</span>
<span id=”gts-o-email”&gt;<?php echo htmlentities($customer->getEmail()); ?></span>
<span id=”gts-o-country”&gt;<?php echo htmlentities($address->getCountryId()); ?></span>
<span id=”gts-o-currency”&gt;[USD]</span>
<span id=”gts-o-total”&gt;<?php echo round_and_kep($order->getGrandTotal()); ?></span>
<span id=”gts-o-discounts”&gt;[CALL IT OUT WITH CODE – use 0 if no discounts]</span>
<span id=”gts-o-shipping-total”&gt;<?php echo round_and_kep($order->getShippingAmount()); ?></span>
<span id=”gts-o-tax-total”&gt;<?php echo round_and_kep($order->getTaxAmount()); ?></span>
<span id=”gts-o-est-ship-date”&gt;<?php echo $shipDate->toString(‘yyyy-MM-dd’); ?></span>
<span id=”gts-o-est-delivery-date”&gt;<?php echo $shipDate->toString(‘yyyy-MM-dd’); ?></span>
<span id=”gts-o-has-preorder”&gt;<?php echo $backorder ? ‘Y’ : ‘N'; ?></span>
<span id=”gts-o-has-digital”&gt;<?php echo $download ? ‘Y’ : ‘N'; ?></span>
<!– end order and merchant information –&gt;

<!– start repeated item specific information –&gt;
<!– item example: this area repeated for each item in the order –&gt;
<span class=”gts-item”&gt;
<span class=”gts-i-name”&gt;<?php echo htmlentities($item->getName()); ?></span>
<span class=”gts-i-price”&gt;<?php echo round_and_kep($item->getBasePrice()); ?></span>
<span class=”gts-i-quantity”&gt;<?php echo (int)$item->getQtyOrdered(); ?></span>
<span class=”gts-i-prodsearch-id”&gt;[ITEM_GOOGLE_SHOPPING_ID]</span>
<span class=”gts-i-prodsearch-store-id”&gt;[YOUR STORE ID GIVEN TO YOU BY GOOGLE]</span>
<span class=”gts-i-prodsearch-country”&gt;US</span>
<span class=”gts-i-prodsearch-language”&gt;en</span>
</span>
<!– end item 1 example –&gt;
<!– end repeated item specific information –&gt;

</div>
<!– END Google Trusted Stores Order –&gt; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-01T03:04:01.967

此后谷歌自己发布了一个 Magento 扩展：http: [//www.magentocommerce.com/magento-connect/google-trusted-stores-3308.html](http://www.magentocommerce.com/magento-connect/google-trusted-stores-3308.html)

# css - “拉头发”并排浮动 div

> ID：10939584
> 
> 赞同：-4
> 
> 时间：2012-06-07T20:45:03.630
> 
> 标签：css, position, html

我有一个简单的水平导航菜单，它使用高度风格的锚点作为按钮。现在，最后一个名为“store”的按钮有一个内容列表，通过这个 jquery 悬停效果变得可见。

我无法让“商店”按钮与其他按钮对齐。现在两天，我正在尝试`float:left` `margin 50% whatever`, `position:incorrect`, `overflow:I-forget-what`, `clear:both`, 以及各种俗气的 hack，我正处于 CSS 定位的那个阶段，您开始认真考虑使用表格重新构建布局。

与其把我的灵魂卖给桌子，我想我最好还是请有经验的人看看：

[http://www.ideagasms.net/ideagasms-with-dropdown-menu.html](http://www.ideagasms.net/ideagasms-with-dropdown-menu.html)

查看源代码时，您会注意到我在主要元素旁边添加了很多注释，因此应该很容易快速理解所有内容。谢谢你。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:21:14.223

此代码应该可以工作：

我在您的菜单中添加了一个固定宽度的包装 div，并将其居中放置在页面上。然后将每个标签添加到一个li中。

您的 jQuery 菜单现在已损坏，但现在 dom 中的订单已更改，这应该只是再次找到正确元素的情况。

您可能还必须创建一些新样式并将它们再次添加到元素中。因为我可能搞砸了一些。我建议添加适当的类和 id，这样您以后就不会遇到样式问题。

```
<div id="nav">
 <ul>
  <li>
      <a alt="STORE" class="navmenu faded" href="http://www.ideagasms.net/ideagasms-products/">STORE</a>
    <ul class="file_menu">
      <li><a href="#file">File</a></li>
      <li><a href="#edit">Edit</a></li>
      <li><a href="#view">View</a></li>
      <li><a href="#insert">Insert</a></li>
      <li><a href="#modify">Modify</a></li>
      <li><a href="#control">Control</a></li>
      <li><a href="#debug">Debug</a></li>
      <li><a href="#window">Window</a></li>
      <li><a href="#help">Help</a></li>
    </ul>
  </li>
  <li><a alt="HOME" class="navmenu faded" href="http://www.ideagasms.net/link">HOME</a>     </li>
  <li><a alt="VIDEO" class="navmenu faded" href="http://www.ideagasms.net/link">VIDEO</a> </li>
  <li><a alt="ABOUT" class="navmenu faded" href="http://www.ideagasms.net/link">ABOUT</a></li>
  <li><a alt="CONTACT" class="smcf-link navmenu faded">CONTACT</a></li>
  <li><a alt="DONATIONS" class="navmenu scroll faded" href="http://www.ideagasms.net/link">DONATIONS</a></li>
  <li><a alt="MENTORING" class="navmenu faded" href="http://www.ideagasms.net/link">MENTORING</a></li>
  <li><a alt="BEAUTY" class="navmenu faded" href="http://www.ideagasms.net/link">BEAUTY</a></li>
  <li><a alt="SNIPPETS" class="navmenu scroll faded" style="letter-spacing:1px" href="http://www.ideagasms.net/link">#iG</a></li>
</ul>
</div>

<style type="text/css"> 

#buttonnav {  
float:left;
height: 25px;
width: 100px;
margin-bottom:1cm;
position:relative;
z-index:9; 
}
#nav {
  margin: auto;
  width: 740px;
  background: orange;
}
ul {
  margin: auto;
}
ul li {     
    display: inline;
    float: left;

}

.menu_class {
    border:1px solid #1c1c1c;
}

ul.file_menu {
    cursor:pointer;
    display:none;
    width:260px;
    border: 1px solid #1c1c1c;
    margin:0; 
    padding:0; 
    list-style:none;
}

.file_menu li {
    background-color: #302f2f;
}

.file_menu li a {
    color:#FFFFFF; 
    text-decoration:none; 
    padding:10px; 
    display:block;
}

.file_menu li a:hover {
    padding:10px;
    font-weight:bold;
    color: #F00880;
}

</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:19:28.780

那个菜单看起来很糟糕，老实说，并没有你注意到的那么大的灵活性。

如果我是你，我会以适当的 html 结构与（嵌套的）li 结构一起使用的方式重建它，这样你就可以加入那个额外的项目和子菜单......

这是丑陋的修复

```
#buttonnav {
    display: inline-block;
    /* remove the float & widht */
}

.hoverli ul.file-menu {
    position:absolute;
} 
```

在这种情况下，您可能应该回到基础知识并重新学习如何制作正确的菜单。如果这是在某些内容管理系统中，则覆盖类和模板以使其易于添加...

我为子菜单缺少的东西也是`position: absolute;`（你可能希望子菜单的父级是相对的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T21:20:29.200

您需要修复两件事才能正确显示按钮并使子菜单正常运行：

请参阅此[工作小提琴示例](http://jsfiddle.net/zuul/282TC/)！

## 1)

设置按钮的css，如：

```
#buttonnav {
    display: inline-block;
    height: 25px;
    position: relative;
    z-index: 9;
} 
```

**注意：** `display:inline-block;`进入 和`float`，`margin`然后`width`退出。

## 2)

调整子菜单的 css 以使其在不破坏布局的情况下出现：

**CSS**

```
.hoverli {
    position: relative;
    z-index: 1;
}
.hoverli ul {
    position:absolute;
} 
```

# google-maps-api-3 - KML 标记最近从 Google 地图中消失了

> ID：10939585
> 
> 赞同：2
> 
> 时间：2012-06-07T20:45:06.450
> 
> 标签：google-maps-api-3, kml

大约半年前，我创建了一个谷歌地图应用程序 (v3)，它从 KML 文件 ( [http://www.ioors.nl/projects.kml](http://www.ioors.nl/projects.kml) ) 中加载了许多地标。这曾经工作没有任何问题。不过最近，我注意到标记在地图中不再可见。当我在 maps.google.com 中加载 KML 文件时，地标列在左侧，但标记在那里也不可见。

在运行了一些测试之后，这个问题似乎是由样式元素引起的。留下它使标记可见。

我还使用来自 Google 的一些示例 KML 代码（[https://developers.google.com/kml/documentation/kmlreference#balloonstyle](https://developers.google.com/kml/documentation/kmlreference#balloonstyle)）对此进行了测试，并且那里似乎出现了同样的问题。

Google Maps 对 KML 的支持最近是否发生了变化（虽然在 Google 上找不到任何关于此的内容）还是其他原因导致了问题？

在这件事上的任何帮助将不胜感激。

亲切的问候，

威尔科·库珀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:03:44.873

最近（大约 1 周前）与 Google 地图对 KML 的支持相关的情况确实发生了变化。就在上个月末，Stack Overflow 上有许多开发人员对 KML 层数限制为 5 个问题提出了疑问[。Google Maps Issues 网站](http://code.google.com/p/gmaps-api-issues/issues/list)上记录了一个问题，并且很快就得到了修复。您可能遇到了其他问题。

由于您看到的问题也出现在 Google 示例代码中，因此听起来存在问题。我会仔细检查所有内容，确保您有一个真正的问题，然后访问上面的链接以提交一个新问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T14:44:42.490

确保您的比例元素是正确的。Google Maps API KML 解析器现在支持它（以及 hotSpot）。

# sql - 根据字符串值删除临时表？

> ID：10939586
> 
> 赞同：0
> 
> 时间：2012-06-07T20:45:16.110
> 
> 标签：sql, sql-server-2008

sql server 2008 中有没有办法使用字符串删除#tt：

```
delete temp table with name = 'tt' 
```

编辑：如果有这样的函数真的会很好：返回'tt'的getString（#tt）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:51:30.520

您可以使用动态 SQL 执行此操作：

```
EXEC('DROP TABLE #' + @MyTempTable) 
```

如果你走这条路，我会好好阅读[这篇文章](http://www.sommarskog.se/dynamic_sql.html)，以了解动态 sql 的优缺点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:57:30.453

虽然您可以使用动态 SQL 执行此操作，但我不确定您将如何使用非动态 SQL 在父会话范围内**创建不同的临时表，然后在子会话范围内使用动态 SQL。**

你能举一个例子来说明你正在做什么来创建表以及你希望它们被删除的位置吗？

# java - 如何存储对类的所有对象的引用？

> ID：10939587
> 
> 赞同：0
> 
> 时间：2012-06-07T20:45:17.537
> 
> 标签：java, instance-variables, class-variables

假设有两个类，ObjectA 和 ObjectB。ObjectA 类有一个创建类对象的方法，`ObjectB`如下所示：

```
private ObjectB createObjectB() {
    Object b = new ObjectB();
    return b;
 } 
```

我想跟踪`ObjectB`. 有什么更好的方法来做到这一点？

*   `ArrayList`以内部类的形式跟踪所有对象`ObjectA`。
*   或者里面的一些类变量`ObjectB`。

每种方法的优缺点是什么？如果我知道`ObjectB`对象只会从 ObjectA 中的这一种方法创建，这会有所不同吗？

请注意，永远只有一个 的实例`ObjectA`，但 的实例的数量`ObjectB`是可变的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:49:34.230

如果您想从代码的不相关部分访问所有创建的对象，您只需要“跟踪”以这种方式创建的对象。否则 1）创建的对象将由变量保存，因此您可以访问它； 2）当没有更多对该对象的引用（因此无法访问）时，垃圾收集器最终将清理内存。

如果您*确实*跟踪它们，请记住，当您在集合中有对象时，GC 无法释放内存，这可能导致内存不足错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:48:17.967

如果只有一个`ObjectA`实例，并且它有一个`createB`方法，我会将列表保留在`ObjectA` **实例**本身上。但实际上我认为这并不重要。

```
public ObjectB createB(){
   Object B = new ObjectB();
   allBs.add(b); // assuming some sort of List
   return b;
} 
```

我很想知道你为什么要这样做。您可能会遇到线程问题，具体取决于您的应用程序及其架构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T20:49:17.980

在 ObjectB 中保存一个列表是没有意义的，但是如果您需要对您创建的所有 B 对象的引用，那么在 ObjectA 中的列表将是有意义的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T21:58:18.150

根据您对 ObjectC 的看法，我认为 ObjectA（和 C）维护 ObjectB 的数组是最有意义的。（实际上，如果您希望添加和减去 B，我建议使用某种集合而不是数组）。

然后，您可以创建一个方法来返回 A 创建的 B 的数量，例如 A.countB()

如果您发现自己需要创建 B 的总数并且您不能使用 A.countB()+C.countB()，那么您有两个选择：B 中的静态映射，其中键是创建者对象（A、C 或其他），其值是 B 的集合。

我不鼓励这样做有几个原因，主要是创建的对象会挂起（所以没有 GC，以及潜在的内存问题）。

另一种方法是使用管理器类来创建和跟踪 B 并在完成实例后非常小心地取消引用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T20:58:06.117

这取决于您需要实现的目标。（顺便说一句，这是一个坏名字）的实例`ObjectB`应该能够相互交谈吗？如果是这样，那么您需要在类中创建一个全局变量（即一个`static`字段），或者您必须保留列表`ObjectA`并将其“注入”到每个实例中`ObjectB`- 这意味着您需要在两个地方都保留一个引用.

如果 的实例`ObjectB`不需要相互交谈，通常将列表保留在`ObjectA`.

但大多数情况下，根本没有必要保留一份清单。这甚至可能很危险，因为您必须确保列表在耗尽所有内存之前不会增长。

一般规则是：避免不必要的依赖。通过保留一个列表，您引入了一个有成本的依赖项（例如，在维护中，您需要首先编写代码）。

永远警惕你编写的东西的成本——很容易让这些廉价的东西积累成真正昂贵的依赖关系，扼杀你。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T21:43:38.283

对我来说，对象 A 和对象 C 是管理对象 B 实例的类。

我有一个类似的场景，我需要跟踪作为基本服务类的子类的不同服务（在我的例子中，对象 B 是基类）。

要创建/启动/停止/重新启动/删除这些服务，我有 2 个管理器类，用于两种不同的目的（如您的情况下的对象 A 和对象 C）。

在两个管理器类中，我都有一个 HashMap

您可以有一个方法来停止/启动/创建/销毁/删除类 A 或 C 中的 B 对象，该方法采用“名称”ob 对象 B 并在对象 B 上启动相应的操作。

作为最佳实践，在您的 SessionContextListener 中始终确保调用停止/删除操作以删除此 HashMap 中添加的对象。

# r - 使用神经网络预测新数据的类别

> ID：10939591
> 
> 赞同：10
> 
> 时间：2012-06-07T20:45:24.253
> 
> 标签：r, machine-learning, neural-network

我正在尝试使用使用 R 中的神经网络包训练的神经网络来预测测试数据集的类（0 或 1）。

我的数据如下：

对于火车：

```
x1          x2          x3          x4          y
0.557       0.6217009   0.4839      0.5606936   0
0.6549      0.6826347   0.4424      0.4117647   1
0.529       0.5744681   0.5017      0.4148148   1
0.6016771   0.5737052   0.3526971   0.3369565   1
0.6353945   0.6445013   0.5404255   0.464       1
0.5735294   0.6440678   0.4385965   0.5698925   1
0.5252      0.5900621   0.4412      0.448       0
0.7258687   0.7022059   0.5347222   0.4498645   1 
```

和更多。

测试集看起来与训练数据完全相同，只是值不同（如果需要，我会发布一些样本）。

我使用的代码如下所示：

```
> library(neuralnet)
> nn <- neuralnet(y ~ x1+x2+x3+x4, data=train, hidden=2, err.fct="ce", linear.output=FALSE)
> plot(nn)
> compute(nn, test) 
```

网络训练，我可以成功绘制网络，但计算不起作用。当我运行计算时，它给了我以下错误：

```
Error in neurons[[i]] %*% weights[[i]] : non-conformable arguments 
```

所以基本上我正在尝试训练一个神经网络来成功地对新的测试数据进行分类。

任何帮助表示赞赏。

编辑：

测试对象的抽样是：

```
x1          x2  x3          x4          y
0.5822  0.6591  0.6445013   0.464       1
0.4082  0.5388  0.5384616   0.4615385   0
0.4481  0.5438  0.6072289   0.5400844   1
0.4416  0.5034  0.5576923   0.3757576   1
0.5038  0.6878  0.7380952   0.5784314   1
0.4678  0.5219  0.5609756   0.3636364   1
0.5089  0.5775  0.6183844   0.5462555   1
0.4844  0.7117  0.6875      0.4823529   1
0.4098  0.711   0.6801471   0.4722222   1 
```

我也试过 y 列没有任何值。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-07T21:09:04.760

在没有对“测试”对象的良好描述的情况下很难说，但你能看看这是否会产生更好的结果：

```
compute(nn, test[, 1:4]) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-11-17T20:38:15.500

我有同样的问题。我放了`debugonce(neuralnet)`，我发现神经网络正在将不同大小的矩阵相乘。

我解决了使用此功能从测试中删除 y 列的问题

```
columns <- c("x1","x2","x3","x4")
covariate <- subset(test, select = columns) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-16T18:11:20.447

我知道这是一篇旧帖子，但我遇到了一篇独特的文章，可能会在未来对某人有所帮助。认为这篇文章最适用，因为它引发了同样的错误。

数据集的缩放必须转换回 data.frame 以用于计算

```
#scaled data
scaledData=scale(data)
nn=neuralnet(y~x,data=scaledData[train,])

#this repeatedly failed for me
compute(nn,scaledData[test,])

#this worked 
compute(nn,as.data.frame(scaledData)[test,]) 
```

# c# - 具有大型随机密钥文件的 One Time Pad 聊天应用程序

> ID：10939593
> 
> 赞同：1
> 
> 时间：2012-06-07T20:45:39.653
> 
> 标签：c#, encryption, random, cryptography

我正要使用 One Time Pad 构建一个简单的聊天应用程序。我已经制定了算法，并且为了加密消息，我需要某种双方相同的密钥材料。密钥材料的分发应该通过物理接触（例如 USB 加密狗）进行。所以我想做一些非常大的随机密钥文件，两个客户端可以用来通信。所以我的问题是：

*   我需要一个非常安全的随机数/字符串生成器，你知道我可以在 C# 中使用什么好的吗？
*   当我使用这么大的文件时，我该如何避免将整个文件加载到内存中，因为我打算读取一大块关键材料（例如 1 MB），然后在读取时将其从文件中删除，所以相同的密钥不会被使用两次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T09:56:32.610

我可能应该从这个开始：我认为这是一个娱乐或锻炼项目 - 而不是试图创建真正安全的东西。

1.  正如[owlstead](https://stackoverflow.com/a/10939993/5542)所说：使用[RNGCryptoServiceProvider](http://msdn.microsoft.com/en-us/library./system.security.cryptography.rngcryptoserviceprovider)。
2.  如果反向使用，从文件中删除使用过的密钥材料会容易得多。如果您需要加密 1024 个字节，请从文件中读取最后 1024 个字节并截断它。简化：

```
byte[] Encrypt(byte[] plain){
  using (FileStream keyFile = new FileStream(FileName, FileMode.Open))
  {
    keyFile.Seek(-plain.Length, SeekOrigin.End);
    byte[] key = new byte[plain.Length];
    keyFile.Read(key, 0, plain.Length);    
    byte[] encrypted = new byte[plain.Length];
    for(int i=0;i<plain.Length;i++){
      encrypted[i] = (byte) (plain[i] ^ key[plain.Length - 1 - i]);
    } 
    keyFile.SetLength(keyFile.Length - plain.Length);   
    return encrypted;
  }      
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:46:37.633

您设计的几乎可以肯定不是一次性便笺簿。大量真正随机字节的生成绝非易事。如果你真的必须走这条路，你真的应该在硬件卡上花费几千美元。即使是加密质量的 C# RNG 也无法生成那种数量的真正随机数据。它可以足够安全地生成短密钥，但没有足够的熵输入来生成大量真正的随机数据。一旦熵用完，它的输出就会恢复为伪随机，并且您不再拥有 One Time Pad。

正如@owlstead 所说，在 CBC 或 CTR 模式下使用 AES。这是安全的，容易获得的，不是由业余爱好者设计的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T21:15:16.840

您正在尝试解决一个已经解决的问题：使用 AES 几乎可以肯定与使用 One Time Pad 一样安全。在这种情况下，您的密钥变为 16 个字节（尽管您需要一个 NONCE 或 IV，具体取决于模式）。

1.  您需要使用安全的随机数生成器[RNGCryptoServiceProvider](http://msdn.microsoft.com/en-us/library./system.security.cryptography.rngcryptoserviceprovider%28v=vs.71%29.aspx)。
2.  [使用MemoryMappedFile](http://msdn.microsoft.com/en-us/library/system.io.memorymappedfiles.memorymappedfile.aspx)将文件读入内存。

只是（原子地）将偏移量存储在文件中。例如，使用同一个文件中的前 8 个字节来存储一个 ulong 类型，这样您就可以在需要时进行同步。如果您真的需要，除了使用的字节之外，您还可以在文件中写入零。请注意，例如使用 SSD，您实际上可能不会覆盖物理数据。

# c# - 当一个人可能“翻车”时，很难找到两个花车之间的区别

> ID：10939594
> 
> 赞同：0
> 
> 时间：2012-06-07T20:45:42.020
> 
> 标签：c#, floating-point

背景：

我有一个 opc 标签，其值为 32 位浮点数。标签代表一个正在运行的计数 - 所以在某些时候总数将达到最大值并从 0 重新开始。关于标签的另一个信息是它的数据类型是单浮点数，但它的值总是一个整数（我没有创建标签，所以我不确定为什么选择浮动）。

在我的应用程序中，当某个事件被触发时，我记录了这个运行总计的当前值，当另一个事件被触发时，我获取总计的当前值，然后需要计算差值。

我唯一的问题是，如果在我进行初始读数时该值接近最大值，然后在我进行第二次读数之前翻转到 0+，我最终会得到一个负值的差值。

到目前为止我已经有了这个（它在 c# 中）：

```
 float diff (float a, float b) {
        if (b < a) {
            float f = float.MaxValue - a;
            return f + b;
        }
        return b - a;
    } 
```

但这不起作用，因为除非 a 很大，float.MaxValue - a == 0。有谁知道我如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T10:25:08.930

浮点数不会像整数那样溢出。

如果将两个浮点数相加到大于 的数字上`float.MaxValue`，则结果将是[`float.PositiveInfinity`](http://msdn.microsoft.com/en-us/library/system.single.positiveinfinity.aspx)，而不是像有符号整数那样的大负数或像无符号整数那样的小正数。

但在此之前，您很可能会遇到一个不同的问题：如果将一个小数添加到一个大数中，结果可能是大数，不变。所以，如果分数总是增加一些（相对）小的数字，你很可能会发现，在某个点之后，分数不再改变。

由于这一切，你的“翻车”永远不会发生，所以也许你不必做任何事情。但更好的解决方案是使用整数类型来表示整数，从而避免所有这些陷阱。

# iphone - 设置 UITableView 的背景图像 - 底部出现白带

> ID：10939595
> 
> 赞同：0
> 
> 时间：2012-06-07T20:45:43.027
> 
> 标签：iphone, objective-c, ios, xcode

当我使用以下代码将 UITableView 的背景设置为图像时，大约 20-30px 的图像不会绘制在屏幕的最底部。我对此感到非常困惑，因为图像尺寸为 480 高，而视图为 460 高。图像实际上应该缩小到几乎不适合屏幕。有人可以启发我吗？非常感谢

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Default.png"]];
self.tableView.backgroundView = imageView; 
```

![在此处输入图像描述](../Images/72b83c7714b24f5c51c7b04b59849295.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:52:24.307

所有屏幕的最高为 480 像素，状态栏为 20 像素，因此您的视图为 460 像素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:30:57.893

将背景图像的框架设置为：

`{{0, -20}, {320, 480}}`在 IB 或代码中。

IE

```
imageView.frame = CGRectMake(0, -20, 320, 480); 
```

# sdk - 如何在 FDT 中导航/更新 Haxe SDK？

> ID：10939596
> 
> 赞同：0
> 
> 时间：2012-06-07T20:45:43.117
> 
> 标签：sdk, installation, haxe, fdt

在 OSX 上，FDT 在这里有 Haxe SDK：

/Applications/FDT 5.app/Contents/FDT5/haxe/haxe-2.09-osx

因为这是在 OSX 包中，所以我无法导航到它。我该怎么做：

1.  在首选项中选择它。
2.  更新它。

![在此处输入图像描述](../Images/260191f384344c0c749ee2f483928f6e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:45:43.817

您可以：

1.  手动复制/粘贴路径。这是一个例子：

`/Applications/FDT 5.app/Contents/FDT5/haxe/haxe-2.09-osx`

2.  转到“显示包内容”，通过查找更新/替换 SDK

![在此处输入图像描述](../Images/f9e268fc80836bea0a0cec6ea8719192.png)

![在此处输入图像描述](../Images/43615e6fe984775da9a376ce6a935bb0.png)

# javascript - Javascript：存储 cookie

> ID：10939599
> 
> 赞同：0
> 
> 时间：2012-06-07T20:45:50.623
> 
> 标签：javascript, cookies

你好我不是很擅长 javascript，我正在尝试保存从返回的值

```
(Math.random() + '') * 1000000000000000000 + '?' 
```

在 cookie 中使用：document.cookie

到目前为止，我有这个：

```
document.cookie="rand="(Math.random() + '') * 1000000000000000000 + '?'";path=/"; 
```

但它只是存储 (Math.random() + '') * 1000000000000000000 + '?' 作为一个字符串而不是实际使用它来计算一个值，有人可以解释我哪里出错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T20:47:55.593

```
var TheNumber = Math.random() * 1000000000000000000;

document.cookie = "rand=" + TheNumber.toString() + '?";path=/"'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:49:35.663

将您的数学运算的值分配给一个变量，然后将其附加到您的 cookie 字符串中。请务必使用 + 来连接它。看来您在示例中忘记了它。

# c# - 串行通信 - 字节流

> ID：10939601
> 
> 赞同：2
> 
> 时间：2012-06-07T20:45:59.517
> 
> 标签：c#, serial-port

我正在尝试与 XM 调谐器进行串行通信。调谐器要求从 comport 发送一系列字节来控制调谐器，命令流的示例如下：“B8,4D,18,30,20,B8”。最初，我尝试将命令作为字符串（如下）发送，但没有成功。

```
 _Comport.Write("B8,4D,18,30,20,B8"); 
```

我还尝试将命令转换为字节数组，但这也无效。

```
 System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
 Byte[] bytes = encoding.GetBytes("B8,4D,18,30,20,B8");               
 _Comport.Write(bytes,0,bytes.Length); 
```

comport 已打开并接收来自调谐器的消息；但是我不知道如何将字节流传输到调谐器。有人可以指导我如何与调谐器进行适当的沟通吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T20:50:51.513

如果您想将它们作为字节发送，而不是 ASCII 字节表示，您可以执行以下操作：

```
var bytes = new byte[] { 0xB8, 0x4D, 0x18, 0x30, 0x20, 0xB8 };
_Comport.Write(bytes, 0, bytes.Length); 
```

数字前面的`0x`数字向编译器表明它们是十六进制数字。

# ruby-on-rails - rails 3 - 在资源上使用 form_for 时出现路径错误

> ID：10939602
> 
> 赞同：3
> 
> 时间：2012-06-07T20:46:00.787
> 
> 标签：ruby-on-rails, ruby, path, routes

在我的 rails 项目中，查看时出现以下错误`/subscription/new`：

```
NoMethodError in Subscriptions#new

Showing /redacted/app/views/subscriptions/new.html.erb where line #4 raised:

undefined method `subscriptions_path' for #<#<Class:0x007fd02c8bbb28>:0x007fd0308f7a48>

Extracted source (around line #4):

1: <div class="grid_6">
2:   <h1>New Subscription</h1>
3:   <p>
4:     <%= form_for @subscription, :html => { class: 'form_dark' } do |f| %>
5:       <% if @subscription.errors.any? %>
6:         <div class="error_messages">
7:           <h1><%= pluralize(@subscription.errors.count, "error") %> prohibited this subscription from being saved:</h1> 
```

我的路线文件包含`resource :subscription`此内容。

附加代码信息：

用户型号：

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable, :recoverable, :rememberable, :trackable, :validatable

  attr_accessible :email, :password, :password_confirmation, :remember_me

  has_one :subscription
end 
```

订阅模式：

```
class Subscription < ActiveRecord::Base
  attr_accessible :status, :stripe_token, :user_id, :last_charge, :stripe_card_token
  belongs_to :user
  has_many :payments, :dependent => :destroy
  belongs_to :plan
  attr_accessor :stripe_card_token
end 
```

我的 SubscriptionsController 新方法：

```
def new
    @subscription = User.find(current_user.id).build_subscription 
end 
```

任何帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-07T21:26:04.437

我相信，当您传递 form_for 像 @subscription （具有订阅类）这样的对象时，默认情况下它需要 url subscriptions_path。但是由于您已将订阅声明为单一资源，因此将定义 url subscription_path。您应该明确指定此路线

```
<%= form_for @subscription, url: subscription_path, :html => { class: 'form_dark' } do |f| %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:15:32.583

两个政治可疑点，

~~1.您的应用中没有订阅控制器~~
2\. 您是否`subscriptions_path`在应用的路由文件中定义了自定义路由？

阅读您的评论和更正后，我们只剩下路线问题

# c - 当具有整数值的双精度转换为整数时，是否保证“正确”执行？

> ID：10939605
> 
> 赞同：12
> 
> 时间：2012-06-07T20:46:10.303
> 
> 标签：c, floating-point, lua

当 double 具有“精确”整数值时，如下所示：

```
double x = 1.0;
double y = 123123;
double z = -4.000000; 
```

当通过 (int)x、(int)y、(int)z 转换为整数类型时，是否保证它会正确舍入到 1、123123 和 -4？（并且不截断为浮点怪异的 0、123122 或 -5 b/c）。我根据[this page](http://lua-users.org/wiki/FloatingPoint)询问b / c （这是关于lua中的fp，一种默认情况下只有双精度数作为其数字类型的语言），讨论了根据IEEE 754如何使用双精度数进行整数运算，但我不是确定，当使用整数类型参数调用 C 函数时，我需要担心手动舍入双精度数，或者当双精度数具有精确的整数值时会处理它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T22:40:08.003

是的，*如果*整数值适合`int`.

A`double`可以表示超出您的`int`类型范围的整数值。例如，如果您的类型只有 16 位，`123123.0`则无法转换为。`int``int`

也不能保证 a`double`可以表示特定类型可以表示的每个值。IEEE 754 使用 52 或 53 位作为尾数。如果您`long`有 64 位，则将非常大的数据转换`long`为`double`和转换可能不会给出相同的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T23:41:43.577

正如 Daniel Fischer 所说，如果 double 的整数部分的值（在您的情况下是 double 精确）在您转换为的类型中是可表示的，则结果是精确的。如果值超出目标类型的范围，则行为未定义。“未定义”意味着标准允许任何行为：您可能会得到最接近的可表示数字，可能会得到零，可能会出现异常，或者计算机可能会爆炸。（注意：虽然 C 标准允许您的计算机爆炸，甚至破坏宇宙，但制造商的规范可能对行为施加了更严格的限制。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T20:54:13.720

如果它*真的*是真正的整数，它会正确地做到这一点，在某些情况下你可以放心。但是，如果该值是先前浮点计算的结果，您就不容易知道了。

[为什么不使用floor()](http://www.cplusplus.com/reference/clibrary/cmath/floor/)函数显式计算值，如`long value = floor(x + 0.5)`. 或者，更好的是，使用[modf()](http://www.cplusplus.com/reference/clibrary/cmath/modf/)函数来检查整数值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T20:48:44.900

是的，它会保留你给它的确切值，因为你在代码中输入了它。有时在计算中它会产生 0.99999999999 例如，但这是由于计算时的错误，而不是其存储容量

# xml - 将在线 XML 文件保存到独立存储时出现 NullReferenceException

> ID：10939614
> 
> 赞同：0
> 
> 时间：2012-06-07T20:46:21.510
> 
> 标签：xml, windows-phone-7, isolatedstorage

我喜欢从 Internet 下载 XML 文件并将其写入到 IsolatedStorage 文件中。这是我正在使用的代码

```
public StreamReader readerForXml;

 private void find()
    {
       string filePath = "myFile.xml";
        using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
        {
    using (IsolatedStorageFileStream isoStream = new IsolatedStorageFileStream("People2.xml", FileMode.Create, myIsolatedStorage))
{

            XmlWriterSettings settings = new XmlWriterSettings();
             settings.Indent = true;
             using (XmlWriter writer = XmlWriter.Create(rawStream, settings))
             {
                 System.Uri targetUri = new System.Uri("http://dl.dropbox.com/u/29465448/ExchangeOffices.xml");
                 WebClient client = new WebClient();
                 try
                 {
                     client.DownloadStringAsync(targetUri);
                     client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);

writer.WriteString(sReader.ToString());
                    writer.Flush();
                }
                catch (Exception exception)
                {
                     MessageBox.Show(exception.Message);
                 }

} 
```

} }

```
 void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
    {
        sReader = new StreamReader(e.Result.ToString());

} 
```

我得到 StreamReader sReader 的 NullReferenceException，有人有同样的问题吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:22:26.767

您已经将 xml 数据作为字符串保存，因此您无需读取它，只需将其写入到 IsolatedStorage。我最近做了同样的事情并做了一个小助手功能。您可以从 调用它`client_DownloadStringCompleted`，传递它`e.result`和`"myFile.xml"`。

希望这可以帮助。

```
 public void SaveXML(string xmldata, string filename)
    {
        using (var isolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (var isoStream = new IsolatedStorageFileStream(filename, FileMode.Create, isolatedStorage))
            {
                var settings = new XmlWriterSettings();
                settings.ConformanceLevel = ConformanceLevel.Auto;
                using (XmlWriter writer = XmlWriter.Create(isoStream, settings))
                {
                    writer.WriteString(xmldata);
                    // Write the XML to the file.
                    writer.Flush();
                }
            }
        }
    } 
```

# javascript - Sencha Touch - 将数千行从服务器下载到本地 sqlite 的最佳方法？

> ID：10939615
> 
> 赞同：1
> 
> 时间：2012-06-07T20:46:22.303
> 
> 标签：javascript, sqlite, sencha-touch

我的服务器上有一个 MySQL 数据库，我希望能够备份到 sencha touch 应用程序上的 SQLite 数据库（供离线使用）。什么是迭代和获取数据的最佳方法（我在服务器上使用 PHP，可以将其作为 JSON、XML、CSV 或任何必要的形式发送）。

编辑：这是我正在使用的 SQLite 代理...[源](https://github.com/tomalex0/SenchaTouch-v2-SqliteProxy)

# ruby-on-rails - Rails 的优惠券/促销代码解决方案（宝石）？

> ID：10939616
> 
> 赞同：2
> 
> 时间：2012-06-07T20:46:22.620
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我需要在应用程序中实施优惠券、促销和礼物，但是我还没有看到令人满意的宝石。它不能是特定的狂欢，因为我已经看到了一些这样的。是否有任何我缺少的已经实施和测试的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-12-10T06:43:49.297

您可以使用[优惠券](https://github.com/fnando/coupons)gem 来实施折扣代码。

# javascript - Web 浏览器的窗口对象实现在不同的浏览器中与给定的 w3 标准有何不同？

> ID：10939617
> 
> 赞同：0
> 
> 时间：2012-06-07T20:46:23.447
> 
> 标签：javascript, browser

在这里，我可以获得 w3.org 窗口对象的标准（http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#the-window-object）

以下是 [Mozilla firefox] (https://developer.mozilla.org/en/DOM/window) 实现的方法和属性的详细信息

我还在为谷歌 Chrome、Opera 和 safari 浏览器寻找相同的规范/实现细节。如何获得适用于其他浏览器的文档？

注意：我想检查窗口对象是如何在不同的浏览器中实现的，以及它们与给定的[w3](http://www.whatwg.org/specs/web-apps/current-work/multipage/browsers.html#the-window-object)标准有何不同？

谢谢。

# regex - 德国地址的正则表达式

> ID：10939618
> 
> 赞同：3
> 
> 时间：2012-06-07T20:46:23.720
> 
> 标签：regex, street-address

我正在寻找一种正则表达式模式来查找德国地址。
问题是格式有点奇怪，并且经常更改，示例：

```
Falcken Str. 45 F
Heinrich-Heine-Straße 62A, Berlin-Kreuzberg
Lindenstrasse 113; Kreuzberg; 10969 Berlin
Erkstrasse 7; Neuköln; 12043 Berlin
Werbellin Strasse 69; Neuköln; 12053 Berlin
Anschrift; Rudolfstrasse 8-10; Friedrichshain; 10245 Berlin
Maybachufer 3, Neukölln, 12047, Berlin, Germany (?)
Skalitzer Strasse 31-32; Kreuzberg; 10999 Berlin
Mühlen Strasse 17; Friedrichshain; 10243 Berlin
Am Flutgraben 1; Treptow; 12435 Berlin; Germany (?)
Rigaer Strasse 89; Friedrichshain; 10247 Berlin
Köpenicker Str. 12, 10997 Berlin-Kreuzberg
Schliemannstraße 27; 10437; Berlin
Michaelkirchstr. 32, 10179 Berlin
Maybachufer 44, Neukölln, 12045, Berlin, Germany
Alexanderstrasse 11; Mitte; 10178 Berlin
Café Dritter Raum - Hertzbergstr. 14 - 12055 Berlin 
```

现在我尝试将它们分成组（至少 [地址] [邮政编码] [柏林]）
，但我无法捕捉到所有这些，我能想到的最好的方法是

```
^([a-zäöüß\s\d.,-]+?)\s*([\d\s]+(?:\s?[-|+/]\s?\d+)?\s*[a-z]?)?;*\s*(\d{5})\s*(.+)?$ 
```

（感谢stackoverflow上的另一个问题）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T21:21:03.567

不规则的数据会导致不一致的结果。此外，正则表达式并不是每个水晶酒瓶的正确选择。

从*实际*的角度来看，我只是解析标准化地址（无论这对德国地址意味着什么），然后将剩余部分转储到另一个文件以进行手动地址更正。如果您的*大多数*地址格式不正确，那么您可能需要访问某种地址更正数据库——通常是商业的，并且通常可以从所涉及的邮政服务处获得。

# python - 生菜和奇怪的字符

> ID：10939623
> 
> 赞同：0
> 
> 时间：2012-06-07T20:47:09.400
> 
> 标签：python, lettuce

我试着运行生菜。通常可以，但是当我使用时：

```
lettuce | less 
```

有很多颜色命令，例如：

```
ESC[1;37m 
```

写入文件时如何摆脱它？

例如 cucumber 在控制台打印漂亮的颜色，在 less 和 file 中打印普通文本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-17T01:02:18.627

这应该有效：

```
$ lettuce | less -R   # keep the colors 
```

或者

```
$ lettuce -v 3        # remove the colors 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:50:59.413

设置环境变量[`DISABLE_COLORS`](http://packages.python.org/pycolors/)：

`export DISABLE_COLORS=true`

任何值都应该有效，我只是选择`true`语义。

# java - 如果在 EDT 线程之外调用 AWT 代码，如何抛出异常？

> ID：10939624
> 
> 赞同：2
> 
> 时间：2012-06-07T20:47:15.670
> 
> 标签：java, swing, exception, awt, event-dispatch-thread

我一直在网上搜索这个，但我还没有找到答案..也许你们中的某个人知道这一点。

我正在开发一个类似摆动桌面的应用程序；因为我知道swing不是线程安全的（如果我在EDT之外的JComponent上调用一个方法，总是有机会与EDT本身发生死锁），我希望线程抛出一个异常正在尝试调用该方法..让我更好地解释一下：

假设我有 2 个线程：EDT 和后台工作者（“BW”）。例如，如果我调用 ，`JButton.setText()`或者`JButton.setIcon()`在 BW 中调用，则有可能与 EDT 发生死锁。现在我希望当 BW 调用`JButton.setText()`和异常被抛出时表明我做错了..

我看到 VS2008 上的 C# 默认情况下会执行此操作（我不知道是否有办法禁用此行为，但我认为检测错误代码非常有用）。有没有办法在java中实现类似的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T21:13:04.503

看看[这篇文章](http://weblogs.java.net/blog/alexfromsun/archive/2006/02/debugging_swing.html)，它描述了一个`RepaintManager`检查 Swing 线程违规的方法。它不会捕获所有违规行为，但会捕获大多数违规行为。

您可以轻松调整该类以抛出`Exception`s iso 仅打印堆栈跟踪

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:51:51.803

将您拥有的每个摆动对象包装在代理中，通过反射生成。使该代理将线程与已知良好的 EDT 线程进行比较。如果不匹配，则抛出 RuntimeException。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-08T07:59:40.437

看看[`SwingUtilities.isEventDispatchThread`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#isEventDispatchThread%28%29)。`true`如果调用是从 EDT 内部进行的，则调用此函数将返回，`false`否则。

它会完全按照您的意愿执行，问题是您可能必须在代码的多个位置进行此类调用；这是更多的工作。

# git - Aptana 3 更改在其他分支中显示

> ID：10939629
> 
> 赞同：0
> 
> 时间：2012-06-07T20:47:34.023
> 
> 标签：git, aptana, aptana3

我是开发新手，我第一次尝试为一个项目管理多个分支 - 开发和生产。我正在为我的 Rails 3 项目使用 Aptana Studio 3，我感到很困惑，因为当我在 Aptana 的分支之间切换时，我可以看到另一个分支中所做的更改。

例如，如果我在我的 dev 分支中更改 File a.doc，当我切换到我的生产分支时，我也会看到文件中的更改。在我将 dev 合并到生产之前，master 不应该维护以前的版本（即不显示 dev 中所做的更改）吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T12:14:44.603

这是设计使然，如果您正在编辑的文件在您正在切换的 2 个分支的提示处看起来相同，则可以切换分支。关键是您尚未提交更改，因此它还不是任何分支的一部分。如果您提交该更改并签出另一个分支，您将看到该文件恢复到它在另一个分支上的状态。

# javascript - 从 javascript 访问 C#（代码隐藏）中的变量

> ID：10939631
> 
> 赞同：0
> 
> 时间：2012-06-07T20:47:42.747
> 
> 标签：javascript, asp.net, code-behind, bing-maps

在我解释我的情况之前，请看一下非常重要的通知！

1.我的 javascript 没有嵌入 .aspx 文件中，所以类似于

```
 var strMessage = '<%= str%>';
    StartGeocoding(strMessage); 
```

不工作（我尝试了很多，但如果你能改进它，请告诉我）

2.另外，我已经用过

```
 Page.ClientScript.RegisterStartupScript( , , , ) 
```

功能，所以我认为我不允许使用两次。

==================================================== ===============

所以，这里在“Location.js”（与 .aspx 分开）

```
 function LoadMap(count) {       
        var asdf = (something variable from code-behind);
        var counts = count;                      
        myMap = new VEMap("mapDiv");
        myMap.LoadMap();
        StartGeocoding(asdf);    // it will show the map with location info of "asdf"
    } 
```

在后面的代码中，有一些东西

```
 public string blahblah = "1 Yonge Street" 
```

基本上，我将从后面的代码中获取地址，并使用 javascript 显示它。如果您（我的主！）可以教我如何从 javascript 中获取 C# 中的变量，那将不胜感激！！！

如果你们想挑战，这里是奖金（？）问题

实际上，我将在地图中显示多个位置。因此，我可能有一个字符串列表，而不是一个字符串“blahblah”

```
 <list>Locationlist        //not array 
```

因此，LoadMap() 函数中的“计数”将识别我有多少条目。如何从javascript获取每个位置信息？这可能吗？任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T20:51:40.113

你基本上有两个选择：

1.）将数据从代码隐藏输出到页面，假设是隐藏字段，然后使用javascript检索这些值（非常简单）

2.) 使用 ajax 并根据需要获取值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:03:55.963

这就是我的想法。在代码隐藏上，假设 Page_Load 方法，您可以拥有以下代码：

```
List<string> locations = new List<string> { "1 Yonge Street", "100 Yonge Street", "123 Microsoft Way" };

//transform the list of locations into a javascript array. 
//The generated script should look like window.myLocations = ['1 Yonge Street', '100 Yonge Street', etc];
StringBuilder script = new StringBuilder();
script.Append("window.myLocations = [");
foreach(string location in locations){
  if(script.Length > 0){
    script.Append(", ");
  }
  script.Append("'"+System.Web.HttpUtility.JavaScriptStringEncode(location) +"'");
}
script.Append("];");

//then register this script via RegisterStartupScript.
Page.ClientScript.RegisterStartupScript( this, this.GetType(), "registerMyLocations", script.ToString(), true); 
```

此时可以访问Location.js中注册的数组：

```
function LoadMap(/*count*/) {       
        var asdf = window.myLocations[0]; //this would be '1 Yonge Street' in your case
        alert(asdf);
        //var counts = count;
        var counts = window.myLocations.length;                      
        alert(counts);

        myMap = new VEMap("mapDiv");
        myMap.LoadMap();
        StartGeocoding(asdf);    // it will show the map with location info of "asdf"
    } 
```

一些备注：

*   要使用 StringBuilder 类，您需要在文件顶部添加“使用 System.Text”；

*   System.Web.HttpUtility.JavaScriptStringEncode 需要确保服务器端字符串被正确编码（取自[Caveats Encoding a C# string to a Javascript string](https://stackoverflow.com/questions/9413421/caveats-encoding-a-c-sharp-string-to-a-javascript-string)）。据我了解，它仅在 .Net 4 中可用。

*   如果页面上有 ScriptManager，最好使用 ScriptManager 上的 RegisterStartupScript 而不是 Page.ClientScript 中的方法

我现在无法测试上面的代码，但你应该得到基本的想法。

# git - git rollback changes to changeset 许多更改前（大约 1 周前），而不仅仅是几个提交

> ID：10939643
> 
> 赞同：0
> 
> 时间：2012-06-07T20:48:29.730
> 
> 标签：git, changeset

我需要将我们的主分支回滚到大约 1 周前的变更集和许多变更集之前。

我尝试过 `git reset --hard <changeset>` 尝试推送到原点时出错，它不允许我使用--force

我的最终目标是整理我的本地和远程存储库，而不仅仅是本地存储库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T12:11:28.520

您尝试推送到的存储库不是裸露的。意思是，它有一个工作目录。最有可能的是，主分支已签出并且可能有更改。Git 不允许您以这种方式更改遥控器。您需要将更改从远程拉到您的机器或制作一个裸仓库并使用它。您很少会推送到非裸存储库。

# delphi - 使用 Indy Server 的多个绑定作为单独的套接字？

> ID：10939650
> 
> 赞同：6
> 
> 时间：2012-06-07T20:48:49.143
> 
> 标签：delphi, delphi-xe2, indy, indy10

我还在习惯 Indy，它是一个功能强大的多线程套接字系统。我见过的一件大事是服务器套接字如何具有许多不同的绑定。例如，您可以对同一 IP 地址上的 3 个端口进行 3 个绑定。我在 Delphi XE2 上使用 Indy 10。

我正在重建我的一个旧系统，它使用老式的`TServerSocket`组件`TClientSocket`，`ScktComps`并使用 Indy`TIdTCPServer`和`TIdTCPClient`. 旧系统实际上在每一端由 3 个完全不同的服务器/客户端套接字组成，每个套接字都有不同的用途，并且协同工作 - 类似于 FTP 如何使用一个套接字来存储二进制数据而另一个套接字用于命令。

是否可以使用这些绑定在同一组件中模拟三个单独的服务器/客户端套接字？如果我可以只声明一个绑定了 3 个端口的服务器套接字，并且在客户端上相同，连接到服务器上的 3 个不同端口，那就太好了。我想做的就是消除创建 3 个单独的服务器/客户端套接字组件并将它们组合成一个的需要。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-08T00:19:36.303

是的，您可以一次使用一个`TIdTCPServer`来管理多个端口。但是，在客户端，您仍然需要 3 个不同的客户端组件来连接到不同的端口。

在集合中创建 3 个条目`TIdTCPServer.Bindings`，一个用于您要侦听的每个本地 IP/端口，其中`TIdSocketHandle.Port`属性将是该属性的等效项`TServerSocket.Port`。 `TServerSocket`本身不支持绑定到特定 IP（尽管可以通过一些手动工作来完成），但该`TIdSocketHandle.IP`属性用于此目的，其中空白字符串等同于`INADDR_ANY`.

在`TIdCPServer.OnConnect`、`TIdCPServer.OnDisconnect`和`TIdCPServer.OnExecute`事件中，您可以使用`TIdContext.Binding.IP`和`TIdContext.Binding.Port`属性来区分调用套接字连接到哪个绑定。

它的一个常见用途是支持不同端口上的 SSL 和非 SSL 客户端，例如支持不同端口上的隐式和显式 SSL/TLS 的协议（如 POP3 和 SMTP）。 这样做是为了在单个服务器上`TIdHTTPServer`支持`HTTP`和url（您可以使用 来自定义哪些端口使用 SSL/TLS 与不使用）。`HTTPS``TIdHTTPServer.OnQuerySSLPort`

例如：

```
procedure TForm1.StartButtonCick(Sender: TObject);
begin
  IdTCPServer1.Active := False;
  IdTCPServer1.Bindings.Clear;

  with IdTCPServer1.Bindings.Add do
  begin
    IP := ...;
    Port := 2000;
  end;

  with IdTCPServer1.Bindings.Add do
  begin
    IP := ...;
    Port := 2001;
  end;

  with IdTCPServer1.Bindings.Add do
  begin
    IP := ...;
    Port := 2002;
  end;

  IdTCPServer1.Active := True;
end;

procedure TForm1.IdTCPServer1Execute(AContext: TIdContext);
begin
  case AContext.Binding.Port of
    2000: begin
      // do something...
    end;
    2001: begin
      // do something else...
    end;
    2002: begin
      // do yet something else ...
    end;
  end;
end; 
```

# django - 在子目录中调用 django 测试

> ID：10939651
> 
> 赞同：3
> 
> 时间：2012-06-07T20:48:58.813
> 
> 标签：django

我最近将一个应用程序拆分为子目录。例如，我有一个“商店”应用程序，我将其拆分为 shop/foo、shop/bar、shop/baz 子目录，将每个子目录视为一个单独的应用程序，所以我的 INSTALLED_APPS 现在看起来像：

```
"shop",
"shop.foo",
"shop.bar",
"shop.baz",
... 
```

我希望能够通过执行以下操作在 shop/foo/tests.py 中运行测试：

```
python manage.py test shop.foo 
```

但是，如果我这样做，我会收到错误消息：

```
ValueError: Test label 'shop.foo' does not refer to a test 
```

另一方面，我可以通过这样做来运行测试：

```
python manage.py test foo 
```

为什么会发生这种情况，我可以更改什么以便我可以将测试作为“shop.foo”而不是“foo”运行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-08T09:20:02.607

这是因为 Django 期望`test`command 的参数具有以下格式：

```
app_label[.TestCase[.test_method]] 
```

使用股票测试运行程序无法做到这一点（请参阅[Carl Meyers 评论](https://code.djangoproject.com/ticket/17365#comment:6)）。如果一切顺利，这应该在 Django 1.5 中修复，但与此同时，您可以使用接受完整模块路径的备用运行器：[django-discovery-runner](http://pypi.python.org/pypi/django-discover-runner)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-10T10:21:41.983

[django-discover-runner](https://pypi.python.org/pypi/django-discover-runner)已成为 Django 1.6 的一部分 .. :)

对于版本 <1.6 ，它可以用作第三方应用程序。

# json - 通过 AFHTTPClient 调用接收错误响应

> ID：10939655
> 
> 赞同：2
> 
> 时间：2012-06-07T20:49:15.580
> 
> 标签：json, afnetworking

我按照文档中的建议将 AFHTTPClient 实现为单例类，并在帖子中使用 JSON 数据调用它，并接收 JSON 数据作为回报：

```
[[BMNetworkCalls sharedInstance] postPath:theURL parameters:theDict success:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"my return is: %@", [responseObject valueForKeyPath:@"Result"]);

} failure:^(AFHTTPRequestOperation *operation, NSError *error) {            
    NSLog(@"error in network call: %@", [error localizedDescription]);
}]; 
```

一切都很好，但是如果我收到一个错误，（“HTTPRequestOperation 中的错误：（200-299）中的预期状态代码，得到 400”），我实际上也*想*在这里读取 responseObject（这是 API 的方式我正在使用告诉我我造成了哪类错误）。

我可以使用 AFJSONRequestOperation 做到这一点：

```
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"my return is: %@", [JSON valueForKeyPath:@"Result"]);

} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"exception code: %@", [JSON valueForKeyPath:@"ExceptionCode"]);
    NSLog(@"exception message: %@", [JSON valueForKeyPath:@"ExceptionMessage"]);
}];
[operation start]; 
```

我如何（并且我可以？）使用 AFHTTPClient 来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T13:43:34.410

该`operation`变量具有您需要的一切：

```
[[BMNetworkCalls sharedInstance] postPath:theURL parameters:theDict success:^(AFHTTPRequestOperation *operation, id responseObject) {
  // ...
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    if ([operation isKindOfClass:[AFJSONRequestOperation class]]) {
      id JSON = [(AFJSONRequestOperation *)operation responseJSON];
      NSLog(@"JSON: %@", JSON)
    }
}]; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-08T00:00:08.500

All credit goes to @phix23, who pointed me in the correct direction!

Here is the custom method I wrote in my subclassed AFHTTPClient that allows me to see the JSON response after receiving a 400 error:

```
- (void) myPostPath:(NSString *)path
        parameters:(NSDictionary *)parameters
           success:(void (^)(NSURLRequest *request, NSHTTPURLResponse *response, id JSON))success 
           failure:(void (^)(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON))failure
{
    NSURLRequest *request = [self requestWithMethod:@"POST" path:path parameters:parameters];   
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:success failure:failure];
    [self enqueueHTTPRequestOperation:operation];
} 
```

I call it by:

```
[[BMNetworkCalls sharedInstance] myPostPath:theURL parameters:theDict success:^(NSURLRequest *request, NSHTTPURLResponse *response, id responseObject) {
    NSLog(@"my return is: %@", [responseObject valueForKeyPath:@"Result"]);

} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {          
    NSLog(@"exception code: %@", [JSON valueForKeyPath:@"ExceptionCode"]);
}]; 
```

# javascript - 具有一般位置类型的 Google Map Location 构造函数

> ID：10939659
> 
> 赞同：0
> 
> 时间：2012-06-07T20:49:23.330
> 
> 标签：javascript, google-maps, geocoding

我一直在使用 Google maps api 使用这样的构造函数将客户带到特定位置

```
new google.maps.LatLng(42.999, 54.000); 
```

以准确的经度和纬度作为参数。我现在要做的不是使用 lat, long 选项，而是使用像 rest area 这样的关键字来调出壁橱休息区。我在这里[https://developers.google.com/maps/documentation/javascript/reference在 Google 地图 api 中找不到它](https://developers.google.com/maps/documentation/javascript/reference)

有人可以帮我想出一个可以获取关键字并在googLe地图中找到最近的关键字的构造函数吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:55:05.963

您将不得不使用谷歌地理编码 API。

基本上你用搜索字符串向谷歌发出请求，它返回一个包含它可能找到的区域的长/纬度的对象......那里有很多选项，你可以做相当巧妙的技巧，这些技巧已经仔细解释过谷歌自己。

[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)

您每天可以发出的请求数有一些限制。为了将这一点保持在最低限度，您当然可以制作一个服务器端脚本，为将要重复使用的事物（例如大型企业的办公室位置的长/纬度，其地图上可能有一个点）预取结果网站...）。

最简单的方法是使用一些参数发出[json](https://developers.google.com/maps/documentation/geocoding/#JSON)请求并在 js 中解析返回的 json，例如获取返回的第一个结果的 long/lat。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T05:54:30.653

如果我理解正确，您想使用关键字搜索特定位置周围的事物。我建议使用 Google Maps API 的 Places 库： [https ://developers.google.com/maps/documentation/javascript/places#place_searches](https://developers.google.com/maps/documentation/javascript/places#place_searches)

这允许您在 Google 的数以千万计的地方的数据存储中按类别或关键字进行搜索。

# node.js - 如何通过 webapp 将 1 TB 的文件上传到 Amazon S3？

> ID：10939660
> 
> 赞同：1
> 
> 时间：2012-06-07T20:49:24.413
> 
> 标签：node.js, file-upload, amazon-web-services, amazon-s3, knox-amazon-s3-client

我想知道如何将大文件上传到亚马逊 S3（> 1 TB）

理想情况下，网络应用上传机制应该有：

1.  实时进度条
2.  上传速度统计
3.  暂停/恢复支持
4.  直接从电脑上传到amazon S3
5.  内存高效，因此可以通过网络浏览器发送大文件。

我已经尝试通过*Django* *Uploadify S3*。虽然看起来它不能很好地处理大文件。

 *有人知道 Github 上现有的演示应用程序或使用以下任何一种语言的文档吗？

*   导轨
*   姜戈
*   PHP
*   爪哇

最近，我也关注了**Knox S3 库**和*nodejs*，虽然我还没有找到用于上传的演示应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-19T22:29:50.320

试试 resumable.js ，它是一个支持分块的 javascript 库，但仅在 chrome 和 firefox 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T17:27:21.580

你也可以试试[https://github.com/Boxee/node-s3-resumable-upload](https://github.com/Boxee/node-s3-resumable-upload) 它允许像普通客户端一样开始上传，然后如果出现问题，恢复上传，以便支持大多数客户端，而恢复是一种“不显眼的增强”*

# tfs - 我们应该如何命名已在多个 sprint 中拆分的 PBI？

> ID：10939661
> 
> 赞同：0
> 
> 时间：2012-06-07T20:49:25.937
> 
> 标签：tfs, scrum

在停止我们当前的 sprint 之后，我们需要将很多项目移动到下一个 sprint。这提出了一些问题，我们作为新的 scrum 用户没有找到答案。

我们知道我们需要创建新的 PBI，并将标记为 To Do 的任务移动到新创建的 PBI。（In Progress 任务会发生什么，应该如何移动它们？只是移动它们，或者关闭它们并为新的 sprint 创建一个新的？）

提出的讨论之一是我们应该如何命名我们的 PBI，因为管理层希望它对我们的客户来说足够清楚，他们可以阅读我们的产品待办事项和 Sprint 待办事项。

从开发人员的角度来看，PBI 诸如“研究功能 A”、“实施功能 A”、“波兰功能 A”，而我​​们的管理层认为 PBI 应该命名为“功能 A（第 1 部分）”、“功能 A（第 2 部分）”、“功能 A（第 3 部分 - 结束）”，因为他们和我们的客户都不了解我们的 PBI，他们想知道何时可以开始测试功能 A。我们的管理层基本上只想打印出 Sprint Backlog 查询和将其传递给我们的客户，以显示已完成的工作。

第二个不太重要的问题是：我们应该如何正确使用区域路径？如果我们有一个特征 A，那么创建一个特征 A 区域路径并将其用作所有 PBI 和与之相关的任务的通用标识符对我们来说是有意义的。但是我们应该如何处理与多个特征（以及区域路径）相关的工作项？我们担心我们最终会得到很多区域路径，并且列表会变得混乱。我们无法删除区域路径，因为可能会为此提交错误，或者我们需要在稍后阶段将其拾取。另外，如果一个特性已经在应用程序的多个版本中实现了怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:57:42.580

> 我们知道我们需要创建新的 PBI，并将标记为 To Do 的任务移动到新创建的 PBI。（In Progress 任务会发生什么，应该如何移动它们？只是移动它们，或者关闭它们并为新的 sprint 创建一个新的？）

您无需为每个 sprint 创建新的 PBI！PBI 一直在进行，直到其所有子任务完成。它的迭代可能会前进到下一个 sprint（例如“Release 1\Sprint 1 > Release 1\Sprint 2”或只是停留在上层（“Release 1”）。任务不会转移到另一个 PBI，但可以进入下一个 sprint。

这将解决命名问题，因为 PBI 不会获得“part X”后缀。PBI 的一个可能名称是“功能 A - 基础设施”或“功能 A - UI”。所以它的子任务可能被命名为“功能A-基础设施-设计”、“功能A-基础设施-实现”和“功能A-UI-设计”等等。

> 第二个不太重要的问题是：我们应该如何正确使用区域路径？

如果Iteration是按时间顺序排列的*时间*点，那么Area就是用来表示产品的一个*逻辑*模块。例如：

```
|-Server
| |--Database
| |--Web Services
|
|-Client
| |--UI
| |--Navigation
|
|-Configuration
|
|-Documentation
|
|-Installation
| |---Client
| |---Plugins
| 
```

不要过度使用区域定义。列表应该干净且易于理解。

> 如果在应用程序的多个版本中实现了一项功能怎么办？

Create another PBI and assign it with the same Area path but different Iteration path.

# php - 使用php分配静态IP地址

> ID：10939667
> 
> 赞同：1
> 
> 时间：2012-06-07T20:50:03.743
> 
> 标签：php, apache, archlinux

我想使用 php 静态分配我的 arch linux 的 IP 地址。我想通过使用网络掩码、接口、广播、地址和网关来更改 ip。用户将值放入 html 页面。html 页面将数据发布到 php 页面。我想使用这些数据更改 ip。这个怎么做！！

文件也可以用！！正确的？

..我正在考虑使用文件直接写入 rc.conf ！！...这会工作吗？如何？？..我的 arch linux 与 apache 和 php..任何帮助都表示赞赏！！。 ..感谢你..：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T20:54:42.870

您应该自己编写一个 shell 脚本并通过 PHP 启动它，而不是尝试使用 PHP 本身来完成这样的任务。如果你不知道怎么做，你应该问一个相关的问题[https://unix.stackexchange.com/](https://unix.stackexchange.com/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T12:26:51.277

为什么要使用 PHP 来尝试配置服务器？您应该使用为此目的而设计的预先存在的工具和命令来配置服务器。

```
$su

# ifconfig <interface, tpyically eth0> down
# ifconfig eth0 192.168.1.105 netmask 255.255.255.0 up
# ifconfig eth0 
```

您可以将这些命令包装在一个`exec()`语句中，但我没有看到一个 PHP 脚本具有成功完成它们所需的系统权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T12:34:25.350

在正常情况下，由于安全原因，您可能无法直接从 Web 服务器执行此操作。

有几个问题，例如对 /etc 文件的权限、运行 apache 的用户的安全上下文等。

一种安全的方法是创建将在 root 帐户下运行的 cron 任务，并定期检查是否存在某些可由 apache (php) 生成的文件。一旦文件出现，您可以根据该文件的内容使用适当的权限在 cron 任务中使用 ifconfig 重新配置任何内容。

不要忘记您的 apache 应该配置为使用所有接口，而不是真正基于 IP 的 VirtualHosts，否则您将立即失去与它的连接。

# c++ - 在 C++ 中的模板类中重载成员函数

> ID：10939669
> 
> 赞同：2
> 
> 时间：2012-06-07T20:50:12.113
> 
> 标签：c++, overloading

我有以下类定义：

```
template <typename T>
class SeqVisitor {
public: 
    typedef string* return_type;

    return_type visit(int elem) const;
    return_type visit(char elem) const;
    return_type visit(T elem) const;
}; 
```

当我使用`SeqVisitor<char>`调用访问时是模棱两可的。如果我在类定义之外定义函数，那么对该函数的调用就不会模棱两可了。编译器会选择带有“char elem”而不是“T elem”的那个。可以修复我的类定义，使其表现出相同的行为。那就是摆脱歧义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:22:22.897

我确定您已经知道这一点 - 如果您尝试从班级外部调用 visit() ，那么您的 typedef 就在班级内部。如果类的用户调用了 visit() 函数，为什么不在类之外的某个地方使用 typedef（我不确定这是否是你想要做的）

当我在课堂内尝试使用 typedef 时，我在从课堂外调用该函数时遇到了问题 - 但是当我将 typedef 移到课堂外时，我没有遇到任何问题。

如果您真的只在类中使用 typedef，那么您所拥有的是有意义的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:00:59.427

也许

```
return_type visit(char elem) const;
return_type visit(T elem, ...) const; 
```

# hibernate - 带转换器的 SelectOnMenu

> ID：10939672
> 
> 赞同：0
> 
> 时间：2012-06-07T20:50:34.360
> 
> 标签：hibernate, jsf, primefaces, converter, selectonemenu

我需要帮助我迷失了这个错误。当我点击添加新城市的提交时，我遇到了选择菜单转换器的问题。

这是我的 Facelets

```
 <p:commandButton value="New city" update=":form:display" id="withIcon" onclick="newvilledialog.show()" title="Nouveau"/>  

       <p:dialog header="Nouveau ville" widgetVar="newvilledialog" resizable="false" id="newvilleDlg"  
                showEffect="fade" hideEffect="explode" modal="true">   
        <h:panelGrid id="panel" columns="2" cellpadding="4" style="margin:0 auto;">

        <h:outputLabel for="pays" value="Pays :" />
            <h:selectOneMenu value="#{villeBean.villeList}"> 
                 <f:converter converterId="paysConverter"></f:converter> 
                 <f:selectItem itemLabel="select Pays" itemValue="" />
                <f:selectItems value="#{paysBean.paysList}" var="pays" itemLabel="#{pays.nompays}" itemValue="#{pays}"/>

            </h:selectOneMenu>

             <h:outputLabel for="nomville" value="Nom ville :" />  
            <p:inputText id="nomville1" value="#{villeBean.nomville}" />
            <p:commandButton id="Buttonnew" value="Valider"  action="#{villeBean.addVille}" update="form" oncomplete="newvilledialog.hide();"/>  
        </h:panelGrid>  
    </p:dialog> 
```

类 Pays.java

```
package ma.project.sgcheque.model;

import java.util.HashSet;
import java.util.Set;
import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import static javax.persistence.GenerationType.IDENTITY;
import javax.persistence.Id;
import javax.persistence.OneToMany;
import javax.persistence.Table;

/**
 * Pays entity. @author MyEclipse Persistence Tools
 */

@Entity
@Table(name = "pays", catalog = "base_cheque")
public class Pays implements java.io.Serializable {

    // Fields

    private Integer idpays;
    private String nompays;
    private Set<Ville> villes = new HashSet<Ville>(0);

    // Constructors

    /** default constructor */
    public Pays() {
    }

    /** full constructor */
    public Pays(String nompays, Set<Ville> villes) {
        this.nompays = nompays;
        this.villes = villes;
    }

    // Property accessors
    @Id
    @GeneratedValue(strategy = IDENTITY)
    @Column(name = "idpays", unique = true, nullable = false)
    public Integer getIdpays() {
        return this.idpays;
    }

    public void setIdpays(Integer idpays) {
        this.idpays = idpays;
    }

    @Column(name = "nompays", length = 45)
    public String getNompays() {
        return this.nompays;
    }

    public void setNompays(String nompays) {
        this.nompays = nompays;
    }

    @OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "pays")
    public Set<Ville> getVilles() {
        return this.villes;
    }

    public void setVilles(Set<Ville> villes) {
        this.villes = villes;
    }

  public boolean equals(Object other) {
        return other instanceof Pays && (idpays != null) ? idpays.equals(((Pays) other).idpays) : (other == this);
    }

} 
```

转换器：

```
package com.project.sgcheque.web.converters;

import javax.faces.component.UIComponent;
import javax.faces.context.FacesContext;
import javax.faces.convert.Converter;
import javax.faces.convert.FacesConverter;

import java.util.List;

import ma.project.sgcheque.model.Pays;

@FacesConverter(forClass=Pays.class, value="paysConverter")

public class PaysConverter implements Converter {
      public List<Pays> paysList;

    public Object getAsObject(FacesContext context, UIComponent component, String value) {
        try{
           if (value.trim().equals("")) {
                 return null;
              } else {
                 for (Pays p : paysList) {
                    if (p.getIdpays().equals(value)) {
                       return p;
                    }
                 }
              }}catch (NullPointerException ex){}

              return null;

    }

    public String getAsString(FacesContext facesContext, UIComponent component, Object value) {

        try {
        Pays pays = (Pays) value;
        return pays.getIdpays() != null ? String.valueOf(pays.getIdpays()) : null;
            }catch (NullPointerException exception) {
        return null;
            }catch (ClassCastException exception) {
                return null;
            }

    }
} 
```

和我的 Bean (PaysManagedBean)

```
package ma.project.sgcheque.managed.bean;

import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;

import javax.annotation.PostConstruct;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.ManagedProperty;
import javax.faces.bean.RequestScoped;

import org.springframework.dao.DataAccessException;

import ma.project.sgcheque.model.Pays;
import ma.project.sgcheque.model.Ville;
import ma.project.sgcheque.service.interfaces.IVilleService;

@ManagedBean(name="villeBean")
@RequestScoped
public class VilleManagedBean implements Serializable {

    private static final long serialVersionUID = 1L;
    private static final String SUCCESS = "success";
    private static final String ERROR   = "error";

    //Spring Ville Service is injected...
    @ManagedProperty(value="#{VilleService}")
    IVilleService villeService;

    List<Ville> villeList;
    private Ville selectedVille = new Ville();

    private int idville;
    private String nomville;
    private Pays pays = new Pays();   

    /**
     * Add Ville
     *
     * @return String - Response Message
     */

    public String addVille() {
     try {
            Ville ville = new Ville();
            ville.setIdville(getIdville());
            ville.setNomville(getNomville());
            ville.setPays(getPays());
            getVilleService().addVille(ville);
            return "ville";
        } catch (DataAccessException e) {
           e.printStackTrace();
       }  
        return ERROR;
    }

    /**
     * Update Pays
     *
     * @return String - Response Message
     */

    public String updateVille() {

            getVilleService().updateVille(selectedVille);
            return "ville";
    } 

    public String update(){
        villeService.save(selectedVille);
        return null;
    }

    /**
     * Delete Pays
     *
     * @return String - Response Message
     */

    public String deleteVille() { 
            try {
                 getVilleService().deleteVille(selectedVille);
                 return "ville";
            } catch (DataAccessException e) {
                e.printStackTrace();
            }  

            return ERROR;
    }

    /**
     * Reset Fields
     *

    public void reset() {
        this.setIdville(0);
        this.setNomville("");
        this.setPays(null);
    }*/  

    /**
     * Get Ville Service
     *
     * @return IVilleService - Ville Service
     */
    public IVilleService getVilleService() {
        return villeService;
    }

    /**
     * Set Ville Service
     *
     * @param IVilleService - Ville Service
     */
    public void setVilleService(IVilleService villeService) {
        this.villeService = villeService;
    }
     public List<Ville> getVilleList() {
         villeList = new ArrayList<Ville>();
         villeList.addAll(getVilleService().getVille());
        return villeList;
    }

    public void setVilleList(List<Ville> villeList) {
        this.villeList = villeList;
    }

    /**
     * Get SelectedVille Id
     *
     * @return selectedVille
     */
    public Ville getSelectedVille() {
        return selectedVille;
    }
     /**
     * Set SelectedVille Id
     *
     * @return selectedVille
     */
    public void setSelectedVille(Ville selectedVille) {
        this.selectedVille = selectedVille;
    }
     /**
     * Get Ville Id
     *
     * @return int - Ville Id
     */
    public int getIdville() {
        return idville;
    }
    /**
     * Set Ville Id
     *
     * @param int - Ville Id
     */
    public void setIdville(int idville) {
        this.idville = idville;
    }
       /**
     * Get Ville Name
     *
     * @return String - Ville Name
     */
    public String getNomville() {
        return nomville;
    }
      /**
     * Set Ville Name
     *
     * @param String - Ville Name
     */
    public void setNomville(String nomville) {
        this.nomville = nomville;
    }
     /**
     * Get Pays Object
     *
     * @return String - Pays Object
     */
    public Pays getPays() {
        return pays;
    }
     /**
     * Set Pays Object
     *
     * @return String - Pays Object
     */
    public void setPays(Pays pays) {
        this.pays = pays;
    }

} 
```

这就是错误

```
javax.faces.FacesException: #{villeBean.addVille}: org.springframework.dao.InvalidDataAccessApiUsageException: object references an unsaved transient instance - save the transient instance before flushing: ma.project.sgcheque.model.Pays; nested exception is org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: ma.project.sgcheque.model.Pays
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:85)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:114)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:308)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:230)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:104)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:261)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:844)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:581)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.faces.FacesException: #{villeBean.addVille}: org.springframework.dao.InvalidDataAccessApiUsageException: object references an unsaved transient instance - save the transient instance before flushing: ma.project.sgcheque.model.Pays; nested exception is org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: ma.project.sgcheque.model.Pays
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:114)
    at javax.faces.component.UICommand.broadcast(UICommand.java:311)
    at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:781)
    at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:1246)
    at com.sun.faces.lifecycle.InvokeApplicationPhase.execute(InvokeApplicationPhase.java:77)
    ... 15 more
Caused by: javax.faces.el.EvaluationException: org.springframework.dao.InvalidDataAccessApiUsageException: object references an unsaved transient instance - save the transient instance before flushing: ma.project.sgcheque.model.Pays; nested exception is org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: ma.project.sgcheque.model.Pays
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:98)
    at com.sun.faces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:98)
    ... 19 more
Caused by: org.springframework.dao.InvalidDataAccessApiUsageException: object references an unsaved transient instance - save the transient instance before flushing: ma.project.sgcheque.model.Pays; nested exception is org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: ma.project.sgcheque.model.Pays
    at org.springframework.orm.hibernate3.SessionFactoryUtils.convertHibernateAccessException(SessionFactoryUtils.java:654)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:793)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:664)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy20.addVille(Unknown Source)
    at ma.project.sgcheque.managed.bean.VilleManagedBean.addVille(VilleManagedBean.java:52)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.el.parser.AstValue.invoke(AstValue.java:131)
    at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:276)
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:102)
    at javax.faces.component.MethodBindingMethodExpressionAdapter.invoke(MethodBindingMethodExpressionAdapter.java:84)
    ... 20 more
Caused by: org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: ma.project.sgcheque.model.Pays
    at org.hibernate.engine.ForeignKeys.getEntityIdentifierIfNotUnsaved(ForeignKeys.java:242)
    at org.hibernate.type.EntityType.getIdentifier(EntityType.java:430)
    at org.hibernate.type.ManyToOneType.isDirty(ManyToOneType.java:265)
    at org.hibernate.type.TypeFactory.findDirty(TypeFactory.java:619)
    at org.hibernate.persister.entity.AbstractEntityPersister.findDirty(AbstractEntityPersister.java:3141)
    at org.hibernate.event.def.DefaultFlushEntityEventListener.dirtyCheck(DefaultFlushEntityEventListener.java:501)
    at org.hibernate.event.def.DefaultFlushEntityEventListener.isUpdateNecessary(DefaultFlushEntityEventListener.java:227)
    at org.hibernate.event.def.DefaultFlushEntityEventListener.onFlushEntity(DefaultFlushEntityEventListener.java:150)
    at org.hibernate.event.def.AbstractFlushingEventListener.flushEntities(AbstractFlushingEventListener.java:219)
    at org.hibernate.event.def.AbstractFlushingEventListener.flushEverythingToExecutions(AbstractFlushingEventListener.java:99)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:49)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1028)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:366)
    at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:137)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656)
    ... 36 more 
```

当我点击添加新城市的提交时出现错误（谁支付（国家）作为外键）。

对不起我的英语，但我希望你明白我的问题是什么。真的停止了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T07:09:54.927

问题是 Pays 不再与您的休眠会话或持久性上下文相关联。当您尝试保存 Ville 时，休眠会话不知道您付款。

您可以通过使用合并而不是持久化来解决此问题，或者在 VilleService 中刷新您的付款。

# c++ - 用于识别回文字符数组的递归函数

> ID：10939673
> 
> 赞同：0
> 
> 时间：2012-06-07T20:50:37.480
> 
> 标签：c++, arrays, recursion, char

我在大学被分配了这个练习，但我不知道如何实现递归结构（代码中的“???”）。在 if 循环中，我应该将数组中的第一个字符与最后一个字符匹配并应用递归以到达中心字符，但我不知道如何设置代码。主要功能代码编译完美。

```
#include <iostream>

using namespace std;

const int DIM = 8;

bool is_palindrome (char* first, char* last)
{
    if (first == last)
    {
        ???
    }
    else
     return false;
}

int main()
{
    char a[DIM] = {'i','n','g','e','g','n','i','\0'};
    char *first = &a[DIM] + 1;
    char *last = &a[DIM] -1;

    if (is_palindrome(first, last))
        cout << " the char array is palindrome ";
    else
            cout << " the char array is not palindrome ";

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:59:21.440

首先，您需要比较指针指向的值，而不是指针本身

```
if (*first == *last) 
```

其次，您可以前进第一个并减少最后一个以移动一个字符：

```
// inside if
++first;
--last; 
```

并使用指针的新值再次调用该函数：

```
return is_palindrome(first, last); 
```

您还需要确保在实际得到回文时不会越过数组，因此将此检查添加到`is_palindrome()`

```
if (last < first) {
  return true;
} 
```

此外，`main()`您需要以这种方式初始化指针：

```
char* first = &a[0];
char* last = &[DIM-2]; 
```

您编写它的方式`first`已经指向数组，而`last`指向结尾`'\0'`，它将与任何其他字符都不匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:55:51.953

```
using namespace std;

const int DIM = 8;

bool is_palindrome ( char* first , char* last )
{
    if ( *first == '\0' )
    {
        return false;
    }
    else if ( first >= last )
    {
        return true;
    }
    else if ( *first == *last )
    {
        return is_palindrome(first + 1, last - 1);
    }
    else
    {
        return false;
    }
}

int main ()
{
    char a[DIM] = {'i','n','g','e','g','n','i','\0'};
    char *first = a;
    char *last = &a[DIM] - 2;

    if ( is_palindrome ( first , last ) )
    {
        cout << " the char array is palindrome ";
    }
    else
    {
        cout << " the char array is not palindrome ";
    }

    return 0;
} 
```

# c# - Infopath 2007 重复表空值

> ID：10939678
> 
> 赞同：0
> 
> 时间：2012-06-07T20:51:00.990
> 
> 标签：c#, infopath, vsta

我收到此错误：无法读取数据。数据为空。不能对 Null 值调用此方法或属性。

我知道数据库在某些字段中有 NULL 值。我只想处理它们并继续填写下一行。这是一些代码：

rdr 是 SqlDataReader

```
if (rdr[EmailID] != null)
{
     //this blows up on this line on the 32nd iteration of the loop when searching for an extended group.
     EmpNewData.SelectSingleNode("/my:myFields/my:Emp/my:EmpData/my:email", NamespaceManager).SetValue(rdr.GetString(EmailID));
 }
 else
 {
     EmpNewData.SelectSingleNode("/my:myFields/my:Emp/my:EmpData/my:email", NamespaceManager).SetValue("No.Email");
 } 
```

我可以使用存储过程来处理这个问题，但我真的很想知道如何处理这个问题。以上是我尝试过的许多迭代之一。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:46:19.173

我想通了。IsDBNull 似乎会处理它。我在调试中运行代码来检查序号的位置。在这种情况下是 14 岁。

```
int EmailID = rdr.GetOrdinal("EmailID");

Then when using GetString:

if (!(rdr.IsDBNull(14)))
{
     EmpNewData.SelectSingleNode("/my:myFields/my:Emp/my:EmpData/my:email", NamespaceManager).SetValue(rdr.GetString(EmailID));
}
else
{
     EmpNewData.SelectSingleNode("/my:myFields/my:Emp/my:EmpData/my:email", NamespaceManager).SetValue("No Email");
} 
```

我希望这会对某人有所帮助。

# actionscript-3 - AS3 - 共享滑块系统

> ID：10939682
> 
> 赞同：0
> 
> 时间：2012-06-07T20:51:08.737
> 
> 标签：actionscript-3

很长一段时间以来，我一直在为这个问题烦恼，基本上我已经创建了一个利润分配系统，其中包括允许许多合作伙伴将他们的股份设置在 0-100 的滑块上的功能。

我遇到问题的地方是阻止滑块设置不切实际的值，即在一个合作伙伴拥有 100% 的股份集的情况下。目前，我正在 Partner 类滑块事件侦听器中使用以下代码进行测试：

```
 // check we don't use more responsibility shares than available
        if(rs_sldr.value < availableShares + rs_sldr.value) {

            // update shares value if valid
            RSShares = rs_sldr.value;
        } 
```

availableShares 值取自一般合作伙伴类，每次调整合作伙伴滑块时都会更新，方法是将所有合作伙伴份额值相加并从总可用份额中扣除 (100)。

我在 if 语句中添加滑块值以创建正确的比例，就好像我只使用可用的共享值一样，滑块可以为第一个合作伙伴设置不超过 50，因为在 50 时只剩下 50 个共享，if 语句被触发。我敢肯定有一个更合乎逻辑的方法来做到这一点！！！

无论如何，这是我的代码，希望有人能把我从这给我造成的痛苦中解救出来。非常感谢。

普通合伙人类：

```
package com.example.profitdistributiondiagram {

import flash.display.MovieClip;
import flash.events.Event;
import com.example.profitdistributiondiagram.events.PartnerEvent;
import flash.globalization.CurrencyFormatter;
import flash.globalization.LocaleID;

public class Partners extends MovieClip {

    public var TPGrossPerc:Number = 0;
    public var TPGrossAmount:Number = 0;

    public var RSShareValue:Number = 0;
    public var RSGrossShareAmount:Number = 0;
    public var RSGrossAmount:Number = 0;
    public var RSNetAmount:Number = 0;

    public var PPGrossPoints:Number = 0;
    public var PPGrossAmount:Number = 0;

    public var DGrossPerc:Number = 0;
    public var DGrossAmount:Number = 0;

    public var partners = new Array();
    public var FDAmount:Number = 0;
    public var totalInputRS:Number = 0;
    public var totalInputPP:Number = 0;
    public var totalInputD:Number = 0;      

    public var availableShares:Number = 100;

    private var cf:CurrencyFormatter;

    public function Partners() {

        cf = new CurrencyFormatter( "en-UK" );
        cf.setCurrency("EUR", "€");
        cf.fractionalDigits = 0;
        cf.negativeSymbol = '-';
        cf.negativeCurrencyFormat = 1;

        // set names
        partner_1.row.partner_ref.text = "P1";
        partner_2.row.partner_ref.text = "P2";
        partner_3.row.partner_ref.text = "P3";
        partner_4.row.partner_ref.text = "P4";
        partner_5.row.partner_ref.text = "P5";

        // set partner parent
        partner_1.row.addEventListener(PartnerEvent.UPDATE,partnerRowUpdateListener);
        partner_2.row.addEventListener(PartnerEvent.UPDATE,partnerRowUpdateListener);
        partner_3.row.addEventListener(PartnerEvent.UPDATE,partnerRowUpdateListener);
        partner_4.row.addEventListener(PartnerEvent.UPDATE,partnerRowUpdateListener);
        partner_5.row.addEventListener(PartnerEvent.UPDATE,partnerRowUpdateListener);

        // init partners
        partners = [partner_1,partner_2,partner_3,partner_4,partner_5];
    }
    private function partnerRowUpdateListener(e:Event) {
        updateSubtotals();
        updateMaxValues();          
        updateLabels();
        updateBarCharts();
    }
    public function update() {
        updateSubtotals();
        updateMaxValues();              
        updateLabels();
        updateBarCharts();
    }
    private function updateMaxValues() {

        var p,partner;

        // loop through partners and add values together
        for(var i:Number = 0; i < partners.length; i++) {
            partner = partners[i].row;
            partner.availableShares = availableShares;
            partner.updateNoEvent();
        }

    }
    private function updateSubtotals() {

        // reset vars
        TPGrossPerc = 0;
        TPGrossAmount = 0;
        RSGrossShareAmount = 0;
        RSGrossAmount = 0;
        RSNetAmount = 0;
        PPGrossPoints = 0;
        PPGrossAmount = 0;
        DGrossPerc = 0;
        DGrossAmount = 0;

        var p,partner;

        // loop through partners and add values together
        for(var i:Number = 0; i < partners.length ; i++) {

            partner = partners[i];

            p = partners[i].row;
            p.FDAmount = FDAmount;
            p.totalInputRS = totalInputRS;
            p.totalInputPP = totalInputPP;
            p.totalInputD = totalInputD;
            p.updateNoEvent();

            if(partner.configEnabled) {

                // add up totals
                TPGrossPerc += p.TPPerc;
                TPGrossAmount += p.TPGrossAmount;
                trace("partner: "+i+" "+p.RSShares);
                RSGrossShareAmount += p.RSShares;

                RSGrossAmount += p.RSGrossAmount;
                RSNetAmount += p.RSGrossMinusTPDrawings;

                PPGrossPoints += p.PPoints;
                PPGrossAmount += p.PPAmount;

                DGrossPerc += p.DPerc;
                DGrossAmount += p.DAmount;

            }

            //TPGrossPerc = Math.max(100,TPGrossPerc);
            //TPGrossAmount = Math.max(totalInput

            //RSNetAmount = Math.min(totalInputRS
            //RSGrossAmount = Math.min(totalInputRS,RSGrossAmount);

        }           
        trace('RSGrossShareAmount: '+RSGrossShareAmount);

        // set available shares
        availableShares = 100 - RSGrossShareAmount;
    }
    private function updateLabels() {

        // set values
        tp_gross_perc_lbl.text = String(TPGrossPerc);
        tp_gross_amount_lbl.text = cf.format(TPGrossAmount,true);

        rs_share_value_lbl.text = cf.format(totalInputRS / 100,true);
        rs_gross_shares_lbl.text = String(RSGrossShareAmount);
        rs_gross_amount_lbl.text = cf.format(RSGrossAmount,true);
        rs_net_amount_lbl.text = cf.format(RSNetAmount,true);

        pp_gross_points_lbl.text = String(PPGrossPoints);
        pp_gross_amount_lbl.text = cf.format(PPGrossAmount,true);

        d_gross_total_lbl.text = String(DGrossPerc);
        d_gross_amount_lbl.text = cf.format(DGrossAmount,true);

    }
    private function updateBarCharts() {

        var bcHeight = 190;
        var bcOnePerc = bcHeight / 100;     
        var p;
        var greatestSalary = 0;
        var maxScale = 0;

        // loop through partners and add values together
        for(var i:Number = 0; i < partners.length ; i++) {
            p = partners[i];
            if(p.row.salary > greatestSalary) {
                greatestSalary = p.row.salary;
            }
        }

        // set max scale
        maxScale = greatestSalary;

        // loop through partners and add values together
        for(i = 0; i < partners.length ; i++) {

            p = partners[i];

            // update label
            if(p.bar_chart_mc != null) {

                p.bar_chart_mc.amount_txt.text = cf.format(p.row.salary,true);

                // get percentages 
                //trace('');
                //trace('p.row.FDAmount: '+p.row.FDAmount);
                //trace('p.row.salary: '+p.row.salary);
                //trace('p.row.FDAmount / p.row.salary: '+(p.row.FDAmount / maxScale) * 100);
                var fdPerc = !((p.row.FDAmount / maxScale) * 100) ? 0 : (p.row.FDAmount / maxScale) * 100;
                var rsPerc = !((p.row.RSGrossMinusTPDrawings / maxScale) * 100) ? 0 : (p.row.RSGrossMinusTPDrawings / maxScale) * 100;
                var tpPerc = !((p.row.TPGrossAmount / maxScale ) * 100) ? 0 : (p.row.TPGrossAmount / maxScale) * 100;
                var ppPerc = !((p.row.PPAmount / maxScale) * 100) ? 0 : (p.row.PPAmount / maxScale) * 100;
                var dPerc = !((p.row.DAmount / maxScale) * 100) ? 0 : (p.row.DAmount / maxScale) * 100;

                //trace('per: '+(fdPerc + rsPerc + tpPerc + ppPerc + dPerc));

                p.bar_chart_mc.fixed_drawings_mc.height = Math.round(bcOnePerc * fdPerc);
                p.bar_chart_mc.topup_drawings_mc.height = Math.round(bcOnePerc * tpPerc);
                p.bar_chart_mc.responsibility_shares_mc.height = Math.round(bcOnePerc * rsPerc);
                p.bar_chart_mc.performance_points_mc.height = Math.round(bcOnePerc * ppPerc);
                p.bar_chart_mc.discretionary_mc.height = Math.round(bcOnePerc * dPerc);

                p.bar_chart_mc.topup_drawings_mc.y = p.bar_chart_mc.fixed_drawings_mc.y - p.bar_chart_mc.fixed_drawings_mc.height;
                p.bar_chart_mc.responsibility_shares_mc.y = p.bar_chart_mc.topup_drawings_mc.y - p.bar_chart_mc.topup_drawings_mc.height;
                p.bar_chart_mc.performance_points_mc.y = p.bar_chart_mc.responsibility_shares_mc.y - p.bar_chart_mc.responsibility_shares_mc.height;
                p.bar_chart_mc.discretionary_mc.y = p.bar_chart_mc.performance_points_mc.y - p.bar_chart_mc.performance_points_mc.height; 

                //trace('p.bar_chart_mc.fixed_drawings_mc.y: '+p.bar_chart_mc.fixed_drawings_mc.y);
                //trace('pp.bar_chart_mc.topup_drawings_mc.y: '+p.bar_chart_mc.topup_drawings_mc.y);
            }

        }
    }
} 
```

}

合作伙伴类：

```
package com.example.profitdistributiondiagram {

import flash.display.MovieClip;
import fl.events.SliderEvent;
import com.example.profitdistributiondiagram.events.PartnerEvent;
import flash.events.Event;
import flash.events.TextEvent;
import flash.globalization.CurrencyFormatter;
import flash.globalization.LocaleID;

public class PartnerRow extends MovieClip {

    public var availableShares:Number = 100;
    public var FDAmount:Number = 0;
    public var TPGrossAmount:Number = 0;
    public var TPPerc:Number = 0;

    public var RSGrossAmount:Number = 0;
    public var RSShares:Number = 0;
    public var RSGrossMinusTPDrawings:Number = 0;

    public var PPGrossAmount:Number = 0;
    public var PPoints:Number = 0;
    public var PPAmount:Number = 0;     
    public var PPGrossPoints:Number = 100;

    public var DGrossAmount:Number = 0;
    public var DPerc:Number = 0;
    public var DAmount:Number = 0;

    public var totalInputRS:Number = 0;
    public var totalInputPP:Number = 0;
    public var totalInputD:Number = 0;

    public var salary:Number = 0;

    public var enableControl;
    public var barChart:MovieClip;

    private var cf:CurrencyFormatter;

    public function PartnerRow() {

        // set currency formatter
        cf = new CurrencyFormatter( "en-UK" );
        cf.setCurrency("EUR", "€");
        cf.fractionalDigits = 0;
        cf.negativeSymbol = '-';
        cf.negativeCurrencyFormat = 1;

        // event listeners
        tp_sldr.addEventListener(SliderEvent.THUMB_DRAG, sliderDragHandler);
        rs_sldr.addEventListener(SliderEvent.THUMB_DRAG, sliderDragHandler);
        pp_sldr.addEventListener(SliderEvent.THUMB_DRAG, sliderDragHandler);
        d_sldr.addEventListener(SliderEvent.THUMB_DRAG, sliderDragHandler);

        // update
        update();

    }
    private function sliderDragHandler(event:SliderEvent):void {

        trace('availableShares: '+availableShares);
        trace(' availableShares: '+(availableShares + rs_sldr.value));
        trace('rs_sldr.value: '+rs_sldr.value);

        // check we don't use more shares than available
        if(rs_sldr.value < availableShares + rs_sldr.value) {

            // update shares value if valid
            RSShares = rs_sldr.value;
            //trace("RSShares: "+RSShares);
        }
        trace('max: '+rs_sldr.maximum);
        // update labels
        update();

    }
    public function update() {

        // update but don't dispatch an event
        updateNoEvent();

        // dispatch update event
        this.dispatchEvent(new  Event(PartnerEvent.UPDATE));            
    }
    public function updateNoEvent() {

        // set responsibility shares

        //RSShares = rs_sldr.value;
        RSGrossAmount = (totalInputRS / 100) * RSShares;
        RSGrossMinusTPDrawings = RSGrossAmount - TPGrossAmount;

        // set RS text values
        rs_shares_lbl.text = String(RSShares);
        /*rs_gross_amount_lbl.text = cf.format(RSGrossAmount,true);
        rs_net_amount_lbl.text = cf.format(RSGrossMinusTPDrawings,true);

        // set topup drawings
        TPGrossAmount = (RSGrossAmount / 100) * tp_sldr.value;
        TPPerc = tp_sldr.value;
        tp_perc_lbl.text = String(TPPerc);
        tp_gross_amount_lbl.text = cf.format(TPGrossAmount,true);

        // set performance points
        PPGrossAmount = totalInputPP;
        PPoints = pp_sldr.value;
        PPAmount = (PPGrossAmount / PPGrossPoints) * PPoints;

        // set PP text values
        pp_points_input.text = String(PPoints);
        pp_amount_lbl.text = cf.format(PPAmount,true);

        // set discretionary 
        DGrossAmount = totalInputD;
        DPerc = d_sldr.value;
        DAmount = (DGrossAmount / 100) * DPerc;

        // ser discretionary text values
        d_perc_input.text = String(DPerc);
        d_amount_input.text = cf.format(DAmount,true);
        */
        // set salary
        salary = FDAmount + RSGrossMinusTPDrawings + TPGrossAmount + PPAmount + DAmount;

    }

} 
```

}

# perl - 如何从 SOAP::Lite 中的复杂 SOAP::DATA 结构中获取属性？

> ID：10939687
> 
> 赞同：0
> 
> 时间：2012-06-07T20:51:28.253
> 
> 标签：perl, soap

我无法使用 SOAP::Lite 从 SOAP 响应中获取简单的属性值。下面是 SOAP::Data 的代码和输出。我正在尝试获取属性的值 //response/dirn/attr/uuid

```
my $cm = new SOAP::Lite
  uri => 'http://www.cisco.com/AXL/API/1.0',
  proxy => "https://10.0.0.1:8443/axl/";

my $res = $cm->getPhone(
  SOAP::Data->name(phoneName => 'SEP00270D3D7A4C'),
);

for my $i ($res->valueof('//device/lines/line')) {
  print Dumper($i);
  #print $i->{dirn}->{attr}->{'uuid'}."\n"; # line below give me an error
} 
```

这里是 Data::Dumper 的输出。我实际上有请求的值，但我无法通过 SOAP::Data 获得它

```
$VAR1 = \bless( {
'_signature' => [],
'_value' => [
  bless( {
    '_name' => 'dirn',
    '_signature' => [],
    '_value' => [
      ''
    ],
    '_prefix' => '',
    '_attr' => {
      'uuid' => '{615C3550-1EFD-56C7-3788-2AA8725880E3}' #!!!!!!!!!!!!!!!!!!!!!!!!!!
    }
  }, 'SOAP::Data' ),
],
'_attr' => {}
}, 'SOAP::Data' ); 
```

我花了大约几个小时试图获得这个属性值。我已经在考虑使用 Data::Dumper 的输出来获得快速而肮脏的 hack 的价值。

提前致谢

PS：SOAP 服务器是 Cisco CUCM 6.1.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-18T23:40:57.363

我最近经历了同样的事情并找到了答案，请参阅我的问题和评论部分中的更新答案。 [从 SOAP::Lite 响应哈希中提取 CDATA 中的特定 XML 元素](https://stackoverflow.com/questions/23164438/extract-specific-xml-element-in-cdata-taken-from-soaplite-response-hash)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:31:36.370

我有同样的问题，但找不到“快速简便”的解决方案。我开发了一个 Perl 库模块来使用某些供应商 Web 服务 (WSDL)。我已经完成了许多这样的 Web 服务接口，但直到现在 - 所有数据都作为 XML“元素”返回。相反，这个特定的 Web 服务将大部分数据作为 XML 元素返回，但也设置了一些 - 作为 XML 属性。我无法获取作为属性返回的值 - 因为 SOAP::Data 方法（valueof()、body() 等）只返回 XML 元素的值，而不返回关联的属性。

这个问题与之前发布的问题有点不同——因为我事先并不知道返回的 XML 结构（假设 Web 服务提供了许多不同的方法，并且每个方法都有不同的响应）。

所以问题是 - 如何获取通用响应 SOAP 数据的*所有*XML 数据（元素和属性）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T21:47:22.717

```
$$i->value->attr->{uuid} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-20T18:52:42.923

```
$i->{'_value'}[0]{'uuid'} 
```

不过，我认为，我不确定 [0]。

# delphi - Delphi中是否有某种方法可以缓存主从行并同时发布主从子行

> ID：10939689
> 
> 赞同：8
> 
> 时间：2012-06-07T20:51:32.877
> 
> 标签：delphi, ado, master-detail

我想在内存中发布一些子行，然后有条件地发布它们，或者不将它们发布到底层 SQL 数据库，具体取决于是否发布了父行。我不需要完整的 ORM，但也许只是这样：

1.  用户单击添加医生。添加医生对话框打开。
2.  在添加医生上单击确定之前，在添加医生对话框中，用户添加一名或多名仅保留在内存中的患者。
3.  用户在添加医生窗口中单击确定。现在所有的病人都被存储了，加上新的医生。
4.  如果用户在医生窗口单击取消，则所有医生和患者信息都将被丢弃。

如果您愿意，请尝试想象您如何使用 delphi 数据感知控件和 TADOQuery 或其他 ADO 对象来完成上述操作。如果有一种非 ADO 特定的方法来执行此操作，我也对此感兴趣，我只是将 ADO 扔在那里，因为我碰巧在我当前的应用程序中使用 MS-SQL Server 和 ADO。

因此，在我工作过一段时间的以前的雇主那里，他们有一个名为的类`TMasterDetail`，专门用于将上述内容添加到 ADO 记录集中。它有时有效，有时却以一些非常有趣且难以修复的方式失败。

VCL 中是否有任何内置的东西，或者任何第三方组件具有执行此技术的稳健方式？如果不是，我在上面所说的是否需要 ORM？我认为 ORM 被很多人认为是“坏的”，但以上是一种非常自然的 UI 模式，可能会出现在百万个应用程序中。如果我使用的是非 ADO 非 Delphi-db-dataset 工作方式，那么在我可能编写的几乎任何持久层中，上述内容都不会成为问题，但是当具有使用标识值链接的主键的数据库时主行和详细行进入图片，事情变得复杂。

**更新：**在这种情况下，交易并不理想。（提交/回滚对于我的目的来说是一种过于粗糙的机制。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T17:43:00.640

你问两个不同的问题：

1.  如何缓存更新？
2.  如何同时提交对相关表的更新。

缓存更新可以通过多种不同的方式完成。哪个最好取决于您的具体情况：

## ADO 批量更新

由于您已经声明您正在使用 ADO 访问数据，因此这是一个合理的选择。您只需在打开数据集之前将 LockType 设置为*ltBatchOptimistic*并将 CursorType 设置为*ctKeySet*或*ctStatic*。然后在准备好提交时调用 TADOCustomDataset.UpdateBatch。

注意：底层 OLEDB 提供程序必须支持批量更新才能利用这一点。SQL Server 提供程序完全支持这一点。

除了在两个数据集上按顺序调用 UpdateBatch 之外，我知道在持久化数据时没有其他方法可以强制执行主/详细信息关系。

```
Parent.UpdateBatch;
Child.UpdateBatch; 
```

## 客户端数据集

数据缓存是 存在的主要原因之一`TClientDataset`，同步主/从关系一点也不难。

为此，您像往常一样在两个数据集组件上定义主/详细关系（在您的情况下`ADOQuery`或`ADOTable`）。然后创建一个**提供**者并将其连接到*主*数据集。**将单个** 连接`TClientDataset`到提供商，您就完成了。`TClientDatset`将详细数据集解释为嵌套的数据集字段，可以像任何其他数据集一样访问并绑定到数据感知控件。

一旦到位，您只需调用`TClientDataset.ApplyUpdates`，客户端数据集将负责正确排序主/详细数据的更新。

## ORM

关于 ORM 有很多可以说的。StackOverflow 上的答案太多了，所以我会尽量简短。

ORM 最近的名声不好。一些专家甚至将它们标记为反模式。个人认为这有点不公平。对象关系映射是一个很难正确解决的问题。ORM 试图通过抽象出在关系表和对象实例之间传输数据所涉及的许多复杂性来提供帮助。但就像软件开发中的其他一切一样，没有灵丹妙药，ORM 也不例外。

对于没有大量业务规则的简单数据输入应用程序，ORM 可能是矫枉过正。但是随着应用程序变得越来越复杂，ORM 开始看起来更具吸引力。

在大多数情况下，您会想要使用第三方 ORM 而不是自己滚动。编写一个完全符合您要求的自定义 ORM 听起来是个好主意，并且通过简单的映射很容易上手，但是您很快就会遇到诸如父/子关系、继承、缓存和缓存失效之类的问题（相信我，我知道这一点根据经验）。第三方 ORM 已经遇到了这些问题，并花费了大量资源来解决这些问题。

使用许多 ORM，您可以用代码复杂性换取配置复杂性。他们中的大多数人都在积极努力通过转向约定和政策来减少样板配置。如果您命名所有主键`Id`，而不必将每个表的`Id`列映射到每个类的相应`Id`属性，您只需告诉 ORM 这个约定，它假定它知道的所有表和类都遵循约定。对于不适用的特定情况，您只需覆盖该约定。我不熟悉 Delphi 的所有 ORM，所以我不能说哪些支持这个，哪些不支持。

在任何情况下，您都需要设计您的应用程序架构，以便尽可能推迟决定使用哪个 ORM 框架（或就此而言任何框架）。

# visual-c++ - Visual-C++ 内联汇编器 NEAR JMP

> ID：10939690
> 
> 赞同：0
> 
> 时间：2012-06-07T20:51:39.617
> 
> 标签：visual-c++, assembly, masm

如何在 MSVC 内联汇编器中使用相对近的 jmp？

我尝试了以下方法：

```
__asm { 
    jmp 0x00000011
} 
```

但它会引发错误错误：

> ... 错误 C2415：操作数无效

那么，如何实现相对近跳呢？我需要带有操作码 E9 的 jmp 指令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:01:35.380

我认为这应该有效：

```
__asm
{
    jmp $+0x11
} 
```

# javascript - 如何从dragover事件中获取源节点

> ID：10939693
> 
> 赞同：3
> 
> 时间：2012-06-07T20:51:45.170
> 
> 标签：javascript, drag-and-drop, dom-events

从dragover（使用jQuery）触发的事件中，如何找到源节点（被拖动的元素）？

[根据http://www.w3.org/TR/2008/WD-html5-20080610/editing.html#dragover](http://www.w3.org/TR/2008/WD-html5-20080610/editing.html#dragover)似乎无法进行数据传输

编辑：所以经过一些额外的研究，似乎 Mozilla 通过[mozSourceNode](https://developer.mozilla.org/En/DragDrop/DataTransfer#mozSourceNode)属性支持。任何跨浏览器解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T20:57:27.457

如何将源绑定到函​​数并通过 this 访问它？

```
object.addEventOrWhatever(function(){
  source = $(this);
}.bind(source)); 
```

# cassandra - 删除超列族的子列的最佳方法

> ID：10939699
> 
> 赞同：1
> 
> 时间：2012-06-07T20:52:21.317
> 
> 标签：cassandra, super-columns

我正在尝试删除超级列族的子列。我尝试了以下代码，但是当超级列族有很多超级列时它不起作用，它只返回部分超级列。

```
SuperCfResult<UUID, Long, UUID> superCfResult = sTemplate.querySuperColumns(key);
Collection<Long> supercolumns = superCfResult.getSuperColumns(); 
```

另一种方法是构建一个 SuperSliceQuery，其范围将返回所有超级列，然后循环查找匹配的列并将其删除。它可以工作，但绝对是矫枉过正并且有性能成本。

有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T17:24:47.597

```
Mutator mutator = HFactory.createMutator(keyspace, key_serializer);
mutator.addSubDelete(key, column_family, supercol, subcol, super_serializer, sub_serializer);
mutator.execute(); 
```

# cakephp - cakephp 2.x 的开源文件上传行为？

> ID：10939706
> 
> 赞同：0
> 
> 时间：2012-06-07T20:52:56.243
> 
> 标签：cakephp, file-upload, behavior

我尝试从[这里](http://www.meiocodigo.com/projects/meioupload/)使用 MeioUpload Behavior，但它在 cakephp 2.x 中并没有真正起作用。

如果你能提出类似的建议？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:11:28.363

我的[文件存储](https://github.com/burzum/FileStorage)插件。

仔细阅读说明和全文。如果您遵循它们，它很容易使用。该行为只会*验证*但不处理实际上传。使用 StorageManager 和符合您要求的适配器（本地 FS、S3、Dropbox...）。自述文件中也描述了它工作的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-11T06:43:49.670

检查这种非常简单直接的方法（彻底阅读readme.md），对我来说这项工作甚至可以创建缩略图：

[https://github.com/malikov/cakephp2.0-image-upload](https://github.com/malikov/cakephp2.0-image-upload)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T01:30:00.793

我一直在成功使用此 FileUpload 插件的 cakephp2.0 分支： [https ://github.com/webtechnick/CakePHP-FileUpload-Plugin](https://github.com/webtechnick/CakePHP-FileUpload-Plugin)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T21:43:06.930

如果您正在寻找基于 AJAX 的多文件上传插件，[AjaxMultiUpload](https://github.com/srs81/CakePHP-AjaxMultiUpload)插件可能会有所帮助。它适用于 CakePHP 2.x。

# c# - 使用来自正则表达式匹配的消息引发异常

> ID：10939711
> 
> 赞同：1
> 
> 时间：2012-06-07T20:53:12.683
> 
> 标签：c#, regex

我试图在电子邮件中找到未使用的合并字段并抛出解析器不支持的字段。格式为 [MERGEFIELD]。括号内的所有大写字母。

然后我想在文本中抛出第一个不受支持的合并字段的值。

```
 if (Regex.IsMatch(email.Body, @"\[[A-Z]+\]"))
        {
            var regexobj = new Regex(@"\[[A-Z]+\]");
            var regexBody = regexobj.Match(email.Body).Groups[1].Value;
            throw new NotImplementedException("Unsupported Merge Field:"+ regexBody );
        } 
```

现在我得到了例外，但只有消息是“不支持的合并字段：”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T20:59:46.630

您正在尝试获取（捕获）组 1（括号中的匹配内容）的值，该值在您的表达式中不存在。

也许您想改用这样的表达式：

```
\[([A-Z]+)\] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T20:59:36.287

您需要使用括号才能捕获。

[http://www.regular-expressions.info/refadv.html](http://www.regular-expressions.info/refadv.html)

另请参阅[http://msdn.microsoft.com/en-us/library/az24scfc.aspx](http://msdn.microsoft.com/en-us/library/az24scfc.aspx)

我喜欢使用格式为 (?< name > subexpression) 的命名捕获组，它可以让您按名称而不是按索引访问捕获。

类似下面的东西（手工编码）

```
 if (Regex.IsMatch(email.Body, @"\[[A-Z]+\]"))
    {
        var regexobj = new Regex(@"(?<unsupportedField>\[[A-Z]+\])");
       foreach(Match match in regexobj.Matches(email.Body))
       {
           string unsupported = match.Groups["unsupportedField"].Value
           //aggregate these then throw
       }
        throw new NotImplementedException("Unsupported Merge Field:"+ regexBody );
    } 
```

# ssrs-2008 - ssrs 运行所有参数选项

> ID：10939714
> 
> 赞同：1
> 
> 时间：2012-06-07T20:53:24.043
> 
> 标签：ssrs-2008

我开发了一个包含三个不同参数的报告，供用户临时登录并选择他们想要的内容并运行报告。将所有不同的参数选择组合加起来，就有 150 种不同的报告。

现在要求发生了变化，我们需要每个月在 Excel 中完成所有 150 份报告并保存到网络中。如何安排所有 150 个选项在 Excel 中运行和保存（没有 150 个订阅）。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T13:50:44.750

你用的是企业版吗？如果是这样，您可以创建一个数据驱动的订阅。您需要设置一个包含 150 行的表，其中至少 3 列代表每个参数。为了灵活性，我会为渲染格式（EXCEL）和目标文件夹添加一列。然后您可以创建一个订阅。

否则，如果您只有标准版，您唯一的选择是创建 150 个订阅。在这种情况下，我倾向于编写一个脚本来与 RS.EXE 一起使用来生成 150 个订阅。

这是一个生成 Excel 文件的示例脚本。我重新阅读了您的帖子，并决定您实际上并不需要订阅方面的内容。您只需要呈现报告，然后安排这个，只需为命令行创建一个批处理文件并使用 SQL Server 代理安排它。

此代码改编自[http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.render(v=sql.100).aspx#Y1258上的示例](http://msdn.microsoft.com/en-us/library/reportexecution2005.reportexecutionservice.render(v=sql.100).aspx#Y1258)

您使用记事本输入此内容，然后将文件另存为 renderExcel.rss。文件扩展名很重要 - 不要将其保存为 txt 文件。当然，更改文件路径、参数名称和值。我只是让这些在我的开发机器上执行并确保它确实有效！

```
Public Sub Main()

  rs.Credentials = System.Net.CredentialCache.DefaultCredentials

  ' Render arguments
  Dim result As Byte() = Nothing
  Dim reportPath As String = "/Sales/Reseller Sales Cumulative Sales"
  Dim format As String = "EXCEL"
  Dim historyID As String = Nothing
  Dim devInfo As String = Nothing

  ' Prepare report parameter.
  Dim parameters(2) As ParameterValue
  parameters(0) = New ParameterValue()
  parameters(0).Name = "SalesTerritoryGroup"
  parameters(0).Value = "Europe"
  parameters(1) = New ParameterValue()
  parameters(1).Name = "Year"
  parameters(1).Value = "2007" 
  parameters(2) = New ParameterValue()
  parameters(2).Name = "Quarter"
  parameters(2).Value = "1"

  Dim credentials As DataSourceCredentials() = Nothing
  Dim showHideToggle As String = Nothing
  Dim encoding As String
  Dim mimeType As String
  Dim warnings As Warning() = Nothing
  Dim reportHistoryParameters As ParameterValue() = Nothing
  Dim streamIDs As String() = Nothing

  Dim execInfo As New ExecutionInfo
    Dim execHeader As New ExecutionHeader()
    Dim SessionId As String
    Dim extension As String = ""

  rs.ExecutionHeaderValue = execHeader

    execInfo = rs.LoadReport(reportPath, historyID)

    rs.SetExecutionParameters(parameters, "en-us")

    SessionId = rs.ExecutionHeaderValue.ExecutionID
    Console.WriteLine("SessionID: {0}", rs.ExecutionHeaderValue.ExecutionID)

  Try
     result = rs.Render(format, devInfo, extension, _
           encoding, mimeType, warnings, streamIDs)

  Catch e As SoapException
     Console.WriteLine(e.Detail.OuterXml)
  End Try
  ' Write the contents of the report to an Excel file.
  Try
     Dim stream As FileStream = File.Create("myReport.xls", result.Length)
     Console.WriteLine("File created.")
     stream.Write(result, 0, result.Length)
     Console.WriteLine("Result written to the file.")
     stream.Close()
  Catch e As Exception
     Console.WriteLine(e.Message)
  End Try
 End Sub 
```

要执行它，您需要在命令行中运行它：

```
rs -i renderExcel.rss -s http://localhost/reportserver -e Exec2005 
```

此代码仅创建一个文件。您需要添加一种循环方式来为每个参数组合设置参数，然后进行渲染。

# grails - 告诉 Grails 使用 My Own RoleVoter

> ID：10939724
> 
> 赞同：0
> 
> 时间：2012-06-07T20:54:30.440
> 
> 标签：grails, spring-security

我已经实现了自己的 RoleVoter 版本，并将以下内容添加到 resources.groovy 文件中：

```
organizationRoleVoter(OrganizationRoleVoter)

accessDecisionManager(UnanimousBased) {
  decisionVoters = [organizationRoleVoter]
} 
```

但 Grails 并没有使用它。没有断点，我自己的班级没有调试。我假设我只是没有正确配置它。有人有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:16:56.513

刚刚在[spring-security-core 文档](http://grails-plugins.github.io/grails-spring-security-core/docs/manual/guide/voters.html)中找到了如何做到这一点。

# magento - 类别 URL 问题

> ID：10939725
> 
> 赞同：0
> 
> 时间：2012-06-07T20:54:39.253
> 
> 标签：magento, magento-1.6

我正在为 Magento 网站实施一个新模板。

我对类别 URL 有疑问。**我曾经在http://localhost/category-name.html**上访问，但是当我更改其父类别时，它停止工作，显示**404 页面**。

我尝试在配置 - 目录上修改 SEO 选项，并在后端重写索引，但没有成功。

会不会是其他原因导致这种情况发生？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T16:09:01.233

我解决了这个问题。Magento 没有检测到其他类别，因为它们是其他“根类别”，与安装附带的默认值分开。解决方案是将当前根类别更改为系统 - 管理商店中的另一个根类别，或者将其他根类别嵌套在“默认根类别”下。

# objective-c - 需要大于或等于的东西

> ID：10939729
> 
> 赞同：-3
> 
> 时间：2012-06-07T20:55:07.243
> 
> 标签：objective-c

我想要类似的东西：

```
int x = arrayX.count;
int y = arrayY.count;

if (x >= y) {
//do something
} 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:03:34.947

您还可以将 -compare: 消息与多种类型的对象一起使用：

```
if ([[NSDate date] compare:self.targetDate] == NSOrderedAscending) {
    ...  // targetDate is in the future.
}
else if ([[NSDate date] compare:self.targetDate] == NSOrderedDescending) {
    ...  // targetDate is in the past.
}
else {  // NSOrderedSame
    ...  // Dates are exactly the same.
} 
```

示例代码。不好的代码。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T20:58:43.547

是的，它应该只要`x`并且`y`是原始值（例如`int`or ）就可以工作`float`。（它不适用于像 . 这样的对象`NSNumber`。您需要使用提供的方法之一从该对象获取原始值）。

# javascript - 如何改变列表框中当前选中项的值？

> ID：10939731
> 
> 赞同：1
> 
> 时间：2012-06-07T20:55:22.050
> 
> 标签：javascript, jquery, html, listbox

我知道可以像这样获取当前选定项目的值：

`var myListBoxItemText = $('#myListBox').val().toString();`

但是如何将列表框中的这个值更改为其他值呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T21:06:43.497

在评论中看到您的更新，这是一个更新的答案。只需使用[`:selected`](http://api.jquery.com/selected-selector/)选择器过滤`select`元素内部的选项即可获得选定的选项。

要更改`select`元素的选定选项的`value`属性：

```
 $('#myListBox option:selected').val('new value'); 
```

要更改其显示文本：

```
 $('#myListBox option:selected').text('new text'); 
```

***[JSFiddle](http://jsfiddle.net/ult_combo/NubSF/)***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T20:56:06.957

`$("#myListBox").val("This is the new value");`

虽然，通过“列表框”，我假设你的意思是一个`select`元素。在这种情况下，您必须将该属性添加`selected`到其中一个子`option`元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T20:58:28.503

```
$('#myListBox').val(your_val); 
```

这里 your_val 表示的`value`属性`<option>`

或者你也可以使用

```
$('#myListBox')[0].selectedIndex = 1; 
```

或者

```
 $('#myListBox').prop('selectedIndex', 1); 
```

**[演示](http://jsfiddle.net/thecodeparadox/QStkd/175/)**

**[演示 2](http://jsfiddle.net/thecodeparadox/QStkd/176/)**

# java - Shiro：即使现有会话已经通过其他领域进行了身份验证，也强制进行第二领域身份验证

> ID：10939732
> 
> 赞同：0
> 
> 时间：2012-06-07T20:55:42.483
> 
> 标签：java, guice, shiro

在使用 Apache Shiro 进行 AuthC 和 AuthZ 的 Web 应用程序中，我有两个身份验证领域：一个用于常规 Web 界面（称为`SsoRealm`），另一个用于`RestRealm`使用 API 令牌的 REST API（称为 ）。由两个领域认证的主体具有分离权限（和`AuthenticationTokens`）。如果没有预先存在的会话并且 API 调用通过 REST 接口到达，那么一切都很好，并且身份验证（和授权）通过`RestRealm`. 但是，如果有一个现有会话先前通过发生的 `SsoRealm`无身份验证尝试进行身份验证`RestRealm`，并且连续授权检查（使用`Subject.isPermitted`）失败，因为主题来自错误的领域。

相应的身份验证过滤器注册为（使用 Shiro Guice）：

```
addFilterChain("/api/x/*/y", REST_AUTH, NO_SESSION_CREATION);
addFilterChain("/**", SSO_AUTH); 
```

我能做些什么来强制使用“正确”领域重新进行身份验证吗？

自定义`AuthenticationStrategy`帮助（即，`AuthenticationStrategy`合同是否允许实施“如果`RestRealm`涉及，则`RestRealm`身份验证需要成功”的策略）？`ModularRealmAuthenticator.doMultiRealmAuthentication`如果存在现有的经过身份验证的会话，则不会再次调用AFAICS ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T07:55:42.850

事实证明，这个问题很容易解决：只需覆盖`AuthenticatingFilter#isAccessAllowed`以确保“正确”主体类型已针对您的领域进行身份验证（默认实现仅用于`Subject#isAuthenticated`测试任何主体是否经过身份验证 - 无论它是否符合领域与否）。

# iphone - 隐藏键盘时的NSString rangeOfString问题

> ID：10939733
> 
> 赞同：0
> 
> 时间：2012-06-07T20:55:46.870
> 
> 标签：iphone, ios, keyboard, nsstring, uitextfield

我正在实现一个列表，该列表可以在 a`UITextField`的帮助下使用 a 中的文本进行过滤`UITextFieldDelegate`。

代码如下：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    _tempWrittenText = [textField.text stringByReplacingCharactersInRange: range withString: string];
    [self filterCountries];

    return YES;
}

/** Filter the countries with the currently typed text */
- (void) filterCountries {
    if (_tempWrittenText.length == 0) {
        _visibleCountriesList = (NSMutableArray*) _countriesList;
        [tableMedals reloadSections: [NSIndexSet indexSetWithIndex: 0] withRowAnimation: UITableViewRowAnimationNone];

    } else {
        _visibleCountriesList = [NSMutableArray array];

        for (Country* c in _countriesList) {
            if ([c.name rangeOfString: _tempWrittenText].location != NSNotFound) {
                [_visibleCountriesList addObject: c];
            }
        }
        [tableMedals reloadSections: [NSIndexSet indexSetWithIndex: 0] withRowAnimation: UITableViewRowAnimationFade];
    }

} 
```

输入文字时，过滤器可以完美运行；但是，当按下*DONE*键盘键（隐藏键盘）**`- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string`**时也会触发该方法，这会奇怪地擦除所有项目而不是保持原样。

 *问题是该`rangeOfString`部分总是返回 NSNotFound。我不明白为什么，如果我记录两个字符串是正确的变量。

例如： `[@"Angola" rangeOfString @"A"].location` 会给NSNotFound

我再说一遍，这只发生在键盘被隐藏时。有人有想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:16:33.770

这

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string 
```

按下完成按钮时不会触发，否则如果您强制调用此函数。

使用它隐藏键盘，这不会触发上述方法。

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:40:59.297

好吧，我刚刚发现按下完成键时系统会添加一个换行符。我不知道这是默认行为或为什么会这样做。

防止这种情况的方法是添加以下内容：

```
- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    return YES;
} 
```

希望对某人有所帮助。*

# java - kml 多个图钉，数据库中的游标解决方案

> ID：10939734
> 
> 赞同：2
> 
> 时间：2012-06-07T20:55:49.707
> 
> 标签：java, android, sqlite, kml

我是编程新手，（仅 2 个月）

我正在编写一个应用程序，记录你开车时的纬度和经度，并采摘杂草。然后它会创建一个 kml 文件，以便您（农民）可以看到您去过的地方。

如果您在同一地点（相同的纬度和经度）挑选四种杂草，则输出是一个 kml 图钉，当您单击它时，它会扩展为四个；然而，这意味着农民必须点击所有的大头针才能看到多个大头针。

这是我的代码，使我的 kml

```
 db = openOrCreateDatabase(rabbitsrv.DATABASE_NAME, SQLiteDatabase.OPEN_READWRITE, null);
               cursor = db.rawQuery("SELECT * " +
            " FROM " + rabbitsrv.BAG_TABLE_NAME +
            " ORDER BY LATITUDE ASC;",
            null);
    int gmtTimestampColumnIndex = cursor.getColumnIndexOrThrow("GMTTIMESTAMP");
    int latitudeColumnIndex = cursor.getColumnIndexOrThrow("LATITUDE");
    int longitudeColumnIndex = cursor.getColumnIndexOrThrow("LONGITUDE");  
                if (cursor.moveToFirst()) {
                        StringBuffer fileBuf = new StringBuffer();
                        String beginTimestamp = null;
                        String endTimestamp = null;
                        String gmtTimestamp = null;
                        initFileBufk(fileBuf, initValuesMap());
                        do {gmtTimestamp = cursor.getString(gmtTimestampColumnIndex);
                        if (beginTimestamp == null) {beginTimestamp = gmtTimestamp;}
                                double latitude = cursor.getDouble(latitudeColumnIndex);
                                double longitude = cursor.getDouble(longitudeColumnIndex);
                                fileBuf.append("<Placemark><Point><coordinates>"+
                                        sevenSigDigits.format(longitude)+","+sevenSigDigits.format(latitude)+
                                                "</coordinates></Point></Placemark>\n");
                        } while (cursor.moveToNext());
                        endTimestamp = gmtTimestamp;
                        cursor.moveToLast();
                        closeFileBufk(fileBuf, beginTimestamp, endTimestamp);
                        String fileContents = fileBuf.toString();
                        Log.d(tag, fileContents); 
```

我真正想做的是有一个 if 语句。我知道以下内容不起作用，因为我编造了`.nextvalue`：

```
if ((cursor.lat==cursor.nextvalue.lat)&(cursor.long==cursor.nextvalue,long){
    // make purple pushpin
} else {
    // make yellow pushpin.
} 
```

更好的是，如果我能数出我在同一纬度和经度上有多少杂草，并且如果有 7 个（例如）我可以制作一个带有数字 7 的旗帜。

我可以做的 kml 方面 - 这是我坚持的 sql/cursor 位。

# ruby-on-rails - Bundle exec rspec spec/static_pages_spec.rb 无法加载错误

> ID：10939739
> 
> 赞同：0
> 
> 时间：2012-06-07T20:55:57.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec, tdd, bdd

我正在尝试使用 Michael Hartl 的教程测试 Rails 应用程序，但输入后出现以下错误`bundle exec rspec spec/requests/static_pages_spec.rb`（我在示例应用程序目录中）

static_pages_spec.rb:9: 语法错误，意外的 ','，期待 ')' `(SyntaxError)` ...age.should have_selector ('h1', :text => 'Sample App')

... ^

/Users/subalcharla/subal_rails/sample_app/spec/requests/static_pages_spec.rb:9：语法错误，意外'）'，期待keyword_end ...r（'h1'，：text =>'示例应用程序'）

/Users/subalcharla/subal_rails/sample_app/spec/requests/static_pages_spec.rb:14: `syntax error`, 意外',', 期待')' page.should have_selector ('title',

```
 ^ 
```

/Users/subalcharla/subal_rails/sample_app/spec/requests/static_pages_spec.rb:15：语法错误，意外')'，期待keyword_end ...ls教程示例应用程序| 家”）

/Users/subalcharla/subal_rails/sample_app/spec/requests/static_pages_spec.rb:49：语法错误，意外')'，期待keyword_end

```
from /Users/subalcharla/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `block in load_spec_files'

from /Users/subalcharla/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `map' 
```

来自 /Users/subalcharla/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/configuration.rb:746:in `load_spec_files'

来自 /Users/subalcharla/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/command_line.rb:22:in `run'

来自 /Users/subalcharla/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:69:in `run'

来自 /Users/subalcharla/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/rspec-core-2.10.1/lib/rspec/core/runner.rb:10:in `block in autorun'

```
My static_pages_spec.rb file is 
```

需要'spec_helper'

描述“静态页面”做

```
describe "Home page" do

    it "should have the content 'Sample App'" do  
                    visit '/static_pages/home'
                    page.should have_selector ('h1', :text => 'Sample App') 
    end 

    it "should have the right title" do
                    visit '/static_pages/home'
                    page.should have_selector ('title', 
                  :text => "Ruby on Rails Tutorial Sample App | Home")   
    end

end

describe "Help page" do

    it "should have the content 'Help'" do
      visit '/static_pages/help'
      page.should have_selector('h1', :text => 'Help')
    end

    it "should have the right title" do
      visit '/static_pages/help' 
      page.should have_selector ('title',
        :text => "Ruby on Rails Tutorial Sample App | Help")

    end

end

describe "About page" do

  it "should have the content 'About Us'" do
        visit '/static_pages/about'
        page.should have_selector ('h1', :text => 'About Us')

      end 

  it "should have the right title" do
        visit '/static_pages/about'
        page.should have_selector ('title',
        :text => "Ruby on Rails Tutorial Sample App | About Us")
      end

end 
```

结尾

我已经用教程截屏检查了我的测试文件，它看起来是一样的。什么可能导致 RED 测试失败？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:08:49.047

不要在函数和它的左括号之间留下空格，即

```
page.should have_selector ('h1', :text => 'Sample App') 
```

应该

```
page.should have_selector('h1', :text => 'Sample App') 
```

# java - Play Framework 2.0：自定义格式化程序

> ID：10939741
> 
> 赞同：6
> 
> 时间：2012-06-07T20:56:19.223
> 
> 标签：java, playframework-2.0

我正在尝试编写一个自定义格式化程序（用于 DateTime 字段，而不是 java.util.Date 字段），但很难让它工作。我已经创建了注释，并扩展了 AnnotationFormatter 类。我在应用程序加载时调用 play.data.format.Formatters.register(DateTime.class, new MyDateTimeAnnotationFormatter()) ，但解析和打印方法永远不会触发。

我该怎么做？

编辑：有问题的代码可能会有所帮助；）

注释类（很大程度上受到 Play Framework 中包含的注释类的启发）：

```
@Target({ FIELD })
@Retention(RUNTIME)
@play.data.Form.Display(name = "format.datetime", attributes = { "pattern" })
public static @interface JodaDateTime {
    String pattern();
} 
```

自定义格式化程序类：

```
public static class AnnotationDateTimeFormatter extends AnnotationFormatter<JodaDateTime, DateTime> {

    @Override
    public DateTime parse(JodaDateTime annotation, String text, Locale locale) throws ParseException {
        if (text == null || text.trim().isEmpty()) {
            return null;
        }

        return DateTimeFormat.forPattern(annotation.pattern()).withLocale(locale).parseDateTime(text);
    }

    @Override
    public String print(JodaDateTime annotation, DateTime value, Locale locale) {
        if (value == null) {
            return null;
        }

        return value.toString(annotation.pattern(), locale);

    } 
```

为了向框架注册格式化程序，我在 Application 类的静态初始化程序中进行了此调用（可能有更好的放置位置，请随时告诉我在哪里）：

```
play.data.format.Formatters.register(DateTime.class, new AnnotationDateTimeFormatter()); 
```

我已经通过调试器单步执行了这个调用并且没有抛出任何错误，但是尽管像这样适当地注释了 DateTime 字段，格式化程序仍然没有运行：

```
@Formats.JodaDateTime(pattern = "dd.MM.yyyy HH:mm:ss")
public DateTime timeOfRequest = new DateTime(); 
```

我在这里不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T15:29:36.507

您需要注册 JodaDateTime 而不是 DateTime。

```
play.data.format.Formatters.register(JodaDateTime.class, new AnnotationDateTimeFormatter()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T16:11:17.517

我的格式化程序也有类似的问题`DateTime`。我正在从我这里注册`Global.onStart`格式化程序[。](http://www.playframework.org/documentation/2.0/JavaGlobal)似乎只是创建`Global`类并没有触发重新加载。一旦我修改了另一个触发重新加载的文件（如`--- (RELOAD) ---`控制台输出所示），它就开始工作了。停止和重新启动您的应用程序应该具有相同的效果。

# c# - 是否可以使用 WPF 将元素的可见性属性绑定到 XML？

> ID：10939742
> 
> 赞同：0
> 
> 时间：2012-06-07T20:56:21.080
> 
> 标签：c#, wpf, binding

我有一个包含大量信息的 XML，但有些信息不应该显示，除非它存在于 xml 中。我知道我可以手动执行此操作，但这并不好。

想象一下xml是这样的：

```
<root>
    <MandatoryContent />
    <OptionalContent />
</root> 
```

我想将按钮的可见性属性绑定到 OptionalContent 元素的存在。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:10:50.467

您可以将元素直接绑定到它所代表的对象，然后使用转换器将可见性设置为`Visibility.Visible`不为空时。

```
 <Label Visibility="{Binding MyObject, Converter={StaticResource NullToVisibilityConverter}} /> 
```

请务必在资源中声明您的转换器

```
<win:CustomWindow.Resources>
    <Converters:NullToVisibilityConverter x:Key="NullToVisibilityConverter" />
</win:CustomWindow.Resources> 
```

如果您想要一个很好的转换器示例，这里是来自 MSDN [http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx的 IValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:11:58.357

您不能直接绑定到 XML，但可以使用某些东西从 XML 创建对象。

LinqToXSD 是一个很好的候选者。

它的工作原理如下：您创建 Xml Schema，LinqToXSD 基于您的模式创建类，然后您可以读取 XML，它将根据您的 XML 创建整个对象树。

# c# - 设计模型以更轻松地在对象之间进行交互

> ID：10939746
> 
> 赞同：4
> 
> 时间：2012-06-07T20:56:42.260
> 
> 标签：c#, .net, design-patterns

在我的 .NET 应用程序中，数据模型包含在几个类中：Call、Phone、Connection

对于每种类型，我都有一个“**管理**”实体（CallManager、PhoneManager 等）。

每种类型都实现了一个接口，以便以后能够切换实现，或者为了测试目的模拟一些类：

```
public class CallManager : ICallManager
public class PhoneManager : IPhoneManager 
```

最后，“主”对象引用了这些管理器中的每一个，并使用它们来检索/更新所需的对象实例（例如，创建一个新的 Call 对象并将其存储在 CallManager 中，从 PhoneManager 中检索一个电话对象等）。

这样的对象依赖于以下每种类型：

```
public class AppManager
{
    public AppManager(ICallManager callManager, IPhoneManager phoneManager, etc...)
} 
```

是否有任何设计原则或模式可以促进各种对象之间的交互，以简化正确维护数据和更新数据的任务，而不需要在所有这些管理器对象之间建立一组密集的相互关系，并且没有一个类依赖于所有其他类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T21:16:28.957

从本质上讲，这听起来像是您正在使用中介者模式。但是中介者仍然需要访问对象实例。

[http://en.wikipedia.org/wiki/Mediator_pattern](http://en.wikipedia.org/wiki/Mediator_pattern)

听起来您也已经实现了工厂模式，但是阅读它可能会带来一些灵感。

[http://en.wikipedia.org/wiki/Factory_pattern](http://en.wikipedia.org/wiki/Factory_pattern)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T11:48:17.127

您可以考虑使用的另一个选项是[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。这有助于减少对象之间的硬互连。您更新一个对象，这会导致一个事件，并且原始修改对象未知的一组对象会收到此事件的通知。这里没有复杂的交叉通信。只有在创建这些对象之后才需要对这些对象进行布线。你也可以参考[这篇文章](http://www.techrepublic.com/article/object-wiring-an-observer-observable-pattern/1046175)。

# c# - 如何使用表达式设置属性和嵌套属性的属性

> ID：10939750
> 
> 赞同：2
> 
> 时间：2012-06-07T20:57:02.357
> 
> 标签：c#, reflection, lambda, expression-trees

我用谷歌搜索了问题并搜索了 SO。有很多解决方案（我发现的）都没有完成。你能帮我设置一个类的属性及其嵌套属性的属性，由 a 选择`lambda`，使用`Reflection`？

```
public class Parent
{
    public class Child
    { 
        public int Id { get; set; }
    }

    public string Name { get; private set; }
    public int Number {get; private set; }
    public Child Nested { get; set; }

    public Parent()
    {
        Nested = new Child();
    }

    public Test Set<TValue>(Expression<Func<???> func, TValue value)
    {
        // find the property name from expression
        // set the property by value
        return this;
    }
} 
```

在消费者中，我希望能够：

```
Parent t = new Parent();
t.Set<int>(t => t.Number, 6)
 .set<string>(t => t.Name, "something")
 .Set<int>(t => t.Nested.Id, 25); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T21:02:19.753

像这样的东西应该工作：

```
public class Parent
{
    public Parent Set<TValue>(Expression<Func<Parent, TValue>> func, TValue value)
    {
        MemberExpression mex = func.Body as MemberExpression;
        if(mex == null) throw new ArgumentException();

        var pi = mex.Member as PropertyInfo;
        if(pi == null) throw new ArgumentException();

        object target = GetTarget(mex.Expression);
        pi.SetValue(target, value, null);
        return this;
    }

    private object GetTarget(Expression expr)
    {
        switch (expr.NodeType)
        {
            case ExpressionType.Parameter:
                return this;
            case ExpressionType.MemberAccess:
                MemberExpression mex = (MemberExpression)expr;
                PropertyInfo pi = mex.Member as PropertyInfo;
                if(pi == null) throw new ArgumentException();
                object target = GetTarget(mex.Expression);
                return pi.GetValue(target, null);
            default:
                throw new InvalidOperationException();
        }
    }
} 
```

# python - 仅针对大文件从 python 调用 zgrep 系统后出错

> ID：10939755
> 
> 赞同：4
> 
> 时间：2012-06-07T20:57:33.933
> 
> 标签：python, grep, subprocess

我正在使用 python 脚本进行系统调用，并且仅使用该选项`zgrep`打印第一个结果。`-m1`

### 脚本：

```
#! /usr/bin/env python2.7

import subprocess

print subprocess.check_output("zgrep -m1 'a' test.txt.gz", shell=True) 
```

### 错误：

在大文件 (+2MB) 上运行脚本时，会生成以下错误。

```
> ./broken-zgrep.py

gzip: stdout: Broken pipe
Traceback (most recent call last):
  File "./broken-zgrep.py", line 25, in <module>
    print subprocess.check_output("zgrep -m1 'a' test.txt.gz", shell=True)
  File "/usr/intel/pkgs/python/2.7/lib/python2.7/subprocess.py", line 537, in check_output
    raise CalledProcessError(retcode, cmd, output=output)
subprocess.CalledProcessError: Command 'zgrep -m1 'a' test.txt.gz' returned non-zero exit status 2 
```

但是，如果我复制 python 抱怨的命令并直接在 shell 中运行它，它就可以正常工作。

```
> zgrep -m1 'a' test.txt.gz
0000000 8c82 524d 67a4 c37d 0595 a457 b110 3192 
```

该命令的退出状态是`0`在shell中手动运行后，表示成功。Python 说命令以错误代码退出`2`。

```
> echo $?
0 
```

以下是如何制作示例测试文件以重现错误。它创建一个 100000 行的随机值十六进制文件并用于`gzip`压缩它。

```
cat /dev/urandom | hexdump | head -n 100000 | gzip > test.txt.gz 
```

* * *

### 看似无关的更改将防止错误：

*   制作一个较小的测试文件

    `cat /dev/urandom | hexdump | head -n 100 | gzip > test.txt.gz`

*   不带`-m1`选项运行（警告：将垃圾邮件终端）

    `print subprocess.check_output("zgrep 'a' test.txt.gz", shell=True)`

*   在未压缩的文件上使用`grep`而不是`zgrep`

    `cat /dev/urandom | hexdump | head -n 100000 > test.txt`

    `print subprocess.check_output("grep -m1 'a' test.txt", shell=True)`

*   在中运行等效命令`perl`

    `perl -e 'print `zgrep -m1 'a' test.txt.gz`'`

* * *

我不知道为什么`python`, `zgrep`, `-m`option 和 large files 的组合会产生这个错误。如果消除了这些因素中的任何一个，则没有错误。

我对原因的最佳猜测是阅读`grep` `man`有关该`-m`选项的页面。

```
 -m NUM, --max-count=NUM
          Stop reading a file after NUM matching lines.  If the  input  is
          standard  input  from a regular file, and NUM matching lines are
          output, grep ensures that the standard input  is  positioned  to
          just  after the last matching line before exiting, regardless of
          the presence of trailing context lines.  This enables a  calling
          process  to resume a search.  When grep stops after NUM matching
          lines, it outputs any trailing context lines. 
```

我最初假设该`-m`选项会`grep`在找到 NUM 个匹配项后简单地导致退出。但也许有一些有趣的事情发生在`grep`标准输入上。这仍然不能解释为什么错误只发生在大型压缩文件中。

我最终将我的脚本从 python 移植到 perl 来解决这个问题，所以没有任何迫切需要解决方案。但我真的很想更好地理解为什么这场完美的环境风暴会失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T21:27:17.153

zgrep 只是一个 shell 脚本，它大致相当于`gunzip test.txt.gz | grep -m1 'a'`. gunzip 只是提取块并将它们传递给 grep。然后，当 grep 找到该模式时，它会退出。

如果到那时gunzip 还没有完成文件的解压缩，将来对gunzip 的stdout（连接到grep 的stdin）的写入将失败。这正是您的情况所发生的事情：

```
gzip: stdout: Broken pipe 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-20T15:27:17.130

感谢 MilesF，这篇文章完美地解释了它： [https ://blog.nelhage.com/2010/02/a-very-subtle-bug/](https://blog.nelhage.com/2010/02/a-very-subtle-bug/)

python代码应该改成这样：

```
import subprocess
import signal

print subprocess.check_output("zgrep -m1 'a' test.txt.gz", shell=True, , preexec_fn=lambda:signal.signal(signal.SIGPIPE, signal.SIG_DFL)) 
```

# sql-server - SQL Server 唯一索引和查询？

> ID：10939756
> 
> 赞同：0
> 
> 时间：2012-06-07T20:57:37.290
> 
> 标签：sql-server, indexing

我有一个简单的表，有两列，一个`int identity`主键和一个`varchar(64)`. 我在`VarChar`列上放置一个唯一约束/索引以强制唯一性。常规查询模式是在列中查询一个值，然后在连接中使用 PK 值来查找其他表中的其他数据。

使非聚集索引唯一是否有任何速度优势？

将 PK 列包含在非聚集索引中是否有意义，或者它已经存在，因为它首先是聚集 PK？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:00:37.220

您不需要将 PK 添加到任何非聚集索引。正如您所指出的，所有非聚集索引都已包含 PK。

是的，在查询该索引时具有唯一约束将提高性能，因为如果查询优化器知道只有一个匹配项，它可以使用不同的机制来查找您的数据。

# python - 如何从 python 中的命名元组中获取名称？

> ID：10939758
> 
> 赞同：29
> 
> 时间：2012-06-07T20:57:44.543
> 
> 标签：python

我创建了一个这样的命名元组：

```
from collections import namedtuple
spam = namedtuple('eggs', 'x, y, z')
ham = spam(1,2,3) 
```

然后我可以使用例如访问火腿元素

```
>>> ham.x
1
>>> ham.z
3 
```

在口译员中，

```
>>> ham
eggs(x=1, y=2, z=3) 
```

但是，如果我只想得到“鸡蛋”怎么办？我能想到的唯一方法是

```
>>> ham.__repr__.split('(')[0]
'eggs' 
```

但这似乎有点乱。有更清洁的方法吗？

如果在不诉诸私有方法的情况下无法访问命名元组，为什么命名元组对它们具有这种“鸡蛋”方面？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-07T20:59:54.633

可以获取`__name__`类的属性：

```
>>> type(ham).__name__
'eggs' 
```

（这里使用[内置`type()`来](http://docs.python.org/library/functions.html#type)获取类）。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2017-03-29T00:48:56.947

关于命名元组属性的主题：

```
 >>> ham._fields
    ('x', 'y', 'z') 
```

有时知道是有用的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T21:02:53.967

基于 python 的[doc](http://docs.python.org/library/collections.html#collections.namedtuple)，`namedtuple`为您提供了一个名为 'eggs' 的新元组子类

所以本质上你需要类名

并`type(ham).__name__`会给你班级名称

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T21:00:23.310

```
>>> ham.__class__.__name__
'eggs' 
```

# sql - 插入语句不为一个字段插入值

> ID：10939760
> 
> 赞同：5
> 
> 时间：2012-06-07T20:57:47.913
> 
> 标签：sql, sql-server-2008, tsql

所以我正在为我正在开发的程序编写一些 SQL，我遇到了一个我以前从未真正见过的奇怪问题。这是给我带来麻烦的查询：

```
insert into [db].[dbo].[table] (JobNum, JobSeq, OperationNumber, WorkCenter,
 ResourceGroup, Material, MaterialQuantity, MaterialCost, LbrHoursPerPiece, 
 ExtendedDescription, PreviousMaterial, UniqueID) 
values ('J000001234', 1234, 123, 'UFAN', 'FANASSY', '12345678', 
 4, 50, 1, 'DESC', '', '') 
```

然后我从同一张表中进行选择：

```
SELECT * FROM [db].[dbo].[table]
where JobNum = 'J000001234' 
```

这就是返回的内容：

![查询结果](../Images/aa01f427cc2e19d076aab2b2ad629b6f.png)

出于某种原因，即使我给它一个值 50，MaterialCost 字段显示为 NULL，我无法弄清楚为什么当其他所有内容都正确插入时。这是表格设计，以防万一：

![表设计](../Images/8f561f4c0138655ddb951ae5a3c55975.png)

有什么想法吗？

编辑：我想指出，虽然这是我在 .NET 代码中使用的查询，但现在我只在 SQL Server Management Studio 中对其进行测试。

此外，评论者要求创建查询，因此：

```
...
CREATE TABLE [dbo].[table](
[JobNum] [nvarchar](20) NOT NULL,
[JobSeq] [int] NOT NULL,
[OperationNumber] [int] NULL,
[WorkCenter] [nvarchar](6) NULL,
[ResourceGroup] [nvarchar](30) NULL,
[Material] [nvarchar](30) NULL,
[MaterialQuantity] [decimal](18, 8) NULL,
[MaterialCost] [decimal](18, 5) NOT NULL,
[LbrHoursPerPiece] [decimal](10, 5) NULL,
[ExtendedDescription] [nvarchar](300) NULL,
[PreviousMaterial] [nvarchar](300) NULL,
[UniqueID] [varchar](200) NULL
) ON [PRIMARY]

GO

SET ANSI_PADDING ON
GO

ALTER TABLE [dbo].[Table] ADD  CONSTRAINT     [DF_Table_MaterialCost]  DEFAULT ((0.00)) FOR [MaterialCost]
GO 
```

编辑 2：所以我使用 CREATE TABLE 查询并用它来创建另一个表 tableTEST，它与故障表相同。在 TEST 表上执行相同的查询时，它工作正常。我还想指出，没有获得正确数据的 MaterialCost 字段是在最初创建后很久才添加到表中的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T13:49:53.930

最后，我能够在没有发现根本原因的情况下解决问题。MaterialCost 字段是在它已经有相当多的数据之后很久才添加到表中的，所以显然那里发生了一些奇怪的事情。

为了解决我的问题，我创建了原始表的副本，将所有数据复制到新表中，然后删除了原始表。之后，插入语句正常工作。所以就像我说的，它现在可以工作了，但我真的没有任何关于根本原因的细节，除了那个领域是新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:01:29.747

删除该列上的允许空值并查看程序是否引发异常。我相信它会的。有些地方您的代码没有在该列中输入值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T21:48:31.240

检查触发器，如果​​它不符合业务规则，则可能会删除您的值。

# php - Apache 奇怪地处理字符

> ID：10939762
> 
> 赞同：3
> 
> 时间：2012-06-07T20:58:01.237
> 
> 标签：php, apache, codeigniter, mod-rewrite

好的，我刚刚将服务器从共享主机切换到专用服务器，除了一个问题外，一切似乎都运行相同。在我开始之前，我应该提到两台服务器在 LAMP 堆栈上运行完全相同的 codeigniter 配置

我认为仅通过示例来展示是最容易的，因此它们是：

**URI：** /search/term/%
**新服务器结果：**错误请求 - 服务器错误
**旧服务器结果：**执行搜索并返回 % 的结果

**URI：** /search/term/%20
**新服务器结果：**搜索并返回空格的结果（%20 的翻译）
**旧服务器结果：**搜索并返回空格的结果（%20 的翻译）

**URI：** /search/term/%2F
**新服务器结果：**未找到 - 服务器错误
**旧服务器结果：**搜索并返回 / 的结果（%2F 的翻译）

我希望服务器在这些实例中产生结果，就像以前的服务器一样。

* * *

**UPDATE**
Senario #3 已解决，但第一个问题仍然存在，我无法弄清楚。我想添加更多关于它的细节，以便深入了解它。

确切的错误消息是：
***400 Bad Request Bad；您的浏览器发送了此服务器无法理解的请求。***

1.  当我检查 apache 错误日志时，那里没有关于此错误的任何信息。
2.  结果在所有浏览器中以及在清除缓存后都是相同的。
3.  最后，我很确定我正确设置了**AcceptPathInfo On**，因为当我转到 url: /robots.txt/klsdfj （不是真实位置）时，它会生成 robots.txt 文件的内容。据我所知，这是该指令的正确功能。

如果需要任何进一步的信息，请告诉我，我很乐意提供。谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T21:07:06.013

我认为你应该看看 apache 指令[AllowEncodedslashes](http://httpd.apache.org/docs/2.2/mod/core.html#allowencodedslashes)或这个：[AcceptPathInfo](http://httpd.apache.org/docs/2.2/mod/core.html#acceptpathinfo)

问候

咪咪

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:02:47.103

如果您从表单传递该文本，您可能需要`encodeURI()`使用 Javascript 将文本传递给服务器。然后服务器（PHP）可以使用`rawurldecode()`. 使用您的示例，`%20`将成为`%2520`URL，然后服务器将对其进行解码`%20`。

[http://www.php.net/manual/en/function.rawurldecode.php](http://www.php.net/manual/en/function.rawurldecode.php)

# c - 样本“C”挑战的方法

> ID：10939773
> 
> 赞同：0
> 
> 时间：2012-06-07T20:58:46.007
> 
> 标签：c, algorithm, data-structures

我最近被问到一个理论上的 C 问题，我想知道解决它的最佳方法是什么：

如果我有一份包含 10 个单词的文档，那么确定是否有重复单词以及是否有重复单词的最佳方法是什么？我将如何跟踪有多少单词？

任何有关如何处理此问题的见解都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T21:02:34.590

关键字是“十”：这意味着使用两个嵌套循环检查其前面的每个单词的最简单方法就可以了。例如，如果这个数字是 10000000，则需要使用哈希表、堆或排序数组的方法。然而，只有十个单词，您不需要构建任何复杂的东西 - 只需要基本的 C 字符串读取/比较知识。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-13T09:41:42.800

像这样的理论面试问题总是很少处理（比如 10 个字）。然而，这个数字没有任何意义。它的存在是为了将那些真正能够*以一般形式*思考问题的候选人与那些简单地重复他们在互联网上找到的固定面试问题的固定答案的候选人区分开来。

最好的软件公司只会偏爱**可扩展**的解决方案。因此，如果你的答案很简单，你将在面试中获得最高分，但也可以扩展到任何规模的问题（或者，在这种情况下，文档）。因此，排序，循环内循环，O(n^2) 复杂度，都忘记了。如果你在面试时向一家领先的软件公司提出任何类似的解决方案，你就会失败。

您的特定问题是检查您是否了解**Hash Tables**。这个问题最有效的解决方案可以写成伪代码如下：

```
1\. Initialise a new hash table.
   For each word in the document...
2\.     Generate a hash key for the word.
3\.     Lookup the word in the hash table using the key. If it is found,
4\.         Increment the count for the word.
       Otherwise,
5\.         Store the new word in table and set its count to one. 
```

上述解决方案**最重要的好处**是**只需要对文档进行一次扫描**。没有将单词读入内存然后进行处理（两次扫描），没有循环中的循环（多次扫描），没有排序（甚至更多遍）。恰好在文档通过一次之后，如果您读出哈希表中的键，则每个单词的计数会告诉您每个单词在文档中出现的确切次数。任何计数大于 1 的单词都是重复的。

该解决方案的秘诀在于它使用了哈希表。散列密钥的生成（步骤 2）、密钥查找（步骤 3）和密钥存储（步骤 5）可以实现为接近*恒定时间的*操作。这意味着这些步骤所花费的时间几乎不会随着输入集的大小（即字数）的增长而改变。这意味着无论是文档中的第 10 个单词，还是第 1000 万个单词，将该单词插入哈希表（或查找它）将花费大致相同的*非常短*的时间。在这种情况下，我们在第 5 步中额外记录了每个单词的频率。众所周知，增加一个值是一种非常有效的固定时间操作。

此问题的任何解决方案都必须至少扫描文档中的所有单词一次。由于我们的解决方案只处理每个单词一次，并且所有单词的处理*时间都**差不多*，因此我们说我们的解决方案性能*最佳并**线性*扩展，产生*O(n) 性能*（简单地说，处理 1,000,000 个单词大约需要 1000比处理 1000 个单词要长几倍）。总而言之，该问题的可扩展且有效的解决方案

 **** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T21:02:18.083

1.  使用 scanf 将单词读入字符串数组
2.  对于每个单词，使用 strncmp 与列表后面的其他单词进行比较

有速度和空间优化，但我（通常）为了简单而优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T23:54:28.690

对于更大的实现，您可以使用哈希表并检查冲突

对于较小的 n（例如 n = 10），我们可以遍历元素并将它们添加到数组中。对于每个元素，检查数组以查看它是否重复。

检查数组在 O(n) 中，遍历 10 个元素中的每一个在 O(n) 中。由于我们可以简单地使用嵌套循环来实现这一点，因此我们可以在 O(n^2) 时间复杂度内执行此操作。这已经足够了，因为在如此小的 n 值下，性能影响可以忽略不计。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T15:44:32.007

由于单个单词的长度可能“很小”，我将从基数排序[http://en.wikipedia.org/wiki/Radix_sort](http://en.wikipedia.org/wiki/Radix_sort)开始，这需要 O(nk) 时间，其中 k 是最大单词长度。在这种情况下，您肯定希望首先根据长度（最多 n 个）将单词分类到单独的列表中。

因为您只对重复项感兴趣，您可以丢弃长度为 1 的任何列表（在此步骤或任何后续步骤中）。

对于每个列表，比较每个列表成员的最后一个字符，为每个看到的不同字符创建一个新的单词列表（最多 26 个，假设单词都是 ASCII 字符），截断最后一个字符。同样，抛出长度为 1 的列表并递归地对新列表进行排序。

在最坏的情况下（所有单词的长度相同，并且仅在第一个字符上有所不同，假设 LSD 基数排序）您将获得 O(nk) 时间。在最好的情况下（所有单词都有不同的长度）你会得到 O(n) 时间。在实际情况下，您可能会比 O(nk) 时间好得多，因此该解决方案应该可以很好地扩展到更长的单词列表。***

# php - time() 的默认时间单位是什么？

> ID：10939776
> 
> 赞同：1
> 
> 时间：2012-06-07T20:59:01.160
> 
> 标签：php, time, default-value

我的代码如下所示：

```
$CreateTimeFrom = gmdate("Y-m-d\TH:i:s",time()-20000) 
```

但是 -20000 是什么意思？那是20000秒之前吗？还是分钟？默认值是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:00:21.513

它以秒为单位，因为[time()](http://php.net/manual/en/function.time.php)返回一个 unix 时间戳，这是自 1970 年 1 月 1 日以来的秒数。

> Unix 时间或 POSIX 时间是用于描述时间瞬间的系统，定义为自 1970 年 1 月 1 日午夜协调世界时 (UTC) 以来经过的**秒数。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:00:10.830

这意味着 20000 秒（参见[Unix Time](http://en.wikipedia.org/wiki/Unix_time)）并`time()`返回一个 unix 时间戳。

> Unix 时间或 POSIX 时间是用于描述时间瞬间的系统，定义为自协调世界时 (UTC) 1970 年 1 月 1 日午夜以来经过的秒数

*   1 分钟 = 60
*   1 小时 = 3600
*   1 天 = 24 * 3600

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T21:27:09.007

`time()`是当前日期的最后一秒。 `time()-20000`是当前时钟时间减去 20000 秒，因此提前了 333.33 分钟。

如果您遇到意外的结果，那么值得一试

```
date_default_timezone_set() 
```

# c++ - 使用 libcurl 编写 HTTPS SOAP 客户端

> ID：10939781
> 
> 赞同：0
> 
> 时间：2012-06-07T20:59:29.003
> 
> 标签：c++, c, soap, https, libcurl

我一直在使用 libcurl 进行一些网页抓取，现在我想用它来编写一个 HTTPS 客户端。到目前为止，我可以通过实现 write_data() 回调函数将接收到的数据写入文件来使用 libcurl（如 libcurl 教程中所述）。我想知道的是，是否可以从 char 缓冲区获取服务器响应，或者进行设置以便将响应写入 char 缓冲区？从文件中读取响应并不是世界末日，但如果我可以直接从内存中获取它并立即解析 xml，那会容易得多。总的来说，我在这里和网上都进行了相当多的搜索，但我还没有找到任何东西，我想我会在这里问一下，以防万一有什么“技巧”可以得到我想要的东西。我猜不会，但我认为无论如何都值得问这个问题。

**编辑：**我正在用 C++ 编写这个

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:26:51.630

您的意思是像[getinmemory.c](http://curl.haxx.se/libcurl/c/getinmemory.html)示例那样下载数据并将其保存在 malloc 的缓冲区中？

# iphone - phpMyAdmin的手机版——我知道它是一个界面

> ID：10939787
> 
> 赞同：4
> 
> 时间：2012-06-07T20:59:56.353
> 
> 标签：iphone, mysql, phpmyadmin

我只是在移动版本的[phpMyAdmin](http://en.wikipedia.org/wiki/PhpMyAdmin)或其他产品之后。我想从我的网络浏览器访问我的数据库，因为我经常需要检查一些东西。

最简单的方法是使用 safari 访问 phpMyAdmin，但由于我使用的是 iPhone，因此很难导航。

那个界面有手机版吗？或者其他有的产品？

直到今天我的搜索都失败了:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-05-24T22:56:35.777

我一直在寻找同样的方法 - 并找到了这个很好的解决方案：

*   [Adminer，](https://www.adminer.org/en/)一个非常小的单文件 phpMyAdmin 替代品
*   [一个插件](https://github.com/pematon/adminer-theme)，使其响应和移动友好。

似乎工作正常，快速且易于在移动中使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:11:12.013

您可能想查看：

**应用商店中**Ollie Ket的****控制面板**， http: [//itunes.apple.com/app/control-panel/id339415513](http://itunes.apple.com/app/control-panel/id339415513?mt=8) ?mt=8 。**

 **还，

****Dayana Networks Ltd**的**CP 控制面板**。同样在 AppStore， http: [//itunes.apple.com/app/cp-control-panel/id437405473 ?mt=8](http://itunes.apple.com/app/cp-control-panel/id437405473?mt=8)**

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-17T05:32:46.573

为 phpMyAdmin 制作移动主题非常困难，如果有人使用一些 CSS 框架为移动主题制作主题或类似 jQuery Mobile 或 jQTouch 之类的东西，我不会感到惊讶，而且他/她肯定会对所有 AJAX 感到很痛苦源代码中的东西。

无论如何，您可以找到很多用于管理 MySQL 数据库的 iOS 应用程序： [https ://itunes.apple.com/us/app/mysql-editor-pro/id414309098](https://itunes.apple.com/us/app/mysql-editor-pro/id414309098)

[https://itunes.apple.com/us/app/mysql-database-client/id412789347](https://itunes.apple.com/us/app/mysql-database-client/id412789347)

[https://itunes.apple.com/us/app/mysql-mobile-database-client/id397060484](https://itunes.apple.com/us/app/mysql-mobile-database-client/id397060484)

[https://itunes.apple.com/us/app/imysqlprog/id424343762](https://itunes.apple.com/us/app/imysqlprog/id424343762)

[https://itunes.apple.com/us/app/mysql-client/id490931147](https://itunes.apple.com/us/app/mysql-client/id490931147)

显然，它们都缺少很多 phpMyAdmin 功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-01T03:54:02.393

Navicat 刚刚发布了 iOS 的 MySQL 数据库管理工具的移动版本。它是免费的，您可以在以下位置下载：[https ://itunes.apple.com/app/navicat-for-mysql/id688128940?ls=1&mt=8](https://itunes.apple.com/app/navicat-for-mysql/id688128940?ls=1&mt=8)

凯文****

# kml - 将 KML 文件导入 Fusion Tables 时，我丢失了列

> ID：10939789
> 
> 赞同：0
> 
> 时间：2012-06-07T21:00:09.517
> 
> 标签：kml, google-fusion-tables

尝试从 KML 文件创建 Google Fusion 表时遇到了一些麻烦。导入完成后，我注意到我在原始 KML 中丢失了一些数据尊重的“列”。请注意，当我使用 Google 地球查看 KML 时，一切正常

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T13:30:34.247

所有属性都包含在“描述”列中。这实际上是一个 html 对象，当您单击以在地图视图中获取信息表时，您可以看到每个条目/行的属性。

# grails - 自定义 RoleVoter 和访问 UserRole 以进行额外的投票检查

> ID：10939792
> 
> 赞同：2
> 
> 时间：2012-06-07T21:00:18.037
> 
> 标签：grails, spring-security

[采用此处](https://stackoverflow.com/questions/10875042/spring-security-user-roles-per-organization)提供的建议，我实现了自己的 RoleVoter 类，它扩展了 RoleVoter，我需要添加的额外检查是用户、角色和组织都根据我存储在会话中的组织排列。

我有以下 UserRole 类：

```
class UserRole implements Serializable {
  User user
  Role role
  Organization organization
  ....
} 
```

这是我的 OrganizationRoleVoter 类：

```
class OrganizationRoleVoter extends RoleVoter {

  @Override
  public int vote(Authentication authentication, Object object, Collection<ConfigAttribute> attributes) {

    int result = ACCESS_ABSTAIN
    Collection<? extends GrantedAuthority> authorities = extractAuthorities(authentication)

    attributes.each {ConfigAttribute attribute ->
      if (this.supports(attribute)) {
        result = ACCESS_DENIED

        authorities.each {GrantedAuthority authority ->
          //TODO this should also check the chosen organization
          if (attribute.attribute.equals(authority.authority)) {
            return ACCESS_GRANTED
          }
        }
      }
    }
    return result
  }

  Collection<? extends GrantedAuthority> extractAuthorities(Authentication authentication) {
    return authentication.getAuthorities();
  }

} 
```

正如您在我的 TODO 中看到的那样，这也是我需要说的“这里授予的权限也符合我在会议中放置的组织。真的不知道如何实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:50:40.193

到目前为止，这是我解决它的方法。这似乎可行，但我总是愿意改进：

```
class OrganizationRoleVoter extends RoleVoter {

  @Override
  public int vote(Authentication authentication, Object object, Collection<ConfigAttribute> attributes) {

    int result = ACCESS_ABSTAIN
    Collection<? extends GrantedAuthority> authorities = extractAuthorities(authentication)
    GrailsWebRequest request = RequestContextHolder.currentRequestAttributes()
    Organization selectedOrganization = (Organization) request.session.getAttribute("selectedOrganizationSession")

    attributes.each {ConfigAttribute attribute ->
      if (this.supports(attribute)) {
        result = ACCESS_DENIED
        for (GrantedAuthority authority : authorities) {
          if (attribute.attribute.equals(authority.authority)) {
            def user = User.findByUsername(authentication.name)
            def role = Role.findByAuthority(authority.authority)
            if (UserRole.findByUserAndOrganizationAndRole(user, selectedOrganization, role)) {
              result = ACCESS_GRANTED
              break
            }
          }
        }
      }
    }
    return result
  }

  Collection<? extends GrantedAuthority> extractAuthorities(Authentication authentication) {
    return authentication.getAuthorities();
  }

} 
```

# subquery - 将 ActivityHistory 作为子查询查询时的 SOQL 问题..

> ID：10939796
> 
> 赞同：7
> 
> 时间：2012-06-07T21:00:24.497
> 
> 标签：subquery, salesforce, soql

我正在查询 ActivityHistory，看来您只能将其作为 SUBQUERY 的对象来查询其他对象。没关系 - 我将查询更改为针对 Account 对象进行查询，并在子查询中使用 ActivityHistory。似乎工作正常。但是在测试中，我发现了一个 ActivityHistory 子查询返回超过 200 个结果的情况。我开始收到此错误：

```
    FATAL_ERROR|System.QueryException：实体类型 ActivityHistory 不支持查询
```

...在调试日志中。这似乎只是一个帐户在 ActivityHistory 对象中有超过 199 个相关条目的问题。为了查看这是否是原因，我尝试在子查询中放置一个 LIMIT 199 和一个 LIMIT 200 子句。果然，当我使用 199（或更低）时，它工作正常。使用 200（或更高）会导致上述错误。

我的代码如下。需要注意的一件事是查询在 FOR 循环中。关于为什么它会为 LIMIT 子句的高值产生错误的一个理论是，也许 200 是 FOR 循环将查询分批成单独块的点 - 也许第二个块不符合“子查询”的条件（因为它是单独运行的？） - SalesForce 不喜欢这样。

哦，还有一件事：相同的代码似乎在匿名 Apex 编辑器中运行良好（尽管我必须进行一些修改 - 用显式值替换内联变量）。奇怪的是匿名编辑对此非常满意，但 SFDC 服务器不喜欢它。

无论如何，我要进行更多故障排除。有人有任何见解吗？

谢谢！

代码：

```
    // ActivityHistory 的帐户
    for (Account a : [ // 不能直接查询 ActivityHistory；只能在针对另一个对象类型的子查询中
        选择
             ID
            ，姓名
            ，（ 选择
                    活动日期
                   ,活动类型
                   ,CRM_Meeting_Type__c
                   ，描述
                   ,CreatedBy.Name
                   ，地位
                   ,什么ID
                来自活动历史
                WHERE ActivityType IN :included_activity_history_types
                //限制 200
            )
        FROM Account WHERE Id = :accountId
    ]) {
     for (ActivityHistory ah : a.ActivityHistory) {
        if ( ah.WhatId==null ) { 继续; } // 跳过添加没有 WhatId 的活动

        if (((string)ah.WhatId).startsWith('001')) { // 只添加 ActivityHistory 直接绑定到一个 Account （上面的查询也拉回了相关 Oppty 上的所有 ActivityHistory）
            活动.add(新的ActivityWrapper(ah));
        }
     }
    }

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T15:19:45.147

好问题；我不完全确定为什么它会在 Execute Anonymous 中工作，而不是在您的 Apex 课程中。

不过，我确实有一些建议。我发现从`for`循环中分离出 SOQL 查询很有帮助，然后使用该[`getSObjects`](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_methods_system_sobject.htm)方法获取返回的子查询数据。使用这种方法，我已经成功地在一个 Apex 类中检索了 200 多条 ActivityHistory 记录。

注意：一个区别（你的代码和我之前的工作方式之间）是我没有在 ActivityHistories WHERE 子句中按 ActivityType 过滤。所以，如果下面的代码抛出相同的错误，我会检查下一个。

```
List<Account> AccountsWithActivityHistories = [  
    // you can't query ActivityHistory directly; only in a subquery against another object type
    SELECT
         Id
        ,Name
        ,( SELECT
                ActivityDate
               ,ActivityType
               ,CRM_Meeting_Type__c
               ,Description
               ,CreatedBy.Name
               ,Status
               ,WhatId
            FROM ActivityHistories
            WHERE ActivityType IN :included_activity_history_types
            //LIMIT 200
        )
    FROM Account WHERE Id = :accountId
];

// ActivityHistories on Account
for (Account a : AccountsWithActivityHistories) {
  for (ActivityHistory ah : a.getSObjects('ActivityHistories')) {
    // skip adding activities without a WhatId
    if ( ah.WhatId==null ) { continue; }  

    if (((string)ah.WhatId).startsWith('001')) { 
        // only add ActivityHistory's tied directly to an Account 
        // (the query above pulls back all ActivityHistory's on related Oppty's as well)
        activities.add(new ActivityWrapper(ah));
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-13T02:36:37.660

这可能已经过时了，但我遇到了这个问题，想把我在另一个论坛上找到的解决方案扔出去。

activityhistory 对象只是一个设置为“已关闭”的任务或事件。因此，您可以查询位于“活动历史”后面的对象并将其附加到新联系人或潜在客户下方，这会将相同的对象存储为新的“活动历史”对象。

```
list<Task> activityHistory = [SELECT Id,WhoId FROM Task t WHERE t.WhoId = 'randomID' and t.Status != 'Open'];

for(Task currentAH : activityHistory){
    system.debug(currentAH.Id);
} 
```

上面的代码带回了所有“任务”活动历史对象，并允许我使用 WhoId 将它们重新分配给另一个联系人/潜在客户。

# android - 使用超声波确定 2 个移动设备的相对位置

> ID：10939801
> 
> 赞同：4
> 
> 时间：2012-06-07T21:00:47.423
> 
> 标签：android, ios, audio, mobile, signal-processing

我正在考虑使用超声波（听不清）作为确定 2 个移动设备（可以在 Android 或 iOS 设备上）的相对位置的选项。我的应用程序将安装在这两种设备上。它的用户将面对面（他们的最大距离为 1,5 m），将设备彼此面对。

我想知道**是否有可能创建一个有效的系统，其中一个应用程序将发送超声波/听不见信号，而其他用户的应用程序将接收它并确定该特定用户（站得很近）发送它（发出声音） .**

注意：在我的情况下，声音可以听得见，但听得越少越好（因此我使用了超声波这个词）。在这一点上，此类应用程序的电池消耗并不重要（尽管我会很感激任何信息）。我只想知道这是否可能以及这种应用程序的效率如何。我还想发送（如果可能的话）几个字节的信息，但系统也应该在有一些环境噪音的地方工作。

任何人都可以回答此类问题/分享有关此主题的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:25:19.827

在此处查看相关问题：[使用超声波传输数据](https://stackoverflow.com/questions/6235486/transfering-data-using-ultrasound)

我绝对认为这是可能的。

作为一个起点，我会查看[这个项目](http://people.ece.cornell.edu/land/courses/ece4760/FinalProjects/s2010/gjm76_asr96/gjm76_asr96/index.html)和[维基百科页面](http://en.wikipedia.org/wiki/On-off_keying)以了解它们的传输方法。您将在您的软件音频处理代码中应用他们的处理概念。

# javascript - Node.js Github API 基本用户输出通过服务器到网页

> ID：10939805
> 
> 赞同：1
> 
> 时间：2012-06-07T21:01:04.650
> 
> 标签：javascript, node.js, github-api

我是新手，正在尝试 github API。我尝试了这个示例，它基本上将用户信息记录到控制台。但是，我希望它作为来自正在通过节点运行的服务器的响应返回。下面给出的是代码：

```
"use strict";
var http = require('http');
http.createServer(function (req, res) {
  res.writeHead(200, {'Content-Type': 'text/plain'});
 // res.end('Hello World\n');
}).listen(1337, '127.0.0.1');
console.log('Server running at http://127.0.0.1:1337/');

var Client = require("github");

var github = new Client({
    debug: true,
    version: "3.0.0"
});

github.authenticate({
    type: "basic",
    username: "user",
    password: "password"
});

github.user.get({}, function(err, res) {
    console.log("GOT ERR?", err);
    console.log("GOT RES?", res);

    github.repos.getAll({}, function(err, res) {
        console.log("GOT ERR?", err);

        console.log("GOT RES?", res);

    });
}); 
```

怎么做到呢？

# scala - 如何在 Scala 中更改继承方法的访问级别

> ID：10939807
> 
> 赞同：4
> 
> 时间：2012-06-07T21:01:11.440
> 
> 标签：scala

我正在扩展一个`Lib`无法直接修改的现有库（让我们称之为）。

有什么方法可以使某些方法从`Lib`私有中获取，以使它们不能在子类之外访问？

例如，如果我有：

```
class A extends Lib {
    def fun(i: int) = someLibFunction(i) //someLibFunction is inherited from Lib
} 
```

`someLibFunction`尽管它在 Lib 中是公共/受保护的，但我如何在 A 中将其设为私有？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T21:06:33.437

这将打破面向对象编程的基本基础——您可以在任何需要超类的地方使用子类（多态性）。

如果允许缩小方法的可见性（例如 from `public`to ），则不允许`private`接收 的实例的客户端代码接收。客户端代码期望是可访问的，并且子类不能更改该合同。`Lib``A extends Lib``someLibFunction()`

话虽如此，Scala 和任何面向对象的语言都不允许在子类化时缩小任何方法的可见性。请注意，扩大可见性（例如从`protected`到`public`是完全可能的）。

换句话说，您没有**扩展**现有的 API（库）。您正在创建具有不同合同的完全不同的 API（库）。

最后一个例子：你有一个`Vehicle`有 a`capacity()`和 can的类`drive()`。可以通过添加一些新功能`Car`来扩展，例如. 但不能扩展和隐藏驱动能力。可以*包含*（反之亦然），也可能有共同的父母，如.`Vehicle``refuel()``Container``Vehicle``Container` *`Vehicle``Container``Vehicle``CanHoldCargo`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-23T06:12:30.560

当您使用 3rd 方库时，有时最好将其包装在代码中的单个点中。

这将使管理该第 3 方软件中可能的未来更改变得更加容易（如果您选择升级版本）。

自从 Scala 出现以来，这一直是一个很好的做法。

一旦你包装了你的 3rd 方库，你可以很容易地从你自己的代码中屏蔽你不想访问的 API 部分（只是不要给他们一个包装方法/类......）。*

# animation - Cocos2d-Android Sprite 滑入滑出动画

> ID：10939812
> 
> 赞同：1
> 
> 时间：2012-06-07T21:01:36.397
> 
> 标签：animation, slide, cocos2d-android

谁能指导我如何在 Cocos-2d Android 中创建左滑和右滑动画，谢谢

我是 Android-Cocos2d 的新手，我一直在使用 IOS Cocos2d 和 Box2d，但这是我第一个使用 android 的游戏，而且 Cocos-2d Android 没有任何好的文档，所以很难让事情正常工作。有人可以帮我解决这个问题吗，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:43:03.043

嗨，您可以像我在这里使用的这种方式使用动画，我必须制作动画才能打开窗帘，所以在这里我与您分享我的代码，您可以使用这样的 plist 文件制作任何类型的动画，所以希望它对您有所帮助一切顺利

此方法在设置窗帘打开的背景和动画时调用...

```
 public void curtainAnimation(Object sender) {

            CCSpriteFrameCache.sharedSpriteFrameCache().addSpriteFrames("levelBackgrounds/level4_bg1.plist");

            CCSpriteFrameCache.sharedSpriteFrameCache().addSpriteFrames("levelBackgrounds/level4_bg2.plist");

            CCSpriteFrameCache.sharedSpriteFrameCache().addSpriteFrames("levelBackgrounds/level4_bg3.plist");

            CCAnimation curtainAnim = CCAnimation.animation("", 2.0f);

            for (int i = 300; i <= 500; i++) {
                curtainAnim.addFrame(CCSpriteFrameCache.sharedSpriteFrameCache().spriteFrameByName("curtain.0" + i + ".png"));
            }
            CCAction curtainOpenAction = CCAnimate.action(6, curtainAnim, false);
            curtainClose.runAction(curtainOpenAction);

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:54:56.483

您好，您可以将其用于左滑动 `moveLeft = [CCMoveBy actionWithDuration:0.7 position:ccp(10, 0)];` 对于右滑动，您可以使用此代码 `moveRight = [CCMoveBy actionWithDuration:0.4 position:ccp(-200, 0)];`

# c# - 如何遍历我的类属性并获取它们的类型？

> ID：10939814
> 
> 赞同：2
> 
> 时间：2012-06-07T21:01:45.007
> 
> 标签：c#, class, reflection, properties

我想遍历我的类的属性并获取每个属性类型。我大部分都得到了它，但是当尝试获取类型时，我得到了类型反射，而不是获取字符串、int 等。有任何想法吗？让我知道是否需要更多背景信息。谢谢！

```
using System.Reflection;

Type oClassType = this.GetType(); //I'm calling this inside the class
PropertyInfo[] oClassProperties = oClassType.GetProperties();

foreach (PropertyInfo prop in oClassProperties)  //Loop thru properties works fine
{
    if (Nullable.GetUnderlyingType(prop.GetType()) == typeof(int))
        //should be integer type but prop.GetType() returns System.Reflection
    else if (Nullable.GetUnderlyingType(prop.GetType()) == typeof(string))
        //should be string type but prop.GetType() returns System.Reflection
    .
    .
    .
 } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T21:03:54.410

首先，你不能`prop.GetType()`在这里使用——这是*PropertyInfo*的类型——你的意思是`prop.PropertyType`.

其次，尝试：

```
var type = Nullable.GetUnderlyingType(prop.PropertyType) ?? prop.PropertyType; 
```

无论它是可空的*还是*不可空的，这都会起作用，因为`null`如果不是，GetUnderlyingType 将返回`Nullable<T>`。

然后，在那之后：

```
if(type == typeof(int)) {...}
else if(type == typeof(string)) {...} 
```

或替代方案：

```
switch(Type.GetTypeCode(type)) {
    case TypeCode.Int32: /* ... */ break;
    case TypeCode.String: /* ... */ break;
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T21:02:58.847

您快到了。该类`PropertyInfo`有一个属性`PropertyType`，它返回属性的类型。当您调用实例时`GetType()`，`PropertyInfo`您实际上只是得到了`RuntimePropertyInfo`您正在反映的成员的类型。

因此，要获取所有成员属性的类型，您只需执行以下操作： `oClassType.GetProperties().Select(p => p.PropertyType)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T21:03:49.183

使用 PropertyType 属性。

[http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.propertytype](http://msdn.microsoft.com/en-us/library/system.reflection.propertyinfo.propertytype)

# visual-studio-2010 - SQL Server 角色提供程序单元测试期间出现“角色管理器功能尚未启用”错误

> ID：10939815
> 
> 赞同：3
> 
> 时间：2012-06-07T21:01:46.650
> 
> 标签：visual-studio-2010, unit-testing, asp.net-membership, membership-provider, roleprovider

我有一个用于包装 SQL Server 成员资格和角色提供程序 API 的类库。我试图在我的 MSTest 单元测试类中测试我的第一个方法，但我收到错误消息“角色管理器功能尚未启用”。

我在测试项目中添加了几种不同类型的配置文件，希望能够连接所有内容，但它似乎并不喜欢它。

如何将包含所有提供程序信息的配置文件正确连接到测试项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T02:24:31.407

我只需将配置项添加到 App.config 文件而不是 Web.config 文件。我刚刚通过复制 Web.config 移动了所有提供程序元素。我只是在我的测试项目中复制/粘贴到 App.config 中，之后它工作得很好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T01:15:53.680

我从谷歌偶然发现，对于我的 asp.net Web 应用程序，我需要在 web.config 中启用 roleManager，这个示例用于使用 Windows 身份验证/角色。希望它可以帮助别人。

```
<authentication mode="Windows"/>
<identity impersonate="true" />
<roleManager enabled="true" defaultProvider="AspNetWindowsTokenRoleProvider"/> 
```

# core-data - 无论删除规则如何，都无法删除核心数据实体

> ID：10939816
> 
> 赞同：0
> 
> 时间：2012-06-07T21:01:54.043
> 
> 标签：core-data, ios5

我正在尝试删除一个核心数据实体，无论我使用什么删除规则，它都不起作用。它根本不做任何事情。

我正在使用 Firefox 的 Sqlite 插件来浏览核心数据数据库，并且在删除代码运行后我可以看到那里的所有行。

我的删除代码如下所示

```
+(void)deleteCustomerWithID:(int)customerid inManagedObjectContext:(NSManagedObjectContext  *)context
{
Customer *customer = nil;

NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Customer"];
request.predicate = [NSPredicate predicateWithFormat:@"id = %d", customerid];
NSSortDescriptor *sortDescriptor = [NSSortDescriptor sortDescriptorWithKey:@"organization" ascending:YES];
request.sortDescriptors = [NSArray arrayWithObject:sortDescriptor];

NSError *error = nil;
NSArray *customers = [context executeFetchRequest:request error:&error];

if (!customers || ([customers count] > 1)) {
    // handle error
} else if (![customers count]) {
    // customer not found
} else {
    customer = [customers lastObject];
    [context deleteObject:customer];

    NSError *error; 
    if(![context save:&error]){
        NSLog(@"Unresolved error series %@, %@", error, [error userInfo]);
    }
}
} 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:29:33.863

我不确定出了什么问题，但我最终删除了实体中的所有关系，然后重新创建它们。这似乎解决了这个问题。我现在可以成功级联删除。

# php - PHP MySQL查询不插入

> ID：10939819
> 
> 赞同：2
> 
> 时间：2012-06-07T21:02:11.763
> 
> 标签：php, mysql, mysqli

我在尝试将查询插入数据库时​​遇到了一些问题。我有这个 php 表单应该做一个插入查询，但没有任何反应，甚至没有错误。

这是一个具有以下形式的示例查询：

```
INSERT INTO FlashVideoList ('title', 'urltitle', 'description', 'tags', 'category', 'filename', 'filetype', 'size', 'uploadedbyuser', 'uploadtime') VALUES ('testtitle','testtitle','test','testtags','FlashVideo','SMILE!.swf','application/x-shockwave-flash','1007525','0','1339102426'); 
```

我回应了查询的内容来得到这个

这是php代码：

```
function MySqlQuery($Query)
{
    // Invokes global connection info
    global $MySQL_Host, $MySQL_Username, $MySQL_Password, $MySQL_Database, $MySQL_Port;
    global $mysqli;

    // runs query
    $result = $mysqli->query($Query);
    return $result;
}

$mysqli = new mysqli($MySQL_Host, $MySQL_Username, $MySQL_Password, $MySQL_Database, $MySQL_Port);

    MySqlQuery("INSERT INTO FlashVideoList ('title', 'urltitle', 'description', 'tags', 'category', 'filename', 'filetype', 'size', 'uploadedbyuser', 'uploadtime') " .
    "VALUES ('" . $mysqli->real_escape_string($_SESSION['Title']) . "','" . $mysqli->real_escape_string(GetUrlTitle()) . "','" . $mysqli->real_escape_string($_SESSION['Description']) . "','" .
    $mysqli->real_escape_string($_SESSION['Tags']) . "','" . $_SESSION['Category'] . "','" . $mysqli->real_escape_string($FlashFileName) . "','" . $mysqli->real_escape_string($_FILES["file"]["type"]) . "','" .
    $mysqli->real_escape_string($_FILES["file"]["size"]) . "','" . $mysqli->real_escape_string($UploadUserID) . "','" . time() . "');");

mysqli_free_result($result);
mysqli_close($mysqli); 
```

任何帮助都非常感谢，感谢选择查询使用相同的代码可以正常工作

编辑：好吧，我已经取得了一些进展，似乎这段代码几乎所有可能的问题都是错误的：P 所以是的，这是我现在的查询：

```
INSERT INTO FlashVideoList (`title`, `urltitle`, `description`, `tags`, `category`, `filename`, `filetype`, `size`, `uploadedbyuser`, `uploadtime`) VALUES (`letitle`,`letitle`,``,`tagzz`,`FlashVideo`,`585336_pokemonsnewgrounds.swf`,`application/x-shockwave-flash`,`5058231`,`0`,`1339103842`); 
```

如果我直接通过navicat运行它，我会得到错误：

```
[Err] 1054 - Unknown column 'letitle' in 'field list' 
```

有人知道我在做什么错吗？：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:11:33.030

阅读错误信息。什么错误信息？好吧，这是另一个问题，但它会*说明*插入失败的原因¹。

评论中提到的一个（但可能不是唯一的）问题是它`'`不是有效的标识符引号，因此会导致解析错误。在 MySQL 中，默认值为，但如果使用[ANSI 引号](http://dev.mysql.com/doc/refman/4.1/en/server-sql-mode.html)```，则可以更改（为） 。`"`

```
INSERT INTO FlashVideoList (`title`, ...) 
```

* * *

¹ [这是 mysqli 的基本错误处理示例](http://www.php.net/manual/en/mysqli.query.php)（滚动到底部）。基本思想是，如果`query`返回 FALSE 则某些事情失败并且`error`可以/应该咨询。

另外，我建议清理代码并摆脱“代理”函数调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:14:12.053

用于`msysqli_error()`帮助找出错误

例如。`mysqli_query($query) or die(mysqli_error());`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T21:38:23.977

为什么首先使用反引号（或单引号）？他们允许您使用保留字，但这不是我要宣传的内容。请改用合理的列名。

# clojure - 简单的黑色服务器无法启动

> ID：10939823
> 
> 赞同：1
> 
> 时间：2012-06-07T21:02:22.873
> 
> 标签：clojure, leiningen, noir

我刚刚开始学习 Clojure，并认为深入研究它的一个好方法是编写一个简单的 Noir 网站。

我已经安装了 leiningen，lein 自行安装并安装了 lein noir 插件。当我创建一个虚拟项目时......

```
>> lein noir new test-noir
Creating noir project:  test-noir
Creating new dirs at:  /Users/pdeuchler/Documents/workspace/test-noir
Adding files...
Project created!
>> cd test-noir/ 
```

然后尝试运行它...

```
>> lein run 
```

我收到一个错误，我用谷歌搜索，但没有相关结果。

```
Exception in thread "main" java.io.FileNotFoundException: Could not locate clojure/core/incubator__init.class or clojure/core/incubator.clj on classpath: , compiling:(response.clj:1)
at clojure.lang.Compiler$InvokeExpr.eval(Compiler.java:3342)
at clojure.lang.Compiler.compile1(Compiler.java:6985)
at clojure.lang.Compiler.compile1(Compiler.java:6975)
at clojure.lang.Compiler.compile(Compiler.java:7046)
at clojure.lang.RT.compile(RT.java:385)
at clojure.lang.RT.load(RT.java:425)
at clojure.lang.RT.load(RT.java:398)
at clojure.core$load$fn__4610.invoke(core.clj:5386)
at clojure.core$load.doInvoke(core.clj:5385)
at clojure.lang.RestFn.invoke(RestFn.java:408)
at clojure.core$load_one.invoke(core.clj:5200)
at clojure.core$load_lib.doInvoke(core.clj:5237)
at clojure.lang.RestFn.applyTo(RestFn.java:142)
at clojure.core$apply.invoke(core.clj:602)
at clojure.core$load_libs.doInvoke(core.clj:5271)
at clojure.lang.RestFn.applyTo(RestFn.java:137)
at clojure.core$apply.invoke(core.clj:604)
at clojure.core$use.doInvoke(core.clj:5363)
at clojure.lang.RestFn.invoke(RestFn.java:457)
at compojure.core$loading__4505__auto__.invoke(core.clj:1)
at clojure.lang.AFn.applyToHelper(AFn.java:159)
at clojure.lang.AFn.applyTo(AFn.java:151)
at clojure.lang.Compiler$InvokeExpr.eval(Compiler.java:3337)
at clojure.lang.Compiler.compile1(Compiler.java:6985)
at clojure.lang.Compiler.compile1(Compiler.java:6975)
at clojure.lang.Compiler.compile(Compiler.java:7046)
at clojure.lang.RT.compile(RT.java:385)
.... 
```

谁能帮我吗？

# jquery - .animate 的 JQuery 替代品？

> ID：10939825
> 
> 赞同：2
> 
> 时间：2012-06-07T21:02:27.113
> 
> 标签：jquery

无论如何，我有一个 JQuery 脚本来让我的页脚始终位于浏览器的底部。

问题是它使用“动画”来强制它向下或向上移动，这会在每次页面加载时显示一个从顶部滚动到底部的页脚。就像一个飞行的页脚栏。

我想知道“Animate”是否有替代方案来强制它显示在底部，现在显示它向下拖动的滚动效果？

这里的代码片段，我相信“.animate”是我需要的替代方案。

```
 $(window).bind("load", function() { 

   var footerHeight = 0,
       footerTop = 0,
       $footer = $("#Footer");

   positionFooter();

   function positionFooter() {

            footerHeight = $footer.height();
            footerTop = ($(window).scrollTop()+$(window).height()-footerHeight)+"px";

           if ( ($(document.body).height()+footerHeight) < $(window).height() + 150) {
               $footer.css({
                    position: "absolute"
               }).stop().animate({
                    top: footerTop
               })
           } else {
               $footer.css({
                    position: "static"
               })
           }

   }

   $(window)
           .scroll(positionFooter)
           .resize(positionFooter) 
```

});

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T21:08:15.443

您可以简单地将页脚放在屏幕底部的固定位置 -

```
#footer { position:fixed; bottom:0px } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:19:46.407

如果您不需要动画，请选择 CSS 解决方案。正如@lix 提到的。

```
#footer { position:fixed; bottom:0px } 
```

另一方面，如果有动画，有两种方法：

1.  JS解决方案
2.  CSS3 过渡属性。

    ```
    #footer { 
       position: fixed;
       bottom: 0px;

       -webkit-transition: 3s linear 1s;
       -moz-transition: 3s linear 15s;
       -o-transition: 3s linear 1s;
       -ms-transition: 3s linear 1s;
       transition: 3s linear 1s;
    } 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T21:47:24.923

我想到了。我需要将“.animate”的延迟指定为“0”。以下是更新后的代码。

```
 if ( ($(document.body).height()+footerHeight) < $(window).height() + 150) {
               $footer.css({
                    position: "absolute"
               }).stop().animate({
                    top: footerTop
               }, 0)
           } else {
               $footer.css({
                    position: "static"
               })
           } 
```

# java - Android 应用程序崩溃 onPause() -- 一个项目中的逻辑在另一个项目中失败

> ID：10939829
> 
> 赞同：0
> 
> 时间：2012-06-07T21:02:58.273
> 
> 标签：java, android, logcat, onpause

在开始我目前正在开发的游戏之前，我构建了以下逻辑来处理暂停。那里的一切都很完美，至少我是这么想的。在测试应用程序中，逻辑仍然有效，这意味着我在其他地方打破了它。根据下面的逻辑和 LogCat 消息，您能指出我应该寻找的方向吗？我不知道如何解释下面的错误。任何帮助都会非常受欢迎。如果游戏进入睡眠状态，我不能完全要求重新启动游戏。

谢谢！

MainGamePanel.java

```
public void pause() {
    mSensorManager.unregisterListener(this);

}

public void resume(Context context) {
    mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_FASTEST);  
}

public void destroy() {
    thread.setRunning(false);

    if (thread != null)
    {
        Thread killThread = thread;
        thread = null;
        killThread.interrupt();
    }   

}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    //continue the thread
    synchronized (thread) {
        thread.pleaseWait = false;
        thread.notifyAll();
    }

}

@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    //pause the thread
    synchronized (thread) {
        thread.pleaseWait = true;
    }

} 
```

主要活动：

```
//Restarts the accelerometer after onPause
protected void onResume() {
    super.onResume();
    viewPanel.resume(this);

}

//Standard Method run when the Application loses focus.
//This runs the pause() function in the viewPanel so that
//the accelerometer can be paused.
protected void onPause() {
    super.onPause();   
    viewPanel.pause();

}

protected void onDestroy() {
    super.onDestroy();
    viewPanel.destroy();
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event)  {
    if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0) {
        // do something on back.
        viewPanel.backHit();
        return true;
    }

    return super.onKeyDown(keyCode, event);
} 
```

还有我的 MainThread.java 文件：

```
 package com.petronicarts.stormthecastle;

import com.petronicarts.stormthecastle.MainGamePanel;

import android.graphics.Canvas;
import android.graphics.Matrix;
import android.view.SurfaceHolder;

public class MainThread extends Thread {

private SurfaceHolder surfaceHolder;
private MainGamePanel gamePanel;
private boolean running;
public boolean pleaseWait = true;
public void setRunning(boolean running) {
    this.running = running;
}

public MainThread(SurfaceHolder surfaceHolder, MainGamePanel gamePanel) {
    super();
    this.surfaceHolder = surfaceHolder;
    this.gamePanel = gamePanel;
}

@Override
public void run() 
{
    Canvas canvas;

    Matrix matrix = new Matrix();
    matrix.preScale(gamePanel.getScaleX(), gamePanel.getScaleY());
    long startTime, elapsedTime;
    startTime = System.currentTimeMillis();
    elapsedTime = System.currentTimeMillis() - startTime;

    while (running) {
        if(!pleaseWait) {
            canvas = null;

            // try locking the canvas for exclusive pixel editing on the surface
            try {
                canvas = this.surfaceHolder.lockCanvas();
                canvas.setMatrix(matrix);
                synchronized (surfaceHolder) {
                    // update game state
                    startTime = System.currentTimeMillis();
                    this.gamePanel.update(elapsedTime);

                    // draws the canvas on the panel
                    this.gamePanel.onDraw(canvas);

                    elapsedTime = System.currentTimeMillis() - startTime;

                }
            } finally {
                // in case of an exception the surface is not left in
                // an inconsistent state
                if (canvas != null) {
                    surfaceHolder.unlockCanvasAndPost(canvas);
                }
            }   // end finally            
        }
        else {
            synchronized (this) {
                try {
                    wait();
                } catch (Exception e) { }
            }
        }
    }
}
} 
```

LogCat 错误：

```
06-07 15:56:45.852: E/AndroidRuntime(3374):     FATAL EXCEPTION: main
06-07 15:56:45.852: E/AndroidRuntime(3374):     java.lang.NullPointerException
06-07 15:56:45.852: E/AndroidRuntime(3374):     at com.petronicarts.stormthecastle.MainGamePanel.surfaceDestroyed(MainGamePanel.java:312)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.view.SurfaceView.reportSurfaceDestroyed(SurfaceView.java:600)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.view.SurfaceView.updateWindow(SurfaceView.java:486)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.view.SurfaceView.onWindowVisibilityChanged(SurfaceView.java:213)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.view.View.dispatchDetachedFromWindow(View.java:6232)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.view.ViewGroup.dispatchDetachedFromWindow(ViewGroup.java:1248)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.view.ViewGroup.dispatchDetachedFromWindow(ViewGroup.java:1248)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.view.ViewRoot.dispatchDetachedFromWindow(ViewRoot.java:1868)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.view.ViewRoot.doDie(ViewRoot.java:2958)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.view.ViewRoot.die(ViewRoot.java:2928)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.view.WindowManagerImpl.removeViewImmediate(WindowManagerImpl.java:254)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.view.Window$LocalWindowManager.removeViewImmediate(Window.java:445)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.app.ActivityThread.handleDestroyActivity(ActivityThread.java:3201)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:3306)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.app.ActivityThread.access$1600(ActivityThread.java:132)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1055)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.os.Looper.loop(Looper.java:150)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at android.app.ActivityThread.main(ActivityThread.java:4312)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at java.lang.reflect.Method.invokeNative(Native Method)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at java.lang.reflect.Method.invoke(Method.java:507)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
06-07 15:56:45.852: E/AndroidRuntime(3374):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:10:21.123

您可能不应该在线程变量上同步（在 中这样做`surfaceDestroyed`）。它设置为`null`别处（在 中`destroy`）。

实际上，一般来说，在非最终对象引用上进行同步总是一个坏主意。

# c++ - 配置 VS2010 将 C++ 项目构建到一个相当干净的输出目录？

> ID：10939835
> 
> 赞同：10
> 
> 时间：2012-06-07T21:03:17.260
> 
> 标签：c++, visual-studio-2010, visual-c++

在 VS2010 中，一个使用默认项目配置的单行 hello world C++ 控制台程序将 30 多个中间构建文件文件输出到其输出目录。obj 文件、pch 文件、ilk、log、buildstate、idb、嵌入式 manifest 和 rc 文件以及不少于 18 个 tlog 文件。

这些都不是实际输出，对于 exe 控制台应用程序，唯一真正输出的文件是 exe 本身和 pdb 文件。

所以我的问题是：有没有办法配置 VS2010 将所有这些垃圾构建到中间目录中，并将有用的东西输出到输出目录？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T22:28:38.013

在 Visual Studio 中，打开解决方案资源管理器，右键单击项目并选择属性... 在属性页对话框中，导航到配置属性 -> 常规。前两个属性控制构建输出的去向：

*   **输出目录**：这是放置最终构建输出（.exe、.pdb、.ilk）的目录

*   **中间目录**：这是放置（大多数）其他所有内容的目录。

如果您使用典型的项目布局，其中项目位于解决方案文件夹下的文件夹中，则这些属性将被配置为使两个目录不同。当然，您可以将它们配置为将输出放置在您想要的任何位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:10:18.110

你可以去：

项目->属性->构建事件->预构建事件命令行

项目->属性->构建事件->构建后事件命令行

在这里，您可以为所有清理或复制 ans 等命令行脚本。

# computer-science - 这是 NP 完全的吗

> ID：10939838
> 
> 赞同：2
> 
> 时间：2012-06-07T21:03:23.280
> 
> 标签：computer-science, polynomial-math, np-complete, np-hard

我的问题类似于这里的问题[https://cs.stackexchange.com/questions/2244/need-a-np-complete-proof-on-an-example](https://cs.stackexchange.com/questions/2244/need-a-np-complete-proof-on-an-example)，但有点不同。

这是我的问题：

有A、B、C三个岛，还有很多扇形的木筏。我们必须从 A-->B-->C 建造一座桥，并且**每个部分所需的筏板数量是已知**的，例如，连接 AB 需要四个筏板，连接 BC 需要三个筏板。

这些木筏原本在不同的位置，它们可以免费旋转。有趣的是，如果需要，它们**可以相互重叠**。移动一个筏板的距离可以计算为质心原始位置与其展开位置之间的距离。

目标是找到具有移动筏**的最小总距离**的解决方案，以使桥梁 A-->B-->C 并使用桥梁每个部分的确切筏数。

我习惯用下图来说明我的问题。

![在此处输入图像描述](../Images/a4f7dc11b5379b8d2ab0e1dce7135594.png)

从这个图中我们可以看出，排列**可能不是一条直线**，木筏可以与另一个木筏重叠。

这些筏子的候选位置太多了。看来问题是NPC。我不知道我是否正确以及如何证明它是NPC。有谁知道如何解决它？谢谢！

# debugging - SQL Developer 报错——错误的行号

> ID：10939839
> 
> 赞同：6
> 
> 时间：2012-06-07T21:03:26.617
> 
> 标签：debugging, oracle-sqldeveloper

我的任务是编写和测试几个小型 PL/SQL 脚本。这超出了我的核心能力，但我可以通过足够的反复试验来做到这一点。使此过程复杂化的一件事是 SQ LDeveloper 的错误报告。它使用行号和列号输出问题的简短描述，但行号与错误的实际位置无关。也就是说，我可能在脚本的第 52 行使用 = 而不是 := 进行赋值，但“脚本输出”窗口中的错误说明了第 37 行的问题。这是一个典型的问题吗？有没有办法将报告的行号转换为实际行号？

我正在使用 SQL Developer 1.5.5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T19:12:47.693

我明白你的意思。我每天都会遇到这个问题。我还没有完全弄清楚确切的解决方案，但它似乎与编译器如何处理注释有关。我刚刚使用查询在我的机器上做了一个测试，在该查询中我在特定行上插入了一个错误。Line: # 处的错误按预期关闭。从 SQL 中删除注释行后，错误对应于 Line #。

编辑：添加测试用例以响应 Ian Carpenter

```
select column1
       ,column2
--       ,column3
       ,column4
from table1
where 1=1
and column1 = '00000000'; 
```

运行然后更改为：

```
select column1
       ,column2
--       ,column3
       ,column4a
from table1
where 1=1
and column1 = '00000000'; 
```

运行并得到以下错误：

```
ORA-00904: "COLUMN4A": invalid identifier
00904\. 00000 -  "%s: invalid identifier"
*Cause:    
*Action:
Error at Line: 3 Column: 11 
```

# javascript - Javascript隐藏输入数组

> ID：10939840
> 
> 赞同：10
> 
> 时间：2012-06-07T21:03:30.233
> 
> 标签：javascript, arrays, input, hidden

是否可以将隐藏输入字段的值作为数组传递给 Spring MVC 控制器？

```
function foo(){
    var myArray = new Array();
    myArray[0] = "Hello";
    myArray[1] = "World!";
    document.getElementById("hiddenInp").value=myArray;
} 
```

然后在控制器中做类似的事情

```
@RequestMapping ...
public String test(HttpServletRequest request)
{
    String[] myArray = request.getParameter("hiddenInp");
    // Assuming that the name of the hidden input field is also hiddenInp
    System.out.println(myArray[0] + myArray[1]);
    ...
} 
```

如果我正在使用关联数组呢？索引是字符串而不是 int

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-07T21:06:31.183

您最好的选择是对数组进行*字符串化*然后分配它。

```
element.value = JSON.stringify( ["Hello", "World"] ); 
```

结果值将是一个[JSON](http://www.json.org/)字符串，然后可以在服务器上对其进行解析，从而重新创建数组。如果您希望拥有类似于关联数组的东西，这种方法也适用于对象。

我应该注意到，虽然`JSON`现在跨浏览器的支持相当好，但旧的浏览器可能不支持它。在这些情况下，您可以[相当轻松地填充该功能：](https://github.com/douglascrockford/JSON-js)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T21:12:50.340

您只能将字符串作为参数以及输入值传递。这意味着您的 Array 将通过使用 " " 连接它来自动转换为字符串`;`，您也可以使用[`.join()`method](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/join)手动执行此操作。

然后，您需要在服务器端按所选分隔符拆分该字符串。

如果您想将它们作为数组发送，afaik 您将需要两个输入元素：

```
<input type="hidden" name="hiddenInp[]"<!-- should be more descriptive --> value="a" />
<input type="hidden" name="hiddenInp[]"<!-- the same name --> value="b" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T21:06:42.083

但是，您在 Javascript 中设置它，您必须在服务器上解析它。这可能意味着通过“，”将值拆分为 C# 数组，然后根据需要访问它。在表单提交中发送的所有值都按原样作为字符串发送。

您可能希望使用[http://www.w3schools.com/jsref/jsref_join.asp](http://www.w3schools.com/jsref/jsref_join.asp)来设置隐藏输入的值。但这不是必需的——不使用 .join() 似乎没问题。但重要的是要记住，该值将是服务器上的字符串，而不是数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-13T16:39:32.387

我通过以下[链接](http://newdailyblog.blogspot.com/2013/06/how-to-pass-array-or-object-into-hidden.html)找到了答案。

当您要分配任何 JavaScript 对象或数组时，请执行以下操作：

```
var javascript_variable = 'object' or ['fruit1', 'fruit2', 'fruit3'];
$( '#hiden_input_element_unique_id' ).val( JSON.stringify(javascript_variable) ); 
```

表单提交后，在服务器端我们要解码如下：

```
$fruits_array = json_decode( $_POST['hiden_input_element_unique_name'] ); 
```

通过这种方式，您可以在服务器端获取任何 JavaScript 数组，然后在客户端通过 JavaScript 将其设置为表单元素！

# ms-access - 如何获取组合框中未绑定列的值？

> ID：10939852
> 
> 赞同：10
> 
> 时间：2012-06-07T21:03:56.633
> 
> 标签：ms-access

如何从组合框中的未绑定列中获取值到 VBA 变量中？

我有一个名为的组合框`cmbEmps`，它有一个看起来像这样的行源

```
ID   Name    Active
1    Bob     -1
2    Jim     -1
3    Jane    0 
```

它绑定到我表单上第 1 列的一个字段，并且我的列宽度已设置为 0";1";0" 以便只显示名称。

What I'd really like to do, is when Jane is selected, find out out that the `Active`column (3) is 0.

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-07T21:09:59.117

请参阅组合框中的第三列。列编号从零开始。

```
YourVariable = Me.cmbEmps.Column(2) 
```

# computer-vision - libfreenect - 深度注册理论

> ID：10939853
> 
> 赞同：2
> 
> 时间：2012-06-07T21:03:57.610
> 
> 标签：computer-vision, openframeworks, camera-calibration

我一直在研究 Kinect 一段时间，现在将 ofxKinect 与 openFrameworks 一起使用。我一直在使用内置的深度注册：

```
kinect.setRegistration(true); 
```

我认为它调用了底层 libfreenect 库提供的注册函数。我尝试查看 libfreenect 的源代码，以找出将深度图注册到 RGB 图像背后的理论，但我真的对这一切感到困惑。

代码在这里：[https ://github.com/ofTheo/ofxKinect/blob/master/libs/libfreenect/registration.c](https://github.com/ofTheo/ofxKinect/blob/master/libs/libfreenect/registration.c)

有谁知道这段代码实现的技术背后的理论是什么？即使您可以将我指向一篇采用类似技术的论文，那也会很有帮助。

# lisp - 如何在emacs lisp中计算两个集合之间的差异，集合应该是列表

> ID：10939855
> 
> 赞同：8
> 
> 时间：2012-06-07T21:04:24.010
> 
> 标签：lisp, elisp, set, set-difference

如何计算 Emacs Lisp 中两组之间的差异？集合应该是列表。程序应该非常简单和简短，否则我不会理解它。我是新手。

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T21:52:11.257

`set-difference`Common Lisp 扩展中有一个函数：

```
elisp> (require 'cl-lib)
cl-lib
elisp> (cl-set-difference '(1 2 3) '(2 3 4))
(1) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-11-18T07:42:06.210

当我编写包含大量列表数据转换的 Elisp 代码时，我使用[`dash`](https://github.com/magnars/dash.el)库，因为它有很多函数可以处理列表。设置差异可以通过以下方式完成[`-difference`](https://github.com/magnars/dash.el#-difference-list-list2)：

```
(require 'dash)
(-difference '(1 2 3 4) '(3 4 5 6)) ;; => '(1 2) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T23:06:43.000

免责声明：这不是在 eLisp 中执行此操作的有效方法。一种有效的方法是通过带有哈希函数的哈希表，但是既然您询问了列表，那么这里是：

```
(defun custom-set-difference (a b)
  (remove-if
     #'(lambda (x) (and (member x a) (member x b)))
     (append a b)))

(custom-set-difference '(1 2 3 4 5) '(2 4 6))

(1 3 5 6)

(defun another-set-difference (a b)
  (if (null a) b
    (let (removed)
      (labels ((find-and-remove
                (c)
                (cond
                 ((null c) nil)
                 ((equal (car c) (car a))
                  (setq removed t) (cdr c))
                 (t (cons (car c) (find-and-remove (cdr c)))))))
        (setf b (find-and-remove b))
        (if removed
            (another-set-difference (cdr a) b)
          (cons (car a) (another-set-difference (cdr a) b)))))))

(another-set-difference '(1 2 3 4 5) '(2 4 6))

(1 3 5 6) 
```

第二个效率更高一些，因为它会在进行后续检查时删除元素，但第一个更短且更直接。

另请注意，列表不是集合的良好表示，因为它们自然允许重复。哈希图更适合这个目的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-27T22:45:13.520

这是一个简单而简短的定义，应该很容易理解。它本质上与`set-difference`Emacs 的 Common Lisp 库中的函数相同，但没有对 TEST 参数进行任何处理。

```
(defun set-diff (list1 list2 &optional key)
  "Combine LIST1 and LIST2 using a set-difference operation.
Optional arg KEY is a function used to extract the part of each list
item to compare.

The result list contains all items that appear in LIST1 but not LIST2.
This is non-destructive; it makes a copy of the data if necessary, to
avoid corrupting the original LIST1 and LIST2."
  (if (or (null list1)  (null list2))
      list1
    (let ((keyed-list2  (and key  (mapcar key list2)))
          (result       ()))
      (while list1
        (unless (if key
                    (member (funcall key (car list1)) keyed-list2)
                  (member (car list1) list2))
          (setq result  (cons (car list1) result)))
        (setq list1  (cdr list1)))
      result))) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-11-15T21:39:03.093

GNU Emacs Lisp Reference Manual, [Sets and Lists](https://www.gnu.org/software/emacs/manual/html_node/elisp/Sets-And-Lists.html)建议使用*cl-lib*的
**cl-set-difference** *LIST1* *LIST2* `&key :test :test-not :key`

```
(require 'cl-lib)
(cl-set-difference '(1 2 3) '(2 3 4))
(1) 
```

# java - 在想法中设置类路径以运行单元测试

> ID：10939861
> 
> 赞同：2
> 
> 时间：2012-06-07T21:05:24.557
> 
> 标签：java, unit-testing, intellij-idea, classpath

我正在使用`openCSV`jar 来处理我的解析器项目中存在的 csv，现在我想对我的解析器进行单元测试，为此我将调用传递给我的解析器类的对象，以便我可以继续进行解析。

现在我得到了`java.lang.NoClassDefFoundError: au/com/bytecode/opencsv/CSVReader`，`openCSV`项目中已经存在 jar，但是现在如果我尝试运行单元测试，我会收到上述错误。

我如何在 intellij idea 中设置项目类路径，以便我可以运行引用所有依赖 jar 的单元测试。

想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T21:16:45.400

如果您的项目和单元测试有不同的模块，那么您还需要在单元测试模块中添加该 .jar 的依赖项。

例如，当我使用 IntelliJ 制作项目时，我会创建模块。例如，我有两个模块：`main`和`test`. 比我为我的主模块和我的测试模块创建库并将它们添加到模块依赖项中。

我使用的是 IntelliJ 10.5.4，所以路径是：文件 -> 项目结构 -> 模块 -> 主 -> 依赖项 -> 添加 -> 然后我选择创建的库。

您还可以将模块依赖项添加到其他模块并使用它们的类。

希望这可以帮助。

# jquery - 保护 JQuery Ajax 调用以通过 facebook Graph API 提交分数

> ID：10939863
> 
> 赞同：0
> 
> 时间：2012-06-07T21:05:45.757
> 
> 标签：jquery, ajax, security, facebook-graph-api

我正在使用 ajax 调用来调用我必须发布分数的 WCF 服务。我看到了 3 个用于保护它的基本选项，但我不确定哪个是最好的（或者可能是一个组合）或*确切地*如何做它们中的任何一个。

1）模糊/混淆代码。这甚至可能吗？一个切线只是隐藏了我不希望人们看到的特定变量。我读过一些关于“关闭”的东西，但我并不完全理解。

2）使用某种哈希。和上面一样，我什至可以隐藏它吗？

3) 制衡。基本上不断地向我的服务器提交各种事件的分数以跟踪分数。禁止提交超出定义的可能参数的内容的用户。（即，当没有为该会话“签入”之前的分数时，提交超过 100,000 的分数。

我猜2和3的组合最好。任何链接或提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:15:58.973

1) – 不起作用，JS 代码美化器存在，并且每个人都可以查看您发送的数据，例如在 firebug 网络选项卡中。

闭包是一种将代码封装在函数中的 JS 机制，因此没有“外部”函数可以访问它。不过不会有太大区别，因为我可以愉快地调试您的代码并查看发生了什么。

2) – 行不通，如果你计算客户端的哈希值，我可以 a) 查看算法 b) 在哈希之前篡改数据。

3）可能是您获得*一些*安全性的最佳选择。

但是如果你想要它“完全安全”，那么你就不想使用像 JavaScript 这样的开放客户端技术——也许 Flash 会是一个更好的选择，当然这对于逆向工程来说也不是完全安全的。但它肯定会设置更高的标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:30:00.483

您始终应该从服务器端发布分数，以免`access_token`向访问者透露您的应用程序。

引用[分数的文档](https://developers.facebook.com/docs/score/)：

> **为用户创建或更新分数**只要您拥有 publish_actions 权限，您就可以通过向**应用**
> 发出 HTTP POST 请求来发布分数或用户。`/USER_ID/scores`**`access_token`**

**更新：**
由于您似乎试图保护客户端和您的服务之间的通信，通常根据用户在服务器端的操作计算分数要安全得多，这样您就可以专注于可疑行为而不是检测提交给的虚假分数保护您的应用程序。

# c++ - 使用二维向量从 txt 读取文件

> ID：10939867
> 
> 赞同：3
> 
> 时间：2012-06-07T21:06:03.280
> 
> 标签：c++, vector

在二维向量的情况下是否可以使用运算符 []？例如我得到以下代码：

```
vector<vector<string>> data;

ifstream myReadFile;
myReadFile.open("stoixeia_astheni.txt");

while (!myReadFile.eof()) {

    for(int i=0; i<1; i++){
        for (int j=0; j<4; j++){
            myReadFile  >> data[i][j];
        }
    }

} 
```

我收到的消息超出范围。我有一个 5 行 4 列的文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T21:09:48.717

您的向量`data`是空的，它`size()`是 0。您必须先`resize`使用它或添加新元素`push_back()`：

```
while (!myReadFile.eof()) {    
    for(int i = 0; i < 1; i++){
        vector<string> tmpVec;
        string tmpString

        for (int j = 0; j < 4; j++){
            myReadFile  >> tmpString;
            tmpVec.push_back(tmpString);
        }
        data.push_bac(tmpVec);
    }
} 
```

您还可以在以下声明中设置大小`data`：

```
vector<vector<string>> data(5,vector<string>(4));

ifstream myReadFile;
myReadFile.open("stoixeia_astheni.txt");

while (!myReadFile.eof()) {

    for(int i=0; i < 5; i++){
        for (int j=0; j<4; j++){
            myReadFile  >> data[i][j];
        }
    }

} 
```

# perl - Sudo.pm：某些实例不起作用

> ID：10939869
> 
> 赞同：1
> 
> 时间：2012-06-07T21:06:06.523
> 
> 标签：perl, sudo

我正在使用来自 CPAN的 Perl 模块[Sudo.pm。](http://search.cpan.org/perldoc/Sudo)

这是我正在使用的代码：

```
# In this two variable I'll store the object that runs sudo commands and
# the exit status of the commands
my ($su, $run);

# This functions accept an object returned from sudo->run and will check
# if there were errors running the code.
sub check_status {
    # Retrieving the object
    my $run = shift;

    if (exists($run->{error})) {
        print "Failed.\n";
    }
    else {
        print "Done.\n";
    }
}

# This first call erase all RSA related files
$su = Sudo->new(
                {
                    sudo => '/usr/bin/sudo',
                    username => 'root',
                    pogram => '/usr/bin/rm',
                    program_args => '-f /tmp/cvmfs_test.key /tmp/cvmfs_test.csr /tmp/cvmfs_test.crt /tmp/whitelist.test.* /tmp/cvmfs_master.key /tmp/cvmfs_master.pub'
                }
);

print 'Erasing RSA keys... ';
$run = $su->sudo_run();
check_status($run);

# This instance will erase configuration files created in /etc/cvmfs/config.d
$su = Sudo->new(
                {
                    sudo => '/usr/bin/sudo',
                    username => 'root',
                    program => '/usr/bin/rm',
                    program_args => '-f /etc/cvmfs/config.d/127.0.0.1.conf'
                }
);

print 'Erasing configuration files in /etc/cvmfs/config.d... ';
$run = $su->sudo_run();
check_status($run);

# This instance will erase /tmp/cvmfs.faulty
$su = Sudo->new(
                {
                    sudo => '/usr/bin/sudo',
                    username => 'root',
                    program => '/usr/bin/rm',
                    program_args => '-f /tmp/cvmfs.faulty'
                }
);

print 'Erasing /tmp/cvmfs.faulty... ';
$run = $su->sudo_run();
print $run->{stdout};
check_status($run);

# This instance will erase all previous extracted repository
$su = Sudo->new(
                {
                    sudo => '/usr/bin/sudo',
                    username => 'root',
                    program => '/usr/bin/rm',
                    program_args => '-fr /tmp/server'
                }
);

print 'Erasing /tmp/server directory... ';
$run = $su->sudo_run();
print $run->{stdout};
check_status($run);

# This instance will run 'restarting_services.sh'
$su = Sudo->new(
                {
                    sudo => '/usr/bin/sudo',
                    username => 'root',
                    program => 'sh',
                    program_args => "$Bin/restarting_services.sh"
                }
);

print 'Restarting services... ';
$run = $su->sudo_run();
check_status($run); 
```

有没有人可以向我解释为什么只有其中一些实例有效？准确的说，第一个、第二个和第五个实例不起作用，而第三个和第四个实例起作用。

我无法在 STDOUT 或 STDERR 上获得任何输出，并且 check_status() 函数对于所有这些都始终回答“完成”。但这只是因为当命令不起作用时，根本没有设置对象。

在我看来，我对所有这些都使用相同的语法。当然，我将它与能够在没有密码的情况下运行 sudo 的用户一起使用，这就是我没有添加该参数的原因。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:19:31.620

您的代码中有错字。

```
pogram => '/usr/bin/rm', 
```

应该：

```
program => '/usr/bin/rm', 
```

David W 的调试建议绝对是正确的……

# javascript - 在正则表达式中访问多个捕获（新手事物......）

> ID：10939873
> 
> 赞同：0
> 
> 时间：2012-06-07T21:06:28.447
> 
> 标签：javascript, regex, capture

在这个正则表达式多次捕获中，我必须添加“g”标志来获取所有项目......

"aaa bbb ccc \n.000.\n \n.111.\n sd555 dsf \n.222.\n ddd ".match( /^.(.*).$/gm )

当我添加“g”（全局）标志时？如何访问捕获的组......应该有 3 个像 [“000”，“111”，“222”] 但我不知道如何访问它们。 .. 我不断得到 [".000.", ".111.", ".222."] << 注意单词前后的点

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T21:14:06.533

如果你想在全局正则表达式中获取捕获组，你不能使用`match`，很遗憾。相反，您需要[`exec`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/RegExp/exec)在正则表达式上使用：

```
var myregex = /^.(.*).$/gm;
var result, allMatches = [];
while((result = myregex.exec(mystring)) != null) {
    var match = result[1]; // get the first match pattern of this match
    allMatches.push(match);
} 
```

使用全局正则表达式，`match`返回所有整个匹配项的数组，并且从不返回捕获组。 `exec`返回单个匹配项及其所有捕获组。要获得所有匹配项，您必须`exec`多次调用，直到它最终返回`null`。

**请注意**，`exec`依赖于正则表达式维护状态，因此您**必须**将正则表达式保存在变量中：

```
while((result = /^.(.*).$/gm.exec(mystring)) != null) // BAD and WRONG! 
```

这是错误的，因为每个循环都有一个新的正则表达式，它不知道它应该返回这个循环的匹配项。（或者，更准确地说，它不知道`lastIndex`之前的正则表达式。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:14:22.280

str.match( re ) 返回的结果是一个数组。

演示在这里。[http://jsfiddle.net/rXgQa/](http://jsfiddle.net/rXgQa/)

```
var re = /^.(.*).$/gm;
var str = "aaa bbb ccc \n.000.\n \n.111.\n sd555 dsf \n.222.\n ddd ";
var matches = str.match( re );
if( matches ){
    document.body.innerHTML += matches.join( '<br/> ' );
}​ 
```

输出：

```
aaa bbb ccc // matches[0]
.000\.     // matches[1]
.111\.     // matches[2]
sd555 dsf // matches[3]
.222\.     // matches[4]
ddd       // matches[5] 
```

## 更新

这是我对问题第二部分的回答。问题：如何去掉数字前后的点？

我的回答：我会遍历匹配项并将点替换为空字符串。此外，您的正则表达式是错误的，因为您需要转义点。

***更新***了 jsfiddle 演示：http: [//jsfiddle.net/rXgQa/1/](http://jsfiddle.net/rXgQa/1/)

```
var re = /^\.([^\.]+)\.$/gm;
var lines = "aaa bbb ccc \n.000.\n \n.111.\n sd555 dsf \n.222.\n ddd ";
var matches = lines.match( re );
var i = (matches||[]).length;
while( i-- ){
    matches[i] = matches[i].replace( /\./g, '' );
}

document.body.innerHTML += matches.join( '<br/>' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T21:15:04.057

在 FireBug 中：

```
var hello = "aaa bbb ccc \n.000.\n \n.111.\n sd555 dsf \n.222.\n ddd ".match( /^.(.*).$/gm );
console.dir(hello); 
```

然后你可以使用`hello[n]`where n 是你想要的匹配，比如 `hello[1].

*但是，如果您只想*匹配某些内容，则需要修改您的正则表达式。

# jquery - 如何在 jQuery 函数中找到图像的数据属性？

> ID：10939875
> 
> 赞同：1
> 
> 时间：2012-06-07T21:06:31.667
> 
> 标签：jquery, ruby-on-rails, image

我需要使用 jQuery 来处理我在页面上显示的一组添加了 html5 数据属性的图像。我将如何获取所有具有它们的图像的 value1 和 value2 的数据值，但忽略任何没有的图像。换句话说，我需要循环浏览页面上的所有图像以查找这些属性的存在。

这是显示图像的代码：

```
<% @pictures.each do |picture| %>
  <%= link_to image_tag(picture.photo.url(:full),  
              :class => "picture_list_item",
              :data => {:value1 => picture.value1, :value2 => picture.value2}, 
              :id => "picture_" + picture.id.to_s),
              picture_path(:id => picture.id) %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:09:20.520

jQuery 应该让这一切变得非常轻松。

```
$("img[data]").each(function(){
    //do something with each individual image.
}); 
```

或者只是这样：

```
$("img[data]").doSomething();
//doSomething to all. 
```

这应该选择所有具有数据属性的图像。您可以一次处理所有这些，也可以一次`.each()`处理选定的图像。

这是一个要演示的小提琴：http: [//jsfiddle.net/SLdk4/1/](http://jsfiddle.net/SLdk4/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:09:41.963

我建议您添加一个代表每个值的类，然后您可以使用类选择器来操作它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T21:15:06.153

```
$('#parent img[data]').each(function(){
       var data = $(this).attr('data').split(',');
       var data_1 = data[0];                         // retrieve first data
       var data_2 = data[1];                         // retrieve second data
       console.log( data_1 +' '+ data_2 );           // or use 'alert' to test
}); 
```

## *[jsFiddle 演示](http://jsfiddle.net/roXon/CXcG4/1/)*

[.each()](http://api.jquey.com/each)
[.attr()](http://api.jquery.com/attr)
[.split()](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)

# java - 超出了android java堆大小

> ID：10939876
> 
> 赞同：0
> 
> 时间：2012-06-07T21:06:32.313
> 
> 标签：java, android, size, heap-memory

我用很多条目填充了一个数据库，但是在 7000 行（大约 600 个条目）之后，它抛出了超出 Java 堆大小限制。我尝试将 avd 配置文件中的堆大小从 32 更改为 64。我尝试输入 -Xmx1024 来更改所有 Java 应用程序的堆大小（在控制面板中）。到目前为止没有任何效果，有什么建议吗？提前致谢

向上：

```
cv.put(KEY_NAME, "name");
cv.put(KEY_HOTNESS, "hotness");
cv.put(KEY_CALORIE, "50");
cv.put(KEY_FAT, "5");
cv.put(KEY_CARBS, "5");
cv.put(KEY_PROT, "5");
cv.put(KEY_MULTI, "1");
ourDatabase.insert(DATABASE_TABLE, null, cv); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:27:23.857

每当您在 java 中创建和添加对象时，它都会消耗一些可用的堆空间。与其尝试写出和处理代码中的大量查询，不如分小块处理查询，提交这些更改，然后继续处理更多数据。这样，您一次只使用少量的堆空间。确实没有理由必须一次处理所有这些查询。

根据上面的评论。除非出于某种原因从应用程序生成这些大量插入，否则您不应该在应用程序代码中这样做。您的数据库应该从应用程序外部填充。

# visual-studio-2012 - 在系统注册表中找不到正确的类型库（VS2012 RC）

> ID：10939877
> 
> 赞同：1
> 
> 时间：2012-06-07T21:06:32.467
> 
> 标签：visual-studio-2012

我在 5 月 31 日安装了 2012 RC，直到今天我尝试为 TFS 11 安装 TFS Power Tools Beta 时一切正常。现在每次打开 VS2012 RC 时都会收到以下消息：

“在系统注册表中找不到正确的类型库。修复此情况的尝试失败，因为您没有写入系统注册表的权限或无法加载类型库。” ...

每次我以非管理员用户身份运行 VS2012 时都会收到警告。我卸载了Power Tools，修复了VS2012，什么也没有。

我启动了进程监视器并发现了这个：

```
devenv.exe   RegOpenKey     HKCU\Software\Classes\Wow6432Node\Interface\{65074F7F-63C0-304E-AF0A-D51741CB4A8D}\TypeLib            ACCESS DENIED
devenv.exe   RegOpenKey     HKCU\Software\Classes\Wow6432Node\Interface\{65074F7F-63C0-304E-AF0A-D51741CB4A8D}\TypeLib            ACCESS DENIED
devenv.exe   RegOpenKey     HKCU\Software\Classes\Wow6432Node\Interface                                                           ACCESS DENIED
devenv.exe   RegOpenKey     HKCU\Software\Classes\Wow6432Node\Interface\{D0EEAA62-3D30-3EE2-B896-A2F34DDA47D8}                    ACCESS DENIED
devenv.exe   RegOpenKey     HKCU\Software\Classes\Wow6432Node\Interface\{D0EEAA62-3D30-3EE2-B896-A2F34DDA47D8}                    ACCESS DENIED
devenv.exe   RegOpenKey     HKCU\Software\Classes\Wow6432Node\Interface\{D0EEAA62-3D30-3EE2-B896-A2F34DDA47D8}\ProxyStubClsid32   ACCESS DENIED
devenv.exe   RegOpenKey     HKCU\Software\Classes\Wow6432Node\Interface\{D0EEAA62-3D30-3EE2-B896-A2F34DDA47D8}\ProxyStubClsid32   ACCESS DENIED
devenv.exe   RegOpenKey     HKCU\Software\Classes\Wow6432Node\Interface\{D0EEAA62-3D30-3EE2-B896-A2F34DDA47D8}\TypeLib            ACCESS DENIED
devenv.exe   RegOpenKey     HKCU\Software\Classes\Wow6432Node\Interface\{D0EEAA62-3D30-3EE2-B896-A2F34DDA47D8}\TypeLib            ACCESS DENIED
devenv.exe   RegOpenKey     HKCU\Software\Classes\Wow6432Node\Interface\{D0EEAA62-3D30-3EE2-B896-A2F34DDA47D8}\TypeLib            ACCESS DENIED
devenv.exe   RegOpenKey     HKCU\Software\Classes\Wow6432Node\Interface\{D0EEAA62-3D30-3EE2-B896-A2F34DDA47D8}\TypeLib            ACCESS DENIED
devenv.exe   RegOpenKey     HKCU\Software\Classes\Wow6432Node\Interface                                                           ACCESS DENIED
devenv.exe   RegCreateKey   HKCU\Software\Classes\Wow6432Node\Interface                                                           ACCESS DENIED
devenv.exe   RegCreateKey   HKCU\Software\Classes\Wow6432Node\Interface                                                           ACCESS DENIED 
```

但是我被卡住了，我不知道如何永久解决这个问题，有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T22:05:09.680

我必须在注册表中手动向我的用户授予“完全控制”权限。

右键单击 HKEY_CURRENT_USER，单击权限...并添加您的用户并选择“完全控制”选项。

# ember.js - Ember.Router 的 transitionTo 不更新 URL

> ID：10939879
> 
> 赞同：2
> 
> 时间：2012-06-07T21:06:34.993
> 
> 标签：ember.js, ember-old-router

我使用最新的 ember.js (0.9.8.1) 通过引用[Ember Router not updates url in Chrome and Safari](https://stackoverflow.com/questions/10823053/ember-router-not-updating-url-in-chrome-and-safari)实现了以下内容。当我尝试通过 router.transitionTo('route path') 方法（附加代码段的最后 3 行）切换黑白路由时，浏览器 url 未正确更新，但我确实看到视图标记正在更新，确认状态更改确实发生。可以帮助确定我是否在这里遗漏了什么吗？

顺便说一句：我在 Chrome 20.0.1132.27 beta-m 中对此进行了测试

```
App = Ember.Application.create({});

App.IndexView = Ember.View.extend({
    template: Ember.Handlebars.compile(
        'hello world from index'
    )
});

App.ShowView = Ember.View.extend({
    template: Ember.Handlebars.compile(
       'hello world from show'
    )
});

App.Router = Ember.Router.extend({
    location: 'hash',
    enableLogging: true,

    root: Ember.State.extend({
        index: Ember.State.extend({
            route: '/',
            redirectsTo: 'tasks'
        }),

        tasks: Ember.State.extend({
            route: '/tasks',

            index: Ember.ViewState.extend({
                route: '/',
                view: App.IndexView
            }),

            show: Ember.ViewState.extend({
                route: '/show',
                view: App.ShowView
            })
        })
    })
});

var router = App.Router.create({});

App.initialize(router);
router.transitionTo('root');
router.transitionTo('root.tasks');
router.transitionTo('root.tasks.show'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T09:57:34.857

我运行了您的代码，在控制台中出现以下错误“对象哈希没有方法'setURL'”。通过调试，我发现您必须使用以下方式定义路由器的位置：

```
location = Ember.Location.create({ style: 'hash' }) 
```

或者

```
location = Ember.Location.create({implementation: 'hash'}) 
```

我不知道究竟为什么，但它似乎工作。也许这只是由于 ember 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T03:09:52.697

您正在混淆 2 种初始化方法。

1.  当您定义 App.Router 时，您需要做的就是调用 App.initialize()。它会自动创建一个 Ember.Router 实例并将其分配给变量 App.stateManager。然后您可以使用 App.stateManager 调用 transitionTo。

2.  您可以定义变量路由器来扩展 Ember.Router，然后调用 App.initialize(router)。此方法还创建 Ember.router 的实例并将其分配给 App.stateManager。然后您可以使用 App.stateManager 调用 transitionTo。

这两种方法都可以，但我更喜欢方法 1。为了操纵路线，我们总是使用 App.stateManager。

# php - 检索 JSON 维护浏览器会话

> ID：10939882
> 
> 赞同：1
> 
> 时间：2012-06-07T21:06:46.227
> 
> 标签：php, ruby-on-rails, ruby, curl

我有一个用 Ruby on Rails 完成的网站，它处理用户身份验证。现在，我在同一站点中的一个子文件夹下有一个 PHP 应用程序，该应用程序检索由 RoR 提供的指定用户角色的 JSON。

现在，当我尝试从 PHP 中检索 JSON 时，即使用户已登录，它也始终检索为“Guest”（我相信是因为未维护浏览器会话）。我用来检索 JSON 的代码是

```
$json_url = 'https://mysite.com.com/usertype';
$json_string = '[usertype]';
// Initializing curl
$ch = curl_init( $json_url );
// Configuring curl options
$options = array(
CURLOPT_RETURNTRANSFER => true,
CURLOPT_HTTPHEADER => array('Content-type: application/json') ,
CURLOPT_POSTFIELDS => $json_string
);
// Setting curl options
curl_setopt_array( $ch, $options );
// Getting results
$result =  curl_exec($ch); // Getting jSON result string 
```

现在有人可以帮助我在哪里可以检索维护会话的 JSON 吗？？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:18:10.010

RoR 将设置一个身份验证 cookie。所以第一步是找出那个cookie名称。默认名称是“_myprojectname_session”，但可以更改`config/initializers/session_store.rb`（请参阅[从 Rails 的任何位置访问“会话密钥”cookie 名称](https://stackoverflow.com/questions/1001597/accessing-the-session-key-cookie-name-from-anywhere-in-rails)）。

找出 cookie 名称的一种简单方法是在浏览器中查看它（例如，使用这个 chrome 扩展程序：[http](http://code.google.com/p/editthiscookie/) ://code.google.com/p/editthiscookie/ ）。

一旦找到 cookie 名称（例如“_myapp_session”），您需要将会话 cookie 从 PHP 请求复制到 CURL 选项，如下所示：

```
$options = array(
CURLOPT_COOKIE => "_myapp_session=" . $_COOKIE['_myapp_session'],
CURLOPT_RETURNTRANSFER => true,
CURLOPT_HTTPHEADER => array('Content-type: application/json') ,
CURLOPT_POSTFIELDS => $json_string
); 
```

# html - 在消息字段中隐藏滚动条

> ID：10939889
> 
> 赞同：1
> 
> 时间：2012-06-07T21:07:37.360
> 
> 标签：html, css

我正在尝试向网站添加消息字段。消息字段在除 IE 之外的所有浏览器中都可以正常工作。旁边有一个垂直滚动条一直显示。请帮我删除它。谢谢

![在此处输入图像描述](../Images/18e3aebe3e1dc006e27f2ff35cc713b7.png) 这是代码，

```
 <textarea name="message" cols="38" rows="12" id="message" style=" font-family: Verdana; color:#FFFFFF; font-size: 13px; background-color: #0E0E0F; border: 1px solid #740086; width:385px;" onFocus="if(this.value==this.defaultValue)this.value='';" onBlur="if(this.value=='')this.value=this.defaultValue;" margin-bottom:10px;="margin-bottom:10px;overflow: hidden;">Message</textarea> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T21:11:15.707

将此添加到您的样式中：

```
textarea { overflow: auto; } 
```

[在这里](http://css-tricks.com/snippets/css/remove-scrollbar-from-textarea-in-ie/)找到

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T21:09:38.493

添加`overflow:hidden`到 CSS。

```
<textarea
    name="message"
    cols="38"
    rows="12"
    id="message"
    style="font-family:Verdana; color:#FFFFFF; font-size:13px; background-color:#0E0E0F; border:1px solid #740086; width:385px;margin-bottom:10px;overflow:hidden;"
    onFocus="if(this.value==this.defaultValue)this.value='';"
    onBlur="if(this.value=='')this.value=this.defaultValue;">
Message
</textarea> 
```

您的 HTML 中也有语法错误：

```
this.value=this.defaultValue;" margin-bottom:10px;="margin-bottom:10px;overflow: hidden;"> 
```

这是[jsFiddle](http://jsfiddle.net/mTUpt/2/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T21:10:19.327

采用

```
textarea { overflow: auto; } 
```

# asp.net-mvc - 使用 MVC 从 highcharts ChartClickEvent 导航到另一个页面

> ID：10939891
> 
> 赞同：2
> 
> 时间：2012-06-07T21:07:47.490
> 
> 标签：asp.net-mvc, highcharts

我将 dotnet.highcharts 与 ASP.NET MVC 3 一起使用。

我有两个工作件。

我在注册/注册时有一个工作图表和一个工作页面。

我希望在单击图表正文时显示注册/注册页面。

图表

```
 Highcharts chart = new Highcharts("chart")
            .InitChart(new DotNet.Highcharts.Options.Chart
            {
                DefaultSeriesType = ChartTypes.Column,
                Width = width,
                Height = height,
                Events = new ChartEvents { Click = "ChartClickEvent" }
            })
            .AddJavascripFunction("ChartClickEvent", @"$.get('signup/signup')")
            .SetCredits(new Credits { Enabled = false })
            .SetTitle(new Title { Text = "Sign ups" })
            ...... 
```

ChartClickEvent 正在工作。当我单击图表时，将执行服务器端控制器和视图代码。我可以通过它。但是，浏览器不显示注册页面。

我觉得我错过了一些简单的东西。

有任何想法吗？TIA

# c# - C# 读取、修改然后将二进制数据写入文件。最好的会议？

> ID：10939893
> 
> 赞同：3
> 
> 时间：2012-06-07T21:08:03.493
> 
> 标签：c#, binary, bytearray

我一般是编程新手（我对编程概念的理解仍在增长。）。所以这个问题是关于学习的，所以请提供足够的信息让我学习，但不要太多，我不能，谢谢。（我还想了解如何使代码在项目中可重用。）

我正在从事的项目的目标包括：

1.  读取二进制文件。

2.  我知道我需要读取的偏移量以从该文件中查找特定的数据块。

3.  第一个偏移量是前 4 个字节（我的块末尾的偏移量）。

4.  第二个偏移量是从文件末尾开始的 16 个字节。我读了 4 个字节。（以十六进制给出块的大小）。

5.  第三个偏移量是前一个字节后的 4 个字节，读取 4 个字节（十六进制块开始的偏移量）。

6.  通过搜索 ASCII 文本和偏移量来定位块中要修改的部分。

现在我有了我的块的开始偏移量、结束偏移量和大小。这应该允许我将文件中的字节读入字节数组并提前知道数组的大小。

（问题：1\. 知道大小重要吗？除了验证。2\. 将文件的一部分读入字节数组以更改字节并覆盖文件的那部分是最好的方法吗？）

到目前为止，我已经设法在 MemoryStream 上使用 BinaryReader 从文件中读取偏移量。然后我找到我需要的数据块并将其读入一个字节数组。

我被困在几个方面：

*   二进制读/写的最佳实践是什么？
*   读取数据的最佳存储约定是什么？
*   当我需要修改字节时，我该怎么做。
*   我应该使用 FileStream 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T23:20:35.053

由于您既要读取又要写入，因此直接使用 FileStream 类（使用 FileMode.Open 和 FileAccess.ReadWrite）是有意义的。请参阅[MSDN 上的 FileStream 以](http://msdn.microsoft.com/en-us/library/system.io.filestream)获得一个很好的整体示例。

1.  您确实需要知道将从流中读取的字节数。请参阅[FileStream.Read 文档](http://msdn.microsoft.com/en-us/library/system.io.filestream.read)。
2.  从根本上说，如果您要使用并稍后修改它们的内容，则必须在某个时候将字节读入内存*。*因此，您*必须*制作一个内存副本（如果您一次读取可变长度的块，则使用 Read 方法是正确的方法）。

至于最佳实践，请务必在完成后处理您的流；例如：

```
using (var stream = File.Open(FILE_NAME, FileMode.Open, FileAccess.ReadWrite))
{
    //Do work with the FileStream here.
} 
```

如果你要做大量的工作，你应该异步地做这些工作。（让我们知道是否是这种情况。）

当然，在使用这些方法之前，请查看 FileStream.Read 文档和[FileStream.Write 文档。](http://msdn.microsoft.com/en-us/library/system.io.filestream.write)

读取字节最好通过预先分配一个内存中的字节数组来完成，该数组具有您要读取的长度，然后读取这些字节。以下将读取您感兴趣的字节块，让您对其进行处理，然后替换原始内容（假设块的长度没有改变）：

***编辑：根据对变量范围的评论，我添加了一个辅助方法来处理块。***

```
using (var stream = File.Open(FILE_NAME, FileMode.Open, FileAccess.ReadWrite))
{
    var chunk = new byte[numOfBytesInChunk];
    var offsetOfChunkInFile = stream.Position; // It sounds like you've already calculated this.
    stream.Read(chunk, 0, numOfBytesInChunk);

    DoWorkOnChunk(ref chunk);        

    stream.Seek(offsetOfChunkInFile, SeekOrigin.Begin);
    stream.Write(chunk, 0, numOfBytesInChunk);
}

private void DoWorkOnChunk(ref byte[] chunk)
{
    //TODO: Any mutation done here to the data in 'chunk' will be written out to the stream.
} 
```

# database - 通过 REST 接口保持数据库一致性

> ID：10939894
> 
> 赞同：0
> 
> 时间：2012-06-07T21:08:10.217
> 
> 标签：database, mobile

我在移动数据库上有一个本地数据库。每隔几分钟，设备就会查看其表并通过 REST 接口将任何未标记为已上传的数据发送到服务器。这是一个示例表：

```
id | name | phone | uploaded
1 | "bob" | "444" | 0 
```

通过 REST 接口发送的内容是：

```
name : "bob", phone : "444" 
```

服务器将响应：

```
status : "OK" 
```

移动设备收到此“OK”消息后，会将这些记录标记为`uploaded=1`。这应该可以正常工作，以使设备与实际发生的情况保持一致。问题是服务器可能会从移动设备接收到其中两条消息（无论出于何种原因），并将两条具有完全相同数据的记录插入服务器数据库。

有什么方法可以阻止这种情况发生？

我想到了服务器数据库中所有字段的唯一性索引，但我觉得必须有更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:39:57.077

您可以在服务器端或客户端处理此问题。

正如您已经注意到的那样，您可以避免服务器组件上的重复记录，只需在您的数据库表上添加一个 UNIQUE 约束，可能是您的 ID 列。这样，每次您尝试在 DBMS 上存储重复消息时，数据库都会抱怨。

在客户端，您只需在移动数据库表中添加一个 STATE 列：该列应该只支持三个值：UPLOAD_PENDING、UPLOAD_IN_TRANSIT 和 UPLOAD_FINISHED。此列旨在替换您的 UPLOADED 字段，并且应该在创建元组 (UPLOAD_PENDING)、您已经开始上传 (UPLOAD_IN_TRANSIT) 并且上传完成 (UPLOAD_FINISHED) 时更新。您应该在开始新的上传之前检查状态字段值以避免重复消息问题。

您可以选择其中任何一种方法，但我强烈建议您同时使用这两种方法。

# javascript - jquery id 选择器的问题

> ID：10939898
> 
> 赞同：1
> 
> 时间：2012-06-07T21:08:23.463
> 
> 标签：javascript, jquery, html, input

我有这段 HTML：

```
<div class="clearfix" id="menu-file-div">
  <label id="menu-file-label" for="id_menu_file">From File</label>
    <div class="input">
      <div id="file-upload">

        <input type="hidden" name="menu_file" id="id_menu_file" />

          <script type="text/javascript">var field_id = "id_menu_file";</script>
          <script type="text/javascript">var append_to_element_id = "menu-upload";</script>
          <script type="text/javascript">var loader_element_id = "newmenu-modal";</script>
        <noscript>
          <p>Please enable JavaScipt to upload a file.</p>
        </noscript>
      </div>
    </div>                
</div> 
```

在我的控制台中，当我尝试使用 jquery id 选择器时，它无法返回输入元素：

```
> $("#id_menu_file")
[] 
```

关于为什么会这样的任何想法？我觉得我错过了一些简单的东西。谢谢！

**编辑**- 其他一些 javascript 正在删除该元素，这就是它没有出现的原因。感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:39:49.327

重复我的第一个答案（这可能适用于稍后阅读这篇文章的其他人，尽管它“从根本上回答了这个问题”，但它被删除了）：

```
Is this HTML inside of a frame (iframe or regular)? That could make it difficult for jQuery to find your element, unless you give it the right context. 
```

要将上下文添加到 jQuery 选择器，您只需提供该上下文作为额外参数，例如： $('TD', aFrameElement);

如果有问题的元素不在框架内（zallarak 就是这种情况），那么问题几乎肯定是时间问题：jQuery 选择发生在元素加载到页面上之前。您可以通过添加以下代码（任何地方）来测试这个理论：

```
$(function(){
    console.log($("#id_menu_file"))
}); 
```

如果这是问题所在，只需将代码包装起来`$(function(){`即可解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:11:23.857

尝试 ：

```
$("#id_menu_file").get(0) 
```

$(selector) 返回数组

# xpath - 在 XPath 中选择两种不同条件下的节点

> ID：10939899
> 
> 赞同：1
> 
> 时间：2012-06-07T21:08:24.913
> 
> 标签：xpath, conditional-statements, intersect

我正在处理 XPath 中的查询，但不知何故我无法让它工作。当然，我的“车库”里有更多的汽车，但是为了解决这个问题，两个节点会这样做：

```
<garage>
<car>
     <data>
        <brand name="Mazda" model="MX5"></brand>
        <country>Japan</country>
        <ctype>Cabriolet</ctype>
        <motor fueltype="Super">
            <ps>146</ps>
            <kw>107</kw> 
            <umin>5000</umin>
        </motor>
        <price>22000</price>
     </data>
</car>

<car>
    <data>
        <brand name="Audi" model="RS6"></brand>
        <country>Germany</country>
        <ctype>Limousine</ctype>
        <motor fueltype="Super">
            <ps>580</ps>
            <kw>426</kw> 
            <umin>6250</umin>
        </motor>
        <price>108000</price>
     </data>
</car>
</garage> 
```

我想计算所有来自日本并且至少有 100 ps 的汽车（ps 表示德语中的马力）。在上面的示例中，结果应该是 1，因为只有 mx5 匹配这两个条件。我试过“和”，我试过“相交”，现在我出去了。谁能帮帮我，拜托！！！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:15:20.453

干得好：

```
/garage/car[data/country = 'Japan' and data/motor/ps >= 100] 
```

或者：

```
/garage/car[data/country = 'Japan'][data/motor/ps >= 100] 
```

或者：

```
/garage/car[data[country = 'Japan'][motor/ps >= 100]] 
```

以上都是等价的。要获得计数，请将上述任何内容用`count(...)`.

# c# - 如何在 C# 中编写一个好的奇怪重复模板模式 (CRTP)

> ID：10939907
> 
> 赞同：13
> 
> 时间：2012-06-07T21:09:01.613
> 
> 标签：c#, crtp

不久前，我想创建自己的数据映射器，它比普通的 ORM 简单得多。在这样做的过程中，我发现需要访问我的基类中继承类的类型信息。我的第一个想法是反射，但它太慢了（如果你使用反射，请查看[Fasterflect](http://fasterflect.codeplex.com/)，因为它“几乎”消除了反射的性能问题）。

所以我转向了一个解决方案，后来我发现它有自己的名字：The Curiously Recurring Template Pattern。这主要解决了我的问题，但是学习如何正确实现这种模式有点挑战。我必须解决的两个主要问题是：

1）如何让我的消费代码与我的通用对象一起工作，而无需知道创建对象的通用参数？

2) 如何在 C# 中继承静态字段？

具有挑战性的部分实际上是弄清楚问题。一旦我意识到我需要做什么，解决这些问题就很容易了。如果您发现自己需要 CRTP，您可能会发现自己需要回答这些问题……它们似乎齐头并进。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T21:09:02.457

## 在不知道泛型参数类型的情况下使用泛型

使用 CRTP 时，最好有一个非泛型基类（如果可能，抽象，但这不是太重要），你的“基”泛型类继承自。然后，您可以在非泛型基类上创建抽象（或虚拟）函数，并允许使用代码来处理您的对象，而无需知道泛型参数。例如：

```
abstract class NonGenBase
{
    public abstract void Foo();
}

class GenBase<T>: NonGenBase
{
    public override void Foo()
    {
        // Do something
    }
} 
```

现在使用不知道 T 应该是什么的代码仍然可以通过将对象视为基类的实例来调用对象上的 Foo() 过程。

## 如何解决静态字段继承问题

使用 CRTP 解决问题时，在继承类中提供对静态字段的访问通常是有益的。问题是 C# 不允许继承类访问那些静态字段，除非通过类型名称......在这种情况下，这通常似乎违背了目的。您可能无法想出一个清晰的示例来说明我在说什么，并且解释一个超出了此答案的范围，但是解决方案很简单，因此只需将其收藏在您的知识库中，当您发现需要它时你会很高兴它在那里:)

```
class GenBase<T>: NonGenBase
{
    static object _someResource;

    protected object SomeResource { get { return _someResource; } }
} 
```

这“模拟”了静态字段的继承。但是请记住，泛型类上的静态字段并不适用于所有泛型实现。每个通用实现都有自己的静态字段实例。如果您想要一个可用于所有实现的单个静态字段，那么您只需将其添加到您的非泛型基类中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-26T16:52:47.200

> 如何在 C# 中继承静态字段？

我知道您已经*很久*没有提出这个问题了，但是请注意，在[.NET 6 预览版中，您可以将`static abstract`成员放在一个界面上](https://github.com/dotnet/csharplang/blob/main/proposals/static-abstracts-in-interfaces.md)。（IIRC，此功能不会出现在 .NET 6 的版本中，它将在 .NET 7 之前处于预览状态）。

因此，您可以执行以下操作：

```
public interface IBoundedCollection
{
    public static abstract int MaximumItemCount { get; }
}

public abstract class BaseCollection
{
    public abstract int Count { get; }
    public abstract int GetMaximumItemCount();

    public abstract BaseCollection CreateUntypedCopy();
}

public abstract class BoundedCollection<TDerived> : BaseCollection
    where TDerived : BoundedCollection<TDerived>, IBoundedCollection
{
    public override int GetMaximumItemCount() => TDerived.MaximumItemCount;

    public abstract TDerived CreateTypedCopy();

    public override BaseCollection CreateUntypedCopy() 
        => CreateTypedCopy();
}

public class LimitTenCollection : BoundedCollection<LimitTenCollection>, IBoundedCollection
{
    public static int MaximumItemCount => 10;

    public override int Count { get; }

    public override LimitTenCollection CreateTypedCopy() => new LimitTenCollection();
} 
```

请注意以下事项：

*   您可以在`BaseCollection`不使用类型参数的情况下使用。例如，您可以使用`Count`、`GetMaximumItemCount()`和`CreateUntypedCopy()`。
*   `BoundedCollection<TDerived>`可以提供`MaximumItemCount`因为`TDerived`被限制为`IBoundedCollection`

# mysql - 删除时的 SQL 触发器

> ID：10939909
> 
> 赞同：-1
> 
> 时间：2012-06-07T21:09:04.453
> 
> 标签：mysql, triggers

我有一个小问题。我有 2 张桌子：

```
CREATE TABLE park(parkcode CHAR(5), name CHAR(15));

CREATE TABLE ticket(date_purchase_ticket TIMESTAMP, parkcode CHAR(5)); 
```

我想要做的是创建一个触发器，当我想从 table 中删除一行时`park`，触发器首先查看在某个日期之后是否有任何购买。只有在某个日期之后没有购买时，您才能从表中删除该行`park`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:13:19.760

您需要考虑创建一个过程，当您想从中删除一行时可以调用该过程`park`。

类似于以下内容：

```
DELIMITER //

CREATE PROCEDURE DeleteIfNoPurchases (IN code CHAR(5),
                                      IN date TIMESTAMP)
BEGIN
    IF (SELECT MAX(date_purchase_ticket)
         FROM ticket
         WHERE parkcode = code) < date THEN
        DELETE FROM park WHERE parkcode = code; 
    END IF;
END//

DELIMITER ; 
```

然后，您可以使用要删除的代码和要测试的时间戳来调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:17:17.127

您无法阻止使用触发器删除行。

# c - C中的字符串比较函数

> ID：10939911
> 
> 赞同：-6
> 
> 时间：2012-06-07T21:09:07.127
> 
> 标签：c, string

```
map[0][4]='\0';
city1[0][4]='\0';
strcpy(map[0],city1[0]);
map[0][0]='z';
printf("%s",map[0]);
printf("%s",city1[0]);
printf("%d \n",strcmp(map[0],city1[0])); 
```

这个函数的输出是`zail nail 12`

为什么会这样？我不明白什么`strcmp`？为什么是 12 而不是其他数字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T21:18:18.223

要回答你的问题，

```
strcmp("zail", "nail") 
```

正在评估为 12，因为它从“zail”中的“z”中减去“钉子”中的“n”，并且“z”-“n”= 12。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:11:48.677

你得到随机垃圾是因为你没有正确初始化你的数组。

代替

```
map[0][4]='\0';
city1[0][4]='\0'; 
```

尝试

```
memset(map[0], '\0', sizeof(map[0]));
memset(city1[0], '\0', sizeof(city1[0])); 
```

# python - Python将UTF字符从XML插入MySQL的问题

> ID：10939917
> 
> 赞同：3
> 
> 时间：2012-06-07T21:09:38.663
> 
> 标签：python, mysql, xml, utf-8

因此，我正在遍历多个大型 xml 文件并生成 MySQL 插入语句以将出租物业列表添加到数据库中。问题是，许多元素包含特殊字符，如 Å 或 ç 甚至一些破折号和项目符号。

我可以很好地获取元素，并且可以创建一个字符串来保存插入语句，但是一旦我尝试执行该语句，我就会被转储到下一个文件中。

我在自己的 try 块中插入了插入，我认为这只会让我继续下一个清单，而不是废弃 xml 文档的其余部分，但这并没有发生。

我已经尝试确保插入是 utf-8 编码的，但这并没有什么不同。

这是我得到的代码的要点：

```
try:
    print "About to read file: "+fullpath
    data = f.read()  #read the file into a string
    print "Data read from file, now closing: "+fullpath
    f.close()  #close the file, we don't need it any more
    dom = minidom.parseString(data)  #parse the xml
    #get the first child node -- <property_data>
    property_data = dom.firstChild
    properties = property_data.getElementsByTagName('property')
    for property in properties:
        try:
            print "getting details"
            details = property.getElementsByTagName('property_details')
            for detail in details:
                print "attempting to get detail values"
                try:
                     checkin = getElementValue('check_in', detail)
                     name = stripCDATA(getElementValue('name', detail))
                     checkout = getElementValue('check_out', detail)

                                ...etc, etc...

                      print "building insert string"
                      sql = u"""insert into PROPERTY(NAME, CHECKIN, CHECKOUT, etc...)
                                  values(%s,%s,%s,...)""".encode('utf-8')
                      print "starting insert with query:"
                      print sql % (name,checkin,checkout, etc...)
                      try: #HERE IS WHERE THE PROBLEM HAPPENS
                          cursor.execute(sql,(name, checkin, checkout, ...))
                          #display number of rows affected
                          print "Number of rows inserted: %d" % cursor.rowcount
                          conn.commit()
                      except Exception as (errno, strerror):
                          print "Problem inserting the property. Error({0}): {1}".format(errno, strerror)
                except Exception as (errno, strerror):
                    print "Problem with reading/inserting details. Error({0}): {1}".format(errno, strerror)
        except Exception as (errno, strerror):
            print "The loop broke with the following error({0}): {1}".format(errno, strerror)
            errCount += 1
            print "This has happened %d times" % (errCount)
except: #HERE IS WHERE I GET DUMPED TO
    print "Something bad happened while reading and inserting" 
```

正如你所看到的，我在不同的点打印了线条，所以我可以看到事情何时发生。

我知道它正确地解析了文件，我知道它正确地获取了我的所有元素，我知道它正确地构建了插入语句，并且只要我在我抓取的任何元素中的任何地方都命中了一个没有特殊字符的属性，我就知道它是正确插入数据库。只要它击中一个特殊角色，它就会崩溃，当它打破时，它会把我甩出比它应该的高 3 级。到目前为止，大喊大叫和拔头发是无效的。

有任何想法吗？

根据@deadly 的建议，我删除了所有 try...except 块并得到以下回溯：

> 回溯（最近一次通话最后）：
> 
> 文件“dbinsert2.py”，第 118 行，在 cursor.execute(sql,([bunch of var names]))
> 
> 文件“/usr/lib/python2.7/dist-packages/MySQLdb/cursors.py”，第 159 行，在执行 query = query % db.literal(args)
> 
> 文件“/usr/lib/python2.7/dist-packages/MySQLdb/connections.py”，第 264 行，字面返回 self.escape(o, self.encoders)
> 
> 文件“/usr/lib/python2.7/dist-packages/MySQLdb/connections.py”，第 202 行，在 unicode_literal 返回 db.literal(u.encode(unicode_literal.charset))
> 
> UnicodeEncodeError：“latin-1”编解码器无法在位置 20 编码字符 u'\u2013'：序数不在范围内（256）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:07:49.097

没有多少人会耐心地完成所有这些代码。

从摆脱每一次尝试开始......除了。没有它，Python 仍然会愉快地引发异常。

您只需要使用 try... 除非您想对除错误发现之外的异常进行一些特殊处理。在这个阶段打印报表是更好的朋友。此外，如果您放弃 try...excepts（至少是您使用它们的方式），Python 还将打印回溯，您也应该将其与代码一起发布。

整理好代码后，请发布此回溯。

**编辑**：感谢您的回溯。现在我们可以看到您使用的编码 (utf-8) 与 MySQLdb Python 库使用的默认编码 (latin-1) 之间存在不匹配。您需要`charset='utf8'`作为参数传递给`connect()`. （'utf8' 中没有破折号，因为这是 MySQL 存储其字符集列表的方式。）

# node.js - NodeJS + CoffeeScript 工作流程

> ID：10939924
> 
> 赞同：5
> 
> 时间：2012-06-07T21:10:14.313
> 
> 标签：node.js, workflow, coffeescript

我最近开始学习nodeJS。作为一个长期的咖啡脚本爱好者，我自然决定将它与 node 一起使用。用节点编写长时间运行的进程我发现自己经常重新启动程序。快速谷歌后，我找到了[node-supervisor](https://github.com/isaacs/node-supervisor)。Node-supervisor 只是监视当前目录的文件更改并自动为您重新启动您的应用程序。

在我开始使用supervisor之前，我使用的是coffeescript，它`--watch`可以选择在我的coffescripts发生变化时自动重新编译它们。

所以问题是这样的，主管和咖啡脚本重新编译器不能很好地结合在一起。

*   首先我跑`coffee --compile --watch .`
*   然后在一个新终端中我运行`supervisor app.js`

在那个主管永远重启我的应用程序之后，即使源文件没有更改。

**所以问题是，你使用 nodeJS 和 CoffeeScript 的工作流程是什么？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T22:12:01.257

你正在做的是某种多余的。

这里有一些提示：

*   安装 CoffeeScript 后，你有一个名为的可执行文件`coffee`，你可以这样做（无需编译你的咖啡脚本文件）：

    `coffee yourfile.coffee`

*   如何将其与`supervisor`？
    如果您阅读过 Github 页面上的[自述文件](https://github.com/isaacs/node-supervisor#node-supervisor--)，您会注意到主管也可以执行 CoffeeScript 文件。您需要做的就是：

    `supervisor yourfile.coffee`

# drupal - 使用 suExec/suPHP 和符号链接的 Drupal 多站点设置

> ID：10939928
> 
> 赞同：1
> 
> 时间：2012-06-07T21:10:24.310
> 
> 标签：drupal, drupal-7, cpanel, suphp, suexec

我想要维护一个 Drupal 副本，但是很多站点都从该副本运行。

我正在使用 cPanel 创建用户并添加带宽和磁盘空间限制，因此我需要将上传文件放在 cPanel 用户的主目录中。用户的站点配置不应该被其他用户查看，因此我相信我需要使用某种 suExec 或 suPHP。

这是我尝试过的指南：http: [//drupal.org/node/1274642](http://drupal.org/node/1274642)

基本上我有一个用户输入子域的前端，然后通过 cPanel API 我为该子域创建一个用户并添加带宽和磁盘空间限制。

任何人都可以帮助创建此设置吗？我一直在考虑创建一个从 /home/dp1234/public_html 到 /path/to/drupal/copy 的符号链接，但是每个人都可以查看 Drupal 站点文件夹中的设置文件 - 我想？

我不断收到奇怪的权限问题。我让它工作了几次，但突然之间它没有工作。

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T17:42:54.203

所以我终于弄清楚了为什么它不起作用。这是一个被检查为真的 Apache 配置的东西：[x] SymLinksIfOwnerMatch

我取消选中，最后一切都开始工作了！

# c# - asp.net TextBox 预测文本

> ID：10939947
> 
> 赞同：2
> 
> 时间：2012-06-07T21:12:01.040
> 
> 标签：c#, asp.net, drop-down-menu, textbox

我有一个对于下拉列表来说有点太大的项目列表，我想添加一个搜索文本框，该文本框基于输入将下拉匹配项目列表。

因此，如果您输入 John，下面的列表将显示以 John 开头的所有项目。

该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T21:16:33.023

您所指的功能通常标记为“自动完成”。

如果您完全不熟悉如何执行此操作，我建议您遵循教程或利用预先存在的解决方案。

有一个使用 ASP.NET AJAX 控件工具包的示例，请访问： [http ://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)

基本思想是，当输入改变时，JavaScript 将向服务器发送一个异步 HTTP 请求并找出自动完成项应该是什么，然后它会用返回的值填充下拉选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:31:51.480

那么您想要查看的是可用的自动完成库。在您的情况下，ASP.NET AJAX 控件工具包具有此功能。

*   [http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)

还有其他选项，例如：

*   [http://demos.telerik.com/aspnet-ajax/combobox/examples/functionality/autocompleteclientside/defaultcs.aspx](http://demos.telerik.com/aspnet-ajax/combobox/examples/functionality/autocompleteclientside/defaultcs.aspx)。这是来自telerik，但不是免费的。
*   [http://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/) - 很新，看起来很有前途，但不是 ASP.NET 特定的。

# primefaces - primefaces 从表中导出数据，其中包含 ui:repeat 中的列内容

> ID：10939948
> 
> 赞同：4
> 
> 时间：2012-06-07T21:12:11.907
> 
> 标签：primefaces, facelets, mojarra

我有一个在数据表上显示的主详细信息结果集。

获取详细信息并在其中呈现以组合成单个输出字符串，该字符串保留在一列中。

```
<p:column>
  <f:facet name="header">BF Order Contents</f:facet>
  <ui:repeat value="#{order.listOfOrderDetails}" var="orderitem" varStatus="orderitemstatus" >
    <h:outputText value="#{orderitem.product.brand.name}-#{orderitem.product.name}#{orderitemstatus.last ? '':', '}" />
  </ui:repeat>
</p:column> 
```

在数据表上，该列显示为“Some Brand-Some Product, Other Brand-Other Product”

但是当我导出到 EXCEL 时，我看到：

com.sun.faces.facelets.component.UIRepeat@783622ba

在那一栏中。

有谁知道我如何克服这个问题（仅在 xhtml 中）。我不想更改支持 bean 来生成详细信息字符串。

顺便说一句：我在 PF3.2、Mojarra 2.1.8、EL 2.2.1-b04、JDK1.7、Tomcat7

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-18T12:05:36.033

可以通过以下方式解决。

1.  不应使具有 ui:repeat 的列可导出，即为 p:column 设置 exportable="false" 属性。
2.  添加一列以显示字符串属性（编写业务逻辑将字符串列表转换为逗号分隔的字符串并将其设置为字符串属性）
3.  将样式设置为显示：无；对于新列。
4.  因此在 ui 显示期间，将显示前一列，在导出期间将显示新列，并显示逗号分隔的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:58:46.527

我真的不认为这是可能的，即使覆盖了`exporter class`primefaces 源中的内容，它也会变得复杂......

你可能更好`alter the backing bean`

此外，您可以在与我打开的问题相关的问题上添加星号[功能请求：数据表自定义过滤器功能 - filterFunction（如 sortFunction 用于排序）](http://code.google.com/p/primefaces/issues/detail?id=4010&sort=-id&colspec=ID%20Stars%20Type%20Status%20Priority%20TargetVersion%20Reporter%20Owner%20Summary)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-27T21:27:19.160

您可以编写一个 facelet 函数，在 Java 中进行迭代并返回一个字符串.. 这将起作用，只需将其放入 outputText，或者执行 2 列，一列将可导出为 false，另一列使 CSS 显示：无

# python - 简单的python正则表达式，冒号后匹配

> ID：10939950
> 
> 赞同：6
> 
> 时间：2012-06-07T21:12:14.963
> 
> 标签：python, regex

我有一个简单的正则表达式问题让我发疯。我有一个变量`x = "field1: XXXX field2: YYYY"`。我想检索`YYYY`（注意这是一个示例值）。我的方法如下：

```
values = re.match('field2:\s(.*)', x)
print values.groups() 
```

它不匹配任何东西。我能得到一些帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T21:15:34.540

你的正则表达式很好

```
field2:\s(.*) 
```

试试这个代码

```
match = re.search(r"field2:\s(.*)", subject)
if match:
    result = match.group(1)
else:
    result = "" 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-07T21:16:35.273

[`re.match()`](http://docs.python.org/library/re.html#re.matchv)仅匹配字符串的开头。你想[`re.search()`](http://docs.python.org/library/re.html#re.search)改用。

此外，您应该使用逐字字符串：

```
>>> values = re.search(r'field2:\s(.*)', x)
>>> print values.groups()
('YYYY',) 
```

# java - 无法从 .dat 文件中读取可序列化类

> ID：10939951
> 
> 赞同：0
> 
> 时间：2012-06-07T21:12:17.233
> 
> 标签：java, objectoutputstream, objectinputstream

我尝试编写一个密钥持有者，我想使用 ObjectOutputStream 将密码写入 .dat 文件，然后使用 ObjectInputStream 读取它们。这是我编写对象的代码：

```
public void toFile()
{    
    try
    {
        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream("passwords.dat"));     
        for(int i = 0; i<this.nrOfPW; i++)
        {
            if(this.PWlist[i] instanceof longPW)
            {
                oos.writeObject((longPW)this.PWlist[i]);
            }
            else
            {
                oos.writeObject((PinPW)this.PWlist[i]);
            }   
        }
        oos.close();
    }
    catch(IOException e)
    {
        e.getStackTrace();
    }
} 
```

这似乎可行，但是当我尝试再次读取文件并将对象放入我的 PWlist 数组中时，它说 PinPW 不可序列化，即使 PinPW 实现了 Serializable 并且已导入。PinPW (Info) 的基类也实现了 Serializable 并导入它。这是我读取文件的代码：

```
public void fromFile() 
{
    try 
    {
        ObjectInputStream objIn =  new ObjectInputStream(new FileInputStream("passwords.dat"));
        while(objIn.readObject() != null)
        {
            if(this.nrOfPW == this.PWlist.length)
            {
                expand(10);
            }
            if(objIn.readObject() instanceof PinPW)
            {
                this.PWlist[this.nrOfPW] = (PinPW)objIn.readObject();
                this.nrOfPW++;
            }
            else
            {
                this.PWlist[this.nrOfPW] = (longPW)objIn.readObject();
                this.nrOfPW++;
            }
        }
        objIn.close();
    }
    catch(EOFException e)
    {
        e.getStackTrace();
    }
    catch(IOException ex)   
    {
        ex.printStackTrace();   
    }
    catch(ClassNotFoundException ex)
    {
        ex.printStackTrace();   
    }
} 
```

PWlist数组是一个Info数组，PinPW和longPW扩展了Info。

我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:38:28.563

让我们修复“第一个错误，首先”......

在这段代码中：

```
while(objIn.readObject() != null)                         // reads object, tests then *discards* it
{
  ...

  if(objIn.readObject() instanceof PinPW)                 // reads object, tests then *discards* it
  {
    this.PWlist[this.nrOfPW] = (PinPW)objIn.readObject(); // conditionally read an object
    this.nrOfPW++;
  }
  else
  {
    this.PWlist[this.nrOfPW] = (longPW)objIn.readObject(); // conditionally read an object
    this.nrOfPW++;
  }
} 
```

每次循环迭代时，您实际上都会读取*3 个*对象。第一次读取对象以检查流中是否存在对象，下次读取对象并确定其类型时，将其丢弃。 *然后*您读取第三个对象并根据*丢弃*对象的类型对其进行转换。

此外，正如[EJP](https://stackoverflow.com/users/207421/ejp)正确指出的那样，确定 ObjectInputStream 的流结束的正确方法是捕获文件结束异常。

你想这样做：

```
 try
 {
   while (true)
   {
     final Object o = objIn.readObject();            // read the object from the stream

     ...

     if (o instanceof PinPW)
     {
       this.PWlist[this.nrOfPW] = (PinPW) o;         // cast to correct type
       this.nrOfPW++;
     }
     else
     {
       this.PWlist[this.nrOfPW] = (longPW) o;        // cast to correct type
       this.nrOfPW++;
     }
   }
 }
 catch (EOFException e)
 {
   // end of stream reached ...
   // ... close the file descriptor etc ...
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:48:04.897

你这里有问题。

```
while(objIn.readObject() != null)
    {
        if(this.nrOfPW == this.PWlist.length)
        {
            expand(10);
        }
        if(objIn.readObject() instanceof PinPW)
        {
            this.PWlist[this.nrOfPW] = (PinPW)objIn.readObject();
            this.nrOfPW++;
        }
        else
        {
            this.PWlist[this.nrOfPW] = (longPW)objIn.readObject();
            this.nrOfPW++;
        }
    } 
```

您正在多次阅读一个对象。尝试保存它，然后使用它。if(objIn.readObject() instanceof PinPW) 读取一次，读取两次，this.PWlist[this.nrOfPW] = (PinPW)objIn.readObject(); 读了三遍，而应该只有一次。PS：在一段时间内使用 Greg Kopff 语法并且不使用 final 关键字，因为您想在其中保存更多对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T22:14:46.080

我只是想指出`toFile()`函数中的 if-else 块是完全没有意义的。`writeObject()`接受一个对象参数。它不关心它是什么类型的 Object，只要它是可序列化的。

虽然您的`fromFile()`方法存在严重缺陷，但它不会导致`NotSerializableException`. 我相信您所指的异常实际上发生在`toFile()`.

原因很简单：您没有完全阅读和理解[ObjectOutputStream](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html)的文档。具体来说，对象及其所有非瞬态字段及其祖先类中的所有非瞬态字段都必须实现可序列化。它还必须有一个公共的无参数构造函数。

# jquery - jQTouch不再支持Android？

> ID：10939952
> 
> 赞同：4
> 
> 时间：2012-06-07T21:12:19.450
> 
> 标签：jquery, android, cordova, android-webview, jqtouch

我有一个使用 jqtouch.com 的 jQTouch (jQTouch-1.0-b4-rc) 的精简页面，该页面拒绝与 Android 4 WebView (phonegap/cordova、ICS 浏览器等) 一起使用。它在许多其他浏览器（iOS、Safari、FF、Chrome、IE）中运行良好，但加载后无法在 Android 4 上导航，这表明 jQTouch 与 Android 不兼容。页面加载，但导航不起作用。我已经在两部不同的手机和模拟器中复制了这个。它一直被打破。一探究竟：

[http://workgroup.ca/jqt_fails_on_android/](http://workgroup.ca/jqt_fails_on_android/)

我已经尝试将 jQTouch 与 zepto 和 jquery 1.4.2、1.7.0 和 1.7.2 一起使用，但我真的不认为这是问题所在，因为它在所有其他浏览器中都能按预期工作。我认为 jQTouch 不再兼容 Android webkit WebView。我一直在 Android 4.0.3 和 4.0.4 上进行测试。它在两台设备上和使用默认浏览器、chrome beta 和 PhoneGap 的模拟器中失败。

有人可以看看这个精简页面并向我显示一个错误，或者确认 jQTouch 不再支持 Android。

为此，是否有人真正拥有在 Android 4 上运行的 jQTouch 应用程序？如果是这样，什么是 URL 以及哪些文件版本适合您？

谢谢，

默里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T13:34:38.407

只需将 moxy 的评论放在“答案”部分。

android 上的 jQTouch 需要`useFastTouch: false`

```
var jQT = new $.jQTouch({ 
      statusBar: 'black', 
      useFastTouch: false 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T17:36:02.993

我尝试在我的 Android 手机上使用您的应用程序。泛泰爆裂。它工作得很好。不知道你现在是否改变了它或什么。

# c# - 处理mvc申请订单提交的建议

> ID：10939953
> 
> 赞同：0
> 
> 时间：2012-06-07T21:12:30.303
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, model-view-controller

我目前正在创建一个 ASP.Net MVC 3.0 # 订单处理应用程序。该应用程序允许用户将产品添加到他们的订单中，添加付款，然后提交订单。

我目前处于提交订单的阶段。我正在寻找有关如何实现以下目标的建议。用户点击提交按钮提交订单。此时我希望在处理订单时显示一个处理图标，如果发生错误，用户将被重定向到支付页面，如果处理成功完成，则重定向到确认页面。

我想做的是，当按下提交按钮时，一个包含处理图标的视图返回给用户，而在后台通过异步任务或异步控制器，订单正在处理，完成后，重定向发生到适用的页面。这听起来像是实现这一目标的最佳方式吗？

我的下一个问题是，防止重复提交的最佳方法是什么，例如。用户在 Web 浏览器中按 F5 键？

最后我的最后一个问题是，由于订单处理处理了许多事件，我可能需要使其具有事务性，一个失败全部失败等等。实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T03:53:25.917

使用可以使用 AJAX.BeginForm。它将允许异步发布避免回发，直到触发 onsuccess 方法。

这是带有示例的帖子。 [将 Ajax.BeginForm 与 A​​SP.NET MVC 3 Razor 一起使用](https://stackoverflow.com/questions/5410055/using-ajax-beginform-with-asp-net-mvc-3-razor)

祝你好运

# java - 如何将一个接口上的实现者转换为另一个接口？

> ID：10939956
> 
> 赞同：3
> 
> 时间：2012-06-07T21:12:39.467
> 
> 标签：java, generics

鉴于以下情况，我很难找到一种似乎没有错的方法来做到这一点

```
public interface IType {}
public interface IMode {}

public interface Factory<T extends IType> {
   IMode get(T o);

   Class<T> getIType();
} 
```

我有上面的接口和一个很大的类列表，这些类都实现了`IType`以及`IMode`对应的工厂。

我需要能够从一种转换到另一种，例如，

```
public class A implements IType {}
public class One implements IMode {}

public class AToOne implements Factory<A> {
    public IMode get(A o){
       return new One();
    }

    public Class<A> getIType(){
       return A.class;
    }
} 
```

**鉴于这些类是一对一的映射**，即对于每个具体`IType`都有一个且只有一个`IMode`具有相应工厂的具体，**我将如何将 s 列表转换为`IType`s 列表`IMode`？**

IE。

```
private List<Factory<? extends IType>> factoryList;

public List<IMode> getConversions(List<? extends IType> types){
    ???
} 
```

* * *

我的第一次尝试并不顺利，

```
//Fill this using the getIType() method from each factory
Map<Class<IType>, Factory<? extends IType>> factoryList = new HashMap<Class<IType>, Factory<? extends IType>>();

 public List<IMode> getConversions(List<IType> types){
    List<IMode> modes = new ArrayList<IMode>();

    for(IType type : types){
        //Derp
        Factory<? extends IType> factory = factoryList.get(type.getClass());
        //Error
        factory.get(factory.getIType().cast(type));
    }
} 
```

错误：

```
 The method get(capture#12-of ? extends IType) in the type
 Factory<capture#12-of ? extends IType>
 is not applicable for the arguments (capture#14-of ? extends IType) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T05:19:33.187

就像我在评论中提到的那样，您只需要使用通用帮助器方法来访问地图，该地图执行未经检查的强制转换，从`Factory<? extends IType>`匹配传入的类型的位置`Factory<T>`：`T`

```
Map<Class<? extends IType>, Factory<? extends IType>> factoryList =
        new HashMap<Class<? extends IType>, Factory<? extends IType>>();

private <T extends IType> IMode convert(T iType) {
    //unchecked cast - implementation must guarantee map holds correct data
    Factory<T> factory = (Factory<T>)factoryList.get(iType.getClass());
    //then convert
    return factory.get(iType);
} 
```

您可以从循环中调用此辅助方法：

```
public List<IMode> getConversions(List<IType> types) {
    List<IMode> modes = new ArrayList<IMode>(types.size());
    for (IType type : types) {
        IMode iMode = convert(type);
        modes.add(iMode);
    }
    return modes;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:41:37.347

简单的解决方案如下：

```
interface IFoo {
}

interface IBar {
}

private static class Foo implements IFoo {
}

private static class Bar implements IBar {
}

interface IFoo2IBarConverter<B extends IBar, F extends IFoo> {
    B convert(F foo);
}

private static class Foo2BarConverter implements IFoo2IBarConverter<Bar, Foo> {
    public Bar convert(Foo foo) {
        return new Bar();
    }
}

private static class IFoo2IBarFactory {
    private static HashMap<Class<? extends IFoo>, IFoo2IBarConverter<? extends IBar, ? extends IFoo>> converters = new HashMap<>();

    static {
        converters.put(Foo.class, new Foo2BarConverter());
    }

    public static<F extends IFoo, B extends IBar> B convert(F foo) {
        // ugly unchecked cast here
        IFoo2IBarConverter<B, F> converter = (IFoo2IBarConverter<B, F>) converters.get(foo.getClass());
        return converter.convert(foo);
    }
}

public static void main(String[] args) {
    Foo foo = new Foo();
    IBar bar = IFoo2IBarFactory.convert(foo);
} 
```

您只需使用一个 HashMap ，它将作为某个转换器接口的子类型的特定类映射`IFoo`到某个转换器接口。转换器获取`IFoo`实例并将其转换为`IBar`.. 实际上转换为我们想要的特定类。可悲的是，我们得到了一个丑陋的演员阵容`IFoo2IBarFactory.convert()`，我认为没有任何办法可以避免这种情况。仍然至少它只是在一个本地化的位置，并且有正确的评论和一个 SuppressWarning 你可以忍受它，我想

# python - 在字典中添加数组，在更多数组中？

> ID：10939957
> 
> 赞同：0
> 
> 时间：2012-06-07T21:12:45.273
> 
> 标签：python

在字典中添加数组，在更多数组中。

我问了一个问题，Jakebird451 帮助了我。但我现在有很多问题。

```
fruits = [{
    'name':"apple",
    'color':["red","green"],
    'weight':1
}, {
    'name':"banana",
    'color':["yellow","green"],
    'weight':1
}, {
    'name':"orange",
    'color':"orange",
    'weight':[1,2]
}, {
    'name':"pear",
    'color':"orange",
    "size" : [
                    {
                        "weight" : 4,
                        "mass" : 1.6
                    },
                    {
                        "weight" : 4,
                        "mass" : 2
                    },
                    {
                        "weight" : 4,
                        "mass" : 2.5
                    }
                ]
}] 
```

如果有另一个字典和另一个数组怎么办？我如何使用这个函数来获得重量和质量？

```
def findCarByColor(theColor):
    array=[]
    for x in carList: 
        if theColor in x['Color']:
            array.append(x['name']+" "+x['weight'])
    return array
print findit2("red") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:29:38.547

如果你想处理这两种情况，假设你有`fruits`问题中的变量：

```
def findItByColor(theColor):
    array=[]
    for x in fruits: 
        if theColor in x['color']:
            try:
                array.append(x['name']+" "+ str(x['weight']))
            except KeyError:
                size = ' '.join( [ '[Weight %s Mass %s]'
                                   % (str(item['weight']),str(item['mass']))
                         for item in x['size'] ])
                array.append( x['name']+" "+ size )
    return array

print findItByColor("orange") 
```

这打印：

```
['orange [1, 2]', 'pear [Weight 4 Mass 1.6] [Weight 4 Mass 2] [Weight 4 Mass 2.5]'] 
```

虽然此查询：

```
print findItByColor("green") 
```

返回：

```
['apple 1', 'banana 1'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:28:03.487

看起来您已经在字典中创建了“大小”键的重量和质量元素。

您的代码需要相应地修改：

```
def findCarByColor(theColor):
    array=[]
    for x in carList: 
        if theColor in x['Color']:
            array.append(x['name']+" "+x['size']['weight'] +" "+x['size']['mass'] )
    return array
print findit2("red") 
```

但是，这仅适用于您的“梨”示例，因为您存储重量值的方式不一致。

**编辑：**

您在示例中不断更改基础数据结构，这意味着 findCarByColor() 的代码也需要更改。

我会建议

1.  准确确定您需要存储的数据
2.  标准化您的数据结构。为什么“梨”的字典有一个大小列表，而其他的却没有？通过尽可能保持数据简洁和一致，您可以更简单地操作它（如在您的函数中）。

# ruby-on-rails - 堆栈级别太深（更改模型继承时）

> ID：10939960
> 
> 赞同：1
> 
> 时间：2012-06-07T21:12:59.590
> 
> 标签：ruby-on-rails, ruby, class-table-inheritance

我正在尝试使用[citier gem](https://github.com/PeterHamilton/citier)以下列方式转换一些已经存在的模型。到目前为止，这有效：

创建的模型：

```
Attachable < ActiveRecord::Base
Link < Attachable 
```

我添加`acts_as_citier`到两个模型中，创建并运行迁移没有问题。数据库视图也被创建。现在，如果我尝试对现有模型执行此操作：

前：

```
SpecialLink < ActiveRecord::Base 
```

后：

```
SpecialLink < Link 
```

然后我尝试运行类似`rails g migration`or的任何命令`rails console`，我得到：

`script/rails:6: stack level too deep (SystemStackError)`

不幸的是，除了怀疑我在某处有无限循环之外，这并没有告诉我很多。有谁知道这可能是什么原因造成的？或者知道我可以在哪里查看或获取有关该问题的更多信息？不得不从头开始重新创建模型以与 citier 合作，这对我来说不是一个好的解决方案......

# javascript - Javascript：读取 cookie

> ID：10939964
> 
> 赞同：0
> 
> 时间：2012-06-07T21:13:07.997
> 
> 标签：javascript

我看到很多很多通过java脚本读取cookie的函数，但我只想在一个变量中使用它一次，我是JS的新手。

这是我的代码

```
var TheNumber = (Math.random() + '') * 1000000000000000000;
document.cookie= "rand=" + TheNumber.toString() + ";path=/";
var AdServer = {
    tile: 1,
    mock: false,
    ord: (Math.random() + "") * 1000000000000000000 + '?', 
```

我想用 rand cookie 中的值替换 ord 部分。

你能指导我以下几点：我需要一个函数吗？如果是这样，我应该把它放在哪里？我该怎么称呼它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:34:49.437

我发现使用 JavaScript 从 cookie 中写入/读取的最简单（也是最灵活）的方法是使用带有 getter/setter 方法的全局对象。

document.cookie 上的 Mozilla 开发文档页面有一个很好的文档示例：[https ://developer.mozilla.org/en/DOM/document.cookie](https://developer.mozilla.org/en/DOM/document.cookie)

您如何/在哪里实例化然后引用该对象取决于程序的其余部分，但为简单起见，假设我们只是在全局命名空间中并且不担心变量冲突等：

```
var docCookies = {
    getItem: function (sKey) {  
      if (!sKey || !this.hasItem(sKey)) { return null; }  
      return unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"), "$1")); 
    },
    setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {  
      if (!sKey || /^(?:expires|max\-age|path|domain|secure)$/.test(sKey)) { return; }  
      var sExpires = "";  
      if (vEnd) {  
        switch (typeof vEnd) {  
          case "number": sExpires = "; max-age=" + vEnd; break;  
          case "string": sExpires = "; expires=" + vEnd; break;  
          case "object": if (vEnd.hasOwnProperty("toGMTString")) { sExpires = "; expires=" + vEnd.toGMTString();  } break;  
        }  
      }  
      document.cookie = escape(sKey) + "=" + escape(sValue) + sExpires + (sDomain ? "; domain=" + sDomain : "") + (sPath ? "; path=" + sPath : "") + (bSecure ? "; secure" : "");  
    },
  hasItem: function (sKey) { return (new RegExp("(?:^|;\\s*)" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=")).test(document.cookie); }  
} 
```

然后设置你的cookie：

```
docCookies.setItem('rand', (Math.random()* 1000000000000000000).toString()); 
```

并得到它：

```
docCookies.getItem('rand'); 
```

所以把它们放在一起：

```
var docCookies = {
    getItem: function (sKey) {  
      if (!sKey || !this.hasItem(sKey)) { return null; }  
      return unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"), "$1")); 
    },
    setItem: function (sKey, sValue, vEnd, sPath, sDomain, bSecure) {  
      if (!sKey || /^(?:expires|max\-age|path|domain|secure)$/.test(sKey)) { return; }  
      var sExpires = "";  
      if (vEnd) {  
        switch (typeof vEnd) {  
          case "number": sExpires = "; max-age=" + vEnd; break;  
          case "string": sExpires = "; expires=" + vEnd; break;  
          case "object": if (vEnd.hasOwnProperty("toGMTString")) { sExpires = "; expires=" + vEnd.toGMTString();  } break;  
        }  
      }  
      document.cookie = escape(sKey) + "=" + escape(sValue) + sExpires + (sDomain ? "; domain=" + sDomain : "") + (sPath ? "; path=" + sPath : "") + (bSecure ? "; secure" : "");  
    },
  hasItem: function (sKey) { return (new RegExp("(?:^|;\\s*)" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=")).test(document.cookie); }  
}
//set our cookie
docCookies.setItem('rand', (Math.random()* 1000000000000000000).toString()); 
```

然后当您想要检索 cookie 值时，在您的代码中稍后/其他地方：

```
var AdServer = {
    tile: 1,
    mock: false,
    ord: docCookies.getItem('rand')
}; 
```

现在，如果您检查 AdSever.ord，它将等于`rand`您之前设置的 cookie 中的随机数。

```
console.log(AdServer.ord); 
```

# php - 在 Dreamweaver 表单中使用多个复选框

> ID：10939965
> 
> 赞同：0
> 
> 时间：2012-06-07T21:13:08.193
> 
> 标签：php, mysql, dreamweaver

我有一个内置在 Adob​​e Dreamweaver 中的表单。它可以工作，但是当复选框被选中时，最后一个复选框值将提交给数据库。

Dreamweaver 中是否有任何选项可以使表单使用所有复选框？

```
<?php require_once('Connections/MySQL_CSFTDB.php'); ?>
<?php
if (!function_exists("GetSQLValueString")) {
function GetSQLValueString($theValue, $theType, $theDefinedValue = "", $theNotDefinedValue   = "") 
{
  if (PHP_VERSION < 6) {
    $theValue = get_magic_quotes_gpc() ? stripslashes($theValue) : $theValue;
  }

  $theValue = function_exists("mysql_real_escape_string") ?     mysql_real_escape_string($theValue) : mysql_escape_string($theValue);

  switch ($theType) {
    case "text":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;    
    case "long":
    case "int":
      $theValue = ($theValue != "") ? intval($theValue) : "NULL";
      break;
    case "double":
      $theValue = ($theValue != "") ? doubleval($theValue) : "NULL";
      break;
    case "date":
      $theValue = ($theValue != "") ? "'" . $theValue . "'" : "NULL";
      break;
    case "defined":
      $theValue = ($theValue != "") ? $theDefinedValue : $theNotDefinedValue;
      break;
  }
  return $theValue;
}
}

$editFormAction = $_SERVER['PHP_SELF'];
if (isset($_SERVER['QUERY_STRING'])) {
  $editFormAction .= "?" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) {
  $insertSQL = sprintf("INSERT INTO articles (articletitle, articledescription) VALUES     (%s, %s)",
                       GetSQLValueString($_POST['articletitle'], "text"),
                       GetSQLValueString($_POST['articledescription'], "text"));

  mysql_select_db($database_MySQL_CSFTDB, $MySQL_CSFTDB);
  $Result1 = mysql_query($insertSQL, $MySQL_CSFTDB) or die(mysql_error());
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Untitled Document</title>
<link href="twoColLiqLtHdr.css" rel="stylesheet" type="text/css" /><!--[if lte IE 7]>
<style>
.content { margin-right: -1px; } /* this 1px negative margin can be placed on any of the     columns in this layout with the same corrective effect. */
ul.nav a { zoom: 1; }  /* the zoom property gives IE the hasLayout trigger it needs to     correct extra whiltespace between the links */
</style>
<![endif]-->
</head>

<body>

<div class="container">
  <div class="header"><!-- end .header --></div>
  <div class="sidebar1">
     <ul class="nav">
      <li><a href="index.php">Home</a></li>
      <li><a href="#">Search</a></li>
      <li><a href="addnew.php">Add New Article</a></li>
      <li><a href="addnew.php">Article Admin.</a></li>
      <li><a href="#">Tag Admin.</a></li>
    </ul>
    <p><!-- end .sidebar1 --></p>
</div>
  <div class="content">
    <h1>Article Database</h1>
    <p>- Add a new article.</p>
    <form action="<?php echo $editFormAction; ?>" id="form1" name="form1" method="POST">
      <table width="100%" border="0" cellpadding="6">
        <tr>
          <td width="29%" align="right"><label for="articletitle">Article Title:</label>    </td>
          <td width="71%" align="left"><input name="articletitle" type="text" id="articletitle" size="50" /></td>
        </tr>
        <tr>
          <td align="right"><label for="articleorganization">Article or Organization:</label></td>
          <td align="left"><input name="articleorganization" type="text" id="articleorganization" size="50" /></td>
        </tr>
        <tr>
          <td align="right"><label for="articledate">Access Date:</label></td>
          <td align="left"><input name="articledate" type="text" id="articledate" size="50" /></td>
        </tr>
        <tr>
          <td align="right"><label for="articledescription">Article Description:</label></td>
          <td align="left"><input name="articledescription" type="text" id="articledescription" size="50" /></td>
        </tr>
        <tr>
          <td colspan="2" align="center" valign="bottom"><p>Article Tags</p></td>
        </tr>
        <tr>
          <td align="right">&nbsp;</td>

        <br />
        <label>
          <input type="checkbox" name="CheckboxGroup1" value="option 1" id="CheckboxGroup1_0" />
          Checkbox 1</label>
        <br />
        <label>
          <input type="checkbox" name="CheckboxGroup1" value="option 2" id="CheckboxGroup1_1" />
          Checkbox 2</label>
          <td align="left"><p>
            <br />
            <br />
          </p></td>
        </tr>
        <tr>
          <td align="right">&nbsp;</td>
          <td align="left"><p><br />
          </p></td>
        </tr>
        <tr>
          <td align="right">&nbsp;</td>
          <td align="left">&nbsp;</td>
        </tr>
        <tr>
          <td colspan="2" align="center" valign="middle"><input type="submit" name="submit" id="submit" value="Submit" /></td>
        </tr>
      </table>
      <input type="hidden" name="MM_insert" value="form1" />
    </form>
  <!-- end .content --></div>
  <div class="footer">

  </div>
  <!-- end .container --></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:18:28.510

```
<input type="checkbox" name="CheckboxGroup1" />
<input type="checkbox" name="CheckboxGroup1" /> 
```

变成

```
<input type="checkbox" name="CheckboxGroup1[]" />
<input type="checkbox" name="CheckboxGroup1[]" /> 
```

然后，您可以像这样读取值：

```
$selected = array();
if (isset($_POST['CheckboxGroup1']) && is_array($_POST['CheckboxGroup1'])) {
    $selected = $_POST['CheckboxGroup1'];
} else {
    $selected = array($_POST['CheckboxGroup1']);
} 
```

这确保 $selected 变量始终是一个数组。要确定是否检查了某个值：

```
$checked = in_array('value', $selected); 
```

# ruby - 为什么我的 rvm 不允许我切换到替代 Ruby？

> ID：10939968
> 
> 赞同：3
> 
> 时间：2012-06-07T21:13:11.733
> 
> 标签：ruby, rvm

Ubuntu 已经安装了 Ruby 1.8.7。然后我安装了rvm并用它来安装Ruby 1.9.2，也就是我要使用的版本。但是， ruby​​ -v 总是返回 1.8.7。

如何让 rvm 使用 Ruby 1.9.2？

```
bxu@vm-bxu:~$ rvm use 1.9.2
Using /usr/share/ruby-rvm/gems/ruby-1.9.2-p320
bxu@vm-bxu:~$ ruby -v
ruby 1.8.7 (2011-06-30 patchlevel 352) [x86_64-linux] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T21:54:59.007

### 问题

RVM 有自己的安装魔法，但在 Ubuntu 中，它并不总是安装到正确的 Bash 启动文件中。你可能实际上没有让 RVM 正常运行。即使它有点安装。

### 修复

您需要确保以下两行位于 ~/.bashrc 文件的底部。

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm"
export PATH=$PATH:$HOME/.rvm/bin 
```

然后重新启动您的终端仿真器或重新登录。请注意，已知采购 ~/.bashrc在某些情况下不起作用，因此此步骤将节省您的理智*。*

RVM 现在应该可以正常工作了。最后一步是设置您的默认 Ruby。

```
rvm --default use 1.9.2 
```

### 重要编辑

正如我刚刚被提醒的那样，RVM 通过安装 ~/.bash_login 来破坏 Ubuntu 登录 shell，它会覆盖登录 shell 中的 Ubuntu ~/.profile。如果尚未将代码移至 ~/.bashrc，然后删除或重命名 ~/.bash_login。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:15:18.590

从终端：

```
rvm use 1.9.2 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T23:35:11.860

在 Ubuntu 上，您需要在终端模拟器中启用登录 shell，我们在 rvm 站点上有一个非常好的文档： [https ://rvm.io/integration/gnome-terminal/](https://rvm.io/integration/gnome-terminal/)

# ruby-on-rails - 删除路由以阻止对控制器的访问

> ID：10939971
> 
> 赞同：2
> 
> 时间：2012-06-07T21:13:29.603
> 
> 标签：ruby-on-rails, security, rails-routing

我的应用程序中有一些控制器不够安全，无法向公众部署——即。身份验证机制尚未准备好。

作为快速阻止控制器的一种方法，我删除了它们的路由。现在，没有路线通向他们。

**删除其路由是阻止访问控制器的有效方法吗？**

换句话说，如果路由已被禁用，恶意用户是否还有其他方法可以访问控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:22:43.817

是的，但您还应该检查您的路线文件中是否有任何类型的包罗万象的路线，例如：

```
match ':controller(/:action(/:id))(.:format)' 
```

如果你没有这样的东西，你现在可能是安全的。

# c++ - 朋友和模板 C++

> ID：10939972
> 
> 赞同：1
> 
> 时间：2012-06-07T21:13:39.770
> 
> 标签：c++, templates, friend

论坛上有很多关于朋友和模板的话题。我在这里专门检查了这个：http: [//www.parashift.com/c++-faq-lite/templates.html#faq-35.16](http://www.parashift.com/c++-faq-lite/templates.html#faq-35.16)

但是对这里的一段有点困惑：

> 当编译器在类定义中正确地看到友元行时，就会发生障碍。那时它还不知道友元函数本身就是模板；它假设它们是这样的非模板：

```
Foo<int> operator+ (const Foo<int>& lhs, const Foo<int>& rhs)
{ ... }

std::ostream& operator<< (std::ostream& o, const Foo<int>& x)
{ ... } 
```

我必须承认我对编译器技术知之甚少。我在这里感到困惑的是，为什么像这样的类中的语句不足以说函数 operator+ 是模板函数？：

```
friend Foo<T> operator+ (const Foo<T>& lhs, const Foo<T>& rhs); 
```

它有一个模板参数 T 和三角括号......我试图思考它除了模板函数之外还有什么其他类型。但我无法理解这一点。

我也对编译器所做的假设感到困惑。为什么它具体选择类型<int>？为什么编译做出这个假设而不是模板函数 - 这对我来说似乎更合理。

非常感谢，

陈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:49:16.180

每当你在类中声明友元函数时，它是模板（之前声明的），你必须通过放置空尖括号或限定它来向编译器发出信号，声明的函数是模板，例如：

[http://ideone.com/kmIfc](http://ideone.com/kmIfc)

如果您也不这样做，那么如果没有先前声明的非模板函数，则声明的友元函数应该作为新函数的声明。

[http://ideone.com/woIgn](http://ideone.com/woIgn)

# ruby-on-rails - 有哪些常见模式可以确保跨多个系统的 Rails 模型的数据持久性？

> ID：10939976
> 
> 赞同：1
> 
> 时间：2012-06-07T21:13:57.343
> 
> 标签：ruby-on-rails, persistence, rails-activerecord

假设我们有以下场景：

```
class MyModel < ActiveRecord::Base
  after_save :throw_after_save
  after_commit :throw_after_commit

  private
    def throw_after_save
      raise "raising on after_save"
    end

    def throw_after_commit
      raise "raising on after_commit"
    end
end

class MyController < ApplicationController
  def callback
    begin
      MyModel.new(params).save
    rescue
      flash[:alert] = "Failed persisting to external system. Try again."
      Airbrake.notify(
        error_class: "External System Persistence",
        error_message: "External System Persistence: Failed to persist data",
        parameters: params
      )
    end

    redirect_to root_path
  end
end 
```

我们从外部系统获得回调（用户填写一些数据并为帐户创建一组临时属性）。

让我们假设我们希望在对我们进行回调之后在本地保存一些数据。在这个数据被持久化之后，我们想要调用外部系统来完成账户创建过程。外部系统将返回一个结果，通知我们成功，其中包含一些我们需要在本地持久保存的额外数据。我们还知道，在某些*特殊*情况下，远程系统上的持久性不会成功（假设系统不可用，或者他们的一端出了问题）。

目标是捕获外部持久性异常以及成功并采取相应措施。在成功的情况下，一切都是笨拙的：额外的数据存储在本地，`redirect_to root_path`发生了。然而，在异常的情况下，我们希望向用户表明这一点（也许设置 a`flash[:alert]`显示在视图中）。

我们曾尝试使用`ActiveRecord::Callbacks`从模型中抛出异常，`after_save`并`after_commit`通过设置警报并可能将异常传递给某些异常通知系统（如 Airbrake）在控制器处处理该异常。在 的情况下`after_save`，模型抛出异常并被控制器捕获，但不保存记录（并且我们要求即使在外部系统出现异常的情况下也要存储部分数据 - 这是不可接受的）。在 的情况下`after_commit`，异常*不会*被控制器抛出和拾取，而是部分记录被持久化。这意味着我们无法将异常通知用户（除非我们实现了一些通知推送机制——这太过分了）。

事实证明，我们*可以*在模型上设置错误`after_save`，这很好。但是，这是处理这种情况的一个*很好*的通用模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:38:55.910

你在那里没有很多选择。由于您所要求的逻辑本身很复杂，我会将代码移动以将记录保存到其他地方（可能是一个类方法或另一个类，代表一个服务），当有人想要保存这个特定对象时它会有通过这种服务模式。

例如：

```
class MyModelPersistenceService

    def save_model( model )
      result = model.save
      if result
        call_external_service
      end
    end 

end 
```

[服务](http://stochastyk.blogspot.com.br/2008/05/domain-services-in-domain-driven-design.html)在 Ruby/Rails 项目中并不常见，但它们非常适合这种用法（滥用 AR 回调通常会导致难以测试对象）。

# php - 在 php 文件中加入验证码

> ID：10939977
> 
> 赞同：1
> 
> 时间：2012-06-07T21:14:01.023
> 
> 标签：php, wordpress

我有一个 WordPress 网站，其中包含一个需要添加验证码的表单。该表单不是它自己的模板，甚至不是它自己的页面，而是一个包含在所有页面上的单个 php 文件。实际的形式是下拉菜单的形状。当用户单击“请求信息”链接时，表单会从导航栏中下拉。按照它的设置方式做，我不能使用 WordPress 插件。

通常，我可以只添加一个 php 验证码脚本并完成它，但表单操作设置为发布到外部网站。当访问者提交表单时，它会转到另一个收集信息的网站，如您在此处看到的：

```
<form action="https://www.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8" method="POST" name="contact" id="contact" onsubmit="return checkform(this);"> 
```

因为表单没有使用站点服务器上的 php 文件进行验证，所以我不知道如何验证验证码并使其正常工作。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:19:25.657

唯一的方法是在提交到您检查验证码的服务器时进行 ajax 调用。如果代码有效，则提交表单。如果它没有显示错误并且不允许表单提交。

如果您使用的是 Recaptcha，请检查以下内容：[using reCAPTCHA with ajax....javascript loading problem](https://stackoverflow.com/questions/593593/using-recaptcha-with-ajax-javascript-loading-problem)

如果您正在做一般的验证码：[jQuery ajax validate captcha](https://stackoverflow.com/questions/5788928/jquery-ajax-validate-captcha)

答案比你要找的更集中，但至少会让你指向正确的方向。

# jquery - jquery切换显示/隐藏问题

> ID：10939980
> 
> 赞同：-2
> 
> 时间：2012-06-07T21:14:10.653
> 
> 标签：jquery

您好，我在我的网站中应用了 jquery 显示/隐藏功能，但问题是它首先在加载页面时显示文本，当页面完全加载后，它会正常运行请帮助检查我的网站 [http://pligg.marsgibson.info/](http://pligg.marsgibson.info/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:19:52.477

只需使用 CSS 选择器首先隐藏文本，在您的示例中，这可以解决问题：

```
.storycontent { display: none; } 
```

女巫你可以简单地添加`display: none;`到你的`style.css` *（第 228 行）*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:22:52.550

如果必须在启动时隐藏元素，最好通过 css 隐藏网页上的元素，因为 javascript 需要一些时间才能激活（因为它会等到页面完全加载）。

我会使用与balexandre相同的方式......

# c# - 使用外部 dll 中的枚举

> ID：10939982
> 
> 赞同：3
> 
> 时间：2012-06-07T21:14:17.553
> 
> 标签：c#, reflection, dll, enums

我有一个正在工作的项目，该项目将涉及创建一个 DLL，该 DLL 将在多个其他站点中使用。在这个 DLL 中，我们需要引用大约 10 个枚举。然而，对于使用 DLL 的每个站点，这些枚举的值会有所不同。例如：

MyBase.dll 可能有一个 MyClass 类，其属性类型为 MyEnum。

然后在 MySite 中引用 MyBase.dll。MyStie 还将引用 MyEnums.dll，其中将包含 MyEnum 类型的值。

有没有办法做到这一点？在构建 MyBase.dll 时，我知道 MyEnums.dll 中将存在哪些枚举。问题是我无法在没有专门引用 MyEnums.dll 的情况下构建 MyBase.dll，在特定项目中使用 MyBase.dll 之前不会创建它。

我希望这是有道理的，并希望我能在这里找到答案。

谢谢。

编辑：

感谢所有的评论。需要阅读几篇才能完全理解，但让我试着举一个更好的例子来说明我在这里看到的内容。

假设以下代码在我的 DLL 中，将被放入各种项目中。状态是一个枚举。

```
public Class MyClass
{
    private Status _currentStatus;

    public Status CurrentStatus
    {
        get
        {
            return _currentStatus;
        }
    }

    public void ChangeStatus(Status newStatus)
    {
        _currentStatus = newStatus;
    }
} 
```

我想要做的是在各个项目中定义 Status 的可能值。所以在这个 DLL 中，我永远不会引用 Status 枚举中可能存在的值，我只需要知道它存在即可。

我希望这对我正在尝试做的事情更加清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:18:12.847

如果您希望每个客户端看到不同的枚举值（在不同的程序集版本中），那么使用枚举是一个糟糕的解决方案 - 更改会破坏客户端代码......

使用枚举**可能**有效（只要枚举名称和程序集名称相同并且程序集未签名） - 您可以交换程序集。但是，如果在代码中的任何地方使用了最后不存在的值，则最终会出现异常。此外，您可能对值进行显式编号，以确保值的不同子集不会以不同值的相同数字或相同值的不同数字结束。

而是**考虑使用动态构建的集合**，例如列表、字典或数据库表。**或者只是为每个人提供具有相同枚举值超集的相同程序集，**让用户决定哪些值与他们相关（也许使用重要的值前缀作为约定）。

或者你可以使用两者的组合......

**为每个站点生成**不同的结构（**不同的类型名称（或命名空间）和程序集名称**），具有不同的属性（根据站点的配置文件）和一个接受这些结构的服务的主结构。让所有结构都实现相同的接口，您希望收到...

```
public interface IStatus
{
    string GetKey();
}

public struct ClientXStatus : IStatus
{
    private readonly string _key;

    private ClientXStatus(string key)
    {
        _key = key;
    }

    // Don't forget default for structs is 0,
    // therefore all structs should have a "0" property.
    public ClientXStatus Default
    {
        get
        {
            return new ClientXStatus();
        }
    }

    public ClientXStatus OptionB
    {
        get
        {
            return new ClientXStatus(10);
        }
    }

    string IStatus.GetKey()
    {
        return _key;
    }

    public override bool Equals(object obj)
    {
        return (obj is IStatus) && ((IStatus)obj).GetKey() == _key;
    }

    public override int GetHashCode()
    {
        return _key.GetHashCode();
    }

    public static bool operator==(ClientXStatus x, IStatus y)
    {
        return x.Equals(y);
    }

    public static bool operator==(IStatus x, ClientXStatus y)
    {
        return y.Equals(x);
    }

    public static bool operator!=(ClientXStatus x, IStatus y)
    {
        return !x.Equals(y);
    }

    public static bool operator!=(IStatus x, ClientXStatus y)
    {
        return !y.Equals(x);
    }

    // Override Equals(), GetHashCode() and operators ==, !=
    // So clients can compare structures to each other (to interface)
} 
```

为服务使用主结构：

```
public struct MasterStatus : IStatus
{
    private readonly string _key;

    private MasterStatus(string key)
    {
        _key = key;
    }

    // Don't forget default for structs is 0,
    // therefore all structs should have a "0" property.
    public MasterStatus Default
    {
        get
        {
            return new MasterStatus();
        }
    }

    // You should have all the options here
    public MasterStatus OptionB
    {
        get
        {
            return new MasterStatus(10);
        }
    }

    // Here use implicit interface implementation instead of explicit implementation
    public string GetKey()
    {
        return _key;
    }

    public static implicit operator MasterStatus(IStatus value)
    {
        return new MasterStatus(value.GetKey());
    }

    public static implicit operator string(MasterStatus value)
    {
        return new value._key;
    }

    // Don't forget to implement Equals, GetHashCode,
    // == and != like in the client structures
} 
```

演示服务代码：

```
public void ServiceMethod(IStatus status)
{
    switch (status.GetKey())
    {
        case (string)MasterStructA.OptionB:
            DoSomething();
    }
} 
```

或者：

```
public void ChangeStatus(IStatus status)
{
    _status = (MasterStatus)status;
} 
```

这样你：

1.  使用代码生成来防止值冲突。

2.  通过隐藏值（作为私有值）并仅接受您的结构来强制用户使用编译时检查（没有 int 值或字符串值）。

3.  在服务的代码（接口）中使用真正的多态性，而不是容易出错的 hack。

4.  使用不可变值类型（如枚举）而不是引用类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:20:48.200

首先，您必须决定将常量放在何处。然后您可以将您的属性转换`enum`为静态属性。

例如：

```
public enum MyEnum
{
    Value1,
    Value2
} 
```

可以改为（第一种天真的方法）：

```
public static class MyFakeEnum
{
    public static int Value1
    {
        get { return GetActualValue("Value1"); }
    }

    public static int Value2
    {
        get { return GetActualValue("Value2"); }
    }

    private static int GetActualValue(string name)
    {
        // Put here the code to read the actual value
        // from your favorite source. It can be a database, a configuration
        // file, the registry or whatever else. Consider to cache the result.
    }
} 
```

这只会提供所需的常量，但如果您需要`MyFakeEnum`作为参数，则必须放弃对类型的编译时检查。对于更好的解决方案，您可以遵循，例如，微软（或多或少）为`System.Drawing.Color`.

```
public sealed class MyFakeEnum
{
    public static readonly MyFakeEnum Value1 = new MyFakeEnum("Value1");
    public static readonly MyFakeEnum Value2 = new MyFakeEnum("Value2");

    private MyFakeEnum(string name)
    {
        _name = name;
    }

    public static implicit operator int(MyFakeEnum value)
    {
        return GetActualValue(value._name);
    }

    private string _name;
} 
```

当然，您至少应该为 和 提供适当`Equals`的`GetHashCode`覆盖`ToString`。

**临**

*   它可以是现有`enum`. 代码不会被破坏，您可能只需要重新编译。
*   您可以将其用作强类型参数。例如：`void DoSomething(MyFakeEnum value)`是有效的并且调用者不能传递其他东西（注意这是原因之一，因为枚举被认为是弱的）。
*   如果您实现了所有必需的运算符，则可以使用普通语法进行比较：`value == MyFakeEnum::Value1`.
*   只需一点代码，您甚至可以实现`FlagsAttribute`语法。
*   您不会更改 enums: 的正常语法`MyFakeEnum.Value1`。
*   您可以在类型之间实现任意数量的隐式/显式转换运算符，并且任何转换都将是安全的并在完成时进行检查（对于标准枚举，这又不是真的）。
*   您没有硬编码的字符串，这些字符串可能会被更改破坏并且在它们导致运行时错误（是的，运行时）之前不会被捕获。例如，如果要更改定义，则使用字典，则必须在所有代码中搜索该字符串。

**缺点**

*   第一个实现时间更长，因为您必须编写*支持*代码（但对于任何新值，您只需添加一个新行）。
*   值列表是固定的，并且必须在编译时知道（如果您正在搜索替换，这不是问题，`enum`因为它也是固定的）。

使用此解决方案，您可以*保存*或多或少与标准枚举相同的语法。

# .net - 将 Rally 与另一个错误跟踪解决方案同步

> ID：10939986
> 
> 赞同：1
> 
> 时间：2012-06-07T21:14:25.657
> 
> 标签：.net, rally, agile-project-management

我正在寻找一种解决方案，以在我们的 Rally 订阅和另一个错误跟踪系统（特别是FIT [http://www.fittrackingsolutions.com/](http://www.fittrackingsolutions.com/)）之间同步（双向）

起初，我认为我必须通过 REST API 获取 Rally 数据并通过它的 SOAP API 更新 FIT 数据，反之亦然

然后我看到了这个：[http ://www.rallydev.com/help/rally-integrations-faq-and-best-practices](http://www.rallydev.com/help/rally-integrations-faq-and-best-practices)

似乎 Rally 本身有一种服务连接器，可以帮助自己与其他系统同步。但是，我不知道 Rally 的企业集成框架 (EIF) 是什么，链接中提到的 rally2_*_connector.exe 和 config.xml 文件在哪里...

有人对此有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:15:59.020

Rally 企业集成框架 (EIF) 是由 Rally 构建和支持的连接器（Quality Center、Bugzilla 等）共享的核心代码库。目前，Rally 客户无法在他们自己的代码中直接利用该代码库。

就可用于构建 FIT 同步连接器的工具包而言，您走在正确的轨道上：我们推荐 Rally 的 REST API。Rally 为程序员提供了几个受支持的 REST 工具包：

[http://developer.rallydev.com/help/rest-apis](http://developer.rallydev.com/help/rest-apis)

Java 和 Python 中也有更新的 REST 工具，但这些是 alpha 级工具包：

[http://developer.rallydev.com/help/labs](http://developer.rallydev.com/help/labs)

希望这会有所帮助 - 祝您的同步连接器好运！

# android - android-单击后更改按钮背景颜色

> ID：10939988
> 
> 赞同：5
> 
> 时间：2012-06-07T21:14:45.110
> 
> 标签：android, android-button

问题：我想在按下按钮后更改按钮的背景颜色。

这是一个简单的问题，但我花了很多时间在谷歌上搜索，但似乎找不到解决方案。它们都引用下面显示的相同 XML。

我的 XML 如下：

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/black_button_pressed" android:state_focused="true" />
    <item android:drawable="@drawable/black_button_pressed" android:state_pressed="true" />
    <item android:drawable="@drawable/black_button_normal"/>
</selector> 
```

因此，当一个人将鼠标悬停在一个按钮上时，它会显示为灰色。当一个人点击一个按钮时，点击后按钮的背景应该变灰，但我似乎无法让它变灰。按下后恢复正常状态。

你们有任何提示和/或指示可以帮助我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T11:27:37.153

在 android 中，事件完成后 UI 的状态不会持续存在。例如，您可以处理该`button` `click`事件并突出显示按钮，但一旦触发 Up 事件，它就会返回其正常状态。因此，据我所知，唯一的选择是通过设置不同的`drawable resource`.

```
btn.setBackgroundResource(R.drawable.btn_selected_blue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:17:36.497

这有效（在您的 onClick 处理程序中）：

```
button.setBackgroundResource(R.drawable.button_selected); 
```

然而，可能有更好的方法。

# wcf - 如何使用实体框架和 wcf 传递数据

> ID：10939997
> 
> 赞同：2
> 
> 时间：2012-06-07T21:15:28.690
> 
> 标签：wcf, entity-framework, entity-framework-4

我正在尝试使用 c#、wcf 和实体框架开发一个 .net4 应用程序。我的第一个想法是通过 wcf 传递 EF 生成的对象（首先使用默认实体对象，然后使用 POCO 实体），但是由于生成的实体中的不可序列化对象，我很快遇到了几个连接问题（连接已关闭）。我最终编写了几个纯数据类来托管使用 EF 查询的数据，但现在我想念 EF 在 WCF 中的作用。我想我做错了什么，那么如何使用 EF 通过 wcf 发送数据？EF的意义何在？编写存储过程和标准 ado.net 会不会更容易......？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T21:22:37.483

实体框架只是一种数据访问技术。您可以创建一个数据访问层，它与您的数据库对话并使用实体框架返回所需的数据，然后将其插入您的 WCF 服务，以便您的 WCF 服务将获取数据。您可以将相同的数据访问层用于任何其他消费者（Silver light 应用程序、Windows 窗体项目或 MVC 应用程序）。使用 Entity 框架的优点是它会将数据加载到您的域对象（您的 POCO 类）中，这样您就不需要自己手动完成。在存储过程的情况下，您需要执行存储过程，通过 DataReader/DataTable 迭代填充您的对象。为此，您必须编写代码。如果您使用实体框架，EF 会为您执行此操作，因此您可以节省一些开发时间。

您应该清楚地在逻辑上分离您的项目，以便有一个数据访问和一个使用数据访问层（您的 WCF 服务）的消费者。