# StackOverflow 问答 10714000-10714999

# .net - 当我以编程方式打开文档时，MS Word 自定义任务窗格消失

> ID：10714006
> 
> 赞同：5
> 
> 时间：2012-05-23T05:32:42.313
> 
> 标签：.net, ms-word, vsto, add-in, customtaskpane

我正在尝试创建一个简单的 MS Word 插件（主要是为了探索功能）。该插件在功能区中添加了自定义任务窗格和组。功能区控件包括一个用于控制自定义任务窗格可见性的复选框，以及一个用于打开文档的按钮。当我在 MS Word 中测试插件时，任务窗格正确显示，并且复选框正常工作。问题是，只要我单击按钮并打开一个新文档，任务窗格就会隐藏，并且复选框不再控制任务窗格的可见性。出了什么问题？如何保持自定义任务窗格显示？

这是插件的简单版本：

```
public partial class ThisAddIn
{
    private MyUserControl _myUserControl;
    private CustomTaskPane _myCustomTastPane;
    private OpenFileDialog _dialog;

    private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {
        _dialog = new OpenFileDialog { Filter = "Doc File (*.rtf)|*.rtf", RestoreDirectory = true };
        _myUserControl = new MyUserControl();
        _myCustomTastPane = this.CustomTaskPanes.Add(_myUserControl, "My Task Pane");
        _myCustomTastPane.Visible = true;

        Globals.Ribbons.MyRibbon.ShowPane.Click += ShowClicked;
        Globals.Ribbons.MyRibbon.LoadDoc.Click += LoadFile;
    }

    private void ShowClicked(object sender, RibbonControlEventArgs ribbonControlEventArgs)
    {
        _myCustomTastPane.Visible = Globals.Ribbons.MyRibbon.ShowPane.Checked;
    }

    void LoadFile(object sender, RibbonControlEventArgs e)
    {
        if (_dialog.ShowDialog() != DialogResult.OK) return;

        object missing = Missing.Value;
        object myFalse = false;
        object myTrue = true;
        object format = WdSaveFormat.wdFormatRTF;
        object fileToOpen = _dialog.FileName;

        Application.Documents.Open(ref fileToOpen, ref myFalse, ref myFalse, ref myFalse, ref missing, ref missing, ref missing, ref missing,
                                                                ref missing, ref missing, ref missing, ref myTrue, ref myFalse, ref missing, ref missing, ref missing);
    }

    private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
    {
    }

    #region VSTO generated code
    //....
    #endregion
} 
```

为了简单起见，我省略了功能区的定义，因为它实际上只是一个按钮和一个复选框。我也省略了 MyUserControl 的定义，因为类的内容并不重要（在我的演示版本中，我只有一个带有标签的简单类）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T20:22:37.267

在 MS Word 中，**自定义任务窗格**是每个文档的窗口（[请参阅 MSDN 参考](http://msdn.microsoft.com/en-us/library/aa942864%28v=vs.80%29.aspx)）。如果您打开一个新文档，则任务窗格集合是不同的。如果您想保持一个持久的任务窗格打开 - 您必须通过监视文档打开/关闭事件来自己管理它，如下所述。

### 从[MSDN](http://msdn.microsoft.com/en-us/library/aa942864%28v=vs.80%29.aspx) ...

> *当您为 Word 2007 或 InfoPath 2007 创建自定义任务窗格时，**自定义任务窗格仅对单个文档可见**。这些应用程序中的任务窗格与托管文档的窗口相关联，但每个文档都有该窗口的不同实例。*
> ...
> ***如果要为多个文档显示自定义任务窗格，您可以在用户创建新文档或打开现有文档时创建自定义任务窗格的新实例。**例如，您可以为 Word 2007 加载项中的[`NewDocument`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.applicationevents4_event.newdocument.aspx)或[`DocumentOpen`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.applicationevents4_event.documentopen.aspx)事件创建处理程序，以创建自定义任务窗格的新实例，该实例在新文档或打开的文档中可见。*

# .net - 如何在 Windows azure 上部署 asp.net 应用程序..？

> ID：10714018
> 
> 赞同：-2
> 
> 时间：2012-05-23T05:33:47.363
> 
> 标签：.net, mysql, oracle

我在 asp.net 中创建了一个媒体播放器，现在我想在 windows azure 上部署这个应用程序。我可以使用哪个角色来部署此应用程序？另外，谁能告诉我这个过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:26:19.040

这是一个寄予厚望的问题，但是我会像[在这里](https://stackoverflow.com/questions/10527517/how-to-migrate-existing-asp-net-mvc-3-project-with-mdf-file-sql-2008-to-windo/10528154#10528154)一样尝试帮助您。

因为这是一个大问题，您必须分部分工作才能完成所有工作。以下步骤是在您确实订阅了 Windows Azure 并对 ASP.net、IIS 和 VS2010 有基本了解的情况下编写的。

首先，您将使用 ASP.NET Web 角色让您的应用程序在 Windows Azure 中运行。

**第 1 步：**安装 Windows Azure SDK 1.6 [http://go.microsoft.com/fwlink/?LinkID=234939&clcid=0x409](http://go.microsoft.com/fwlink/?LinkID=234939&clcid=0x409)

**第 2 步：**之后，打开您的 ASP.NET 应用程序，当您右键单击解决方案时，您会发现一个新选项“添加 Windows Azure 部署项目”，选择它。确保您的 ASP.NET 应用程序是 Web 应用程序。

您将看到在您的解决方案名称中创建了一个新的 Windows Azure 项目 your_application_name.Azure（默认）已创建。此时，如果您将 Azure 项目作为“启动”应用程序并运行它，您的 ASP.NET 应用程序将在 Windows Azure Compute Emulator 中运行。

**第 3 步：**验证您的代码是否存在任何问题并修复它。请务必在 Compute Emulator 中进行测试，现在是时候通过您的 Windows Azure 项目了解服务配置和服务定义了。

**第 4 步：**一旦您的 ASP.NET 应用程序在计算模拟器中运行，您就可以部署它了。最后，现在打包您的应用程序并部署到 Windows Azure 以进行部署和最终测试。分步详细信息位于[此处](http://msdn.microsoft.com/en-us/spazuretrainingcourse_introtowindowsazurelabvs2010_topic4#_Toc297905245)：

**步骤 0：**如果你有时间，我建议你完成[这个练习](http://msdn.microsoft.com/en-us/spazuretrainingcourse_introtowindowsazurelabvs2010_topic2#_Toc297905236)，以了解更多关于 ASP.NET Web 角色、Azure SDK 环境等内容，以后会对你有很大帮助。

# asp.net - AJAX 4 在 VS 2010 专业版中不起作用

> ID：10714022
> 
> 赞同：0
> 
> 时间：2012-05-23T05:34:06.230
> 
> 标签：asp.net, .net, asp.net-ajax

![在此处输入图像描述](../Images/a4efb5660780c72d4f79e3069b65b667.png)

我正在使用 Visual Studio 2010 Professional。我在四个月前安装了 AJAX 4，并在我以前的项目中使用过它。现在我开始一个新的 Web 应用程序项目，但 AJAX 控件不起作用。我尝试拖放控件但它没有显示在设计页面中（我已经添加了“脚本管理器”）。我在参考文献中添加了“System.Web.Extensions”并使用 NuGET 3rd 方工具安装了新的 AJAX 4（2012 年 5 月）。仍然是控件不工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:22:14.810

我通常会遇到这种问题。从工具箱中删除 TAB。删除 Ajax dll。再次添加 Dll 和 TAB（再次注册控件）。即使这不起作用，请尝试使用旧版本的 AJAX。

# iis-7 - 日志填充为：与远程主机的通信发生错误

> ID：10714028
> 
> 赞同：9
> 
> 时间：2012-05-23T05:34:31.533
> 
> 标签：iis-7

我们正在尝试了解此错误发生的情况，这只是用户与网站断开连接吗？

```
System.Web.HttpException  An error occurred while communicating with the remote host. The error code is 0x800703E3\.  
System.Runtime.InteropServices.COMException  The I/O operation has been aborted because of either a thread exit or an application request. 
(Exception from HRESULT: 0x800703E3)  StackTrace:    
at System.Web.Hosting.IIS7WorkerRequest.RaiseCommunicationError(Int32 result, Boolean throwOnDisconnect)     
at System.Web.Hosting.IIS7WorkerRequest.ExplicitFlush()    
at System.Web.HttpResponse.Flush(Boolean finalFlush)     
at System.Web.HttpWriter.WriteFromStream(Byte[] data, Int32 offset, Int32 size)     
at System.Web.Mvc.FileStreamResult.WriteFile(HttpResponseBase response)     
at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c <InvokeActionResultWithFilters>b__19()     
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)    
at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)     
at System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName)     
at System.Web.Mvc.Controller.ExecuteCore()    
at System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext)    
at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<>c__DisplayClassb.<BeginProcessRequest>b__5()   
at System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass1.<MakeVoidDelegate>b__0()  
at System.Web.Mvc.MvcHandler.<>c__DisplayClasse.<EndProcessRequest>b__d() 
at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()    
at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-11T20:58:18.700

是的，当与用户的连接丢失时会出现此错误。他们可能已关闭浏览器或断开连接（或请求[失败或被取消](https://stackoverflow.com/a/5564892/54804)）。

[类似问题的答案](https://stackoverflow.com/a/1556133/54804)建议在调用 Flush() 之前检查[Response.IsClientConnected](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.isclientconnected.aspx)

您[甚至可能不需要显式调用 Flush()](https://stackoverflow.com/a/6118977/54804)

# dsl - 从我的 DSL 生成 XML

> ID：10714030
> 
> 赞同：1
> 
> 时间：2012-05-23T05:34:46.320
> 
> 标签：dsl, xtext

我需要在 Xtext 中编写一个 DSL，这将简化一些现有的 XML 语言。换句话说，我需要编写 DSL，然后使用 Xtext 以某种方式将其转换为 XML。到目前为止我写了一个语法，但我的问题是如何基于它生成一个XML。你知道任何关于如何做类似事情的教程吗？特别是当我创建新的 Xtext 项目时，它不会生成 projectcame.generator 项目，如大多数教程中所示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:22:59.857

我假设您使用的是 Xtext 2.2。

专用生成器项目被直接作为语言基础设施一部分的生成器所取代。您可能想深入了解运行时插件中的 yourdsl.generator 包。在那里您会发现一个存根实现，它采用 EMF 资源并允许从中创建文本。Statemachine 示例使用该方法生成 Java 代码，但您也可以生成 XML 或任何您想要的内容。

如果您的 XML 与特定模式匹配，您当然可以将模型转换为目标模型的有效实例，并使用 EMF 标准功能将其序列化，例如 XMLResource.save()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T21:25:21.123

理论上，您可以使用 JiBX 对生成的 EMF Java 模型进行字节增强，然后使用 JiBX 映射到所需的 XML。不过，这对您的模型来说可能是多余的（这取决于您的目标文档的复杂程度）。

我必须警告你，我没有在 EMF 课程上这样做过；我的项目首先将我的 EMF 模型转换为现有的 POJO 模型，该模型通过 JiBX 进行了增强。但假设他们会表现，它应该工作。

# java - 如何在 Spring MVC 中读取所有（当前）用户会话？

> ID：10714031
> 
> 赞同：-1
> 
> 时间：2012-05-23T05:34:48.977
> 
> 标签：java, jsp, spring-mvc

我进行了很多搜索以阅读 jsp、java 和 spring mvc 中的所有当前用户会话，但无法找到。我在[这里](http://weblogs.asp.net/imranbaloch/archive/2010/04/05/reading-all-users-session.aspx)找到了一个用于 ASP.NET 的会话。任何人都可以帮助我如何在 java/jsp/spring mvc 中执行此操作。我正在寻找当前登录的所有用户的阅读会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:25:15.950

我不知道可以允许您这样做的 API。即使从安全 POV 来看，也不应该允许这样做（一个用户查看其他用户会话中的数据）。话虽如此，有办法做到这一点。您可以将每个会话的引用放在 AppContext 中（例如 AppContext 中的 HashMap 存储用户 ID 和会话），然后您可以从那里访问所有会话。PS：不，我没有否决你的问题。

# mongodb - 这是什么mongodb数据类型？

> ID：10714034
> 
> 赞同：0
> 
> 时间：2012-05-23T05:34:59.160
> 
> 标签：mongodb

在：[http](http://www.10gen.com/presentations/webinar/real-time-analytics-with-mongodb) ://www.10gen.com/presentations/webinar/real-time-analytics-with-mongodb幻灯片“**预聚合**”。什么是：

```
metadata: {
  date: '...'
  site: '...'
}
hourly: { 
  "0": 2312, 
  "1": 271235
  ...
} 
```

这些数组是否在文档中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:12:21.293

是的，这是来自集合的示例文档，其中数组或哈希存储在属性中。有一本很棒的 O'Reilly 书描述了这种技术（基本上，这样的嵌套有助于加快文档中的搜索速度。）：

[http://shop.oreilly.com/product/0636920019893.do](http://shop.oreilly.com/product/0636920019893.do)

查找“提示 26：创建分层文档以加快扫描速度”

# jquery - 如何更改加载 PDF 的 iframe 正文的默认背景

> ID：10714037
> 
> 赞同：1
> 
> 时间：2012-05-23T05:35:23.527
> 
> 标签：jquery

我`iframe`在 Chrome 中加载 PDF。PDF 位于页面所在的同一台服务器上。加载时，它会在元素`iframe`上带来默认的背景颜色。`body`我想更改此默认值，或即时更改它。我试过了，但我认为发生了什么是当我尝试更改它时它还不存在（因为 PDF 尚未加载）。有什么办法可以做到这一点？

示例：http: [//jsfiddle.net/forgetcolor/XJcr5/2/](http://jsfiddle.net/forgetcolor/XJcr5/2/)

```
<p id="btn">load PDF</p>
<iframe style="display:none;">

$('#btn').click(function() {
    $('iframe').attr('src','http://doc.jsfiddle.net/_downloads/jsFiddle.pdf');
    $('iframe').contents().find('body').css('background-color', '#fff');
    $('iframe').show();
}); 
```

# c++ - #if 0 && defined(_LP64) 如何为真？

> ID：10714038
> 
> 赞同：2
> 
> 时间：2012-05-23T05:35:25.963
> 
> 标签：c++, c, macros, typedef, c-preprocessor

从头文件 ncurses.h 中，`#if`我认为`#if 0`将始终返回 false 并且控制权将始终发挥作用有什么用`#else`？

```
#if 0 && defined(_LP64)
typedef unsigned chtype;
typedef unsigned mmask_t;
#else
typedef unsigned long chtype;
typedef unsigned long mmask_t;
#endif 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T05:37:34.727

这永远不会是真的。很可能这`_LP64`曾经是相关的，但现在不再如此了，为了注释掉所有相关的代码，程序员加上了一个 0。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-23T05:39:30.277

它永远不可能是真的。它可能是这样写的，作为注释掉代码块的一种方式，而不是使用 /* */ 注释。

# android - Shape Drawable 总是灰色的

> ID：10714040
> 
> 赞同：0
> 
> 时间：2012-05-23T05:35:27.507
> 
> 标签：android, drawable

使用

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <gradient
        android:startColor="#FFFF0000"
        android:endColor="#80FF00FF"
        android:angle="45"/>
    <padding android:left="7dp"
        android:top="7dp"
        android:right="7dp"
        android:bottom="7dp" />
    <corners android:radius="8dp" />
</shape> 
```

来自[http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

每次我将它设置为任何视图的背景时，它总是将背景变为灰色。

xml 在 res/drawable 中，我已经尝试了指南中使用的两种方法。

有人可以解释为什么它不起作用。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-23T06:29:59.040

使用此代码：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <gradient
        android:startColor="#00FFBB"
        android:endColor="#FFEEAA"

      />
    <padding android:left="7dp"
        android:top="7dp"
        android:right="7dp"
        android:bottom="7dp" />
    <corners android:radius="8dp" />
</shape> 
```

![在此处输入图像描述](../Images/d3c1abb3ea3edd5f3d7ca4c2e8815982.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-25T00:53:11.280

不知道我是如何修复它的，但是我复制了我的布局，删除了它们，将它们粘贴回去然后清理了项目（我经常这样做）并解决了问题。

# sql - 如何为身份字段创建日期

> ID：10714041
> 
> 赞同：0
> 
> 时间：2012-05-23T05:35:30.823
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server

我想为身份字段创建一个日期列....

表格1

```
Date_ (Identity Field)

20123
20124
20125
20125
....
....
18901 
```

从表 1 中，max(date_) 为 20125

所以`20125`应该是当前日期`05/23/2012`'mm/dd/yyyy

从表 1，我想从 max(date_) 字段到 min(date_) 字段的日期

预期产出

```
Date_  Correct Date

20123 05/21/2012 
20124 05/22/2012
20125 05/23/2012
20125 05/23/2012
....  .....
....  .....
18901 02/18/2004  'Approximately 
```

如何对此进行查询

需要 SQL 查询帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T05:55:31.890

我不明白你为什么需要这个，并且值`18901`似乎不正确。我也会对日期的意义感兴趣[`1957-04-17`](http://www.canoe.ca/HockeyRocketRichardGallery/24.html)。

```
select dateadd(day, Date_, '19570417') 
```

# java - 在 Java 中使用正则表达式将 $ 替换为函数

> ID：10714043
> 
> 赞同：-1
> 
> 时间：2012-05-23T05:36:04.667
> 
> 标签：java, regex, string

我有一个带有以下部分的 SQL 查询......

> BRANCH='Chennai' AND $ACCOUNT_NO='12312321'

在此我想用我已经定义的 PL/SQL 函数替换 $，并且我需要输出

> BRANCH='Chennai' AND decode_acc_no(ACCOUNT_NO)='12312321'

我需要与字符串一起使用什么正则表达式来获得所需的输出？？..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:43:52.510

用这个：

```
query.replace("\\$([A-Za-z0-9_]*)", "decode_acc_no($1)"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:45:14.970

像这样的东西应该工作：

```
String str = "BRANCH='Chennai' AND $ACCOUNT_NO='12312321'";
String newStr = str.replaceAll("^(.+?)\\$([A-Z_]+)(.*)$", "$1decode_acc_no($2)$3");
System.out.println(str);
System.out.println(newStr); 
```

印刷：

> BRANCH='Chennai' AND $ACCOUNT_NO='12312321'
> 
> BRANCH='Chennai' AND decode_acc_no(ACCOUNT_NO)='12312321'

编辑：根据您的评论，不，这只会与您在问题中给出的结构相匹配。如果你想要更多的灵活性，你可以使用这个：`\\$(A-Z_]+)`

```
String str = "BRANCH='Chennai' AND $ACCOUNT_NO='12312321' OR $BENIFICIARY_ACC_NO='2323434'"
String newStr = str.replaceAll("\\$([A-Z_]+)", "decode_acc_no($1)");
System.out.println(newStr); 
```

打印出以下内容：

> BRANCH='Chennai' AND decode_acc_no(ACCOUNT_NO)='12312321' OR decode_acc_no(BENIFICIARY_ACC_NO)='2323434'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:44:07.347

快速破解将是

*String original = "BRANCH='Chennai' AND $ACCOUNT_NO='12312321'"; System.out.println(original.replace("' AND $ACCOUNT_NO", "' AND decode_acc_no(ACCOUNT_NO)"));*

您还可以使用正则表达式 s/\$([A-Za-z_]*)/decode_acc_no(\1)/g

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T05:50:00.793

```
String in = "BRANCH='Chennai' AND $ACCOUNT_NO='12312321'";
String result = in.replaceAll("\\$([^=]+)", "decode_acc_no($1)"); 
```

**输出：**

> BRANCH='Chennai' AND decode_acc_no(ACCOUNT_NO)='12312321'

正则表达式`\\$([^=]+)`搜索一个`$`字符并匹配所有不是`=`. 这存储在第一个捕获组中。该捕获组的内容通过使用在替换字符串中重用`$1`。

[每个程序员都应该知道的正则表达式](http://blog.xisb.de/?p=4)
[免责声明：我自己的博客文章]

# scala - Scala重复参数和List混淆中的参数

> ID：10714046
> 
> 赞同：1
> 
> 时间：2012-05-23T05:36:21.773
> 
> 标签：scala

我正在使用 Scala 2.9

我有一堂课：

```
 class Queue[T] private( private val heading: List[T], private val trailing: List[T] ) {
        def this( a: T* ) = this( a.toList, Nil )

        private def mirror = {
            if ( heading.isEmpty ) {
                new Queue[T]( trailing.reverse, Nil )
            } else this
        }

        def head = {
            val q = mirror
            if ( q.heading.isEmpty ) None else new Some(q.heading.head)
        }

        def tail = {
            val q = mirror
            if ( q.heading.isEmpty ) q else new Queue[T]( q.heading.tail, trailing )
        }

        def enqueue( a: T ) = {
            new Queue[T]( heading, a::trailing )
        }
    } 
```

在方法入队中，如果我编写`new Queue( heading, a::trailing )`（省略类型参数 [T]），代码将无法编译，并且 scalac 抱怨“对重载定义的模糊引用，类型为 (a: T*)Queue 的类 Queue 中的构造函数 Queue [T] 和类 Queue 中的构造函数 Queue 类型（标题：List[T]，尾随：List[T]）Queue[T] 匹配参数类型（List[T],List[T]）”。

那么为什么需要显式指定类型参数，`[T]`否则 Scala 会将两个单独的列表作为一个整体来处理重复参数？我认为这与类型推断有关，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:17:52.887

Heiko 的回答是正确的，但为了澄清这一点，`T`in与您将要创建的上下文中的`enqueue`不同，因此必须推断这会导致歧义。为什么你有 2 个构造函数呢？我建议您为外部世界的构造函数使用伴侣：`T``Queue`

```
class Queue[T] private( private val heading: List[T], private val trailing: List[T]) { /* ... */}

object Queue {
  def apply[T](xs: T*) = new Queue(xs.toList, Nil)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T05:56:47.760

如果您不提供类型参数，编译器可以推断`T`（对于主构造函数）或`List[T]`（对于辅助构造函数）。

# actionscript-3 - 混淆从目标到目的地绘制位图

> ID：10714054
> 
> 赞同：0
> 
> 时间：2012-05-23T05:37:02.670
> 
> 标签：actionscript-3, flash, apache-flex

我正在从 500x500 的 Source 位图中从 x=100, y=100 中寻找“剪切”一个 200x200 大小的位图。这是我的代码：

```
 var tempData:BitmapData 
  var tempBitmap:Bitmap ;
tempData = new BitmapData(500, 500,false, 0xffffff);

tempBitmap  = new Bitmap(tempData);

tempData.draw(original,null, null, null, new Rectangle(100, 100, 200, 200),true); 
```

效果很好，但是，

问题是它从 (0,0) 到 (100+200, 100+200)。然而，它从 (0,0) 剪辑到 (100,100)。因此尺寸大于200x200，不管其他部分是纯白色的。

我需要的绘图应该从 100,100 到 300,300 开始。因此，我将此位图放入的影片剪辑必须具有 200x200 的大小。它不应显示任何纯白色区域。但只有源位图的内容从 x=100, y=100 到 x=300, y= 300

如果我的解释仍然不清楚，请随时发表评论。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T06:29:54.723

如果您要将一些像素从一个`BitmapData`实例复制到另一个实例，请使用它，[`copyPixels()`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#copyPixels%28%29)因为它*更快*并且使用起来也更少混乱。

我将强调相关的论点：

1.  `sourceBitmapData:BitmapData`-`BitmapData`从中获取像素的实例。
2.  `sourceRect:Rectangle`- 一个`Rectangle`将指定您想要的源的哪一部分。
3.  `destPoint:Point`-`Point`表示源将被绘制在目的地的哪个位置。

所以你想要做的是：

```
// Define BitmapData.
var sourceBitmapData:BitmapData = new BitmapData(500, 500, false, 0xFF0000);
var destinationBitmapData:BitmapData = new BitmapData(200, 200, false, 0xFFFFFF);

// Add viewable Bitmap representation.
var view:Bitmap = new Bitmap(destinationBitmapData);
addChild(view);

// Define where pixels will be taken from off the source.
var clipRectangle:Rectangle = new Rectangle(100, 100, 200, 200);

// Define where the pixels will be drawn at on the destination.
var destPoint:Point = new Point(); // Didn't catch where you wanted this to be drawn at - simply provide your own x, y here.

// Copy some pixels from sourceBitmapData across to destinationBitmapData.
destinationBitmapData.copyPixels(sourceBitmapData, clipRectangle, destPoint); 
```

让我知道是否有任何不清楚的地方。

# javascript - 没有从 XMLHttpRequest 得到响应

> ID：10714055
> 
> 赞同：0
> 
> 时间：2012-05-23T05:37:15.730
> 
> 标签：javascript, jquery, json, cordova

我想在网站 twitter.com 上的推文中搜索单词“Cricket”。问题是，如果我使用 Phonegap 在移动设备中运行此代码，那么它可以正常工作，但在本地机器中它没有给出任何响应。以下是我的代码：

```
function appReady(){
    var ajax = new XMLHttpRequest();
    ajax.open("GET","http://search.twitter.com/search.json?q=Hemant",true);
    ajax.send();

    ajax.onreadystatechange=function(){
       if(ajax.readyState==4 && (ajax.status==200||ajax.status==0)){
         var data = JSON.parse(ajax.responseText);
         var theResults = data.results;
         var theHTML = '';

         for(var i=0;i<theResults.length;i++){
           alert(theResults[i].text);
         }
         document.getElementById('main').innerHTML = theHTML;
       }
    }
} 
```

显示错误的警报：***`JSON.parse: unexpected end of data`***

告诉我哪里出错了？提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:27:29.493

首先，这是一个没有 jQuery 的可行答案。

```
 <html>
    <head>
    <script type="text/javascript">
        function callTwitterSearch() {
          var url = "http://search.twitter.com/search.json?q=Hemant&callback=parseRequest";
          //create and inject the script element
          var script = document.createElement('script');
          script.setAttribute('src', url);
          document.getElementsByTagName('head')[0].appendChild(script);
      }

      function parseRequest(response) {
//This response object is the actual JSON parsed response from twitters api.
          alert(response.results.length);//Simply print the result list's size
      }
    </script>
    </head>
      <body onLoad="callTwitterSearch()">
      <body>
    </html> 
```

第二，

在 jQuery 中，如果您指定 callback=?，您实际上是将调用从**json**更改为**jsonp**调用。[jsonp在这里](http://en.wikipedia.org/wiki/JSONP)得到了很好的解释。

**json**调用必须从同一个域进行。 **jsonp**调用用于跨域调用。由于您的本地机器（我在这里假设:)）不在 twitter 域上，因此您的呼叫失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:17:09.673

你试过用 Jquery 和 GetJSON 函数来做吗？像这样的东西：

```
function appReady(){
  $.getJSON('http://search.twitter.com/search.json?q=Hemant&callback=?', function(json) {
      var theHtml = "";
      var theResults = json.results;
      for(var i=0;i<theResults.length;i++){
           theHtml += theResults[i].text;
         }
      $("#main").html(theHtml);
  });
}​ 
```

小提琴示例[链接](http://jsfiddle.net/eBUcv/2/)。（将 appReady() 更改为 document.ready）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:44:46.147

`'<div class="tweet"'`似乎缺少一个右括号，这可能会弄乱您的 HTML 字符串的其余部分，导致它的解析方式与您想要的不同。

你在`eval`这里滥用。你的意思是`var data = eval(ajax.responseText);`。 **但是**，这确实是个坏主意，因为网络攻击者可能会用类似`window.close()`甚至更糟糕的东西替换您的 JSON 响应。您应该做的是在不支持该对象的情况下为浏览器`var data = JSON.parse(ajax.responseText);`使用[JSON 库。](https://github.com/douglascrockford/JSON-js)`JSON`

# javascript - 如何在函数之外访问 Javascript 变量值

> ID：10714069
> 
> 赞同：4
> 
> 时间：2012-05-23T05:39:01.213
> 
> 标签：javascript, arrays, function, variables

我整晚都在用这个和另一个把头从砖墙上敲下来，但没有成功。我想做的是访问在函数内但在该函数之外的数组中设置的值。怎么可能做到这一点？例如：

```
function profileloader()
{
    profile = [];
    profile[0] = "Joe";
    profile[1] = "Bloggs";
    profile[2] = "images/joeb/pic.jpg";
    profile[3] = "Web Site Manager";
} 
```

然后，我会在段落标签内的页面下方有类似的内容：

```
document.write("Firstname is: " + profile[0]); 
```

显然，这将包含在脚本标记中，但我得到的只是控制台上的一个错误，说明：“未定义配置文件 [0]”。

有人知道我哪里出错了吗？我只是似乎无法弄清楚，到目前为止，我在将值从函数传递到函数或函数外部时看到的其他解决方案都没有奏效。

感谢任何可以帮助我的人，这可能是我错过的简单事情！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T05:40:23.013

在函数外部声明它，以便外部范围可以看到它（但要小心全局变量）

```
var profile = [];
function profileloader(){
    profile[0] = "Joe";
    profile[1] = "Bloggs";
    profile[2] = "images/joeb/pic.jpg";
    profile[3] = "Web Site Manager";
} 
```

或者让函数返回它：

```
function profileloader(){
    var profile = [];
    profile[0] = "Joe";
    profile[1] = "Bloggs";
    profile[2] = "images/joeb/pic.jpg";
    profile[3] = "Web Site Manager";
    return profile;
}

var myprofile = profileloader(); //myprofile === profile 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-23T05:49:59.147

由于`var`前面没有`profile=[];`，它存储在全局窗口范围内。

我怀疑是您在使用它之前忘记调用 profileloader() 。

良好的做法是以明显的方式声明全局变量，如本页其他答案所示

依赖副作用并不被认为是好的做法。

* * *

注释代码以显示发生了什么，**注意**不推荐的方法：

这应该有效。它确实有效：[DEMO](http://jsfiddle.net/mplungjan/utRJW/)

```
function profileloader()
{
    profile = []; // no "var" makes this global in scope
    profile[0] = "Joe";
    profile[1] = "Bloggs";
    profile[2] = "images/joeb/pic.jpg";
    profile[3] = "Web Site Manager";
}
profileloader(); // mandatory
document.write("Firstname is: " + profile[0]); 
```

# postgresql - Postgresql 执行函数

> ID：10714073
> 
> 赞同：0
> 
> 时间：2012-05-23T05:39:37.643
> 
> 标签：postgresql, execute

我正在尝试创建一个函数，在其中一个表字段中搜索字符串，然后返回一个新的用户表。基本上，在一张桌子内，我有

```
create table fooSearchTable (
    id          integer, -- PG: serial
    name        LongName unique not null,
    queryDef    LongString not null,
    primary key (id)
); 
```

where`queryDef`是一个字符串，其中包含要执行的另一个查询。例如，一行可能是

```
1 | resultName | select * from users where users.id = '4' 
```

我得到了这个函数格式来开始这个函数

```
create or replace function searchUsers(_searchName text) returns table (userID integer) as $$
begin
end;
$$ language plpgsql stable; 
```

我需要运行 SQL 查询来找到`_searchName`匹配的行

```
select queryDef from fooSearchTable f
where f.name = _searchName; 
```

这将返回字符串，但我不知道如何在函数中执行此字符串，因此我可以获得用户 ID 表。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:59:11.083

像这样的东西应该工作：

```
create or replace function searchUsers(_searchName text) 
   returns table (userID integer) 
as $$
  _query varchar;
begin
  select queryDef
     into _query 
  from fooSearchTable f
  where f.name = _searchName;

  return query execute _query;
end
$$ language plpgsql; 
```

（未经测试，因此可能包含语法错误）

请注意，这`select .. into`要求语句只返回一行，否则在运行时会出错。您要么需要确保条件满足此条件，要么`limit`在 select 语句上应用子句。

这在这里解释：
[http ://www.postgresql.org/docs/current/static/plpgsql-control-structures.html#AEN54092](http://www.postgresql.org/docs/current/static/plpgsql-control-structures.html#AEN54092)

# jquery - jquery验证引擎日期格式函数

> ID：10714076
> 
> 赞同：2
> 
> 时间：2012-05-23T05:39:48.167
> 
> 标签：jquery

> **可能重复：**
> [Javascript 日期正则表达式 DD/MM/YYYY](https://stackoverflow.com/questions/5465375/javascript-date-regex-dd-mm-yyyy)

我正在使用此验证：- [jquery 验证引擎](http://www.position-absolute.com/articles/jquery-form-validator-because-form-validation-is-a-mess/)

默认情况下，日期格式的验证功能是：-

```
 "date": {
                    "regex": /^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/,
                    "alertText": "* Invalid date, must be in YYYY-MM-DD format"
                }, 
```

在 YYYY-MM-DD 格式中，我想将其更改为 DD-MM-YYYY

任何人都可以帮助我，再次重写该功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:00:08.040

将此链接用于日期正则表达式

```
//match date in format MM/DD/YYYY
var dateMMDDYYYRegex = '^(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)\d\d$'; 
```

检查更多帮助点击这里-http [://www.jquery4u.com/syntax/jquery-basic-regex-selector-examples/#.T70st0VYvg8](http://www.jquery4u.com/syntax/jquery-basic-regex-selector-examples/#.T70st0VYvg8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:45:58.003

假设，您正在使用 Jquery Validator 插件来验证表单字段，现在您想要使用自定义格式（如 mm/dd/yyyy 或 dd/mm/yyyy 或 dd-mm-yyyy 或 mm-dd-yyyy）验证日期字段，那么有没有办法通过传递参数。

目前，Jquery Validator 插件不允许为验证定义日期格式。

在这种情况下，您需要添加一个自定义函数，并且需要在其中编写日期格式验证代码，并且需要将该函数作为参数传递给验证规则函数中的该字段。

[http://triotips.com/programming/jquery/jquery-validate-plugin-custom-date-format-validation-394.html](http://triotips.com/programming/jquery/jquery-validate-plugin-custom-date-format-validation-394.html)

用这个替换并尝试

```
/^(0?[1-9]|[12][0-9]|3[01])[\/\-](0?[1-9]|1[012])[\/\-]\d{4}$ 
```

# php - 如何使用 php 从 flickr 和 picasa 视频中提取缩略图？

> ID：10714078
> 
> 赞同：1
> 
> 时间：2012-05-23T05:40:15.150
> 
> 标签：php, cakephp, flickr, picasa

如何使用 php 从 flickr 和 picasa 视频中提取缩略图

请问谁能帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:20:36.287

假设您可以在浏览器中看到图像。因此，首先，您需要获取包含图像的链接的链接。

为此，您应该像这样简单地分析查看页面的内容并执行正则表达式匹配；

```
<?php

ob_start();

$content = ob_get_contents();

    function find_all_img_url_in_cur_page(){
      global $content;

      $result = array();

      if ( preg_match('/jpg/i', $content) ){
         //find postion and add into array
       }
      return $result;
    }

    find_all_img_url_in_cur_page();

    ob_end_clean();
    ?> 
```

那么你需要复制/打开你当前正在处理的这个 IMG 文件（使用通常与 php 捆绑在一起的标准 GD 库）。

谷歌“使用 php 调整图像大小”，所以在你得到你想要的之后

# java - 从 jsp 调用 servlet 并返回 jsp

> ID：10714083
> 
> 赞同：1
> 
> 时间：2012-05-23T05:40:21.947
> 
> 标签：java

我尝试从jsp访问servlet，然后如果数组列表传递为0，则使用webservice访问代码。它应该显示一个图像，如果它传递1，它应该显示一个不同的jsp。我能够生成代码，但它没有按预期工作。任何人都可以弄清楚问题所在。

包装萨尔；

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.OutputStream;
import java.util.ArrayList;
import java.util.List;

import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

/**
 * Servlet implementation class Amberalerts
 */
public class Amberalerts extends HttpServlet {
    private static final long serialVersionUID = 1L;

    public void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {

        List  list = getList();
        if(list != null && list.size() != 0){
          dispatchToShowJsp(req, resp, "/ShowImage.jsp");
        }else{
            dispatchToShowJsp(req, resp, "/ShowDefaultMsg.jsp");
        }

        // writeImageTOBuffer(resp);
    }
    private List getList() {
        List<String> list = new ArrayList<String>();
        list.add("Result");
        return list;
    }
    private void dispatchToShowJsp(HttpServletRequest req,
            HttpServletResponse resp, String jsplocation) throws IOException {
        try {
            getServletConfig().getServletContext().getRequestDispatcher(
                    jsplocation).forward(req,resp);
        } catch (ServletException e) {

            e.printStackTrace();
        }
    }
    /**
     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)
     */

    private void writeImageTOBuffer(HttpServletResponse resp)
            throws FileNotFoundException, IOException {
        // Get the absolute path of the image
        ServletContext sc = getServletContext();
        String filename = sc.getRealPath("rsc/image.gif");

        // Get the MIME type of the image
        String mimeType = sc.getMimeType(filename);
        if (mimeType == null) {
            sc.log("Could not get MIME type of "+filename);
            resp.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
            return;
        }

        // Set content type
        resp.setContentType(mimeType);

        // Set content size
        File file = new File(filename);
        resp.setContentLength((int)file.length());

        // Open the file and output streams
        FileInputStream in = new FileInputStream(file);
        OutputStream out = resp.getOutputStream();

        // Copy the contents of the file to the output stream
        byte[] buf = new byte[1024];
        int count = 0;
        while ((count = in.read(buf)) >= 0) {
            out.write(buf, 0, count);
        }
        in.close();
        out.close();
    }

    /**
     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)
     */
    protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        // TODO Auto-generated method stub
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T18:52:14.633

值得注意的是，您的代码将不起作用，因为您的调用已`writeImageToBuffer`被注释掉，并且您的 if/else 语句`doGet(req,resp)`将始终调用该`dispatchToShowJsp()`方法。

无论如何，使用[Apache Commons IO](http://commons.apache.org/io/)来帮助一些繁忙的工作，你可以调用`sendImageToResponse`下面的方法来发送你的图像：

```
package com.stackoverflow.servlet;

import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import org.apache.commons.io.FileUtils;
import org.apache.commons.io.IOUtils;

public class ShowImageServlet extends HttpServlet {

        public void sendImageToResponse(HttpServletResponse response) throws ServletException, IOException {

        File imageFile = new File("PATH_TO_YOUR_IMAGE_FILE"); // configure this however you want

        OutputStream outStream = null;
        InputStream inStream = null;

        try {

            outStream = response.getOutputStream();

            // Open image file
            inStream = FileUtils.openInputStream(imageFile);

            response.setContentType("image/jpeg");

            System.out.println("SENDING " + imageFile);

            // Send image file
            IOUtils.copy(inStream, outStream);

            System.out.println("SENT SIZE=" + imageFile.length());

        } catch (Exception ex) {

            // Handle your exception

        } finally {

            // close image file
            IOUtils.closeQuietly(inStream);

            try {

                // flush stream
                outStream.flush();

            } catch (Exception ignore) {

                // Ignore

            } finally {

                IOUtils.closeQuietly(outStream);
            }
        }
    }
} 
```

# android - 无法在android中获取json数组值

> ID：10714085
> 
> 赞同：0
> 
> 时间：2012-05-23T05:40:25.643
> 
> 标签：android, json, web-services

`嗨伙计们，

请检查此 Json 的格式。

```
{"id": "293369****","owner": {
  "name": "******",
  "id": "*****"},name": "test event","start_time": "2012-05-18T02:00:00","end_time":"2012-05-18T05:00:00","privacy": "FRIENDS","updated_time": "2012-05-18T08:25:37+0000"} 
```

M 使用此代码。M 能够获取除所有者 json 数组之外的所有值。我想获取所有者数组的值。请建议我哪里出错了。

```
json = new JSONObject(responsedata);
        Log.d(TAG, "name=" + responsedata);
        facebookData = new Events();
        JSONArray data=json.optJSONArray("owner");

        Log.d(TAG, "Data length==" + data.length());
        if (data.length() > 0) {
            for (int i = 0; i < data.length(); i++) {

                JSONObject jsonobj = data.getJSONObject(0);
                Log.d(TAG, "owner Name="+jsonobj.getString("name"));
            }
            }

        facebookData.setEventName(json.getString("name"));
        facebookData.setEventId(json.getString("id"));
        facebookData.setEventStartDate(json.getString("start_time"));
        facebookData.setEventEndDate(json.getString("end_time"));
        facebookData.setPrivacy(json.getString("privacy"));
    facebookData.setUpdatedTime("updated_time"); 
```

我无法获取所有者姓名和所有者 facebook id。我的 json 解析器有一些问题。

请帮助我。

在此先感谢 Gaurav Gupta

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T05:49:17.433

```
 {
   "id":"293369****",
   "owner":{
      "name":"******",
      "id":"*****"
   },
   "name":"test event",
   "start_time":"2012-05-18T02:00:00",
   "end_time":"2012-05-18T05:00:00",
   "privacy":"FRIENDS",
   "updated_time":"2012-05-18T08:25:37+0000"
 } 
```

正如`{`暗示 JsonObject 和`[`暗示 JsonArray。

我在上面的字符串中没有找到任何 JsonArray。`"owner"`是 JsonObject。

你必须修改你的代码见[http://www.androidcompetencycenter.com/2009/10/json-parsing-in-android/](http://www.androidcompetencycenter.com/2009/10/json-parsing-in-android/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:44:30.270

```
try this one
 try{
        JSONArray jArray = new JSONArray(result);
        JSONObject json_data=null;
           for(int i=0;i<jArray.length();i++)
           {
                json_data =jArray.getJSONObject(i);
                String src_name=json_data.getString("owner");

           }
    }catch(JSONException e){
            Log.e("log_tag", "Error parsing data "+e.toString());
            Toast.makeText(getApplicationContext(), "fail", Toast.LENGTH_SHORT).show();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:53:35.653

如果所有者是 a `JSONArray`，它应该看起来像这样（内部`[]`）

```
"owner": [{"name": "******", "id": "*****"}] 
```

# arduino - 如何使用微控制器 + 奔腾 4 处理器执行正常的数学任务

> ID：10714087
> 
> 赞同：2
> 
> 时间：2012-05-23T05:40:34.297
> 
> 标签：arduino, x86

我刚得到一个旧的 pentium 4，我想用它来计算一些繁重的数学会很好。所以我有一个 arduino Duemilanove，我知道如何将数据发送到处理器，但我不知道如何指定处理器它应该做哪些数学运算（如乘法、sqrt、sin 等），以及如何我是否指定我在哪里从处理器中获得这些答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:38:28.230

您制作了一个下载到 Arduino Duemilanove 的应用程序，并为您的 Pentium 4 计算机制作了一个应用程序。这些应用程序需要通过一些通信通道（如现有的 USB/FTDI/RS232）交换数据。您需要学习如何使用 Arduino 编程语言和您最喜欢的 PC 编程语言向/从它发送/接收数据。然后你需要制定一个双方都能理解的协议。Arduino 将发送一条消息，其中包含计算所需的所有输入，PC 将回复计算结果。您还需要学习如何将应用程序下载到 Arduino，以及通过这种方式进行的许多其他事情，但我强烈建议您从闪烁的 LED 开始。这是微控制器的 hello world 应用程序，每个新手都应该先从这小步开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T18:16:45.963

我想，我要构建一个内核来驱动处理器的基本功能，并使用 agtl 转换为 ttl 进行 arduino/cpu 通信。

# java - Java 中的 InputMismatchException 错误

> ID：10714089
> 
> 赞同：0
> 
> 时间：2012-05-23T05:40:42.763
> 
> 标签：java

```
 public static void readStaffsFromFile() {
    String inFileName = "startup.txt";
    int numStaff, staffID;
    String name, address;
    Staff newStaff;
    boolean fileExists;
    Scanner inFile = null;
    File databaseFile = new File(inFileName);

    fileExists = databaseFile.exists();

    if (fileExists) {
        try {
            inFile = new Scanner(databaseFile);
        } catch (FileNotFoundException fnfe) {
            JOptionPane.showMessageDialog(null, "The file startup.txt has just now been deleted.");
            return; // cannot do anything more.
        }

        numStaff = inFile.nextInt();
        inFile.nextLine();

        for (int i = 0; i < numStaff; i++) {
            staffID = inFile.nextInt();
            name = inFile.nextLine();
            address = inFile.nextLine();

            // try{
            newStaff = new Staff(staffID, name, address);
            addStaff(newStaff);
            // } catch (StaffException se)
            // {
            // System.out.println("Unable to add staff: " + name +
            // " to the system.");
            // }

        }

    }
    JOptionPane.showMessageDialog(null, "System has been set up with default data from startup.txt.");
} 
```

我有这个方法，当我尝试从 main 调用这个方法时，它给了我这个错误。

线程“主”java.util.InputMismatchException 中的异常

```
at java.util.Scanner.throwFor(Scanner.java:909)
at java.util.Scanner.next(Scanner.java:1530)
at java.util.Scanner.nextInt(Scanner.java:2160)
at java.util.Scanner.nextInt(Scanner.java:2119)
at SystemStartUp.readStaffsFromFile(SystemStartUp.java:195)
at SystemStartUp.loadFromFile(SystemStartUp.java:160)
at StartUp.main(StartUp.java:9) 
```

错误的错误行表明我的错误从“ `staffID = inFile.nextInt();`”行开始

输入文件如下所示。

```
13

11111111

Chris Ling

999 Dandenong Road

22222222

Des Casey

100 Silly Drive

33333333

Maria Indrawan

90 Programming Road

44444444

Campbell Wilson

2/5 Database Street

55555555

Janet Fraser

21 Web Drive

66666666

Judy Sheard

34 Hos Road

77777777

Ngoc Minh

24 Message Street

88888888

Martin Atchinson

45 Martine Street

99999999

Aleisha Matthews

1/6 Admin Road

10101010

Denyse Cove

100 Reception Street

12121212

Cornelia Liou

232 Reception Road

23232323

Trudi Robinson

111 Manager Street

34343434

Henry Linger

2/4 HDR Street 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:43:12.857

可能`staffID`并不总是包含数字。请检查输入文件。

之后`staffID`，您必须添加`inFile.nextLine();`以消耗带有数字的行之后的新行字符。否则，您将在第二个循环中收到错误。

# c# - 在 Windows Mobile 中，我应该使用什么来压缩而不是 GZipStream？

> ID：10714090
> 
> 赞同：0
> 
> 时间：2012-05-23T05:40:47.077
> 
> 标签：c#, windows-mobile, zip, gzipstream

我正在 Microsoft Visual Studio 2005 中为 Windows Mobile 6 开发应用程序。我必须解压缩 Web 服务收到的文本。但是当我使用 GZipStream 时，出现以下错误：

> 错误 1 ​​找不到类型或命名空间名称“GZipStream”（您是否缺少 using 指令或程序集引用？）

我现在该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:33:33.577

GZipStream 支持在 3.5 版中添加到 Compact Framework。要针对 CF 3.5 进行开发，您需要 Visual Studio 2008（VS 2010 不**支持**针对 Compact Framework 的开发）。

如果您锁定到 Visual Studio 2005 并且您无法控制您使用的 Web 服务，您可以创建一个中间 Web 服务来基本上将数据重新打包为 CF 2.0 支持的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:22:09.380

我找到了。

~~全新的~~ Compact [Framework 3.5 Beta1](http://www.microsoft.com/downloads/details.aspx?FamilyID=1343d537-a62f-4a6e-9727-7791bf4cc2bd&DisplayLang=en)现在包含压缩功能！

介绍

Compact Framework 缺少移动设备开发的关键命名空间 - System.IO.Compression。在这里可以使用流行的 ZIP 压缩来压缩文本、xml、文件或任何流。您可以通过压缩应用程序使用的数据来使用它来节省设备上的存储空间。或者，您可以在将信息传输到服务器之前使用它来压缩信息，以节省 GPRS 成本并加快传输时间。只需以与在完整框架上完全相同的方式使用此库。

下载链接

[CF1免费下载](http://www.aspecto-software.com/ccount/click.php?id=10)

[CF2免费下载](http://www.aspecto-software.com/ccount/click.php?id=9)

* * *

[我的参考](http://www.aspecto-software.com/rw/applications/developer/compression/index.html)

# c# - XNA之后的C#游戏开发

> ID：10714091
> 
> 赞同：40
> 
> 时间：2012-05-23T05:40:56.630
> 
> 标签：c#, xna, unity3d

我是一名游戏开发人员，在过去的四个版本中使用 XNA 用 .Net 语言制作游戏。不幸的是，现在有这个消息：[http ://www.gamasutra.com/view/news/185894/Its_official_XNA_is_dead.php#.UQ3yiehQCh8](http://www.gamasutra.com/view/news/185894/Its_official_XNA_is_dead.php#.UQ3yiehQCh8)

我正在调查游戏引擎的生态系统，寻找支持在 Visual Studio 中编码的东西（我大量使用 F#，信不信由你！）我很难找到高质量、*仍然活着*和高性能的东西来替换XNA。例如，Unity 没有做到这一点，因为它只允许在 MonoDevelop 中编写脚本，而我想要一个对开发人员更友好的体验。

那么什么是 XNA 的好替代品呢？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-23T12:51:42.430

如果你想利用 XNA API，你应该押注[MonoGame](http://monogame.codeplex.com/)。它是一个兼容的 XNA API，旨在在多个平台上运行（包括几个使用 OpenGL 的非 Windows 平台）。开发非常活跃，MonoGame 最近获得了开始在 Windows Metro 应用程序上运行的完整 3D 堆栈（感谢[SharpDX](http://sharpdx.org)）。你可以看看最新的[develop3d](https://github.com/mono/MonoGame/tree/develop3d)分支。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-23T07:36:28.253

没有什么比 XNA 更棒的了。我不明白为什么 MS 把 XNA 扔掉了。它是唯一可与 Xbox 360 配合使用的系统。您可以尝试使用 Tao、SlimDx 等引擎或包装器。但 XNA 是快速游戏开发的最佳系统。

我现在切换到 Java + LWJGL。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-23T06:18:16.120

我不知道你上次是什么时候检查的，但[Unity 实际上确实支持 Visual Studio 中的编码](http://unity3d.com/support/documentation/Manual/VisualStudioIntegration.html)。您只需在首选项中选择它作为编辑器。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-11T22:01:45.847

Imo，如果您要成为游戏开发人员并且想要完全控制并想要移植，并且还想要使用 C#。

OpenTK 可能是要走的路。它最高支持 OpenGL 3.0 并与单声道兼容，这意味着您可以移植到 PC、OSX、Linux、Android 和 IOS。具有讽刺意味的是，你唯一不能用它做的事情就是 xbox 360/1 和 windows phone。但是 imo，如果您希望在 Android 和 IOS 手机上制作游戏占市场的 90% 以上，那么请走这条路……

[http://www.opentk.com/](http://www.opentk.com/)

缺点：

这个项目似乎自 2010 年以来就没有更新过，但它非常稳定，并且功能丰富，可用于 open gl 3.0。但是如果你想更进一步，你最终需要自己更新它，但它是开源的并且在 GPL 下，所以你可以。

OpenTK 还包含 OpenAL 并处理图形和声音。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-14T20:46:13.207

此外，如果您希望获得与 XNA 类似的东西，您可以使用提供与 XNA 类似的界面的 SharpDX 和 SharpDX 工具包。看[这里](http://sharpdx.org/)

[从他们的站点下载](http://sharpdx.org/download/)SharpDX（选择“SharpDX-Full-2.4.0.exe”，它在存档中有示例），解压缩并运行 SharpDXToolkitSamples.sln

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-23T05:48:11.503

尝试查看[Axiom](http://axiom3d.net/wiki/index.php/Main_Page)（OGRE 的 .NET 端口）和[Delta Engine](http://www.deltaengine.net/)。

**编辑：**如果您正在寻找较低级别的图形库，请尝试[OpenTK](http://www.opentk.com)或[SlimDX](http://slimdx.org/)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-02-03T20:46:43.283

没有人提到[过 DirectXTK](http://directxtk.codeplex.com/)吗？我相信这是 XNA 的直接继任者，它正在 Windows 8 上/与 Windows 8 一起开发[。Shawn Hargreaves 的更多信息在这里](http://blogs.msdn.com/b/shawnhar/archive/2013/01/25/directxtk-now-supports-loading-and-drawing-3d-models.aspx)。

当然，如果您对跨平台开发感兴趣，请按照某些人的建议查看 MonoGame。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-11-13T20:24:41.910

Unity 4.2 允许在 Visual Studio for Windows 8 或 RT 中进行编码。据我了解，4.3+ 将允许通过 Visual Studio 对 Windows Phone 8 进行编码。虽然不是 XNA 的理想替代品，但仍然是可行的。至于 XBOX 360 或除 Windows 8 和 Phone 8 之外的其他平台，我不确定 VS 是否可以成为您的 IDE，但微软正在大力推动 Unity3D，请查看 XBOX One 的 devkits 促销活动。他们实际上将它们赠送给独立开发者：

[http://techcrunch.com/2013/11/05/unity-game-engine-goes-free-for-indie-xbox-one-developers/](http://techcrunch.com/2013/11/05/unity-game-engine-goes-free-for-indie-xbox-one-developers/)

对于独立开发者来说，这是数千美元的免费软件和硬件。向民主化游戏开发过程和协助独立工作室又迈进了一步。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-23T05:50:10.880

你试过[Tao Framework](http://en.wikipedia.org/wiki/Tao_Framework)、[Allegro](http://alleg.sourceforge.net/)和[SlimDX](http://slimdx.mdxinfo.com/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-05-23T06:58:51.847

[SharpDX](http://www.sharpdx.org/)允许您从托管代码中充分利用 DirectX，它目前非常活跃，即使支持 WinRT。

# objective-c - 如何在 Objective-C/iOS 中创建准确的计时器事件？

> ID：10714092
> 
> 赞同：5
> 
> 时间：2012-05-23T05:41:02.590
> 
> 标签：objective-c, ios, timer, nstimer

我正在寻找在 iOS 上为 SMPTE 时间码 (HH:MM:SS:FF) 创建一个倒数计时器。基本上，它只是一个分辨率为 33.33333ms 的倒数计时器。我不太确定 NSTimer 是否足够准确，可以指望触发事件来创建这个计时器。每次此计时器递增/递减时，我都想触发一个事件或调用一段代码。

我是 Objective-C 的新手，所以我正在从社区中寻找智慧。有人建议了[CADisplayLink](http://developer.apple.com/library/ios/#documentation/QuartzCore/Reference/CADisplayLink_ClassRef/Reference/Reference.html)类，寻求一些专家建议。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-23T11:41:16.967

试试 CADisplayLink。它以刷新率（60 fps）触发。

```
CADisplayLink *displayLink = [CADisplayLink displayLinkWithTarget:self selector:@selector(timerFired:)];
displayLink.frameInterval = 2;
[displayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode]; 
```

这将每 2 帧触发一次，即每秒 30 次，这似乎是您所追求的。

请注意，这与视频帧处理有关，因此您需要非常快速地在回调中完成工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T07:31:40.457

你基本上没有任何保证`NSTimer`or `dispatch_after`; 他们安排代码在主线程上触发，但如果其他事情需要很长时间才能执行并阻塞主线程，则您的计时器将不会触发。

也就是说，您可以轻松避免阻塞主线程（仅使用异步 I/O）并且事情应该会非常好。

您没有在计时器代码中确切说明您需要做什么，但是如果您需要做的只是显示倒计时，那么只要您根据系统时间而不是数字计算 SMPTE 时间就可以了根据您的计时器间隔，您认为应该经过的秒数。如果你这样做，你几乎肯定会漂移并与实际时间不同步。相反，请记下您的开始时间，然后根据该时间进行所有数学运算：

```
// Setup
timerStartDate = [[NSDate alloc] init];
[NSTimer scheduledTimer...

- (void)timerDidFire:(NSTimer *)timer
{
    NSTImeInterval elapsed = [timerStartDate timeIntervalSinceNow];
    NSString *smtpeCode = [self formatSMTPEFromMilliseconds:elapsed];
    self.label.text = smtpeCode;
} 
```

现在，无论计时器被触发的频率如何，您都将显示正确的时间码。（如果计时器没有足够频繁地触发，计时器将不会更新，但当它更新时它将是准确的。它永远不会不同步。）

如果您使用 CADisplayLink，您的方法将在显示更新时被调用。换句话说，尽可能快地使用它，但不会更快。如果您要显示时间，那可能就是要走的路。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T07:09:03.443

如果你的目标是 iOS 4+，你可以使用 Grand Central Dispatch：

```
// Set the time, '33333333' nanoseconds in the future (33.333333ms)
dispatch_time_t time = dispatch_time(DISPATCH_TIME_NOW, 33333333);
// Schedule our code to run
dispatch_after(time, dispatch_get_main_queue(), ^{
    // your code to run here...
}); 
```

这将在 33.333333 毫秒后调用该代码。如果这将是一个循环排序交易，您可能希望使用该`dispatch_after_f`函数而不是使用函数指针而不是块：

```
void DoWork(void *context);

void ScheduleWork() {
    // Set the time, '33333333' nanoseconds in the future (33.333333ms)
    dispatch_time_t time = dispatch_time(DISPATCH_TIME_NOW, 33333333);
    // Schedule our 'DoWork' function to run
    // Here I pass in NULL for the 'context', whatever you set that to will
    // get passed to the DoWork function
    dispatch_after_f(time, dispatch_get_main_queue(), NULL, &DoWork);
}

void DoWork(void *context) {
    // ...
    // Do your work here, updating an on screen counter or something
    // ...

    // Schedule our DoWork function again, maybe add an if statement
    // so it eventually stops
    ScheduleWork();
} 
```

然后`ScheduleWork();`在您想启动计时器时调用。对于重复循环，我个人认为这比上面的块方法更干净，但对于一次性任务，我绝对更喜欢块方法。

有关更多信息，请参阅[Grand Central Dispatch 文档](https://developer.apple.com/library/mac/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)。

# ajax - 如何在每个选项卡中显示使用 ajax 获取的 json 数据

> ID：10714095
> 
> 赞同：0
> 
> 时间：2012-05-23T05:41:47.810
> 
> 标签：ajax, json, jquery, jquery-ui-tabs

我有一个带有返回 json 数据的方法的 struts 2 动作类。

我的jsp上有8个标签。当用户单击选项卡时，我想对此方法进行 ajax 调用。我希望使用可以在此选项卡中呈现的 html 来解析和修饰返回的 json 数据。

我正在使用 jquery tabs 来制作[tabs](http://jqueryui.com/demos/tabs/#ajax)。

*   如何捕获返回的 json 数据？我可以订阅 jquery 发布的一些事件吗？
*   如何处理返回的 json 数据？例如；json数据：

{ 城市 : {name="New York", alias="NY", imgPath="filePath/img1.jgp"} }

我想提取名称并将其加粗。使用 imgPath 定义 img 标签等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:40:18.270

```
 $(document).ready(function () {
            var data = { "City": [{ "name": "New York1", "alias": "NY1", "imgPath": "filePath/img1.jgp" }, { "name": "New York2", "alias": "NY2", "imgPath": "filePath/img2.jgp" }, { "name": "New York3", "alias": "NY3", "imgPath": "filePath/img3.jgp" }, { "name": "New York4", "alias": "NY4", "imgPath": "filePath/img4.jgp"}] };

            if (data.City.length > 0) {
                $('body').prepend('<div id="tabs1"><ul></ul></div>');

                $.each(data.City, function (i, entity) {
                    $('#tabs1 ul').append($('<li><a href="#tabs1-' + (i + 1) + '">' + entity.name + '</a></li>'));
                    $('#tabs1').append('<div id="tabs1-' + (i + 1) + '"><p>Image Path:' + entity.imgPath + '</p></div>');
                });

                $("#tabs1").tabs();
            }
        });​ 
```

对于现场演示，请参阅此链接：http: [//jsfiddle.net/nanoquantumtech/ffbx5/](http://jsfiddle.net/nanoquantumtech/ffbx5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:00:55.577

您可以通过将 data 参数传递给将在成功时执行的 ajax 调用成功回调方法来捕获返回的 Json 数据。 [http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

您可以使用`jQuery parse.json`方法并将json字符串传递给它。[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

您的示例 json 字符串看起来不是有效的另一件事。您可以通过简单地粘贴您的 json 数据或粘贴 url从这个链接[http://jsonlint.com/](http://jsonlint.com/)检查您的 json 是否有效。

# apache-flex - 获取特定单元格的 ItemRenderer - Flex DataGrid

> ID：10714098
> 
> 赞同：0
> 
> 时间：2012-05-23T05:42:08.230
> 
> 标签：apache-flex, dynamic, datagrid, runtime, itemrenderer

我有一个包含 2 列的数据网格。每当 column-1 值发生变化时，我都需要访问第二列的项目渲染器。即如果第1列的值为A-需要在第2列中显示文本字段，如果值为B，我需要显示下拉列表。

Col1---------Col2

一个 ---------- 下拉

B ---------- 文本框

一个 ---------- 下拉

任何解决方案？？？

```
public class ItemRendererfroDropTest extends GridItemRenderer
{
    private var dropdown:DropDownList;
    public function ItemRendererfroDropTest()
    {
        super();
        dropdown=new DropDownList();
        dropdown.dataProvider=new ArrayCollection(new Array("ABC","PQR"));
        this.addElement(dropdown);
        dropdown.addEventListener(FlexEvent.VALUE_COMMIT,dataChanged);
    }

    private function dataChanged(event:FlexEvent):void
    {
        owner.dispatchEvent(new CustomEvent(CustomEvent.DATA_CHANGED,true));
    }

}

public class ItemRenderlabel extends GridItemRenderer
{
    public var wlabel:Label=new Label();
    public var checkbox:CheckBox=new CheckBox();

    public function ItemRenderlabel()
    {
        super();
        this.addEventListener(CustomEvent.DATA_CHANGED,mappingChanged,true);
        this.addElement(wlabel);
    }
    private function mappingChanged(e:CustomEvent):void
    {
        Alert.show("asfAS");
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:51:51.210

[根据需要使用带有视图的ViewStack](http://help.adobe.com/en_US/flex/using/WS2db454920e96a9e51e63e3d11c0bf69084-7e4d.html)创建项目渲染器，并像通常为项目渲染器所做的那样覆盖数据功能，以设置字段容器基础的活动子项，如果您想动态设置活动子项，请参阅此[帖子](https://stackoverflow.com/questions/3854973/flex-datagrid-change-value-based-on-another-value)

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T10:01:49.060

您可以从下面的代码中获得一些想法： - 事件您可以通过使用 dpHierarchy.itemUpdated() 更新单个行来仅针对特定项目执行此操作。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600"
               creationComplete="init()">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.events.FlexEvent;

            [Bindable]
            private var dpHierarchy:ArrayCollection= new ArrayCollection([
                {name:"A", region: "Arizona"},
                {name:"B", region: "Arizona"},
                {name:"C", region: "California"},
                {name:"D", region: "California"}
            ]); 

            private function init():void
            {
                this.addEventListener(FlexEvent.DATA_CHANGE, changeDataHandler);
            }

            private function changeDataHandler(event:FlexEvent):void
            {
                dpHierarchy.refresh();
            } 
        ]]>
    </fx:Script>

    <mx:AdvancedDataGrid id="myADG" 
                         width="100%" height="100%" 
                         variableRowHeight="true" dataProvider="{dpHierarchy}">
        <mx:columns>
            <mx:AdvancedDataGridColumn dataField="name" headerText="Name" itemRenderer="AddComboboxADG"/>
            <mx:AdvancedDataGridColumn dataField="region" headerText="Region" itemRenderer="SelectedCustomComponent"/>
        </mx:columns>   

    </mx:AdvancedDataGrid>

</s:Application> 
```

//AddComboboxADG自定义项渲染器

```
<?xml version="1.0" encoding="utf-8"?>
<s:MXAdvancedDataGridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                                  xmlns:s="library://ns.adobe.com/flex/spark" 
                                  xmlns:mx="library://ns.adobe.com/flex/mx" 
                                  focusEnabled="true">
    <fx:Script>
        <![CDATA[
            import mx.controls.AdvancedDataGrid;
            import mx.controls.advancedDataGridClasses.AdvancedDataGridColumn;
            import mx.controls.advancedDataGridClasses.AdvancedDataGridHeaderRenderer;
            import mx.controls.advancedDataGridClasses.AdvancedDataGridListData;
            import mx.events.AdvancedDataGridEvent;
            import mx.events.DataGridEvent;
            import mx.events.FlexEvent;
            import mx.events.ItemClickEvent;

            import spark.components.supportClasses.ItemRenderer;
            import spark.events.IndexChangeEvent;

            protected function comboBoxID_changeHandler(event:IndexChangeEvent):void
            {
                data.name = comboBoxID.selectedItem;
                dispatchEvent(new FlexEvent(FlexEvent.DATA_CHANGE, true));
            }

            override public function set data(value:Object):void
            {
                super.data = value;

                if(data.name == "A")
                {
                    comboBoxID.selectedIndex = 0;
                }else if(data.name == "B")
                {
                    comboBoxID.selectedIndex = 1;
                }else if(data.name == "C")
                {
                    comboBoxID.selectedIndex = 2;   
                }else
                {
                    comboBoxID.selectedIndex = 3;
                }
            }

        ]]>
    </fx:Script>

    <s:DropDownList id="comboBoxID" change="comboBoxID_changeHandler(event)">
        <s:ArrayCollection>
            <fx:String>A</fx:String>
            <fx:String>B</fx:String>
            <fx:String>C</fx:String>
            <fx:String>D</fx:String>
        </s:ArrayCollection>
    </s:DropDownList>
</s:MXAdvancedDataGridItemRenderer> 
```

//SelectedCustomComponent 自定义项渲染器

```
<?xml version="1.0" encoding="utf-8"?>
<s:MXAdvancedDataGridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
                                  xmlns:s="library://ns.adobe.com/flex/spark" 
                                  xmlns:mx="library://ns.adobe.com/flex/mx" 
                                  focusEnabled="true">
    <fx:Script>
        <![CDATA[
            override public function set data(value:Object):void
            {
                super.data = value;
                customFirstDropDown.visible = customTextInput.visible = customSecondDropDown.visible = lblData.visible = false;

                if(data.name == "A")
                {
                    customFirstDropDown.visible = true;
                }else if(data.name == "B")
                {
                    customTextInput.visible = true;
                }else if(data.name == "C")
                {
                    customSecondDropDown.visible = true;    
                }else
                {
                    lblData.visible = true;
                }
            }
        ]]>
    </fx:Script>

    <s:DropDownList id="customFirstDropDown" visible="false" selectedIndex="0">
        <s:ArrayCollection>
            <fx:String>First</fx:String>
            <fx:String>Second</fx:String>
            <fx:String>Third</fx:String>
        </s:ArrayCollection>
    </s:DropDownList>
    <s:TextInput id="customTextInput" visible="false" text="Selected"/>
    <s:DropDownList id="customSecondDropDown" visible="false" selectedIndex="0">
        <s:ArrayCollection>
            <fx:String>1</fx:String>
            <fx:String>2</fx:String>
            <fx:String>3</fx:String>
        </s:ArrayCollection>
    </s:DropDownList>   

    <s:Label id="lblData" visible="false" text="Selected"/>
</s:MXAdvancedDataGridItemRenderer> 
```

# java - Java 如何在 IST 中打印时间

> ID：10714103
> 
> 赞同：5
> 
> 时间：2012-05-23T05:42:40.667
> 
> 标签：java, datetime

我目前能够获得时间和时区。但它总是印在

```
Wed May 23 11:01:08 GMT+05:30 2012 
```

作为 TimeZone 我得到了`GMT+05:30`。而不是这个我想打印`IST`

我试过

```
 SimpleDateFormat sd = new SimpleDateFormat("yyyy.MM.dd G 'at' HH:mm:ss z"); 
```

但我仍然得到`GMT+05:30`

```
TimeZone.getDefault().getDisplayName(true, TimeZone.SHORT); is also givine me GMT+05:30 
```

我尝试了各种事情，但没有得到欲望输出。我用过`Calender`但还是不能打印`IST`。

谁能告诉我如何及时打印`IST`（即使我不想打印`Indian standard time`）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T05:48:05.747

你还没有显示你实际在哪里*使用*`SimpleDateFormat`. 这是一个简短但完整的示例，它*确实*显示了 IST：

```
import java.text.*;
import java.util.*;

class Test {
    public static void main(String[] args) {
        SimpleDateFormat sd = new SimpleDateFormat(
            "yyyy.MM.dd G 'at' HH:mm:ss z");
        Date date = new Date();
        // TODO: Avoid using the abbreviations when fetching time zones.
        // Use the full Olson zone ID instead.
        sd.setTimeZone(TimeZone.getTimeZone("IST"));
        System.out.println(sd.format(date));
   }
} 
```

我机器上的输出：

```
2012.05.23 AD at 11:18:08 IST 
```

请注意，如果`TimeZone.getDefault()`未显示“IST”，则问题可能是：

*   系统实际上无法识别您的系统时区
*   您的 Java 安装没有关于 i18n 的完整时区信息

您使用的是哪个版本的 Java，在什么平台上？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:05:00.967

似乎您的时区设置错误。以下代码将打印`2012.05.23 AD at 11:30:20 IST`

```
TimeZone.setDefault(TimeZone.getTimeZone("IST"));
SimpleDateFormat f = new SimpleDateFormat("yyyy.MM.dd G 'at' HH:mm:ss z");
System.out.println(f.format(new Date())); 
```

但是，如果我使用`TimeZone.setDefault(TimeZone.getTimeZone("GMT+05:30"));`

我会得到`2012.05.23 AD at 11:30:20 GMT+05:30`。

进来的，出来的都是一样的。

# php - adLDAP -- 如何检索用户的组成员资格？

> ID：10714106
> 
> 赞同：1
> 
> 时间：2012-05-23T05:42:56.927
> 
> 标签：php, ldap, adldap

我是 LDAP 概念的新手，现在也开始使用[adLDAP](http://adldap.sourceforge.net) for PHP。现在一切正常，直到身份验证。

那么我如何在登录后通过知道“仅”和来获得用户的“**组成员身份**”（成员所在的组名称）？`username``password`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:59:11.880

哦，我现在明白了！:D

```
$result = $adldap->user()->groups("username");
print_r($result); 
```

# iphone -

> ID：10714111
> 
> 赞同：1
> 
> 时间：2012-05-23T05:43:50.587
> 
> 标签：iphone, ipad, xamarin.ios, xml-parsing, opf3

我想要**用于 iPad 的 mono touch c# 中的 epubreder 源代码** 我在 Xcode 中得到它，但需要在 c# 中转换...转换的问题是我想解析 container.xml 以获取 .opf 文件路径并再次解析 . opf文件....谁能帮我解决这个问题...

```
public void parseXMLFileAt(string strUrl)
        {

            try
             {
                NSMutableDictionary dict=new NSMutableDictionary();
                  XmlTextReader reader = new XmlTextReader("/Users/krunal/Desktop/container.xml");
                string strAttribute=""; 
                while (reader.Read())
                     {
                        switch (reader.NodeType)
                          {
                            case XmlNodeType.Element:
                            Hashtable attributes = new Hashtable();
                            string strURI= reader.NamespaceURI;
                            string strName= reader.Name;
                            if (reader.HasAttributes)
                             {
                                  for (int i = 0; i < reader.AttributeCount; i++)
                                     {
                                            reader.MoveToAttribute(i);
                                    attributes.Add(reader.Name,reader.Value);

                                     }
                             }  

                        parser(_parser,strUrl,strURI,strName,dict);

enter code here

StartElement(strURI,strName,strName,attributes);
                      break;

                     default:
                     break;
                         }
                     }
            }
             catch (XmlException e)
             {
                 Console.WriteLine("error occured: " + e.Message);
              }

        } 
```

**提前致谢**

# java - 决定在线后端系统的语言和服务器

> ID：10714115
> 
> 赞同：-2
> 
> 时间：2012-05-23T05:44:24.623
> 
> 标签：java, tomcat, ssh, administration, web-development-server

我需要制作一个连接到**mySQL Server****的在线系统/webapp/server**。此 Web 应用程序/服务器必须接受来自**android 应用程序**的传入通信，然后对数据库进行更改。还需要有一个**“Web Admin Console”**来进行手动数据操作。

 ******我正在考虑将**Java 与 Tomcat 一起**用于系统需要在其上运行的 Web 应用程序：

*   开源框架
*   有据可查的技术
*   安全数据传输

还有其他我可以使用的软件/语言吗？如何设置 Web 控制台？还需要有SSH访问...

我如何开始制作这个在线系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:49:26.730

您可以在 JEE6 中开发完整的系统。您也可以选择 RESTful WebServices 来集成 Android 应用程序和 Web 应用程序。对于开发 Web 应用程序，如果您想要丰富的外观和感觉，您可以使用 JSF。否则你可以坚持使用普通的 JSP 和 jQuery 和 Twitter Bootstrap 等框架。******

# c++ - 具有进程间通信功能的服务器-客户端日志记录体系结构。你知道解决办法吗？

> ID：10714118
> 
> 赞同：1
> 
> 时间：2012-05-23T05:44:43.037
> 
> 标签：c++, logging, ipc

现在我有：

*   使用通用静态库和动态 DLL编写的多线程**Windows 服务；**`C++`
*   每个线程执行不同的任务并产生不同的错误（数据库错误、函数调用错误等）。每个线程将进一步充当一个`logger client`（并将所有消息发送到一个`logger server`）；
*   一个**单独的线程**，它还没有主体，但**它将****充当**`logger server`处理来自.**`logger clients`**

 **我需要一个很好的建议，说明我应该如何将以下想法实施到一个可行的解决方案中。这个想法是为**我的多线程服务器添加一个服务器-客户端日志架构，**具有以下要求（尽管某些部分我需要自己实现，请仅考虑 and 的基本思想`logger client`）`logger server`：

1.  应该有很多`log clients`（正如我已经提到的，这`log client`只是一个现有的工作线程），每个都应该**注册一个具有唯一名称或/和 ID 的实体**以及以下行为：

    *   如果`logger server`启动并且现在正在工作，这`log client`将开始发送日志消息，

    *   否则（`logger server`关闭），`log client`无休止地尝试`log server`使用一个小的超时来注册自己。

2.  应该有一个`logger server`, 具有以下行为：

    *   `log server`使用其唯一名称或/ID注册所有人`log clients`，并无休止地检查是否出现要注册的新日志客户端

    *   日志服务器**处理来自不同的所有消息** `log clients`并写入数据库、文件等。

    *   应该有**机会建立与外部应用程序的连接** `log server`（**例如**，**MySuperThreadViewerProgram**以监视所有线程活动/错误/等）。在连接时，`log server`应将**外部应用程序视为一个附加应用程序** `log client`。**这是最重要的要求。**

总结起来，**要实现三个架构部分**：

1.  **服务器-客户端**记录器架构；
2.  **`log clients`和之间的**消息队列设施**`log server`。并`log server` **定期检查**是否有可用的日志客户端可以注册；**
***   **与外部应用程序之间**的进程间通信**`log server`，后者充当新的`log client`.****

 ****> 请注意，我认为 a`logger server`是一种**日志消息路由器**。

所以，主要问题是：

> 是否有任何解决方案（软件框架）具有上述所有功能（**最好**是），或者我应该为不同的部分使用不同的库？

如果答案是：“没有这样的解决方案”，您能否回顾一下我所做的选择：

*   对于#1：使用**Pantheios**记录器框架；
*   对于#2：使用任何类型的具有服务器-客户端架构和消息队列支持的注册-订阅库（**更新**：[ipc 库](http://www.cs.cmu.edu/~IPC/)）；
*   对于 #3：使用**Boost.Interprocess** - 使用 SharedMemory。

* * *

**更新：**

#2 的一个很好的例子是[这个 ipc library](http://www.cs.cmu.edu/~IPC/)。`logger client - logger server` **可能是我描述关系**有点不正确，但我真正的意思是类似于方法，在**[ipc](http://www.cs.cmu.edu/~IPC/)**库中完全描述和实现：**当一个实体（线程）订阅另一个实体（线程）以接收其消息**（或“发布-订阅”模型）。我想使用一种这种技术来实现我的日志架构。但以什么方式？

* * *

**更新2：**

操作系统是 Windows。是的，我知道，在 Linux 下有很多有用的工具和框架（D-Bus、Syslog）。可能你们中的一些人可以提供一个有用的跨平台库链接，这可能有用吗？也许在 Windows 下的 D-Bus上有一个**记录器框架？**

* * *

任何意见都受到高度赞赏。

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:24:56.380

ØMQ（ZeroMQ）可能是您提到的 ipc 库的可行替代方案，因为它具有许多符合您要求的功能。

它完全支持 PUB/SUB 模型，允许您在线程之间、进程之间甚至机器之间工作。它是一个客户端-服务器架构，一个消息队列，也可以作为 IPC 工作。

当然，您需要一种特定的编码和解码消息的方式，协议缓冲区确实是一个好主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:25:51.453

据我所知，日志后端 pantheios 使用（即日志接收器：数据库、文件或其他）是在链接时指定的。可以在启动时指定进入后端的日志的严重性，也可以在运行时进行一些简单的调整。

如果我说得对，那么您有一个进程（让我们暂时忘记外部应用程序）运行多个工作线程。其中一些线程应该记录到一个共同的后端（例如数据库），一些到另一个。因为 pantheios 不能开箱即用，您需要编写一个自定义后端，可以将日志路由到正确的后端。

如果内存消耗不是问题并且您不需要最快的日志记录性能，那么您可能需要查看 log4cxx，因为它是高度可配置的，并且可能使您免于实现具有所有同步的客户端-服务器架构-它带来的问题。

关于外部应用程序：如果可以保证它只是一个外部客户端，那么您可以使用管道机制与服务进行通信。然后，服务进程将有一个单独的线程，对应于您的服务器线程，它打开一个命名管道，也可以指定为日志接收器，以便您的工作线程可以登录到它以及其他日志接收器（数据库、文件ETC。）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T05:59:25.940

也有一些 syslog 服务器供 win 使用。例如，Winsyslog 来自著名的 rsyslog 的生产者。一旦你在 win 上运行了 syslogd，就会有很多独立于操作系统的 syslog 客户端，例如 SysLog4j（如果你使用 Java），或者 Syslog 处理程序用于 std。蟒蛇日志记录。******

# ruby-on-rails - Ruby on Rails - 从视图调用控制器方法

> ID：10714119
> 
> 赞同：11
> 
> 时间：2012-05-23T05:44:44.597
> 
> 标签：ruby-on-rails, ruby, view, controller

抱歉，我有一个 Rails 新手问题。在我的 Rails 应用程序中，如何从视图中调用控制器中定义的方法？例如，假设我编写了一个检索股票信息的自定义方法。在我看来，我希望有一个常规的 HTML 按钮，单击该按钮将调用我的自定义方法并填充库存结果。

这是怎么做的？我环顾四周，找不到直接的方法来做到这一点。但我确定我在这里遗漏了一些东西。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-23T05:53:55.817

***编辑：我用它的标题来回答这个问题，这不是问题所在。您问题标题的答案在底部***

您想要的是一个 ajax 请求，它是一个单独的控制器操作。你需要：

1.  javascript 在单击按钮时请求路由并填充其 DOM 对象

2.  返回 ajax 请求所要求的任何操作的操作

有很多方法可以做到这一点，但是如果您搜索“howto rails ajax”，您会发现大量教程可以帮助您。我喜欢的一种方式称为 pjax：[https ://github.com/rails/pjax_rails](https://github.com/rails/pjax_rails)

***老答案...***

声明一个`helper_method`，像这样：

在您的控制器中：

```
private
def find_stock
  ...
end
helper_method :find_stock 
```

在您看来：

```
<% find_stock.each do |stock| -%> 
```

文档：[http ://api.rubyonrails.org/classes/AbstractController/Helpers/ClassMethods.html#method-i-helper_method](http://api.rubyonrails.org/classes/AbstractController/Helpers/ClassMethods.html#method-i-helper_method)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:49:25.327

您可以查看[`button_to`](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to)查看帮助程序的文档

这是一种方式，当然，您可以使用远程选项通过 AJAX 请求执行此操作。

# android - 无法从 sqlite 检索信息

> ID：10714122
> 
> 赞同：0
> 
> 时间：2012-05-23T05:44:55.660
> 
> 标签：android, sqlite

我的屏幕上有 3 个按钮，分别选择图像、保存数据和校验数据。当我单击检查数据时，它显示一个空白屏幕，它没有显示任何图像 有一个警告，字段 DataManipulator.insert 的值未使用 任何人都可以更正我的代码吗？这是我的 DataManipulator.java

```
public class DataManipulator {
    private static final  String DATABASE_NAME = "mydatabase.db";
    private static final int DATABASE_VERSION = 1;
    static final String TABLE_NAME = "newtable";
    private static Context context;
    static SQLiteDatabase db;
    private SQLiteStatement insert; 
    private static final String INSERT = " into "   + TABLE_NAME + " (name) values (?)";
    public DataManipulator(Context context) {
        DataManipulator.context = context;
        OpenHelper openHelper = new OpenHelper(DataManipulator.context);
        DataManipulator.db = openHelper.getWritableDatabase();
        this.insert = DataManipulator.db.compileStatement(INSERT);
    }
    public long insert(String name) {
        ContentValues args = new ContentValues();
        args.put("name", name);
        return db.insert(TABLE_NAME, null, args);
    }
    public void deleteAll() {
        db.delete(TABLE_NAME, null, null);
    }
    public List<String[]> selectAll()
    {
        List<String[]> list = new ArrayList<String[]>();
        Cursor cursor = db.query(TABLE_NAME, new String[] { "name"},  null, null, null, null, null); 
        int x=0;
        if (cursor.moveToFirst()) {
            do {
                String[] b1=new String[]{cursor.getString(0)};
                list.add(b1);
                x=x+1;
            } while (cursor.moveToNext());
        }
        if (cursor != null && !cursor.isClosed()) {
            cursor.close();
        } 
        cursor.close();
        return list;
    }
    public void delete(int rowId) {
        db.delete(TABLE_NAME, null, null); 
    }
    private static class OpenHelper extends SQLiteOpenHelper {
        OpenHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }
        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL("CREATE TABLE " + TABLE_NAME + " (name TEXT)");
        }
        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
            onCreate(db);
        }
    }
} 
```

我调试时的logcat输出

```
05-23 12:05:04.021: E/SQLiteDatabase(883): close() was never explicitly called on database '/data/data/list.certificates/databases/mydatabase.db' 
05-23 12:05:04.021: E/SQLiteDatabase(883): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
05-23 12:05:04.021: E/SQLiteDatabase(883):  at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1943)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1007)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:986)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1051)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:770)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at list.certificates.DataManipulator.<init>(DataManipulator.java:25)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at list.certificates.SaveData.onClick(SaveData.java:57)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at android.view.View.performClick(View.java:3480)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at android.view.View$PerformClick.run(View.java:13983)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at android.os.Handler.handleCallback(Handler.java:605)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at android.os.Handler.dispatchMessage(Handler.java:92)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at android.os.Looper.loop(Looper.java:137)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at android.app.ActivityThread.main(ActivityThread.java:4340)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at java.lang.reflect.Method.invokeNative(Native Method)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at java.lang.reflect.Method.invoke(Method.java:511)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-23 12:05:04.021: E/SQLiteDatabase(883):  at dalvik.system.NativeStart.main(Native Method)
05-23 12:05:04.061: E/System(883): Uncaught exception thrown by finalizer
05-23 12:05:04.281: E/System(883): java.lang.IllegalStateException: Don't have database lock!
05-23 12:05:04.281: E/System(883):  at android.database.sqlite.SQLiteDatabase.verifyLockOwner(SQLiteDatabase.java:2090)
05-23 12:05:04.281: E/System(883):  at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2182)
05-23 12:05:04.281: E/System(883):  at android.database.sqlite.SQLiteDatabase$1.entryRemoved(SQLiteDatabase.java:2178)
05-23 12:05:04.281: E/System(883):  at android.util.LruCache.trimToSize(LruCache.java:197)
05-23 12:05:04.281: E/System(883):  at android.util.LruCache.evictAll(LruCache.java:285)
05-23 12:05:04.281: E/System(883):  at android.database.sqlite.SQLiteDatabase.deallocCachedSqlStatements(SQLiteDatabase.java:2143)
05-23 12:05:04.281: E/System(883):  at android.database.sqlite.SQLiteDatabase.closeClosable(SQLiteDatabase.java:1126)
05-23 12:05:04.281: E/System(883):  at android.database.sqlite.SQLiteDatabase.finalize(SQLiteDatabase.java:1914)
05-23 12:05:04.281: E/System(883):  at java.lang.Daemons$FinalizerDaemon.doFinalize(Daemons.java:182)
05-23 12:05:04.281: E/System(883):  at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
05-23 12:05:04.281: E/System(883):  at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:51:12.417

```
check this one it may use
public DataHelper(Context context,String pagetype) {
  this.context = context;
  OpenHelper openHelper = new OpenHelper(this.context);
  this.db = openHelper.getWritableDatabase();
  if(pagetype.equals("settings")) {
  this.insertStmt = this.db.compileStatement(INSERT); 
  } 
```

} 公共长插入（字符串源，字符串目标，int sourceatcocode，int destinationatcocode，字符串文件夹）{

```
 this.insertStmt.bindString(1, source);
   this.insertStmt.bindString(2, destination);
   this.insertStmt.bindLong(3, sourceatcocode);
   this.insertStmt.bindLong(4, destinationatcocode);
   this.insertStmt.bindString(5, folder);
  return this.insertStmt.executeInsert(); 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:02:25.043

```
 implement ur code in this code for retrieving
  public List<String> selectAll_trips() {
      List<String> list = new ArrayList<String>();

      Cursor cursor = this.db.query(TABLE_NAME, new String[] { "*" },
              null , null, null, null, "tripid desc");

      if (cursor.moveToFirst()) {
             do {
                 list.add(cursor.getString(0));
                 list.add(cursor.getString(1));
                 list.add(cursor.getString(2));
                 list.add(cursor.getString(3));
                 list.add(cursor.getString(4));
                 list.add(cursor.getString(5));

               } while (cursor.moveToNext());
          }
      if (cursor != null && !cursor.isClosed()) {
         cursor.close();
      }

      return list;
   } 
```

# c#-4.0 - sql语句末尾缺少分号

> ID：10714124
> 
> 赞同：-1
> 
> 时间：2012-05-23T05:45:37.967
> 
> 标签：c#-4.0, ms-access-2007

当我朗读我的代码时出现问题，然后出现错误“在 sql 语句末尾缺少分号”。

我的代码是：

*代码*

```
 protected void btnSubmit_Click(object sender, EventArgs e)
    {

        try
        {
            FileUpload img = (FileUpload)imgUpload;
            Byte[] imgByte = null;
            if (img.HasFile && img.PostedFile != null)
            {
                //To create a PostedFile
                HttpPostedFile File = imgUpload.PostedFile;
                //Create byte Array with file len
                imgByte = new Byte[File.ContentLength];
                //force the control to load data in array
                File.InputStream.Read(imgByte, 0, File.ContentLength);
            }

            string str = ("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:/Users/Geeta/Desktop/mssl2.accdb;Persist Security Info=False";);

            OleDbConnection conn = new OleDbConnection(str);

            conn.Open();
            string sql = "INSERT INTO digital(Product_Name, Product_Code, Product_Price, Product_Image, Product_Description) VALUES(@pnm, @pcod, @ppr, @pimg, @pdes) SELECT @@IDENTITY;";
            OleDbCommand cmd = new OleDbCommand(sql, conn);

            cmd.Parameters.AddWithValue("@pnm", txtEName.Text.Trim());
            cmd.Parameters.AddWithValue("@pcod", txt_productcode.Text.Trim());
            cmd.Parameters.AddWithValue("@ppr", txt_productprice.Text.Trim());
            cmd.Parameters.AddWithValue("@pdes", txt_productdescri.Text.Trim());
            cmd.Parameters.AddWithValue("@pimg", imgByte);
            int Id = Convert.ToInt32(cmd.ExecuteScalar());
            lblResult.Text = String.Format("Employee ID is {0}", Id);
            conn.Close();

        }

        catch
        {
            lblResult.Text = "There was an error";
        }
        finally
        {

        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:50:43.483

在选择@@identity 之前添加分号。然后尝试执行。这意味着插入语句一个分号和分号上的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:51:03.023

在“SELECT @@IDENTITY”之前，您需要一个分号。从技术上讲，您正在创建两个 SQL 语句。一个用于插入，一个用于 SELECT @@IDENTITY。这就是为什么您需要在这两个查询之间使用分号。

# php - Magento 促销规则

> ID：10714127
> 
> 赞同：0
> 
> 时间：2012-05-23T05:45:58.487
> 
> 标签：php, magento, promotions

我有多个商店在单个 magento 网站上运行。例如，布料、电子产品、珠宝等。

现在我想要促销规则，例如“仅从布店购买 500 美元或更多商品可获得 50 美元的折扣”

您能否让我知道条件和操作选项卡的条件是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T04:26:50.077

经过一番研究，我得到了答案:-)

条件选项卡：

如果购物车中符合所有这些条件的部分商品的总金额等于或大于 500：

```
 Category  is one of  5,6 (all category of your cloth store) 
```

操作选项卡：

```
 Category  is one of 5,6 (all category of your cloth store) 
```

希望这对其他人有帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T05:52:55.293

您可以在购物车规则的规则信息选项卡下选择网站和商店，

谢谢

# php - 垃圾邮件机器人会直接 POST 到服务器或填写 HTML 表单吗？

> ID：10714134
> 
> 赞同：6
> 
> 时间：2012-05-23T05:46:43.767
> 
> 标签：php, captcha, spam-prevention

我正在考虑在我正在开发的网站上使用验证码（或 Recaptcha）的替代方法来填写注册表单。

我相信验证码会对用户体验产生负面影响。我正在研究使用隐藏字段，但显然它们根本没有效果（参考：[http](http://radio.javaranch.com/davo/2008/10/15/1224063498569.html) ://radio.javaranch.com/davo/2008/10/15/1224063498569.html ）

对该文章的评论指出：

> 作为我工作的一部分（不，不是为了发送垃圾邮件）编写 CAPTCHA 破解器的人，我可以向您保证，隐藏字段绝不会绊倒我。正如另一张海报提到的，我检查了有线流量，并不太注意表单的 HTML 中发生了什么。

这让我相信垃圾邮件机器人会直接向服务器发出 POST 请求，而不是请求表单并填写它。

如果是这种情况，如果我创建一个隐藏的只读字段，并使用存储在 SESSION 中的哈希预填充该字段怎么办。当用户提交表单时，我可以比较这些值。这可以作为一种远离垃圾邮件的方式，还是我在监督什么？

如果表单从未被请求，我当然不会找到存储在会话中的任何散列，因此可以忽略该请求。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T05:56:19.370

添加另一个与服务器端会话变量相关的挑战字段是一个好方法；在垃圾邮件机器人方面，这将需要更多的努力，即他们必须加载和解析表单，填写并发出另一个请求（发送必要的 cookie）。

您还可以考虑添加 JavaScript 来修改给定的挑战并以某种方式对其进行修改。然后，攻击者需要找出你的代码做了什么，然后才能以自动方式复制它。转换可以是简单的`rot13`或更复杂的`xor`操作。, 之类的东西`md5`是`sha1`已建立的算法，因此它们是一个糟糕的选择；它必须是定制的。

当然，如果攻击者注定要以您的网站为目标，那么您就无法阻止垃圾邮件的进入。这是丑陋的事实。例如，它们可以运行[Selenium](http://seleniumhq.org/)并绕过您精心构建的所有 JavaScript 保护。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T06:25:01.300

不幸的是，我怀疑您已经有专门针对您网站的垃圾邮件发送者。如果您手动实现了登录和注册，那么垃圾邮件机器人不太可能具有能够在没有专门针对您的表单定制的情况下进行注册的逻辑。

其他解决方案都很好，虽然它们会有所帮助，但它们都无法阻止即使是适度确定的垃圾邮件发送者。许多垃圾邮件机器人作为浏览器插件运行，因此相信垃圾邮件机器人无法评估 JavaScript 或一开始就不会调用表单不太可能对您有很长时间的帮助。至少，一个用于注册的验证码（也许对于每个帖子，或者你的网站所做的任何事情，直到帐户被手动批准）可能是强制性的。

我知道您不想影响用户体验，**但垃圾邮件和帐户对用户体验的危害远大于验证码。**咬紧牙关，尽一切可能减慢垃圾邮件发送者的速度，否则您的用户将转向别处。

诚然，验证码不是完整的解决方案 - 存在可以比人类更准确地解决它们（在某些情况下）的软件。它们就像丰富的早餐麦片一样，只是完整早餐的一部分——没有人会以垃圾邮件开始新的一天。;)

管理新用户可能会非常有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:54:14.793

我会说这取决于机器人。如果有人以您的网站为目标，这可以很容易地绕过：

1.  带有表单并填写会话值的请求页面
2.  填写表格并提交。

我会说这几乎没有保护。

遗憾的是，我对机器人的当前状态以及它们的工作方式不太熟悉，所以这只是我对解决此实现的难易程度的意见。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T05:58:10.767

不同的垃圾邮件机器人使用不同的方式。

但最灵活的垃圾邮件机器人： 1\. 使用表单请求页面 2\. 读取其中包含的字段 3\. 发送 POST 请求，找到带有一些填充值的字段

你不能确定，所有的机器人都能找到并留下你的“form-session-token”输入。您不能确定所有机器人都可以使用 javascript（另一种保护方式 - 在提交时使用 js 添加必填字段）。但是机器人有很多不同。

# build - 使用 log4net 时无法通过 Nant 运行测试用例

> ID：10714139
> 
> 赞同：-1
> 
> 时间：2012-05-23T05:47:55.550
> 
> 标签：build, nant

我正在开发 dotnet 2008、Nunit 2.6、Nant0.91 应用程序。我正在使用 log4net 进行日志记录。

当尝试通过 Nunit 运行测试用例时，会生成一个日志文件，但是当我尝试通过 Nant 运行它时，我无法运行我的测试用例。

我正在粘贴我的构建文件中存在的完整信息：

```
<?xml version="1.0" encoding="utf-8"?>
<project name="w2" default="run" basedir=".">
    <!--Here we are building DLL -->
    <target name="build">
        <mkdir dir="Libraries" />
        <mkdir dir="Output"/>
        <csc target="library" output="Libraries/${project::get-
        name()}.dll">
            <sources>
                <include name="C:\\Users\\rm99699\\Documents\\Visual Studio
        2008\\Projects\\w2\\w2\\*.cs" />
                <include name="C:\\Users\\rm99699\\Documents\\Visual Studio 2008\
        \Projects\\w2\\w2\\app.config.xml"/>
            </sources>
            <references basedir="Libraries">
                <include name="${nant::scan-probing-
        paths('nunit.framework.dll')}" />
                <include name="${nant::scan-probing-paths('log4net.dll')}" />
                <include name="D:\selenium-
        dotnet-2.8.0\net35\WebDriver.dll" />
                <include name="D:\selenium-
        dotnet-2.8.0\net35\WebDriver.Support.dll" />
                <include name="D:\selenium-
        dotnet-2.8.0\net35\ThoughtWorks.Selenium.Core.dll" />
            </references>
        </csc>
    </target>

    <!--Here we are running testcases -->

    <target name="run" depends="build">
        <nunit2 failonerror="false" >
            <formatter type="Xml" usefile="true" extension=".xml"
                       outputdir="Output"/>
            <test assemblyname="C:\\Users\\rm99699\\Documents\\Visual Studio 2008\
        \Projects\\w2\\w2\\Libraries\\w2.dll"  appconfig="C:\\Users\\rm99699\
        \Documents\\Visual Studio 2008\\Projects\\w2\\w2\\app.config">
                <references basedir="Libraries">
                    <include name="${nant::scan-probing-
        paths('nunit.framework.dll')}" />
                    <include name="D:\selenium-dotnet-2.8.0\net35\WebDriver.dll" />
                    <include name="D:\selenium-
        dotnet-2.8.0\net35\WebDriver.Support.dll" />
                    <include name="D:\selenium-
        dotnet-2.8.0\net35\ThoughtWorks.Selenium.Core.dll" />
                    <include name ="D:\nant-0.91-bin\nant-0.91\bin\lib\common
        \2.0\log4net.dll" />
                    <!-- <include name="${nant::scan-probing-paths('log4net.dll')}" />-->
                </references>
            </test>
        </nunit2>
    </target>
</project> 
```

根据我的构建文件，是否有任何可见的错误阻止我运行我的测试用例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:49:58.657

什么是控制台输出？NAnt 在其核心中包含 log4net，我已经看到当代码使用与 NAnt 不同版本的 log4net 时会导致问题的情况。您可以尝试使用`<exec>`任务来运行单元测试——尤其是因为 NAnt 的`<nunit2>`任务使用了极其过时的 NUnit 2.2。

# android - Spinner 的提示未显示项目

> ID：10714142
> 
> 赞同：2
> 
> 时间：2012-05-23T05:48:11.540
> 
> 标签：android, eclipse, sqlite, emulation, spinner

我刚刚使用 Eclipse 创建了一个适用于 Android 的应用程序，并且一切正常，但是，当我单击 Spinner 时，提示似乎是空的，但值在那里，因为我可以选择它们，我该怎么做才能使它们可见？模拟器可以用，手机不行，谢谢！

空白方块是提示，值在那里！:S

```
 String sqlSelect = "SELECT id, name, password FROM password";
    Cursor c = db.rawQuery(sqlSelect, null);            

    Spinner sp1 = (Spinner)findViewById(R.id.spinner1);
    ArrayAdapter<String> ad = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item);
    ad.setDropDownViewResource(android.R.layout.simple_spinner_item);
    sp1.setAdapter(ad);        

    System.out.println("Total of records is:" + c.getCount());

    if(c.moveToFirst()){
        int i = 0;

        while(c.moveToNext()){
            ad.add(c.getString(c.getColumnIndex("name")));              
            i++;
        }
    } 
```

布局：

```
<Spinner
    android:id="@+id/spinner1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >
    <!-- Preview: listitem=@android:layout/simple_spinner_item -->
</Spinner> 
```

这是一张图片：

[http://img163.imageshack.us/img163/659/cap201205222344.jpg](http://img163.imageshack.us/img163/659/cap201205222344.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:20:57.320

在您发布的图像中，您的微调器显示一些行意味着它从数据库中获取值，但您必须更改微调器项目的背景颜色。

文本大小和背景大小都是白色的，因此您无法在微调器视图中查看文本，因此请尝试使用自定义适配器创建微调器或更改微调器项：

```
ad.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T06:29:01.097

根据我发现的一个示例，我最终使用了 ArrayAdapter 的子类：

```
 ArrayAdapter<String> ad = new ArrayAdapter<String>(this,        android.R.layout.simple_spinner_item){
        @Override
        public View getDropDownView(int position, View convertView, ViewGroup parent) {
            View view = super.getDropDownView(position, convertView, parent);

            TextView text = (TextView)view.findViewById(android.R.id.text1);
            text.setTextColor(Color.BLUE);

            return view;
        }           
    }; 
```

现在我可以看到这些项目，但我仍然想知道为什么我可以在模拟器上看到这些项目而不是手机本身......谢谢！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:12:25.790

您可以使用`notifyDataSetChanged()`which 会导致重绘微调器。

```
if(c.moveToFirst()){  
    int i = 0;  
    while(c.moveToNext()){  
        ad.add(c.getString(c.getColumnIndex("name")));                
        i++;  
}  
ad.notifyDataSetChanged(); 
```

# android - 如何编码高比特率视频

> ID：10714145
> 
> 赞同：1
> 
> 时间：2012-05-23T05:48:18.213
> 
> 标签：android, video-streaming, android-2.3-gingerbread

在姜饼上播放流式高比特率视频时遇到问题。首先，我想对该视频进行编码。我正在使用任何视频转换器。我的视频格式是 MP4，我想知道，我应该做什么设置来编码视频。

这是视频的规格

```
Format:-MP4V
FrameSize-320x240
Frames/sec:- 20fps. 
```

要在 Android 姜饼上播放此视频，我应该使用哪个编解码器，

```
xvid
mpeg4
x264 
```

以及我应该使用什么比特率，帧率。请帮忙。

# jsp - 使用struts mvc在没有usinf scriplet的jsp中显示动态值

> ID：10714150
> 
> 赞同：1
> 
> 时间：2012-05-23T05:48:46.193
> 
> 标签：jsp, jakarta-ee, jdbc, struts

我在我的 Web 应用程序中使用 mvc struts 框架。我正在使用 scrilets 在 jsp 页面中显示我的数据库中的动态值，`<% %>` 这样做是不好的做法，但我遵循了如何在没有 scriptlets 的情况下进行操作的链接，但不能理解太多..我正在使用 struts，我有动作和 bean 类这是我的jsp页面

```
<%@page import="java.sql.ResultSet"%>
<%@page import="com.pra.sql.SQLC"%>
<%@page import="java.util.ArrayList"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<table align="left" width="346" border="0">
    <tr><td align="center" colspan="2" style="font-size:20px;">Tests We Provide</td></tr>
    <tr>
        <th width="194" height="52" align="left" nowrap>Test Name</th>
        <th width="142" align="left" nowrap>Test Fee</th>
    </tr>
    <%
        String sql = "Select tname,tfee from addtest order by tname";
        ResultSet rs = SQLC.getData(sql, null);
        while (rs.next()) {
            String testname = rs.getString("tname");
            String testfee = rs.getString("tfee");
    %>
    <tr>
        <td width="194" height="30" nowrap><%=testname%></td>
        <td width="142" nowrap><%=testfee%></td>
    </tr>  
    <%
        }
    %>
</table> 
```

请告诉我如何通过在 formbean 中编写代码并从 bean 到 jsp 一个一个地检索每个值来显示测试名称和费用 .. 请告诉我如何在不使用 scriplets 的情况下做到这一点 .. 非常感谢您按步骤回答谢谢： )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:04:51.640

将您的数据库读取代码移动到动作控制器。它应该从 db 中读取您需要的值并将其放入请求或模型中。

比使用 jstl 输出您的值（在 jsp 中）：

```
<c:out value="${parameterFromRequest}"/> 
```

定义 bean：

```
public class MyBean {
    private final String tName;
    private final String tFee;

    public MyBean(String tName, String tFee) {
        this.tName = tName;
        this.tFee = tFee;
    }

    public String getTName() {
        return tName;
    }

    public String getTFee() {
        return tFee;
    }
} 
```

在动作控制器中创建集合：

```
String sql = "Select tname,tfee from addtest order by tname";
ResultSet rs = SQLC.getData(sql, null);
Collection<MyBean> myBeans = new ArrayList<MyBean>();
while (rs.next()) {
    String testname = rs.getString("tname");
    String testfee = rs.getString("tfee");
    myBeans.add(new MyBean(testname, testfee));
}

request.setAttribute("myBeans", myBeans); 
```

jsp中的访问：

```
<c:forEach var="myBean" items="${myBeans}">
    Name: <c:out value="${myBean.tName}"/>
    Fee: <c:out value="${myBean.tFee}"/>
</c:forEach> 
```

# iphone - 如何在我的警报视图上添加笑脸？

> ID：10714152
> 
> 赞同：0
> 
> 时间：2012-05-23T05:49:02.423
> 
> 标签：iphone

> **可能重复：**
> [UIAlertView 中的图像](https://stackoverflow.com/questions/2323557/image-in-uialertview)

我正在实施一个益智游戏。玩家获胜后，我会显示您获胜的警报。但是我想在我的警报视图上添加笑脸。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:52:33.817

用这个

```
UIAlertView *successAlert = [[UIAlertView alloc] initWithTitle:title message:message delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

    UIImageView *imageView = [[UIImageView alloc] initWithFrame:CGRectMake(220, 10, 40, 40)];

    NSString *path = [[NSString alloc] initWithString:[[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"smile.png"]];
    UIImage *bkgImg = [[UIImage alloc] initWithContentsOfFile:path];
    [imageView setImage:bkgImg];
    [bkgImg release];
    [path release];

    [successAlert addSubview:imageView];
    [imageView release];

    [successAlert show];
    [successAlert release]; 
```

[在这里](https://stackoverflow.com/questions/2323557/image-in-uialertview)复制表格

# javascript - HTML5 媒体时间范围对象

> ID：10714156
> 
> 赞同：1
> 
> 时间：2012-05-23T05:49:22.847
> 
> 标签：javascript, html, google-chrome, html5-audio

我刚刚开始使用音频元素缓冲属性。我只在 google chrome (canary build) 中测试过它。到目前为止，结构中的数据与默认音频界面显示的数据有所不同。

我为我实现它的两种方式制作了两个 jsfiddles

1.  第一个是我想象的工作方式[http://jsfiddle.net/VB7Z8/20/](http://jsfiddle.net/VB7Z8/20/)
2.  第二种它实际上似乎工作的方式[http://jsfiddle.net/VB7Z8/18/](http://jsfiddle.net/VB7Z8/18/)

要了解我的意思，请转到每个小提琴（确保您的缓存被清除，以便它有缓冲的东西）并寻找播放器的右侧，确保留出一个间隙让它缓冲。我认为现在如果你回到中间的洞，音频将不会播放，但实际上它已经被缓冲了，只有缓冲的对象没有被更新。

我已经对所有事件进行了测试，但仍然得到相同的结果。我做错了什么还是谷歌浏览器有问题？我意识到这仍处于标准的起草阶段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T22:37:06.787

这似乎在 chrome 开发中的某个时候发生了变化，现在它可以按照标准解释

# jsf-2 - 一个 p:poll 暂停另一个？

> ID：10714162
> 
> 赞同：2
> 
> 时间：2012-05-23T05:50:01.660
> 
> 标签：jsf-2, primefaces

我有一个带有两个 PrimeFaces p:poll 元素的 JSF2 页面。每 1 秒触发一次，确保拍卖尚未结束，然后更新时钟。另一个 p:poll 每 60 秒命中一次，进行一些计算，然后更新表格的几行。

两者都工作正常。

但是，当 60 秒到来时，它需要几秒钟才能完成所有需要做的事情，时钟就冻结了。

这是两个 p:poll 的：

```
<p:poll listener="#{auctionBean.checkEndGame()}" interval="60" update="placeEditUp lock statusTxt" /> 
```

和

```
<p:poll listener="#{biddingBean.calcRemainingTime()}" interval="1" update="remHr remMn remSc closingTime prodNameTxt adminMsg" /> 
```

任何想法如何防止时钟冻结？

# xml - XML 文档中有空格时，XML 元素的子元素为“\n”？

> ID：10714163
> 
> 赞同：0
> 
> 时间：2012-05-23T05:50:06.433
> 
> 标签：xml, vb.net, soap

我有以下 XML：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
  <SOAP-ENV:Header>
  </SOAP-ENV:Header>
  <SOAP-ENV:Body>
    <MessageRequest></MessageRequest>
</SOAP-ENV:Envelope> 
```

我正在访问这样的子元素的名称：

`childNode(SOAP-ENV:Body").ChildNodes(0).Name`，但如果元素之间有空格，则返回子`"\n "`节点名没有空间，它会返回`<SOAP-ENV:Body>``<MessageRequest>``"\n "``<MessageRequest>`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T15:20:05.767

您没有提及您使用的语言，而是根据[您的个人资料](https://stackoverflow.com/users/33690/xaisoft?tab=questions)、[属性](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.childnodes.aspx)[名称`ChildNodes`](http://msdn.microsoft.com/en-us/library/system.xml.xmlnode.childnodes.aspx)和使用圆括号而不是方括号进行索引，我认为是 VB.NET？

如果您使用的是[保留空白](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.preservewhitespace.aspx)的文档，则可能会发生这种情况。DOM 解析器在节点级别工作。XML 的每个组件都是一个节点。您可以有一个文本节点、一个 CDATA 节点、一个元素节点等。这些将被属性拾取，并且子节点`ChildNodes`的数量会有所不同。

**检查您正在使用的节点[的节点类型。](http://msdn.microsoft.com/en-us/library/system.xml.xmlnodetype)**

如果您有缩进元素，那么该缩进（空格、换行等）将成为第一个子元素。删除格式，第一个子元素应该是元素子元素。

# sql - Sql Server 查询中的案例条件冲突

> ID：10714171
> 
> 赞同：0
> 
> 时间：2012-05-23T05:50:29.683
> 
> 标签：sql, tsql, sql-server-2005

```
select  CASE when  (select distinct BR.BorrowerID from tblBorrow BR 
inner join tblWorker W on W.ContractorID=BR.BorrowerID 
inner join  tblBorrowWorker TWB on  TWB.WorkerID=W.WorkerID 
inner join tblBorrowWorkerAssign TBWA on TWB.BorrowWorkerAssignmentID=TBWA.BorrowWorkerAssignmentID where TWB.WorkerID=11276) then 'BR.BorrowerID'   else 'NotBorrowed' end as BorrowedStatus 
```

这里实际上在'Then'条件下我想显示BorrowerID，这里的子查询部分运行良好并返回ID，但是当我添加CASE语句时，它给出一个错误“在上下文中指定的非布尔类型的表达式条件是预期的，在'then'附近。“这个查询是我的存储过程的一部分。解决方案是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:19:29.133

CASE 子句需要一个布尔条件。您可以使用 Exists() 检查真实情况吗？尝试将 exists() 用于内部选择语句（以 开头`select distinct BR.BorrowerID from tblBorrow BR...`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:55:18.940

如果您的意思是显示`BR.BorrowerID`来自子查询而不是`'BR.BorrowerID'`字符串常量的值，您可以尝试以下操作（假设您已确保子查询返回不超过一行）：

```
SELECT
  ISNULL(
    (
      SELECT DISTINCT CAST(BR.BorrowerID AS varchar(15))
      FROM tblBorrow BR 
      INNER JOIN tblWorker W ON W.ContractorID = BR.BorrowerID 
      INNER JOIN tblBorrowWorker TWB ON TWB.WorkerID = W.WorkerID 
      INNER JOIN tblBorrowWorkerAssign TBWA ON TWB.BorrowWorkerAssignmentID = TBWA.BorrowWorkerAssignmentID
      WHERE TWB.WorkerID=11276
    ),
    'NotBorrowed'
  ) 
```

另一方面，如果这是您帖子中的完整查询（不是更大查询的一部分），则以下选项也可能是一种选择：

```
SELECT DISTINCT ISNULL(CAST(BR.BorrowerID AS varchar(15)), 'NotBorrowed')
FROM
    (SELECT 1) x (x)
    LEFT JOIN
        tblBorrow BR 
        INNER JOIN tblWorker W ON W.ContractorID = BR.BorrowerID 
        INNER JOIN tblBorrowWorker TWB ON TWB.WorkerID = W.WorkerID 
        INNER JOIN tblBorrowWorkerAssign TBWA ON TWB.BorrowWorkerAssignmentID = TBWA.BorrowWorkerAssignmentID
    ON TWB.WorkerID = 11276 
```

“`(SELECT 1) x (x)`表”只是为了确保结果集不为空，以防左连接的右侧不返回任何行。

# javascript - Date() 将某些日期字符串转换为本地时间

> ID：10714180
> 
> 赞同：3
> 
> 时间：2012-05-23T05:51:37.727
> 
> 标签：javascript

我试图通过用 Date() 对象包装两个日期字符串来比较它们是否相等。我住在西雅图，出于某种原因，第二个日期字符串被转换为 PST，然后在 GMT 中呈现，结果如下：

```
new Date("January 1, 2012")
>>> Sun Jan 01 2012 00:00:00 GMT-0800 (PST)
new Date("2012-01-01")
>>> Sat Dec 31 2011 16:00:00 GMT-0800 (PST) 
```

在 chrome 控制台中尝试上述操作，您应该会得到相同的结果。如何让 Date 将第二个语句评估为 GMT 而不是 PST？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T05:59:59.377

不要使用 Date 对象来解析日期字符串，它在 ECMAScript ed 3 中被指定为依赖于实现，并且在浏览器中不能一致地工作。[ES5](http://es5.github.com/#x15.9.1.15)中指定了一种 ISO8601 日期字符串格式，但这也不能始终如一地工作。手动解析字符串。

用于与 UTC ISO8601 字符串相互转换的几个函数：

```
if (!Date.prototype.toUTCISOString) {

    Date.prototype.toUTCISOString = function() {
      function addZ(n) {
        return (n<10? '0' : '') + n;
      }
      function addZ2(n) {
        return (n<10? '00' : n<100? '0' : '') + n;
      }
      return this.getUTCFullYear() + '-' +
             addZ(this.getUTCMonth() + 1) + '-' +
             addZ(this.getUTCDate()) + 'T' +
             addZ(this.getUTCHours()) + ':' +
             addZ(this.getUTCMinutes()) + ':' +
             addZ(this.getUTCSeconds()) + '.' +
             addZ2(this.getUTCMilliseconds()) + 'Z';
    }
}

if (!Date.parseUTCISOString) {
    Date.parseUTCISOString = function fromUTCISOString(s) {
        var b = s.split(/[-T:\.Z]/i);
        var n= new Date(Date.UTC(b[0],b[1]-1,b[2],b[3],b[4],b[5]));
        return n;
    }
}

var s = '2012-05-21T14:32:12Z'
var d = Date.parseUTCISOString(s);

alert('Original string: ' + s +
      '\nEquivalent local time: ' + d +
      '\nBack to UTC string: ' + d.toUTCISOString()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T06:06:37.333

[接受 robg](https://stackoverflow.com/users/257182/robg)的建议，您可能会查看[DateJS](http://www.datejs.com/)或[moment.js](http://momentjs.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:01:24.670

那是因为你的时区，你迟到了 8:00 小时`"2012-01-01"`，所以它的显示是这样的，对我来说，我明白了

```
new Date("January 1, 2012")
Sun Jan 01 2012 00:00:00 GMT+0530 (IST)
new Date("2012-01-01")
Sun Jan 01 2012 05:30:00 GMT+0530 (IST) 
```

# sql - 为什么即使我更改函数 COUNT() 中的参数，结果总是相同？

> ID：10714181
> 
> 赞同：2
> 
> 时间：2012-05-23T05:51:39.913
> 
> 标签：sql, ms-access

无论函数 COUNT() 括号内的参数是什么，以下三个代码片段的结果都是一样的，为什么？

```
SELECT Category.Category, Category.CategoryID, COUNT(Category) AS Popularity
FROM FavCategory INNER JOIN Category
ON FavCategory.CategoryID= Category.CategoryID
GROUP BY Category, Category.CategoryID
HAVING COUNT(FavCategory.MemberID)>=2;

SELECT Category.Category, Category.CategoryID, COUNT(FavCategory.CategoryID) AS Popularity
FROM FavCategory INNER JOIN Category
ON FavCategory.CategoryID= Category.CategoryID
GROUP BY Category, Category.CategoryID
HAVING COUNT(FavCategory.CategoryID)>=4;

SELECT Category.Category, Category.CategoryID, COUNT(FavCategory.MemberID) AS Popularity
FROM FavCategory INNER JOIN Category
ON FavCategory.CategoryID= Category.CategoryID
GROUP BY Category, Category.CategoryID
HAVING COUNT(FavCategory.MemberID)>=2;

SELECT Category.Category, Category.CategoryID, COUNT(FavCategory.MemberID+Category.CategoryID) AS Popularity
FROM FavCategory INNER JOIN Category
ON FavCategory.CategoryID= Category.CategoryID
GROUP BY Category, Category.CategoryID
HAVING COUNT(FavCategory.MemberID)>=2; 
```

这是 Category 和 FavCategory 表上的记录 ![在此处输入图像描述](../Images/6f542a5d34b8d3e9b38e4d72f573e0b4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:30:55.587

你在问为什么。它们都是相同的，`COUNT`取决于字段/表达式是否为 null 或 null。如果该值不为空，`COUNT`则计算它；如果为空，则忽略它

您的表上没有任何空值，因此所有三个查询都报告相同的值。尝试`COUNT('DRACULA')`, `COUNT(42)`,`COUNT(0)`甚至,**对于 CategoryID 3 和 2 对于 CategoryID 1**`COUNT(-1)` ，它们将计为 3 ，它们的工作方式与您的三个查询相同。

 **当然，`COUNT(*)`如果你正在使用，你也可以使用`INNER JOIN`，并且它是[可取](http://www.ienablemuch.com/2010/04/debunking-myth-that-countdracula-is.html)的。如果你正在使用`LEFT JOIN`，使用不正确`COUNT(*)`，你必须这样做：`COUNT(secondTable.foreignKeyColumnHere)`; 或者如果 Access 支持基于基数的计数（如在 Postgresql 中），只需执行以下操作：`COUNT(secondTable.*)`

有关计数和正确使用启蒙的入门知识（插头警报），请阅读我在[http://www.ienablemuch.com/2010/04/debunking-myth-that-c​​ountdracula -is.html 上关于计数的帖子](http://www.ienablemuch.com/2010/04/debunking-myth-that-countdracula-is.html)

* * *

@JDein

鉴于此数据：

```
create table Person
(
  PersonId int not null primary key, 
  Name varchar(100) not null, 
  Middlename varchar(100) null
);

insert into Person(PersonId,Name,MiddleName) values
(1,'John','Winston'),
(2,'Paul','James'),
(3,'George',NULL),
(4,'Ringo','Parkin'); 
```

所有这些都将返回 4：

```
select count(PersonID) from Person;

select count(Name) from Person;

select count(*) from Person;

select count(1) from Person;

select count(0) from Person;

select count(2) from Person;

select count(-1) from Person;

select count(42) from Person;

select count('Dracula') from Person; 
```

除以下内容外，这将返回 3：

```
select count(MiddleName) from Person; 
```

现场测试：[http ://www.sqlfiddle.com/#!3/c1b1e/8](http://www.sqlfiddle.com/#!3/c1b1e/8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:52:55.303

如果您希望在结果中更容易看到受欢迎程度，您可能应该添加一个`ORDER BY`子句来按 COUNT 列对结果进行排序：

```
SELECT
  Category.Category,
  Category.CategoryID,
  COUNT(FavCategory.MemberID) AS Popularity
FROM FavCategory INNER JOIN Category
ON FavCategory.CategoryID= Category.CategoryID
GROUP BY Category, Category.CategoryID
HAVING COUNT(FavCategory.MemberID)>=2
**ORDER BY Popularity DESC**; 
```

也许您还想包括不在最喜欢的类别中的类别。在这种情况下，您需要替换`INNER JOIN`并`LEFT JOIN`交换连接的两侧：

```
SELECT
  Category.Category,
  Category.CategoryID,
  COUNT(**FavCategory.MemberID**) AS Popularity
FROM **Category LEFT JOIN FavCategory**
ON FavCategory.CategoryID= Category.CategoryID
GROUP BY Category, Category.CategoryID
ORDER BY Popularity DESC; 
```

另请注意，在这种情况下，计算连接表 ( `FavCategory`) 列之一的值（`MemberID`在上面的示例中）是至关重要的。如果某些类别在 中没有匹配项`FavCategories`，`MemberID`则为 NULL，因此不计入 COUNT。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T05:55:18.743

我的*猜测*是，您实际上是在为该列寻找不同的值，在这种情况下使用：

```
COUNT(DISTINCT (FavCategory.CategoryID)) 
```

（ETC）。

来自[COUNT 的 SQL Server 文档](http://msdn.microsoft.com/en-us/library/ms175997.aspx)（您尚未指定要使用的数据库）：

> COUNT(ALL expression) 计算组中每一行的表达式并返回非空值的数量。

（我相信 ALL 是默认值，而不是 DISTINCT。）

鉴于您的表中没有任何值是空值，因此仅使用表达式就相当于`COUNT(*)`- 即它将返回组的行数。这就是为什么每个表达式都给出相同的结果。

如果您不追求明显的结果，请说明您想要达到的目标，我们或许可以提出替代方案。（好吧，其他人也许可以——我怀疑我不会，作为一个 SQL 初学者。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T06:09:43.117

您正在尝试获取 Category、Category.CategoryID 组合的行数。这意味着 DB 将创建这 2 个列的所有 unq 组合，然后打印每个 unq 组合的行数。如果您在 group 子句和 where 子句中具有相同的 cols，那么您的行数将不会改变。可以影响行数但没有数据可以查看它很难判断它是否有任何影响**

# iphone - 子类化使用 Storyboard 创建的 UITableViewContoller 子类

> ID：10714182
> 
> 赞同：1
> 
> 时间：2012-05-23T05:51:40.587
> 
> 标签：iphone, objective-c, ios5, uistoryboard, xcode-storyboard

在我的应用程序中，我认为创建 UITableViewContoller 的子类（称为 GenericTableViewContoller）是一个好主意，它有一些在 Storyboard 中创建的原型单元格，可在整个应用程序中重用。

现在，我想做的是创建一个 GenericTableViewContoller 的子类（比如 SpecialTableViewController），它具有在 Storyboard 中创建的一些其他原型单元格，这些单元格仅在 SpecialTableViewController 中使用。

因此，我的主情节提要中有两个场景，一个用于 GenericTableViewContoller，一个用于 SpecialTableViewController，每个场景都有自己的原型单元集。

我遇到的问题是，当我为 GenericTableViewContoller 场景中声明的单元格标识符调用 dequeueReusableCellWithIdentifier 时，SpecialTableViewController 获取 nil 原型单元格。在 SpecialTableViewController 场景中声明的单元格出列就好了。

这是预期的行为吗（我有一个奇怪的怀疑）？我是否必须在 SpecialTableViewController 中调用 registerNib:forCellReuseIdentifier: 才能真正让它们从另一个场景中注册？有什么简单的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T18:56:16.260

> 这是预期的行为吗（我有一个奇怪的怀疑）？

是的，这是预期的行为。这里的核心概念是情节提要是对象实例设计器，而不是类设计器。例如，您可以自由制作三个场景，每个场景都具有相同的视图控制器类，但都具有不同的视图布局。

没有一种简单的方法可以在不同的表视图实例之间共享原型表单元格布局，除非将它们放入自己的 XIB 中，并使用 -registerNib:forCellReuseIdentifier: 和手动 segues。

# java - 在 WAS7 上查找 EJB3 时出现 InvalidObjectException

> ID：10714183
> 
> 赞同：1
> 
> 时间：2012-05-23T05:51:43.037
> 
> 标签：java, ejb, websphere, ejb-3.0, websphere-7

我有一个部署在两个 EAR 中的 Java Web 应用程序——一个用于 UI 层（包含 a `WAR module`），一个用于业务层（包含一个`EJB module`）。两个层都部署到 WebSphere Application Server 7。这些层通过 EJB 3.0 无状态会话 bean 连接。通过 JNDI 查找 bean。

这两个应用程序目前在同一个 WAS 服务器上，但将来会部署到不同的服务器上。当我尝试查找 EJB 时，出现错误。

尝试调试查找错误时，我在 WAS 服务器上运行了 JNDI 命名空间转储：

```
./dumpNameSpace.bat -host localhost -port 10031 > namespace.log 
```

我的每个 EJB 都列出了以下错误：

```
(top)/nodes/U4752879Node01/servers/server1/ejb/au/gov/immi/emed/ejb/CrtEJB
                                               au.gov.immi.emed.ejb.CrtEJB
ERROR: Received the following naming exception: com.ibm.ws.naming.util.InvalidObjectException: The IOR associated with the binding "CrtEJB" relative to the context "U4752879Node01Cell/nodes/U4752879Node01/servers/server1/ejb/au/gov/immi/emed/ejb" could not be resolved.  If the binding is for an application object, make sure the application has started successfully. IOR: IOR:<removed> 
```

这是 EJB 远程接口：

```
@Remote
public interface CrtEJB extends EMedEJB, EMedCrtService
{
} 
```

以及 bean 实现：

```
@Stateless(name = "CrtEJB")
@Remote(value = CrtEJB.class)
public class CrtEJBBean extends AbstractEMedEJBBean implements CrtEJB
{

    ...
} 
```

以及 ibm-ejb-jar-bnd.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<ejb-jar-bnd xmlns="http://websphere.ibm.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://websphere.ibm.com/xml/ns/javaee http://websphere.ibm.com/xml/ns/javaee/ibm-ejb-jar-bnd_1_0.xsd">
    <session name="CrtEJB" simple-binding-name="ejb/au/gov/immi/emed/ejb/CrtEJB" />
        ...
</ejb-jar-bnd> 
```

是什么导致错误发生？`ibm-ejb-jar-bnd.xml`没有我不需要的文件，错误是一样的。这个错误是导致 UI 查找失败的原因，还是应该正常工作？（在这种情况下，我将发布 UI 错误）。

# php - 如何使用 Facebook API 覆盖“/me/photos”上的隐私设置

> ID：10714187
> 
> 赞同：0
> 
> 时间：2012-05-23T05:52:08.680
> 
> 标签：php, facebook, facebook-graph-api

我正在努力使用 Facebook PHP API。

我想在我的 Facebook 墙上上传一张照片。它运作良好。但是当我添加带有值和朋友的隐私字段时，它不起作用。我真的很想覆盖应用程序隐私设置。

我该如何解决？谢谢。

```
 $arguments = array('message' => 'post message', 
        'source' => '@' . realpath($tmp_file_pwd), 

        'privacy'=>array('value' => 'EVERYONE','friends' => 'EVERYONE'));

    $this->facebook->setFileUploadSupport(true);        
    try{
        $result = $this->facebook->api('/me/photos', 'post', $args);

        return $result;

    } catch(FacebookApiException $e) {
        // If the user is logged out, you can have a
        // user ID even though the access token is invalid.
        // In this case, we'll get an exception, so we'll
        // just ask the user to login again here.
        //$login_url = $facebook -> getLoginUrl();
        //echo 'Please <a href="' . $login_url . '">login.</a>';
        error_log($e -> getType());
        error_log($e -> getMessage());
    } 
```

# php - 将分隔字符串数组分解为两个数组

> ID：10714188
> 
> 赞同：1
> 
> 时间：2012-05-23T05:52:15.857
> 
> 标签：php, arrays, function, explode

我有以下数组：

```
Array
    (
        [0] => 10-7
        [1] => 11-3
        [2] => 11-7
        [3] => 12-3
        [4] => 12-7
        [5] => 13-3
        [6] => 13-7
        [7] => 14-3
        [8] => 14-7
        [9] => 15-7
    ) 
```

我需要使用分隔符分成两个数组`"-"`：

```
Array
    (
        [0] => 10
        [1] => 11
        [2] => 11
        [3] => 12
        [4] => 12
        [5] => 13
        [6] => 13
        [7] => 14
        [8] => 14
        [9] => 15
    ) 
```

和

```
Array
    (
        [0] => 7
        [1] => 3
        [2] => 7
        [3] => 3
        [4] => 7
        [5] => 3
        [6] => 7
        [7] => 3
        [8] => 7
        [9] => 7
    ) 
```

有什么像`array_explode`我想要的那样吗？还是php`array`函数的组合？如果可能的话，我想在不通过我自己的`for`/`each`循环的情况下执行此操作，或者至少在某些（伪）内置的东西已经存在时，尽量减少重新发明轮子的必要性。我已经用 for 循环做到了。但我无法摆脱这样一种感觉，即有一种更优雅的方式可以巧妙地使用数组函数或类似的任何东西。非常感谢，伙计们。

*附加信息：*

不确定它是否重要，但我实际上是在生成的两个数组中的唯一值之后：

```
Array
    (
        [0] => 10
        [1] => 11
        [2] => 12
        [3] => 13
        [4] => 14
        [5] => 15
    ) 
```

和

```
Array
    (
        [0] => 7
        [1] => 3
    ) 
```

唯一值不需要排序，键可以保留也可以不保留，第一个数组的合法值范围是`0`to `23`，而第二个数组的合法值是`1`to `7`。但是，可能有除这些之外的值（`0`to`23`和`1`to`7`甚至未定界的杂散字符串或其他我无法控制的数据类型），我肯定会想丢弃这些值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T06:13:50.993

您正在寻找的灵丹妙药是[`array_reduce()`](http://us.php.net/array_reduce)，例如（PHP 5.3+）：

```
list( $left, $right ) = array_reduce( $input,
  function( $memo, $item ) {
    list( $l, $r ) = explode( '-', $item );
    $memo[0][$l] = $memo[1][$r] = true;
    return $memo;
  },
  array( array(), array() )
);

var_dump( array_keys( $left ), array_keys( $right ) ); 
```

您可以[在这里看到它的实际效果](http://codepad.viper-7.com/d2seGb)。

使用 PHP <5.3，您必须提前声明函数：

```
function my_reducer( $memo, $item ) {
  list( $l, $r ) = // ...
  // ... as above ...
}

list( $left, $right ) = array_reduce(
  $input, 'my_reducer',
  array( array(), array() )
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T06:08:51.403

[http://codepad.org/TpVUIhM7](http://codepad.org/TpVUIhM7)

```
<?php
    $array = array('7-10','7-11','5-10');
    foreach($array as $a){list($x[], $y[]) = explode("-", $a);}
    print_r(array_unique($x));
    print_r(array_unique($y));
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:05:56.770

这是您的解决方案，尝试实现以下代码。

应该为你工作。

```
$main_array =   array( 
        '0' => '10-7',
        '1' => '11-3',
        '2' => '11-7',
        '3' => '12-3',
        '4' => '12-7',
        '5' => '13-3',
        '6' => '13-7',
        '7' => '14-3',
        '8' => '14-7',
        '9' => '15-7',
        );

foreach($main_array as $key=>$value)
{
    $arr_value      =   explode('-',$value);
    $arr_temp1[]    =   $arr_value[0];
    $arr_temp2[]    =   $arr_value[1];  
}
$arr_temp1_unique   = array_unique($arr_temp1);
$arr_temp2_unique   = array_unique($arr_temp2);

print "<pre>";
print_r($main_array);
print_r($arr_temp1);
print_r($arr_temp2);

print_r($arr_temp1_unique);
print_r($arr_temp2_unique);
print "</pre>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T06:06:32.090

据我所知，在这种情况下没有合适的 PHP 函数可以使用。

函数喜欢`array_walk()`和`array_map()`导致单个数组，而不是多个数组。

您说您已经尝试过使用循环的解决方案，但是为了提供帮助，我将如何解决此问题：

```
//$data contains the array you want to split
$firstItems = array();
$secondItems = array();

foreach($data as $item)
{
    list($first, $second) = explode('-', $item, 2);
    $firstItems[$first] = true;
    $secondItems[$second] = true;    
}

//Now you can get the items with array_keys($firstItems) and array_keys($secondItems); 
```

我`set`通过设置键而不是值来将 PHP 数组视为一个。这使得您不必使用`array_unique()`来获得独特的物品。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T06:17:17.310

尝试：

```
foreach($old_array as $array){
    $new_2d_array = explode('-', $array);
    $new_array_1[] = $new_2d_array[0];
    $new_array_2[] = $new_2d_array[1];  
}
$new_array_1 = array_unique($new_array_1);
$new_array_2 = array_unique($new_array_2); 
```

# c# - 为什么我们使用 HttpContext.Current？

> ID：10714189
> 
> 赞同：11
> 
> 时间：2012-05-23T05:52:16.420
> 
> 标签：c#, asp.net

我不知道，我们为什么要使用`HttpContext.Current`?
在这个属性中，我使用它，`Session`但我不知道为什么！

```
public static string Name
{
    get
    {
         if (HttpContext.Current.Session["_n_"] != null)
            return HttpContext.Current.Session["_n_"].ToString();
         else return "";
    }
    set
    {
         HttpContext.Current.Session["_n_"] = value;
    }
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-23T05:59:26.987

`HttpContext`是将所有http相关信息包装到一个地方的对象。`HttpContext.Current`是在活动请求期间创建的上下文。这是您可以从中获取的一些数据的列表。

1.  请求类型（发布、获取）
2.  请求参数（查询字符串、发布的数据）
3.  用户的 IP 地址
4.  饼干

此外，您可以通过此对象控制您的输出。在`Items`属性中，这是一个字典，您可以存储对象的实例以确保它们为请求创建一次。您可以控制应用自定义过滤器的输出流。

这是您可以使用此属性执行的操作的简短列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T05:54:37.623

这是一种访问当前 HttpContext 的方法，该位置可能没有对上下文的引用，但在活动的 Web 请求中。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-23T06:00:01.137

这就像说“为什么我需要去银行取钱？”，答案是“因为那里就是钱。

回答你的问题。因为那是 Session 所在的地方。真的就是这么简单。你不必知道为什么，就是这样。

有一个更长的解释，其他人正在给出所有技术细节。但最终，答案归结为这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-17T18:40:29.527

在 Web 表单中的 asp.net MVC 之前，有类请求、响应，您可以在其中获取 cookie 和会话，而 MVC 中的那些人员所有 HTTP 信息（如请求和响应）及其属性现在都在 HTTpcontext 中。

# java - 在不使用 sql 或 nosql 服务器的情况下将数据提供程序集成到应用程序

> ID：10714190
> 
> 赞同：1
> 
> 时间：2012-05-23T05:52:17.227
> 
> 标签：java, sql, database, deployment, setup-deployment

我正在创建一个不需要存储太多数据的简单 CMS 软件。我目前使用 mysql 作为我的数据提供者，并且在表示层中有一个 java 应用程序。该 CMS 将是独立的，这意味着数据收集和处理将在一台计算机上完成。

我创建了一个安装程序来安装在我的客户计算机中。但是我还需要设置mysql然后数据库。而且我的客户没有足够的 IT 知识来自行设置数据库。因此，对于每个客户，我都必须参加并安装 mysql 服务器。

我需要的是一种在不使用 mysql 或任何其他 sql 或 nosql 服务器的情况下将数据提供程序集成到应用程序的方法。因此，我的客户可以使用安装向导中的简单引导步骤自行安装。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:00:43.813

您可以使用嵌入式数据库之一，例如 JavaDB（例如 Derby）。此数据库的支持已添加到 JRE。因此，您的所有客户都需要安装 JRE。而且您无需任何安装和其他设置即可获得完整的关系数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T05:59:12.100

您可以尝试使用[hsqldb](http://hsqldb.org/)或[sqlite db](http://www.sqlite.org/)。这些数据库可以与内存中的应用程序捆绑在一起，也可以使用一个简单的文件作为数据库。希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T15:14:44.497

我在这里找到了一个很好的例子 [http://java.sun.com/developer/technicalArticles/J2SE/Desktop/javadb/](http://java.sun.com/developer/technicalArticles/J2SE/Desktop/javadb/)

谢谢大家的帮助

# ruby - 将图像添加到 Axlsx 生成的 Excel 文件中。？

> ID：10714193
> 
> 赞同：1
> 
> 时间：2012-05-23T05:53:03.957
> 
> 标签：ruby, image, excel, xlsx, axlsx

我正在使用**Axlsx**生成 Excel 文件。

我需要将图像添加到 Excel 文件。我用过这段代码：

```
ws.add_image(:image_src => '../something',:noSelect => true, :noMove => true) do |image|
  image.width=1000
  image.height=200
  image.start_at 0,0
end 
```

其中' **ws** '是工作表。

它添加了所需的图像，但我无法使用此代码设置图像的“**宽度**”和“**高度**”。即使我给出`width=2000`and `height=1000`，它也不会影响 Excel 文件中的图像。

谁能告诉我，我做错了什么。？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T13:51:18.637

这对我来说也是正确的，并且与 gem 中的示例一致。

```
wb.add_worksheet(:name => "Image with Hyperlink") do |sheet|
  img = File.expand_path('../image1.jpeg', __FILE__)
  # specifying the :hyperlink option will add a hyper link to your image.
  # @note - Numbers does not support this part of the specification.
  sheet.add_image(:image_src => img, :noSelect => true, :noMove => true, :hyperlink=>"http://axlsx.blogspot.com") do |image|
    image.width = 7
    image.height = 6
    image.hyperlink.tooltip = "Labeled Link"
    image.start_at 2, 2
  end
end 
```

您正在使用的版本中可能引入了错误。

正如我们在#axlsx 上讨论的那样，让我们​​在 github 上对 master 进行尝试，如果它确实证明是您使用的版本中的错误，我将推出一个新版本。

最好的，

随机的

# java - 访问小程序的 javascript 是否支持重载？

> ID：10714196
> 
> 赞同：0
> 
> 时间：2012-05-23T05:53:22.633
> 
> 标签：java, javascript, applet

当我有 javascript 访问小程序时，我可以在小程序中使用重载方法吗？
javascript会表现良好吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:14:04.490

理论上它应该可以工作。但是有些版本的浏览器有一些问题，在旧版本的 Netscape Navigator 中也是如此。另外，如果您使用旧版本的浏览器，它可能无法正常工作。

[http://www.en8848.com.cn/reilly%20books/books/web/jscript/appb_01.htm](http://www.en8848.com.cn/reilly%20books/books/web/jscript/appb_01.htm)

[https://forums.oracle.com/forums/thread.jspa?threadID=1311520](https://forums.oracle.com/forums/thread.jspa?threadID=1311520)

希望这会帮助你。

# selenium - 如何使用 Selenium 在 Internet Explorer 中自动上传文件？

> ID：10714198
> 
> 赞同：1
> 
> 时间：2012-05-23T05:53:37.827
> 
> 标签：selenium

> **可能重复：**
> [如何使用 Selenium 的 java 接口从站点上传文件](https://stackoverflow.com/questions/10522372/how-to-upload-a-file-from-a-site-using-seleniums-java-inteface)

我是 Selenium 的新手。你能告诉我如何使用 Selenium 在 Internet Explorer 中自动上传文件吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T08:46:16.200

这并不容易，而且有很好的理由——安全也不容易。如果您能够上传这样的内容，是什么阻止了有人使用相同的方法上传您的详细信息？

您也没有给我们提供任何可以使用的示例：

鉴于此示例网页：

```
<html>
<head>
<style type="text/css">
.fileSave { color: red; }
</style>
</head>
<label for="fileUpload">File location:
<input type="file" id="fileUpload" />
<br>
<br>
<a href="" class="fileSave">Save file</a>
</body>
</html> 
```

我可以在 C# 中做到这一点：

```
Driver = new ChromeDriver();
var fileUploadControl = Driver.FindElement(By.Id("fileUpload"));
fileUploadControl.SendKeys("C:\File.txt");
var submitLink = Driver.FindElement(By.ClassName("fileSave"));
submitLink.Click(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T09:36:11.120

这已被多次询问[，](https://www.google.com/search?q=webdriver%20upload%20file)并且也在一些 Selenium 常见问题解答中。

Selenium 2 (WebDriver) Java 示例：

```
// assuming driver is a healthy WebDriver instance
WebElement fileInput = driver.findElement(By.xpath("//input[@type='file']"));
fileInput.sendKeys("C:/path/to/file.jpg"); 
```

对于 Selenium RC，请参阅[此问题](https://stackoverflow.com/questions/3387257/selenium-rc-upload-file)。

这个想法是将文件的绝对路径直接发送到您通常单击以获取模式窗口的元素 - 即`<input type='file' />`element.

# mysql - 如何在 MySQL 中同时更新和选择

> ID：10714204
> 
> 赞同：8
> 
> 时间：2012-05-23T05:54:05.487
> 
> 标签：mysql, select

与这个问题[How UPDATE and SELECT 同时](https://stackoverflow.com/questions/2934369/how-update-and-select-at-the-same-time) 和这段代码有关系：

```
UPDATE table SET foo=1 WHERE boo=2

SELECT * from table WHERE foo=1 AND boo=2 
```

如何使用 MySQL 同时更新和选择？

似乎提出现有问题的人使用的是 PostgreSQL。我怎样才能在 MySQL 中做到这一点？MySQL中似乎没有`returning`命令。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-07-30T07:26:18.447

不幸的是，MySQL 不支持 RETURNING，因此您需要编写单独的语句。

作为替代方案，您可以依赖存储过程。

一般来说，MySQL 是否有等效的返回子句的问题在这里得到了解决：[Mysql 返回子句等效](https://stackoverflow.com/questions/9583353/mysql-returning-clause-equivalent)

# c++ - C++ 快速排序枢轴优化

> ID：10714207
> 
> 赞同：0
> 
> 时间：2012-05-23T05:54:24.627
> 
> 标签：c++, algorithm, quicksort

目前，我有一个快速排序算法的准系统实现来对一些随机生成的数字进行排序。排序是有效的，比归并排序更有效。但是，对于特定的数字集（例如需要反向排序的反转数字），我需要优化枢轴。

```
int* partition (int* first, int* last);
void quickSort(int* first, int* last) {
    if (last - first <= 1) return;

    int* pivot = partition(first, last);
    quickSort(first, pivot);
    quickSort(pivot + 1, last);
}

int* partition (int* first, int* last) {
    int pivot = *(last - 1);
    int* i = first;
    int* j = last - 1;

    for (;;) {
        while (*i < pivot && i < last) i++;
        while (*j >= pivot && j > first) j--;
        if (i >= j) break;
        swap (*i, *j);
    }

    swap (*(last - 1), *i);

    return i;
} 
```

因此，对于这段代码，我要么使用随机数作为分区步骤的基准，要么使用第一个、中间和最后一个元素的中值作为基准。

我该怎么做？

我是排序算法的新手，我对它们的理解还不完整。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:03:32.073

只需更改以下几行：

```
 int pivot = *(last - 1);
    …
    swap ((last - 1), i); 
```

类似于：

```
 int* pos = (first + rand(last - first));
    int pivot = *pos;
    …
    swap (pos, i); 
```

或者

```
 int* pos = mean_of_three((last - 1), (first), ((first + last) / 2));
    int pivot = *pos;
    …
    swap (pos, i); 
```

其中`mean_of_three`取 3 个指针并返回一个指向平均值的指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T06:03:47.550

正如您已经提到的，选择数组的第一个或最后一个元素作为枢轴不是最佳做法，并且会导致算法陷入 O(n^2)。枢轴选择算法的最佳选择取决于您的程序可能遇到的数据。如果数据有可能被排序或接近排序，那么随机枢轴是一个非常好的选择（并且非常容易实现）以避免 O(n^2) 行为。另一方面，选择中间元素而不是第一个元素的开销是最小的，并且提供了非常有效的针对排序数据的保护。

再说一次，如果您确信您的数据不会被排序或接近排序，那么中位数的三个分区策略似乎是最好的。

```
int PickPivotUsingMedian(int a[], int first, int last)
{
int mid = (first+ right)/2;
if (a[mid ] < a[first]) 
    swap(&a[first],&a[mid ]);
if (a[last] < a[first])
    swap(&a[first],&a[last]);
if (a[last]< a[mid ])
    swap(&a[mid ],&a[last]);

swap(&a[mid], &a[last - 1]);//since the largest is already in the right.
return a[last - 1];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T05:58:59.177

在数组范围内选择一个随机索引并将该元素用作枢轴。

# c - C 语言中的 Google 自定义搜索结果

> ID：10714217
> 
> 赞同：-1
> 
> 时间：2012-05-23T05:55:25.283
> 
> 标签：c, google-search-api

我正在尝试编写一个简单的客户端`C`，它将与 Google Search API 交互并返回搜索结果。我可以发送一个搜索请求并得到一个带有 200 OK 代码和一些标题文本的响应，但是没有搜索结果。难道我做错了什么？

这是我的代码：

```
#include sys/socket.h
#include sys/types.h
#include netinet/in.h
#include netdb.h
#include stdio.h
#include string.h
#include stdlib.h
#include unistd.h
#include errno.h
#include openssl/rand.h
#include openssl/ssl.h
#include openssl/err.h

// Simple structure to keep track of the handle, and
// of what needs to be freed later.
typedef struct {
    int socket;
    SSL *sslHandle;
    SSL_CTX *sslContext;
} connection;

// For this example, we'll be testing on openssl.org
#define KEY     "/customsearch/v1?key=AIzaSyAOdB5MgAEmvzglw05rR1OPYEYgFuZrT9o&cx=003397780648636422832:u25rx3s92ro&q="
#define SERVER  "www.googleapis.com"
#define PORT 443

// Establish a regular tcp connection
int tcpConnect ()
{
  int error, handle;
  struct hostent *host;
  struct sockaddr_in server;

  host = gethostbyname (SERVER);
  handle = socket (AF_INET, SOCK_STREAM, 0);
  if (handle == -1)
    {
      perror ("Socket");
      handle = 0;
    }
  else
    {
      server.sin_family = AF_INET;
      server.sin_port = htons (PORT);
      server.sin_addr = *((struct in_addr *) host->h_addr);
      bzero (&(server.sin_zero), 8);

      error = connect (handle, (struct sockaddr *) &server,
                       sizeof (struct sockaddr));
      if (error == -1)
        {
          perror ("Connect");
          handle = 0;
        }
    }

  return handle;
}

// Establish a connection using an SSL layer
connection *sslConnect (void)
{
  connection *c;

  c = malloc (sizeof (connection));
  c->sslHandle = NULL;
  c->sslContext = NULL;

  c->socket = tcpConnect ();
  if (c->socket)
    {
      // Register the error strings for libcrypto & libssl
      SSL_load_error_strings ();
      // Register the available ciphers and digests
      SSL_library_init ();

      // New context saying we are a client, and using SSL 2 or 3
      c->sslContext = SSL_CTX_new (SSLv23_client_method ());
      if (c->sslContext == NULL)
        ERR_print_errors_fp (stderr);

      // Create an SSL struct for the connection
      c->sslHandle = SSL_new (c->sslContext);
      if (c->sslHandle == NULL)
        ERR_print_errors_fp (stderr);

      // Connect the SSL struct to our connection
      if (!SSL_set_fd (c->sslHandle, c->socket))
        ERR_print_errors_fp (stderr);

      // Initiate SSL handshake
      if (SSL_connect (c->sslHandle) != 1)
        ERR_print_errors_fp (stderr);
    }
  else
    {
      perror ("Connect failed");
    }

  return c;
}

// Disconnect & free connection struct
void sslDisconnect (connection *c)
{
  if (c->socket)
    close (c->socket);
  if (c->sslHandle)
    {
      SSL_shutdown (c->sslHandle);
      SSL_free (c->sslHandle);
    }
  if (c->sslContext)
    SSL_CTX_free (c->sslContext);

  free (c);
}

// Read all available text from the connection
char *sslRead (connection *c)
{
  const int readSize = 2048;
  char *rc = NULL;
  int received, count = 0;
  char buffer[2048];

  if (c)
    {
      while (1)
        {
          if (!rc)
            rc = malloc (readSize * sizeof (char) + 1);
          else
            rc = realloc (rc, (count + 1) *
                          readSize * sizeof (char) + 1);

          received = SSL_read (c->sslHandle, buffer, readSize);
          buffer[received] = '\0';

          if (received > 0)
            strcat (rc, buffer);

          if (received < readSize)
            break;
          count++;
        }
    }

  return rc;
}

// Write text to the connection
void sslWrite (connection *c, char *text)
{
  if (c)
    SSL_write (c->sslHandle, text, strlen (text)
}

// Very basic main: we send GET / and print the response.
int main (int argc, char **argv)
{
  connection *c;
  char *response;
  char request[512]="";

  c = sslConnect ();

  sprintf(request, "GET https://%s%s%s\r\n\r\n", SERVER, KEY, argv[1]);
  printf("%s", request);

  sslWrite (c, request);

  response = sslRead (c);

  printf ("%s\n", response);

  sslDisconnect (c);
  free (response);

  return 0;
} 
```

这是我的结果（运行“app_name 炉”）：

> ¸h ÆÁ*HTTP/1.0 200 OK
> 
> 过期：2012 年 5 月 23 日星期三 05:49:58 GMT
> 
> 日期：格林威治标准时间 2012 年 5 月 23 日星期三 05:49:58
> 
> 缓存控制：私有，max-age=0，必须重新验证，无转换
> 
> ETag：“ewDGMApuuzSJ2mUepyXm8PLTiIU/uPd2cbC0DjaL0y0Y6HiAvzSqSts”
> 
> 内容类型：应用程序/json；字符集=UTF-8
> 
> X-Content-Type-Options: nosniff
> 
> X 框架选项：SAMEORIGIN
> 
> X-XSS-防护：1；模式=块
> 
> 服务器：GSE

* * *

肯定有比没有更多关于炉子的信息，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T17:14:47.850

上面代码中的两个问题是 #1)在使用之后和之前`rc`没有将 start of 初始化为零-- 这会导致垃圾字符，以及 #2) 行应该是，因为服务器可能会发送标头和内容作为单独的块。 `malloc``strcat``if (received < readSize)``if (received == 0)`

# android - 如何像 iPhone isBackground 标志一样暂停 android 的主页按钮上的活动

> ID：10714225
> 
> 赞同：0
> 
> 时间：2012-05-23T05:56:07.763
> 
> 标签：android

我正在开发一款游戏，我遇到了需要保存应用程序状态的问题。

我寻找 onSaveInstanceState() 和 onRestoreState() 但节省了大量计算，这对我来说是不可能的。

所以任何人都可以告诉我保存游戏状态的解决方案，就像整个活动可以在主页按钮单击时保存，当我恢复它时，它会从暂停的地方打开。

在**iPhone**中，您可以**保存整个屏幕或将其置于后台**并从暂停的位置恢复它，由系统或操作系统管理。

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:08:54.303

我认为 sharedpreferences 会对你有用......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:01:58.940

我很确定，只要您的活动暂停，它就有机会进行垃圾收集。我认为您需要查看如何保存/存储/加载状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:05:08.753

为什么不尝试将计算保存在文件或共享首选项中，然后从那里重新加载

# css - CSS元素组运算符？

> ID：10714227
> 
> 赞同：0
> 
> 时间：2012-05-23T05:56:12.207
> 
> 标签：css, css-selectors

我试图找出 CSS 中是否存在元素分组。假设我有以下代码：

```
.user-form .group-area .test, .user-form .group-area .test2{} 
```

有没有办法将 .test 和 .test2 分组并执行以下操作：

```
.user-form .group-area (.test .test2){} 
```

这意味着相同的样式将适用于 .test 和 .test2 元素，而无需第二次重复 .user-form .group-area 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:00:34.433

你可以使用这个--> [http://lesscss.org/#synopsis](http://lesscss.org/#synopsis)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:45:39.963

在[支持 3 级选择器的](http://www.quirksmode.org/css/contents.html#t31)浏览器中，您可以使用[子字符串匹配属性选择器](http://www.w3.org/TR/selectors/#attribute-substrings)

```
.user-form .group-area *[class^="test"] 
```

小提琴：http: [//jsfiddle.net/yh9Fw/1/](http://jsfiddle.net/yh9Fw/1/)

# vb.net - 按下选项卡上的 Visual Basic 背景图像闪烁

> ID：10714228
> 
> 赞同：0
> 
> 时间：2012-05-23T05:56:13.310
> 
> 标签：vb.net, winforms, vb.net-2010

我正在使用 VB.NET 2010 制作应用程序，并且我设置了一个背景图像，每次打开任何新表单或点击标签以从文本框跳转到文本框时都会闪烁

通过按（选项卡），它只会闪烁一次，但在我关闭表单并再次打开时总是闪烁。我什么都试过了；背景图像设置为, `STRETCHED`, `CENTRE`，`ZOOM`但仍然是相同的。

唯一的问题是当我删除我的背景一切都很好，你能帮帮我吗？这可能是什么原因？

附上截图请看

![在此处输入图像描述](../Images/cecbb686abebff9f8a1da86d030d9865.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T12:23:40.437

您可以尝试将表单的 DoubleBuffered 属性设置为 True。但是，通过查看您的屏幕截图，您似乎最好只使用 PictureBox 控件来包含图像。

# perl - 如何仅在您指定的某些任意字段上进行正则表达式替换

> ID：10714232
> 
> 赞同：2
> 
> 时间：2012-05-23T05:56:29.507
> 
> 标签：perl, unix, command-line, sed, awk

我喜欢 awk 的地方在于，您可以从满足您指定的某些字段的条件的文件中获取所有行。例如，

```
awk '$3~/hi/' < test.txt # print all lines where the third field matches the pattern "hi" 
```

或者

```
awk '$2>=2' < test.txt  # print all lines where the second field is greater or equal to 2 
```

作为一个正在学习 unix 强大功能的初学者，我对此非常着迷。现在我想知道是否有一种简单的方法可以仅在您指定的某些任意字段上执行正则表达式替换？例如，我只想对第三个字段进行正则表达式替换。我目前的方法是“剪切”我想要的字段并使用 perl 或 sed 对其执行替换，然后我将其“粘贴”到原始文件中。但我想知道是否有更有效的方法来实现这一目标。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T06:07:04.290

由于您使用“perl”（除了“sed”、“awk”、“unix”和“命令行”）标记了这个问题，我假设您对包含上述任何工具的答案感兴趣.

Perl 有一个自动拆分命令行开关 ( `-a`)：

```
perl -lane 'print if $F[2] =~ /some pattern/' filename 
```

...或者...

```
perl -lane 'print if $F[1] >= 42' filename 
```

`-a`导致自动拆分为`@F`数组。 `-n`导致 Perl 遍历您提供给它的文件的行。剩下的就是编程了。;)

现在进行替换：

```
perl -i.bak -lane '$F[2] =~ s/match/subst/; print join q/ /, @F' filename 
```

或者，使用`-p`开关稍微短一点，它告诉 Perl 打印出现在`$_`. 这意味着如果您更改`@F`，则必须将其复制回`$_`：

```
perl -i.bak -pale '$F[2] =~ s/match/subst/ && $_="@F"' filename 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T06:37:36.123

这可能对您有用：

```
echo -e 'Fred barney Wilma\nfoo bar baz' |
awk '$2 == "barney"{sub(/b/,"B",$2)};1'
Fred Barney Wilma
foo bar baz 
```

您可以使用`sub`,`gsub`命令或这种情况：

```
echo -e 'Fred barney Wilma\nfoo bar baz'|
awk '$2 == "barney"{$2="Barney"};1'
Fred Barney Wilma
foo bar baz 
```

只需完全替换第二个字段。

注意`1`行尾的 是 的简写`{print}`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T07:08:14.417

考虑一个简单的例子：

`awk -F "," '{ OFS=","; sub ("1", "x", $3); print $0 }' file.txt > newfile.txt`

`newfile.txt`现在将包含：

```
1,2,3,4,5,6,7
8,9,x0,11,12,13,14
15,16,x7,18,19,20,21 
```

在这里，`1`被替换`x`为第三列中的`$3`。
`-F ","`设置输入文件的分隔符。 `OFS=","`在输出中添加一个逗号。

如果您想在全局范围内进行替换，请考虑使用`gsub`而不是`sub`.

高温高压

# java - 从 ArrayList 中删除项目

> ID：10714233
> 
> 赞同：104
> 
> 时间：2012-05-23T05:56:30.253
> 
> 标签：java, arraylist

我有一个`ArrayList`假设`list`，它有 8 个项目 AH，现在我想从我该`list`怎么做中删除存储在 int 数组中的 1,3,5 位置项目。

我正在尝试这样做

```
ArrayList<String> list = new ArrayList<String>();
list.add("A");
list.add("B");
list.add("C");
list.add("D");
list.add("E");
list.add("F");
list.add("G");
list.add("H");

int i[] = {1,3,5};

for (int j = 0; j < i.length; j++) {
    list.remove(i[j]);
} 
```

但是在数组的第一个删除位置被更改后，在下一次迭代中它会删除错误的元素或给出异常。

* * *

## 回答 #1

> 赞同：141
> 
> 时间：2012-05-23T05:58:12.717

*在这种特定情况下*，您应该按降序删除元素。第一个索引`5`，然后`3`，然后`1`。这将从列表中删除元素而不会产生不良副作用。

```
for (int j = i.length-1; j >= 0; j--) {
    list.remove(i[j]);
} 
```

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2012-05-23T06:06:40.217

`ArrayList`您可以从using中删除元素`ListIterator`，

```
ListIterator listIterator = List_Of_Array.listIterator();

 /* Use void remove() method of ListIterator to remove an element from List.
     It removes the last element returned by next or previous methods.
 */
listIterator.next();

//remove element returned by last next method
listIterator.remove();//remove element at 1st position
listIterator.next();
listIterator.next();
listIterator.remove();//remove element at 3rd position
listIterator.next();
listIterator.next();
listIterator.remove();//remove element at 5th position 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-24T11:58:02.240

```
 public void DeleteUserIMP(UserIMP useriamp) {
       synchronized (ListUserIMP) {
            if (ListUserIMP.isEmpty()) {
            System.out.println("user is empty");
        }  else {
            Iterator<UserIMP> it = ListUserIMP.iterator();
            while (it.hasNext()) {
                UserIMP user = it.next();
                if (useriamp.getMoblieNumber().equals(user.getMoblieNumber())) {
                    it.remove();
                    System.out.println("remove it");
                }
            }
            // ListUserIMP.remove(useriamp);

            System.out.println(" this user removed");
        }
        Constants.RESULT_FOR_REGISTRATION = Constants.MESSAGE_OK;
        // System.out.println("This user Deleted " + Constants.MESSAGE_OK);

    }
} 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-02-24T08:59:23.387

正如先前所说

```
iterator.remove() 
```

可能是在循环期间删除列表项的唯一安全方法。

要更深入地了解使用迭代器删除项目，请尝试查看此[线程](https://stackoverflow.com/questions/15993356/how-iterators-remove-method-actually-remove-an-object)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-08-29T14:55:32.680

我假设数组 i 是升序排序的，这是使用 Iterator 的另一种解决方案，它更通用：

```
ArrayList<String> list = new ArrayList<String>();
list.add("A");
list.add("B");
list.add("C");
list.add("D");
list.add("E");
list.add("F");
list.add("G");
list.add("H");

int i[] = {1,3,5};

Iterator<String> itr = list.iterator();
int pos = 0;
int index = 0;
while( itr.hasNext() ){
    itr.next();
    if( pos >= i.length ){
        break;
    }
    if( i[pos] == index ){
        itr.remove();
        pos++;
    }

    index++;
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-05-23T06:01:14.620

```
String[] mString = new String[] {"B", "D", "F"};

for (int j = 0; j < mString.length-1; j++) {
        List_Of_Array.remove(mString[j]);
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-23T06:03:48.923

这个怎么样？想一想——

```
import java.util.ArrayList;

class Solution
{
        public static void main (String[] args){

             ArrayList<String> List_Of_Array = new ArrayList<String>();
             List_Of_Array.add("A");
             List_Of_Array.add("B");
             List_Of_Array.add("C");
             List_Of_Array.add("D");
             List_Of_Array.add("E");
             List_Of_Array.add("F");
             List_Of_Array.add("G");
             List_Of_Array.add("H");

             int i[] = {1,3,5};

             for (int j = 0; j < i.length; j++) {
                 List_Of_Array.remove(i[j]-j);
             }

             System.out.println(List_Of_Array);

        }

} 
```

输出是-

```
[A, C, E, G, H] 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-05-23T06:07:06.573

试试这个方法

```
ArrayList<String> List_Of_Array = new ArrayList<String>();
List_Of_Array.add("A");
List_Of_Array.add("B");
List_Of_Array.add("C");
List_Of_Array.add("D");
List_Of_Array.add("E");
List_Of_Array.add("F");
List_Of_Array.add("G");
List_Of_Array.add("H");

int i[] = {5,3,1};

for (int j = 0; j < i.length; j++) {
    List_Of_Array.remove(i[j]);
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-11-19T05:32:30.857

如果您使用“=”，则会在第二个中为原始 arraylist 创建一个副本，但引用是相同的，因此如果您更改一个 list ，另一个也会被修改。用这个代替“=”

```
 List_Of_Array1.addAll(List_Of_Array); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-03-06T14:28:17.863

arraylist 的 remove(int index) 方法删除列表中指定位置（索引）处的元素。删除 arraylist 项目后，将任何后续元素向左移动。

表示数组列表是否包含 {20,15,30,40}

我已经调用了该方法：arraylist.remove(1)

那么数据 15 将被删除，而 30 和 40 这两项将左移 1。

出于这个原因，您必须首先删除 arraylist 的更高索引项。

所以..对于您给定的情况..代码将是..

```
ArrayList<String> list = new ArrayList<String>();
list.add("A");
list.add("B");
list.add("C");
list.add("D");
list.add("E");
list.add("F");
list.add("G");
list.add("H");

int i[] = {1,3,5};

for (int j = i.length-1; j >= 0; j--) {
    list.remove(i[j]);
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-04-24T07:55:15.333

如果您需要删除列表中的最终项目可以使用此代码

```
 if(yourList.size() != 0){
   yourList.remove(yourList.size()-1);
 } 
```

或者您可能需要在选择列表中的项目后删除一段时间

```
if(selected){// boolean for checked add or remove
   yourList.add(position , id); // add to list by position can use your list position
}else{
   if(yourList.size() != 0){ 
   yourList.remove(position);
 }
} 
```

# java - 获取给定日期的一周的最后一天（日期）

> ID：10714234
> 
> 赞同：2
> 
> 时间：2012-05-23T05:56:33.160
> 
> 标签：java, datetime

如何获取特定日期的最后一周日（星期六）日期。意味着如果我将输入作为`06-04-2012`

> (MM-dd-YYYY)

输出应`06-09-2012`如[本日历](https://www.timeanddate.com/calendar/monthly.html?year=2012&month=6)所示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T05:59:35.077

```
Calendar cal  = Calendar.getInstance();
int currentDay = cal.get(Calendar.DAY_OF_WEEK);
int leftDays= Calendar.SATURDAY - currentDay;
cal.add(Calendar.DATE, leftDays); 
```

看

*   [例子](http://ideone.com/9Q6wj)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-26T07:42:52.063

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-06T18:52:40.217

```
public Calendar lastDayOfWeek(Calendar calendar){  
     Calendar cal = (Calendar) calendar.clone();  
     int day = cal.get(Calendar.DAY_OF_YEAR);  
     while(cal.get(Calendar.DAY_OF_WEEK) != Calendar.SATURDAY){  
          cal.set(Calendar.DAY_OF_YEAR, ++day);  
     }  
     return cal;  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T05:59:48.463

查看 JODA 时间或（如果您无法添加新库）日历类。

# templates - Jquery mobile-多页模板验证

> ID：10714235
> 
> 赞同：0
> 
> 时间：2012-05-23T05:56:40.463
> 
> 标签：templates, jquery-mobile, multipage

我有 3 页。单击每个页面的下一页时，该页面将验证当前页面以进行必填字段检查、数字检查并移至下一页。我的问题是关于第 3 页的最终保存，我们可以像对每个页面一样验证所有 3 个页面吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:24:07.263

是的，从这个角度来看，多页与单页没有什么不同。如果您使用的是多页，则所有字段都可以从任何虚拟页面中看到。

更新：

我不知道你用什么来做验证。我只是说多页 DOM 在所有虚拟页面中都是可见的，因为您实际上只使用一个页面。jQuery Mobile 仅将较大页面的一部分显示为虚拟页面，但您仍然使用一个 HTML DOM。

这可能是一个 hack，但如果您有一个多页，那么您可以让您的表单跨越多个页面。所以页面div实际上可以进入表单。在这里，我发布了一个示例，显示您可以访问多页文档中的元素：[https ://stackoverflow.com/a/10686795/828757](https://stackoverflow.com/a/10686795/828757)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:43:25.263

找到了解决方案：

`$.validator.setDefaults({ ignore: "" });`

# javascript - 设置表格数据的宽高

> ID：10714239
> 
> 赞同：-1
> 
> 时间：2012-05-23T05:56:53.933
> 
> 标签：javascript, css, html

这是一个我知道的简单的，但我被困住了，失去了想法。我有一个针对不同值动态变化的目录。所以表格数据的宽度和高度是不确定的。我想设置这个表格数据的宽度和高度。

```
<td style='width:30px; max-height:10px; overflow:auto; '>
<input type='checkbox' name='facets'>
+ facetList[count].term + "(" + facetList[count].count + ")" + "</td>"; 
```

但它给了我输出，就像我附加的快照一样。我的 CSS 有什么问题？![在此处输入图像描述](../Images/213abccd49a9a1df03541de37d5e6204.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:14:41.210

你为什么不尝试动态宽度和高度？喜欢

```
style="width: 80%; max-height: 10%" 
```

# java - java.util.Properties$LineReader.readLine

> ID：10714244
> 
> 赞同：8
> 
> 时间：2012-05-23T05:57:26.997
> 
> 标签：java, properties

我需要读取配置文件，运行以下代码时出现此错误：

`java.util.Properties$LineReader.readLine`

文件 config.cfg 存在并具有 r/w 权限。

```
import java.util.*;
import java.util.Properties;

public class Config   
{
 Properties configFile;
 public Config()
 {
configFile = new java.util.Properties();
try {           
  configFile.load(this.getClass().getClassLoader().
  getResourceAsStream("config.cfg"));           
}catch(Exception eta){
     eta.printStackTrace();
}
}

public String getProperty(String key)
{

 String value = this.configFile.getProperty(key);       
 return value;

 }

} 
```

## 编辑 - 完全错误

```
 [java] java.lang.NullPointerException
 [java]     at java.util.Properties$LineReader.readLine(Properties.java:418)
 [java]     at java.util.Properties.load0(Properties.java:337)
 [java]     at java.util.Properties.load(Properties.java:325)
 [java]     at Config.<init>(Unknown Source)
 [java]     at ClosureBuilder.<clinit>(Unknown Source) 
```

## 编辑 - 目录结构

源代码

-> 配置.java

-> 配置.cfg

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T06:30:17.793

您必须将您的文件放在文件所在`config.cfg`的同一文件夹中`.class`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:05:22.500

资源流作为 null 返回。该资源不在您认为它在类路径中的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:05:43.977

您的程序似乎无法找到该`config.cfg`文件。

```
this.getClass().getClassLoader().getResourceAsStream("config.cfg") 
```

上面的调用正在返回`null`。

试试下面的：

```
InputStream is = this.getClass().getClassLoader().getResourceAsStream("config.cfg")
if(is !=null){
    configFile.load(is);
} 
```

此更改不会让您的程序失败。而且，如果没有找到文件，您的属性对象`configFile`将不具有文件中的任何属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T11:31:55.330

使用 this.getClass().getResource("/"); 检查您为配置获取的路径；

# jquery - 如何将属性包含到类中？在 jQuery 中

> ID：10714250
> 
> 赞同：1
> 
> 时间：2012-05-23T05:57:55.557
> 
> 标签：jquery, css

我正在尝试将属性放入类中并将其继承到每个 DIV ID。我的代码有什么问题？

```
var startItem1X = randomRange(50,100);
var startItem1Y = randomRange(50,100);
var startItem2X = randomRange(50,100);
var startItem2Y = randomRange(50,100);
var startItem3X = randomRange(50,100);
var startItem3Y = randomRange(50,100);
var startmyClassX = randomRange(50,100);
var startmyClassY = randomRange(50,100);
var $(".myClass").
    css(randomRange(50,100);); // push everything to the Class. 
```

如何将这些属性添加到类中？

```
function runItem1() {
    /* Set a the starting position to be random by editing the css */
    $("#item1").css("left", startItem1X+"px");
    $("#item1").css("top", startItem1Y+"px");
    /* Cycle1 and Cycle2 variables allow infinite loop */ 
    (cycle1 = function() {
        var m = randomRange(50,100);
        var n = randomRange(75,150);
        item1.animate({left:'+='+n},2000);
        item1.animate({left:'+='+m, top:'+='+m}, 2000)
        item1.animate({left:'-='+m, top:'+='+m}, 2000)
        item1.animate({left:'-='+n},2000);
        item1.animate({top:'-='+n},2000,cycle1)
    })();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:28:54.330

如果我理解正确，您想更新样式表中编写的类。如果是这样，那么您需要使用“文档对象模型样式表”来完成。看看 -

[http://www.javascriptkit.com/domref/stylesheet.shtml](http://www.javascriptkit.com/domref/stylesheet.shtml)

[http://www.w3.org/TR/DOM-Level-2-Style/stylesheets.html](http://www.w3.org/TR/DOM-Level-2-Style/stylesheets.html)

# excel - 如何避免在 Excel VBA 中使用 Select

> ID：10714251
> 
> 赞同：592
> 
> 时间：2012-05-23T05:57:58.193
> 
> 标签：excel, vba

我听说过很多关于`.Select`在 Excel VBA 中使用的可理解的厌恶，但我不确定如何避免使用它。我发现如果我能够使用变量而不是`Select`函数，我的代码将更具可重用性。但是，`ActiveCell`如果不使用`Select`.

我发现[这篇关于范围](http://msdn.microsoft.com/en-us/library/aa139976%28v=office.10%29.aspx)的文章和[这个关于不使用 select 的好处的例子](http://www.businessprogrammer.com/201105/power-excel-vba-secret-avoid-using-select/)，但我找不到任何关于*如何使用*的内容。

* * *

## 回答 #1

> 赞同：618
> 
> 时间：2012-05-23T10:23:22.667

### 如何避免选择的一些示例

使用`Dim`'d 变量

```
Dim rng as Range 
```

`Set`变量到所需的范围。有很多方法可以引用单个单元格范围：

```
Set rng = Range("A1")
Set rng = Cells(1, 1)
Set rng = Range("NamedRange") 
```

或多单元格范围：

```
Set rng = Range("A1:B10")
Set rng = Range("A1", "B10")
Set rng = Range(Cells(1, 1), Cells(10, 2))
Set rng = Range("AnotherNamedRange")
Set rng = Range("A1").Resize(10, 2) 
```

您*可以*使用该方法的快捷`Evaluate`方式，但效率较低，通常应在生产代码中避免使用。

```
Set rng = [A1]
Set rng = [A1:B10] 
```

以上所有示例均指*活动工作表*上的单元格。除非您特别想只使用活动工作表，否则最好也将`Worksheet`变量调暗：

```
Dim ws As Worksheet
Set ws = Worksheets("Sheet1")
Set rng = ws.Cells(1, 1)
With ws
    Set rng = .Range(.Cells(1, 1), .Cells(2, 10))
End With 
```

如果您*确实*想使用`ActiveSheet`，为了清楚起见，最好是明确的。但要小心，因为某些`Worksheet`方法会更改活动工作表。

```
Set rng = ActiveSheet.Range("A1") 
```

同样，这指的是*活动工作簿*。除非您特别想只使用`ActiveWorkbook`or `ThisWorkbook`，否则最好也将`Workbook`变量调暗。

```
Dim wb As Workbook
Set wb = Application.Workbooks("Book1")
Set rng = wb.Worksheets("Sheet1").Range("A1") 
```

如果您*确实*想使用`ActiveWorkbook`，为了清楚起见，最好是明确的。但要小心，因为许多`WorkBook`方法会更改活动书。

```
Set rng = ActiveWorkbook.Worksheets("Sheet1").Range("A1") 
```

您还可以使用该`ThisWorkbook`对象来引用包含运行代码的书。

```
Set rng = ThisWorkbook.Worksheets("Sheet1").Range("A1") 
```

一个常见的（坏的）代码是打开一本书，获取一些数据然后再次关闭

这是不好的：

```
Sub foo()
    Dim v as Variant
    Workbooks("Book1.xlsx").Sheets(1).Range("A1").Clear
    Workbooks.Open("C:\Path\To\SomeClosedBook.xlsx")
    v = ActiveWorkbook.Sheets(1).Range("A1").Value
    Workbooks("SomeAlreadyOpenBook.xlsx").Activate
    ActiveWorkbook.Sheets("SomeSheet").Range("A1").Value = v
    Workbooks(2).Activate
    ActiveWorkbook.Close()
End Sub 
```

它会更好：

```
Sub foo()
    Dim v as Variant
    Dim wb1 as Workbook
    Dim  wb2 as Workbook
    Set wb1 = Workbooks("SomeAlreadyOpenBook.xlsx")
    Set wb2 = Workbooks.Open("C:\Path\To\SomeClosedBook.xlsx")
    v = wb2.Sheets("SomeSheet").Range("A1").Value
    wb1.Sheets("SomeOtherSheet").Range("A1").Value = v
    wb2.Close()
End Sub 
```

将范围传递给您`Sub`的 s 和`Function`s 作为 Range 变量：

```
Sub ClearRange(r as Range)
    r.ClearContents
    '....
End Sub

Sub MyMacro()
    Dim rng as Range
    Set rng = ThisWorkbook.Worksheets("SomeSheet").Range("A1:B10")
    ClearRange rng
End Sub 
```

您还应该将方法（例如`Find`和`Copy`）应用于变量：

```
Dim rng1 As Range
Dim rng2 As Range
Set rng1 = ThisWorkbook.Worksheets("SomeSheet").Range("A1:A10")
Set rng2 = ThisWorkbook.Worksheets("SomeSheet").Range("B1:B10")
rng1.Copy rng2 
```

如果您要遍历一系列单元格，通常最好（更快）先将范围值复制到变量数组并循环遍历：

```
Dim dat As Variant
Dim rng As Range
Dim i As Long

Set rng = ThisWorkbook.Worksheets("SomeSheet").Range("A1:A10000")
dat = rng.Value  ' dat is now array (1 to 10000, 1 to 1)
for i = LBound(dat, 1) to UBound(dat, 1)
    dat(i,1) = dat(i, 1) * 10 ' Or whatever operation you need to perform
next
rng.Value = dat ' put new values back on sheet 
```

这是可能的小尝试。

* * *

## 回答 #2

> 赞同：233
> 
> 时间：2012-05-23T10:33:36.353

**应该避免`.Select`, `.Activate`, `Selection`, `Activecell`, `Activesheet`,等的两个主要原因`Activeworkbook`**

1.  它会减慢您的代码速度。
2.  它通常是运行时错误的主要原因。

**我们如何避免它？**

**1)**直接使用相关对象

考虑这段代码

```
Sheets("Sheet1").Activate
Range("A1").Select
Selection.Value = "Blah"
Selection.NumberFormat = "@" 
```

这段代码也可以写成

```
With Sheets("Sheet1").Range("A1")
    .Value = "Blah"
    .NumberFormat = "@"
End With 
```

**2）**如果需要，声明你的变量。上面相同的代码可以写成

```
Dim ws as worksheet

Set ws = Sheets("Sheet1")

With ws.Range("A1")
    .Value = "Blah"
    .NumberFormat = "@"
End With 
```

> 这是一个很好的答案，但我在这个主题上缺少的是我们真正需要激活的时候。每个人都说它不好，但没有人解释任何使用它有意义的情况。

**无法避免**使用的情况`.Activate/.Select`。（当我遇到它们时会添加更多链接）

1.  当您想向用户展示工作表以便用户可以看到它时。
2.  从您被迫使用[的表单控件运行时，工作宏](https://stackoverflow.com/questions/68507433/working-macro-returns-error-when-run-from-form-control)之类的场景会返回错误`.Activate`
3.  当/的[常用方法](https://stackoverflow.com/questions/70015987/hijri-date-formatting)不起作用时，您可能不得不求助于`Text To Columns``.Formula = .Formula``.Select`

* * *

## 回答 #3

> 赞同：96
> 
> 时间：2014-05-28T14:04:33.713

我将在之前给出的所有优秀答案中添加一个小重点：

为了避免使用 Select，您可以做的最重要的事情可能是***尽可能在您的 VBA 代码中使用命名范围（结合有意义的变量名）***。上面提到了这一点，但被掩盖了一点；但是，它值得特别注意。

这里有几个额外的理由来自由使用命名范围，尽管我相信我可以想到更多。

## 命名范围使您的代码更易于阅读和理解。

例子：

```
Dim Months As Range
Dim MonthlySales As Range

Set Months = Range("Months")
' E.g, "Months" might be a named range referring to A1:A12

Set MonthlySales = Range("MonthlySales")
' E.g, "Monthly Sales" might be a named range referring to B1:B12

Dim Month As Range
For Each Month in Months
    Debug.Print MonthlySales(Month.Row)
Next Month 
```

命名范围`Months`和`MonthlySales`包含的内容以及程序在做什么是非常明显的。

为什么这很重要？部分原因是其他人更容易理解它，但即使你是唯一会看到或使用你的代码的人，你仍然应该使用命名范围和好的变量名，因为***你会忘记***你打算用它做什么一年后，***你将浪费***30 分钟来弄清楚你的代码在做什么。

## 命名范围确保您的宏不会在（不是如果！）电子表格的配置发生更改时中断。

考虑一下，如果上面的例子是这样写的：

```
Dim rng1 As Range
Dim rng2 As Range

Set rng1 = Range("A1:A12")
Set rng2 = Range("B1:B12")

Dim rng3 As Range
For Each rng3 in rng1
    Debug.Print rng2(rng3.Row)
Next rng3 
```

这段代码一开始就可以正常工作 - 直到您或未来的用户决定“gee wiz，我想我要在 Column 中添加一个带有年份的新列`A`！”，或者在月份之间放置一个费用列和销售列，或为每列添加标题。现在，您的代码已损坏。而且因为你使用了糟糕的变量名，你需要花费更多的时间来弄清楚如何修复它。

如果您一开始就使用命名范围，则`Months`and`Sales`列可以随意移动，您的代码将继续正常工作。

* * *

## 回答 #4

> 赞同：50
> 
> 时间：2014-02-27T21:09:40.983

我将给出简短的答案，因为其他人都给出了长答案。

每当您录制宏并重用它们时，您都会得到 .select 和 .activate。当您选择一个单元格或工作表时，它只会使其处于活动状态。从那时起，只要您使用不合格的引用，就像`Range.Value`他们只使用活动单元格和工作表一样。如果您不注意代码的放置位置或用户单击工作簿，这也可能会出现问题。

因此，您可以通过直接引用您的单元格来消除这些问题。内容如下：

```
'create and set a range
Dim Rng As Excel.Range
Set Rng = Workbooks("Book1").Worksheets("Sheet1").Range("A1")
'OR
Set Rng = Workbooks(1).Worksheets(1).Cells(1, 1) 
```

或者你可以

```
'Just deal with the cell directly rather than creating a range
'I want to put the string "Hello" in Range A1 of sheet 1
Workbooks("Book1").Worksheets("Sheet1").Range("A1").value = "Hello"
'OR
Workbooks(1).Worksheets(1).Cells(1, 1).value = "Hello" 
```

这些方法有多种组合，但对于像我这样没有耐心的人来说，这将是尽快表达的一般想法。

* * *

## 回答 #5

> 赞同：36
> 
> 时间：2015-02-24T15:41:21.163

> “......并且我发现如果我能够使用变量而不是 Select 函数，我的代码将更具可重用性。”

虽然我想不出`.Select`比直接单元格引用更好的选择的少数几种情况，但我会站出来辩护`Selection`并指出，由于`.Select`应该避免的相同原因，它不应该被抛弃。

有时，只需轻按几个键即可将简短、省时的宏子例程分配给可用的热键组合，从而节省大量时间。在处理不符合工作表范围数据格式的袋装数据时，能够选择一组单元格来执行操作代码会产生奇迹。与您可能选择一组单元格并应用格式更改的方式非常相似，选择一组单元格来运行特殊的宏代码可以节省大量时间。

基于选择的子框架示例：

```
Public Sub Run_on_Selected()
    Dim rng As Range, rSEL As Range
    Set rSEL = Selection    'store the current selection in case it changes
    For Each rng In rSEL
        Debug.Print rng.Address(0, 0)
        'cell-by-cell operational code here
    Next rng
    Set rSEL = Nothing
End Sub

Public Sub Run_on_Selected_Visible()
    'this is better for selected ranges on filtered data or containing hidden rows/columns
    Dim rng As Range, rSEL As Range
    Set rSEL = Selection    'store the current selection in case it changes
    For Each rng In rSEL.SpecialCells(xlCellTypeVisible)
        Debug.Print rng.Address(0, 0)
        'cell-by-cell operational code here
    Next rng
    Set rSEL = Nothing
End Sub

Public Sub Run_on_Discontiguous_Area()
    'this is better for selected ranges of discontiguous areas
    Dim ara As Range, rng As Range, rSEL As Range
    Set rSEL = Selection    'store the current selection in case it changes
    For Each ara In rSEL.Areas
        Debug.Print ara.Address(0, 0)
        'cell group operational code here
        For Each rng In ara.Areas
            Debug.Print rng.Address(0, 0)
            'cell-by-cell operational code here
        Next rng
    Next ara
    Set rSEL = Nothing
End Sub 
```

要处理的实际代码可以是从单行到多个模块的任何内容。我已使用此方法在包含外部工作簿文件名的不规则单元格选择上启动长时间运行的例程。

简而言之，不要丢弃，因为它与和`Selection`密切相关。作为工作表属性，它还有许多其他用途。`.Select``ActiveCell`

[（是的，我知道这个问题是关于`.Select`的，`Selection`但我想消除新手 VBA 编码人员可能推断的任何误解。）]

* * *

## 回答 #6

> 赞同：32
> 
> 时间：2012-05-23T06:11:28.830

请注意，在下文中，我将 Select 方法（OP 想要避免的方法）与 Range 方法（这是问题的答案）进行比较。所以当你看到第一个 Select 时不要停止阅读。

这真的取决于你想要做什么。无论如何，一个简单的例子可能很有用。假设您要将活动单元格的值设置为“foo”。使用 ActiveCell 你会这样写：

```
Sub Macro1()
    ActiveCell.Value = "foo"
End Sub 
```

如果要将其用于非活动单元格，例如“B2”，则应首先选择它，如下所示：

```
Sub Macro2()
    Range("B2").Select
    Macro1
End Sub 
```

使用 Ranges，您可以编写一个更通用的宏，该宏可用于将您想要的任何单元格的值设置为您想要的任何值：

```
Sub SetValue(cellAddress As String, aVal As Variant)
    Range(cellAddress).Value = aVal
End Sub 
```

然后您可以将 Macro2 重写为：

```
Sub Macro2()
    SetCellValue "B2", "foo"
End Sub 
```

和 Macro1 为：

```
Sub Macro1()
    SetValue ActiveCell.Address, "foo"
End Sub 
```

* * *

## 回答 #7

> 赞同：32
> 
> 时间：2016-03-08T10:04:12.147

避免`Select`并且`Activate`是使您成为更好的 VBA 开发人员的举措。通常，`Select`在`Activate`录制宏时使用，因此`Parent`工作表或范围始终被认为是活动的。

**这是您可以避免的方法`Select`，`Activate`在以下情况下：**

* * *

## 添加一个新的工作表并在其上复制一个单元格：

来自（使用宏记录器生成的代码）：

```
Sub Makro2()
    Range("B2").Select
    Sheets.Add After:=ActiveSheet
    Sheets("Tabelle1").Select
    Sheets("Tabelle1").Name = "NewName"
    ActiveCell.FormulaR1C1 = "12"
    Range("B2").Select
    Selection.Copy
    Range("B3").Select
    ActiveSheet.Paste
    Application.CutCopyMode = False
End Sub 
```

到：

```
Sub TestMe()
    Dim ws As Worksheet
    Set ws = Worksheets.Add
    With ws
        .Name = "NewName"
        .Range("B2") = 12
        .Range("B2").Copy Destination:=.Range("B3")
    End With
End Sub 
```

## 当您想在工作表之间复制范围时：

从：

```
Sheets("Source").Select
Columns("A:D").Select
Selection.Copy
Sheets("Target").Select
Columns("A:D").Select
ActiveSheet.Paste 
```

到：

```
Worksheets("Source").Columns("A:D").Copy Destination:=Worksheets("Target").Range("a1") 
```

* * *

## 使用花哨的命名范围

与其他方式相比，您可以使用 来访问它们`[]`，这真的很漂亮。自行检查：

```
Dim Months As Range
Dim MonthlySales As Range

Set Months = Range("Months")    
Set MonthlySales = Range("MonthlySales")

Set Months =[Months]
Set MonthlySales = [MonthlySales] 
```

上面的示例如下所示：

```
Worksheets("Source").Columns("A:D").Copy Destination:=Worksheets("Target").[A1] 
```

* * *

## 不是复制值，而是获取它们

通常，如果您愿意`select`，很可能您正在复制某些内容。如果您只对值感兴趣，这是避免选择的好选择：

`Range("B1:B6").Value = Range("A1:A6").Value`

* * *

## 尝试始终参考工作表

[这可能是vba](/questions/tagged/vba "显示标记为“vba”的问题")中最常见的错误。每当您复制范围时，有时不会引用工作表，因此 VBA 将错误的工作表视为 ActiveWorksheet。

```
'This will work only if the 2\. Worksheet is selected!
Public Sub TestMe()
    Dim rng As Range
    Set rng = Worksheets(2).Range(Cells(1, 1), Cells(2, 2)).Copy
End Sub

'This works always!
Public Sub TestMe2()
    Dim rng As Range
    With Worksheets(2)
        .Range(.Cells(1, 1), .Cells(2, 2)).Copy
    End With
End Sub 
```

* * *

## 我真的可以永远不使用`.Select`或`.Activate`做任何事情吗？

*   一个很好的例子说明您何时可以使用`.Activate`，并且`.Select`当您想要确保出于视觉原因选择特定的工作表时。例如，您的 Excel 将始终在首先选择封面工作表的情况下打开，而不管文件关闭时哪个是 ActiveSheet。

因此，类似下面的代码是绝对可以的：

```
Private Sub Workbook_Open()
    Worksheets("Cover").Activate
End Sub 
```

*   另一个很好的例子是当您需要将所有工作表导出到一个 PDF 文件中时，如本例中所述 - 在本例中[如何避免 VBA 中的选择/活动语句？](https://stackoverflow.com/questions/59107554/how-to-avoid-select-active-statements-in-vba-in-this-example)

*   当命令仅适用[于](https://github.com/Vitosh/VBA_personal/blob/master/Boilerplate/Boilerplate%20VitoshAcademy/ExcelAdditional.bas)`ActiveWindow`ActiveWindow.Zoom或[ActiveWindow.FreezePanes](https://github.com/Vitosh/VBA_personal/blob/master/Boilerplate/Boilerplate%20VitoshAcademy/tblInput.vb)

* * *

## 回答 #8

> 赞同：18
> 
> 时间：2014-08-25T09:54:22.493

始终说明工作簿、工作表和单元格/范围。

例如：

```
Thisworkbook.Worksheets("fred").cells(1,1)
Workbooks("bob").Worksheets("fred").cells(1,1) 
```

因为最终用户总是只点击按钮，一旦焦点从工作簿上移开，代码想要使用的代码就会完全出错。

并且永远不要使用工作簿的索引。

```
Workbooks(1).Worksheets("fred").cells(1,1) 
```

您不知道当用户运行您的代码时会打开哪些其他工作簿。

* * *

## 回答 #9

> 赞同：15
> 
> 时间：2018-06-16T14:18:51.557

这些方法相当污名化，因此为了在沙子上划清界限，请带头[Vityata](https://stackoverflow.com/questions/10714251/how-to-avoid-using-select-in-excel-vba/35864330#35864330)和 Jeeped：

## 调用`.Activate`, `.Select`, `Selection`,`ActiveSomething`方法/属性

基本上是因为调用它们主要是为了通过应用程序 UI 处理用户输入。由于它们是用户通过 UI 处理对象时调用的方法，它们是由宏记录器记录的方法，这就是为什么在大多数情况下调用它们既脆弱又多余：您不必选择对象，以便`Selection`随后执行操作。

但是，此定义解决了需要它们的情况：

## 何时调用`.Activate`, `.Select`, `.Selection`,`.ActiveSomething`方法/属性

基本上当您期望*最终用户*在执行中发挥作用时。

如果您正在开发并期望用户为您的代码选择对象实例来处理，那么`.Selection`或`.ActiveObject`是合适的。

另一方面，`.Select`当`.Activate`您可以推断用户的下一步操作并且您希望您的代码引导用户时很有用，可能会节省他/她的一些时间和鼠标点击。例如，如果您的代码刚刚创建了一个全新的图表实例或更新了一个图表，用户可能想要查看它，您可以调用`.Activate`它或它的工作表来节省用户搜索它的时间；或者，如果您知道用户将需要更新某些范围值，您可以以编程方式选择该范围。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2016-11-20T15:02:00.710

恕我直言，使用`.select`来自像我这样的人，他们通过录制宏开始学习 VBA，然后在没有意识到这一点的情况下修改代码`.select`，后续`selection`只是一个不必要的中间人。

`.select`可以通过直接处理已经存在的对象来避免，正如许多已经发布的那样，这允许各种间接引用，例如以复杂的方式计算 i 和 j，然后编辑单元格（i，j）等。

否则，它本身并没有隐含的错误，`.select`你可以很容易地找到它的用途，例如，我有一个电子表格，我用日期填充，激活宏，用它做一些魔法，然后在单独的工作表上以可接受的格式导出它，这然而，需要一些最终的手动（不可预测的）输入到相邻的单元格中。因此，这是为`.select`我节省了额外的鼠标移动和点击的时刻。

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2016-09-08T06:36:33.133

为避免使用该`.Select`方法，您可以设置一个等于所需属性的变量。

► 例如，如果您想要其中的值，`Cell A1`您可以设置一个等于该单元格的 value 属性的变量。

*   例子`valOne = Range("A1").Value`

► 例如，如果您想要该`you could set a variable equal to the`工作表的“Sheet3 代号”属性的代号。

*   例子`valTwo = Sheets("Sheet3").Codename`

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2018-08-16T20:07:44.717

我注意到这些答案都没有提到[.Offset 属性](https://msdn.microsoft.com/en-us/vba/excel-vba/articles/range-offset-property-excel)。这也可以用来避免`Select`在操作某些单元格时使用该操作，特别是在参考选定的单元格时（正如 OP 提到的那样`ActiveCell`）。

这里有几个例子。

我还将假设“ActiveCell”是**J4**。

`ActiveCell.Offset(2, 0).Value = 12`

*   这会将单元格`J6`的值更改为 12
*   减号 -2 将引用 J2

`ActiveCell.Offset(0,1).Copy ActiveCell.Offset(,2)`

*   这会将单元格复制`k4`到`L4`.
*   请注意，如果不需要，则偏移参数中不需要“0” (,2)
*   与前面的示例类似，负 1 将是`i4`

`ActiveCell.Offset(, -1).EntireColumn.ClearContents`

*   这将清除列 k 中所有单元格中的值。

这些并不是说它们比上述选项“更好”，而只是列出替代方案。

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2020-10-30T15:55:25.667

# 如何避免复制粘贴？

让我们面对现实吧：这个在录制宏时经常出现：

```
Range("X1").Select
Selection.Copy
Range("Y9).Select
Selection.Paste 
```

虽然这个人唯一想要的是：

```
Range("Y9").Value = Range("X1").Value 
```

因此，我建议不要在 VBA 宏中使用复制粘贴，而是建议采用以下简单方法：

```
Destination_Range.Value = Source_Range.Value 
```

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2019-10-30T09:45:23.417

使用*.Parent*功能，此示例展示了如何仅设置一个 myRng 引用启用对整个环境的动态访问，而无需任何 .Select、.Activate、.Activecell、.ActiveWorkbook、.ActiveSheet 等。（没有任何通用的*.Child*功能。）

```
Sub ShowParents()
    Dim myRng As Range
    Set myRng = ActiveCell
    Debug.Print myRng.Address                    ' An address of the selected cell
    Debug.Print myRng.Parent.name                ' The name of sheet, where MyRng is in
    Debug.Print myRng.Parent.Parent.name         ' The name of workbook, where MyRng is in
    Debug.Print myRng.Parent.Parent.Parent.name  ' The name of application, where MyRng is in

    ' You may use this feature to set reference to these objects
    Dim mySh  As Worksheet
    Dim myWbk As Workbook
    Dim myApp As Application

    Set mySh = myRng.Parent
    Set myWbk = myRng.Parent.Parent
    Set myApp = myRng.Parent.Parent.Parent
    Debug.Print mySh.name, mySh.Cells(10, 1).Value
    Debug.Print myWbk.name, myWbk.Sheets.Count
    Debug.Print myApp.name, myApp.Workbooks.Count

    ' You may use dynamically addressing
    With myRng
        .Copy

        ' Pastes in D1 on sheet 2 in the same workbook, where the copied cell is
        .Parent.Parent.Sheets(2).Range("D1").PasteSpecial xlValues

        ' Or myWbk.Sheets(2).Range("D1").PasteSpecial xlValues

        ' We may dynamically call active application too
        .Parent.Parent.Parent.CutCopyMode = False

        ' Or myApp.CutCopyMode = False
    End With
End Sub 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2020-03-02T13:04:58.923

从不使用 Select 或 Activesheet 的主要原因是因为大多数人在运行宏时至少会打开另外几个工作簿（有时是几十个），并且如果他们在宏运行时单击离开工作表并单击其他一些工作簿他们打开的书，然后“Activesheet”更改，并且不合格的“Select”命令的目标工作簿也会更改。

最好的情况是，您的宏会崩溃，最坏的情况是您最终可能会在错误的工作簿中写入值或更改单元格，而无法“撤消”它们。

我遵循一个简单的黄金法则：为 Workbook 对象和 Worksheet 对象添加名为“wb”和“ws”的变量，并始终使用它们来引用我的宏书。如果我需要参考不止一本书或不止一张纸，我会添加更多变量。

例如，

```
Dim wb as Workbook
Dim ws as Worksheet
Set wb = ThisWorkBook
Set ws = wb.sheets("Output") 
```

“Set wb = ThisWorkbook”命令绝对是关键。“ThisWorkbook”是 Excel 中的一个特殊值，它表示您的 VBA 代码*当前运行*的工作簿。一个非常有用的快捷方式来设置您的 Workbook 变量。

在您的 Sub 顶部完成此操作后，使用它们再简单不过了，只需在使用“选择”的任何地方使用它们：

因此要将“输出”中单元格“A1”的值更改为“Hello”，而不是：

```
Sheets("Output").Activate
ActiveSheet.Range("A1").Select
Selection.Value = "Hello" 
```

我们现在可以这样做：

```
ws.Range("A1").Value = "Hello" 
```

如果用户正在使用多个电子表格，这不仅更加可靠并且不太可能崩溃；它也更短、更快、更容易编写。

作为一个额外的好处，如果您*总是*将变量命名为“wb”和“ws”，您可以将代码从一本书复制并粘贴到另一本书，并且它通常只需进行最少的更改（如果有的话）。

* * *

## 回答 #16

> 赞同：-4
> 
> 时间：2017-05-05T14:30:22.847

这是一个将清除单元格“A1”内容的示例（如果选择类型为 xllastcell 等，则清除更多内容）。全部完成，无需选择单元格。

```
Application.GoTo Reference:=Workbook(WorkbookName).Worksheets(WorksheetName).Range("A1")
Range(Selection,selection(selectiontype)).clearcontents 
```

# c# - Amazon S3 访问密钥存储？

> ID：10714257
> 
> 赞同：0
> 
> 时间：2012-05-23T05:58:27.240
> 
> 标签：c#, security, amazon-s3

我正在使用亚马逊 S3 作为存储构建一个 Web 应用程序，我想知道在源代码中以纯文本静态字符串形式使用访问密钥和秘密访问密钥是否安全？我可能是偏执狂，但我不太确定我是否基本上只是通过这样做来分发访问密钥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:04:01.527

我会将它放在应用程序配置或数据库中，这样如果它受到损害，您可以更改它。

# iphone - 目标c在Camera API Phone Gap中拍照

> ID：10714258
> 
> 赞同：0
> 
> 时间：2012-05-23T05:58:33.420
> 
> 标签：iphone, ios, cordova

我正在使用新的目标 ci 的 phonegap Camera API 不知道如何在 .h 文件中声明此函数的方法和接口

```
if([(NSString *) [components objectAtIndex:1] isEqualToString:@"Take_Photo"])    
  {
            UIImagePickerController *picker = [[UIImagePickerController alloc] init];
            picker.delegate = self; 
            picker.allowsImageEditing = YES; 
            picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
            [self presentModalViewController:picker animated:YES];
    } 
```

我已`UIImagePickerControllerDelegate`在`.h`文件中声明，但相机未打开。当我调试应用程序在完成该行后暂停时，我没有收到任何错误

```
[self presentModalViewController:picker animated:YES]; 
```

应用程序调试器在二进制文件中暂停。我想我错过了 .h 文件中的某些内容。

```
 @interface NativeAPI :UIViewController        
  <UIWebViewDelegate,UIImagePickerControllerDelegate,UINavigationControllerDelegate>
   {

        Reachability* internetReachable;
        Reachability* hostReachable; 
         UIImagePickerController* Image_Picker;
    } 
```

任何人帮助我提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:12:21.243

您将需要像这样将选择器的值分配给实例变量。

```
UIImagePickerController *picker = [[UIImagePickerController alloc] init];
self.Image_picker = picker;
[picker release];
Image_picker.delegate = self; 
Image_picker.allowsImageEditing = YES; 
Image_picker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;
[self presentModalViewController:picker animated:YES]; 
```

试试上面的代码

您可以在实现下定义一个由委托调用的方法。

# python - Python嵌套的整数列表未按预期返回

> ID：10714262
> 
> 赞同：3
> 
> 时间：2012-05-23T05:58:57.397
> 
> 标签：python, list, types

我正在编写这个函数来检查列表列表是否是一个有效的数独谜题。当我检查有效整数的列表时，我得到了意想不到的结果。

例如：

```
lst = [[1,2,3],[2,3,1],[4,2,1]]
for i in lst: 
  for v in i:
    print type(v)

<type 'int'>   #all the way through

for i in lst:
  for v in i:
    if v is int:
      print True 
```

什么都不打印，当我通过时：

```
for i in lst:
  for v in i:
    if v is not int:
      print False 
```

打印全部 False？不确定发生了什么，尤其是显示它们是整数的类型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T06:01:56.337

而不是说

```
if v is int: 
```

这是在询问 v 是否是实际的 int 类型

说

```
if isinstance(v, int): 
```

它说 v 是实例化的`int`（或子类）

这是一个例子，首先是一个整数（或实例化`int`）

```
>>> v = 17
>>> type(v)
<type 'int'>
>>> v is int
False
>>> isinstance(v, int)
True
>>> 
```

下一个类型

```
>>> v = int
>>> type(v)
<type 'type'>
>>> v is int
True
>>> isinstance(v, int)
False
>>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T06:02:19.150

没有整数是与 相同的对象`int`。你想用`isintance`.

您*不想*使用`type(v) == int`，因为如果`v`是 的子类，它将评估为 False `int`，这在大多数情况下根本不是所需的行为；如果您真的非常想要那样做，那么 do `type(v) is int`，因为这`is`是与特定对象（类型是什么）进行比较的预期样式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T06:04:07.830

```
v is not int 
```

和说的一样，但是更易读的版本

```
not v is int 
```

`is`比较每个操作数（而不是类型）的引用以查看它们是否相同。这是一个例子：

```
>>> x = (1,2,3)
>>> y = (1,2,3)
>>> x == y
True
>>> x is y
False 
```

所以`v is int`显然评估为`False`。`not`变成`False`并`True`打印 if 语句。

用于`isinstance(v, int)`正确的结果。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T06:03:32.637

说您应该使用 isinstance 的答案是正确的，但另一种方法是使用`if type(v) == int`.

# shared - LMAX 的 Disruptor 如何与具有共享变量的多个生产者一起工作？

> ID：10714280
> 
> 赞同：0
> 
> 时间：2012-05-23T06:00:11.240
> 
> 标签：shared, producer-consumer, disruptor-pattern

我是 Disruptor 的新手。我有以下两个查询：

Q1。我得到了[一个生产者对一个消费者](http://www.kotancode.com/2012/01/06/hello-disruptor/)和[一个生产者对多个依赖消费者](http://mechanitis.blogspot.in/2011/07/dissecting-disruptor-wiring-up.html)的示例代码，

我喜欢为多个生产者或多个消费者或定序器获取示例代码：3P – 1C。您能否向我推荐任何博客或代码示例？

Q2。这是一个关于在多生产者环境中的通用问题，一个生产者结果将如何与环形缓冲区中先前生产者的结果相互关联。

例如：Is Disruptor 可以在多个生产者更新单个文件/变量的环境中使用。即有两个生产者（P1，P2），它们正在更新一个共享变量（命名为“count”）。（这里的count是ValueEvent类中的一个实例变量）

最初，“计数”值为 0。

生产者 P1 会将“计数”当前值加 1。所以生产者 P1 处理后，count 的值将是 (0+1) = 1。

生产者 P2 会将“count”当前值加 2，因此生产者 P2 处理后，count 的值将是 (1+2) = 3。

基本上，P2 需要从环形缓冲区读取更新的“计数”值（由 P1 完成）并添加增量值（2）。

我们如何维护生产者的执行顺序？（P2总是在P1执行之后执行。）

在消费者端，消费者 (C1,C2) 将按顺序读取“计数”值 (1,3,.,.,.)。这没关系，就像在环形缓冲区中一样，每个消费者将仅按顺序读取环形缓冲区值。

谢谢，普拉森吉特。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:47:40.960

q1：没有示例 - 但假设您使用的是 Java 实现，如果您想要多个真正独立的生产者，则需要使用 ProducerBarrier。

q2：但是您的 Q2 告诉我，您的颠覆者中还没有完全独立的制作人。由于存在依赖关系 P1 然后 P2 然后 {C1,C2}。想想 P2 是一个“消费者”，它更新了一个不同的变量（不是 P1 更新的同一个变量），C1&C2 跟随 P2。

例如：P1 确实 count=0+1。P2 确实 count2=1+2=3。C1&C2 读取“count2”变量。然后将您的干扰器设置为具有 P1->P2->{C1,C2}。在 P1 完成之前，P2 不会开始处理。在 P2 完成之前，C1 和 C2 不会开始处理。

如果您追求最佳性能，则必须注意两个计数器之间的缓存行共享。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T18:05:02.897

1.  我编写了一个示例项目来说明多个生产者 - 单个消费者。这是链接： http: [//krishnansrinivasan.wordpress.com/2012/07/29/using-disruptor-net-with-wcf-2/](http://krishnansrinivasan.wordpress.com/2012/07/29/using-disruptor-net-with-wcf-2/)

2.  生产者永远不会更新由 RingBuffer 抽象出来的变量的状态。Ringbuffer 仅有助于根据从生产者接收消息的顺序对消费者的调用进行严格排序。

# json - json数据显示不正确

> ID：10714281
> 
> 赞同：0
> 
> 时间：2012-05-23T06:00:26.550
> 
> 标签：json, asp.net-mvc-3, flexigrid

我使用了 flexigrid 并且应该在其中显示的数据显示在白页中，图像在这里：![在此处输入图像描述](../Images/d54e5084600c154a59e7e8f5d28875d7.png)

这是我的看法：

```
@using (Html.BeginForm("JsonEmployee", "Employees", FormMethod.Post))
{
    @Html.ValidationSummary(true)
    <fieldset>
        <h5>
            ENTER A NAME TO FILTER THE LIST:</h5>
        <div style="float: left">
            <input name="nameSelected" type="text" /> &nbsp  </div>
        <div style="float: left">
            <input class="btn btn-inverse" type="submit" value="FILTER" /></div>
    </fieldset>
}
<table class="flex" style="display: none">
</table>

<script type="text/javascript" language="javascript">
$('.flex').flexigrid({
    url: '/Employees/JsonEmployee',
    dataType: 'json',
    method: 'GET',
    colModel: [
{ display: 'NUMBER', name: 'number', width: 200, sortable: true, align: 'center' },
{ display: 'NAME', name: 'name', width: 300, sortable: true, align: 'center' },
{ display: 'ROLE', name: 'role', width: 200, sortable: true, align: 'center'}],
    searchitems: [
    { display: 'NUMBER', name: 'number' },
    { display: 'NAME', name: 'name', isdefault: true }
    ],
    sortname: "number",
    sortorder: "name",
    usepager: true,
    title: 'Employees',
    useRp: true,
    rp: 15,
    showTableToggleBtn: true,
    width: 950
});
</script> 
```

这是我的控制器：

```
 [Authorize(Users = "Admin")]
    [HttpPost]
    public ActionResult JsonEmployee(String nameSelected)
    {
        CacheClear();
        var employees = db.Employees.Where(r => r.Name.Contains(nameSelected)).OrderBy(r => r.Name);
        var res = new
        {
            page = 1,
            total = employees.Count(),
            rows = employees.Select(x => new { x.Number, x.Name, x.Role })
                .ToList()
                .Select(x => new
                {
                    id = x.Number,
                    cell = new string[]
                    {
                    x.Number,
                    x.Name,
                    x.Role
                    }
                }).ToArray(),
        };
        return Json(res, JsonRequestBehavior.AllowGet);
    } 
```

我有一个接受来自用户的字符串输入的表单。如果用户单击提交按钮，我页面中的 flexigrid 应该由过滤列表填充。但是，页面重定向到带有 json 数据的白页只是就像上面的图片...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:02:20.900

您已经创建了一个指向该`/Employees/JsonEmployee`操作的 HTML 表单。因此，当您提交此表单时，浏览器通常会向此控制器操作发送 POST 请求并重定向到它并显示其执行结果。这就是 HTML 的工作原理。如果您想留在同一页面上，您可以 AJAXify 这个表单并取消默认操作。像这样：

```
$('form').submit(function () {
    // Send an AJAX request to the controller action that this HTML <form>
    // is pointing to in order to fetch the results in a JSON form
    $.ajax({
        url: this.action,
        type: this.method,
        data: $(this).serialize(),
        success: function (result) {
            // When the AJAX request succeeds we get the result returned
            // by the controller action which represents the JSON data source
            // for the flexgrid. So all that's left is rebind the grid with
            // this new data source:
            $('.flex').flexAddData(result);
        }
    });

    // Prevent the browser from redirecting to the /Employees/JsonEmployee action
    return false;
}); 
```

# c++ - 检查文件指针是否打开，然后在 C++ 中将其删除

> ID：10714296
> 
> 赞同：2
> 
> 时间：2012-05-23T06:02:01.297
> 
> 标签：c++, file-pointer

虽然我已经阅读了一些关于类似问题的先前回答的问题，但我尚不清楚如何继续。这是场景：

我需要删除一些临时文件，但它们没有被删除。在调试时，我意识到即使手动尝试删除文件也不会删除它们。因此，我得出结论，某些文件指针尚未关闭，但阻止我删除文件。

但是随后这些文件指针被用于我无法访问的部分代码中。这让我只有一个解决方案（也许），检查文件指针是否打开并删除它。

或者有没有其他方法来处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:32:22.650

如果您使用的是 Windows 操作系统，则可以使用[MoveFileEx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365240%28v=vs.85%29.aspx)函数。
这允许您在重新启动后将文件标记为删除。

```
MoveFileEx(lpExistingFileName, NULL, MOVEFILE_DELAY_UNTIL_REBOOT); 
```

# datetime - SSIS：将日期时间与变量进行比较

> ID：10714297
> 
> 赞同：1
> 
> 时间：2012-05-23T06:02:05.897
> 
> 标签：datetime, variables, ssis

所以，我创建了一个数据类型为 datetime 的变量“batch”。现在我的 OLEBD 源有一个列“addDate”，例如 2012-05-18 11:11:17.470，所以要填充的空目标也是如此。

现在这个列 addDate 有很多日期，我想复制所有日期“2012-05-18 11:11:17.470”

当我将变量的值作为该日期时，它会自动更改为 mm/dd/yyyy hh;mm AM 格式，因此在我的条件拆分转换中，它无法将日期与变量匹配，因此没有记录被复制到目的地！！

问题究竟出在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:50:22.540

我遇到了这个问题，我发现的最佳解决方案不是“漂亮”。基本上，您需要将变量的“表达式”和“评估为表达式”更改为 true（否则它将忽略表达式上的值）。

秘密是（也是我说这不是一个很好的解决方案的原因）创建第二个变量来评估第一个变量的表达式，因为您不能根据表达式更改变量的值。

因此，假设您的变量名为“DateVariable”并且您有`23/05/2012`，例如创建一个名为“DateVar2”的变量并将其表达式设置为

> (DT_WSTR,4)YEAR(@[User::DateVariable]) + "/"+RIGHT("0" + (DT_WSTR,2)MONTH(@[User::DateVariable]),2) + "/" + RIGHT ("0" + (DT_WSTR,2)DAY(@[User::DateVariable]),2)

那会给你`2012/05/23`

继续以您想要的格式获取日期

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T21:42:56.087

我找到了更简单的解决方案。选择数据类型为字符串。输入任何所需的值。在条件拆分之前，需要进行数据转换转换。将其转换为 DT_DBTIMESTAMP 然后运行包。

有用！

# c# - C#中的foreach抛出空引用异常

> ID：10714298
> 
> 赞同：0
> 
> 时间：2012-05-23T06:02:08.727
> 
> 标签：c#, list, exception

我有以下代码块

```
string[] dirs = Directory.GetDirectories(Current);
try
{
    foreach (string dir in dirs)
    {
        string[,] dirconf = Read_Dir(dir);
        Element elem = new Element();
        elem.name = dir; // set the current name in a blank element
        if (dirconf[1, 0].Equals("container")) 
            elem.type = ElementType.Container;
        else
            elem.type = ElementType.Project; // set the current type in the element

        // this is where additionalInfo will go

        Branch.Add(elem);
     }
}
catch (Exception e)
{
    MessageBox.Show(e.Message + "\r\n" + e.Source + "\r\n" + e.InnerException + "\r\n" + e.Data + "\r\n" + e.StackTrace);
}
UpdateUI(); 
```

那应该是获取目录列表，读取每个目录的配置（Read_Dir 函数工作得很好，经过测试），然后将目录添加到分支。分支声明如下

```
List<Element> Branch = new List<Element>(); 
```

使用变量 watch 和调试器，dirs 数组得到所有正确的东西，dirconf 也是如此。该元素创建成功，然后，在 Branch.Add 我想，它给出了一个“对象引用未设置为对象实例”异常，它退出 foreach 并直接进入 UpdateUI。UpdateUI 读取分支列表，发现它是空白的，并且什么也不做。

# dns - 是否可以在自己身上运行 DNSCrypt 服务器？

> ID：10714303
> 
> 赞同：1
> 
> 时间：2012-05-23T06:02:25.043
> 
> 标签：dns

OpenDNS 引入了 DNSCrypt，他们在他们的 OpenDNS 服务器中运行服务器。

[http://www.opendns.com/technology/dnscrypt/](http://www.opendns.com/technology/dnscrypt/)

并且客户端程序是开源的：

[https://github.com/opendns/dnscrypt-proxy](https://github.com/opendns/dnscrypt-proxy)

这对于像中国这样受审查的网络环境来说意义重大。

但是OpenDNS服务器对中国的响应很慢，我希望在我自己的服务器上设置一个DNSCrypt服务器，但是找不到这样的东西。

有谁知道 DNSCrypt 服务器部分是否开源？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:37:35.113

许多其他服务器都支持该协议，也很容易将其添加到您自己的服务器中。

有关一些信息，请参阅文档的[DNSCrypt 实现](https://dnscrypt.info/implementations)部分。

大多数服务器（如果不是全部）直接或通过[DNSCrypt docker image使用](https://github.com/jedisct1/dnscrypt-server-docker)[encrypted-dns-server](https://github.com/jedisct1/encrypted-dns-server)。

[dnscrypt-proxy 客户端还包括在 VPS 上安装 dnscrypt 服务器的](https://github.com/jedisct1/dnscrypt-proxy/wiki/How-to-setup-your-own-DNSCrypt-server-in-less-than-10-minutes)分步说明。

另一种选择是 PowerDNS [dnsdist](http://dnsdist.org/)。

# objective-c - 在目标 C 中编写一个函数，可以使用 iphone 键盘在文本文件中自动打印一些东西

> ID：10714305
> 
> 赞同：-3
> 
> 时间：2012-05-23T06:02:36.027
> 
> 标签：objective-c, ios, uikit

大家好，我有以下问题我已经制作了一个 iphone 应用程序，在该应用程序中，我使用界面生成器制作了应用程序的 UI，并且每当用户在文本字段中输入一些文本并按下时，都有一个文本字段、一个按钮和一个标签按钮消息“欢迎：文本字段内容”显示在标签中我为按钮单击编写了以下 IBAction

```
-(IBAction)updateText:(id)sender{

    NSString *text;

    if( [ textName.text length] == 0 )
    {
        text = @"Please Enter Your Name";
    }

    else
    {
        text = [ [NSString alloc] initWithFormat:@"Hello : %@" , textName.text ];
    }

    lblHello.text = text;

    [text release];

} 
```

这里 textName 是文本字段的名称， lblHello 是标签

但我想通过编写一些目标 C 函数来自动化在文本字段中输入文本并按下按钮的过程，以便使用 iphone 键盘自动输入值，然后单击按钮。谁能帮我编写该函数以及在何处调用该函数以完成任务。请帮我解决这个问题，并告诉我是否需要更多代码以供参考。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:10:16.770

为此，您应该使用[UITextFieldDelegateMethods](https://developer.apple.com/library/ios/#documentation/uikit/reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html)。看一下：

`textField:shouldChangeCharactersInRange:replacementString:`

> 每当用户在文本字段中键入新字符或删除现有字符时，文本字段都会调用此方法。

对于委托，您必须通过代码或 Interfacebuilder 将文本字段的委托设置为您的视图控制器。并且您必须在您的 viewcontrollers 头文件中声明该类符合`UITextFieldDelegate`协议。

如安全案例所述，您可以使用委托方法

`textFieldDidEndEditing:`

也。to 之间的区别在于标签更新的时间：`textFieldDidEndEditing:`在文本字段中编辑后`textField:shouldChangeCharactersInRange:replacementString:`调用，在键入期间调用。

代码：

在你的 .h 文件中：

```
@interface YourClass : YourClassSuperClass <UITextFieldDelegate>

@propertys
-(void)someMethod;
@end 
```

在您的 .m 文件中，您选择要实现的委托方法以演示我将选择`textFieldDidEndEditing:`：

```
@implementation YourClass

- (void)viewDidLoad {
    textField.delegate = self;
}

#pragma mark - UITextFieldDelegate methods

- (void)textFieldDidEndEditing:(UITextField *)aTextField {
    lblHello.text = aTextField.text;
} 
```

如果你喜欢，你也可以`textField.delegate`通过 IB 设置。不要忘记设置委托，否则委托方法将不会被调用。

请熟悉委托模式，因为它经常被使用！有关委托如何工作以及如何使用它的更多信息，您可以阅读 [Objective-C 编程中的概念 -> 委托和数据源](https://developer.apple.com/library/ios/#documentation/General/Conceptual/CocoaEncyclopedia/DelegatesandDataSources/DelegatesandDataSources.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:12:48.567

为此使用 UITextFieldDelegate 方法。当用户单击 iphone 键盘的返回按钮时，将调用此方法：

```
- (void)textFieldDidEndEditing:(UITextField *)textField
{

 if( [textName.text length] == 0 )
 {
   text = @"Please Enter Your Name";
 }

 else
 {
   text = [ [NSString alloc] initWithFormat:@"Hello : %@" , textName.text ];
 }

 lblHello.text = text;

} 
```

# php - mysql显示表的所有包含

> ID：10714308
> 
> 赞同：0
> 
> 时间：2012-05-23T06:03:05.887
> 
> 标签：php, mysql

是否可以使用 php 显示 mysql 表，我的意思是显示带有字段名的记录而不指定行名。

例子

## |id|姓名 |地址 |状态 | <--- 这是mysql表中的字段

|1|姓名1 |地址1 |状态1| <-- 这是记录

还有更多记录...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:06:01.827

只是一个想法：

1.  运行`DESCRIBE tablename`并获取字段名称/类型
2.  运行`SELECT * FROM tablename`并获取记录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:08:33.167

如果我理解正确，您想在表格中显示所有记录？

$sql = mysql_query("SELECT * FROM 表")

星号表示您将选择所有行。将表更改为您的表名..

现在你所有的表信息都存储在 $sql 中

# java - 使用java将图像文件转换为base64格式，我将图像文件的位置作为输入

> ID：10714309
> 
> 赞同：-3
> 
> 时间：2012-05-23T06:03:08.720
> 
> 标签：java, base64

我正在为我的服务器端应用程序使用 java。我将提供特定图像文件的位置作为输入，并且必须使用 java 将其转换为 base64 格式并将其发送到 server.pl 帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T05:20:28.300

```
File folderName = new File(processingFolder+"/"+f1[i].getName());
            File[] folderFiles= folderName.listFiles();

            for(int m=0;m<folderFiles.length;m++)
            {
                System.out.println("folderFiles are:"+folderFiles[m]);
                //String s1 = new String();
             File readfile = new File(folderFiles[m].toString());
             System.out.println(readfile.exists() + "!!");

             FileInputStream fis = new FileInputStream(readfile);
             ByteArrayOutputStream bos = new ByteArrayOutputStream();

             byte[] buf = new byte[1024];
             try {
                 for (int readNum; (readNum = fis.read(buf)) != -1;) {
                     bos.write(buf, 0, readNum); 
                     //no doubt here is 0
                     /*Writes len bytes from the specified byte array starting at offset 
                     off to this byte array output stream.*/
                 }
             }

             catch (IOException ex) {
             }
             byte[] bytes = bos.toByteArray();

              result2 = Base64.encode( bytes ); 
```

这会将文件转换为 base64 格式。
base64 类是，

```
public class Base64Coder {

// The line separator string of the operating system.
private static final String systemLineSeparator = System.getProperty("line.separator");

// Mapping table from 6-bit nibbles to Base64 characters.
private static final char[] map1 = new char[64];
   static {
      int i=0;
      for (char c='A'; c<='Z'; c++) map1[i++] = c;
      for (char c='a'; c<='z'; c++) map1[i++] = c;
      for (char c='0'; c<='9'; c++) map1[i++] = c;
      map1[i++] = '+'; map1[i++] = '/'; }

// Mapping table from Base64 characters to 6-bit nibbles.
private static final byte[] map2 = new byte[128];
   static {
      for (int i=0; i<map2.length; i++) map2[i] = -1;
      for (int i=0; i<64; i++) map2[map1[i]] = (byte)i; }

/**
* Encodes a string into Base64 format.
* No blanks or line breaks are inserted.
* @param s  A String to be encoded.
* @return   A String containing the Base64 encoded data.
*/
public static String encodeString (String s) {
   return new String(encode(s.getBytes())); }

/**
* Encodes a byte array into Base 64 format and breaks the output into lines of 76 characters.
* This method is compatible with <code>sun.misc.BASE64Encoder.encodeBuffer(byte[])</code>.
* @param in  An array containing the data bytes to be encoded.
* @return    A String containing the Base64 encoded data, broken into lines.
*/
public static String encodeLines (byte[] in) {
   return encodeLines(in, 0, in.length, 76, systemLineSeparator); }

/**
* Encodes a byte array into Base 64 format and breaks the output into lines.
* @param in            An array containing the data bytes to be encoded.
* @param iOff          Offset of the first byte in <code>in</code> to be processed.
* @param iLen          Number of bytes to be processed in <code>in</code>, starting at <code>iOff</code>.
* @param lineLen       Line length for the output data. Should be a multiple of 4.
* @param lineSeparator The line separator to be used to separate the output lines.
* @return              A String containing the Base64 encoded data, broken into lines.
*/
public static String encodeLines (byte[] in, int iOff, int iLen, int lineLen, String lineSeparator) {
   int blockLen = (lineLen*3) / 4;
   if (blockLen <= 0) throw new IllegalArgumentException();
   int lines = (iLen+blockLen-1) / blockLen;
   int bufLen = ((iLen+2)/3)*4 + lines*lineSeparator.length();
   StringBuilder buf = new StringBuilder(bufLen);
   int ip = 0;
   while (ip < iLen) {
      int l = Math.min(iLen-ip, blockLen);
      buf.append (encode(in, iOff+ip, l));
      buf.append (lineSeparator);
      ip += l; }
   return buf.toString(); }

/**
* Encodes a byte array into Base64 format.
* No blanks or line breaks are inserted in the output.
* @param in  An array containing the data bytes to be encoded.
* @return    A character array containing the Base64 encoded data.
*/
public static char[] encode (byte[] in) {
   return encode(in, 0, in.length); }

/**
* Encodes a byte array into Base64 format.
* No blanks or line breaks are inserted in the output.
* @param in    An array containing the data bytes to be encoded.
* @param iLen  Number of bytes to process in <code>in</code>.
* @return      A character array containing the Base64 encoded data.
*/
public static char[] encode (byte[] in, int iLen) {
   return encode(in, 0, iLen); }

/**
* Encodes a byte array into Base64 format.
* No blanks or line breaks are inserted in the output.
* @param in    An array containing the data bytes to be encoded.
* @param iOff  Offset of the first byte in <code>in</code> to be processed.
* @param iLen  Number of bytes to process in <code>in</code>, starting at <code>iOff</code>.
* @return      A character array containing the Base64 encoded data.
*/
public static char[] encode (byte[] in, int iOff, int iLen) {
   int oDataLen = (iLen*4+2)/3;       // output length without padding
   int oLen = ((iLen+2)/3)*4;         // output length including padding
   char[] out = new char[oLen];
   int ip = iOff;
   int iEnd = iOff + iLen;
   int op = 0;
   while (ip < iEnd) {
      int i0 = in[ip++] & 0xff;
      int i1 = ip < iEnd ? in[ip++] & 0xff : 0;
      int i2 = ip < iEnd ? in[ip++] & 0xff : 0;
      int o0 = i0 >>> 2;
      int o1 = ((i0 &   3) << 4) | (i1 >>> 4);
      int o2 = ((i1 & 0xf) << 2) | (i2 >>> 6);
      int o3 = i2 & 0x3F;
      out[op++] = map1[o0];
      out[op++] = map1[o1];
      out[op] = op < oDataLen ? map1[o2] : '='; op++;
      out[op] = op < oDataLen ? map1[o3] : '='; op++; }
   return out; }

/**
* Decodes a string from Base64 format.
* No blanks or line breaks are allowed within the Base64 encoded input data.
* @param s  A Base64 String to be decoded.
* @return   A String containing the decoded data.
* @throws   IllegalArgumentException If the input is not valid Base64 encoded data.
*/
public static String decodeString (String s) {
   return new String(decode(s)); }

/**
* Decodes a byte array from Base64 format and ignores line separators, tabs and blanks.
* CR, LF, Tab and Space characters are ignored in the input data.
* This method is compatible with <code>sun.misc.BASE64Decoder.decodeBuffer(String)</code>.
* @param s  A Base64 String to be decoded.
* @return   An array containing the decoded data bytes.
* @throws   IllegalArgumentException If the input is not valid Base64 encoded data.
*/
public static byte[] decodeLines (String s) {
   char[] buf = new char[s.length()];
   int p = 0;
   for (int ip = 0; ip < s.length(); ip++) {
      char c = s.charAt(ip);
      if (c != ' ' && c != '\r' && c != '\n' && c != '\t')
         buf[p++] = c; }
   return decode(buf, 0, p); }

/**
* Decodes a byte array from Base64 format.
* No blanks or line breaks are allowed within the Base64 encoded input data.
* @param s  A Base64 String to be decoded.
* @return   An array containing the decoded data bytes.
* @throws   IllegalArgumentException If the input is not valid Base64 encoded data.
*/
public static byte[] decode (String s) {
   return decode(s.toCharArray()); }

/**
* Decodes a byte array from Base64 format.
* No blanks or line breaks are allowed within the Base64 encoded input data.
* @param in  A character array containing the Base64 encoded data.
* @return    An array containing the decoded data bytes.
* @throws    IllegalArgumentException If the input is not valid Base64 encoded data.
*/
public static byte[] decode (char[] in) {
   return decode(in, 0, in.length); }

/**
* Decodes a byte array from Base64 format.
* No blanks or line breaks are allowed within the Base64 encoded input data.
* @param in    A character array containing the Base64 encoded data.
* @param iOff  Offset of the first character in <code>in</code> to be processed.
* @param iLen  Number of characters to process in <code>in</code>, starting at <code>iOff</code>.
* @return      An array containing the decoded data bytes.
* @throws      IllegalArgumentException If the input is not valid Base64 encoded data.
*/
public static byte[] decode (char[] in, int iOff, int iLen) {
   if (iLen%4 != 0) throw new IllegalArgumentException ("Length of Base64 encoded input string is not a multiple of 4.");
   while (iLen > 0 && in[iOff+iLen-1] == '=') iLen--;
   int oLen = (iLen*3) / 4;
   byte[] out = new byte[oLen];
   int ip = iOff;
   int iEnd = iOff + iLen;
   int op = 0;
   while (ip < iEnd) {
      int i0 = in[ip++];
      int i1 = in[ip++];
      int i2 = ip < iEnd ? in[ip++] : 'A';
      int i3 = ip < iEnd ? in[ip++] : 'A';
      if (i0 > 127 || i1 > 127 || i2 > 127 || i3 > 127)
         throw new IllegalArgumentException ("Illegal character in Base64 encoded data.");
      int b0 = map2[i0];
      int b1 = map2[i1];
      int b2 = map2[i2];
      int b3 = map2[i3];
      if (b0 < 0 || b1 < 0 || b2 < 0 || b3 < 0)
         throw new IllegalArgumentException ("Illegal character in Base64 encoded data.");
      int o0 = ( b0       <<2) | (b1>>>4);
      int o1 = ((b1 & 0xf)<<4) | (b2>>>2);
      int o2 = ((b2 &   3)<<6) |  b3;
      out[op++] = (byte)o0;
      if (op<oLen) out[op++] = (byte)o1;
      if (op<oLen) out[op++] = (byte)o2; }
   return out; }

// Dummy constructor.
private Base64Coder() {}

} // end class Base64Coder 
```

# node.js - Node.js, express, and using development versus production in app.configure

> ID：10714315
> 
> 赞同：33
> 
> 时间：2012-05-23T06:03:48.193
> 
> 标签：node.js, express, development-environment, production-environment

What is the easiest method to let express know what environment I am in? E.g. I want do do the below to make a connection to redis depending on what env I am in. Can this be done from the command line?

```
app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
  var r = require("redis").createClient(6379,'127.0.0.1');
});
app.configure('production', function(){
  app.use(express.errorHandler());
  r = redis.createClient(6379,'46.137.195.230', { detect_buffers: true });
}); 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-23T06:38:30.577

Your approach is ok, but you can make something more generic, like storing the config data for Redis in a file or passing the host and port like arguments:

`node app.js REDIS_HOST REDIS_PORT`

Then in your app you can grab them using process.argv:

```
app.configure('development', function(){
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
  var r = require("redis").createClient(process.argv[2], process.argv[3]);
});
app.configure('production', function(){
  app.use(express.errorHandler());
  var r = require("redis").createClient(process.argv[2], process.argv[3], { detect_buffers: true });
}); 
```

Update:

Express will know in what environment you're in by looking at the NODE_ENV variable (process.env.NODE_ENV): [https://github.com/visionmedia/express/blob/master/lib/application.js#L55](https://github.com/visionmedia/express/blob/master/lib/application.js#L55)

You can set that variable when starting the app like so: `NODE_ENV=production node app.js` (recommended), setting process.env.NODE_ENV manually in your node app before the Express code or putting that env var in ~/.profile like Ricardo said.

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-12-17T17:18:01.120

To expand on the idea of using a config.json file:

```
// config.json
{
  "development": {
    "redisPort": 6379,
    "redisHost": "127.0.0.1",
    "errorHandlerOptions": {"dumpExceptions": true, "showStack": true}
  },
  "production": {
    "redisPort": 6379,
    "redisHost": "46.137.195.230",
    "errorHandlerOptions": {"dumpExceptions": false, "showStack": false}
  }
} 
```

Load the config file and switch based on env.

```
// app.js
var config = require('./config.json')[app.get('env')];
app.use(express.errorHandler(config.errorHandlerOptions));
var r = require("redis").createClient(config.redisPort,config.redisHost); 
```

Make sure the NODE_ENV is set on each server (see other answers, one way: `NODE_ENV=production node app.js`), and this way the config variable has the settings appropriate to the server it runs on.

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-05-23T07:06:56.553

Just set the `NODE_ENV` environment variable to `production` or `development`, as seen in express' docs: [http://expressjs.com/guide.html#configuration](http://expressjs.com/guide.html#configuration)

I just leave `NODE_ENV=development` in the dev machine's `~/.profile` (.bashrc or bash_profile on linux), and do the same for `production` ones.

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-05-23T07:38:39.847

I did somthing even more comprehensive by ordering the sources of such parameters :

```
 var env = process.argv[2] || process.env.NODE_ENV || 'development'
    var mongourl = process.argv[3] || process.env.NODE_DB || 'mongodb://localhost/default'
    var port = process.env.PORT || 9001 
```

This way you can use command line args, env settings and default values.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-10T16:58:43.680

Use config module that allows to create multiple config files [https://www.npmjs.com/package/config](https://www.npmjs.com/package/config)

Eg default.json , production.json

And start your server wIth

export set NODE_ENV=production && npm start

# android - 如何在android中定义特定应用程序的权限？

> ID：10714320
> 
> 赞同：0
> 
> 时间：2012-05-23T06:04:01.440
> 
> 标签：android, permissions

我想为特定应用程序定义权限，我不想访问任何应用程序。

我该怎么办？我设置它`protectionLevel:signature`吗？如果我应该使用`protectionLevel:signature`，如何为其他应用程序定义密钥？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:41:38.683

如果您设置`protectionLevel`为签名，则只有使用相同密钥签名的应用才能获得该权限。因此，如果您使用相同的密钥签署所有应用程序，那么您的所有应用程序都将能够使用该权限。只要您小心保管好自己的私钥，其他应用程序将无法获得此权限。

# iphone - 如何从字符串中删除一个单词

> ID：10714323
> 
> 赞同：0
> 
> 时间：2012-05-23T06:04:19.957
> 
> 标签：iphone, ios, nsstring

你好我是objective-c的初学者我有一个这样的nsstring

```
Select *  from Store_Master where AND  VDivison = 'Casual Dining' AND VBrand_Name = 'Pinkberry' AND VCountry_Name = 'Egypt' AND VCity = 'Cairo' AND VBuilding_mall_name = 'Dandy Mega Mall' GROUP BY VStore_Name 
```

我只想删除第一次出现的 AND，我该如何删除。

先感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T06:13:45.533

用于`stringByReplacingCharactersInRange`仅替换第一个 'AND'：

```
NSString* s = @"Select *  from Store_Master where AND  VDivison = 'Casual Dining' AND VBrand_Name = 'Pinkberry' AND VCountry_Name = 'Egypt' AND VCity = 'Cairo' AND VBuilding_mall_name = 'Dandy Mega Mall' GROUP BY VStore_Name";
NSRange replaceRange = [s rangeOfString:@"AND"];
if (replaceRange.location != NSNotFound){
    NSString* result = [s stringByReplacingCharactersInRange:replaceRange withString:@""];
} 
```

这将导致：

```
Select *  from Store_Master where   VDivison = 'Casual Dining' AND VBrand_Name = 'Pinkberry' AND VCountry_Name = 'Egypt' AND VCity = 'Cairo' AND VBuilding_mall_name = 'Dandy Mega Mall' GROUP BY VStore_Name 
```

编辑：

如果您想以`AND`不区分大小写的方式删除出现的 （无论是大写还是小写），请`NSStringCompareOptions`在创建 NSRange 时使用 ，如下所示：

```
NSRange replaceRange = [s rangeOfString:@"and" options:NSCaseInsensitiveSearch]; 
```

其余代码相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:07:57.207

```
NSString *String1 = @"Select *  from Store_Master where AND  VDivison = 'Casual Dining' AND VBrand_Name = 'Pinkberry' AND VCountry_Name = 'Egypt' AND VCity = 'Cairo' AND VBuilding_mall_name = 'Dandy Mega Mall' GROUP BY VStore_Name";
NSString *String2 = [String1 stringByReplacingOccurrencesOfString:@"AND" withString:@""];

NSString * aString  = @"Select *  from Store_Master where AND  VDivison = 'Casual Dining' AND VBrand_Name = 'Pinkberry' AND VCountry_Name = 'Egypt' AND VCity = 'Cairo' AND VBuilding_mall_name = 'Dandy Mega Mall' GROUP BY VStore_Name";
NSRange replaceRange = [aString rangeOfString:@"AND"];
if (replaceRange.location !=NSNotFound){
    NSString * newString = [aString stringByReplacingCharactersInRange:replaceRange withString:@""];
    NSLog(newString);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:28:42.113

```
NSString *s = @"your string";
NSInteger loc = [s rangeOfString: @"AND"].location;
if (loc != NSNotFound) s = [NSString stringWithFormat: @"%@%@", [s substringToIndex: loc], [s substringFromIndex: loc + 3]]; 
```

这将删除第一次出现的 AND。第二行查找第一次出现的位置。第三行获取前后的子字符串，并使用 stringWithFormat 将它们放在一起。

获取位置后，还有其他方法可以将其删除，例如使用 给定范围的查找替换`stringByReplacingCharactersInRange`，或者像我的示例一样执行此操作，但使用`stringByAppendingString`连接部分。

# android - 在android中重置计时器

> ID：10714325
> 
> 赞同：0
> 
> 时间：2012-05-23T06:04:22.467
> 
> 标签：android

我在我的 android 应用程序中运行了一个计时器。我希望在用户交互后计时器应该自行重置？是否有任何类似 reset() 的函数可以重置计时器？重置计时器的程序是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:19:41.553

试试这个我在每个地方都使用过这个代码......当我需要重新启动计时器时。对我来说工作得很好。

```
// FOR CANCELING TIMER AND RESTARTING
my_timer.cancel();
if (my_timer == null) {
    my_timer = new Timer(true);
}
if (my_timer != null) {
    my_timer_task = new TimerTask() {

        @Override
        public void run() {
            // CODE YOU WANT TO EXECUTE WHEN TIMER HITS.
        }
    };
} 
```

希望它会帮助你。

# php - 如何在 wp_postmeta 中添加值？

> ID：10714328
> 
> 赞同：0
> 
> 时间：2012-05-23T06:04:35.683
> 
> 标签：php, mysql, wordpress

我在 wordpress 中工作。我必须在我的帖子中添加一些字段，并且我希望我的帖子的添加信息以 wp_postmeta 中元值的序列化形式添加。我该怎么做？我找到了一个`post.php`似乎可以处理这个问题的页面。但我似乎找不到任何可以让我将我的字段值添加到 postmeta 的东西。帮助

更新：我还看到`add_post_meta`这是否将值添加到数据库中，或者只是添加键和值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:40:34.450

您可以使用该`get_post_meta`方法获取特定字段或`get_post_custom()`全部获取。

但在这种情况下，我想你应该使用`the_meta();`它来获取当前的帖子元数据。一旦您在帖子/页面中添加自定义字段并将其放入模板中。

[在此处](http://codex.wordpress.org/Function_Reference/the_meta)了解如何使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:34:31.320

您需要在添加新帖子时添加自定义字段以在 wp_postmeta 中添加新值。

单击添加新帖子并搜索自定义字段。

# jquery - 如何在jquery中动态调用url？

> ID：10714330
> 
> 赞同：1
> 
> 时间：2012-05-23T06:04:56.523
> 
> 标签：jquery, ajax

我有这样的功能：

```
function contentDisp()
{
$.ajax({
url : "../Patient/brest/ros_brest.php",
success : function (data) {
$("#dynamicContent").html(data);
}
});
} 
```

我有一个这样的菜单：

```
<div  id="leftmenu">
<ul id="accordion">
    <li><div>BREAST</div>
        <ul>
            <li ><a href="#" onClick="contentDisp();">BREAST</a></li>
                    </ul> 
```

当最终用户单击菜单项时，相关页面将显示在为此分配的 div 中。一切工作正常，但现在如果我想对所有菜单项做同样的事情，那么我必须如何处理：url：“../Patient/brest/ros_brest.php”，而不是静态的 url 我必须如何动态传递。

提前谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T06:23:29.293

像这样的东西：

```
<script type="application/javascript">
$(document).ready(function() {
   $("a.dyn-load").on("click", function() {
      $("#" + $(this).attr("data-target")).load($(this).attr("href"));
      return false;
   });
});
</script>

<a href="/some/url" class="dyn-load" data-target="dyn-content">bleh</a>
<a href="/some/url2" class="dyn-load" data-target="dyn-content">bleh2</a>
<div id="dyn-content"></div>
<a href="/some/url3" class="dyn-load" data-target="dyn-content2">bleh3</a>
<a href="/some/url4" class="dyn-load" data-target="dyn-content2">bleh4</a>
<div id="dyn-content2"></div> 
```

[演示](http://jsfiddle.net/Regisc/RnMJN/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T06:07:43.480

```
 function contentDisp(url)
{
$.ajax({
url : url,
success : function (data) {
$("#dynamicContent").html(data);
}
});
}

<li ><a href="#" onClick="contentDisp("../Patient/brest/ros_brest.php");">BREAST</a></li> 
```

但是，我建议您删除 onClick 处理程序并将 url 作为 href 那样使用 js 关闭用户仍然会得到一些东西（阅读有关渐进增强以了解更多信息），就像这样

```
$("#accordion>a").click(function()
{
$.ajax({
url : $(this).attr("href"),
success : function (data) {
$("#dynamicContent").html(data);
}
});
 return false;
}); 
```

演示：http: [//jsbin.com/ixifah/4](http://jsbin.com/ixifah/4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T06:08:01.590

你可以这样做：

```
<a href="some_page_url" onClick="contentDisp(this);">BREAST</a>

function contentDisp(obj) {
  var someurl = $(obj).attr("href");
  $.ajax({
        url : someurl,
        success : function (data) {
            $("#dynamicContent").html(data);
        }
  });
} 
```

# .net - 如何检查是否安装了 .NET 框架

> ID：10714331
> 
> 赞同：3
> 
> 时间：2012-05-23T06:04:59.723
> 
> 标签：.net, windows, winforms, visual-c++, installation

我想用 c# 开发一个 .NET 应用程序，但首先我需要检查
是否安装了 .NET 框架，因为我不希望用户看到任何错误。
那么是否有任何 vc++ 代码仅在静态库中使用 MFC 来检查是否安装了 .NET 框架？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T06:54:11.363

您可以使用注册表来检查 .net 框架及其版本，无论是您使用的`VC++`还是其他可以处理注册表的语言。

查看 Micrsoft 知识库文章 -[如何确定安装了 Microsoft .NET Framework 的版本和服务包级别](http://msdn.microsoft.com/en-us/kb/kbarticle.aspx?id=318785)

[SO线程](https://stackoverflow.com/questions/199080/how-to-detect-what-net-framework-versions-and-service-packs-are-installed)上建议了各种方法。

另一种是使用 SignumFramework 中的 Signum.Utilities 库（您可以单独使用），您可以很好地获得它，而无需自己处理注册表。

**编辑：**检查此代码项目文章 - [.NET Framework 是否安装在这台机器上？？？](http://www.codeproject.com/Articles/18574/Is-NET-Framework-installed-on-this-machine)，它也使用注册表来安装或不安装框架..

希望这有帮助..

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-24T05:44:19.387

1.  检查文件`MSCorEE.dll`是否存在于 *`%SystemRoot%\System32`*目录中。
2.  .Net Framework SDk 还包括一个名为**CLRver.exe**的实用程序 ，它显示您机器上安装的 .Net Framework 版本

# android - 这里如何设置ImageView和TextView的宽高？

> ID：10714335
> 
> 赞同：0
> 
> 时间：2012-05-23T06:05:10.190
> 
> 标签：android, dynamic-data

这是我的文本和图像以及文本视图（i1，t1，t2）。如何在我的类文件中动态格式化这些视图的宽度和高度。

```
 ImageView i1 = new ImageView(this);
          TextView t1 = new TextView(this);
            TextView t2 = new TextView(this);
            RelativeLayout rl1 = new RelativeLayout(this);
            RelativeLayout.LayoutParams innerLP1 = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
            innerLP1.addRule(RelativeLayout.CENTER_IN_PARENT);
            innerLP1.topMargin=(30);
            t1.setText(name);
            rl1.setLayoutParams(innerLP1);
            rl1.addView(t1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:10:39.017

为这些视图设置布局参数

```
RelativeLayout.LayoutParams view_params = new 
          RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, 
                                      RelativeLayout.LayoutParams.WRAP_CONTENT);
imageview.setLayoutParams(view_params );
textview.setLayoutParams(view_params ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:12:10.917

使用`txt.SetHeight()`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:21:09.353

使用 setHeight() 和 setWidth() 方法。例如：

```
 ImageView i1 = new ImageView(this);
     i1.setHeight(xxx);
     i1.setWidth(xxx); 
```

# c# - 'System.Threading.ThreadAbortException' in ASP.net page

> ID：10714341
> 
> 赞同：3
> 
> 时间：2012-05-23T06:05:45.430
> 
> 标签：c#, asp.net, .net, vb.net, visual-studio

I have the below code in my ASP.net page:

```
Response.StatusCode = 404
Response.Write(strResult)
Response.End() 
```

The code above throws "An exception of type 'System.Threading.ThreadAbortException' occurred and was caught."

Can anyone tell me the reason why? And do I solve this.

thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T01:28:22.713

Calling `Response.End()` from any child object of the page will most likely cause the 'System.Threading.ThreadAbortException' exception.

Please read [this](http://www.shubho.net/2011/01/handling-threadabortexception-with.html) for a full explaination of why this is happening and methods to avoid/deal with the exception.

# android - 选定的项目在 Android 中未选中？

> ID：10714346
> 
> 赞同：0
> 
> 时间：2012-05-23T06:06:18.440
> 
> 标签：android, list, listview

在我的应用程序中，我使用 ListView 来选择要订购的项目。当我选择要订购的商品时，它会被选中并添加到订购页面中。如果我回到主页面，如果我再次来到项目列表，所选项目将被取消选中，但所选项目存在于订购页面中。应检查选定的项目，直到手动删除。请帮我解决这个问题。

这是我的代码：

```
 public View getView(final int position, View convertView, ViewGroup parent) 
    {

      final  ViewHolder holder;

        if (convertView == null) 
        {
            convertView = inflater.inflate(R.layout.selecteditemlistview, null);
            holder = new ViewHolder();

            holder.textViewSelectedText = (TextView)convertView.findViewById(R.id.selectedtext);
            holder.price=(TextView)convertView.findViewById(R.id.selectitemprice);
            holder.image=(ImageView)convertView.findViewById(R.id.selectitemimage);
            holder.qty=(EditText)convertView.findViewById(R.id.selectqty);
            holder.total=(TextView)convertView.findViewById(R.id.price);               
            holder.delete = (Button) convertView.findViewById(R.id.delete);

            holder.uncheck = (CheckBox)convertView.findViewById(R.id.bcheck);

            convertView.setTag(holder);
        }
        else 
        {
            holder = (ViewHolder) convertView.getTag();
        }
        String amount=holder.qty.getText().toString();
        final Double price1=Double.parseDouble(itemprice.get(position));
        int qut=Integer.parseInt(holder.qty.getText().toString());
        Double total=(price1*qut);
        holder.textViewSelectedText.setText(arr1.get(position));
        holder.price.setText(itemprice.get(position));
        holder.image.setImageBitmap(itemimage.get(position));
        holder.total.setText(String.valueOf(total));

        holder.delete.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                 arr1.remove(position);
                 itemimage.remove(position);
                 itemprice.remove(position);
               //  holder.uncheck.setChecked(false);
                 View parent = (View)v.getParent(); 
                 CheckBox chkBox = (CheckBox)parent.findViewById(R.id.bcheck); 
                 if ((holder.arr1==true)&&(holder.uncheck.isChecked()))
                     {holder.uncheck.setChecked(false);
                     }
                 notifyDataSetChanged();

            }

        });

      holder.qty.setOnFocusChangeListener(new OnFocusChangeListener() {

        public void onFocusChange(View v, boolean hasFocus) {
            // TODO Auto-generated method stub
            if(!hasFocus)
            {

                 int position = v.getId();      
                final EditText Caption = (EditText) v;
                Caption.setFocusable(true); 
                holder.qty.setFocusable(true);
                int q=Integer.parseInt(holder.qty.getText().toString());
                Double result=(price1 * q);
                System.out.println(result);              
                holder.total.setText(String.valueOf(result));
                                }
        }
    });

        return convertView;     
    }

    class ViewHolder      
    {
         protected boolean arr1;
        public CheckBox uncheck;
        public Button delete;
         public TextView mTextView;

        TextView textViewSelectedText = null;
        TextView price=null;
        ImageView image=null;      
        EditText qty=null;
        TextView total=null;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:13:29.613

我知道的解决方案是手动的。您必须将所选项目的列表传递给您的 ListView。

**你的主要活动**

```
Intent intent = new Intent(this, YourListViewActivity.class);
// parcelables or a List of indexes (your choice but I prefer Parcelables)
// I assume that you have your selection stored in a List to work with it
// make SomeKey as a constant
intent.putParcelableArrayListExtra("SomeKey", listOfYourObjectsAsParcelables);
startActivityForResult(intent, requestCode); 
```

**选择活动**- 假设它扩展了 ListActivity

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // load selection from the intent
    List<YourParcelableObject> parcelables = getIntent().getParcelableArrayListExtra("SomeKey");

    if (parcelables != null) {
        // convert to YourObject
        List<YourObject> selectedObjects = convert(parcelables);

        // iterate over the list and check items        
        for (int i = 0; i < getListView().getAdapter().getCount(); i++) {
            YourObject object = (YourObject) getListView().getAdapter().getItem(i);
            if (selectedObjects.contains(object)) {
                getListView().setItemChecked(i, true);
            }
        }
    } 
} 
```

请注意，这只是一个片段，我没有对其进行测试，但它应该给你一个想法。

# c# - 通过单独的线程在表单上绘图

> ID：10714358
> 
> 赞同：2
> 
> 时间：2012-05-23T06:07:24.697
> 
> 标签：c#, winforms, multithreading

我正在尝试构建一个多线程游戏，其中我有一个单独的线程用于在不是主线程的表单上绘画。这给我们带来了线程安全技术，我已经阅读了很多文章，但我不确定我是否正确理解了它。

我的问题是我有一个结构，其中每个数据对象都在表单上自行绘制，所以我不知道如何实现它。

这是我工作的单线程代码的片段：

```
public partial class Form1 : Form
{
    GameEngine Engine;
    public Form1()
    {
        InitializeComponent();
        Engine = new GameEngine();
    }
    protected override void OnPaint(PaintEventArgs e)
    {
        Engine.Draw(e.Graphics);
    } 
```

}

```
class GameEngine
{

    Maze Map;
    List<Player> Players;

    public void Draw(Graphics graphics)
    {
            Map.Draw(graphics);
            foreach (var p in Players)
            {
                p.Draw(graphics);
            }
    } 
```

}

所以请任何人都可以给我一个提示或链接到好文章，帮助我学习如何在另一个线程上分离绘图？

[编辑]

我设法实现了我打算做的事情，这就是我编码的方式

```
 protected override void OnPaint(PaintEventArgs e)
    {
        formGraphics = e.Graphics;
        DisplayThread = new Thread(new ThreadStart(Draw));
        DisplayThread.Start();
    }

    private void Draw()
    {
        if (this.InvokeRequired)
        {
            this.Invoke(new DrawDelegate(this.Draw));
        }
        else
        {
            Engine.Draw(formGraphics);
        }
    } 
```

但我得到了一个 ArgumentException：参数无效

请您指出该代码中的错误

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T11:15:43.117

我认为您需要绘制位图，然后在 OnPaint 方法中将该位图绘制到窗口。我稍后会演示。

正如汉斯指出的那样，在您设置的 OnPaint 方法中

```
formGraphics = e.Graphics; 
```

但是在方法 e.Graphics 结束时，如果你的代码必须使用它，你就不能再使用它了

```
Engine.Draw(formGraphics); 
```

你会得到一个例外。

所以基本上你需要有一个全球性的

```
Bitmap buffer = new Bitmap(this.Width, this.Height) 
```

在您的异步线程中，您将调用您的绘图到您可以使用的位图

```
Graphics g=Graphics.FromBitmap(buffer);// 
```

要获取图形对象，但请记住您必须

```
g.Dispose() 
```

它或将其包裹在

```
using (Graphics g=Graphics.FromBitmap(buffer))
{
//do something here

} 
```

我要玩一会儿，看看能不能给你一个工作样本

**编辑** 这是你的工作样本。我开始了一个新表格并在上面扔了一个按钮。我将主窗体背景图像布局更改为无。

我认为您需要使用 .net 4.0 或更高版本，如果不使用此版本，请告诉我，我可以更改它以匹配您的版本……我想。

```
//you need this line to use the tasks
using System.Threading.Tasks;

namespace WindowsFormsApplication1
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    public void Draw()
    {
        Bitmap buffer;
        buffer = new Bitmap(this.Width, this.Height);
        //start an async task
        Task.Factory.StartNew( () =>
        {
                using (Graphics g =Graphics.FromImage(buffer))
                {
                    g.DrawRectangle(Pens.Red, 0, 0, 200, 400);
                    //do your drawing routines here
                }
            //invoke an action against the main thread to draw the buffer to the background image of the main form.
            this.Invoke( new Action(() =>
            {
                    this.BackgroundImage = buffer;
            }));
        });

    }

    private void button1_Click(object sender, EventArgs e)
    {
        //clicking this button starts the async draw method
        Draw();
    }

} 
```

}

# iphone - 如何在 iPhone 应用程序的 HTML 字符串中添加或连接字符串

> ID：10714363
> 
> 赞同：0
> 
> 时间：2012-05-23T06:07:55.290
> 
> 标签：iphone

我有 html 字符串，我想在 Web 视图中加载，但我希望有一些值作为结果得到，所以我想在运行时将它们添加到其中

我有一个字符串，我希望将此值添加到行中，以便它显示访问诊所的狗数？12个这样

```
 NSString*dogspermonth=12;

 Number of dogs that visit clinic? <br>

 NSString*htmlString=@"<HTML>
 <HEAD>
 <TITLE>JAMSHED ALI</TITLE>
 </HEAD>
<BODY background="InsideBackgroundPage2.png">
<H6><font color="white">Cerenia Motion Sickness<br>
Model</br>Report
<p>Inputs</p>
<br>
 Number of dogs that visit clinic? <br>
 Number of dogs with motion sickness <br>
 Dogs treated with (per year):      <br>

Cerenia <br>                                       
Other prescription drugs<br>
Other means<br>                            
Other the counter drugs<br>  
<p>
Average cost to client for Cerenia prescription<br>      
Clinic markup<br><br>

Average number of dogs treated for car sickness<br>
Total number of dogs treated for car sickness<br>
Dogs treated with Cerenia<br>
Dogs treated with other drugs or interventions<br>

<br>  
  Profit for each Cerenia prescription<br>
  Annual Profit earned from Cerenia treatment<br>
  Potential annual profit increase  from using Cerenia to treat all dogs with motion sickness<br>
 Maximum annual profit if all dogs with car sickness were treated with Cerenia<br>
</BODY>
 </head>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:24:22.453

首先

```
NSString*dogspermonth=12; //is wrong
NSString *dogspermonth=@"12"; //is correct if u want string else
NSInteger dogspermonth = 12; //will suffice 
```

接下来你可以使用 stringWithFormat 像：

```
NSString *htmlString= [NSString stringWithFormat:@"<HTML>
 <HEAD>
 <TITLE>JAMSHED ALI</TITLE>
 </HEAD>
<BODY background="InsideBackgroundPage2.png">
<H6><font color="white">Cerenia Motion Sickness<br>
Model</br>Report
<p>Inputs</p>
<br>
 Number of dogs that visit clinic? %@<br> //%@ if string //%d if integer
 Number of dogs with motion sickness <br>
 Dogs treated with (per year):      <br>

Cerenia <br>                                       
Other prescription drugs<br>
Other means<br>                            
Other the counter drugs<br>  
<p>
Average cost to client for Cerenia prescription<br>      
Clinic markup<br><br>

Average number of dogs treated for car sickness<br>
Total number of dogs treated for car sickness<br>
Dogs treated with Cerenia<br>
Dogs treated with other drugs or interventions<br>

<br>  
  Profit for each Cerenia prescription<br>
  Annual Profit earned from Cerenia treatment<br>
  Potential annual profit increase  from using Cerenia to treat all dogs with motion sickness<br>
 Maximum annual profit if all dogs with car sickness were treated with Cerenia<br>
</BODY>
 </head>", dogspermonth]; 
```

希望能帮助到你。快乐编码:)

# html - HTML5在拖动后记住div位置

> ID：10714364
> 
> 赞同：0
> 
> 时间：2012-05-23T06:07:56.787
> 
> 标签：html

我希望创建一个本地（离线）HTML5 页面，其中包含各种大小的矩形，其中包含一段文本（和链接），可以通过用户拖动来重新定位。没有必要将它们放入任何目标；只是为了拖动它们。但是页面必须*记住*它们的最终位置，并在重新打开时将它们显示在那里。

我确实想过使用 Canvas 来执行此操作，但在矩形中绘制文本非常慢。最好为每个段落创建一个 div（带边框）。到目前为止，我发现的最接近的解决方案是[这个](http://jsfiddle.net/robertc/kKuqH/ "这个")，其中一个将“放在一边”。原始页面在[这里](https://stackoverflow.com/questions/6230834/html5-drag-and-drop-anywhere-on-the-screen)。

我需要编写什么代码来*在本地*（离线）存储这些位置，最好是通过自我修改 HTML 页面本身？我知道 HTML5 中有 localStorage 和 sessionStorage 对象，但没有尝试使用它们。

PS 这个页面是我自己使用的，因为我使用的是 Firefox，所以我对其他浏览器不感兴趣。我更喜欢使用 Javascript 而不是 jQuery，但欢迎所有建议。

PS 在等待回复时，我偶然发现了[这个网站](http://blogupstairs.com/an-opensource-html5-mind-mapping-application-mindmaps/)：

> 使用 HTML5、CSS3 和 JavaScript 构建的图表是使用画布创建的，并且可以离线使用，这要归功于*ApplicationCache*。

这是要走的路吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:01:15.153

您可以将 div 信息（位置和宽度，（最终也是高度））保存到本地存储中。当您重新加载页面时，您只需将它们从本地存储中取出以重新呈现整个内容。

[jStorage](http://www.jstorage.info/ "j存储")是一个简单的插件，您可以在其中与本地存储“对话”。您可以将一个对象（序列化）存储到其中，然后在页面加载时将其循环出来。

# java - JBoss ESB - 如何为文件系统提供程序提供多个输入文件夹

> ID：10714366
> 
> 赞同：0
> 
> 时间：2012-05-23T06:07:59.670
> 
> 标签：java, jakarta-ee, jboss5.x, esb, jboss-esb

我正在为我的应用程序使用 Jboss ESB。我想实现 ESB 来监听动态创建的输入文件夹，并在文件到来时执行业务逻辑。我在为 esb 创建动态输入文件夹时遇到了问题。我正在使用以下代码来配置文件系统提供程序。

```
<fs-message-filter
                directory="C:\Project_Root\Projects\FinESB\build\dirs\input"
                input-suffix=".XML"
                work-suffix=".esbWorking"
                post-delete="true"
                post-directory="C:\Project_Root\Projects\FinESB\build\dirs\output"
                post-suffix=".ACK" 
                error-delete="false"
                error-directory="C:\Project_Root\Projects\FinESB\build\dirs\error"
                error-suffix=".IN_ERROR"
            /> 
```

如果你有想法请回复我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T19:19:03.850

配置文件中的目录属性实际上不会导致在您的文件系统中创建目录，因此它不是“动态的”。JBoss ESB 假定这个目录已经被创建。如果您尝试部署目录不存在的 fs-provider，您将收到部署错误。

要为您的 fs-provider 配置多个目录，只需将另一个添加`<fs-bus>`到您的提供程序的配置中。

```
 <fs-provider name="MyFSProvider">
        <fs-bus busid="fileChannel1">
            <fs-message-filter directory="C:\fileIngestion\test1"
                error-delete="false" error-directory="C:\fileIngestion\error"
                input-suffix=".txt" post-delete="false" post-directory="C:\fileIngestion\complete" />

        </fs-bus>
        <fs-bus busid="fileChannel2">
            <fs-message-filter directory="C:\fileIngestion\test2"
                error-delete="false" error-directory="C:\fileIngestion\error"
                input-suffix=".txt" post-delete="false" post-directory="C:\fileIngestion\complete" />
        </fs-bus>
    </fs-provider> 
```

# java - 哪个字符串方法：“包含”或“indexOf > -1”？

> ID：10714376
> 
> 赞同：57
> 
> 时间：2012-05-23T06:08:50.390
> 
> 标签：java, string, substring

以下哪种方法是确定子串包含的有效方法？

```
if (str.indexOf("/") > -1) 
```

或者

```
if (str.contains("/")) 
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-05-23T06:11:47.733

看看[`java.lang.String`](http://www.docjar.com/html/api/java/lang/String.java.html)源代码。该`contains`方法是使用对 的调用来实现的`indexOf`，因此它们本质上是相同的。

```
public boolean contains(CharSequence s) {
    return indexOf(s.toString()) > -1;
} 
```

您应该使用使您的代码更具可读性的任何方法。如果要检查字符串是否包含特定子字符串，请使用`contains`. 如果您正在寻找子字符串的起始索引，请使用`indexOf`.

* * *

## 编辑：

有几个答案提到`indexOf`应该优先考虑，`contains`因为它`contains`会进行额外的方法调用，因此效率较低。**这是错误的。**在这种情况下，由额外的方法调用引起的开销完全是微不足道的。使用在您的实施环境中最有意义的任何方法。这将使您的代码更具可读性。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2016-01-22T21:23:37.607

我想我会对这个问题采取经验方法，而不是猜测额外方法调用的开销将如何影响结果。我`indexOf`从[这个答案](https://stackoverflow.com/a/33907329/75113)中获取了基准，并添加了两种基准方法`contains()`（一种采用字符串常量，另一种采用变量）。我正在使用在 Windows x64 上运行的刚刚发布的 1.8.0_71。

```
# JMH 1.11.3 (released 8 days ago)
# VM version: JDK 1.8.0_71, VM 25.71-b15

Benchmark                           Mode  Cnt   Score   Error  Units
IndexOfTest.containsString          avgt   30  26.596 ± 0.099  ns/op
IndexOfTest.containsStringIndirect  avgt   30  28.683 ± 0.088  ns/op
IndexOfTest.indexOfChar             avgt   30  26.855 ± 0.171  ns/op
IndexOfTest.indexOfCharIndirect     avgt   30  25.833 ± 0.116  ns/op
IndexOfTest.indexOfString           avgt   30  26.192 ± 0.107  ns/op
IndexOfTest.indexOfStringIndirect   avgt   30  27.547 ± 0.152  ns/op 
```

请注意，基准测量是每次操作的纳秒。因此比较 contains("z") 与 indexOf("z")，indexOf() 稍微快一点，但不到 0.6ns。有趣的是，间接（使用变量）的差异较大，略高于 1ns。

我已将此基准测试的代码放在 GitHub 上：[https ://github.com/tedyoung/indexof-contains-benchmark](https://github.com/tedyoung/indexof-contains-benchmark)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-23T06:17:30.793

如果目标是确定一个字符串是否包含另一个字符串，那么`contains()`显然是赢家。这将使其他开发人员更有效地理解您的意图。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-23T06:10:16.617

基本上两者是一样的，

```
public boolean contains(CharSequence s) {
    return indexOf(s.toString()) > -1;
} 
```

但是如果你想通过索引做一些事情，你可以使用`indexOf`.

我相信`indexOf`会更有效率，但差异可以忽略。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-23T06:10:28.300

这些方法有不同的用途，如果您需要检查 String 是否包含某些内容，则使用 contains，但如果您想知道它最终包含在 String 中的哪个位置，请使用 indexOf 方法。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-07-18T10:17:50.357

虽然 using`str.contains("/")`显然更具可读性，但使用`str.indexOf('/') > -1`. 请注意，我在 indexOf 调用中使用字符而不是字符串。

但这在性能方面并不重要，除非您处于非常紧凑的循环中。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-07-04T15:51:30.360

最近我遇到了这个问题`indexOf()`：当试图找出**一个字符串是否包含空格**以用其他东西替换它们时，IndexOf 的答案是：**字符串没有空格**，这是错误的答案。当替换`Contains()` **为正确的答案时**。去算一下，因为正如一些人所说的在这里，`Contains()`发布一个电话到`IndexOf`.

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-10-15T15:35:49.090

对于单字符搜索，例如您的示例，如果 indexOf**的参数是 char** ，则 indexOf 更有效：

```
if (str.indexOf('/') > -1) 
```

# ruby - 解析字符串中的字符并找到特定的html标签

> ID：10714385
> 
> 赞同：0
> 
> 时间：2012-05-23T06:09:05.540
> 
> 标签：ruby, parsing

我有这样的字符串：

```
sanitize_text = `"<b><i>this is the bold text</i></b><i>this is the italic</i>"` 
```

我的问题是：

1.  解析字符串中的字符并找到特定的 html 标记`('<b>','<i>' ...)`，然后在 text 之间应用属性。

2.  需要为每个文本应用属性。

我正在接近这样：

```
sanitize_arr = sanitize_text.scan(/\D\d*/)

santize_arr.each_with_index do |char, index|
  if character is new start tag == '<b>'
    Then for next characters till '</b>' I will apply some bold properties .    
  end
  if character is new start tag == '<i>'
    Then for next characters till '</i>' I will apply some italic properties .
  end
end 
```

只是想知道我是否朝着正确的方向接近，或者是否有更好的解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:03:42.380

如果我错了，请纠正我。您想在文本中查找特定的 html 标签并对其进行一些操作吗？你试过[Nokogiri gem](http://nokogiri.org/Nokogiri.html)吗？

并做这样的事情：

```
require 'nokogiri'
nokogiri_object=Nokogiri::HTML(sanitize_text)
bold_text=nokogiri_object.css('b').text
puts bold_text 
```

输出 `"this is the bold text"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:08:49.413

是的，我已经做到了，例如：

```
santize_text = "<b><u>this</u></b><i><p>this is the italic text</p></i>"

santize_arr = santize_text.scan(/\D\d*/)
char_array , html_tag_array = [], []
continue_insert_char_array, continue_insert_arr2 = false,false
santize_arr.each_with_index do |char, index|
  #To check new start tag
  continue_insert_char_array = true if char=='<' && santize_arr[index+1]!='/'
  if continue_insert_char_array
    char_array << char
    if char=='>' && continue_insert_char_array
      continue_insert_char_array = false
      html_tag_array << char_array.join
      char_array = []
    end
    next
  end

  #To check new end tag
  continue_insert_arr2 = true if char=='<' && santize_arr[index+1]=='/'
  if continue_insert_arr2
    char_array << char
    if char=='>' && continue_insert_arr2
      continue_insert_arr2 = false
      html_tag_array.delete(char_array.join.gsub('/', ""))
      char_array = []
    end
    next
  end

  # Apply the property on the character
  "Bold Char" if html_tag_array.include?("<b>")
  "Italic Char" if html_tag_array.include?("<i>")
end 
```

请让我知道是否有任何更改以使其更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T07:00:27.553

您可以编写自己的 XML Parser.. 不认真！查看[Parslet Infact](http://kschiess.github.com/parslet/) ，它附带的示例包括[XML Parser](https://github.com/kschiess/parslet/blob/master/example/simple_xml.rb)

像这样的东西：

```
require 'parslet'

class XML < Parslet::Parser
  root :document

  rule(:document)   { (formatting | text).repeat(1) }  
  rule(:formatting) { tag_pair('b').as(:bold) | tag_pair('u').as(:underline) | tag_pair('i').as(:italic) } 

  def tag(type)
     str('<') >> str(type) >> str('>')
  end

  def tag_pair(type)
    tag(type) >> document.maybe >> tag("/" + type)
  end

  rule(:text) {
    match('[^<>]').repeat(1).as(:text)
  }
end

 parser = XML.new
 input = ARGV[0]

 require 'parslet/convenience'
 puts parser.parse_with_debug(input).inspect 
```

产生这样的东西......

```
> ruby xmlparser.rb "<b>bold<i>italic</i> bold again <u>underlined</u></b>" 
```

[{:bold=>[{:text=>"bold"@3}, {:italic=>[{:text=>"italic"@10}]}, {:text=>" 再次加粗"@21 }, {:underline=>[{:text=>"underlined"@36}]}]}]

如您所见，此树具有粗斜体等样式节点以及其中的内容。

它可以很容易地扩展到处理空白，并处理您关心的其他标签。处理你不关心的标签有点困难。

无论如何..只是展示了可能性。

使用 Parslet，您通常会编写一个 Transform 类来将此树结构转换为您最终希望做的事情。我喜欢 Parslet 将解析从使用解析的数据中分离出来的方式。

希望这可以帮助。

# iphone - 如何在 iPhone 的选取器选定行中显示文本字段值？

> ID：10714386
> 
> 赞同：0
> 
> 时间：2012-05-23T06:09:23.573
> 
> 标签：iphone, objective-c

我有一个应用程序，其中有一个pickerview。在那个选择器中，我显示从 1 到 100 的值。当我在选择器中选择一个值时说 2，该值显示在文本字段中。我希望如果我的文本字段包含值说 5，那么值特定值应该显示在我的选择器中。

现在的问题是，当在文本字段中显示 5 时，我转到 pickerview，默认情况下每次选择 1 时它都会显示，而与 texfield 中的值无关。我希望文本字段中存在的值也应该显示在pickerview上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:35:58.243

使用下面的代码它会帮助你

```
[picker selectRow:[yourTxtObj.text intValue]-1 inComponent:0 animated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:37:45.083

```
[yourPickerViewName selectRow:[textfield.text intValue] inComponent:yourComponent animated:YES] 
```

这将起作用。它用于在选择器中选择一行。

# c# - c#中每一列的asp.net柱形图着色

> ID：10714387
> 
> 赞同：0
> 
> 时间：2012-05-23T06:09:24.527
> 
> 标签：c#, asp.net, colors, charts

我第一次在 asp.net 网站中使用 c#，我正在其中创建图表。我创建了一个柱形图 - 2D，代码是这样的，

```
protected void chrtTickets_Load(object sender, EventArgs e)
        {
            using (SqlConnection connection = new SqlConnection(ConnectionString))
            {

                connection.Open();

                SqlCommand cmmd6 = new SqlCommand("getHowTicketsLoggedChart", connection);
                cmmd6.CommandType = CommandType.StoredProcedure;

                DataSet ds1 = new DataSet();

                SqlDataAdapter dad = new SqlDataAdapter(cmmd6);

                dad.Fill(ds1);

                chrtTickets.DataSource = ds1;

                chrtTickets.Series["Series1"].XValueMember = "MonYYYY";

                chrtTickets.Series["Series1"].YValueMembers = "aa";

                chrtTickets.DataBind();
                connection.Close();

            }
        } 
```

但我有一个存储过程，它返回另一个字段“描述”以及 MonYYYy 和 aa，因为它们在 xaxis 和 yaxis 中使用。

但根据“描述”字段值说：电子邮件、电话、门户。我想根据每一行的描述值为每一列分配不同的颜色，如果它的电子邮件-> 红色等等。

谁能指导我完成这个？

我的意思是我的数据将是这样的：所以我不会提前知道颜色类型值是什么，这是我的存储过程从 db 返回给我的表值。

颜色类型| y 轴值 | x轴

* * *

电子邮件连接器| 24| 2011 年 12 月 电话 | 32 | 2011 年 12 月电子邮件连接器 |643 | 2012 年 1 月 内部 | 32 | 2012 年 1 月 电话 |455| 2012 年 1 月 门户 |2 | 2012年1月销售订单| 2| 2012 年 1 月

它冷是 5 种类型之一。电子邮件、门户网站，但许多 x 轴值。

数据点将不为人知。它们是动态的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:22:57.193

你可以试试这个它应该随机选择下一个栏的颜色

```
Color[] colors = new Color[] { Color.Red, Color.Green, Color.Wheat, Color.Gray. Color.Black,  Color.Blue};
foreach (Series series in chrtTickets.Series)
{
    foreach (DataPoint point in series.Points)
    {
        Random random = new Random();
        int randomNumber = random.Next(0, 5);
        point.LabelBackColor = colors[ randomNumber];
    }
} 
```

这是主要文章[http://forums.asp.net/t/1652369.aspx/1](http://forums.asp.net/t/1652369.aspx/1)

# visual-studio-2010 - 如何使用 MSBuild 更改嵌入式资源的默认命名空间？

> ID：10714389
> 
> 赞同：11
> 
> 时间：2012-05-23T06:09:36.337
> 
> 标签：visual-studio-2010, msbuild, embedded-resource

我试图在我的控制台项目中嵌入一个非托管 dll。项目的默认命名空间是`Company.Project1Exe`. 程序集名称（输出 exe ）被命名为`project1.exe`

使用该`Add as Link`选项将 dll 添加到项目中，并位于`Libs\x86`子文件夹中

```
Company.Project1Exe
   |
   |--Program.cs
   |--Libs
       |--x86
           |-My1st.dll
           |-My2nd.dll 
```

它们已使用该`Add as Link`选项添加到项目中，因此实际上不在`Libs`子文件夹中。

我已将这两个 dll 的构建操作设置为“嵌入式资源”。

默认情况下，MSBuild 将使用代表项目目录结构的`DefaultNamspace.ExtendedNamespace.FileName`where嵌入这些 dll。`ExtendedNamespace`

这导致资源被分别嵌入`Company.Project1.Libs.x86.My1st.dll`和嵌入`Company.Project1.Libs.x86.My2nd.dll`。

我希望使用程序集名称嵌入这些资源，以便它们分别嵌入`Project1.Libs.x86.My1st.dll`和嵌入`Project1.Libs.x86.My2nd.dll`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-23T06:09:38.413

可以解决此问题的一种方法是设置`LogicalName`嵌入资源的 。默认情况下，当你嵌入资源时，你会在你的 csproj 文件中找到一个类似于

```
<EmbeddedResource Include="path to embdedded resource"/> 
```

对于使用 添加的资源`Add as Link`，您会发现一个附加`Link`属性。在这种情况下，`Link`属性是资源相对于项目结构的路径，`Include`属性是指向计算机上文件位置（相对于项目）的指向。

```
<EmbeddedResource Include="path to embdedded resource"/>
  <Link>Libs\x86\My1st.dll</Link>
</EmbeddedResource> 
```

为了使用不同的命名空间嵌入程序集，`LogicalName`可以将属性添加到上面，它允许覆盖默认的 msbuild 行为。

```
<EmbeddedResource Include="path to embdedded resource"/>
  <Link>Libs\x86\My1st.dll</Link>
  <LogicalName>$(TargetName).Libs.x86.My1st.dll</LogicalName>
</EmbeddedResource> 
```

不利的一面是，需要为添加的每个资源执行此操作。但是，我更希望以某种方式设置此约定，以便这可以成为在我的项目中嵌入任何资源的默认方式，即使用`$(TargetName)`作为默认命名空间的替代品

# regex - 我需要正则表达式

> ID：10714390
> 
> 赞同：-6
> 
> 时间：2012-05-23T06:09:38.333
> 
> 标签：regex

我需要一个正则表达式，它可以检测 5 次连续出现的任何数字或字符，如下例所示：

A11111C2 – 无效 AAAAAAA21 – 无效 12AXXXXX – 无效 GGGG112 – 有效

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T06:12:58.253

您可以用 . 匹配五个连续的字符`(.)\1\1\1\1`。所以`.*(.)\1\1\1\1.*`匹配你所有的无效案例。

这`\1`是一个反向引用，所以它只匹配*第一*组`(.)`匹配的内容。

# php - 带有while循环的函数php

> ID：10714394
> 
> 赞同：3
> 
> 时间：2012-05-23T06:09:51.543
> 
> 标签：php, function

您好，我正在尝试在 php 中使用 while 循环创建函数，但无法在这里编写是我的代码

```
 function mail_detail($mail_detail){

    $data= mysql_query("select * from messages where messages.to = '$mail_detail' and to_viewed = 0 ORDER BY messages.id DESC");
    while ($result= mysql_fetch_array($data)){
    return $result;
    }

} 
```

输出是

```
$mail_detail= mail_detail($userid)
echo '<li class="read">

               <a href="#">
                 <span class="message">'. $mail_detail['title'].'</span>
                    <span class="time">
                       January 21, 2012
                   </span>
                                </a>
        </li>'; 
```

我没有得到所有的值，只是得到一个值，请帮助 thx

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T06:12:24.100

该`return`语句正在终止您的循环并退出该函数。

要获取所有值，请将它们添加到循环中的数组中，然后返回该数组。像这样：

```
$results = array();

while ($result = mysql_fetch_array($data)) {
    $results[] = $result;   
}

return $results; 
```

在接收阵列的一侧

```
$msgArray = mail_detail($mail_detail);

foreach($msgArray as $msg) {
    //use $msg
} 
```

另外，一个函数只能返回一次（除了一些你不应该担心的特殊情况）。因此，当您的函数第一次遇到 return 语句时，它会返回值并退出。

这个功能`return`通常可以为您所用。例如：

```
function doSomething($code = NULL) 
{
    if ($code === NULL) {
        return false;
    }

    //any code below this comment will only be reached if $code is not null
    // if it is null, the above returns statement will prevent control from reaching 
    // this point

    writeToDb($code);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:15:08.053

```
function mail_detail($mail_detail){
    $returnArr = array();
    $data= mysql_query("select * from messages where messages.to = '$mail_detail' and to_viewed = 0 ORDER BY messages.id DESC");
    while ($result= mysql_fetch_array($data)){
        $returnArr[] = $result;
    }
    return $returnArr;

} 
```

这样一来，您返回所有返回的内容，因为您将其推送到一个数组中，并且当您的循环完成时，将返回整个数组。因为就像 xbones 说的那样，return 会破坏你的循环！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:04:33.020

harinder，`Function(mysql_fetch_array($data))`返回一个数组。这意味着您`$result`是一个数组，因此当您收到`$result`at view 页面时，您必须使用`foreach`如下所示提取它：

```
foreach($result as $item)
 {
   echo $item->user(<-here you have to write the column name ,that you want to retrieve)
 } 
```

因此，您可以在数组中获得所有结果。

# mouseevent - 如何让greasemonkey在新标签中一一打开大量链接？

> ID：10714395
> 
> 赞同：3
> 
> 时间：2012-05-23T06:10:02.853
> 
> 标签：mouseevent, greasemonkey, tampermonkey

## 有一些链接看起来像上面

```
> <td><a href="http://Lucifase.com/pages/2000.php?refid=2000"
> target="_blank">2000</a><br></td> <td><a
> href="http://Lucifase.com/pages/3000.php?refid=3000"
> target="_blank">3000</a><br></td> <td><a
> href="http://Lucifase.com/pages/4000.php?refid=4000"
> target="_blank">4000</a><br></td> <td><a
> href="http://Lucifase.com/pages/5000.php?refid=5000"
> target="_blank">5000</a><br></td> <td><a
> href="http://Lucifase.com/pages/6000.php?refid=6000"
> target="_blank">6000</a><br></td> 
```

* * *

## 我停在第一步。我无法通过脚本触发器打开它们中的每一个。这是我到目前为止的：

```
 setTimeout(function() {
    var evt = document.createEvent("MouseEvents");
    evt.initMouseEvent("click", true, true, window,
                       0, 0, 0, 0, 0,
                       false, false, false, false,
                       0, null);
 var links = document.getElementsByTagName('a');
             if(links.href.search('refid') >= 0)

    links.dispatchEvent(evt);
 }, 1000); 
```

* * *

但它不起作用，也不知道如何让它们在新标签中一一打开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T21:13:00.337

一一是什么意思？似乎一次“单击”所有链接可以吗？

使用链接时，必须遵循`href`而不是尝试发送点击事件。以下代码应该只打开您想要的选项卡：

```
var linksToOpen = document.querySelectorAll ("td > a[href*='refid']");
for (var J = 0, numLinks = linksToOpen.length;  J < numLinks;  ++J) {
    window.open (linksToOpen[J].href, '_blank');
} 
```

* * *

* * *

**OP 澄清更新：**
打开每个链接之间有延迟的链接稍微复杂一些。像这样的代码会做到这一点：

```
var linksToOpen = document.querySelectorAll ("td > a[href*='refid']");

//--- linksToOpen is a NodeList, we want an array of links...
var linksArray  = [];
for (var J = 0, numLinks = linksToOpen.length;  J < numLinks;  ++J) {
    linksArray.push (linksToOpen[J].href);
}

openLinksOnDelay (linksArray);

function openLinksOnDelay (linkArray) {
    //--- Pop the first link off the array...
    var linkToOpen  = linkArray.shift ();
    if (linkToOpen)
        window.open (linkToOpen, '_blank');

    //--- Open the next of the remaining links after a delay.
    if (linkArray.length) {
        setTimeout ( function() {
                openLinksOnDelay (linkArray);
            },
            1000    //--- 1 second.  Use 60000 for 1 minute.
        );
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:21:28.283

是否需要单击鼠标或可以打开链接：

```
for(i=0;i<document.links.length;i++) {
  if(document.links[i].target != "_blank"){
     window.open(
       document.links[i].href,
       '_blank'
     );
  }
} 
```

# programming-languages - 我应该学习一门新的编程语言吗？

> ID：10714399
> 
> 赞同：0
> 
> 时间：2012-05-23T06:10:19.130
> 
> 标签：programming-languages

我已经处理并使用过 JavaScript，并且对它非常满意。但是我想知道我是否应该学习另一个。是否还有另一种语言在商业行业中使用更广泛或使用更多？你还能推荐一本好书吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:25:32.320

> **你应该学习一门新的编程语言吗？**

是的，你当然应该。

> **那是哪一个？**

我不知道。你为什么不选择一个与你的专业相关的？或者与你所知道的完全不同的东西。

> **哪本书是最好的？**

去图书馆或书店。翻几本书。最有可能的是，其中一本书就足够了。但是没有什么比学习在网上查找 API 参考更好的了。

* * *

**编辑：**评论中的问题：

> **最流行和使用最广泛的是什么？**

You can use the [TIOBE Community Index](http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html) to look up popular programming languages. However, you shouldn't use that as a deciding factor as things may differ locally to you. I've never done C professionally (which is apparently the most "popular" language according to TIOBE), so it all depends on what you want to do.

# android - android中的音频强度

> ID：10714401
> 
> 赞同：0
> 
> 时间：2012-05-23T06:10:39.003
> 
> 标签：android, speech-recognition

我创建了一个通过语音命令获取英语单词含义的应用程序。当用户给出语音手势时，我需要在他触摸的按钮上显示语音的强度以启动语音识别。我有 5 个不同的图标，我应该根据强度显示它。所以我应该找到语音强度的范围。那可能吗 ？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T07:57:54.763

如果信号以 PCM 格式编码，则强度是信号值的平均平方 (sum x^2 / n)。您只需要在 PCM 中记录一个信号并使用滑动窗口计算平均值。看

[http://developer.android.com/reference/android/media/AudioRecord.html](http://developer.android.com/reference/android/media/AudioRecord.html)

# java - 有没有办法使用来自另一台 PC 的 HTTP 运行和执行 Java 文件？

> ID：10714410
> 
> 赞同：0
> 
> 时间：2012-05-23T06:11:55.680
> 
> 标签：java, http, jar

我已经安装了 Java 并在我的笔记本电脑上进行了开发。现在我想使用 HTTP 从我的 PC 访问这些文件。两台机器都在同一个网络上。我想像在 PHP 中一样访问该页面：

> http:// 和路径

我该怎么做？我可以看到使用这个 url: 的文件`file://machine-name/login.html`，但它没有在 HTTP 中打开，从 url 替换文件。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:18:18.003

与 PHP 不同，在 Java 中，您只能提供 JSP 或 Servlet。您将需要一个应用程序服务器（如 Tomcat）来部署您的 Web 组件。打包 Web 组件的方式有很多种。通常，所有文件（JSP、Servlet、类）等都打包在一个“war”文件中。Thiw 战争文件可以部署到任何 Java 兼容的应用程序服务器。

试试这个 URL -[简单的 Tomcat 应用程序](http://keyboardsamurais.de/2004/01/15/tomcat_tutorial_helloworld_for_complete_fools_-_english/)

希望这可以帮助。

问候，斯里哈里。

# google-chrome-extension - 将本地存储传递给 contenscript

> ID：10714414
> 
> 赞同：0
> 
> 时间：2012-05-23T06:12:16.750
> 
> 标签：google-chrome-extension, local-storage, content-script

我正在开发一个 chrome 扩展程序，我想知道，
有没有办法将整个本地**存储**从**后台页面**传递给**contentscript**

 **[内容脚本和扩展页面之间的消息传递](http://code.google.com/chrome/extensions/messaging.html)

这样我就可以使用内容脚本中本地存储的所有键/值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:40:54.970

从后台页面发送：

```
sendResponse({all_lS: JSON.stringify(localStorage)); 
```

在内容脚本中：

```
var lS =  JSON.parse(response.all_lS); 
```

它将是您的 localStorage 的副本。**

# facebook-graph-api - 使用 Python facebook SDK 发布 Open Graph 操作

> ID：10714417
> 
> 赞同：1
> 
> 时间：2012-05-23T06:12:19.907
> 
> 标签：facebook-graph-api

我可以使用 Facebook Python SDK 发布打开图形操作吗？由于 python facebook SDK 现在已经很老了，我怎么能用它来发布一个开放的图形动作——我在任何地方都找不到一个例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T10:08:53.150

您可以使用`GraphAPI.request(self, path, args=None, post_args=None)`Python for Facebook 3rd 方库 (http://www.pythonforfacebook.com/) 中的函数。只需按照 Facebook 开发人员站点上的文档构建`path`，`args`并`post_args`需要进行 API 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T14:21:23.387

使用 pip 中的 facebook-sdk 包，您可以使用 put_object 调用发布操作

```
facebook.GraphAPI(token).put_object("me", "my_app:my_action", "my_object_type"="http://my_objects_url") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-17T01:57:45.317

你可以使用[https://github.com/zetahernandez/facebook-python-sdk](https://github.com/zetahernandez/facebook-python-sdk) 它支持做简单的请求，比如

```
facebook = Facebook(
    app_id='{app_id}',
    app_secret='{app_secret}',
    default_graph_version='v2.5',
)

facebook.set_default_access_token(access_token='{access_token}')

try:
    response = facebook.get(endpoint='/me?fields=id,name')
except FacebookResponseException as e:
    print e.message
else:
    print 'User name: %(name)s' % {'name': response.json_body.get('id')} 
```

或批量请求

```
facebook = Facebook(
    app_id='{app_id}',
    app_secret='{app_secret}',
)

facebook.set_default_access_token(access_token='{access_token}')

batch = {
    'photo-one': facebook.request(
        endpoint='/me/photos',
        params={
            'message': 'Foo photo.',
            'source': facebook.file_to_upload('path/to/foo.jpg'),
        },
    ),
    'photo-two': facebook.request(
        endpoint='/me/photos',
        params={
            'message': 'Bar photo.',
            'source': facebook.file_to_upload('path/to/bar.jpg'),
        },
    ),
    'photo-three': facebook.request(
        endpoint='/me/photos',
        params={
            'message': 'Other photo.',
            'source': facebook.file_to_upload('path/to/other.jpg'),
        },
    )
}

try:
    responses = facebook.send_batch_request(requests=batch)
except FacebookResponseException as e:
    print e.message 
```

# java - 带有 java 连接的 Twitter 请求失败

> ID：10714420
> 
> 赞同：0
> 
> 时间：2012-05-23T06:12:24.043
> 
> 标签：java, twitter

我可以使用 cURL 毫无问题地提取用户的状态，但是当我使用 Java 连接时，xml 会被截断，我的解析器想哭。我正在用小用户进行测试，所以它不会阻塞数据或任何东西。

```
public void getRuserHx(){
 System.out.println("Getting user status history...");

 String https_url = "https://twitter.com/statuses/user_timeline/" + idS.rootUser + ".xml?count=100&page=[1-32]";
 URL url;
 try {    
     url = new URL(https_url);
     HttpsURLConnection con = (HttpsURLConnection)url.openConnection(); 
     con.setRequestMethod("GET");
     con.setReadTimeout(15*1000);

     //dump all the content into an xml file
     print_content(con);

 } 
 catch (MalformedURLException e) {
     e.printStackTrace();
 } 
 catch (IOException e) {
     e.printStackTrace();
 }

 System.out.println("Finished downloading user status history."); 
```

}

```
private void print_content(HttpsURLConnection con){
    if(con!=null){

    try {           
       BufferedReader br = new BufferedReader(new InputStreamReader(con.getInputStream()));

          File userHx = new File("/" + idS.rootUser + "Hx.xml");
          PrintWriter out = new PrintWriter(idS.hoopoeData + userHx);

           String input;        
           while ((input = br.readLine()) != null){
           out.println(input);
           }

       br.close();  
    } 
    catch (IOException e) {
       e.printStackTrace();
    }

} 
```

此请求不需要身份验证。对不起我丑陋的代码。我的教授说输入无关紧要，所以我的 I/O 是个火车事故。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:33:41.990

写出内容时必须刷新输出流。您是否刷新或关闭了输出流？

# iphone - 如何通过我的 iPhone 应用程序中的 whatsapp 发送图像？

> ID：10714422
> 
> 赞同：0
> 
> 时间：2012-05-23T06:12:24.660
> 
> 标签：iphone, image, camera

我正在为 iPhone 编写一个相机应用程序，我想通过 Whatsapp Messenger 发送编辑后的图像。

如何通过我自己的应用程序中的 whatsapp Messenger 发送图像？

# c# - 使用运行时类型（在 c# 中）进行逻辑流

> ID：10714427
> 
> 赞同：2
> 
> 时间：2012-05-23T06:12:45.253
> 
> 标签：c#, .net, oop

这个问题类似于这个问题的（一个子集[）](https://stackoverflow.com/questions/447947/is-type-checking-ever-ok)

在这种情况下，它使用运行时类型来区分成功和失败返回的结果。

我经常看到以下模式：

```
public struct Result {
    public boolean IsSuccess { get;set;}
    public string ErrorMessage {get;set;}
    public int Value {get;set;}
}
...
Result result = someObject.SomeMethod();
if (result.IsSuccess) DoSomething(result.Value);
else handleError(result.ErrorMessage); 
```

我认为以下更自然，并且更清楚地表达了意图（在我看来）：

```
public abstract class Result { }
public sealed class Failure : Result {
    public string ErrorMessage { get; set; }
}
public sealed class Success : Result {
    public int Value { get; set; }
}
...
Result result = someObject.SomeMethod();
if (result is Success) DoSomething((result as Success).Value);
else if (result is Failure) handleError((result as Failure).ErrorMessage); 
```

另请注意，.Net（和许多其他语言）在带有多个 catch 子句的 try-catch 块中使用此模式（其中异常类型选择一个 catch 块）。

**编辑：**这种模式（即依赖运行时类型）与 F# 的可区分联合相同，不同之处在于在 F# 中它是本机的，而在 C# 中它是使用用于不同目的的构造来模拟的。

**编辑：**我认为我的第一个代码的主要问题是代码气味“部分初始化的对象”。在 100% 的情况下，只有一半的对象会被初始化。它也*几乎*违反了 ISP，“几乎”因为一旦 .IsSuccess 被评估，以后只会使用对象的一部分（如果成功，则仅使用 .Result，如果是错误 - 仅使用错误属性）。运行类型检查解决方案没有这些问题。

**所以问题是：**使用这种模式有什么问题？我对以下几个方面的问题特别感兴趣：可维护性、可读性、可测试性、概念纯度和 OOP/OOD。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T06:17:32.060

作为一般规则，我更喜欢第一种形式。

第二个示例需要更多击键并添加 4 种类型检查操作。这对消费者来说也不太明显（你不能混淆`IsSuccess`属性的含义）。仅仅为了确定操作的结果而必须执行类型转换似乎不太合乎逻辑（似乎类似于对程序流使用异常；您*可以*这样做，但您不应该这样做）。

此外，第一种形式可以用作描述数据的独立于平台的机制。第二个不能。换句话说，您可以轻松地序列化由原语组成的结果类型并与任何消费者共享，但需要类型检查限制/消除这种可能性。

为了提高`Result`对象的质量，您可以创建一个`Messages`集合，其中包含的不仅仅是一个字符串（可能包括代码、严重性、消息等）。这允许您的所有结果返回消息，而不仅仅是失败的操作。如果操作失败，您可能会假设它`Messages`至少包含一条错误消息（和/或使用 LINQ 查询集合以查找所有与错误相关的消息）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T16:43:19.597

第二种形式错误的学术原因如下：

C# 作为一种 OO 语言，其设计假设*类*将用于对底层系统的*类别*（例如业务概念）进行建模，而*实例*将用于对事实进行建模。

使用*类*对事实建模是对工具的滥用。

虽然我仍然不知道实际的后果是什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-10T17:48:30.087

面向对象的设计对一次性信息并不重要。这个结果对象的生命周期非常有限，因此属于堆栈上的结构。

如果您想谈论维护/可读性，那么人们最初会对此代码感到困惑。

如果您想在错误传播上采用面向对象的方式，那么纯粹使用异常（尽管这会稍微降低这些用例的性能）。

# c# - 来自数据库格式的带有 Eval 的日期格式

> ID：10714429
> 
> 赞同：0
> 
> 时间：2012-05-23T06:12:49.403
> 
> 标签：c#, .net

所以我想要一个像这样 27/7 格式的日期。我的代码看起来像这样

```
<%# Eval("WStartDate", "{0:d/M}" ) %> 
```

结果是一个看起来像这样的日期：27-7。

我怎样才能改变这个？我不想更改我的区域设置....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:18:05.720

```
<%# Eval("WStartDate", "{0:d'/'M}" ) %> 
```

之所以得到`-`而不是，`/`是因为该`/`字符在 DateTime 格式中具有特殊含义：它表示**当前**文化中的日期分隔符。如果要显示为文字，则应使用单引号对其进行转义：`'`。

* * *

更新：

根据您的评论，您似乎在 ASP.NET 服务器端标记内使用此 Eval 语句来设置某些属性，例如标签文本。在这种情况下，您可以将格式定义为单独的变量：

```
<script type="text/c#" runat="server">
    string format = "{0:d'/'M}";
</script> 
```

然后使用它：

```
<asp:Label 
    runat="server" 
    Text='<%# Eval("WStartDate", format) %>'
/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:16:29.603

我假设这是在某个网络服务器上。

您可以修改 web.config 以使用另一种文化。

请参阅[http://msdn.microsoft.com/en-us/library/hy4kkhe0.aspx](http://msdn.microsoft.com/en-us/library/hy4kkhe0.aspx)

# c# - 如何在 EditText 软键盘 windows 8 Metro Application 上隐藏？

> ID：10714431
> 
> 赞同：1
> 
> 时间：2012-05-23T06:12:59.777
> 
> 标签：c#, xaml, windows-8, windows-runtime, winrt-xaml

我使用 C# 在我的框架中有一个 EditText 和一个按钮。在编辑字段中写入并单击按钮后，我想隐藏虚拟软键盘。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T11:53:50.273

添加一个虚拟按钮并将焦点设置为它，键盘将被隐藏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-10T02:46:29.787

谢谢你的问题。我已经为这个问题找到了更好的解决方案。像这样

首先我们可以在 xaml 中添加处理程序

```
<Grid x:Name= Tapped="Grid_Tapped_1">
  ......
 </Grid > 
```

然后我们关注当前页面，如下所示。它运作良好。

```
private void Grid_Tapped_1(object sender, TappedRoutedEventArgs e)
        {
            this.Focus(FocusState.Programmatic);
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T18:22:48.127

你不能。有关于[Input Hosting Manager 和 Soft Keyboard](http://msdn.microsoft.com/en-us/library/windows/apps/hh465404.aspx)行为的更多信息，您可以[注册以了解它何时显示或隐藏](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.viewmanagement.inputpane.aspx)。但是，您无法以编程方式控制它是向上还是向下。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-02T20:13:23.683

当显示虚拟键盘的文本框将其属性 IsEnabled 设置为 false 时，虚拟键盘就会消失。之后我们可以立即将 is 设置为 true，虚拟键盘将保持隐藏状态。像这样：

```
MyTextBox.KeyDown += (s, a) => {
    if (a.Key == VirtualKey.Enter) {
        MyTextBox.IsEnabled = false;
        MyTextBox.IsEnabled = true;
    }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-25T18:34:07.247

尝试设置`IsReadOnly`Textbox` 的属性。

我正在做一些“类似”的事情

```
 private void textbox_input_LostFocus(object sender, RoutedEventArgs e)
    {
        textbox_input.IsReadOnly = false;
    }

    private void textbox_input_Tapped(object sender, TappedRoutedEventArgs e)
    {
        if(e.PointerDeviceType != Windows.Devices.Input.PointerDeviceType.Mouse)
            textbox_input.IsReadOnly = true;
        else
            textbox_input.IsReadOnly = false;
    } 
```

有了这个剪断，如果用户不使用鼠标，我会抑制键盘......

此外，`KeyDown`当文本框为只读时触发事件，因此您可以直接使用数据来设置您的视图模型并更新您的文本框；）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-25T01:34:32.347

[有](https://stackoverflow.com/questions/20858141/keyboard-wont-dismiss-even-after-focus-change/29124111#29124111)`IsTabStop=true`一个解决方案可以通过在单击按钮后自动设置容器为“提交”来隐藏触摸键盘。

但是，顺便说一句，我注意到下次进入该页面时，`EditText`（应该是 a `TextBox`）将自动聚焦，并显示触摸键盘。也许你最好`EditText`在提交后禁用。（似乎完成并阻止了输入操作）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-11T10:13:11.913

我有同样的问题，只有一点点不同。当我从文本框切换到日期选择器时，软键盘不会消失。

我尝试了您的所有建议，但没有任何效果。每次我的日期选择器出现奇怪的行为时，在我尝试了上述解决方案之一（或其他一些 stackoverflow 线程）之后。

过了一段时间，我通过谷歌找到了一些东西，这就像一个魅力。[这里](http://www.aaron-powell.com/posts/2012-08-31-forcing-windows-8-keyboard-to-hide.html)

在评论部分 Dusher16 写了一个非常干净的解决方案，它也适用于 WinRT / Win8 / Win8.1 / Metro 或你将如何称呼它。

**创建一个新类：**

```
using System.Runtime.InteropServices;
using Windows.Devices.Input;

namespace Your.Namespace
{
    public static class TouchKeyboardHelper
    {
        #region < Attributes >

        private const int WmSyscommand = 0x0112; // Flag to received/send messages to the system.
        private const int ScClose = 0xF060; // Param to indicate we want to close a system window.

        #endregion < Attributes >

        #region < Properties >

        public static bool KeyboardAttached
        {
            get { return IsKeyboardAttached(); }
        }

        #endregion < Properties >

        #region < Methods >

        [DllImport("user32.dll")]
        private static extern int FindWindow(string lpClassName, string lpWindowName); // To obtain an active system window handler.

        [DllImport("user32.dll")]
        private static extern int SendMessage(int hWnd, uint Msg, int wParam, int lParam); // To send a message to the system.

        /// <summary>
        /// To detect if a real keyboard is attached to the dispositive.
        /// </summary>
        /// <returns></returns>
        private static bool IsKeyboardAttached()
        {
            KeyboardCapabilities keyboardCapabilities = new KeyboardCapabilities(); // To obtain the properties for the real keyboard attached.
            return keyboardCapabilities.KeyboardPresent != 0 ? true : false;
        }

        /// <summary>
        /// To close the soft keyboard
        /// </summary>
        public static void CloseOnscreenKeyboard()
        {
            // Retrieve the handler of the window 
            int iHandle = FindWindow("IPTIP_Main_Window", ""); // To find the soft keyboard window.
            if (iHandle > 0)
            {
                SendMessage(iHandle, WmSyscommand, ScClose, 0); // Send a close message to the soft keyboard window.
            }
        }

        #endregion < Methods >
    }
} 
```

**例如，在某些 XAML.cs 文件中添加以下行：**

```
private void DatePicker_GotFocus(object sender, RoutedEventArgs e)
{
    if (TouchKeyboardHelper.KeyboardAttached)
        TouchKeyboardHelper.CloseOnscreenKeyboard();
} 
```

# java - 正则表达式在长输入字符串上给出 StackOverflowError

> ID：10714443
> 
> 赞同：-1
> 
> 时间：2012-05-23T06:14:02.537
> 
> 标签：java, regex

我正在尝试使用 regex 在我的代码中查找 HTML 标记`<(.|\n)+?>`。

现在我遇到了一个字符串，这个正则表达式给了我一个`StackOverflowError`.

它第一次通过 group 函数在字符串中找到粗体部分，但下一次给出下面提到的异常。

我正在使用以下字符串：

```
“在 SCCM 2012 中有一个完全修订的移动设备版本
管理部分。当然，这在 SCCM 2007 中已经存在，但是，嘿，你会吗？
想要“管理”古老的 Windows CE 或 Windows Mobile 5.0 设备？我没有
也这么认为。此外，在 SCCM 2007 时代，自带设备 (BYOD)
像今天一样热，每个人都想带进来并使用自己的
平板电脑、智能手机和笔记本电脑。现在有了 SCCM 2012，有适当的支持
对于 BYOD。是的！有关这方面的一个很好的概述，请参阅 Principal 的此视频
项目经理 Jeffrey Sutherland，谈论移动设备管理
SCCM 2012\. Light and Depth Management 我们可以定义两种类型的设备
SCCM 2012 中的管理：-> 灯光管理 **<- 通过 Exchange 工作
ActiveSync，我们利用现有的 Exchange 设备策略，做轻
设备管理（远程擦除、锁定等） 我们为什么要这样做？它是
已经在 Exchange 对吗？好吧，Exchange 管理员可能不是很
与特定的最终用户设备有关，因为他们与处理
邮件流，因此此任务可能更适合桌面/最终用户/设备
您组织中的管理团队。他们是与 SCCM 2012 合作的人，
他们是最有兴趣收集有关信息的人，并且
管理设备。此外，SCCM 提供了一些非常好的报告
devices.** -> In-Depth Management <- 另一种类型是 In-Depth Management
的移动设备 这不能通过 EAS 工作，而是通过两个新的 SCCM
SCCM 2012 中引入的角色；注册点和
注册代理点。深度管理可以通过两种方式进行；- 注册
通过在移动设备上安装移动设备客户端，将移动设备导入 SCCM。
仅在受支持的移动操作系统上。（当前为 WinMobile 6.1、6.5 和诺基亚 Symbian
美女）。提供了大多数功能。- 通过以下方式将移动设备注册到 SCCM
在其上安装旧版移动设备客户端。仅在受支持的手机上
操作系统，目前是古老的 WinCE 5、6 和 7，以及 WinMo 6.0。较少的
功能，但仍然比 EAS 更多的选择。为了一个很好的比较
所有三个场景的所有功能（EAS、设备上的移动设备客户端和
旧版移动设备客户端），请参阅 Technet 上的此页面。请注意，两者都深入
解决方案需要 PKI 基础设施，因为证书是
在设备上使用！因此，稍后将详细介绍深入部分，让我们首先了解
EAS 连接。（是的，您也可以选择混合解决方案，即使用
EAS 和通过注册）移动设备管理的配置
通过 Exchange 那么，我们该如何设置呢？首先是先决条件：Exchange 2010
SP1 服务器（或 Exchange Online（office365）和一个工作的 SCCM 2012 服务器（duh）
以及它们之间的网络连接。然后我们要建立连接
在 SCCM 服务器和 Exchange (CAS) 服务器之间。我们点击添加交换
服务器并获取向导：指定交换 CAS 服务器的名称...嘿，
看看这个画面。交易所许可的精确列表
连接器帐户需要。我想说这需要一个新的 RBAC 角色
交换！因此，让我们首先为此连接创建一个服务帐户并分配
适当的交换权限。现在我将分配只读
此服务帐户的权利，因为我只想从 EAS 获取有关
设备，而不是进行任何远程擦除。顺便说一句，这也是如何
Microsoft IT 做到了这一点（阅读此处）然后继续执行向导：我刚刚设置
这是每周一次的完整发现，以及每天两次的 Delta 发现。所以，在这之后
向导，已与 CAS 服务器建立连接。尽你所能
看，路径 /powershell 已添加到 Exchange 的目标路径中
服务器。这是有道理的，因为它真正做的就是启动 PowerShell
针对 CAS 的 cmdlet，以从中获取信息。那么，我们是否看到任何设备
现在？首先让我们开始一个发现周期：然后看：那个设备有我的
名字写在上面（tee-hee）那么，我们能用它做什么呢？嗯，不是
很多：擦除，阻止，和..嗯。出色地。让我们看看那些报告
然后：哇。这是很多内置的报告。很酷！到此为止。
是时候开始忙碌了，启动一部旧的 Windows Mobile 6.5 手机，然后开始
做一些真正的管理。在下一篇文章中。”

```

得到的例外是

```
Exception in thread "main" java.lang.StackOverflowError
    at java.util.regex.Pattern$LazyLoop.match(Unknown Source)
    at java.util.regex.Pattern$GroupTail.match(Unknown Source)
    at java.util.regex.Pattern$BranchConn.match(Unknown Source)
    at java.util.regex.Pattern$CharProperty.match(Unknown Source)
    at java.util.regex.Pattern$Branch.match(Unknown Source)
    at java.util.regex.Pattern$GroupHead.match(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:23:14.120

如果确实没有循环，您可以使用 -Xss jvm 标志（每个线程的堆栈大小）

# iphone - 如何从nsstring中删除“字符”的出现？

> ID：10714444
> 
> 赞同：0
> 
> 时间：2012-05-23T06:14:08.870
> 
> 标签：iphone, objective-c, nsstring

我熟悉如何删除不需要的字符，例如，`{,},<,>,`但我无法找到如何删除**NSString**中出现的“（反逗号） 。任何关于此的建议都会有很大帮助。非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T06:20:22.097

引号是在`objective c`和许多其他语言中的保留字符。所以你必须逃离他们。`\`在目标 c（和许多其他目标）中，特殊保留字符在 char前加反斜杠进行转义。

所以，如果你有这样的字符串：

```
fsdfads"dsfdsa 
```

您可以实例化转义特殊字符、引号，如下所示：

```
NSString* s = @"fsdfads\"dsfdsa"; 
```

您可以删除引号：

```
[s stringByReplacingOccurrencesOfString:@"\"" withString:@""]; 
```

希望这可以帮助！

编辑：

你评论说你有一个像@“108”这样的字符串，你想得到108。如果你想把它作为一个NSString，你应该做我发布的。如果要将 108 作为 NSNumber，则应将其从 NSString 转换为 NSNumber。使用`NSNumberFormatter`：

```
NSNumberFormatter * f = [[NSNumberFormatter alloc] init];
[f setNumberStyle:NSNumberFormatterDecimalStyle];
NSNumber * myNumber = [f numberFromString:@"108"];
[f release];   // If you are not using ARC 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T07:54:19.000

你可以这样做：

```
NSString *strText = @"abcdef\"\"xyz";
[strText stringByReplacingOccurrencesOfString:@"\"" withString:@""]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T06:20:47.877

如果您在谈论引号，请使用以下内容：

```
[yourString stringByReplacingOccurrencesOfString:@"\"" withString:@""]; 
```

如果您在谈论其他内容，请仍然尝试使用转义字符（`\`在该字符之前设置）

希望能帮助到你

# android - 如何在手指移动时获取按钮事件-android

> ID：10714445
> 
> 赞同：1
> 
> 时间：2012-05-23T06:14:10.430
> 
> 标签：android, button, multi-touch

我正在开发一个钢琴应用程序。我放置了 6 个按钮，只是想在这些按钮上移动手指时播放一系列声音？当手指触摸一个按钮并越过另一个按钮时，AFAIK android 未检测到事件..
我尝试了多点触摸按钮的示例代码，它可以正常工作.. 但手指移动时它不会工作..

任何人都遇到过这种类型的问题，或者任何人都可以提示如何做到这一点？TIA。

# git - 拉动时重写的 .gitignore 文件

> ID：10714446
> 
> 赞同：0
> 
> 时间：2012-05-23T06:14:16.040
> 
> 标签：git

脚步：

*   在 repo 中有一个文件用于基本配置

*   签出回购

*   将文件放入 .gitignore

*   修改了文件

*   git status，还在那里，所以我做了一个假设不变

*   不再处于 git 状态

*   做了一些开发工作，拉取了别人的代码（拉取的文件和这个文件无关）

*   不知何故，.gitignore 中的文件被重写回初始内容！

任何人都知道为什么以及如何解决这个问题？

我不想删除远程或本地视图中的文件。我只是想断开它们。它们不在 git status 中，也不在 git log 中，所以我不知道为什么它会被恢复。还没有使用分支，只是在这里掌握东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:23:31.097

这不是 git 容易解决的问题。`.gitignore`不适用于已跟踪的文件，仅适用于未跟踪的文件。

因此，假设-未更改是使其脱离 git 状态的唯一方法，但这会在尝试签出其他分支或合并更改时导致问题，因为 git 通常不会覆盖未提交的更改。

它恢复了更改不是 git 的正常行为。因此，如果您提供终端会话的成绩单，将会有很大帮助。

# jsf-2 - 如何使用 ui:repeat 标签在 dataTable 中动态生成 id

> ID：10714447
> 
> 赞同：2
> 
> 时间：2012-05-23T06:14:18.813
> 
> 标签：jsf-2, el

我正在使用渲染图像的 ui:repeat 标记。我有五张图像，我希望在每次迭代中我的图像都得到像 image1、image2、image3.... imagen 这样的 id。我试过这个，但它不工作。

```
<div id="imageGallery">
    <ui:repeat value="#{countryPages_Setup.images}" var="image" varStatus="status">
        <tr>
            <td>
                <a href="javascript:void()" class="launchLink">
                    <p:graphicImage id="image#{status.index}"         //problem
                                    value="/resources/images/#{image}"
                                    width="100"
                                    height="100"
                                    rendered="#{countryPages_Setup.renderImages}"/>
                </a>
            </td>
        </tr>
    </ui:repeat>
</div> 
```

我也试过 {staus.index + 1}。我也试过 id= image#{1++} 但它也不起作用。我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T13:24:26.910

您可以在属性中使用 EL `id`，但它必须在视图构建期间可用。然而`<ui:repeat>`，在视图渲染期间运行，它将重用相同的内容`<p:graphicImage>`来生成多个 HTML`<img>`元素。它不会在视图构建期间运行，因此`id`保留`image`.

如果您替换`<ui:repeat>`为`<c:forEach>`，那么它将按您的意图工作。在`<c:forEach>`视图构建期间运行，它将生成多个`<p:graphicImage>`组件，然后每个组件只渲染一次。

```
<div id="imageGallery">
    <c:forEach items="#{countryPages_Setup.images}" var="image" varStatus="status">
        <tr>
            <td>
                <a href="javascript:void()" class="launchLink">
                    <p:graphicImage id="image#{status.index}"
                                    name="images/#{image}"
                                    width="100"
                                    height="100"
                                    rendered="#{countryPages_Setup.renderImages}"/>
                </a>
            </td>
        </tr>
    </c:forEach>
</div> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T06:20:02.843

不能在`id`属性中使用 el 表达式。它必须是静态的。它`ui:repeat`本身会为您的 id 生成前缀。你不需要关心唯一性。

因此，例如，如果您有一个`id="image"`，那么生成的 id 是

`somePrefix:0:image`, `somePrefix:1:image`, ...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-21T18:43:59.367

但是你可以在 Javascript 中使用变量，例如：

```
<h:graphicImage ... onclick="top.location.href='http://blabla.com/imageclicked?id=#{status.index}'"/> 
```

您还可以将变量与事件处理程序一起使用（自 JSF 2.0 起）：

```
<h:commandLink ... action="#{myBean.imageClicked(status.index)"/> 
```

但是你的循环`c:forEach`可能会导致问题。请注意，JSTL 标记（以 开头的所有标记`c:`）与 JSF 不完全兼容。如果你有运气，那么它们会按预期工作。但无论如何都会减慢渲染引擎，因为页面会被 JSF 和 JSP 渲染引擎多次处理。

更好用`ui:repeat`。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-09-25T16:55:03.973

只需更改`<ui:repeat>`为`<c:forEach>`

# sharepoint - Sharepoint 分类更新计划程序

> ID：10714457
> 
> 赞同：0
> 
> 时间：2012-05-23T06:15:17.473
> 
> 标签：sharepoint, sharepoint-2010

我有一个关于分类更新计划程序的问题。

这是场景。

我有使用列表中的托管元数据字段的自定义列表（此列表附有 Itemupdating 事件以发送电子邮件通知）

首先，我们使用此管理的元数据值创建了一些项目并保存这些项目。一段时间后，我们更新了列表项中使用的术语库名称。然后从 sharepoint 中央管理员运行分类更新计划程序计时器作业，一旦计时器作业成功运行，自定义列表项就会反映更改。

但是在项目得到更新后，事件不会在应该发送邮件通知的自定义列表中触发。共享点是否不支持这种行为？

谁能在这个问题上指导我。

问候阿南德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T10:38:21.907

更改分类数据时不会引发任何事件。托管元数据字段是增强型查找字段类型，因此在计时器运行时字段的内容不会更改。详细地说，托管元数据字段包含 Sharepoint 自动添加到 SiteCollection 根目录中的 /Lists/TaxonomyHiddenList 的项目（术语）的引用 (ID)。我想 Metadata Timer 作业改为修改隐藏的列表项。

# linux - skb_dst() 返回 NULL

> ID：10714459
> 
> 赞同：2
> 
> 时间：2012-05-23T06:15:54.097
> 
> 标签：linux, kernel

我正在尝试在 linux 内核 3.3.2 上编写一个虚拟网络设备驱动程序。我的驱动程序的某些功能在传输数据包时需要路由信息，因此我使用函数 skb_dst(struct sk_buff *) 来获取 dst_entry 指针。但无论我做什么，无论我在哪里 ping，每当我尝试时，**skb_dst() 总是返回 NULL**。我不知道为什么，这个错误让我困惑了一个多星期。谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-29T11:49:26.267

我找到原因了！这是因为在 kernel: 中添加了一个标志`IFF_XMIT_DST_RELEASE`，如果分配的虚拟设备的标志设置为，内核将在发送到设备`0`时丢弃路由信息。`sk_buff`感谢 Kristof Provost 的回复，很抱歉这么晚才结束这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:00:12.470

Ping 使用 RAW 套接字。他们可能会绕过部分路由基础设施。

尝试查看`raw_send_hdrinc`并`raw_sendmsg`进入`net/ipv4/raw.c`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-23T08:05:22.260

为了清楚起见，添加`dev->priv_flags &= ~IFF_XMIT_DST_RELEASE;`到设置功能

# android - 服务在 c2dm 中不可用

> ID：10714462
> 
> 赞同：1
> 
> 时间：2012-05-23T06:16:06.783
> 
> 标签：android, android-c2dm

我正在运行一个示例推送通知示例。我已经完成了 c2dm 注册并收到了一封电子邮件。但问题是当我运行程序时 logcat 显示注册 ID 为空，错误为“服务不可用”。请帮我。提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T20:35:56.380

这也发生在我的应用程序中。我发现当模拟器启动时，您通常需要让它运行意图（即您的主要活动）然后退出应用程序。从模拟器再次启动应用程序，它似乎对我有用。您在使用时需要仔细检查的几件事： 1\. 您是否在清单文件中声明了您的接收者？2\. 您是否在清单中使用了正确的包名？3\. 您是否运行了 google api (level 8) AVD 4\. 您是否将推送发件人帐户添加到模拟器中？

希望这可以帮助！

# module - 如何使用另一个commonjs模块的导出变量而不再次声明它们？

> ID：10714463
> 
> 赞同：0
> 
> 时间：2012-05-23T06:16:15.093
> 
> 标签：module, declaration, commonjs

假设我有一个模块`models.js`：

```
exports.User = mongoose.model('User', UserSchema);
exports.Question = mongoose.model('Question', QuestionSchema);
exports.Answer = mongoose.model('Answer', AnswerSchema);
exports.Comment = mongoose.model('Comment', CommentSchema); 
```

现在我想在另一个文件中使用它：

```
var models = require('./models');
var User = models.User;
var Question = models.Question;
var Answer = models.Answer;
var Comment = models.Comment

// then use them
var user = new User(); 
```

我必须声明我定义的所有模型，这很无聊`models.js`。

有什么方法可以简化它，我不需要再次声明模型：

```
var models = require('./models');

// !!! do some magic

var user = new User(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T00:01:48.300

好奇你为什么不想简单地做而不需要魔法 - 简单的问题是什么..

```
var models = require('./models');
var user = new models.User(); 
```

# wpf - 在 wpf 中使用 transformgroup 会出错

> ID：10714464
> 
> 赞同：2
> 
> 时间：2012-05-23T06:16:19.743
> 
> 标签：wpf

我正在寻找在一个对象中组合多个变换，我发现了如何，但问题是当我尝试放置**transformgroup**时，它给出了一个错误**“无法解析属性路径'RenderTransform.ScaleX'中的所有属性引用。验证适用的对象支持属性。”**

这是我从网上复制的转换代码（“感谢制作此代码的人”）

```
 <Window.Resources>
    <Storyboard x:Key="expandStoryboard">
        <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX" 
    To="1.3" Duration="0:0:0.2" />
        <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY"
    To="1.3" Duration="0:0:0.2" />
    </Storyboard>
    <Storyboard x:Key="shrinkStoryboard">
        <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleX"
    To="1" Duration="0:0:0.2" />
        <DoubleAnimation Storyboard.TargetProperty="RenderTransform.ScaleY"
    To="1" Duration="0:0:0.2" />
    </Storyboard>
    <Storyboard x:Key="shakeStoryBoard">
        <DoubleAnimation Storyboard.TargetProperty="RenderTransform.Angle"
                            From="-5" To="5" Duration="0:0:0.05" 
                            AutoReverse="True"
                            RepeatBehavior="3x"
                            FillBehavior="Stop" />
    </Storyboard> 
```

这是我的对象（按钮）

```
 <Button RenderTransformOrigin="0.5,0.5" Background="Transparent" Focusable="False"  BorderBrush="Transparent"  Height="220" HorizontalAlignment="Left" Margin="591,213,0,0" Name="cmdsettings" VerticalAlignment="Top" Width="189">
        <StackPanel Orientation="Vertical" HorizontalAlignment="Center"  VerticalAlignment="Center" Width="217" Height="220">
            <Image HorizontalAlignment="Center" VerticalAlignment="Center"   Source="Images/settings.png" Height="192" Width="204" />
            <TextBlock VerticalAlignment="center" TextAlignment="center" FontSize="16" Width="123" Foreground="white" FontWeight="Bold" Height="20">Settings</TextBlock>
        </StackPanel>
        <Button.Triggers>
            <EventTrigger RoutedEvent="Button.MouseEnter">
                <BeginStoryboard Storyboard="{StaticResource expandStoryboard}" />
            </EventTrigger>
            <EventTrigger RoutedEvent="Button.MouseLeave">
                <BeginStoryboard Storyboard="{StaticResource shrinkStoryboard}" />
            </EventTrigger>
            <EventTrigger RoutedEvent="Button.Click">
                <BeginStoryboard Storyboard="{StaticResource shakeStoryBoard}" />
            </EventTrigger>
        </Button.Triggers>
        <Button.RenderTransform >
            <TransformGroup>
                <ScaleTransform ScaleX="1" ScaleY="1"/>
                <RotateTransform />
            </TransformGroup>                    
        </Button.RenderTransform>
    </Button> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T06:55:42.070

由于`Button.RenderTransform`包含一个 TransformGroup，您必须通过其[Children](http://msdn.microsoft.com/en-us/library/system.windows.media.transformgroup.children.aspx)属性访问包含的 Transforms：

```
<DoubleAnimation Storyboard.TargetProperty="RenderTransform.Children[0].ScaleX" ... />  
<DoubleAnimation Storyboard.TargetProperty="RenderTransform.Children[0].ScaleY" ... />
<DoubleAnimation Storyboard.TargetProperty="RenderTransform.Children[1].Angle" ... /> 
```

# c - 与许多实时设备保持连接

> ID：10714465
> 
> 赞同：0
> 
> 时间：2012-05-23T06:16:22.753
> 
> 标签：c, sockets, udp, real-time

我正在 Linux 上编写一个程序，通过 UDP 套接字同时控制大约 1000 个病人监护仪。我已经成功编写了一个库来解析和发送消息以从单个患者监护仪设备收集数据。设备上有各种调度限制，如下所列：-

*   每个设备必须在 300 毫秒的最大时间段内不断地从计算机客户端获取活动请求（可能因设备而异），否则会丢失连接。
*   计算机客户端必须向设备发送轮询请求，以便在某个时间段内获取数据。我正在从患者监视器轮询大约 5 秒的平均数据，因此，我需要每 5 * 3 = 15 秒发送一次轮询请求。如果我未能在 15 秒的时间范围内发送请求，我将失去与设备的连接。

现在，我正在尝试扩展我当前的程序，以便它能够同时处理大约 1000 多个设备。现在，我的程序可以有效地处理和解析来自一台设备的响应。在处理多个设备的情况下，需要同步来自不同设备的多个响应并将它们序列化并通过 TCP 套接字进行流式传输，以便远程计算机也可以分析数据。好吧，这不是问题，因为这是众所周知的多生产者和单一消费者问题。我主要关心的是，我应该使用什么方法来维持 1000 多个设备的活动连接。

在通过互联网阅读并在本网站上浏览类似问题后，我主要考虑两种选择：-

*   每个设备使用一个线程。为了控制 1000 多个设备，我最终会制作 1000 多个线程，这对我来说看起来不可行。
*   使用多路复用的方法，选择需要注意的FD，一次处理一个。我不确定我将如何去做，以及多路复用方法是否能够与考虑到上述两个常数的所有设备保持活动连接。

我需要一些关于如何处理需要通过 UDP 套接字控制 1000 多个实时设备的情况的建议和建议。每个设备每 300 毫秒需要一些活动信号（不同的设备不同），并且它们需要在关联阶段提到的时间间隔的大约 3 倍内进行轮询请求。例如，ICU 中的患者监护仪可能需要实时（1 秒平均）数据，而普通病房中的患者监护仪可能需要 10 秒平均数据，因此，两个设备的轮询周期将为 3*1（3 秒）和分别为 3*10（30 秒）。

谢谢希瓦姆卡拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T06:29:20.163

在大多数情况下，这两种方法至少在功能上能够处理您描述的功能，但从事物的声音来看，性能将是一个关键问题。从您提供的数据看来，该应用程序可能是 CPU 密集型的。

多线程方法的优点是使用机器上所有可用的 CPU 内核，但多线程程序因难以可靠和健壮而臭名昭著。

您还可以使用 Apache 久经考验的旧分叉工人模型 - 例如，创建一个单独的进程来处理最多 100 个设备。然后，您可能需要编写代码来管理连接到进程的映射。

您还可以使用多个*主机*和一些机制在它们之间分配设备。这将具有更容易处理恢复情况的优点。听起来您的应用程序很可能是关键任务，并且可能需要对其进行架构，以便如果任何一个硬件发生故障，那么其他硬件将自动接管。

# jquery - 无限循环中的jQuery动画

> ID：10714467
> 
> 赞同：1
> 
> 时间：2012-05-23T06:16:44.027
> 
> 标签：jquery, forms, animation, loops

我正在努力做到这一点：

1.  阻止提交按钮提交表单

2.  淡出一个元素

3.  然后提交表格

但是我陷入了无限循环的动画！为什么？？

HTML

```
<form id="postitron" method="post" action="/postitron/answertron.php">
  <input type="hidden" name="acces" value"yes">
  <input id="submit" type="submit" value="DOIT">
</form> 
```

JavaScript

```
$('#postitron').submit(function(e){
    e.preventDefault();
    $('#page').animate({opacity:0},400, function(){
        $('#postitron').submit();
    });
}); 
```

PS-我也尝试过该`.one()`方法而不是`.submit()`，但是一旦动画完成，它会阻止提交方法在#postitron 上执行:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:18:51.500

`submit()`调用您的自定义绑定`submit`函数，该函数`submit`又调用您的函数等。

尝试使用 DOM 的提交：

`$('#postitron')[0].submit()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:28:42.670

这是因为您将事件绑定在 上`SUBMIT`，并且您`.animate callback function`正在`SUBMIT`表单中...导致无限循环。

**试试这个 ：**

而不是在按钮`.submit`上绑定事件，而是在按钮上`form`绑定事件。`.click``submit`

```
$('#submit').click(function(e){
    e.preventDefault();
    $('#page').animate({opacity:0},400, function(){
        $('#postitron').submit();
    });
}); 
```

*请记住，我没有对此进行测试。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:30:51.347

您可以预先定义函数，并在其中解绑提交，然后重新提交。这是一个黑客，但它可能会奏效。

或者，也许您检查它的隐藏性，然后像这样重新提交：

```
var hidden = false;
$('#postitron').submit(function(e){
    if ( !hidden ) {
        e.preventDefault();
        $('#page').animate({opacity:0},400, function(){
            hidden = true;
            $('#postitron').submit();
        });
    }
}); 
```

# java - Swing Worker Thread：内部类与传递参数

> ID：10714472
> 
> 赞同：3
> 
> 时间：2012-05-23T06:17:12.297
> 
> 标签：java, swing, inner-classes, jtextpane, swingworker

我知道 SO 是针对特定问题的，但我需要关于 Java 中使用 swing 工作线程的正确做法的建议。

我的应用程序生成大型 HTML 文本以响应显示在 jTextPane 中的计算过程。为了避免阻塞我曾经在 Swing 工作线程中进行计算的 GUI。

我的问题是以下开始计算我需要在 GUI 的不同菜单复选框和列表框中提供大量信息，并且在计算结束时我需要在 EDT 中启动函数。

这对我来说有两种可能性：

第一个是向我的 Swing Worker 发送大量信息，还需要传递 MainFrame 以访问“done()”中的特定功能

```
public class MyWorker extends SwingWorker<Void, Void> {      

    private MyMainFrame frame;
    public MyWorker(plenty of params) {
    }

    @Override
    public Void doInBackground() {
        //my background process
    }

    @Override
    public void done() {
    frame.myfunc1;
    frame.myfunc2;
    frame.myfunc3;
    }
} 
```

第二个是使用内部类

在 Java 中哪一个是正确的。如果两者都是“正确的”，那么一个对另一个的利弊是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:49:43.973

两种方法都可以。内部类的优点是它可以访问封闭对象的内部。缺点是它不能在另一个上下文中重用（例如，另一个具有类似接口的框架）。

只要确保您的代码结构良好且可读性强。例如，您可能希望`done()`在框架的单个方法中提取方法中的三个方法调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:35:46.057

如果困扰您的是您必须在构造函数中传递的大量参数，您可以将这些参数分组到一个容器对象中，然后只传递容器（例如一个`MyWorkerContext`类）。

我个人会尽量避免传递 UI（元素）本身，而是传递一个模型/流/...，它将由 更新`SwingWorker`，允许我稍后重构 UI，而不必摆弄我的`SwingWorker`类。

# java - 在两个字符串列表中获取常用字符串对

> ID：10714473
> 
> 赞同：0
> 
> 时间：2012-05-23T06:17:15.173
> 
> 标签：java, string, list

嗨，我在两个列表中进行了常见计数。
这是我的代码。

```
 public static int getMatchCount(List<String> listOne, List<String> listTwo) {
    String valueOne = "";
    String valueTwo = "";
    int matchCount = 0;
    boolean isMatchedOnce=false;

    for (int i = 0; i < listOne.size(); i++) {
        valueOne = listOne.get(i);
        isMatchedOnce=false;
        if (StringUtils.isBlank(valueOne))
            continue;

        for (int j = 0; j < listTwo.size(); j++) {
            valueTwo = listTwo.get(j);
            if (StringUtils.isBlank(valueTwo))
                continue;

            if (valueTwo.equals(valueOne) && (!isMatchedOnce)) {
                matchCount++;
                listOne.set(i, "");
                listTwo.set(j, "");
                isMatchedOnce=true;
            }
        }
    }
    return matchCount;
}

    for ex
listone listTwo
A            A
A            B
B 
```

然后结果是 2 而不是 3
因为它们只有两个我们可以取出的普通对。

但是该方法非常慢 对上述方法进行任何改进以使其快速。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T06:20:54.223

这应该是一个更容易解决的方法：

```
List<String> listOne = new ArrayList<String>();
//add elements
List<String> listTwo= new ArrayList<String>();
//add elements
List<String> commonList = new ArrayList<String>(listTwo);
commonList.retainAll(listOne);
int commonListSize = commonList.size(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T06:21:28.617

使用临时 Collection 和 addAll()、retainAll()：

```
Set<String> set = new HashSet<String>();
set.addAll(list1);
set.retainAll(list2);
int count = set.size(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:36:59.720

也许你可以试试这个...

```
public static int getMatchCount(List<String> listOne, List<String> listTwo) {
    String valueOne;
    String valueTwo;
    int matchCount = 0;
    boolean isMatchedOnce;

    //for (int i = 0; i < listOne.size(); i++) {
    for(String i : listOne){
        valueOne = i;
        isMatchedOnce = false;
        if (StringUtils.isBlank(valueOne)) {
            continue;
        }

        for (String j : listTwo) {
            valueTwo = j;
            if (StringUtils.isBlank(valueTwo)) {
                continue;
            }

            if (valueTwo.equals(valueOne) && (!isMatchedOnce)) {
                matchCount++;
                listOne.set(listOne.indexOf(i), "");
                listTwo.set(listOne.indexOf(j), "");
                isMatchedOnce = true;
            }
        }
    }
    return matchCount;
} 
```

# tableview - tableview Cell Titanium中的大量数据

> ID：10714475
> 
> 赞同：0
> 
> 时间：2012-05-23T06:17:18.823
> 
> 标签：tableview, titanium-mobile

我有包含 4000 行的数据库。我想在 android 上用 tableview 显示这些数据。

但设备显示内存警告。

我们可以像在 iPhone 开发中使用的那样重复使用单元吗？

请推荐好方法。这样大容量数据就不会在 android 设备上崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:06:23.040

在表格顶部添加一个搜索字段，仅显示大约 50 个条目。然后，如果用户进一步滚动并达到 <10 个单元格，则您将在表格中附加另外 50 个条目。但是您仍然必须限制总的细胞数。没有身体需要这么多行。如果我在“WhatsApp”中与我的女朋友进行了 6 个月的对话，甚至我的 iPhone 也会崩溃；）

--> 示例：[https ://gist.github.com/810391](https://gist.github.com/810391)

# openid - 验证 OpenID 签名

> ID：10714476
> 
> 赞同：3
> 
> 时间：2012-05-23T06:17:19.427
> 
> 标签：openid, signature, verify

我无法验证 OpenID 签名。这就是我所做的，请告诉我有什么问题：

这些是我在关联时得到的值：

```
mac_key 3E2FH8mCR/OJ3/T6N3UPqD8iYf0fXyQ0c4io5psTC7s=
assoc_handle AMlYA9WWc0Jk8BnTg9E0cvczK8DYBediGvu5snBaYec9uFlTj3wbY9ezQepX-kFv2foRGQC6 
```

我将客户端重定向到：

`https://www.google.com/accounts/o8/ud?openid.ns=http://specs.openid.net/auth/2.0&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.return_to=http://www.sdfanq.com/checkauth&openid.realm=http://www.sdfanq.com/&openid.mode=checkid_setup&openid.assoc_handle=AMlYA9WWc0Jk8BnTg9E0cvczK8DYBediGvu5snBaYec9uFlTj3wbY9ezQepX-kFv2foRGQC6`

Uppon accepting, the client is redirect back to:

```
http://www.sdfanq.com/checkauth?openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.mode=id_res&openid.op_endpoint=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fud&openid.response_nonce=2012-05-23T05%3A54%3A30Z0Sv8nDqIrrWYeQ&openid.return_to=http%3A%2F%2Fwww.sdfanq.com%2Fcheckauth&openid.assoc_handle=AMlYA9WWc0Jk8BnTg9E0cvczK8DYBediGvu5snBaYec9uFlTj3wbY9ezQepX-kFv2foRGQC6&openid.signed=op_endpoint%2Cclaimed_id%2Cidentity%2Creturn_to%2Cresponse_nonce%2Cassoc_handle&openid.sig=HtlEGDEmee1UsH9fZg%2BQXt3JCyk11Lb7RMTNEcxbCKo%3D&openid.identity=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid%3Fid%3DAItOawlUNTJm8YX2SyJ2QXsg9eBe3g0LNnKKXwY&openid.claimed_id=https%3A%2F%2Fwww.google.com%2Faccounts%2Fo8%2Fid%3Fid%3DAItOawlUNTJm8YX2SyJ2QXsg9eBe3g0LNnKKXwY 
```

To verify the signature I concatenate the keys like this:

```
op_endpoint:https://www.google.com/accounts/o8/ud\nclaimed_id:https://www.google.com/accounts/o8/id?id=AItOawlUNTJm8YX2SyJ2QXsg9eBe3g0LNnKKXwY\nidentity:https://www.google.com/accounts/o8/id?id=AItOawlUNTJm8YX2SyJ2QXsg9eBe3g0LNnKKXwY\nreturn_to:http://www.sdfanq.com/checkauth\nresponse_nonce:2012-05-23T05:54:30Z0Sv8nDqIrrWYeQ\nassoc_handle:AMlYA9WWc0Jk8BnTg9E0cvczK8DYBediGvu5snBaYec9uFlTj3wbY9ezQepX-kFv2foRGQC6\n 
```

Now when I base64.encode(hmac256("3E2FH8mCR/OJ3/T6N3UPqD8iYf0fXyQ0c4io5psTC7s=", S)), where 'S' is the concatenated string, I get a wrong value.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-03-22T11:12:53.700

您忘记对密钥进行 base64 解码。作为一般经验法则：如果某些东西看起来像 base64，那么至少尝试对其进行解码并不是一个坏主意。

尝试这个：

```
<?php
$string="op_endpoint:https://www.google.com/accounts/o8/ud
claimed_id:https://www.google.com/accounts/o8/id?id=AItOawlUNTJm8YX2SyJ2QXsg9eBe3g0LNnKKXwY
identity:https://www.google.com/accounts/o8/id?id=AItOawlUNTJm8YX2SyJ2QXsg9eBe3g0LNnKKXwY
return_to:http://www.sdfanq.com/checkauth
response_nonce:2012-05-23T05:54:30Z0Sv8nDqIrrWYeQ
assoc_handle:AMlYA9WWc0Jk8BnTg9E0cvczK8DYBediGvu5snBaYec9uFlTj3wbY9ezQepX-kFv2foRGQC6
"; //first we take the string to be signed

$key=base64_decode("3E2FH8mCR/OJ3/T6N3UPqD8iYf0fXyQ0c4io5psTC7s="); //the key needs to be Base64 decoded.

$orisig="HtlEGDEmee1UsH9fZg+QXt3JCyk11Lb7RMTNEcxbCKo="; //take the original signature to check it later

$truesig=base64_encode(hash_hmac("sha256",$string,$key,true)); //calculate the signature you get

echo $truesig."<br>".$orisig."<br>"; //output both
var_dump($orisig==$truesig) //and show they are the same.
?> 
```

我希望解决这些非常古老的问题不是问题。

# javascript - 从网络获取图像 URL

> ID：10714479
> 
> 赞同：1
> 
> 时间：2012-05-23T06:17:31.590
> 
> 标签：javascript, image, url

我正在研究一些接收页面 URL 的 JavaScript，比如 fotolog；

> [http://www.fotolog.com/okendo/18551692/](http://www.fotolog.com/okendo/18551692/)

我想在这个网站中搜索以获取图像的源 URL 并将其显示在我的网站中。我想要主图像的 URL，但我不知道如何。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:37:39.443

您可以使用 YQL 获取站点的内容并使用 XPath 仅选择特定节点。这一切都可以通过使用 AjaxP 调用来完成。

[这是示例 YQL](http://y.ahoo.it/aK7kS)，它显示了您问题中提到的 URL 的示例

# c# - 为什么只读字符串变量会自动赋值为String.Empty("")？

> ID：10714481
> 
> 赞同：0
> 
> 时间：2012-05-23T06:17:38.577
> 
> 标签：c#, string

下面显示了 MyEmpty，它是“”，而我认为它会为空。

```
public class SomeClass
{
    public static readonly String MyEmpty;
    ...
} 
```

如果 MyEmpty 是 "" 而不是 null，它必须像下面这样吗？

```
public class SomeClass
{
    public static readonly String MyEmpty = "";
    ...
} 
```

不知何故，“只读”使这种情况发生，但为什么呢？

提前致谢。

[编辑]

我正在使用 MessageBox.Show() 测试这两个，假设当我给它一个空值时该方法会抛出异常。但它根本没有抛出任何异常，这就是为什么我认为在我的第一个代码中 MyEmpty 不是 null 而是“”。

感谢大家尝试解释 null 和 "" 之间的区别以及我的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:24:34.463

使用您的第一个代码 MyEmpty 应该为空。

```
public class SomeClass
{
    public static readonly String MyEmpty; <- Gets null
    ...
} 
```

您指定了“readonly”关键字，所以我猜您将其值更改为“”的唯一位置是在构造函数中。

没有指定就无法获得“”的原因是需要分配空字符串“”（除非您引用string.empty），因此默认情况下您不可能获得该值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:26:45.777

> **string.Empty和****""**一样，都是**长度为 0 的字符串**。
> 
> 虽然**Null**意味着**没有字符串**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:22:38.670

字符串是引用类型。空字符串与 string = null 不同。第二意味着没有对字符串对象的引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T06:41:59.427

The compiler do not allow empty structs, therefor stuff like readonly params and props get the initial value "" or 0 for int etc. Because theoreticaly you are not suppose to assign them while declaring one inside a method it would give you an exception.

# heroku - Heroku 与 Play Framework 和 Rake

> ID：10714483
> 
> 赞同：0
> 
> 时间：2012-05-23T06:17:57.360
> 
> 标签：heroku, playframework, rake

我有一个在 Heroku 上愉快地运行的 Play Framework 应用程序。我想运行一些 rake 任务来备份数据库（或者，如果对 java 应用程序有其他建议，则通过 Heroku 上的 cron 作业运行任何东西来备份数据库......）。

到目前为止，我正在努力让 rake 和 Play Framework 在同一个应用程序中一起运行。只要我在那里有一个 Gemfile，Heroku 的东西我正在部署一个 Ruby 应用程序并且不会编译/部署我的 play 应用程序。感谢任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:20:42.163

Heroku 不再推荐使用 Cron 插件。建议使用调度程序插件。

文档中说使用调度程序插件的方式（如果您不是在 Rails 中构建应用程序）是通过从 bin 目录中的脚本文件调用 Ruby 来使用它。在此处查看文档 - [https://devcenter.heroku.com/articles/scheduler](https://devcenter.heroku.com/articles/scheduler)

# java - 为什么我的列表视图中没有显示数据？

> ID：10714485
> 
> 赞同：0
> 
> 时间：2012-05-23T06:18:07.687
> 
> 标签：java, android, eclipse, json, listview

它连接并从 json 数组中提取数据。它添加了两个列表视图项但不显示任何文本？

JSON 数组 {"tournaments":[{"Title":"my title","Contact":"my contact","Description":"my description","City":"my city","State":" Kansas","Category":"Roulette"},{"Title":"my title","Contact":"我的联系人","Description":"我的描述","City":"我的城市"," State":"Connecticut","Category":"三张牌扑克"}]}

还有我在java中的一些代码......

```
 JSONObject json = JSONfunctions.getJSONfromURL("http://kleinefrosch.com/retrieve.php");

    try{

        JSONArray  tourneys = json.getJSONArray("tournaments");

        for(int i=0;i<tourneys.length();i++){                       
            HashMap<String, String> map = new HashMap<String, String>();    
            JSONObject e = tourneys.getJSONObject(i);

            map.put("id",  String.valueOf(i));
            map.put("Title:" , e.getString("Title"));
            map.put("Contact:" , e.getString("Contact"));
            map.put("Description:" , e.getString("Description"));
            map.put("City:" , e.getString("City"));
            map.put("State:" , e.getString("State"));
            map.put("Country:" , e.getString("Country"));
            map.put("Category:" , e.getString("Category"));

            mylist.add(map);            
        }       
    }catch(JSONException e)        {
         Log.e("log_tag", "Error parsing data "+e.toString());
    }

    ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main, 
                    new String[] { "Title","Contact","Description","City","State","Country","Category" }, 
                    new int[] { R.id.item_title, R.id.item_subtitle });

    setListAdapter(adapter);

    final ListView lv = getListView();
    lv.setTextFilterEnabled(true);  
    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
            @SuppressWarnings("unchecked")
            HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
            Toast.makeText(JsonActivity.this, "ID '" + o.get("id") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:28:57.930

假设JSON字符串解析完成，没有任何异常，我认为你应该使用这个构造：

`setListAdapter(new ArrayAdapter<String>(Context context, int resource, int textViewResourceId, List<T> objects);`

有关转到[开发人员指南的更多信息](http://developer.android.com/reference/android/widget/ArrayAdapter.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:33:29.517

尝试删除`map.put("id", String.valueOf(i));`

希望它可以运行。

**已编辑**

你的错误在这里

```
map.put("Title:" , e.getString("Title")); 
```

它应该是

```
map.put("Title" , e.getString("Title")); 
```

因为它是在 SimpleAdapter 中匹配的 Key。像这样`:`从每个字符串值中删除。

所以请确保两个键完全匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:24:46.137

发布您的 Xml 代码，您是否使用任何自定义列表视图？如果是意味着为 Textview 添加一些深色。

# java - 用递归理解 primeFactorsR 方法

> ID：10714491
> 
> 赞同：0
> 
> 时间：2012-05-23T06:18:47.707
> 
> 标签：java, recursion

我有以下方法，在这种情况下显示数字的所有素数 20。我了解该方法的大部分递归行为，但是在打印数字 5 后我有点困惑，为什么 n 回到 10上一次调用时为5时（即执行第三个递归方法时）

```
public class Tester {     

    static boolean isPrime(int p)
    {
        for(int i = 2; i < p; i++)
        {
            if(p % i == 0) return false;
        }
        return true;
    }

   public static void primeFactors(int n)
   {
       primeFactorsR(n, n-1);
   }

   static int count1 = 1, count2 = 1, count3 = 1, count4 = 1;

   public static void primeFactorsR(int n, int m)
      {
         if(isPrime(n))
         {
             System.out.println(n);
             System.out.println("method1 " +count1++);
         }     
         else
            if(n % m == 0)
            {
               System.out.println("n " + n + " m " + m);
               System.out.println("method2: " + count2++);
               primeFactorsR(m, m-1);

               System.out.println("n " + n + " m " + m);
               System.out.println("method3: " + count3++);
               primeFactorsR(n/m, (n/m)-1);              
            }
            else
            {
               System.out.println("n " + n + " m " + m);
               //System.out.println("n " + n + " m - 1 " + ( m-1));
               System.out.println("method4: " + count4++);
               primeFactorsR(n, m-1);
            }
      }

    public static void main(String[] args) {  

           primeFactors(20);        

    }
} 
```

输出

```
n 20 m 19
method4: 1
n 20 m 18
method4: 2
n 20 m 17
method4: 3
n 20 m 16
method4: 4
n 20 m 15
method4: 5
n 20 m 14
method4: 6
n 20 m 13
method4: 7
n 20 m 12
method4: 8
n 20 m 11
method4: 9
n 20 m 10
method2: 1
n 10 m 9
method4: 10
n 10 m 8
method4: 11
n 10 m 7
method4: 12
n 10 m 6
method4: 13
n 10 m 5
method2: 2
5
method1 1
n 10 m 5
method3: 1
2
method1 2
n 20 m 10
method3: 2
2
method1 3
BUILD SUCCESSFUL (total time: 1 second) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:57:46.197

我在控制台输出中添加了更多信息，以使递归调用链可见。
`recursionLevel`显示递归深度。
每个`primeFactorsR`-function 调用都会收到唯一的 ID（请参阅`funcId`-variable）。
函数 ID 序列创建唯一的递归调用路径 - `recursionPath`。

```
public class Tester {

    static boolean isPrime(int p) {
        for (int i = 2; i < p; i++) {
            if (p % i == 0) return false;
        }
        return true;
    }

    public static void primeFactors(int n, int recursionLevel) {
        primeFactorsR(n, n - 1, recursionLevel, null);
    }

    static int count1 = 1, count2 = 1, count3 = 1, count4 = 1;
    private static int recursionId = 1;

    public static void primeFactorsR(int n, int m, int recursionLevel, String recursionPath) {
        int funcId = recursionId++;

        if (recursionPath == null)
            recursionPath = String.format("%s", funcId);
        else
            recursionPath = String.format("%s-%s", recursionPath, funcId);

        if (isPrime(n)) {
            System.out.println(String.format("n %s recursionLevel %s recursionPath %s", n, recursionLevel, recursionPath));
            System.out.println("method1 " + count1++);
        } else if (n % m == 0) {
            System.out.println(String.format("n %s m %s recursionLevel %s recursionPath %s", n, m, recursionLevel, recursionPath));
            System.out.println("method2: " + count2++);
            primeFactorsR(m, m - 1, recursionLevel + 1, recursionPath);

            System.out.println(String.format("n %s m %s recursionLevel %s recursionPath %s", n, m, recursionLevel, recursionPath));
            System.out.println("method3: " + count3++);
            primeFactorsR(n / m, (n / m) - 1, recursionLevel + 1, recursionPath);
        } else {
            System.out.println(String.format("n %s m %s recursionLevel %s recursionPath %s", n, m, recursionLevel, recursionPath));
            //System.out.println("n " + n + " m - 1 " + ( m-1));
            System.out.println("method4: " + count4++);
            primeFactorsR(n, m - 1, recursionLevel + 1, recursionPath);
        }
    }

    public static void main(String[] args) {
        primeFactors(20, 1);
    }

} 
```

结果：

```
n 20 m 19 recursionLevel 1 recursionPath 1
方法4：1
n 20 m 18 recursionLevel 2 recursionPath 1-2
方法4：2
n 20 m 17 recursionLevel 3 recursionPath 1-2-3
方法4：3
n 20 m 16 recursionLevel 4 recursionPath 1-2-3-4
方法4：4
n 20 m 15 recursionLevel 5 recursionPath 1-2-3-4-5
方法4：5
n 20 m 14 recursionLevel 6 recursionPath 1-2-3-4-5-6
方法4：6
n 20 m 13 recursionLevel 7 recursionPath 1-2-3-4-5-6-7
方法4：7
n 20 m 12 recursionLevel 8 recursionPath 1-2-3-4-5-6-7-8
方法4：8
n 20 m 11 recursionLevel 9 recursionPath 1-2-3-4-5-6-7-8-9
方法4：9
n 20 m 10 recursionLevel 10 recursionPath 1-2-3-4-5-6-7-8-9-10
方法2：1
n 10 m 9 recursionLevel 11 recursionPath 1-2-3-4-5-6-7-8-9-10-11
方法4：10
n 10 m 8 recursionLevel 12 recursionPath 1-2-3-4-5-6-7-8-9-10-11-12
方法4：11
n 10 m 7 recursionLevel 13 recursionPath 1-2-3-4-5-6-7-8-9-10-11-12-13
方法4：12
n 10 m 6 recursionLevel 14 recursionPath 1-2-3-4-5-6-7-8-9-10-11-12-13-14
方法4：13
n 10 m 5 recursionLevel 15 recursionPath 1-2-3-4-5-6-7-8-9-10-11-12-13-14-15
方法2：2
n 5 recursionLevel 16 recursionPath 1-2-3-4-5-6-7-8-9-10-11-12-13-14-15-16
方法1 1
n 10 m 5 recursionLevel 15 recursionPath 1-2-3-4-5-6-7-8-9-10-11-12-13-14-15
方法3：1
n 2 recursionLevel 16 recursionPath 1-2-3-4-5-6-7-8-9-10-11-12-13-14-15-17
方法1 2
n 20 m 10 recursionLevel 10 recursionPath 1-2-3-4-5-6-7-8-9-10
方法3：2
n 2 recursionLevel 11 recursionPath 1-2-3-4-5-6-7-8-9-10-18
方法1 3

```

从结果中检查这一行：

```
n 10 m 5 recursionLevel 15 recursionPath 1-2-3-4-5-6-7-8-9-10-11-12-13-14-15
方法2：2
n 5 recursionLevel 16 recursionPath 1-2-3-4-5-6-7-8-9-10-11-12-13-14-15-16
方法1 1
n 10 m 5 recursionLevel 15 recursionPath 1-2-3-4-5-6-7-8-9-10-11-12-13-14-15
方法3：1
```

ID 为 15 的函数，调用 ID 为 16 的函数，打印行：

```
n 5 recursionLevel 16 recursionPath 1-2-3-4-5-6-7-8-9-10-11-12-13-14-15-16
```

之后，调用从 16 返回到 15，`n`函数 15 中的值仍然是`10`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:00:43.230

这是因为在您的第二个 if 语句中`n % m == 0`，它两次调用`primeFactorsR`. 第一个调用将您带入更深的堆栈，结果表明 5 是素数。然后它返回堆栈直到它到达它离开的地方并移动第二个打印语句，给你第二个 n 10 m 5。这是你的输出，它缩进每一层并打印出它在堆栈中的深度当它第一次进入`primeFactorsR`和结束时。它向右的方向是深入堆栈，上面的层被暂停。当该层完成处理后，它会返回上一层，如果该层还有更多工作要做，那么它将从中断的地方继续。

```
We are the top layer
n 20 m 19
method4: 1
   We are 1 layers deep
   n 20 m 18
   method4: 2
      We are 2 layers deep
      n 20 m 17
      method4: 3
         We are 3 layers deep
         n 20 m 16
         method4: 4
            We are 4 layers deep
            n 20 m 15
            method4: 5
               We are 5 layers deep
               n 20 m 14
               method4: 6
                  We are 6 layers deep
                  n 20 m 13
                  method4: 7
                     We are 7 layers deep
                     n 20 m 12
                     method4: 8
                        We are 8 layers deep
                        n 20 m 11
                        method4: 9
                           We are 9 layers deep
                           n 20 m 10
                           method2: 1
                              We are 10 layers deep
                              n 10 m 9
                              method4: 10
                                 We are 11 layers deep
                                 n 10 m 8
                                 method4: 11
                                    We are 12 layers deep
                                    n 10 m 7
                                    method4: 12
                                       We are 13 layers deep
                                       n 10 m 6
                                       method4: 13
                                          We are 14 layers deep
                                          n 10 m 5
                                          method2: 2
                                             We are 15 layers deep
                                             Prime 5
                                             method1 1
                                             Finished with layer 15
                                          n 10 m 5
                                          method3: 1
                                             We are 15 layers deep
                                             Prime 2
                                             method1 2
                                             Finished with layer 15
                                          Finished with layer 14
                                       Finished with layer 13
                                    Finished with layer 12
                                 Finished with layer 11
                              Finished with layer 10
                           n 20 m 10
                           method3: 2
                              We are 10 layers deep
                              Prime 2
                              method1 3
                              Finished with layer 10
                           Finished with layer 9
                        Finished with layer 8
                     Finished with layer 7
                  Finished with layer 6
               Finished with layer 5
            Finished with layer 4
         Finished with layer 3
      Finished with layer 2
   Finished with layer 1
Finished 
```

# cakephp - cakephp foreach 错误

> ID：10714494
> 
> 赞同：0
> 
> 时间：2012-05-23T06:18:55.563
> 
> 标签：cakephp, view

当试图运行这个代码蛋糕时，我们的 foreach 循环在视图中抛出了一个错误，我将包括模型、控制器和视图。此代码的最终目标是打印出用户自己的发票，而不是数据库中的每张发票。

模型

```
<?php
    class Invoice extends AppModel{ 
    var $name='invoice'; 
    public $useTable = 'invoices';
    public $primaryKey = 'id';} 
```

具有相关功能的控制器

```
<?php

class InvoicesController extends AppController{

    public function index(){
            $this->set('title_for_layout', 'indexPage');
        }

public function payinvoice($id = null){
        $this->set('title_for_layout', 'Pay Invoice');
        $this->set('stylesheet_used', 'homestyle');
        $this->set('image_used', 'eBOXLogoHome.jpg');   
        $this->layout='home_layout';

        $this->set('invoice', $this->Invoice->read(null, $id));
} 

 public function viewinvoice(){
        $this->set('title_for_layout', 'View invoice');
        $this->set('stylesheet_used', 'homestyle');
        $this->set('image_used', 'eBOXLogoHome.jpg');   
} 
```

查看文件

```
<table width="100%" border="1">

            <table width="100%" border="1">
                <tr>
                    <th>Biller</th>
                    <th>Subject</th>
                    <th>Date</th>
                    <th>Action</th>
                </tr>
            <?php foreach($invoice as $invoice): ?>
            <tr><td align='center'>
<?php echo $this->Html->link($invoice['Invoice']['biller'], 
array('action' => 'viewinvoice', $invoice['Invoice']['id'])); ;?> </td>
<td align='center'><?php echo $invoice['Invoice']['subject']; ?></td>
<td align='center'><?php echo $invoice['Invoice']['datecreated']; ?></td>
<td align='center'><a href="viewinvoice"><button>View Invoice</button></a><a href="disputeinvoice"><button>Dispute Invoice</button></a></td>
</tr><?php endforeach; ?>

            </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:37:11.940

几点：

```
foreach($invoice as $invoice): 
```

应该：

```
foreach($invoices as $invoice): 
```

正如其他一些人所提到的。

但根本的问题是，您读入 $invoice 的数据结构是一条记录，而不是多条记录的数组。

您可以一起取消 foreach ：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:10:21.250

我发现您的代码存在一些问题，您应该清除这些并重试（我认为错误不像您所说的那样出现在 foreach 行）

```
class Invoice extends AppModel{ 
    var $name='invoice'; 
    public $useTable = 'invoices';
    public $primaryKey = 'id';
} 
```

您在此处定义的所有属性都是默认值，因此无需定义它们，您可能需要的唯一一个是`var $name`如果您使用的是 PHP 4，否则您的模型可能只是：

```
class Invoice extends AppModel{ } 
```

接下来，尽量不要将您的 foreach 迭代器变量命名为与您正在迭代的数组相同，*这可能是您的问题的原因*。就我个人而言，我倾向于先调用数组`$items`，然后再调用其中的每个元素`$item`。

```
<?php foreach($invoices as $invoice): ?> 
```

这样你就不会意外覆盖原始数组中的某些内容......

# php - mvc 模式、框架、实现

> ID：10714495
> 
> 赞同：1
> 
> 时间：2012-05-23T06:19:02.187
> 
> 标签：php, mysql, model-view-controller

您好，我一般对 mvc 模式和框架有一些疑问。我知道 mvc 代表模型-视图-控制器，模型很胖，控制器很瘦，但我不太确定视图部分的一些细节。比如说我有这个模型

```
<?php
class Menu_Model extends Models
{
    public function listMenuItems()
    {
       return $this->query('some_select');
    }
} 
```

控制器

```
<?php
class Menu_Controller extends Controllers
{
   public function index()
   {
        $this->load('menu', 'Menu_Model');
        $this->view->assign('menuItems', $menu->listMenuItems());
        $this->view->add('menu.php');
   }
} 
```

看法

```
<div class="menu">
<li>{echo_some_data_from_controller}</li>
</div> 
```

上面的代码让我们说是一个简单的菜单，现在快写..作为一个例子。根据 mvc ideea，它需要有一个模型、一个视图和一个好的控制器，但是我如何在我拥有的每个视图中实现这个菜单？让我们假设：head.php 文件，我在其中保留 html 的导入 css 开头的基本内容和网站的标题，以从 mysql 获取菜单数据，我需要调用模型，但模型在控制器和每个页面都有它自己的控制器，所以根据我目前对每个控制器方法的理解，我需要调用某个模型菜单、登录表单等......在每个页面上输出我需要获取数据或我该怎么做做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T06:24:45.543

控制器的[职责是处理用户输入](https://stackoverflow.com/questions/3499336/in-mvc-where-do-you-draw-the-line-between-a-controller-and-model/3501048#3501048)。如果您的菜单不需要任何用户输入，请将代码放入 View Helper，然后从那里获取模型数据。然后[从 View 调用该 View Helper](https://stackoverflow.com/questions/1973221/can-i-call-a-model-from-a-view/1973695#1973695)。换句话说：你不需要控制器。

另一种方法是提供某种机制，允许您在每次调用 Controller 时注册通用功能，例如[Zend Frameworks 的 pre-和 post-dispatch hooks 之类的东西](http://framework.zend.com/manual/en/zend.controller.plugins.html)。然后，您可以为这些钩子编写插件，以在每个请求上加载和注入某些模型数据。

# http - XULRunner 应用程序请求头信息

> ID：10714497
> 
> 赞同：0
> 
> 时间：2012-05-23T06:19:21.657
> 
> 标签：http, browser, xulrunner

我开发了一个独立的 XULRunner 应用程序，用作特定于站点的浏览器。它访问的 Web 应用程序对浏览器进行过滤，以了解正在使用的浏览器是否是最佳的。我想将我的 XULRunner 应用程序添加到最佳浏览器列表中。我认为要做到这一点，我需要知道 XULRunner 应用程序发送的请求随附的 HTTP 标头信息。我可以使用 HTTP 标头中的哪些信息来识别我的 XULRunner 应用程序？诸如 Gecko Engine 版本之类的东西。我一直在寻找，但还没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:48:58.030

应用程序通常通过[`User-Agent`标头来标识](http://en.wikipedia.org/wiki/User_agent#User-agent_identification)。您可以通过[`window.navigator.userAgent`属性](https://developer.mozilla.org/en/DOM/window.navigator.userAgent)在客户端看到它，例如 Windows 7 上 Firefox 12 的标头是：

> Mozilla/5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0

这里重要的部分是`Gecko/...`（标识基于 Gecko 的浏览器）和`rv:...`（Gecko 版本）。该`Firefox/12.0`部分应替换为`MyApp/1.2.3`您的情况（应用程序的名称和版本号）。

# cross-browser - 哪个播放器拥有最大的浏览器支持？

> ID：10714498
> 
> 赞同：-1
> 
> 时间：2012-05-23T06:19:26.040
> 
> 标签：cross-browser, media-player

我们遇到了无法在我们的网站上播放音频和视频的用户的问题。最新的（我见过[这个](https://stackoverflow.com/questions/3388237/which-video-player-for-my-website-ie6-cross-browser-compatible "视频播放器问题")，但它不是很有帮助）——对于大多数用户来说，哪个是播放器的最佳选择？（PC 浏览器 - 特别是 IE8+、Firefox 和 Chrome。移动浏览器、iPhone、基于 Android 的系统等）

思想把我们带到了 HTML5、嵌入式 Flash 播放器、自动下载（不是我们喜欢的选项）。Silverlight 是我们现在遇到的问题。

很高兴听到这方面的见解！

**编辑：**似乎有 wmv 文件有点碍事......有什么解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:23:35.437

和 JWPlayer 类似，我用过[http://videojs.com/](http://videojs.com/)几次，效果很好。

# php - 根据分辨率计算拇指数

> ID：10714503
> 
> 赞同：0
> 
> 时间：2012-05-23T06:19:56.417
> 
> 标签：php, jquery, css, ajax, resolution

我有一个缩略图库，我只想显示“X”个图像，其中“X”根据他们的分辨率完全适合特定用户的浏览器窗口。

这很重要的原因是因为如果我不根据它们的分辨率来计算它，并提取静态数量的图像，在某些分辨率下，底行会有一个奇数。这看起来很丑陋。

有没有办法根据分辨率计算要显示的正确图像数量（如果需要，我可以通过 window.height 和 window.width 获得分辨率 - 拇指是动态拉动的，所以这不是问题）？

我目前这样做的方式是使用具有各种分辨率和硬编码“图像数量”值的巨大 switch 语句，并且页面加载将分辨率发送到 PHP 脚本，该脚本将其传递到此 switch 语句中，但是这是不切实际的并且似乎在不同的显示器上具有不可预测的行为，即使是具有相同分辨率的显示器。当然有一种方法可以动态计算吗？或者至少是我目前正在使用的看似糟糕的解决方案的更好解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:26:31.770

这听起来像是一个代数问题。给定宽度 x 高度......但我们知道缩略图不会挤压成不规则的大小。所以我们计算有多少将适合我们的宽度（给定它们之间的 css 边距）。对身高做同样的事情。我无法为您编写代码，因为我没有每个缩略图的宽度和高度，但我也看到它非常简单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:43:28.297

您可以通过传递一个过滤器函数来使用更强大的 jQuery`.filter()`函数版本。:p

```
$(selector).filter(function () { }); 
```

这将遍历 jQuery 对象中的每个元素，并针对它运行过滤器函数。如果函数返回一个`truthy`值，则保留该元素；`falsy`丢弃物。

因此，对于您的用例，让我们假设您的所有图库图像都以某种方式缓存在 jQuery 对象中：

```
// gallery images
var _images = $('img'); 
```

然后，您可以通过在其上运行过滤器功能来仅获取适合某些宽度的图像，例如：

```
var _fits = _images.filter(function () {

    // as the filter function iterates, 
    // [this] is the current element.

    return (this.width === window.width);
}); 
```

希望有帮助。

### 编辑

重读你的问题，我似乎误解了。

如果您有一组图像，并希望使其完全适合某个设定的宽度，则完全有可能拥有多个适合图像子集的可能组合，并且完全有可能没有子集完全适合。

一种（某种）简单的解决方法是仅使用布局插件为您完成繁重的算法工作。想到的一个是[Isotope](http://isotope.metafizzy.co/)（查看**fitRows**布局模式），它可以免费用于非商业/个人用途。

# android - Android 模拟器具有正确的代理服务器和公共 DNS 服务器地址，但无法解析主机名

> ID：10714507
> 
> 赞同：5
> 
> 时间：2012-05-23T06:20:13.497
> 
> 标签：android, eclipse, dns, emulation

我目前在 Eclipse Indigo Service Release 2 上运行 android 模拟器（Android 1.6 api level 4）版本 18，在 Debian 6.0 上使用 ADT 插件 18.0。我在代理地址的大学代理（鱿鱼）后面：`http://172.20.0.99:8080`没有身份验证。它是一个 eth0 连接，所以没有无线/局域网卡问题。我在环境变量和模拟器选项中都设置了代理。也正如之前的一些帖子中提到的，我提供了 -dns-server 选项。我的模拟器运行如下。

```
./emulator -avd "Android1_6" -dns-server "8.8.8.8" -http-proxy http://172.20.0.99:8080 -verbose
emulator: found SDK root at /opt/android-sdk-linux
emulator: Android virtual device file at: /home/dheeraj/.android/avd/Android1_6.ini
emulator: virtual device content at /home/dheeraj/.android/avd/Android1_6.avd
emulator: virtual device config file: /home/dheeraj/.android/avd/Android1_6.avd/config.ini
emulator: using core hw config path: /home/dheeraj/.android/avd/Android1_6.avd/hardware-qemu.ini
emulator: Found AVD target API level: 4
emulator: found skin 'WVGA800' in directory: /opt/android-sdk-linux/platforms/android-4/skins
emulator: autoconfig: -skin WVGA800
emulator: autoconfig: -skindir /opt/android-sdk-linux/platforms/android-4/skins
emulator: keyset loaded from: /home/dheeraj/.android/default.keyset
emulator: trying to load skin file '/opt/android-sdk-linux/platforms/android-4/skins/WVGA800/layout'
emulator: skin network speed: 'full'
emulator: skin network delay: 'none'
emulator: autoconfig: -kernel /opt/android-sdk-linux/platforms/android-4/images//kernel-qemu
emulator: autoconfig: -ramdisk /opt/android-sdk-linux/platforms/android-4/images//ramdisk.img
emulator: Using initial system image: /opt/android-sdk-linux/platforms/android-4/images//system.img
emulator: autoconfig: -data /home/dheeraj/.android/avd/Android1_6.avd/userdata-qemu.img
emulator: autoconfig: -initdata /home/dheeraj/.android/avd/Android1_6.avd/userdata.img
emulator: autoconfig: -cache /home/dheeraj/.android/avd/Android1_6.avd/cache.img
emulator: autoconfig: -sdcard /home/dheeraj/.android/avd/Android1_6.avd/sdcard.img
emulator: Physical RAM size: 128MB

Content of hardware configuration file:
  hw.cpu.arch = arm
  hw.ramSize = 128
  hw.touchScreen = yes
  hw.multiTouch = no
  hw.mainKeys = yes
  hw.trackBall = yes
  hw.keyboard = yes
  hw.keyboard.lid = yes
  hw.keyboard.charmap = qwerty2
  hw.dPad = yes
  hw.gsmModem = yes
  hw.camera = yes
  hw.camera.maxHorizontalPixels = 640
  hw.camera.maxVerticalPixels = 480
  hw.gps = yes
  hw.battery = yes
  hw.accelerometer = yes
  hw.audioInput = yes
  hw.audioOutput = yes
  hw.sdCard = yes
  hw.sdCard.path = /home/dheeraj/.android/avd/Android1_6.avd/sdcard.img
  disk.cachePartition = yes
  disk.cachePartition.path = /home/dheeraj/.android/avd/Android1_6.avd/cache.img
  disk.cachePartition.size = 66m
  hw.lcd.width = 480
  hw.lcd.height = 800
  hw.lcd.depth = 16
  hw.lcd.density = 240
  hw.lcd.backlight = yes
  hw.gpu.enabled = no
  hw.fakeCamera = back
  hw.webcam.count = 6
  hw.webcam.0.name = webcam0
  hw.webcam.1.name = webcam1
  hw.webcam.2.name = webcam2
  hw.webcam.3.name = webcam3
  hw.webcam.4.name = webcam4
  hw.webcam.5.name = webcam5
  hw.webcam.0.direction = front
  hw.webcam.1.direction = back
  hw.webcam.2.direction = front
  hw.webcam.3.direction = front
  hw.webcam.4.direction = front
  hw.webcam.5.direction = front
  vm.heapSize = 24
  hw.sensors.proximity = yes
  hw.sensors.magnetic_field = yes
  hw.sensors.orientation = yes
  hw.sensors.temperature = yes
  kernel.path = /opt/android-sdk-linux/platforms/android-4/images//kernel-qemu
  kernel.parameters =  android.checkjni=1
  disk.ramdisk.path = /opt/android-sdk-linux/platforms/android-4/images//ramdisk.img
  disk.systemPartition.initPath = /opt/android-sdk-linux/platforms/android-4/images//system.img
  disk.systemPartition.size = 128m
  disk.dataPartition.path = /home/dheeraj/.android/avd/Android1_6.avd/userdata-qemu.img
  disk.dataPartition.size = 128m
  avd.name = Android1_6
.
QEMU options list:
emulator: argv[00] = "./emulator-arm"
emulator: argv[01] = "-dns-server"
emulator: argv[02] = "8.8.8.8"
emulator: argv[03] = "-http-proxy"
emulator: argv[04] = "http://172.20.0.99:8080"
emulator: argv[05] = "-android-hw"
emulator: argv[06] = "/tmp/android-dheeraj/emulator-IJDCOv"
Concatenated QEMU options:
 ./emulator-arm -dns-server 8.8.8.8 -http-proxy http://172.20.0.99:8080 -android-hw /tmp/android-dheeraj/emulator-IJDCOv
emulator: registered 'boot-properties' qemud service
emulator: nand_add_dev: system,size=0x8000000,initfile=/opt/android-sdk-linux/platforms/android-4/images//system.img
emulator: mapping 'system' NAND image to /tmp/android-dheeraj/emulator-bhiKhz
emulator: rounding devsize up to a full eraseunit, now 8001000

WARNING: Data partition already in use. Changes will not persist!
emulator: nand_add_dev: userdata,size=0x8000000
emulator: mapping 'userdata' NAND image to /tmp/android-dheeraj/emulator-9Ay69J
emulator: rounding devsize up to a full eraseunit, now 8001000

WARNING: SD Card image already in use: /home/dheeraj/.android/avd/Android1_6.avd/sdcard.img
emulator: registered 'boot-properties' qemud service
emulator: Adding boot property: 'dalvik.vm.heapsize' = '24m'
emulator: Adding boot property: 'qemu.sf.lcd_density' = '240'
emulator: Adding boot property: 'qemu.hw.mainkeys' = '1'
emulator: Adding boot property: 'qemu.sf.fake_camera' = 'back'
DNS server name '8.8.8.8' resolved to 8.8.8.8:55
WARNING: Cache partition already in use. Changes will not persist!
emulator: nand_add_dev: cache,size=0x4200000
emulator: mapping 'cache' NAND image to /tmp/android-dheeraj/emulator-MS29Ce
emulator: Kernel parameters: qemu.gles=0 qemu=1 console=ttyS0 android.qemud=ttyS1 android.checkjni=1 ndns=1
waitpid(): No child processes
emulator: Trace file name is not set

emulator: autoconfig: -scale 0.888759
emulator: Realistic sensor emulation is not available, since the remote controller is not accessible:
 Connection refused
emulator: emulator window was out of view and was recentered

emulator: Could not open file: : No such file or directory
emulator: control console listening on port 5556, ADB on port 5557
emulator: sent '0012host:emulator:5557' to ADB server
emulator: setting up http proxy:  server=172.20.0.99 port=8080
emulator: ping program: /opt/android-sdk-linux/tools/ddms
emulator: ping command: /opt/android-sdk-linux/tools/ddms ping emulator 18.0
goldfish_fb_get_pixel_format:167: display surface,pixel format:
  bits/pixel:  16
  bytes/pixel: 2
  depth:       16
  red:         bits=5 mask=0xf800 shift=11 max=0x1f
  green:       bits=6 mask=0x7e0 shift=5 max=0x3f
  blue:        bits=5 mask=0x1f shift=0 max=0x1f
  alpha:       bits=0 mask=0x0 shift=0 max=0x0
emulator: User configuration saved to /home/dheeraj/.android/avd/Android1_6.avd/emulator-user.ini 
```

显然它能够正确设置代理和 reslove dns-server。当我在模拟器中打开浏览器并键入主机名时，例如`http://google.com`它无法连接（网页不可用），但使用直接 IP 地址（173.194.32.32）它能够连接（google.com）。我无法理解出了什么问题。在发布之前我也咨询了以下线程并尝试了各种解决方案但无济于事。我想知道我的桌面浏览器（firefox 12）如何进行 dns-lookup？我还尝试了从租约文件中获取的内部 dns-servers，但结果相同。请进一步指导我。甚至我的桌面浏览器如何解析主机名的信息也将是有益的。我在stackoverflow上咨询了许多有类似问题的线程，但由于声誉的限制，无法粘贴它们的链接。代码形式：

```
http://developer.android.com/guide/developing/devices/emulator.html

   http://stackoverflow.com/questions/2039964/how-to-connect-android-emulator-to-the-internet

   http://androidcommunity.com/forums/f4/emulator-problem-34262/

   http://code.google.com/p/proxoid/issues/detail?id=43

   http://stackoverflow.com/questions/9876471/android-emulator-sdk-cannot-access-internet-web-page-not-available-dns-not-re

   http://stackoverflow.com/questions/9812260/cant-do-reverse-dns-lookup-on-android 
```

我什至在eclipse中为我的项目输入了正确的运行配置-

```
-http-proxy http://172.20.0.99:8080 -dns-server 8.8.8.8 
```

但得到了相同的结果。

因为这是我在 stackoverflow 社区的第一篇文章，所以我想尽可能详尽。请告知我帖子中的任何不足之处。提前致以诚挚的感谢。

# c# - wp7如何扩大文本框的宽度

> ID：10714511
> 
> 赞同：1
> 
> 时间：2012-05-23T06:20:29.613
> 
> 标签：c#, windows-phone-7

我想在 onclick 期间扩展输入文本框的宽度。

例如，如果输入的默认宽度为 100px，当用户点击输入时，它会扩展为 150px 的宽度。

是否可以在 windows phone 7 应用程序中执行此操作？我的文本框被命名为**"SearchTextBox"**。

提前感谢您的辛勤工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:08:17.307

如果我从 XAML 中正确理解您的问题，请检查文本框的属性，`textwapping`或者`allowdrop`根据需要进行设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:19:56.957

尝试检查`AcceptReturn`文本框的属性为真。

编辑：我的错误，我的意思是 AcceptReturn，当你按下返回键时光标会向下移动吗？

# python - 在 python 中尝试例外：语法问题

> ID：10714512
> 
> 赞同：2
> 
> 时间：2012-05-23T06:20:32.070
> 
> 标签：python

```
class ShortInputException(Exception):
'''A user-defined exception class.'''
          def __init__(self, length, atleast):
                Exception.__init__(self)
                self.length = length
                self.atleast = atleast
try:
          s = raw_input('Enter something --> ')
          if len(s) < 3:
                raise ShortInputException(len(s), 3)

except ShortInputException, x:
           print 'ShortInputException: The input was of length %d, \
           was expecting at least %d' % (x.length, x.atleast) 
```

我不明白这一行的语法：`except ShortInputException, x:`

这里的 x 是干什么用的？？为什么它充当对象？

这条线有什么用？： `Exception.__init__(self)`

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T06:22:27.073

```
except ShortInputException, x: 
```

捕获类 ShortInputException 的异常并将异常对象的实例绑定到 x。

更常见的语法是

```
except ShortInputException as x 
```

[如PEP3110](http://www.python.org/dev/peps/pep-3110/)中所述，这是首选的。除非您需要支持 Python 2.5，否则您应该使用 as 版本。

* * *

```
Exception.__init__(self) 
```

调用超类的构造函数，该用户定义的类派生自该类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:31:18.993

> 这条线有什么用？：`Exception.__init__(self)`

`ShortInputException(Exception)`将您的类声明`ShortInputException`为`Exception`. `Exception.__init__(self)`调用父类的构造函数。

`except ShortInputException, x:`

从[文档](http://docs.python.org/tutorial/errors.html)：

> 当异常发生时，它可能有一个关联的值，也称为异常的参数。参数的存在和类型取决于异常类型。
> 
> except 子句可以在异常名称（或元组）之后指定一个变量。该变量绑定到一个异常实例，其参数存储在 instance.args 中。

`x`在您的示例中是引发的异常对象。

# winapi - windows下设置单线程为实时优先级

> ID：10714528
> 
> 赞同：2
> 
> 时间：2012-05-23T06:21:29.623
> 
> 标签：winapi

尽管进程不在实时优先级下运行，是否可以将单个线程的优先级设置为实时优先级？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-22T17:05:38.417

窗口[调度优先级](http://msdn.microsoft.com/en-us/library/windows/desktop/ms685100%28v=vs.85%29.aspx)清楚地描述了情况。没有称为“实时优先级”的线程优先级。线程可以获得的最高优先级是`THREAD_PRIORITY_TIME_CRITICAL`. 但这并不能完全描述线程的基本优先级。这也是由进程优先级决定的。对于几乎所有进程优先级类的设置`THREAD_PRIORITY_TIME_CRITICAL`将导致线程以 15 的基本优先级运行。一个例外是`REALTIME_PRIORITY_CLASS`. `THREAD_PRIORITY_TIME_CRITICAL`设置为在设置为以基本优先级 31 运行的进程内的线程`REALTIME_PRIORITY_CLASS`，这是要获得的最高优先级。

`NORMAL_PRIORITY_CLASS`和的结合`THREAD_PRIORITY_TIME_CRITICAL`使一个线程已经远远高于大多数其他线程（也是操作系统），但我不会称之为实时。

在我看来（如“调度优先级列表”中所述）实时仅从高于 15 的基本优先级开始。因此，线程只能在其进程具有`REALTIME_PRIORITY_CLASS`.

这意味着您的问题的正确答案是否定的。当线程的进程没有实时优先级时，线程无法获得实时优先级。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:11:45.390

可以使用[`SetThreadPriority`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686277%28v=vs.85%29.aspx)，但[不推荐](http://blogs.msdn.com/b/oldnewthing/archive/2010/06/10/10022675.aspx)。

# html - IE9 文本框自动编译出现在 textareabox 外部

> ID：10714530
> 
> 赞同：0
> 
> 时间：2012-05-23T06:21:52.503
> 
> 标签：html, css, internet-explorer-9

在使用 IE9 时，我在文本框输入中发现了一个奇怪的问题，代码如下

```
<input type="text" name="textbox" id="textbox_1" value=""> 
```

当我要在此处输入另一个值时，在第一个条目之后，自动编译文本将出现在文本区域之外。有什么办法可以关闭这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:55:38.337

autocomplete="off" 属性适用于除 Opera 之外的所有内容。可能是你需要的。

我真的不明白为什么自动完成是一个问题。它可以帮助用户，从而为他们提供更好的体验。删除此选项只会使用户体验更差。

# rest - 下面两种 URI 设计模式，哪个更 RESTful？

> ID：10714534
> 
> 赞同：0
> 
> 时间：2012-05-23T06:22:09.957
> 
> 标签：rest, restful-url

下面两种 URI 设计模式，哪个更 RESTful？
1) project/123/engineer/somebody/abilities
2)abilities?engineer=somebody&project=123

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T11:11:09.680

这两者的区别在于#1 是资源标识符，#2 是查询

两者都是 RESTful，尽管选择取决于目的。

# asp.net - 从字符串中读取 XML

> ID：10714535
> 
> 赞同：0
> 
> 时间：2012-05-23T06:22:17.117
> 
> 标签：asp.net, xml, visual-studio-2010, sql-server-2005

我有 XML 格式的数据。我将它存储在 varchar 数据类型列中。我已经通过在 Visual Studio 2010 中使用 Linq to sql 检索到它。我在字符串变量中获得了 xml 格式数据。现在我需要将其作为 Xml 阅读。我需要在特定节点中获取价值。

```
for example,
<Sale>
<LTV>150</LTV>
<CLTV>350</CLTV>
<DLTV>600</DLTV>
</sale> 
```

我需要获取 CLTV 的价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:32:29.740

尝试

```
 var xml = XElement.Parse("your xml");

//Gives you the value of the CLTV node
    xml.Descendants("CLTV").FirstOrDefault().Value; 
```

更改值

```
xml.Descendants("CLTV").FirstOrDefault().Value = "1";

//Save to disk
xml.Save({stream or file location});

//Get a string back
xml.ToString(); 
```

后代将为您提供可以枚举的 XElement 列表，或者通过执行 FirstOrDefault 您将获得它找到的第一个元素或一个空元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:37:17.197

此代码应该适合您：

```
using System.Xml;
...
string xmlStr = "<sale><LTV>150</LTV><CLTV>350</CLTV><DLTV>600</DLTV></sale>";
XmlDocument x = new XmlDocument();
x.LoadXml(xmlStr);
MessageBox.Show(x.GetElementsByTagName("CLTV")[0].InnerText); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:39:16.393

```
var value = XDocument.parse("YOUR_XML_STRING").Root.Element("ELEMENT_NAME").Value; 
```

# java - 如何使用返回参数从休眠中调用 sql server 函数？

> ID：10714539
> 
> 赞同：1
> 
> 时间：2012-05-23T06:22:35.013
> 
> 标签：java, hibernate

我在 SQL Server 中有一个函数，我想从休眠中调用它。我已经测试了这两种方法，但没有一种方法成功。第一种方法：

```
Session sixSession=HibernateUtil.getSessionFactory().openSession();
Query q2=sixSession.createQuery("from dbo.old_remaining(?)").setParameter("paymentVcode", p_Vcode);
        q2.getNamedParameters();
        List list=sixSession.getNamedQuery("{dbo.old_remaining(?)}").setString(1,"p_Vcode").list(); 
```

dbo.old_remaining 是我的函数，p_Vcode 是一个 int

错误是：

```
unexpected token: ( near line 1, column 23 [from dbo.old_remaining(?)] 
```

第二种方法：

```
Float var;
List li=session.getNamedQuery("{dbo.old_remaining(?)}")  
    .setString(1, var).list(); 
```

错误是：org.hibernate.MappingException：命名查询未知：{dbo.old_remaining(?)}

请帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:38:25.793

可以基于 CallableStatement 提出一种解决方法。这个标准的 jdbc 语句来调用函数：

```
session.doWork(new Work() {
    public void execute(Connection connection) throws SQLException {
        CallableStatement callable = connection.prepareCall("{? = call dbo.old_remaining(?)}");
        callable.registerOutParameter( 1, Types.FLOAT );
        callable.setString(2, "your string parameter");
        callable.execute();
        float functionResult = callable.getFloat(1);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:02:28.117

尝试以下代码

```
session.doWork(new Work() {
    public void execute(Connection conn) throws SQLException {
        PreparedStatement pstmt = conn.prepareStatement("SELECT dbo.old_remaining(?)");
        pstmt.setString(1,p_Vcode);
        ResultSet rs = pstmt.executeQuery();
        while( rs.next() )
        System.out.println( rs.getFloat(1) ) ;
    }
}); 
```

# objective-c - UIView 子视图不显示

> ID：10714540
> 
> 赞同：0
> 
> 时间：2012-05-23T06:22:37.683
> 
> 标签：objective-c, ios, uiview

我确信这是一个非常愚蠢的问题。我正在尝试将 UIImageView 作为子视图添加到 UIView。我尝试添加子视图的代码是：

```
for (int i = 0; i < kBoardSize; i++) {
    for (int j = 0; j < kBoardSize; j++) {

        Tile *t = [[Tile alloc] initWithPosition:CGPointMake(i, j) withSize:CGSizeMake(width, height)];

        [self insertSubview:t atIndex:0];
        //[self addSubview:t];
        //[self bringSubviewToFront:t];

        [temp addObject:t];
    }
} 
```

相应的 Tile（它是一个`UIImageView`子类）代码是：

```
- (id) initWithPosition:(CGPoint)position withSize:(CGSize)size
{
    self = [super initWithFrame:CGRectZero];
    [self setFrame:CGRectMake(position.x * size.width, position.y * size.width, size.width, size.height)];
    self.tag = position.x * kBoardSize + position.y;
    [self setPiece:EMPTY];
    if (self) {
        [self.layer setBorderColor:[[UIColor blackColor] CGColor]];
        [self.layer setBorderWidth:0.5];
    }
    return self;
} 
```

现在当我做

```
NSLog(@"%@", [[self subViews] description]);

2012-05-22 23:20:51.740 XXXXXXX[8204:f803] (
    "<Tile: 0x6a79380; baseClass = UIImageView; frame = (0 0; 106.667 106.667); opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0x6a7ad70>>",
    "<Tile: 0x6a94180; baseClass = UIImageView; frame = (0 106.667; 106.667 106.667); opaque = NO; userInteractionEnabled = NO; tag = 1; layer = <CALayer: 0x6a93e40>>",
    "<Tile: 0x6a97da0; baseClass = UIImageView; frame = (0 213.333; 106.667 106.667); opaque = NO; userInteractionEnabled = NO; tag = 2; layer = <CALayer: 0x6a97de0>>",
    "<Tile: 0x6a7aeb0; baseClass = UIImageView; frame = (106.667 0; 106.667 106.667); opaque = NO; userInteractionEnabled = NO; tag = 3; layer = <CALayer: 0x6a7aef0>>",
    "<Tile: 0x6a94610; baseClass = UIImageView; frame = (106.667 106.667; 106.667 106.667); opaque = NO; userInteractionEnabled = NO; tag = 4; layer = <CALayer: 0x6a94650>>",
    "<Tile: 0x6a946c0; baseClass = UIImageView; frame = (106.667 213.333; 106.667 106.667); opaque = NO; userInteractionEnabled = NO; tag = 5; layer = <CALayer: 0x6a94700>>",
    "<Tile: 0x6a94770; baseClass = UIImageView; frame = (213.333 0; 106.667 106.667); opaque = NO; userInteractionEnabled = NO; tag = 6; layer = <CALayer: 0x6a947b0>>",
    "<Tile: 0x6a94820; baseClass = UIImageView; frame = (213.333 106.667; 106.667 106.667); opaque = NO; userInteractionEnabled = NO; tag = 7; layer = <CALayer: 0x6a94860>>",
    "<Tile: 0x6a948d0; baseClass = UIImageView; frame = (213.333 213.333; 106.667 106.667); opaque = NO; userInteractionEnabled = NO; tag = 8; layer = <CALayer: 0x6a94910>>"
) 
```

它表明子视图已正确添加。但是子视图实际上并没有显示在视图中。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:22:47.143

Vashishtha Jogi，你应该看看[The Designated initializer](http://developer.apple.com/library/ios/#documentation/general/conceptual/DevPedia-CocoaCore/MultipleInitializers.html)，以及它是如何工作的。要点是任何 initSomething 方法最终都会调用指定的初始化程序，因此正确调用它很重要。

# joomla - Joomla Virtuemart 信用卡问题

> ID：10714545
> 
> 赞同：0
> 
> 时间：2012-05-23T06:22:54.893
> 
> 标签：joomla, virtuemart

我正在使用 Joomla 1.5 和 VM 1.1.9 V，因为我正在添加信用卡选项并对其进行处理，因此引发以下错误

```
Error : Failed Payment Processing. Technical Notes: The required transaction key is empty! The payment method settings must be reviewed. Error : Failed Payment Processing (ps_authorize) 
```

请帮我解决这个问题。接下来要配置什么以使其可行。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:10:11.873

这意味着您没有设置交易密钥，这意味着您没有选择在线市场服务，我认为这是一个让您的支付系统正常工作的好教程：

[http://www.tonytechgeek.com/how-to-setup-credit-card-with-virtuemart-and-best-service-to-choose/](http://www.tonytechgeek.com/how-to-setup-credit-card-with-virtuemart-and-best-service-to-choose/)

# jquery - 通过 MVC、jQuery、Ajax 上传文件

> ID：10714559
> 
> 赞同：0
> 
> 时间：2012-05-23T06:23:38.727
> 
> 标签：jquery, ajax, asp.net-mvc, model-view-controller

我通过 MVC、jQuery、Ajax 创建了文件上传器。但它仅适用于 1 到 3 KB 的文件，不适用于较大的文件。如何上传较大的文件？

**HTML：**

```
<input type="file" name="bfile"  size="50" id="bfile"/>
   <input type="butt 
```

**AppAttachmentsController-控制器代码：**

```
 public string file_upload(string file_name, string file_binary)
        {

            byte[] byteArray = System.Text.Encoding.ASCII.GetBytes(file_binary);
            MemoryStream stream = new MemoryStream(byteArray);
            string path=Server.MapPath(Url.Content("~/upload/file"))+"\\"+file_name;
            using (var fileStream = new FileStream(path, FileMode.Create))
                stream.CopyTo(fileStream);

            return "1";
        } 
```

**jQuery，阿贾克斯**：

```
function AttachemtPost() {
    var file_name = $("#bfile").val(); 
    var data = "file_name=" + file_name;
    var file = document.getElementById('bfile').files[0];
    var file_binary = file.getAsBinary();
    var file_size = file.fileSize;
    var file_text = file.getAsText("");
    alert('file :' + file_binary);
    alert('file size:' + file_size);
    data = "file_name=" + file_name + "&file_binary=" + file_binary;       
    ajaxlocalcall2(null, "POST", '@Url.Content("~/AppAttachments/file_upload")', data, "", "", "html", "oncontactinfosave");    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:28:12.407

您可以尝试增加 web.config 中允许的最大请求大小，默认为 4MB：

```
<httpRuntime maxRequestLength="size in kbytes" /> 
```

此外，如果您在 IIS 7+ 中托管您的应用程序，您应该设置[请求限制](http://www.iis.net/ConfigReference/system.webServer/security/requestFiltering/requestLimits)：

```
<system.webServer>
    <security>
        <requestFiltering>
            <requestLimits maxAllowedContentLength="size in bytes" />
        </requestFiltering>
    </security>
</system.webServer> 
```

# asp.net-mvc - .net 架构，用于基于模块的解决方案

> ID：10714561
> 
> 赞同：2
> 
> 时间：2012-05-23T06:23:49.100
> 
> 标签：asp.net-mvc, architecture, mef, prism-4

我正处于项目（.Net c#、mvc 或 silverlight）的研究/规划阶段。这是一个 Web 项目，提供捆绑到包中的某些服务。客户可以注册不同的套餐之一。

我正在寻找有关将哪种架构/框架用于此类项目的任何建议。我希望能够根据包加载或卸载模块。我还希望能够在包本身中启用和禁用功能。

这些模块必须是高度可移植的并且可以插入到不同的客户端中。我知道有 MEF 和 Prism，但我并没有真正使用过两者。我还阅读了有关 MVC 和区域的信息。如果任务足够简单，我宁愿从头开始设计所有东西，而不是依赖第三方。我只是不知道从哪里或如何开始。

我很欣赏这些建议。MG

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:36:39.127

你可以忘记卸载。您必须使用单独的 appdomsins 才能卸载模块。这不是我在 ASP.NET 网站上尝试过的。

您必须习惯于始终加载所有模块的想法。您可以使用基于角色的安全性来控制用户是否可以使用模块（每个插件一个或多个角色）。

至于动态加载东西：我写了一篇关于如何使用我的 Griffin.MvcContrib 创建插件系统的文章：http: [//www.codeproject.com/Articles/386674/ASP-NET-MVC-3-plug-架构内使用-Griffin-M](http://www.codeproject.com/Articles/386674/ASP-NET-MVC-3-plug-in-architecture-using-Griffin-M)

# c# - 在 WPF 中的 MainWindow 上绘画

> ID：10714562
> 
> 赞同：3
> 
> 时间：2012-05-23T06:23:57.307
> 
> 标签：c#, wpf, xaml, drawing

我尝试在我的 MainWindow 上绘画。我使用这个示例代码：

主窗口.xaml.cs

```
namespace WpfApplication4
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }

        protected override void OnRender(DrawingContext drawingContext)
        {
            Trace.WriteLine("OnRender");

            drawingContext.DrawRectangle(Brushes.Red, new Pen(Brushes.Black, 5), new Rect(20, 20, 250, 250));

            base.OnRender(drawingContext);
        }
    }
} 
```

主窗口.xaml

```
<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="400" Width="600">
</Window> 
```

在输出窗口中，我看到消息“OnRender”，但没有绘制任何内容。 ![主窗口和输出](../Images/3a8b6494d81f32e6640a58e3565c5807.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T06:48:31.060

`Background="Transparent"`在 Window 的 XAML 中设置。

并且总是在您自己的图纸之前调用，*因为*`base.OnRender`您想绘制基类图纸（如果有的话）。

# android - Android Verilook 嵌入式 SDK 集成

> ID：10714563
> 
> 赞同：1
> 
> 时间：2012-05-23T06:23:58.667
> 
> 标签：android, sdk

我是一名 Android 移动应用程序开发人员。我想集成[Verilook Embedded SDK](http://www.neurotechnology.com/vl_sdk.html)用于人脸检测/识别和指纹检测。我需要指导如何做到这一点。

这是下载[SDK 和文档 PDF 文件](http://www.neurotechnology.com/download.html#megamatcher_verifinger_verilook_verieye_sdk_trial)和下载**生物识别 SDK 试用**版的链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:37:32.707

尝试这个，

**第 1 步：**下载 Zip 文件

**第二步：**解压

**第 3 步：**浏览解压后的文件夹 MegaMatcherEmbeddedFolder->Documentation->MegaMatcher.pdf。它清楚地说明了要做什么。

**运行样本**的步骤（这些步骤仍然在 pdf 中）

MegaMatcher 1.1、VeriFinger 1.1、VeriLook 1.1、VeriEye 1.0 和 VeriSpeak 1.0 Embedded SDK for Android Java 项目（示例程序）是使用 Eclipse 和 Apache Maven 工具构建和管理的。

使用 Maven 编译 Java 示例的说明：（注意：Eclipse Indigo 或更高版本已集成 Apache Maven。如果您使用的是 Eclipse Indigo 或更高版本，则不需要执行步骤 1-2）。

1.  下载 (http://maven.apache.org/download.html) 并集成 Apache Maven for Eclipse (http://maven.apache.org/eclipse-plugin.html)。Java 项目需要 Apache Maven 3.0.3 或更高版本。下载的 Maven 包包含带有安装说明的 README.txt 文件。

2.  将 Apache Maven 集成到 Eclipse IDE。（http://eclipse.org/m2e/）。

3.  运行 Eclipse IDE 并导入 Java 项目（SDK 提供的示例应用程序之一）。选择文件->导入->Maven->现有 Maven 项目。按下一步按钮。

4.  在下一个对话框窗口中，浏览 SDK 中的 Samples 根文件夹。选择项目 pom.xml 文件并按下一步。

5.  在最后一个窗口中，只需选择完成按钮。

6.  在 Eclipse 中，在 Package Explorer 中找到导入的项目并右键单击它。选择运行方式 -> Maven 安装。它将开始下载所需的软件包。如果它会报告缺少依赖项（请参阅控制台输出），请再次右键单击项目并选择 Run As -> Maven Build。在主选项卡中找到目标字段并输入验证。

    7.要部署和运行一个项目，右键单击它并选择 Run As -> Maven Build... 在 Main 选项卡中找到Goals字段并输入“android:redeploy android:run”。

希望能帮助到你。

# iphone - 如何控制我的表格视图单元格标签？

> ID：10714564
> 
> 赞同：-1
> 
> 时间：2012-05-23T06:24:00.427
> 
> 标签：iphone, objective-c, ios, ios5

我是 iPhone 开发的新手。我正在开发一个应用程序，其中包含单元格内带有标签的表格视图。我已经为每一行放置了不同的标签，就像`if(indexpath.row == 0)`我所做的每个单元格行一样。但是当我滚动表格视图时，我的标签变得混杂了。请帮我！

```
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
}

if (indexPath.row == 2)
{
    pendingListNumberLabel = [[UILabel alloc] init];
    pendingListNumberLabel.font = [UIFont fontWithName:@"Helvetica" size:14];
    pendingListNumberLabel.textAlignment = UITextAlignmentLeft ;
    pendingListNumberLabel.textColor = [UIColor orangeColor];
    pendingListNumberLabel.frame = CGRectMake(240, 6, 110, 30);
    [pendingListNumberLabel setBackgroundColor:[UIColor clearColor]];
    [cell addSubview:pendingListNumberLabel];
}

cell.textLabel.text = [affiliationsArray objectAtIndex:indexPath.row];
[cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
return cell; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:31:52.583

`if (cell == nil)`您可以通过省略检查来解决标签混合的问题。使用下面的代码：

```
static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
//if (cell == nil) // Need not this checking 
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease]; 
```

如上直接使用单元分配:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:37:56.083

发生这种情况是因为您使用的是可重复使用的单元格而不是正确的方式..

只需替换您的代码-

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil)
{
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
} 
```

有了这个 -

```
UITableViewCell *cell = [[UITableViewCell alloc] init]; 
```

上面的代码可以解决你的问题，但是如果有大量的单元格，这就不好了。在这种情况下，您应该使用可重复使用的单元格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:50:24.693

```
if (cell == nil)
{
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault  reuseIdentifier:CellIdentifier] autorelease];
}
else
        {
            UILabel *titleLbl = (UILabel *)[cell viewWithTag:1];
            [titleLbl removeFromSuperview];
        }

if (indexPath.row == 2)
{
    pendingListNumberLabel = [[UILabel alloc] init];
    pendingListNumberLabel.font = [UIFont fontWithName:@"Helvetica" size:14];
    pendingListNumberLabel.textAlignment = UITextAlignmentLeft ;
    pendingListNumberLabel.textColor = [UIColor orangeColor];
    pendingListNumberLabel.tag = 1;// Write here.....................................
    pendingListNumberLabel.frame = CGRectMake(240, 6, 110, 30);
    [pendingListNumberLabel setBackgroundColor:[UIColor clearColor]];
    [cell addSubview:pendingListNumberLabel];
}

cell.textLabel.text = [affiliationsArray objectAtIndex:indexPath.row];
[cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
return cell; 
```

我想这会对你有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T06:41:36.570

在您的`tableView:cellForRowAtIndexPath:`方法中，首先像这样获取选定的行

```
NSUInteger row = [indexPath row]; 
```

然后使用“行”从`NSArray`对应于 tableView 行的数据中获取数据，并将其分配给单元格的 textLabel 的 text 属性，如下所示

```
NSString *string = [NSString stringWithFormat:@"%@",self.allItems objectAtIndex:row];
cell.textLabel.text = string;
return cell; 
```

当然，您应该已经创建了一个`UITableViewCell`带有这样的重用标识符的：

```
static NSString *TableIdentifier = @"TableIdentifier";

UITableViewCell *cell = [tv dequeueReusableCellWithIdentifier:TableIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc]
            initWithStyle:UITableViewCellStyleValue1
            reuseIdentifier:TableIdentifier];
} 
```

关键是使用与您的表格行完全对应的数组。（即 - 数组中的第 0 项对应于 tableView 中的第 0 行）那么你就不会出错。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T07:01:42.123

您将 UILabel 添加为子视图，这是这里的错误。通常你会为这种东西使用自定义的 UITableViewCell ，但快速修复是这样的：

```
if (indexPath.row == 2)
{
    pendingListNumberLabel = [[UILabel alloc] init];
    pendingListNumberLabel.font = [UIFont fontWithName:@"Helvetica" size:14];
    pendingListNumberLabel.textAlignment = UITextAlignmentLeft ;
    pendingListNumberLabel.textColor = [UIColor orangeColor];
    pendingListNumberLabel.frame = CGRectMake(240, 6, 110, 30);
    [pendingListNumberLabel setBackgroundColor:[UIColor clearColor]];
    pendingListNumberLabel.tag = 1337
    [cell addSubview:pendingListNumberLabel];
} else {
    for (UIView * subView in [cell subviews]) {
        if ([subView tag] == 1337) {
            [subView removeFromSuperview];
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-23T06:34:42.420

为了解决这个问题，您可以`cell=nil;`在检查`cell== nil`条件之前放置或每次创建单元格。它会起作用，但**它不是一个好习惯**。

这也适用于文本

静态 NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

单元格=无；

如果（单元格 == 零）

{

```
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease]; 
```

}

if (indexPath.row == 2) {

```
pendingListNumberLabel = [[UILabel alloc] init];

pendingListNumberLabel.font = [UIFont fontWithName:@"Helvetica" size:14];

pendingListNumberLabel.textAlignment = UITextAlignmentLeft ;

pendingListNumberLabel.textColor = [UIColor orangeColor];

pendingListNumberLabel.frame = CGRectMake(240, 6, 110, 30);

[pendingListNumberLabel setBackgroundColor:[UIColor clearColor]];
[cell addSubview:pendingListNumberLabel]; 
```

}

cell.textLabel.text = [affiliationsArray objectAtIndex:indexPath.row];

[单元集附件类型：UITableViewCellAccessoryDisclosureIndicator]；

返回单元格；

# ruby-on-rails - Rails3 具有默认基础的嵌套路由

> ID：10714566
> 
> 赞同：0
> 
> 时间：2012-05-23T06:24:08.633
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes, nested-routes, friendly-id

从 rails guides 中的示例，路线如下：

```
resources :publishers do
  resources :magazines do
    resources :photos
  end
end 
```

将导致 URL 如下：

```
/publishers/1/magazines/2/photos/3 
```

例如，我想为发布者提供 slug 并避免第一个“/publishers”部分将 URL 设置为：

```
/oxford/1/magazines/2/photos/3 
```

在 Rails 3 中实现这一目标的最干净和最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:00:06.833

```
scope :path => ":publisher_slug", :as => "publisher" do
  resources :magazines do
    resources :photos
  end
end

publisher_magazine_photo_path("oxford",2,3) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T06:43:27.350

你可能想看看

[https://github.com/norman/friendly_id](https://github.com/norman/friendly_id)

而这个railscast：

[http://railscasts.com/episodes/314-pretty-urls-with-friendlyid](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)

# ruby-on-rails - 无论标签的长度如何，如何对齐 Dropbox？

> ID：10714568
> 
> 赞同：0
> 
> 时间：2012-05-23T06:24:21.317
> 
> 标签：ruby-on-rails, css, ruby

我正在使用rails，我有然后<%= select ...>。但是有三行，并且保管箱在标签结束后立即开始，并且标签的长度都不同，因此保管箱未对齐。我不确定我需要更改代码的哪一部分来设置它们的对齐方式。CSS？我有一些想法（创建一张桌子，制作一个班级等）但他们没有工作，所以我希望有人能让我知道前进的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T04:40:39.447

将一个类放到标签标签上，然后在该类的 css 中，您需要：

1.  添加大于最大标签的固定宽度
2.  确保标签具有“display：inline-block”或“display：block”，因为它需要表现得像块样式（而不是跨度样式）对象以在大多数显示器上强制宽度。

# php - 组功能的无效使用

> ID：10714570
> 
> 赞同：0
> 
> 时间：2012-05-23T06:24:28.730
> 
> 标签：php, mysql

大部分查询都放在变量中，但出于这个问题的目的，我将它们包含在查询中。Margin 是它上面的所有别名查询的总和 ($margin)。

我收到错误消息：

SQLSTATE[HY000]：一般错误：1111 在第 117 行的 company-performance-control.php 中使用组函数无效

这是我的查询：

```
$margin = $invoicesOut.'-'.$costs.'+'.$creditsIn.'-'.$creditsOut ;

$result = $dbh->query("SELECT CONCAT(MONTH(invoices_out.date), '/', YEAR(invoices_out.date)) AS theDate,
                           SUM(COALESCE(
                           (SELECT SUM(invoices_out.net/rate)
                                FROM invoices_out, (SELECT jobRef, invoiceRef FROM invoices_out_reference GROUP BY invoiceRef) AS unique_references
                                WHERE unique_references.invoiceRef = invoices_out.id
                                AND unique_references.jobRef = jobs.id
                           ),
                       0)) AS invoiced,
                           SUM((SELECT SUM((quantity*parts_trading.sellingNet)/currencies.rateVsPound)
                FROM parts_trading, currencies
                WHERE parts_trading.sellingCurrency = currencies.id
                AND parts_trading.enquiryRef = enquiries.id
                AND jobs.id NOT IN
                    (SELECT DISTINCT jobRef FROM invoices_out_reference)
            )
            +
            COALESCE(
            (SELECT SUM(enquiries_custom_fees.feeAmountNet/currencies.rateVsPound)
                FROM enquiries_custom_fees, parts_trading, currencies
                WHERE enquiries_custom_fees.enquiryRef = enquiries.id
                AND enquiries_custom_fees.enquiryRef = parts_trading.enquiryRef
                AND parts_trading.sellingCurrency = currencies.id
            ),
            0
            )) AS pending,
                           SUM(COALESCE(
                (SELECT SUM(net)
                FROM credit_notes_supplier, parts_trading_buying
                WHERE credit_notes_supplier.partRef = parts_trading_buying.id
                AND parts_trading_buying.enquiryRef = enquiries.id)
              ,0
              )) AS creditsIn,
                           SUM(COALESCE(
                (SELECT SUM(net)
                FROM credit_notes_customer, parts_trading
                WHERE credit_notes_customer.partRef = parts_trading.id
                AND parts_trading.enquiryRef = enquiries.id)
               ,0
               )) AS creditsOut,
                           SUM(((SELECT SUM(qty*(parts_trading_buying.buyingNet/currencies.rateVsPound))
                FROM parts_trading_buying, currencies
                WHERE parts_trading_buying.buyingCurrency = currencies.id
                AND parts_trading_buying.enquiryRef = enquiries.id
          )
          +
          COALESCE(
          (SELECT SUM(parts_trading_buying_charges.feeAmountNet)
               FROM parts_trading_buying_charges, parts_trading_buying
               WHERE parts_trading_buying_charges.partRef = parts_trading_buying.id
               AND parts_trading_buying.enquiryRef = enquiries.id
          )
          , 0))) AS costs,
                           SUM($margin) AS margin
                           FROM jobs, enquiries, invoices_out,
                           (SELECT jobRef, invoiceRef
                                FROM invoices_out_reference
                                GROUP BY invoiceRef
                           ) AS unique_invoice_refs
                           WHERE enquiries.id = jobs.enquiryRef
                           AND unique_invoice_refs.invoiceRef = invoices_out.id
                           AND jobs.id = unique_invoice_refs.jobRef
                           AND jobs.stateRef != 1
                           AND jobs.stateRef != 5
                           GROUP BY YEAR(invoices_out.date), MONTH(invoices_out.date)") ; 
```

* * *

我把它缩小到这些：

```
SUM($creditsIn) AS creditsIn
SUM($creditsOut) AS creditsOut 
```

其中定义为：

```
$creditsIn = 'COALESCE(
                    (SELECT SUM(net)
                    FROM credit_notes_supplier, parts_trading_buying
                    WHERE credit_notes_supplier.partRef = parts_trading_buying.id
                    AND parts_trading_buying.enquiryRef = enquiries.id)
                  ,0
                  )' ;

    $creditsOut = 'COALESCE(
                    (SELECT SUM(net)
                    FROM credit_notes_customer, parts_trading
                    WHERE credit_notes_customer.partRef = parts_trading.id
                    AND parts_trading.enquiryRef = enquiries.id)
                   ,0
                   )' ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:47:12.320

多么大的疑问！

解决此问题。只需一次删除每个子查询，然后确定是哪个查询引起的。

# php - 修改 PDF 并重用嵌入字体

> ID：10714572
> 
> 赞同：1
> 
> 时间：2012-05-23T06:24:40.180
> 
> 标签：php, pdf, fpdf, embedded-fonts, fpdi

我想用 PHP 修改 PDF 文档。我找到了允许创建和修改 PDF 文件的库[FPDF](http://www.fpdf.org/)和[FPDI 。](http://www.setasign.de/products/pdf-php-solutions/fpdi/)这是我非常简单的代码：

```
<?php
require_once('include/fpdf.php');
require_once('include/fpdi.php');

// initiate FPDI
$pdf = new FPDI();
// add a page
$pdf->AddPage();
// set the sourcefile
$pdf->setSourceFile('input.pdf');
// import page 1
$page1 = $pdf->importPage(1);
// insert the page
$pdf->useTemplate($page1);

// now write some text above the imported page
$pdf->AddFont('calibri');
$pdf->SetFont('calibri','',11);
$pdf->Write(0, "This is just a simple text");

header("Content-Type: application/pdf");
$pdf->Output(); 
```

这很好用，但我看到插入的文本添加了对系统字体的引用，而不是已经嵌入的字体。我怎样才能简单地重用嵌入的字体？

如果该库无法做到这一点，请随时将我指向第三个免费库。

* * *

我知道我可以只使用已经使用过的字符，但这在我的特殊情况下没有问题。我检查了所有可能的字符都以正确的大小写敏感度使用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-05T20:03:34.607

我敢打赌，您从导入的 PDF 页面中嵌入的字体不会被调用`calibri`。（PDF 中字体名称的小写拼写非常罕见。）

我还敢打赌，PDF 不会`Calibri`作为全套嵌入。它很可能只是一个子集。并且作为子集，字体名称将由随机的 6 个大写字母前缀 + 原始字体名称组成，如下所示：

```
 AXBTZV+Calibri 
```

您必须找到确切的名称并尝试使用它。（但是，我不确定您的 PHP 库是否是如何工作的，它是否可以做到这一点，以及它是否会以正确的方式处理 PDF 文本编写代码的修改。给我 PDF，我很可能可以做到它在文本编辑器中，虽然......）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:49:18.263

在 PDF 中重用字体几乎是不可能的，因为只存储了 PDF 中使用的字符。因此，如果您从未`W`在 PDF 模板中使用过大写字母，并且想用一个添加文本，那么它就无法显示。

这并不能回答您的问题，而是告诉您根本不要尝试。

# magento - Magento中客户的IP地址

> ID：10714578
> 
> 赞同：3
> 
> 时间：2012-05-23T06:25:11.353
> 
> 标签：magento

我想要用户查看当前页面的 IP 地址

我正在使用

```
echo $_SERVER['REMOTE_ADDR']; 
```

它告诉我`127.0.0.1`

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-06T12:10:21.780

这是获取客户 IP 地址的 Magento 函数：

```
echo Mage::helper('core/http')->getRemoteAddr(); 
```

`getRemoteAddr()`也接受一个布尔参数。当`false`（默认）时，它将返回 IP 地址作为常用点分十进制表示法的字符串（例如 192.168.0.1）。何时`true`以十进制表示法返回 IP - 一个 32 位整数。请参阅[IPv4 地址表示](http://en.wikipedia.org/wiki/IPv4#Address_representations)以了解这些格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:13:49.743

当 Magento（服务器）和浏览器（客户端）都在您的计算机上时（`localhost`），那么这*不是*错误，而是更正 PHP`$_SERVER['REMOTE_ADDR']`包含`127.0.0.1`（或`::1`）。

这是因为 127.0.0.1 是任何`localhost`.

[请参阅RFC 5735](https://www.rfc-editor.org/rfc/rfc5735)的“3\. 全局和其他专用地址块”部分：

> 127.0.0.0/8 - 此块被分配用作 Internet 主机环回地址。由更高级别协议发送到该块内任何地址的数据报在主机内部循环返回。这通常仅使用 127.0.0.1/32 进行环回来实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T15:47:48.727

你可以使用这个：`Mage::helper('core/http')->getRemoteAddr();`

这将返回 IP 地址，例如 '127.0.0.1'

使用`Mage::helper('core/http')->getRemoteAddr(true);`时会返回 long (2130706433)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-08T10:08:46.137

如果您的机器在代理后面，最好使用这种代码：

$ips = explode(',', $_SERVER['HTTP_X_FORWARDED_FOR']); $ip =trim($ips[count($ips) - 1]);

# java - 使用 Jena 读取限制约束

> ID：10714582
> 
> 赞同：1
> 
> 时间：2012-05-23T06:25:54.363
> 
> 标签：java, jena, owl, protege4

我有一些对象限制，例如

```
hasVendor some Vendor
hasYear some integer[minLength 2, maxLength 4, >=1995, <=2012]
hasPrice only string[pattern "/^[0-9]+(\.[0-9]{2})?$/"] 
```

其中供应商是一个类。我按照此链接的说明：[https](https://stackoverflow.com/a/7805455/1138148) ://stackoverflow.com/a/7805455/1138148阅读了限制。我需要使用 Jena 从每个这些限制中获取约束值。在第一种情况下，我能够获得`'Vendor'`约束，但是对于第 2 和第 3 种情况，我得到了一些类似垃圾的值，例如：

`7cbf42c2:137784f42b4:-7d1f`和 `7cbf42c2:137784f42b4:-7d29`相应的。这些价值观是什么？如何检索模式本身以及值 minLength、1995 等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T19:59:34.787

这些是这些限制中中间节点的 bnode 标识符。结果数据中的“东西”比以曼彻斯特语法序列化时显示的要多得多。您需要查看 w3c 上的[OWL 到 RDF 映射文档](http://www.w3.org/TR/owl2-mapping-to-rdf/)，以了解更多关于它是如何发生的。

我不建议自己进行验证。如果你打算在 OWL 中表示这些东西，你可以使用推理器来告诉你什么时候违反了限制。这在大多数情况下都会起作用，但是在开放世界与封闭世界之间存在一些陷阱，您需要注意这些陷阱才能真正做到这一点。您还可以查看[Pellet 提供的](http://clarkparsia.com/pellet/icv/)诸如 Integrity Constraint Validation 之类的东西，它可以让您在 OWL 中编写约束并将封闭世界语义应用于它们，从而提供更自然（尤其是如果您来自 RDBMS 世界）的工作方式他们。

但是，如果您必须手动处理这些限制，您将需要更深入地研究限制的底层 RDF 结构以获取您正在寻找的位，或者使用实际设计用于使用 OWL 的 API ，例如[OWLAPI](http://owlapi.sourceforge.net/)。

# c - 如何在 mex 结构中设置向量元素

> ID：10714583
> 
> 赞同：3
> 
> 时间：2012-05-23T06:26:02.937
> 
> 标签：c, arrays, matlab, structure, mex

我正在尝试在 mex 函数中填充结构。我有在 mexFunction 中创建的结构的基础知识，但是当结构中的一个字段是一个数组并且我想在“for”循环迭代时填充这个数组中的每个元素时，它会变得有点混乱。

```
....
mxArray *value;
mwSize dims[2] = {16,8};
int numFields = 2;  
const char *fieldNames[] = {"array1", "array2"}; 
plhs[2] = mxCreateStructArray(2, dims, numFields, fieldNames);

for (int i = 0; i < 16; i++)
{
    for (int j = 0; j < 8; j ++)
    {
        value1 = (some calculation);
        value = mxCreateDoubleMatrix(1,18,mxREAL); 
        *mxGetPr(value[sampleIndex]) = value1;
        mxSetField(plhs[2], i, "array1", value);
        // i want to set the array1[j] element

        value2 = (some other calculation);
        value = mxCreateDoubleMatrix(1,8,mxREAL); 
        *mxGetPr(value) = value2;
        mxSetField(plhs[2], i, "array2", value);

    }
}
.... 
```

字段“array1”和“array2”都是相同大小的向量（比如说 8 个元素）我不知道如何填充每个单独的元素。如何通过数组索引“j”设置字段名称。

为了便于解释，结构应该是这样的：结构是一个包含 16 个元素的数组，每个元素有 2 个字段，每个字段有 8 个元素

```
structure(0).array1 = [1 2 3 4 5 6 7 8];
structure(0).array2 = [11 12 13 14 15 16 17 18];

structure(1).array1 = [21 22 23 24 25 26 27 28];
structure(1).array2 = [211 212 213 214 215 216 217 218];

structure(2).array1 = [31 32 33 34 35 36 37 38];
structure(2).array2 = [311 312 313 314 315 316 317 318];

structure(3).array1 = [41 42 43 44 45 46 47 48];
structure(3).array2 = [411 412 413 414 415 416 417 418];
... 
```

这些值只是任意的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T16:28:49.997

考虑以下 C 代码：

### structArrayMEX.c

```
#include "mex.h"

void mexFunction(int nlhs, mxArray *plhs[], int nrhs, const mxArray *prhs[])
{   
    mxArray *x, *y;
    double *xData, *yData;
    mwIndex idx, i;
    int counter = 1;

    // create a 16x1 structure array, each with two fields x and y
    const char *fieldNames[] = {"x", "y"}; 
    mxArray *s = mxCreateStructMatrix(16, 1, 2, fieldNames);

    // fill structure array
    for (idx=0; idx<16; idx++) {
        // create x and y matrices each of size 1x8
        x = mxCreateDoubleMatrix(1, 8, mxREAL);
        y = mxCreateDoubleMatrix(1, 8, mxREAL);

        // fill x and y matrices: x[i], y[i]
        xData = mxGetPr(x);
        yData = mxGetPr(y);
        for (i=0; i<8; i++) {
            xData[i] = counter;
            yData[i] = counter + 100;
            counter++;
        }

        // set fields: s(idx).x = x and s(idx).y = y
        mxSetField(s, idx, "x", x);
        mxSetField(s, idx, "y", y);
    }

    // return structure array
    plhs[0] = s;
} 
```

返回的结构体数组：

```
>> s = structArrayMEX();
>> whos s
  Name       Size            Bytes  Class     Attributes

  s         16x1              4096  struct         

>> s(1)
ans = 
    x: [1 2 3 4 5 6 7 8]
    y: [101 102 103 104 105 106 107 108]
>> s(16)
ans = 
    x: [121 122 123 124 125 126 127 128]
    y: [221 222 223 224 225 226 227 228] 
```

The above MEX-function should be equivalent to the following MATLAB code

```
vals = reshape(1:16*8, [8 16])';
s = struct('x',num2cell(vals,2), 'y',num2cell(vals+100,2)); 
```

# joomla - 用于自定义组件的 joomla 2.5 智能搜索（查找器）？

> ID：10714584
> 
> 赞同：1
> 
> 时间：2012-05-23T06:26:15.387
> 
> 标签：joomla, joomla1.7

我正在尝试找出 Joomla 2.5 智能搜索。我在这里遵循了一些说明 - [http://magazine.joomla.org/issues/issue-feb-2012/item/671-Developing-a-Smart-Search-Plugin](http://magazine.joomla.org/issues/issue-feb-2012/item/671-Developing-a-Smart-Search-Plugin) - 我设法安装了我的插件和我的组件中的项目在管理员部分的智能搜索组件中被索引..

但是当我去我的网站的前端并输入其中一个产品的名称时，它说没有找到结果。然而，如前所述，相同的产品在管理组件智能搜索中显示良好，但当我搜索它时它不会显示在前端。

我不确定我做错了什么，或者我是否遗漏了什么？

这是我的插件文件结构：

```
/plugins/finder/products/language/en-GB/en-GB.plg_finder_products.ini
/plugins/finder/products/language/en-GB/en-GB.plg_finder_products.sys.ini
/plugins/finder/products/products.php
/plugins/finder/products/products.xml
/plugins/finder/products/script.php 
```

我还在我的站点组件助手文件夹中添加了 route.php。

关于我做错了什么的任何想法，或者是否有人可以告诉我如何在结果页面上打印出搜索查询本身，以便我可以看到哪里出了问题？我不知道，任何帮助将不胜感激:)

多谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:34:39.213

如果没有一些代码可以查看，我只能打开 Joomla! 的调试模式并将错误报告设置为最高级别，即“开发”。

调试模式：`Site->Global Configuration->System->Debug System->Yes` 错误报告：`Site->Global Configuration->Server->Error Reporting->Development`

这样，您将获得 Joomla! 中的所有 SQL 查询！调试控制台，这将有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T19:09:58.870

您的组件是否使用访问级别？我一直在研究智能搜索插件，发现尽管被索引，但我的组件前端没有出现任何内容的原因是它不知道该组件的文章的访问级​​别是什么。

由于我的组件没有使用访问级别，我发现添加“$item->access=1;” index() 函数是一个 hack，它通过欺骗它认为访问级别是公共的来修复它（尽管只是一个 hack，请注意，不应该被视为正确的解决方案。）

无论如何，我遇到了同样的问题，这就是原因。

# php - 如何在 PHP 中编写正则表达式 if 语句

> ID：10714585
> 
> 赞同：0
> 
> 时间：2012-05-23T06:26:26.937
> 
> 标签：php, regex, preg-replace

我正在用 PHP 编写一个聊天机器人。

这是代码的一部分

```
public function messageReceived($from, $message){
        $message = trim($message);

                if(stristr($message,"hi")|| stristr($message,"heylo")||stristr($message,"hello")||stristr($message,"yo")||stristr($message,"bonjour")){
            return "Hello,$from,how are you"; // help section
        } 
```

现在在 if 语句中，我可以使用正则表达式，如果消息以 : H 或 Y 开头，它将返回给定的语句。

某种东西：

高* || Y* 在正式语言中

有没有这样的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T06:29:02.223

```
if(preg_match('/^(?:hi|hey|hello) (.+)/i', $str, $matches)) {
    echo 'Hello ' . $matches[1];
} 
```

解释：

```
/ # beginning delimiter
  ^ # match only at the beginning of the string
  ( # new group
    ?: # do not capture the group contents
    hi|hey|hello # match one of the strings
  )
  ( # new group
    . # any character
      + # 1..n times
    )
/ # ending delimiter
  i # flag: case insensitive 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:29:58.177

您可以使用以下内容检查消息开头的*H*或*Y*（不区分大小写）

```
preg_match('/^H|Y/i', $message) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T06:30:37.103

您可以为此使用 preg_match ：

```
if (preg_match('/^(H|Y).*/', $message)) {
    // ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T06:32:31.910

你可以只用 . 得到第一个字母`$message[0]`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T06:35:16.310

由于您确定要比较第一个字母，因此无需使用正则表达式即可。

```
 if( substr($message, 0, 1) =='H' || substr($message, 0, 1) == 'Y' ){
        //do something
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T06:46:20.997

您的整个函数将如下所示：

```
public function messageReceived($from, $message){

  $message = trim($message);

  if(preg_match('/^H|Y/i', $message){

     return "Hello $from, how are you"; // help section

  }
  else {
     // check for other conditions
  }
} 
```

# java - 用于非 IBM Windows 机器的 IBM SDK 7？

> ID：10714588
> 
> 赞同：2
> 
> 时间：2012-05-23T06:26:44.530
> 
> 标签：java

IBM SDK Java Technology Edition Version 7 可用于他们的 AIX 平台和 Linux 平台。IBM SDK 7 是否支持具有 32-64 位 Windows 的非 IBM 机器？我听说 Windows 的 32 位运行时环境仅可用于 IBM 系统作为单独下载，BIOS 检查验证它是 IBM 系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T06:36:45.480

那是真实的。

获取 IBM JDK 7 的一种非官方方式是下载并安装[WebSphere 8](http://www.ibm.com/developerworks/downloads/ws/was/) for Windows 平台（试用版）和[最新的修复包](http://www-01.ibm.com/support/docview.wss?uid=swg27004980#ver80)，因为它也可能包含 JDK 更新。

因此，您会在`AppServer/java7`可以压缩并复制到任何其他 Windows 系统的目录中找到 IBM JDK 7，无论其底层硬件如何。不需要注册密钥，您只需将 bin 添加到您的`PATH`并最终设置`JAVA_HOME`环境变量。

当然，该操作有效，并且主要用于开发人员工作站，但如果您希望获得有关在 Windows 上高效运行 JDK 7 的支持，则必须联系 IBM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-07-26T21:02:29.883

更小更简单的下载，虽然仅适用于 64 位 Java（windows 和 linux），但可在此处获得：[https](https://developer.ibm.com/assets/wasdev/#asset/runtimes-webprofile7-ibm-java) ://developer.ibm.com/assets/wasdev/#asset/runtimes-webprofile7-ibm-java 这是一个zip 文件（约 200 MB），无需登录即可下载。它与 Liberty Java EE 运行时打包在一起——这个包具有 Java EE 7 完整规范的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-22T07:55:12.077

免责声明：我知道这个问题很老，但它是谷歌搜索“在哪里下载 32 位 IBM JRE for windows”的最佳结果之一。因此，如果它可能对其他人有所帮助，我将贡献我的答案。

先决条件：在 IBM 站点的支持部分使用的 IBMid 登录名。

如果您有 IBM 支持帐户，则可以下载适用于 IBM 8.5.5.9 的 Fixpak 9：WebSphere Application Server V8.5.5。确保在下载任何内容之前阅读 IBM 的条款和条件。伊纳尔。

此软件包的日期为 2016 年 2 月 25 日。

可从此初始 URL 获得它： [http ://www-01.ibm.com/support/docview.wss?uid=swg24041819#SDK80](http://www-01.ibm.com/support/docview.wss?uid=swg24041819#SDK80)

向下滚动到“IBM WebSphere SDK Java Technology Edition V8.0 for full profile and Liberty”

你会发现 Windows: 8.0.2.10-WS-IBMWASJAVA-Win.zip 点击那个链接会导致一个 IBMid 页面来识别你自己，然后你可以下载这个“300-MB hairball” (Scott McNeally dixit) 8.0。 2.10-WS-IBMWASJAVA-Win.zip 文件。

当您解压缩 8.0.2.10-WS-IBMWASJAVA-Win.zip 毛球时，您会发现 32 位 JRE 作为一个名为 com.ibm.websphere.jdk8.32bit.jre_003_windows.x8632_x_8.0.2010.201602250020.zip 的文件插入 ZIP 存档的 \native 子文件夹。

希望这可以帮助

# c++ - CinternetSession：连接时的奇怪行为

> ID：10714590
> 
> 赞同：0
> 
> 时间：2012-05-23T06:26:48.560
> 
> 标签：c++, visual-studio-2010, mfc, proxy, network-programming

它应该添加到项目中检查代理服务器的有效性。该算法的工作原理很简单： 1\. 我正在尝试通过代理连接到特定服务器。2\. 我得到页面内容（地址）。3.直接连接到同一台服务器。4.比较他们的地址，如果他们匹配代理不是匿名的。

但是由于某种原因，程序先连接到代理后，再尝试通过另一个代理或直接连接不成功。当我阅读地址时，您总是会得到第一个代理的地址。在尝试运行测试一段时间后，检查一切开始正常工作。但足以重新启动 Windows 并重新开始。

我究竟做错了什么？项目 [http://dl.dropbox.com/u/10669949/work/internet_site.zip](http://dl.dropbox.com/u/10669949/work/internet_site.zip)

```
CString CDataSender::GetNotDirect(CString proxy)
{
    try
    {
        auto_ptr<CString> proxyip(new CString);
        CString page ="/ip.php";
        CString host="176.65.165.57";
        if (proxy.IsEmpty()) return "";

        auto_ptr<CInternetSession> iProxy (new CInternetSession("Opera/9.80 (Windows NT 6.1; U; ru) Presto/2.8.131 Version/11.11",1,INTERNET_OPEN_TYPE_PROXY,proxy));
        auto_ptr<CHttpConnection> pH(iProxy->GetHttpConnection(host,INTERNET_FLAG_DONT_CACHE|INTERNET_FLAG_NO_CACHE_WRITE|INTERNET_FLAG_PRAGMA_NOCACHE,80));
        auto_ptr<CHttpFile> pF(pH->OpenRequest("GET",page));
        pF->SendRequest();
        pF->ReadString(*proxyip);
        iProxy->Close();
        pH->Close();
        pF->Close();
        return *proxyip;
    }
    catch(CInternetException *pEx)
    {
        cout<<pEx->m_dwError<<endl;
        return "";
    }
}

CString CDataSender::GetDirect()
{       
    try
    {
        auto_ptr<CString> directip(new CString);
        int nCount=0;

        CString page ="/ip.php"; 
        CString host="176.65.165.57";   
        auto_ptr<CInternetSession> iDirect(new CInternetSession (/*"Opera/9.80 (Windows NT 6.1; U; ru) Presto/2.8.131 Version/11.11"*/"",1,INTERNET_OPEN_TYPE_DIRECT));
        auto_ptr<CHttpConnection> pH(iDirect->GetHttpConnection(host,INTERNET_FLAG_DONT_CACHE|INTERNET_FLAG_NO_CACHE_WRITE|INTERNET_FLAG_PRAGMA_NOCACHE,80));
        auto_ptr<CHttpFile> pF(pH->OpenRequest("GET",page));
        pF->SendRequest();
        pF->ReadString(*directip);
        iDirect->Close();
        //////////////////////////////////////////////////////////////////////////
        pH->Close();
        pF->Close();
        return *directip;
    }
    catch(CInternetException *pEx)
    {       
        cout<<pEx->m_dwError<<endl;
        return "";
    }

}

int CDataSender::CheckProxy(CString proxy)
{       
    CString directip="",proxyip="";
    proxyip.Empty();directip.Empty();
    proxyip=GetNotDirect(proxy);
    if(proxyip!="")
        directip=GetDirect();
    else
        return -1;
    cout<<"Direct: "<<directip<<endl;
    cout<<"Proxy: "<<proxyip<<endl;
    if ((proxyip!="")&&(directip!="")&&(proxyip.Find("html")==-1)&&/*(proxyip.GetLength()<16) &&*/(proxyip.Find(directip)==-1) /*|| proxyip=="1.1.1.1"*/) 
    {
        return 1;
    }
    return -1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T17:51:20.350

解决了这个问题。添加了适当的标志。

```
auto_ptr<CHttpConnection> pH(iDirect->GetHttpConnection(host,INTERNET_FLAG_RELOAD|INTERNET_FLAG_DONT_CACHE|INTERNET_IDENTITY_FLAG_CLEAR_CONTENT|INTERNET_IDENTITY_FLAG_CLEAR_DATA|INTERNET_IDENTITY_FLAG_CLEAR_COOKIES,80));
    auto_ptr<CHttpFile> pF(pH->OpenRequest("GET",page,NULL,1,NULL,NULL,INTERNET_FLAG_RELOAD|INTERNET_FLAG_DONT_CACHE|INTERNET_IDENTITY_FLAG_CLEAR_CONTENT|INTERNET_IDENTITY_FLAG_CLEAR_DATA|INTERNET_IDENTITY_FLAG_CLEAR_COOKIES)); 
```

同样，对于另一个功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T11:17:55.037

尝试使用套接字而不是 WinInet

# java - 使用OGNL自定义struts2 textfield标签的值

> ID：10714597
> 
> 赞同：0
> 
> 时间：2012-05-23T06:27:39.417
> 
> 标签：java, struts2, ognl

我有一个包含用户信息的数据库。当用户登录时，我在会话中注册了用户，如下所示：

```
ActionContext.getContext().getSession().put("loggedUser", user); 
```

我想在我的 jsp 页面中获取用户的信息，以便用这些信息填充 struts2 文本字段。我尝试使用以下代码，但它不起作用：

```
<%@page import="java.util.Map"%>
<%@page import="com.opensymphony.xwork2.ActionContext"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@ page import="UbiMail.*" %>
<%@taglib  prefix="s" uri="/struts-tags" %>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">

<%

        User user = (User) ActionContext.getContext().getSession().get("LoggedUser");
%>

<html>
<head>

</head>
<body>

    <s:form method="POST" action="UpdateAction">
        <s:actionerror/>
        <s:textfield name="uname" label="Username" value="#session.LoggedUser.getUsername"/>
        <s:property value="#session.LoggedUser.getUsername()"/>
        <s:password name="password" label="Password"/>
        <s:password name="cPassword" label="Confirm password"/>
        <s:textfield name="fname" label="First name" value="#session.loggeduser.getFname()"/>
        <s:textfield name="lname" label="Last name" value="#session.loggeduser.getLname()"/>
        <s:textfield name="popServer" label="POP server" value="#session.loggeduser.getPopServer()"/>
        <s:textfield name="popUsername" label="POP username" value="#session.loggeduser.getPopUsername()"/>
        <s:password name="popPassword" label="POP password"/>
        <s:textfield name="mobilePhone" label="Mobile phone" value="#session.loggeduser.getMobilePhone()"/>
        <s:textfield name="filter" label="Notification filter" value="#session.loggeduser.getSms()"/>
        <s:checkbox name="sms" label="Enable SMS notification"/>
        <s:submit value="Update"/>
    </s:form>
</body> 
```

我需要你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:36:50.753

而不是这个

```
<s:textfield name="uname" label="Username" value="#session.LoggedUser.getUsername"/> 
```

用这个

```
<s:textfield name="uname" label="Username" value='<s:property value="%{#session.loggedUser.getUsername}"/>'/> 
```

在类似的说明中，您可以对其他领域进行操作。

`LoggedUser`你不匹配的另一件事是`loggedUser`，在你的 Java 代码中键是`loggedUser`和不是`LoggedUser`，所以在 jsp 中使用`loggedUser`。

题外话：我认为您不需要在 jsp 代码中使用 scriptlet。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:01:15.200

此标签将生成名称为“uname”且值为“#session.LoggedUser.getUsername”的文本输入。

您想从会话中读取值。当然，您可以这样读取值：

```
<s:textfield name="#session.LoggedUser.getUsername" label="Username" value="#session.LoggedUser.getUsername"/> 
```

但我认为您不需要输入名称为“#session.LoggedUser.getUsername”）

所以解决方案是：

```
<input type="text" name="uname" value="<s:property value="#session.LoggedUser.username"/>"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-09T16:49:23.093

在 Struts 2.3 上工作：`value="%{#session.loggedUser.username}"`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-05-26T06:40:56.927

这是行不通的

```
 value="#session.LOGIN.name" 
```

这是有效的

```
 value="%{#session.LOGIN.name}" 
```

# jboss - 在异步 Workitemhandler 中处理任务

> ID：10714598
> 
> 赞同：0
> 
> 时间：2012-05-23T06:27:45.417
> 
> 标签：jboss, drools, jbpm

我在一篇 jbpm 论坛文章[https://community.jboss.org/thread/165545](https://community.jboss.org/thread/165545)中读到，将 HumanTaskHandler 描述为异步工作项处理程序，当我们使用异步人工任务处理程序时，我们必须完成任何任务，`taskclient.complete()`然后向流程引擎发出信号 `ksession.getWorkItemManager().completeWorkItem()`.

这是在使用异步工作项处理程序时完成任务的理想方法吗？
这就像完成一个任务两次。实际上，当我们调用`complete()`and时发生了什么`completeWorkItem()`？
请澄清。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T12:12:45.613

如果您在调用 taskClient.complete() 方法时已正确设置所有内容，则会话将通知并且 ksession.getWorkItemManager().completeWorkItem() 将自动为您调用。没有必要自己调用它。您只需要记住将 WorkItemHandler 注册到会话并保持会话处于活动状态，以便通知它。干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-28T22:38:59.610

对于 JBPM 6，我已经实现了一个像这样的异步工作项处理程序，因为管理器和 ksession 无法完成任务。RuntimeManagerRegistry 的 Maven 依赖项是 kie 内部版本 6.0.1.Final，jsoup 1.7.2。

```
 import java.io.IOException;
    import org.drools.core.process.instance.impl.WorkItemImpl;
    import org.jsoup.Jsoup;
    import org.kie.api.runtime.manager.RuntimeEngine;
    import org.kie.api.runtime.manager.RuntimeManager;
    import org.kie.api.runtime.process.WorkItem;
    import org.kie.api.runtime.process.WorkItemHandler;
    import org.kie.api.runtime.process.WorkItemManager;
    import org.kie.internal.runtime.manager.RuntimeManagerRegistry;
    import org.kie.internal.runtime.manager.context.EmptyContext;

    public class AsyncWorkItemHandler implements WorkItemHandler {
        boolean abort = false;

        @Override
        public void abortWorkItem(WorkItem workItem, WorkItemManager manager) {
            manager.abortWorkItem(workItem.getId());
            abort = true;
        }

        @Override
        public void executeWorkItem(final WorkItem workItem, final WorkItemManager manager) {
            final String depId = ((WorkItemImpl) workItem).getDeploymentId();
            new Thread(new Runnable() {
                String url = (String) workItem.getParameter("url");
                org.jsoup.nodes.Document document = null;

                public void run() {
                    while (true) {
                        if (abort == true) {
                            break;
                        }
                        // example of polling a web site for specific text
                        // before task can complete say "release"
                        try {
                            document = Jsoup.connect(url).timeout(3000).get();
                        }
                        catch (IOException e) {
                            e.printStackTrace();
                        }
                        String info = document.text();
                        if (info.contains("release")) {
                            if (depId != null) {
                                RuntimeManager manager = RuntimeManagerRegistry.get().getManager(depId);
                                RuntimeEngine engine = manager.getRuntimeEngine(EmptyContext.get());
                                engine.getKieSession().getWorkItemManager().completeWorkItem(workItem.getId(), null);
                                manager.disposeRuntimeEngine(engine);
                            }
                            else {
                                // this is for eclipse testing because depId is not
                                // available
                                manager.completeWorkItem(workItem.getId(), null);
                            }
                            break;
                        }
                        try {
                            Thread.sleep(2000);
                        }
                        catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                    }
                }
            }).start();
        }
    } 
```

# ios - Cordova 中的“'CDVPlugin.h' 文件未找到”作为组件（Cleaver）

> ID：10714600
> 
> 赞同：25
> 
> 时间：2012-05-23T06:27:57.347
> 
> 标签：ios, cordova, phonegap-plugins

我将 Cordova 作为组件添加到我的 iOS 项目中。添加自定义插件会导致错误，尽管该插件在仅限 Cordova 的项目中工作：

```
'CDVPlugin.h' file not found 
```

*   PhoneGap / Cordova 1.7.0 已安装
*   多次检查以正确实施步骤[https://github.com/apache/incubator-cordova-ios/blob/master/guides/How%20to%20Use%20Cordova%20as%20a%20Component.md](https://github.com/apache/incubator-cordova-ios/blob/master/guides/How%20to%20Use%20Cordova%20as%20a%20Component.md)（“将切割器添加到你的 Xcode 项目（CordovaLib 子项目）”）
*   该插件在一个普通的基于 cordova 的应用程序中工作（Cordova Xcode 模板）
*   将“-all_load”添加到主项目中的“其他链接器标志”并没有效果

有问题的部分如下：

```
#import <Foundation/Foundation.h>

#ifdef CORDOVA_FRAMEWORK
#import <Cordova/CDVPlugin.h>
#else
#import "CDVPlugin.h"
#endif 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2015-10-27T13:29:33.903

对于 xcode7 添加`"$(OBJROOT)/UninstalledProducts/$(PLATFORM_NAME)/include"`到您的**标题搜索路径**（您可能需要将**Enable Bitcode**设置为**No** - 对我来说是必要的，但可能与 xc7 的不同问题有关）

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-20T10:03:18.070

单击项目导航器中的项目图标，

选择您的项目，然后选择“构建设置”选项卡

在搜索字段中输入“标题搜索路径”

添加`"$(CORDOVALIB)/Classes"`并选中 Recursive 复选框 - 用于**Header Search Paths**值

可选添加`"-all_load"`和`"-Obj-C"`- 用于**其他链接器标志**值

见[详细说明（步骤 17）](https://github.com/apache/incubator-cordova-ios/blob/master/guides/How%20to%20Use%20Cordova%20as%20a%20Component.md)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-10-03T14:18:56.530

将头文件更改为：

`#import <Cordova/CDVPlugin.h>`

它在我的应用程序中工作。

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2016-04-01T20:03:26.643

我在使用 Cordova 时遇到了这个问题。来发现我的ios平台目录下的CordovaLib文件夹不见了。

我做了：

```
cordova platform remove ios 
```

然后

```
cordova platform add ios 
```

...这解决了这个问题。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-06-26T09:31:14.610

我花了很多时间试图在我的项目中解决同样的问题，所以让我分享一下我的发现。它可能与那些能够在一种配置中构建项目但在另一种配置中（例如，在构建单元测试时）预编译器无法找到的人相关`CDVPlugin.h`。

您必须确保`CordovaLib`子项目与主项目具有相同的配置集。

1.  在项目导航器中选择 Xcode 中的主项目。
2.  单击项目图标（目标上方）。
3.  选择`Info`选项卡。
4.  展开`Configurations`。

因此，这是一组您的应用程序配置。在我的示例中，它看起来像这样： ![应用配置](../Images/87a8bffcf2eb5d68b1e12fdddeed2ffc.png)

您需要在`CordovaLib`子项目中拥有相同的配置集。

1.  选择`CordovaLib`子项目。
2.  单击项目图标（目标上方）。
3.  选择`Info`选项卡。
4.  展开`Configurations`。
5.  确保您具有与主项目相同的配置集。如果缺少某些配置：
    1.  单击`+`按钮。
    2.  选择`Duplicate "Release" Configuration`
    3.  为配置提供正确的名称。从主项目设置中复制粘贴它。

现在执行干净的构建。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-11-29T18:09:15.880

注意：Phonegap 2.9.1（2013 年 11 月））

我在尝试使开源“C”电话间隙插件工作时遇到了同样的问题。解决方案是将 Cordovalib.xcodeproj 添加到目标项目，完成后，单击 your_project.xcodeproj - 您需要查看目标设置，在构建阶段选项卡下，确保将 Cordovalib 添加到目标依赖项中。

一旦完成，它应该允许语句：#import 工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T07:42:50.650

[在这里](https://stackoverflow.com/a/13834636/1693477)看看我的答案：

我在 Xcode 4.5、cordova 2.1.0 和 JQM 1.2.0 上安装 ShareKit 插件时遇到了同样的问题。有问题的块是：

```
#ifdef CORDOVA_FRAMEWORK
#import <Cordova/CDVPlugin.h>
#import <Cordova/CDVPluginResult.h>
//#import <Cordova/JSONKit.h>

#else
#import "CDVPlugin.h"
#import "CDVPluginResult.h"
#import "JSONKit.h"
#endif 
```

对我有用的是注释掉#ifdef 行以及注释掉整个#else 块。

另外，#import 行已经在我用插件下载的源代码中被注释掉了，所以我没有打扰它。

可能对你有些帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-02T08:10:53.043

在 xcode 8 和 8 + 中，简单地评论该行对我有用：

```
#import ... 
```

如果您尝试使用 ionic 或 cordova 扩展 IOS 应用程序构建以本地拥有 watchkit 或小部件控制，这将特别有用。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2014-04-01T04:52:23.017

代替

# 进口

和 （

# 导入“类/CDVPlugin.h”

或者

# 导入“CordovaLib/Classes/CDVPlugin.h”）

# ruby - 自定义 gem 在 irb 中工作，而不是在 ruby 脚本中

> ID：10714605
> 
> 赞同：2
> 
> 时间：2012-05-23T06:28:22.517
> 
> 标签：ruby, rubygems, irb

我有一个基于以下文件结构的自定义 gem：

```
something/common/searchcommon.gemspec

something/common/lib/searchcommon.rb

something/common/lib/commonfiles/scommon.rb

something/common/lib/commonfiles/token_stream.rb

something/common/lib/commonfiles/rbbi.rb 
```

我的 gemspec 文件如下所示：

```
Gem::Specification.new do |s|
  s.name        = 'searchcommon'
  s.version     = '0.0.0'
  s.date        = '2012-04-28'
  s.summary     = "Search Common classes"
  s.description = "Contains the common classes for search"
  s.authors     = ["some author"]
  s.email       = 'x@x.com'
  s.files       = ["lib/searchcommon.rb","lib/commonfiles/scommon.rb","lib/commonfiles/rbbi.rb","lib/commonfiles/token_stream.rb"]
end 
```

我能够毫无问题地构建和安装 gem。

它也适用于 irb：

```
>> require 'searchcommon'

=> true 
```

但是，我有一个需要这个 gem 的脚本。该脚本包含如下 gem：

```
#!/usr/local/bin/ruby
require 'rubygems'
require 'searchcommon' 
```

我得到的错误引发以下堆栈跟踪：

```
/usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require': no such file to load -- scommon (LoadError)
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from /usr/local/lib/ruby/gems/1.8/gems/searchcommon-0.0.0/lib/commonfiles/rbbi.rb:1
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `gem_original_require'
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:36:in `require'
    from /usr/local/lib/ruby/gems/1.8/gems/searchcommon-0.0.0/lib/searchcommon.rb:1
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:60:in `gem_original_require'
    from /usr/local/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:60:in `require'
    from ./mapper.rb:3 
```

错误的行是lib/commonfiles/searchcommon.rb中的**“require 'commonfiles/rbbi'”**

rbbi.rb 中出现此错误的行是**“require 'scommon'”**，它也存在于同一文件夹中。

当我能够将 gem 与 IRB 一起使用时，我无法理解为什么这在脚本中不起作用。

我在 SO 上查看了[这个问题，](https://stackoverflow.com/questions/6181247/gem-found-in-irb-not-in-ruby)但它并没有完全解决同样的问题。

任何帮助，将不胜感激。

**编辑：删除了一些令人困惑的文件名并替换了它们。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T09:31:39.970

您正在尝试加载`scommon`，但该文件不在加载路径中。您可以使用“完整”路径：`require 'commenfiles/scommon'`

请注意，发生这种情况是因为文件的目录不是加载路径的一部分。我建议`require_relative`改用（它不使用加载路径）：`require_relative 'scommon'`

# python - 如何根据 django 中的用户输入将值存储在模型中？

> ID：10714610
> 
> 赞同：1
> 
> 时间：2012-05-23T06:28:58.087
> 
> 标签：python, django, templates, post, view

对于用户选择的给定插槽（应该有时间、俱乐部、日期和球场），我如何将存储在“用户名”中的值保存到“开放”类的“预订”字段中？

```
def vote(request, club_id):
    if 'username' in request.POST and request.POST['username'] and 'slot' in request.POST and request.POST['slot']:
        username = request.POST['username']
        slot = request.POST['slot']
        #save the value stored in "username" to the "reservation" field in class Opening with the other associated data (club, time, day, court)
        return HttpResponseRedirect('reserve/templates/booked.html',{'username':username, 'slot':slot})
    else:
        return render_to_response('reserve/templates/vote.html', {'error': True}) 
```

Avail_times.html：

```
<form action="/clubs/{{ club.id }}/vote/" method="post">
{% csrf_token %}
{{ today }}<br>
{% for slot in open_slots %}
    <input type="checkbox" name="slot" id="slot{{ forloop.counter }}" value="{{ slot.id }}" />
    <label for="slot{{ forloop.counter }}">{{ slot.slot }} on Court {{slot.court}}</label><br />
{% endfor %}

<br>
{{ tomorrow }}<br>
{% for slot in tom_open_slots %}
    <input type="checkbox" name="slot" id="slot{{ forloop.counter }}" value="{{ slot.id }}" />
    <label for="slot{{ forloop.counter }}">{{ slot.slot }} on Court {{slot.court}}</label><br />
{% endfor %}    
<input type="text" name="username" />
<input type="submit" value="Reserve" /> 
```

模型：

```
from django.db import models
import datetime

class Club(models.Model):
    establishment = models.CharField(max_length=200)
    address = models.CharField(max_length=200)
    def __unicode__(self):
        return self.establishment

class Court(models.Model):
    club = models.ForeignKey(Club)
    day = models.ForeignKey(Day)
    court = models.IntegerField(max_length=200)
    def __unicode__(self):
        return unicode(self.court)

class Opening(models.Model):
    club = models.ForeignKey(Club)
    day = models.DateField('date')
    court = models.ForeignKey(Court)
    slot = models.TimeField('slot')
    reservation = models.CharField(max_length=200)
    def __unicode__(self):
        return unicode(self.slot) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:26:31.883

如果要更新`Opening`模型，则需要知道是哪一个。

将 写入`opening_id`表格。我不确定你的插槽和开口是如何相关的，所以你必须弄清楚这一点。

我通常会使用[get_object_or_404](https://docs.djangoproject.com/en/dev/topics/http/shortcuts/#get-object-or-404)来获取相关的`Opening`

```
username = request.POST['username']
opening = get_object_or_404(Opening, id=request.POST['opening_id'])
opening.reservation = username
opening.save() 
```

您还需要检查是否允许用户更新该开口。

# php - 使用 ffmpeg 为 mp4 创建缩略图

> ID：10714613
> 
> 赞同：1
> 
> 时间：2012-05-23T06:29:04.093
> 
> 标签：php, ffmpeg

我正在使用 ffmpeg 和 php 为动态视频创建缩略图。它将缩略图保存到特定文件，然后我使用 php 检索它。我想为所有类型的视频创建缩略图。iam 面临的 ffmpeg 问题是 iam 无法为具有 .mp4 扩展名的视频创建缩略图。

```
<?
$ffmpeg = '/usr/bin/ffmpeg/ffmpeg'; //to load the extension ffmpeg

$video = '/path/to/video'.$file_thumb; //path to the video

$image = '/store/it/here'; //path to store the thumbnail

$interval = 5;
$size = '640x480';

//It runs with the below command    
$cmd = "$ffmpeg -i $video -deinterlace -an -ss $interval -f mjpeg -t 1 -r 1 -y -s $size 
$image 2>&1"; 
```

?>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T12:07:57.053

你可以使用这个。

```
$in = root/path/to/video/filename/with/extension
$out = root/path/to/video/filename/with extension .jpg // always use jpg as image extension

exec("/PATH/TO/FFMPEG -itsoffset -4  -i ".$in." -vcodec mjpeg -vframes 1 -an -f rawvideo -s 120x100 ".$out); 
```

它将在 $out 位置创建 120x100 大小的图像缩略图并为我工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:56:11.207

尝试这个：

`safe_mode Off`apache配置文件中需要ffmpeg

然后需要编码：

```
// where ffmpeg is located, such as /usr/sbin/ffmpeg
$ffmpeg = 'ffmpeg';

// the input video file
$video = 'videos/'.$file_thumb;

// where you'll save the image
$image = 'uploads/videothumb/'.strtotime("now").'.jpg';

// default time to get the image
$second = 1;

// get the duration and a random place within that
$cmd = "$ffmpeg -i $video -deinterlace -an -ss $second -t 00:00:01 -r 1 -y -vcodec mjpeg -f mjpeg $image 2>&1";

shell_exec($cmd); 
```

我希望它有效..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:36:34.883

尝试这个：

```
<?php
     exec("$ffmpeg -itsoffset -105 -i $video -vcodec mjpeg -vframes 1 -an -f rawvideo -s $size $image");
?> 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T14:21:08.613

验证您的 ffmpeg 安装是否支持您要求的视频。如果它运行独立形式的 PHP，请在计算机上的 shell 中尝试。如果无法创建映像，请先修复 ffmpeg 安装。

Ffmpeg 是一个免费软件项目，如果您无法设置自己的副本，许多相关人员都可以咨询：http: [//ffmpeg.org/consulting.html](http://ffmpeg.org/consulting.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-17T10:30:33.193

尝试这个

```
$ffmpeg = '/usr/bin/ffmpeg/ffmpeg';
$video = '/path/to/video'.$file_thumb; //path to the video
$image = '/store/it/here'; //path to store the thumbnail
$interval = 1;
$size = '640x480';
shell_exec($ffmpeg.' -i '. $video.' -deinterlace -an -ss $interval -t 00:00:01 -r 1 -y -s 1242x400 -vcodec mjpeg -f mjpeg '. $thumbnail.' 2>&1'); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-09-30T13:11:15.737

ffmpeg 已弃用，现在您可以使用“avconv”

这是示例示例。

```
avconv  -itsoffset -4  -i VIDEO0001_8265186396728169230.mp4 -vcodec mjpeg -vframes 1 -an -f rawvideo -s 320x240 test.jpg 
```

# c++ - 理解这段代码：C++，#define table and enums

> ID：10714615
> 
> 赞同：1
> 
> 时间：2012-05-23T06:29:14.450
> 
> 标签：c++, enums

我很难理解这段代码。

```
#define TABLE  \
        STATE(STATE_1,    true) \
        STATE(STATE_2,    false) \
        STATE(STATE_3,    true) 

enum State_t
        {
        #define STATE( state, valid) state,
            TABLE
            #undef STATE
            NUM_STATES
        } 
```

我知道 State_t 枚举将有 STATE_1、STATE_2 和 STATE_3 和 NUM_STATES=3，但我很难理解它的机制。有人可以请解释一下。

另外，现在我想定义一个重复的状态，例如：

```
#define TABLE  \
        STATE(STATE_1,    true) \
        STATE(STATE_2,    false) \
        STATE(STATE_3,    true) \
        STATE(STATE_2,    true) 
```

但是由于重新定义了STATE_2，这会产生编译器错误。我怎样才能让 State_t 枚举仍然有 State_t={STATE_1, STATE_2 , STATE_3} 并且如果可能的话 NUM_STATES=4，也许使用#ifndef。我不确定这是否可以做到，但请分享您的想法。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T06:51:02.130

`#define`告诉预处理器（PP）替换东西。（定义语句被删除）
所以，从：

```
enum State_t
        {
            TABLE
            NUM_STATES
        } 
```

PP 将用它的定义替换 TABLE：

```
enum State_t
        {
            STATE(STATE_1,    true)
            STATE(STATE_2,    false)
            STATE(STATE_3,    true) 
            NUM_STATES
        } 
```

现在，PP 将用 STATE 定义替换每个 STATE，结果是：

```
enum State_t
        {
            STATE_1,
            STATE_2,
            STATE_3,
            NUM_STATES
        } 
```

注意：STATE 定义不使用`valid`参数。

`STATE(STATE_2, true)`关于你的第二个问题，现在我想你可以看到如果你在 TABLE 中添加另一个问题会如何结束。但您可以随时添加`STATE(STATE_4, true)`(-:

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:18:56.237

以下问题的更多答案：

A. and是“说”定义有效的地方
。意思是，如果你在 PP 之后写“STATE(STATE_2, true)”将不会替换它。`#define``#undef``#undef`

B.
状态旁边的逗号用于分隔枚举实体。

C.
枚举，除非另有明确定义，否则将给第一个实体值 0 并为每个值增加一个：

```
enum State_t
        {
            STATE_1, // = 0
            STATE_2, // = 1
            STATE_3, // = 2
            NUM_STATES // = 3
        } 
```

实体的名称与值无关。

我认为您缺乏 C++ 的基础知识，并且您试图理解更复杂的东西。尝试寻找一个简单的枚举和#define 示例。

# php - PHP中的多线程/多任务

> ID：10714618
> 
> 赞同：16
> 
> 时间：2012-05-23T06:29:42.773
> 
> 标签：php, optimization, multiprocessing

在 PHP 中，我们通常在不考虑服务器功能的情况下进行编码。现在，即使是 PC 也有多个内核并处理 64 位数据。据我所知，PHP 引擎本身经过优化以利用多核。我们程序员如何才能进一步优化代码以利用多核。

换句话说，我想知道将教我编写更可能被 php 引擎考虑并行处理的代码的技术。

我不是要求任何用户定义/开源队列方法，而是以利用多核并更快工作的方式编写相同的代码。

如果您已经在做这样的事情，请提出您的想法并分享您的经验。

我希望应该有办法进一步优化代码。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-06-06T07:07:33.737

自 2000 年 5 月 22 日 PHP4 的第一个版本发布以来，PHP 拥有线程模型已经很长时间了。

# 前端线程

在 Web 应用程序的前端创建用户线程没有任何意义；规模化非常困难。Apache Worker MPM 二进制文件和 mod_php 使用的每个客户端模型的线程并不是您真正想用来为您的网站提供服务的东西，当然，如果您正在使用它，您不希望创建额外的线程来直接响应任何 Web 请求。

# 为什么前端的线程是个坏主意？

您可能经常听到开发人员说前端的线程没有意义，而没有提供这种断言的基本原理。当您学会以所需的方式思考系统时，问题变得显而易见：

*如果客户端脚本创建 8 个线程以直接响应 Web 请求，并且 100 个客户端同时请求该脚本，则您要求您的硬件同时执行**800 个**线程。*

*CPU 的外观和工作方式必须非常不同，才能成为一个好主意*

# 我们对于它可以做些什么呢 ？

企业解决方案可能有一个面向公众的 PHP 网站，但系统的实际大脑是用对构建企业解决方案所需的那些东西有很好的支持的语言编写的，例如 Java、C#、C++ 或任何语言——天是。

您应该以相同的方式使用 pthread；通过设计其组件彼此分离的系统，仅通过精心设计的高性能 (RPC) API 连接，这样设计多线程架构所固有的复杂性与面向公众的网站完全隔离，并且简单，这样的网站将需要可扩展的设置。

## 你现在可以危险代码

让我们从 Hello World 开始：

```
<?php
class My extends Thread {
    public function run() {
        printf("Hello World\n");
    }
}

/* create a new Thread */
$my = new My();

/* start the Thread */
$my->start();

/* do not allow PHP to manage the shutdown of your Threads */
/* if a variable goes out of scope in PHP it is destroyed */
/* joining explicitly ensures integrity of the data contained in an objects */
/* members while other contexts may be accessing them */
$my->join();
?> 
```

无聊，但我希望你能读到它；）

所以在一个真实的系统中，你真的不想如此明确地创建线程，你肯定只想将任务提交给一些执行器服务，所有复杂的系统，就多任务处理的需求而言，我曾经见过用这样的东西...

```
<?php
class My extends Threaded {
    public function run() {
        printf("Hello World from %s#%lu\n",
            __CLASS__, Thread::getCurrentThreadId());   
    }
}

/* create a Pool of four threads */
/* threads in a pool are created when required */
$pool = new Pool(4);

/* submit a few tasks to the pool */
$tasks = 100;
while ($tasks--) {
    $pool->submit(new My());
}

/* shutting down the pool is tantamount to joining all workers */
/* remember what I said about joining ? */
$pool->shutdown();
?> 
```

我已经对复杂的事情给了你非常简短的解释，你应该努力阅读所有你能读到的东西：

*   [https://gist.github.com/krakjoe/6437782](https://gist.github.com/krakjoe/6437782)
*   [https://gist.github.com/krakjoe/9384409](https://gist.github.com/krakjoe/9384409)
*   [http://php.net/pthreads](http://php.net/pthreads)

许多示例可以在这里找到：[https ://github.com/krakjoe/pthreads/tree/master/examples](https://github.com/krakjoe/pthreads/tree/master/examples)

*免责声明：使用线程的服务器架构并没有什么问题，但是当您开始创建额外线程时，您会限制它的可扩展性和执行设计的能力，我可以想象设计良好的架构确实具有线程能力在前端，但这并不是一件容易的事情。此外，对于高性能 Web 目标应用程序，线程并不是工具箱中唯一的东西。研究你所有的选择。*

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-23T06:41:32.560

使用 PHP 的最常见方式是通过多进程 Web 服务器（例如 Apache）运行它。这意味着即使 PHP 本身不支持多核，操作系统也会尽最大努力平衡可用 CPU 之间由 Web 服务器进程创建的负载。

如果您有一个独立的长时间运行的 PHP 程序，并且您自己在一个进程中运行，您将不得不考虑线程化或将程序分成不同的进程，以便能够利用多个 CPU。哪个更好/更容易取决于您的特定情况：将任务分解成碎片有多容易，需要多少进程间/线程通信，需要多少同步等。

虽然标准 PHP 发行版本身似乎没有线程支持，但有一些扩展，例如[php-pthreads](https://github.com/krakjoe/pthreads#threading-for-php---share-nothing-do-everything-)，允许使用本机`pthreads`API。

要将长时间运行的 PHP 程序划分为多个进程，您可以使用[`pcntl`](http://es.php.net/manual/en/book.pcntl.php)库或[`proc_*`](http://es.php.net/manual/en/book.exec.php)函数族。至于IPC ..再次，这取决于您的需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-05T15:39:54.283

既然已经提供了解释，所以直接放代码。您所要求的一切都可以通过 Threads 来实现。

```
require_once( 'Thread.php' );

// test to see if threading is available
if( ! Thread::available() ) 
{
   die( 'Threads not supported' );
}

// function to be ran on separate threads
function paralel( $_limit, $_name ) 
{
    for ( $index = 0; $index < $_limit; $index++ ) 
    {
        echo 'Now running thread ' . $_name . PHP_EOL;
        sleep( 1 );
    }
}

// create 2 thread objects
$t1 = new Thread( 'paralel' );
$t2 = new Thread( 'paralel' );

// start them
$t1->start( 10, 't1' );
$t2->start( 10, 't2' );

// keep the program running until the threads finish
while( $t1->isAlive() && $t2->isAlive() ) 
{
} 
```

请记住 PHP 本身不支持线程。更详细的信息可以在这里找到[http://blog.motane.lu/2009/01/02/multithreading-in-php/](http://blog.motane.lu/2009/01/02/multithreading-in-php/)

您也可以遵循这个答案，它还通过代码示例更好地解释了 PHP 和线程。

我个人不会使用 PHP 线程，因为线程主要用于通过将进程拆分为不同的线程来加速进程，并且如果您的站点获得高流量，那么操作系统本身将管理进程到不同的 CPU 核心上。所以，我认为你不应该担心 PHP 线程，这可能是 PHP 团队不关注它的原因（这只是我的想法）。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-06-05T15:52:04.940

PHP 的设计并没有真正考虑到多线程（它是围绕短生命周期的请求/响应模型构建的）。不过有几个选择。

PCNTL 扩展：产生和管理子进程。这不是多线程，因为每个子进程都是一个新的 PHP 实例。因此，它非常耗费资源。在 Windows 中不可用。

PThreads 扩展：允许在 PHP 脚本中生成和管理线程。它（据我从文档中可以看出）在 Windows 上可用，理论上线程至少应该比生成进程更轻量级，但是使用它有很多警告。例如，您的 PHP 必须针对线程安全进行编译，这会对非线程代码的性能产生不利影响，并且会阻止使用不支持线程安全的扩展。

ReactPHP：一个 PHP 代码库，提供诸如事件循环和非阻塞 IO 之类的东西。严格来说，它不支持线程（尽管我知道提供它们的工作正在进行中），但它确实提供了许多有用的功能，应该可以减少对线程的需求。[https://github.com/reactphp/react/wiki/FAQ](https://github.com/reactphp/react/wiki/FAQ)包括对线程支持状态的讨论。

# java - 如何将Android中的文件从SD卡复制到内部存储而不损坏它们

> ID：10714625
> 
> 赞同：0
> 
> 时间：2012-05-23T06:30:27.367
> 
> 标签：java, android, android-sdcard, ioexception, file-handling

我的程序需要复制位于 sd 卡文件夹中的两个文件（.ogg 声音文件）以缓存通过 getCacheDir() 返回的应用程序的目录

我使用以下代码复制文件

```
File cache=this.getCacheDir();
cache.mkdirs();
fout=new FileOutputStream(cache.getAbsolutePath()+"/file1.ogg");
fin=new FileInputStream(Environment.getExternalStorageDirector+"/imported/file1.ogg");

byte[] buf = new byte[128];
int len;
while ((len = fin.read(buf,0,128))>-1){
    fout.write(buf, 0, len);
}

fout.close();
fin.close(); 
```

代码编译并运行没有任何错误，两个文件都被复制并具有与原始文件相同的大小，但是当我的程序尝试播放这些 .ogg 文件时，当我尝试在我的电脑中播放复制的文件时，也会发生 IO 异常产生错误。

但是，如果我将它们从一个文件夹复制到 SD 卡上的另一个文件夹，它可以正常播放。这意味着从外部媒体复制到外部媒体是可以的，但从外部到内部复制会导致损坏！

**编辑**

以下是我从实验和观察中发现的：

A) 以编程方式将原始文件复制到内部存储 -> 无法播放文件

B）将原始文件直接复制到内部存储（我有root访问权限）->播放正常

C）将编程复制的文件直接复制回SD卡中的任何位置->再次播放正常（令人惊叹！）

注意：-这里直接复制是指使用 Android OS 的复制粘贴

以我的感觉，复制的文件在复制后无法正常工作，但是一旦将其移至 SD 卡，它就会再次开始工作。

**FTW 男人！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T19:41:19.287

答案可能是您使用的是缓存而不是内部存储器。不保证缓存。

# servlets - 使用 PUT 方法时无法检索 JSON 作为参数

> ID：10714627
> 
> 赞同：2
> 
> 时间：2012-05-23T06:30:33.207
> 
> 标签：servlets, extjs, put

我正在使用 ExtJS 执行 AJAX 请求。这是我的代码

```
Ext.Ajax.request({
    url: 'TestServer',
    method: 'PUT',
    params: {
        json: Ext.encode({
            name: 'dummy'
        })
    }
}); 
```

所以我决定从 servlet 获取请求参数。所以我用过

```
request.getParameter("json") 
```

但我得到了一个空值。当我使用 POST 方法时效果很好，但不是 PUT。在使用 PUT 方法时，还有其他方法可以在 servlet 中获取请求参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:01:28.567

来自[Ext.Ajax 4.1 文档](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Ajax)：

> method : String 用于请求的默认 HTTP 方法。请注意，这是区分大小写的并且应该全部大写（如果未设置但参数存在将使用“POST”，否则将使用“GET”。）

该文档没有提到允许 PUT，但也没有提到不允许 PUT。

此外，还有说明如何使用[HTTP 方法覆盖](http://usna86-techbits.blogspot.com/2010/03/tunneling-put-and-delete-from-extjs-to.html)来使 servlet 调用映射到 PUT 或 DELETE 的服务的文档。

有人建议使用 HTTP Method Override 而不是直接使用 PUT 或 DELETE，再加上 Ext.Ajax 文档省略了其他 HTTP Method 选项，这一事实强烈表明您尝试使用 Ext 是不可能的。

这看起来很奇怪，考虑到原始 XmlHttpRequests 甚至 jQuery AJAX 都非常有可能。

但是，利用 JavaScript 的动态类型和功能特性，可以使用来自[此论坛帖子的](http://www.sencha.com/forum/showthread.php?15717-Ext.Ajax-problem-submitting-an-XML-payload-as-part-of-a-PUT-request)代码轻松覆盖/扩展默认 Ajax 功能：

```
 Ext.lib.Ajax.request = function(method, uri, cb, data, options) {
        if(options){
            var hs = options.headers;
            if(hs){
                for(var h in hs){
                    if(hs.hasOwnProperty(h)){
                        this.initHeader(h, hs[h], false);
                    }
                }
            }
            if(options.xmlData){
                this.initHeader('Content-Type', 'text/xml', false);
                method = (options.method == 'PUT' ? 'PUT' : 'POST');
                data = options.xmlData;
            }else if(options.jsonData){
                this.initHeader('Content-Type', 'text/javascript', false);
                method = (options.method == 'PUT' ? 'PUT' : 'POST');
                data = typeof options.jsonData == 'object' ? Ext.encode(options.jsonData) : options.jsonData;
            }
        }

        return this.asyncRequest(method, uri, cb, data);
    };

    // example request
    Ext.Ajax.request({
        url: 'testrest.php',
        method: 'PUT',
        headers: {'Content-Type': 'text/xml'},
        success: function(response, opts) { Ext.Msg.alert('Sucess', 'Update has been successful'); },
        xmlData: '<blah>de</blah>'
    }); 
```

最后，也不清楚您使用的是哪个版本的 Ext，上面的代码示例来自 2007。您可能需要修改您的 AJAX 请求，以便它使用 jsonData（代替它们的 xmlData）而不是使用 params，作为 params似乎没有包含在覆盖/扩展操作中。此外，论坛中的一位发帖人提到，如果存在参数，则默认使用 POST，无论指定什么。因此，这是另一个考虑使用 jsonData 的原因。

如果 jsonData 不能满足您的需求，那么您始终可以按照此代码示例的作者演示的示例并修改您的 Ext.Ajax 副本，以便在提交参数时包含“PUT”请求。

# android - 如何在 Edittext Android 中取消选中文本？

> ID：10714636
> 
> 赞同：7
> 
> 时间：2012-05-23T06:32:07.527
> 
> 标签：android, android-edittext

我正在使用编辑文本来支持粗体、斜体和下划线的属性。选择文本并将其设为粗体后我成功了。现在我想在点击普通按钮后删除粗体。

**Typeface.NORMAL**在这里不起作用。任何人都可以建议其他选择。

```
Button btnBold = (Button) findViewById(R.id.btnBold);
        btnBold.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                startSelection = etx.getSelectionStart();
                endSelection = etx.getSelectionEnd();

                Spannable s = etx.getText();
                s.setSpan(new StyleSpan(android.graphics.Typeface.BOLD), startSelection, endSelection, 0);
            }
        });

Button btnNormal = (Button) findViewById(R.id.btnNormal );
        btnNormal .setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                **//What I have to do here.**
            }
        }); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T06:47:21.023

```
Button btnNormal = (Button) findViewById(R.id.btnNormal );
        btnNormal .setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
               Spannable str = etx.getText();
               StyleSpan[] ss = str.getSpans(selectionStart, selectionEnd, StyleSpan.class);

       for (int i = 0; i < ss.length; i++) {
           if (ss[i].getStyle() == android.graphics.Typeface.BOLD){
            str.removeSpan(ss[i]);          
           }
       }
    etx.setText(str);

    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-24T17:06:54.153

在我的项目中，我使用这种结构

```
textView.typeface = Typeface.create(textView.typeface, Typeface.NORMAL) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-23T06:39:15.237

类似于您在 first中使用的内容，`onClick()`而不是在 second中使用的内容。`s.setSpan(new StyleSpan(android.graphics.Typeface.BOLD), startSelection, endSelection, 0);``s.setSpan(new StyleSpan(android.graphics.Typeface.NORMAL), startSelection, endSelection, 0);``onclick()`

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-23T06:35:22.343

只需使用：

```
Typeface.NORMAL 
```

您可以在 Android[文档](http://developer.android.com/reference/android/graphics/Typeface.html#BOLD)上查看。

# java - 字符串基元/字符串类的区别？

> ID：10714637
> 
> 赞同：1
> 
> 时间：2012-05-23T06:32:10.843
> 
> 标签：java, string

这两种说法有什么区别？

```
String str = "stackoverflow"; 
```

&

```
String str = new String("stackoverflow"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T06:44:59.090

它与从池中获取字符串的方式不同。

1\. 当你说，

```
String str = "stackoverflow" 
```

它将首先检查`"stackoverflow"`字符串池中是否已经存在。如果是这样，那么它将使用来自池的相同内容。

这就是为什么当，

```
String str1= "stackoverflow";
String str2 ="stackoverflow";

str1==str2? --> will be true 
```

上面的结果将为真，因为使用了池中相同的 String 对象。

2\. 当你这样做时，

```
String str = new String("stackoverflow"); 
```

总是会创建一个新的 String 对象，而不管池中是否已经存在相同的对象。

所以，

```
String str1= "stackoverflow";
String str2 =new String("stackoverflow");
String str3 =new String("stackoverflow"); 
```

在这里，str2 和 str3 将再次创建一个新的 String 对象。

因此，str2、str3 和 str1 都指代不同的对象，并且`str2!=str3!=str1`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T06:40:07.563

构造函数的 Javadoc`public String(String arg)`说：

> *初始化一个新创建的 String 对象，使其表示与参数相同的字符序列；换句话说，**新创建的字符串是参数字符串的副本。除非需要原始的显式副本，否则不需要使用此构造函数，因为字符串是不可变的。***

当您这样做时 `String str = "stackoverflow"` ，编译器会根据文字为您创建 String 对象。

当您这样做时： `new String("stackoverflow");` 创建两个，一个由编译器创建，一个由您创建。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T06:40:09.847

Java 有一个字符串池。更多信息：[http ://www.xyzws.com/Javafaq/what-is-string-literal-pool/3](http://www.xyzws.com/Javafaq/what-is-string-literal-pool/3)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T06:41:19.330

第一行为 stackoverflow 字符串分配内存。然后它将变量指向该位置。

第二行为字符串分配空间。然后它创建一个新的 String 类。它将字符串从第一个位置复制到内存中的新位置。最后，它将变量指向该位置。

您在第二个示例中所做的只是为计算机创建更多工作并使用更多内存。

# mysql - 根据不同的列创建具有 auto_increment 的表

> ID：10714640
> 
> 赞同：0
> 
> 时间：2012-05-23T06:32:25.650
> 
> 标签：mysql, auto-increment

基本上，标题说明了我正在尝试做的事情。mysql手册概述了它应该如何在这里工作：http: [//dev.mysql.com/doc/refman/5.1/en/example-auto-increment.html](http://dev.mysql.com/doc/refman/5.1/en/example-auto-increment.html)

但是，我认为我必须遗漏一些明显的东西，因为它对我不起作用。这是我的代码：

```
$sql = "CREATE TABLE $table_name (
    id MEDIUMINT(9) NOT NULL AUTO_INCREMENT,
    block VARCHAR(30) NOT NULL,
    issue_number MEDIUMINT(9) NOT NULL AUTO_INCREMENT,
    date BIGINT(30),
    UNIQUE (id),
    PRIMARY KEY  (block, issue_number)
);"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:37:35.170

我认为在一张表中没有超过一个自动增量列的可能性。用这个：

```
$sql = "CREATE TABLE $table_name (
    id MEDIUMINT(9) NOT NULL,
    block VARCHAR(30) NOT NULL,
    issue_number MEDIUMINT(9) NOT NULL AUTO_INCREMENT,
    date BIGINT(30),
    UNIQUE (id),
    PRIMARY KEY  (block, issue_number)
);" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:38:55.900

只能有一个自动列，它必须定义为一个键，低于一个正在工作

```
CREATE TABLE table_name (
    id MEDIUMINT(9) NOT NULL AUTO_INCREMENT,
    block VARCHAR(30) NOT NULL,
    issue_number MEDIUMINT(9) NOT NULL ,
    date BIGINT(30),
    UNIQUE (id),
    PRIMARY KEY  (block, issue_number)
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:46:42.770

就像其他人说的那样，只允许一个 auto_increment -column。您可以尝试在插入语句中增加您的 id。

```
insert into $table_name (id) values (1) on duplicate key update id = id + 1; 
```

但也许不是最好的解决方案..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T06:46:59.417

您可以创建一个带有自动递增`issue_number`字段的 MyISAM 表，例如 -

```
CREATE TABLE table_name(
  id MEDIUMINT(9) NOT NULL,
  block VARCHAR(30) NOT NULL,
  issue_number MEDIUMINT(9) NOT NULL AUTO_INCREMENT,
  date BIGINT(30),
  UNIQUE (id),
  PRIMARY KEY (block, issue_number)
)
ENGINE = MYISAM; 
```

# java - 单击屏幕时更改 TextView 值

> ID：10714648
> 
> 赞同：0
> 
> 时间：2012-05-23T06:33:18.103
> 
> 标签：java, android, textview

我想做一个简单的计数器。当我点击屏幕时，textvalue 的值会增加。

所以我的活动。

```
public class MyTasbih extends Activity implements View.OnClickListener {

//Button btn;
TextView t;
int i=0;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    //btn=(Button)findViewById(R.id.button);
    t=(TextView)findViewById(R.id.t);

    //btn.setOnClickListener(this);
    t.setOnClickListener(this);

    updateCounter();

}

public void onClick(View view) {
    i++;
    updateCounter();

}

private void updateCounter() {

    t.setText(i);
}
} 
```

但它的崩溃。我是新手，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:42:32.180

请试试这个并检查

```
private void updateCounter() {

    t.setText(String.valueOf(i));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:48:26.473

```
public class MyTasbih extends Activity implements View.OnClickListener {

//Button btn;
TextView t;
int i=0;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main6);

    //btn=(Button)findViewById(R.id.button);
    t=(TextView)findViewById(R.id.t);

    //btn.setOnClickListener(this);
    t.setOnClickListener(this);

    updateCounter();

}

public void onClick(View view) {
    i++;
    updateCounter();

}

private void updateCounter() {

    t.setText(String.valueOf(i));
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:41:11.643

我没有方便的 eclipse 来检查这个，但不应该更新：

```
private void updateCounter() {
    t.setText(Integer.toString(i));
} 
```

# wpf - 为什么我不能在某些类库的另一个类中创建依赖属性

> ID：10714650
> 
> 赞同：1
> 
> 时间：2012-05-23T06:33:33.830
> 
> 标签：wpf

> 我正在尝试在类库中名为“FocusBehaviour”的类中创建一个依赖属性。我添加了如下所示的命名空间。但它在第 1 行显示错误）return (bool)control.GetValue(FocusFirstProperty);
> 
> 错误：System.windows.Controls.Control 没有接受 System.windows.Controls.Control 类型的第一个参数的方法“GetValue”。2）同样的错误也来自 SetValue()……低于... 3) Control control = dpObj as Control; 错误：无法将 System.DependencyObject 转换为 System.windows.Controls.Control
> 
> 我还添加了 WindowsBase 参考..

```
 using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;

namespace MyOrgBI
{
    public static class FocusBehavior:DependencyObject
    {

        public static readonly DependencyProperty FocusFirstProperty = 
        DependencyProperty.RegisterAttached("FocusFirst", 
                                            typeof(bool),
                                            typeof(Control),
                                            new PropertyMetadata(OnFocusFirstPropertyChanged));

    public static bool GetFocusFirst(Control control)
    {
        return (bool)control.GetValue(FocusFirstProperty);
    }
    public static void SetFocusFirst(Control control, bool value)
    {
        control.SetValue(FocusFirstProperty, value);
    }
    static void OnFocusFirstPropertyChanged(DependencyObject dpObj, DependencyPropertyChangedEventArgs args)
    {
        Control control = dpObj as Control;
        if (control == null || !(args.NewValue is bool))
        {
            return;
        }
        if ((bool)args.NewValue)
        {
            control.Loaded += (sender, e) => control.MoveFocus(new TraversalRequest(FocusNavigationDirection.First));
        }
    }
} 
```

}

以前我在 WpfApplication 项目中创建了一个依赖属性。它工作正常，但是当我在另一个类库中创建一个时，它会显示此错误。

为什么会出现这些错误？我应该如何编写这段代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:53:31.137

派生出你的课程`DependencyObject`

```
public static class FocusBehavior : DependencyObject
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:36:23.707

您需要添加对`WindowsBase`程序集的引用。[DependencyObject](http://msdn.microsoft.com/en-us/library/system.windows.dependencyobject.aspx)位于那里。

# jsf - Facelets 中的 for 循环等效项

> ID：10714660
> 
> 赞同：2
> 
> 时间：2012-05-23T06:34:46.287
> 
> 标签：jsf, facelets

我怎样才能在 Facelets 中做类似下面的事情？

```
for(int i=0; i<=80; i++){
<f:selectItem  itemLabel=i itemValue=i />
} 
```

我在上面的代码中结合了 Java 和 Facelets 代码，但我希望这样的东西可以在 Facelets 中工作。加载页面时，我需要增加`itemLabel`and 。`itemValue`我需要显示从 1 到 80 的所有值作为下拉选项。

是否可以这样做，或者是否有任何其他方法可以实现相同的目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T06:59:24.170

你为什么不使用

```
<f:selectItems value="#{myBean.someList}" var="someVal"
     itemLabel="#{someVal.someLabel}" itemValue="#{someVal.someVal}" /> 
```

`someList`对象列表在哪里...

另外，你应该看看[OmniFaces Showcase-Arrays](http://showcase.omnifaces.org/functions/Arrays)，有几个你可能会发现相关的例子

否则你可以`c:forEach`按照`<f:selectItem`@AurA 的建议来做

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-23T06:41:35.270

我想这可能是你在找什么？

```
<select>
for(int i=0; i<=80; i++){
   <option value = i>i</option>
}
</select> 
```

不是你想要实现的 100% - 我假设这是`for`php 中的一个循环（或者你可以使用 JS）并且你只是想在一个循环中创建一个简单的（x/html）选择表单？html/xhtml 没有循环功能，仅用于纯标记。如果我误解了您，请澄清您的问题，我会尽力为您提供更好的帮助。

# python - 有时它有时会在 Django 中不保存

> ID：10714662
> 
> 赞同：0
> 
> 时间：2012-05-23T06:35:20.943
> 
> 标签：python, django, django-models, django-views, python-2.7

当我尝试从另一个文件调用它时，我在这个方法中遇到问题，它完美地保存在数据库中并且值被更新（这些点被添加到承包商）但我不明白当我在另一个文件中调用它时如何（除了第一个）它只保存方法内的值，但是一旦它超出方法，值就没有保存它返回（通过打印检查）

```
def add_points_cont(contractor_id , action_name):
    contractor = Contractor.objects.get(id=contractor_id)
    action = Action.objects.get(name=action_name)
    toBeAdded = action.points
    totalPoints = contractor.points+toBeAdded
    contractor.points = totalPoints
    contractor.save() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:56:43.703

不清楚您在问什么，但听起来您正在从数据库中读回缓存值。在 django中，[查询集是惰性的](https://docs.djangoproject.com/en/dev/topics/db/queries/#querysets-are-lazy)，这意味着您可能看不到数据库中最新更新的值，这是正常的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:51:01.683

您可以向该方法传递另一个参数

`def add_points_cont(contractor=None , action_name):`

您将承包商传递给方法

# c# - 如何将条件编译符号（DefineConstants）传递给 msbuild

> ID：10714668
> 
> 赞同：26
> 
> 时间：2012-05-23T06:35:41.267
> 
> 标签：c#, visual-studio, msbuild

所以，[这个](https://stackoverflow.com/questions/479979/msbuild-defining-conditional-compilation-symbols)和[这个](http://msdn.microsoft.com/en-us/library/bb629394.aspx)都很清楚。简单地通过`/p:DefineConstants="SYMBOL"`

它对我根本不起作用，即使在测试项目中也是如此。我期望传递 /p:DefineConstants="SYMBOL" 将覆盖 csproj 中定义的任何条件编译常量。然而并非如此……

完整代码清单如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace DefineConstants
{
    class Program
    {
        static void Main(string[] args)
        {
#if DEV
            Console.WriteLine("DEV");
#elif UAT 
            Console.WriteLine("UAT");
#else
            Console.WriteLine("No environment provided");
#endif
        }
    }
} 
```

.csproj 文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
    <Platform Condition=" '$(Platform)' == '' ">x86</Platform>
    <ProductVersion>8.0.30703</ProductVersion>
    <SchemaVersion>2.0</SchemaVersion>
    <ProjectGuid>{57A2E870-0547-475C-B0EB-66CF9A2FE417}</ProjectGuid>
    <OutputType>Exe</OutputType>
    <AppDesignerFolder>Properties</AppDesignerFolder>
    <RootNamespace>DefineConstants</RootNamespace>
    <AssemblyName>DefineConstants</AssemblyName>
    <TargetFrameworkVersion>v3.5</TargetFrameworkVersion>
    <FileAlignment>512</FileAlignment>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Debug|x86' ">
    <PlatformTarget>x86</PlatformTarget>
    <DebugSymbols>true</DebugSymbols>
    <DebugType>full</DebugType>
    <Optimize>false</Optimize>
    <OutputPath>bin\Debug\</OutputPath>
    <DefineConstants>TRACE;DEBUG</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)|$(Platform)' == 'Release|x86' ">
    <PlatformTarget>x86</PlatformTarget>
    <DebugType>pdbonly</DebugType>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release\</OutputPath>
    <DefineConstants>TRACE</DefineConstants>
    <ErrorReport>prompt</ErrorReport>
    <WarningLevel>4</WarningLevel>
  </PropertyGroup>
  <ItemGroup>
    <Reference Include="System" />
    <Reference Include="System.Core" />
    <Reference Include="System.Xml.Linq" />
    <Reference Include="System.Data.DataSetExtensions" />
    <Reference Include="System.Data" />
    <Reference Include="System.Xml" />
  </ItemGroup>
  <ItemGroup>
    <Compile Include="Program.cs" />
    <Compile Include="Properties\AssemblyInfo.cs" />
  </ItemGroup>
  <Import Project="$(MSBuildToolsPath)\Microsoft.CSharp.targets" />
  <!-- To modify your build process, add your task inside one of the targets below and uncomment it. 
       Other similar extension points exist, see Microsoft.Common.targets.
  <Target Name="BeforeBuild">
  </Target>
  <Target Name="AfterBuild">
  </Target>
  -->
</Project> 
```

使用：

```
C:\Windows\Microsoft.NET\Framework\v4.0.30319\msbuild DefineConstants.sln /p:DefineConstants="DEV;DEBUG" /p:Configuration="Debug" /p:Platform="x86" 
```

运行程序显示：

```
No environment provided 
```

**帮助！**

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-23T08:13:02.387

使用`DefineConstants`绝对有效。这意味着你做错了什么。我的猜测是您首先构建了项目而没有定义任何内容，然后再次构建它。然后 MSBuild 将看到该项目已经构建并且不会再次构建，而只是复制输出文件。您应该发布 msbuild 的输出，以便我们确定，但作为参考，我仅使用必要的开关编译了您的项目，结果如下（省略了完整的 msbuild 输出）：

```
> msbuild ConsoleApplication1.sln /p:DefineConstants="DEV" /t:Rebuild
....
Building solution configuration "Debug|x86".
Project ... is building ConsoleApplication1.csproj" (Rebuild target(s)).
...
> ConsoleApplication1\bin\Debug\DefineConstants.exe
DEV
> msbuild ConsoleApplication1.sln /p:DefineConstants="UAT" /t:Rebuild
...
> ConsoleApplication1\bin\Debug\DefineConstants.exe
UAT
> msbuild ConsoleApplication1.sln /t:Rebuild
...
> ConsoleApplication1\bin\Debug\DefineConstants.exe
No environment provided 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-01T05:35:50.960

看来您没有通过条件编译符号。这就是为什么你得到输出：没有提供环境。只需转到项目属性，然后单击构建选项卡（应用程序下方的左侧）。你会发现一个框询问条件编译符号。只需根据您想要的输出编写常量。例如。在您的示例中，要打印“DEV”，请在条件编译框中写入 DEV 并重建您的项目。我相信它会起作用的。

注意：如果您想传递任何符号而不是按照您的代码，它将打印：未选择环境。

# python - 使用python将无序列表标签添加到纯文本文件（用于html输出）

> ID：10714672
> 
> 赞同：2
> 
> 时间：2012-05-23T06:36:05.953
> 
> 标签：python

如果可能，我需要使用正则表达式围绕一长串项目添加无序列表标签。该文本是从文本文件中提取的，并在标记函数中进行处理，该函数包括许多不同的正则表达式，以用标记标记替换原始文本文件的某些元素。

```
* Item One
* Item Two
* Item Three
* Item Four 
```

我目前有一个正则表达式函数来用列表标签替换星号，如下所示。

```
 <li>Item One</li>
    <li>Item Two</li>
    <li>Item Three</li>
    <li>Item Four</li> 
```

如何使用正则表达式或递归/循环过程在列表的开头和结尾添加标签？在将 asterix 替换为列表标签之前或之后这样做会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:52:09.913

```
In [1]: '<ul>' + ''.join(['<li>'+l[2:]+'</li>' for l in open('foo.txt') if l.startswith('*')]) + '</ul>'
Out[1]: '<ul><li>Item One\n</li><li>Item Two\n</li><li>Item Three\n</li><li>Item Four\n</li></ul>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:24:30.370

Let's say you already removed the `*` and added the elements to a list:

```
items = ["Item One", "Item Two", "Item Three", "Item Four"] 
```

You could now:

```
html_items = '<ul>\n<li>' + '</li>\n<li>'.join(items) + '</li></ul>'
print html_items 
```

Output:

```
<ul>
<li>Item One</li>
<li>Item Two</li>
<li>Item Three</li>
<li>Item Four</li>
</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:56:59.147

这是我的解决方案`lxml`

```
from lxml.builder import E
from lxml import etree

items = ['item 1', 'item 2', 'item 3']
ul = E.ul()
for item in items:
    ul.append(E.li(item))
print etree.tostring(ul, pretty_print=True) 
```

上面的代码将输出：

```
<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T06:42:10.310

```
with open('file.txt') as f:
    for line in f:
        if line.startswith('*'):
            print '<li>' + line[2:] + '</li>' 
```

# django - 在 EC2 上以几乎零停机时间部署（单节点）Django Web 应用程序

> ID：10714673
> 
> 赞同：11
> 
> 时间：2012-05-23T06:36:10.097
> 
> 标签：django, postgresql, deployment, amazon-ec2, django-south

问题：**在使用 Django 时，实现 0（或尽可能接近 0）停机时间的好策略是什么？**

我读到的大多数答案都是“使用南方”或“使用织物”，但恕我直言，这些答案非常模糊。我实际上两者都用，但我仍然想知道如何尽可能地实现零停机时间。

**一些细节：**

我在 EC2 上托管了一个大小适中的 Django 应用程序。我使用[South 进行模式和数据迁移](http://south.aeracode.org/)，并使用带有[boto的](https://github.com/boto/boto)[结构来自动执行通过一组](http://fabric.readthedocs.org/en/latest/)[Jenkins（持续集成服务器）](http://jenkins-ci.org/)任务触发的重复部署/备份任务。我使用的数据库是标准的 PostgreSQL 9.0 实例。

我有一个...

1.  **登台服务器由我们的团队不断编辑，**包含所有新内容，并加载**最新最好的代码**和...

2.  **实时服务器，随着用户帐户和用户数据而不断变化**——所有这些都记录在 PostgreSQL 中。

**当前部署策略：**

部署新代码和内容时，会创建两台服务器（实时和暂存）的两个 EC2 快照。直播切换到“更新新内容”页面...

**停机时间开始。**

实时克隆服务器迁移到与登台服务器相同的架构版本（使用南）。只创建了我希望从实时中保留的表和序列的转储（特别是用户帐户及其数据）。完成此操作后，转储将上传到登台克隆服务器。从实时保留的表被截断并插入数据。**随着我直播服务器中数据的增长，这个时间显然在不断增加**。

加载完成后，活动服务器的弹性 IP 将更改为临时克隆（因此它已被提升为新活动）。实时实例和实时克隆实例被终止。

**停机时间结束**。

是的，这行得通，但是随着数据的增长，我的“虚拟”零停机时间越来越远。当然，我想到的事情是以某种方式利用复制并开始研究 PostgreSQL 复制和“最终一致”的方法。我知道我可以用负载平衡器做一些魔法，但同时创建的帐户问题使它变得棘手。

你会推荐我看什么？

**更新**：

**我有一个典型的 Django 单节点应用程序。**我希望有一个更深入地解决 django 特定问题的解决方案。例如，使用 Django 对具有自定义路由器和复制的[多个数据库的支持的想法已经闪过我的脑海。](https://docs.djangoproject.com/en/dev/topics/db/multi-db/)有一些与我希望回答会涉及的问题相关的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T06:55:34.990

可能感兴趣的是一种称为 Canary 释放的技术。去年在阿姆斯特丹的一次软件会议上，我看到了 Jez Humble 的精彩演示。这是关于低风险发布的，幻灯片在[这里](http://gotocon.com/dl/goto-amsterdam-2011/slides/JezHumble_RemediationPatternsHowToAchieveLowRiskReleases.pdf)。

这个想法不是一次切换所有系统，而是将一小部分用户发送到新版本。只有当新系统的所有性能指标都符合预期时，其他的也会被切换。我知道这种技术也被 facebook 等大网站使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T23:10:35.017

不应迁移实时服务器。该服务器应该可以从两个登台服务器 server0 和 server1 访问。最初，server0 处于活动状态，并且对 server1 进行了更改。当您想更改软件时，请切换实时服务器。至于新内容，不应该在登台服务器上。那应该在实时服务器上。将包含内容表版本号的列添加到表中，并修改您的代码库以使用正确的内容版本号。开发软件以根据需要将旧版本复制到具有更新版本号的新行。将当前版本号放在 server0 和 server1 上的 settings.py 中，这样您就可以在选择数据时有一个中心位置供软件参考，或者创建一个可以更新以获得正确版本内容的数据库访问应用程序。当然，

这种方法将消除任何停机时间。您将不得不重写您的一些软件，但是如果您找到一种通用的访问方法，例如您可以修改的数据库访问方法，您可能会发现它的工作量并不大。从长远来看，创建一个专门支持系统即时切换的系统的前期投资将大大减少工作量，并且可以扩展到任何内容大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T16:30:58.797

如果我理解正确，问题似乎是您的应用程序已关闭，而数据正在与架构一起恢复到新数据库。

为什么你首先要创建一个新服务器？为什么不就地迁移数据库（当然，在您对迁移进行广泛测试之后），一旦完成，更新代码并“重新启动”您的进程（例如，gunicorn 可以接受 HUP 信号，这将使它重新加载应用程序而不丢弃队列中的连接）。

许多迁移根本不需要锁定数据库表，所以这是安全的。对于其余的，还有其他方法可以做到这一点。例如，如果您想添加一个必须首先填充正确数据的新列，您可以按照以下步骤进行操作（简要说明）：

1.  将列添加为接受 NULL 值并使 django 开始写入该列，以便新条目将具有正确的数据。
2.  填充现有条目。
3.  让 django 也从新列开始阅读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T10:02:28.123

要实现 0 停机时间，您必须至少拥有 2 台服务器 + 平衡器。并按顺序更新它们。如果你想同时更新——数据库和应用程序——并且停机时间为 0——你必须有 2 个数据库服务器。没有奇迹，没有灵丹妙药，django 不会让你摆脱部署问题。

# iphone - iPhone Sencha Touch：我需要在哪个 JS/HTML 文件中启动我的应用程序？

> ID：10714674
> 
> 赞同：1
> 
> 时间：2012-05-23T06:36:10.430
> 
> 标签：iphone, objective-c, cordova, sencha-touch, sencha-touch-2

我已经开始使用**`phone gap and Sencha Touch`**.

我已经将 sencha touch sdk 添加到我的应用程序中，使用**`kitchen sink application`**.

*当我执行该应用程序时，它会在左侧显示用户界面列表等，在右侧显示 sencha touch kitchen sink 应用程序*的主页。

当我选择任何行时，它们会显示按钮、列表、选择器和不同类型的演示，如*`kitchensink demo`*.

但**`I need to create my own views rather than kitchen sink demo views.`**

*`Here i have bundle of .JS & HTML files`* ***`in wich file i need to start my application`***,

我应该如何创建一个基本面板作为 .JS 文件的初始步骤？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T12:51:37.267

很简单，试着把它放到 .js 文件中。下面的代码是容器主面板：

```
 var panel = new Ext.Panel({
        id:'pnlInit',
        fullscreen:true,
        items : [your_panel1, your_panel2, your_panel3, and_so_on],
        dockedItems: []
    }) 
```

其中 your_paneln 是您在 .js 文件中创建的面板。我希望这些有帮助。

# trigger.io - 使用 trigger.io 上传视频

> ID：10714678
> 
> 赞同：1
> 
> 时间：2012-05-23T06:36:37.933
> 
> 标签：trigger.io

我正在考虑使用 trigger.io 来构建一个可以上传视频的应用程序。由于视频可能会变得非常大并且在低带宽连接上上传也很耗时，我不确定 trigger.io 是否能够处理这个问题。

1.  我希望能够在手机上缓存视频。尺寸有什么限制吗？文件将存储在哪里？
2.  有没有内置的方法可以分块上传视频？理想情况下，我想让它在后台进程中运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T16:31:01.443

[使用file.getVideo](http://docs.trigger.io/en/v1.3/modules/file.html#file.getVideo)捕获的视频确实保存在设备上 - 它们在画廊中，并且可以在以后使用该`source: "gallery"`选项进行访问。

显然，我们受到设备自身存储的限制，但不要强加限制。

我们确实会在后台进行文件上传 - 尽管其行为方式在某种程度上取决于平台，因此您应该确保您的目标平台按您的意愿工作。

对于分块上传，您是指将文件拆分为多个部分，然后在服务器上手动组合吗？还是您的意思是较低级别的可恢复上传功能？我们目前不支持这个，但我们愿意在未来实施一些东西！

# multithreading - 如果调用 `pthread_join()` 的线程被取消，那么目标线程将保持可连接状态

> ID：10714679
> 
> 赞同：2
> 
> 时间：2012-05-23T06:36:41.530
> 
> 标签：multithreading, pthreads

来自： http: [//linux.die.net/man/3/pthread_join](http://linux.die.net/man/3/pthread_join)

> 如果调用 pthread_join() 的线程被取消，那么目标线程将保持可连接状态（即，它不会被分离）。

这是否意味着如果我们取消主线程调用，目标线程将不会中止`pthread_join`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:17:15.957

`pthread_join()`首先不会“中止”目标线程，所以我不确定我是否完全理解这个问题。

基本上，如果一个线程（主线程或其他）调用`pthread_join()`它要求阻塞，直到目标线程退出。在正常情况下，一旦目标线程退出，被调用的线程`pthread_join()`将解除阻塞，并且与目标线程关联的任何资源都可以被系统释放。

但是，如果一个线程已经调用`pthread_join()`（并且被阻塞等待目标线程退出）并且被阻塞的线程被取消，那么`pthread_join()`调用的目标基本上不会发生任何事情（它继续）。文档要澄清的是，该线程仍然是“可连接的”——这意味着：

*   另一个线程可以调用`pthread_join()`以等待它完成
*   当一个线程完成并加入时，系统可以释放的资源*不会*被释放，除非另一个线程加入目标线程或被目标线程`pthread_detach()`调用。调用`pthread_detach()`一个线程使其“不可加入” - 它继续运行并且它的资源将在它退出时被释放（分离调用向系统表明在线程退出后没有任何东西将使用这些资源），但没有线程可以加入它了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:16:02.983

语句文学的意思是，如果你有 3 个线程`A`,`B`和joins `C`，那么如果被取消就可以加入。`B``A``C``A``B`

取消加入线程不一定中止加入的线程。当一个线程被取消时，它可以在终止前进行清理，这包括取消其他线程。

# sql - 在oracle中逐小时计算两个日期之间的记录数

> ID：10714680
> 
> 赞同：6
> 
> 时间：2012-05-23T06:36:43.027
> 
> 标签：sql, oracle, group-by, grouping

我需要一个在 oracle 中执行此序列的 SINGLE 查询。

```
select count(*) from table1
where request_time < timestamp'2012-05-19 12:00:00' and (end_time > timestamp'2012-05-19 12:00:00' or end_time=null);

select count(*) from table1
where request_time < timestamp'2012-05-19 13:00:00' and (end_time > timestamp'2012-05-19 13:00:00' or end_time=null);

select count(*) from table1
where request_time < timestamp'2012-05-19 14:00:00' and (end_time > timestamp'2012-05-19 14:00:00' or end_time=null);

select count(*) table1
where request_time < timestamp'2012-05-19 15:00:00' and (end_time > timestamp'2012-05-19 15:00:00' or end_time=null);

select count(*) from table1
where request_time < timestamp'2012-05-19 16:00:00' and (end_time > timestamp'2012-05-19 16:00:00' or end_time=null); 
```

如您所见，小时正在逐一增加。这是输出

```
COUNT(*)               
1085 
```

* * *

```
COUNT(*)               
1233 
```

* * *

```
COUNT(*)               
1407 
```

* * *

```
COUNT(*)               
1322 
```

* * *

```
COUNT(*)               
1237 
```

* * *

我写了一个查询，但它没有给我正确的答案！

```
select col1, count(*) from
(select TO_CHAR(request_time, 'YYYY-MM-DD HH24') as col1 from table1
 where request_time <= timestamp'2012-05-19 12:00:00' and (end_time >= timestamp'2012-05-19 12:00:00' or end_time=null))
group by col1 order by col1; 
```

这个查询给了我一个结果集，它的 count(*) 之和等于上面写的第一个查询！结果如下：

```
COL1          COUNT(*)               
------------- ---------------------- 
2012-05-19 07      22                     
2012-05-19 08      141                    
2012-05-19 09      322                    
2012-05-19 10      318                    
2012-05-19 11      282 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-23T11:07:37.750

`trunc`请注意表达式与日期值的用法。`alter session`如果您没有在 sql*plus 中运行查询，则可以省略。

```
SQL> alter session set nls_date_format='yyyy-mm-dd hh24:mi:ss';

Session altered.

SQL> SELECT 
       trunc(created,'HH'), 
       count(*) 
     FROM 
       test_table 
     WHERE 
       created > trunc(SYSDATE -2) 
     group by trunc(created,'HH');

TRUNC(CREATED,'HH')   COUNT(*)
------------------- ----------
2012-05-21 09:00:00        748
2012-05-21 16:00:00         24
2012-05-21 17:00:00         12
2012-05-21 22:00:00        737
2012-05-21 23:00:00        182
2012-05-22 20:00:00         16
2012-05-22 21:00:00        293
2012-05-22 22:00:00        610

8 ROWS selected. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:05:43.543

您的个人查询似乎与重叠的记录集相匹配。如果您在问题中包含一些示例数据会有所帮助，但我可以猜到......

例如，所有 end_time=null 和 request_time=2012-05-19 13:30:00 的记录都将被第一次和第二次查询统计；但它们只会在您的“整体”查询中计算一次。

也许您打算查询 request_time 上的日期范围，而不是像`request_time < timestamp'2012-05-19 12:00:00'`?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-03T16:45:08.893

对于 Oracle 数据库，它按预期工作。

SELECT to_char(updated,'DD-MM-YYYY HH'), count(*) FROM customer WHERE trunc(updated) >= to_Char('02-JUL-2017') And trunc(updated) <= to_Char('02- JUL-2017') 分组 to_char(更新,'DD-MM-YYYY HH')

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-04T14:04:33.153

尝试这个

```
select TO_CHAR(request_time, 'HH24') as "hourOfDay",count(*)as
"numOfLogin", TO_CHAR(request_time, 'DD') as "date" from table1 
where request_time<= timestamp'2017-08-04 23:59:59' and
(request_time>= timestamp'2017-08-03 00:00:01' ) group by
TO_CHAR(request_time, 'HH24'),TO_CHAR(request_time, 'DD'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-16T01:26:51.143

我必须做你想做的同样的事情。这是我想出的逻辑

```
select count(0), hours
from
(select to_char(from_date + ((to_number(column_value)-1)/24), 'yyyy-mm-dd hh24')||':00:00' hours
  from table1,
       xmltable ('for $i in 1 to xs:int(.) return $i'
                 passing xmlelement(e, extract (hour from cast(to_date as timestamp)-cast(from_date as timestamp))+2))
where change_date > sysdate - 1
)
group by hours
order by count(0) desc; 
```

# python - 在不使用 if 语句的情况下生成多个变量输出

> ID：10714685
> 
> 赞同：3
> 
> 时间：2012-05-23T06:36:56.427
> 
> 标签：python, string, variables, if-statement, int

我在这里不是针对特定编码的问题，而是更多关于如何在不使用 if 语句的情况下生成特定变量输出的问题。

为了更清楚，这里有一个例子：史密斯先生给出了 5 分测验，按 5-A、4-B、3-C、2-D、1-E、0-F 的等级分级。创建一个程序，该程序接受测验分数 (1-5) 作为输入，并在不使用 if 语句的情况下打印出相应的成绩。

所以希望这能让我的困境更加清晰。我正在寻找一种方法来将成绩 (AF) 与相应的测验分数 (1-5) 相关联，而不使用 if 语句。我对 python 还是很陌生，你可以称我为一个缓慢的学习者，但感谢任何帮助！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T06:49:27.047

最直接和灵活的方法是使用**字典**：

```
>>> score_grade_mapping = {6: 'A+', 5: 'A', 4: 'B', 3: 'C', 2: 'D', 1: 'E', 0: 'F'}
>>> score_grade_mapping[4]
'B'
>>> score_grade_mapping[6]
'A+' 
```

虽然它只是一个数字序列，从零开始，映射到单个字母，但您可以使用**字符串索引**更有效地（尽管不太明显）使用字符串执行此操作。

```
>>> score_grade_mapping = 'FEDCBA'
>>> score_grade_mapping[4]
'B' 
```

如果您需要多个字母，但仍具有从零开始的一系列分数，则可以使用带有**索引的****列表**（可变）或**元组**（不可变，因此对于不更改它的情况更有效）：

 **```
>>> score_grade_mapping = 'F', 'E', 'D', 'C', 'B', 'A', 'A+'
>>> score_grade_mapping[4]
'B'
>>> score_grade_mapping[6]
'A+' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T06:41:39.717

你可以使用：

```
'FEDCBA'[score] 
```

这通过在`score`字符串中的位置获取字符来工作`'FEDCBA'`：`F`在位置`0`，`E`在位置`1`等等。

例如：

```
In [1]: 'FEDCBA'[0]
Out[1]: 'F'

In [2]: 'FEDCBA'[5]
Out[2]: 'A' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T06:48:35.627

使用字典：

```
dic={5:'A',4:'B',3:'C',2:'D',1:'E',0:'F'}
score=int(input())
grade=dic.get(score,'invalid input')
print(grade) 
```**

# java - 安卓真机数据发送

> ID：10714687
> 
> 赞同：1
> 
> 时间：2012-05-23T06:37:07.693
> 
> 标签：java, android, gps, device

我做了一个基于 GPS 位置检索的项目。

```
public class LbsGeocodingActivity extends Activity {

private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Milliseconds

protected LocationManager locationManager;

protected Button retrieveLocationButton;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    retrieveLocationButton = (Button) findViewById(R.id.retrieve_location_button);

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    locationManager.requestLocationUpdates(
            LocationManager.GPS_PROVIDER, 
            MINIMUM_TIME_BETWEEN_UPDATES, 
            MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
            new MyLocationListener()
    );

retrieveLocationButton.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            showCurrentLocation();
        }
});        

}    

protected void showCurrentLocation() {

    Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

    if (location != null) {
        String message = String.format(
                "Current Location \n Longitude: %1$s \n Latitude: %2$s",
                location.getLongitude(), location.getLatitude()
        );
        Toast.makeText(LbsGeocodingActivity.this, message,
                Toast.LENGTH_LONG).show();
    }

}   

private class MyLocationListener implements LocationListener {

    public void onLocationChanged(Location location) {
        String message = String.format(
                "New Location \n Longitude: %1$s \n Latitude: %2$s",
                location.getLongitude(), location.getLatitude()
        );
        Toast.makeText(LbsGeocodingActivity.this, message, Toast.LENGTH_LONG).show();
    }

    public void onStatusChanged(String s, int i, Bundle b) {
        Toast.makeText(LbsGeocodingActivity.this, "Provider status changed",
                Toast.LENGTH_LONG).show();
    }

    public void onProviderDisabled(String s) {
        Toast.makeText(LbsGeocodingActivity.this,
                "Provider disabled by the user. GPS turned off",
                Toast.LENGTH_LONG).show();
    }

    public void onProviderEnabled(String s) {
        Toast.makeText(LbsGeocodingActivity.this,
                "Provider enabled by the user. GPS turned on",
                Toast.LENGTH_LONG).show();
    }

}

} 
```

在这里，如果我在模拟器中运行它，我需要从模拟器控制发送 lon 和 lat：

[模拟器控制](http://www.javacodegeeks.com/2010/09/android-location-based-services.html)

但我想在我的设备中运行它。因此，当我运行它时，它不会检索任何 lon ，lat。知道如何在真实设备中发送数据吗？

# php - 如何使默认的点赞显示带有数字而不是 Facebook 的点赞图标？

> ID：10714689
> 
> 赞同：0
> 
> 时间：2012-05-23T06:37:08.173
> 
> 标签：php, facebook, facebook-like

我试过这个：

```
<div style="width:52px;overflow:hidden;">
 <fb:like layout="button_count"></fb:like>

 <div id="fb-root"></div>
 <script>
 window.fbAsyncInit = function() {
      FB.init({appId: 'YOUR_APP_ID', status: true, cookie: true,
      xfbml: true});
      };
      (function() {
      var e = document.createElement('script');
      e.type = 'text/javascript';
      e.src = document.location.protocol +
      '//connect.facebook.net/en_US/all.js';
      e.async = true;
      document.getElementById('fb-root').appendChild(e);
 }());
 </script>
</div> 
```

它只显示FaceBook的一个like按钮，但不显示有多少人喜欢它。点赞后只显示 facebook 的 V 标志（我喜欢它）。

我如何始终显示总喜欢的数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:41:56.767

阅读此链接

[developer.facebook.com/docs/reference/plugins/like](http://developers.facebook.com/docs/reference/plugins/like)

更新

您必须在 Like 插件中选择此选项（*见图*） ![在此处输入图像描述](../Images/89cbe98f529f3c4817e48b1986600053.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:52:14.640

好像您正在使用 XFBML 版本的 Like 按钮。

确保您已将 XML 命名空间定义为 yout html，如下所示。

```
<html xmlns:fb="http://ogp.me/ns/fb#"> 
```

在 body 标记之后定义您的以下代码

```
<div id="fb-root"></div>
 <script>
 window.fbAsyncInit = function() {
      FB.init({appId: 'YOUR_APP_ID', status: true, cookie: true,
      xfbml: true});
      };
      (function() {
      var e = document.createElement('script');
      e.type = 'text/javascript';
      e.src = document.location.protocol +
      '//connect.facebook.net/en_US/all.js';
      e.async = true;
      document.getElementById('fb-root').appendChild(e);
 }());
 </script> 
```

然后在页面上使用您的按钮代码，例如

```
<div style="width:52px;overflow:hidden;">
<fb:like href="http://www.google.com" send="false" layout="button_count" width="450" show_faces="true"></fb:like>
</div> 
```

# c#-4.0 - SQL 语句结束后发现的字符

> ID：10714696
> 
> 赞同：0
> 
> 时间：2012-05-23T06:37:36.233
> 
> 标签：c#-4.0, ms-access-2007

我在运行我的代码时遇到问题，然后发生错误“在 SQL 语句结束后找到字符。”；

我的代码是：

*代码*

```
protected void btnSubmit_Click(object sender, EventArgs e)
{

    try
    {
        FileUpload img = (FileUpload)imgUpload;
        Byte[] imgByte = null;
        if (img.HasFile && img.PostedFile != null)
        {
            //To create a PostedFile
            HttpPostedFile File = imgUpload.PostedFile;
            //Create byte Array with file len
            imgByte = new Byte[File.ContentLength];
            //force the control to load data in array
            File.InputStream.Read(imgByte, 0, File.ContentLength);
        }

        string str = ("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:/Users/Geeta/Desktop/mssl2.accdb;Persist Security Info=False");

        OleDbConnection conn = new OleDbConnection(str);

        conn.Open();
        string sql = "INSERT INTO digital(Product_Name, Product_Code, Product_Price, Product_Image, Product_Description) VALUES(@pnm, @pcod, @ppr, @pimg, @pdes);" +" SELECT @@IDENTITY;";
        OleDbCommand cmd = new OleDbCommand(sql, conn);

        cmd.Parameters.AddWithValue("@pnm", txtEName.Text.Trim());
        cmd.Parameters.AddWithValue("@pcod", txt_productcode.Text.Trim());
        cmd.Parameters.AddWithValue("@ppr", txt_productprice.Text.Trim());
        cmd.Parameters.AddWithValue("@pdes", txt_productdescri.Text.Trim());
        cmd.Parameters.AddWithValue("@pimg", imgByte);
        int Id = Convert.ToInt32(cmd.ExecuteScalar());

        lblResult.Text = String.Format("Employee ID is {0}", Id);

        conn.Close();

    }

    catch
    {
        lblResult.Text = "There was an error";
    }
    finally
    {

    }
} 
```

}

我不知道为什么？

请建议我。

“谢谢”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:51:01.110

您必须将 select identity 作为单独的查询运行。Access 一次只能运行一个语句。

# asp.net - 检查树视图节点上的更新 Gridview

> ID：10714698
> 
> 赞同：0
> 
> 时间：2012-05-23T06:37:55.340
> 
> 标签：asp.net

**当我在没有回**发的情况下检查树视图中的节点时，我需要更新或过滤网格视图中的记录。 我尝试将 gridview 放在更新面板中，并为 treeviews NODECHECKCHANGED 事件注册了 ASYNCPOSTBACKTRIGGER，但仍然会发生回发。

我该如何解决这个或任何其他方法？请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T09:47:48.250

将自动回发事件更改为 false，选择更新面板的触发器。如果它不起作用，请为树视图使用另一个更新面板。

# objective-c - 解决“发布不可用”的方法

> ID：10714701
> 
> 赞同：1
> 
> 时间：2012-05-23T06:38:16.503
> 
> 标签：objective-c, xcode4.2, automatic-ref-counting

我在`release`阅读时遇到了麻烦，因为我使用的是 Xcode 4.2。我尝试了以下选项：“转换为 Objective-C ARC”，但仍然失败：

> Xcode 发现了 6 个阻止转换继续进行的问题。修复所有 ARC 就绪问题，然后重试。
> 
> ```
> receivedData = [[NSMutableData data] retain]; 
> ```
> 
> ARC 禁止“保留”的显式消息发送

和：

> ```
> [receivedData release]; 
> ```
> 
> “发布不可用”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:48:16.187

您只需使用：

```
receivedData = [NSMutableData data];
// or
receivedData = [[NSMutableData alloc] init]; 
```

因为ARC下的引用计数操作是*自动*的。

# c# - 用户单击 ctrl 键 + 链接按钮时如何在新选项卡中打开页面？

> ID：10714703
> 
> 赞同：0
> 
> 时间：2012-05-23T06:38:19.957
> 
> 标签：c#, asp.net

我有这段代码可以在不同的选项卡中打开新页面。

```
 protected void facebook_Click(object sender, ImageClickEventArgs e)
        {
            myurl = "http://www.facebook.com";
            string newWin = "window.open('" + myurl + "');";
            ClientScript.RegisterStartupScript(this.GetType(), "pop", newWin, true);
        } 
```

但是，当我从键盘按 ctrl 键并单击链接按钮时，会打开新选项卡，但在 URL 中

> javascript:__doPostBack('LinkBut​​ton2','') 显示。页面为空。

但我想在新标签中显示 facebook.com。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:00:11.833

这可能会对您有所帮助......在 Page_Load 事件中只需添加代码

```
facebook.Attributes.Add("onclick", "window.open('http://www.facebook.com','List','width=600,height=500,status,resizable');return false;"); 
```

或者只是添加 facebook.Attributes.Add("onclick","window.open('http://www.facebook.com');");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:41:37.957

我猜你正在使用服务器端控制，这需要回发来获取目标 url 或脚本。

制作锚标记或任何客户端控件，其他代码似乎都很好。

# windows - rundll32.exe 在 Windows 2003 服务器上不起作用

> ID：10714705
> 
> 赞同：0
> 
> 时间：2012-05-23T06:38:27.523
> 
> 标签：windows, forms, oracle

我在 windows xp 上使用了以下命令，它工作得很好。

```
 rundll32.exe url.dll,FileProtocolHandler c:\test.pdf 
```

但是相同的命令在 Windows 2003 服务器（准确地说，Windows 2003 R2，企业版，SP-2）上什么也不做。我的要求实际上是从我打算使用的 oracle form6i 中打开保存在本地磁盘上的 pdf 文档

```
HOST('cmd /c rundll32.exe url.dll, FileProtocolHandler "c:\test.pdf"'); 
```

命令，这是不正常的工作。关键是，如果一个命令首先不能在 dos shell 上运行，那么它将如何从 oracle 表单中运行。那么请帮助我如何在 Windows 2003 上运行此命令？为什么相同的命令可以在 xp 上完美打开 pdf 而在 2003 上却不行？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T06:16:28.450

该调用`cmd /c rundll32.exe url.dll, FileProtocolHandler "c:\test.pdf"`看起来像您正在尝试使用系统的默认查看器显示 pdf 文件。

有一个命令可以做到这一点，并且至少从 Windows 95 开始就已经存在：[start](http://technet.microsoft.com/en-us/library/cc755674%28v=ws.10%29.aspx)。只需运行`start "c:\test.pdf"`，系统就会启动带有相关程序的文件。

来自`help start`：

> 非可执行文件可以通过它们的文件关联来调用，只需键入文件名作为命令。（例如 WORD.DOC 将启动与 .DOC 文件扩展名关联的应用程序）。有关如何从命令脚本中创建这些关联的信息，请参阅 ASSOC 和 FTYPE 命令。

# ios - iOS 设备中的 3D 广告

> ID：10714706
> 
> 赞同：1
> 
> 时间：2012-05-23T06:38:27.643
> 
> 标签：ios, mobile, 3d, admob, ads

我只是想知道我们是否可以在 3D 视图中显示广告（来自 Admob、iAds 等），而不是从顶部或底部弹出 2D 广告。

我有一个目前在 iOS 设备上运行的 3D 赛车游戏，我希望在 3D 世界中投放一些广告。我什至不确定它是否可能：p

有什么建议么！

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:36:26.610

我认为这对于任何主要的 iOS 广告网络都是不可能的。AdMob 和 iAD 等大多数网络仅为其广告提供二维广告素材。

# jasper-reports - JasperReports：如何使用 Excel 导出器格式化数字数据

> ID：10714709
> 
> 赞同：7
> 
> 时间：2012-05-23T06:38:42.193
> 
> 标签：jasper-reports, export-to-excel, number-formatting, ireport

我正在使用*iReport 2.0.2*。在 Excel 导出器的帮助下生成报告后，我在格式化数字数据时遇到问题。

例如，`85110057689`字符串`8.51100e+10`在 Excel 文件中显示（作为在*iReport*中使用“在 Excel 中预览”按钮的结果）。

请建议如何将格式更改为简单（不科学）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T14:39:56.747

我们可以使用[***net.sf.jasperreports.export.xls.detect.cell.type***](http://jasperreports.sourceforge.net/config.reference.html#net.sf.jasperreports.export.xls.detect.cell.type)属性来解决问题。

文档中的引用：

> **net.sf.jasperreports.export.xls.detect.cell.type**
> 
> 其值用作 IS_DETECT_CELL_TYPE 导出标志的默认状态的属性。
> 
> 指定导出器是否应考虑原始文本字段表达式的类型并相应地设置单元格类型和值。

例如，我们可以为整个报告设置此属性：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" ...>
    <property name="net.sf.jasperreports.export.xls.detect.cell.type" value="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:51:21.320

为防止在 Excel 中以科学计数法显示大量数字，请确保在 Excel 单元格中放置“值”而不是值。

例如，如果数值 = 85110057689，则将值转换为字符串格式并将结果格式化为 '="85110057689"' 其中双引号包裹大数字并且前面有一个 '=' 符号。

# ios - 从 for 循环在 NSMutableArray 中添加数据

> ID：10714713
> 
> 赞同：0
> 
> 时间：2012-05-23T06:39:01.840
> 
> 标签：ios, for-loop, nsmutablearray

我有一个 for 循环，我可以在其中从导入的文件中获取检索到的数据。

```
-(NSArray *) csvArray2CompaniesArray:(NSArray *) csvArray
{
    int i=0;

    NSMutableArray *ma = [[NSMutableArray alloc] init];

    for (NSArray * row in csvArray)
    {
        if (i>0)
        {
            Company *_company = [[Company alloc] init];

            _company.name = [row objectAtIndex:0];
            _company.address = [row objectAtIndex:1];
            _company.telephone = [row objectAtIndex:2];

            [ma addObject:_company];

            //[_companyAddress addObject:[row objectAtIndex:1]];
            //[_companyAddress addObject:_company.address];
        }
        i++;
    }
    return (NSArray *) ma;   
} 
```

我想将循环中生成的数据保存在我创建的名为“companyAddress”的全局 NSMutableArray 中，我尝试使用

```
[_companyAddress addObject:[row objectAtIndex:1]]; 
```

或者

```
[_companyName addObject:_company.address]; 
```

当我尝试在屏幕上打印 _companyAddress 的内容时，它只输出“_company.address”中包含的最后一行，所以我认为 NSMutableArray 中的数据对于每个循环都会被覆盖而不是被添加。

谁能告诉我是否有任何方法可以正确添加数据？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:02:19.923

`NSMutableArray companyAddress``application` `didFinishLaunchingWithOptions`//在Application Delegate的方法中使用属性和synthesize加上分配的gobal声明

现在创建`Application Delegate's`对象说像您的应用程序代表名称是

```
AppDelegate then AppDelegate *objAppDelegate = (AppDelegate *)[[UIApplication sharedApplication]delegate]; 
```

该方法将是：

```
-(void) csvArray2CompaniesArray:(NSArray *) csvArray
{

 for (NSArray * row in csvArray)
 {
        Company *_company = [[Company alloc] init];

        _company.name = [row objectAtIndex:0];
        _company.address = [row objectAtIndex:1];
        _company.telephone = [row objectAtIndex:2];

        [objAppDelegate.companyAddress addObject:_company];
        [_company release];

 }
  NSLog(@"%@",objAppDelegate.companyAddress);
} 
```

所有公司引用将存储在 gobal companyAddress mutablearray

**编辑**：只是突出显示文本以获得更好的答案

# c# - 使用 Rx 轮询网站

> ID：10714714
> 
> 赞同：0
> 
> 时间：2012-05-23T06:39:06.393
> 
> 标签：c#, .net, system.reactive

只是想了解一下 Rx

我正在使用 Rx 每 2 秒轮询一次网站

```
var results = new List<MyDTO>();
var cx = new WebserviceAPI( ... );
var callback = cx.GetDataAsync().Subscribe(rs => { results.AddRange(rs); });
var poller = Observable.Interval(TimeSpan.FromSeconds(2)).Subscribe( _ => { cx.StartGetDataAsync(); }); 
```

（Web 服务 API 公开了一个 getItemsAsync/getItemsCompleted 事件处理程序类型机制，我从中创建了一个 observable）。

当网站返回时，我将响应的“业务部分”解压缩到 DTO 的 IEnumerable 中

```
public IObservable<IEnumerable<MyDTO>> GetDataAsync()
{
    var o = Observable.FromEventPattern<getItemsCompletedEventHandler,getItemsCompletedEventArgs>(
        h => _webService.getItemsCompleted += h,
        h => _webService.getItemsCompleted -= h);

    return o.Select(c=> from itm in c.EventArgs.Result.ItemList
                        select new MyDTO()
                        {
                           ...
                        });
} 
```

我的理由是，鉴于所有数据都在字符串中，因此将其打包到 IEnumerable 中是有意义的……但现在我不确定这是否正确！

如果网站响应时间超过 2 秒，我发现 MSTest 正在崩溃。调试时，产生的错误是

> “异步处理过程中出现错误。多个异步同时操作需要唯一的状态对象才能处于未完成状态”

除了内部异常

> “已添加项目。字典中的键：'System.Object' 正在添加的键：'System.Object'”

我假设问题是重入问题之一，因为下一个调用是在上一个调用完成填充数据之前开始并返回数据。

所以我不确定是否

1.  我把这件事放在一起很正确
2.  我应该以某种方式限制连接以避免重新进入。
3.  我应该使用不同的中间数据结构（或机制）而不是 IEnumerable

我会很感激一些指导。

编辑 1：所以我更改了网络调用以包含一个唯一的状态对象

```
public void StartGetDataAsync()
{
    ...
    //  was: _webService.getItemsAsync(request);
    _webService.getItemsAsync(request, Guid.NewGuid());
} 
```

并使它工作。但我仍然不确定这是否是正确的方法

编辑 2 - Web 服务信号：我正在使用 webServiceApi 类包装的肥皂网络服务。创建的references.cs包含以下方法

```
public void getItemsAsync(GetItemsReq request, object userState) 
{
    if ((this.getItemsOperationCompleted == null)) 
    {
        this.getItemsOperationCompleted = new System.Threading.SendOrPostCallback(this.OngetItemsOperationCompleted);
    }
    this.InvokeAsync("getItems", new object[] {
                    request}, this.getItemsOperationCompleted, userState);
}

private System.Threading.SendOrPostCallback getItemsOperationCompleted;

public event getItemsCompletedEventHandler getItemsCompleted;

public delegate void getItemsCompletedEventHandler(object sender, getItemsCompletedEventArgs e);

public partial class getItemsCompletedEventArgs : System.ComponentModel.AsyncCompletedEventArgs 
{
    ...
}

private void OngetItemsOperationCompleted(object arg) 
{
    if ((this.getItemsCompleted != null)) 
    {
        System.Web.Services.Protocols.InvokeCompletedEventArgs invokeArgs = ((System.Web.Services.Protocols.InvokeCompletedEventArgs)(arg));
        this.getItemsCompleted(this, new getItemsCompletedEventArgs(invokeArgs.Results, invokeArgs.Error, invokeArgs.Cancelled, invokeArgs.UserState));
    }
 } 
```

可能给你太多（或错过了什么）！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T04:33:20.200

我想我为你找到了一个不错的起点。

基本上，我认为您需要抽象出 Web 服务的复杂性并创建一个干净的函数来获得结果。

尝试这样的事情：

```
Func<GetItemsReq, IObservable<getItemsCompletedEventArgs>> fetch =
    rq =>
        Observable.Create<getItemsCompletedEventArgs>(o =>
        {
            var cx = new WebserviceAPI(/* ... */);
            var state = new object();
            var res =
                Observable
                    .FromEventPattern<
                        getItemsCompletedEventHandler,
                        getItemsCompletedEventArgs>(
                        h => cx.getItemsCompleted += h,
                        h => cx.getItemsCompleted -= h)
                    .Where(x => x.EventArgs.UserState == state)
                    .Take(1)
                    .Select(x => x.EventArgs);
            var subscription = res.Subscribe(o);
            cx.getItemsAsync(rq, state);
            return subscription;
        }); 
```

就我个人而言，我会更进一步，定义一个返回类型，比如`GetItemsReq`，它不包括用户状态对象，但与`getItemsCompletedEventArgs`.

然后，您应该能够使用`Observable.Interval`创建您需要的轮询。

如果您的 Web 服务实现`IDisposable`了，那么您应该`Observable.Using`在上述函数中添加一个调用，以便在 Web 服务完成后正确处理它。

让我知道这是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-29T20:55:03.453

Enigmativity 有一个很好的解决方案。

> ```
>  var state = new object();
> 
>           cx.getItemsAsync(rq, state); 
> ```

这些陈述是解决错误的关键。

每次调用 Async 方法时，都需要将一个唯一的对象传递给它（当然，除非一次只运行一个 Async 方法，这是极不可能的）。我为此苦苦思索了好几个小时，直到我发现你可以传递一个对象参数。如果没有该参数，它会将多个方法视为同一个调用，并为您提供“已添加项目。字典中的键：'System.Object' 正在添加的键：'System.Object'”消息。

# c# - 面板中的图形故障

> ID：10714715
> 
> 赞同：2
> 
> 时间：2012-05-23T06:39:07.560
> 
> 标签：c#, visual-studio-2010, graphics, panel

我试图在我的表单上的面板上绘制基本形状。到目前为止什么也没发生，我不知道为什么。此方法在我的表单的构造函数中调用。

```
private void doGraphics()
    {
        Pen p = new Pen(Color.Black);//draws wire frame Shapes
        SolidBrush sb = new SolidBrush(Color.Yellow);//draws filled Shapes
        Graphics g = panel1.CreateGraphics();

        Point[] pointArray = { new Point(100, 20), new Point(100, 0), new Point(120, 0), new Point(120, 20) };
        g.FillPolygon(sb, pointArray);
        g.DrawPolygon(p, pointArray);
    } 
```

任何建议都会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:42:32.623

您需要注册到`Paint`面板的事件并使用参数附带的图形对象：

在构造函数中：

```
panel1.Paint += new PaintEventHandler(panel1_Paint); 
```

处理程序本身：

```
void panel1_Paint(object sender, PaintEventArgs e) {
{
        Pen p = new Pen(Color.Black);//draws wire frame Shapes
        SolidBrush sb = new SolidBrush(Color.Yellow);//draws filled Shapes
        Graphics g = e.Graphics; // From Arguments

        Point[] pointArray = { new Point(100, 20), new Point(100, 0), new Point(120, 0), new Point(120, 20) };
        g.FillPolygon(sb, pointArray);
        g.DrawPolygon(p, pointArray);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:45:24.073

当您在构造函数中调用此方法时，您不能假定子控件和/或 Graphic 对象可用。使用表单的 OnPaint 方法或创建自定义控件并在那里覆盖 OnPaint。

# xml - 如何 (e) grep XML 获取某些标签内容？

> ID：10714716
> 
> 赞同：1
> 
> 时间：2012-05-23T06:39:09.267
> 
> 标签：xml, regex, grep

我如何（e）grep某个标签块之间的所有内容？

假设下面的输入文件，我想将 B-tags 之间的所有字符作为输出，所以：

```
<B><C>Test</C></B>
<B>Test2</B> 
```

我尝试了以下 grep 来搜索所有包含`<B>`and`</B>`标记之间内容的 XML 文件。

```
grep '<B>.*</B>' *.xml 
```

但它没有用。

对于以下输入：

```
<A>
 <B>
  <C>Test</C>
 </B>
 <D>
 </D>
 <B>
    Test2
 </B>
</A> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T15:12:56.777

使用 awk：

```
awk '/<B>/,/<\/B>/' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-27T12:16:38.750

处理 xml 文件时，最好的方法是使用 xml 工具。

[XML小星星](http://xmlstar.sourceforge.net/)：

```
xmlstarlet sel -t -c '//B' file.xml 
```

来自[libxml2](http://xmlsoft.org/)的 xmllint ：

```
xmllint --xpath '//B' file.xml 
```

# java - Android 通过应用下载的 FQL 查询获取 Facebook 好友

> ID：10714719
> 
> 赞同：0
> 
> 时间：2012-05-23T06:39:23.320
> 
> 标签：java, android

我正在尝试获取已下载该应用程序的用户朋友，我正在使用以下代码

```
 String query = "SELECT uid FROM user WHERE is_app_user=1 and uid IN  (SELECT uid2 FROM friend WHERE uid1 =" + fbId + ")";
         Bundle params = new Bundle();
         params.putString("method", "fql.query");
         params.putString("query", query);
         mAsyncFacebookRunner.request(null, params, new FQLListener()); 
```

上面的代码成功调用。我无法获取调用返回的内容，如下所示（A JSONArray）

```
 [{"uid":555555555},{"uid":000000000},{"uid":111111111},{"uid":222222222},{"uid":333333333}] 
```

如何将这些信息放入 ArrayList 之类的东西中？

这是我正在使用的 RequestListener。

```
 private class FQLListener implements RequestListener
    {

        @Override
        public void onComplete(String response, Object state) 
        {
            //get info here
        }
             } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:10:25.793

查看[http://developer.android.com/reference/org/json/JSONArray.html](http://developer.android.com/reference/org/json/JSONArray.html)来阅读 JSONArray。你可以尝试这样的事情：

```
JSONArray json = new JSONArray(server_response);
ArrayList<String> list = new ArrayList<String>();

for(int i = 0; i < json.length(); ++i){
    try{
        String uid = json.getJSONObject(i).getString("uid");
        list.add(uid);
    }
    catch(JSONException e){}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:13:51.010

```
ArrayList<String> uids = new ArrayList<String>();

try {
    JSONArray jsonArr = new JSONArray(response);

    for (int i = 0; i < jsonArr.length(); i++)
    {
        uids.add(jsonArr.getJSONObject(i).getString("uid"));
    }
} catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} 
```

# hibernate - Solr 和 Hibernate Search 的多词同义词

> ID：10714720
> 
> 赞同：1
> 
> 时间：2012-05-23T06:39:39.667
> 
> 标签：hibernate, search, solr, lucene, hibernate-search

我有一个 synonyms.txt 文件，内容如下

```
car accessories, gadi marmat 
```

我将**汽车配件**作为一个单一的标记进行索引，以便将其扩展到**汽车配件**和**gadi marmat**。

我希望整个同义词匹配，以便在查询**gadi marmat**时，返回带有**汽车配件**的记录。

我正在使用 shingle filter factory 扩展查询，这样在搜索**gadi marmat**时，它将扩展为**gadi**、**gadi marmat**和**marmat**，并且由于**gadi marmat**是作为单个令牌查询的，它应该匹配**汽车配件**并返回结果但是不是这样，但是当我搜索**汽车配件**时，它正在返回结果。因此，prblm 必须使用具有多个单词的索引同义词。

请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-12T09:08:42.993

同义词文件仅用于更改您正在搜索的单词。所以如果你写

汽车配件 => gadi marmat

当编译器匹配“汽车配件”时，它会尝试匹配“gadi marmat”

它就像一个令牌一样工作

你可以得到很好的结果混合这样的分析仪元素

```
@AnalyzerDef(name = "integram",
tokenizer = @TokenizerDef(factory = StandardTokenizerFactory.class),
filters = {
     @TokenFilterDef(factory = LowerCaseFilterFactory.class),
     @TokenFilterDef(factory = StopFilterFactory.class, params = {
         @Parameter(name = "words", value = "lucene/dictionary/stopwords.txt"),
         @Parameter(name = "ignoreCase", value = "true"),
         @Parameter(name = "enablePositionIncrements", value = "true")
     }),
     @TokenFilterDef(factory = SnowballPorterFilterFactory.class, params = {
            @Parameter(name = "language", value = "English")
     }),
     @TokenFilterDef(factory = SynonymFilterFactory.class, params = {
         @Parameter(name = "synonyms", value = "lucene/dictionary/synonyms.txt"),
         @Parameter(name = "expand", value = "false")
     }),
     @TokenFilterDef(factory = SnowballPorterFilterFactory.class, params = {
            @Parameter(name = "language", value = "English")
     })
}) 
```

# java - 计算多项分布的卷积

> ID：10714723
> 
> 赞同：0
> 
> 时间：2012-05-23T06:39:50.653
> 
> 标签：java, r, matlab, statistics

我正在做一个模拟，我需要计算多项[分布的](http://en.wikipedia.org/wiki/Multinomial_distribution)[卷积](http://en.wikipedia.org/wiki/Convolution_of_probability_distributions)。

有这样做的图书馆吗？最好，我希望能够准确计算随机变量的数量何时变小而近似值变大。

模拟代码是用 Java 编写的，但我对其他语言持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:25:42.370

在 MATLAB 中，您有以下命令：

**mnrnd**（生成多项式随机分布） [http://www.mathworks.com/help/toolbox/stats/mnrnd.html](http://www.mathworks.com/help/toolbox/stats/mnrnd.html)

和

**conv**（卷积两个数组） [http://www.mathworks.com/help/techdoc/ref/conv.html](http://www.mathworks.com/help/techdoc/ref/conv.html)

# web-services - 将主干设置为指向外部端点

> ID：10714725
> 
> 赞同：0
> 
> 时间：2012-05-23T06:40:05.957
> 
> 标签：web-services, backbone.js, endpoint

在骨干网中，如何将我的实体指向外部端点？

例如，我的应用程序在[http://myapp.com上运行](http://myapp.com)

我希望它使用 followgin rest web 服务

[http://external.com/api/rest/xxxx](http://external.com/api/rest/xxxx)

我尝试使用[urlRoot](http://documentcloud.github.com/backbone/#Model-urlRoot)属性，但它似乎不起作用

```
Sagan.FeatureModel = Backbone.Model.extend({
  defaults: {
    name: "New Feature",
    parent: "",
    enabled: false
  },
  urlRoot: 'http://localhost:9001/',
  url: 'features'
}); 
```

出于测试目的，该应用程序托管在 localhost:9000 上，外部 Web 服务托管在 localhost:9001 上。

骨干似乎仍然指向 localhost:9000 而不是 9001

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T13:28:56.853

在您的示例中，您正在为模型设置自定义`urlRoot`和`url`属性。

设置自定义`url`属性将使您的自定义`urlRoot`被忽略，因为此属性用于*默认* `url`行为，请查看[Model.url 文档](http://documentcloud.github.com/backbone/#Model-url)。

如果您希望您的模型使用*端点* `http://external.com/api/rest/features`，只需将其添加到`urlRoot`并保持`url`不变：

```
urlRoot: "http://external.com/api/rest/features" 
```

它将创建如下路线：

```
GET http://external.com/api/rest/features/1 
```

用于获取 id 为 1 的模型。

# c# - 显示标签和移动形状

> ID：10714728
> 
> 赞同：1
> 
> 时间：2012-05-23T06:40:21.977
> 
> 标签：c#, wpf, timer

我是 C# 和 WPF 的新手。我想做以下事情：

1.  在 5 秒后一个接一个地显示几个标签，

2.  完成上述操作后，我必须在画布上移动一个形状大约十次，每次移动之间的时间间隔为 5 秒，

3.  执行上述操作，但时间间隔仅为 2 秒。

这是代码：

```
 DispatcherTimer timer2 = new DispatcherTimer();
    float timerTime = 10;
    Label timerlabel = new Label();

    private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        lbl.Content = "test";
        startDisplay("hello!!");
        startDisplay("bye");
        Shapemove(1);
    }

    private void startDisplay(string st)
    {
        DispatcherTimer timer = new DispatcherTimer();
        timer.Interval = TimeSpan.FromSeconds(5);
        timer.Start();
        timer.Tick += (s, e) =>
        {
            lbl.Content = st;
        };
    }

    private void Shapemove(int i)
    {

        timer2.Interval = new TimeSpan(0, 0, 2);
        timer2.Tick += new EventHandler(timer2_Tick);
        timer2.Start();

    }

    void timer2_Tick(object sender, EventArgs e)
    {
        Random rand = new Random();

        if (timerTime > 0)
        {
            canvas1.Children.Remove(timerlabel);
            timerTime--;

            canvas1.Children.Add(timerlabel);
            timerlabel.FontSize = 20;
            timerlabel.Content = timerTime + "s";
            Canvas.SetLeft(rectangle1, rand.Next(640));
            Canvas.SetTop(rectangle1, rand.Next(480));
        }
        else
        {
            timer2.Stop();
        }
    } 
```

但上面的问题是：

1.  定时器和定时器 2 同时启动。

2.  标签没有一个接一个地显示 - test 出现了，5 秒后 bye 出现了，hello 从来没有出现过！！

3.  有没有办法像上面提到的 Shapemove 或 startDisplay 函数一样重置计时器并将它们作为函数重复调用？

请帮我解决上述问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:50:12.200

不要使用计时器。请改用 StoryBoard。

在情节提要中，您可以安排操纵控件的可见性、不透明度、位置...任何（依赖）属性的动画。

[请参阅本教程中的动画](http://www.dotnetfunda.com/articles/article1028-wpf-tutorial-styles-triggers-and-animations-7.aspx)

# excel - 如何概括我的 excel 宏以从 Personal.xlsb 工作

> ID：10714729
> 
> 赞同：0
> 
> 时间：2012-05-23T06:40:29.590
> 
> 标签：excel, vba

我对vba比较陌生。这是一个用于打开访问和关闭工作簿的测试宏。我在 Win 7 和 Win XP 上使用 Excel 2007

这工作正常，但我只能将结果放在包含宏的 WorkSheet 中。为了尝试使其可重用，我使用了注释代码行并将宏放在 Personal.xlsb 文件中。我收到下标超出范围错误。我将不胜感激任何帮助？

```
Sub copyCount()
    Dim wb As Workbook
    Dim fname As String

    Application.ScreenUpdating = False
    fname = ActiveSheet.Name
    Set wb = Workbooks.Open("C:\Users\Deepak\Documents\OFFICE\FixedValues.xlsx", True, True)
     'With ActiveWorkbook.Worksheets("sheet1")
    With ThisWorkbook.Worksheets(fname)
        .Range("A1").Value = wb.Worksheets("common").Range("A1").Value
    End With
    wb.Close False
    Set wb = Nothing
    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:01:21.617

编辑

再次重读您的问题，我起初误解了。请在您的个人工作簿中尝试此代码。您注释代码中的 ActiveWorkbook 成为您打开的文件，这就是它不起作用的原因。您需要将两个工作簿都设置为变量。

```
Sub copyCount()
Dim wb1 As Workbook, wb2 As Workbook
Dim fname As String

Application.ScreenUpdating = False
Set wb1 = ActiveWorkbook
fname = wb1.Name
Set wb2 = Workbooks.Open("C:\Users\Deepak\Documents\OFFICE\FixedValues.xlsx", True, True)
With wb1.Worksheets("Sheet1")
'With ThisWorkbook.Worksheets(fname)
    .Range("A1") = wb2.Worksheets("common").Range("A1")
End With
wb2.Close False
Set wb2 = Nothing
Application.ScreenUpdating = True

End Sub 
```

不相关但有趣的信息：您实际上不需要在范围末尾添加 .Value ，因为这是使用的默认属性。我在上面删除了它。

# php - 如何通过 API 在贝宝中获取个人资料 ID

> ID：10714730
> 
> 赞同：0
> 
> 时间：2012-05-23T06:40:49.923
> 
> 标签：php, paypal, paypal-subscriptions

我正在我的应用程序中进行一些贝宝集成，并在取消 RecurringPayments 时遇到了问题。要取消定期付款，我需要个人资料 ID，我不知道从哪里获得个人资料 ID，有人可以在这里指导我。

您的帮助将不胜感激和奖励！

谢谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:24:02.313

使用 PayPal API 的“GetTransactionDetails”方法获取与特定交易相关的详细信息。

您必须将 TransactionID 作为参数与您的请求一起传递。它会回复与该交易相关的所有详细信息（包括 SubscriptionID/ProfileID）。

按照这个链接：[https ://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_GetTransactionDetails](https://cms.paypal.com/us/cgi-bin/?cmd=_render-content&content_ID=developer/e_howto_api_nvp_r_GetTransactionDetails)

希望它可以帮助你。

谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T05:17:45.573

您也可以在不进行 API 调用的情况下找到 Profile-ID。您可以在您的 PayPal 帐户中找到它。

登录到您的 PayPal 帐户。转到“我的帐户”选项卡 -> 概览 您将在“我的最近活动”部分找到交易列表。

识别定期付款（可以从其类型中识别定期付款）单击任何定期交易的“详细信息”。您将被定向到不同的页面（交易详情）。查看此页面的 URL。您可以从那里获取 Profile-ID。或者当您在“交易详情”页面时点击“查看详情”您可以在那里找到 Profile-ID

谢谢你。

问候， 阿尼什

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-14T11:52:14.207

我将在这里讨论用于 Express Checkout 的 Paypal API，而不是直接付款。

当您向客户收取订阅费用时，您需要使用 Paypal API 进行 2 项操作。

1.  首先使用SetExpressCheckout，获取paypal发送的token。
2.  然后使用 CreateRecurringPaymentsProfile 并从用户那里获得开始订阅的授权。除了此请求，您还将发送您获得的令牌、配置文件开始日期、计费周期和频率。一旦用户确认，他就会被发送回网站，并带有来自贝宝的响应数组。

我相信您已经按照上述步骤进行操作。

在该响应中，您将看到用户的个人资料 ID。您必须将其保存在某个位置，例如与相关用户对应的数据库表。

最后，取消订阅时，您必须传递配置文件 ID 并调用 ManageRecurringPaymentsProfileStatus。

按照这个不错的教程：[http ://thereforei.am/2012/07/03/cancelling-subscriptions-created-with-paypal-standard-via-the-express-checkout-api/](http://thereforei.am/2012/07/03/cancelling-subscriptions-created-with-paypal-standard-via-the-express-checkout-api/)

# xcode - 无法在 iPad 设备上安装钛应用程序

> ID：10714731
> 
> 赞同：1
> 
> 时间：2012-05-23T06:40:50.097
> 
> 标签：xcode, ipad, ios5, titanium

我开发了一个 iPad 应用程序，它在模拟器中运行良好，但是当我尝试在设备上安装它时，它被安装到 iTunes 但同步到 iPad 失败，提示“无法安装应用程序”。以下是 Titanium 环境详细信息：

**应用类型**：手机

**钛 SDK** : 1.8.3 (04/18/12 10:48 6c2fca1)

**平台和版本**：iOS 5.0

**设备**：物理 iPad 设备（使用 iOS 5.1 (9B176)）

**主机操作系统**：OSX 10.6.8

**钛工作室**：2.0.1

我仍然无法调试此问题，因为没有显示日志/错误，只是没有安装。非常感谢任何帮助。

==========================[更新]

当我尝试通过 XCode 安装它时，这就是我在管理器控制台中得到的`Segmentation fault: 11`

```
May 24 03:44:43 unknown kernel[0] <Debug>: lockbot[2021] Builtin profile: gputoolsd (sandbox)
May 24 03:44:44 unknown ReportCrash[2027] <Notice>: Formulating crash report for process installd[2025]
May 24 03:44:44 unknown mobile_installation_proxy[2026] <Error>: handle_install: Installation failed
May 24 03:44:44 unknown com.apple.launchd[1] <Warning>: (com.apple.mobile.installd) Job appears to have crashed: Segmentation fault: 11
May 24 03:44:44 unknown ReportCrash[2027] <Error>: Saved crashreport to /var/mobile/Library/Logs/CrashReporter/xxxx using uid: 0 gid: 0, synthetic_euid: 501 egid: 0 
```

# asp.net - 使用 Visual Studio 连接到远程 Web 服务器和 SQL 数据库

> ID：10714743
> 
> 赞同：1
> 
> 时间：2012-05-23T06:41:40.270
> 
> 标签：asp.net, sql-server, hosting

我需要使用 3rd 方网络托管服务设置 asp.net 和 SQL 服务器数据库托管。为了简化部署过程，我希望能够以与 VS 允许编辑本地计算机或域网站完全相同的方式在 Visual Studio 环境中开发网站。我还希望能够直接连接到第 3 方 SQL 数据库——可能使用 SQL 服务器链接服务器或 asp.net 连接对象。

是否有可能做到这一点？3rd 方主机需要提供哪些服务才能允许与 Visual Studio 和 SQL Server 集成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:47:58.503

为了与另一台有 sql server 的机器连接，服务器必须打开两个帖子，1433 和 1434。

使用此端口，您可以远程连接。

但这也让它们对所有其他人开放，也许攻击开始了，所以你在这里有两个选择，ether 更改默认端口，ether 使用一个 SSH 隧道连接。通过隧道连接，服务器运行隧道服务器，您使用隧道客户端进行连接，然后将此端口映射到客户端和服务器上的隧道，然后通过安全连接连接到服务器并且不打开 sql 端口. 我希望这一切都有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T14:50:39.627

默认情况下，一家好的 Windows 托管公司会为您提供使用 Web Deploy 方法和 Web Matrix 的发布。他们的 Web 服务器旨在处理与 Visual Studio 和 SQL 数据库服务器的直接连接。

我正在使用[AccuWebHosting](http://www.accuwebhosting.com/)服务，他们使用[**Web Deploy**](https://manage.accuwebhosting.com/knowledgebase/798/How-to-deploy-Visual-Studio-2010-Web-Application-Project-using-Web-Deploy-method.html)和[**Web Matrix**](https://manage.accuwebhosting.com/knowledgebase/816/How-to-deploy-WebMatrix-Beta-Web-Application-Project-using-Web-Deploy.html)提供无缝连接。

# c# - 如何通过 MVC 操作方法显示/隐藏 HTML 按钮

> ID：10714754
> 
> 赞同：0
> 
> 时间：2012-05-23T06:43:05.783
> 
> 标签：c#, javascript, jquery, asp.net-mvc

在我的网页中，我需要根据调用的参数值填充按钮`ButtonType`。
假设如果`ButtonType == "Edit"`那么我需要隐藏每个按钮，但是`butUpdate`.

我想知道如何通过 MVC Action 方法显示/隐藏 html 按钮。

```
[AcceptVerbs(HttpVerbs.Post)]
    public ActionResult SupplierDetail(int SupplierID, string ButtonType)
    {   
        var Supplier = supplierListRepository.Supplier_SelectByID(SupplierID);
        return View(Supplier);
    } 
```

我正在使用 Asp.net Mvc Razor 表单。

```
@using (Html.BeginForm("SupplierDetail_SubmitClick", "Supplier", FormMethod.Post, new { id = "frmSupplierDetail" }))
{   
@Html.ValidationSummary(true)
<table cellpadding="0" cellspacing="0" border="0" style="width:450px; height:auto">
.....
<tr>
    <td>@Html.LabelFor(model => model.Phone)</td>
    <td>@Html.EditorFor(model => model.Phone)
        @Html.ValidationMessageFor(model => model.Phone)</td>
</tr>
<tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
</tr>
<tr>
    <td>&nbsp;</td>
    <td>
        <input type="submit" id="butSave" name="butSave" value="Save" style="width:100px; height:auto" />
        <input type="submit" id="butUpdate" name="butUpdate" value="Update" style="width:100px; height:auto" />
        <input type="submit" id="butDelete" name="butDelete" value="Delete" style="width:100px; height:auto" />
        <input type="submit" id="butReset" name="butReset" value="Reset" style="width:100px; height:auto" />
    </td>
</tr>
</table>
</div>

<div id="content">
@Html.ActionLink("Back to List", "Index")
</div>

} 
```

每个建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:51:20.117

显示/隐藏按钮不是控制器操作的责任。控制器动作不/不应该知道按钮的含义。这是存在于视图中的概念。另一方面，控制器操作应该与模型通信并准备一个视图模型，然后将其传递给视图以进行显示。因此，您可以定义一个视图模型，该模型将包含定义按钮可见性的属性，并根据 ButtonType 参数的值相应地设置这些属性。然后控制器动作将把这个视图模型传递给视图，而不是`supplier`你当前传递的对象。显然，视图模型也将具有持有该供应商的属性。现在剩下的所有视图都是基于视图模型属性的值来决定如何显示按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:52:01.727

在您的控制器中将按钮类型添加到 viewdata：

```
ViewData["ButtonType"] = ButtonType 
```

然后，在视图本身中，您可以添加 if/else 语句或任何其他适合您所有情况的逻辑，以决定要呈现的内容：

```
@if (ViewData["ButtonType"].ToString() == "Edit")
{
    <input type="submit" id="butUpdate" name="butUpdate" value="Update"    
     style="width:100px; height:auto" />      
} 
```

当然，这只是一个演示，Yuo 应该使代码适应您的业务逻辑

# jquery - 页面加载后的文字效果展示

> ID：10714756
> 
> 赞同：0
> 
> 时间：2012-05-23T06:43:24.490
> 
> 标签：jquery, html, css

我需要文字发光效果。我找到了这个位置。

[http://jsfiddle.net/karim79/G3J6V/1/](http://jsfiddle.net/karim79/G3J6V/1/)

但是客户端希望文本效果不是悬停，而是在页面加载后发生变化。

我不知道jquery，javascript。我花了更多时间来修复它。但我失败了。任何人都可以帮助我。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:46:57.970

在页面加载时，您可以像这样使用 document.ready：

```
$(document).ready(function() {

    setInterval(function() {

        $(".confirm_selection").animate({
        color: "red"
        }, 2000, function() {

     $(".confirm_selection").animate({
        color: "black"
     }, 2000);        

  });

    },4010);

});​ 
```

现在它在页面加载时开始发红光。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:48:08.860

试试这样的[http://jsfiddle.net/G3J6V/113/](http://jsfiddle.net/G3J6V/113/)。

```
$(document).ready(function() {
    setInterval(function() {
        $(".confirm_selection").animate({color: "red"}, 2000).animate({color: "black"}, 2000);
    }, 400);
});​ 
```

它使用 jquery $(document).ready() 所以基本上一旦一切都加载了它会显示动画。然后我使用 setInterval() 函数来重复动画。

或者我建议使用类似 jQuery 的东西`(window)load.()`。

```
(window).load(function(){
    setInterval(function() {
        $(".confirm_selection").animate({color: "red"}, 2000).animate({color: "black"}, 2000);
    }, 400);
}); 
```

基本上，当加载所有图像和所有内容时，它会执行此功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:49:39.623

```
$(document).ready(function() {
$('.confirm_selection').animate({
    color: "red"
}, 2000) ;

$('.confirm_selection').animate({
    color: "black"
}, 2000);

}); 
```

利用`$(document).ready()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T06:50:44.737

尝试这个：

```
$(document).ready(function() {
    $(".confirm_selection").animate({
        color: "red"
    }, 2000, '', function() {
    $(".confirm_selection").animate({
        color: "black"
    }, 2000); });
});​ 
```

在`$(document).ready()`加载 DOM 时生成脚本。

# sql - 从 2000 多个数据库中选择数据？

> ID：10714759
> 
> 赞同：1
> 
> 时间：2012-05-23T06:43:49.230
> 
> 标签：sql, sql-server

我如何在 sql server 的 2000 多个数据库中搜索/选择一个字段。我有一个主数据库，包含一个名为“Kewword”的表，我在关键字表中的“kewwordtitle”字段下存储关键世界，当新用户注册时，为用户创建一个新数据库并且用户使用关键字，现在的情况是，如何我可以发现有多少用户使用一个键工作，这里的关键字标题是主键，...谢谢/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:34:37.713

您的问题有点模糊，但如果这是一次性的，并且如果您的所有数据库都在同一个实例上，您可以执行以下操作：

```
declare @t table(col int)

insert @t 
    exec sp_MSforeachdb 'use ?; select 1 from keyword where keywordtitle = ''<yourkeyword>'''

select count(*) from @t 
```

# list - Struts2中如何知道List是否为空？

> ID：10714765
> 
> 赞同：4
> 
> 时间：2012-05-23T06:44:22.983
> 
> 标签：list, struts2

我有一份清单。这是从java类获取到jsp页面。我想在 jsp 页面中显示此列表，但是，如果列表为空，则显示一条错误消息，否则显示列表的项目。

```
<s:iterator value="productList">
    <tr style="background-color: #99CCFF">      
        <td><s:property value="pid"/></td>
        <td><s:property value="productname"/></td>
        <td><s:property value="producttype"/></td>
        <td><s:property value="productprice"/></td>
        <td><s:property value="shopname"/></td>
        <td><s:property value="productcity"/></td>
        <td><s:property alue="ownername"/></td>                 
    </tr>
</s:iterator> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T06:57:26.750

您可以使用 Struts2`<s:if>`和`<s:else>`标签进行条件检查，如下所示：

```
<s:if test="%{getProductList().isEmpty()}">
   Error
</s:if>
<s:else>
     <s:iterator value="productList">
        <tr style="background-color: #99CCFF">      
            <td><s:property value="pid"/></td>
            <td><s:property value="productname"/></td>
            <td><s:property value="producttype"/></td>
            <td><s:property value="productprice"/></td>
            <td><s:property value="shopname"/></td>
            <td><s:property value="productcity"/></td>
            <td><s:property alue="ownername"/></td>                 
        </tr>
    </s:iterator> 
</s:else> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:04:20.677

```
<s:if test="%{productList.isEmpty()}">
    <tr>
        <td colspan="7">Empty</td>
    </tr>
</s:if>
<s:else>
    <s:iterator value="productList">
        <tr style="background-color: #99CCFF">      
            <td><s:property value="pid"/></td>
            <td><s:property value="productname"/></td>
            <td><s:property value="producttype"/></td>
            <td><s:property value="productprice"/></td>
            <td><s:property value="shopname"/></td>
            <td><s:property value="productcity"/></td>
            <td><s:property alue="ownername"/></td>                 
        </tr>
    </s:iterator>
</s:else> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-05T05:15:41.403

Apaet 从使用中`productList.isEmpty()`您还可以检查`productList` Like的大小

```
<s:if test="%{productList.size>0}">
 <table>
         <s:iterator value="productList">
            <tr style="background-color: #99CCFF">      
              <td><s:property value="pid"/></td>
              <td><s:property value="productname"/></td>
              <td><s:property value="producttype"/></td>
              <td><s:property value="productprice"/></td>
              <td><s:property value="shopname"/></td>
              <td><s:property value="productcity"/></td>
              <td><s:property alue="ownername"/></td>                 
          </tr>
      </s:iterator>
 </table>
 </s:if>
<s:else>
   <div> No data found</div>
</s:else> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-14T13:37:25.307

您也可以使用更短的语法

```
<s:if test="productList.empty">
    <tr>
        <td colspan="7">Empty</td>
    </tr>
</s:if>
<s:else>
    <s:iterator value="productList">
        <tr style="background-color: #99CCFF">      
            <td><s:property value="pid"/></td>
            <td><s:property value="productname"/></td>
            <td><s:property value="producttype"/></td>
            <td><s:property value="productprice"/></td>
            <td><s:property value="shopname"/></td>
            <td><s:property value="productcity"/></td>
            <td><s:property alue="ownername"/></td>                 
        </tr>
    </s:iterator>
</s:else> 
```

# javascript - 使用javascript和jquery在div中填充内容（html）以修复高度和宽度

> ID：10714766
> 
> 赞同：3
> 
> 时间：2012-05-23T06:44:23.647
> 
> 标签：javascript, jquery

我正在使用 ajax 以 json 形式获取长文本我想在修复高度 div 中填充这些内容

假设我的 div 高度为 500 像素，宽度为 300 像素。字体大小为 16px

我想要任何可以根据 div 的高度和宽度填充数据并可以返回剩余文本的 javascript 递归方法。

如果有人可以做到这一点，请为我提供解决方案。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:41:44.280

首先，将文本包装在 a`<span>`中，将其放入您的`<div>`. 我假设这`div`是您的固定大小元素：

```
// Be careful about text nodes, or use firstElementChild instead
var span = div.firstChild, text = span.innerText, rest = "";
if (span.offsetHeight > 500) {
    var totalLength = 0, markLength, i = 0,
        rects = span.getClientRects();
    for (; i < rects.length; i++) {
        totalLength += rects[i].right - rects[i].left;
        if (rects[i].bottom - rects[0].top <= 500)
            markLength = totalLength;
    }
    var mark = Math.floor(text.length * markLength / totalLength);
    span.textContent = text.substring(0, mark);
    rest = text.substring(mark);
} 
```

The variable `rest` contains the remaining part. Beware that this method uses some approximations, and sometimes may not fill the container to the brim. In some unlucky cases, it may even overflow the container, so you have to run it again until you get the correct size.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:10:15.287

为什么不把所有的都放在 div 和你设置的 div 中溢出 =“隐藏”

创建一个临时 div，修复它的宽度并附加文本，直到它超过你的高度然后停止，然后将所有内容复制到主 div

```
var s = 'Your long long long long long long long long long long content';
var i = 0;
var tmpdiv = $('<div style="width:50px; height:auto; position:absolute; left:-99999px"/>').appendTo(document.body);
while (i < s.length-1 && tmpdiv.height() < 50){
  tmpdiv.append(s[i]);
  i++;
}

$('#fixdiv').html(tmpdiv.html()); 
```

# c# - 使用 InstallShield 安装程序在卸载时从注册表中删除值

> ID：10714768
> 
> 赞同：1
> 
> 时间：2012-05-23T06:44:50.233
> 
> 标签：c#, asp.net, windows, installshield

是否可以在使用 InstallShield 安装程序卸载时从注册表中删除字符串键值。尽管我搜索了很多，但我无法找到答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:26:14.447

可能有点晚了，但我想你会想要在注册表表中添加一行（你可以在 InstallShield的*直接编辑器视图下找到它）。*这将允许您指定将在*RemoveRegistryValues*操作期间删除的注册表。

有关此表的更多信息，您可以查看此处：

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa371168(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa371168(v=vs.85).aspx)

或者，您可以编写一个自定义操作以在卸载时运行并使用 InstallScript 将其删除。你可以在这里找到一个例子：

[http://helpnet.flexerasoftware.com/installshield18helplib/mergedProjects/installshield18langref/LangrefRegDBDeleteKey_example.htm](http://helpnet.flexerasoftware.com/installshield18helplib/mergedProjects/installshield18langref/LangrefRegDBDeleteKey_example.htm)

希望这可以帮助！

安迪

# facebook - 如何使用 php sdk 在朋友的墙上发帖？

> ID：10714770
> 
> 赞同：1
> 
> 时间：2012-05-23T06:44:58.893
> 
> 标签：facebook, facebook-php-sdk

我正在尝试使用此代码发布到我朋友的提要，但它不起作用。我被卡住了，有什么帮助吗？？

```
 $app_url ="http://localhost.local/PMS/facebook/PostWithPHP.php";

 $facebook = new Facebook(array(
'appId'  => 'APPID',
'secret' => 'APPSECRET',
'cookie' => true,
));

  // Get User ID
$user = $facebook->getUser();

if ($user) {

$user_friends = $facebook->api('/me/friends');
sort($user_friends['data']);

try {
// Proceed knowing you have a logged in user who's authenticated.
$access_token = $facebook->getAccessToken();
$vars = array(
     'message' => 'My Message',
     'name' => 'title',
     'caption' => 'Caption',
     'link' => 'Link',
     'description' => 'Description',
     'picture' => 'image'
);

foreach($user_friends['data'] as $f){
        $sendTo = $f['id'];
        $sendToName = $f['name'];

        $result = $facebook->api("/".$sendTo ."/feed", 'post', $vars);
    }
    } catch (FacebookApiException $e) {
    error_log($e);
    $user = null;
   }
  }

 // Login or logout url will be needed depending on current user state.
if ($user) {
  $logoutUrl = $facebook->getLogoutUrl();
} else {
  $loginUrl = $facebook->getLoginUrl(array('redirect_uri'=> $app_url));
  echo "<script type='text/javascript'>";
  echo     "top.location.href = '{$loginUrl}';";
  echo "</script>";
} 
```

另一个问题是使用此代码，但替换 $facebook->api("/".$sendTo ."/feed", 'post', $vars); 通过 $facebook->api("/me/feed", 'post', $vars); 当然，不用循环朋友，在我的时间线上发帖。我怎样才能把它贴在我的墙上？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:52:37.580

我想对于时间轴的帖子，您将需要来自用户的 accessToken 来发布内容。在您的情况下，您只有注册用户的 accessToken，而不是他的朋友。我认为这是 FB 的限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T10:56:16.487

您可以在此处按照教程进行操作： [https ://www.webniraj.com/2012/11/22/facebook-api-posting-a-status-update/](https://www.webniraj.com/2012/11/22/facebook-api-posting-a-status-update/)

但是，不是对: 进行 API 调用`/me/feed`，而是替换`me`为朋友的用户 ID，所以它看起来像`/12345/feed`

请注意，Facebook 现已禁止通过 API 向好友墙发帖。相反，您应该在操作中标记用户或使用请求 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:28:58.783

您的代码有一些问题。首先，确保帖子的`link`和`picture`参数是有效的 URL。否则 Facebook 会给您一条错误消息 ( `(#100) link URL is not properly formatted`)。此外，`link`必须转到您的应用程序的 Canvas 或站点 URL。

这应该可以解决发布到朋友墙上的问题。

但是，我可以提醒您，您的应用程序违反了 Facebook 平台政策。Facebook 不允许在流中发布多个帖子（无论是您的还是朋友的），除非得到用户的明确许可。它还可以阻止普通朋友看到来自多个朋友的相同消息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T06:58:24.027

第一次检查您是否获取用户 ID（放置回显并检查），如果不尝试此操作...我认为这会对您有所帮助，兄弟

```
 $token_url = "https://graph.facebook.com/oauth/access_token?" ."client_id=" . $app_id ."&client_secret=" . $app_secret .
   "&grant_type=client_credentials";

 $access_token = file_get_contents($token_url);

  $signed_request = $_REQUEST["signed_request"]; 
  list($encoded_sig, $payload) = explode('.', $signed_request, 2);
  $data = json_decode(base64_decode(strtr($payload, '-_', '+/')), true);
  $user_id = $data["user_id"]; 
```

# c - 与 getchar() putchar() 相关的 C 编程（初学者帮助）

> ID：10714772
> 
> 赞同：0
> 
> 时间：2012-05-23T06:45:04.413
> 
> 标签：c, while-loop, getchar, putchar

我是 C 编程的新手，想弄清楚，这似乎是一个愚蠢的疑问......

代码：

```
#define EOF 0
main()
{ 
    int c;

    c=getchar();
    while (c!= EOF) 
    {
        putchar (c); 
        c= getchar();
    }
} 
```

这应该只返回我输入的值......但相应地......当我输入 0 时它应该终止吗？如果不是......“while”下的语句究竟意味着什么？任何帮助将不胜感激伙计们:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:47:13.053

`EOF`意味着当你点击时，例如，`ctrl + d`在 linux 中，它发送`EOF`信号，它不一定是`0`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:52:10.810

该`getchar`函数返回输入的 ASCII 值（48 表示零或），或在头文件中`'0'`调用的值（通常为 -1）。`EOF``<stdio.h>`

因此，如果您想在 EOF（正确的 EOF，而不是您定义的那个）上停止，或者如果用户写入零，那么这会更好：

```
#include <stdio.h>

int main()
{
    int c = getchar();

    while (c != EOF && c != '0')
    {
        putchar(c);
        c = getchar();
    }

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T06:52:18.577

`EOF`肯定不是`0`（也不是`'0'`，char 文字等于 48）。根本不是`char`。`stdio.h`（你应该`#include`-ing！）将其定义为`-1`. 它表明您正在阅读的任何文件中都没有更多数据。它不是流中的一个字节，而是 io 库指示它已完成的方式。

`getchar`需要返回 an的全部原因`int`是文件结束指示符不可能是文件中的有效字节。

其他函数表明到达 EOF 的方式不同：`fgets()`返回`NULL`。`read()`返回读取的字节数返回0，表示它什么也读不到。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T06:52:19.997

When you enter a `0`, it's not actually a zero, just the [ASCII character](http://www.asciitable.com/) `0`. It has a numerical value of 48, which can be verified by `printf("%d\n", '0');`, which prints 48\. An `EOF` is an *actual* zero, that is, it's representation is essentially zero.

# asp.net - 如何将 ajax modelpop up 扩展器的目标控件 id 设置为运行时按钮创建的 id？

> ID：10714776
> 
> 赞同：0
> 
> 时间：2012-05-23T06:45:23.403
> 
> 标签：asp.net, ajaxcontroltoolkit

我在运行时创建一个按钮，点击它我想打开一个 ajax 模型弹出窗口。但我无法将模型弹出窗口的目标控件 ID 设置为此运行时创建的按钮 ID。有人可以建议我如何实现这一目标吗？或任何替代方式存在？

我的代码如下。这就是我创建运行时按钮的方式。

```
 protected void grdSurveyMaster_ItemCreated(object sender, GridItemEventArgs e)
    {

        if (e.Item is GridFooterItem)
        {
            GridFooterItem footerItem = (GridFooterItem)e.Item;
            // RadScriptManager1.RegisterAsyncPostBackControl(btn);
            Button btn = new Button();
            btn.Text = "Take a new survey";
            btn.CommandName = "newAssess";
            btn.Click += new System.EventHandler(grdMasterbtnClick);
            footerItem.Cells[2].Controls.Add(btn);
            //ModalPopupExtender1.TargetControlID = "btn";// Convert.ToString(Page.FindControl(Convert.ToString(btn.ClientID)));

        }
    } 
```

以下是我的 HTML

```
<asp:UpdatePanel ID="updatepanel1" runat="server">
        <ContentTemplate>
            <cc1:ModalPopupExtender CancelControlID="btnCancel" PopupControlID="modelPopUp" ID="ModalPopupExtender1"
                runat="server" TargetControlID="btnDefault">
            </cc1:ModalPopupExtender>
            <asp:Button ID="btnDefault" runat="server" Visible="false" />
            <asp:Panel ID="modelPopUp" runat="server" Visible="false" BackColor="AliceBlue">
                <p>
                    These items will be permanently deleted and cannot be recovered. Are you sure?
                </p>
                <asp:Button ID="btnOk" Text="OK" runat="server" />
                <asp:Button ID="btnCancel" Text="Cancel" runat="server" />
            </asp:Panel>
        </ContentTemplate>
    </asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:30:58.013

好吧，您将 Popup 的 TargetControl 设置为一个不可见的未使用按钮是正确的。现在显示/隐藏弹出窗口的最佳方法是使用 Javascript。为此，您必须设置 ModalPopupExtender 的 behaviorid="someString" 并创建一个像这样的 javascript 函数：

```
function ShowModalPopup(behaviourId) {
$find(behaviourId).show();
} 
```

然后您可以将 javascript 函数分配给一个按钮：

```
btn.OnClientClick = String.Format("ShowModalPopup('{0}')", 
    ModalPopupExtender1.behaviorid); 
```

# jquery - 如何让 Qtip2 Growl 从底部开始

> ID：10714778
> 
> 赞同：0
> 
> 时间：2012-05-23T06:45:26.797
> 
> 标签：jquery, qtip2

我在过去的几乎 2 个项目中都使用了 Qtip2，我想使用这个 qtip2 技巧，它被称为 Growl [http://craigsworks.com/projects/qtip2/demos/#growl](http://craigsworks.com/projects/qtip2/demos/#growl)

现在，我真的希望咆哮从底部开始，而不是从上面开始。

我继续颠倒代码而不是运气......

我怎样才能让这个从底部开始？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T04:56:24.557

您需要反转几个从上到下，从下到上并将调整值从 y:5 反转到 y:-5 ，这些更改应该有效：

```
my: 'bottom right', 
```

和

```
at: (target.length ? 'top' : 'bottom') + ' right', 
```

和

```
adjust: { y: -5 }, 
```

和

```
api.set('position.at', 'bottom right'); 
```

# internet-explorer - SVG 的 node.getScreenCTM() 方法在 IE 9 中失败

> ID：10714779
> 
> 赞同：4
> 
> 时间：2012-05-23T06:45:38.717
> 
> 标签：internet-explorer, exception, svg

我在观察鼠标事件的 SVG 中有一些 javascript，需要将鼠标坐标转换为 SVG 空间中的实际坐标（使用 viewBox 和其他转换）。

此代码适用于 WebKit/Gecko 浏览器：

```
function transformEventCoordsToNodeCoords(evt,node)
{
  var point = document.documentElement.createSVGPoint();
  point.x = evt.clientX;
  point.y = evt.clientY;

  var ctm = node.getScreenCTM();
  return point.matrixTransform(ctm.inverse());
} 
```

在 IE 9 getScreenCTM() 中抛出异常：

```
Unexpected call to method or property access. 
```

我在网上找到了示例代码，表明我的代码是正确的，我什至发现了一个 SVG，它似乎使用了完全相同的技术，并且可以在 IE 9 中使用：

*   [http://www.codedread.com/blog/archives/2005/12/21/how-to-enable-dragging-in-svg/](http://www.codedread.com/blog/archives/2005/12/21/how-to-enable-dragging-in-svg/)
*   [http://www.codedread.com/dragtest.svg](http://www.codedread.com/dragtest.svg)

有谁知道为什么我的代码失败了？

注意：`node`变量是 a `<rect>`：

```
<rect id=​"tooltip_box" x=​"698.7705078125" y=​"278.19676208496094" rx=​"20" ry=​"20" width=​"310" height=​"165" class=​"tooltip_box_region_level_1">​&lt;/rect>​ 
```

PS：很难将此 SVG 上传到可公开访问的服务器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T04:56:33.200

我发现了问题。

在 IE 9 中，您不能调用`getScreenCTM()`父节点为`display: none;`.

如果被查询的节点是，`display: none;`那么`getScreenCTM()`调用就可以了，但是不能在隐藏元素的子节点上调用。

我的解决方法是在调用之前从 切换`display: none;`到，然后立即将其更改回.`opacity: 0;``getScreenCTM()``display: none;`

# java - 在 netbeans 中为 .dll/.so 文件提供“java.library.path”

> ID：10714785
> 
> 赞同：11
> 
> 时间：2012-05-23T06:45:59.033
> 
> 标签：java, netbeans, library-path

我如何在netbeans中给出`.dll`或`.so`文件的路径以使用加载库

```
System.loadLibrary("Foo") 
```

我在 netbeans 页面上阅读[了此内容，但无法帮助我。](http://bits.netbeans.org/dev/javadoc/org-openide-modules/org/openide/modules/doc-files/api.html#jni)因为它给出了不满意的链接错误。

这是我尝试过的两件事：

在下面的快照中，我在`lib`netbeans 项目中创建了一个文件夹并将`dll`文件放入其中。

![在此处输入图像描述](../Images/36f5953f7c8322f54d55aa0a84c01206.png)

在第二个快照中，我在`lib`文件夹中创建了一个文件`modules`夹，并将所有`dll`文件放在`lib`文件夹中，如[链接](http://bits.netbeans.org/dev/javadoc/org-openide-modules/org/openide/modules/doc-files/api.html#jni)中所述。

![在此处输入图像描述](../Images/8bf18ddc41d55d09efd2cfbca6a189e1.png)

但他们俩都给我`unsatisfied link error`例外。如何`java.library.path`在 netbeans 中进行设置，以便我可以直接从 netbeans 测试应用程序，而不必去终端上写？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-10T08:49:15.507

它现在工作。一些与 Netbean IDE 相关的设置。仅限 Netbean IDE。

**按照步骤 ：-**

```
==>Right click on the Project
==>Properties
==>Click on RUN
==>VM Options : -Djava.library.path="C:\Your Directory where Dll is present"
==>Ok 
```

它的工作100％。我已经在我自己的项目中做到了这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-31T03:04:25.543

我正在使用 Mac OS X Yosemite 和 Netbeans 8.02，我遇到了同样的错误，我找到的简单解决方案就像上面一样，当您需要在项目中包含本机库时，这很有用。对 Netbeans 执行以下操作：

```
1.- Right click on the Project
2.- Properties
3.- Click on RUN
4.- VM Options: java -Djava.library.path="your_path"
5.- for example in my case: java -Djava.library.path=</Users/Lexynux/NetBeansProjects/NAO/libs>
6.- Ok 
```

我希望它对某人有用。我找到解决方案的链接在这里： [java.library.path – 它是什么以及如何使用](http://examples.javacodegeeks.com/java-basics/java-library-path-what-is-it-and-how-to-use/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-13T04:59:24.453

对我来说，JDeveloper 的建议没有奏效。但是，我今天下午遇到的方法很方便。它适用于 netbeans 8.02 和 Visual Studio 2013 生成的 dll。

1.  在 netbeans 项目的 [Source Packages] 节点下创建一个包（例如，“dll”）
2.  将 dll 文件（例如，simpleDLL.dll）放入/复制到包中（例如，“dll”）
3.  在 netbeans 项目的 [Libraries] 节点上，右键单击并选择“Add Jar/Folder...”，
4.  导航到包含您在上面步骤 1 中创建的包的文件夹（“dll”）的文件夹（“src”）（在我的示例中可能是“...\src\dll”），选择包文件夹（ "dll") 并单击 [Open] 按钮将其选中。

-- 现在您应该已经将一个文件夹（“dll”）（其中包含 dll 文件{simpleDLL.dll}）添加到项目的 Libraries 节点。

就是这样。它应该工作！祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-12-01T06:57:15.940

如果您正在使用“NetBeans 模块”

DLL 或 SO 可以放在模块项目源中的文件夹 release/modules/lib/ 中（查看“文件”选项卡）。这将使它们出现在模块 JAR 所在的 lib 子目录下的最终 NBM 或应用程序中。然后像往常一样使用 System.loadLibrary 。

# sql - Sql 连接和性能

> ID：10714786
> 
> 赞同：2
> 
> 时间：2012-05-23T06:46:01.760
> 
> 标签：sql

我有一个关于 JOINS 的问题。Sql JOIN 会降低查询的性能吗？我有很多 JOIN 查询。我可以说糟糕的表现来自这些 JOINS 吗？如果是，我应该怎么做而不是在查询中加入？

这是我的一部分查询

```
......
FROM (((((tb_Pinnummern INNER JOIN tb_Fahrzeug ON tb_Pinnummern.SG = tb_Fahrzeug.Motor_SG) INNER JOIN tb_bauteile ON tb_Pinnummern.Bauteil = tb_bauteile.ID) LEFT JOIN Fehlercodes_akt_Liste AS Fehlercodes_akt_Liste_FC_Plus ON Fehlercodes_akt_Liste_FC_Plus.ID=tb_bauteile.[FC_Plus]) LEFT JOIN Fehlercodes_akt_Liste AS Fehlercodes_akt_Liste_FC_Minus ON Fehlercodes_akt_Liste_FC_Minus.ID=tb_bauteile.[FC_Minus]) LEFT JOIN Fehlercodes_akt_Liste AS Fehlercodes_akt_Liste_FC_Unterbrechung ON Fehlercodes_akt_Liste_FC_Unterbrechung.ID=tb_bauteile.[FC_Unterbrechung]) LEFT JOIN Fehlercodes_akt_Liste AS Fehlercodes_akt_Liste_FC_Aderschl ON Fehlercodes_akt_Liste_FC_Aderschl.ID=tb_bauteile.[FC_Aderschl]
WHERE (((tb_Fahrzeug.ID)=[forms]![frm_fahrzeug]![id])); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:10:20.813

是的.. 增加表之间的记录和连接数会增加执行时间.. LEFT/RIGHT JOIN 绝对不会比 INNER JOIN 快。对表的右列进行索引将提高查询性能。

如果您的查询中有太多的连接并且它的执行频率很高，请采取替代方法，即创建 SQL VIEW 或 Materialized VIEW（Materialized VIEW - 如果您使用的是 Oracle）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:09:26.973

Well joins显然需要处理，这个处理会消耗cpu、内存和IO。

除此之外，我们还必须考虑，如果没有正确的索引等，连接的性能会非常非常糟糕。

但是，具有正确支持索引的 SQL 连接将比任何其他方法更快地产生您需要的结果。

只需考虑您需要做什么来计算与上述 SQL 相同的结果。读取第一个表，然后按正确顺序排序，然后读取第二个表并对其进行排序，然后合并两个结果集，然后再进行第三个表......或者从第一个表中读取所有行并*为每个行*发出 SQL 以检索匹配的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:27:21.880

连接肯定会降低您将要执行的 SQL 查询的性能。您应该为您编写的 SQL 生成 SQL 计划，并查看降低 SQL 成本的方法。任何查询分析工具都应该可以帮助您。

根据我在上面定义的查询中的理解，您正在尝试从内部连接中的表中获取所有行，并从左连接中的表中获取特定列（如果存在）。

在这种情况下，以以下给定格式编写的查询应该会有所帮助：

```
select (select Fehlercodes_akt_Liste_FC_Plus.column1 from Fehlercodes_akt_Liste AS Fehlercodes_akt_Liste_FC_Plus where Fehlercodes_akt_Liste_FC_Plus.ID=tb_bauteile.[FC_Plus]),
    (select Fehlercodes_akt_Liste_FC_Minus.column2 from Fehlercodes_akt_Liste AS Fehlercodes_akt_Liste_FC_Minus where Fehlercodes_akt_Liste_FC_Minus.ID=tb_bauteile.[FC_Minus]),
    (select Fehlercodes_akt_Liste_FC_Unterbrechung.column3 from Fehlercodes_akt_Liste AS Fehlercodes_akt_Liste_FC_Unterbrechung where Fehlercodes_akt_Liste_FC_Unterbrechung.ID=tb_bauteile.[FC_Unterbrechung]),
    (select Fehlercodes_akt_Liste_FC_Aderschl.column4 from Fehlercodes_akt_Liste AS Fehlercodes_akt_Liste_FC_Aderschl where Fehlercodes_akt_Liste_FC_Aderschl.ID=tb_bauteile.[FC_Aderschl]),
    <other columns>
FROM
(tb_Pinnummern INNER JOIN tb_Fahrzeug ON tb_Pinnummern.SG = tb_Fahrzeug.Motor_SG)
INNER JOIN tb_bauteile ON tb_Pinnummern.Bauteil = tb_bauteile.ID) as <aliastablename>

WHERE <aliastablename>.ID=[forms]![frm_fahrzeug]![id]; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-23T07:03:59.470

Sql Joins 根本不会降低性能：相反：假设底层数据库模型得到很好的实现，它们通常会成倍地加速查询。索引在这个问题上非常重要。

# firefox - 下载完成后自动关闭firefox

> ID：10714787
> 
> 赞同：5
> 
> 时间：2012-05-23T06:46:08.980
> 
> 标签：firefox, selenium, download, webdriver

我正在使用 selenium webdriver 使用 firefox 进行一些下载。目前，我的脚本在下载启动后等待特定时间，然后关闭 Firefox。我想知道是否有办法将firefox配置为在下载完成时自动关闭？或者使用 selenium webdriver，我可以检查下载是否已完成？我不想使用任何附加组件，因为它可能会在我的脚本中添加依赖项。我不能使用 wget/curl 等来下载文件。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:10:18.280

伊格纳西奥·孔特雷拉斯所说的。轮询下载路径可能是最好的（最强大的）解决方案。

替代#1：

使用`FirefoxProfile`带有[下载状态栏](https://addons.mozilla.org/cs/firefox/addon/download-statusbar/)的插件。它有一个方便的选项“在窗口关闭后在下载管理器中继续下载”（或类似的东西），这样它就会让 Firefox 在后台运行，直到下载完成。

备选方案 #2：

如果可以的话，直接使用[这个](https://github.com/Ardesco/Ebselen/blob/master/ebselen-core/src/main/java/com/lazerycode/ebselen/customhandlers/FileDownloader.java)（或任何其他类似的 WebDriver-friendly 工具）下载文件……或者[这个](https://stackoverflow.com/questions/921262/how-to-download-and-save-a-file-from-internet-using-java)。这将完全将 Firefox 排除在进程之外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T23:08:54.620

您可以使用 Selenium WebDriver API 的 WebDriverWait 类使用以下代码进行轮询：

```
 (new WebDriverWait(driver, 180, 10)).until(new ExpectedCondition<Boolean>() {
            public Boolean apply(WebDriver d) {
                return !downloadedFilePart.exists();
            }
         }); 
```

上面的代码检查具有 .part 扩展名的文件，程序每 10 秒下载一次，直到下载完成或 3 分钟后超时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T08:01:59.207

我不确定这是否可行，但您是否考虑过通过 Firefox 探索下载位置？轮询它，直到您看到下载已完成。

如果我没记错的话，当文件被下载时，应该有一个扩展名为 .part 的额外文件。

像这样的东西（伪代码）：

```
...

WebDriver poller = new FirefoxDriver()
poller.get("path to download folder");

while ("file with .part extension is present") {
    // Wait/sleep some time
    // Refresh poller
}

// close downloading firefox instance
firefox.quit();
// close the polling instance
poller.quit(); 
```

希望能帮助到你

# c# - 如何通过缓存键锁定？

> ID：10714790
> 
> 赞同：21
> 
> 时间：2012-05-23T06:46:25.600
> 
> 标签：c#, asp.net, caching, locking, thread-safety

我正在尝试实现一个通用的线程安全缓存方法，我想知道我应该如何在其中实现锁。

**它应该看起来像这样：**

```
//private static readonly lockObject = new Object();

public T GetCache<T>(string key, Func<T> valueFactory...)
{

  // try to pull from cache here

  lock (lockObject) // I don't want to use static object lock here because then every time a lock is performed, all cached objects in my site have to wait, regarding of the cache key.
  {
    // cache was empty before we got the lock, check again inside the lock

    // cache is still empty, so retreive the value here

    // store the value in the cache here
  }

  // return the cached value here

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T07:39:29.163

## 对于池之间的非共享数据

当您有许多池（网络花园）时，每个池都可以拥有它们的静态数据。这几天我测量`ConcurrentDictionary<TKey, TItem>`到速度更快，因为他们实施了某种不使用内部查看的技术，所以他们让它变得非常快。

所以我建议`ConcurrentDictionary<TKey, TItem>`池之间的非共享数据。

在这种情况下，您必须注意自己的数据同步，以避免在同一数据上发生并发数据更改。在那里您可以使用 SlimLock 或 Lock。

## 池之间的公共资源变化

现在，当您拥有在池之间共享的资源时，您需要使用互斥锁。例如，如果您尝试从多个线程保存文件，或者打开一个文件以从多个线程更改它 - 您需要互斥锁来同步该公共资源

[因此，对于使用互斥](http://msdn.microsoft.com/en-us/library/system.threading.mutex.aspx)锁的公共资源，
**Mutex**可以使用 Key 来锁定基于该键的锁定 - 但您不能更改相同的资源！

```
public T GetCache<T>(string key, Func<T> valueFactory...) 
{
    // note here that I use the key as the name of the mutex
    // also here you need to check that the key have no invalid charater
    //   to used as mutex name.
    var mut = new Mutex(true, key);

    try
    {   
        // Wait until it is safe to enter.
        mut.WaitOne();

        // here you create your cache
    }
    finally
    {
        // Release the Mutex.
        mut.ReleaseMutex();
    }   
} 
```

## 什么样的锁

我们有两个锁盒。

1.  一种情况是当我们在所有池、所有线程中使用**公共资源时。**公共资源可以是文件，也可以是数据库本身。

在公共资源中我们需要使用**mutex**。

2.  第二种情况是当我们使用仅对池内部可见的变量时 - 不同的池无法看到该资源。例如**静态 List<>**、静态 Dictionary 等。这个静态变量、数组只能在池内部访问，并且它们在不同的池中是不一样的。

在第二种情况下，**lock()**是最简单和最常用的方法。

## 比锁还快

现在，当我们有一个长期保存的静态字典并在那里进行太多读/写时，避免整个程序等待的更快方法是[`ReaderWriterLockSlim`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.readerwriterlockslim?view=netframework-4.7.2)

你可以从这里举一个完整的例子：[`ReaderWriterLockSlim`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.readerwriterlockslim?view=netframework-4.7.2)

使用 ReaderWriterLockSlim，我们可以在不需要它们时避免锁定 - 并且我们在读取时不需要锁定静态值 - 只有在我们写入它们时。所以我可以建议我们将它们用作缓存的静态值。

## 什么是 asp.net 中的池。

就像运行的不同程序相互隔离但为来自用户的传入请求提供服务。每个池子都有自己的世界，彼此之间没有交流。每个池都有它们的初始化、静态值和生命周期。要在池之间拥有一些公共资源，您需要一些其他的第三个程序，比如数据库、磁盘上的文件、服务。

因此，如果您有许多池（网络花园）来同步它们以获得公共资源，则您需要互斥锁。要在内部同步它们，请使用锁。

[IIS 应用程序池、工作进程、应用程序域](https://stackoverflow.com/questions/14105345/iis-app-pools-worker-processes-app-domains/14105747#14105747)
[ASP.NET 静态变量的生命周期](https://stackoverflow.com/questions/8919095/lifetime-of-asp-net-static-variable/8919336#8919336)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-03T21:53:51.043

我刚刚找到[了 LazyCache](https://github.com/alastairtree/LazyCache)库。不过，我还没有在生产中尝试过。

```
IAppCache cache = new CachingService();
ComplexObject cachedResults = cache.GetOrAdd("uniqueKey", 
    () => methodThatTakesTimeOrResources()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-22T14:25:17.983

.NET`ConcurrentDictionary<TKey, TItem>`通过为每个密钥哈希创建单独的锁在内部实现这一点。这具有仅锁定一个相关哈希的好处，即使在处理项目添加和删除时也是如此。

# c++ - 将 NTFS 文件夹的内容动态合并到虚拟文件夹中

> ID：10714793
> 
> 赞同：2
> 
> 时间：2012-05-23T06:46:37.360
> 
> 标签：c++, winapi, filesystems, filesystemwatcher, ntfs

我需要根据一些规则将多个 NTFS 文件夹的内容合并为一个。这些规则将确保没有冲突的名称。目标是以编程方式完成所有这些工作（c# 和/或 c++）。

我拥有的最简单的解决方案是在目标文件夹中创建 NTFS 链接（或连接），指向源文件夹中的每个文件。

到目前为止，这将起作用，但我遇到的问题是不会出现其他文件并且删除的文件不会消失。

好吧，当然我可以运行一个后台进程（服务）来监听文件系统的源文件夹并在你的飞行中对 NTFS 链接进行适当的修改，但这是要走的路吗？

第一个问题是： 1\. 最优雅的方式是什么？2\. 我见过多个程序，例如可以将 ZIP 或 ISO 文件的内容挂载到某个 NTFS 文件夹。它们是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T06:52:03.470

这是一个让您能够在 Window 中创建用户模式文件系统的项目：[Dokan](http://dokan-dev.net/en/)：

> 当您想在 Windows 上创建新的文件系统时，例如改进 FAT 或 NTFS，您需要开发文件系统驱动程序。在 Windows 上开发在内核模式下工作的设备驱动程序非常困难。通过使用 Dokan 库，您可以非常轻松地创建自己的文件系统，而无需编写设备驱动程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T06:56:50.837

可以通过两种方式将某些内容映射到现有文件夹：

1.  文件系统过滤器驱动程序过滤对现有文件夹的 FS 请求并显示文件夹的修改内容。
2.  文件系统驱动程序创建一个虚拟文件系统并将其作为连接点安装在 NTFS 驱动器上。

这两种方法都需要相应的内核模式驱动程序。

公开 ZIP（或其他类似文件）的应用程序使用上述方法之一。ISO 文件是磁盘的映像，可以直接作为虚拟磁盘公开，也可以挂载到 NTFS 文件夹。在后一种情况下，需要内核模式磁盘驱动程序。

您可以使用我们的[回调文件系统](http://www.eldos.com/cbfs/)(CBFS) 产品来完成您的特定任务。CBFS 提供了一个预先创建的内核模式驱动程序，让您可以在用户模式下编写与文件系统相关的代码。CBFS 包含的 Mapper 示例几乎可以满足您的需求 - 它将现有文件夹的内容显示为新的虚拟文件系统，您可以将其挂载到 NTFS 文件夹（CBFS 支持这一点）。非商业许可证可用于公共非商业项目。为 .NET、C++、Java 和 Delphi 提供了 API。

# c# - 如何从数据集中 DataGridViewComboBoxColumn 设置值

> ID：10714794
> 
> 赞同：4
> 
> 时间：2012-05-23T06:46:41.140
> 
> 标签：c#, winforms, datagridview

假设我有两张桌子：

```
 work_hours
 work_hours_id | date  | _project_id
     1            1.2\.      10
     2            1.2\.      11
     3            1.2\.      10 

 project
 project_id | project_name
    10           pr1
    11           pr2
    12           pr3 
```

在 DataGridView 我想看到这个：

```
 work_hours_id | date | _person_id | project_name(DataGridViewComboBoxColumn)
     1            1.2\.     10            pr1
     2            1.2\.     11            pr2
     3            1.2\.     10            pr1 
```

**1.**我该怎么做？ **2.**`work_hours`如果我将 pr1 ( `work_hours_id = 3`) 更改为 pr3 ( `DataGridViewComboBoxColumn`)是否可以保存表中的更改`SqlCommandBuilder`？

```
 string query = "SELECT work_hours.work_hours_id, work_hours.date FROM work_hours
           LEFT OUTER JOIN project ON work_hours._project_id = project.project_id ORDER BY work_hours.date;
         SELECT * FROM project ORDER BY project_name";

            SqlCommand sqlcmd = new SqlCommand(query, conn);
            da = new SqlDataAdapter(query, connectionString);
            cBuilder = new SqlCommandBuilder(da);
            dt = new DataTable();
            ds = new DataSet();
            da.Fill(dt);
            da.Fill(ds);

            DataGridViewComboBoxColumn columnCb = new DataGridViewComboBoxColumn();
            columnCb.DataPropertyName = "_project_id";

            columnCb.DataSource = ds.Tables[1];
            columnCb.ValueMember = "project_id";
            columnCb.DisplayMember = "project_name";

            bSource = new BindingSource();
            bSource.DataSource = dt;
            dataGridView1.DataSource = bSource;
            dataGridView1.Columns.Add(columnCb); 
```

![这是示例：](../Images/7c95e5416866da8ab07ae357289c9fa0.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T21:24:35.960

如果我没有误解你想设置 datagridview 的组合框列的数据源..你可以这样设置：

```
/// if you use OfType Method then you will get advantage of to use as normal control
/// means this method will give you advantage of can use all method and properties
/// of the control which you want to implement in DataGridView

/// Controls.OfType method will check all the columns and get an array with 
/// what you give as search criteria..here, the criteria is ComboboxColumn..
/// depends of your need you can give comboboxcell also..

/// Element at method selects the zero based index in array which filtered by criteria
/// if you use only one of the given type then you can use .First() instead of .ElementAt()

yourDataGridViewName.Controls.OfType<DataGridViewComboBoxColumn>()
.ElementAt(indexNoOfTheDGVComboBox).DataSource = YourDataRetrievingMethod; 
//i.e. ds.Tables[indexNoOfTheTable].Columns[IndexOfTheColumn]

/// and you can set DisplayMember and ValueMember as the same way.. 
/// i give combocell and combocolumn together to show the syntax.

yourDataGridViewName.Controls.OfType<DataGridViewComboBoxCell>()
.ElementAt(0).DisplayMember = "YourDisplay";

yourDataGridViewName.Controls.OfType<DataGridViewComboBoxCell>()
.ElementAt(0).ValueMember = "YourValue"; 
```

关于第二个问题..如果您问我，那么我更喜欢：要控制“意外节省”，请在行尾放置一个 buttonCell..当用户更改行上的某些内容时，应单击保存按钮..然后在您的按钮中单击方法您可以将更改保存为正常的插入或更新方法..

那里只有2个区别..

1-）您需要使用`Cell_Click`事件并确保使用`OfType()`方法而不是正常`Button _Click`事件进行按钮检查

2-) 取决于项目需要，您需要获取 DataGridView`RowIndex`和/或`Cell Address()`之前获取值并将值传递给 SQLQuery

# php - 如何使用 Moodle 1.9 登录我的应用程序？

> ID：10714805
> 
> 赞同：0
> 
> 时间：2012-05-23T06:47:15.937
> 
> 标签：php, moodle

我想在 Moodle 1.9 中使用我的应用程序功能。

当我登录 Moodle 1.9 时，我想在我的应用程序中自动登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T06:39:30.860

首先，您必须验证 Moodle 和您的应用程序的数据库..

然后您可以使用 Moodle 会话登录您的应用程序...

# c# - 确认邮件已成功到达

> ID：10714811
> 
> 赞同：1
> 
> 时间：2012-05-23T06:47:52.850
> 
> 标签：c#, asp.net, gmail, sendmail

我使用 gmail 从我的 asp.net 页面发送邮件，但我想要一种方法来确认（确保）邮件已成功到达收件人（我将一些收件人添加到密件抄送）

有人可以帮助我吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:55:19.603

有两种方法

*   索取已读回执
*   将图像嵌入邮件正文

但据我所知，谷歌不支持它们。无论如何搜索这两种方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:51:56.263

我认为您不能直接从“发送代码”中执行此操作。我想您需要使用一些 POP3 或 IMAP api 来查看收件人是否收到了新电子邮件。

例如，您只能测试 SMTP 服务器是否已接受或拒绝您的邮件（垃圾邮件原因，身份验证错误），但您无法检查对方是否收到了电子邮件

或者您可以使用电子邮件客户端的“自动应答”功能

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:53:54.000

您必须使用一些 POP3（协议）库来检查收件人是否收到了您的电子邮件。POP3 可用于检索邮件，但它也不支持 PUSH（因此您必须轮询邮件）。

[IMAP4](http://en.wikipedia.org/wiki/IMAP_IDLE) IDLE 扩展通常被称为 PUSH 邮件——因此您需要找到一个支持 IMAP4 IDLE 的 C# 库。

检查此链接 Using [C# .Net Libraries to Check for Imap Messages](https://stackoverflow.com/questions/545724/using-c-sharp-net-librarires-to-check-for-imap-messages-from-gmail-servers) 并检查此[Accessing IMAP in C#](https://stackoverflow.com/questions/545724/using-c-sharp-net-librarires-to-check-for-imap-messages-from-gmail-servers)

请记住，您的邮件服务器还需要启用 IMAP4 和 IMAP4 IDLE。一些邮件服务器不支持它，必须使用 POP3 轮询。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T06:58:11.190

使用标准 RFC822 电子邮件确实无法确认收到。要发送消息，邮件客户端将与 SMTP 服务器通信。服务器可能会拒绝严重问题（例如格式错误的电子邮件地址）。服务器将尝试将消息转发到目的地，但消息可能会落在地板上。当然，邮件可能会在目标邮箱中结束，但也许没有人会阅读它。

通常，如果投递失败，您最终会收到退回邮件，但这不会在邮件投递的同时发生。

# javascript - 通过 ajax 或 iframe 将网站加载到页面并避免导航

> ID：10714812
> 
> 赞同：0
> 
> 时间：2012-05-23T06:48:02.553
> 
> 标签：javascript, ajax, html, jquery

这是我需要做的。

有一个网页和另一个网站，两者都托管在同一个域中。我想将整个网站加载到该网页的 div 或 iframe 中。类似的例子是一个像 hidemyass.com 这样的免费代理浏览器。

我知道这很容易做到，但关键是我还需要避免导航。假设该网站有 2 个页面，分别称为 a.htm 和 b.htm 。有一个从 a.htm 到 b.htm 的链接。因此，当有人单击 a.htm 上的链接时，浏览器将重定向到 b.htm

当我将该 a.htm 嵌入页面的一部分时，如果有人单击该链接；它将重定向到浏览器中的 b.htm。我想要做的是避免重定向，当有人点击链接时，b.htm 应该加载到我的页面本身。

我无法更改该网站（在本例中为 a.htm 和 b.htm），一切都应在该页面中完成。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:15:27.367

如果您只查看链接点击而不是通过 JavaScript 进行导航，那么应该使用以下代码：

```
<iframe id="frame" src="a.html"></iframe>
<script type="text/javascript">
  function onClick(event)
  {
    var link = event.target;
    while (link && link.localName != "a")
      link = link.parentNode;

    if (link && !link.hasAttribute("target"))
      link.setAttribute("target", "_parent");
  }

  // Listen to clicks inside the frame
  document.getElementById("frame").contentWindow.addEventListener("click", onClick, false);
</script> 
```

`target="_parent"`如果没有定义明确的目标，这将检查用户单击的链接并为其添加属性。这意味着针对新窗口/选项卡的链接仍将照常工作，旨在替换当前页面的链接将替换父文档。但这当然只有在 JavaScript 代码`a.html`不干扰的情况下才有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:01:40.440

如果您只想跳过页面中的链接，您可以在链接中添加 onclick 句柄，并在框架尚未完全加载时返回 false

这是脚本

```
function checkLink(){
  if (canNavigate){
    return true;
  }
  return false;
} 
```

但是如果你想禁用浏览器地址上的导航，你必须像 linkbuck 网站一样

[http://c6f11ddd.linkbucks.com/url/http://www.google.com](http://c6f11ddd.linkbucks.com/url/http://www.google.com)

当广告尚未加载时，linkbuck 将不允许您离开。他们使用这些代码将其存档，您应该对其进行调查

```
Buster: function () {
  var interval = setInterval(function () {
    if (Lbjs.IsClick) {
     clearInterval(interval);
    }
    else if (Lbjs.Unload > 0) {
     Lbjs.Unload -= 2;
     window.top.location.replace("/cancelnavigation/");
     Lbjs.NavigationNotice();
    }
  }, 1);
  var clearDelay = (this.Countdown > 0) ? this.Countdown : 8;
  setTimeout(function () { clearInterval(interval); }, clearDelay * 1000);
},
NavigationNotice: function () {
  var navNotice = document.getElementById("navNotice");
  navNotice.innerHTML = "<span class=\"warning\" style=\"text-align:center;height:20px;width: 400px;padding: 10px;\"><b>Request Cancelled</b> - Navigation is disabled for 8 Seconds...</span>";
  if (navNotice.style.display == "none") {
    this.Fader.FadeIn(navNotice, 200, function () {
      setTimeout(function () {
      Lbjs.Fader.FadeOut(navNotice, 200, null);
    }, 1500);
  });
} 
```

# c++ - 如何将图像保存在调整大小的 QLabel 中？

> ID：10714813
> 
> 赞同：1
> 
> 时间：2012-05-23T06:48:03.820
> 
> 标签：c++, image, qt4, qlabel, pixmap

我有一个加载了像素图的 QLabel。我设置了它，以便在调整窗口/QLlabel 的大小时，qlabel 的图像也会调整大小。但是，当我尝试保存图像并检索像素图时，它是原始加载的。我将如何从 QLabel 中检索新调整大小的图像并将其作为 QImage 检索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:00:44.167

在标签的调整大小事件中，使用

```
Label->setPixmap(QPixmap::fromImage(YourImage).scaled(ui->Label->size(), Qt::IgnoreAspectRatio)); 
```

获取图像作为图像使用的大小

```
Label->pixmap().toImage(); 
```

如果此图像仍然与标签大小不同，请尝试

```
Label->pixmap().toImage().scaled(Label->size(), Qt::IgnoreAspectRatio)); 
```

# c# - 有什么方法可以将英语动词转换为 C# 的现在时

> ID：10714814
> 
> 赞同：2
> 
> 时间：2012-05-23T06:48:06.440
> 
> 标签：c#, windows-phone-7

我正在使用 C# 开发 Windows Phone 应用程序，我想知道是否有正则表达式/库/助手或任何东西可以从输入动词中获取现在时动词（或基本形式动词）

例子：

> 住过 >> 住过
> 
> 建造>>建造
> 
> 工作>>工作

到目前为止，我找到了一个松散的解决方案来单数化复数词。

而且我认为这可以修改/添加一些正则表达式规则以使其适用于时态。但我不擅长正则表达式（英语语言学也不行）

[http://lotsacode.wordpress.com/2010/03/05/singularization-pluralization-in-c](http://lotsacode.wordpress.com/2010/03/05/singularization-pluralization-in-c)

我的情况是：当用户试图找到一些不在数据库中的单词时，它会建议诸如键入“dragons”之类的内容，它会给出“dragon”的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:02:12.117

解决方案可能需要比您想象的更复杂。任何有效的方法都需要包含某种词典，因为英语中有很多不规则动词。通过考虑“锯”这个词可以很好地说明这个困难。是名词吗？是动词吗？是动词“to saw”的现在时吗？是动词“to see”的过去式吗？这只能从上下文中推断出来。

简而言之，它不是简单的文本处理。必须有可以应用英语短语的上下文处理的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:47:58.483

我认为您应该尝试使用[`SharpNLP`](http://sharpnlp.codeplex.com/)，而不是使用它，但肯定它会以某种方式帮助您，也请参阅这篇[文章](http://www.codeproject.com/Articles/12109/Statistical-parsing-of-English-sentences)。

# android - 更改屏幕方向 - VirtualBox 上的 Android 3.2

> ID：10714817
> 
> 赞同：10
> 
> 时间：2012-05-23T06:48:22.617
> 
> 标签：android, sdk, orientation, virtualbox, eeepc

我在 Virtual Box 上运行 android 3.2 RC2 eeepc。操作系统假定它是平板电脑，并默认将方向设置为横向。如何手动更改横向和纵向之间的方向？

有没有办法通过 android OS 中的命令行来执行此操作？是否有像 AVD Manager 中的模拟器这样的快捷键？我试过 Numlock off 7 和 Ctrl F11。没用。请帮助

我使用 VM 运行我当前正在构建的应用程序。我的应用程序有很多视图，并且大多数都设置为纵向和横向工作。一种视图严格设置为纵向。当我启动它时，整个操作系统变成纵向。如何恢复为横向模式？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-10-01T14:18:50.323

下载诸如“设置方向”之类的应用程序，以便您可以将其设置为纵向、横向或自动

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-23T08:42:01.413

可悲的是，VBox 在处理屏幕方向方面确实很糟糕。恐怕没有快捷方式可以随时随地更改屏幕方向。但是，有一些方法可以始终强制屏幕进入一个方向。然而，这可能不是您想要的。

但是，您可以尝试使用 BuilDroid - 这是 VBox 的一种插件，可以尽可能地支持 Android。它确保屏幕是“管理的”。我自己没有使用 BuilDroid 的经验，但它可能有你正在寻找的东西。

试试看！你可以在这里找到它：[http ://www.buildroid.org/blog/?page_id=121](http://www.buildroid.org/blog/?page_id=121)

或者，有一篇博客文章提供了有关如何永久更改方向的信息，正如我之前提到的，这里：[http ://davematthew.blogspot.com/2011/09/app-development-with-android-x86-on.html](http://davematthew.blogspot.com/2011/09/app-development-with-android-x86-on.html)

我不知道这是否对你有帮助！但我希望其中之一能回答你的问题。

**编辑：**该问题似乎已通过诸如 user2835272 提到的一个应用程序解决。我没有亲自尝试过该应用程序，但现在尝试“设置方向”可能是解决问题的正确方法。更好的是，如果 F9 - F12 现在可以工作，那就是应该使用的功能。同样，我有一段时间没有玩过 VM Android，所以我无法确认这一点。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-08-15T20:08:08.257

尝试仅使用 F9 或 F11。它对我有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-08T12:56:44.247

我尝试在 VirtualBox 中运行的 Android 4.4 上运行 QQ 时遇到了这个问题。QQ一启动F9-F12就失效了。应用程序“终极旋转控制”可以解决问题，但不会调整 QQ 窗口的大小。所以它的一部分会出现在虚拟屏幕之外。最后，我最终将虚拟 Android 的屏幕尺寸重新定义为 360x640（纵向），如此[处](https://4sysops.com/archives/change-the-screen-resolution-of-an-android-virtualbox-vm/)所述。好像是QQ检测到屏幕哪一边长了，就按照这个来旋转了。因此，如果您从纵向纵横比开始，它将不会横向旋转。我不关心其他应用程序，但猜测它们的操作方式相同。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-06T21:38:05.060

如果您尝试将显示设置为纵向分辨率。有一种方法[可以在 VBox 中手动设置分辨率](https://4sysops.com/archives/change-the-screen-resolution-of-an-android-virtualbox-vm/)

我在 Android x86 4.4 中成功将其设置为 600x800。所以基本上做到以下几点：

1.  VBoxManage setextradata "Android" "CustomVideoMode1" "360x640x16"

2.  在 VBox 中以 Debug 模式启动 Android

3.  在 Linux 提示符下，输入以下命令：

mkdir /引导

挂载 /dev/sda1 /boot

vi /boot/grub/menu.lst

找到像“Android-x86 4.4”这样的平铺行，在行尾添加“UVESA_MODE=360x640”（用您的分辨率替换360x640）

保存文件。

4.  清理并重新启动 VM。

卸载/启动

rmdir /启动

重启 -f

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-07T08:05:06.857

对于那些想要在 上更改屏幕方向的人`Windows`。

要`VB`在垂直屏幕上以全屏模式运行，请从 中选择不同的尺寸和比例`view>>virtual screen x>>resize to ../scale to xx%`。尝试不同的组合后，您会找到适合您的设置。

# asp.net - 推荐 URL 窗口应用程序

> ID：10714820
> 
> 赞同：0
> 
> 时间：2012-05-23T06:48:26.953
> 
> 标签：asp.net, winforms, httpwebrequest

我有一种情况，我的 Web 应用程序是从 CRM（基于 win 的应用程序）打开的。

我可以通过请求变量获取应用程序的名称吗？在 Web 应用程序中，推荐 URL 有效。有什么我可以探索的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:31:01.600

你的网络服务器不可能知道哪个应用程序打开了浏览器……*除非*……你给应用程序一个与正常流量不同的 URL。（广告活动使用相同的方法来判断谁点击了他们的广告。）让桌面应用程序使用带有附加查询参数的 URL：

```
www.mywebsite.com/?source=mydesktopapplication 
```

如果这对您来说是不可能的，因为您无法更改桌面应用程序，那么我能想到的唯一其他（不完美）的事情就是假设没有推荐 URL 的人来自该应用程序。这样做的问题当然是您会错误地识别出没有推荐 URL 的访问者，这些访问者仍然不是来自桌面应用程序，例如在地址栏中输入您网站的 URL 的人，或者单击了书签链接的人。

# google-chrome - Chrome 扩展在某些页面上导致 jquery 和 javascript 出现问题

> ID：10714824
> 
> 赞同：0
> 
> 时间：2012-05-23T06:48:55.067
> 
> 标签：google-chrome, google-chrome-extension

我有一个小的 chrome 扩展，我想用它来更改文本。它按我想要的方式工作（单击图标更改文本），但在某些页面上，现有的 jquery 在启用应用程序时停止工作。我究竟做错了什么？

文件：manifest.json、myscript.js 和 background.html

manifest.json 内容：

```
{
  "name": "My extension",
  "version": "1.0",
  "background_page": "background.html",
  "permissions": [
    "tabs", "http://*/*"
  ],
  "content_scripts": [
    {
      "matches": ["http://*/*"],
    "matches": ["https://*/*"],
      "js": ["myscript.js"]
    }
  ],
"browser_action": {
    "default_icon": "icon.png"
    }
} 
```

myscript.js 内容：

```
var array = {"not":" NOT ", "like":" LIKE ", "job":"JOBS"}

for (var val in array)
    document.body.innerHTML = document.body.innerHTML.replace(new RegExp(val, "g"),     array[val]); 
```

background.html 内容：

```
<script>
chrome.browserAction.onClicked.addListener(function(tab) {
  chrome.tabs.executeScript(null,
                       {file:"myscript.js"});
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T18:47:07.640

`document.body.innerHTML`很糟糕。

使用它时，您将 DOM 节点视为原始文本。这些 DOM 节点具有事件处理程序，甚至一个简单`document.body.innerHTML+='...'`的节点也会将现有节点发送到遗忘，创建新节点，而无需事件处理程序。

因此，您需要遍历文档中的所有文本节点[（*请参见此处如何）](https://stackoverflow.com/questions/4367986/how-to-get-all-textnodes-in-html-document-from-specific-tags-using-javascript)并单独执行一个 innerHTML。

祝你好运！

# java - RAM 目录 Lucene

> ID：10714827
> 
> 赞同：-1
> 
> 时间：2012-05-23T06:49:25.173
> 
> 标签：java, text, lucene, indexing, ramdirectory

我正在尝试索引文本文件并使用 RAMDirectory 进行快速索引，并且想知道是否有办法清除以前的 RAMDirectory 以防止重复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T11:40:02.077

不确定“清除以前的 RAMDirectory”是什么意思，但是您可以通过将创建标志字符串设置为 true 来覆盖 RAMDir 处的先前索引。这将在构造函数调用的位置创建一个新索引。

```
IndexWriter(Directory d, Analyzer a, boolean create, IndexWriter.MaxFieldLength mfl) 
```

> [为 d 中的索引构造一个 IndexWriter。](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_1/api/all/org/apache/lucene/index/IndexWriter.html)

# java - JVM自动终止时如何生成线程转储

> ID：10714828
> 
> 赞同：3
> 
> 时间：2012-05-23T06:49:26.130
> 
> 标签：java, jvm

问题场景：在sonic MF容器（jvm）中发现了问题。容器托管了一些负责db操作和消息转换的java服务。一旦启动，容器可以正常运行2-3周，并自行终止而不会抛出任何例外。

经过大量研究，我们无法找出导致 jvm（MF 容器）关闭的原因或原因。

当jvm自动关闭时，有没有一种方法可以让我获得线程转储？我正在使用java 1.6。我应该遵循这个问题的其他方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T07:17:13.647

您可以尝试[java.lang.Runtime.addShutdownHook()](http://docs.oracle.com/javase/6/docs/api/java/lang/Runtime.html#addShutdownHook%28java.lang.Thread%29)，并让钩子遍历所有线程并使用[Thread.getAllStackTraces()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#getAllStackTraces%28%29)转储它们的堆栈跟踪。但是，如果 JVM 已关闭，`Runtime.halt()`则不会调用挂钩。更复杂的是使用[检测](http://www.javalobby.org/java/forums/t19309.html)来挂钩`Runtime.exit()`和`Runtime.halt()`（或`Shutdown.sequence()`，请参阅编辑#2）的调用，因此您可以准确地看到在调用任何一个时发生的情况。

**编辑**：另一种方法是安装一个不强制执行任何安全性的[SecurityManager](http://docs.oracle.com/javase/6/docs/api/java/lang/SecurityManager.html)`SecurityManager.checkExit()` ，但它会在调用时转储线程列表，因为两者都`halt()`调用`exit()`该安全管理器方法。这将比使用检测容易得多，您甚至可以决定在记录线程正在做什么之外抛出异常。

**编辑 2**：运行 JVM 的系统可以告诉 JVM 终止，在这种情况下使用安全管理器将不起作用。也不会在`Runtime.exit()`or上使用检测`Runtime.halt()`，因为被调用的方法是`java.lang.Shutdown.exit()`. 如果 JVM 因为最后一个守护线程完成而关闭，`Shutdown.shutdown()`则调用。但是关闭钩子在任何一种情况下**都可以工作。**因此，您应该始终使用关闭挂钩，即使您还要使用安全管理器或工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-24T07:03:00.700

另请参阅[https://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/hangloop.html](https://docs.oracle.com/javase/7/docs/webnotes/tsg/TSG-VM/html/hangloop.html) “解决挂起或循环过程”

但是，至少在我的情况下，Eclipse 被挂起，并且不响应任何这些。

# android - Android flash builder webview

> ID：10714830
> 
> 赞同：1
> 
> 时间：2012-05-23T06:49:28.513
> 
> 标签：android, flash, flash-builder

我目前正在为 android 的 flash builder 中开发一个移动应用程序。在此应用程序中，我使用的是 Web 视图，在此 Web 视图中，有一个指向基于 Web 的应用程序的链接。您要做的第一件事是在这个基于 Web 的应用程序中登录。这工作正常。但是当我关闭应用程序并重新启动应用程序时，我遇到了一个问题，我始终保持登录状态。

有什么办法可以清除网页视图的数据吗？是清除android应用程序用户数据的选项吗？

这是我的代码

```
 <fx:Script>
    <![CDATA[
        import flash.geom.Rectangle;
        import flash.media.StageWebView;
        import flash.net.*;
        import flash.net.URLRequest;

        import spark.components.Application; 

        public var webView:StageWebView = new StageWebView(); 

        public function init():void 
        { 
            this.addEventListener(Event.ADDED_TO_STAGE , handleLoad );

        } 
        public function handleLoad(e:Event):void
        {

            webView.stage = this.stage;
            webView.viewPort = new Rectangle( 0, 50, stage.stageWidth, stage.stageHeight );
            webView.loadURL("http://jd44jse.ncsbe.eu.jnj.com:54400/MfmWeb/flex/mfm/plocmenuHD/main.html");        
        }

        protected function logoutHandler(event:MouseEvent):void
        {

            NativeApplication.nativeApplication.exit();

        }

    ]]>
</fx:Script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T00:35:56.393

好的，您需要在强制用户注销的注销按钮中添加一个代码。或者在退出时使用户信息值无效。我不在我的电脑前，但我会处理你的代码，看看我能发现什么。

# actionscript-3 - AS3 *** 违反安全沙盒 ***

> ID：10714834
> 
> 赞同：0
> 
> 时间：2012-05-23T06:49:51.823
> 
> 标签：actionscript-3, flexbuilder, sandbox

当我尝试从我的应用程序目录加载 swf 文件时，我遇到了这个问题？

我该怎么做才能避免这种情况......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:51:38.953

在浏览器中右键单击您的 swf，转到全局设置。在最后一个选项卡中，将此 SWF 文件添加为受信任。完成后重新加载页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:05:00.887

[访问全局安全设置面板](http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html)。

然后单击**编辑位置**，**添加位置**，**浏览文件夹**并选择包含您的闪存项目的驱动器。

单击**确定**，然后选择单选按钮**始终允许**。

# ruby - Ruby Enterprise 是否使用绿色线程？

> ID：10714837
> 
> 赞同：3
> 
> 时间：2012-05-23T06:50:11.740
> 
> 标签：ruby, multithreading

[我想知道这个，除了这个](http://www.rubyenterpriseedition.com/documentation.html#_overview_of_ruby_enterprise_edition_ree)找不到任何东西

“线程调度程序错误修复和性能改进。Ruby Enterprise Edition 上的线程可以比官方 Ruby 1.8 快 10 倍以上”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-23T08:11:46.917

REE 源自 MRI 1.8.7。因此，它只使用绿色线程。REE 更改了 1.8.7 的某些部分（尤其是在内存管理和垃圾收集方面）。但它仍然广泛遵循上游 MRI 的设计（原始 Matz's Ruby Interpreter）

虽然 YARV (1.9) 切换到 OS 本机线程，但它们仍然具有全局解释器锁，以确保一次只运行这些线程中的一个。

有几个 Ruby 实现带有 OS 本机线程但没有 GIL。最突出的是 JRuby（基于 JVM）和 Rubinius（有自己的 VM）。这些实现提供了“真正的”并发线程。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T10:11:20.117

除了完全摆脱解释器锁的 JRuby 和 Rubinius 之外，CRuby/MRI 的事态在并发方面也取得了一些进展。

一个值得注意的特点是，随着 Narihiro Nakamura 的[Bitmap Marking GC](http://blade.nagaokaut.ac.jp/cgi-bin/scat.rb/ruby/ruby-core/41916)，从 Ruby 2.0 开始，REE 相对于 CRuby 的另一个优势将消失：REE 在写友好的 GC 算法上有一个副本，这使得它对于通过进程实现并发（分叉）很有吸引力。 ) 而不是通过线程。新的 Bitmap Marking GC 将具有[相同的优势](http://patshaughnessy.net/2012/3/23/why-you-should-be-excited-about-garbage-collection-in-ruby-2-0)，即在 fork 新进程时节省不必要的内存复制。

GIL（或官方称为 GVL）也没有听起来那么糟糕。例如，Ruby[在执行 IO 时](http://ablogaboutcode.com/2012/02/06/the-ruby-global-interpreter-lock/)会释放解释器锁。最近我们经常看到的另一个功能是 C 扩展开发人员可以通过调用手动释放锁`rb_thread_blocking_region`，这将在 GIL 释放的情况下执行 C 级函数。如果要在 C 中执行某些操作，我们可以放心，它不会有副作用，这可能会产生巨大的影响。一个很好的例子是[RSA 密钥生成](https://github.com/ruby/ruby/blob/trunk/ext/openssl/ossl_pkey_rsa.c#L136)——它完全在 C 中运行，内存由 OpenSSL 分配，所以我们可以在 GIL 发布的情况下安全地运行它。

与几年前相比，在 1.9 或最近的项目（如[赛璐珞）中引入的纤维也对今天的 Ruby 并发状态进行了更友好的了解。](https://github.com/celluloid/celluloid)

最后同样重要的是，CRuby 的 VM 的作者 Koichi Sasada 正在积极研究 MVM 技术，这将允许在单个 Ruby 进程中运行多个 VM，从而以另一种方式实现并发。

考虑到所有其他性能改进，使用 REE 的争论越来越少，一旦它出来，切换到 1.9.3 或 2.0.0 是安全的，特别是因为 1.8 系列将不再积极开发和许多热门项目已经宣布很快停止对 1.8 的支持。

编辑：

正如 Holger 所指出的，REE 也已[停产](http://blog.phusion.nl/2012/02/21/ruby-enterprise-edition-1-8-7-2012-02-released-end-of-life-imminent/)，不会有 1.9 或更高版本的端口。所以切换不仅安全，而且是正确的做法:)

# java - 从拦截器获取休眠会话

> ID：10714839
> 
> 赞同：4
> 
> 时间：2012-05-23T06:50:19.447
> 
> 标签：java, hibernate

我正在编写一个休眠拦截器，我需要访问休眠会话对象。他们是使用拦截器访问休眠会话的直接方法吗？

我想要做的是找出hibernate连接到的数据库。由于各种原因，将其存储为线程本地数据是不切实际的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T11:22:53.457

是的，有一种方法......只需在创建后将会话传递给拦截器：

```
Session session = factory.openSession(interceptor);
interceptor.setSession(session); 
```

你在拦截器中有会话！请记住：

1.  拦截器无法访问它正在运行的会话，因此不要直接使用它来更改/添加对象。
2.  您可以在同一个 JDBC 连接上打开临时会话
3.  两个会话的事务将相同

    ```
    try {    
        Connection connection = mySession.connection();
        Session tempSession = HibernateUtil.getSessionFactory().openSession(connection); 
        // do something
        tempSession.flush(); 
    } 
    finally { 
        tempSession.close(); 
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T21:56:22.077

似乎没有“官方”方式来获取会话对象，也`o.h.Interceptor`没有通过`o.h.EmptyInterceptor`. 此外，`Interceptor`的 Javadoc 说：

> SessionFactory 可能有一个 Interceptor 实例，或者可能为每个 Session 指定一个新实例。无论使用哪种方法，如果 Session 要可序列化，则拦截器必须是可序列化的。这意味着 SessionFactory 范围的拦截器应该实现 readResolve()。
> 
> Session 不能从回调中调用（回调也不能导致集合或代理被延迟初始化）。

获取此信息的唯一方法似乎是使用反射，并已在[此处](https://stackoverflow.com/questions/1748933/how-to-get-hibernate-configuration-properties)回答。

# java - java - 如何处理excel文件而不上传到java中的服务器？

> ID：10714840
> 
> 赞同：-2
> 
> 时间：2012-05-23T06:50:22.650
> 
> 标签：java, servlets

如何处理excel文件而不将其上传到服务器？

还如何在不使用以下内容的情况下使用 servlet 将文件上传到服务器，

```
import org.apache.commons.fileupload.FileItem;
import org.apache.commons.fileupload.FileUploadException;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.servlet.ServletFileUpload;
import org.apache.commons.io.FilenameUtils; 
```

请分享我的链接或如何做到这一点？

问候安东尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T23:58:49.910

> *如何处理excel文件而不将其上传到服务器？*

您可以使用[小程序](http://docs.oracle.com/javase/tutorial/deployment/applet/)或[webstart](http://docs.oracle.com/javase/tutorial/deployment/webstart/)应用程序。这基本上是一种嵌入在网页中的[Java Swing应用程序。](http://docs.oracle.com/javase/tutorial/uiswing/)然后这将完全在网络浏览器中运行，而无需与网络服务器交换数据。

* * *

> *还如何在不使用以下内容的情况下使用 servlet 将文件上传到服务器*

呃，不想上传文件，为什么要知道怎么上传文件呢？或者你的具体问题是你对在你的 web 应用程序中包含 3rd 方库有一些反感，这会迫使你编写数百甚至数千行新代码来重新发明轮子？我不确定我是否理解...

无论如何，从 Servlet 3.0（Tomcat 7、Glassfish 3、JBoss AS 6 等）开始，您可以使用新[`HttpServletRequest#getPart()`](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getPart%28java.lang.String%29)方法检索上传的文件作为`multipart/form-data`请求的一部分。请注意，所有这些 servlet 容器都在幕后透明地使用 Apache Commons FileUpload 来完成这项工作。唯一的区别是您不需要将 Apache Commons JAR 嵌入到您的 web 应用程序中，而是嵌入到 servletcontainer 本身中。

有关如何使用新的 Servlet 3.0`getPart()`方法的详细示例，另请参阅[如何使用 JSP/Servlet 将文件上传到服务器？](https://stackoverflow.com/questions/2422468/how-to-upload-files-in-jsp-servlet/2424824#2424824)

# javascript - 鼠标悬停元素时 div 上的鼠标移动发生变化

> ID：10714843
> 
> 赞同：0
> 
> 时间：2012-05-23T06:50:39.760
> 
> 标签：javascript, raphael

我想在鼠标移动时检测鼠标在保持器 div 中的位置。但是，当我将鼠标移到持有人 div 内的 SVG 元素上时，它将采用与此元素而不是持有人 div 的相对位置。有人知道我该如何防止这种情况吗？下面看我使用的代码：

```
var R = Raphael("holder", canw, canh);

$('#holder').mousemove(function (event){
    if(mousemove){
      position = getPosition(event);
      console.log(position.x+" - "+position.y);
    }
  });

function getPosition(e) {
    //this section is from http://www.quirksmode.org/js/events_properties.html
    console.log(e);
    var targ;
    if (!e)
        e = window.event;
    if (e.target)
        targ = e.target;
    else if (e.srcElement)
        targ = e.srcElement;
    if (targ.nodeType == 3) // defeat Safari bug
        targ = targ.parentNode;
    console.log(targ);
    // jQuery normalizes the pageX and pageY
    // pageX,Y are the mouse positions relative to the document
    // offset() returns the position of the element relative to the document
    var x = e.pageX - $(targ).offset().left;
    var y = e.pageY - $(targ).offset().top;
    return {"x": x, "y": y};
};

<div id="holder"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:53:21.620

您应该使用[`event.currentTarget`](https://developer.mozilla.org/en/DOM/event.currentTarget)而不是`event.target`- 这将为您提供将侦听器附加到的元素，而不是接收事件的元素。所以你的位置将相对于`#holder`元素计算。

由于您使用的是 jQuery，因此它也应该在 Internet Explorer 中工作（jQuery 显然 [在那里](http://api.jquery.com/event.currentTarget/)[模拟`event.currentTarget`](http://api.jquery.com/event.currentTarget/)）。其他 IE 兼容性黑客 (`window.event`和`event.srcElement`) 也不应该是必需的。

# c# - 循环过滤数据表

> ID：10714847
> 
> 赞同：0
> 
> 时间：2012-05-23T06:50:45.453
> 
> 标签：c#

是否有基于其他数据表的过滤数据表。如下所示：

```
 foreach (datarow dr in somedatatable.select("id= someothertable.rows["someotherid"])
  {
     dr[somefield]=someothertable[someotherfield];
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:01:44.027

您可以使用[DataView](http://msdn.microsoft.com/en-us/library/system.data.dataview.aspx)`SQL`进行普通选择

```
DataView dv = new DataView(dataTableToFilter);
dv.RowFilter = ""//SQL condition 
```

您可以在此处找到完整有用的示例：

[从 DataView 创建 DataTable](http://msdn.microsoft.com/en-us/library/73kk32zz%28v=vs.110%29.aspx)

您将`DataView`过滤器应用于 a并从过滤的行`DataTable`创建一个新的。`DataTable`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:09:53.087

我有一个问题，为什么要在代码中执行过滤逻辑？您的示例逻辑非常简单。

我为了更有效地进行过滤，我们想使用数据库来做到这一点。我认为您的要求可以通过使用 join 语句来实现。你同意吗？

# jquery - 在滚动过程即将结束时慢慢滚动到我的页面顶部

> ID：10714849
> 
> 赞同：0
> 
> 时间：2012-05-23T06:50:54.300
> 
> 标签：jquery

我使用以下 jQuery 脚本成功滚动到页面顶部：

```
$("html, body").animate({ scrollTop: 0 }, "slow"); 
```

但我想让滚动在滚动过程结束时变慢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:55:49.147

```
.animate( properties [, duration] [, easing] [, complete] ) 
```

如您所见，动画有一个缓动选项，这就是您要寻找的。

请参考 jQuery API：[http ://api.jquery.com/animate/](http://api.jquery.com/animate/)

# java - 文件persistence.xml 是必需的吗？

> ID：10714850
> 
> 赞同：8
> 
> 时间：2012-05-23T06:51:01.553
> 
> 标签：java, xml, jakarta-ee, websphere-8, ibm-rad

我的开发环境（IBM RAD 8 + WAS 8）抱怨我的项目没有 persistence.xml 文件。看来我仍然可以构建和运行我的项目。是否需要该文件，如果添加一个这样的文件以使我的项目通过验证，该文件中应该包含什么？

该项目是一个 Web 项目，它使用来自其他项目的会话 bean 和实体 bean，并且这个 persistence.xml 错误是项目中唯一的错误，所以我很乐意摆脱它。

谢谢你的帮助

## 更新

我在我的文件中搜索了 persistence.xml，它显示在 EJB 项目的 src/ 和 bin/ 中，而具有 servlet 和 jsp 的 Web 项目没有 persistence.xml，据我的同事说，Web 项目正在使用持久性。来自 EJB 项目的 xml，即：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="1.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">

    <persistence-unit name="PandoraArendeWeb" transaction-type="JTA">

        <jta-data-source>jdbc/Mainframe_TEST_ADBUTV2</jta-data-source>
        <class>se.prv.pandora.arendeprocess.entity.PRVNummer</class>
        <class>se.prv.pandora.arendeprocess.entity.Ansokan</class>
        <class>se.prv.pandora.arendeprocess.entity.NatAnsokan</class>
        <class>se.prv.pandora.arendeprocess.entity.PctAnsokan</class>
        <class>se.prv.pandora.arendeprocess.entity.ArendePerson</class>
        <class>se.prv.pandora.arendeprocess.entity.Nyregistrering</class>
        <class>se.prv.pandora.arendeprocess.entity.Anstalld</class>
        <class>se.prv.pandora.arendeprocess.entity.Handlaggare</class>
        <class>se.prv.pandora.arendeprocess.entity.OrgElement</class>
        <class>se.prv.pandora.arendeprocess.entity.FysiskHandlaggare</class>
        <class>se.prv.pandora.arendeprocess.entity.AnsvarigHandlaggare</class>
        <class>se.prv.pandora.arendeprocess.entity.AnsvarigFysiskHandlaggare</class>
        <class>se.prv.pandora.arendeprocess.entity.TeknikOmrade</class>
        <class>se.prv.pandora.arendeprocess.entity.Person</class>
        <class>se.prv.pandora.arendeprocess.entity.PRVNummerPerson</class>
        <class>se.prv.pandora.arendeprocess.entity.Notering</class>
        <class>se.prv.pandora.arendeprocess.entity.Lock</class>
        <class>se.prv.pandora.arendeprocess.entity.LandKod</class>
        <class>se.prv.pandora.arendeprocess.entity.ArbetsMomentLog</class>
        <class>se.prv.pandora.arendeprocess.entity.SystemTypDel</class>
        <class>se.prv.pandora.arendeprocess.entity.ArbetsMoment</class>
        <class>se.prv.pandora.arendeprocess.entity.UnderStatus</class>
        <class>se.prv.pandora.arendeprocess.entity.PatPers</class>
        <class>se.prv.pandora.arendeprocess.entity.PrvLandP</class>
        <class>se.prv.pandora.arendeprocess.entity.PkaPerln</class>
        <class>se.prv.pandora.arendeprocess.entity.PctnPerl</class>
        <class>se.prv.pandora.arendeprocess.entity.PersonToPatPersKoppl</class>
        <class>se.prv.pandora.arendeprocess.entity.PRVNummerPersonKoppl</class>
        <class>se.prv.pandora.arendeprocess.entity.Region</class>
        <class>se.prv.pandora.arendeprocess.entity.Historik</class>
        <class>se.prv.pandora.arendeprocess.entity.Egenskap</class>
        <exclude-unlisted-classes>true</exclude-unlisted-classes>

    </persistence-unit>

<!-- <persistence-unit name="PandoraArendeWeb_MSSQL" transaction-type="JTA">

        <jta-data-source>jdbc/MSSQL_TEST_XA</jta-data-source>
        <class>se.prv.pandora.arendeprocess.entity.PersonSearch</class>
        <exclude-unlisted-classes>true</exclude-unlisted-classes>

    </persistence-unit>
 -->    
</persistence> 
```

![在此处输入图像描述](../Images/a23904c3ed2a8e5c1c7d8f9fd60a9293.png)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T06:55:49.367

`persistence.xml`文件通常包含与您的数据库相关的详细信息，例如连接字符串及其各自的用户名和密码，包括其他 ORM 相关信息。这些详细信息可以放置在其他位置，因此您不需要明确拥有一个，尽管拥有这样的文件通常可以使所有与持久性相关的信息都可以在一个位置获得，这使得查找某些设置和配置变得更加容易。

这是一个示例`persistence.xml`文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence 
    xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence 
    http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd"
    version="1.0">
    <persistence-unit name="<PERSISTENCE UNIT NAME>">
        <properties>
            <!--
            <property name="hibernate.ejb.cfgfile" value="/hibernate.cfg.xml"/>
            <property name="hibernate.hbm2ddl.auto" value="create"/>
            -->
            <property name="hibernate.archive.autodetection" value="class, hbm"/>
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
            <property name="hibernate.connection.password" value="<PASSWORD>"/>
            <property name="hibernate.connection.url" value="jdbc:mysql://<HOST IP ADDRESS>/<DB NAME>"/>
            <property name="hibernate.connection.username" value="<USERNAME>"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect"/>
            <property name="hibernate.c3p0.min_size" value="5"/>
            <property name="hibernate.c3p0.max_size" value="20"/>
            <property name="hibernate.c3p0.timeout" value="300"/>
            <property name="hibernate.c3p0.max_statements" value="50"/>
            <property name="hibernate.c3p0.idle_test_period" value="3000"/>
        </properties>
    </persistence-unit>
</persistence> 
```

以上内容取自[这里](http://snipplr.com/view/4450/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-04T04:28:15.637

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">
    <persistence-unit name="AINS" transaction-type="RESOURCE_LOCAL">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>

        <class>com.tridenthyundai.ains.domainobject.AccessoriesDO</class>
        <class>com.tridenthyundai.ains.domainobject.BranchDO</class>
        <class>com.tridenthyundai.ains.domainobject.ContactDO</class>
        <class>com.tridenthyundai.ains.domainobject.CustomerDO</class>
        <class>com.tridenthyundai.ains.domainobject.FinanceDO</class>
        <class>com.tridenthyundai.ains.domainobject.InsuranceDO</class>
        <class>com.tridenthyundai.ains.domainobject.MessageDO</class>
        <class>com.tridenthyundai.ains.domainobject.NotificationDO</class>
        <class>com.tridenthyundai.ains.domainobject.ProductDO</class>
        <class>com.tridenthyundai.ains.domainobject.ProductPriceDO</class>
        <class>com.tridenthyundai.ains.domainobject.ProductSpecDO</class>
        <class>com.tridenthyundai.ains.domainobject.ProductVariantDO</class>
        <class>com.tridenthyundai.ains.domainobject.PurchaseDO</class>
        <class>com.tridenthyundai.ains.domainobject.ServiceCentreDO</class>
        <class>com.tridenthyundai.ains.domainobject.ServiceDO</class>
        <class>com.tridenthyundai.ains.domainobject.ServiceTypeDO</class>
        <class>com.tridenthyundai.ains.domainobject.UserDO</class>
        <class>com.tridenthyundai.ains.domainobject.VisitorDO</class>

        <!-- shouldn't be valid for java SE per specification, but it works for  EclipseLink ... -->
        <exclude-unlisted-classes>false</exclude-unlisted-classes>

        <!-- For Local Testing -->
        <!-- <properties>
            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://saptalabs:3306/tridenthyundai" />
            <property name="javax.persistence.jdbc.user" value="adminuser" />
            <property name="javax.persistence.jdbc.password" value="adminuser" />
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />

            <property name="eclipselink.cache.shared.default" value="false"/>
            <property name="eclipselink.ddl-generation" value="create-tables" />
            <property name="eclipselink.ddl-generation.output-mode" value="database" />
            <property name="eclipselink.logging.level" value="SEVERE" />        
        </properties> -->

        <!-- For Production -->

    </persistence-unit>
</persistence> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-22T14:37:02.897

```
<?xml version="1.0" encoding="UTF-8" ?>
<persistence xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0" xmlns="http://java.sun.com/xml/ns/persistence">
    <persistence-unit name="saptalabs" transaction-type="RESOURCE_LOCAL">
        <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>

        <class>com.sapta.hr.domainobject.UserDO</class>
        <class>com.sapta.hr.domainobject.EmployeeDO</class>
        <class>com.sapta.hr.domainobject.AddressDO</class>
        <class>com.sapta.hr.domainobject.EmpDetailDO</class>
        <class>com.sapta.hr.domainobject.EmpAccDetailDO</class>
        <class>com.sapta.hr.domainobject.ProjectDO</class>
        <class>com.sapta.hr.domainobject.CustomerDO</class>
        <class>com.sapta.hr.domainobject.EmpAssignmentDO</class>
        <class>com.sapta.hr.domainobject.EmpAboutDO</class>
        <class>com.sapta.hr.domainobject.EmpAchievementsDO</class>
        <class>com.sapta.hr.domainobject.EmpEmploymentHistoryDO</class>
        <class>com.sapta.hr.domainobject.EmpSportsDO</class>
        <class>com.sapta.hr.domainobject.EmpCulturalsDO</class>
        <class>com.sapta.hr.domainobject.EmpEducationDO</class>
        <class>com.sapta.hr.domainobject.EmpLanguageKnownDO</class>
        <class>com.sapta.hr.domainobject.EmpReferencesDO</class>
        <class>com.sapta.hr.domainobject.EmpSkillSetDO</class>
        <class>com.sapta.hr.domainobject.EmpFamilyBackgroundDO</class>
        <class>com.sapta.hr.domainobject.AssetDO</class>
        <class>com.sapta.hr.domainobject.AssetTypeDO</class>
        <class>com.sapta.hr.domainobject.EmpCTCDO</class>
        <class>com.sapta.hr.domainobject.ExpenseDO</class>
        <class>com.sapta.hr.domainobject.ExpTypeDO</class>
        <class>com.sapta.hr.domainobject.InvoiceDO</class>
        <class>com.sapta.hr.domainobject.PayrollDO</class>
        <class>com.sapta.hr.domainobject.ProfessionalTaxDO</class>
        <class>com.sapta.hr.domainobject.TDSDO</class>
        <class>com.sapta.hr.domainobject.VendorDO</class>
        <class>com.sapta.hr.domainobject.BillsDO</class>
        <class>com.sapta.hr.domainobject.EmpLoseOfPayDO</class>

        <!-- shouldn't be valid for java SE per specification, but it works for 
            EclipseLink ... -->
        <exclude-unlisted-classes>false</exclude-unlisted-classes>

        <!-- For Local Testing -->
        <properties>
            <property name="javax.persistence.jdbc.url" value="jdbc:mysql://localhost:3306/hrportal" />
            <property name="javax.persistence.jdbc.user" value="root" />
            <property name="javax.persistence.jdbc.password" value="root" />
            <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver" />
            <property name="eclipselink.cache.shared.default" value="false" />
            <property name="eclipselink.ddl-generation" value="create-tables" />
            <property name="eclipselink.ddl-generation.output-mode"
                value="database" />
            <property name="eclipselink.logging.level" value="SEVERE" />
        </properties>
    </persistence-unit>
</persistence> 
```

# html - Symfony2 - 渲染模板时获取外部内容

> ID：10714855
> 
> 赞同：3
> 
> 时间：2012-05-23T06:51:20.577
> 
> 标签：html, templates, symfony

Symfony2 的初学者，所以也许这是一个愚蠢的问题。

我需要获取 HTTP 查询（外部服务器）的响应并将其放在模板上，然后再将其发送到客户端。

像

```
<div id="main_content">
  Lorem Ipsum
  <div id="external_content">
    {% get_content_by_url 'http://external.com/uri' params_object %}
  </div>
</div> 
```

或者也许我应该从控制器获得响应并将其作为变量传递给模板？

最佳做法是什么（或者我是完全错误的方式:)？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T07:44:18.670

你可以使用[这个包](http://knpbundles.com/sonata-project/SonataGoutteBundle)

在您的控制器中输入此代码后：

```
$crawler = $client->request('GET', 'http://symfony-reloaded.org/');
$response = $client->getResponse();
$content = $response->getContent(); 
```

最后在文件 twig 中：

```
<div id="main_content">
    Lorem Ipsum
<div id="external_content">
    {{ content  }}
</div>
</div> 
```

# java - AudioInputStream 到缓冲区

> ID：10714857
> 
> 赞同：0
> 
> 时间：2012-05-23T06:51:28.937
> 
> 标签：java

我正在开发一个 Web 应用程序，其中我使用[flash 插件](http://www.sajithmr.me/jrecorder/example1.html)从麦克风录制声音。录制完成后，我可以将录制的文件上传到服务器。请看下面的代码：

```
 // Get the input stream
            InputStream is = request.getInputStream();
            InputStream bufferedIn = new BufferedInputStream(is);
            AudioInputStream ais = AudioSystem.getAudioInputStream(bufferedIn);

            // Declare the new format to convert to
            AudioFormat audioFormat =  new AudioFormat(sampleRate, sampleSizeInBits, channels, signed, bigEndian);

            // Convert the format and return the new audio input stream
            ais = AudioSystem.getAudioInputStream(audioFormat, ais); 
```

现在，在此转换之后，我想将 ais 中的音频数据保存到缓冲区中并将其上传到数据库。

我怎么做？谢谢！！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:03:16.760

`AudioInputStream`extends `InputStream`，因此您可以直接使用它来存储到数据库中。使用 JDBC 时，您可以使用：

```
ais = AudioSystem.getAudioInputStream(audioFormat, ais);
PreparedStatement prep = conn.prepareStatement("insert into data values(?, ?)");
prep.setInt(1, 1);
prep.setBinaryStream(2, ais); 
```

请注意`setBinaryStream`，没有长度参数仅在 Java 6 和更新版本中可用。有些数据库可能不支持它。

# knockout.js - 在 Knockout.js 数据绑定上添加静态文本

> ID：10714866
> 
> 赞同：12
> 
> 时间：2012-05-23T06:52:00.290
> 
> 标签：knockout.js

是否可以使用以下示例将静态文本添加到数据绑定：

```
<p data-bind="text:someProperty"></p> 
```

我想添加如下静态文本：

```
<p data-bind="text:' + $' + someProperty"></p> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T06:56:28.047

您不能将静态文本连同跨度标签和跨度上的数据绑定一起放在段落标签内吗？

```
<p>text: <span data-bind="[whatever]" /></p> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-05-03T18:05:26.463

这是上面对伊姆兰评论的解释，这是一个很好的答案

您的`text:`表达式通常包含在 ko.utils.unwrapObservable 调用中：

```
ko.utils.unwrapObservable(someProperty) 
```

但是当您使用更复杂的表达式时，隐式展开不起作用：

```
ko.utils.unwrapObservable(' + $' + someProperty) // won't find an observable; won't unwrap 
```

所以你必须自己打开它：

```
' + $' + ko.utils.unwrapObservable(someProperty) // good 
```

或者因为你知道它是一个可观察的，你可以简单地使用 Imran 的版本：

```
' + $' + someProperty() // good, if someProperty is definitely an observable 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-15T19:39:54.410

我来晚了，（并且是 Knockout 的新手），但这是我用来在可观察对象周围添加静态文本的另一个选项。就我而言，我想在从下拉列表中选择的值周围添加括号。

**javascript**

```
...
return function AppViewModel() {
    this.myOptionValues = ko.observableArray([
        { label: "Foo", value: "Bar" },
    ]);

    this.mySelectedValue = ko.observable();

    this.myValue = ko.computed(function () {
        return this.mySelectedValue() ? '(' + this.mySelectedValue().label + ')' : '';
    }, this);
};
... 
```

**html**

```
<small data-bind="text: myValue"></small> // (Foo) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-08T09:48:49.393

最好的办法是在 viewModel 中创建一个新的 Computed 并将文本绑定到它。计算出来的 concats 你需要的 observable 和静态文本。这就是它的样子

```
var myViewModel = {
   ...
   var self= this;
   self.myObservable = ko.observable('some value here');
   self.myComputed = ko.pureComputed(function(){
       return 'some text here' + self.myObservable() + 'you can use other text here';
   });
   ...
} 
```

然后，在您的 HTML 中简单地使用计算的 observable。

```
<p data-bind="text: myComputed"></p> 
```

如果你想要灵活性，你可以为计算的 obs 使用参数并将它们传递给 hmtl 绑定

```
self.myComputed2 = ko.pureComputed(function(param1) {
   return param1 + self.myObservable;
} 
```

并在 html

```
<p data-bind="text: myComputed2("somestring")"></p> 
```

# jquery - 如何在 jQuery Mobile (iOS) 中禁用锚点的默认行为

> ID：10714868
> 
> 赞同：11
> 
> 时间：2012-05-23T06:52:02.587
> 
> 标签：jquery, jquery-mobile, cordova

我正在使用 PhoneGap 和 jQM 为 iPhone 和 iPad 构建应用程序

```
<div class="ui-block-a">
   <a id="btnLink" href="#pageID" data-role="button"></a>
</div> 
```

它运行良好，但是当我在设备上运行它（没有尝试模拟器）并长按时，我会在普通浏览器中获得默认的 iPhone 菜单以打开或复制链接。

如何在我的应用中禁用此默认功能？

我尝试了这些但没有成功：

```
$("a").click(function(event) {
  event.preventDefault(); // long press menu still apear
});

$("a").bind('click',function(event) {
console.log(['preventingclick',event.type]);
event.preventDefault(); // long press menu still apear
}); 
```

如果我在“taphold”上绑定，我仍然会在长按时看到菜单，但是在单击取消后，我会看到控制台日志：[“preventing long press”，“taphold”]

```
$("a").bind('taphold', function(event) {
console.log(['preventing long press',event.type]);
event.preventDefault(); // long press menu still apear
}); 
```

如果我在这样的“taphold”事件中使用委托：

```
$("a").delegate('taphold', function(event) {
console.log(['preventing long press',event.type]);
event.preventDefault();
}); 
```

将解决问题，但我不能再附加任何事件，所以在那之后我的按钮都不会起作用。

```
$('#btnLink').bind("click", function() {
$.mobile.changePage('mypage', 'slide'); // won't fire any more because of the delegate before
}); 
```

我知道委托将适用于现在和将来的所有元素，但我认为我已经接近答案，但还没有。

提前致谢

![在 iPhone 上锚定长按菜单](../Images/c646bc8ad46efb947b0dd29cc221d447.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T16:59:47.960

好的，让它工作，

我不得不将代码修复、CSS 和 JavaScript 结合起来

所以在我的CSS中我这样做了：

```
body { -webkit-touch-callout: none !important; }
a { -webkit-user-select: none !important; } 
```

在我的 JavaScript 中这样做了：

```
function onBodyLoad() {
  $("a").bind('taphold', function(event) {
  event.preventDefault();
 });
} 
```

现在所有的链接都被禁用了，但是如果我将一个事件附加到其中的任何一个上，它就可以正常工作

谢谢大家

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-23T08:17:54.493

在此处查看 JQM 触发的事件[http://jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)。您想处理“taphold”事件。

**编辑** 发布后不久，我最终在我的应用程序中看到了同样的问题！我发现添加这种风格，类似于@chrisben 建议的修复它：

```
body {
    -webkit-touch-callout: none !important;
} 
```

我的应用程序上没有任何表单元素，所以我不知道这些，但链接和按钮在添加了这种样式后都可以正常工作。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-23T07:52:32.030

当您执行 $('a').click( .. ) 时，您只是在处理 'click' 事件。这是一个不同的事件，实际上是 iOS 的系统事件，您无法在 javascript 中处理。

因此，如果您不想要它，您必须从您的 web 应用程序中完全禁用此功能。

尝试以下操作：

```
<script>
document.documentElement.style.webkitTouchCallout = 'none';
</script> 
```

或者在你的 CSS 中：

```
a[data-role=button] {
    -webkit-user-select: none!important;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-17T16:33:03.913

让它在 iPhone 上工作的最简单方法是禁用 webkit 触摸样式：

```
document.getElementById('your element id').style.webkitTouchCallout = 'none'; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-10-28T14:27:56.577

```
<style type="text/css">
 *:not(input):not(textarea) {
 -webkit-user-select: none; /* disable selection/Copy of UIWebView */
 -webkit-touch-callout: none; /* disable the IOS popup when long-press on a link */
}       
</style>

**If you want Disable only anchor button tag use this.**
 a {-webkit-user-select: none; /* disable selection/Copy of UIWebView */
  -webkit-touch-callout: none; /* disable the IOS popup when long-press on a link */
 } 
```

# jquery - 关闭时清除 jquery 对话框内容

> ID：10714869
> 
> 赞同：1
> 
> 时间：2012-05-23T06:52:03.253
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog, jquery-ui-tabs

当我单击页面中的链接时，我正在打开一个 jquery 对话框（如果它尚未打开）并在其中添加一个 jquery ui 选项卡。**[从这里](http://jsfiddle.net/AeXNP/30/)**跟随的例子

但是当我关闭我的 jquery 对话框并重新打开它时，之前打开的选项卡会显示出来。当我关闭并重新打开对话框时，我希望 jquery 对话框中没有选项卡，这样我就可以在对话框中添加一个新选项卡。

**这是我的 jquery 文档中准备好的代码：**

```
<script type="text/javascript">
var tab_counter = 1;

$(document).ready(function() {
var $tabs_example_1 = $('#example_1').tabs();

$('#addUiTab').click(function(){
        var label = 'Tab'+tab_counter,
        content = '<span id="tab">This is a sample tab content</span>';

        $('body').append('<div id="tab_'+tab_counter+'">'+content+'</div>');
        $tabs_example_1.tabs('add','#tab_'+tab_counter,label);
        tab_counter++;

        return false;
    });
});
</script> 
```

**这是我的功能，当我单击页面中的链接时，它会打开一个对话框（如果尚未打开）并在其中添加一个选项卡：**

```
function open_dialog()
{
    if(($("#jdialog_box_content").dialog( "isOpen" ) === true) == false)
    {
        $('#jdialog_box_content').dialog({
        open: function(event, ui) {  },
        close: function(event, ui) {  },
        autoResize: false,
        width: 460,
        height: 230,
        closeOnEscape: false,
        title: 'Dialog1'
        });
    }

    $('#addUiTab').trigger("click");
} 
```

**最后这是用于 jquery 选项卡的 html，在 jquery 对话框中：**

```
<div id="jdialog_box_content" style="display:none;">    
    <div id="example_1" class="tabs">
        <ul>
            <li><a href="#tabs-1-2">Tab 1</a></li>
            <li><a href="#tabs-2-2">This is tab 2</a></li>
            <li><a href="#tabs-3-2">This is tab number 3</a></li>           
        </ul>
        <div id="tabs-1-2">Tab 1<br>Lorem ipsum dolor sit amet</div>
        <div id="tabs-2-2">This is tab 2<br>Lorem ipsum dolor sit amet</div>
        <div id="tabs-3-2">This is tab 3<br>Lorem ipsum dolor sit amet</div>
    </div>
</div> 
```

我只是想知道如何在重新打开 jquery 对话框时删除现有选项卡。

**注意：**我[在这个站点上](http://jquery.aamirafridi.com/jst/#examples)关注 jquery ui 选项卡的示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T06:56:06.393

您需要`close: function(event, ui) { $("#jdialog_box_content").html(""); }`在对话框声明中。如果您不需要空对话框并且没有选项卡，您可以这样做：

```
$('#jdialog_box_content').dialog({
        open: function(event, ui) {  },
        close: function(event, ui) {
            var $tabs = $('#example_1');
            var l = $tabs.tabs('length');
            while(l)
            {
               $tabs.tabs('remove', l-1);                       
               l = $tabs.tabs('length');
            }

        },
        autoResize: false,
        width: 460,
        height: 230,
        closeOnEscape: false,
        title: 'Dialog1'
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:41:30.847

谢谢，我还可以在 jquery 对话框的关闭事件下使用 for 循环代码来关闭所有打开的选项卡：

```
close: function(event, ui) 
{ 
    for (var i = $('#example_1').tabs('length') - 1; i >= 0; i--) {
    $('#example_1').tabs('remove', i);                  
    }
} 
```

# extjs - 如何从 extjs 中的一个商店创建两个组合框？

> ID：10714876
> 
> 赞同：6
> 
> 时间：2012-05-23T06:52:23.720
> 
> 标签：extjs, extjs4.1

如何从一个商店添加两个组合框具有`type`字段女巫值可以是`1, 2 and 3`我想要`1 and 2`在第一个组合框和`2 and 3`第二个组合框中键入的记录。

**我的组合框：**

```
Ext.define('Exp.view.settings.servers.ComboBox', {
    extend: 'Ext.form.ComboBox',
    alias : 'widget.server_combobox',

    xtype: 'combobox',
    displayField: 'name',
    valueField: 'id',
    name: 'server',
    store: 'Servers'
}); 
```

**存储：（**只是来自带有 json 阅读器的服务器的示例数据）

```
Ext.define('Exp.store.Servers', {
    extend: 'Ext.data.Store',
    model: 'Exp.model.Server',

    autoLoad: true,
    autoSync: true,

    data: [{
        id: 1,
        name: 'Server 1',
        type: 1
    },{
        id: 2,
        name: 'Server 2',
        type: 3
    },{
        id: 3,
        name: 'Server 3',
        type: 2
    }]
}); 
```

如果我使用商店过滤器，两个组合框都会被过滤。现在我创建了两个商店，但这意味着对服务器的两个 ajax 调用，我不太喜欢这样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T12:00:47.147

答案是否定的，你不能。如果您需要来自同一商店的两组不同的数据同时反映在任何两个 UI 元素中（两个网格或两个组合或其他），您需要创建商店的副本。

您可以克隆它，甚至可以创建更简单的模型（例如，组合框只需要值和名称），但没有办法绕过它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:11:40.237

我认为过滤器将是最干净的方式。这只是当地的例子。没有使用应用程序结构。 [http://jsfiddle.net/ssxenon01/WpZMU/](http://jsfiddle.net/ssxenon01/WpZMU/)

# html - 无法在 Firefox 和 IE 中将框架高度设置为 100%

> ID：10714882
> 
> 赞同：2
> 
> 时间：2012-05-23T06:52:52.943
> 
> 标签：html, firefox, iframe, height

这应该是一件简单的事情，但即使在互联网上进行了 3 个小时的广泛研究后，我也无法找到解决方案。这是我的问题：我使用 Wordpress 作为 CMS。（无论如何，我认为这对我来说并不重要）。我想在 wordpress 页面中使用 iframe。好的。框架的高度在 CSS 和

这就像 Chrome 上的魅力，但框架在 Firefox 和 IE 中显示滚动条，并且高度仅为 250 px。我在这个论坛上搜索过，这里和互联网上的大多数人都提出了这个解决方案：

```
html, body,iframe { margin:0; padding:0; height:100%; min-height: 100% } 
```

也适用于 iframe：

```
.forms
{
width:100%;
min-height:100% !important;
display:block;} 
```

这没有用。所以我也尝试了其他的东西：比如溢出：隐藏（这不会显示整个帧）。我还尝试在 iframe 上使用 Jquery 调整大小功能。那也没有用。我还尝试了此处发布的 JS 解决方案：http: [//yysource.com/2011/08/source-code-iframe-with-100-height/](http://yysource.com/2011/08/source-code-iframe-with-100-height/)

但这也没有用。所以现在我筋疲力尽，在这里发布我的问题，希望这里有人可以帮助我。这是我使用 iframe 的页面：http: [//motushealth.com/mytip/](http://motushealth.com/mytip/)

谢谢，艾哈迈尔。

注意：我也尝试过`postion:fixed`使用 CSS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:32:55.727

我尝试了两件事。第一的

```
html, body, iframe {
height: 100%; // remove this line
margin: 0;
min-height: 100%;
padding:0;} 
```

第二，

```
<iframe height="450" frameborder="0" class="forms" onload="resize_iframe()" id="glu" style="border:0px;" src="/form1.html"> 
```

我将高度从 900 更改为 450。

# matlab - MATLAB 神经网络模式识别

> ID：10714895
> 
> 赞同：3
> 
> 时间：2012-05-23T06:54:19.140
> 
> 标签：matlab, neural-network

我已经为鼠标手势识别制作了简单的神经网络（输入是角度），并且我使用了 nprtool（用于创建的函数 patternnet）。我保存了网络的权重和偏差：

```
W1=net.IW{1,1};
W2=net.LW{2,1};
b1=net.b{1,1};
b2=net.b{2,1}; 
```

为了计算结果，我使用`tansig(W2*(tansig(W1*in+b1))+b2);` where`in`是输入。但结果很糟糕（每个数字大约等于 0.99）。推荐的输出`net(in)`很好。我究竟做错了什么 ？为什么第一种方法不好（与我在 C++ 程序中所做的一样）对我来说非常重要。我正在寻求帮助:)

[编辑] 下面是从`nprtool GUI`. 也许对某人来说这会有所帮助，但我没有从这段代码中看到我的问题的任何解决方案。对于隐藏层和输出层，神经元使用 tansig 激活函数（MATLAB 网络中是否有任何参数？）。

```
% Solve a Pattern Recognition Problem with a Neural Network
% Script generated by NPRTOOL
% Created Tue May 22 22:05:57 CEST 2012
%
% This script assumes these variables are defined:
%
%   input - input data.
%   target - target data.    
inputs = input;
targets = target;

% Create a Pattern Recognition Network
hiddenLayerSize = 10;
net = patternnet(hiddenLayerSize);

% Choose Input and Output Pre/Post-Processing Functions
% For a list of all processing functions type: help nnprocess
net.inputs{1}.processFcns = {'removeconstantrows','mapminmax'};
net.outputs{2}.processFcns = {'removeconstantrows','mapminmax'};

% Setup Division of Data for Training, Validation, Testing
% For a list of all data division functions type: help nndivide
net.divideFcn = 'dividerand';  % Divide data randomly
net.divideMode = 'sample';  % Divide up every sample
net.divideParam.trainRatio = 70/100;
net.divideParam.valRatio = 15/100;
net.divideParam.testRatio = 15/100;

% For help on training function 'trainlm' type: help trainlm
% For a list of all training functions type: help nntrain
net.trainFcn = 'trainlm';  % Levenberg-Marquardt

% Choose a Performance Function
% For a list of all performance functions type: help nnperformance
net.performFcn = 'mse';  % Mean squared error

% Choose Plot Functions
% For a list of all plot functions type: help nnplot
net.plotFcns = {'plotperform','plottrainstate','ploterrhist', ...
  'plotregression', 'plotfit'};

% Train the Network
[net,tr] = train(net,inputs,targets);

% Test the Network
outputs = net(inputs);
errors = gsubtract(targets,outputs);
performance = perform(net,targets,outputs)

% Recalculate Training, Validation and Test Performance
trainTargets = targets .* tr.trainMask{1};
valTargets = targets  .* tr.valMask{1};
testTargets = targets  .* tr.testMask{1};
trainPerformance = perform(net,trainTargets,outputs)
valPerformance = perform(net,valTargets,outputs)
testPerformance = perform(net,testTargets,outputs)

% View the Network
view(net)

% Plots
% Uncomment these lines to enable various plots.
%figure, plotperform(tr)
%figure, plottrainstate(tr)
%figure, plotconfusion(targets,outputs)
%figure, ploterrhist(errors) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T20:40:14.947

从您的代码中可以看出，网络应用自动预处理输入和目标后处理 - 查找定义`processFcns`. 这意味着经过训练的参数对预处理的输入有效，并且网络的输出经过后处理（与目标具有相同的参数）。因此，在您的行中，`tansig(W2*(tansig(W1*in+b1))+b2);`您不能使用原始输入。您必须预处理输入，将结果用作网络的输入，并使用用于后处理目标的相同参数对输出进行后处理。只有这样你才能得到与调用相同的结果`net(in)`。

你可以在这里阅读更多：http: [//www.mathworks.com/help/toolbox/nnet/rn/f0-81221.html#f0-81692](http://www.mathworks.com/help/toolbox/nnet/rn/f0-81221.html#f0-81692)

# jquery - 如何隐藏 jQuery bValidator 错误消息

> ID：10714899
> 
> 赞同：0
> 
> 时间：2012-05-23T06:54:42.207
> 
> 标签：jquery, validation

我在我的网站上使用 bValidator 插件，我想执行以下操作：
显示错误消息后，如果我单击输入元素（仅文本字段）隐藏错误消息，并且仅在焦点丢失时再次显示它仍然是错误的。第二部分还可以，只是参数设置，但我无法让第一部分工作。

我像这样使用 onBeforeElementValidation ：

```
 var options = {
            lang: 'hu',
            classNamePrefix: 'bvalidator_red_',
            validateOn: 'blur',
            errorValidateOn: 'null',
            onBeforeElementValidation : function(element){
                console.log(element);
                 $("#contact").data('bValidator').removeMsg(element);
            }
        }; 

$("#contact").bValidator(options); 
```

我在控制台中看到了输入元素，而 $("#contact") 是表单选择器。
如果我想为多个表单使用相同的选项，并且我想在每个表单中隐藏错误消息，我应该如何替换 $("#contact") 选择器？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T06:47:16.510

```
$('#contact').focus(function(){
    $('selector-for-the-error-message').hide();
}); 
```

涵盖你的第一个问题。否则，我写的一个例子（尽管使用另一个插件）与你描述的完全一样：http: [//jsfiddle.net/ahaTs/1/](http://jsfiddle.net/ahaTs/1/)

你的第二个问题：那怎么办：

```
$("#contact").bValidator(options);
$("#contact-two").bValidator(options); 
```

# jquery - jquery选择父节点

> ID：10714900
> 
> 赞同：1
> 
> 时间：2012-05-23T06:54:46.863
> 
> 标签：jquery

从触发事件的元素中查找表单元素。我使用以下代码。但这对我来说似乎很疯狂。

有没有更好的方法来做到这一点？

```
$("#xx").click(function(event) {
    var testValue = $(this).parent().parent().parent().parent().parent().parent().parent().data("test");
}); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T06:55:40.613

疯子是对的。:D

`$(this).closest('#firstForm')`应该为你做这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:58:57.747

如果您的 HTML 有效，那么只需执行

```
$("#firstForm") 
```

id 是唯一的（假设 HTML 有效）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:00:10.550

```
$("#xx").click(function(event) {
    $(this).parents('#YourId').attr("firstForm");
}); 
```

供参考，请参阅此链接：[http ://api.jquery.com/parents/](http://api.jquery.com/parents/)

# windows - 循环通过带有批处理 - 换行问题的 CSV 文件

> ID：10714901
> 
> 赞同：1
> 
> 时间：2012-05-23T06:54:49.077
> 
> 标签：windows, batch-file, cmd

这是对另一个问题的扩展（[循环通过带有批处理的 CSV 文件 - 空间问题](https://stackoverflow.com/questions/10685599/loop-through-csv-file-with-batch-space-issue/10686203#comment13908064_10686203)）

我有这样的csv文件内容

```
name,sex,age,description,date
venu,m,16,test mesg,2012-05-01
test,f,22,"He is good guy
and
brilliant",2012-05-01 
```

我正在使用这个命令循环这个文件。

```
For /F "usebackq tokens=1-3 delims=" %%x in (test.csv) Do ( 
```

但是由于第二行有换行符，即使文件中有两条记录，我也会得到 3 条记录。

如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T11:35:27.847

主要问题似乎是计算一行中的引号。
如果引号的数量是奇数，那么您需要附加下一行并再次计算引号。

如果您不遍历所有字符，则对字符串中的字符进行计数有点棘手。
我在这里使用了延迟缩减技术，每个引号将被有效地替换为 a`+1`并且所有其他字符都被删除。
为了以正确的方式开始和终止行，开头总是有一个额外`+1`的，这将由`-1`前面的 a 补偿。

主要技巧是`+1`通过将每个引号替换为`!!#:#=`.
这`!#:#=...<some text>...!`将始终扩展为`+1`，因为变量的内容`#`是，因此无法找到`+1`搜索模式。 其他替换只是为了避免文本中出现感叹号和插入符号的问题。 `#`

```
:::::::::::::::::::::::::::::::::::::::::::
:CountQuotes <stringVar> <result>
setlocal EnableDelayedExpansion
set "line=!%~1!"
set "#=+1"

rem DelayedExpansion: double all quotes
set "line=!line:"=""!"

rem DelayedExpansion: remove all carets ^
set "line=!line:^=!"

rem PercentExpansion: Remove all !
set "line=%line:!=%"

rem PercentExpansion: Replace double quotes to !!#:#=
set "line=-1^!#:#=%line:""=^!^!#:#=%"

for /F "delims=" %%X in ("!line!") do (
    set /a count=%%X!
)

(
    endlocal
    set %~2=%count%
    exit /b
) 
```

以及添加行和插入换行符的逻辑

```
@echo off
setlocal DisableDelayedExpansion
set "lastLine="
set LF=^

rem Two empty lines
for /F "delims=" %%A in (test.csv) do (
    set "line=%%A"
    setlocal EnableDelayedExpansion
    set "line=!line:\=\x!"
    if defined lastLine (
        set "line=!lastLine!\n!line!"
    )

    call :CountQuotes line quoteCnt
    set /a rest=quoteCnt %% 2
    if !rest! == 0 (
        for %%L in ("!LF!") DO set "line=!line:\n=%%~L!"
        set "line=!line:\\=\!"
        echo Complete Row: !Line!
        echo(
        set "lastLine="
    ) ELSE (
        set "lastLine=!line!"
    )

    for /F "delims=" %%X in (""!lastLine!"") DO (
        endlocal
        set "lastLine=%%~X"
    )
)
exit /b

:::::::::::::::::::::::::::::::::::::::::::
:CountQuotes <stringVar> <result>
setlocal EnableDelayedExpansion
set "line=!%~1!"
set "#=+1"

rem DelayedExpansion: double all quotes
set "line=!line:"=""!"

rem DelayedExpansion: remove all carets ^
set "line=!line:^=!"

rem PercentExpansion: Remove all !
set "line=%line:!=%"

rem PercentExpansion: Replace double quotes to !!#:#=
set "line=-1^!#:#=%line:""=^!^!#:#=%"

for /F "delims=" %%X in ("!line!") do (
    set /a count=%%X!
)

(
    endlocal
    set %~2=%count%
    exit /b
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T03:01:16.033

下面的批处理文件做你想做的事：

```
@echo Off
setlocal EnableDelayedExpansion

call :processFile < test.csv
goto :EOF

:processFile
   set line=
   set /P line=
   if not defined line exit /b
   set "line=!line:,,=,@,!"
   for %%a in (name sex age description mydate) do set %%a=
   for %%a in (!line!) do (
      if not defined name (
         set "name=%%a"
      ) else if not defined sex (
         set "sex=%%a"
      ) else if not defined age (
         set "age=%%a"
      ) else if not defined description (
         set "description=%%a"
      ) else if not defined mydate (
         set "mydate=%%a"
      )
   )
   :checkDate
   if defined mydate goto show
      set /P line=
      for /F "tokens=1* delims=," %%a in ("!line!") do (
         set "description=!description! %%a"
         set "mydate=%%b"
      )
   goto checkDate
   :show
   for %%a in (name sex age description mydate) do set /P "=%%a=!%%a!, " < NUL
   echo/
goto processFile 
```

我添加了您在上一个主题中要求的要求，即性别可以为空（并且由@​​字符更改，正如我在对该主题的回答中所解释的那样），并且名称可能包含逗号。我用这个数据文件测试了程序：

```
name,sex,age,description,date
venu,m,16,"test mesg",2012-05-01
test,,22,"He is good guy
and
brilliant",2012-05-01
"venu,gopal",m,16,"Another
multi-line
description",2012-05-02 
```

并得到这些结果：

```
name=name, sex=sex, age=age, description=description, mydate=date,
name=venu, sex=m, age=16, description="test mesg", mydate=2012-05-01,
name=test, sex=@, age=22, description="He is good guy and brilliant", mydate=2012-05-01,
name="venu,gopal", sex=m, age=16, description="Another multi-line description", mydate=2012-05-02, 
```

请注意，任何包含逗号*或空格*的字段都必须用引号引起来。

# iphone - UIView 动画的问题

> ID：10714903
> 
> 赞同：2
> 
> 时间：2012-05-23T06:54:59.500
> 
> 标签：iphone, ios, core-graphics, uiviewanimation, cgaffinetransform

我正在我的视图上执行动画。但我面临的问题很少。我必须按钮`startAnimation`和`Stop Animation`。为了在我的 imageview 上执行动画，我在`startAnimation`按钮的操作中使用了以下代码：

```
 UIViewAnimationOptions option = UIViewAnimationOptionRepeat + UIViewAnimationOptionAutoreverse;
[UIView animateWithDuration:2.5 delay:0.0 options:option
                 animations:^{
                     CGAffineTransform scale = CGAffineTransformMakeScale(2.0, 2.0);
                     CGAffineTransform translate = CGAffineTransformMakeTranslation(-50.0, -100.0);
                     CGAffineTransform mix = CGAffineTransformConcat(scale, translate);
                     imv.transform = mix; 
                 } 
                 completion:^(BOOL finished) {

                 }
 ]; 
```

这是有效的。现在我面临的问题是：

1.  如何在我的 stopAnimation 按钮的操作上停止此动画？
2.  如果 ImageView 是动画，然后我进入背景，我再次进入前景 ImageView 粘在那里并且不动画。

如何解决这些问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T07:07:35.887

在您的 stopAnimation 按钮上，您需要从 UIView 的图层中删除动画。首先你必须导入 Quartzcore.framework。

```
#import <QuartzCore/QuartzCore.h>

[yourView.layer removeAllAnimations]; 
```

至于您在进入后台并返回前台时暂停动画的其他问题，没有办法“暂停”动画。您最好的选择是通过`restarting`动画手动处理这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:09:17.380

要停止动画，您可以使用

```
#import <QuartzCore/QuartzCore.h>
...

[imv.layer removeAllAnimations]; 
```

至于使动画重新启动，这是一个复杂的问题，答案取决于您希望应用程序在恢复时执行的操作。一种可能的答案是跟踪您将 ImageView 设置为动画的位置，然后在 ApplicationDidEnterBackground 中，您可以取消所有动画并将其移动到那里。然后，当您恢复时，它将位于正确的位置。

如果您真的想继续动画，我会阅读其他一些 Stack Overflow 答案，看看是否有帮助。

[当应用程序从后台恢复时恢复动画停止的地方](https://stackoverflow.com/questions/7568567/restoring-animation-where-it-left-off-when-app-resumes-from-background)

[iOS，从后台出来时重新启动动画](https://stackoverflow.com/questions/6042472/ios-restarting-animation-when-coming-out-of-the-background)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-25T12:07:54.990

为了进一步参考，对于您响应的第二部分，您必须在执行任何操作之前将矩阵恢复为单位：

```
imv.transform = CGAffineTransformIdentity; 
```

# c++ - '...' 不是类型 c++ 编译错误

> ID：10714908
> 
> 赞同：2
> 
> 时间：2012-05-23T06:55:13.947
> 
> 标签：c++, compiler-errors, g++

我正在为作业编写一个小游戏，它需要使用地图，我已成功将地图放入二维数组，但现在进一步研究作业，我发现我需要在另一个函数中访问数组 Map[][] . 我试图让它工作但失败了。我用 g++ 得到的错误是“错误：'地图'不是类型”任何帮助将不胜感激。

我已经搜索过，但要么我不擅长使用搜索引擎，要么找不到任何特定于此错误的内容。

```
const int MapSZ = 10; //In Global
int Map[MapSZ][MapSZ]; // Also Global

void GetMap(ifstream&, int); //Getting the map (Proto)

GetMap(fin, Map[MapSZ][MapSZ]); //In the main function.

void GetMap(ifstream& fin, Map[MapSZ][MapSZ]) //Inserting the map into an array 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T06:56:37.417

```
void GetMap(ifstream& fin, Map[MapSZ][MapSZ]) 
```

应该：

```
void GetMap(ifstream& fin, int Map[MapSZ][MapSZ]) 
                           ^^^^ 
```

请注意，这`Map`是数组的*名称*，但您没有提及它的*type*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T08:33:36.003

如果`Map[MapSZ][MapSZ]`定义为全局，如您的评论所述（即它定义在主函数中`main.cpp`但在主函数之外），则无需将其作为参数传递给`GetMap`. 你可以简单地做类似的事情

```
void GetMap(ifstream& fin); //proto

int main(int argc, const char * argv[]) {
    GetMap(fin);
}

void GetMap(ifstream& fin) {
    //some code that uses Map[MapSZ][MapSZ]
} 
```

# android - AlertDialog 的项目未显示

> ID：10714911
> 
> 赞同：52
> 
> 时间：2012-05-23T06:55:24.077
> 
> 标签：android, android-alertdialog

我`AlertDialog`用 an创建一个`AlertDialog.Builder`并用`setItems()`. 显示对话框，但我看不到任何项目。我看到的只是消息。

```
final CharSequence[] items = {"Red", "Green", "Blue"};

AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(activity);
dialogBuilder.setMessage("Pick a color");
dialogBuilder.setItems(items, new DialogInterface.OnClickListener() {        
    public void onClick(DialogInterface dialog, int which) {
        // Do anything you want here
    }    
});

dialogBuilder.create().show(); 
```

如果我设置`PositiveButton`，我可以看到那个按钮就好了。我也尝试过设置`MultiChoiceItems`，`SingleChoiceItems`但这些都不起作用。

* * *

## 回答 #1

> 赞同：184
> 
> 时间：2012-05-23T07:09:56.433

使用`setTitle`而不是`setMessage`设置消息正文并覆盖项目列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:19:54.883

你为什么不去`setTitle`代替`setMessage`呢？尝试使用`setTitle("Pick a color")`.

我希望它会帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-25T19:12:08.093

尝试`alertDialogBuilder.setCustomTitle(view)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-05T11:49:29.503

如果你想设置消息**和**项目，只需使用`setCustomTitle()`这样的`TextView`：

```
dialogBuilder.setCustomTitle(TextView(context).apply {
    setPadding(
       16.dpToPx().toInt(),
       16.dpToPx().toInt(),
       16.dpToPx().toInt(),
       0
    )
    setText(it.message)
    setTextColor(Color.BLACK)
    textSize = 18f
})
dialogBuilder.setItems(...) 
```

请注意，您不能以这种方式设置标题，但您当然可以创建自定义标题布局，支持同时设置标题**和**消息。

`dpToPx()`只是一个简单的转换扩展功能，不在您的问题范围内，但为了完整起见：

```
@JvmOverloads
@Dimension(unit = Dimension.PX)
fun Number.dpToPx(
    metrics: DisplayMetrics = Resources.getSystem().displayMetrics
): Float {
    return toFloat() * metrics.density
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T07:11:54.667

使用下面的代码： -

```
final CharSequence[] items = {"Red", "Green", "Blue"};
AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(activity);
dialogBuilder.setTitle("Pick a color");
dialogBuilder.setItems(items, new DialogInterface.OnClickListener() {

    public void onClick(DialogInterface dialog, int which) {
        // Do anything you want here
    }

});
dialogBuilder.create().show(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T07:16:05.723

试试这个

```
final CharSequence[] items = {"Red", "Green", "Blue"};
AlertDialog.Builder dialogBuilder = new AlertDialog.Builder(activity);
dialogBuilder.setTitle("Pick a color");
dialogBuilder.setSingleChoiceItems(items,-1, new DialogInterface.OnClickListener()
@Override
public void onClick(DialogInterface dialog, int which) 
{
}
});
dialogBuilder.show(); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-11T21:20:59.083

如果您使用的是资源字符串数组，则必须包含资源打包。context().getResources().getStringArray(R.array.items);

我的列表没有通过使用 R.array.items 显示，直到我给指针上下文和资源打包。

祝你好运！

# java - 试图在android中开发滑动抽屉式视图？

> ID：10714917
> 
> 赞同：0
> 
> 时间：2012-05-23T06:55:42.970
> 
> 标签：java, android, slidingdrawer

我正在开发一个应用程序，该应用程序需要我进行如下布局：

![在此处输入图像描述](../Images/5dce1a68847b54ddc882f48673c78dfb.png)

在这里，您可以在右下角看到一个类似视图的黑色按钮。我希望此按钮用作滑动抽屉式视图。

当我拖动此按钮时，会发生这种情况：

![在此处输入图像描述](../Images/46537669c62cdd87c3460cf3d4c3d1f5.png)

我怎么能实现这个。请有人帮我解决这个问题。

我可以从哪里开始（请提供一些指向源或示例的链接）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:02:59.113

我看不到你的图片，所以编辑你的链接并尝试这个。[http://blog.sephiroth.it/2011/03/29/widget-slidingdrawer-top-to-bottom/](http://blog.sephiroth.it/2011/03/29/widget-slidingdrawer-top-to-bottom/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:04:10.903

在阅读了这篇非常好的文章后，我已经实现了自己的抽屉：

[http://w2davids.wordpress.com/android-damn-that-sliding-drawer/](http://w2davids.wordpress.com/android-damn-that-sliding-drawer/)

祝你好运。

# iphone - 将 Twilo sdk 集成到 iOS 时引发异常

> ID：10714918
> 
> 赞同：0
> 
> 时间：2012-05-23T06:55:48.203
> 
> 标签：iphone, ios

我正在将 Twilo sdk 集成到我的 iPhone 应用程序中。

> NSString *urlString=@"urlstring";

```
 NSURL* url = [NSURL URLWithString:urlString];

    ASIFormDataRequest *request=[ASIFormDataRequest requestWithURL:url];

    [request setDelegate:self];

    [request startSynchronous];

    NSString *response=[request responseString];

    NSLog(@"Response:%@",response);

    NSDictionary *dict=[response JSONValue];

    NSMutableString *capabilityToken=[[NSMutableString alloc] initWithFormat:@"%@",[dict objectForKey:@"message"]];

    device = [[TCDevice alloc] initWithCapabilityToken:capabilityToken delegate:nil]; 
```

我得到回应

> {"message":"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJBQzYwYTFlOTMxOTI5NmFhNmFlZDcwZjhkYjZhMTQyNGJmIiwiZXhwIjoxMzM3NzU5MTA3LCJzY29wZSI6InNjb3BlOmNsaWVudDpvdXRnb2luZz9hcHBTaWQ9QVAxODRlNTE3YzZmN2EyZGI5NTkwMzM5N2I3NWRkMDliMSJ9.fXjQhBaXu3OlN_zXZIvSkoElphtQuW1QnNSbmUzfsSc"}

在初始化时将该字符串分配给 TCDevice 对象，我得到以下异常。

> -[__NSCFString PJSTRString]：无法识别的选择器发送到实例 0x77a21d0

谁能帮我解释这个异常的原因以及如何解决它。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-20T18:47:42.023

尝试将标志“-ObjC -all_load”添加到目标构建设置中的“其他链接器标志”

# jsf - 如何覆盖丰富的背景图像：inputNumberSpinner

> ID：10714929
> 
> 赞同：0
> 
> 时间：2012-05-23T06:56:45.950
> 
> 标签：jsf, richfaces, stylesheet

在richfaces 中有rich:inputNumberSpinner。它有以下两个类：

```
.rf-insp-inc {
    background-image: url("/test/facesx/rfRes/spinnerArrowTop.png?v=4.2.0.Final&db=eAH7z8DAAAAEAAEA&ln=org.richfaces.images");
}
and 
.rf-insp-dec {
    background-image: url("/test/facesx/rfRes/spinnerArrowBottom.png?v=4.2.0.Final&db=eAH7z8DAAAAEAAEA&ln=org.richfaces.images");
} 
```

如果我在我的 Ipad 上测试它，它会非常小。我希望它更大，所以如何覆盖rich:inputNumberSpinner 的背景图像？

我已经将我的背景图像放在我的 xhtml 文件中，但没有任何改变，有什么问题或缺失？

```
<style type="text/css">
     .rf-insp-inc{background-image: url(../../pics/icon_up.jpg);}
</style> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T12:36:29.123

[移动 RichFaces入门](https://community.jboss.org/wiki/GettingStartedWithMobileRichFaces)文档中有许多关于使用 RichFaces 4 创建移动应用程序的有用技巧。您可以使用针对移动设备优化的皮肤（参见步骤 3）。

另一个解决方案可能是在您的 CSS 定义中使用 !important：

```
<style type="text/css">
    .rf-insp-inc{background-image: url(../../pics/icon_up.jpg) !important;}
</style> 
```

问候，帕洛

# asp.net - 普通 asp.net 默认模板的问题

> ID：10714933
> 
> 赞同：0
> 
> 时间：2012-05-23T06:57:00.510
> 
> 标签：asp.net, visual-studio-2010

今天我发现了asp.net默认网站模板的一些奇怪行为。

我试图将徽标添加到母版页（即 Site.Master）

```
<div class="title">
            <h1>
            <img id="logoImage" src="images/headerlogo.png" /><span id="headerUser">heidi jones</span>
            </h1>
        </div> 
```

它适用于`default.aspx`年龄和`about.aspx`页面，但是当我进入登录页面时，徽标图像没有显示在那里。

我错过了什么？这是我第一次使用 asp.net 默认模板...

休闲是屏幕

## 默认.aspx 页面

![默认.aspx 页面](../Images/dd585c3f606ef1b489c8dfcf6b00ad21.png)

## Login.aspx 页面

![Login.aspx 页面](../Images/3d82247fee8f9313b3b9fa8f40a86a99.png)

## 工作代码

```
<img id="logoImage" runat="server" src="~/images/headerlogo.png" /><span id="headerUser">heidi jones</span> 
```

`I miss runat tag`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:58:55.807

图像是从相对 url 加载的 - 所以你的根文件夹页面可以工作，但不能`~`在任何图像控件的 url 开头使用的子文件夹中（不要忘记`runat='server'`）

波浪号 (~) 字符表示 ASP.NET 中应用程序的根目录。

这是一个相对路径：

```
<img id="logoImage" src="images/smallprof.png"> 
```

这意味着浏览器将查找与当前页面的 url 相关的图像 - 即在根文件夹中它将查找 /images/ 在安全文件夹中查找 /security/windows

这是绝对路径

```
<img id="logoImage" src="/images/smallprof.png"> 
```

无论页面的 url 是什么，浏览器都会一直寻找 /images/

使用绝对路径

# iphone - 如何一首又一首播放放在iphone资源文件夹中的音频歌曲

> ID：10714934
> 
> 赞同：0
> 
> 时间：2012-05-23T06:57:13.797
> 
> 标签：iphone

我是 iphone 新手。我在这里开发音频播放器，我在中间感到震惊，因为我在项目中遇到了一些问题，我在资源文件夹中有 2 个目录。在每个目录中我有 6mp3 音频文件。所以我的问题是当用户在资源文件夹的第一个目录中提供第三首 mp3 歌曲的路径时，我们必须连续播放所有歌曲，如第 4、5、6 个 mp3files 也放置在资源文件夹的该目录中。这是我的代码为了这

```
 NSString *chapterString =@"3";
    NSString *string = [[NSBundle mainBundle]pathForResource:chapterString ofType:@"mp3" inDirectory:@"raj"];
    NSLog(@"string is %@",string);
    url = [NSURL fileURLWithPath:string isDirectory:YES];
    NSError *error;
    audioPlayer = [[AVAudioPlayer alloc]initWithContentsOfURL:url error:&error]; 
```

如果有人知道这一点，请帮助我..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:12:14.480

`NSFileManager`在完成歌曲 x..播放数组中的下一首歌曲歌曲 y 后，您可以通过 将目录的内容放入一个数组中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:09:59.850

1.  将所有歌曲放在一个数组中
2.  初始化一个全局变量假设 x
3.  编写以下 AVAudioPlayer 委托

    ```
    - (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag{
        if (x<([_downloadedSongArray count]-1)) 
        {
            x=x+1;
            [self loadSong];
        }
    }
    - (void)loadSong 
    {
     NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        _audioDocumentsDirectory = [paths objectAtIndex:0];
        _audioDocumentsDirectory = [_audioDocumentsDirectory stringByAppendingPathComponent:@"Songs"];
        NSString *selectedSong = [_downloadedSongArray objectAtIndex:x];
        _sharerDownloadedString=selectedSong;
        selectedSong = [selectedSong stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
        _audioDocumentsDirectory = [_audioDocumentsDirectory stringByAppendingPathComponent:selectedSong];

        url = [NSURL fileURLWithPath:_audioDocumentsDirectory];
        [_audio stop];
        _audio = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
        [_audio prepareToPlay];
        [_audio play];
        [Utility setPlaying:YES];
        [_audio setDelegate:self];
    } 
    ```

其中 _downloadedSongArray 是所有歌曲所在的数组。loadSong 是一种根据索引从数组中加载下一首/上一首歌曲并分配给 AVAudioPlayer 的方法。

# java - 在 Java 中从 Mongodb 中检索字段的子集

> ID：10714939
> 
> 赞同：2
> 
> 时间：2012-05-23T06:57:50.817
> 
> 标签：java, mongodb

我正在尝试使用 Java 驱动程序从 mongodb 中仅检索字段的子集。在文档中，我找到了一种方法来做到这一点 javascript-way

```
db.posts.find( { tags : 'tennis' }, { comments : 0 } ); 
```

麻烦的是，如果我在 java 中做类似的事情

```
db.getCollection("posts").find(new BasicDBObject("comments",0)); 
```

它的作用是过滤对象 where `"comments" == 0`，并`comments`像往常一样拉字段。

如何在java中正确执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:12:44.447

我认为您必须通过以下方式使用它：

```
BasicDBObject keys = new BasicDBObject();
keys.put("comments", 0);
db.getCollection("posts").find(new BasicDBObject(), keys); 
```

# android - 重用 HttpURLConnection 以保持会话活跃

> ID：10714943
> 
> 赞同：13
> 
> 时间：2012-05-23T06:58:10.540
> 
> 标签：android, httpurlconnection, sessionid

我们有一个 Android 应用程序，它要求用户输入验证码的答案。验证码是在我们的服务器上生成的。当回复时，它被发送到服务器进行验证。

问题是，由于我必须在请求验证码后关闭 HttpURLConnection，然后我发现回复正在服务器上的不同会话上运行。因此，验证码检查失败，因为它依赖于会话。

有没有办法让连接保持活跃，或者我应该走一条不同的路？我知道在等效的 iPhone 应用程序中，它们保持“连接”状态，因此具有相同的 sessionid。

编辑：

```
 CookieManager cookieManager = new CookieManager();  
    CookieHandler.setDefault(cookieManager);

    URL urlObj = new URL(urlPath);
    conn = (HttpURLConnection) urlObj.openConnection();

    if (urlPath.toLowerCase().startsWith("https:")) {
        initializeHttpsConnection((HttpsURLConnection) conn);
    }
    conn.setRequestMethod("POST");
    conn.setRequestProperty("Content-Language", "en-US");
    conn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
    conn.setRequestProperty("Content-Length", Integer.toString(bodyData.length));
    if (_sessionIdCookie != null) {
        conn.setRequestProperty("Cookie", _sessionIdCookie);
    }
    // Connect
    conn.setDoInput(true);
    conn.setDoOutput(true);
    conn.connect(); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T07:18:48.340

通常，不会根据 http 连接本身保留会话。那没有任何意义。会话通常通过客户端的 cookie 和服务器端的会话信息保持活动状态。您需要做的是保存您收到的 cookie，然后在下次连接到服务器时设置该（那些）cookie。

要了解有关如何使用 HttpUrlConnection 类处理会话和 cookie 的更多信息，请阅读文档：http: [//developer.android.com/reference/java/net/HttpURLConnection.html](http://developer.android.com/reference/java/net/HttpURLConnection.html)

这里有一些摘录让你开始：

> 为了在客户端和服务器之间建立和维护一个潜在的长期会话，HttpURLConnection 包括一个可扩展的 cookie 管理器。使用 CookieHandler 和 CookieManager 启用 VM 范围的 cookie 管理：

```
CookieManager cookieManager = new CookieManager();  
CookieHandler.setDefault(cookieManager); 
```

编辑：

对于那些使用 API 级别 8 或更低级别的人，您需要使用 Apache 的库！

这是一些参考代码：

```
 // Create a local instance of cookie store
    CookieStore cookieStore = new BasicCookieStore();

    // Create local HTTP context
    HttpContext localContext = new BasicHttpContext();
    // Bind custom cookie store to the local context
    localContext.setAttribute(ClientContext.COOKIE_STORE, cookieStore);

    HttpGet httpget = new HttpGet("http://www.google.com/"); 

    System.out.println("executing request " + httpget.getURI());

    // Pass local context as a parameter
    HttpResponse response = httpclient.execute(httpget, localContext); 
```

上面的代码取自 Apache 的库示例。它可以在这里找到：http: [//svn.apache.org/repos/asf/httpcomponents/httpclient/trunk/httpclient/src/examples/org/apache/http/examples/client/ClientCustomContext.java](http://svn.apache.org/repos/asf/httpcomponents/httpclient/trunk/httpclient/src/examples/org/apache/http/examples/client/ClientCustomContext.java)

编辑2： **说清楚：**

对于 Apache 库，您需要以某种方式将 cookie 管理对象与连接对象“连接”起来，并通过 HttpContext 对象来实现。

在 HttpUrlConnection 的情况下，这不是必需的。当您使用 CookieHandler 的静态方法*setDefault*时，您正在设置系统范围的 cookieHandler。以下是 CookieHandler.java 的摘录。请注意变量名称（来自 Android 开源项目 (AOSP) 存储库）：

```
 37 /**
 38      * Sets the system-wide cookie handler.
 39      */
 40     public static void setDefault(CookieHandler cHandler) {
 41         systemWideCookieHandler = cHandler;
 42     } 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-05-26T08:12:03.210

`HttpURLConnection`要使用您需要执行此部分来维护会话

```
CookieManager cookieManager = new CookieManager();  
CookieHandler.setDefault(cookieManager); 
```

只有一次，而不是在每个连接上。好的候选人可以在里面的应用程序启动`Application.onCreate();`

# android - 如何在gmail中获取在线好友列表？

> ID：10714945
> 
> 赞同：0
> 
> 时间：2012-05-23T06:58:12.387
> 
> 标签：android

我正在尝试在 gmail 中获取在线朋友列表，我正在登录，也可以与朋友电子邮件 id 聊天。但没有获取列表。谢谢

```
import android.app.ListActivity;
import android.app.Notification;
import android.app.NotificationManager;
import android.content.BroadcastReceiver;
import android.content.ComponentName;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.ServiceConnection;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.ListView;
import android.widget.TextView;
import android.widget.Toast;

import com.indianic.frdinfo.FriendInfo;
import com.indianic.frdinfo.STATUS;
import com.indianic.interfac.IAppManager;
import com.indianic.service.IMService;

public class FriendList extends ListActivity 
{
    private static final int ADD_NEW_FRIEND_ID = Menu.FIRST;
    private static final int EXIT_APP_ID = Menu.FIRST + 1;
    private IAppManager imService = null;
    private FriendListAdapter friendAdapter;

    private class FriendListAdapter extends BaseAdapter 
    {       
        class ViewHolder {
            TextView text;
            ImageView icon;
        }
        private LayoutInflater mInflater;
        private Bitmap mOnlineIcon;
        private Bitmap mOfflineIcon;        

        private FriendInfo[] friends = null;

        public FriendListAdapter(Context context) {
            super();            

            mInflater = LayoutInflater.from(context);

            mOnlineIcon = BitmapFactory.decodeResource(context.getResources(), R.drawable.greenstar);
            mOfflineIcon = BitmapFactory.decodeResource(context.getResources(), R.drawable.redstar);

        }

        public void setFriendList(FriendInfo[] friends)
        {
            this.friends = friends;
        }

        public int getCount() {     

            return friends.length;
        }

        public FriendInfo getItem(int position) {           

            return friends[position];
        }

        public long getItemId(int position) {

            return 0;
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            // A ViewHolder keeps references to children views to avoid unneccessary calls
            // to findViewById() on each row.
            ViewHolder holder;

            // When convertView is not null, we can reuse it directly, there is no need
            // to reinflate it. We only inflate a new View when the convertView supplied
            // by ListView is null.
            if (convertView == null) 
            {
                convertView = mInflater.inflate(R.layout.friend_list_screen, null);

                // Creates a ViewHolder and store references to the two children views
                // we want to bind data to.
                holder = new ViewHolder();
                holder.text = (TextView) convertView.findViewById(R.id.text);
                holder.icon = (ImageView) convertView.findViewById(R.id.icon);                                       

                convertView.setTag(holder);
            }   
            else {
                // Get the ViewHolder back to get fast access to the TextView
                // and the ImageView.
                holder = (ViewHolder) convertView.getTag();
            }

            // Bind the data efficiently with the holder.
            holder.text.setText(friends[position].userName);
            holder.icon.setImageBitmap(friends[position].status == STATUS.ONLINE ? mOnlineIcon : mOfflineIcon);

            return convertView;
        }

    }

    public class MessageReceiver extends  BroadcastReceiver  {

        @Override
        public void onReceive(Context context, Intent intent) {

            Log.i("Broadcast receiver ", "received a message");
            Bundle extra = intent.getExtras();
            if (extra != null)
            {
                String action = intent.getAction();
                if (action.equals(IMService.FRIEND_LIST_UPDATED))
                {
                    // taking friend List from broadcast
                    //String rawFriendList = extra.getString(FriendInfo.FRIEND_LIST);
                    //FriendList.this.parseFriendInfo(rawFriendList);
                    FriendList.this.updateData(FriendController.getFriendsInfo(), 
                                                FriendController.getUnapprovedFriendsInfo());

                }
            }
        }

    };
    public MessageReceiver messageReceiver = new MessageReceiver();

    private ServiceConnection mConnection = new ServiceConnection() {
        public void onServiceConnected(ComponentName className, IBinder service) {          
            imService = ((IMService.IMBinder)service).getService();      

            FriendInfo[] friends = FriendController.getFriendsInfo(); //imService.getLastRawFriendList();
            if (friends != null) {              
                FriendList.this.updateData(friends, null); // parseFriendInfo(friendList);
            }    

            setTitle(imService.getUsername() + "'s friend list");
        }
        public void onServiceDisconnected(ComponentName className) {          
            imService = null;
            Toast.makeText(FriendList.this, R.string.local_service_stopped,
                    Toast.LENGTH_SHORT).show();
        }
    };

    protected void onCreate(Bundle savedInstanceState) 
    {       
        super.onCreate(savedInstanceState);

        setContentView(R.layout.list_screen);

        friendAdapter = new FriendListAdapter(this);

    }
    public void updateData(FriendInfo[] friends, FriendInfo[] unApprovedFriends)
    {
        if (friends != null) {
            friendAdapter.setFriendList(friends);   
            setListAdapter(friendAdapter);              
        }               

        if (unApprovedFriends != null) 
        {
            NotificationManager NM = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);

            if (unApprovedFriends.length > 0)
            {                   
                String tmp = new String();
                for (int j = 0; j < unApprovedFriends.length; j++) {
                    tmp = tmp.concat(unApprovedFriends[j].userName).concat(",");            
                }
                Notification notification = new Notification(R.drawable.stat_sample, 
                        getText(R.string.new_friend_request_exist),
                        System.currentTimeMillis());

                //Intent i = new Intent(this, UnApprovedFriendList.class);
            //  i.putExtra(FriendInfo.FRIEND_LIST, tmp);                

            //  PendingIntent contentIntent = PendingIntent.getActivity(this, 0,
            //          i, 0);

            //  notification.setLatestEventInfo(this, getText(R.string.new_friend_request_exist),
            //                                  "You have new friend request(s)", 
            //                                  contentIntent);

                NM.notify(R.string.new_friend_request_exist, notification);         
            }
            else
            {
                // if any request exists, then cancel it
                NM.cancel(R.string.new_friend_request_exist);           
            }
        }

    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        super.onListItemClick(l, v, position, id);      

        Intent i = new Intent(this, Messaging.class);
        FriendInfo friend = friendAdapter.getItem(position);
        if (friend.status == STATUS.ONLINE)     
        {
            i.putExtra(FriendInfo.USERNAME, friend.userName);
            i.putExtra(FriendInfo.PORT, friend.port);
            i.putExtra(FriendInfo.IP, friend.ip);       
            startActivity(i);
        }
        else 
        {           
            Toast.makeText(FriendList.this, R.string.user_offline, Toast.LENGTH_SHORT).show();
        }
    }

    @Override
    protected void onPause() 
    {
        unregisterReceiver(messageReceiver);        
        unbindService(mConnection);
        super.onPause();
    }

    @Override
    protected void onResume() 
    {

        super.onResume();
        bindService(new Intent(FriendList.this, IMService.class), mConnection , Context.BIND_AUTO_CREATE);

        IntentFilter i = new IntentFilter();
        //i.addAction(IMService.TAKE_MESSAGE);  
        i.addAction(IMService.FRIEND_LIST_UPDATED);

        registerReceiver(messageReceiver, i);           

    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {     
        boolean result = super.onCreateOptionsMenu(menu);       

        menu.add(0, ADD_NEW_FRIEND_ID, 0, R.string.add_new_friend);

        menu.add(0, EXIT_APP_ID, 0, R.string.exit_application);     

        return result;
    }

    @Override
    public boolean onMenuItemSelected(int featureId, MenuItem item) 
    {       

        switch(item.getItemId()) 
        {     
            case ADD_NEW_FRIEND_ID:
            {
            //  Intent i = new Intent(FriendList.this, AddFriend.class);
            //  startActivity(i);
                return true;
            }       
            case EXIT_APP_ID:
            {
                imService.exit();
                finish();
                return true;
            }           
        }

        return super.onMenuItemSelected(featureId, item);       
    }   

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        super.onActivityResult(requestCode, resultCode, data);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:12:35.363

使用[Smack(XMPP)](http://www.igniterealtime.org/projects/smack/)协议。

[此处](http://www.javacodegeeks.com/2010/09/xmpp-im-with-smack-for-java.html)提供快速教程。在 android 中实现 XMPP 的
好[教程。](http://davanum.wordpress.com/2007/12/31/android-just-use-smack-api-for-xmpp/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:04:15.427

```
 Roster roster = XMPPConnection.getRoster();
        Collection<RosterEntry> entries= roster.getEntries();
        ProviderManager.getInstance().addIQProvider("vCard", "vcard-temp",
                new VCardProvider());
        VCard card = null;
        for (RosterEntry entry : entries) {
            card = new VCard();
            Presence presencek= roster.getPresence(entry.getUser());
            try {
                card.load(Main.conn, entry.getUser());
            } catch (Exception e) {
                e.printStackTrace();
            }

            String jid = entry.getUser();
             String name = card.getField("FN");
            String status = presencek.getType().name();
            Log.d("Prescence", "" + presencek.getType().name());// //num one log

            byte[] imgs = card.getAvatar();
            if (imgs != null) {
                int len = imgs.length;
                Bitmap img = BitmapFactory.decodeByteArray(imgs, 0, len);
            } 
```

# blackberry - Sybase Unwired Platform 中的本地与非本地应用程序开发？

> ID：10714946
> 
> 赞同：0
> 
> 时间：2012-05-23T06:58:15.000
> 
> 标签：blackberry, sybase

我是使用 Sybase Unwired Platform 进行移动应用程序开发的新手。有人可以告诉我：

1.  与 SUP 中的非本地移动应用程序相比，本地移动应用程序是什么？
2.  在 Sybase Unwired Platform (SUP) 中可以开发哪些所有类型的非本地应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-19T11:58:53.260

非本机应用程序在 sybase 无线平台中称为混合 Web 容器应用程序。这些类型的应用程序用于决策示例：批准或拒绝采购订单。这些应用程序不需要任何编码，一旦开发，它将适用于所有移动平台（Android、ios、windows 和 BB）。

如果要求很高，如果我们想用应用做更多的事情，我们可以选择原生应用。它可以分两步开发。1\. 在sybase unwired平台上开发项目 2\. 使用sybase unwired平台生成的代码的原生应用开发（Android,ios,windows and BB）。

# ms-word - How to do search and replace involving fields in Microsoft Word?

> ID：10714947
> 
> 赞同：8
> 
> 时间：2012-05-23T06:58:16.267
> 
> 标签：ms-word, fieldcodes

I have a Word document with fields of the reference variety, which occur in the form "[field].[field]"--in other words, there's a period between the two fields. I want to globally replace this with a space.

Word offers the ^d special character to search for fields, but for some reason the query "^d.^d" does not find anything. However, ".^d" does. Now comes the problem, however--what do I specify as the replacement text in order to retain the field code? If using regular expressions, I could use a "Find What Expression" such as \1, but with regexp ("wild card") mode the ^d is not permitted.

I guess I could write a macro...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-12-11T12:45:36.067

I would like to add to Bibadia's solution.

An example of an index entry field; we want to change a name we misspelled.

*   Make sure hidden formatting is displayed (toggle with SHIFT+CTRL+F8).
*   Make sure wildcards option is not selected. To search for fields, use the opening and closing field braces code (optionally use ^w for spaces, as Bibadia suggested):

    ```
    ^19 XE "Deo, John" ^21
    ```

*   Replace won't recognize field braces character, but will allow to insert the clipboard's content. ;). To do that, insert in text the correct entry. CTRL+F9 to insert field and type:

    ```
    XE "Doe, John"
    ```

*   Select the field above and copy

*   Use

    ```
    ^c
    ```

    in the replace box
*   Hit Replace All

Ta-da!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T17:12:49.343

Torzaburo, I suggest that you do this using a macro. You can start by recording the macro, and later refining your processing steps within the macro.

First turn on the hidden characters by navigating to Home > Paragraph > toggle the show/hide Paragraph symbol. Also, select all and toggle the field codes on (right-click and select "Toggle Field Codes".

Open a new blank Word doc in addition to the one you have open. You will use this later. Start the macro recording and find the field using the "^d" (field code) as you said.

When the field is found, copy only the field text *within the brackets*, and not the full field reference. While the macro is still recording, ALT + TAB to the new blank document and paste the field code in as plain text.

At this point, do the necessary find & replace processing to the field codes. Highlight the processed field codes, copy, ALT + TAB back to the original document, and paste back between the { } brackets.

Stop the macro recording. Add any further custom processing to the macro VBA.

Select-All and re-toggle the field codes. Update the field codes.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T13:13:17.410

It's usually better to go the macro route when finding fields because, as you say, the find algorithm that Word uses doesn't work the way you might hope with fields.

But if you know exactly what the fields contain, you can specify a search pattern that will probably work (however not in wildcard mode).

For example, if you want to look for figure number field pairs such as

```
{ STYLEREF 1 \s }.{ SEQ Figure \* ARABIC \s 1 } 
```

(which would typically be the same set of fields everywhere in the document)

If you only really need to look for the following:

```
{ STYLEREF 1 \s }.<any field> 
```

you could ensure that field codes are displayed and search for

```
^d STYLEREF 1 \s ^21.^d 
```

or

```
^19 STYLEREF 1 \s ^21.^19 
```

If you need to be more precise, you can spell out the second field as well.

"^d" only works for finding the field beginning, not the field end.

It's a shame that ^w wants to find at least 1 whitespace character because otherwise it would be more robust to look for

```
^19^wSTYLEREF^w1^w\s^w^21.^19 
```

Perhaps someone else knows how to work around that without using wildcards?

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-30T16:57:15.090

You don't need a macro. Just toggle all field codes on by using Alt+F9\. Then do a find and replace for what you want to change. Once the replacement is complete, use Alt+F9 again to toggle the field codes back off.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-02T19:40:07.777

Disclaimer: I didn't originate this solution, but it's clean and elegant and I thought it should be included here:

(Adapted from [Search & Replace Field Codes in Word](http://notes1.egenconsulting.com/EGCForms.nsf/b479556a555e72d885256b090073fb8a/d634f658f5cd9c5685256cf8007a115b?OpenDocument)):

1.  Create or find a single instance of the field you want to convert text ***to***
2.  Toggle Field Codes visible (`Alt``F9`)
3.  Copy the code for the field you want to use to the Clipboard (highlight and `Ctrl``C`)
4.  Open the Replace dialog box (`Ctrl``H`), insert the text you want to replace in the **Find What** box and then enter `^c` in the **Replace With** box.

This will replace your text with the contents of the Clipboard, turning it into the field code you copied in step 3\. It also copies formatting information (font, color, etc.), to control how the field will appear when hidden. (Caveat: I've tested this with Word 2003 under Windows 7 only.)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-01-04T12:54:21.613

Coming in late on this, probably way too late for Beth *(sorry Beth)*. And this may not be quite what Beth was looking for. But for anyone interested ...

It sounds like Beth may have created captions throughout the document using `INSERT CAPTION` (hence the presence of field codes). This means these captions will have been (automatically) created in CAPTION style.

To globally replace the separator "." with " " (space) in such captions, take two steps:

[1] Go to `REFERENCES | INSERT CAPTION`, then click on `NUMBERING` and replace the `SEPARATOR` "." with "EM-DASH". This will replace all separators in captions for the selected label in the `CAPTION` Window. If you have other labels in use in the document (e.g. FIGURE), select the other labels one by one and repeat this process.

[2] Do a find/replace searching for special character "em-dash" (^+) in style CAPTION, replacing with " ". Click `REPLACE ALL`.

Voila!

**NOTE:** This presumes that em-dash does not appear in the caption text anywhere. If it does, then you'll need to do a pre- and post- "fiddle" to ensure these em-dashes are not touched by the global replace above.

The "pre-fiddle" is to do a global find/replace across captions, replacing the em-dash ("^+") with some other string (e.g. "EM-DASH") that doesn't ever occur in any caption's text. Then you do the separator change as described above. Finally, the "post-fiddle" is to restore the em-dashes that were in the captions, by doing a global replace of the string "EM-DASH" with the actual em-dash character "^+".

# html - 如何从此 html 中删除文本

> ID：10714949
> 
> 赞同：0
> 
> 时间：2012-05-23T06:58:22.983
> 
> 标签：html, css, drupal

```
<div class="breadcrumb">
<h2 class="element-invisible">You are here</h2>
<a href="/cashback/">Home</a> 
admin
</div> 
```

有人可以建议如何使用 css 从上述 html 中删除“管理员”吗？我不能直接修改html。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:11:21.423

有一种方法可以只使用 CSS：

```
.breadcrumb {
    visibility: hidden;
}

.breadcrumb * {
    visibility: visible;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T07:57:19.143

`str_replace('admin','',$var_name);`如果你有这个 html 的变量，你可以使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T07:51:27.110

```
text-indent:-9999px;
position:relative; 
```

对于 IE7：

```
text-transform:uppercase; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T07:41:50.777

尝试使用带有负左位置的相对位置，我不知道您是否可以在您的 Drupal 站点中毫无问题地应用这些样式，但至少它可以在小提琴中使用。
[http://jsfiddle.net/cadence96/M5pfV/1/](http://jsfiddle.net/cadence96/M5pfV/1/)

首先给容器一个相对位置，将其从视图中移开，应用左侧的css样式：-9999px
，然后选择子元素，给它们相对位置，并使用左侧设置它们的样式：9999px，这样你就会得到你需要的元素回到视图中。

PD：我尝试对负文本缩进使用相同的过程，但我不知道为什么它不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T07:02:16.367

您可以使用：

`<span style="display:none;">admin</span>`

# mysql - 为什么更改 ft_min_word_len 没有效果？

> ID：10714956
> 
> 赞同：2
> 
> 时间：2012-05-23T06:59:20.113
> 
> 标签：mysql, search

我已经将 ft_min_word_len 设置为 3，所以一个简单的搜索是这样的：

```
SELECT * FROM store_product_description WHERE MATCH(name) AGAINST('lag' IN BOOLEAN MODE); 
```

应该工作，但它没有。“名称”列是具有全文索引的 varchar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T09:09:35.253

不幸的是，如果您希望对最小/最大长度和停用词的更改应用于现有的索引行，则必须重新创建 FULLTEXT 索引。

# javascript - 如何在 App Engine Channel API 中关闭控制台日志记录？

> ID：10714958
> 
> 赞同：2
> 
> 时间：2012-05-23T06:59:30.607
> 
> 标签：javascript, google-app-engine, firebug, channel-api

我已经实现了具有持久性的 Channel API。当我创建一个通道并连接套接字（这是在真实的应用程序上，而不是本地的 dev_appserver 上）时，Firebug 会因日志消息而发疯。我想关闭这些功能，以便查看我的 OWN 日志，但找不到任何有关如何禁用 Channel API 控制台日志记录的文档。

我可能做的与大多​​数人不同的一件事是我正在连接跨域... Channel API 支持（请注意流中的第一条消息...如果您可以查看该图片）

![在此处输入图像描述](../Images/52c734cf8655b7d91caa721a1edbf5e1.png)

有人知道吗？

* * *

## 更新

我终于意识到我的代码正在创建两个通道并试图同时打开/连接它们......*这*就是我收到大量消息的原因。我不是故意的（我知道规则： [https](https://developers.google.com/appengine/docs/python/channel/overview#Caveats) ://developers.google.com/appengine/docs/python/channel/overview#Caveats ）......这是一个错误......一旦我修复它，消息又回到了可管理的水平。

耶

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:28:38.057

在开发服务器上，当使用 ChannelAPI 时，它本质上会降级为轮询实现，而不是使用 Comet/long-polling。因此，在您的调试器中，您会看到向服务器发出的源源不断的 HTTP 请求，以不断地有条不紊地检查更新。

本质上，这些只是 AJAX 请求，或者如 Firebug 所想的那样，XMLHttpRequests。

由于您的浏览器负责发出这些请求，因此禁用它们的唯一方法是单击 Firebug 中“控制台”上的小箭头并取消选中记录 XMLHttpRequests 的选项。

![取消选中 Firebug 中的 XmlHttpRequest 日志记录](../Images/460a44715e3f2344721717661ac6c8ea.png)

当然，这也会禁用所有其他 XMLHttpRequest 的日志记录。但要为一个安静、行为良好的 JavaScript 控制台的清晰和宁静付出很小的代价。

有关如何充分利用 Firebug 的更多有用信息，请参阅[Firebug 提示和技巧](http://www.seifi.org/javascript/firebug_tips_and_tricks.html)。

注意：这适用于 Python SDK 和 Java SDK 的用户。（或 Go SDK，假设它具有等效的 ChannelAPI）。这不仅限于 Python Appengine。

**更新：**

从[getFirebug](http://getfirebug.com/wiki/index.php/Console_API#console.timeStamp.28name.29)：

> 创建一个时间戳，可以与 HTTP 流量计时一起使用，以衡量某段代码何时执行。

console.timeStamp 方法在 Firebug 1.8.0 中发布。上述相同的技术也可以覆盖此 Firebug 日志记录方法。

```
console.timeStamp("This is the type of console logging statement that Google is using!"); 
```

上面的日志语句将产生橄榄色文本。可以使用上一节中描述的相同技术禁用此方法。

但是，Google 在闭包中加载控制台对象，这意味着，一旦 Google 的代码被初始化，ChannelAPI 对象就拥有它自己的控制台对象副本。

为了禁用console.timeStamp，需要在加载或运行其他任何内容之前将其作为第一个操作禁用。换句话说，我们需要确保 Google 只使用禁用的 console.timeStamp 方法。

**为获得最佳结果，请在 /_ah/channel/jsapi 脚本标记上方加载此代码，以确保在加载 jsapi 之前禁用 console.timeStamp 方法：**

```
if(window.console) console.timeStamp = function(t) { }; 
```

**注意：由于 Google 以这种方式调用 Firebug 日志记录，唯一的解决方案实际上很可能需要一个允许以编程方式禁用此级别日志记录的错误报告或功能请求。或者，Firebug 团队可以提供一个新版本的 Firebug，其中包括显式禁用 timeStamp 日志语句的能力，类似于他们对错误、警告、XMLHttpRequests 和其他日志级别的做法。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T03:05:19.287

似乎没有办法关闭 Firebug 时间戳日志。解决此问题的一种方法是自己编辑代码并删除此功能：

**将扩展解压到 Mozilla Firefox 配置文件中的目录：**

将目录更改为您的 Firefox 配置文件扩展目录。在 Ubuntu 上，这将是这样的：

```
cd ~/.mozilla/firefox/{random-string}/extensions/ 
```

Firebug 扩展由 标识`firebug@software.joehewitt.com.xpi`。创建一个同名但没有 .xpi 的新目录，并将 XPI 移动到该目录中：

```
mkdir firebug@software.joehewitt.com
mv firebug@software.joehewitt.com.xpi firebug@software.joehewitt.com 
```

接下来，将目录更改为新创建的 Firebug 目录，然后解压缩扩展：

```
cd firebug@software.joehewitt.com
unzip firebug@software.joehewitt.com.xpi 
```

所有文件都应该被解压，以便扩展的目录位于当前目录中。您的文件结构将如下所示：

```
$: ~/.mozilla/firefox/{random-string}/extensions/firebug@software.joehewitt.com$ l
chrome.manifest  defaults/  firebug@software.joehewitt.com.xpi  install.rdf  locale/   skin/
content/         docs/      icons/                              license.txt  modules/ 
```

$: ~/.mozilla/firefox/ghlfe0bb.ff5.0/extensions/firebug@software.joehewitt.com$

**在文本编辑器中打开 consoleExposed.js：**

接下来，切换到`content/firebug/console`目录：

```
cd content/firebug/console 
```

`consoleExposed.js`使用您喜欢的编辑器编辑文件：

```
vim consoleExposed.js 
```

**禁用控制台.timeStamp：**

在第 215 行或附近，您将看到以下函数：

```
console.timeStamp = function(label)
{  
    label = label || "";

    if (FBTrace.DBG_CONSOLE)
        FBTrace.sysout("consoleExposed.timeStamp; " + label);

    var now = new Date();
    Firebug.NetMonitor.addTimeStamp(context, now.getTime(), label);

    var formattedTime = now.getHours() + ":" + now.getMinutes() + ":" +
        now.getSeconds() + "." + now.getMilliseconds();
    return logFormatted([formattedTime, label], "timeStamp");
}; 
```

在第一个花括号之后，强制函数不返回任何内容：

```
console.timeStamp = function(label)
{   return ;   // disable timestamp by returning
    label = label || "";

    if (FBTrace.DBG_CONSOLE) 
```

**重启 Firefox，享受没有时间戳的世界：**

编辑后，重新启动 Firebug。您不应再在控制台中看到 timeStamp 的日志消息。

# javascript - 从 android/iphone 中删除 url 搜索栏

> ID：10714966
> 
> 赞同：1
> 
> 时间：2012-05-23T07:00:14.497
> 
> 标签：javascript, mobile, css

我有一张桌子，在一个页面上：

```
<table  border="0" width="320px" height="480px" style="background-color: black;"> 
```

**更新：**

我想删除上面的搜索栏......所以这就是我用于手机适配的全部内容：

```
 <head>
     <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
     <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;" />
     <meta name="apple-mobile-web-app-capable" content="yes" />
     <meta names="apple-mobile-web-app-status-bar-style" content="black-translucent" />
     <title></title>
     <style type="text/css">
          body{
              margin:0px;
              padding: 0px;
          }
     </style>
     <script>
         window.addEventListener("load",function() {
           // Set a timeout...
           setTimeout(function(){
           // Hide the address bar!
           window.scrollTo(0, 1);
           }, 0);
         }); 
    </script>   
 </head> 
```

我仍然可以看到导航栏的一英寸..但我试图删除那一英寸但不能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:24:22.667

尝试使用基于方向的不同 css 规则的媒体查询：

```
    /* 我假设肖像是起点 */
    。元素{
        规则：值；
    }
    @media（方向：横向）{
        。元素{
            规则：不同的值；
        }
    }

```

但考虑设计一些更具响应性的东西

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:54:52.850

```
 <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=1;" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta names="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js"></script>
        <title>Your <?php echo  $app_name; ?> </title>
        <style type="text/css">
            body{
                margin:0px;
                padding: 0px;
            }
             /* i assume portrait to be the starting point */

        </style>
        <script>
     window.addEventListener("load",function() {
  // Set a timeout...
  setTimeout(function(){
    // Hide the address bar!
    window.scrollTo(0, 1);
  }, 0);
}); 

var preventDefault = function(e) {
    e.preventDefault();
    return false;
};
document.addEventListener('touchmove',preventDefault,false);
document.body.addEventListener('touchmove',preventDefault,true);
window.addEventListener('touchmove',preventDefault,true);
    </script>

    </head> 
```

这就是我想要的.. 没有导航，并禁用所有事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T11:07:28.043

至于隐藏导航栏，只有当您的页面有足够的高度来填充剩余空间时，将页面滚动到 0 才会起作用。我有时在滚动之前和之后使用 javascript 来调整和调整大小，

```
function scrollWinToTop () {
    document.body.style.height = (window.innerHeight *1.5) + 'px'; //a lot of pixels or a large precentage
    window.scrollTo(0, 1); // moves the viewport to the top
    document.body.style.height = 'auto'; // OR clientHeight + 'px' OR something
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T02:40:19.787

这个网站还有一些其他的建议，但是这个严肃的、不用担心的可以在 github:gist 中找到并回答你的问题（为了方便起见，粘贴在这里）：

```
function hideAddressBar()
{
  if(!window.location.hash)
  {
      if(document.height < window.outerHeight)
      {
          document.body.style.height = (window.outerHeight + 50) + 'px';
      }

      setTimeout( function(){ window.scrollTo(0, 1); }, 50 );
  }
}

window.addEventListener("load", function(){ if(!window.pageYOffset){ hideAddressBar(); } } );
window.addEventListener("orientationchange", hideAddressBar ); 
```

据我所知，添加到页面的额外高度（这给您带来了问题）和 scrollTo() 语句的组合使地址栏消失了。

在同一个站点，隐藏地址栏的“最简单”解决方案是使用 scrollTo() 方法：

```
window.addEventListener("load", function() { window.scrollTo(0, 1); }); 
```

这将隐藏地址栏，直到用户滚动。

该站点将相同的方法放在超时函数中（没有解释理由，但它声称没有它，代码将无法正常工作）：

```
// When ready...
window.addEventListener("load",function() {
  // Set a timeout...
  setTimeout(function(){
    // Hide the address bar!
     window.scrollTo(0, 1);
  }, 0);
}); 
```

# grails - gsp页面中的焦点转移

> ID：10714969
> 
> 赞同：0
> 
> 时间：2012-05-23T07:00:27.980
> 
> 标签：grails

在 gsp 页面中，在字段中转移焦点的默认方式是垂直的。就像我有 10 个文本框，一列中有 5 个，在我的 create.gsp 页面中，我的焦点在第一个文本框上，然后通过按 Tab，焦点垂直向下移动到下一个文本框。我的要求是逐行将焦点从左到右水平移动。谁能帮助我如何做到这一点。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:05:35.373

您可以使用[tabindex](http://www.w3.org/TR/html4/interact/forms.html#adef-tabindex)属性来控制它。在下面的示例中，焦点根据 tabindex 的升序从 f1 移动到 f3 到 f2。

```
<input type="text" name="f1" tabindex="1" />
<input type="text" name="f2" tabindex="3" />
<input type="text" name="f3" tabindex="2" /> 
```

# jquery-mobile - 每分钟向服务器发送 gps 坐标

> ID：10714976
> 
> 赞同：0
> 
> 时间：2012-05-23T07:00:50.430
> 
> 标签：jquery-mobile, cordova, geolocation, gps

我很想用 jQueryMobile 构建一个 PhoneGap 应用程序。在我的应用程序中，我需要每 4 分钟向服务器发送一次用户当前的地理位置 GPS 坐标。我怎样才能做到这一点？

这是我现在一直在使用的代码，但它不发送任何数据。我该如何修改它以使其工作？

```
document.addEventListener("deviceready", onDeviceReady, false);

var watchID = null;

// PhoneGap is ready
//
function onDeviceReady() {
    // Update every 4 minute
    var options = { maximumAge: 240000, timeout: 5000, enableHighAccuracy: true };
    watchID = navigator.geolocation.watchPosition(onSuccess, onError, options);
}

// onSuccess Geolocation
//
function onSuccess(position) {
   var lat = Position.coords.latitude;
    var lng = Position.coords.longitude;

    jQuery.ajax({
        type: "POST", 
        url:  serviceURL+"locationUpdate.php", 
        data: 'x='+lng+'&y='+lat,
        cache: false
    });
}

// onError Callback receives a PositionError object
//
function onError(error) {
    alert('code: '    + error.code    + '\n' +
          'message: ' + error.message + '\n');
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-23T07:06:12.887

不要调用 setInterval，而是让 phonegap 为你做这件事。

```
// onSuccess Callback
//   This method accepts a `Position` object, which contains the current GPS coordinates
//
function onSuccess(position) {
    var element = document.getElementById('geolocation');
    element.innerHTML = 'Latitude: '  + position.coords.latitude      + '<br />' +
                    'Longitude: ' + position.coords.longitude     + '<br />' +
                    '<hr />'      + element.innerHTML;
}

// onError Callback receives a PositionError object
//
function onError(error) {
    alert('code: '    + error.code    + '\n' +
      'message: ' + error.message + '\n');
}

// Options: retrieve the location every 3 seconds
//
var watchID = navigator.geolocation.watchPosition(onSuccess, onError, { frequency: 3000 }); 
```

[http://docs.phonegap.com/en/1.0.0/phonegap_geolocation_geolocation.md.html#geolocation.watchPosition](http://docs.phonegap.com/en/1.0.0/phonegap_geolocation_geolocation.md.html#geolocation.watchPosition)

# jekyll - jekyll 中的区域设置特定日期

> ID：10714980
> 
> 赞同：24
> 
> 时间：2012-05-23T07:01:31.817
> 
> 标签：jekyll, liquid, date-formatting

我正在尝试使用 jekyll 来创建网站。我正在使用 jekyll-bootstrap。

默认配置具有页面存档，其中所有帖子都按发布日期的年份和月份分组列出。目前月份以英文显示。我查看了代码，这是负责放置日期的摘录：

```
{% capture this_month %}{{ post.date | date: "%B" }}{% endcapture %} 
```

我在[这里](http://guides.rubyonrails.org/i18n.html#adding-date-time-formats)找到了很多信息，所以有一种方法可以指定所需的语言环境。但是你怎么能让 jekyll 尊重它呢？只需添加

```
default_locale: "lt" 
```

在`_config.yml`自然是行不通的。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-04-20T20:29:38.800

您可以使用 Liquid Date Format 覆盖当前月份：

```
{% assign m = page.date | date: "%-m" %}
{{ page.date | date: "%-d" }}
{% case m %}
  {% when '1' %}Januar
  {% when '2' %}Februar
  {% when '3' %}März
  {% when '4' %}April
  {% when '5' %}Mai
  {% when '6' %}Juni
  {% when '7' %}Juli
  {% when '8' %}August
  {% when '9' %}September
  {% when '10' %}Oktober
  {% when '11' %}November
  {% when '12' %}Dezember
{% endcase %}
{{ page.date | date: "%Y" }} 
```

如果您的日期是，例如 2015-02-20，则输出将是`20 Februar 2015`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-06-23T14:19:31.783

因为 i18n 在 github 页面上不可用，所以我建立在@Kleo Petroff 的[回答和 @Falc 的](https://stackoverflow.com/a/29757806/48136)[回答](https://stackoverflow.com/a/32914455/48136)的基础上，我设置了一种在 YAML 文件中定义区域名称的日期：

没有整个 case 语句，代码几乎相同：

```
{% capture i18n_date %}
{{ page.date | date: "%-d" }}
{% assign m = page.date | date: "%-m" | minus: 1 %}
{{ site.data.fr.months[m] }}
{{ page.date | date: "%Y" }}
{% endcapture %} 
```

我在上面的代码中设置了以下数据结构（可能在`_config.yml`，或在某个`_data/some.yml`文件中），文件是`_data/fr.yml`：

```
months:
    - Janvier
    - Février
    - Mars
    - Avril
    - Mai
    - Juin
    - Juillet
    - Aout
    - Septembre
    - Octobre
    - Novembre
    - Décembre 
```

请注意，`page.date | date: "%-m"`将月份数字输出为**字符串**，即六月数字实际上`"6"`不是，在*管道*m site.data.fr.months[m]` 时`6`，液体会默默地**将该字符串转换为数字**，我只在查看 Falc 时看到了技巧回答。*`minus filter. During development it was not something I was aware and thus liquid didn't returned anything when passing``with the value "6" to`*

 ** * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-24T12:57:57.567

使用来自 jekyll 支持的插件[页面的插件](http://jekyllrb.com/docs/plugins/)[i18n](https://github.com/gacha/gacha.id.lv/blob/master/_plugins/i18n_filter.rb)。

请注意，github 页面不支持本地插件。请参阅[相关问题](https://github.com/jekyll/jekyll/issues/325)。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-10-25T21:31:21.343

轮到我在没有插件的情况下分享我的解决方案了：我创建了一个包含一些参数的包含，例如：`{% translated_date.html ... %}`

我们的想法是使用日期过滤器语法（例如：“%A %-d %B %Y”）翻译符合格式的月份和日期名称。用于翻译的字符串存储在 .yaml 文件中`_data`。

代码和用法可在 repo [oncleben31/jekyll-date-basic-i18n](https://github.com/oncleben31/jekyll-date-basic-i18n/)上找到。

[在我的博客中与 repo oncleben31/oncleben31-cc](https://github.com/oncleben31/oncleben31-cc)中提供的 Jekyll 源集成的示例。看看布局`post.html`和`home.html`。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-02T19:27:49.127

我开始使用@mpictas 建议的[i18n](https://github.com/gacha/gacha.id.lv/blob/master/_plugins/i18n_filter.rb)插件，但是当 Jekyll 重新生成页面时，它开始打印“错误”而不是本地化日期。所以我删除了插件并开始使用这个简单的代码，类似于“case/when”的解决方案：

```
{% assign months = "Enero|Febrero|Marzo|Abril|Mayo|Junio|Julio|Agosto|Septiembre|Octubre|Noviembre|Diciembre" | split: "|" %}
{% assign m = page.date | date: "%-m" | minus: 1 %}
{% assign day = page.date | date: "%d" %}
{% assign month = months[m] %}
{% assign year = page.date | date: "%Y" %}
<span class="date">{{ day }}/{{ month }}/{{ year }}</span> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-12-05T03:39:47.717

您还可以在 Ruby 文件中编写自己的 Liquid 过滤器，如下所示：

```
module DateFilter
  MONTHS = %w(Januar Februar März April Mai Juni July August September Oktober November Dezember)

  def german_long_month(input)
    MONTHS[input.strftime("%m").to_i - 1]
  end
end

Liquid::Template.register_filter(DateFilter) 
```

当您将此文件放入`_plugins`Jekyll 站点的文件夹时，您可以像使用其他过滤器一样在模板文件中使用过滤器。

```
{{ post.date | german_long_month }} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-08-14T21:16:17.227

您可以将 @Falc 答案与 jekyll [-multiple-languages-plugin](https://github.com/Anthony-Gaudino/jekyll-multiple-languages-plugin)结合使用：

只需在模板中使用：

```
{% assign months = "january|february|march|april|may|june|july|august|september|october|november|december" | split: "|" %}
{% assign m = post.date | date: "%-m" | minus: 1 %}
{% assign day = post.date | date: "%d" %}
{% assign month = months[m] %}
{% assign year = post.date | date: "%Y" %}
<span class="post-meta">{{day}} {% t month %} {{year}}</span> 
```

然后在`_i18n/en.yml`, `.../pl.yml`, `.../any-language.yml`:

```
january: January
february: February
march: March
april: April
may: May
june: June
july: July
august: August
september: September
october: October
november: November
december: December 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-25T15:45:35.847

根据@Brice 的[回答](https://stackoverflow.com/a/37994328/4416259)，我想出了这个以西班牙语输出月份名称的解决方案。

```
<p class="post-meta">
    {% assign mes_index = page.date | date: "%-m" | minus: 1 %}
    {% assign mes = site.data.spanish.meses[mes_index] %}

    <time datetime="{{ page.date | date_to_xmlschema }}">
        {{ page.date | date: "%-d" }} de {{ mes }} de {{ page.date | date: "%Y" }}
    </time>
</p> 
```

*“Mes”在西班牙语中的意思是“月”。*

`_data/spanish.yml`

```
meses:
  - Enero
  - Febrero
  - Marzo
  - Abril
  - Mayo
  - Junio
  - Julio
  - Agosto
  - Septiembre
  - Octubre
  - Noviembre
  - Diciembre 
```*

# java - 不同子类中的相同实现

> ID：10714984
> 
> 赞同：2
> 
> 时间：2012-05-23T07:02:00.313
> 
> 标签：java

假设我有以下情况：

```
 abstract class A {
        abstract method1();
        abstract method2();
    }

    class B extends A {
        method1() {
            // implementation 1
        }
        method2() {
            // implementation 3
        }
    }

    class C extends A {
        method1() {
            // implementation 1
        }
        method2() {
            // implementation 4
        }
    }

    class D extends A {
        method1() {
            // implementation 2
        }
        method2() {
            // implementation 4
        }
    } 
```

底线：同一类的几个子类，对不同的方法使用不同的方法实现。

问题是我在不同的子类中有相同的实现。我的问题是如何处理这些常见的实现？
这样做的合乎逻辑的方法是创建另一个抽象级别，但这只有在我有一个具有通用实现的方法时才有效（因为 Java 没有多重继承）。我也可以把最常用的实现放在超类中，只在其他类中以不同的方式实现。但是，我不会这样做，因为随着时间的推移，最常见的实现可能会随着其他类的添加而改变，此外，我想在超类中保持方法抽象。

是否有某种模式可以以“优雅的方式”解决我的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T07:07:20.050

您遇到了经典的 OOP 问题，继承层次结构变得笨拙:-)

我建议的解决方案：

*   **更喜欢组合而不是继承**——将实现分解为单独的对象，这些对象可以“插入”以提供所需的行为。基类中的方法只是通过其定义的接口调用实现插件。这基本上是[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)。这是一种非常可靠的方法，尽管当您有很多不同的策略类型时，有时会容易出现大量过度设计/样板。
*   **采用基于原型的模型**——使用[基于原型的](http://en.wikipedia.org/wiki/Prototype-based_programming)对象而不是传统的 OOP。这解决了所有问题——您摆脱了继承层次结构的固有限制，只需将您想要的实现复制到运行时需要它的任何对象。这是最激进的选择，但可以带来一些很大的好处。
*   **将实现分解为静态函数**- 这样您可以共享实现 - 这有点混乱，因为您仍然需要执行所有覆盖，但它们只是将调用委托给正确的实现。这通常是侵入性最小的选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:14:15.790

我会推荐作曲。考虑以下：

```
interface I1 {
     method1();
}

abstract class A implements I1{
    abstract method1();
    abstract method2();
}

class CommonOperations implements I1 {
    method1() {
        // implementation 1
    }
}

class B extends A {
    CommonOperations common;

    method1() {
        common.method1();
    }
    method2() {
        // implementation 3
    }
}

class C extends A {
    CommonOperations common;

    method1() {
        common.method1();
    }
    method2() {
        // implementation 4
    }
}

class D extends A {
    method1() {
        // implementation 2
    }
    method2() {
        // implementation 4
    }
} 
```

# macos - Mac 上 Qt Creator 的单一文档界面

> ID：10714987
> 
> 赞同：2
> 
> 时间：2012-05-23T07:02:25.827
> 
> 标签：macos, qt, qt-creator

在 Qt Creator 上，有没有办法让单独的项目在单独的窗口中打开？

源代码文件的视觉分离将使比较/复制更加容易。

编辑：从 sjwarner 的回答看来，可以在 Linux 和 Windows 下的单独窗口中打开项目。但是，我使用的是 Mac OS X

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T06:01:51.260

查看`open`的手册页，

```
-n  Open a new instance of the application(s) even if one is already running. 
```

我想我们可以像这样使用它

```
open -n /path/to/Qt\ Creator.app 
```

以并行打开和处理多个 Qt Creator 项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T07:51:31.423

> 源代码文件的视觉分离将使比较/复制更加容易。

如果您无法打开多个窗口，则拆分代码窗口以并排显示多个文档（该选项在`Window`菜单中）。这对您的效果如何取决于您的屏幕尺寸/分辨率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T07:23:51.240

我只是打开 Qt Creator 两次，然后从那里开始......！您可能会发现使用会话系统管理多个项目更容易（*文件->会话管理器*）...

# android - OSMdroid - 显示北方的实际位置？

> ID：10714988
> 
> 赞同：1
> 
> 时间：2012-05-23T07:02:30.800
> 
> 标签：android, osmdroid

我正在使用 OSMdroid 3.0.4。使用时：

```
 mMyLocationOverlay = new MyLocationOverlay(this, mapView);//
    mMyLocationOverlay.setLocationUpdateMinDistance(5);
    mMyLocationOverlay.setLocationUpdateMinTime(5000);
    mMyLocationOverlay.setDrawAccuracyEnabled(true);
    mMyLocationOverlay.enableMyLocation();
    mMyLocationOverlay.enableCompass(); 
```

enableCompass() 五米罗盘在屏​​幕的左上角。但是当我获得了我的位置并且我要去某个地方时，我的位置向我显示了一个指向北方的箭头，而不是我实际要去的方向。为什么这样？任何想法，如何改变这种行为？

谢谢

# php - 产品可用性检查

> ID：10714989
> 
> 赞同：0
> 
> 时间：2012-05-23T07:02:32.717
> 
> 标签：php, codeigniter-2

我有一个表格，用户可以在其中输入产品 ID 及其数量。我想要实现的是当用户提交表单时，我想在控制器中检查数据库以查看所提供产品的数量是否有库存，如果没有，我想在表单中显示验证错误消息。如果一切正常，我想继续下一步。

如果我想使用 Codeigniter 的默认验证库来实现这一点，你能告诉我我的控制器应该是什么样子吗？

这是我的数据库表名：产品

```
 product_id     category_id     product_name    product_price   product_stock
    1                1          Mango Juice         25                100
    2                2           Pepsi              10                  0 
```

这是我的查看文件——我的表格（查看此链接查看[表格](http://jsfiddle.net/ms3eB/)）

```
<form name="form" action="base_url/my_controller/function" method="post">
   <label>One</label> 
  Product ID:<input type="text" name="productid[]" value=""> 
  Product Quantity: <input type="text" name="quantity[]" value=""> <br>

 <label>Two</label> 
 Product ID:<input type="text" name="productid[]" value=""> 
 Product Quantity: <input type="text" name="quantity[]" value=""> <br>

 <!-- there may be more inputs like above (users can create new inputs 
 as many as they want) // I have a jquery function to create new rows-->
 <input type="submit" value="submit">
 </form> 
```

## 编辑部分新

```
function test(){

$productid = ($_POST['productid']);
$quantity = ($_POST['quantity']);

for($i = 0; $i < count($productid); $i++){
     $result=$this->enquiry($productid[$i],$quantity[$i]);

     }

/* Now I am stuck here. I don't understand how to find out if the
      products are available or not. If not I want to show the 
      error message in the form :(   */

}//function ends

function enquiry($productid,$quantity){

 $query = $this->db->query("SELECT product_stock FROM products 
                                  WHERE product_id=$productid");

if ($query->num_rows() > 0){

          foreach ($query->result() as $row){

      $product_stock=$row->product_stock;              

    }                 
 }                 
   if($product_stock>$quantity) { return FALSE;   }         

    else { return  TRUE; }              
 }//function Ends 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:27:36.500

您可以使用回调函数。[在这里](http://codeigniter.com/user_guide/libraries/form_validation.html#callbacks)阅读

```
$this->form_validation->set_rules('quantity[]','Quantity', 'required|callback_quantity_check');

public function quantity_check($quantity) {

     if ($this->is_available_in_stock($this->input->post('product_id[]'),$quantity)) {
        return TRUE;
     }
     else 
     {
        $this->form_validation->set_message('quantity_check', 'error');
        return FALSE;
     }
} 
```

`is_available_in_stock`将在数据库中检查可用数量。建议使用模型进行检查。

编辑：

我建议不要将上述表单验证用于此类验证，因为您有两个数组需要根据它们的索引进行匹配。使用回调函数时，您不知道您正在使用哪个产品的数量。

我的建议：

```
$product_ids = $this->input->post('product_id[]');
$quantities = $this->input->post('quantity[]');

//ensure the arrays are identical in size.
if (count($product_ids) == count($quantities) {

   for ($counter == 0; $counter < count($product_ids) ; $counter++) {
       $result = $this->is_available_in_stock($product_ids[counter], $quantities[counter]);
   }
} 
```

使用此代码，`is_available_in_stock`您编写的函数应该可以工作。

第二次编辑：

```
$not_available_products = array();
for($i = 0; $i < count($productid); $i++){
     $result=$this->enquiry($productid[$i],$quantity[$i]);
     if ($result == FALSE) {
          array_push($not_available_products, array($productid[$i] => $quantity[$i]));
     }
}
return $not_available_products; 
```

# css - 隐藏在 Ocotopress 中

> ID：10714990
> 
> 赞同：4
> 
> 时间：2012-05-23T07:02:33.543
> 
> 标签：css, jekyll

任何人都知道删除或隐藏 Ocotopress 网站中某些页面的旁白面板的方法吗？

将侧面默认为展开怎么样（即显示在底部而不是右侧）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T15:51:57.533

在 yaml 前端问题中，您可以使用以下命令将其强制到页面底部：

```
sidebar: collapse 
```

如果要禁用它，请使用：

```
sidebar: false 
```

# php - 文件名 .xls 不可读

> ID：10714991
> 
> 赞同：0
> 
> 时间：2012-05-23T07:02:35.633
> 
> 标签：php

我想下载文件 .xls 然后将其上传到数据库 oracle。但我收到一个错误“文件名 .xls 不可读”。

下面是我的脚本：

```
 <? require_once (dirname(__FILE__)."/upload/upBc.php");

               if(!empty($_FILES["file"])){
                    echo $file = $_FILES["file"];
               }else{
                  /*$file = "/opt/lampp/htdocs/avar/pp/ccr/test.xls";*/
                     $file = '/www.upload.com/pm_ms/test.xls';
               /* $file = "website_data_".  date('ymd').".xls";*/

               }
                    $upload = new upload();
                    $upload->setFile($file);
                    $upload->getFileType();
                    $upload->getFileName();
                    $upload->getFileDir();
                    $upload->readDataTbc();
                    $dataD = array ();
                    $dataD = $upload->getDataTbc();
                        echo "<table border = 1>";
                        for($i=1;$i < count($dataD);$i++){
                            echo "<tr>";
                            for($j=0;$j < $upload->getHSize();$j++){
                                echo "  <td>".$dataD[$i][$j]."</td>";
                            }
                            echo"</tr>";
                          }
                          echo"</table>";
                          echo"data length=". count($dataD);
                          $upload->commitDataTbc();

       ?> 
```

如果我使用`$file = "/opt/lampp/htdocs/avar/pp/ccr/test.xls";`. 在我的程序中它可以工作，但如果我使用`$file = '/www.upload.com/pm_ms/test.xls';`. 我收到错误文件名 test.xls 不可读

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:46:50.550

那可能是因为`/www.upload.com/`您的服务器上不存在。

你知道文件的实际路径吗？通过在 URI 上加上前缀`/`this 使其成为绝对值，这意味着它试图从`/www.upload.com`您的服务器上逐字读取。如果你想让这个相对，你可以尝试`./upload.com/`或简单地`upload.com/`作为路径前缀。

但是，如果您尝试从网站 upload.com（而不是服务器中的文件夹）加载它，您有两种选择：

1.  （如果支持）将文件名设置为 URL，即。`$file = 'http://www.upload.com/pm_ms/test.xls';`
2.  下载文件，然后在本地打开它。

对于#2：

```
$file = 'test.xls';
$ctnts = file_get_contents('http://www.upload.com/pm_ms/test.xls');
file_put_contents($file, $ctnts); 
```

# ruby - Sinatra 中的电子邮件事件

> ID：10714994
> 
> 赞同：2
> 
> 时间：2012-05-23T07:02:57.477
> 
> 标签：ruby, email, sinatra, eventmachine

我正在开发一个`Sinatra`网络应用程序，该应用程序需要将收到的任何电子邮件保存在数据库中（或者在收到邮件后立即执行其他操作）。这项工作的最佳工具是什么？我正在看，`eventmachine`它似乎有点复杂。我正在考虑`mail`宝石，但收到邮件时它不会触发事件。最后一个问题：要测试这样一个应用程序，我需要它来在线托管它吗？如果没有，那么我该如何向应用程序发送电子邮件并进行测试？

非常感谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T13:04:25.543

所以 Sinatra 是一个网络服务器。电子邮件并非来自 HTTP 请求，因此您需要一个邮件服务器来接收电子邮件，并假设您仍想在您的 Sinatra 应用程序中处理它们，请在您的应用程序中发出请求。

查看[http://steve.dynedge.co.uk/2010/09/07/incoming-email-in-rails-3-choosing-the-right-approach/](http://steve.dynedge.co.uk/2010/09/07/incoming-email-in-rails-3-choosing-the-right-approach/)了解一些选项（这是思维导图，但你应该可以翻译）

# logging - 如何将java变量值传递到log4j.properties文件中的sql语句条目

> ID：10714996
> 
> 赞同：2
> 
> 时间：2012-05-23T07:03:05.243
> 
> 标签：logging, log4j

我正在使用 JDBC appender，在其中我编写了一个 sql 查询，该查询使用表结构登录到表中，如图所示

```
Column name  Null  Type
------------ ----- -----------------
DATED              DATE
LEVEL1             VARCHAR2(10)
MESSAGE            VARCHAR2(1000)
TIME               TIMESTAMP(5)
LOGGER             VARCHAR2(25)
MODULE             VARCHAR2(75)
USER1              VARCHAR2(35)
OBJ_ID             VARCHAR2(25) 
```

我的 log4j.properties 文件中用于查询的条目是

`log4j.appender.DB.sql=INSERT INTO LOGS VALUES('%d{dd-MMM-yy}','%p','%m','%d{dd-MMM-yy HH:mm:ss}','%C','%t','username','obid')`

我希望将`USER`和`OBJ_ID`列值通过 java 文件传递​​到 log4j.properties。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T16:44:04.853

您可以使用[此处](https://stackoverflow.com/questions/8554172/logging-username-in-log4j)或[此处](http://veerasundar.com/blog/2009/11/log4j-mdc-mapped-diagnostic-context-example-code/)所述的 log4j MDC 。这基本上`%X{user1}`在*log4j.properties*中为您提供了一个变量等。

# struts2 - Struts 2 多个资源包中的多个键 [ How-To ]

> ID：10714999
> 
> 赞同：0
> 
> 时间：2012-05-23T07:03:15.230
> 
> 标签：struts2, struts

我在用

struts.custom.i18n.resources=file1,file2

## 文件 1

enter.user = 用户名

## 文件2

enter.user = 用户名1

enter.user 的输出是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:46:20.283

它与您在 struts.custom.i18n.resources 属性中写入资源的顺序有关。

最后一个“赢”。

现在你有

```
struts.custom.i18n.resources=file1,file2 
```

file2 是最后一个，所以 file2 获胜，输出将是“用户名 1”

如果你有

```
struts.custom.i18n.resources=file2,file1 
```

file1 将是最后一个，因此输出将是“用户名”