# StackOverflow 问答 11894000-11894999

# android - 使用动画隐藏视图的正确方法？

> ID：11894000
> 
> 赞同：2
> 
> 时间：2012-08-10T00:44:08.300
> 
> 标签：android, android-layout, android-animation, android-view

我尝试了几种隐藏视图然后将其从父布局中删除的方法：

1.  调用 alpha 渐变动画，然后调用 setVisibility(GONE);
2.  调用 alpha 渐变动画，然后调用 AnimationListener 内部的 setVisibility(GONE)
3.  调用 alpha 渐变动画，然后删除 AnimationListener 内的父布局。

每次，生成的动画都会失败——视图从屏幕上消失两次。alpha 渐变动画效果很好，但是当您更改可见性或将其从父视图中删除时，它会很快再次出现，然后再次消失。结果是一个意想不到的紧张动画。

示例代码：

```
Animation animation = AnimationUtils.loadAnimation(AddTaskActivity.this,
            R.anim.fade_out);
final LinearLayout parentView = (LinearLayout) findViewById(R.id.addtask_root);
animation.setAnimationListener(new Animation.AnimationListener() {

    @Override
    public void onAnimationEnd(Animation animation) {
    parentView.post(new Runnable() {
            public void run() {
                        parentView.removeView(test);
                }
    });
    } 
```

该动画失败——测试视图从视图中消失了两次。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:40:57.827

~~我***想***如果你在删除它之前透明你的视图或改变它的可见性，你可以做你想做的事：~~

 ~~```
@Override
    public void onAnimationEnd(Animation animation) {
    parentView.post(new Runnable() {
            public void run() {
                        // transparent your view
                        ...     
                        parentView.removeView(test);
                }
    }); 
```~~ 

~~**编辑：**~~

 ~~我在 about animations 中看到了 android 文档，它说：

> 视图动画系统的另一个缺点是它只修改了视图的绘制位置，而不是实际的视图本身。例如，如果您为按钮设置动画以在屏幕上移动，则该按钮可以正确绘制，但您可以单击该按钮的实际位置不会改变，因此您必须实现自己的逻辑来处理此问题。
> 
> 使用属性动画系统，这些约束被完全移除，您可以对任何对象（视图和非视图）的任何属性进行动画处理，并且对象本身实际上是被修改的。属性动画系统在执行动画的方式上也更加健壮。在较高级别上，您可以将动画师分配给您想要制作动画的属性，例如颜色、位置或大小，并且可以定义动画的各个方面，例如多个动画师的插值和同步。

所以我想你必须使用**`property animation`**.~~

# android - Android ListView 元素

> ID：11894004
> 
> 赞同：0
> 
> 时间：2012-08-10T00:44:19.500
> 
> 标签：android, listview

我正在尝试制作一个`ListView`视图元素，这些元素都应该是 facebook 新闻流样式的完整页面大小。我似乎无法弄清楚如何将每个`ListView`元素的大小设置为整页大小。每个`android:layout_heigh`t 都设置为`match_parent`。如果我将其设置`500dip`为接近整页，但这对我来说似乎不是好的设计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:33:09.453

如果我很好理解你的问题，你必须使用

```
android:layout_height="fill_parent" 
```

# mysql - Some values do not store in the database

> ID：11894006
> 
> 赞同：-1
> 
> 时间：2012-08-10T00:44:48.210
> 
> 标签：mysql, database, vb.net

i have this code:

```
 Private Sub btnAdd_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnAdd.Click

    If txtCode.Text <> "878" Then
        If ((txtCode.Text <> "") And (txtRefNo.Text <> "") And (txtPayee.Text <> "") And (txtOffice.Text <> "") And (txtAddress.Text <> "") And (txtParticulars.Text <> "") And (txtPPA.Text <> "") And (txtAmount.Text <> "")) Then
            Try
                If IsNumeric(txtAmount.Text) = False Then
                    MsgBox("Amount value should be in correct number format! e.g: 10000.00 or 10,000.00", MsgBoxStyle.Exclamation)
                    Exit Sub
                End If

                modGlobalFunctions.Connection.Close()
                modGlobalFunctions.connectDatabase()

                modGlobalFunctions.DateTimeNow = String.Format("{0:yyyy/MM/dd}", DateTime.Now)

                Dim Reader As MySqlDataReader
                Dim Amount As Double = Double.Parse(txtAmount.Text)

                Reader = modGlobalFunctions.executeQuery("SELECT * FROM obligations " & _
                                                         "WHERE ref_no='" & txtRefNo.Text & "'")
                If Reader.HasRows Then
                    MessageBox.Show("Could not insert duplicate entries for REFERENCE NO.!", "Form Validations", MessageBoxButtons.OK, MessageBoxIcon.Error)
                    Reader.Close()
                    modGlobalFunctions.Connection.Close()

                Else
                    modGlobalFunctions.Connection.Close()
                    modGlobalFunctions.connectDatabase()

                    modGlobalFunctions.executeNonQuery("INSERT INTO obligations (resp_id, year_id, expenditure_id, ref_no, payee, office, address, particulars, ppa, amount, date_entered, date_edited, signature1, position1, signature2, position2) " & _
                                                       "VALUES ('" & RespCenterId & "', " & _
                                                               "'" & YearId & "', " & _
                                                               "'" & txtExpId.Text & "', " & _
                                                               "'" & modGlobalFunctions.addslashes(txtRefNo.Text) & "', " & _
                                                               "'" & modGlobalFunctions.addslashes(txtPayee.Text) & "', " & _
                                                               "'" & modGlobalFunctions.addslashes(txtOffice.Text) & "', " & _
                                                               "'" & modGlobalFunctions.addslashes(txtAddress.Text) & "', " & _
                                                               "'" & modGlobalFunctions.addslashes(txtParticulars.Text) & "', " & _
                                                               "'" & modGlobalFunctions.addslashes(txtPPA.Text) & "', " & _
                                                               "'" & Amount & "', " & _
                                                               "'" & modGlobalFunctions.DateTimeNow & "', " & _
                                                               "'" & modGlobalFunctions.DateTimeNow & "', " & _
                                                               "'" & Signature1 & "', " & _
                                                               "'" & Position1 & "', " & _
                                                               "'" & Signature2 & "', " & _
                                                               "'" & Position2 & "')")

                    MsgBox("Record has been added!", MsgBoxStyle.Information)
                    modGlobalFunctions.Connection.Close()

                    Me.Close()
                    Dispose()
                    frmObligations.MdiParent = frmMain
                    frmObligations.Show()
                    frmObligations.obligationLoadGrid()

                End If

            Catch ex As Exception
                MessageBox.Show(ex.Message, "BIMS", MessageBoxButtons.OK, MessageBoxIcon.Error)
            End Try

        Else
            MsgBox("Please fill up all form fields!", MsgBoxStyle.Exclamation)
            modGlobalFunctions.Connection.Close()
        End If

        modGlobalFunctions.Connection.Close()

    Else

        If ((txtCode.Text <> "") And (txtRefNo.Text <> "") And (txtPayee.Text <> "") And (txtOffice.Text <> "") And (txtAddress.Text <> "") And (txtParticulars.Text <> "")) Then
            Try

                modGlobalFunctions.Connection.Close()
                modGlobalFunctions.connectDatabase()

                modGlobalFunctions.DateTimeNow = String.Format("{0:yyyy/MM/dd}", DateTime.Now)

                Dim Reader As MySqlDataReader

                Reader = modGlobalFunctions.executeQuery("SELECT * FROM obligations " & _
                                                         "WHERE ref_no='" & txtRefNo.Text & "'")
                If Reader.HasRows Then
                    MessageBox.Show("Could not insert duplicate entries for REFERENCE NO.!", "Form Validations", MessageBoxButtons.OK, MessageBoxIcon.Error)
                    Reader.Close()
                    modGlobalFunctions.Connection.Close()
                Else
                    modGlobalFunctions.Connection.Close()
                    modGlobalFunctions.connectDatabase()

                    modGlobalFunctions.executeNonQuery("INSERT INTO obligations (resp_id, year_id, expenditure_id, ref_no, payee, office, address, particulars, date_entered, date_edited, signature1, position1, signature2, position2) " & _
                                                       "VALUES ('" & RespCenterId & "', " & _
                                                               "'" & YearId & "', " & _
                                                               "'" & txtExpId.Text & "', " & _
                                                               "'" & modGlobalFunctions.addslashes(txtRefNo.Text) & "', " & _
                                                               "'" & modGlobalFunctions.addslashes(txtPayee.Text) & "', " & _
                                                               "'" & odGlobalFunctions.addslashes(txtOffice.Text) & "', " & _
                                                               "'" & modGlobalFunctions.addslashes(txtAddress.Text) & "', " & _
                                                               "'" & modGlobalFunctions.addslashes(txtParticulars.Text) & "', " & _
                                                               "'" & modGlobalFunctions.DateTimeNow & "', " & _
                                                               "'" & modGlobalFunctions.DateTimeNow & "', " & _
                                                               "'" & Signature1 & "', " & _
                                                               "'" & Position1 & "', " & _
                                                               "'" & Signature2 & "', " & _
                                                               "'" & Position2 & "')")

                    MsgBox("Record has been added! You can now add project title!", MsgBoxStyle.Information)
                    frmProject.MdiParent = frmMain
                    frmProject.Show()
                    frmProject.Label2.Text = txtRefNo.Text
                    Me.Enabled = False

                End If

            Catch ex As Exception
                MessageBox.Show(ex.Message, "BIMS", MessageBoxButtons.OK, MessageBoxIcon.Error)
            End Try

        Else
            MsgBox("Please fill up all form fields!", MsgBoxStyle.Exclamation)
            modGlobalFunctions.Connection.Close()
        End If

        modGlobalFunctions.Connection.Close()

    End If

End Sub 
```

What do you think is the problem why Signature1, Position1, Signature2 and Position2 doesn't store in the database. It works fine before until i put the if code because of the category... by the way here's the code for signature1, position1, signature2 and position2:

Signature1:

```
 Private Sub cbSignatory1_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs)
    Try
        modGlobalFunctions.Connection.Close()
        modGlobalFunctions.connectDatabase()

        Reader = modGlobalFunctions.executeQuery("SELECT person_id FROM persons WHERE person_name='" & cbSignatory1.Text & "'")

        If Reader.HasRows Then
            While Reader.Read
                Signature1 = Reader("person_id").ToString()
            End While
        End If

        Reader.Close()

        modGlobalFunctions.Connection.Close()

     Catch ex As Exception
        MessageBox.Show(ex.Message, "BIMS", MessageBoxButtons.OK, MessageBoxIcon.Error)
    End Try

    modGlobalFunctions.Connection.Close()
End Sub 
```

Signature2:

```
Private Sub cbSignatory2_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs)
    Try
        modGlobalFunctions.Connection.Close()
        modGlobalFunctions.connectDatabase()

        Reader = modGlobalFunctions.executeQuery("SELECT person_id FROM persons WHERE person_name='" & cbSignatory2.Text & "'")

        If Reader.HasRows Then
            While Reader.Read
                Signature2 = Reader("person_id").ToString()
            End While
        End If

        Reader.Close()

        modGlobalFunctions.Connection.Close()

    Catch ex As Exception
        MessageBox.Show(ex.Message, "BIMS", MessageBoxButtons.OK, MessageBoxIcon.Error)
    End Try

    modGlobalFunctions.Connection.Close()
End Sub 
```

Position1:

```
Private Sub cbPosition1_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs)
    Try
        modGlobalFunctions.Connection.Close()
        modGlobalFunctions.connectDatabase()

        Reader = modGlobalFunctions.executeQuery("SELECT position_id FROM positions WHERE position_name='" & cbPosition1.Text & "'")

        If Reader.HasRows Then
            While Reader.Read
                Position1 = Reader("position_id").ToString()
            End While
        End If

        Reader.Close()

        modGlobalFunctions.Connection.Close()

    Catch ex As Exception
        MessageBox.Show(ex.Message, "BIMS", MessageBoxButtons.OK, MessageBoxIcon.Error)
    End Try

    modGlobalFunctions.Connection.Close()
End Sub 
```

Position2:

```
Private Sub cbPosition2_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs)
    Try
        modGlobalFunctions.Connection.Close()
        modGlobalFunctions.connectDatabase()

        Reader = modGlobalFunctions.executeQuery("SELECT position_id FROM positions WHERE position_name='" & cbPosition2.Text & "'")

        If Reader.HasRows Then
            While Reader.Read
                Position2 = Reader("position_id").ToString()
            End While
        End If

        Reader.Close()

        modGlobalFunctions.Connection.Close()

    Catch ex As Exception
        MessageBox.Show(ex.Message, "BIMS", MessageBoxButtons.OK, MessageBoxIcon.Error)
    End Try

    modGlobalFunctions.Connection.Close()
End Sub 
```

any suggestions?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:13:47.673

I bet `Person_ID` and `position_id` are numeric types in your database. Right? The reason it's not inserting because you wrapped it with single quotes:

```
 "'" & Signature1 & "', " & _        // <== here
 "'" & Position1 & "', " & _
 "'" & Signature2 & "', " & _
 "'" & Position2 & "' 
```

Numeric values are not wrap with single quotes. One more thing, I suggest you use `Command` and `parameters` to avoid SQL Injection.

Example based on your code:

```
Dim sqlStatement AS String = "INSERT INTO obligations (resp_id, year_id, expenditure_id, "
sqlStatement &= "ref_no, payee, office, address, particulars, ppa, amount, date_entered, "
sqlstetement &= "date_edited, signature1, position1, signature2, position2) "
sqlstetement &= "VALUES (@resp_id, @year_id, @expenditure_id, "
sqlStatement &= "@ref_no, @payee, @office, @address, @particulars, @ppa, @amount, @date_entered, "
sqlstetement &= "@date_edited, @signature1, @position1, @signature2, @position2) "

Using xConn AS New MySQLConnection(connStrHere)
    Using xComm AS New MySQLCommand()
        With xComm
            .Connection = xConn
            .CommandType = CommandType.Text
            .CommandText = sqlStatement
            .Parameter.AddWithValue("@resp_id", RespCenterId)
            .Parameter.AddWithValue("@year_id", YearId)
            .Parameter.AddWithValue("@expenditure_id", txtExpId.Text)
            ' continue with other parameters
            ' .....
            ' until you reach the last parameters  '
            .Parameter.AddWithValue("@signature1", Signature1)
            .Parameter.AddWithValue("@position1", Position1)
            .Parameter.AddWithValue("@signature2", Signature2)
            .Parameter.AddWithValue("@position2", Position2)
        End With
        Try
            xConn.Open()
            xComm.ExecuteNonQuery()
            MsgBox("Record has been added!", MsgBoxStyle.Information)
        Catch ex AS MySQLException
            MsgBox(e.Message, MsgBoxStyle.Exclamation)
        Finally
            xConn.Open()
        End try
    End Using
End Using 
```

# sql - 如何获取“CREATE TABLE”查询？

> ID：11894008
> 
> 赞同：0
> 
> 时间：2012-08-10T00:44:58.223
> 
> 标签：sql, sql-server-2008, bcp

当我右键单击我的视图并单击“脚本视图为”时，我收到以下错误：

> 属性 TextHeader 不适用于视图“[dbo].[TableName]”。此对象的此属性可能不存在，或者由于访问权限不足而无法检索。文本已加密。(Microsoft.SqlServer.Smo)

我可以用来`bcp`获取表的转储，还可以创建[此处](http://msdn.microsoft.com/en-us/library/ms191232.aspx)给出的格式文件。该表有大约 60 列，我不想手动编写`CREATE TABLE`查询。有没有办法自动做到这一点？

我希望那

```
BULK INSERT DB.dbo.TableName
FROM 'E:\Databases\TableName'
WITH (FORMATFILE = 'E:\Databases\TableName.Fmt');
GO 
```

会做到这一点，但看起来表本身应该存在于数据库中，然后我才能执行上述查询。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:01:32.273

您可以从 INFORMATION_SCHEMA.Columns 构造创建表语句。就像是：

```
select (column_name + ' ' + data_type +
        (case when character_maximum_length is not null
              then '('+character_maximum_length+')'
              else ''
         end) + ','
       ) as ColumnDef
from Information_Schema.columns
order by ordinal_position 
```

这可能已经足够好了。例如，如果您必须处理数字，或者希望“is null”准确，则可以使其更复杂。

将结果复制到新窗口中，添加 create table 语句，删除最后的逗号并添加最后的结束括号。

您可以在更复杂的 SQL 语句中完成所有最后一步，但一次性完成更容易手动完成。

# jquery - jquery 选择器使用（this）作为表单元素

> ID：11894009
> 
> 赞同：0
> 
> 时间：2012-08-10T00:45:29.700
> 
> 标签：jquery, forms, file-upload, syntax

不知道如何为这个尴尬的标题道歉。我有这个脚本可以检查文件扩展名以确保它们是 .mp3。我只是为了克服使用哪个选择器来获取文件名。

例子：

```
<form name="uploadsong1" action="" enctype="multipart/form-data" method="post" onsubmit="return ExtensionsOkay();">
<input name="song1" type="file" accept="*.mp3" />
etc.. 
```

ExtensionsOkay 首先获取字段值....我知道这是问题所在...

```
var fieldvalue = $(this).$('input[type=file]').value; 
```

问题来自我有多个上传表单的事实。uploadsong1、uploadsong2 等的表单名称...

因此，根据我的推理，我需要获取作为表单名称的“this”，然后是作为文件的输入。（输入名称像表单名称一样增加 1、2、3 等）。

我知道我的语法必须是错误的获取字段值...帮助..谢谢！？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:46:54.653

尝试

```
var fieldvalue = $(this).find('input[type=file]').val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T02:08:09.750

如果你说你想`ExtensionsOkay()`从多个表单中调用同一个函数，你应该将它与 jQuery 绑定，而不是在一个内联`onsubmit="..."`属性中。（实际上您通常应该避免使用内联事件属性。）

```
$("form").submit(ExtensionsOkay); 
```

*然后*，在函数`this`中将引用有问题的表单，因此您可以使用它来获取提交的特定表单中的字段值。以下是在 中选择字段的两种不同方法`this`：

```
function ExensionsOkay(event) {
    var fieldvalue = $(this).find('input[type=file]').val();    
    // or
    var fieldvalue = $('input[type=file]', this).val();
    // and then if you want to prevent the form submitting:
    event.preventDefault();
} 
```

当 jQuery 调用您的函数时，它会将与提交事件关联的事件对象作为参数传递（无论您如何命名参数，但大多数人使用`event`或`e`- 如果您不需要使用事件对象，您不需要'不必声明参数）。

如果您不需要从除提交处理程序之外的任何地方调用此函数，那么您不需要单独定义它并将其关联为处理程序，只需执行以下操作：

```
$("form").submit(function(e) {
    var fieldvalue = $(this).find('input[type=file]').val();
    // etc
    if (someCondition)
       e.preventDefault();
}); 
```

请注意，`$("form")`您将获得页面上的所有表单。要选择其中的一些，请给相关的一个类并说`$("form.classNameHere")`。

# sql-server-2008 - SQL Server 获取最大值

> ID：11894010
> 
> 赞同：0
> 
> 时间：2012-08-10T00:45:30.477
> 
> 标签：sql-server-2008

我有下表：

```
ID  Date   FirstName  Dept
1   1/2/12 James      Act
1   2/5/12 Mike       IT
2   5/6/12 Joe        HR
2   7/6/12 Keith      IT 
```

我需要为每个 ID 执行此操作，我需要获取最大日期。我需要为每个具有最大日期的 ID 的记录显示 ID、日期、名字、部门。因此，在这种情况下，对于 ID 为 1，我将显示 1 2/5/12 Mike IT 如何在 SQL Server T-SQL 中执行此操作？

我知道我需要分组。

表名是 TblAct

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:48:55.590

您将使用该`MAX()`功能`GROUP BY`

```
select t1.id, t1.date, t1.fname, t1.dept
from tblAct t1
inner join
(
  SELECT Max(Date) maxdate, ID
  from TblAct
  GROUP BY id
) t2
  on t1.id = t2.id
  and t1.date = t2.maxdate 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/5b4f7/5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:09:13.020

您可以使用窗口/排名功能做到这一点：

```
select ID, Date, FirstName, Dept
from (select t.*,
             row_number() over (partition by id order by date desc) as seqnum
      from t
     ) t
where seqnum = 1 
```

这是按日期以相反的顺序对每个 id 的所有行进行排序。然后它选择其中的第一个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T01:18:35.223

不要使用分组：

```
select * from tblAct t1
where date=(select max(date) from tblAct where t1.id = id) 
```

享受就好。

# c - 为什么 free() 不需要长度参数？

> ID：11894018
> 
> 赞同：3
> 
> 时间：2012-08-10T00:46:26.307
> 
> 标签：c, memory-management

> **可能重复：**
> [C 编程：free 如何知道要释放多少？](https://stackoverflow.com/questions/1518711/c-programming-how-does-free-know-how-much-to-free)

我突然想到为什么`free(myPtr)`不需要长度参数？它如何知道要释放多少内存？

我只能猜测它会跟踪它为每个特定的起始地址分配了多少内存。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T00:49:22.770

这是因为 malloc 保存有关已分配块长度的信息，通常位于返回给程序的地址之前的位置。实现为 size_t 分配额外的存储空间，将大小放在那里，添加 sizeof(size_t)，并将其作为 malloc 指针返回给您并不罕见。然而，该标准不要求这种实现，因此替代实现是可能的，例如基于散列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T00:55:16.060

当 C 分配内存时，它会记录与它给你的指针相关的长度。（通常在内存块之前的区域。但这是一个实现细节。）它保留某种形式的内存块表或列表，当您释放该内存时，C 根据该块的长度查找关于指针的值。

这就是为什么您传递给的指针必须`free`与您从`malloc`. 如果不是这样，C 会感到困惑并且找不到正确的内存块（或其长度），并且很可能最终“释放”一些它从未打算触及的内存。（如果这样做，您最终可能会遇到一种称为“堆损坏”的情况，这真的很糟糕——从那时起，C 可能会做各种古怪的事情，比如试图在现有的中间分配一些内存阻止和破坏那里的任何东西。）

# netbeans - 无法将 NetBeans 中的转到文件功能与包含路径中的文件一起使用

> ID：11894019
> 
> 赞同：2
> 
> 时间：2012-08-10T00:46:30.220
> 
> 标签：netbeans, netbeans-7.2

我想对包含路径中的文件使用 NetBeans 中的转到文件功能，但我不能。无论如何打开它还是没有实现？我正在为 PHP 使用 NetBeans 7.2。

谢谢，

# c++ - 打开 Watcom 中的 STD_OUTPUT_HANDLE

> ID：11894025
> 
> 赞同：0
> 
> 时间：2012-08-10T00:47:34.060
> 
> 标签：c++

当我尝试使用像 STD_OUTPUT_HANDLE 这样的常量时，它会给我一个错误并说它不存在。我猜 STD_OUTPUT_HANDLE 必须包含在 Windows.H 中，而 Open Watcom 没有，或者至少在 16 位编译器中没有。

但如果我包含“cstdlib”库，我会得到有用的函数，如 SetConsoleTextAttribute() 或 System()，或类似的其他函数。

但是我不能使用很多函数，例如 SetConsoleTextAttribute()，因为它们需要 STD_OUTPUT_HANDLE 作为第一个参数。

有什么办法可以解决这个问题吗？或者以某种方式包含一个不同的库以获得 STD_OUTPUT_HANDLE？

# c# - C# Winforms 将项目添加到 ComboBox 的更短方式

> ID：11894026
> 
> 赞同：0
> 
> 时间：2012-08-10T00:47:38.550
> 
> 标签：c#, winforms, combobox

我可以知道是否有更短的方法可以将项目添加到组合框？目前我只添加了 20 个看起来已经很长的项目，如果我有 100 个项目要添加到组合框中怎么办？

我的代码：

```
private void loadSharePricesComboBox()
{
    comboComSymbol.Items.Add("BARC");
    comboComSymbol.Items.Add("DEB");
    comboComSymbol.Items.Add("DOM");
    comboComSymbol.Items.Add("EZJ");
    comboComSymbol.Items.Add("GFS");
    comboComSymbol.Items.Add("IHG");
    comboComSymbol.Items.Add("JD.");
    comboComSymbol.Items.Add("LAD");
    comboComSymbol.Items.Add("LLOY");
    comboComSymbol.Items.Add("MRW");
    comboComSymbol.Items.Add("NXT");
    comboComSymbol.Items.Add("OCDO");
    comboComSymbol.Items.Add("RBS");
    comboComSymbol.Items.Add("SMWH");
    comboComSymbol.Items.Add("SPD");
    comboComSymbol.Items.Add("STAN");
    comboComSymbol.Items.Add("SYR");
    comboComSymbol.Items.Add("TALK");
    comboComSymbol.Items.Add("TSCO");
    comboComSymbol.Items.Add("WMH");

    comboComSymbol.SelectedIndex = -1;
} 
```

非常感谢您的帮助！谢谢你。:)

加法代码（对于我问西蒙怀特黑德的问题）：

```
private void btnDownloadXML_Click(object sender, EventArgs e)
{
    using (WebClient client = new WebClient())
    {
        client.DownloadFile("http://www.lse.co.uk/chat/" + comboDownloadXML.SelectedItem,
                            @"..\..\sharePriceXML\" + comboDownloadXML.SelectedItem + ".xml");
    }
    MessageBox.Show("Download Completed! File has been placed in the folder sharePriceXML!");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:55:56.667

你试过这个`AddRange()`方法吗？

我没有测试过：

```
private void loadSharePricesComboBox()
{

     comboComSymbol.Items.AddRange(new string[]{"BARC", "DEB", ... etc});

    comboComSymbol.SelectedIndex = -1;
} 
```

上的 MSDN[`.AddRange`](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.objectcollection.addrange.aspx)可能会给你一个更好的主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T00:57:06.363

```
foreach(var item in "BARC,DEB,DOM,...".Split(',')) comboComSybol.Items.Add(item); 
```

或者

```
var items = new [] { "BARC", "DEV", "DOM" };
foreach(var item in items) comboComSymbol.Items.Add(item); 
```

或者您可以保存更多代码并在上述 2 种方法上使用 AddRange。

```
var items = new [] { "BARC", "DEV", "DOM" };
comboComSymbol.Items.AddRange(items); 
```

如果您正在开始一个新项目，请查看 WPF 而不是 winforms。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T01:01:09.793

使用[ListBox.ObjectCollection.AddRange](http://msdn.microsoft.com/en-us/library/z018s5az.aspx)
你可以像这样使用它：
`comboComSymbol.Items.AddRange(new string[] {"ABC", "DEF", "GHI"});`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T00:58:43.403

使用泛型`List<T>`进行数据绑定。

```
class Symbols
{
public string Name{get;set;}
}

var Symb= new List<Symbols> { new Symbols() { Name = "Abc"}, new Person() { Name = "BC" }};
        comboBox1.DisplayMember = "Name";
        comboBox1.DataSource = Symb;
        comboBox1.DataBindings.Add("SelectedItem", Symb, "Name"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T00:59:42.417

为了节省代码大小..为什么不在文件中列出它们？

```
void loadSharePricesComboBox(string fileName) {
    using (StreamReader sr = new StreamReader(fileName)) {
        while (!sr.EndOfStream) {
            comboComSymbol.Items.Add(sr.ReadLine());
        }
    }
} 
```

编辑：作为对您的评论的回应..我只会加载文件，没有扩展名..这样会容易得多：

```
void loadSharePricesComboBox(string path) {
    foreach (string file in Directory.GetFiles(path, "*.xml")) {
        comboComSymbol.Items.Add(Path.GetFileNameWithoutExtension(file));
    }
} 
```

传入要从中加载 XML 文件名的路径，可能像这样：

```
loadSharePricesComboBox(@"..\..\sharePriceXML\"); 
```

这将加载所有 XML 文件名，不包括它们的扩展名，为您提供所需的列表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T01:07:01.850

这段代码：

```
string[] str = {
                "BARC","DEB","DOM","EZJ","GFS","IHG","JD.","LAD","LLOY","MRW",
                "NXT","OCDO","RBS","SMWH","SPD","STAN","SYR","TALK","TSCO","WMH"
                };

 loadSharePricesComboBox(str); 
```

你的方法：

```
private void loadSharePricesComboBox(string[] strArr)
    {
        comboComSymbol.Items.AddRange(strArr);
        comboComSymbol.SelectedIndex = -1;
    } 
```

# sharepoint - 我可以使用一个表单来添加和编辑列表项吗？

> ID：11894027
> 
> 赞同：1
> 
> 时间：2012-08-10T00:47:47.833
> 
> 标签：sharepoint

我为我的列表创建了自定义编辑表单和自定义添加表单。两种表单具有相同的 FormFields，它们仅在 ControlMode 标记上有所不同。在添加表单 ControlMode="New" 和编辑表单中：ControlMoe="Edit"。当我尝试将编辑表单用作 NewForm 时，在所有输入框中我看到文本“...字段值”插入空框。当我尝试使用添加表单作为 EditForm 时，所有输入框都是空的字段值。我可以以某种方式同时使用一个 aspx 文件作为 newForm 和 EditForm 来不复制 aspx 文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-13T00:44:38.703

**对于 sharepoint webpart 页面（站点页面）：**不，您不能为两者使用相同的表单 **对于 Sharepoint 应用程序页面：**是的，您可以。您几乎可以完全控制您的申请页面。

**有关站点页面和应用程序页面差异的更多信息：http:** [//akifkamalsyed.wordpress.com/2010/06/12/sharepoint-application-pages-vs-site-pages/](http://akifkamalsyed.wordpress.com/2010/06/12/sharepoint-application-pages-vs-site-pages/) http://jwalin.wordpress.com/ 2008/05/26/站点页面和应用程序页面之间的差异/

# xmpp - xmpp pubsub：基于存在的交付

> ID：11894028
> 
> 赞同：2
> 
> 时间：2012-08-10T00:47:51.037
> 
> 标签：xmpp, openfire

“presence_based_delivery”在 openfire 上根本不起作用，或者我错过了什么？订阅者必须填写“订阅选项”吗？

这就是我所做的：

1.  节点配置

    ```
    "pubsub#presence_based_delivery" = 1 
    "pubsub#deliver_payloads" = 1
    "pubsub#persist_items" = 1
    "pubsub#max_items" = -1 (for infinite number of items) 
    ```

2.  User1 订阅 NodeA 并下线。

3.  订阅 NodeA 的 User2 向其发布项目。
4.  User1 上线但未收到任何已发布项目的通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-15T16:54:19.807

根据扩展的文档，如果用户离线，presence_based 交付不会向用户发送事件：http: [//xmpp.org/extensions/xep-0060.html#impl-offline](http://xmpp.org/extensions/xep-0060.html#impl-offline)

# jquery - jQuery 的 hover() 事件不适合定位鼠标位置。有什么修复吗？

> ID：11894030
> 
> 赞同：-2
> 
> 时间：2012-08-10T00:48:14.807
> 
> 标签：jquery

你看，当你尝试从 jQuery 的 hover() 事件中获取鼠标位置时，你得到的是鼠标进入目标区域的点，而不是鼠标进入目标区域后停止的点。Html 的 title 属性通过在停止位置而不是入口点显示工具提示来正确处理这种情况。有什么方法可以找到停靠点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T00:53:04.783

请参阅有关[鼠标位置的 jQuery 教程](http://docs.jquery.com/Tutorials%3aMouse_Position)

```
<script type="text/javascript">
$(document).ready(function(){
   $(document).mousemove(function(e){
      $('#status').html(e.pageX +', '+ e.pageY);
   }); 
})
</script> 
```

可以使用`e.pageX`and`e.pageY`获取鼠标的位置，然后获取元素的 X 和 Y，并使用它来获取元素的局部 X 和 Y。

# php - 使用 Behat/Mink 时出现类型错误

> ID：11894031
> 
> 赞同：1
> 
> 时间：2012-08-10T00:48:15.403
> 
> 标签：php, behat, mink

以下代码的执行：

```
<?php

class InheritedFeatureContext extends Behat\MinkExtension\Context\MinkContext
{
    /**
     *Simulates hovering over a link
     *
     * @When /^I mouse over "([^"]*)"$/
     */
        public function iMouseOver($link)
        {
        $this->getSession()->getPage()->findLink($link)->mouseOver();
        }

    /**
     *Waits for the appearence of a drop down
     *
     * @Then /^I wait for the suggestion box to appear$/
     */
    public function iWaitForTheSuggestionBoxToAppear()
    {
        $this->getSession()->wait(5000, "$('.suggestions-results').children().length > 0");
    }
} 
```

产生错误消息：

```
 TypeError: $ is not a function 
```

在参照：

```
$this->getSession()->wait(5000, "$('.suggestions-results').children().length > 0"); 
```

这段代码以前工作得很好。有任何想法吗

上下文：这是 Behat/Mink 功能的一部分

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-16T08:20:13.373

您可能没有包含 jQuery，但您尝试在这里使用它：

```
$this->getSession()->wait(5000, "$('.suggestions-results').children().length > 0"); 
```

wait() 方法接受 javascript 作为它的第二个参数。它等待脚本评估为真（作为第一个参数传递的最大毫秒数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-01T11:27:11.423

If i am not wrong this code is from behat mink example at site.

That example was using [http://en.wikipedia.org/wiki](http://en.wikipedia.org/wiki) as base url and wikipedia does have jquery script attached with it. In your case have you checked your url location if it contains jquery or not

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T04:33:52.890

很可能您没有包含 jQuery。

如果您不想为了支持这个 Mink 测试而将 jQuery 添加到您的项目中，请尝试将您的行更改为以下内容，这将完成同样的事情，但不使用 jQuery：

`$this->getSession()->wait(5000, "document.querySelector('.suggestions-results').children.length > 0");`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-12-19T13:24:49.140

这适用于我使用 jQuery 而不是`$`快捷方式：

```
$this->getSession()->wait(5000, "jQuery('.suggestions-results').children().length > 0"); 
```

# java - 如何在列表视图中列出 FTP 服务器上的项目？（安卓）

> ID：11894044
> 
> 赞同：0
> 
> 时间：2012-08-10T00:50:34.020
> 
> 标签：java, android, ftp

好的，所以我正在学习 Java，但我不知道如何在列表视图中列出和显示 FTP 服务器的内容，我也希望能够下载文件。

如果可以的话，请给我看代码片段，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:38:16.983

这些基本上是两个不同的问题。1\. 如何从 FTP 获取数据 2\. 如何使用 ListView。

天然橡胶的答案。1 可以在 stackoverflow 上找到：[Android FTP 库](https://stackoverflow.com/questions/1567601/android-ftp-library)

为天然橡胶。[2，请参考这里](http://developer.android.com/guide/topics/ui/layout/listview.html)的android文档，检查SDK中的示例项目或简单地谷歌搜索“android listview example”之类的东西。

# python - Python 对象生命周期特征

> ID：11894045
> 
> 赞同：3
> 
> 时间：2012-08-10T00:50:48.060
> 
> 标签：python, oop, posix, scrapy

注意：如果您知道任何（非详细）库代码可以满足我的要求，请启发 C/C++ 程序员，我会接受它作为答案。

我有一个全局变量设置为以下类的实例。其目的是允许我设置一些手动中断点，以便`printf`在 scrapy 蜘蛛中放置一些快速而肮脏的调试点（我特别需要在满足某些条件来调整解析器时中断，有一些极其罕见的输入数据异常） ——改编[自此](http://docs.python.org/faq/library#id12)。

操作系统是 OS X 10.8。

```
import termios, fcntl, sys, os

class DebugWaitKeypress(object):
    def __init__(self):
        self.fd = sys.stdin.fileno()
        self.oldterm = termios.tcgetattr(self.fd)
        self.newattr = termios.tcgetattr(self.fd)
        self.newattr[3] = self.newattr[3] & ~termios.ICANON & ~termios.ECHO
        termios.tcsetattr(self.fd, termios.TCSANOW, self.newattr)

        self.oldflags = fcntl.fcntl(self.fd, fcntl.F_GETFL)
        fcntl.fcntl(self.fd, fcntl.F_SETFL, self.oldflags | os.O_NONBLOCK)

    def wait(self):
        sys.stdin.read(1)

    def __del__(self):
        print "called del"
        termios.tcsetattr(self.fd, termios.TCSAFLUSH, self.oldterm)
        fcntl.fcntl(self.fd, fcntl.F_SETFL, self.oldflags) 
```

当我按 Ctrl-C 并且进程正在展开时，我得到以下异常：

```
Exception AttributeError: "'NoneType' object has no attribute 'tcsetattr'" in <bound method DebugWaitKeypress.__del__ of <hon.spiders.custom_debug.DebugWaitKeypress object at 0x108985e50>> ignored 
```

我想我错过了一些关于对象生命周期机制的东西？怎么补救这种情况。AFAIK 任何类实例都应该在导入代码之前被销毁，不是吗？以声明/定义的相反顺序。

如果在进程退出后终端没有搞砸，我会忽略这一点：D

**编辑：**

Delian 对 seth 的回答的评论让我明白我需要使用类似 C`main()`的函数，或任何其他作为根函数占主导地位的函数/生成器并在那里初始化上下文。这样，当进程停止`__exit__`时，上下文管理器的方法将被调用。而且我不必在每次`wait()`通话时重新编程终端流。

尽管重新编程的成本可能无关紧要，但很高兴知道如何在 python 中使用这些基本的 C/C++ 语义。

**编辑2：**

与标准输入混淆时，Twisted（scrapy 使用）会变得很糟糕。所以我不得不解决文件IO的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T01:21:19.207

长话短说：`__del__`对于这个目的没用（几乎任何其他目的；你可能应该忘记它的存在）。如果您想要确定性清理，请使用上下文管理器。

> AFAIK 任何类实例都应该在导入代码之前被销毁，不是吗？以声明/定义的相反顺序。

那是C++。忘了它。Python 不关心这一点，事实上它甚至不关心大多数需要做的事情。整个 Python 语言中没有声明之类的东西，模块级变量存储在本质上是一个无序关联数组中。变量不存储对象，它们存储引用（*不是*C++ 引用，它们基本上是没有指针算术的指针）——对象在堆上，不知道关于变量、绑定、语句或语句顺序的事情.

此外，当一个对象被垃圾收集时，*它是否完全被 gc'd*是未定义的。由于引用计数，您在 CPython 中获得了*大部分*确定性的图片，但即使在您有周期的那一秒，它也会下降。结果是它`__del__`可能在任何时间点被调用（包括当模块的一半已经被拆除时）或根本不被调用。定义`__del__`相互引用的多个对象也很麻烦，尽管一些 GC 努力做正确的事情。

底线是，你可以在`__del__`运行时假设很少，所以你不能做很多。您可以最后一次处理本应通过另一种方法清理但没有清理的资源，仅此而已。经验法则：*永远不要*依赖它*来做任何*强制性的事情。

相反，创建一个[上下文管理器并通过`with`](http://docs.python.org/py3k/reference/compound_stmts.html#the-with-statement). 您可以进行确定性清理，而无需担心对象的生命周期。因为，说实话，对象生命周期和资源生命周期是两个完全不同的东西，并且只纠缠在 C++ 中，因为它是*在那个环境中*进行资源管理的最佳方式。在 Python 中，RAII 不适用，而是我们有这个：

```
with <context manager> as var:
    # do something
# "context closed", whatever that means - for resources, usually cleanup 
```

[顺便说一句，您可以通过contextlib](http://docs.python.org/py3k/library/contextlib.html#contextlib.contextmanager)更方便地定义它（从您的版本快速音译，可能包含错误或丑陋）：

```
from contextlib import contextmanager

@contextmanager
def debug_wait_keypress():
    fd = sys.stdin.fileno()
    oldterm = termios.tcgetattr(fd)
    newattr = termios.tcgetattr(fd)
    newattr[3] = newattr[3] & ~termios.ICANON & ~termios.ECHO
    termios.tcsetattr(fd, termios.TCSANOW, newattr)
    oldflags = fcntl.fcntl(fd, fcntl.F_GETFL)
    fcntl.fcntl(fd, fcntl.F_SETFL, oldflags | os.O_NONBLOCK)
    try:
        yield
    finally:
        termios.tcsetattr(fd, termios.TCSAFLUSH, oldterm)
        fcntl.fcntl(fd, fcntl.F_SETFL, oldflags) 
```

您的`wait`方法成为免费功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T01:09:50.537

如果`__del__`被调用，它会在对象的引用计数为零之后的某个时间发生，并且可能直到程序结束时才会发生，并且不会以任何特定的顺序发生。您也不能依赖`__del__`.

`termios`在您的情况下，python在调用之前清理了对模块的引用`DebugWaitKeyPress.__del__`。这就是你收到`'NoneType' object has no attribute 'tcsetattr'`消息的原因。`termios`是`None`在您尝试使用它的时候。

我猜你最好实现一个[上下文管理器](http://docs.python.org/library/stdtypes.html#typecontextmanager)，然后把你的`__del__`代码放在`__exit__`.

然后你就可以这样说：

```
with DebugWaitKeypress(...) as thing:
    do_something_with_it(thing)
# here, __exit__() is called to do cleanup 
```

从[`object.__del__`文档](http://docs.python.org/reference/datamodel.html#object.__del__)：

> 由于调用 __del__() 方法的不稳定环境，在执行期间发生的异常将被忽略，而是向 sys.stderr 打印警告。此外，当 __del__() 被调用以响应模块被删除时（例如，当程序执行完成时），__del__() 方法引用的其他全局变量可能已经被删除或正在被拆除（例如进口机器关闭）。出于这个原因， __del__() 方法应该做维护外部不变量所需的绝对最小值。从 1.5 版开始，Python 保证名称以下划线开头的全局变量会在其他全局变量被删除之前从其模块中删除；如果不存在对此类全局变量的其他引用，

# jquery - 我可以在精灵图像上叠加文本吗？

> ID：11894050
> 
> 赞同：0
> 
> 时间：2012-08-10T00:52:05.307
> 
> 标签：jquery, css, sprite

这真的是一个**两部分的问题**。我正在努力解决两个我无法弄清楚的问题。

**问题 #1**。为什么我的精灵图像显示两个图像。我希望它显示底部，然后在鼠标悬停时显示顶部。我已经发布了显示的屏幕截图。下面是我正在使用的 HTML 和 css 样式。精灵图像为 50x40。

![在此处输入图像描述](../Images/be06ade6bf05a170cb87d5115aa66e8f.png) ![在此处输入图像描述](../Images/b32bcf5af96feb598af3f31f4da1de3f.png)

HTML

```
<li>
    <div class="image-wrapper">
        <div class="image-options">
            <a href="#" class="likeButton" title="Like image"><span>Like</span></a>
        </div>
        <a href="/view_profile.php?id=5693">
            <img src="photos/files/5693/grid/e1cd6ee3042f35dc7a538a5e516507e3.jpeg" />
        </a>
    </div>
</li> 
```

CSS：

```
.image-wrapper {
position : relative;
display  : inline-block;
}

image-wrapper img {
position : relative;
}

.image-wrapper .image-options {
position : absolute;
top      : 0;
right    : 0;
left     : 0;
height   : 40px;
z-index  : 2;
display  : none;
background : #eeeeee;

zoom: 1;
filter: alpha(opacity=90);
opacity: 0.9;
}

.image-options .likeButton {
display: block;
width: 50px;
height: 40px;
border-right: 1px solid #dedede;
background: url('/bootstrap/img/like.png') bottom;
text-indent: -99999px;
}

.likeButton:hover {
background-position: 0 0;
} 
```

**问题 #2**。为什么我的文字没有

> 像

出现？我试图将它显示在精灵图像上方的中心。

有什么想法我可能做错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:10:15.827

1.  你`.image-wrapper .image-options`很高`40px`- 所以它会显示整个精灵。要仅显示一半，您必须将其高度更改为`20px`

2.  你`.image-options .likeButton`有一个`text-indent: -9999px`- 这`Like`就是隐藏文本的原因

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:09:16.467

与其直接使用图像标签，不如使用该背景图像设置父超链接？

```
<a href="#" class="likeButton" title="Like image">Like</a>   
<a href="/view_profile.php?id=5693" class="somethingelse">
   <br/>
</a>

 .likeButton{
    display: block;
    width: 200px;
    height: 20px;
    background-image: url('http://i.stack.imgur.com/xANmb.png');
    text-align: center;
    verticle-align: middle;
    background-repeat: no-repeat;
    background-color: grey;
}
.likeButton:hover{
    background-position: 0px -20px
}
.somethingelse{
    display: block;
    width: 200px;
    height: 40px;
    background-image: url('http://i.stack.imgur.com/lAKId.jpg');
    text-align: center;
    verticle-align: middle;
    background-repeat: no-repeat;
    background-position: -10px -60px;
    /*background-size: 45px 45px;*/
} 
```

任何文本都可以在任何图像上移动。背景图像大小和位置也可以设置。

我添加了一个例子来玩：http: [//jsfiddle.net/webwarrior/wtKzc/23/](http://jsfiddle.net/webwarrior/wtKzc/23/)

hth。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T01:13:15.383

**答案#1**

你有

```
.image-wrapper .image-options {
  display  : none;
} 
```

所以图标没有显示。将其更改为`display:block`适用于我的另一个图像。也许你必须设置

```
.image-options .likeButton {
  height: 40px;
} 
```

为了`height: 20px;`削减你的形象，我不知道。

**答案#2**

“喜欢”没有出现是因为

```
.image-options .likeButton {
  text-indent: -99999px;
} 
```

你应该删除那条线。

# php - MYSQL 查询与 OR

> ID：11894052
> 
> 赞同：2
> 
> 时间：2012-08-10T00:52:12.237
> 
> 标签：php, mysql, sql

我目前正在使用以下 SQL 查询：

```
("SELECT * FROM `form` WHERE '1' IN (show1) AND 'agree' NOT IN (test)") 
```

但是我似乎无法弄清楚如何在其中添加 OR .. 如果它说“同意”或“不同意”，我需要过滤掉

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T00:56:35.733

假设 show1 和 test 是列并且这与 Mysql 相关，这应该可以工作：

```
"SELECT * 
FROM `form` 
WHERE show1 IN ('1') 
    AND test NOT IN ('agree', 'disagree')" 
```

我更喜欢将列放在比较的左侧:)

# html - 为什么在 CSS 中使用“>”？

> ID：11894054
> 
> 赞同：13
> 
> 时间：2012-08-10T00:52:50.813
> 
> 标签：html, css, styles, paradigms

如果我想为 div 内的所有 p 元素添加样式，为什么要使用

```
div > p{

  *style here*

} 
```

而不仅仅是

```
div p{

  *style here*

} 
```

此外，如果我想使用伪类，为什么我会选择使用“>”

```
div > p:first-child{

  *style here*

} 
```

代替

```
 div p:first-child{

   *style here*

 } 
```

有什么好处或坏处吗？那个操作员是做什么的？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-10T00:55:21.923

这是直接的孩子，而不是递归匹配。

**CSS**

```
div > p {

} 
```

**HTML**

```
<div>
   <p>Match</p>
   <span>
      <p>No match</p>
   </span>
</div> 
```

* * *

**CSS**

```
div p {

} 
```

**标记**

```
<div>
   <p>Match</p>
   <span>
      <p>Match</p>
   </span>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T00:54:50.270

因为它意味着直接的孩子。

您的第二个示例将匹配`p`此示例中的

```
<div>
  <header>
    <p>
    </p>
  </header>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T01:00:02.930

`>`和`(space) 是*关系选择器*，分别表示“孩子”和“后代”。除了其他人指出的语义差异之外，子选择器的[计算速度更快，因为它避免了对不匹配元素的冗余 DOM 树遍历](https://stackoverflow.com/q/11218698/1081234)。`

# javascript - 在 d3.js 中配置固定布局的静态图

> ID：11894057
> 
> 赞同：19
> 
> 时间：2012-08-10T00:53:52.167
> 
> 标签：javascript, graph, svg, d3.js, force-layout

我有`<script type="text/javascript">`一个静态图的工作代码示例（仅部分），使用`d3.js`如下：

```
 /* Create graph data */
        var nodes = [];
        for (var i = 0; i < 13; i++) 
        {
            var datum = {
                "value": i
            };
            nodes.push(datum);
        }

        var links = [{"source": 0, "target": 1},
                     {"source": 1, "target": 2},
                     {"source": 2, "target": 0},
                     {"source": 1, "target": 3},
                     {"source": 3, "target": 2},
                     {"source": 3, "target": 4},
                     {"source": 4, "target": 5},
                     {"source": 5, "target": 6},
                     {"source": 5, "target": 7},
                     {"source": 6, "target": 7},
                     {"source": 6, "target": 8},
                     {"source": 7, "target": 8},
                     {"source": 9, "target": 4},
                     {"source": 9, "target": 11},
                     {"source": 9, "target": 10},
                     {"source": 10, "target": 11},
                     {"source": 11, "target": 12},
                     {"source": 12, "target": 10}];

        /* Create force graph */
        var w = 800;
        var h = 500;

        var size = nodes.length;
        nodes.forEach(function(d, i) { d.x = d.y = w / size * i});

        var svg = d3.select("body").append("svg")
                    .attr("width", w)
                    .attr("weight", h);

        var force = d3.layout.force()
                      .nodes(nodes)
                      .links(links)
                      .linkDistance(200)
                      .size([w, h]);

        setTimeout(function() {

            var n = 400
            force.start();
            for (var i = n * n; i > 0; --i) force.tick();
            force.stop();

            svg.selectAll("line")
               .data(links)
               .enter().append("line")
               .attr("class", "link")
               .attr("x1", function(d) { return d.source.x; })
               .attr("y1", function(d) { return d.source.y; })
               .attr("x2", function(d) { return d.target.x; })
               .attr("y2", function(d) { return d.target.y; });

            svg.append("svg:g")
               .selectAll("circle")
               .data(nodes)
               .enter().append("svg:circle")
               .attr("class", "node")
               .attr("cx", function(d) { return d.x; })
               .attr("cy", function(d) { return d.y; })
               .attr("r", 15);

            svg.append("svg:g")
               .selectAll("text")
               .data(nodes)
               .enter().append("svg:text")
               .attr("class", "label")
               .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; })
               .attr("text-anchor", "middle")
               .attr("y", ".3em")
               .text(function(d) { return d.value; });

        }, 10); 
```

它产生了这种相当混乱的布局：

![在此处输入图像描述](../Images/75b06fd038e97a40b7c9bc9ddf17063b.png)

虽然它在技术上是正确的图形，但理想的布局应该是这样的（忽略不同的视觉图形）：

![在此处输入图像描述](../Images/484188b9bdbe1445c538fc0179b9659c.png)

注意布局应该是固定的，这样重新加载页面不会改变每个节点的定位；布局也应该是静态的，因为没有动画效果并且节点不可拖动。这两个要求已经在上面的脚本中实现了。

那么我应该如何进一步配置此`d3`脚本以生成第二张图片中显示的布局？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-10T04:51:58.280

首先，**增加充电强度**，**减少链接距离**。这样做更加强调全局结构而不是本地连接。此外，如果电荷强度足够大，排斥电荷甚至会将直接连接的节点推得更远，从而有效增加链接距离，同时提供更好的整体结构。（更强的电荷力的缺点是图形初始化更混乱，但这对于静态布局来说应该不是问题。）

[![](../Images/d1775b482a66d886e52856fdfcfdf927.png)](http://bl.ocks.org/3311124)

其次，您可能需要**增加迭代次数**或**添加自定义力**以获得更好的结果。强制布局通常适用于任意图，但不能保证它们会产生最佳（甚至是好的）结果。对于您可以进行简化假设的任何图（例如，[树](http://mbostock.github.com/d3/talk/20110921/parent-foci.html)），您可能会应用额外的力或约束来鼓励模拟收敛到更好的解决方案。

# thread-safety - ARM 中的原子操作

> ID：11894059
> 
> 赞同：21
> 
> 时间：2012-08-10T00:53:55.810
> 
> 标签：thread-safety, kernel, arm, atomic

我一直在为 ARM 开发嵌入式操作系统，但是即使在参考了 ARMARM 和 linux 源代码之后，我仍然对架构有一些不了解的地方。

原子操作。

ARM ARM 说加载和存储指令是原子的，它的执行保证在中断处理程序执行之前完成。通过查看验证

```
arch/arm/include/asm/atomic.h :
    #define atomic_read(v)  (*(volatile int *)&(v)->counter)
    #define atomic_set(v,i) (((v)->counter) = (i)) 
```

但是，当我想使用 cpu 指令（atomic_inc、atomic_dec、atomic_cmpxchg 等）以原子方式操作此值时，问题就出现了，这些指令将 LDREX 和 STREX 用于 ARMv7（我的目标）。

ARMARM 在本节中没有说明中断被阻止的任何内容，因此我假设 LDREX 和 STREX 之间可能发生中断。它确实提到的是关于锁定内存总线，我猜这仅对 MP 系统有帮助，因为 MP 系统可能有更多的 CPU 试图同时访问相同的位置。但是对于 UP（可能还有 MP），如果在 LDREX 和 STREX 的这个小窗口中触发定时器中断（或 SMP 的 IPI），异常处理程序执行可能会更改 cpu 上下文并返回新任务，但是令人震惊的部分现在出现了，它执行'CLREX'并因此删除前一个线程持有的任何独占锁。那么在 UP 系统上使用 LDREX 和 STREX 比使用 LDR 和 STR 的原子性有多好？

我确实读过一些关于独占锁监视器的内容，所以我有一个可能的理论，即当线程恢复并执行 STREX 时，操作系统监视器会导致此调用失败，可以检测到，并且可以使用新的重新执行循环过程中的价值（分支回到 LDREX），我在这里吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-11T18:04:04.513

load-linked/store-exclusive 范式背后的想法是，如果存储在加载后*很快*跟随，没有干预内存操作，并且如果没有其他任何东西触及该位置，则存储*可能*会成功，但如果有什么else 已经触及了商店*肯定*会失败的位置。不能保证商店有时不会无缘无故倒闭；但是，如果加载和存储之间的时间保持在最短，并且它们之间没有内存访问，则循环如下：

```
do
{
  new_value = __LDREXW(dest) + 1;
} while (__STREXW(new_value, dest)); 
```

通常可以依靠几次尝试就成功。如果根据旧值计算新值需要一些重要的计算，则应将循环重写为：

```
do
{
  old_value = *dest;

  new_value = complicated_function(old_value);
} while (CompareAndStore(dest, new_value, old_value) != 0);

... Assuming CompareAndStore is something like:

uint32_t CompareAndStore(uint32_t *dest, uint32_t new_value, uint_32 old_value)
{
  do
  {
    if (__LDREXW(dest) != old_value) return 1; // Failure
  } while(__STREXW(new_value, dest);
  return 0;
} 
```

如果在计算新值时发生某些变化 *dest，则此代码必须重新运行其主循环，但如果 __STREXW 由于某些其他原因失败，则只需重新运行小循环[希望不太可能，鉴于__LDREXW 和 __STREXW 之间只有大约两条指令]

**附录** “根据旧值计算新值”可能很复杂的情况示例是“值”实际上是对复杂数据结构的引用。代码可以获取旧的引用，从旧的数据结构派生新的数据结构，然后更新引用。与“裸机”编程相比，这种模式在垃圾收集框架中出现的频率要高得多，但即使在编程裸机时也可以通过多种方式出现。普通的 malloc/calloc 分配器通常不是线程安全/中断安全的，但用于固定大小结构的分配器通常是。如果一个人有一个由 2 次方的数据结构组成的“池”（比如 255 个），则可以使用以下内容：

```
#define FOO_POOL_SIZE_SHIFT 8
#define FOO_POOL_SIZE (1 << FOO_POOL_SIZE_SHIFT)
#define FOO_POOL_SIZE_MASK (FOO_POOL_SIZE-1)

void do_update(void)
{
  // The foo_pool_alloc() method should return a slot number in the lower bits and
  // some sort of counter value in the upper bits so that once some particular
  // uint32_t value is returned, that same value will not be returned again unless
  // there are at least (UINT_MAX)/(FOO_POOL_SIZE) intervening allocations (to avoid
  // the possibility that while one task is performing its update, a second task
  // changes the thing to a new one and releases the old one, and a third task gets
  // given the newly-freed item and changes the thing to that, such that from the
  // point of view of the first task, the thing never changed.)

  uint32_t new_thing = foo_pool_alloc();
  uint32_t old_thing;
  do
  {
    // Capture old reference
    old_thing = foo_current_thing;

    // Compute new thing based on old one
    update_thing(&foo_pool[new_thing & FOO_POOL_SIZE_MASK],
      &foo_pool[old_thing & FOO_POOL_SIZE_MASK);
  } while(CompareAndSwap(&foo_current_thing, new_thing, old_thing) != 0);
  foo_pool_free(old_thing);
} 
```

如果不会经常有多个线程/中断/任何试图同时更新同一事物的东西，这种方法应该允许安全地执行更新。如果可能尝试更新同一项目的事物之间存在优先级关系，则最高优先级的事物在第一次尝试时保证成功，次高优先级的事物将在任何未被抢占的尝试中成功最高优先级的任务，等等。如果一个正在使用锁定，则想要执行更新的最高优先级任务将不得不等待较低优先级的更新完成；使用 CompareAndSwap 范式，最高优先级的任务将不受低级任务的影响（但会导致低级任务不得不做浪费的工作）。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-10T01:11:24.233

好的，从他们的[网站上](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dht0008a/ch01s02s01.html)得到了答案。

如果上下文切换在进程执行 Load-Exclusive 之后但在执行 Store-Exclusive 之前调度进程，则 Store-Exclusive 在进程恢复时返回假否定结果，并且不会更新内存。这不会影响程序功能，因为进程可以立即重试操作。

# c# - 将日期更改为列表中的所有对象并更新

> ID：11894062
> 
> 赞同：0
> 
> 时间：2012-08-10T00:54:19.713
> 
> 标签：c#, entity-framework, datetime, ef-code-first

我正在尝试将日期更改为列表中的所有锻炼，其他属性工作正常，只有当我更改日期时才会出现问题。我尝试了不同的故障排除方法，但都没有奏效。我尝试使用 updatedWorkout.Date 作为锻炼开始 = 超出范围。如果我使用 old.Date，那么，我怎样才能添加新的 7 天日期？

也许有更好的方法来做到这一点？

这是我的方法：

```
 private int UpdateForAllWorkouts(IWorkoutCommand updatedWorkout)
    {
        try
        {   // get schedule
            var schedule = _scheduleRepository.GetIncludeWorkouts(updatedWorkout.ScheduleId);
            // get workouts within the schedule by schedule id
            var workout = schedule.Workouts.FirstOrDefault(w => w.Id == updatedWorkout.Id);

            for (var workoutStart = workout.Date; workoutStart <= schedule.ToDate; workoutStart = workoutStart.AddDays(7))
            {
                // get specdfic workout by workout id and start time
                var old = schedule.Workouts.Single(w => w.Date == workoutStart && w.StartTime == workout.StartTime);

                var tmp = new Model.Workout
                              {
                                  Id = old.Id,
                                  CourseId = updatedWorkout.CourseId,
                                  InstructorId = updatedWorkout.InstructorId,
                                  Date = //<---problem
                                  StartTime = updatedWorkout.StartTime,
                                  EndTime = updatedWorkout.EndTime,
                                  ScheduleId = updatedWorkout.ScheduleId,
                                  WeekOffSet = updatedWorkout.WeekOffSet.Days
                              };
            }

            return updatedWorkout.Id;
        }
        catch (Exception ex)
        {
            throw new Exception("");
        }
    } 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T01:39:39.677

请考虑检查我们的 DateTime 属性的值。它们的值可能小于 SQL 服务器允许的日期时间字段。

*   在分配“tmp”对象之前，updatedWorkOut 对象的 Date 值是多少？
*   您的“旧”对象是 null 还是 date 的值是多少？

你的代码似乎没问题。该问题是 DateTime 属性和字段值的基础。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:09:08.073

我认为您可以为 7 使用循环。

像这样 ：

```
var workoutStart = workout.Date;
while(true){

    if(workoutStart <= schedule.ToDate){
    // Do something
    }else{
        break;
    }

    workoutStart = workoutStart.AddDays(7);
} 
```

# java - Java - 将 JTextArea 中的字符串转换为图像

> ID：11894064
> 
> 赞同：0
> 
> 时间：2012-08-10T00:54:44.530
> 
> 标签：java, string, image

我有一个字符串显示在我的程序中，但我想知道如何将字符串的输出转换为与原始字符串相同的图像。不知道这是否可以做到。

我希望输出与 JTextArea 完全相同。这可能吗？如果可以，我应该调查什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T01:34:00.970

assylias 打败了我，但看到我离得太近了，我想我还是会发布它

```
public class TestFrame extends JFrame {

    private JTextArea text;

    public TestFrame() {

        setDefaultCloseOperation(EXIT_ON_CLOSE);

        setTitle("Text");

        setLayout(new BorderLayout());
        text = new JTextArea();
        add(new JScrollPane(text));

        JButton btnPrint = new JButton("Print");
        add(btnPrint, BorderLayout.SOUTH);

        btnPrint.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {

                BufferedImage img = new BufferedImage(text.getWidth(), text.getHeight(), BufferedImage.TYPE_INT_RGB);
                Graphics2D g2d = img.createGraphics();
                text.printAll(g2d);
                g2d.dispose();

                try {
                    ImageIO.write(img, "png", new File("StringToGraphics.png"));
                } catch (IOException ex) {
                    ex.printStackTrace();
                }

            }
        });

        text.setWrapStyleWord(true);
        text.setColumns(15);
        text.setLineWrap(true);
        text.setText("I have a string which is displayed in my program, but I'm wondering how I would convert the output of the string into an image identical to the original string. No idea if this can be done.\n\nI would like the output to be exactly what is is the JTextArea. Is this possible and if so what should I look into?");

        setSize(200, 300);

        setLocationRelativeTo(null);
        setVisible(true);

    }

} 
```

由此

![框架](../Images/d8444e09774225e8ecc67f006daaaae0.png)

对此

![结果](../Images/2cee5818a39f18f15083ce7b46145c8e.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T01:25:10.293

您可以使用[ScreenImage](http://tips4java.wordpress.com/2008/10/13/screen-image/)`createImage`使用该方法从组件创建图像。总而言之，这是它在幕后所做的（使用 JLabel）：

```
public static void main(String args[]) throws AWTException, IOException {

    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            JFrame frame = new JFrame("test");
            JLabel text = new JLabel("text");
            frame.add(text);
            frame.setPreferredSize(new Dimension(100, 100));
            frame.pack();
            frame.setVisible(true);

            BufferedImage img = getImage(text);
            try {
                ImageIO.write(img, "png", new File("C:/temp/img.png"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
    });
}

private static BufferedImage getImage(JComponent c) {
    Rectangle region = c.getBounds();
    BufferedImage image = new BufferedImage(region.width, region.height, BufferedImage.TYPE_INT_RGB);
    Graphics2D g2d = image.createGraphics();
    g2d.translate(-region.x, -region.y);
    g2d.setColor(c.getBackground() );
    g2d.fillRect(region.x, region.y, region.width, region.height);
    c.paint(g2d);
    g2d.dispose();
    return image;
} 
```

# c++ - 确定字段是否为 NULL

> ID：11894067
> 
> 赞同：2
> 
> 时间：2012-08-10T00:54:51.300
> 
> 标签：c++, visual-c++, odbc

我正在开发一个使用 CDatabase 和 CRecordset 类进行数据库访问的 MFC 应用程序。数据库未动态绑定到基于 MFC 的窗体或窗口。

我在检测记录的特定字段何时为 NULL 时遇到问题。

我的大部分代码工作正常。我连接到数据库、发出查询和读回记录都没有问题。但是，有几个字段我得到了垃圾字符串，当我检查数据库时，它告诉我有问题的字段是 NULL。

NULL 在某些情况下是合理的，因此我需要我的代码简单地正确处理它，而不是阻止它。但是，从**GetFieldValue**为相关字段返回的值**不**为空。我得到一些不是有效指针的随机值。显然我需要做一些不只是检查指针值的空值测试。

**CRecordset**类中有一个名为**IsFieldNull**的方法，但它似乎无法正常工作，或者我没有正确调用它。我在网上没有找到关于如何使用这种方法的好例子。文档说它需要一个参数，一个指向“字段数据成员”的空指针，但没有定义应该是什么。我见过传递从零开始的字段索引的示例，以及传递带有字段名称的字符串常量的示例。我已经尝试了这两种想法，但似乎都不起作用。

事实上，调用 CRecordset::IsFieldNull()**总是**会让我的代码飞到永无止境的地方。

CRecordset 的另一个成员名为**IsFieldStatusNull**，据称它应该采用字段索引，但我发现调用它也失败了。

最后，我的问题是，如何检查 CRecordset 中的特定字段是否为 NULL？

* * *

我真的不认为现有代码与问题相关，但由于它已被请求，这里是（简化以删除 try/catch 块）：

```
CDBVariant v;
CRecordset theRecordSet(&theDB); // Pointer to my CDatabase object
query.Format("SELECT B.*, B.photographerWebsite AS website FROM gbm_shootphotographers AS A INNER JOIN gbm_photographers AS B ON A.photographerID=B.photographerID WHERE A.shootID=%d;", shootID );  
BOOL result = theRecordSet.Open(AFX_DB_USE_DEFAULT_TYPE, query );
memset(&v,0,sizeof(CDBVariant)); // Zero it out before retrieving field
// 1
theRecordSet.GetFieldValue("website", v);
// 2
CString website = *v.m_pstring; 
```

对于“网站”字段有数据的记录，检索得很好。字符串完全符合预期。但是，对于“网站”为 NULL 的记录，我得到一个带有垃圾的非空字符串，或者更糟糕的是，一个错误的字符串指针。坦率地说，我不明白为什么它会向 CDBVariant 对象输出*任何内容*以获得 NULL领域，但问题就在这里。

我尝试在位置 #1 和位置 #2调用**IsFieldNull**和**IsFieldStatusNull 。**无论哪种方式都会进入杂草。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T06:57:50.013

在访问数据之前，`CDBVariant`您必须检查其`m_dwType`成员。

*   `m_pstring`仅在 type 为时对访问有效`DBVT_STRING`
*   当 DB 字段为 null 时，variant 将是`DBVT_NULL`并且没有成员对访问有效
*   等，请参阅[http://msdn.microsoft.com/en-US/library/4hhd4f44(v=vs.80](http://msdn.microsoft.com/en-US/library/4hhd4f44(v=vs.80) )

CDBVariant 是一个`union`，这意味着尽管从技术上讲，您可以随时读取任何成员，但读取您不应该读取的成员会导致未定义的行为。在您的情况下，您将获得可能打印到垃圾字符串或立即崩溃的随机指针。

# ios - Xcode 拒绝在 iPhone 上安装应用程序

> ID：11894072
> 
> 赞同：0
> 
> 时间：2012-08-10T00:55:49.733
> 
> 标签：ios, xcode, installation

我有运行 Xcode 4.4.1 的 Mountain Lion 和一个 iPhone 项目。我可以在模拟器中运行它。它也为手机构建，但它拒绝在手机上运行。运行时，它立即报告：

```
error: failed to launch '/Users/ion/Library/Developer/Xcode/
DerivedData/Proj-demgmyrpwcixoufcnwxoupxmksey/Build/Products/
Debug-iphoneos/Proj.app/Proj' -- No such file or directory
(/Users/ion/Library/Developer/Xcode/DerivedData/Proj-
demgmyrpwcixoufcnwxoupxmksey/Build/Products/Debug-iphoneos/Proj.app/Proj) 
```

网上和这里有很多关于清除 DerivedData、重启手机和电脑的讨论，但没有一个对我有帮助。

我注意到的一件事是，虽然我试图在 iPhone 4S 上运行它，但它正试图从我计算机的文件系统启动。它不应该说“/var/mobile/...”吗？

这使我的发展完全停止。

我的怀疑是它未能将应用程序安装到手机上，或者它混淆了手机和计算机的路径。

当我尝试在手机上运行 Xcode 时，是否有人对我如何诊断或以其他方式获得有关 Xcode 正在做什么的更详细信息有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:07:48.587

仅供参考，我最终确实解决了这个问题。这个问题原来是 Info.plist 文件中的一个功能列表中的一个错字。当然，这一定是有史以来最具误导性的错误描述之一。

# javascript - 显示多个推特分享按钮？

> ID：11894073
> 
> 赞同：1
> 
> 时间：2012-08-10T00:55:52.900
> 
> 标签：javascript, facebook, twitter

在我网站的某个页面上，用户有一个项目列表，如下所示：

```
<div id="item1">.....</div>
<div id="item2">.....</div>
<div id="item3">.....</div> 
```

这些 div 中的每一个在我的网站上都有自己的特殊链接，例如：

```
example.com/items/1
example.com/items/2
example.com/items/3 
```

我想在每个单独的 div 中显示一个 twitter 共享按钮，单击该按钮后，用户可以将特定项目的 url 推到他们的 twitter 上。

有没有一个插件可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:41:41.480

不需要第三方插件。使用[Twitter 插件](https://twitter.com/about/resources/buttons#tweet)：

```
<!DOCTYPE html>
<html lang="de">
    <head>

        <!-- meta -->
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="robots" content="noindex, nofollow">

        <title>Twitter Share Buttons</title>

    </head>
    <body>
        <div id="item1"><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://example.com/items/1" data-text="Text to share 1">Tweet</a></div>
        <div id="item2"><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://example.com/items/2" data-text="Text to share 2">Tweet</a></div>
        <div id="item3"><a href="https://twitter.com/share" class="twitter-share-button" data-url="http://example.com/items/3" data-text="Text to share 3">Tweet</a></div>
        <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </body>
</html> 
```

# java - Java - 设置 JComponent 的确切位置

> ID：11894088
> 
> 赞同：1
> 
> 时间：2012-08-10T00:58:42.980
> 
> 标签：java, swing, position, layout-manager, jcomponent

我需要帮助在 JPanel 上设置 JLabel 的 x 和 y 位置，**而不是**北、南、西、东。

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T01:04:26.107

要让 JPanel 尊重确切的位置，您应该将其布局设置为空。然后，您可以`setLocation`在任何 JComponent 上使用来设置其在该 JPanel 中的位置。

```
JPanel panel = new JPanel();
panel.setLayout(null);
JLabel label = new JLabel("text");
label.setLocation(50, 20);
panel.add(label); 
```

但是，请注意绝对位置有几个缺点（在下面的评论中提到），您应该使用 LayoutManager 来定位您的组件。

# iphone - 对于具有 dispatch_async / GCD 崩溃的循环

> ID：11894093
> 
> 赞同：1
> 
> 时间：2012-08-10T00:59:13.463
> 
> 标签：iphone, grand-central-dispatch

所以我试图理解GCD。我有一个长时间运行的操作，在我下载后只是附加数据：

```
 NSFileManager *fileManager = [NSFileManager defaultManager];
        __block NSFileHandle *output;
        output = [NSFileHandle fileHandleForUpdatingAtPath:tempPath];
        __block NSError *error = nil;
        BOOL success;
        dispatch_queue_t stitchQueue = dispatch_queue_create("com.test", NULL);

for (NSString *packetName in listOfFiles) {
           dispatch_async(stitchQueue, {
                NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
                NSString *packetPath = [[self applicationDocumentsDirectory] stringByAppendingPathComponent:packetName];

            NSData *packetData = [[NSData alloc] initWithContentsOfFile:packetPath];

            [output seekToEndOfFile];
            [output writeData:packetData];

            [fileManager removeItemAtPath:packetPath error:&error];
            NSLog(@"Removed file after appending data success: %i Error: %@", success, [error localizedDescription]);
            [self updateManifestColumn:@"IsParsed" withValue:YES forFile:packetName inTable:tableName];

            packetData = nil;
            [packetData release];
            [pool release];
            });
        }
        [output closeFile]; 
```

//dispatch_async( // 数据拼接后执行我的下一个长期任务)

如果我删除 dispatch_async 调用，此代码将起作用。难道我做错了什么？当我使用 dispatch_async 运行它时，它成功完成了一次迭代然后崩溃。它在 NSFileHandle 上的错误访问时崩溃。它似乎在 1 次迭代后被释放。我不确定我需要做什么来解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T22:41:51.823

崩溃是由`__block`说明符引起的。通常，该块正在使用的周围范围内的每个对象变量都会在该块的生命周期内保留。这对于`dispatch_async`or尤其有用`dispatch_after`，并且意味着只要块未完成，对象就会有效。这是第一眼看不到的方块的真正力量。但是，当您要更改对象指针或原始变量值时，您需要使用`__block`说明符。此说明符以不同方式处理对象变量并且不按块保留它们，因此允许它们在块完成之前被释放。这正是发生在你身上的事情。排队：

```
output = [NSFileHandle fileHandleForUpdatingAtPath:tempPath]; 
```

您正在创建自动发布的对象，该对象将在不久的将来发布。由于您正在使用`dispatch_async`这可能会在块仍在运行时发生，从而造成崩溃。

有两种解决方案：

*   您可以使您的局部变量成为类的实例变量，以延长该对象的生命周期，

*   但最简单的方法是删除`__block`，因为您不会在块内更改对象的指针，而且您根本不需要这个说明符。

# jquery - jquery菜单重复动画

> ID：11894099
> 
> 赞同：0
> 
> 时间：2012-08-10T01:00:27.240
> 
> 标签：jquery, animation

我正在使用我在网上找到的 jQuery 菜单，并且我已经成功地对其进行了样式设置并正确填充，但是下拉菜单的动画不断重复。我已经阅读了有关 .stopPropagation() 的信息，但这似乎不起作用...您可以尝试将鼠标悬停在“保险类型”链接上几次：http : [//jsfiddle.net/rPGaE/](http://jsfiddle.net/rPGaE/)明白了吗。任何想法如何解决这一问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:18:04.167

我认为这是因为菜单下拉动作是由整个“dropMe”类触发的。这意味着当菜单项下拉时，它们是“dropMe”类的一部分，可以重新触发下拉动画。我将链接的类更改为自己的类，称为“dropLink”，这是可以触发下拉的类。它有助于重复动画。这方面的一个例子是：http: [//jsfiddle.net/rPGaE/5/](http://jsfiddle.net/rPGaE/5/)

# c - 无法显示结果

> ID：11894103
> 
> 赞同：1
> 
> 时间：2012-08-10T01:00:55.840
> 
> 标签：c

我想知道我的代码有什么问题。当用户输入分数时，我无法打印出成绩。这是我的代码：

```
#include<stdio.h> 
int main() 
{ 
    int x,y,z;
    printf("Enter mark for Bahasa:");
    scanf("%d", &x);
    printf("Enter mark for english:");
    scanf("%d", &y);
    printf("Enter mark for Math:");
    scanf("%d", &z);

    if((x > 75) && ( y > 80) && (z > 60))
        printf(" Grade A");
    else if (( x > 75) && ( y < 80) && (z < 60))
        printf ("Grade B");
    else
        printf("honor");         
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:45:49.913

将行尾添加到您的`printf`. 像这样：

```
printf("honor\n"); 
```

如果您在命令行中工作，您的 shell 提示符可能会覆盖输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T02:48:01.927

首先你有一个差距。if 条件未涵盖的状态。如果用户准确输入 75、80 和 60 会怎样？如果我是你，我会使用 ">=" 而不是 ">" 和 "<=" 而不是 "<"。如果 x < 75 也根本不包括在内。

您可能会尝试将此语句放在“if”条件之前，以查看您究竟从中得到了什么`scanf()`。

```
printf("My inputs are %d, %d and %d\n",x ,y ,z); 
```

一旦你确定你的输入。然后检查你的条件。我认为那条线可能有问题（如前所述 x<75 根本没有涉及）：

```
else if (( x > 75) && ( y < 80) && (z < 60)); 
```

也许你真正需要的是

```
(x<=75) 
```

无论哪种方式，您的程序的示例运行都会有所帮助:-)

# boost-python - 使用 boost::python 时获取对 self 的引用

> ID：11894106
> 
> 赞同：5
> 
> 时间：2012-08-10T01:01:11.387
> 
> 标签：boost-python

我正在尝试使用 boost::python 将 Python 类移植到 C++，希望加快 Python 应用程序的执行（我移植到 C++ 的类占应用程序执行时间的约 30%）。

原始 Python 类的 init 如下所示：

```
class PyClass(object):
    def __init__(self, child):
        child.set_parent(self)
        ... 
```

如何在 C++ 构造函数中复制它？

如果我有一个 C++ 类：

```
class CClass
{
    // to get input args that match the Python class I need
    CClass(boost::python::object &child)
    {
         // but how do I get the boost::python::object self
         // as I only have *this in C++ ?
         CClass& c = boost::python::extract<CClass&>(child);
         c.set_parent(self);
    }

    ...
} 
```

谢谢，马克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T13:18:53.420

您可以通过 使用`this`指针`boost::python::ptr(this)`，如[本答案](https://stackoverflow.com/a/5056462/233201)中所述。

# javascript - 将 Javascript 数组中的文本转换为超链接

> ID：11894107
> 
> 赞同：0
> 
> 时间：2012-08-10T01:01:11.660
> 
> 标签：javascript, html

目前我有这个：http: [//jsfiddle.net/492cy/](http://jsfiddle.net/492cy/)

我想将 span id=textRange 设置为超链接。由于我有不同的文本（来自数组）填充 textRange，我希望每个文本（“a dude”、“a man”、“a human”）成为不同的超链接。因此最终结果将是：点击“a dude”会进入 website1.com，“a man”会进入 website2.com，“a human”会进入 website3.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:07:51.647

不确定您尝试使用哪个链接，但这有效并且会让您继续前进。你可以使用任何你想要的href，但这会告诉你如何更新`<a>`元素的href。

[jsFiddle 示例](http://jsfiddle.net/9b6Tc/)

```
function changeText() {
    document.getElementById('textRange').innerHTML=Texts[count];
    document.getElementById('textRange').href = "http://website" + count + '.com';
    count++;
    if (count == Texts.length) { count = '0'; }
    setTimeout(changeText, delay * 1000);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:09:19.383

这就是你想要的：

```
var delay = "3"; //how many seconds you wnat the delay to be
var count = '0';
var Texts = ["a dude", "a man", "a human"];
var Links = ["http://www.google.com", "http://www.yahoo.com", "http://www.bing.com"];

function changeText() {
    document.getElementById('textRange').innerHTML = "<a href='" + Links[count] + "'>" + Texts[count] + "</a>";
    count++;
    if (count == Texts.length) {
        count = '0';
    }
    setTimeout("changeText()", delay * 1000);
} 
```

[http://jsfiddle.net/492cy/4/](http://jsfiddle.net/492cy/4/)

# iphone - iCloud 增量数据

> ID：11894108
> 
> 赞同：1
> 
> 时间：2012-08-10T01:01:22.630
> 
> 标签：iphone, objective-c, ios, icloud

[阅读 iCloud 设计文档](https://developer.apple.com/library/ios/#documentation/General/Conceptual/iCloudDesignGuide/Chapters/DesigningForDocumentsIniCloud.html#//apple_ref/doc/uid/TP40012094-CH2-SW1)，它提到：

> 因为系统会跟踪文档的更改，所以它只能上传更改的部分，如步骤 2 所示。这种优化减少了 iCloud 网络流量，还减少了设备消耗的电量——这对于基于电池的设备很重要.

在我的场景中，我有一个`UIDocument`跟踪的 plist 文件。如果我用相同 plist、相同文件名、相同路径的副本替换 plist 文件怎么办？我知道元数据会更新，但整个文件会再次传输到 iCloud 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T06:06:20.810

iCloud 不根据 UID 进行跟踪，而是根据文件名进行跟踪。您的文件将被区分，只有更改将发送到 iCloud。

如果您想要 UID 跟踪，Apple 建议您将 UID 和文档架构版本添加到您的文件格式中（就像他们所做的那样）。

# xcode4.4 - Xcode 4.4：在不重新启动 Windows 的情况下重新加载 docset

> ID：11894110
> 
> 赞同：1
> 
> 时间：2012-08-10T01:01:35.610
> 
> 标签：xcode4.4

似乎在[不重新启动 Xcode 的情况下重新加载 docset](https://stackoverflow.com/questions/10432780/reloading-docset-without-restarting-xcode/11540598#11540598)中提供的脚本不再适用于 Xcode 的最新版本 4.4.1。

```
tell application "Xcode"
    load documentation set with path
        "~/Library/Developer/Shared/Documentation/DocSets/myDocSet.docset"
end tell 
```

需要退出然后重新启动 Xcode。

关于如何更新脚本以避免退出和重新启动的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T09:45:43.883

使用 Xcode 版本 4.5.1 (4G1004)，重新加载是自动完成的。

所以，不需要脚本:)

这是我用来生成文档的内容，也许它可以帮助你：

```
appledoc --project-name "MyProjectName" --project-company "Awesome Company" --no-repeat-first-par --output docset_folder --ignore .m . 
```

# jquery - 如何在 Django 表单中添加新的相关对象

> ID：11894111
> 
> 赞同：2
> 
> 时间：2012-08-10T01:01:56.793
> 
> 标签：jquery, django, jquery-ui, django-forms

类似于在管理站点上创建新外键对象的方式。我认为理想情况下这将是一个可重复使用的小部件，可以替换 Select 或 SelectMultiple 小部件。如果可能的话，我想用 Jquery 来做这件事，但我不确定如何准确地做到这一点。我最好的猜测是这个过程将是

1.  在 select/selectmultiple 字段旁边添加一个加号按钮
2.  使用新表单打开一个新表单窗口（弹出窗口）
3.  验证然后将弹出表单数据发布到数据库并关闭此窗口
4.  刷新原始页面上的 select/selectmultiple 字段，同时默认选择刚刚创建的对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T06:29:41.850

我也不喜欢 django 默认提供的选择/多选小部件。只需将所选内容连接到您的表单中即可获得更有用的东西真的很简单。我花了几分钟来设置。

看看它：[http ://harvesthq.github.com/chosen/](http://harvesthq.github.com/chosen/)

# visual-studio-2010 - 图片资源？

> ID：11894112
> 
> 赞同：0
> 
> 时间：2012-08-10T01:02:27.310
> 
> 标签：visual-studio-2010, resources, c++-cli

我已经苦苦挣扎了好几个小时，试图弄清楚如何在 C++/CLI 中使用资源。我已经搞砸了 resource.h/app.rc 文件以及托管的 resx 文件，但无济于事。

我只有几个 PNG 图像，我想与 PictureBox 一起使用，但我似乎无法弄清楚如何设置资源......

谢谢你的帮助，

亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T20:25:26.887

*   创建一个 Windows 窗体项目
*   将新资源文件 (resx) 添加到项目中
*   打开该文件，出现资源编辑器
*   在左上角切换到图像模式
*   在顶部单击“添加资源”，然后添加您的图像
*   在您的代码中以这种方式使用它：

    ```
    using namespace System::Resources;

    ResourceManager^ rm = gcnew ResourceManager("ImageResources.MyResources", GetType()->Assembly);

    pictureBox1->Image = safe_cast<Image^>(rm->GetObject(L"MyImage"); 
    ```

其中“ImageResources”是命名空间的名称，“MyResources”是 resx 文件的名称，“MyImage”是资源文件中图像的名称。

# git - 无法克隆 RhoHub 存储库 - 访问被拒绝

> ID：11894113
> 
> 赞同：1
> 
> 时间：2012-08-10T01:02:43.367
> 
> 标签：git, rhomobile

我已将我的 ssh 密钥添加到 RhoHub，但我仍然收到拒绝访问错误。有什么想法吗？

```
$ git clone git@git.rhohub.com:remcat/First App.git
Initialized empty Git repository in /home/Ramy/App.git/.git/
Access denied...
fatal: The remote end hung up unexpectedly

$ git clone 'git@git.rhohub.com:remcat/First App.git'
Initialized empty Git repository in /home/Ramy/First App/.git/
usage: git upload-pack [--strict] [--timeout=nn] <dir>
Error executing 'git-upload-pack'...
fatal: The remote end hung up unexpectedly 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T06:31:25.893

如果您的远程 repo url 包含空格，您可能需要在其周围添加引号：

```
git clone "git@git.rhohub.com:remcat/First App.git" 
```

否则，它将寻找一个名为 ' `App`' 的 repo，将其克隆到本地目录“ `App.git`”中，我怀疑这不是你想要的。

如果错误仍然存​​在，那么您需要检查 ssh 问题，例如“ [Heroku 推送主 ssh 问题](https://stackoverflow.com/a/6018945/6309)”中所述。

然后至少从一个`ssh -vvvT git@git.rhohub.com`.

但是，首先，请确保您的 url 中的空间不是这里的实际问题。

# iphone - 苹果集团崩溃报告如何？

> ID：11894114
> 
> 赞同：0
> 
> 时间：2012-08-10T01:02:49.637
> 
> 标签：iphone, ios

我收到了来自 iTunes connect 的崩溃报告。在“最常见的崩溃”表中，有几个实体。我想知道苹果如何将多个崩溃报告分类为一个实体？同样的原因？我可以假设它们是相同的根本原因吗？应用名称旁边的十六进制数字代表什么，例如 0xe7f96？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T12:26:02.467

Apple 用于对崩溃进行分组的算法是不公开的，所以你可能得到的只是猜测。

您不能假设一个“组”中的崩溃具有相同的崩溃原因，例如，如果您的应用程序由于内存泄漏而崩溃，您的应用程序中可能有多个可能导致应用程序在同一点崩溃。所以这取决于崩溃的类型。

要了解崩溃报告中显示的数据，请阅读此[技术说明 TN2123：](https://developer.apple.com/library/ios/technotes/tn2004/tn2123.html) Apple 的 CrashReporter。

> [十六进制数] 是堆栈跟踪帧内的程序计数器地址。对于第 0 帧，这通常是导致异常的指令的地址。对于更高的帧，这是该帧的返回地址。也就是说，对于第 N 帧，它指向当第 N - 1 帧引用的函数返回时将执行的下一条指令。

# php - 处理 php 页面上的错误的最佳方法？

> ID：11894115
> 
> 赞同：36
> 
> 时间：2012-08-10T01:02:53.397
> 
> 标签：php, exception, exception-handling, error-handling, try-catch

现在我的页面看起来像这样：

```
if($_GET['something'] == 'somevalue')
{
    $output .= 'somecode';

    // make a DB query, fetch a row
    //...
    $row = $stmt->Fetch(PDO::ASSOC);

    if($row != null)
    {
        $output .= 'morecode';

        if(somethingIsOK())
        {
            $output .= 'yet more page output';
        }
        else
        {
            $error = 'something is most definitely not OK.';
        }
    }
    else
    {
        $error = 'the row does not exist.';
    }
}
else
{
    $error = 'something is not a valid value';
}

if($error == '') // no error
{
    //display $output on page
}
else // an error
{
    // display whatever error occurred on the page
} 
```

我做事的方式很有效，但是对于可能显而易见的事情来说，它非常麻烦和乏味：假设我在代码中间的某个地方调用了一个函数，或者想要检查变量的值，或者验证数据库查询返回了一个有效的结果，如果它失败了我想输出一个错误？我将不得不制作另一个 if/else 块并将所有代码移动到新的 if 块中。这似乎不是一种聪明的做事方式。

我一直在阅读有关 try/catch 的内容，并且一直在考虑将我的所有代码放在 try 语句中，然后让代码在没有任何 if/else 块的情况下按顺序运行，如果出现故障，则抛出异常。根据我的阅读，这将停止执行并使其直接跳转到 catch 块（就像失败的 if 语句将转到 else 块一样），然后我可以在那里输出错误消息。但这是可接受的或标准的做法吗？

在构建和输出 HTML 页面的 php 应用程序中，处理错误（致命与否）的最佳方法是什么？我不想死在一个空白屏幕上，因为这对用户非常不友好，而是想在页面正文中输出一条消息，仍然允许页眉和页脚显示。

谢谢你的建议！

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-12T03:09:41.150

有很多方法可以解决这个问题，坦率地说，它们本质上都不是“正确的”。

您将不得不自己决定哪种方法对您来说更“舒适” - 它始终是偏好的问题（尽管您应该避免某些技术并且有充分的理由）。

这在很大程度上取决于您如何拆分逻辑，但是我倾向于将所有可以返回非致命错误的代码包含在函数中，并使用所述函数的返回值来指示存在错误。

对于[致命错误](http://en.wikipedia.org/wiki/Fatal_error)，我倾向于使用异常（带有`try-catch`块）。

现在要清楚：

*   非致命错误是您可以从中*恢复*的错误- 这意味着即使出现问题，仍然有一些代码可以执行并生成一些有价值的输出。例如，如果您想使用`NTP`协议获取当前时间，但服务器没有响应，您可以决定使用本地`time`功能并仍然向用户显示一些有价值的数据。
*   致命错误是您无法从中*恢复*的错误- 这意味着发生了非常糟糕的事情，您唯一能做的就是告诉您的用户该页面无法执行所要求的操作。例如，如果您从数据库中获取一些数据并得到`SQL Exception`- 没有要显示的有价值的数据，您只能通知用户这一点。

* * *

### 非致命错误（使用函数返回）

使用函数返回作为处理非致命问题的一种方式的一个很好的例子是一个函数试图在页面上显示某些文件的内容，而**这不是页面的主要目标**（例如，你会有一个在每一页上显示从文本文件中获取的徽章的功能 - 我知道这很牵强，但请耐心等待）。

```
function getBadge($file){
    $f = fopen($file,'r');
    if(!$f){
        return null;
    }
    .. do some processing ..
    return $badges;
}

$badges = getBadges('badges.txt');
if(!$badges){
    echo "Cannot display badges.";
} else {
    echo $badges;
}
.. carry on doing whatever page should be doing .. 
```

事实上，函数`fopen`本身就是一个例子——[它会返回](http://php.net/manual/en/function.fopen.php).

> 成功时返回文件指针资源，错误时返回 FALSE。

* * *

### 致命错误（使用异常 - try-catch）

当您有一些代码**需要执行**时，因为它正是用户想要的（例如从数据库中读取所有新闻并将它们显示给用户），您可以使用异常。让我们举一个简单的例子——一个用户访问了他的个人资料并想查看他收到的所有消息（现在假设它们以纯文本形式存储）。你可能有这样的功能：

```
function getMessages($user){
    $messages = array();
    $f = fopen("messages_$user.txt","r");
    if(!$f){
        throw new Exception("Could not read messages!");
    }
    ... do some processing ...
    return $messages;
} 
```

并像这样使用它：

```
try{
    ..do some stuff..
    $messages = getMessages($_SESSION['user'])); //assuming you store username in $_SESSION
    foreach($messages as $msg){
        echo $msg."<br/>";
    }
} catch(Exception $e){
    echo "Sorry, there was an error: ".$e->getMessage();
} 
```

现在，如果您有一个可以执行所有其他代码的“顶级”脚本，这可能会派上用场。这意味着，例如，在您的情况下，`index.php`您将拥有：

```
try{
    .. execute some code, perform some functions ..
} catch(Exception $e){
    echo "Sorry, there was an error: ".$e->getMessage();
} 
```

### 不要过度使用异常！

无论你做什么，永远不要使用异常来检查你可以从中恢复的东西。阅读[另一个问题](https://stackoverflow.com/questions/729379/why-not-use-exceptions-as-regular-flow-of-control)（完全归功于*Anton Gogolev*对此的一个很好的解释，以及其他回答者），了解为什么会这样。

### 进一步阅读

现在，要学习如何处理错误，没有比尝试几件事并看看什么对你有好处更好的方法了。您可能会发现以下内容很有用：

*   [W3School 关于 PHP 异常处理](http://www.w3schools.com/php/php_exception.asp)
*   [关于错误处理的简短教程](http://www.htmlgoodies.com/beyond/php/article.php/3472561/PHP-Tutorial-Error-Handling.htm)（类似于我的函数返回方法）
*   [关于 PHP 错误处理的详尽教程](http://www.devshed.com/c/a/PHP/Error-Handling-in-PHP-Coding-Defensively/)- 包括使用`trigger_error()`函数，我没有提到它，因为我不使用它，也不太了解它，但显然它真的很有用。**这是一本特别好的读物。**

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T15:00:03.217

PHP 有一个内置类[ErrorException](http://php.net/manual/en/class.errorexception.php)，用于将[PHP 错误](http://php.net/manual/en/errorfunc.constants.php)转换为异常，如果不处理，自然会停止执行。

异常改进了错误处理机制（try catch）和更好的调试信息（堆栈跟踪）。

将其包含在执行路径的最顶部（配置，或所有代码中首先包含的内容）：

```
 set_error_handler(function($nNumber, $strMessage, $strFilePath, $nLineNumber){
      throw new \ErrorException($strMessage, 0, $nNumber, $strFilePath, $nLineNumber);
 }, /*E_ALL*/ -1); 
```

虽然 PDO 支持抛出异常，但默认情况下它是关闭的，您必须启用它：

```
 $pdo->setAttribute(\PDO::ATTR_ERRMODE, \PDO::ERRMODE_EXCEPTION); 
```

如果使用 MySQL，您还希望出现未设置必填字段的错误以及默认情况下原谅的许多其他错误/警告：

```
 $pdo->exec("SET sql_mode = 'STRICT_ALL_TABLES'"); 
```

可以像在许多其他编程语言中一样使用[try catch finally](http://php.net/manual/en/language.exceptions.php)处理异常：

```
try
{
    echo $iAmAnUndefinedVariable;
}
catch(\Throwable $exception)
{
    /*[...]*/
} 
```

验证内容时，只需抛出异常：`throw new Exception("Missing URL variable userId!");`

如果 PHP 有朝一日彻底摆脱遗留的[错误报告](http://php.net/manual/en/function.error-reporting.php)并默认抛出异常（弃用 error_reporting() 并更改默认值），那就太好了。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-14T09:42:36.090

这更加优雅和可读。

```
try
{

    if($_GET['something'] != 'somevalue') 
    {
        throw new Exception ('something is not a valid value');
    }

    $output .= 'somecode';

    // make a DB query, fetch a row
    //...
    $row = $stmt->Fetch(PDO::ASSOC);

    if($row == null)
    {
        throw new Exception ('the row does not exist.');
    }

    $output .= 'morecode';

    if(somethingIsOK())
    {
        $output .= 'yet more page output';
    }
    else
    {
        throw new Exception ('something is most definitely not OK.');
    }

    echo $output;

}
catch (Exception $e)
{
    echo $e->getMessage();
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-13T00:39:07.180

Using`try-catch`是您可以使用的最干净的解决方案之一。

我做了一个例子，当发生错误时仍然显示页眉和页脚，使用转换为`try-catch`格式的代码：

**PHP：**

```
<?php
try {
    $output = array();
    if($_GET['something'] != 'somevalue') throw new Exception('something does not have a valid value.');
    $output[] = 'Some Code';
    $row = mt_rand(0, 10) < 5 ? null : mt_rand(0, 100);
    if($row === null) throw new Exception('The row does not exist.');
    $output[] = $row;
    if(!somethingIsOK()) throw new Exception('Something is most definitely not OK.');
    $output[] = 'Yet more page output';
} catch(Exception $e) {
    $output[] = 'Error: ' . $e->getMessage(); // To show output and error
    $output = array('Error: ' . $e->getMessage()); // To only show error
}
function somethingIsOK() {
    return mt_rand(0, 10) < 5;
}
?> 
```

**HTML：**

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
    <meta charset="UTF-8" />
    <title>PHP Error test</title>
    <style type="text/css">
body {
    background: #eee;
    text-align: center
}
#content {
    padding: 60px
}
#header {
    padding: 30px;
    background: #fff
}
#footer {
    padding: 10px;
    background: #ddd
}
    </style>
</head>
<body>
    <div id="header">Header</div>
    <div id="content">
<?php echo implode('<br />', $output); ?>

    </div>
    <div id="footer">Footer</div>
</body>
</html> 
```

**参考：**

*   **[PHP：例外 - 手册](http://php.net/manual/en/language.exceptions.php)**
*   **[PHP：捕捉 - 手册](http://php.net/manual/en/internals2.opcodes.catch.php)**

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-12T03:17:37.223

查询的 PDO 错误异常处理，实际上所有代码都应该运行：

```
try{

}

catch{

}

finally{

} 
```

这样做的原因是，当您可以大致确定在冗长的脚本中发生错误的位置时，它会使调试变得更加容易

更多信息在这里： http: [//php.net/manual/en/language.exceptions.php](http://php.net/manual/en/language.exceptions.php)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-19T01:27:02.527

创建错误处理程序 (set_error_handler) 并在其中抛出异常。
它将有助于不支持异常的功能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-11-27T06:11:09.850

使用错误处理函数正确处理 PHP 错误和警告。（见[这里的](http://phpcodeacademy.com/right-way-of-error-handling-in-php/)例子）

在 PHP 中处理错误的最佳方法是，您可以通过在 php 文件顶部添加此行来停止所有错误报告 -

```
error_reporting(0);

//OR

error_reporting('E_ALL');

// Predefined Constant 
```

**使用函数在 PHP 中处理错误：**

*   debug_backtrace — 生成回溯
*   debug_print_backtrace — 打印回溯
*   error_clear_last — 清除最近的错误
*   error_get_last — 获取最后发生的错误
*   error_log — 向定义的错误处理例程发送错误消息
*   error_reporting — 设置报告哪些 PHP 错误
*   restore_error_handler — 恢复之前的错误处理函数
*   restore_exception_handler — 恢复之前定义的异常处理函数
*   set_error_handler — 设置用户定义的错误处理函数
*   set_exception_handler — 设置用户定义的异常处理函数
*   trigger_error — 生成用户级错误/警告/通知消息
*   user_error — trigger_error 的别名

上面列出的所有函数都用于 PHP 中的错误处理。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-08-17T00:35:30.573

如果您正在寻找一种看起来很漂亮并且可以工作的代码结构 - 您可以使用`whitelist`我一直使用的方法。例如 - 验证一个`$_GET`变量：

```
$error = false;

if(!isset($_GET['var'])) 
{
    $error = 'Please enter var\'s value';
}
elseif(empty($_GET['var'])) 
{
    $error = 'Var shouldn\'t be empty';
}
elseif(!ctype_alnum($_GET['var'])) 
{
    $error = 'Var should be alphanumeric';
}

//if we have no errors -> proceed to db part
if(!$error) 
{
    //inserting var into database table
} 
```

所以，就是这样，只有 2`if/elseif`个块，没有嵌套

# ios - iOS 在更新后从 Web 服务重新加载数据

> ID：11894120
> 
> 赞同：1
> 
> 时间：2012-08-10T01:03:54.037
> 
> 标签：ios, json, web-services

我正在编写一个 iOS 应用程序，它从 web 服务加载数据并将数据放入表视图中。用户可以通过单击单元格然后选择一个值来更新单元格中的数据。选择该值后，我希望表更新以反映新数据，实质​​上是重新从 web 服务进行数据的初始下载。在更新方法结束时，我调用了我的初始加载方法，但这似乎不起作用。它只是重新加载所有原始数据。这是我的更新方法的结尾：

```
self.connectionInProgress = [[[NSURLConnection alloc] initWithRequest:request delegate:self] autorelease];

[self loadLines]; 
```

和负载线方法：

```
- (void)loadLines
{   
    NSLog(@"going again?");
    [Results removeAllObjects];
    [Results release];
    Results = nil;
    Results = [[NSMutableArray alloc] init];

    dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0);
    dispatch_async(queue, ^{

        NSString *jsonString = [self performFetchWithURL:lineURL];
        if(jsonString == nil) {
            [self showNetworkError];
            return;
        }

        NSDictionary *dictionary = [self parseJSON:jsonString];
        if(dictionary == nil) {
            dispatch_async(dispatch_get_main_queue(), ^{
                [self showNetworkError];
            });
            return;
        }

        [self parseDictionary:dictionary];

        dispatch_async(dispatch_get_main_queue(), ^{
            isLoading = NO;
            [self.tableView reloadData];
        });
    });
} 
```

parseDictionary 和 performFetchWithURL 是 iOS 5 中非常标准的 JSON 交互...将数据放入 Results 数组中。我是否通过清除我的结果数组然后重新创建它来做正确的事情？

我将如何获得全新的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:30:37.333

我强烈建议研究 ASIHTTPRequest。它可能是也可能不是您的问题的解决方案，但它会删除许多不必要的代码，使您的项目更易于调试。GCD 很棒，但是当你向它发送垃圾邮件时，它会很快失控并导致像你正在经历的奇怪行为。

[http://allseeing-i.com/ASIHTTPRequest/How-to-use](http://allseeing-i.com/ASIHTTPRequest/How-to-use)

```
//Unsafe_unretained is for ARC which it doesn't look like you are using.
__unsafe_unretained ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:lineURL]];

// Code inside of this block will run when the request finishes
// This code will also be called to on the main thread. So you can avoid your own GCD
[request setCompletionBlock:^{
    if (![request responseString])
    {
        [self showNetworkError];
        return;
    }
    NSDictionary *dictionary = [self parseJSON:[request responseString]];
    if(dictionary == nil) {
        [self showNetworkError];
        return;
    }

    [self.tableView reloadData];
}];

//This code will run if your request fails
[request setFailedBlock:^{
     NSLog(@"Failed %@", [request error]);
}];

[request startAsynchronous];//Start the request 
```

我会试一试。如果这不能解决您的问题，那么您的问题很可能存在于您尚未发布的代码中。

对于该片段中的任何语法错误，我深表歉意，因为我手头没有编译器。

# c++ - 为什么不能将重载的运算符定义为类的静态成员？

> ID：11894124
> 
> 赞同：46
> 
> 时间：2012-08-10T01:04:43.133
> 
> 标签：c++, operator-overloading, static-methods

C++ 语法允许在结构/类中定义重载运算符，例如：

```
struct X
{
   void operator+(X);
} 
```

或在结构/类之外，例如：

```
void operator+(X, X); 
```

但不是：

```
struct X
{
   static void operator+(X, X);
} 
```

有人知道这个决定的原因吗？为什么不允许使用第三种形式？（MSVC 给出了一个语法错误。）也许这背后有一些故事？

PS 第一个和第二个定义同时存在会产生歧义：

```
1>CppTest1.cxx
1>c:\ballerup\misc\cf_html\cpptest1.cxx(39) : error C2593: 'operator +' is ambiguous
1>        c:\ballerup\misc\cf_html\cpptest1.cxx(13): could be 'void B1::operator +(B1 &)'
1>        c:\ballerup\misc\cf_html\cpptest1.cxx(16): or       'void operator +(B1 &,B1 &)'
1>        while trying to match the argument list '(B1, B1)' 
```

我不明白为什么这种歧义比 1,3 或 2,3 之间更好。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-10T01:28:17.073

我没有任何关于这个概念的 C++ 讨论的具体知识，所以请随意忽略这一点。

但对我来说，你的问题倒过来了。问题应该是，“为什么*允许*这种语法？”

与当前语法相比，它根本没有任何优势。非静态成员函数版本对私有成员的访问权限与您建议的静态版本相同。因此，如果您需要访问私有来实现它，只需将其设为非静态成员，就像您通常对类的大多数成员所做的那样。

它不会更容易实现非对称运算符（即：）`operator+(const X &x, const Y &y)`。如果您需要私有访问来实现这一点，您仍然需要在其中一个类中为它们声明一个朋友声明。

所以我会说它不存在的原因是它没有*必要*。在非成员函数和非静态成员之间，涵盖了所有必要的用例。

* * *

或者，换一种说法：

自由函数可以做静态函数系统可以做的一切，*甚至更多*。

通过使用自由函数，您可以获得模板中使用的运算符的依赖于参数的查找。您不能使用静态函数来做到这一点，因为它们必须是特定类的成员。并且您不能从类外部*添加*到类，而可以添加到命名空间。因此，如果您需要将运算符放在特定的命名空间中以使某些 ADL 代码工作，您可以。您不能使用静态函数运算符来做到这一点。

因此，自由函数是您提议的静态函数系统将提供的所有内容的超集。由于允许它没有任何好处，因此没有*理由*允许它，因此不允许它。

* * *

> 哪个可以在不实例化它们的情况下使用函子？

这在术语上是矛盾的。“函子”是“函数对象”。类型*不是对象*；因此，它不能是函子。它可以是一种在实例化时会产生仿函数的类型。但单独的类型不会是函子。

此外，能够声明`Typename::operator()`静态并不意味着它`Typename()`会做你想做的事。该语法已经具有实际意义：`Typename`通过调用默认构造函数来实例化一个临时对象。

最后，即使一切*都不*是这样，那又有什么好处呢？大多数采用某种类型的可调用对象的模板函数与函数指针和仿函数一样工作。你为什么要限制你的接口，不仅仅是函子，而是*不能*有内部数据的函子？这意味着您将无法通过捕获 lambda 等。

一个不可能包含状态的函子有什么用？为什么要强制用户传递没有状态的“函子”？为什么要阻止用户使用 lambda？

所以你的问题源于一个错误的假设：即使我们有它，它也不会给你你想要的。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-08-10T02:36:25.053

因为没有明显的语法来*调用*这样的运算符，这意味着我们必须编造一些东西。考虑以下变量：

```
X x1;
X x2; 
```

现在，让我们假设我们正在使用普通的成员函数而不是运算符 - 假设我在您的示例中更改`operator+`为。`plus`

这三个调用中的每一个看起来像：

```
x1.plus(x2);
plus(x1, x2);
X::plus(x1, x2); 
```

现在，当使用编译器进行运算符调用时`+`，编译器如何知道在 ? 范围内查找您的运算符`X`？对于普通的静态成员函数，它不能做到这一点，并且运算符没有得到特殊的消除歧义。

现在考虑是否在程序中*同时*声明了第二种和第三种形式。如果你说`x1 + x2`编译器要么必须总是选择自由函数，要么调用会模棱两可。唯一真正的选择是`x1 X::+ x2`看起来很丑的东西。鉴于这一切，我确信标准委员会决定简单地禁止静态成员版本，因为它可以完成的任何事情都可以通过免费朋友功能来完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-12T22:31:00.047

静态成员函数可用于帮助类但由于某种原因不是成员的实用程序。很容易想象，在表示为静态类成员函数的实用程序中，拥有运算符可能很有用。

当然，如果某些重载运算符将类 C 作为其主要参数，则没有充分的理由希望它成为类 C 的静态成员。它可以只是一个非静态成员，因此它隐式获取该参数。

但是，C 类的静态成员可能是在 C 以外的某个类上重载的运算符。

假设存在一个文件范围`operator ==(const widget &, const widget &);`。在我的`squiggle`课堂上，我正在处理`widget`对象，但想要对它们进行不同的比较。

我应该可以`static squiggle::operator == (const widget &, const widget &);`为自己做一个。

从类范围来看，这很容易调用：

```
void squiggle::memb(widget a, widget b)
{
   if (a == b) { ... } // calls static == operator for widgets
} 
```

从类范围之外，我们只能使用显式范围解析和显式运算符调用语法来调用它：

```
void nonmemb(widget a, widget b)
{
   a == b;  // calls the widget member function or perhaps nonstatic operator
   squiggle::operator ==(a, b); // calls squiggle class' utility
} 
```

这不是一个坏主意。此外，我们**可以**使用常规的重载函数来做到这一点，但不能使用运算符。如果小部件的比较是用一个`compare`函数完成的，那么可以有一个非成员`compare`或 a`widget::compare`并且可以有一个`squiggle::compare`that `widgets`。

因此，C++ 中唯一不支持的方面是使用运算符的语法糖化。

也许它不是一个足够有用的想法来保证支持（到目前为止！）毕竟，这不是允许对 C++ 程序进行革命性重组的东西。但它会修复语言的不完整性。

另外，**请考虑运算符的类重载`new`并且`delete`是隐式静态的**！所以不完备性已经有了一点例外。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-04T14:52:41.567

嗯......我正在考虑一个静态运算符（），它会隐式删除所有构造函数......这会给我们一种类型化的函数。有时我希望我们在 C++ 中拥有它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-04T13:55:09.657

我晚了几年，但我想从给出的其他答案中就这个话题提供一个对比的观点。考虑为实现支持的各种 ABI 设计特征类的情况。例如，考虑为 simd ABI 设计特征类的情况：

```
template<typename T, typename Abi>
struct abi_traits {};

template<>
struct abi_traits<float, sse>
{
    using vector_type = __m128;

    [[nodiscard]] static constexpr auto operator&(auto a, auto b) noexcept
    {
        return _mm_and_ps(a, b);
    }
}; 
```

然后，您可以为每个 abi 调用运算符重载：

```
abi_traits<T, Abi>::operator&(a, b); 
```

这似乎是做作的，但请考虑使用命名函数而不是运算符重载的替代方案：

```
abi_traits<T, Abi>::and(a, b); 
```

您可能会认识到“and”是 C++ 中的关键字，因此无法编译。您必须以某种方式/形状/形式修改名称才能使其工作：

```
abi_traits<T, Abi>::op_and(a, b); 
```

那么从你的向量类中，你必须提供这样的实现：

```
template<typename T, typename Abi>
struct simd
{
    ...
    constexpr auto operator&(auto b) noexcept
    {
        traits<T, Abi>::op_and(this->value, b);
    }
}; 
```

你当然可以这样做，但是你必须维护和理解程序员强加的名称错误语法。在我看来，允许静态重载更加清楚，因为这将更好地显示代码中的意图：

```
template<typename T, typename Abi>
struct simd
{
    ...
    constexpr auto operator&(auto b) noexcept
    {
        traits<T, Abi>::operator&(this->value, b);
    }
}; 
```

所以......我明白为什么其他答案可能对此持谨慎态度......但我完全认为在可能的情况下使用静态运算符重载是有好处的。我已经看到过去出现了一些关于添加静态运算符重载的各种努力的建议（例如，[这个关于静态 operator() 的建议](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2018/p1169r0.html)）。也许这值得进行更广泛的讨论，甚至是提议。我当然遇到过很多情况，我认为拥有这个功能会更清晰。命名很难，而且是一个被低估的问题。如果我看到一个带有 form 的函数`op_shl(auto a, auto b)`，我会比看到一个 form 的函数更不确定如何处理这个函数：`operator<<(auto a, auto b)`. 我们可以就编写好的评论和遵循软件设计的最佳实践提出我们想要的所有论点，但归根结底，静态运算符语法没有歧义。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T03:06:40.403

这可能是原因。

因为每个人都`operator`需要一个或多个`operands`。因此，如果我们将其声明为，`static`那么我们**就不能使用对象**（操作数）来调用它。

为了在一些只是对象的操作数上调用它，函数必须是非静态的。

以下是进行函数重载时必须满足的条件。

*   它必须至少有一个用户定义类型的操作数。

因此，假设我们将运算符重载函数声明为静态。那么上述条件中的第一个将不被满足。

另一个原因是，在静态函数内部，我们只能访问静态数据成员。但是在进行运算符重载时，我们必须访问所有数据成员。因此，如果我们将运算符重载函数声明为静态，我们将无法访问所有数据成员。

所以运算符重载函数必须是`non-static member function`.

但有一个例外。

**如果我们使用友元函数进行运算符重载，那么它可以声明为静态的。**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-31T13:26:42.217

我不知道允许静态运算符 + 可能导致的任何直接缺点（也许思考足够长的时间会产生一些理论）。但我认为至少 Bjarne Stroustrup 宣称的“不为你不使用的东西付费”的原则已经是足够好的答案了。如果除了更复杂的语法（您必须在任何地方都写“X::operator+”而不仅仅是“+”）之外，允许使用该静态运算符，您将获得什么？

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-22T00:11:13.730

基本上，类成员静态运算符不会比非静态成员购买任何东西。

为类定义的任何运算符都必须至少采用该类类型的一个参数。

成员运算符以隐式参数的形式获取该`this`参数。

非成员运算符具有该类类型的显式参数。

操作员功能的操作员界面无关紧要；当我们调用 时`a + b`，它负责生成代码以通过`a`参数`this`或作为显式声明的参数传递。因此，关于如何使用运算符，我们并没有表达静态与非静态的细微差别。

假设突然引入了最新的 ISO C++ 必须支持静态成员运算符的要求。 **匆忙中，可以根据以下模式通过源到源重写来实现此要求：**

```
static whatever class::operator *(class &x) { x.fun(); return foo(x); }

-->

whatever class::operator *() { (*this).fun(); return foo(*this); }

-->

whatever class::operator *() { fun(); return foo(*this); } 
```

编译器将成员运算符重写`static`为非静态，删除最左边的参数，并且（使用适当的词法卫生 wrt 阴影）用表达式替换对该参数的所有引用`*this`（可以省略不必要的使用）。

这种转换非常简单，可以依靠程序员首先以这种方式编写代码。

运算符函数定义机制的`static`功能较弱。例如，它不能是`virtual`，而非静态的则可以。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-06T12:11:07.177

首先，我不知道为什么 C++ 中不允许使用静态运算符。作为一名 Python 程序员，我已经看到了一些使用 @classmethod 方法的 API 灵活性很好的例子，这些方法被称为 Class.method，似乎没有人因这种事情的存在而受苦。

我的猜测是，在 C++ 中它可能是与语言设计相关的东西，因为至少我没有看到任何其他东西阻止这种情况发生。

现在好了，即使你不能合法地这样做，你也可以使用#define's 和一些运气作弊） **免责声明！: 也许你不应该在家里这样做，但这取决于你**

```
 #include <iostream>

// for demonstration purposes
// no actual array implementation
class Array
{
public:

  Array() { std::cout << "Array() created\n"; }

  Array operator()()
  {
    std::cout << "surprising operator() call\n";
    return Array();
  }

  int operator[] (int elem_count)
  {
    return elem_count;
  }

};

#define Array Array()

int main()
{
  // this is not a static method, right, but it looks like one. 
  // and if you need the static-method syntax that bad, you can make it. 
  auto arr = Array[7]; // implicitly acts as Array()[N]
  auto x = Array(); // delegate all construction calls to Array.operator()
  std::cout << arr;
} 
```

因此，我认为您可能会以这种方式重载其他一些运算符，并使其在语法上看起来好像它们是静态的。

# regex - 我想打印两个文件之间的差异和共同点，并以特定输入文件的相同顺序打印结果

> ID：11894125
> 
> 赞同：3
> 
> 时间：2012-08-10T01:04:53.813
> 
> 标签：regex, string, perl, concatenation

**文件.txt**

```
bolt W X Y Z

blake X Y Z

gatlin A B C

powell X Y Z

carl P Q R 
```

**格式.txt**

```
blake X Y Z

gatlin B C

carl P Q R 
```

**输出.txt**

```
bolt W X Y Z

blake X Y Z

gatlin B C

powell X Y Z

carl P Q R 
```

嘿嗨，我是 perl 新手，我有一个问题。我有 2 个文件，即 FILE.txt 和 FORMAT.txt。我想要 FILE.txt 形式的输出数据，但我想用 FILE.txt 替换数据两个文件共有的 FORMAT.txt 的数据，即与 blake 、 gatlin 和 carl 的行必须在 FILE.txt 中用从 FORMAT.txt 获得的数据替换。所需的输出如 OUTPUT.txt 中所示。我尝试通过查找两个文件之间的差异和共同点来做到这一点。

这是我的代码

```
my %results = ();  
open FILE1, "< FILE.txt" or die "Could not open file: $! \n"; 
while(my $line = < FILE1>)
{   
$results{$line}=1; 
} 
close(FILE1);  
open FILE2, "<FORMAT.txt" or die "Could not open file: $! \n"; 
while(my $line =< FILE2>) 
{   
$results{$line}++; 
} 
close(FILE2);   
open (OUTFILE1, ">>common.txt") or die "Cannot open $outfile for writing \n"; 
open (OUTFILE, ">>diff.txt") or die "Cannot open $outfile for writing \n";
foreach my $line (keys %results) 
{ 
print OUTFILE $line if $results{$line} == 1;
print OUTFILE1 $line if $results{$line} > 1;

} 
close OUTFILE; 
close OUTFILE1; 
```

从这段代码中，我通过连接两个文件获得输出，即 common.txt 和 diff.txt is FINAL.txt

**最终的.txt**

```
bolt W X Y Z

powell X Y Z

gatlin B C

gatlin A B C

blake X Y Z

carl P Q R 
```

但是我期望输出的顺序如 OUTPUT.txt 而不是 FINAL.txt 中所示的任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:22:41.267

你的逻辑有缺陷。:-) 您只是从这两个文件中找到*共同和独特的行。*有些行对于 FILE.txt 或 FORMAT.txt 可能是唯一的，然后是两个文件共有的行。您说问题是在 FILE.txt 中替换 FORMAT.txt 中与人名匹配的任何值。散列中的项目以随机顺序出现，而不是它们插入散列的顺序。我的想法是将 FORMAT.txt 中的更改值读入哈希，然后打开 FILE.txt 并按原样打印该行或打印 FORMAT.txt 中的替换值。

这也将保留行的顺序（在 FILE.txt 中）。

```
#!/usr/bin/perl
use strict;
use warnings;
use Inline::Files;

my %format;
while (<FORMAT>) {
    my ($k, $v) = split ' ', $_, 2;
    $format{$k} = $v;
}

while (<FILE>) {
    my ($k, $v) = split ' ', $_, 2;
    print "$k ", $format{$k} || $v;
}

__FILE__
bolt W X Y Z
blake X Y Z
gatlin A B C
powell X Y Z
carl P Q R
__FORMAT__
blake X Y Z
gatlin B C
carl P Q R 
```

*输出是：*

```
bolt W X Y Z
blake X Y Z
gatlin B C
powell X Y Z
carl P Q R 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T01:56:38.780

这是一个不使用模块的解决方案。

```
#!/usr/bin/perl 
use strict; 
use warnings; 

my %data;
my @keys_in_order;

# NOTE: FILE.txt must be processed before FORMAT.txt for the
# logic to be correct, (as below).
for my $file ('FILE.txt', 'FORMAT.txt') {
    open my $fh, "<", $file or die "Unable to open $file for reading. $!";
    while (<$fh>) {
        my ($k, $v) = split ' ', $_, 2;
        push @keys_in_order, $k unless grep /$k/, @keys_in_order; 
        push @{ $data{$k} }, $v; 
    }
    close $fh or die "Unable to close $file. $!";
}

for my $key (@keys_in_order) { 
    print "$key $data{$key}->[-1];    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T14:22:18.103

*但是如果 FORMAT 中有一个额外的术语，例如“green RS T”，而 FILE 中不存在，如何修改代码*

你好云凯莎

抱歉，如果 Inline::Files 让您感到困惑。该模块仅允许您使用这 2 个文件，而无需打开和关闭实际文件。它只是有助于消除打开和关闭代码，以更清楚地公开程序的逻辑。您不会使用它，而是打开 FILE.txt，处理，然后打开 FORMAT.txt 并处理。

我不得不添加一个模块，Tie::IxHash。它用于在将键添加到散列时保留键的顺序（如您所愿）。

克里斯

```
#!/usr/bin/perl
use strict;
use warnings;
use Tie::IxHash;

# this module will order the keys in the order they were added to the hash
tie my %data, 'Tie::IxHash';

open FILE, "<", 'FILE.txt' or die "Unable to open FILE.txt for reading. $!";
while (<FILE>) {
    my ($k, $v) = split ' ', $_, 2;
    push @{ $data{$k} }, $v;
}
close FILE or die $!;

open FORMAT, "<", "FORMAT.txt" or die "Unable to open FORMAT.txt for reading. $!";
while (<FORMAT>) {
    my ($k, $v) = split ' ', $_, 2;
    push @{ $data{$k} }, $v;
}
close FORMAT or die $!;

for my $key (keys %data) {
    my $aref = $data{$key}; # array reference
    print "$key $aref->[-1]";
}
untie %data; 
```

输出：

```
bolt W X Y Z
blake X Y Z
gatlin B C
powell X Y Z
carl P Q R
green R S T 
```

# google-apps-script - 将包含公式的列复制到另一个选项卡

> ID：11894127
> 
> 赞同：0
> 
> 时间：2012-08-10T01:05:10.180
> 
> 标签：google-apps-script

我在一个选项卡中有一个列，它是需要移动到新选项卡的另外两列的串联。正如您所料，复制的是公式而不是值。

我看到 [this from @Serge][将每一行数据从 K 列中具有给定值的一张表复制到另一张](https://stackoverflow.com/questions/11127923/copy-every-row-of-data-from-one-sheet-that-has-a-given-value-in-column-k-to-anot)我认为我需要去的地方，但想看看我错过了什么（因为我通常这样做:) )

```
var sourceTab = ss.getSheetByName("Sheet1");
var xportTab = ss.getSheetByName("Sheet2");
sourceTab.getRange("P1:P").copyTo(xportTab.getRange("A1"));  // new description 
```

有人可以建议任何其他技巧吗？

*   乔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:52:45.077

如果我理解正确，您只想复制这些值，对吗？

你可以这样做：

```
function copyExample() {
  var ss = SpreadsheetApp.getActive();
  var source = ss.getSheetByName('Sheet1');
  var values = source.getRange(1,16,source.getLastRow(),1).getValues();
  ss.getSheetByName('Sheet2').getRange(1,1,values.length,1).setValues(values);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-05T21:26:22.480

```
function copyExample() {

  var idSheet = "XXXXXXXXXXXXXXXXXXXXXXXXXx";//listes des propositions (ttes valeurs)
  var mySheet = SpreadsheetApp.openById(idSheet);  

  var idSheet3 = "YYYYYYYYYYYYYYYYYYYYYYYYYYY"; //Liste des propositions sans contact
  var mySheet3 = SpreadsheetApp.openById(idSheet3);  

  var values = mySheet.getRange(1,2,mySheet.getLastRow(),2).getValues();
  mySheet3.getRange(1,2,values.length,2).setValues(values);

} 
```

# javascript - 目标 css：背景图片 Javascript

> ID：11894130
> 
> 赞同：0
> 
> 时间：2012-08-10T01:05:37.620
> 
> 标签：javascript, css, image, background, target

您好，我试图在此处定位特定的 css 背景图像[http://22twenty.com/This/](http://22twenty.com/This/)

我想要的是一旦文本向上滑动，白色背景就会淡出以赋予它很酷的效果。

滑出完成后我需要让它淡出

```
$.when(slideOutMenu()).done(function() {
    $.when(toggleMenuItems('up')).done(function() {
        initEventsSubMenu();
    });
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:30:05.103

你可以用 CSS3 或一点点 JS 轻松做到这一点......

检查我使用 jQuery animate 制作的这个例子：http: [//jsfiddle.net/9dSD2/1/](http://jsfiddle.net/9dSD2/1/)

还要检查[http://api.jquery.com/animate/](http://api.jquery.com/animate/)

# javascript - 使用 javascript 自动更改键盘语言在没有 IE 的情况下不起作用

> ID：11894132
> 
> 赞同：1
> 
> 时间：2012-08-10T01:06:10.400
> 
> 标签：javascript, keyboard, onfocus, persian, farsi

我有一个 Java 脚本代码，当专注于文本框时可以更改键盘语言。但是这段代码只能在 IE 中工作，而不能在 Firefox 或 Opera 我的代码中正常工作：

```
<script type="text/javascript"  language="javascript">
var farsi = true ;
var s = new Array(32,33,34,35,36,37,1548,1711,41,40,215,43,
              1608,45,46,47,48,49,50,51,52,53,54,55,56,
              57,58,1603,44,61,46,1567,64,1616,1584,125,
              1609,1615,1609,1604,1570,247,1600,1548,47,
              8217,1583,215,1563,1614,1569,1613,1601,
              8216,123,1611,1618,1573,126,1580,1688,
              1670,94,95,1662,1588,1584,1586,1610,1579,
              1576,1604,1575,1607,1578,1606,1605,1574,
              1583,1582,1581,1590,1602,1587,1601,1593,
              1585,1589,1591,1594,1592,60,124,62,1617);
//==============================================
    function change()
    {

   var KeyID =event.keyCode;
   if(KeyID >= 128)
 {
  alert("تغيير دهيد EN لطفا زبان صفحه کليد را به");
  event.keyCode=0;
  return false;
 }

 if(KeyID > 47 && KeyID < 58) return true;
 if(KeyID < 32)return true;
    if ( KeyID>32 && KeyID<128)  event.keyCode = s[KeyID-32] ;

    }
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:37:22.357

这里：

```
> var KeyID =event.keyCode; 
```

其他浏览器使用*event.which*，所以：

```
var KeyID = event.which || event.keyCode; 
```

更一般地说，你可以这样做：

```
var keyProp = typeof event.which == 'number'? 'which' : 'keyCode'; 
```

然后：

```
var keyCode = event[keyProp]; 
```

### 编辑

如果您仍然遇到问题，也许[W3C DOM 事件规范](http://www.w3.org/TR/DOM-Level-3-Events/#legacy-key-attributes)会有所帮助。您可能会注意到 Event 对象的*keyCode*、*which*和*charCode*属性是**readonly**，当然规范的该部分是信息性的，而不是规范性的，因此浏览器可能会或可能不会以其他方式表现。

# php - PSR-2 数组和方法链接的编码标准？

> ID：11894136
> 
> 赞同：14
> 
> 时间：2012-08-10T01:07:02.770
> 
> 标签：php

数组初始化和方法链接的 PSR-2 标准编码约定是什么？

```
$foo = array(
    'one' => 1,
    'two' => 2
);

$rows = DB::select('mytable')
    ->where_id($id)
    ->get_one(); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T01:18:31.087

PSR-2 目前也没有指定

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T01:25:19.830

在这个阶段，PSR-2 标准中都没有明确涵盖这些内容。在[结论](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md#7-conclusion)中，它确实注意到有意省略了一些领域，包括：

> *   运算符和赋值
> *   行间对齐

唯一相关的指导方针是关于行长和缩进空格数等更通用的指导方针。

处理这些主题的其他标准包括[PEAR](http://pear.php.net/manual/en/standards.php)和[Zend](http://framework.zend.com/manual/en/coding-standard.html)。

# c# - F5 和播放按钮不起作用，但 F10/F11 起作用

> ID：11894141
> 
> 赞同：2
> 
> 时间：2012-08-10T01:08:22.927
> 
> 标签：c#, visual-studio-2010, ide

几天来，IDE 已经停止响应`F5`，用我的鼠标单击`play`按钮也没有任何反应。但是，如果我按下`F10`或者`F11`它会进入代码，然后我可以按下`F5`然后它运行得很好。

此外，我可以在解决方案资源管理器中右键单击该项目并在那里启动它的新实例，而不会遇到任何麻烦。

*   我选择了一个默认项目
*   我已经仔细检查了键盘快捷键
*   我在笔记本电脑上，但没有 F-Lock 键（同样，F10/F11 可以正常启动应用程序）。

不知道接下来要检查什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:32:30.030

我最近在 WPF 项目分支后遇到了类似的问题。您可以尝试转到解决方案属性并仔细检查它是否设置为在启动项目或项目依赖项下构建。

# python - 找不到多项式对象的numpy 1.6.1正交属性

> ID：11894142
> 
> 赞同：1
> 
> 时间：2012-08-10T01:08:28.900
> 
> 标签：python, numpy, scipy

我正在使用 python 2.7.3 和 numpy 1.6.1。我正在尝试获得legendre 和hermite 多项式的高斯正交点。根据[numpy 文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.polynomial.legendre.leggauss.html#numpy.polynomial.legendre.leggauss)，我应该可以通过键入来访问该属性

> > numpy.polynomial.legendre.leggauss(1)

但是每当我这样做时（即使是 hermite 或 hermite_e）我都会得到一个错误

> > AttributeError：“模块”对象没有属性“leggauss”

到底是怎么回事？怎么会少了这么重要的属性？我正在使用 Mac OS X 10.7.4。下面是我在 python 中输入的确切代码：

```
Python 2.7.3 (default, Jul 12 2012, 11:58:31) 
[GCC 4.2.1 Compatible Apple Clang 3.1 (tags/Apple/clang-318.0.61)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import numpy
>>> numpy.polynomial.legendre.leggauss(1)
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'leggauss'
>>> numpy.version.version
'1.6.1' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T01:28:24.633

如果您单击文档中的[源代码](https://github.com/numpy/numpy/blob/master/numpy/polynomial/legendre.py#L1662)，您将看到它是在 1.7.0 版本中添加的注释。

```
def leggauss(deg):
    """
    Gauss-Legendre quadrature.

    Computes the sample points and weights for Gauss-Legendre quadrature.
    These sample points and weights will correctly integrate polynomials of
    degree :math:`2*deg - 1` or less over the interval :math:`[-1, 1]` with
    the weight function :math:`f(x) = 1`.

    Parameters
    ----------
    deg : int
        Number of sample points and weights. It must be >= 1.

    Returns
    -------
    x : ndarray
        1-D ndarray containing the sample points.
    y : ndarray
        1-D ndarray containing the weights.

    Notes
    -----

    .. versionadded::1.7.0 
```

# objective-c - NSManagedObjectContext，声明在哪里？

> ID：11894143
> 
> 赞同：1
> 
> 时间：2012-08-10T01:08:42.333
> 
> 标签：objective-c, cocoa, core-data, nsmanagedobjectcontext

很抱歉接下来的新手。非常感谢您的耐心。

向核心数据添加新对象时，正确的初始化程序是：

```
- (id)initWithEntity:(NSEntityDescription *)entity insertIntoManagedObjectContext:    (NSManagedObjectContext *)context 
```

好的，所以我理解 initWithEntity 部分。我的核心数据模型中只有一个实体，所以我把它放在那里。上下文是我感到困惑的地方。首先，在哪里声明上下文，或者我什至需要声明它？简单地键入 self.ManagedObjectContext 不起作用，也不会自动完成。也许是因为我试图从我的 AddViewController 调用此方法的原因，所以即使我键入 Car.ManagedObjectContext 或 AppDelegate.ManagedObjectContext 也会发生同样的事情。我猜我可以在我的护理数据生成模型类（Car.h）中声明它，但它实际上是做什么的？

我在这里不明白什么？对不起，新手的问题。几个小时以来，我真的一直试图弄清楚这一点。

这是我的代码。

汽车.h：

```
@interface Car : NSManagedObject

@property (nonatomic, retain) NSString * brand;
@property (nonatomic, retain) NSString * model;
@property (nonatomic, retain) NSString * year;
@property (nonatomic, retain) NSString * color;
@property (nonatomic, retain) NSNumber * engineSize;
@property (nonatomic, retain) NSNumber * weight;
@property (nonatomic, retain) id image;

@end

car.m:

#import "Car.h"

@implementation Car

@dynamic brand;
@dynamic model;
@dynamic year;
@dynamic color;
@dynamic engineSize;
@dynamic weight;
@dynamic image;

@end 
```

addViewController.h（不包括 AppDelegate，因为它几乎都是标准的并且似乎工作正常。我所做的所有编码都在 addview 控制器中）：

```
#import <Cocoa/Cocoa.h>

@interface AddViewController : NSWindowController{
  }

@property (weak) IBOutlet NSTextField *brandField;
@property (weak) IBOutlet NSTextField *modelField;
@property (weak) IBOutlet NSTextField *yearField;
@property (weak) IBOutlet NSTextField *weightField;
@property (weak) IBOutlet NSTextField *engineSizeField;
@property (weak) IBOutlet NSTextField *colorField;
@property (weak) IBOutlet NSImageView *imageField;

- (IBAction)saveCar:(id)sender;

@end

AddViewController.m:

#import "AddViewController.h"
#import "AppDelegate.h"
#import "Car.h"
@interface AddViewController ()

@end

@implementation AddViewController
@synthesize brandField;
@synthesize modelField;
@synthesize yearField;
@synthesize engineSizeField;
@synthesize weightField;
@synthesize colorField;
@synthesize imageField;

- (id)initWithWindow:(NSWindow *)window
{
    self = [super initWithWindow:window];
    if (self) {
        // Initialization code here.
    }

    return self;
}

- (void)windowDidLoad
{
    [super windowDidLoad];

    // Implement this method to handle any initialization after your window controller's window has been loaded from its nib file.
}

- (IBAction)saveCar:(id)sender {
    NSManagedObjectContext *context = [Car managedObjectContext]; //This doesn't work here   "no known class method"

    Car *newCar = [[Car alloc] initWithEntity:@"Car" insertIntoManagedObjectContext:Car.managedObjectContext]; //compiler complains about this, property not found.

    newCar.brand = [brandField stringValue];
    newCar.model =  [modelField stringValue];
    newCar.year =  [yearField stringValue];
    newCar.weight = [weightField objectValue];
    newCar.engineSize = [engineSizeField objectValue];
    newCar.color = [colorField stringValue];
    newCar.image = imageField;

}

@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T01:15:21.753

您需要创建一个 managedObjectContext。它通常在 appDelegate 中完成。Apples 有一篇关于它的好文章：[Apple 文档](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/CoreDataSnippets/Articles/stack.html)

# import - 自动修复 shp2pgsql 中的环自相交

> ID：11894149
> 
> 赞同：6
> 
> 时间：2012-08-10T01:09:20.673
> 
> 标签：import, gis, postgis, shapefile, self-intersection

我们正在将一大堆 ArcGIS shapefile 导入 PostGIS，并使用`shp2pgsql`. 问题是，如果 shapefile 有任何环自相交，导入会阻塞：

```
NOTICE:  Ring Self-intersection at or near point -80.1338 25.8102
ERROR:  new row for relation "place_shapes" violates
  check constraint "shape_is_valid" 
```

我们如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T09:47:07.377

这个查询经常为我修复它：

```
UPDATE place_shapes
  SET geometry=ST_Buffer(geometry, 0.0); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-25T19:33:28.400

虽然将要素缓冲为零是自相交多边形的已知修复方法（这在 shp 文件中非常常见），但正如 Marcelo 所建议的那样，还有用于此目的的 ST_MakeValid 函数。还有一个关联函数 ST_IsValidReason 将告知问题所在，而不仅仅是盲目地尝试修复它。

在实践中，使用 ST_MakeValid(geom) 或 ST_Buffer(geom, 0) 可能会产生几何类型的混合，包括孤立点和线串。因此，进一步的改进可能是检查返回的几何类型，并且仅包括例如由 ST_MakeValid 生成的多边形。

```
create table valid_geoms as
with make_valid (id, geom) as 
   (select 
      row_number() over() as id, 
     (ST_Dump(ST_MakeValid(geom))).geom as geom from invalid_table
  )
select id, geom from make_valid where ST_GeometryType(geom)='ST_Polygon'; 
```

其中 invalid_table 是原始 shp2pgsql 导入产生的表。

我在这里包含了一个生成的 id，因为 ST_MakeValid 可能会从输入几何图形中生成一个以上的多边形。可以重写查询以包含原始 id 字段，但不再保证它是唯一的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T01:09:20.673

事实证明，运行这个后处理步骤可以解决问题：

```
UPDATE place_shapes
  SET geometry=ST_SimplifyPreserveTopology(geometry, 0.0001)
  WHERE ST_IsValid(geometry) = false; 
```

这`0.0001`是度数的容差，您可能需要根据自己的喜好进行调整，但街道地图数据似乎是正确的。

此外，如果您的形状表强制执行有效性（它应该），您将需要使用`shp2pgsql`创建一个临时的未验证表，在那里修复您的多边形，然后才将它们复制到主表。

# scala - 具有抽象方法的抽象基类，该方法将采用一个或两个值（Scala）

> ID：11894151
> 
> 赞同：0
> 
> 时间：2012-08-10T01:09:26.747
> 
> 标签：scala, abstract-class, abstract

我正在考虑如何使用一个抽象方法编写一个抽象基类，该方法将采用一个或两个`Int`值。就像是：

```
abstract class Foo {
  def doSomething(???): Unit
} 
```

到目前为止，我能想到的最好的方法是将参数声明为 a ，该参数`Vector[Int]`将保存一个或两个值，或者可能更好地强制执行两个值的最大值 a `Tuple2[Int, Int]`。

我想这样做是因为我想在`Actor`系统内传递算法，并且我希望某些消息强制执行算法的类型，而不是传递一个`Any`，因此是抽象基类。

这是最好的方法，还是有更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T02:00:35.697

通常，这将通过重载方法来完成。然后在调用 on 方法时`Bar`，他们可以传入一两件事：

```
abstract class Foo {
  def doSomething(a: Int): Int
  def doSomething(a: Int, b: Int): Int
}

class Bar extends Foo {
  def doSomething(a: Int): Int = a
  def doSomething(a: Int, b: Int): Int = a * b
} 
```

或者，使用默认参数（仍然允许您这样做`new Bar().doSomething(5)`）

```
abstract class Foo {
  def doSomething(a: Int, b: Int = 1): Int
}

class Bar extends Foo {
  def doSomething(a: Int, b: Int): Int = a * b
} 
```

但听起来您想以一种始终调用相同`Foo`方法的方式执行此操作，因此在这种情况下，您可以对参数执行多态性：

```
trait Thing
case class Thing1(a: Int) extends Thing
case class Thing2(a: Int, b: Int) extends Thing

abstract class Foo {
  def doSomething(t: Thing): Int
}

class Bar extends Foo {
  def doSomething(t: Thing): Int = t match {
    case Thing1(a) => a
    case Thing2(a, b) => a * b
  }
} 
```

或者，因为你只有两个选择，你可以用一个做同样的事情`Either`：

```
abstract class Foo {
  def doSomething(t: Either[Int, (Int, Int)]): Int
}

class Bar extends Foo {
  def doSomething(t: Either[Int, (Int, Int)]): Int = t match {
    case Left(a) => a
    case Right((a, b)) => a * b
  }
} 
```

# mysql - 如何在mysql中选择带有IF ELSE条件的记录？

> ID：11894160
> 
> 赞同：3
> 
> 时间：2012-08-10T01:11:21.957
> 
> 标签：mysql

如何在mysql中选择带有IF ELSE条件的记录？我在用户表中有一些记录（请参见下文）：如果 YAHOO 为空，我想将 YAHOO、GMAIL、HOTMAIL 的所有记录放在 EMAIL 字段中，那么 EMAIL 字段将采用 gmail 或 hotmail（我在图像中提到了我的预期结果） ![在此处输入图像描述](../Images/3433a156902c4ee931c82efec7f61de9.png)

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T01:14:04.170

你想要合并功能：

```
select id, name, coalesce(yahoo, gmail, hotmail) as email
from t 
```

COALESCE 返回第一个非 NULL 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T01:18:14.053

```
SELECT id,name,
    IFNULL(yahoo,IFNULL(gmail,hotmail)) email
FROM UserTable; 
```

# linq - CRM 2011 LINQ 更新错误

> ID：11894162
> 
> 赞同：1
> 
> 时间：2012-08-10T01:11:39.320
> 
> 标签：linq, dynamics-crm-2011

我在使用 LINQ 查找记录然后更新找到的记录时遇到问题 CRM 2011。即使是这个超级简单的版本也行不通。错误是完全通用的（见下文）。

这是代码，我确实从查询中返回了一个实体，但我无法更新它。

```
var account = orgContext.CreateQuery("account").First(c => c["name"] == "apple");

account["name"] = "Microsoft";

orgContext.UpdateObject(account);
orgContext.SaveChanges();  ///ERROR HERE

ERROR DETAIL

Microsoft.Xrm.Sdk.SaveChangesException was unhandled by user code
  Message=An error occured while processing this request.
  Source=Microsoft.Xrm.Sdk
  StackTrace:
       at Microsoft.Xrm.Sdk.Client.OrganizationServiceContext.SaveChanges(SaveChangesOptions options)
       at Dhs.Tsa.Trip.Xrm.Plugins.ProcessNFL.Execute(IServiceProvider serviceProvider) in C:\Users\Administrator\Desktop\Dhs.Tsa.Trip.Xrm\Dhs.Tsa.Trip.Xrm.Plugins\ProcessNFL.cs:line 54
       at Microsoft.Crm.Extensibility.V5PluginProxyStep.ExecuteInternal(PipelineExecutionContext context)
       at Microsoft.Crm.Extensibility.VersionedPluginProxyStepBase.Execute(PipelineExecutionContext context)
  InnerException: System.ServiceModel.FaultException<Microsoft.Xrm.Sdk.OrganizationServiceFault>
       Message=System.InvalidOperationException: Microsoft Dynamics CRM has experienced an error. Reference number for administrators or support: #97345966
       Source=Microsoft.Crm.Extensibility
       StackTrace:
            at Microsoft.Crm.Extensibility.OrganizationSdkServiceInternal.Execute(OrganizationRequest request, CorrelationToken correlationToken, CallerOriginToken callerOriginToken, WebServiceType serviceType)
            at Microsoft.Crm.Extensibility.InprocessServiceProxy.ExecuteCore(OrganizationRequest request)
            at Microsoft.Xrm.Sdk.Client.OrganizationServiceContext.Execute(OrganizationRequest request)
            at Microsoft.Xrm.Sdk.Client.OrganizationServiceContext.SaveChange(OrganizationRequest request, IList`1 results)
       InnerException: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:29:19.393

我不是 100% 确定该错误指的是什么，但我知道过去我在尝试使用与检索到的相同对象进行更新时遇到了问题。例如，如果您获取的对象缺少必填字段，它可能不喜欢您再次尝试将其保存回来。

无论如何，解决方案很简单。而不是...

```
account["name"] = "Microsoft";

orgContext.UpdateObject(account);
orgContext.SaveChanges(); 
```

尝试做...

```
var updAccount = new Entity("account") { Id = account.Id };
updAccount["name"] = "Microsoft";

orgContext.UpdateObject(updAccount);
orgContext.SaveChanges(); 
```

这有效地创建了帐户参考的副本，其中仅包含您要更新的字段。

# database - 如何使用从 SQLite 数据库中获取数据的交互式表格制作网站？

> ID：11894163
> 
> 赞同：0
> 
> 时间：2012-08-10T01:11:46.527
> 
> 标签：database, sqlite

这是一个充满酷数据的表的示例：

[http://databases.sun-sentinel.com/Orlando/ftlaudosuniversities/ftlauduniversities_list.php](http://databases.sun-sentinel.com/Orlando/ftlaudosuniversities/ftlauduniversities_list.php)

它看起来像是从 SQL 数据库中获取它的表。

我想知道是否有任何关于如何做到这一点的教程，或者这里是否有人知道如何做到这一点。

# c# - 如果我之后直接使用 `Response.End()`，`Response.Flush()` 有意义吗？

> ID：11894164
> 
> 赞同：2
> 
> 时间：2012-08-10T01:11:52.423
> 
> 标签：c#, asp.net

我使用以下代码通过刷新和结束来结束向客户端的传输。

```
Response.Flush();
Response.End(); 
```

但是，它只是让我`Response.End()`将缓冲的内容刷新到客户端。那么按顺序使用两者有什么意义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T02:00:17.320

简而言之，不，但两者之间存在重要差异：

**`Response.Flush()`**对于在所有处理完成之前写入响应的部分很有用（即，如果禁用响应缓冲）。Flush() 之后的任何代码都将继续执行，并且之前的任何 Response.Write() 都将被刷新到客户端。

**`Response.End()`**有点残酷......它不仅会中止当前线程，而且这样做会引发 ThreadAbort 异常并终止当前请求。除非您正确处理异常，否则 Response.End() 之后的任何代码都不会出现。

正如您所指出的， End() 无论如何都会刷新您的缓冲内容。在某些情况下，End() 实际上会在内部调用 Flush()，特别是在上下文不可取消的情况下：

```
public void End()
{
    if (this._context.IsInCancellablePeriod)
    {
        InternalSecurityPermissions.ControlThread.Assert();
        Thread.CurrentThread.Abort(new HttpApplication.CancelModuleException(false));
    }
    else if (!this._flushing)
    {
        this.Flush();
        this._ended = true;
        if (this._context.ApplicationInstance != null)
        {
            this._context.ApplicationInstance.CompleteRequest();
        }
    }
} 
```

# php - 这个正则表达式在 codeigniter 的 uri 中不起作用

> ID：11894168
> 
> 赞同：0
> 
> 时间：2012-08-10T01:12:16.730
> 
> 标签：php, mysql, regex, codeigniter, url

这是使用正则表达式的路线：

```
$route["searchresults/((parameter|type|something)-([0-9]+)\/)+"] = 'somecontroller'; 
```

这是一个例子：

```
www.somedomain.com/searchresults/parameter-21/ 
```

上面的 url 没有被 codeigniter 的路由识别，并且说 404。路由中的正则表达式有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T05:39:40.130

这可能是由于您的正则表达式中的斜杠，您可以通过删除它或将其设为可选来获得更多运气：

```
$route["searchresults/((parameter|type|something)-([0-9]+)\/*)+"] = 'somecontroller'; 
```

# css - 背景上的 CSS 透明度会影响内容

> ID：11894170
> 
> 赞同：1
> 
> 时间：2012-08-10T01:12:42.927
> 
> 标签：css, transparency

我有一个具有 CSS 属性的 div，如下所示：

```
div.header {
    opacity:0.4;
    filter:alpha(opacity=40);
    background:#000;
    width:300px;
    height:300px;
} 
```

问题是这个 div 内的内容也具有相同的透明度。我怎样才能让背景颜色/ div 显示透明度而不影响该 div 内的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T01:17:22.993

您可以使用`rgba`颜色：

```
div.header {
    background:rgba(0,0,0,0.4);
    width:300px;
    height:300px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T01:20:43.763

您可以`rgba`在背景上使用：

```
div.header {
    /* Fallback for web browsers that doesn't support RGBa */
    background: rgb(0, 0, 0);

    /* RGBa with 0.6 opacity */
    background: rgba(0, 0, 0, 0.4);

    /* For IE 5.5 - 7*/
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#66000000, endColorstr=#66000000);

    /* For IE 8*/
    -ms-filter: "progid:DXImageTransform.Microsoft.gradient(startColorstr=#66000000, endColorstr=#66000000)";
} 
```

IE 的颜色由以下公式计算：

```
Math.floor(0.4 * 255).toString(16); // 0.4 is your desired opacity 
```

它为您提供`66`了颜色的前 2 位数字。

[资源](http://robertnyman.com/2010/01/11/css-background-transparency-without-affecting-child-elements-through-rgba-and-filters/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T01:19:18.040

您可以尝试使用 rgba 设置背景，`background: rgba(0, 0, 0, 0.6);`就像`0.6`不透明度一样。或者将具有不透明度的背景放在某个 div 中，然后在该 div 内部创建另一个具有内容且没有不透明度的 div。

# c++ - C++ 结构数组初始化

> ID：11894171
> 
> 赞同：3
> 
> 时间：2012-08-10T01:12:51.420
> 
> 标签：c++, arrays, struct, initialization

我有以下结构：

```
struct localframepos
{
    double ipos; //local room frame i(x) coordinate, in mm
    double cpos; //local room frame c(y) coordinate, in mm
    double rpos; //local room frame r(z) coordinate, in mm

    localframepos()
    {
        ipos = 0;
        cpos = 0;
        rpos = 0;
    }
    localframepos(double init_ipos, double init_cpos, double init_rpos) //init constructor
    {
        ipos = init_ipos;
        cpos = init_cpos;
        rpos = init_rpos;
    } 
}; 
```

**如何获得以下功能：**

```
localframepos positions[] = { {0, .5, .2},
                              {4.5, 4, .5} }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T01:14:29.807

删除构造函数。要使用花括号初始化，类型必须是 POD。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T02:05:37.960

我通常使用

```
localframepos positions[] = { localframepos(0  , .5, .2),
                              localframepos(4.5, 4, .5) }; 
```

这不是那么好看，但如果您需要不同的初始化可能性，则更加灵活。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T02:09:56.273

对于 C++03，您可以编写

```
localframepos positions[] = { localframepos( 0, .5, .2 ),
                              localframepos( 4.5, 4, .5 ) }; 
```

# c# - 水晶报表子报表没有链接到我的主报表

> ID：11894173
> 
> 赞同：0
> 
> 时间：2012-08-10T01:13:36.693
> 
> 标签：c#, wpf, crystal-reports, dataset, crystal-reports-2010

我正在使用 WPF Crystal Report Viewer，我对此感到相当满意。

但是，我遇到了子报表的问题。

我第一次尝试链接子报表是这样的：

```
ReportDocument.Load(Response.ReportsPath + "\\myReport.rpt");
ConnectionInfo.DatabaseName = "myDatabase.mdb";
SetDBLogonForReport(ConnectionInfo, ReportDocument);
ReportDocument.Database.Tables[0].Location = "Table0";
ReportDocument.Database.Tables[1].Location = "Table1";
foreach (var document in ReportDocument.Subreports.OfType<ReportDocument>())
{
    SetDBLogonForReport(ConnectionInfo, document);
    document.Database.Tables[0].Location = "CommonSubreportTable";
} 
```

不幸的是，这不起作用。

我尝试了许多不同的解决方案。一位博主建议您必须在主报告之前设置子报告。

所以我尝试了这个：

```
ReportDocument.Load(Response.ReportsPath + "\\myReport.rpt");
foreach (var document in ReportDocument.Subreports.OfType<ReportDocument>())
{
    SetDBLogonForReport(ConnectionInfo, document);
    document.Database.Tables[0].Location = "CommonSubreportTable";
}

ConnectionInfo.DatabaseName = "myDatabase.mdb";
SetDBLogonForReport(ConnectionInfo, ReportDocument);
ReportDocument.Database.Tables[0].Location = "Table0";
ReportDocument.Database.Tables[1].Location = "Table1"; 
```

仍然没有工作。另一位博主建议 DataSets 是要走的路。

所以，我做到了。

```
ConnectionInfo.DatabaseName = "MyDatabase.mdb";

foreach (ReportDocument document in ReportDocument.Subreports)
{
    document.SetDataSource(response.Dst);
}
ReportDocument.Database.Tables[0].SetDataSource(response.Dsx.Tables[0]);
ReportDocument.Database.Tables[1].SetDataSource(response.Dsc.Tables[0]); 
```

我仍然被提示输入参数值！！！我已经在这里待了好几个小时了！！！这不应该这么难！！！有人有其他想法吗？？？有没有修补程序或我忽略的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T15:11:10.517

于是我想出了答案……

显然我必须根据表名而不是索引来设置表位置。

```
ConnectionInfo.DatabaseName = "myDatabase.mdb";
SetDBLogonForReport(ConnectionInfo, ReportDocument);
ReportDocument.Database.Tables[0].Location = "Table0";
ReportDocument.Database.Tables[1].Location = "Table1"; 
```

本来应该...

```
ConnectionInfo.DatabaseName = "myDatabase.mdb";
SetDBLogonForReport(ConnectionInfo, ReportDocument);
ReportDocument.Database.Tables["Table0"].Location = "Table0";
ReportDocument.Database.Tables["Table1"].Location = "Table1"; 
```

一旦我这样做了，一切正常。

# ruby-on-rails-3 - 如何在迁移中正确添加自定义 SQL DML

> ID：11894180
> 
> 赞同：4
> 
> 时间：2012-08-10T01:14:31.253
> 
> 标签：ruby-on-rails-3, activerecord

我今天遇到一种情况，我想在迁移中将部分 postgres 索引添加到表中。自然，这种东西在 Rails 使用中是不可能的`add_index`（它[即将到来](https://github.com/rails/rails/commit/d70e0236df61d69c9299fe63df94da35c87ee2d8)）

因此，我被迫`execute`在迁移中使用语句。

现在，`schema.rb`在顶部有这个评论：

```
# Note that this schema.rb definition is the authoritative source for your
# database schema. If you need to create the application database on another
# system, you should be using db:schema:load, not running all the migrations
# from scratch. The latter is a flawed and unsustainable approach (the more migrations
# you'll amass, the slower it'll run and the greater likelihood for issues).
# 
```

不幸的是，如果我有任何自定义 DML，这个`execute`声明没有被跟踪`schema.rb`，这使得它`schema.rb`几乎毫无用处。

有什么办法可以强制`execute`包含 DML 的语句找到自己`schema.rb`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T01:48:42.967

使用 schema.rb 无法实现您想要的，您想要做的是切换到使用数据库的本机模式转储/检索代码。

```
config.active_record.schema_format = :sql 
```

现在，您将获得一个 structure.sql 文件，而不是 schema.rb 文件。这应该透明地适用于所有 rails 的内置任务，并且由于它使用本机 dumper 格式，它将支持您想要的任何疯狂的东西。

# android - 用于 2d 游戏的 Android Canvas 或 Open GL ES？

> ID：11894182
> 
> 赞同：4
> 
> 时间：2012-08-10T01:14:52.350
> 
> 标签：android, graphics, opengl-es, android-canvas

我想创建一个 2d 游戏，我想知道我的知识背景和游戏本身的一些细节应该走哪条路。

我的背景（相关的东西）：

*   我10天前开始学习android编程，我已经完成了游戏菜单。

*   我有相当多的java编程经验（用于桌面）。

*   我过去在 C++ 中使用 openGL 有一些经验，但只做 3d 的东西（而且我不记得我学到的很多东西）。我从未编写过任何开放的 GL 着色器。我学习了诸如旋转/缩放/平移之类的基本变换、应用纹理（纹理坐标）和一些非常原始的灯光之类的东西。

游戏应该有：

*   精灵。每帧平均可见 +-50。

*   捏缩放/平移手势。

*   此功能：例如能够将一个精灵移动到另一个地方，使用手指绘制要遵循的路径。这在任何缩放级别都应该是可能的。

*   听起来。枪声、爆炸声、简单的短声。

*   作为奖励，最好有一些效果，如带有发光的线条、扭曲效果等，但这实际上不是必需的。

*   应该有简单的方法来绘制几何形状，如圆形/正方形/三角形/等（我的意思不是在游戏本身，而是在用于开发它的 API 中）

我想在 1/2 个月内完成游戏。

现在，考虑到游戏的特点、我的背景和可用的时间，你认为最好的解决方案是什么？OpenGL ES 2.0？帆布？或 API/图形/游戏引擎/库（哪些，是否有文档/教程？）？

游戏本身很简单。我提到的事情在这里真的很重要，至少对我来说。

与我共享特征的游戏示例如下： [Osmos](https://play.google.com/store/apps/details?id=com.hemispheregames.osmos&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5oZW1pc3BoZXJlZ2FtZXMub3Ntb3MiXQ..)、 [Spirit](https://play.google.com/store/apps/details?id=com.jakyl.spirithd&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5qYWt5bC5zcGlyaXRoZCJd)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T02:55:46.067

首先，Canvas 并非不能做游戏。但是，如果您看一下我完全使用画布“松鼠大战”（市场上）制作的游戏，那就是关于在普通设备上使用画布的游戏的局限性。

使用 Canvas 的问题是对您必须使用的内存的限制，以及 FPS 的限制，因为它不是硬件加速的。

最大的限制也是我切换到 OpenGL ES 1.1 的原因之一是，如果需要，OpenGL 将使移植到 iOS 变得更加容易。

同样使用 OpenGL ES，您将对您所做的事情拥有更多的权力，更多的控制，并且它应该足以容纳许多精灵，因为您可以在屏幕上放置而不会使屏幕混乱。

在我正在设计的当前 Open GL 游戏中，我能够以 25-32 FPS 的速度每帧渲染 300-400 个精灵。

然而，通过将精灵的绘制限制为屏幕上的内容，更像是 20-50，我坚持大约 60-70 FPS。

虽然 OpenGL 有一个学习曲线，但值得学习。我有一个 2D 框架，我在介绍和研究该主题的 2 天内设计，它完美地满足了我所有的 2D 需求。

我现在可以将我的 FrameWork 重新用于我想设计的任何 2D 游戏。

无需付出太多，这里有一些代码可以让你开始

```
 import android.app.Activity;
import android.opengl.GLSurfaceView;
import android.os.Bundle;
import android.util.Log;
import android.view.MotionEvent;
import android.view.Window;
import android.view.WindowManager;

public class RunGameActivity extends Activity{
private GLSurfaceView glSurfaceView;
private GLRenderer GLRENDERER;

@Override
public void onCreate(Bundle savedInstanceState) {
    /***************************************************************************************** 
     * This is called when this activity is first creates.
     * First we remove the title bar, make our app full screen
     * It is set to landscape in the manifest file.
     * We than create our OPENGL ES surfaceview and its renderer for us to use
     * and finally setContentView() view so we see the OPENGL ES surfaceview
     * ***************************************************************************************/
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                            WindowManager.LayoutParams.FLAG_FULLSCREEN);
    super.onCreate(savedInstanceState);

    Log.d("RunGameActivity", "onCreate");

    glSurfaceView = new GLSurfaceView(this);
    GLRENDERER = new GLRenderer(this);
    glSurfaceView.setRenderer(GLRENDERER);
    setContentView(glSurfaceView);

}

@Override
public boolean onTouchEvent(MotionEvent event) {
    /***************************************************************************************** 
     * Here we get the incoming on touch event and send it down towards our game
     * via the GLRenderer class. The game does all the actual work with it.
     * ***************************************************************************************/
    Log.d("RunGameActivity", "OnTouchEvent");
synchronized(this) {
        GLRENDERER.HandleMotionEvent(event);
}
    return true;
}

/* Remember to resume the glSurface  */
@Override
protected void onResume() {
    /***************************************************************************************** 
     * Called when app resumes
     * ***************************************************************************************/
    super.onResume();
    glSurfaceView.onResume();
    Log.d("RunGameActivity", "onResume");
}

/* Also pause the glSurface  */
@Override
protected void onPause() {
    /***************************************************************************************** 
     * Called when app pauses
     * ***************************************************************************************/
    super.onPause();
    glSurfaceView.onPause();
    Log.d("RunGameActivity", "onPause");
} 
```

}

我真的不想放弃一切，值得**学习**

但是我已经为我创造了一种以非常有条理的方式处理所有事情的方法，从创建顶点、纹理、动态文本到处理输入、伪造一个管理帧速率独立运动的“相机”、处理重力当我需要它时、检测碰撞, 和动画精灵。更不用说，处理 AdMob 广告、inAppBilling 以及 Ill 需要的所有声音。

刚开始阅读。它遍布网络和书籍。如果你能找到一本好书，值得投资 40 美元。

很多代码您必须自己自定义创建。但值得建立自己的框架。

我再次推荐 OpenGL 1.* 兼容您可能想要的所有设备。

要开始使用我给您的代码，请将其复制粘贴到您的活动中，右键单击对象，然后创建它们的类。Eclipse 会自动告诉/填充很多基本的东西给你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T01:20:24.960

如果您想包含 Android 3.0 之前的设备，我不会使用画布。它不是硬件加速的，所以你会得到非常糟糕的帧速率。

我在我的 android 2.3 设备上对画布做了一些试验，即使使用高端处理器，我也无法让带纹理的正方形在屏幕上滑动而不会出现严重的卡顿。

Android 3 和 4 具有硬件加速视图，但对于 2.3，我认为您确实需要 GPU 利用率来使任何东西都可以远程播放。如果您没有 GPU 加速，您也可能会忘记特殊效果（粒子、发光等）。

OpenGL 我相信是这里的方法，或者如果你不想自己处理 API，你可以使用 OpenGL 包装库（AndEngine 似乎很流行）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T08:36:41.680

我建议使用 AndEngine 来制作游戏。它是硬件加速的（使用 OpenGL ES）并提供良好的 API 来操作精灵。

# html - 导航边框

> ID：11894183
> 
> 赞同：0
> 
> 时间：2012-08-10T01:15:18.240
> 
> 标签：html, css, navigation, border

所以我的导航链接目前在左侧有一个边框，所以我想知道是否有办法做到这一点，所以第一个没有边框（使其不均匀）。看图：[截图](http://img51.imageshack.us/img51/7640/0d0b92080e5146ccbbc5e7e.png)

我尝试创建一个类： .noborder {border:0;} 然后添加，但它没有用

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:20:23.803

也许你必须设置**margin:0;** . 通过将相关的 CSS 添加到您的帖子中会更容易提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T04:35:52.623

这是一个简单的修复，使用边框：0；显然你没有将它分配给正确的元素。

```
<div id="nav">
    <ul>
        <li class="nodec"><a href="#">Home</a></li>
        <li><a href="#">Websites</a></li>
    </ul>
</div>

#nav ul li {
    border-left: 1px solid #fff;
}

.nodec {
    border-left: 0px;
} 
```

添加所有其他格式（填充，颜色，边距），它会工作得很好。不过还有一件事：阅读网站颜色模式，只需用谷歌搜索，您就会发现很多关于该主题的文章。另请查看 Adob​​e Color Kuler (http://kuler.adobe.com/)。这可能对您有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-10T01:20:40.720

该课程可能不起作用，因为它只是一个课程。您可以将 !important 放在值之后：`.noborder {border:0 !important;}` 或者使其更精确，例如： `.noborder > a {border:0;}` 根据您的 html，为了获得更好的答案，我建议您同时提交 html 和 css。

# java-me - 在 Java ME 手机上运行 MoSync 示例项目时出错

> ID：11894187
> 
> 赞同：1
> 
> 时间：2012-08-10T01:16:09.487
> 
> 标签：java-me, mosync

我正在开发一个原型[MoSync](http://www.mosync.com) / MAUI 应用程序：它在我的 Android 手机和模拟器（MoRe / JavaME）中运行良好。然后我尝试在几部旧的 Java 手机（摩托罗拉 V3i 和 LG KP500）上编译和运行该程序，但我无法让它工作，所以我用 MoSync HelloMAUI 示例测试了手机：

*   在 LG 上（用几个 LG 配置文件测试）HelloMAUI 运行但只显示一个空白屏幕（我在 LG 手机上看到一些关于 JavaME 支持不佳或不兼容的[MoSync 论坛条目）](http://www.mosync.com/content/white-screen-lg-km-555)

*   在 Motorola v3i（使用 V3I 配置文件编译）上，HelloMAUI 因“应用程序错误”而停止

对此我有点失望，因为我在MoSync上看到的卖点是对这种旧手机的支持。我正在开发一个收集数据的应用程序，这种旧手机比最近的 Android 手机更便宜、更坚固，然后我试图为所有设备建立一个单一的代码库：

*   你们有没有为这种旧手机编译和运行 MoSync->JavaME 应用程序的好经验？（不在 JavaME 模拟器上，可以正常工作）

*   如果是这样，您能否发布在您的特定情况下运行良好的手机品牌和型号？

*   我以前没有编译 Java ME 应用程序的经验，并且在 MoSync 论坛上看到了一些关于几种移动设备的 Java 实现之间不兼容的抱怨，这威胁到“一次编写，随处运行”的口头禅。是这样吗？也许我很天真，但希望可以部署在 J2ME 仿真器上运行良好的 JAR/JAD，而不用担心不同的手机。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T14:16:07.587

我使用 mosync 为我的诺基亚 x1 手机开发一些基本应用程序。这很棒。

我还在手机上运行了很多 mosync SDK 的示例（不是 nativeUI）。只是“相机演示”似乎有某种错误。

# java - JAXB Marshal Empty String to Null Globally

> ID：11894193
> 
> 赞同：5
> 
> 时间：2012-08-10T01:17:05.543
> 
> 标签：java, jaxb

My question is very similar to [How to prevent marshalling empty tags in JAXB when string is empty but not null](https://stackoverflow.com/questions/6110612/how-to-prevent-marshalling-empty-tags-in-jaxb-when-string-is-empty-but-not-null)

The difference is that I am unable to add the annotation to package-info.java as all our JAXB types are generated from schemas with every build. I also would much prefer not to change JAXB providers if possible.

What I want to achieve is that setting an empty String will not create the element, but I need to set this for all generated JAXB types from many schemas. Is there a way to apply this to all String fields in all generated JAXB classes?

**Update** I have managed to get the XML adapter generating for all Strings in the schema by making the following changes:

In the project POM, I added this to the maven-jaxb2-plugin:

```
<bindingDirectory>src/main/resources</bindingDirectory>
<bindingIncludes>
    <include>bindings.xjb</include>
</bindingIncludes> 
```

And here is my bindings.xjb file:

```
<jxb:bindings xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:jxb="http://java.sun.com/xml/ns/jaxb" version="2.1">
    <jxb:globalBindings>
                    <jxb:javaType name="java.lang.String" xmlType="xs:token"
                        parseMethod="com.project.Formatter.parseString"
                        printMethod="com.project.Formatter.printString"/>
    </jxb:globalBindings>
</jxb:bindings> 
```

And the formatting method:

```
public static String printString(final String value)
{
    if (StringUtils.isBlank(value))
    {
        return null;
    }

    return value;
} 
```

The problem is that this causes a Null Pointer Exception deep within JAXB. Here is the stacktrace:

```
Caused by: java.lang.NullPointerException
    at com.sun.xml.bind.v2.runtime.output.SAXOutput.text(SAXOutput.java:158)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.leafElement(XMLSerializer.java:321)
    at com.sun.xml.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl$1.writeLeafElement(RuntimeBuiltinLeafInfoImpl.java:210)
    at com.sun.xml.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl$1.writeLeafElement(RuntimeBuiltinLeafInfoImpl.java:209)
    at com.sun.xml.bind.v2.runtime.reflect.TransducedAccessor$CompositeTransducedAccessorImpl.writeLeafElement(TransducedAccessor.java:250)
    at com.sun.xml.bind.v2.runtime.property.SingleElementLeafProperty.serializeBody(SingleElementLeafProperty.java:98)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:322)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:681)
    at com.sun.xml.bind.v2.runtime.property.SingleElementNodeProperty.serializeBody(SingleElementNodeProperty.java:150)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:322)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:681)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementNodeProperty.serializeItem(ArrayElementNodeProperty.java:65)
    at com.sun.xml.bind.v2.runtime.property.ArrayElementProperty.serializeListBody(ArrayElementProperty.java:168)
    at com.sun.xml.bind.v2.runtime.property.ArrayERProperty.serializeBody(ArrayERProperty.java:152)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:322)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:681)
    at com.sun.xml.bind.v2.runtime.property.SingleElementNodeProperty.serializeBody(SingleElementNodeProperty.java:150)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:322)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:681)
    at com.sun.xml.bind.v2.runtime.property.SingleElementNodeProperty.serializeBody(SingleElementNodeProperty.java:150)
    at com.sun.xml.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:322)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsXsiType(XMLSerializer.java:681)
    at com.sun.xml.bind.v2.runtime.property.SingleElementNodeProperty.serializeBody(SingleElementNodeProperty.java:150)
    at com.sun.xml.bind.v2.runtime.ElementBeanInfoImpl$1.serializeBody(ElementBeanInfoImpl.java:156)
    at com.sun.xml.bind.v2.runtime.ElementBeanInfoImpl$1.serializeBody(ElementBeanInfoImpl.java:185)
    at com.sun.xml.bind.v2.runtime.ElementBeanInfoImpl.serializeBody(ElementBeanInfoImpl.java:305)
    at com.sun.xml.bind.v2.runtime.ElementBeanInfoImpl.serializeRoot(ElementBeanInfoImpl.java:312)
    at com.sun.xml.bind.v2.runtime.ElementBeanInfoImpl.serializeRoot(ElementBeanInfoImpl.java:71)
    at com.sun.xml.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:490)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:328)
    at com.sun.xml.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:257)
    at javax.xml.bind.helpers.AbstractMarshallerImpl.marshal(AbstractMarshallerImpl.java:103) 
```

The cause of this problem boils down to this method:

```
com.sun.xml.bind.v2.runtime.reflect.TransducedAccessor.CompositeTransducedAccessorImpl.hasValue(BeanT) 
```

The above method will render the element if the value is not null **before** any adapter is run.

Is there any way to override the Accessor used in JAXB so that this will run the adapter before determining whether to render the element? Is there another way to achieve what I want?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-13T09:46:28.370

**Note:** I'm the [**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php) lead and a member of the [**JAXB (JSR-222)**](http://jcp.org/en/jsr/detail?id=222) expert group.

What you have done is right, the error you are seeing is due to what I believe is a bug in the [**JAXB reference implementation**](http://jaxb.java.net/). The JAXB RI should be able to handle a null value being returned from an `XmlAdapter`. This use case works with EclipseLink JAXB (MOXy), I'll demonstrate below with an example.

**StringAdapter**

Below is an implmentation that does approximately what the one that you will get after you generate your Java model from the XML schema (see [http://blog.bdoughan.com/2011/08/xml-schema-to-java-generating.html](http://blog.bdoughan.com/2011/08/xml-schema-to-java-generating.html)).

```
package forum11894193;

import javax.xml.bind.annotation.adapters.XmlAdapter;

public class StringAdapter extends XmlAdapter<String, String> {

    @Override
    public String marshal(String string) throws Exception {
        if("".equals(string)) {
            return null;
        }
        return string;
    }

    @Override
    public String unmarshal(String string) throws Exception {
        return string;
    }

} 
```

**package-info**

Since you are registering a global adapter, it will be referenced from a `package-info` class like the one below (see: [http://blog.bdoughan.com/2012/02/jaxb-and-package-level-xmladapters.html](http://blog.bdoughan.com/2012/02/jaxb-and-package-level-xmladapters.html)).

```
@XmlJavaTypeAdapters({
    @XmlJavaTypeAdapter(value=StringAdapter.class, type=String.class)
})
package forum11894193;

import javax.xml.bind.annotation.adapters.*; 
```

**Root**

Below is a sample domain class with a few `String` fields. Since the `XmlAdapter` was registered at the package level it will apply to all mapped String fields/properties in that package.

```
package forum11894193;

import javax.xml.bind.annotation.*;

@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Root {

    String a;
    String b;
    String c;

} 
```

**Demo**

In the demo code below we'll create an instance of `Root` set a couple of the fields to `""` and then marshal it to XML.

```
package forum11894193;

import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Root root = new Root();
        root.a = "";
        root.b = "b";
        root.c = "";

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**Output Using JAXB RI**

Using the JAXB RI with this example results in a NPE. The stack trace is different, but most likely to us using different marshal methods. I am also using the version of the JAXB RI included in the JDK which is repackaged to `com.sun.xml.internal.bind.v2`.

```
Exception in thread "main" java.lang.NullPointerException
    at com.sun.xml.internal.bind.v2.runtime.output.Encoded.setEscape(Encoded.java:96)
    at com.sun.xml.internal.bind.v2.runtime.output.UTF8XmlOutput.doText(UTF8XmlOutput.java:294)
    at com.sun.xml.internal.bind.v2.runtime.output.UTF8XmlOutput.text(UTF8XmlOutput.java:283)
    at com.sun.xml.internal.bind.v2.runtime.output.IndentingUTF8XmlOutput.text(IndentingUTF8XmlOutput.java:141)
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.leafElement(XMLSerializer.java:293)
    at com.sun.xml.internal.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl$1.writeLeafElement(RuntimeBuiltinLeafInfoImpl.java:179)
    at com.sun.xml.internal.bind.v2.model.impl.RuntimeBuiltinLeafInfoImpl$1.writeLeafElement(RuntimeBuiltinLeafInfoImpl.java:166)
    at com.sun.xml.internal.bind.v2.runtime.reflect.TransducedAccessor$CompositeTransducedAccessorImpl.writeLeafElement(TransducedAccessor.java:239)
    at com.sun.xml.internal.bind.v2.runtime.property.SingleElementLeafProperty.serializeBody(SingleElementLeafProperty.java:87)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.serializeBody(ClassBeanInfoImpl.java:306)
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.childAsSoleContent(XMLSerializer.java:561)
    at com.sun.xml.internal.bind.v2.runtime.ClassBeanInfoImpl.serializeRoot(ClassBeanInfoImpl.java:290)
    at com.sun.xml.internal.bind.v2.runtime.XMLSerializer.childAsRoot(XMLSerializer.java:462)
    at com.sun.xml.internal.bind.v2.runtime.MarshallerImpl.write(MarshallerImpl.java:314)
    at com.sun.xml.internal.bind.v2.runtime.MarshallerImpl.marshal(MarshallerImpl.java:243)
    at javax.xml.bind.helpers.AbstractMarshallerImpl.marshal(AbstractMarshallerImpl.java:75)
    at forum11894193.Demo.main(Demo.java:17) 
```

**Output Using EclipseLink JAXB (MOXy)**

When MOXy is used as the JAXB provider you get the desired output. For information on specifying MOXy as your JAXB provider see: [http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html](http://blog.bdoughan.com/2011/05/specifying-eclipselink-moxy-as-your.html).

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
   <b>b</b>
</root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T03:02:19.017

An empty string is still a value. That's why the element is created. With that said, what about in your setter methods set the variable to null if the string is empty?

Also, check this thread out [JAXB: how to make JAXB NOT to unmarshal empty string to 0](https://stackoverflow.com/questions/5133250/jaxb-how-to-make-jaxb-not-to-unmarshal-empty-string-to-0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-20T17:41:57.990

Use Below code into you Marshall class

```
public static String toXml(Object o, Class clazz, boolean isFormatted, boolean isEmptyNodes) {
        try {
            Map<String, Object> properties = new HashMap<String, Object>(1);
            if(isEmptyNodes) {
                SessionEventListener sessionEventListener = new NullPolicySessionEventListener();
                properties.put(JAXBContextProperties.SESSION_EVENT_LISTENER, sessionEventListener);
            } else {
                SessionEventListener sessionEventListener = new DiscardEmptyTagSessionEventListener();
                properties.put(JAXBContextProperties.SESSION_EVENT_LISTENER, sessionEventListener);
            }

            // Create a JaxBContext
            JAXBContext jc = JAXBContext.newInstance(new Class[] {clazz}, properties);
            StringWriter sw = new StringWriter();

            // Create the UnMarshaller Object using the JaxB Context
            Marshaller marshaller = jc.createMarshaller();

            marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, isFormatted);
            // remove the xml version line from the output
            marshaller.setProperty("com.sun.xml.bind.xmlDeclaration", Boolean.FALSE);
            // Marshal the employee object to XML and print the output to console
            marshaller.marshal(o, sw);

            return sw.toString();
        } catch (JAXBException e) {
            throw new RuntimeException(e.getMessage(), e);
        }
} 
```

# ruby - 如何安装 ruby -oci8？

> ID：11894194
> 
> 赞同：23
> 
> 时间：2012-08-10T01:17:08.747
> 
> 标签：ruby, macos, oracle

我正在尝试在 OS X 上安装 ruby​​-oci8。

我试过安装有和没有`sudo`.

没有错误消息`sudo`：

```
gem install ruby-oci8
ERROR:  While executing gem ... (Gem::FilePermissionError)
    You don't have write permissions into the /Library/Ruby/Gems/1.8 directory. 
```

错误消息`sudo`：

```
sudo gem install ruby-oci8
Password:
Building native extensions.  This could take a while...
ERROR:  Error installing ruby-oci8:
    ERROR: Failed to build gem native extension.

        /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb
checking for load library path... 
  DYLD_LIBRARY_PATH is not set.
checking for cc... ok
checking for gcc... yes
checking for LP64... yes
checking for sys/types.h... yes
checking for ruby header... ok
*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby
    --with-instant-client
    --without-instant-client
./oraconf.rb:887:in `get_home': RuntimeError (RuntimeError)
    from ./oraconf.rb:703:in `initialize'
    from ./oraconf.rb:319:in `new'
    from ./oraconf.rb:319:in `get'
    from extconf.rb:18 
```

错误信息：

```
Set the environment variable ORACLE_HOME if Oracle Full Client.
Append the path of Oracle client libraries to DYLD_LIBRARY_PATH if Oracle Instant Client.

The 'sudo' command unset some environment variables for security reasons.
Pass required varialbes as follows
     sudo env DYLD_LIBRARY_PATH=$DYLD_LIBRARY_PATH /usr/bin/gem install ruby-oci8
  or 
     sudo env ORACLE_HOME=$ORACLE_HOME /usr/bin/gem install ruby-oci8

Backtrace:
  ./oraconf.rb:887:in `get_home'
  ./oraconf.rb:703:in `initialize'
  ./oraconf.rb:319:in `new'
  ./oraconf.rb:319:in `get'
  extconf.rb:18

See:
 * http://ruby-oci8.rubyforge.org/en/HowToInstall.html
 * http://ruby-oci8.rubyforge.org/en/ReportInstallProblem.html 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2014-01-29T21:44:59.853

为 10.9/10.10/10.11OSX Mavericks/Yosemite/El Capitan 安装 ruby​​-oci8 的略微更新版本 - 分步：

1.  去这里：[http ://www.oracle.com/technetwork/topics/intel-macsoft-096467.html](http://www.oracle.com/technetwork/topics/intel-macsoft-096467.html)
2.  **下载 Instantclient-sqlplus、instantclient-sdk、instantclient-basic 的 64 位版本**- 32 位版本不适用于 OSX 10.9
3.  在 /opt/oracle 创建目录
4.  首先解压缩 Instantclient-basic，移动到 /opt/oracle（应该添加一个文件夹 - 类似于 /opt/oracle/instantclient_11_2/）
5.  解压 Instantclient-sdk 并将其内容移动到 /opt/oracle/instantclient_11_2/
6.  解压 Instantclient-sqlplus 并移动其内容 /opt/oracle/instantclient_11_2/
7.  打开终端（如果您还没有）并输入...
8.  `DYLD_LIBRARY_PATH=/opt/oracle/instantclient_11_2 export DYLD_LIBRARY_PATH`
9.  `ORACLE_HOME=/opt/oracle/instantclient_11_2 export ORACLE_HOME`
10.  `cd /opt/oracle/instantclient_11_2`
11.  `ln -s libclntsh.dylib.11.1 libclntsh.dylib`（创建一个符号链接）
12.  `env`
13.  验证 DYLD_LIBRARY_PATH=/opt/oracle/instantclient_11_2 （确保在 instantclient_11_2 之后没有尾随 /）
14.  验证 ORACLE_HOME=/opt/oracle/instantclient_11_2
15.  宝石安装 ruby​​-oci8

之后应该工作。文件结构应如下所示：

![在此处输入图像描述](../Images/c254aefee6f1a040cf5633d76b897128.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-03-09T22:47:35.600

对于任何试图让它在 2016 年美好的旧年工作的人，错误消息现在包含指向页面[http://www.rubydoc.info/github/kubo/ruby-oci8/file/docs/install-的链接on-osx.md](http://www.rubydoc.info/github/kubo/ruby-oci8/file/docs/install-on-osx.md)为您提供有关如何使用 Homebrew 进行操作的说明。上面的东西都没有对我有用（我都试过了），但后来我把这个问题带给了一位同事，他们说，“嘿，你有没有尝试那里的错误消息中的链接？” 果然，做到了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-31T23:13:50.223

如果其他人需要在 mac osx el capitan 上的**Ruby 1.8.7**上安装旧版本的 ruby​​-oci8，我使用以下方法成功安装了**ruby​​-oci8-2.1.2 。**我认为它也适用于其他 ruby​​-1.8.7 版本（ruby-oci8 < 2.2.0），但我没有检查其他版本：

1.  去这里：[http](http://www.oracle.com/technetwork/topics/intel-macsoft-096467.html) ://www.oracle.com/technetwork/topics/intel-macsoft-096467.html 下载**Instantclient-basic**、**instantclient-sdk**、**instantclient-sqlplus**的 64 位版本（我使用的是 -macos.x64 -11.2.0.4.0 版本）
2.  将 zip 文件复制到 /opt/oracle 并解压缩它们。它应该将它们提取到 /opt/oracle/instantclient_11_2
3.  `cd /opt/oracle/instantclient_11_2`
4.  `ln -s libclntsh.dylib.11.1 libclntsh.dylib`
5.  `curl -O https://raw.githubusercontent.com/kubo/fix_oralib_osx/master/fix_oralib.rb`
6.  确保在运行脚本时附加 -a 标志，这将使脚本使用绝对路径而不是 @rpath/*.dylib 路径来修复库，这最终会阻塞 gem 构建过程。（如果要检查，请先阅读 fix_oralib.rb 脚本）。无论如何，运行：`ruby fix_oralib.rb -a`
7.  `export OCI_DIR=/opt/oracle/instantclient_11_2`
8.  现在获取 ruby​​-oci8 源码`git clone https://github.com/kubo/ruby-oci8.git`
9.  签出您要安装的版本（我需要 2.1.2）`git checkout ruby-oci8-2.1.2`
10.  编辑此文件：**ruby-oci8/ext/oci8/oraconf.rb**并更改此行：

`when /darwin/ @@ld_envs = %w[DYLD_LIBRARY_PATH] so_ext = 'dylib'`

对此：

`when /darwin/ @@ld_envs = %w[DYLD_LIBRARY_PATH OCI_DIR] so_ext = 'dylib'`

11.  现在切换回 gem 本身的根目录并构建 gemspec：`gem build ruby-oci8.gemspec`
12.  `2potatocakes$ gem install ruby-oci8-2.1.2.gem Building native extensions. This could take a while... Successfully installed ruby-oci8-2.1.2 1 gem installed`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-11-16T17:17:35.423

在 OS X Sierra 上，由于系统完整性保护（[https://forums.developer.apple.com/thread/13161](https://forums.developer.apple.com/thread/13161)），我无法设置 DYLD_LIBRARY_PATH，所以我将所有 oracle 的即时客户端文件复制到 /users/.../ lib，因为它可以回退到某些目录，包括以下目录：

```
...
checking the default value of DYLD_FALLBACK_LIBRARY_PATH...
checking /Users/<username>/lib... no
checking /usr/local/lib... no
checking /lib... no
checking /usr/lib... no
... 
```

并且gem安装成功！

```
cp -R /opt/oracle/instantclient_11_2/* /users/..username../lib
gem install ruby-oci8

Building native extensions.  This could take a while...
Successfully installed ruby-oci8-2.2.2
1 gem installed 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-07-24T16:38:10.943

如果您将 MAC 与 El Capitan 一起使用，由于系统完整性保护 (SIP) 的最新嵌入式功能，DYLD_* 环境变量将被忽略。

所以如果你想用 El Capitan 安装 ruby​​-oci8，首先你必须禁用 SIP。

请按照以下步骤禁用 SIP：

1.  重新启动您的 Mac。
2.  在 OS X 启动之前，按住 Command-R 并一直按住它，直到您看到 Apple 图标和进度条。释放。这将引导您进入恢复。
3.  从实用程序菜单中，选择终端。
4.  在提示符下键入以下内容，然后按 Return：csrutil disable
5.  终端应显示 SIP 已禁用的消息。
6.  从  菜单中，选择重新启动。

如果您仍然遇到问题，请尝试此链接 [http://blog.codiez.co.za/2013/09/setup-oracle-instant-client-ruby-oci8-gem-mac/](http://blog.codiez.co.za/2013/09/setup-oracle-instant-client-ruby-oci8-gem-mac/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-21T07:08:35.910

错误消息有些冗长，但它基本上表明您需要安装[Oracle 客户端库](http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html)并将`DYLD_LIBRARY_PATH`变量指向该位置。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-08-27T14:28:05.910

首先从他们的网站下载适用于 32 位 Linux 的 oracle Instantclient 版本 11.2。版本 12 或更高版本不适用于某些数据库（我总是使用 .zip 版本，所以这是指南假设的内容。它还假设下载的文件位于 /tmp 文件夹中。）。您将需要基本版本、sqlplus 和 sdk。下载完成后，在终端中执行以下命令

```
sudo mkdir -p /opt/oracle
sudo cd /opt/oracle
sudo unzip /tmp/instantclient-basic-linux-11.2.0.4.0.zip
sudo unzip /tmp/instantclient-sqlplus-linux-11.2.0.4.0.zip
sudo unzip /tmp/instantclient-sdk-linux-11.2.0.4.0.zip
sudo apt-get install libaio1
sudo cd instantclient_11_2
sudo ln -s libclntsh.so.11.2 libclntsh.so 
```

-现在，我们需要告诉我们的 bash shell oracle 客户端的位置。因此，请允许自己查看隐藏文件，并使用文本编辑器打开 $home/.bashrc。将以下行添加到文件底部，然后保存：

```
export LD_LIBRARY_PATH=/opt/oracle/instantclient_11_2 
```

- 现在源 .bashrc 以在终端中使用此命令加载新设置：

```
source ~/.bashrc 
```

- 现在，如果我们做的一切都正确，我们应该能够安装 oracle 数据库适配器 gem。试试这个命令：

```
gem install ruby-oci8 -v '2.1.5' 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-12-16T09:12:22.110

这看起来很痛苦。我想我可能已经找到了一种更好的方法来解决这个问题（至少在 Mac OS 上）。

只需运行以下 brew 命令：

```
brew tap InstantClientTap/instantclient
brew install instantclient-basic
brew install instantclient-sqlplus
brew install instantclient-sdk 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-22T06:02:03.893

由于某种原因，ruby-oci8 没有为我安装即时 client_11_2。我尝试了这里和其他地方建议的所有答案，但无法完成。后来我尝试使用即时客户端 12_1，它没有任何问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-10-25T08:03:47.843

**为CENTOS7**安装 ruby​​-oci8 的更新版本

 **```
cd /etc/yum.repos.d
sudo wget http://yum.oracle.com/RPM-GPG-KEY-oracle-ol7
sudo rpm --import RPM-GPG-KEY-oracle-ol7
sudo yum-config-manager --enable ol7_oracle_instantclient
sudo yum install oracle-instantclient18.3-basic
sudo yum install oracle-instantclient18.3-devel
sudo yum install oracle-instantclient18.3-jdbc
sudo yum install oracle-instantclient18.3-sqlplus
export ORACLE_HOME=/usr/lib/oracle/18.3/client64
export LD_LIBRARY_PATH=$ORACLE_HOME/lib:$LD_LIBRARY_PATH
gem install ruby-oci8 -v '2.2.7' 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-06-30T05:22:00.167

然而，对于那些使用 zsh 而不是 bash 的人仍然遵循[Etusm 的](https://stackoverflow.com/a/21443313/4170558)回答，在步骤 8 和 9 中替换为

```
8\. export DYLD_LIBRARY_PATH=/opt/oracle/instantclient_11_2 
9\. export ORACLE_HOME=/opt/oracle/instantclient_11_2 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2016-07-27T09:31:26.833

如果您使用的是**OS X El Capitan、Yosemite 和 Mavericks**。您应该使用**Instant** Client 12.1.0.2 从 oracle 网站下载 Instant Client 12.1.0.2

1.  即时客户端-基本-macos.x64-12.1.0.2.0.zip
2.  即时客户端-sqlplus-macos.x64-12.1.0.2.0.zip
3.  Instantclient-sdk-macos.x64-12.1.0.2.0.zip

然后按照以下**步骤操作**：-

1.  在 /opt/oracle 创建目录
2.  首先解压缩 Instantclient-basic，移动到 /opt/oracle（应该添加一个文件夹 -
    类似于 /opt/oracle/instantclient_12_1/）
3.  解压 Instantclient-sdk 并将其内容移动到 /opt/oracle/instantclient_12_1/
4.  解压 Instantclient-sqlplus 并移动其内容 /opt/oracle/instantclient_12_1/
5.  打开终端（如果您还没有）并输入...

> DYLD_LIBRARY_PATH=/opt/oracle/instantclient_12_1 导出 DYLD_LIBRARY_PATH ORACLE_HOME=/opt/oracle/instantclient_12_1 导出 ORACLE_HOME

6.  cd /opt/oracle/instantclient_12_1

> ln -s libclntsh.dylib.12.1 libclntsh.dylib（创建符号链接）
> 
> ln -s libocci.dylib.12.1 libocci.dylib

7.  运行：环境
    8.  验证 DYLD_LIBRARY_PATH=/opt/oracle/instantclient_11_2（确保
        在 instantclient_11_2 之后没有尾随 /）验证 ORACLE_HOME=/opt/oracle/instantclient_11_2
    9.  **gem install ruby​​-oci8 -v gemVersion**

**注意：-** 如果这仍然不起作用，请尝试**在您的 Mac 上禁用 SIP，** 然后再试一次。

*它对我有用，希望它也对你有用。* **祝一切顺利****

# asp.net - 如何处理数据库空错误（已使用 iif something is null）

> ID：11894196
> 
> 赞同：0
> 
> 时间：2012-08-10T01:17:20.210
> 
> 标签：asp.net, vb.net

我有个问题

我有两张桌子，我离开了拖车桌。

如您所知，它可能具有空值

我使用 IIf 来处理空值，它的工作

但是当我使用 Server.UrlDecode 函数时，它有一个错误说不能编码空值。

`<%# IIf(DataBinder.Eval(Container.DataItem,"certName") Is System.DBNull.Value , "-----" , Server.UrlDecode(DataBinder.Eval(Container.DataItem,"certName"))) %>`

我该如何解决问题，或隐藏此错误消息？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:51:50.613

IIF 评估它传递的第二个和第三个参数，并且只返回对应于第一个参数的真/假值的那个。因此，即使您正在检查 VBNull 值，您仍然会从第三个参数中得到一个错误，因为它已被评估。尝试使用 IF() 代替，它会短路并且仅评估相关参数。

# c# - 本地化与文字之间的区别

> ID：11894198
> 
> 赞同：4
> 
> 时间：2012-08-10T01:17:27.533
> 
> 标签：c#, asp.net

我只是在阅读`Literal`控件和控件之间的区别`Localize`

我知道这个问题已经[在这里](https://stackoverflow.com/questions/5123287/when-should-i-use-a-localize-control-instead-of-a-literal)被问过，但在那里提出的回应对我来说不起作用。

根据 MSDN：

> **Localize 控件继承自 Literal 控件，并且在各个方面都与其相同。**Localize 控件在设计时用于区分可以本地化的静态文本与其他静态文本。

我目前对`Localize`和`Literal`控件的理解是，前者在 Visual Studio 的设计时呈现默认值，而后者将呈现*计算值，例如资源文件的内容*。

我创建了一个小页面来证明这一点，但我找不到任何区别，这就是我尝试的原因：

```
 <div><asp:Localize ID="Localize1" Text="<%$Resources: Resource, String1 %>" runat="server" >String1</asp:Localize></div>
    <div><asp:Literal ID="Literal1" Text="<%$Resources: Resource, String1 %>" runat="server" >String1</asp:Literal></div>
    <div><asp:Label ID="Label1" Text="<%$Resources: Resource, String1 %>" runat="server" >String1</asp:Label></div> 
```

上面的代码呈现如下：

```
 <div>ploop</div>
    <div>ploop</div>
    <div><span id="Label1">ploop</span></div> 
```

到目前为止一切顺利，但我希望在设计时发现 Visual Studio 的不同之处，但我没有，这是 Visual Studio 输出

![在此处输入图像描述](../Images/6ab851e4e3ba3887e3aa21caf0dda047.png)

作为附加说明，我知道在使用资源时我可以使用*隐式资源*（使用本地资源时），在设计时使用默认值。例子：

```
 <asp:Label ID="Label1" runat="server" meta:resourcekey="Label1Resource1" 
        Text="Label"></asp:Label> 
```

使用上面的代码，我得到了在 Visual Studio 中按预期在设计时呈现的文本*标签。*

`Literal`那么控件和控件之间有什么区别`Localize`？，我错过了什么？

注意：我使用网站和 Web 应用程序进行了测试

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-28T15:03:52.753

@Jupaol，不确定您是否清楚`<asp:Localize>`控件的确切作用，但它将文本转换为本地语言。看看[我什么时候应该使用 Localize 控件而不是 Literal？](https://stackoverflow.com/a/6518100/165694)希望这会更有意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T01:22:47.723

正如您所引用的，它们*在各个方面都是相同的*。

唯一的区别是一个是本地化的。就是这样。如果他们愿意，这将使*其他类*能够以不同的方式对待 Literal。但同样：它们是相同的。

它本质上只是一个标记类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T01:24:03.660

[http://msdn.microsoft.com/en-us/library/ms227668(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/ms227668%28v=vs.80%29.aspx)

从 MSDN 链接中，它说“Localize 控件与 Literal Web 服务器控件相同，并且类似于 Label Web 服务器控件。”

您可以从链接中获得更多详细信息。

# php - 像这样的功能应该有单元测试吗？

> ID：11894199
> 
> 赞同：6
> 
> 时间：2012-08-10T01:17:30.640
> 
> 标签：php, unit-testing, tdd, phpunit

我已经使用 PHP 和 JS 编写了一个 webapp，它现在可以工作，并决定我应该学习单元测试并在清理我的代码时立即实施它。

我对应该对什么进行单元测试感到困惑。我见过的每个 PHPUnit 教程都测试了 getter、setter、对数组中的项目进行计数。我正在处理的网站上有一个显示照片的页面。用户可以喜欢照片或将其添加到他的收藏夹。PHP 主要在站点中用作客户端运行主干.js 的 API 层。

我应该如何为这些功能编写单元测试？一个函数（如下所示）获取通过 AJAX 发送给它的 $_GET 数据，并将一些行插入到数据库中。它不包含任何 setter、getter 或计数任何东西，也不是一个类。它甚至应该进行单元测试吗？

我可以为这些功能编写的单元测试示例将非常棒！:)

```
/**
 * Create new Set and add item to it
 *  @return  void
 */ 
public function action_create_set() {
    // Get data from user
    $user_id = Input::get('user_id');
    $post_id = Input::get('post_id');
    $set_name = Input::get('set_name');

    // Create new set
    $data = array(
        'user_id' => $user_id,
        'name' => $set_name
    );
    $set_id = DB::table('sets')->insert_get_id($data);

    // Add item to newly created set
    DB::query("INSERT IGNORE INTO posts_sets (post_id, set_id, user_id)
        VALUES ($post_id, $set_id, $user_id)");

    // Change `created_at` & `updated_at` col of 'sets'
    $data = array(
        'created_at' => DB::raw('NOW()'),
        'updated_at' => DB::raw('NOW()')
        );
    DB::table('sets')
        ->where('id', '=', $set_id)
        ->update($data);
} 
```

对于第一个函数，我的印象是可以编写一个测试来检查这 3 个变量`$user_id, $post_id, $set_name`是否必须包含数据。我觉得应该有一个测试来检查这两个`insert`查询是否有效，但我也认为插入行的函数是由 PHP 框架提供的，并且已经过彻底测试，因此不需要进一步的单元测试。

另一个猜测是测试应该向函数提供 3 个变量，然后检查新行是否已插入到 2 个表中，但这不会被视为集成测试吗？

* * *

这是一个函数，它通过 AJAX 从用户那里获取输入，然后以 JSON 格式返回结果。PHPUnit 应该处理这种 API 函数吗？还是应该在客户端进行单元测试？

```
/**
 * Get items Liked by user
 * @return array
 */
public function action_likes() {

    $user_id = Input::get('user_id');

    $likes = DB::table('likes')
                ->join('posts', 'posts.id', '=', 'likes.post_id')
                ->where('likes.user_id', '=', $user_id)
                ->get();

    return json_encode($likes);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T01:34:12.493

首先，您应该制作一个“单元”进行测试。

您当前的实现将所有内容都放入一个函数中。这样的代码很难测试。

首先，我建议将它分成 3 个部分。

第一部分处理`$_GET`并组成一个内部表达式。然后第二部分将其保存到数据库中。最后，第三部分接收数据库中的对象，并呈现响应。

如果将其拆分，则第二个和第三个功能将变得可测试。

这太天真了，但也许值得作为你的第一步。如果你有兴趣，请搜索 MVC。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T11:42:06.187

> 另一个猜测是测试应该向函数提供 3 个变量，然后检查新行是否已插入到 2 个表中，但这不会被视为集成测试吗？

一般说明：当你开始学习单元测试和测试自动化时，你会很快意识到像“单元测试”和“集成测试”这样的术语实际上是相对的，并且非常依赖于上下文。

从您对 action_create_set 函数的描述来看，您似乎可以将其视为 Web api 层的一部分。如果您决定为此层编写测试，那么是的，测试此功能是否真的以正确的方式转换您的数据库是一个好主意。

是单元测试吗？好吧，有人可能会争辩说答案是否定的，因为这个函数做了“太多”的事情（从 HTTP 请求转换数据，进行数据库调用，如果你通过发出虚假的 http 请求来测试它，这通常涉及你的整个 http 处理堆栈）。

另一方面，您正在测试 Web api 的一个单一功能，该功能在应用程序的业务逻辑方面具有单一且明确定义的职责。这将是肯定答案的论据。

我个人更喜欢后者，但归根结底，这并不重要。

> 这是一个函数，它通过 AJAX 从用户那里获取输入，然后以 JSON 格式返回结果。PHPUnit 应该处理这种 API 函数吗？还是应该在客户端进行单元测试？

这取决于情况。从测试自动化纯粹主义者的角度来看，完美的解决方案是在双方都进行测试。

服务器端测试应该描述和测试你的 action_likes 函数在不同情况下的行为：

*   当没有数据可用时它是否返回空集？
*   如果 user_id 不存在或格式不正确会怎样？
*   在典型场景中返回什么？

每个测试都应该从数据库中的一些预设数据开始，并检查返回的 JSON 的内容。这样你就可以测试你的服务器 API 层。

但是测试客户端代码也很有意义。大多数情况下，从 ajax 调用成功接收数据应该会产生一些副作用。

例如，您可以测试是否实际调用了应该处理接收到的数据的适当回调，或者某些数据结构会做出相应的反应。

在这种测试中，您不是与真实服务器交互，而是使用为此目的设计的 js 库来模拟 AJAX 请求和响应。其中有很多。我目前的偏好包括[buster.js](http://busterjs.org/)，我发现它也非常适合在持续集成环境中使用。

# sql - DATEDIFF 将分钟转换为十进制

> ID：11894202
> 
> 赞同：3
> 
> 时间：2012-08-10T01:18:11.493
> 
> 标签：sql, sql-server, casting, datediff

我在将分钟转换为小数时遇到了一些问题，即使我已经查看了 SO 的其他回复。

```
select cast(datediff(minute, min(start_time), min(complete_time)) as decimal (10,10)) 
from TRACKED_OBJECT_HISTORY TOH1 
where TOH1.op_name = 'Assembly' 
```

结果返回，但我总是得到像 2.00、4.00、5.00 这样的结果，而不是像 1.86、3.99、5.03 这样的数字。我猜它是事后转换（我也尝试了转换功能无济于事）。有什么想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T01:24:09.830

Datediff 返回一个整数，而不是浮点数或数字。

为了得到你想要的，也许你应该在几秒钟内完成差异然后划分：

```
select cast(datediff(second, min(start_time), min(complete_time))/60.0 as decimal (10,10))
from TRACKED_OBJECT_HISTORY TOH1 where TOH1.op_name = 'Assembly' 
```

# mod-rewrite - Mod Rewrite 中的“If”-“Else”

> ID：11894207
> 
> 赞同：0
> 
> 时间：2012-08-10T01:18:34.037
> 
> 标签：mod-rewrite

我一直在搜索和测试 3 个小时，但没有运气。希望你们能帮助我。

这是我的代码：

```
AddHandler php-legacy .php

<IfModule mod_rewrite.c>
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_REFERER} ^http://www\.google\.com [NC]
RewriteRule http://www.domain1.com [R=301,L]
</IfModule>

<IfModule mod_rewrite.c>
Options +FollowSymLinks 
RewriteEngine on
RewriteRule ^$ http://www.domain2.com/ [R=301,L]
RewriteCond %{HTTP_HOST} .*
RewriteRule ^(.+)$ http://$1.domain2.com/ [R=301,L]
</IfModule> 
```

第二个 mod_rewrite 工作并且已经工作了几个月，但现在我想先检查一下是否有人从 Google 访问。如果是这样，我想将它们推送到不同的域。但是（第 1 个）推荐人部分没有。如何在运行第二部分“之前”检查引荐来源并对其采取行动？

第二个问题。我认为您不再可以了，但是有什么方法可以判断某人是来自 Google Adwords 链接还是有机搜索链接？我认为谷歌已经让这变得不可能了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:28:53.280

您的 中有一个错误`RewriteRule`，看起来您缺少正则表达式匹配。

```
RewriteRule http://www.domain1.com [R=301,L] 
```

会让apache思考：

*   如果 URI 是`http://www.domain1.com`
*   将其重写为`[R=301,L]`

你可能想要这个：

```
RewriteRule ^(.*)$ http://www.domain1.com/$1 [R=301,L] 
```

# python - 为生产准备金字塔应用程序

> ID：11894210
> 
> 赞同：3
> 
> 时间：2012-08-10T01:18:38.537
> 
> 标签：python, pyramid, production

所以当我接近我的网络项目的生产阶段时，我一直想知道如何准确地部署一个金字塔应用程序。在文档中，它说用于`../bin/python setup.py develop`将应用程序放入`development mode`. 是否有另一种专为生产而设计的模式。还是我只是使用`../bin/python setup.py install`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:50:58.527

`python setup.py develop`那么和之间的巨大差异`python setup.py install`。是否`install`会将软件包安装在您的`site-packages`目录中。同时`develop`将安装一个`egg-link`指向该目录进行开发。

所以是的，你可以在技术上使用这两种方法。但是，根据您的项目执行方式，在 site-package 中安装可能不是一个好主意。

为什么？FileUpload 或您的应用程序可能生成的任何内容，例如动态文件等...如果您的应用程序不使用配置文件来查找保存文件的位置。安装您的应用程序并运行您的应用程序可能会尝试在您的站点包目录中写入文件。

换句话说，您必须确保可以使用配置文件定位所有可能生成的文件和目录等。

然后，如果`dynamic`在配置中指出了所有目录，那么安装是好的......

您所要做的就是创建一个包含 production.ini 文件的文件夹并运行`pserve production.ini`.

代码可以以这种方式保存在您的计算机上的任何位置，您还可以使用 uWSGI 或您喜欢的任何其他 WSGI 服务器。

我认为安装代码不是一件坏事，从应用程序中获取数据是一件好事。

我猜它对部署有一些优势。

# sql - 更改列表并将默认值设为空字符串

> ID：11894212
> 
> 赞同：6
> 
> 时间：2012-08-10T01:18:47.167
> 
> 标签：sql, sql-server, sql-server-2008

美好的一天..只是想问一下，是否可以更改列表并将默认值设置为空字符串..

我尝试使用此查询，

```
 Alter Table Employee Alter Column sJobTitle Varchar(200) DEFAULT '' 
```

不幸的是，它不起作用..

请让我知道，如果这样做是正确的..

谢谢，

关联

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-10T01:27:59.270

您需要添加一个约束。参考[http://blog.sqlauthority.com/2008/05/31/sql-server-create-default-constraint-over-table-column/](http://blog.sqlauthority.com/2008/05/31/sql-server-create-default-constraint-over-table-column/)

```
ALTER TABLE Employee 
        ADD CONSTRAINT DF_Employee _JobTitle
        DEFAULT '' FOR sJobTitle 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T02:19:48.890

试试这个查询。此查询不会将当前数据更改为默认值。

```
ALTER TABLE Employee
ADD DEFAULT ('') FOR sJobTitle 
```

也许它工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-15T01:56:25.177

```
ALTER TABLE Employee 
ADD sJobTitle varchar(200) NOT NULL DEFAULT '' 
```

最简单的答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-26T13:33:36.633

你可以试试这个，单列和多列

单列：

```
ALTER TABLE `DBname`.`table_name` 
 MODIFY COLUMN `foo_name` VARCHAR(255) NOT NULL DEFAULT ''; 
```

多列：

```
ALTER TABLE `DBname`.`table_name`
 MODIFY COLUMN `foo_name` VARCHAR(255) NOT NULL DEFAULT '',
 MODIFY COLUMN `foo_roll` VARCHAR(65) NOT NULL DEFAULT ''; 
```

# java - 从需要密码的网站获取数据

> ID：11894213
> 
> 赞同：0
> 
> 时间：2012-08-10T01:18:47.900
> 
> 标签：java, android, jsoup

我正在考虑制作一个从网站获取数据的应用程序。但是这个网站只能在输入用户名和密码后才能进入。例如，如果您访问 Example.com，浏览器会提示您“example.com 正在请求用户名和密码”，并允许您输入用户名和密码。我将如何在应用程序中处理这个问题？我打算在登录后使用 jsoup 来收集数据。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:29:56.430

这在一定程度上取决于如何实现登录。如果它是一个 HTTP POST 请求，您通常可以在 JSoup 中这样做`Connection.Response response = Jsoup.connect(url).data("username", "user", "password", "pwd").method(Method.POST).execute()`：“用户名”和“密码”是 POST 参数的名称，通常与 HTML 表单字段相对应。这是一种可行的方法，尽管很简单。有时（通常）页面使用额外的安全措施，如验证码或使用 Javascript 来加密密码。然后你需要模拟它。但这取决于具体的站点实施。

如果他的站点使用基本 HTTP 身份验证（您对弹出窗口的描述听起来有点像），您可以在这里找到解决方案：[Jsoup connection with basic access authentication](https://stackoverflow.com/questions/7679916/jsoup-connection-with-basic-access-authentication)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:26:01.693

您可以查看 java.net 包或使用 HTTPUnit。它将帮助您通过 HTTP 之类的方法与 WebServer 进行通信。

# c++ - 为向量的向量保留内存，C++

> ID：11894214
> 
> 赞同：3
> 
> 时间：2012-08-10T01:18:53.210
> 
> 标签：c++, opencv, vector

我在stackoverflow上阅读了很多关于这个主题的问题。但是，我在其中任何一个中都找不到我的答案。因此，这个问题。

我有

```
vector< vector< int > > temp 
```

我可以为外部向量保留内存：

```
temp.reserve(20); 
```

现在，我想为每个内部向量保留内存。我可以这样做：

```
temp[i].reserve(500); 
```

但是，如果我使用 temp.clear(); 那么 temp 的容量保留为 20。但是，现在如果我用 20 个内部向量初始化 temp 向量，这些内部向量的容量将重置为 0（根据 VS2010 Intellisense）。

我的问题：

1.  即使在清除并重新初始化外部向量后，如何保留 500 的内部向量容量？

2.  我正在使用 OpenCV findContours 函数。此函数清除外部向量并用一组新的内部向量填充它。这个函数会导致内存的释放和重新分配吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:22:20.537

1）你不能在 C++ 中。根据定义清除外部向量会破坏内部向量，释放它们的所有内存。

2）如果它正在清除外部向量并重新创建它，那么是的，它会导致释放，然后是分配。

不幸的是，我无法弄清楚您的根本问题是什么，因此我无法就可能的解决方案提供更多帮助。

编辑：您总是可以让外部成为一个（可能是智能）指针的向量，这些指针指向存储在池中/从池中检索的内部向量。然后当外部被清除时，只有指针本身被清除并且池化的内部向量仍然存在。

# c++ - 为什么当我使用 getline 时 cout 打印两次？

> ID：11894215
> 
> 赞同：7
> 
> 时间：2012-08-10T01:19:01.283
> 
> 标签：c++

我正在尝试使用 getline 读取一串文本。出于某种原因，它会打印两次“请输入您的选择”：

```
Please enter your selection
Please enter your selection 
```

如果我键入无效文本，它会再次循环，并且此后每次循环仅打印一次。

```
while (valid == false) {    
    cout << "Please enter your selection" << endl;
    getline (cin,selection);

    // I have a function here which checks if the string is valid and sets it to true 
    // if it is valid.  This function works fine, so I have not included it here.  The while
    // look breaks correctly if the user enters valid input.
} 
```

有谁知道为什么会发生这种情况？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T01:30:55.790

*当您进入循环时，可能*还有来自先前操作的输入缓冲区中的内容。

被 捡到`getline`，发现无效，然后循环再次运行。

* * *

例如，假设在您进入循环之前，您读取了一个字符。但是，在熟化模式下，您需要在操作之前输入字符*和*换行符。

因此，您读取字符并且换行符留在输入缓冲区中。

然后您的循环开始，读取换行符，并认为它无效，然后循环返回以获取您的*实际*输入行。

这是一种可能性，当然，可能还有其他可能性——它在很大程度上取决于该循环*之前*的代码以及它对`cin`.

如果*是*这种情况，则类似于：

```
cin.ignore(INT_MAX, '\n'); 
```

在循环可能修复它之前。

或者，您可能希望确保在任何地方都使用基于行的输入。

* * *

这里有一些代码可以看到这个场景的实际效果：

```
#include <iostream>
#include <climits>

int main(void) {
    char c;
    std::string s;

    std::cout << "Prompt 1: ";
    std::cin.get (c);
    std::cout << "char [" << c << "]\n";
    // std::cin.ignore (INT_MAX, '\n')

    std::cout << "Prompt 2: ";
    getline (std::cin, s);
    std::cout << "str1 [" << s << "]\n";

    std::cout << "Prompt 3: ";
    getline (std::cin, s);
    std::cout << "str2 [" << s << "]\n";

    return 0;
} 
```

连同成绩单：

```
Prompt 1: Hello
char [H]
Prompt 2: str1 [ello]
Prompt 3: from Pax
str2 [from Pax] 
```

您可以在其中看到它实际上并没有等待提示 2 的新输入，它只是获取您在提示 1 输入的行的其余部分，因为字符、 、 和`e`仍在`l`输入`l`缓冲区中。`o``\n`

当您取消注释该`ignore`行时，它会以您期望的方式运行：

```
Prompt 1: Hello
char [H]
Prompt 2: from Pax
str1 [from Pax]
Prompt 3: Goodbye
str2 [Goodbye] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T02:02:05.760

我会使用调试器（例如 linux 中的 gdb）来检查原因。当你能找到真正的答案时，为什么还要提出理论？

# git - GIT 中是否有包含“git add -p”和“git checkout -p”选项的命令？

> ID：11894217
> 
> 赞同：5
> 
> 时间：2012-08-10T01:19:17.360
> 
> 标签：git, git-checkout, git-add

我想发出*一个*命令，让我以交互方式添加一个大块，丢弃一个大块或不分阶段离开大块......

实际上据我所知只有：

`git add -p`: 以交互方式添加帅哥（或不上演）
`git checkout -p`: 以交互方式丢弃帅哥（或不上演）

GIT 中是否有具有“git add -p”和“git checkout -p”组合选项的命令？

[这里](https://stackoverflow.com/questions/5851461/better-git-add-p)提供的这个问题的答案并不令人满意：（

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:56:30.423

没有本机 git 命令可以同时执行这两种操作。尽管我确实认为更好的命令行大块管理器在 git 社区中会非常有用。你也应该包括`git reset -p`在你的问题中，这很方便。

# c# - 是否在 class.cs 中使用了可用的 Page.ClientScript？

> ID：11894219
> 
> 赞同：3
> 
> 时间：2012-08-10T01:19:44.503
> 
> 标签：c#, class

我有一个如下的 class.cs 文件，但我的“Page.ClientScript”有一个错误，它说“非静态字段、方法或属性‘System.Web.UI.Page’需要对象引用.ClientScript.get'”。所以我想知道 page.clientscript 是否不能在 class.cs 中使用？使用任何其他方法来代替 page.clientscript 吗？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data.SqlClient;
using System.Configuration;
using System.Web.Security;
using System.Data;
using System.Web.Script.Services;

public class SessionExpired
{

    public SessionExpired()
    {
        string csname = "timeoutWarning";
        Type cstype = this.GetType();
        if (!Page.ClientScript.IsStartupScriptRegistered(cstype, csname))
        {
             string strconfirm = "<script>" +
                "window.setTimeout('SessionTimeOutHandler()', 60000);" +
                "function SessionTimeOutHandler() { " +
                "alert('Your login session is expired');" +
                "window.location='../Processing.aspx';" +
                "}</script>";
            Page.ClientScript.RegisterStartupScript(cstype, csname, strconfirm, false);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T10:42:04.500

您遇到了问题，因为看起来您使用的类不是从`System.Web.UI.Page`. 但是，只要您有权访问`HttpContext`，您就可以说：

```
using System.Web;
using System.Web.UI;

...

var page = HttpContext.Current.CurrentHandler as Page;

if( page == null ){
     // throw an exception, something bad happened
}

// now you have access to the current page...
page.ClientScript.RegisterStartupScript(); 
```

# iphone - 如何在 viewDidLoad 中引用 UIButton？

> ID：11894221
> 
> 赞同：1
> 
> 时间：2012-08-10T01:19:54.973
> 
> 标签：iphone, objective-c, ios, xcode

这是我的动作 UIButton：

```
-(IBAction)favoriteButtonPressed:(id)sender
{
if (favoriteButtonSelected == 0) {

    [sender setSelected:YES];

    favoriteButtonSelected = 1;
    [sender setImage:[UIImage imageNamed:@"favoritedItem.png"]];
    [selectedObject setValue:@"Yes" forKey:@"Favorite"];

} else {

    [sender setSelected:NO];

    favoriteButtonSelected = 0;
    [sender setImage:[UIImage imageNamed:@"notFavorite.png"]];
    [selectedObject setValue:@"No" forKey:@"Favorite"];
}
} 
```

如何在 viewDidLoad 中引用按钮？要使以下代码工作：

```
- (void)viewDidLoad
{
[super viewDidLoad];

if ([[selectedObject valueForKey:@"Favorite"] isEqual:@"Yes"])  {

    [favoriteButton setImage:[UIImage imageNamed:@"favoritedItem.png"]];
    [favoriteButton setSelected:YES];
    favoriteButtonSelected = 1;

} else {

    [favoriteButton setImage:[UIImage imageNamed:@"notFavorite.png"]];
    [favoriteButton setSelected:NO];
    favoriteButtonSelected = 0;
}
} 
```

编辑进展：

现在我这样做了：在助手编辑器中从 UIButton Ctrl 拖动到 ViewController。连接：Outlet，名称：FavoriteButton，类型：UIButton，存储：weak。但是错误仍然存​​在。+ viewDidUnload 中的合成错误和错误.. 建议？

View Controller 的 Assistant Editor 标头，通过 Ctrl 拖动添加了属性：

```
@interface DetailViewController : UIViewController {
IBOutlet UIScrollView *viewScroller;
}

@property (nonatomic, strong) IBOutlet UILabel *mylLabel;

@property (nonatomic, strong) NSString *selectedObj;

@property (strong, nonatomic) NSArray *detailsDataSource;
@property int detailIndex;
@property (weak, nonatomic) IBOutlet UIButton *favoriteButton; //The added property

@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:25:17.110

控制从按钮拖动到视图控制器的标题以创建属性。（您可以在助手模式下执行此操作，右上角的第二个按钮）..

然后您可以使用该属性从任何地方引用您的按钮

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T01:26:45.740

您需要的是按钮的 IBOutlet。

您可以 ctrl+拖动按钮从 XIB 文件到此类的标题，并创建一个名为 favoriteButton 的 IBOutlet 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T06:00:34.647

好吧，除非您使用的是最新版本的 Xcode，否则您确实需要 @synthesize 收藏按钮。

您确实应该发布您只是让人们猜测的错误消息。

# php - 如何使用 在 foreach PHP 中？

> ID：11894231
> 
> 赞同：0
> 
> 时间：2012-08-10T01:20:27.950
> 
> 标签：php, html

我需要首先显示在线用户标签，然后显示所有在线用户，然后结束第一个`<optgroup>`

离线和空闲也是如此。

代码：

```
foreach($alt_user_result as $cur_user) {
    if( $cur_user[user_status]=='online') {
        echo "<option class='green_status' value='$cur_user[user_id]'>$cur_user[username] | $cur_user[user_status]
        </option>";
    }
    elseif( $cur_user[user_status]=='idle') {
        echo "<option class='yellow_status' value='$cur_user[user_id]'>$cur_user[username] | $cur_user[user_status]
        </option>";
    }
    elseif( $cur_user[user_status]=='offline') {
        echo "<option class='gray_status' value='$cur_user[user_id]'>$cur_user[username] | $cur_user[user_status]
        </option>";
    }
} 
```

`<optgroup>`例如，我之前尝试添加`<option class='gray_status'`，但随后会是这样

```
<optgroup><option></option><optgroup>
<optgroup><option></option><optgroup>
<optgroup><option></option><optgroup>
<optgroup><option></option><optgroup>
<optgroup><option></option><optgroup> 
```

我想要这样：

```
 <optgroup lable="online">
    <option></option>
    <option></option>
    <option></option>
    <optgroup>

    <optgroup lable="offline">
    <option></option>
    <option></option>
    <option></option>
    <optgroup>

...... 
```

询问：

```
$alt_user_result = execute_pdo_query("SELECT U.username, U.user_id, T.last_activity_time,
case WHEN TIMESTAMPDIFF( MINUTE, T.last_activity_time ,NOW() ) <= 5 THEN 'online'
 WHEN ( TIMESTAMPDIFF( MINUTE, T.last_activity_time ,NOW() ) > 5 AND
  TIMESTAMPDIFF( MINUTE, T.last_activity_time ,NOW() ) <=30 ) THEN 'idle'
    ELSE 'offline' end as user_status
     FROM user_skills S, users U
      LEFT JOIN user_status T ON U.user_id=T.user_id
         WHERE S.user_id=U.user_id and S.task_type_id=? and S.permission='Yes';",
           array($tablerow['task_type_id'])); 
```

提前感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:27:09.517

如果数组按在线状态排序，您可以执行以下简单操作：

```
$prevGroup = '';

foreach($alt_user_result as $cur_user) {
    $curGroup = $cur_user['user_status'];

    if ($curGroup != $prevGroup) {
        if ($prevGroup != '') {
            echo '</optgroup>';
        }

        echo '<optgroup label="' . ucfirst($curGroup) . '">';
        $prevGroup = $curGroup;
    }

    if ($cur_user[user_status] == 'online') {
        echo "<option class='green_status' value='$cur_user[user_id]'>$cur_user[username] | $cur_user[user_status]
    </option>";
    } else if ($cur_user[user_status] == 'idle') {
        echo "<option class='yellow_status' value='$cur_user[user_id]'>$cur_user[username] | $cur_user[user_status]
    </option>";
    } else if ($cur_user[user_status] == 'offline') {
        echo "<option class='gray_status' value='$cur_user[user_id]'>$cur_user[username] | $cur_user[user_status]
    </option>";
    }
} // foreach

echo '</optgroup>'; 
```

如果数组没有按在线状态排序，您可以[`usort()`](http://php.net/usort)在运行上述代码之前对其进行排序。

编辑：这是`usort`将按照您想要的顺序对数组进行排序的代码[示例](http://codepad.org/Re17oKuq)：

```
function userStatusSort($a, $b) {
    $a = $a['user_status'];
    $b = $b['user_status'];

    if ($a == $b) {
        return 0;
    } else if ($a == 'online') {
        return -1;
    } else if ($a == 'idle' && $b == 'offline') {
        return -1;
    } else {
        return 1;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:30:32.900

我首先将用户分类到单独的数组中

```
$online_users = array();
$offline_users = array();
$idle_users = array();

foreach($alt_user_result as $cur_user) {
    if($cur_user[user_status]=='online'){
        $online_users[] = $cur_user;
    }
 //and so forth...

} 
```

然后回显它们

```
 echo "<optgroup>"
 foreach($online_users as $cur_user){
    echo "<option class='green_status' value='$cur_user[user_id]'>$cur_user[username] | $cur_user[user_status]
</option>";
echo "</optgroup>"

} 
```

# actionscript-3 - AS3 - 是否可以相互测试同一阵列中的对象？

> ID：11894232
> 
> 赞同：0
> 
> 时间：2012-08-10T01:20:30.050
> 
> 标签：actionscript-3, collision-detection, hittest

我正在制作这个允许玩家推动物体的项目。我可以使用“for”循环很好地针对对象数组测试播放器，并且可以移动对象。

我现在要做的是测试对象彼此并让它们彼此移动。就像，我想用玩家推一个块，然后用我已经推的块推另一个块。

这些块都被推入它们自己的数组中，那么我该如何测试它们呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:23:00.417

当然，您可以将所有内容放在同一个数组中并使用两个`for`循环：

```
for each(var a:Entity in array)
{
    for each(var b:Entity in array)
    {
        // Objects can't collide with themselves.
        if(a == b) continue;

        // Check if a and b collide and do something.
        //
    }
} 
```

此示例代码假定它`Entity`是可以相互接触的对象的基类；所有这些都列在`array`.

# javascript - jquery AJAX后退按钮问题

> ID：11894234
> 
> 赞同：0
> 
> 时间：2012-08-10T01:20:35.630
> 
> 标签：javascript, jquery, ajax

解释起来有点奇怪，所以我尽力而为。

我在一个移动网站上工作，我试图塑造成一个 ios 应用程序（最终）。在此页面上，我有一个菜单按钮，单击时显示/隐藏菜单。

大多数情况下一切正常，但问题是，当您单击“返回”按钮并且浏览器用完以前的位置返回时，菜单按钮会中断。当你点击它时，什么也没有发生。它表现得好像什么都没有。

错误是这样的，如果在索引（或第一页）上，单击一个链接前进，然后在浏览器上点击后退按钮，它会立即中断。

如果您在索引上，并以任何顺序点击例如 5 个链接（基本上您前进 5 次），然后，您**回击**到 4 次，菜单仍然有效....您基本上可以继续向前按下链接并成为好吧，尽可能地回击，并且比你前进的总次数少一秒，但仍然没问题。

一旦您达到最大后退，并且页面位置的历史记录中没有任何内容可以返回，菜单就会中断**。**

这是我正在处理的这个虚拟站点的链接（在我的服务器上）注意：*为了测试，当它加载时，手动将浏览器缩小到大约 400 宽度，这样你就可以看到页面生效。*

编辑** woops 忘记了链接 [http://somdowprod.net/4testing/mobile/less1.html](http://somdowprod.net/4testing/mobile/less1.html)

这是我的代码

javascript:(我在那里留下了评论，所以你可以看到我的逻辑在哪里......也许我做错了？）

```
// JavaScript Document
$(document).ready(function(){
var newHash = "";
var menuBtn = $('.leftButton');

    //~~~~~~~~~~~~~~~~~~~~~~~~~~~menu show/hide
    menuBtn.click( menuShowHide);
    //===========================//

    //~~~~~~~~~~~~~~~~~~~~~~~~~~~MENU SHOW / HIDE
    function menuShowHide(){
        $('#menu').toggleClass();

//      if($('#menu').css("display") == "none"){
//          $('#menu').css("display","block");
//      }   else {
//          $('#menu').css("display","none");   
//      }
        scroll(0,0);    
    }
    //===========================//

    //~~~~~~~~~~~~~~~~~~~~~~~~~~~ACTIONS FOR THE is-loaded trick.
        function isLoaded(){
            $('#progress').remove();    
        }
    //===========================//

    //~~~~~~~~~~~~~~~~~~~~~~~~~~~ACTIONS FOR THE HOME PAGE
        if(newHash == ""){
            $('body').append('<div id="progress">Loading...</div>');//attach this div which is made to look like a loading bubble.
            $('#contentHere').load('index.html #content', isLoaded);//load the content div from the index.html file
        }
    //===========================//

    //~~~~~~~~~~~~~~~~~~~~~~~~~~~Load the clicked content into my container via jQuery AJAX
    $('#menu a').click(function(){
        menuShowHide();
        window.location.hash = $(this).attr('href');
        return false; //doesnt let the link jump to a new page

    });

    $(window).bind('hashchange',function(){
        newHash = window.location.hash.substring(1);
        $('body').append('<div id="progress">Loading...</div>');//attach this div which is made to look like a loading bubble.
        $('#contentHere').load(newHash, isLoaded);
        //console.log(newHash); 

    });

    //===========================//

}); 
```

任何人对菜单中断的原因有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:32:54.787

众所周知，hashchange 事件对于浏览器的后退按钮是不可预测的。

这是正在发生的事情。当您一直回到开头时，整个 less.html 页面被加载到它自己的“contentHere”容器中，并且由于不会在该子页面上调用 document.ready，因此不会分配 menuButton.click 处理程序链接，因此单击它们不会做任何事情。

尽管能够在异步更改上使用浏览器的后退和前进按钮将是一个很好的功能，但我认为人们不会错过它，让您尝试破解解决方法。人们习惯于无法在异步加载的内容上使用后退和前进按钮。他们会尝试一次，看到它会将他们带到您网站的引荐来源网址，然后点击前进，然后下意识地记下使用您的菜单而不是后退和前进按钮。

然而，一个更好的建议可能是完全摆脱 AJAX 功能，让链接按照人们期望的方式运行。好的，所以您失去了酷炫的“加载”模式并为用户节省了一点时间，但是您不会混淆人们对您界面的期望。

编辑：要在下面回答您的问题，而不是使用 load() 来获取静态内容（这太过分了），将所有内容作为部分放在您的 less.html 文件中并使用菜单选择隐藏/取消隐藏它。这里有两种方法可以做到这一点，每种方法都有自己的优点和缺点：

1.  使用 CSS（包括菜单）修复您的标题（例如：lifeinthegrid.com/simple-css-fixed-header/），然后使您的菜单链接正常锚链接，没有 JavaScript 事件处理程序。当您单击菜单中的链接时，内容会跳转到该部分，并且由于您的标头是固定的，因此感觉就像是一个非常快的 httpRequest。优点：最少的 JavaScript，浏览器的后退和前进按钮都可以工作。缺点：固定元素在旧款智能手机上很麻烦，下一部分可能会潜入视口底部并破坏错觉。解决方案：在它们之间放置更多空间。

2.  另一种方法是在不同的内容部分使用 show()/hide()。因此，假设您单击“关于我们”。所有部分都被隐藏，并显示“关于我们”的内容。优点：它不像固定元素那样烦人，您可以使用 FadeIn()/FadeOut() 或其他 JQuery 动画效果来增加它的趣味性。缺点：您的浏览器历史记录不会跟踪这些更改，除非您执行一些 window.location 黑客操作。

# jquery - 如何将json对象作为属性添加到html控件

> ID：11894242
> 
> 赞同：1
> 
> 时间：2012-08-10T01:22:14.443
> 
> 标签：jquery, html, json

是否可以将 json 对象数据放在 html 中，将它自己放在 html 文件中。我可以将 json 对象作为数据属性存储在 html 文本框控件中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T01:27:31.377

您可以存储在`data`：

```
<input type="text" data-myjson="{'foo':false,'baz':'hello'}" /> 
```

在 jQuery 中：

```
var myjson = $.parseJSON($('input').data('myjson')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T01:24:27.047

只要您输入 data-* 属性作为格式正确的 JSON 并通过 $.data() 访问它就可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T01:37:32.350

```
<textarea id="jason_data" style="display:none">{"data1":'"double quotation marks"',"data2":"'single quotation marks'"}</textarea>

var oData = $.parseJSON($('json_data').value); 
```

# asp.net-mvc-3 - jqGrid/asp.net mvc 3：setGridWidth(width) 在 PartialView 中不起作用？

> ID：11894243
> 
> 赞同：0
> 
> 时间：2012-08-10T01:22:23.943
> 
> 标签：asp.net-mvc-3, c#-4.0, jqgrid

我在我的 asp.net mvc 3 应用程序中使用 jqgrid。我注意到当您将 jqGrid 用作局部视图时，更改宽度不起作用？

```
jQuery("#targetGrid").setGridWidth(width); 
```

它作为非局部视图工作正常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:57:54.373

好的，我想告诉你三个解决方案，我不确定其中的任何一个。我现在无法测试它们（不在工作中）。

首先为您的 jqgrid 参数添加宽度。

检查此[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options)。这有很多用于设置宽度或行、列等的选项。搜索宽度，你会得到很多选择。

其次，您可以指定绑定数据的表格宽度。

第三，您可以在 ui.jqGrid.css 中进行更改并从那里指定宽度。

# django - Django 管理员用户

> ID：11894248
> 
> 赞同：1
> 
> 时间：2012-08-10T01:23:00.563
> 
> 标签：django, django-models, django-forms, django-admin

我正在阅读两本非常流行的 django 书籍，都推荐使用 django 的管理员用户模型、模板来为我正在构建的站点创建用户。感觉很奇怪。将我们网站的用户添加到使用 Django 管理界面的管理员用户中不是很危险吗？

如果该建议是正确的，我如何向该管理员用户模型添加更多属性（因此向 auth_user 表添加更多列）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:38:42.943

他们推荐的是使用应用程序提供的[`Users`模型](https://docs.djangoproject.com/en/1.4/topics/auth/)`django.contrib.auth`。这是 django 中的标准，许多其他应用程序都依赖此模型与用户数据集成。作为其中之一的 django 管理员。

请注意，并非所有使用此模型创建的用户都可以访问管理站点。只有将 is_staff 设置为 True 的那些。

要在 Users 模型上分配额外的用户信息，您应该使用[Profiles](https://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users)。

# mysql - “一般错误：1005 无法创建表”使用 Laravel 架构构建和外键

> ID：11894250
> 
> 赞同：34
> 
> 时间：2012-08-10T01:23:27.120
> 
> 标签：mysql, foreign-keys, laravel

本质上，我和这个人有同样的问题，减去表前缀。因为我没有表前缀，所以他的修复不起作用。[http://forums.laravel.com/viewtopic.php?id=972](http://forums.laravel.com/viewtopic.php?id=972)

我正在尝试使用 Laravel 的 Schema Builder 构建一个表，如下所示：

```
Schema::create('lessons', function($table)
{
    $table->increments('id');
    $table->string('title')->nullable();
    $table->string('summary')->nullable();
    $table->timestamps();
});

Schema::create('tutorials', function($table)
{
    $table->increments('id');
    $table->integer('author');
    $table->integer('lesson');
    $table->string('title')->nullable();
    $table->string('summary')->nullable();
    $table->string('tagline')->nullable();
    $table->text('content')->nullable();
    $table->text('attachments')->nullable();
    $table->timestamps();
});

Schema::table('tutorials', function($table)
{
    $table->foreign('author')->references('id')->on('users');
    $table->foreign('lesson')->references('id')->on('lessons');
}); 
```

问题是，当我运行此代码时（在 /setup 路由中），我收到以下错误：

```
SQLSTATE[HY000]: General error: 1005 Can't create table 'tutorials.#sql-2cff_da' (errno: 150)

SQL: ALTER TABLE `tutorials` ADD CONSTRAINT tutorials_author_foreign FOREIGN KEY (`author`) REFERENCES `users` (`id`)

Bindings: array (
) 
```

基于网络上的帖子和关于如何*设置*Laravel 的 Eloquent 关系的有限文档，我不确定我做错了什么......

`users`已经存在并且它*确实*有一个`id`字段是`auto_increment`. 我也在用正确的关系（`belongs_to`和`has_many`）设置我的模型，但据我所知，这不是问题——这是数据库设置。数据库*是*InnoDB。

外键到底做错了什么？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-12-12T00:50:56.413

我一直有同样的问题。[我刚刚注意到Laravel Schema 文档](http://laravel3.veliovgroup.com/docs/database/schema#foreign-keys)最底部的以下注释：

> 注意：外键中引用的字段很可能是自动递增的，因此会自动成为无符号整数。请确保使用 unsigned() 创建外键字段，因为两个字段必须是完全相同的类型，两个表上的引擎必须设置为 InnoDB，并且必须在具有外键的表之前创建引用的表.

对我来说，只要我这样设置外键字段：

```
$table->integer('author')->unsigned(); 
```

我没有问题。

编辑：另外，确保外部表中的字段已经创建，否则这可能会失败并出现相同的错误。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-08-10T19:07:22.393

我不是 100% 确定这些是否是失败的原因，但有几个指针。如果您使用旧版本的 mySQL 作为数据库，则默认表实现是不支持外键限制的 myISAM。由于您的脚本在外键分配上失败，您最好在 Schema 的 create 方法中使用此语法明确声明您希望 INNODB 作为引擎。

```
Schema::create('lessons', function($table)
{
    $table->engine = 'InnoDB';

    $table->increments('id');
    $table->string('title')->nullable();
    $table->string('summary')->nullable();
    $table->timestamps();
}); 
```

这应该有望缓解您遇到的问题。

此外，虽然您可以事后声明外键，但我会在初始模式中创建外键，因为我可以轻松检查以确保我设置了正确的数据库引擎。

```
Schema::create('tutorials', function($table)
{
    $table->engine = 'InnoDB';

    $table->increments('id');
    $table->integer('author');
    $table->integer('lesson');
    $table->string('title')->nullable();
    $table->string('summary')->nullable();
    $table->string('tagline')->nullable();
    $table->text('content')->nullable();
    $table->text('attachments')->nullable();
    $table->timestamps();

    $table->foreign('author')->references('id')->on('users');
    $table->foreign('lesson')->references('id')->on('lessons');
}); 
```

希望这有助于/解决您的问题。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-09-20T10:49:43.543

已经列出的答案摘要，加上我的：

1.  外键一般需要`InnoDb`，所以设置你的默认引擎，或者明确指定

    ```
    $table->engine = 'InnoDB'; 
    ```

2.  外键要求被引用的表存在。在创建密钥之前，请确保在较早的迁移中创建了引用的表。考虑在单独的迁移中创建密钥以确保。

3.  外键要求数据类型一致。检查引用的字段是否相同类型，是否有符号或无符号，长度是否相同（或更少）。

4.  如果您在手动编码迁移和使用生成器之间切换，请确保检查您正在使用的 id 类型。Artisan 默认使用**increments()**但 Jeffrey Way 似乎更喜欢**integer('id', true)**。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-04-03T23:28:13.903

我也遇到了这个问题。

我找到的解决方案是，在另一个表可以引用它之前，需要创建包含正在使用的外部 id 的 id 的表。基本上，您正在创建一个表并告诉 MySQL 引用另一个表的主键，但该表还不存在。

在您的示例中，需要首先创建作者和课程表。

创建表的顺序取决于工匠和您创建迁移文件的顺序。

我的意见是清空所有表的数据库并更改迁移文件名中的时间戳（或删除它们并以正确的顺序重新创建它们），以便在教程表之前创建作者和课程表。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-29T10:22:16.637

我收到了同样的错误，因为我忘记在引用的表上将表类型设置为 InnoDB：

```
$table->engine = 'InnoDB'; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-10-04T20:21:25.670

# Laravel5、MySQL55、CentOS65

就我而言，错误与此相同。

> 错误：[Illuminate\Database\QueryException]
> SQLSTATE[HY000]：一般错误：1005 Can't create table 'nabsh.#sql-5b0_e' (errno: 121) (SQL: alter table `usermeta`add constraint usermeta_uid_foreign foreign key ( `uid`) 引用 `users`( `id`) 删除级联）。

我在这个问题的已批准答案中找到了一个很好的提示： [错误：错误 1005：无法创建表（错误号：121）](https://stackoverflow.com/questions/12623651/error-error-1005-cant-create-table-errno-121)

> 提示：如果您尝试添加名称已在其他地方使用过的约束，您将收到此消息。

在我的情况下，这个错误意味着已经尝试添加的约束已经存在于某处（但我在任何地方都看不到它们）。

我复制了输出错误查询并在 sequel pro 中执行它，然后希望我再次看到相同的错误。正如提示所说，我将约束名称更改为其他名称，然后它没有任何错误影响，因此 laravel5 + MySQL55 + CentOS65 中的约束名称生成器存在问题。

*解决方案：*尝试通过在表模式中的外部方法处发送第二个参数来重命名约束。

```
Schema::table('tutorials', function($table)
{
    $table->foreign('author')->references('id')->on('users');
    $table->foreign('lesson')->references('id')->on('lessons');
}); 
```

到->

```
Schema::table('tutorials', function($table)
{
    $table->foreign('author', 'fk_tutorials_author')->references('id')->on('users');
    $table->foreign('lesson', 'fk_tutorials_lesson')->references('id')->on('lessons');
}); 
```

我希望它有帮助。它适用于我的情况

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-11-04T13:42:03.347

最简单的方法是禁用外键检查：

```
DB::statement('set foreign_key_checks=0');

Schema::table( ... );

DB::statement('set foreign_key_checks=1'); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-02-29T16:40:25.990

使用**外键**时，请确保您的外键是`unsigned`. 这对我有用

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-01-22T16:48:05.500

这在 Yii Framework 1.x 迁移中也发生在我身上。原来，与上面的 Laravel 解决方案类似，它可能是由

*   拼写错误（或尚不存在）的表名
*   拼写错误（或尚不存在）的列名
*   在不同表中使用同一数据库中的重复外键名称

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-08T21:38:47.593

基本上，您会收到此错误，因为迁移命令创建表的顺序与您为表提供的 FK 引用不匹配。

就像如果你想创建一个应该引用用户表中的 id 的 FK，那么用户表必须存在。

在您的示例中，需要首先创建作者和课程表。

因此，我通过按这样的顺序（一个接一个）创建表来解决这个问题，在那里我可以成功地将 FK 引用到现有表。这样 Php Artisan Migration 就无法决定顺序。

另一种解决方案是，您可以简单地重命名迁移命令提供的表或时间戳。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-12-10T04:09:13.520

这是我在 Laravel 5 中所做的：

```
// CREATING TABLE
Schema::create('your_table_name', function (Blueprint $table) {
    $table->engine = 'InnoDB';
    $table->increments('id'); // index field example sample
    $table->string('field2'); // some varchar/string field sample
    $table->integer('field3'); // some integer field sample
    $table->integer('field_some_table_id')->unsigned; //for field that contains foreign key constraint
});

// FOREIGN KEY CONSTRAINT
Schema::table('stock', function ($table) {
    $table->foreign('field_some_table_id')->references('id')->on('some_table')->onDelete('cascade')->onUpdate('cascade');
}); 
```

这就是结论，它对我有用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2017-10-20T08:17:23.827

你必须在 Laravel 5.4 中给整数一个无符号标志，像这样：

```
public function up()
{
    Schema::create('posts', function (Blueprint $table) {
        $table->increments('post_id');
        $table->text('title');
        $table->text('text');
        $table->integer('employee_post_id_number')->unsigned();
        $table->foreign('employee_post_id_number')->references 
        ('employee_id_number')->on('employees');
        $table->timestamps();
    });
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-09-28T06:30:22.257

通过使用：

```
 $table->unsignedInteger('author'); 
```

代替：

```
 $table->integer('author'); 
```

问题将得到解决。

问题是整数生成一个 int(11) 变量，而您需要一个 int(10) 变量。unsignedInteger 将为您完成。

# java - 如何为 org.test.toolkit.database.resultsethandle 命名 java 包；

> ID：11894257
> 
> 赞同：0
> 
> 时间：2012-08-10T01:24:26.530
> 
> 标签：java, package

我有一个用于结果集句柄的 java 包，所以我创建了一个名为 resultsethandle 的包。难题是我知道所有包名都应该小写。但你可以看到结果句柄看起来很丑。那么我该如何解决这个难题呢？我尝试使用另一个短名称，但这只是结果集句柄的含义。

那么有人可以帮助我吗？包应该总是小写吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:04:40.307

尽管最初可能看起来很奇怪，但标准是将其保留为全部小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T02:27:43.107

标准是将其保留为小写。但是，它听起来像一个类名，因为它听起来非常具体。“一个 ResultSet 句柄类”。通常，包用于将用于特定工作类型的类组合在一起。浏览 java 包可能会让您对包名有更多的了解。例如，java.io - 用于输入/输出类、接口等的包。 java.net - 用于网络类的包。

但是，最后，包只是一个在您的情况下有意义的名称。

# android - android 两个 alpha 动画

> ID：11894261
> 
> 赞同：0
> 
> 时间：2012-08-10T01:25:04.430
> 
> 标签：android, animation

我试图在一个 AnimationSet 中放入两个 alpha 动画，如下所示，但是当我运行它时，会发生第一个（淡出）动画，但对于下一个动画它仍然是空白的。我知道我可以使用 a`repeatMode="reverse"`来做到这一点，但我想知道为什么这不起作用，以防我想做一些更花哨的事情。谢谢。

```
 <?xml version="1.0" encoding="utf-8"?>
    <set xmlns:android="http://schemas.android.com/apk/res/android" >
        <alpha
            android:duration="1000"
            android:fillAfter="false"
            android:fromAlpha="1.0"
            android:toAlpha="0.0" />
        <alpha
            android:duration="1000"
            android:fillBefore="false"
            android:fillEnabled="true"
            android:fromAlpha="0.0"
            android:startOffset="1000"
            android:toAlpha="1.0" />
    </set> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T12:35:08.043

我带着同样的想法来到这篇文章。我现在已经测试了这个。出乎意料的是它的工作完美。这是我的代码。

```
 <alpha
        android:duration="1000"
        android:fromAlpha="0.25"
        android:interpolator="@android:anim/accelerate_interpolator"
        android:repeatMode="reverse"
        android:startOffset="500"
        android:toAlpha="1.0" />
    <alpha
        android:duration="1000"
        android:fromAlpha="1.0"
        android:interpolator="@android:anim/accelerate_interpolator"
        android:repeatMode="reverse"
        android:startOffset="3500"
        android:toAlpha="0.25" /> 
```

The first one will set alpha to a higher value and its pulled low after some time using a second alpha. **Make sure you add "repeatMode" as "reverse"** , even though repeatcount is not set and no repeat happens. And the actual flow that happens is not reversing the first alpha , but switching to the second alpha for reverse operation .

# sql-server-2008 - SQL Server 获取最大记录

> ID：11894262
> 
> 赞同：-1
> 
> 时间：2012-08-10T01:25:06.147
> 
> 标签：sql-server-2008

我有以下

```
(SELECT 
    ts.PID, 
    tt.ID, 
    tt.ItemOrder,
    tt.DisplayVal as Task, 
    tt.Responsible as  ResParty, 
    tt.DaysDue, 
    DATEADD(day, tt.DaysDue, PgStartDate) as DueDate,
    ts.spate As ActualDate , 
    ps.PgStartDate as ProgramDate
FROM tblTimeline tt 
CROSS JOIN tblSers ts
JOIN PG ps ON ps.PID = ts.PId
WHERE tt.ID = 2 
AND ps.cancelled = 0 ) 

t1
INNER JOIN(

SELECT 
    ts.PID,  
    max(DATEADD(day, tt.DaysDue, PgStartDate)) as DueDate 
FROM tblTimeline tt 
CROSS JOIN tblSers ts
JOIN PG ps on ps.PID = ts.PId
WHERE tt.ID = 2 
AND ps.cancelled = 0) 

t2
  ON t1.PID = t2.PID 
  AND t1.DueDate = t2.DueDate 
```

在`t1`中，我所拥有的是`PID, DueDate`给定行的重复项。

我喜欢为每个获得完整的行`PID`，我喜欢显示具有 Max 的行`DueDate`。

我在 t1, t2 附近得到不正确的语法

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:39:50.867

您似乎缺少`GROUP BY`初始`SELECT`陈述的开头和开头：

```
SELECT *  --missing this
FROM      --missing this
(
  select ts.PID, 
     tt.ID, 
     tt.ItemOrder,
     tt.DisplayVal as Task,
     tt.Responsible as  ResParty, 
     tt.DaysDue, 
     DATEADD(day, tt.DaysDue, PgStartDate) as DueDate,
     ts.spate As ActualDate , 
     ps.PgStartDate as ProgramDate
  from tblTimeline tt 
  cross join tblSers ts
  join PG ps on ps.PID = ts.PId
  where tt.ID = 2 and ps.cancelled = 0 
) t1
inner join 
(
  select ts.PID,  
    max(DATEADD(day, tt.DaysDue, PgStartDate)) as DueDate 
  from tblTimeline tt cross join tblSers ts
  join PG ps 
    on ps.PID = ts.PId
  where tt.ID = 2 and ps.cancelled = 0 
  GROUP BY ts.PID   --missing this
) t2
  on t1.PID = t2.PID 
  and t1.DueDate = t2.DueDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:32:11.090

您缺少分组依据。

```
select ts.PID,  max(DATEADD(day, tt.DaysDue, PgStartDate)) as DueDate 
   from tblTimeline tt cross join tblSers ts
   join PG ps on ps.PID = ts.PId
   where tt.ID = 2 and ps.cancelled = 0
   group by ts.PID 
```

# java - 如何在netbeans中编译jedit

> ID：11894266
> 
> 赞同：0
> 
> 时间：2012-08-10T01:25:37.127
> 
> 标签：java, netbeans, jedit

有人可以给出在netbeans中导入jedit的步骤吗？我按照教程，在 [http://wiki.netbeans.org/NetbeansedJEdit#Converting_JEdit_into_a_Netbeans_Project](http://wiki.netbeans.org/NetbeansedJEdit#Converting_JEdit_into_a_Netbeans_Project)中找不到 NetbeansedJEdit.zip。当我尝试通过打开项目使用 netbeans 打开时，我看不到项目图标。与 build.xml 文件有什么关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:32:55.847

正如您所怀疑的那样，这`build.xml`表明*jedit*是一个用 ant 编译的项目。按照[这个例子](http://netbeans.org/kb/articles/freeform-import.html)（用 jedit 而不是 pmd）

# java - ArrayList 的 JSF2 搜索方法

> ID：11894267
> 
> 赞同：1
> 
> 时间：2012-08-10T01:25:42.117
> 
> 标签：java, jsf, jsf-2

我正在尝试创建一种方法，该方法允许我通过带有 inputText 字段的 JSF 页面进行搜索。我打算从位于托管 bean 中的数组列表中获取一个或多个条目，并在我点击提交后将其显示在 JSF 页面上。我试图从这个问题中汲取灵感，但由于我是 Java 的新手，我一直坚持创建搜索方法： [JSF2 搜索框](https://stackoverflow.com/questions/7544335/jsf2-search-box)

在我的 JSF 页面中，我打算有这样的东西，“某物”是我缺少的方法：

```
<h:form>
    <h:inputText id="search" value="#{order.something}">
        <f:ajax execute="search" render="output" event="blur" />
    </h:inputText>
    <h2>
        <h:outputText id="output" value="#{order.something}" />
    </h2>
</h:form> 
```

在我的 java 文件中，我有以下 arraylist 'orderList'，我只使用字符串：

```
private static final ArrayList<Order> orderList = 
    new ArrayList<Order>(Arrays.asList(
    new Order("First", "Table", "description here"),
    new Order("Second", "Chair", "2nd description here"),
    new Order("Third", "Fridge", "3rd description here"),
    new Order("Fourth", "Carpet", "4th description here"),
    new Order("Fifth", "Stuff", "5th description here")
)); 
```

希望这是足够的信息。我想我必须从头开始制作一些全新的方法，但我现在没有太多。我将如何将这些捆绑在一起？任何指针将不胜感激:)

〜编辑〜这是我的订单对象供参考，我假设我在这里使用了其中一个吸气剂？

```
public static class Order{
    String thingNo;
    String thingName;
    String thingInfo;

    public Order(String thingNo, String thingName, String thingInfo) {
        this.thingNo = thingNo;
        this.thingName = thingName;
        this.thingInfo = thingInfo;
    }
    public String getThingNo() {return thingNo;}
    public void setThingNo(String thingNo) {this.thingNo = thingNo;}
    public String getThingName() {return thingName;}
    public void setThingName(String thingName) {this.thingName = thingName;}
    public String getThingInfo() {return thingInfo;}
    public void setThingInfo(String thingInfo) {this.thingInfo = thingInfo;}
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:13:19.940

首先，您需要对 java 相等性做一些工作：

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)

搜索 ArrayList（可能不是最好的结构，但它确实有效）需要编写一个函数来处理它，在第一个示例中，它使用 commandButton 的操作（执行一个方法）。你所拥有的不会做任何事情，因为它没有任何东西可以执行（没有调用任何方法）。

如果您只是学习 JSF 并且不熟悉 Java，我建议您保持简单，直到您了解生命周期。如果您没有扎实的 Java 背景，那可能会非常令人沮丧。

但是，要回答您的问题，您需要对 ValueChangeEvent 做一些事情，因为您没有命令（根据他的回答的后半部分）。

您的“搜索方法”将是作用于数据结构的纯 Java。一个简单的实现可能是：

```
 public void searchByFirstValue(String search)
  {
    if(search == null || search.length() == 0)
      return;

    for(Order order : orderList)
    {
      if(order.getFirstValue().contains(search)) //java.lang.String methods via a regular expression
        setSelectedOrder(order);

      return;
    }
  } 
```

这假定您的 Order 对象有一个方法 getFirstValue() 返回一个字符串。我还假设根据您的构造函数 value 永远不会为 null （有很多潜在的陷阱）。假设您已经在 web.xml 中注册了“OrderBean”，或者您使用了 ManagedBean 注释，您的 JSF 可能如下所示：

```
 <h:form>
    <h:inputText id="search" valueChangeListener="#{orderBean.onChange}"> <!--Use the previous example -->
        <f:ajax execute="search" render="output" event="blur" />
    </h:inputText>
    <h2>
        <h:outputText id="output" value="#{orderBean.order}" /> <!-- this is the object from setSelectedOrder(order); -->
    </h2>
    </h:form> 
```

希望这会为您指明正确的方向。同样，在您了解框架的基础知识之前，我会坚持使用操作/操作侦听器。从那里开始很容易转移到非常复杂的动作，而无需大量工作。我这么说的原因是它们更容易调试并且很容易理解。

# c++ - 标准容器是否提供一些缓存功能？

> ID：11894273
> 
> 赞同：0
> 
> 时间：2012-08-10T01:27:16.817
> 
> 标签：c++, caching, stl, containers, standard-library

如果在我的应用程序开发过程中我需要缓存我的数据，STL 库是否提供了某种解决方案及其标准容器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T06:55:56.707

不。

（不知道为什么 StackOverflow 需要 30 个字符作为答案）

# php - 远程服务器上 PHP 脚本中的换行符不起作用

> ID：11894274
> 
> 赞同：1
> 
> 时间：2012-08-10T01:27:21.270
> 
> 标签：php, newline, echo

我遇到了“\n”字符不起作用的问题。我意识到在使用简单的 echo 语句测试变量输出时它不起作用。我尝试了几种不同的方法来接近新的线字符，看看它是否只是我，但我没有尝试过任何工作。这是我所做的一些尝试的示例：

```
<?php

    // Establish Connection to Taskaro DB
    require "../_connections/connection_taskDB.php";

    // Start Session
    session_start();

    // Create Session Variables
    $_SESSION['userID'];
    $_SESSION['companyID'];
    $_SESSION['usernameDB'];

    // Convert Session Variables to page variables
    $userID = $_SESSION['userID'];
    $currentUser = $_SESSION['usernameDB'];
    $editType = $_REQUEST['editType'];
    $projectID = $_REQUEST['projectID'];

    // Testing if new line character is working
    echo "hello, Mr. New Line!\n\r";
    echo "This line should be below 'hello, Mr. New Line!'";

    // Testing variable and session connection
    echo "SESSION VARIABLES:"."\\n\n"."userID = {$userID}";
    echo "userID = {$userID}"."/n";
    echo "currentUser = {$currentUser}"."\r";
    echo "companyID = {$companyID}\n\r";
    echo "\nPOST VARIABLES:\n";
    echo "editType = {$editType}\n";
    echo "projectID = {$projectID}\n";

?> 
```

我阅读了其他一些有类似问题的溢出问题，但没有一个能解决我的问题。该项目位于已安装 php 的远程服务器 (GoDaddy) 上。该文档具有正确的文件扩展名 (.php)。我正在dreamweaver 中编码并上传我的脚本进行测试。从代码中你可以看到我已经尝试过“\n”、“\n\r”、“\r”。我还在 Firefox 和 Google Chrome 中进行了测试。

我还尝试连接“\n”字符，并在黑暗中拍摄，甚至尝试使用正斜杠而不是反斜杠（我知道它不起作用，但我现在很沮丧） . 我敢打赌这很简单，但我看不出还有什么可能。先谢谢了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T01:29:47.987

如果您查看页面的源代码，您将看到所有这些值在单独的行中输出。

`<br />`如果您在浏览器中查看文件，如果您希望文本显示在不同的行上，则需要使用换行符 ( )。HTML 忽略关于表示的换行符。

```
echo "hello, Mr. New Line!\n";
echo "This line should be below 'hello, Mr. New Line!'"; 
```

查看源代码时，上述两个文本字符串将位于不同的行上。在浏览器中查看时，它们似乎在同一行。

```
echo "hello, Mr. New Line!\n<br />";
echo "This line should be below 'hello, Mr. New Line!'"; 
```

查看源代码时，由于`\n`. 在浏览器中查看时，由于 HTML 中断，它们也将位于不同的行上`<br />`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T01:29:50.083

使用 PHP_EOL 常量代替`\n`并收工。

此外，它是`\r\n`，而不是相反。

如果您希望浏览器将换行符呈现为 HTML 中的换行符，则不会发生这种情况。您需要使用`<br>`标签。

# c# - 使用 iTextSharp 在 PDF 中添加空白

> ID：11894284
> 
> 赞同：3
> 
> 时间：2012-08-10T01:28:57.783
> 
> 标签：c#, itextsharp

我有 PDF，其中一些文本非常靠近左右边框，我想使用 iTextSharp 为 PDF 中的每个页面在边框、左上角和右上角添加更多空白。

这可以使用 iTextSharp 还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T05:37:18.697

我设法找到了答案。下面的代码调整页面的大小：

```
var inputPdf = new PdfReader(inputFile);   // Get input document

int pageCount = inputPdf.NumberOfPages;

if (end < start || end > pageCount)
    end = pageCount;

var inputDoc = new Document(inputPdf.GetPageSizeWithRotation(1)); 

using (var fs = new FileStream(outputFile, FileMode.Create))
{
    var outputWriter = PdfWriter.GetInstance(inputDoc, fs);
    inputDoc.Open();

    PdfContentByte cb1 = outputWriter.DirectContent;

    // Copy pages from input to output document
    for (int i = start; i <= end; i++)
    {
        var existingRec = inputPdf.GetPageSizeWithRotation(i);
        var newRec = new Rectangle(0.0f, 0.0f, existingRec.Width + 50, existingRec.Height + 25, 0);

        inputDoc.SetPageSize(newRec);
        inputDoc.NewPage();

        PdfImportedPage page = outputWriter.GetImportedPage(inputPdf, i);
        int rotation = inputPdf.GetPageRotation(i);

        if (rotation == 90 || rotation == 270)
             cb1.AddTemplate(page, 0, -1f, 1f, 0, 0, inputPdf.GetPageSizeWithRotation(i).Height);
        else cb1.AddTemplate(page, 1f, 0, 0, 1f, 25, 13); 
    }

    inputDoc.Close();
} 
```

希望这可以帮助某人。

# css - 使用 css 的 url 幻灯片

> ID：11894287
> 
> 赞同：0
> 
> 时间：2012-08-10T01:29:35.380
> 
> 标签：css, image, url, slider

![在此处输入图像描述](../Images/f5395ea7a9c5352d7b1ef995242f9900.png)我对编码比较陌生，并且正在尝试创建一个非常简单的幻灯片，只是我希望 javascript 被“链接”到我在 css 中的图像 url，而不是使用 div id 来处理 html 中的图像。可以这样做吗，因为我似乎无法弄清楚。

基本上，我的网站有一系列图像缩略图，当前单击时会展开，因此是垂直手风琴功能。手风琴是它自己的 div id，与手风琴有关的一切都保存在一个 div 类“容器”中，而图像，特别是在一个 div 类“包装器”中。所有的文本和链接都在 html 的正文中，图像都在 css 中。

我了解如何在 html 中创建图像幻灯片（仅旋转图像，没有可点击的图像/链接），并且当我将图像从 css 移动到 html 时，幻灯片可以正常工作。然而，在这样做之后，图像不再在手风琴的“规则”之内。因此，我移动到 html 中的图像会旋转，但会与文本重叠，并且不再像手风琴的其余部分那样是图像切片。我可以使用 css 在页面上移动幻灯片图像，但它仍然与手风琴内的文本和其他功能重叠。

我什至尝试将 html 中的图像移动到身体内的不同位置，以查看问题是否与图像的放置位置有关，但这并没有解决问题。

那么有没有办法使用 javascript 并将图像保存在 css 中，以便还保留手风琴功能？我坚持这一点，不知道下一步该尝试什么。谢谢。

```
<body>
<div class="container">
<h1 class="va-name"><a href="avatest.html"> Amy Danielsons</a>                          </h1>
<h2 class="va-contact">Contact</h2>
<h3 class="va-resume"><a href="resume.html">Resume</a>
<h4 class="va-about">About</h4>
<h5 class="va-port"><a href="#">Online Portfolio</h5>
<h6 class="va-hatch"><img src="images/pattern.png" width="10"       height="10"     alt="hatch" />
</h6>

<div id="va-accordion" class="va-container">

            <div class="va-nav">
                <span class="va-nav-prev">Previous</span>
                <span class="va-nav-next">Next</span>
            </div>

            <div class="va-wrapper">
                <div class="va-slice va-slice-1">
                <!--slider 1 images -->

                <div>
                <img src="images/testa.jpg" />
                </div>

                <div>
                <img src="images/testb.jpg" />
                </div>

                <div>
                <img src="images/testc.jpg" />
                </div>

                    <h3 class="va-title">Cranbrook</h3>
                    <div class="va-content">
                        <p>Paragraph Title</p>
                        <p2>dolor sit amet, consectetur      adipiscing elit. Integer nec odio. Praesent libero. Sed cursus ante dapibus diam. Sed nisi. Nulla quis sem at nibh elementum imperdiet. Duis sagittis ipsum.</p2>

                    </div>
                </div>
              </div> 
```

（下面的css部分：你可以看到我在哪里删除了第一个图像切片的url并将图像（并添加了另外2个图像）移动到上面的html中）

```
}
.va-slice-1{
background:#FFF
}
.va-slice-2{
background:#FFF url(../images/2d/liz.jpg) no-repeat center center;
}
.va-slice-3{
background:#FFF url(../images/2d/oldcar.jpg) no-repeat center center;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T01:06:02.513

> 那么有没有办法使用 javascript 并将图像保存在 css 中，以便还保留手风琴功能？

要将图像保留在 CSS 中，请使用内联样式属性。代替

```
 <div>
            <img src="images/testb.jpg" />
            </div> 
```

利用

```
<div class="image-wrap" style="background: url(images/testb.jpg)"></div> 
```

`.image-wrap`然后为使用 javascript 或在样式表中设置正确的高度和宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T01:14:12.577

虽然我和其他人一样不完全了解您的情况，[但本文](http://webdevel.blogspot.com/2009/07/jquery-quick-tip-extract-css-background.html?m=1)解释了如果您使用的是 jQuery，如何获取背景图像的 URL。

本质上它解析 $('img').css('background-image');

要设置 URL，请使用 $('img').css('background-image', 'url:("http://www.example.com/image.png")');

# visual-studio - 构建任务将“构建操作”设置为“无”以自动排除调试 CSS/JavaScript

> ID：11894295
> 
> 赞同：5
> 
> 时间：2012-08-10T01:30:08.127
> 
> 标签：visual-studio, msbuild

我的 Web 应用程序项目包含各种 CSS 和 JavaScript 文件，例如 demo.debug.css 和 demo.debug.js。

例如，在构建时，这些文件都被缩小为 demo.css 或 demo.js。

许多*.debug.css/* .debug.js 文件的构建操作设置为“无”，以确保它们不包含在已发布的项目中，只有缩小的文件被输出，因为它们的构建操作设置为“内容”。

我想要的是一个构建任务或操作，它将自动扫描项目并将此构建操作值设置为无，因此在添加新文件时，默认情况下不包括它们。

以下内容已添加到构建任务中，但“无”不是有效的任务名称。

```
<None Include="**\*.debug.css" /> 
```

所以我将它添加到项目文件中，但这复制了 Visual Studios 解决方案资源管理器中所有受影响的文件。

```
 <ItemGroup>
    <None Include="**\*.debug.css" />
  </ItemGroup> 
```

我怀疑我需要在构建任务中添加一个引用，但找不到此任务程序集所在的位置。我的两个选项都没有在任何时候设置文件的构建操作。

# c++ - C++ 11 ranged based for 带有指针的语句

> ID：11894299
> 
> 赞同：0
> 
> 时间：2012-08-10T01:30:33.683
> 
> 标签：c++, pointers, for-loop, c++11, range

我对新的基于范围的 for 语句有疑问：

```
for ( InputReaderObject irb : InputReader )
{
 ......
} 
```

如您所见，我有一个名为 InputReaderObject 的类，然后是另一个在包含的头文件中定义为 extern 的变量。并且早在此处用作 InputReaderObject 之前就已声明。现在，对于实际问题，我的智能和我的编译器都在扼杀我

找不到类型“InputReaderObject *”的可调用“开始”函数。

现在我怀疑的是，在包含的头文件中，它被声明为外部，并且作为 InputReaderObject 的数组并不真正可见（它被声明为数组）。

那么，基于范围的 for 语句是否适用于指针？还是这是我的问题？

谢谢你

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T01:49:08.430

如果`InputReader`在头文件中声明为一个恒定大小的数组，那么它应该与您`#include <array>`或`#include <iterator>`其他几个库头中的任何一个一样工作，以便您获得声明

```
template<typename T, std::size_t N> T* std::begin(T (&array)[N]);
template<typename T, std::size_t N> T* std::end(T (&array)[N]); 
```

但是如果`InputReader`声明类似

```
extern InputReaderObject* InputReader; 
```

或许

```
extern InputReaderObject InputReader[]; 
```

...？从数组中有多少对象并不明显，但我们假设同一个标题也有类似的东西：

```
extern unsigned int InputReaderSize; 
```

您传递到基于范围的 for 循环中的任何内容都需要具有返回迭代器的函数`begin`。`end`（函数可以是类成员，通过依赖于参数的查找找到，或者在`namespace std`.）标准库为实际数组和标准容器定义了一些`begin`和`end`函数，但您可以通过定义自己的来扩展它：

```
#include <iterator>

struct InputReaderLoopType {
    InputReaderObject* begin() const { return InputReader; }
    InputReaderObject* end() const { return InputReader + InputReaderSize; }
};
extern const InputReaderLoopType InputReaderLoop; 
```

会让你做...

```
for ( InputReaderObject& irb : InputReaderLoop ) 
```

（`irb`提供参考而不是副本只是一个建议。出于某种原因，您实际上可能需要副本。）

您还可以定义`InputReaderObject* begin(InputReaderObject*);`并且`InputReaderObject* end(InputReaderObject*);`如果您真的希望循环`InputReader`像已经声明的那样使用。但是，如果有人有一个实际上不是那种类型的指针，那可能会导致令人困惑的结果`InputReader`。

# playframework - 您如何使用 Play Framework 2.0 配置文件系统，同时保留我当前的 MySQL 数据库？

> ID：11894303
> 
> 赞同：0
> 
> 时间：2012-08-10T01:31:10.123
> 
> 标签：playframework, filesystems, blob, playframework-2.0, filepath

所以我试图弄清楚如何使用 Play Framework 2.0 配置文件系统来存储 blob 类型文件，同时使用数据库来存储它的目录/路径以供参考。

这样做有些麻烦，但是我找到了一个链接，该链接向您展示了如何将其配置为主要替代方案，但它代替了数据库。

我正在尝试使用数据库将引用路径存储在文件系统中，以便我可以将其引用回存储的 blob 文件或图像的实际位置。有没有人这样做过？如果是这样，将不胜感激帮助或指导！

~~这是链接：[如何在 playframework 2.0 中配置 FS 数据库？](https://stackoverflow.com/questions/10150287/how-to-configure-fs-database-in-playframework-2-0)~~

（*编者注：这个链接对这个问题没有用，因为它描述了配置 H2 存储配置*）

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:24:21.843

您有点搞砸了，您提供的链接指示如何将整个`H2`数据库配置为存储在磁盘上或仅存储在内存中。

出于您的目的，您应该只采用[Play 文档中的 File Upload 示例](http://www.playframework.org/documentation/2.0.2/JavaFileUpload)

在行前你必须做的另一件事`return ok("File uploaded");`是在你的 MySQL 中查找记录并通过添加`fileName` 和/或`contentType`作为对存储在磁盘上的文件的引用来更新它。

玩一会儿`File`打字，然后你就可以把文件存储在你想要的地方和你想要的地方

# javascript - Node.js 变量被重置 - 未定义

> ID：11894304
> 
> 赞同：0
> 
> 时间：2012-08-10T01:31:32.017
> 
> 标签：javascript, node.js

我有一个由函数设置的全局变量（openTokSessionID）。当函数再次运行时，它应该检查是否设置了 openTokSessionID。如果是，它应该使用当前值。然而，相反，它抱怨 openTokSessionID 是未定义的。我的服务器代码如下。谢谢你的帮助。

```
var http = require('http').createServer(handler), 
io   = require('socket.io').listen(http).set('log level', 1),
opentok = require('opentok'),
key = '',    // Replace with your API key  
secret = '';  // Replace with your API secret  
var ot = new opentok.OpenTokSDK(key,secret);
ot.setEnvironment("staging.tokbox.com");
//ot.setEnvironment("api.opentok.com"); //only for production
http.listen(8080);
console.log('Chatserver listening on port 8080');

var nicknames = {};
var log = {};
var connectedUsersObject={};
var privateSessionObject={};
var data;
var openTokSessionID='';

function handler(req, res) {
  res.writeHead(200);
  res.end();
}

////////////////////////////////////////////SOCKET.IO FUNCTIONS///////////////////////////////////////////////////////
io.sockets.on('connection', function (socket) {
    socket.on('private message', function(data) {
        console.log('OpenTok Session ID is: ....' + openTokSessionID);
        if(data.messageType=='openTokDemoRequest'){ //if new session, create unique session ID, add to current chat object
            console.log(data.messageType + ' sender: ' + data.from);

            var location = '127.0.0.1'; // use an IP or 'localhost' 
            console.log('message type is: "openTokDemoRequest". openTokSessionID is: ' + openTokSessionID);
            var messageRecipient=data.from;
            if(openTokSessionID==''){
                console.log('The session ID is: ' + openTokSessionID + '++++++++');openTokSessionID= ot.create_session(location, function(openTokSessionID){

                    var data= {'to':messageRecipient, 'message':{'token': ot.generate_token({'session_id':openTokSessionID, 'role': "publisher"}), 'sessionID': openTokSessionID, 'apikey':key}, 'from': 'openTok', 'messageType':'demoTokenInfo', 'privateSessionID':''};
                    console.log('NEW session id is: ' + openTokSessionID + '. token is: ' + data.message.token);
                //  privateMessageSend(data);
                //  sendToUser(data);
                    connectedUsersObject[messageRecipient].emit('private message', data);
                    console.log ('message recipient is: ' + messageRecipient);
                }); 
            }
            else{
                console.log('OpenTok Session ID is: ////' + openTokSessionID);
                var data= {'to':messageRecipient, 'message':{'token': ot.generate_token({'session_id':openTokSessionID, 'role': "publisher"}), 'sessionID': openTokSessionID, 'apikey':key}, 'from': 'openTok', 'messageType':'demoTokenInfo', 'privateSessionID':''};
                console.log('session id is: ' + openTokSessionID + '. token is: ' + data.message.token);
                connectedUsersObject[messageRecipient].emit('private message', data);
                console.log ('message recipient is: ' + messageRecipient);
            }   

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:37:56.100

在这里，您尝试使用异步调用的返回值，因此您将变量设置为`undefined`：

```
openTokSessionID= ot.create_session(location, function(openTokSessionID){
... 
```

因为您为回调参数提供了与变量相同的名称，所以它在回调中掩盖了您的变量，因此第一次看起来不错，但您的实际变量被丢弃了。

您需要将其更改为：

```
ot.create_session(location, function(sessionID){
  openTokSessionID = sessionID;
... 
```

# hadoop - HBase：Regionserver 和 QuorumPeer 的区别

> ID：11894307
> 
> 赞同：0
> 
> 时间：2012-08-10T01:31:52.437
> 
> 标签：hadoop, hbase

我是 Hbase 的新手。现在我有一个简单的问题：regionserver 和 quorumpeer 有什么区别。Regionservers 列表在文件 regionserver 中，quorumpeer 应该在 HBase_site.xml 中配置。我猜想 Hbase 表的区域只能存储在区域服务器中，但我不知道 quorumpeer。hbase cluser的任何节点是否应该同时是regionserver和quorumpeer？如果你知道，请给我解释一下。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T18:41:52.370

为了使 hBase 工作，它需要 Zookeeper 以便 regionServers 和 Hmaster 可以通信和传输数据。检查一下[http://hbase.apache.org/book/zookeeper.html](http://hbase.apache.org/book/zookeeper.html) 您需要运行法定数量的 Zookeeper 服务器（通常为 3 或 5） 您必须在 hbase.zookeeper 中列出运行 Zk 服务器的节点HBase-site.xml 中的 .quorum 属性

# ruby - 什么时候用undef_method，什么时候用remove_method？

> ID：11894308
> 
> 赞同：19
> 
> 时间：2012-08-10T01:31:52.417
> 
> 标签：ruby, reflection, methods, metaprogramming

我想重新定义一个方法，但要避免与之相关的警告。我应该使用 undef_method 还是 remove_method 这样做？

（是的，重新定义方法有点麻烦。我这样做是因为我有一些我想在运行单元测试时使用的记忆，但不是在程序本身运行时。）

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-10T03:04:09.993

来自[精美手册](http://ruby-doc.org/core/Module.html#method-i-undef_method)：

> **undef_method(symbol) → self**
> 
> 防止当前类响应对命名方法的调用。将其与从特定类中删除方法的 进行对比`remove_method`；Ruby 仍然会在超类和混合模块中搜索可能的接收器。

所以`remove_method`像这样：

```
class CC < C
  remove_method :m
end 
```

本质上与此相反：

```
class CC < C
  def m
  end
end 
```

where`def m`将方法添加`m`到类中，`remove_method :m`删除`m`. 但是，如果超类有一个`m`方法，那么它仍然会被使用。

`undef_method`，OTOH，更像这样：

```
class CC < C
  def m
    raise 'No, you cannot do that.'
  end
end 
```

所以`undef_method`实际上并没有删除该方法，它用一个特殊的内部标志替换该方法，如果您尝试调用该方法，它会导致 Ruby 抱怨。

听起来您正在尝试替换现有方法，并且*替换*在语义上与*删除*后跟*添加*相同，因此`remove_method`可能更合适。但是，如果您想偏执并确保替换方法到位，那么`undef_method`将很有用；或者，如果由于某种原因您需要在一个地方删除该方法并将其添加到另一个地方，`undef_method`那么至少会告诉您您只完成了一半的工作，而`remove_method`您将留下超类的实现（以及可能的奇怪错误）或一个相当混乱的`NoMethodError`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-12-15T10:58:54.820

您可以通过两种简单的方式删除方法。激烈的

```
Module#undef_method( ) 
```

删除所有方法，包括继承的方法。更友善的

```
Module#remove_method( ) 
```

从接收者中删除方法，但它只留下继承的方法。

请参见下面的 2 个简单示例 -

**示例 1 使用*undef_method***

```
class A 
    def x
        puts "x from A class"
    end
end

class B < A
    def x
        puts "x from B Class"
    end
    undef_method :x
end

obj = B.new
obj.x 
```

结果 - main.rb:15:in `': undefined method`x' for # (NoMethodError)

**示例 2 使用*remove_method***

```
class A 
    def x
        puts "x from A class"
    end
end

class B < A
    def x
        puts "x from B Class"
    end
    remove_method :x
end

obj = B.new
obj.x 
```

结果 - $ruby main.rb

x 来自 A 类

# html - HTML5 样板选项

> ID：11894309
> 
> 赞同：0
> 
> 时间：2012-08-10T01:32:09.610
> 
> 标签：html, html5boilerplate

我正在尝试构建我的第一个 HTML5 网站。我开始尝试使用 HTML5 Boilerplate，但这需要我访问 htaccess 文件。我在客户现有的服务器上构建它，他们不能给我访问权限。就 css 设置而言，我真的很喜欢样板的功能。我想要一些能让我的项目开始变得容易的东西。我不想从头开始编写代码。指导？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:51:19.330

> 但是，这要求我可以访问 htaccess 文件

为什么*需要*这个？有什么不工作吗？HTML、CSS 和 JavaScript 不需要 .htaccess 文件。

正如steveax所说：

1.  转到[http://html5boilerplate.com/](http://html5boilerplate.com/)
2.  点击“自定义样板”
3.  取消选中“.htaccess”（您可能也想取消选中“Ant Build Script”）
4.  下载！

# python - python集合模块中的命名约定不一致？

> ID：11894313
> 
> 赞同：1
> 
> 时间：2012-08-10T01:32:49.240
> 
> 标签：python, collections, naming-conventions

> **可能重复：**
> [库类名的大写](https://stackoverflow.com/questions/4032925/capitalization-of-library-class-names)

为什么 dict 子类`defaultdict`不遵循集合模块中的其他两个 dict 子类 ( `Counter`, `OrderedDict`) 遵循的 CapWords 命名约定？

PEP 8 推荐类的 CapWords 约定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:46:18.203

纵观 CPython 源代码，我可以提到集合模块由两种大写的集合类型组成：OrderedDict 和 Counter 都在**Python**中实现以及其他三种类型，其中 namedtuple 是*function*， deque 和 defaultdict 类型在**C**中实现。所以有一个整体的区别。

# php - preg_match 找不到简单的正则表达式

> ID：11894320
> 
> 赞同：3
> 
> 时间：2012-08-10T01:34:05.283
> 
> 标签：php, curl, preg-match

由于有一些保密协议，我可以在这里真正披露的信息量很少。不幸的是，我所在的地方没有人能回答我，所以我转向 Stack Overflow。基础是这样的：在 PHP 中，我使用 HTTP（使用 cURL 或 file_get_contents）从 SVN 存储库下载一个大文件（73000 个字符），并搜索规则。所有规则都用@rule注释，所以找到它们的正则表达式应该是

```
/(?<=@RULE).+?$/im 
```

我已经测试过了，它可以工作。问题是，即使文件正在正确下载并被转换为字符串（var_dumps 已确保这一点）

```
preg_match('/RU/',$file, $rules); 
```

尽管我可以在 var_dumped 字符串中看到适当的匹配项，但 $rules 仍然完全为空。我束手无策，试图弄清楚发生了什么。没有抛出任何错误（它返回 0），它似乎没有耗尽内存，它只是告诉我“不，那里什么都没有，乔治。” 有趣的是，它会发现

```
/R/ 
```

正好。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T01:57:00.757

由于您只匹配 ASCII，我唯一能想到的是文本格式是 UTF-16，在 ASCII 的情况下，`'\0'`在每个字符后添加一个。

如果是这种情况，请在运行之前运行`preg_match()`：

```
$file = mb_convert_encoding($file, 'UTF-8', 'UTF-16'); 
```

# php - 使用 CakePHP 模型类

> ID：11894322
> 
> 赞同：1
> 
> 时间：2012-08-10T01:34:18.170
> 
> 标签：php, cakephp, cakephp-2.1

我只是在学习 CakePHP，对于任何明显的错误，我深表歉意。我创建了模型类并更改了默认表名。

```
class Weathers extends AppModel {    
    public $tablePrefix = 'weather_';
    public $useTable = 'forecasts';

    function saveCountries($countries){
         ...
    }
} 
```

还有我的控制器功能

```
if (!$this->loadModel('Weather'))
   exit;
$Weather = $this->Weather;
$Weather->saveCountries($countries); 
```

我在*$Weather->saveCountries($countries)*上遇到错误；

> 错误：在数据源默认值中未找到模型 Weather 的表天气。

请帮助找出我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:10:45.383

您定义的 Model 类`Weathers`不是`Weather`. 所以只需更改类名`Weather`而不是`Weathers`就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T10:22:07.097

请注意您的模型类的声明。

你已经调用它了`Weathers`。

这没有问题。但是，当您尝试加载模型`Weather`时（在这种情况下不是缺少复数）CakePHP 正在为您动态构建模型，而不是使用您的`Weathers`（复数）类。

CakePHP 标准是为模型使用单数名称。我建议您重命名模型类`Weather`以避免此问题。进行此更改后，用于加载模型的代码将按预期工作。

# c# - 如何在数据集中的数据表之间建立关系

> ID：11894323
> 
> 赞同：0
> 
> 时间：2012-08-10T01:34:18.347
> 
> 标签：c#

我有一个数据集`DS1`。在这个数据集中有两个数据表：`DT1`和数据表`DT2` 的布局如下所示：

DT1 数据：

```
**ID  Name**
   1  Amit
   2  Alok
   3  Munish 
```

DT2 数据：

```
**ID  Name**
   2  Alok
   3  Munish
   4  Firoj 
```

我想创建一个如下所示的新表：

```
**ID  Name**
   2  Alok
   3  Munish 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:46:01.223

该类`DataTable`有一个`Merge`方法：

```
DataTable DT1;
DataTable DT2;
DT1.Merge(DT2); 
```

[数据表合并](http://msdn.microsoft.com/en-us/library/fk68ew7b.aspx)

# c# - Windows 8 UI：如何处理右键单击？

> ID：11894324
> 
> 赞同：1
> 
> 时间：2012-08-10T01:34:58.443
> 
> 标签：c#, wpf, windows-8

我正在为 Windows 8 制作一个小程序，我想让使用鼠标的用户有机会右键单击`GridView`.

虽然 GridViews 有`ItemClick`事件，但这些不传达鼠标按钮。他们有一个`RightTapped`（这甚至意味着什么？）事件，但它不传达点击的项目，只是传达事件源。

如何判断哪个模型对象被右键单击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:58:23.420

在问这个问题之前，我没有想太多。可以通过访问目标对象`event.OriginalSource.DataContext`（一旦其中的每个位都已转换为适当的类）。

必须格外小心，因为右键单击网格元素之间的边距仍会触发事件，但会触发 GridView 本身。

# python - 这段代码的顺序有什么问题？

> ID：11894325
> 
> 赞同：0
> 
> 时间：2012-08-10T01:35:00.107
> 
> 标签：python, python-2.7

我正在尝试用 Python 制作一个 Pig Latin 翻译器。我还没有完成的产品，我正在通过 Codecademy 工作。到目前为止，这是我的代码：

```
pyg = 'ay'

original = raw_input('Enter a word:')
if len(original) > 0 and original.isalpha():
    print original
    if first == "a" or "e" or "i" or "o" or "u":
        print "vowel"
    else:
        print "consonant"
else:
    print 'empty'
word = original.lower()
first = word [0] 
```

我很确定最后两行不合适，但我不知道它们应该去哪里，也不知道为什么。如果有人可以向我解释这一点，那就太好了。我只是在这个程序的阶段，我想检查第一个字母是元音还是辅音，我还没有在翻译部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T01:43:14.047

您正在定义`word`并`first`在检查它们的值之后，因此请在定义和检查长度之后尝试移动它们`original`（以避免空值的索引错误）。

此外，在您使用的地方`if len(original) > 0`，您实际上将其简化为，如果它是非空值`if original`，它将返回。`True`

另一件事 - 您对元音的检查不会返回预期值。相反，尝试这样的事情：

```
if first in 'aeiou': 
```

我敢肯定有更好的方法来处理它，但这应该适用于您的情况。

**编辑：**将语句 更改为`if`@Levon 的方法（这更像是 Pythonic）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T01:41:43.107

这一行：

```
if first == "a" or "e" or "i" or "o" or "u": 
```

不按照您期望的方式行事。[我实际上几天前基本上回答了这个确切的问题](https://stackoverflow.com/a/11781035/1084754)。

如果您不理解我在那里给出的解释，请告诉我。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-10T01:45:51.223

**（1）**您的`if`-statement 可以改写为缩短（和正确）的版本，如下所示：

```
if first in 'aeiou': 
```

[*我最近在这里*](https://stackoverflow.com/a/11809145/1209279)为与您解决相同问题的其他人提供了更多解释。

**（2）**关于将这两行代码放在哪里的问题：

```
word = original.lower()
first = word[0] 
```

将它们放在您的`print original`内部`if`语句之后。他们将您输入的单词转换为小写，然后获取单词的第一个字母并将其分配给`first`随后用于检查元音/辅音的变量。

# language-agnostic - 什么是抽象语法树/是否需要？

> ID：11894326
> 
> 赞同：8
> 
> 时间：2012-08-10T01:35:13.187
> 
> 标签：language-agnostic, abstract-syntax-tree, compiler-theory

只要我一直在编程（现在只有 5 年），我就一直对编译器/解释器的设计/实现感兴趣，而且它总是看起来像没有人真正谈论的幕后“魔法”（我至少知道2 个操作系统开发论坛，但我不知道有任何编译器/解释器/语言开发社区）。无论如何，最近我决定开始自己工作，希望能扩展我对整个编程的了解（嘿，这很有趣:)。因此，基于我拥有的有限阅读材料和维基百科，我为编译器/解释器开发了这个组件概念：

源代码 -> 词法分析 -> 抽象语法树 -> 句法分析 -> 语义分析 -> 代码生成 -> 可执行代码。

（我知道代码生成和可执行代码还有更多内容，但我还没有做到这一点：）

有了这些知识，我创建了一个非常基本的词法分析器（在 Java 中）来从源文件中获取输入，并将标记输出到另一个文件中。示例输入/输出如下所示：

输入：

```
int a := 2
if(a = 3) then
    print "Yay!"
endif 
```

输出（来自词法分析器）：

```
INTEGER
A
ASSIGN
2
IF
L_PAR
A
COMP
3
R_PAR
THEN
PRINT
YAY!
ENDIF 
```

就个人而言，我认为从那里开始进行句法/语义分析，甚至可能是代码生成真的很容易，这让我产生疑问：为什么要使用 AST，而我的词法分析器似乎做得同样好？然而，我用来研究这个主题的 100% 的资源似乎都坚持认为这是任何编译器/解释器的必要部分。我是否错过了 AST 的真正含义（显示程序逻辑流程的树）？

TL;DR：目前正在开发编译器，完成词法分析器，在我看来，输出将有助于轻松进行句法分析/语义分析，而不是进行 AST。那么为什么要使用一个呢？我错过了一个点吗？

谢谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-10T02:13:58.417

首先，关于您的组件列表的一件事是没有意义的。构建 AST*是*（几乎）句法分析，所以它不应该在那里，或者至少*在*AST 之前。

你得到的是一个词法分析器。它给你的只是个人代币。在任何情况下，您都需要一个实际的解析器，因为使用常规语言进行编程没有任何乐趣。您甚至不能（正确地）嵌套表达式。哎呀，您甚至无法处理运算符优先级。令牌流不会给您：

1.  语句和表达式开始和结束的想法。
2.  一个想法如何将语句分组到块中。
3.  一个想法 表达式的哪个部分具有哪个优先级、关联性等。
4.  对程序的实际结构有清晰、整洁的视图。
5.  一种可以通过无数次转换的结构，而无需每一次通过都知道*并且有代码来适应*an 中的条件`if`被括号括起来。
6.  ...更一般地说，任何一种高于单个令牌水平的理解。

假设您在编译器中有两次优化某些类型的运算符适用于某些参数（例如，常量折叠和代数简化，如`x - x -> 0`）。如果您将表达式的标记交给他们`x - x * 1`，这些通道就会变得杂乱无章，因为要弄清楚`x * 1`零件首先出现。他们*必须*知道这一点，以免转换不正确（考虑`1 + 2 * 3`）。

这些事情很棘手，无法按原样正确处理，因此您也不想被解析问题所困扰。这就是您*首先*在单独的解析步骤中解决解析问题的原因。*然后*，您可以使用其定义替换函数调用，而不必担心添加括号，因此含义保持不变。您可以节省时间、分离关注点、避免重复、在许多其他地方启用更简单的代码等。

解析器计算出所有这些，并构建一个 AST，从而保存所有这些信息。如果没有关于节点的任何进一步数据，仅 AST 的形状就不会给您任何帮助。1、2、3 等等，免费。*接下来*的无数次通行证都不必再担心它了。

这并不是说您总是必须拥有 AST。对于足够简单的语言，您可以使用单遍编译器。您无需在解析期间生成 AST 或其他中间表示，而是在执行过程中发出代码。但是，对于不太简单的语言，这变得更加困难，并且您无法合理地做很多事情（例如所有优化和诊断的 70% ——是的，我刚刚做了这个数字）。一般来说，我不建议你这样做。单遍编译器大多已死，这是有充分理由的。即使是允许它们的语言（例如 C）现在也可以通过多次传递和 AST 来实现。这是一种简单的入门方式，但以后会严重限制您（以及语言，如果您设计的话）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-10T02:30:19.440

您在流程图中的错误位置获得了 AST。通常，词法分析器的输出是一系列标记（就像您在输出中一样），这些标记被馈送到生成 AST 的解析器/句法分析器。因此，您的词法分析器的输出与 AST 不同，因为它们在编译过程中的不同点使用并实现不同的目的。

下一个合乎逻辑的问题是：那么，什么是 AST？好吧，解析/句法分析的目的是将词法分析器生成的一系列标记转换为 AST（或解析树）。AST 是一种中间表示，它以更易于以编程方式使用的方式捕获语法元素之间的关系。对此的一种思考方式是，文本程序是一维结构，只能将想法表示为一系列元素，而 AST 则不受此约束，可以在二维中表示这些元素之间的潜在关系（如通常绘制的那样），或任何更高维度的空间，如果您选择以这种方式考虑的话。

例如，二元运算符有两个操作数，我们称它们为 A 和 B。在代码中，这可能拼写为“A * B”（假设是中缀运算符 - AST 的另一个优点是隐藏在语法上可能很重要的区别，但不是语义上的），但要让编译器“理解”这个表达式，它必须顺序读取 5 个字符，而且这个逻辑很快就会变得很麻烦，即使是一种小语言也有很多可能性。然而，在 AST 表示中，我们有一个“二元运算符”节点，其值为“*”，该节点有两个子节点，值“A”和“B”。

随着您的编译器项目的进展，我想您将开始看到这种表示的优势。

# jquery - Jquery datepicker 使用带有特定日期的选择选项

> ID：11894328
> 
> 赞同：-1
> 
> 时间：2012-08-10T01:36:14.247
> 
> 标签：jquery, jquery-ui-datepicker

[http://jsfiddle.net/fyv33/505/](http://jsfiddle.net/fyv33/505/)这个演示

这是我的代码

```
 <script>
$(function() {
        $( "#datepicker" ).datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'MM d, yy'
        });
        $( "#datepicker2" ).datepicker({
            changeMonth: true,
            changeYear: true,
            dateFormat: 'MM d, yy'
        });
    });
</script>

<li><label for="billing_cycle">Billing</label>
<select name="billing_cycle" >
        <option >monthly</option>
        <option >6 months (5% off)</option>
        <option >12 months</option> 
```

```
<li><label for="charged_datetime">Charge Date</label>
 <input type="text" id="datepicker" value="August 10,2012"></li>
<li><label for="expired_datetime">Expiring Date</label>
  <input type="text" id="datepicker2" value="September 10,2012"></li> 
```

每次我更改计费周期，过期日期也会更改，从收费日期开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T10:54:55.390

```
<script>
$(function() {
    $( "#datepicker" ).datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: 'MM d, yy',
        altField: "#datepicker2",
        altFormat: 'MM d, yy'
    });
    $( "#datepicker2" ).datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: 'MM d, yy'
    });

    var updateExpDate = function(monthToAdd) {
        var now = new Date($('#datepicker').val());
        monthToAdd = parseInt(monthToAdd);
        var a = new Date(now).setMonth(now.getMonth() + monthToAdd);
        var exp_date = new Date(a);
        $('#datepicker2').datepicker('setDate', exp_date);
    };
    $("#datepicker").datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: 'MM d, yy'
    });
    $("#datepicker2").datepicker({
        changeMonth: true,
        changeYear: true,
        dateFormat: 'MM d, yy'
    });
    $("#billing_cycle").on('change', function() {
        updateExpDate($(this).val());
    });

    $('#datepicker').on('change', function() {
        updateExpDate($('#billing_cycle').val());
    });
}); 
```

[http://jsfiddle.net/fyv33/523/](http://jsfiddle.net/fyv33/523/)

# assembly - 如何在linux崩溃信息中读取机器代码

> ID：11894329
> 
> 赞同：2
> 
> 时间：2012-08-10T01:36:34.333
> 
> 标签：assembly, crash, linux-kernel

linux崩溃信息中有机器代码。有什么工具可以将这些机器代码翻译成汇编指令吗？

```
code of(ffffffffa0f04ce2):
0xc3 0x89 0xfa 0x66 0xed 0x0f 0xb7 0xc0 0xc3 0x89 0xfa 0xed 0xc3 0xf0 0x48 0x0f 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T01:44:45.230

你可以使用反汇编程序。我在[网上](http://www.onlinedisassembler.com/odaweb/run_hex)找到了一个。复制、编辑和粘贴`c3 89 fa 66 ed 0f b7 c0 c3 89 fa ed c3 f0 48 0f`，选择处理器系列（它们有很多可供选择），你就会得到结果。我尝试使用 i386 并得到以下结果：

```
c3      ret
89fa    mov %edi,%edx
66ed    in (%dx),%ax
0fb7c0  movzwl %ax,%eax
c3      ret
89fa    mov %edi,%edx
ed      in (%dx),%eax
c3      ret
f048    lock dec %eax 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T05:52:46.557

`decodecode`在 Linux 源代码分发的目录中调用了一个工具`scripts/`，可以执行此操作。您可以通过将整个 Oops 消息传递到脚本来使用它。

# class - 将类放入 App_Code 文件夹以供常用时出现编译器错误

> ID：11894330
> 
> 赞同：0
> 
> 时间：2012-08-10T01:36:36.117
> 
> 标签：class, compiler-construction, app-code

我在 App_Code 文件夹中放置了一个类，因此我的所有源文件都应该可以访问它。Intellisense 确实看到了这个类（在代码隐藏中），但是当我从浏览器运行该站点时，我得到一个编译器错误：

```
**Compilation Error**

Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. 
Compiler Error Message: BC30002: Type 'ClsTranslation' is not defined.
Source Error:
Line 38:     End If    
Line 39:     
**Line 40:     Dim clsTrans As ClsTranslation**  
Line 41:     clsTrans = New ClsTranslation()  
Line 42:     lblLevel0.Text = clsTrans.GetResource("", "Modules")  

Source File: C:\inetpub\wwwroot\myproject\InfoSiteMap.aspx.vb    Line: 40 
```

我将此站点作为 Web 项目运行，因此`content/compile`我的构建选项`App_Code/class`不可用。我还尝试使用 Reference 指令将文件映射到预编译器`@`，但这似乎仅适用于用户控件而不适用于类。还尝试将类放在命名空间中，所有结果都相同。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-26T21:03:44.973

大多数时候，当我这样做时，文件的构建操作是“内容”而不是“编译”。在解决方案资源管理器中突出显示该类，然后按 f4 并更改它。

# python - 烧瓶嵌套的帖子数据

> ID：11894331
> 
> 赞同：3
> 
> 时间：2012-08-10T01:36:44.357
> 
> 标签：python, flask

我正在尝试构建一种处理大量已发布选项的方法，例如

```
my_posted_data = {"item": "value", "item_options":{"a":2, "b":2} } 
```

这将来自其他地方的 api 情况，我无法控制环境，现在是模拟的。我将通过请求库发布；并移动服务器端，我尝试从我的应用程序中的路由/视图中获取它。request.form 被读入一个传递给`task_manager`队列的变量（表单）。在任务中，我将尝试做：

```
options = form.get("item_options", None) 
```

`options`总是以`NoneType`. 为什么这不选择 dict(like) 的值`{"a": 2, "b": 2}`？我想我做错了，但在这一点上我无法确定。

根据我提供的这张少量图片，我如何以最有效的方式使用 Flask 请求发布和检索嵌套值？

编辑：我不得不采用不同的方式，使用 JSON 数据，因为我意识到在最好的情况下，表单更适合来自 html 页面的用户输入，这需要不同的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T03:51:44.440

通过在 WTForms 中使用带有[Field Enclosures](http://wtforms.simplecodes.com/docs/1.0.1/fields.html#field-enclosures)的 Flask-WTF ，您可以轻松处理嵌套的 post 数据。

# css - 对角线作为css的背景 - 如何切换角度

> ID：11894332
> 
> 赞同：1
> 
> 时间：2012-08-10T01:36:56.937
> 
> 标签：css

[http://jsbin.com/enazac/1/](http://jsbin.com/enazac/1/)

我如何改变方向，而不是行“\”方向，他们可以去“/”方向？我在网上找到了这个 css，我喜欢它，只需要切换方向。

警告：我将 css 修剪了很多，以便它在 Chrome 中可以正常工作，我不确定其他浏览器是否会呈现它。谢谢。

CSS：

```
.diagonal_lines_pattern {
  background-image: -webkit-gradient(linear, left bottom, right top, color-stop(0, #E76801), color-stop(0.25, #E76801), color-stop(0.25, #EC7F24), color-stop(0.5, #EC7F24), color-stop(0.5, #E76801), color-stop(0.75, #E76801), color-stop(0.75, #EC7F24));
  background-size: 20px 20px;
  width:100%;
  height:100%;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T03:38:34.353

```
.diagonal_lines_pattern{
    background-image: -webkit-gradient(linear, left top, right bottom, color-stop(0, #E76801), color-stop(0.25, #E76801), color-stop(0.25, #EC7F24), color-stop(0.5, #EC7F24), color-stop(0.5, #E76801), color-stop(0.75, #E76801), color-stop(0.75, #EC7F24));
    background-size: 20px 20px;
    width:100%;
    height:100%;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T01:43:04.360

玩转 CSS... 将左侧更改为右侧，从顶部更改为底部...

```
-webkit-gradient(linear, left top, right bottom,... 
```

更多信息[`-webkit-gradient`](http://developer.apple.com/library/safari/#documentation/appleapplications/reference/safaricssref/articles/Functions.html)

# python - 在 Virtualenv 中测试 python 框架的内存使用情况

> ID：11894333
> 
> 赞同：1
> 
> 时间：2012-08-10T01:37:09.963
> 
> 标签：python, memory, virtualenv, web-frameworks

我正在几个不同的 python web 框架中创建一个应用程序，以查看哪个在我的编程舒适度和性能方面具有更好的平衡。有没有办法报告在 virtualenv 中运行的特定应用程序的内存使用情况？

如果没有，我如何才能找到我的 Web 框架应用程序的平均、最大和最小内存使用量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:53:34.897

这取决于您将如何在您的环境中运行应用程序。有许多不同的方式来运行 Python Web 应用程序。最近流行的方法似乎是 Gunicorn 和 uWSGI。因此，您最好像在您的环境中一样运行应用程序，您可以简单地使用进程监视器来查看运行您的应用程序的进程正在使用多少内存和 CPU。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T21:22:40.423

我将第二次 Matt W 关于应用程序环境是主要因素的说明（Gunicorn、uWSGI、nginx->paster/pserve、eventlet、apache+mod_wsgi 等）

我还要补充一点——这一年是 2012 年。在 1999 年，这类东西的内存和 CPU 是个大问题。但现在是 2012 年。计算机的功能要强大得多，扩展它们更容易、更便宜，而且框架的编码也更好。

你本质上是在看没有实际问题的基准测试，只会在理论上“整洁”和信息丰富。

Python webapps 的性能瓶颈通常是：

*   数据库通信瓶颈
*   数据库模式
*   并发连接数/每秒请求数

对于数据库通信瓶颈，一般的解决方法有：

*   少交流
*   *   积极缓存
*   *   优化您的 sql 查询和结果集，因此数据更少
*   升级你的数据库基础设施
*   *   专用机器
*   *   集群主/从或分片

在数据库模式方面，便利是有代价的。在 Django 中完成某些事情会更快——但您将在很大程度上被它创建的模式所困扰。Pyramid+SqlAlchemy 更加灵活，您可以使用它构建一个经过微调的数据库......但是您不会获得 Django 提供的任何自动工具。

对于每秒并发连接/请求，这主要是由于环境。在 paste、uwsgi 等部署策略下运行同一个 app 会产生不同的结果。

这是一个好的但旧的基准的链接 - [http://nichol.as/benchmark-of-python-web-servers](http://nichol.as/benchmark-of-python-web-servers)

你会注意到那里有一个峰值内存使用的幻灯片，虽然有一些异常值和相当数量的集群正在进行，但表现最差的有 122MB。没什么。

与 uwsgi 的 15 或 cogen 的 122 相比，您可以将 gevent 解释为拥有 3MB 的内存……但这些都只是现代系统内存的一小部分。

这些框架的开销如此之小，几乎不会成为影响操作性能的因素。甚至数据库部分也不算什么。参考这篇关于 SqlAlchemy 的帖子（[为什么使用 sqlite 插入 SQLAlchemy 比直接使用 sqlite3 慢 25 倍？](https://stackoverflow.com/questions/11769366/why-is-sqlalchemy-insert-with-sqlite-25-times-slower-than-using-sqlite3-directly/11769768#11769768)），维护者在其中记录了一些令人印象深刻的性能说明：对于 100k 行，直接生成 sql 大约为 0.5 秒。当涉及具有完整性检查/等的完整 ORM 时，相同数量的行将变为 16 秒。那*没什么*。

所以，我的观点很简单——你应该考虑的两个因素是：

*   我现在可以编程多快/舒服
*   从现在开始的一年内我可以编程多快/舒适（即我的项目使用这个框架增加“技术债务”的可能性有多大，以及这将成为多大的问题）

使用框架来决定您最喜欢哪个框架，但不要将时间浪费在性能测试上，因为您要做的就是浪费时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T11:49:16.493

托管机制的选择不是内存使用的原因，而是您配置它们的方式，以及您决定运行的胖 Python Web 应用程序。

引用的基准是：

[http://nichol.as/benchmark-of-python-web-servers](http://nichol.as/benchmark-of-python-web-servers)

是一个很好的例子，说明基准测试可能会出错。

该基准测试中不同托管机制的配置无法比较，因此您无法使用结果来正确评估每种托管机制的内存使用情况。如果您关心内存，我不会过多关注该基准。

忽略记忆，其他一些关于真正瓶颈所在位置的评论是有效的。有关整个问题的更多详细信息，请参阅我的 PyCon 演讲。

[http://lanyrd.com/2012/pycon/spcdg/](http://lanyrd.com/2012/pycon/spcdg/)

# objective-c - 未设置委托

> ID：11894335
> 
> 赞同：0
> 
> 时间：2012-08-10T01:37:14.270
> 
> 标签：objective-c, delegates, delegation

有人可以帮助我使用以下代码：

```
 - (IBAction)addCellButton: (UIBarButtonItem *)sender
{
    if(!self.imagePopover)
    {
        AlbumPicker *albumPicker = [self.storyboard instantiateViewControllerWithIdentifier:@"MultipleImagePicker"];
        self.imagePopover = [[UIPopoverController alloc] initWithContentViewController:albumPicker];
        albumPicker.delegate = self;
        NSLog(@"%@", albumPicker.delegate);
        [self.imagePopover presentPopoverFromBarButtonItem:sender
                                  permittedArrowDirections:UIPopoverArrowDirectionAny
                                                  animated:YES];
        self.imagePopover.delegate = self;
    }
} 
```

问题是，当我通过打印来检查albumPicker.m 中的委托时，它设置为`nil`？我是否正确设置了代表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T04:02:02.137

看来您已经以正确的方式设置了委托。我认为如果委托正常工作，可能是由于委托的属性。我隐约记得在谷歌（或苹果）编码指南中，委托的属性应该设置为`assigned`而不是`retain`。

另外，你的问题对我来说似乎有点不清楚。我想如果你想检查委托是否工作，你最好设置一个委托方法，看看该方法是否被调用。

# php - 图像未使用 codeigniter 框架显示，但在呈现页面时会显示完整链接

> ID：11894337
> 
> 赞同：1
> 
> 时间：2012-08-10T01:37:26.250
> 
> 标签：php, image, codeigniter

我是codeigniter的新手，但这似乎很奇怪。呈现页面时，会看到完整且正确的图像链接，如果您在 firebug 中单击它，则会打开图像。

```
<?php
$content = <<<ENDHTML
<img class="banner" href="
ENDHTML;
$imgUrl = asset_Url().'images/logo.png';
$content1 = <<<ENDHTML
" alt="Company Logo"><h1 class="banner">MyWebApp</h1>
ENDHTML;
echo $content.$imgUrl.$content1;
?> 
```

呈现的代码如下所示

```
<img class="banner" href="http://localhost/myWebAppFolder/assets/images/logo.png" alt="Company Logo"><h1 class="banner">MyWebApp</h1>           <!-- Header Section --> 
```

我使用 codeigniter 阅读了有关资产位置的先前答案之一，并且我制作了自己的资产帮助文件，该文件适用于 CSS 和 JavaScript，但不适用于图像。请帮忙！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T01:41:04.207

`href`当图像标签使用该`src`属性时，您用于指定图像 URL。

尝试更改为：

```
$content = <<<ENDHTML
<img class="banner" src="
ENDHTML;
$imgUrl = asset_Url().'images/logo.png';
$content1 = <<<ENDHTML
" alt="Company Logo"><h1 class="banner">MyWebApp</h1>
ENDHTML;
echo $content.$imgUrl.$content1; 
```

这将呈现：

```
<img class="banner" src="http://localhost/... 
```

这将是正确的并且应该有效。

# asp.net - 如何将下拉列表的值从 .aspx 传递到 .asmx.cs？

> ID：11894344
> 
> 赞同：0
> 
> 时间：2012-08-10T01:38:16.600
> 
> 标签：asp.net, asmx

我的 p1.aspx 上有这个下拉列表：

```
<select id="ListBoxViewType" style="width:160px;font-family:Tahoma;visibility:hidden;">
                        <option value="Amendment">Amendment</option>
                        <option value="Agreement">Full Terms Amendment</option>
                        <option value="Both">Both</option>
                    </select> 
```

我需要在 p2.asmx.cs 上获得它的价值：

```
if ( <insert something like this: ListBoxViewType.Value=="Amendment">)
                            {
                                fileName = chReadData.ContractNumber +"_Amendment" +"-" + chReadData.DisplaySupplementNumber;
                                description = "Amendment for " + chReadData.ContractNumber + "-" + chReadData.DisplaySupplementNumber + " (\"" + chReadData.ContractDescription + "\")";
                            }
                            else 
                            {
                                fileName = chReadData.ContractNumber +"_Full_Amendment" +"-" + chReadData.DisplaySupplementNumber;
                                description = "Amendment for " + chReadData.ContractNumber + "-" + chReadData.DisplaySupplementNumber + " (\"" + chReadData.ContractDescription + "\")";
                            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:51:12.340

只需添加`runat="server"`到您的选择元素：

```
<select id="ListBoxViewType" runat="server" style="width:160px;font-family:Tahoma;visibility:hidden;">
                    <option value="Amendment">Amendment</option>
                    <option value="Agreement">Full Terms Amendment</option>
                    <option value="Both">Both</option>
                </select> 
```

要获得所选值，您可以使用：

```
this.ListBoxViewType.SelectedIndex 
```

* * *

此外，您应该考虑改用`DropDownList`控件：

```
<asp:DropDownList ID="ListBoxViewType" runat="server".... 
```

并访问所选项目：

```
this.ListBoxViewType.SelectedValue
this.ListBoxViewType.SelectedItem.Text
this.ListBoxViewType.SelectedItem.Value 
```

# objective-c - AVFoundation NSURL 显示不正确？

> ID：11894347
> 
> 赞同：0
> 
> 时间：2012-08-10T01:38:50.850
> 
> 标签：objective-c, ios

所以我正在尝试使用苹果提供的 http 直播流示例直播视频。该程序可以编译，但它不会在我的 iPhone 上显示任何内容。下面是代码：

谢谢你。

```
 NSURL *url = [NSURL URLWithString:@"<#http://developer.apple.com/resources/http-streaming/examples/advanced-stream.html#>"];
    /*
     // You may find a test stream at <http://devimages.apple.com/iphone/samples/bipbop/bipbopall.m3u8>.
     self.playerItem = [AVPlayerItem playerItemWithURL:url];
     [playerItem addObserver:self forKeyPath:@"status" options:0 context:&ItemStatusContext];
     self.player = [AVPlayer playerWithPlayerItem:playerItem];
  */
    /*

    self.player = [AVPlayer playerWithURL:url];
    [player addObserver:self forKeyPath:@"status" options:0 context:&PlayerStatusContext];
    */

                  self.playerItem = [AVPlayerItem playerItemWithURL:url];

                  //(optional) [playerItem addObserver:self forKeyPath:@"status" options:0 context:&ItemStatusContext];

                  self.player = [AVPlayer playerWithPlayerItem:playerItem];

                  self.player = [AVPlayer playerWithURL:url];

    [player play];
    [super viewDidLoad]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:50:46.917

看看这个苹果示例代码。这是使用 AVFoundation。

我看下面推荐苹果的示例代码。

你只想在它下面的代码中执行步骤，你会很有帮助的。

[缝合流播放器](http://developer.apple.com/library/ios/#samplecode/StitchedStreamPlayer/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010092)

我上传到 myServer 测试。完美。还有 Youtube、Vimeo 等……工作正常。

相信我。3G、wifi 在两种环境下都经过测试。虽然是示例代码，但令人惊讶的是它完美地工作。

# c# - 如何实现分层剃须刀模板扩展？

> ID：11894348
> 
> 赞同：1
> 
> 时间：2012-08-10T01:38:54.720
> 
> 标签：c#, razor, template-engine

我在 C# 控制台应用程序中使用 Razor 模板引擎并尝试将对象树扩展为文本文件。我在弄清楚如何使分层扩展起作用时遇到了一些困难。

很可能我完全误解了分层模板扩展应该如何在 Razor 中工作。我需要知道我目前的方法是否几乎是正确的并且只需要修复，或者我是否以完全错误的方式进行操作，那么正确的方法是什么？

额外的问题：Razor 是解决此问题的正确工具还是有更好的选择？

我创建了一个小型测试应用程序来演示该问题。该类`TemplateTreeModel`定义传递给 Razor 的模型。这个类定义了一棵树，`Children`成员是子`TemplateTreeModel`实例的列表。

我想实例化模型并将其传递给 Razor，如下所示：

```
var model = new TemplateTreeModel();
... add children to the tree ...
var expanded = Razor.Parse(Template, model); 
```

`TemplateTreeModel`有一个成员函数`ExpandChildren`进行层次扩展。我在这样的模板中使用它：

```
@(Model.ExpandChildren()) 
```

我的测试应用程序产生了非常奇怪的结果。一些叶节点在输出中重复，仅存在第 3 级节点。输出中缺少根节点（级别 1）和级别 2 节点。

更新：关于这个的更多上下文，这个的真正用例是我想从抽象语法树生成代码。所以我有一堆模板代表要为每个 AST 节点输出的脚本。然后我想从根 AST 节点递归扩展以将 AST 转换为脚本文件。

以下是测试应用程序的完整代码。要使其正常工作，您需要将代码放入 C# 控制台应用程序并引用 RazorEngine（可在此处获取[http://razorengine.codeplex.com/](http://razorengine.codeplex.com/)）。

```
using System;
using System.Collections.Generic;
using System.Text;
using RazorEngine;
using RazorEngine.Templating;

namespace RazorTest
{
    public class Program
    {
        public class TemplateTreeModel
        {
            private static int nextID = 1;

            public TemplateTreeModel(string template, int level)
            {
                this.Level = level;
                this.ID = nextID++;
                this.Template = template;
                this.Children = new List<TemplateTreeModel>();
            }

            public int Level { get; private set; }
            public int ID { get; private set; }
            public string Template { get; private set; }
            public List<TemplateTreeModel> Children { get; private set; }

            public string ExpandChildren()
            {
                var output = new StringBuilder();

                foreach (var child in this.Children)
                {
                    output.Append(child.Expand());
                }

                return output.ToString();
            }

            public string Expand()
            {
                var expanded = Razor.Parse(this.Template, this);
                return expanded;
            }

            public TemplateTreeModel DefineChild(TemplateTreeModel child)
            {
                this.Children.Add(child);
                return this;
            }
        }

        public static void Main(string[] args)
        {
            try
            {
                var template = "Node: @Model.ID (Level @Model.Level):\n@(Model.ExpandChildren())\n";
                var root =
                    new TemplateTreeModel(template, 1).
                        DefineChild(
                            new TemplateTreeModel(template, 2).
                                DefineChild(
                                    new TemplateTreeModel(template, 3)
                                ).DefineChild(
                                    new TemplateTreeModel(template, 3)
                                )
                        ).DefineChild(
                            new TemplateTreeModel(template, 2).
                                DefineChild(
                                    new TemplateTreeModel(template, 3)
                                ).DefineChild(
                                    new TemplateTreeModel(template, 3)
                                )
                        );

                var expanded = root.Expand();
                Console.WriteLine(expanded);
            }
            catch (TemplateCompilationException ex)
            {
                Console.WriteLine("Template compilation errors:");

                foreach (var error in ex.Errors)
                {
                    Console.WriteLine(error);
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T04:21:07.140

我现在已经从 Razor 继续前进了。如果有办法使用 Razor 进行分层模板扩展，那么我不知道它是什么。

然而，我已经转而使用 DotLiquid 模板引擎。

[http://dotliquidmarkup.org/](http://dotliquidmarkup.org/)

到目前为止看起来还不错，它似乎不支持开箱即用的分层模板扩展，尽管我能够使用标签很容易地实现它。

Razor 会很好，特别是因为它具有紧密的 C# 集成，但 DotLiquid 可以完成这项工作，我喜欢类似 Django 的语法。

# sql - 更好地使用大小或依靠收集？

> ID：11894349
> 
> 赞同：1
> 
> 时间：2012-08-10T01:39:06.663
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, postgresql-9.1

计算集合时。通过大小或计数来做更好吗？

大小 = 红宝石 ( `@foobars.size`)

计数 = SQL ( `@foobars.count`)

我还注意到，`count`再次访问数据库。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T03:35:12.530

我倾向于建议使用`size`一切，只是因为它更安全。人们使用`size`.

以下是它们的工作方式：

`length`:length 将返回数组中元素的数量，或者以其他方式加载的集合 - 关键是无论如何都会在此处加载集合。因此，如果您正在使用 activerecord 关联，它会将元素从 DB 拉到内存中，然后返回数字。

`count`:count 发出一个数据库查询，所以如果你已经有一个数组，那么它对你的数据库的调用是毫无意义的。

`size`: 两全其美 - size 检查您正在使用的类型，然后使用看起来更合适的类型（因此，如果您有一个数组，它将使用长度；如果您有一个未检索的`ActiveRecord::Association`，它将使用计数，等等）。

来源： [http ://blog.hasmanythrough.com/2008/2/27/count-length-size/](http://blog.hasmanythrough.com/2008/2/27/count-length-size/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:57:58.823

这取决于实际情况。在您展示的示例中，我将使用它，`size`因为您已经加载了集合，并且调用`size`将只检查数组的长度。正如您所注意到的，`count`将执行额外的数据库查询，您真的想避免这种情况。

但是，在您只想显示 Foobar 的数量而不显示这些对象的情况下，我会选择它，`count`因为它不会将实例加载到内存中，只返回记录的数量。

# android - Service Broadcaster/Runnable 不会停止

> ID：11894352
> 
> 赞同：0
> 
> 时间：2012-08-10T01:39:53.480
> 
> 标签：android, service, android-service, broadcast, runnable

我有一个广播公司的 Foregound Service。

```
@Override
public int onStartCommand(Intent intent, int flags, int startId) {
    // Service  
    Log.d("Service","Service started");

    startTime = intent.getLongExtra("STARTTIME", 0);
    endTime = intent.getLongExtra("ENDTIME", 0);
    isRunning = true;

    postNotification();

    // Broadcaster
    handler.removeCallbacks(updateRunnable);
    handler.postDelayed(updateRunnable, DELAY);

    return START_STICKY;
} 
```

当我尝试停止服务时，`onDestroy()`运行并且一切都很好，但是`updateRunnable`继续进行，所以广播仍然发生。

```
private Runnable updateRunnable = new Runnable() {
    public void run() {

        Log.d("Service", "run");            
        currentTime = System.currentTimeMillis();

        if(endTime > 0 && (currentTime-startTime) >= endTime) {
            isRunning = false;

            // Alarm
            AlarmNotification alarmNotification = new AlarmNotification(context);
            alarmNotification.startAlarm();

            // Notification
            AppNotification notify = new AppNotification(context);
            notify.stopNotification();

            update();

            // Tried them all:
            stopService(intentBroadcaster);
            stopForeground(true);
            stopSelf();
        } else {
            update();
        }
    handler.postDelayed(this, 1000); // 1 seconds
    }
}; 
```

如您所见，我已经尝试了所有我能想到的停止命令。我在这里做错了什么？如何停止广播/可运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:09:01.030

您的广播器继续运行，因为您的应用程序进程仍在运行，因此您的线程将继续执行，除非您告诉它不要这样做。

在你的 run 方法中很容易停止你的线程：

```
private boolean shouldContinue = true;
private Runnable updateRunnable = new Runnable() {
    public void run(){
         // ... whaterver your doing
         if(shouldContinue){
             handler.postDelayed(this, 1000);
         }
    }
};

public void onDestroy(){
    shouldContinue = false;
} 
```

# objective-c - 实施 iAd 横幅

> ID：11894358
> 
> 赞同：0
> 
> 时间：2012-08-10T01:40:39.307
> 
> 标签：objective-c, ios, iad

我刚刚在 App Store 上发布了一个带有 iAd 横幅的应用程序。当我下载它以检查广告时，我只看到一个纯白色的水平矩形，即使它显示“直播：此应用正在接收直播广告”。开发中。

![在此处输入图像描述](../Images/7907974634dc817ee79e927b4a2a5f83.png)

```
adView = [[ADBannerView alloc] initWithFrame:CGRectZero];
[adView setCurrentContentSizeIdentifier:ADBannerContentSizeIdentifierLandscape];
[adView setDelegate:self];
[self.view addSubview:adView];
[self.view bringSubviewToFront:adView];
    - (BOOL)bannerViewActionShouldBegin:(ADBannerView *)banner willLeaveApplication:(BOOL)willLeave
    {
        return YES;
    } 
```

我的性能图表中的所有内容都为零，除了 715 个请求。这是什么意思？

另外，iAd 是否可以确定用户的位置，以便苹果可以投放本地公司的广告？例如，用户在日本，iAd 会只展示来自日本的广告吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:52:05.667

我认为没有可用的广告，因此您的应用会获得`nil`价值。我没有看到任何检查，所以无论它是否为 nil，您的应用程序都会尝试显示它得到的内容，这可能是 nil。因此，您最终会得到一个没有链接的空白广告。

我建议在下一个版本中进行检查和/或使用 AdMob 之类的后备方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:44:42.563

它在模拟器中是否有效，我认为这不是编程错误，而是苹果方面的技术错误。很多开发者都遇到过这种情况： [程序中看不到iAd？](https://stackoverflow.com/questions/3361464/can-not-see-iad-in-program)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-29T01:26:37.240

您需要检查您是否`ADBannerView`收到广告，然后相应地显示或隐藏它。

```
-(void)bannerViewDidLoadAd:(ADBannerView *)banner {
        // Display banner
        adView.alpha = 1.0;
}

-(void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error {
        // Hide banner
        adView.alpha = 0.0;
} 
```

# android - 复制数据库文件[Android]

> ID：11894365
> 
> 赞同：0
> 
> 时间：2012-08-10T01:41:26.930
> 
> 标签：android

我正在使用一个必须下载大量数据并将它们插入数据库的应用程序。我让它在一个线程上工作。但问题是，当线程进行插入时，当我的应用程序从 db 读取时，会发生 db lock 错误。所以我正在考虑一种避免这种情况的方法：复制现有的 db 文件，让一个线程对这个副本进行插入，而我的应用程序从原始文件中读取，直到插入完成。然后删除原始的并将副本重命名为原始的。我的问题是，我的方法可行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:49:01.423

我在上次应用程序开发过程中遇到了同样的问题。我最终使用了 ContentProviders。使用 ContentProvider，这将解决您的问题。

# grails - 为什么我的 Groovy 对象初始化程序无法设置属性？

> ID：11894366
> 
> 赞同：1
> 
> 时间：2012-08-10T01:41:35.760
> 
> 标签：grails, groovy, grails-2.0

我有一个像这样的 Groovy 类：

```
class Person {

    String firstName
    String lastName
    Status status = StatusEnum.ACTIVE
} 
```

我正在使用对象初始化器创建它的一个实例：

```
def person = new Person(
    firstName: "Bob", lastName: "Yelo", status: StatusEnum.INACTIVE) 
```

但是，这不会修改此人的状态，它仍然是`ACTIVE`. 我必须明确声明它：

```
person.status = StatusEnum.INACTIVE 
```

哪个正确设置了状态。有谁知道为什么我必须明确设置它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T04:17:40.620

我猜这与字段的类型有关，`Status`而不是`StatusEnum`？

像这样声明它是有效的，因为你建议它应该是 groovy 控制台：

```
enum StatusEnum {
    ACTIVE, INACTIVE
}

class Person {
    String firstName
    String lastName
    StatusEnum status = StatusEnum.ACTIVE
}

def person = new Person(firstName: "Bob", lastName: "Yelo", status: StatusEnum.INACTIVE)

assert StatusEnum.INACTIVE == person.status 
```

# c# - 即使没有重复文件也会出现 YesNo 对话框

> ID：11894369
> 
> 赞同：0
> 
> 时间：2012-08-10T01:41:57.933
> 
> 标签：c#, winforms

我试图确保用户不会下载将替换现有下载（相同）文件的文件。因此，我尝试创建 YesNo 对话框供用户确认。但是，即使该文件夹中没有“sample.xml”，当用户单击下载按钮时，YesNo 对话框仍然会出现。我可以知道我在哪里做错了吗？我缺乏编程知识，对不起，请多多包涵。

我的代码如下：

```
private void btnDownloadXML2_Click(object sender, EventArgs e)
{
    if (@"..\..\sharePriceXML\" + txtSharePriceSymbol.Text.ToString() + ".xml" != null)
    {
        DialogResult dialogResult = MessageBox.Show("Are you sure you want to re-download the file? This will replace the old file!", "Warning", MessageBoxButtons.YesNo);
        if (dialogResult == DialogResult.Yes)
        {
            using (WebClient client = new WebClient())
            {
                client.DownloadFile("http://www.lse.co.uk/chat/" + txtSharePriceSymbol.Text.ToString(),
                                    @"..\..\sharePriceXML\" + txtSharePriceSymbol.Text.ToString() + ".xml");
            }
            MessageBox.Show("Download Completed! File has been placed in the folder sharePriceXML!");
        }
        else if (dialogResult == DialogResult.No)
        {
            MessageBox.Show("The file is not downloaded. Your old file remains.");
        }
    }
    else if (@"..\..\sharePriceXML\" + txtSharePriceSymbol.Text.ToString() + ".xml" == null)
    {
        using (WebClient client = new WebClient())
        {
            client.DownloadFile("http://www.lse.co.uk/chat/" + txtSharePriceSymbol.Text.ToString(),
                                @"..\..\sharePriceXML\" + txtSharePriceSymbol.Text.ToString() + ".xml");
        }
        MessageBox.Show("Download Completed! File has been placed in the folder sharePriceXML!");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T01:44:48.307

您正在将文件路径作为字符串检查以查看它是否为空。它永远不会为空，因为它具有文件路径。

您将需要使用`File.Exists()`. 而不是这个：

```
if (@"..\..\sharePriceXML\" + txtSharePriceSymbol.Text.ToString() + ".xml" != null) 
```

用这个：

```
if (File.Exists(@"..\..\sharePriceXML\" + txtSharePriceSymbol.Text.ToString() + ".xml")) 
```

# windows-phone-7 - 如何在 WP7 和 Azure 项目之间共享模型

> ID：11894372
> 
> 赞同：0
> 
> 时间：2012-08-10T01:42:40.613
> 
> 标签：windows-phone-7, mvvm, azure

我有一个 WP7 项目，它将调用 Azure 中的 REST Web 服务（MVC4 WebApi）。

我的 WP7 项目有模型，它序列化为 JSON，然后发送到 Web 服务。

Web 服务对从 WP7 发送的数据进行反序列化，并在将模型保存到 Azure 表存储之前再次实例化模型。

如何在项目之间共享模型类？现在我只是复制 cs 文件，如果我对模型进行更改，我必须更新这两个文件集。我希望能够从两个项目中引用一个简单的类库项目，但 WP7 无法处理。

我该怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T06:05:24.253

这个问题有很多解决方案：

*   您可以使用 T4 模板来读取实体并在您的 WP7 项目中生成一个类，该类仅包含对象的属性而不参考表存储细节（如 TableStorageEntity）：[http ://weblogs.asp.net/cibrax/archive /2009/03/11/code-generation-with-t4-an-entities-to-dto-example.aspx](http://weblogs.asp.net/cibrax/archive/2009/03/11/code-generation-with-t4-an-entities-to-dto-example.aspx)

*   您可以将实体拆分为 2 个文件，一个具有 TableStorage 特性，如 TableStorageEntity，另一个文件仅包含实体的属性（为此使用部分类）。然后，您可以将仅包含 WP7 项目中的属性的文件添加[为链接](http://visualstudiohacks.com/options/add-an-existing-file-to-a-project-without-copying-it/)。

*   手动创建一个 DTO（或任何你称之为的）类，并使用 AutoMapper 之类的东西在 DTO 和 TableStorage 实体之间进行映射。将 DTO 存储在可[移植库](http://msdn.microsoft.com/en-us/library/gg597391.aspx)中，以便各种项目都可以使用它。在我看来，这是最好的解决方案，因为您不想将您的实体完全暴露给“外部世界”。一个例子是用户列表。您不想返回所有字段，包括密码、哈希...和其他敏感信息。最好有一个单独的类，它只包含您想要在外部公开的信息。

# ruby - 像 Smalltalk 一样浏览 Ruby 代码？

> ID：11894374
> 
> 赞同：7
> 
> 时间：2012-08-10T01:43:02.117
> 
> 标签：ruby

Smalltalk Class Hierarchy Browser 最接近的等价物是什么？我见过一些像[这样](http://www.lovettsoftware.com/blogengine.net/post/2012/01/27/Ruby-Class-Hierarchy-to-DGML.aspx)的解决方法，但它似乎不可编写脚本。

![Smalltalk 类层次结构浏览器](../Images/afebdd50caefff0025d3c1e4983a75a4.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T02:24:03.417

真的没有，至少没有类似于 Smalltalk 的 UI，包括静态和动态行为。

Eclipse 和 IntelliJ 都具有一些结构洞察力。Eclipse 有一个类似于浏览器的视图。两者最大的问题是，除非您正在处理活动对象（例如，调试），否则您不一定知道对象的所有行为，因为有些行为是在运行时定义的。没有图像或部分运行时的静态视图无法提供完整的图片。

IntelliJ 在解决问题方面做得不错。例如，带有 的类`attr_accessor :foo`将在结构窗格中显示`@foo`实例变量。不过，我不确定您是否可以将 UI 配置为更像浏览器；Eclipse 在这方面做得更好——每个“级别”都可以单独添加。

^(*（自 1994-95 年以来，我一直觉得我们一直在倒退，直到最近 IDE 才变得足够聪明，让我恢复了使用 Smalltalk/Lisp 的一些生产力。Smalltalk 基于图像的运行时在以下方面提供了很多优势对此。）*)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T14:52:46.360

为了更有趣，您可以拍摄[Moose](http://www.moosetechnology.org)图像，使用 PetitParser 和 Glamour 代码浏览器编写 Ruby 解析器。那将提供一个 Smalltalk UI :)

[编辑] 哦，有人不喜欢这个答案。小心解释为什么？这是一个非常好的解决方案。

# javascript - 带有字符位置的正则表达式验证

> ID：11894376
> 
> 赞同：2
> 
> 时间：2012-08-10T01:43:08.553
> 
> 标签：javascript, regex

您好，我需要有关在 javascript 中使用正则表达式进行验证的帮助

我需要这样的东西。

第一个字符应该是指定的字符，例如 A、B 或 C。接下来的 3 个字符应该是数字。

例如：A123、B345、C234。

不允许使用 D123。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T01:48:02.173

这对我有用：

```
var rgx = /^(?:A|B|C)\d{3}$/;

alert('A123'.match(rgx)); // A123
alert('D123'.match(rgx)); // null
alert('B986'.match(rgx)); // B986 
```

分解：

*   `^`匹配字符串的开头
*   `(?:A|B|C)`匹配 A 或 B 或 C 但不捕获它
*   `\d{3}`连续匹配 3 位数字
*   `$`匹配字符串的结尾

因此`'A12'`无效，因为没有 3 位数字，也不会`' A123'`因为前导空格，也不会`'A123 hello'`因为匹配不在字符串的开头和结尾。

要使其不区分大小写，`i`请在`/`正则表达式末尾添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T01:49:04.620

试试这个正则表达式：

```
/^[a-c]\d{3}$/i 
```

# ruby-on-rails - 如何在 Rails 表单关联列表中设置默认选项？

> ID：11894380
> 
> 赞同：0
> 
> 时间：2012-08-10T01:43:39.583
> 
> 标签：ruby-on-rails, forms, rails-activerecord

我有两个模型类：目标和目标。一个目标有许多目标，一个目标属于一个目标。

我创建了一个页面，用于通过表单创建新目标。在页面的控制器中，我正在设置一个变量的值，`@default_goal`如下所示：

```
@objective = Objective.new

if params.has_key?(:default_goal)
    @default_goal = Goal.find(params[:default_goal])
end 
```

然后，在我的表单中，我想将该变量设置为关联下拉列表中的默认目标。我尝试了以下方法，但似乎不起作用：

```
<%= simple_form_for @objective do |f| %>
    <%= f.association :goal, :prompt => "Select a goal", :default => @default_goal %>
<% end %> 
```

怎么做到呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:59:15.650

啊，答案很明显。与其在视图表单中设置默认值，不如在控制器中的记录本身上完成。例子：

```
@objective = Objective.new

if params.has_key?(:default_goal)
    @objective.goal = Goal.find(params[:default_goal])
end 
```

这将自动选择它作为视图表单关联列表中的默认选项。

# java - JavaFX、堆积条形图和 CSS

> ID：11894383
> 
> 赞同：3
> 
> 时间：2012-08-10T01:43:51.677
> 
> 标签：java, css, charts, javafx-2

我已经使用 JavaFX 几个月了，并且对 CSS 和图表有疑问。我有一个堆积条形图，我有几个我使用的系列 - 假设它们是系列 A、B、C、D 和 E。当我生成图表时，并非所有系列都会在图表中，例如一些图表可能有 A、B 和 C，其他人只有 B 和 E，而另一个可能有所有 5 个。基本上我是根据我正在使用的数据集以编程方式生成系列。

所以在这种情况下，我希望每个图表上的系列颜色相同。当我生成这些时，如果我只有 B 和 E 反映这些颜色的 css 类名称是：

.default-color0.chart-bar 和 .default-color1.chart-bar - 这里只是设置系列订单的颜色 - 所以系列 1 将获得“..color0.chart..”定义，系列 2“ ..color1.chart..”等。当我在处理数据之前不知道哪个是第一个时，我需要在代码中动态设置这些数据。

我找到的唯一解决方案是将堆叠条形图的样式表设置为我创建的预编译 CSS 文件。这很好用，下面是我如何在代码中执行此操作的示例。

```
myStackedBarChart.getStylesheets().add("/myapp/chartSeriesColors.css"); 
```

唯一的问题是因为位置 1 中的系列未知，我必须为可能系列的每个排列创建 CSS 文件，我知道这是一个糟糕的解决方案。

我到处寻找在运行时动态设置系列 CSS 的方法，但没有找到这个 - 有没有办法做到这一点。基本上想要这样设置以下 CSS 类定义：

```
.default-color0.chart-bar { -fx-bar-fill: #<a color I would set at runtime>; }
.default-color1.chart-bar { -fx-bar-fill: #<a color I would set at runtime>; } 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T07:30:58.090

图表在舞台上显示后：

```
for (Node n: chart.lookupAll(".default-color0.chart-bar")) n.setStyle("-fx-bar-fill: azure;"); 
```

# java - 任何适用于 Linux 上 ARM 架构的 Web 和 Java IDE？

> ID：11894384
> 
> 赞同：7
> 
> 时间：2012-08-10T01:44:01.363
> 
> 标签：java, linux, ide, arm, development-environment

我目前在 ARMv7 微处理器（又名我的 android 手机。;)）上运行 Debian Linux，它运行得非常好，没有任何问题。与许多其他基于 arm 的 linux 发行版相比，为 arm 编译的大量应用程序支持令人惊讶。

我很想将它用于一些 Web 开发以及 Java 编程和编译，但是我在尝试找到任何独立于架构或为 ARM 处理器编译的 IDE 时遇到了一些麻烦。

我真正好奇的一个是 IntelliJ IDEA。但我无法弄清楚它是在架构上独立还是仅支持 x86。

我也相信 Netbeans 已经为 NetBeans 做好了准备和编译，但我不是它的大用户，所以我更愿意使用我经常使用的其中一个。但如果涉及到它，并且它确实支持手臂，我肯定会使用它。

那么大家都知道些什么呢？是否有任何为 arm 编译的程序适合我的目的？还是我被 Vim 卡住了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:14:34.673

好吧，尝试永远不会有坏处:)

您是否从[http://www.oracle.com/technetwork/java/embedded/downloads/javase/index.html](http://www.oracle.com/technetwork/java/embedded/downloads/javase/index.html)下载了适用于 ARM 的 JRE ？获取它并下载适用于 Linux 的 IntelliJ 11 社区版并试一试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-14T22:31:27.560

在三星 Chromebook Arm 上，Eclipse 在运行[Crouton](https://github.com/dnschneid/crouton)和 Ubuntu 时工作。在命令行中，输入：

```
sudo apt-get install eclipse 
```

Ubuntu 会自动为 arm 安装 Java JDK 6。用适用于 Arm 的 Oracle Java JDK 8 替换它将提高性能

或者，当使用[Chroagh](https://github.com/drinkcat/chroagh)和 Arch Linux 时，Intellij Idea 可以工作。在命令行中，输入：

```
cd /usr/lib
sudo ln -s libgif.so libgif.so.4
pacman -S intellij-idea-community-edition 
```

Intellij Idea 使用适用于 ARM 的 Open-JDK7 安装，但您可以将其替换为适用于 ARM 的 Oracle JDK8。

最后，我没有在 Ubuntu 或 Arch 上安装 Android-Studio 或 Android SDK for Eclipse。仍在寻找这个解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-14T12:20:01.793

即使硬件现在足够强大，使用 ARM 桌面级硬件进行开发还为时过早。

我已经设法在 Ubuntu 12.04（OpenJDK7 和现在的 Oracle JDK（用于 ARM/Linux 8 EA）下的 XE303C Chromebook 上运行了一些更大的 Swing 应用程序，但我在 Java IDE 上没有取得太大成功。

Netbeans 7.3 在闪屏后无法在两个 JRE 上启动。

Eclipse 虽然在 repos 中，所以它可以工作。（我是 Netbeans 人，所以我没有尝试过）

# ruby-on-rails-3 - ActiveRecord 查询

> ID：11894385
> 
> 赞同：1
> 
> 时间：2012-08-10T01:44:04.127
> 
> 标签：ruby-on-rails-3, activerecord

我有`Task`桌子`Project`，项目有很多任务。

如何获取每个项目中所有任务的计数，按任务计数降序排列？

我只是想出了`Task.group('project_id')`，没有任何进一步的。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:03:48.990

只需使用`count`after `group`, like `Task.group(:project_id).count`，这将为您提供一个哈希值，其中`project_id`作为键和任务数作为值。然后你可以使用[Enumerable#sort_by](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-sort_by)对它们进行排序。

# java - 如何在 JSP 中加载正文中的 CSS 文件？

> ID：11894386
> 
> 赞同：0
> 
> 时间：2012-08-10T01:44:07.493
> 
> 标签：java, html, css, jsp

这几天在学习JSP，真的很想在body序列的时候放一些css文件到头部。但我无法弄清楚Java编码。

> 如果你想在页面中间加载它，你可以使用一个 javascript 函数，它与这里的第一段相同，除了它删除出现在 body 中的对象，并将其附加到 head 对象。如果我使用 ajax 更新页面，我会这样做。[html文件正文中的外部css](https://stackoverflow.com/questions/8311569/external-css-in-body-of-html-file)

我在其他问题上看到了这个答案，我很好奇该怎么做？我也发现了如何在 Jquery 上做到这一点，但无论如何“JAVA 方式”有吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T02:05:25.650

当 JSP 到达浏览器时，它实际上只是 HTML。CSS 应该在`head`HTML 文档的元素中导入，而不是`body`. CSS 可以在`style`body 元素的属性中“运行”定义，但这更难维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T03:32:01.640

您可以像这样在 jsp 头标签中声明 css 文件；

```
 <link rel="stylesheet" href="../css/style.css" type="text/css"></link> 
```

你可以在你的jsp页面中使用它。

# python - Django 表单提交不刷新用户看到的内容

> ID：11894387
> 
> 赞同：0
> 
> 时间：2012-08-10T01:44:25.527
> 
> 标签：python, django

在我的 django 应用程序中，我有一个`POSTS`与它所在的页面相同的表单（没有 AJAX 或任何东西；超级简单）。我正在使用`inlineformset_factory`表格。

我的属性之一是 many2many 关系的一部分，因此有一个`delete`复选框。如果用户选中该框并提交表单，`POST`则成功通过并刷新页面（就像正常的表单提交一样，sans-ajax）。

但是，当页面再次加载时，应该被删除的项目仍然出现。问题是，如果我对页面进行硬刷新，它们就会消失（因为`POST`成功了。

我在使用的视图函数前面加上`@never_cache`. 否则，我没有什么花哨的东西，也没有 JavaScript 与这个表单交互。

有任何想法吗？我一直坚持这一点（并且是 django n00b，这无济于事）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T12:41:52.927

一般来说，一个好的做法是在成功发布后重定向，以防止多次提交。重定向到相同的网址是可以的。

```
if formset.is_valid():
    formset.save()
    return HttpResponseRedirect("") 
```

浏览器会跟随重定向，被删除的项目不会显示。

# windows - 在 Windows 中使用 openSSH 的 ssh 问题

> ID：11894388
> 
> 赞同：0
> 
> 时间：2012-08-10T01:44:36.213
> 
> 标签：windows, openssh

因此，在我的大学提供的计算机上设置 OpenSSH 以实现无密码输入时，我遇到了一个相当严重的问题。

主要有2个问题：

**1**、第一次使用openSSH创建的默认config和known_hosts文件默认在大学h:目录下。这是一个本地目录，所以我需要连接到本地网络或使用 VPN，但情况并非总是如此。所以第一个问题是，如何更改 openSSH 查找 known_hosts 和配置的位置。

![在此处输入图像描述](../Images/c6c67409798c12d3beca3650d71ab978.png)

**2.**第二个问题是当我尝试设置无密码进入时。就是openssh客户端告诉我我的私钥没有受到保护，这很公平，但是更改权限的最佳方法是什么，因为我已经尝试过Windows属性并且它是无望的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T00:30:40.843

这只能通过更改为不同的 SSH 程序 copSSH 来解决。

# php - PHP照片上传到MySQL和单独的文件夹

> ID：11894392
> 
> 赞同：1
> 
> 时间：2012-08-10T01:45:16.277
> 
> 标签：php, mysql, image-uploading

我确定我在做一些愚蠢的事情，但我已经检查并重新检查了这一点。这是我的照片上传器，旨在将照片文件本身保存到一个文件夹（名为“reccs”），然后将照片的名称保存到我的数据库中的一行。DB 部分运行良好，但我的照片没有显示在文件夹中。它没有显示任何错误并且似乎正在工作（我收到“成功”消息）。确认！

代码如下。感谢您的任何见解。

```
$link = mysql_pconnect($host, $username, $password);
$db = mysql_select_db ($dbname);

$target = "reccs/";
$target = $target . basename($_FILES['photo']['name']);
$pic=($_FILES['photo']['name']);

mysql_query("UPDATE login SET recc = '$pic' WHERE username = '".$_SESSION['user']['username']."'");

if(move_uploaded_file($_FILES['photo']['tmp_name'], $target))
{

echo "The file has been uploaded, and your information has been added to the directory";
 }
else {

echo "Sorry, there was a problem uploading your file.";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T04:21:49.190

reccs 前面应该有一个正斜杠吗？在您知道 move_upload_file 成功之后，在 if 语句中似乎 mysql 更新查询会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T04:24:51.833

尝试;

```
if(move_uploaded_file($pic, $target)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T04:38:43.310

根据您的服务器设置，您可能必须将 $target 设置为绝对路径而不是相对路径。至少它应该是你的主目录的绝对目录，所以如果reccs 是你的根站点目录中的一个目录，那么将$target 设置为/reccs/file.name。

原因是文件默认上传到 /tmp，它是在根 (OS) 级别，而不是托管级别，因此相对于 /tmp 的路径通常没有意义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T04:45:40.507

保存同名的照片是非常糟糕的做法。我会建议你在上传照片之前做下面的事情。

*   提取名称和扩展名。
*   现在检查扩展是否有效。如果有效，则更进一步
*   首先修剪然后用单个空格清除所有多个空格。
*   现在小写文件名并`_`用文件名更改所有空格并附加时间戳。
*   删除所有特殊字符 ( `', " , \ etc`)
*   现在添加具有该扩展名的文件名。

然后存入数据库

# android - 如何解决此模拟器：错误：未知皮肤名称'WVGA800'解决方案

> ID：11894396
> 
> 赞同：40
> 
> 时间：2012-08-10T01:45:44.137
> 
> 标签：android, eclipse, android-emulator, eclipse-plugin

我正在尝试从 eclipse classic ( `juno`) 启动 android 模拟器，它一直给我这个错误：

> 错误：未知皮肤名称“WVGA800”

我使用 eclipse indigo 开发了我的软件，但是由于我安装了 eclipse juno 并导入了相同的项目，它开始给我这个错误。知道为什么吗？以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-29T09:51:24.790

我的解决方案是从 android 虚拟设备管理器创建一个新的自定义虚拟设备并使用它。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2015-06-07T01:54:53.203

对我来说，`Mac OS X`当我在高级设置中选择皮肤时，这个错误就消失了，它说是未知的。 ![在此处输入图像描述](../Images/c9b6006d362602b0f32b8e20bc266d0e.png)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-18T22:18:05.500

我遇到了问题并修复了它...这里问题的主要思想是模拟器找不到您的 android-sdk 基本目录..那么解决方法是什么？在这里我会解释..

1.  找到您安装 sdk 的位置。为此，请转到“开始”->“所有程序”->“Android SDK 工具”->“SDK 管理器”。您将看到该路径写在窗口顶部。将其复制到某处，以便我们稍后需要它。称之为“ SDK路径”
2.  转到开始并右键单击计算机并选择“属性”..然后选择左侧菜单上的最后一个选项“高级系统设置”..转到“高级”选项卡并单击“环境变量..”在第一个列表中查看是否有一个名为“ANDROID_SDK_ROOT”的变量。如果存在，则检查该值是否与我们在步骤 1 中复制的“SDK 路径”相同。如果它们不一样，则更改将它的值添加到 SDK 路径...并检查您的问题是否已解决。如果没有，请转到步骤 3..
3.  如果“ANDROID_SDK_ROOT”与 SDK 路径匹配，或者您的问题在第 2 步中没有解决，那么问题可能是由您的用户名引起的。这是我的实际问题。我的用户名中有特殊字符，例如（！、@、#、...），有时甚至是空格。从技术上讲，因为我自己是一名程序员，当模拟器程序试图打开路径时，它给出了一个错误，因为它由于特殊字符而无法打开它......猜测 SDK 已安装在您的本地应用程序中数据文件夹（ Users\\AppData\Local ）就像我的一样，您应该使用另一个名为“LOCALAPPDATA”的环境变量来访问它，该变量链接到您的本地应用程序数据文件夹。所以在您的 SDK 路径中更改“驱动器：\Users\\ AppData\Local" 到 "%localappdata" 你的问题就解决了..

其他一些java程序也存在同样的问题。我也遇到了 Zend Studio 的问题......

希望能解决你的问题，祝你好运

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-05-18T18:55:51.560

我在 Mac OS X 10.6.8 上的 Android Studio 中遇到了同样的问题，它帮助创建了一个具有目标 API 级别 17 的新 AVD（似乎是标准设置后唯一可用的）。但是，现有的 AVD 都不起作用，只有新的（旧的都使用低于 17 的目标 API）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-05-30T17:49:03.613

它查找皮肤的路径在 ~/.android/avd/$deivce-name$.avd/config.ini

出现这样的问题是因为我已将 avd 复制到另一台计算机，并且该新计算机上的路径不正确。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-06-22T03:41:25.507

如果您愿意这样做，一个解决方案是不使用皮肤。去做这个：

1> 工具/AVD 管理器

2> 选择设备

3> 单击“操作”列中的钢笔图标

4>取消选中“启用设备框架”

或者，如果您想选择一个预先存在的皮肤，您可以单击“高级设置”并向下滚动到“自定义皮肤定义”下拉框。

要查看有关如何创建自定义皮肤的说明，您可以单击“高级设置”并向下滚动到“如何创建自定义硬件皮肤”，链接到此处： [https ://developer.android.com/工作室/运行/管理-avds#skins](https://developer.android.com/studio/run/managing-avds#skins)

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2018-12-04T10:56:09.383

我`avd`在系统之间移动文件时遇到了同样的问题，并且在您的情况下，您已经移动了相关文件。因此，解决方案是转到`.android`文件夹并更改名称中带有`.ini`of的文件`conf`。在那里，您将看到不同资源的路径因您所做的移动而不同。所以输入正确的路径值。

我就是这样解决我的问题的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-10T02:00:30.653

您可能需要更新您的 AVD 管理器。`WVGA800`是模拟器的默认皮肤。您可能会尝试更新您的软件

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-01-22T18:47:03.573

随着您升级 Android Studio，skin.path 值可能不再有效。最好的方法是将这组屏幕复制到您自己的文件夹路径中。这样，屏幕就位于更永久的文件夹中。

以 Macbook 为例：

1.  找到 ~/Applications/Android Studio 1.5.1.0.app/Contents/plugins/android/lib/device-art-resources
2.  将 device-art-resources 文件夹复制到 ~/dev/device-art-resources 之类的位置
3.  对于每个 avd 文件夹中的每个 config.ini，更改 skin.path 值以指向您选择的屏幕

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-02-06T16:55:08.777

**仅安装 SDK**

对于**没有安装**Android Studio但只有SDK的人来说，添加新设备，或者为旧设备更换皮肤是

```
$ANDROID_HOME/tools/android avd 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-05-23T19:29:19.333

我的解决方案是将皮肤更改为**nexus 5x**！

# version-control - 我可以在 mercurial 中创建一个撤消先前合并的分支吗？

> ID：11894399
> 
> 赞同：0
> 
> 时间：2012-08-10T01:45:51.333
> 
> 标签：version-control, mercurial, merge, versioning, branching-and-merging

我想回到一个工作版本，并将自该版本以来我所做的每一个变更集都拉到一个新的分支中。基本上，我已经从主分支合并了几次，并且想将它们撤消。

这可能吗？有什么工具可以帮助我做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T03:11:06.717

如果您的历史记录如下所示：

```
[M1]--[M2]----[M3]---[M4]----[M5]----[M6]
   \            \               \
    [B1]--[B2]--[B3]----[B4]----[B5]----[B6] 
```

其中 M# 是默认分支上的变更集，B# 是现有分支上的变更集，B3 和 B5 是合并变更集，您的目标是获得如下内容：

```
[M1]--[M2]----[M3]---[M4]----[M5]----[M6]
   \
    [B1]--[B2]--[B4]----[B6] 
```

那么你可以这样做：

```
hg update M1
hg branch new_branch_I_want
hg graft B1 B2 B4 B6 
```

这会将这些更改拉入您的新分支。当然，旧分支仍将以其未修改状态存在。由于嫁接跳过合并变更集，您可能可以指定整个 B1::B6 范围，但我没有尝试过。

# php - 计算 WordPress 中的单词出现次数

> ID：11894402
> 
> 赞同：2
> 
> 时间：2012-08-10T01:46:39.410
> 
> 标签：php, mysql, wordpress, count

我目前正在开发一个 Wordpress 插件，该插件将计算特定关键字在整个博客文章中出现的次数并将它们相加。例如，如果关键字是“幽灵”、“椅子”和“拇指”，并且它们在整个博客中出现 4 次，则返回数字 12。

我试过用 PHP 和 MySQL 来处理，但我都被困住了。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:51:02.187

大约 3 秒的谷歌搜索“php str count”之类的内容将揭示答案：[substr_count](http://php.net/manual/en/function.substr-count.php)

```
$content = ''; // fill with your content
$words = array('ghost', 'chair', 'thumb');
$count = 0;
foreach ($words as $word) {
  $count += substr_count($content, $word);
}
echo $count; 
```

# c# - 从 ViewModel 回调到 View

> ID：11894403
> 
> 赞同：1
> 
> 时间：2012-08-10T01:47:12.173
> 
> 标签：c#, view, model, callback, action

我的视图调用 ViewModel 中的一个方法来获取数据。获取数据后，我根据从 ViewModel 返回的数据构建我的视图（网格）。

View Model 中的 getData() 方法在 BackgroundWorker 线程中运行。现在我的问题是如何在 View 完成获取所有数据后返回 View ？

```
 ViewModel
    {
       getData()
       {
            WorkerMethods()
            WorkerCompletedMethod()
            {
               Refresh()
            }
       }

       Refresh()
       {
           WorkerMethod()
           WorkerCompleted()
           {
                 data - Retrieved.
                 This is where all the calls are really DONE
           }
       }

     } 
```

从视图中，我会打电话给

```
View()
{
     VM.getData()
     //Before I call this method, I want to make sure Refresh() is completed
     BuildUI()
} 
```

我希望仅在 VM.getData() 完全执行之后才执行 BuildUI() 方法，然后使用 Refresh() 方法完成，这就是我需要能够动态构建 UI 的数据。

* * *

这就是我要做的。如果这不是正确的方法，请纠正我。

在后面的查看代码中，

```
 View
  {

      public delegate void DelegateRefresh();
      Init()
      {
          DelegateRefresh fetcher = RefreshData;
          fetcher.BeginInvoke(null, null);
      }

      public void RefreshData()
      {
        _viewModel.GetData();
        **while (_viewModel.IsBusy)**
        {               
            continue;
        }
        BuildUI();
      }

      BuildUI()
      {
         //Code to build the UI Dynamically using the data from VM.
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:12:07.563

`BackgroundWorker`完成工作后，您应该检索数据。您的视图模型应该实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/system.componentmodel.inotifypropertychanged.aspx)接口并通过视图绑定到的属性公开数据。然后，视图模型可以在数据可用时通知视图（`BackgroundWorker`即已完成其工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T04:48:18.423

一种方法是使用消息传递。也就是说，在视图上注册您的消息，然后从视图模型向视图发送消息，当收到此消息时，您可以调用您的`BuildUI`方法。

例如，如果您使用的是 MvvmLight 框架，这是一种将错误消息传回以显示在对话框中的方法。您可能不想显示对话框（我手头有此代码），但过程是相同的，只是注册和发送的消息类型不同。

视图模型：

```
public class ErrorMessage : DialogMessage
{
    // See MvvmLight docs for more details, I've omitted constructor(s)

    /// <summary>
    /// Registers the specified recipient.
    /// </summary>
    /// <param name="recipient">The recipient of the message.</param>
    /// <param name="action">The action to perform when a message is sent.</param>
    public static void Register(object recipient, Action<ErrorMessage> action)
    {
        Messenger.Default.Register<ErrorMessage>(recipient, action);
    }

    /// <summary>
    /// Sends error dialog message to all registered recipients.
    /// </summary>
    public void Send()
    {
        Messenger.Default.Send<ErrorMessage>(this);
    }
 }

public class SomeViewModel : ViewModelBase
{
    public void SendErrorMessage(string message)
    {
        var errorMessage = new ErrorMessage(message);
        errorMessage.Send(); 
        // Or in your case, when the background worker is completed.          
    }
} 
```

看法：

```
public partial class SomeView : Window
{
     public SomeView()
     {
        InitializeComponent();
        ErrorMessage.Register(this, msg =>
        {
            MessageBoxResult result = MessageBox.Show(msg.Content, msg.Caption,
                msg.Button, msg.Icon, msg.DefaultResult, msg.Options);
            msg.ProcessCallback(result);
            // Or in your case, invoke BuildUI() method.
        });
     } 
```

# algorithm - 三点抛物线插值求局部最小值的算法

> ID：11894408
> 
> 赞同：0
> 
> 时间：2012-08-10T01:47:45.090
> 
> 标签：algorithm, math, computational-geometry, interpolation, curve-fitting

> **可能重复：**
> [如何在给定三个点的情况下计算抛物线的顶点](https://stackoverflow.com/questions/717762/how-to-calculate-the-vertex-of-a-parabola-given-three-points)

我有三个 2D 点 P1、P2 和 P3，每个点由一对坐标 (Xn, Yn) 组成，假设：

1.  X1 < X2 < X3；
2.  Y2 < Y1;
3.  Y2 < Y3;

从几何上讲，它们形成一个“V”。

我需要的是一种获得通过三个点的抛物线顶点坐标的方法，它的凹面朝上，以便将其视为采样不足曲线的局部最小值。

我正在使用 Python，并采用[了一种在网上找到的算法](http://www.fon.hum.uva.nl/praat/manual/vector_peak_interpolation.html)，但它似乎只在 V 的左腿较高时才有效。我想我在调整它时犯了一些错误 - 以避免原始算法的一些不希望的索引依赖行为：

```
def parabolic_interpolation(p1, p2, p3):
    x1, y1 = p1
    x2, y2 = p2
    x3, y3 = p3
    dx = x2 - x1
    dy = (y3 - y1) * 0.5
    d2y = 2 * y2 - y1 - y2
    di = dy/d2y
    xout = x2 + di * dx
    yout = y2 + (dy**2/d2y)*0.5
    return (xout,yout) 
```

我确信通过三个点进行插值以找到局部最小值（或最大值）的问题可能已经在计算上得到解决，因此我将不胜感激任何帮助以使其正确。

谢谢阅读！

# c++ - 用 C++ 解析 HTTP 请求流：任何非状态机方式具有相同或更好的速度？

> ID：11894409
> 
> 赞同：-1
> 
> 时间：2012-08-10T01:47:49.007
> 
> 标签：c++, c, http, parsing

所以我们有一些简单的[请求](http://code.google.com/p/cloudobserver/source/browse/trunk/CloudClient/src/utils/http/http_request.cpp)/[响应](http://code.google.com/p/cloudobserver/source/browse/trunk/CloudClient/src/utils/http/http_response.cpp)解析器。它们基本上是可以用纯 C 代码创建的简单状态机。我想知道解析 HTTP 1.0+ 请求/响应流的 C++ 方法是什么，它与 C 类似物一样快或更快，但从代码方面来说会更甜？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:59:26.963

您可以使用[`Spirit.Qi`](http://boost-spirit.com/home/)为数据构建解析器，而不是编写显式状态机。这通常会产生相当慢的编译，但执行起来很有竞争力。

您可能想查看@sehe[先前的回答](https://stackoverflow.com/a/7458173/179910)，以获取有关使用 Spirit 解析二进制数据的一些灵感。

# jquery - 是否有代码可以使 div 在点击时消失/出现？

> ID：11894410
> 
> 赞同：-1
> 
> 时间：2012-08-10T01:47:51.110
> 
> 标签：jquery, html

我需要一些代码可以在单击链接时显示 div。

一旦这个 div 出现，用户应该能够点击他们点击的相同链接以使这个 div 出现；使当前的 div 消失，第二个 div 在屏幕上占据它的位置。

在这第二个 div 中，用户应该能够关闭 div 并位于第一格，在页面上单击时打开/关闭 div 的链接。

任何人都可以告诉我或指导我一些代码，以便我可以实现我上面描述的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T01:56:12.467

使用带有以下代码的jquery：

```
 $(document).ready(function(){
    $("#link").on("click", function() {
      $("#id_of_the_div").toggle();
    })
  }); 
```

# android - 想在我的偏好中有一个按钮（android）

> ID：11894412
> 
> 赞同：1
> 
> 时间：2012-08-10T01:48:02.390
> 
> 标签：android

我有一个名为 prefs.xml 的单独偏好 xml，这是它的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <Preference 
        android:key="clear"
        android:summary="Press if you want to clear your data"
        android:title="Clear Data?" />
     <CheckBoxPreference
        android:defaultValue="true"
        android:key="tut"
        android:summary="Check if you want to see the tutorial when the app starts"
        android:title="Tutorial Show/Hide" />

</PreferenceScreen> 
```

编辑：我认为偏好的东西将是按钮，但我真的不知道它的作用或如何使用它

我想要做的是能够按下按钮或按下按钮时执行其他操作，我不知道将代码放在哪里或我应该做什么，我的 prefs.java 文件的代码在这里：

```
package com.mittereder.rockpaper;

import android.os.Bundle;
import android.preference.PreferenceActivity;

public class prefs extends PreferenceActivity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.prefs);
    }

} 
```

如果这有帮助的话

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T02:43:31.653

试试这个

```
public class prefs extends PreferenceActivity implements OnPreferenceClickListener{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.prefs

        findPreference("clear").setOnPreferenceClickListener(this);
    }

    @Override
    public boolean onPreferenceClick(Preference p) {

     //your code here 

             Toast.makeText(getApplicationContext(), "je suis la " + p.getTitle(),  Toast.LENGTH_LONG).show();
            return true;
        }

} 
```

# perl - MIME::Lite 和消息 ID

> ID：11894413
> 
> 赞同：1
> 
> 时间：2012-08-10T01:48:14.793
> 
> 标签：perl, mime-message

使用[MIME::Lite](http://search.cpan.org/perldoc?MIME%3a%3aLite)时，有没有办法在接受消息时获取 MTA 分配的消息 ID？这是我的代码片段。

```
$msg = MIME::Lite->new(
    From    => $from_address,
    To      => $recipient,
    Bcc     => $recipient,
    Subject => $subject,
    Type    => 'text/html',
    Data    => $text);

$status = $msg->send(); 
```

我尝试`Debug=>1`在`$msg->send`命令中设置，但`$status`不包含 Message-ID，调试输出也没有它。

谢谢，瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T03:03:13.530

不，如果您想知道消息 ID，您可以尝试自己设置一个，然后检查您的 MTA 是否使用它，或者覆盖它。

# mysql - MySQL - 本周与去年同一周的总数比较

> ID：11894414
> 
> 赞同：2
> 
> 时间：2012-08-10T01:48:21.687
> 
> 标签：mysql, sql

我如何获得本周与去年同一周的总销售额？

与如何存储日期有关的可能方案有两种，如下所示：

**方案 1**

```
**Sales**

Date          Sales    
-----------------------   
2012-08-10    11040.00
2012-08-09    11500.00
2012-08-08    14060.00
2012-08-07    93000.00
2012-08-06    11200.00
...
2011-08-10    11040.00
2011-08-09    11500.00
2011-08-08    14060.00
2011-08-07    93000.00
2011-08-06    11200.00 
```

**方案 2**

```
**Sales**

year         month       day         Sales
---------------------------------------------       
2012         08          10          11040.00
2012         08          09          11500.00
2012         08          08          14060.00
2012         08          07          23000.00
2012         08          06          11200.00
...
2011         08          10          13040.00
2011         08          09          11500.00
2011         08          08          12060.00
2011         08          07          33000.00
2011         08          06          11250.00 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T03:04:23.323

对于您的第一个场景，加入到同一张表上，`WEEKOFYEAR()`并添加到去年的`YEAR()`：

```
SELECT
  YEARWEEK(thisyear.Date) AS `YearWeek`
  SUM(lastyear.Sales) AS LastYearSales
  SUM(thisyear.Sales) AS ThisYearSales
FROM
  Sales thisyear
  LEFT JOIN Sales lastyear ON
      WEEKOFYEAR(thisyear.Date) = WEEKOFYEAR(lastyear.Date) 
      AND YEAR(thisyear.Date) = (YEAR(lastyear.Date) + 1)
GROUP BY `YearWeek` 
```

第二种情况需要从 3 个单独的值中构建一个日期。我*认为*这会起作用：

```
SELECT
  YEARWEEK(CONCAT_WS('-', thisyear.year, thisyear.month, thisyear.day)) AS `YearWeek`,
  SUM(lastyear.Sales) AS LastYearSales,
  SUM(thisyear.Sales) AS ThisYearSales
FROM
  Sales thisyear
  LEFT JOIN Sales lastyear ON
    WEEKOFYEAR(CONCAT_WS('-', thisyear.year, thisyear.month, thisyear.day)) = WEEKOFYEAR(CONCAT_WS('-', lastyear.year + 1, lastyear.month, lastyear.day))
GROUP BY `YearWeek` 
```

# delphi - Delphi XE 找不到 BPL

> ID：11894418
> 
> 赞同：0
> 
> 时间：2012-08-10T01:48:38.727
> 
> 标签：delphi, ide, bpl

我在 Delphi XE 中遇到问题，我有一个使用 QRDesign（QuickReports 的一部分）的项目。

我查看使用 QRDesign 的单元时遇到的错误是：

“程序无法启动，因为您的计算机中缺少 QRDBASE_DXE.bpl。请尝试重新安装程序以解决此问题。”

如果我不打开该单元，一切都编译得很好。

有趣的是，如果我卸载这个包和另一个包（dclqrd_DXE.bpl - 也是 QRDesign 的一部分），重新启动 IDE，重新编译并重新安装这些包，直到我重新启动 IDE 之前，一切都会再次运行。BPL 位于搜索路径中，并且每个文件仅存在一个副本。

有谁知道可能导致此问题的某些机制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T10:45:43.747

搜索该文件并将其移至 Delphi 的 BPL 目录。它看起来像一个错误的配置。

您可能还需要移动一些 BPL。首先注意目录。

# c# - 什么是白标dll的好方法

> ID：11894425
> 
> 赞同：4
> 
> 时间：2012-08-10T01:49:12.873
> 
> 标签：c#, wpf, visual-studio-2010

用 Visual Studio 给 dll 和 exe 贴上白标签的好方法是什么？

本质上，我们希望能够根据我们为其打包解决方案的客户端更改 dll 和 exe 的名称，例如：

而不是 myCompany.exe 和 myCompany.db.dll，我想要 yourComany.exe 和 yourComany.db.dll 或 acme.exe 和 acme.db.dll 等

**编辑：**

目前，我们正在使用带有 wix 项目的直接 Visual Studio 构建过程来创建 msi。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T02:01:56.537

如果重建它的唯一理由是更改名称，那么您可以首先使用通用的东西吗？想象一下，必须修补 50 个相同的 DLL，并分别构建/部署每个 DLL，因为它们都必须命名为不同的东西。即使它只适用于少数客户，我也不愿意保持这种状态。版本控制也可能很麻烦。

如果您必须这样做，我可能会执行[构建任务](http://msdn.microsoft.com/en-us/library/ms171468)（可以执行相当高级的操作）。您提到您是“打包解决方案”；构建任务的可行性取决于它的打包方式。

为了回应您关于使用特定于客户端的名称命名 EXE 的评论......我的明显建议是让这些应用程序包含尽可能少的代码。

我能想到的最简单的构建集成是创建一个构建后任务，该任务在发布模式下成功编译后运行。然后，该任务可以读取定义唯一名称的配置文件，并将成功构建的 EXE 复制到输出目录。

一些操作可以通过任务配置文件完成：http: [//msdn.microsoft.com/en-us/library/ms171466](http://msdn.microsoft.com/en-us/library/ms171466)。

* * *

或者，您可能想创建一个小应用程序来为您完成所有工作，只需将配置开关传递给它。

例如，这里有一个构建后的小命令，我在成功构建 Web 应用程序时执行该命令来缩小我的 JavaScript/CSS。概念类似：

*   建造
*   执行应用程序（如 msbuild.exe，或您的自定义构建应用程序）
*   将数据传递给可执行文件（如路径、开关等）
*   可执行文件将文件写出

* * *

```
C:\Windows\Microsoft.NET\Framework64\v4.0.30319\msbuild.exe

"$(ProjectDir)Properties\build\minify.xml" 

/p:SourceLocation="$(ProjectDir)client" 

/p:CssOutputFile="$(ProjectDir)client\final\final-full.css" 

/p:JavaScriptOutputDirectory="$(ProjectDir)client\final" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T02:47:19.560

您可以在所有输出程序集（dll 和 exe）上的任何后期构建过程中使用[ILMerge](http://www.microsoft.com/en-us/download/details.aspx?id=17630)，以创建一次性的客户品牌构建。

```
ilmerge /out:CustomerName.exe internalName.dll internalName.exe 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T01:59:16.397

我不知道是否有一种好方法可以在不将项目实际构建为 XYZ 公司的情况下做到这一点。您可以尝试这样的事情，[这](https://stackoverflow.com/questions/2855629/c-vs-net-change-name-of-exe-depending-on-conditional-compilation-symbol)会给您带来所需的结果，但它也会更改程序集的物理名称，这可能会导致依赖性问题。

# php - Magento - 如何管理具有相同类别的两个站点的库存

> ID：11894426
> 
> 赞同：1
> 
> 时间：2012-08-10T01:49:15.683
> 
> 标签：php, magento, csv, categories, inventory

在这篇文章中，我使用site作为物理网站，website作为Magento网站级别。这意味着当谈论两个站点时，即两个完全独立的站点，两个站点意味着一个 Magento 中的两个站点。

在我的场景中，我有两个站点/网站。

第一个是我们可以生产的产品。客户查看网站并下订单，然后我们生产它们。因此，我们没有必要管理此站点/网站上的库存。

第二个是我们有现货的产品，我们会在客户下单后立即发货。所以我们需要控制这个站点/网站上的库存。

我们可以认为第二个站点上的产品是第一个站点的一些剩余部分。所以这两个站点/网站共享相同的类别/目录结构。相同的客户数据、相同的结帐流程以及相同或不同的运输方式。但它们确实有不同的价格、特价和等级价格。

由于有些产品可能已经过时（只会在第二个网站上展示），有些可能是新推出的（只会在第一个网站上展示），因此类别结构之间可能会有轻微的差异。

我的问题是：

1.  我希望两个站点的分类结构完全相同，但是当某个分类中没有任何产品时，该分类不会显示在前端。这可能吗？如果是这样，怎么做？

2.  我查了很多文章。Magento 仅在全球层面或产品层面控制库存。我确实发现一些扩展程序可以管理网站级别的库存，但是这些扩展程序是根据制造商在不同地点有不同仓库的情况使用的。这不是我的情况，在我的场景中事情更简单，我将控制第二个站点/网站的库存，并且根本不管理第一个站点的库存。有什么解决办法吗？我必须创建两个物理独立的站点吗？

3.  如果我们只有很少的产品，这个问题不会困扰我。我将创建两个单独的站点并分别输入这些产品。由于我们有数以万计的产品，我必须通过 CSV 文件导入这些产品。我希望两个站点/网站共享相同的导入过程，这意味着在导入时，第一个站点/网站将忽略`is_in_stock`and`qty`字段并导入描述和规范等其他信息，但第二个站点/网站将导入所有必要的字段包括`is_in_stock`并`qty`相应地管理库存。

顺便说一句：我当然应该在这个 CSV 文件中为这两个站点/网站添加不同的价格字段，并且在导入时，它们会相应地读取不同的字段。我知道会对此进行一些定制，但这超出了本文的主题。

我的问题是我必须为这种情况创建单独的站点吗？如果我必须创建单独的站点，我如何在它们之间共享相同的类别？我怎样才能意识到一个 CSV 导入会影响两个站点/网站，我可以为此使用任何扩展程序吗？任何建议将不胜感激！

# asp.net - 如何向 asp.net 菜单控件添加更多根级别项？

> ID：11894429
> 
> 赞同：0
> 
> 时间：2012-08-10T01:49:42.547
> 
> 标签：asp.net, menu, controls, sitemap

添加了一个菜单控件并选择了新的数据源：SiteMapDataSource1

到目前为止，这是我的 Web.sitemap：

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
    <siteMapNode url="~/Home.aspx" title="Home"  description="Home Page">
      <siteMapNode url="~/PostItem.aspx" title="Post Item"  description="Post a new item" />
    </siteMapNode>
</siteMap> 
```

如何添加更多根级别项目？我可以在已经存在的根级别中创建更多的 siteMapNode，但是如果我在其中添加任何内容，它会给我一个错误。为什么这会导致错误对我来说是有道理的，但我认为显然有一种方法可以让菜单显示多个根级菜单项......但是如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:01:09.870

- 编辑 -

如果要使用 xml 数据集构建 Menu 控件，则可以在根级别有多个节点。这可以通过设计器并在 Menu 控件的 Items 集中指定 MenuItems 来完成，也可以在后面的代码中将 MenuItems 添加到 Items 列表中，或者将其绑定到 xml 数据集。

[MSDN](http://msdn.microsoft.com/en-us/library/ecs0x9w5%28v=VS.80%29.aspx)提供了有关此控件的更多信息。Code Project 有一个关于使用 xml 数据构建菜单控件的[教程。](http://www.codeproject.com/Articles/10315/ASP-NET-Dynamic-XML-Web-Menu-Control-based-on-Java)

- 原来的 -

抱歉，您不能添加多个根级别`siteMapNode`。通常，您会看到它是站点的主要入口点（就像您已配置它一样）。从那里添加额外的导航。

查看[MSDN](http://msdn.microsoft.com/en-us/library/yy2ykkab.aspx)以获取更多信息。

# android - Android非重复纹理背景

> ID：11894434
> 
> 赞同：0
> 
> 时间：2012-08-10T01:50:51.593
> 
> 标签：android, image, background

我有一个 iOS 应用程序，它在我尝试移植到 Android 的每个屏幕上使用独特的纹理背景（想想游戏标题屏幕或其他东西）。在 iOS 上，他们知道分辨率并围绕这些分辨率设计背景。显然，这在 Android 上是不可能的。

将纹理/不可重复背景放入适用于各种屏幕尺寸和纵横比的 Android 的最佳方法是什么？

到目前为止我想到的解决方案是：

1.  适合最短尺寸并允许图像离开屏幕边缘以获得更大尺寸
2.  将背景图像放大并居中，然后在分辨率小于图像时使其超出边缘
3.  拉伸图像以使其适合（这很难看，我想避免它）
4.  为每种分辨率创建不同版本的图像。（这似乎超出了该项目可能的范围。）

据我所知，在 Android 中，1\. 和 2\. 不可能开箱即用，因为背景图像设置视图的大小以匹配它们的大小（你不能告诉它只是延伸到边缘之外，请如果我错了，请纠正我）。

在这种情况下你会使用什么解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:12:39.533

> 为每种分辨率创建不同版本的图像。

您可能知道，Android 可以在具有不同分辨率和屏幕密度的各种设备上运行。要完全兼容所有这些需要一些图形工作；您需要针对每种可能的屏幕密度（在本例中为分辨率）的资源。

有关完整的详细信息，请参阅Android 开发人员文档中的[Supporting Multiple Screens](http://developer.android.com/guide/practices/screens_support.html)。

除非在您的开发过程中出现严重错误，否则您应该`.psd`在创建这些资源时使用原始文件（例如 ）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T02:15:14.103

1.  使用 (match_parent) ImageView 来模拟背景图像。（通过调整imageview的比例类型可以得到第1,2点的结果） [http://developer.android.com/reference/android/widget/ImageView.ScaleType.html](http://developer.android.com/reference/android/widget/ImageView.ScaleType.html)

2.  使用 9-patch 图像。您可以指定可以拉伸图像的哪个部分。对于您的情况，我建议为您的图像添加一个小的“边距”，并使用 9-patch 使其可拉伸。只有边距会被拉伸，保持图像的纵横比。 [安卓开发者9补丁](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)

# ruby-on-rails - 处理管理表单的最佳方法

> ID：11894440
> 
> 赞同：0
> 
> 时间：2012-08-10T01:52:14.990
> 
> 标签：ruby-on-rails, admin

我有一个用户可以发布工作列表的网站 - 没什么太疯狂的，只是一个简单的 job.rb 模型等。我想添加一个管理网站，某些有权访问的人可以查看、编辑和删除已发布的工作.

我已经有一个在作业创建过程中使用的编辑作业表单（用户可以预览然后返回并编辑他们刚刚创建的作业，如果他们对它不满意）。我想尝试在事物的管理方面重新使用这个编辑表单（尽管在不同的模板/包装器中）。

所以在前端我有example.com/job/123/edit，在管理方面我猜我会有类似example.com/admin/job/123的东西。

鉴于以下情况，处理这种情况的最干燥方法是什么：

1.  提交按钮将有不同的文本
2.  更新操作将重定向到不同的页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:09:24.090

也许你可以看看[康康](https://github.com/ryanb/cancan/)

# c# - 使用 fb-login-button div 类和 JQuery

> ID：11894441
> 
> 赞同：0
> 
> 时间：2012-08-10T01:52:27.100
> 
> 标签：c#, facebook

我有一个 FB 登录按钮，想将它绑定到一个函数，但我似乎无法让它工作：

```
<div class="fb-login-button" id="auth-loginlink"></div> 
```

这是我试图将其绑定到我的 fb-login-button 的行

```
$("#auth-loginlink").click(function () { grantPermission(); });

<script type="text/javascript">

    function grantPermission() {
        window.FB.login(function (response) {
          // ... login stuffs
    }

</script> 
```

如果我使用普通的超链接，它将起作用，例如：

```
<a href="#" id="auth-loginlink"> Login</a> 
```

请告诉我我做错了什么。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:26:11.110

如果它真的是一个按钮，不妨使用按钮标签：

```
<button class="fb-login-button" id="auth-loginlink">Login</button> 
```

将您的 javascript 放入脚本标记中，并在处理程序中返回*false ：*

```
<script type="text/javascript">
    $("#auth-loginlink").click(function () { grantPermission(); return false; });

    function grantPermission() {
        window.FB.login(function (response) {
          // ... login stuffs
    }

</script> 
```

... 也可能是一个好主意，`$("#auth-loginlink").button()`但并非完全必要。

注意：如果您的 html 实际上*低于*您的 javascript 代码，则上述内容并不总是有效。

# google-app-engine - Google App Engine - 如何将大文件从数据存储区传输到 Blob 存储区？

> ID：11894442
> 
> 赞同：0
> 
> 时间：2012-08-10T01:52:28.367
> 
> 标签：google-app-engine, google-cloud-datastore

我在常规云存储中有一堆大文件，我想以编程方式将它们移到 blobstore 以使用 mapreduce 库进行进一步处理。（因为有 BlobstoreLineInputReader 但没有 Datastore 版本。）我尝试为 gs 文件创建一个 url 并让 blobstore 尝试自行读取它，我也尝试过缓冲读取，但对于大文件我仍然点击内存错误。（我通过在追加模式下打开并仅在最后完成来避免 blobstore 文件的最后期限超过错误（超过 60 秒）。）似乎应该有一种有效的方法来做到这一点，因为数据存储和 blobstore 都是相同的应用程序上下文，但我还没有找到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T05:01:00.977

我很困惑，因为您在这里几乎可以互换地提到云存储和数据存储。

如果您的数据在 Google Cloud 存储中，那么您可以为文件创建 BlobKeys 并将它们与任何当前的 Blobstore API 一起使用。

IE

```
blobkey = blobstore.create_gs_key('/gs/my_bucket/my_object'). 
```

如果您的文件在数据存储中，那么您需要使用文件 API 将它们移动到 Cloud Storage/Blobstore，然后从那里处理它们。

# objective-c - 尝试构建应用程序时出现 LLVM 编译器 4.0 错误

> ID：11894445
> 
> 赞同：0
> 
> 时间：2012-08-10T01:53:10.100
> 
> 标签：objective-c, ios

> 致命错误：在“/Users/Kylegreenlaw/Downloads/Sound +/Sound +/ViewController.m”中检测到 UTF-16 (LE) 字节顺序标记，但不支持编码生成 1 个错误。

我只是在 .m 文件中添加了这个

```
-(IBAction)buttonPressedWithSound:(id)sender {

    int randomSoundNumber = arc4random() % 4; //random number from 0 to 3

    NSLog(@"random NR = %i", randomSoundNumber);

    NSString *effectTitle;

    switch (randomSoundNumber) {
        case 0:
            effectTitle = @"Come at me BRO!";
            break;
        case 1:
            effectTitle = @"sound2";
            break;
        case 2:
            effectTitle = @"sound3";
            break;
        case 3:
            effectTitle = @"sound4";
            break;

        default:
            break;
    }

    SystemSoundID soundID;

    NSString *soundPath = [[NSBundle mainBundle] pathForResource:effectTitle 
                                                          ofType:@"mp3"];
    NSURL *soundUrl = [NSURL fileURLWithPath:soundPath];

    AudioServicesCreateSystemSoundID ((CFURLRef)soundUrl, &soundID);
    AudioServicesPlaySystemSound(soundID);
} 
```

然后我去运行它，但日志打印了这个错误。发生了什么，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T02:10:00.360

删除方法中的所有代码，然后再次编译 - 如果错误消失，您在复制代码的某个地方有一个坏字符。逐行删除，直到找到带有错误字符的行，然后重新键入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T02:05:52.743

确保您已导入所有必要的文件，您可能错过了导入核心音频或错过将其链接到项目。

# android - 尝试使用 Android SharedPreferences 维护登录状态

> ID：11894447
> 
> 赞同：1
> 
> 时间：2012-08-10T01:53:19.833
> 
> 标签：android, login, sharedpreferences

我有一个扩展应用程序的类：

```
public class myApp extends Application {

    public static boolean isUserLoggedIn = false;
    public static String username = null;
    public static SharedPreferences logInState;

    public static boolean userLogin() {

        return myApp.isUserLoggedIn = true;
    }

    public static boolean userLogout() {

        return myApp.isUserLoggedIn = false;
    }

    public static void setUser(String s) {

        myApp.username = s;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        String PREFS_NAME = "LoginState";
        logInState = getSharedPreferences(PREFS_NAME,
                MODE_PRIVATE);
    }

} 
```

我觉得我只是有一个真/假变量来指示用户是否需要在每次启动应用程序时登录。当然，我也会将用户名存储在 SharedPreference 中，但为了这个问题，我只讨论一个以保持简单。（请记住，用户无需登录即可启动应用程序，但功能有限——他们可以通过溢出菜单登录）。

当用户第一次登录时，我想让偏好设置为 true。 **如何从活动中调用此类扩展应用程序？**

目前我有这个成功的登录尝试：

```
myApp.userLogin();
myApp.setUser(UsernameLogin);
// would like to set SharedPreference var to true here? 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T02:24:57.240

维护用户登录状态首先创建一个名为 PreferenceData 的类。当用户成功登录时，将一个变量设置为 true 并注销，然后在共享首选项中设置为 false。

```
import android.content.Context;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.preference.PreferenceManager;

public class PreferenceData 
{
    static final String PREF_LOGGEDIN_USER_EMAIL = "logged_in_email";
    static final String PREF_USER_LOGGEDIN_STATUS = "logged_in_status";

    public static SharedPreferences getSharedPreferences(Context ctx) 
    {
        return PreferenceManager.getDefaultSharedPreferences(ctx);
    }

    public static void setLoggedInUserEmail(Context ctx, String email) 
    {
        Editor editor = getSharedPreferences(ctx).edit();
        editor.putString(PREF_LOGGEDIN_USER_EMAIL, email);
        editor.commit();
    }

    public static String getLoggedInEmailUser(Context ctx) 
    {
        return getSharedPreferences(ctx).getString(PREF_LOGGEDIN_USER_EMAIL, "");
    }

    public static void setUserLoggedInStatus(Context ctx, boolean status) 
    {
        Editor editor = getSharedPreferences(ctx).edit();
        editor.putBoolean(PREF_USER_LOGGEDIN_STATUS, status);
        editor.commit();
    }

    public static boolean getUserLoggedInStatus(Context ctx) 
    {
        return getSharedPreferences(ctx).getBoolean(PREF_USER_LOGGEDIN_STATUS, false);
    }

    public static void clearLoggedInEmailAddress(Context ctx) 
    {
        Editor editor = getSharedPreferences(ctx).edit();
        editor.remove(PREF_LOGGEDIN_USER_EMAIL);
        editor.remove(PREF_USER_LOGGEDIN_STATUS);
        editor.commit();
    }   
} 
```

现在在活动中，您可以调用它的方法，如下所示。

```
PreferenceData.setUserLoggedInStatus(this,true);   // For set user loggedin status
PreferenceData.getUserLoggedInStatus(this);        // Get User Logged In status . true = login 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-21T12:53:39.933

要使用 sharedpreference 维护用户登录状态，您必须为用户登录会话创建一个名为 SessionManager 的类。当用户成功登录时，将布尔变量设置为 true，当用户注销时，在共享首选项中设置布尔变量 false。类将如下所示：

```
import java.util.HashMap;

import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;

public class SessionManager {
    // Shared Preferences
    SharedPreferences pref;

    // Editor for Shared preferences
    Editor editor;

    // Context
    Context _context;

    // Shared pref mode
    int PRIVATE_MODE = 0;

    // Sharedpref file name
    private static final String PREF_NAME = "AndroidHivePref";

    // All Shared Preferences Keys
    private static final String IS_LOGIN = "IsLoggedIn";

    // User name (make variable public to access from outside)
    public static final String KEY_NAME = "IsLogin";

    // Email address (make variable public to access from outside)
    //public static final String KEY_SITEID = "siteid";

    // Constructor
    public SessionManager(Context context){
        this._context = context;
        pref = _context.getSharedPreferences(PREF_NAME, PRIVATE_MODE);
        editor = pref.edit();
    }

    /**
     * Create login session
     * */
    public void createLoginSession(String checklogin, boolean b){
        // Storing login value as TRUE
        editor.putBoolean(IS_LOGIN, true);

        // Storing name in pref
      //  editor.putString(KEY_NAME, checklogin);

        // Storing email in pref
       // editor.putString(KEY_SITEID, siteid);

        // commit changes
        editor.commit();
    }   

    /**
     * Check login method wil check user login status
     * If false it will redirect user to login page
     * Else won't do anything
     * */
    public void checkLogin(){
        // Check login status
        if(!this.isLoggedIn()){
            // user is not logged in redirect him to Login Activity
            Intent i = new Intent(_context, LoginForm.class);
            // Closing all the Activities
            i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

            // Add new Flag to start new Activity
            i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

            // Staring Login Activity
            _context.startActivity(i);
        }

    }

    /**
     * Get stored session data
     * */
    public HashMap<String, String> getUserDetails(){
        HashMap<String, String> user = new HashMap<String, String>();
        // user name
        user.put(KEY_NAME, pref.getString(KEY_NAME, null));

        // user email id
       // user.put(KEY_EMAIL, pref.getString(KEY_EMAIL, null));

        // return user
        return user;
    }

    /**
     * Clear session details
     * */
    public void logoutUser(){
        // Clearing all data from Shared Preferences
        editor.clear();
        editor.commit();

        // After logout redirect user to Loing Activity
        Intent i = new Intent(_context, LoginForm.class);
        // Closing all the Activities
        i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);

        // Add new Flag to start new Activity
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

        // Staring Login Activity
        _context.startActivity(i);
    }

    /**
     * Quick check for login
     * **/
    // Get Login State
    public boolean isLoggedIn(){
        return pref.getBoolean(IS_LOGIN, false);
    }
} 
```

# ruby - 如何在我的续集类中定义我的表所有者/模式？

> ID：11894449
> 
> 赞同：1
> 
> 时间：2012-08-10T01:54:06.947
> 
> 标签：ruby, sequel

我要查询的表名为`cache.dashboardstats`

我的模型是：

```
class Dashboard < Sequel::Model(:dashboardstats)
 set_schema do
    set_primary_key :dashboardstatid
  end
end 
```

这创建了一个`select * from "dashboardstats";`

如何定义“缓存”的所有者/模式，以便我的查询变为：

`select * from cache."dashboardstats";`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T15:34:35.770

您可以在符号内使用双下划线，或使用一种限定方法来表示限定标识符：

```
:cache__dashboardstats
Sequel.qualify(:cache, :dashboardstats)
:dashboardstats.qualify(:cache) 
```

您可以在模型代码中使用它，例如：

```
class Dashboard < Sequel::Model(:cache__dashboardstats)
end 
```

请注意，我遗漏了您的 set_schema 调用。除非您正在调用 create_table 或类似方法，否则您不应该调用 set_schema，否则它什么也不做。set_schema 里面的 set_primary_key 并不像你想的那样，Sequel 通常可以正确确定主键，所以一般不会手动指定。

# wcf - WCF：为什么合同是在端点上而不是在服务上？

> ID：11894450
> 
> 赞同：2
> 
> 时间：2012-08-10T01:54:09.443
> 
> 标签：wcf, wcf-endpoint

试图真正“获得”端点合同：

我了解提供不同的端点来支持不同的绑定，但是什么时候会为服务定义 n 个端点并使用*不同的*合同？似乎在大多数情况下（bar IMetadataExchange），无论协议如何，端点合同都是相同的，不是吗？

如果大多数情况下所有端点的合同都是相同的，那么在父服务而不是每个端点上定义服务合同是否过于简单（为什么？），同时允许一个在需要时覆盖端点（例如：IMetadataExchange）。

感谢您帮助解决让我彻夜难眠的小问题；-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T04:48:18.550

好的，好吧 -您在标记中定义的**服务是实际的****实现**代码 - 构成服务的实际 C# 或 VB.NET 行。因此，它是一个**具体的类**（甚至可能实现**多个服务契约**）。这只是服务器端。`<service>`

 ******然而，**端点**是服务器和客户端之间的通信通道，在这两者之间，您只想共享**合同**-而**不是**该合同的任何具体实现。端点只会用于**单个**服务合同 - 如果您的具体服务实现多个合同，您需要向客户端公开多个端点以提供所有这些功能。

这会让事情变得更清楚吗？******

# c - 头指针随着链表项的变化而变化

> ID：11894454
> 
> 赞同：0
> 
> 时间：2012-08-10T01:55:25.263
> 
> 标签：c

该程序应该打印新元素和开始元素。但是每次我分配一个新元素时，开始元素都会发生变化。`init_class()`返回一个指向类的指针。

```
/*
  Class->Albert
            |
            V
         Einstein

*/

#include "datadef.h"
int main(int argc, char* argv[])
{
    char Name[30][30];

    if (argc != 2)
    {
        printf("Incorrect number of arguments, please retry...\n");
        exit(0);
    }

    Class* classp;
    classp = init_class();

    FILE* fp;
    fp = fopen(argv[1],"r");

    if (fp == NULL)
    {
        printf("File pointer allocation error...Ending the program..\n");
        exit(0);
    }
    int count = 0;
    Student* prevp;
    Student* currp;
    while(!feof(fp))
   {
        fscanf(fp,"%s",Name[count]);
        currp = init(Name[count]);
        if (!count)
        {
            classp->startp = currp;
            printf("Assigned the head pointer\n");
        }
        else
        {
            prevp->nextp = currp;
            printf("appending to the pre-existing list\n");
        }
        count+=1;
        prevp = currp;
        printf("Current : %s \n",currp->name);
        printf("Head : %s \n",classp->startp->name);
        printf("\n\n");
    } 
```

结果：

> 分配了头指针
> 
> 当前： 阿尔伯特
> 
> 负责人：阿尔伯特
> 
> 附加到预先存在的列表
> 
> 当前：爱因斯坦
> 
> 负责人：爱因斯坦

预期结果：

> 分配了头指针
> 
> 当前： 阿尔伯特
> 
> 负责人：阿尔伯特
> 
> 附加到预先存在的列表
> 
> 当前：爱因斯坦
> 
> 负责人：阿尔伯特

这是 init()

```
/*init()*/
Student* init(char* name)
{
    Student* currentp = (Student*)malloc(sizeof(Student));
    if (!currentp)
    {
        printf("pointer allocation problem..Ending the program...\n");
        exit(0);
    }
    currentp->name = name;
    currentp->nextp = NULL;
    currentp->scoreHeadp = NULL;

   return currentp; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:10:05.897

`char Name[30];`您对每个学生都使用相同的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T03:48:26.140

编辑您的初始化函数：

```
/*init()*/
Student* init(char* name)
{
    Student* currentp = (Student*)malloc(sizeof(Student));
    /* Allocate memory also for the student name */
    currentp->name = (char *)malloc(strlen(name) * sizeof(char));
    if (!currentp)
    {
        printf("pointer allocation problem..Ending the program...\n");
        exit(0);
    }
    //currentp->name = name;
    strncpy(currentp->name, name, strlen(name));
    currentp->nextp = NULL;
    currentp->scoreHeadp = NULL;

   return currentp;
} 
```

# android - 如何找到在android中按下了哪个键？

> ID：11894455
> 
> 赞同：-1
> 
> 时间：2012-08-10T01:55:30.000
> 
> 标签：android, android-softkeyboard, keylistener

我想知道按下了哪个键。我有一个 EditText 并为它添加了一个 KeyListener。但它似乎没有工作。我有一个文本视图，我想设置在文本视图上按下的 setText。

```
edittext = (EditText)findViewById(bla);
textview = (TextView)findViewById(bla);
edittext.setKeyListener(new Keylistener(){
@Override
                    public void clearMetaKeyState(View view,
                            Editable content, int states)    {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public int getInputType() {
                        // TODO Auto-generated method stub
                        return 0;
                    }

                    @Override
                    public boolean onKeyDown(View view, Editable text,
                            int keyCode, KeyEvent event) {

                        if(keyCode==KeyEvent.KEYCODE_DEL){
                            textview.setText("delete");
                        }
                        // TODO Auto-generated method stub
                        return false;
                    }

                    @Override
                    public boolean onKeyOther(View view, Editable text,
                            KeyEvent event) {
                        // TODO Auto-generated method stub
                        return false;
                    }

                    @Override
                    public boolean onKeyUp(View view, Editable text,
                            int keyCode, KeyEvent event) {
                        if(keyCode==KeyEvent.KEYCODE_DEL){
                            textview.setText("delete");
                        }
                        return false;
                    }

 }); 
```

这应该非常简单，但我无法让它工作:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:08:41.033

尝试这个。这个适用于我的项目。

```
 editext.setOnKeyListener(new OnKeyListener() {

        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if( (event.getAction() == KeyEvent.ACTION_DOWN) && 
                    (keyCode == KeyEvent.KEYCODE_DEL) ){
                Log.d(TAG, "Delete key clicked !");

                return true;
            }
            return false;
        }
    }); 
```

如果这不起作用，您可能听错了 EditText。检查您的 findViewById 以查看您的 id 是否正确。

# javascript - 在多个表单中使用 jQuery validate 插件发布无需重新加载页面的表单

> ID：11894460
> 
> 赞同：0
> 
> 时间：2012-08-10T01:57:30.657
> 
> 标签：javascript, jquery, forms, jquery-validate

一个前端页面包含多个具有相同类名的表单，因为我希望表中的每一行都是一个表单，用户可以提交该行。在 validate 之后，可以删除该行。所有的事情都是用 javascript 完成的。

但是，它不起作用。有没有相同任务的替代品？谢谢大家。

![在此处输入图像描述](../Images/11d7a4938dbe22a6f8b9afaa4fbfe86b.png)

![在此处输入图像描述](../Images/ddffb6a08ff1180d533bc68d6b02dc57.png)

```
<table width="800">
    <tbody>
    <form class=myform id=form_13 action="back_end.php"><tr id="13" ~~~~~></from>
    <form ...><tr id="21" ~~~~></form>
    </tbody>
    </table>

    (function ($) { 
    $(document).ready(function(){

    $('.myform').each(function(){

    sn = $(this).attr("sn");

    var $form_obj = $(this);

    $form_obj.validate({

    debug: false, // submit the form

    rules: {
    bill_sn: {
    required: true,         
    }               
    }, // rules ends

    messages: {
    bill_sn:"請輸入匯款序號",              
    },

    submitHandler: function(form) {

    $.post('admin_order_validate.php', $form_obj.serialize(), function(data) {

    $("#results").html(data);                   
    $("#div_"+sn).remove();
    console.log("remove div_"+sn);
    console.log("sn:"+sn);
    console.log("data"+data);
    })
    .error(function() { alert("error"); });

    return false; // stop going to the action page
    }       

    });//validate ends

    });
    }); // $(document ready)
    })(jQuery); 
```

# c# - Nant 无法构建 c# .net 项目

> ID：11894461
> 
> 赞同：2
> 
> 时间：2012-08-10T01:57:35.753
> 
> 标签：c#, .net, frameworks, reference, nant

我想`Nant`为我的项目调试。

表明：

> 目标框架：Microsoft .NET Framework 4.0 指定目标：运行
> 
> [解决方案] 开始解决方案构建。[解决方案] Building 'Project_1' [Debug] ... [解决方案] C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(847,9): Warning MSB3644: The reference assembly for framework未找到“.NETFramework,Version=v4.0”。要解决此问题，请为此框架版本安装 SDK 或 Targeting Pack，或者将您的应用程序重新定位到已安装 SDK 或 Targeting Pack 的框架版本。请注意，程序集将从全局程序集缓存 (GAC) 中解析，并将用于代替引用程序集。因此，您的程序集可能无法正确定位于您想要的框架。
> 
> [解决方案] C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1360,9)：警告 MSB3245：无法解析此引用。找不到程序集“System.Data”。检查以确保该程序集存在于磁盘上。如果您的代码需要此引用，您可能会遇到编译错误。[解决方案] C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1360,9)：警告 MSB3245：无法解析此引用。找不到程序集“System.Drawing”。检查以确保该程序集存在于磁盘上。如果您的代码需要此引用，您可能会遇到编译错误。[解决方案] C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1360,9)：警告 MSB3245：无法解析此引用。找不到程序集“System. 检查以确保该程序集存在于磁盘上。如果您的代码需要此引用，您可能会遇到编译错误。检查以确保该程序集存在于磁盘上。如果您的代码需要此引用，您可能会遇到编译错误。

我已经安装了 .NET Framework 4 客户端配置文件并进行了扩展。

怎么解决？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T03:20:28.127

您应该安装 Windows 7 和 .NET 4 SDK，

[http://www.microsoft.com/en-us/download/details.aspx?id=8279](http://www.microsoft.com/en-us/download/details.aspx?id=8279)

那你可以再试一次。

# javascript - 如何将 Javascript 数组字符串化以存储在 localStorage

> ID：11894463
> 
> 赞同：1
> 
> 时间：2012-08-10T01:57:54.567
> 
> 标签：javascript, json, local-storage

我正在尝试将一个数组存储在 localStorage (HTML5) 中，该数组需要是一个字符串，但可以通过定义索引来直接访问我存储在数组中的对象。当我尝试 JSON.stringify 时，我只得到 [] ，它不会将对象数组存储在 localStorage 中。

```
var mylist = [];

mylist["mykey1"] = {id: "1", title: "First"};
mylist["mykey2"] = {id: "2", title: "Second"};

localStorage.setItem("mylist", JSON.stringify(mylist));  // stores [] only - uggh!

var mylist2 = JSON.parse(localStorage.getItem("mylist"));

document.write(JSON.stringify(mylist2["mykey1"])); // want it to display:  {"id": "1", "title": "First"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:03:54.530

我想我只是通过将 mylist var 从 [] 数组更改为 {} 对象来解决它。

```
var mylist = {}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T02:07:43.037

您已经创建了一个**数组**，并尝试像**关联数组**或**映射一样使用它**

实际发生的是当你输入

```
mylist["mykey1"] = {id: "1", title: "First"} 
```

它试图在索引**"mykey1"处获取一个***列表元素*，该元素*被 JSON parser 忽略*。这可能是由于它无法确定列表中的整数索引，或者它转换为数字太大。***`mykey1`***

 ***你会注意到，如果你这样做：

```
mylist[1] = {id: "1", title: "First"} 
```

您的 JSON 字符串将为`"[null,{id: "1", title: "First"}]"`，因为您尚未指定`0th index`元素，但您已设置`1st index`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T02:09:15.580

因为您将数组用作普通对象。

更改`var mylist = [];`为`var mylist = {};`，然后一切正常。

***[检查演示](http://jsfiddle.net/4neBZ/)***。***

# javascript - 在 Javascript 中按属性过滤 Illustrator 页面项目

> ID：11894466
> 
> 赞同：0
> 
> 时间：2012-08-10T01:58:01.733
> 
> 标签：javascript, adobe-illustrator

我正在尝试操作具有 30,000 个页面项目的 Illustrator 文档中的某些页面项目。我试图避免遍历每一个。与此 AppleScript 等效的 Javascript 是什么？

```
set xxx to every page item whose note = "John" 
```

第一页项目的注释值示例如下：

```
set xxx to (do javascript "app.activeDocument.pathItems[0].note") 
```

最终，我只需要数组的计数（长度）。

在快速浏览了一个教程后，我将它拼凑成 Javascript 示例。这是获得结果的唯一方法吗？

```
docRef = app.activeDocument;

var pathLength = docRef.pathItems.length;

var hitList = []
for (i = 0; i<pathLength; i++)

{
if (docRef.pathItems[i].note= "John")
{
 hitList.push(i)   
}
}

alert(hitList.length) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-09-25T23:31:19.270

有一种称为 Lambda 表达式的技术可以为您工作。您要查找的 Lambda 表达式类型是具有标准查询操作的 Lambda。基本上你要做的是拉回 docRef.pathItems[i].note= "John" 的项目列表

第一个链接将使您更好地了解 C# 中的 Lambda 表达式 [http://msdn.microsoft.com/en-us/library/bb397687.aspx](http://msdn.microsoft.com/en-us/library/bb397687.aspx)

第二个链接将指向您可以找到与 C# 非常相似的 Javascript lambda 表达式构建器的方向 JavaScript 中 [是否有类似 C# 的 lambda 语法？](https://stackoverflow.com/questions/7190439/is-there-a-c-like-lambda-syntax-in-javascript)

# java - 相互 SSL - 以正确的格式获取密钥/信任库

> ID：11894468
> 
> 赞同：0
> 
> 时间：2012-08-10T01:58:25.150
> 
> 标签：java, soap, jaxb, ssl, pki

我使用 OpenSSL 生成了一个 CSR：

```
openssl req -out MyCompanyCsr.csr -new -newkey rsa:2048 -nodes -keyout MyCompanyPrivateKey.key 
```

所以一开始，我们有：

```
- MyCompanyPrivateKey.key
- MyCompanyCsr.csr 
```

然后我将它发送给我们的集成合作伙伴，他们回复了 3 个文件：

```
- PartnerIntermediateCa.crt
- PartnerRootCa.crt
- MyCompanyCsr.crt 
```

现在我需要使用相互 SSL 连接到他们的 Web 服务。为此，我知道我需要在 SSLSocketFactory 中为 JAXB 设置信任库和密钥库。

我正在使用 Java 实例化密钥库和信任库：

```
 KeyStore trustStore = KeyStore.getInstance("JKS");
      InputStream tsis = ClassLoader.getSystemResourceAsStream(trustStorePath);
      trustStore.load(tsis, "mypassword".toCharArray());
      tsis.close();

      KeyStore keyStore = KeyStore.getInstance("JKS");
      InputStream ksis = ClassLoader.getSystemResourceAsStream(keyStorePath);
      keyStore.load(ksis, "mypassword".toCharArray());
      if (ksis != null) {
        ksis.close();
      }

      TrustManagerFactory tmf =
          TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
      tmf.init(trustStore);

      KeyManagerFactory kmf =
          KeyManagerFactory.getInstance(KeyManagerFactory.getDefaultAlgorithm());
      kmf.init(keyStore, "mypassword".toCharArray()); 
```

但是，尝试使用此代码连接到服务器时会抛出`SSLHandshakeException`以下消息`http.client.failed`：

```
com.sun.xml.ws.client.ClientTransportException: HTTP transport error: 
javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure 
```

我正在使用的`keystore`和`truststore`我使用的是从我的浏览器中导出的，客户端私钥作为一个`PKCS`，服务器证书作为一个`x509 Cert PKCS#7 w/ Chain'. Then opened them up in Portecle and exported them both as`JKS` 文件。

假设 Java 代码是合法的，我怎么能确定我已经正确创建了`keystore`and `truststore`？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T20:19:01.620

我终于想通了。我使用了 FireFox 和[Portecle](http://portecle.sourceforge.net/)。

在浏览器中安装服务器证书和私钥。

**注意：**一个总是令人困惑的点：就 Portecle / Java 而言，“信任库”和“密钥库”都是*密钥库。*唯一的区别是我们在客户端用作*密钥库的密钥库*除了公共证书之外还有我们的私钥。

**使用服务器证书构建的 TrustStore：**

*   转到地址处的 URL，单击地址栏旁边的（锁定图标，显示 SSL 已启用）
*   安全选项卡 > 查看证书 > 详细信息选项卡 > 导出按钮
*   选择类型：带链的 X.509 证书 (PKCS#7)。
*   另存为 ffTestServerCert.crt

*   通过以下方式在 Portecle 中打开：检查菜单 > 检查证书 > 选择 ffTestServerCert.crt

*   您现在可以看到其中包含的证书（例如，我看到 3）。每个都需要自己导出。单击页面顶部的箭头按钮和每个按钮：
*   单击“PEM 编码”按钮
*   保存按钮
*   在磁盘上另存为 .pem 文件（对于此示例，假设我有 caCert1.pem、caCert2.pem、caCert3.pem）

*   在 Portecle 中创建新的密钥库：文件 > 新建密钥库 > JKS

*   对于从上面导出的每个证书（caCert1.pem、caCert2.pem、caCert3.pem），请执行以下操作：
*   工具 > 导入可信证书 > 选择 .pem > 导入按钮
*   弹出消息框说我们需要确定我们是否信任这个证书。
*   单击确定>确定（如果您信任证书）>是>输入别名（我将其保留为默认值）>确定
*   对您要导入的任何其他证书重复此操作（我做了所有 3 个）。

*   在 Portecle 中保存密钥库：

*   文件 > 将密钥库另存为... >
*   输入两次**信任库**密码
*   输入名称保存，如**clientTrustStore.jks**

恭喜，这是有效的**truststore**。

**使用私钥和服务器证书构建的 KeyStore：**

*   首先将私钥导入 FireFox（或 Chrome 或 IE）
*   使用浏览器以 PKCS 格式导出私钥。
*   Firefox > 首选项 > 高级选项卡 > 加密选项卡 > 查看证书 > 您的证书
*   选择要导出的 > 单击备份按钮
*   （这里唯一的选择是 PKCS12 格式，这是我们想要的）
*   选择一个名称 - clientKeys.p12
*   输入**密钥库的密码**
*   应该说它们已导出，单击确定

*   在 Portecle 中打开钥匙

*   File > Open Keystore > 选择我们上面保存的clientKeys.p12
*   输入上面选择的密码

*   使用 Portecle 转换为 JKS

*   工具 > 更改密钥库类型 > JKS
*   阅读有关当前类型如何不支持密钥对输入密码的警告消息
*   **重要提示：**此操作设置密钥对条目的*内部*`password`密码。
*   要更改内部密钥对条目的密码，请在 Portecle 的文件中选择任何“密钥对”（它们的图标将是一对密钥，在另一个之上）
*   右键单击“密钥对条目”> 设置密码
*   输入旧密码（即“密码”）并输入您想要的新密码
*   点击确定

*   保存**密钥库**：

*   在 Portecle 中执行：文件 > 将密钥库另存为 > 输入名称，例如**clientKeyStore.jks**
*   点击保存

**完成的**

现在您拥有正确配置的**clientTrustStore.jks**和**clientKeyStore.jks**来验证您的客户端。

要查看现在如何使用这些的示例，您可以查看： [具有相互 SSL 的 SOAP - 如何通过凭据发送？](https://stackoverflow.com/a/11908248/101095)

# tomcat - tomcat 7 上的 Spring MVC 为没有路径的请求提供 HTTP 405

> ID：11894473
> 
> 赞同：1
> 
> 时间：2012-08-10T01:59:38.590
> 
> 标签：tomcat, spring-mvc, tomcat7

我在 Tomcat 上遇到了 Spring MVC 的这个问题，我认为这与这篇[文章](https://stackoverflow.com/questions/10723721/mapping-a-post-request-method-in-spring-mvc-to-the-root-of-the-application-does)中解决的问题相同，但他们没有发布解决方案。

Web.xml

```
<!--  Spring MVC app -->
  <servlet>
    <servlet-name>client</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/client/client-servlet.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>client</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping> 
```

客户端-servlet.xml

```
<!-- Enables the Spring MVC @Controller programming model -->
  <mvc:annotation-driven />

  <context:component-scan base-package="com.company.client.controllers" />

  <!-- Enable an interceptor to set up the Trace objects for all Controller invocations -->
  <mvc:interceptors>
     <bean class="com.company.client.interceptor.TraceInterceptor"/>
  </mvc:interceptors>

  <!-- Handles HTTP GET requests for /resources/** by efficiently serving 
    up static resources in the ${webappRoot}/resources directory -->
  <mvc:resources mapping="/resources/**" location="/WEB-INF/client/resources/" />

  <!-- Resolves views selected for rendering by @Controllers to .jsp resources 
    in the /WEB-INF/client/views directory -->
 <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
  <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
  <property name="prefix" value="/WEB-INF/client/views/"/>
  <property name="suffix" value=".jsp"/>
</bean> 
```

我使用标准的 ContextLoaderInitializer。

我的控制器使用`@RequestMapping(value = {"", "/*"}, method = RequestMethod.GET)`

```
 @RequestMapping(value = {"", "/*"}, method = RequestMethod.GET)
  public String home(Model model) {
    retrieveOffers(model); 
    logger.warning("Loading home page");
    return "main";
  } 
```

当我访问 mydomain.com 或 mydomain.com/ - 我得到 Tomcat 405 GET not supported 错误。如果我在尾随路径中放置任何内容，它会很好地加载页面。（例如 mydomain.com/a）

有趣的是，我总是看到“加载主页”日志语句，从我的日志来看，请求之间没有区别。似乎 Tomcat 在控制器完成和视图渲染之间的某个时间拦截了响应。有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:22:02.870

我团队中的某个人在 web.xml 中有一个声明。它在控制器之后拦截响应并重定向到没有实现 doget 的 servlet。希望这可以在以后节省一些时间。使用以下内容确保默认 servlet 容器不会覆盖 spring。

```
 <!-- Disables Servlet Container welcome file handling. Needed for compatibility with Servlet 3.0 and Tomcat 7.0 -->
  <welcome-file-list>
    <welcome-file></welcome-file>
  </welcome-file-list> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:20:25.087

看起来Spring无法正确解析视图。当您的控制器方法返回一个简单的字符串时，它会查找一个相应的视图，该视图带有您的调度程序 servlet 配置中的值的前缀和后缀。

是否配置了 InternalResourceViewResolver？如下所示：

```
<bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix">
        <value>/WEB-INF/</value>
    </property>
    <property name="suffix">
        <value>.jsp</value>
    </property>
</bean> 
```

然后在你的控制器结束时，Spring 会在你的 WEB-INF 文件夹中寻找一个 main.jsp 文件（它接受字符串“main”并添加前缀和后缀）。

这一切都正确吗？您能否提供弹簧配置？

# c++ - 为什么 const 有意义？

> ID：11894475
> 
> 赞同：1
> 
> 时间：2012-08-10T01:59:55.303
> 
> 标签：c++, reference, constants

> **可能重复：**
> [为什么非常量引用不能绑定到临时对象？](https://stackoverflow.com/questions/1565600/how-come-a-non-const-reference-cannot-bind-to-a-temporary-object)

这个程序：

```
int fun()
{
    return 1;
}

int main()
{   
    const int& var = fun();

    return 0;
} 
```

我的问题是为什么我必须在 var 定义之前加上一个 const ？如果不是，g++ 会给我一个错误，类似于“从‘int’类型的临时值对‘int&’类型的非常量引用进行无效初始化。” 'const' 是什么意思？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T02:06:46.040

在这种情况下，您需要`const`，因为引用初始化需要一个带有地址的变量，而不仅仅是一个值。因此编译器必须创建一个匿名变量，您只能通过引用访问它；编译器不希望您访问未声明的变量。

如果您要显式声明变量，`const`则没有必要：

```
int tmp = fun();
int &var(tmp); 
```

# jsf - Tomcat 6.X 中的负载平衡 JSF2.0 应用程序

> ID：11894482
> 
> 赞同：0
> 
> 时间：2012-08-10T02:01:25.297
> 
> 标签：jsf, jsf-2, tomcat6, apache

我们有一个使用 JSF2.0 开发的应用程序。该应用程序正在运行一个多个服务器实例。我们没有使用任何会话，SessionScope。我们只使用了@RequestScoped、@ViewScoped、@ApplicationScoped。

app.war 在 server1 和 server2 中运行。对于@ViewScoped bean，我们面临问题。

对于 JSF 保存的视图，如何使用 httpd 对 Tomcat 服务器进行负载平衡。所以我想知道这将如何匹配将传入请求切换到一组负载平衡的 Web 服务器。上述数据如何保持一致？

# iphone - 在 Mobile Safari 中打开某些链接时在 PhoneGap 应用中打开 iFrame？

> ID：11894483
> 
> 赞同：1
> 
> 时间：2012-08-10T02:01:39.353
> 
> 标签：iphone, ios, iframe, cordova, mobile-safari

在之前的 PhoneGap 版本中，无法在 PhoneGap 应用程序中打开 iFrame，同时在 Mobile Safari 中打开其他链接。

我们已经在一些地方读到这在 2.0 中已修复，但它似乎对我们不起作用。

这在 2.0 中可能吗？如果没有，关于何时有可能的预计时间？

谢谢！

# c# - 将 dll 添加到引用后，类库 Intellisense 未显示

> ID：11894494
> 
> 赞同：3
> 
> 时间：2012-08-10T02:02:42.610
> 
> 标签：c#, intellisense, class-library

在 C# 中，我创建了一个具有一个命名空间和一个类的 ClassLibrary。我保存并构建它。在其他项目中，当我使用它时，我通过浏览到 .dll 位置将它添加到我的引用中。

但问题是它的名字没有出现在 Intellisense 中。即当我：`using ...`我的 dll 不显示..我正在将库导入到 ConsoleApp。应用程序和库目标框架都是 .NET Framework 4.0，我制作了它们的程序集版本 4.0.0.0，因此它们完全相同。

有什么设置或我缺少的东西吗？我怎样才能让它弹出？

我正在使用 VS2010 专业版

感谢您的帮助

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-23T06:29:53.333

也许这很有用，我遇到了类似的问题，我有一个 Web 项目，通过选择项目添加对类库的引用，但是如果我对类库进行了更改，我在Web项目的智能感知，尝试了很多东西后，我看到在最近添加的参考中，“本地复制”选项的值设置为“真”，然后我将其更改为假，一切正常！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-07T11:04:29.470

我有一个类似的问题，但就我而言，这是课堂上的一个属性。如果您转到文件属性并查找**Build Action**。不知何故，我的设置为`Content`它必须设置为`Compile`。

我正在使用 Visual Studio 2013。我希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T14:43:00.423

您的程序集的命名空间是否与您当前打开的项目的命名空间不同？我曾经有过当前项目和程序集共享相同命名空间路径的时候，智能感知可能会搞砸。

一般来说，Visual Studio 在智能感知生成方面非常出色，尤其是对于 C#。但有时会出现一些关于歧义的有趣情况，尤其是混合项目类型时，它并不完全奏效。

将您的内容放在同一个命名空间中让我想知道您是否真的解决了问题（它可能只是在当前加载的项目中自动完成命名空间而不是程序集），但如果它允许您继续工作，那就继续吧！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-25T10:04:09.377

右键单击在其上添加 dll/项目选择菜单`project dependancies`和`select/MarkCheckBox`参考项目/dll 引用的项目。那么它会正常工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-01T13:22:11.573

如果类库项目在创建后更改了名称，那么我相信智能感知可能会由于目录问题而无法找到它。

我用通用的“ClassLibrary1”或其他东西创建了我的类，然后在 VS2017 中更改了默认命名空间、类名和项目名。我关闭了VS2017并更改了目录名称以匹配我的默认命名空间，然后在VS2017中重新关联了项目文件，然后在我的主项目文件中重新添加了引用。

现在一切似乎都已解决。

# javascript - 为什么更改的输入字段会更改元素但不再允许Jquery弧线效果

> ID：11894495
> 
> 赞同：0
> 
> 时间：2012-08-10T02:02:59.057
> 
> 标签：javascript, jquery

这是问题示例的链接：

[http://www.frysa.us/Arctext/](http://www.frysa.us/Arctext/)

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
        <title>Arctext.js - Curving text with CSS3 and jQuery</title>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
        <meta name="description" content="Arctext.js - Curving text with CSS3 and jQuery" />
        <meta name="keywords" content="arc, letters, words, rotate, warp, circle, curve, along, path, jquery, css3, transform" />
        <meta name="author" content="Codrops" />
        <link rel="shortcut icon" href="../favicon.ico"> 
        <link rel="stylesheet" type="text/css" href="css/demo.css" />
        <link rel="stylesheet" type="text/css" href="css/style.css" />
        <link href='http://fonts.googleapis.com/css?family=Montserrat|Sail|Concert+One' rel='stylesheet' type='text/css' />
    </head>
    <body>

    </body>
</html>
        <div class="container">
            <section class="sub" id="sub4">
                <div class="example"> 
```

/* 这是将 example4 的 id 应用于 ->

```
 <h3 id="example4">See me change</h3>
                </div>
                <div class="code">
                    <h4>Example 4 - Set/animate</h4>
                    <p>Set or animate</p>
                    <code>$example4.arctext({radius: 300})</code>
                    <p class="buttons">
                        <a id="button_set" href="#"><span>Set me</span><span>radius: 140,<br /> dir: -1</span></a>
                        <a id="button_anim1" href="#"><span>Animate me</span><span>radius: 300,<br /> dir: -1,<br /> animation: 300ms ease-out</span></a>
                        <a id="button_anim2" href="#"><span>Animate me</span><span>radius: 200,<br /> dir: 1,<br /> animation: 300ms</span></a>
                        <a id="button_reset" href="#"><span>Reset me</span><span>radius: 300,<br /> dir: 1</span></a>
                    </p>
                </div>
                <div class="clr"></div>
            </section>
            <div class="clr"></div>
        </div>
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
        <script type="text/javascript" src="js/jquery.arctext.js"></script>
        <script type="text/javascript" src="http://www.google.com/jsapi"></script> 
```

/*我试图调整的元素是 example4 ->

```
 <script type="text/javascript">
            var $headline = $('#headline').hide();

            var $word1        = $('#arc-wrapper').find('h3').hide();
            var $word2        = $('#arc-wrapper').find('h4').hide();

            var $example1    = $('#example1').hide();
            var $example2    = $('#example2').hide();
            var $example3    = $('#example3').hide();
            var $example4    = $('#example4').hide();

            google.load('webfont','1');

            google.setOnLoadCallback(function() {
                WebFont.load({
                    google        : {
                        families    : ['Montserrat','Concert One']
                    },
                    fontactive    : function(fontFamily, fontDescription) {
                        init();
                    },
                    fontinactive    : function(fontFamily, fontDescription) {
                        init();
                    }
                });
            });

            function init() {
                $headline.show().arctext({radius: 400});

                $word1.show().arctext();
                $word2.show().arctext({radius: 148, dir: -1});

                $example1.show().arctext({radius: 300});
                $example2.show().arctext({radius: 400, dir: -1});
                $example3.show().arctext({radius: 500, rotate: false});
                $example4.show().arctext({radius: 300});

                $('#button_set').on('click', function() {
                    $example4.arctext('set', {
                        radius        : 140,
                        dir            : -1
                    });
                    return false;
                });
                $('#button_anim1').on('click', function() {

                    $example4.arctext('set', {
                        radius        : 300, 
                        dir            : -1,
                        animation    : {
                            speed    : 300,
                            easing  : 'ease-out'
                        }
                    });
                    return false;
                });
                $('#button_anim2').on('click', function() {
                    $example4.arctext('set', {
                        radius        : 200, 
                        dir            : 1, 
                        animation    : {
                            speed    : 300
                        }
                    });
                    return false;
                });

                $('#button_reset').on('click', function() {
                    $example4.arctext('set', {
                        radius        : 300, 
                        dir            : 1
                    });
                    return false;
                });

            };
        </script> 
```

/* 这是我设置的附加输入字段 ->

```
<input type='text' id='userInput' value='Enter Text Here' />
<input type='button' onclick='changeText2()' value='Change Text'/>

<script type="text/javascript">
function changeText2(){
    var userInput = document.getElementById('userInput').value;
    document.getElementById('example4').innerHTML = userInput;

}
</script/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T18:00:39.657

您可以使用destroy 作为参数。

```
$j("#text").arctext('destroy');  //Destroy, clear all the stuff
$j("#text").html(value); // Put a new value in the element with ID:Text
$j("#text").arctext({radius:70}); // Create a new curved text with arctext 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T02:13:43.800

插件将字符串拆分为每个字符。

例如：“测试”

```
<div id="example4">
   <span>t</span>
   <span>e</span>
   <span>s</span>
   <span>t</span>
<div/> 
```

编码：

```
userInput ="hello";
document.getElementById('example4').innerHTML = userInput; 
```

将html更改为

```
<div id="example4">
   hello
<div/> 
```

如果您想再次显示 arctext，请**重新初始化**

再次调用函数**init()**！

```
function changeText2(){
   var userInput = document.getElementById('userInput').value;
   //document.getElementById('example4').innerHTML = userInput;
   //$("#example4").html("").html(userInput).show().arctext({ radius: 300 });
   var newh3 = $("<h3>");
   newh3.html(userInput)
   $("#example4").after(newh3);
   $example4.remove();
   newh3.show().arctext({ radius: 300 });
   $example4 = newh3.attr("id", "example4");
 } 
```

# regex - VBSscript 正则表达式替换卷曲之间的文本

> ID：11894496
> 
> 赞同：0
> 
> 时间：2012-08-10T02:03:21.137
> 
> 标签：regex, asp-classic, vbscript

我在这里查看了多个示例，它们都部分有效，但并非全部有效。

我正在尝试创建一个正则表达式来替换基于变量的字符串中的文本。我让替换工作，但仅在第一次搜索时。等等

目标是替换： 文本：{1} 来自用户 1 的文本。
{2} 来自用户 2 的文本。
{1} 来自用户 1的文本。
- 如果是 QueryString。我需要替换 {} 之间的文本。

如果 QueryString = a user # 例如 1 则显示名称，否则显示“用户无”：

响应：文本：来自用户 1 的 NAME1 文本。
用户无 来自用户 2
的文本。来自用户 1 的 NAME1 文本。
- 如果是 QueryString。

## ----------------------------------

* * *

好的 - 我终于有了文件：

```
<%
Dim StrX, CallMe, varID, varFirmID, varBKID
CallMe = "0"
CallMe = Request.QueryString("x")
StrX = "Memo Tracking:<br />"
StrX =  StrX & "{1} Test Text 1<br/ >{2} Test Text 2<br/ >{1} Test Text 1<br/ >{2} Test   Text 2<br/ >" 'Data - will replace with Recordset Data later - eventually I will also add   [] for two sets
varFirmID = "0"
varBKID = "0"

Set re = new RegExp 
re.IgnoreCase = true
re.Global = true
re.Pattern = "\{(.*)\}" 'find {} part
set matches = re.Execute(StrX) 

'finds Matches of Firms --------------------------------
If matches.Count > 0 Then
For Each Match in Matches 
varFirmID = matches.item(0).submatches(0)
    If Callme = varFirmID Then
        StrX =(Replace(StrX,matches.item(0).submatches(0),"Replaced Name:"))
            End If
            If Callme <> varFirmID Then
        StrX =(Replace(StrX,matches.item(0).submatches(0),"NO NAME:"))
    End If
Response.Write Strx
'End loop if Match --------------------------------
Next
End If
%> 
```

我不断得到部分结果。我有一种感觉，我需要在 for 代码之后添加一个“do while 循环”。

目标是... querystring(x)=1 结果：

备忘录跟踪：
已替换 Name1：测试文本 1
NO NAME：测试文本 2
已替换 Name1：测试文本 1
NO NAME：测试文本 2

目标是... querystring(x)=2 结果：

备忘录跟踪：
NO NAME：测试文本 1
被替换 Name2：测试文本 2
NO NAME：测试文本 1
被替换 Name2：测试文本 2

（我将使用 varFirmID 作为键在循环中运行记录集 - 所以我可能需要建议在哪里插入它。）非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T06:35:40.943

乍一看，我在您的模式中看到了一个错误：您使用了正斜杠类型的“模式开始”，就像在 Javascript / Java 中可以做的那样，但在 VBScript 中却没有

```
re.Pattern = "/{(.*)}/" 
```

应该：

```
re.Pattern = "{(.*)}"    ' note: is not going to work for you either, read below 
```

但是，大括号也是特殊字符（前序列的重复计数），所以你必须转义它们：

```
re.Pattern = "\{(.*)\}" 
```

我在您的代码中发现的另一个错误：

```
if matches > o then 
```

你应该`o`用 a`0`和`matches`替换`matches.count`：

```
if matches.count > 0 then 
```

好的，现在我们正在取得进展。该代码正在运行，但返回`1} Text from user 1.<br/>{2} Text from user 2.<br/>{1`而不是仅返回第一个数字，因为正则表达式[匹配 greedy](http://www.regular-expressions.info/repeat.html)。正则表达式很有趣，因为您可以为同一个问题创建不同的解决方案。我选择仅从字符串中获取数字部分，但您也可以找出其他解决方案：

```
re.Pattern = "\{(\d+)\}" 
```

\d 后面的加号 (+) 表示您想要一个数字 1 到无限次，因此即使您的数字超过 9，它也可以工作。

我希望我能把它弄清楚。我确实注意到这不会解决您的问题，因为您想在某些条件匹配时替换它。固定模式将对您有所帮助，也许如果您可以更多地澄清您的问题并提供一个具有准确输入/输出的示例，我们可以进一步帮助您。

# javascript - Google Maps API - openInfoWindow 总是一样的

> ID：11894498
> 
> 赞同：1
> 
> 时间：2012-08-10T02:03:25.917
> 
> 标签：javascript, jquery

我可以设置制造商（它们出现在地图上），但信息窗口总是一样的。我已经尝试为 infowindow 内容和制造商制作一个数组，但这也没有奏效。

```
 $(function() {
    map = $('#map_canvas');
    map.gmap().bind('init', function () {
      // Process the Microdata for each Event into an object.

      $.ajax({
        type: "GET",
        dataType: "jsonp",
        cache: false,
        url: "API",
        success: function(data) {
            for (var i = 0; i < 301; i++) {

                  //details overlay
                   var eventDetails = '';
                    eventDetails += '<div class="iw">';
                    eventDetails += '<img src="'+ data.data[i].images.low_resolution.url+'"></img>';
                    eventDetails += '<h3>'+ data.data[i].tags + '</h3>';
                    eventDetails += '</div>';

                     //set location
                    var lat = data.data[i].location.latitude;
                    var lng = data.data[i].location.longitude;
                    var latlng = new google.maps.LatLng(lat, lng);

                    //marker
                    var markerOptions = {
                      'bounds':true,
                      'position': latlng,
                      'icon': icon,
                    };

                    //add marker and set overlay
                    map.gmap('addMarker', markerOptions).click( function() {
                      map.gmap('openInfoWindow', { 'content': eventDetails }, this ); 
                    });
            }           
        }
      });
    });
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:23:22.717

在我的经验中：

```
success: function(data) {

      $.each(data.data, function (i) {

        //details overlay
        var eventDetails = '';
        eventDetails += '<div class="iw">';
        eventDetails += '<img src="'+ data.data[i].images.low_resolution.url+'"></img>';
        eventDetails += '<h3>'+ data.data[i].tags + '</h3>';
        eventDetails += '</div>';

        //set location
        var lat = data.data[i].location.latitude;
        var lng = data.data[i].location.longitude;
        var latlng = new google.maps.LatLng(lat, lng);

        //marker
         var markerOptions = {
           'bounds':true,
           'position': latlng,
           'icon': icon,
         };

          //add marker and set overlay
          map.gmap('addMarker', markerOptions).click( function() {
              map.gmap('openInfoWindow', { 'content': eventDetails }, this ); 
          });
      });          
 } 
```

这将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T02:44:10.260

不知道，`gmap`但对我来说这看起来像是变量范围问题，如果其他一切都很好，可以按如下方式解决

```
//add marker and set overlay
(function(mOpt, eDetails){
    map.gmap('addMarker', mOpt).click( function() {
        map.gmap('openInfoWindow', { 'content': eDetails }, this ); 
    });
})(markerOptions, eventDetails); 
```

# opencv - OpenCV中`IplImage`和`CvMat`的全称是什么？

> ID：11894499
> 
> 赞同：5
> 
> 时间：2012-08-10T02:03:34.367
> 
> 标签：opencv

OpenCV中有一个`IplImage`和`CvMat`。他们的全名是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-10T02:23:01.157

IPL`IplImage`代表**Intel Processing Library**，它是 Intel 维护 OpenCV 时的残余物。

CV`cvMat`代表**计算机视觉矩阵**，是图形中常用的一种数据结构。

`IplImage`是一个旧结构，我相信它在内部转换为`cv::Mat`，或者只是`Mat`如果你已经在`cv`命名空间中。同样，`cvMat`也被转换成`Mat`。

[http://opencv.willowgarage.com/documentation/cpp/basic_structures.html?highlight=iplimage](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html?highlight=iplimage)

# objective-c - 从 XML 中获取空值，但仅在仅 wi-fi 的设备上

> ID：11894502
> 
> 赞同：0
> 
> 时间：2012-08-10T02:04:10.283
> 
> 标签：objective-c, ipad, xml-parsing, nsxmlparser, touchxml

我有一个包含天气的应用程序......我从 Google 的天气 API 收到的数据。我正在绞尽脑汁想弄清楚我遇到的一个问题，但我一直没有成功，所以我想是时候在这里问一问了。

这是我的代码：

```
query = [[NSString stringWithFormat:@"%@",query] stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSLog(@"query: %@",query);

// SET GOOGLE WEATHER XML LOCATION
CXMLDocument *parse = [[CXMLDocument alloc]initWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://www.google.com/ig/api?weather=%@", query]]options:0 error:nil];
NSLog(@"URL: %@", parse); 
```

查询变量保存我的反向地理编码器位置（例如芝加哥，IL），我将它附加到 Google URL 以获取 XML。

如您所见，我正在注销查询和解析变量。我可以看到我在执行代码时获得了当前位置的合法查询位置，但是当我记录解析变量时，我什么也没得到。解析日志显示 null...Google 没有返回任何内容。我可以看到 URL 是正确的，我什至可以转到我的浏览器并使用相同的记录链接获取我需要的数据。

有趣的是……它在模拟器中运行良好，在我运行 5.1.1 的 iPhone 上也运行良好。我的 iPad 上确实安装了 iOS6b4，这导致了这个问题，但由于我没有使用 iOS6 中引入的任何新代码，所以这里应该不会引起任何问题。

关于为什么 XML 解析拒绝在只有 Wi-Fi 的 iPad 上工作的任何想法？

顺便说一句，在有人告诉我开始使用 NSXMLParser 而不是 TouchXML 之前……我确实有一个运行 NSXMLParser 的测试版本，而且我在那里也遇到了同样的问题。我不知所措。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T15:25:29.403

我终于想通了......它实际上与locationManager有关。

我有以下代码：

```
 if ([locationManager respondsToSelector:@selector(startMonitoringSignificantLocationChanges)]) {
    [locationManager startMonitoringSignificantLocationChanges]; }
 else {
     [locationManager startUpdatingLocation]; } 
```

摆脱 if/else 语句并使用以下解决方案：

```
[locationManager startUpdatingLocation]; 
```

# node.js - iOS & node.js：如何验证通过的访问令牌？

> ID：11894506
> 
> 赞同：25
> 
> 时间：2012-08-10T02:04:43.997
> 
> 标签：node.js, authentication, oauth

我有一个 iOS，它使用 OAuth 和 OAuth2 提供程序（Facebook、谷歌、推特等）来验证用户并提供访问令牌。除了姓名和电子邮件地址等最少的数据外，该应用程序不会将这些服务用于身份验证之外的任何事情。

然后应用程序将访问令牌发送到服务器以指示用户已通过身份验证。

服务器是用 Node.js 编写的，在执行任何操作之前，它需要根据正确的 OAuth* 服务验证提供的访问令牌。

我一直在环顾四周，但到目前为止，我发现的所有 node.js 身份验证模块似乎都是用于登录和通过服务器提供的网页进行身份验证的。

有谁知道任何可以对提供的访问令牌进行简单验证的 node.js 模块？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-09-07T08:43:28.237

据我所知（据我阅读规范可知），OAuth 和 OAuth 2 规范没有为访问令牌验证指定单个端点。这意味着您将需要为每个提供者自定义代码来仅验证访问令牌。

我查找了为您指定的端点执行的操作：

## Facebook

似乎[其他人](https://stackoverflow.com/a/7742697/713326)已经使用 Facebook 的图形 API 的[“我”端点](https://developers.facebook.com/tools/explorer/?method=GET&path=me)来检查令牌是否有效。基本上，要求：

```
https://graph.facebook.com/me?access_token={accessToken} 
```

## 谷歌

谷歌有一个[专门的调试端点](https://www.googleapis.com/oauth2/v1/tokeninfo)来获取访问令牌信息，也有[很好的文档](https://developers.google.com/identity/protocols/oauth2/openid-connect#validatinganidtoken)。基本上，要求：

```
https://www.googleapis.com/oauth2/v1/tokeninfo?access_token={accessToken} 
```

但是，他们建议您不要为生产执行此操作：

> 该`tokeninfo`端点可用于调试，但出于生产目的，请从密钥端点检索 Google 的公钥并在本地执行验证。您应该使用 jwks_uri 元数据值从[发现文档](https://developers.google.com/identity/protocols/oauth2/openid-connect#discovery)中检索密钥 URI 。对调试端点的请求可能会受到限制或以其他方式受到间歇性错误的影响。
> 
> 由于 Google 很少更改其公钥，因此您可以使用 HTTP 响应的缓存指令缓存它们，并且在绝大多数情况下，执行本地验证比使用 tokeninfo 端点更有效。此验证需要检索和解析证书，并进行适当的加密调用以检查签名。幸运的是，有多种语言提供的经过良好调试的库可以完成此任务（请参阅 jwt.io）。

## 推特

Twitter 似乎没有一个非常明显的方法来做到这一点。我怀疑由于[帐户设置数据](https://dev.twitter.com/docs/api/1.1/get/account/settings)是相当静态的，这可能是最好的验证方式（获取推文可能会有更高的延迟？），因此您可以请求（使用适当的 OAuth 签名等）：

```
https://api.twitter.com/1.1/account/settings.json 
```

请注意，此 API 的速率限制为每个窗口 15 次。

总而言之，这似乎比最初看起来更棘手。在服务器上实现某种会话/身份验证支持可能是一个更好的主意。基本上，您可以验证一次获得的外部 OAuth 令牌，然后为用户分配一些您自己的会话令牌，您可以使用该会话令牌在您自己的服务器上使用用户 ID（电子邮件、FB id 等）进行身份验证，而不是继续制作为您自己收到的每个请求向 OAuth 提供者发出请求。

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-02-10T18:17:01.067

对于生产环境中的**google**，请安装 google-auth-library ( `npm install google-auth-library --save`) 并使用以下命令：

```
const { OAuth2Client } = require('google-auth-library');
const client = new OAuth2Client(GOOGLE_CLIENT_ID); // Replace by your client ID

async function verifyGoogleToken(token) {
  const ticket = await client.verifyIdToken({
    idToken: token,
    audience: GOOGLE_CLIENT_ID  // Replace by your client ID 
  });
  const payload = ticket.getPayload();
  return payload;
}

router.post("/auth/google", (req, res, next) => {
  verifyGoogleToken(req.body.idToken).then(user => {
    console.log(user); // Token is valid, do whatever you want with the user 
  })
  .catch(console.error); // Token invalid
}); 
```

[有关使用后端服务器验证 google 令牌的](https://developers.google.com/identity/sign-in/web/backend-auth)更多信息，可以找到 node.js、java、python 和 php 的示例。

对于**Facebook**，请执行 https 请求，例如：

```
const https = require('https');

router.post("/auth/facebook", (req, res, next) => {

  const options = {
    hostname: 'graph.facebook.com',
    port: 443,
    path: '/me?access_token=' + req.body.authToken,
    method: 'GET'
  }

  const request = https.get(options, response => {
    response.on('data', function (user) {
      user = JSON.parse(user.toString());
      console.log(user);
    });
  })

  request.on('error', (message) => {
    console.error(message);
  });

  request.end();
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-07T13:16:21.487

在谷歌的生产中，您可以使用：

[https://www.npmjs.com/package/google-auth-library](https://www.npmjs.com/package/google-auth-library)

```
const ticket = client.verifyIdToken({
    idToken: ctx.request.body.idToken,
    audience: process.env.GOOGLE_CLIENTID
}) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-01-13T08:04:30.003

要从 Google 获取有关令牌的信息，请小心使用版本 api `https://www.googleapis.com/oauth2/v3/tokeninfo?access_token={accessToken}`

# math - 当模值非质数时如何在除法方程中使用模运算符

> ID：11894509
> 
> 赞同：0
> 
> 时间：2012-08-10T02:05:20.720
> 
> 标签：math, modulus

我知道 (a*b)%M = (a%M * b%M)%M

但是如果等式是 :( (a*b)/c )%M ..我认为我也不能在这里使用上述逻辑..这里 M 是一个非质数..你可以假设 (a *b)/c 永远不会以浮点值结束..

```
For eg:
If a=10 b=9 and c=6,M=4 then (a*b)/c=15 and 15%4=3
but if I use the property as it is with multiplications then ((10%4*9%4)/(6%4))%4= (2*1)/2=1 
```

请告诉我如何解决这种问题？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:13:10.890

如果 c 和 M 是相对素数，您可以乘以 c^-1%M 并且数学应该可以工作。但是，如果 GCD(c,M)>1，则 c^-1%M 不存在，据我所知，没有简单的方法可以做到这一点。

至于 c^-1%M 是什么，它的数使得 c*c^-1%M=1。例如如果c=2，M=9，则2*5%9=10%9=1，所以c^-1%M=5。

[你可以用扩展欧几里得算法](http://en.wikipedia.org/wiki/Extended_euclidean_algorithm)计算c^-1% M——你得到ac+bM=1，所以ac=1+(-b)M和ac%M=1。

# php - 什么是在 symfony2 学说中的数据库中插入选定复选框数据的最佳方法

> ID：11894515
> 
> 赞同：0
> 
> 时间：2012-08-10T02:05:58.070
> 
> 标签：php, forms, symfony, checkbox, doctrine

我有一个名为“任务”的表，“用户”与任务具有多对多关系。

在我显示的页面上：

`<input type="checkbox" name="tasks[]" value="task.id"> TaskName`

`<input type="checkbox"> name="tasks[]" TaskName2`

`<input type="checkbox"> name="tasks[]" TaskName3`

我想知道：在服务器端，如何获取用户选择的复选框数组？

如果我得到集合，那么我可以添加它，使用

`User->addTasks(tasks)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T03:18:44.253

您似乎没有使用 Symfony 的内置表单功能。我强烈建议调查一下...

使用 Symfony 表单，您可以通过将“扩展”和“多个”选项分别设置为`true`：

```
// StackOverflow\BulbasaurBundle\Form\TrainerType.php

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilder;

class TrainerType extends AbstractType
{
    ...
    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
            ->add('name')
            ->add(
                'pokemon',
                'entity',
                array
                (
                    "class" => "BulbasaurBundle:Pokemon",
                    "expanded" => true,
                    "multiple" => true,
                    "property" => "description"
                )
            );
    }

    ...
} 
```

当这个表单被渲染时，它会将每个 Pokemon 实体显示为复选框，使用`__toString()`方法作为复选框的标签。

使用 Symfony 表单的另一个好处是 Symfony 将管理自动检查哪些框。表单充当实体和请求/视图之间的中介。也就是说，当您请求更改对象时，控制器会根据该对象的当前状态创建一个表单，并将其呈现给用户。相反，当用户提交该数据时，控制器可以将请求信息绑定到实体，然后可以将其持久化。

有关 Symfony2 表单的更多信息，请访问：http: [//symfony.com/doc/current/book/forms.html](http://symfony.com/doc/current/book/forms.html)

# javascript - JQuery提交功能有时工作

> ID：11894532
> 
> 赞同：1
> 
> 时间：2012-08-10T02:08:41.850
> 
> 标签：javascript, jquery, submit

我正在为一个包含使用 jquery 的 jsp 文件的类制作一个 Web 应用程序。我希望应用程序在提交之前立即触发警报。这在我的真实程序中的某些时候有效，而其他时候警报永远不会触发。我似乎无法确定它始终有效或从不有效的实例。我的错误控制台对此事保持沉默，除非我添加 Firebug 断点。然后它给了我

```
Error: attempt to run compile-and-go script on a cleared scope
Source File: http://code.jquery.com/jquery-1.7.2.min.js
Line: 2 
```

但我不知道那是什么意思。就 Firebug 而言，我不明白为什么评估会在警报消息之前停止。

我试图制作一个记录问题的 sscce，但我想它与我的真实程序太不同了，因为提交从来没有工作过。我将展示我真实程序中的一些代码。（抱歉缺少 SSCCE。）

```
$(document).ready(function() {
    $("#questionDisplay").submit(function() {
        var correctAnswer = $(".correctAnswer").attr("value");
        var answer = "";

        if ($(".multipleChoice").length > 0) {
            answers = $("input:checked");
            for (var obj in answers) {
                answer += obj.attr("value") + "#";
            }
        } else if ($(".fillBlank").length > 0) {
            for (var answerNo = 1; $(".answer" + answerNo).length > 0; ++answerNo) {
                answer += $(".answer" + answerNo).attr("value") + "#";
            }
        } else {
            answer = $(".answer1").attr("value");
        }

        if (answer == correctAnswer) {
            alert("Yes! Correct!");
        } else {
            alert("Sorry, incorrect.");
        }
    });
}); 
```

jsp 是一个巨大的混乱（我们必须使用 scriplets :( ），但如果你想看到它就让我知道。

如何让我的提交处理程序每​​次都工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T02:26:14.320

在您的示例中，`answers`是一个 jQuery 元素集合。使用循环遍历它`for(var obj in answers) { }`实际上是遍历答案的属性，而不是元素本身。因此，在属性上调用 .attr() 是行不通的。

一般来说，如果我看到我的调试器状态 jQuery 有错误，那是我在非 jquery 选定对象上调用 jQuery 方法的 99.9% 的时间。在这种情况下，我在 Chrome 的 JavaScript 控制台中看到了错误，有时结果可能会因不同的控制台而异。

一个好的做法是在存储 jQuery 元素的变量前面加上 $ 以表明它们是 jQuery 对象。例如，`$answers`可以更轻松地跟踪其中包含的内容。

采用：

```
answers.each(function() {
     answer += $(this).attr("value") + "#";
}); 
```

而不是这个：

```
for (var obj in answers) {
    answer += obj.attr("value") + "#";
} 
```

# xml - XSL 转换以从具有匹配 id 的第一个项目复制属性

> ID：11894533
> 
> 赞同：1
> 
> 时间：2012-08-10T02:08:49.027
> 
> 标签：xml, xslt

嗨，这是对此处发布的先前问题的改编。

[XSLT - 从具有匹配名称 id 的前一项中查找元素值 - 使用条件？](https://stackoverflow.com/questions/11879521/xslt-find-element-values-from-first-preceding-item-with-matching-name-id-usi)

我有一个如下所示的 XML。

我想创建一个 xsl 转换，在帖子底部生成理想的 xml。

请注意，在呈现的 XML 中，如果多次使用 Image 节点（由其文件 id 定义），则不存在其后续子元素。例如第三个图像节点，其文件 id 与第一个图像节点相同，不包含子属性和后续值。我想重新添加它们。

我有下面的当前示例 xsl，它基本上可以正常工作，但我想在样式表中添加一个条件评估，上面写着：用英语：如果 'key' 元素不存在，则查找前面的第一个匹配的 'file id' 并使用这些元素的值。这同样适用于“字符串”和“卷轴”元素。（在文件节点中弹出的任何其他内容。

结果将根据匹配文件 id 的第一个实例用所有相关数据填充空文件节点。

为我糟糕的描述道歉。

任何帮助将不胜感激。

XML:

```
<?xml version="1.0"?>
<xmeml>
<boxset>
<stream>
    <track>
        <image>
            <start>0</start>
            <end>90</end>
            <file id="abcde">
                <key>95</key>
                <string>1023</string>
                <time>
                    <reel>142</reel>
                </time>
            </file>
        </image>
        <image>
            <start>90</start>
            <end>120</end>
            <file id="bcdef">
                <key>55</key>
                <string>1023</string>
                <time>
                    <reel>64</reel>
                </time>
            </file>
        </image>
    </track>
    <track>
        <image>
            <start>120</start>
            <end>130</end>
            <file id="abcde"/>
        </image>
        <image>
            <start>130</start>
            <end>180</end>
            <file id="cdefg">
                <key>92</key>
                <string>1023</string>
                <time>
                    <reel>194</reel>
                </time>
            </file>
        </image>    
    </track>
</stream>
</boxset>
</xmeml> 
```

XSLT：标准身份转换

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<!-- identity Pass everything  -->
<xsl:template match="@*|node()">
<xsl:copy>
  <xsl:apply-templates select="@*|node()"/>
</xsl:copy> 
</xsl:template>

</xsl:stylesheet> 
```

如果要填充 XML，他们希望看到它看起来像这样。

理想的 XML：

```
<?xml version="1.0"?>
<xmeml>
<boxset>
<stream>
    <track>
        <image>
            <start>0</start>
            <end>90</end>
            <file id="abcde">
                <key>95</key>
                <string>1023</string>
                <time>
                    <reel>142</reel>
                </time>
            </file>
        </image>
        <image>
            <start>90</start>
            <end>120</end>
            <file id="bcdef">
                <key>55</key>
                <string>1023</string>
                <time>
                    <reel>64</reel>
                </time>
            </file>
        </image>
    </track>
    <track>
        <image>
            <start>120</start>
            <end>130</end>
<!-- ideal data for repeated file "abcde" -->
            <file id="abcde">
                <key>95</key>
                <string>1023</string>
                <time>
                    <reel>142</reel>
                </time>
            </file>
<!-- end ideal repeated data -->
        </image>
        <image>
            <start>130</start>
            <end>180</end>
            <file id="cdefg">
                <key>92</key>
                <string>1023</string>
                <time>
                    <reel>194</reel>
                </time>
            </file>
        </image>    
    </track>
</stream>
</boxset>
</xmeml> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:43:30.477

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kImageById" match="image" use="file/@id"/>

 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match=
  "image[not(generate-id()
            =generate-id(key('kImageById',file/@id)[1])
            )]">
  <xsl:copy>
   <xsl:apply-templates select="@*|start|end"/>
   <xsl:apply-templates select=
   "key('kImageById',file/@id)[1]/*[not(self::start or self::end)]"/>
  </xsl:copy>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<xmeml>
    <boxset>
        <stream>
            <track>
                <image>
                    <start>0</start>
                    <end>90</end>
                    <file id="abcde">
                        <key>95</key>
                        <string>1023</string>
                        <time>
                            <reel>142</reel>
                        </time>
                    </file>
                </image>
                <image>
                    <start>90</start>
                    <end>120</end>
                    <file id="bcdef">
                        <key>55</key>
                        <string>1023</string>
                        <time>
                            <reel>64</reel>
                        </time>
                    </file>
                </image>
            </track>
            <track>
                <image>
                    <start>120</start>
                    <end>130</end>
                    <file id="abcde"/>
                </image>
                <image>
                    <start>130</start>
                    <end>180</end>
                    <file id="cdefg">
                        <key>92</key>
                        <string>1023</string>
                        <time>
                            <reel>194</reel>
                        </time>
                    </file>
                </image>
            </track>
        </stream>
    </boxset>
</xmeml> 
```

**产生想要的正确结果：**

```
<xmeml>
   <boxset>
      <stream>
         <track>
            <image>
               <start>0</start>
               <end>90</end>
               <file id="abcde">
                  <key>95</key>
                  <string>1023</string>
                  <time>
                     <reel>142</reel>
                  </time>
               </file>
            </image>
            <image>
               <start>90</start>
               <end>120</end>
               <file id="bcdef">
                  <key>55</key>
                  <string>1023</string>
                  <time>
                     <reel>64</reel>
                  </time>
               </file>
            </image>
         </track>
         <track>
            <image>
               <start>120</start>
               <end>130</end>
               <file id="abcde">
                  <key>95</key>
                  <string>1023</string>
                  <time>
                     <reel>142</reel>
                  </time>
               </file>
            </image>
            <image>
               <start>130</start>
               <end>180</end>
               <file id="cdefg">
                  <key>92</key>
                  <string>1023</string>
                  <time>
                     <reel>194</reel>
                  </time>
               </file>
            </image>
         </track>
      </stream>
   </boxset>
</xmeml> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:56:45.133

我认为只处理`file`而不用担心会更简单`image`：

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:key name="file" match="file[*]" use="@id"/>

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="file[not(*)]">
    <xsl:copy-of select="key('file', @id)" />
  </xsl:template>

</xsl:stylesheet> 
```

# c# - 以编程方式单击 C# 中的链接

> ID：11894539
> 
> 赞同：0
> 
> 时间：2012-08-10T02:09:45.697
> 
> 标签：c#, html

我正在尝试以编程方式制作脚本。

我设法将洞 html 页面转换为字符串，现在我想以某种方式单击那里的元素。我有点迷路了，所以任何信息都可以提供帮助。

我试图将文档作为 HtmlDocument 获取，但由于某种原因，当我使用 getElementById 方法时，它没有找到该元素。

请，任何信息都会有所帮助。

谢谢。

目前这是我得到的代码，它让我知道我有字符串，它的值是 html 文档，现在我需要一些如何提取相关标签并以编程方式单击它。

感谢您的投入，仍在等待可以帮助我的人。

```
string email = "someemail*";`enter code here`
string pw = "somepass";
string PostData = String.Format("email={0}&pass={1}", email, pw);

CookieContainer cookieContainer = new CookieContainer();

HttpWebRequest req = (HttpWebRequest)HttpWebRequest.Create("http://www.facebook.com/*******");
req.CookieContainer = cookieContainer;
req.Method = "POST";
req.ContentLength = PostData.Length;
req.ContentType = "application/x-www-form-urlencoded";
req.AllowAutoRedirect = true;
req.UserAgent = "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/535.2 (KHTML, like Gecko) Chrome/15.0.874.121 Safari/535.2";

ASCIIEncoding encoding = new ASCIIEncoding();
byte[] loginDataBytes = encoding.GetBytes(PostData);
req.ContentLength = loginDataBytes.Length;
Stream stream = req.GetRequestStream();
stream.Write(loginDataBytes, 0, loginDataBytes.Length);

HttpWebResponse webResp = (HttpWebResponse)req.GetResponse();

Stream datastream = webResp.GetResponseStream();
StreamReader reader = new StreamReader(datastream);
string sLine = "";
string json = "";
while (sLine != null)
{
    sLine = reader.ReadLine();
    json += sLine;
}
json.ToString(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:14:33.567

也许您可能想看看 WaitN，它可以让您真正轻松地完成所有这些工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T02:15:11.413

“点击链接”与发送 HTTP 请求相同。如果您可以从您拥有的文档中解析 URI，则可以单独创建 HTTP 请求并发送该请求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T09:29:24.023

单击链接是通过为链接的 href 发出 HTTP-Get 来完成的。

如果存在 JavaScript 交互性，那么您需要获取一个 webbrowser 元素，并注入一个 javascript，在 document.ready 上执行`document.getElementById("whatever").click()`

请参阅 [如何以编程方式单击带有 javascript 的链接？](https://stackoverflow.com/questions/902713/how-do-i-automatically-click-a-link-with-javascript)

您可以使用 HTML 敏捷包来解析 HTML 文档并提取 HREF 参数。

# javascript - 另一个表单中的表单 - 在另一个表单中使用 Blueimp 文件上传器

> ID：11894544
> 
> 赞同：2
> 
> 时间：2012-08-10T02:10:26.897
> 
> 标签：javascript, html, css

我正在构建一种内部通信工具，用户可以在其中发表评论和附加文件。

我正在使用蓝色 imp 文件上传器：[https ://github.com/blueimp/jQuery-File-Upload/](https://github.com/blueimp/jQuery-File-Upload/)

我在这里做了一个jsfiddle：http: [//jsfiddle.net/denislexic/s56xG/12/](http://jsfiddle.net/denislexic/s56xG/12/)

但为了简化，我在这里做了一个摘录：

```
<form action="/path/to/submit/" method="post" style="padding:10px;">
    <textarea style="display:block; width:60%;"></textarea>

    <form id="fileupload" action="server/php/" method="POST" enctype="multipart/form-data">
        <!-- Blue imp form stuff in here -->
    </form>

    <a href="#" class="btn JS_fileUpload">Attach file</a>
    <button type="submit" class="btn btn-primary">Post</button>
</form> 
```

问题是，设计明智，我真的需要提交按钮在文本区域和文件上传器之后，文件上传器必须在两者之间......所以这意味着我必须有嵌套表单（这不会不工作）？还有其他解决方案吗？

PS：我看过这个问题，但似乎不相关：[提交位于另一个表单中的表单](https://stackoverflow.com/questions/1603871/submitting-form-located-within-another-form)

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-03T10:00:39.660

一种简单的方法是不使用`<form>`，而是使用另一个元素，例如 a `div`：

```
<div id="fileupload"> 
```

您需要更新脚本并设置`url`参数：

```
 $('#fileupload').fileupload({
        url: 'http://www.example.com/uploadFile.php', 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T02:47:07.890

您可以使用 CSS 将内容移动到适当的位置，同时保持有效的 HTML：

```
<style type="text/css">
#container {
  position: relative;
}
#content0 {
  position: absolute;
  top: 0;
  left: 0;
}
#content1 {
  position: absolute;
  top: 3ex;
  left: 0;
  border: 1px solid blue;
  padding: 5px;
}
#sub0 {
  position: absolute;
  top: 8ex;
  left: 0;
}
</style>

<div id="container">

<form>
  <div id="content0">
    <input name="foo">
    <input id="sub0" type="submit"> 
  </div>
</form>

<form>
  <div id="content1">
    <input name="bar">
    <input type="submit" value="Submit this bit"> 
  </div>
</form>

</div> 
```

# python - Python ObjectListView在列表为空时添加动画

> ID：11894546
> 
> 赞同：1
> 
> 时间：2012-08-10T02:11:06.000
> 
> 标签：python, objectlistview

现在，我正在使用 ObjectListView 包编写一个 python 程序。当列表为空时，后台会显示“此列表为空”字样。但我想把它改成动画。如何实现？我是否必须更改 ObjectListView 库才能实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T12:52:41.120

“此列表为空”显示在`StaticText`控件（名为`stEmptyListMsg`）中。`SetEmptyListMsg`您可以通过分别调用和来更改消息和字体`SetEmptyListMsgFont`。

如果您想用动画替换，那么我认为您应该基于or`StaticText`编写自己的自定义。`ListCtrl``ObjectListView``ListCtrl`

此链接可以帮助您创建动画：[http ://www.daniweb.com/software-development/python/code/216673/wxpython-animated-gif#](http://www.daniweb.com/software-development/python/code/216673/wxpython-animated-gif#)

# ios - UITableView 设置表头大小

> ID：11894547
> 
> 赞同：0
> 
> 时间：2012-08-10T02:11:12.013
> 
> 标签：ios, uitableview

如何更改表格视图标题的宽度？

我有一个 UITableView 和一个标题，它是在 ViewForHeaderInSection 中设置的 UIImageView。

当我运行应用程序时，标题会延伸到屏幕的宽度，而行（也是图像）是我想要的宽度。

高度似乎还可以，只是宽度是问题所在。

当我创建图像以设置为标题时，我为它制作了一个框架，但它没有做任何事情。

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

UIImage *tableHeaderImage = [UIImage imageNamed:@"tableTop"];
UIImageView *headerImageView = [[[UIImageView alloc] initWithImage:tableHeaderImage] autorelease];

headerImageView.frame = CGRectMake(0,0,277,7);
NSLog(@"%@",headerImageView.frame.size.width);    

return headerImageView;
} 
```

ps它都是以编程方式编码的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T03:42:32.733

您需要返回一个`UIView`. 设置完成后，将图像视图添加为子视图并返回视图：

```
- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, CGRectGetWidth(tableView.frame), 7);
    UIImage *tableHeaderImage = [UIImage imageNamed:@"tableTop"];
    UIImageView *headerImageView = [[[UIImageView alloc] initWithImage:tableHeaderImage] autorelease];

    headerImageView.frame = CGRectMake(0,0,277,7);
    [view addSubview headerImageView];
    return view;
} 
```

# eclipse - nsight eclipse for mac lion 调试错误

> ID：11894549
> 
> 赞同：0
> 
> 时间：2012-08-10T02:11:23.177
> 
> 标签：eclipse, cuda, nsight, cuda-gdb

我正在使用 nsight eclipse edition for mac 来调试我的 cuda 代码。我能够从终端运行 cuda-gdb 一切正常，但无法使用 Nsight 中的调试功能。每当我开始调试时，都会弹出一个错误窗口，提示“最终启动序列中的错误连接已关闭”。我的操作系统是 Mac Lion (10.7.4)。

我知道 Cuda 5.0 中最重要的是使用 eclipse 进行交互式调试，但遗憾的是，除非我切换到 Windows 或 Linux，否则我将无法使用它。如果有人看到此问题或知道此问题的解决方法，请告诉我，我们将非常感谢您的帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T14:50:13.340

我最近在linux中遇到了这个问题。

最终启动序列中的错误连接已关闭，这意味着 nsight 无法正确启动调试器。

首先，您必须确保可以在终端中运行 cuda-gdb。只需在终端中键入 cuda-gdb，如果它说 cuda-gdb 在 /usr/lib 中找不到某些库，只需下载或重新链接它。完成此操作后，在终端中重新运行 cuda-gdb，它应该可以正常工作。然后你可以使用nsight调试工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:10:55.983

恐怕您在 CUDA 5.0 Toolkit 中遇到了一个已知问题。由于最后一分钟的更改，cuda-gdb（它是一个 shell 脚本）在 Mac OS X 中并不完全有效。要解决这个问题：

1.  编辑 cuda-gdb shell 脚本。
2.  将 line`#!/bin/sh`设为此脚本中的第一行。
3.  保存更改

对于给您带来的不便，我们深表歉意。这个（以及许多其他）问题将在即将发布的 CUDA 5.0 RC 版本中得到修复。

# c# - 从 LINQ Select 填充数组的给定维度

> ID：11894550
> 
> 赞同：0
> 
> 时间：2012-08-10T02:12:06.377
> 
> 标签：c#, .net, multidimensional-array

我想从 LINQ 选择中填充多维数组的给定维度。循环将是一种明显的方式，但我想要一个“最佳实践”的建议。

例如插入这个的最好方法是什么：

```
this.Facts.Select(f =>f.FactIc).ToArray() 
```

这会将一个 long 数组返回到该数组的第二维中：

```
long[,] vals = new long[1, factCount]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:20:28.103

数组数组呢？如果您发现您经常需要替换 1 整行的内容，那么也许每一行本身应该是一个数组。您甚至可以定义自己的包含行数据的类，然后定义该类的数组。

顺便说一句，你为什么有 ToList() 和 ToArray()？

编辑：假设结果必须是二维数组，我将只使用下面的 foreach 版本：

像这样定义 ForEach（这是我最喜欢的扩展方法）：

```
 public static IEnumerable<TSource> ForEach<TSource>(this System.Collections.Generic.IEnumerable<TSource> source, Action<TSource> action)
    {
        ThrowIfNull(source, "source");
        ThrowIfNull(action, "action");

        foreach (TSource item in source)
        {
            action(item);
        }
        return source;
    }

    public static IEnumerable<TSource> ForEach<TSource>(this System.Collections.Generic.IEnumerable<TSource> source, Action<TSource, int> action)
    {
        ThrowIfNull(source, "source");
        ThrowIfNull(action, "action");

        int index = 0;
        foreach (TSource item in source)
        {
            action(item, index);
            index++;
        }
        return source;
    } 
```

然后就做

```
this.Facts.Select(f =>f.FactIc).ForEach((f, i) => vals[1, i] = f); 
```

你真的不能比这更有效率。开始时数据不在平面数组中，因此您需要以某种方式迭代每个项目并复制数据。这避免了制作数组的中间副本等。

# ios - UILabel 在 animateWithDuration 后消失

> ID：11894554
> 
> 赞同：2
> 
> 时间：2012-08-10T02:12:51.373
> 
> 标签：ios, objective-c-blocks

我有一个`UILabel`可以滑入和滑出的视图，但是在滑回后它消失了。我希望它坚持下去。

我怎样才能做到这一点？另外，为什么会这样？

这是代码：

```
[UIView animateWithDuration:0.1
                          delay:0.0
                        options:UIViewAnimationOptionAutoreverse
                     animations:^{
                         [self.listLabel setFrame:CGRectMake(325, 141, 320, 181)];
                     }
                     completion:nil]; 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:26:45.973

在[官方文档中](https://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html)

`UIViewAnimationOptionAutoreverse` 前后运行动画。必须与`UIViewAnimationOptionRepeat`选项结合使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T03:02:07.473

为什么不对标签使用 UIViewAnimationOptionCurveEaseOut 和 UIViewAnimationOptionCurveEaseIn 动画选项？只需设置标签的 frame.origin.x = [在其超级视图边界的右侧之外] 并在您想使用 EasyOut 动画再次滑入时将其设置回原始位置。这就是我要说的...

```
CFRect frame = self.listLabel.frame;
//Point to hide your label by sliding it outside the right side of it's parent's view.
// mask or clipToBounds of parent's view must be YES
frame.origin.x = [self.listLabel.superview.frame.size.width]; 
[UIView animateWithDuration:0.1
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseIn
                 animations:^{
                     [self.listLabel setFrame:frame];
                 }
                 completion:nil]; 
```

而当你想滑回时，使用相反的动画和标签的原始位置，当然你需要将它的原始位置存储在某个地方以便你可以将它滑回。

```
 [UIView animateWithDuration:0.1
                      delay:0.0
                    options:UIViewAnimationOptionCurveEaseOut
                 animations:^{
                     [self.listLabel setFrame:label_original_frame];
                 }
                 completion:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-09T12:38:56.127

由于似乎仍然没有有效的答案，我提出了一种（现在可能的）方法：

在 Xcode 6 中，应用在模拟器中运行，转到顶部栏中的“调试”，选择“查看调试”和“捕获视图层次结构”。然后去搜索你丢失的标签。您还可以在右侧 Xcode 栏中查看标签的属性等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-13T17:46:18.927

`UIViewAnimationOptionAutoreverse`专为循环动画而设计。要将某些东西从屏幕上反弹回来，您应该将其编写为 2 个动画：

```
CGRect originalFrame = self.listLabel.frame;
[UIView animateWithDuration:0.05
                      delay:0.0
                    options:UIViewAnimationOptionLayoutSubviews
                 animations:^{
                     [self.listLabel setFrame:CGRectMake(325, 141, 320, 181)];
                 }
                 completion:^(BOOL finished){
                    [UIView animateWithDuration:0.05
                                          delay:0.0
                                        options:UIViewAnimationOptionLayoutSubviews
                                     animations:^{
                                         [self.listLabel setFrame:originalFrame];
                                     }
                                     completion:nil];
                 }
 ]; 
```

# asp.net-mvc - 如何阻止 JsonResult 发送模型属性

> ID：11894555
> 
> 赞同：0
> 
> 时间：2012-08-10T02:12:50.320
> 
> 标签：asp.net-mvc

我在下面有一个模型类：

```
class Person
{
   string FirstName {get;set}
   string ABNNumber {get;set} 
} 
```

该对象通过 JsonResult 发送到 UI。问题是由于安全风险，我不想将 ABNNumber 发送到 UI。

无论如何（任何属性）我可以用来实现上述目标吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T05:15:05.600

使用属性 [ScriptIgnore]。我会帮你的：

```
class Person
{
    string FirstName {get;set}
    [ScriptIgnore]
    string ABNNumber {get;set} 
} 
```

# java - 在 Android 中将 PullToRefresh 与 UITableView 一起使用

> ID：11894561
> 
> 赞同：0
> 
> 时间：2012-08-10T02:13:42.910
> 
> 标签：java, android, uitableview, listview

我尝试使用[Chrisbanes 的 Pull-to-Refresh 和 thiagolocatelli 的](https://github.com/chrisbanes/Android-PullToRefresh)android [-uitableview](https://github.com/thiagolocatelli/android-uitableview)。

因为它们都扩展了 LinearLayout。所以我尝试改变：

```
UITableView extends PullToRefreshListView 
```

问题是：

*   我无法拉出我的 UITableView

![在此处输入图像描述](../Images/238d14f8c1d509bf9c762e8de66c5b72.png)

*   因为 UITableView 和 PullToRefreshListView 的布局都是 LinearLayout。我怎样才能改变我的布局是这样的：

![在此处输入图像描述](../Images/f5ae28612a17a0c0a8f72a5af0714e0c.png)

谢谢

* * *

**更新** 基于克里斯班斯的回答，我有我的布局

```
<com.mypacket.widget.PullToRefreshScrollView
            android:id="@+id/observable_scroll_view"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

            <com.mypacket.widget.UITableView
                android:id="@+id/tableView"
                style="@style/UITableView" />
        </com.mypacket.widget.PullToRefreshScrollView> 
```

我的代码：

```
mObservableScrollView = (PullToRefreshScrollView) findViewById(R.id.observable_scroll_view);
mTableView = (UITableView) findViewById(R.id.tableView);

        // Set a listener to be invoked when the list should be refreshed.
        mObservableScrollView.setOnRefreshListener(new OnRefreshListener<ScrollView>() {

            @Override
            public void onRefresh(PullToRefreshBase<ScrollView> refreshView) {
                new GetDataTask().execute();
            }
        });

        mObservableScrollView.setMode(Mode.PULL_UP_TO_REFRESH);
private class GetDataTask extends AsyncTask<Void, Void, String> {

        @Override
        protected String doInBackground(Void... params) {
            // Simulates a background job.
            try {
                Thread.sleep(1000);
                Log.i(TAG, "REFRESHHHHHHHHHHHHHHHHHHHHHHHHHHH");
            } catch (InterruptedException e) {
            }
            return "";
        }

        @Override
        protected void onPostExecute(String result) {
            // Call onRefreshComplete when the list has been refreshed.
            mObservableScrollView.onRefreshComplete();
            super.onPostExecute(result);
        }
    } 
```

但没有任何改变，我无法滚动，无法拉动

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T09:10:12.250

我最近添加了 PullToRefreshScrollView 这应该可以帮助你。只需将您的 ScrollView 替换为 PullToRefreshScrollView。

PullToRefreshScrollView 目前在 dev 分支中，但在下一个版本中将在 master 中。

# javascript - KinectJS：图像调整大小后确定新 X、Y 坐标所需的算法

> ID：11894567
> 
> 赞同：1
> 
> 时间：2012-08-10T02:13:53.553
> 
> 标签：javascript, jquery, algorithm, html, math

**背景：**

该应用程序允许用户上传自己的照片，然后将一副眼镜戴在脸上，看看它的样子。在大多数情况下，它工作正常。用户选择两个瞳孔的位置后，我根据瞳孔距离与眼镜中心点之间已知距离的比率自动缩放图像。那里一切正常，但现在我需要自动将眼镜图像放在眼睛上。

我正在使用 KinectJS，但问题不在于该库或 javascript.. 它更多的是算法要求

**我必须做什么：**

1.  瞳孔之间的距离（眼睛）
2.  瞳孔之间的距离（眼镜）
3.  眼镜宽度
4.  眼镜高度
5.  缩放比例

**一些代码：**

```
//.. code before here just zooms the image, etc..

//problem is here (this is wrong, but I need to know what is the right way to calculate this)
var newLeftEyeX = self.leftEyePosition.x * ratio;
var newLeftEyeY = self.leftEyePosition.y * ratio;

//create a blue dot for testing (remove later)
var newEyePosition = new Kinetic.Circle({
    radius: 3,
    fill: "blue",
    stroke: "blue",
    strokeWidth: 0,
    x: newLeftEyeX,
    y: newLeftEyeY
});
self.pointsLayer.add(newEyePosition);

var glassesWidth = glassesImage.getWidth();
var glassesHeight = glassesImage.getHeight();

// this code below works perfect, as I can see the glasses center over the blue dot created above
newGlassesPosition.x = newLeftEyeX - (glassesWidth / 4);
newGlassesPosition.y = newLeftEyeY - (glassesHeight / 2); 
```

**需要**

一个数学天才给我算法来确定图像大小调整后新的左眼位置应该在哪里

**更新**

在过去 6 个小时左右研究了这个之后，我想我需要做一些“翻译变换”，但我看到的例子只允许通过 x 和 y 量来设置它。而我只会知道底层图像。这是我找到的示例（对我没有帮助）：

[http://tutorials.jenkov.com/html5-canvas/transformation.html](http://tutorials.jenkov.com/html5-canvas/transformation.html)

这是一些看起来很有趣的东西，但它适用于 Silverlight：

[获取变换后的元素位置](https://stackoverflow.com/questions/5266506/get-element-position-after-transform)

有没有办法在 Html5 和/或 KinectJS 中做同样的事情？或者也许我在这里走错了路……有什么想法吗？

**更新 2**

我试过这个：

```
// if zoomFactor > 1, then picture got bigger, so...
if (zoomFactor > 1) {
    // if x = 10 (for example) and if zoomFactor = 2, that means new x should be 5
    // current x / zoomFactor => 10 / 2 = 5
    newLeftEyeX = self.leftEyePosition.x / zoomFactor;
    // same for y
    newLeftEyeY = self.leftEyePosition.y / zoomFactor;
}
else {
    // else picture got smaller, so...
    // if x = 10 (for example) and if zoomFactor = 0.5, that means new x should be 20
    // current x * (1 / zoomFactor) => 10 * (1 / 0.5) = 10 * 2 = 20
    newLeftEyeX = self.leftEyePosition.x * (1 / zoomFactor);
    // same for y
    newLeftEyeY = self.leftEyePosition.y * (1 / zoomFactor);
} 
```

那没有用，所以我尝试了Rody Oldenhuis的建议的实现（感谢Rody）：

```
var xFromCenter = self.leftEyePosition.x - self.xCenter;
var yFromCenter = self.leftEyePosition.y - self.yCenter;

var angle = Math.atan2(yFromCenter, xFromCenter);
var length = Math.hypotenuse(xFromCenter, yFromCenter);

var xNew = zoomFactor * length * Math.cos(angle);
var yNew = zoomFactor * length * Math.sin(angle);

newLeftEyeX = xNew + self.xCenter;
newLeftEyeY = yNew + self.yCenter; 
```

但是，这仍然没有按预期工作。所以，我不确定目前的问题是什么。如果有人以前使用过 KinectJS 并且知道问题可能是什么，请告诉我。

**更新 3**

我在纸上检查了罗迪的计算，它们看起来很好，所以这里显然有其他东西把事情搞砸了。我在缩放因子 1 和 2 处得到了左瞳孔的坐标。有了这些坐标，也许有人可以找出问题所在是：

缩放系数 1：x = 239，y = 209

缩放系数 2：x = 201，y = 133

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:40:32.593

好的，因为这是一个算法问题，我将保持这个通用性并且只编写伪代码。

如果我理解正确，您想要的是以下内容：

1.  变换所有坐标，使坐标系的原点位于缩放中心（通常是中心像素）

2.  计算从这个新原点到兴趣点的直线与正 x 轴的夹角。计算这条线的长度。

3.  缩放后的新 x 和 y 坐标是通过拉长这条线来定义的，使得新线是缩放因子乘以原始线的长度。

4.  将新找到的 x 和 y 坐标转换回对计算机有意义的坐标系（例如，左上像素 = 0,0）

5.  对所有兴趣点重复。

在伪代码中（带有公式）：

```
x_center = image_width/2
y_center = image_height/2

x_from_zoom_center = x_from_topleft - x_center
y_from_zoom_center = y_from_topleft - y_center

angle  = atan2(y_from_zoom_center, x_from_zoom_center)
length = hypot(x_from_zoom_center, y_from_zoom_center)

x_new = zoom_factor * length * cos(angle)
y_new = zoom_factor * length * sin(angle)

x_new_topleft = x_new + x_center
y_new_topleft = y_new + y_center 
```

请注意，这假设用于长度和宽度的像素数在缩放后保持不变。另请注意，应该进行一些舍入（保持所有双精度，并且在所有计算*后只舍入为 int）*

在上面的代码中，`atan2`是四象限反正切，在大多数编程语言中都可用，并且`hypot`是简单`sqrt(x*x + y*y)`的，但计算得更仔细（例如，为了避免溢出等），在大多数编程语言中也可用。

这真的是你所追求的吗？

# c# - 存储在 Windows 窗体应用程序中发生的所有事件

> ID：11894569
> 
> 赞同：0
> 
> 时间：2012-08-10T02:14:15.270
> 
> 标签：c#, .net, winforms

有没有办法将所有窗口表单事件存储在列表中，以便用户下次打开表单时可以重新应用所有这些事件？

**示例：**假设用户单击表单内的按钮并键入字符串，然后关闭表单。一段时间后，用户再次重新打开应用程序，并重新初始化表单，以便恢复单击操作和用户输入的字符串。（有点像自动保存功能。）

这样做的目的：

*   暂停后恢复。
*   允许用户撤消他们的工作（撤消按钮）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T03:21:35.960

我仍然不确定我是否理解你，但你说你想获得一个事件列表，好吧，这可以使用反射来完成。这是一个很好的链接： [http ://www.switchonthecode.com/tutorials/csharp-tutorial-using-reflection-to-get-object-information](http://www.switchonthecode.com/tutorials/csharp-tutorial-using-reflection-to-get-object-information)

你的例子：

> 假设用户单击表单内的按钮并输入字符串，然后关闭表单，一段时间后再次打开应用程序，表单可以重新初始化表单并应用单击操作和他输入的字符串（有点像自动保存功能）。

- 您可以在不获取事件列表的情况下执行此操作。所以我不明白为什么你必须这样做。有多种方法可以做到这一点。如果您使用的是 winform，一个基本的解决方案是使用设置页面定义属性。看看这个：http: [//msdn.microsoft.com/en-us/library/cftf714c (VS.90).aspx](http://msdn.microsoft.com/en-us/library/cftf714c(VS.90).aspx)

使用项目设计器的设置页面来指定项目的应用程序设置。应用程序设置使您能够动态地存储和检索应用程序的属性设置和其他信息。它们还使您能够在客户端计算机上维护自定义应用程序和用户首选项。有关详细信息，请参阅应用程序设置。

> 要访问“设置”页面，请在解决方案资源管理器中选择一个项目节点，然后在“项目”菜单上单击“属性”。当项目设计器出现时，单击设置选项卡。

您可以建立航路点（借用航空术语）并定期将值保存到您的设置集合中，而无需用户执行任何操作，就像您提供保存按钮时他们必须执行的操作一样。但这只是提出了要点，低级的保存按钮出了什么问题。这是一个众所周知的约定。人们知道，如果他们不想丢失数据，就应该不时保存。

# php - 删除除数字和减号 PHP preg_replace 之外的所有内容

> ID：11894570
> 
> 赞同：8
> 
> 时间：2012-08-10T02:14:16.933
> 
> 标签：php, regex, preg-replace

我目前有

```
preg_replace('/[^0-9]/s', '', $myvariable); 
```

例如输入为 GB -3。我当前的行给了我值 3。我希望能够保持减号，以便该值显示 -3 而不是当前输出 3。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-10T02:16:16.550

尝试这个 ：

```
preg_replace('/[^\d-]+/', '', $myvariable); 
```

正则表达式的细分：

*   `//`两边都是正则表达式分隔符 - 里面的一切都是正则表达式
*   `[]`表示这是字符类。[角色等级规则改变](http://www.regular-expressions.info/charclass.html)
*   `^`内部字符类代表“不”。
*   `\d`是 [0-9] 的缩写，唯一的区别是它可以在字符类的内部和外部使用
*   `-`将匹配减号
*   `+`最后是量词，表示这应该匹配一个或多个字符

# ssl - Heroku SSL - 更新 DNS 条目

> ID：11894573
> 
> 赞同：1
> 
> 时间：2012-08-10T02:14:47.543
> 
> 标签：ssl, heroku, dns, ssl-certificate

我最近为 Heroku 添加了 SSL Endpoint 插件以启用 SSL。我已成功购买并上传证书，并已通过 heroku certs 命令验证：

```
Endpoint                  Common Name(s)                     Expires               Trusted
------------------------  ---------------------------------  --------------------  -------
app-1234.herokussl.com    mydomain.com mydomain.com.au       2013-08-09 12:26 EST  True 
```

我被卡住的步骤是配置 DNS（我正在为 Heroku 使用**Zerigo DNS**提供程序/插件）：

目前，我有以下 DNS 配置：

主机：**www.mydomain.com**

类型：**CNAME**

数据：**proxy.heroku.com**

最重要的是，我有许多 mydomain.com 的 A 记录，它们指向不同的 IP 地址。所有配置都是通过执行以下命令自动生成的：

```
heroku domains:add mydomain.com 
```

对于这种情况的 DNS 配置的任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T15:46:37.177

您希望 CNAME 指向`app-1234.herokussl.com`不`proxy.heroku.com`

# java - 在android中制作画布动画

> ID：11894578
> 
> 赞同：5
> 
> 时间：2012-08-10T02:15:47.533
> 
> 标签：java, android

我是 android 新手，在理解如何为画布设置动画时遇到问题。基本上，当球应该从楼梯上掉下来时，我画了一个红球和一个楼梯

这就是它的样子。

![在此处输入图像描述](../Images/11f5dd2ad86cbb3af846dffb22f33010.png)

谁能帮助我应该使用什么方法？如果你能给我提供一个非常有用的源代码。

这是我的源代码：

**绘图视图.java**

```
package com.ballandstair;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Path;
import android.view.View;

public class DrawingView extends View {
    DrawingView(Context context) {
        super(context);
    }

    protected void onDraw(Canvas canvas){
        super.onDraw(canvas);
        Paint paint = new Paint();
        Path path = new Path();

        paint.setStyle(Paint.Style.FILL);
        paint.setColor(Color.RED);
        paint.setAntiAlias(true);
        canvas.drawCircle(100, 50, 25, paint);

        paint.setColor(Color.BLUE);
        paint.setStyle(Paint.Style.FILL);
        path.moveTo(75, 75);
        path.lineTo(125, 75);
        path.lineTo(125, 125);
        path.lineTo(175, 125);
        path.lineTo(175, 175);
        path.lineTo(225, 175);
        path.lineTo(225, 225);
        path.lineTo(275, 225);
        path.lineTo(275, 275);
        path.lineTo(325, 275);
        path.lineTo(325, 325);
        path.lineTo(75, 325);
        path.close();
        canvas.drawPath(path, paint);

    }
} 
```

**MainActivity.java**

```
package com.ballandstair;

import android.app.Activity;
import android.os.Bundle;

public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        DrawingView drawing = new DrawingView(this);
        setContentView(drawing);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:35:38.867

基本上任何动画逻辑都由 3 个组件组成：

*   参数：要绘制的对象的位置、旋转和比例；

*   线程：您可以选择使用 2 个线程分别绘制和更新对象属性（位置、旋转和缩放）或在一个线程中完成。

*   无限循环：绘制 -> 更新 -> 绘制 ... 无限循环

有很多方法可以实现它们，我只能推荐一些你可以使用的 API：

*   [View.invalidate()](http://developer.android.com/reference/android/view/View.html#invalidate%28%29)，使用它来请求框架重绘您的视图，因此您的 onDraw() 方法将被调用。

*   [View.postDelayed()](http://developer.android.com/reference/android/view/View.html#postDelayed(java.lang.Runnable, long)) ，用这个在末尾做无限循环你的 onDraw() 方法来调用 View.invalidate()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T02:38:45.790

您将需要（至少）做两件事：

1.  修改您的代码，使球的位置可变。这不应该太难。
2.  有一种方法可以更新定义球位置的变量并触发自定义视图的重绘，以便随着时间的推移，球看起来会遵循您想要的路径。

第二步需要一点小心。您可能很想编写一个循环来调用`Thread.sleep(frameRate)`（其中`frameRate`是帧之间的毫秒数），更新球的位置，然后调用`invalidate()`您的自定义视图来触发重绘。这样做的问题是您无法暂停事件线程。（再次）有两种处理方法：

1.  创建一个具有动画循环的工作线程。它不能`invalidate()`直接调用，但它可以调用`postInvalidate()`相同的效果。
2.  `Runnable`在其方法中声明一个`run()`更新球的位置，调用`invalidate()`，然后要求视图`Runnable`在延迟`frameRate`（通过调用`postDelayed()`）后再次运行自身。

这两种方法都是合理的方法。您还需要知道动画何时结束的逻辑，并且您可能希望让用户控制动画何时开始或允许重播。

# python - 为什么追加用新元素覆盖列表中的所有内容？

> ID：11894580
> 
> 赞同：3
> 
> 时间：2012-08-10T02:16:38.087
> 
> 标签：python, list, append, overwrite

我正在编写一个读取 CSV 文件并创建双端队列列表的 Python 脚本。如果我在添加之前准确打印出添加到列表中的内容，它看起来就像我想要的，但是当我打印出列表本身时，我可以看到 append 正在用最新的元素覆盖列表中的所有元素。

```
 # Window is a list containing many instances            
def slideWindow(window, nextInstance, num_attributes):
    attribute = nextInstance.pop(0)
    window.popleft()
    for i in range(num_attributes):
        window.pop()
    window.extendleft(reversed(nextInstance))
    window.appendleft(attribute)
    return window

def convertDataFormat(filename, window_size):
    with open(filename, 'rU') as f:
        reader = csv.reader(f)

        window = deque()
        alldata = deque()

        i = 0
        for row in reader:
            if i < (window_size-1):
                window.extendleft(reversed(row[1:]))
                i+=1
            else:
                window.extendleft(reversed(row))
                break

        alldata.append(window)

        for row in reader:
            window = slideWindow(window, row, NUM_ATTRIBUTES)
            alldata.append(window)
#             print alldata

        f.close()
        return alldata 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T02:35:43.837

这真的很难从这段代码中跟踪你到底想要什么。我怀疑问题出在以下几点：

```
alldata.append(window)

for row in reader:
    window = slideWindow(window, row, NUM_ATTRIBUTES)
    alldata.append(window) 
```

请注意，在您的`slideWindow`函数中，*您修改了输入 deque* ( `window`)，然后返回修改后的`deque`. 因此，您将 a`deque`放入列表的第一个元素中，然后修改该对象（内部`slideWindow`）并将对同一对象的*另一个引用*附加到您的列表中。

那是你打算做的吗？

简单的解决方法是复制`window`输入`slideWindow`并修改/返回副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T02:30:54.337

我不确定，但我怀疑它可能类似于这个问题[http://forums.devshed.com/python-programming-11/appending-object-to-list-overwrites-previous-842713。 .html](http://forums.devshed.com/python-programming-11/appending-object-to-list-overwrites-previous-842713.html) _

# c++ - C++ 使用两个 const 参数调用非常量运算符重载

> ID：11894582
> 
> 赞同：1
> 
> 时间：2012-08-10T02:16:59.570
> 
> 标签：c++, operator-overloading

我已经为 2D 向量（和标量）重载了`operator-`(and `-=`)：

```
Vector2D Vector2D::operator-(const Vector2D& rhs) {
    return Vector2D(this->GetX() - rhs.GetX(), this->GetY() - rhs.GetY());
} 
```

为了让这个电话不抱怨`no operator '-' matches these arguments`我必须这样做：

```
a2de::Vector2D Vector2D::GetFacingVector(const Vector2D& target, const Vector2D& source) {
    a2de::Vector2D facingVec(const_cast<Vector2D&>(target) - const_cast<Vector2D&>(source));
    return facingVec;
} 
```

或这个：

```
a2de::Vector2D Vector2D::GetFacingVector(const Vector2D& target, const Vector2D& source) {
    a2de::Vector2D facingVec(Vector2D(target) - Vector2D(source));
    return facingVec;
} 
```

这两件事似乎都是一件非常糟糕的事情。（不支持短语“仅`const_cast`在您知道自己在做什么时使用，因为编译器会假设您这样做！”）

这些是正确的还是有更好的方法来完成同样的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:21:14.090

您的运营商应该是：

```
Vector2D Vector2D::operator-(const Vector2D& rhs) const 
```

注意**const**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T02:21:40.410

你`operator-`应该被声明为一个`const`成员函数，这意味着它承诺不会改变`*this`：

```
Vector2D Vector2D::operator-(const Vector2D& rhs) const {
    return Vector2D(this->GetX() - rhs.GetX(), this->GetY() - rhs.GetY());
} 
```

或者更好的是，使其成为非成员，以便隐式转换可以发生在减号的两侧，而不仅仅是右侧：

```
inline Vector2D operator-(const Vector2D& lhs, const Vector2D& rhs) {
    Vector2D result(lhs);
    result -= rhs;
    return result;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T02:22:26.493

有很多使用方法`const`。这里有一些可能会解决您的问题

```
Vector2D Vector2D::operator-(const Vector2D& rhs) const
{
    return Vector2D(this->GetX() - rhs.GetX(), this->GetY() - rhs.GetY());
} 
```

注意`const`方法末尾的 ？这意味着该方法保证在其作用域内**不会更改任何成员变量**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T02:20:13.203

尝试将 operator- 标记为 const 成员函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-10T02:22:28.790

我最好尽量不写那些浮现在脑海中的词。可以这么说，他们会导致对这个答案的极度反对，甚至可能会拖累 Reddit 人群。无论如何，您的成员函数不是`const`，因此必须在非`const`参数上调用它。

这是直接的技术修复：

```
Vector2D Vector2D::operator-(const Vector2D& rhs) const
{
    return Vector2D(this->GetX() - rhs.GetX(), this->GetY() - rhs.GetY());
} 
```

这是一种更好的方法，将运算符作为独立函数：

```
Vector2D operator-( Vector2D const& a, Vector2D const& b)
{
    return Vector2D( a.GetX() - b.GetX(), a.GetY() - b.GetY() );
} 
```

最后，考虑命名。你写过`getSin( angle )`吗？不？

```
Vector2D operator-( Vector2D const& a, Vector2D const& b)
{
    return Vector2D( a.x() - b.x(), a.y() - b.y() );
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-10T02:41:12.680

另一种可能性是使运算符成为非成员函数。这样你就不会遇到问题。此外，如果您有构造函数来执行此操作，则两个参数都可以转换为 Vector2D。

```
class Vector2D
{
...
    Vector2D& operator-=(const Vector2D& rhs)
    {
      this->x -= rhs.GetX();
      this->y -= rhs.GetY();
      return *this;
    }
...
};

Vector2D Vector2D::operator-(const Vector2D& lhs, const Vector2D& rhs)
{
  Vector2D temp(lhs);
  return temp -= rhs;
} 
```

标准中的大多数非修改算术运算符都是这样的非成员对称的。

# java - 多个 Quartz 调度程序运行相同的作业

> ID：11894583
> 
> 赞同：0
> 
> 时间：2012-08-10T02:17:24.250
> 
> 标签：java, quartz-scheduler

我四处寻找我的情况，但发现许多线程让不同机器上的多个石英调度程序运行一次工作。我的情况正好相反。我们在负载均衡器后面有多个 Web 服务器，它们都使用石英并连接到同一个数据库。其中一项工作是将日志文件从第三方应用程序加载到数据库中。当作业被触发时，只有一个 Web 服务器会接收它。我正在尝试找到一种解决方案来安排一个预定的作业，当它被触发时，所有附加的 Web 服务器都会将其拾取并开始处理来自该第三方应用程序的该计算机上的日志。

# xml - Actionscript htmlText + embedFonts 不显示粗体文本

> ID：11894585
> 
> 赞同：0
> 
> 时间：2012-08-10T02:18:01.073
> 
> 标签：xml, flash, text, actionscript, htmltext

似乎有很多类似的问题，但没有明确的答案。

我的项目是使用 Flash 的 Actionscript3。我使用XML 文件中的**htmlText将文本加载到动态****TextField中。**

 **一切正常，文本格式很好（使用 TextFormat），但字体不正确。所以我使用**textField.embedFonts = true**。

现在字体是正确的，但我的 html 标签 ( `<b>bold text</b>`) 是非粗体的 - 即。正常字体。

我想做的事情是不可能实现的，还是我错过了什么？

我不想使用 CSS - 如果我不需要，我的字体（正常和粗体）嵌入到我的项目中（据我所知），我已经在舞台上放置了一个使用粗体字体的 TextField，`<![CDATA[`标签在 XML 中......不知道还有什么可以尝试的，任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T03:05:11.603

您是否使用加载的文本设置 text 或 htmlText 属性？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T05:14:26.903

您必须确保已嵌入粗体字体。

**在 Flash Professional 中使用字体嵌入面板：**

![在此处输入图像描述](../Images/0c7a4f6573b41fde01d3733db9ab3568.png)

有关更多信息，请参阅此内容（在底部找到“嵌入字体”）： http: [//blog.codestage.ru/2011/07/14/efficient-flash-pro-using/](http://blog.codestage.ru/2011/07/14/efficient-flash-pro-using/)

**在 Flex 中使用 CSS：**

```
@font-face {
    src: url("location") | local("name");
    fontFamily: alias;
    [fontStyle: normal | italic | oblique;]
    [fontWeight: normal | bold | heavy;]
    [advancedAntiAliasing: true | false;]
} 
```**

# c# - 其项目c#中所有子项目的可点击列表视图

> ID：11894586
> 
> 赞同：1
> 
> 时间：2012-08-10T02:18:01.457
> 
> 标签：c#, listview, click

我正在制作许多列的列表视图，我想让列表在所有子项中都可以点击，如下图所示。

![在此处输入图像描述](../Images/9ec04d7d536c7ae0614e5d74f971a89b.png)

但是，我得到的是如下图。

![在此处输入图像描述](../Images/4336e706ddcdaf944e6b28317c7e389b.png)

这是我的代码：

```
 private void button6_Click(object sender, EventArgs e)
        {
            ListViewItem listviewitem;

            listviewitem = new ListViewItem("John");
            listviewitem.SubItems.Add("Smith");
            listviewitem.SubItems.Add("kaya");
            listviewitem.SubItems.Add("bun");
            this.listView1.Items.Add(listviewitem);
            this.listView1.ColumnClick += new ColumnClickEventHandler(ColumnClick);
//show header
            listView1.View = View.Details;

            // Loop through and size each column header to fit the column header text.
            foreach (ColumnHeader ch in this.listView1.Columns)
            {
                ch.Width = -2;
            }
} 
```

这是我的 columnclick 事件处理程序。

```
 // ColumnClick event handler.
    private void ColumnClick(object o, ColumnClickEventArgs e)
    {
        // Set the ListViewItemSorter property to a new ListViewItemComparer 
        // object. Setting this property immediately sorts the 
        // ListView using the ListViewItemComparer object.
        this.listView1.ListViewItemSorter = new ListViewItemComparer(e.Column);
    }

    }
class ListViewItemComparer : IComparer
{
    private int col;
    public ListViewItemComparer()
    {
        col = 0;
    }
    public ListViewItemComparer(int column)
    {
        col = column;
    }
    public int Compare(object x, object y)
    {
        return String.Compare(((ListViewItem)x).SubItems[col].Text, ((ListViewItem)y).SubItems[col].Text);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T02:34:02.153

```
 listView1.FullRowSelect = true; 
```

# html - 如何使响应式图像看起来清晰？

> ID：11894588
> 
> 赞同：1
> 
> 时间：2012-08-10T02:18:10.287
> 
> 标签：html, css, image, responsive-design

我正在使用响应式图像技术，即将最大宽度设置为 100% 以根据屏幕分辨率/大小调整图像大小。但是，当我将图像放在具有百分比宽度的 div 中时，图像看起来并不清晰（因为我推测，它已通过浏览器调整大小）。图像上的文字相当模糊。有没有办法让它看起来很脆？或者至少让它在最常见的屏幕尺寸上看起来很清晰？

CSS：

```
img {
  max-width: 100%;
  height: auto;
}

.img-container {
  width: 57%;
} 
```

HTML：

```
<div class="img-container">
  <img src="[img source]" width="700" height="500" />
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T02:20:18.593

如果您有一个正在按比例缩小的大图像，请先在矢量图形程序中调整它的大小，然后将其保存为首选大小，并将其提供给客户端。

如果您有一个正在放大的小图像，您将失去分辨率，别无选择。

这不是真正的 CSS/HTML 问题，仅供参考，这是一个缩放问题。各种浏览器会使用各种缩放算法，所以结果会不一致。您必须抓住控件并强制浏览器显示您想要的图像，而无需缩放。“响应式设计”的理论美的实际缺点之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-08T17:17:01.697

### 如果您有非摄影图像，请使用 SVG

将[slimmage.js 用于照片](http://github.com/imazen/slimmage.js)。

手动导出 14 个图像版本以支持 2013 年的分辨率范围是疯狂的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T17:25:46.230

使用 SVG 图像或使用名为 picturefill 的插件。

# visual-c++ - CString::Format() 导致调试断言

> ID：11894590
> 
> 赞同：1
> 
> 时间：2012-08-10T02:19:09.143
> 
> 标签：visual-c++, mfc, cstring

Cstring::Format 导致 Visual Studio 2008 中 vsprintf.c 第 244 行的调试断言出现“缓冲区太小”。

```
//inside the function.

somefile.Open (//open for mode read) //somefile is CFile.

char* buff = new [somefile.GetLength()];

somefile.Read ((void*)buff, somefile.GetLength());

CString cbuff;
cbuff.Format ("%s",buff); //this line causes the debug assertion.

//and so on 
```

知道为什么 CString::Format() 会导致“缓冲区太小”错误吗？这并不总是得到调试断言错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T05:09:55.763

另一种解决方案是：

```
somefile.Open (//open for mode read) //somefile is CFile.
int buflen = somefile.GetLength();

CString cbuff;
somefile.Read ((void*)cbuff.GetBuffer(buflen), buflen);
cbuff.ReleaseBuffer(); 
```

它直接读入字符串缓冲区而不是中间变量。CString::GetBuffer() 函数自动将额外字节添加到您在分配“new char[]”时忘记执行的字符串中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T02:26:03.807

字符串以 '\0' 结尾，所以缓冲区大小不够用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T18:30:01.180

问题是`CFile::Read()`它不能保证它读取的数据与您要求的一样多。有时它读取的内容更少，并且让您的缓冲区没有空终止符。您必须假设每次读取调用可能只获得一个字节。当一个不可读的内存块紧跟着你的缓冲区时，这有时也会崩溃。

您需要继续阅读该文件，直到读完为止。此外，空终止符通常根本不会写入文件，因此您不应该假设它会被读入，而是要确保无论读取什么内容，您的缓冲区始终是空终止的。

此外，您不应该使用文件大小作为缓冲区大小；没有理由认为您可以一次阅读所有内容，并且文件大小可能很大或为零。

您还应该避免手动内存管理，而不是`new[]`/ `delete[]`，使用向量，这将确保您不会忘记释放缓冲区或使用`delete`而不是`delete[]`，并且即使在发生异常的情况下也会释放内存。（就此而言，我不建议使用`CString`or `CFile`，但这是另一个话题......）

```
// read from the current file position to the end of
// the file, appending whatever is read to the string
CString ReadFile(CFile& somefile, CString& result)
{
    std::vector<char> buffer(1024 + 1);
    for (;;)
    {
        int read = somefile.Read(&buffer[0], buffer.size() - 1);
        if (read > 0)
        {
             // force a null right after whatever was read
             buffer[read] = '\0';

             // add whatever was read to the result
             result += &buffer[0];
        }
        else
        {
             break;
        }
    }
} 
```

请注意，此示例中没有错误处理。

# php - 我的服务器时间不正确吗？

> ID：11894592
> 
> 赞同：1
> 
> 时间：2012-08-10T02:19:26.947
> 
> 标签：php, datetime, unix-timestamp

这是我的服务器所说的：

```
date('c') = 2012-08-09T22:11:13-04:00
time() = 1344564673 
```

在 10 秒内，以下是[http://www.unixtimestamp.com](http://www.unixtimestamp.com)所说的：

```
THE CURRENT UNIX TIME STAMP

1344568431 EST (-5 GMT + DST when appropriate)
1344564831 UTC (GMT)

...seconds since Jan 01 1970\. 
This translates to current server time of 08/09/2012 @ 10:13pm in EST. 
```

...当我在 unixtimestamp 的转换器中输入**我的服务器的**时间戳时，我得到：`1344564673`

```
TIME STAMP: 1344564673
DATE (M/D/Y @ h:m:s): 08 / 09 / 12 @ 9:11:13pm EST 
```

...我的服务器关闭了将近一个小时，对吧？还是我错过了什么？（我不在乎它是否会关闭几分钟）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:24:26.417

您的时间显示正确（几分钟内）。

似乎`unixtimestamp.com`没有使 DST 生效，它现在在 EST 中。这就是为什么他们的时间比你从 PHP 中得到的时间要少一个小时。

而是尝试处理 DST 的[epochconverter.com 。](http://www.epochconverter.com/)

仅供参考，以防您还不知道：`time()`始终以 UTC 格式返回时间戳。当您在 PHP 中使用 输出它们时`date()`，输出会反映在 PHP 中当前设置的时区中。这可以在使用设置中`php.ini`进行`date.timezone`设置，您可以在运行时使用[`date_default_timezone_set()`](http://php.net/date_default_timezone_set).

希望有帮助。

# jquery - 如果突出显示超过 1，则自动检查复选框

> ID：11894593
> 
> 赞同：1
> 
> 时间：2012-08-10T02:19:29.007
> 
> 标签：jquery

这就是我得到的：

[http://jsfiddle.net/HsVZR/](http://jsfiddle.net/HsVZR/)

我希望完成的是当您开始突出显示 td 的红色时，我想自动选中右侧的复选框。

因此，当 tr >= 1 .highlightRed 时，它应该自动选中复选框。如果它变为 == 0，则应取消选中该复选框。

[http://jsfiddle.net/HsVZR/2/](http://jsfiddle.net/HsVZR/2/)

需要做的两件事是正确的 if 语句，因此它计算当前 parent 中的 .highlightRed ，因此它检查/取消选中 <- 我不知道如何选择复选框，尝试过：

```
$(this).parent('tr').child('td').find('.removalbox').attr('checked'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:28:01.860

这应该做你正在寻找的东西：

```
 $(document).ready(function(){
            $('td.editable').live('click', function(){
                $(this).toggleClass('highlightRed');

                if( $(this).parent('tr').find('.highlightRed').length >= 1 )
                {
                    $(this).parent('tr').find('.removalbox').attr('checked','checked');
                }else{
                    $(this).parent('tr').find('.removalbox').removeAttr('checked');
                }

            });
        }); ​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T02:30:37.140

你想要这样的东西吗？[http://jsfiddle.net/HsVZR/15/](http://jsfiddle.net/HsVZR/15/)

```
$(this).parent('tr').find(".removalbox").attr("checked", $(this).parent('tr').find('td.highlightRed').length >= 1); 
```

此外，您不应该使用如此长的 jQuery 语句来查找页面上的元素。为您的元素按块分配适当的类名或 ID——您总是可以像访问它们一样简单`$('myblock-properclass')`。

检查/取消选中复选框可以很容易地完成

```
$('.removalbox').live('click', function()
{ 
    this.checked == true ? $(this).parents('tr').find('td.editable').addClass('highlightRed') : $(this).parents('tr').find('td.editable').removeClass('highlightRed');       
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T02:31:25.163

尝试：

```
$(document).ready(function() {
    $('td.editable').live('click', function() {
        $(this).toggleClass('highlightRed');
        $(this).parent('tr').find('.removalbox').attr('checked',$(this).parent().find('td.highlightRed').length >0);
    });
});​ 
```

顺便说一句，.live() 已被弃用，取而代之的是 .on()。

**[jsFiddle 示例](http://jsfiddle.net/j08691/HsVZR/11/)**

# r - 索引迭代习语

> ID：11894596
> 
> 赞同：10
> 
> 时间：2012-08-10T02:20:06.683
> 
> 标签：r, iteration, idioms

在迭代集合的索引值时，以下代码在 SO 上很常见：

```
for (i in 1:length(x)) {
  # ...
} 
```

当集合为空时，代码会出现异常行为，因为`1:length(x)`become`1:0`给出`i`了值`1`和`0`。

```
iterate <- function(x) {
    for (i in 1:length(x)) {
      cat('x[[', i, ']] is', x[[i]], '\n')
    }
}

> iterate(c(1,2,3))
x[[ 1 ]] is 1 
x[[ 2 ]] is 2 
x[[ 3 ]] is 3 

> iterate(c())
x[[ 1 ]] is  
x[[ 0 ]] is 
```

我记得看到过一个优雅的习惯用法，用于定义一个在为空时没有元素的序列，`x`但我不记得了。你用什么成语？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-10T02:23:48.223

当您感兴趣的对象为空时，`seq`或者给您一些更合理的东西。`seq_along`

```
> x <- NULL
> seq(x)
integer(0)
> seq_along(x)
integer(0)
> x <- rnorm(5)
> seq(x)
[1] 1 2 3 4 5
> seq_along(x)
[1] 1 2 3 4 5 
```

# web-applications - 缺少点击统计信息

> ID：11894598
> 
> 赞同：0
> 
> 时间：2012-08-10T02:20:11.050
> 
> 标签：web-applications, facebook-like, facebook-insights

我在网站的文章查看页面上安装了评论插件和点赞插件，以及使用[http://site-domain.com/](http://site-domain.com/) url 的站点标题上的点赞+发送按钮。在洞察面板中，我看到了所有人的印象。我看到评论的活动，我看到标题中的发送按钮的活动 like+send 插件，但我没有看到任何类似按钮的活动。我确实在页面上的实际插件中看到了活动，我喜欢了一些东西并且它有效，但没有点击显示在洞察力上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:15:15.797

洞察中的点击次数统计是指有多少人从 Facebook 上分享的“赞”按钮活动中点击进入您的网站。

# ios - AVAudioPlayer 失去“播放”状态

> ID：11894600
> 
> 赞同：0
> 
> 时间：2012-08-10T02:20:14.673
> 
> 标签：ios, avaudioplayer

我有一个需要在后台继续的 AVAudioPlayer。

音频在 plist 中设置为背景模式，并且在启动时运行：

```
[[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
[[RootController shared].view becomeFirstResponder];

AVAudioSession* session = [AVAudioSession sharedInstance];
[session setDelegate: self];
[session setActive:YES error:nil];
[session setCategory: AVAudioSessionCategoryPlayback error:nil];

- (BOOL)canBecomeFirstResponder { return YES; } 
```

# 问题

有时 AVAudioPlayer 会进入这种奇怪的状态：

*   正在播放，但状态栏中的播放图标消失了
*   如果我暂停然后播放，图标可能会显示一秒钟，然后消失
*   *这是踢球者*- 如果我在玩游戏时打电话`setCurrentTime`，播放图标会显示并保持不变

我已经为此投入了大约 20 个小时，并且会喜欢任何想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T19:44:54.160

# 错误描述

如果您正在*播放*`AVAudioPlayer`然后您*创建*一个，`AVPlayer`播放图标将消失。显然`AVPlayer`立即优先，因为它还没有播放，所以播放图标从状态栏中消失。

这会导致一些严重的问题：

1.  如果应用程序在后台，iOS 将在 5 秒内关闭您的 AVAudioPlayer（因为它没有意识到您正在播放音频）
2.  即使正在播放音频，iOS 遥控器也会显示播放按钮
3.  播放图标未显示在状态栏中

# 解决方法

首先，如果您不必使用`AVPlayer`，则不要使用。我使用它是因为我需要播放远程 MP3 而无需先下载它。我曾经使用过这个[AudioStreamer](https://github.com/mattgallagher/AudioStreamer)类，但放弃了，因为当流断开连接时它会弹出一个警报以及我无法修复的一些其他错误。

因此，如果您被 AVPlayer 卡住，只有一种方法可以将播放状态与您的`AVAudioPlayer`. **如果你调用then `setCurrentTime`，`AVAudioPlayer`它会神奇地将自己重新关联为 app 的当前播放器**。因此，您需要在 any`AVPlayer`初始化后以及任何时候在`AVAudioPlayer`.

我决定将 AVAudioPlayer 子类化，这样我就可以在全局列表中注册它（当它被初始化时）并在它被释放时取消注册它。我还覆盖了播放方法，以便任何恢复播放的调用也将调用 setCurrentTime。然后我将 AVPlayer 子类化，以便任何时候初始化，所有活动的 AVAudioPlayers 都会对自己调用 setCurrentTime。最后一件事 - 您必须`setCurrentTime`在短暂的（可能是 1 秒）延迟后拨打电话，否则它将无效。

不开玩笑，这是近 40 小时故障排除的结果。

# ios - 育儿时如何覆盖CALayers的绘图顺序

> ID：11894604
> 
> 赞同：1
> 
> 时间：2012-08-10T02:21:10.287
> 
> 标签：ios, drawing, core-animation, calayer

我有点困惑。我想以某种顺序堆叠 CALayers 以将一个绘制在另一个之上，但我也想从继承这些层带来的转换中受益。

想象一个身体、上臂、前臂和手。我想为手臂和手设置锚点和父点，这样我就可以旋转手臂并且手会跟随。

这就是我所做的：

```
CALayer *body = [CALayer layer];
body.path = @"body.png";
body.anchorPoint = ap1;
CALayer *arm = [CALayer layer];
arm.path = @"arm.png";
arm.anchorPoint = ap2;
CALayer *hand = [CALayer layer];
hand.path = @"hand.png";
hand.anchorPoint = ap3;
[myView.layer addSublayer:body];
[myView.layer addSublayer:arm];
[myView.layer addSublayer:hand];
hand.parent = arm;
arm.parent = body; 
```

一切都很好，但是如果我想让身体与手臂和手重叠怎么办？有没有办法保持这个育儿顺序但覆盖绘图顺序？这样做有什么聪明的主意吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T03:32:23.423

子图层总是在它们的超图层之前绘制。你无法改变这一点。

兄弟姐妹（同一超层的子层）可以使用该`zPosition`属性来获得对渲染顺序的更细粒度的控制。顺便说一句，有很多子层会对性能产生影响，所以在你得到太多子层之前，我会切换到一个更专注于图形的框架`CALayer`。

# html - 如何动态缩放 HTML5 元素？

> ID：11894607
> 
> 赞同：0
> 
> 时间：2012-08-10T02:21:39.447
> 
> 标签：html, html5-canvas

我想通过在角落拖动来调整画布元素的大小。

分享任何提示。

谢谢

![在此处输入图像描述](../Images/484b383dd5645f3b7ab514f27c032125.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:58:28.460

可以通过使用数字分配宽度和高度属性来更改大小：

```
canvasNode.width  = 200; // in pixels
canvasNode.height = 100; // in pixels 
```

至少它对我有用。确保您没有指定字符串（例如，“2cm”、“3in”或“2.5px”），并且不要弄乱样式。

实际上这是一个公开的知识——你可以在 HTML canvas 规范中阅读所有关于它的信息——它非常小而且信息量非常大。这是整个 DOM 接口：

```
interface HTMLCanvasElement : HTMLElement {
           attribute unsigned long width;
           attribute unsigned long height;

  DOMString toDataURL();
  DOMString toDataURL(in DOMString type, [Variadic] in any args);

  DOMObject getContext(in DOMString contextId);
}; 
```

如您所见，它定义了 2 个属性宽度和高度，并且它们都是无符号长的。

使用 css3 也可以设置属性

```
resize:both; 
```

# javascript - 延迟 JQuery Image Rotator 旋转 2 秒

> ID：11894610
> 
> 赞同：0
> 
> 时间：2012-08-10T02:21:47.173
> 
> 标签：javascript, jquery, html, rotator

我刚刚在我的网站上设置了一个 Jquery 图像旋转器，并希望对其进行自定义，以便图像在 2 秒后才旋转。

我一直在尝试通过实现 setTimeout 函数（就在 //loop through items 注释所在的位置）来做到这一点，但它一直说我的函数没有被声明，所以我假设 tt 不会在那个地方工作。

```
$(window).load(function() { //start after HTML, images have loaded
    var InfiniteRotator = {
        init: function() {
            //initial fade-in time (in milliseconds)
            var initialFadeIn = 0;
            //interval between items (in milliseconds)
            var itemInterval = 2000;
            //cross-fade time (in milliseconds)
            var fadeTime = 1000;
            //count number of items
            var numberOfItems = $('.rotating-left').length;
            //set current item
            var currentItem = 0;
            //show first item
            $('.rotating-left').eq(currentItem).fadeIn(initialFadeIn);
            //loop through the items    
            var infiniteLoop = setInterval(function() {
                $('.rotating-left').eq(currentItem).fadeOut(fadeTime);

                if (currentItem == numberOfItems - 1) {
                    currentItem = 0;
                } else {
                    currentItem++;
                }
                $('.rotating-left').eq(currentItem).fadeIn(fadeTime);

            }, itemInterval);
        }
    };
    InfiniteRotator.init();
});​ 
```

我使用来自该站点的代码[http://trendmedia.com/news/infinite-rotating-images-using-jquery-javascript/](http://trendmedia.com/news/infinite-rotating-images-using-jquery-javascript/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:46:44.063

```
setTimeout(function(){
    InfiniteRotator.init();
},2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T02:53:14.920

重写最后一个右括号：

```
}); 
```

好像有隐藏字符。

# mfc - 如何绘制一个透明的组合框？

> ID：11894611
> 
> 赞同：0
> 
> 时间：2012-08-10T02:21:52.480
> 
> 标签：mfc, combobox

我有两个 Cedit 和一个 CCombobox。

你可以看到下面的代码，我将文本颜色设置为黄色。

然后我使用透明文本背景，也是透明背景。

它对 Cedit 非常有效（我不在乎输入内容时的变化）。

但我注意到`pDC->SetBkMode(TRANSPARENT);`对我的 CCombobox 无能为力。

我真的不想继承 CComboBox 来完成透明背景。

还是我需要使用drawitem？？？

```
HBRUSH CValueInputDlg::OnCtlColor(CDC* pDC, CWnd* pWnd, UINT nCtlColor)  
{  
    HBRUSH hBrush = CDialogEx::OnCtlColor(pDC, pWnd, nCtlColor);  
    if (nCtlColor == CTLCOLOR_EDIT)  
    {  
        pDC->SetBkMode(TRANSPARENT);  
        pDC->SetTextColor(RGB(255, 255, 0));  
        hBrush = (HBRUSH)GetStockObject(NULL_BRUSH);  
    }  
    return hBrush;  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T06:41:30.980

我认为如果不进行子类化或做更多工作，您将无法获得良好的结果。MFC 中的透明控件并非易事。

无论如何，如果你想在组合的下拉列表中获得透明背景，你需要使用 CTLCOLOR_LISTBOX 而不是 CTLCOLOR_EDIT。CTLCOLOR_BTN 为下拉按钮。

# visual-studio-2010 - vs2010无法创建项目

> ID：11894624
> 
> 赞同：-2
> 
> 时间：2012-08-10T02:23:38.520
> 
> 标签：visual-studio-2010

当我在vs2010中创建一个新项目时，它表明

> “服务器 tfsserver1\Test1 不提供团队基础服务器”。

我很困惑我的 tfs 服务器是 tfsserver1，而 vs2010 也可以连接到 tfsserver1。什么是 tfsserver1\Test1？我重新安装了vs2010，但问题仍然存在。有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:42:14.633

在 Visual Studio 2010 中，转到`Team`菜单，然后单击`Connect To Team Foundation Server`.

在弹出的对话框中，单击`Servers..`按钮以查看您连接到哪些服务器，并根据需要添加和删除它们。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-15T09:30:33.793

我想只是因为我的vs2010被某种原因破坏了，当我重新安装它时，一切正常。

# android - sqlite blob 读写

> ID：11894629
> 
> 赞同：2
> 
> 时间：2012-08-10T02:24:13.187
> 
> 标签：android, sqlite, blob

我想将一个长字符串存储到android的sqlite中。我通过以下方式将其写入sqlite：

```
String content = bodytext.toString();
    byte[] contentByte = content.getBytes();
    Log.d("bytetoString",new String(contentByte));
    String sql1 = "insert into content(id,content) values( '" + messageID
            + "','" + contentByte + "');";
    db.execSQL(sql1); 
```

我通过以下方式阅读：

```
String sql = "select * from content where id='" + messageID + "'";
    Cursor temp = db.rawQuery(sql, null);
    if (temp.moveToNext()) {
        byte[] contentByte = temp.getBlob(temp.getColumnIndex("content"));
        String sb = new String(contentByte);
        Log.d("String",sb);
        temp.close();
        return sb;
    } 
```

但是，当我打印我刚刚阅读的字符串时。它打印出类似“[B@41431930??”的东西有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T02:28:57.007

它是一个数组，toString() 只打印内存地址。这就是为什么你看到 `[B@41431930??`

如果您想要可读的值，请使用类似`java.util.Arrays.toString(contentByte)`

# regex - 我以前工作的 HTAccess 不再工作

> ID：11894630
> 
> 赞同：1
> 
> 时间：2012-08-10T02:24:24.603
> 
> 标签：regex, apache, .htaccess

我的 HTAccess 之前工作过。但我想在网站上添加一个 FTP 部分。决定所有 FTP 都将进入，`/ftp`并且所有请求都`/ftp/...`将在内部重定向到`/ftp.php?dir=...`处理身份验证等，然后再使用[`readfile(...)`](http://php.net/manual/en/function.readfile.php). 作为正则表达式的 n00b，我认为这会起作用：（仅添加并`|ftp`添加了 ftp 部分）

```
RewriteEngine On

# http://httpd.apache.org/docs/2.4/rewrite/flags.html

# Match page
RewriteCond %{REQUEST_URI} !^/?(cydia|firmware|scripts|site|ftp)
RewriteCond %{REQUEST_URI} !^/?(robots.txt|ftp.php)
  RewriteRule ^/?(.*)$ /site/index.php?title=$1 [PT,L,QSA]

# Match FTP
RewriteCond %{REQUEST_URI} ^/?ftp
  RewriteRule ^/?(.*)$ /ftp.php?dir=$1 [PT,L,QSA]

RewriteRule ^/*$ /site/index.php [L,QSA] 
```

基本上，我所做的是（我认为）匹配`/ftp`为真而不是像上面那样的假。但是，这给了我`500 Server Error`整个站点的信息（表明 HTAccess 中存在问题）。我确信这是一个简单的错误，但我希望你能帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:29:28.580

您的问题是，那些太行会重定向以 ftp 开头的所有内容（包括 ftp.php，这将创建一个无限循环）

```
RewriteCond %{REQUEST_URI} ^/?ftp
RewriteRule ^?(.*)$ /ftp.php?dir=$1 [PT,L,QSA] 
```

尝试用这个替换它们：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} ^/?ftp
RewriteRule ^/?(.*)$ /ftp.php?dir=$1 [PT,L,QSA] 
```

# php - php json_encode + modernizr 对象

> ID：11894633
> 
> 赞同：1
> 
> 时间：2012-08-10T02:24:32.017
> 
> 标签：php, json, modernizr, yepnope

我正在寻找更好、更强大的解决方案来使用 php 回显 yepnope 功能测试。输出应该类似于：

```
{
  test : Modernizr.geolocation,
  yep  : 'normal.js',
  nope : ['polyfill.js', 'wrapper.js']
} 
```

从如下输出：

```
$l10n = array(
   'test' => 'Modernizr.geolocation',
   'yep' => "'normal.js'",
   'nope' => array("'polyfill.js'", "'wrapper.js'")
); 
```

显然，存在引号被包裹在 json 对象周围的问题。我不禁想知道是否有一个完全不同的类可以满足创建包含原始 javascript 和字符串的混合 javascript 对象的需求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:41:07.670

`json_encode`返回值的 JSON 表示，重点是**JSON 表示**不是**javascript 对象**，JSON 是 javascript 对象字面量的子集，因此您需要在 javascript 中进行转换。

```
var l10n = <?php echo json_encode($l10n); ?>;

if (l10n.test === "Modernizr.geolocation") {
  l10n.test = Modernizr.geolocation;
} 
```

# jquery-ui - 用户选择选项卡时如何在选项卡面板中获取元素的实际大小

> ID：11894645
> 
> 赞同：0
> 
> 时间：2012-08-10T02:26:38.673
> 
> 标签：jquery-ui

我想要做的是在用户选择选项卡标题时获取所选 ui-tab-pane 内元素的宽度和高度。但是宽度和高度始终为零，因为即使用户单击了选项卡标题， ui-tab-pane 仍然是 display:none 。有没有什么奇特的方法来获得 ui-tab-pane 的真实大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T05:03:22.297

我自己解决了。

当您需要操作 ui-tab-panel 时，不要使用 'tabsselect' 事件。如下使用“li a”点击事件

```
$('#tabs li a').click(function () {
   // do something to manipulate ui-tab-panel
}); 
```

# php - 需要帮助破译 PHP 代码

> ID：11894647
> 
> 赞同：3
> 
> 时间：2012-08-10T02:27:02.513
> 
> 标签：php

我在这里运行 jQuery Ajax 教程：

[http://www.charlieperrins.com/2011/03/ajax-jquery-101/](http://www.charlieperrins.com/2011/03/ajax-jquery-101/)

一切正常，但我对这段代码有疑问：

```
<?php if ($_POST['user']) : ?>

<?php

$user_id = $_POST['user'];

if (isset($db_data[$user_id]))  {
    $data = $db_data[$user_id];
} else {
    echo 'Sorry, no user data matched your request - please try again';
    die;    
}
?> 
```

我最关心的是第一行。那条线有什么作用？我试图将所有代码保留在一组 php 标签中，但我不知道该怎么做。如果我知道第一行的作用，我可能会弄清楚。任何帮助表示赞赏。我正在尝试对其进行逆向工程以使其适合我的应用程序，但在不知道该顶线的作用的情况下无法做到。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:29:28.237

所有这一切都是继续 if 块直到`endif`。

没有`endif`，所以这个脚本中的任何内容都不会运行，除非其中有数据`$_POST['user']`不评估为`false`。

我会写这个有点不同：

```
<?php 
if (isset($_POST['user'])) {
    $user_id = $_POST['user'];
    if (isset($db_data[$user_id]))  {
        $data = $db_data[$user_id];
    } else {
        echo 'Sorry, no user data matched your request - please try again';
        die;    
    }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T02:30:03.450

`<?php if ($_POST['user']) : ?>`表示如果`$_POST['user']`计算结果为`true`，则执行以下代码。

可以压缩成这样：

```
<?php if ($_POST['user']) :
$user_id = $_POST['user'];
.... 
```

还，

```
if ($_POST['user']) : 
```

应该

```
if (isset($_POST['user']) && !empty(trim($_POST['user']))) : 
```

这样可以确保`$_POST['user']`已设置（通常`$_POST`包含来自表单的变量），并且即使删除了空格也不会为空。

看

*   [控制结构的替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)
*   [`$_POST`](http://php.net/manual/en/reserved.variables.post.php)
*   [`empty`](http://php.net/manual/en/function.empty.php)
*   [`trim`](http://php.net/manual/en/function.trim.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T02:30:16.413

第一行测试`$_POST`数组是否有一个 key `user`，并且该 key 包含一个“真实”（非空，除其他外）值，表明表单已发布到此脚本。如果没有发布表单数据，则脚本的其余部分将不会执行，例如如果有人直接浏览到此 PHP 脚本而没有使用预期的表单发布到它。当表单回发到同一个 PHP 脚本时，这是一种经常使用的技术。在第一次到达脚本时，`$_POST`将是空的。当表单回发到同一个脚本时，当它包含值时可以采取不同的操作。

只需要一个`<?php`标签：

```
<?php 

if ($_POST['user']) {

  $user_id = $_POST['user'];

  if (isset($db_data[$user_id]))  {
    $data = $db_data[$user_id];
  } else {
    echo 'Sorry, no user data matched your request - please try again';
    die;    
  }
}
?> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T02:30:42.210

这是[控制结构的替代语法](http://php.net/manual/en/control-structures.alternative-syntax.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T02:30:41.873

这`if ($_POST['user'])`条线是这样说的：

如果变量`$_POST['user']`存在并且设置为非假值。

`$_POST['user']`如果是`0`、`false`或`''`（空字符串） ，则上述条件失败。

它也没有安全地检查该值。

你最好使用：

```
if (isset($_POST['user'])) && $_POST['user'] != '') 
```

这样，当 PHP`display_errors`开启和通知时，不会输出警告。

# objective-c - Objective-C 方法返回 NSDictionary 而不是 NSMutableDictionary。为什么？

> ID：11894656
> 
> 赞同：0
> 
> 时间：2012-08-10T02:27:58.660
> 
> 标签：objective-c, nsmutablearray, objective-c-blocks

我正在使用包含的方法返回指向 NSMutableDictionary 的指针，该指针包含在 NSArray 中。然而，NSMutableArray (theOne) 被创建为一个不可变的 NSDictionary。这是一个问题，因为我想在使用此方法检索字典后对其进行修改。

```
- (NSMutableDictionary*)getMatFromBoutKey:(NSString*) boutKey
{   
    /*
     * Returns the mat object with the provided boutKey.
     * Returns nil if no mat has that boutKey.
     */

    NSUInteger idx = [[event objectForKey:@"mats"] indexOfObjectPassingTest:
                      ^ BOOL (NSMutableDictionary* obj, NSUInteger idx, BOOL *stop)
                      {
                          return [[obj objectForKey:@"boutKey"] isEqualToString:boutKey];
                      }];

    if (idx == NSNotFound)
        return nil;
    else {
        NSMutableDictionary* theOne = [[event objectForKey:@"mats"] objectAtIndex: idx];
        return theOne;
    }
} 
```

这是第一次引用 theOne 后调试器在断点处停止的图像。

![显示 theOne 不可变的调试器图像](../Images/149619bdcb41ffd225f0628bc08a3b80.png)

为什么 theOne 不可变？如何返回指向 NSMutableDictionary 的指针，以便在获得返回给我的值后对其进行修改？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:43:25.403

我将假设您有一个数组字典。然后该数组包含一堆常规字典。因此，当您将其从数组中拉出时，无论您将其分配给什么，它仍然是一个常规字典。

例如，以下面的代码为例

```
NSDictionary *dict = [[NSDictionary alloc] init];
NSMutableDictionary *mutDict = dict; 
```

mutDict 将包含一个常规字典，因为它没有正确地转换为可变字典。

要么确保在创建位于 [event objectForKey:@"mats"] 的数组时将 NSMutable 字典放入其中，要么

采用

```
NSMutableDictionary* theOne = [[[event objectForKey:@"mats"] objectAtIndex: idx] mutableCopy]; 
```

取出数据时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T02:46:19.027

一般来说，我认为当可变性不是严格必要时使用不可变对象是更好的做法。可变对象使用更多内存，当然也有可能被意外更改。也许在块中被更改为枚举器（我不确定，但有可能。为了更快的索引）。如果你想改变一个可变对象是 via **`mutableCopy`**。或使用其他方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T02:38:19.263

它是否在代码的其他地方插入为可变的？如果是这样，它应该以可变的形式返回，如果不是，您可以向它发送`mutableCopy`消息以获取可变副本（引用计数为 1，因此请务必在必要时释放它）。

# c# - IIS 和 asp.net appcmd

> ID：11894659
> 
> 赞同：2
> 
> 时间：2012-08-10T02:28:23.527
> 
> 标签：c#, asp.net, visual-studio-2012

```
HTTP Error 403.14 - Forbidden
The Web server is configured to not list the contents of this directory.
Most likely causes:

    A default document is not configured for the requested URL, and directory browsing is not enabled on the server.

Things you can try:

    If you do not want to enable directory browsing, ensure that a default document is configured and that the file exists.
    Enable directory browsing.
        Go to the IIS Express install directory.
        Run appcmd set config /section:system.webServer/directoryBrowse /enabled:true to enable directory browsing at the server level.
        Run appcmd set config ["SITE_NAME"] /section:system.webServer/directoryBrowse /enabled:true to enable directory browsing at the site level.
    Verify that the configuration/system.webServer/directoryBrowse@enabled attribute is set to true in the site or application configuration file. 
```

当我尝试使用 VS12 运行我的第一个应用程序时出现上述错误。您知道出了什么问题吗？我该如何解决？在 VS10 我想我没有这种错误信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:35:44.483

您需要启用目录列表和/或将默认文档（default.aspx、default.htm...）添加到站点的根目录。

有关目录列表的更多信息：[启用目录列表](http://technet.microsoft.com/en-us/library/cc731109%28v=ws.10%29.aspx)

# ruby - Ruby 多行正则表达式

> ID：11894660
> 
> 赞同：0
> 
> 时间：2012-08-10T02:28:56.430
> 
> 标签：ruby, regex

我有一个 ruby​​ 多行字符串（称为 efixes），如下所示：

```
ID  STATE LABEL      INSTALL TIME      UPDATED BY ABSTRACT
=== ===== ========== ================= ========== ======================================
1    S    hayo32.02   xxxxxxx xxxxxxxx            xxxxxxxxxxxxxxx
2    S    23434.23    xxxxxxx xxxxxxxx            xxxxxxxxxxxxxxx

STATE codes:
S = STABLE
M = MOUNTED
U = UNMOUNTED
Q = REBOOT REQUIRED
B = BROKEN
I = INSTALLING
R = REMOVING
T = TESTED
P = PATCHED
N = NOT PATCHED
SP = STABLE + PATCHED
SN = STABLE + NOT PATCHED
QP = BOOT IMAGE MODIFIED + PATCHED
QN = BOOT IMAGE MODIFIED + NOT PATCHED
RQ = REMOVING + REBOOT REQUIRED 
```

我*只想*显示以数字开头的行。我有问题，它似乎不匹配。我在这里找到了这个解决方案，（我现在并不真正理解）：

```
efixes_array = efixes.split("\n").select{|x| /\A[0-9]/.match(x)}
io.puts efixes_array.collect{|x| x.scan(/\A[0-9]/)}.flatten 
```

它只匹配数字。我想显示整行。最终结果，我想显示“标签”列下的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:34:29.743

您的示例代码中的这一行

`efixes.split("\n").select{|x| /\A[0-9]/.match(x)}`

返回一个数组，其中所有行都以数字开头。

# triggers - Sql Server 2012 FileTable 的更新触发器有什么问题

> ID：11894664
> 
> 赞同：4
> 
> 时间：2012-08-10T02:29:05.750
> 
> 标签：triggers, sql-server-2012, filetable

我有一个表“game.FileAttachments”，它有一个stream_id 列，该列链接到文件表“game.Attachments”的stream_id 列。我在 File 表上创建了一个 Update 触发器，以更新链接表上的 stream_id；原因是，当 File 表中的文件被修改时，stream_id 会发生变化。这是我的触发器；请帮忙！

```
CREATE TRIGGER game.tr_Update_Attachments
   ON  game.Attachments
   AFTER UPDATE
AS 
BEGIN
    SET NOCOUNT ON;

    IF ( UPDATE(stream_id) )
    BEGIN
        UPDATE game.FileAttachments
            SET stream_id = i.stream_id
            FROM inserted i
            WHERE game.FileAttachments.stream_id IN
            (
                SELECT d.stream_id
                    FROM deleted d INNER JOIN 
                         game.FileAttachments f ON f.stream_id = d.stream_id
            )
    END
END 
```

也试过这个：

```
IF ( UPDATE(stream_id) )
BEGIN
    UPDATE game.FileAttachments
        SET stream_id = i.stream_id
        FROM inserted i INNER JOIN
             deleted d ON 1 = 1 INNER JOIN 
             game.FileAttachments f ON f.stream_id = d.stream_id
END 
```

但这也行不通。

好的，我创建了一个删除触发器来测试一个理论；与我正在修改的文件关联的 FileTable 记录没有更新，而是被删除，并创建了一个全新的记录。好吧，事实证明，对于 Word 女士来说，这是真的。但是，创建了一个纯文本文件，我可以根据需要进行多次更新，并且 stream_id 永远不会改变。因此，Microsoft Word，该应用程序似乎克隆了原始文档，给它一个临时名称，然后，当用户选择保存它时，原始文档被简单地删除，并且克隆重命名为与原始文档相同。那个字节！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-29T13:35:32.580

我认为你的触发器定义需要有这个：

```
CREATE TRIGGER game.tr_Update_Attachments
ON  game.Attachments
AFTER UPDATE, DELETE 
```

如您所指：

```
SELECT d.stream_id
                FROM deleted d INNER JOIN 
                     game.FileAttachments f ON f.stream_id = d.stream_id 
```

在您的 where 子句中...或者您错误地引用了此表并需要将“已删除”附件捕获到临时表中？

# sql - 跨 SQL 集合操作的 WHERE 子句

> ID：11894665
> 
> 赞同：-1
> 
> 时间：2012-08-10T02:29:23.007
> 
> 标签：sql

考虑以下查询，其中两个集合都需要由相同的`Location`. 是否有一种更有效/性能更高的方法，即`Location`过滤器仅在两组中应用一次，或者您是否被迫将相同的过滤器单独应用于每个组？

```
SELECT *
FROM   Orders
WHERE  Quantity BETWEEN 1 AND 100
AND Location = 'SE'

EXCEPT

SELECT *
FROM   Orders
WHERE  Quantity BETWEEN 50 AND 75
AND Location = 'SE'; 
```

**注意：**不打算重构集合操作本身 - 这只是一个虚拟示例。我的问题只是关于如何跨集合操作处理常见的 WHERE 子句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T02:32:38.923

我会将查询重新分解为：

```
SELECT *
FROM Orders
WHERE Quantity BETWEEN 1 AND 100
AND Quantity NOT BETWEEN 50 AND 75
AND Location = 'SE'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T02:59:34.963

您可以使用 AND NOT 代替 EXCEPT [ [1](http://bit.ly/QjN2F7) ] 来处理集合操作，在不同平台上获得更大的支持。

我觉得有一点值得一提，总结一下：

1.  把最不可能的表达放在第一位。
2.  将最不复杂的表达式放在首位。
3.  使用更多和更少的搜索。

如果由于从右到左的评估而不是从左到右的评估而使用 Oracle，则颠倒第 1 点和第 2 点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T02:45:10.573

You can do this with a [CTE](http://www.simple-talk.com/sql/t-sql-programming/sql-server-cte-basics/):

```
with ord (Column1, Column2) as
(
    SELECT Column1, Column2
    FROM Orders 
    WHERE Location = 'SE'
)
SELECT *
FROM ord
WHERE Quantity BETWEEN 1 AND 100

EXCEPT

SELECT *
FROM ord
WHERE Quantity BETWEEN 50 AND 75 
```

If CTEs are not available, you could do the same thing with a view.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T02:34:02.137

```
SELECT *
FROM   Orders
WHERE  ((Quantity BETWEEN 1 AND 49) OR (Quantity BETWEEN 76 AND 100))
AND Location = 'SE' 
```

试试这个查询并确保它获取相同的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-10T02:34:16.737

我会这样做：

```
SELECT *
FROM   Orders
WHERE  ((Quantity BETWEEN 1 AND 49)
OR (Quantity BETWEEN 76 AND 100))
AND Location = 'SE'; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-10T02:38:21.510

```
SELECT * 
FROM   Orders o1
WHERE  Quantity BETWEEN 1 AND 100 
AND Location = 'SE'
AND NOT EXISTS ( SELECT 1 FROM ORDERS o2 
                 WHERE QUANTITY BETWEEN 50 AND 75 
                 AND Location = 'SE' 
                 AND o1.ORDERS_ID = o2.ORDERS_ID) 
```

# c++ - 将自身类型作为参数的新 C++ 模板类构造函数

> ID：11894669
> 
> 赞同：4
> 
> 时间：2012-08-10T02:29:40.080
> 
> 标签：c++, templates, constructor

我正在使用类似于 java 中的 ArrayList 的 C++ 模板类（是的，我知道 vector 做同样的事情，这不是一个实用的编码项目）。

我认为为我的 ArrayList 类提供一个构造函数会很有用，它接受另一个 ArrayList 作为参数来为 ArrayList 播种。但是当我尝试编写构造函数时，我得到了这个错误

```
invalid constructor; you probably meant 'ArrayList<T> (const ArrayList<T>&)' 
```

这是否意味着 ArrayList 必须是一个常数？为什么我需要 addressof 运算符？

我仍在学习 C++ 的基本知识，所以我有点困惑。

原型在这里：

```
 ArrayList(ArrayList<T> list);
    ArrayList(ArrayList<T> list, int size); 
```

代码在这里：

```
/**
 * Creates an ArrayList of type T that is twice the
 * size of the passed in ArrayList, and adds all elements
 * from the passed ArrayList<T> list, to this ArrayList.
 *
 * Runs in O(n) time, where n = the size of list.
 *
 * @param list the ArrayList to use as a seed for this ArrayList.
 */
template<class T>
ArrayList<T>::ArrayList(ArrayList<T> list) {

    array = new T[list.getSize() * 2];
    capacity = list->getSize() * 2;
    size = list->getSize();

    for (int i = 0; i < list->getSize(); i++) {

        array[i] = list->get(i);
    }
} 
```

**编辑** 下面的代码没有错误，而上面的代码......

```
/**
 * Creates an ArrayList of type T that has a capacity equal to the passed
 * in theCapacity parameter. This ArrayList starts with the passed ArrayList.
 *
 * Note: If the passed in capacity is smaller than the size of the passed in
 *          ArrayList, then the capacity is set to twice the size of the
 *          passed ArrayList.
 *
 * @param list the ArrayList to use as a seed for this ArrayList.
 * @param theCapacity the capacity for this ArrayList.
 */
template<class T>
ArrayList<T>::ArrayList(ArrayList<T> list, int theCapacity) {

    if (theCapacity >= list->getSize()) {

        array = new T[theCapacity];
        capacity = theCapacity;
    }
    else {

        array = new T[list->getSize() * 2];
        capacity = list->getSize() * 2;
    }

    size = list->size;

    for (int i = 0; i < size; i++) {

        array[i] = list->get(i);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T02:34:25.847

采用

```
 ArrayList<T>::ArrayList(const ArrayList<T>& list) 
```

作为您的构造函数签名，以将数组列表作为`const`参考传递。这是复制构造函数的正确签名。实现和调用代码都不需要更改，除非您`list`在 ctor 中进行修改。

当您这样做时，`ArrayList<T>::ArrayList(ArrayList<T> list)`您正在创建整个 ArrayList 实例的临时副本。（您不能对 ctor 执行此操作，因为它会调用无限递归，因为新副本`list`将使用相同的函数定义等等）。

`ArrayList<T>::ArrayList(ArrayList<T>& list)`将列表作为参考传递，这意味着它不再是通常所说的“按值传递”，而是从调用代码处理列表的确切版本。

通过在函数中接受 const 引用，您是说该函数不会修改引用的内容（即不对它进行任何修改操作：它将被限制为仅`const`访问）。在继续之前，您应该阅读 about `const`、references 和 copy constructors。

**更新：**

对于按值传递或引用传递，您可以通过`obj.member`语法访问成员。如果你传递一个类似的指针`ArrayList<T>::ArrayList(ArrayList<T>* list)`，你将不得不使用`list->member`语法或`(*list).member`语法，更不用说检查 list 是否是`0`/ `nullptr`first （你不能取消引用空指针）。

您正在混合指针的语法和值/引用的语法。将所有转换`list->x`为，`list.x`因为您没有`list`使用指针传递参数。

看到这个不同的传递行为：http: [//ideone.com/3c5mJ](http://ideone.com/3c5mJ)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T02:41:18.847

使用“const”是因为它是某个对象的引用，您不会更改。使用引用是因为这是复制构造函数，默认语法假设引用。

但最重要的是：您可以以与您尝试编写的方式完全相同的方式定义和使用此构造函数。

# oracle - FOR UPDATE 语句的使用

> ID：11894670
> 
> 赞同：5
> 
> 时间：2012-08-10T02:29:48.290
> 
> 标签：oracle, plsql

我正在使用 PL/SQL (Oracle 11g) 来更新`EMPLOYEES`表薪水列。

我使用了两个单独的脚本来做同样的事情，即更新员工的工资。

一个脚本使用`FOR UPDATE OF`语句，而另一个脚本不使用它。在这两种情况下，我发现 oracle 持有行级锁，直到我们执行`ROLLBACK`or`COMMIT`命令。

那么两个脚本有什么区别呢？

哪个更好用？

这是我正在谈论的两个脚本：

```
-- Script 1: Uses FOR UPDATE OF

declare
cursor cur_emp
is
select employee_id,department_id from employees where department_id = 90 for update of salary;
begin
  for rec in cur_emp
  loop
    update Employees
    set salary = salary*10
    where current of cur_emp;
   end loop;
end;

--Script 2: Does the same thing like script 1 but FOR UPDATE OF is not used here

declare
cursor cur_emp
is
select employee_id,department_id from employees where department_id = 90;
begin
  for rec in cur_emp
  loop
    update Employees
    set salary = salary*10
    where Employee_ID = rec.employee_id;
   end loop;
end; 
```

我发现 Oracle 在这两种情况下都获得了行级锁。那么，使用有什么好处`FOR UPDATE OF`以及哪种编码方式更好？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-10T02:44:57.827

当您指定`FOR UPDATE`时，该行被锁定在您`SELECT`的数据点。如果没有`FOR UPDATE`，则该行将锁定在您`UPDATE`所在行的位置。在第二个脚本中，另一个会话可能会在`SELECT`执行时间和您尝试执行的时间之间锁定该行`UPDATE`。

如果您正在处理`SELECT`返回相对较少的行和紧凑的内部循环的语句，则两者之间不太可能存在明显差异。如果您不希望脚本无限期地阻塞，如果其他会话碰巧锁定了您尝试更新的行之一，则添加一个`FOR UPDATE`on the还可以让您有机会添加一个超时子句。`SELECT`

# opengl - OpenGL/GLSL - 处理来自旧游戏的光照（混合环境光和顶点颜色）

> ID：11894686
> 
> 赞同：1
> 
> 时间：2012-08-10T02:33:07.643
> 
> 标签：opengl, glsl, game-engine, lighting

我正在编写一个支持加载旧游戏格式的客户端。它使用假照明，对于每个顶点，通常会提供一个顶点颜色。我使用以下方法使照明正确显示：

```
vec4 textureColor = texture2D(texture, outtexture) * vertexColor; 
```

问题在于，对于 RGB 提供的 0.0、0.0、0.0 顶点，整个纹理当然是黑色的。我一直在玩一些不同的算法，但纹理看起来还是有点暗或者灯光太亮。

这是着色器：

```
float ambient = 1.0;

vec4 textureColor = texture2D(texture, outtexture);
vec4 lighting = vec4((vertexColor * vertexColor.a) + (ambient * textureColor));

gl_FragColor = textureColor * lighting; 
```

这是一个例子：

![没有光的纹理太暗](../Images/0c14b7497f719d652519c78148683ec2.png)

现在，顶点颜色数据也有点奇怪。这是一个例子：

```
<-!-> R: 0.000000, G: 0.000000, B: 0.000000, A: 0.000000
<-!-> R: 0.000000, G: 0.000000, B: 0.000000, A: 0.000000
<-!-> R: 0.000000, G: 0.000000, B: 0.000000, A: 0.000000
<-!-> R: 0.023529, G: 0.023529, B: 0.003922, A: 0.858824
<-!-> R: 0.007843, G: 0.007843, B: 0.000000, A: 0.850980
<-!-> R: 0.007843, G: 0.007843, B: 0.000000, A: 0.858824
<-!-> R: 0.023529, G: 0.023529, B: 0.003922, A: 0.858824
<-!-> R: 0.050980, G: 0.050980, B: 0.011765, A: 0.882353
<-!-> R: 0.078431, G: 0.078431, B: 0.015686, A: 0.858824
<-!-> R: 0.078431, G: 0.078431, B: 0.015686, A: 0.858824
<-!-> R: 0.050980, G: 0.050980, B: 0.011765, A: 0.894118
<-!-> R: 0.031373, G: 0.031373, B: 0.007843, A: 0.862745
<-!-> R: 0.050980, G: 0.050980, B: 0.011765, A: 0.882353
<-!-> R: 0.050980, G: 0.050980, B: 0.011765, A: 0.894118
<-!-> R: 0.031373, G: 0.031373, B: 0.007843, A: 0.858824
<-!-> R: 0.000000, G: 0.000000, B: 0.000000, A: 0.858824
<-!-> R: 0.000000, G: 0.000000, B: 0.000000, A: 0.835294 
```

请注意，它包含一些正常值（0、0、0、0）和一些带有十进制数的常规值以及 0、0、0 的值，然后定义了一个 alpha。

如果您已经看到此方法或对如何获得正常外观的渲染有任何建议，请随时加入。是的，我意识到这个问题有点不同，但希望有人应该有一些见识。

编辑：如果这有帮助，我的一个朋友有一个类似的项目。这就是他加载信息并将其打包到 DirectX 的方式：

```
 int iBlue  = GetByte( );
     int iGreen = GetByte( );
     int iRed   = GetByte( );
     int iAmb   = GetByte( );

     pVertex->m_dwDiffuse = D3DCOLOR_ARGB( (BYTE)( max( iAmb,     1 ) ), 
                                           (BYTE)( max( iRed,     1 ) ), 
                                           (BYTE)( max( iGreen,   1 ) ),
                                           (BYTE)( max( iBlue,    1 ) ) ); 
```

我假设他完全按照我的方式将字节转换为整数，然后如果它们是负数，他用 1 替换它们。仍然希望我知道他在渲染时如何使用它们......

它应该是什么样子：

白天（少得多/几乎看不到光） ![在此处输入图像描述](../Images/b1452b969e0395cdd914c4d7eb100a1b.png)

夜晚：

![在此处输入图像描述](../Images/6bca10ba4a5cbeb560834b316d84a812.png)

我的（使用上面的着色器代码）： ![在此处输入图像描述](../Images/0b46f5ac9999e007931d12374dc795e0.png)

看起来灯光要么太亮，要么它们对纹理的黑色贡献使它们难以看到。

# jquery - 如何检索选定的图像 ID

> ID：11894690
> 
> 赞同：0
> 
> 时间：2012-08-10T02:33:52.467
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, galleria

我在我的 rails 3 应用程序中使用了 Galleria 插件。我需要从所选图像中检索 img ID 以更新我的数据库。我尝试使用方法.getActiveImage，但我真的不知道如何实现它。

如果您对如何使此代码正常工作有任何想法，或者您有其他解决方案可以推荐，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T15:27:54.240

您可以监听`image`事件并从事件对象中获取 GalleriaData 属性中的原始 IMG 元素：

```
Galleria.on('image', function(e) {
    alert( e.galleriaData.original.id );
}); 
```

[http://galleria.io/docs/api/events/#image](http://galleria.io/docs/api/events/#image)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T04:14:38.903

I suggest to give all the images of your plugin same classname, so when image from your plugin is selected this will give you id of image from plugin .

```
<img class="agree" id="imageid" src="http://i158.photobucket.com/albums/t116/kaloesche68/Olympics.jpg" width="256" height="256"/>​

$(document).ready(function() {
  $("img.agree").click(function(){
       alert($(this).attr("id"));
       return false;
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T03:28:28.693

简单的

```
$(function() {  // <-- on dom ready
    $('img').click(function() {  // <-- bind click event to all images
        alert(this.id); // <-- alert current clicked image id
        // or this $(this).prop('id');  this using jquery object
    });
});​ 
```

# python - 使用 Python 通过 HTTPS 发布 XML

> ID：11894695
> 
> 赞同：0
> 
> 时间：2012-08-10T02:34:16.940
> 
> 标签：python, xml, post, https

让我从我已经成功连接到我的服务端点开始。当我运行我的程序时，我得到一个`200 OK`和一个文本响应，`XML request null.`这些都是好东西！如果我将服务端点的 URL 粘贴到浏览器中，这正是我得到的。

我的问题是，在我的程序中，我认为我正确地将我的 XML 请求有效负载附加到我的 POST 中。然而，`XML request null.`我确实不是。

```
xml = '''xml request here '''
host = "www.xmlendpoint.com"
url = "/service/endpoint"

def doRequest():
  conn = httplib.HTTPSConnection(host)

  headers = {"Content-type": "text/xml","Content-Length": "%d" % len(xml)}
  conn.request("POST", url, "", headers) 
  conn.send(xml)
  res = conn.getresponse()

  print res.status, res.reason
  print res.read()
  conn.close()

if __name__ == "__main__":
  doRequest() 
```

这里有什么明显的问题吗？

# c - IMAP 协议的解释？

> ID：11894699
> 
> 赞同：1
> 
> 时间：2012-08-10T02:34:39.530
> 
> 标签：c, imap

我正在寻找有关 IMAP 协议如何工作的信息。谷歌只提供高级信息，但不足以理解细节。我想知道足够的知识来创建我自己的实现。我发现 ac 库可以做到这一点，但文档记录很差。

一些基本问题是：IMAP uid 是什么以及它们的保证是什么？例如，一个 id 会改变吗？删除后会被重用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T03:12:41.710

这看起来是一个很好的起点：

[http://www.imapwiki.org/ImapRFCList](http://www.imapwiki.org/ImapRFCList)

通常，在搜索 Internet 协议的详细信息时，您需要的关键字是“RFC”。将其与协议名称一起添加到您的搜索中，您应该有一个良好的开端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T03:24:06.583

> 谷歌只提供高级信息，但不足以理解细节。

谷歌是一个通用的搜索引擎，它的结果只会和你提供的搜索词一样好。如果您想获得有关协议或标准或编程语言的详细而明确的技术信息，您应该从搜索规范开始；即使用“规范”作为您的搜索词之一。

> 我想知道足够的知识来创建我自己的实现。我发现 ac 库可以做到这一点，但文档记录很差。

1.  如果您已经找到了一个实现，为什么还要创建另一个？或者甚至知道足够（假设地）创造另一个？
2.  我确信还有其他各种语言的 IMAP 开源实现。
3.  期望 IMAP 的实现被充分记录以用作规范有点过分。

> 一些基本问题是：IMAP uid 是什么以及它们的保证是什么？例如，一个 id 会改变吗？删除后会被重用吗？

我希望通过阅读 IMAP 规范可以回答这些问题；参见[RFC 3501](https://www.rfc-editor.org/rfc/rfc3501)

# google-apps-script - 谷歌应用脚 本：在谷歌驱动器中导入 xlsx 文件的脚本

> ID：11894701
> 
> 赞同：2
> 
> 时间：2012-08-10T02:34:56.317
> 
> 标签：google-apps-script

我通常使用谷歌云连接。想知道我的电子表格是否总是自动与我更新的 xlsx 同步。我认为它看起来像电子表格中的导入按钮或谷歌驱动器中的上传按钮。应用程序脚本如何处理这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T13:07:37.480

我们都希望在 File 的 DocsList API 中有一个“convertToGDocsFormat”成员。（实际上，我们希望 makeCopy 成员在复制过程中可以选择转换它。）

但是 DocsList API 是实验性的并且可能不完整，它还没有这样的方法。目前，您无法将文件从脚本转换为 Google 格式。

还有另一种（长）方法可以从 xlsx 读取数据。假设您已同步 xlsx 文件。您可以使用实验性 DocsList API 访问它，并获取一个 blob。

XLSX 文件是一个 ZIP 文件，您可以使用 Utilities.unzip 解压缩未记录的方法，该方法为您提供解压缩的 blob。

然后，您必须导航树文件夹（在 blob 中）以获取要读取的 XML 文件（从 blob 中）。此树文件夹及其 XML 文件描述了整个 XLSX 电子表格。

最后，您可以解析此类 XML 文件并在其中导航并获取单元格的值。

这不是快速编码，也不是执行。

# awk - 使用 awk 从不同文件中减去列

> ID：11894702
> 
> 赞同：5
> 
> 时间：2012-08-10T02:35:21.307
> 
> 标签：awk

我有两个文件夹 A1 和 A2。这两个文件夹中的文件名和文件数相同。每个文件有 15 列。文件夹“A1”中每个文件的第 6 列需要从文件夹“A2”中每个文件的第 6 列中提取。我想将每个文件的第 2 列和第 6 列（减法后）打印到具有相同文件名的文件夹 A3 中。我怎样才能用 awk 做到这一点？

```
f1.txt file in folder A1

RAM     AA   159.03  113.3  122.9  34.78    116.3 
RAM     BB   151.24   70    122.9  142.78   66.4
RAM     CC   156.70   80    86.2   70.1     54.8

  f1.txt file in folder A2    

RAM     AA   110.05  113    122.9    34.78    116.3
RAM     BB   150.15  70     122.9    140.60   69.4 
RAM     CC   154.70  89.2   86.2     72.1     55.8

desired output

AA   0
BB  2.18
CC  -2 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-10T02:39:56.760

试试这个：

```
paste {A1,A2}/f1.txt | awk '{print $2,$6-$13}' 
```

* * *

在`bash`:`{A1,A2}/f1.txt`将扩展为`A1/f1.txt A2/f1.txt`（这只是一个快捷方式。没关系。）
我使用`paste`命令垂直合并文件。
这里的`awk`命令很简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T02:51:10.467

一种使用方式`awk`：

```
awk 'FNR==NR { array[$1]=$2; next } { if ($1 in array) print $1, array[$1] - $2 > "A3/f1.txt" }' ~/A1/f1.txt ~/A2/f1.txt 
```

* * *

**第一次编辑：**

`A1`假设两个目录（和）中的文件数量相等，文件`A2`名按照您描述的方式配对：

```
for i in A1/*; do awk -v FILE=A3/${i/A1\//} 'FNR==NR { array[$1]=$2; next } { if ($1 in array) print $1, array[$1] - $2 > FILE }' A1/${i/A1\//} A2/${i/A1\//}; done 
```

您需要先创建目录`A3`，否则会出错。

**第二次编辑：**

```
awk 'FNR==NR { array[$2]=$6; next } { if ($2 in array) print $2, array[$2] - $6 > "A3/f1.txt" }' ~/A1/f1.txt ~/A2/f1.txt 
```

**第三次编辑：**

```
for i in A1/*; do awk -v FILE=A3/${i/A1\//} 'FNR==NR { array[$2]=$6; next } { if ($2 in array) print $2, array[$2] - $6 > FILE }' A1/${i/A1\//} A2/${i/A1\//}; done 
```

# asp.net-mvc - 在 MVC ActionLink 中使用 Knockout 绑定

> ID：11894708
> 
> 赞同：6
> 
> 时间：2012-08-10T02:36:08.027
> 
> 标签：asp.net-mvc, data-binding, knockout.js, asp.net-mvc-4, html.actionlink

我正在尝试利用 KnockoutJS 和 MVC 4 在表格`ActionLink`的第一列中显示带有定义的表格。显示数据本身非常简单，我没有任何问题。我遇到的问题是在`ActionLink`'s 的生成中。

我已经查看了[Use MVC helpers inside jquery.tmpl templates](https://stackoverflow.com/questions/6989080/asp-net-mvc-helpers-inside-knockout-jquery-tmpl-templates)，但是那里的解决方案不使用敲除模板并且将 Url 插入模型对象是不可行的（将使用用于创建视图模型的应用程序域模型对象在整个应用程序中广泛使用）。

表定义：

```
<table>
    <tbody data-bind="template: { name: 'dmuTableDetail', foreach: tables() }"></tbody>
</table> 
```

(`tables`是一个可观察的数组，因此是括号)。

淘汰赛模板定义：

```
<script id="dmuTableDetail" type="text/html">
    <tr>
        <td>@Html.ActionLink("Details", "Details", "DMUTableCategory", new { @Id = ??? } )</td>
        <td data-bind="text:TableId"></td>
        <td data-bind="text:TableName"></td>
    </tr>
</script>​ 
```

视图模型定义：

```
var PageViewModel = function () {
    self = this;

    self.tables = ko.observableArray([]);

    self.readItems = function () {
        self.tables(jQuery.parseJSON('[{"TableId":1001, "TableName":"Table#1"},{"TableId":1002, "TableName":"Table#2"}]'));
    }
}

$(document).ready(function () {
    vm = new PageViewModel();
    self.readItems('');
    ko.applyBindings(vm);
}); 
```

（实际代码执行 Ajax 调用来检索数据，但上面的代码也演示了该问题）。

无论我用什么替换`???`，我都无法获得`TableId`要插入到 href 中的字段的值。

任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T23:21:20.433

谢谢埃里克，你让我想到了一个锚元素并绑定了`href`属性。

似乎答案比预期的要容易一些（通常是这样！）。

表定义：（与原始问题相同）

```
<table>
    <tbody data-bind="template: { name: 'dmuTableDetail', foreach: tables() }"></tbody>
</table> 
```

淘汰模板定义：（**更改为`href`属性**的绑定）。

```
<script id="dmuTableDetail" type="text/html">
    <tr>
        <td><a data-bind="attr: { 'href': '@Url.Action("Details", new RouteValueDictionary() { { "Controller", "DMUTableCategory" } } )/' + TableId }">Details</a></td>
        <td data-bind="text:TableId"></td>
        <td data-bind="text:TableName"></td>
    </tr>
</script>? 
```

视图模型定义：（与原始问题相同）

```
var PageViewModel = function () {
    self = this;

    self.tables = ko.observableArray([]);

    self.readItems = function () {
        self.tables(jQuery.parseJSON('[{"TableId":1001, "TableName":"Table#1"},{"TableId":1002, "TableName":"Table#2"}]'));
    }
}

$(document).ready(function () {
    vm = new PageViewModel();
    self.readItems('');
    ko.applyBindings(vm);
}); 
```

您实际上并不需要，`RootValueDictionary`但我已将其包含在内，因此人们可以看到如何更改请求发送到的控制器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T03:53:54.697

Knockout 完全绑定在客户端，这是在 MVC 为您的页面呈现 HTML 并将其发送回原始浏览器之后。

如果您希望您的 Knockout 模板能够使用在服务器上生成的 URL，那么您必须采用类似于以下的一些巧妙策略：

CSHTML：

```
@{
    // create a dummy URL that you can use as a template
    string hrefFormat = Url.Action("Details", "DMUTableCategory", new { id = "{ID}" });
}

<script type="javascript">
    // a global string (but you can put it where ever you need to)
    var _hrefFormat = @Html.Raw(hrefFormat)
<script> 
```

JS：

```
self.readItems = function () {
    self.tables(jQuery.parseJSON('[{"TableId":1001, "TableName":"Table#1"},{"TableId":1002, "TableName":"Table#2"}]'));

    // loop through the 'tables' and add a new 'href' property to each for binding
    ko.utils.arrayForEach(self.tables(), function(table){
         table.href = _hrefFormat.replace("{ID}", table.TableId);
    });
} 
```

您的 KO Tmpl 将每个表对象的“href”属性绑定到`a`标签的 href 属性：

```
<script id="dmuTableDetail" type="text/html">
    <tr>
        <td><a data-bind="attr: { 'href': href }">Details</a></td>
        <td data-bind="text:TableId"></td>
        <td data-bind="text:TableName"></td>
    </tr>
</script>​ 
```

# javascript - 如果鼠标没有悬停元素，则淡出

> ID：11894711
> 
> 赞同：2
> 
> 时间：2012-08-10T02:36:32.193
> 
> 标签：javascript, jquery, hover

基本上，如果 x 秒后没有触发鼠标悬停事件，我想淡出一个元素。我已经尝试了几个小时，但似乎无法编写代码以正常工作。

到目前为止，我已经写了——

```
$('.toolTip').live('mouseover', function() {
    $(this).stop(true, true).fadeIn();
});
$('.toolTip').live('mouseleave', function() {
    $(this).delay(4000).fadeOut("slow");
}); 
```

如果鼠标进入 div 然后离开，则该方法有效，但如果它没有获得焦点，则无效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T02:48:42.573

该`mouseover`事件将永远不会在 .toolTip div 上调用，因为`fadeOut()`它将通过应用`display:none`到元素来完成，从而防止您再次将鼠标悬停在它上面。您可以使用fadeTo() 代替fadeOut() 来改变它的不透明度而不影响它的显示属性。

```
$(document).on('mouseover', '.toolTip', function() {
    $(this).stop().fadeTo("fast", 1);
});

$(document).on('mouseleave', '.toolTip', function() {
    $(this).delay(4000).fadeTo("slow", 0);
});​ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T03:05:45.413

完成此操作的一种方法是`fadeTo()`在鼠标悬停事件之外添加一个命令，以便它最初开始淡出：

```
$(".toolTip").delay(1000).fadeTo(5000, 0);
$(".toolTip").on({
    mouseleave: function() {
        $(this).delay(1000).fadeTo(5000, 0);
    },
    mouseenter: function() {
        $(this).stop().fadeTo(500, 1);
    }
}); 
```

[**​演示**](http://jsfiddle.net/Snowsickle/FFPWp/)[](http://jsfiddle.net/Snowsickle/FFPWp/)

# c# - 在 RichTextBox 中突出显示用户定义的关键字

> ID：11894713
> 
> 赞同：1
> 
> 时间：2012-08-10T02:37:58.607
> 
> 标签：c#, winforms

我正在搜索 XML 文件以查看是否有与这些文本框中插入的单词匹配的内容`txtComKeyword1`,`txtComKeyword2`和`txtComKeyword3`/或`txtComKeyword4`. 下面的功能正在运行，但我可以知道如何突出显示用户在我的`richComResults`richtextbox 中出现的四个匹配的文本框中输入的关键字吗？

例如，我的用户将填写这四个文本框，即。txtComKeyword1、txtComKeyword2、txtComKeyword3 和 txtComKeyword4。然后，我的代码会解析XML文件，看看节点是否包含这四个关键字，如果是，节点的数据将输出到我的richComResults上，我想突出显示这四个关键字（eg txtComKeyword1=hello, txtComKeyword2=bye, txtComKeyword3 =早上，txtComKeyword4=晚上）。这 4 个词，如果在richComResults 中找到并出现，将用颜色突出显示。

搜索了一段时间后我没有头绪，我的情况与其他问题有很大不同。我是编程新手，非常感谢您的帮助。谢谢！

我的代码：

```
private void searchComByKeywords()
{
    // Process the list of files found in the directory. 
    string[] fileEntries = Directory.GetFiles(sourceDir);
    foreach (string fileName in fileEntries)
    {
            XmlDocument xmlDoc = new XmlDocument(); //* create an xml document object.

            string docPath = fileName;

            xmlDoc.Load(docPath); //* load the XML document from the specified file.

            XmlNodeList nodeList = xmlDoc.GetElementsByTagName("item");

            foreach (XmlNode node in nodeList)
            {

                XmlElement itemElement = (XmlElement) node;

                string itemDescription = itemElement.GetElementsByTagName("description")[0].InnerText;

                if (txtComKeyword1.Text != (String.Empty) && itemDescription.ToLower().Contains(txtComKeyword1.Text.ToLower()) || 
                    txtComKeyword2.Text != (String.Empty) && itemDescription.ToLower().Contains(txtComKeyword2.Text.ToString()) || 
                    txtComKeyword3.Text != (String.Empty) && itemDescription.ToLower().Contains(txtComKeyword3.Text.ToString()) || 
                    txtComKeyword4.Text != (String.Empty) && itemDescription.ToLower().Contains(txtComKeyword4.Text.ToString()))
                {
                    string itemTitle = itemElement.GetElementsByTagName("title")[0].InnerText;
                    string itemDate = itemElement.GetElementsByTagName("pubDate")[0].InnerText;
                    string itemAuthor = itemElement.GetElementsByTagName("author")[0].InnerText;

                    richComResults.AppendText("Author: " + itemAuthor + "\nDate: " + itemDate + "\nTitle: " + itemTitle + "\nDescription: " + itemDescription + "\n\n--------\n\n");
                }
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T03:09:29.433

尝试这个：

```
int pointer = 0;
int index = 0;
string keyword = "txtComKeyword1";

while (true)
{
    index = richComResults.Text.IndexOf(keyword, pointer);
    //if keyword not found
    if (index == -1)
    {
        break;
    }
    richComResults.Select(index, keyword.Length);
    richComResults.SelectionFont = new System.Drawing.Font(richComResults.Font, FontStyle.Bold);
    pointer = index + keyword.Length;
} 
```

这将搜索关键字并突出显示它。然后在找到的关键字之后继续搜索。指针用于跟踪文本中的搜索位置。索引标记找到的关键字的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T03:13:13.473

试试这个代码：

```
void ParseLine(string line)
    {
        Regex r = new Regex("([ \\t{}():;])");
        String[] tokens = r.Split(line);

        foreach (string token in tokens)
        {
            // Set the tokens default color and font.
            richTextBox1.SelectionColor = Color.Black;
            richTextBox1.SelectionFont = new Font("Courier New", 10, FontStyle.Regular);

            // Check whether the token is a keyword. 
            String[] keywords = { "Author", "Date", "Title", "Description", };
            for (int i = 0; i < keywords.Length; i++)
            {
                if (keywords[i] == token)
                {
                    // Apply alternative color and font to highlight keyword.
                    richTextBox1.SelectionColor = Color.Blue;
                    richTextBox1.SelectionFont = new Font("Courier New", 10, FontStyle.Bold);
                    break;
                }
            }
            richTextBox1.SelectedText = token;
        }
       richTextBox1.SelectedText = "\n";
    } 
```

并用你的方法填充你的字符串 str 后调用我的方法：

```
string strRich =

            "Author : Habib\nDate : 2012-08-10 \nTitle : mytitle \nDescription : desc\n";

        Regex r = new Regex("\\n");
        String[] lines = r.Split(strRich);

        foreach (string l in lines)
        {
            ParseLine(l);
        } 
```

请享用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-15T08:01:28.360

Jan 的回答包含了很多内容，但我在 while(true) 和 break aspect 中轻微地颤抖了一下！这是我的调整（不区分大小写）版本...

```
int nextHigh = RTF.Text.IndexOf(txSearch, 0, StringComparison.OrdinalIgnoreCase);
while (nextHigh >= 0)
{
    RTF.Select(nextHigh, txSearch.Length);
    RTF.SelectionColor = Color.Red;                            // Or whatever
    RTF.SelectionFont = new Font("Arial", 12, FontStyle.Bold); // you like
    nextHigh = RTF.Text.IndexOf(txSearch, nextHigh + txSearch.Length, StringComparison.OrdinalIgnoreCase);
} 
```

# ruby - Ruby中新（嵌套）数组的奇怪行为

> ID：11894714
> 
> 赞同：0
> 
> 时间：2012-08-10T02:38:03.180
> 
> 标签：ruby

为什么两段代码没有打印相同的东西。我打算让第一件产生第二件的输出

```
a=Array.new(5,Array.new(3))
for i in (0...a[0].length)
  a[0][i]=2
end
p a 
```

> # 这将打印 [[2, 2, 2], [2, 2, 2], [2, 2, 2], [2, 2, 2], [2, 2, 2]]*

```
a=Array.new(5).map{|d|d=Array.new(3)}
for i in (0...a[0].length)
  a[0][i]=2
end
p a 
```

> # 这打印 [[2, 2, 2], [nil, nil, nil], [nil, nil, nil], [nil, nil, nil], [nil, nil, nil]]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T02:49:14.407

这个

```
a=Array.new(5,Array.new(3)) 
```

创建一个数组，其中包含五次相同的数组对象。这有点像这样做：

```
a = []
b = a
a[0] = 123
puts b[0] #=> 123 
```

这个在哪里：

```
a=Array.new(5).map{ Array.new(3) } 
```

为父数组中的每个项创建一个新的 3 项数组。因此，当您更改第一个项目时，它不会触及其他项目。

这也是为什么您不应该真正使用`Array`和`Hash`构造函数默认参数的原因，因为它们并不总是按您期望的方式工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T14:37:35.067

以下是等价的：

```
Array.new(5,Array.new(3))

[Array.new(3)] * 5

inside = Array.new(3); [inside, inside, inside, inside, inside] 
```

它们都将产生一个包含相同数组的数组。我的意思是*完全相同的*对象。这就是为什么如果你修改它的内容，你会看到这个新值 5 次。

由于您需要独立数组，因此您要确保“内部”数组不是同一个对象。这可以通过不同的方式实现，例如：

```
Array.new(5){ Array.new(3) }

5.times.map { Array.new(3) }

Array.new(5).map { Array.new(3) }

# or dup your array manually:
inside = Array.new(3); [inside.dup, inside.dup, inside.dup, inside.dup, inside] 
```

请注意，`Array.new(5, [])`您首先使用的表单不`obj`​​会为您复制，它会重复使用它。由于这不是您想要的，您应该使用`Array.new(5){ [] }`将调用块 5 次的块形式，并且每次创建一个新数组。

该类`Hash`也有两个构造函数，而且[更加棘手](https://stackoverflow.com/questions/2552579/ruby-method-array-not-updating-the-array-in-hash)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T02:46:30.030

```
Array.new(5,Array.new(3)) 
```

在第一个示例中，您的数组包含对同一数组的 5 个引用。您创建一个数组的单个实例，`Array.new(3)`其中的一个引用用于您初始化的 5 个数组中的每一个。当你修改时`a[0][0]`，你也在修改`a[1][0]`,`a[2][0]`等等。它们都是对同一个数组的引用。

```
Array.new(5).map{ |d| Array.new(3) } 
```

在第二个示例中，您的数组包含 5 个不同的数组。您的块被调用 5 次，`Array.new(3)`被调用 5 次，并创建了 5 个不同的数组。`a[0]`是一个不同的数组`a[1]`，等等。

# php - 查询 CI 的 DB 函数 '$query->row_array()'

> ID：11894716
> 
> 赞同：0
> 
> 时间：2012-08-10T02:38:04.083
> 
> 标签：php, codeigniter

我正在使用 CI 框架的 DB 类。第一行查询到了5行，第二行打印了5行，但是为什么语句`count($query->row_array())`（或`count($query->row_array(),1)`）返回了11（表的字段号），结果只填了一行，而不是5行？

```
$query = $this->db->query($SQL_BYLABEL, array($labelId, $orderby, (int)$m, (int)$n));
    log_message('error', $query->num_rows());  // 5 rows
    log_message('error', count($query->row_array()));  // 11 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:48:49.850

`$query->row_array()`将一条记录的数据作为数组返回。所以`count($query->row_array()`返回表的列数。

***[检查手册](http://ellislab.com/codeigniter/user-guide/database/results.html)***。

# python - python将ipv6转换为整数

> ID：11894717
> 
> 赞同：10
> 
> 时间：2012-08-10T02:38:07.167
> 
> 标签：python, ipv6

是否有任何软件包或简单的方法可以将 ipv6 转换为整数？该算法应该有点聪明，可以理解 ipv6 短格式。在我开始编写自己的代码之前，我只是想知道是否有人知道可以完成这项工作的包？

谢谢，

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-10T03:28:34.517

**您可以在标准**Python 套接字模块的帮助下做到这一点。[`socket.inet_pton()`](http://docs.python.org/library/socket.html#socket.inet_pton)处理 IPV6 短格式没有任何麻烦。

```
import socket
from binascii import hexlify

def IPV6_to_int(ipv6_addr):
    return int(hexlify(socket.inet_pton(socket.AF_INET6, ipv6_addr)), 16)

>>> IPV6_to_int('fe80:0000:0000:0000:021b:77ff:fbd6:7860')
338288524927261089654170743795120240736L
>>> IPV6_to_int('fe80::021b:77ff:fbd6:7860')
338288524927261089654170743795120240736L 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-10T02:56:31.360

你想要[IPy](http://c0re.23.nu/c0de/IPy/)。

```
>>> IPy.IP('fe80::21b:77ff:fbd6:7860')
IP('fe80::21b:77ff:fbd6:7860')
>>> IPy.IP('fe80::21b:77ff:fbd6:7860').int()
338288524927261089654170743795120240736L

>>> IPy.IP('fe80::fbd6:7860')
IP('fe80::fbd6:7860')
>>> IPy.IP('fe80::fbd6:7860').int()
338288524927261089654018896845572831328L 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-10T03:53:27.870

仅使用 stdlib 的另一种解决方案：

```
import socket
import struct

def int_from_ipv6(addr):
    hi, lo = struct.unpack('!QQ', socket.inet_pton(socket.AF_INET6, addr))
    return (hi << 64) | lo 
```

### 例子

```
>>> int_from_ipv6('fe80::fbd6:7860')
338288524927261089654018896845572831328L 
```

在 Python 3.3+ 上，您可以使用[`ipaddress`模块](http://docs.python.org/dev/library/ipaddress.html)：

```
>>> import ipaddress
>>> int(ipaddress.ip_address('fe80::fbd6:7860'))
338288524927261089654018896845572831328 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-10T03:35:24.120

使用[`ipaddr`](http://code.google.com/p/ipaddr-py/)模块

```
>>> import ipaddr
>>> int(ipaddr.IPAddress('fe80::21b:77ff:fbd6:7860'))
338288524927261089654170743795120240736L 
```

编辑：感谢@JFSebastian 提供更好的方法

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-09T01:05:41.587

可能是`netaddr`你想要的。

```
>>> from netaddr import *
ip = IPNetwork('fe80::21b:77ff:fbd6:7860')
>>> print ip.value
338288524927261089654170743795120240736 
```

# java - 动态类加载器

> ID：11894721
> 
> 赞同：3
> 
> 时间：2012-08-10T02:38:39.973
> 
> 标签：java, plugins, classloader

我有一个大型桌面 Java 应用程序，我想允许其他开发人员为其开发插件。插件将是放置在指定目录中的 jar。它们在启动时不会在类路径上。我将在运行时加载和部署它们。

复杂的是，一些插件将相互依赖，以及核心应用程序。所以我不能在它自己的 URLClassLoader 中加载每个插件/jar。因此，我想将所有插件加载到 1 个 URLClassLoader 中。此外，某些插件可能由于各种原因无法初始化。而且我只想要一个知道成功加载插件的类加载器。原因很奇怪，并且与一些使用反射来实例化类的遗留问题有关。如果插件没有为失败的插件 jar 中定义的类初始化，这需要失败。

如果没有这个要求，解决方案将是：

1.  收集 jar URL 并基于它们构建一个 ClassLoader
2.  尝试从每个 jar 中初始化一个插件类（在清单中的配置中定义）

现在，这里的 ClassLoader 将被传递给遗留系统以用于其反射内容。但是，据我了解，它仍然能够从插件未能初始化的插件 jar 中实例化类（因为 jar 仍将位于 ClassLoader 的 URL[] 中）。因此，这打破了我上面的要求。

到目前为止，我想出的唯一解决方案是创建一个自定义 URLClassLoader，如下所示（仅允许访问 findClass()）：

```
public class CustomURLClassLoader extends URLClassLoader {

    public CustomURLClassLoader(final URL[] urls, final ClassLoader parent) {
        super(urls, parent);
    }

    @Override
    protected Class<?> findClass(final String name) throws ClassNotFoundException {
        return super.findClass(name);
    }
} 
```

然后我制作了另一个自定义的 ClassLoader，它基本上知道多个子 ClassLoader：

```
public class MultiURLClassLoader extends ClassLoader {

    private Set<CustomURLClassLoader> loaders = new HashSet<CustomURLClassLoader>();

    public MultiURLClassLoader(final ClassLoader parent) {
        super(parent);
    }

    @Override
    protected Class<?> findClass(final String name) throws ClassNotFoundException {
        Iterator<CustomURLClassLoader> loadersIter = loaders.iterator();
        boolean first = true;
        while (first || loadersIter.hasNext()) {
            try {
                if (first) {
                    return super.findClass(name);
                } else {
                    return loadersIter.next().findClass(name);
                }
            } catch (ClassNotFoundException e) {
                first = false;
            }
        }
        throw new ClassNotFoundException(name);
    }

    public void addClassLoader(final CustomURLClassLoader classLoader) {
        loaders.add(classLoader);
    }

    public void removeClassLoader(final CustomURLClassLoader classLoader) {
        loaders.remove(classLoader);
    }
} 
```

然后我的加载插件算法将类似于

```
MultiURLClassLoader multiURLClassLoader = new MultiURLClassLoader(ClassLoader.getSystemClassLoader());
for (File pluginJar : new File("plugindir").listFiles()) {
    CustomURLClassLoader classLoader = null;
    try {
        URL pluginURL = pluginJar.toURI().toURL();
        final URL[] pluginJarUrl = new URL[] { pluginURL };
        classLoader = new CustomURLClassLoader(pluginJarUrl, multiURLClassLoader);
        multiURLClassLoader.addClassLoader(classLoader);
        Class<?> clazz = Class.forName("some.PluginClass", false, multiURLClassLoader);
        Constructor<?> ctor = clazz.getConstructor();
        SomePluginInterface plugin = (SomePluginInterface)ctor1.newInstance();
        plugin.initialise();            
    } catch (SomePluginInitialiseException e) {
        multiURLClassLoader.removeClassLoader(classLoader);
    }
} 
```

然后我可以将 multiURLClassLoader 实例传递给遗留系统，它只能找到插件成功加载的类（通过反射）。

我已经做了一些基本的测试，到目前为止它似乎可以正常工作。但我非常希望有人对这是否是个好主意提出意见？我以前从未在 ClassLoaders 上玩过这么多，我想避免在为时已晚之前让自己陷入太深。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T19:42:46.547

我看到的问题是，如果您事先不知道哪个插件依赖于哪个插件，那么很难做任何合理的事情，调试问题，隔离无功能或行为不良的插件等。

因此，我建议另一种选择：在每个插件的清单中添加另一个字段，这将说明它依赖于哪些其他插件。也许只是它需要运行的其他插件 JAR 的列表。（核心应用程序类将始终可用。）我相信这将使设计更加健壮并简化许多事情。

然后，您可以从不同的设计中进行选择，例如：

*   对于每个插件，您可以创建一个单独的 ClassLoader，它只加载它需要的 JAR。可能是最强大的解决方案。但我看到了一个缺点：充当许多其他依赖项的插件将在不同的类加载器中重复加载。这取决于环境（插件数量，JAR 大小，...）如果这可能是一个问题，它甚至可能是一个优势。
*   正如您所建议的，您可以为所有插件使用一个大的 ClassLoader，但您可以按照依赖关系的顺序向它询问插件类。首先不依赖任何东西的那些，然后依赖于那些第一个等等的那些。如果某些插件类无法加载/初始化，您可以立即丢弃所有依赖它的插件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-08T13:07:24.247

您是否正在寻找类似[OSGi](http://en.wikipedia.org/wiki/OSGi)的方法？

你可以像 Petr Pudlák 所说的那样做，但是你应该考虑到这样一个事实，你所拥有的解决方案之一可以创建循环依赖......

# java - 使用 HttpClient 将 URL 中的 JSON 查询字符串发送到 Web 服务 (Java)

> ID：11894723
> 
> 赞同：1
> 
> 时间：2012-08-10T02:38:47.280
> 
> 标签：java, json, httpclient, tapestry, uribuilder

我有一个我构建的 Web 服务......我现在要做的是发送一个简单的请求，其中包含从 Tapestry Web 应用程序到该 Web 服务的 json 查询字符串。我四处搜索，大多数人说使用 Apache HttpClient 来实现这一点。与 HttpClient 一起，我正在使用 URIBuilder。

我尝试发送的 Json 对象如下所示

> {"user":{"userEmail":"jdoe@gmail.com","firstName":"John","lastName":"Doe","phone":"203-555-5555"},"password" ：“死的”}

*我意识到以纯文本等形式发送密码的问题......

有效的 url（通过手动输入 Web 浏览器进行测试，并且该 Web 服务已经为 Android 客户端和 iOS 客户端提供服务）看起来像这样

> http:// ##.##.###.##/createuser?json={"user":{"userEmail":"jdoe@gmail.com","firstName":"John","lastName" :"Doe","电话":"203-555-5555"},"密码":"dead"}

这是我从谷歌周围捣碎的 HttpClient 代码，试图弄清楚为什么这不起作用。本质上，我要做的是使用 URIBuilder 创建一个 URI，然后使用新构建的 URI 构造一个 HttpPost 或 HttpGet 对象。但是在 URIBuilding 过程中出现了问题。当我调试时，当我尝试设置 URI 的所有方面时会引发异常。

```
Object onSuccess() throws ClientProtocolException, IOException, URISyntaxException{
    // json = {"user":{"userEmail":"jdoe@gmail.com","firstName":"John","lastName":"Doe","phone":"203- 555-5555"},"password":"dead"}
    String json = user.toJson();
    URIBuilder builder = new URIBuilder();
    // Error gets thrown when I step over the next line
    builder.setScheme("http").setHost("##.###.##.###").setPort(8080).setPath("createuser").setQuery("json=" +json); 
    URI uri = builder.build();

    HttpPost request = new HttpPost(uri);
    DefaultHttpClient httpClient = new DefaultHttpClient();
    String tmp = request.getURI().toString();

    HttpResponse response = httpClient.execute(request); 
    index.setResponse(EntityUtils.toString(response.getEntity()));
    return index; 
```

当我越过我在代码中注释的行时返回的错误是

> [错误] TapestryModule.RequestExceptionHandler 请求处理失败，未捕获异常：org.apache.http.client.utils.URLEncodedUtils.parse(Ljava/lang/String;Ljava/nio/charset/Charset;)Ljava/util/List; java.lang.NoSuchMethodError:org.apache.http.client.utils.URLEncodedUtils.parse(Ljava/lang/String;Ljava/nio/charset/Charset;)Ljava/util/List;

我已经尝试了很多其他方法和对象的组合来让这个请求正确地发送到服务器，但似乎没有任何效果。希望我忽略了一些相对简单的事情。

提前感谢您提供的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T07:32:20.487

您的类路径中很可能有错误版本或两个版本的 apache httpcomponents。如果您正在运行 Tapestry，它将在错误页面上打印出类路径上的所有包。在那里调查，找到加载了哪些 httpcomponents，找出它来自哪里并修复它。

如果这不起作用，您应该与我们分享您的一些运行时环境。哪个 servlet 引擎，从哪个 IDE 运行，或者您是从命令行运行。你在使用 Maven 吗？如果是这样分享你的pom。等等。

# css - CSS页脚包含中心文档

> ID：11894724
> 
> 赞同：0
> 
> 时间：2012-08-10T02:38:48.813
> 
> 标签：css

我似乎有一个特殊的问题。

我有以下代码片段，如您所见，我刚刚在末尾添加了页脚 div：

```
<body>
    <div id="conainer">
        <div id="wrapper">
            <p>this is the wrapper</p>
            <div id="centerDoc">
                <p>this is the centerDoc</p>
            </div>  <!--centerDoc !-->
        </div> <!-- wrapper !-->
    </div> <!--container !-->
    <div id="footer">
        <p>footer</p>
    </div>
</body> 
```

我得到以下输出[我添加了边框以查看发生了什么]：

![输出：](../Images/0c81e850f5b5d0373ab66cdc70413e55.png)

我希望您能看到 centerDoc div 在页脚 div 内，我不明白为什么。

div的CSS：

```
#container {
   margin:auto;
   width: 100%;
}

#wrapper{
    width:80%;
    border:1px dashed black;
}

#centerDoc {
   margin-top:2.8%;
   margin-left:10px;

   float:left;
   width: 100%;
   border:1px dashed black;
}

#footer{
    text-align:center;
    color:#333333;
    border:1px dashed black;
} 
```

感谢任何解决此问题的指针！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:45:23.550

那是正常的行为。你的`#centerDoc`部门是**向左浮动**的，所以它的位置是正确的。但是，因为它是浮动的，所以它从文档流中移除，所以它不包含在 wrapper 分区的高度中，而 footer 分区填充在它后面，然后文本向下移动，使其不在其他内容的后面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T03:07:22.830

@animuson 是对的。你可以使用“clear: both;” 要解决这个问题。见下文

```
<pre>
#footer{
    text-align: center;
    color: #333333;
    border: 1px dashed black;
    clear: both;
}
</pre> 
```

# c++ - C++ 中带字符串 arg 的全局函数

> ID：11894725
> 
> 赞同：0
> 
> 时间：2012-08-10T02:38:53.820
> 
> 标签：c++, visual-c++

编辑：这是固定的

我正在尝试创建一个具有字符串数据类型的单个参数的全局函数。但是我无法让它工作。这是我所拥有的：

```
////////
//Func.h

#include <string>

#ifndef Func_H
#define Func_H

void testFunc(string arg1);

#endif

////////
// Func.cpp

#include <iostream>
#include <string>
#include "Func.h"
using namespace std;

void testFunc(string arg1)
{
    cout << arg1;
} 
```

当要传递的参数是字符串时，这不起作用，但如果我将参数设置为整​​数或字符或其他任何东西（不必包含任何文件才能工作），那么它就可以正常工作。

基本上，我想做的是在他们自己的 .cpp 文件中拥有几个函数，并且能够在 Main.cpp 中使用它们。我的第一个想法是在头文件中声明原型函数，并将头文件包含在我的 Main.cpp 中以使用它们。如果您能想到更好的方法，请告诉我。我对 C++ 不是很有经验，所以我总是对改进的做事方式持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T03:32:46.287

你忘了命名空间！在声明函数的函数头中

```
using namespace std;
void testFunc(string arg1); 
```

或者你应该写

```
void testFunc(std::string arg1); 
```

或者

```
void testFunc(std::string &arg1); // pointer to string object 
```

或者如果你的函数不会改变对象

```
void testFunc(const std::string &arg1); 
```

并且不要忘记 Func.cpp，函数实现必须具有与声明相同的参数，才能从另一个文件中调用它。

# flash - 带有 clicktag 的 xml flash 横幅

> ID：11894727
> 
> 赞同：0
> 
> 时间：2012-08-10T02:39:32.393
> 
> 标签：flash, actionscript-2, clicktag

我有一个带有图像和链接的 xml 的 Flash 横幅。

我已经使用以下代码在新图层上设置了点击标签

```
 on (release) {
 if (_root.clickTAG.substr(0,5) == "http:") {
    getURL(_root.clickTAG, "_blank");
  }
} 
```

我需要以某种方式`dataArray[selItem].link`从加载 xml 的电影中获取此变量并将其附加到 clicktag。

# php - 标准输出影响 SIGKILL？

> ID：11894729
> 
> 赞同：0
> 
> 时间：2012-08-10T02:40:04.160
> 
> 标签：php, linux, bash, fork, sigkill

我有一个脚本来限制命令的执行时间长度。

**限制.php**

```
<?php
declare(ticks = 1);

if ($argc<2) die("Wrong parameter\n");
$cmd = $argv[1];
$tl = isset($argv[2]) ? intval($argv[2]) : 3;

$pid = pcntl_fork();
if (-1 == $pid) {
    die('FORK_FAILED');
} elseif ($pid == 0) {
    exec($cmd);
    posix_kill(posix_getppid(), SIGALRM);
} else {
    pcntl_signal(SIGALRM, create_function('$signo',"die('EXECUTE_ENDED');"));
    sleep($tl);
    posix_kill($pid, SIGKILL);
    die("TIMEOUT_KILLED : $pid");
} 
```

然后我用一些命令测试这个脚本。

**测试A**

```
php limit.php "php -r 'while(1){sleep(1);echo PHP_OS;}'" 3 
```

3s 后，我们可以发现进程如我们预期的那样被杀死了。

**测试B**

删除输出代码并再次运行。

```
php limit.php "php -r 'while(1){sleep(1);}'" 3 
```

结果看起来不太好，函数“exec”创建的进程没有像 TEST A 那样被杀死。

```
[alix@s4 tmp]$ ps aux | grep whil[e]
alix      4433  0.0  0.1 139644  6860 pts/0    S    10:32   0:00 php -r while(1){sleep(1);} 
```

**系统信息**

```
[alix@s4 tmp]$ uname -a
Linux s4 2.6.18-308.1.1.el5 #1 SMP Wed Mar 7 04:16:51 EST 2012 x86_64 x86_64 x86_64 GNU/Linux
[alix@s4 tmp]$ php -v
PHP 5.3.9 (cli) (built: Feb 15 2012 11:54:46) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.3.0, Copyright (c) 1998-2012 Zend Technologies 
```

**为什么进程在 TEST A 中被杀死但在 TEST B 中没有？**输出会影响 SIGKILL 吗？

有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T06:33:45.453

在( ) 和它的父 ( )`PIPE`之间有一个，向 发送信号，然后终止，但对信号一无所知并继续运行并向 输出一些东西，当接收到信号但不知道如何处理时它因此退出。`php -r 'while(1){sleep(1);echo PHP_OS;}``process C``process B``posix_kill($pid, SIGKILL)``KILL``process B``process B``process C``broken pipe``process C``SIGPIPE`

您可以使用 strace (run `php limit.php "strace php -r 'while(1){sleep(1); echo PHP_OS;};'" 1`) 进行验证，您将看到如下内容：

```
14:43:49.254809 write(1, "Linux", 5)    = -1 EPIPE (Broken pipe)
14:43:49.254952 --- SIGPIPE (Broken pipe) @ 0 (0) ---
14:43:49.255110 close(2)                = 0
14:43:49.255212 close(1)                = 0
14:43:49.255307 close(0)                = 0
14:43:49.255402 munmap(0x7fb0762f2000, 4096) = 0
14:43:49.257781 munmap(0x7fb076342000, 1052672) = 0
14:43:49.258100 munmap(0x7fb076443000, 266240) = 0
14:43:49.258268 munmap(0x7fb0762f3000, 323584) = 0
14:43:49.258555 exit_group(0)           = ? 
```

至于`php -r 'while(1){sleep(1);}`，因为它的父节点死亡后没有`broken pipe`发生，所以它继续按预期运行。

一般来说，如果你想杀死它的孩子，你应该杀死整个进程组，而不仅仅是进程本身，`PHP`你可以添加`process B`到它自己的进程组，然后杀死整个组，这里是你的代码的差异：

```
--- limit.php   2012-08-11 20:50:22.000000000 +0800
+++ limit-new.php   2012-08-11 20:50:39.000000000 +0800
@@ -9,11 +9,13 @@
 if (-1 == $pid) {
     die('FORK_FAILED');
 } elseif ($pid == 0) {
+    $_pid = posix_getpid();
+    posix_setpgid($_pid, $_pid);
     exec($cmd);
     posix_kill(posix_getppid(), SIGALRM);
 } else {
     pcntl_signal(SIGALRM, create_function('$signo',"die('EXECUTE_ENDED');"));
     sleep($tl);
-    posix_kill($pid, SIGKILL);
+    posix_kill(-$pid, SIGKILL);
     die("TIMEOUT_KILLED : $pid");
 } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T06:02:02.653

您将 kill 信号发送到您的分叉进程，但这不会传播给它的子代或孙代。因此，他们是孤儿并继续运行，直到有什么东西阻止他们这样做。（在这种情况下，任何写入标准输出的尝试都会导致错误，然后强制它们退出。输出重定向也可能导致无限期运行的孤儿。）

您想向进程及其所有子进程发送终止信号。不幸的是，我缺乏知识来告诉你这样做的好方法。我对 PHP 的过程控制功能不是很熟悉。可以解析 ps 的输出。

我发现可行的一种简单方法是使用 kill 命令向整个进程组发送终止信号。它很乱，它在我的机器上添加了一个额外的“Killed”消息输出，但它似乎工作。

```
<?php
declare(ticks = 1);

if ($argc<2) die("Wrong parameter\n");
$cmd = $argv[1];
$tl = isset($argv[2]) ? intval($argv[2]) : 3;

$pid = pcntl_fork();
if (-1 == $pid) {
    die('FORK_FAILED');
} elseif ($pid == 0) {
    exec($cmd);
    posix_kill(posix_getppid(), SIGALRM);
} else {
    pcntl_signal(SIGALRM, create_function('$signo',"die('EXECUTE_ENDED');"));
    sleep($tl);
    $gpid = posix_getpgid($pid);

    echo("TIMEOUT_KILLED : $pid");
    exec("kill -KILL -{$gpid}"); //This will also cause the script to kill itself.
} 
```

有关更多信息，请参阅：[杀死所有子进程的最佳方法](https://stackoverflow.com/questions/392022/best-way-to-kill-all-child-processes)

# java - 如何在Java中的所有线程中维护List的单个副本

> ID：11894731
> 
> 赞同：0
> 
> 时间：2012-08-10T02:40:38.583
> 
> 标签：java, multithreading

```
class A implements Callable{

 List result     // want to share this List amongst thread and their function call

 public Search  call() {

 List<Job>  Jobs = api. Jobs(a,b,c);  // Multiple threads 

    }
 }

class API{
         public void jobs(a,b,c){
              // want to access the  A.Result and populate the result
         }
} 
```

我如何在所有线程中共享一个数组列表，我不想使用静态，因为它每次运行都会不断累积结果，线程本地是一个不错的选择吗？

试图避免额外的对象及其各自的 getter / setter ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:44:04.020

您现在拥有的是线程共享列表。除非您同步，否则在此对象上运行的所有线程（假设仅存在此对象的一个​​实例）共享相同的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T05:29:53.813

我知道你有你的答案，但我不明白答案或问题，因此需要问。所以，你的问题看起来像这样？您有一堆 Callables 将在单个列表上执行一些工作，因此该列表在线程之间共享？然后你需要使这个列表线程安全，并且使对象列表线程安全并不是那么简单（你自己），除非你使用 Java 已经给出的东西

# java - 混淆后的日志消息

> ID：11894732
> 
> 赞同：1
> 
> 时间：2012-08-10T02:40:53.263
> 
> 标签：java, logging, obfuscation, proguard

我有一个基于 java 的产品，并在发布前对其进行了混淆，但每种方法都有日志消息。我了解日志消息可用于跟踪代码并使用逆向工程来反转代码，但在发生错误时跟踪错误很有用。

**我的问题是：**我应该在混淆后保留日志消息吗？如果没有，是否有任何其他方法可以追踪错误以防万一发生错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T03:44:44.907

建议你换个思路。如果你混淆了代码，你会阻止一个偶然的“逆向工程师”理解它。但是，您可能对决心破译代码的人影响不大，而且当需要仅使用现场报告重现一个细微的错误时，您的工作就会变得更加困难。

我建议您做一些实验来评估调试和维护的额外成本（以及当您无法快速解决问题时客户的烦恼）与知识产权的价值，任何人实际上*想要*对其进行逆向工程的可能性，以及如果有人对您系统的某些部分进行逆向工程，您将产生成本。

# castle-windsor - Castle Scoped Lifestyle 不起作用

> ID：11894733
> 
> 赞同：3
> 
> 时间：2012-08-10T02:40:57.267
> 
> 标签：castle-windsor, windsor-3.0

试图找到造成这种情况的真正原因却没有太多乐趣！

```
Type is not resolved for member 'Castle.MicroKernel.Lifestyle.Scoped.CallContextLifetimeScope+SerializationReference,Castle.Windsor, Version=3.1.0.0, Culture=neutral, PublicKeyToken=407dd0808d44fbdc'. 
```

考虑到我没有在使用这种生活方式的容器中注册任何内容，这看起来像是一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T06:06:20.730

在进行 MSTest 时遇到同样的问题。添加`Castle.Windsor.dll`到**GAC**对我有用。

```
gacutil.exe /if "C:\Castle.Windsor.3.1.0\lib\net40\Castle.Windsor.dll" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T18:36:33.293

我不确定您要做什么，但是如果您的目标是实现一个`IDependencyResolver`（因为您使用的是范围，所以看起来像这样）：

如果你正在实现一个`IDependencyResolver`，不要试图变得聪明并从你的`IDependencyScope`实现中继承。从头开始创建解析器。这就是我实现依赖解析器的方式（有效）：

```
public class WindsorDependencyResolver : IDependencyResolver {
    private readonly IWindsorContainer _container;

    public WindsorDependencyResolver(IWindsorContainer container)
    {
        _container = container;
    }

    public IDependencyScope BeginScope()
    {
        return new WindsorDependencyScope(_container);
    }

    public object GetService(Type serviceType)
    {
        return _container.Kernel.HasComponent(serviceType)
                   ? _container.Resolve(serviceType)
                   : null;
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        return _container.ResolveAll(serviceType).Cast<object>();
    }

    public void Dispose()
    {
    }
}

public class WindsorDependencyScope : IDependencyScope {
    private readonly IWindsorContainer _container;
    private readonly IDisposable _scope;
    private bool _disposed;

    public WindsorDependencyScope(IWindsorContainer container)
    {
        _container = container;
        _scope = _container.BeginScope();
    }

    public object GetService(Type serviceType)
    {
        EnsureNotDisposed();
        return _container.Kernel.HasComponent(serviceType)
                   ? _container.Kernel.Resolve(serviceType)
                   : null;
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        EnsureNotDisposed();
        return _container.ResolveAll(serviceType).Cast<object>();
    }

    public void Dispose()
    {
        if(_disposed) return;

        _scope.Dispose();
        _disposed = true;
        GC.SuppressFinalize(this);
    }

    private void EnsureNotDisposed()
    {
        if(_disposed) throw new ObjectDisposedException("WindsorDependencyScope");
    }
} 
```

这是我的第一次尝试（产生了你的错误）：

```
public class WindsorDependencyResolver : WindsorDependencyScope, IDependencyResolver {
    private readonly IWindsorContainer _container;

    public WindsorDependencyResolver(IWindsorContainer container)
        : base(container)
    {
        _container = container;
    }

    public IDependencyScope BeginScope()
    {
        return new WindsorDependencyScope(_container);
    }
} 
```

# java - 将txt加载到JTable时如何显示空列？

> ID：11894735
> 
> 赞同：2
> 
> 时间：2012-08-10T02:41:05.040
> 
> 标签：java, swing, file-io, jtable, abstracttablemodel

我需要将 .txt 加载到`JTable`with ，我在[这里](http://www.java-tips.org/java-se-tips/javax.swing/read-a-data-file-into-a-jtable-3.html)`delimiter`找到了一个很好的示例

这是样本数据：

```
 102|Beth Reiser||New York|(212)5558725
 111|Dylan Ricci||Syracuse|(315)5554486
 116|Brian Gugliuzza||Mamaroneck|(914)5553817
 120|Gertrude Stein||Elmsford|(914)5553476
 131|Daljit Sinnot||Bohemia|(516)5559811 
```

这是我修改后的代码：

```
package Model;

import javax.swing.*;
import javax.swing.table.*;
import javax.swing.event.*;
import java.io.*;
import java.util.*;

public class DataFileTableModel extends AbstractTableModel {

    protected Vector data;
    protected Vector columnNames ;
    protected String datafile;

    public DataFileTableModel(String f, String delimiter){
        datafile = f;
        initVectors(delimiter);
    }

    public void initVectors(String delimiter) {

        String aLine ;
        data = new Vector();
        columnNames = new Vector();
        int lineNum=0;

        try {
            FileInputStream fin =  new FileInputStream(datafile);
            BufferedReader br = new BufferedReader(new InputStreamReader(fin));
            // extract column names
            StringTokenizer st1 =
                    new StringTokenizer(br.readLine(), delimiter);
            while(st1.hasMoreTokens())
                columnNames.addElement(st1.nextToken());
            // extract data
            while ((aLine = br.readLine()) != null && lineNum<20) {
                StringTokenizer st2 =
                        new StringTokenizer(aLine, delimiter);
                lineNum++;
                while(st2.hasMoreTokens())
                    data.addElement(st2.nextToken());
            }
            br.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public int getRowCount() {
        return data.size() / getColumnCount();
    }

    public int getColumnCount(){
        return columnNames.size();
    }

    public String getColumnName(int columnIndex) {
        String colName = "";

        if (columnIndex <= getColumnCount())
            colName = (String)columnNames.elementAt(columnIndex);

        return colName;
    }

    public Class getColumnClass(int columnIndex){
        return String.class;
    }

    public boolean isCellEditable(int rowIndex, int columnIndex) {
        return false;
    }

    public Object getValueAt(int rowIndex, int columnIndex) {
        return (String)data.elementAt( (rowIndex * getColumnCount()) + columnIndex);
    }

    public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
        return;
    }
} 
```

根据数据，它会显示5列，但它只显示4列，第3列因为空而被跳过。我想将所有列显示到`JTable`，我怎么能做到这一点？根据@ [hovercraft-full-of-eels](https://stackoverflow.com/users/522444/hovercraft-full-of-eels)，当空列位于表格中间时，它可以成功显示，但它无法处理背面的空列。如何得到这个？

背面空列的数据样本：

```
102|Beth Reiser||New York|(212)5558725||||
111|Dylan Ricci||Syracuse|(315)5554486||||
116|Brian Gugliuzza||Mamaroneck|(914)5553817|||| 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T03:03:08.160

这完全是由于您使用了 StringTokenizer：您的标记器纯粹而简单地跳过了空列。***首先，您应该简化您的问题——在没有***任何 Swing 代码的情况下测试 StringTokenizer 对文本文件的解析，然后在添加任何 Swing 代码或制作 JTable***之前***尝试修复它。

查看使用 StringTokenizer 与拆分测试数据的结果`\\|`：

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.util.StringTokenizer;

public class DataFileFoo {
   private static final String DATA_FILE_PATH = "datafile.txt";
   private static final String DELIMITER = "|";
   private static final String SPLIT_REGEX = "\\|";

   public static void main(String[] args) {
      System.out.println("usingStringTokenizer()");
      usingStringTokenizer();

      System.out.println();
      System.out.println("usingStringSplit();");
      usingStringSplit();
   }

   public static void usingStringTokenizer() {
      File datafile = new File(DATA_FILE_PATH);
      try {
         FileInputStream fin = new FileInputStream(datafile);
         BufferedReader br = new BufferedReader(new InputStreamReader(fin));
         // extract column names
         String aLine = "";
         while ((aLine = br.readLine()) != null) {
            StringTokenizer st2 = new StringTokenizer(aLine, DELIMITER);
            while (st2.hasMoreTokens()) {
               System.out.print(st2.nextToken() + ", ");
            }
            System.out.println();

         }
         br.close();
      } catch (Exception e) {
         e.printStackTrace();
      }
   }

   public static void usingStringSplit() {
      File datafile = new File(DATA_FILE_PATH);
      try {
         FileInputStream fin = new FileInputStream(datafile);
         BufferedReader br = new BufferedReader(new InputStreamReader(fin));
         // extract column names
         String aLine = "";
         while ((aLine = br.readLine()) != null) {
            String[] tokens = aLine.split(SPLIT_REGEX);
            for (String token : tokens) {
               System.out.print(token + ", ");
            }
            System.out.println();

         }
         br.close();
      } catch (Exception e) {
         e.printStackTrace();
      }
   }
} 
```

使用您的数据文件，

```
 102|Beth Reiser||New York|(212)5558725
 111|Dylan Ricci||Syracuse|(315)5554486
 116|Brian Gugliuzza||Mamaroneck|(914)5553817
 120|Gertrude Stein||Elmsford|(914)5553476
 131|Daljit Sinnot||Bohemia|(516)5559811 
```

这将返回：

```
usingStringTokenizer()
 102, Beth Reiser, New York, (212)5558725, 
 111, Dylan Ricci, Syracuse, (315)5554486, 
 116, Brian Gugliuzza, Mamaroneck, (914)5553817, 
 120, Gertrude Stein, Elmsford, (914)5553476, 
 131, Daljit Sinnot, Bohemia, (516)5559811, 

usingStringSplit();
 102, Beth Reiser, , New York, (212)5558725, 
 111, Dylan Ricci, , Syracuse, (315)5554486, 
 116, Brian Gugliuzza, , Mamaroneck, (914)5553817, 
 120, Gertrude Stein, , Elmsford, (914)5553476, 
 131, Daljit Sinnot, , Bohemia, (516)5559811, 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-10T02:54:26.870

您的列的大小可能是 0px。要查看您的专栏，为什么不在您的专栏中写一个空格字符`' '`？

# iphone - 返回 NSString 的首字母大写

> ID：11894738
> 
> 赞同：11
> 
> 时间：2012-08-10T02:41:15.127
> 
> 标签：iphone, objective-c, nsstring, uisearchbar

我想返回`NSString`大写字母的第一个字母。我有一个`UISearchDisplayController`根据搜索结果的标题显示部分标题。

```
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    NSString *sectionTitle;
    if (searching) 
        sectionTitle = [searchSectionTitles objectAtIndex:section];
    else
        sectionTitle = [[collation sectionTitles] objectAtIndex:section];

    return sectionTitle;

} 
```

并在我的搜索功能中返回这封信，

```
[searchSectionTitles addObject:[lastName firstLetter]]; 
```

我该怎么做

```
- (NSString *)firstLetter 
```

返回 a 的第一个字母`NSString`？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-10T02:51:52.033

下面的代码将大写字符串的首字母，在这种情况下，首字母大写的字符串称为 sectionTitle

```
NSString *firstLetter = [[sectionTitle substringToIndex:1];

firstLetter = [firstLetter uppercaseString]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T02:47:32.743

用于`[yourString substringToIndex:1]`获取第一个字母

# java - 列表 abcList and method overloading I am wondering if there is a short cut for my current problem. I have a List abcList. It contains 3 type of objects/Entity A B C (they did not inherit a common interface or parent 问问题 问问题 2012-08-10T02:41:25.003 104 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am wondering if there is a short cut for my current problem. I have a List abcList. It contains 3 type of objects/Entity A B C (they did not inherit a common interface or parent, with exception to Object>. They are hibernate Entity. I have 3 overloaded method. process(A a) process(B b) process(B C) I was hoping to loop the List abcList and just calling process(); for(Object o: abcList) process(o); is there an easy solution for my current problem? I am implementing a class that contain 3 different type of object List. Automatically Create Wordpress Posts for Each Photo in my Media Folder When I'm designing Wordpress sites for clients, many of the theme designs I use consist of several posts, each with one photo and a bit of text. As a result, I end up spending lots of time creating lots of posts with one picture each-- just so the layout works as expected. It seems like there should be a way to bulk add images to the Media folder (I use the Add from Server plugin) and then tell WP to create a bunch of separate posts containing one photo each. Does anyone know how to do this? It seems like professional theme designers would get a lot of use out of a plugin that did this automatically. Thanks! Chimera javahibernategenericsgeneric-list 4 3 回答 3 This answer is useful 3 由于绑定是在编译时进行的，因此不可能知道。如果您可以为这些类添加接口，则可以使用访问者模式。 于 2012-08-10T02:48:25.380 回答 This answer is useful 1 除了访问者模式之外，要考虑的另一件事是在添加到列表时放置一个间接层。与其直接放入对象，不如放入一个可以process同时引用该对象和外部上下文的对象。 于 2012-08-10T04:33:39.177 回答 This answer is useful 0 这是使用访问者模式的好地方。在不诉诸反射的情况下，您需要为列表中的对象定义一个通用接口。让我们从那里开始： interface Visitable { void accept(Visitor v); } 那么，Visitor 是您为每种具体类型定义流程方法的地方： interface Visitor { void process(A a); void process(B b); void process(C c); } 现在，一个具体的 Visitable 能够调用适当的重载，process()因为它当然在编译时知道它自己的具体类型。例如： class A implements Visitable { void accept(Visitor v) { v.process(this); } } 类B和C将做同样的事情。所以现在你结束了你的处理循环： List <visitable>abcList = ...; Visitor visitor = ...; for (Visitable o : abcList) { o.accept(visitor); } 同样，如果您不能为所有类定义一个通用接口，那么您仍然可以通过使用反射的访问者模式来实现这一点。 于 2012-08-10T03:26:30.583 回答 Related 1 javascript - Javascript - 检索操作系统日期格式 1 android - 如何在电子邮件中制作 Html 超链接 1 paypal - PayPal Payflow 链接中信用卡表格的 CSC 字段中接受的 1 位数字 1 c# - 从数组中读取数据并写入附加到现有文件：我的代码未按预期附加数据 2 sql - 复杂的组 SQL 查询 1 c# - 如何更改表单内的焦点并使新控件处理按下的键？ 4 java - 无科学记数法的 BigDecimal 格式完全精确 2 android - Osmdroid 地图旋转 1 html - 如何在非触摸环境下运行触摸屏应用程序？ 1 hadoop - 地图减少所有者没有 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</visitable>

> ID：11894740
> 
> 赞同：2
> 
> 时间：
> 
> 标签：java, hibernate, generics, generic-list

I am wondering if there is a short cut for my current problem.

I have a List abcList.

It contains 3 type of objects/Entity A B C (they did not inherit a common interface or parent, with exception to Object>.

They are hibernate Entity.

I have 3 overloaded method.

```
process(A a)
process(B b)
process(B C) 
```

I was hoping to loop the

List abcList and just calling process();

```
for(Object o: abcList) process(o); 
```

is there an easy solution for my current problem? I am implementing a class that contain 3 different type of object List.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T02:48:25.380

由于绑定是在编译时进行的，因此不可能知道。如果您可以为这些类添加接口，则可以使用访问者模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T04:33:39.177

除了访问者模式之外，要考虑的另一件事是在添加到列表时放置一个间接层。与其直接放入对象，不如放入一个可以`process`同时引用该对象和外部上下文的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T03:26:30.583

这是使用[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)的好地方。在不诉诸反射的情况下，您需要为列表中的对象定义一个通用接口。让我们从那里开始：

```
interface Visitable {
    void accept(Visitor v);
} 
```

那么，Visitor 是您为每种具体类型定义流程方法的地方：

```
interface Visitor {
    void process(A a);
    void process(B b);
    void process(C c);
} 
```

现在，一个具体的 Visitable 能够调用适当的重载，`process()`因为它当然在编译时知道它自己的具体类型。例如：

```
class A implements Visitable {
    void accept(Visitor v) {
        v.process(this);
    }
} 
```

类`B`和`C`将做同样的事情。所以现在你结束了你的处理循环：

```
List<Visitable> abcList = ...;
Visitor visitor = ...;

for (Visitable o : abcList) {
    o.accept(visitor);
} 
```

同样，如果您不能为所有类定义一个通用接口，那么您仍然可以[通过使用反射的访问者模式来](http://www.oodesign.com/visitor-pattern.html)实现这一点。

# image - 为我的媒体文件夹中的每张照片自动创建 Wordpress 帖子

> ID：11894741
> 
> 赞同：1
> 
> 时间：2012-08-10T02:41:45.813
> 
> 标签：image, wordpress, plugins, photo

当我为客户设计 Wordpress 网站时，我使用的许多主题设计都包含几个帖子，每个帖子都有一张照片和一些文字。结果，我最终花费了大量时间创建了许多帖子，每个帖子都有一张图片——只是为了让布局按预期工作。似乎应该有一种方法可以将图像批量添加到媒体文件夹（我使用从服务器添加插件），然后告诉 WP 创建一堆单独的帖子，每个帖子包含一张照片。

有谁知道如何做到这一点？似乎专业的主题设计师会从自动执行此操作的插件中获得很多用途。

谢谢！嵌合体

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T19:13:01.150

我也四处寻找解决这个问题的方法，但最终还是编写了自己的插件来解决这个问题。

[从图像自动创建帖子](http://www.kieronhoward.co.uk/downloads/wordpress-plugin-automatically-create-posts-from-directory-of-images/)

如果你想自己做，

```
global $user_ID;
$new_post = array(
'post_title' => 'My New Post',
'post_content' => 'Lorem ipsum dolor sit amet...',
'post_status' => 'publish',
'post_date' => date('Y-m-d H:i:s'),
'post_author' => $user_ID,
'post_type' => 'post',
'post_category' => array(0)
);
$post_id = wp_insert_post($new_post); 
```

并且文档中有很好的信息：

[WP文档](http://codex.wordpress.org/Function_Reference/wp_insert_post)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T11:17:57.960

您可以制作一组默认图像并导出附带的 sql 记录。因此，设置一个新站点，您可以同时导入文件和 sql，以便准备好图像。

可以制作您想要的功能，[nextgen](http://wordpress.org/extend/plugins/nextgen-gallery/)会扫描它的文件夹。

# c++ - Static variables inside instance methods - How to fix that?

> ID：11894742
> 
> 赞同：5
> 
> 时间：2012-08-10T02:42:03.423
> 
> 标签：c++, oop, design-patterns, static

Recently I inherited 10 year old code base with some interesting patterns. Among them is static variables inside instance methods. Only single instance of the class is instantiated and I can hardly find reason to justify existence of those static variables in instance methods.

1.  Have you ever designed instance methods with static variables? And what are your rationales?

2.  If this pattern is considered bad then how to fix it?

Note: This question is not relevant to [Static variables in instance methods](https://stackoverflow.com/questions/2164095/static-variables-in-instance-methods)

## EDIT:

Some reading:

1.  [static class and singleton](https://stackoverflow.com/questions/720744/static-class-and-singleton)
2.  [http://objectmentor.com/resources/articles/SingletonAndMonostate.pdf](http://objectmentor.com/resources/articles/SingletonAndMonostate.pdf)
3.  [http://www.semantics.org/once_weakly/w01_expanding_monostate.pdf](http://www.semantics.org/once_weakly/w01_expanding_monostate.pdf)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T02:46:47.363

1.  这是[*单例*](http://en.wikipedia.org/wiki/Singleton_pattern)模式的经典 C++ 实现，在 Scott Meyers C++ 的一本书中进行了描述。
2.  单例是一个[有争议的模式](http://www.research.ibm.com/designpatterns/pubs/ph-jun96.txt)，因此对于单例的好坏没有全行业的共识。

单例的替代方案是纯静态对象。这个[问题](https://stackoverflow.com/a/3841249/335858)有很好的讨论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T02:51:31.297

我唯一一次在可实例化的类中使用静态字段是作为常量。

一般来说，您希望将您的类创建为完全静态的或完全可实例化的（您可能希望保持静态的常量除外）。对于单例类，它们的行为方式几乎相同。混合这两种技术的危险在于，如果你决定让这个类不再是单例的，你可能会在你现在的多实例类中遇到一些奇怪的行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T03:38:39.173

拥有静态变量在过程函数中很有用，因为它可以用作一种范围有限的全局变量。

我可以看到在方法中执行此类操作的唯一原因是让变量在多次调用中保持不变，而不必声明没有其他用途的成员变量。老实说，我觉得这只是懒惰的编程，应该避免。

# php - 在php cli中，如何重定向？

> ID：11894744
> 
> 赞同：0
> 
> 时间：2012-08-10T02:42:12.487
> 
> 标签：php, command-line-interface

我将以下代码存储在名为 index.php 的文件中。

```
<?php
file_put_contents(date('Y-m-d-H-i-s', time()) . '.txt', '123');
sleep(1);
header("Location: ./index.php", true, 301);
?> 
```

在浏览器中，它每秒创建一个文件，但是当我在 php CLI (php -f index.php) 中运行它时，它只会创建一个文件。

如何在 php CLI 中使用重定向？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T02:44:18.897

命令行界面 (CLI) 无法重定向，因为它不是浏览器。你需要的是一个循环。尝试查找“for 循环”或“while 循环”。“for 循环”重复代码多次，“while 循环”重复代码直到满足条件。

例如以下代码将循环 10 次：

```
for ( $counter = 0; $counter < 10; $counter++) {
    file_put_contents(date('Y-m-d-H-i-s', time()) . '.txt', '123');
    sleep(1);
} 
```

# java - Why does System.nanoTime() take 4400 nano seconds

> ID：11894746
> 
> 赞同：5
> 
> 时间：2012-08-10T02:42:58.833
> 
> 标签：java

I was testing some algorithms which I surrounded with a nanoseconds timer when I randomly forgot to remove the timer I found out that this code:

```
 a = System.nanoTime();
    System.out.println(System.nanoTime() - a); 
```

always prints 4400 nano seconds on my system. That would be 4.4 microseconds whereas this code:

```
 a = System.currentTimeMillis();
    for (int i = 0; i < 1000; i++)
        System.nanoTime();
    System.out.println(System.currentTimeMillis() - a); 
```

Prints 0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T03:38:10.933

4400 纳秒是 4.4 微秒，或 0.0044 毫秒。第二个示例将始终打印零，因为经过的时间***远***小于一毫秒。然后是使用的两个计时器之间的差异： `currentTimeMillis`可以针对时钟偏差进行调整而`nanoTime`不能，但我怀疑这在这里​​起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T08:43:15.023

使用`nanoseconds()`来衡量自己可能不是实施者考虑的用例。通常，您会使用它来计时“慢”操作，或者对“快”操作的多次调用，这些操作一起是“慢”的，其中“慢”是指超过 0.1 毫秒的任何时间。

您想要延长操作时间的原因是粒度`nanoseconds()`不是那么好 - 取决于硬件和操作系统，但远不及纳秒。

# tomcat - Run servlet container using unix domain sockets?

> ID：11894747
> 
> 赞同：4
> 
> 时间：2012-08-10T02:43:12.023
> 
> 标签：tomcat, servlets, jetty

I have a servlet that I want to connect to over a unix domain socket since I cannot start listen on a new TCP port because of a security policy. Unfortunately I have been unable to find a servlet container that can serve over a unix domain socket. So far I've looked at Tomcat and Jetty.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T21:40:14.967

首先，您需要弄清楚如何在 java 上支持 unix 域套接字。

先前的问题解决了这个问题。 [Java中的UNIX域套接字和Java](https://stackoverflow.com/questions/4099432/unix-domain-socket-in-java)的[UNIX套接字实现？](https://stackoverflow.com/questions/170600/unix-socket-implementation-for-java)

看起来 junixsocket 可能能够将自己呈现为 Socket，如果是这种情况，那么您将想看看是否可以使用各种引导类路径工具替换默认的 Java java.net.Socket 实现。那时，任何支持经典套接字的东西，比如（早期版本的）Jetty 及其 SocketConnector（不是 NIO 或 SSL）都应该（理论上）工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T14:30:37.230

我不相信 JVM 将 UNIX 域套接字公开给任何 Java 代码。如果您想使用 UNIX 域套接字，我认为您必须编写自己的本机代码来侦听并将字节代理到容器。这听起来可行，但肯定不愉快。

# c++ - 指向成员函数的地址是什么，没有虚拟也没有继承

> ID：11894753
> 
> 赞同：2
> 
> 时间：2012-08-10T02:43:33.923
> 
> 标签：c++, member-function-pointers

我写了一些测试代码，找出成员函数的地址。但结果让我很困惑。代码是

```
#include <stdio.h>
#include <stdlib.h>
#include <iostream>

class A
{
public:
        A(char _a, char _b, char _c, char _t):a(_a), b(_b), c(_c), t(_t){}

private:
        char t;
        char a;
public:
        char b;
        char c;
        void test1(){std::cout << a << std::endl;}
        void test2(){std::cout << b << std::endl;}
        void test3(){std::cout << c << std::endl;}
        void test4(){std::cout << t << std::endl;}

        static void print(){

                char A::*pa = &A::a;
                char A::*pb = &A::b;
                char A::*pc = &A::c;
                char A::*pt = &A::t;
                printf("data member : %p, %p, %p, %p\n", pa, pb, pc, pt);

                void (A::*pf1)() = &A::test3;
                void (A::*pf2)() = &A::test2;
                void (A::*pf3)() = &A::test3;
                void (A::*pf4)() = &A::test2;
                printf("function member : %p, %p, %p, %p\n", pf1, pf2, pf3, pf4 );
        }
};

int main()
{
        A::print();

    //system("pause");//need on Dev-c++
        return 0;
} 
```

我用g++在ubuntu上运行这段代码，用Dev-C++在Windos上运行，结果是一样的

```
data member : 0x1, 0x2, 0x3, (nil)
function member : 0x8048780, (nil), 0x804874e, (nil) 
```

为什么 pf2 和 pf4 为零？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T03:08:20.383

指向成员的指针不是常规指针，您可以通过打印指向成员的指针的大小和常规指针的大小来测试它。您拥有的代码表现出未定义的行为，但如果您想要对结果进行简单解释，`printf`则采用可变数量的参数，这是通过以某种先入为主的顺序将参数推送到堆栈并添加一些关于数量的额外信息来实现的调用中的参数是。

在您的情况下，指向成员函数的指针按原样被推送（通常是常规指针大小的两倍），然后`printf`读取堆栈并将那里的位解释为常规指针。我的猜测（你必须阅读编译器/平台文档来验证这一点）是你只打印前两个参数，内容用逗号分隔。

一个稍微好一点的方法是创建一个指向成员函数的指针和一个适当大小的 char 数组的联合，用指向成员的指针初始化它并通过数组打印十六进制值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T02:54:28.120

> 为什么 pf2 和 pf4 为零？

因为显示的代码具有未定义的行为。指向成员函数[的指针不是指针](http://ideone.com/bx5wz)（是的，是的，我知道这是不好的命名；C++ 就是这样），但 printf 格式字符串需要指针。

# php - Create array of arrays in php then extract the final array back into the individual arrays

> ID：11894754
> 
> 赞同：2
> 
> 时间：2012-08-10T02:43:46.047
> 
> 标签：php, arrays

I have several arrays that are created in a PHP function. I want to return all of those arrays in the return value when the function returns. However, since I can only return one array, I create an array of arrays, like so:

```
$return_value = array($a_config_lines, $port_values, $proto_values, $dev_values, $ca_values, $key_values, $crt_values, $key_values, $group_values, $user_values, $dh_values, $server_values, $ifconfig_pool_values, $keepalive_values, $comp_values, $verb_values, $status_values, $management_values, $a_extra_config_settings);
return $return_value; 
```

$return_value is an array, that contains all of the other arrays, like $comp_values, $verb_values, etc.

When I return from the function, I want to immediately REVERSE what I just did. So I want to take $return_value, and split it up into the old individual arrays, but now they keys for those arrays are 0,1,2, etc... is there an easy way to do this?

Or will I have to manually set all of the keys before I return the array?

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:49:22.393

如果您返回的数组是关联的，您可以在返回[`extract()`](http://us3.php.net/manual/en/function.extract.php)时将所有组件数组拉回全局范围：

```
// Define your array as an associative array, keys named the same as the component variables
return = array(
  'a_config_lines' => $a_config_lines, 
  'port_values' => $port_values, 
  'proto_values' => $proto_values, 
  // etc...
); 
```

在调用你的函数时：

```
// extract() the returned array, to dump all the vars back into global scope
$return = your_function();
extract($return);
// All arrays are now at global scope
var_dump($port_values);
var_dump($a_config_lines); 
```

但是，当您可以从数组中整齐地访问它们时，将它们提取回全局范围几乎没有价值。这使您免于用一堆新变量污染全局范围。

```
// Better! Just use the array.
$return = your_function();
var_dump($return['port_values']); 
```

# java - JasperReports: No data displayed on Details band

> ID：11894763
> 
> 赞同：2
> 
> 时间：2012-08-10T02:44:59.610
> 
> 标签：java, json, jasper-reports

I would like to seek some assistance in determining why there are no data displayed.
When i debugged the codes, the ***JsonDataSource*** contains values coming from the *JSON* File.

On *iReport*, values are correctly displayed on both parameter and data fields, but when run thru the codes below only the parameter fields are displayed.

Below is the code snippet that I'm using.

```
public ActionForward createReport(ActionMapping mapping, ActionForm form,
        HttpServletRequest request, HttpServletResponse response)
        throws Exception {
    String sReportType = (String) request.getParameter("srt");
    String sRepType = "";
    String sDateFrom = (String) request.getParameter("sdf");
    String sDateTo = (String) request.getParameter("sdt");
    String sBID = (String) request.getParameter("ddid");
    Collection clCol = null;
    JSONSerializer serializer = new JSONSerializer();

    clCol = dUtil.getInfo(sBID, 1, sDateTo);
    String sJsonString = this.convertToJson(clCol, serializer);

    Map params = new HashMap();
    params.put(JsonQueryExecuterFactory.JSON_DATE_PATTERN, "MM/dd/yyyy");
    params.put(JsonQueryExecuterFactory.JSON_NUMBER_PATTERN, "#,##0.##");
    params.put(JsonQueryExecuterFactory.JSON_LOCALE, Locale.ENGLISH);
    params.put(JRParameter.REPORT_LOCALE, Locale.US);
    params.put("bid", dUtil.getNameById(sBID));
    params.put("datefrom", sDateFrom);
    params.put("dateto", sDateTo);
    params.put("reportby", sFullName);

    String sFPath = pReader.getPropValue(pReader.REPOJSONDIR);
    String sFileNm = pReader.getPropValue(pReader.REPOJSONFILENAME);
    String sRepName = dUtil.getReportFileName(sReportType);
    sRepType = pReader.getPropValue(pReader.GETREPORTMPLT) + sRepName;

    String sFileName = sFPath + sSID.substring(0, 5) + sFileNm;
    String sFilePDF = pReader.getPropValue(pReader.GETREPORTMPLTOUT)
            + sSID.substring(0, 5)
            + sRepName.substring(0, sRepName.indexOf("."))
            + ".pdf";
    //byte[] bytes = null;
    JasperPrint jasperPrint = null;
    //ServletOutputStream servletOutputStream = response.getOutputStream();
    InputStream reportStream = getClass().getResourceAsStream(sRepType);

    // Block for JSON File creation
    try {
        FileWriter fw = new FileWriter(new File(sFileName));
        fw.write(sJsonString);
        fw.flush();
        fw.close();
    } catch (FileNotFoundException fex) {
        logMe.setLogError(sUser, sSID, fex.getLocalizedMessage());
    }
    //End Block
    //Block for JasperReport PDF creation
    try {
        //Getting JSON File as inputStream
        InputStream is = new FileInputStream(sFileName);
        //Creating JSONDataSource Object
        JsonDataSource jds = new JsonDataSource(is);
        //Filling ReportFile with JSON Data from file
        jasperPrint = JasperFillManager.fillReport(reportStream, params, jds); //<<-- Is this where the problem is?
        //Creating the PDF file for web loading.
        JasperExportManager.exportReportToPdfFile(jasperPrint, sFilePDF); // <<-- or this one?
        //Closing the JSON File inputStream
        jds.close();
        is.close();
        //Closing the JasperReport File Stream
        reportStream.close();
        //Passing the filename to the browser for jquery handling.
        response.getWriter().write(sFilePDF.replace(pReader.getPropValue(pReader.GETREPORTMPLTOUT),
                request.getContextPath() + pReader.getPropValue(pReader.GETREPORTMPLTDIR)));

    } catch (JRException e) {
        log.setLogInfo(sUser, sSID, "Report [createReport] create report error [" + sFilePDF + "]["
                + sReportType + "][" + sDateFrom + " - " + sDateTo + "] ["
                + e.getLocalizedMessage() + "]");
    } catch (FileNotFoundException ex) {
        log.setLogFatal(sUser, sSID, ex.getMessage());
    } catch (Exception e) {
        log.setLogFatal(sUser, sSID, e.getMessage());
    }
    logMe.setLogInfo(sUser, sSID, "exiting createreport");
    return null;
} 
```

Appreciate anyone's assistance on the matter.
below is the json source and jrxml file.
filename: c7070payroll.json
content:

`{"rows":[{"acctno":"3008000017","approved":false,"approvedby":"Test","batchcount":1,"branchid":"ff39540a6ded24c3feba8501a42fc34b","cashcard":false,"class":"com.upload.PayHeader","clientid":"3bedcbe428fc959e87e92062358bdaf3","compname":"test user 123","date_approved":1344441600000,"date_credit":1344488158000,"date_processed":null,"date_uploaded":1344488158000,"id":"9465306278db2ac8386c745fcd5eae6f","istpd":true,"payroll_filename":"AA10809001.java","processed":false,"processed_by":null,"status":2,"status_desc":"Approved, With Warnings","total_amount":49993040.71,"total_records":11,"uploaded_by":"Test"},{"acctno":"6018539400951087","approved":true,"approvedby":"Test","batchcount":2,"branchid":"ff39540a6ded24c3feba8501a42fc34b","cashcard":false,"class":"com.upload.PayHeader","clientid":"862bb9ea069ea12c9bff2051871a8102","compname":"Test User 456","date_approved":1344488172000,"date_credit":1344488172000,"date_processed":null,"date_uploaded":1344488172000,"id":"dac748c0b1101d40f0916039e92253d3","istpd":true,"payroll_filename":"GOFISH.java","processed":false,"processed_by":null,"status":2,"status_desc":"REJECT, Invalid syntax","total_amount":250000.0,"total_records":10,"uploaded_by":"Test"}]}`
filename: PQ4.jrxml
xml content:

```
`<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="PFBA_Q4" pageWidth="1008" pageHeight="612" orientation="Landscape" whenNoDataType="AllSectionsNoDetail" columnWidth="968" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" isFloatColumnFooter="true" uuid="cb26c490-b5d4-4f6a-b2a6-5fa0cae6269a">
    <property name="ireport.zoom" value="1.0"/>
    <property name="ireport.x" value="0"/>
    <property name="ireport.y" value="0"/>
    <parameter name="branchid" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="datefrom" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="dateto" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <parameter name="reportby" class="java.lang.String">
        <defaultValueExpression><![CDATA[]]></defaultValueExpression>
    </parameter>
    <queryString language="json">
        <![CDATA[rows]]>
    </queryString>
    <field name="payroll_filename" class="java.lang.String">
        <fieldDescription><![CDATA[payroll_filename]]></fieldDescription>
    </field>
    <field name="date_uploaded" class="java.lang.String">
        <fieldDescription><![CDATA[date_uploaded]]></fieldDescription>
    </field>
    <field name="uploaded_by" class="java.lang.String">
        <fieldDescription><![CDATA[date_uploaded]]></fieldDescription>
    </field>
    <field name="total_records" class="java.lang.String">
        <fieldDescription><![CDATA[total_records]]></fieldDescription>
    </field>
    <field name="total_amount" class="java.lang.String">
        <fieldDescription><![CDATA[total_amount]]></fieldDescription>
    </field>
    <field name="acctno" class="java.lang.String">
        <fieldDescription><![CDATA[acctno]]></fieldDescription>
    </field>
    <field name="compname" class="java.lang.String">
        <fieldDescription><![CDATA[compname]]></fieldDescription>
    </field>
    <field name="status_desc" class="java.lang.String">
        <fieldDescription><![CDATA[status_desc]]></fieldDescription>
    </field>
    <field name="date_credit" class="java.lang.String">
        <fieldDescription><![CDATA[date_credit]]></fieldDescription>
    </field>
    <field name="branchid" class="java.lang.String">
        <fieldDescription><![CDATA[branchid]]></fieldDescription>
    </field>
    <sortField name="compname"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <title>
        <band height="37" splitType="Stretch"/>
    </title>
    <pageHeader>
        <band height="55" splitType="Stretch">
            <staticText>
                <reportElement uuid="8ccadef7-6c06-446f-b0d0-2018c9e7f483" x="0" y="0" width="968" height="17"/>
                <textElement textAlignment="Center"/>
                <text><![CDATA[Payroll Files]]></text>
            </staticText>
            <textField>
                <reportElement uuid="ff174d4e-2373-4c37-99ca-ccf09a0a9d0a" x="0" y="17" width="968" height="20"/>
                <textElement textAlignment="Center"/>
                <textFieldExpression><![CDATA["Date Covered: uploaded from " + $P{datefrom} + " to " + $P{dateto}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="true">
                <reportElement uuid="86b5b2f5-288d-4348-8972-ad0e04748cbe" x="0" y="35" width="209" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA["Branch : " + $F{branchid}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="34f96cc7-3432-46c5-b7fb-3bbed5313e5d" x="767" y="17" width="190" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA["Username : " + $P{reportby}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="34a055ac-5d93-4bd4-a751-69558a68fb92" x="0" y="35" width="968" height="20"/>
                <textElement textAlignment="Center"/>
                <textFieldExpression><![CDATA["Credit Date : " + $F{date_credit}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement uuid="f3f837e7-e18a-4f5a-aa5f-a55a5537f669" x="767" y="0" width="190" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA["Run Time: " + new SimpleDateFormat("MM/dd/yyyy HH:mm:ss").format(new Date())]]></textFieldExpression>
            </textField>
        </band>
    </pageHeader>
    <columnHeader>
        <band height="20" splitType="Stretch">
            <staticText>
                <reportElement uuid="d915b454-6e34-41a3-92f4-c93a4d03e5b7" x="0" y="0" width="133" height="20"/>
                <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
                    <pen lineWidth="0.25"/>
                    <topPen lineWidth="0.25"/>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                    <rightPen lineWidth="0.25"/>
                </box>
                <textElement textAlignment="Center"/>
                <text><![CDATA[File Name]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="5b0d3978-a6c4-48ff-8a1c-614a8d53f4f2" x="133" y="0" width="210" height="20"/>
                <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
                    <pen lineWidth="0.25"/>
                    <topPen lineWidth="0.25"/>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                    <rightPen lineWidth="0.25"/>
                </box>
                <textElement textAlignment="Center"/>
                <text><![CDATA[Company Name]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="a8a922cf-cba0-4a4e-a2f9-ed8f5af32504" x="343" y="0" width="92" height="20"/>
                <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
                    <pen lineWidth="0.25"/>
                    <topPen lineWidth="0.25"/>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                    <rightPen lineWidth="0.25"/>
                </box>
                <textElement textAlignment="Center"/>
                <text><![CDATA[Funding Account]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="6115ab0f-f03e-4a69-a01b-818435449557" x="435" y="0" width="108" height="20"/>
                <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
                    <pen lineWidth="0.25"/>
                    <topPen lineWidth="0.25"/>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                    <rightPen lineWidth="0.25"/>
                </box>
                <textElement textAlignment="Center"/>
                <text><![CDATA[Total Records]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="185caa20-f79e-4c9e-867a-b6bf03efaa0d" x="543" y="0" width="127" height="20"/>
                <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
                    <pen lineWidth="0.25"/>
                    <topPen lineWidth="0.25"/>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                    <rightPen lineWidth="0.25"/>
                </box>
                <textElement textAlignment="Center"/>
                <text><![CDATA[Total Amount]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="0958726b-82a4-4b76-9cb3-b356c2557627" x="670" y="0" width="96" height="20"/>
                <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
                    <pen lineWidth="0.25"/>
                    <topPen lineWidth="0.25"/>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                    <rightPen lineWidth="0.25"/>
                </box>
                <textElement textAlignment="Center"/>
                <text><![CDATA[Uploaded By]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="a1e2a408-5e0b-4500-9cb3-7043cdd8e173" x="863" y="0" width="92" height="20"/>
                <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
                    <pen lineWidth="0.25"/>
                    <topPen lineWidth="0.25"/>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                    <rightPen lineWidth="0.25"/>
                </box>
                <textElement textAlignment="Center"/>
                <text><![CDATA[Status]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="fc089d99-48d1-4f0a-98c8-e8f5f49bf8af" x="766" y="0" width="97" height="20"/>
                <box topPadding="1" leftPadding="1" bottomPadding="1" rightPadding="1">
                    <pen lineWidth="0.25"/>
                    <topPen lineWidth="0.25"/>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                    <rightPen lineWidth="0.25"/>
                </box>
                <textElement textAlignment="Center"/>
                <text><![CDATA[Date Uploaded]]></text>
            </staticText>
        </band>
    </columnHeader>
    <detail>
        <band height="20" splitType="Stretch">
            <textField isBlankWhenNull="false">
                <reportElement uuid="f970775b-c503-4ab1-bb29-c1662a4992aa" x="0" y="0" width="133" height="20"/>
                <box leftPadding="2" rightPadding="2">
                    <pen lineWidth="0.25"/>
                    <topPen lineWidth="0.25"/>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                    <rightPen lineWidth="0.25"/>
                </box>
                <textElement verticalAlignment="Middle">
                    <font fontName="Arial" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{payroll_filename}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="false">
                <reportElement uuid="4788efc7-f02c-4403-acbf-25ec62284ba0" x="133" y="0" width="210" height="20"/>
                <box leftPadding="2" rightPadding="2">
                    <pen lineWidth="0.25"/>
                    <topPen lineWidth="0.25"/>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                    <rightPen lineWidth="0.25"/>
                </box>
                <textElement verticalAlignment="Middle">
                    <font fontName="Arial" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{compname}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="false">
                <reportElement uuid="a7854a19-4f54-46e3-9d6f-3d03ce0fbf9c" x="343" y="0" width="92" height="20"/>
                <box leftPadding="2" rightPadding="10">
                    <pen lineWidth="0.25"/>
                    <topPen lineWidth="0.25"/>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                    <rightPen lineWidth="0.25"/>
                </box>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font fontName="Arial" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{acctno}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="false">
                <reportElement uuid="3291695f-b819-4f73-a50c-afada4d610a6" x="670" y="0" width="96" height="20"/>
                <box leftPadding="5" rightPadding="2">
                    <pen lineWidth="0.25"/>
                    <topPen lineWidth="0.25"/>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                    <rightPen lineWidth="0.25"/>
                </box>
                <textElement textAlignment="Justified" verticalAlignment="Middle">
                    <font fontName="Arial" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{uploaded_by}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="false">
                <reportElement uuid="ea7f214d-e1f4-4a28-880b-6dc344c325c8" x="863" y="0" width="92" height="20"/>
                <box leftPadding="2" rightPadding="2">
                    <pen lineWidth="0.25"/>
                    <topPen lineWidth="0.25"/>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                    <rightPen lineWidth="0.25"/>
                </box>
                <textElement textAlignment="Justified" verticalAlignment="Middle">
                    <font fontName="Arial" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{status_desc}]]></textFieldExpression>
            </textField>
            <textField pattern="" isBlankWhenNull="false">
                <reportElement uuid="1236a160-8ddf-4087-80fb-8305f54eb52e" x="766" y="0" width="97" height="20"/>
                <box leftPadding="5" rightPadding="2">
                    <pen lineWidth="0.25"/>
                    <topPen lineWidth="0.25"/>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                    <rightPen lineWidth="0.25"/>
                </box>
                <textElement textAlignment="Justified" verticalAlignment="Middle">
                    <font fontName="Arial" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{date_uploaded}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="false">
                <reportElement uuid="ab50b2bb-17f4-4c28-bbfb-5c31a00de251" x="435" y="0" width="108" height="20"/>
                <box leftPadding="5" rightPadding="5">
                    <pen lineWidth="0.25"/>
                    <topPen lineWidth="0.25"/>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                    <rightPen lineWidth="0.25"/>
                </box>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font fontName="Arial" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{total_records}]]></textFieldExpression>
            </textField>
            <textField isBlankWhenNull="false">
                <reportElement uuid="7b6afcf5-de34-45bb-84ab-3844d786f97b" x="543" y="0" width="127" height="20"/>
                <box leftPadding="5" rightPadding="5">
                    <pen lineWidth="0.25"/>
                    <topPen lineWidth="0.25"/>
                    <leftPen lineWidth="0.25"/>
                    <bottomPen lineWidth="0.25"/>
                    <rightPen lineWidth="0.25"/>
                </box>
                <textElement textAlignment="Right" verticalAlignment="Middle">
                    <font fontName="Arial" size="8"/>
                </textElement>
                <textFieldExpression><![CDATA[$F{total_amount}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
    <columnFooter>
        <band height="45" splitType="Stretch"/>
    </columnFooter>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
    <summary>
        <band height="42" splitType="Stretch"/>
    </summary>
</jasperReport> 
```

`

# python - 无法使用有效的用户名和密码登录 django 管理页面

> ID：11894765
> 
> 赞同：70
> 
> 时间：2012-08-10T02:45:15.500
> 
> 标签：python, django, login, admin, mod-wsgi

我无法登录到 django 管理页面。当我输入有效的用户名和密码时，它只是再次打开登录页面，没有错误消息

这个问题在[django FAQ](https://docs.djangoproject.com/en/dev/faq/admin/#i-can-t-log-in-when-i-enter-a-valid-username-and-password-it-just-brings-up-the-login-page-again-with-no-error-messages)中，但我已经查看了那里的答案，但仍然无法通过初始登录屏幕。

我在 ubuntu 12.04 上使用 django 1.4 和 apache2 和 modwsgi。

我已经确认我在`admin.py`文件中注册了管理员，确保在添加`INSTALLED_APPS`. 当我输入错误的密码时，我*确实*得到了一个错误，所以我的管理员用户正在被验证，只是没有进入管理页面。

我已经尝试过设置`SESSION_COOKIE_DOMAIN`机器的 IP 和无。（确认cookie域在chrome中显示为机器IP）

此外，检查用户是否通过 shell 进行身份验证：

```
>>> from django.contrib.auth import authenticate
>>> u = authenticate(username="user", password="pass")
>>> u.is_staff
True
>>> u.is_superuser
True
>>> u.is_active 
True 
```

尝试使用 IE8 和 chrome canary 登录，都导致相同的返回登录屏幕。

还有什么我想念的吗？？？？

**设置.py**

```
...
MIDDLEWARE_CLASSES = (
    'django.middleware.gzip.GZipMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.middleware.transaction.TransactionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
)
AUTHENTICATION_BACKENDS = ('django.contrib.auth.backends.ModelBackend',)
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.admin',    
    'django.contrib.staticfiles',
    'django.contrib.gis',
    'myapp.main',
)

SESSION_EXPIRE_AT_BROWSER_CLOSE = True
SESSION_SAVE_EVERY_REQUEST = True
SESSION_COOKIE_AGE = 86400 # sec
SESSION_COOKIE_DOMAIN = None
SESSION_COOKIE_NAME = 'DSESSIONID'
SESSION_COOKIE_SECURE = False 
```

**网址.py**

```
from django.conf.urls.defaults import * #@UnusedWildImport
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
from django.contrib import admin

admin.autodiscover()

urlpatterns = patterns('',
    (r'^bin/', include('myproject.main.urls')),    
    (r'^layer/r(?P<layer_id>\d+)/$', "myproject.layer.views.get_result_layer"),
    (r'^layer/b(?P<layer_id>\d+)/$', "myproject.layer.views.get_baseline_layer"),
    (r'^layer/c(?P<layer_id>\d+)/$', "myproject.layer.views.get_candidate_layer"),    
    (r'^layers/$', "myproject.layer.views.get_layer_definitions"),
    (r'^js/mapui.js$', "myproject.layer.views.view_mapjs"),
    (r'^tilestache/config/$', "myproject.layer.views.get_tilestache_cfg"),
    (r'^admin/', include(admin.site.urls)),  
    (r'^sites/', include("myproject.sites.urls")),  
    (r'^$', "myproject.layer.views.view_map"),
)

urlpatterns += staticfiles_urlpatterns() 
```

阿帕奇版本：

```
Apache/2.2.22 (Ubuntu) mod_wsgi/3.3 Python/2.7.3 configured 
```

Apache apache2/站点可用/默认：

```
<VirtualHost *:80>
        ServerAdmin ironman@localhost
        DocumentRoot /var/www/bin
        LogLevel warn
        WSGIDaemonProcess lbs processes=2 maximum-requests=500 threads=1
        WSGIProcessGroup lbs
        WSGIScriptAlias / /var/www/bin/apache/django.wsgi
        Alias /static /var/www/lbs/static/
</VirtualHost>
<VirtualHost *:8080>
        ServerAdmin ironman@localhost
        DocumentRoot /var/www/bin
        LogLevel warn
        WSGIDaemonProcess tilestache processes=2 maximum-requests=500 threads=1
        WSGIProcessGroup tilestache
        WSGIScriptAlias / /var/www/bin/tileserver/tilestache.wsgi
</VirtualHost> 
```

**更新**

使用开发服务器时，管理页面确实会继续，`runserver`因此看起来像是 wsgi/apache 问题。还没有想通。

**解决方案**

问题是我将设置文件`SESSION_ENGINE`值设置为没有`'django.contrib.sessions.backends.cache'` *正确*`CACHE_BACKEND`配置。

我已经更改了`'django.contrib.sessions.backends.db'`解决问题的 SESSION_ENGINE。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-24T13:39:20.317

调试步骤：

*   确保您的数据库已同步
    *   仔细检查您是否有 django_session 表
*   尝试进行身份验证
    *   您是否看到表中正在创建记录`django_session`？

如果不

*   删除非标准设置
    *   AUTHENTICATION_BACKENDS = ('django.contrib.auth.backends.ModelBackend',)
    *   SESSION_EXPIRE_AT_BROWSER_CLOSE = 真
    *   SESSION_SAVE_EVERY_REQUEST = True
    *   SESSION_COOKIE_AGE = 86400 # 秒
    *   SESSION_COOKIE_DOMAIN = 无
    *   SESSION_COOKIE_NAME = 'DSESSIONID'
    *   SESSION_COOKIE_SECURE = 假
*   确保您的数据库已同步
    *   仔细检查你有一张`django_session`桌子
*   尝试进行身份验证
    *   您是否看到表中正在创建记录`django_session`？

让我知道这是否会出现任何有用的调试。

示例设置文件：[https ://github.com/fyaconiello/Django-Blank-Bare-Bones-CMS/blob/master/dbbbcms/settings.py](https://github.com/fyaconiello/Django-Blank-Bare-Bones-CMS/blob/master/dbbbcms/settings.py)

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-23T09:40:09.797

```
>>> from django.contrib.auth import authenticate
>>> u = authenticate(username="user", password="pass")
>>> u.is_staff = True
>>> u.is_superuser = True 
```

> `Is there something else I'm missing?`

`u.is_active`应该`True`

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-05-20T16:02:46.413

我有这个问题。问题是在生产中我设置了两个变量`True`，允许我使用 https 连接到站点。

`SESSION_COOKIE_SECURE`如果您在 localhost http 上开发，`CSRF_COOKIE_SECURE`则应设置为。`False`更改这两个变量以`False`允许我在本地开发时登录管理站点。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-12T02:48:41.597

我不相信管理员密码存储在 settings.py 文件中。它是在您第一次 syncdb 时创建的。我认为您要么跳过创建超级用户，要么只是打错字。尝试在项目根目录下的终端中运行。：

python django-admin.py 创建超级用户

这将允许您重新输入您的管理员登录名。也可以在这里看到[https://docs.djangoproject.com/en/dev/ref/django-admin/](https://docs.djangoproject.com/en/dev/ref/django-admin/)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-28T08:36:38.150

我们在我们的应用程序中遇到了类似的问题，这些可能会有所帮助：

1.  使用 cleanup 命令从 django_sessions 中清除旧会话

2.  在 firefox(firebug) 或 chrome 开发者工具中检查 cookie 的大小。因为在 admin(django.contrib.messages.middleware.MessageMiddleware) 中默认启用消息传递，所以 cookie 大小有时会在多次编辑和删除时大于 4096 字节。一项快速测试是删除“消息”cookie，然后查看您是否可以登录。

由于这个和其他与 apache 内存相关的问题，我们实际上最终切换到了 nginx/uwsgi 路由。从那以后，就再也没有在 nginx 中看到过这种情况了。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-07-10T16:05:33.227

在无法自己登录后，我在上面的评论中看到有人提到删除非标准设置。

将此添加到我的本地设置为我解决了它

> SESSION_COOKIE_SECURE = 假

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-23T09:34:54.457

听起来像是会话问题，因为在发布后您被重定向并且系统立即忘记了您已登录。

尝试以下操作：

1.  检查您的会话后端是否正常工作。
2.  如果您使用 db cache backend 检查事务中间件是否出现问题，请将其与缓存后端交换。
3.  尝试 db backend 并检查 db 表中是否存储了会话

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-08-25T08:38:45.793

您是否尝试通过以下方式创建用户：

```
python manage.py createsuperuser 
```

当我在测试机器上创建数据库并将其迁移到部署服务器时，我遇到了同样的问题......

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-08-22T17:23:43.600

我不太确定，但问题可能出在您的 URL 配置上，具体在这两行：

```
(r'^admin/', include(admin.site.urls)),  
(r'^sites/', include("myproject.sites.urls")), 
```

很久以前，我在浏览 Django 项目的管理员时遇到了麻烦，因为单个 URL 配置覆盖了管理员 url 的一部分。当您指定包含也是管理 URL 一部分的元素的自定义 URL 配置时，Django 似乎不喜欢它。在您的情况下，您`django.contrib.sites`在`settings.py`. 您可以访问此应用程序的管理面板`http://127.0.0.1:8000/admin/sites/`。可能是您的 URL 配置`r'^sites/'`覆盖了管理员 URL 的一部分。尝试重命名此特定 URL 配置或禁用`django.contrib.sites`以`INSTALLED_APPS`进行测试。

请注意，这只是一个假设。我所知道的是，Django 的管理面板对使用类似名称的 URL 配置有点挑剔，比如它自己的 URL。我目前无法自己测试。但也许这对你有点帮助。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-08-23T09:57:52.090

检查有关此主题的其他一些文章，它可能与 sys.path 有关。你可以在运行开发服务器和运行 WSGI 时检查和比较 sys.path。

有关一些详细信息，请查看[这篇](http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html)和[那篇文章](http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango)。但在进入本文的细节之前，我会先检查 sys.path。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2012-08-27T11:16:22.533

检查您是否至少有一个`site`可以使用。

```
>>> from django.contrib.sites.models import Site
>>> Site.objects.count()
(0.048) SELECT COUNT(*) FROM `django_site`; args=()
1 
```

如果您在这里看到 0 - 创建一个。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2018-09-27T10:12:35.690

确保具有以下条目的数据库用户表为真：

```
is_staff  => True  (if exit).
is_active  => True .
is_superuser => True. 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-12-19T04:44:39.363

这不是 OP 的问题，但我发布这个答案是希望有人可能会走上与我相同的道路并因此得出这个问题。

一年后我回到了一个旧的代码库，尽管所有常规检查都通过了，但仍被拒绝访问管理面板（用户存在，数据库中没有任何错误，所有调试模式都打开等）。不幸的是，我忘记了管理员登录页面不是在通常的`/admin`路线上，而是在备用路线上。该`/admin`页面是一个虚假的登录页面，总是导致登录失败。

此设置是使用应用程序创建的[`django-admin-honeypot`](https://github.com/dmpayton/django-admin-honeypot)。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-08-22T15:46:58.270

免责声明：我还不能添加评论，所以我必须在这里要求澄清同时提出解决方案。对此感到抱歉。

用户登录后是否立即退出？像[这个问题](https://stackoverflow.com/questions/9936763/to-stop-a-redirect-back-to-logout-when-the-login-url-ends-with-next-accounts-l)

您可以通过多种方式检查它，我建议在注销信号中添加一个钩子（您可以将它放在您的models.py中）：

```
from django.contrib.auth.signals import user_logged_out

def alertme(sender, user, request, **kwargs):
    print ("USER LOGGED OUT!") #or more sophisticate logging

user_logged_out.connect(alertme) 
```

然后尝试登录并检查消息是否出现在您的控制台中。如果出现，那么您必须检查是否有重定向或自定义模板调用登录后注销。希望它可以帮助您找到问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-06-16T08:03:10.190

我遇到了同样的问题，重启服务器后就解决了：

```
systemctl restart nginx 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-12-13T12:20:22.643

您可以确保，创建的用户已被标记为 Is_staff = True，我有时忘记标记它以允许用户登录到 django admin

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2018-02-09T21:09:41.997

我有一个相关的问题，我尝试登录并且页面会在套接字最终被终止之前挂起。事实证明我确实在登录，但其中一个登录信号处理器冻结了。

Celery 无法将其异步任务传递给 RabbitMQ，因为 RabbitMQ 服务器无法启动。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-03-09T18:32:05.380

对我来说，我无法登录 Firefox 的管理页面，但可以登录 chrome。问题是我在 settings.py 中设置了 CSRF_COOKIE_PATH。永远不要使用它。它在 django 1.8 上无法正常工作。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2020-01-31T11:01:06.040

我所做的是手动导航到我想访问的网址。就像：`http://wildlifeapi.herokuapp.com/admin/`正在返回可怕的 Heroku 应用程序错误。

所以我所做的就是参观`http://wildlifeapi.herokuapp.com/admin/api/animal/`和宾果游戏！有效。

有趣的是它在我的手机上运行良好。这可能是一个 django 重定向错误。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-05-31T06:23:39.620

我的问题是我的管理页面未加载且无法正常工作。这是我所做的：

```
pip uninstall django
pip install django==2.2 
```

有关更多详细信息，请查看[Django 文档](https://www.djangoproject.com/download/)。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-09-20T10:59:47.080

对于在升级 Django 后遇到此问题的任何人，问题可能是`authenticate`函数的签名在某些时候发生了更改。如果签名与预期不符，则忽略后端。因此，请确保您的自定义身份验证后端`authenticate`方法如下所示：

```
class EmailUsernameAuthenticationBackend(ModelBackend):
    def authenticate(self, request, username=None, password=None, **kwargs):
       # ... 
```

而*不是*这样（没有`request`参数）：

```
class EmailUsernameAuthenticationBackend(ModelBackend):
    def authenticate(self, username=None, password=None, **kwargs): 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2022-01-13T11:57:58.460

聚会有点晚了，但对我来说，这是不同的，而且非常简单：无论出于何种原因，我的超级用户帐户都消失了，所以显然，解决方案是我不得不重新创建它。
我有 99% 的把握在创建超级用户后执行`migrate`了`makemigrations`几次，但是去想一想……

然而，我花了大约一个小时才最终弄清楚。这里讨论的变量都不存在于我的 settings.py 中 - 到现在仍然不存在 - （可能因为它已经近 10 年了，所以事情可能已经发生了很大变化），比如`SESSION_ENGINE`, `SESSION_COOKIE_DOMAIN`, `CACHE_BACKEND`, `django_session`table...
还有, Django 关于这个主题的常见问题解答提到检查我的帐户`is_active`和`is_staff`，但不幸的是没有提到如何去做。

* * *

## 回答 #23

> 赞同：-1
> 
> 时间：2019-12-05T07:56:39.137

使用其他一些虚拟环境。当我使用 conda 环境时，它对我有用。

# jquery - Change image from before to after (different sources) using jQuery UI slider

> ID：11894768
> 
> 赞同：0
> 
> 时间：2012-08-10T02:45:33.760
> 
> 标签：jquery, jquery-ui, jquery-ui-slider

I'm trying to change IMG source on Slider slide but not so fast. What I mean with so fast? I could change IMG src attribute on the fly on slide() event but this is ugly and I don't want that. I like to have a fadeOut for the default image called before.jpg and fadeIn for image called after.jpg which must be showed when the slider is at the end. I tried this code:

```
$(document).ready(function(){
   $('#slider').slider({
      slide: function(event, ui) {
         if(ui.value >= 50) {
             $('#image-changer').fadeOut('slow');
             $('#image-changer').attr('src', 'images/after.jpg');
             $('#image-changer').fadeIn('slow');
         }
      }
   });
}); 
```

but doesn't work because the image fadeIn once and once because the ui.value always will have value greater than 50\. Can any help me to achieve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T04:30:10.050

jQuery 效果方法是异步运行的。您需要“链接”这些调用，以便它们不会同时运行：

```
$('#image-changer').fadeOut('slow', 
  function() { 
    $('#image-changer').attr('src', 'images/after.jpg').fadeIn('slow'); 
  }
); 
```

fadeOut 接受的第二个参数是动画完成时调用的函数。

# google-drive-api - Google 云端硬盘 MIME 类型列表？

> ID：11894772
> 
> 赞同：34
> 
> 时间：2012-08-10T02:45:48.007
> 
> 标签：google-drive-api

根据[https://developers.google.com/drive/manage-uploads](https://developers.google.com/drive/manage-uploads)，它提到

*请参阅 API 参考，了解每种方法接受的 mime 类型列表和上传文件的大小限制。*

我无法在[https://developers.google.com/drive/v2/reference/](https://developers.google.com/drive/v2/reference/)上找到 mime 类型列表 我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-01-27T12:33:57.617

```
$mime_types= array(
    "xls" =>'application/vnd.ms-excel',
    "xlsx" =>'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
    "xml" =>'text/xml',
    "ods"=>'application/vnd.oasis.opendocument.spreadsheet',
    "csv"=>'text/plain',
    "tmpl"=>'text/plain',
    "pdf"=> 'application/pdf',
    "php"=>'application/x-httpd-php',
    "jpg"=>'image/jpeg',
    "png"=>'image/png',
    "gif"=>'image/gif',
    "bmp"=>'image/bmp',
    "txt"=>'text/plain',
    "doc"=>'application/msword',
    "js"=>'text/js',
    "swf"=>'application/x-shockwave-flash',
    "mp3"=>'audio/mpeg',
    "zip"=>'application/zip',
    "rar"=>'application/rar',
    "tar"=>'application/tar',
    "arj"=>'application/arj',
    "cab"=>'application/cab',
    "html"=>'text/html',
    "htm"=>'text/html',
    "default"=>'application/octet-stream',
    "folder"=>'application/vnd.google-apps.folder'
); 
```

此外，这里是专门与谷歌驱动器（和谷歌套件）相关的 mime 类型列表：[https ://developers.google.com/drive/v3/web/mime-types](https://developers.google.com/drive/v3/web/mime-types)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-11-04T23:36:58.857

我在 GitHub 中找到了来自**Google**本身的文件扩展名和 mime 类型的**完整列表：**

 **[**google-drive-proxy / DriveProxy / API / MimeType.cs**](https://github.com/google/google-drive-proxy/blob/master/DriveProxy/API/MimeType.cs)

* * *

从 Drive REST API[参考](https://developers.google.com/drive/api/v2/reference/files/insert)：

> **最大文件大小：** 5120GB
> 
> **接受的媒体 MIME 类型：** `*/*`

换句话说，您可以使用任何匹配 pattern 的**mime 类型**`*/*`。

这是[**官方媒体类型的 IANA 列表**](https://www.iana.org/assignments/media-types/media-types.xhtml)。[您可以在此处](https://en.wikipedia.org/wiki/Media_type)了解有关媒体类型的更多信息。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-10T03:41:30.323

抱歉，它没有在文档中列出。不过，这很容易，您可以将任何 MIME 类型存储在 Google Drive 中，文件大小最大为 5TB。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-03T03:14:28.623

[https://developers.google.com/drive/integrate-open](https://developers.google.com/drive/integrate-open)在这里您可以找到 gdrive mimetypes 的官方列表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-21T17:44:15.827

正如它所说，它在每个方法的文档页面中指定。

例如：

[https://developers.google.com/drive/v2/reference/files/insert](https://developers.google.com/drive/v2/reference/files/insert)

在页面顶部附近显示：“最大文件大小：10GB，接受的媒体 MIME 类型：*/*”。

如果您要上传（插入）文件，您可以自己设置文件的 mime-type。大小/mime 限制仅适用于（据我所知）插入和更新方法。**

# mysql - Mysql insert as select with date_add 1 month

> ID：11894773
> 
> 赞同：0
> 
> 时间：2012-08-10T02:46:05.583
> 
> 标签：mysql

我在 mysql 中有以下数据，

```
+-------------+------------+---------+---------
| SERVER_NAME | LOGDATE    | CPU_AVG | CPU_MAX
+-------------+------------+---------+---------
| bkupxxxxx   | 2012-06-05 |    0.63 |   17.14
| bkupxxxxx   | 2012-06-06 |    0.50 |   15.00
| bkupxxxxx   | 2012-06-07 |    0.75 |   16.02
| bkupxxxxx   | 2012-06-08 |    0.66 |   17.03
| bkupxxxxx   | 2012-06-09 |    0.69 |   18.00
| bkupxxxxx   | 2012-06-10 |    0.57 |   16.00
| bkupxxxxx   | 2012-06-11 |    0.74 |   14.20
| bkupxxxxx   | 2012-06-12 |    0.45 |   22.50
| bkupxxxxx   | 2012-06-13 |    0.60 |   19.03
| bkupxxxxx   | 2012-06-14 |    0.43 |   17.30
| bkupxxxxx   | 2012-06-15 |    0.66 |   18.20
| bkupxxxxx   | 2012-06-16 |    0.56 |   15.10
 .............................................
+-------------+------------+---------+--------- 
```

我想选择这些数据作为种子并添加 LOGDATE 1 个月并插入回 mysql。如何使用 date_add 函数来实现它。

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:51:08.797

```
UPDATE tablename SET logdate = DATE_ADD(logdate , INTERVAL 1 month) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T02:52:47.310

您可以为此使用**[DATE_ADD( )](http://www.w3schools.com/sql/func_date_add.asp)**和`INSERT...SELECT`语句。

```
INSERT into tableName (ColName)
SELECT DATE_ADD(LOGDATE, INTERVAL 1 MONTH)
FROM   myTableName 
```

# python - 如何在 Fedora 17 上将 FCGI 与 Python（和 Django）一起使用？

> ID：11894780
> 
> 赞同：2
> 
> 时间：2012-08-10T02:46:58.117
> 
> 标签：python, apache, fedora, fastcgi

我无法访问我的“index.fcgi”；我不断收到 500 内部服务器错误。这是我的错误日志：

```
[Thu Aug 09 19:40:17 2012] [warn] [client 127.0.0.1] (104)Connection reset by peer: mod_fcgid: error reading data from FastCGI server
[Thu Aug 09 19:40:17 2012] [error] [client 127.0.0.1] Premature end of script headers: index.fcgi 
```

这是我的 .htaccess 文件中的内容：

```
Options +ExecCGI
Options +Indexes
AddHandler fcgid-script .fcgi
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.fcgi/ [QSA,L] 
```

这是我的 index.fcgi：

```
#!/usr/bin/python2.7
from django.core.servers.fastcgi import runfastcgi
runfastcgi(method="threaded", daemonize="false")

print "Content-type: text/html\n\n"
print
print "<html>"
print "<body>"
print "<b>test</b>"
print "</body>"
print "</html>" 
```

我什至删除了 django import 和 runfastcgi 组件，但我仍然无法看到我的页面。

为什么这会发生在我身上？我确实安装了 mod_python、mod_wsgi、mod_fcgid、mod_fcgi，但似乎没有任何东西让它运行......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-16T22:08:06.797

有一种方法可以解决这个问题： cd 到 index.fcgi 所在的目录并运行`./index.fcgi`
- 这将为您提供确切的错误。

# c# - C#如何在每1秒后更改Form1背景？

> ID：11894783
> 
> 赞同：0
> 
> 时间：2012-08-10T02:47:14.267
> 
> 标签：c#, background

有什么方法可以在每 1 秒后更改 Window Form1 背景，如下所示：

```
Second 1: Yellow
Second 2: Green
Second 3: Yellow
Second 4: Green
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T02:52:33.500

将 Timer 控件拖放到 Form1 上

将计时器间隔设置为 1000 毫秒（1 秒）。

```
private int caseSwitch = 0;
private void timer1_Tick(object sender, EventArgs e)
{
    caseSwitch++;
    switch (caseSwitch)
    {
        case 1:
            this.BackColor = Color.Yellow;
            break;
        case 2:
            this.BackColor = Color.Green;
            break;
    }

    if (caseSwitch == 2) caseSwitch = 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-10T03:19:22.403

试试这个：

```
 var timer = new Timer() { Interval = 1000, Enabled = true, };
        timer.Tick += (s, e) =>
            this.BackColor =
                    this.BackColor == Color.Green ? Color.Yellow : Color.Green; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T02:53:50.087

```
 public Form1()
    {
        this.BackColor = Color.Green;
        InitializeComponent();
        var timer = new Timer();
        timer.Interval = 1000;
        timer.Tick += new EventHandler(timer_Tick);
        timer.Start();
    }

    void timer_Tick(object sender, EventArgs e)
    {
        var colors = new[] { Color.Yellow, Color.Green};
        var index = DateTime.Now.Second % colors.Length;
        this.BackColor = colors[index];
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T03:36:20.750

正如杰里米所说

> 将 Timer 控件拖放到 Form1 上，并将 Timer Interval 设置为 1000 毫秒 >（1 秒）。

在 Timer Tick 事件处理程序上，逻辑可能是这样的，

```
private void timer1_Tick(object sender, EventArgs e)
{
    if(this.BackColor == Color.Green)
            this.BackColor = Color.Yellow;
    else
            this.BackColor = Color.Green;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-03-06T17:58:33.143

```
private void button1_Click(object sender, EventArgs e)
        {
            timer1.Interval = 1000;
            timer1.Enabled = true;
            timer1.Tick += new EventHandler(timer1_Tick);
            timer2.Interval = 1000;
            timer2.Tick += new EventHandler(timer2_Tick);
        }

        private void timer1_Tick(object sender, EventArgs e)
        {
                txt_trp.BackColor = Color.Red;
                txt_trm.BackColor = Color.Yellow;
                timer2.Enabled = true;
                timer1.Enabled = false;
        }
        private void timer2_Tick(object sender, EventArgs e)
        {
                txt_trp.BackColor = Color.Yellow;
                txt_trm.BackColor = Color.Red;
                timer1.Enabled = true;
                timer2.Enabled = false;
        } 
```

# html - 如何使用图像的 url 将图像保存到 HTML5 文件系统

> ID：11894789
> 
> 赞同：4
> 
> 时间：2012-08-10T02:47:59.640
> 
> 标签：html, google-chrome, filesystems

我正在尝试使用 HTML5 系统来存储我的网站的图像，我发现有很多示例可以展示如何将本地图像存储到您的 chrome 文件系统，但我找不到通过 web url 获取图像的方法和然后将其存储在 HTML5 文件系统中。

这是我的代码，但它是错误的。

```
 lib.ajax.get(file , function(xhr, data){
            if(xhr.status == 200){
                fs.root.getFile("test.jpg", {create: true}, function(fileEntry) {
                    // Create a FileWriter object for our FileEntry (log.txt).
                    fileEntry.createWriter(function(fileWriter) {
                        fileWriter.onwriteend = function(e) {
                            console.log('Write completed.');
                        };

                        fileWriter.onerror = function(e) {
                            console.log('Write failed: ' + e.toString());
                        };
                        // Create a new Blob and write it to log.txt.
                        var bb = new BlobBuilder(); // Note: window.WebKitBlobBuilder in Chrome 12.
                        bb.append(data);
                        fileWriter.write(bb.getBlob('image/jpeg'));
                        callback && callback("test.jpg");
                    }, errorHandler);

                }, errorHandler);
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-21T10:59:35.360

这里是我使用的功能。它使用 Blob 构造函数，因此可以在最新的 Chrome 上运行（缺少已弃用的 BlobBuilder），也可以在缺少 xhr.responseType 的“blob”的旧 iOS 6 上运行。

在注释中，您还可以看到已弃用的 BlobBuilder 的代码。

注意：您使用的是 XHR，因此必须启用 CORS！

```
window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;
window.requestFileSystem(window.PERSISTENT, 2*1024*1024, onFileSystemSuccess, fail);

function onFileSystemSuccess(fileSystem) {
    fs = fileSystem;
    console.log('File system initialized');

    saveAsset('http://www.example-site-with-cors.com/test.png');
}

function saveAsset(url, callback, failCallback) {
    var filename = url.substring(url.lastIndexOf('/')+1);

    // Set callback when not defined
    if (!callback) {
        callback = function(cached_url) {
            console.log('download ok: ' + cached_url);
        };
    }
    if (!failCallback) {
        failCallback = function() {
            console.log('download failed');
        };
    }

    // Set lookupTable if not defined
    if (!window.lookupTable)
        window.lookupTable = {};

    // BlobBuilder shim
    // var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;

    var xhr = new XMLHttpRequest();
    xhr.open('GET', url, true);
    // xhr.responseType = 'blob';
    xhr.responseType = 'arraybuffer';

    xhr.addEventListener('load', function() {

        fs.root.getFile(filename, {create: true, exclusive: false}, function(fileEntry) {
            fileEntry.createWriter(function(writer) {

                writer.onwrite = function(e) {
                    // Save this file in the path to URL lookup table.
                    lookupTable[filename] = fileEntry.toURL();
                    callback(fileEntry.toURL());
                };

                writer.onerror = failCallback;

                // var bb = new BlobBuilder();
                var blob = new Blob([xhr.response], {type: ''});
                // bb.append(xhr.response);
                writer.write(blob);
                // writer.write(bb.getBlob());

            }, failCallback);
        }, failCallback);
    });

    xhr.addEventListener('error', failCallback);
    xhr.send();

    return filename;
}

function fail(evt) {
    console.log(evt.target.error.code);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T01:38:29.653

问题是浏览器会将 xhr 响应数据解析为 UTF-8，所以重点是覆盖 MimeType：

```
window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;

var xhr = new XMLHttpRequest();
var photoUrl = 'http://localhost:3000/image.jpg';
xhr.open('GET', photoUrl, true);

// This stops the browser from parsing the data as UTF-8:
xhr.overrideMimeType('text/plain; charset=x-user-defined');

function stringToBinary(response) {
  var byteArray = new Uint8Array(response.length);
  for (var i = 0; i < response.length; i++) {
    byteArray[i] = response.charCodeAt(i) & 0xff;
  }
  return byteArray
}

function onInitFs(fs) {
  xhr.onreadystatechange = function() {
    if (xhr.readyState == 4 && xhr.status == 200) {
      fs.root.getFile('image.jpg', {'create': true}, function(fileEntry) {
        fileEntry.createWriter(function(fileWriter) {
          fileWriter.onwriteend = function(event) {
            $('body').append('<img src="' + fileEntry.toURL() + '"/>');
          }

          buffer = stringToBinary(xhr.response);
          var blob = new Blob([ buffer ], { type: 'image/jpeg' } )

          fileWriter.write(blob);
        }, errorHandler );
      });
    }
  }
  xhr.send();
}

var errorHandler = function(err) {
  console.log(err);
}

$(function() {
  webkitStorageInfo.requestQuota(PERSISTENT, 5*1024*1024, function(grantedBytes) {
    requestFileSystem(PERSISTENT, grantedBytes, onInitFs, errorHandler)
  }, errorHandler)
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-29T16:55:58.997

诀窍是使用`xhr.responseType = 'blob'`

```
var fs = .... // your fileSystem
function download(fs,url,file,win,fail) {
  var xhr = new XMLHttpRequest();
  xhr.open('GET', url);
  xhr.responseType = "blob";
  xhr.onreadystatechange = function() {
    if (xhr.readyState == 4) {
      if(xhr.status === 200){
        fs.root.getFile(file,{create:true},function(fileEntry){
          fileEntry.createWriter(function(writer){
            writer.onwriteend = win;
            writer.onerror = fail;
            writer.write(xhr.response);
          })
        },fail)
      } else {
        fail(xhr.status);
      }
    }
  };
  xhr.send();
  return xhr;
}; 
```

基于[cordova-promise-fs](https://github.com/markmarijnissen/cordova-promise-fs/blob/master/index.js)（披露：我是作者）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T08:48:32.573

我找到了一种方法来做到这一点。

使用 canvans.toDataURL 传输数据格式。

```
var img = new Image();
                var cvs = document.createElement('canvas');
                var ctx  = cvs.getContext("2d");
                img.src = file;
                img.onload = function(){
                    cvs.width = img.width;
                    cvs.height = img.height;
                    ctx.drawImage(img, 0, 0);
                    var imd = cvs.toDataURL(contentType[extname]);
                    var ui8a = convertDataURIToBinary(imd);
                    var bb = new BlobBuilder();
                    bb.append(ui8a.buffer);
                    fs.root.getFile(path, {create: true}, function(fileEntry) {
                        // Create a FileWriter object for our FileEntry (log.txt).
                        fileEntry.createWriter(function(fileWriter) {
                            fileWriter.onwriteend = function(e) {
                                console.log('Write completed.');
                                callback && callback("test.jpg");
                            };

                            fileWriter.onerror = function(e) {
                                console.log('Write failed: ' + e.toString());
                            };

                            fileWriter.write(bb.getBlob(contentType[extname]));
                        });
                    });
                };

    function convertDataURIToBinary(dataURI) {
    var BASE64_MARKER = ';base64,';
    var base64Index = dataURI.indexOf(BASE64_MARKER) + BASE64_MARKER.length;
    var base64 = dataURI.substring(base64Index);
    var raw = window.atob(base64);
    var rawLength = raw.length;
    var array = new Uint8Array(new ArrayBuffer(rawLength));

    for (i = 0; i < rawLength; i++) {
        array[i] = raw.charCodeAt(i);
    }
    return array;
} 
```

我从这里 [jsfiddle获得帮助](http://jsfiddle.net/PAEz/XfDUS/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-14T16:21:44.007

在支持 XMLHttpRequest Level 2 的现代浏览器上，[此答案](https://stackoverflow.com/questions/1645847/ajax-binary-response)中记录的方法应该可以工作。

相关标准在[这篇博文中进行了解释](http://www.html5rocks.com/en/tutorials/file/xhr2/)

# crystal-reports - 使用交叉表创建每日报告

> ID：11894799
> 
> 赞同：0
> 
> 时间：2012-08-10T02:49:23.137
> 
> 标签：crystal-reports

我知道交叉表仅用于摘要。但是是否可以在给定两个日期的情况下对每日报告使用交叉表？它更像是一个细节总结。

例如：

```
Date: 10 August 2012

Start Date: 10/8/2012 
End Date: 11/8/2012 

Date: 10 August 2012
_________| Center 1 | Center 2 | Total |
Person 1 |  1       |  2       | 3     |
Person 2 |  2       |  5       | 7     |
TOTAL    |  3       |  7       | 10    |

Date: 11 August 2012
_________| Center 1 | Center 2 | Total |
Person 1 |  5       |  2       | 7     |
Person 2 |  8       |  5       | 13    |
TOTAL    |  13      |  7       | 20    | 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:31:44.867

不幸的是，你必须在交叉表中将每个日期作为一行，我认为这是你能得到的最好的：

```
10 August 2012|_________| Center 1 | Center 2 | Total |
              |Person 1 |  1       |  2       | 3     |
              |Person 2 |  2       |  5       | 7     |
              |TOTAL    |  3       |  7       | 10    |

11 August 2012|_________| Center 1 | Center 2 | Total |
              |Person 1 |  5       |  2       | 7     |
              |Person 2 |  8       |  5       | 13    |
              |TOTAL    |  13      |  7       | 20    |

              |GRAND    |  16      |  14      | 30    |
              |TOTAL    |          |          |       | 
```

所以你的设置是：

```
 Center  Total
----+--------+-------+------+
Date|        |       |      |
    |Person  |       |      | 
```

# android - Android OpenGL ES 2.0：使用前是否需要检查是否支持 VBO？

> ID：11894801
> 
> 赞同：0
> 
> 时间：2012-08-10T02:49:35.000
> 
> 标签：android, opengl-es, android-ndk, opengl-es-2.0

我希望我的代码在所有支持 Es 2.0 的设备中都能正常运行。在我的代码中，我使用的是 VBO，阅读文档表明它需要实现扩展“GL_ARB_vertex_buffer_object”。

但是，glGetString(GL_EXTENSIONS) 没有列出我正在使用的设备（Samsung Tab）的上述扩展字符串，尽管它支持它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T03:05:42.027

据我所知，VBO 扩展仅适用于 OpenGLES 1.1。OpenGLES 2.0 默认支持这个。[本教程](http://www.learnopengles.com/android-lesson-seven-an-introduction-to-vertex-buffer-objects-vbos/)，我认为是最好的教程之一，没有考虑在运行 VBO 之前测试设备。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T07:44:54.823

在 OpenGLES2 中，您**不必**检查**VBO**扩展。

在 OpenGLES2中，如果**您**还想使用**VAO**，则必须检查 vertex_array_object。

这是来自各种设备的扩展[数据库](https://stackoverflow.com/questions/3881197/opengl-es-2-0-extensions-on-android-devices)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T07:36:18.233

在我所有的 Android 应用程序中，我使用带有 VBO 的 OpenGL ES 2.0，无需任何额外检查。VBO 在 Galaxy Tab 上工作。

# javascript - HTML 脚本标签和 javascript 文件通信

> ID：11894804
> 
> 赞同：0
> 
> 时间：2012-08-10T02:49:51.103
> 
> 标签：javascript

我的 HTML 文件中有一个脚本标签

```
<head>
<script src="myjs.js"></script>
<script> 
</script>
</head>

<body>
</body> 
```

和一个外部的javascript文件，脚本标签中的变量有没有办法与javascript文件中的脚本交互？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:57:25.077

脚本文件的内容和以下脚本元素都将被视为全局代码，就好像它们位于单个脚本元素中一样。

**但是**，第一个文件中的代码将在第二个脚本元素的内容被解析或执行之前执行（这意味着在第二个脚本中声明和初始化的变量对于第一个脚本不存在）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T02:52:40.227

绝对地。一旦您的外部文件被加载到页面中，它就会被视为像您的第二个脚本一样在页面中编码。根据您如何确定变量的范围，可能存在冲突，并且可以更改/覆盖值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T02:52:56.183

您的 html 结构似乎无效

应该

```
<html>
  <head>
    <script type="text/javascript" src="myjs.js"></script>
    <script type="text/javascript">

       //Now you can use external variable here

    </script>
  </head>
  <body>
  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T04:47:07.480

如果要从脚本标记中的代码引用 javascript 文件中的变量，则需要确保 javascript 文件已加载。执行此操作的常用方法是将处理程序附加到 window.onload 事件并引用该处理程序中文件中的变量。最简单（但不一定是最好）的方法如下：

```
<script> 
  window.onload = function() {
      // reference loaded variables, domNodes, etc
  }
</script> 
```

大多数 javascript 库/框架都有执行此操作的机制。有关其中一个示例，请参见[jQuery .ready() 。](http://api.jquery.com/ready/)

如果您有一个想要拆分成有意义的模块的大型应用程序，我建议您研究**AMD**（异步模块定义）。[在http://blog.amt.in/asynchronous-module-definition-amd-why-what-a](http://blog.amt.in/asynchronous-module-definition-amd-why-what-a)上有一组很好的幻灯片描述了 AMD 是什么以及为什么要使用它

# iphone - 将 NSString 传递给 charValue

> ID：11894805
> 
> 赞同：0
> 
> 时间：2012-08-10T02:49:54.640
> 
> 标签：iphone, ios, nsstring, char

我正在尝试将 NSString 值传递给 char 类型变量，但我收到此错误 -

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString charValue]: unrecognized selector sent to instance 0x1f8dce60'
*** First throw call stack:
(0x357ae56b 0x35a8e97f 0x357b24fb 0x357b0c0d 0x35702e68 0x3d233 0x379d1 0x31cd2ead 0x3633accb 0x37235 0x39851 0x370c1 0x36c33 0x331eb 0x363575b5 0x362a8991 0x362a88ad 0x31c11acf 0x31c111bb 0x31c39323 0x356f52e1 0x31c39783 0x31b9dc65 0x3577f143 0x3577e9a9 0x3577d6ef 0x356fbc1d 0x356fbaa9 0x385bf33b 0x36865535 0x26ffd 0x344c6b20)
libc++abi.dylib: terminate called throwing an exception 
```

我像这样在他们的 h 文件中声明它

```
char storageChar;
//..
@property (assign) char storageIcon; 
```

然后在 m 我从 NSDictionary 条目中调用一个字符串并尝试将它传递给这样的字符

```
// initalize storageChar - char
    storageChar = [[tempDict valueForKey:@"STORAGE"] charValue]; 
```

一旦线程运行此应用程序崩溃，有人可以告诉我我做错了什么，因为在构建过程中没有警告或错误...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:55:52.030

问题是，正如错误所说，`NSString`你从中得到的`[tempDict valueForKey:@"STORAGE"]`不会响应方法`charValue`。如果您查看文档，`NSString`您将找不到`charValue`任何地方。您可能想要的是`[[tempDict valueForKey:@"STORAGE"] UTF8String]`，假设您在`char`数组中使用 UTF-8 编码。您可能还想将您的 char 数组声明为一个数组，除非您的意思是`storageIcon`它只是一个字符。

为什么在构建中没有收到警告或错误？问题是编译器无法知道将返回什么类型的对象`[tempDict valueForKey:@"STORAGE"]`。所以它只需要相信你的话，对象就会响应`charValue`。在运行时它会发现你错了并给你一个错误。这是像 Objective-C 这样非常动态的语言的标准缺陷。

# flash - ActionScript 2.0 按钮 onclick 不起作用

> ID：11894808
> 
> 赞同：0
> 
> 时间：2012-08-10T02:50:36.370
> 
> 标签：flash, events, button, actionscript, event-handling

这看起来很简单，但我是 AS 2.0 的新手，我对按钮单击事件有疑问。

所以我创建了一个符号->按钮，然后设计了按钮。我把它放在舞台上，右键单击它，然后打开操作选项卡。

我在这里输入了这段代码：

```
_root.onMouseDown=function(){
    trace('button clicked');
} 
```

然后我播放电影（ctrl+enter），但是当我点击按钮时，跟踪函数没有执行（根本没有输出）并且没有错误。

由于某些原因，我无法使用 AS 3.0.... THX 寻求帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T02:59:24.340

您说您将代码放在按钮上，但您正在为事件引用 _root ，除非那是按钮的实例名称？

如果我可以建议，您可能会发现它更容易，并且随着开发的进展发现代码更易于管理（更不用说更容易找到和调试）将您的代码放在时间线上而不是按钮之类的实例上，我通常使用层和称之为“脚本”。我建议给按钮一个实例名称，例如“myButton”，然后将代码放在时间轴上，而不是用这个

```
myButton.onMousedown=function(){
    trace("button clicked");
} 
```

我还建议您可能想要使用类似 onClick 的东西而不是 onMouseDown 事件。

希望这会有所帮助，彼得

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:32:19.003

如果将代码放在按钮上，则应使用 onClipEvent 函数：

```
onClipEvent (release){
     trace ('button clicked');
} 
```

但我还是建议你把代码和上面的帖子放在同一个框架里。帮助您跟踪所有代码。

# wcf - 如何强制 WCF 服务只使用一个线程？

> ID：11894809
> 
> 赞同：2
> 
> 时间：2012-08-10T02:50:42.700
> 
> 标签：wcf

由于内部操作依赖于不支持多线程调用的旧 COM 对象，我需要强制我的 WCF 服务在单个线程中运行。

然后我编写了以下示例代码，但它没有按我预期的那样工作:(

```
[ServiceContract]
public interface ITestService
{
    [OperationContract]
    void TestAction();
}

[ServiceBehavior(InstanceContextMode = InstanceContextMode.Single, ConcurrencyMode =     ConcurrencyMode.Single)]
public class TestServiceImp : ITestService
{
    void TestAction()
    {
        Trace.WriteLine("Entering method TestAction, Thread={0}" + Thread.CurrentThread.ManagedThreadId);
        //...
        Trace.WriteLine("Leaving method TestAction, Thread={0}" + Thread.CurrentThread.ManagedThreadId);
    }
} 
```

实际结果如下所示，

*进入方法TestAction，Thread=4*

*离开方法TestAction，Thread=4*

*进入方法TestAction，Thread=5*

*离开方法TestAction，Thread=5*

*进入方法TestAction，Thread=8*

*离开方法TestAction，Thread=8*

而我的期望是，

*进入方法TestAction，Thread=4*

*离开方法TestAction，Thread=4*

*进入方法TestAction，Thread=4*

*离开方法TestAction，Thread=4*

*进入方法TestAction，Thread=4*

*离开方法TestAction，Thread=4*

我怎么能得到我想要的？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T06:51:12.943

将具有 InstanceContextMode 的服务声明为“Single”只是意味着来自不同客户端的每个调用都将在同一个实例上执行，但负责执行的线程由线程池管理。

基本上，如果您对每个调用使用并发模式“Single”（默认配置），则线程将从线程池中获取，使用然后返回给它，因此线程可能是相同的，但它可以不能保证

如果您想管理对非线程安全资源的访问，您应该手动进行，要定义哪个线程将执行您的服务实例，您必须使用 SynchronizationContext

[http://nevmehta.blogspot.ch/2006/12/what-is-usesynchronizationcontext.html](http://nevmehta.blogspot.ch/2006/12/what-is-usesynchronizationcontext.html)

[http://msdn.microsoft.com/en-us/magazine/gg598924.aspx](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx)

希望这可以帮助马可

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T16:43:36.373

[查看WCF 中的同步上下文中](http://msdn.microsoft.com/en-us/magazine/cc163321.aspx)描述的线程关联同步上下文。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-12T16:37:53.770

微软的另一个好资源：

[并发管理](https://msdn.microsoft.com/en-us/library/orm-9780596521301-02-08.aspx)

就我而言，我最终使用了基于服务类型的锁：

```
lock (typeof(MyServiceType)) {
...
} 
```

在使用 EntityFramework 上下文的 WCF 服务上设置 Single ConcurrencyMode 时要小心，因为在线程被杀死之前不会释放服务及其资源，这可能会导致读取操作中的数据未更新。

# ckeditor - 如何正确更改 CKEditor 实例的节点？

> ID：11894811
> 
> 赞同：1
> 
> 时间：2012-08-10T02:51:08.353
> 
> 标签：ckeditor

我正在为我的应用程序使用 ckeditor，它允许用户创建富文本内容。我的页面可能包含多个编辑器区域（由 ckeditor 替换的文本区域），但一次只有一个可编辑，当用户双击编辑器区域时，该编辑器区域变为可编辑区域，而其他区域为只读。我目前的方法是双击一个文本区域时，创建一个新的 CKEDITOR.editor 实例，双击另一个实例时，调用 editor.destroy() 来销毁现有的一个并为另一个文本区域重新创建一个新实例。我担心的是，在频繁重新创建 ckeditor 实例时，它可能会导致大量开销，因为即使是一次创建它也很昂贵。

我想要实现的是只有一个全局 ckeditor 实例，双击时将其“附加”到选定的文本区域。我尝试将现有的 ckeditor.container（编辑器小部件包装器）移动到不同的节点中，但随后它在 firefox 中引发以下错误：![在此处输入图像描述](../Images/13023ac21b948fa3320b167590b14b7a.png)

**请问将ckeditor移动到不同节点的正确方法是什么？**

任何指针将不胜感激。

# sql - 基于具有多个选项的条件进行选择

> ID：11894813
> 
> 赞同：0
> 
> 时间：2012-08-10T02:51:19.480
> 
> 标签：sql, oracle, oracle11g, aggregate

我对在 where 子句之后或在提到 table_name 之后的任何地方使用聚合函数感到完全困惑

EMP 表发布在[http://viditkothari.co.in/post/27045365558/sql-commands-1](http://viditkothari.co.in/post/27045365558/sql-commands-1)

查询信息：
**显示所有sal等于deptno 30的任何emp的emp**

建议查询：

```
select * 
  from employee_4521 
 where sal having (select sal 
                     from employee_4521 
                    where deptno = 30); 
```

返回以下错误：

> 第 1 行的错误：
> ORA-00920：无效的关系运算符

在有子句的“h”下标有星号

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T02:57:01.503

似乎没有任何理由在这里使用聚合函数。只需使用一个`IN`或一个`EXISTS`

```
select * 
  from employee_4521 
 where sal in (select sal 
                 from employee_4521 
                where deptno=30); 
```

或者

```
select * 
  from employee_4521 a
 where exists( select 1
                 from employee_4521 b
                 where b.deptno = 30
                   and a.sal = b.sal ); 
```

# python - 使用空格指定参数以运行 python 脚本

> ID：11894815
> 
> 赞同：17
> 
> 时间：2012-08-10T02:51:22.377
> 
> 标签：python, arguments, space

如何使用包含空格的参数运行 python？我正在使用 MacOS

例如，

```
>python testProgram.py argument 1 argument 2 
```

其中“论点 1”是一个论点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-10T02:56:39.363

> 其中“参数 1”是单个参数。

你基本上已经在那里回答了你*自己的*问题，`"argument 1"`确实是一个单一的论点。

换句话说，您需要引用它，例如：

```
python testProgram.py "argument 1" 'argument 2' 
```

然而，这实际上不是 Python 问题，它取决于您用于运行 Python 脚本的 shell。

例如，`bash`单引号和双引号之间存在差异，其中最重要的可能是各种扩展，例如`$HOME`- 单引号变体不执行这些扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T02:54:05.993

将包含空格的参数用双引号括起来

```
> python testProgram.py "argument 1" "argument 2" 
```

这将在 Windows 和 Linux 下工作，因此在 Mac OS 下也可以。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T03:04:11.450

或者`subprocess`从 python 本身内部使用：

```
subprocess.call(['python','testProgram.py','argument 1','argument 2']) 
```

但其他答案更有可能是您想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-10T02:53:15.770

尝试：

```
>python testProgram.py "argument 1" "argument 2" 
```

# java - 如何仅在 TreeSelectionEvent 中设置左键单击

> ID：11894818
> 
> 赞同：0
> 
> 时间：2012-08-10T02:51:35.420
> 
> 标签：java, swing, click, jtree

我在 jtree 中为方法单击编写代码，但我只想在左键单击时执行该操作

```
class SelectionListener  extends DefaultMutableTreeNode implements TreeSelectionListener {
    public void valueChanged(TreeSelectionEvent se) {...} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T03:44:22.587

如果您正在捕获 a`MouseEvent`那么您可以使用以下方法来检查单击是否是左键单击：

`SwingUtilities.isLeftMouseButton(mouseEvent)`

# java - 复制清单 到另一个另一个实例变量

> ID：11894820
> 
> 赞同：0
> 
> 时间：2012-08-10T02:51:52.267
> 
> 标签：java

我正在传递一个回调方法（List a），我想知道如何复制该值。

```
List<addresses> mInstanceList;
public void setMyList(List<Address> addresses)
{
  mInstanceList = addresses;     // is this going to work?
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T02:54:37.913

你是说新副本吗？如果是这样，你可以做类似的事情`mInstanceList=new Arraylist(addresses);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T02:55:20.427

在那里，您正在复制对*地址*指向*mInstanceList*的列表的引用。如果其他人更改了该列表的元素，它将反映在*mInstanceList*中。如果您不想这样，您可以创建一个新列表（可能是一个 ArrayList）并以相同的顺序复制*地址列表的内容。*

```
mInstanceList = new ArrayList<Address>();
for (Address a: addresses) {
    mInstanceList.add(a);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T05:03:25.277

**1.**如果要复制列表并将其分配给具有自己副本的列表引用变量，请使用`Copy Constructor`.

**例如：**

```
ArrayList<Address> list1 = new ArrayList<Address>();

ArrayList<Address> list2 = new ArrayList<Address>(list2); 
```

**对 list1 引用的 ArrayList 对象所做的更改不会反映到 list2 引用的 ArrayList 对象中，因为它们都指向堆上的 2 个不同的 ArrayList 对象。**

**2.**如果你只想让列表引用变量指向堆上的同一个对象，那么这样做..

```
ArrayList<Address> list1 = new ArrayList<Address>();

ArrayList<Address> list2 = list1 ; 
```

**由于现在引用 list1 和 list2 都指向堆上的同一个 ArrayList 对象，因此一个人所做的更改将反映在另一个人身上。**

# android - 如何使用实时套接字正确终止 Android 应用程序

> ID：11894824
> 
> 赞同：2
> 
> 时间：2012-08-10T02:52:29.630
> 
> 标签：android, multithreading, sockets, terminate

我实现了一个具有以下功能的 Android 应用程序：

应用：`public class ApplicationGlobalAgent extends Application`包含：

*   a MainActivity：显示 GUI 绘图 -> 并从中启动其他活动。
*   一个网络 ServerSocket 和一个客户端 Socket：以双工模式发送/接收数据。

我想在 MainActivity 完成时终止应用程序，我做了如下：

**在 MainActivity 扩展 Activity：**

```
@Override
public void finish()
{
    super.finish();

    Log.d(DEBUG_TAG, "finish and call app termination");

    //call the application to terminate
    getApplication().onTerminate(); 
} 
```

**在 ApplicationGlobalAgent 扩展应用程序：**

```
@Override
public void onTerminate()
{
    // do close ServerSocket and client Socket in networking threads
    mNetworkManager.DoStop();

    System.gc();

    Log.d(DEBUG_TAG, "Terminated!");

    super.onTerminate(); //?? should be placed at the end of functions ??

    //totally kill this application process
    android.os.Process.killProcess(android.os.Process.myPid());
} 
```

**但结果是：**

当没有网络连接时，应用程序成功终止，否则`"Terminated!"`永远不会打印，直到我关闭另一端的网络套接字（连接到 Android 套接字）。

那么，当退出 MainActivity 并连接网络套接字时，如何**强制应用程序正确和完全终止？**

感谢您的所有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T03:04:11.000

> `@Override public void finish()`

你应该重写`onDestroy`。

> `getApplication().onTerminate();`

*永远不要*直接调用它。

> `System.gc();`

这真的没有必要。

> `android.os.Process.killProcess(android.os.Process.myPid());`

你为什么要自己调用应用程序`killProcess`？您应该让 Android 运行时系统为您杀死进程。

> `MainActivity`当存在连接网络套接字时，如何强制应用程序正确和完全终止？

除非您分配了在 Java 进程被内核杀死时不会被清理的资源，否则您无需担心清理工作。

# c# - 如何在 Visual Studio 2010 的代码编辑器窗口中设置所选文本的颜色？

> ID：11894828
> 
> 赞同：1
> 
> 时间：2012-08-10T02:52:51.753
> 
> 标签：c#, visual-studio-2010, background-color

我希望 Visual Studio 2010 在代码编辑器窗口中为一段选定的文本着色。

我现在所做的是：我在 VS 2010 中打开一个文件，然后通过以下代码转到我感兴趣的一段代码：

```
EnvDTE80.DTE2 dte2;
dte2 = (EnvDTE80.DTE2)System.Runtime.InteropServices.Marshal.GetActiveObject("VisualStudio.DTE");
dte2.MainWindow.Activate();
EnvDTE.Window w = dte2.ItemOperations.OpenFile(filepath, EnvDTE.Constants.vsViewKindTextView);

EnvDTE.TextSelection textSelection = (EnvDTE.TextSelection)dte2.ActiveDocument.Selection;
textSelection.GotoLine(startRow, true); 
```

接下来，我真正想要的是用颜色和背景突出显示选定的文本。

我有以下信息：`(int)startRow`、`(int)startCol`和。并且选定的文本范围从到。`(int)endRow``(int)endCol``[startRow, startCol]``[endRow, endCol]`

# iphone - 从 Instagram 复制过滤器

> ID：11894830
> 
> 赞同：4
> 
> 时间：2012-08-10T02:53:10.930
> 
> 标签：iphone, ios, core-image, instagram, imagefilter

我正在尝试在我的 iphone 应用程序中复制来自 instagram 的三个过滤器，更具体地说：

1.  苏特罗
2.  X 临 2
3.  烤面包机

我一直在尝试结合 CoreImages 中的不同过滤器，但似乎无法得到我想要的。

有没有人已经实现了这 3 个过滤器并且可以帮助指导我找到答案？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T20:16:33.077

[最终使用了链接](http://www.binpress.com/app/photo-effects-sdk-for-ios/801)中的 PhotoFX 库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T21:23:28.413

我会尝试 Brad Larson 的 GPUImage，它比 CoreImage（GPU 加速过滤器）更快，并且支持 iOS 4：

[https://github.com/BradLarson/GPUImage](https://github.com/BradLarson/GPUImage)

# jquery - 将站点上的所有非 html 数字包装在一个跨度中

> ID：11894833
> 
> 赞同：0
> 
> 时间：2012-08-10T02:53:16.807
> 
> 标签：jquery, html, replace

所以我拼凑了几个其他人的代码来做到这一点，但是当其他元素的部分 html 中有数字时，它就会出现问题。我想要做的是将页面上的所有数字包装在一个跨度中。我现在的代码：

```
$(function(){
        $('#page').html(function(i, v) {
                            v = v.text();
            return v.replace(/(\d+)/g, '<span class="caps">$1</span>');
        });
    }); 
```

但是，问题在于，如果我的页面上有一个文件名类似于“test123.png”的图像，它会尝试将 123 包装在一个跨度中。

如何修改此代码，使其仅使用元素的文本而不使用 html？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T03:00:59.597

这个插件正是你需要的

[http://benalman.com/projects/jquery-replacetext-plugin/](http://benalman.com/projects/jquery-replacetext-plugin/)

> jQuery replaceText 将替换指定元素中的文本。请注意，只有文本内容将被修改，所有标签和属性都保持不变。

# java - 在 JFreeChart 中显示 LineFunction2D

> ID：11894834
> 
> 赞同：1
> 
> 时间：2012-08-10T02:53:23.260
> 
> 标签：java, function, jfreechart

`JFreeChart`有一个名为`LineFunction2D(double YIntercept, double Slope)`. 我可以让`JFreeChart`示例工作，但我无法`LineFunction2D`工作。如何将折线图添加到`JFreeChart`对象？

```
LineFunction2D line = new LineFunction2D(.03125, (.125 - .03125));

//missing code goes here

JFreeChart chart = new JFreeChart(Plot plot);
ChartPanel panel = new ChartPanel(chart); 
```

谢谢！

（我正在研究 sscce，很快就会发布。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T10:30:33.757

我认为您正在寻找的代码是`DatasetUtilities.sampleFunction2D`将数据集转换为 am的调用`XYDataset`，您可以将其添加到绘图中

```
private static final double A = 5 / 16d;
private static final double B = 1 / 8d - A;
private double start = 1;
private double end = 10;
private int samples = 4;
private Comparable<String> seriesKey = "Regression"; 
```

...

```
 XYPlot plot = new XYPlot(this.data1, xAxis, yAxis, renderer1);
        LineFunction2D line = new LineFunction2D(A, B);
        XYDataset lineDS = DatasetUtilities.sampleFunction2D(line,start,end,samples,seriesKey );
        plot.setDataset(plot.getDatasetCount() + 1, lineDS); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T11:31:26.207

不是答案，但也要考虑命名常量的值而不是[幻数](http://en.wikipedia.org/wiki/Magic_number_%28programming%29#Unnamed_numerical_constants)。例如，

```
private static final double A = 5 / 16d;
private static final double B = 1 / 8d - A;
...
LineFunction2D line = new LineFunction2D(A, B); 
```

# apache - 重定向到子域，然后用 .htaccess 重写

> ID：11894838
> 
> 赞同：1
> 
> 时间：2012-08-10T02:53:53.420
> 
> 标签：apache, .htaccess, mod-rewrite

我已经看了几十个例子，但我仍然遇到问题。我正在尝试重定向和重写以下内容：

我的长网址是：

```
http://old.domain.com/index.php?AssetID={long_guid_here} 
```

我已成功重定向到：

```
http://old.domain.com/{long_guid_here} 
```

但现在我需要将整个事情重定向到：

```
http://new.domain.com/index.php?AssetID={long_guid_here} 
```

让它看起来不错：

```
http://new.domain.com/{long_guid_here} 
```

以下让我重定向但不是“好”部分：

```
RewriteCond %{HTTP_HOST} ^old.domain.com$
RewriteRule ^(.*)$ http://new.domain.com/index.php?AssetID=$1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T02:55:28.920

尝试这个 ：

```
RewriteCond %{HTTP_HOST} ^old.domain.com$
RewriteRule ^(.*)$ http://new.domain.com/$1 [L,QSA,R=301] 
```

注意：您必须在 new.domain.com 中添加一个 .htaccess 文件，将其从*nice*改写为*normal*

**编辑**

如果你 new.domain.com 指向与 old.domain.com 相同的目录（即相同的 htaccess 文件），那么也添加这些行：

```
RewriteCond %{HTTP_HOST} ^new.domain.com$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)$ index.php?AssetID=$1 [L,QSA] 
```

# wpf - 使用 DataGrid 中的箭头键进行导航卡住

> ID：11894854
> 
> 赞同：3
> 
> 时间：2012-08-10T02:56:12.153
> 
> 标签：wpf, datagrid, .net-4.0, navigation

我正在使用框架 4.0 中可用的 DataGrid。在我的网格中，我的一些单元格被禁用，因为这些单元格是只读的，用户不应该改变它的值。（我无法将 DataGrid 列设为 ReadOnly，因为并非列内的所有值都是只读的。）因此，我发现使用箭头键进行导航时出现问题。

每当我使用箭头键和按下箭头键后焦点应该移动到的下一个单元格被禁用时，什么都不会发生，焦点仍然保留在原始单元格中。我期望的是，如果 DataGrid 在导航期间遇到禁用的单元格，它应该跳转到下一个可用的单元格（未禁用）或者只允许导航通过禁用的单元格。

我最不希望的是用户不应该被卡住并且仍然可以使用箭头键进一步移动。

# ruby-on-rails - 检索shopify Shop对象？

> ID：11894860
> 
> 赞同：8
> 
> 时间：2012-08-10T02:56:42.047
> 
> 标签：ruby-on-rails, shopify

我觉得我在这里错过了一些非常简单的东西。所以我有身份验证会话，我基本上想加载当前的 Shop 对象来访问一些东西，比如电子邮件地址、shop_owner 等。我怎样才能检索到它以基本上得到这个响应？

```
http://api.shopify.com/shop.html#show 
```

我尝试查看 /admin/shop.json 并使用

```
ShopifyAPI::Shop.find(someidnumber) 
```

但不行吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T03:07:10.737

端点是`/admin/shop.json`。如果您使用的是 ShopifyAPI gem，`resources/shop.rb`您会看到其中有一个`current`函数。

调用`ShopifyAPI::Shop.current`将返回一个 Shop 对象，其中包含您要查找的详细信息。

如果您没有得到正确的对象/响应，那么您一定不能正确地进行身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-14T23:44:06.517

您可以使用它访问它

```
ShopifyAPI::Shop.current 
```

但是，为了让它工作 - 你需要你的控制器继承自`ShopifyApp::AuthenticatedController`

就像是：

```
class MyController < ShopifyApp::AuthenticatedController 
```

# asp.net - 使用 ReturnUrl 和 POST

> ID：11894861
> 
> 赞同：0
> 
> 时间：2012-08-10T02:56:42.213
> 
> 标签：asp.net, asp.net-mvc

我有这个功能，可以让用户在用户购物篮中添加一个“项目”。该项目具有一些属性，例如名称和描述。当用户单击添加时，该对象被发布到服务器并放入数据库。

但是，如果用户未登录，我希望用户被重定向到登录页面（也可以注册），登录时，我希望添加该项目。这通常是默认功能的 returnURL 参数的行为，但如果我需要提供参数，它显然不起作用。

关于好的（无cookie）方法的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T03:16:11.983

如果用户未登录，最简单的方法之一是使用**Response.redirect(** "your_URL_with_params_here" **)**。在您的登录页面中，您可以根据需要使用来自 URL 的参数进行操作，如果用户通过授权，您只需执行所需的后续步骤.

# ruby-on-rails - simple_form 关联输入在验证失败时从下拉/选择切换到文本输入

> ID：11894867
> 
> 赞同：2
> 
> 时间：2012-08-10T02:57:46.790
> 
> 标签：ruby-on-rails, ruby-on-rails-3, erb, simple-form

我有一个可以正常工作的 simple_form ui，我`f.input :group_ids`用于将 Poll 分配给 Group（Poll `has_and_belongs_to_many`:groups，但我们将其限制为 UI 中的一个）。

无论如何，我想要一种更优雅的方式来做 UI，但是当验证失败时它也会导致严重的问题——输入恢复为具有值的文本输入：[4]，其中 4 是当前组的 id。（除了看起来很糟糕之外，除非手动删除括号，否则提交失败）

```
<%= simple_form_for @poll do |f| %>
   <% if params[:group] %>
      <%= f.input :group_ids, :label => "Group", :selected => params[:group], :collection => @groups, :include_blank => false, :input_html => {:multiple => false} %>
   <% else %>
      <%= f.input :group_ids, :label => "Group", :collection => @groups, :include_blank => false, :input_html => {:multiple => false} %>
   <% end %>
...
<% end %> 
```

我希望有更好的方法来做到这一点——尝试使用 f.association，但无法弄清楚如何将其限制为单选下拉菜单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-16T23:14:06.480

您需要在方法**create**或**update中设置****@groups** ，然后再分别渲染**新**或**编辑操作**

 ******例如

```
def new
  @groups = Group.all
  ....
end

def create
  @poll = Poll.new(poll_params)

  respond_to do |format|
    if @poll.save
      format.html { redirect_to ... }
      format.json { render action: 'show', status: :created, location: @poll }
    else
      ### ! in case of validation is failed init data for the form ! ###
      @groups = Group.all
      format.html { render action: 'new' }
      format.json { render json: ... }
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T03:19:17.850

我会尝试使用collection_select：

例如 f.collection_select(:group, :group_id, Group.all, :id, :name, :prompt => 'Group')

[http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)******

# java - 找不到符号 Java

> ID：11894871
> 
> 赞同：0
> 
> 时间：2012-08-10T02:58:13.497
> 
> 标签：java

我正在为我的课程做一个练习，我通过编码偶然发现了一个问题。我应该做一个扩展类，我认为我遇到的问题是我为构造函数提供的参数。

这是直接超类：

```
public class ElectricalComponent extends Component 
{ 
  private int myMinRating, 
              myMaxRating; 

  public ElectricalComponent( String partNumber, int versionNumber, int minRating, int maxRating ) 
  { 
    super( "Electrical", partNumber, versionNumber ); 
    myMinRating = minRating; 
    myMaxRating = maxRating; 
  } 

  public int getMinRating() { return myMinRating; } 
  public int getMaxRating() { return myMaxRating; } 
} 
```

这是我正在学习的课程：

```
public class HighvoltageComponent extends ElectricalComponent
{
  private int myMinRating, myMaxRating;

  public HighvoltageComponent( String partNumber, int versionNumber)
  {
    super( "Electrical", partNumber, versionNumber );
    myMinRating = 50000;
    myMaxRating = 200000;
  }

} 
```

我的问题出在子类中：“HighvoltageComponent (String ...)”

当我运行主要课程时

```
public static void main( String[] args )
{
  // test your code here
  Component a = new HighvoltageComponent( "HV12", 0 );

  System.out.println( a.toString() );
  System.out.println( a.getTypeName() );
  System.out.println( a.getPartNumber() );
  System.out.println( a.getVersionNumber() );
} 
```

我收到错误消息

> “HighvoltageComponent.java:9：找不到符号
> 
> 符号：构造函数 ElectricalComponent(java.lang.String,java.lang.String,int) "

为什么会这样？

另外，你能告诉我我是否以正确的方式做这个问题？这是问题：

> 高压组件是最小额定值 50000 和最大额定值 200000 的电气组件。完成高压组件的以下定义。（您需要在下方代码区域的多个位置插入代码。）

谢谢，罗汉

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T03:00:41.860

`ElectricalComponent` 构造函数需要四个参数，你 `super( "Electrical", partNumber, versionNumber );`在`HighvoltageComponent`类的调用中只传递了三个参数

你的超级电话应该是这样的

```
super( partNumber, versionNumber,myMinRating ,myMaxRating ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T03:05:44.650

由于发现所有`ElectricalComponent`扩展都具有`minRating`and `maxRating`，因此您可以更好地更改这两个字段`protected`在`ElectricalComponent`类中的范围，并在其构造函数中删除这两个参数。这避免了在父实例和子实例中保持相同的值。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-08-10T13:21:33.193

```
public class HighvoltageComponent extends ElectricalComponent
{ 

  public HighvoltageComponent(  String partNumber, int versionNumber)
  {

    super( partNumber, versionNumber, 50000 ,200000 ); 

  }

} 
```

# c1-cms - 复合自定义aspx页面标题问题

> ID：11894873
> 
> 赞同：0
> 
> 时间：2012-08-10T02:58:29.210
> 
> 标签：c1-cms

我们在复合材料中构建了一个自定义的 aspx 页面。问题是页面标题或标签标题一直卡在加载中...。我们从 .NET 方面尝试了一切，但它仍然没有消失。有什么提示吗？

复合 C1 2.1.1 版本号 2.1.4113.99

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T19:29:30.037

来自[http://compositec1.codeplex.com/discussions/279386](http://compositec1.codeplex.com/discussions/279386)

要正确加载页面，您必须添加一些 C1 特定标记。这也提供了对 Javascript 环境的完全访问权限，您可以在其中操作树、打开对话框、更新消息队列等。

至少必须在开头添加以下内容：

```
 <?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://www.w3.org/1999/xhtml" xmlns:control="http://www.composite.net/ns/uicontrol">
<control:httpheaders runat="server" /> 
```

进入 <head> 部分：

```
<control:scriptloader type="sub" runat="server" /> 
```

<body> 部分内部：

```
<body>

 <ui:page id="..."> .. </ui:page>

</body> 
```

这是之前和之后的差异： http: [//compositec1contrib.codeplex.com/SourceControl/changeset/changes/0b7bb354faf2#Sorting%2fPackage%2fComposite%2fInstalledPackages%2fCompositeC1Contrib.Sorting%2fSort.aspx](http://compositec1contrib.codeplex.com/SourceControl/changeset/changes/0b7bb354faf2#Sorting%2fPackage%2fComposite%2fInstalledPackages%2fCompositeC1Contrib.Sorting%2fSort.aspx)

# python - Python中“for i in range(XX)”的变量范围

> ID：11894874
> 
> 赞同：0
> 
> 时间：2012-08-10T02:58:33.933
> 
> 标签：python, variables, scoping

这是 Python 的一个练习，我对 Python 中的变量范围感到困惑。

> “如果给定的字符串包含“xyz”的外观，其中 xyz 没有直接以句点 (.) 开头，则返回 True。所以“xxyz”很重要，但“x.xyz”没有。
> 
> xyz_there('abcxyz') → 真
> xyz_there('abc.xyz')→ 假 xyz_there('xyz.abc') → 真"

这是我的回答：

```
def xyz_there(str):
   for i in range(len(str)-2):
        if str[i]=='.':
           i+=1
           continue
        elif str[i:i+3]=='xyz':
           return True
   return False 
```

这是错误的。`xyz_there('abc.xyz') → False`总会回来`True`的。因为变量`i`将始终为 0,1,2.... 而`i+=1`并不意味着什么。为什么？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T03:04:56.660

并不是说你不能改变`i`. 你可以。这里的诀窍是您正在迭代`range`. 每次循环重置时，您都会从该可迭代中获取下一个值，它不会增加 的值`i`来进行循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T04:10:47.097

您是否需要使用 for 循环？这将是一个正则表达式的好地方。我已经修改了下面的示例，所以我不只是给你答案......我不是在寻找“xyz”，而是在寻找“你好”。而且我还试图避免看到“？” 在那个“你好”之前。

```
import re
def hello_there(str):
    if re.match("(.*[^\?])?hello.*", str):
        return True
    return False 
```

正则表达式模式包括：

*   `.*`- 字符串开头的任意数量的非换行符；
*   `[^\?]`- 在后面的所有内容之前不允许`^`有一个（n 转义的）问号；`\?`
*   `hello`- 确保`hello`会出现；
*   `.*`- 并以任意数量的其他字符结尾。

re.match 将返回一个解析为布尔值 True 的 MatchObject，因此它可以用作 if 语句中的条件。

```
>>> hello_there("foohellobar")
True
>>> hello_there("foo?hellobar")
False
>>> hello_there("foohello?bar")
True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-14T04:05:44.110

最简单的答案是：

```
def xyz_there(str):
    for i in range(len(str)-2):
        if str[i:i+3] == "xyz" and str[i-1] != ".":
            return True
    return False 
```

# javascript - 在 getElementsByClassName 中使用通配符

> ID：11894875
> 
> 赞同：0
> 
> 时间：2012-08-10T02:58:38.767
> 
> 标签：javascript, facebook, wildcard, getelementsbyclassname

我正在为替换 Facebook 新闻源中的内容的 Chrome 扩展程序制作 js 函数。每个帖子都有总是变化的`uiUnifiedStory uiStreamStory genericStreamStory aid_1719315288 uiListItem uiListLight uiListVerticalItemBorder`类`aid`。

如果我想获得所有课程，我不能只使用`aid_*`.

我怎样才能获得与援助可以是任何东西`li`的类相匹配的所有元素。`uiUnifiedStory uiStreamStory genericStreamStory aid_* uiListItem uiListLight uiListVerticalItemBorder`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T03:09:29.900

有许多库允许通过通配符进行选择，但是您可以通过以下方式手动进行：

```
var elements = document.getElementsByClassName( /* class names other than aid_* ones */
var re = new RegExp('(^|\\s)aid_(\\s|$)'); 
var result = [];

for (var i=0, iLen=elements.length; i<iLen; i++) {
  if (re.test(elements[i].className)) {
    result.push(elements[i]);
  }
} 
```

请注意，[getElementsByClassName](http://www.w3.org/TR/2008/WD-html5-20080610/dom.html#getelementsbyclassname)返回一个活动的[NodeList](http://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-536297177)，但*结果*将是一个本机数组（getElementsByClassName 的各种库实现返回的任何内容）。

您还可以使用[querySelectorAll](http://www.w3.org/TR/selectors-api/#queryselectorall)，我认为它比 getElementsByClassName 得到更广泛的支持。

### 编辑

所以你尝试了：

```
 var elements = document.getElementsByClassName('uiUnifiedStory uiStreamStory' +
                 ' genericStreamStory aid_173333252718885 aid_183319479511' +
                 ' uiListItem uiListLight uiListVerticalItemBorder');

  var re = new RegExp('(^|\\s)aid_(\\s|$)');
  var result = [];

  for (var i=0, iLen=elements.length; i<iLen; i++) {

    if (re.test(elements[i].className)) {
      result.push(elements[i]);
      elements.innerHTML = "<h6>benrox!</h6>"; 
```

糟糕，elements 是一个 NodeList，分配给它的 innerHTML 属性要么没有用，要么引发错误。您可能打算设置 NodeList 的当前成员的属性：

```
 elements[i].innerHTML = "<h6>benrox!</h6>";
      --------^^^ 
```

请注意，如果您有要添加的内容，您可以编辑您的问题。

# game-engine - 格斗游戏开发中如何处理键盘事件？

> ID：11894876
> 
> 赞同：0
> 
> 时间：2012-08-10T02:58:41.373
> 
> 标签：game-engine

我正在尝试开发一款涉及检测按键和组合的格斗游戏。

但是，事情比我想象的要复杂，以下是一些要点：

1）当用户快速按 A 两次时，角色应该运行。

2）当用户按下一些键时，比如A + L + D，角色应该被施放。

3）角色施法结束后，如果按方向键，角色应该向左或向右移动，否则为待机。

4）角色在跳跃时不能移动（即忽略左右方向键按下），但可以攻击。

5）需要短间隔时间和/或顺序的组合键。

等等...

我想了几种方法，但都不能完美解决问题。

事情完全是一团糟。

谁能给我一些好的算法或方法来处理这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T03:08:50.910

您需要一个[有限状态机](http://en.wikipedia.org/wiki/Finite-state_machine)来表示和建立您的组合状态。您的输入/按键系统或相关层将需要支持以下功能：

*   缓冲输入（因此您的输入事件被排队，并且不只是在这一帧立即采样，这在缺少输入的成本非常明显的格斗游戏中尤其重要）
*   计算多次按下
*   自上次按下以来的时间（全局和本地相同键），以及按住的时间。
*   也许保留最后`n`关键操作的可靠缓冲。

您的有限状态机对于组合的每个连续都有中间状态，错误的输入取消和重置状态。许多 FSM 状态更改条件将基于计时器和输入的组合。然而，FSM 将极大地帮助动画和跟踪状态/运动，而不仅仅是输入。

# jquery - 如何在 JSP 聊天应用程序中使用 Comet

> ID：11894882
> 
> 赞同：0
> 
> 时间：2012-08-10T03:00:13.590
> 
> 标签：jquery, ajax, comet

我正在使用 Netbeans 使用 Java EE 创建一个聊天 Web 应用程序，我使用 jquery 函数连接到一个 Servlet，它连接到数据库以获取一些信息，例如我设法使用在线用户列表更新一个 DIV，每个 5秒。

```
 setInterval(function(){ 
    $.get('MyServlet', {
            roomId: roomToJoin
        }, function (responseText) { 

    //Some codes Here
    //responseText is returned as a chain of user names
    //they get separated using JavaScript codes and then appended in a div

    });  //Update the list of Online users each 5 secondes

    },5000); 
```

但是用同样的技术来更新用户写的消息有点困难，但可能，但我在搜索过程中发现的更聪明的技术是彗星技术，或者反向 ajax，或者长轮询，我发现的唯一例子是Counter的例子，全是网络，我真的没看懂，甚至达不到我的要求，不知道有什么好的方法，不知道是否应该存储消息在数据库中再次获取，我真的不知道使用彗星的代码，希望你们能帮助我，因为这是聊天应用程序的核心，其余的很容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T15:37:35.730

建立一个基于网络的实时聊天室并不是一件容易的事。尤其是很难处理 Ajax/Comet 技术问题。您可以使用[EZComet](http://ezcomet.com)（我是创始人）、[Pusher](http://pusher.com/)或[Pubnub](http://www.pubnub.com/)等消息推送云服务。[您可以在此处](http://ezcomet.com/demo/chatroom)参考一个非常简单的聊天室示例

要在您的 javascript 客户端上接收消息，您可以像这样调用 JS API。当收到新消息时，会调用你的回调函数，你可以在那里做相应的反应，比如显示消息，更新用户列表

```
ez_comet.subscribe({
    user_name: 'demo', 
    channel: 'chatroom', 
    callback: callback,
    auto_tick: false,
    msg_type: 'json'
}); 
```

要提交聊天室消息，您可以通过 API 向频道推送消息。PHP 中的示例

```
<?php

// Include ezcomet PHP SDK, it can be found here 
// https://ezcomet.com/tools/php_sdk
include 'ezcomet.php';

$username = $_POST['username'];
$message = $_POST['message'];
$msg = array(
    'username' => $username,
    'message' => $message
);

$tick = push_msg('your api key', 'demo', 'chatroom', @json_encode($msg));
echo "tick: $tick";

?> 
```

# ios - 如何更改 MPMediaPickerController 的语言设置。

> ID：11894883
> 
> 赞同：4
> 
> 时间：2012-08-10T03:00:26.930
> 
> 标签：ios, iphone, multilingual, ibaction, mpmediapickercontroller

我正在创建一个音乐应用程序，我想支持`MPMediaPickerController`. 我编程如下：

```
- (IBAction)pushedMusicButton:(id)sender {
    MPMediaPickerController *pickerController = [[MPMediaPickerController alloc] initWithMediaTypes:MPMediaTypeMusic];
    pickerController.delegate = self;
    pickerController.accessibilityLanguage = [[NSLocale preferredLanguages] objectAtIndex:0];
    NSLog(@"Language setting = %@", pickerController.accessibilityLanguage);
    [self presentViewController:pickerController animated:YES completion:nil];
} 
```

我在设置为日语的 iPhone 上运行了这段代码。

MediaPicker 窗口打开，但按钮的字符串是英文的……例如“Playlists”、“Artists”或“Songs”。日志显示accessibilityLanguage 设置为JP（语言设置= ja）。

如何更改 MPMediaPickerController 的语言设置？

**环境：** XCode 4.4.1、iOS SDK 5.1、iPhone（iOS 5.1）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T06:26:09.877

谢谢 Sun Tzu 和 venkat，我终于发现确实需要本地化**文件。**但本地化的**字符串**没有。

我在其中创建了`Localizable.string`文件`en.lproj`并将`ja.lproj`它们添加到我的项目中。起初我尝试使用 null (0byte)构建，`Localizable.string`但出现构建错误，所以我输入了一组字符串。在*en.lproj 中*：

```
"Playlists" = "Playlists"; 
```

在*ja.lproj 中*：

![在此处输入图像描述](../Images/8935f5fba5bd932bb9598f875f2b9b29.png)

然后，不仅“播放列表”，而且其他标签（“艺术家”，“歌曲”，..）都用日语显示。

![在此处输入图像描述](../Images/9bca049c14f4356dbbd5e7a1fab0629c.png)

为了确认，我将设置更改为 Deutsch。但它在英文中显示为“歌曲”。（不是“标题”）

![在此处输入图像描述](../Images/4eb6812033e5859741ed23e310a2ccc2.png)

我创建了 de.lproj 文件夹并复制了与 en.lproj 完全相同的 Localizable.string。终于'Titel'来了。

![在此处输入图像描述](../Images/dd05c63c77dde9808b4b8e8a0616dcea.png)

因此，当您在 .lproj 中添加 Localizable.string 文件时，MPMediaPickerController 中的标签会说您的母语。

我的代码片段是：

```
- (IBAction)pushedMusicButton:(id)sender {
    MPMediaPickerController *pickerController = [[MPMediaPickerController alloc] initWithMediaTypes:MPMediaTypeMusic];
    pickerController.delegate = self;
    [self presentViewController:pickerController animated:YES completion:nil];
} 
```

# iphone - NSString 中的撇号和反撇号

> ID：11894886
> 
> 赞同：0
> 
> 时间：2012-08-10T03:00:37.023
> 
> 标签：iphone, objective-c, ios, nsstring

如果我`''`在 Photoshop 中的 Helvetica Bold 中键入（即直接在 enter/return 键 2x 左侧的键），我会得到以下信息：

![在此处输入图像描述](../Images/373a5e1ac82b34065c44a64bd8dcaf79.png)

但是，如果我通过 NSString 在 iOS 中绘制相同的字符串，我会得到：

![在此处输入图像描述](../Images/318a7f74d98e31846fdd2f980de45d0a.png)

无论如何，有没有用 NSString 获得花哨的撇号而不是垂直线的撇号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T03:04:24.600

在较新的 XCode 中，您可以将字形直接包含在`@""`定义中。

所以：`NSString *test = @"\u2018Hello\u2019";`

在旧版本（以及更复杂的情况下）中，您可能会发现使用这种格式很有帮助：

`NSString *test = [NSString stringWithFormat:@"%CHello%C", 0x2018, 0x2019];`

查看 Wikipedia 以获取对各种引用字形和代码点的参考： [http ://en.wikipedia.org/wiki/Quotation_mark_glyphs](http://en.wikipedia.org/wiki/Quotation_mark_glyphs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T03:06:21.513

```
NSString *singleQuotes = @"\u2018\u2019"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-10T03:16:07.903

当你想要 unicode 字符时，它通常会显示给用户，所以我使用 NSLocalizedString 函数/宏

例如在代码中

```
NSString    * message = NSLocalizedString( @"some 'apostrophes'", @"" ) 
```

然后在 Localizable.strings 文件中，我将它们映射到 unicode 字符串

```
"some 'apostrophes' " = "some ‘apostrophes’"; 
```

# php - PHP不会显示页面和下载

> ID：11894891
> 
> 赞同：1
> 
> 时间：2012-08-10T03:01:13.060
> 
> 标签：php

我正在尝试在下载文件之前使用 PHP 显示 HTML 页面。我了解我无法重定向到其他页面并同时下载文件，但为什么这不起作用？

```
echo "<html>...Example web page...</html>";

$download = '../example.zip'; //this is a protected file

header('Content-Type: application/zip');
header('Content-Disposition: attachment; filename=example.zip');
readfile($download); 
```

文件下载，但它从不显示回显的 HTML 页面。但是如果我删除下载，页面就会显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T03:06:12.873

内容发送到浏览器后，您无法[设置标题信息。](http://php.net/manual/en/function.header.php)如果您实际上正在下载 - 某处可能有一些输出缓存。

**对于您要完成的工作**，您可能希望显示 HTML 内容，并使用`<meta>`标签或 JavaScript 重定向到下载脚本。我相信大多数浏览器都会开始下载，同时保持最后加载的页面对用户可见（这应该是你想要做的）。

```
<meta http-equiv="refresh" content="1;URL='http://example.com/download.php'"> 
```

或者：

```
<script type="text/javascript">
  window.location = "http://example.com/download.php"
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T03:03:58.237

有一个简单的原则：

> 请记住，必须在发送任何实际输出之前调用 header()，无论是通过普通 HTML 标记、文件中的空白行还是从 PHP 发送。

**解决方案**是准备两个页面，一个用于显示html内容，一个用于下载。

在第 1 页中，使用 javascript 设置了一个计时器，以在几次后重定向到下载链接。

例如，*“5 秒后，将开始下载”。*.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T03:14:59.603

因为在推出自定义标头之前您无法输出任何内容，我建议使用 JS 重定向到下载，这通常使您保持在同一页面上（只要您只是处理 zip 内容而不是其他内容）。

所以，试试这个：

```
$download = 'example.zip';

echo '<head> <script type="text/javascript"> function doRedirect(){window.location = "'.$download.'"}</script>

</head><html><script type="text/javascript"> doRedirect() </script> <...Example web page...</html>'; 
```

或者，如果您需要一个计时器：

```
echo '<head> <script type="text/javascript"> function doRedirect(){window.location = "'.$download.'"}</script>

</head><html><script type="text/javascript"> 
setTimeout(doRedirect(),1000);//wait one second</script> <...Example web page...</html>'; 
```

编辑：

如果要隐藏文件路径，我建议制作一个下载脚本，JS 将重定向到该脚本。

所以基本上，做你正在做的事情，然后使用 JS 指向它。像这样：

下载.php：

```
//use an ID or something that links to the file and get it using the GET method (url params)

    $downloadID = $_GET['id'];

    //work out the download path from the ID here and put it in $download
if ( $downloadID === 662 )
{
    $download = 'example.zip';//...
 }   
    header('Content-Type: application/zip');
    header('Content-Disposition: attachment; filename=$download');
    readfile($download); 
```

然后在您的主 HTML 文件中，使用 JS 以正确的 ID 指向它：

```
<head> <script type="text/javascript"> function doRedirect(){window.location = "Download.php?id=662"}</script>

</head><html><script type="text/javascript"> doRedirect() </script> <...Example web page...</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T03:15:28.717

如前所述，您无法在输出已发送后发送标头。

所以，这可能对你有用：

```
header('Refresh: 5;URL="http://example.com/download.php"');
header('Content-Type: application/zip');
header('Content-Disposition: attachment; filename=example.zip');
readfile($download); 
```

`http-equiv`in`<meta http-equiv="refresh"`表示`name`and**等价**于 HTTP 标头，因此它对标头执行相同的`value`操作。**`Refresh:`**

 **[从SourceForge](http://sourceforge.net)下载任何文件，您将看到一个 JavaScript 实现 ( `Your download will start in 5 seconds...`)。**

# c# - 如何在不使用 Ooxml SDK 的情况下更新 Word 文档的自定义属性？

> ID：11894892
> 
> 赞同：0
> 
> 时间：2012-08-10T03:01:38.900
> 
> 标签：c#, ms-word, openxml

我正在尝试使用纯 C# 和 Xlinq 而不是 Ooxml SDK**更改包（Word 或 Excel 文档）的自定义属性的值。**但是，它会损坏文件并且不会反映包中的更改。

有人可以建议这里有什么不正确的吗？

```
 Package package = null;
        try
        {
            package = Package.Open("NewCustomProp.docx", FileMode.OpenOrCreate, FileAccess.ReadWrite);
            foreach (var packagePart in package.GetParts())
            {
                if (packagePart.ContentType == "application/vnd.openxmlformats-officedocument.custom-properties+xml")
                {
                    var packageStream = packagePart.GetStream(FileMode.OpenOrCreate, FileAccess.ReadWrite);
                    using (StreamReader streamReader = new StreamReader(packageStream))
                    {
                        try
                        {
                            string ns = "http://schemas.openxmlformats.org/officeDocument/2006/custom-properties";
                            XDocument xDocument = XDocument.Parse(streamReader.ReadToEnd());
                            var properties = xDocument.Descendants(XName.Get("property", ns)).Where(x => x.Attribute(XName.Get("name")).Value == "NewCustomProp").ToList();
                            if (properties.Count > 0)
                            {
                                foreach (var currentProperty in properties)
                                {
                                    var valueNode = currentProperty.Descendants().First();
                                    valueNode.Value = "This is new value of Custom Property";
                                }

                                StringBuilder innerXmlSB = new StringBuilder();
                                xDocument.Nodes().ToList().ForEach(node => innerXmlSB.Append(node.ToString()));
                                string innerXml = innerXmlSB.ToString();
                                byte[] buffer = Encoding.UTF8.GetBytes(innerXml);
                                packageStream.Write(buffer, 0, buffer.Length);

                                //tried this as well
                                //xDocument.Save(packageStream);
                            }
                        }
                        catch (Exception ex)
                        {
                            Debug.WriteLine(ex.ToString());
                        }
                    }
                }
            }
            package.Flush();
        }
        finally
        {
            package.Close();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:23:03.883

抱歉，对 C# 了解不多，但这是在 VB.NET 中使用 Linq、XML Literals 和 IO.Packaging 完成的（即不需要 SDK）。

```
Imports System.IO
Imports System.IO.Packaging
Imports <xmlns:vt="http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes">
Imports System.Xml

Module Module1
    Sub Main()
        Dim docFilePath = "C:\Users\you\Documents\Doc2.docx"
        Using presentationPackage As Package = Package.Open(docFilePath, FileMode.OpenOrCreate, FileAccess.ReadWrite)
            Dim uriCustom = New Uri("/docProps/custom.xml", UriKind.Relative)
            Dim customPart = presentationPackage.GetPart(uriCustom)
            Dim customStream = New StreamReader(customPart.GetStream)

            Dim custom = XDocument.Load(customStream)
            Dim customProperties = custom.Root.Elements.<vt:lpwstr>

            For Each prop In customProperties
                prop.Value = "My New Custom Value"
            Next

            Using xw As XmlWriter = XmlWriter.Create(customPart.GetStream(FileMode.Create, FileAccess.Write))
                custom.Save(xw)
            End Using
        End Using
    End Sub

End Module 
```

请注意，这 - `<vt:lpwstr>`- 适用于“文本”类型的自定义属性。它只是直接改变值。如果您想查询确切的客户属性或更改自定义属性的名称或使用不同的类型，您必须在下面的代码中更改一些内容。

# java - （Java 初学者）Java 中的 Python time.sleep() 等价物？谷歌说 Thread.sleep() 用于多线程的东西，但尝试会引发错误

> ID：11894897
> 
> 赞同：1
> 
> 时间：2012-08-10T03:02:30.373
> 
> 标签：java

我正在研究 Daniel Liang 的*Java 简介中*的一个示例，我正试图逐步解决问题以查看到底发生了什么，但一切都打印得太快了。因此，我正在寻找与 Python 的 time.sleep() 等效的 Java 版本。

我知道我可以通过 做一个计时器`currentTimeMillis`，但是一个简单的睡眠功能会更方便。

我已经尝试`Thread.sleep(millis)`按照谷歌的建议输入 - 以及`Thread.getCurrentThread.sleep()`，但两者都给出以下错误：

> 错误：未报告的异常InterruptedException；必须被捕获或声明被抛出 Thread.sleep(1000);

这是有问题的代码：

```
 for (int j = i; j<100; j+=i){

            Thread.sleep(1000);
            System.out.println(j);

        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T03:09:59.527

将 Thread.sleep 放入 try catch 块中，例如

```
try{
    Thread.sleep(1000);
   }catch(InterruptedException e){
   } 
```

# diff - 究竟何时应用补丁成功？

> ID：11894903
> 
> 赞同：0
> 
> 时间：2012-08-10T03:03:23.917
> 
> 标签：diff, patch

补丁是通过获取源代码文件的原始版本（我们称之为 rev1），对其进行更改（因此它变成 rev2），然后使用 diff 来完成的。

该补丁完全适用于 rev1，这很好。

但是，有时相同的补丁完全适用于同一文件的其他修改版本（尽管并非总是如此）。这究竟是什么时候发生的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T23:55:59.970

发生这种情况的*确切*条件取决于您使用的补丁应用程序。然而，大多数补丁程序都有启发式算法，允许基本文件在某些​​方面与最初用于创建补丁的基本文件不同。

最有用的补丁格式在更改的行周围包含几行未更改的“上下文”行。补丁程序将使用补丁文件中的行号信息（可能不同）以及上下文行来查找在新的基础文件中应用更改的适当位置。通常，允许行号有所不同，但上下文行必须完全匹配。

在上下文行不同并且补丁程序找不到修改可以去哪里的情况下，它会遇到冲突（并且可能会生成“rejected hunk”输出）。

# mysql - MySQL shell 中不区分大小写的完成

> ID：11894911
> 
> 赞同：4
> 
> 时间：2012-08-10T03:04:15.867
> 
> 标签：mysql, autocomplete

MySQL 可以制表符完成 shell 命令和 SQL 声明。

但是对于 SQL，它只完成大写输入。例如，`'SEL'`将工作`'SELECT'`但`'sel'`不会。

有没有类似`.inputrc`MySQL 的东西，我可以将其配置为不区分大小写的完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-25T15:47:29.650

我来到 StackOverflow 寻找这个问题的答案，但既然没有，我想我会自己研究答案。

MySQL 命令行客户端与 GNU Readline 库链接以提供选项卡完成，并且由于 MySQL 客户端解析`.inputrc`（从用于检查 MySQL 客户端进行的系统调用可以看出`strace`），我认为它会注意选项比如`set completion-ignore-case On`。不幸的是，事实并非如此。

### 使用来源，卢克

虽然我不是 C++ 开发人员，但我检查了[命令行客户端的源代码](http://bazaar.launchpad.net/~maria-captains/maria/10.0/view/head:/client/mysql.cc)。

您可以看到该`build_completion_hash()`函数将 SQL 关键字、表名和字段名等名称添加到用于提供补全的哈希（快速有效的数据结构形式）中。但是，[将 SQL 命令添加到散列的部分](http://bazaar.launchpad.net/~maria-captains/maria/10.0/view/head:/client/mysql.cc#L2774)只是添加了以下[SQL 命令列表](http://bazaar.launchpad.net/~maria-captains/maria/10.0/view/head:/client/mysql.cc#L266)。

这些 SQL 命令中的大多数都以大写字母列出，但也有一些例外，例如`create database`, `create table`, `show databases`,`show fields from`使用小写字母列出。由于这个生成的列表中的 SQL 关键字都是大写的，所以当 SQL 关键字以小写形式输入时，补全不起作用。

此列表用于包含 SQL 命令的简短列表（小写），例如`select`, `drop`, `insert`。然而，在2008 年[1 月](http://bazaar.launchpad.net/~maria-captains/maria/10.0/revision/2516)，这个简短的列表被 MySQL 支持的 SQL 命令的生成列表所取代。

**注意：**我链接到 MySQL 的 MariaDB fork 的源代码，因为它更易于网络访问。MariaDB 是来自 MySQL 代码库的二进制兼容分支，现在由 Oracle 拥有（该项目由 MySQL AB 背后的同一个人运行）。通过检查版本控制历史，我提到的客户端代码部分在过去几年中没有太大变化。

*TLDR：答案似乎是否定的。*

# php - 高级词过滤器

> ID：11894914
> 
> 赞同：1
> 
> 时间：2012-08-10T03:04:29.910
> 
> 标签：php

我的脚本真的需要一个好的坏词过滤器。我已经有一堆不好的词了。但我的问题是它检测到了坏词，换句话说，比如说“测试”是一个坏词，而你说“测试”它仍然会将它视为一个脏话。在我的第二次尝试中，我修复了检测词，但人们可以通过说@test 和“cusswordhere”来绕过它等。

我能做些什么来解决这个问题吗？

我的代码：

```
 function censor($message) {
            $badwords = $this->censor; //array containing bad words
            $message = @preg_replace('[^A-Za-z0-9 ]','',strtolower(' '.$message.' '));
            foreach($badwords as $bad) {
                $bad = trim($bad);
                if(strpos($message.' ', $bad.' ')!==false) {
                    if(strlen($bad)>=2) {
                        return true;
                    }
                }   
            }

    } 
```

目前它没有检测到单词，但你可以通过说@cusshere“cusshere”等内容来绕过它，我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T03:22:44.043

这将捕获您列表中*任何*出现的作品，无论它位于消息中的哪个位置；可能过于严格，但可能会有所帮助：

```
function censor($message) {
  foreach($this->censor as $word){
    if(false !== stripos($message, $word)){
      return true;
    }
  }
  return false;
} 
```

# python - Django url 模式 - 字符串参数

> ID：11894916
> 
> 赞同：53
> 
> 时间：2012-08-10T03:04:48.897
> 
> 标签：python, regex, django

具有数字参数的 Django url 模式是：

```
url(r'^polls/(?P<poll_id>\d+)/$', 'polls.views.detail') 
```

如果我的 poll_id 不是数字而是字符串，那么正确的语法是什么？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2016-04-10T10:07:30.673

对于在 url 中有一个字符串参数，你可以有： url 像这样：

```
url(r'^polls/(?P<string>[\w\-]+)/$','polls.views.detail') 
```

这甚至会允许 slug 字符串传递，例如：像 node-js 这样的字符串。

* * *

## 回答 #2

> 赞同：45
> 
> 时间：2018-11-19T01:16:29.577

在较新版本的 Django 中，例如 2.1，您可以使用

```
path('polls/<str:poll_id>', views.polls_detail) 
```

如此处给出的[Django URL 调度程序](https://docs.djangoproject.com/en/2.1/topics/http/urls/)

```
def polls_detail(request,poll_id):
#process your request here 
```

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2012-08-10T03:15:52.163

取决于你关心的角色。就像[文档](http://docs.python.org/library/re.html)说的那样，`\w`会给你一个字母数字字符或下划线。

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2018-04-11T15:22:29.177

从 Django 2.0 开始，通过添加*slug*符号可以更容易地处理 URL 中的字符串参数，它的使用方式与**urls.py**中的 int 类似：

```
from django.urls import path

urlpatterns = [
    path('something/<slug:foo>', views.slug_test),
] 
```

在基于函数或基于类的视图中，您可以像处理任何其他参数一样处理它：

```
def slug_test(request, foo):
    return HttpResponse('Slug parameter is: ' + foo) 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2019-01-09T18:57:40.413

从 Django 2.0 开始，`path`已经引入。`path`在 url 中不使用 reg ex，因此它是旧版本的简化版本`url`

从 2.0 开始，您可以使用 path 代替，如下所示：

```
path('polls/<poll_id>', views.polls_detail) 
```

不需要明确指定字符串路径参数，因为路径参数的默认数据类型是字符串本身。

参考：[https ://docs.djangoproject.com/en/2.0/releases/2.0/#whats-new-2-0](https://docs.djangoproject.com/en/2.0/releases/2.0/#whats-new-2-0)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-15T02:38:49.773

如果您使用的 Django 版本 >= 2.0，则只需如下所示即可。

```
from django.urls import path    

urlpatterns = [
    ...
    path('polls/<string>/$','polls.views.detail')
    ...
] 
```

来源：[https ://docs.djangoproject.com/en/2.0/ref/urls/#django.urls.path](https://docs.djangoproject.com/en/2.0/ref/urls/#django.urls.path)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-19T22:20:56.680

如果您的尖括号参数是路径，即包含“/”，则必须使用`path:`.

例子：
`path('section/<path:some_path>,app.views.some_view,name='some_name')`

来源：[https ://docs.djangoproject.com/en/4.0/topics/http/urls/#path-converters](https://docs.djangoproject.com/en/4.0/topics/http/urls/#path-converters)

（已编辑）
“str - 匹配任何非空字符串，不包括路径分隔符“/”。如果表达式中不包含转换器，则这是默认值。

slug - 匹配任何由 ASCII 字母或数字以及连字符和下划线字符组成的 slug 字符串。例如，build-your-1st-django-site。

path - 匹配任何非空字符串，包括路径分隔符“/”。这允许您匹配完整的 URL 路径，而不是像 str 那样匹配 URL 路径的一部分。”

# javascript - 验证选择器输入的值不是 first

> ID：11894920
> 
> 赞同：0
> 
> 时间：2012-08-10T03:05:05.807
> 
> 标签：javascript, html

我正在尝试为您的生日创建一些选择器的验证脚本，例如月份、日期和年份。基本上我希望脚本运行为：

如果选择器在第一个选项上，则返回 false ELSE 返回 true

如果选择了列表中的第一个选项，我需要什么 IF 语句才能返回脚本 false。

例如，

```
<select>
    <option>FAIL IF THIS IS SELECTED</option>
    <option>PASS IF THIS IS SELECTED</option>
    <option>PASS IF THIS IS SELECTED</option>
    ...And So On
</select> 
```

另外，有谁也知道如何在 PHP 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T03:56:37.613

您想使用`selectedIndex`来找出选择了哪个项目。

示例：http: [//jsfiddle.net/JtCvj/](http://jsfiddle.net/JtCvj/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T04:04:33.917

这是一个例子

```
window.onload=function(){
    var frm=document.getElementById('frm');
    frm.onsubmit=function(){
        if(!isvalid()) 
        {
            alert("Please select all date values properly!");
            return false;
        }
    }
}

// Check validity
function isvalid(){
    var isValid=true;
    var sel_day=document.getElementById('day');    
    if(sel_day.selectedIndex==0) isValid=false;
    var sel_month=document.getElementById('month');    
    if(sel_month.selectedIndex==0) isValid=false;
    var sel_year=document.getElementById('year');    
    if(sel_year.selectedIndex==0) isValid=false;
    return isValid;
}; 
```

[**演示**](http://jsfiddle.net/heera/cgrHw/1/)。

# android - Android选项菜单不起作用

> ID：11894922
> 
> 赞同：3
> 
> 时间：2012-08-10T03:05:27.803
> 
> 标签：android, menu, android-menu

正如问题所说，它不起作用。当我按下菜单按钮时，什么也没有出现。

这是菜单活动：

```
public class AndroidMenuActivity extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.viewphoto);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // TODO Auto-generated method stub
     super.onCreateOptionsMenu(menu); 
     MenuInflater menuInflater = getMenuInflater();
     menuInflater.inflate(R.menu.menu, menu);
     return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    switch(item.getItemId()){
        case R.id.edit:
            Toast.makeText(getApplicationContext(), "edit selected", Toast.LENGTH_SHORT).show();
            Intent i = new Intent(getApplicationContext(), PhotoFlashActivity.class);
            startActivity(i);
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
}
} 
```

和一个非常小的 menu.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
<item
    android:id="@+id/edit"
    android:title="Edit"/>   

</menu> 
```

我不知道出了什么问题，我看过的教程没有提到将活动添加到清单文件中，所以我不确定是否必须这样做。即使我这样做了，它也不起作用。我试过清理项目，但这也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T12:51:45.397

```
 @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        super.onCreateOptionsMenu(menu);        
        menuInflater.inflate(R.menu.menu, menu);
        menu.findItem(R.id.edit).setTitle("Edit");
} 
```

您也可以尝试强制：

```
menu.findItem(R.id.edit).setVisible(true); 
```

然后...

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId()){
        case R.id.edit:
            //DO SOMETHING
            return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    } 
```

或者....您可以在 java 上创建菜单：

```
private static final int MENU_EDIT = 1;    
MenuItem itemconfig = menu.add(0, MENU_EDIT , 0, "Edit");
            itemconfig.setIcon(android.R.drawable.ic_menu_edit);
            itemconfig.setShowAsAction(2); 
```

和 onOptionsItemSelected：

```
case: MENU_EDIT
     //DO SOMETHING
     return true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T04:16:02.383

试试这个代码，它对`works`我来说很完美。

主类

```
public class OptionmenuActivity extends Activity {
/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    MenuInflater inflater=getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    //return super.onCreateOptionsMenu(menu);

    menu.add("hello").setIcon(R.drawable.ic_launcher);
    menu.add("patel").setIcon(R.drawable.ic_launcher);
    menu.add("abc").setIcon(R.drawable.ic_launcher);
    menu.add("hello").setIcon(R.drawable.ic_launcher);
    menu.add("").setIcon(R.drawable.ic_launcher);
    menu.add("").setIcon(R.drawable.ic_launcher);

    return super.onCreateOptionsMenu(menu);
}
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch(item.getItemId())
    {
    case R.id.feeds:
        Toast msg = Toast.makeText(OptionmenuActivity.this, "feeds", Toast.LENGTH_LONG);
        msg.show();
        return true;

    case R.id.friends:
        Toast msg1 = Toast.makeText(OptionmenuActivity.this, "friends", Toast.LENGTH_LONG);
        msg1.show();
        return true;
    case R.id.about:
        Toast msg2 = Toast.makeText(OptionmenuActivity.this, "about", Toast.LENGTH_LONG);
        msg2.show();
        return true;

    case 2:

         Toast msg3 = Toast.makeText(OptionmenuActivity.this, "Menu 1", Toast.LENGTH_LONG);
            msg3.show();
            return true;

    }
    return true;
}
} 
```

在创建内部文件夹后将文件夹创建`menu`到文件夹中。`res``menu.xml``menu`

菜单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

<item
    android:id="@+id/feeds"
    android:title="Feeds"
    android:icon="@drawable/ic_launcher"/>

<item
    android:id="@+id/friends"
    android:title="Friends"/>

<item
    android:id="@+id/about"
    android:title="About"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T03:12:14.690

这可能没什么，但是如果您将 onCreateOptionsMenu(...) 重写为如下所示会发生什么：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // TODO Auto-generated method stub

     MenuInflater menuInflater = getMenuInflater();
     menuInflater.inflate(R.menu.menu, menu);
     return super.onCreateOptionsMenu(menu); 
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-10T03:40:08.923

像这样更改您的代码并检查。

```
 @Override
 public boolean onCreateOptionsMenu(Menu menu) {
// TODO Auto-generated method stub
 super.onCreateOptionsMenu(menu); 
 MenuInflater menuInflater = getMenuInflater();
 menuInflater.inflate(R.menu.menu, menu);
 return true;
}

 public boolean onContextItemSelected(MenuItem item) {       
    onOptionsItemSelected(item);
    return true;
}

 @Override
 public boolean onOptionsItemSelected(MenuItem item) {
 // TODO Auto-generated method stub
  switch(item.getItemId()){
    case R.id.edit:
        Toast.makeText(getApplicationContext(), "edit selected", Toast.LENGTH_SHORT).show();
        Intent i = new Intent(getApplicationContext(), PhotoFlashActivity.class);
        startActivity(i);
        return true;
        default:
         return super.onOptionsItemSelected(item);
   }
 }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-10T03:49:35.797

```
public boolean onCreateOptionsMenu(Menu menu) {

        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.activity_custom__list_view, menu);
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item) {

                ....code......

            return super.onOptionsItemSelected(item);
   } 
```

# javascript - 选择框，警报框不应该触发，直到它击中确切的项目

> ID：11894930
> 
> 赞同：0
> 
> 时间：2012-08-10T03:06:07.087
> 
> 标签：javascript, jquery

我有这个代码。

**HTML**

```
<select id='item'>
    <option value="item1">item1</option>
    <option value="item2">item2</option>
    <option value="item3">item3</option>
</select> 
```

**jQuery**

```
$(document).ready(function(){
    $('#item').click(function(){
        var type = $(this).val();
        if (type == "item1")
        {
            alert ('item1');
        }
        else if (type == "item2")
        {
            alert ('item2');
        }
        else if (type == "item3")
        {
            alert ('item3');
        }
    });
}); 
```

但是每当我点击选择框时，它都会触发警报框，这有点令人讨厌。当用户实际单击选择项时，应触发警报框。当用户点击 item1 菜单时，它应该只触发 item1 的警报框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T03:24:34.623

请尝试`change`api man：http: [//jsfiddle.net/eqHCN/](http://jsfiddle.net/eqHCN/)

这足以满足需要。[http://api.jquery.com/change/](http://api.jquery.com/change/)

**代码**

```
$(document).ready(function(){
    $('#item').change(function(){
        var type = $(this).val();
        if (type == "item1")
        {
            alert ('item1');
        }
        else if (type == "item2")
        {
            alert ('item2');
        }
        else if (type == "item3")
        {
            alert ('item3');
        }
    });
});​ 
```

# javascript - 在浏览器中禁用 JavaScript 时如何运行 JavaScript 代码？

> ID：11894931
> 
> 赞同：-3
> 
> 时间：2012-08-10T03:06:11.313
> 
> 标签：javascript

即使用户在浏览器中禁用了 JavaScript，有没有一种方法可以运行 JavaScript？

如果没有，有哪些备用方案可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T03:10:02.420

没有。如果已在浏览器中禁用 JavaScript，则无法运行 JavaScript。您无法以编程方式重新打开它。

作为后备方案，您始终可以使用`<noscript>`标签来告诉用户打开 JavaScript。例如：

```
<noscript>
    You can browse this site without having JavaScript enabled,
    but to experience the full benefits of the site, please enable JavaScript.
</noscript> 
```

# node.js - NPM package.json 依赖项及其在本地与全局中的可执行文件

> ID：11894934
> 
> 赞同：0
> 
> 时间：2012-08-10T03:06:27.990
> 
> 标签：node.js, npm

我认为`npm install|update`在需要源文件中的依赖项时有效，但是当我想运行可执行文件时，例如`nodemon`，它似乎不起作用。它是否试图在全局范围内查找文件？我怎样才能让这些命令先看`node_modules`？

* * *

我有一个 Cakefile，它用`nodemon`. 例如：

```
# **`procExec(procName)`**
# returns the path to executable in `node_`
procExec = (procName) -> 
    console.log "./node_modules/" + procName + "/bin/" + procName
    "./node_modules/.bin/" + procName

# **`cake startdev`**
# Starts the server with `nodemon`
# Watch and compile `.coffee` and `.styl` files in `/client`

task "startdev", "Starts server with nodemon and watch files for changes", ->
    # start nodemon server
    nodemon = spawn procExec("nodemon"), ["server.coffee"]
    processOutput nodemon

    # watch and compile CoffeeScript
    coffee = spawn procExec("coffee"), ["-o", "public/js/app", "-cw", "client/coffee"]
    processOutput coffee

    # watch and compile Stylus
    stylus = spawn procExec("stylus"), ["client/stylus", "-l", "-w", "-o", "public/css/app"]
    processOutput stylus 
```

它可以工作，但有一些小问题：

*   `npm install|update`好像没有安装`nodemon`。我认为它尝试全局安装并失败。我手动做了一个`npm install nodemon`单独的。为什么是这样？我怎么能告诉`nodemon`安装呢？
*   `"./node_modules/.bin/" + procName`总是解析为正确的可执行文件吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T02:52:01.107

这里有几个问题，所以我会尽量把它们分开。

> npm install|update 似乎没有安装 nodemon。我认为它尝试全局安装并失败。我单独手动做了一个 npm install nodemon 。为什么是这样？我怎么能告诉nodemon安装呢？

您是否看到有关“首选全局安装”的警告？如果是这种情况，那只是一个警告，无论如何它都会被安装。如果是不同的错误，请包括输出。

> "./node_modules/.bin/" + procName 是否总是解析为正确的可执行文件？

是的，您的依赖项的 package.json 文件中列出的任何脚本都将安装到此文件夹中。但是，我更喜欢使用该`npm bin`命令来始终获得正确的路径。

如果您从节点生成进程，您还可以`require('npm')`修改`process.env.PATH`以获取正确`node_modules/.bin`的位置。例如，在 Cakefile 的顶部：

```
npm = require 'npm'
npm.load (err) -> throw err # If config fails to load, bail out early
process.env.PATH = npm.bin + ":" + process.env.PATH
# Now you no longer need to use procExec in your tasks 
```

*免责声明*我不知道这样修改 PATH 是否适用于 Windows。

# ruby-on-rails-3 - 活动管理表单中的两级嵌套模型

> ID：11894936
> 
> 赞同：1
> 
> 时间：2012-08-10T03:06:47.690
> 
> 标签：ruby-on-rails-3, activeadmin, formtastic

我能够接受在活动管理员中有很多关系的嵌套属性，但是可以嵌套两个级别吗？

我的意思是，我有一个示范课，它有很多章节，而且章节有很多部分。是否可以在课程选项卡中创建章节及其部分？如何？我的模型课接受章节的嵌套属性，章节接受章节的嵌套属性

我正在使用 ror3 和最新版本的活动管理员？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T05:46:13.450

我应该建议您查看[nested_form gem](https://github.com/ryanb/nested_form/)，它的实现非常简单，您可以根据需要嵌套任意数量的表单。它还支持 SimpleForm 和 Formtastic。

[在这里](http://blog.madebydna.com/all/code/2010/12/31/dynamically-nesting-deeply-nested-forms.html)您可以找到解释 4 级嵌套表单的示例。

# .net - SQLite：如何连接到内存中的共享缓存数据库？

> ID：11894941
> 
> 赞同：8
> 
> 时间：2012-08-10T03:07:59.837
> 
> 标签：.net, sqlite, ado.net

我正在通过 ADO.NET 提供程序尝试 SQLite 3.7.13 的内存共享缓存功能。以下连接字符串有效，但会产生非共享缓存数据库：

```
Data Source=:memory: 
```

当我尝试其中任何一个时：

```
Data Source=:memory:?cache=shared
Data Source=file::memory:?cache=shared
Data Source=file:x?mode=memory&cache=shared 
```

`ArgumentException`打开连接时我得到以下信息：

```
Invalid ConnectionString format for parameter "Data Source" 
```

SQLite 内存共享缓存数据库的连接字符串应该是什么样的？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-07T20:04:29.973

看起来虽然共享缓存功能在 SQLite 中，但当时最新 (1.0.81.0) 版本的 System.Data.SQLite 还不支持 FullUri 功能。看起来 1.0.82.0 版本有效，连接字符串应该是：

```
FullUri=file::memory:?cache=shared 
```

# objective-c - 将 Torrent info_hash 从 bencoded 转换为 URLEncoded 数据

> ID：11894945
> 
> 赞同：6
> 
> 时间：2012-08-10T03:08:38.063
> 
> 标签：objective-c, ios, http, afnetworking, bittorrent

我正在objective-c 中创建torrent scraper，并且我正在使用[AFNetworking](https://github.com/AFNetworking/AFNetworking/)处理HTTP 请求。我需要为跟踪器请求发送元信息部分的 sha1 哈希。我已成功创建哈希并验证它是正确的。我不能将散列放入 NSString 中，因为它不编码二进制数据，所以我将其放入 NSData 对象中，然后放入要发送的参数中。这就是我现在所拥有的，但我总是得到一个错误，我认为这是我用来发送哈希的方法。我也尝试过对哈希进行 url 编码，然后将其放入 NSString 中，但无济于事

```
 NSMutableDictionary *parameters = [NSMutableDictionary dictionary];

 unsigned char infoHash[20];
 [self.tracker generateTorrentInfoHash:infoHash];

 const char peer_id[20] = "randomstringfornow";

[parameters setObject:[NSData dataWithBytes:&infoHash length:20] forKey:@"info_hash"];    
[parameters setObject:[NSData dataWithBytes:&peer_id length:20] forKey:@"peer_id"];
[parameters setObject:@(8080) forKey:@"port"];
[parameters setObject:@(0) forKey:@"uploaded"];
[parameters setObject:@(self.tracker.metaInfo.totalFileSize) forKey:@"left"];
[parameters setObject:@(0) forKey:@"downloaded"];
[parameters setObject:@(0) forKey:@"compact"];
[parameters setObject:@"stopped" forKey:@"event"];

[self getPath:@"" parameters:parameters success:^(AFHTTPRequestOperation *operation, id responseObject) {
    NSLog(@"%@",operation.responseString);

   } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"%@",operation.responseString);
}]; 
```

有谁知道是否有可能使用 AFNetworking 做到这一点，或者我希望错过一些简单的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T05:56:13.487

好吧，我不是种子专家，但我认为您面临的挑战是您从中提取的编码数据表示将*SHA1*哈希编码为 20 个原始字节的数据。

您不能在 HTTP 请求的 GET 部分中发送这样的原始数据，因此您需要对其进行编码。根据规范，似乎对原始数据进行*urlencoding*是这样做的官方方式。（例如，其他选项是将其转换为人类可读的十六进制字符串）。

从此[替代 Bittorrent 规范](http://wiki.theory.org/BitTorrentSpecification)：

> 跟踪器是响应 HTTP GET 请求的 HTTP/HTTPS 服务。这些请求包括来自客户端的指标，这些指标可帮助跟踪器保留有关种子的整体统计信息。响应包括一个对等列表，可帮助客户端参与 torrent。基本 URL 由元信息 (.torrent) 文件中定义的“公告 URL”组成。然后使用标准 CGI 方法将参数添加到此 URL（即，在通告 URL 之后添加一个“？”，然后是由“&”分隔的“param=value”序列）。
> 
> 请注意，URL 中的所有二进制数据（尤其是 info_hash 和 peer_id）都必须正确转义。这意味着任何不在集合 0-9、az、AZ、'.'、'-'、'_' 和 '~' 中的字节都必须使用“%nn”格式进行编码，其中 nn 是字节。（有关详细信息，请参阅 RFC1738。）
> 
> 对于 20 字节的散列`\x12\x34\x56\x78\x9a\xbc\xde\xf1\x23\x45\x67\x89\xab\xcd\xef\x12\x34\x56\x78\x9a`
> 
> 正确的编码形式是`%124Vx%9A%BC%DE%F1%23Eg%89%AB%CD%EF%124Vx%9A`

从您的原始 20 char C 数组开始，您需要访问*URLEncoded* `NSString`。

不幸的是，特别是对于这种类型的数据，简单的方法 -`stringByAddingPercentEscapesUsingEncoding`在循环中使用 - 将不起作用，因为它最终不会以安全的编码作为 GET 参数发送。

借助一些 SO 帮助（[我如何对字符串进行 URL 编码](https://stackoverflow.com/questions/8088473/url-encode-a-nsstring)），这里有一些代码可以塑造成最终产品，但符合规范文档以获得正确的输出：

```
const char source[20] = {0x12, 0x34, 0x56, 0x78, 0x9a, 0xbc, 0xde, 0xf1, 0x23, 0x45, 0x67, 0x89, 0xab, 0xcd, 0xef, 0x12, 0x34, 0x56, 0x78, 0x9a};

NSMutableString *output = [NSMutableString string];

NSLog(@"Raw Data: %@", [NSData dataWithBytes:source length:20]);

int sourceLen = sizeof(source);

for (int i = 0; i < sourceLen; ++i) {
    const unsigned char thisChar = source[i];
    if (thisChar == ' '){
        [output appendString:@"+"];
    } else if (thisChar == '.' || thisChar == '-' || thisChar == '_' || thisChar == '~' || 
               (thisChar >= 'a' && thisChar <= 'z') ||
               (thisChar >= 'A' && thisChar <= 'Z') ||
               (thisChar >= '0' && thisChar <= '9')) {
        [output appendFormat:@"%c", thisChar];
    } else {
        [output appendFormat:@"%%%02X", thisChar];
    }
}

NSLog(@"Encoded:  %@", output); 
```

输出是：

```
Raw Data: <12345678 9abcdef1 23456789 abcdef12 3456789a>
Encoded:  %124Vx%9A%BC%DE%F1%23Eg%89%AB%CD%EF%124Vx%9A 
```

祝你好运！

# java - 带有 Hbase 的 Hadoop：类路径中存在 Guava jar，但执行会为“ThreadFactoryBuilder”类抛出类未找到异常

> ID：11894946
> 
> 赞同：-1
> 
> 时间：2012-08-10T03:08:46.957
> 
> 标签：java, eclipse, hadoop, hbase, guava

*事实：*

1) 我在分布式设置上运行 Hadoop 1.0.3 和 Hbase 0.92.1，并且我正在尝试通过代码批量导入数据。

2）我通过这种方式将所有必需的jar（包括guava-r09.jar）添加到我的hadoop类路径中：

HADOOP_CLASSPATH=mia-0.7-job.jar:/usr/local/hbase0921/lib/guava-r09.jar:Jama-1.0‌​.2.jar /usr/local/hadoop103/bin/hadoop jar myJar.jar mainPackage/ MyMain -libjars mia-0.7-job.jar,/usr/local/hbe0921/lib/guava-r09.jar,Jama-1.0.2.jar

*问题：*

尽管 ThreadFactoryBuilder.class 存在于 guava-r09.jar 中，但我遇到以下情况： ClassNotFoundException:com.google.common.util.concurrent.ThreadFactoryBuilder

如果有人能对此有所了解，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T20:44:06.110

解决方案是通过以下方式将 guava jar 添加到作业的分布式缓存中：

DistributedCache.addFileToClassPath(pathToGuavaAtHDFS, yourConfiguration);

# php - 在php中创建一个p4更改列表

> ID：11894949
> 
> 赞同：0
> 
> 时间：2012-08-10T03:09:02.020
> 
> 标签：php, perforce, changelist

我有一段时间试图创建一个更改列表，该列表返回从 p4 可用的实际更改列表 ID。

我努力了

$out = $p4->run('change','-o'); $out = $p4->run('change','i');

print_r($out);

对此有什么想法吗？似乎我缺少传递描述值的能力

这是我正在使用的更新的代码段和返回的数据

```
$change = $p4->run('change', '-o');
$change[0]["Description"] = "Some description";
d($change);
$out = $p4->run_submit('-i',$change);
d($out); 
```

这是返回的数据

```
Array
(
[0] => Array
    (
        [Change] => new
        [Client] => steve-contentdev
        [User] => stevet
        [Status] => new
        [Description] => Some description
    )

)
[P4.run()] Errors during command execution( "p4 submit -i" ) [Error]: Error in change       specification. Missing required field 'Change'. Error: Error in change specification. Missing required field 'Change'. 
```

d 函数只是一个 print_r ，让它看起来不错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T21:28:42.080

经过一番摆弄后，我遇到了输入命令，该命令将值输入到表单中，并且从 p4 更改中需要添加一些东西.. 这是 php 的最终代码，它将自动为您创建更改列表

```
$change = $p4->fetch_change();
$change[ 'Description' ] = "Autosubmitted changelist" ; 
$p4->input = $change;
$out = $p4->run('change','-i');
print_r($out); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T15:34:06.347

我不确定你想做什么？'p4 change -o' 会将更改列表表单转储到标准输出，而 'p4 change -i' 将尝试提交它。所以你的 $out 在这两个电话之后将包含非常不同的数据。

如果你想传递一个变更列表描述，你可以尝试'p4 submit -d'。否则，您需要在使用“p4 change -o”获取表单后对其进行编辑。

# android - ResolveInfo.isDefault 始终为 false

> ID：11894952
> 
> 赞同：1
> 
> 时间：2012-08-10T03:09:15.313
> 
> 标签：android

我正在尝试获取与扩展关联的默认程序的图标。

这是我的代码：

```
Intent intent = new Intent(Intent.ACTION_VIEW);
MimeTypeMap mime = MimeTypeMap.getSingleton();
String tt = mime.getMimeTypeFromExtension(getExtension());

intent.setDataAndType(Uri.fromFile(getFile()), tt);

List<ResolveInfo> matches = c.getPackageManager().queryIntentActivities(intent, 0);

for (ResolveInfo match : matches) {
     if(match.isDefault){
          //GET ICON
     }
} 
```

问题是它`match.isDefault`总是返回 false，即使我尝试将 PackageManager 的标志设置为`0`to `PackageManager.MATCH_DEFAULT_ONLY`。

显然，我正在测试的文件（视频）默认与程序（MX Player）相关联。

有人可以帮助我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-15T10:33:34.023

作为替代解决方案，您可能希望使用此方法获取默认意图：

```
 ResolveInfo info = getPackageManager().resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY); 
```

返回的结果将是：

1.  如果没有为意图设置默认值：info.activityInfo.name 将等于“com.android.internal.app.ResolverActivity”

2.  如果为意图设置了任何默认应用程序，那么您可以检查 ResolveInfo 对象以获取默认应用程序信息。

**编辑：**

对于 url，您可以执行以下操作：

```
 //Example: youtube url
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.youtube.com/watch?v=something"));
    ResolveInfo defaultResolution = getPackageManager().resolveActivity(intent, PackageManager.MATCH_DEFAULT_ONLY);

    //Print the activity name
    Log.i(TAG, "defaultResolution:" + defaultResolution.activityInfo.name); 
```

# php - 哪个是编辑/删除/更新其他对象中的对象集合的最佳方法

> ID：11894956
> 
> 赞同：2
> 
> 时间：2012-08-10T03:09:50.490
> 
> 标签：php, oop, symfony, doctrine-orm, object-oriented-database

在我的购物车对象中，我有产品集合

现在当用户添加或删除产品时，我有两个选择

1.  要么删除所有旧产品并坚持使用新产品
2.  迭代新产品集合，看看是否已经存在。如果不存在，则删除该对象。如果没有，请添加它

哪种方式更好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T03:14:56.937

我将采取的删除方法是在对象中构建一个接受 ID（例如产品的型号或数据库 ID）的函数，然后该函数运行它自己的项目，如果找到匹配的项目删除它。

至于添加新项目，有一个函数再次接受项目 ID 并使用该信息从数据库中获取所有适用的数据并将其附加到它自己的集合中。

如果你想改变它的某些东西，你想避免删除一个对象并重新创建它。尝试使用具有所有功能的对象来完成他们自己需要做的事情。

一些示例代码可能会比上面的更多：

```
class shoppingItem
{
    public $ID;
    public $name;
    public $price;
}

class shoppingCart
{
    public $items=array();
    public $totalValue;

    public function addItem($ID)
    {
        $this->items[]= new shoppingItem();
        // ... do database stuff to get item details
        $this->items[]->ID=$dataBaseRow['id'];
        $this->items[]->name=$dataBaseRow['name'];
        $this->items[]->price=$dataBaseRow['price'];
        $this->ammendTotal();
    }

    public function ammendTotal()
    {
        // loop all items and get total value.
        $var=myTotal;
        $this->totalValue=$var;
    }

    public function removeItem($ID)
    {
        for($i=0;$i<count($this->items);$i++)
        {
            if($this->items[$i]->ID==$ID)
            {
                // remove from array or update qty
            }
        }
        $this->ammendTotal();
    }
} 
```

现在，要将商品添加到购物车，您需要做的就是这样：

```
$shoppingCart->addItem($someID); 
```

对象会将其添加到自身，修改其总数并继续。

要删除一个项目，同样的交易：

```
$shoppingCart->removeItem($unwantedItemID); 
```

再次，删除项目或更新数量（无论您选择这样做），它的总数再次更新。

基本上，保持低维护。永远不要让对象中包含错误数据（在这种情况下，例如 totalValue 与其中的项目总和不匹配），因此编写简单的函数并在可能的情况下重复使用它们。

您从主代码中进行的调用应该尽可能*简单，*并将所有繁重的工作交给对象。这样，您就不会遇到任何意外错误，您的主要代码易于阅读/更改，并且您可以对对象充满信心。

# eclipse - 在 Eclipse 中安装 Chrome 开发工具 - 调试配置缺少配置

> ID：11894959
> 
> 赞同：1
> 
> 时间：2012-08-10T03:10:09.443
> 
> 标签：eclipse, google-chrome-devtools

我在这里安装了：[http ://code.google.com/p/chromedevtools/wiki/DebuggerTutorial](http://code.google.com/p/chromedevtools/wiki/DebuggerTutorial)

我在两台机器上都安装了它们，它可以在一台机器上运行（运行 win7），但不能在另一台机器上运行（运行 Win XP）。不工作意味着一切看起来都很好，直到你查看调试配置，你不会看到“Chromium JavaScript”等。我同事的 Win XP 机器工作正常。是否只是简单的安装，我尝试过使用 Eclipse Indigo SR1 和 SR2，两者都不能在我的机器上工作。

是机器的原因吗？为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T18:04:15.170

您可能有错误的 Java 版本。ChromeDevTools 需要 1.6。

您可以从 Eclipse -> 帮助 -> 关于 Eclipse SDK -> 安装详细信息 -> 配置中检查它，属性“java.vm.version”

不幸的是，在这种情况下，每次安装时 Eclipse 只会默默地向控制台输出一次错误。

# svn - 具有多个项目和单一解决方案的 SVN？

> ID：11894961
> 
> 赞同：1
> 
> 时间：2012-08-10T03:10:54.440
> 
> 标签：svn

所以现在我们目前有一个包含大约 20 多个项目的单一解决方案。我们需要检查一下；但是，一些项目共享相同的公共库。当我们需要在 SVN 中为特定项目创建标签时，就会出现问题，然后当拉下该项目以进行更改时，我们还需要拉取当时使用它编译的库。所以它看起来像这样：

```
/tag
 /project1_1.0
   + Project1_1.0 src code..
   // COMPILES WITH COMMONLIB_1.0.dll
 /project2_1.0
   + Project2_1.0.dll
   // COMPILES WITH COMMONLIB_1.1.dll
 /project3_1.0
   + Project3_1.0.dll
 /CommonLib_1.0
   + CommonLib_1.0 src code...
 /CommonLib_1.1
   + CommonLib_1.1 src code... 
```

我看到了一些关于使用 svn:external 的东西，所以当我们拉出 project1_1.0 时，它会拉出用它编译的公共库。但是，这是否意味着对于每个标签，我们都必须手动检查并使用 svn:external 添加正确版本的 CommonLib？

我们要做的是让每个项目都有自己的版本。然后，当滚动到 QA/Prod 时，我们在项目名称和版本号下标记该代码。因此，当应用程序运行时，我们检查事件日志并发现错误，然后我们可以检查版本号，然后返回 SVN 并提取相应的标记代码并进行更改。但是，我们不能只拉取项目代码，因为我们需要知道用于编译的特定库（无论它多么过时）。

这是一种很好的做事方式，还是我们应该检查整个解决方案？当我们只想对子项目进行更改时，这似乎有点激烈。我们还没有真正想出使用 SVN 进行版本控制的好方法。

# cocoa - NSView 覆盖 NSWindow 底栏

> ID：11894962
> 
> 赞同：0
> 
> 时间：2012-08-10T03:10:56.310
> 
> 标签：cocoa, resize, nsview, nswindow, nssplitview

对于我的生活，我无法弄清楚这一点。我正在为 Mountain Lion 工作 Xcode。我在我的主 NSWindow 中将 NSView 添加到 NSSplit 视图时遇到问题。我的拆分视图按预期工作，尽管当我向其中添加另一个视图时，视图覆盖了窗口的底部栏，这不是我想要的行为。

![在此处输入图像描述](../Images/ba313b7a834bb3b9336e2f526d6cd8dd.png)

我附上了这张照片，以了解我正在处理的内容。我知道原点（0,0）是任何视图的左下角，尽管我想要发生的是视图填充拆分视图并调整大小而无需手动调整视图大小，而不是与底部栏重叠。请任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T04:23:45.290

应用程序的更好的图片应该先上传。对不起

![在此处输入图像描述](../Images/eaf54b5fa103bce5ee669f3ee64a79a5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T07:04:11.717

我发现似乎新的开发库要求您使用布局约束。如果有人遇到同样的问题，这是我的代码。

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
     NSView * contentView = [window contentView];

    splitViewController = [[MainSplitViewController alloc]initWithNibName:@"MainSplitViewController" bundle:[NSBundle mainBundle]];

    NSView * subView = splitViewController.view;

    [subView setTranslatesAutoresizingMaskIntoConstraints:NO];

    [contentView addSubview:splitViewController.view];

     NSDictionary *views = NSDictionaryOfVariableBindings(subView);

    [contentView addConstraints:
     [NSLayoutConstraint constraintsWithVisualFormat:@"H:|[subView]|"
                                             options:0
                                             metrics:nil
                                               views:views]];

    [contentView addConstraints:
     [NSLayoutConstraint constraintsWithVisualFormat:@"V:|[subView]-32-|"
                                             options:0
                                             metrics:nil
                                               views:views]];

    [window setContentBorderThickness:32.0 forEdge:NSMinYEdge];
    [window autorecalculatesContentBorderThicknessForEdge:NSMinYEdge];

    // Insert code here to initialize your application
} 
```

# php - 删除会话不起作用

> ID：11894966
> 
> 赞同：1
> 
> 时间：2012-08-10T03:11:12.477
> 
> 标签：php, jquery, session

我正在为登录注销系统创建一个会话。但是我的 session_destroy 不起作用。单击注销后，会话变量仍然存在。

这是我创建会话的方式。

```
session_start();
$username = $_GET['username'];
$_SESSION["username"] = $username;
header('Location: employeepage.php'); 
```

那么这就是我收到它的方式。

```
session_destroy();
header('Location: login.php'); 
```

当我使用 jquery 单击注销时。我重定向到应该销毁会话的页面。

```
$('#logoutbtn').live("click",function(){
    window.location.replace("logout.php");
}); 
```

这就是我如何摧毁它。

```
session_destroy();
header('Location: login.php'); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T03:13:58.233

`session_start()`您还需要在使用前致电`session_destroy`。

从[手册](http://php.net/manual/en/function.session-destroy.php)：

```
session_start();

// Unset all of the session variables.
$_SESSION = array();

// If it's desired to kill the session, also delete the session cookie.
// Note: This will destroy the session, and not just the session data!
if (ini_get("session.use_cookies")) {
    $params = session_get_cookie_params();
    setcookie(session_name(), '', time() - 42000,
        $params["path"], $params["domain"],
        $params["secure"], $params["httponly"]
    );
}

// Finally, destroy the session.
session_destroy(); 
```

# sharepoint - 将同名文档上传到 SharePoint 2010

> ID：11894968
> 
> 赞同：3
> 
> 时间：2012-08-10T03:11:16.150
> 
> 标签：sharepoint, sharepoint-2010, sharepointdocumentlibrary

我需要允许用户将文档上传到 Sharepoint 2010 文档库。文档类型由具有 documentid 和 type 字段的自定义内容类型定义。但是，如果我尝试上传具有相同名称的文档，我会收到一个共享点错误（我不知道是哪一个，因为我没有正确设置我的配置文件 - 我明天可能会找到它）。有没有办法让用户上传同名但元数据不同的文档？例如，两个用户想要上传两个单独但同名的文件。每个都有不同的 documentid 和类型。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:01:37.993

不，不幸的是，这是不可能的。SharePoint 将文件名视为文档的主键标识符，因此如果您尝试上传具有相同名称的第二个文档，它将假定这是该文件的新版本。如果您在文档库上启用了版本控制，它会将其添加为新版本。如果没有，它将用新文件覆盖原始文件。

如果您需要两个具有相同名称的文档，则必须将它们放在文档库内的不同文件夹中或放在不同的文档库中。

# python - Python：视觉差异小部件

> ID：11894969
> 
> 赞同：0
> 
> 时间：2012-08-10T03:11:27.470
> 
> 标签：python, diff, pygtk, visual-diff

我打算写一个 git 客户端，并想用 pygtk 实现它的 UI。众所周知，显示两个文件之间的差异对于我的项目非常重要。

那么，我怎样才能在 pygtk 中实现呢？谢谢。

# vector - 如何将下面的文本转换为序列文件，该文件又将转换为 mahout kmeans 的矢量？

> ID：11894973
> 
> 赞同：2
> 
> 时间：2012-08-10T03:12:14.817
> 
> 标签：vector, mahout, k-means, sequencefile

大家下午好，

我的数据格式如下：

## **ID : VALUE（用户分配的标签）**

**0001：“PC、THINKPAD、T500”**

**0002：“电话、手机、IPHONE、苹果、IPHONE5”**

.......等等。

我怎样才能编写代码：

1）首先，将它们转换成key:value格式的序列文件。

2）然后，将上面的序列文件转换为将用于kmeans聚类的向量？

我正在检查 SequenceFileFromdDirectory 和 SparseVectorFromSequenceFiles，但现在这些似乎有点复杂并且有点难以阅读。

所以，我想知道这里是否有人可以给我一个关于如何进行上述两种转换的简单示例代码？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T09:08:10.667

这两个过程完全按照您的意愿进行，现在只需使输出可读，而不是序列文件，您将使用该`seqdumper`功能。

如果您需要更清晰的图片，请看[***这里***](https://cwiki.apache.org/MAHOUT/quick-tour-of-text-analysis-using-the-mahout-command-line.html)，非常好的介绍。

# c++ - 带有 container_of 的 C++ epoll

> ID：11894978
> 
> 赞同：1
> 
> 时间：2012-08-10T03:12:59.060
> 
> 标签：c++, epoll

我想知道如何使用 container_of 设置 epoll。我正在使用最新版本的 ubuntu 和 eclipse-cdt (gcc)。我的想法是获取事件，然后获取事件来源的容器。

如果我有这样的结构：

```
struct client {
   int s;
   struct epoll_event e;
}foo; 
```

进而 ... ：

```
struct epoll_event *events = NULL;
struct client *c = NULL;
foo.s = (socket);
int efd = epoll_create1(0);
foo.e.data.fd = foo.s;
foo.e.events = EPOLLIN;
epoll_ctl ( efd , EPOLL_CTL_ADD , foo.s , &foo.e );
events = (struct epoll_event*)calloc ( XXX , sizeof event );
while(1) {
    int n = epoll_wait ( efd , events , XXX , -1 );
    for ( int i = 0 ; i  < n ; i++ ) {
        c = container_of ( events[i] , client , e ); 
```

我怎么能做这样的事情？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T05:42:06.803

好吧，首先`events[i]`不是指针。要获取指针，请使用`events + i`或`&events[i]`。

其次，`epoll_event`数组中的结构与`epoll_event`结构中的`client`结构不同，这意味着你不能使用`container_of`.

一个有效的`container_of`用法示例：

```
client c;
epoll_event *ep = &c.e;

client *cp = container_of(ep, client, e); 
```

如您所见，第一个参数必须指向您要访问的“容器”中的*实际*成员。在这之后`cp`会指向`c`。

*在您的情况下，您想要一个不*指向结构中成员的指针（正如我上面所说，实际上不是指针），`client`这将不起作用。

# django - 使用 Django ORM 删除 0 条记录

> ID：11894981
> 
> 赞同：0
> 
> 时间：2012-08-10T03:14:47.743
> 
> 标签：django, django-models

我有以下表结构：

```
class Tags:
    name = fields.CharField(max_length=100)
    ref     = models.ManyToManyField(RefTags)

class RefTags
    foo = varchar(128)
    tag = models.ForeignKey('Tag') 
```

如果 RefTags 中没有关联记录，如何从标签中删除？

谢谢

编辑：我想通了，这真的很容易：

Tag.objects.filter(ref__isnull=True).delete()

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T03:29:35.000

```
from models import Tags

Tags.objects.filter(...).delete()
Tags.objects.all().delete() 
```

ETC...

具体取决于您要删除的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T04:06:01.903

就像是

```
for tag in Tags.objects.all():
    if tag not in RefTags.objects.all():
        RefTags.objects.filter(tag=tag).delete() 
```

将 RegTags.objects.all() 放在一个列表中，循环通过它然后进行删除可能会更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-10T21:05:40.427

这是钱：

Tag.objects.filter(ref__isnull=True).delete()

# regex - Solr Query 用正则表达式过滤？

> ID：11894985
> 
> 赞同：0
> 
> 时间：2012-08-10T03:15:11.273
> 
> 标签：regex, solr, filter

在 Solr 中，我们通常使用`fq`关键字来进一步“过滤”结果，例如：

```
http://localhost:8983/solr/select/?q=book&fq=title:(xxxx) 
```

但是，我如何使用过滤器进行查询；字段中是否`title`包含**数字**？在这里应用**正则表达式**怎么样？*（如何？）*

# javascript - jQuery UI Slider ui.value 获取最后一位

> ID：11894986
> 
> 赞同：0
> 
> 时间：2012-08-10T03:15:12.543
> 
> 标签：javascript, jquery-ui

如何仅从两位数长 (XX) 的滑块的 ui.value 中获取最后一位数字。

我试过这个，但它似乎不被接受？

```
var $lastNumber = ui.value.length-1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T03:35:22.013

怎么样：

```
var $lastNumber = ui.value % 10; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T03:32:05.433

尝试：

```
var sliderVal   = ui.value;
var $lastNumber = sliderVal.toString().charAt(sliderVal.length-1) 
```

# c# - 使用 c# 将多个 XML 文件和 XSLT 文件转换为一个 PDF

> ID：11894997
> 
> 赞同：0
> 
> 时间：2012-08-10T03:16:37.227
> 
> 标签：c#, .net, xml, xslt, pdf

如何使用 c# 将多个 XML 文件和 XSLT 文件转换为一个 PDF？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T05:24:42.007

PDF 创建过程非常简单。无论文件类型如何，都可以读取文件并将其写入 pdf 对象。为此，您需要一个自定义的 pdf 转换工具。将 dll 工具添加到项目中，引用它并转换您的文件。

除此之外，我想知道“你做了什么，是否有任何额外的要求？” 是否要转换打开的 XML 和 XSLT 文档，然后写入 pdf。

# ruby-on-rails - Heroku：自定义域

> ID：11894998
> 
> 赞同：0
> 
> 时间：2012-08-10T03:16:44.743
> 
> 标签：ruby-on-rails, heroku

我已经在 Heroku 上设置了我的自定义域并且它正在工作。然后我决定要删除该应用程序，但在另一个应用程序上使用相同的域。我尝试切换它，但我收到错误消息说它已经在使用中。

因此，我决定从头开始。我去了 Godaddy，重置了名称服务器（将它们更改为其他名称服务器，然后返回到 Zerigo/Heroku），以便它们现在重新指向 Zerigo。

然后我将域添加到这个新应用程序中，但是当我在终端中运行以下命令以检查它是否已正确添加时。

```
host www.mydomain.com 
```

我收到这个错误

```
www.mydomain.com has address 67.63.50.58
Host www.mydomain.com not found: 3(NXDOMAIN)
Host www.mydomain.com not found: 3(NXDOMAIN) 
```

这个地址 67.63.50.58 不是 heroku/zerigo 地址。

但是，我很确定我知道如何设置自定义域。例如，我在同一个应用程序上测试了另一个自定义域（我之前没有在其他任何地方分配的自定义域），它现在工作正常。

任何人都知道我可以如何重用这个自定义域，即完全重置它。或者您能解释一下该错误消息的含义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T07:32:01.180

如果您收到一条消息，`domain is already in use`当您将域添加到 Heroku 上的新应用程序时，这会向我建议当您之前删除该应用程序时，无论出于何种原因 Heroku 都没有删除以前的自定义域 - 您不必更改如果域已经指向 Heroku，则进行任何 DNS 设置。在这种情况下，我会联系支持人员并告诉他们情况，他们应该能够修复它。