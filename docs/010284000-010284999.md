# StackOverflow 问答 10284000-10284999

# c# - FlowLayoutPanel 在设计时显示时闪烁

> ID：10284002
> 
> 赞同：0
> 
> 时间：2012-04-23T15:58:36.097
> 
> 标签：c#, winforms, flowlayoutpanel

每次我在设计时查看我的 FlowLayoutPanel（包含 96 个标签和 96 个文本框）时，所有的控件都会在整个表单中跳舞和闪烁，就好像它们已经忘记了它们所属的位置几秒钟，然后才最终重新定位自己并回到他们应有的位置。

就好像 FlowLayoutPanel 上的所有控件都被抛到空中，然后表单变为空白，重新绘制自身，最后按预期重新显示。

有什么办法可以防止这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T17:10:16.337

似乎将 FlowLayoutPanel 的*Locked*属性设置为 True 可以解决问题 - 它不再像水母一样跳来跳去 - 我喜欢它！

# php - php自定义数组排序

> ID：10284003
> 
> 赞同：1
> 
> 时间：2012-04-23T15:58:37.507
> 
> 标签：php, arrays

我有以下数组：

```
$myarray = Array (
[1] => stdClass Object ( 
    [ID] => 1 
    [current] => 
)

[2] => stdClass Object ( 
    [ID] => 2 
    [current] => 1 
)

[3] => stdClass Object ( 
    [ID] => 3 
    [current] =>
)

[4] => stdClass Object ( 
    [ID] => 4 
    [current] =>
)

[5] => stdClass Object ( 
    [ID] => 5 
    [current] =>
)
) 
```

而且我需要对它进行排序，将值**current**作为第一个，然后是最初在当前项目之后的所有项目**，**而最初**之前**的项目将是结果数组中的最后一个项目。

所以新数组看起来像这样：

```
Array (
[1] => stdClass Object ( 
    [ID] => 2 
    [current] => 1 
)

[2] => stdClass Object ( 
    [ID] => 3 
    [current] =>
)

[3] => stdClass Object ( 
    [ID] => 4 
    [current] =>
)

[4] => stdClass Object ( 
    [ID] => 5 
    [current] =>
)

[5] => stdClass Object ( 
    [ID] => 1 
    [current] => 
)
) 
```

非常重要的是

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:01:31.897

[`usort()`](http://php.net/usort)您可能对这个功能感兴趣。

```
usort($input,function($a,$b) {return $a['current']-$b['current'];}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:06:23.880

您可以处理[usort()](http://www.php.net/manual/en/function.usort.php)函数。

您基本上设置了自定义订单函数，并将其作为第二个参数传递给 usort()（第一个是要排序的数组）。

在回调函数中，您可以定义数组的排序方式。例如

```
usort($array_to_sort, function($a,$b) {
    return $a['current']-$b['current'];
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:12:15.717

如果您想保持相同的元素顺序，请不要对数组进行排序，而是将其旋转直到当前元素排在第一位，例如

```
while($myarray[0]['current']<>1) {
  array_push($myarray, array_shift($myarray));
} 
```

# database - 最小覆盖和功能依赖

> ID：10284004
> 
> 赞同：32
> 
> 时间：2012-04-23T15:58:40.037
> 
> 标签：database, functional-dependencies

鉴于以下功能依赖关系，我将如何计算最小覆盖：

`A -> B, ABCD -> E, EF -> GH, ACDF -> EG`

在讲义中，它给出了最小封面的推导，但我不明白。

例如摆脱**ACDF -> E**：

`A -> B => AACD -> BACD -> E => ACD -> E => ACDF -> E`

然后他们说，同样我们不保留**ACDF -> G**

然后我明白**ABCD -> E**被推导出为**ACD -> E**因为**A -> B**，但我不明白如何实现这一点的正式过程。

所以我的问题是，谁能解释如何为一组功能依赖项生成最小覆盖？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-04-23T16:33:55.243

要获得最小的封面，您必须执行两个步骤。为了演示，我将首先将依赖项拆分为多个（右侧只有一个属性）以使其更干净：

```
A -> B
ABCD -> E
EF -> G
EF -> H
ACDF -> E
ACDF -> G 
```

以下步骤*必须*按此顺序（#1 然后 #2）完成，否则会得到错误的结果。

1）摆脱冗余属性（减少左侧）：

取每个左侧并尝试一次删除每个属性一个，然后尝试推断右侧（现在对于所有依赖项只有一个属性）。如果成功，您可以从左侧删除该字母，然后继续。请注意，可能有不止一个正确的结果，这取决于您进行归约的顺序。

您会发现，您可以`B`从依赖项中删除`ABCD -> E`，因为`ACD -> ABCD`（使用第一个 dep.）和 from `ABCD -> E`。您可以使用完整的 dep。你目前正在减少，起初这有时会令人困惑，但如果你仔细想想，就会清楚你可以做到这一点。

同样，您可以从 , 中删除`F`，`ACDF -> E`因为`ACD -> ABCD -> ABCDE -> E`（您显然可以从字母本身推断出单个字母）。完成此步骤后，您将获得：

```
A -> B
ACD -> E
EF -> G
EF -> H
ACD -> E
ACDF -> G 
```

这些规则仍然表示与原始规则相同的依赖关系。请注意，现在我们有一个重复的规则`ACD -> E`。如果您将整个事物视为一个集合（在数学意义上），那么您当然不能在一个集合中拥有两次相同的元素。现在，我只是在这里留下两次，因为下一步无论如何都会摆脱它。

2）摆脱多余的依赖

现在对于每条规则，尝试将其删除，看看你是否只使用其他规则来推导出相同的规则。在这一步中，你当然不能使用 dep. 您当前正在尝试删除（您可以在上一步中删除）。

如果你取第一条规则的左边`A -> B`，暂时隐藏它，你会发现你无法`A`单独推断出任何东西。因此这条规则不是多余的。对所有其他人做同样的事情。您会发现，您可以（显然）删除重复规则之一`ACD -> E`，但严格来说，您也可以使用该算法。两个相同的规则只隐藏一个，然后取左边（`ACD`），用另一个推导出右边。因此，您可以删除`ACD -> E`（当然只有一次）。

您还会看到您可以删除`ACDF -> G`，因为`ACDF -> ACDFE -> G`. 现在结果是：

```
A -> B
EF -> G
EF -> H
ACD -> E 
```

这是原始集合的最小封面。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2015-05-01T07:39:32.097

根据我的说法，在上述功能最小依赖关系中，ACDF -> G 也应该包括在内，因为当你关闭左侧的每个字母及其组合时，它们都不会在不包括 F 的情况下产生 G

所以它会是这样的：

（A -> B，EF -> G，EF -> H，ACD -> E，ACDF -> G）

# c++ - 使用 std::logical_and 组合两个条件

> ID：10284007
> 
> 赞同：1
> 
> 时间：2012-04-23T15:58:47.937
> 
> 标签：c++

```
 int nums[] = {7, 6, 12, 9, 29, 1, 67, 3, 3, 8, 9, 77};
    std::vector<int> vecInts(&nums[0], &nums[0] + sizeof(nums)/sizeof(nums[0]));

    int countBoost = 0;

    // (i > 5 && i <=10)
    countBoost = std::count_if(vecInts.begin(), vecInts.end(),
                      boost::bind(std::logical_and<bool>(), 
                                  boost::bind(std::greater<int>(),    _1, 5),
                                         boost::bind(std::less_equal<int>(), _1, 10))
                          ); 
```

现在，我需要用纯 STL 实现相同的逻辑。我怎样才能做到这一点？

我已经尝试了以下代码，但它不起作用：

```
int countSTL   = std::count_if(vecInts.begin(), vecInts.end(),
                           std::logical_and<bool>(std::bind2nd(std::greater<int>(), 5), std::bind2nd(std::less_equal<int>(), 10))                               
                          ); 
```

谢谢

// 更新 //

```
In Effective STL Item 43, Meyers indicates as follows:

vector<int>::iterator i = find_if(v.begin(), v.end(),
           compose2(logical_and<bool>(), bind2nd(greater<int>(), x),
                                         bind2nd(less<int>(), y))); 
```

> 但是 compose2 不是标准的函数对象适配器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:54:11.100

使用“纯”C++03 std - 您只能通过使用额外的 bool 数组来做到这一点：将所有结果存储`bind2nd(greater<int>(), x)`到一个 bool 数组中，与`less`第二个数组相同。结果`logical_and`到第三个数组。对于动态大小 - 使用 std::vector 而不是简单的原始数组。`compose2<>`或者只是从[http://www.sgi.com/tech/stl/stl_function.h](http://www.sgi.com/tech/stl/stl_function.h)复制（窃取）SGI STL 的实现。

```
int main() {
    int nums[] = {7, 6, 12, 9, 29, 1, 67, 3, 3, 8, 9, 77};
    const size_t NUMS_SIZE = sizeof(nums) / sizeof(*nums);
    bool nums_greater[NUMS_SIZE];
    bool nums_less[NUMS_SIZE];
    bool nums_greater_and_less[NUMS_SIZE];

    int x = 3;
    int y = 20;
    transform(nums, nums + NUMS_SIZE, nums_greater, bind2nd(greater<int>(), x));
    transform(nums, nums + NUMS_SIZE, nums_less, bind2nd(less<int>(), y));
    transform (nums_greater, nums_greater+NUMS_SIZE, nums_less, nums_greater_and_less,
               logical_and<bool>() );

    int countBoost = 0;

    countBoost = count(nums_greater_and_less, nums_greater_and_less + NUMS_SIZE, true);

    cout << countBoost  << endl;
} 
```

# android - MIDI 乐谱跟随

> ID：10284008
> 
> 赞同：1
> 
> 时间：2012-04-23T15:58:52.477
> 
> 标签：android, ios, midi, coremidi

MIDI 文件的 iOS/Android 乐谱是否有任何开源选项？

我认为在 iOS 上 CoreMIDI 框架可能支持这一点，但根本无法理解？你如何使用它，它的用途是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:01:47.173

这个问题太开放了。我将不得不说'不，这些设备没有以下选项的开源分数'。您可以查看一些解决方案以开始使用，[http://code.google.com/p/mobilesynth/](http://code.google.com/p/mobilesynth/)是我的最爱。

CoreMIDI 绝对不会这样做。CoreMIDI 提供对 iOS MIDI 服务器的访问 - 句号。

# objective-c - 将 const char* 转换为 NSString * 并转换回 - _NSAutoreleaseNoPool()

> ID：10284011
> 
> 赞同：7
> 
> 时间：2012-04-23T15:59:00.207
> 
> 标签：objective-c, xcode

我正在尝试将 const char* 转换为 NSString * 然后将其转换回来。它有效，但我得到：

```
__NSAutoreleaseNoPool(): Object 0x100550a40 of class NSCFArray autoreleased with no pool in place - just leaking
__NSAutoreleaseNoPool(): Object 0x100551730 of class NSCFString autoreleased with no pool in place - just leaking
__NSAutoreleaseNoPool(): Object 0x100551f10 of class NSCFData autoreleased with no pool in place - just leaking 
```

代码是：

```
const char* convert = "hello remove this: *";

NSString *input = [[NSString alloc] initWithUTF8String:convert];// convert 

//remove * FROM THE STRING          
NSCharacterSet *doNotWant = [NSCharacterSet characterSetWithCharactersInString:@"*"]; 

// REPLACE * WITH NOTHING                   
input = [[input componentsSeparatedByCharactersInSet: doNotWant] componentsJoinedByString: @""];

// CONVERT BACK         
const char *converted_back = [input UTF8String]; 
```

我迷路了，请帮帮我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-23T16:00:49.880

如果您在后台线程中执行此操作，请添加 NSAutoReleasePool。

```
NSAutoreleasePool * pool = [[NSAutoreleasePool alloc] init];
const char* convert = "hello remove this: *";
NSString *input = [[[NSString alloc] initWithUTF8String:convert] autorelease];// convert 
//remove * FROM THE STRING          
NSCharacterSet *doNotWant = [NSCharacterSet characterSetWithCharactersInString:@"*"]; 
// REPLACE * WITH NOTHING                   
input = [[input componentsSeparatedByCharactersInSet: doNotWant] componentsJoinedByString: @""];
// CONVERT BACK         
const char *converted_back = [input UTF8String]; 
[pool drain]; 
```

此外，您需要`input`在完成后发布，或使其自动发布。

# spring - 如何使用spring + JPA将不同的实体管理器工厂注入同一个DAO

> ID：10284012
> 
> 赞同：1
> 
> 时间：2012-04-23T15:59:02.273
> 
> 标签：spring, hibernate, jpa

我正在尝试将两个不同`EntityManagerFactory`的实例注入同一个 DAO。我在一个项目中有一个通用的 DAO，我们称之为“项目库”，我有两个不同的项目，项目 A 和项目 B。持久单元在项目库中定义。

我的问题是我希望能够将`EntityManagerFactory`实例注入 DAO 而不是使用`@PersistenceUnit`，因为我有两个不同的数据库，一个由项目 A 使用，另一个由项目 B 使用。

我在通用 DAO 中只有基本的 CRUD 操作，但 Spring 给了我以下异常：

```
Error creating bean with name 'genericHibernateDAO': Injection of persistence dependencies failed; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No unique bean of type [javax.persistence.EntityManagerFactory] is defined: expected single bean but found 2 
```

请在下面找到我的配置：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
   http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd"
    default-autowire="autodetect">
    <context:component-scan base-package="com.entertainment" />

    <!-- Entity Manager -->
    <bean id="abstractEntityManagerFactory"
        class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" abstract="true">
        <property name="jpaVendorAdapter" ref="jpaVendorAdapter" />
        <property name="dataSource" ref="ADataSource" />
    </bean>

    <bean id="AEntityManagerFactory" parent="abstractEntityManagerFactory">
        <property name="persistenceUnitName" value="A" />
    </bean>

    <bean id="BEntityManagerFactory" parent="abstractEntityManagerFactory">
        <property name="persistenceUnitName" value="B" />
    </bean>

    <!-- Datasource -->
    <bean id="ADataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="oracle.jdbc.OracleDriver" />
        <property name="url"
            value="myUrl" />
        <property name="username" value="username" />
        <property name="password" value="password" />
    </bean>

    <bean id="BDataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="oracle.jdbc.OracleDriver" />
        <property name="url"
            value="myUrl" />
        <property name="username" value="username" />
        <property name="password" value="password" />
    </bean>

    <!--  Transaction Manager -->
    <bean id="ATransactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <bean id="BTransactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <!-- Vendor adapter -->
    <bean id="jpaVendorAdapter"
        class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
        <property name="databasePlatform" value="org.hibernate.dialect.Oracle9iDialect" />
        <property name="showSql" value="true" />
        <property name="generateDdl" value="true" />
    </bean>

    <!--  generic DAO -->

    <bean id="genericDAO"
        class="mypackage.GenericHibernateDAO"  abstract="true"/>

</beans> 
```

该文件位于项目库中：

```
 <persistence xmlns="http://java.sun.com/xml/ns/persistence"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
     http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
version="2.0">
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
     http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">
    <persistence-unit name="A" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle9Dialect" />
            <property name="hibernate.connection.driver_class" value="oracle.jdbc.OracleDriver" />
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.connection.username" value="username" />
            <property name="hibernate.connection.password" value="password" />
            <property name="hibernate.connection.url" value="myurl" />
            <property name="hibernate.max_fetch_depth" value="3" />
            <property name="hibernate.archive.autodetection" value="class" />
        </properties>
    </persistence-unit>
    <persistence-unit name="B" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <properties>
            <property name="hibernate.dialect" value="org.hibernate.dialect.Oracle9Dialect" />
            <property name="hibernate.connection.driver_class" value="oracle.jdbc.OracleDriver" />
            <property name="hibernate.show_sql" value="true" />
            <property name="hibernate.connection.username" value="username" />
            <property name="hibernate.connection.password" value="password" />
            <property name="hibernate.connection.url" value="myurl" />
            <property name="hibernate.max_fetch_depth" value="3" />
            <property name="hibernate.archive.autodetection" value="class" />
        </properties>
    </persistence-unit>
</persistence> 
```

我一直在努力解决这个问题。我会很感激任何帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-31T07:52:51.957

```
@PersistenceUnit(unitName="A")
EntityManagerFactory entityMgrFactory; 
```

或（这将注入与 persistenceUnit A 相关的 EMFactory）

```
@Autowired
@Qualified("AEntityManagerFactory")
private EntityManagerFactory AEntityManagerFactory; 
```

或者

```
@PersistenceContext(unitName="A")
EntityManager em; 
```

没有 unitName 总是期望只有一个 EMFactory 而你有两个，spring 不知道哪个通过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T16:41:37.597

您是否尝试过使用配置持久性单元`@PersistenceUnit.unitName`？

# jquery - 使用 jQuery 和图像映射加载数据

> ID：10284013
> 
> 赞同：0
> 
> 时间：2012-04-23T15:59:04.897
> 
> 标签：jquery, imagemap

我有美国地图，我想根据点击的状态显示 htm 页面的内容。例如：如果我点击纽约州，那么要加载的页面就是ny.htm。我怎样才能在 jQuery 中完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:11:30.473

试试这个插件：[http ://www.outsharked.com/imagemapster/default.aspx?demos.html](http://www.outsharked.com/imagemapster/default.aspx?demos.html)

# database - 寻找基于磁盘的 Redis 键值存储替代方案

> ID：10284016
> 
> 赞同：11
> 
> 时间：2012-04-23T15:59:32.267
> 
> 标签：database, redis, key-value

我们有用于 RDBMS 的 SQLite，但是否有任何基于磁盘的、轻内存使用的键值数据库？换句话说，一个键值存储可以在*少量内存*和*大量*数据上运行。我想在没有很多可用内存的低功率机器上使用它。

[BerkeleyDB](http://en.wikipedia.org/wiki/Berkeley_DB)和[LevelDB](http://en.wikipedia.org/wiki/LevelDB)似乎都是两种选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T19:43:15.847

看看[MemcacheDB](http://memcachedb.org/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-06T13:53:48.587

听起来您正在寻找一种基于磁盘的键值存储，即使数据不适合内存，它也能保持高性能。

就像@Ofer Zelig 提到的那样，快速是相对的。但我认为查看给定数据库的性能基准和操作指南会有所帮助。许多，包括[Redis](http://redis.io/topics/faq)，指定您应该提供足够的内存，以便所有数据（或所有索引）都可以放入内存中。对于某些应用程序来说，这可能成本过高。

我建议看看 FoundationDB。它的默认[存储引擎](https://foundationdb.com/key-value-store/documentation/configuration.html#storage-engines)“ssd”专为无法装入内存的大型数据库而设计。[性能基准测试](https://foundationdb.com/key-value-store/performance)都使用了一个不适合 RAM 的大型数据集，因此您可以查看它是否对您来说足够快。

作为奖励，FoundationDB 旨在作为分布式集群运行并支持多种数据模型。

全面披露：我是 FoundationDB 的工程师。

# c# - 如何点击ajax链接？

> ID：10284019
> 
> 赞同：0
> 
> 时间：2012-04-23T15:59:37.563
> 
> 标签：c#, ajax, asp.net-mvc

```
AjaxOptions ajaxMainArea = new AjaxOptions() { HttpMethod = "Post", UpdateTargetId = "main_area" };
@Ajax.ActionLink("new game", "Game", ajaxMainArea) 
```

我需要点击javascript。

```
function newgame(cost) {
    //here I need call ajax method
} 
```

这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:12:21.280

```
@Ajax.ActionLink("new game", "Game",null, ajaxMainArea,new { @id="aNewGame" }) 
```

并在您的脚本中，将功能绑定到您的元素。

```
$(function () {
    $("#aNewGame").click(function (e) {
        e.preventDefault();
        $.get("YourController/ActionMethod", { yourData: "someValue" }, function (response) {
          //Do whatever with the reponse.
        });
    });
}); 
```

假设您在页面中加载了 jQuery。

如果我用这样的链接做一些自定义的东西，我将只使用普通的`ActionLink`HTML 帮助程序并将功能绑定到这样的链接

```
@Html.ActionLink("new game", "Game",null,new {@id="aNewGame"}) 
```

脚本是

```
$(function () {
    $("#aNewGame").click(function (e) {
        e.preventDefault();
        $.post("YourController/ActionMethod", { yourData: "someValue" }, function (response) {
          $("#main_area").html(response);
          //If you want to do something else, you can do it here. :)
        });
    });
}); 
```

# ios - 如何为 MapKit 用户位置创建自定义标注视图？

> ID：10284021
> 
> 赞同：0
> 
> 时间：2012-04-23T15:59:42.927
> 
> 标签：ios, mkmapview, mapkit, mkannotationview, userlocation

我已经为我的所有地图图钉创建了一个自定义 MKPinAnnotationView，但是我在自定义用户位置图钉时遇到了问题。如果我为它创建了一个自定义图钉，那么我会丢失蓝色脉动点，并用我不想要的图钉替换它。所以我在 viewForAnnotation 方法中返回 nil：

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id<MKAnnotation>)annotation
{   
    if(annotation == self.mapView.userLocation)
    {
        // show the blue dot for user's GPS location
        return nil;
    }

    ... code for custom annotation pins goes here
} 
```

但是，我确实希望它在我点击它时调用自定义标注视图。选择蓝点后，我尝试添加子视图：

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view
{    
    if(view == [self.mapView viewForAnnotation:self.mapView.userLocation])
    {
        MKAnnotationView *userLocationView = [self.mapView viewForAnnotation:self.mapView.userLocation];

        userLocationCalloutView = [[MyAnnotationCalloutView alloc] initWithFrame:CGRectMake(-113, -58, 247, 59)];
        [userLocationCalloutView.rightAccessoryButton addTarget:self action:@selector(pinButtonTapped) forControlEvents:UIControlEventTouchDown];
        [userLocationView addSubview:userLocationCalloutView];
    }
} 
```

但问题在于标注附件按钮位于点击区域之外，我无法添加 hitTest:withEvent 因为蓝点注释视图是私有的......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:51:28.457

您可以在委托方法 mapView:didAddAnnotationViews 中为 userLocation 注释获取构建的 MKAnnotationView：

```
- (void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views
{
    for(MKAnnotationView *view in views)
    {
        if (view.annotation == mapView.userLocation)
        {
            view.canShowCallout = YES;
            view.rightCalloutAccessoryView = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
            break;
        }
    }
} 
```

# json - Spring MVC：是否可以返回地图 使用杰克逊动态转换为 JSON？

> ID：10284025
> 
> 赞同：0
> 
> 时间：2012-04-23T16:00:06.027
> 
> 标签：json, spring-mvc, jackson

我想让我的 Spring MVC Web 应用程序返回以 JSON 表示的模型状态。

我意识到通过 @ResponseBody 注释控制器方法，您可以在 JSON 和相应类型的对象之间进行转换。但是，我要查看的模型对象直接与数据库对话，而不需要维护任何状态本身。

因此，我想知道我是否可以只填充一个 Map（例如 HashMap），并由 Jackson 序列化？我意识到我可以为包含状态的模型创建新的 View 类，但我宁愿不必这样做。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:33:04.567

我从我的几个控制器返回 a `Map<String, ?>`，杰克逊会自动将内容转换为 JSON - 正如您所说，当您还没有可以保存您希望的信息的域对象时，这样做更容易返回。

只要您的类路径中有杰克逊库并且`<mvc:annotation-driven/>`在您的弹簧配置中，这应该为您自动完成。我用于 Jackson 的 maven 依赖项：

```
 <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.8.5</version>
        <scope>runtime</scope>
    </dependency> 
```

# eclipse - Firefox 从 TWIST/Eclipse 启动时找不到 Adob e 阅读器

> ID：10284028
> 
> 赞同：0
> 
> 时间：2012-04-23T16:00:17.033
> 
> 标签：eclipse, firefox, sikuli, adobe-reader

当我从命令行启动 firefox 时，我可以在浏览器中查看 PDF。我正在使用 Twist 测试 GUI，这是一个基于 Eclipse 并使用 sikuli 驱动程序的 IDE。在我运行测试之前，我关闭了浏览器。打开浏览器的代码行显示：`App.open(PDF_ENABLED_BROWSER + " -new-window " + URL`当我尝试打开 PDF 时出现以下错误，无法启动 Adob​​e Reader 9.5.1。请确保它存在于环境中的 PATH 变量中。如果问题仍然存在，请重新安装应用程序。我在 RHEL 上运行并使用 Firefox 3.6.23，而不是选择。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T18:03:30.283

通过将以下 2 行添加到我的 .bashrc 文件中，我能够使其工作。 `LD_LIBRARY_PATH=/mylocation/Adobe/Reader9/Browser/intellux export LD_LIBRARY_PATH`

# java - Hadoop 用于处理来自 Apache solr 的数据

> ID：10284038
> 
> 赞同：0
> 
> 时间：2012-04-23T16:00:50.653
> 
> 标签：java, solr, hadoop, mapreduce

我必须处理大量数据。我希望使用分布式计算（可扩展）对其进行处理。我正在从 apache Solr 获取数据。在传递特定输入时，我从 apache solr 得到一个巨大的数据集。对于这个数据集中的每条记录，我会将主键传递给 REST api 以获得一些将附加到记录的信息。然后每条记录都会进行一些更新。最终巨大集合中的每个更新的对象都将作为单独的 xml 文件写入一个文件夹中。

hadoop 是否适用于这种特定场景？。我在 hadoop mapreduce 文档中看到了 wordcount 示例。我试图以类似的方式考虑我的情况，其中 map reduce 为 2 个节点发出的 map 将是

```
Node1 - Map<InputIdToSolr1,Set<RecordsFromSolr1to500>>
Node2 - Map<InputIdToSolr1,Set<RecordsFromSolr500to1000>> 
```

然后这个结果将由 hadoop 中的 reduce 函数组合。与 wordcount 不同，我的节点在每个节点的 map 中只有一个元素。我不确定使用 hadoop 是否有意义。我可以使用哪些其他选项/开源 Java 项目来扩展记录的处理。我从春天看到了 Terracotta，但它似乎是一个商业应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:32:07.307

您是否考虑过使用 NoSQL 数据库？使用哪一个的决定实际上取决于数据的形状。要检查它们（所有开源）：

*   [MongoDB](http://www.mongodb.org/)
*   [雷迪斯](http://redis.io/)
*   [里亚克](http://wiki.basho.com/Riak.html)
*   [卡桑德拉](http://cassandra.apache.org/)
*   [Neo4j](http://neo4j.org/)
*   [沙发底座](http://www.couchbase.com/)

[更多关于 NoSQL 数据库的信息。](http://nosql.mypopescu.com/)

*编辑：*
我刚刚偶然发现了来自 Couchbase 和 Cloudera（Hadoop 解决方案和支持公司）的[网络研讨会](http://info.couchbase.com/WhyNoSQLWhyNowWebinar4_WebinarRegistrationPage.html)，他们将在其中讨论 NoSQL + Hadoop 的使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:36:31.280

不知道您正在寻找的可扩展性规模，但我会首先在多核机器上尝试多线程解决方案。

如果性能不符合预期，并且您可以灵活地获得更多硬件和应用程序实例，您可能会开始考虑 Map-Reduce 解决方案。

Terracota 不是来自 Spring/SpringSource/VMWare，尽管它是专有的和商业的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:39:55.107

该任务听起来适合 Hadoop 的 MapReduce。不仅如此 - Lucene 和 Hadoop 是由同一个人 Doug Cutting 创建的。在您的情况下，您可以考虑不同级别的集成。最简单的一种是将您的数据集放入 HDFS，然后选择/写入适合您的数据格式的输入格式，并在 Mapper 中进行您的 REST 调用以完成记录。
如果您有很多不同但相对简单的处理，我建议考虑将您的数据表示为 Hive 表 - 或来自 HDFS，或在 SOLR 中。
我不擅长 SOLR 架构，但是，如果您将 apache nutch 与 SOLR 一起使用 - 您可能已将 hadoop 集成在其中并可以使用它。

# c# - 如何使用 FluentValidation 验证复杂模型并且仍然可以访问模型？

> ID：10284039
> 
> 赞同：0
> 
> 时间：2012-04-23T16:00:53.007
> 
> 标签：c#, asp.net-mvc-3, fluentvalidation

我有一个 AccountsViewModel 定义为：

```
[Validator(typeof(AccountsValidator))]
public class AccountsViewModel
{
    public AccountsViewModel()
    {
        Accounts = new List<Account>();
        Accounts.Add(new Account { AccountNumber = string.Empty }); //There must be at least one account
    }

    public List<Account> Accounts { get; set; }
} 
```

我有以下流畅的验证：

```
public class AccountsValidator : AbstractValidator<AccountsViewModel>
{
    public AccountsValidator()
    {
        //Validate that a single account number has been entered.
        RuleFor(x => x.Accounts[0].AccountNumber)
            .NotEmpty()
            .WithMessage("Please enter an account number.")
            .OverridePropertyName("Accounts[0].AccountNumber");

        RuleFor(x => x.Accounts)
            .SetCollectionValidator(new AccountValidator());
    }
}

public class AccountValidator : AbstractValidator<Account>
{
    public AccountValidator()
    {
        RuleFor(x => x.AccountNumber)
            .Matches(@"^\d{9}a?[0-9X]$")
            .WithMessage("Please enter a valid account number.");

        //TODO: Validate that the account number entered is not a duplicate account
    }
} 
```

`Accounts`如果帐号在集合中重复，我想添加一个错误。但是，在`AccountValidator`课堂上我无权访问帐户集合（据我所知）。如何更改/重写此内容以访问帐户集合，以确保帐号不重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:05:36.013

我认为你的方法有点不正确，这就是你努力做到这一点的原因。

您的 AccountValidator 应该用于验证帐户的单个*实例*。因此，您的“帐号必须是唯一的”规则应在*集合*级别（即在您的 AccountsValidator 中）实施。在这种情况下，您将可以访问完整的集合，并且可以轻松地断言每个帐号都是唯一的。

AccountsValidator 中当前的“非空”规则也应移至 AccountValidator。

# c# - 我怎样才能在它自己的类中绘制一个精灵？

> ID：10284043
> 
> 赞同：1
> 
> 时间：2012-04-23T16:01:06.663
> 
> 标签：c#, graphics, xna, sprite

我正在尝试和朋友一起编写游戏，但我对如何绘制精灵感到非常困惑。我可以在下面的 Game1 类中绘制代码。

```
namespace SweetGeorgiaBrown
{
    /// <summary>
/// This is the main type for your game
/// </summary>
public class Game1 : Microsoft.Xna.Framework.Game
{
            enum GameStates { TitleScreen, Overworld, Menu, Battle, GameOver };
    GameStates gameState = GameStates.Battle;
    GraphicsDeviceManager graphics;
    SpriteBatch spriteBatch;
    Texture2D dinoTex;
    Texture2D alienTex;
    Texture2D robotTex;
    Texture2D eroboTex;
    SpriteFont basic;

    private Vector2 textLocation = new Vector2(20, 20);
    public Game1()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";

    }

    public class Health
    {
        public static int dinoHP = 300;
        public static int alienHP = 200;
        public static int robotHP = 100;
    }

    /// <summary>
    /// Allows the game to perform any initialization it needs to before starting to run.
    /// This is where it can query for any required services and load any non-graphic
    /// related content.  Calling base.Initialize will enumerate through any components
    /// and initialize them as well.
    /// </summary>
    protected override void Initialize()
    {
        // TODO: Add your initialization logic here

        base.Initialize();
    }

    /// <summary>
    /// LoadContent will be called once per game and is the place to load
    /// all of your content.
    /// </summary>
    protected override void LoadContent()
    {
        // Create a new SpriteBatch, which can be used to draw textures.
        spriteBatch = new SpriteBatch(GraphicsDevice);
        dinoTex = Content.Load<Texture2D>(@"Sprites\dino\dinoFrontOvwld");
        alienTex = Content.Load<Texture2D>(@"Sprites\alien\alienFrontOvwld");
        robotTex = Content.Load<Texture2D>(@"Sprites\robot\robotFrontOvwld");
        eroboTex = Content.Load<Texture2D>(@"Sprites\robo1\robo1OvwldFront");

        basic = Content.Load<SpriteFont>(@"Fonts\Basic");
        // TODO: use this.Content to load your game content here
    }

    /// <summary>
    /// UnloadContent will be called once per game and is the place to unload
    /// all content.
    /// </summary>
    protected override void UnloadContent()
    {
        // TODO: Unload any non ContentManager content here
    }

    /// <summary>
    /// Allows the game to run logic such as updating the world,
    /// checking for collisions, gathering input, and playing audio.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Update(GameTime gameTime)
    {
        // Allows the game to exit
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        // TODO: Add your update logic here
        switch (gameState)
        {
            case GameStates.Battle:
                break;
        }
        base.Update(gameTime);
    }

    /// <summary>
    /// This is called when the game should draw itself.
    /// </summary>
    /// <param name="gameTime">Provides a snapshot of timing values.</param>
    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);
        spriteBatch.Begin();

        // TODO: Add your drawing code here
        if ((gameState == GameStates.Battle))
        {
            spriteBatch.DrawString(
                basic,
                "ASDFASDFADFASDFA ", textLocation, Color.Black);
            spriteBatch.Draw(
                dinoTex, textLocation, Color.White);
        }
        spriteBatch.End();
        base.Draw(gameTime);
    }
} 
```

}

在我的 Game1 代码中，我可以成功地在屏幕上绘制该精灵和文本。但是，我想在另一个类中绘制一个精灵，但我完全不知道该放什么。

在另一堂课上，我希望我能做一些简单的事情

sprite.Draw(//这里将是精灵所在位置的 x 和 y 坐标，纹理的名称)，就是这样，但它似乎不能那样工作。有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:06:08.113

它确实是这样工作的。将您的 sprite 特定代码提取到一个结构类似于以下内容的类中：

```
public Sprite()
{
}

public void Update(GameTime gameTime)
{
}

public void Draw(SpriteBatch spriteBatch)
{
} 
```

然后在你的 game1 类中你可以调用

```
Sprite.Update(gameTime); 
```

和

```
Sprite.Draw(spriteBatch); 
```

这应该可以帮助您入门。您是否自己尝试了一些方法，如果是这样发布它们，我们可以看到它们哪里出错了，或者您只是希望快速得到答案，您可以复制和粘贴？

# mongodb - mongodb map reduce 以按日期/日期获取唯一性

> ID：10284048
> 
> 赞同：15
> 
> 时间：2012-04-23T16:01:32.647
> 
> 标签：mongodb

试图按日期和数字分组

我的文件

```
 { "_id" : ObjectId("4f956dee76ddb26752026e8f"), "request" : "default", "options" : "1", "keyword" : "somekey", "number" : "5b234b79-4d70-437e-8eef-32a2941af40a", "date" : "20120423200446", "time" : 1335193066 } 
```

我的查询

```
map = "function() { var date = new Date(this.time * 1000); var key = date.getFullYear() + date.getMonth() + date.getDate(); emit({day : key, number: this.number}, {count: 1}); }"

reduce = "function(key, values) { var count = 0; values.forEach(function(v) { count += v['count']; }); return {count: count}; }"

db.txtweb.mapReduce(map, reduce, {out: "pageview_results"}); 
```

我的错误

```
uncaught exception: map reduce failed:{ "errmsg" : "ns doesn't exist", "ok" : 0 } 
```

我不知道出了什么问题，但我认为它是用日期功能做的。

有任何想法吗。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-23T16:31:52.660

`ns doesn't exist`表示您正在访问一个不存在的数据库或集合。检查他们的名字

下面的脚本按天分组*this.amount*（没有时间）

```
 db.payments.mapReduce(
             function() {
                 var k = new Date(this.payment_time);
                 k.setMinutes(0);
                 k.setSeconds(0);
                 k.setMilliseconds(0);
                 emit(k, this.amount);
             }, 
             function (key, vals) {
                 var total = 0;
                 for (var i = 0; i < vals.length; i++) {
                     total += vals[i];
                 }
                 return total;
             },
             {
              out : {merge : "resultName" }
             }
     );
    }
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T17:36:45.993

这主要发生在您运行脚本并忘记选择数据库时

```
use your_database_name; 
```

注意选择数据库的行。

# php - 如何确定页面是否正在通过灯箱查看？

> ID：10284053
> 
> 赞同：5
> 
> 时间：2012-04-23T16:01:55.327
> 
> 标签：php, ajax, wordpress, fancybox, lightbox

我有几个正在处理的网站正在通过灯箱加载子页面。实际内容是由 Google 找到的，但这些页面很可怕，因为它们并不打算加载所有标题和诸如此类的东西——这是用于灯箱交付的内容（ajax、fancybox）。

在 PHP 或 javascript 中（如有必要），我如何确定是否在灯箱中查看内容？最好抛出一个“查看原始页面”链接或其他东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T16:21:44.993

`lightbox`像所有其他类似的库一样，使用 AJAX 来提取内容......我不确定你是否可以检测它是否是标准，或者`jquery`因为它们都是相同的技术`moottools``lightbox`

您可以做的是检测您的页面是否被调用`AJAX`

```
function isAjax() {
    return (isset($_SERVER['HTTP_X_REQUESTED_WITH']) && $_SERVER['HTTP_X_REQUESTED_WITH']=="XMLHttpRequest");
}

if(isAjax())
{
    die("Don't Use AJAX");
}
else
{
    echo "WELCOME" ;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T16:22:15.187

灯箱通常使用 iframe 来显示外部页面。如果是这种情况（您可以使用 Firebug 检查 Lightbox 来检查这一点），您可以使用`window.top`JavaScript 来检查这一点。

```
if (window.top.location != window.location) {
    //this page is inside a frame or iframe
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-24T20:14:57.867

如果您使用带有默认选项的最新版本的 fancyBox，那么这个技巧应该可以工作 -

```
<?php echo (isset($_SERVER['HTTP_X_FANCYBOX']) && $_SERVER['HTTP_X_FANCYBOX']) ? 'is fancyBox' : 'is not fancyBox' ?> 
```

# c++ - _asm 在 C 代码中不起作用，如何启用它

> ID：10284057
> 
> 赞同：1
> 
> 时间：2012-04-23T16:02:12.967
> 
> 标签：c++, c, assembly

```
_asm  
{  
//----------------------------------  
    dword_type(DYN_LOADER_START_MAGIC)  
//----------------------------------  
_main_0:  
    pushad  // save the registers context in stack  
    call _main_1  
_main_1:      
    pop ebp  
    sub ebp,offset _main_1 // get base ebp  
...... //many many assembler code line  
} 
```

我想为 Windows 可执行文件编写代码注入工具
但是这个 _asm 不起作用给出：64 C:\Users\ACharyyev\Desktop\test\pemaker5\pemaker\Copy of loader.cpp `_asm' undeclared (首先使用这个函数)
似乎有 asm() 函数可以工作，但我必须转换所有变量（例如，将 eax 转换为 %eax）并放置换行符等等，但 _asm {} 应该可以工作。我在项目属性和编译器属性中找不到任何东西来启用汇编程序。任何想法。
现在我在 Windows 上使用 DevCpp 作为这个项目的 IDLE。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:05:47.820

`__asm`可以，但您仍然需要使用 AT&T，因为这是 Dev-C++ 支持的。

# perl - Mojox::Session 过期但从未从数据库中删除

> ID：10284058
> 
> 赞同：0
> 
> 时间：2012-04-23T16:02:13.107
> 
> 标签：perl, mojolicious

我正在将 mojox::session 与 PostgreSQL 数据库一起使用。我在表中有一个 expires 列。我不确定它的目的。基本上，我的问题是关于 expires 的整个事情是如何工作的。会话如何过期以及表中的行如何删除。目前，我正在手动删除表中的行。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:41:38.243

似乎没有自动清理，但是如果您使会话到期并在之后调用刷新，则会话将被删除。

从[文档](http://search.cpan.org/~vti/MojoX-Session-0.25/lib/MojoX/Session.pm)：

```
expire    
    $session->expire;
    $session->flush;

Force session to expire. Call flush if you want to remove it from the store. 
```

# android - 主页后在 VideoView 中重新启动视频

> ID：10284059
> 
> 赞同：1
> 
> 时间：2012-04-23T16:02:14.020
> 
> 标签：android, android-videoview

我有 VideoView 的活动。活动创建后，我开始播放视频。当我按下主页按钮时，一切都很好。当我从主屏幕返回活动时，视频缓冲区为空，视频播放从头开始。这是一个问题，因为我认为视频应该在按下主页按钮的那一刻暂停，并在我们从主屏幕返回时重新开始。在调试器中我可以看到，在按下 Home 按钮之前，VideoView 已经初始化了 mMediaPlayer 字段。但是，当我从主屏幕返回后在 onStart() 中观看此字段时，此字段为空。我怎样才能实现“正确”的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:07:33.190

尝试覆盖活动生命周期的 onPause 和 onRestart 方法。

在 onPause() 中暂停播放视频，在 onRestart() 中再次播放。

# java - 报警问题 Android 应用程序

> ID：10284060
> 
> 赞同：0
> 
> 时间：2012-04-23T16:02:27.193
> 
> 标签：java, android, xml, alarm

我的闹钟有一些问题，当它工作时，它会在中间显示我的项目名称

**我的项目名称是：LMP**

![我的项目名称是：LMP](../Images/141c085cb4bd41a63e782f2492a8860a.png)

在我按下返回按钮之前我什么都做不了

我怎样才能摆脱这个问题，谁能建议我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:05:36.090

好像你使用了一个 AlertDialog （或某事）并且没有你想要的按钮。尝试“setPositiveButton()”和“setNegativeButton()”来获得确定/取消。

此外..更多细节表示赞赏！;)

（否则，如果您使用 AlertManager（真正的警报 ^^），那么您可以通过使用与 myAlertManager.cancel(intent) 中的 alertManager 相同的意图来取消重复的 Dialog ... 或 sth...）

# javascript - Google Apps onEdit 事件 - event.source 未定义

> ID：10284061
> 
> 赞同：3
> 
> 时间：2012-04-23T16:02:31.437
> 
> 标签：javascript, google-apps, google-apps-script

Google Docs 允许编写脚本。

当单元格内容与特定单词匹配时，我正在尝试更改单元格的颜色。我的问题是 onEdit 函数没有按照此处指定的方式工作：[https ://developers.google.com/apps-script/guide_events#Simple](https://developers.google.com/apps-script/guide_events#Simple)

每当我尝试使用 event.source 谷歌应用程序时都会抛出一个错误：**“未定义的来源”**

```
function onEdit(event)
{
  Browser.msgBox(event.source.getActiveSheet());
} 
```

当然这是非常基本的，我在这里做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T01:35:36.877

您的代码工作正常，但对于 onEdit() 函数，请确保您通过编辑电子表格中的单元格来运行它们，而不是直接从脚本编辑器中运行它们。这些内置的简单事件处理程序需要传入事件的上下文才能正常工作。如果您直接从脚本编辑器运行它们，则不会传入任何事件对象，这就是您收到错误的原因。

# php - Yii cgridview ajaxUpdate 属性

> ID：10284068
> 
> 赞同：0
> 
> 时间：2012-04-23T16:03:23.613
> 
> 标签：php, ajax, gridview, widget, yii

我在另一个 cgridview 中有一个 cgridview：外部是：

```
$this->widget('application.modules.user.components.CsvGridView', array(
    'dataProvider'=>$model->mySearch(),
    'filter' => $model,
    'id'=>'users-grid',
... 
```

内部是：

```
$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'vacr-grid',

    'dataProvider'=>$model->searchu(),
   // 'pager'=>false,
   // 'enableSorting'=>false,
    'summaryText'=>'',
    'ajaxUpdate'=>'vacr-grid',

    'columns'=>array(

        'start',
        'end',
                array(
                        'name' => 'vac_type',
                        'value' =>
                        'isset($data->vacType->name)?$data->vacType->name:$data->vac_type'
                ),
    ),
)); 
```

问题是内部没有正确更新（当然用ajax更新）。

例如，当我单击“下一步”时，在内部 cgridview 中，请求的 URL 是：请求 URL：http://localhost/orm/vac/vac/adminu/user_id/1/Vac_page/2?ajax=users-grid
注意 users-grid 是外部 cgridview 的 id。然后在我单击“下一步”后，内部和外部 cgridviews 都消失了。

我尝试使用[ajaxUpdate 属性](http://www.yiiframework.com/doc/api/1.1/CGridView#ajaxUpdate-detail)，但它不影响任何东西。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-01T18:32:44.870

这与我遇到的问题类似。排序和分页 url 由 dataProvider 设置，而搜索 url 由 ajaxUrl 设置。您必须设置所有 3 以脱离上下文使用 CGridView。

dataprovider 单独设置：

```
$dataProvider=new CActiveDataProvider('Modelname',array(
    'criteria'=>$criteria,
    'pagination'=>array(
        'route'=>'something/search'
    ),
    'sort'=>array(
        'route'=>'something/search'
    )
));

$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'vacr-grid',    
    'dataProvider'=>$dataProvider,
    'summaryText'=>'',
    'ajaxUpdate'=>'vacr-grid', // not necessary if same as id
    'ajaxUrl'=>Yii::app()->createUrl( 'Something/search' ),  // this takes care of the search  
    'columns'=>array(    
        'start',
        'end',
                array(
                        'name' => 'vac_type',
                        'value' =>
                        'isset($data->vacType->name)?$data->vacType->name:$data->vac_type'
                ),
    ),
)); 
```

还有我类似的问题...

[Yii中如何使用CGridView的ajaxUrl参数？](https://stackoverflow.com/questions/12626622/how-do-i-use-the-ajaxurl-parameter-of-cgridview-in-yii/12638585#comment17078703_12638585)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-10T14:07:38.417

嵌套它们时 CGridView 的两个非常重要的配置选项是`updateSelector`和`filterSelector`！默认情况下，这些选择器以 GridView 中所有可用的分页/排序链接为目标。因此，单击嵌套 gridview 中的排序链接也会导致所有父 GridView 更新。因此，如果这是一个问题（可能是），您将不得不调整这些选择器以仅选择 gridview 的直接后代而不是子 gridview 的那些。如果子 gridview 有另一个 ID，反之亦然。

所以你是这样的父 GridView（主要需要）选择器（注意使用“大于”符号）：

```
$this->widget('CGridView',array(
    ...
    'updateSelector' => '#PARENTGRIDVIEW > .items.table > thead tr th a.sort-link, #PARENTGRIDVIEW > .pagination a',
    'filterSelector' => '#PARENTGRIDVIEW .filters input, #PatientSaleMedicalsIndex .filters select', 
```

现在子 gridview 可以独立于父级更新。注意：孩子的 gridview id 必须重新出现在 ajax 请求中，否则它的内容将不会放置在触发请求的页面/gridview 中！

# macos - Mac 上的数据存储/查询

> ID：10284069
> 
> 赞同：0
> 
> 时间：2012-04-23T16:03:28.150
> 
> 标签：macos, cocoa, accounting

我正在研究可可。我已经熟悉了基础知识。我想知道我必须专注于哪些事情才能编写会计软件。SQL 允许在 Windows 中查询数据。Mac OS 在管理数据和从数据库中检索所需的过滤信息方面做了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:09:05.233

查看核心数据教程。核心数据提供了一个持久的数据存储，具有多种底层实现选择，包括 SQLite。

# php - 用打开/关闭大括号代替打开/关闭双引号来解释 PHP 中的字符串之间的区别

> ID：10284072
> 
> 赞同：5
> 
> 时间：2012-04-23T16:03:45.033
> 
> 标签：php, curly-braces

我阅读了 PHP 手册，但并不清楚任何差异。我很困惑使用这个有什么意义：

```
echo "Print this {$test} here."; 
```

与此相比：

```
echo "Print this $test here."; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:09:15.640

来自[PHP.net](http://php.net/manual/en/language.types.string.php)

> 复杂（卷曲）语法
> 
> 这不是因为语法复杂而被称为复杂，而是因为它允许使用复杂的表达式。
> 
> 任何具有字符串表示的标量变量、数组元素或对象属性都可以通过此语法包含在内。只需将表达式写成与它出现在字符串之外的相同方式，然后将其包装在 { 和 } 中。由于 { 无法转义，因此只有在 $ 紧跟 { 时才能识别此语法。使用 {\$ 获取文字 {$。

例子：

```
<?php
// Show all errors
error_reporting(E_ALL);

$great = 'fantastic';

// Won't work, outputs: This is { fantastic}
echo "This is { $great}";

// Works, outputs: This is fantastic
echo "This is {$great}";
echo "This is ${great}";

// Works
echo "This square is {$square->width}00 centimeters broad."; 

// Works, quoted keys only work using the curly brace syntax
echo "This works: {$arr['key']}";

// Works
echo "This works: {$arr[4][3]}";

// This is wrong for the same reason as $foo[bar] is wrong  outside a string.
// In other words, it will still work, but only because PHP first looks for a
// constant named foo; an error of level E_NOTICE (undefined constant) will be
// thrown.
echo "This is wrong: {$arr[foo][3]}"; 

// Works. When using multi-dimensional arrays, always use braces around arrays
// when inside of strings
echo "This works: {$arr['foo'][3]}";

// Works.
echo "This works: " . $arr['foo'][3];

echo "This works too: {$obj->values[3]->name}";

echo "This is the value of the var named $name: {${$name}}";

echo "This is the value of the var named by the return value of getName(): {${getName()}}";

echo "This is the value of the var named by the return value of \$object->getName(): {${$object->getName()}}";

// Won't work, outputs: This is the return value of getName(): {getName()}
echo "This is the return value of getName(): {getName()}";
?> 
```

有关更多示例，请参见该页面。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T16:09:21.960

在您的示例中，没有区别。但是，当变量表达式更复杂时，它会很有帮助，比如带有字符串索引的数组。例如：

```
$arr['string'] = 'thing';

echo "Print a {$arr['string']}";
// result: "Print a thing";

echo "Print a $arr['string']";
// result: Parse error: syntax error, unexpected T_ENCAPSED_AND_WHITESPACE 
```

# google-maps-api-3 - 在 OpenLayers 中显示谷歌地图图层是否合法？

> ID：10284073
> 
> 赞同：2
> 
> 时间：2012-04-23T16:03:47.023
> 
> 标签：google-maps-api-3, openlayers

我正在阅读 Google Maps/Google Earth APIs 服务条款，但我不确定我是否清楚理解。它在声明 10.2 a) 中。OpenLayers 是包装器吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T03:47:26.270

OpenLayers 被认为是一个包装库。

但是，当该条款被引入服务条款时（大约一年前），OpenLayers 获得了特定的弃权。

[您可以在http://lists.osgeo.org/pipermail/openlayers-dev/2012-April/008625.html](http://lists.osgeo.org/pipermail/openlayers-dev/2012-April/008625.html)阅读一些额外的讨论（以及该线程中的相关电子邮件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:04:15.453

只要是 OpenLayers，实际使用 Maps API 就应该是合法的。

（即 OpenLayers 不直接访问内容 - 绕过 Maps API）

Maps API 如何加载（通过 OpenLayers 加载）并不是真正的问题 - 当然，只要 Openlayers 不干扰 Maps API。

~~Openlayers 本身不是包装器。~~（编辑：见其他答案）

# importerror - PyCharm 2.5 NameError 或 ImportError 问题

> ID：10284074
> 
> 赞同：2
> 
> 时间：2012-04-23T16:03:49.480
> 
> 标签：importerror, pycharm, nameerror

在升级之前，我可以正常运行我的项目。今天升级到 PyCharm 2.5。

我的设置和项目打开得很好，没有（明显的）更改，但是现在运行项目让我可以选择`NameError`或者`ImportError`在引用（自定义）模块时，这取决于我是使用该`import *`方法还是测试单个导入和明确引用模块/类。无论哪种方式，它都打破了！

在 ipython 下测试了完全相同的东西，效果很好。

我的 PYTHONPATH 在 python 解释器设置中没问题/未更改。

# jquery - 具有用户自定义高级搜索和 addJSONData 填充的 jqGrid

> ID：10284075
> 
> 赞同：2
> 
> 时间：2012-04-23T16:03:56.840
> 
> 标签：jquery, jqgrid

我一直想创建自己的搜索对话框来创建与 jqGrid 文档中提到的方法不同的搜索条件。这有很多原因，包括但不限于对日期范围的良好支持、更人性化的搜索对话等。

我只是想知道是否有人尝试过创建此流程，以及在深入实施之前创建自己的复杂搜索的解决方法有多有效：

1.  创建一个对话框，用户在其中插入搜索所需的信息（不同于 jqGrid 高级自定义搜索的当前对话框）
2.  请求发送到服务器并作为 JSON 检索，我可以使用`addJSONData`方法将其插入到网格中。
3.  `next`jqGrid 将保留搜索值的分页，以便一旦点击和`previous`按钮，分页将正常工作（使用基于搜索条件的获取数据） 。

所以**问题**是：如果我将使用更改为包含在搜索导航过程中使用的相同内容`next`，我可以让导航对我有用吗？这可能在触发事件时发生，并且使用简单的逻辑表明正在为搜索的数据进行分页？`previous``filters``setGridParam``data``onPaging`

非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:38:16.360

首先我可以提一下，我对自定义搜索对话框的实现有点悲观。原因是您将在实施中投入大量时间。*我最好建议您在标准*搜索对话框中使用自定义控件。应用我建议[的更改](https://github.com/tonytomov/jqGrid/commit/03d31332cf62c6f819a7fc0fcb99d50dd3f8f802)后，现在可以。

查看允许您创建搜索对话框[的演示，例如](http://www.ok-soft-gmbh.com/jqGrid/Ranking2.htm)

![在此处输入图像描述](../Images/50462732249f34ba31f5ade67db7cd62.png)

以这种方式，您可以解决您在问题中描述的许多问题。

如果您决定创建自定义搜索对话框，则必须执行以下操作：

*   `postData`新的搜索对话框应在属性中添加有关搜索条件的信息。
*   使用重新加载网格`.trigger.("reloadGrid")`

您不需要向服务器发出单独的 Ajax 请求。重新加载网格是您需要做的。

如果要保存有关过滤器的信息，则`postData.filters`必须保存[标准格式](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching#options)。在这种情况下，您可以利用本地数据过滤（`datatype: 'local'`或使用`loadonce: true`）。[以答案](https://stackoverflow.com/a/3979490/315935)中的演示为例。

如果您只想在*服务器端*实现数据过滤，您可以使用任何格式的附加属性（请不要使用相同的名称`filters`）。如果您想让搜索过滤器（控件）始终在页面上可见，我建议您使用将`postData`属性作为函数的技术（参见[答案](https://stackoverflow.com/a/2928819/315935)）。

# ruby-on-rails - Ruby on Rails css 资产管道组织问题

> ID：10284079
> 
> 赞同：0
> 
> 时间：2012-04-23T16:04:30.263
> 
> 标签：ruby-on-rails, css, asset-pipeline

我必须在我的应用程序的仅 show.html.haml 页面上使用某种表格样式。具体来说，我不希望将此样式应用于我在 _form.html.haml 部分中的表单。以下是样式元素：

```
 table {
    border-collapse: collapse;
    width:100%;
  }

  td, th {
    border: 1px solid gray;
    padding:5px;
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: ellipsis;
  }

  th {
    background-color: #ccc;
    text-shadow: 1px 1px 1px rgba(0,0,0,.2);
  } 
```

我在 app/vendor/assets/web-app-theme/stylesheets 目录中创建了一个名为 data_tables.css 的小文件，并将其包含在我的 application.js 中，如下所示：

*= 需要 web-app-theme/data_tables

问题是：它不仅影响我的 show.html.haml 页面中的表格（我想要），而且影响 _form_html.haml 部分（我不想要）。显然，我对资产组织有一些不完全了解的地方。以下是我在 app/assets/stylesheets 目录中的 application.css 文件的内容：

```
/*
 * This is a manifest file that'll automatically include all the stylesheets available in this directory
 * and any sub-directories. You're free to add application-wide styles to this file and they'll appear at
 * the top of the compiled file, but it's generally better to create a new file per style scope.
 *= require web-app-theme/base
 *= require web-app-theme/style
 *= require web-app-theme/wat_ext
 *= require web-app-theme/data-tables
 *= require formalize
 *= require jquery.ui.core
 *= require jquery.ui.theme
 *= require jquery.ui.tabs
 *= require dataTables/src/demo_table_jui
 *= require_self
 *= require_tree . 
*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:17:09.457

您在清单中声明的​​所有内容都会在资产编译期间转储到单个文件中。解决您的问题的最佳方法是将类分配给您希望 CSS 影响的表并相应地更改它。

或者，您可以从清单中删除此文件并从视图中调用它，`stylesheet_link_tag`如下所示：

```
<%=stylesheet_link_tag "web-app-theme/data_tables"%> 
```

但它不是你想用于小文件的东西，因为它增加了对你的服务器的请求量。

# objective-c - 目标c Iphone中的UINavigationBar选框

> ID：10284089
> 
> 赞同：2
> 
> 时间：2012-04-23T16:04:58.963
> 
> 标签：objective-c

拜托，我想显示一条消息，将选取框移动到 NavigationBar，例如“欢迎使用我的应用程序，它允许您搜索新客户”。我使用 .xib 来绘制我的界面。我搜索了很多，但没有找到任何帮助。你能帮我吗。

# visual-studio-2010 - Visual Studio 无法再打开 css 文件

> ID：10284092
> 
> 赞同：3
> 
> 时间：2012-04-23T16:05:07.080
> 
> 标签：visual-studio-2010, visual-studio

现在我尝试了一些 .less 扩展名后无法编辑 CSS 文件。我已删除所有扩展，但当我尝试打开文件时，Visual Studio 仍然会抛出“无法完成操作”。

如何恢复 CSS 文件编辑？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T16:46:41.837

**工具/导入和导出设置 - 重置所有设置已**修复的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:08:48.833

在**Tools/Options**对话框中的**Environment/General**下，单击`Restore File Associations`按钮。

![在此处输入图像描述](../Images/12e7f5d81a8489eb20bc27df25be7067.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T18:32:05.130

你知道......你只是在处理项目，很少会出现像这样的浪费时间的废话。无论如何，这是一个对我有用的链接。[http://visualstudiogallery.msdn.microsoft.com/a15c3ce9-f58f-42b7-8668-53f6cdc2cd83](http://visualstudiogallery.msdn.microsoft.com/a15c3ce9-f58f-42b7-8668-53f6cdc2cd83) - Microsoft Visual Studio 2010 SP1 的 Web 标准更新。

# html - HTML5 CSS3 网格样板

> ID：10284093
> 
> 赞同：3
> 
> 时间：2012-04-23T16:05:12.873
> 
> 标签：html, css, grid, boilerplate

我已经使用[http://foundation.zurb.com/](http://foundation.zurb.com/)作为 HTML/CSS/JS Grid 样板并喜欢它，我希望尽可能多地审查和研究类似的样板框架，有人能指出我的方向吗在他们可能遇到的任何资源中，他们不一定需要基于网格设计。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:06:50.770

来自 Twitter 的 Bootstrap，我所知道的最好的之一。

[http://twitter.github.com/bootstrap/](http://twitter.github.com/bootstrap/)

# backbone.js - 需要帮助理解为什么 Backbone.js 路由事件会（或不会）触发

> ID：10284099
> 
> 赞同：0
> 
> 时间：2012-04-23T16:05:26.193
> 
> 标签：backbone.js

我有以下路线（希望没人介意我使用 Coffeescript）：

```
class MyRouter extends Backbone.Router
  routes:
    'games': 'games'
    'games/latest': 'latestGames'

  games: -> 
  latestGames: -> 
```

我希望能够`MyRouter`像这样响应路由事件：

```
App.myRouter.on('route:games', -> alert('games'))
App.myRouter.on('route:games/latest', -> alert('games/latest')) 
```

当我转到 时`#games`，我会收到“游戏”警报。当我转到 时`#games/latest`，我没有收到“游戏/最新”警报。当我离开 导航时`#games`，我会收到“游戏”警报。

我的问题是：

1.  为什么导航到 时没有收到“游戏/最新”提醒`#games/latest`？
2.  为什么我离开时会收到“游戏”警报`#games`？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:43:08.433

`on`当我应该将其应用于操作时，我正在应用于URL 片段。

```
App.myRouter.on('route:games', -> alert('games'))
App.myRouter.on('route:latestGames', -> alert('games/latest')) 
```

# linux - Bugzilla 4.2 新的错误电子邮件

> ID：10284100
> 
> 赞同：1
> 
> 时间：2012-04-23T16:05:28.000
> 
> 标签：linux, ubuntu, bugzilla

我已经安装了 bugzilla 4.2，并且新错误电子邮件格式已从 bugzilla 3.6 更改。我想修改摘要列表以按我想要的顺序显示项目。例如：在 bugzilla 4.2 中，顺序是 Priority、Group、Bug ID、CC 等，但我希望它们是 Bug #、Summary、Classification、Product 等。

提前致谢。

# c - 如何使用 GDB 在给定函数的范围内声明变量？

> ID：10284103
> 
> 赞同：28
> 
> 时间：2012-04-23T16:05:35.407
> 
> 标签：c, gdb

我知道 gdb 允许使用该命令*设置已声明的变量。*`set`

gdb 是否可以在给定函数的范围内动态声明一个新变量？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-02-10T07:52:03.377

您可以动态分配一些空间并使用它来存储新变量。根据您所说的“当前功能的范围”的含义，它可能不是您想要的。

但是当你有一个函数 func() ，它接受一个指向输出参数的指针时，它是这样的：

```
set $foo = malloc(sizeof(struct funcOutStruct))
call func($foo)
p *$foo
call free($foo) 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-04-23T16:09:16.310

对于 C（可能还有 C++）代码，这将非常困难，因为在大多数实现中这样做会涉及到移动堆栈指针，这会使函数的退出代码由于它不再匹配堆栈帧的大小而失败。此外，访问局部变量的函数中的所有代码都会突然冒着碰到错误位置的风险，这也很糟糕。

所以，我不这么认为，不。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-09-10T06:13:43.133

这就是我用来打印变量的方式

```
(gdb) set $path=((ngx_path_t     **)ngx_cycle->paths.elts)[2]
(gdb) print *$path
    $16 = {
        name = {
            len = 29,
            data = 0x80ed15c "/usr/local/nginx/fastcgi_temp"
            },
        len = 5,
        level = {1, 2, 0},
        manager = 0,
        loader = 0,
        data = 0x0,
        conf_file = 0x0,
        line = 0
    } 
```

# php - phprestsql配置问题

> ID：10284108
> 
> 赞同：2
> 
> 时间：2012-04-23T16:05:48.767
> 
> 标签：php, mysql, rest, ini, restful-architecture

我一直在尝试使用 phprestsql 为数据库设置 REST 接口，但是尽管当我尝试查看其任何内容时能够登录并查看数据库表，但我得到以下结果：

找不到对象！

在此服务器上找不到请求的 URL。如果您手动输入了 URL，请检查您的拼写并重试。

如果您认为这是服务器错误，请联系网站管理员。错误 404

我的 phprestsql.ini 的内容如下：

```
[settings]
baseURL = "/rest"
[database]
type = "mysql"

server = "localhost:3306"
database = "onthespotpersonnel"

foreignKeyPostfix = "_uid"

[renderers]
text/xml = xml.php
text/plain = plain.php
text/html = html.php

[mimetypes]
xml = text/xml
txt = text/plain
html = text/html 
```

虽然 .htaccess.example 包含以下内容：

```
 RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^.*$ index.php
    #RewriteRule ^.*$ /rest/index.php 
```

我对这种东西很陌生，所以欢迎提出任何想法:)

**ps**当我将 3306 端口插入表格内容链接（例如[http://172.16.2.2:3306/rest/device](http://172.16.2.2:3306/rest/device)）时，会出现以下消息：

```
J���
5.5.21�x��T[OXN[aU�ÿ÷�€����������f!l"]4'gQ@.c�mysql_native_password� 
```

我相信这不是编码错误，因为字符也出现在 html 文档的源代码中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T01:54:24.563

错误消息中的 mysql_native_password 来自 MySQL 客户端连接端口。您正在尝试直接连接到 MySQL 服务。phprestsql 从 Web 服务器运行并访问数据库本身。您可以使用 Web 浏览器通过标准 http 端口 (80) 访问 phprestsql。

尝试以下配置。输入数据库的用户名和密码，然后连接到`http://172.16.2.2/rest/`

```
[settings]
baseURL = "/rest"

[database]
type = "mysql"
server = "localhost"
database = "onthespotpersonnel"
username = ""
password = ""
foreignKeyPostfix = "_uid"

[renderers]
text/xml = xml.php
text/plain = plain.php
text/html = html.php

[mimetypes]
xml = text/xml
txt = text/plain
html = text/html 
```

# php - 不回显正确的值

> ID：10284110
> 
> 赞同：0
> 
> 时间：2012-04-23T16:05:53.577
> 
> 标签：php, codeigniter

我的视图文件中的数组有问题。我正在尝试做的是让它显示每个标题的标题列表和竞争者。截至目前，当我有应该是的值时，它显示 Vacant 作为每个标题的冠军和每个标题的每个竞争者的 TBD工作但不是。

如果 ChampionID 的值在表中为 0，则它应该显示 Vacant，否则它应该获取冠军名称并显示它。对于每个竞争者，如果它在数据库中为 0，那么它应该显示 TBD，如果不是，那么它应该显示他们的名字。

这是查询：

```
/**
 * Get title champions
 *
 * @return  object/NULL
 */
function getTitlesChampions()
{       
    $this->db->select('titlesList.titleName');
    $this->db->select('rosterList.rosterName AS champion');
    $this->db->select('con1.rosterName AS contender1');
    $this->db->select('con2.rosterName AS contender2');
    $this->db->select('con3.rosterName AS contender3');
    $this->db->from('titlesChampions');
    $this->db->join('titlesList', 'titlesList.id = titlesChampions.titlesListID');
    $this->db->join('rosterList', 'rosterList.id = titlesChampions.championID', 'left');
    $this->db->join('rosterList AS con1', 'con1.id = titlesChampions.contender1ID', 'left');
    $this->db->join('rosterList AS con2', 'con2.id = titlesChampions.contender2ID', 'left');
    $this->db->join('rosterList AS con3', 'con3.id = titlesChampions.contender3ID', 'left');
    $query = $this->db->get();
    if ($query->num_rows() > 0) 
    {
        return $query->result();
    }
    return null;
} 
```

titleChampions 表中的值是这样的：

```
id - 1  titlesListID - 1  championID - 1  contender1ID - 1   contender2ID - 1  contender3ID - 1
id - 2  titlesListID - 2  championID - 1  contender1ID - 0   contender2ID - 0  contender3ID - 0
id - 3  titlesListID - 3  championID - 1  contender1ID - 0   contender2ID - 0  contender3ID - 0 
```

我在视图文件中运行数组的 print_r ，这是打印出来的：

```
Array
(
[0] => stdClass Object
    (
        [titleName] => Undisputed Heavyweight Title
        [champion] => Kid Wonder
        [contender1] => Kid Wonder
        [contender2] => Kid Wonder
        [contender3] => Kid Wonder
    )

[1] => stdClass Object
    (
        [titleName] => Outlaw Title
        [champion] => Kid Wonder
        [contender1] => 
        [contender2] => 
        [contender3] => 
    )

[2] => stdClass Object
    (
        [titleName] => Tag Team Titles
        [champion] => Kid Wonder
        [contender1] => 
        [contender2] => 
        [contender3] => 
    )

)

    <?php if (!is_null($titlesChampionsList)) { foreach ($titlesChampionsList AS $champion) { 
                    echo '<tr>'; 
                    echo '<td>'.$champion->id.'</td>'; 
                    echo '<td>'.$champion->titleName.'</td>'; 
                    echo '<td>';
                    if ($champion->champion == 0)
                    {
                        echo 'Vacant';
                    }
                    else {
                        $champion->champion;
                    }
                    echo '</td>'; 
                    echo '<td>';
                    if ($champion->contender1 == 0)
                    {
                        echo 'TBD';
                    }
                    else {
                        $champion->contender1;
                    }
                    echo '</td>'; 
                    echo '<td>';
                    if ($champion->contender2 == 0)
                    {
                        echo 'TBD';
                    }
                    else {
                        $champion->contender2;
                    }
                    echo '</td>'; 
                    echo '<td>';
                    if ($champion->contender3 == 0)
                    {
                        echo 'TBD';
                    }
                    else {
                        $champion->contender3;
                    }
                    echo '</td>'; 
                    echo '<td style="text-align: center">'; 
                    $data = array('name' => 'user', 'value' => $champion->id); 
                    echo '<a href="bios/edituser"><img src='.base_url().'assets/img/icons/packs/fugue/24x24/plus-circle.png /></a>'; 
                    echo '<img src='.base_url().'assets/img/icons/packs/fugue/24x24/cross-circle.png id="delete"/>'; 
                    echo '</td>';
                    echo '</tr>
                    '; } } ?> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:11:18.643

假设该数组实际上是函数返回的内容：

```
foreach ($array as $key => $titleObject) {
    $champion = ($titleObject->champion ? $titleObject->champion : 'Vacant');
    echo $titleObject->titleName.' champion is '.$champion.'<br />';
    $contender1 = ($titleObject->contender1 ? $titleObject->contender1 : 'tbd');
    $contender2 = ($titleObject->contender2 ? $titleObject->contender2 : 'tbd');
    $contender3 = ($titleObject->contender3 ? $titleObject->contender3 : 'tbd');
    echo $titleObject->titleName.' contenders are '.$contender1.', '.$contender2.' and '.$contender3.'<br />';
} 
```

# c# - EF 迁移 - 种子仅在附加到调试器时执行

> ID：10284111
> 
> 赞同：0
> 
> 时间：2012-04-23T16:05:58.553
> 
> 标签：c#, entity-framework, entity-framework-4.1

我正在使用实体框架（4.3）迁移。我有一个正常的配置类，它定义了一个 Seed 方法，它应该在迁移之后调用以添加数据：

```
internal sealed class SettingsConfig : DbMigrationsConfiguration<My.Assembly>
{
    public SettingsConfig()
    {
        AutomaticMigrationsEnabled = false;
    }

    protected override void Seed(ScannerAreaManager.DataAccess.CableSenseLocal context)
    {
        //  This method will be called after migrating to the latest version.
    }
} 
```

我正在运行 SQL Server 探查器来查看数据库发生了什么。

现在，如果我删除数据库，并使用 F5（附加到调试器）从 Visual Studio 运行此应用程序，它会运行，我可以看到数据库已创建，迁移运行，种子方法被调用并将数据添加到数据库

如果我然后删除我的数据库，并使用 Ctrl-F5（未附加到调试器）再次运行应用程序，那么我会看到我的数据库已创建，迁移运行，**但种子方法永远不会被调用。**

这确定不是设计的吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:20:35.910

我的错，这是由于我们的代码在初始化之前尝试从上下文中读取 - 但仅在未在调试模式下运行时。

EF 确实按预期运行 - 在执行迁移后调用种子方法。

# java - Morphia 中的复杂 AND-OR 查询

> ID：10284116
> 
> 赞同：10
> 
> 时间：2012-04-23T16:06:19.170
> 
> 标签：java, mongodb, morphia

我一直在尝试结合 Query 接口的 and() 和 or() 方法来创建一组条件，其中有 2 个条件列表，并且必须满足每个条件中的至少一个。

我阅读[了这个讨论](https://groups.google.com/d/topic/morphia/VQemTMBpQ2Y/discussion)，并一直在尝试使用 Query.and() 来组合我的两个 $or 子句。

本质上，我想说：

```
Criteria[] arrayA;
Criteria[] arrayB;

// Programatically populate both arrays

Query q = dao.createQuery().and(
    q.or(arrayA),
    q.or(arrayB)
); 
```

我正在使用条件数组，因为我必须遍历几个不同的输入来生成我需要的特定条件，并且当我只使用单个 $or 时，这种方法有效，但我无法让 Morphia 生成查询我希望当我尝试在 $and 中包含两个 $or 子句时，正如我上面解释的那样。我发现没有 $and 查询，第二个 $or 覆盖了第一个，就好像我只是调用了 or() 两次。

例如，我希望生成这样的查询：

```
{
    "$and": {
    "0": {
        "$or": {
            "0": //Some criteria,
            "1": //Some criteria,
            "2": //Some criteria,
        }
    },
    "1": {
        "$or": {
            "0": //Some other criteria,
            "1": //Some other criteria,
            "2": //Some other criteria,
        }
    }
} 
```

但是，我只是收到这样的查询：

```
{
    "$or": {
        "0": //Some other criteria,
        "1": //Some other criteria,
        "2": //Some other criteria,
    }
} 
```

我看不到太多文档，但是查看测试用例，这似乎是解决此问题的正确方法。任何人都可以帮助阐明为什么这不能按我的预期工作吗？

（这个问题被[交叉发布到 Morphia 邮件列表](https://groups.google.com/d/topic/morphia/sa-a_JJ_VJM/discussion)，因为我不确定哪个地方会得到最好的回应）

**编辑 0**：

更新：重新审视这一点，我检查了 Morphia 测试代码，一切运行良好，我无法在测试代码中重现我的问题。

因此，我创建了一个新项目来尝试获取我想要的查询的工作示例。但是，即使是准系统测试项目，我也遇到了同样的问题。

该项目是mavenised，POM是：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>test</groupId>
<artifactId>test</artifactId>
<version>0.0.1-SNAPSHOT</version>
<name>Test</name>

<dependencies>
    <dependency>
        <groupId>com.google.code.morphia</groupId>
        <artifactId>morphia</artifactId>
        <version>0.99</version>
    </dependency>
</dependencies>
<dependencyManagement>
    <dependencies>
        <!-- Force the use of the latest java mongoDB driver -->
        <dependency>
            <groupId>org.mongodb</groupId>
            <artifactId>mongo-java-driver</artifactId>
            <version>2.7.3</version>
        </dependency>
    </dependencies>
</dependencyManagement>

</project> 
```

我有一个 TestEntity 类：

```
import java.util.Map;

import com.google.code.morphia.annotations.Entity;

@Entity
public class TestEntity {
    Map<String, Integer> map;
} 
```

最后是我的测试课：

```
import java.net.UnknownHostException;
import java.util.HashMap;
import java.util.Map;

import com.google.code.morphia.Datastore;
import com.google.code.morphia.Morphia;
import com.google.code.morphia.query.Query;
import com.google.code.morphia.query.QueryImpl;
import com.mongodb.Mongo;
import com.mongodb.MongoException;

public class Test {

    static Mongo mongo;
    static Morphia m;
    static Datastore ds;

    static {
        mongo = null;
        try {
            mongo = new Mongo();
        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (MongoException e) {
            e.printStackTrace();
        }
        m = new Morphia();
        ds = m.createDatastore(mongo, "test");
    }

    public static void main(String[] args) {
        populate();
        query();
    }

    public static void query() {
        Query<TestEntity> q = ds.createQuery(TestEntity.class);

        q.and(q.or(q.criteria("map.field1").exists()),
                q.or(q.criteria("map.field2").exists()));

        Iterable<TestEntity> i = q.fetch();
        for (TestEntity e : i) {
            System.out.println("Result= " + e.map);
        }

        QueryImpl<TestEntity> qi = (QueryImpl<TestEntity>) q;
        System.out    
                .println("Query= " +         qi.prepareCursor().getQuery().toString());
    }

    public static void populate() {
        TestEntity e = new TestEntity();
        Map<String, Integer> map = new HashMap<String, Integer>();
        map.put("field1", 1);
        map.put("field2", 2);
        e.map = map;

        ds.save(e);
    }
} 
```

对我来说，上面的代码没有产生正确的 $and 查询，但我不明白为什么

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T16:28:24.243

只是猜测（没有时间测试），但应该是：

```
Query q = dao.createQuery().and(
  q.or(q.criteria(arrayA)),
  q.or(q.criteria(arrayB))
); 
```

**更新**你是对的，`Query.criteria`不是对的——它是在简单测试中使用的，所以我认为你错过了一些东西。这似乎对我有用（将其分为两个语句）：

```
Query q = dao.createQuery();
q.and(
  q.or(arrayA),
  q.or(arrayB)
); 
```

**更新 2**更完整的测试代码：

```
Criteria[] arrayA = {dao.createQuery().criteria("test").equal(1), dao.createQuery().criteria("test").equal(3)};
Criteria[] arrayB = {dao.createQuery().criteria("test").equal(2), dao.createQuery().criteria("test").equal(4)};;
Query q = dao.createQuery();
q.and(
  q.or(arrayA),
  q.or(arrayB)
);
System.out.println(q.toString()); 
```

给出：

```
{ "$and" : [ { "$or" : [ { "test" : 1} , { "test" : 3}]} , { "$or" : [ { "test" : 2} , { "test" : 4}]}]} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-01T11:46:05.963

尽管 Morphia 0.99 包含该`Query.and(Criteria ...)`方法，但它不会生成正确的查询。

[问题 338](https://code.google.com/p/morphia/issues/detail?id=338)解决了对查询中显式*$and*子句的支持，目标是 Morphia 0.99.1，目前只能通过 Maven 作为 SNAPSHOT 版本使用。

但是，使用 0.99.1-SNAPSHOT 为我们解决了这个问题。

# sql-server - 如何以 mm/yyyy 格式在 gridview 列中显示日期？

> ID：10284118
> 
> 赞同：-1
> 
> 时间：2012-04-23T16:06:24.237
> 
> 标签：sql-server, datepart

据我在网上找到的声明

```
SELECT DATEPART(MONTH,columnName),DATEPART(YEAR,columnName) 
```

这样做并在 2 列中列出结果。我需要的是在*单列*中以 mm/yyyy 格式显示来自数据库（MS SQL）的日期。

有没有办法在一列中显示它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:13:16.863

```
SELECT RIGHT('0' + CONVERT(VARCHAR(2), MONTH(columnName)), 2)
  + '/' + CONVERT(CHAR(4), YEAR(columnName))
FROM dbo.tableName; 
```

你也可以这样说：

```
SELECT RIGHT(CONVERT(CHAR(10), columnName, 103), 7)
  FROM dbo.tableName; 
```

在 SQL Server 2012 中，您将能够说：

```
SELECT FORMAT(columnName, 'MM/yyyy') FROM dbo.table; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:12:28.223

由于您明确要求 a `GridView`，因此最好在最后一个位置格式化日期时间。所以我建议使用 .NET 方法作为`String.Format`or `ToString`：

```
String formatted = date.ToString("MM-yyyy"); 
```

*   [标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)
*   [自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)

或使用`BoundField`'s [`DataFormatString`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx)：

```
<asp:GridView ID="GridView1" runat="server">
    <Columns>
       <asp:BoundField DataFormatString="{0:MM-yyyy}" DataField="DateField" HeaderText="Date" ReadOnly="True" />
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:18:34.963

嘿，您可以在 Gridview 中设置格式，如下所示

```
<asp:TemplateField >
     <ItemTemplate>
             <asp:Label Text='<%# Convert.ToDateTime(DataBinder.Eval(Container.DataItem,  "Created_Date ")).ToString("mm-yyyy")%>'
   ID="lblCreatedDate" runat="server"></asp:Label>
    </ItemTemplate>
 </asp:TemplateField> 
```

# javascript - 如何知道页面上有多少个事件监听器

> ID：10284120
> 
> 赞同：23
> 
> 时间：2012-04-23T16:06:32.620
> 
> 标签：javascript

我正在用 Javascript 构建一个相当大的应用程序。它是一个可以更改不同视图的页面。所有的视图都有自己的变量、事件、监听器、元素等。

在处理大型集合和多个事件时，有时最好知道页面上到底发生了什么。

我知道所有的浏览器都有开发者工具，但有时很难点击所有元素等。还有一些我找不到的选项。

我感兴趣的一件事是知道页面上当前监听了多少事件。这样我可以确认我不是在创造僵尸。

如果解决方案是开发人员工具，请让我知道在哪里寻找和做什么。最重要的是，选择哪种浏览器。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2017-08-23T14:32:42.643

只需使用 API`getEventListeners`获取所有事件的信息。请参阅此链接[Chrome 开发工具：查看页面中使用的所有事件侦听器](https://stackoverflow.com/questions/28366849/chrome-dev-tools-view-all-event-listeners-used-in-the-page/45842339#45842339)

> 本回答内容：

Chrome Devtool 无法为您执行此操作。但是您可以使用 chrome 提供的 API 在控制台中检查这些内容：`getEventListeners`

只需将此代码放在您的开发工具控制台中，您就可以在您的页面中获取所有绑定点击事件编号：

```
Array.from(document.querySelectorAll('*'))
  .reduce(function(pre, dom){
    var clks = getEventListeners(dom).click;
    pre += clks ? clks.length || 0 : 0;
    return pre
  }, 0) 
```

结果是这样的：

```
3249 
```

那里有很多点击绑定。绝对不是性能项目的好例子。

如果您想查看页面中所有元素中绑定了哪些事件以及每个事件的侦听器数量，只需将这些代码放入您的开发工具控制台中：

```
Array.from(document.querySelectorAll('*'))
  .reduce(function(pre, dom){
    var evtObj = getEventListeners(dom)
    Object.keys(evtObj).forEach(function (evt) {
      if (typeof pre[evt] === 'undefined') {
        pre[evt] = 0
      }
      pre[evt] += evtObj[evt].length
    })
    return pre
  }, {}) 
```

结果是这样的：

```
{
  touchstart: 6,
  error: 2,
  click: 3249,
  longpress: 2997,
  tap: 2997,
  touchmove: 4,
  touchend: 4,
  touchcancel: 4,
  load: 1
} 
```

您可以从此 API 获得许多其他信息。只是即兴发挥。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-23T17:30:51.060

在 Chrome 中执行此操作的最佳方法是使用[`getEventListeners`](https://developers.google.com/web/tools/chrome-devtools/console/utilities#geteventlisteners)devtools API 的一部分。（注意：这只能由 devtools 中的开发人员访问，页面中的普通脚本无法访问。）

您可以使用`document.querySelectorAll('*')`抓取页面上的所有元素，并逐个运行它们`getEventListeners`以获取它们的事件侦听器。[Mr.Raindrop 的另一个答案](https://stackoverflow.com/a/45842644/710446)有几个关于如何在实践中做到这一点的建议和方法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-23T17:35:34.223

您可以使用 monitorEvents 函数在 Chrome 开发者工具中监控事件。有关所有详细信息，请参阅[http://www.briangrinstead.com/blog/chrome-developer-tools-monitorevents](http://www.briangrinstead.com/blog/chrome-developer-tools-monitorevents)。

# arrays - 数组拼图：分离偶数和奇数

> ID：10284123
> 
> 赞同：0
> 
> 时间：2012-04-23T16:06:43.947
> 
> 标签：arrays, data-structures

[为偶数和奇数分隔数组](https://stackoverflow.com/questions/8514924/segregating-an-array-for-even-and-odd-numbers) 这是重复的，但没有可以保留元素顺序的解决方案，在 O(n) 时间和 O(1) 空间中是否有这样的解决方案。

我可以想到在给定 aove 的重复链接中提到的方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:19:40.760

我对此表示怀疑。

您可以使用链接文章中显示的基本两指针解决方案，但您可以将数组元素向左滑动并将奇数元素放在其位置，而不是交换奇数元素；这是 O(n^2) 时间和 O(1) 空间，与插入排序相同，因为您必须访问每个元素并可能将其滑动到数组的整个长度。

或者，您可以保留 O(n) 时间，但使用 O(n) 空间，方法是两次通过输入数组，在第一次通过时将偶数元素复制到输出数组，在第二次通过时将奇数元素复制到输出数组。

但我看不到同时保留 O(n) 时间和 O(1) 空间的方法。

相反，如果您希望所有元素在其偶数和奇数分区中排序，则可以使用标准系统排序和一个比较函数，该函数仅在较低索引元素*a*为偶数且较高索引元素*b*为奇数时小于或者如果两个元素具有相同的奇偶性并且*a* < *b*；在 C 中是`(a%2==0 && b%2==1) || (a%2==b%2 && a<b)`. 这是排序中堆栈的 O(n log n) 时间和 O(log n) 空间，因此它不会保留原始的时间或空间边界，也不能解决请求的问题。

# visual-studio - 哪种部署方法创建的程序更难

> ID：10284125
> 
> 赞同：0
> 
> 时间：2012-04-23T16:06:59.073
> 
> 标签：visual-studio, matlab, obfuscation, reverse-engineering, cracking

我在 MATLAB 中编写了一个程序，并且正在考虑将程序部署到最终用户的三种方法。第一种方法是将 .m 文件转换为 p 代码，然后将其部署给可以在 MATLAB 中使用 p 代码但自己看不到代码的最终用户。第二种方法涉及使用 MATLAB Compiler 和 MATLAB Builder NE 将 .m 文件编译为 C#，然后使用 Visual Studio 混淆代码并创建最终产品。第三种方法涉及使用 MATLAB Compiler 和 MATLAB Builder EX 创建 Excel 插件，并将 Excel 插件部署给最终用户。

我想知道在我正在考虑的这三种部署方法中的每一种中，对某人进行逆向工程或破解并访问代码有多难。我知道创建一个无法破解或逆向工程的程序基本上是不可能的，但是任何部署方法都比其他方法更难破解吗？我知道 p-code 使最终用户可以访问文件的名称，我猜这可能会帮助某人对您的程序进行逆向工程。

提前感谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:38:28.270

就从已部署版本对代码进行逆向工程的能力而言，这些方法在实践中几乎没有区别。

Builder for .NET 不会将 MATLAB 转换为 C#。MATLAB Compiler 和 Builder 产品存档和加密您的代码，并创建一个小型包装器（.NET 程序集或 Excel 插件），将其解压缩并针对 MATLAB Compiler Runtime 执行它。在执行过程中，虽然仍然是加密的，但在临时目录中可以看到取消归档的文件，因此文件名的可用方式与 p-coding 相同。

P 编码对您来说是最简单和最便宜的，但需要您的最终用户拥有 MATLAB 和您使用的任何工具箱的副本。使用 Compiler 和/或 Builder 产品部署的产品不需要它们拥有任何东西，但您需要购买这些产品，并且部署过程稍微复杂一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T16:13:54.003

我最终就这个问题打电话给 MathWorks。MathWorks 工程师告诉我，他不允许告诉我加密的类型，因为它是专有信息。

我还询问了 MathWorks 工程师 Compiler and Builder EX 或 Builder NE 使用哪种加密方式。他说这使用 128 位 AES 加密来加密 m 文件，但您的程序中使用的其他类型的文件没有像 .dll 或图片文件那样加密。

然后我问哪个具有更强的加密、p-code 或部署的程序使用 Compiler 和 Builder。他说很难说，因为它们是不同类型的加密，但在使用 Compiler 和 Builder 之前，您实际上可以将您的 .m 文件转换为 p-code，从而使使用 Compiler 和 Builder 部署的保护产品至少与 p-代码。

# asp.net - 访问 gridview 列中的超链接

> ID：10284128
> 
> 赞同：2
> 
> 时间：2012-04-23T16:07:12.400
> 
> 标签：asp.net, vb.net, gridview

我将此模板字段添加到 gridview 列，并且需要从后面代码中的列访问值，即电子邮件地址。我最初添加了一个 DataKeyNames，但这只会提取第一个记录值。通过循环运行时，它似乎没有为每条记录选择值。

我想将电子邮件添加到标签中，以便我可以使用 FindControl 语句，除非有人知道更简单的方法。我无法让电子邮件超链接显示在标签中。除了无法读取电子邮件地址之外，没有标签标签也可以正常工作。

```
<asp:TemplateField HeaderText="Email">
    <ItemTemplate>      
        <a href="mailto:<%# Eval("email") %>"><%#Eval("email")%> </a>     
    </ItemTemplate>
</asp:TemplateField> 
```

尝试过的变体：

```
<asp:TemplateField HeaderText="Email">
    <ItemTemplate> 
        <asp:Label ID="Email99" runat="server" <a href="mailto:<%# Eval("email") %>"><%#Eval("email")%> </a> ></asp:Label>
    </ItemTemplate>
</asp:TemplateField> 
```

在内联代码中不显示任何错误，只是报告：解析器错误消息：服务器标记格式不正确。

更新：这是将 HyperLinkField 添加到列后的 ASP

```
<Columns>     
   <asp:BoundField DataField="usersLogonName" HeaderText="Logon Name" >
       <ControlStyle Width="50px" />
   </asp:BoundField>
   <asp:BoundField DataField="userDBLanguage" HeaderText="Language" >
       <ControlStyle Width="30px" />
   </asp:BoundField>

   <asp:HyperLinkField runat="server" DataNavigateUrlFields="email" DataNavigateUrlFormatString="mailto:{0}" DataTextField="email" />     

   <asp:BoundField DataField="LastActivityDate" HeaderText="Last Activity" />                                                                                                              
</Columns> 
```

这行代码从 James Johnson 提供的 Templated Field 解决方案中读取值...

```
 Dim emailAdd As String = GridView4.DataKeys(dr.RowIndex)("Email") 
```

如果这个线程被解锁，他值得称赞。

这是一个使用 VB.net 的 ASP 页面

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:24:24.307

使用`HyperLinkField`：

```
<asp:GridView ID="GridView1" runat="server" ...>
    <Columns>
        <asp:HyperLinkField DataNavigateUrlFields="email" DataNavigateUrlFormatString="mailto:{0}" DataTextField="email" />
    </Columns>
</asp:GridView> 
```

如果您遇到上述问题，您可以使用`TemplateField`带有`HyperLink`控件的 a：

```
<asp:TemplateField HeaderText="Email"> 
    <ItemTemplate>
        <asp:HyperLink runat="server" Text='<%# Eval("email") %>' NavigateUrl='<%# string.Format("mailto:{0}", Eval("email"))%>' />
    </ItemTemplate>
</asp:TemplateField> 
```

# c# - List 中 int 的总和范围

> ID：10284133
> 
> 赞同：77
> 
> 时间：2012-04-23T16:07:31.920
> 
> 标签：c#, list, sum

我认为这将是微不足道的，但我不知道该怎么做。我有一个`List<int>`，我想对一系列数字求和。

说我的清单是：

```
var list = new List<int>()
{
    1, 2, 3, 4
}; 
```

我将如何获得前 3 个对象的总和？结果是 6。我尝试使用`Enumerable.Range`但无法让它工作，不确定这是否是最好的方法。

不做：

```
int sum = list[0] + list[1] + list[2]; 
```

* * *

## 回答 #1

> 赞同：129
> 
> 时间：2012-04-23T16:08:44.977

您可以使用[`Take`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)&来完成此操作[`Sum`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.sum.aspx)：

```
var list = new List<int>()
{
    1, 2, 3, 4
};

// 1 + 2 + 3
int sum = list.Take(3).Sum(); // Result: 6 
```

如果要对从其他地方开始的范围求和，可以使用[`Skip`](http://msdn.microsoft.com/en-us/library/bb358985.aspx)：

```
var list = new List<int>()
{
    1, 2, 3, 4
};

// 3 + 4
int sum = list.Skip(2).Take(2).Sum(); // Result: 7 
```

[`OrderBy`](http://msdn.microsoft.com/en-us/library/bb534966.aspx)或者，使用or重新排序您的列表[`OrderByDescending`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderbydescending.aspx)，然后求和：

```
var list = new List<int>()
{
    1, 2, 3, 4
};

// 3 + 4
int sum = list.OrderByDescending(x => x).Take(2).Sum(); // Result: 7 
```

如您所见，有多种方法可以完成此任务（或相关任务）。有关更多信息，请参阅[`Take`](http://msdn.microsoft.com/en-us/library/bb503062.aspx)、[`Sum`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.sum.aspx)、和文档。[`Skip`](http://msdn.microsoft.com/en-us/library/bb358985.aspx)[`OrderBy`](http://msdn.microsoft.com/en-us/library/bb534966.aspx)[`OrderByDescending`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderbydescending.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2020-05-18T10:35:34.380

或者只是使用 Linq

```
int result = list.Sum(); 
```

总结前三个要素：

```
int result = list.GetRange(0,3).Sum(); 
```

# c# - webBrowser1.InvokeScript 中的错误

> ID：10284138
> 
> 赞同：0
> 
> 时间：2012-04-23T16:07:50.193
> 
> 标签：c#, wpf, com, tinymce

我正在 WPF 的 WebBrowser 控件中加载一个带有 TinyMCE 编辑器的 html 网页。您可以通过以下屏幕截图获得想法： [输出快照](http://s8.postimage.org/aleydu1n9/output.png)

为了访问在 TinyMCE 中以原始 html 格式输入的文本，我在 html 页面中编写了这个 javascript 函数：

```
 function getContent() {
    return tinyMCE.get('elm1').getContent();
 } 
```

我在 WPF 按钮单击时调用此函数，如下所示：

```
 string editHtml = this.webBrowser1.InvokeScript("getContent").ToString(); 
```

并且 editHtml 根据需要抓取在 TinyMCE 中输入的文本的 html。现在我想通过C#代码在网页中设置tinyMCE的html。

因此，我在 html 页面上编写了 javascript 函数：

```
function setContent(strcontent) {
    return tinyMCE.get('elm1').setContent(strcontent);
} 
```

我尝试在 WPF 按钮单击时调用此函数，如下所示：

```
string setHtml = this.webBrowser1.InvokeScript("setContent('tempinfo')").ToString(); 
```

但现在我得到一个错误如下： [错误快照](http://s16.postimage.org/g7ra8rnph/err.png)

请注意第一张图中 WebBrowser 控件中 tinymce 下方的小按钮。它调用相同的 setContent() 如下：

```
<input type="button" onmousedown="setContent('tempinfo')" /> 
```

这会将 tinymce 内容设置为 text: tempinfo - 根据需要。那么为什么通过WPF按钮点击调用时会出现错误呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T20:13:37.070

上面代码中的第一个错误是 InvokeScript 只接受方法名称 - 没有括号：

```
string setHtml = this.webBrowser1.InvokeScript("setContent").ToString(); 
```

接下来我应该通过使用传递参数

```
WebBrowser.InvokeScript Method (String, Object) 
```

[看这里](http://msdn.microsoft.com/en-us/library/cc452443.aspx)

所以我的电话现在看起来像这样：

```
this.webBrowser1.InvokeScript("setContent","Just done").ToString(); 
```

# android - 将配置文件存储到谷歌帐户的地方

> ID：10284139
> 
> 赞同：1
> 
> 时间：2012-04-23T16:07:51.870
> 
> 标签：android

因此，有一个应用程序安装在多个设备上，所有设备都连接到同一个 Google 帐户。假设我希望他们共享相同的配置文件或日志文件，以便连接到同一个 Google 帐户的每个手机都可以读取和写入它。谷歌妈妈是否提供了用她的 api 来做这件事的可能性？我想知道在谷歌文档上做这件事，但我更喜欢这个文件对用户隐藏，但是任何建议都将不胜感激！

# php - 如何将正则表达式用于静态 HTML 代码 (PHP)

> ID：10284140
> 
> 赞同：0
> 
> 时间：2012-04-23T16:07:59.517
> 
> 标签：php, regex

我是 Regualr Expressions 的新手，但我还没有掌握它的窍门。

我已经使用 CURL 和 PHP 从给定网页中抓取了 html 内容。这个网页**永远不会**改变它的结构。页面上的结果取决于搜索功能，但 html 标签始终相同。我需要根据输入的搜索词从页面中获取结果数据。

我需要的数据是：

`<h1 class="location_only">(555) 555-5555 is a Landline</h1>`

所以我需要抓住两者之间的任何东西

`<h1 class="location_only">`和`</h1>`

如果我有`$data`，这是生成的 HTML，我如何将它放入正则表达式并将我找到的数据回显为`$result`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:16:22.570

[请不要使用正则表达式来解析 HTML。](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)

请使用 HTML 解析器，例如[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)。您的问题可能看起来是本地化的，但事实并非如此。即使是这样，这种类型的问题也很容易在以后扩大范围，即使你可以让它与正则表达式一起工作，这也会让你非常头疼。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:20:32.467

您可以使用此搜索模式在标签之间选择文本：

```
<span id="result1">(.*?)</span> 
```

如果您的代码是：`<span id="result1">(555) 555-5555 is a Landline</span>`.

有关如何回显结果的更多信息，请参见[preg_match() 。](http://php.net/manual/en/function.preg-match.php)

还可以像其他人建议的那样查看 HTML DOM Parser。也许我根本不应该回答...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T17:08:01.413

您已经被警告过**不要使用正则表达式来解析 HTML**。所以这是一个基于 DOM 解析器的代码来提取你的值：

```
$html = <<< EOF
<html>
<head>
<title>Some Title</title>
</head>
<body>
<H1 class="location_only">(555) 555-5555 is a Landline</H1>
</body>
</html>
EOF;
$doc = new DOMDocument();
libxml_use_internal_errors(true);
$doc->loadHTML($html); // loads your html
$xpath = new DOMXPath($doc);
$value = $xpath->evaluate("string(//h1[@class='location_only']/text())"); 
echo "Your H1 Value=[$value]\n"; // prints text between <h1> and </h1> 
```

**输出：**

```
Your H1 Value=[(555) 555-5555 is a Landline] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T16:17:52.793

告诉您不要使用正则表达式而是使用 DOM 解析器的两个答案都是正确的，但是，如果页面的结构没有改变，那么一个快速而肮脏的正则表达式就可以很好地解决问题，因为您有绝对好的开始和参考的终点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T16:15:21.123

您无法使用正则表达式从 HTML 中可靠地提取信息。但是，您可以使用 HTML 解析器，例如[DOMDocument::LoadHTML](http://docs.php.net/manual/en/domdocument.loadhtml.php)。这将从字符串中获取您的 HTML，然后您可以使用[getElementById](http://docs.php.net/manual/en/domdocument.getelementbyid.php)或[getElementByTagName](http://docs.php.net/manual/en/domdocument.getelementsbytagname.php)等函数来查找您的值。还有其他的 HTML 解析器。

# parsing - 寻找有关我正在构建的解析器的运算符关联性和优先级的学习资源

> ID：10284141
> 
> 赞同：0
> 
> 时间：2012-04-23T16:08:05.100
> 
> 标签：parsing, syntax, operators, operator-precedence, parboiled

我正在使用[Parboiled](https://github.com/sirthias/parboiled/wiki)为搜索语法构建解析器，该语法具有多个优先级和关联性不同的运算符。因为这将是我的第一个解析器，所以很高兴看到一些很好的例子来说明优先级和关联性是如何处理的。此外，我们还有一些不寻常的运算符，它们似乎没有关联性，类似于 Python 的三元`<`运算符（例如`a<b<c`=> `(a<b)&&<b<c>`）。

您能否指导我找到有关解析不同关联性和优先级的运算符的良好资源和示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T10:04:41.167

有关如何执行此操作的示例，请参阅[计算器示例。](https://github.com/sirthias/parboiled/tree/master/examples-java/src/main/java/org/parboiled/examples/calculators)

# database-design - 如何改进数据库设计？

> ID：10284142
> 
> 赞同：0
> 
> 时间：2012-04-23T16:08:09.037
> 
> 标签：database-design

我正在开发一个小型音乐网站。我是一名前端开发人员，对数据库的了解不多。我想出了这个网站的数据库设计。你能建议改进它吗？

我可能有几个问题是..

*   如何更改它以支持多位艺术家对一首歌曲？
*   歌曲表中可以有专辑还是必须是单独的表？我认为我没有任何其他关于专辑的内容要存储，但将专辑放在歌曲表中是否不切实际？

非常感谢。

![在此处输入图像描述](../Images/58071bc96d4b23702097a2549671465f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T19:18:02.743

在我的脑海中，我可能会选择这样的东西：

![在此处输入图像描述](../Images/6d733ebb611c349119a9e9b0bc5b739b.png)

该数据模型具有以下特点：

*   歌曲和艺术家之间存在多对多的关系（通过中间的“链接”表实现：SONG_ARTIST）。
*   专辑在单独的表格中。如果您想要的只是专辑名称，这并不是特别重要，但我假设您稍后会想要更多字段。
*   SONG_NAME 和 ALBUM_NAME**不是**它们各自表中的键 - 可能有多个歌曲（或专辑）具有相同的名称。
*   另一方面，GENRE_NAME 是一个（备用）键。
*   ARTIST_NAME 是否应该是备用键是值得怀疑的。我选择在我的模型中这样做，但这需要你为在现实生活中碰巧有相同名字的艺术家“发明”不同的名字。也许更好的方法是还要求出生日期或地点，尽管这也有潜在的问题......
*   PLAYLIST_NAME 包含在播放列表的主键中，因此单个用户可以拥有多个播放列表。由于 PLAYLIST 没有“子”关系，因此无需引入“PLAYLIST_ID”等代理键。
*   除了普通的 PASSWORD，还有 PASSWORD_HASH 和 PASSWORD_SALT（以阻止[“彩虹”攻击](https://stackoverflow.com/questions/420843/how-does-password-salt-help-against-a-rainbow-table-attack)）。
*   命名约定对实体名称使用单数，这更符合可在[此处](http://tangra.si.umich.edu/~radev/654/resources/ERMGALL.PDF)找到的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:14:04.310

对于一首歌曲的多个艺术家，您可以有一个单独的表，其中每一行都有该歌曲中艺术家的歌曲 ID 和艺术家 ID，因此带有多个艺术家的歌曲的 ID 将有一行带有该歌曲 ID 的每个艺术家。典型的 N 对 N 关系构建。

至于将专辑（可能是名称）放在歌曲表中，如果您没有关于专辑的任何其他信息，那么它在自己的表中看起来有点傻。但是，只要您拥有除名称以外的任何专辑特定信息（例如，专辑的发行日期可能与其单首歌曲的发行日期不同；此外，一首歌曲可以出现在多个专辑中），您会有麻烦了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T16:17:07.753

如果您想让一首歌曲有多个艺术家，您需要在艺术家和歌曲之间有另一个表，其中包含一首歌曲和一个艺术家 ID。

我还建议为专辑制作一个自己的表格，如果您实际上没有任何东西可以存储在其中，因为编辑标题名称非常容易，您可以在一个地方完成。而且我可以想象将图像存储到相册中会很有趣；）

此外，尽管用户名是唯一的，但通常总是使用整数作为主键。

# ruby-on-rails - Rails 中的类型类

> ID：10284143
> 
> 赞同：0
> 
> 时间：2012-04-23T16:08:12.740
> 
> 标签：ruby-on-rails, oop

我有一个 Ruby 1.9.3 on Rails 3.2.2 应用程序，我正在处理许多需要包含类型的 has_many 关联。例如：

*   用户有很多飞机。飞机属于某种类型（塞斯纳 172）。
*   用户有许多许可证。执照属于某种类型（私人飞行员执照）。
*   许可证 has_many 评级。额定值属于某种类型（单引擎活塞级额定值）。

我的问题是命名所有这些类。现在用户上的关联被命名为`Aircraft`,`License`和`Rating`，但这仍然需要我命名类型类。我最初将它们命名为，`AircraftType`但这对我来说很臭。`LicenseType``RatingType`

现在我在一个专门的模块中拥有所有这些类型类`Types`，所以我的类型类现在被命名了，`Types::Aircraft`但是我不确定这是否会让我在路上遇到麻烦，因为我一直听说 Rails 中对命名空间的支持存在问题。`Types::License``Types::Rating`

这类问题是否有惯例或标准做法？

**更新：**

因为飞机类型列表会定期更新，所以我需要将这些放在数据库中。虽然许可证类型和等级的更改频率较低，但如果我需要添加、更改或删除任何内容，我仍然希望它们存在于数据库中。这种排除在类本身中静态定义它们的可能性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:50:37.387

您可以将模型中的类型作为类方法放入，因为它们与模型紧密相关。就像是：

```
class Aircraft < ActiveRecord::Base
  def self.XTypes
     ['Cessna 172','Cessna 152','Boeing 747']
  end
end 
```

只是不要使用“类型”，因为 rails 为单表继承保留了它，实际上“类型”甚至可能是危险的，但是，对于所有具有类型的模型，保持属性名称相同会​​很好，这至少打开了 DRYer 代码的可能性，您可以在所有具有 XType 的模型之间共享一些代码，例如在为任何具有 XType 的模型创建选择元素的视图助手中。

因此，通常您会像这样使用 XType：

```
<%= f.select 'xtype', Aircraft.XTypes %> 
```

XType 的列表越大，它们就越容易进行修订/添加/删除，您可能应该考虑将它们放在一个单独的模型中并用 has_one 关系将它们链接起来，但如果它们是相当静态的，则上述方法将可能没问题。

更新：

我认为单表继承可能是门票，或者只是一个简单的 has_one 关系。但听起来您想将所有这些类型浓缩为一个实体，因此您可能需要 STI

```
class mytype < ActiveRecord::Base; end
class AircraftType < mytype; end
class LicenseType < mytype; end 
```

您只需在 mytype 模型中添加一个名为“type”的字符串属性，并用值“AircraftType”或“LicenseType”填充它。现在您有了一个可以容纳所有类型的模型，即，如果您正在编辑许可证记录，并且想要选择 LicenseTypes 元素，您可以这样做：

```
<%= f.select 'type', LicenceType.all().map {|t|, [t.id, t.description] } 
```

如果您正在编辑飞机：

```
<%= f.select 'type', AircraftType.all().map {|t|, [t.id, t.description] } 
```

这假设基本 mytype 模型具有属性“描述”

# nagios - 主机和服务的 Nagios 通知

> ID：10284144
> 
> 赞同：1
> 
> 时间：2012-04-23T16:08:23.620
> 
> 标签：nagios

我想将 Nagios 配置为在 HostA 或 HostA 上的任何服务出现问题时向 UserA 发送警报。第一部分 - 当 HostA 出现问题时 - 很简单，但是当给定主机（或主机组）上的任何服务出现问题时，我看不到如何向给定用户发送警报。要清楚：

如果 HostA 上的任何服务有问题，请通知 UserA
如果 HostB 上的任何服务有问题，请通知 UserB

任何指示或想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T01:40:32.943

在服务定义中，您需要设置contact_groups（并在其他地方定义组）。这是一个例子：

```
define service{
    name                            A-service ; The 'name' of this service template
    active_checks_enabled           1       ; Active service checks are enabled
    passive_checks_enabled          1       ; Passive service checks are enabled/accepted
    parallelize_check               1       ; Active service checks should be parallelized
    obsess_over_service             1       ; We should obsess over this service (if necessary)
    check_freshness                 0       ; Default is to NOT check service 'freshness'
    notifications_enabled           1       ; Service notifications are enabled
    event_handler_enabled           1       ; Service event handler is enabled
    flap_detection_enabled          1       ; Flap detection is enabled
    failure_prediction_enabled      1       ; Failure prediction is enabled
    process_perf_data               1       ; Process performance data
    retain_status_information       1       ; Retain status information across program restarts
    retain_nonstatus_information    1       ; Retain non-status information across program restarts
    notification_interval           0       ; Only send notifications on status$
    is_volatile                     0
    check_period                    24x7
    normal_check_interval           5
    retry_check_interval            1
    max_check_attempts              4
    notification_period             24x7
    notification_options            w,u,c,r
    contact_groups                  A_only  ; >>>Here's the magic you need<<<
    register                        0       ; DONT REGISTER THIS DEFINITION - ITS NOT A REAL SE$
}
# for contact config file
define contactgroup{
    contactgroup_name       A_only
    alias                   APeople
    members                 APerson1, APerson2
} 
```

对于 B 组，将 A_only 更改为 B_only 并创建一个新的联系人组。

# ios - UITableView iOS

> ID：10284145
> 
> 赞同：0
> 
> 时间：2012-04-23T16:08:24.830
> 
> 标签：ios, uitableview

我有一个包含 5 个部分的表格视图，每个部分仅包含 1 行，每行显示一个自定义单元格。一切正常，但第 0 节在第 4 节重复，我无法追踪到这一点。这是我的代码。

```
-(void) setUpActivityView {
    [self createViews];
}

#pragma  mark Table View methods
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return 5;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return 1;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

    if (indexPath.section == 0) { 
        return 167;
    }
    else if (indexPath.section == 1) {
        return 200;
    }
    else if (indexPath.section == 2) {
        return 115;
    }
    else if (indexPath.section == 3) {
        return 90;
    }
    else {
        return 155;
    }

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"customCellIdentifier";

    if (indexPath.section == 0 && indexPath.row == 0) {
        _notificationCell = (NotificationsCustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (_notificationCell == nil) {
            _notificationCell = [[[NotificationsCustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

        }

        _notificationCell.selectionStyle = UITableViewCellSelectionStyleNone;

        return _notificationCell;
    }
    else if (indexPath.section == 1 && indexPath.row == 0) {
         _topMatchCell = (TopMatchCustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (_topMatchCell == nil) {
            _topMatchCell = [[[TopMatchCustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];   
        }

        _topMatchCell.selectionStyle = UITableViewCellSelectionStyleNone;

        return _topMatchCell;
    }
    else if (indexPath.section == 2 && indexPath.row == 0) {
        _recentlyViewedCell = (RecentlyViewedHomesCustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (_recentlyViewedCell == nil) {
            _recentlyViewedCell = [[[RecentlyViewedHomesCustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        }

        _recentlyViewedCell.selectionStyle = UITableViewCellSelectionStyleNone;

        return _recentlyViewedCell;
    } else if (indexPath.section == 3 && indexPath.row == 0) {
        _feedbackCell = (FeedbackCustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (_feedbackCell == nil) {
            _feedbackCell = [[[FeedbackCustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        }

        _feedbackCell.selectionStyle = UITableViewCellSelectionStyleNone;

        return _feedbackCell;
    }
    else {
        _activityTimeLineCell = (ActivityTimeLineCustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (_activityTimeLineCell == nil) {
            _activityTimeLineCell = [[[ActivityTimeLineCustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
        }

        _activityTimeLineCell.selectionStyle = UITableViewCellSelectionStyleNone;

        return _activityTimeLineCell;
   }
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

}

- (void)initializeSubViews {
    _mainTableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 320, 412) style:UITableViewStylePlain];
}

- (void)configureLayoutOfSubViews {
    self._mainTableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"Home_Setup1-bg.png"]];
//    UIColor *lSeperatorColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"line_bg.png"]];
//    [self._mainTableView setSeparatorColor:lSeperatorColor];
}

- (void)setStylesForSubViews {
    _mainTableView.separatorStyle = UITableViewCellSeparatorStyleNone;
    _mainTableView.showsVerticalScrollIndicator = NO;
    _mainTableView.scrollsToTop = NO;
}

- (void)setStateForSubViews {

}

- (void)registerTargets {
    _mainTableView.delegate = self;
    _mainTableView.dataSource = self;
}

-(void)addToParentsView {
     [self addSubview:_mainTableView];
}

-(void) createViews {
    [self initializeSubViews];
    [self configureLayoutOfSubViews];
    [self setStylesForSubViews];
    [self setStateForSubViews];
    [self registerTargets];
    [self addToParentsView];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:18:28.797

对不同的单元格使用不同的单元格标识符。随着新单元格滚动到您的视图中，滚动出视图的旧单元格将根据您在出列时提供的标识符被重用。

让我猜猜，加载时您的第五个单元格不在您的视野范围内？

# dojo - 断开日期时间框的道场事件

> ID：10284146
> 
> 赞同：0
> 
> 时间：2012-04-23T16:08:28.970
> 
> 标签：dojo

我想断开 datetimebox (_onBlur) 的事件。它在文件“TextBox.js”中提到。'dojo.disconnect' 适用于我在 javascript 中定义的自定义事件。但我想对 dojo 小部件本身做同样的事情。我无法断开在 dojo 小部件 (Textbox.js) 中声明的事件 (_onBlur)。

下面是 Textbox.js 小部件中的声明.. 我应该如何声明下面的事件永远不会调用的断开事件???.. 下面的代码再次来自小部件 & 它不是我的代码.. 使用 dojo.disconnect 我能够在我的自定义 js 文件中声明的断开事件，但我无法断开在 dojo 库附带的小部件 js 文件中声明的以下事件。请建议

_onBlur：函数（e）{

```
 this._setBlurValue(); 
```

this.inherited(参数);

```
 if(this._selectOnClickHandle){
            this.disconnect(this._selectOnClickHandle);
        }
        if(this.selectOnClick && dojo.isMoz){
            this.textbox.selectionStart = this.textbox.selectionEnd = undefined; // clear selection so that the next mouse click doesn't reselect
        }

        this._updatePlaceHolder();

}, 
```

* * *

Simon，我想要它，因为当我们想用我们自己的自定义事件覆盖 dojo 内置事件时，拥有它是有利的。示例是当您使用 dojo 网格并使用箭头键（上、右、下..）时，单元格被突出显示（虚线围绕单元格）指示当前单元格......现在如果您想禁用，即保持单元格突出显示有一段时间可以说您在该单元格上显示编辑/文本，但是如果用户再次尝试按箭头键，您将看到虚线仍在旋转，您不想要...最简单的方法是禁用/断开此事件绑定到网格的案例事件是“doKeyEvent”，它侦听关键事件并执行单元格的 hghlgt。我已经通过按键和其他事件来抵消或取消网格正在做的事情，但仍然......最简单的是禁用/断开连接网格事件本身 &

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:23:44.170

Dojo disconnect 仅适用于 dojo.connect 添加的事件。我不认为你可以做你想做的事。为什么你需要这样做，也许还有另一种方法可以解决你的问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-02T08:15:56.147

正如 Simon 指出的那样，Dojo 断开连接仅适用于 dojo.connect 添加的事件。

但是解决您的问题的方法可能是覆盖该`onBlur()`函数，使其不会执行，例如：

```
this.onBlur = function(){
    return false;
} 
```

# opengl - 在 openGL 中获取模型矩阵

> ID：10284147
> 
> 赞同：-5
> 
> 时间：2012-04-23T16:08:36.263
> 
> 标签：opengl

我知道现在无法通过openGL中的命令获取模型矩阵。但我的应用程序的请求需要使用这个矩阵。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:15:46.693

其实有一种获取方式：

```
GLdouble modelview[16];

glGetDoublev( GL_MODELVIEW_MATRIX, modelview ); 
```

希望能帮助到你。

# c++ - 循环遍历具有引用数组的类成员（C++）

> ID：10284158
> 
> 赞同：1
> 
> 时间：2012-04-23T16:09:06.187
> 
> 标签：c++, arrays, class, reference, member

我想遍历一组相同类型的成员。这是一个有时有效，有时无效的解决方案：

```
#include <iostream>
#include <vector>
class Test{
   public:
      Test():xmin(0),ymin(0),xmax(0),ymax(0),acs((vector<int> (&)[4])xmin){};
      vector<int> xmin,ymin,xmax,ymax;
      vector<int> (&acs)[4];
};
int main(){
   Test t;
   t.xmin.push_back(2);
   cout << t.xmin.size() << "=!=" <<t.acs[0].size() << endl;
} 
```

上面的测试代码对我有用。在我现在做的一个更大的程序中它没有，ietymin 似乎与 t.acs[1] 不一样等等。上述结构一般有意义还是我应该完全不同？

在此先感谢，托马斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:49:11.260

您可以使用指向成员的指针数组。这种方式可能是最快的（似乎它对您很重要），但有点晦涩，您必须再次提及您的成员变量列表。

```
#include <iostream>
#include <vector>

struct Test
{
    std::vector<int> xmin,ymin,xmax,ymax;

    std::vector<int>& GetByIndex(int index)
    {
        typedef std::vector<int> Test::*ptr_to_member; // typedef makes syntax less crazy

        static const ptr_to_member pointers[4] = {
            &Test::xmin, &Test::ymin, &Test::xmax, &Test::ymax
        };

        return this->*pointers[index];
    }
};

int main(){
    Test t;
    t.xmin.push_back(2);
    std::cout << t.xmin.size() << "=!=" << t.GetByIndex(0).size() << '\n';
} 
```

如果您不需要速度，一个非常简单的解决方案涉及一个开关：

```
std::vector<int>& GetByIndex(int index)
{
    switch (index) {
    case 0: return xmin;
    case 1: return ymin;
    case 2: return xmax;
    case 3: return ymax;
    default: abort();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:17:45.180

Mike Seymour - 绝对正确 - 你的解决方案很危险。

尝试注入以下内容：

```
class Test
{
    struct AllArrays
    {
        vector<int> * vec1, .... * vecN;
    };
    union 
    { 
        AllArrays _as_fields;
        vector<int> * _as_Array[];
    } _allTogether;
}; 
```

您需要为此编写一点长限定符的有效负载：

```
Test t;
t._allTogether._as_fields.vec1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:19:23.123

这是非常糟糕的做法。特别是，您依赖于[填充](http://en.wikipedia.org/wiki/Data_structure_alignment)细节。不能保证编译器会在没有任何填充的情况下对数据成员进行布局。如果您的*意思是*数组，请*使用*数组。我的2c...

# sql - SQL Server：检查 WHERE 子句的变量是否为空或 NULL

> ID：10284164
> 
> 赞同：37
> 
> 时间：2012-04-23T16:09:17.867
> 
> 标签：sql, sql-server, if-statement, where-clause

搜索产品列表时，该`@SearchType`参数是可选的。如果`@SearchType`为空`NULL`，则应返回所有产品且不使用该`WHERE`子句。否则，如果它通过`Equipment`了，它将使用它来代替。

```
ALTER PROCEDURE [dbo].[psProducts] 
    (@SearchType varchar(50))
AS
BEGIN
    SET NOCOUNT ON;

    SELECT 
        P.[ProductId],
        P.[ProductName],
        P.[ProductPrice],
        P.[Type]
    FROM [Product] P
    -- if @Searchtype is not null then use the where clause
    WHERE p.[Type] = @SearchType
END 
```

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-04-23T16:10:50.600

只需使用

如果 @searchType 为 null 表示“返回整个表”，则使用

```
WHERE p.[Type] = @SearchType OR @SearchType is NULL 
```

如果@searchType 是一个空字符串，则表示“返回整个表”，然后使用

```
WHERE p.[Type] = @SearchType OR @SearchType = '' 
```

如果 @searchType 为 null 或空字符串表示“返回整个表”，则使用

```
WHERE p.[Type] = @SearchType OR Coalesce(@SearchType,'') = '' 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-04-23T16:19:33.880

如果您不想在不想搜索时传递参数，那么您应该使参数成为可选参数，而不是假设`''`和`NULL`是同一件事。

```
ALTER PROCEDURE [dbo].[psProducts] 
(
  @SearchType varchar(50) = NULL
)
AS
BEGIN
  SET NOCOUNT ON;

  SELECT P.[ProductId]
  ,P.[ProductName]
  ,P.[ProductPrice]
  ,P.[Type]
  FROM dbo.[Product] AS P
  WHERE p.[Type] = COALESCE(NULLIF(@SearchType, ''), p.[Type])
  OPTION (RECOMPILE);
END
GO 
```

现在，如果您传递`NULL`一个空字符串 ( `''`)，或者省略参数，则 where 子句将基本上被忽略。

我添加`OPTION (RECOMPILE)`以演示使用正确*的*参数值可以进行搜索，并提供索引充分覆盖查询，但是如果编译发生在`NULL`（整个表）或返回太多行以进行搜索的参数值，则搜索是非常不可能的值得。试试看。

[![在此处输入图像描述](../Images/eec6c07a269e6d82f1ba862c7ce73362.png)](https://i.stack.imgur.com/BTyL0.png)

但实际上，在不应该出现扫描时往往会导致扫描的可选参数几乎肯定应该使用动态 SQL 的组合来处理，对于数据倾斜可能成为问题的参数，`OPTION (RECOMPILE)`. 在这里查看我的“厨房水槽”方法，并试一试：

*   [更新的厨房水槽示例](https://www.sentryone.com/blog/aaronbertrand/backtobasics-updated-kitchen-sink-example)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-23T16:12:41.717

```
WHERE p.[Type] = isnull(@SearchType, p.[Type]) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-22T11:55:42.303

旧帖子，但值得一看像我这样偶然发现的人

```
ISNULL(NULLIF(ColumnName, ' '), NULL) IS NOT NULL

ISNULL(NULLIF(ColumnName, ' '), NULL) IS NULL 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-19T07:15:53.197

如果你可以使用一些动态查询，你可以使用`LEN`. 它将在空字符串和空字符串上都给出错误。通过这种方式，您可以实现选项参数。

```
ALTER PROCEDURE [dbo].[psProducts] 
(@SearchType varchar(50))
AS
BEGIN
    SET NOCOUNT ON;

DECLARE @Query nvarchar(max) = N'
    SELECT 
        P.[ProductId],
        P.[ProductName],
        P.[ProductPrice],
        P.[Type]
    FROM [Product] P'
    -- if @Searchtype is not null then use the where clause
    SET @Query = CASE WHEN LEN(@SearchType) > 0 THEN @Query + ' WHERE p.[Type] = ' + ''''+ @SearchType + '''' ELSE @Query END   

    EXECUTE sp_executesql @Query
    PRINT @Query
END 
```

# android - 我可以更改 TimePickerDialog 中“设置”按钮的标签吗？

> ID：10284165
> 
> 赞同：2
> 
> 时间：2012-04-23T16:09:19.070
> 
> 标签：android, button, datetimepicker

默认情况下，您有“设置”和“取消”，我想将“设置”标签更改为“查找”。

可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:31:34.690

尝试

```
yourTimePickerDialog.setButton(BUTTON_POSITIVE, "Find", yourTimePickerDialog); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T16:43:03.673

```
TimePickerDialog tp = new TimePickerDialog(this, mTimeSetListener, 0, 0, false);
tp.setButton(DialogInterface.BUTTON_POSITIVE, "OK", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which)
    {
        if (which == DialogInterface.BUTTON_POSITIVE)
        {
        }
    }
});
tp.setButton(DialogInterface.BUTTON_NEGATIVE, "Cancel", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which)
    {
        if (which == DialogInterface.BUTTON_NEGATIVE)
        {

        }
    }
}); 
```

尝试使用上面的代码..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:39:10.320

更好地根据需要创建一个带有时间选择器和两个按钮的 xml 文件。

然后，您可以手动启动警报对话框，并将视图设置为此 xml 文件。

您可以根据需要为两个按钮设置文本，也可以手动处理两个按钮的单击事件。

# mongodb - 使用官方 C# 驱动程序使用对象和对象数组列表进行 MongoDB 序列化

> ID：10284166
> 
> 赞同：0
> 
> 时间：2012-04-23T16:09:21.507
> 
> 标签：mongodb, mongodb-.net-driver

我有这个示例类：

```
公开课测试
{
        私有 ObjectId _mongoID;
        私人 A _a = 新 A();
        私有 ArrayList _alData = new ArrayList(); // B 个对象的数组列表
        #endregion

        公共测试（A a，ArrayList alData）
        {
            _a = a;
            _alData = alData;
        }

        [BsonId]
        公共 ObjectId MongoID
        {
            得到;

            放;
        }

        公众号
        {
            得到
            {
                返回_a；
            }
        }

        公共阵列数据
        {
            得到
            {
                返回 _alData.ToArray();
            }
        }
}

```

我希望有这样的结果：

```
{“_id”：ObjectId（“000000000000000000000000”），“_a”：{A成员}，“dta”：[{B成员}，{B成员}]}
```

我能怎么做 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:30:30.707

这个类是只读的和不可变的。这是你的意图吗？如果是这样，那么以下是完成您所要求的最佳方法。请注意，您至少需要使用驱动程序版本 1.4.1 才能工作，并且您无法从数据库中读取此类。仅由于属性的只读性质，它才会持续存在。

```
public class Test
{
  private A _a;
  private ArrayList _alData;

  [BsonId]
  public ObjectId Id { get; set;}

  [BsonElement("_a")]
  public A A { get { return _a; } }

  [BsonElement]
  public Array dta { get { return _alData.ToArray(); } }
} 
```

# netbeans - 以当前分支目录为前缀的 Mercurial/Hg 提交消息

> ID：10284172
> 
> 赞同：1
> 
> 时间：2012-04-23T16:10:06.660
> 
> 标签：netbeans, mercurial, branch, dvcs

我们将 Mercurial 与克隆存储库一起用于我们的“分支”。每个克隆中的“分支”都是“默认”。

结构是：

```
repos/Test
repos/Trunk
repos/Live
repos/NewFeature 
```

完成 Trunk 中的工作后，更改将被拉入测试克隆。由于每次提交都已完成，`default`现在我可以看到最初进行更改的位置，即在主干或测试存储库中。

我想知道如何在每条提交消息前自动加上 say`[Trunk]`或`[Test]`- 这样日志会更容易查看。

我希望在从 cmd 行和从 Netbeans 提交时发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:25:44.437

据我所知，没有任何选择，也没有现有的 Mercurial 扩展。

但是，我会考虑改用[命名分支](http://mercurial.aragost.com/kick-start/en/tasks/)：这样您就可以将当前分支名称直接嵌入到变更集中的元数据中。变更日志查看器通常会在其 UI 中显眼的位置显示分支名称，以便轻松查看每个变更集所属的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-23T20:14:53.557

我们使用包含以下内容的脚本：

```
import re,os,sys,mercurial,repo

def prefix_commit_message(repo, **kwargs):
 commitctx = repo.commitctx

 def rewrite_ctx(ctx, error):
  branch_name = repo.root.split("/")[5]
  old_text = ctx._text
 ctx._text = "["+branch_name+"] "+old_text

 return commitctx(ctx, error) 
```

.hgrc 是这样的：

```
$ cat ~/.hgrc
[ui]
username = Ian Wood

[hooks]
precommit = python:~/Development/repository/prepend-branch-name.py:prefix_commit_message 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:18:27.553

mercurial wiki 包含许多关于如何设置[提交消息模板](http://mercurial.selenic.com/wiki/CommitMessageTemplate)的建议。这负责命令行。

至于Netbeans，我不知道它是否会让你开箱即用。你总是可以[写一个插件](http://wiki.netbeans.org/IntroNetBeansPluginDev)。

# windows-7 - Sharepoint Server 2010 开发环境设置错误

> ID：10284175
> 
> 赞同：0
> 
> 时间：2012-04-23T16:10:21.843
> 
> 标签：windows-7, sharepoint-2010

****眼泪掉头发****

我一直在关注这个 - [http://msdn.microsoft.com/en-us/library/ee554869.aspx](http://msdn.microsoft.com/en-us/library/ee554869.aspx)演练在我的本地计算机（Windows 7 64 位）上设置 Sharepoint **Server 2010。**Sharepoint“安装”绝对没问题，但“配置”程序不会运行。我收到以下错误：

```
System.InvalidOperationException: Stand-alone provisioning has failed because an 
error occurred while enumerating the SharePoint Server products installed on this 
server. 
```

我能找到的唯一“帮助”在这里 - [http://social.technet.microsoft.com/Forums/en-US/sharepoint2010programming/thread/42239d23-26cd-4571-a4ac-b3bc74f9ad3a/](http://social.technet.microsoft.com/Forums/en-US/sharepoint2010programming/thread/42239d23-26cd-4571-a4ac-b3bc74f9ad3a/) - 但我**已经把并验证了许可证密钥**，所以这肯定不是问题吗？

我在下面包含了完整的异常详细信息，以防万一。如果有人能阐明这一点，我将不胜感激。

**注意：**很明显，我希望在我的本地计算机上使用 Sharepoint **Server**而不是**Foundation**，以便它复制实时环境。Sharepoint **Foundation**安装时没有任何问题。

**另请注意：**来自我机器的任何 HTTP 请求都通过代理进行路由。

帮助！（谢谢）。

```
System.Reflection.TargetInvocationException: Exception has been thrown by the target of an invocation. ---> System.InvalidOperationException: Stand-alone provisioning has failed because an error occurred while enumerating the SharePoint Server products installed on this server.
   at Microsoft.Office.Server.EvaluatorModeProvisioning.OfficeServerProducts.get_OfficeProductList()
   at Microsoft.Office.Server.EvaluatorModeProvisioning.OfficeServerProducts.IsInstalled(OfficeServerProductToProvision product)
   at Microsoft.Office.Server.EvaluatorModeProvisioning.SharedEvaluatorModeProvisioning.GetProvisioner()
   at Microsoft.Office.Server.EvaluatorModeProvisioning.SharedEvaluatorModeProvisioning..ctor(TraceListener listener)
   --- End of inner exception stack trace ---
   at System.RuntimeMethodHandle._InvokeConstructor(Object[] args, SignatureStruct& signature, IntPtr declaringType)
   at System.Reflection.RuntimeConstructorInfo.Invoke(BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
   at Microsoft.SharePoint.PostSetupConfiguration.ReflectionHelper.InvokeConstructor(String assemblyQualifiedName, Type[] constructorSignature, Object[] constructorParameters)
   at Microsoft.SharePoint.PostSetupConfiguration.TaskCommon.ReflectionHelperInvokeConstructor(String assemblyQualifiedName, Type[] constructorSignature, Object[] constructorParameters, TaskBase task)
   at Microsoft.SharePoint.PostSetupConfiguration.EvalModeProvisionTask.LoadProvisioner()
   at Microsoft.SharePoint.PostSetupConfiguration.WelcomeForm.ShowNextFormForServerRoleSingleServer()
   at Microsoft.SharePoint.PostSetupConfiguration.WelcomeForm.PsconfigBaseFormNextButtonClickedEventHandler(Object sender, EventArgs e)
   at System.Windows.Forms.Control.OnClick(EventArgs e)
   at System.Windows.Forms.Button.WndProc(Message& m)
   at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
   at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

**编辑**- 尝试了全新的安装/许可证和同样的错误。我的机器上有 Office 2003 - 这可能是问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T16:05:41.500

然后我会自己回答（在一个叫 Rock Wang 的小伙子的帮助下......）

[http://social.technet.microsoft.com/Forums/en-US/sharepoint2010setup/thread/baaded7c-8782-47f6-ba75-0bdd98aa3706](http://social.technet.microsoft.com/Forums/en-US/sharepoint2010setup/thread/baaded7c-8782-47f6-ba75-0bdd98aa3706)

SQL Server Compact 3.5 SP2 的损坏安装如何导致整个 Sharepoint 网站集崩溃，这让我无法理解/有点担心...... :)

# scala - 在任务中运行任务并在 sbt 中评估其结果

> ID：10284177
> 
> 赞同：3
> 
> 时间：2012-04-23T16:10:28.657
> 
> 标签：scala, task, sbt

我有兴趣编写一个任务来创建我的项目的启动器，该项目不再涉及 sbt。幸好 sbt 知道所有信息，所以我可以创建自己的启动器。在交互模式下，这四个命令向我显示了创建启动器所需的所有信息，但它们只是将它们打印出来，我无法进一步处理它们

```
show java-options
show unmanaged-jars
show managed-classpath 
```

我想进一步处理这三个任务的结果，但我知道我不知道该怎么做。wiki 中的任务定义非常混乱，<<= 运算符更是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:32:21.307

创建任务并不多。我假设您查看了有关它的[wiki](https://github.com/harrah/xsbt/wiki/Tasks)，但没有理解某些内容。我想你会做这样的例子：

```
val stringTask = TaskKey[String]("string-task")
stringTask <<= (sampleTask, intTask) map { (sample: Int, intValue: Int) =>
    "Sample: " + sample + ", int: " + intValue
} 
```

该`<<=`方法简单地说，定义`stringTask`取决于其他任务。

另一方面，也许你需要一个 Runner，而不是一个 Task。

不幸的是，编写一个跑步者并不是那么简单。我在[这个项目](https://github.com/dcsobral/scala-foreach-benchmark)上。这是它的定义：

```
class MyRunner(subproject: String, config: ForkScalaRun) extends sbt.ScalaRun {
  def run(mainClass: String, classpath: Seq[File], options: Seq[String], log: Logger): Option[String] = {
    log.info("Running " + subproject + " " + mainClass + " " + options.mkString(" "))

    val javaOptions = classpathOption(classpath) ::: mainClass :: options.toList
    val strategy = config.outputStrategy getOrElse LoggedOutput(log)
    val process =  Fork.java.fork(config.javaHome,
                                  config.runJVMOptions ++ javaOptions,
                                  config.workingDirectory,
                                  Map.empty,
                                  config.connectInput,
                                  strategy)
    def cancel() = {
      log.warn("Run canceled.")
      process.destroy()
      1
    }
    val exitCode = try process.exitValue() catch { case e: InterruptedException => cancel() }
    processExitCode(exitCode, "runner")
  }
  private def classpathOption(classpath: Seq[File]) = "-classpath" :: Path.makeString(classpath) :: Nil
  private def processExitCode(exitCode: Int, label: String) = {
    if(exitCode == 0) None
    else Some("Nonzero exit code returned from " + label + ": " + exitCode)
  }
} 
```

它被这样使用：

```
runner in Compile in run <<= (thisProject, taskTemporaryDirectory, scalaInstance, baseDirectory, javaOptions, outputStrategy, javaHome, connectInput) map {
  (tp, tmp, si, base, options, strategy, javaHomeDir, connectIn) =>
    new MyRunner(tp.id, ForkOptions(scalaJars = si.jars, javaHome = javaHomeDir, connectInput = connectIn, outputStrategy = strategy,
      runJVMOptions = options, workingDirectory = Some(base)) )
} 
```

# c - 查找哪些页面不再与写时复制共享

> ID：10284181
> 
> 赞同：4
> 
> 时间：2012-04-23T16:11:07.363
> 
> 标签：c, linux, x86-64, copy-on-write, page-tables

假设我在 Linux 中有一个进程，从中我有`fork()`另一个相同的进程。在`fork`ing 之后，由于原始进程将开始写入内存，Linux*的写时复制*机制将赋予该进程唯一的物理内存页，该物理内存页与分叉进程使用的内存页不同。

**在执行的某个时刻，我如何知道原始进程的哪些页面已被写入时复制？**

我不想使用 SIGSEGV 信号处理程序并在一开始就授予对所有页面的只读访问权限，因为这会导致我不想要的开销。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-11T04:04:15.897

跟踪系统调用 - fork()、clone()：

copy_process()->copy_mm()->dup_mm()->dup_mmap()-->在这里你会发现VMA通过VMA将它们标记为“写时复制”的算法：

[http://www.cs.columbia.edu/~krj/os/lectures/L17-LinuxPaging.pdf](http://www.cs.columbia.edu/~krj/os/lectures/L17-LinuxPaging.pdf)

[http://www.cs.columbia.edu/~junfeng/13fa-w4118/lectures/l20-adv-mm.pdf](http://www.cs.columbia.edu/~junfeng/13fa-w4118/lectures/l20-adv-mm.pdf)

**本质上（请参阅幻灯片），如果 PTE 不可写（基于硬件），并且 VMA 被标记为可写（基于软件） - 这意味着内存是写时复制的。**

你总是可以编写一个内核模块来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T04:48:55.727

你可能不得不接受一些开销。

如果您有特权，您可以预读 /proc/self/pagemap（64 位，偏移量 8*(addr / PAGE_SIZE)）来获取 PFN（它是低 54 位）。然后在 /proc/kpagecount 中查找该 PFN 以查看该页面是否已共享。

如果没有权限，可以在父子的pagemap中对比PFN。

您可以通过将 Pss（比例集大小）与 /proc/smaps 中的总大小进行比较来判断映射中的任何页面是否共享。

# c++ - c++ int转char

> ID：10284183
> 
> 赞同：0
> 
> 时间：2012-04-23T16:11:12.213
> 
> 标签：c++, ascii

我有一个整数 i ([0,255]) 的列表，我想将这些整数转换为字符。

```
int i;
char c = (char)i; 
```

当我打印 c（当 i=0 时）时，我没有得到相应的 ascii 符号。如何正确进行映射？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:12:51.317

ASCII 0 没有符号。所有小于 32 的 ASCII 值都是控制字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:22:59.890

您正在将 ASCII 值与 int 值混合...查看 ASCII 表，您就会明白。要打印“0”，您需要打印值 48（十进制）。要打印从 0 到 9 的值，您只需将 48 添加到 int 值，您将获得正确的 ASCII 码。要打印长于一位的值，您需要某种从一个 int 到多个 ASCII 代码的转换。谷歌搜索应该找到这样的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:12:37.427

我不相信值 0 有一个有意义的 ASCII 符号。它是一个 NULL 字符，不应该打印任何东西。例如，为什么不尝试在`i = 97`('a') 时打印一个值？

如果您检查[ASCII 表](http://www.asciitable.com/)，您会发现并非每个 ASCII 字符都有一个有意义的打印值。

# file - tclodbc 如何使用来自文件的 sql 语句插入值

> ID：10284185
> 
> 赞同：0
> 
> 时间：2012-04-23T16:11:13.143
> 
> 标签：file, odbc, tcl

我正在修改一些tcl代码，作者在代码中定义了sql语句。

我没有包含数据库连接代码或包需要 tclodbc 语句，但这实际上是我的测试用例的全部流程。

```
set query "alter table dbo.customer add constraint customer_pk primary key (c_custkey) with (maxdop=$maxdop)"
set maxdop 2

    if {[catch {db $query} err] } {
        puts "SQL ERROR"
        puts [format "ERROR is ===\n%s\n===" $err]
        } 
```

但是我想让它更通用一点，并从文件中读取 sql。（这样我可以在不编辑程序的情况下试验 SQL）

所以我尝试了：

```
set silly_id [open silly.sql" r]
set sql_in   [gets $silly.sql]  

    if {[catch {db $sql_in} err] } {
        puts "SQL ERROR"
        puts [format "ERROR is ===\n%s\n===" $err]
    } 
```

我已经尝试了几乎所有我能想象的 eval 和 subst 组合，但仍然无法让它工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T19:02:11.100

您正在寻找的代码是这样的：

```
# Correct pattern for reading from a file
set silly_id [open "silly.sql" r]
set sql_in   [read $silly_id]
close $silly_id

# Do substitutions in the SQL before evaluation
if {[catch {db [subst $sql_in]} err] } {
    puts "SQL ERROR"
    puts [format "ERROR is ===\n%s\n===" $err]
} 
```

* * *

## 可是等等！

该代码有一个*大*问题，因为它非常容易受到值问题的影响`$maxdop`（例如，如果它具有意外值，因为它来自不受信任的用户）。通常，您应该改用参数化查询。这对于一个`ALTER TABLE`（你不应该真正使用来自用户的任何信息）并不太重要，但是对于, `SELECT`，`UPDATE`你需要非常小心。正确获取参数化语句要容易得多；TclODBC 也支持它们，您可以从[文档](http://www.dgroth.de/tcl8.4.4/databases/tclodbc2.3/REFERENC.HTM)中的这个示例中看到：`INSERT``DROP`

```
% db statement s "从 id=132 的文章中选择全名"
s
%s
{全名132}
% db statement s2 "从 id1=? 的文章中选择全名？" 整数
s2
% s2 132
{全名132}

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:15:47.047

看起来你真的只是在问如何在 TCL 中打开和读取文件，对吧？您似乎使 SQL 部分工作正常。如果是这样，就这么简单（取自[这里](http://wiki.tcl.tk/367)）

```
 set fp [open "somefile" r]
     set file_data [read $fp]
     close $fp 
```

# c# - 从 IEnumerable 中选择项目

> ID：10284191
> 
> 赞同：3
> 
> 时间：2012-04-23T16:11:38.087
> 
> 标签：c#, linq

> **可能重复：**
> [查询结果不能枚举多次？](https://stackoverflow.com/questions/1361237/the-query-results-cannot-be-enumerated-more-than-once)

我正在使用实体框架使用存储过程从我的数据库中选择并返回一组实体。

```
var results = dataContext.loadData(testargument); 
```

我想计算这个返回的集合（以确保只返回 1 条记录，然后获取此列表中的第一项。

```
if(results.Count() == 1)
{
    ReturnedEntity entity = results.First();
} 
```

但是，当我执行此调用时，我收到错误“查询的结果不能多​​次枚举”。有谁知道我怎样才能正确地做到这一点？我假设调用 Count() 方法正在更改数据，并且不确定在调用 first() 方法之前是否需要将其放回列表中。我已经尝试过 results.ToList().First() 但得到了同样的错误。

此外，我注意到如果我在一个空集上调用 First() 方法，我会收到一个错误，这就是为什么我试图确保只返回 1 条记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:14:20.117

You can avoid this problem using `ToList()`. Becuase then when you have the list loaded in your memory you can do whatever you want. But I reccomend you use [`FirstOrDefault()`](http://msdn.microsoft.com/en-us/library/bb340482.aspx).

```
var results = dataContext.loadData(testargument).ToList(); 
```

And

```
ReturnedEntity entity = results.FirstOrDefault(); 
```

Or

```
if(results.Length == 1)
    ReturnedEntity entity = results.First(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:17:30.710

`IEnumerable`不支持这个。这是设计使然。`IEnumerable`使用惰性求值在您需要之前获取您要求的元素。

如果您想知道项目的数量而不对其进行迭代，您可以使用`IList<T>`，它有一个 Count 属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:13:15.023

ReturnedEntity 实体 = results.First();

如果（实体！= null）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T16:13:32.060

在获取计数之前尝试调用`.ToList()`，因为这也会枚举结果。

```
var resultList = results.ToList();
if(resultList.Count == 1)
{
    ReturnedEntity entity = resultList.First();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T16:15:26.043

```
var resultList = results.ToList();
if(resultList.Count == 1)
{
    ReturnedEntity entity = resultList.First();
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-04-23T16:14:08.707

我觉得

```
try
{
    var result = dataContext.loadData(testargument).Single()
}
catch (InvalidOperationException)
{
    // Oops not a single result
} 
```

是一种更好的方法，如果获得多于或少于一个结果是例外的。如果在正常执行中出现多于或少于一个结果，您可以这样做

```
var result = dataContext.loadData(testargument).SingleOrDefault()

if (result != null)
{
    // Continue as usual
}
else
{
   // Oops, not a single result
} 
```

如果您将重复使用可以使用`ToList`扩展的集合，

```
var results = dataContext.loadData(testargument).ToList(); 

if(results.Count == 1) 
{     
    ReturnedEntity entity = results[0];
}
else
{
    // Oops, not a single result
} 
```

`IList`支持多个枚举，有一个`Count`属性和一个索引访问器，`IEnumerable`不支持。

# css - 制作浮雕文字

> ID：10284192
> 
> 赞同：2
> 
> 时间：2012-04-23T16:11:39.743
> 
> 标签：css

我找到了这个用文本制作浮雕效果的[解决方案。](https://stackoverflow.com/a/8859832/1252748)这真的是最好的方法吗。任何关于它的新想法。如果您必须添加额外的跨度标签来获得正确的字距调整，它就无法使用。我猜它添加了额外的节点并弄乱了伪选择器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:16:44.227

您可以使用文本阴影。

```
text-shadow{0px 1px 0px #fff, 0px -1px 0px #000} 
```

但是，这在 IE9 之前的任何东西中都不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:15:54.327

它不一定是跨浏览器友好的，但总是有文本阴影来模拟浮雕风格。

```
h1.embossed {
    text-shadow: 1px 1px 2px #fff;
} 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/xVTS3/)。

# google-chrome - 奇怪的 Chrome 错误？

> ID：10284195
> 
> 赞同：1
> 
> 时间：2012-04-23T16:11:43.117
> 
> 标签：google-chrome, javascript-events

这个错误可能是不可重现的（编辑：所以我想）。我有一个带有 onkeyup 和 oninput 的 textarea，当我 ctrl-v 将某些内容粘贴到 textarea 中时，它会被粘贴两次，并且 oninput 事件会触发两次。不过，使用鼠标上下文菜单粘贴效果很好。然后我将 onkeyup 的名称更改为 onkeyup_ 以暂时避免它触发以查看发生了什么变化，没有任何变化。然后我测试只是为了确保“onkeyup_”事件没有触发；onkeyup_="alert('这不应该触发')"。现在，当我尝试将文本粘贴到文本区域而不是获取文本时，我粘贴的文本“这不应该触发”改为显示在文本区域中，警报没有创建警报窗口，而是转储它的参数进入文本区域，很奇怪。

使用 ctrl-v 粘贴时，文本被添加两次，并且 oninput 触发两次，使用鼠标上下文菜单粘贴时，文本仅出现一次。但现在出现了奇怪的部分，我完全删除了 onkeyup_ 事件，但即使它不再出现在代码中，它也会继续触发！当我“检查元素”时，我确实确认警报代码不再在 html 中，但它一直在触发，并且它不断将其参数转储到 textarea 中，而不是在警报窗口中显示它。Chrome 如何执行不再存在的代码？它是否保留了旧版本的某种副本，到目前为止我已经进行了很多更改，Chrome 获取了该文件的新版本。为什么警报没有按预期工作？

编辑：唷，很难追查（我有很多代码），但这重现了 Chrome 上的错误，但在 Firefox 上运行良好：

```
<html>
<head>
<script>
function f(d){
alert(d.value);
}
</script>
<body>
<textarea name="commentBody" rows="8" cols="50" id="addVideo" oninput="f(this)" placeholder="Placeholder text..." style="margin-left: 0px; margin-right: 0px; width: 489px; margin-top: 5px; margin-bottom: 5px; height: 120px; "></textarea>
</body>
</html> 
```

那么问题是alert字段的值吗？为什么？

# c# - WPF动画：放大-保持-缩小

> ID：10284197
> 
> 赞同：1
> 
> 时间：2012-04-23T16:11:48.740
> 
> 标签：c#, .net, wpf

如果只是放大和缩小，那很容易。

```
private void button1_Click(object sender, RoutedEventArgs e)
{
    button1.BeginAnimation(Button.FontSizeProperty, new DoubleAnimation( 40,
                           new System.Windows.Duration(TimeSpan.FromSeconds(2)),
                               FillBehavior.Stop) { AutoReverse = true });
} 
```

但现在我希望当字体大小增长到 40 时，停留 2 秒，然后缩小。这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:14:06.600

您可以将多个动画组合成一个[StoryBoard](http://msdn.microsoft.com/en-us/library/ms742868.aspx)，这应该可以解决问题。您可以组合以下动画：

*   一种将字体大小放大到 40
*   一个什么都不做（持续时间为 2 秒）
*   一种缩小字体的方法

# php - 示例备份脚本

> ID：10284199
> 
> 赞同：0
> 
> 时间：2012-04-23T16:12:08.480
> 
> 标签：php, mysql

尝试运行一个简单的备份脚本，它只打印错误消息。我做错了什么吗？这是完整的代码。我在 linux 上并且可以完全访问数据库。

它只打印“您的系统出现问题，导致备份无法完成”

```
<?php
$dbhost = "localhost"; // usually localhost
$dbuser = "myuser";
$dbpass = "mypass";
$dbname = "mydb";
$sendto = "Webmaster <webmaster@mydomain.com>";
$sendfrom = "Automated Backup <info@mydomain.com>";
$sendsubject = "Daily Mysql Backup";
$bodyofemail = "Here is the daily backup.";

$headers = 'My Shop <myname@mydomain.com>' . "\n";
$headers .= 'MIME-Version: 1.0' . "\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\n";

$backupfile = $dbname . date("Y-m-d") . '.sql';

if(system("mysqldump -h $dbhost -u $dbuser -p$dbpass $dbname > $backupfile")){
   mail('receiver@yahoo.com','Back Up Service','Back Up successfully completed',$headers );
      echo'Back up saved successfully.';
  }else {
    echo'There was an issue with your system that prevented the backup from completing';
   }
?> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:18:29.927

你的命令会有问题：

```
mysqldump -h $dbhost -u $dbuser -p$dbpass $dbname > $backupfile 
```

这看起来不错，但值得将其打印出来，以便您可以在命令行中检查它以查看您得到的结果。

编辑：查看此处可用的系统文档：[系统](http://php.net/manual/en/function.system.php)看起来这会返回命令输出的最后一行。如果 mysqldump 成功运行但没有创建任何输出，您`if`将返回 false。要么使用：

```
if(system("mysqldump blah blah") === false){ 
```

或者使用 system 的 return_var 参数来检查状态码（成功时应该为 0）。

# iphone - SBJsonParser 内存泄漏

> ID：10284204
> 
> 赞同：2
> 
> 时间：2012-04-23T16:12:26.460
> 
> 标签：iphone, objective-c, ios, memory-management, sbjson

我已经使用泄漏来定位与 SBJsonParser 相关的内存泄漏，但我不明白为什么会得到它？我希望有人能够提供一些见解。Leaks 报告说泄漏来自一个名为 objectWithURL 的方法。此方法是从名为 downloadJSONFeed 的方法调用的。我已经在下面展示了两者。

任何见解表示赞赏。

```
- (id) objectWithUrl:(NSURL *)url
{

    SBJsonParser *jsonParser = [SBJsonParser new];
    NSString *jsonString = [self stringWithUrl:url];

    // Parse the JSON into an Object
    return [jsonParser objectWithString:jsonString error:NULL];

}

- (void) downloadJSONFeed 
{

    //set up query
    NSString *lat  = [NSString stringWithFormat:@"%f", ad.locationManager.location.coordinate.latitude]; 
    NSString *lon = [NSString stringWithFormat:@"%f", ad.locationManager.location.coordinate.longitude];
    NSString *postValues = [NSString stringWithFormat:@"http://vivid-wind-8436.herokuapp.com/bathrooms/nearby.json/?lat=%@&lon=%@",lat, lon];

    //get server response
    id response = [self objectWithUrl:[NSURL URLWithString:postValues]];

    //store in dictionary
    NSDictionary *dictionary = (NSDictionary *)response;  

    //array for json data
     NSMutableArray *jsonData = [[NSMutableArray alloc] init];

    for (NSDictionary *dict in dictionary)
    {
        Bathroom *bathroom = [[[Bathroom alloc] init] autorelease];
        bathroom.name = [dict objectForKey:@"name"];
        bathroom.street = [dict objectForKey:@"street"];
        bathroom.city = [dict objectForKey:@"city"];
        bathroom.state = [dict objectForKey:@"state"];
        bathroom.postal = [dict objectForKey:@"postal"];        
        bathroom.country = [dict objectForKey:@"country"];
        bathroom.accessibility = [dict objectForKey:@"access"];
        bathroom.gendered = [dict objectForKey:@"bathroomtype"];
        bathroom.availability = [dict objectForKey:@"avail"];
        bathroom.directions = [dict objectForKey:@"directions"];
        bathroom.comment = [dict objectForKey:@"comment"];
        bathroom.distance = [dict objectForKey:@"distance"];
        bathroom.lat = [dict objectForKey:@"lat"];
        bathroom.lon = [dict objectForKey:@"lon"];

        [jsonData addObject:bathroom];
    } 

    //now sort array by distance
    NSSortDescriptor *sortDescriptor;
    sortDescriptor = [[[NSSortDescriptor alloc] initWithKey:@"distance"                                                  ascending:YES] autorelease];
    NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
    NSArray *sortedArray;
    sortedArray = [jsonData sortedArrayUsingDescriptors:sortDescriptors];
    //dataArray = [[NSMutableArray alloc] init];

    //add objects to data array
    [dataArray addObjectsFromArray:sortedArray];

    //release json data
    [jsonData release];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:21:59.707

`[SBJsonParser new]`等于`[[SBJsonParser alloc] init]`。通过调用 this`objectWithUrl`拥有创建的`SBJsonParser`对象，因此您需要在此方法中释放它：

```
SBJsonParser *jsonParser = [[SBJsonParser new] autorelease]; 
```

你也可以：

```
- (id)objectWithUrl:(NSURL *)url
{
    SBJsonParser *jsonParser = [SBJsonParser new];
    NSString *jsonString = [self stringWithUrl:url];

    // Parse the JSON into an Object
    id jsonObject = [jsonParser objectWithString:jsonString error:NULL];
    [jsonParser release];

    return jsonObject;
} 
```

请参阅[另一个 iPhone 内存泄漏问题](https://stackoverflow.com/questions/7336604/another-iphone-memory-leak-issue)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:19:28.987

抱歉，自从我用 Objective-C 编码以来已经有一段时间了，但这行得通吗？

```
SBJsonParser *jsonParser = [[[SBJsonParser alloc] init] autorelease]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:20:00.690

是的。需要释放解析器。将解析存储在堆栈变量中，释放解析器，然后返回。

# javascript - 正则表达式考虑换行

> ID：10284205
> 
> 赞同：0
> 
> 时间：2012-04-23T16:12:26.667
> 
> 标签：javascript, regex

下面的正则表达式用逗号替换数字前的空格：

```
var str="72 g tocirah snaeb 101 sgge 108 g darl 111 spuc loi 32  sinihccuz";
var result = str.replace(/ (\d+)/g, ", $1"); 
```

这很好用，但是当 str 是这样的多行句子时：

```
var str="72 g tocirah snaeb
101 sgge
108 g darl
111 spuc loi
32  sinihccuz";
var result = str.replace(/ (\d+)/g, ", $1"); 
```

这不起作用，因此正则表达式无法正常工作。如何修复它，以便考虑换行符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:14:00.877

用于`\s`表示任何空格字符（包括换行符）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:26:42.150

您想在空格前*添加*一个逗号，后跟一个数字吗？然后你可以使用

```
result = str.replace(/(?=\s+\d)/g, ","); 
```

# mercurial - 让 mercurial “hg commit” 与 Notepad++ 一起工作

> ID：10284208
> 
> 赞同：14
> 
> 时间：2012-04-23T16:12:40.040
> 
> 标签：mercurial, notepad++, dvcs

[我刚刚使用NotepadReplacer](http://www.binaryfortress.com/NotepadReplacer/)用 notepad++ 替换了记事本，现在我`hg commit`的工作不正常。

在替换记事本之前，`hg commit`会启动一个新的文本文件供我输入我的提交信息。使用 Notepad++ 时，系统会提示我创建文件，并且由于提交消息为空，mercurial 会中止提交。

`hg commit`我知道我可以使用with选项输入内联消息`-m`，但我希望可以选择在文本文件中输入提交消息。我喜欢在文本文件中显示状态作为提交消息的上下文，而不必`hg stat`在`hg commit`.

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-23T18:45:53.653

`%USERPROFILE%\.hgrc`尝试在您的（或）中放置`%USERPROFILE%\mercurial.ini`以下内容：

```
[ui]
editor = path/to/notepad++ -multiInst -nosession 
```

也许添加`-notabbar`after`-nosession`也可以证明是有用的。

# http - 需要 HTTP 响应标头和 curl 错误 52

> ID：10284209
> 
> 赞同：0
> 
> 时间：2012-04-23T16:12:40.460
> 
> 标签：http, curl

我正在编写一个 Web 服务，并希望将流量最小化为仅绝对需要的响应数据。我试过不发送标题，只发送一些文本，但如果它少于 7 个字符 curl 显示 curl: (52) Empty reply from server 即使我返回了一些东西，如果我在我的响应中添加另一个字符，它会返回。

# asp.net - GridView 中的 DropDownList RequiredFieldValidator

> ID：10284211
> 
> 赞同：1
> 
> 时间：2012-04-23T16:12:41.750
> 
> 标签：asp.net, gridview, drop-down-menu, requiredfieldvalidator

我有一个带有 DropwDownlist 控件的 asp.net GridView 和一堆用于文本输入等的其他文本框。用户可以向网格添加多行并更改现有数据等。

我需要RequiredFieldValidator 只为正在访问的当前行触发。我已将 InitialValue 设置为正确的值，并让验证器触发，我遇到的问题是它会触发每一行，而不仅仅是当前正在处理的行。

有任何想法吗？

我在 GridView 的 DropDown 下的验证器：

```
<asp:RequiredFieldValidator ID="rfRoles" runat="server" ErrorMessage="Role Required"
     ControlToValidate="ddlRole" ValidationGroup=roles InitialValue="-1" Display="Dynamic" SetFocusOnError="true" Text="*">
</asp:RequiredFieldValidator>
<asp:ValidationSummary ID="validateRole" runat="server" ShowMessageBox="True" ShowSummary="false" ValidationGroup="roles" /> 
```

我在网格中的保存按钮：

```
<EditItemTemplate>
<asp:LinkButton ID="lnkSave" runat="server" Text="Save" CommandName="Update" CausesValidation="true" ForeColor="#AE0917" ValidationGroup="roles" Font-Bold="true"></asp:LinkButton></EditItemTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:21:45.480

我相信你可以做这样的事情：

```
<EditItemTemplate>
<asp:RequiredFieldValidator ID="rfRoles" runat="server" ErrorMessage="Role Required"
    ControlToValidate="ddlRole" ValidationGroup="roles<%# Eval("Id") %>" InitialValue="-1" Display="Dynamic" SetFocusOnError="true" Text="*">
</asp:RequiredFieldValidator>
<asp:ValidationSummary ID="validateRole" runat="server" ShowMessageBox="True" ShowSummary="false" ValidationGroup="roles<%# Eval("Id") %>" />

<asp:LinkButton ID="lnkSave" runat="server" Text="Save" CommandName="Update" CausesValidation="true" ForeColor="#AE0917"ValidationGroup="roles<%# Eval("Id") %>" Font-Bold="true"></asp:LinkButton>
</EditItemTemplate> 
```

其中“Id”是您的数据行的标识符，例如您正在编辑的数据行的主键。这样，您就可以为每一行提供一个唯一的验证组。

PS语法可能需要一些工作，我是从记忆中完成的。

# iphone - 处理 UILocalNotification 以外的重复通知的更好方法？

> ID：10284212
> 
> 赞同：0
> 
> 时间：2012-04-23T16:12:42.840
> 
> 标签：iphone, objective-c, uilocalnotification

我已经阅读了很多关于 UILocalNotification 的内容，并且我还在我的 App 中添加了一些内容。我的问题是我想要一个重复通知（例如每 2 分钟一次），但如果用户没有在它们出现时对每个通知做出响应，我不希望它们“堆积”。似乎没有任何方法可以处理这个问题 - 显然，通知意味着用户每次都会响应，而不是被忽略。

那么，有没有更好的方法在应用程序处于后台时通知用户，或者本地通知是唯一的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:42:21.223

在用户响应通知 N 后，仅在处理通知 N 时安排通知 N+1 怎么样？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:25:22.283

我没有尝试过此代码，但您可以取消之前发送的代码`UILocalNotification`并发送另一个代码。

```
if(_lastSentNotification) {
    [[UIApplication sharedApplication] cancelLocalNotification:_lastSentNotification];
}
_lastSentNotification = ...code to create UILocalNotification
[[UIApplication sharedApplication] scheduleLocalNotification:_lastSentNotification]; 
```

关于`cancelLocalNotification`，API 文档说：

> 如果通知当前正在显示警报，则调用此方法还会以编程方式关闭通知。

因此，听起来您不一定需要用户交互来处理通知。

# c# - 如何构建自定义正则表达式

> ID：10284213
> 
> 赞同：0
> 
> 时间：2012-04-23T16:12:44.997
> 
> 标签：c#, regex

我想构建一个`Regex`以 5 或 6 个整数开头并以一个字符结尾的。

我努力了

```
^\d+A-Za-z$ 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T16:15:28.287

尝试这样的事情：您应该查看一些正则表达式规则，并查看其他有关 SO 的示例。

```
^\d{5,6}[A-Za-z]$ 
```

主要区别在于需要将最后一条规则封装在 [] 中，所以它的意思是，一个字符，要么是 az，要么是 AZ。你需要替换`\d+`为`\d{5,6}`.

`\d+`意思是：一个数字，至少一次。

`\d{x,y}`：一个数字，最少x次，最多y次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:15:32.963

你非常接近。一些小的修改。

`^\d{5,6}[A-Za-z]$`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:19:03.187

假设您的意思是 az （不区分大小写）作为“字符”`\d{5,6}[a-zA-z]$`

不过这很简单 - 请查看此网站以获得不错的介绍：[http ://www.regular-expressions.info/](http://www.regular-expressions.info/)

# php - 子模式中的相同反向引用，php pcre regexp

> ID：10284222
> 
> 赞同：0
> 
> 时间：2012-04-23T16:13:36.040
> 
> 标签：php, regex

我发现这个

[http://www.php.net/manual/en/regexp.reference.subpatterns.php](http://www.php.net/manual/en/regexp.reference.subpatterns.php)

(?|(Sat)ur|(Sun))天

这意味着 (Sat) 和 Sun 将以相同的顺序匹配

但是当我使用 regexbuddy 进行测试时，它会出现错误 abt 语法谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:27:02.367

这应该适用于最新版本的 PCRE - 您是否确保将 regexbuddy 切换到 PCRE 模式？

你也需要一个相当新的版本。我的 PHP 5.2.6 安装太旧（PCRE 6.6 2006-02-06），而 PHP 5.2.17（8.02 2010-03-19）很好。

这个测试PHP程序：

```
$a = "it is Sunday tomorrow";
preg_match('/(?|(Sat)ur|(Sun))day/', $a, $m);
print_r($m); 
```

输出这个：

```
Array
(
    [0] => Sunday
    [1] => Sun
) 
```

如果您的 PCRE 版本太旧，您将收到此错误：

```
 Compilation failed: unrecognized character after (? at offset 2 
```

# android-actionbar - 带有选项卡的活动对话框

> ID：10284223
> 
> 赞同：9
> 
> 时间：2012-04-23T16:13:41.603
> 
> 标签：android-actionbar, android, android-tabs

我正在为选项卡构建应用程序。

1.  单击按钮时，我试图显示带有主题的 Activity （比如**A ）**`@android:style/Theme.Dialog`
2.  在活动**A 中**，我正在创建操作栏并添加 4 个选项卡。
3.  单击选项卡时，我想更改片段。

一切正常，直到我不应用主题应用主题`@android:style/Theme.Dialog` 后，我得到异常：

```
 java.lang.RuntimeException: Unable to start activity ComponentInfo{com.ebuilder/com.ebuilder.views.MyTabActivity}: java.lang.NullPointerException 
```

在以下行：

```
actionBar.addTab(actionBar.newTab().setCustomView(R.layout.tab_home).
                    setTabListener(homeListener), 0); 
```

我有两个问题：

**1\. 如果我应用主题对话框会出现什么问题？**

**2\. 我的方法对吗？**

如果有人知道另一种方法，请告诉我。

**编辑1：** **清单文件**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.vivek"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk  android:targetSdkVersion="14"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".FragmentInsideFragmentTestActivity"
            android:label="@string/app_name"
            android:theme="@style/Theme.CustomDialog" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

**res/values/style.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <style name="Theme.CustomDialog" parent="android:style/Theme.Dialog">
            <item name="android:windowNoTitle">false</item>
            <item name="android:windowActionBar">true</item>        
    </style>
</resources> 
```

**编辑2**

```
05-03 21:42:10.580: D/AndroidRuntime(533): Shutting down VM
05-03 21:42:10.580: W/dalvikvm(533): threadid=1: thread exiting with uncaught exception (group=0x40014760)
05-03 21:42:10.600: E/AndroidRuntime(533): FATAL EXCEPTION: main
05-03 21:42:10.600: E/AndroidRuntime(533): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.vivek/com.vivek.FragmentInsideFragmentTestActivity}: java.lang.IllegalStateException: ActionBarImpl can only be used with a compatible window decor layout
05-03 21:42:10.600: E/AndroidRuntime(533):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1748)
05-03 21:42:10.600: E/AndroidRuntime(533):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1764)
05-03 21:42:10.600: E/AndroidRuntime(533):  at android.app.ActivityThread.access$1500(ActivityThread.java:122)
05-03 21:42:10.600: E/AndroidRuntime(533):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1002)
05-03 21:42:10.600: E/AndroidRuntime(533):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-03 21:42:10.600: E/AndroidRuntime(533):  at android.os.Looper.loop(Looper.java:132)
05-03 21:42:10.600: E/AndroidRuntime(533):  at android.app.ActivityThread.main(ActivityThread.java:4025)
05-03 21:42:10.600: E/AndroidRuntime(533):  at java.lang.reflect.Method.invokeNative(Native Method)
05-03 21:42:10.600: E/AndroidRuntime(533):  at java.lang.reflect.Method.invoke(Method.java:491)
05-03 21:42:10.600: E/AndroidRuntime(533):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
05-03 21:42:10.600: E/AndroidRuntime(533):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
05-03 21:42:10.600: E/AndroidRuntime(533):  at dalvik.system.NativeStart.main(Native Method)
05-03 21:42:10.600: E/AndroidRuntime(533): Caused by: java.lang.IllegalStateException: ActionBarImpl can only be used with a compatible window decor layout
05-03 21:42:10.600: E/AndroidRuntime(533):  at com.android.internal.app.ActionBarImpl.init(ActionBarImpl.java:214)
05-03 21:42:10.600: E/AndroidRuntime(533):  at com.android.internal.app.ActionBarImpl.<init>(ActionBarImpl.java:192)
05-03 21:42:10.600: E/AndroidRuntime(533):  at android.app.Activity.initActionBar(Activity.java:1767)
05-03 21:42:10.600: E/AndroidRuntime(533):  at android.app.Activity.setContentView(Activity.java:1781)
05-03 21:42:10.600: E/AndroidRuntime(533):  at com.vivek.FragmentInsideFragmentTestActivity.onCreate(FragmentInsideFragmentTestActivity.java:47)
05-03 21:42:10.600: E/AndroidRuntime(533):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1048)
05-03 21:42:10.600: E/AndroidRuntime(533):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1712)
05-03 21:42:10.600: E/AndroidRuntime(533):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-23T18:44:44.403

我在这里遇到同样的问题，到目前为止发现了两种不同的方法。

[这里](https://groups.google.com/forum/#!msg/android-developers/Y5wnstMT5Lo/upOijj1OOJIJ)描述的第一个是我使用的。

还有[这个](https://stackoverflow.com/questions/19700537/how-to-open-activity-as-a-dialog-with-actionbar)答案看起来与第一个非常相似。

最大的问题似乎是 ActionBar 只应该在全屏布局上使用，所以任何试图应用 Dialog 类型布局的东西都会导致异常。这就是为什么他们都将宽度设置为`this.getWindow().setAttributes`固定值，以解决该问题。

这是我得出的结论，希望它可以帮助其他寻找这个的人，因为这是一个非常古老的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T13:38:14.793

您可以通过覆盖操作栏不需要的对话框属性来创建自定义对话框主题。还可以`android:windowActionBar`向其中添加属性。

```
<style name="Theme.CustomDialog" parent="android:Theme.Holo.Dialog">
    <item name="android:windowNoTitle">false</item>
    <item name="android:windowActionBar">true</item>
    ...
</style> 
```

# parallel-processing - 如何确定计算与通信的比率

> ID：10284226
> 
> 赞同：1
> 
> 时间：2012-04-23T16:13:55.467
> 
> 标签：parallel-processing, granularity

给定一个并行程序和一个定义明确的硬件，如何确定其计算与通信比率（CCR）。这是为了确定程序的粒度和后续分析。文献描述了这个术语并使用它来与程序的粒度相关，但我还没有找到任何东西来估计 CCR 是高还是低。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:30:33.517

要比较计算和通信，您必须使用一个通用单位来衡量两者。一般来说，我会用时间来衡量。然后您可能会发现程序的比率为 80:20（计算：通信）

虽然有人可能会断言 50:50 的比例对于交流来说是一个很高的价值，但这些数字实际上仅在与其他并行程序的可比数字相关时才有意义。因此，如果程序 A 和程序 B 解决了相同的问题，但 A 的比率为 80:20，而 B 的比率为 70:30，那么您可以声明 A 在时钟的每个滴答中比 B 执行的计算更多。如果他们没有解决同样的问题，您可能会发现自己在比较苹果和橙子。

虽然计算通常比通信更受欢迎，但这些因素也是相对的。给定程序 A 和 B，确定 B 确实（相对）进行了更多的通信，但也有可能 B 总体上比 A 花费的时间更少——也许 B 花时间在进程之间发送更大的消息，而 A 进行更多的重复计算以避免发送更大的消息消息。根据您喜欢的任何理由选择您喜欢的程序。

如果您对这些问题有足够的经验，您通常可以通过检查程序结构对比率做出一些有根据的猜测，但最终您将不得不对其进行测量以得出任何明智的结论。

# java - 如何做 Java tcp 客户端 <-> Qt tcp 服务器套接字通信

> ID：10284227
> 
> 赞同：1
> 
> 时间：2012-04-23T16:13:56.690
> 
> 标签：java, android, qt, sockets, tcp

我想知道这是否是一种好方法，或者是否有另一种更好和最佳的方法。（这仅适用于本地网络，不适用于 Internet）

**我正在尝试使用套接字在 tcp服务器**（在 windows中用**Qt编写）和 tcp****客户端**（在 android 中用**java**编写）之间实现通信系统。这是

我基本上需要做两件事：传输文件和传输一些数据。

*   因此，我决定使用基于字符串的通信方法来处理自定义协议。

*   对于数据传输，我用数据创建了一个 xml 文件（将集合转换为 xml 标记并设置其值），发送文件，然后在另一点解析它。

我对网络编程知之甚少，所以请帮我看看。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-25T08:42:03.023

我使用套接字通信为我的考试制作了 2 个简单的客户端应用程序。它们都与 Java 服务器通信，其中一个是 android 应用程序，第二个是 Qt 应用程序（这个应该可以帮助您，因为您想知道如何使您的 Java 应用程序与 Qt 通信）。[您可以在此处](https://bitbucket.org/Ekami/resavionapp_pti/overview)下载这 3 个应用程序。对不起，如果有一些评论是用法语发表的，我习惯用英语编码，但我面对的是法国陪审团：P。深入了解 Qt 应用程序中的 NetworkUtil::receiveString(QDataStream &in) 方法。还要始终使用 qint32 从 Java 应用程序接收 int。如果您需要进一步的解释，请告诉我。电子神

# php - 拆分为 preg_split

> ID：10284229
> 
> 赞同：1
> 
> 时间：2012-04-23T16:14:03.823
> 
> 标签：php, regex, preg-split

[这个问题与使用 preg_split 而不是 split](https://stackoverflow.com/questions/8255422/use-preg-split-instead-of-split)非常相似，但我对正则表达式有一些困惑，我想澄清一下。

尝试更新一些现有的 split() 函数以使用 preg_split() ，但我得到了一些不清楚的结果。运行下面的代码会给我不同长度的数组，我不知道为什么。

据我所见， split 与 \n 预先匹配可能的 \r 。而且我认为 preg_split 也在做同样的事情，但是为什么它会创建 2 个拆分？这与惰性/贪婪匹配有关吗？

演示代码：

```
$test = "\r\n";

$val = split('\r?\n', $test); //literal interpretation of string
$val_new = split("\r?\n", $test); //php understanding that these are EOL chars
$val2 = preg_split('/\r?\n/', $test);

var_dump($val); // returns array(1) { [0]=> string(2) " " }
var_dump($val2); // returns array(2) { [0]=> string(0) "" [1]=> string(0) "" } 
```

编辑：根据 Kolinks 评论在 $val_new 中添加，因为它们有助于澄清我对问题的理解，因此也可能对其他人有用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:18:22.513

您应该标记为忽略拆分数组中的空标记的`PREG_SPLIT_NO_EMPTY`第三个参数。`preg_split`所以如果你使用

```
preg_split('/\r?\n/', $test, PREG_SPLIT_NO_EMPTY); 
```

那么它将与拆分功能相同。

顺便说一句，您使用`\r?\n`in split 函数并没有进行任何拆分（因为 split 不理解`\r`并且`\n`使用单引号）并返回您的**原始字符串**。

*编辑：*或者，您可以使用双引号正则表达式拆分：

```
split("\r?\n", $test); 
```

将您的字符串拆分为 2 个元素数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:21:27.347

`split`不理解`\r`和`\n`作为特殊字符，并且因为您使用了单引号 PHP 也不将它们视为特殊字符。`split`寻找文字`\\n`或.`\r\n`

`preg_split`, 另一方面，确实理解`\r`和`\n`作为特殊字符，所以即使 PHP 没有像 PCRE 那样对待它们，因此字符串被正确分割。

这与惰性/贪婪匹配无关，这完全是因为单引号没有解析`\r\n`成它们的换行符含义。

# ruby - 为什么使用 rbenv 安装 Ruby 失败？

> ID：10284231
> 
> 赞同：3
> 
> 时间：2012-04-23T16:14:04.433
> 
> 标签：ruby, installation, rbenv

我遵循了本指南：[http ://samsoff.es/posts/how-to-install-ruby-193](http://samsoff.es/posts/how-to-install-ruby-193)

我 `rbenv install 1.9.3-p125`在控制台中输入。

Ruby 安装正常，但是当我运行`ruby -v`它时仍然显示版本 1.8.7。

需要进行哪些更改才能使其正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T19:23:22.597

解决方案是添加`eval "$(rbenv init -)"`到我的 bash_login 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T20:20:16.870

如果安装命令不适用于 rbenv，则必须安装[ruby](https://github.com/sstephenson/ruby-build) ​​-build 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T16:16:07.010

您需要切换到新版本，以下三种方式之一：

*   临时：`rbenv shell 1.9.3-p125`设置一个 .rbenv-version 文件
*   当前目录：`rbenv local 1.9.3-p125`设置默认
*   您的用户的版本：`rbenv global 1.9.3-p125`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-27T14:35:11.270

您应该重新启动终端以允许 rbenv

> $ 执行 $SHEL
> $ 红宝石 -v
> 
> > ruby 1.9.3p194（2012-04-20 修订版 35410）[i686-linux]

# asp.net - 在 Asp.Net 3.5 和 Asp.Net 4.0 之间共享我的身份验证令牌？

> ID：10284235
> 
> 赞同：1
> 
> 时间：2012-04-23T16:14:10.823
> 
> 标签：asp.net, forms, .net-4.0, forms-authentication, asp.net-3.5

我有两组 Web 应用程序，一组在 Asp.Net 3.5 下运行，一组在 Asp.Net 4.0 下运行。两者都托管在 IIS 6 中。我需要使用共享表单身份验证（通过 3.5 应用程序）来对 3.5 和 4.0 应用程序进行身份验证和授权。但是我无法完成这项工作。到目前为止我有

*   确保`<machineKey>`所有应用程序的配置部分都相同。
*   以相同的方式设置我的提供程序：指向同一个数据库。
*   我什至尝试使用 aspnet:UseLegacyEncryption [per this post](http://forums.asp.net/t/1619902.aspx/1)。

到目前为止，我尝试过的任何事情都没有奏效。除非我将“3.5”应用程序切换为在版本下运行。4.0。然后两个站点都可以很好地共享身份验证令牌。对我来说不幸的是，这不是生产中的选择。

显然 3.5 和 4.0 之间有一些不同，但我不知道它是什么。我错过了什么？有没有其他人遇到过这个？你做了什么来解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:53:30.707

我建议在您正在使用的机器上检查 .NET 框架（3.5 和 4）的更新 - 我自己也遇到了同样的问题，这就是我目前正在尝试解决的问题。

我读过某些更新更改了创建身份验证令牌的方式。看起来我的本地版本 4 已更新，但 3.5 没有 - 就 3.5 而言，.net4 生成的令牌是不可接受的。

手指交叉！

# jquery - jQuery事件功能改进

> ID：10284236
> 
> 赞同：0
> 
> 时间：2012-04-23T16:14:12.830
> 
> 标签：jquery

这是我用来更新网页并转到第二页的一个小功能：

```
jct.find("input[name='btnChkt']").on("click",function({ 
     $.post("/cinc.php",jct.serialize(),function() {
         $.ajax({
              url:"/minc.php", 
              type:"GET", 
              success:function(a) {
                  hh.mc.html(a).hide();
              },
              error:function(a) {
                   ajerr(a)
              },
              cache:!1
         });
         ch("/chinc.phpstep=1","get");
         return!1
     })
 }); 
```

它的作用是：当单击输入按钮时，该函数序列化页面内容并将数据传输到 `/minc.php` 存在侧边栏（但实际上是隐藏的）的第二个页面，然后确保该第二个页面的内容仍然隐藏（ `hh.mc.html(a).hide()` 位）；然后使用 . 在第三页中显示这两个过程的结果 `/chinc.php?step=1` 。

在我看来，步骤太多了，我不禁觉得这可以大大简化，但到目前为止，我试图简化的一切似乎都破坏了功能。

任何想法都非常感激。（我是新手——我们都必须从某个地方开始！！）

# javascript - Onclick Javascript 函数添加图像

> ID：10284238
> 
> 赞同：0
> 
> 时间：2012-04-23T16:14:17.350
> 
> 标签：javascript, onclick

我正在尝试添加一个功能，当客户单击小缩略图时，它会添加图像。请参阅下面的代码。

```
<html>
<head>

<script type="text/javascript">
<!--

function addimage2() { 
      var img = document.createElement("img");
      img.src = "swatch.jpg"; 
      img.height = 75; 
      img.width = 113;
      img.style.top=800;
      img.style.right=100;
      document.body.appendChild(img);
    }

//-->
</script>
</head>
<body>
    <table width="100%" border="0" cellspacing="0" cellpadding="0">
    <tr>
       <td width="43%" rowspan="2"><img src="tuffet-diagram.jpg" width="270" height="326"></td>
      <td width="57%" height="162">Zone 1:</td>
   </tr>
  <tr>
      <td>Zone 2: </td>
  </tr>
  <tr>
     <td colspan="2">Zone 1 color:
     <img src="swatch-sm.jpg" alt="swatch-sm" onClick="addimage2();"></td>
  </tr>
  <tr>
     <td colspan="2">Zone 2 color:</td>
  </tr>
</table>
</body>
</html> 
```

它不断添加在缩略图旁边，而不是指定位置的位置，例如当客户单击 Zone1 样本时，它应该添加到 Zone 1 区域等。

这是我页面的链接：http: [//www.manufacturingsolutionscenter.org/salma/tuffet-color.html](http://www.manufacturingsolutionscenter.org/salma/tuffet-color.html)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:18:35.760

该脚本正在执行您指示它执行的操作 - 将新图像附加到文档正文： `document.body.appendChild(img);`

这字面意思是“将这个新元素作为 body 标签的子元素添加”。这会将新标签放在`</body>`. 如果您想在别处添加新图像，请定位您想要添加的精确位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:25:49.013

尝试这个 ：

```
function addimage2(where) { 
  var img = document.createElement("img");
  img.src = "swatch.jpg"; 
  img.height = 75; 
  img.width = 113;
  img.style.top=800;
  img.style.right=100;
  where.parentNode.appendChild(img);
} 
```

和

```
<img src="swatch-sm.jpg" alt="swatch-sm" onClick="addimage2(this);"> 
```

这个想法是提供必须在函数调用中添加新图像的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:19:16.243

这段代码：

```
document.body.appendChild(img) 
```

确定图像的去向。您需要确定应该将图像附加到哪个元素并将其放置在那里。

顺便说一句，如果您使用 JQuery ，这种类型的文档操作会*非常容易。*

# android - 检查应用程序是否正在运行？

> ID：10284241
> 
> 赞同：2
> 
> 时间：2012-04-23T16:14:29.780
> 
> 标签：android, android-service

服务是否可以检查以下内容

1.  应用程序是否正在运行？
2.  如果是，应用程序运行是后台还是前台？请提出一些方法来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:18:33.513

您需要使用[getRunningTasks](http://developer.android.com/reference/android/app/ActivityManager.html#getRunningTasks%28int%29)来了解应用程序是否正在运行。

从文档：

公共列表 getRunningTasks (int maxNum)

返回当前正在运行的任务的列表，最近的是第一个，之后是较旧的。

为此，您应该将其包含在您的 AndroidManifest.xml 中

```
<uses-permission android:name="android.permission.GET_TASKS" /> 
```

关于应用程序运行后台/前台请参阅此[链接](https://stackoverflow.com/questions/3667022/android-is-application-running-in-background)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:23:19.327

```
List<RunningAppProcessInfo> apps = ((ActivityManager) _context.getSystemService(Context.ACTIVITY_SERVICE)).getRunningAppProcesses(); 
```

...这就是您获取每个正在运行的应用程序的方式，只需使用“apps.get(i).processName”或 sth 来获取您可以检查的进程名称。

并`<uses-permission android:name="android.permission.GET_TASKS" />`在您的清单中使用，以确保您拥有正确的权限。

# database - 这是什么类型的数据库？

> ID：10284248
> 
> 赞同：1
> 
> 时间：2012-04-23T16:15:00.970
> 
> 标签：database

嗨，我的一位客户被他们的 SEO 公司搞砸了。该公司使用了相当广泛的 PHP 脚本，该脚本依赖于来自其服务器的数据馈送。我在用户服务器上的几个 .txt 文件中找到了此提要的副本，它看起来像是某种形式的数据库格式。在我看来，它不像 MySQL，所以我想知道你们是否可以通过识别它来帮助我？

一个片段如下：

```
{"filename":"example xx Example","content":[{"title":{"1":"xx example\r\nexample in xx\r\nexample in the xx region\r\nexample in the xx area","2":"","3":"","4":""} 
```

这只是给你一个想法的一部分。

我希望能够删除 Feed 并创建一个 PHP 文件，该文件可以读取脚本发送的变量，然后最好从 MySQL 数据库中输出它应该输出的内容。但是我需要先把它从上面的形式转换成 MySQL。

关于格式和转换的任何想法？

非常感谢，

凯文

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T16:17:26.697

它看起来就像人们通常会存储在文档数据库（如[MongoDB](http://www.mongodb.org/) ）中的内容。格式是自由格式[JSON](http://json.org/)，因此您需要自己解析和解释它。如果您使用 PHP，[`json_decode()`](http://php.net/json_decode)将通过获取您拥有的 JSON 字符串并将其转换为原生 PHP 数组来帮助解析。然后，您可以对生成的数组执行任何操作，包括将它们保存到 MySQL 数据库或从它们生成 RSS 提要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:17:46.537

看起来像 JSON

[http://json.parser.online.fr/](http://json.parser.online.fr/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T16:17:55.403

那是 JSON 数据。

你可以在这里阅读更多关于它的信息：http: [//www.json.org/](http://www.json.org/)

# visual-studio - Visual Studio 11 安装错误

> ID：10284249
> 
> 赞同：3
> 
> 时间：2012-04-23T16:15:06.563
> 
> 标签：visual-studio, visual-studio-2012

尝试安装 Visual Studio 11 时出现错误：

日志文件显示：

> [13F0:1D38][2012-04-23T12:53:01]: MUX: ExecuteError: Package (vs_professionalcore) failed: Error Message Id: 1316 ErrorMessage: Error 1316.A network error occurred while reading from the file: C :\Windows\Installer\vs_professionalcore.msi

我已经使用 ISO 和 Web 安装程序尝试了 Professional 和 Ultimate 版本。我总是得到同样的错误。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-27T20:24:49.980

我在使用 Visual Studio 2013 Premium 时遇到了同样的问题。我只是从[http://www.visualstudio.com/en-us/downloads](http://www.visualstudio.com/en-us/downloads)下载了 iso ，然后将 vs_professionalcore.msi 和相关的 cab 文件复制到 C:\Windows\Installer\ 中。之后，执行卸载成功。

对于 Visual Studio 2013，msi 和 cab 文件位于：IsoRoot\packages\professionalcore\Setup

试试看！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:47:53.793

您的计算机是否在域中？这可能是这个线程中的问题：http: [//social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/b5f6849f-843f-494d-a1dd-fdf36657bcab](http://social.msdn.microsoft.com/Forums/en-US/toolsforwinapps/thread/b5f6849f-843f-494d-a1dd-fdf36657bcab)。

这是该线程的建议，但不知道是否是相同的问题：

* * *

**解决方法：** 使用本地帐户或 Live ID 安装 Windows 8 和 VS 2011 后，将您的计算机连接到直接的硬连线 Internet 连接（而不是通过您公司的 LAN）。运行 VS 2011 并获取此计算机的开发人员许可证。然后从互联网连接中拔出您的计算机，而是插入您公司的网络电缆。当您想连接到 Internet 时，请提供您的网络凭据和代理信息。现在的优势是您还可以连接到网络上位于 DMZ 后面的 Web 服务，并且设计器也可以工作 :)

# ffmpeg - 我如何使用 ffmpeg h264 编码器作为 directshow 过滤器

> ID：10284250
> 
> 赞同：0
> 
> 时间：2012-04-23T16:15:10.453
> 
> 标签：ffmpeg, directshow, h.264, mp4

我想将直播视频编码为 h264 并生成 mp4 文件。我正在使用directshow（图表）

如何将 ffmpeg 的 h264 编码器添加为 directshow 过滤器？

谢谢和问候， Vishal Parekh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T10:32:00.917

`ffmpeg`它本身不为实现的编码器提供 DirectShow 接口。因此，您需要一个`ffmpeg`衍生的工作，例如包装器。`ffdshow`并且[`ffdshow tryouts`](http://ffdshow-tryout.sourceforge.net/)是您似乎已经发现的流行选项。

# javascript - 关闭 iframe 并刷新父跨域

> ID：10284251
> 
> 赞同：5
> 
> 时间：2012-04-23T16:15:20.517
> 
> 标签：javascript, html, iframe

我有一个 iframe 加载到别人的页面上。当 iframe 关闭时，我想刷新父页面。

我目前采用类似于此处描述的哈希技巧：[关闭 iframe 跨域](https://stackoverflow.com/questions/2182027/close-iframe-cross-domain)

这种方法虽然在 IE9 中存在安全问题，但我仍在寻找更好的解决方案或 IE 解决方法。

有任何想法吗？

相关：[卸载刷新父页面上的 IFrame](https://stackoverflow.com/questions/3871363/iframe-on-unload-refresh-parent-page/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T16:58:03.180

我认为唯一可靠的方法是在现代浏览器中使用 postMessage 进行跨域通信，尚未对其进行测试，但请检查此代码部分……当然，这仅在“别人的页面”可以更改时才有效

所以如果你的页面在里面：

```
var parent = window.parent;
if (parent && parent.postMessage) {
  parent.postMessage("closed");
} 
```

在其他人页面上：

```
window.onmessage = function(event) {
  if (event.data === "closed") {
    location.reload();
  }
}; 
```

# cython - 使用 Cython 将 malloc 的缓冲区从 C 转换为 Python 而不进行复制？

> ID：10284260
> 
> 赞同：4
> 
> 时间：2012-04-23T16:15:39.193
> 
> 标签：cython

在 Cython 中，假设我有一个 C 函数，它返回一个用 malloc() 分配的大缓冲区，并预计稍后会用 free() 释放。

现在我需要将此缓冲区作为（字节）str 对象传递给 Python，该对象将获得它的所有权，并在 str 对象消失后调用 free()。这可能吗？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T03:37:27.990

查看[https://gist.github.com/1249305](https://gist.github.com/1249305)以了解使用 numpy 的实现。

如果 numpy 不是一个选项，那么这样的事情可以工作，使用内存视图：

```
from libc.stdlib cimport free
cimport fn # in here is the c function with signature: char * char_ret(int n);

cdef class BuffWrap:
    cdef long siz
    cdef char * _buf
    cdef char[:] arr
    def __cinit__(self,  long siz):
        self.siz = siz
        self._buf = fn.char_ret(siz) # storing the pointer so it can be freed
        self.arr = <char[:siz]>self._buf
    def __dealloc__(self):
        free(self._buf)
        self.arr = None
    # here some extras:
    def __str__(self):
        if self.siz<11:
            return 'BuffWrap: ' + str([ii for ii in self.arr])
        else:
            return ('BuffWrap: ' + str([self.arr[ii] for ii in range(5)])[0:-1] + ' ... '
                    + str([self.arr[ii] for ii in range(self.siz-5, self.siz)])[1:])
    def __getitem__(self, ind): 
        """ As example of magic method.  Implement rest of to get slicing
        http://docs.cython.org/src/userguide/special_methods.html#sequences-and-mappings
        """
        return self.arr[ind] 
```

请注意，当所有对实例的引用消失并被垃圾收集时，该方法`__dealloc__`将释放指针持有的内存。`BuffWrap`这种自动释放是将整个事物包装在一个类中的一个很好的理由。

我不知道如何使用返回的指针并将其用于字节数组的缓冲区。如果有人知道，我很想看看。

# analytics - Open Graph Insights 开始出现的标准是什么？

> ID：10284266
> 
> 赞同：1
> 
> 时间：2012-04-23T16:15:48.030
> 
> 标签：analytics, facebook-opengraph, facebook-insights

我们的应用程序，popularise.com 几周前添加了开放图形操作的发布，我确实看到这些操作导致来自 FB 的推荐，但 developers.facebook.com 上的见解仅显示“看起来你还没有开始尚未发布到 Open Graph！” 信息。

我的问题是开放图表洞察开始出现的标准是什么？是否有一定数量的动作需要发布？还是特定时间段内的一定数量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T19:55:33.463

对于我的应用程序，在我的操作获得批准并且我们的用户开始将其发布到 Facebook 后，几乎立即开始显示开放图分析。

然而，从今天早上开始，我的应用程序的开放图洞察显示“看起来你还没有开始发布到开放图！”。所以我怀疑某种错误一定是最近才出现的。

# php - Doctrine 1.2 Pager - 它是否减少了从数据库请求的数据量

> ID：10284278
> 
> 赞同：0
> 
> 时间：2012-04-23T16:16:50.610
> 
> 标签：php, mysql, sql, zend-framework, doctrine

当我从数据库中抓取时，如果我有一个大约 1k 标记的结果集，我就想到了一些事情。

如果我使用 Doctrine(v1.2)_Pager 每页限制为 25 个。它是否将从数据库中提取的数据量减少到仅 25 个。或者它仍然抓取整个数据集然后减少它？

实现如下：

```
$perPage = 25;
$numPageLinks = 25;

$pager = new Doctrine_Pager($q, $input->page, $perPage);

$result = $pager->execute(array(), Doctrine::HYDRATE_ARRAY);

$pagerRange = new Doctrine_Pager_Range_Sliding(
    array('chunk' => $numPageLinks), $pager
);

$pagerUrlBase = '...';

$pagerLayout = new Doctrine_Pager_Layout(
    $pager, $pagerRange, $pagerUrlBase);

$pagerLayout->setTemplate('...');
$pagerLayout->setSelectedTemplate(
    '...'
);
$pagerLayout->setSeparatorTemplate('...');

$this->view->records = $result; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:08:15.827

Doctrine 的寻呼机只会请求 25 条记录。

您可能会将它与类似的东西混淆，`Zend_Paginator_Array`它需要一个完整的数组并根据配置对其进行修剪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:18:14.107

I recommend that you [enable mysql query log](http://melikedev.com/2012/03/22/mysql-enable-query-logging/), and tail the resulting log file. With it you can see the exact queries being issued for each request. As Mike B stated, `Doctrine_Pager` will issue a pagination query which will result in a limit, offset combination, but you may see other queries you didn't expect by tailing your query log file.

For example, while tailing the log file I was surprised to find that the Doctrine `unlink` methods were being duplicated. I still haven't figure out if it was Doctrine or Symfony issuing the duplicate delete queries, so I just wrote my own unlink which improved database/application performance.

# spring - 使用 HibernateTemplate 进行事务管理

> ID：10284285
> 
> 赞同：0
> 
> 时间：2012-04-23T16:17:17.740
> 
> 标签：spring, hibernate, spring-transactions

我正在使用 HibernateTemplate 并且有一个抽象类，我在其中编写了所有插入、删除、更新的东西。不，我有一个服务方法，我必须在两个表中输入 tbl_StudentMaster 和 tbl_StudenDetail ，我需要实现事务管理。我在应用程序上下文中设置了 autocommit false 并且也尝试过使用 org.springframework.transaction.interceptor.TransactionProxyFactoryBean 类，但我仍然无法实现事务。在我的 MVC 控制器中，我正在注入 StudentService。

```
<bean class="org.apache.commons.dbcp.BasicDataSource" id="dataSource" destroy-method="close" >
    <property name="driverClassName">
        <value>com.mysql.jdbc.Driver</value>
    </property>
    <property name="url">
        <value>url</value>
    </property>
    <property name="username">
        <value>root</value>
    </property>
    <property name="password">
        <value>root</value>
    </property>
    <property name="maxActive" value="100"/>
    <property name="maxWait" value="10000"/>
    <property name="maxIdle" value="10"/>
</bean>
<bean class="org.springframework.orm.hibernate3.annotation.AnnotationSessionFactoryBean" id="sessionFactory">
    <property name="dataSource">
        <ref bean="dataSource"/>
    </property>
    <property name="annotatedClasses">
        <list>
            <value>com.taher.test.model.StudentMaster</value>
            <value>com.taher.test.model.StudentDetail</value>
        </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="current_session_context_class">thread</prop>
            <!--<prop key="hibernate.hbm2ddl.auto">update</prop>-->
            <prop key="hibernate.cache.use_second_level_cache">true</prop>
            <prop key="hibernate.connection.autocommit">false</prop>
            <prop key="hibernate.cache.provider_class">net.sf.ehcache.hibernate.EhCacheProvider</prop>
            <prop key="hibernate.cache.provider_class">net.sf.ehcache.hibernate.SingletonEhCacheProvider</prop>
            <prop key="hibernate.max_fetch_depth">5</prop>
            <prop key="hibernate.default_batch_fetch_size">16</prop>
            <prop key="hibernate.jdbc.batch_size">25</prop>
            <prop key="hibernate.jdbc.fetch_size">8</prop>
            <prop key="hibernate.show_sql">false</prop>
            <prop key="hibernate.connection.release_mode">after_statement</prop>
        </props>
    </property>
</bean>
<bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager" p:sessionFactory-ref="sessionFactory" />

<bean  class="org.springframework.orm.hibernate3.HibernateTemplate" id="hibernateTemplate">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<bean id="hibernateInterceptor" class="org.springframework.orm.hibernate3.HibernateInterceptor">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>
<!--DAO BEANS-->
<bean name="HibernateQueryDao" class="com.taher.test.dao.HibernateQueryImpl">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>
<bean name="StudentMasterDao" class="com.taher.test.dao.StudentMasterImpl">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>
<bean name="StudentDetailDao" class="com.taher.test.dao.StudentDetailImpl">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<!--Service BEANS-->

<bean name="wrapedStudentService" class="com.taher.test.service.StudentService" autowire="no">
    <property name="studentMasterDao" ref="StudentMasterDao"/>
    <property name="studentDetailDao" ref="StudentDetailDao"/>
</bean>
<bean id="StudentService" class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean" abstract="true">
    <property name="transactionManager">
        <ref bean="transactionManager"/>
    </property>
    <property name="target">
        <ref bean="wrapedStudentService"/>
    </property>
    <property name="transactionAttributes">
        <props>
            <prop key="insertStudentDetail">PROPAGATION_REQUIRED,-Exception</prop>
            <prop key="*">PROPAGATION_REQUIRED,readOnly</prop>
        </props>
    </property>
</bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:35:21.863

是的，得到了​​解决方案：

我已经删除了 bean 'TransactionProxyFactoryBean' 并将`<tx:annotation-driven transaction-manager="transactionManager"/>`@Service 添加到我的类和 @Transactional 到我的方法......

# ruby - 未定义的方法 add_to_base

> ID：10284286
> 
> 赞同：23
> 
> 时间：2012-04-23T16:17:18.943
> 
> 标签：ruby, ruby-on-rails-3, methods

我正在与 activemerchant 合作，它在验证卡时引发了这个错误，这在 rails 3 中可以吗？提前谢谢你给所有人更多的权力

```
belongs_to :reservation

  attr_accessor :card_number, :card_verification

  validate :validate_card, :on => :create

  def validate_card
    unless credit_card.valid?
      credit_card.errors.full_messages.each do |message|
        errors.add_to_base "error"
      end
    end
  end

    def credit_card
    @credit_card ||= ActiveMerchant::Billing::CreditCard.new(
      :type               => card_type,
      :number             => card_number,
      :verification_value => card_verification,
      :month              => card_expires_on.month,
      :year               => card_expires_on.year,
      :first_name         => first_name,
      :last_name          => last_name
    )
  end 
```

它指向`Undefined method add_to_base`

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2012-04-23T16:31:57.980

`add_to_base`方法已从 rails 3 中删除。您应该`errors[:base] << "error"`改用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-08-26T16:18:27.233

我更喜欢以下，而不是接受的答案：

`errors.add :base, 'error message'`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-20T08:48:59.697

在您的模型中，只需：

```
:add_to_base=> false 
```

在您的控制器中访问它：

```
model_instance.errors.messages 
```

# mysql - SOLR - MYSQL - 查询结果

> ID：10284288
> 
> 赞同：1
> 
> 时间：2012-04-23T16:17:23.263
> 
> 标签：mysql, xml, solr

我正在使用 SOLR 和 MySQL。

**这是我的 data-config.xml**

```
<dataConfig>
  <dataSource type="JdbcDataSource" 
              driver="com.mysql.jdbc.Driver"
              url="jdbc:mysql://localhost/meishidb" 
              user="root" 
              password="root"/>
  <document>
    <entity name="id"
            query="SELECT 
                       p.id, 
                       p.occ_name
                   FROM 
                       BCARDS_OCCUPATION AS p">
            <field column="id" name='id'/>
            <field column="occ_name" name='occ_name'/>
    </entity>
  </document>
</dataConfig> 
```

**这些是添加到 schema.xml 的行**

```
<field name="id" type="int" indexed="true" stored="true" required="true"/>
<field name="occ_name" type="text" indexed="true" stored="true" required="true"/> 
```

查询运行良好，SOLR 将“n”个文档添加到索引中。问题在于查询索引；`'*:*'`SOLR 仅在我键入且仅关于文档 ID（而不是）时才给我结果`occ_name`！

```
<response>
<lst name="responseHeader">
<int name="status">0</int>
<int name="QTime">1</int>
<lst name="params">
<str name="indent">on</str>
<str name="start">0</str>
<str name="q">*:*</str>
<str name="version">2.2</str>
<str name="rows">10</str>
</lst>
</lst>
<result name="response" numFound="5" start="0">
<doc>
<str name="id">1</str>
</doc>
<doc>
<str name="id">2</str>
</doc>
<doc>
<str name="id">3</str>
</doc>
<doc>
<str name="id">4</str>
</doc>
<doc>
<str name="id">5</str>
</doc>
</result>
</response> 
```

如果我搜索：

`id:1`给我 id=1 的文档

`occ_name:1`给我“未定义的字段 occ_name”

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:17:25.333

我不知道您是否`fieldType text`在架构中创建，但默认架构中没有这样的 fieldType。

尝试`type="text_en"`在您的`occ_name`字段定义中使用。

顺便说一句（我总是建议同样的事情），要检查索引中的真正内容，请使用有史以来最伟大的 Lucene 工具，称为[Luke](http://code.google.com/p/luke/)。

# classloader - 在 JBoss 5 中从战争中加载类

> ID：10284290
> 
> 赞同：0
> 
> 时间：2012-04-23T16:17:37.867
> 
> 标签：classloader, war, jboss5.x, ear

我有一只耳朵，里面藏着一场战争。jar 位于 ear lib 目录中。

我需要从一个罐子里重写一个类，我在战争中写了它。

但是当我部署耳朵时，类加载器从 jar 中获取类，而不是从战争中获取。

我在war中的jboss-web.xml中设置了这个配置。我相信它会强制类加载器在 jar 之前从战争中获取类，但它不起作用。

```
<class-loading java2ClassLoadingCompliance="false">
    <loader-repository>
        com.example:archive=unique-archive-name
    <loader-repository-config>java2ParentDelegation=false</loader-repository-config>
    </loader-repository>
</class-loading> 
```

如何强制 jboss 类加载器在 jar 之前从战争中获取类？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T11:29:02.880

似乎战争的jboss-web.xml配置在嵌入耳朵时被忽略（参见 [http://www.openscope.net/2010/07/15/setting-up-a-jboss-instance- v5-x-class-loading/](http://www.openscope.net/2010/07/15/setting-up-a-jboss-instance-v5-x-class-loading/)）。
您是否尝试过使用**jboss-classloading.xml**文件并在战争中添加**顶级类加载器属性（参见**[http://phytodata.wordpress.com/2010/10/21/demystifying-the-jboss5-jboss-类加载-xml-file/](http://phytodata.wordpress.com/2010/10/21/demystifying-the-jboss5-jboss-classloading-xml-file/)）？

# xcode - Xcode 只允许我为 iOS 设备运行（无模拟器）

> ID：10284299
> 
> 赞同：68
> 
> 时间：2012-04-23T16:18:05.777
> 
> 标签：xcode, simulator

我刚刚将一个项目克隆到 Xcode 中，并试图在模拟器中运行它。但是，我唯一的选择是 iOS 设备。这只是这个项目独有的，我不知道如何解决它。还有其他人遇到这个并知道如何解决吗？

![截屏](../Images/3b3fcd7608fe24dd7ce6baf460cacb83.png)

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2012-06-02T18:52:36.273

在您的项目构建设置下

1.  选择部署部分
2.  将 iOS 部署目标更改为 iOS 5.0 或更低版本
3.  现在您可以继续将部署目标从设备更改为模拟器！

在我的情况下，部署目标设置为 5.1 版，我仍在运行带有从 xcode 4.3 复制的适当 JARS 的雪跃操作系统，以使其在运行 iOS 5.1 的设备上运行。

但是，我的模拟器还不支持 5.1 版，所以在我将部署目标更改为较低版本（例如 5.0 或 4.2）之前，它不会让我在模拟器上运行。

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2014-08-10T00:48:30.713

单击以定位或项目 > 构建设置 > 架构 > 支持的平台：更改为 iOS

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2015-03-21T16:53:01.780

对我有用的是转到窗口>设备并按左下角的加号按钮添加设备并选择要添加的模拟器。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-12-24T11:55:01.767

当我从别人那里下载一个项目并且他们的部署目标就像 10.2 并且我的 Xcode 没有完全更新所以它只支持到 10.0 时，我的问题就发生了。

解决方案是：

单击项目>>常规>>部署信息>>部署目标

从那里只需将其从灰色的数字更改为不是的数字。

[![在此处输入图像描述](../Images/ef6e9e04a72471bdef295d67af6c059d.png)](https://i.stack.imgur.com/NLgbY.png)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-10-28T07:29:27.930

没什么大不了的。我刚刚重新启动了 Xcode & iOS 模拟器。然后，它显示了所有的模拟器。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-05-21T19:07:45.113

从时间机器恢复后，我不得不重新安装 8.1 模拟器（设置 > 下载），然后在“窗口 > 设备 > + > 添加模拟器”中添加模拟器

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-12-16T09:30:51.297

对我来说，只需转到设置，选项卡“下载”并下载模拟器；）在更改计算机后附加（由 TimeMachine 解决）问候，

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-30T01:26:01.693

在 Build Settings 下，确认您已在`iOS Deployment Target`. 我的设置为未安装的 7.1（出现在下拉列表中的不同部分）。选择 7.0（或显然下载 7.1）就可以了。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-06-02T15:23:57.083

发生在我身上的是，我使用安装了最新 iOS 8.3 的设备创建了一个项目。当我将该项目移动到另一台没有设备的计算机时，模拟器并没有出现供我选择，只有设备（我没有）。原因是模拟器只升到了 8.1（显然低于 8.3）。所以我在 Build Settings 中将“Deployment>iOS Development Target”更改为 8.1（从 8.3），模拟器按预期出现在 Xcode 中。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-10-15T06:20:26.630

现在您只需从 Product -> Destination -> 选择设备更改设备/模拟器。然后运行您的应用程序。[在此处输入图像描述](http://i.stack.imgur.com/FUe05.png)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-05-03T18:34:52.943

如果上述步骤均无效，请检查您的设备是否已插入并打开。（以上步骤都对我不起作用，并且设备已插入。哦，好吧。）但是，我有 Xcode 7.3。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2017-04-21T06:47:46.650

如果您在**Xcode-8**上遇到此问题，则按照相同的过程，您可以通过选择**Targets**而不是**Projects**来设置部署目标，并降低**部署目标**，如下图所示：-

[![在此处输入图像描述](../Images/6a1566f2ff26bf2dc5f06c8907d3cf0c.png)](https://i.stack.imgur.com/Yr357.png)

您现在可以选择模拟器设备。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-04-26T07:37:49.667

转到 BuildSettings，查看 Code Signing... 在 Code Signing Identity 下，将所有权利更改为“Don't Code Sign”。

希望能帮助到你。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-11-10T07:32:26.593

显然，我认为存在某种严重的问题。事实上，我通过从 Product/Destination 中选择丢失的 iOS 模拟器来修复它。毕竟没什么大不了的。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-06-14T15:28:29.383

我尝试了可以​​在 stackoverflow 上找到的所有建议解决方案。

最终，我删除了 Xcode 应用程序并从 App Store**再次下载。**安装后，模拟器又回来了。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2015-12-09T10:23:40.053

1.  单击您的项目根目录。
2.  然后转到构建设置。
3.  然后设置iOS部署目标5.0
4.  然后选择项目左上角的 iphone6。

    [http://i.stack.imgur.com/KJxaA.png](http://i.stack.imgur.com/KJxaA.png)

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2017-03-13T10:46:40.283

首先你需要安装模拟器

安装模拟器，然后，

1.  打开 Xcode，
2.  转到首选项，
3.  选择组件
4.  单击您选择的模拟器，然后它将开始下载和安装模拟器的过程

将模拟器添加到 Xcode [Click for Apple Reference](https://developer.apple.com/library/content/documentation/IDEs/Conceptual/iOS_Simulator_Guide/GettingStartedwithiOSSimulator/GettingStartedwithiOSSimulator.html) 1\. 从 Spotlight 搜索中输入“模拟器”并按 Enter 2\. 选择硬件 > 设备 > 管理设备。Xcode 打开设备窗口。

3.  在左列的底部，单击添加按钮 (+)。
4.  在出现的对话框中，在 Simulator Name 文本字段中输入名称，然后从 Device Type 弹出菜单中选择设备。
5.  从“iOS 版本”弹出式菜单中选择操作系统版本。
6.  或者，如果您要使用的 iOS 版本不在 iOS 版本弹出菜单中，请选择“下载更多模拟器”并按照步骤下载模拟器。

7.  单击创建。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-10-13T05:19:12.473

你可以做些什么来在你的 xCode 中添加模拟器是去

```
Windows -> Devices 
```

在左下角，按加号按钮。通过这种方式，您可以根据需要添加不同的操作系统模拟器。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-02-12T06:56:08.470

对于它的价值，我的问题似乎是我同时运行了两个不同版本的 xcode（8.2 和 9.2）。Xcode 可能会获取一个模拟器列表，并将其作为资源锁定并使其对其他版本的 xcode 不可用，以避免出现问题。我杀死了 (cmd+q) 两个 xcode 实例，重新启动了我当时需要的那个，然后模拟器再次出现。

希望这对其他人有所帮助，因为我花了相当多的时间来解决这个问题，因为这是一个“断断续续”的问题。

# php - PHP 多文件上传

> ID：10284300
> 
> 赞同：0
> 
> 时间：2012-04-23T16:18:09.067
> 
> 标签：php, file-upload

文件上传的 HTML：

```
 <form enctype="multipart/form-data" action="" method="POST">
                <br/>Upload Featured Image: <input name="imagefiles" type="file" /><br/>
                <br/>Upload Gallery Image 1: <input name="imagefiles" type="file" /><br/>
                <br/>
                <input type="submit" name="submit" value="Add Product" />

</form> 
```

为了处理上传，我这样做：

```
$imagefiles = $_FILES['imagefiles'];
               foreach ($imagefiles['name'] as $key => $value) ----> [Line 25 in file]
                {

                } 
```

但是，我收到了这个错误：

```
Warning: Invalid argument supplied for foreach() in /var/www/html/addProductForm.php on line 25 (Edit) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:05:20.937

您没有使用正确的参数名称。您必须添加`[]`以使您的输入成为一个数组，否则最后一个元素将覆盖以前具有相同名称的元素..

试试下面的 HTML：

```
<form enctype="multipart/form-data" action="" method="POST">
   <br/>Upload Featured Image: <input name="imagefiles[]" type="file" /><br/>
   <br/>Upload Gallery Image 1: <input name="imagefiles[]" type="file" /><br/>
   <br/>
   <input type="submit" name="submit" value="Add Product" />
</form> 
```

# coldfusion - CommonSpot 中的 RSS 提要

> ID：10284302
> 
> 赞同：0
> 
> 时间：2012-04-23T16:18:13.567
> 
> 标签：coldfusion, rss, commonspot

我是 CommonSpot 的新手，现在我需要为 CommonSpot 中的 RSS 提要编写一些代码。我怎样才能创建一个灵活的 RSS 提要，因为用户应该能够创建一个链接，然后将其标记为通过 RSS 联合。

我不确定这是否适合我的问题。

就像这个[http://water.epa.gov/commonspot/help/content/contributors_reference/create_rss_feed.htm中的一个](http://water.epa.gov/commonspot/help/content/contributors_reference/create_rss_feed.htm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:21:44.987

我怀疑这个问题有一个简单的答案，但我会从 www.riaforge.org 获取 Ray 的 RSS.cfc 作为起点。它接受一个查询作为参数，并返回一个格式正确的 RSS 提要，用于您指定的版本。我敢打赌，其余的将是自定义编程。

# c# - 无法将类型“System.Int64”转换为类型“System.Object”。LINQ to Entities 仅支持转换实体数据模型基元类型

> ID：10284303
> 
> 赞同：9
> 
> 时间：2012-04-23T16:18:14.097
> 
> 标签：c#, visual-studio-2010, c#-4.0, entity-framework-4

我创建了一个**EF 4** & **C#**来获取一些数据。我正在使用 Linq。它如下：

```
 public List<object> GenerateCallTrackingReport(int startRowIndex, int maximumRows, int createdByID)
    {
        var query = from c in this.ObjectContext.CallLogs                        
                    select new
                    {
                        CallLogID = c.CallLogID,
                        DomainName = c.CallDomain.FullName,
                        CreatedByID = c.CreatedByID,
                        CreatedBy = c.CreatedByUser.FirstName + " " + c.CreatedByUser.LastAccessIPN,
                        CalledOn = c.CallDate,
                        IssueResolutionTime = c.IssueResolutionTime,                            
                        CallType = c.CallType.FullName,
                        CallDescription = c.CallDescription,
                        CustomerName = (c.CustomerID > 0 ? c.Customer.FirstName + " " + c.Customer.LastAccessIPN : c.TempCaller.FirstName + " " + c.TempCaller.LastName),
                        CustomerEmail = (c.CustomerID > 0 ? c.Customer.Email : string.Empty),
                        CustomerResponse = c.Response.FullName,
                        IsPending = c.IsPending,
                        NeedFurtherContact = c.NeedFurtherContact
                    };

        if (createdByID > 0)
            query = query.Where(c => c.CreatedByID == createdByID);

        if (maximumRows > 0)
            query = query.Skip(startRowIndex).Take(maximumRows);

        return query.ToList<object>();

    } 
```

这导致以下错误：

```
Unable to cast the type 'System.Int64' to type 'System.Object'. LINQ to Entities only supports casting Entity Data Model primitive types. 
```

任何想法我得到这个错误？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T16:24:15.253

接到`ToList`电话后，您希望在 C# 中执行它，而不是在数据库中。用作一种说法，“停止在`AsEnumerable`数据库中做这些事情，在 C# 中做。”

`ToList`在结尾之前添加它，以便在数据库上完成其他所有操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T19:30:53.617

## 解决

我有两个问题，每个问题都会导致此错误：

**1** . 我在访问*NULLABLE*实体属性时没有检查它们是否有价值。说*CustomerID*是*NULLABLE*，所以我的查询变成了这样！

```
 var query = from c in this.ObjectContext.CallLogs                        
                select new
                {
                    CallDescription = c.CallDescription,
                    CustomerID = c.CustomerID.HasValue ? c.CustomerID.Value : 0,
                    CustomerName = c.CustomerID.HasValue ? c.Customer.Name : ""
                };

    if (maximumRows > 0)
        query = query.Skip(startRowIndex).Take(maximumRows);

    return query.ToList<object>(); 
```

因此，只需在访问之前通过其*HasValue*属性检查任何空值（选择部分中的第二行）。

**2** . 我还试图在 select 语句中将整数转换为字符串。所以我只是决定在 HTML 中进行转换，而不是直接在这里进行。这解决了我的问题。

希望这对某人有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:29:10.067

首先，我不会检索整个表，然后像您在此处所做的那样在 C# 中对完整数据集进行查询。像这样将 linq 链接到实体方法将使其更快 - 大量，因此当您获得大量数据集时：

```
this.ObjectContext.CallLogs
    .Where(c => c.CreatedByID == createdByID)
    .Skip(startRowIndex)
    .Take(maximumRows)
    .Select(new
        {
                        CallLogID = c.CallLogID,
                        DomainName = c.CallDomain.FullName,
                        CreatedByID = c.CreatedByID,
                        CreatedBy = c.CreatedByUser.FirstName + " " + c.CreatedByUser.LastAccessIPN,
                        CalledOn = c.CallDate,
                        IssueResolutionTime = c.IssueResolutionTime,                            
                        CallType = c.CallType.FullName,
                        CallDescription = c.CallDescription,
                        CustomerName = (c.CustomerID > 0 ? c.Customer.FirstName + " " + c.Customer.LastAccessIPN : c.TempCaller.FirstName + " " + c.TempCaller.LastName),
                        CustomerEmail = (c.CustomerID > 0 ? c.Customer.Email : string.Empty),
                        CustomerResponse = c.Response.FullName,
                        IsPending = c.IsPending,
                        NeedFurtherContact = c.NeedFurtherContact
        })
    .ToList(); 
```

其次，我不知道确切的问题，但是创建这样的动态对象列表并不是一个好主意。`CallLogModel`使用您放入对象中的属性创建一个类，如下所示：

```
.Select(new CallLogModel
        {
                        CallLogID = c.CallLogID,
                        DomainName = c.CallDomain.FullName,
                        CreatedByID = c.CreatedByID,
                        CreatedBy = c.CreatedByUser.FirstName + " " + c.CreatedByUser.LastAccessIPN,
                        CalledOn = c.CallDate,
                        IssueResolutionTime = c.IssueResolutionTime,                            
                        CallType = c.CallType.FullName,
                        CallDescription = c.CallDescription,
                        CustomerName = (c.CustomerID > 0 ? c.Customer.FirstName + " " + c.Customer.LastAccessIPN : c.TempCaller.FirstName + " " + c.TempCaller.LastName),
                        CustomerEmail = (c.CustomerID > 0 ? c.Customer.Email : string.Empty),
                        CustomerResponse = c.Response.FullName,
                        IsPending = c.IsPending,
                        NeedFurtherContact = c.NeedFurtherContact
        }) 
```

# eclipse - 在 Eclipse 下使用 Subversive 将文件夹放入版本控制中

> ID：10284315
> 
> 赞同：0
> 
> 时间：2012-04-23T16:18:57.457
> 
> 标签：eclipse, svn, merge, conflict

我在 SVN 控制下有一个分支项目，我正在使用 Eclipse 进行编程，并且我使用 Subversive（SVN Eclipse 插件）检查了它。

我希望能够对相对稳定的代码版本进行更改，同时对分支进行一些相当大的更改。今天对core做了一些改动，尝试将它们合并到分支中，不出所料，发现了少量的冲突。然而，只有一个真正的源冲突——变化几乎没有重叠——所以我认为事情进展顺利。

不幸的是，我在分支代码中所做的所有（相当重大的）更改现在显然不受版本控制。单击“添加到版本控制”只会给我一个 java 文件列表，但包（即文件夹）不受版本控制，Subversion 似乎不允许这样做。

我在这里看到的几乎所有 SVN 帖子都假设 SVN 是通过 shell 使用的。我没有通过外壳使用它。我在 Windows 下使用 Tortoise 和 Eclipse。

我确实尝试了一个想法，即使用 Tortoise 在存储库的辅助副本中创建一个“未版本化”文件夹；当我尝试进行更新时，这导致了不同的冲突，它说未版本化的文件夹与版本化的文件夹发生冲突。

十年前我上次合并某些东西时，并没有那么痛苦，尽管我们承认我们是通过命令行完成的。有人可以帮忙吗？

一些错误

```
svn: 'C:\Users\PCW\workspace\NewsRack Dev Branch\src\com\nrl\newsrack\billing' is not under version control

svn: 'C:\Users\PCW\workspace\NewsRack Dev Branch\src\com\nrl\newsrack\billing' is not a working copy 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:06:12.130

你的问题有点含糊，所以我会尝试给出一些关于看什么的提示：

1.  找到（在您的 Windows 资源管理器中）Eclipse 的工作区目录和其中的 Eclipse 项目。是否受版本控制？TortoiseSVN 应该显示它的一个图标来表示它。
2.  如果它不受版本控制，则必须添加它，但请注意，仅应添加您希望存在于 SVN 存储库中的资源。因此，您必须添加项目的根文件夹，但必须保留所有二进制文件。
3.  如果是在版本控制下，找到第一个不是的文件夹并将其添加到 Subversion。
4.  然后，您可以整体提交。

如果您使用像 Subversive 或 Subclip 这样的 Eclipse 插件会容易得多。两者都可以选择将整个项目添加到 Subversion（在 Subversive 中，命令名为`Share project`），然后您的插件将负责添加哪些资源，哪些不添加。

当您为您的问题添加更多信息时，我将在我的答案中添加更多信息:-)

# c++ - 更改数组值的指针算法

> ID：10284318
> 
> 赞同：0
> 
> 时间：2012-04-23T16:19:11.683
> 
> 标签：c++

这是对先前问题的后续问题。

我从自己的方式中学到了一些错误，但还有其他问题。我的目标是在不使用任何全局变量的情况下将一种方法中的局部数组从另一种方法更改。

```
void methodOne(){

        int myArray[10] = {0};
        int *pMyArray = myArray;

        methodTwo(&*pMyArray);
} 
```

这应该是声明一个空值数组并传递对第二个数组的引用，因为我在这里展示了如何正确执行[此](https://stackoverflow.com/questions/10283200/pointer-to-int-array-passing-and-using-it-from-another-method/10283358#10283358)操作。

```
void methodTwo(int *passedPointer){

        int *localPointer =  passedPointer;

} 
```

接下来我想从 methodTwo 更改 myArray 的值。因此，要更改第一个`[0]`元素，我会说：

```
*localPointer  = 1; 
```

它是否正确？

然后要更改下一个元素，我会使用以下方法增加指针：

```
localPoint++;
*localPointer = 2; 
```

这会改变 myArray 中的第二个值吗？我不确定那是正确的方法吗？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:24:16.907

是的，这一切看起来应该可以工作。通常，当您将数组传递给函数时，您不会首先分配给局部变量 - 您只需将数组的名称作为参数传递：`methoTwo(myArray);`. 编译器会自动将数组名转换为指向数组开头的指针。

另请注意，您可以在接收端使用数组样式表示法，例如：

```
localpointer[0] = 1;
localpointer[1] = 2; 
```

...也是合理的，将完成与您的相同的

```
*localpointer = 1;
++localpointer;
*localpointer = 2; 
```

对于它的价值，另一种选择是：

```
*localpointer++ = 1;
*localpointer = 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:26:08.843

首先，您错误地传递了数组。数组只不过是指向第一个元素的指针，因此您无需将其地址传递给`MethodTwo`. 但是，您应该做的是将该数组中的元素数传递给`MehtodTwo`：

```
 methodTwo(MyArray, 10); 
```

由于数组只不过是指向第一个元素的指针，因此您可以直接索引到数组而无需使用指针算法：

```
void methodTwo(int passedArray[], size_t n)
// alternative void methodTwo(int *passedArray, size_t n)
{

  passedArray[0] =  passedPointer;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:30:38.943

不，这是错误的。非常错误。数组到指针衰减真的非常糟糕，你永远不应该使用它。使用基于类的包装器，如`std::array`，并将一对迭代器传递给 MethodTwo。

# validation - symfony2 验证组 - 只有一组有效

> ID：10284322
> 
> 赞同：1
> 
> 时间：2012-04-23T16:19:18.987
> 
> 标签：validation, symfony

这是我的表格：

```
$forumuser = new Forumuser();
        $passwordform = $this->createFormBuilder($forumuser, array('validation_groups' => array('userSettings')))
            ->add('passwordold', 'password', array('attr' => array('autocomplete' => 'off'), 'required' => false, 'error_bubbling' => true, 'property_path' => false))
            ->add('password', 'repeated', array(   'type' => 'password',
                                                        'invalid_message' => 'user.myprofile.password.repeat',
                                                        'options' => array('attr' => array('autocomplete' => 'off'), 'required' => false, 'error_bubbling' => true)                                                    
                                                    )
            )
            ->getForm(); 
```

这是 ForumUser.class 中带有验证注释的属性：

```
/**
     * @var string $password
     *
     * @ORM\Column(name="password", type="string", length=200, nullable=false)
     * @Assert\NotBlank(message="forumuser.password.notblank", groups={"userRegister", "userSettings"})
     * @Assert\MinLength(limit="4", message="forumuser.password.minlength", groups={"userRegister", "userSettings"})
     */
    private $password; 
```

我想使用组**userSettings**但绑定后 $passwordform->getErrors() 为空。当我使用**userRegister**组时，所有其他属性都经过验证。这意味着，我所做的一切，密码属性都没有经过验证。

有人知道我在做什么错吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:14:40.687

```
You have to define on form type , diiferent group name  like this 

public function getDefaultOptions(array $options)
    {
        return array(
            'data_class' => '',
            'cascade_validation' => true,

            'validation_groups' => array('user_settings'),
        );
    } 
```

和另一个一样。

# matlab - matlab中分割被遮挡叶子的分水岭分割算法

> ID：10284331
> 
> 赞同：5
> 
> 时间：2012-04-23T16:19:40.060
> 
> 标签：matlab, image-processing, watershed

主要任务是消除叶子的复杂背景，并在 MATLAB 中从遮挡的叶子图像中提取目标叶子。为了消除背景，我应用了 K-means 聚类算法。现在的主要任务是使用分水岭分割算法从被遮挡的叶子中分割出叶子。我无法为每一片叶子找到完美的片段。请帮我。我已经上传了示例图像和分水岭分割代码。

**原始图像** ![在此处输入图像描述](../Images/c486b8bcb8451abaf7a1e0f0a6b874aa.png)

**使用K-Means聚类算法消除背景后的图像和叠加在原始图像上的分水岭分割** ![在此处输入图像描述](../Images/7973bad01cc77efcbf97bbb65de740d5.png)

我希望主要的中间叶子是一个片段，以便我可以提取它。

我在下面给出了分水岭分割代码

```
function wateralgo(img)

F=imread(img);

F=im2double(F);

%Converting RGB image to Intensity Image
r=F(:,:,1);
g=F(:,:,2);
b=F(:,:,3);
I=(r+g+b)/3;
imshow(I);

%Applying Gradient
hy = fspecial('sobel');
hx = hy';
Iy = imfilter(double(I), hy, 'replicate');
Ix = imfilter(double(I), hx, 'replicate');
gradmag = sqrt(Ix.^2 + Iy.^2);
figure, imshow(gradmag,[]), title('Gradient magnitude (gradmag)');

L = watershed(gradmag);
Lrgb = label2rgb(L);
figure, imshow(Lrgb), title('Watershed transform of gradient magnitude (Lrgb)');

se = strel('disk',20);
Io = imopen(I, se);
figure, imshow(Io), title('Opening (Io)');
Ie = imerode(I, se);
Iobr = imreconstruct(Ie, I);
figure, imshow(Iobr), title('Opening-by-reconstruction (Iobr)');

Ioc = imclose(Io, se);
figure, imshow(Ioc), title('Opening-closing (Ioc)');

Iobrd = imdilate(Iobr, se);
Iobrcbr = imreconstruct(imcomplement(Iobrd), imcomplement(Iobr));
Iobrcbr = imcomplement(Iobrcbr);
figure, imshow(Iobrcbr), title('Opening-closing by reconstruction (Iobrcbr)');

fgm = imregionalmin(Iobrcbr);
figure, imshow(fgm), title('Regional maxima of opening-closing by reconstruction (fgm)');

I2 = I;
I2(fgm) = 255;
figure, imshow(I2), title('Regional maxima superimposed on original image (I2)');

se2 = strel(ones(7,7));
fgm2 = imclose(fgm, se2);
fgm3 = imerode(fgm2, se2);
fgm4 = bwareaopen(fgm3, 20);
I3 = I;
I3(fgm4) = 255;
figure, imshow(I3), title('Modified regional maxima superimposed on original image (fgm4)');

bw = im2bw(Iobrcbr, graythresh(Iobrcbr));
figure, imshow(bw), title('Thresholded opening-closing by reconstruction (bw)');

D = bwdist(bw);
DL = watershed(D);
bgm = DL == 0;
figure, imshow(bgm), title('Watershed ridge lines (bgm)');

gradmag2 = imimposemin(gradmag, bgm | fgm4);
L = watershed(gradmag2);
I4 = I;
I4(imdilate(L == 0, ones(3, 3)) | bgm | fgm4) = 255;
figure, imshow(I4), title('Markers and object boundaries superimposed on original image (I4)');

Lrgb = label2rgb(L, 'jet', 'w', 'shuffle');
figure, imshow(Lrgb), title('Colored watershed label matrix (Lrgb)');

figure, imshow(I), hold on
himage = imshow(Lrgb);
set(himage, 'AlphaData', 0.3);
title('Lrgb superimposed transparently on original image');
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-08T08:30:21.393

我认为您应该尝试前景提取算法而不是一般分割。一种这样的算法是[GrabCut](http://research.microsoft.com/en-us/um/cambridge/projects/visionimagevideoediting/segmentation/grabcut.htm)。另一件有用的事情是在尝试提取前景对象之前，在图像表示中实现某种程度的照明变化。一种方法是在[Chong 色彩空间](http://www.cs.harvard.edu/~sjg/papers/cspace.pdf)中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T15:25:18.387

如果用户可以进行任何交互，那么使用 GrabCut（如 @Victor May 所述）或更基本的[交互式图形切割](http://www.csd.uwo.ca/~yuri/Papers/iccv01.pdf)，您的分割会更好。

否则，自动分割很难完美适用于各种图像。也许您可以尝试一些后处理，其中基于相似性度量（或基于两个段之间的梯度强度？）比较和合并相邻区域。

# ruby-on-rails-3 - 让 Twitter Bootstrap 在这里工作的最简单方法是什么？

> ID：10284332
> 
> 赞同：0
> 
> 时间：2012-04-23T16:19:45.073
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

我目前正在使用 rails 3.0.12 并想利用 Twitter Bootstrap 的 Jquery 下拉菜单

将我的应用程序升级到 Rails 3.1 还是最新版本的 Rails 最好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:51:49.853

正如 Terry 所说，Bootstrap 是一个客户端框架，与您的 Rails 版本没有任何关系。

但是，您可能希望直接使用 gem 将引导程序直接集成到您生成的脚手架中，例如：

[https://github.com/seyhunak/twitter-bootstrap-rails](https://github.com/seyhunak/twitter-bootstrap-rails)

在这种情况下，您可以依赖 gem 当前支持的版本并从这里做出选择。**不过，我不建议这样做，因为与您自己集成 Bootstrap 相比，您对应用程序 UI 的控制更少。**

# iphone - 在 iPhone 应用上使用 nsurlrequest 进行编码

> ID：10284333
> 
> 赞同：0
> 
> 时间：2012-04-23T16:19:51.813
> 
> 标签：iphone, objective-c, encoding, nsstring, nsurlrequest

```
-(void)uploadJob:(Job *)job
{
    NSLog(@"Server: uploadJob: called");
    NSString *preparedJob=[Database prepareJobForUploading:job];
    if ([preparedJob isEqualToString:@""])
    {
        return;
    };
    NSLog(@"preparedJob: %@", preparedJob);
    NSString *post = [NSString stringWithFormat:@"accessToken=%@&job=%@", self.key, preparedJob];
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:NO];
    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
    [request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@upload.aspx", serverAPIPath]]];
    [request setHTTPMethod:@"POST"];
    [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
    [request setHTTPBody:postData];    
    NSURLResponse *response;
    NSError *error;
    NSData *urlData=[NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
    NSLog(@"responseData: %@", [urlData description]);
    NSString *responseString=[NSString stringWithFormat:@"response: %d. description: %@",[(NSHTTPURLResponse *)response statusCode],[NSHTTPURLResponse localizedStringForStatusCode:[(NSHTTPURLResponse *)response statusCode]]];
    NSString *resultString=[[NSString alloc] initWithData:urlData encoding:NSUTF8StringEncoding];
    NSLog(@"response: %@", responseString);
    NSLog(@"result: %@", resultString);
} 
```

此代码编译但不工作。我从服务器返回空数据，但它不应该是空的。问题似乎是：我的`postData`变量以 UTF8 编码而不是以 ASCII 发送（例如，将符号更改为 %20 等等）。我的代码有什么问题？我能做些什么来解决这个问题？

顺便说一句，`preparedJob`字符串是字符串，其中包含生成的 JSON

# javascript - 使用 javascript 在文本中插入链接而不替换 div 的全部内容

> ID：10284335
> 
> 赞同：3
> 
> 时间：2012-04-23T16:20:00.623
> 
> 标签：javascript, jquery

我正在编写一个在指定的“#content”div 中搜索特定关键字的小部件。

这是我最初使用 jQuery（简化版）进行设置的方式：

*   设置一个等于内容的 html 的变量：`var content = $('content').html();`
*   使用一些正则表达式替换某些关键字`<a href='link.html'>keyword</a>`
*   将内容 div 的 html 替换为新内容：`$('content').html(content);`

这在大多数情况下都有效，但是当“#content” div 包含 javascript 时会出现问题。当我设置`$('content').html(content)`时，它会重新运行`$('content')`div 中包含的任何 javascript 代码，这可能会导致错误。由于这是我编写的用于在任何网站上工作的小部件，因此我无法控制内容 div，以及其中是否有任何 javascript。

我的问题是，有没有办法只用 替换关键字`<a href='link.html'>keyword</a>`，而不替换 div 的全部内容？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T16:24:59.080

> 我的问题是，有没有办法只用 替换关键字`<a href='link.html'>keyword</a>`，而不替换 div 的全部内容？

是的。这是 jQuery 并没有真正为您提供太多的（少数）地方之一。

但是，在原始 DOM API 级别，包含元素实际文本的[`Text`节点具有一个](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1312295772)[`splitText`函数](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-38853C1D)，您可以使用该函数将节点拆分为特定位置的两个相邻节点。因此，在您的情况下，您将在单词的开头拆分，然后在单词的结尾再次拆分，然后将该中间`Text`节点包装在一个新的锚点中。

这是一个示例：[Live copy](http://jsbin.com/afiwun) | [来源](http://jsbin.com/afiwun/edit)

HTML：

```
<input type="button" id="theButton" value="Make it a link">
<p id="example">This is the example paragraph.</p> 
```

JavaScript：

```
jQuery(function($) {

  $("#theButton").click(function() {
    var targetWord, p, textNode, index, nodeWord, nodeAfter;

    // Our target word
    targetWord = "example";

    // Get the paragraph using jQuery; note that after we
    // use jQuery to get it (because it fixes getElementById for
    // us on older versions of IE), we then use [0] to access
    // the *raw* `p` element.
    // Then get the text node from it.
    p = $("#example")[0];
    textNode = p.firstChild;

    // Find our text in the text node
    index = textNode.nodeValue.indexOf(targetWord);
    if (index !== -1) {
      // Split at the beginning of the text
      nodeWord = textNode.splitText(index);

      // Split the new node again at the end of the word
      nodeAfter = nodeWord.splitText(targetWord.length);

      // Insert a new anchor in front of the word
      anchor = document.createElement('a');
      anchor.href = "http://stackoverflow.com";
      p.insertBefore(anchor, nodeWord);

      // Now move the word *into* the anchor
      anchor.appendChild(nodeWord);
    }
  });

}); 
```

当然，您需要做一些事情来改善这一点：

*   处理这种`index === 0`情况，而不在父元素的开头创建空文本节点。*（无害，但不太理想。）*
*   处理单词位于父级*末尾*的情况，这样您就不会在那里得到一个空的文本节点。*（再次。）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T16:39:16.933

你可以只替换关键字而不替换所有这样的内容，

```
function keywordconvert(str, p1, offset, s)  {
      return "<a href=\"link?t="+encodeURIComponent(p1)+"\">"+p1+"</a>";
}

function search(keyword) {
   var content = document.getElementById("content");
   var re = new RegExp("("+keyword+")","g");
  content.innerHTML = content.innerHTML.replace(re, keywordconvert);
} 
```

**用法**

```
search("keyword"); 
```

​​</p>

[演示](http://jsfiddle.net/JHHzU/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:25:18.780

是的，但您必须手动遍历所有文本节点。

首先去除标签要容易得多`<script>`，因为一旦运行它们，页面上就不需要它们（所有内容都保存在内存中）。

```
$('#content script').remove(); 
```

这将从`#content`元素中删除脚本，然后您可以毫无问题地运行现有的替换代码。

# dll - 32 位 DLL 加载 64 位依赖项？

> ID：10284340
> 
> 赞同：4
> 
> 时间：2012-04-23T16:20:26.770
> 
> 标签：dll, 32bit-64bit

我在加载这个 DLL 时遇到了问题，所以我在 Dependency Walker 中打开了它。

尽管是 32 位 DLL，但它似乎试图将 64 位 DLL 作为依赖项加载，导致它在运行时抛出“无法加载 DLL”异常。有什么方法可以指定我希望它使用哪些依赖项？

（我会发布 Dependency Walker 的屏幕截图，但我不能因为我是新用户）。

更新：

补充一点。就在几天前，这个 DLL 还在同一台计算机上以相同的配置工作。但是，我不得不安装一个新的硬盘驱动器，因为前一个硬盘驱动器失败了。重新安装所有驱动程序后，我就遇到了这个问题。

**最终更新：**

似乎这是一个有缺陷的安装。在某些时候，驱动程序已更新，它们不再在 64 位系统上安装 32 位依赖 DLL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:24:15.733

Windows 有一个[非常具体的搜索顺序来定位 DLL](http://msdn.microsoft.com/en-us/library/7d83bc18(v=vs.100).aspx)，您可以使用它来使其在不正确的之前找到正确的。

# hashmap - 有没有办法在 springjdbc 中构建我的结果的哈希图

> ID：10284351
> 
> 赞同：-1
> 
> 时间：2012-04-23T16:21:04.053
> 
> 标签：hashmap, resultset, spring-jdbc

我想在 spring jdbc 中从 ResultSet 中创建 Hash-Map。放入 HashMap 遵循每条记录的特定规则。有没有办法在springjdbc中完成这项工作？

好吧，更好地描述它：

```
Id | action | object 
-------------
1 | view | article1 
2 | view | article2 
3 | view | article1 
4 | order | article1 
5 | order | article1 
6 | order | article3 
```

结果应该存在：

```
name     | views | orders
----------------------
article1 |   2   |   2
article2 |   1   |   0
article3 |   0   |   1 
```

我正在考虑一个不做两次选择的解决方案，只是将我得到的每条记录存储在一个哈希图中，比如 map<articleId，statistics>。这可能是一个错误且过于复杂的解决方案。对不起，我会用这个来解决这个问题。

问候 && tia noircc

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T09:31:21.340

ResultSetExtractor 将在这种情况下工作。我在[这里](http://learn2program.wordpress.com/2009/02/15/spring-jdbctemplate-to-retrive-list-and-map/%20%2aExample%2a)找到了一个有用的代码示例。

# iphone - iPhone 4 设备中的 localhost 与 127.0.0.1

> ID：10284352
> 
> 赞同：1
> 
> 时间：2012-04-23T16:21:08.137
> 
> 标签：iphone, ios, localhost, nsurlrequest, nsmutableurlrequest

如果我们在使用 iPhone 4 设备时在`NSMutableURLRequest`/中使用“http://localhost:7001”而不是“http://127.0.0.1:7001”有什么区别吗？`NSURLRequest`

```
NSMutableURLRequest *request;
request = [[[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:@"http://127.0.0.1:7001/"]
                cachePolicy:NSURLRequestReloadIgnoringCacheData 
                timeoutInterval:60] autorelease]; 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:28:20.560

`127.0.0.1`比`localhost`黑客可以通过您的主机文件重定向`localhost`到外部 IP 更安全，如下所示：

```
 133.713.371.337     localhost 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:33:17.797

`localhost`需要 DNS 查找。我认为 iOS 足够聪明，可以在不咨询外部 DNS 服务器的情况下处理该查找，但即便如此，它也需要一些时间。（正如@BoA 所指出的，查找行为可以在本地重新配置，尽管您不必担心在非越狱设备上。）

如果您明确连接到本地设备，`127.0.0.1`应该更快更可靠。

# c# - WPF 控件不适用于 3 个或更多监视器

> ID：10284354
> 
> 赞同：1
> 
> 时间：2012-04-23T16:21:21.343
> 
> 标签：c#, .net, wpf, multiple-monitors

我有一个基于 .NET 4.0 WPF 窗口的应用程序，该应用程序可以在具有一个或两个监视器的机器上正常运行。但是，当在具有多监视器配置（3 个或更多）的各种 Windows 7 机器上运行应用程序并将应用程序窗口拖动到某些监视器时，基于下拉和菜单的控件将不起作用。

在故障监视器上，不会打开任何下拉菜单、上下文菜单或组合框。组合框也会闪烁，然后文本将消失。窗口没有最大化，只是做得足够大以适合该显示器。当窗口被拖回其他显示器时，这个问题就不会再发生了。

控件是样式化的，不确定是否与它有关。

这只是在：我尝试了一个我在 MSDN 网站上获得的示例应用程序，并且发生了同样的事情，所以这一定不是由我的代码引起的。可能是固有的 .NET 问题或驱动程序问题？

其他应用程序（非 .NET）不会发生此问题。

谢谢，亚历克斯

# mysql - 如果存在文字，则生成不同的查询

> ID：10284365
> 
> 赞同：2
> 
> 时间：2012-04-23T16:21:46.257
> 
> 标签：mysql, entity-framework, linq-to-entities

使用 MySQl 5.5.19，实体框架 4.3，并尝试了 Sun 提供的 MySQL 连接器和 DevArt 连接器，两者之间没有任何区别。

所以，我有两个产生不同查询的语句。第一个是：

```
var desserts = context.desserts
    .AsQueryable()
    .OrderBy(m => m.Id)
    .Where(m => m.FlavorId == 123)
    .ToList(); 
```

第二个是

```
var desserts = context.desserts
    .AsQueryable()
    .OrderBy(m => m.Id)
    .Where(m => m.FlavorId == someFlavorId)
    .ToList(); 
```

第一个查询生成如下所示的 SQL 查询：

```
SELECT
  Extent1.Id,
  Extent1.Name,
  Extent1.FlavorId
FROM icecream.dessert AS Extent1
WHERE Extent1.FlavorId = 123
ORDER BY Extent1.Id ASC 
```

第二个会产生一个成本更高的查询，看起来像这样：

```
SELECT
  Project1.Id,
  Project1.Name,
  Project1.FlavorId
  FROM(
    SELECT
      Extent1.Id,
      Extent1.Name,
      Extent1.FlavorId
    FROM icecream.dessert AS Extent1
    WHERE Extent1.FlavorId = 123
  ) AS Project1
  ORDER BY Project1.Id ASC 
```

而且，当然，后一个查询是我的生产代码中使用的查询。我很困惑为什么这两个会导致不同的查询。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:34:06.837

它们产生不同的 sql，因为您传递的第一个查询是常量，而第二个查询是传递参数。

如果您想模仿第一个查询，您需要为 Where 谓词创建一个表达式，如下所示：

```
ParameterExpression parameter = Expression.Parameter(typeof(Dessert), "d");
Expression propertyOrField = Expression.PropertyOrField(parameter , "FlavorId");
Expression constant = Expression.Constant(someFlavorId, typeof(long?));
Expression equal = Expression.Equal(propertyOrField, constant);

var lambda = Expression.Lambda<Func<Dessert, bool>>(equal, parameter);

var desserts = context.desserts
    .AsQueryable()
    .OrderBy(m => m.Id)
    .Where(lambda)
    .ToList(); 
```

# java - 覆盖其参数扩展“通用”类的方法

> ID：10284372
> 
> 赞同：2
> 
> 时间：2012-04-23T16:22:14.277
> 
> 标签：java, generics

我刚刚遇到了一个与 Java 泛型相关的有趣问题。我想使用具体定义（DerivedPaginator）而不是“通用”定义（Paginator<Derived>）。为此，我必须更改 PaginatorTest 中定义的方法。我尝试了不同的组合，但我仍然不知道该怎么做。

你能帮我解决这个难题吗？

```
interface Base {
}

interface Derived extends Base {
}

interface Paginator<T extends Base> {
}

interface DerivedPaginator extends Paginator<Derived> {
}

interface PaginatorTest<T extends Base> {
    // how to define this method so that it would accept DerivedPaginator?
    void check(Paginator<T> it);

    // nice try, but no cigar
    //<Y extends Paginator<T>> void check(Y it);
}

interface DerivedPaginatorTest extends PaginatorTest<Derived> {
    // this works fine
    //@Override
    //void check(Paginator<Derived> it);

    // but this doesn't
    @Override
    void check(DerivedPaginator it);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:31:01.537

你可以申报

```
interface PaginatorTest<T extends Base, Y extends Paginator<T>> {
    void check(Y it);
} 
```

并像使用它一样

```
interface DerivedPaginatorTest extends PaginatorTest<Derived, DerivedPaginator> {
    @Override
    void check(DerivedPaginator it);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T20:13:57.060

`DerivedPaginator`extends `Paginator<Derived>`，但 a`Paginator<Derived>`不一定是 a `DerivedPaginator`。我可以创建其他一些实现`Paginator<Derived>`但不实现的类`DerivedPaginator`，因此您不能保证该参数`DerivedPaginatorTest .check()`是`DerivedPaginator`. 我什至不确定为什么你的界面`DerivedPaginator`没有添加任何内容`Paginator<Derived>`。无论如何，如果你需要让`check()`方法采用比 更具体的东西`Paginator<T>`，你也需要泛化那些东西，就像霍华德展示的那样。

# c# - 在执行之前传递 lambda 表达式的方法参数类型

> ID：10284373
> 
> 赞同：4
> 
> 时间：2012-04-23T16:22:14.227
> 
> 标签：c#, lambda

我正在尝试将一些基于接口的抽象改进为遗留代码，作为依赖注入的初步步骤。遗留代码包含我正在努力封装的 lambda 用法。这是现有的 lambda 用法：

```
private void MethodAaa(EntityA a, EntityB a, int someInt) {...}

private void MethodBbb(DateTime date, EntityA e) {...}

_commandObjectFromThirdPartyLibrary.Execute(() => MethodAaa(a, b, c));

_commandObjectFromThirdPartyLibrary.Execute(() => MethodBbb(d, e)); 
```

我希望通过一个通用的基类方法来路由 lamda 执行，如下所示：

```
base.CommonExecute( () => MethodAaa(a, b, c) );
base.CommonExecute( () => MethodBbb(d, e) );

base.CommonExecute( Action<???> lamdaExpression )
{
    _commandObjectFromThirdPartyLibrary.Execute( lamdaExpression );
} 
```

有人可以提供一个如何正确声明 base.CommonExecute(?) 的示例吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T16:24:43.880

我认为使用[非通用版本的 Action 委托](http://msdn.microsoft.com/en-us/library/system.action.aspx)没有任何问题：

```
base.CommonExecute(Action lambdaExpression )
{
    _commandObjectFromThirdPartyLibrary.Execute( lambdaExpression );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:27:06.940

[Action](http://msdn.microsoft.com/en-us/library/system.action.aspx)的非通用版本是 void-void 之一：

```
public delegate void Action(); 
```

# ruby-on-rails - 奇怪的 Rails 3.2 路由错误，适用于桌面浏览器但不适用于 iOS

> ID：10284375
> 
> 赞同：1
> 
> 时间：2012-04-23T16:22:24.553
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, jquery-mobile, rails-routing

我正在开发一个简单的 Rails 3.2 应用程序。我一直在关注[Ruby on Rails 教程](http://ruby.railstutorial.org/chapters/sign-in-sign-out#top)来管理用户和会话（cookie）。当我尝试退出时发生路由错误。它在我的台式机上没有任何错误，但是当我尝试我的 iOS 设备（来自 Heroku）时，它给了我一个路由错误。

在 Heroku 上单击注销后，出现以下错误：

```
The page you were looking for doesn't exist.
You may have mistyped the address or the page may have moved 

With the url: .../sessions# 
```

我不知道`#`url 来自哪里。

如果我在本地机器上尝试使用 iOS 模拟器或将我的设备连接到我的 IP 地址，我会收到以下错误：

```
Started DELETE "/sessions" for 127.0.0.1 at 2012-04-23 18:10:41 +0200

ActionController::RoutingError (No route matches [DELETE] "/sessions"):

With the url: .../sessions# 
```

同样，我不知道`#`URL 中的 来自哪里。

我的路线如下所示：

```
resources :sessions, only: [:new, :create, :destroy]

match '/signup',  to: 'users#new'
match '/signin',  to: 'sessions#new'
match '/signout', to: 'sessions#destroy', via: :delete 
```

我的 SessionsController 看起来像这样：

```
def new
end

def create
  user = User.find_by_email(params[:email])
  if user && user.authenticate(params[:password])
    sign_in user
    redirect_to root_path
  else 
    render 'new'
  end
end

def destroy 
  sign_out
  redirect_to root_path
end 
```

我的 SessionsHelper 中的注销方法如下所示：

```
def sign_out
  current_user = nil
  cookies.delete(:remember_token)
end 
```

我的退出链接如下所示：

```
<%= link_to "Sign out", signout_path, method: "delete", "data-icon" => "arrow-r", "data-iconpos" => "right",  "data-theme" => "b", :class => "ui-btn-right", "data-ajax" => "false" %> 
```

请注意，我使用 jQuery mobile 来设置移动版本的样式。

有谁知道我做错了什么，或者可能导致错误的原因是什么？

为了完成，当我运行 rake routes 时，我得到以下结果：

```
root        /                         pages#home
[...]  
sessions POST   /sessions(.:format)       sessions#create
new_session GET    /sessions/new(.:format)   sessions#new
session DELETE /sessions/:id(.:format)   sessions#destroy
[...] 
```

谢谢！

# mysql - 缓慢的 MySQL SELECT 查询

> ID：10284377
> 
> 赞同：0
> 
> 时间：2012-04-23T16:22:41.763
> 
> 标签：mysql, select, civicrm

我有一个缓慢的 MySQL SELECT 查询，我似乎无法排除故障。

这是一个简单的，在一个大约有 600,000 条记录的表上。

```
SELECT * 
FROM  `civicrm_contact` contact
WHERE contact.external_identifier =123456 
```

Select 查询需要 3-6 秒之间的任何时间，这使得导入另外 600,000 条依赖于此查询的记录完全不切实际。

表索引显示在附图中：![表索引](../Images/8db75b99451430391bc8b8c08ef34c74.png)

如果我根据 contact.id=123456 进行搜索，那么查询时间会下降到大约 0.004 秒。contact.id 是表的主键。external_identifier 是唯一索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T11:24:17.313

我知道这是一个旧线程，但由于它与 CiviCRM 相关，我想我会提出我的想法。该修复实际上不是最佳实践，因为您更改了其中一个核心打包表以使您的查询运行得更快。虽然这对你来说可能没问题，但我绝对不会向所有人推荐这个。

您的解决方案可能已经突出了查询的问题，您似乎在告诉查询您期望一个数字，但实际上数据存储为 VARCHAR。所以我认为简单地在值周围加上单引号就可以了？

SELECT * FROM `civicrm_contact`contact WHERE contact.external_identifier = '123456'

如果没有这个，我很确定（与 Oracle 合作多年）会发生隐式数据类型转换，因此查询将无法使用 INDEX。

一个解释计划应该证明这个理论。

谢谢

帕尔韦斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:45:20.717

看来您使用`BTREE`索引。如果您不对该列执行任何范围查询（使用`<`、或） `>`，您可能需要使用基于哈希的索引。`<=``>=`

有关详细信息，请参阅[B 树和哈希索引的比较](http://dev.mysql.com/doc/refman/5.5/en/index-btree-hash.html)。

并[在这里查看](http://dev.mysql.com/doc/refman/5.1/en/create-index.html)确切的语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-04T14:47:58.520

我怀疑数据类型转换是否存在问题。我想知道这是否与索引字段的大小限制有关。作为 btree 意味着索引键可能比散列键大得多。这是必要的吗？将外部 id 存储在单独的表中并根据数字 id 链接它们会更好吗？

这里的问题多于答案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-24T18:07:09.053

我更改了结构以制作 INT 类型的 external_identifier 而不是 VARCHAR。速度提高到 0.006s

我还不确定这是否会产生更广泛的影响

# powershell - Powershell - 获取和组织机器的 Active Directory 组

> ID：10284378
> 
> 赞同：2
> 
> 时间：2012-04-23T16:22:48.037
> 
> 标签：powershell, active-directory

我一直在尝试使用下面的代码来获取目标机器所在的 AD 组列表，但我遇到了一些困难。

```
Get-AdComputer -Identity $hostname -property "MemberOf" 
```

当我执行代码时，我会返回这个。

```
DistinguishedName : CN=$hostname,OU=test,OU=test,OU=test All Workstations,DC=te
                st,DC=test,DC=com
DNSHostName       : $hostname    Enabled           : True
MemberOf          : {CN=Flash_Player_Adobe_11.1.102_LCL,OU=test All Softw
                    are Groups,DC=test,DC=test,DC=test, CN=Adobe Acrobat X P
                    rofessional 10,OU=test All Software Groups,DC=test,DC=test,D
                    C=co.uk, CN=Silverlight_Microsoft_4.0.60.0_LCL,OU=test
                All Software Groups,DC=test,DC=test,DC=test}
Name              : %hostname    ObjectClass       : computer
ObjectGUID        : 5cf00026-c91a-422e-8a3e-7ee546456717f
SamAccountName    : Test
SID               : f-1-5-21-18934363546-5655752-5353453-564535
UserPrincipalName : 
```

有没有一种方法可以让 memberOf 返回（附加到机器的 AD agroup 列表并在仅列出组名称的列表中排序。例如：

```
Silverlight_Microsoft_4.0.60.0_LCL
Adobe Acrobat XP Professional 
```

ETC

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T21:18:48.873

您可以使用正则表达式来提取组名：

```
(Get-ADComputer -Identity $hostname -Property MemberOf).MemberOf -replace '^CN=([^,]+),OU=.+$','$1' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:34:01.240

试试这个：

```
Get-AdComputer -Identity $hostname -property "MemberOf" | select -expand memberOf 
```

评论后编辑：

试试这个我现在无法测试

```
Get-AdComputer -Identity $hostname -property "MemberOf" | select -expand memberOf | % { ($_.split(','))[0].replace('CN=','')} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T17:33:55.140

奥林，

不要忘记您的朋友 dsquery 和 dsget 他们也可以很好地与 powershell 配合使用。

您执行 dsquery，然后使用 powershell 将其直接通过管道传输到 dsget -memberof 中，如果需要使用 foreach-object{$_trimstart(" ")} 进行修剪

玩它，让我们知道您使用什么。

直流

# pointers - 标记和清除垃圾收集中的指针反转给你带来了什么？

> ID：10284379
> 
> 赞同：16
> 
> 时间：2012-04-23T16:22:52.623
> 
> 标签：pointers, compiler-construction, garbage-collection

我觉得我错过了一些非常简单的东西，但我试图根据 Andrew Appel 的 Modern Compiler Implementation in ML book 理解标记和清除垃圾收集，并且在标记和清除部分中有一小段标题为指针反转（270）。

在这一点上，我想我明白它是如何工作的。简而言之，当您遍历图表时，您会翻转所有指针，以便您的前任位于您的字段集中。然后，当您完成给定元素时，将指针翻转回来，使它们再次指向正确的位置。

如果那是正确的，它究竟能给你带来什么？阿佩尔试图解释这一点，但我并不完全理解他的措辞。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-23T16:38:01.967

在标记过程中，对象分为三类：

1.  未标记的对象
2.  已标记但可以指向未标记对象的对象
3.  已标记且仅指向已标记对象的对象

随着标记的进行，对象的状态从类别 1 更改为类别 2，从类别 2 更改为类别 3。垃圾收集器必须跟踪类别 2 中的所有对象，以便它可以找到所有未标记的对象。但它在哪里存储这些信息？垃圾收集可能在内存完全满时运行，因此无法动态分配数据结构。*它应该使用已分配的内存*构建一个保存类别 2 对象的数据结构。指针反转是一种在不分配内存的情况下构建这些对象的链表的算法。

# regex - 如果某个字符在末尾，使用正则表达式如何删除？

> ID：10284382
> 
> 赞同：2
> 
> 时间：2012-04-23T16:23:08.593
> 
> 标签：regex, iis-7.5, rewrite, rule

我正在尝试在 IIS7 中编写 URL 重写器规则。我当前的 reg 表达式是`^(policy|pricing|contact|gallery)/(.*)` 我的重写规则是：`/{R:1}.aspx?cat={R:2}`

政策/（在这种情况下保持斜线，工作）

画廊/足球（没有提供斜线，所以这个作品）

画廊/足球/（需要删除最后一个斜线）

画廊/足球/女孩/（需要删除最后一个斜线）

任何想法都会很棒，我知道如何用 .Net 等语言处理这个问题，但我需要严格按照 IIS 中的正则表达式规则执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:17:04.720

这可能有效

```
^(policy|pricing|contact|gallery)/([^/]*(?:/[^/]+)*) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:39:47.900

我认为以下应该有效：

```
^(policy|pricing|contact|gallery)/(.*?)/?$ 
```

最后`/?`的意思是“匹配`/`一次或零次”，或者换句话说它是可选的。仅将其添加到末尾是行不通的，因为 a`/`仍会被 消耗`.*`，因此我们需要将 更改为`.*`以`.*?`使其不再贪婪。

锚是必要的`$`，这样比赛就不会过早结束。

请注意，尾随`/`仍将是匹配的一部分，但不会成为第二个捕获组的一部分，因此您的重写规则应该可以正常工作。

看到它工作：[http ://www.rubular.com/r/s8IqIlaqoz](http://www.rubular.com/r/s8IqIlaqoz)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:40:16.453

我认为，如果您明确地将它放在最后（我没有逃脱`/`，因为看起来您没有这样做），您将通过不包括该组来有效地在重写时将其删除。

```
^(policy|pricing|contact|gallery)/(.*)/?$ 
```

通过添加`$`，我们确保只删除最后一个正斜杠——中间仍然可以有*n 个*正斜杠。

# php - 端口 Vimeo 上传 PHP POST 请求

> ID：10284385
> 
> 赞同：1
> 
> 时间：2012-04-23T16:23:19.737
> 
> 标签：php, rest, oauth, vimeo

我正在为客户端将 Vimeo PHP 库[https://github.com/vimeo/vimeo-php-lib](https://github.com/vimeo/vimeo-php-lib)移植到 ColdFusion，并且已经成功地能够翻译除视频上传 POST 请求之外的所有内容。PHP 库使用 cURL，如下所示：

```
    $参数 = 数组（
        'oauth_consumer_key' => $this->_consumer_key,
        'oauth_token' => $this->_token,
        'oauth_signature_method' => 'HMAC-SHA1',
        'oauth_timestamp' => 时间（），
        'oauth_nonce' => $this->_generateNonce(),
        'oauth_version' => '1.0',
        'ticket_id' => $ticket,
        'chunk_id' => $i
    );

    // 生成 OAuth 签名
    $params = array_merge($params, array(
        'oauth_signature' => $this->_generateSignature($params, 'POST', self::API_REST_URL),
        'file_data' => '@'.$chunk['file'] // 不要在签名中包含文件
    ));

    // 发布文件
    $curl = curl_init($endpoint);
    curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($curl, CURLOPT_POST, 1);
    curl_setopt($curl, CURLOPT_POSTFIELDS, $params);
    $rsp = curl_exec($curl);
    curl_close($curl);

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:43:56.223

不确定如何在 cfscript 中执行此操作，但您可以将文件指定为 cfhttpparam。

```
<cfhttp url="something.com">
<cfhttpparam type="file" file="c:\temp\myfile"/>
</cfhttp> 
```

我错过了什么？

# java - 尝试为文本字段设置文本

> ID：10284388
> 
> 赞同：0
> 
> 时间：2012-04-23T16:23:31.567
> 
> 标签：java, swing, hashmap, jtextfield

我目前正在为学校开展一个团队项目，并且在 fieldMap 中的 textFields 上遇到 setText() 困难。我可以使用 fieldMap.get(fieldTitle.values()[i]) 从它们那里获取值，但是由于我对 HashMaps 和 gbcs 缺乏了解，我无法弄清楚如何将文本设置为文本字段.

```
class InstructorEditorPanel extends JPanel {
enum FieldTitle {
  B_NUMBER("B Number"), FIRST_NAME("First Name"), LAST_NAME("Last Name");
  private String title;

  private FieldTitle(String title) {
     this.title = title;
  }

  public String getTitle() {
     return title;
  }
};

private static final Insets WEST_INSETS = new Insets(5, 0, 5, 5);
private static final Insets EAST_INSETS = new Insets(5, 5, 5, 0);
private Map<FieldTitle, JTextField> fieldMap = new HashMap<FieldTitle, JTextField>();

public InstructorEditorPanel() {
  setLayout(new GridBagLayout());
  setBorder(BorderFactory.createCompoundBorder(
        BorderFactory.createTitledBorder("Instructor Editor"),
        BorderFactory.createEmptyBorder(5, 5, 5, 5)));
  GridBagConstraints gbc;
  for (int i = 0; i < FieldTitle.values().length; i++) {
     FieldTitle fieldTitle = FieldTitle.values()[i];
     gbc = createGbc(0, i);
     add(new JLabel(fieldTitle.getTitle() + ":", JLabel.LEFT), gbc);
     gbc = createGbc(1, i);
     JTextField textField = new JTextField(10);
     add(textField, gbc);

     fieldMap.put(fieldTitle, textField);
  }
}

private GridBagConstraints createGbc(int x, int y) {
  GridBagConstraints gbc = new GridBagConstraints();
  gbc.gridx = x;
  gbc.gridy = y;
  gbc.gridwidth = 1;
  gbc.gridheight = 1;

  gbc.anchor = (x == 0) ? GridBagConstraints.WEST : GridBagConstraints.EAST;
  gbc.fill = (x == 0) ? GridBagConstraints.BOTH
        : GridBagConstraints.HORIZONTAL;

  gbc.insets = (x == 0) ? WEST_INSETS : EAST_INSETS;
  gbc.weightx = (x == 0) ? 0.1 : 1.0;
  gbc.weighty = 1.0;
  return gbc;
}

public String getFieldText(FieldTitle fieldTitle) {
  return fieldMap.get(fieldTitle).getText();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:32:15.093

如果必须在文本字段中设置文本，则在该文本字段上调用[​​setText](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/JTextComponent.html#setText%28java.lang.String%29)方法。

由于您已经通过调用检索 textField

```
fieldMap.get(fieldTitle.values()[i]) 
```

您可以通过调用 setText 方法来设置文本，例如：

```
fieldMap.get(fieldTitle.values()[i]).setText('Something'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:28:32.287

只是出于对称原因猜测：

```
public void setFieldText (FieldTitle fieldTitle, String toSet) {
   fieldMap.get (fieldTitle).setText (toSet);
} 
```

您可以将该方法放入您的 InstructorEditorPanel 中，其中另一个方法是。要调用它，您必须访问该类的内部枚举：

```
public class TestFrame extends JFrame {

    public TestFrame () {
        super ("testframe");
        setSize (400, 400);
        setVisible (true);
    }

    public static void main (String [] args)
    {
        InstructorEditorPanel iep = new InstructorEditorPanel ();
        TestFrame tf = new TestFrame ();
        tf.add (iep);
        iep.setFieldText (InstructorEditorPanel.FieldTitle.FIRST_NAME, "Donald");
    }
} 
```

测试，工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:28:20.637

使用[setText(String t)](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/text/JTextComponent.html#setText%28java.lang.String%29)

```
fieldMap.get(fieldTitle).setText("String to set"); 
```

# c# - 处理多个响应和空值

> ID：10284390
> 
> 赞同：0
> 
> 时间：2012-04-23T16:23:37.550
> 
> 标签：c#, web-services, c#-4.0, json.net

我实际上是在尝试将来自我的 PHP Web 服务的 JSON 请求响应解析为 ac# 对象。

我找到了一些使用 json.net 的代码示例，然后我从我的 Wine 类中制作了这段代码：

```
public Wine(string json)
    {
        JObject jObject = JObject.Parse(json);
        BottleName = (string)jObject["name"];
        Category = (string)jObject["category"];
        Prize50 = Double.Parse((string)jObject["prize_50"]);
        Prize75 = Double.Parse((string)jObject["prize_75"]);
        Prize150 = Double.Parse((string)jObject["prize_150"]);
        Prize300 = Double.Parse((string)jObject["prize_300"]);
    } 
```

如果只有 1 个响应，那就完美了

```
"{\"id\":\"2\",\"name\":\"Pinot noir\",\"loc_wine\":\"",\"category\":\"Red\",\"prize_50\":\"12.800000\",\"prize_75\":\"16.500000\",\"prize_150\":\"0.000000\",\"prize_300\":\"0.000000\"} " 
```

但是当我的 json 响应中有另一个 Json 字符串时我遇到了麻烦，我希望知道如何处理它？

而且我有时有空字段，我怎么能忽略它们？

谢谢你的帮忙 ！:-)

PS 如果需要，这就是我从 PHP 文件发送数据的方式：

```
 $req = "SELECT * 
      FROM  t_wine
      WHERE name= \"Pinot noir\""; // for test purpose

      $res = mysqli_query($connection, $req);
      while($data= mysqli_fetch_assoc($res)) {
          extract ($data);
          echo json_encode($data);

      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:29:43.427

如果`mysqli_fetch`语句返回多行，则为每一行回显 json 响应而不将响应放入数组中会给您带来错误的 JSON。你的反应基本上是这样的：

```
{..some data...}{...some data...} 
```

所以让我们利用JSON的数组结构。将您的 PHP 代码更改为像数组一样输出

```
$res = mysqli_query($connection, $req);
echo "[";
while($data= mysqli_fetch_assoc($res)) {
    extract ($data);
    echo json_encode($data);
    echo ",";
}
echo "]"; 
```

这会给你这样的东西：

```
[{...some data...},{...some data...},] 
```

请记住，这很粗糙。您需要修剪结束括号之前的最后一个逗号。但这是一个有效的 JSON 数组。

您还需要修改 C# 以将 jObject 处理为对象数组而不是一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:31:12.563

好的，如果您正在尝试处理获取 的多个实例`Wine`，并且您想忽略 json.net 中的空值，您可以这样做：

```
var settings = new JsonSerializerSettings{ NullValueHandling = NullValueHandling.Ignore };
                                                                               }
JsonConvert.DeserializeObject<IEnumerable<Wine>>(response.ToString(), settings); 
```

# php - 在表回显期间，我将如何使用正则表达式替换所有数字？

> ID：10284392
> 
> 赞同：0
> 
> 时间：2012-04-23T16:23:39.813
> 
> 标签：php, html

在表回显期间，我将如何使用正则表达式替换所有数字？

我希望使用正则表达式将所有数字替换为包含数字的跨度，以便我可以更改他们的类。

我无法在回显期间添加跨度，因为表格是从文本文件中提取并在屏幕上回显的，它必须替换已经从文本文件中提取的数字。

PHP：

```
//set file
$filename='schedule.txt';
//open
$handler=fopen('schedule.txt','r');
//read through file
$file=fread($handler,filesize($filename));
$lines=explode("\r\n",$file);
etc.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:05:20.117

您可以执行以下操作：

```
$changed_lines = preg_replace('#(\d+)#', '<span class="bla">$1</span>', $lines); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:07:45.230

使用循环遍历行`foreach()`，然后使用替换`preg_replace()`：

```
foreach ($lines as $line){

    $line = preg_replace('!\d+!', '<span>$0</span>', $line);
    echo "$line\r\n";
} 
```

使用此输入：

```
woo yay 19 foo
foo 12 bar 
```

我得到这个输出：

```
woo yay <span>19</span> foo
foo <span>12</span> bar 
```

如果这不是您要找的，请用具体示例更新您的问题。

# c# - json字符串的反序列化返回空值

> ID：10284395
> 
> 赞同：0
> 
> 时间：2012-04-23T16:24:09.377
> 
> 标签：c#, asp.net, json, javascriptserializer

## 这是 JSON 字符串 -

### "{\"body\":[\"VAL1\",\"VAL2\"],\"head\":{\"result\":true,\"time\":3.859}}"

## 这些是我的课-

```
[Serializable]
public class ResponseHead
{               
    public bool result {get; set;}              
    public float time {get; set;}
}

[Serializable]
public class ResponseBody
{        
    public string[] body {get; set;}
}

[Serializable]
public class ResponseObj
{        
    public ResponseBody body {get; set;}
    public ResponseHead head { get; set; }
} 
```

## 和代码 -

```
JavaScriptSerializer serializer = new JavaScriptSerializer();
using (var streamReader = new StreamReader(httpResponse.GetResponseStream()))
{
    responseText = streamReader.ReadToEnd();
}
ResponseObj response_obj = new ResponseObj();

ResponseHead rhead = new ResponseHead();
rhead = serializer.Deserialize<ResponseHead>(responseText); //not working 
```

生成的 ResponseHead 对象具有值：

```
result: false 
time: 0.0 
```

它无法正确映射值，但我不知道为什么。ResponseBody 值正确输入。

请帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:31:52.337

看起来您正在尝试读取`ResponseObj`（这是 JSON 中的顶级对象），但编码为`ResponseHead`. 以下应该工作：

```
var wholeObject = serializer.Deserialize<ResponseObj>(responseText);
rhead = wholeObject.head; 
```

# jquery - jquery 不从查询返回数据，抛出错误 null 或不是对象

> ID：10284399
> 
> 赞同：1
> 
> 时间：2012-04-23T16:24:18.297
> 
> 标签：jquery

```
 var instance = new readers_cls();
 var theID = $('#theID').val();
 var thedata = instance.getReaderNumbers(theID);

 $.each(thedata.data, function(){
 $('#theReader').append('<tr class="readerRow"id="new' + index + '"><td align="center"><input type="text" id="reader' + index + '" name="reader' + index + '" value="' + this.readernumber + '" class="readerName"></td></tr>');
                    index++;
                }); 
```

如果我实际上返回了数据但在没有返回数据时抛出错误，则工作正常，不知道如何测试 null 与否以及 .each 上的对象

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:26:46.490

你不能这样做：

```
if(thedata.data) {
    $.each(thedata.data, function(){
        $('#theReader').append('<tr class="readerRow"id="new' + index + '"><td align="center"><input type="text" id="reader' + index + '" name="reader' + index + '" value="' + this.readernumber + '" class="readerName"></td></tr>');
                index++;
            });
} 
```

# iphone - 正确使用 viewDidUnload

> ID：10284403
> 
> 赞同：1
> 
> 时间：2012-04-23T16:24:54.593
> 
> 标签：iphone, objective-c, ios, memory-management, viewdidunload

我知道以前有人问过类似的问题。但是我已经搜索了一段时间了，事情仍然有些混乱。所以这里...

我没有使用 ARC。如果您有一个带有实例变量和如下属性的视图控制器：

视图控制器.h：

```
@interface ViewController : UIViewController{
    NSDictionary *someDict;
}
@property(nonatomic, retain)UIView *someView;
@property(assign)UIView *someOtherView; 
```

视图控制器.m：

```
-(void)viewDidUnload{
    self.someView = nil;
    [someDict release];
    [someOtherView release];
    super viewDidUnload];
} 
```

这是实现 viewDidUnload 的正确方法吗？设置 someDict = nil 似乎是错误的，因为它会泄漏，因此我的猜测是释放。这同样适用于 someOtherView 因为它没有保留？

我在这里错了吗？感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:39:18.387

`self.someView = nil`不会泄漏，因为它等于`[self setSomeView:nil]`由属性合成对自动生成的`@property(nonatomic, retain)UIView *someView`. 它具有`retain`属性，因此在设置新对象时将释放保留的对象。

我相信`[someDict release];`应该在`dealloc`. 并且`[someOtherView release];`不应该被调用，因为它是一个`assign`没有所有权的财产。

更多参考：

*   [我什么时候应该在 -(void)viewDidUnload 而不是 -dealloc 中释放对象？](https://stackoverflow.com/questions/1158788/when-should-i-release-objects-in-voidviewdidunload-rather-than-in-dealloc)
*   [当 iPhone 从睡眠状态重新打开并且应用程序仍然打开时释放](https://stackoverflow.com/questions/5676603/deallocation-when-iphone-is-turned-back-on-from-sleep-and-app-is-still-open)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:43:24.667

在`viewDidUnload`你应该释放并归零所有视图控制器的主视图的保留子视图（即不是字典！）。就是这么简单。

所以你的

```
self.someView = nil; 
```

是正确的，只需将所有其他保留的子视图也添加到方法中。

不要 release `someOtherView`，因为这是一个分配的属性。释放它会导致你的应用程序崩溃。

如果我是你，我会摆脱 iVar 声明 ( `someDict`)，并使用所有属性。

# google-maps - 您可以为按钮提供图像而不是文本吗？

> ID：10284406
> 
> 赞同：0
> 
> 时间：2012-04-23T16:25:07.557
> 
> 标签：google-maps, google-maps-api-3

嗨，我的网页上有一个按钮，可以创建用于复制的链接弹出窗口。是否可以在按钮上使用图像而不是文本？我想使用您可以在 Google 地图主网页或类似网页上看到的“链接”图像（链的图像）。谢谢你。

```
<input type="button" value="Email Link" onclick="showLink()"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:27:32.523

```
<input type="image" src="myimage.jpg" onclick="showLink()" /> 
```

# java - 不正确的坐标变换 Gauss-Kruger - WGS84 使用 GeoTools

> ID：10284407
> 
> 赞同：5
> 
> 时间：2012-04-23T16:25:09.660
> 
> 标签：java, geotools, wgs84

在 GeoTools 的帮助下，我遇到了关于心爱的坐标转换的问题：我想将一组坐标从 Gauss-Kruger（区域 5，EPSG 31469）转换为普通的 WGS84 坐标（EPSG 4326）。

我用一个简单的例子构建了一个代码（只需一对坐标即可尝试）：

```
double coordX = 5408301.53; 
double coordY = 5659230.5;
double[] punt = new double[2];

CoordinateReferenceSystem sourceCRS = CRS.decode("EPSG:31469");
CoordinateReferenceSystem targetCRS = CRS.decode("EPSG:4326");

MathTransform transform = CRS.findMathTransform(sourceCRS, targetCRS, true);

DirectPosition expPt = new GeneralDirectPosition(coordX, coordY);
expPt = transform.transform(expPt, null);
punt = expPt.getCoordinate();

System.out.println(punt[0] + ", " + punt[1]); //lon, lat 
```

调试后结果如下：48.791886921764345, 17.16525096311777

然后，当我检查我获得的 WGS84 坐标时（只需将它们打入谷歌地图），我最终会在奥地利附近的捷克共和国某处，尽管这对坐标应该在德国东部的某个地方（当然，我通过一些 html 进行了检查解码器）：

---> 应该是结果：51.0609167, 13.6900142。

我无法想象发生此故障的任何原因。GeoTools 获得了两个想要的 CRS（我从 java 控制台的响应中附加了一个摘录）

有人能解释一下吗？我会很感激任何帮助！

许多问候，塞巴斯蒂安

* * *

```
**sourceCRS:**
PROJCS["DHDN / 3-degree Gauss-Kruger zone 5",
    GEOGCS["DHDN", 
    DATUM["Deutsches Hauptdreiecksnetz", 
      SPHEROID["Bessel 1841", 6377397.155, 299.1528128, AUTHORITY["EPSG","7004"]], 
      TOWGS84[612.4, 77.0, 440.2, -0.054, 0.057, -2.797, 2.55], 
      AUTHORITY["EPSG","6314"]], 
    PRIMEM["Greenwich", 0.0, AUTHORITY["EPSG","8901"]], 
    UNIT["degree", 0.017453292519943295], 
    AXIS["Geodetic latitude", NORTH], 
    AXIS["Geodetic longitude", EAST], 
    AUTHORITY["EPSG","4314"]], 
  PROJECTION["Transverse_Mercator", AUTHORITY["EPSG","9807"]], 
  PARAMETER["central_meridian", 15.0], 
  PARAMETER["latitude_of_origin", 0.0], 
  PARAMETER["scale_factor", 1.0], 
  PARAMETER["false_easting", 5500000.0], 
  PARAMETER["false_northing", 0.0], 
  UNIT["m", 1.0], 
  AXIS["Northing", NORTH], 
  AXIS["Easting", EAST], 
  AUTHORITY["EPSG","31469"]]

**targetCRS:**
GEOGCS["WGS 84", 
  DATUM["World Geodetic System 1984", 
    SPHEROID["WGS 84", 6378137.0, 298.257223563, AUTHORITY["EPSG","7030"]], 
    AUTHORITY["EPSG","6326"]], 
  PRIMEM["Greenwich", 0.0, AUTHORITY["EPSG","8901"]], 
  UNIT["degree", 0.017453292519943295], 
  AXIS["Geodetic latitude", NORTH], 
  AXIS["Geodetic longitude", EAST], 
  AUTHORITY["EPSG","4326"]]
CONCAT_MT[PARAM_MT["Affine", 
    PARAMETER["num_row", 3], 
    PARAMETER["num_col", 3], 
    PARAMETER["elt_0_0", 0.0], 
    PARAMETER["elt_0_1", 1.0], 
    PARAMETER["elt_1_0", 1.0], 
    PARAMETER["elt_1_1", 0.0]], 
  INVERSE_MT[PARAM_MT["Transverse_Mercator", 
      PARAMETER["semi_major", 6377397.155], 
      PARAMETER["semi_minor", 6356078.962818189], 
      PARAMETER["central_meridian", 15.0], 
      PARAMETER["latitude_of_origin", 0.0], 
      PARAMETER["scale_factor", 1.0], 
      PARAMETER["false_easting", 5500000.0], 
      PARAMETER["false_northing", 0.0]]], 
  PARAM_MT["Ellipsoid_To_Geocentric", 
    PARAMETER["dim", 2], 
    PARAMETER["semi_major", 6377397.155], 
    PARAMETER["semi_minor", 6356078.962818189]], 
  PARAM_MT["Position Vector transformation (geog2D domain)", 
    PARAMETER["dx", 612.4], 
    PARAMETER["dy", 77.0], 
    PARAMETER["dz", 440.2], 
    PARAMETER["ex", -0.054], 
    PARAMETER["ey", 0.057], 
    PARAMETER["ez", -2.797], 
    PARAMETER["ppm", 2.5500000000455714]], 
  PARAM_MT["Geocentric_To_Ellipsoid", 
    PARAMETER["dim", 2], 
    PARAMETER["semi_major", 6378137.0], 
    PARAMETER["semi_minor", 6356752.314245179]], 
  PARAM_MT["Affine", 
    PARAMETER["num_row", 3], 
    PARAMETER["num_col", 3], 
    PARAMETER["elt_0_0", 0.0], 
    PARAMETER["elt_0_1", 1.0], 
    PARAMETER["elt_1_0", 1.0], 
    PARAMETER["elt_1_1", 0.0]]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T16:23:23.660

当我尝试使用您的代码和最新的 Geotools (8.0) 重现问题时，我得到了正确的结果（13.690015717822922、51.06089012028224）。与 lon,lat 交换，即。

当我**交换`coordX`和`coordY`**. 这会让您进入也门沙漠而不是德累斯顿。

也许您隐含地假设轴的顺序错误。可以说，将纬度放在经度之前在某种程度上违反了笛卡尔坐标将 X 放在 Y 之前的一般协议。

虽然我无法重现您的问题，但[本教程](http://docs.geotools.org/latest/userguide/tutorial/geometry/geometrycrs.html#axis-order)中讨论轴排序的解决方法之一可能会对您有所帮助。

# python - Python程序运行时发出哔哔声？

> ID：10284411
> 
> 赞同：0
> 
> 时间：2012-04-23T16:25:33.897
> 
> 标签：python, python-2.7, beep

我遇到了一个问题。以下程序在运行时会发出哔哔声，我没有对其进行编程。我在笔记本电脑上运行 Windows 7，想知道为什么会发生这种情况。

我的代码基本上是一个简单的小加密器。它还不能处理 ASCII 范围之外的东西，但这超出了这个问题的范围。

最后，我想知道，为什么它会发出哔哔声？（注意：这是来自一个类，这就是包含 self 的原因。）

```
def encrypt(self,message,private_key):
    import random
    self.message=str(message)
    self.private_key=int(private_key)
    self.public_key=""
    self.final_message=""
    self.errors=[]
    for letter in str(self.message):
        y=random.randrange(0,ord(letter))
        a=y+self.private_key
        x=ord(str(letter))^a
        if x in range(0,256):
            z=chr(x)
            self.final_message=self.final_message+str(z)
            self.public_key=self.public_key+str(chr(y))
        else:
            char="Letter: "+str(letter)+", ASCII value unabled to be processed: "+str(x)+" using keys: "+"Private key: "+str(self.private_key)+" Random Key: "+str(y)
            self.errors.append(char)
    print "Message: "+str(self.message)
    print
    print "Length of Message: "+"["+str(len(str(self.message)))+"]"
    print
    print "Final Message: "+"["+str(self.final_message)+"] "+"length of message: "+str(len(str(self.final_message)))
    print
    print "Public Key: "+"["+str(self.public_key)+"] "+"length of key: "+str(len(str(self.public_key)))
    print
    print "Private Key:"+"["+str(self.private_key)+"]"
    if len(self.errors)!=0:
        print "errors: "
        print
        for error in self.errors:
            print error
            print 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:27:57.180

[http://en.wikipedia.org/wiki/Bell_character](http://en.wikipedia.org/wiki/Bell_character)

ascii 7是你的罪魁祸首。考虑编码成 base64 或其他一些可打印的子集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:31:07.697

如果您随时打印 ASCII 代码 7，您可以让控制台/终端发出哔哔声。

尝试一下：

```
>>> print chr(7) 
```

# json - 如何测试 WCF JSON 服务 - 单元测试

> ID：10284413
> 
> 赞同：2
> 
> 时间：2012-04-23T16:25:40.777
> 
> 标签：json, wcf, unit-testing

如何测试 WCF JSON 服务。我想为此服务创建类似单元测试的东西。有这样的教程吗？我最有兴趣自己编写 JSON 对象，例如 {somedata:abc,foo:boo}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:30:39.047

这是一个可以帮助您入门的链接。

[http://www.entechsolutions.com/wcf-web-service-for-soap-json-and-xml-with-unit-tests](http://www.entechsolutions.com/wcf-web-service-for-soap-json-and-xml-with-unit-tests)

“-创建一个与 JSON 数据结构匹配的动态类-将其序列化为 JSON-将 json 发送到 Web 服务-对动态对象的响应反序列化-确保响应具有我预期的值”

邮政

```
[Test]
public void Add_WhenMethodPost_And_ValidApiKey_ReturnsSum()
{
var addRequest = new
{
    Value1 = 5,
    Value2 = 11,
    ApiKey = Const.ValidApiKey
};

var url = string.Format("{0}/json/add", Const.WebServiceUrl);
var request = (HttpWebRequest)WebRequest.Create(url);
request.Method = "POST";
request.ContentType = "application/json; charset=utf-8";

var jsSerializer = new JavaScriptSerializer();
var jsonAddRequest = jsSerializer.Serialize(addRequest);

var writer = new StreamWriter(request.GetRequestStream());
writer.Write(jsonAddRequest);
writer.Close();

var httpWebResponse = (HttpWebResponse)request.GetResponse();

string jsonString;
using (var sr = new StreamReader(httpWebResponse.GetResponseStream()))
{
    jsonString = sr.ReadToEnd();
}

var jsonAddResponse = jsSerializer.Deserialize<dynamic>(jsonString);

Assert.AreEqual(16, jsonAddResponse["Sum"]);
} 
```

得到

```
[Test]
public void Add_WhenMethodGet_And_ValidApiKey_ReturnsSum()
{
 var url = string.Format("{0}/json/add?value1={1}&amp;value2={2}&amp;apiKey={3}", Const.WebServiceUrl, 5, 11,
                         Const.ValidApiKey);
 var httpWebRequest = (HttpWebRequest)WebRequest.Create(url);
 httpWebRequest.Method = WebRequestMethods.Http.Get;
 httpWebRequest.Accept = "application/json";

 string jsonString;
 var httpWebResponse = (HttpWebResponse)httpWebRequest.GetResponse();

 using (var sr = new StreamReader(httpWebResponse.GetResponseStream()))
 {
     jsonString = sr.ReadToEnd();
 }

 var jsSerializer = new JavaScriptSerializer();
 var jsonAddResponse = jsSerializer.Deserialize<dynamic>(jsonString);

 Assert.AreEqual(16, jsonAddResponse["Sum"]);
 } 
```

# jquery - 从 iframe 打开模态窗口到父级

> ID：10284419
> 
> 赞同：6
> 
> 时间：2012-04-23T16:26:07.757
> 
> 标签：jquery, html, iframe

我有一个带有 iframe 的页面，在这个 iframe 内有一些链接应该在父窗口中打开一个模式窗口。问题是我无权将代码放入父窗口。我只能访问这个 iframe。有没有办法用 jquery 来完成这种限制？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T18:40:40.170

您可以使用 JQuery 插件[SimpleModal](http://www.ericmmartin.com/projects/simplemodal/)

有一个名为“appendTo”的选项，您可以在其中告诉您将 Modal 放在哪里。这种方法的唯一问题是模态框的覆盖显示为 iframe 的大小，因此您必须在打开它后为其提供所需的宽度和高度。

```
$('#div-modal').modal({
    appendTo: $(window.parent.document).find('body'),
    overlayCss: {backgroundColor:"#333"}, // Optional overlay style
    overlayClose:true, 
});
// Set overlay's width
$(window.parent.document).find('#simplemodal-overlay').css('width', '100%'); 
```

如果您要作为模态打开的 div 在您的父窗口中，则可以替换`$('#div-modal')`为`$(window.parent.document).find('#div-modal')`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-23T23:46:16.057

花 1 天时间从 iframe 文档打开模态窗口，我首先做了一个案例：

```
parent.$("#you_modal_window_selector").css("visibility", "visible"); 
```

！！！关键字 changin 是 PARENT。（小写字母）

其次，我使用脚本更改 iframe 包含文档中的所有按钮：

```
<script> 
 $(function() {
        $(".open-modal").on("click", function (e) {
            var $this = $(this),
            $href = $this.attr("href");
            e.preventDefault();
            parent.$($href).css("visibility", "visible");
            parent.$(".modal-window-dark").css("visibility", "visible");
        });
    });
</script> 
```

# iphone - 处理 iPad/iPhone 视图的最佳方式是什么？

> ID：10284421
> 
> 赞同：0
> 
> 时间：2012-04-23T16:26:10.917
> 
> 标签：iphone, objective-c, ipad, interface, builder

我正在开发一个 iPhone/iPad 应用程序，我想为 iPad 和 iPhone 创建特定的视图。我想知道选择处理视图选择的最佳方法是什么。

我应该使用处理选择的自定义推送方法（iPad 或 iPhone 版本的视图）创建 MainViewController 吗？最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:54:09.307

如果您的 iPhone 笔尖被命名为 MyApp.xib，请将 iPad 笔尖命名为“MyApp~ipad.xib”（注意小写“P”）。后一个将自动为 iPad 加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:09:17.990

如果您想为 iPhone 和 iPad 创建特定的视图，当您创建一个新项目时 -> 选择 Device Family 作为“通用”.2 xib 文件将被创建。一个用于 iPhone，另一个用于 iPad，您可以使用它们来设计 iPhone 和 iPad 界面。

# php - 将全局 javascript 变量传递给 php

> ID：10284422
> 
> 赞同：1
> 
> 时间：2012-04-23T16:26:13.460
> 
> 标签：php, javascript, jquery, html, canvas

我有一个 index.php 文件，其中有画布游戏。该游戏是从单独的 game.js 文件中加载的，其中我有变量：ballsCought。我希望这个 warable 和 name inputet 到文本输入通过点击传递到另一个 php 文件。我的代码：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Simple Canvas Game</title>
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script>
        $(document).ready(function(){

            function score(){
                $('#score').fadeIn(1000);
                $('#score').load("load_players.php");
            };

            setInterval(score , 1000);

            var nam = $("#name").val();         

            $('#submit').keyup(function(e){
                if(e.keyCode == 13){
                $.post('upload_score.php','n=' +nam, 'score=' +ballsCought);
                }
            });

            $('#submit').click(function(e){
                $.post('upload_score.php','n=' +nam, 'score=' +ballsCought);
            });

        });
    </script>
</head>
<script src="game.js"></script>
<body>
    <canvas id="canvas" width="525" height="525"></canvas>
    <br /><p><span id="points"></span><input type="text" id="name" placeholder="Name..."/><input type="submit" id="submit" value="Submit"/></p>
    <br /><span id="score"></span>
</body>
</html> 
```

但是这个帖子功能没有任何想法？谢谢你...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:38:28.037

看起来您的 $.post 方法不正确。如果要将数据传递到 PHP 页面，则需要使用 JavaScript 对象表示法，如下所示：

```
$.post('upload_score.php', {n: nam, score: ballsCought}); 
```

[您可以从jQuery Docs](http://api.jquery.com/jQuery.post/)页面阅读有关调用 $.post 的各种方法的更多信息

现在您的 PHP 页面可能仍然存在问题。您应该使用 Firebug 之类的工具来查看 Ajax 请求以及可能返回的任何错误。

# android - 找不到适用于 Android 的 Picasa Api

> ID：10284423
> 
> 赞同：1
> 
> 时间：2012-04-23T16:26:17.547
> 
> 标签：android, api, picasa

我正在尝试按照此页面上的分步指南进行操作：[https ://developers.google.com/picasa-web/docs/2.0/developers_guide_java?hl=nl-NL](https://developers.google.com/picasa-web/docs/2.0/developers_guide_java?hl=nl-NL)

因此，当尝试导入以下内容时：

```
import java.io.File;
import java.net.URL;

import com.google.gdata.client.*;
import com.google.gdata.client.photos.*;
import com.google.gdata.data.*;
import com.google.gdata.data.media.*;
import com.google.gdata.data.photos.*; 
```

它缺少我假设的 API，如果我尝试在这里下载它会给出错误：[http ://code.google.com//code.google.com/p/gdata-java-client/downloads/list](http://code.google.com//code.google.com/p/gdata-java-client/downloads/list)

任何有工作链接的人，或者我是否正在使用一种折旧的方式将 picasa 用于我的 Android 应用程序？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:31:07.463

你写的链接错了？

[http://code.google.com/p/gdata-java-client/downloads/list](http://code.google.com/p/gdata-java-client/downloads/list)

# ruby-on-rails-3 - 我可以将 Ruby on Rails 组件用作独立库吗？

> ID：10284428
> 
> 赞同：1
> 
> 时间：2012-04-23T16:26:39.880
> 
> 标签：ruby-on-rails-3

正如问题一样，我想知道这是否可能像 Symfony 2 中那样

# android - AsyncTask 中返回变量的范围

> ID：10284430
> 
> 赞同：1
> 
> 时间：2012-04-23T16:26:43.610
> 
> 标签：android, multithreading, android-asynctask

返回的值只能用在 postexecute 方法上吗？

当我调用 doInBackground 方法时，我得到了网页的源代码（字符串）。我想将该源代码返回到我的主要活动，因为我在那里对源代码中的信息进行分类。但我想我不能那样做……可以吗？

从执行后，我可以退回它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:28:35.017

在该`onPostExecute`方法中，您可以将其分配给您的活动的成员变量，或使用它作为参数调用其他方法。

**根据评论更新：**您可以`AsyncTask`在另一个文件中声明声明的子类，但您将无法直接操作封闭活动的成员变量。但是，您可以定义接口以将您的活动和`AsyncTask`其他地方定义的活动粘合在一起，并将对活动的引用传递给`AsyncTask`构造函数中的 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:33:19.587

AsyncTask 的变量在任务完成后被删除。

但是，您可以从以下位置设置执行类的类变量`onPostExecute`：

```
@Override
protected void onPostExecute(Integer result) {
        integerListInExecutingClass = result;                   
        super.onPostExecute(result);
} 
```

但这种方法只有在您将 AsyncTask 声明为执行类中的私有类时才有效。

# c# - 下拉 mvc3..不会填充字段

> ID：10284431
> 
> 赞同：0
> 
> 时间：2012-04-23T16:26:45.623
> 
> 标签：c#, asp.net-mvc-3

我有这个控制器：

```
 public class NewPostController : Controller
{
    List<SelectListItem> languages= new List<SelectListItem>();
    public ActionResult Index()
    {
        ViewData["languages"] = new SelectList(languages, "Text", "Value", 1); 
        return View();
    }

    private void GetCountryList()
    {
        CultureInfo[] cultureList = CultureInfo.GetCultures(CultureTypes.AllCultures);

        foreach (CultureInfo culture in cultureList)
        {

            languages.Add(new SelectListItem
            {
                Text = culture.DisplayName,
                Value = culture.DisplayName,
              });

        }

    }

} 
```

项目列表应按其语言建立并传递给视图。

```
 @Html.DropDownList("languages",null,
    "** Please Select **",
    new { @class = "my-select-css-class" }) 
```

什么都没有填充..为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:30:35.187

```
GetCountryList() 
```

你永远不会调用它。

# objective-c - iOS5 TabBar 字体和颜色

> ID：10284433
> 
> 赞同：13
> 
> 时间：2012-04-23T16:26:48.543
> 
> 标签：objective-c, ios, uitabbar, ios5

我已经自定义了 TabBar 的外观，例如

```
UIImage *tabBackground = [[UIImage imageNamed:@"tab-bar-bg.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
[[UITabBar appearance] setBackgroundImage:tabBackground];
[[UITabBar appearance] setSelectionIndicatorImage: [UIImage imageNamed:@"activetab.png"]]; 
```

如何定义自定义字体以及选定和未选定的文本颜色？

谢谢，

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-23T18:25:09.553

```
[[UITabBarItem appearance] setTitleTextAttributes:
     [NSDictionary dictionaryWithObjectsAndKeys:
      [UIColor blackColor], UITextAttributeTextColor, 
      [UIFont fontWithName:@"font" size:0.0], UITextAttributeFont, 
      nil] 
                                             forState:UIControlStateHighlighted]; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-23T18:22:24.713

```
[[UITabBarItem appearance] setTitleTextAttributes:
     [NSDictionary dictionaryWithObjectsAndKeys:
      [UIColor blackColor], UITextAttributeTextColor, 
      [UIFont fontWithName:@"ProximaNova-Semibold" size:0.0], UITextAttributeFont, 
      nil] 
                                             forState:UIControlStateHighlighted];

    [[UITabBarItem appearance] setTitleTextAttributes:
     [NSDictionary dictionaryWithObjectsAndKeys:
      [UIColor grayColor], UITextAttributeTextColor, 
      [UIFont fontWithName:@"ProximaNova-Semibold" size:0.0], UITextAttributeFont, 
      nil] 
                                             forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-07T13:17:44.603

上面的答案对我有用。

但我认为大多数人应该 `forState:UIControlStateHighlighted`改变`forstate:UIControlStateSelected`

# c++ - 带有字符串数组的 C++ 快速排序

> ID：10284434
> 
> 赞同：0
> 
> 时间：2012-04-23T16:26:55.127
> 
> 标签：c++, quicksort

我的快速排序代码有问题。我不知道为什么，但它没有排序。

**我的程序**

```
#include <iostream>
#include <string>

using namespace std;

class Student
{
    public:
    string studentArray[100][3];
    string getName();
    string getSurname();
    string getID();
    void setName(string stdName);
    void setSurname(string stdSurname);
    void setID(string stdIDs);
    private:
    string name;
    string surname;
    string ID;
};

int quick_sort_help(string &text,int left, int right)
{
    char val = text[right];
    char temp;

    int j = right;
    int i = left - 1;

    while (true)
    {
        while (text[++i] < val);

        while (text[--j] > val) {
            if(j == left)
                break;
        }

        if(i >= j)
            break;

        temp=text[i];
        text[i]=text[j];
        text[j]=temp;
    }

    temp=text[i];
    text[i]=text[right];
    text[right]=temp;

    return i;
}

void quicksort(string &text,int left, int right)
{
    if (left < right)
    {
        int pivot = quick_sort_help(text, left, right);
        quicksort(text, left, pivot - 1);
        quicksort(text, pivot + 1, right);
    }
}

void quick_sort(string &text,int size){
    quicksort(text,0,size-1);
}

int main()
{
    Student myStudent;
    string name;
    string surname;
    string id;
    int choice;
    int temp=0;
    char ans1;
    do{
        cout<<"What do you want to search with"<<endl;
        cout<<"1-)For adding a Student:"<<endl;
        cout<<"2-)Search with name:"<<endl;
        cout<<"3-)Search with surname:"<<endl;
        cout<<"4-)Search with ID (binary!):"<<endl;
        cout<<"5-)Show List!"<<endl;
        cin>>choice;

        switch (choice)
        {
            case 1:
            {
                char ans;
                do
                {
                    cout<<"Please enter Student's name: ";
                    cin>>name;
                    cout<<"Please enter Student's surname: ";
                    cin>>surname;
                    cout<<"Please enter Student's ID: ";
                    cin>>id;
                    myStudent.setName(name);
                    myStudent.setSurname(surname);
                    myStudent.setID(id);

                    myStudent.studentArray[temp][0]=myStudent.getID();
                    myStudent.studentArray[temp][1]=myStudent.getName();
                    myStudent.studentArray[temp][2]=myStudent.getSurname();
                    cout<<"Want to add new Student? (y/Y)";
                    cin>>ans;
                    temp++;
                }while(ans=='y'||ans=='Y');
                break;
            }
            case 2:
            {
                cout<<"Enter the student name:";
                cin>>name;
                for(int i=0;i<temp;i++)
                {
                    if(myStudent.studentArray[i][1]==name)
                    {
                       cout<<myStudent.studentArray[i][0] + " " + myStudent.studentArray[i][1] + " " + myStudent.studentArray[i][2]<<endl;
                    }
                }
                break;
            }
            case 3:
            {
                cout<<"Enter the student surname:";
                cin>>surname;
                for(int i=0;i<temp;i++)
                {
                    if(myStudent.studentArray[i][2]==surname)
                    {
                       cout<<myStudent.studentArray[i][0] + " " + myStudent.studentArray[i][1] + " " + myStudent.studentArray[i][2]<<endl;
                    }
                }
                break;
            }
            case 4:
            {
                cout<<"Enter the student ID:";
                cin>>id;
                for(int i=0;i<temp;i++){
                    for(int j=i+1;j<temp;j++){
                        quick_sort(myStudent.studentArray[temp][0],temp);
                    }
                }
                int binary=temp/2;
                for(int i=0;i<temp;i++)
                {
                    if(myStudent.studentArray[binary][0]>id)
                    {
                        binary = binary - binary/2;
                    }
                    if(myStudent.studentArray[binary][0]<id)
                    {
                        binary = binary + binary/2;
                    }
                    if(myStudent.studentArray[binary][0]==id)
                    {
                        cout<<myStudent.studentArray[binary][0]+ " " + myStudent.studentArray[binary][1]+ " " + myStudent.studentArray[binary][2]<<endl;
                        break;
                    }
                }
                break;
            }
            case 5:
            {
                cout<<"id/name/surname"<<endl;
                for(int i=0;i<temp;i++)
                {
                    cout<<myStudent.studentArray[i][0]+ " " + myStudent.studentArray[i][1] + " " + myStudent.studentArray[i][2]<<endl;
                }
                break;
            }    

        }
        cout<<"Want to select action again?(y/Y)";
        cin>>ans1;
    }while(ans1=='y'||ans1=='Y');
    return 0;
}

string Student::getName()
{
    return name;
}

string Student::getSurname()
{
    return surname;
}

string Student::getID()
{
    return ID;
}

void Student::setName(string stdName)
{
    name=stdName;
}

void Student::setSurname(string stdSurname)
{
    surname=stdSurname;
}

void Student::setID(string stdID)
{
    ID=stdID;
} 
```

我的问题是在案例 4 中，我将在仅使用二进制搜索进行搜索时进行快速排序，其他搜索功能运行良好，我找不到解决方法

**我的排序功能**

```
int quick_sort_help(string &text,int left, int right)
{
    char val = text[right];
    char temp;

    int j = right;
    int i = left - 1;

    while (true)
    {
        while (text[++i] < val);

        while (text[--j] > val) {
            if(j == left)
                break;
        }

        if(i >= j)
            break;

        temp=text[i];
        text[i]=text[j];
        text[j]=temp;
    }

    temp=text[i];
    text[i]=text[right];
    text[right]=temp;

    return i;
}

void quicksort(string &text,int left, int right)
{
    if (left < right)
    {
        int pivot = quick_sort_help(text, left, right);
        quicksort(text, left, pivot - 1);
        quicksort(text, pivot + 1, right);
    }
}

void quick_sort(string &text,int size){
    quicksort(text,0,size-1);
} 
```

我将这个快速排序函数与二维数组一起使用：

**案例4**

```
case 4:
{
    cout<<"Enter the student ID:";
    cin>>id;
    for(int i=0;i<temp;i++){
        for(int j=i+1;j<temp;j++){
            quick_sort(myStudent.studentArray[temp][0],temp);
        }
    }
    int binary=temp/2;
    for(int i=0;i<temp;i++)
    {
        if(myStudent.studentArray[binary][0]>id)
        {
            binary = binary - binary/2;
        }
        if(myStudent.studentArray[binary][0]<id)
        {
            binary = binary + binary/2;
        }
        if(myStudent.studentArray[binary][0]==id)
        {
            cout<<myStudent.studentArray[binary][0]+ " " + myStudent.studentArray[binary][1]+ " " + myStudent.studentArray[binary][2]<<endl;
            break;
        }
    }
    break;
} 
```

“我的新分类”

```
 void quickSort(Student arr[], int left, int right)
  {
     int i = left, j = right;
     Student tmp;
     int pivot = arr[(left + right) / 2].getID();

  /* partition */
     while (i <= j) {
       while (arr[i].getID() < pivot)
              i++;
        while (arr[j].getID() > pivot)
              j--;
        if (i <= j) {
              tmp = arr[i];
              arr[i] = arr[j];
              arr[j] = tmp;
              i++;
              j--;
    }
}
/* recursion */
if (left < j)
    quickSort(arr, left, j);
if (i < right)
        quickSort(arr, i, right);
} 
```

“我的二分搜索”

```
 int binary=temp/2;
        for(int i=0;i<temp;i++)
        {
          if(myStudent[binary].getID()>srcid)
          {
            binary = binary - binary/2;
          }
          if(myStudent[binary].getID()<srcid)
          {
            binary = binary + binary/2;
          }
          if(myStudent[binary].getID()==srcid)
          {
           cout<<myStudent[binary].getID()+ " " + myStudent[binary].getName()+ " " + myStudent[binary].getSurname()<<endl;

         break;
         } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T22:10:45.620

老兄，您的代码存在严重问题，您的快速排序似乎还可以，但您的程序却不行。

1.  如果你想进行二分搜索，最好明智地插入以保持列表排序。
2.  您不需要循环来调用快速排序功能
3.  一旦你调用了快速排序，你有一个部分排序的列表，其中快速排序实际上并不是那么好，所以最好使用插入排序
4.  ...

我稍微修改了你的代码，你仍然可以做更多。

```
 #include <iostream>
    #include <string>

    using namespace std;

    class Student
    {
    public:
        string getName();
        string getSurname();
        string getID();
        void setName(string stdName);
        void setSurname(string stdSurname);
        void setID(string stdIDs);
    private:
        string name;
        string surname;
        string ID;
    };

    int quick_sort_help(Student students[],int left, int right)
    {
        Student val = students[right];
        Student temp;

        int j = right;
        int i = left - 1;

        while (true)
        {
            while (students[++i].getID() < val.getID());

            while (students[--j].getID() > val.getID()) {
                if(j == left)
                    break;
            }

            if(i >= j)
                break;

            temp=students[i];
            students[i]=students[j];
            students[j]=temp;
        }

        temp=students[i];
        students[i]=students[right];
        students[right]=temp;

        return i;
    }

    void quicksort(Student students[],int left, int right)
    {
        if (left < right)
        {
            int pivot = quick_sort_help(students, left, right);
            quicksort(students, left, pivot - 1);
            quicksort(students, pivot + 1, right);
        }
    }

    void quick_sort(Student students[],int size){
        quicksort(students,0,size-1);
    }

    int main()
    {
        Student myStudent[100];
        string name;
        string surname;
        string id;
        int choice;
        int temp=0;
        char ans1;
        do
        {
            cout<<"Please enter Student's name: ";
            cin>>name;
            cout<<"Please enter Student's surname: ";
            cin>>surname;
            cout<<"Please enter Student's ID: ";
            cin>>id;
            myStudent[temp].setName(name);
            myStudent[temp].setSurname(surname);
            myStudent[temp].setID(id);
            cout<<"Want to add new Student? (y/n)";
            cin>>ans1;
            temp++;
        }while(ans1=='y'||ans1=='Y');

        quick_sort(myStudent, temp);
        do{
            cout<<"What do you want to search with?"<<endl;
            cout<<"1-)Search with name:"<<endl;
            cout<<"2-)Search with surname:"<<endl;
            cout<<"3-)Search with ID (binary!):"<<endl;
            cout<<"4-)Show List!"<<endl;
            cin>>choice;

            switch (choice)
            {
            case 1:
                {
                    cout<<"Enter the student name:";
                    cin>>name;
                    for(int i=0;i<temp;i++)
                    {
                        if(myStudent[i].getName()==name)
                        {
                            cout<<myStudent[i].getID() + " " + myStudent[i].getName() + " " + myStudent[i].getSurname()<<endl;
                        }
                    }
                    break;
                }
            case 2:
                {
                    cout<<"Enter the student surname:";
                    cin>>surname;
                    for(int i=0;i<temp;i++)
                    {
                        if(myStudent[i].getSurname()==surname)
                        {
                            cout<<myStudent[i].getID() + " " + myStudent[i].getName() + " " + myStudent[i].getSurname()<<endl;
                        }
                    }
                    break;
                }
            case 3:
                {
                    cout<<"Enter the student ID:";
                    cin>>id;
                    int left=0;
                    int right = temp;
                    int mid = (right + left)/2;
                    while(left <= right){
                        if(myStudent[mid].getID()>id)
                        {
                            right = mid - 1;
                            mid = (right+left)/2;
                        }
                        if(myStudent[mid].getID()<id)
                        {
                            left = mid + 1;
                            mid = (right+left)/2;
                        }
                        if(myStudent[mid].getID()==id)
                        {
                            cout<<myStudent[mid].getID()+ " " + myStudent[mid].getName()+ " " + myStudent[mid].getSurname()<<endl;
                            break;
                        }
                    }
                    break;
                }
            case 4:
                {
                    cout<<"id/name/surname"<<endl;
                    for(int i=0;i<temp;i++)
                    {
                        cout<<myStudent[i].getID()+ " " + myStudent[i].getName() + " " + myStudent[i].getSurname()<<endl;
                    }
                    break;
                }    
            }
            cout<<"Do you want to continue?(y/n)"<<endl;
            cin>>ans1;
        }while(ans1=='y' || ans1=='Y');

        return 0;
    }

    string Student::getName()
    {
        return name;
    }

    string Student::getSurname()
    {
        return surname;
    }

    string Student::getID()
    {
        return ID;
    }

    void Student::setName(string stdName)
    {
        name=stdName;
    }

    void Student::setSurname(string stdSurname)
    {
        surname=stdSurname;
    }

    void Student::setID(string stdID)
    {
        ID=stdID;
    } 
```

# sql - 子查询中不允许使用多级 GROUP BY 子句

> ID：10284438
> 
> 赞同：5
> 
> 时间：2012-04-23T16:27:17.300
> 
> 标签：sql, ms-access

我在 MS Access 中有如下查询

```
SELECT tblUsers.Forename, tblUsers.Surname, 
  (SELECT COUNT(ID) 
     FROM tblGrades 
     WHERE UserID = tblUsers.UserID 
     AND (Grade = 'A' OR Grade = 'B' OR Grade = 'C')) AS TotalGrades
FROM tblUsers 
```

我已将其放入报告中，现在在尝试查看报告时显示警告“**子查询中不允许使用多级 GROUP BY 子句**”

我没有得到的是我什至在查询中没有任何 GROUP BY 子句，那么为什么它会返回此错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T20:15:13.190

来自 Allen Browne 出色的访问技巧网站：[Surviving Subqueries](http://allenbrowne.com/subquery-02.html#MultiLevelGroupBy)

## 错误：“不允许多级分组”

您花了半个小时用子查询构建了一个查询，并验证了它是否正常工作。您根据查询创建报告，但它立即失败。为什么？

问题出在 Access 在后台响应报表的排序和分组或聚合时所做的工作。如果它必须为报告聚合数据，那就是不允许的“多级”分组。

**解决方案**

*   在报表设计中，从“排序和分组”对话框中删除所有内容，并且不要尝试汇总报表页眉或报表页脚中的任何内容。（在大多数情况下，这不是一个实际的解决方案。）

*   在查询设计中，取消选中子查询下的显示框。（只有当您不需要在报表中显示子查询的结果时，此解决方案才实用。）

*   创建一个单独的查询来处理子查询。将此查询用作报表所基于的查询的源“表”。有时（并非总是）将子查询移动到较低级别的查询可以避免问题，即使第二个查询很简单

    从查询 1 中选择 *；

*   使用 DSum() 等域聚合函数代替子查询。虽然这对于小型表来说很好，但对于大型表来说性能将无法使用。

*   如果没有其他方法，请创建一个临时表来保存报告的数据。您可以将查询转换为追加查询（查询设计中的追加查询菜单）以填充临时表，然后基于临时表生成报告。

[**重要提示：**我在这里重新发布信息是因为我相信 Allen Browne 明确允许这样做。从他的网站：]

> [**许可** 您可以出于任何目的（个人、教育、商业、转售......）自由使用这些文章和示例数据库中的任何内容（代码、表单、算法......）。我们所要求的只是您在代码中承认该网站，并带有以下注释：“来源：[http](http://allenbrowne.com) ://allenbrowne.com ”改编自：[http ://allenbrowne.com](http://allenbrowne.com)]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T16:55:43.057

试试这个版本：

```
SELECT users.Forename, users.Surname, grades.TotalGrades
FROM tblUsers AS users
LEFT JOIN (SELECT COUNT(ID) as TotalGrades, UserID FROM tblGrades WHERE (Grade = 'A' OR Grade = 'B' OR Grade = 'C') group by userid) AS grades on grades.UserID = users.UserID 
```

我还没有测试过。查询本身应该没问题，但我不确定它是否适用于报表数据源。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:18:16.837

试试这个：

```
SELECT users.Forename, users.Surname, count(grades.id) AS TotalGrades
FROM tblUsers AS users
INNER JOIN tblGrades AS grades ON users.ID=grades.UserID
WHERE grades.Grade in ("A","B","C") group by users.ID; 
```

这是一个简单的连接表。基本上就是这个意思。选择用户评分为“A”或“B”或“C”的所有情况（这将为您提供如下表格：

```
 user1 | A 
   user1 | B 
   user1 | A 
   user2 | A 
   ... 
```

然后它按用户分组，计算成绩出现的次数 -> 为您提供每个用户所需范围内的成绩数。

# java - 如何在java中的二叉搜索树中插入节点和值？

> ID：10284439
> 
> 赞同：0
> 
> 时间：2012-04-23T16:27:20.620
> 
> 标签：java

我是数据结构和二叉树的新手，所以我有点迷茫。我的问题是我们如何在树本身中插入值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:32:03.170

您只需要明确检查这种情况。

**更新**

此外，您还需要添加另`Add(int v)`一种公开使用的方法（您也可以将您设为当前`Add(Node, int)`私有）。

```
public void Add(int v) {
    if (root == null) {
        // creating root node if it doesn't exist
        root = new Node();
        root.setValue(v);
    } else {
        // adding new element to tree
        Add(root, v);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:31:19.230

像这样添加一个新节点：

```
 Node n1 = new Node();
Node n2 = new Node();
n1.setValue(1);
n2.setValue(2);
n1.setRight(n2); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:31:34.250

你想`root`在一开始就通过。你可以重载`Add`：

```
public void Add(int v) {
    Add(root, v);
} 
```

而且您需要特殊情况`root == null`.

# actionscript-3 - Spark 标签截断问题

> ID：10284440
> 
> 赞同：4
> 
> 时间：2012-04-23T16:27:22.003
> 
> 标签：actionscript-3, apache-flex, label, truncate

我有一个 Flex spark 标签组件，其属性 width=125 和 maxDisplayedLines=1。当文本太长而无法显示时，这会成功截断文本，但是如果涉及括号，则文本会以我不想要的方式被截断。

例如，我将文本设置为“You (chinchiheather)”，它会显示“You(...”，除非它可以显示所有内容，否则不会在括号中显示文本的任何部分。我更喜欢“You (chinchi... " 比我得到的要多。是否有一些属性我可以设置以便括号不被特殊处理，或者有人知道其他方法吗？

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T18:26:36.307

`Label`具有`lineBreak`可用于控制自动换行的样式。它似乎也适用于截断。如果将`lineBreak`样式设置为“显式”，则文本将在不再适合的位置被截断，而不是在开括号之后。

此样式的默认值为“toFit”。

```
<s:Label lineBreak="explicit" /> 
```

或者

```
var label:Label = new Label();
label.setStyle("lineBreak", "explicit"); 
```

# google-maps - 为非营利动物福利组织构建基于地图的移动应用程序

> ID：10284441
> 
> 赞同：0
> 
> 时间：2012-04-23T16:27:23.240
> 
> 标签：google-maps, mobile, user-input

谁能给我一些基本的指导让我继续前进？

我对这个应用程序的一般要求

1.  乡村街道地图（好的）
2.  六种不同类别的 PIN 供志愿者使用，例如 Lost、Found、Alert 等（不知道如何提供
3.  固定类别过滤器以显示在地图上
4.  永久性销钉和非永久性销钉
5.  它也将链接到网站

您是否可以提供任何教程或建议来帮助我继续这个项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:36:06.433

我会查看 appcelerator.com，它的移动开发产品钛金属我认为拥有您想要的一切。地图很容易在其中完成，您谈论的引脚在 API 中称为注释，您可以为它们指定图像，这可能是您如何通过一起显示差异颜色或图像来对它们进行分类，然后使用您的应用程序中的 SQLite db 您可以列出它们并取出您需要的任何一个。

# javascript - 谷歌地图：如何缩小到地图上的所有位置

> ID：10284451
> 
> 赞同：2
> 
> 时间：2012-04-23T16:28:07.093
> 
> 标签：javascript, jquery, google-maps

我正在开发一个应用程序，该应用程序使用谷歌地图显示不同地点的列表，我一切正常，并且可以使用 currentLocation 和最接近的位置，它会缩放以显示这一点，但我试图更改它以设置它以使其缩小显示所有建筑物，而不仅仅是最近的建筑物

编辑：这是工作代码

```
// Sets the bounds of the map to include at lease one visable marker
function setBounds(){
if ( markerCluster.getMarkers().length > 0 && homeMarker != null){
    map.setZoom(17);
    var visableMarkers = markerCluster.getMarkers();
    // want to set the starting position at the homeMarker

    //Make an array of the LatLng's of the markers you want to show
    var LatLngList = new Array ();
    LatLngList.push(homeMarker.position);
    $.each(visableMarkers, function() {
        LatLngList.push(this.position);    
    });

    //  Create a new viewpoint bound
    var bounds = new google.maps.LatLngBounds ();
    //  Go through each...
    for (var i = 0, LtLgLen = LatLngList.length; i < LtLgLen; i++) {
        //  And increase the bounds to take this point
        bounds.extend (LatLngList[i]);
    }
    //  Fit these bounds to the map
    map.fitBounds (bounds); 
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:34:26.143

您的数组的代码`LatLngList`不正确，我认为应该说

```
var LatLngList = new Array (new google.maps.LatLng (52.537,-2.061), new google.maps.LatLng (52.564,-2.017)); 
```

# iphone - iPhone 是否发布模态视图控制器也会将推送的控制器弹出到堆栈中？

> ID：10284452
> 
> 赞同：0
> 
> 时间：2012-04-23T16:28:12.397
> 
> 标签：iphone, uinavigationcontroller, modalviewcontroller, presentmodalviewcontroller

假设您呈现模态视图控制器（即导航控制器）并推送到导航堆栈 3-4 个视图控制器。解除模态视图控制器也会从导航堆栈中弹出这些控制器，还是它们会继续留在内存中？

我的苹果文档指出，当呈现多个模态视图控制器时，如果您关闭根视图控制器，则所有其他控制器都将被关闭，但关闭动画只会发生一次。但是，没有提及，如果您在模态视图控制器上推送了一些控制器然后将其关闭会怎样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:43:00.087

当您关闭模态视图控制器时，它将从内存中释放。因此，除非您保留对它的引用，否则所有内容都将被删除，包括堆栈中的内部视图控制器。

但是，如果您确实保留了对它的引用，它会在被解除时保持活动状态，从而保持其当前状态。下次你展示它时，它会和你离开时一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:38:41.633

导航控制器*包含*在其中推送的视图控制器。因此，当导航控制器以模态方式呈现然后被解除时，它的（包含的）视图控制器堆栈也会被清理。

# javascript - 如何在 d3.scale.ordinal() 中指定域？

> ID：10284453
> 
> 赞同：7
> 
> 时间：2012-04-23T16:28:16.593
> 
> 标签：javascript, visualization, d3.js

```
var W = 100;
var H = 200;

var data = [{v:4}, {v:8}, {v:15}, {v:16}, {v:23}, {v:42}];

var x = d3.scale.linear().domain([0, max_x]).range([0, W]);
var y = d3.scale.ordinal().domain([0, 1, 2, 3, 4, 5]).rangeBands([0, H]); 
```

如何在不输入数据的情况下自动枚举数据域，例如我尝试过的 0、1、2、3`domain(data)`和`domain([0, data.length])`，但我需要介于两者之间的所有值。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T16:40:11.237

如果您希望序数比例的域成为数据的索引，请使用[d3.range](https://github.com/mbostock/d3/wiki/Arrays#wiki-d3_range)。例如，`d3.range(data.length)`返回`[0, 1, 2, 3, 4, 5]`.

# ios - 对象之间的通信 - C4Framework

> ID：10284460
> 
> 赞同：3
> 
> 时间：2012-04-23T16:28:25.407
> 
> 标签：ios, c4

我正在使用 C4 的 alpha 版本，我正在尝试在对象之间发送消息，但我无法让它工作。我尝试了一个非常简单的例子，但我无法让它工作......我试过这个：

```
[ashape listenFor:@"touch" from:anothershape andRunMethod:@"receive"]; 
```

但我没有收到任何消息或什么都没有......

这就是我所拥有的：

```
#import "MyShape.h"

@implementation MyShape
-(void)receive {
    C4Log(@"this button");
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T21:51:50.940

我发现您发布的代码存在一个主要问题。

默认情况下，C4 中的所有可见对象在`touchesBegan`被点击时都会发布通知。在您的代码中，您正在收听，`@"touch"`而`@"touchesBegan"`您应该在收听。

改变颜色的方法很容易实现......在您的 MyShape.m 文件中，您可以使用如下方法：

```
-(void)changeColor {
    CGFloat red = RGBToFloat([C4Math randomInt:255]);
    CGFloat green = RGBToFloat([C4Math randomInt:255]);
    CGFloat blue = RGBToFloat([C4Math randomInt:255]);

    self.fillColor = [UIColor colorWithRed:red green:green blue:blue alpha:1.0f];
} 
```

为了让事情顺利进行，您的 C4WorkSpace.m 应该如下所示：

```
#import "C4WorkSpace.h"
#import "MyShape.h"

@implementation C4WorkSpace {
    MyShape *s1, *s2;
}

-(void)setup {
    s1 = [MyShape new];
    s2 = [MyShape new];

    [s1 rect:CGRectMake(100, 100, 100, 100)];
    [s2 rect:CGRectMake(300, 100, 100, 100)];

    [s1 listenFor:@"touchesBegan" fromObject:s2 andRunMethod:@"changeColor"];
    [s2 listenFor:@"touchesBegan" fromObject:s1 andRunMethod:@"changeColor"];

    [self.canvas addShape:s1];
    [self.canvas addShape:s2];
}
@end 
```

# python - GdkPixbuf.PixbufDestroyNotify - NotImplementedError - python gtk3

> ID：10284465
> 
> 赞同：1
> 
> 时间：2012-04-23T16:28:45.013
> 
> 标签：python, gtk3, notimplementedexception, gdkpixbuf

我正在尝试使用 GdkPixbuf.Pixbuf.new_from_data() ，如 gtk 2.x 中所示，我正在传递 7 个参数。但它给了我一个错误，我需要传递 9 个参数。

我现在正在为 gtk2.x 工作。所以我想出了我需要传递的另外两个参数。

[http://developer.gimp.org/api/2.0/gdk-pixbuf/gdk-pixbuf-creating.html](http://developer.gimp.org/api/2.0/gdk-pixbuf/gdk-pixbuf-creating.html)

[http://developer.gimp.org/api/2.0/gdk-pixbuf/gdk-pixbuf-refcounting.html#GdkPixbufDestroyNotify](http://developer.gimp.org/api/2.0/gdk-pixbuf/gdk-pixbuf-refcounting.html#GdkPixbufDestroyNotify)

参数之一是 GdkPixbuf.PixbufDestroyNotify 类型。我不知道该怎么做。

我正在 ipython 中尝试帮助（GdkPixbuf.PixbufDestroyNotfiy），但出现错误。

**错误：NotImplementedError。**

```
self.img_pixbuf = GdkPixbuf.Pixbuf.new_from_data(self.img.tostring(),
                                                GdkPixbuf.Colorspace.RGB,
                                                False,
                                                self.img.depth,
                                                self.img.width,
                                                self.img.height,
                                                self.img.width*self.img.nChannels)

#Here my self.img is cv2.cv.iplimage object (OpenCV iplimage) 
```

我收到以下错误：

```
/home/jay/<ipython console> in <module>()

/usr/lib/python2.7/dist-packages/gi/module.pyc in __getattr__(self, name)
    241                 return registry[key]
    242 
--> 243         return getattr(self._introspection_module, name)
    244 
    245     def __dir__ (self):

/usr/lib/python2.7/dist-packages/gi/module.pyc in __getattr__(self, name)
    189             wrapper = info.get_value()
    190         else:
--> 191             raise NotImplementedError(info)
    192 
    193         self.__dict__[name] = wrapper

NotImplementedError: <gi.CallbackInfo object (PixbufDestroyNotify) at 0x0x8df5b6c> 
```

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T21:21:41.610

在 PyGObject 中，您不必处理 DestroyNotify 函数。如果 API 中暴露了一个，那么这是一个错误。您应该将其报告给[bugzilla.gnome.org](http://bugzilla.gnome.org)。

# vba - VBScript - 我如何让这些工作簿说话？

> ID：10284466
> 
> 赞同：0
> 
> 时间：2012-04-23T16:28:58.293
> 
> 标签：vba, vbscript, excel

我之前发布过关于让我的 VBScript 等到进程完成后再继续（更多信息：VBScript [- How to make program wait until process has finished?.](https://stackoverflow.com/questions/10279404/vbscript-how-to-make-program-wait-until-process-has-finished)

经过一番讨论，我得到了充分的答复。但是，我现在似乎正朝着代码的新方向前进，因为解决方案提出了另一个问题，我希望你能帮助我。

基本上我有一些我在下面提供的代码。它接受 4 个参数，其中一个是包含许多文件的文件夹的路径，我想在 VBA 宏中与其他三个一起使用这些文件。

```
If WScript.Arguments.Count = 4 Then

    ' process input argument
    Set args = WScript.Arguments
    arg1 = args.Item(0)
    arg2 = args.Item(1)
    arg3 = args.Item(2)
    arg4 = args.Item(3)

    ' Create a WshShell instance 
    Dim WShell
    Set WShell = CreateObject("WScript.Shell")

    ' Create an Excel instance
    Dim x1
    Set x1 = CreateObject("Excel.Application")

    ' Disable Excel UI elements
    x1.DisplayAlerts = False
    x1.AskToUpdateLinks = False
    'x1.AlertBeforeOverwriting = False
    x1.FeatureInstall = msoFeatureInstallNone

    ' Open the Workbooks specified on the command-line
    Dim x1WB 
    Dim x2WB 
    Dim x3WB 
    Dim x4WB 
    Dim strWB1
    Dim strWB2
    Dim strWB3
    Dim strWB4

    Dim FSO
    Dim FLD
    Dim FIL
    Dim strFolder

    strWB1 = arg1
    Set x1WB = x1.Workbooks.Open(strWB1)
    ' Show the workbook/Excel program interface. Comment out for silent running.
    x1WB.Application.Visible = True

    strWB2 = arg2
    Set x2WB = x1.Workbooks.Open(strWB2)
    ' Show the workbook/Excel program interface. Comment out for silent running.
    x2WB.Application.Visible = True

    strWB3 = arg3
    Set x3WB = x1.Workbooks.Open(strWB3)
    ' Show the workbook/Excel program interface. Comment out for silent running.
    x3WB.Application.Visible = True

    'To hold the string of the PATH to the multiple files
    strFolder = arg4

    Set FSO = CreateObject("Scripting.FileSystemObject")
    'Get a reference to the folder I want to search
    set FLD = FSO.GetFolder(strFolder)

    Dim strMyMacro
    strMyMacro = "my_excel_sheet_with_vba_module.xlsm!Sheet1.my_vba_macro"

    'loop through the folder and get the file names
    For Each Fil In FLD.Files

        WshShell.run """C:\Program Files\Microsoft Office\Office14\EXCEL.exe"" " & Fil, 1, true

        x1.Run strMyMacro

        '~~> Problem - How do I get the macro to run before opening the above file but run after it has opened (due to setting the bWaitOnReturn to true)
        '~~> Problem - How do I get the file on current iteration to close after the macro has completed?
        '~~> Problem - If this is not the issue, can you identify it?

    Next

    x1WB.close
    x2WB.close
    x3WB.close
    'x4WB.close

    ' Clean up and shut down
    Set x1WB = Nothing
    Set x2WB = Nothing
    Set x3WB = Nothing
    Set x4WB = Nothing

    Set FSO = Nothing
    Set FLD = Nothing

    x1.Quit
    Set x1 = Nothing
    Set WshShell = Nothing

    WScript.Quit 0

Else
        WScript.Quit 1

End If 
```

该脚本的工作方式如下：

1.  4 个参数被传递给脚本。第三个参数是一个**.xlsm**文件，其中包含我的 VBA 宏。最后一个参数是包含多个文件的文件夹的路径。
2.  然后它会打开前三个 Excel 文件。
3.  然后我运行一个循环来遍历`Fil`指定为第四个参数的文件夹中的文件。AFAIK 这必须通过`WScript.shell`使用该`.run`方法来完成，以便脚本的其余部分将挂起，直到它正在处理的 Excel 文件完成，然后关闭它并打开文件夹中的下一个文件。
4.  打开文件后`Fil`，我运行宏（尽管此时没有成功）。

我很想使用该对象简单地打开所有 Excel 文件，`WScript.shell`但是我无法以这种方式运行宏。

希望我能够定义这段 VBScript 的目标，但如果我没有让我知道，我会澄清一下。你能帮我吗？

谢谢，QF。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T00:22:56.880

这些方面的东西可能对你有用（在 Excel 中）。不过有几点我不清楚：

1.  您现有的 VBA 宏在哪里 - 我猜它在您打开的 3 个文件之一中？
2.  您循环浏览的文件夹中有哪些类型的文件？我猜是Excel。
3.  vbscript 是如何运行的？看起来您正在从 HTA 中掏空，但为什么不直接将其包含在 HTA 中呢？这将使您不必掏腰包并传递参数...

`Option Explicit`

 ````
Dim wb1 As Workbook, wb2 As Workbook

Sub ProcessFolder(path1, path2, sFolder)

    Dim wb As Workbook
    Dim s

    Set wb1 = Workbooks.Open(path1)
    Set wb2 = Workbooks.Open(path2)
    If Right(sFolder, 1) <> "\" Then sFolder = sFolder & "\"

    s = Dir(sFolder & "*.xls*", vbNormal)

    Do While Len(s) > 0
        Set wb = Workbooks.Open(sFolder & s)
        ProcessFile wb
        wb.Close False
        s = Dir()
    Loop

    wb1.Close False
    wb2.Close False

End Sub

Sub YourExistingMacro(wb As Workbook)
'do stuff with wb and presumably the other 3 open files...
End Sub 
````

# cocoa-touch - 后退按钮不显示

> ID：10284468
> 
> 赞同：1
> 
> 时间：2012-04-23T16:29:11.830
> 
> 标签：cocoa-touch, uinavigationcontroller

我在 UINavigationController 上推了一个 ViewController，但我没有看到“后退”按钮......导航栏是空的，但在那里。

在我的故事板中，我的初始视图控制器是 NavigationController，我在 Simulated Metrics 部分中将“顶栏”设置为“无”。当我切换到推断或导航栏时，一切正常，我看到带有文本“后退”的后退按钮。（但是我的所有视图都很丑，因为我出于某种原因删除了 NavBar）。

我怎样才能保留我的设计（NavBar 隐藏/不存在）并能够使用 NavBar 和 Back 按钮推送新的 ViewController。按需导航栏！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:06:05.990

找到了解决方案：只需将我的 AppDelegate 作为 UINavigationController 委托并手动隐藏/显示 NavBar。

在我的故事板中，导航控制器带有：

1.  模拟指标 -> 顶栏 -> 无

2.  导航控制器-> 栏可见性-> 取消选中“显示导航栏”

AppDelegate .h/.m：

```
@interface AppDelegate : UIResponder <UIApplicationDelegate, UINavigationControllerDelegate>

- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated {
    if (something) {
        navigationController.navigationBarHidden = TRUE;
    }
}

- (void)navigationController:(UINavigationController *)navigationController didShowViewController:(UIViewController *)viewController animated:(BOOL)animated {
    if (somethingElse) {
        navigationController.navigationBarHidden = FALSE;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T12:16:37.563

您想在应用程序中配置导航，请在应用程序委托中的 ApplicationDidFinishLoading 方法中尝试此操作

```
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:rootViewController];

[window makeKeyAndVisible];
[window addSubview:navController.view]; 
```

在使用它更改按钮操作方法中的视图之后

```
DetailViewController *ViewController = [[DetailViewController alloc] initWithNibName:nil bundle:nil];

  [self.navigationController pushNavigationController:ViewController animated:YES]; 
```

# php - php资源释放

> ID：10284471
> 
> 赞同：0
> 
> 时间：2012-04-23T16:29:31.227
> 
> 标签：php, mysql, hosting

我的客户在共享服务器上拥有他们的虚拟主机帐户，并且他们的帐户已被暂停，因为“导致严重的服务器过载”。我查看了代码，它是功能编程的 php，它使用了大量的数据库查询。我已经看过了，其中大多数是“SELECT *”。该数据库有 10 行或更多行和 1000 多条记录的表。

我想知道原因是否可能是所有 sql 查询都没有被释放，但我不确定“脚本执行”何时完成。是在函数执行完毕之后，还是整个页面都渲染完毕了？可能是表（结构或记录）的大小吗？有没有人有任何其他想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:29:51.453

这实际上取决于您的客户使用的软件包类型，自定义编码的脚本类型或 wordpress 之类的标准脚本。

**导致严重的服务器过载**- 可能是很多事情：

**高内存使用：**该脚本未使用单例模型或将大量数据分配给数组、变量或包含大量文件。基本上糟糕的设计和代码气味。

**高 CPU：**非常长的脚本、在每个页面视图上具有复杂计算的长迭代循环或无限循环（套接字）等。

**高网络流量：**屏幕 Scappers，例如从其他站点请求大量流量的爬虫，或者基本上是抓取外部内容的脚本，或者类似于 torrent 跟踪器的东西。

**磁盘使用率高：**不断轰炸服务器 IO 堆栈（不断写入和读取磁盘）

包含大量数据库查询的脚本可能属于：高磁盘使用率（读取）+高内存使用率（迭代结果）+高 CPU（对结果进行处理））

您应该使用工具在本地对脚本进行性能分析：[xDebug](http://xdebug.org/)或[PQP](http://particletree.com/features/php-quick-profiler/)，并找出真正发生的事情。

如果您的客户对那里的网站很认真，那么他们应该投资 VPS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:37:11.477

确保正确关闭 SQL 连接。如果您一次执行大量查询，则将连接保持打开更长时间可能会更有效。或者，如果您在每次查询后没有关闭它们，可以尝试这样做。我必须说 10 张桌子并不多，如果这会使共享服务器超载，我是否会感到惊讶。

# javascript - 在浏览器中移动图像元素

> ID：10284473
> 
> 赞同：1
> 
> 时间：2012-04-23T16:29:35.147
> 
> 标签：javascript, html, css, dom-events, javascript-framework

我正在使用 UIZE JavaScript 框架在 div 中移动图像元素。这是正常运行的。

我想让这个功能做另外两件事。

1.  自动重置图像的位置，以防用户将图像拖出边界或根本不允许用户将其拖出边界。

2.  如果用户将图像拖到示例页面上的预定义位置“绿色框”：www.marklaurel.com/sample.php 我想显示一个 div，询问用户是否愿意访问对应的图像。

我有一个当前由按钮触发的功能：

```
 <script type="text/javascript">
    function snapBack()
    {
        with (document)
       {
        getElementById('logoUize').style.left = '133';
        getElementById('logoUize').style.top = '6';
        getElementById('logoPsd').style.left = '240';
        getElementById('logoPsd').style.top = '60';
        getElementById('logoAfx').style.left = '240';
        getElementById('logoAfx').style.top = '206';
        getElementById('logoMaya').style.left = '130';
        getElementById('logoMaya').style.top = '237';
        getElementById('logoHtml5').style.left = '22';
        getElementById('logoHtml5').style.top = '194';
        getElementById('logoCss3').style.left = '22';
        getElementById('logoCss3').style.top = '48';
    }
     }
     </script> 
```

但是，我从浏览器控制台收到此警告：

```
Warning: Error in parsing value for 'left'.  Declaration dropped.
Source File: http://marklaurel.com/sample.php
Line: 0

Warning: Error in parsing value for 'top'.  Declaration dropped.
Source File: http://marklaurel.com/sample.php
Line: 0 
```

我可以请一些帮助以使其正常工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:35:27.627

`133`不是有效的 CSS 位置。您想要`133px`改为，或其他单位，例如`133em`.

（别担心，几年前我犯了这个错误，然后想知道为什么我的网站只能在 IE 中运行：P）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:35:54.070

此错误消息来自与`element.style.left = 'XX';`浏览器不完全一样的事实。你必须说XX是什么单位。为此，您将使用类似`element.style.left = 'XXpx'`or`element.style.left = 'XXem'`或任何其他单位的东西。

有关可用单位的更多详细信息，请参阅[规范](http://www.w3.org/TR/css3-values/#lengths)

# sql - 查找多个列重复项，然后将它们全部列出

> ID：10284478
> 
> 赞同：0
> 
> 时间：2012-04-23T16:29:44.767
> 
> 标签：sql, sql-server

我发现像这样重复的数据库记录：

```
select s.name, r.name Region, c.name Country
from supplier s
join region r on r.id = s.regionid
join region c on c.id = isnull(r.pid, r.id)
group by s.name, r.name, c.name
having count(s.name) >1 
```

什么是列出它们的最佳方式（所以如果两个重复，它将出现两次等等......）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:37:26.610

最简单的方法是从您的 Find-dups 查询创建一个内联查询并加入“without-a-group-by”查询。

```
select s.name, r.name Region, c.name Country
     from supplier s
     join region r on r.id = s.regionid
     join region c on c.id = isnull(r.pid, r.id)
     inner join (select s.name, r.name Region, c.name Country
                from supplier s
                join region r on r.id = s.regionid
                join region c on c.id = isnull(r.pid, r.id)
                group by s.name, r.name, c.name
                having count(s.name) >1 ) dups
     ON s.name = dups.name
        and r.name = dups.region
        and c.name = dups.country 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T16:42:35.140

我认为应该这样做：

```
with C as (
  select
    s.name,
    r.name Region,
    c.name Country,
    count(*) over (
      partition by s.name, r.name, c.name
    ) as ct
  from supplier s
  join region r on r.id = s.regionid
  join region c on c.id = isnull(r.pid, r.id)
)
  select
    name, Region, Country
  from C
  where ct > 1; 
```

# php - facebook用户认证php

> ID：10284479
> 
> 赞同：0
> 
> 时间：2012-04-23T16:29:49.023
> 
> 标签：php, jquery, facebook, facebook-graph-api

我正在使用 Codeignitor 。

我想通过我的应用程序发布到 Facebook。

问题是它总是返回你没有登录。

我在这里尝试过..

```
function postTofb()
{

require_once("pocket/fb/facebook.php");
        $fbconfig = array();
        $fbconfig['appId'] = 'app_id';
        $fbconfig['secret'] = 'app_secret';
        $fbconfig['baseurl']    = "site_name";

                $facebook = new Facebook($fbconfig);
        $user = $facebook->getUser();

               if($user)
           {
            try {

                $user_profile = $facebook->api('/me');
            $ID = $user_profile['id'];
            echo $ID;

                 } 
        catch (FacebookApiException $e) 
        {

        echo $e;

             }

        }
        else
        {

        //else starts

            $loginUrl   = $facebook->getLoginUrl(
            array(
                'scope'=> 'email,offline_access,publish_stream,user_birthday,user_location,user_work_history,user_about_me,user_hometown',
                'redirect_uri'=>$fbconfig['baseurl']
            )
        );
    $data["status"] = FALSE;
    $data["url"] = $loginUrl;
    echo json_encode($data);
    //else ends
        }
    } 
```

现在我通过 ajax 调用该函数......但它总是以 FALSE 响应......我的意思是 else 部分。

我在这里得到什么

```
{"status":false,"url":"https:\/\/www.facebook.com\/dialog\/oauth?client_id=281255791959236&redirect_uri=http%3A%2F%2Fwww.MY_SITE_NAME.com%2F&state=3d19a96f48022344222f518609f30537&scope=email%2Coffline_access%2Cpublish_stream%2Cuser_birthday%2Cuser_location%2Cuser_work_history%2Cuser_about_me%2Cuser_hometown"} 
```

看起来我错过了一些点......请帮助我..

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:21:21.347

该问题与 LoginUrl 有关

我删除了一些权限参数并且它起作用了。

`loginUrl = $facebook->getLoginUrl(array("scope")=>"publish_stream");`

谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:38:21.007

facebook 不再支持离线访问，您唯一能做的就是生成一个最长 60 天的令牌。

# c# - 不分叉的 C# Windows 应用程序（或没有控制台窗口的控制台应用程序）

> ID：10284481
> 
> 赞同：3
> 
> 时间：2012-04-23T16:29:49.937
> 
> 标签：c#, windows, multithreading, console, fork

> **可能重复：**
> [一个可执行文件可以同时是控制台和 GUI 应用程序吗？](https://stackoverflow.com/questions/493536/can-one-executable-be-both-a-console-and-gui-app)

我正在用 C# 编写一个程序，默认情况下它作为标准的“Windows 应用程序”（项目属性-> 输出类型）运行。

它的正常行为是从快捷方式或其他任何方式运行并显示 GUI。

但是，对于某些命令行参数，它将作为控制台应用程序运行，不显示 GUI 并向调用 shell 返回一个退出代码。

我遇到了一个问题，如果我将它编译为“Windows 应用程序”，当它运行时，它会分叉并且父线程立即返回到调用进程，而程序仍然在一个独立的子线程中运行。这意味着它在终止时不能向调用进程返回退出代码，因为在程序启动和分叉时已经发生了这种情况。就调用进程所知，应用程序总是立即完成并返回零。

对于直接的控制台程序，答案很简单——将其编译为“控制台应用程序”。在这种情况下，应用程序不会在启动时分叉，调用进程会一直等到程序完成并返回退出代码。不幸的是，沿着这条路走下去，Windows 总是显示一个命令窗口（控制台，不管你怎么称呼它……大黑东西！），如果程序在其 GUI 模式下运行，这很讨厌。我想我可以调用一个 API 来隐藏那个窗口，但它仍然会瞬间闪现。

那么，有没有办法阻止“Windows 应用程序”在启动时分叉？或者有没有办法控制“控制台应用程序”是否显示控制台窗口？理想情况下，这将通过 C# 代码完成，让我能够根据命令行参数选择发生的事情。

我看到有人提出类似问题的帖子，但没有找到正确的答案（大多数情况下，受访者不了解分叉业务）。

我刚刚完成了这个应用程序的 Cocoa (Mac) 版本（这正是我在这里想要实现的）。如果Windows版本做不到，那就太可惜了。这一定是可能的！:-)

任何想法，将不胜感激。

# c++ - 参考临时和警告

> ID：10284482
> 
> 赞同：0
> 
> 时间：2012-04-23T16:30:00.770
> 
> 标签：c++, compiler-warnings, gcc-warning

我花了一个小时在我的代码中找到这个问题：

```
vector<string> & input_variables = parse_xml(xml_path)["variables"]; 
```

哪里`parse_xml`是返回 a 的函数`std::map<std::string, std::vector<std::string> >`。为什么 gcc 没有警告我（使用 -Wall）？我错过了一些标志吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:36:19.400

您已经引用了一个被破坏的对象。在 C++11 中编写了新的语言特性，使该代码非法。如果你想使用它，你必须复制或交换数据到一个局部变量中。GCC 没有警告你，因为 C++03 没有提供必要的特性来防止这种情况。

从技术上讲， 的返回值`operator[]`是一个左值。不幸的是，它即将被它的主人摧毁`std::map`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T21:20:57.187

GCC 不会警告您，因为从技术上讲，没有什么可警告的。

`parse_xml()`返回一个`std::map`按值，这是一个临时的。调用`operator[]`返回一个引用。编译器无法*在本地*知道此引用实际上是临时的*一部分。*`std::map`就编译器所知，`operator[]`可能会返回对全局或其他东西的引用。

临时的成员变量被认为是临时的，它与外部临时的生命周期相关联。`operator[]`但是函数（如）的返回值并*没有*那么相关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:55:09.707

它不警告您的原因是因为您通过一系列有效步骤进行了无效操作：

```
struct X
{
    int c;
    int & operator [] (int) { return c; } /* this is perfectly OK */
};

X f()
{
    return X(); /* this is perfectly OK */
}

int main()
{
    int &x = f()[1]; /* can apply [] on temporary, therefore OK */
} 
```

`f()`您可以通过将结果显式标记为as来防止这种情况发生`const`。

# java - Ghost4J/Ghostscript - 尝试将字体嵌入 PDF 时出现错误 100

> ID：10284483
> 
> 赞同：4
> 
> 时间：2012-04-23T16:30:06.457
> 
> 标签：java, c, ghostscript

我有带有引用字体的 PDF，我想使用 Ghost4J 输出包含嵌入字体的 PDF。

```
public void execute() {
    Ghostscript gs = Ghostscript.getInstance();
    String[] cmdStr={
        "-dNOPAUSE","-dBATCH","-dCompatibilityLevel=1.4",
        "-dPDFSETTINGS=/prepress","-dSAFER","-dNOPLATFONTS",
        "-sDEVICE=display","-sPAPERSIZE=letter",
        "-I","C:\\WINNT\\Fonts\\;C:\\Program Files\\gs\\gs9.05\\lib\\;C:\\Program Files\\gs\\gs9.05\\bin\\;",
        "-dSubsetFonts=true","-dEmbedAllFonts=true",
        "-sFONTPATH=C:\\WINNT\\Fonts", "-sOutputFile=",
        outputPath,"-c",".setpdfwrite", "-f",inputPath
    };      
    try {

        gs.initialize(cmdStr);
        gs.exit();

    } catch (GhostscriptException e) {          
        System.out.println("ERROR: " + e.getMessage());
        e.printStackTrace();
    } 
```

运行任何 PDF 时出现以下错误：

```
ERROR: Cannot initialize Ghostscript interpreter. Error code is -100 
```

在命令行上运行时，参数可以正常工作。

```
gswin32c.exe -dNOPAUSE -dBATCH -dCompatibilityLevel=1.4 -dPDFSETTINGS=/prepress -dSafer -NOPLATFONTS -sDEVICE=pdfwrite -sPAPERSIZE=letter -dSubsetFonts=true -dEmbedAllFonts=true -sFONTPATH=C:\\WINNT\\Fonts -sOutputFile=c:\out.pdf -f c:\test.pdf 
```

**后续行动：**

*   GhostScript 有权写入 C:。
*   我删除了除 outputPath、“-f”、inputPath 之外的所有开关，但仍然出现错误
*   在 inputPath 之后删除了 cmdStr 末尾的逗号

**笔记：**

*   我正在努力获取回调

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T04:42:46.187

inputPath 变量后有一个逗号。这是无效的 Java 语法。

我在生产 Java 应用程序中使用 ghostscript 从 PDF 生成 PCL 文件。我使用 java.lang.Runtime 类来执行 Ghostscript 可执行文件，因此我无法直接为 Ghost4J 提供建议。

我怀疑问题在于 api 不知道支持文件的位置。尝试传递字体、lib 和 bin 位置的完整路径，如下所示。

```
"-Ic:\Program Files (x86)\gs\fonts\;c:\Program Files (x86)\gs\lib\;c:\Program Files (x86)\gs\bin\;" 
```

# ruby-on-rails-3 - Rails link_to 和 jQuery Mobile 1.1.0 在 iPhone 上不起作用

> ID：10284484
> 
> 赞同：0
> 
> 时间：2012-04-23T16:30:14.460
> 
> 标签：ruby-on-rails-3, jquery-mobile

自从将我的 Rails 应用程序从 JQueryMobile 1.0.1 升级到 1.1.0 后，我使用 :get 以外的方法的 link_to 不再在 iPhone Safari 上工作。

假设我在 /profile 页面上并具有以下代码：

```
=link_to 'Videos', videos_path(@video), :method => :post 
```

在源代码检查器中，我可以看到 Rails 正确生成了一个锚标记到 fe: /videos/9
但是当我在 iPhone Safari 上单击此链接时，出现服务器错误：

```
Started POST "/profile" for 10.0.0.7 at 2012-04-23 17:51:16 +0200
ActionController::RoutingError (No route matches [POST] "/profile/9"): 
```

'profile' 是当前页面的 url，而 link_to 标记指向 'videos_path'，所以我没有向 video/ 发布帖子，而是向当前 url 'profile/' 发布帖子

使用 jqm 1.0.1，链接可在笔记本电脑和 iPhone Safari 上运行，因为 jqm 1.1.0 链接可在笔记本电脑上运行，但不能在 iPhone Safari 上运行。

我是否错过了一些新属性，例如数据方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T11:29:12.547

不幸的是，我对此没有很好的答案，但是：a）我遇到了完全相同的问题 b）我已经确认降级到 jQM 1.0.1 可以解决问题

我也想知道在过渡到 1.1 的过程中是否遗漏了什么？

# c++ - `std::greater` 或 `std::less_equal` 的类型是什么

> ID：10284485
> 
> 赞同：0
> 
> 时间：2012-04-23T16:30:31.433
> 
> 标签：c++, stl

```
template <class T> struct greater : binary_function <T,T,bool> {
  bool operator() (const T& x, const T& y) const
    {return x>y;}
};

template <class T> struct logical_and : binary_function <T,T,bool> {
  bool operator() (const T& x, const T& y) const
    {return x&&y;}
};

// (i > 5 && i <=10)
countBoost = std::count_if(vecInts.begin(), vecInts.end(),
                           boost::bind(std::logical_and<bool>(), 
                                                        ^^^^ // ???? Why ????
                                    boost::bind(std::greater<int>(),    _1, 5),
                                    boost::bind(std::less_equal<int>(), _1, 10))
                          ); 
```

根据我的理解，`T`for的传入类型`std::logical_and<T>`是 function 的传入参数的类型`operator()`。鉴于上面的代码，似乎 is 的类型`std::greater`是`bool`由 的返回值决定的 `operator()`。

那是对的吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:47:35.037

函数的返回类型`operator()`是 bool。的类型 `std::greater`是`std::greater`。它是一个功能对象。因此：

```
std::greater<int> g;
std::cout << typeof( g ).name() << std::endl; 
```

将返回编译器用来显示类模板的实例化类型的任何内容：`"struct std::greater<int>"`例如，对于 VC++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:46:55.613

boost binder 的魔力比你想象的要多。当绑定参数之一是绑定表达式本身时，它将在调用期间*执行*该表达式并使用结果。`std::less<int>`在这种情况下，内部绑定表达式是对and的调用`std::greater<int>`，两者都产生 a `bool`，然后将其传递给`std::logical_and<bool>`。

# java - 如何获取 SOAP 标头

> ID：10284486
> 
> 赞同：4
> 
> 时间：2012-04-23T16:30:32.477
> 
> 标签：java, soap, jax-ws, cxf

这是请求

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
    xmlns:soap="http://soap.ws.server.wst.fit.cvut.cz/">
    <soapenv:Header>
        <userId>someId</userId>
    </soapenv:Header>
    <soapenv:Body>
    ...
    </soapenv:Body>
</soapenv:Envelope> 
```

我想得到那个`userId`。

我试过这个

```
private List<Header> getHeaders() {
    MessageContext messageContext = context.getMessageContext();
    if (messageContext == null || !(messageContext instanceof WrappedMessageContext)) {
        return null;
    }
    Message message = ((WrappedMessageContext) messageContext).getWrappedMessage();
    return CastUtils.cast((List<?>) message.get(Header.HEADER_LIST));
}

private String getHeader(String name) {
    List<Header> headers = getHeaders();
    if (headers != null) {
        for (Header header : headers) {
            logger.debug(header.getObject());
            // return header by the given name                   
        }
    }
    return null;
} 
```

它记录`[userId : null]`。我怎样才能获得价值，为什么`null`会有？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T17:33:15.210

“[userId : null]”通常是 DOM 元素的“toString”打印输出。最有可能的是，如果您执行类似的操作

```
logger.debug(header.getObject().getClass()) 
```

你会看到它是某种 DOM 元素的子类。因此，类似：

```
logger.debug(((Element)header.getObject()).getTextContent()) 
```

可能会打印文本节点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-16T19:39:32.900

```
 import javax.xml.soap.*;

    SOAPPart part = request.getSOAPPart();
    SOAPEnvelope env = part.getEnvelope();
    SOAPHeader header = env.getHeader();
    if (header == null) {
        // Throw an exception
     }

    NodeList userIdNode = header.getElementsByTagNameNS("*", "userId");
    String userId = userIdNode.item(0).getChildNodes().item(0).getNodeValue(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-09T15:09:35.380

您可以获得没有拦截器和没有 JAXB 的肥皂标题。

在你的 service_impl 类中添加：

```
public class YourFunctionNameImpl implements YourFunctionName{

@Resource
private WebServiceContext context;

private List<Header> getHeaders() {
    MessageContext messageContext = context.getMessageContext();
    if (messageContext == null || !(messageContext instanceof WrappedMessageContext)) {
        return null;
    }

    Message message = ((WrappedMessageContext) messageContext).getWrappedMessage();
    List<Header> headers = CastUtils.cast((List<?>) message.get(Header.HEADER_LIST));
    return headers;
} 
```

...

然后在你的函数中你可以使用：

```
List<Header> headers = getHeaders();
        for(Iterator<Header> i = headers.iterator(); i.hasNext();) { 
            Header h = i.next(); 
            Element n = (Element)h.getObject(); 

            System.out.println("header name="+n.getLocalName()); 
            System.out.println("header content="+n.getTextContent()); 
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T17:15:11.880

拥有`MessageContext`messageContext，您可以使用以下代码：

```
HeaderList hl = (HeaderList) messageContext.get(JAXWSProperties.INBOUND_HEADER_LIST_PROPERTY); 
```

这使您可以访问所有 SOAP 标头。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T13:34:46.313

我们可以通过在 CXF 拦截器中添加以下代码来获取服务器端的 SOAP 标头。

创建一个类

公共类 ServerCustomHeaderInterceptor 扩展 AbstractSoapInterceptor {

```
@Resource
private WebServiceContext context;

public ServerCustomHeaderInterceptor() {
    super(Phase.INVOKE);

}

@Override
public void handleMessage(SoapMessage message) throws Fault,JAXBException {
    System.out.println("ServerCustomHeaderInterceptor  handleMessage");
    JAXBContext jc=null;
    Unmarshaller unmarshaller=null;
    try {
    jc = JAXBContext.newInstance("org.example.hello_ws");
    unmarshaller = jc.createUnmarshaller();
    } catch (JAXBException e) {
    e.printStackTrace();
    }

    List<Header> list = message.getHeaders();
    for (Header header : list) {
            ElementNSImpl el = (ElementNSImpl) header.getObject();
        ParentNode pn= (ParentNode) el.getFirstChild();
        //Node n1= (Node) pn;
        //Node n1= (Node) el.getFirstChild();

        CustomHeader customHeader=(CustomHeader)  unmarshaller.unmarshal(el.getFirstChild());

    }

} 
```

在此之后，我们需要将其作为拦截器注入，例如

```
 <jaxws:inInterceptors>
        <bean class="org.apache.cxf.interceptor.LoggingInInterceptor" />
    <bean class="org.example.hellows.soap12.ServerCustomHeaderInterceptor" />
   </jaxws:inInterceptors> 
```

在您的服务器上下文 xml 中。

我们可能需要根据您的要求更改几行。基本流程将像这样工作。

# asp.net-mvc-3 - 子模型的多个父模型

> ID：10284489
> 
> 赞同：1
> 
> 时间：2012-04-23T16:30:36.653
> 
> 标签：asp.net-mvc-3, entity-framework, foreign-keys, lazy-loading, model-binding

我正在使用 Entity Framework 4 和 C# 创建一个 MVC3 asp.net 应用程序。

我试图阅读 EF 和模型绑定、延迟加载等。但我遇到了障碍。

我有一个用户模型。Store 和 UserType 模型可以有一个用户的 ICollection。当我使用创建操作添加用户时，如何指定多个父级？

我想我只知道如果有一个父母，我该怎么添加。

我的模型：

```
 public class UserType
{
    public virtual int ID { get; set; }
    public virtual string UserTypeName { get; set; }
    public virtual ICollection<User> Users { get; set; }
}

public class Store
{
    public virtual int ID { get; set; }
    public virtual string StoreName { get; set; }
    public virtual Address StoreAddress { get; set; }
    public virtual ICollection<Workroom> Workrooms { get; set;}
    public virtual ICollection<User> Users { get; set; }
}

    public class User
{
    public virtual int ID { get; set; }
    public virtual string Username { get; set; }
    public virtual string Email { get; set; }
    public virtual Store Store { get; set; }
    public virtual UserType UserType { get; set; }
} 
```

这是我的数据库上下文：

```
 public DbSet<Workroom> Workrooms { get; set; }
    public DbSet<Ticket> Tickets { get; set; }
    public DbSet<Customer> Customers { get; set; }
    public DbSet<Store> Stores { get; set; }
    public DbSet<User> Users { get; set; }
    public DbSet<UserType> UserTypes { get; set; }

    protected override void OnModelCreating(ModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Store>()
            .HasMany(store => store.Workrooms)
            .WithRequired(workroom => workroom.Store);

        modelBuilder.Entity<Store>()
            .HasMany(store => store.Users)
            .WithRequired(user => user.Store);

        modelBuilder.Entity<UserType>()
            .HasMany(usertype => usertype.Users)
            .WithRequired(user => user.UserType);

        base.OnModelCreating(modelBuilder);
    } 
```

这是我的创建操作：

```
 public ActionResult Create()
    {
        return View(new User());
    } 

    //
    // POST: /Users/Create

    [HttpPost]
    public ActionResult Create(User newUser)
    {
        try
        {
            int storeID = newUser.Store.ID;
            var store = _db.Stores.Single(r => r.ID == storeID);
            store.Users.Add(newUser);
            _db.SaveChanges();

            return RedirectToAction("Index");
        }
        catch (Exception ex)
        {
            ModelState.AddModelError("", ex.InnerException.Message);

            return View();
        }
    } 
```

我是否只是为 UserType 添加另一个“添加”调用？例如： int userTypeID = newUser.UserType.ID var usertype = _db.UserTypes.Single(s => s.ID == userTypeID)

实体框架如何知道用户有另一个父级？？？...我关心的？

我的直觉是我应该以不同的方式来做这件事，更具体，更准确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:45:51.307

在这种情况下，您可能希望将用户添加到 Users 表，而不是 Stores。然后在提交之前将 StoreID 和 UserTypeID 分配给用户。

看起来你已经在你的 UI 中设置了 StoreID，你对 UserType 做同样的事情吗？如果是这样，那么只需将用户添加到用户表中就可以了。

# ruby-on-rails - 计数器缓存更新后调用方法

> ID：10284493
> 
> 赞同：0
> 
> 时间：2012-04-23T16:30:46.327
> 
> 标签：ruby-on-rails, ruby-on-rails-3

每当更新计数器缓存时，Rails 中有没有办法调用函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:03:46.003

没有办法开箱即用。您可以轻松地制作一个添加该功能的 Gem。从 after_create 和 after_destroy 回调手动更新计数器可能更容易，这也可以执行您需要的任何其他代码。

例如：

```
class Parent
  has_many :kids
  # The parents table has a `kids_counter` column which acts as a counter cache.
end

class Kid
  belongs_to :parent
  after_create :hello
  after_destroy :goodbye

  def hello
    Parent.increment_counter(:kids_counter, parent_id)
    # Execute anything else you need here.
  end

  def goodbye
    Parent.decrement_counter(:kids_counter, parent_id)
    # Execute anything else you need here.
  end
end 
```

# c++ - 模板类中方法的部分特化

> ID：10284498
> 
> 赞同：22
> 
> 时间：2012-04-23T16:31:07.760
> 
> 标签：c++, templates, template-specialization, sfinae

鉴于：

```
struct A
{
    virtual bool what() = 0;
};

template<typename T, typename Q>
struct B : public A
{
    virtual bool what();
}; 
```

我想部分专业化`what`，例如：

```
template<typename T, typename Q>
bool B<T, Q>::what()
{
    return true;
}

template<typename Q>
bool B<float, Q>::what()
{
    return false;
} 
```

但似乎这是不可能的（是在 C++11 中吗？）所以我尝试了 SFINAE：

```
template<typename T>
typename std::enable_if<std::is_same<T, float>::value, bool>::type B<T>::what()
{
    return true;
}

template<typename T>
typename std::enable_if<!std::is_same<T, float>::value, bool>::type B<T>::what()
{
    return false;
} 
```

这也不起作用，我不知道为什么，有人吗？所以我找到[了这个线程](https://stackoverflow.com/questions/1501357/template-specialization-of-particular-members/1501455#1501455)并最终得到：

```
template<typename T, typename Q>
struct B : public A
{
    virtual bool what()
    {
        return whatimpl(std::is_same<T, float>());
    }

    bool whatimpl(std::false_type)
    {
        return false;
    }

    bool whatimpl(std::true_type)
    {
        return true;
    }
}; 
```

这个最终解决方案有效，但为什么该`enable_if`技术不起作用？我也非常愿意接受我尚未遇到的更简洁答案的建议。

我尽可能地简化了我的例子——在我的真实用例`what()`中不叫*什么*，实际上做了很多工作，我想“专门化”一个用户定义的类型，而不是`float`.

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-24T08:02:31.677

标准仅对类模板明确允许部分特化（参见 14.5.5 类模板部分特化）

对于类模板的成员，只允许显式特化。

14.7 (3) 说：

可以为函数模板、类模板、类模板**的成员**或成员模板声明显式特化。**template<>**引入了显式的特化声明。

所以任何以

```
template<typename T> 
```

不是类模板特化成员允许的语法。

**[编辑]**

至于 SFINAE 的尝试，它失败了，因为实际上这里既没有重载也没有特化（SFINAE 在为重载解决方案定义一组候选函数或选择适当的特化时工作）。what() 被声明为类模板的单个方法并且应该有一个定义，并且这个定义应该有一个形式：

```
template<typename T, typename Q> 
B<T,Q>:: bool what(){...} 
```

或者也可以明确专门用于 B 类的特定实例化：

```
template<> 
B<SomeParticularTypeT,SomeParticularTypeTypeQ>:: bool what(){...} 
```

任何其他形式在语法上都是无效的，所以 SFINAE 无能为力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:01:33.047

为什么不改成..

```
template<typename T, typename Q> 
struct B : public A 
{   
   bool what()
   {
      return false; //Or whatever the default is...
   }
}; 

template<typename Q>
struct B<float, Q> : public A 
{   
   bool what()
   {
      return true;
   }
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-09-18T16:50:29.393

根据您的用例，两种可能的解决方案：

1.  **灵活的实现类：**您的方法的一个问题是类型缺乏灵活性 - 不超过 true 或 false 类型。基于这个出色的[CppCon 演讲](https://github.com/CppCon/CppCon2016/blob/master/Tutorials/Template%20Normal%20Programming%2C%20Part%201/Template%20Normal%20Programming%2C%20Part%201%20-%20Arthur%20O%27Dwyer%20-%20CppCon%202016.pdf)（幻灯片 77），我通过将工作委托给另一个特定于实现的类模板编写了这个解决方案。***[您可以在此处](https://coliru.stacked-crooked.com/a/678061be1a3f9778)******查看并运行此代码***。这种方法的缺点是我无法访问其余的类成员，但可以将它们传入。
2.  **操纵 Enable If：**我还没有完全理解为什么您的 enable_if 解决方案不起作用，但这***[是我的](https://coliru.stacked-crooked.com/a/c1be2093b98ab9ac)***，它正在起作用。它使您可以部分地专注于课程本身。

PS 我想直接在此处添加代码，但存在一些格式问题。如果有人可以帮助我添加来自 Coliru 的格式化代码，那就太好了。

# php - 创建树枝过滤器时使用服务（在控制器之外）

> ID：10284499
> 
> 赞同：0
> 
> 时间：2012-04-23T16:31:10.663
> 
> 标签：php, service, symfony, twig

我的班级 MyTwigExtension 扩展了 \Twig_Extension，我在其中为树枝创建了过滤器。我想在实现新过滤器时使用服务。像这样的东西：

```
$canView = $this->get('security_service')
                ->hasClassPermission(
                        'MyBundle:MyEntity',
                        $this->get('security.context')->getToken()->getUser(), 
                        array(MaskBuilder::MASK_VIEW)
                 ); 
```

进入控制器这工作正常，但在它之外......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:38:56.087

[在这里](https://stackoverflow.com/a/6127711/697930)查看我在控制器外部的依赖注入给出的答案。

然后检查此[链接](http://symfony.com/doc/current/cookbook/templating/twig_extension.html#register-an-extension-as-a-service)以查看如何将您的注册`TwigExtension`为服务。

只是快速编辑，有时，当您`TwigExtension`作为服务执行时，您不能直接注入某些服务，因为它会导致`ScopeWideningException`. 如果您收到此异常，则可以添加`scope = request`到您的服务定义中。如果它仍然抛出异常，注入整个依赖容器并`$this->container->get('service.id.here')`检索你需要的服务。

希望能帮助到你。

问候，
马特

# java - Jaxb 解组：没有得到我的集合元素

> ID：10284502
> 
> 赞同：1
> 
> 时间：2012-04-23T16:31:23.320
> 
> 标签：java, xml, collections, jaxb, unmarshalling

我是 Jaxb 的新手，这是我第一次使用它。我有一个 xml，我希望将它翻译成我现有的对象。我成功地使用了简单的属性和元素，但是使用集合我得到了空集合。

我想用 xml 生成版权持有者实例。我创建了一个 http post 方法来发送 xml 并使用注释来解组它。为了生成 post 方法，我使用了一个名为 Poster 的 firefox 插件。来自 CopyrightHolder 的所有收藏都无法加载。（PS：Contracts 集合未映射）。对 post 方法的调用有效，创建了版权所有者，但所有集合为空。我想我在注释中遗漏了一些东西。

任何帮助表示赞赏。

课程：

版权所有者联系方式：

```
 @XmlRootElement(name="Contact", namespace="http://www.example.org/common")
 //@XmlType(name="Contact", namespace="http://www.example.org/common")
 public class CopyHolderContacts implements Contact, Serializable {

    private Long idContact;
    private CopyrightHolder copyrightHolder;
    private String name;
    private String email;
    private String office;
    private String work;
    private String mobile;
    private Boolean notify;

    public CopyHolderContacts() {
    }

    public CopyHolderContacts(CopyrightHolder copyrightHolder, String name, String email) {
        this.copyrightHolder = copyrightHolder;
        this.name = name;
        this.email = email;
    }

    public CopyHolderContacts( CopyrightHolder copyrightHolder, String name, String email, String office,
            String work, String mobile, Boolean notify ) {
        this.copyrightHolder = copyrightHolder;
        this.name = name;
        this.email = email;
        this.office = office;
        this.work = work;
        this.mobile = mobile;
        this.notify = notify;
    }

    @XmlTransient
    public Long getIdContact() {
        return this.idContact;
    }

    public void setIdContact( Long idContact ) {
        this.idContact = idContact;
    }

    @XmlTransient
    public CopyrightHolder getCopyrightHolder() {
        return this.copyrightHolder;
    }

    public void setCopyrightHolder(CopyrightHolder copyrightHolder) {
        this.copyrightHolder = copyrightHolder;
    }

    @XmlAttribute
    public String getName() {
        return this.name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @XmlAttribute
     public String getEmail() {
        return this.email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    @XmlAttribute(name="phoneOffice")
    public String getOffice() {
        return this.office;
    }

    public void setOffice(String office) {
        this.office = office;
    }

    @XmlAttribute(name="phoneWork")
    public String getWork() {
        return this.work;
    }

    public void setWork(String work) {
        this.work = work;
    }

    @XmlAttribute(name="phoneMobile")
    public String getMobile() {
        return this.mobile;
    }

    public void setMobile(String mobile) {
        this.mobile = mobile;
    }

    @XmlAttribute
    public Boolean getNotify() {
        return this.notify;
    }

    public void setNotify(Boolean notify) {
        this.notify = notify;
    }

   } 
```

版权所有者：

```
import static javax.persistence.GenerationType.SEQUENCE;

import java.io.Serializable;
import java.util.HashSet;
import java.util.List;
import java.util.Set;

import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.OneToMany;
import javax.persistence.SequenceGenerator;
import javax.persistence.Table;
import javax.persistence.Transient;
import javax.persistence.UniqueConstraint;
import javax.xml.bind.annotation.XmlAttribute;
import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlElementWrapper;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlSeeAlso;
import javax.xml.bind.annotation.XmlTransient;

import org.hibernate.annotations.Cascade;

@XmlRootElement(name="CopyrightHolder", namespace="http://www.example.org/copyrightholder")
@XmlSeeAlso(CopyHolderContacts.class)
@Entity
public class CopyrightHolder implements Serializable {

    private Long idCopyrightHolder;
    private String name;
    private String address;
    private String affiliation;
    private Set<CopyHolderDocuments> copyHolderDocuments = new HashSet<CopyHolderDocuments>( 0 );
    private Set<CopyHolderContacts> copyHolderContacts = new HashSet<CopyHolderContacts>( 0 );
    private Set<Contract> contracts = new HashSet<Contract>( 0 );
    private Set<CustomLicFieldValue> copyHolderCustomLicFieldValues = new HashSet<CustomLicFieldValue>( 0 );
    private List<XMLCustomField> customFields;

    public CopyrightHolder() {
    }

    public CopyrightHolder( String name, String address, String affiliation ) {
        this.name = name;
        this.address = address;
        this.affiliation = affiliation;
    }

    public CopyrightHolder( String name, String address, String affiliation,
            Set<CopyHolderDocuments> copyHolderDocuments, Set<CopyHolderContacts> copyHolderContacts,
            Set<Contract> contracts, Set<CustomLicFieldValue> customLicFieldValues ) {
        this.name = name;
        this.address = address;
        this.affiliation = affiliation;
        this.copyHolderDocuments = copyHolderDocuments;
        this.copyHolderContacts = copyHolderContacts;
        this.contracts = contracts;
        this.copyHolderCustomLicFieldValues = customLicFieldValues;
    }

    @XmlTransient
    public Long getIdCopyrightHolder() {
        return this.idCopyrightHolder;
    }

    public void setIdCopyrightHolder( Long idCopyrightholder ) {
        this.idCopyrightHolder = idCopyrightholder;
    }

    @XmlAttribute
    public String getName() {
        return this.name;
    }

    public void setName( String name ) {
        this.name = name;
    }

    @XmlElement(name="Address", namespace="http://www.example.org/copyrightholder")
    public String getAddress() {
        return this.address;
    }

    public void setAddress( String address ) {
        this.address = address;
    }

    @XmlAttribute    
    public String getAffiliation() {
        return this.affiliation;
    }

    public void setAffiliation( String affiliation ) {
        this.affiliation = affiliation;
    }

    @XmlElementWrapper(name="Documents")
    @XmlElement(name="Document")    
    public Set<CopyHolderDocuments> getCopyHolderDocuments() {
        return this.copyHolderDocuments;
    }

    public void setCopyHolderDocuments( Set<CopyHolderDocuments> copyHolderDocuments ) {
        this.copyHolderDocuments = copyHolderDocuments;
    }

    @XmlElementWrapper(name="Contacts", namespace="http://www.example.org/common")
    @javax.xml.bind.annotation.XmlElement(name="Contact", namespace="http://www.example.org/common")
    public Set<CopyHolderContacts> getCopyHolderContacts() {
        return this.copyHolderContacts;
    }

    public void setCopyHolderContacts( Set<CopyHolderContacts> copyHolderContacts ) {
        this.copyHolderContacts = copyHolderContacts;
    }

    @XmlTransient    
    public Set<Contract> getContracts() {
        return this.contracts;
    }

    public void setContracts( Set<Contract> contracts ) {
        this.contracts = contracts;
    }

    @XmlTransient
    public Set<CustomLicFieldValue> getCopyHolderCustomLicFieldValues() {
        return this.copyHolderCustomLicFieldValues;
    }

    public void setCopyHolderCustomLicFieldValues( Set<CustomLicFieldValue> customLicFieldValues ) {
        this.copyHolderCustomLicFieldValues = customLicFieldValues;
    }

    @Transient
    @XmlElementWrapper(name="custom-fields")
    @XmlElement(name="custom-field")
    public List<XMLCustomField> getCustomFields() {
        return customFields;
    }

    public void setCustomFields(List<XMLCustomField> customFields) {
        this.customFields = customFields;
    }

} 
```

我发送的 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<CopyrightHolder affiliation="ingest" name="ingest" xmlns="http://www.example.org/copyrightholder" xmlns:cm="http://www.example.org/common" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.example.org/copyrightholder copyrightholder2.xsd ">
  <Address>Address</Address>
  <Contacts>
    <cm:Contact email="ingest2@ingest.com" name="ingest" notify="true" phoneMobile="" phoneOffice="" phoneWork=""/>
  </Contacts>
  <Documents>
    <cm:FilePath>cm:FilePath</cm:FilePath>
  </Documents>
  <CustomFields>
    <cm:CustomField name="ingest" order="0" required="false" type="Alphanumeric" value=""/>
  </CustomFields>
</CopyrightHolder> 
```

Xsds:

common.xsd：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema targetNamespace="http://www.example.org/common" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:cm="http://www.example.org/common">
    <xsd:complexType name="contact">
        <xsd:sequence></xsd:sequence>

        <xsd:attribute name="name" use="required">
            <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:minLength value="1"></xsd:minLength>
                    <xsd:maxLength value="50"></xsd:maxLength>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:attribute>
        <xsd:attribute name="email" use="required">
            <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:pattern value="\w+@\w+"></xsd:pattern>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:attribute>
        <xsd:attribute name="phoneOffice" type="xsd:string" use="optional"></xsd:attribute>
        <xsd:attribute name="phoneWork" type="xsd:string" use="optional"></xsd:attribute>
        <xsd:attribute name="phoneMobile" type="xsd:string" use="optional"></xsd:attribute>
        <xsd:attribute name="notify" type="xsd:boolean" use="optional"></xsd:attribute>

    </xsd:complexType>

    <xsd:complexType name="documents">
        <xsd:sequence>
            <xsd:element name="FilePath" type="xsd:string" minOccurs="1" maxOccurs="unbounded">
            </xsd:element>
        </xsd:sequence>
    </xsd:complexType>

    <xsd:complexType name="custom-field">
        <xsd:sequence></xsd:sequence>
        <xsd:attribute name="name" use="required">
            <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:minLength value="1"></xsd:minLength>
                    <xsd:maxLength value="50"></xsd:maxLength>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:attribute>
        <xsd:attribute name="required" type="xsd:boolean" use="optional" default="false">
        </xsd:attribute>
        <xsd:attribute name="type" use="required">
            <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:enumeration value="Alphanumeric"></xsd:enumeration>
                    <xsd:enumeration value="Date"></xsd:enumeration>
                    <xsd:enumeration value="Number"></xsd:enumeration>
                    <xsd:enumeration value="Percentage"></xsd:enumeration>
                    <xsd:enumeration value="Text"></xsd:enumeration>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:attribute>
        <xsd:attribute name="order" type="xsd:int" use="optional"></xsd:attribute>
        <xsd:attribute name="value" type="xsd:string" use="required"></xsd:attribute>
    </xsd:complexType>

     <xsd:complexType name="contacts">
        <xsd:sequence>
            <xsd:element name="Contact" type="cm:contact" minOccurs="1" maxOccurs="unbounded"></xsd:element>
        </xsd:sequence>
    </xsd:complexType>

      <xsd:complexType name="custom-fields">
        <xsd:sequence>
            <xsd:element name="CustomField" minOccurs="1" maxOccurs="unbounded" type="cm:custom-field"></xsd:element>
        </xsd:sequence>
    </xsd:complexType>

</xsd:schema> 
```

版权所有者.xsd

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema targetNamespace="http://www.example.org/copyrightholder" elementFormDefault="qualified" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.example.org/copyrightholder" xmlns:cm="http://www.example.org/common">

    <xsd:import namespace="http://www.example.org/common" schemaLocation="common.xsd"></xsd:import>
    <xsd:complexType name="CopyrightHolder">
        <xsd:sequence>

            <xsd:element name="Address" type="xsd:string" minOccurs="1" maxOccurs="1"></xsd:element>
            <xsd:element name="Contacts" type="cm:contacts" minOccurs="0" maxOccurs="1">
            </xsd:element>
            <xsd:element name="Documents" type="cm:documents" minOccurs="0" maxOccurs="1">
            </xsd:element>
            <xsd:element name="CustomFields" type="cm:custom-fields" minOccurs="0" maxOccurs="1">
            </xsd:element>
        </xsd:sequence>

        <xsd:attribute name="name" use="required">
            <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:minLength value="1"></xsd:minLength>
                    <xsd:maxLength value="50"></xsd:maxLength>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:attribute>
        <xsd:attribute name="affiliation" use="required">
            <xsd:simpleType>
                <xsd:restriction base="xsd:string">
                    <xsd:minLength value="1"></xsd:minLength>
                    <xsd:maxLength value="50"></xsd:maxLength>
                </xsd:restriction>
            </xsd:simpleType>
        </xsd:attribute>
    </xsd:complexType>

    <xsd:element name="CopyrightHolder" type="CopyrightHolder"></xsd:element>
</xsd:schema> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:37:51.420

你的命名空间搞砸了。例如：

```
@XmlElementWrapper(name="Contacts", namespace="http://www.example.org/common")
@javax.xml.bind.annotation.XmlElement(name="Contact", namespace="http://www.example.org/common")
public Set<CopyHolderContacts> getCopyHolderContacts() {
    return this.copyHolderContacts;
} 
```

在您的 XML 文档中，`Contacts`包装元素具有`http://www.example.org/copyrightholder`名称空间。

尝试将其更改为

```
@XmlElementWrapper(name="Contacts", namespace="http://www.example.org/copyrightholder")
@XmlElement(name="Contact", namespace="http://www.example.org/common") 
```

对于其他系列也是如此。

# sitecore - 面向营销人员的 Sitecore 网络表单 - 一个表单，多个屏幕

> ID：10284503
> 
> 赞同：0
> 
> 时间：2012-04-23T16:31:24.250
> 
> 标签：sitecore, sitecore6, web-forms-for-marketers

在 WFFM 中拥有一个具有多个“屏幕”的表单是否可行？例如，在第一个“屏幕”中您输入一些信息并单击“下一步”，然后第二个“屏幕”要求您确认您在第一个屏幕中输入的信息，然后用户单击“提交”和操作（即保存到 DB）被执行。

谢谢，

FG

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T06:45:16.533

开箱即用不支持此类功能。每当我们遇到这样的情况时，我们倾向于使用标准的 .net 功能构建我们自己的自定义表单。我想这也是适合您的方法，因为您将对不同元素的行为有更多的控制权。WFFM 是一个很好的模块，但是对于您上面描述的特殊元素，您最好构建自己的自定义代码。

# android - startActivityForResult 启动退出应用程序的第二个活动

> ID：10284504
> 
> 赞同：0
> 
> 时间：2012-04-23T16:31:24.873
> 
> 标签：android, android-activity, activity-lifecycle

## 设想

活动 A（登录）启动活动 B 然后完成（）；

活动 B 调用 startActivityForResult(Activity C)

活动 C 运行良好，然后在选择电话号码后退出（应该如此）

-- 返回桌面（应用停止）！

为什么没有回到Activity B的onActivityResult()？

## 笔记

我在活动 B 上创建了正确的 onActivityResult()。

我已经搜索并阅读了有关 startActivityForResult 的 stackoverflow 上的每一条数据。

## 代码单

启动活动 B 的代码：

```
ComponentName   component   = new ComponentName("com.emobiletelecom", PokeTALK.class.getName());
    Intent          intent      = new Intent();
    intent.setComponent(component);
startActivity(intent);
    finish(); 
```

启动活动 C 的代码：

```
startActivityForResult(new Intent(this, ContactsPickerActivity.class), 2007); 
```

代码整理Activity C：

```
Intent intent = new Intent();
    intent.putExtra(KEY_PHONE_NUMBER, contactNumber); 

    setResult(RESULT_OK, intent);
    finish();
enter code here 
```

## 日志

```
04-23 16:32:27.382: I/ActivityManager(28158): START 

{cmp=com.emobiletelecom/com.codinguser.android.contactpicker.ContactsPickerActivity} from pid 30108
04-23 16:32:27.392: W/WindowManager(28158): Failure taking screenshot for (180x300) to layer 21010
04-23 16:32:27.432: V/PokeTALK(30108): onPause
04-23 16:32:27.642: I/WindowManager(28158): createSurface Window{415eefe8 com.emobiletelecom/com.codinguser.android.contactpicker.ContactsPickerActivity paused=false}: DRAW NOW PENDING
04-23 16:32:27.812: V/PhoneStatusBar(28212): setLightsOn(true)
04-23 16:32:28.042: I/ActivityManager(28158): Displayed com.emobiletelecom/com.codinguser.android.contactpicker.ContactsPickerActivity: +599ms
04-23 16:32:28.192: V/PT(30108): onStop - PokeTALK
04-23 16:33:00.292: D/dalvikvm(28212): GC_CONCURRENT freed 396K, 36% free 10580K/16391K, paused 14ms+8ms
04-23 16:33:24.102: D/dalvikvm(30108): GC_FOR_ALLOC freed 189K, 6% free 12032K/12679K, paused 52ms
04-23 16:33:24.122: I/dalvikvm-heap(30108): Grow heap (frag case) to 13.159MB for 1390096-byte allocation
04-23 16:33:24.232: D/dalvikvm(30108): GC_CONCURRENT freed 33K, 6% free 13355K/14087K, paused 4ms+4ms
04-23 16:33:24.341: D/dalvikvm(30108): GC_FOR_ALLOC freed 0K, 6% free 13356K/14087K, paused 34ms
04-23 16:33:24.351: I/dalvikvm-heap(30108): Grow heap (frag case) to 14.452MB for 1390096-byte allocation
04-23 16:33:24.522: D/dalvikvm(30108): GC_CONCURRENT freed <1K, 6% free 14713K/15495K, paused 18ms+5ms
04-23 16:33:27.342: W/WindowManager(28158): Failure taking screenshot for (180x300) to layer 21015
04-23 16:33:27.392: W/NetworkManagementSocketTagger(28158): setKernelCountSet(10005, 1) failed with errno -2
04-23 16:33:27.442: I/WindowManager(28158): createSurface Window{41614cd0 com.android.launcher/com.android.launcher2.Launcher paused=false}: DRAW NOW PENDING
04-23 16:33:27.532: W/InputManagerService(28158): Starting input on non-focused client com.android.internal.view.IInputMethodClient$Stub$Proxy@413fbdb0 (uid=10040 pid=30108)
04-23 16:33:28.292: W/NetworkManagementSocketTagger(28158): setKernelCountSet(10040, 0) failed with errno -2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:13:37.043

```
I call finish() on the following methods: onStop(), onKeyDown(back key clicked), finishFromChild() 
```

I believe `finishFromChild()` is where activity B is being accidentally closed. `finishFromChild()` is called when the child activity (C in this hypothetical) calls `finish()`. So this command might be the one closing activity B when you don't mean to.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:47:58.803

当您启动活动 C 时，您不应该在活动 B 中调用 finish()。活动 B 必须坚持以接收活动 C 的结果。

# perl - 在 Perl 中存储 1key - 3 值的最佳方法是什么？

> ID：10284508
> 
> 赞同：2
> 
> 时间：2012-04-23T16:31:39.710
> 
> 标签：perl, hash

我有一种情况，每个键都有 3 个不同的值。我必须像这样打印数据：

```
K1 V1 V2 V3
K2 V1 V2 V3
…
Kn V1 V2 V3
```

是否有任何替代的有效和更简单的方法来实现下面列出的其他方法？我正在考虑两种方法：

1.  为每个键维护 3 个不同值的 3 个哈希值。根据键迭代一个哈希并从其他 2 个哈希中获取值并打印它。

    ```
    哈希 1 - K1-->V1 ...
    哈希 2 - K1-->V2 ...
    哈希 3 - K1--> V3 ...
    ```

2.  使用键来维护单个哈希以引用值数组。在这里，我需要迭代并只读取 1 个哈希。

    ```
    K1 --> 参考{V1,V2,V3}
    ```

### 编辑1：

主要的挑战是，V1、V2、V3 的值是在不同的地方导出的，不能作为数组推到一起。因此，如果我将哈希值作为对数组的引用，则每次我想添加下一个值时都必须取消引用它。

例如，我在 subroutine1 - 我填充了 Hash1 -`K1-->[V1]` 我在 subroutine2 - 我必须取消引用`[V1]`，然后 push `V2`。所以现在哈希变成`K1-->[V1 V2]`,`V3`被添加到另一个例程中。`K1-->[V1 V2 V3]`

### 编辑2：

现在我面临另一个挑战。我必须根据`V3`. 用键和列表引用存储散列仍然可行吗？

`K1-->[V1 V2 V3]`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T17:23:29.293

这实际上取决于您想对数据做什么，尽管我无法想象您的选项 1 对任何事情都很方便。

如果您乐于使用索引 0、1、2引用您的`V1`, `V2`，或者如果您真的不想单独处理它们的值，请使用数组哈希。`V3`

```
my %data;
$data{K1}[0] = V1;
$data{K1}[1] = V2;
$data{K1}[2] = V3; 
```

或者，当然

```
$data{K1} = [V1, V2, V3]; 
```

作为一个附加选项，如果您的值意味着可命名的东西，您可以使用哈希哈希，所以

```
my %data;
$data{K1}{name} = V1;
$data{K1}{age} = V2;
$data{K1}{height} = V3; 
```

或者

```
$data{K1}{qw/ name age height /} = (V1, V2, V3); 
```

最后，如果您永远不需要访问单个值，则可以将它们保留在文件中，就像这样

```
my %data;
$data{K1} = "V1 V2 V3"; 
```

但正如我所说，内部存储主要取决于您希望如何访问数据，而您还没有告诉我们这一点。

* * *

**编辑**

既然你说

> 主要挑战是，V1、V2、V3 的值是在不同的地方导出的，不能作为数组推到一起

我认为散列的散列可能更合适，但我一点也不担心取消引用，因为就执行时间而言，它是一个微不足道的操作。但我不会使用`push`它，因为这会限制您以正确的顺序添加数据。

根据您的喜好，您可以选择

```
$data{K1}[2] = V3; 
```

或者

```
$data{K1}{height} = V3; 
```

显然后者更具可读性。

* * *

**编辑 2**

根据要求，要按第三个值（在我的示例中）对哈希值进行排序，`height`您可以编写

```
use strict;
use warnings;

my %data = (
  K1 => { name => 'ABC', age => 99, height => 64 },
  K2 => { name => 'DEF', age => 12, height => 32 },
  K3 => { name => 'GHI', age => 56, height => 9 },
);

for (sort { $data{$a}{height} <=> $data{$b}{height} } keys %data) {
  printf "%s => %s %s %s\n", $_, @{$data{$_}}{qw/ name age height / };
} 
```

或者，如果数据存储为数组的散列

```
use strict;
use warnings;

my %data = (
  K1 => [ 'ABC', 99, 64 ],
  K2 => [ 'DEF', 12, 32 ],
  K3 => [ 'GHI', 56, 9 ],
);

for (sort { $data{$a}[2] <=> $data{$b}[2] } keys %data) {
  printf "%s => %s %s %s\n", $_, @{$data{$_}};
} 
```

两个脚本的**输出**是相同的

```
K3 => GHI 56 9
K2 => DEF 12 32
K1 => ABC 99 64 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:48:20.803

第二种方法（每个键的一个数组引用）是：

1.  根据我的经验，更常见的是，
2.  更易于维护，因为您只有一个数据结构而不是三个浮动，并且
3.  更符合[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)：“每一条知识都必须在系统中具有单一的、明确的、权威的表示。” 代表一个键一次，而不是三次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T16:51:10.547

在可读性/可维护性方面，第二个似乎优于我。第一个的危险是您最终可能会在一个散列中出现键，但在其他散列中不存在。另外，如果我遇到第一种方法，我将不得不考虑一段时间，而第一种似乎“自然”（或更常见的习语，或更实用，或者其他意味着我会理解它的东西更容易）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T16:48:29.217

当然，最好只维护一种数据结构：

```
%data = ( K1=>[V1, V2, V3], ... ); 
```

您可以使用[Data::Dump](http://search.cpan.org/perldoc?Data%3a%3aDump)快速查看/调试数据结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T17:38:59.770

选择实际上取决于使用模式。具体来说，这取决于您使用的是过程程序还是面向对象的编程。

这是哲学上的差异，与是否使用语言级别的类和对象无关。程序性编程是围绕工作流程组织的；过程访问和转换它需要的任何数据。OOP 是围绕数据记录组织的；方法只访问和转换一个特定的记录。

第二种方法与面向对象编程密切相关。面向对象编程是迄今为止 Perl 中最常见的编程风格，因此第二种方法现在几乎是普遍首选的结构（尽管它需要更多内存）。

但是您的编辑暗示您可能正在使用更多的程序方法。正如您所发现的，第一种方法对于过程式编程更方便。当过程式编程流行时，它非常常用。

采用最适合您的代码组织的方式。

# javascript - 谷歌分析 Javascript ssl 版本

> ID：10284509
> 
> 赞同：0
> 
> 时间：2012-04-23T16:31:40.960
> 
> 标签：javascript, html, ssl, google-analytics, firebug

我刚刚在 Firebug 中注意到 ga.js 文件的 ssl 版本似乎比正常版本小。我想知道有人可以向我解释这一点。

如果它更小，为什么人们不使用 ssl 版本？

[https://ssl.google-analytics.com/ga.js](https://ssl.google-analytics.com/ga.js)

[https://google-analytics.com/ga.js](https://google-analytics.com/ga.js)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:37:49.650

md5 说它们是相同的：

```
$ curl https://ssl.google-analytics.com/ga.js | md5sum
e9403bf7353597ac42458d43d2017e24

$ curl http://google-analytics.com/ga.js | md5sum
e9403bf7353597ac42458d43d2017e24 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T14:29:34.427

HTTPS 需要初始握手：此往返可能很慢，并且传输的数据量不可忽略。

在 GA 情况下，ssl 握手从我的位置大约需要 110 毫秒，并且是 2594 字节。将近 18% 的脚本大小！

总之：HTTPS 请求/响应更大。

# c# - 将查询字符串值映射为路由中的控制器

> ID：10284512
> 
> 赞同：0
> 
> 时间：2012-04-23T16:31:52.453
> 
> 标签：c#, asp.net, asp.net-mvc

我的网站在首页以 30 多种语言显示用户提交的内容，我目前使用的路径如下：

```
http://www.example.com?lang=en 
```

或者如果它不是第一页

```
 http://www.example.com?lang=en&page=2 
```

但这确实对用户或 seo 不友好。mvc中有没有办法将这些值路由到类似的东西

```
 http://www.example.com/en 
```

和

```
 http://www.example.com/en/2 
```

在这种情况下，无需在中间添加新的操作`lang`：

`http://www.example.com/lang/en/2`

**更新。这是我从 Alexeis 的回答中得出的，以防有人需要同样的东西：**

如果只是语言：

```
 routes.MapRoute("MyLang", "{lang}", new { controller = "Home", action = "Index" },new { lang = @"\D{2}"}); 
```

如果您需要语言和可选页面：

```
 routes.MapRoute("MyLang", "{lang}/{page}", new { controller = "Home", action = "Index", page = UrlParameter.Optional }, new { lang = @"\D{2}", page = @"\d+"}); 
```

除非您的操作只有 2 个字母，否则它不应捕获任何其他路径。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:41:40.773

您不需要“lang/”来匹配文化。只要您以某种方式对路由进行排序，以便其他路由正确匹配，简单的“{lang}”就可以了。您还可以考虑对路由参数进行[约束](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs)以限制冲突的数量。

```
routes.MapRoute("MyLang", "{lang}",
     new { controller = "Home", action = "Home",  }

class HomeController{
  public ActionResult Home(string lang)
  {
    return View();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:46:23.043

你可以像这样添加一条新路线

```
routes.MapRoute("MyLang", "{action}/{page}",
     new { controller = "ControllerName",page=0 } 
```

这样，语言名称将自动映射到操作，并且页面将作为参数传递，前提是您的操作签名为

```
public ActionResult English(int page) 
```

obsly 可以更改返回类型和操作名称

# php - jquery append 上的 XML 标记语法无效

> ID：10284515
> 
> 赞同：0
> 
> 时间：2012-04-23T16:31:55.673
> 
> 标签：php, jquery

你能帮我解决这个问题吗：

```
class Custom_View_Helper_AddThis extends Zend_View_Helper_Abstract
{

    static $instances = 0;

    /**
     * @var Zend_View_Interface 
     */
    public $view;

    /**
     *  Return AddThis social sharin toolkit
     *  @param $url uri of page to share
     *  @param $title title of page
     *  @param $anews render social addthis at the end of the news
     *  @return void
     */
    public function addThis($url = null, $title = null, $anews = false) {
        $domain = 'http://' . $_SERVER['HTTP_HOST'] . '/';
        $link = $domain . $url;
        $html = <<<EOT
        <!-- AddThis Button BEGIN -->
        <div class="addthis_toolbox addthis_default_style" addthis:url="$link" addthis:title="$title">
        <a class="addthis_button_linkedin_counter"></a>
        </div>
        <!-- AddThis Button END -->
EOT;
        $html2 = sprintf('
        <div class="addthis_toolbox addthis_default_style" addthis:url="%s" addthis:title="%s">
        <a class="vl addthis_button_google_plusone" g:plusone:size="tall"></a>
        </div>', $link, $title);

        $tracking = "
        var addthis_config = {
            data_ga_property: 'UA-XXXXXXXX-X',
            data_ga_social: true
        };" . PHP_EOL;

        $src = "//s7.addthis.com/js/250/addthis_widget.js#pubid=xa-4f94ba586f83fcc8";
        self::$instances += 1;
        $mscript = $this->view->HeadScript();
        if (self::$instances == 1) {
            $mscript->appendScript($tracking);
            if ($anews) {
                $mscript->appendScript('
                $(document).ready(function(){
                  $("#social_link").append('. $html2 .');
                });
                ');
            }
            $mscript->appendFile($src);
        }
        return $html;
    }

    /**
     * Sets the view field 
     * @param $view Zend_View_Interface
     */
    public function setView(Zend_View_Interface $view) {
        $this->view = $view;
    }
} 
```

我想为一个将生成社交共享插件的 zend 项目创建一个视图助手。

我正确设置了第一个图标和链接，但是发送到 jQuery 函数的图标和链接不起作用，并且我在 firebug 控制台中得到了无效的 XML 标记语法。我一遍又一遍地尝试我所做的一切似乎都没有奏效。

这里生成的javascript

```
 $(document).ready(function(){
$("#social_link").html(
<div class="addthis_toolbox addthis_default_style" addthis:url="http://ayaou//news/bonjour-ayaou" addthis:title="Bonjour Ayaou">
<a class="vl addthis_button_tweet" tw:count="vertical"></a>
<a class="vl addthis_button_google_plusone" g:plusone:size="tall"></a>
<a class="addthis_button_facebook_like" fb:like:layout="button_count"
fb:like:action="recommend"></a>
<a class="addthis_button_facebook_send"></a>
</div>);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:28:01.300

好的，我将代码更改为简单且重复的 html 代码。

# ruby - Ruby 中的哈希值

> ID：10284522
> 
> 赞同：-1
> 
> 时间：2012-04-23T16:32:12.570
> 
> 标签：ruby, hash

我有一个问题要解决，有一个简单的超市程序，其中所有物品都被分类并存储在一个哈希值（键：产品 ID）中，该哈希值具有价格、制造商、到期等值。出于某种目的，我需要对物品进行分组根据价格。
我需要创建一个包含另一个散列（键控：产品 ID）的散列（键控：价格）。

代码如下：

```
new_Hash = Hash.new(Hash.new)
items = Hash.new
SuperMarket_hash.each { |Product_ID, info | new_Hash[info.PRICE].items[Product_ID] } 
```

我收到此代码的错误。（项目：NillClass 没有方法错误）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:37:42.617

[使用“在 Ruby 中动态创建多维散列](https://stackoverflow.com/questions/10253105/dynamically-creating-a-multi-dimensional-hash-in-ruby/10253359#10253359)”中所示的活跃散列

或使用[`group_by`](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-group_by).

# c++ - c ++定义不同命名空间的枚举

> ID：10284526
> 
> 赞同：2
> 
> 时间：2012-04-23T16:32:54.110
> 
> 标签：c++, enums, namespaces

我有以下头文件：

```
namespace First
{
    namespace Second
    {
        class Limit
        {
            public:
                enum Status
                {
                    GOOD,
                    BAD
                };
        }
    }
} 
```

由于它是专有的，我已经更改了名称，只留下了相关信息。

在我自己的班级里，我...

First::Second::Limit::Status limit_status = First::Second::Limit::Status::OK;

但我得到一个错误：错误：class First::Second::Limit::Status is not a class or namespace

我能够声明该枚举的变量，但不能将其设置为任何值。我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:37:37.447

```
First::Second::Limit::Status limit_status = First::Second::Limit::GOOD; 
```

你不需要那个`Status`位。把它想象成在里面定义了几个`const int`s `Limit`，你不会说`Limit::int::GOOD`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T16:39:47.280

如果您有 C++11，请使用`enum class`：

```
namespace First
{
    namespace Second
    {
        class Limit
        {
            public:
                enum class Status
                {
                    GOOD,
                    BAD
                };
        }
    }
} 
```

现在您可以`Status`用作范围。如果没有，您将不得不不包括该`Status::`部分。

# .net - 是否有类似于 Twitter 流 API 的 Facebook 流 API（除了实时 API）

> ID：10284531
> 
> 赞同：1
> 
> 时间：2012-04-23T16:33:09.653
> 
> 标签：.net, facebook, facebook-graph-api, real-time

**是否有类似于 Twitter 流 API 的 Facebook 流 API（除了实时 API）**

问题就在标题中。我想以与 Twitter API 类似的方式从 Facebook 获取实时用户交互...我想使用来自我的授权用户的 access_token 来完成此操作（例如，我不想使用 Javascript API） .

# mysql - Amazon EC2，mysql 中止启动，因为 InnoDB：mmap（x 字节）失败；错误号 12

> ID：10284532
> 
> 赞同：96
> 
> 时间：2012-04-23T16:33:16.637
> 
> 标签：mysql, amazon-ec2

我在 EC2 上有一个基于[此的](http://bogomip.net/blog/build-an-amazon-ec2-lamp-server/)**微型实例服务器**

mysql 服务器经常出现故障，并且第三次 mysql 服务器消失了。日志只显示

```
120423 09:13:38 mysqld_safe mysqld from pid file /var/run/mysqld/mysqld.pid ended
120423 09:14:27 mysqld_safe Starting mysqld daemon with databases from /var/lib/mysql
120423  9:14:27 [Note] Plugin 'FEDERATED' is disabled.
120423  9:14:27 InnoDB: The InnoDB memory heap is disabled
120423  9:14:27 InnoDB: Mutexes and rw_locks use GCC atomic builtins
120423  9:14:27 InnoDB: Compressed tables use zlib 1.2.3
120423  9:14:27 InnoDB: Using Linux native AIO
120423  9:14:27 InnoDB: Initializing buffer pool, size = 512.0M
InnoDB: mmap(549453824 bytes) failed; errno 12
120423  9:14:27 InnoDB: Completed initialization of buffer pool
120423  9:14:27 InnoDB: Fatal error: cannot allocate memory for the buffer pool
120423  9:14:27 [ERROR] Plugin 'InnoDB' init function returned error.
120423  9:14:27 [ERROR] Plugin 'InnoDB' registration as a STORAGE ENGINE failed.
120423  9:14:27 [ERROR] Unknown/unsupported storage engine: InnoDB
120423  9:14:27 [ERROR] Aborting 
```

什么是真的`failed; errno 12`？我怎么能提供更多的空间/内存或任何需要的东西来解决这个问题。

我每次都通过重新启动整个系统并删除所有日志并重新启动 mysql 服务器来解决此问题。但我知道我的配置有问题。

我的 `my.cnf' 也如下所示：

```
[mysqld]
# Settings user and group are ignored when systemd is used.
# If you need to run mysqld under different user or group,
# customize your systemd unit file for mysqld according to the
# instructions in http://fedoraproject.org/wiki/Systemd
# max_allowed_packet=500M
datadir=/var/lib/mysql
socket=/var/lib/mysql/mysql.sock
# Disabling symbolic-links is recommended to prevent assorted security risks
symbolic-links=0

innodb_buffer_pool_size         = 512M

[mysqld_safe]
log-error=/var/log/mysqld.log
pid-file=/var/run/mysqld/mysqld.pid 
```

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-12-22T03:26:22.620

当我尝试在没有 RDS 的微型实例上运行 wordpress 时遇到了同样的问题。

添加交换页面为我解决了这个问题。

您可以按照以下步骤设置交换空间。

如果它仍然不适合您，请考虑使用 RDS 服务。

================================================

我复制了博客的内容以作记录。归功于博客作者[pmoubed](https://stackoverflow.com/users/1341921/pmoubed)：

Amazon EC2 微实例交换空间 - Linux

我有一个 Amazon EC2 Linux Micro 实例。由于 Micro 实例只有 613MB 的内存，MySQL 时不时地崩溃。在对 MySQL、Micro Instance 和 Memory Managment 进行了长时间搜索后，我发现 Micro 实例没有默认的 SWAP 空间。所以如果你想避免崩溃，你可能需要为你的微实例设置一个交换空间。实际上，性能方面最好启用交换。

下面的步骤展示了如何为您的 Micro 实例创建交换空间。我假设您有一个正在运行 Micro 实例的 AWS 账户。

1.  跑`dd if=/dev/zero of=/swapfile bs=1M count=1024`
2.  跑`mkswap /swapfile`
3.  跑`swapon /swapfile`
4.  将此行添加`/swapfile swap swap defaults 0 0`到`/etc/fstab`

如果您想在每次重新启动后自动启用交换文件，则需要第 4 步。

一些与 SWAP 空间相关的有用命令：

```
$ swapon -s   
$ free -k

$ swapoff -a
$ swapon  -a 
```

参考：

1.  [http://www.thegeekstuff.com/2010/08/how-to-add-swap-space/](http://www.thegeekstuff.com/2010/08/how-to-add-swap-space/)
2.  [http://cloudstory.in/2012/02/getting-the-best-out-of-amazon-ec2-micro-instances/](http://cloudstory.in/2012/02/getting-the-best-out-of-amazon-ec2-micro-instances/)
3.  [http://cloudstory.in/2012/02/adding-swap-space-to-amazon-ec2-linux-micro-instance-to-increase-the-performance/](http://cloudstory.in/2012/02/adding-swap-space-to-amazon-ec2-linux-micro-instance-to-increase-the-performance/)
4.  [http://aws.amazon.com/ec2/instance-types/](http://aws.amazon.com/ec2/instance-types/)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-08-22T16:14:18.807

我在 Amazon EC2 微实例上也遇到了这个问题。我尝试通过添加以下内容来减少 inno_db 的内存使用量`/etc/my.cnf`

```
innodb_buffer_pool_size = 64M

```

那没有用，我尝试将其降低到16M，但它仍然没有用。然后我意识到该实例的可用内存基本上为零。所以我尝试重新启动apache

```
sudo 系统 httpd 重启
sudo 系统 mysqld 重启

```

一切正常。也许另一种解决方案是将apache配置为不以某种方式占用太多内存。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-24T22:30:01.270

看起来您正在为帖子中显示的 my.cfg 文件中的 innodb_buffer_pool_size请求**128M内存，但 MySQL 认为您正在请求****512M**内存：

> 初始化缓冲池，size = 512.0M

几行之后，错误消息告诉您 MySQL 将无法启动，因为它无法为 InnoDB 缓冲池保留足够的 (512M) 内存：

> 致命错误：无法为缓冲池分配内存

这就引出了三个问题：

1.  您的实例上有多少内存？是否应该有足够的内存来容纳 512M InnoDB 试图为缓冲池抓取，加上 MySQL 分配的所有其他内容，加上你的应用程序，加上操作系统？
2.  为什么 InnoDB 试图比你想象的要多？
3.  为什么MySQL无论如何都会重新启动？

你可以回答1。

至于 2.，有几个不同的地方可以定位 MySQL 选项文件。随后找到的文件会覆盖先前找到的文件中指定的选项。看

[http://dev.mysql.com/doc/refman/5.5/en/option-files.html](http://dev.mysql.com/doc/refman/5.5/en/option-files.html)

问题 3\. 可能是由于启动后某个时间发生的内存不足情况。如果是这种情况，您应该在日志中看到进一步的指示。

最后，但有点不相关的是，您是否使用 EBS 支持的实例？这通常强烈建议用于数据库服务器（实际上，对于任何情况，除非有特殊情况）。有关更多信息，请参阅

[https://stackoverflow.com/a/3630707/141172](https://stackoverflow.com/a/3630707/141172)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-30T01:09:51.903

对我来说，通过向我的 EC2 实例添加交换卷来纠正这个问题。我的服务只是消耗了盒子上的所有内存，并且会崩溃。多年来，我一直是 RedHat/CentOS 管理员，这不是我习惯的事情 - Anaconda 做了很多免费的 Ubuntu EC2 实例没有的工作。

我只是通过 Web 控制台创建了一个 2Gb 卷，将它附加到我的实例，然后执行“mkswap /dev/[whatever]”，编辑 /etc/fstab，然后崩溃停止了。

这些实例不像我们大多数人习惯的基于媒体的操作系统安装那样安装 - 它被剥离，没有包，没有适当的文件系统，以及像 AppArmor 这样的东西，如果你不知道它会导致各种问题和/或不知道如何配置它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-09-08T08:51:24.710

问题是服务器没有足够的内存来分配给 MySQL 进程。这个问题有几个解决方案。

(1) 增加物理内存。添加 1GB 的额外 RAM 将解决该问题。(2)分配SWAP空间。Digital Ocean VPS 实例默认未配置为使用交换空间。通过分配 512MB 的交换空间，我们能够解决这个问题。要为您的服务器添加交换空间，请按照以下步骤操作：

```
## As a root user, perform the following:
# dd if=/dev/zero of=/swap.dat bs=1024 count=512M
# mkswap /swap.dat
# swapon /swap.dat
## Edit the /etc/fstab, and the following entry.
/swap.dat      none    swap    sw      0       0 
```

减小 MySQL 缓冲池大小的大小

```
## Edit /etc/my.cnf, and add the following line under the [mysqld] heading.
[mysqld]
innodb_buffer_pool_size=64M
```

另请检查您的磁盘空间。确保您有足够的空间。

```
df-h
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-06-18T19:36:24.280

简单的答案：

```
* * * * * systemctl is-active --quiet mysqld || systemctl restart mysqld 
```

详细回答：

这是一个重要的问题，特别是对于使用非常小的 VPS（比如 1GB 或更少的 RAM）的人来说。如果 MySQL 退出，可能是您的服务器配置 (Apache | nginx) 或 MySQL 配置有问题。DOS 攻击可能会导致系统资源使用量激增（见图）。最终结果是 MySQL 进程被内核关闭。对于长期解决方案，应该着眼于优化您的 Apache 或 MySQL 配置。

[![系统资源峰值导致 RAM 峰值（就在下午 6 点之前）和系统资源峰值仅导致 CPU 峰值在星期二 18 午夜](../Images/466c3084c97553ddbccef638ec1d1147.png)](https://i.stack.imgur.com/BTU47.png)

Stack Overflow 上还有其他几个讨论这些主题以及 MySQL 手册和 Percona 博客：

MySQL 手册 - MySQL 如何使用内存：

[https://dev.mysql.com/doc/refman/8.0/en/memory-use.html](https://dev.mysql.com/doc/refman/8.0/en/memory-use.html)

Percona - 配置最佳 MySQL 内存使用的最佳实践：

[https://www.percona.com/blog/2016/05/03/best-practices-for-configuring-optimal-mysql-memory-usage/](https://www.percona.com/blog/2016/05/03/best-practices-for-configuring-optimal-mysql-memory-usage/)

如何使用 MySQLTuner 优化 MySQL 性能：

[https://www.linode.com/docs/databases/mysql/how-to-optimize-mysql-performance-using-mysqltuner/](https://www.linode.com/docs/databases/mysql/how-to-optimize-mysql-performance-using-mysqltuner/)

Apache 内存使用配置：

[https://serverfault.com/questions/254436/apache-memory-usage-optimization](https://serverfault.com/questions/254436/apache-memory-usage-optimization)

Apache 性能调优手册：

[https://httpd.apache.org/docs/2.4/misc/perf-tuning.html](https://httpd.apache.org/docs/2.4/misc/perf-tuning.html)

调整 Apache 服务器：

[https://www.linode.com/docs/web-servers/apache-tips-and-tricks/tuning-your-apache-server/](https://www.linode.com/docs/web-servers/apache-tips-and-tricks/tuning-your-apache-server/)

但是，关于您最初的问题，是的，您可以编写一个临时解决方案来检查 MySQL 服务是否已加载并处于活动状态，如果它未加载且处于活动状态，则将重新启动 MySQL。

你没有提到你使用的是什么操作系统。这将有助于给你一个特定的命令。我会给你一个 CentOS linux 的例子。
查看命令的以下输出`systemctl status mysql`。您可以在顶部看到该服务已**加载**并**处于活动状态**。

```
[root@centos-mysql-demo ~]# systemctl status mysqld
● mysqld.service - MySQL Server
   Loaded: loaded (/usr/lib/systemd/system/mysqld.service; enabled; vendor preset: disabled)
   Active: active (running) since Tue 2019-06-18 18:28:18 UTC; 924ms ago
     Docs: man:mysqld(8)
           http://dev.mysql.com/doc/refman/en/using-systemd.html
  Process: 3350 ExecStart=/usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pid $MYSQLD_OPTS (code=exited, status=0/SUCCESS)
  Process: 3273 ExecStartPre=/usr/bin/mysqld_pre_systemd (code=exited, status=0/SUCCESS)
 Main PID: 3353 (mysqld)
   CGroup: /system.slice/mysqld.service
           └─3353 /usr/sbin/mysqld --daemonize --pid-file=/var/run/mysqld/mysqld.pid

Jun 18 18:28:11 centos-mysql-demo systemd[1]: Starting MySQL Server...
Jun 18 18:28:18 centos-mysql-demo systemd[1]: Started MySQL Server. 
```

如果服务未加载，则使用如下命令：

```
systemctl status mysqld || systemctl restart mysqld 
```

将完成重新启动该过程的技巧。你**可以**cron ：

```
* * * * * systemctl status mysqld || systemctl restart mysqld 
```

但是，如果 mysql 已**加载**，但服务未**激活**，则您的 cron 将什么也不做。因此，您应该使用更详细的命令，例如：

`* * * * * systemctl is-active --quiet mysqld || systemctl restart mysqld`

在这种情况下，如果服务已**加载**但**处于非活动**状态，例如 DOS 攻击可以离开您的 mysql 服务的状态，该命令也会重新启动 mysql。使用该`--quiet`标志只是指定该命令仅返回状态代码，而不向屏幕输出任何内容。如果省略该`--quiet`标志，您将看到状态输出为`active`或`inactive`。

您还可以创建一些交换空间来为您的服务器添加更多可用的 RAM 资源，例如：

```
sudo dd if=/dev/zero of=/swapfile count=2096 bs=1MiB
chmod 600 /swapfile
mkswap /swapfile
swapon /swapfile
swapon --show
swapon --summary
free -h 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-19T05:18:14.513

使用以下任一解决方案：

1.  增加物理内存。添加 1GB 的额外 RAM 将解决该问题。

2.  使用以下配置更改分配 SWAP 空间：

**配置**

```
dd if=/dev/zero of=/extraswap bs=1024 count=512M
mkswap  /extraswap 
swapon  /extraswap 
## Edit the /etc/fstab, and the following entry.
/extraswap      none    swap    sw      0       0 
```

# javascript - 具有多个逗号分隔值的 return 语句

> ID：10284536
> 
> 赞同：104
> 
> 时间：2012-04-23T16:33:48.277
> 
> 标签：javascript

> **可能重复：**
> [Javascript 语法：逗号是什么意思？](https://stackoverflow.com/questions/3561043/javascript-syntax-what-comma-means)

这个模式返回了什么？它是如何工作的？

`return myfunc(), myobj.myvar = someobj.prop, myobj`

我以前没有遇到过这种模式，但一直在查看 Bing 地图 Ajax 控件并且多次注意到这种模式。

据我了解，不会返回多个值。那么这个模式有什么作用呢？返回什么？这种模式有什么好处？

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-04-23T16:36:28.480

这是[逗号运算符](http://es5.github.com/#x11.14)。它评估其左侧操作数，将结果丢弃，评估其右侧操作数，并将其作为其结果值。它是从左到右关联的，因此`a, b, c`计算`a`, then `b`, then `c`，并将结果`c`作为其值。

在您的示例中，它就像：

```
myfunc();
myobj.myvar = someobj.prop;
return myobj; 
```

~~有些人真的更喜欢在一条线上做事，即使没有客观理由。您给出的示例没有任何好处，实际上它令人困惑，因为它看起来像前两位与最终将返回的值相关，而事实并非如此。~~ *（在你告诉我们它是缩小代码之前，我写道；显然，人类不清楚只是源代码中的问题，而不是缩小代码。）*

既然你说它是一个缩小器：如果这是一个条件块的一部分，缩小器可能获得的**非常小的好处是：它可以保存一个或两个字符。**如果我们假设长格式如下所示：

```
if (someCondition) {
    myfunc();
    myobj.myvar = someobj.prop;
    return myobj;
} 
```

...使用逗号运算符，缩小器可以做到这一点（63 个字符）：

```
if(someCondition)return myfunc(),myobj.myvar=someobj.prop,myobj 
```

...而不是这个（65 个字符）：

```
if(someCondition){myfunc();myobj.myvar=someobj.prop;return myobj} 
```

...在不更改代码功能的情况下，**如果**后面是一个`}`或其他适当的字符（或文件结尾）以在末尾触发[自动分号插入。](http://es5.github.com/#x7.9)否则，它将需要`;`第一个字符，但这仍然可以节省一个字符。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-23T16:36:35.437

[逗号运算符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Special_Operators/Comma_Operator)评估（从左到右）表达式，然后返回最后一个结果，在这种情况下将是`myobj`标识符的评估。

如果这对你很重要，你可以这样做消除一些花括号......

```
if (true)
    ;// do something
else
    return myfunc(), myobj.myvar = someobj.prop, myobj 
```

……相对于……

```
if (true)
    ;// do something
else {
    myfunc();
    myobj.myvar = someobj.prop;
    return  myobj;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T16:37:40.847

在您的示例中，应该返回 myobj ，因为之前的每件事都被执行

```
myfunc();
myobj.myvar = someobj.prop;
return myobj; 
```

# magento - 过滤连接的列

> ID：10284537
> 
> 赞同：6
> 
> 时间：2012-04-23T16:33:48.343
> 
> 标签：magento

我正在管理员中创建一个股票报告并且到目前为止一切正常，除了我似乎无法过滤加入的列。

我已经加入了股票信息，用下面的来抢我的收藏。

```
$collection = Mage::getModel('catalog/product')->getCollection()
                ->addAttributeToSelect('name')
                ->addAttributeToSelect('sku')
                ->addAttributeToSelect('price')
                ->setStoreId($storeId);
$collection->addFieldToFilter('type_id', 'simple');

// Add on the stock qty information
$collection->getSelect()->join( array('stock'=>'ccmg_cataloginventory_stock_item'), 'e.entity_id = stock.item_id', array('stock.qty')); 
```

这导致它显示，但您无法过滤或排序列。我假设是因为选项没有被传递回连接。但是，可以对其他列进行排序和过滤，并将匹配的数据拉回并显示。

我一直在搜索，但大多数帖子都在 2008 年的 Magento 论坛上，我使用的是 1.6！任何指针都会很棒！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-08T08:55:08.527

加入后，需要将加入的字段加入到`_map`声明的数组中`Varien_Data_Collection_Db`，例如：

```
$this->_map['fields']['stock_qty'] = 'stock.qty'; 
```

**[编辑]**正如@sh4dydud3_88 所指出的，您可以这样做：

```
$collection->addFilterToMap('stock_qty', 'stock.qty'); 
```

这将添加字段*stock_qty*进行过滤。然后你可以过滤

```
$collection->addFieldToFilter('stock_qty', array('gt', 10)); 
```

另一个例子：

```
class Company_Mohe_Model_Resource_Im_Collection extends Mage_Core_Model_Resource_Db_Collection_Abstract
{
protected function _construct()
{
    $this->_init('mohe/im');
}  

public function joinIhe()
{
    $this->getSelect()->join(array('ihe' => $this->getTable('mohe/ihe')),
                                  'main_table.mic_inst_id = ihe.im_id',
                                  array('ihe_name'=>'name', 'ihe_ifms_id'=>'ifms_id')); 
    //$this->_map['fields'] = array('ihe_name'=>'ihe.name', 'ihe_ifms_id'=>'ihe.ifms_id'); //incorrect method
    $this->addFilterToMap('ihe_name', 'ihe.name'); //correct method, see comment by @sh4dydud3_88                           
    return $this;
} 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-18T09:56:46.297

加入后，只需使用 order 对结果进行排序

```
$collection->getSelect()
    ->join( array('stock'=>'ccmg_cataloginventory_stock_item'), 'e.entity_id = stock.item_id', array('stock.qty'))
    ->order('stock.qty ASC'); 
```

# php - Symfony2 应用程序是否有分离单元和功能测试的标准方法？

> ID：10284539
> 
> 赞同：3
> 
> 时间：2012-04-23T16:33:57.230
> 
> 标签：php, testing, symfony

我有一个带有单元和功能测试的 Symfony2 应用程序，我想知道是否有一种通常的做法来分离单元和功能测试，这样我就没有在运行测试套件时编译配置等的开销？单元测试套件不应依赖于数据库或特定配置的存在。我正在考虑采用一种命名模式来消除功能测试的歧义，或者以某种方式制作两个不同的测试套件，一个不包括捆绑中的 Tests/Controller 目录，另一个只包含该模式。

这是其他人都关心的问题吗？你有什么答案？有没有其他人同意我的看法，如果可能的话，Symfony2 应用程序中的单元和功能测试应该在理想情况下默认隔离？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:51:17.910

通常人们使用不同的工具进行单元和验收/功能测试：前者用于 PHPUnit，后者用于[Behat](http://behat.org/)。使用 Behat，您将在`Features`命名空间中进行测试并使用命令运行它们`app/console -e=test behat`，而 PHPUnit 使用`phpunit`命令。[`FOSCommentBundle`](https://github.com/FriendsOfSymfony/FOSCommentBundle)就是一个例子。

如果您不想为此使用 Behat，我看到有人建议将`Tests`命名空间用于单元测试，将`Test`命名空间用于功能测试。

# c# - 在 WCF 中命名泛型集合

> ID：10284544
> 
> 赞同：0
> 
> 时间：2012-04-23T16:34:05.123
> 
> 标签：c#, wcf, collections, named

我正在使用从自定义语言生成 WCF 服务的第三方框架。但是，当使用集合类时，这是生成的输出：

```
namespace MyNameSpace
{
    using System;
    using System.ServiceModel;

    [MessageContract]
    public class FindSomethingResponse
    {
        [MessageBodyMember(Order=1)]
        public System.Collections.Generic.List<SomethingDC> response;
    }
} 
```

这很好，但在使用服务时会导致一些不希望的结果。这是上面生成的 XSD：

```
<FindSomethingResponse>
    <ArrayOfSomethingDC>
        <SomethingDC/>
        <SomethingDC/>
        <SomethingDC/>
        ...
    </ArrayOfSomethingDC>
</FindSomethingResponse 
```

“组节点”称为 ArrayOfSomethingDC，但我宁愿将其称为更有意义的东西（例如“Somethings”）。

据我发现，我必须使用 CollectionDataContract 属性来命名节点。但是，我处于无法真正更改生成类的结构的位置（因为它是在第三方框架中完成的），但我只能编辑上述方法。

有没有可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:09:00.037

尝试如下

```
 namespace MyNameSpace
    {
        using System;
        using System.ServiceModel;

        [CollectionDataContract(Name = "Somethings", ItemName = "SomethingDC")]
        public class CustomList<T> : List<T>
        {
            public CustomList()
                : base()
            {
            }

            public CustomList(T[] items)
                : base()
            {
                foreach (T item in items)
                {
                    Add(item);
                }
            }
        }

        [MessageContract]
        public class FindSomethingResponse
        {
            [MessageBodyMember(Order = 1)]
            public CustomList<SomethingDC> response;
        }
    } 
```

# java - Facebook 刷新访问令牌：服务器返回 HTTP 响应代码：400

> ID：10284548
> 
> 赞同：1
> 
> 时间：2012-04-23T16:34:20.430
> 
> 标签：java, facebook, facebook-access-token

我正在尝试通过调用[此处详述的新 facebook 端点来自动刷新用户 OAuth2.0 access_token](http://developers.facebook.com/roadmap/offline-access-removal/)

我正在构建一个 Java (SEAM) Web 应用程序，facebook 身份验证是使用服务器端流程完成的

我不断收到响应代码 400，任何人都可以看到下面的代码有什么问题，因为我不确定我哪里出错了......

谢谢

```
public static String refreshFBAccessToken(String existingAccessToken)
        throws Exception{
    try {
        // Construct data
        String data = URLEncoder.encode("client_id", "UTF-8") + "=" + URLEncoder.encode(FacebookApp.appId, "UTF-8");
        data += "&" + URLEncoder.encode("client_secret", "UTF-8") + "=" + URLEncoder.encode(FacebookApp.appSecret, "UTF-8");
        data += "&" + URLEncoder.encode("grant_type", "UTF-8") + "=" + URLEncoder.encode("fb_exchange_token", "UTF-8");
        data += "&" + URLEncoder.encode("fb_exchange_token", "UTF-8") + "=" + URLEncoder.encode(existingAccessToken, "UTF-8");

        // Send data
        URL url = new URL("https://graph.facebook.com/oauth/access_token?");
        URLConnection connection = url.openConnection();
        connection.setDoOutput(true);
        OutputStreamWriter writer = new OutputStreamWriter(connection.getOutputStream());
        writer.write(data);
        writer.flush();

        HttpURLConnection httpConn = (HttpURLConnection)connection;
        InputStream is;
        if (httpConn.getResponseCode() >= 400) {
            is = httpConn.getInputStream();
            System.err.println("Input Stream..."+is.toString());
        } else {
            is = httpConn.getErrorStream();
            System.err.println("Error Stream..."+is.toString());
        }

        while((line = reader.readLine()) != null) {
            System.err.println("Response: "+line);
            builder.append(line);
        }
        return builder.toString();
    } catch (Exception e) {
        System.err.println(e);
    }
    return null;
} 
```

# cocoa - wget等效于可可

> ID：10284553
> 
> 赞同：-2
> 
> 时间：2012-04-23T16:34:37.657
> 
> 标签：cocoa, http, request, wget

我想从可可应用程序发送一个 http 请求，它会做与 wget [http://192.168.1.22:8000/toto/tata/0.1/titi/i386] 相同的事情。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:40:32.787

我认为你应该看看[`NSURLDownload`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLDownload_Class/Reference/Reference.html)类，你应该做类似的事情：

```
NSURL *url = [NSURL URLWithString:@"http://192.168.1.22:8000/toto/tata/0.1/titi/i386"];
NSURLRequest *request = [NSURLRequest requestWithUrl:url];
NSURLDownload *download = [[NSURLDownload] alloc] initWithRequest:request delegate:self];
[download setDestination:@"path" allowOverwrite:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T08:29:37.290

你想要 NSURLConnection 类，或者 NSURLDownload

# ios - 更改默认 iOS 滑块

> ID：10284554
> 
> 赞同：0
> 
> 时间：2012-04-23T16:34:40.350
> 
> 标签：ios, uislider

如何更改 iOS 中的默认滑块？

我的意思是使滑块更厚，旋钮更大。

甚至有可能还是我被迫创建一个自定义滑块？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:36:18.090

是的，iOS5 可以使用外观协议。或者直接操作UISlider。查看文档，有几种外观方法可以替换条和旋钮的图形。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:43:03.640

这些漂亮的组件也可能有帮助： [http ://cocoacontrols.com/search?utf8=%E2%9C%93&q=slider](http://cocoacontrols.com/search?utf8=%E2%9C%93&q=slider)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T20:24:18.010

jaydee3 完全正确：使用外观方法在应用程序范围内修改您的 UI 控件。

如果你想要一个关于自定义滑块外观的特定教程，包括如何为它们创建自己的图像，我在我公司的网站上写了这篇关于如何做到这一点的文章：

[http://www.fragmentlabs.com/blog/making-talking2trees-part-1-75](http://www.fragmentlabs.com/blog/making-talking2trees-part-1-75)

我也为此创建了一个[演示项目。](http://www.fragmentlabs.com/files/blogs/CustomSliderDemo_Part1.zip)检查 AppDelegate.m 以获取适用的代码。

# security - 为用户提供指向服务器上文件的符号临时链接

> ID：10284555
> 
> 赞同：0
> 
> 时间：2012-04-23T16:34:50.353
> 
> 标签：security, hyperlink, web, symlink

是否可以为用户提供指向服务器上文件的符号临时链接？

示例：我想将我的音乐专辑提供给用户。如果他付钱给我，我会即时生成一个临时符号链接到服务器端的实际链接并发送给他。这是一种常见的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:43:48.460

是的。这是非常普遍的做法。

这些类似于用于密码重置或密码恢复的 URL。

本质上是一个长的随机字符串，存储在您的数据库中，根据您的政策，有效期为 1 小时、1 天或 1 周。

在数据库中，随机字符串映射到用户、文件等。

如果 URL 被访问，则查找 db，更新访问时间，并传输文件。通过存储访问时间和传输成功状态，您甚至可以防止使用相同的 URL 多次下载。

如果您将 AWS 用于您的文件，您将在音乐专辑对象上使用 url_for，生成具有到期时间的 url，并将其提供给用户 - [http://docs.amazonwebservices.com/AWSRubySDK/latest/AWS/S3 /S3Object.html#url_for-instance_method](http://docs.amazonwebservices.com/AWSRubySDK/latest/AWS/S3/S3Object.html#url_for-instance_method)

# debugging - 如何在 Pycharm 中本地调试 Google App Engine Web 应用程序？

> ID：10284556
> 
> 赞同：2
> 
> 时间：2012-04-23T16:34:56.587
> 
> 标签：debugging, google-app-engine, web-applications, pycharm, webapp2

我正在学习这个要求我们使用谷歌应用引擎的[Udacity 课程。](http://www.udacity.com/overview/Course/cs253/CourseRev/apr2012)我使用 Pycharm 作为我的 python IDE。当我编辑 python 文件然后转到[http://localhost:portnumber](http://localhost:portnumber)时，我得到“服务器错误”。如何找出导致我的 python 文件中的错误的原因？我可以调试一个普通的本地 python 文件。但是，这是一个 Web 应用程序。我可以在本地调试它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:54:50.387

PyCharm 具有内置的[App Engine 支持](http://www.jetbrains.com/pycharm/webhelp/google-app-engine.html)，包括[调试](http://www.jetbrains.com/pycharm/webhelp/run-debug-configuration-app-engine-server.html)。

# c# - 如何阻止 Windows Explorer 和 Internet Explorer 自动重启？

> ID：10284558
> 
> 赞同：1
> 
> 时间：2012-04-23T16:35:08.163
> 
> 标签：c#, windows

我有一个程序，它需要访问 Windows Explorer 和 Internet Explorer 使用的一些文件。我发现的唯一方法是关闭资源管理器和 IE 进程 - 但 Proc.Kill() 和 RestartManager - RmShutdown() 只关闭它们一瞬间 - 然后它们重新启动。我找到了一种解决方法：我正在使用 cmd - taskkill /im - 但这真的很难看。有更好的方法来关闭它们吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T06:49:13.263

```
BOOL ExitExplorer()
{
    HWND hWndTray = FindWindow(_T("Shell_TrayWnd"), NULL);
    return PostMessage(hWndTray, 0x5B4, 0, 0);
} 
```

这是优雅退出 Explorer 的代码 :) 在 StackOveflow 上找到它。

# message - 需要 Message Broker 在少数（3 个或更多）应用程序之间进行数据同步

> ID：10284559
> 
> 赞同：0
> 
> 时间：2012-04-23T16:35:09.447
> 
> 标签：message, broadcast, messagebroker

我需要在几个（3 个和更多）应用程序之间发送（同步）数据。Message Broker 必须解决几个问题：

1.  向未知数量的接收者广播一条消息。
2.  控制成功红色。应用程序只能成功/读取消息一次或仅在分配给此应用程序（连接）的一段时间后。或者以某种方式在客户端解决它，而不会对服务器/MB造成高负载
3.  在所有接收者成功读取消息后删除消息。它可以在中央应用程序的客户端解决，但本机可能性将很有用。

只有一个应用程序必须知道整个系统中存在多少应用程序，否则它可以转移到 Message Broker 的职责。

我已经尝试过：Amazone SQS - 它是纯队列，没有任何高级工具。RabbitMQ - 不可能在不删除消息的情况下读取消息。（可能以其他方式存在）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-26T20:31:43.060

RabbitMQ 非常适合。

1.  消息发布到主题，并且此消息复制到所有连接/绑定的队列。必须首先创建和连接/绑定队列
2.  每个应用程序都使用自己的消息副本
3.  消息无需删除即可读取，只有在成功进程后才能删除。必须在没有 AMQP_AUTOACK 参数的情况下创建队列，并且指令 amqp.auto_ack 在 php.ini 中必须为 0

# android - Asynctask，传递变量和意图

> ID：10284560
> 
> 赞同：0
> 
> 时间：2012-04-23T16:35:13.443
> 
> 标签：android

我正在尝试在两个意图之间创建一个进度对话框。这是代码：

```
 public class DissertationActivity extends ListActivity {
/** Called when the activity is first created. */

public ArrayList<String> book_Array = new ArrayList<String>();
ArrayAdapter<String> adapter;

String href = "";
String href1 = "";
String search_Word = "";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    Bundle extras = getIntent().getExtras();
    search_Word = extras.getString("query1");

    adapter = new ArrayAdapter<String>(this, R.layout.list_item_1,
            book_Array);
    setListAdapter(adapter);

    new LoginProgressTask().execute();

}

class LoginProgressTask extends AsyncTask<String, Integer, String> {

    ProgressDialog pDialog = new ProgressDialog(DissertationActivity.this);

    protected void onPreExecute() {
        this.pDialog.setMessage("Progress start");
        this.pDialog.show();

    }

    @Override
    protected String doInBackground(String... params) {

        ListView lv = getListView();
        lv.setTextFilterEnabled(true);

        try {
            Document doc = null;
            Document guestLink = null;

            guestLink = Jsoup.connect("https://aulib.abdn.ac.uk:443/F")
                    .get();
            Element link = guestLink.select("p > a").first();
            href1 = link.attr("href");
            href = href1.substring(0, href1.length() - 2); // removes -0
                                                            // from
                                                            // the

            // href_Array.add(href); //adds href to the array because string
            // wont add to the public var.
            doc = Jsoup.connect(
                    href + "&request=" + search_Word
                            + "&find_code=WRD&adjacent=N&x=0&y=0").get();
            // System.out.println(doc);
            Elements headings = doc.select("td:eq(3)");
            // System.out.println(headings);
            for (Element heading : headings) {
                // System.out.println(heading.text());
                String j = heading.text();

                book_Array.add(j);

            }

        } catch (IOException e) {
            e.printStackTrace();

        }

        book_Array.remove(0);
        adapter.notifyDataSetChanged();
        book_Array.remove(1);
        adapter.notifyDataSetChanged();
        book_Array.remove(2);
        adapter.notifyDataSetChanged();
        book_Array.remove("Search");
        adapter.notifyDataSetChanged();
        book_Array.remove(" | ");
        adapter.notifyDataSetChanged();
        book_Array.remove(0);
        adapter.notifyDataSetChanged();

        lv.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> a, View v, int position,
                    long id) {
                // Context context = getApplicationContext();
                int query = position;
                // String text = book_Array.get(position);
                // int duration = Toast.LENGTH_SHORT;
                // Toast toast = Toast.makeText(context,
                // String.valueOf(position), //shows the postion in the
                // array
                // list
                // duration);
                // toast.show();

                Intent intent = new Intent(DissertationActivity.this,
                FullDetailsActivity.class);
        intent.putExtra("href", href);
        intent.putExtra("query1", (int) query);
        intent.putExtra("search_Word", search_Word);

        startActivity(intent);
            }

        });
        return null;
    }

    protected void onPostExecute(String...params) {

        pDialog.dismiss();

}
      }} 
```

runWorker(ThreadPoolExecutor.java:1088) 04-23 17:45:16.752: E/AndroidRuntime(2425): at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581) 04-23 17:45: 16.752: E/AndroidRuntime(2425): at java.lang.Thread.run(Thread.java:1019) 04-23 17:45:16.752: E/AndroidRuntime(2425): 引起：android.view.ViewRoot$CalledFromWrongThreadException ：只有创建视图层次结构的原始线程才能接触其视图。04-23 17:45:16.752: E/AndroidRuntime(2425): 在 android.view.ViewRoot.checkThread(ViewRoot.java:2941) 04-23 17:45:16.752: E/AndroidRuntime(2425): 在 android. view.ViewRoot.focusableViewAvailable(ViewRoot.java:1717) 04-23 17:45:16.752: E/AndroidRuntime(2425): 在 android.view.ViewGroup.focusableViewAvailable(ViewGroup.java:452) 04-23 17:45: 16.752：E/AndroidRuntime(2425)：在 android.view.ViewGroup。

进度条设法加载，但代码在几秒钟后崩溃。意图应该在哪里，在 doInBackground 中还是在 postExecute 中？如果意图是在 postExecte 中，我将如何将变量从 doInBackground 传递到 postExecute？

代码有什么问题以及需要更改什么以使其不再崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:51:09.240

你可以`UI`在更新`doInBackGround()`

看到您的日志跟踪，我可以告诉您您正在尝试更新 doInBackGround 中的 UI，您无法直接执行此操作，而是调用 runOnUiThread 方法，一切都会好起来的......使用

```
YourActivity.this.runOnUiThread(new Runnable() {                                            
public void run() {
 ListView lv = getListView();
 lv.setTextFilterEnabled(true);
 // do all UI related stuff in this
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:08:33.287

我的猜测是，您可能会因为线路而看到那些崩溃

```
adapter.notifyDataSetChanged(); 
```

尝试删除那些。还有一种方法叫做

```
protected void onProgressUpdate(Integer... progress) 
```

您可能希望使用此方法与主 UI 线程进行通信，了解您取得的任何进展。不确定这是否会有所帮助。但是，如果您必须进行更新，`doInBackground`您可能应该使用`runOnUiThread`

# reporting-services - 使用文件上传参数值

> ID：10284563
> 
> 赞同：1
> 
> 时间：2012-04-23T16:35:24.063
> 
> 标签：reporting-services, ssrs-2008

我的客户想要使用文件上传值列表，并希望报告根据上传的值显示结果。

是否可以将文件上传到 SSRS 并获取报告？

我的查询是这样的：

```
SELECT * FROM SCHEMA.TABLENAME 
WHERE COLUMN IN ('ONE', 'TWO', 'THREE', 'FOUR' /*, etc */ ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:44:48.293

您可以让数据源查询 xml 文件：确定包含的列，并根据结果设置参数值。然后可以根据参数排除或包含列或行。这为您提供了一个纯粹的 SSRS 解决方案。

但是，如果我是针对类似的要求进行设计，我会设置一个 SSIS 包来将文件导入数据库中的表中，然后在报告中编写 SQL 以过滤到适当的值。

报表的数据集需要有一组稳定的字段，因此您需要使用矩阵样式报表来改变列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:44:35.853

我不这么认为。

您可以做的是读取此文件并创建将原始 URL 与`&parameter1=value&parameter2=value`等连接的报告 URL，其中 parameter1 是您的参数和值的名称，值

最后您可以添加`&rc:parameters=False`，这样参数工具栏将不可见

# gwt - GWT：在客户端使用 DateTimeFormat，在服务器上使用 SimpleDateFormat

> ID：10284564
> 
> 赞同：20
> 
> 时间：2012-04-23T16:35:29.820
> 
> 标签：gwt

我有一个功能必须在客户端和服务器上以相同的方式工作，并且它格式化日期。

```
if (GWT.isClient())
{
  // Use DateTimeFormat
} else {
  // Use SimpleDateFormat
} 
```

GWT 抱怨：没有可用于 SimpleDateFormat 类型的源代码。该错误不是致命的（至少在开发模式下），但很烦人并且无法抑制它。[在http://groups.google.com/group/google-web-toolkit/browse_thread/thread/981247fca161c287](http://groups.google.com/group/google-web-toolkit/browse_thread/thread/981247fca161c287)上发现了一个类似的问题。他们建议：

> 您可以提供 SimpleDateTimeFormat 的虚拟超级源实现，以便编译。

我试过了。现在 Eclipse 抱怨：

> java.text 声明的包“java.text”与预期的包“foo.jre.java.text”不匹配 SimpleDateFormat.java

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-05-23T11:25:20.153

您可以`com.google.gwt.i18n.shared.DateTimeFormat`在服务器和客户端上使用：

调用受保护的构造函数来避免 GWT.create

```
String pattern = "yyyyMMdd"; /*your pattern here*/ 
DefaultDateTimeFormatInfo info = new DefaultDateTimeFormatInfo();
DateTimeFormat dtf = new DateTimeFormat(pattern, info) {};  // <= trick here 
```

例子

```
Date d = dtf.parse("20120301");
CalendarUtil.addDaysToDate(d, -1);
String s = dtf.format(d);
// s now contains "20120229" 
```

诀窍是通过扩展来完成的，`DateTimeFormat`因此我们可以`DateTimeFormatInfo`在使用的地方使用受保护的构造函数`new DefaultDateTimeFormatInfo()`来避免调用`GWT.create`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-01T16:41:22.887

这个解决方案有点不同，但与@ochakov 提出的路径相同，但它解决了@stepancheg 和我提到的 GWT 2.7 问题。

```
import java.util.Date;

import com.google.gwt.core.client.GWT;
import com.google.gwt.thirdparty.guava.common.annotations.GwtCompatible;
import com.google.gwt.thirdparty.guava.common.annotations.GwtIncompatible;

public abstract class DateTimeFormat {
    static DateTimeFormat getFormat(String pattern)
    {
        if (GWT.isClient())
            return new DateTimeFormatClient(pattern);
        else
            return new DateTimeFormatServer(pattern);
    }

    public abstract String format(Date date);

    public abstract Date parse(String dateString);

    @GwtCompatible
    private static class DateTimeFormatClient extends DateTimeFormat
    {
        protected String pattern;

        public DateTimeFormatClient(String pattern)
        {
            this.pattern = pattern;
        }

        public String format(Date date)
        {
            return com.google.gwt.i18n.client.DateTimeFormat.getFormat(pattern).format(date);
        }

        public Date parse(String stringDate){
            return com.google.gwt.i18n.client.DateTimeFormat.getFormat(pattern).parseStrict(stringDate);
        }
    }

    private static class DateTimeFormatServer extends DateTimeFormatClient
    {

        public DateTimeFormatServer(String pattern)
        {
            super(pattern);
        }

        @GwtIncompatible("Server format")
        public String format(Date date)
        {
            return (new java.text.SimpleDateFormat(pattern)).format(date);
        }  

        @GwtIncompatible("Server parse")
        public Date parse(String dateString){
            try{
                return (new java.text.SimpleDateFormat(pattern)).parse(dateString);
            }catch(Exception ex){
            throw new IllegalArgumentException("Cannot convert to date: "+ dateString);
            }
        }

    }
} 
```

希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-27T03:31:10.440

```
import com.google.gwt.i18n.shared.DateTimeFormat;
DateTimeFormat fm = DateTimeFormat.getFormat("MM/dd");
String st = fm.format(date); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T19:08:11.183

您必须告诉 Eclipse 不要编译您的超级源 Java 文件。如果您使用的是 Maven，只需将其移至 src/main/resources；否则，请从 Eclipse 的构建路径中排除您的“jre”*包。*

...话虽如此，我宁愿超级来源使用 SimpleDateFormat/DateTimeFormat 的类，和/或将其移动到您将超级来源的帮助类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-13T21:13:31.077

```
import java.util.Date;

import com.google.gwt.core.shared.GWT;
import com.google.gwt.thirdparty.guava.common.annotations.GwtCompatible;
import com.google.gwt.thirdparty.guava.common.annotations.GwtIncompatible;

public abstract class DateTimeFormat
{
    static DateTimeFormat getFormat(String pattern)
    {
        if (GWT.isClient())
            return DateTimeFormatClient.getFormat(pattern);
        else
            return DateTimeFormatServer.getFormat(pattern);
    }

    public abstract String format(Date date);

    @GwtCompatible
    private static class DateTimeFormatClient extends DateTimeFormat
    {
        private com.google.gwt.i18n.client.DateTimeFormat dateTimeFormat;

        protected DateTimeFormatClient(String pattern)
        {
            this.dateTimeFormat = com.google.gwt.i18n.client.DateTimeFormat.getFormat(pattern);
        }

        public static DateTimeFormat getFormat(String pattern)
        {
            return new DateTimeFormatClient(pattern);
        }

        public String format(Date date)
        {
            return dateTimeFormat.format(date);
        }
    }

    @GwtIncompatible("Server version of the class")
    private static class DateTimeFormatServer extends DateTimeFormat
    {
        private java.text.SimpleDateFormat dateTimeFormat;

        protected DateTimeFormatServer(String pattern)
        {
            this.dateTimeFormat = new java.text.SimpleDateFormat(pattern);
        }

        public static DateTimeFormat getFormat(String pattern)
        {
            return new DateTimeFormatServer(pattern);
        }

        public String format(Date date)
        {
            return dateTimeFormat.format(date);
        }       

    }
} 
```

# jquery - JQuery 选择器或鼠标悬停问题

> ID：10284566
> 
> 赞同：0
> 
> 时间：2012-04-23T16:35:35.913
> 
> 标签：jquery, html, css

我似乎看不到以下代码的问题，也许我失明了。

我们更改颜色的 javascript 行有效，但下一行没有我做错了什么？

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<div class="Generic">
    <div class="box">

        <div class="Corner">
        </div>

        <div class="headerText">
            <h1>text1</h1>
            <p>text3</p>
        </div>

        <div class="Content">
            <a href="https://www.mylink.com" title="Sign Up Now">Proceed</a>
        </div>

    </div>

    <p style="float:left; font-weight:bold; padding: 10px; padding-top:35px;">OR</p>

</div>

<script type="text/javascript">

    $("div.box").mouseover(function () {
        $("div.Generic div.Content a").css("color", "yellow");
        $("div.Generic div.Content .box").css("border", "1px solid black");
    });

</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:38:39.040

或者只是使用：

```
 $("div.box").mouseover(function () {
        $("div.Generic div.Content a").css("color", "yellow");
        $(this).css("border", "1px solid black");
    }); 
```

因为你已经选择了它

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T16:37:50.320

看起来你的选择器是向后的。尝试这样的事情：

```
$("div.Generic div.box div.Content").css("border", "1px solid black"); 
```

不过有更好的方法来做到这一点。试试这个：

```
$(function() {
    $(".box").mouseover(function() {
        $(this).find(".content").css("border", "1px solid black");
        $(this).find(".content a").css("color", "yellow");        
    });
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T16:39:57.997

.box 不在 div.Content 中，

所以它应该是：

`$("div.Generic .box").css("border", "1px solid black");`

不 ？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T16:43:24.367

您可以使用`hover`，您的选择器返回`undefined`：

[http://jsfiddle.net/Fny4X/](http://jsfiddle.net/Fny4X/)

# php - Asana API 在尝试更新 due_on 时返回 500 错误

> ID：10284569
> 
> 赞同：0
> 
> 时间：2012-04-23T16:36:12.177
> 
> 标签：php, api, rest, asana

我正在用 PHP 构建一个新应用程序，它允许我使用 CSV 模板来导入任务繁重的项目，其中包含到期日期和受托人。到目前为止，我已经设法让它适用于除了due_on 字段之外的所有内容。每当我在请求正文中包含 due_on 时，无论是在第一个 POST 请求中创建任务还是在后续 PUT 请求中更新任务，都会返回 500 错误。

*例如，在任务*更新时，我使用放置请求点击[https://api.asana.com/api/1.0/tasks/task-id](https://api.asana.com/api/1.0/tasks/)，并使用 Chrome 高级 REST 客户端传递以下请求正文：

 *```
{"data":{"due_on":"2012-06-01"}} 
```

这是返回的：

```
{"errors":[{"message":"Server Error","phrase":"12 small pandas eat briefly"}]} 
```

我的 put 请求的语法或我的日期格式中是否存在会导致这种情况的内容？直接通过 PHP 传递相同的值似乎也会导致问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:40:28.477

（我为 Asana 工作）

您并没有做错任何事——您似乎在 API 中发现了我们的单元测试未发现的错误。感谢您报告此事！我们已经推送了一个修复程序，所以它现在应该可以工作了。*

# c# - 获取在列表视图中单击的超链接的文本属性？

> ID：10284576
> 
> 赞同：1
> 
> 时间：2012-04-23T16:36:54.573
> 
> 标签：c#, asp.net, sql

项目列表（超链接）显示在由查询检索到的列表视图中。在点击时，它会重定向到另一个页面，我需要使用它的名称来获取该项目的数据，该名称是该项目的文本（超链接）。如何访问被点击项目的文本属性（名称）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:41:57.997

如果您确实单击了*重定向到另一个页面的**超链接*，则无法获取该信息。

 *唯一的方法是在查询字符串中包含您需要的信息，并在下一页上解析查询字符串。

但是，如果您将表单*发布*到另一个页面，并且您的超链接实际上是一个输入，则您的信息将在发布数据中可用。

如果您的超链接实际上是一个*服务器控件*，则有很多可能性。

查看一些代码可能会有所帮助。

好的，如果这是您的代码：

```
<td> 
    <asp:Hyperlink ID="NameLabel" runat="server" Text='<%# Eval("Name") %>' NavigateUrl="~/anotherpage.aspx"/> 
</td> 
```

您可以做几件事。首先，您可以将您的更改`asp:Hyperlink`为`asp:LinkButton`添加点击事件并删除该`NavigateUrl`属性：

```
<td> 
    <asp:LinkButton ID="NameLabel" runat="server" Text='<%# Eval("Name") %>' OnClick="NameLabel_Click"/> 
</td> 
```

现在，使用事件处理程序来执行您需要的操作：

```
 //Use querystring
    protected void NameLabel_Click(object sender, EventArgs e)
    {
        var link = sender as LinkButton;
        Response.Redirect(String.Format("anotherpage.aspx?name={0}", link.Text));
    }

    //Use session
    protected void NameLabel_Click(object sender, EventArgs e)
    {
        var link = sender as LinkButton;
        Session["name"] = link.Text;
        Response.Redirect("anotherpage.aspx?");
    } 
```

然后，`Page_Load`如果您的目标网页，您可以这样做：

```
//Session
var name = Session["name"];

//Querystring
var name = Request.QueryString["name"]; 
```*

# php - Socket_select：它会影响其输入，但具体如何？

> ID：10284578
> 
> 赞同：2
> 
> 时间：2012-04-23T16:36:59.690
> 
> 标签：php, sockets, netcat

[在此处](http://php.net/manual/ru/function.socket-select.php)列出的 php 文档中，有迹象表明该函数使用读取、错误和写入数组值作为参考，但我无法在任何地方找到这些值中实际更改的内容。

我写了一个我现在使用的简单“服务器”，我注意到当提到的函数无法看到轮询客户端上的任何数据时，它会更改数组并使其无法再次轮询。这是我的代码：

```
<php - all socket creation binding and listening above..
socket_set_nonblock($mysock);

$w = $e = array();
$clients = array($mysock);

do {
    $temp_client = @socket_accept($mysock);
    if ($temp_client != FALSE) 
        $clients[] = $temp_client;

    $clients_backup = $clients;

    $select_socket = socket_select($clients,$w,$e,0);
    if (($select_socket !== FALSE) AND ($select_socket != 0)) {
        foreach ($clients as $value) {
            $input = socket_read($value,1024,PHP_BINARY_READ);
            echo $input;
        }
    }
    $clients = $clients_backup;
} while(TRUE); 
```

在测试这个时，考虑到第一个连接没有被处理。我不知道为什么（非常感谢 elightment）这段代码是我正在开发的部分，并且它工作正常。两个代码中的 socket_select 问题保持不变。

基本上，如果我不备份客户端阵列，它就不起作用。出现错误：“没有资源数组被传递给 select”，因为在 socket_select 第一次检查没有要读取的数据的连接后，数组没有套接字资源。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T17:31:16.030

这些数组是套接字资源的数组。 `socket_select()`将通过从数组中删除任何尚未准备好分别读取、写入等的资源来修改数组。

您几乎总是希望将数组的*副本*传递给它，因为它们将被修改，并且您不想丢失对它们的原始引用：

```
$clients = [ ... ];
$r = $w = $e = $clients;

$numChanged = socket_select($r, $w, $e, ...);

// Here, $r, $w, and $e will only contain the resources that are ready for processing, which may be none at all 
```

# c - 如何在 C 中轻松获得正则表达式选择？

> ID：10284582
> 
> 赞同：4
> 
> 时间：2012-04-23T16:37:07.667
> 
> 标签：c, regex, unix, posix

我将**regex.h** ( *POSIX* ) 用于正则表达式。C中的正则表达式匹配是否有任何选择方法？

我可以很容易地检查正则表达式，但如果我需要检索匹配的值，我必须手动查找并存储它。

```
{{( )*(([[:alnum:]]+\\.)*)?[[:alnum:]]+( )*}} 
```

此正则表达式在双花括号中查找任何变量匹配。但我只需要字符串中最中心的项目。**如何在 C 中使用正则表达式检索值？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:58:49.860

您需要传入一组`regmatch_t`s ，正则表达式可以用匹配的索引填充。使用单个命令行参数（要测试的字符串）尝试以下程序。

一旦你有了匹配的索引，就应该很容易找出你想要的东西。（注意：`matches[0]`将是整个表达式的匹配项，因此子表达式从 开始`matches[1]`。）

```
#include <stdlib.h>
#include <stdio.h>
#include <regex.h>

int main(int argc, char* argv[])
{
    const char* pattern = "{{( )*(([[:alnum:]]+\\.)*)?[[:alnum:]]+( )*}}";
    regex_t rex;
    int rc;

    if ((rc = regcomp(&rex, pattern, REG_EXTENDED))) {
        fprintf(stderr, "error %d compiling regex\n", rc);
        /* retrieve error here with regerror */
        return -1;
    }

    regmatch_t* matches = malloc(sizeof(regex_t) * (rex.re_nsub + 1));

    if ((rc = regexec(&rex, argv[1], rex.re_nsub + 1, matches, 0))){
        printf("no match\n");
        /* error or no match */
    } else {
        for(int i = 0; i < rex.re_nsub; ++i) {
            printf("match %d from index %d to %d: ", i, matches[i].rm_so,
                   matches[i].rm_eo);
            for(int j = matches[i].rm_so; j < matches[i].rm_eo; ++j) {
                printf("%c", argv[1][j]);
            }
            printf("\n");
        }
    }

    free(matches);
    regfree(&rex);

    return 0;
} 
```

# fitnesse - Fitnesse 获得内表值

> ID：10284583
> 
> 赞同：0
> 
> 时间：2012-04-23T16:37:09.847
> 
> 标签：fitnesse

这是一个对你来说很有趣的。

所以我有一个这样的表来检查 JSON 响应中的内容。

```
!define innerTable (
|name|whatever|
|email|whatever2|
|hpeon|whatever3|
)

|Check if correct values are returned|
|property name|value is?|
|catalogId|1002|
|productName|Name of the product|
|productStatus|ACTIVE|
|productType|Whatever|
|contactInformation|${prizeTiers}| 
```

那么我到底如何从contactInformation中获取信息呢？:)

由于值正在发生变化......并且contactInformation是JSON中的一个值，而不是某个方法名称......有什么想法吗？

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:15:21.517

如果您使用 fitSharp 或 FitLibrary，则使用嵌入式表格来匹配集合。例如[http://fitsharp.github.com/Fit/CompareList.html](http://fitsharp.github.com/Fit/CompareList.html)

糟糕，没有注意到您说contactInformation 是JSON 格式的。因此，您必须编写一个方法来返回对象集合。fitSharp 或 FitLibrary 会有所不同。

更新：固定链接

# java - 使用嵌入式 Jetty 提供静态文件

> ID：10284584
> 
> 赞同：57
> 
> 时间：2012-04-23T16:37:11.453
> 
> 标签：java, jetty, embedded-jetty

我正在尝试使用嵌入式 Jetty 构建一个简单的演示应用程序，该应用程序从“html”目录提供静态文件，该目录是当前工作目录的子目录。这个想法是带有演示 jar 和内容的目录可以移动到新位置并且仍然可以工作。

我尝试了以下变体，但我不断收到 404。

```
ServletContextHandler context = 
                       new ServletContextHandler(ServletContextHandler.SESSIONS);
context.setContextPath("/");

context.getInitParams().put(
                       "org.eclipse.jetty.servlet.Default.resourceBase", "html");
context.addServlet(new ServletHolder(new DefaultServlet()), "/html");

Server jetty = new Server(8080);
jetty.setHandler(context);

jetty.start(); 
```

**更新：**这是 Jetty 教程中记录的解决方案。如正确答案中所述，它使用 a`ResourceHandler`而不是 a `ServletContextHandler`：

```
 Server server = new Server();
    SelectChannelConnector connector = new SelectChannelConnector();
    connector.setPort(8080);
    server.addConnector(connector);

    ResourceHandler resource_handler = new ResourceHandler();
    resource_handler.setDirectoriesListed(true);
    resource_handler.setWelcomeFiles(new String[]{ "index.html" });

    resource_handler.setResourceBase(".");

    HandlerList handlers = new HandlerList();
    handlers.setHandlers(new Handler[] { resource_handler, new DefaultHandler() });
    server.setHandler(handlers);

    server.start();
    server.join(); 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-23T18:53:57.120

使用 a[`ResourceHandler`](https://www.eclipse.org/jetty/javadoc/9.4.7.v20170914/org/eclipse/jetty/server/handler/ResourceHandler.html)而不是[`ServletContextHandler`](https://www.eclipse.org/jetty/javadoc/9.4.7.v20170914/org/eclipse/jetty/servlet/ServletContextHandler.html).

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-10-26T10:10:36.560

`ResourceHandler`使用 a和使用 a `DefaultServlet`(with a `ServletContextHandler`)提供静态内容之间有一个重要的区别。

当一个`ResourceHandler`（或`HandlerList`持有多个`ResourceHandler`实例）被设置为上下文处理程序时，它直接处理请求并忽略任何已注册的 javax.servlet.Filter 实例。

如果您需要过滤器，唯一的方法是使用 a `ServletContextHandler`，向其中添加过滤器，然后添加 a `DefaultServlet`，最后设置 base `Resource`。

base`Resource`代表一个`ResourceHandler`将被初始化的 resourceBase 路径。如果从多个目录提供静态资源，请使用 a `ResourceCollection`（仍然是 a `Resource`）并使用 resourceBase 字符串数组对其进行初始化：

```
ResourceCollection resourceCollection = new ResourceCollection();
resourceCollection.setResources(getArrayOfResourceBaseDirs()); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2015-02-26T05:29:57.267

在我的小型网络服务器中，我有两个文件，一个`index.html`和一个`info.js`位于下的文件，`/src/webapp`我希望它们从嵌入式码头网络服务器提供服务。

这就是我解决静态内容问题的方法。

```
Server server = new Server(8080);

ServletContextHandler ctx = new ServletContextHandler();
ctx.setContextPath("/");

DefaultServlet defaultServlet = new DefaultServlet();
ServletHolder holderPwd = new ServletHolder("default", defaultServlet);
holderPwd.setInitParameter("resourceBase", "./src/webapp/");

ctx.addServlet(holderPwd, "/*");
ctx.addServlet(InfoServiceSocketServlet.class, "/info");

server.setHandler(ctx); 
```

像魅力一样工作！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-12-15T05:51:20.867

我设法通过在 web.xml 中添加“css”目录的映射来实现类似的效果。明确告诉它使用 DefaultServlet：

```
<servlet>
  <servlet-name>DefaultServlet</servlet-name>
  <servlet-class>org.eclipse.jetty.servlet.DefaultServlet</servlet-class>
</servlet>

<servlet-mapping>
  <servlet-name>DefaultServlet</servlet-name>
  <url-pattern>/css/*</url-pattern>
</servlet-mapping> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-04-18T15:20:22.263

这是`Main.java`文件：

```
import org.eclipse.jetty.server.Handler;
import org.eclipse.jetty.server.Server;
import org.eclipse.jetty.server.handler.DefaultHandler;
import org.eclipse.jetty.server.handler.HandlerList;
import org.eclipse.jetty.server.handler.ResourceHandler;

public class Main
{
    public static void main(String[] args) throws Exception
    {
        Server server = new Server(8080);
        ResourceHandler resource_handler = new ResourceHandler();
        resource_handler.setResourceBase("C:/Users/serge.klimkovitch/Documents/images");
        HandlerList handlers = new HandlerList();
        handlers.setHandlers(new Handler[] { resource_handler, new DefaultHandler() });
        server.setHandler(handlers);
        server.start();
        server.join();
    }
} 
```

======================================

这是`gradle.build`文件：

```
apply plugin: 'java'
apply plugin: 'application'

mainClassName = 'SheetsQuickstart'
sourceCompatibility = 1.7
targetCompatibility = 1.7
version = '1.0'

repositories {
    mavenCentral()
}

dependencies {
compile group: 'org.eclipse.jetty', name: 'jetty-server', version: '9.4.16.v20190411'

}

jar {
  manifest {
    attributes(
      'Main-Class': 'SheetsQuickstart'
    )
  }
  from {
    configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
  }
} 
```

======================================

假设存在以下文件：`C:\Users\serge.klimkovitch\Documents\images\image.html`

然后，在 Eclipse 中运行，并`http://localhost:8080/image.html`在浏览器中查看正在提供的文件。

# c# - Firefox WebDriver (Selenium) 和安全警告弹出窗口

> ID：10284586
> 
> 赞同：3
> 
> 时间：2012-04-23T16:37:23.107
> 
> 标签：c#, firefox, selenium, webdriver

我正在使用 c#、nUnit、Selenium WebDriver 和 Firefox 进行一些自动化测试。

我遇到了安全警告弹出窗口的问题：尽管此页面已加密，但您输入的信息将通过未加密的连接发送，并且很容易被第三方读取。

我想在 Firefox 中禁用它，这样我的测试就不会受到阻碍。

我在互联网上看到关于这是否可能的相互矛盾的报道。我尝试使用 about:config 更改 Firefox 安全警告设置，但我仍然无法摆脱弹出窗口（使用 WebDriver 或手动使用 Firefox 时仍会显示弹出窗口）。

对此的任何解决方案将不胜感激，因为我已经为此失去了超过 2 个小时的生命。

阻止弹出窗口发生或从 WebDriver 自动关闭它的解决方案同样好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T00:09:57.997

我遇到了这个问题而没有任何机会绕过它：它是显示此警告消息的内置 Firefox 安全功能，并且无法通过配置标志绕过它 - 这就是您不断手动或通过 WebDriver 获取消息的原因，它不会提供通过单击警报框来绕过机制。

如果您想摆脱这个错误消息，如果 Firefox 不是您的实施所需的浏览器，请考虑将您的 WebDriver 自动浏览器切换到 Google Chrome。Chrome 不会通过阻止消息来打扰您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:09:24.303

我想您是否尝试过取消选中所有这些？ ![在此处输入图像描述](../Images/daed3bda021dda72bc3a93b53aab8a50.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:45:49.547

听起来页面是通过 https 获取的，但是是通过 http 发回的？或者页面上是否存在通过 http 获取的不安全资产？

# parsing - Windows Phone 邮政客户端

> ID：10284590
> 
> 赞同：0
> 
> 时间：2012-04-23T16:37:36.277
> 
> 标签：parsing, windows-phone-7, post, login, webrequest

如果我想通过 URL 登录（不仅是登录）网站，如何将这个 (http://postclient.codeplex.com/) dll 库用于我的 Windows Phone 项目。

示例：登录地址为：http: [//xchat.centrum.cz/~guest~/login/index.php ?name=nickname&pass=password](http://xchat.centrum.cz/~guest~/login/index.php?name=nickname&pass=password)

在那之后，我想解析 HTML，如果我有来自 url 的哈希 - 但这是一个很长的故事。:)

感谢帮助。:)

编辑：

我发现了类似的东西：

```
 private void Button1Clk(object sender, RoutedEventArgs e)
   {
            string strName = "nickname";
            string strPass = "password";

            UTF8Encoding encoding=new UTF8Encoding();
            string postData="name="+strName;
            postData += ("&pass="+strPass);
            byte[]  data = encoding.GetBytes(postData);

            // Prepare web request...
            HttpWebRequest myRequest =
            (HttpWebRequest)WebRequest.Create("http://xchat.centrum.cz");
            myRequest.Method = "POST";
            myRequest.ContentType = "application/x-www-form-urlencoded";

            Stream newStream = myRequest.GetResponse();
            // Send the data.
            newStream.Write(data,0,data.Length);
            newStream.Close();
    } 
```

但是脚本与 GetResponse() 有错误；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T08:12:03.080

看来您不需要 POST-Client，因为您的 Example-Login 可与 GET 一起使用。只需使用 HttpWebRequest 加载站点，您就可以轻松解析 HTML。

这是一个非常好的示例（在答案中）：[Retrieve XML from https using WebClient/HttpWebRequest - WP7](https://stackoverflow.com/questions/3457894/retrieve-xml-from-https-using-webclient-httpwebrequest-wp7)

只需使用 Url ( [http://xchat.centrum.cz/~guest~/login/index.php?name=nickname&pass=password](http://xchat.centrum.cz/~guest~/login/index.php?name=nickname&pass=password) ) 来解析您想要的 HTML 响应。

# php - PHPUnit 代码覆盖率

> ID：10284592
> 
> 赞同：13
> 
> 时间：2012-04-23T16:37:40.673
> 
> 标签：php, zend-framework, phpunit, code-coverage

我正在学习单元测试`Zend Framework`应用程序的技巧。到目前为止，我已经开始`PHPUnit`使用`Zend Framework`并开始编写一些简单的测试用例。

我的问题是我想知道为什么`Code Coverage`尽管在我的`phpunit.xml`.

我没有收到任何错误，但没有生成覆盖率报告。

但是当我跑步时它会起作用`phpunit --coverage <dir>`

我的 phpunit 的日志记录部分如下：

```
<phpunit bootstrap="./application/bootstrap.php" colors="true">
        <testsuite name="CI Test Suite">
            <directory>./</directory>
        </testsuite>
        <testsuite name="Library Test Suite">
            <directory>./library</directory>
        </testsuite>

        <filter>
            <whitelist>
                <directory suffix=".php">../application/</directory>
                <exclude>
                    <directory suffix=".phtml">../application</directory>
                    <file>../application/Bootstrap.php</file>
                    <file>../application/controllers/ErrorController.php</file>
                </exclude>
            </whitelist>
           <logging>
               <log type="coverage-html" target="./log/report" charset="UTF-8" yui="true"
   highlight="true" lowUpperBound="50" highLowerBound="80" />
               <log type="testdox" target="./log/testdox.html" />    
           </logging>
        </filter>
    </phpunit> 
```

有人遇到过这种情况吗？那么可能的问题是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-23T18:42:02.053

这是我的一个项目的 phpunit.xml，它工作正常。如您所见，日志记录部分位于过滤器部分之外，因此这可能是您的问题，正如 Mark Ba​​ker 所评论的那样。我选择了这个，因为它来自一个小项目，而且非常简单。

```
<phpunit bootstrap="./bootstrap.php" colors="false">
    <testsuite name="HSSTests">
        <directory>./</directory>
    </testsuite>

    <filter>
        <whitelist>
            <directory suffix=".php">d:/wamp/app_hss/</directory>
            <exclude>
                <directory suffix=".phtml">d:/wamp/app_hss/</directory>
                <directory suffix=".php">d:/wamp/app_hss/tests/</directory>
            </exclude>
        </whitelist>
    </filter>

    <logging>
        <log type="coverage-html" target="./log/codeCoverage" charset="UTF-8"
            yui="true" highlight="true"
            lowUpperBound="50" highLowerBound="80"/>
        <log type="testdox-html" target="./log/testdox.html" />
    </logging>
</phpunit> 
```

您可能需要的所有信息都在[PHPunit 手册](http://www.phpunit.de/manual/3.6/en/appendixes.configuration.html)中。

# jquery - 从一个类的一个实例中获取子元素的数量

> ID：10284597
> 
> 赞同：3
> 
> 时间：2012-04-23T16:37:55.547
> 
> 标签：jquery, tumblr

我正在自定义一个 tumblr 博客，我想根据照片集中存在的照片数量应用某些样式和规则。当每个帖子具有相同的类时，我不确定如何计算每个帖子中存在的子元素的数量。如果这是 tumblr 生成的那种代码：

```
<div class="photoset">
     <img />
     <img />
</div>

<div class="photoset">
     <img />
     <img />
     <img />
</div> 
```

如何让 jQuery 返回第一个和第二个实例（即 2 和 3）中的元素数？

我尝试过使用`$('.photoset img').length();`，这给了我所有元素的总数（在这种情况下为 5）。

任何帮助将不胜感激！

干杯，斯科特

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T16:40:00.290

您可以循环浏览每个照片集项目并分别计算其图像，然后在代码中使用该信息执行任何您想要的操作：

```
$(".photoset").each(function(index, elem) {
    var numImages = $(this).find("img").length;
    // do whatever processing you wanted to with numImages here
}); 
```

如果你想把这些计数放在一个数组中，你可以这样做：

```
var imgCountArray = $(".photoset").map(function() {
    return($(this).find("img").length)
}).get(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T16:40:07.737

试试下面，

```
var imgCounts = [];

$('.photoset').each (function () {
  imgCounts.push($(this).find('img').length);
}); 
```

现在，

```
imgCounts[0] = 2 //first divs img count
imgCounts[1] = 3 //second divs img count 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T16:41:03.963

有几种方法可以解决这个问题。

首先，您可以使用`.each()`循环遍历每个`.photoset`：

```
$('.photoset').each( function() {
   var num = $(this).find('img').length;
   // Do something based on num
}); 
```

或者，使用`.eq()`or`:eq()`选择某个：

`var num = $('.photoset:eq(1) img').length;`

`var num = $('.photoset').eq(1).find('img').length;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T16:43:37.163

你可以使用：

```
$(".photoset").each(function(i, photoset) {
  photoset = $(photoset); 
  var numImages = photoset.children().length;
  // or var numImages = photoset.find("img").length; for only images

  if (numImages === 2) {
    // your code
  }
  if (numImages === 3) {
    // your code
  }

  // or just comparing whether greater or lower
  if (numImages > 2) {
    // your code
  }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T16:40:43.680

```
$('.photoset:first img').length 
```

和

```
$('.photoset:last img').length 
```

# ruby-on-rails - CanCan：如何使用条件内连接检索记录？

> ID：10284600
> 
> 赞同：1
> 
> 时间：2012-04-23T16:38:06.100
> 
> 标签：ruby-on-rails, inner-join, cancan

我想根据两组条件之一获取记录。如果用户是网络成员，则用户可以读取公共时间记录（私有 == false）。如果用户是网络成员并且他们是 Time 的参与者，则用户可以读取私有 Time 记录（private == true）。我尝试了以下方法，但内部连接阻止了 ORing 条件：

```
can :read, Time, network: {memberships: {user_id: current_user.id}}, private: false
can :read, Time, network: {memberships: {user_id: current_user.id}}, private: true, participants: {id: current_user.id} 
```

我需要做的另一件事是缩小当前网络返回的记录，但我看不到让嵌套的能力定义起作用。有什么建议么？

# javascript - 两个不同 Rails 资产的单个 javascript 文件依赖项

> ID：10284601
> 
> 赞同：1
> 
> 时间：2012-04-23T16:38:07.353
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3

我有一个 application.js 资产和一个 editor.js 资产。它们都具有 jquery.batchImageLoad.js 库的依赖关系。

application.js 在整个网站都可用，但 editor.js 仅在某些页面上可用，但它们有时会相遇。

问题是 jquery.batchImageLoad.js 库被加载了两次，这并不是完全可取的。

除了必须更改实际的javascript之外，有什么方法可以防止它们发生冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:47:31.953

在 application.js 和 editor.js 的两个页面中都有 jquery.batchImageLoad.js 很好，因为浏览器会缓存它，所以用户只下载一次。

我建议以不重叠的方式构建您的 js 文件和包含文件。您可以通过放弃 application.js 来做到这一点，并拥有：

*   编辑器.js
*   common.js
    *   包括 jquery.batchImageLoad.js 和其他常用库
*   Everything_else.js
    *   您之前在 application.js 中拥有的大部分内容

您可以在任何地方包含 common.js，然后根据您的需要包含 editor.js 或everything_else.js。

如果您不想重组，您可以编写一个 include_once 函数，尽管这会使您的 javascript 包含的可预测性降低

```
# in application_helper 
@included_javascripts = {}

def javascript_include_tag_once file
   unless @included_javascripts[file]
      javascript_include_tag file
      @included_javascripts[file] = true
   end
end 
```

# formatting - 上传/下载时 SAS 多层格式不起作用

> ID：10284606
> 
> 赞同：1
> 
> 时间：2012-04-23T16:38:18.107
> 
> 标签：formatting, sas

我正在使用 PC SAS 9.1 并且正在使用两台远程服务器，因此，我正在尝试设置我的参数和格式等；在将它们上传到每个远程服务器之前在本地。

我想将多层格式应用于 proc 摘要。我的格式部分工作，但是当我上传（或下载）格式时出现了问题。

在下面的这个例子中，我在远程会话上创建了 MultiLabel 格式。然后我创建一个简单的数据集并应用格式。

然后我对数据进行 Proc Summary，这将生成一个表格，其中表格品牌字段首先由模型格式化，然后制作，然后键入，产生一个 8 行的表格。

然后我将格式下载到本地会话并执行相同的数据集创建和汇总。运行时，Proc Summary 中仅使用格式的第一个标签（模型），这意味着我的数据集摘要只有 5 行。

```
 RSubmit RemoteServer;
     Proc Format;
      Value $Brand (NotSorted MultiLabel)
       /* Model */
       'A' = 'Focus'
       'B' = 'Astra'
       'C' = 'Fiesta'
       'D' = 'Corsa'
       'E' = 'Fusion'

       /* Make */
       'A' = 'Ford'
       'B' = 'Vauxhall'
       'C' = 'Ford'
       'D' = 'Vauxhall'
       'E' = 'Ford'

       /* Type */
       'A' = 'Automobile'
       'B' = 'Automobile'
       'C' = 'Automobile'
       'D' = 'Automobile'
       'E' = 'Automobile';
     Run;
    EndRSubmit;

    RSubmit RemoteServer;
     Proc Download InCat  = Work.Formats
                   OutCat = Work.Formats;
     Run;
    EndRSubmit;

    RSubmit RemoteServer;
     Data Source;
      Do i = 1 To 5;
       If      i = 1 Then Brand = 'A';
       Else If i = 2 Then Brand = 'B';
       Else If i = 3 Then Brand = 'C';
       Else If i = 4 Then Brand = 'D';
       Else If i = 5 Then Brand = 'E';
       Volume = 1;
       Output;
      End;
      Format Brand $Brand.;
     Run;
    EndRSubmit;

    RSubmit RemoteServer;
     Proc Summary Data = Source NoPrint CompleteTypes Missing NWay;
      Class Brand / MLF PreLoadFmt Order = Data;
      Var   Volume;
      Output Out = Summary (Drop = _:)
             N() = Volume;
     Run;
    EndRSubmit;

    Data Source;
     Do i = 1 To 5;
      If      i = 1 Then Brand = 'A';
      Else If i = 2 Then Brand = 'B';
      Else If i = 3 Then Brand = 'C';
      Else If i = 4 Then Brand = 'D';
      Else If i = 5 Then Brand = 'E';
      Volume = 1;
      Output;
     End;
     Format Brand $Brand.;
    Run;

    Proc Summary Data = Source NoPrint CompleteTypes Missing NWay;
     Class Brand / MLF PreLoadFmt Order = Data;
     Var   Volume;
     Output Out = Summary (Drop = _:)
            N() = Volume;
    Run; 
```

当我查看每台服务器上的格式时，它显示为使用多个标签正确创建，但它不应用它们。

我试过在各种网站上查看，SUGI 等；但找不到其他遇到此问题的人。

感觉传输格式的读取出现问题，因为它看起来是正确创建的，并且当在任何服务器上创建格式时，该表将在该服务器上工作。

我基本上是在发帖，看看这里是否有人曾经遇到过这个问题，他们是否知道为什么会发生，或者如果可以采取一些措施来确保该过程能够正常运行，那就更好了。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T19:40:46.220

我认为问题出在创建格式之后（在 REMOTESERVER1 上），然后在连接到 REMOTESERVER2 之前断开回本地会话。FORMAT 需要移动到 LOCAL 会话，然后移动到 REMOTESERVER2。

这对我有用（只是在 REMOTESERVER1、LOCAL 和 REMOTESERVER2 之间移动格式目录），至少日志表明它是成功的。

```
filename RLink 'myScript' ;
options comamid=tcp remote=REMOTESERVER1;
signon REMOTESERVER1 ;
rsubmit;

 proc format;
  value $test
  'TEST'=1 ;
 run;

 Proc Download 
  InCat  = Work.Formats
  OutCat = Work.Formats;
 Run;

endrsubmit ;

/* Now back in LOCAL */

filename RLink 'myScript2' ;
options comamid = tcp remote = REMOTESERVER2 ; 
signon REMOTESERVER2 ;
rsubmit ;

 Proc Upload 
  InCat  = Work.Formats
  OutCat = Work.Formats;
 Run;

endrsubmit ; 
```

# java - 如何使用 Map 应用 setText 方法，其中我的 JTextField 元素已在 Map 中分配？

> ID：10284609
> 
> 赞同：2
> 
> 时间：2012-04-23T16:38:23.673
> 
> 标签：java, swing, map

我有以下内容`SSCCE`，我无法重新调用`currentComponents.get(status)` 拥有 .setText() 方法。如何使用 Map 方法设置文本？

**按下按钮 a 后，文本字段仍为空**

![在此处输入图像描述](../Images/5b6129e0e841d70f3ec38aaec57764aa.png)

测试.java：

```
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;
import javax.swing.*;
import layout.SpringUtilities;

public class Test {

  private static String status = null;
  private static Map<String, JTextField> currentComponents = new HashMap<String, JTextField>();
  private static JPanel dialog;

  public static void main(String args[]){
    JFrame frame = new JFrame();
    final JLabel label = new JLabel();
    frame.getContentPane().add(label);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    DialogLoginsetup();

    frame.add(dialog);
    frame.pack();
    frame.setVisible(true);
  }

  /* Dialog part 1 */
  private static void DialogLoginsetup() {    

    JPanel configPanel = new JPanel();
    configPanel.setLayout(new GridLayout(5, 2, 2, 2));

    try {
      Loginsetup(configPanel);
    } catch (IOException io) {
      io.printStackTrace();
    }

    JPanel topPanel = new JPanel();
    topPanel.setLayout(new FlowLayout());
    topPanel.add(new JLabel("Setup: "));

    dialog = new JPanel();   
    dialog.setLayout(new BorderLayout());
    dialog.add(topPanel, BorderLayout.NORTH);
    dialog.add(new JPanel(), BorderLayout.SOUTH);
    dialog.add(configPanel, BorderLayout.CENTER);    
  }  

  /* Dialog part 2 */
  private static JTextField serverTextField;
  public static void Loginsetup(JPanel configPanel) throws IOException {
    JPanel loginPanel = new JPanel();
    loginPanel.setLayout(new SpringLayout());

    currentComponents.put("serverTextField", new JTextField());

    // server
    JLabel serverLabel = new JLabel("Username: ");
    serverTextField= new JTextField();
    serverLabel.setLabelFor(serverTextField);
    loginPanel.add(serverLabel, BorderLayout.WEST);
    loginPanel.add(serverTextField, BorderLayout.CENTER);
    serverTextField.addFocusListener(new FocusListener() {      
      public void focusGained(FocusEvent fe) {
        status = "serverTextField";
      }

      public void focusLost(FocusEvent fe) {

      }
    });

    //Layout the panel.
    //SpringUtilities.makeCompactGrid(loginPanel,
                                //1, 2,         //rows, cols
                                //6, 6,        //initX, initY
                                //6, 6);

    configPanel.setLayout(new GridLayout(0,1));
    configPanel.add(loginPanel);
    configPanel.add(loadAZ());
  }

  /* Dialog part 3 */
  public static JPanel loadAZ() {
    JPanel az = new JPanel();   
    az.setBorder(BorderFactory.createEmptyBorder(11, 11, 11, 11));
    az.setLayout(new GridLayout(0,12));
    String[] alphabet = {"a", "b", "c", "d", "e", "f", "g", "h", "i", "j" , "k" , "l", "m", "n",
                         "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "-", "_"
    };

    JButton[] ka = new JButton[28];
    for (int i = 0 ; i < 28; i++) {  
      ka[i] = new JButton(alphabet[i]);
      ka[i].addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {   
          String one = e.getActionCommand();          
          System.out.println("Something is pressed, which should be added to: " + status);   

          if (one.equals("a")) {            
            //currentComponents.get(status).setText();
            JComponent component = currentComponents.get(status);
            ((JTextComponent) component).setText("works");        // Did not worked
          } else if(one.equals("b")) {
          } else {            
          }
        }
      });
      az.add(ka[i]);      
    }
    return az;
  }  

} 
```

**跟进：**

尝试1：[失败]

```
private static Map<String, JTextField> currentComponents = new HashMap<String, JTextField>();
currentComponents.put("serverTextField", new JTextField());
JTextField goal = currentComponents.get("serverTextField");
goal.setText("1"); 
```

尝试 2：[失败]

```
JTextField goal = (JTextField) (JTextComponent) (Object) "serverTextField";
goal.setText("1"); 
```

尝试 3：[失败]

```
JTextField goal = new JTextField();
goal.setName("serverTextField");
goal.setText("1"); 
```

尝试 4：[**确定**]

```
private static List<JTextField> list = new ArrayList<JTextField>();
list.add(serverTextField); // #define JTextField serverTextField = new JTextField();
JTextField goal = list.get(0);
goal.setText("1"); // Works 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:45:03.403

((JTextComponent) currentComponents.get(...)).setText(...)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:51:54.810

显而易见的答案是使用演员表，我会说：摆脱地图。只需将文本字段传递给您的`ActionListener`（作为参数，或使用最终变量，...）并删除该映射。由于您的侦听器只更新一个组件，因此请使用 instanceof 和静态映射将其传递给侦听器 iso。

此外，您的

```
ka[i].addActionListener(new ActionListener() {
        @Override
        public void actionPerformed(ActionEvent e) {   
          String one = e.getActionCommand();          
          System.out.println("Something is pressed, which should be added to: " + status);   

          if (one.equals("a")) {            
            currentComponents.get(status).setText();
          } else if(one.equals("b")) {
          } else {            
          }
        }
      }); 
```

代码有一些问题

1.  我没有`setActionCommand`在您的按钮上看到对的调用，所以我担心`getActionCommand`不会返回预期的结果
2.  如果要使用按钮的文本更新字段中的文本，则不需要巨大的构造。将按钮的文本设置为操作命令，并将该文本附加到字段中。比编写 26 个 if-else 语句要容易得多

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:42:56.080

您可以声明：

```
private static Map<String, JTextField> currentComponents 
    = new HashMap<String, JTextField>(); 
```

既然`JComponent`没有办法`setText(...)`。在您的示例中，您仅`JTextField`在此地图中使用。如果您打算将其他组件也放入此地图，请按照其他人的建议使用演员表。

# sql - 如何用一条sql语句更新同一张表中的多条记录？

> ID：10284614
> 
> 赞同：-1
> 
> 时间：2012-04-23T16:38:30.957
> 
> 标签：sql, sql-server, tsql, sql-server-2005

嘿，我想知道是否可以得到一些帮助：

```
Select q1.questionid, qa.questionanswergroupid
from questions q1
full join Questions_AnswerGroup qa on qa.QuestionId=q1.QuestionId
and qa.QuestionId=q1.QuestionId where q1.sectionid=7610
and q1.questiontext like 'Date Filed with EMMA%' 
```

这让我明白了：

```
 questionid  questionanswergroupid
    31164            17133
    31164            17464
    31164            17465
    31164            17466
    31164            17467
    31164            17468
    31164            17469
    31164            17470
    31169            (null)
    31173            (null)
    31177            (null)
    31181            (null)
    31185            (null)
    31189            (null)
    31193            (null) 
```

这就是我想成为的地方：

```
Row questionid  questionanswergroupid
    31164            17133
    31169            17464
    31173            17465
    31177            17466
    31181            17467
    31185            17468
    31189            17469
    31193            17470 
```

感谢您提前提供任何帮助。我想要一个单一的更新语句，将 Questions_AnswerGroup 中的重复 questionids 替换为 questions 表中在 Questions_AnswerGroup 表中没有对应值的唯一值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:41:23.380

使用内部连接 [​​http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:01:36.127

我认为你应该做这样的事情..

首先用参数`CREATE FUNCTION`调用`FindUniqueQuestionId``@questionanswergroupid`

第二做：

```
UPDATE Questions_AnswerGroup
SET QuestionId = FindUniqueQuestionId(questionanswergroupid)
WHERE questionanswergroupid IN 
(
  SELECT questionanswergroupid FROM Questions_AnswerGroup WHERE "is duplicate" -- pseudo code
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:41:19.250

```
Select q1.questionid, qa.questionanswergroupid 
from questions q1 
full join Questions_AnswerGroup qa on qa.QuestionId=q1.QuestionId 
and qa.QuestionId=q1.QuestionId where q1.sectionid=7610 
and q1.questiontext like 'Date Filed with EMMA%' and qa.questionanswergroupid is not null 
```

# iphone - 从联系人获取地址和电话号码？

> ID：10284617
> 
> 赞同：2
> 
> 时间：2012-04-23T16:38:44.430
> 
> 标签：iphone, objective-c, contacts

在我的应用程序中，我需要获取一堆联系方式，我可以成功获取名字和姓氏，如下所示：

```
NSString *firstName = (__bridge NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty); 
```

但是我无法获得任何这样的地址详细信息的电话号码，任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:24:28.773

一个人只有一个名字，但可能有多个电话号码。您需要获取所有已知的电话，如下所示：

```
ABMultiValueRef allPhones = ABRecordCopyValue(person, kABPersonPhoneProperty); 
```

然后，您可以在`ABMultiValueRef`. 地址也是一样。

[这](https://stackoverflow.com/a/1252995/335858)是演示该技术的一个很好的答案；它是 ARC 之前的版本，因此您自然需要添加`__bridge`到演员表中。

# jquery - 使用 jquery 加载带有表单的 django 模板

> ID：10284627
> 
> 赞同：1
> 
> 时间：2012-04-23T16:39:21.420
> 
> 标签：jquery, django, forms, load

自从我开始使用 jquery 和 ajax 以来，我已经被我的 django 网站淹没了。我是 ajax 和 javascript 的新手，所以请在回复时记住这一点，如果我有点困惑，请见谅。

基本上我有一个模板，它有一个创建食谱的表格。我使用 jquery .load 将此模板加载到另一个页面上的弹出 div 中。表单似乎可以很好地加载到 div 中，但是当我尝试提交表单时，什么也没有发生（没有验证检查或任何事情 - 如果我将字段留空，它不会返回任何错误。）奇怪的是，当我访问实际页面时，我我正在使用 jquery 加载，表单完美运行。这让我陷入了相当多的困境，我很想继续前进，所以非常感谢任何帮助。

这是加载脚本：

```
<script type="text/javascript">
$(document).ready(function(){
    $(".create").on("click", function(){
        $("#popupContact").load("/cookbook/createrecipe #createform");
    });
});
</script> 
```

页面加载表单的模板：

```
{% block content %}
{% autopaginate recipe_list 6 %}
    <div id="recipe_cont">
            {% for recipe in recipe_list %}
        <div class="recipe">
            <div class="button">    
            <a href="{% url cookbook.views.userrecipe recipe.id %}" style="display: none;"></a>
            <h4>{{ recipe.name }}</h4>
            <h5>{{ recipe.author }}</h5>
            <h5>Prep Time: {{ recipe.prep_time }} minutes</h5>
            </div>
        </div>
    {% endfor %}
    </div>
    <div id="popupContact" class="popup">
         <a id="popupContactClose" style="cursor:pointer;float:right;">x</a>
         <p id="contactArea"></p>
    </div>
    <div id="backgroundPopup">
    </div>  
    <div id="col2-footer">
    {% paginate %}
    </div>
{% endblock %} 
```

创建配方模板：

```
{% extends "cookbook/base.html" %}
    {% block content %}
    <div id="createform">
    <h1>Create New Recipe</h1>
        <form action="." method="POST">
            <table>
                {% csrf_token %}
                {{ form.as_table }}
            </table>
            <p><input type="submit" value="Submit"></p>
        </form>
    </div>
    {% endblock %} 
```

创建配方视图：

```
def createrecipe(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect('/index/')
    else:
        if request.method == 'POST':
            print 1
            form = RecipeForm(request.POST)
            if form.is_valid():
                print 2
                recipe = form.save(commit=False)
                recipe.original_cookbook = request.user.cookbooks.all()[0]
                recipe.pub_date = datetime.datetime.now()
                recipe.save()
                user = request.user
                cookbooks = user.cookbooks
                cookbook = cookbooks.all()[0]
                cookbook.recipes.add(recipe)
                return HttpResponseRedirect('/account')
        else:
            form = RecipeForm()

        return render_to_response('cookbook/createrecipe.html',
                                    {'form':form},
                              context_instance=RequestContext(request)) 
```

jquery-form的javascript代码：

```
<script> 
    // wait for the DOM to be loaded 
    $(document).ready(function() { 
        var options ={
            target: '#popupContact',
            url: '{% url createrecipe %}',
            success: function() { 
            alert("Thank you for your comment!"); 
        }
    };
        $('#createrecipe').ajaxForm(options); 
    }); 
</script> 
```

谢谢，小鱼

编辑1：马克指出我的表单操作是错误的，因此已解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:06:54.490

创建表单的表单操作是当前页面`'.'`。如果您将其加载到创建页面 url 上，如您所述，它将正常工作。但是，如果您在列表页面上使用弹出窗口加载它，那么它会将表单提交到不正确的列表视图。设置`action="{% url 'create-view' %}"`将纠正这个问题。`'create-view'`将替换为创建视图模式的名称。

# bash - 在 udev 规则中传递参数

> ID：10284628
> 
> 赞同：4
> 
> 时间：2012-04-23T16:39:25.640
> 
> 标签：bash, udev

我在 udev 中为 USB 添加和删除了 2 个文件编写了 2 条规则。

```
SUBSYSTEM=="usb", ACTION=="add", RUN+="/u/usb_added %b"
SUBSYSTEM=="usb", ACTION=="remove", RUN+="/u/usb_remove %b" 
```

我为这些规则创建了两个不同的脚本，它们采取适当的行动（做同样的事情）。

我想通过传递值（添加、删除）来组合这些规则（然后是操作脚本），然后通过 if 条件签入新脚本。然后采取适当的行动。

所以我的问题是如何在 RUN+= "/u/usb_status ??" 中传递参数

我将如何在新脚本中获取这些参数，然后在 if 条件下使用。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T09:15:33.237

据我所知，你可以这样做：

```
SUBSYSTEM=="usb", RUN+="scripts %b" 
```

然后在脚本中使用这个：

```
if [ $ACTION == "add" ];then
  .....
elif [ $ACTION == "remove" ]lthen
  ..... 
```

但这似乎受到 udev 版本的限制......我不知道，试试吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-28T08:31:52.673

我通过在执行脚本后只写单词来解决它。

例如：

```
SUBSYSTEM=="usb", ACTION=="add", RUN+="/u/usb_added Parameter %b" 
```

所以我只是把它用作：

```
SUBSYSTEM=="usb", ACTION=="add", RUN+="/u/usb_added ADDED %b" 
```

并在执行脚本（在本例中为usb_add）我得到它如下：

```
CHECK=$@ 
```

现在这个 CHECK 的值是实际从 Udev 规则传递的“添加”。

# ruby-on-rails - POW 是否有任何理由忽略您的 .rvmrc 文件？

> ID：10284635
> 
> 赞同：1
> 
> 时间：2012-04-23T16:39:50.517
> 
> 标签：ruby-on-rails, rvm, rack-pow

我的 POW 应用程序是最近的副本，我已经安装并重新安装了几次。

它不会注册我的 .rvmrc 文件。它仍然加载最新的（不是默认的）红宝石。

我做了以下事情。

1.  完全删除应用程序 2 完全卸载 pow
2.  彻底卸粉
3.  删除 ~/.pow 5 杀死所有 pow 实例

重新安装了一切。仍然不会读取`.rvmrc`。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T23:48:04.920

这是已知问题：[https ://github.com/37signals/pow/issues/271](https://github.com/37signals/pow/issues/271)

最简单的解决方案（在项目目录中）：

```
rvm env . > .powenv 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-11T16:54:35.797

如果这对您不起作用，将以下行添加到您的 .rvmrc：

```
rvm env -- [your_ruby]@[your_gemset] >> .powenv 
```

如上面引用的 pow 问题线程中所述。然后重新启动 Pow。那应该这样做。

# postgresql - 任何用于处理 pg_dump .backup 文件的工具？

> ID：10284641
> 
> 赞同：0
> 
> 时间：2012-04-23T16:40:10.657
> 
> 标签：postgresql

我有一堆由 PostgreSQL pg_dump 程序生成的二进制 .backup。我正在尝试从这个文件集合中重建最完整/包容性的数据库版本。因为它是二进制格式，所以 diff 和 comm 比较不起作用。PsotgreSQL 允许我一次加载（pg_restore）其中一个文件，仅此而已。如何比较这些不同备份的内容以重建最大数据库？

注意：所有都是从 Postgres 9.0.x 转储的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:22:57.440

该工具是`pg_restore.` 您可以使用它从二进制转储中的任意实体中提取数据或结构。

例如，要从名为“foo”的表中提取表数据，我们可以：

```
pg_restore -a -t foo mybackup.backup 
```

# android - Xtify 注册如何运作？

> ID：10284644
> 
> 赞同：2
> 
> 时间：2012-04-23T16:40:15.843
> 
> 标签：android, android-emulator, push-notification, android-c2dm, xtify

我目前正在我的项目中实现推送通知功能。我设法使用 xtify 来执行此操作，因为它是与 Google 的 C2DM 服务交互的一个很好的包装器。

现在，你们中的大多数人可能都知道：xtify 使用一个名为**xid**的标识符来向用户传达和推送通知。所以在我的主要活动（用户打开应用程序时显示的第一个活动）中，我有以下代码：

```
 XtifySDK.start(getApplicationContext(), Constants.XTIFY_APP_KEY,
        Constants.C2DM_SENDER_ID);
    String xid = XtifySDK.getXidKey(getApplicationContext());
    if (!"".equals(xid) && xid != null) {
      App.setXid(xid);
    } 
```

现在我的问题是：

*   xid 是否**永久**连接到设备？或者是否可以更改/撤销它？
*   我应该将它存储在数据库中（使用用户信息）吗？并在每次用户连接时检查他/她是否已经有关联的 xid，如果没有，请调用

    **字符串 xid = XtifySDK.getXidKey(getApplicationContext());**

生成一个新的？- 有没有办法让安卓模拟器获得通知？

提前谢谢你们，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T17:44:27.327

XID 在安装时分配给设备。除非用户重新安装应用或开发者更改 AppKey，否则它不会改变。您应该将 xid 与您的用户记录一起保存（就像您使用电子邮件地址或 SMS 电话号码一样）。您需要此 XID 才能通过 API 向特定用户发送单独的消息，例如：

[http://developer.xtify.com/display/APIs/Push+API+2.0](http://developer.xtify.com/display/APIs/Push+API+2.0)

您不必每次都检查 XID，但这样做可能是一个好主意，以处理用户重新安装应用程序的极端情况，但保留您自己的应用程序生成的 UUID 或他们的用户名。

# ldap - 如何以编程方式从 LDAP Liferay 6.0.5 导入用户

> ID：10284653
> 
> 赞同：2
> 
> 时间：2012-04-23T16:40:55.380
> 
> 标签：ldap, liferay-6

我想以编程方式将用户从 LDAP 导入 Liferay 6.0.5。

请问有什么建议或样品吗？

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:41:24.343

**您可以在com.liferay.portal.security.ldap.PortalLDAPImporterImpl**中查看 liferay 的源代码，这可能会让您更好地了解如何在 liferay 中进行操作。

或者

您可以在您的自定义 portlet 中尝试以下代码，该代码非常基本（我已删除并仅保留了所需的基础知识，因此它**不会编译**但仍然只需很少的修改就可以工作）：

```
import javax.naming.CommunicationException;
import javax.naming.Context;
import javax.naming.NameClassPair;
import javax.naming.NamingEnumeration;
import javax.naming.NamingException;
import javax.naming.directory.Attributes;
import javax.naming.directory.DirContext;
import javax.naming.directory.InitialDirContext;

import com.liferay.portal.model.User;

public class MyProgramaticLDAP {

    private static final Properties ENV_PROPS = new Properties();

    static {
        ENV_PROPS.setProperty(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
        ENV_PROPS.setProperty(Context.PROVIDER_URL, "ldap://url.to.my.com:389");
        ENV_PROPS.setProperty(Context.SECURITY_PRINCIPAL, "uid=myuserid,ou=people,dc=myorg,dc=com");
        ENV_PROPS.setProperty(Context.SECURITY_CREDENTIALS, "mypassword");
        ENV_PROPS.setProperty("PROVIDER_PROTOCOL", "ldap"));
        ENV_PROPS.setProperty("PROVIDER_PORT", "389");
        ENV_PROPS.setProperty("PROVIDER_HOST", "192.168.5.234");
        ENV_PROPS.setProperty("LDAP_BASE_URL", "ldap://url.to.my.com:389");
        ENV_PROPS.setProperty("CONTEXT_NAME", "ou=people,dc=myorg,dc=com"));
    }

    public User getLdapUser(String userEmail) throws PortalException,
            SystemException, WebServiceAuthenticationException {

        DirContext ctx = null;
        String userContext = StringPool.BLANK;
        String userName = null;
        NamingEnumeration results = null;

        //liferay user
        User user = new User(); //won't compile

        try {
            // context and specifying LDAP service provider parameters.
            ctx = new InitialDirContext(ENV_PROPS);

            userContext = "uid=" + userEmail + "," + ENV_PROPS.getProperty("CONTEXT_NAME");
            results = ctx.list(ENV_PROPS.getProperty("CONTEXT_NAME"));

            System.out.println("User context: " + userContext);

            Attributes attrs = null;

            while (results.hasMore()) {

                NameClassPair ncp = (NameClassPair) results.next();

                userName = ncp.getName();

                // the attributes for the record retrieved, your attributes may differ based upon the LDAP you use
                System.out.println("Fetching attributes");

                attrs = ctx.getAttributes(userName + "," + ENV_PROPS.getProperty("CONTEXT_NAME"));

                System.out.println("Attribute mail: " + attrs.get("mail").get());           
                System.out.println("Attribute sn: " + attrs.get("sn").get());
                System.out.println("Attribute title: " + attrs.get("title").get());
                System.out.println("Attribute mobile: " + attrs.get("mobile").get());

                System.out.println("Attribute firstname: " + attrs.get("firstname").get());
                user.setFirstName(attrs.get("firstname").get());

                System.out.println("Attribute department: " + attrs.get("department").get());

            }// while ends here

        } catch (CommunicationException cex) {
            cex.printStackTrace();
        } catch (Exception exp) {
            exp.printStacktrace();
        } finally {
            // close connection and other code
        }

        return user;
    }
} 
```

# c - 通过 BASH 在 C 中指定命令行参数

> ID：10284655
> 
> 赞同：0
> 
> 时间：2012-04-23T16:41:04.740
> 
> 标签：c, bash, unix, command-line

我在 BASH 中编译了一个需要命令行参数的 C 程序。但是，对于我的一生，我不记得如何在启动时指定它们。这么琐碎的问题。

例如我正在运行程序：

`./myprogram.exe(myargument)`

但这显然行不通...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:42:40.177

像这样：

```
program arg1 arg2 arg3 "arg4 containing spaces" 
```

# python - NumPy 和 Python 3 - 导入时出现错误消息

> ID：10284656
> 
> 赞同：0
> 
> 时间：2012-04-23T16:41:06.623
> 
> 标签：python, numpy

在 Python 3 中导入 NumPy，我收到以下错误消息：

```
>>> import numpy
/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/site-packages/numpy/random/__init__.py:91: RuntimeWarning: numpy.ndarray size changed, may indicate binary incompatibility
  from .mtrand import *
>>> 
```

但是，`numpy`之后会被导入（例如，我可以调用`dir(numpy)`以列出其内容）

a) 这个信息是什么意思？

b) 由于我是 NumPy 的新手：您能否建议我进行测试以确保 NumPy 正常运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:43:39.770

根据此错误报告，这不是问题：[http ://projects.scipy.org/numpy/ticket/2103](http://projects.scipy.org/numpy/ticket/2103)

并且警告已在 git 中修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:43:55.013

我发现[这个错误报告](http://projects.scipy.org/numpy/ticket/2103)似乎说警告并不重要。看起来错误报告已标记为已修复，因此 NumPy 的未来版本将不会显示警告。

# regex - Nginx：通过单个内联更改将多个 URL 格式重定向到相同的格式

> ID：10284657
> 
> 赞同：0
> 
> 时间：2012-04-23T16:41:13.410
> 
> 标签：regex, nginx

我是 nginx 新手，需要设置一些重定向，我知道 Nginx 中的重定向是基于正则表达式的，但这也不是我的强项。

我们正在启动我们的最新代码，以及重定向以下所有实例的内容

```
https://uat1.lipsum.com/browse
https://uat1.lipsum.com/popular
uat1.lipsum.com/browse/[anything]   
uat1.lipsum.com/popular/[anything] 
```

到...

```
https://uat1.lipsum.com/discovery
https://uat1.lipsum.com/discovery
uat1.lipsum.com/discovery/[anything]
uat1.lipsum.com/discovery/[anything] 
```

基本上，用“发现”替换所有出现的“浏览”和“流行”

我尝试了几种方法...

我能想到的最好的是以下，它可以正确重定向，但其他格式不会。

```
https://uat1.lipsum.com/browse
https://uat1.lipsum.com/popular 
```

nginx.conf

```
location /browse/ {
    rewrite ^(.*)/browse/(.*)$ /discover/ permanent;
    }

    location /browse {
    rewrite ^(.*)/browse /discover permanent;
   }

 location /popular/ {
    rewrite ^/popular/ /discover/ permanent;
    }

    location /popular {
    rewrite ^/popular /discover permanent;
   }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:22:10.610

使用反向引用的魔力。在 ()s 中放入正则表达式捕获匹配的表达式，然后使用 $1、$2、$3 等将拉取第一个、第二个、第三个等捕获的文本。

```
location /browse/ {
    rewrite ^/browse/(.*)$ /discover/$1 permanent;
    }

    location /browse {
    rewrite ^/browse$ /discover permanent;
   }

 location /popular/ {
    rewrite ^/popular/(.*)$ /discover/$1 permanent;
    }

    location /popular {
    rewrite ^/popular$ /discover permanent;
   }
} 
```

请参阅[此处](http://wiki.nginx.org/HttpRewriteModule)了解更多信息。

# asp.net-mvc - 是否可以在 MVC for Asp.NET 中使用 Outlook 电子邮件组作为角色？

> ID：10284661
> 
> 赞同：0
> 
> 时间：2012-04-23T16:41:30.783
> 
> 标签：asp.net-mvc, outlook, authorization, roleprovider

我需要设置此 MVC 应用程序以使用 Windows 身份验证和 Outlook 电子邮件组为用户分配角色，然后我可以授权这些角色中的用户能够在控制器中执行特定操作。

我四处搜索，发现了一些关于角色如何与 MVC 一起使用以及如何将角色提供程序类用于许多基于角色的操作的非常有用的信息。但是，这些角色来自 SQL 数据库，并且不使用 Outlook 电子邮件组和 Windows 身份验证来授权用户。

我特别想了解如何利用 Outlook 电子邮件组，但无法轻松找到此信息。谁能帮我？

```
 <authentication mode="Windows">
</authentication>
<authorization>
  <deny users="?" />
  <allow users="?" />
  <allow roles="HAH\Domain Users"/>
  <deny users="*" />
</authorization>
<roleManager enabled="true" defaultProvider="AspNetWindowsTokenRoleProvider">
  <providers>
    <clear />
    <add
        name="AspNetWindowsTokenRoleProvider"
        type="System.Web.Security.WindowsTokenRoleProvider"
        applicationName="/" />
  </providers>
</roleManager> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:56:37.780

如果您将 Active Directory 中的组作为[Exchange 分发列表](http://technet.microsoft.com/en-us/library/bb125256.aspx)，则可以使用任何使用 Windows 身份验证的 MVC 示例。

甚至为此还有一个 Visual Studio 模板。创建一个新的 MVC Web 应用程序，然后选择 Intranet Application。

**更新**

您的 web.config 存在一些问题。您应该只指定一个拒绝元素和一个允许元素：

```
<authorization>
  <deny users="?" />
  <allow roles="HAH\Domain Users"/>
</authorization> 
```

这将拒绝所有未经授权的用户并允许域用户。请注意，MVC 遵循`[Authorize]`属性中定义的角色。我相信该属性将覆盖 web.config 设置。

在您的控制器中，您可以为整个控制器类或特定操作方法指定角色。

```
[Authorize(Roles = "Group 1, Group 2, Group3")]
public class MyController { } 
```

或者

```
public class MyController
{
  [Authorize(Roles = "Group 1, Group 2, Group3")]
  public ActionResult MyAction()
  {
     return View();
  }
} 
```

# javascript - 如果 div 没有内容隐藏其他 div

> ID：10284663
> 
> 赞同：2
> 
> 时间：2012-04-23T16:41:37.117
> 
> 标签：javascript, jquery, html

我有以下JS：

```
if ( $("#secretContent").children().length == 0) {
    $("#seemore").hide();
}​ 
```

这是一个[jsFiddle](http://jsfiddle.net/GVd9h/)演示我的问题。当 id 为“secretContent”的 div 没有子项/内容时，我打算隐藏 id 为“seemore”的 div。

任何帮助将非常感激。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:43:07.523

所以...你想用 替换它`> 0`，`== 0`我想。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T16:43:10.060

可能想将您“大于”更改为相等：

```
if ( $("#secretContent").children().length == 0) {
    $("#seemore").hide();
}​ 
```

正如 Vega 建议的那样，如果您关心文本节点，而不是严格的子 HTML 元素，那么您需要使用`contents()`代替`children`：

```
if ( $("#secretContent").contents().length == 0) {
    $("#seemore").hide();
}​ 
```

这是一个显示两者的演示：

[http://jsfiddle.net/jtbowden/NASQn/](http://jsfiddle.net/jtbowden/NASQn/)

**笔记！**应该注意的是**，**`.contents()`计算.**`div`**

 **这：

```
<div>
</div> 
```

还有这个：

```
<div> </div> 
```

都认为**不是空**的，因为第一个有换行符，第二个有空格，它们都被认为是文本节点。使用时唯一被认为是空的`.contents()`是：

```
<div></div> 
```

如果你想解决这个问题，你需要检查 no `children()`，然后查看剩余的文本是否只是空格：

```
if ( $("#secretContent").children().length == 0) {
    if( $("#secretContent").text().match(/^\s*$/) ) {
        $("#seemore").hide();
    }
} 
```

演示：http: [//jsfiddle.net/jtbowden/4xtME/](http://jsfiddle.net/jtbowden/4xtME/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T16:44:52.870

如果您也想检查文本内容，我认为您应该使用`.contents`而不是incase。`.children`也改成`>`了`==`. 试着告诉我，

```
if ( $("#secretContent").contents().length == 0) {
    $("#seemore").hide();
}​ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T16:46:11.163

将“> 0”替换为“== 0”

这应该够了吧！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T16:51:11.083

这是在做伎俩[http://jsfiddle.net/chepe263/9Jmug/1/](http://jsfiddle.net/chepe263/9Jmug/1/)

```
if ( $("#secretContent").children().length < 1) {
    $("#seemore").hide();
}​ 
```

在小提琴中它显示了内容，因为它在 secretContent 中有一个额外的 div**

# backbone.js - 主干路由检测是向前还是向后按压

> ID：10284665
> 
> 赞同：9
> 
> 时间：2012-04-23T16:41:46.170
> 
> 标签：backbone.js

我正在使用backbone.js 编写一个应用程序，并在页面之间制作动画（有点像iphone 风格的ui）。因此，当您单击一个按钮时，下一页从右侧滑入，单击后退按钮将使下一页从左侧滑入。我希望能够使用路由器对浏览器的前进和后退按钮执行相同的操作。是否可以分辨出哪个被按下（向前或向后），以便我可以确保动画的方向正确？

只是为了澄清，我不是在问如何进行骨干路由。我在问在进行主干路由时，如何捕捉导致 url 更改的按钮，是后退按钮还是前进按钮？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-26T01:13:17.343

监听所有链接上的点击事件。（咖啡脚本）

```
$(document).on 'click', 'a' ->
  window.linkClicked = true 
```

*或者，您可以拦截`Backbone.history.navigate()`.* 如果有人点击它，这意味着他们不会返回，所以设置一个标志为`true`. 在您的路由器中也有一个事件来监听所有路由器事件。始终存储前一个片段 ( `Backbone.history.getFragment()`)。将当前片段与前一个片段进行比较。如果它们相同，则检查该标志是否设置为`true`or `false`。如果设置为`false`，则您知道它已返回，如果`true`不是，则表示有人单击了链接但来到了相同的上一页。最后，将此标志重置为`false`.

```
class SnazzyRouter extends Backbone.Router
    initialize: ->
      # This gets triggered everytime a route event gets triggered
      @on 'all', =>
          currentFragment = Backbone.history.getFragment()
          window.backDetected = false  # assume no back detected

          if !window.linkClicked and currentFragment == window.previousFragment
              window.backDetected = true

          window.linkClicked = false  # reset
          window.previousFragment = currentFragment

window.linkClicked = false
window.backDetected = false
window.previousFragment = null

snazzyRouter = new SnazzyRouter() 
```

现在，这是一个简单的

```
# Did we go back?
console.log "I CAN'T BELIEVE WE WENT BACK!" if window.backDetected 
```

如果您需要任何说明，请告诉我（我刚刚为我的应用程序实现了这个并且它有效）。

# android - 片段选项卡和片段活动

> ID：10284668
> 
> 赞同：4
> 
> 时间：2012-04-23T16:42:02.797
> 
> 标签：android, android-fragments

根据指南，我自始至终都使用 Fragments 创建了一个应用程序，这样我就可以在更大的屏幕上显示更详细的视图。但是，我也想使用标签进行导航，根据指南，它也应该是片段而不是已弃用的 TabHost。

一些谷歌搜索表明你不能/不应该嵌套片段。我的问题是，如果您想要有标签，但您还想支持不同尺寸设备的片段，您打算怎么做？我应该删除碎片并为手机和平板电脑制作两个单独的活动吗？

更令人困惑的是，[这里](http://developer.android.com/design/patterns/multi-pane-layouts.html)的设计指南显示选项卡式导航，然后是看起来像片段活动的内容。这是嵌套片段的情况还是它们是单独的活动？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T09:30:27.960

有一个 API demo 一个代码示例，演示了结合 a`ViewPager`和 a`TabHost`来切换 Fragments： `Support4Demos/src/com/example/android/supportv4/app/FragmentTabsPager`

如果您不喜欢`TabHost`，这里是相同代码的另一个示例，但使用 ActionBar 选项卡和 ActionBarSherlock： [http ://code.google.com/p/sherlock-demo/](http://code.google.com/p/sherlock-demo/)

# c# - 如何使用动态 linq 使插入方法更灵活？

> ID：10284669
> 
> 赞同：0
> 
> 时间：2012-04-23T16:42:12.093
> 
> 标签：c#, entity-framework, dynamic-linq

我想将一些实体写入数据库，但有很多实体我喜欢为他们写一些东西，现在我知道了：

```
using(var dbContext = new myEntity())
{
   db.EntityName.AddToObject(newEntity);
   db.SubmitChanges();
} 
```

我不知道如何将其更改为： db.AddToObject("stringName") 我只想编写一些代码，因为我有很多表，所以我的模型中有很多实体。

编写一个方法并用不同的名称调用它对我有好处。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T13:59:10.850

一种简单的方法是将插入方法封装到委托中并将其传递给您的代码，如下所示：

```
void InsertEntity<TEntity>(TEntity newEntity, Func<myEntity, TEntity> insertCallback) where TEntity : EntityObject
{
    using(var dbContext = new myEntity())
    {
        insertCallback(dbContext, newEntity);
        dbContext.SaveChanges();
    }
} 
```

之后，在插入项目时，您需要提供 insert 方法（假设您有一个名为 的实体`Client`）：

```
var client = new Client();
InsertEntity<Client>(client, (dbContext, entity) => dbContext.Client.AddToObject(entity)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:45:50.720

ScottGu 有一个可以使用的[Dynamic Linq库。](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

![在此处输入图像描述](../Images/ff039cdf7a50933609ede708eea5e8e5.png)

# safari - Safari 如何计算 svg 对象的大小？

> ID：10284672
> 
> 赞同：1
> 
> 时间：2012-04-23T16:42:32.517
> 
> 标签：safari, svg

在以下场景中，Safari 如何确定输出 svg 的大小；

SVG 代码

```
 viewBox 0 0 800 800
 height 100%
 width 100% 
```

css

```
 svg width 100%
 containing div width 60% 
```

Safari 输出的 svg 比屏幕的 60% 小得多，好吧，这是一个错误。但是是什么决定了这个较小的 svg 的大小，它与我能想到的任何东西都没有关系。

只是提供一些背景信息。Safari 需要以 px 为单位的宽度和高度才能执行您想要的操作。% 不工作。但它确实输出了 svg，因此它必须在某个地方对其大小做出决定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T18:30:43.077

这不是你看到的错误。这是正确的行为。默认情况下，浏览器会缩放 SVG视图*框*（注意现在的术语，我们不是在谈论浏览器*视口*）以填充 SVG 元素的 CSS 确定的尺寸。填充行为由 SVG [preserveAspectRatio](http://www.w3.org/TR/SVG/coords.html#PreserveAspectRatioAttribute)属性确定。默认情况下，它设置为`meet`，这使整个 SVG 可见，并保留纵横比。另一种方法是`slice`放大视图框以覆盖元素，即使这意味着裁剪。（`slice`行为与 CSS3 中的类似`background-size:cover`。）

你需要做的是：

a) 不要在 SVG 文件中声明明确的高度或宽度。如果您的图形编辑器正在生成它们，只需手动进入并删除它们。根据[规范](http://www.w3.org/TR/SVG/struct.html#SVGElementWidthAttribute)，如果没有指定宽度和高度，则假定值为 100%，因此您的伪代码充其量是多余的。

b) 确保您在 CSS 中为 svg 元素设置了明确的高度。我推荐 Chrome 的开发人员或 Canary 版本来解决响应式 svg 大小问题，因为 Chrome 18 开发工具中存在一个已[修复](http://code.google.com/p/chromium/issues/detail?id=118996)的错误。一旦你让它在 Chrome 中运行，它几乎肯定也可以在 Safari 中运行。

c) 弄清楚你想如何设置 preserveAspectRatio 并手动编辑 svg 以放入声明中。

如果您仍然遇到问题，请发布一个 jsfiddle。其他人更容易发表评论。

# facebook - 我的网站的 Facebook 注销按钮（不是 Facebook Connect 注销）

> ID：10284676
> 
> 赞同：0
> 
> 时间：2012-04-23T16:42:41.433
> 
> 标签：facebook, button, redirect, logout

我想知道是否可以为我的网站创建一个“注销”按钮，将用户从 facebook 注销，然后将他们重定向到特定的 URL？让我详细说明一下，我在一家零售店工作，我有一个安装好的 iPad，因此客户可以“喜欢”我们的 Facebook 页面（通过使用传统的 Facebook 喜欢按钮）。目前，当客户选择“喜欢”时，它会打开一个新窗口，Facebook 会在该窗口中要求输入用户名和密码，然后在客户点击“提交”后立即将他们重定向回特定的 URL，我说“感谢喜欢我们“......唯一的问题是它让他们保持登录到Facebook。

我希望在我的“谢谢你喜欢我们”的 URL 上放一个注销按钮，这样他们就可以单击该按钮注销（无需返回 facebook），然后它会重定向到带有类似按钮的页面以进行下一个顾客。

我已经尝试过 facebook 连接，但步骤太多，因为用户必须允许应用程序等，我希望避免这种情况。也许是一种清除 facebook cookie 或其他任何东西的方法？我没有想法，任何事情都会有所帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:49:29.723

包括 Facebook JS SDK，然后`FB.logout()`单击链接或在感谢页面上调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:18:22.980

经过测试，即使使用 FB.logout() 也无法正常工作，因为一旦您登录 facebook.com，fb cookie 将自动注入，除非您从 facebook.com 注销，否则无法删除它。：/

# jquery - 如何将外部 html 页面（Html 标记以及脚本函数）加载到当前页面（DOM）中

> ID：10284677
> 
> 赞同：0
> 
> 时间：2012-04-23T16:42:45.953
> 
> 标签：jquery

test1.html

```
<html>
<head>
<script src="jquery-1.7.2.js">
</script>
<script>

function loadfn(){

$.get('test.html',function(data){

alert($(data).text());
//$('body div#returnData').html(data);
$.each(data, function(i, node) { 
    alert(i);
   if (node.tagName == "SCRIPT") {
       eval(node.innerHTML); 

   } else {
       $(node).appendTo($('#returnData')); 
   }

});

});
test1();
test2();
}
</script>
</head>
<body>
<div id="returnData" >
</div>
<input type="button" value="Click" onclick=loadfn()>
</body>
</html> 
```

测试.html：

```
<html>
<head>
<script src="/jquery-ui-timepicker-addon.js">
</script>
</head>
<script>
function test1(){
alert('test1 function');
}
</script>
<script>
function test2(){
alert('test2 function');
}
</script>
<body>
<div id="testdiv">
Text field : <input type="text" value="Test Value"/>
</div>
</body>
</html> 
```

实际上，我需要将 test.html 页面加载到 test1.html 中，然后运行 ​​test.html 页面中的脚本函数。

上面的代码片段不能满足要求。请让我知道我在代码片段中做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:48:23.510

呈现内容时，函数最快可用......问题是ajax调用是异步的，因此在您的示例中调用时test1和test2不存在

未经测试但尝试：

```
function loadfn(){
  $.get('test.html',function(data){
    $('#returnData').html(data);
    test1();
    test2();
  });
} 
```

编辑：在 test.html`html`中，`head`并且`body`不需要标记，将脚本标记与文件一起放在内容中，因为您正在加载 html 的子部分而不是整个新页面

# jquery-animate - jQuery Animation - 通过函数调用时不起作用

> ID：10284681
> 
> 赞同：0
> 
> 时间：2012-04-23T16:42:57.183
> 
> 标签：jquery-animate

我的目标是创建一个需要传入参数的动画通用函数，假设该函数可用于为任何元素设置动画。

我从不需要传递参数的简单动画开始，它似乎工作正常。这是代码和[链接](http://jsfiddle.net/5v86F/7/)

```
<div id="outer" class="box">
    <div id="inner" class="box"></div>
</div>
<input type="button" id="animate" value="Animate"/>​     
​$("#inner").animate({left: '+=300', top: '+=300'}, 1000);​ 
```

但是当我尝试编写通用函数时它不起作用......[代码](http://jsfiddle.net/5v86F/18/)

```
$("#animate").Click(function(){
    diagonalAnimation("inner");
});

function diagonalAnimation(e){
$('"#'+e+'"').animate({left: '+=300', top: '+=300'}, 1000);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:48:37.057

jsFiddle（[http://jsfiddle.net/5v86F/81/](http://jsfiddle.net/5v86F/81/)）

```
<div id="outer" class="box">
    <div id="inner" class="box"></div>
</div>

<input type="button" id="animate" value="Animate" onclick="animate('inner')"/>

<script>
    function animate( item )
    {
         $( "#" + item ).animate({left: '+=300', top: '+=300'}, 1000);
    }
</script> 
```

# php - 关于创建“查询生成器”的建议

> ID：10284690
> 
> 赞同：3
> 
> 时间：2012-04-23T16:43:21.707
> 
> 标签：php, sql, browser, builder

我管理的系统有许多来自项目、项目、阶段、部门等的实体。公司中的许多人都希望有自己的不同实体的自定义视图。到目前为止，我一直在自己创建自定义视图，但到了这样的地步，我的老板要求我制作一个查询器，以便每个员工都可以随时创建、保存和查看他们自己制作的查询。他们应该能够选择他们想要查看的主要数据，然后添加条件以及选择如何显示数据。

到目前为止，这是我在数据库表方面所拥有的：

**查询**

```
id
name
desc
isglobal (1 or 0 value, whether the query can be seen by everyone else)
creator (id of user in system)
created (datetime)
entity (this would be the table name or a key which maps to the table name)
template (a template of tags that will be parsed to generate the HTML for that query page) 
```

**查询条件**

```
id
queries_id
field
value 
```

例如，假设一个名叫 Mark 的人创建了一个查询/视图，它将显示所有以他为经理的“项目”。两个表中都会有一行如下所示：

**查询：**

```
1
All projects managed by Mark
Shows all projects in the system currently managed by Mark
1
6
2012-04-23 00:00:00
project 
```

**这就是将存储在 TEXT 类型的模板字段中的内容**

```
<!-- BEGIN: ROW -->
<tr>
<td>{PROJECT_NAME}</td>
<td>{PROJECT_DESCRIPTION}</td>
</tr>
<!-- END: ROW --> 
```

**查询条件：**

```
1
1 (this corresponds to the query id above)
manager
6 (this corresponds to Mark's user id in the system) 
```

对于简单的条件，我的数据库设计非常简单且易于管理。我已经在想象更高级的条件，您可能希望查看来自任意两位经理或三位经理的项目列表。我认为第二个表的当前设计仍然有效，我只会有一个额外的行，前三列的值相同，而“值”列的值不同。我可以在开始时进行 SQL 检查，看看我处理的是 1 条件还是 n 条件，其中我必须在 SQL 中使用 OR。

有两个问题我不确定如何最好地解决。

1.  “值”字段应该是什么类型。我在想 99% 的情况下，该值将是一个整数，但显然也有可能是日期或字符串。你会推荐什么数据类型？可能不是最好的，但我几乎在考虑可以序列化和反序列化的 BLOB。使用 BLOB，我可以在该字段中存储数组，这样我就不必像我提到的几行那样存储多行。

2.  另一件事是范围。如果他们想要在特定日期之间创建项目怎么办。或者，例如，列的值在 5-10 之间。我想知道这是否可以通过一个名为“max_value”的额外列来处理。如果此列不为 NULL，那么我们假设它是一个范围，“值”将是 min_value。

3.  关于模板字段的任何建议。我将使它成为一个 TEXT 字段，该字段仅针对该自定义查询返回的每行数据进行解析。

我认为向您展示我正在使用的 XML 文件会很有用。我的老板不希望为创建这些自定义查询而显示表的所有字段，因此我们使用以下 XML 数据来过滤哪些字段是“允许的”。

```
<?xml version="1.0"?>
<entities>
    <entity>
        <key>program</key>
        <table>program</table>
        <label>Programs</label>
        <allowed>1</allowed>
        <fields>
            <field>
                <key>name</key>
                <column>prg_name</column>
                <label>Name</label>
                <tag>{PROGRAM_NAME}</tag>
                <method>getName</method>
                <allowed>0</allowed>
            </field>
            <field>
                <key>description</key>
                <column>prg_desc</column>
                <label>Description</label>
                <tag>{PROGRAM_DESCRIPTION}</tag>
                <method>getDesc</method>
                <allowed>0</allowed>
            </field>            
        </fields>
    </entity>
    <entity>
        <key>project</key>
        <table>product</table>
        <label>Projects</label>
        <allowed>1</allowed>
        <fields>
            <field>
                <key>name</key>
                <column>prd_name</column>
                <label>Name</label>
                <tag>{PROJECT_NAME}</tag>
                <method>getName</method>
                <allowed>0</allowed>
            </field>
            <field>
                <key>description</key>
                <column>prd_desc</column>
                <label>Description</label>
                <tag>{PROJECT_DESCRIPTION}</tag>
                <method>getDesc</method>
                <allowed>0</allowed>
            </field>
            <field>
                <key>manager</key>
                <column>prd_manager</column>
                <label>Manager</label>
                <tag>{PROJECT_MANAGER}</tag>
                <method>getManager</method>
                <allowed>1</allowed>
            </field>
            <field>
                <key>activity</key>
                <column>prd_activity</column>
                <label>Activity</label>
                <tag>{PROJECT_ACTIVITY}</tag>
                <method>getActivity</method>
                <allowed>1</allowed>
            </field>            
        </fields>
    </entity>   
</entities> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:52:49.400

如果我正在构建它，我会创建这样的查询：

“选择”然后有一个下拉表格。

然后一旦填充表，使用 information_schema.columns 查找该表中的所有列。

然后有一个列表框，您可以将列添加到其中，从而构建您的列列表。

最后添加第二个列表框以添加 where 列并允许用户键入相关数据（也就是添加 StartDate 和一个他们可以在其中键入日期的文本框）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T10:06:11.420

我们使用[EasyQuery](http://devtools.korzh.com/query-builder-component/)组件来完成此类任务。他们有现场演示，您可以免费试用： http: [//demo.easyquerybuilder.com/asp-net-ajax/](http://demo.easyquerybuilder.com/asp-net-ajax/)

# php - 在网络共享上创建本地 AMP 应用程序

> ID：10284691
> 
> 赞同：0
> 
> 时间：2012-04-23T16:43:21.893
> 
> 标签：php, mysql, apache, networking

我最近开始使用 Apache Web 服务器、MySQL 数据库服务器和 PHP 开发 Web 应用程序。我的工作是寻找一种廉价有效的方法来更新旧的拆分 Access 数据库，该数据库当前配置为后端驻留在网络共享上，前端分发给最终用户。

是否可以在网络驱动器上安装 AMP 堆栈并让位于不同位置的多个用户访问由 MySQL 服务器支持的 Apache Web 服务器上的 php 站点。最终用户是否可以简单地通过网络驱动器的 IP 地址访问该站点？

非常感谢任何反馈！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T03:19:17.090

我不确定如何将它安装在网络驱动器上，因为 apache 服务器需要作为服务运行并将其自身与端口 80 或您自定义的任何其他端口绑定。

我只能建议您可以在您的任何网络机器上安装 wamp [http://www.wampserver.com/en/](http://www.wampserver.com/en/)并从您的网络中本地访问它。

听起来很简单。

# regex - 无法获得正确的正则表达式模式以将属性更改为值设置器

> ID：10284692
> 
> 赞同：0
> 
> 时间：2012-04-23T16:43:23.653
> 
> 标签：regex, visual-studio-2010, properties, constructor

假设我有一些类似的对象，具有很多属性：

```
public class SomeObject
{
  public SomeOtherObject1 Property1 { get; set; }
  public SomeOtherObject2 Property2 { get; set; }
  public SomeOtherObject3 Property3 { get; set; }
  public SomeOtherObject4 Property4 { get; set; }
  public SomeOtherObject5 Property5 { get; set; }
  public SomeOtherObject6 Property6 { get; set; }
} 
```

如果我可以创建一个构造函数并将属性复制到构造函数中，那将是非常酷的......

```
public class SomeObject
{
  public SomeObject
  {
    public SomeOtherObject1 Property1 { get; set; }
    public SomeOtherObject2 Property2 { get; set; }
    public SomeOtherObject3 Property3 { get; set; }
    public SomeOtherObject4 Property4 { get; set; }
    public SomeOtherObject5 Property5 { get; set; }
    public SomeOtherObject6 Property6 { get; set; }
  }

  public SomeOtherObject1 Property1 { get; set; }
  public SomeOtherObject2 Property2 { get; set; }
  public SomeOtherObject3 Property3 { get; set; }
  public SomeOtherObject4 Property4 { get; set; }
  public SomeOtherObject5 Property5 { get; set; }
  public SomeOtherObject6 Property6 { get; set; }
} 
```

并使用[Visual Studio 的 Find And Replace with Regex](http://msdn.microsoft.com/en-us/library/2k3te2cs.aspx)将构造函数中突出显示的行从：

```
 public SomeOtherObject1 Property1 { get; set; }
    public SomeOtherObject2 Property2 { get; set; }
    public SomeOtherObject3 Property3 { get; set; }
    public SomeOtherObject4 Property4 { get; set; }
    public SomeOtherObject5 Property5 { get; set; }
    public SomeOtherObject6 Property6 { get; set; } 
```

至：

```
 this.Property1 = new SomeOtherObject1();
    this.Property2 = new SomeOtherObject2();
    this.Property3 = new SomeOtherObject3();
    this.Property4 = new SomeOtherObject4();
    this.Property5 = new SomeOtherObject5();
    this.Property6 = new SomeOtherObject6(); 
```

首先我试过：

> 公共\s{:i}\s{:i}\s{\sget;\sset;\s}
> 
> 这。\2 = 新 \1();

然后我想可能是线路问题，所以我尝试了：

> ^\s*public\s{:i}\s{:i}\s{\sget;\sset;\s}.$
> 
> 这。\2 = 新 \1();

其他人对如何使它起作用有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T16:49:14.490

您需要避开 get; 周围的 {} 放;。另外，我使用 :b 而不是 \s 并允许多个。这里：

```
public:b+{:i}:b+{:i}:b*\{:b*get;:b*set;:b*\} 
```

正如你所写：

```
this.\2 = new \1(); 
```

# c# - WF4：如何评估仅在运行时才知道的表达式？

> ID：10284703
> 
> 赞同：3
> 
> 时间：2012-04-23T16:43:59.890
> 
> 标签：c#, .net, workflow-foundation-4

我正在尝试创建一个简单的 WF4 活动，该活动接受包含 VB.NET 表达式（来自数据库）的字符串，使用工作流当前范围内可用的变量评估该字符串并返回结果。不幸的是，以我尝试过的方式，无论是普通的`Activity`还是成熟的`NativeActivity`，我一直在碰壁。

我的第一次尝试是使用一个简单的 Activity，并且我能够创建一个简单的类来评估给定某个对象作为其输入的表达式：

```
public class Eval<T, TResult> : Activity<TResult>
{
    [RequiredArgument]
    public InArgument<T> Value { get; set; }

    public Eval(string predicate)
    {
        this.Implementation = () => new Assign<TResult>
        {
            Value = new InArgument<TResult>(new VisualBasicValue<TResult>(predicate)),
            To = new ArgumentReference<TResult>("Result")
        };
    }

    public TResult EvalWith(T value)
    {
        return WorkflowInvoker.Invoke(this, new Dictionary<string, object>{ {"Value", value } });
    }
} 
```

这很好，以下表达式的计算结果为 7：

```
new Eval<int, int>("Value + 2").EvalWith(5) 
```

不幸的是，我不能以我想要的方式使用它，因为表达式字符串是作为构造函数参数而不是作为 给出的`InArgument<string>`，因此它不能轻易地合并（拖放）到工作流中。我的第二次尝试是尝试使用`NativeActivity`来摆脱那个讨厌的构造函数参数：

```
public class NativeEval<T, TResult> : NativeActivity<TResult>
{
    [RequiredArgument] public InArgument<string> ExpressionText { get; set; }
    [RequiredArgument] public InArgument<T> Value { get; set; }

    private Assign Assign { get; set; }
    private VisualBasicValue<TResult> Predicate { get; set; }
    private Variable<TResult> ResultVar { get; set; }

    protected override void CacheMetadata(NativeActivityMetadata metadata)
    {
        base.CacheMetadata(metadata);

        Predicate = new VisualBasicValue<TResult>();
        ResultVar = new Variable<TResult>("ResultVar");
        Assign = new Assign { To = new OutArgument<TResult>(ResultVar), Value = new InArgument<TResult>(Predicate) };

        metadata.AddVariable(ResultVar);
        metadata.AddChild(Assign);
    }

    protected override void Execute(NativeActivityContext context)
    {
        Predicate.ExpressionText = ExpressionText.Get(context);
        context.ScheduleActivity(Assign, new CompletionCallback(AssignComplete));
    }

    private void AssignComplete(NativeActivityContext context, ActivityInstance completedInstance)
    {
        Result.Set(context, ResultVar.Get(context));
    }
} 
```

我尝试`NativeEval`使用以下命令运行：

```
WorkflowInvoker.Invoke(new NativeEval<int, int>(), new Dictionary<string, object>
    { { "ExpressionText", "Value + 2" }, { "Value", 5 } }); 
```

但得到以下异常：

> 活动“1：NativeEval”无法访问此变量，因为它是在活动“1：NativeEval”的范围内声明的。一个活动只能访问它自己的实现变量。

所以我改为`metadata.AddVariable(ResultVar);`但`metadata.AddImplementationVariable(ResultVar);`后来我得到了一个不同的例外：

> 处理工作流树时遇到以下错误：'VariableReference'：引用的变量对象（名称 = 'ResultVar'）在此范围内不可见。在此范围内可能存在另一个具有相同名称的位置引用，但它不引用相同的位置。

我尝试`.ScheduleFunc()`按照[此处](https://msmvps.com/blogs/theproblemsolver/archive/2011/04/05/scheduling-child-activities-with-input-parameters.aspx)所述使用来安排`VisualBasicValue`活动，但它返回的结果始终是`null`（但奇怪的是没有引发异常）。

我难住了。WF4 的元编程模型似乎比 的元编程模型困难得多`System.Linq.Expressions`，尽管它很困难并且经常令人困惑（就像元编程通常一样），但至少我能够理解它。我想这是因为它需要表示一个可持久的、可恢复的、异步的、可重定位的程序，而不仅仅是一个普通的旧程序，这增加了复杂性。

* * *

**编辑：**由于我不认为我遇到的问题是由于我正在尝试评估未硬编码的表达式，因此可以对其进行以下更改`NativeActivity`，使其具有静态表达式：

代替

```
Predicate = new VisualBasicValue<TResult>(); 
```

和

```
Predicate = new VisualBasicValue<TResult>("ExpressionText.Length"); 
```

并删除线

```
Predicate.ExpressionText = ExpressionText.Get(context); 
```

现在即使使用这些行表达式是静态的，我仍然会遇到相同的错误。

* * *

**EDIT2**：[这篇文章](http://blogs.msdn.com/b/tilovell/archive/2010/02/26/misadventures-in-cachemetadata-wrapping-an-inner-activity-in-code.aspx)解决了我遇到的异常。我必须将变量和子活动都更改为“实现”，所以这是：

```
metadata.AddVariable(ResultVar);
metadata.AddChild(Assign); 
```

改为：

```
metadata.AddImplementationVariable(ResultVar);
metadata.AddImplementationChild(Assign); 
```

并导致所有异常消失。不幸的是，它显示以下行完全没有任何作用：

```
Predicate.ExpressionText = ExpressionText.Get(context); 
```

在运行时更改`ExpressionText`a 的属性`VisualBasicValue`无效。对 ILSpy 的快速检查揭示了原因 - 表达式文本仅在`CacheMetadata()`被调用时被评估并转换为表达式树，此时表达式尚不知道，这就是为什么我使用无参数构造函数将表达式初始化并具体化为无操作。我什至尝试保存`NativeActivityMetadata`我在自己的 CacheMetadata 覆盖方法中获得的对象，然后使用反射来强制调用`VisualBasicValue`'s `CacheMetadata()`，但这最终引发了一个不同的神秘异常（“Ambiguous match found.”类型为 AmbiguousMatchException）。

在这一点上，似乎不可能将动态表达式完全集成到工作流中，将所有范围内的变量都暴露给它。我想我会在课堂上使用我`Eval`的课堂上使用的方法`NativeEval`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T12:46:14.133

我最终使用了以下活动。它无法访问工作流的变量，而是接受单个参数“值”，该参数可由动态表达式中的相同名称使用。除此之外它工作得很好。

```
public class Evaluate<TIn, TOut> : NativeActivity<TOut>
{
    [RequiredArgument]
    public InArgument<string> ExpressionText { get; set; }

    [RequiredArgument]
    public InArgument<TIn> Value { get; set; }

    protected override void Execute(NativeActivityContext context)
    {
        var result = new ExpressionEvaluator<TIn, TOut>(ExpressionText.Get(context)).EvalWith(Value.Get(context));
        Result.Set(context, result);
    }
}

public class ExpressionEvaluator<TIn, TOut> : Activity<TOut>
{
    [RequiredArgument]
    public InArgument<TIn> Value { get; set; }

    public ExpressionEvaluator(string predicate)
    {
        VisualBasic.SetSettingsForImplementation(this, VbSettings);

        Implementation = () => new Assign<TOut>
        {
            Value = new InArgument<TOut>(new VisualBasicValue<TOut>(predicate)),
            To = new ArgumentReference<TOut>("Result")
        };
    }

    public TOut EvalWith(TIn value)
    {
        return WorkflowInvoker.Invoke(this, new Dictionary<string, object> { { "Value", value } });
    }

    private static readonly VisualBasicSettings VbSettings;

    static ExpressionEvaluator()
    {
        VbSettings = new VisualBasicSettings();
        AddImports(typeof(TIn), VbSettings.ImportReferences);
        AddImports(typeof(TOut), VbSettings.ImportReferences);
    }

    private static void AddImports(Type type, ISet<VisualBasicImportReference> imports)
    {
        if (type.IsPrimitive || type == typeof(void) || type.Namespace == "System")
            return;

        var wasAdded = imports.Add(new VisualBasicImportReference { Assembly = type.Assembly.GetName().Name, Import = type.Namespace });

        if (!wasAdded)
            return;

        if (type.BaseType != null)
            AddImports(type.BaseType, imports); 

        foreach (var interfaceType in type.GetInterfaces())
            AddImports(interfaceType, imports);

        foreach (var property in type.GetProperties())
            AddImports(property.PropertyType, imports);

        foreach (var method in type.GetMethods())
        {
            AddImports(method.ReturnType, imports);

            foreach (var parameter in method.GetParameters())
                AddImports(parameter.ParameterType, imports);

            if (method.IsGenericMethod)
            {
                foreach (var genericArgument in method.GetGenericArguments())
                    AddImports(genericArgument, imports);
            }
        }

        if (type.IsGenericType)
        {
            foreach (var genericArgument in type.GetGenericArguments())
                AddImports(genericArgument, imports);
        }
    }
} 
```

**编辑**：更新类以包括完整的程序集和命名空间导入，以免您收到可怕（且无用）的错误消息：

> 未声明“价值”。由于其保护级别，它可能无法访问。

此外，将 ExpressionEvaluator 类移到外部并将其公开，因此您可以在 WF 之外使用它，如下所示：

```
new ExpressionEvaluator<int, double>("Value * Math.PI").EvalWith(2); 
```

哪个会返回：

> 6.28318530717959

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:19:31.070

我建议为此使用不同的框架。一种好方法是使用 nCalc。[http://ncalc.codeplex.com/](http://ncalc.codeplex.com/)

它可以解析任何表达式并评估结果，包括静态或动态参数和自定义函数。

我们使用它在运行时评估不同类型的表达式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T23:30:04.323

如果您的“谓词”是众所周知的字符串，并且不需要是在运行时评估的表达式，那么您当然可以这样做，丢弃*InArgument*并避免构造函数：

```
public class Eval<T, TResult> : Activity<TResult>
{
    public string Expression { get; set; }

    [RequiredArgument]
    public InArgument<T> Value { get; set; }

    protected override Func<Activity> Implementation
    {
        get
        {
            if (string.IsNullOrEmpty(Expression))
            {
                return base.Implementation;
            }

            return () => new Assign<TResult>
            {
                Value = new InArgument<TResult>(new VisualBasicValue<TResult>(Expression)),
                To = new ArgumentReference<TResult>("Result")
            };
        }
        set
        {
            throw new NotSupportedException();
        }
    }
} 
```

并这样称呼它：

```
var activity = new Eval<int, int>() { Expression = "Value + 2" };

var inputArgs = new Dictionary<string, object>()
{
    { "Value", 5 }
};

Console.WriteLine("RESULT: " + WorkflowInvoker.Invoke<int>(activity, inputArgs)); 
```

* * *

**编辑**：检查即使`Predicate.ExpressionText`没有评论，它也没有任何效果：

```
public class NativeEval<T, TResult> : NativeActivity<TResult>
{
    [RequiredArgument]
    public InArgument<string> ExpressionText { get; set; }
    [RequiredArgument]
    public InArgument<T> Value { get; set; }

    private Assign Assign { get; set; }
    private VisualBasicValue<TResult> Predicate { get; set; }
    private Variable<TResult> ResultVar { get; set; }

    protected override void CacheMetadata(NativeActivityMetadata metadata)
    {
        base.CacheMetadata(metadata);

        Predicate = new VisualBasicValue<TResult>("ExpressionText.Length");
        ResultVar = new Variable<TResult>("ResultVar");
        Assign = new Assign { To = new OutArgument<TResult>(ResultVar), Value = new InArgument<TResult>(Predicate) };

        metadata.AddImplementationVariable(ResultVar);
        metadata.AddImplementationChild(Assign);
    }

    protected override void Execute(NativeActivityContext context)
    {
        // this line, commented or not, is the same!
        Predicate.ExpressionText = ExpressionText.Get(context);
        context.ScheduleActivity(Assign, new CompletionCallback(AssignComplete));
    }

    private void AssignComplete(NativeActivityContext context, ActivityInstance completedInstance)
    {
        // the result will always be the ExpressionText.Length 
        Result.Set(context, ResultVar.Get(context));
    }
} 
```

当您`Execute()`更改方法时，子实现无效。执行模式已打开，无法更改子树。

# android - Android从图像列表制作动画视频

> ID：10284708
> 
> 赞同：6
> 
> 时间：2012-04-23T16:44:29.180
> 
> 标签：android, android-animation, video-processing, android-image

我想通过在两个图像之间应用过渡动画来从图像列表中制作动画视频。我在 SO 上发现了很多类似的问题，

[Android 屏幕捕获或从图像制作视频](https://stackoverflow.com/questions/9091794/android-screen-capturing-or-make-video-from-images)

[Android-如何使用 sd 卡中的一组图像制作视频？](https://stackoverflow.com/questions/8471212/android-how-to-make-video-using-set-of-images-from-sd-card)

所有类似的 SO 问题都建议为此使用动画，但是我们如何将动画图像存储到视频文件中？是否有任何 Android 库支持此功能来制作图像视频？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-12-10T09:56:07.097

Android 不支持 AWT 的 BufferedBitmap 也不支持 AWTUtil，即用于 Java SE。目前，带有 SequenceEncoder 的解决方案已经集成到 jcodec 的 Android 版本中。您可以从包 org.jcodec.api.SequenceEncoder 中使用它。

这是使用 jcodec 从一系列位图生成 MP4 文件的解决方案：

```
try {
    File file = this.GetSDPathToFile("", "output.mp4");
    SequenceEncoder encoder = new SequenceEncoder(file);

    // only 5 frames in total
    for (int i = 1; i <= 5; i++) {
        // getting bitmap from drawable path
        int bitmapResId = this.getResources().getIdentifier("image" + i, "drawable", this.getPackageName());
        Bitmap bitmap = this.getBitmapFromResources(this.getResources(), bitmapResId);
        encoder.encodeNativeFrame(this.fromBitmap(bitmap));
    }
    encoder.finish();
} catch (IOException e) {
    e.printStackTrace();
}

// get full SD path
File GetSDPathToFile(String filePatho, String fileName) {
    File extBaseDir = Environment.getExternalStorageDirectory();
    if (filePatho == null || filePatho.length() == 0 || filePatho.charAt(0) != '/')
        filePatho = "/" + filePatho;
    makeDirectory(filePatho);
    File file = new File(extBaseDir.getAbsoluteFile() + filePatho);
    return new File(file.getAbsolutePath() + "/" + fileName);// file;
}

// convert from Bitmap to Picture (jcodec native structure)
public Picture fromBitmap(Bitmap src) {
    Picture dst = Picture.create((int)src.getWidth(), (int)src.getHeight(), ColorSpace.RGB);
    fromBitmap(src, dst);
    return dst;
}

public void fromBitmap(Bitmap src, Picture dst) {
    int[] dstData = dst.getPlaneData(0);
    int[] packed = new int[src.getWidth() * src.getHeight()];

    src.getPixels(packed, 0, src.getWidth(), 0, 0, src.getWidth(), src.getHeight());

    for (int i = 0, srcOff = 0, dstOff = 0; i < src.getHeight(); i++) {
        for (int j = 0; j < src.getWidth(); j++, srcOff++, dstOff += 3) {
            int rgb = packed[srcOff];
            dstData[dstOff]     = (rgb >> 16) & 0xff;
            dstData[dstOff + 1] = (rgb >> 8) & 0xff;
            dstData[dstOff + 2] = rgb & 0xff;
        }
    }
} 
```

如果您需要更改 fps，您可以自定义 SequenceEncoder。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-13T17:20:52.013

您可以使用名为 JCodec ( [http://jcodec.org](http://jcodec.org) ) 的纯 Java 解决方案。这是一个使用 JCodec 低级 API 的**CORRECTED简单类：**

```
public class SequenceEncoder {
    private SeekableByteChannel ch;
    private Picture toEncode;
    private RgbToYuv420 transform;
    private H264Encoder encoder;
    private ArrayList<ByteBuffer> spsList;
    private ArrayList<ByteBuffer> ppsList;
    private CompressedTrack outTrack;
    private ByteBuffer _out;
    private int frameNo;
    private MP4Muxer muxer;

    public SequenceEncoder(File out) throws IOException {
        this.ch = NIOUtils.writableFileChannel(out);

        // Transform to convert between RGB and YUV
        transform = new RgbToYuv420(0, 0);

        // Muxer that will store the encoded frames
        muxer = new MP4Muxer(ch, Brand.MP4);

        // Add video track to muxer
        outTrack = muxer.addTrackForCompressed(TrackType.VIDEO, 25);

        // Allocate a buffer big enough to hold output frames
        _out = ByteBuffer.allocate(1920 * 1080 * 6);

        // Create an instance of encoder
        encoder = new H264Encoder();

        // Encoder extra data ( SPS, PPS ) to be stored in a special place of
        // MP4
        spsList = new ArrayList<ByteBuffer>();
        ppsList = new ArrayList<ByteBuffer>();

    }

    public void encodeImage(BufferedImage bi) throws IOException {
        if (toEncode == null) {
            toEncode = Picture.create(bi.getWidth(), bi.getHeight(), ColorSpace.YUV420);
        }

        // Perform conversion
        for (int i = 0; i < 3; i++)
            Arrays.fill(toEncode.getData()[i], 0);
        transform.transform(AWTUtil.fromBufferedImage(bi), toEncode);

        // Encode image into H.264 frame, the result is stored in '_out' buffer
        _out.clear();
        ByteBuffer result = encoder.encodeFrame(_out, toEncode);

        // Based on the frame above form correct MP4 packet
        spsList.clear();
        ppsList.clear();
        H264Utils.encodeMOVPacket(result, spsList, ppsList);

        // Add packet to video track
        outTrack.addFrame(new MP4Packet(result, frameNo, 25, 1, frameNo, true, null, frameNo, 0));

        frameNo++;
    }

    public void finish() throws IOException {
        // Push saved SPS/PPS to a special storage in MP4
        outTrack.addSampleEntry(H264Utils.createMOVSampleEntry(spsList, ppsList));

        // Write MP4 header and finalize recording
        muxer.writeHeader();
        NIOUtils.closeQuietly(ch);
    }

    public static void main(String[] args) throws IOException {
        SequenceEncoder encoder = new SequenceEncoder(new File("video.mp4"));
        for (int i = 1; i < 100; i++) {
            BufferedImage bi = ImageIO.read(new File(String.format("folder/img%08d.png", i)));
            encoder.encodeImage(bi);
        }
        encoder.finish();
    }
} 
```

# android - APK 扩展文件下载异常

> ID：10284713
> 
> 赞同：0
> 
> 时间：2012-04-23T16:44:55.630
> 
> 标签：android, eclipse, apk, expansion-files

[我最近在我的应用程序中实现了http://developer.android.com/guide/market/expansion-files.html](http://developer.android.com/guide/market/expansion-files.html)中描述的 APK 扩展文件代码 。我更新了清单，创建了服务和接收器文件，并更新了我的主要活动 onCreate() 以符合指南中的说明。

我为我的应用创建了一个签名的 apk，并将其与 obb 文件一起上传到我的 Google Play 帐户。这些被保存为“草稿”。

然后我使用 adb 将我签名的 APK 安装到我的设备上并运行它并立即得到以下异常：

* * *

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.myapp/com.example.myapp.MyApp}:
android.database.sqlite.SQLiteException: no such table: 
MetadataColumns: , while compiling: SELECT APKVERSION,_id,DOWNLOADSTATUS,DOWNLOADFLAGS FROM MetadataColumns LIMIT 1
  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java: 1821)
  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java: 1842)
  at android.app.ActivityThread.access$1500(ActivityThread.java: 132)
  at android.app.ActivityThread $H.handleMessage(ActivityThread.java:1038)
  at android.os.Handler.dispatchMessage(Handler.java:99)
  at android.os.Looper.loop(Looper.java:150)
  at android.app.ActivityThread.main(ActivityThread.java:4263)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:507)
  at com.android.internal.os.ZygoteInit $MethodAndArgsCaller.run(ZygoteInit.java:839)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
  at dalvik.system.NativeStart.main(Native Method)
Caused by: android.database.sqlite.SQLiteException: no such table:
MetadataColumns: , while compiling: SELECT APKVERSION,_id,DOWNLOADSTATUS,DOWNLOADFLAGS FROM MetadataColumns LIMIT 1
  at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
  at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java: 92)
  at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java: 65)
  at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83) 
  at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java: 49)
  at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java: 53)
  at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java: 1438)
  at android.database.sqlite.SQLiteDatabase.rawQuery(SQLiteDatabase.java: 1406)
  at com.google.android.vending.expansion.downloader.impl.t.<init>(SourceFile: 76)
  at com.google.android.vending.expansion.downloader.impl.t.a(SourceFile: 44)
  at com.google.android.vending.expansion.downloader.impl.DownloaderService.a(SourceFile: 634) 
```

* * *

有趣的是，如果我通过 Eclipse 调试器运行我的应用程序，我可以执行导致异常的代码，并继续正常处理，收到一条消息“下载失败，因为您可能没有购买此应用程序”。

知道为什么在签名版本上，下载器库中存在 SQLite 异常，特别是 DownloadsDB.java？

我的项目构建目标是 2.3.3

我有我的项目引用的 Google Play 许可证、下载器和 Zip 库

我的清单中有以下内容：

```
<uses-sdk android:minSdkVersion="4" android:targetSdkVersion="15" /    
<uses-permission android:name="com.android.vending.CHECK_LICENSE" /
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<service android:name=".MyAppDownloaderService" />
<receiver android:name=".MyAppAlarmReceiver" /> 
```

TIA,

jb

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:12:34.640

我没有得到完全相同的异常，但这可能是你的问题：

[http://code.google.com/p/android/issues/detail?id=31663](http://code.google.com/p/android/issues/detail?id=31663)

DownloadsDB.java 中的代码有点草率，出现以下情况：

```
if (null != cur && cur.moveToFirst()) { ... } 
```

必须改为：

```
if (null != cur) { if (cur.moveToFirst()) { ... } } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-07T06:18:05.120

是的，但现在方法已经改变了一点。每个应用程序都有密钥，

这个错误基本上有几个原因，请确保：

您已从您的测试帐户登录到您的设备。您的代码中的密钥也相同。您已经在代码中正确地提到了扩展文件的大小（以字节为单位）。上传后等待3-4小时，然后它会开始下载，立即它不工作。

# r - ggplot 图例在顶部但在标题下方？

> ID：10284717
> 
> 赞同：11
> 
> 时间：2012-04-23T16:45:09.113
> 
> 标签：r, ggplot2

有没有办法让 ggplot 将图例放在顶部但在标题下方？

举个例子...

![在此处输入图像描述](../Images/61a585dbafd13423ab446509e49f272e.png)

..使用以下代码生成：

```
carrots<-list(Yield=c(345,226,74,559,288,194), 
              Field=c("A","B","C","D","E","F"), 
              Breed=rep(c("Long","Short"),each=3)) 
carrots<-data.frame(carrots) 

ggplot(carrots,aes(y=Yield,x=Field,fill=Breed)) + 
  geom_bar() + 
  opts(title="Title",
       legend.direction = "horizontal", 
       legend.position = "top") + 
         labs(fill="") 
```

任何建议将不胜感激？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T21:49:27.983

**编辑** 忽略这个。问题不再是问题。但是代码已经更新，因此它不再抛出错误。

在等待下一个版本的同时，您可以在 ggplot2 中进行微调。例如：

```
ggplot(carrots, aes(y = Yield, x = Field, fill = Breed)) + 
  geom_bar(stat = "identity") + 
  theme(
     plot.margin = unit(c(2, 1, 1, 1), "cm"), 
     plot.title = element_text(size = 30, face = "bold", colour = "blue", vjust = 7), 
     legend.direction = "horizontal",
     legend.position = c(0.1, 1.05)) + 
   ggtitle("Title") +
  labs(fill = "") 
```

# .net - Log4net 信息未写入日志文件

> ID：10284718
> 
> 赞同：0
> 
> 时间：2012-04-23T16:45:10.333
> 
> 标签：.net, log4net

```
<configuration>
    <!-- Register the section handler for the log4net section -->
    <configSections>
        <section name="log4net" type="log4net.Config.Log4NetConfigurationSectionHandler,log4net"/>
    </configSections>
    <!-- This section contains the log4net configuration settings -->
    <log4net debug="true">
        <!-- Define the default appender -->
        <appender name="PowerFAIDSLogger" type="log4net.Appender.RollingFileAppender,log4net">
      <file type="log4net.Util.PatternString" value="%env{ALLUSERSPROFILE}\Company Name\App Name\data_integration.log"/>
            <param name="AppendToFile" value="true"/>
            <param name="RollingStyle" value="Size"/>
            <param name="MaxSizeRollBackups" value="10"/>
            <param name="MaximumFileSize" value="512KB"/>
            <param name="StaticLogFileName" value="true"/>
            <layout type="log4net.Layout.PatternLayout,log4net">
                <param name="ConversionPattern" value="{%d{MMM-dd-yyyy} ~ %t} %10r %-5p [%x] &lt;%X{diagnostic}&gt; - %m%n"/>
            </layout>
        </appender>
        <appender name="PerformanceLogger" type="log4net.Appender.RollingFileAppender,log4net">
      <file type="log4net.Util.PatternString" value="%env{ALLUSERSPROFILE}\Company Name\App Name\performance.log"/>
            <param name="AppendToFile" value="true"/>
            <param name="RollingStyle" value="Size"/>
            <param name="MaxSizeRollBackups" value="10"/>
            <param name="MaximumFileSize" value="512KB"/>
            <param name="StaticLogFileName" value="true"/>
            <layout type="log4net.Layout.PatternLayout,log4net">
                <param name="ConversionPattern" value="{%d{MMM-dd-yyyy} ~ %t} %10r %-5p [%x] &lt;%X{DR} %X{NA}&gt; - %m%n"/>
            </layout>
        </appender>
    <appender name="TransactionLogger" type="log4net.Appender.RollingFileAppender,log4net">
      <file type="log4net.Util.PatternString" value="%env{ALLUSERSPROFILE}\Company Name\App Name\data_integrationTransaction.log"/>
      <param name="AppendToFile" value="true"/>
      <param name="RollingStyle" value="Size"/>
      <param name="MaxSizeRollBackups" value="10"/>
      <param name="MaximumFileSize" value="512KB"/>
      <param name="StaticLogFileName" value="true"/>
      <layout type="log4net.Layout.PatternLayout,log4net">
        <param name="ConversionPattern" value="{%d{MMM-dd-yyyy} ~ %t} %10r %-5p [%x] &lt;%X{DR} %X{NA}&gt; - %m%n"/>
      </layout>
    </appender>
        <!-- Define the email appender -->
        <appender name="SMTPAppender" type="log4net.Appender.SMTPAppender">
            <param name="To" value="someone@abc.com"/>
            <param name="From" value="jdf@CompanyName.org"/>
            <param name="Subject" value="App Name Error Message"/>
            <param name="SMTPHost" value="ecogsdf.CompanyName.local"/>
            <param name="LocationInfo" value="false"/>
            <param name="BufferSize" value="512"/>
            <param name="Lossy" value="true"/>
            <evaluator type="log4net.spi.LevelEvaluator">
                <param name="Threshold" value="WARN"/>
     </evaluator>
            <layout type="log4net.Layout.PatternLayout">
                <param name="ConversionPattern" value="%d [%t] %-5p %c [%x] &lt;%X{auth}&gt; - %m%n"/>
            </layout>
        </appender>
   <!-- Setup the loggers, add the appenders and set the default priority   -->
    <logger name="PerformanceLogger">
            <priority value="ALL"/>
            <appender-ref ref="PerformanceLogger"/>
        </logger>
        <logger name="App NameLogger">
            <priority value="WARN"/>
            <appender-ref ref="App NameLogger"/>
        </logger>
         <logger name="TransactionLogger">
                <level value="INFO" />
                <appender-ref ref="TransactionLogger"/>
            </logger>
   </log4net>
</configuration> 
```

' CODE New Logger().Info("写一些信息")

当我调用上面的代码时，它不会将任何输出写入 data_integrationTransaction.log 文件。但是 New Logger().Error("Write some error") 工作正常。

我感谢您的支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:31:26.653

获取记录器的推荐方法如下所示[，](http://logging.apache.org/log4net/release/sdk/index.html)而不是您拥有的。我会在 log4net 文档之后再试一次。ILog log = LogManager.GetLogger("application-log");

```
log.Info("Application Start");
log.Debug("This is a debug message");

if (log.IsDebugEnabled)
{
    log.Debug("This is another debug message");
} 
```

您可能还想设置一个`<root>`元素来阐明附加程序的默认级别。

# java - 链接库项目时找不到活动？

> ID：10284720
> 
> 赞同：0
> 
> 时间：2012-04-23T16:45:26.107
> 
> 标签：java, android, android-manifest

我有一个一起使用的 Android 应用程序和一个库项目。我在使用库项目的组件时没有任何问题。但是，我无法在我的应用程序中启动任何活动。我不断收到 ClassNotFound 异常，但完全限定名称与错误消息中的完全匹配，因为它在源代码树中。所有活动都在清单中正确定义。什么会导致我能够从库项目启动任何活动，但不能在主应用程序内启动活动？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:46:25.887

只需将库项目的活动添加到您的清单文件中。

实际上，一些 jar/library 文件会在内部启动活动，并且必须将其添加到我们的应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T20:15:23.607

问题最终出现在我尝试启动任何扩展 MapActivity 的活动时。我认为问题在于我在 Google maps api 的两个清单中都定义了 uses-library。我将库项目的构建目标更改为 vanilla Android，并删除了使用库调用。我的主要项目现在以 Google api 为目标，并在其清单中包含使用库。

我认为它可能已经搞砸了构建路径或其他东西，并且找不到 MapActivity 类或其他东西。不太确定，但这些步骤解决了问题。

# .net - 异常处理 ASP.NET MVC Web API

> ID：10284727
> 
> 赞同：11
> 
> 时间：2012-04-23T16:45:56.830
> 
> 标签：.net, asp.net-mvc, iis-7, asp.net-web-api

首先，是的，我们已经创建并正在使用从 ExceptionFilterAttribute 继承的异常过滤器。它在我们的身份过滤器之后立即在应用程序启动时的配置中注册，并且如果我们的 API 内部某处发生错误，它几乎可以正常工作。

话虽如此，我正在寻找一种方法来处理在到达 API 之前发生的错误。

**推理：**我们永远不想返回 YSOD 和/或 IIS HTML 错误。我们总是希望点击自定义异常过滤器/处理程序，以便我们可以正确处理日志记录并向用户返回 JSON 响应。

截至目前，使用 Fiddler 发出请求，我可以附加到 w3wp.exe 进程并查看请求命中 global.asax 中的 Application_BeginRequest 方法。之后，它只返回一个 500 响应。它永远不会因异常而中断代码，也不会在此之后达到我的任何断点。它似乎正在返回一个 IIS 错误。我们绝不希望这种情况发生。我们需要能够捕获所有这些“低级”异常，记录它们，并返回一些对用户有意义的东西。

之前我们可以做些什么来处理错误，似乎是什么击中了 ASP.NET MVC Web API 代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T13:30:27.977

尽管我喜欢 Darin 的回答，但它在我们的案例中不起作用，因为 ASP.NET MVC Web API 框架在内部抑制/处理异常，而不是重新抛出以命中 Global.asax 中的 Application_Error 方法。我们的解决方案是这样的。

我最终创建了一个自定义 DelegatingHandler ，如下所示：

```
public class PrincipalHandler : DelegatingHandler
{
    protected const string PrincipalKey = "MS_UserPrincipal";
    protected override Task<HttpResponseMessage> SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
    {
        setAnonymousPrincipal();

        request = InitializeIdentity(request);

        return base.SendAsync(request, cancellationToken)
            .ContinueWith(r =>
                              {
                                  // inspect result for status code and handle accordingly
                                  return r.Result;
                              });
    }
} 
```

然后我将它插入到 HttpConfiguration 中以确保它是第一个/最后一个被命中的处理程序。处理程序在 Web API 中的工作方式是分层的。因此，每个请求要命中的第一个处理程序将是响应命中的最后一个处理程序。至少这是我的理解，如果我错了，请随时纠正我。

```
public static void ConfigureApis(HttpConfiguration config)
{
    config.MessageHandlers.Insert(0, new PrincipalHandler());
} 
```

通过使用这种方法，我们现在可以检查从 Web API 和控制器的任何响应中返回的每个结果。这使我们能够处理由于某些内容未按预期返回而可能需要发生的任何日志记录。我们现在还可以更改返回的响应内容，以便 IIS 在看到某些 HTTP 状态代码时不会插入任何默认的 HTML 错误页面。

我唯一遇到的问题是，我希望他们在即将发布的 Web API 版本中对其进行更改，即他们没有在从 base.SendAsync() 返回的任务上发送异常备份。所以我们唯一需要通过的信息就是HTTP状态码，并尽力给消费者一个合理或可能的答案。

# mysql - 这个简单的查询是什么意思？

> ID：10284732
> 
> 赞同：2
> 
> 时间：2012-04-23T16:46:20.853
> 
> 标签：mysql

我正在查看以下物化视图

```
CREATE MATERIALIZED VIEW ShipStats AS
SELECT country, AVG(displacement), COUNT(*)
FROM classes, ships
WHERE classes.class = ships.name
GROUP BY country; 
```

并试图弄清楚它的 SELECT [] 部分在做什么。

我了解选择国家。AVG(displacement) 是位移列的平均值。但是 COUNT(*) 在做什么。此外，AVG 排水量与单艘船的统计数据有什么关系？

关系：

```
Classes(class, type, country, numGuns, bore, displacement)
Ships(name, class, launched) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:49:38.763

`count(*)`只返回每组的行数。

由于该`group by`语句，同一国家/地区的所有行都合并为一行。`count(*)`返回进入一个这样的组的行数，而是该组中所有行`AVG(displacement)`的平均值。`displacement`

所以排水量不是针对单艘船，而是针对一组船。

如果只有一行进入这样的组，则`count`返回 1 并`average`返回该行的位移值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:49:58.347

它正在选择国家、在该国家注册的船舶的平均排水量以及在该国家注册的船舶数量（至少假设列名与实际情况相符）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T16:52:09.507

Count(*) 给出每个国家的行数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T16:52:00.277

它正在计算组中的项目数。但是，我相信它还包括 NULL 值和重复项。

# c# - 读取和写入文件

> ID：10284740
> 
> 赞同：2
> 
> 时间：2012-04-23T16:46:50.807
> 
> 标签：c#

我有几个问题。是的，这是家庭作业，我只是想理解它。

这是被问到的。

> • 单击“加载”按钮时，读取文本框中指定的文件（txtFilePath：绝对路径不是相对路径）并将在其中找到的对象添加到列表框
> 
> • 当用户单击“保存”按钮时，将所选记录写入 txtFilePath 中指定的文件（绝对路径不是相对路径），而不截断当前里面的值

有人可以向我解释一下，因为我还在学习这个。我在那里有按钮和文本框，保存时也是如此。现在使用保存按钮，如果您只想保存它，我将拥有与您相同的代码。但是从我收集的信息来看，有一个数据库，因此您可以加载您保存的文件。还是我让这比现在更难？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:49:13.910

不，没有数据库。在这些说明中，`record`==`some selected item`需要*附加*到现有文件中。只需使用流和写入器将文件保存到磁盘即可满足要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:52:46.493

不，没有数据库。您所做的是与 Windows 文件系统（例如，硬盘驱动器上的文件）进行交互。您使用`System.IO`命名空间中的类来加载和保存文件。

“绝对路径”是指驱动器中文件的唯一位置，以根表达式表示；“相对路径”是指向相对于给定位置的文件的部分路径：

```
c:\foo\bar\baz\my files\homework.txt
..\..\homework.txt 
```

这些是绝对路径和相对路径。

我不确定您在这里寻找多少细节，很难完整概述文件系统的工作方式。您可能想查看 MSDN 中处理文件管理的基本示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T16:53:55.710

首先阅读如何读取和写入文件。这是我找到的一个很好的链接：

[一探究竟](http://www.csharp-station.com/HowTo/ReadWriteTextFile.aspx)

接下来您要做的是将您的读/写代码放入每个按钮的 Button_Click 事件中（双击您的按钮以自动创建此事件，假设您使用 Visual Studio）

您可以通过访问文本框的 .text() 属性轻松地从文本框中检索路径

```
string path = myTextBox.Text; 
```

自从我用 c# 编写任何东西以来已经有一段时间了，但这是非常基本的，我认为它应该会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T17:18:00.257

**对于负载：**

1.  逐行[读取文件](http://msdn.microsoft.com/en-us/library/94223t4d.aspx)
2.  [将](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.objectcollection.add.aspx)每一行添加到 ListBox 项

**保存：**

1.  [打开](http://msdn.microsoft.com/en-us/library/3zc0w663.aspx)您的保存文件而不截断（即附加到文件）
2.  [对于 ListBox Items 中的每个](http://msdn.microsoft.com/en-us/library/ttw7t8t6%28v=VS.80%29.aspx)项目，将其写入保存文件

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T16:55:27.177

很难对这个主题进行详细分析，因为它是一个相当广泛的话题。

对于文件交互，您必须使用 System.IO 命名空间，该命名空间具有轻松加载和保存文件的类。

[http://msdn.microsoft.com/en-us/library/system.io.aspx](http://msdn.microsoft.com/en-us/library/system.io.aspx)

上面的链接是 MSDN 上关于如何开始使用 System.IO 进行文件管理的一个很好的参考。

祝你好运！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-23T16:55:33.633

如果我对您的理解正确，您的问题是您是否需要在保存之前再次读取文件，或者以其他方式处理是否与创建新文件不同。

我会说“不”。您已经将文件的内容读入列表框中。您只需要从列表框中获取已编辑的内容（当用户完成后）并将其保存到文件中（覆盖那里的任何内容）。

# javascript - 可靠地呈现在网页上加载时打开打印对话框的 PDF

> ID：10284743
> 
> 赞同：3
> 
> 时间：2012-04-23T16:47:08.077
> 
> 标签：javascript, internet-explorer, pdf

我有一个网页 (SSL)，其中包含一个几乎不可见的 iframe，其源是从 Java servlet 流式传输的 PDF。几乎不可见的 iframe 的目的是呈现 PDF，当页面加载时，它会立即打开一个打印对话框。

这个过程以零星的方式进行。通常，当页面加载时，PDF 打印对话框会正确出现。但是，有时，PDF 打印对话框在页面加载时永远不会呈现。我知道这在 Java servlet 中不是问题，因为我可以从日志中验证 PDF 是否正确流式传输到调用页面。如果 PDF 打印对话框在页面加载时始终打开，我需要找到一种方法使其 99.9999........% 可靠。因此，我正在寻找有关如何确保这会发生的任何提示。

这需要适用于 Internet Explorer（特别是版本 8）。

这是打开包含 PDF iframe 的页面的 JavaScript：

```
function openPrintCheckWindow(){
    pc=window.open("/print_check.jsp", "pc", "toolbar=no,scrollbars=no,resizable=no");
    pc.resizeTo(1000,700);
    pc.moveTo(80,80);
} 
```

这是包含 PDF iframe 的页面的源代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
    <TITLE></TITLE>

    <style> 
    #createpdf {
        position:absolute;
        top:0; 
        right:0; 
    }
    .micr {
        font-family: "MICR Encoding", sans-serif;
        font-size: 0.2in;
    }
    </style>

    <script type="text/javascript"> 
    function doAlert(msg){
    if(msg.length>0){
        alert(msg);
    }
    }

    //doesn't block the load event
    function createIframe(){
        var i = document.createElement("iframe");
        i.src = "/PrintCheckServlet";
        i.width = "2px";
        i.height = "2px";
        document.getElementById("createpdf").appendChild(i);
    };

    // Check for browser support of event handling capability
    if (window.addEventListener)
        window.addEventListener("load", createIframe, false);
    else if (window.attachEvent)
        window.attachEvent("onload", createIframe);
    else 
        window.onload = createIframe;
    </script>

</HEAD>

<BODY BGCOLOR="#DFD9D0" TEXT="#000066" onLoad="doAlert('')">
    <FORM METHOD="POST" TARGET="main_window" ACTION="ControllerServlet">            
    <P ALIGN="LEFT">
        <INPUT TYPE="BUTTON" NAME="CLOSE" VALUE="Close" 
         onClick="this.form.submit();window.close();window.opener.focus();window=null;">
        <br />
        <H3 id="print_message">A print dialog box will show momentarily</H3>
    </P>
    <div id="createpdf"></div>
    </FORM>
</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-23T17:03:22.130

您是否可以假设正在查看您的文件的人正在使用 Acrobat Reader 或其他“启用 javascript”的 PDF 阅读器？

如果是这种情况，您可以修改您的文件并[生成一个自动打印的 PDF。](https://stackoverflow.com/questions/6167995/generate-a-pdf-that-automatically-prints)

# vba - 基于数组高亮excel单元格的代码

> ID：10284744
> 
> 赞同：1
> 
> 时间：2012-04-23T16:47:11.353
> 
> 标签：vba, excel

有人可以帮我弄清楚如何修改它，以便搜索和突出显示关键字来自不同工作表中的范围，例如 Sheets("DATASHEET").Range("B3:B41")？

```
Sub Highlight_Keywords() 

Dim vntWords As Variant 
Dim lngIndex As Long 
Dim rngFind As Range 
Dim strFirstAddress As String 
Dim lngPos As Long 

vntWords = Array("sales", "fms", "siebel", "knowledgeview", "bcs", "sap", "icm", "deal hub", "its", "stg", "ssm", "gbs", "presentation central", "tsm", "methodweb", "isc", "iot", "wwgpe", "crm", "salesone", "knac", "igs", "marketing", "edvisor", "partnerworld", _ 
"golden circle", "gs method", "knowledge view", "stsm", "smb", "spc", "passport advantage", "references", "global business services", "sales one", "igf", "market intelligence", "ibv", "itsm", "presentation", _ 
"bcs marketplace", "isv", "method web", "knowledgegate", "system sales", "field management system", "crm siebel", "global technology services", "issc", "techline", "gsar", "finance", "global services", "ontarget", "ssi", "bcrs", "sales productivity center", _ 
"fastpass", "gs risk", "ica", "referral", "delivery excellence", "isca", "powerpoint template", "sage", "icm assetweb", "ibm global services", "customer references", "presentation template", "sales portal", "business intelligence", "7 keys", "method", "systems sales", _ 
"what makes you special", "stg stsm 2006", "reference", "salary letter", "sales plan", "gbsc", "global services method", "gsmethod", "sales compass", "attach connector", "seven keys", "value creation", "fss", "gsm", "know your industry", "public sector") 

With ActiveSheet.UsedRange 
    For lngIndex = LBound(vntWords) To UBound(vntWords) 
        Set rngFind = .Find(vntWords(lngIndex), LookIn:=xlValues, LookAt:=xlPart) 
        If Not rngFind Is Nothing Then 
            strFirstAddress = rngFind.Address 
            Do 
                lngPos = 0 
                Do 
                    lngPos = InStr(lngPos + 1, rngFind.Value, vntWords(lngIndex), vbTextCompare) 
                    If lngPos > 0 Then 
                        With rngFind.Characters(lngPos, Len(vntWords(lngIndex))) 
                            .Font.Bold = True 
                            .Font.Size = .Font.Size + 2 
                            .Font.ColorIndex = 3 
                        End With 
                    End If 
                Loop While lngPos > 0 
                Set rngFind = .FindNext(rngFind) 
            Loop While rngFind.Address <> strFirstAddress 
        End If 
    Next 
End With 
End Sub 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:34:26.923

```
vntWords =  Sheets("DATASHEET").Range("B3:B41").Value
...
For x=lbound(vntWords,1) to ubound(vntWords,1)
   'look for vntWords(x,1)
Next x 
```

# objective-c - NSRunAlertPanel 和超链接

> ID：10284745
> 
> 赞同：2
> 
> 时间：2012-04-23T16:47:14.050
> 
> 标签：objective-c, xcode, cocoa, core-foundation, nsrunalertpanel

`NSRunAlertPanel`是否可以使用标准的苹果工具将超链接插入到消息文本中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T17:53:31.090

我认为这是不可能的，因为`NSAlert`面板中的消息只是一个字符串，或者换句话说只是简单的文本。如果它不仅仅是一个字符串，而是例如`NSMutableAttributedString`，那将是可能的。

所以我建议你在其中创建一个自定义面板、视图或窗口以及你的超链接。

# android - 如何在onCreate中检查相同活动的先前android进程已被杀死？

> ID：10284746
> 
> 赞同：2
> 
> 时间：2012-04-23T16:47:14.557
> 
> 标签：android

我有一个活动，在其 onCreate 方法中调用了一个 Init 函数（该函数调用了一些涉及大量内容的本机代码并调用了 openSLES 音频 api）。关键是这个 Init 函数在再次调用时使应用程序崩溃，这发生在屏幕旋转或当我使用后退按钮关闭活动并再次启动它时（但如果同时进程被终止，我没有麻烦）。我无法更改 Init 函数的行为。

我看到当活动被破坏时进程没有被杀死，我在阅读文档后预料到了这一点，这是一件好事，因为 - 如果有一些音频信号正在播放 - 在活动被破坏后继续播放，这是有利于我的目的。

我尝试使用 onSaveInstanceState 检查初始化状态，但这仅适用于屏幕旋转，即调用 onSaveInstanceState 时。当我按下后退按钮时，不会调用回调。

所以我尝试使用共享首选项，在 onPause 中执行状态保存。但此时我遇到了相反的问题：如果进程被终止，共享首选项值将被保留，但在这种情况下，我需要再次执行 Init 以使应用程序正常工作。

我想我需要一种方法来确定我的活动是否是在进程终止后创建的，但目前我不知道如何。我考虑过在 onPause 方法中使用 bundle 实例，但我不知道这如何以及是否可行。任何形式的提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:21:12.000

1.  您可以将进程的 pid 存储在共享首选项中。如果您在 YourActivity.onCreate 中将您当前的 pid 与存储的 pid 进行比较，您可以确定何时必须初始化 OpenSLES。
2.  您可以在应用程序派生类的 YourApplication.onCreate 中初始化 OpenSLES - 它只被调用一次。

**编辑：**

即声明以下类：

```
public class YourApplication extends Application {
  static private native synchronized void InitOpenSLES();

  public YourApplication() {}

  // see http://developer.android.com/reference/android/app/Application.html#onCreate() for details
  @Override
  public void onCreate() {
    super.onCreate();
    InitOpenSLES();
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:07:20.973

对于每个进程，您都有 pid 或进程 ID。在您的 init 函数中，您可以轻松获取线程 ID，并将其保存为任何整数值。

Thread.currentThread().getId()));

每当您的活动将重新启动时，只需检查线程 ID 是否相同或不同。如果线程 id 不同，则调用您的函数 init 函数。否则你已经完成了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-13T14:56:13.300

这个问题有一个简单的解决方案。您无需将内容保存在 SharedPreferences 中即可完成此操作。只需使用静态（类）变量。像这样：

```
public class Globals {
    public static boolean initialized = false;
} 
```

加载类时，该变量`initialized`将设置为 false。只有一次。在您的代码中，您可以像这样检查并设置变量：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // Initialize (but only once per process)
    if (!Globals.initialized) {
        init(); // Call init function that does things one time per process
        Globals.initialized = true; // Remember we are initialized so we don't
                                    //  do it again
    }
    ...
} 
```

即使您的所有活动都已完成，如果操作系统没有终止您的进程，`initialized`如果再次启动应用程序，该变量仍将为“真”。一旦操作系统终止进程，该变量将在下次启动应用程序并创建新进程时设置为“false”。

# model-view-controller - MVC 和类图

> ID：10284752
> 
> 赞同：1
> 
> 时间：2012-04-23T16:47:35.850
> 
> 标签：model-view-controller, class-diagram

我已经使用 MVC 进行了一些编程，但从未真正考虑过其中的类图，但考虑到它，我不明白类图如何与它一起工作。

您是否只需创建每个模型的类图，

另外，当我使用 codenigter 时，我从模型返回查询结果而不是整个对象，所以甚至会有任何属性吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T09:32:43.883

> 您是否只需创建每个模型的类图

任何有助于清晰的东西。我发现为每个模型创建一个新图表是最容易的。

> 另外，当我使用 codenigter 时，我从模型返回查询结果而不是整个对象，所以甚至会有任何属性吗？

我不确定你在这里的意思是什么？为什么你认为你的“结果”不是对象？在纯 OO 中，一切（整数、字符串等）也是对象。

# asp.net-mvc-3 - 用 Razor v2 替换 MVC3 视图引擎？

> ID：10284754
> 
> 赞同：2
> 
> 时间：2012-04-23T16:47:49.653
> 
> 标签：asp.net-mvc-3, razor

有没有办法设置我们的 MVC3 应用程序以使用较新版本的 Razor？我尝试使用 NuGet，但显然必须进行一些额外的接线，因为我没有看到 URL 解析和条件属性等新功能起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-05T17:12:01.243

1.  安装 ASP.NET MVC 4
2.  删除对 System.Web.WebPages 1.0 和 System.Web.Helpers 1.0 的引用，然后添加对 System.Web.WebPages 2.0 和 System.Web.Helpers 2.0 的引用
3.  在根 web.config 文件中，添加/更新这些设置：

    ```
    <appSettings>
        <add key="webpages:Version" value="2.0.0.0" />
        <add key="webpages:Enabled" value="true" />
        <add key="PreserveLoginUrl" value="true" />
    ...
    <add assembly="System.Web.WebPages, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    <add assembly="System.Web.Helpers, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
    ...
    <dependentAssembly>
        <assemblyIdentity name="System.Web.WebPages" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
    </dependentAssembly>
    <dependentAssembly>
        <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0" />
    </dependentAssembly> 
    ```

4.  在 Views web.config 文件中，添加/更新这些设置：

    ```
    <sectionGroup name="system.web.webPages.razor" type="System.Web.WebPages.Razor.Configuration.RazorWebSectionGroup, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="host" type="System.Web.WebPages.Razor.Configuration.HostSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
        <section name="pages" type="System.Web.WebPages.Razor.Configuration.RazorPagesSection, System.Web.WebPages.Razor, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" />
    </sectionGroup>
    </configSections>
    <system.web.webPages.razor>
        <host factoryType="System.Web.Mvc.MvcWebRazorHostFactory, System.Web.Mvc, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T01:40:34.030

在 Asp.net 论坛上询问，发现 NuGet 上的 RazorEngine 与内置的 Razor View Engine 并不完全相同。

# regex - emacs：突出显示平衡的表达式（例如 LaTeX 标签）

> ID：10284757
> 
> 赞同：5
> 
> 时间：2012-04-23T16:47:55.120
> 
> 标签：regex, emacs, latex, elisp, auctex

什么是让 Emacs 突出显示可能包含平衡括号之类的表达式的好方法——例如

```
\highlightthis{some \textit{text} here
some more text
done now} 
```

`highlight-regex`非常适合简单的事情，但是我在编写 emacs 正则表达式来识别换行符时遇到了很大的麻烦，当然它匹配到第一个右括号。

（作为第二个问题：任何扩展 emacs 正则表达式语法的包的指针将不胜感激——我很难使用它，而且我对 perl 中的正则表达式相当熟悉。）

**编辑**：出于我的特定目的（在 AUCTeX 缓冲区中突出显示的 LaTeX 标记），我能够通过自定义 AUCTeX 特定变量来使其工作，在 .emacs`font-latex-user-keyword-classes`中添加类似这样的内容：`custom-set-variables`

```
'(font-latex-user-keyword-classes (quote (("mycommands" (("highlightthis" "{")) (:slant italic :foreground "red") command)))) 
```

不过，一个更通用的解决方案仍然很好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:30:02.297

您可以使用作用于 s 表达式的函数来处理要突出显示的区域，并使用[此问题](https://stackoverflow.com/q/491257/1225607)中提到的解决方案之一来实际突出显示它。

这是一个例子：

```
(defun my/highlight-function ()
  (interactive)
  (save-excursion
    (goto-char (point-min))
    (search-forward "\highlightthis")
    (let ((end (scan-sexps (point) 1)))
      (add-text-properties (point) end '(comment t face highlight))))) 
```

**编辑：**这是一个使用 Emacs 标准字体锁定系统的类似功能的示例，如emacs-lisp 手册[的基于搜索的字体化部分所述：](http://www.gnu.org/software/emacs/manual/html_node/elisp/Search_002dbased-Fontification.html#Search_002dbased-Fontification)

```
(defun my/highlight-function (bound)
  (if (search-forward "\highlightthis" bound 'noerror)
      (let ((begin  (match-end 0))
            (end    (scan-sexps (point) 1)))
        (set-match-data (list begin end))
        t)
    nil))
(add-hook 'LaTeX-mode-hook
          (lambda ()
            (font-lock-add-keywords nil '(my/highlight-function)))) 
```

# django - 设置 django_auth_ldap 以填充用户配置文件

> ID：10284760
> 
> 赞同：2
> 
> 时间：2012-04-23T16:48:22.457
> 
> 标签：django, ldap, django-authentication

我正在尝试配置 django_ldap_auth 以使用来自 LDAP 的区域数据填充用户配置文件：

我为配置文件创建了一个模型：

```
from django.db import models
from django.contrib.auth.models import User
class profile(models.Model):
    user = models.ForeignKey(User, unique=True)
    region = models.CharField(max_length=128, null=True, blank=True)

    def __unicode__(self):
        return '{0} profile'.format(self.user.username)

    class Meta:
        app_label = 'core' 
```

我将设置配置为映射到 'l' LDAP 属性（这就是在 LDAP 中标记区域的方式）

```
AUTH_PROFILE_MODULE = 'core.profile'
 AUTH_LDAP_PROFILE_ATTR_MAP = {"region": "l"} 
```

这可能很重要，配置文件类位于 app/models/UserProfile.py 文件中，并且 models/ **init** .py 有`from UserProfile import profile`声明。

但是，我仍然在调试中收到以下消息，并且配置文件不会填充：

```
search_s('dc=*****,dc=ru', 2, '(sAMAccountName=******)') returned 1 objects: CN=Болотнов Александр,OU=****,OU=****,DC=***,DC=ru
Populating Django user *****
Django user **** does not have a profile to populate 
```

有什么我想念的吗？诸如名字/姓氏和电子邮件之类的用户数据可以很好地填充，但区域不会。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T20:06:24.363

这意味着这个特定的用户对象没有关联的配置文件对象。Django 不会自动创建配置文件对象，django-auth-ldap 也不会。通常，您将在模型上安装 post_save 信号处理程序`User`以创建配置文件。

请参阅[https://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users](https://docs.djangoproject.com/en/1.4/topics/auth/#storing-additional-information-about-users)。

# javascript - 如何在 jQuery 动画中使用队列？

> ID：10284769
> 
> 赞同：4
> 
> 时间：2012-04-23T16:48:57.663
> 
> 标签：javascript, jquery, jquery-selectors, jquery-animate

我想增加/减少和元素的字体，然后是该类的下一个元素，依此类推，对于一组元素为`<div class="test"></div> <div class="test"></div> ....`. 我是说

```
step 1: enlarging the first element and returning to normal size
step 2: enlarging the second element and returning to normal size
.... 
```

我的基本代码是

```
$(document).ready(function() {
    $('.test').animate({
               left:50,
               fontSize: "2em"},
               "slow")
               .animate({
               left:-50,
               fontSize: "1em"},
               "slow"); 
```

这将同时影响所有元素。我怎样才能排队来一一进行更改。一次有一个放大的元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:14:03.633

你可以用

```
$('.test').each(function(idx){
    var duration = 1200; // duration for all animations (2 x slow)
    $(this)
         .delay(duration*idx)
         .animate({ left:50, fontSize: "2em" }, 'slow')
         .animate({ left:-50, fontSize: "1em" }, 'slow');
}); 
```

演示在[http://jsfiddle.net/gaby/rz5Es/](http://jsfiddle.net/gaby/rz5Es/)

* * *

要获得更精确的控制和更多的排队自由，请查看我对类似问题的回答：
[A non-nested animation sequence in jQuery?](https://stackoverflow.com/questions/6829413/a-non-nested-animation-sequence-in-jquery/6829667#6829667)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T17:10:58.253

您需要使用回调和要按顺序制作动画的元素数组...

```
function animateSequence(elements){
    var element = $(elements).first();
    var originalSize = $(element).css('font-size');

    elements = $(elements).not($(element));

    $(element).animate(
        { fontSize: "2em" },
        "slow",
        function(){
            $(this).animate(
                { fontSize: originalSize },
                "slow",
                function(){
                    if(elements.length > 0)
                        animateSequence(elements);
                }
            )
        }
    );
}

animateSequence($('.test')); 
```

如果你想玩它：http: [//jsfiddle.net/xS7X7/](http://jsfiddle.net/xS7X7/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T17:09:35.093

据我了解，您正在尝试做这样的事情，

```
$(document).ready(function() {
    (function mycallback(i) {
      var elems = $('.test');
      elems.eq(i).animate({
                   left:50,
                   fontSize: "2em"}, function () {
        mycallback(i + 1 < elems.length ? i + 1 : 0);
      });
    }(0));
}); 
```

[​演示](http://jsfiddle.net/xZ78R/1/)

**更新：**

这是一个示例代码，如果您想反转效果，可以这样更改，

```
$(document).ready(function() {
    (function mycallback(i) {
      var elems = $('.test');
      elems.eq(i).animate({
                   left:50,
                   fontSize: "2em"}, function () {
        $(this).animate({
               left:-50,
               fontSize: "1em"},
               "slow");
        if (i + 1 < elems.length)
            mycallback(i+1);
      });
    }(0));
}); 
```

[更新的演示](http://jsfiddle.net/xZ78R/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T17:10:21.003

您将需要遍历所有元素并按`animate`顺序执行每个元素，这是递归执行此操作的示例代码

```
function animate_sequential(elems, css, delay, index){
    if(index===undefined) index = 0;
    if(index >= elems.length) return;     
    $(elems[index]).animate(css, delay, function(){
        animate_sequential(elems, css, delay, index+1)
    })
}

animate_sequential($('div'), {'font-size':'30px'}, 500)
animate_sequential($('div'), {'font-size':'15px'}, 500) 
```

在行动中查看它[http://jsfiddle.net/anuraguniyal/QJc9L/](http://jsfiddle.net/anuraguniyal/QJc9L/)

它可以很容易地转换为 jQuery 插件，这样您就可以做`$('div').animate_sequential`和保持与 jQuery animate 相同的界面，您还可以进一步增强它，以便通过传递原始 css 或从元素中获取它来恢复原始 css。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T17:31:04.340

[使用Frame.js](https://github.com/bishopZ/Frame.js)更加简单、易读和可扩展：

```
$('.test').each(function(i){
    var element = $(this);
    var originalSize = element.css('font-size');

    Frame(function(next){
        element.animate({ fontSize: "2em" }, "slow", next);
    });
    Frame(function(next){
        element.animate({ fontSize: originalSize }, "slow", next);
    });
});
Frame(function(next){
    // add a callback after all the animations have finished
    next();
});
Frame.start(); 
```

# jquery - Jquery 实时模糊和实时焦点

> ID：10284772
> 
> 赞同：1
> 
> 时间：2012-04-23T16:49:13.483
> 
> 标签：jquery, focus, live, blur

我正在动态打开一个对话框。单击链接时，它会查找信息并将其显示在其中。

```
$('.comment').live('blur', function(){
    var split = (this.id).split("_");
    var id = split[1];

    $('#face_'+ id).fadeOut();
    $('.commentbutton').hide();
    $("#comments_" + id).slideDown();
})

//////////////////////////////////////////////////

// commentopen 
$(".comment").live("focus", function() { 
    var split = (this.id).split("_");
    var vmid = split[1]; 

    $("#face_" + vmid).fadeIn();
    $("#comments_" + vmid).slideUp();
    $('#commentbutton_' + vmid).show();

}); 
```

当您第一次打开对话框时效果很好，但是如果您关闭它并尝试再次打开它，它就不再起作用了，至少在 Firefox 中是这样。

当我发出警报时，它显示 ID 已发送。但是为什么 不再,`$('.commentbutton')`和blur 函数什么都不做呢？`#face_' + vmid``fadeIn()``slideUp()``slideDown()`

我也尝试过使用focusin和focusout。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:54:16.003

随着新版本的 jquery live() 被弃用，你应该使用 on() （注意新格式）：

```
$(document).on('blur','.comment', function(){
   var split = (this.id).split("_");
   var id = split[1]; 
   $('#face_'+ id).fadeOut();
   $('.commentbutton').hide();
   $("#comments_" + id).slideDown();
});
         //////////////////////////////////////////////////

         // commentopen 
$(document).on("focus",".comment", function() { 
   var split = (this.id).split("_");
   var vmid = split[1]; 

   $("#face_" + vmid).fadeIn();
   $("#comments_" + vmid).slideUp();
   $('#commentbutton_' + vmid).show();

}); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:59:27.190

```
$(document).on({
    blur: function(){
        var id = this.id.split("_")[0];
        $('#face_'+id).fadeOut();
        $('.commentbutton').hide();
        $("#comments_"+id).slideDown();
    },
    focus: function() {
        var vmid = this.id.split("_")[1];
        $("#face_"+vmid).fadeIn();
        $("#comments_"+vmid).slideUp();
        $('#commentbutton_'+vmid).show();
    }
},'.comment'); 
```

用最近的非动态父级替换文档。至于为什么它在第二次点击时不起作用，如果没有看到更多实际代码，这真的很难回答。

# java - 这个 JLabel 上的什么是无效的？

> ID：10284778
> 
> 赞同：1
> 
> 时间：2012-04-23T16:49:38.957
> 
> 标签：java, swing, jlabel

好的，我在执行 MyBox.toString() 时打印了以下内容

```
com.swa.fin.esaa.sgb.myclasses.mydatatypes.MyAlphaForLabel[,0,0,0x0,invalid,hidden,alignmentX=0.0,alignmentY=0.0,border=javax.swing.border.MatteBorder@1082823,flags=25165824,maximumSize=,minimumSize=,preferredSize=java.awt.Dimension[width=0,height=0],defaultIcon=,disabledIcon=,horizontalAlignment=LEFT,horizontalTextPosition=TRAILING,iconTextGap=4,labelFor=,text=,verticalAlignment=TOP,verticalTextPosition=CENTER] 
```

MyBox 通过以下方式设置：

```
public void MySetMyBox( Rectangle bounds, Color color, Color bcolor, int bwidth ) {
    MyBox = new MyAlphaForLabel();
    MyBox.setComponentOrientation( ComponentOrientation.LEFT_TO_RIGHT );
    MyBox.setVerticalAlignment( JLabel.TOP );
    MyBox.setHorizontalAlignment( JLabel.LEFT );
    MyBox.setFont( new Font(Font.MONOSPACED, Font.PLAIN, 12 ) );
    MyBox.setBackground( color );
    MyBox.setEnabled( true );
    MyBox.setVisible( MyVisible );
    MyBox.setFocusable( true );
    MyBox.setOpaque( MyOpaque );
    MyBox.setBounds( bounds );
    MyBox.setSize( new Dimension( bounds.width, bounds.height ) );
    MyBox.setPreferredSize( new Dimension( bounds.width, bounds.height ) );
    if ( ( MyDashed ) || ( MySelected ) && ( MyCellType != MYCELLS.ZOOM ) ) {
        MyBox.setBorder( new MyDashedBorder( bcolor, bwidth, bwidth ) );
    } else {
        MyBox.setBorder( new MatteBorder( bwidth, bwidth, bwidth, bwidth, bcolor ) );
    }
} 
```

所有 MyXxxxx 变量都被声明为必要的（IE MyVisible 是一个布尔值，此时为真）。

MyBox 是一个 MyAlphaForLabel：

```
import java.awt.Color;
import java.awt.Font;
import java.awt.Graphics;
import java.io.Serializable;
import javax.swing.JLabel;
import com.swa.fin.esaa.sgb.MyData;
import com.swa.fin.esaa.sgb.myclasses.myutils.MyDebug;

public class MyAlphaForLabel extends JLabel implements MyData, Serializable {

    private static final long serialVersionUID = 5522598090700895821L;

    private MyDebug           dbug                    = new MyDebug( MyData.MYDEBUGCHECK.MYALPHAFORLABEL.getOn() );

    public String MyTextString = "";

    public MyAlphaForLabel() {
        super();
        this.setOpaque( false );
    }

    /**
     *  Paint the background using the background Color of the
     *  contained component
     */
    @Override
    public void paintComponent( Graphics graphics ) {

        // Set color for the text label
        int red   = ( this.getBackground().getRed()   >= 50 ) ? ( this.getBackground().getRed()   - 50 ) : ( this.getBackground().getRed()   + 50 ); 
        int green = ( this.getBackground().getGreen() >= 50 ) ? ( this.getBackground().getGreen() - 50 ) : ( this.getBackground().getGreen() + 50 ); 
        int blue  = ( this.getBackground().getBlue()  >= 50 ) ? ( this.getBackground().getBlue()  - 50 ) : ( this.getBackground().getBlue()  + 50 ); 
        int alpha = 128; 

        // Make sure we are displaying something
        if ( this.getBackground().getAlpha() != 0 ) {
            // First draw rectangle
            graphics.setColor( this.getBackground() );
            graphics.fillRect(0, 0, this.getWidth(), this.getHeight());
            // Then draw text label
            graphics.setColor( new Color( red, green, blue, alpha ) );
            graphics.setFont(new Font(Font.MONOSPACED, Font.PLAIN, 10 ) );
            graphics.drawString(MyTextString, 5, 15);
            dbug.Message( "MYALPHACONTAINER", "paintComponent set text to %s ", MyTextString );

        }
    }
} 
```

我的问题是什么问题？为什么说无效。

好的，我看到了下面的一个答案，并认为我会添加更多信息：

好的，但我遇到的问题是我将它添加到 JScrollPane 并且它没有显示出来。

我有一个大型数据类，其中包含由我绘制的 JLabel 表示的“框”的所有重要信息。例如，我需要从绘制的 JLabel 转换为它所代表的工程图的缩放坐标。无论如何，我曾经让数据类成为 JLabel（或 MyAlphaForLabel）的扩展，它运行良好并出现在 JScrollPane 上。当我想将数据导出到 XML 时遇到了问题，因为无论我对 Accessor 为 NONE 做了什么，它都会获取父类。因此，我将“JLabel”移到了一段不是由 XML 导出的数据记录中。我现在只添加 JLabel，而不是将整个数据记录添加到 JScrollPane。在 pane.add() 语句中选择了类公共变量，而不是之前的整个类，只更改了完全相同的代码。但是我不再让 JLabel 显示在 JScrollPane 上。我不知道为什么。

有什么想法吗？

我意识到代码不在这里，但它确实相当于大量的代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T16:50:58.563

这只是意味着您的组件尚未由布局管理器验证

# scala - 函数参数：上限与父类作为参数？

> ID：10284779
> 
> 赞同：6
> 
> 时间：2012-04-23T16:49:50.483
> 
> 标签：scala, types, parameters, function-declaration

考虑我们有：

```
abstract class FlyingObject;
case class Rocket(name: String) extends FlyingObject; 
```

这两个函数声明有什么区别：

```
def launch[T <: FlyingObject](fo: T) 
```

和

```
def launch(fo: FlyingObject) 
```

很好的例子是什么时候使用哪种类型的声明......

**[更新]**

另一个很好的例子和解释可以在[这里](http://scala-programming-language.1934581.n4.nabble.com/scala-Upper-Type-Bounds-td1999781.html)找到。这是您应该使用上限而不是仅使用派生类作为参数的另一个示例。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T16:57:41.137

拥有比 FlyingObject 更具体的 T 可能会很有用。也许想象你有一个方法

```
def modifyName(fo: FlyingObject, newName: String): FlyingObject = fo.copy(name=newName) 
```

它返回具有修改名称的 FlyingObject 副本。这使得这段代码不进行类型检查：

```
val newRocket: Rocket = modifyName(oldRocket, "new name") 
```

因为 modifyName 返回的是 FlyingObject 而不是 Rocket。反而：

```
def modifyName[T <: FlyingObject](fo: T, newName: String): T = fo.copy(name=newName) 
```

当 Rocket 是传入的内容时，将返回一个 Rocket。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T17:40:34.397

除了@stew 答案，上限在使用类型类时可能很有用。例如，假设您想要一个方法，该方法采用两个飞行对象以及一个定义如何管理与其他对象的碰撞的对撞机对象。当然，小行星-小行星碰撞与宇宙飞船-小行星碰撞（经典教科书示例）不同。

您可以编写如下方法：

```
def collide[A <: FlyingObject, B <: FlyingObject]
  ( a: A, b: B )( implicit collider: Collider[A,B] ) = collider.apply(a,b) 
```

然后编译器会`Collider`为你提供一个正确的。相反，如果您写道：

```
def collide( a: FlyingObject, b: FlyingObject ) = a.collide(b) 
```

您将不得不依靠面向对象的特性来管理碰撞，这将很难编写和维护（双重调度问题）。

# visual-c++ - 使用了可能未初始化的局部变量？为什么？

> ID：10284782
> 
> 赞同：2
> 
> 时间：2012-04-23T16:50:09.267
> 
> 标签：visual-c++, warnings, initialization

当我编写这段代码并编译时`/W4`

```
long r;
__try { r = 0; }
__finally { }
return r; 
```

我得到：

```
warning C4701: potentially uninitialized local variable 'r' used 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:52:19.457

编译器无法确定 try 块内的代码是否会成功运行。在这种情况下，它总是会执行，但如果 try 块中有额外的代码 r = 0 可能永远不会执行。在这种情况下， r 未初始化，因此出现错误。

这和你说的没什么不同：

```
long r;
if(something) {
  r = 0;
}
return r; 
```

（其中“某物”几乎是一个恒定的真实值之外的任何东西）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T16:52:25.190

因为`long r;`创建`r`但未初始化；它是空的。

因此它会警告您该变量未初始化。在某些情况下，它会导致空指针。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-18T20:46:03.277

将其添加为答案，因为它比仅在评论中更有趣：直到在变量之前插入了*标签语句：错误才出现。*去掉`goto`& 关联的标签，没有任何警告。这可能与命名空间路径的设置方式有关，在插入块*之前*在行号上生成了类似的警告[C4702](https://msdn.microsoft.com/en-us/library/c26da40e.aspx?f=255&MSPPError=-2147217396)。如果有人感兴趣，MVCE 仍有待生成。*`goto`*

# powershell - Powershell：从文件末尾向后搜索

> ID：10284786
> 
> 赞同：7
> 
> 时间：2012-04-23T16:50:33.157
> 
> 标签：powershell, scripting

我的脚本每分钟读取一次日志文件并选择（并根据）时间戳从前一分钟开始的行。

这很容易（正则表达式只是“^$timestamp”），但是当日志变大时可能需要一段时间。

我的想法是我想要的行总是在文件的底部附近，所以如果我从底部开始向上搜索，我会搜索更少的行，当我到达前一分钟时停止有兴趣。

我的问题是，如何从文件底部而不是顶部进行搜索？我什至可以说“读取行 $length”，甚至可以说“读取行 n”（如果可以的话，我可以做一种二进制搜索来查找文件的长度并从那里向后工作）？

最后一个问题：这会更快吗（即使它不会更快，我仍然想知道怎么做）？

理想情况下，我想在我自己的代码中完成这一切，而不需要安装任何额外的东西。

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-01-28T19:40:11.130

**获取内容 bigfile.txt -tail 10**

这句话几乎立即出现在巨大的文件上，没有任何大的内存使用。

我在测试中使用了一个 22 GB 的文本文件。

执行诸如“get-context bigfile.txt | select -Last 10”之类的操作，但似乎必须加载所有行（或 powershell 中的对象）然后进行选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T17:05:50.330

我可以建议将正则表达式更改为等于 Get-Date + 您想要的任何时间段吗？

例如（这没有你的日志，所以我很抱歉）

```
$a = Get-Date
$hr =  $a.Hour
$min =  $a.Minute 
```

然后处理这些值以构建正则表达式以选择您想要的时间。如果您还没有使用它，这个网站非常适合快速轻松地构建正则表达式[http://gskinner.com/RegExr/](http://gskinner.com/RegExr/)。

有另一个修复，我想你会喜欢这个..

```
$a = get-content .\biglog.text 
```

使用长度从后到前对数组进行切片，将写入主机更改为选择字符串和您的正则表达式或您想要反向执行的任何操作..

```
foreach($x in $a.length..0){ write-host $a[$x] } 
```

再次获取内容 cmdlet 之后的另一个选项，此选项只是反转数组的顺序，然后您从下到上读取 $a

```
[array]::Reverse($a) 
```

直流

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-24T13:27:10.990

If you only want the last bit of the file, depending on the format, you can just do this:

```
 Get-Content C:\Windows\WindowsUpdate.log | Select -last 10 
```

This will return the last 10 lines found in the file.

# javascript - 图像映射 jquery

> ID：10284789
> 
> 赞同：0
> 
> 时间：2012-04-23T16:50:43.723
> 
> 标签：javascript, jquery, imagemap

我有一个带有各种图像映射的图像，例如：

```
<map id="rade_img_map_1335199662212" name="rade_img_map_1335199662212">
<area href="http://" coords="10,10,160,47" shape="RECT" /></map> 
```

如何使用 jquery 将内联样式添加到我的 ul li

```
<ul id="level3">
<li>Test</li>
<li>rwer</li>
<li>wer</li>
<li>sdf</li> 
```

因此，如果上面的图像映射是针对`Test`我如何在悬停时触发 jquery 的？如果我为每个图像映射设置href，那么我可以使用jquery读取值吗？

编辑我已经尝试过了，但是当不悬停时我无法删除该类：

```
 $(document).ready(function () {
      $("#rade_img_map_1335199662212").hover(function () {
          $("li#rs1").removeClass("active");  //Make sure no other "active" classes exist
          $(this).addClass("active");  //Add the active class to the area that was clicked
      });
  }); 
```

# php - 树枝中的变量变量名

> ID：10284791
> 
> 赞同：8
> 
> 时间：2012-04-23T16:51:00.997
> 
> 标签：php, twig

我有一个用于创建组合框表单元素的树枝宏，如下所示：

```
{% macro select(name, label, choices, help, value) %}
<div class="control-group">
    <label class="control-label" for="{{ name }}">{{ label }}</label>
    <div class="controls">
        {% for choice in choices %}
            {% if value is not empty and value == choice.id %}
                <option value="{{ choice.id }}" selected="selected">{{ choice.code }} - {{ choice.name }}</option>
            {% else %}
                <option value="{{ choice.id }}">{{ choice.name }}</option>
            {% endif %}
        {% endfor %}
        <p class="help-block">{{ help }}</p>
    </div>
</div>
{% endmacro %} 
```

如您所见，它不是很灵活，因为我只能使用具有 id 和 name 字段的对象作为选项值和标签。在迁移到 twig 之前，我使用了这个 PHP 函数：

```
function form_select($name, $label, $choices, $keycol, $valcol, $value=null, $help=null)
{ ?>
<div class="control-group">
    <label class="control-label" for="<?php echo $name; ?>"><?php echo $label; ?></label>
    <div class="controls">
        <select name="<?php echo $name; ?>" class="span7" id="<?php echo $name; ?>">
            <?php foreach ($choices as $choice) : ?>
                <option value="<?php echo $choice->$keycol; ?>" <?php if ($choice->$keycol == $value) echo "selected"; ?>>
                    <?php echo $choice->$valcol; ?>
                </option>
            <?php endforeach; ?>
        </select>
        <p class="help-block"><?php echo $help; ?></p>
    </div>
</div>
<?php } 
```

使用此函数，我可以将任意对象发送到函数，并将其用作选项值和标签，方法是将字段名称传递给函数（`$keycol`和`$valcol`）并通过 PHP 的变量变量名功能（`$choice->$keycol`和`$choice->$valcol`）访问它们。

无论如何我可以将此功能重新创建为树枝宏吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-23T23:00:45.483

属性函数这样做：[http ://twig.sensiolabs.org/doc/functions/attribute.html](http://twig.sensiolabs.org/doc/functions/attribute.html)

```
{{ attribute(choice, valCol) }} 
```

# c++ - 类内声明类的静态成员的实时使用

> ID：10284793
> 
> 赞同：0
> 
> 时间：2012-04-23T16:51:05.653
> 
> 标签：c++, static-members

我在 SO 上看到了[这个](https://stackoverflow.com/questions/8517609/why-is-a-class-allowed-to-have-a-static-member-of-itself-but-not-a-non-static-m/8517644#8517644)问题，想知道在实时示例中实际可以在哪里使用这种代码。

```
struct a
{
    static struct a b;
};

int main()
{
    a::b;

    return 0;
} 
```

还有什么是`a::b;` 感谢您的投入的意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:06:41.733

这样的代码可以用于单例模式的实现。在这里，声明了一个类型的实例`a`；如果以某种方式禁止其他实例，则它是单例。然而，我记得在实践中，它们通常使用较少混淆的语法。

而且，至于`a::b`，它没有任何用处。它只显示实例的名称。一个更有用的例子是：

```
struct a
{
    static struct a b;
    int data;
};

a a::b = {9};

int main()
{
    int stuff = a::b.data;
    printf("%d\n", stuff);

    return 0;
} 
```

# c++ - 在从函数返回值之前删除指针

> ID：10284800
> 
> 赞同：0
> 
> 时间：2012-04-23T16:51:30.963
> 
> 标签：c++

如果我有这个：

```
double foo()
{
double* ptr = new double(0);

return *ptr;
} 
```

如果在返回之前没有删除ptr，这会导致内存泄漏吗？因此，在从函数返回之前删除 ptr 的正确方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T16:53:15.060

你有几个解决方案：

*   scoped_ptr
*   在栈上声明一个变量

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T16:54:47.410

如果您不希望对象（与其值相反）存在于函数范围之外，那么动态分配它就没有多大意义。

只需在堆栈上分配它：

```
double foo() {
    double d = 0;

    ...

    return d;
} 
```

另一种方法是让对象存在于函数范围之外，在这种情况下，您不想在返回之前将其删除。管理它的最好方法是使用某种智能指针（在大多数情况下它会自动处理内存管理）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T16:55:46.857

如果您要返回指向的值，`ptr`那么您绝对**不想**在离开函数之前将其删除。如果你删除它然后返回它，调用函数将尝试访问已释放的内存，这是禁止的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T16:55:55.040

只要您在调用函数的同一个类中的指针中收到 foo() 的返回值，就可以了。之后，当您不再需要它时，您可以在该指针上使用 delete ......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T16:58:26.950

为什么要动态分配双精度？我想不出任何`new double`有意义的上下文。只需将 声明`double` 为局部变量。

如果涉及多态性，您唯一想要动态分配其生命周期在函数末尾结束的对象的时间。在这些情况下，您可以使用`std::auto_ptr`（或者 `std::unique_ptr`如果您确定您将看到的所有编译器都将支持 C++11）。

# ruby-on-rails - 如何使用可选连接检索记录？

> ID：10284804
> 
> 赞同：1
> 
> 时间：2012-04-23T16:51:50.833
> 
> 标签：ruby-on-rails, activerecord, join

我正在为用户检索一组时间记录。查询应返回范围为公共（即私有 == false）或私有（即私有 == true）的网络的记录，并且用户具有该时间的 Slot 记录。

我想用 ActiveRecord 来做这件事，但我找到的唯一方法是做两个单独的查询。这很好，除了结果是数组而不是 ActiveRecord 关系防止链接等。

有什么建议么？

```
class TimeAccessPolicy
  attr_reader :network

  def initialize(network)
    @network = network
  end

  def accessible_times_for(user)
    return [] unless user.is_member_of?(network)
    times = network.times.where(private: false)
    times + network.times.joins(:slots).where(private: true, slots: {user_id: user.id})
  end
end 
```

- 编辑：

```
class Time < ActiveRecord::Base
  belongs_to :network
  has_many   :slots
  has_many   :participants, through: :slots, source: :user

  # has private boolean
  ...
end

class Network < ActiveRecord::Base
  has_many   :memberships, as: :memberable, dependent: :destroy
  has_many   :users, through: :memberships
  has_many   :times

  ...
end

class Slot < ActiveRecord::Base
  belongs_to :user
  belongs_to :time

  ...
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:57:01.347

您可以使用[范围方法](http://guides.rubyonrails.org/active_record_querying.html#working-with-scopes)

像这样：

```
times = network.times.scoped
# times is still ActiveRecord relation
if private
  times = times.joins(:slots).where(private: true, slots: {user_id: user.id})
else
  times = times.where(private: false)
end 
```

这段代码只做一个查询

# c# - 如何使用 C# 更好地查询 Active Directory 中的多个域？

> ID：10284806
> 
> 赞同：3
> 
> 时间：2012-04-23T16:52:00.043
> 
> 标签：c#, active-directory, ldap, ldap-query

我正在尝试将 LDAP / AD 搜索从仅在当前登录的域中搜索扩展到搜索 AD 中的所有域。该方法接收带有查询的字符串，并返回并返回一个 LDAPInformation 对象。

虽然我在问，有没有比这种方式更好的方法来搜索名称？由于在按姓氏查找人时需要使用通配符（例如：Doe*），因此对用户不友好。

```
 public static LDAPInformation[] GetGlobalAddressListVIAName(string nameQuery)
    {
        var currentForest = Forest.GetCurrentForest();
        var globalCatalog = currentForest.FindGlobalCatalog();

        using (var searcher = globalCatalog.GetDirectorySearcher())
        {
            using (var entry = new DirectoryEntry(searcher.SearchRoot.Path))
            {
                searcher.Filter = "(&(mailnickname=*)(objectClass=user)(displayName=" + nameQuery + "))";
                searcher.PropertyNamesOnly = true;
                searcher.SearchScope = SearchScope.Subtree;
                searcher.Sort.Direction = SortDirection.Ascending;
                searcher.Sort.PropertyName = "displayName";
                return searcher.FindAll().Cast<SearchResult>().Select(result => new LDAPInformation(result.GetDirectoryEntry())).ToArray();
            }
        }
    } 
```

这是对象：

```
 class LDAPInformation
{
    internal LDAPInformation(DirectoryEntry entry)
    {
        //Section: HASH
        this.sAMAccountName = (string)entry.Properties["sAMAccountName"].Value;

        //Section: Email
        this.Mail = (string)entry.Properties["mail"].Value;

        //Section: Organziation
        this.Description = (string)entry.Properties["description"].Value;
        this.Company = (string)entry.Properties["company"].Value;
        this.Title = (string)entry.Properties["title"].Value;
        this.Department = (string)entry.Properties["department"].Value;

        //Section: Name
        this.DisplayName = (string)entry.Properties["displayName"].Value;
        this.FirstName = (string)entry.Properties["firstName"].Value;
        this.MiddleName = (string)entry.Properties["middleName"].Value;
        this.LastName = (string)entry.Properties["lastName"].Value;

        //Section: Address
        this.StreetAddress = (string)entry.Properties["streetAddress"].Value;
        this.City = (string)entry.Properties["city"].Value;
        this.State = (string)entry.Properties["state"].Value;
        this.PostalCode = (string)entry.Properties["postalCode"].Value;
        this.TelephoneNumber = (string)entry.Properties["telephoneNumber"].Value;
    }

    public string DisplayName
    {
        get;
        private set;
    }

    public string Mail
    {
        get;
        private set;
    }

    public string sAMAccountName
    {
        get;
        private set;
    }

    public string Description
    {
        get;
        private set;
    }

    public string Company
    {
        get;
        private set;
    }

    public string Title
    {
        get;
        private set;
    }

    public string Department
    {
        get;
        private set;
    }

    public string FirstName
    {
        get;
        private set;
    }

    public string MiddleName
    {
        get;
        private set;
    }

    public string LastName
    {
        get;
        private set;
    }

    public string StreetAddress
    {
        get;
        private set;
    }

    public string City
    {
        get;
        private set;
    }

    public string State
    {
        get;
        private set;
    }

    public string PostalCode
    {
        get;
        private set;
    }

    public string TelephoneNumber
    {
        get;
        private set;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:31:46.500

@Brian Desmond 和 @lordzero。可能有点晚了，但我最近自己一直在做这类事情，所以我想我分享一下。

为了回答您的问题“您的搜索根是什么？”，lordzero，您可以在不知道 AD 服务器的情况下从这些服务器中找到它。域注册的 PC 将知道 AD 基础设施/森林等。

首先，您为“GC://rootDSE”创建一个 DirectoryEntry，从中提取命名上下文、rootDomainNamingContext 或其他。您可以转储第一个根 DSE DirectoryEntry 的所有属性以查看可用的内容。

这是我对我们使用的目录服务服务提供商的实现。

这取自 DirectorySearcherWrapper 类

我有一个成员变量。并在构造函数中实例化它。

```
DirectorySearcher directorySearcher; 
```

在我的初始化方法中，我这样做

```
 using (DirectoryEntry directoryEntry = new DirectoryEntry(DirectoryConstants.RootDSE))
        {
            // Create a Global Catalog Directory Service Searcher
            string strRootName = directoryEntry.Properties[DirectoryConstants.RootDomainNamingContext].Value.ToString();
            using (DirectoryEntry usersBinding = new DirectoryEntry(DirectoryConstants.GlobalCatalogProtocol + strRootName))
            {
                directorySearcher.SearchRoot = usersBinding;
                directorySearcher.ClientTimeout = timeout;
                directorySearcher.CacheResults = true;
                result = true;
                initialized = true;
            }
        } 
```

DirectoryConstants 类属性

```
public static string RootDSE { get { return @"GC://rootDSE"; } }
public static string RootDomainNamingContext { get { return "rootDomainNamingContext"; } }
public static string GlobalCatalogProtocol { get { return @"GC://"; } } 
```

我确信这仅适用于登录到域注册 PC 的域用户。身份验证在幕后自动处理。如果您的用户登录到本地帐户或计算机不在域中，您很可能会收到 DirectoryServicesCOMException。

希望这可以帮助。如果您不担心处置和 StyleCop/Sonar 编码违规，请放弃“使用”结构！

上面代码所在的 DirectorySearcherWrapper 类然后由服务提供者代码使用。它是这样分离的，因此可以很容易地模拟出来，因为不能保证构建机器在执行我们的单元测试时注册到域。

...其中大部分来自 MSDN/.Net 文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T19:44:53.647

查询全局编录是正确的方法。

您可能想查看不明确的名称解析 (ANR) - [http://support.microsoft.com/kb/243299](http://support.microsoft.com/kb/243299)。

# django - Django 的简单 CRUD

> ID：10284809
> 
> 赞同：1
> 
> 时间：2012-04-23T16:52:05.260
> 
> 标签：django, django-models, django-forms, django-views

我在 Django 中有一个模型。有没有办法在 url.py 文件中添加一些东西，这样我就可以轻松地在模型上执行 CRUD（甚至只是创建）。

看起来像：

```
url(r'^create/$', MyModel.create()), 
```

基本上，我给它一个模型，然后它会创建一个表单，错误检查输入，如果需要显示输入有什么问题，然后保存输入。

在Django中，这样的事情存在吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T16:56:17.733

它被命名为[“通用视图”](https://docs.djangoproject.com/en/1.3/ref/generic-views/#django-views-generic-create-update-create-object)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T16:57:59.483

使用[contrib 管理应用程序](https://docs.djangoproject.com/en/dev/ref/contrib/admin/)或[通用视图](https://docs.djangoproject.com/en/1.3/ref/generic-views/#django-views-generic-create-update-create-object)

# ruby-on-rails - 如何在 Rails 环境中使用 Cache-Control: max-age Header 控制 Varnish 和浏览器？

> ID：10284813
> 
> 赞同：24
> 
> 时间：2012-04-23T16:52:24.930
> 
> 标签：ruby-on-rails, caching, http-headers, varnish

最近我向 Rails 应用程序堆栈添加了一个 Varnish 实例。可以通过使用 Cache-Control Header 缓存某个资源来说服其默认配置中的清漆，如下所示：

```
Cache-Control: max-age=86400, public=true 
```

我使用控制器中的 expires_in 语句实现了这一点：

```
def index
  expires_in 24.hours, public: true
  respond_with 'some content'
end 
```

效果很好。我没想到的是，Cache-Control 标头也会影响浏览器。这导致了一个问题 - Varnish 和我的用户浏览器都缓存了某个资源。资源已从清漆中正确清除，但浏览器不会尝试再次请求它，除非达到 max-age。

所以我想知道我是否应该将'expires_in'与Varnish结合使用？我可以在 Varnish 前过滤 Nginx 或 Apache 实例中的 Cache-Control 标头，但这似乎很奇怪。

任何人都可以启发我吗？

问候菲利克斯

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-27T07:59:36.863

这实际上是一个非常好的和有效的问题，也是一个非常常见的反向代理问题。

问题是只有一个 Cache-Control 属性，它适用于客户端浏览器（私有缓存）和/或代理服务器（共享缓存）。如果您根本不希望 3rd 方代理缓存您的内容，并且希望您的 Varnish（或 Rails 后端）处理每个请求，则必须从 Varnish 发送适当的 Cache-Control 标头。

修改后端发送的 Cache-Control 标头在[https://www.varnish-cache.org/trac/wiki/VCLExampleLongerCaching有详细讨论](https://www.varnish-cache.org/trac/wiki/VCLExampleLongerCaching)

你可以从两个不同的角度来解决这个问题。如果你想在 Rails 后端定义 max-age，例如为不同的对象指定不同的 TTL，你可以使用上面链接中描述的方法。

另一种解决方案是根本不从后端发送 Cache-Control 标头，而是在 varnish vcl_fetch() 中为对象定义所需的 TTL。这是我们采取的方法。

我们在 Varnish 中有一个 600 秒的默认 TTL，并为在进行更改时明确清除的页面定义更长的 TTL。这是我们当前的 vcl_fetch() 定义：

```
sub vcl_fetch {
  if (req.http.Host ~ "(forum|discus)") {
    # Forum pages are purged explicitly, so cache them for 48h
    set beresp.ttl = 48h;
  }

  if (req.url ~ "^/software/") {
    # Software pages are purged explicitly, so cache them for 48h
    set beresp.ttl = 48h;
  }

  if (req.url ~ "^/search/forum_search_results" ) {
    # We don't want forum search results to be cached for longer than 5 minutes
    set beresp.ttl = 300s;
  }

  if(req.url == "/robots.txt") {
    # Robots.txt is updated rarely and should be cached for 4 days
    # Purge manually as required
    set beresp.ttl = 96h;
  }

  if(beresp.status == 404) {
    # Cache 404 responses for 15 seconds
    set beresp.http.Cache-Control = "max-age=15";
    set beresp.ttl = 15s;
    set beresp.grace = 15s;
  }
} 
```

在我们的例子中，我们根本不从 Web 后端服务器发送 Cache-Control 标头。

# sql - SQL 条件选择：选择空值或选择非空值

> ID：10284821
> 
> 赞同：-1
> 
> 时间：2012-04-23T16:53:36.077
> 
> 标签：sql, sql-server-2005, select, null

**原始问题：**

我是 SQL Server 的新手，找不到我要找的东西。我正在尝试在 SQL 中创建此逻辑：

```
IF [column] IS NULL THEN
    ( SELECT [value] as [columnname] )
ELSE
    ( SELECT [column] WHERE [column_value] IS NOT NULL ) 
```

基本上，如果整列为空，我想选择并用某个值填充整列。

否则，如果该列不完全为空，我只想选择它的非空值（合并？）。

使用 SQL Server 2005 执行此操作的最佳方法是什么？

**回答（感谢乔希和其他所有人！）**

```
IF EXISTS(SELECT myColumn
          FROM mytable
          WHERE myColumn IS NOT NULL)
    SELECT myColumn as colName
    FROM myTable
    WHERE myColumn is NOT NULL
ELSE
    SELECT [nullReplacementValue] as colName
    FROM myTable 
```

**对困惑的早期澄清：**

编辑：例如，如果给我一个这样的输入表：

```
ColA    ColB    ColC
--------------------
A       null    null
B       null    1
C       null    null 
```

如果我在 ColB 上运行这个 SELECT，它应该返回：

```
ColB
----
null
null
null 
```

（最终我想用一些值替换“null”，但这可能会在以后出现）。

如果我在 ColC 上运行这个 SELECT，它应该返回：

```
ColC
----
1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:23:24.800

如果您只是询问在已知列中的所有值都是 NULL 的情况下默认值的方法，那么您可以使用以下方法：

```
IF EXISTS(SELECT myColumn FROM mytable WHERE myColumn IS NOT NULL)
    SELECT myColumn FROM myTable WHERE myColumn is NOT NULL
ELSE
    UPDATE myTable SET myColumn = myValue 
```

这是检查您关心的列中是否至少有一个值不为空。如果是，则表示您要选择。否则，您将更新所有列，因为在请求非空列时您没有返回结果。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T17:56:58.390

您首先需要了解 SQL 中的四个基本命令。我们将使用以下人员表作为示例

姓名 已婚家属
------- ---------- ----------------
Bill True True
J​​ane False    
Fran True True
Ed False    
Tom False True

* * *

Select -（看起来您已经理解了）允许您根据搜索条件从一个表或多个表中检索数据。

从姓名 = 'Bill' 的人中选择姓名

此语句将返回以下

Name Married Dependents
------- ---------- ----------------
Bill True True

* * *

插入 - 允许您将新记录输入数据库

插入人（姓名、已婚、家属）值（'Jill'、'True'、'False'）

此语句将使人员表看起来像下面的表

Name Married Dependents
------- ---------- ----------------
Bill True真
简 假    
弗兰 真 真
埃德 假    
吉尔 真         
汤姆 假 真

* * *

删除 - 从表中删除记录

从名称 = 'Fran' 的人中删除

此语句将使 Person 表如下所示

Name Married Dependents
-------- ---------- ----------------
Bill True True J
​​ane假         
Ed 假    
Jill 真         
汤姆 假 真

* * *

最后是您要查找的
***Update - 允许您根据您的条件为任意数量的记录更新表

直到今天，如果某人没有受抚养人，您将家属列为空。现在你的老板告诉你，没有家属的人必须在家属栏中填写“False”。您将编写以下语句

UPDATE Person SET Dependents = 'False' WHERE Dependents = NULL

您的表格将如下所示

Name Married Dependents
------- ---------- ----------------
Bill True True
J​​ane False False
Ed假 假
吉尔 真 假
汤姆 假 真

# plugins - CRM 2011 - 插件 - 尝试在插件中执行 HTTP 发布时出现操作超时错误

> ID：10284824
> 
> 赞同：0
> 
> 时间：2012-04-23T16:53:46.690
> 
> 标签：plugins, http-post, dynamics-crm-2011, crm

当我尝试在我的插件（在 PostUpdate 中）中执行 HTTP Post 时遇到问题。我收到“操作已超时”-错误...

下面是 C# 代码：

```
 //PUBLISH TO ROBAROV
                        WebRequest webRequest = WebRequest.Create(newUri);
                        webRequest.Timeout = 2000;
                        webRequest.ContentType = "application/x-www-form-urlencoded";
                        webRequest.Method = "POST";
                        byte[] bytes = Encoding.ASCII.GetBytes(parameters);
                        Stream os = null;
                        try
                        {
                            webRequest.ContentLength = bytes.Length;
                            os = webRequest.GetRequestStream();
                            os.Write(bytes, 0, bytes.Length);
                        }
                        catch (WebException ex)
                        {
                            throw new Exception(ex.Message);
                        }
                        finally
                        {
                            if (os != null)
                            {
                                os.Close();
                            }
                        }                                

                        //ERROR HAPPENS HERE

                        string responseText = "";
                        try
                        { // get the response
                            WebResponse webResponse = webRequest.GetResponse();
                            StreamReader sr = new StreamReader(webResponse.GetResponseStream());
                            responseText = sr.ReadToEnd().Trim();
                        }
                        catch (WebException ex)
                        {
                            throw new Exception("Error with response : " + ex.Message);
                        } 
```

当我尝试获取响应时发生错误 => webRequest.GetResponse();！

我已经在一个简单的“类”库中尝试了代码，它就像一个魅力！有什么我做错了吗？HTTP Post 是指向不在同一个域中的网页....

更新：当我使用 webclient 执行以下操作时也会发生同样的情况......它在普通的“控制台”应用程序中工作：

```
 private string HttpPostTest(string URL)
    {
        WebClient webClient = new WebClient();

        System.Collections.Specialized.NameValueCollection formData = new System.Collections.Specialized.NameValueCollection();
        formData["state"] = "yes";
        byte[] responseBytes = webClient.UploadValues(URL, "POST", formData);
        string Result = Encoding.UTF8.GetString(responseBytes);
        return Result;
    } 
```

我在“事件查看器”中收到以下错误：

```
Inner Exception: System.IO.FileNotFoundException: Could not load file or assembly 'Microsoft.Crm.Setup.DiffBuilder, Version=5.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:27:12.137

看起来它找不到 CRM 程序集：Microsoft.Crm.Setup.DiffBuilder.dll，这是您明确调用方法的东西吗？如果是这样，我会检查程序集是否已使用插件注册（下面的一些说明）。如果不是，那么从汇总 6 开始，该库会出现一些错误，您使用的是哪个汇总？如果您不使用它，您可以考虑汇总 7。

您的插件是在数据库中注册的还是在磁盘上注册的？

如果在磁盘上注册，那么您将需要 CRM 安装文件夹下 /server/bin/assembly 目录中的外部程序集。

如果它已在数据库中注册并且您包含自定义外部程序集（错误表明无法加载程序集，因此这听起来可能），那么您必须在将程序集注册到数据库之前进行 ILMerge。这将解释为什么它适用于您的本地控制台应用程序，而不是作为插件运行时。

如果是这种情况，那么您可以按照以下脚本进行 ILMerge 并注册您的“组合”程序集：-

[http://www.2wconsulting.com/2010/11/using-ilmerge-with-crm-plugin-assemblies/](http://www.2wconsulting.com/2010/11/using-ilmerge-with-crm-plugin-assemblies/)

# android - 2个安卓设备之间的交互

> ID：10284827
> 
> 赞同：0
> 
> 时间：2012-04-23T16:53:58.683
> 
> 标签：android, sockets

我可以通过服务器（android 设备）向带有套接字的客户端（另一个 android 设备）发送命令吗？像使某些按钮不可点击的命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T16:58:21.880

您可以将数据从一部手机发送到服务器——服务器可以将内容推送到另一台设备（如果它已登录服务）（这使设备独一无二）。传入的数据并触发一个动作，在这种情况下使一些按钮不可点击。

# excel - Excel 2010 的连接字符串？

> ID：10284833
> 
> 赞同：1
> 
> 时间：2012-04-23T16:54:29.967
> 
> 标签：excel, office-interop, office-automation

我正在使用 OLEDB 连接到 Excel 2010。此操作所需的连接字符串是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T19:16:58.243

从[这里](http://www.connectionstrings.com/excel)：

```
Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\MyExcel.xls;Extended Properties="Excel 8.0;HDR=Yes;IMEX=1"; 
```

或者

```
OLEDB;Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\MyExcel.xls;Extended Properties="Excel 8.0;HDR=Yes;IMEX=1"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-15T20:22:00.283

您发布的连接字符串适用于 2003 年或更早的版本。Jet 将不支持 2007 或更高版本。

试试这个：

```
 Provider = Microsoft.ACE.OLEDB.12.0;
 Data Source = c:\myFolder\myExcel2007file.xlsx;
 Extended Properties = "Excel 12.0 Xml;HDR ="YES"; 
```

或尝试[http://www.connectionstrings.com/excel-2010/](http://www.connectionstrings.com/excel-2010/)

# java - 破解单身人士

> ID：10284834
> 
> 赞同：1
> 
> 时间：2012-04-23T16:54:39.253
> 
> 标签：java, classpath

我正在经历单例模式，下面是我的单例类..

```
 package CrackingSingleton;

public class SingletonObject {
    private static SingletonObject ref; 
    private SingletonObject () //private constructor
    {   
    }

    public  static synchronized   SingletonObject getSingletonObject()
    {if (ref == null)
    ref = new SingletonObject();
    return ref;
        }

    public Object clone() throws CloneNotSupportedException
    {throw new CloneNotSupportedException ();
    }
    } 
```

我正在尝试破解它，下面是我的一段代码......

```
 package CrackingSingleton;
import java.lang.reflect.Constructor;
import java.lang.reflect.InvocationTargetException;

public class CrackingSingleton {    
     public static void main(String[] args) throws ClassNotFoundException,
       IllegalArgumentException, SecurityException,
       InstantiationException, IllegalAccessException,
       InvocationTargetException {      
        //First statement retrieves the Constructor object for private constructor of SimpleSingleton class.
        Constructor pvtConstructor = Class.forName("CrackingSingleton.SingletonObject.java").getDeclaredConstructors()[0];
        //Since the constructor retrieved is a private one, we need to set its accessibility to true.
        pvtConstructor.setAccessible(true);
        //Last statement invokes the private constructor and create a new instance of SimpleSingleton class.
         SingletonObject  notSingleton1 = ( SingletonObject) pvtConstructor.newInstance(null);
         SingletonObject  notSingleton2 = ( SingletonObject) pvtConstructor.newInstance(null);
    }
} 
```

但是在执行上面的类 CrackingSingleton 时，它会抛出错误......

```
Exception in thread "main" java.lang.ClassNotFoundException: CrackingSingleton.SingletonObject.java
at java.net.URLClassLoader$1.run(Unknown Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
at java.lang.ClassLoader.loadClass(Unknown Source)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Unknown Source)
at CrackingSingleton.CrackingSingleton.main(CrackingSingleton.java:14) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:57:52.003

您正在添加`.java`到您的类名。Java 类名不包括`.java`. 所以你的代码应该读

```
Constructor pvtConstructor = Class.forName("crackingsingleton.SingletonObject").getDeclaredConstructors()[0]; 
```

请注意，我将您的包名称更改为不大写。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:02:20.927

发生这种情况是因为您要求的课程错误。顺便说一句，堆栈跟踪中也清楚地说明了这一点。

```
// This should work
// There is no need to add .java or .class declaration. 
Class.forName("CrackingSingleton.SingletonObject") 
```

话虽如此，那么您可能需要考虑使用[ENUM 单例模式](https://stackoverflow.com/questions/70689/efficient-way-to-implement-singleton-pattern-in-java)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T17:29:12.587

我建议尝试这个。`enum`更简单，更健壮。

```
package crackingSingleton;

public enum SingletonObject {
    INSTANCE;
} 
```

* * *

```
package crackingSingleton;

import java.lang.reflect.Constructor;

public class CrackingSingleton {
    public static void main(String... args) throws Exception {
        //First statement retrieves the Constructor object for private constructor of SimpleSingleton class.
        Constructor pvtConstructor = crackingSingleton.SingletonObject.class.getDeclaredConstructors()[0];
        //Since the constructor retrieved is a private one, we need to set its accessibility to true.
        pvtConstructor.setAccessible(true);
        //Last statement invokes the private constructor and create a new instance of SimpleSingleton class.
        SingletonObject  notSingleton1 = ( SingletonObject) pvtConstructor.newInstance(null);
        SingletonObject  notSingleton2 = ( SingletonObject) pvtConstructor.newInstance(null);
    }
} 
```

印刷

```
Exception in thread "main" java.lang.IllegalArgumentException: Cannot reflectively create enum objects
    at java.lang.reflect.Constructor.newInstance(Constructor.java:520)
    at crackingSingleton.CrackingSingleton.main(CrackingSingleton.java:12) 
```

# java - 阅读联系人时应用程序崩溃

> ID：10284836
> 
> 赞同：1
> 
> 时间：2012-04-23T16:54:42.457
> 
> 标签：java, android, listview, adapter

我在尝试读取用户的联系人时发生了崩溃，我想是因为模拟器的原因，但我想三重检查，因为我没有基于 Android 的手机。Logcat 给出了一个错误，它无法读取行“id”我错误地命名了那个字符串吗？

最后，我将如何实现一个对话框，看看用户是否希望应用程序读取联系人？

非常感谢:) 代码：

```
private void checkandImportContacts() {
    // TODO Auto-generated method stub
    SharedPreferences sp = getSharedPreferences(PREFS_CHECK, 0);
     String checkfirstime = sp.getString("key3", null);
     if(checkfirstime !=null && equals("sdhdasudafdsugdiasgdas38ey98d1diass")) {
         finish();
     } else {
         Cursor cursor = getContacts();
           while (cursor.moveToNext()) {
               String displayName = cursor.getString(cursor.getColumnIndex(ContactsContract.Data.DISPLAY_NAME));
              Toast.makeText(getApplicationContext(), displayName, Toast.LENGTH_LONG).show();
       }
}
     }

private Cursor getContacts() {
    Uri uri = ContactsContract.Contacts.CONTENT_URI;
    String[] projection = new String[] { ContactsContract.Contacts._ID, ContactsContract.Contacts.DISPLAY_NAME };
    String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = ‘" + ("1") + "’";
    String[] selectionArgs = null;
    String sortOrder = ContactsContract.Contacts.DISPLAY_NAME+ " COLLATE LOCALIZED ASC";
    return managedQuery(uri, projection, selection, selectionArgs, sortOrder);
} 
```

日志猫：

```
04-23 16:49:48.288: E/AndroidRuntime(437): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.gta5news.bananaphone/com.gta5news.bananaphone.ChatService}: android.database.sqlite.SQLiteException: no such column: ‘1’: , while compiling: SELECT _id, display_name FROM view_contacts_restricted WHERE (in_visible_group = ‘1’) ORDER BY display_name COLLATE LOCALIZED ASC
04-23 16:49:48.288: E/AndroidRuntime(437):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
04-23 16:49:48.288: E/AndroidRuntime(437):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
04-23 16:49:48.288: E/AndroidRuntime(437):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
04-23 16:49:48.288: E/AndroidRuntime(437):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
04-23 16:49:48.288: E/AndroidRuntime(437):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-23 16:49:48.288: E/AndroidRuntime(437):  at android.os.Looper.loop(Looper.java:123)
04-23 16:49:48.288: E/AndroidRuntime(437):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-23 16:49:48.288: E/AndroidRuntime(437):  at java.lang.reflect.Method.invokeNative(Native Method)
04-23 16:49:48.288: E/AndroidRuntime(437):  at java.lang.reflect.Method.invoke(Method.java:521)
04-23 16:49:48.288: E/AndroidRuntime(437):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-23 16:49:48.288: E/AndroidRuntime(437):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-23 16:49:48.288: E/AndroidRuntime(437):  at dalvik.system.NativeStart.main(Native Method)
04-23 16:49:48.288: E/AndroidRuntime(437): Caused by: android.database.sqlite.SQLiteException: no such column: ‘1’: , while compiling: SELECT _id, display_name FROM view_contacts_restricted WHERE (in_visible_group = ‘1’) ORDER BY display_name COLLATE LOCALIZED ASC
04-23 16:49:48.288: E/AndroidRuntime(437):  at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:158)
04-23 16:49:48.288: E/AndroidRuntime(437):  at android.database.DatabaseUtils.readExceptionFromParcel(DatabaseUtils.java:114)
04-23 16:49:48.288: E/AndroidRuntime(437):  at android.content.ContentProviderProxy.bulkQueryInternal(ContentProviderNative.java:330)
04-23 16:49:48.288: E/AndroidRuntime(437):  at android.content.ContentProviderProxy.query(ContentProviderNative.java:366)
04-23 16:49:48.288: E/AndroidRuntime(437):  at android.content.ContentResolver.query(ContentResolver.java:245)
04-23 16:49:48.288: E/AndroidRuntime(437):  at android.app.Activity.managedQuery(Activity.java:1520)
04-23 16:49:48.288: E/AndroidRuntime(437):  at com.gta5news.bananaphone.ChatService.getContacts(ChatService.java:73)
04-23 16:49:48.288: E/AndroidRuntime(437):  at com.gta5news.bananaphone.ChatService.checkandImportContacts(ChatService.java:56)
04-23 16:49:48.288: E/AndroidRuntime(437):  at com.gta5news.bananaphone.ChatService.onCreate(ChatService.java:46)
04-23 16:49:48.288: E/AndroidRuntime(437):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
04-23 16:49:48.288: E/AndroidRuntime(437):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:02:11.883

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:03:04.757

```
private void getDetails(){
        Uri uri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI;
        ContentResolver cr = getContentResolver();
        Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,null, null, null, null);
        String[] projection    = new String[] {ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                        ContactsContract.CommonDataKinds.Phone.NUMBER };
        Cursor names = getContentResolver().query(uri, projection, null, null, null);

        int indexName = names.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME);
        int indexNumber = names.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER);
        names.moveToFirst();
        do {

            String name   = names.getString(indexName);
            Log.e("Name new:", name);
            String number = names.getString(indexNumber);
            Log.e("Number new:","::"+number);

        } while (names.moveToNext());
    } 
```

The above retrun all the name and number from from your contact database..

# c - 为字符缓冲区分配可变长度数组

> ID：10284841
> 
> 赞同：1
> 
> 时间：2012-04-23T16:55:12.387
> 
> 标签：c, arrays, memory-management, stack

考虑这段代码（为简洁起见，删除了错误检查）：

```
int main()
{
        int fd, nread;
        struct stat st_buff;

        /* Get information about the file */
        stat("data",&st_buff);
        /* Open file data for reading */
        char strbuff[st_buff.st_blksize];
        fd = open("data",O_RDONLY);

        /* read and write data */
        do {
                nread = read(fd,strbuff,st_buff.st_blksize);
                if (!nread)
                        break;
                write(STDOUT_FILENO, strbuff, nread);
        } while (nread == st_buff.st_blksize);

        /* close the file */
        close(fd);

        return 0;
} 
```

这段代码在堆栈上为缓冲区分配内存（如果我没有误解的话。）还有`alloca()`我可以用于相同目的的函数（我猜）。我想知道是否有任何理由让我想选择一个而不是另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:05:37.370

您通常希望像上面那样使用 VLA，因为它干净且标准，而`alloca`丑陋且不在标准中（好吧，无论如何，不​​在 C 标准中-它可能在 POSIX 中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:11:16.717

I'm pretty sure both are the same at machine-code level. Both take the memory from the stack. This has the following implications:

1.  The `esp` is moved by an appropriate value.
2.  The taken stack memory is `probe`'d.
3.  The function will have to have a proper stack frame (i.e. it should use `ebp` to access other locals).

Both methods do this. Both don't have a "conventional" error handling (raise a SEH exception in Windows and whatever on Linux).

There is a reason to choose one over another if you mind about portability. VLAs are not standard IMHO. `alloca` seems somewhat more standard.

P.S. consider using `malloca` ?

# c++ - list< T >::iterator 还是语法错误？

> ID：10284842
> 
> 赞同：1
> 
> 时间：2012-04-23T16:55:13.083
> 
> 标签：c++

我目前收到以下编译错误：

```
In function 'int main()':
error: expected primary-expression before '>' token
error: missing template arguments before 'i'
error: expected ';' before 'i'
error: 'i' was not declared in this scope 
```

我在下面的代码块中突出显示了第一个错误标志所在的行：

```
// test highscoresfilemanager reading & writing
/*
HighScorePair paira("holly", 10);
HighScorePair pairb("carl", 20);
*/
list< HighScorePair > list;
//list.push_back(paira); list.push_back(pairb);
HighScoresFileManager::GetInstance()->ReadFileToList(list);
list< HighScorePair >::iterator i; //ERROR FLAGS HERE ODDLY
for(i = list.begin(); i != list.end(); ++i)
   std::cout << (*i).playerName << " " << (*i).playerScore << std::endl; 
```

我留下了一些注释掉的文本，我以前用来测试某些东西，因为我确信注释掉的文本可以完美地工作，如果它有效，我不明白为什么我添加的新代码不起作用，我'我没有使用任何新的类或任何东西，我只是试图获得一个迭代器设置。

我觉得很粗鲁，因为我认为我基本上是在要求某人检查我的语法，我一直在阅读它并认为我一定是在某处遗漏了冒号或其他东西，但我就是看不出问题所在！一个新的眼睛将不胜感激！我很感激您可能想要更多代码（我可以提供），但是就像我说的那样，如果注释掉的东西有效，那么我*认为*新代码应该可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T16:56:53.460

不要调用你的变量`list`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T17:06:00.097

首先，我假设你有一个`using namespace std;`地方；这通常不是一个好主意。但是基本问题仍然存在（尽管不是 for `list`，因为您会编写 `std::list）：您已经定义了一个与更大范围内的符号同名的局部变量；局部变量从其声明点隐藏该符号，直到它超出范围。所以直到这一行：

```
list< HighScorePair> list; 
```

,`list`指的是你用 拉入全局范围的符号`using namespace std;`，在那一行之后，直到块的末尾，它指的是你刚刚在此处定义的变量。该变量 **不是**模板，其类型不支持`<`，因此`list <`不合法。

As a general rule, I would recommend against hiding names. It leads to confusion. Also: type names should be unqualified nouns (like `list`), variable names should be qualified nouns (like `currentList`). At least in principle; I can see cases where such a rule would be overkill.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T16:58:55.040

猜猜你写了`using namespace std;`当你调用与 std:: 中的函数关联的变量时，它会抛出编译错误。定义变量（ std::list ）时只需使用确切的命名空间。

# redirect - 如何强制所有浏览器通过代理？

> ID：10284846
> 
> 赞同：0
> 
> 时间：2012-04-23T16:55:28.510
> 
> 标签：redirect, proxy

[我的问题和这个](http://superuser.com/questions/29701/global-proxy-settings-for-windows)有点相似

但是，我希望以编程方式执行此操作......出于安全原因，我的代理必须在浏览器中没有任何事先配置的情况下运行（代理设置..）。换句话说，强制所有http请求（浏览器）通过我的代理，无需任何配置，因为用户最容易删除代理设置......

有什么技巧可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:43:37.800

如果这是 Windows 域，请使用组策略来管理代理设置。

如果你试图颠覆性地做到这一点，你可以阅读这个

[http://perimetergrid.com/wp/2008/01/11/wpad-internet-explorers-worst-feature/](http://perimetergrid.com/wp/2008/01/11/wpad-internet-explorers-worst-feature/)

一定要爱WPAD！

我希望它有所帮助，

直流

# python - Python：Matplotlib 注释换行符（有和没有乳胶）

> ID：10284847
> 
> 赞同：24
> 
> 时间：2012-04-23T16:55:31.460
> 
> 标签：python, latex, matplotlib

我有一个非常基本的问题：如何使用“注释”命令在 python 中使用 matplotlib 进行换行。我尝试了“\”和“\n”，但它不起作用。以及如何为“Latex”注释和普通文本注释执行此操作？

非常感谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-23T17:59:02.480

你到底尝试了什么？

您是否偶然使用了原始字符串（例如`r"whatever"`）？

`'\n'`完美地工作，但如果你使用原始字符串来避免乳胶序列被解释为转义，它将被 python 解释为`'\'`而`'n'`不是换行符。

举个例子：

```
import matplotlib.pyplot as plt

plt.annotate('Testing\nThis\nOut', xy=(0.5, 0.5))

plt.show() 
```

![在此处输入图像描述](../Images/6248ffe98df97f076319eb3676fad332.png)

另一方面，如果我们使用原始字符串：

```
import matplotlib.pyplot as plt

plt.annotate(r'Testing\nThis\nOut', xy=(0.5, 0.5))

plt.show() 
```

![在此处输入图像描述](../Images/1f62ef3e07fb02d4f91b7ec2e2c0025a.png)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-07-17T15:02:14.627

但是，如果您需要两者，请考虑以下示例：

```
import matplotlib.pyplot as plt

a = 1.23
b = 4.56

annotation_string = r"Need 1$^\mathsf{st}$ value here = %.2f" % (a) 
annotation_string += "\n"
annotation_string += r"Need 2$^\mathsf{nd}$ value here = %.2f" % (b)

plt.annotate(annotation_string, xy=(0.5, 0.5))

plt.show() 
```

这给了你：

![在此处输入图像描述](../Images/fd747294a9433eff9cdc67ffee84e641.png)

关键是预先组装字符串，使用`+=`. 这样，您可以在同一注释中使用原始字符串命令（由 表示`r`）和换行符 ( )。`\n`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-03-04T01:50:10.520

您可以在定义注释字符串时使用三引号，如在 中 `string="""some text"""`，这样您在字符串中键入的实际换行符将被解释为输出中的换行符。这是一个示例，其中包括乳胶和代码其他部分的一些数字参数的打印

```
import matplotlib.pyplot as plt

I = 100
T = 20

annotation_string = r"""The function plotted is:
$f(x) \ = \ \frac{{I}}{{2}} \cos\left(2 \pi \ \frac{{x}}{{T}}\right)$ 

where:
$I = ${0}
$T = ${1}""".format(I, T)

plt.annotate(annotation_string, xy=(0.05, 0.60), xycoords='axes fraction',
                                             backgroundcolor='w', fontsize=14)

plt.show() 
```

我添加了一些“附加功能”：

*   开`r`三引号前不久，以方便 LaTeX 解释器

*   双大括号`{{}}`，这样`.format()`命令和 LaTeX 就不会相互混淆

*   该`xycoords='axes fraction'`选项，以便指定具有小数值的字符串相对于绘图的宽度和高度的位置
*   选项，在`backgroundcolor='w'`注释周围放置一个白色选框（在与您的绘图重叠的情况下方便）

得到的情节是这样的： [![在此处输入图像描述](../Images/5023f4552e749023a161bf04fb6b2b2e.png)](https://i.stack.imgur.com/cFvqz.png)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2017-06-12T18:40:02.923

快速解决方案

`plt.annotate("I am \n"+r"$\frac{1}{2}$"+"\n in latex math environment", xy=(0.5, 0.5))`

# java - java - 如何在java中使用windows API获取当前鼠标光标类型？

> ID：10284849
> 
> 赞同：1
> 
> 时间：2012-04-23T16:55:37.203
> 
> 标签：java, windows, mouse-cursor

如何在 java 中使用 windows API 获取当前鼠标光标类型？（光标类型表示：指针、文本光标、忙碌光标和其余类别）

我在[这里找到了一个链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648389%28v=vs.85%29.aspx)

api的给出为

```
BOOL WINAPI GetCursorInfo(
  __inout  PCURSORINFO pci
); 
```

但是如何在java中使用api

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:14:35.480

我认为您最接近的是通过：

1.  在您的 java 应用程序中找到作为 focusOwner 的组件
2.  调用 getCursor().getType();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:13:52.310

You can use JNA - java native access. It provides access to native libraries, like DLL in windows. [https://github.com/twall/jna#readme](https://github.com/twall/jna#readme)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T11:12:54.700

这对我在 Win7 上非常有效。该脚本在 Python 中，但应该很容易翻译成任何其他语言。当然，它只有在相应的应用程序不使用自定义光标时才有效：

```
from win32con import IDC_APPSTARTING, IDC_ARROW, IDC_CROSS, IDC_HAND, \
    IDC_HELP, IDC_IBEAM, IDC_ICON, IDC_NO, IDC_SIZE, IDC_SIZEALL, \
    IDC_SIZENESW, IDC_SIZENS, IDC_SIZENWSE, IDC_SIZEWE, IDC_UPARROW, IDC_WAIT
from win32gui import LoadCursor, GetCursorInfo

def get_current_cursor():
    curr_cursor_handle = GetCursorInfo()[1]
    return Cursor.from_handle(curr_cursor_handle)

class Cursor(object):
    @classmethod
    def from_handle(cls, handle):
        for cursor in DEFAULT_CURSORS:
            if cursor.handle == handle:
                return cursor
        return cls(handle=handle)
    def __init__(self, cursor_type=None, handle=None):
        if handle is None:
            handle = LoadCursor(0, cursor_type)
        self.type = cursor_type
        self.handle = handle

DEFAULT_CURSORS \
    = APPSTARTING, ARROW, CROSS, HAND, HELP, IBEAM, ICON, NO, SIZE, SIZEALL, \
      SIZENESW, SIZENS, SIZENWSE, SIZEWE, UPARROW, WAIT \
    = Cursor(IDC_APPSTARTING), Cursor(IDC_ARROW), Cursor(IDC_CROSS), \
      Cursor(IDC_HAND), Cursor(IDC_HELP), Cursor(IDC_IBEAM), Cursor(IDC_ICON), \
      Cursor(IDC_NO), Cursor(IDC_SIZE), Cursor(IDC_SIZEALL), \
      Cursor(IDC_SIZENESW), Cursor(IDC_SIZENS), Cursor(IDC_SIZENWSE), \
      Cursor(IDC_SIZEWE), Cursor(IDC_UPARROW), Cursor(IDC_WAIT) 
```

# objective-c - 将一个数组中的所有元素与另一个数组进行比较

> ID：10284850
> 
> 赞同：3
> 
> 时间：2012-04-23T16:55:39.517
> 
> 标签：objective-c, ios, xcode, loops

假设我有三个可变数组：arr1、arr2 和 arr3。我想将arr1中的所有元素与arr2中的每个元素进行比较，如果arr2中的一个元素包含arr1中的所有元素，我想将它添加到arr3中。所以我认为它看起来像我下面的代码。在 Objective-C 中是否有一些我不知道的智能功能，或者有什么方法可以做到这一点？

```
for(int i; i < arr2.count; i++)
{
  if([arr2 objectAtIndex:i] containAllElementsInArray:arr1]])
  {
    [arr3 addObject:[arr2 objectAtIndex:i]];
  }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T17:47:16.043

查看一个数组是否包含另一个数组的所有元素的最佳方法是使用 NSSet。NSSet 将是一组不同对象的静态集合，这意味着当您从数组创建一个集合时，该集合将只包含数组中每个不同对象的 1 个条目。换句话说，一个数组可以有一个对象的多个副本，一个集合每个对象只有一个副本。

使用 NSSet 的重要部分是能够调用 isSubsetOfSet 方法：

> isSubsetOfSet：返回一个布尔值，指示接收集中的每个对象是否也存在于另一个给定集中。

```
- (BOOL)isSubsetOfSet:(NSSet *)otherSet 
```

您将需要从 arr1 创建一个集合并将其与 arr2 中的每个元素进行比较，以查看它是否是该元素的子集...

```
NSSet *arr1set = [NSSet setWithArray:arr1];
NSSet *arr2set = [NSSet setWithArray:[arr2 objectAtIndex:i]];

if ([arr1set isSubsetOfSet:arr2set]) {
    // then the element [arr2 objectAtIndex:i] contains all the elements of arr1
    [arr3 addObject:[arr2 objectAtIndex:i]];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T17:39:09.200

完成，在 6 行代码中：

```
NSArray *intersectArray(NSArray *arr1, NSArray *arr2)
{
    NSMutableSet *resultSet = [NSMutableSet setWithArray:arr1];
    [resultSet intersectSet:[NSSet setWithArray:arr2]];

    return [resultSet allObjects];
} 
```

因为`NSSet`可以直接复制 a 的底层缓冲区`NSArray`，所以就性能而言，这应该非常有效。

如果您愿意，这也可以很容易地转换为一个类别。

# php - 从像素数组创建图像服务器端

> ID：10284851
> 
> 赞同：0
> 
> 时间：2012-04-23T16:55:41.387
> 
> 标签：php, javascript, canvas

好的，在我的[上一个问题中](https://stackoverflow.com/questions/10231310/canvas-todataurl-workaround)，我发现我正在使用的浏览器由于某种原因不支持 toDataURL()。我尝试使用诸如[todataur-png-js 之](http://code.google.com/p/todataurl-png-js/)类的解决方法，但无济于事，因为它也失败了。我遇到了一种可能性，即我可以让 PHP 根据画布中的像素数据构建图像并将其保存为图像。但是，我对画布没有太多经验，也不知道如何做这样的事情。有任何想法吗？朝正确的方向轻推也足够了。=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:19:57.977

如果您已经有一个像素数组，您可以使用 GD 库的[`imagecreatetruecolor()`](http://us3.php.net/manual/en/function.imagecreatetruecolor.php)和[`imagesetpixel()`](http://us3.php.net/manual/en/function.imagesetpixel.php)函数来完成此操作：

```
// Assume $pixelArray is a 2-dimensional array of colors for the pixels

// Grab the dimensions of the pixel array
$width = count($pixelArray, 0);
$height = count($pixelArray);

// Create the image resource
$img = imagecreatetruecolor($width, $height);

// Set each pixel to its corresponding color stored in $pixelArray
for ($y = 0; $y < $height; ++$y) {
    for ($x = 0; $x < $width; ++$x) {
        imagesetpixel($img, $x, $y, $pixelArray[$y][$x]);
    }
}

// Dump the image to the browser
header('Content-Type: image/png');
imagepng($img);

// Clean up after ourselves
imagedestroy($img); 
```

如果要将图像保存到磁盘而不是将其转储到浏览器，只需省略对的调用`header()`并将路径`imagepng()`作为第二个参数传递：

```
imagepng($img, '/some/path/to/your/desired/image.png'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:24:54.987

目前尚不清楚您是否能够在 Netfront 浏览器中获取画布的像素数据。

在您的示例页面中，更改按钮处理程序代码：

```
var cv=document.getElementsByTagName('canvas')[0];document.documentElement.style.background='url('+cv.toDataURL()+')'; 
```

对此：

```
var cv=document.getElementsByTagName('canvas')[0];alert(cv.toDataURL()); 
```

它是否显示`alert()`弹出的任何像素数据？

如果是这样，那么您似乎无法在此浏览器的背景图像中使用数据 URL。如果没有，那么看起来您的画布`getImageData()`在引擎盖下不支持。

# c - 使用 libx11 截屏

> ID：10284858
> 
> 赞同：4
> 
> 时间：2012-04-23T16:56:14.870
> 
> 标签：c, screenshot, x11

我目前正在尝试使用 libx11 截屏

```
#include <X11/Xlib.h>
#include <X11/Xutil.h>
#include <stdio.h>

int main(void) {
XImage* pic;
Display* dpl;
unsigned int buffer_size;

dpl = XOpenDisplay("127.0.0.1:0.0");

pic = XGetImage(dpl, RootWindow(dpl, DefaultScreen(dpl)), 10, 10, 201, 201,
        AllPlanes, ZPixmap);
} 
```

如果我使用 -lX11 编译代码并运行它，我会不断遇到分段错误。有任何想法吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:03:00.917

X11 服务器通常不侦听 TCP/IP localhost，而是侦听 Unix 套接字。无论如何，您不应该硬编码 X11 服务器的地址。试试这个：

```
dpl = XOpenDisplay(NULL);
assert(dpl); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:06:10.323

您应该检查是否`dpl`为 NULL。

我有根据的猜测是该 ip 无法正常工作。大多数发行版**不允许**通过 tcp 套接字访问 xserver，所以我猜你必须启用它们（它们被 nolisten 禁用）。

# jquery - 如何分析文本区域的内容以显示链接和图像？

> ID：10284860
> 
> 赞同：0
> 
> 时间：2012-04-23T16:56:26.740
> 
> 标签：jquery, django, text, lexical-analysis

我正在建立一个简单的网站，用户可以在其中发表关于“事物”的评论。

我想做的是以某种方式“分析”他们发布的评论以检测链接（并提供标签）图像（可能显示预览）、视频等。

我正在用 django 构建网站。我认为必须有某种库来做那个服务器端，并且必须是一些 JQuery 插件。

你有什么建议吗？你知道什么可以帮助我吗？做客户端还是服务器端更好？

非常感谢！

**编辑：**

我将使用一个例子。假设用户发布此评论：

> “大家好，我喜欢这个新网站：example.com”

那应该翻译成：

```
"Hello guys, i love this new site: <a href='http://example.com'>example.com</a>" 
```

请注意，我不想使用所见即所得的编辑器！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:21:45.887

根据您想要实现的灵活性，您可能需要编写一些正则表达式。如果您不知道它们是什么或如何使用它们，它们允许您搜索字符串中的模式并对其进行操作。有关更多信息，请查看此处：

[http://www.regular-expressions.info/tutorial.html](http://www.regular-expressions.info/tutorial.html)

如果您决定在客户端执行此操作，类似于 Stack Overflow 的处理方式，您可以使用以下内容：

```
post = "Hello guys, I love this new site: example.com"
post = post.replace(/([\w0-9-]+\.)+(com|net|org|info)/, '<a href="http://$&/">$&</a>'); 
```

结果是

```
Hello guys, I love this new site: <a href="http://example.com/">example.com</a> 
```

（请注意，这不会抓取所有可能的 URL，只是一些常见的 URL）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:16:59.177

看看[Django 标记模块](https://docs.djangoproject.com/en/dev/ref/contrib/markup/)。由于安全性，我使用markdown的安全模式。

# c# - 并非所有程序集都从 bin 文件夹加载到 AppDomain

> ID：10284861
> 
> 赞同：22
> 
> 时间：2012-04-23T16:56:35.490
> 
> 标签：c#, reflection, assemblies

我有以下方法应该检索加载的本地（在 bin 文件夹中）程序集的列表：

```
static IEnumerable<Assembly> GetLocalAssemblies()
    {
        Assembly callingAssembly = Assembly.GetCallingAssembly();
        string path = new Uri(Path.GetDirectoryName(callingAssembly.CodeBase)).AbsolutePath;

        var assemblies = AppDomain.CurrentDomain.GetAssemblies();
        return assemblies.Where(x => !x.IsDynamic && new Uri(x.CodeBase).AbsolutePath.Contains(path)).ToList();
    } 
```

但是，程序集列表缺少我需要的几个程序集。我需要的程序集是托管的（c# .net 4），在项目中被引用，并且存在于 bin 文件夹中。

为什么应用程序启动时 bin 文件夹中的二进制文件没有被扫入 AppDomain？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-23T17:04:17.823

Adil 有，但更详细：

.NET CLR 使用即时编译。除其他外，这意味着它会在首次使用时加载程序集。因此，尽管正在使用的程序集引用了程序集，但如果 CLR 尚未需要这些引用来执行程序，则它们不会被加载，因此不会出现在当前 AppDomain 的程序集列表中。

另一件可能适用也可能不适用的事情是，如果您在 GAC 中有相同版本的程序集，CLR 会优先使用 GAC 而不是本地程序集，除非在 DEVPATH 环境变量中指定了这些程序集的路径。如果是这种情况，并且 CLR 正在使用任何“缺失”程序集的 GAC 副本，它们将具有不同的 CodeBase 值，并且不会显示在您的 Linq 查询结果中。

另一件事：您可能需要考虑使用 Location 属性而不是 CodeBase 属性。Location 属性包含在运行时加载的程序集的绝对路径。CodeBase 属性略有不同，并且对于项目的完整版本中的所有程序集可能并不相同。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-23T17:01:36.160

CurrentDomain.GetAssemblies() 仅返回加载的程序集，而不是执行文件夹中可用的所有程序集。

这就是微软所说的“GetAssemblies 方法来获取已加载到应用程序域中的所有程序集的列表”。[点击这里](http://msdn.microsoft.com/en-us/library/system.appdomain.getassemblies.aspx)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-23T17:02:30.200

尝试在这些缺少的程序集中启动任何类，然后再次运行您的代码。只有在第一次调用与该程序集相关的任何内容时，才在需要时加载程序集。

# class - 需要单个实例但不通过单例

> ID：10284862
> 
> 赞同：0
> 
> 时间：2012-04-23T16:56:35.333
> 
> 标签：class, singleton, instance

我这里有问题。我有两个 A 类和 B 类。A 类消耗 B 类，我们不希望任何其他类创建 B 类的实例。只有 A 类有权创建 B 类的实例。

同时，我不想要 B 的单例实例，也不想在 A 类中定义 B 类。

任何帮助。

提前致谢。

-哈沙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:17:58.693

我不太了解您的问题，但是您可以在与 A 类相同的 .cpp 文件中定义 B 类，因此没有其他类甚至会看到该定义，因此无法创建 B 类的实例，例如

一个.hpp

```
class B;

class A {
    B *b;
    A();
    ...
}; 
```

a.cpp

```
#include <a.hpp>

class B
{
    ...
};

A::A()
{
    b = new B();
}

A::~A()
{
    delete B;
} 
```

如果您希望 B 类位于单独的文件中，您可以将其放入 b.cpp 并将此文件包含在 a.cpp 中。您还可以将 B 的构造函数设为私有并使用[朋友类](http://www.cplusplus.com/doc/tutorial/inheritance/)。

# ruby-on-rails-3 - 导轨型号名称单个字母错误

> ID：10284864
> 
> 赞同：0
> 
> 时间：2012-04-23T16:56:40.137
> 
> 标签：ruby-on-rails-3, activerecord, console, activemodel

Rails 中的这个模型名称怎么了？，为什么这不起作用？

```
rails g model a_b_c name:text

rake db:migrate

rails c

ABC 
```

> NameError: 未初始化的常量 ABC

现在，任何理智的人都会问我，为什么我要创建一个模型 a_b_c？。那完全不是我在做什么。

我有 50 个模型，名为 books_f1_availabilities..books_f50_availabilities。

现在，有一个模型，我必须在其中指定 books_availabilities 与供应商的关系，所以当我将 books_f10_availabilities 重命名为 books_v_f10_availabilities 时，当我在 rails 控制台中访问该模型时，会出现上述错误，

```
BooksVF10Availabilities 
```

> NameError: 未初始化的常量 BooksVF10Availabilities

请指教。

# c# - 通过 C# GET 和 POST 到 ASP.NET MVC

> ID：10284870
> 
> 赞同：3
> 
> 时间：2012-04-23T16:57:24.270
> 
> 标签：c#, windows, webrequest

我有一个用 C# 编写的 Windows 应用程序。此应用程序将部署到我用户的桌面。它将与已经创建的后端交互。后端是用 ASP.NET MVC 3 编写的。它公开了许多 GET 和 POST 操作，如下所示：

```
[AcceptVerbs(HttpVerbs.Get)] 
public ActionResult GetItem(string id, string caller) 
{ 
  // Do stuff 
}

[AcceptVerbs(HttpVerbs.Post)]
public ActionResult SaveItem(string p1, string p2, string p3)
{
  // Do stuff
} 
```

我团队中的 Web 开发人员正在通过 JQuery 成功地与这些操作进行交互。所以我知道他们工作。但我需要弄清楚如何从我的 Windows C# 应用程序中与它们交互。我使用的是 WebClient，但遇到了一些性能问题，因此有人请我使用 WebRequest 对象。为了诚实地尝试这一点，我尝试了以下方法：

```
WebRequest request = HttpWebRequest.Create("http://www.myapp.com/actions/AddItem"); 
request.Method = "POST"; 
request.ContentType = "application/x-www-form-urlencoded";  
request.BeginGetResponse(new AsyncCallback(AddItem_Completed), request); 
```

我的问题是，我不确定如何将数据（参数值）实际发送回我的端点。如何将参数值发送回我的 GET 和 POST 操作？有人可以给我一些帮助吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T17:10:19.777

一种方法是将输入写入请求流。您需要将输入序列化为字节数组请参见下面的示例代码

```
 string requestXml = "someinputxml";
        byte[] bytes = Encoding.UTF8.GetBytes(requestXml);

        var request = (HttpWebRequest)WebRequest.Create(url);
        request.Method = "POST";
        request.ContentLength = bytes.Length;
        request.ContentType = "application/xml";

        using (var requestStream = request.GetRequestStream())
        {
            requestStream.Write(bytes, 0, bytes.Length);
        }

        using (var response = (HttpWebResponse)request.GetResponse())
        {
            statusCode = response.StatusCode;

            if (statusCode == HttpStatusCode.OK)
            {                   
                responseString = new StreamReader(response.GetResponseStream()).ReadToEnd();
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:03:55.723

好吧，`WebClient`最简单的例子是这样的：

```
NameValueCollection postData = new NameValueCollection();
postData["field-name-one"] = "value-one";
postData["field-name-two"] = "value-two";

WebClient client = new WebClient();
byte[] responsedata = webClient.UploadValues("http://example.com/postform", "POST", postData); 
```

你试过这个吗？

# mysql - MySQL：对多个内部联接表使用 Case When Then End

> ID：10284872
> 
> 赞同：2
> 
> 时间：2012-04-23T16:57:28.140
> 
> 标签：mysql

我有一个查询，它使用连接的三个表中的“Case When Then End”返回结果。它看起来像这样：

```
select f.filename, 
sum(case when v.rUser like '%bike%' then 1 else 0 end) as bikeUser, 
sum(case when v.rUser like '%Pedestrian%' then 1 else 0 end) as pedestrianUser, 
sum(case when d.weather like '%clear%' then 1 else 0 end) as clearWeather
from VMdata v 
inner join files f on v.id = f.id
inner join DMdata d on f.id = d.id
where f.filename in (X,Y,Z)
group by f.filename 
```

这很好用，每个结果行都正确给出 1 或 0。这里要注意的是，每个表只有一个特定“文件名”的条目（行）。现在，当我尝试使用每个“文件名”可以有多个条目（行）的表添加另一个内部联接时，结果变得错误，只有最后一个“总和”显示正确的值，而其他“总和”给出错误价值观。第二个查询是：

```
select f.filename, 
sum(case when v.rUser like '%bike%' then 1 else 0 end) as bikeUser,
sum(case when v.rUser like '%Pedestrian%' then 1 else 0 end) as pedestrianUser, 
sum(case when d.weather like '%clear%' then 1 else 0 end) as clearWeather,
sum(case when m.extras like '%hat%' then 1 else 0 end) as hatExtras
from VMdata v 
inner join files f on v.id = f.id
inner join DMdata d on f.id = d.id
inner join MultiFiledata m on f.id = m.id
where f.filename in (X,Y,Z)
group by f.filename 
```

任何想法为所有列获得正确的数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:18:10.327

如果`MultiFiledata`表可以包含表中任何对应记录的多条记录`files`，那么您需要在单独的查询中进行聚合并将其连接回主查询。

例如（语法可能不完美；专注于概念）：

```
select   f.filename, 
         sum(case when v.rUser like '%bike%' 
                  then 1 else 0 end) as bikeUser,
         sum(case when v.rUser like '%Pedestrian%' 
                  then 1 else 0 end) as pedestrianUser, 
         sum(case when d.weather like '%clear%' 
                  then 1 else 0 end) as clearWeather
from     VMdata v 
         inner join files f 
         on v.id = f.id
         inner join DMdata d 
         on f.id = d.id
         inner join (
             select id, 
                    sum(case when extras like '%hat%' 
                             then 1 else 0 end) as hatExtras
             from   MultiFiledata 
         ) m 
         on f.id = m.id
where    f.filename in (X,Y,Z)
group by f.filename; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:14:54.820

您的一对多连接导致总行数增加，因此当您的值 = 1 时，您将多次添加该值。为了缓解这种情况，您可能希望改用 count 函数，用它来计算不同的用户 ID。就像是：

```
Count(distinct case when [logic goes here] then [user ID] else null end) as bikeuser 
```

然后，您只计算每个用户一次，而不是添加每一行。

# jquery-mobile - 更改 jQuery Mobile 过滤器列表的输入字段的位置

> ID：10284884
> 
> 赞同：0
> 
> 时间：2012-04-23T16:58:10.653
> 
> 标签：jquery-mobile

我使用 jQuery Mobile 过滤器列表：http: [//jquerymobile.com/test/docs/lists/lists-search-with-dividers.html](http://jquerymobile.com/test/docs/lists/lists-search-with-dividers.html)

是否可以移动输入字段的位置，以便我可以将其放入页面上已经存在的 div 中？

使用 jQuery 的 appendTo 似乎工作正常，但它是一种 hacky 解决方案。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T11:56:45.560

这是我在寻找类似问题的解决方案时发现的。

HTML 代码示例：

```
<div data-role="page" id="page-id">
    <div data-role="content">
        <div data-role="fieldcontain">
          <input type="search" name="password" id="search" value="" />
        </div>
        <div class="filter-div" data-filter="one">1</div>
        <div class="filter-div" data-filter="two">2</div>
        <div class="filter-div" data-filter="three">3</div>
        <div class="filter-div" data-filter="four">4</div>
        <div class="filter-div" data-filter="five">5</div>
    </div>
</div> 
```

JS代码示例：

```
$(document).delegate('#page-id', 'pageinit', function () {
    var $filterDivs = $('.filter-div');
    $('#search').bind('keyup change', function () {
        if (this.value == '') {
            $filterDivs.slideDown(500);
        } else {
            var regxp = new RegExp(this.value),
                $show = $filterDivs.filter(function () {
                    return ($(this).attr('data-filter').search(regxp) > -1);
                });
            $filterDivs.not($show).slideUp(500);
            $show.slideDown(500);
        }
    });
}); 
```

这样，您可以将输入文本框放在页面上的任何位置，并且它应该正确过滤您想要的项目列表。

JSFiddle 演示：http: [//jsfiddle.net/cZW5r/30/](http://jsfiddle.net/cZW5r/30/)

# ios - 在创建付费/轻量版 iOS 应用时，是否在开发者门户中创建多个 APP ID？

> ID：10284885
> 
> 赞同：1
> 
> 时间：2012-04-23T16:58:21.077
> 
> 标签：ios, app-store

在创建付费/轻量版 iOS 应用时，是否在开发者门户中创建多个 APP ID？

如果您这样做，您是否还必须创建一个单独的应用内购买组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:03:07.267

> 在创建付费/轻量版 iOS 应用时，是否在开发者门户中创建多个 APP ID？

是的。您有两个应用程序，因此需要两个不同的应用程序 ID。

> 如果您这样做，您是否还必须创建一个单独的应用内购买组？

请参阅[*是否可以在两个应用之间共享一个应用内购买？*](https://stackoverflow.com/a/7740399/643383). 基本上，是的，您需要创建一个单独的购买组，但由于您的服务器会跟踪谁购买了什么，您可以将两者链接起来，以便在一个应用程序中进行的购买可以转移到另一个应用程序中。

# jquery - jquery替换attr

> ID：10284888
> 
> 赞同：0
> 
> 时间：2012-04-23T16:58:29.563
> 
> 标签：jquery, attr, removechild, jquery-click-event

我有动态生成的 div 列表，基本上用户单击其中一个前：div dat 具有 data-square=0-1，然后单击 div data-square=0.8、类 attr 和 data-平方值被发送到服务器并且服务器批准它们是否应该被替换。用于更换。但是第一个内部 div attr 应该被点击的第二个替换，第一个应该有一个 class=empty

在发送到服务器之前：

```
<div class="column" data-square="0-1">
<div class="GREEN"></div>
</div>

<div class="column" data-square="0-5">
    <div class="GREEN"></div>
</div>

<div class="column" data-square="0-8">
    <div class="YELLOW"></div>
</div> 
```

一旦从服务器接收回应该是这样的

```
 <div class="column" data-square="0-1">
    <div class="EMPTY"></div>
</div>
 <div class="column" data-square="0-5">
    <div class="GREEN"></div>
</div>
 <div class="column" data-square="0-8">
    <div class="GREEN"></div>
</div> 
```

但是当我从服务器收到时，它会删除所有标题为 GREEN 的类，它应该替换用户第一次单击的标题为 GREEN 的类。

我可以替换并使第一个 div 清空而不将其发送到服务器，但是当涉及到时，在接收到整个类时执行的操作会被删除。

```
$.post("check.php", { from:from,to:to,classFrom:$classFrom,classTo:classTo},
         function(data) {

    $($classFrom).children().removeAttr('class').addClass('EMPTY');
           }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:03:14.880

只需两行，删除旧的，添加新的：

```
$($classFrom).children().removeClass( classFrom );
$($classFrom).children().addClass('EMPTY'); 
```

# python - 关于更新和测试 python 包

> ID：10284889
> 
> 赞同：1
> 
> 时间：2012-04-23T16:58:39.033
> 
> 标签：python

我用 python 开发了一些非常小的项目，以及它们各自的包。所以，我可以执行 setup.py 并安装它们。但是，我不知道开发新版本后的正确更新程序，或者将新版本与稳定版本进行比较的正确程序。假设 DoTask 是我的稳定包的名称，带有一个函数执行

```
from DoTask import execute

if __name__ == '__main__':
    result = execute('path_to_data')
    print result 
```

如何导入新版本以比较结果？测试和调试后如何更新稳定版本？

例如，目前我这样做：

1）我给开发版本命名为 DevDoTask

```
from DoTask import execute
from DevDoTask import execute as test_execute

if __name__ == '__main__':
    result = execute('path_to_data')
    test_result = test_execute('path_to_data') 
    print result == test_result 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T21:04:59.180

将结果与以前版本的结果进行比较似乎不是一个好主意，因为以前的版本（尽管被认为是“稳定的”）也可能有错误。

考虑使用例如[`unittest`](http://docs.python.org/library/unittest.html)模块创建一个测试套件。也许创建一个足够简单的输入数据样本，让您确定结果应该是什么，并对测试中的结果进行硬编码（我不知道这是否是一个好主意，但对我来说它看起来比比较好对之前的结果一视同仁）。

# php - WAMP 哈希未生成

> ID：10284890
> 
> 赞同：0
> 
> 时间：2012-04-23T16:58:46.333
> 
> 标签：php

以下代码不会在 Windows 上的 WAMP 中生成输出。

在 MAMP 上运行良好。

猜测它是缺少模块或其他东西。

```
$reportHash = str_replace(
        array('+','/','='),
        array('-','_',''),
        base64_encode(file_get_contents('/dev/urandom', null, null, -1, 16))); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:00:11.840

Windows上没有`/dev/urandom`。

用于[`uniqid()`](http://php.net/uniqid)便携式随机字符串发生器或[`mt_rand()`](http://php.net/mt_rand)便携式随机数发生器。

# android - Android -> 状态栏状态已更改

> ID：10284892
> 
> 赞同：0
> 
> 时间：2012-04-23T16:58:52.713
> 
> 标签：android, android-intent, notifications, statusbar

Android中是否有可能获取状态栏的状态，尤其是添加了新通知？

如果状态栏中发生了什么事，它需要这个来启动一个活动。我不是指“状态栏窗口”。

也许我可以使用 IntentFilter 像：

```
IntentFilter statusBarIntentFilter = new IntentFilter(android.bla.bla.ACTION_STATUSBAR_STATE_CHANGED); 
```

到目前为止，谢谢你！

BR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T12:21:19.673

> Android中是否有可能获取状态栏的状态，尤其是添加了新通知？

您可以使用 收听状态栏通知`AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED`。

这是有关此主题的[StackOverflow 答案](https://stackoverflow.com/a/9632076/983290)，这是我根据该答案汇总[的工作示例。](https://github.com/ograycode/NotificationWatcher)实际上，我之所以把这个例子放在一起，是因为一个应用程序本质上是用广告向我妻子的通知栏发送垃圾邮件，而且没有明确的方法可以告诉谁有问题的应用程序是谁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:46:38.313

> Android中是否有可能获取状态栏的状态，尤其是添加了新通知？

不，对不起。您不能从 Android SDK 监视其他应用程序的通知。

# c# - acr122U NFC 标签读取

> ID：10284894
> 
> 赞同：0
> 
> 时间：2012-04-23T16:59:03.930
> 
> 标签：c#, android, .net, nfc, smartcard

更新：

让我总结一下我到目前为止所做的事情。由于 android Beam，我将智能手机更新到 4.0.4。以下站点允许发送和接收 NDEF 消息： [http ://www.grundid.de/nfc/ndef-applet.html](http://www.grundid.de/nfc/ndef-applet.html)

这对我来说非常有效。

之后，我可以编写一个通过 P2P 连接发送 NDEF 标签的小应用程序。

只剩下一个主题：创建一个基于桌面的应用程序来接收标签。我从 github.com 实现了以下示例：

[https://github.com/grundid/nfctools-examples/blob/master/src/main/java/org/nfctools/examples/llcp/LlcpService.java](https://github.com/grundid/nfctools-examples/blob/master/src/main/java/org/nfctools/examples/llcp/LlcpService.java)

这也很好。但我只是不知道这个例子背后发生了什么。示例类使用由 *.class 文件组成的包 (jar)。它与使用小程序相同。我的目标是自己创建代码。一个完整的项目。

那么有没有办法在.net中接收ndef标签（通过p2p）？还是java？这就是我正在寻找的。

下一步：

我将尝试使用 Winscard.dll：

[http://www.aspfree.com/c/a/.NET/Smart-Cards-in-.NET/](http://www.aspfree.com/c/a/.NET/Smart-Cards-in-.NET/)

但它似乎只适用于 SDCards，与 NFC 无关。

你有什么建议或技巧来实现我的目标吗？这样就太好了。

谢谢你。

浆果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:11:25.440

你看过这个项目吗：http: [//www.grundid.de/nfc/](http://www.grundid.de/nfc/)？

# asp.net - 如何防止 HtmlGenericControl 编码？

> ID：10284895
> 
> 赞同：0
> 
> 时间：2012-04-23T16:59:13.487
> 
> 标签：asp.net, servercontrols

我正在使用 HtmlGenericControl 添加对页眉的脚本引用。问题是它对 src 参数进行了编码。所以 "&mkt=fr-FR" 结果是 "&mkt=fr-FR" 并且没有得到正确的脚本。

```
 var scriptTag = new HtmlGenericControl("script");
  scriptTag.Attributes.Add("type", "text/javascript");
  scriptTag.Attributes.Add("src", scriptUrl); 
```

更新

这是网址

[http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.2&mkt=fr-FR](http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.2&mkt=fr-FR)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:20:06.127

**[您是否尝试过文字控制模式属性？](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.literal.mode.aspx)**

```
<asp:Literal ID="Literal1" Mode="Encode" Text="<script type='text/javascript' 
     language='javascript' src='Scripts/jquery-1.4.1.min.js'></script>"
     runat="server">
</asp:Literal> 
```

**输出**

```
<script type='text/javascript' language='javascript' 
                                      src='Scripts/jquery-1.4.1.min.js'></script> 
```

# maven - maven循环依赖+继承最佳实践

> ID：10284897
> 
> 赞同：2
> 
> 时间：2012-04-23T16:59:25.793
> 
> 标签：maven, dependency-management

我有以下结构的几个项目：项目 A、B、C

它们都在 D 文件夹下的 pom.xml 中的父项目 D 下：

```
<module>A</module>
<module>B</module>
<module>C</module> 
```

它们之间的依赖关系是：A<--B<--C。

A、B、C 共享许多共同的依赖关系。

1.在这种情况下组织依赖关系的最佳实践是什么，以使 sub poms 非常轻，同时排除重复的依赖关系？

2.父pom的“dependencies”部分应该放什么，“dependency-management”部分应该放什么？

3.common依赖更像是：

```
log4j, slf4j, thrift, jetty, javax.servlet etc... 
```

它们中的大多数都是传递依赖项，而不是我的项目直接需要的。将它们作为依赖项放在父 D 的 pom.xml 中是否有意义，让子项目（A，B，C）从 D 继承它们？我注意到如果你这样做， mvn dependency:tree 会给你类似的警告。

```
[WARNING] Unused declared dependencies found: log4j, slf4j .... 
```

如果这给了我警告，我认为这是 maven 不建议你做的事情？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T19:47:44.580

1.  最重要的是：仅声明模块直接需要的依赖项。如果不了解更多有关您的模块及其依赖关系的信息，就很难提出任何具体的建议。在您的案例中，常见依赖项的示例是什么？也许重新组织你的模块有助于减少常见的依赖关系。根据您的项目，将模块 A、B 和 C 中依赖于同一工件的所有类放入新模块 E 中可能是合理的。
2.  在我看来，不应将任何内容放入父 pom 的依赖项部分（看到警告，maven 似乎感觉相同；-)）。至少将多个模块中使用的所有版本的依赖项放入父级的依赖项管理部分。这有助于在整个项目中始终保持特定依赖项的相同版本。
3.  与 2\. 一样，您应该只在父项的依赖项管理部分中指定这些工件的版本，并在每个需要它的模块中重复它们而不指定版本。如 1\. 中所述，您应该只指定直接依赖项。例如，如果您使用 slf4j，您应该只需要在包含您的主类的模块中使用 log4j。

总结一下：

*   仅声明模块的直接依赖关系，传递依赖关系由 maven 自动处理（这是使用 maven 的主要原因之一）。
*   只声明需要的依赖：例如在 slf4j 的情况下，你只需要一个模块依赖`slf4j-log4j12`，所有其他模块只需要依赖 slf4j-api。
*   在父 pom 中定义版本，以便所有子模块使用相同的版本。在这样的`dependencyManagement`部分中执行此操作：

    ```
    `<dependencyManagement>
        <dependencies>
            <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-api</artifactId>
                <version>1.6.4</version>
            </dependency>
        </dependencies>
    </dependencyManagement>` 
    ```

`*   对于每个模块，在模块 pom 中指定所有直接依赖项，但没有像这样的版本：

    ```
    `<dependencies>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
        </dependency>
    </dependencies>` 
    ```` 

 ``要处理许多模块共享的大量依赖项，您还可以使用此方法：创建一个新的“依赖项集合模块”（我们称之为`X`），它除了依赖于每个所需的工件之外什么都不做。现在每个模块也只需要依赖`X`自动依赖它的依赖。我不推荐这种方法，因为（除其他原因外）现在每个模块都依赖于其中的依赖项，`X`并且您无法确定如果从中删除依赖项会发生什么，`X`并且您需要查看多个 pom 才能直接找到模块依赖关系。

希望这个对你有帮助 ：-）``

# android - Android GridView：从中心增长直到达到 numColumns

> ID：10284899
> 
> 赞同：2
> 
> 时间：2012-04-23T16:59:29.320
> 
> 标签：android, xml, listview, gridview

我有一个带有 android:numColumns="8" 的 gridview。当 GridView 适配器中的项目少于 8 个时，我的目标是让这些列在 gridview 内居中。

现在这就是我正在使用的：

```
 <LinearLayout
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:gravity="center"
        android:layout_gravity="center">

        <GridView android:id="@+id/roomDashboardUsers"
            android:gravity="center"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:columnWidth="70dp"
            android:horizontalSpacing="5dp"
            android:verticalSpacing="5dp"
            android:numColumns="8"
            android:stretchMode="none"/>

    </LinearLayout> 
```

# ruby - 创建一个包装我的 config.yml 文件的类，并在我的 rake 文件中使用它

> ID：10284900
> 
> 赞同：2
> 
> 时间：2012-04-23T16:59:32.870
> 
> 标签：ruby

这是一个非 Rails 应用程序，只是一个简单的 ruby​​ 脚本，它使用 rake 等来自动化一些事情。

我的文件夹布局是这样的：

```
/scripts/Rakefile
/scripts/config/config.yml
/scripts/tasks/*.rake (various rake files with namespaces to organize them)
/scripts/lib/settings.rb 
```

现在我想创建一个设置类来加载配置 yaml 文件，然后公开 yaml 文件内容的属性/方法。

yaml 文件具有用于开发和生产的单独部分。

```
development:
    scripts_path: '/dev/mygit/app1/scripts/'
production:
    scripts_path: '/var/lib/app1/scripts/' 
```

到目前为止，我的 rakefile 看起来像：

```
$LOAD_PATH.unshift File.expand_path('..', __FILE__)

#imports
require 'fileutils'
require 'rubygems'
require 'active_record'
require 'yaml'
require 'logger'

require 'ar/models'
require 'lib/app1'

env = ENV['ENV'] || 'development'
config = YAML::load(File.open('config/config.yml'))[env]

Dir.glob('tasks/*.rake').each { |r| import r } 
```

我需要有关 Settings.rb 文件的帮助，对吗？

```
module App1
  class Settings
    def initialize(config_path, env)
      config = YAML.load(File.open(config_path))
    end

    def scripts_path
    end

  end
end 
```

如何传入环境，然后从配置中为每种方法读取正确的值，例如`scripts_path`等？

现在假设每个 *.rake 文件都需要以某种方式引用我的 Settings.rb 文件（以获取配置相关信息）。我该怎么做？由于我的设置需要 config.yml 文件的路径，我是否必须在每个 rake 文件中执行此操作？

**更新** 对不起，这不是 Rails 应用程序，只是一些 ruby​​ 脚本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T09:15:20.773

我会做的很简单。您不需要复杂的解决方案。

```
require 'ostruct'
require 'yaml'

MY_ENV = ENV['ENV'] || 'development'
CONFIG = OpenStruct.new(YAML.load_file("config/config.yml")[MY_ENV]) 
```

把它放在你的 rakefile 的顶部，CONFIG 将在所有 rake 任务中可用。

打电话`CONFIG.scripts_path`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:12:31.830

Inside my applications I do something of this sort.

```
# config/application.yml

development:
  some_variable: a string

production:
  some_variable: a different string 
```

Then in application.rb I load it up.

```
# config/application.rb

module MyApp

  def self.config
    @config ||= OpenStruct.new(YAML.load_file("config/application.yml")[Rails.env.to_s])
  end

  class Application < Rails::Application
    ... 
```

In this case, anywhere the environment is loaded I can say

```
MyApp.config.some_variable 
```

To get access to this inside a rake task, I just need to include environment

```
task :something => :environment do
  MyApp.config.some_variable
  # do something with it
end 
```

# c# - 通过 TCP 协议将文件发送到动态端口

> ID：10284904
> 
> 赞同：5
> 
> 时间：2012-04-23T17:00:07.410
> 
> 标签：c#, sockets, c#-4.0, tcpclient, tcplistener

我正在使用一个通过 TCP 协议接收文件的应用程序，应用程序处理文件然后通过相同的协议发送它，我正在接收文件没有问题，我的问题是当我尝试发送文件时，因为我需要将文件发送到另一个正在侦听动态端口的应用程序，我用来发送这些文件的代码是：

```
internal void Send(byte[] buffer)
    {
        TcpClient _client = null;
        try
        {
            _client = new TcpClient(RemoteIPaddress, Dynamic_port);

            if (_client != null)
            {
                NetworkStream _clienttStream = _client.GetStream();
                _clienttStream.Write(buffer, 0, buffer.Length);
                _clienttStream.Flush();
                _clienttStream.Close();
                _clienttStream = null;
            }
        }
        catch 
        {
            if (_client != null)
            {
                _client.Close();
                _client = null;
            }
        }
    } 
```

问题是，如何通过 TCP 协议将文件发送到使用动态端口的远程机器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:14:18.363

Typically, the server should listen on a well known port for a connection request. The response should include the port number that the server will communicate further on. Then your app connects to that port for transferring the data.

The communication should do the following:

1.  Client connects to server on well known port.
2.  Server responds with the dynamic port number to use for further communication.
3.  Client connects to server on the received port number.
4.  Server responds stating connection established.
5.  Client transmits data and disconnects.

This is a simplified version of how passive FTP works.

Point is, there are only two ways to connect to a server on a dynamic port. The first way is outlined above. If you can't do it that way then your client app will have to do a port scan, sending a connection attempt to every port within a range, and see which one the server responds on. However, firewalls are generally programmed to notice this type of thing and shut you down (it's hacker behavior).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:16:23.377

您是否在问如何确定远程机器选择使用的动态端口？没有自动化的方法可以做到这一点。服务器应该在两台机器都知道的端口上工作，或者你应该想办法让它们通过其他通信模式选择端口。通过连接到第三方服务器或托管客户端可以访问的 Web 服务。

# php - 如何将我自己的日历与我的手机（iPhone、Android 等）同步

> ID：10284909
> 
> 赞同：0
> 
> 时间：2012-04-23T17:00:24.873
> 
> 标签：php, android, iphone, ios, calendar

我为我的公司创建了一个门户。

在这个门户中，我们必须登录，一旦我们进入，我们就可以管理我们的日历和事件。我想知道如何将它与 iOS 和/或 Android 同步？

我是否需要为它创建一个应用程序，或者我可以创建一个模块以便向我的网站添加协议？谷歌日历可以与 iPhone 同步，他必须使用某种协议还是它是内置的？

有任何想法吗 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:08:55.980

你有几个选择。最简单的可能是添加对 Internet 日历格式 (.ics) 的支持并构建您的日历以支持订阅。Android 和 iOS 都支持互联网日历。 [这是](http://en.wikipedia.org/wiki/ICalendar)ics 的维基百科页面。仅仅实现一个连接器肯定是不够的，但它应该是一个开始的好地方。

# android - 导出签名的 APK 时无法选择密钥库别名

> ID：10284910
> 
> 赞同：1
> 
> 时间：2012-04-23T17:00:26.377
> 
> 标签：android, eclipse, export, alias, keystore

我有一个在两台计算机上开发的应用程序。密钥库是在其中一台计算机上创建的，但我想使用该密钥库将签名的 APK 导出到另一台计算机上。我使用闪存驱动器移动了 Keystore 文件，并选择在 Eclipse 中使用现有的 Keystore。输入密码后，当我不得不选择别名时出现以下错误。它不允许我选择别名，因此我无法继续导出。任何人都知道是否可以在一台计算机上创建密钥库并在另一台计算机上使用，或者如何解决这个问题？

![无法选择别名](../Images/f4e94f9b7a205a095f46697ff944b6b2.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T23:37:06.477

没关系，我找到了自己问题的答案。显然，我传输过来的密钥库文件已损坏。

# android - 编辑文本内的可绘制位置

> ID：10284911
> 
> 赞同：1
> 
> 时间：2012-04-23T17:00:28.967
> 
> 标签：android

我在 sdcard 中有一个图像，我想在多行 editText 中将它用作 Drawable。现在，我成功地展示了它。

```
Bitmap bitmap=Bitmap.createScaledBitmap(BitmapFactory.decodeFile(path), 120, 120, false);
final Drawable draw=new BitmapDrawable(bitmap);
draw.setBounds(0,0,draw.getIntrinsicWidth(),draw.getIntrinsicHeight());
complaintText.setCompoundDrawablePadding(5);
complaintText.setCompoundDrawables(null,draw,null,null); 
```

但我想显示在多行编辑文本的左上角。我会很感激任何帮助

# entity-framework - 与 Lambda 表达式作斗争（VB .net）

> ID：10284912
> 
> 赞同：0
> 
> 时间：2012-04-23T17:00:41.777
> 
> 标签：entity-framework, lambda, left-join, code-first, linq-expressions

我有一个相对简单的事情，我可以在 SQL 中轻松完成，但我正在尝试习惯使用 Lambda 表达式，并且很难。

这是一个简单的例子。基本上我有2张桌子。

*   tblAction (ActionID, ActionName)
*   tblAudit（AuditID、ActionID、已删除）

tblAudit 可能有一个关于 tblAction 的条目，其中 Deleted 标志设置为 1。

我要做的就是选择我们在 tblAudit 中没有已删除条目的操作。所以SQL语句是：

```
Select tblAction.* 
From tblAction LEFT JOIN tblAudit on tblAction.ActionID=tblAudit.ActionID
where tblAudit.Deleted <> 1 
```

VB.Net 的 LINQ 中的上述内容是什么？我试过了：

```
Context.Actions.Where(Function(act) Context.Audit
.Where(Function(aud) aud.Deleted=False AndAlso aud.ActionID=act.ActionID)).ToList 
```

但这实际上是一个内部连接类型的场景，它要求 tblAction 中的每个条目在 tblAudit 中也有一个条目。我正在使用 Entity Framework Code First 来进行数据库映射。有没有办法以可以做到这一点的方式定义映射？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T12:03:00.373

你应该添加

`Public Property Audits As DbSet<Audit>`

进入您的操作实体类（注册这些表之间的关联）。

现在你可以写下你的意思：

`(From act in Context.Actions Where Not act.Audits.Any(Function(audit) audit.Deleted)).ToArray`

这相当于

`Context.Actions.Where(Function(act) Not act.Audits.Any(Function(audit) audit.Deleted)).ToArray`

并让 LINQ 解析器完成繁重的 SQL 工作。

# c# - 在 Win 7 上更改程序的音量

> ID：10284913
> 
> 赞同：7
> 
> 时间：2012-04-23T17:00:58.540
> 
> 标签：c#, pinvoke, winmm

我想更改程序的音量（而不是**主**音量）。我现在有以下代码：

```
DllImport("winmm.dll")]
public static extern int waveOutGetVolume(IntPtr hwo, out uint dwVolume);

[DllImport("winmm.dll")]
public static extern int waveOutSetVolume(IntPtr hwo, uint dwVolume);

private void volumeBar_Scroll(object sender, EventArgs e)
{
    // Calculate the volume that's being set
    int NewVolume = ((ushort.MaxValue / 10) * volumeBar.Value);
    // Set the same volume for both the left and the right channels
    uint NewVolumeAllChannels = (((uint)NewVolume & 0x0000ffff) | ((uint)NewVolume << 16));
    // Set the volume
    waveOutSetVolume(IntPtr.Zero, NewVolumeAllChannels);
} 
```

这仅适用于 Win XP，不适用于 Windows 7（可能也适用于 Vista）。我没有找到任何可以在 Win 7 上实现相同效果的脚本，只是为了更改主卷（我不在之后）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-25T18:54:13.313

你的代码对我来说没问题（有一些调整）。这是在 Windows 7 x64 上运行的非常简单的 WPF 测试应用程序的代码：

Xaml

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Slider Minimum="0" Maximum="10" ValueChanged="ValueChanged"/>
    </Grid>
</Window> 
```

C＃

```
public partial class MainWindow
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
    {
        // Calculate the volume that's being set
        double newVolume = ushort.MaxValue * e.NewValue / 10.0;

        uint v = ((uint) newVolume) & 0xffff;
        uint vAll = v | (v << 16);

        // Set the volume
        int retVal = NativeMethods.WaveOutSetVolume(IntPtr.Zero, vAll);

        Debug.WriteLine(retVal);

        bool playRetVal = NativeMethods.PlaySound("tada.wav", IntPtr.Zero, 0x2001);

        Debug.WriteLine(playRetVal);
    }
}

static class NativeMethods
{
    [DllImport("winmm.dll", EntryPoint = "waveOutSetVolume")]
    public static extern int WaveOutSetVolume(IntPtr hwo, uint dwVolume);

    [DllImport("winmm.dll", SetLastError = true)]
    public static extern bool PlaySound(string pszSound, IntPtr hmod, uint fdwSound);
} 
```

当我启动应用程序并移动滑块时，“音量混合器”中会出现一个额外的音量控制，它与滑块同步地从最小值移动到最大值。

您应该检查 waveOutSetVolume 的返回值。如果您的代码仍然无法正常工作，它可能会为您提供线索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T17:16:14.473

您可以使用音频会话 API IAudioVolume 和 IAudioSessionNotification 来修改当前应用程序的音量，并使用应用程序中的音量滑块跟踪您的音量。

[您可以在Larry Osterman 的博客文章](http://blogs.msdn.com/b/larryosterman/archive/2009/08/07/a-quick-run-through-the-new-windows-7-multimedia-audio-sdk-samples.aspx)中找到它们的使用示例列表

最容易使用的是[ISimpleVolume](http://msdn.microsoft.com/en-us/library/ms679138.aspx)接口。[Larry 的博客](http://blogs.msdn.com/b/larryosterman/archive/2007/04/04/volume-in-windows-vista-part-2-types-of-volume-in-windows-vista.aspx)中也对此进行了讨论。

# c# - 为什么 Dictionary.Add 会覆盖我字典中的所有项目？

> ID：10284926
> 
> 赞同：6
> 
> 时间：2012-04-23T17:02:23.740
> 
> 标签：c#, linq, dictionary

我有一个类型字典`Dictionary<string, IEnumerable<string>>`和一个字符串值列表。出于某种原因，每次我执行 Add 时，字典中的每个值都会被覆盖。我完全不知道为什么会这样。我确保在循环中声明和初始化 IEnumberable 对象不是参考问题，这样它的范围就不会超出一次迭代，它仍然会这样做。这是我的代码：

```
foreach (string type in typelist)
{
    IEnumerable<string> lst = 
        from row in root.Descendants()
        where row.Attribute("serial").Value.Substring(0, 3).Equals(type)
        select row.Attribute("serial").Value.Substring(3).ToLower();

    serialLists.Add(type, lst);
} 
```

哪里`typelist`是一个`IEnumerable<string>`，`root`是一个`XElement`，`serialLists`是我的字典。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T17:07:17.713

这是一个捕获的迭代器问题。

尝试：

```
foreach (string tmp in typelist)
{
   string type = tmp; 
```

（其余不变）

或者，我会在添加期间评估表达式，即在 .Add 中执行 .ToList()：

```
serialLists.Add(type, lst.ToList()); 
```

第二个选项总体上可能更有效，尽管它确实强制评估可能永远不需要的东西。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-23T17:08:12.800

原因是您的序列没有被急切地填充，而是在循环完成所有迭代*之后*`IEnumerable<string>`按需填充。因此，当枚举任何序列时，变量将始终具有 中最后一个元素的值。*`foreach``IEnumerable<string>``type``typelist`*

 *这是修复它的一种简单方法：

```
foreach (string type in typelist)
{
    string typeCaptured = type;

    IEnumerable<string> lst = 
        from row in root.Descendants()
        where row.Attribute("serial").Value.Substring(0, 3).Equals(typeCaptured)
        select row.Attribute("serial").Value.Substring(3).ToLower();

    serialLists.Add(typeCaptured, lst);
} 
```*

# php - PyroCMS 管理面板在 IE8 中不起作用

> ID：10284930
> 
> 赞同：0
> 
> 时间：2012-04-23T17:02:38.367
> 
> 标签：php, javascript, jquery, codeigniter, pyrocms

我努力在 IE8 中使用管理面板，但管理面板无法正常工作。专门添加页面或选择页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T03:32:43.930

Pyrocms 管理面板在 IE8 中不兼容。甚至管理面板的设计在 IE8 和 IE7 中也完全被打乱了。

# jsf - PanelGrid 中的多个 JSF 组件

> ID：10284935
> 
> 赞同：1
> 
> 时间：2012-04-23T17:03:08.173
> 
> 标签：jsf, facelets, jsf-1.2, tagfile

我正在尝试使用 Facelet 标记文件和 @Balusc 在[如何制作 JSF 复合组件网格？](https://stackoverflow.com/questions/5713718/how-to-make-a-grid-of-jsf-composite-component)作为参考。我已经复制了 /WEB-INF/tags/input.xhtml 和 example.taglib.xml 以及主应用程序 xhtml。但是，我遇到了一些问题。
1.如果我不传递 id 而只是做

```
<my:input id="cat" type="text" label="FirstName" bean="#{bean}" property="fName" required="true" />
<my:input id="dog" type="text" label="LastName" bean="#{bean}" property="lName" required="true /> 
```

在我的主 xhtml 并打开该页面，我得到 java.lang.IllegalArgumentException 和异常跟踪：

```
java.lang.IllegalArgumentException
at javax.faces.component.UIComponentBase.validateId(UIComponentBase.java:543)
at javax.faces.component.UIComponentBase.setId(UIComponentBase.java:351)
at com.sun.facelets.tag.jsf.ComponentHandler.apply(ComponentHandler.java:151)
at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
at com.sun.facelets.tag.ui.CompositionHandler.apply(CompositionHandler.java:119)
at com.sun.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:49)
at com.sun.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:25)
at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:248)
at com.sun.facelets.impl.DefaultFacelet.include(DefaultFacelet.java:294)
at com.sun.facelets.impl.DefaultFaceletContext.includeFacelet(DefaultFaceletContext.java:268)
at com.sun.facelets.tag.UserTagHandler.apply(UserTagHandler.java:98)
at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
at com.sun.facelets.tag.jsf.ComponentHandler.applyNextHandler(ComponentHandler.java:314)
at com.sun.facelets.tag.jsf.ComponentHandler.apply(ComponentHandler.java:169)
at com.sun.facelets.tag.jsf.ComponentHandler.applyNextHandler(ComponentHandler.java:314)
at com.sun.facelets.tag.jsf.ComponentHandler.apply(ComponentHandler.java:169)
at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
at com.sun.facelets.compiler.NamespaceHandler.apply(NamespaceHandler.java:49)
at com.sun.facelets.tag.CompositeFaceletHandler.apply(CompositeFaceletHandler.java:47)
at com.sun.facelets.compiler.EncodingHandler.apply(EncodingHandler.java:25)
at com.sun.facelets.impl.DefaultFacelet.apply(DefaultFacelet.java:95)
at com.sun.facelets.FaceletViewHandler.buildView(FaceletViewHandler.java:524)
at com.sun.facelets.FaceletViewHandler.renderView(FaceletViewHandler.java:567)
at org.ajax4jsf.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:100)
at org.ajax4jsf.application.AjaxViewHandler.renderView(AjaxViewHandler.java:176)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:110)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139) 
```

2.为了克服这个问题，当我在我的标签中传递 id 值时

```
<my:input id="cat" type="text" label="FirstName" bean="#{bean}" property="fName" required="true" />
<my:input id="dog" type="text" label="LastName" bean="#{bean}" property="lName" required="true /> 
```

我得到一个组件 j_id2:cat 错误的重复 ID。

```
java.lang.IllegalStateException: duplicate Id for a component j_id2:cat
at org.ajax4jsf.application.TreeStructureNode.apply(TreeStructureNode.java:68)
at org.ajax4jsf.application.TreeStructureNode.apply(TreeStructureNode.java:92)
at org.ajax4jsf.application.TreeStructureNode.apply(TreeStructureNode.java:92)
at org.ajax4jsf.application.TreeStructureNode.apply(TreeStructureNode.java:92)
at org.ajax4jsf.application.AjaxStateManager.getTreeStructureToSave(AjaxStateManager.java:187)
at org.ajax4jsf.application.AjaxStateManager.buildViewState(AjaxStateManager.java:498)
at org.ajax4jsf.application.AjaxStateManager.saveSerializedView(AjaxStateManager.java:451)
at com.sun.facelets.FaceletViewHandler.renderView(FaceletViewHandler.java:615)
at org.ajax4jsf.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:100)
at org.ajax4jsf.application.AjaxViewHandler.renderView(AjaxViewHandler.java:176)
at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:110)
at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:100)
at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:266) 
```

3.为了解决这个问题，我删除了所有 c:when 并在 input.xhtml 中保留了一种输入类型的“文本”，现在我看到呈现了 2 个文本框，但是当我查看源代码时，我看到了

```
<tr>
  <td>
    <c:set var="id" value="cat"></c:set>
    <c:set var="required" value="true"></c:set>
  </td>
  <td><label for="j_id2:cat">First Name: &nbsp;*&nbsp;</label></td>
  <td><input id="j_id2:cat" type="text" name="j_id2:cat" value="Smith" /></td>
</tr>
<tr>
  <td></td>
  <td>
    <c:set var="id" value="dog"></c:set>
    <c:set var="required" value="true"></c:set>
  </td>
  <td><label for="j_id2:dog">Last Name: &nbsp;*&nbsp;</label></td>
</tr>
<tr>
   <td><input id="j_id2:dog" type="text" name="j_id2:dog" value="Joe" /></td>
   <td></td>
</tr> 
```

我期待 2 行，但看到 3 行。我也不期待标记文件中的 c:set 定义成为我的 td 视图的一部分。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:06:28.163

对于 Facelets 1.x，您需要在以下 XML 命名空间中声明 JSTL 核心标记库：

```
xmlns:c="http://java.sun.com/jstl/core" 
```

请注意，`/jsp`Facelets 1.x 的 URI 中没有。

# magento - Magento - 部分产品不出售

> ID：10284937
> 
> 赞同：1
> 
> 时间：2012-04-23T17:03:14.740
> 
> 标签：magento, attributes, product

我想将一些产品设置为“非销售”，删除“添加到购物车”按钮并添加联系表格的链接。

我正在寻找这个解决方案几个星期。搜索，我发现了这个帖子：

[Magento - 非卖品](https://stackoverflow.com/questions/9005056/magento-product-that-are-not-for-sale)

在页面末尾有这个答案：

“”或者，您可以设置一个新的产品属性，用不同的东西（更多信息按钮、弹出窗口等）替换添加到购物车按钮。

我该怎么做？

关于这个主题的另一篇文章：

[http://www.e-commercewebdesign.co.uk/blog/magento-tutorials/non-salable-products-with-attribute-sets.php](http://www.e-commercewebdesign.co.uk/blog/magento-tutorials/non-salable-products-with-attribute-sets.php)

但我不能让它工作。有人可以帮我提供更多细节吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T10:15:24.047

小教程

创建一个新属性“saleable”

*   默认值 = 是
*   唯一值 = 否
*   所需值 = 是
*   适用于 = 所有产品类型
*   用于快速搜索 = 否
*   在高级搜索中使用 = 否
*   前端可比 = 否
*   在分层导航中使用 = 否
*   用于促销规则条件 = 否
*   在前端的产品视图页面上可见 = 否
*   在产品列表中使用 = 否
*   用于产品列表中的排序 = 否

管理标题

*   admin = "可售"
*   默认商店视图 = “可销售”

现在将其添加到您的属性集（默认）创建产品或编辑产品并定义“可销售”属性。

现在转到您的产品视图 /tomcollins.be/app/design/frontend/default//template/catalog/product/view.phtml

像这样写一个 if 语句

```
<? if($_product->getData('saleable')): ?> 
```

// 做你想做的

```
<?php else: ?> 
```

// 做你想做的

```
<?php endif; ?> 
```

希望这可以帮助某人:)

再见

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T06:28:34.860

使用属性修改您的产品，例如不可销售。如果该属性的值为 true，则该产品不可销售。

所以现在你应该看看

app/design/frontend/your_theme/your_theme/template/catalog/product/view.phtml 中的 Productview 和列表视图 app/design/frontend/your_theme/your_theme/template/catalog/product/list.phtml

现在看看这些文件中添加到购物车按钮的位置。在此按钮之前放置一个 if nonsable === TRUE { make something } else { addtocart }

这就是我会尝试的方式。

对不起，我的英语不好。我还是很累：））））

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T17:08:02.860

对于所有非销售产品，您可以将数量设置为 0。它会自动删除添加到购物车。然后，您可以在不存在添加到购物车的所有产品上添加联系表单的链接。我来自 Magento Go 背景，所以我会这样做，但我知道使用社区和企业版本你有更多的灵活性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-09T07:29:20.633

我想你会通过这个扩展得到你想要的需求，因为这个扩展的开发团队真的非常支持。请参考下面的扩展链接：

[点击这里获取扩展](http://www.magentocommerce.com/magento-connect/call-for-price-9.html)

# flash - 如何在 switch 语句中使用变量 *更新 *

> ID：10284939
> 
> 赞同：-1
> 
> 时间：2012-04-23T17:03:15.973
> 
> 标签：flash, actionscript

我试图在我的 switch 语句中使用一个变量，因为它使玩家的移动变得平滑。这是我流畅的玩家移动代码。

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, keyPressedDown);
    stage.addEventListener(KeyboardEvent.KEY_UP, keyPressedUp);
    stage.addEventListener(Event.ENTER_FRAME,movehero);
    function keyPressedDown(event:KeyboardEvent){
if(event.keyCode==37){leftArrow = true;}
else if (event.keyCode == 39){rightArrow=true;}
else if(event.keyCode ==38){upArrow = true;}
else if(event.keyCode ==40){downArrow = true;}
}

    function keyPressedUp(event:KeyboardEvent){
if(event.keyCode==37){leftArrow = false;}
else if (event.keyCode == 39){rightArrow=false;}
else if(event.keyCode ==38){upArrow = false;}
else if(event.keyCode ==40){downArrow = false;}
    }

    function movehero(event:Event){
if(leftArrow){hero.x -= 10;}
if(rightArrow){hero.x += 10;}
if(upArrow){hero.y -= 10;}
if(downArrow){hero.y += 10;}
} 
```

我正在尝试将它实现到我现有的代码中。我需要用于碰撞的 switch 语句。

此代码运行良好，但玩家移动非常缓慢。

提前致谢

```
I am trying to acheive something like this, but this does not work 

 var leftArrow:Boolean= false;
 var rightArrow:Boolean= false;
 var upArrow:Boolean= false;
 var downArrow:Boolean=false;

    stage.addEventListener(KeyboardEvent.KEY_DOWN, keyPressedDown);
    stage.addEventListener(KeyboardEvent.KEY_UP, keyPressedUp);
    stage.addEventListener(Event.ENTER_FRAME,movehero);

    function keyPressedDown(event:KeyboardEvent){
if(event.keyCode==37){leftArrow = true;}
else if (event.keyCode == 39){rightArrow=true;}
else if(event.keyCode ==38){upArrow = true;}
else if(event.keyCode ==40){downArrow = true;}
}

    function keyPressedUp(event:KeyboardEvent){
if(event.keyCode==37){leftArrow = false;}
else if (event.keyCode == 39){rightArrow=false;}
else if(event.keyCode ==38){upArrow = false;}
else if(event.keyCode ==40){downArrow = false;}
    }

    function movehero(event:Event){

switch(event){
    case leftArrow:
    hero.x -=10;
    break;

    case rightArrow:
    hero.x +=10;
    break;

    case upArrow:
    hero.y -=10;
    break;

    case downArrow:
    hero.y += 10;
    break;

    default  :
    break;
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T10:16:43.720

使用键盘时，设置方向的布尔变量是一种很好的模式。试试这个函数 movehero 的代码：

```
function movehero(event:Event)
{    
        if (this.leftArrow):
            hero.x -= 10 ;

        if (this.rightArrow)
            hero.x += 10 ;

        if (this.upArrow)
            hero.y -= 10 ;

        if (this.downArrow)
            hero.y += 10 ;
} 
```

注意：如果你真的想让你的英雄移动流畅，提高你的游戏帧率，降低速度。因此，英雄将执行**MORE SMALL**步骤，这似乎是平滑的运动，而不是**FEWER**，而是**BIG**步骤。

因此，不要增加 + 10，而是增加**+2 并增加帧速率**。30-40 fps 足以流畅移动。

祝你好运，希望对你有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:55:45.007

```
stage.addEventListener(KeyboardEvent.KEY_DOWN, keyPressedDown);
stage.addEventListener(KeyboardEvent.KEY_UP, keyPressedUp);
stage.addEventListener(Event.ENTER_FRAME,movehero);

function keyPressedDown(event:KeyboardEvent)
{
    if(event.keyCode==37) leftArrow = true;
    else if(event.keyCode == 39) rightArrow = true;
    else if(event.keyCode ==38) upArrow = true;
    else if(event.keyCode ==40) downArrow = true;
}

function keyPressedUp(event:KeyboardEvent)
{
    if(event.keyCode == 37) leftArrow = false;
    else if (event.keyCode == 39) rightArrow = false;
    else if(event.keyCode == 38) upArrow = false;
    else if(event.keyCode == 40) downArrow = false;
}

function movehero(event:Event)
{
    switch(true)
    {
        case (leftArrow):
            hero.x -=10;
            break;

        case (rightArrow):
            hero.x +=10;
            break;

        case (upArrow) :
            hero.y -=10;
            break;

        case (downArrow):
            hero.y += 10;
            break;
    }
} 
```

# java - Java Derby 表不是持久的

> ID：10284945
> 
> 赞同：0
> 
> 时间：2012-04-23T17:03:56.787
> 
> 标签：java, sql, persistence, derby

我正在使用 Derby 嵌入式驱动程序并将 derby.jar 添加到依赖项（我正在使用 Eclipse）。这就是我创建表的方式：

```
Class.forName("org.apache.derby.jdbc.EmbeddedDriver").newInstance();
conn=DriverManager.getConnection("jdbc:derby:myDB;create=true;");
conn.setAutoCommit(false);

Statement s=conn.createStatement();
s.execute("create table Vodici(ID int NOT NULL GENERATED ALWAYS AS IDENTITY, ime varchar(20), priimek varchar(20))"); 
```

它工作得很好，但如果我关闭程序，重新启动它（当然，表创建行注释掉了）它说

***java.sql.SQLSyntaxErrorException：表/视图“VODICI”不存在。***

当我想从我的程序访问表时。怎么了，没有坚持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:05:08.740

将评论扩展到回复；请尝试将自动提交（连接时）设置为 true。

# java - 使用 Java 在 REST Web 服务中启用恢复中断下载

> ID：10284946
> 
> 赞同：2
> 
> 时间：2012-04-23T17:03:57.003
> 
> 标签：java, http, rest

我正在为客户端编写一个 REST Web 服务来下载大型数据文件。作为其中的一部分，我想实现一个功能，以在发生异常或原始请求丢失连接的情况下启用恢复中断下载。

我在网上做了一些研究，发现在请求标头中支持 Range/If-Range 属性可能是解决方案，如[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html)中所示。

我的问题是

1.  在 REST Web 服务的范围内，最常用和最佳实践是在客户端 HTTP 请求标头中支持 Range/If-Range 属性，还是只是在客户端 GET 请求中将字节偏移量作为查询参数传递，例如，**主机名：端口/下载？令牌=？字节偏移=？**?

2.  如果采用前一种方法，在服务器端，是否有标准方法来处理 JAX-RS 规范中的 Range 字段的请求（我使用的是 Java）？直接的方法是从文件中打开一个 InputStream 并绕过给定的字节数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:10:28.340

通常，不要使用与资源（或您需要的部分）*元*信息有关的参数，因此您应该使用 Range，并确保服务器允许这样做。

请注意，例如，`byteoffset`它不是资源本身的有意义的部分、组件或语义上有趣的部分，而是一种克服部分内容的方法（同样，所有资源都相同，因此您必须使用允许的标头，并且嘿！他们是为此而存在的）。

# forms - 检查作为struts中form bean属性的集合的大小

> ID：10284947
> 
> 赞同：0
> 
> 时间：2012-04-23T17:04:05.033
> 
> 标签：forms, tags, struts

我有一个集合，它是 struts 中 Form Bean 的一个属性。

我需要在 jsp 中检查该集合的大小。

在 C:IF 或 logic:equals 中，我没有找到如何指定表单名称和属性以及大小比较。

任何擅长struts的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:21:51.760

当您转发到一个 jsp 时，表单名称将在该 jsp 的范围内。所以只需在jsp中引用表单名称，jsp就会看到。假设您在 struts-config.xml 中为表单类指定的名称是 MyFormName，列表属性名称是 myList：

```
<logic:notEmpty name='MyFormName' property='myList'>

</logic:notEmpty> 
```

让我知道这是否解决了您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T23:18:34.573

您可以使用`notEmpty`标签`logic`库中的标签（由 struts 框架提供），就像@Uchenna 建议的那样。

或者，您可以直接使用JSTL 中的`c:if`标签（带有 EL ），后台也使用该标签。`${}``logic:notEmpty`

样本：

```
<!-- This resolves to false even if myCollection is null -->
<c:if test="${! empty myForm.myCollection}">

</c:if> 
```

`!`或者，您也可以使用`not`关键字（或运算符）来代替。

文件：

*   [`logic:notEmpty`](http://struts.apache.org/1.x/struts-taglib/tlddoc/logic/notEmpty.html)
*   [`c:if`](http://docs.oracle.com/javaee/5/jstl/1.1/docs/tlddocs/c/if.html)

# c++ - 如何将 ATL::CImage 转换为 Gdiplus::Bitmap 并返回？

> ID：10284951
> 
> 赞同：0
> 
> 时间：2012-04-23T17:05:01.837
> 
> 标签：c++, windows, mfc, gdi+

我需要将图像旋转 90 度，我认为使用 GDI+ 将是一个不错的方法。但是，我被迫使用 MFC 的 CImage，我不确定如何将它转换为 Gdiplus::Bitmap 对象。旋转后，我还需要将其转换回 CImage。任何想法（或更好的方法的建议）？为此，良好的性能很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:26:04.937

您可以简单地使用带参数的[`Bitmap`构造](http://msdn.microsoft.com/en-us/library/ms536314.aspx)`HBITMAP`函数；CImage 类具有内置的类型转换以提供`HBITMAP`. 如果您正在就地进行操作，则 CImage 对象将自动更新，但您需要让 Bitmap 对象超出范围才能使用它。

# c# - C#在列表中添加值的方法 在索引

> ID：10284952
> 
> 赞同：31
> 
> 时间：2012-04-23T17:05:16.360
> 
> 标签：c#, list, indexing, this, add

有什么方法可以在特定索引处添加值？我尝试做索引器并且我有列表。在这种情况下有什么技巧可以做到这一点：D

```
 public class Multime<T>
{
    private List<Multime<T>> multiSets;
    private List<T> multimea;

    ***public Multime<T> this[int index]
    {
        get { return this.Multisets.ElementAt(index); }
        set { this.Multisets.CopyTo(value,index); }
    }***

    public List<Multime<T>> Multisets
    {
        get { return this.multiSets; }
        set { this.multiSets = value; }
    }//accesori Multimea de multimi

    public List<T> Multimea
    {
        get { return this.multimea; }
        set { this.multimea = value; }
    }//Accesori Multime 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-04-23T17:08:07.510

上的`.Insert()`方法`List<T>`正是为了这个目的：

```
someList.Insert(2, someValue); 
```

这将修改`someList`集合以`someValue`在 index处插入`2`，将其他值推高一个索引。

更多信息[在这里](http://msdn.microsoft.com/en-us/library/sey5k5z4.aspx)。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-04-23T17:06:55.513

[`List<T>.Insert`](http://msdn.microsoft.com/en-us/library/sey5k5z4.aspx)， 也许？

但我建议您可能只想获取/写入 - 而不是插入：

```
public Multime<T> this[int index]
{
    get { return Multisets[index]; }
    set { Multisets[index] = value; }
} 
```

请注意，从 C# 3 开始，有更简单的方法来编写这些属性，顺便说一句：

```
public List<T> Multimea { get; set; }
public List<Multime<T>> Multisets { get; set; } 
```

直接公开组合集合通常也不是一个好主意 - 这意味着您无法控制这些集合中发生的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T17:07:04.823

你可以使用[List.Insert](http://msdn.microsoft.com/en-us/library/sey5k5z4.aspx)吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T17:07:58.617

尝试使用`List.Insert`

这应该可以解决您遇到的问题。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2018-12-17T22:11:10.070

您可能正在寻找更像字典或地图的东西。这些是允许您使用键值对分配对象的集合类型，因此您始终可以在特定位置分配对象并从同一位置检索它。您可能认为您需要该列表，因为您不知道要存储多少条记录，但如果您对最大记录数有所了解，它将帮助您决定是否可以使用字典之类的东西。我认为限制非常高，但是您可以查看 Dictionary 类以查看限制。

# css - 如何去除IE9中链接周围的蓝色边框？

> ID：10284954
> 
> 赞同：10
> 
> 时间：2012-04-23T17:05:24.073
> 
> 标签：css, internet-explorer

我在这个网站上工作：http: [//amberdreams.com](http://amberdreams.com)

这是一个非常简单的站点，我一直在使用 netrenderer.com 来确保所有页面都可以在 Internet Explorer 中运行。

尽管我尽了最大的努力，但在使用 Internet Explorer 9 查看此站点时，我仍无法删除该站点主页上 facebook 和 twitter 链接周围的蓝色边框。

```
img {border: none; }
a img {border: 0px; } 
```

我已经尝试了上面代码的变体，它成功地删除了除 9 之外的每个版本的 IE 的蓝色边框。有什么想法吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-12T11:40:24.213

在你的 CSS 中试试这个，对我有用。

```
img {text-decoration: none; border: 0px} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T17:10:18.647

我觉得应该没问题。

您可能想清除缓存并重试...

如果不是，请尝试：

```
a{border:none} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T17:10:39.727

在您的 css 中尝试以下操作：

```
border-style:none; 
```

那应该消除您的边界问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-13T15:57:15.923

这是[关于删除大纲的精彩帖子，](http://css-tricks.com/removing-the-dotted-outline/)并单独评论了 IE9：

> George Langley 写道，IE 9 显然不允许您删除链接周围的虚线轮廓，除非您包含此元标记：

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T17:18:18.000

链接周围边框的可见性取决于 IE 中的用户设置。设置`A {text-decoration: none; border: 0px}`。

看来，您的视频对象未在 IE 中加载。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-20T03:52:55.320

//添加到你的CSS

```
* {-ms-box-sizing:border-box;}
img {outline-style: none;} 
```

//添加到你的 HTML

```
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
</head> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-01-26T17:43:39.930

在我的情况下，工作代码（由 mailchimp 生成并为“a”添加规则）是：

```
img,a img,a{
    border:0;
    height:auto;
    outline:none;
    text-decoration:none;
} 
```

所以这是对其他答案的假设

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-09-06T20:26:46.273

最好的方法是添加一个 CSS 属性

```
a:link, a:visited { text-decoration: none} 
```

如果要在鼠标悬停时更改颜色，请添加

```
a:hover {color: x } // x = the color of your choice 
```

# php - PHP、geojson 和 openlayers

> ID：10284955
> 
> 赞同：1
> 
> 时间：2012-04-23T17:05:33.037
> 
> 标签：php, postgresql, openlayers, geojson

我完全坚持使用 openlayers 编写脚本。我在 postgis 中有数据库，其中包含每行的坐标和高度值，甚至几何列。我创建带有提交按钮的表单，仅根据用户输入的值检索数据。当我按下提交按钮时，PHP 正在获取正确的数据并转换为我已显示为结果的 JSON 格式。有人知道如何将这些结果加载到 openlayers 层并显示这些点吗？那是主页：

```
 `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Welcome to my maps</title>
<script src="http://www.openlayers.org/api/OpenLayers.js"></script>
<script src="http://www.openstreetmap.org/openlayers/OpenStreetMap.js"></script>
<link rel="stylesheet" href="http://openlayers.org/api/theme/default/style.css" type="text/css" />

        <style type="text/css">
                       #bmap {
                          width:83%;
                          height:90%;
                          border:2px solid black;

                          position:absolute;
                          top:10px;
                          left:200px;
                          }
                          body{
                          background:yellow;
                          }
            </style>

             <script>

                    var mapoptions = {
                                theme: null,
                                maxExtent: new OpenLayers.Bounds(-20037508.34,-20037508.34,20037508.34,20037508.34),
                                maxResolution: 156543.0399,
                                numZoomLevels: 20,
                                units: 'm',
                                projection: new OpenLayers.Projection("EPSG:900913"),
                                displayProjection: new OpenLayers.Projection("EPSG:4326"),

                     controls:[
                                  new OpenLayers.Control.PanZoomBar(),
                                  new OpenLayers.Control.Navigation(),
                                  new OpenLayers.Control.LayerSwitcher(),
                                  new OpenLayers.Control.MousePosition(),
                                  new OpenLayers.Control.ScaleLine(),
                                  new OpenLayers.Control.Scale()
                              ]
                    };

                          function init() {
                            map = new OpenLayers.Map("bmap", mapoptions);

                            var mapnik = new OpenLayers.Layer.OSM("OSM Mapnik");
                            map.addLayer(mapnik);

                            var cyclemap = new OpenLayers.Layer.OSM("OSM CycleMap");
                            map.addLayer(cyclemap);

                             var wmslayer = new OpenLayers.Layer.WMS(
                                        "Altitude points",
                                        "http://192.168.56.101:8080/geoserver/wms",
                                        {'layers': 'dublin_flooding:dublin', 'format':'image/png', 'transparent':'true'},
                                        {'opacity': 1.0, 'isBaseLayer': false, 'visibility': false}
                                   );
                              map.addLayer(wmslayer);

var veclayer=new OpenLayers.Layer.Vector("geojson",{

                    strategies: [new OpenLayers.Strategy.Fixed()],
                    protocol: new OpenLayers.Protocol.HTTP({
            url: "query5.php",
                        format: new OpenLayers.Format.GeoJSON(),
                    internalProjection: new OpenLayers.Projection("EPSG:900913"),
                          externalProjection: new OpenLayers.Projection("EPSG:4326")
                    }),

                });
                map.addLayer(veclayer);

                            map.setCenter(new OpenLayers.LonLat(-6.26555,53.34590) // Center of the map
                              .transform(
                                new OpenLayers.Projection("EPSG:4326"), // transform from WGS 1984
                                new OpenLayers.Projection("EPSG:900913") // to Spherical Mercator Projection
                              ), 12 // Zoom level
                            );
                          }
            </script>

</head>

<body>
<h3>Flooding projection</h3>
<form action="query5.php" method="POST" name="form">

        <table cellpadding="0">
        <tr>
        <td>
        <p>Meters:</p>
        </td>
        <td>
        <input name="sliderValue" id="sliderValue" type="Text" size="3">
        </td>
        </tr>
        <tr>
        <td>
<input name="Submit" type="Submit" value="Submit">
</td>
</tr>
</table>

</form>
<body onload="init();">
 <div id="bmap"></div>
</body>
</html>
` 
```

PHP 查询是这样的：

```
 `<?php
$db = pg_connect("host=localhost port=5432 dbname=firstSpatialDB user=postgres password=postgres");
$query = "SELECT* FROM dublin where alt<='$_POST[sliderValue]'";
        $result = pg_query($query);
// Return route as GeoJSON
   $geojson = array(
       'type'      => 'FeatureCollection',
       'features'  => array()
    ); 
   // Add edges to GeoJSON array
    while($row=pg_fetch_array($result)) {  
  $feature = array(
          'type' => 'Feature', 
          'geometry' => array(
             'type' => 'Point',
             'coordinates' => array($row[1], $row[2])

          ),
          'properties' => array(
            'gid' => $row[0],
            'alt' => $row[3]
           )
       );
       // Add feature array to feature collection array
       array_push($geojson['features'], $feature);
    }
    pg_close($dbconn);
  // Return routing result
    header("Content-Type:application/json",true);
    //header("Location:map.html");
    echo json_encode($geojson);
?> ` 
```

在我看来，这应该有效，但根本没有。也许有人知道出了什么问题。感谢您的任何建议，因为我真的有足够的自己的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T08:24:27.120

我刚试过你的代码 (chri_chri) 。

我试图加载图像，但似乎是错误的......我现在也去 openlayers

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Floorplan test</title>
<script src="http://www.openlayers.org/api/OpenLayers.js"></script>
<script src="http://www.openstreetmap.org/openlayers/OpenStreetMap.js"></script>
<link rel="stylesheet" href="http://openlayers.org/api/theme/default/style.css"     type="text/css" />

        <style type="text/css">
                       #bmap {
                          width:83%;
                          height:90%;
                          border:2px solid black;

                          position:absolute;
                          top:10px;
                          left:200px;
                          }
                          body{
                          background:yellow;
                          }
            </style>

             <script>

                   var map;

        function init(){
            map = new OpenLayers.Map('map');
            var options = {numZoomLevels: 3}
             var floorplan = new OpenLayers.Layer.Image(
            'Floorplan Map',
            'png_1.jpg',
            new OpenLayers.Bounds(-300, -188.759, 300, 188.759),
            new OpenLayers.Size(580, 288),
            options
        );
            map.addLayer(floorplan);
           //Create a Format object
    var vector_format = new OpenLayers.Format.GeoJSON({}); 

    //Create a Protocol object using the format object just created
    var vector_protocol = new OpenLayers.Protocol.HTTP({
        url: 'ex5_data.json',
        format: vector_format
    });

    //Create an array of strategy objects
    var vector_strategies = [new OpenLayers.Strategy.Fixed()];

    //Create a vector layer that contains a Format, Protocol, and Strategy class
    var vector_layer = new OpenLayers.Layer.Vector('More Advanced Vector Layer',{    
        protocol: vector_protocol,
        strategies: vector_strategies 
    });

    map.addLayer(vector_layer);

    if(!map.getCenter()){
        map.zoomToMaxExtent();
    }
        }
            </script>

</head>

<body>
<h3>Floorplan</h3>

<body onload="init();">
 <div id="bmap"></div>
</body>
</html> 
```

我开始做的是加载平面图并尝试缩放它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T11:24:15.183

我从来没有使用过php，所以我不知道这是否是你的问题所在。将您的代码与此进行比较，它对我有用，也许您的错误出在 javascript 中。

```
 var map;

        function init(){
            map = new OpenLayers.Map('map');
            var options = {numZoomLevels: 3}
             var floorplan = new OpenLayers.Layer.Image(
            'Floorplan Map',
            '../../temp_photos/sample-floor-plan.jpg',
            new OpenLayers.Bounds(-300, -188.759, 300, 188.759),
            new OpenLayers.Size(580, 288),
            options
        );
            map.addLayer(floorplan);
           //Create a Format object
    var vector_format = new OpenLayers.Format.GeoJSON({}); 

    //Create a Protocol object using the format object just created
    var vector_protocol = new OpenLayers.Protocol.HTTP({
        url: 'ex5_data.json',
        format: vector_format
    });

    //Create an array of strategy objects
    var vector_strategies = [new OpenLayers.Strategy.Fixed()];

    //Create a vector layer that contains a Format, Protocol, and Strategy class
    var vector_layer = new OpenLayers.Layer.Vector('More Advanced Vector Layer',{
        protocol: vector_protocol,
        strategies: vector_strategies 
    });

    map.addLayer(vector_layer);

    if(!map.getCenter()){
        map.zoomToMaxExtent();
    }
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-15T13:05:26.520

您可以查看此示例 [postgis to geojson php](https://gist.github.com/bmcbride/1913855/)，以阐明如何使用 php 脚本通过 postgis 数据库获取 geojson 数据。

就像你在你的geojson层url中所做的那样，你传递你的php脚本的url......希望它有帮助；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-15T11:19:01.723

你可以使用 PHP

```
<?php
    ini_set('display_errors', 1);

    # Connect to PostgreSQL database
    $conn = pg_connect("dbname='gisdata' user='username' 
    password='password' host='localhost'") 
    or die ("Could not connect to server\n");

    $result = pg_fetch_all(pg_query($conn, "SELECT row_to_json(fc)
        FROM ( SELECT 'FeatureCollection' As type, 
        array_to_json(array_agg(f)) As features
        FROM (SELECT 'Feature' As type
        , ST_AsGeoJSON(lg.geom, 4)::json As geometry
        , row_to_json((SELECT l FROM (SELECT id, designacao) As l
          )) As properties
        FROM hidrog As lg ) As f ) As fc;"));

    if (!$result) {
        echo "An error occurred.\n";
        exit;
    }

    #echo json_encode($result, JSON_NUMERIC_CHECK);
    $json_data = json_encode($result);
    file_put_contents('test.json', $json_data);

    $jsonString = file_get_contents('test.json');
    $json_new = substr($jsonString, 17,-2);
    $json_new = str_ireplace('\"', '"', $json_new);
    echo $json_new;

    file_put_contents('test_new.json', $json_new);
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-17T20:03:31.630

我将 PostGis 与没有 GeoServer 的 Openlayers 3/4 一起使用。我选择的方式是通过我调用的函数从 Postgis 数据库中获取 geojson，该函数根据我的设置返回数据和样式。

在 Javascript 中，我定义了数据和样式 => Javascript 函数通过 GET 调用 php 脚本以从 Postgis 中检索数据 => 函数设置要在 Openlayers 3 中呈现的数据样式。整个 sripts 可以在[Is there a simple way to在 Openlayers 3 中使用 Postgis-geojson？](https://gis.stackexchange.com/questions/216792/is-there-an-easy-way-to-use-postgis-geojson-in-openlayers-3)

请注意，建议的解决方案并不安全，因为可以操纵 GET 字符串（sql 注入）。我通过 https 使用调用，服务器端 php-script 检查是否设置了 SESSION。所以脚本在没有登录的情况下无法执行。我们在一个非常小的小组中使用它，但在许多人正在访问数据的环境中使用它可能不是一个好主意。

所以提高安全性会很好。

# git - 本地和远程 git repos 不同，但显示“Already up to date”

> ID：10284960
> 
> 赞同：1
> 
> 时间：2012-04-23T17:05:50.390
> 
> 标签：git, github

帮助！我的 git 存储库在泡菜中！

推拉本地和远程分支说`Already up-to-date.`但是检查文件会发现它们之间的差异。

这很复杂，因为我有两个本地分支，master 和 staging，每个分支都跟踪相同的远程版本。

我花了几个小时试图找出一种系统的方法来解决这个问题。但我担心我会让事情变得更糟并在此过程中丢失编辑。

在这些情况下有推荐的方法吗？

**编辑**

```
->git remote show origin                 
* remote origin
  Fetch URL: git@github.com:mygits/myrepo.git
  Push  URL: git@github.com:mygits/myrepo.git
  HEAD branch (remote HEAD is ambiguous, may be one of the following):
    master
    staging
  Remote branches:
    master  tracked
    staging tracked
  Local refs configured for 'git push':
    master  pushes to master  (up to date)
    staging pushes to staging (up to date) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:09:44.793

您的“git remote origin show”表明 master 和 staging 是相同的。因此，两者都“已经是最新的”可能不足为奇，但这取决于您在本地拥有什么。探索一下：

```
git fetch origin
git diff --name-status master..origin/master         # ditto for 'staging'
git diff --name-status master..staging                  # local differences 
```

通过这三个“差异”（显示两个，另外一个用于“来源/暂存”），您将了解 git 认为您的四个分支上的提交之间的差异。

您仍然有工作目录中的内容之间存在差异的问题，但“git status”会向您显示这些差异，它们与您的推拉问题无关。（如果有任何地方差异会阻止您未指明为问题的拉动。）

# c# - 动态地将图像添加到gridview行

> ID：10284961
> 
> 赞同：0
> 
> 时间：2012-04-23T17:05:51.417
> 
> 标签：c#, asp.net, gridview

在gridview中，我们有4列

> 资产类型 , 资产名称 , 资产描述 , 图标

现在我们想在图标列中添加图像，但会根据文档的类型而有所不同。例如。如果资产类型为 doc，则显示 Doc 图标；如果资产类型为 jpg，则显示 Jpg 图标

如何根据资产类型在每行中绑定不同的图像...

需要帮忙 ！！！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:29:11.123

我会研究`GridView RowDataBound`方法。访问 row `DataItem`，检查类型，然后动态更新图标的 ImageUrl（假设您的图标是`<asp:Image>`

一些阅读：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowdatabound.aspx)

[基于 Gridview 的 RowDataBound 事件中的行数据在单元格中进行条件输出](https://stackoverflow.com/questions/9666844/gridview-rowdatabound)

另一种方法是创建一个可以传入资产类型的公共函数，并返回图像的 URL。

```
<asp:Image ImageUrl='<%#GetImageUrl("imageType")%>'

public string GetImageUrl(string imageType){ 
    //return url 
} 
```

# android - 设置 Actionbarsherlock 选项卡的样式

> ID：10284962
> 
> 赞同：3
> 
> 时间：2012-04-23T17:05:53.743
> 
> 标签：android, styles, themes, android-actionbar, actionbarsherlock

所以我正在尝试设置我的 Actionbar 的标签样式，我已经使用 ActionBarSherlock 库实现了它。这是我的代码：

```
<style name="Theme.AndroidDevelopers" parent="Theme.Sherlock.Light.ForceOverflow">
                <item name="actionBarTabStyle">@style/CustomActionBarStyle</item>
                <item name="android:actionBarTabStyle">@style/CustomActionBarStyle</item>

            <style name="CustomActionBarStyle" parent="Widget.Sherlock.Light.ActionBar.TabBar">
                <item name="android:background">@drawable/actionbar_tab_bg</item>
            </style> 
```

在第二行和第三行，如果我将 actionBarTabStyle 更改为 actionBarStyle，我的操作栏本身就会更改为我想要的样式（当然不是很好），所以连接确实有效。但是，尝试更改操作栏选项卡（在其下方）仍然没有成功。

我希望有人能帮助我。

带着敬意，

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T12:03:54.567

以下应该工作

```
<style name="Theme.app" parent="@style/Theme.Sherlock.Light">
        <item name="android:actionBarTabBarStyle">@style/Theme.app.tabbar.style</item>
        <item name="actionBarTabBarStyle">@style/Widget.app.ActionBar.TabBar</item>
</style>

<style name="Theme.app.tabbar.style" parent="@style/Theme.Sherlock.Light">
    <item name="android:background">#FF0000</item>
    <item name="background">#FF0000</item>
</style>

<style name="Widget.app.ActionBar.TabBar" parent="Widget.Sherlock.ActionBar.TabBar">
    <item name="android:background">#FF0000</item>
    <item name="background">#FF0000</item>
</style> 
```

这会使 tabBar 变为红色。

你需要设置两倍的actionBarTabBarStyle。这是因为 Android > 3.0 和 Android <3.0

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-24T11:46:23.130

在你的`CustomActionBarStyle`你需要有

```
<item name="android:background">@drawable/actionbar_tab_bg</item>
<item name="background">@drawable/actionbar_tab_bg</item> 
```

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T11:28:34.607

所以我在样式方面遇到了一些困难，因为我发现首先通过代码添加选项卡的某种方式。感谢您的回复，它们都有效。

# android - Android更改任何视频文件的音频

> ID：10284965
> 
> 赞同：6
> 
> 时间：2012-04-23T17:06:01.150
> 
> 标签：android, audio, video, video-processing

我正在尝试为我的视频文件应用新的音频音高。

我想用 android 代码替换我现有视频的音频。在android中可以吗？谁能帮我做到这一点

是否有任何 Android 库支持此功能来更改视频文件的音频？

任何帮助表示赞赏...!!! 提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-13T09:27:40.333

这不是确切的解决方案，但您可以尝试：

1.  当您播放视频文件时，将其音量设置为零。

2.  同时使用您可以播放任何您想要的音频的服务。

3.  由于服务在后台运行，它对您的视频流没有影响。

4.  当您的视频结束时，结束您的服务。

并记住设置音频文件的音量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-10T12:58:57.170

您可以按照以下步骤轻松更改视频音高：-

1.  在你的 android 项目中添加这个库：[https](https://gitlab.com/soundtouch/soundtouch) ://gitlab.com/soundtouch/soundtouch 。按照此链接集成此库过程：[https](https://stackoverflow.com/a/52425255/7899427) ://stackoverflow.com/a/52425255/7899427 。

2.  成功集成此库后，首先提取 WAV 音频格式的音频文件。您可以使用 ffmpeg 库来执行此操作。

3.  与使用 soundtouch 库相比，您可以更改音频文件的音高和速度，并以 WAV 格式导出新的音频文件。

4.  完成这些步骤后，将转换后的音频文件与视频文件合并。

现在将获得具有相同视频文件的转换后的音频文件。快乐编码。

# php - Yii 框架中的 PHP 异步方法调用

> ID：10284966
> 
> 赞同：11
> 
> 时间：2012-04-23T17:06:01.507
> 
> 标签：php, mysql, events, asynchronous, yii

# 问题

我想知道是否可以在操作呈现视图时从其操作之一异步调用 Yii 控制器方法，从而使该方法完成长时间运行的操作。我很想做类似下面代码的事情，我不需要从`my_long_running_func`.

```
public function actionCreate() {
    $model = new Vacancies;
    if (isset($_POST['Vacancies'])) {
        $model->setAttributes($_POST['Vacancies']);
        $model->save();
        //I wish :)
        call_user_func_async('my_long_running_func',$model);
    }
    $this->render('create', array( 'model' => $model));
} 
```

## 问题

我正在尝试在 Yii 中编写一个控制器操作，该操作发布一个空缺并通知该帖子的感兴趣的订阅者。问题是执行通知查询需要很长时间。

现在我正在寻找一种异步运行查询的方法，以便发布者在尽可能短的时间内看到他的响应，同时查询以类似于 C# 委托或事件的方式在后台运行。

我搜索的解决方案在控制器操作过程中执行*异步请求*，但我想做的只是异步运行控制器的方法，并且操作必须等到*请求**完成*。

## 已尝试

我尝试了以下方法，但是对于我大约 1500 个用户的测试数据，查询仍然很慢。

*   Yii 活动记录

    ```
    if ($vacancy->save()) {                
        if($vacancy->is_active == 1) {
            $url = Yii::app()->createUrl('vacancies/view',array('id'=>$model->id));
            $trainees = YumUser::getUsersByRole('Trainees');
            if($trainees!=null) {
                foreach($trainees as $trainee){
                    $message = new YumMessage;
                    $message->from_user_id = Yii::app()->user->id;
                    $message->title = 'Vacancy Notification: '.date('M j, Y');
                    $message->message = "A new vacancy has been posted at <a href='{$url}'>{$url}</a>.";
                    $message->to_user_id = $trainee->id;
                    $message->save();                
                }
            }
        }    
    } 
    ```

*   Yii 数据访问对象

    ```
    if ($vacancy->save()) {        
        if($vacancy->is_active == 1) {
            $url = Yii::app()->createAbsoluteUrl('vacancies/view',array('id'=>$model->id));
            $trainee_ids=Yii::app()->db->createCommand()->select('user_id')->from('trainee')->queryColumn();
            $fid=Yii::app()->user->id;
            $msg="A new vacancy has been posted at <a href='{$url}'>{$url}</a>.";
            $ts = time();
            $tt = 'Vacancy Notification: '.date('M j, Y');
            if($trainee_ids!=null) {
                foreach($trainee_ids as $trainee_id){
                    Yii::app()->db->createCommand()
                      ->insert('message',array('timestamp'=>$ts,'from_user_id'=>$fid,'to_user_id'=>$tid,'title'=>$tt,'message'=>$msg));
                }
            }
        }
    } 
    ```

*   准备好的报表

    ```
    if ($vacancy->save()) {                
        if($vacancy->is_active == 1) {
            $url = Yii::app()->createUrl('vacancies/view',array('id'=>$model->id));                    
            $trainee_ids=Yii::app()->db->createCommand()->select('user_id')->from('trainee')->queryColumn();
            $fu=Yii::app()->user->id;
            $msg="A new vacancy has been posted at <a href='{$url}'>{$url}</a>.";
            $ts = time();
            $tt = 'Vacancy Notification: '.date('M j, Y');
            $sql="INSERT INTO message (timestamp,from_user_id,title,message,to_user_id) VALUES (:ts,:fu,:tt,:msg,:tu)";
            if($trainee_ids!=null) {
                foreach($trainee_ids as $trainee_id){

                    $command=Yii::app()->db->createCommand($sql);
                    $command->bindParam(":ts",$ts,PDO::PARAM_INT);
                    $command->bindParam(":fu",$fu,PDO::PARAM_INT);
                    $command->bindParam(":tt",$tt,PDO::PARAM_STR);
                    $command->bindParam(":msg",$msg,PDO::PARAM_STR);
                    $command->bindParam(":tu",$trainee_id,PDO::PARAM_INT);

                    $command->execute();

                }
            }
        }
    } 
    ```

## 研究

我还检查了以下网站（我只允许发布两个链接），但它们要么需要等待请求完成的操作，要么需要 curl（我在部署服务器上无权访问）或需要一个外部库。我希望有一个原生的 PHP 实现。

*   PHP 模拟多线程
*   php中的多线程
*   [异步 PHP 调用？](https://stackoverflow.com/questions/124462/asynchronous-php-calls)
*   [PHP中的异步处理](http://css.dzone.com/articles/asynchronous-processing-php)

## 编辑

通过以这种方式重写我的查询（将用户循环移动到数据库层），我能够大大减少响应时间：

```
public function actionCreate() {
    $user=YumUser::model()->findByPk(Yii::app()->user->id);
    $model = new Vacancies;
    $model->corporate_id=$user->professional->institution->corporate->id;
    $model->date_posted=date('Y-m-d');
    $model->last_modified=date('Y-m-d H:i:s');

    if (isset($_POST['Vacancies'])) {
        $model->setAttributes($_POST['Vacancies']);
        if ($model->save()) {                
            if($model->is_active == 1) {
                $url = Yii::app()->createAbsoluteUrl('vacancies/view',array('id'=>$model->id));                    
                $fu=Yii::app()->user->id;
                $msg="A new vacancy has been posted at <a href='{$url}'>{$url}</a>.";
                $ts = time();
                $tt = 'New Vacancy: '.$model->title;
                $sql='INSERT INTO message (timestamp,from_user_id,title,message,to_user_id) SELECT :ts,:fu,:tt,:msg,t.user_id FROM trainee t';
                Yii::app()->db->createCommand($sql)->execute(array(':ts'=>$ts,':fu'=>$fu,':tt'=>$tt,':msg'=>$msg));
            }                
            if (Yii::app()->getRequest()->getIsAjaxRequest())
                Yii::app()->end();
            else
                $this->redirect(array('view', 'id' => $model->id));
        }
    }
    $this->render('create', array( 'model' => $model));
} 
```

尽管如此，如果有人可以发布一种异步调用函数的方法，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-24T06:48:20.757

通常，此类问题的解决方案是在您的系统中集成消息总线。您可以考虑像[Beanstalkd](http://kr.github.io/beanstalkd/)这样的产品。这需要在您的服务器上安装软件。我想这个建议将被称为“使用外部库”。

如果您可以访问部署服务器并且可以添加 cronjob（或者系统管理员可以），您可以考虑使用 cronjob 对脚本执行 php-cli 调用，该脚本从由控制器填充的数据库中的作业队列中读取作业方法。

如果您无法在正在运行的服务器上安装软件，您可以考虑使用像[Iron.io](http://www.iron.io/)这样的 SAAS 解决方案来为您托管总线功能。Iron.io 正在使用所谓的*推送队列*。使用推送队列，消息总线主动向已注册的侦听器执行请求（推送）和消息内容。这可能有效，因为它不需要您执行 curl 请求。

如果以上都不可能，你的双手就被束缚了。与该主题非常相关的另一篇文章：[Scalable, Delayed PHP Processing](https://stackoverflow.com/questions/3115191/scalable-delayed-php-processing)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T17:46:17.907

我会试试这个，虽然我不是 100% 认为 Yii 会正常工作，但它相对简单且值得一试：

```
public function actionCreate() {
    $model = new Vacancies;
    if (isset($_POST['Vacancies'])) {
        $model->setAttributes($_POST['Vacancies']);
        $model->save();
        //I wish :)
    }

    HttpResponse::setContentType('text/html');
    HttpResponse::setData($this->render('create', array( 'model' => $model), true);
    HttpResponse::send();

    flush(); // writes the response out to the client

    if (isset($_POST['Vacancies'])) {
        call_user_func_async('my_long_running_func',$model);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T18:57:52.617

这是一种完全不同类型的建议。[注册由CWebApplication 的 end() 函数](http://www.yiiframework.com/doc/api/1.1/CApplication#end-detail)触发的 onEndRequest 事件怎么样？

```
public function end($status=0, $exit=true)
{
    if($this->hasEventHandler('onEndRequest'))
        $this->onEndRequest(new CEvent($this));
    if($exit)
        exit($status);
} 
```

您需要注册该事件并弄清楚如何以某种方式传递您的模型，但是在所有数据已刷新到浏览器后代码将正确运行......

# vb6 - 如何在仍在执行的同时断开与 FTP 主机服务器的连接？

> ID：10284970
> 
> 赞同：0
> 
> 时间：2012-04-23T17:06:18.137
> 
> 标签：vb6, ftp

我在 vb6 项目中使用 Inet1.Ocx 连接到远程主机。我想知道，在执行时有什么办法可以断开与服务器的连接？我会解释更多，我写了主机名和用户名和密码，然后点击（连接）按钮，但我发现我拼错了主机名，而连接的状态（仍然连接）我试图断开连接重新写入主机名，但我收到一条消息错误（仍在执行最后一个连接）......我如何在（仍在执行）时终止（最后一个连接）？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:11:38.537

Have the connection and login on a seperate form and then add a disconnect button which closes the form and the connection.

[http://www.bigresource.com/VB-How-to-Close-FTP-connection-using-inet-MntXMWW4FX.html](http://www.bigresource.com/VB-How-to-Close-FTP-connection-using-inet-MntXMWW4FX.html)

This might help ;)

# wso2 - 用户如何使用注册表治理 (GREG) 来搜索可用服务？

> ID：10284973
> 
> 赞同：2
> 
> 时间：2012-04-23T17:06:31.687
> 
> 标签：wso2, wso2carbon

我们需要提供一种工具，我们的客户（人们）可以在其中搜索已发布的服务。我们正在尝试使用治理注册表，但不知道正确的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T06:32:18.547

最简单的方法是使用 WSO2 提供的 java API。使用此 API，您可以浏览和搜索注册表。

```
 Resource governanceFolder = registry.get("/_system/governance");
    System.out.println("Folder description: " +                         
                         governanceFolder.getDescription());            

    // get the WSDL folder resource (use the url we browsed to)   
    String wsdlUrl = "/_system/governance/trunk/wsdls/_0/service_1" +
            "/account/wsdl/trafficavoidance/accountService.wsdl";
    Resource wsdlResource = registry.get(wsdlUrl);

    // output the content of the wsdl
    System.out.println(new String((byte[])wsdlResource          
                                          .getContent()));

    List<Resource> paths = getServicePath(registry, "/_system/governance/trunk/services"); 
```

配置和设置客户端有点困难。几周前我写了一篇关于这个的博客文章。因此，如果您需要更多信息，可以查看：[http ://www.smartjava.org/content/access-wso2-registry-programatically](http://www.smartjava.org/content/access-wso2-registry-programatically)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-01T13:51:59.923

以下链接可能会对您有所帮助 -[1] [https://docs.wso2.com/display/Governance460/CRUD+operation+support+for+Configurable+Governance+Artifacts](https://docs.wso2.com/display/Governance460/CRUD+operation+support+for+Configurable+Governance+Artifacts) -[2] [https://docs.wso2.com/ display/Governance460/Configurable+Governance+Artifacts+with+API](https://docs.wso2.com/display/Governance460/Configurable+Governance+Artifacts+with+API)

# regex - 除包含 ValidationGroup 的验证器之外的所有验证器的正则表达式

> ID：10284985
> 
> 赞同：1
> 
> 时间：2012-04-23T17:07:22.867
> 
> 标签：regex, visual-studio-2010

我试图在 Visual Studio 2010 中找到我们项目中的所有验证器。它们是这样的：

```
<asp:RequiredFieldValidator
    ID="validator"
    runat="server"
    ErrorMessage="*"
    ControlToValidate="control"
    Display="Static"
    ValidationGroup="main">*</asp:RequiredFieldValidator> 
```

或者

```
<asp:RequiredFieldValidator
    ID="validator"
    runat="server"
    ErrorMessage="*"
    ControlToValidate="control"
    Display="Static"
    ValidationGroup="main"
    Text="*"/> 
```

我尝试使用以下验证器但没有结果：

```
(\<asp\:[a-zA-Z]*Validator)~((.|\n)*ValidationGroup)(.|\n)*\/\>
(\<asp\:[a-zA-Z]*Validator)~(ValidationGroup)(.|\n)*(\<\/asp\:[a-zA-Z]*Validator\>)$ 
```

你看到它们有什么错误吗？

**编辑：**

我已经成功尝试了以下（但仅在网站[http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)上）：

```
\<asp\:[a-zA-Z]*Validator(?![^/]*ValidationGroup)[^/]*\<\/asp\:[a-zA-Z]*Validator\> 
```

但是当我换了？！与 ~ 它在 Visual Studio 中仍然不起作用。

但可能**mellamokb**发布了正确答案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:53:31.113

我构建了这个 VS 正则表达式，它似乎适用于第一种情况：

```
(\<asp\:[a-zA-Z]*Validator)((:b|\n)+~(ValidationGroup)[a-zA-Z]+="[^"]*")+\> 
```

我采用了您的基本想法，并使用表达式单独搜索了每个属性`(:b|\n)+[a-zA-Z]+\"[^"]*"`。然后我搜索多个来获取所有属性，最后添加一个`~(ValidationGroup)`以防止匹配完成，如果任何属性被命名为ValidationGroup。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T21:15:10.123

这也可能奏效。

```
 < [A-Za-z_:][\w:.-]*Validator
    (?=\s) 
    (?!
      (?:[^>"']|"[^"]*"|'[^']*')*? (?<=\s)
      ValidationGroup \s*=
    )
    (?> \s+ (?:".*?"|\'.*?\'|[^>]*?)+ 
  >
    ) (?<= /> )
|
  < ([A-Za-z_:][\w:.-]*Validator)
    (?=\s) 
    (?!
      (?:[^>"']|"[^"]*"|'[^']*')*? (?<=\s)
      ValidationGroup \s*=
    )
    (?> \s+ (?:".*?"|\'.*?\'|[^>]*?)+ 
  >
    ) (?<! /> )
  .*?
  </\1 \s*> 
```

# mysql - 如何配置 MySQL 以将数据保存在另一个卷上？

> ID：10284987
> 
> 赞同：2
> 
> 时间：2012-04-23T17:07:27.853
> 
> 标签：mysql

我正在（重新）在我的 Mac（Snow Leopard）上安装 MySQL 5.5.23，并且由于我有两个卷，其中一个的空间比启动卷大得多，我想将其配置为将其所有数据写入更大的卷而不是引导卷。

我尝试将数据目录移动到我的另一个卷并使用安装目录中的符号链接，但我无法将符号链接的所有权设置为与目录最初拥有的所有权相同......并且 MySQL 不再开始。我找不到日志来查看它尝试启动时会发生什么，但我认为它不喜欢我目前的安排。

有人有做这项工作的经验吗？

ETA：我在我的 macbook.local.err 文件中找到了这个：

```
120423 13:01:21 [ERROR] /usr/local/mysql/bin/mysqld: Can't find file: './mysql/host.frm' (errno: 13)
120423 13:01:21 [ERROR] Fatal error: Can't open and lock privilege tables: Can't find file: './mysql/host.frm' (errno: 13)
...
^G/usr/local/mysql/bin/mysqld: Can't find file: './mysql/plugin.frm' (errno: 13)
120423 14:16:55 [ERROR] Can't open the mysql.plugin table. Please run mysql_upgrade to create it. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:12:19.473

Edit MySQL's `my.cnf` file so that it's `datadir` variable (the data directory, usually `/var/lib/mysql` on Linux machines) is set to a folder of the new volume.

# android - 更改 android 包名称

> ID：10284990
> 
> 赞同：0
> 
> 时间：2012-04-23T17:07:45.847
> 
> 标签：android, package, manifest

我想更改尚未在 Market 中发布的应用程序的包名称。有没有办法在 Market/Play 上使用新的包名作为唯一 ID，同时在我的代码中仍然使用旧的包名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:45:58.850

更改清单中的软件包名称将更改 Google Play 读取您的软件包名称的方式。您无需在其他任何地方更改包名称即可完成此操作。在 Eclipse 中，类的包名可以独立更改（直接在 src 下）。

正如 zapl 所提到的，如果您的应用程序包名称与其中的类名称不同，您可能需要处理一些手动项目（假设所有内容都在同一个包中的快捷方式在这种情况下并不总是有效）。例如，使用“.classname”可能需要在清单和其他地方更改为完全限定的类名。

如果您正在寻找一种将包名称更改为在 Google Play 中与清单中不同的方法，那么不，您不能（无论如何这都不是一个好主意）。但是，您可以使用库项目来创建具有新包名称的新应用，而无需更改原始代码或清单。需要编写最少的代码/xml。

# c# - 值不在预期范围内

> ID：10284992
> 
> 赞同：11
> 
> 时间：2012-04-23T17:07:52.130
> 
> 标签：c#, silverlight, web-services, listbox

我正在使用以下代码更新列表框，这会从 Web 服务接收列表：

```
client.userKeywordsCompleted += new EventHandler<userKeywordsCompletedEventArgs>(client_userKeywordsCompleted);
client.userKeywordsAsync(); 
```

使用：

```
void client_userKeywordsCompleted(object sender, userKeywordsCompletedEventArgs e)
{

    string result = System.Convert.ToString(e.Result);

    for (int i = 0; i < e.Result.Count; i++)
    {

        ListBoxItem lbitem = new ListBoxItem();

        lbitem.Name = "lb_" + i;
        lbitem.Content = e.Result[i];

        lbitem.AddHandler(UIElement.MouseLeftButtonDownEvent, new MouseButtonEventHandler(ListBoxItem_DoubleClickEvent), true);

        listBox1.Items.Add(lbitem);

    } 
```

这很好用，因为我在加载子窗口时使用它，因此`ListBox`从数据库中获取列表，但是，当用户选择 中的项目之一时`ListBox`，他们可以选择编辑所选项目。所以一旦编辑到位，就会有一个编辑按钮，它会更新数据库中表中的列。因此，然后单击按钮，我再次调用上述代码以`ListBox`使用新凭据进行更新。但是，这会带来错误：

> “价值不在预期范围内。”

为什么我不能在按钮单击时调用 Web 方法，因为它所做的只是刷新`ListBox`?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-23T17:15:57.910

这可能是因为您尝试将具有相同名称的 ListBoxItem 添加到页面。

如果您想用新检索的值刷新列表框的内容，您必须首先手动删除列表框的内容，否则您的循环将尝试再次创建 lb_1 并将其添加到同一个列表中。

在此处查找 Silverlight 发生的类似问题[：Value does not fall in the expected range 异常](https://stackoverflow.com/questions/6067089/silverlight-value-does-not-fall-within-the-expected-range-exception)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T12:50:20.983

在尝试使用以下工具时，我出于完全不同的原因收到了来自 Visual Studio 2008 的相同通知“值不在预期范围内”：工具 - > Windows Embedded Silverlight 工具 - > 为 Windows Embedded 项目更新 Silverlight。

花了很多时间后，我发现问题是没有资源文件，更新工具会查找 .RC 文件

因此，解决方案是在资源文件夹中添加一个 .RC 文件，然后它就可以完美运行了。我希望它会帮助那里的人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-05T10:04:07.583

对于 WSS 3.0，我最近遇到了同样的问题。这是因为从代码访问的列在 wss 列表中不存在。

# mysql - MySQL，程序如何找到舰船火力

> ID：10284993
> 
> 赞同：0
> 
> 时间：2012-04-23T17:07:56.273
> 
> 标签：mysql

我正在尝试编写一个程序来找到一类舰艇的火力。（火力是火炮数量*排量的立方）

关系：

```
Classes(class, type, country, numGuns, bore, displacement) 
```

到目前为止我尝试过的...

```
CREATE PRODCEDURE firePower(in className VARCHAR(50), out p int)
-> begin
-> set p = (SELECT numGuns FROM classes WHERE class = className) * (SELECT displacement
FROM classes WHERE class = className)* (SELECT displacement FROM classes WHERE class
className)
-> * (SELECT displacement FROM classes WHERE class = className)
-> )
-> end;
-> //
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near 'PRODCEDURE
firePower(in className VARCHAR(50), out p int)
begin
set p = (SELECT ' at line 1 
```

我知道这是一个可怕的查询。我不是在寻找性能，只是想让它正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:10:54.747

The first issue that sticks out to me is that you mispelled "PROCEDURE":

```
CREATE PRODCEDURE ... 
```

should be

```
CREATE PROCEDURE ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:19:32.550

不是答案，但在评论中不起作用：

你为什么要做所有这些子选择？您正在使用相同的 where 子句从同一个表中获取不同的字段，您可以简单地执行以下操作：

```
SELECT numGuns * displacement * displacement * displacement
FROM classes
WHERE class = className 
```