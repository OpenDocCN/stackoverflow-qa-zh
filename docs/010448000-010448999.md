# StackOverflow 问答 10448000-10448999

# android - 如何更改列表视图中两个元素之间的线

> ID：10448003
> 
> 赞同：0
> 
> 时间：2012-05-04T11:32:18.413
> 
> 标签：android, android-listview

想象一个基本的 ListView，像这样：

```
Item1
---------
Item2
---------
Item3
---------
Item4 
```

如何更改 ------ 分隔 ListView 中每个项目的线的颜色或宽度？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T11:38:41.253

请试试

```
 android:divider="#FF0000"
 android:dividerHeight="4px" 
```

看看那个问题：[如何改变 Android ListView 分隔线的颜色？](https://stackoverflow.com/questions/2372415/how-to-change-color-of-android-listview-seperator-line)

# javascript - Javascript - 提醒用户得分和排名名称

> ID：10448004
> 
> 赞同：0
> 
> 时间：2012-05-04T11:32:21.283
> 
> 标签：javascript, arrays, alert

我正在创建一个 JavaScript 战舰游戏。游戏运行良好。我已经创建了游戏，以便用户最多有 25 次失误 - 如果他们达到 25 次，那么游戏就结束了。

我现在想创建一个函数，在游戏结束时，该函数会检查未命中的次数，并提醒用户他们的分数和排名名称。

我通过 ((25/misses)*100) 计算了分数。

所以这些是未命中的可能分数。

未命中 | 得分 (1 | 2500) (2 | 1250) (3 | 833) (4 | 625) (5 | 500) (6 | 417) (7 | 357) (8 | 313) (9 | 278) (10 | 250) ) (11 | 227) (12 | 208) (13 | 192) (14 | 179) (15 | 167) (16 | 156) (17 | 147) (18 | 139) (19 | 132) (20 | 125) ) (21 | 119) (22 | 114) (23 | 109) (24 | 104) (25 | 0)

我的军衔名称是 1) 舰队上将 2) 上将 3) 中将 4) 海军少将 5) 准将 6) 在行动中阵亡

这些就是我如何为未命中的人分配等级名称。

未命中 | 军衔名称 (0-12 | 海军上将) (13-15 | 海军上将) (16-19 | 中将) (20-24 | 准将) (25 | 杀戮行动)

我创建了一个名为“misses”的变量。每次你错过，显然变量增加一。

所以假设你刚刚打完比赛，有 14 次失误。我希望该函数检查变量“未命中”，然后为其分配适当的分数和排名。

我认为我可能会使用一个数组来记录未命中的得分。任何想法确切的代码是什么？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:38:20.270

最简单的解决方案：

```
function getRank(misses) {
    if (misses < 13)
        return 'Admiral of the Fleet';
    if (misses < 16)
        return 'Admiral';
    if (misses < 20)
        return 'Vice-Admiral';
    if (misses < 25)
        return 'Commodore';
    return 'Killed In Action';
} 
```

你也可以做这样的事情，它更复杂并且使用更多的内存，但会导致更快`getRank()`- 如果你不会有超过 25 次未命中，内存使用不会成为问题。

```
var getRank = (function () {
    var rank, i = 0, j,
        map = {},
        ranks = [
            [13, 'Admiral of the Fleet'],
            [16, 'Admiral'],
            [20, 'Vice-Admiral'],
            [25, 'Commodore'],
            [26, 'Killed In Action']
        ];
    for (j = 0; rank = ranks[j]; j++)
        for (; i < rank[0]; i++)
            map[i] = rank[1];
    return function (misses) {
        return map[misses];
    };
})(); 
```

# android - xml命名空间声明：自动替换包名

> ID：10448006
> 
> 赞同：47
> 
> 时间：2012-05-04T11:32:25.730
> 
> 标签：android, xml, android-layout, ant

我有一个具有多个构建目标的 android 项目（使用 ant）。出于测试目的，这些构建目标都有不同的包名称（所以我的包名称是 com.mycompany.myapp 用于发布构建和 com.mycompany.myapp.test 用于测试构建）。

这在大多数情况下都很好用，除非涉及到布局文件中的自定义 xml 命名空间。所以这：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:custom="http://schemas.android.com/apk/res/com.mycompany.myapp" /> 
```

将包名称替换为 com.mycompany.myapp.test 后立即停止工作。
因此，我必须在预建期间每次替换 com.mycompany.myapp 值。而且由于所有这些文件都应该在 vcs 中，并且每次一个人切换配置并且它们合并时都不应该发生冲突，我不得不将布局文件移动到特定的配置文件夹中，它们看起来像：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:custom="http://schemas.android.com/apk/res/@CONFIG.PACKAGENAME@" /> 
```

现在这些文件存储在 vcs 中，并在预构建期间替换 @CONFIG.PACKAGENAME@，然后将文件从 ./config/file.xml 复制到 ./res/layout/file.xml。

这非常不方便，并且不能很好地扩展（我无法想象在构建脚本中提到 50 个文件中的每一个）。

所以我的问题是：有没有办法在命名空间声明中自动使用当前包名？或者至少修改布局文件（或构建文件？），这样我每次更改包名称时都不必替换 com.mycompany.myapp 。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-05-05T06:30:22.327

原来有一个后缀：res-auto。

所以你需要做的就是写

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:custom="http://schemas.android.com/apk/res-auto" /> 
```

这将自动使用当前包名称。

# magento - 发票 pdf 徽标图像问题

> ID：10448007
> 
> 赞同：0
> 
> 时间：2012-05-04T11:32:26.620
> 
> 标签：magento

**嗨，在 Magento 中，我想在我的发票和包装详细信息页面以及我在后端上传的配置-> 销售-> 发票下的任何图像中使用大徽标**

它缩放到 200 * 50，我不知道如何解决这个问题..

**有人帮忙**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T09:07:08.573

嗨，发票的pdf由/app/code/core/Mage/Sales/Model/Order/invoice.pdf打印，徽标打印功能在函数insertLogo的abstract.pdf中

```
protected function insertLogo(&$page, $store = null)
{
    $image = Mage::getStoreConfig('sales/identity/logo', $store);
    if ($image) {
        $image = Mage::getBaseDir('media') . '/sales/store/logo/' . $image;
        if (is_file($image)) {
            $image = Zend_Pdf_Image::imageWithPath($image);
            $page->drawImage($image, 25, 800, 125, 825);
        }
    }
    //return $page;
} 
```

当然，从那里创建一个本地 ovveride 来修改徽标的大小和位置。我不知道是否在上传过程中完成了徽标缩放，如果是，则应首先处理“上传时缩放”问题。

再见朱塞佩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T14:54:25.427

我使用以下代码添加图像页眉和页脚，希望对您有所帮助。

图片路径：/media/sales/store/logo/default/pdf_invoice_header.png /media/sales/store/logo/default/pdf_invoice_footer.png

文件路径：app/code/local/Mage/Sales/Model/Order/Pdf/Invoice.php（复制自app/code/core/Mage/Sales/Model/Order/Pdf/Invoice.php）

```
 ...
    protected function _drawHeader(Zend_Pdf_Page $page)
{
    /* Add table head */
    /* Custom Code Start */
    $header_image = Mage::getConfig()->getOptions()->getMediaDir().DS.'sales/store/logo/default/pdf_invoice_header.png';             
    if (is_file($header_image)) {
        $header_image = Zend_Pdf_Image::imageWithPath($header_image);
        $page->drawImage($header_image, 0, 767, 595, 842);
    }
    $footer_image = Mage::getConfig()->getOptions()->getMediaDir().DS.'sales/store/logo/default/pdf_invoice_footer.png';             
    if (is_file($footer_image)) {
        $footer_image = Zend_Pdf_Image::imageWithPath($footer_image);
        $page->drawImage($footer_image, 0, 10, 595, 60);
    }
    /* Custom Code End */
    ... 
```

# jax-ws - 多个 wsit-client.xml

> ID：10448013
> 
> 赞同：0
> 
> 时间：2012-05-04T11:32:49.490
> 
> 标签：jax-ws, java-metro-framework, wsit

我有一个 Web 应用程序，在其中部署了多个基于 jax-ws 的 Web 服务客户端。他们都需要自己的wsit-client。我有什么方法可以指定在实例化服务类时使用哪个 wsit-client.xml 文件？

我想通过将 wsit-client 文件打包到相应的 jar 文件中来为每个 webservices 客户端单独保存 wsit-client 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T23:08:07.483

Sun的这个答案似乎很有希望：

[https://blogs.oracle.com/ritzmann/entry/non_standard_wsit_configuration_file](https://blogs.oracle.com/ritzmann/entry/non_standard_wsit_configuration_file)

它看起来像方法：

公共静态服务创建（URL wsdlDocumentLocation、QName serviceName、InitParams 属性）

仍然存在于最新的 JAX-WS 实现中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T14:43:25.220

像这样做：

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/"
    xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" name="mainclientconfig">

    <import location="WS1.xml"
        namespace="http://my.namespace.com/wsdl/WS1-1.0" />

    <import location="WS2.xml"
        namespace="http://my.namespace.com/wsdl/WS2-1.0" />

    <import location="WS3.xml"
        namespace="http://my.namespace.com/wsdl/WS3-1.0" />

</definitions> 
```

其中 WS1.xml 是第一个 WS-Client 等的原始 wsit-client.xml。

# javascript - 面向 jquery 的对象如何工作？

> ID：10448021
> 
> 赞同：1
> 
> 时间：2012-05-04T11:33:29.703
> 
> 标签：javascript, jquery

我不明白如何使用 Jquery/javascript 工作对象。

以及如何创建私有方法/变量？我在论坛上看到关闭，但我尝试过但没有工作。以及如何查看方法/变量是否是私有的？因为当我运行网站时，我总是在我的脚本中看到具有自己值的函数和变量......

谢谢你的帮助 ：）。

通过前：

```
var ClassName=function()
{
    validation : 0,
    name : 0,
            privateVar: 0,
    init : function ()
    {
        validation = 1;
        name ="toto";
    }
    privatefunction :function()
    {
        alert("a private function");
    }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:47:00.763

这是在 Javascript 中使用 OOP 的多种方法之一

```
var ClassName = function(){
    var privateVar = 0;

    function privateFunction(){
            alert("a private function");
    }

    return {
        validation : 0,
        name : 0,                
        init : function (){
                validation = 1;
                name ="toto";
        }
    };
};

var myClass = ClassName();
myClass.name = "Foo";
myClass.init(); 
```

Javascript 不是基于类，而是基于原型。没有类**，而是可以装饰或用作模板来构建新实例的实例。我在这里编写的这段代码具有类的所有属性，但只是一个实例。

** 这是个谎言

# c# - 在 Python 中压缩和使用 decompress C# 解压缩的最简单方法（反之亦然）

> ID：10448023
> 
> 赞同：2
> 
> 时间：2012-05-04T11:33:34.007
> 
> 标签：c#, .net, python, mono, compression

我有一个带有基于 Mono 的 C# 客户端和 Python 服务器的程序，它们通过 TCP/IP 套接字进行通信。消息主要使用二进制格式，但每条消息的最大部分通常是嵌入的 UTF-8 字符串（英文）。每条消息通常都很短（不到 100 字节），但有些消息可能更长（最多 64K）。交换了大量数据，我想通过在传输数据时压缩数据来减少消息大小和带宽使用。

我最初的研究没有发现任何明显兼容这两个标准库的东西。Python 有一个[zlib](http://docs.python.org/library/zlib.html)库，但我不能使用 C# 的[DeflateStream](http://msdn.microsoft.com/en-us/library/system.io.compression.deflatestream.aspx)或 GZipStream（因为它们需要一个我没有可用的外部 DLL），而且它似乎不适用于 SharpZipLib 的 ZipOutputStream（发出“错误 -3 - 不正确标头”响应）。（那些不使用 Mono 的人可能会有更多的运气 - 请参阅下面的 Duncan 的回答。）

我有兴趣了解在此通信链路上启用压缩的简单方法，请记住，任何可能易于用一种语言实现的解决方案都需要在另一种语言中具有等价物。我会接受专门针对 UTF-8 字符串而不是二进制消息的解决方案，尽管首选是压缩整个字节流。

理想情况下，我希望将外部依赖项保持在最低限度，但我意识到这可能不切实际。

更新：*在尝试使用 SharpZipLib 并在 Python 解码方面遇到重复错误后，我真的可以使用已知有效的代码提出具体建议，而不仅仅是针对一种语言或另一种语言的压缩库的建议。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:30:27.163

你写了：

> 同样，两个标准库都提供 gzip 压缩，但 Python 期望在这种情况下使用文件，这是不切实际的。

事实并非如此。Python 的`gzip.GZipFile()`类采用 a`filename`或 a `fileobj`。如果你想使用一个字符串，只需使用一个`StringIO`对象作为`fileobj`：

```
from gzip import GzipFile
from StringIO import StringIO
sio = StringIO()
with GzipFile(fileobj=sio, mode='wb') as gzip:
    gzip.write('uncompressed data')
compressed = sio.getvalue() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T21:04:56.957

SharpZipLib 和 Python 库中的 BZip2 对我有用。这是我测试的内容和方法：

一、C#程序（引用SharpZipLib）：

```
using System;
using ICSharpCode.SharpZipLib.BZip2;
using System.IO;

namespace Test
{
    class MainClass
    {
        public static void Main(string[] args)
        {
            var fStream = new FileStream("/home/konrad/output.bin", FileMode.Create);
            using(var writer = new StreamWriter(new BZip2OutputStream(fStream)))
            {
                for(var i = 0; i < 10; i++)
                {
                    writer.WriteLine("Line no {0}.", i);
                }
            }
        }
    }

} 
```

然后是 Python：

```
from bz2 import BZ2File
import sys

f = BZ2File("/home/konrad/output.bin")
for line in f.readlines():
    sys.stdout.write(line) 
```

接下来，运行 C# 程序。在那之后：

```
$ python ctest.py
Line no 0.
Line no 1.
Line no 2.
Line no 3.
Line no 4.
Line no 5.
Line no 6.
Line no 7.
Line no 8.
Line no 9. 
```

我认为它也可以反过来工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:42:14.833

我过去曾将 zlib 用于 .net，还有一些库包装了原生 zlib 库以提供托管解决方案。我需要做一些类似于你正在做的事情。我会直接在内存中进行压缩以进行较小的传输，然后压缩到文件中，然后从 url 下载文件并从文件中解压缩以获得更大的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-06T18:15:23.907

看来您使用的是 *nix 系统。如果是这种情况并且所有其他方法都失败了，您可以简单地使用系统库 (Mono.Unix.Native) 而无需担心找到合适的 .Net 库。

# sql - SQL 问题 - 计算最大天数序列

> ID：10448024
> 
> 赞同：6
> 
> 时间：2012-05-04T11:33:44.353
> 
> 标签：sql, vertica, window-functions

有一张包含访问数据的表格：

```
uid (INT) | created_at (DATETIME) 
```

我想知道用户连续多少天访问了我们的应用程序。例如：

```
SELECT DISTINCT DATE(created_at) AS d FROM visits WHERE uid = 123 
```

将返回：

```
 d      
------------
 2012-04-28
 2012-04-29
 2012-04-30
 2012-05-03
 2012-05-04 
```

有 5 条记录和两个间隔 - 3 天（4 月 28 日至 30 日）和 2 天（5 月 3 日至 4 日）。

我的问题是如何找到用户连续访问该应用程序的最大天数（示例中为 3 天）。试图在 SQL 文档中找到合适的函数，但没有成功。我错过了什么吗？

* * *

**UPD：** 谢谢你们的回答！实际上，我正在使用 vertica 分析数据库 (http://vertica.com/)，但是这是一个非常罕见的解决方案，只有少数人有使用它的经验。虽然它支持 SQL-99 标准。

好吧，大多数解决方案都需要稍作修改。最后我创建了自己的查询版本：

```
-- returns starts of the vitit series 
SELECT t1.d as s FROM testing t1
LEFT JOIN testing t2 ON DATE(t2.d) = DATE(TIMESTAMPADD('day', -1, t1.d))
WHERE t2.d is null GROUP BY t1.d

          s          
---------------------
 2012-04-28 01:00:00
 2012-05-03 01:00:00

-- returns end of the vitit series 
SELECT t1.d as f FROM testing t1
LEFT JOIN testing t2 ON DATE(t2.d) = DATE(TIMESTAMPADD('day', 1, t1.d))
WHERE t2.d is null GROUP BY t1.d

          f          
---------------------
 2012-04-30 01:00:00
 2012-05-04 01:00:00 
```

所以现在我们只需要以某种方式加入它们，例如通过行索引。

```
SELECT s, f, DATEDIFF(day, s, f) + 1 as seq FROM (
    SELECT t1.d as s, ROW_NUMBER() OVER () as o1 FROM testing t1
    LEFT JOIN testing t2 ON DATE(t2.d) = DATE(TIMESTAMPADD('day', -1, t1.d))
    WHERE t2.d is null GROUP BY t1.d
) tbl1 LEFT JOIN (
    SELECT t1.d as f, ROW_NUMBER() OVER () as o2 FROM testing t1
    LEFT JOIN testing t2 ON DATE(t2.d) = DATE(TIMESTAMPADD('day', 1, t1.d))
    WHERE t2.d is null GROUP BY t1.d
) tbl2 ON o1 = o2 
```

样本输出：

```
 s          |          f          | seq 
---------------------+---------------------+-----
 2012-04-28 01:00:00 | 2012-04-30 01:00:00 |   3
 2012-05-03 01:00:00 | 2012-05-04 01:00:00 |   2 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T13:24:51.493

另一种最短的方法是进行自联接：

```
with grouped_result as
(
    select 
       sr.d,
       sum((fr.d is null)::int) over(order by sr.d) as group_number
    from tbl sr
    left join tbl fr on sr.d = fr.d + interval '1 day'
)
select d, group_number, count(d) over m as consecutive_days
from grouped_result
window m as (partition by group_number) 
```

输出：

```
 d          | group_number | consecutive_days 
---------------------+--------------+------------------
 2012-04-28 08:00:00 |            1 |                3
 2012-04-29 08:00:00 |            1 |                3
 2012-04-30 08:00:00 |            1 |                3
 2012-05-03 08:00:00 |            2 |                2
 2012-05-04 08:00:00 |            2 |                2
(5 rows) 
```

现场测试：[http ://www.sqlfiddle.com/#!1/93789/1](http://www.sqlfiddle.com/#!1/93789/1)

sr = 第二行，fr = 第一行（或者前一行？[ツ</a>）。基本上我们正在做一个回溯，这是一个不支持的数据库模拟滞后`LAG`（Postgres 支持 LAG，但解决方案](http://xkcd.com/541/)[很长](https://stackoverflow.com/a/10449440)，因为窗口不支持嵌套窗口）。所以在这个查询中，我们使用了一种混合方法，通过连接模拟 LAG，然后对它使用 SUM 窗口，这会产生组号

**更新**

忘了放最后一个查询，上面的查询说明了组编号的基础，需要将其变形为：

```
with grouped_result as
(
    select 
       sr.d,
       sum((fr.d is null)::int) over(order by sr.d) as group_number
    from tbl sr
    left join tbl fr on sr.d = fr.d + interval '1 day'
)
select min(d) as starting_date, max(d) as end_date, count(d) as consecutive_days
from grouped_result
group by group_number
-- order by consecutive_days desc limit 1

STARTING_DATE                END_DATE                     CONSECUTIVE_DAYS
April, 28 2012 08:00:00-0700 April, 30 2012 08:00:00-0700 3
May, 03 2012 08:00:00-0700   May, 04 2012 08:00:00-0700   2 
```

**更新**

我知道为什么我使用窗口函数的[其他解决方案](https://stackoverflow.com/a/10449440)变得很长，因为我试图说明组编号和对组计数的逻辑而变得很长。如果我像[MySql 方法](https://stackoverflow.com/a/10450848)那样切入正题，那么窗口函数可能会更短。话虽如此，这是我的旧窗口函数方法，尽管现在更好：

```
with headers as
(
    select 
      d,lag(d) over m is null or d - lag(d) over m  <> interval '1 day' as header
    from tbl
    window m as (order by d)
)      
,sequence_group as
(
    select d, sum(header::int) over (order by d) as group_number
    from headers  
)
select min(d) as starting_date,max(d) as ending_date,count(d) as consecutive_days
from sequence_group
group by group_number
-- order by consecutive_days desc limit 1 
```

现场测试：[http ://www.sqlfiddle.com/#!1/93789/21](http://www.sqlfiddle.com/#!1/93789/21)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:58:07.600

在 MySQL 中，您可以这样做：

```
SET @nextDate = CURRENT_DATE;
SET @RowNum = 1;

SELECT MAX(RowNumber) AS ConecutiveVisits
FROM    (   SELECT  @RowNum := IF(@NextDate = Created_At, @RowNum + 1, 1) AS RowNumber,
                    Created_At,
                    @NextDate := DATE_ADD(Created_At, INTERVAL 1 DAY) AS NextDate
            FROM    Visits
            ORDER BY Created_At
        ) Visits 
```

这里的例子：

[http://sqlfiddle.com/#!2/6e035/8](http://sqlfiddle.com/#!2/6e035/8)

但是，我不能 100% 确定这是最好的方法。

在 Postgresql 中：

```
 ;WITH RECURSIVE VisitsCTE AS
 (  SELECT  Created_At, 1 AS ConsecutiveDays
    FROM    Visits
    UNION ALL
    SELECT  v.Created_At, ConsecutiveDays + 1
    FROM    Visits v
            INNER JOIN VisitsCTE cte
                ON 1 + cte.Created_At = v.Created_At
)
SELECT  MAX(ConsecutiveDays) AS ConsecutiveDays
FROM    VisitsCTE 
```

这里的例子：

[http://sqlfiddle.com/#!1/16c90/9](http://sqlfiddle.com/#!1/16c90/9)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T11:59:38.167

我知道 Postgresql 有一些类似于 MSSQL 中可用的公用表表达式的东西。我对 Postgresql 不是很熟悉，但是下面的代码适用于 MSSQL 并且可以满足您的需求。

```
create table #tempdates (
    mydate date
)

insert into #tempdates(mydate) values('2012-04-28')
insert into #tempdates(mydate) values('2012-04-29')
insert into #tempdates(mydate) values('2012-04-30')
insert into #tempdates(mydate) values('2012-05-03')
insert into #tempdates(mydate) values('2012-05-04');

with maxdays (s, e, c)
as
(
    select mydate, mydate, 1
    from #tempdates
    union all
    select m.s, mydate, m.c + 1
    from #tempdates t
    inner join maxdays m on DATEADD(day, -1, t.mydate)=m.e
)
select MIN(o.s),o.e,max(o.c)
from (
  select m1.s,max(m1.e) e,max(m1.c) c
  from maxdays m1
  group by m1.s
) o
group by o.e

drop table #tempdates 
```

这是 SQL 小提琴：[http ://sqlfiddle.com/#!3/42b38/2](http://sqlfiddle.com/#!3/42b38/2)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-20T20:48:50.533

所有这些都是非常好的答案，但我认为我应该通过展示另一种利用 Vertica 特有的分析能力的方法来做出贡献（毕竟它是您支付的一部分）。我保证最后的查询很短。

首先，使用 conditional_true_event() 进行查询。来自 Vertica 的文档：

> 为每一行分配一个事件窗口编号，从 0 开始，并在布尔参数表达式的结果为真时将编号增加 1。

示例查询如下所示：

```
select uid, created_at, 
       conditional_true_event( created_at - lag(created_at) > '1 day' ) 
       over (partition by uid order by created_at) as seq_id
from visits; 
```

并输出：

```
uid  created_at           seq_id  
---  -------------------  ------  
123  2012-04-28 00:00:00  0       
123  2012-04-29 00:00:00  0       
123  2012-04-30 00:00:00  0       
123  2012-05-03 00:00:00  1       
123  2012-05-04 00:00:00  1       
123  2012-06-04 00:00:00  2       
123  2012-06-04 00:00:00  2 
```

现在最终查询变得简单：

```
select uid, seq_id, count(1) num_days, min(created_at) s, max(created_at) f
from
(
    select uid, created_at, 
       conditional_true_event( created_at - lag(created_at) > '1 day' ) 
       over (partition by uid order by created_at) as seq_id
    from visits
) as seq
group by uid, seq_id; 
```

最终输出：

```
uid  seq_id  num_days  s                    f                    
---  ------  --------  -------------------  -------------------  
123  0       3         2012-04-28 00:00:00  2012-04-30 00:00:00  
123  1       2         2012-05-03 00:00:00  2012-05-04 00:00:00  
123  2       2         2012-06-04 00:00:00  2012-06-04 00:00:00 
```

最后一点： `num_days`实际上是内部查询的行数。如果原始表中有两次`'2012-04-28'`访问（即重复），您可能需要解决这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T14:30:04.737

这适用于最短的 MySQL，并使用最少的变量（仅一个变量）：

```
select 
   min(d) as starting_date, max(d) as ending_date, 
   count(d) as consecutive_days
from
(
  select 
     sr.d,
     IF(fr.d is null,@group_number := @group_number + 1,@group_number) 
        as group_number
  from tbl sr
  left join tbl fr on sr.d = adddate(fr.d,interval 1 day)
  cross join (select @group_number := 0) as grp
) as x
group by group_number 
```

输出：

```
STARTING_DATE                  ENDING_DATE                  CONSECUTIVE_DAYS
April, 28 2012 08:00:00-0700   April, 30 2012 08:00:00-0700 3
May, 03 2012 08:00:00-0700     May, 04 2012 08:00:00-0700   2 
```

现场测试：[http ://www.sqlfiddle.com/#!2/65169/1](http://www.sqlfiddle.com/#!2/65169/1)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-04T16:08:24.890

对于**PostgreSQL 8.4 或更高版本**，有一个简短而干净的方法，带有**窗口函数，而没有`JOIN`**.
我希望这是迄今为止发布的**最快的解决方案：**

```
WITH x AS (
    SELECT created_at AS d
         , lag(created_at) OVER (ORDER BY created_at) = (created_at - 1) AS nu
    FROM   visits
    WHERE  uid = 1
    )
   , y AS (
    SELECT d, count(NULLIF(nu, TRUE)) OVER (ORDER BY d) AS seq
    FROM   x
    )
SELECT count(*) AS max_days, min(d) AS seq_from,  max(d) AS seq_to
FROM   y
GROUP  BY seq
ORDER  BY 1 DESC
LIMIT  1; 
```

回报：

```
max_days | seq_from   | seq_to
---------+------------+-----------
3        | 2012-04-28 | 2012-04-30 
```

假设这`created_at`是一个`date`和`unique`。

1.  在 CTE x 中：对于我们的用户访问的每一天，检查他昨天是否也在这里。要计算“昨天”，只需使用`created_at - 1`第一行是一种特殊情况，在这里会产生 NULL。

2.  `seq`在 CTE y 中：计算每天的“到目前为止没有昨天的天数”（ ）的运行计数。NULL 值不计算在内，`count(NULLIF(nu, TRUE))`最快和最短的方法也是如此，也涵盖了特殊情况。

3.  最后，分组天数`seq`并计算天数。在此期间，我添加了序列的第一天和最后一天。 `ORDER BY`序列的长度，并选择最长的一个。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-04T13:01:20.300

以下应该是 Oracle 友好的，并且不需要递归逻辑。

```
;WITH
  visit_dates (
    visit_id,
    date_id,
    group_id
  )
AS
(
  SELECT
    ROW_NUMBER() OVER (ORDER BY TRUNC(created_at)),
    TRUNC(SYSDATE) - TRUNC(created_at),
    TRUNC(SYSDATE) - TRUNC(created_at) - ROW_NUMBER() OVER (ORDER BY TRUNC(created_at))
  FROM
    visits
  GROUP BY
    TRUNC(created_at)
)
,
  group_duration (
    group_id,
    duration
  )
AS
(
  SELECT
    group_id,
    MAX(date_id) - MIN(date_id) + 1  AS duration
  FROM
    visit_dates
  GROUP BY
    group_id
)
SELECT
  MAX(duration)  AS max_duration
FROM
  group_duration 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-04T13:07:17.460

PostgreSQL：

```
with headers as
(
    select 
        d,
        lag(d) over m is null or d - lag(d) over m  <> interval '1 day' as header

    from tbl
    window m as (order by d)
)      
,sequence_group as
(
    select d, sum(header::int) over m as group_number 
    from headers
    window m as (order by d)
)
,consecutive_list as
(
    select d, group_number, count(d) over m as consecutive_count
    from sequence_group 
    window m as (partition by group_number)
)
select * from consecutive_list 
```

分而治之的方法：3个步骤

第一步，找到标题：

```
with headers as
(
    select 
        d,
        lag(d) over m is null or d - lag(d) over m  <> interval '1 day' as header

    from tbl
    window m as (order by d)
)
select * from headers 
```

输出：

```
 d          | header 
---------------------+--------
 2012-04-28 08:00:00 | t
 2012-04-29 08:00:00 | f
 2012-04-30 08:00:00 | f
 2012-05-03 08:00:00 | t
 2012-05-04 08:00:00 | f
(5 rows) 
```

第二步，指定分组：

```
with headers as
(
    select 
        d,
        lag(d) over m is null or d - lag(d) over m  <> interval '1 day' as header

    from tbl
    window m as (order by d)
)      
,sequence_group as
(
    select d, sum(header::int) over m as group_number 
    from headers
    window m as (order by d)
)
select * from sequence_group 
```

输出：

```
 d          | group_number 
---------------------+--------------
 2012-04-28 08:00:00 |            1
 2012-04-29 08:00:00 |            1
 2012-04-30 08:00:00 |            1
 2012-05-03 08:00:00 |            2
 2012-05-04 08:00:00 |            2
(5 rows) 
```

第三步，计算最大天数：

```
with headers as
(
    select 
        d,
        lag(d) over m is null or d - lag(d) over m  <> interval '1 day' as header

    from tbl
    window m as (order by d)
)      
,sequence_group as
(
    select d, sum(header::int) over m as group_number 
    from headers
    window m as (order by d)
)
,consecutive_list as
(
select d, group_number, count(d) over m as consecutive_count
from sequence_group 
window m as (partition by group_number)
)
select * from consecutive_list 
```

输出：

```
 d          | group_number | consecutive_count 
---------------------+--------------+-----------------
 2012-04-28 08:00:00 |            1 |               3
 2012-04-29 08:00:00 |            1 |               3
 2012-04-30 08:00:00 |            1 |               3
 2012-05-03 08:00:00 |            2 |               2
 2012-05-04 08:00:00 |            2 |               2
(5 rows) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-05T14:52:50.853

在看到 OP 对其 Vertica 数据库的查询方法后，我尝试让两个连接同时运行：

这些 Postgresql 和 Sql Server 查询版本都应在 Vertica 中工作

PostgreSQL 版本：

```
select 
  min(gr.d) as start_date,
  max(gr.d) as end_date,
  date_part('day', max(gr.d) - min(gr.d))+1 as consecutive_days
from 
(
  select 
  cr.d, (row_number() over() - 1) / 2 as pair_number
  from tbl cr   
  left join tbl pr on pr.d = cr.d - interval '1 day'
  left join tbl nr on nr.d = cr.d + interval '1 day'
  where pr.d is null <> nr.d is null
) as gr
group by pair_number
order by start_date 
```

关于`pr.d is null <> nr.d is null`. 这意味着，前一行为空或下一行为空，但它们永远不能同时为空，所以这基本上删除了非连续日期，因为非连续日期的上一行和下一行为空（这基本上给我们所有只是页眉和页脚的日期）。这也称为[XOR 操作](https://stackoverflow.com/questions/2773186/what-is-the-point-of-the-logical-operators-in-c)

如果我们只剩下连续的日期，我们现在可以通过 row_number 将它们配对：

```
(row_number() over() - 1) / 2 as pair_number 
```

`row_number()`从 1 开始，我们需要用 1 减去它（我们也可以用 1 代替），然后我们将它除以 2；这使得配对日期彼此相邻

现场测试：[http ://www.sqlfiddle.com/#!1/fc440/7](http://www.sqlfiddle.com/#!1/fc440/7)

* * *

这是 SQL Server 版本：

```
select 
  min(gr.d) as start_date,
  max(gr.d) as end_date,
  datediff(day, min(gr.d),max(gr.d)) +1 as consecutive_days
from 
(
  select 
     cr.d, (row_number() over(order by cr.d) - 1) / 2 as pair_number
  from tbl cr   
  left join tbl pr on pr.d = dateadd(day,-1,cr.d)
  left join tbl nr on nr.d = dateadd(day,+1,cr.d)
  where         
       case when pr.d is null then 1 else 0 end
    <> case when nr.d is null then 1 else 0 end
) as gr
group by pair_number
order by start_date 
```

与上述相同的逻辑，除了日期函数的人为差异。并且 sql Server 需要一个`ORDER BY`子句`OVER`，而 Postgresql`OVER`可以留空。

Sql Server 没有一流的布尔值，这就是我们不能直接比较布尔值的原因：

```
pr.d is null <> nr.d is null 
```

我们必须在 Sql Server 中这样做：

```
 case when pr.d is null then 1 else 0 end
<> case when nr.d is null then 1 else 0 end 
```

现场测试：[http ://www.sqlfiddle.com/#!3/65df2/17](http://www.sqlfiddle.com/#!3/65df2/17)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-05-05T03:44:28.663

这个问题已经有好几个答案了。然而，SQL 语句似乎都太复杂了。这可以通过基本的 SQL、枚举行的方法和一些日期算术来完成。

关键的观察是，如果你有一堆天并且有一个平行的整数序列，那么当这些天在一个序列中时，差异就是一个恒定的日期。

以下查询使用此观察结果来回答原始问题：

```
select uid, min(d) as startdate, count(*) as numdaysinseq
from 
(
   select uid, d, adddate(d, interval -offset day) as groupstart
   from 
   (
     select uid, d, row_number() over (partition by uid order by date) as offset
     from 
     (
       SELECT DISTINCT uid, DATE(created_at) AS d
       FROM visits
     ) t
   ) t
) t 
```

唉，mysql没有这个`row_number()`功能。但是，有一个变量的变通方法（大多数其他数据库确实有这个功能）。

# java - LogCat 的信息和警告日志在运行应用程序时是否会产生任何问题？

> ID：10448025
> 
> 赞同：1
> 
> 时间：2012-05-04T11:33:46.457
> 
> 标签：java, android, multithreading, android-logcat

在运行我的 android 应用程序时，LogCat 会写入警告和信息日志，它们会影响我的应用程序的性能还是只需要忽略它们？

当我尝试从我使用[ByteArrayOutputStream](http://developer.android.com/reference/java/io/ByteArrayOutputStream.html) () 并且我还使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)更新 GUI 的音频文件中写入和读取时会发生这种情况。从 LogCat 我了解到它与线程有关，但它是如何导致的？请看下面的logcat

```
 05-04 16:41:17.645: W/dalvikvm(2030): threadid=3: spin on suspend #0 threadid=23 (h=4332248)
05-04 16:41:17.645: W/dalvikvm(2030): dumping state: process - 2030
05-04 16:41:17.645: I/dalvikvm(2030): "main" prio=5 tid=3 RUNNABLE
05-04 16:41:17.645: I/dalvikvm(2030):   | group="main" sCount=0 dsCount=0 s=N obj=0x4001b268 self=0xbd00
05-04 16:41:17.645: I/dalvikvm(2030):   | sysTid=2030 nice=0 sched=0/0 cgrp=default handle=-1344001384
05-04 16:41:17.645: I/dalvikvm(2030):   at com.m2.gui.player.readData(Native Method)
05-04 16:41:17.645: I/dalvikvm(2030):   at com.m2.gui.player.onCreate(player.java:149)
05-04 16:41:17.645: I/dalvikvm(2030):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-04 16:41:17.645: I/dalvikvm(2030):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
05-04 16:41:17.645: I/dalvikvm(2030):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
05-04 16:41:17.645: I/dalvikvm(2030):   at android.app.ActivityThread.access$2200(ActivityThread.java:119)
05-04 16:41:17.645: I/dalvikvm(2030):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
05-04 16:41:17.645: I/dalvikvm(2030):   at android.os.Handler.dispatchMessage(Handler.java:99)
05-04 16:41:17.645: I/dalvikvm(2030):   at android.os.Looper.loop(Looper.java:123)
05-04 16:41:17.645: I/dalvikvm(2030):   at android.app.ActivityThread.main(ActivityThread.java:4363)
05-04 16:41:17.645: I/dalvikvm(2030):   at java.lang.reflect.Method.invokeNative(Native Method)
05-04 16:41:17.645: I/dalvikvm(2030):   at java.lang.reflect.Method.invoke(Method.java:521)
05-04 16:41:17.645: I/dalvikvm(2030):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-04 16:41:17.645: I/dalvikvm(2030):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-04 16:41:17.645: I/dalvikvm(2030):   at dalvik.system.NativeStart.main(Native Method)
05-04 16:41:17.645: I/dalvikvm(2030): "AsyncTask #4" prio=5 tid=23 RUNNABLE
05-04 16:41:17.645: I/dalvikvm(2030):   | group="main" sCount=1 dsCount=0 s=N obj=0x44f2c048 self=0x4219c0
05-04 16:41:17.645: I/dalvikvm(2030):   | sysTid=2280 nice=10 sched=0/0 cgrp=bg_non_interactive handle=4332248
05-04 16:41:17.894: I/dalvikvm(2030):   at com.m2.gui.player$progressUpdate.doInBackground(player.java:-1)
05-04 16:41:17.894: I/dalvikvm(2030):   at com.m2.gui.player$progressUpdate.doInBackground(player.java:1)
05-04 16:41:17.894: I/dalvikvm(2030):   at android.os.AsyncTask$2.call(AsyncTask.java:185)
05-04 16:41:17.894: I/dalvikvm(2030):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
05-04 16:41:17.894: I/dalvikvm(2030):   at java.util.concurrent.FutureTask.run(FutureTask.java:137)
05-04 16:41:17.894: I/dalvikvm(2030):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
05-04 16:41:17.894: I/dalvikvm(2030):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
05-04 16:41:17.894: I/dalvikvm(2030):   at java.lang.Thread.run(Thread.java:1096)
05-04 16:41:17.912: W/dalvikvm(2030): threadid=3: spin on suspend resolved in 515 msec 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:55:53.827

> 它们会影响我的应用程序的性能吗？

在实际设备上登录使用滚动机制，缓冲区大小为 64KB，从我的角度来看，它应该不会对您的应用程序性能造成太大影响。

> 或者只是需要忽略它们？

您发布的 logcat 基本上是来自底层 dalvikvm 关于线程运行信息和状态的详细消息，我在这里看不到与您的应用程序相关的任何问题，我认为您可以简单地忽略它。如果你将安卓手机连接到你的开发机器然后执行一些操作并检查出来，你会看到系统记录了很多详细的消息，比如屏幕打开/关闭、活动创建/销毁等。

# grails - 为什么可以忽略 Grails Spring Security 中的 @Secured？

> ID：10448029
> 
> 赞同：1
> 
> 时间：2012-05-04T11:34:03.757
> 
> 标签：grails, spring-security

我正在使用 Grails 2.0.3 和最新的 Spring Security 插件来保护我的控制器。

但不知何故，控制器不安全。

```
import grails.plugins.springsecurity.Secured

@Secured("ROLE_USER")
class SettingsController extends UtilController {
  def index(){
    render "should not run while not logged in"
  }
} 
```

当我登录和未登录时，我会看到该消息。如果我注入 springSecurityService，它会显示正确的登录状态（true/false），所以注释没有被处理。

我尝试添加“IS_AUTHENTICATED_FULLY”要求并将注释移至方法，但无济于事。

可能跟什么有关？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T07:30:23.070

你有别的东西吗

```
 grails.plugins.springsecurity.securityConfigType = "Annotation" 
```

在配置文件中？

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T11:52:42.360

`@Secured`注释接受角色列表（`String[]`），我猜你在将字符串转换为字符串数组时遇到问题。

你可以试试`@Secured(["ROLE_USER"])`吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-17T14:02:04.173

我找到了适合我的情况的解决方案。确保在**grails.plugins.springsecurity**列表中有 filterInvocationInterceptor。**Config.groovy 中的filterNames**如示例中所示：

```
grails.plugins.springsecurity.filterChain.filterNames = [
   'securityContextPersistenceFilter', 'logoutFilter',
   'authenticationProcessingFilter', 'myCustomProcessingFilter',
   'rememberMeAuthenticationFilter', 'anonymousAuthenticationFilter',
   'exceptionTranslationFilter', 'filterInvocationInterceptor'
] 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-05T04:35:38.917

我认为`@secured`注释仅适用于控制器内部的方法，不适用于类。

尝试像这样使用它：

```
import grails.plugins.springsecurity.Secured

class SettingsController extends UtilController {
  @Secured(["ROLE_USER"])
  def index(){
    render "should not run while not logged in"
  }
} 
```

# jquery - 选择图像 ID

> ID：10448030
> 
> 赞同：0
> 
> 时间：2012-05-04T11:34:04.170
> 
> 标签：jquery

我正在尝试获取单击的图像的 id，然后将其与表单一起提交（通过设置隐藏的 imagenr 输入的 val）。但是我不知道如何提取ID。

```
 $(document).ready(function () {
            $(".test-img").click(function () {

                var imagevar = // How to grab the clicked img id?
                $("#imagenr").val(imagevar); // set the img id to the hidden input
                $("form#test-form").submit(); // submit the form

            })
        })

<form action="#" method="post" id="test-form">
<input type="hidden" name="imagenr" id="imagenr" value="">

<img class="test-img" id="1" src="images/image1.jpg" alt=""/>
<img class="test-img" id="2" src="images/image2.jpg" alt=""/>

</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T11:37:29.973

只需使用`this.id`，无需将其包装在 jQuery 中。

```
var imagevar = this.id; 
```

**[jsfiddle 上的示例](http://jsfiddle.net/markcoleman/8dmCz/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T15:09:58.650

您可以使用以下方法直接获取任何属性的值：

```
$(this).attr('id'); 
```

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:35:43.487

```
$(".test-img").click(function () {
   var imagevar = $(this).attr('id');
   $("#imagenr").val(imagevar); // set the img id to the hidden input
   $("form#test-form").submit(); // submit the form
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T11:36:13.353

```
$(document).ready(function () {
        $(".test-img").click(function () {

            var imagevar = $(this).attr('id');
            $("#imagenr").val(imagevar); // set the img id to the hidden input
            $("form#test-form").submit(); // submit the form

        })
    }); 
```

# minimagick - 无法使用 mini_magick 裁剪图像

> ID：10448032
> 
> 赞同：9
> 
> 时间：2012-05-04T11:34:09.393
> 
> 标签：minimagick

我使用 mini_magick 作为使用 ImageMagick 来操作一些图像的接口。**调整大小工作正常**。但是当我想裁剪一些图像时：

```
img = MiniMagick::Image.open(url)
img.crop('200x800!') 
```

它不断提示`No such file`

```
No such file or directory - /var/folders/c4/mqlwdx_d3kj6hqcnvbjr9mn80000gn/T/mini_magick20120504-11111-16kayc1.png 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-04T12:07:54.370

啊，我猜我在搜索错误的关键词。当我搜索`minimagick`而不是`mini_magick`. [未定义的方法裁剪！在 Rails 3.1.3 上使用 Carrierwave 和 MiniMagick，](https://stackoverflow.com/questions/8418973/undefined-method-crop-using-carrierwave-with-minimagick-on-rails-3-1-3)尤其是这个答案[https://stackoverflow.com/a/9961434/179691](https://stackoverflow.com/a/9961434/179691)

我确实知道有关 mini_magick 的东西只是一个包装`mogrify`等等。我的问题的原因是`-crop`只接受完整格式的几何图形。所以我将表达式更改为：

```
img.crop('200x800+0+0') 
```

那行得通。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-11T23:08:47.400

以防万一有人使用 Carrierwave 裁剪图像并将其直接上传到 Amazon S3，对我来说正确的方法如下：

image_uploader.rb

```
url=model.remote_image_url 
crop_params="#{w}x#{h}+#{x}+#{y}"
manipulate! do |img|
  img = MiniMagick::Image.open(url)
  img.crop(crop_params)
  img = yield(img) if block_given?
  img
end 
```

我添加 img = MiniMagick::Image.open(url) 的原因是因为如果我不指定自己的图像，它会抛出以下错误：

```
mogrify.im6: geometry does not contain image `/tmp/mini_magick20150811-15523-ac8go1.jpeg' 
```

我认为这是 mini_magick 会尝试查找图像的一些默认临时路径，但由于图像远程保存在 S3 中，因此无法找到它。

# ios - 如何在 ipad 应用程序中单击 uiimage 时打开视图（另一个 xib）

> ID：10448034
> 
> 赞同：1
> 
> 时间：2012-05-04T11:34:15.547
> 
> 标签：ios, ipad

如何在 ipad 应用程序中单击 uiimage 时打开视图（另一个 xib）。请告诉我是否有人知道提前谢谢。我在某处读到它可以通过使用类的自定义委托来完成，但我无法实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:51:15.377

首先，您必须启用 xib 中 imageView 的用户交互，如图所示![在此处输入图像描述](../Images/2d88d0976845361aa28aec23d61b4fb9.png)

现在添加一个 TapgastureREcognizer 如下

```
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(tapAction:)];
tapGesture.numberOfTapsRequired = 1;
                tapGesture.numberOfTouchesRequired = 1;
                [fr addGestureRecognizer:tapGesture]; 
```

这`fr`是 imageview 和`tapAction:`is 方法，您可以在其中显示其他视图（xib）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:46:59.327

我过去有两种方法。

A）创建一个 UIButon 并将图像设置为其背景。

B）您可以创建触摸手势识别器。触摸后，您可以获得用户触摸位置的坐标，并检查它是否真的在图像上。

您只是显示您的其他视图。

# c++ - 在 C++ 中验证 libcurl FTP 下载

> ID：10448035
> 
> 赞同：7
> 
> 时间：2012-05-04T11:34:23.593
> 
> 标签：c++, c, ftp, libcurl, codeblocks

我正在尝试使用 libcurl 上传文件，但它似乎没有验证与我的服务器的连接。我试过使用`ftp://username:password@example.com/`但无济于事。这是我的代码：

```
#include <stdio.h>
#include <string.h>
#include <curl/curl.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <errno.h>
#ifdef WIN32
#include <io.h>
#else
#include <unistd.h>
#endif
#define LOCAL_FILE      "C:/myfile.txt"
#define UPLOAD_FILE_AS  "file.txt"
#define REMOTE_URL      "ftp://example.com/"  UPLOAD_FILE_AS
#define RENAME_FILE_TO  "file.txt"
static size_t read_callback(void *ptr, size_t size, size_t nmemb, void *stream)
{
    curl_off_t nread;
    size_t retcode = fread(ptr, size, nmemb, (FILE *) stream);
    nread = (curl_off_t) retcode;
    fprintf(stderr, "*** We read %" CURL_FORMAT_CURL_OFF_T " bytes from filen", nread);
    return retcode;
}

int main(void)
{
    CURL *curl;
    CURLcode res;
    FILE *hd_src;
    struct stat file_info;
    curl_off_t fsize;
    struct curl_slist *headerlist = NULL;
    static const char buf_1[] = "RNFR " UPLOAD_FILE_AS;
    static const char buf_2[] = "RNTO " RENAME_FILE_TO;

    if (stat(LOCAL_FILE, &file_info)) {
    printf("Couldnt open '%s': %sn", LOCAL_FILE, strerror(errno));
    return 1;
    }
    fsize = (curl_off_t) file_info.st_size;
    printf("Local file size: %" CURL_FORMAT_CURL_OFF_T " bytes.n", fsize);
    hd_src = fopen(LOCAL_FILE, "rb");
    curl_global_init(CURL_GLOBAL_ALL);
    curl = curl_easy_init();
    if (curl) {
    headerlist = curl_slist_append(headerlist, buf_1);
    headerlist = curl_slist_append(headerlist, buf_2);
    curl_easy_setopt(curl, CURLOPT_READFUNCTION, read_callback);
    curl_easy_setopt(curl, CURLOPT_UPLOAD, 1L);
    curl_easy_setopt(curl, CURLOPT_URL, REMOTE_URL);
    curl_easy_setopt(curl, CURLOPT_POSTQUOTE, headerlist);
    curl_easy_setopt(curl, CURLOPT_READDATA, hd_src);
    curl_easy_setopt(curl, CURLOPT_INFILESIZE_LARGE, (curl_off_t) fsize);

    res = curl_easy_perform(curl);

    curl_slist_free_all(headerlist);

    /* always cleanup */
    curl_easy_cleanup(curl);
    }
    fclose(hd_src);     /* close the local file */

    curl_global_cleanup();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-21T11:46:59.030

您必须将所需的用户名和密码传递给 libcurl。这是通过选项 CURLOPT_USERPWD 完成的，只需将其设置如下：

```
curl_easy_setopt( curl, CURLOPT_USERPWD, "username:password" ); 
```

# php - 我的代码在某处有问题吗？我没有收到任何电子邮件

> ID：10448036
> 
> 赞同：0
> 
> 时间：2012-05-04T11:34:27.347
> 
> 标签：php, email

下面是我从 Linux 服务器发送的预订表格电子邮件的代码：

```
$body = "
      <p>Hello sir,</p>
      <p>Name: <b> {$firstname}</b><br />
        Email: <b> {$email}</b><br />
        Phone: <b> {$phone}</b><br />
        Length Of Stay: <b> {$length} </b><br />
        Number in Party: <b> {$party} </b><br />
        Month : <b> {$month} </b><br />
        Day: <b> {$day} </b><br />
        Year: <b> {$year} </b><br />
        Additional information:<b> {$additional_information} </b>

      </p>
      <p>with best regards, <br /><b>My Website</b></p>
    ";

    $to = 'info@currentwebsite.com';
    $subject = 'Message';

    $headers  = 'MIME-Version: 1.0' . "\r\n";
    $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
    $headers .= 'From: '. $email. "\r\n";
    $headers .= 'Reply-To: '.$email.'' . "\r\n" ;

    if(mail($to, $subject, $body, $headers))
    {
        phpalert( 'Your request has been sent successfully!' );
    }
    else {
        phpalert( 'Sorry! could not send your request. Please try again later.' );
    } 
```

有谁知道我的邮件为什么不来？显示“您的请求已成功发送！” 但我在收件箱甚至垃圾邮件中都找不到任何电子邮件。

**补充** 有没有机会阻止来自服务器的邮件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:45:14.820

尝试先发送一封没有任何元、标题、mime 等的简单邮件！首先尝试 php 文档示例。我他们不工作，你有一个服务器问题（php模块停用或类似的东西）：

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:49:44.563

1.  它可能无法在您的本地计算机上运行，​​因为您的本地计算机上的 SMTP 可能未配置。将此脚本托管在正确配置了 SMTP 的服务器上。

2.  尝试更改您尝试发送电子邮件的电子邮件地址。有时会发生 php 邮件功能不会向所有域发送电子邮件。我建议为 gmail.com 域尝试此代码..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:49:00.290

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: '. $email. "\r\n";
$headers .= 'Reply-To: '.$email.'' . "\r\n" ; 
```

在上面的行中，您使用了 $email，但它没有被分配。你把它分配到别的地方了吗？

# java - 在 Eclipse 中设置自动完成快捷方式

> ID：10448039
> 
> 赞同：21
> 
> 时间：2012-05-04T11:34:38.327
> 
> 标签：java, eclipse

在 Eclipse 中编程 Java 时，我可以键入`syso`并按 control+space 来自动完成此操作并获取`System.out.println();`. 我想知道 Eclipse 中是否有设置允许我设置此表单的其他快捷方式。（例如，我想输入`syscur`并让它自动完成`System.currentTimeMillis();`。）

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-04T11:37:26.303

您可以在此处执行此操作：`Window`-> `Preferences`-> `Java`-> `Editor`-> `Templates`。您还可以添加模板视图，您可以在`Window`-> `Show View`-> `Other`-> 搜索模板中找到该视图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-09T09:24:12.340

此功能称为[代码模板](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.jdt.doc.user%2FgettingStarted%2Fqs-EditorTemplates.htm)

# html - 试图隐藏对象/创建折叠效果

> ID：10448041
> 
> 赞同：0
> 
> 时间：2012-05-03T20:57:38.830
> 
> 标签：html, css

我正在尝试创造一种相当独特的效果。其实没那么复杂，我想做的是建一个实验站点，我已经做了。我似乎无法弄清楚如何去做最后一步。

所以这是我正在修补的[网站 http://www.dig.ital.me/sandbox/about-me/](http://www.dig.ital.me/sandbox/about-me/)

我想要做的是折叠其中包含文本的左侧栏：“Made in blah blah blah, etc.” 通过单击：“单击此隐藏此”。

我已经尝试过做一个与名称链接相关联的锚链接，并在单击该链接时调用 display:none。但是，它不起作用。所以我想我会尝试stackoverflow，关于如何在它崩溃并重新打开时实现这种效果。

```
#hide-option { color:#FFF; width:500px; height:500px; padding-left:170px;}
#hide-option:hover .fixedfooter {
display:none;
cursor:pointer; } 
```

这是隐藏选项 div id 的片段。我已经用尽了很多方法来尝试实现这种效果，但我似乎无法弄清楚。我已经尝试过 :onClick 类和 nth-child 类，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T07:27:22.793

[JavaScript 库JQuery](http://jquery.com/)将为您解决所有问题。

```
$("el").bind("onclick",function(){$("el").toggle('slow');}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:50:46.203

```
//  Store the footer as a variable, so we don't have to keep calling jQuery's selector engine
//  It's slower than a tortoise stuck in a traffic jam.
var target = $('.fixedfooter');

//  Every time the hide-option link is clicked
$('#hide-option a').click(function() {

    //  If the left position of the target is 0
    if(parseInt(target.css('left')) == 0) {
        //  Check the target is not animated and, if it is, animate off screen
        !target.is(':animated') && target.animate({left: -751}, 250);
    } else {
        //  Assume it's hidden, and put it back to the start
        !target.is(':animated') && target.animate({left: 0}, 250);
    }

    //  Stop the link being followed
    return false;

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T11:23:23.580

如果您只想要 CSS3（如果您不关心 IE6-8），您可以尝试以下方法：http: [//jsbin.com/isunoz/6/edit](http://jsbin.com/isunoz/6/edit)

我已经尽可能多地评论它，我希望它有帮助:)

我所做的是使用复选框输入来决定是否应显示侧边栏。

通过将复选框输入元素放在侧边栏元素（*div.fixedfooter*）之前并将锚点（箭头）更改为该复选框的标签，我可以使用*:checked*伪类和*+*选择器来定位兄弟元素（在本例中为侧边栏*div.fixedfooter*）。如果选中该复选框，则侧边栏将移出屏幕，如果未选中，则显示侧边栏（*左：0*）。

对于动画，我使用了一些 css3 过渡（*过渡：左 .4s 缓动*）:)

# asp.net - 在我的 ASP.NET 应用程序中进行更改以添加全球化

> ID：10448044
> 
> 赞同：0
> 
> 时间：2012-05-04T11:34:58.413
> 
> 标签：asp.net, sql-server, globalization

我必须将全球化（阿拉伯语）添加到我的英语 ASP.NET 应用程序中。

获取有关要在 Visual Studio 中完成的更改的信息非常容易，但获取有关要遵循的一般线路（服务器、数据库等）的信息，特别是要在我的 SQL Server 数据库中进行的更改，却不是那么容易。我需要复制数据库吗？也许是桌子？

该应用程序是一个学习管理系统：用户观看 Flash 电影，然后进行考试，然后写评论和反馈。表格是用户、组织、演示、电影、反馈和历史记录，以及更多安全性。

我们的想法是尽可能保留一台服务器，但允许重复数据库（我不知道这是否是一个可接受的解决方案）。

我应该如何进行？

非常感谢您的帮助，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:47:59.703

我不知道你有什么样的应用程序，但如果可行的话，我建议你将本地化问题完全远离数据层。当然，如果您的应用以内容为中心（例如电子商务网站），这是不可行的。但是，如果您的数据库仅包含一些特定于语言的内容，例如国家/地区名称（例如），那么您可以删除这些并将本地化责任转移到应用程序层（为了与此示例保持一致，请将数据库中的国家/地区名称替换为ISO 代码，并让应用程序的表示层将这些代码转换为国家名称）。

这是因为本地化应用程序可能取决于 .NET Framework 和 Visual Studio 为您提供的本地化支持（资源文件、附属程序集、语言回退），并且许多工具将有助于该过程。但是，在数据库层，您只能自己做所有事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:44:02.510

对于 Web 应用程序，有几种方法可以处理本地化，但您最终会得到资源文件 (.resx)。

在数据库方面，决定您是否只支持 2 种语言，在这种情况下，您可以避免重复文本字段，或者是否有其他语言的可能性，在这种情况下，您需要一个单独的表对于文本值，与语言键连接。

例如：

```
table something
  pk id,
  string data, 
  etc

table something_resx
  pk id,
  fk something_id
  fk lang
  string text 
```

然后你会有一个像这样的查询

从某事物中选择数据、文本在 s.id = r.something_id 上加入 something_resx r 其中 lang = lang_key

# optimization - 使用 SMO 初始化 SVM 中的拉格朗日乘数（顺序最小优化）

> ID：10448046
> 
> 赞同：0
> 
> 时间：2012-05-04T11:35:00.813
> 
> 标签：optimization, sequential

我遇到了一篇使用 SMO 实现 SVM 的论文。我打算在它的基础上实现SVR（支持向量回归），使用SMO。但我被困住了。我想问一下拉格朗日参数的初始值是怎么产生的？它们是使用随机函数生成的吗？因为我遇到了几个实现，并且没有关于如何生成初始值的概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T15:39:13.250

初始参数可以是随机的，SVR 最终会随着最优参数进化。二阶导数在 SVR 中保证为正，但在 SVM 中它可能并不总是支持优化。

# c - 在另一个中包含 c 文件

> ID：10448047
> 
> 赞同：11
> 
> 时间：2012-05-04T11:35:01.943
> 
> 标签：c

我想在另一个中包含一个 .c 文件。有可能吗？如果我在 .c 文件中包含头文件，它会很好用，但如果我在另一个 .c 文件中包含 .c 文件，它就不会很好用。
我正在使用 Visual Studio，但出现以下错误：

```
main.obj : error LNK2005: _sayHello already defined in sayHello.obj  
/* main.c  */
#include "sayHello.c"

int main()
{
    return 0;
}  
/* sayHello.c */

#include <stdio.h>

void sayHello()
{
    printf("Hello World");
} 
```

我不知道这个错误可能意味着什么。是时候询问更高级的 C 编码器了。:)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-04T14:13:38.080

> 我想在另一个中包含一个 .c 文件。

不，你没有。你真的，真的没有。不要在这条路上采取*任何步骤；*它只会以痛苦和苦难告终。即使对于像您的示例这样的琐碎程序，这也是不好的做法，对于任何真正复杂的程序来说更是如此。一个文件中的微不足道的单行更改将需要您重建该文件以及包含它的任何内容，这是浪费时间。您失去了控制对数据和功能的访问的能力；*包含的 .c 文件中的所有内容*对包含文件都是可见的，甚至是声明的函数和文件范围变量`static`。如果您最终包含一个 .c 文件，该文件包含另一个 .c 文件，该文件包含另一个 .c 文件*und so weiter*，您可能会以编译器无法处理的翻译单元结束。

单独的编译和链接是一件明确的好事。您应该在 .c 文件中包含的唯一文件是描述*接口*（类型定义、函数原型声明、宏定义、外部声明）的头文件，而不是实现。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-04T11:37:02.890

它可以工作，但是您需要小心构建程序的方式。此外，正如人们在评论中指出的那样，这通常被认为是一个坏主意。这是出乎意料的，它会产生这样的问题。好处很少，尤其是对于看起来微不足道的程序。您可能应该完全重新考虑这种方法。

在做了这样的事情之后，你应该只 compile `main.c`，而不是试图将它与`sayHello.c`你似乎正在做的 compile 的结果联系起来。

您可能需要告诉 Visual Studio[从 build 中排除后一个文件](https://stackoverflow.com/questions/219381/how-to-exclude-files-from-visual-studio-compile)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-06-03T14:45:12.880

是的，任何“.c”文件都可以包含在另一个程序中。作为一个包含“.h”文件的程序，如“stdio.h”。之后我们可以调用那些写入这个外部文件的函数。

测试.c::

```
#include<stdio.h>
#include<conio.h>
void xprint()
{
    printf("Hello World!");
} 
```

主.c::

```
#include "test.c"
void main()
{
   xprint();
   getch();
} 
```

输出:: 你好世界！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T11:39:29.357

这是一个链接器错误。将所有 .c 文件编译为 .obj 文件（由编译器完成）后，链接器将它们“合并”在一起以生成 dll/exe。链接器发现两个对象声明了相同的函数（这显然是不允许的）。在这种情况下，您可能希望链接器只处理 main.obj 而不是 sayhello.obj（因为它的代码已经包含在 main.obj 中）。

这是因为在 main.obj 中，由于包含，您还将拥有 sayHello() 函数！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T13:06:10.237

**说你好.h**

```
#include <stdio.h>
void sayHello(void); 
```

**主程序**

```
#include "sayHello.h"

int main()
{
    sayHello();
    return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T11:36:49.740

你可能定义了两次这个函数

```
void sayHello()
{
printf("Hello World");
} 
```

一个在您当前的文件中，一个在 sayhello.c 中

您必须删除一个定义。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-01T03:05:02.620

问题似乎是`sayHello.c`被编译成一个名为 的目标文件`sayHello.obj`，并且`main.c`（还包括来自 的所有源文本`sayHello.c`）被编译成`main.obj`，因此这两个`.obj`文件都`static`从`sayHello.c`.

然后所有的目标文件应该被“链接”在一起以产生最终的可执行程序文件，但是当任何外部符号出现不止一次时，链接就会中断。

如果您发现自己处于这种情况，您需要停止链接`sayHello.obj`到`main.obj`（然后您可能根本不想自己编译`sayHello.c`成它自己的目标文件）。

如果您手动控制构建的每个步骤（就像您在使用编译器的 CLI 时可能那样），这通常只是从链接器或编译器的调用中排除该目标文件的问题。

由于您使用的是 Visual Studio，它可能会为您做出一堆假设，例如“每个 .c 文件都应该编译成自己的目标文件，并且所有这些目标文件都应该链接在一起”，您必须找到一种方法规避或禁用此假设`sayHello.c`。

一种简单且有点惯用的解决方案可能是将重命名`sayHello.c`为`sayHello.c.inc`.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-05-07T05:41:07.043

```
//THIS IS THE MAIN FILE//
#include "test.c"
int main()
{
    multi(10);
}

//THIS IS THE TEST FILE//
#include<stdio.h>
void multi(int a)
{
    printf("%d",a*2);
} 
```

**注意事项：**

1.  在这里你需要运行包含“main()”函数的程序。
2.  您可以避免主函数中的“stdio.h”头文件。因为，您包含的文件已经包含“stdio.h”头文件。
3.  您必须从“主”文件中调用该函数。
4.  包含文件应该是“file_name.c”而不是“file_name.h”。因为通常我们对头文件使用 .h 扩展名。由于我们包含另一个程序文件而不是头文件，因此我们必须使用 .c。否则它会给你致命错误并且编译被终止。

# php - 使用 ajax 发送特殊字符并将它们正确接收到 php

> ID：10448060
> 
> 赞同：0
> 
> 时间：2012-05-04T11:35:43.230
> 
> 标签：php, javascript, ajax, character

我有一个 javascript 函数，它获取一些参数数据并尝试将它们保存在 postgreSQL 数据库中。这是javascript ajax函数

```
function insertCalendarEvents(calendar_group, event_name, event_datestart, event_datestop, event_timestart, event_timestop, event_info, onfinish) {
    var request;
    if(window.XMLHttpRequest)
        request = new XMLHttpRequest();
    else
        request = new ActiveXObject("Microsoft.XMLHTTP");

    request.onreadystatechange = function() {
        if (request.readyState == 4 && request.status == 200) {alert(request.responseText);
            if(request.responseText.substr(0, 6) == "error ")
                alert(errorName[request.responseText.substr(6)]);
            else {
                var event_id = 7;
                onfinish(event_id);
            }
        }
    }

    var params = "action=insertCalendarEvents&calendar_group=" + calendar_group + "&event_name=" + encodeURIComponent(event_name) + "&event_datestart=" + event_datestart + "&event_datestop=" + event_datestop + "&event_timestart=" + event_timestart + "&event_timestop=" + event_timestop + "&event_info=" + event_info;
    request.open("GET", "php/calendar.php?" + params, true);
    request.setRequestHeader("If-Modified-Since", "Sat, 1 Jan 2000 00:00:00 GMT");
    request.setRequestHeader("Content-type", "application/x-www-form-urlencoded; charset=UTF-8");
    request.send();
} 
```

这是php函数：

```
if($action == "insertCalendarEvents") {
$calendar_group = $_GET["calendar_group"];
    $event_name = "'" . htmlspecialchars(urldecode($_GET["event_name"])) . "'";
    $event_datestart = "'" . $_GET["event_datestart"] . "'";
    $event_datestop = "'" . $_GET["event_datestop"] . "'";
    $event_timestart = $_GET["event_timestart"] != "" ? "'" . $_GET["event_timestart"] . "'" : "null";
    $event_timestop = $_GET["event_timestop"] != "" ? "'" . $_GET["event_timestop"] . "'" : "null";
    $event_info = "'" . $_GET["event_info"] . "'";
    echo $event_name;

    require_once("connect.php");
$query = "INSERT INTO calendar_events (calendar_group, event_name, event_datestart, event_datestop, event_timestart, event_timestop, event_info) VALUES (" . $calendar_group . ", " . $event_name . ", " . $event_datestart . ", " . $event_datestop . ", " . $event_timestart . ", " . $event_timestop . ", " . $event_info . ")";
$result = pg_query($connect, $query);
if(!$result)
    die("error 1"); // query error

    $query = "SELECT currval('events_event_id_seq')";
    $result = pg_query($connect, $query);
    if(!$result)
    die("error 1"); // query error

    $row = pg_fetch_row($result);
    echo $row[0];
} 
```

问题是当我尝试添加特殊字符（现在我仅在 event_name 参数上测试）时，例如 + 或换行符等，它不起作用，在 + 上它用空格替换它，换行符不做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:43:29.387

Encode Data Before You send to server

I also had problem like you have now but this function i implemented solved my problem

```
 function encode(val){
        var eVal;
        if(!encodeURIComponent){
            eVal=escape(val);
            eVal=eVal.replace(/@/g,"%40");
            eVal=eVal.replace(/\//g,"%2F");
            eVal=eVal.replace(/\+/g,"%2B");
            eVal=eVal.replace(/'/g,"%60");
            eVal=eVal.replace(/"/g,"%22");
            eVal=eVal.replace(/`/g,"%27");
            eVal=eVal.replace(/&/g,"%26");
        }else{
            eVal=encodeURIComponent(val);
            eVal=eVal.replace(/~/g,"%7E");
            eVal=eVal.replace(/!/g,"%21");
            eVal=eVal.replace(/\(/g,"%28");
            eVal=eVal.replace(/\)/g,"%29");
            eVal=eVal.replace(/'/g,"%27");
            eVal=eVal.replace(/"/g,"%22");
            eVal=eVal.replace(/`/g,"%27");
            eVal=eVal.replace(/&/g,"%26");
        }
        return eVal.replace(/\%20/g,"+");
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:38:15.710

[`encodeURIComponent`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURIComponent)在将数据添加到查询字符串之前，您需要传递数据。

* * *

还要摆脱这些行：

```
request.setRequestHeader("If-Modified-Since", "Sat, 1 Jan 2000 00:00:00 GMT"); 
```

如果这并非总是如此，我会感到惊讶。

```
request.setRequestHeader("Content-type", "application/x-www-form-urlencoded; charset=UTF-8"); 
```

您没有发出 POST 请求。没有消息体来描述其内容类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:08:01.557

使用 POST 它应该安全地传递您的数据，而且更合乎逻辑地用于从客户端更新内容

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T11:36:36.820

[`encodeURI()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/encodeURI)在通过 Ajax 发送参数之前，您应该使用参数

# c# - 服务器上的 AsyncFileUpload 真的很慢

> ID：10448063
> 
> 赞同：0
> 
> 时间：2012-05-04T11:35:45.343
> 
> 标签：c#, asp.net, file-upload, upload

我想知道当我从浏览按钮中选择一个文件时，在我点击上传按钮之前它非常慢。

我的意思是我点击浏览，选择一个文件，在它最终检查是否有我可以上传的文件之前，我可以等待大约 2 分钟才能上传文件。

这在本地运行良好，但在我的服务器上真的很慢。

我正在使用 IIS，所以也许我必须添加一些设置？

这些是我正在使用的代码：

```
 <asp:Panel ID="PanelAddFiles" runat="server">
        <div class="PanelAddFiles">
            <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="Server" />
            <asp:UpdatePanel ID="UpdatePanelAddFiles" runat="server" ChildrenAsTriggers="true">
                <Triggers>
                    <asp:PostBackTrigger ControlID="LkUpload" />
                </Triggers>
                <ContentTemplate>
                    <asp:AsyncFileUpload runat="server" ID="FileUploadAsync" CssClass="FileUploadAsync"
                        Visible="false" />
                    <asp:LinkButton ID="LkUpload" runat="server" OnClick="LkUpload_Click" Visible="false">Upload</asp:LinkButton>
                </ContentTemplate>
            </asp:UpdatePanel>

        </div>
    </asp:Panel> 
```

这是背后的代码：

```
protected void LkUpload_Click(object sender, EventArgs e)
    {
        try
        {

            if (FileUploadAsync.FileName != string.Empty)
            // Call a helper method routine to save the file.
            {
                SaveFile(FileUploadAsync.PostedFile);
                GenerateFilesInDateOrder(DirectoryPath);
            }

        }
        catch { }
    }

    void SaveFile(HttpPostedFile file)
    {
        string savePath = "C:\\inetpub\\wwwroot\\Files" + DirectoryPath;
        string fileName = FileUploadAsync.FileName;
        string pathToCheck = savePath + fileName;
        string tempfileName = "";

        if (System.IO.File.Exists(pathToCheck))
        {
            int counter = 2;
            while (System.IO.File.Exists(pathToCheck))
            {

                tempfileName = counter.ToString() + fileName;
                pathToCheck = savePath + tempfileName;
                counter++;
            }

            fileName = tempfileName;

        }
        else
        {
        }

        savePath += fileName;

        FileUploadAsync.SaveAs(savePath);

        //Redirect to the same page after upload a file
        string param = Request.UrlReferrer.Query;
        Response.Redirect("Files.aspx" + param);
    } 
```

# python - 编写 python 库：结构、命名和导入最佳实践

> ID：10448065
> 
> 赞同：5
> 
> 时间：2012-05-04T11:36:00.053
> 
> 标签：python, naming-conventions

假设我必须为我的公司编写几个中小型库。

以pythonic的方式，使用Java方法并在所有这些方法前面加上一个通用的高级包（ahem，module）是否有意义，例如实现以下结构：

```
mycompany.mylibrary1.moduleA
mycompany.mylibrary1.moduleB.moduleD
mycompany.mylibrary2.moduleC 
```

还是简单地选择更好：

```
mylibrary1.moduleA
mylibrary1.moduleB.moduleD
mylibrary2.moduleC 
```

我看到大多数时候都使用第二种方法，但我一直在寻找确认（或不确认）这是要走的路。

[除了](http://www.python.org/dev/peps/pep-0008/#naming-conventions)：_

> Python 库的命名约定有点混乱，所以我们永远不会得到完全一致的 [...]

然后我们只得到模块和类命名指示，以及**不鼓励*****相对导入***的事实。

*绝对*导入是要走的路这一事实使决定如何组织库非常重要（我不是在这里讨论避免相对导入是好还是坏）。

我确实喜欢命名所有库的 Java 方法，但我的印象是它不是 pythonic ......建议的方法是什么？

PS。虽然通常“最佳实践”问题在 SO 上被认为是主观的，但在 Python 中，PEP 的存在使我认为它们非常客观！虽然答案可能是......组织你的图书馆没有最佳实践......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T11:48:31.850

python 导入和名称存在认知问题。由于有许多不同种类的一阶对象（原语、模块、类、函数、伪装成模块的类、伪装成对象的模块等等），人们倾向于使用点符号来表示一个实体具有“从外部来源到达”。因此

```
import foo.bar
e = foo.bar.make_entity() 
```

感觉比

```
from foo.bar import make_entity
e = make_entity() 
```

但是，这意味着您将经常需要输入您需要访问的任何内容的完整路径。“com.example.some.lib.module.frobncate() 很快就会让人厌烦。因此，礼貌的库为其访问提供了一个合理的短名称。

# scons - 如何使生成的文件依赖于 Scons 中的 java 类

> ID：10448067
> 
> 赞同：2
> 
> 时间：2012-05-04T11:36:05.230
> 
> 标签：scons

我的构建中有一段源代码是通过运行 java 类生成的。

我一生都无法弄清楚如何在依赖项上指示 scons，并且它一直尝试在构建 .class 文件之前构建源代码。

当我执行 o = env.Java(target = 'target_dir', source = Dir('source_dir')) 时，o 被设置为一个空列表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:22:58.407

您可以为此使用 Depends() 函数，如下所示：

```
o = env.Java(target = 'target_dir', source = Dir('source_dir'))
env.Depends(o, 'the_generated_file_and_path') 
```

这是一个更好的选择（因为在调用 Depends() 时您不必担心生成的文件路径），假设您正在使用 SCons Command() 函数执行所述 java 类：

```
# $SOURCE and $TARGET will be filled in by SCons Command, $SOURCE is optional
cmdLine = 'theCommand $SOURCE $TARGET'

genTarget = env.Command(target = [list output files here],
                        source = 'java_class_executed',
                        action = cmdLine)
...
o = env.Java(...)
env.Depends(o, genTarget) 
```

关于`o`成为一个空列表，它总是一个空列表吗？如果是这样，请注意如何指定源，它应该是包目录结构的根。例如，如果您的目录树是这样的：

```
.
|-- SConstruct
`-- src
   `-- com
       `-- tanner
           `-- application
               `-- main.java 
```

您应该按如下方式指定源目录：`'#/src/com'`

# regex - 正则表达式接受 00100 到 99999 长度为 5 个字符

> ID：10448072
> 
> 赞同：2
> 
> 时间：2012-05-04T11:36:14.080
> 
> 标签：regex, string

正如问题中提到的，我如何编写一个正则表达式来接受 from `00100`to `99999`。

我已经写了

```
\d{5} 
```

但它也会接受全零。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:46:22.537

或者，您可以使用否定的前瞻性断言来禁止您不想包含的数字：

```
^(?!000)\d{5}$ 
```

哪个不匹配任何开头有三个零的五位数字，这也是您想要的。

[**看见**](http://www.rubular.com/r/2cRLhdGwGa)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:38:19.923

试试这个：

```
^00[1-9][0-9]{2}$|^0[1-9][0-9]{3}$|^[1-9][0-9]{4}$ 
```

在线查看它：[rubular](http://rubular.com/r/2HC0fJt8lv)

请注意，正则表达式不是接受任意整数范围的好工具。如果将字符串转换为整数并使用普通代码测试整数是否在范围内，可能会更容易阅读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:41:29.507

[0-9]{2}[1-9]{1}[0-9]{2}

内容如下：

[0-9]{2} 我想要 2 位数字....你可以在这里使用 \d{2} 。

[1-9]{1} 我想要 1-9 范围内的 1 个数字。{1} 是不需要的，但我认为有助于清晰。

[0-9]{2} 我又想要 2 位数字。

应该给你你想要的。

# android - 小部件中的 ClassCastException

> ID：10448073
> 
> 赞同：-1
> 
> 时间：2012-05-04T11:36:15.223
> 
> 标签：android

我从 android 世界的小部件开始。我有这个布局，名为“widget.xml”：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="5dip" >

<ImageButton
    android:id="@+id/icono"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" /> 
```

如您所见，它只是一个按钮。这是小部件的配置 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android" 
android:initialLayout="@layout/widget"
android:minWidth="72dip"
android:minHeight="72dip"
android:updatePeriodMillis="7000"
android:label="Widget_azafata"
/> 
```

这是扩展 AppWidgetProvider 的类，它没有被改动：

```
public class WidgetAppProvider extends AppWidgetProvider{

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds) {

    super.onUpdate(context, appWidgetManager, appWidgetIds);
}

   } 
```

这是配置活动：

```
public class WidgetConfig extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    setContentView(R.layout.main);
    super.onCreate(savedInstanceState);
    ImageButton boton=(ImageButton) findViewById(R.id.icono);
            //stuff here
      } 
```

清单中的行：

```
<receiver 

        android:name=".WidgetAppProvider"
        android:label="Widget_azafata">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
        </intent-filter>
        <meta-data 

            android:name="android.appwidget.provider"
            android:resource="@xml/widget_azafata_xml"   />

    </receiver> 
```

好吧，我启动小部件并显示此异常：

```
05-04 10:21:14.144: E/AndroidRuntime(320): FATAL EXCEPTION: main
05-04 10:21:14.144: E/AndroidRuntime(320): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.publidirecta.Azafata/com.publidirecta.Azafata.WidgetAppProvider}: java.lang.ClassCastException: com.publidirecta.Azafata.WidgetAppProvider
05-04 10:21:14.144: E/AndroidRuntime(320):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
05-04 10:21:14.144: E/AndroidRuntime(320):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-04 10:21:14.144: E/AndroidRuntime(320):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-04 10:21:14.144: E/AndroidRuntime(320):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-04 10:21:14.144: E/AndroidRuntime(320):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-04 10:21:14.144: E/AndroidRuntime(320):  at android.os.Looper.loop(Looper.java:123)
05-04 10:21:14.144: E/AndroidRuntime(320):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-04 10:21:14.144: E/AndroidRuntime(320):  at java.lang.reflect.Method.invokeNative(Native Method)
05-04 10:21:14.144: E/AndroidRuntime(320):  at java.lang.reflect.Method.invoke(Method.java:521)
05-04 10:21:14.144: E/AndroidRuntime(320):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-04 10:21:14.144: E/AndroidRuntime(320):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-04 10:21:14.144: E/AndroidRuntime(320):  at dalvik.system.NativeStart.main(Native Method)
05-04 10:21:14.144: E/AndroidRuntime(320): Caused by: java.lang.ClassCastException: com.publidirecta.Azafata.WidgetAppProvider
05-04 10:21:14.144: E/AndroidRuntime(320):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-04 10:21:14.144: E/AndroidRuntime(320):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577) 
```

它没有显示任何错误行，只是启动异常的类。而且我不知道为什么会启动此异常。任何帮助将不胜感激。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:44:01.123

你`Activity`在清单中声明你的吗？

你应该像这样切换行的顺序`onCreate()`：

```
super.onCreate(savedInstanceState);  // this should be first call
setContentView(R.layout.main);    
ImageButton boton=(ImageButton) findViewById(R.id.icono); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:44:19.033

我认为您的 XML 名称是“widget.xml”，但您在活动中调用 main.xml。您必须更改 SetContentView(R.layout.widget);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:42:00.757

在某个地方，您正在调用`startActivity()`start `WidgetAppProvider`。`WidgetAppProvider`是一个`BroadcastReceiver`，不是一个`Activity`。

# c# - 视觉工作室模板系统

> ID：10448076
> 
> 赞同：-2
> 
> 时间：2012-05-04T11:36:24.613
> 
> 标签：c#, asp.net, css, visual-studio, theming

我在 ASP.NET 中进行 Web 开发。

是否有某种方法可以根据谁登陆您的页面来加载不同的页面设计。

所以我想创建一种模板系统，在其中我为页面提供一系列模板，用户选择他们想要的模板。

是否有一些内置功能或者我可以使用任何插件？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:46:05.763

有称为“主题”的内置 ASP.NET 功能

这是 MSDN 上的教程：

[http://msdn.microsoft.com/en-us/library/zcsbskx7.aspx](http://msdn.microsoft.com/en-us/library/zcsbskx7.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:46:46.480

是否要更改 ASP.NET 站点模板或样式表？如果是后者，假设您的主样式表是这样嵌入的：

```
 <link rel="stylesheet" type="text/css" href="Styles/Site.css" /> 
```

为标签添加一个 ID，例如 id="style"。然后在代码隐藏中，您可以执行以下操作（我在此示例中使用了一个按钮，但 DropDownList 控件可能是最好的，您可以使用在某个目录中找到的样式表填充它）：

```
 protected void BtnStyle_Click(object sender, EventArgs e)
 {
    HtmlLink Link = FindControl("style") as HtmlLink;

    if (Link.Href.Equals("Styles/Site.css"))
        Link.Href = "Styles/Site2.css";
    else
        Link.Href = "Styles/Site.css";
  } 
```

至于以编程方式更改站点模板，我没有经验，但我想这是可能的。

# iphone - 带有“循环”滚动的 UIScrollView

> ID：10448081
> 
> 赞同：15
> 
> 时间：2012-05-04T11:36:36.347
> 
> 标签：iphone, ios, cocoa-touch, uiscrollview, uikit

我试图在我的 UIScrollView 中进行“循环”滚动，但没有成功。

我想要做什么：如果 uiscrollview 到达结束，它应该移动开始如果 uiscrollview 在开始和移动回来，它应该移动到结束

在我的情况下附加滚动视图不是好方法（其他方法应该得到“页面ID”）

你有什么想法吗？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-04T11:45:27.807

我已经实现了这个方法，但是它**需要启用分页**。让我们假设您有五个元素`A,B,C,D and E`。设置视图时，将最后一个元素添加到开头，将第一个元素添加到末尾，并调整内容偏移量以查看第一个元素，如下所示`E,[A],B,C,D,E,A`。在 UIScrollViewDelegate 中，检查用户是否到达任何一端，并将**没有**动画的偏移量移动到另一端。

想象一下 [ ] 表示正在显示的视图：

```
E,A,B,C,[D],E,A 
```

用户向右滑动

```
E,A,B,C,D,[E],A 
```

用户向右滑动

```
E,A,B,C,D,E,[A] 
```

然后，自动将内容偏移量设置为第二个元素

```
E,[A],B,C,D,E,A 
```

这样，用户可以双向滑动创建无限滚动的错觉。

```
E,A,[B],C,D,E,A 
```

## 更新

我已经上传了这个算法的**完整实现**。这是一个非常复杂的类，因为它还具有点击选择、无限循环滚动和单元格重用。您可以按原样使用代码，修改它或提取您需要的代码。最有趣的代码在类中`TCHorizontalSelectorView`。

[**链接到文件**](https://gist.github.com/redent/6461423)

好好享受！

* * *

## 更新 2

`UICollectionView`现在是实现此目的的推荐方法，它可用于获得完全相同的行为。[本教程](https://adoptioncurve.net/2013/07/02/building-a-circular-gallery-with-a-uicollectionview/)详细描述了如何实现它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T11:57:04.437

Apple 有一个[Street Scroller](http://developer.apple.com/library/ios/samplecode/StreetScroller/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011102)演示，看起来正是你想要的。

还有一个来自 WWDC 2011 的[视频](https://developer.apple.com/videos/wwdc/2011/includes/advanced-scrollview-techniques.html#advanced-scrollview-techniques)演示了他们的演示。;) 他们首先在视频中介绍了无限滚动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:39:56.080

尝试使用以下代码..

**示例代码..**

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)sender 
    {

        if (scrollView.contentOffset.x == 0) {
            // user is scrolling to the left from image 1 to image n(last image).
            // reposition offset to show image 10 that is on the right in the scroll view
            [scrollView scrollRectToVisible:CGRectMake(4000,0,320,480) animated:NO];// you can define your `contensize` for scrollview
        }
        else if (scrollView.contentOffset.x == 4320) {
            // user is scrolling to the right from image n(last image) to image 1.
            // reposition offset to show image 1 that is on the left in the scroll view
            [scrollView scrollRectToVisible:CGRectMake(320,0,320,480) animated:NO];
        }
    } 
```

希望对你有帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-29T09:47:25.667

参考@redent84，找到代码逻辑。

覆盖 func viewWillAppear(_ animated: Bool)

```
{
    super.viewWillAppear(animated)

    scrollView.contentSize = CGSize(width: scrollView.frame.width * CGFloat(imagesArray.count), height: scrollView.frame.height)

    scrollView.isPagingEnabled = true

    //        imagesArray.insert(imagesArray.last as? UIImage, at: 0)
    //        imagesArray.insert(imagesArray.first as? UIImage, at: imagesArray.count - 1)

    var testArr = ["A", "B", "C", "D"]

    let firstItem = testArr.first
    let lastItem = testArr.last

    testArr.insert(lastItem as! String, at: 0)
    testArr.append(firstItem as! String)
    print(testArr)

    for i in 0..<imagesArray.count{
        let imageview = UIImageView()
        imageview.image = imagesArray[i]
        imageview.contentMode = .scaleAspectFit
        imageview.clipsToBounds = true
        let xPosition = self.scrollView.frame.width * CGFloat(i)
        imageview.frame = CGRect(x: xPosition, y: 0, width: self.scrollView.frame.width, height: self.scrollView.frame.height)
        print(imageview)
        scrollView.addSubview(imageview)

        print("Imageview frames of i \(i) is \(imageview.frame)")
    }

    newStartScrolling()
}

func newStartScrolling()
{
    ViewController.i += 1

    let x = CGFloat(ViewController.i) * scrollView.frame.size.width
    scrollView.setContentOffset(CGPoint(x: x, y: 0), animated: true)

    print("X is \(x) and i is \(ViewController.i)")

    if ViewController.i == imagesArray.count - 1 {
        ViewController.i = 0
        let x = CGFloat(ViewController.i) * scrollView.frame.size.width
        //scrollView.setContentOffset(CGPoint(x: x, y: 0), animated: false)
        print("X (rotate) is \(x) and i is \(ViewController.i)")
        scrollView.contentOffset.x = x
        self.newStartScrolling()

    }

}

func backScrolling()  {
    ViewController.i -= 1

    let x = CGFloat(ViewController.i) * scrollView.frame.size.width
    scrollView.setContentOffset(CGPoint(x: x, y: 0), animated: true)
    print("X is \(x) and i is \(ViewController.i)")
    if ViewController.i <= 0 {
        ViewController.i = imagesArray.count - 1
        let x = CGFloat(ViewController.i) * scrollView.frame.size.width
         scrollView.setContentOffset(CGPoint(x: x, y: 0), animated: false)
        print("X (rotate) is \(x) and i is \(ViewController.i)")

        self.backScrolling()
        //scrollView.contentOffset.x = x
        return
    }

} 
```

# node.js - node.js ubuntu 本机包安装上的 linux-tick-processor 在哪里？

> ID：10448099
> 
> 赞同：4
> 
> 时间：2012-05-04T11:37:32.493
> 
> 标签：node.js

我已经使用标准 apt-get 在 Ubuntu 64 位服务器上安装了 Node.js，并希望通过“--prof”标志来分析脚本。网络搜索显示应该有一个工具来处理位于“deps/v8/tools/linux-tick-processor”中的 v8.log 输出，但我似乎没有任何这些目录。它们是否带有本机安装？它们应该单独安装吗？如果是这样怎么办？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T14:08:39.390

你需要下载源包`sudo apt-get source nodejs`。你提到的路径在那里。

您需要先`scons prof=on d8`在 deps/v8 中构建调试器，这在 64 位机器上可能会遇到一些问题（v8 仅限 32 位），请参阅[此处](https://askubuntu.com/questions/85978/building-a-32-bit-app-in-64-bit-ubuntu)了解更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-25T00:20:42.283

下面是我为 Node.js 0.10.25 和 0.10.26 做的事情：

1.  我下载了与我正在使用的二进制文件相对应的 Node.js 源代码。（我正在进行 Debian 测试，这比 Node.js 网站上的版本有点落后。）

2.  我检查了节点源中捆绑的 v8 版本。（看`deps/v8/ChangeLog`。Node.js 0.10.25 和 0.10.26 是 3.14.5。）

3.  我从[v8 站点](http://code.google.com/p/v8/wiki/Source?tm=4)下载了这个版本的**v8**。

    为什么？我尝试`make native`在 Node.js`deps/v8`目录中运行，但`Makefile`抱怨缺少测试目录。由此我们可以推断出 Node 开发人员并未包括整个 v8 发行版。曾几何时，我使用 Node 的早期版本（0.8.something）构建了 v8，`deps/v8`但这次我决定使用不同的方法。

4.  正如 v8's中所解释的`build/README.txt`，在 v8 的源代码树的顶层，我做了：

    ```
    $ svn co http://gyp.googlecode.com/svn/trunk build/gyp 
    ```

    `gyp`（按照 OrangeDog 的回答中的建议将我安装的链接`build/gyp`不起作用。这就是我执行上述操作的原因。）

5.  我跑了：

    ```
    $ CXX=g++-4.7 make native 
    ```

    为什么`CXX`设置？当我尝试使用默认的 gcc 时，我立即遇到了编译问题。我检查了版本。那是 4.8，我记得 Slashdot 上的一个故事，关于 4.8 如何给人们带来麻烦。所以我安装了4.7。工作得很好。

6.  我链接`out/native/d8`到我的`PATH`. 这是因为`linux-tick-processor`脚本在查找`d8`. 最简单的解决方案是让它在我的`PATH`. 你的旅费可能会改变。

毕竟，`linux-tick-processor`可以与`v8.log`Node 生成的文件一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-15T14:13:56.000

要么安装源包 - `sudo apt-get source nodejs`，要么切换到[官方源](http://nodejs.org/download/)，因为 ubuntu 包已经过时了。

要构建 d8，请转到`deps/v8`目录。

1.  在可以找到`build/gyp`的目录处创建符号链接（例如）。`gyp``/usr/bin`
2.  运行`make native`。
3.  复制/符号链接`out/native/d8`到 PATH 上的某个位置。

# c# - 创建队列期间发生 MSMQ 异常

> ID：10448102
> 
> 赞同：0
> 
> 时间：2012-05-04T11:37:40.440
> 
> 标签：c#, msmq

我正在尝试创建消息队列：

```
MessageQueue.Create(path, true); 
```

我得到以下异常：

> 队列不存在或您没有足够的权限来执行该操作。

但是尽管有异常，还是创建了队列。我试了几次：

1.  移除队列
2.  调用创建方法
3.  发生异常
4.  队列已创建。

有人可以告诉我异常的原因吗？我怎样才能避免它？

**编辑**：

我在不同的机器上试过。同样的行为。

操作系统：Windows 7。控制台应用程序。由具有管理员权限的用户运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:58:03.970

我发现它是如何避免的。

路径等于`@"**localhost**\Private$\Queue"`。

我将其更改为`@"**.**\Private$\Queue"`，异常消失了。

但原因仍不清楚。

# android - 如何在 onGesturePerformed 方法中获取列表项的位置？

> ID：10448106
> 
> 赞同：4
> 
> 时间：2012-05-04T11:37:54.557
> 
> 标签：android, android-listview, android-gesture

[这](http://developer.android.com/resources/articles/gestures.html)是 Android 文档中的一个很好的教程，其中包含解释 GestureListview 的源代码。但是我找不到如何在 onGesturePerformed(GestureOverlayView overlay, Gesture gesture) 方法中获取列表项位置？

请查看代码中带有 ? 的注释 标记以了解我的查询。谢谢你。

```
public class GesturesListActivity extends ListActivity implements OnGesturePerformedListener {
private GestureLibrary mLibrary;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    // Populate the activity with the names of our contacts
    Cursor query = managedQuery(Contacts.People.CONTENT_URI,
            new String[] { Contacts.People._ID, Contacts.People.DISPLAY_NAME },
            null, null, Contacts.People.DEFAULT_SORT_ORDER);

    ListAdapter adapter = new SimpleCursorAdapter(this,
            android.R.layout.simple_list_item_1, query,
            new String[] { Contacts.People.DISPLAY_NAME },
            new int[] { android.R.id.text1 });

    setListAdapter(adapter);

    mLibrary = GestureLibraries.fromRawResource(this, R.raw.actions);
    if (!mLibrary.load()) {
        finish();
    }

    GestureOverlayView gestures = (GestureOverlayView) findViewById(R.id.gestures);
    gestures.addOnGesturePerformedListener(this);
}

public void onGesturePerformed(GestureOverlayView overlay, Gesture gesture) {
    ArrayList<Prediction> predictions = mLibrary.recognize(gesture);
    if (predictions.size() > 0) {
        if (predictions.get(0).score > 1.0) {
            String action = predictions.get(0).name;
            if ("action_add".equals(action)) {
                Toast.makeText(this, "Adding a contact", Toast.LENGTH_SHORT).show();                
            } else if ("action_delete".equals(action)) {
                Toast.makeText(this, "Removing a contact", Toast.LENGTH_SHORT).show();

                //How to get the specific position in the list to remove the contact on which the gesture event took place?

            } else if ("action_refresh".equals(action)) {
                Toast.makeText(this, "Reloading contacts", Toast.LENGTH_SHORT).show();
            }
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:45:52.710

我们可以覆盖受保护的 void onListItemClick(ListView l, View v, int position, long id)

这样这将获得您单击的列表项的视图

# installation - 更改 NSIS 中的默认安装文件夹

> ID：10448116
> 
> 赞同：4
> 
> 时间：2012-05-04T11:38:28.253
> 
> 标签：installation, nsis, windows-7-x64

我正在使用 nsis 为 Windows 编写安装程序。此安装程序包含一个在 xampp 之上运行的 Web 应用程序，因此 xampp 也作为该应用程序的服务安装。但是 xamp 在 Windows 7 的 64 位机器上安装时会出现问题。这是由于此处提到的 C:\Program Files (x86) 中的目录路径问题。

[XAMPP错误解决方案？我在我的 Windows XP 双启动机器上安装了它](https://stackoverflow.com/questions/9771928/xampp-error-solution-i-have-that-installed-on-my-windows-xp-dual-boot-machine)

但目前在安装程序中自动安装路径设置如下。

```
C:\Program Files (x86)\myapplication 
```

安装程序脚本只有以下宏来添加目录选择器页面。

```
!insertmacro MUI_PAGE_DIRECTORY 
```

作为一个解决方案，我要做的是采取以下行动。

1.  将默认目录更改为 c:\Program Files
2.  如果用户选择 x86 文件夹，则会给出错误消息以选择另一个目录。

为此，我需要通过

```
$INSTDIR 
```

和

1.  检查该路径是否存在 x86 的子字符串
2.  如果是这样，请给出错误消息。
3.  将默认路径更改为 c:\Program Files

由于我对 nsis 不太熟悉，因此无法编写此程序。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T15:57:20.623

NSIS 提供 $PROGRAMFILES32 和 $PROGRAMFILES64：

```
InstallDir "$PROGRAMFILES64\myapp" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T12:32:41.547

在 win7/64 上，可以通过`%ProgramW6432%`环境变量从 32 位应用程序中获取 64 位程序文件。

您可以尝试通过以下方式获得它`ReadEnvStr`：

*   在 32 位系统上，它将返回一个空字符串
*   在 64 位系统上，它将返回`c:\program files`（如果未在其他地方配置）

这是一个测试它的片段：

```
ReadEnvStr $0 ProgramW6432
StrCmp $0 "" 0 +3
MessageBox MB_OK "it is a 32b system"
goto +2
MessageBox MB_OK "it is a 64b system" 
```

在你的情况下，它可以做：

```
ReadEnvStr $0 ProgramW6432
StrCmp $0 "" +2 0
StrCpy $INSTDIR $0 
```

**编辑**：为了拒绝`Program Files (x86)`您可以使用`.onVerifyInstDir`Anders 为[另一个问题](https://stackoverflow.com/a/9955529/317266)提供的回调方法，它将检查用户选择的所选目录，然后再更改页面：

```
Function .onVerifyInstDir
  ReadEnvStr $0 "ProgramFiles(x86)"
  StrCmp $0 $INSTDIR 0 PathGood
  MessageBox MB_OK "directory not valid for installation"
  Abort
PathGood:
FunctionEnd 
```

在这里，我使用另一个环境变量来获取程序文件的 (x86) 变体。

# php - 如何在 PHP 中计算日期时间字段和现在的差异？

> ID：10448119
> 
> 赞同：10
> 
> 时间：2012-05-04T11:38:44.507
> 
> 标签：php, datetime

我的数据库中有一个日期时间字段，其中包含以下信息：

```
2012-05-03 17:34:01 
```

我想检查日期时间字段和现在之间的区别：

```
$now = date("Y-m-d H:i:s"); 
```

我正在尝试计算从现在到写入数据库字段的时间已经过去了多少天。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-04T11:57:21.473

这是答案:)

```
$now = new DateTime();
$date = new DateTime("2012-05-03 17:34:01");

echo $date->diff($now)->format("%d days, %h hours and %i minutes"); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T11:41:02.103

```
$diff = abs(strtotime($date2) - strtotime($date1)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T11:40:58.730

[**日期差异**](http://php.net/manual/en/function.date-diff.php)：

```
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime("now");
$interval = $datetime1->diff($datetime2);
echo $interval->format('%R%a days'); 
```

# c - _beginthread 和 WaitForSingleObject

> ID：10448121
> 
> 赞同：3
> 
> 时间：2012-05-04T11:38:50.010
> 
> 标签：c, windows

我正在实现一个启动 4 个线程的程序。

功能是：

```
void* SOURCE_in(struct SOURCE_1*);
void* SOURCE_out(struct SOURCE*);
void* SINK_out(struct SINK_1*);
void* SINK_in(struct SINK*); 
```

这些功能允许在 4 个块之间进行通信。块 1 与块 2 通信。块 2 与第三块共享信息。块 3 与块 4 通信信息。

我的问题在 main.c

```
int main(int argc, char** argv){

    extern int p, e_source, e_sink_1, l_sink, l_source_1, flag, ctr_source;
    extern int ctr_source_1, ctr_sink, ctr_sink1;

        SOURCE source;      /*C struct*/
        SINK sink;          /*C struct*/
        SOURCE_1 source_1;  /*C struct*/
        SINK_1 sink_1;      /*C struct*/

        HANDLE CHT[4];

        p = 0;
        e_source =  flag = 0;
        l_sink = e_sink_1 = l_source_1 = 1;
        max = 5;
        ctr_source = ctr_source_1 = ctr_sink = ctr_sink_1 = 0;

        /*Initialize FIFO*/
        F *f1 = fifo_init(10);
        F *f2 = fifo_init(10);

        /*Connect FIFO and modules*/
        source.output_source = f1;
        sink.input_sink = f1;

        sink_1.output_sink = f2;
        source_1.input_source = f2;

        /*Create Threads*/
        CHT[0] = (HANDLE)_beginthread((void (*)(void *))&SOURCE_out, 0, &f1);
        CHT[1] = (HANDLE)_beginthread((void (*)(void *))&SINK_in, 0, &f1);
        CHT[2] = (HANDLE)_beginthread((void (*)(void *))&SINK_out, 0, &f2);
        CHT[3] = (HANDLE)_beginthread((void (*)(void *))&SOURCE_in, 0, &f2);

        /* Wait until all threads have terminated */

        WaitForSingleObject(CHT[0], INFINITE);
        WaitForSingleObject(CHT[1], INFINITE);
        WaitForSingleObject(CHT[2], INFINITE);
        WaitForSingleObject(CHT[3], INFINITE);

        getchar();

        return 0;} 
```

我读到 WaitForSingleObject 函数不适用于 _beginthread.... 但我的函数不是 nunsigned __stdcall 类型...

我构建了没有错误的程序，并使用断点对其进行了测试，一切正常。当我编译我有这个问题：

线程“Win32 线程”(0x11ec) 已退出，代码为 0 (0x0)。线程“Win32 线程”(0x918) 已退出，代码为 0 (0x0)。线程“Win32 线程”(0x8a4) 已退出，代码为 0 (0x0)。线程“Win32 线程”(0x2a8) 已退出，代码为 -1073741510 (0xc000013a)。线程“Win32 线程”(0x12f8) 已退出，代码为 -1073741510 (0xc000013a)。程序“[3984] SW=SW.exe: Native”已退出，代码为 -1073741510 (0xc000013a)。

程序永远不会到达函数 getchar()

在做这个程序之前，我做了一个程序，在两个块之间进行通信，一个读，另一个写。在那种情况下，我没有问题。

如果我不使用 WaitForSingleObject 函数，问题就会消失，但我的程序几乎总是在完成之前停止。

每个线程使用的函数在中断时停止。但我希望其他的继续直到它出现中断..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T12:04:28.610

的文档[`_beginthread`](http://msdn.microsoft.com/en-us/library/kdzttdcb.aspx)说明您不能使用其中一种等待功能：

> 以下示例代码演示了如何将 _beginthreadex 返回的线程句柄与同步 API WaitForSingleObject 一起使用。主线程在继续之前等待第二个线程终止。当第二个线程调用 _endthreadex 时，它会导致其线程对象进入信号状态。这允许主线程继续运行。这不能用 _beginthread 和 _endthread 完成，因为 _endthread 调用 CloseHandle，在线程对象设置为信号状态之前将其销毁。

而本文也为您提供了解决方案，即改为使用`_beginthreadex`。

我认为当您这么说时，您在问题中暗示了这一点

> 但我的功能不是 __stdcall

您只需更改函数即可使用`__stdcall`调用约定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:03:27.003

我不知道这是否有帮助，但您可能想尝试一下。我认为 WaitForSingleObject 仅适用于 Windows API。因此，您需要使用创建线程`CreateThread`（您可以在 tge MSDN 中搜索 API，它比 beginthread 稍微复杂一些，但并不复杂，如果您不了解安全性等，大多数不熟悉的结构可以设置为 NULL） . CreateThread 返回一个您可以等待的句柄。

我认为`beginthread`返回一些你等不及的东西，也就是说，WaitForSingleObject 的行为将是未定义的。在这种情况下，它可能会永远等待，因此不会调用 getchar。

# python - 计算一组递增数字之间的差异的笨拙，有没有更漂亮的方法？

> ID：10448122
> 
> 赞同：2
> 
> 时间：2012-05-04T11:38:51.923
> 
> 标签：python, list

下面的代码工作得很好。但这似乎很冗长，肯定有更优雅的方法来计算这个吗？

这个想法是我有一个 100 个递增时间戳的列表，我想查看这些时间戳并计算每个时间戳之间的平均时间。

下面的代码起作用，但我敢肯定，像这样反转列表确实效率低下。

有什么建议么？

```
#!/usr/bin/python 

nums = [1,4,6,10]
print nums
nums_orig = list(nums)

nums_orig.pop()
nums.reverse()
nums.pop()
nums.reverse()

print nums
print nums_orig

total = 0

for idx, val in enumerate(nums):
  difference = val - nums_orig[idx]
  total += difference
  print idx, val - nums_orig[idx]

print "Mean difference is %d" % (total / len(nums)) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T11:43:16.173

如果你有 numpy：

```
>>> import numpy as np
>>> np.diff([1,4,6,10]).mean()
3.0 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T11:43:32.147

你正在寻找的是

```
>>> nums = [1,4,6,10]
>>> [x-y for x,y in zip(nums[1:],nums)]
[3, 2, 4]
>>> delta=[x-y for x,y in zip(nums[1:],nums)]
>>> float(sum(delta))/len(delta)
3.0 
```

使用星图的解决方案

```
>>> from itertools import starmap
>>> from operator import sub
>>> sum(starmap(sub,zip(nums[1:],nums)))/float(len(nums)-1)
3.0 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T13:00:34.450

> 这个想法是我有一个 100 个递增时间戳的列表，我想查看这些时间戳并计算每个时间戳之间的平均时间。

由于它们正在增加，因此差异之和只是第一个和最后一个之间的差异。同时，差异的数量只是比值的数量少 1。

所以不需要循环。只是：

```
(nums[-1] - nums[0])/(len(nums) - 1) 
```

# javascript - Volusion 模板编辑 .asp 代码以包含额外的标题图形

> ID：10448129
> 
> 赞同：0
> 
> 时间：2012-05-04T11:39:14.020
> 
> 标签：javascript, jquery, asp-classic, volusion

我希望有人可以提供帮助，因为 .asp 对我来说是新手，这让我很头疼！

基本上我们有一个电子商务 Volusion 模板，在标题中，我们想在已经存在的旁边添加一个新图形，应该很容易，但一些 .asp 代码似乎隐藏了标题中的元素。我尝试在代码中解释：

**ASP**

```
 $("#content_area").find("table:contains('Home >')").css("display",     "none").html("");

   var a = $(".productnamecolorLARGE").html();
   if (document.location.href.indexOf("help")  == -1) {
      if ($(".productnamecolorLARGE").html() != 'Order Status') {
         if ($.browser.msie) {
            $(".productnamecolorLARGE").html("<tr><td></td><td width='490'><div  style='font-size: 21px; margin-bottom: -2px; padding-top: 19px;'>" + a + "</div></td></tr>");
         } else {
            $(".productnamecolorLARGE").html("<tr><td></td><td width='490'><div style='font-size: 21px; margin-bottom: -25px; padding-top: 19px;'>" + a + "</div></td></tr>");
         }
      };
    } else {
     $("#content_area").find("img").eq(0).remove();
   }

   $("#lnk1").css("color","#79496a");
        $("#Header_ProductDetail_ProductDetails_span").parent().parent().parent().parent().parent().remove();
   $("#headerTop").find("a").eq(0).html("<ing border=0 src='/v/vspfiles/templates/192/images/view_bag_small.png'>");
   $(".video_container").css("padding", "17px 10px 16px 45px"); 
```

**HTML**

```
<div id="header" style="z-index: 999;">
<div id="display_homepage_title"><a href="http://www.domain.com/default.asp" title="www.domain.com">www.domain.com</a></div>

<div id="headerTop">
   <a href="http://www.domain.com/shoppingcart.asp">View Bag</a>
   <a href="http://www.domain.com/aboutus.asp">About</a> 
   <a href="http://www.domain.com/myaccount.asp">My Account</a> 
```

这就是我想要做的：

```
<div id="headerTop">
   <!-- This line is being added --> <a href="http://www.domain.com/returns.asp"><ing src="newgrahpic.jpg" width="100" height-"50"></a>
   <a href="http://www.domain.com/shoppingcart.asp">View Bag</a>
   <a href="http://www.domain.com/aboutus.asp">About</a> 
   <a href="http://www.domain.com/myaccount.asp">My Account</a> 
```

进行此更改时，.asp 似乎将现有的查看包图形（第 2 行）添加到我的新视图（第 1 行），然后在其右侧显示“我的帐户”，而我的帐户被 Display:none 隐藏; 在我添加新行之前分配给它。

我很欣赏这听起来像是一堆废话，但我希望有人能理解它在做什么？！

提前感谢您的帮助。

富有的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T04:02:44.883

实际上这是不可能的 :( 很抱歉让你失望了。Volusion 声称具有简单易用的结构，但对模板所做的任何更改都不起作用。只有 CSS 更改有效（由于他们奇怪的 CMS ASP 引擎似乎重写了我们的自定义代码). 这是一篇文章，深入探讨了 volusion 模板的复杂性：http: [//tech-hive.com/reviews/shopping-carts/volusion-every-themers-nightmare-20100615/#](http://tech-hive.com/reviews/shopping-carts/volusion-every-themers-nightmare-20100615/#)

真正的问题是，是否有任何其他具有 CML 的知名提供商可以让我们进行自定义编码？这就是我寻求答案的问题。

# iphone - 如何移动 UITabBarItem 的标题？

> ID：10448130
> 
> 赞同：16
> 
> 时间：2012-05-04T11:39:19.277
> 
> 标签：iphone, objective-c, xcode, uitabbar, uitabbaritem

有人可以告诉我如何将 UITabBarItem 的标题（例如 2px）移动到顶部吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-03-10T11:25:57.383

解决方案：

```
UITabBarItem *item = [tabBar.items objectAtIndex:0]; 
item.titlePositionAdjustment = UIOffsetMake(0, -5.0); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2017-02-15T09:10:04.847

> Swift 3 更新

将此代码放入`UITabBarController`：

```
UITabBarItem.appearance().titlePositionAdjustment = UIOffset(horizontal: 0, vertical: -5) 
```

归功于[蒂姆·布朗](https://stackoverflow.com/questions/13618268/is-there-a-way-to-change-the-text-position-in-uitabbar-or-uitabbaritem)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-24T07:35:41.320

Swift 4 像我一样，如果您在添加所有控制器之后在其他控制器中创建标签栏控制器，您可以循环浏览标签栏项目并更改标题、定位和字体

```
for (index,tabBarItem) in tabBarController.tabBar.items!.enumerated() {
        tabBarItem.image = nil //if you only want title and no Image
        tabBarItem.title = titleArray[index] //setting your title based on some array
        let attributes = [NSAttributedStringKey.font: UIFont.systemFont(ofSize: 20)] // changeing font and height of the text
        tabBarItem.setTitleTextAttributes(attributes, for: .normal)
        tabBarItem.titlePositionAdjustment = UIOffset(horizontal: 0, vertical: -10.0) // updating the title positon 
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-09T12:19:09.723

可以`tabbarItem.titlePositionAdjustment`用来调整。

如果您想用它做更多事情，请访问 tabbaritem 子视图并在`tabbar.subviews`. 例如

```
 int i = 0;
for (NSObject *view in self.tabBar.subviews)
{
    MTLog(@"%@", view);
    if ([view respondsToSelector:@selector(subviews)])
    {
        for (NSObject *childView in ((UIView *)view).subviews)
        {
            if ([childView isKindOfClass:[UILabel class]])
            {
                if (i > (titlesArray.count - 1))
                    break;
                UILabel *label = (UILabel *)childView;
                NSMutableAttributedString *attributedString = [[NSMutableAttributedString alloc] initWithString:titlesArray[i] attributes:@{
                                                                                                                                            NSFontAttributeName:[UIFont systemFontOfSize:9]
                                                                                                                                            }];

                NSMutableParagraphStyle *style = [[NSMutableParagraphStyle alloc] init];
                [style setMinimumLineHeight:26];
                [style setAlignment:NSTextAlignmentRight];

                [attributedString addAttribute:NSParagraphStyleAttributeName
                                         value:style
                                         range:NSMakeRange(0, attributedString.length)];
                label.attributedText = attributedString;
                i++;
            }

        }
    }

} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-04T11:42:52.013

你不能......你也许可以破解它，但这并不容易，并且可能会在未来的 iOS 更新中破坏你的应用程序。

最好的办法是创建你自己的 UITabBar 系统......这是一个很好的指南，你可以看看......

[http://idevrecipes.com/2011/01/04/how-does-the-twitter-iphone-app-implement-a-custom-tab-bar/](http://idevrecipes.com/2011/01/04/how-does-the-twitter-iphone-app-implement-a-custom-tab-bar/)

# python - 想在python中创建一个性格测试。如何执行此任务的功能？

> ID：10448143
> 
> 赞同：5
> 
> 时间：2012-05-04T11:40:23.203
> 
> 标签：python, testing

我试图制作一个包含所有这些问题的文件，但没有成功！

问题=打开（文件名.txt“r”）

这就是我所做的：

```
#!/usr/bin/python
#    questions.py

questions1 = [("At a party do you", "interact with many, including strangers", "interact with a few, known  to you"),
    ("At parties do you", "Stay late, with increasing energy", "Leave early, with decreasing energy"),
    ("In your social groups do you", "Keep abreast of others happenings", "Get behind on the news"),
    ("Are you usually rather", "Quick to agree to a time", "Reluctant to agree to a time"),
    ("In company do you", "Start conversations", "Wait to be approached"),
    ("Does new interaction with others", "Stimulate and energize you", "Tax your reserves"),
    ("Do you prefer", "Many friends with brief contact", "A few friends with longer contact"),
    ("Do you", "Speak easily and at length with strangers", "Find little to say to strangers"),
    ("When the phone rings do you", "Quickly get to it first", "Hope someone else will answer"),
    ("At networking functions you are", "Easy to approach", "A little reserved")]

counter_a, counter_b = 0, 0

for question in questions1:
    question_string = "%s:\n\tA. %s\n\tB. %s\n[a/b]:  " % (question[0], question[1], question[2])
    answer = raw_input(question_string).lower()
    while answer not in ("a", "b"):
        print("Please choose A or B")
        answer = raw_input(question_string).lower()
    if answer == "a":
        counter_a += 1
    else:
        counter_b += 1

#print "A total is %d" % counter_a
#print "B total is %d" % counter_b

if counter_a > counter_b:
    print 'Your first personality code is: E'
else:
    print 'Your first personality code is: I'

##############################################################################

questions2 = [("Are you more", "Realistic", "Philosophically inclined "),
("Are you a more", "Sensible person", "Reflective person "),
("Are you usually more interested in", "Specifics", "Concepts "),
("Facts", "Speak for themselves", "Usually require interpretation "),
("Traditional common sense is", "Usually trustworthy", "often misleading "),
("Are you more frequently", "A practical sort of person", "An abstract sort of person "),
("Are you more drawn to", "Substantial information", "Credible assumptions "),
("Are you usually more interested in the", "Particular instance", "General case "),
("Do you prize more in yourself a", "Good sense of reality", "Good imagination "),
("Do you have more fun with", "Hands-on experience", "Blue-sky fantasy "),]

counter2_a, counter2_b = 0, 0

for question in questions2:
    question_string = "%s:\n\tA. %s\n\tB. %s\n[a/b]:  " % (question[0], question[1], question[2])
    answer = raw_input(question_string).lower()
    while answer not in ("a", "b"):
        print("Please choose A or B")
        answer = raw_input(question_string).lower()
    if answer == "a":
        counter2_a += 1
    else:
        counter2_b += 1

#print "A total is %d" % counter2_a
#print "B total is %d" % counter2_b

##############################################################################

questions3 = [("Are you usually more", "Fair minded", "Kind hearted"),
("Is it more natural to be", "Fair to others", "Nice to others"),
("Are you more naturally", "Impartial", "Compassionate"),
("Are you inclined to be more", "Cool headed", "Warm hearted"),
("Are you usually more", "Tough minded", "Tender hearted"),
("Which is more satisfying", "To discuss an issue throughly", "To arrive at agreement on an issue"),
("Are you more comfortable when you are", "Objective", "Personal"),
("Are you typically more a person of", "Clear reason", "Strong feeling"),
("In judging are you usually more", "Neutral", "Charitable"),
("Are you usually more", "Unbiased", "compassionate")]

counter3_a, counter3_b = 0, 0

for question in questions3:
    question_string = "%s:\n\tA. %s\n\tB. %s\n[a/b]:  " % (question[0], question[1], question[2])
    answer = raw_input(question_string).lower()
    while answer not in ("a", "b"):
        print("Please choose A or B")
        answer = raw_input(question_string).lower()
    if answer == "a":
        counter3_a += 1
    else:
        counter3_b += 1

plus1a3 = counter3_a + counter2_a
plus2b3 = counter3_b + counter2_b

#print "A total is %d" % plus1a3
#print "B total is %d" % plus2b3

if plus1a3 > plus2b3:
    print 'Your second personality code is: S'
else:
    print 'Your second personality code is: N'

##############################################################################

questions4 = [("Do you tend to be more", "Dispassionate", "Sympathetic"),
("In first approaching others are you more", "Impersonal and detached", "Personal and engaging"),
("In judging are you more likely to be", "Impersonal", "Sentimental"),
("Would you rather be", "More just than merciful", "More merciful than just"),
("Are you usually more", "Tough minded", "Tender hearted"),
("Which rules you more", "Your head", "Your heart"),
("Do you value in yourself more that you are", "Unwavering", "Devoted"),
("Are you inclined more to be", "Fair-minded", "Sympathetic"),
("Are you convinced by?", "Evidence", "Someone you trust"),
("Are you typically more", "Just than lenient", "Lenient than just")]

counter4_a, counter4_b = 0, 0

for question in questions4:
    question_string = "%s:\n\tA. %s\n\tB. %s\n[a/b]:  " % (question[0], question[1], question[2])
    answer = raw_input(question_string).lower()
    while answer not in ("a", "b"):
        print("Please choose A or B")
        answer = raw_input(question_string).lower()
    if answer == "a":
        counter4_a += 1
    else:
        counter4_b += 1

plus1a4 = counter4_a + counter3_a
plus2b4 = counter4_b + counter3_b

#print "A total is %d" % plus1a4
#print "B total is %d" % plus2b4

##############################################################################

questions5 = [("Do you prefer to work", "To deadlines", "Just whenever"),
("Are you usually more", "Punctual", "Leisurely"),
("Do you usually", "Settle things", "Keep options open"),
("Are you more comfortable", "Setting a schedule", "Putting things off"),
("Are you more prone to keep things", "well organized", "Open-ended"),
("Are you more comfortable with work", "Contracted", "Done on a casual basis"),
("Are you more comfortable with", "Final statements", "Tentative statements"),
("Is it preferable mostly to", "Make sure things are arranged", "Just let things happen"),
("Do you prefer?", "Getting something done", "Having the option to go back"),
("Is it more like you to", "Make snap judgements", "Delay making judgements")]

counter5_a, counter5_b = 0, 0

for question in questions5:
    question_string = "%s:\n\tA. %s\n\tB. %s\n[a/b]:  " % (question[0], question[1], question[2])
    answer = raw_input(question_string).lower()
    while answer not in ("a", "b"):
        print("Please choose A or B")
        answer = raw_input(question_string).lower()
    if answer == "a":
        counter5_a += 1
    else:
        counter5_b += 1

plus1a5 = counter5_a + counter4_a
plus2b5 = counter5_b + counter4_b

#print "A total is %d" % plus1a5
#print "B total is %d" % plus2b5

if plus1a5 > plus2b5:
    print 'Your third personality code is: T'
else:
    print 'Your third personality code is: F'

##############################################################################

questions6 = [("Do you tend to choose", "Rather carefully", "Somewhat impulsively"),
("Does it bother you more having things", "Incomplete", "Completed"),
("Are you usually rather", "Quick to agree to a time", "Reluctant to agree to a time"),
("Are you more comfortable with", "Written agreements", "Handshake agreements"),
("Do you put more value on the", "Definite", "Variable"),
("Do you prefer things to be", "Neat and orderly", "Optional"),
("Are you more comfortable", "After a decision", "Before a decision"),
("Is it your way more to", "Get things settled", "Put off settlement"),
("Do you prefer to?", "Set things up perfectly", "Allow things to come together"),
("Do you tend to be more", "Deliberate than spontaneous", "Spontaneous than deliberate")]

counter6_a, counter6_b = 0, 0

for question in questions6:
    question_string = "%s:\n\tA. %s\n\tB. %s\n[a/b]:  " % (question[0], question[1], question[2])
    answer = raw_input(question_string).lower()
    while answer not in ("a", "b"):
        print("Please choose A or B")
        answer = raw_input(question_string).lower()
    if answer == "a":
        counter6_a += 1
    else:
        counter6_b += 1

plus1a6 = counter6_a + counter5_a
plus2b6 = counter6_b + counter5_b

#print "A total is %d" % plus1a6
#print "B total is %d" % plus2b6

if plus1a6 > plus2b6:
    print 'Your fourth personality code is: J'
else:
    print 'Your fourth personality code is: P'

#################################################################### 
```

我在编程方面是新手，如果我的问题含糊不清，请提前道歉！

没有我想做的，我想做一个基于 Myers-Briggs Type Indicator 的性格测试

我需要提问 - 用 A 或 B 选项设置大约 70 个问题 - 我想让这个问题尽可能简单

我粘贴了我开始使用的代码。- 我明白我很遥远

在此先感谢您的帮助！

```
counterA = 0
counterB = 0

question = raw_input('At a party do you? \n A. Interact with many, includingstrangers \n B.            Interact with a few, known to you. \n ')
print ''
question = raw_input('At a party do you? \n A. Interact with many, includingstrangers \n B. Interact with a few, known to you. \n ')

def question_x(x):
    raw_input('')

question_x('')    

def answer(x):
    if question == 'a' or question == 'A':
        counterB = counterB + 1
    else:
        counterB = counterB + 1 

print counterA
print counterB

#if q1 == 'a' or q1 == 'A':
#    counterA = counterA + 1
#else:
#    counterB = counterB + 1

############################################## 

#if q2 == 'a' or q2 == 'A':
#   counterA = counterA + 1
#else:
#    counterB = counterB + 1

#print counterA
#print counterB 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T11:54:40.083

这是一个非常普遍的问题。所以我给出一些基本的想法：

*   为了便于管理，将问题存储在文件中。您可以使用一些一致的格式。就像每个问题都由三行组成。第一行是问题，第二行是选项 A，第三行是选项 B。
*   打开文件并在列表中加载问题、选项。您可以使用三个列表，一个用于问题，另外两个用于两个选项。或三个元素的单一列表。
*   使用循环遍历列表。在步骤 i 打印`question[i]`,`optionA[i]`和`optionB[i]`.
*   输入用户的答案并相应地增加计数器。

# sql - SQLPLUS TRIM 和 COLUMN 格式化

> ID：10448150
> 
> 赞同：0
> 
> 时间：2012-05-04T11:41:05.843
> 
> 标签：sql, oracle, plsql, oracle10g, sqlplus

我刚刚执行了一个 PL/SQL 过程并得到了输出：

名字姓氏角色引用

我想要做的是使用修剪和列格式输出如下信息，以便名字和姓氏出现在一行上，然后角色和引号出现在下一行，由 | 分隔

名字姓氏

|角色 | 报价 |

我不知道该怎么做，对此的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:12:27.643

如果这是来自 PL/SQL 过程的输出——我假设这意味着它是通过调用 DBMS_OUTPUT 来完成的——那么 SQLPlus 列格式化命令将对其没有影响。您需要修改该过程以按照您想要的方式进行输出。

如果这是 SELECT 语句的输出，那么我相信您可以使用语句上的`fold_after`or`fold_before`选项`column`来做您想做的事。

# c# - Dollar-o-gram：这是如何在 excel 中开发的？

> ID：10448153
> 
> 赞同：1
> 
> 时间：2012-05-04T11:41:23.677
> 
> 标签：c#, reporting-services, charts, excel, vba

[参考这里](http://dashboardspy.com/?s=dollar%20o%20gram)

我有一种情况，美元-o-gram 格式的图表看起来很棒。

开发此图表的最简单方法是什么？

我有以下知识：

*   Excel VBA
*   报告服务 2008 R2
*   C#（有限）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:13:02.873

我认为您正在寻找的是树形图（或其混合）。Microsoft Research 有一个声称可以为您提供树形图功能的工具：

*   [http://research.microsoft.com/en-us/downloads/3f3ed95e-26d8-4616-a06c-b609df29756f/default.aspx](http://research.microsoft.com/en-us/downloads/3f3ed95e-26d8-4616-a06c-b609df29756f/default.aspx)

还有一个流行的 Excel 网站，它有一个有限的试用版，你可以下载，如果它适合你，可以花 15 美元购买。我不会在此处列出该站点，但在网络上搜索“Excel 树图”将为您指明正确的方向。

更好的是使用 D3 或类似的 Javascript 库使您的工具可在网络上发布：

*   [http://mbostock.github.com/d3/ex/treemap.html](http://mbostock.github.com/d3/ex/treemap.html)

# php - 从 pdf 创建图像

> ID：10448158
> 
> 赞同：0
> 
> 时间：2012-05-04T11:41:37.187
> 
> 标签：php, image, codeigniter, imagemagick

我正在创建一个 cron 作业，在该作业中我将文件从一个目录复制到另一个目录。cron 作业工作正常，它将文件复制到导入目录。导入目录的结构是这样的。

```
import
      folder1
          pdf_file1
      folder2
          pdf_file2 
```

我正在尝试为复制到文件夹的每个 pdf 文件创建一个缩略图，我安装了 ImageMagik，我的 php 代码创建一个缩略图是

```
 if ($preview != "") {
    $copy_res = ftp_get("files/upload/" . $ftp_upload["path"] . "/" . $preview, "files/import/" . $ftp_upload["preview"] . "/" . $preview);
    $md5_checksum = md5("files/import/" . $ftp_upload["path"] . "/" . $preview);
 } else {
         //$pdf_file = 'files/import/folder1/pdf_file1';
         $pdf_file = 'files/import/' . $ftp_upload["path"]."/".$filename_new;
         if (file_exists($pdf_file)){
             echo 'I am here';
             exec("convert -density 300 " . $pdf_file . "[0]" . $filename_new . ".jpg");
         }
 } 
```

当我运行代码时，它来到 else 语句并回显该行，但它不执行 exec 命令。我从命令提示符中检查了我导航到的转换命令

```
 C:\wamp\www\project\files\import\folder1 
```

然后我运行这个命令

```
 exec("convert -density 300  test.pdf[0]  test.jpg"); 
```

在命令提示符下它可以工作，但在我的代码中它不起作用。路径有问题吗？因为当我尝试为其创建缩略图时，该文件已被复制。

ImageMagik 安装在

```
 C:\Program Files(x86)\ImageMagik 
```

任何想法我做错了什么？还有其他更快的方法来为 pdf 创建缩略图吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:45:39.813

我现在编写代码，将代码与 exec() 分开，以便您可以显示发送给 Imagemagick 的信息。我也会尝试在 exec() 之外设置文件名

```
$input = $pdf_file . "[0]";
$output = $filename_new . ".jpg"
$cmd = " -density 300 $input -thumbnail 200x300 $output ";
// echo $cmd."<br>";
exec("convert $cmd"); 
```

添加了调整大小，但它会保持图像比例 - 如果您需要精确的尺寸，您可以裁剪图像或用颜色填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:30:51.100

似乎缺少一个空格来分隔文件的路径`pdf`和图像文件的新名称。

```
exec("convert -density 300 " . $pdf_file . "[0]" . $filename_new . ".jpg"); 
```

应该：

```
exec("convert -density 300 " . $pdf_file . "[0] " . $filename_new . ".jpg");
-----------------------------------------------^ 
```

# css - 使用 CSS 创建复杂的 div 结构

> ID：10448159
> 
> 赞同：0
> 
> 时间：2012-05-04T11:41:40.603
> 
> 标签：css, html

我正在尝试使用 CSS 创建一个复杂的 div 结构。

我希望它由四列组成。左侧只是图像列表。右边是我想不出方法来创建的复杂 div 结构。应该有两个包含各种细节的大垂直框。在这些垂直框之间是任意数量的水平框。

我的问题是我无法弄清楚如何以“缩放”的方式创建这个 div 结构，即两个垂直框之间可以有任意数量的水平框。

这是我试图使用的 div 结构：

```
<div class="result">
    <div class="detail_1">
        <p>Detail 1</p>
    </div>
    <div class="details">
        <p>Details</p>
    </div>
    <div class="details">
        <p>Details</p>
    </div>
    <div class="detail_2">
        <p>Detail 2</p>
    </div>
</div> 
```

任何帮助将不胜感激！

编辑：我已经通过使用表格解决了这个问题。感谢您的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:57:11.197

## 更新 2

您的问题是：如何使价格和航班号 div 与父 div（容器）具有相同的高度..

1）使用此处描述的技术：http: [//matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks](http://matthewjamestaylor.com/blog/equal-height-columns-cross-browser-css-no-hacks)

2) 更新您的 CSS，使航班号和价格在其 div 的中间垂直对齐。

我认为我的 HTML 结构比你的更好，因为它更清晰，更容易使用。

因此，基于我的 HTML 结构：父容器 (flight_info) 与里面的内容一样是拉伸的（带有行的表格将是最长的）。由于上面步骤 1 中描述的技术，div 的 flight_number 和 price 也是父容器的总高度。额外的 CSS（第 2 步）将在中间很好地对齐价格和航班号。

## 老的

```
<ul id="flights">

<li>
<ul class="images">
    <li><img src="img1" alt="your image" /></li>
    <li><img src="img2" alt="your image 2" /></li>
</ul>

<div class="flight_info" id="flight_EK49">
    <div class="flight_number">
        EK49
    </div>  

    <table>
       <thead>
           <th>date</th>
           <th>from</th>
           <th>to</th>
       </thead>
       <tbody>
        <tr>
            <td>1/1/2013</td>
            <td>departure airfield</td>
            <td>destination airfield</td>
        </tr>
        ...
       </tbody>
    </table>

   <div class="price">
    €999,99
   </div>
</div>
</li>

// duplicate the above for a new flight..
</ul> 
```

对于 CSS 样式（您必须自己完成其余的工作，因为这只是一个示例。我没有测试任何代码）：

```
<style>
    #flights .images {
       float: left;
       width: 250px;
    }

    .flight_info {
        float: left;
        width: 700px; 
    }

    .flight_info .flight_number,
    .flight_info  .price {
        float: left;
        width: 150px;
    }

    .flight_info  .price {
        float: right;
    }

    .flight_info table {
        float: left;
        width: 400px;
    }
</style> 
```

我想你会明白的。

## 编辑 1

将所有绝对位置更改为浮动，因为使用 li 的自动高度更容易。我还添加了飞行的腿部图像，但正如我所提到的，你必须自己做剩下的；）

# bash - 如何设置 $？还是 Bash 中的返回码？

> ID：10448160
> 
> 赞同：44
> 
> 时间：2012-05-04T11:41:44.103
> 
> 标签：bash, error-handling, return-value, exit-code

我想设置一个返回值，以便它进入 while 循环：

```
#!/bin/bash
while [ $? -eq 1 ]
do
#do something until it returns 0    
done 
```

为了让这个工作，我需要`$? = 1`在开始时进行设置，但这不起作用。

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2012-05-05T00:58:50.307

`exit`您可以通过在子 shell 中使用参数执行来设置任意退出代码。

```
$ (exit 42); echo "$?"
42 
```

所以你可以这样做：

```
(exit 1)    # or some other value > 0 or use false as others have suggested
while (($?))
do
    # do something until it returns 0    
done 
```

或者你可以[模拟一个`do while`循环](https://stackoverflow.com/a/16491478/26428)：

```
while 
    # do some stuff
    # do some more stuff
    # do something until it returns 0    
do
    continue  # just let the body of the while be a no-op
done 
```

其中任何一个都可以保证循环至少运行一次，我相信这就是您的目标。

为了完整性，`exit`每个`return`都接受一个可选参数，它是一个整数（正数、负数或零），它将返回代码设置为除以 256 后整数的余数。当前 shell（或脚本或子 shell*）使用`exit`和退出使用 退出函数`return`。

例子：

```
$ (exit -2); echo "$?"
254
$ foo () { return 2000; }; foo; echo $?
208 
```

* * *

* 即使对于由管道创建的子外壳也是如此（除非同时禁用和`lastpipe`启用作业控制）：

```
$ echo foo | while read -r s; do echo "$s"; exit 333; done; echo "$?"
77 
```

请注意，最好使用`break`离开循环，但它的参数是要跳出的循环的级别数，而不是返回码。

使用 或`set +m`禁用作业控制。要启用. 如果您同时执行这两项操作，则前面示例中的循环将导致循环*和*包含的外壳*都*退出，并且不会执行最终的外壳。`set +o monitor``shopt -u -o monitor``lastpipe``shopt -s laspipe``exit``while`**`echo`**

 *** * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-05-04T12:56:23.203

`false`总是返回退出代码 1。

```
#!/bin/bash
false
while [ $? -eq 1 ]
do
#do something until it returns 0    
done 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-05-04T11:44:25.297

```
#!/bin/bash

RC=1

while [ $RC -eq 1 ]
do

  #do something until it returns 0    

  RC=$?
done 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-05-06T17:15:16.133

一些答案依赖于重写代码。在某些情况下，它可能是您无法控制的外来代码。

虽然对于这个特定的问题，设置 $? 为 1，但如果需要设置 $? 任何价值——唯一有用的答案是丹尼斯威廉姆森的答案。

一种更有效的方法，它不会产生一个新的孩子（但也不太简洁），是：

```
function false() { echo "$$"; return ${1:-1}; }
false 42 
```

注意： echo 部分只是为了验证它在当前进程中运行。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-04T11:46:49.217

`while`我认为您可以通过在进入循环之前运行保证失败的命令来隐式执行此操作。

当然，典型的此类命令是`[false](http://linux.die.net/man/1/false)`.

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-03-19T21:05:01.010

没有找到比一个简单的功能更轻的东西：

```
function set_return() { return ${1:-0}; } 
```

所有其他解决方案都像`(...)`或`[...]`可能`false`包含外部进程调用。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-07-16T16:55:19.787

老问题，但有一个更好的答案：

```
#!/bin/bash
until
    #do something until it returns success
do
    :;
done 
```

如果您要循环直到某事成功，那么只需在 until 部分中执行该操作即可。您可以将完全相同的代码放入您认为必须放入 do/done 部分的 until 部分。您不必被迫在 do/done 部分中编写代码，然后将其结果传回 while 或 until。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-04-28T03:52:04.463

`$?`可以包含 0..255 之间的字节值。此范围之外的返回数字将重新映射到此范围，就像应用了按位和 255 一样。

`exit value`- 可用于设置值，但很残酷，因为它会终止进程/脚本。

`return value`- 在函数中使用时有些传统。

`[[ ... ]]`- 适用于评估布尔表达式。

这是一个例子`exit`：

```
# Create a subshell, but, exit it with an error code:
$( exit 34 ); echo $? # outputs: 34 
```

以下是以下示例`return`：

```
# Define a `$?` setter and test it:
set_return() { return $1; }
set_return 0; echo $? # outputs: 0
set_return 123; echo $? # outputs: 123
set_return 1000; echo $? # outputs: 232
set_return -1; echo $? # outputs: 255 
```

以下是以下示例`[ ... ]`：

```
# Define and use a boolean test:
lessthan() { [[ $1 < $2 ]]; }
lessthan 3 8 && echo yes # outputs: yes
lessthan 8 3 && echo yes # outputs: nothing 
```

请注意，当`$?`用作条件时，零 (0) 表示成功，非零表示失败。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-04T11:50:42.753

像这样的东西会是你想要的吗？

```
#!/bin/bash
TEMPVAR=1
while [ $TEMPVAR -eq 1 ]
do
  #do something until it returns 0
  #construct the logic which will cause TEMPVAR to be set 0 then check for it in the 
  #if statement 

  if [ yourcodehere ]; then
     $TEMPVAR=0
  fi
done 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-08-12T18:24:34.567

您可以`until`用来处理`#do something until it returns 0`返回 1 或 0 以外的值的情况：

```
#!/bin/bash

false
until [ $? -eq 0 ]
do
#do something until it returns 0    
done 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-15T04:20:49.807

这就是我正在使用的

```
allow_return_code() {
  local LAST_RETURN_CODE=$?
  if [[ $LAST_RETURN_CODE -eq $1 ]]; then
    return 0
  else
    return $LAST_RETURN_CODE
  fi
}

# it converts 2 to 0, 
my-command-returns-2 || allow_return_code 2
echo $?
# 0

# and it preserves the return code other than 2
my-command-returns-8 || allow_return_code 2
echo $?
# 8 
```**

# c# - 找不到类型或命名空间“IRange”

> ID：10448171
> 
> 赞同：0
> 
> 时间：2012-05-04T11:42:31.510
> 
> 标签：c#, .net, compiler-errors

我在 Visual Studio 2010 中使用 C#.net 4.0。我收到错误消息

> 错误 10 找不到类型或命名空间名称“IRange”（您是否缺少 using 指令或程序集引用？） C:\git\emtexporter\EMTExporter.IRepository\IRangeRepository.cs 11 27 EMTExporter.IRepository

IRange 是项目 EMTExporter.IEntities 中的一个接口，项目 IEntities 构建成功。IRange.cs 有代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Wiggle.EMTExporter.IEntities;

namespace Wiggle.CategoryXMLExporter.IEntities
{
    interface IRange
    {
        long ID { get; }
        Dictionary<ILanguage, string> rangeNames { get; set; }
    }
} 
```

问题出现在 IRangeRepository.cs 中，其代码如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Wiggle.EMTExporter.IEntities;

namespace CategoryXMLExporter.IRepository
{
    interface IRangeRepository
    {
        Dictionary<string,IList<IRange>> getAllRanges();
    }
} 
```

我在 IRepository 项目中引用 EMTExporter.IEntities。我不知道可能出了什么问题！

编辑：问题是项目已从 CategoryXMLExporter 更改为 EMTExporter，但我没有更新项目的程序集名称和默认命名空间。更新了，公开了界面，现在它可以工作了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:45:24.453

您的界面不公开尝试以下

```
public interface IRange 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T11:46:53.800

默认[可访问性级别](http://msdn.microsoft.com/en-us/library/ms173121.aspx)的顶级类和接口是`internal`, not `public`，因此如果它们在不同的项目中，它将不可见。

> 直接在命名空间中声明的类和结构（换句话说，不嵌套在其他类或结构中）可以是公共的或内部的。如果未指定访问修饰符，则默认为 Internal。

```
namespace Wiggle.CategoryXMLExporter.IEntities
{
    public interface IRange
    {
        long ID { get; }
        Dictionary<ILanguage, string> rangeNames { get; set; }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:44:45.483

`IRange`位于名称空间中，`Wiggle.CategoryXMLExporter.IEntities`因此您需要引用它。同时制作界面`public`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T11:45:19.087

您需要将命名空间添加`Wiggle.CategoryXMLExporter.IEntities`到您的 using 子句，因为`IRange`在那里定义：

```
using Wiggle.CategoryXMLExporter.IEntities; 
```

此外，如果它在不同的程序集中，您需要制作它`public`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-04T19:32:23.630

除了上面提到的之外，有时您可能需要确保将引用的库配置为在选定的活动配置和平台下构建。

1.  在 Visual Studio 2012 或 2013 中，右键单击解决方案并选择“配置管理器”。

2.  对于选定的“Active Solution Configuration”（例如“Debug”或“Release”）和“Active Solution Platform”（例如“Any CPU”、“x64”、“x86”或“ARM”），确保项目包含您的接口及其任何依赖项都已检查“构建”。

# javascript - 不在某些字符之间的所有单词的 Javascript 正则表达式

> ID：10448173
> 
> 赞同：0
> 
> 时间：2012-05-04T11:42:43.210
> 
> 标签：javascript, regex

我试图返回方括号之间的所有单词的计数。所以给..

```
[don't match these words] but do match these 
```

最后四个单词我数到 4。

这适用于.net：

```
\b(?<!\[)[\w']+(?!\])\b 
```

但它在 Javascript 中不起作用，因为它不支持后视

纯 js 正则表达式解决方案的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T12:29:15.793

好的，我认为这应该有效：

```
\[[^\]]+\](?:^|\s)([\w']+)(?!\])\b|(?:^|\s)([\w']+)(?!\])\b 
```

你可以在这里测试它：
[http ://regexpal.com/](http://regexpal.com/)

如果您需要在正文之后使用方括号中的文本替代，可以将其添加为第二个替代，当前的第二个将成为第三个。
这有点复杂，但我现在想不出更好的解决方案。

如果您需要对实际匹配做一些事情，您会在捕获组中找到它们。

**更新：**

解释：所以，我们在这里有两个选择：

1.  `\[[^\]]+\](?:^|\s)([\w']+)(?!\])\b`

这是在说：

*   `\[[^\]]+\]`- 匹配方括号中的所有内容（不要捕获）
*   `(?:^|\s)`- 后跟行开头或空格 - 当我看它时，现在将插入符号取出，因为它没有意义，所以这将变得公正`\s`
*   `([\w']+)`- 只要`(?!\])`下一个字符不是右括号，就匹配所有后面的单词字符 - 现在这可能也是不必要的，所以让我们尝试删除前瞻
*   `\b`- 并匹配单词边界

2`(?:^|\s)([\w']+)(?!\])\b`

如果您找不到选项 1 - 只进行单词匹配，而无需寻找方括号，因为我们在第一部分确保它们不在这里。

好的，所以我删除了所有我们不需要的东西（他们留在那里，因为我在它起作用之前尝试了很多选项:-)，修改后的正则表达式如下：

```
\[[^\]]+\]\s([\w']+)(?!\])\b|(?:^|\s)([\w']+)\b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:45:50.990

我会使用类似`\[[^\]]*\]`删除方括号之间的单词，然后按空格*分解*返回的字符串来计算剩余的单词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T06:48:44.367

克里斯，重新提出这个问题，因为它有一个没有提到的简单解决方案。[（在对有关如何在 regex 中排除模式](https://stackoverflow.com/q/23589174)的一般问题进行一些研究时发现了您的问题。）

这是我们的简单正则表达式（[在 regex101 上](http://regex101.com/r/gU1rO2)查看它，查看右下面板中的组捕获）：

```
\[[^\]]*\]|(\b\w+\b) 
```

左边的交替匹配完成`[bracketed groups]`。我们将忽略这些匹配。右侧匹配并捕获第 1 组的单词，我们知道它们是正确的单词，因为它们没有被左侧的表达式匹配。

该程序展示了如何使用正则表达式（参见[在线演示](http://js.do/code/38409)中的计数结果）：

```
<script>
var subject = '[match ye not these words] but do match these';
var regex = /\[[^\]]*\]|(\b\w+\b)/g;
var group1Caps = [];
var match = regex.exec(subject);

// put Group 1 captures in an array
while (match != null) {
    if( match[1] != null ) group1Caps.push(match[1]);
    match = regex.exec(subject);
}

document.write("<br>*** Number of Matches ***<br>");
document.write(group1Caps.length);

</script> 
```

**参考**

[如何匹配（或替换）模式，除了情况 s1、s2、s3...](https://stackoverflow.com/q/23589174)

# asp.net - 管理多个数据库

> ID：10448177
> 
> 赞同：0
> 
> 时间：2012-05-04T11:42:58.353
> 
> 标签：asp.net, sql-server

我们在 SQL Server 中完成了一个包含大约 20 个表的项目，并完成了一个 ASP.NET 项目。

最近我们的客户告诉我们一个名为`Site`. 正如他所说，一个项目有多个站点，`Application`每个站点的数据必须不同。我们现在面临一些问题，因为应用程序已经完全开发，我们无法`Application`根据站点参数更新每个 SQL Server 表和每个与更改相关的 SQL 查询，现在我们正在讨论为每个站点设置多个数据库。

事情变得更糟，因为客户说每个项目可能有大约 20 个站点。所以对我们来说，管理 20 个数据库将非常困难。

有人可以告诉我们这个问题的适当解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:50:14.687

您建议的解决方案似乎是正确的解决方案；每个站点使用不同的数据库（注意：数据库服务器可以轻松托管所有 20 个数据库，具体取决于事务量）。

说明：您需要的是分离每个站点的数据；这可以通过将站点标识符添加到表格数据或确保站点不共享数据存储来完成；在这种情况下，后者是最简单和最具成本效益的解决方案。

请注意，“维护数据库”并不像您说的那么难。在我看来，要管理的数据量和交易量以及要进行的手动更正的数量是维护成本的关键因素......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:28:41.830

过去我一直在这条路上，我们所做的是创建一个站点表，然后是站点拥有的对象，我们将外键关系添加回站点表。

在我们的例子中，我们只有三个或四个站点拥有的对象，所以我们只需要修改 4 个表。然后从那里开始的关系仍然有效，不需要修改。

我不会走每个站点一个数据库的路线，如果您将来必须进行数据库更改或者如果您想在整个系统中提取报告，这将成为维护的噩梦

# actionscript-3 - AS3 audioencoder 转换为音频

> ID：10448179
> 
> 赞同：0
> 
> 时间：2012-05-04T11:43:07.473
> 
> 标签：actionscript-3, apache-flex, adobe, flash, mxmlc

在操作脚本中，如何使用音频编码器将记录的字节数组从麦克风转换为 MP3

```
 public var recordedData:ByteArray;          
     recordedData.writeBytes(sample.data, 0, sample.data.bytesAvailable); 
```

如何使用音频编码器将录制的数据保存到 mp3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:51:10.897

您会发现自己是一个在 Flash 播放器中运行的 MP3 编码库。一个简单的谷歌搜索发现[Shine](https://github.com/kikko/Shine-MP3-Encoder-on-AS3-Alchemy)非常受欢迎。另一种选择是将音频流式传输到服务器并在那里编码。

根据您的环境，如果您在 Air 中并且愿意构建一个原生扩展来进行编码，您可能可以使用[LAME之类的东西。](http://lame.sourceforge.net/)

**编辑**

如果您使用的是 Shine，我[在项目中发现了一个示例，](https://github.com/kikko/Shine-MP3-Encoder-on-AS3-Alchemy/blob/master/src/fr/kikko/test/ShineMP3EncoderTest.as)它暗示编码很容易：

```
private var mp3Encoder:ShineMP3Encoder;

private function encodeClicked(event:Event):void {
    mp3Encoder = new ShineMP3Encoder(wavLoader.data);
    mp3Encoder.addEventListener(Event.COMPLETE, mp3EncodeComplete);
    mp3Encoder.addEventListener(ProgressEvent.PROGRESS, mp3EncodeProgress);
    mp3Encoder.addEventListener(ErrorEvent.ERROR, mp3EncodeError);
    mp3Encoder.start();
}

private function saveClicked(event : MouseEvent) : void {
    mp3Encoder.saveAs();
} 
```

# c++ - 带有“自定义构建工具”的项目的 TFS 构建服务器

> ID：10448183
> 
> 赞同：0
> 
> 时间：2012-05-04T11:43:21.930
> 
> 标签：c++

我正在设置一个 TFS 2010 Build 服务器。但是我目前遇到的问题是由于“无法访问”而无法构建具有“自定义构建工具”的项目。

这些项目是 C++。

自定义构建工具是“ [Pro*C](http://en.wikipedia.org/wiki/Pro%2aC) ”。基本上，您有一个 *.pc 文件，它会生成一个 *.cpp 文件。但是在构建服务器上，目录/文件是只读的。所以它会在“无法访问”时崩溃。

我试图从 TFS 中删除 *.cpp 文件。使生成的文件不存在。但显然该文件夹也是只读的，不允许创建新文件。

有没有人有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:47:17.940

有一个名为*MSBuild Community Tasks*的项目，可以从[http://msbuildtasks.tigris.org/](http://msbuildtasks.tigris.org/)下载。我将它用于我自己的自动化 tfs-build。它为您的 msbuild-project 提供了几个扩展。其中之一是所谓的*Attrib*任务，它使您有机会从项目中更改文件（可能还有文件夹）属性。它没有列在网站的表格中，但记录在他们的文档中。作为他们文档中的示例，您可以将以下行添加到您选择的目标中：

```
<Attrib Files="Test\version.txt" ReadOnly="true" Hidden="true" System="true"/> 
```

我认为这也适用于以下项目组

```
<Attrib Files="@(AllYourFiles)" ReadOnly="true" Hidden="true" System="true"/> 
```

如果您想使用它，请不要忘记将其安装在构建服务器上。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:56:39.243

我会建议以下选项之一：

*   如果 .cpp 文件是由构建过程生成的，请不要将它们放在源代码管理中
*   更改 Pro*C 的设置以将其输出文件写入可写中间文件夹
*   添加一个构建步骤，将问题文件复制到中间位置进行处理
*   添加一个构建步骤，强制对这些文件的文件访问权限可读取以进行处理
*   如果您只需要偶尔构建这些文件，那么在您的开发人员机器上使用 Pro*C 手动构建它们并检查结果，这样您就不会浪费时间在每次桌面或构建服务器构建时不必要地重新构建不变的文件。

# c# - 如何使用 datagridview 选定行在创建实体时将子实体集合添加到实体

> ID：10448186
> 
> 赞同：1
> 
> 时间：2012-05-04T11:43:27.093
> 
> 标签：c#, linq, entity-framework, datagridview

我创建了一个`line`对象，它是一个实体，它具有`Tags`我也想设置的导航属性。我想从绑定到`Tag`对象的 datagridview 中获取此标签集合：

```
dgvTags.DataSource = _rs.Tags.Where(x => x.TagGroup.Name == "All Reasons").OrderBy(x => x.Name); 
```

有问题的代码：

```
Line l = new Line
{
    Part = o.Part,
    Description = desc,
    Price = o.Price.Value,
    InvoiceNo = o.InvoiceNo,
    Cost = o.Cost.Value,
    Comments = txtComment.Text,
    Tags = dgvTags.SelectedRows as List<Tag> // <--- needs work here
                    }; 
```

该行显示错误：

**错误 5 无法通过引用转换、装箱转换、拆箱转换、包装转换或空类型转换将类型 'System.Windows.Forms.DataGridViewSelectedRowCollection' 转换为 'System.Collections.Generic.List' C:\SVN\RS\fAddLines .cs 142 15 RS**

有这样做的正确方法吗？

更新：

我已经能够使用下面的代码实现所需的结果，但仍在寻找*正确*的方法：

```
foreach (DataGridViewRow r in dgvTags.SelectedRows)
{
    l.Tags.Add(r.DataBoundItem as Tag);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:58:15.237

感谢 David Hall，他非常努力，但最后下面的代码是最简单的解决方案：

```
foreach (DataGridViewRow r in dgvTags.SelectedRows)
{
    l.Tags.Add(r.DataBoundItem as Tag);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:16:37.340

这是有很多很多方法可以解决问题的情况之一。我在下面给出的代码可能不是最好的，但它适用于从`SelectedRows`集合中获取类型化对象的列表。

```
IList<Tag> myrows = dataGridView1.SelectedRows.Cast<DataGridViewRow>().Select(x => x.DataBoundItem as Tag).ToList(); 
```

这使用了 Linq，与您的方法基本相同，Linq 只是通过删除 foreach 来整理一下。

* * *

您在评论中遇到的问题是因为`System.Collections.Generic.List<T>`Linq 创建的和`System.Data.Objects.DataClasses.EntityCollection<T>`.

我相信这应该有效：

```
Tags = new System.Data.Objects.DataClasses.EntityCollection<RS.Tag>(
    dataGridView1.SelectedRows.Cast<DataGridViewRow>()
    .Select(x => x.DataBoundItem as Tab).ToList()); 
```

我说相信，因为我只测试了转换为`BindingList<T>`not with `EntityCollection<T>`。

* * *

事实证明，EntityCollection 无法分配整个列表！从这里的这个问题：[convert or cast a List<t> to EntityCollection<T>](https://stackoverflow.com/questions/2364676/convert-or-cast-a-listt-to-entitycollectiont)我想出了以下代码：

```
dataGridView1.SelectedRows.Cast<DataGridViewRow>()
    .Select(x => x.DataBoundItem as Tab).ToList().ForEach(y => Tags.Add(y)); 
```

在这一点上，我可能更喜欢香草`ForEach`而不是这种单衬里。

# jquery - Jquery中的可排序VS DragnDrop

> ID：10448191
> 
> 赞同：2
> 
> 时间：2012-05-04T11:43:34.157
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable, jquery-ui-draggable, jquery-ui-droppable

当我尝试使用 Jquery 对一些数据进行排序时，我想我会使用拖放。后来，我访问了 jQueryui 网站。它们具有“拖放”和可排序功能。

现在我实现了“拖放”功能来对 HTML 表格行进行排序，并将它们的位置保存在数据库中。

不过，现在我很困惑：

1.  Sortable 是否也执行相同的功能？
2.  Sortable 是否仅适用于 UL 或 OL 或 LI ？它也可以与表格行一起使用吗？
3.  当我拖放行时有什么区别？（交换位置），与可排序（对行进行排序）相比。这些是不同的情况吗？我真的混淆了这些概念。
4.  使用 HTML 表格行进行排序是否正确（通过 Draggable 和 Droppable，就像我现在所做的那样）？
5.  何时使用 Sortable 与 Draggable/droppable 是否有任何指导方针

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T12:31:48.540

可排序也适用于表格，[请参阅此 jsFiddle](http://jsfiddle.net/3k6jm/)

关于 Sortable 和 Drag&Drop 之间的差异，它们只是满足两个不同的需求：

*   sortable 是一种拖放，但为预定义的一组项目实现了所有必需的图形行为。当您移动一个项目时，所有其他项目都会相应地移动。
*   另一方面，拖放允许您简单地取出一个项目并将其移动（可拖动），但您必须选择可以将其拖放到哪个项目（可拖放）。

使用 sortable，您正在搜索已排序项目的逻辑行为。使用 drap&drop，您正在搜索项目之间的交互。

例如，组织您的桌面图标就像可排序（移动一个图标将移动其他图标以重新组织它们）。如果您将一个文件夹放入另一个文件夹，这就像可拖动/可拖放（将一个文件夹放到另一个文件夹上不会重新组织它，但会触发将文件夹移动到另一个文件夹中的操作）。

[查看有关Sortable](http://jqueryui.com/demos/sortable/)和[Draggable](http://jqueryui.com/demos/draggable/) / [Droppable](http://jqueryui.com/demos/droppable/)的 jQuery UI 文档。

希望这会帮助你。

# authentication - 使用简单的 Java 代码获取当前用户 Liferay

> ID：10448193
> 
> 赞同：14
> 
> 时间：2012-05-04T11:43:44.337
> 
> 标签：authentication, jboss, struts2, liferay, portal

我正在使用：**Liferay 6.0.6**与**JBoss 5.1**和**Struts2**。

我的问题是，如何使用**Java**代码在登录后获取**Liferay中的当前用户。**

 *** * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-04T12:23:21.473

在您的 doView/processAction 方法中执行以下操作

```
User user = (User) request.getAttribute(WebKeys.USER); 
```

或使用 ThemeDisplay 对象。它包含其他信息，如 companyId、groupId、...

```
ThemeDisplay td  =(ThemeDisplay)request.getAttribute(WebKeys.THEME_DISPLAY);
User user = td.getUser(); 
```

类 ThemeDisplay、User nad WebKeys 是 portal-service.jar 的一部分。

如果您只需要一些 id 来识别当前用户，您也可以使用

```
String userId = request.getRemoteUser(); 
```

这个解决方案不是 Liferay 特定的，应该可以在 jsr-286 门户之间移植。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-06T05:36:51.223

Liferay 提供 Util 类

> com.liferay.portal.util.PortalUtil

此类包含获取常用属性的所有实用方法。

尝试使用`PortalUtil.getUser(PortletRequest portletRequest)`方法来避免创建新对象和引用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-25T17:41:46.863

这是另一种可能的方法：

```
private LiferayFacesContext liferayFacesContext = LiferayFacesContext.getInstance();
User currentUser=liferayFacesContext.getUser() 
```**

# php - Windows Server 2008 上安装的 xampp 上的 phpvideotoolkit 类错误

> ID：10448195
> 
> 赞同：1
> 
> 时间：2012-05-04T11:43:46.203
> 
> 标签：php, ffmpeg, xampp

发现我试图将图像序列转换为视频。为此，我可以了解 ffmpeg 类。

我发现的唯一包装类是 phpvideotoolkit 但我无法使用它。

我在 Windows 2008 服务器上的 xampp 上安装了 phpvideotoolkit。但它正在引发错误

```
This example shows you how to extract a specific frame from a movie.

Notice: Undefined property: PHPVideoToolkit::$_tmb_directory in C:\xampp\htdocs\phpvideo\phpvideotoolkit.php5.php on line 869

Notice: Undefined offset: 0 in C:\xampp\htdocs\phpvideo\phpvideotoolkit.php5.php on line 877
PHPVideoToolkit Error: Execute error. Output for file "C:\xampp\htdocs\phpvideo\examples\working\to-be-processed\MOV00007.3gp" was not found. No images were generated.

Notice: Undefined property: PHPVideoToolkit::$_tmb_directory in C:\xampp\htdocs\phpvideo\phpvideotoolkit.php5.php on line 869

Notice: Undefined offset: 0 in C:\xampp\htdocs\phpvideo\phpvideotoolkit.php5.php on line 877
PHPVideoToolkit Error: Execute error. Output for file "C:\xampp\htdocs\phpvideo\examples\working\to-be-processed\Video000.3gp" was not found. No images were generated.

Notice: Undefined property: PHPVideoToolkit::$_tmb_directory in C:\xampp\htdocs\phpvideo\phpvideotoolkit.php5.php on line 869

Notice: Undefined offset: 0 in C:\xampp\htdocs\phpvideo\phpvideotoolkit.php5.php on line 877
PHPVideoToolkit Error: Execute error. Output for file "C:\xampp\htdocs\phpvideo\examples\working\to-be-processed\cat.mpeg" was not found. No images were generated. 
```

例子

```
PHPVideoToolkit Error: Execute error. Output for file "C:\xampp\htdocs\phpvideo\examples\working\tmp\1336156630-4fa421d69357d\tmp_%d.jpg" was not found. Please check server write permissions and/or available codecs compiled with FFmpeg. You can check the encode decode availability by inspecting the output array from PHPVideoToolkit::getFFmpegInfo(). 
```

我试图让它从过去几个小时开始工作，但没有运气

此外，对于此代码：

```
$srcFile = "test-mpeg.mpg";
$ffmpegObj = new ffmpeg_movie($srcFile); 
```

我遇到错误，它无法归档文件。我相信它与权限有关，但我无法弄清楚

fpoen ， fwrite ， file_put_contents 都工作正常，没有任何权限问题。

任何人都可以请指导我的写作方向。我需要做什么才能使这个 phpvideotoolkit 工作

# c# - 使用 Visual Studio 2010 安装项目安装后启动应用程序

> ID：10448196
> 
> 赞同：0
> 
> 时间：2012-05-04T11:43:49.720
> 
> 标签：c#, visual-studio-2010

我点击了这个链接[http://www.codeproject.com/Articles/19560/Launching-Your-Application-After-Install-using-Vis](http://www.codeproject.com/Articles/19560/Launching-Your-Application-After-Install-using-Vis) & 它为我的问题提供了很好的指导。但在我的场景中，我还有一个包含 exe 的文件夹。安装后我的 exe 开始运行。但它没有与我的文件夹中的内容正确链接，该文件夹也位于同一位置。如何将该文件夹链接到我的 exe。

问题是我将文件夹及其内容都添加到了安装项目向导给出的应用程序文件夹目录中。但是我只能将 exe 添加到提交文件夹中，因为我希望我的 exe 在单击第一个初始 exe 后运行。在第一次安装后，我的 exe 和文件夹都会创建，当我手动单击 exe 时它会起作用。但在安装时它只复制 exe 和文件夹并开始运行复制的 exe 但无法正确找到该文件夹​​。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:24:27.577

作为提交操作启动时，您的 exe 的工作目录将有所不同。

您要么需要[更改 exe 中的工作目录](http://msdn.microsoft.com/en-us/library/system.io.directory.setcurrentdirectory.aspx)，要么需要为要查找的文件夹构建绝对路径。

您可以通过设置将应用程序路径从安装程序传递给您的 exe `CustomActionData`，`'[TARGETDIR]\'`或者在运行时从 exe 路径中提取它，例如：

```
string exepath = Path.GetDirectoryName(Environment.GetCommandLineArgs()[0]);
string abspath = Path.Combine(exepath, "yoursubfolder"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:48:42.817

我想这就是你想要的

[http://blogs.msdn.com/b/astebner/archive/2006/08/12/696833.aspx](http://blogs.msdn.com/b/astebner/archive/2006/08/12/696833.aspx)

# objective-c - 用 OpenUDID 替换 UDID 是个好方法吗？

> ID：10448197
> 
> 赞同：6
> 
> 时间：2012-05-04T11:43:57.693
> 
> 标签：objective-c, ios, udid

所以苹果拒绝使用 UDID 的应用程序。有很多关于此的帖子，但我找不到写在哪里使用 OpenUDID 很好。

所以也许有人知道苹果是否会批准这个？如果 OpenUDID 具有 UDID 的所有功能？

也许有人正在使用这种方法并且可以解释更多？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-24T06:49:28.983

似乎最简单的解决方案就是生成自己的 UUID：

```
NSString *UUID() {
    CFUUIDRef cfuuid = CFUUIDCreate(NULL); 
    NSString *uuid =  (__bridge_transfer NSString *)CFUUIDCreateString(NULL, cfuuid); 
    CFRelease(cfuuid);
    return uuid;
} 
```

如果您需要在卸载/安装周期中保留它，请将其放入钥匙串中，如下所述：[https ://stackoverflow.com/a/11597291/382374](https://stackoverflow.com/a/11597291/382374)

最棒的是，这就是 Apple 建议您这样做的方式。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-24T06:28:16.027

我们根据设备 MAC 地址和捆绑标识符的散列创建自己的 UDID。这确保了我们可以在特定设备上唯一标识我们的应用程序。

如果您需要跨多个应用程序的唯一 ID，您也可以仅基于 MAC 地址创建哈希。

我实际上已经写了一篇关于如何做到这一点的博客文章，并在此处提供了一些示例代码：

[https://radeeccles.com/blog/create-your-own-unique-device-identifier-udid](https://radeeccles.com/blog/create-your-own-unique-device-identifier-udid)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-08T12:43:23.893

据我所知，这是一个好方法。同样，SecureUDID 也是做同样事情的人。通过使用 OpenUDID，即使重新启动应用程序或重新安装应用程序，UDID 也不会改变。但是如果你更改任何输入值，如 kOpenUDIDDomain 或 kOpenUDIDSlotPBPrefix，那么它会生成新的 UDID。基于它的名称生成并存储到 PasteBoard 中。如果您重置设备也仍然相同。我个人对此投票。

# python - 如何使用 python argparse 解析多个嵌套的子命令？

> ID：10448200
> 
> 赞同：98
> 
> 时间：2012-05-04T11:44:04.750
> 
> 标签：python, command-line-arguments, argparse

我正在实现一个具有如下界面的命令行程序：

```
cmd [GLOBAL_OPTIONS] {command [COMMAND_OPTS]} [{command [COMMAND_OPTS]} ...] 
```

我已经阅读了[argparse 文档](http://docs.python.org/dev/library/argparse.html)。我可以使用in`GLOBAL_OPTIONS`作为可选参数来实现。以及使用[子命令](http://docs.python.org/dev/library/argparse.html#sub-commands)。`add_argument``argparse``{command [COMMAND_OPTS]}`

从文档看来，我只能有一个子命令。但正如您所见，我必须实现一个或多个子命令。使用解析此类命令行参数的最佳方法是什么`argparse`？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-10-20T10:15:50.590

我想出了同样的问题，似乎我得到了更好的答案。

解决方案是我们不能简单地将 subparser 与另一个 subparser 嵌套，而是我们可以在 subparser 之后添加一个 parser 跟在另一个 subparser 之后。

代码告诉你如何：

```
parent_parser = argparse.ArgumentParser(add_help=False)
parent_parser.add_argument('--user', '-u',
                    default=getpass.getuser(),
                    help='username')
parent_parser.add_argument('--debug', default=False, required=False,
                        action='store_true', dest="debug", help='debug flag')
main_parser = argparse.ArgumentParser()
service_subparsers = main_parser.add_subparsers(title="service",
                    dest="service_command")
service_parser = service_subparsers.add_parser("first", help="first",
                    parents=[parent_parser])
action_subparser = service_parser.add_subparsers(title="action",
                    dest="action_command")
action_parser = action_subparser.add_parser("second", help="second",
                    parents=[parent_parser])

args = main_parser.parse_args() 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-05-14T08:36:57.237

@mgilson 对这个问题有一个很好的[答案](https://stackoverflow.com/a/10449310/446386)。但是我自己拆分 sys.argv 的问题是我丢失了 Argparse 为用户生成的所有很好的帮助消息。所以我最终这样做了：

```
import argparse

## This function takes the 'extra' attribute from global namespace and re-parses it to create separate namespaces for all other chained commands.
def parse_extra (parser, namespace):
  namespaces = []
  extra = namespace.extra
  while extra:
    n = parser.parse_args(extra)
    extra = n.extra
    namespaces.append(n)

  return namespaces

argparser=argparse.ArgumentParser()
subparsers = argparser.add_subparsers(help='sub-command help', dest='subparser_name')

parser_a = subparsers.add_parser('command_a', help = "command_a help")
## Setup options for parser_a

## Add nargs="*" for zero or more other commands
argparser.add_argument('extra', nargs = "*", help = 'Other commands')

## Do similar stuff for other sub-parsers 
```

现在，在第一次解析之后，所有链式命令都存储在`extra`. 我重新解析它，同时获取所有链式命令并为它们创建单独的命名空间。我得到了 argparse 生成的更好的使用字符串。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2013-10-20T18:19:53.273

`parse_known_args`返回一个命名空间和一个未知字符串列表。这类似于`extra`检查的答案。

```
import argparse
parser = argparse.ArgumentParser()
parser.add_argument('--foo')
sub = parser.add_subparsers()
for i in range(1,4):
    sp = sub.add_parser('cmd%i'%i)
    sp.add_argument('--foo%i'%i) # optionals have to be distinct

rest = '--foo 0 cmd2 --foo2 2 cmd3 --foo3 3 cmd1 --foo1 1'.split() # or sys.argv
args = argparse.Namespace()
while rest:
    args,rest =  parser.parse_known_args(rest,namespace=args)
    print args, rest 
```

产生：

```
Namespace(foo='0', foo2='2') ['cmd3', '--foo3', '3', 'cmd1', '--foo1', '1']
Namespace(foo='0', foo2='2', foo3='3') ['cmd1', '--foo1', '1']
Namespace(foo='0', foo1='1', foo2='2', foo3='3') [] 
```

另一个循环将为每个子解析器提供自己的名称空间。这允许位置名称重叠。

```
argslist = []
while rest:
    args,rest =  parser.parse_known_args(rest)
    argslist.append(args) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-04-23T09:33:12.600

@Vikas 提供的解决方案对于特定于子命令的可选参数失败，但该方法是有效的。这是一个改进的版本：

```
import argparse

# create the top-level parser
parser = argparse.ArgumentParser(prog='PROG')
parser.add_argument('--foo', action='store_true', help='foo help')
subparsers = parser.add_subparsers(help='sub-command help', dest='subparser_name')

# create the parser for the "command_a" command
parser_a = subparsers.add_parser('command_a', help='command_a help')
parser_a.add_argument('bar', type=int, help='bar help')

# create the parser for the "command_b" command
parser_b = subparsers.add_parser('command_b', help='command_b help')
parser_b.add_argument('--baz', choices='XYZ', help='baz help')

# parse some argument lists
argv = ['--foo', 'command_a', '12', 'command_b', '--baz', 'Z']
while argv:
    print(argv)
    options, argv = parser.parse_known_args(argv)
    print(options)
    if not options.subparser_name:
        break 
```

这使用`parse_known_args`而不是`parse_args`. `parse_args`一旦遇到当前子解析器未知的参数，就会中止，`parse_known_args`将它们作为返回元组中的第二个值返回。在这种方法中，剩余的参数被再次提供给解析器。因此，对于每个命令，都会创建一个新的命名空间。

请注意，在这个基本示例中，所有全局选项仅添加到第一个选项命名空间，而不是后续命名空间。

这种方法适用于大多数情况，但有三个重要限制：

*   不能对不同的子命令使用相同的可选参数，例如`myprog.py command_a --foo=bar command_b --foo=bar`.
*   不能将任何可变长度的位置参数与子命令 ( `nargs='?'`or`nargs='+'`或`nargs='*'`) 一起使用。
*   解析任何已知参数，而不会在新命令处“中断”。例如，`PROG --foo command_b command_a --baz Z 12`在上面的代码中，`--baz Z`将被 消耗`command_b`，而不是`command_a`。

这些限制是 argparse 的直接限制。这是一个简单的示例，它显示了 argparse 的局限性——即使使用单个子命令——：

```
import argparse

parser = argparse.ArgumentParser()
parser.add_argument('spam', nargs='?')
subparsers = parser.add_subparsers(help='sub-command help', dest='subparser_name')

# create the parser for the "command_a" command
parser_a = subparsers.add_parser('command_a', help='command_a help')
parser_a.add_argument('bar', type=int, help='bar help')

# create the parser for the "command_b" command
parser_b = subparsers.add_parser('command_b', help='command_b help')

options = parser.parse_args('command_a 42'.split())
print(options) 
```

这将提高`error: argument subparser_name: invalid choice: '42' (choose from 'command_a', 'command_b')`.

原因是内部方法`argparse.ArgParser._parse_known_args()`过于贪婪，并假定这`command_a`是可选`spam`参数的值。特别是，当“拆分”可选参数和位置参数时，`_parse_known_args()`不查看参数的名称（如`command_a`or `command_b`），而只查看它们在参数列表中的出现位置。它还假定任何子命令都将使用所有剩余的参数。这种限制`argparse`也妨碍了多命令子解析器的正确实现。不幸的是，这意味着正确的实现需要完全重写该`argparse.ArgParser._parse_known_args()`方法，即 200 多行代码。

鉴于这些限制，可以选择简单地恢复为单个多选参数而不是子命令：

```
import argparse

parser = argparse.ArgumentParser()
parser.add_argument('--bar', type=int, help='bar help')
parser.add_argument('commands', nargs='*', metavar='COMMAND',
                 choices=['command_a', 'command_b'])

options = parser.parse_args('--bar 2 command_a command_b'.split())
print(options)
#options = parser.parse_args(['--help']) 
```

甚至可以在使用信息中列出不同的命令，见我的回答[https://stackoverflow.com/a/49999185/428542](https://stackoverflow.com/a/49999185/428542)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-04T13:00:16.373

您始终可以自己拆分命令行（`sys.argv`根据您的命令名称拆分），然后只将与特定命令对应的部分传递给`parse_args`-- 如果您愿意，您甚至可以`Namespace`使用命名空间关键字来使用相同的部分。

使用以下命令对命令行进行分组很容易`itertools.groupby`：

```
import sys
import itertools
import argparse    

mycommands=['cmd1','cmd2','cmd3']

def groupargs(arg,currentarg=[None]):
    if(arg in mycommands):currentarg[0]=arg
    return currentarg[0]

commandlines=[list(args) for cmd,args in intertools.groupby(sys.argv,groupargs)]

#setup parser here...
parser=argparse.ArgumentParser()
#...

namespace=argparse.Namespace()
for cmdline in commandlines:
    parser.parse_args(cmdline,namespace=namespace)

#Now do something with namespace... 
```

*未经测试*

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-05-11T23:57:36.373

改进了@mgilson 的答案，我编写了一个小的解析方法，它将 argv 拆分为多个部分，并将命令的参数值放入命名空间的层次结构中：

```
import sys
import argparse

def parse_args(parser, commands):
    # Divide argv by commands
    split_argv = [[]]
    for c in sys.argv[1:]:
        if c in commands.choices:
            split_argv.append([c])
        else:
            split_argv[-1].append(c)
    # Initialize namespace
    args = argparse.Namespace()
    for c in commands.choices:
        setattr(args, c, None)
    # Parse each command
    parser.parse_args(split_argv[0], namespace=args)  # Without command
    for argv in split_argv[1:]:  # Commands
        n = argparse.Namespace()
        setattr(args, argv[0], n)
        parser.parse_args(argv, namespace=n)
    return args

parser = argparse.ArgumentParser()
commands = parser.add_subparsers(title='sub-commands')

cmd1_parser = commands.add_parser('cmd1')
cmd1_parser.add_argument('--foo')

cmd2_parser = commands.add_parser('cmd2')
cmd2_parser.add_argument('--foo')

cmd2_parser = commands.add_parser('cmd3')
cmd2_parser.add_argument('--foo')

args = parse_args(parser, commands)
print(args) 
```

它运行正常，提供了很好的 argparse 帮助：

对于`./test.py --help`：

```
usage: test.py [-h] {cmd1,cmd2,cmd3} ...

optional arguments:
  -h, --help        show this help message and exit

sub-commands:
  {cmd1,cmd2,cmd3} 
```

对于`./test.py cmd1 --help`：

```
usage: test.py cmd1 [-h] [--foo FOO]

optional arguments:
  -h, --help  show this help message and exit
  --foo FOO 
```

并创建包含参数值的命名空间层次结构：

```
./test.py cmd1 --foo 3 cmd3 --foo 4
Namespace(cmd1=Namespace(foo='3'), cmd2=None, cmd3=Namespace(foo='4')) 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-07-28T18:29:42.023

你可以试试[arghandler](https://github.com/druths/arghandler)。这是对 argparse 的扩展，显式支持子命令。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-11-16T14:51:00.043

[使用subparsers](https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser.add_subparsers)构建了一个完整的 Python 2/3 示例，[`parse_known_args`](https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser.parse_known_args)并且[`parse_args`](https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser.parse_args)（[在 IDEone 上运行](https://ideone.com/sjfZY7)）：

```
from __future__ import print_function

from argparse import ArgumentParser
from random import randint

def main():
    parser = get_parser()

    input_sum_cmd = ['sum_cmd', '--sum']
    input_min_cmd = ['min_cmd', '--min']

    args, rest = parser.parse_known_args(
        # `sum`
        input_sum_cmd +
        ['-a', str(randint(21, 30)),
         '-b', str(randint(51, 80))] +
        # `min`
        input_min_cmd +
        ['-y', str(float(randint(64, 79))),
         '-z', str(float(randint(91, 120)) + .5)]
    )

    print('args:\t ', args,
          '\nrest:\t ', rest, '\n', sep='')

    sum_cmd_result = args.sm((args.a, args.b))
    print(
        'a:\t\t {:02d}\n'.format(args.a),
        'b:\t\t {:02d}\n'.format(args.b),
        'sum_cmd: {:02d}\n'.format(sum_cmd_result), sep='')

    assert rest[0] == 'min_cmd'
    args = parser.parse_args(rest)
    min_cmd_result = args.mn((args.y, args.z))
    print(
        'y:\t\t {:05.2f}\n'.format(args.y),
        'z:\t\t {:05.2f}\n'.format(args.z),
        'min_cmd: {:05.2f}'.format(min_cmd_result), sep='')

def get_parser():
    # create the top-level parser
    parser = ArgumentParser(prog='PROG')
    subparsers = parser.add_subparsers(help='sub-command help')

    # create the parser for the "sum" command
    parser_a = subparsers.add_parser('sum_cmd', help='sum some integers')
    parser_a.add_argument('-a', type=int,
                          help='an integer for the accumulator')
    parser_a.add_argument('-b', type=int,
                          help='an integer for the accumulator')
    parser_a.add_argument('--sum', dest='sm', action='store_const',
                          const=sum, default=max,
                          help='sum the integers (default: find the max)')

    # create the parser for the "min" command
    parser_b = subparsers.add_parser('min_cmd', help='min some integers')
    parser_b.add_argument('-y', type=float,
                          help='an float for the accumulator')
    parser_b.add_argument('-z', type=float,
                          help='an float for the accumulator')
    parser_b.add_argument('--min', dest='mn', action='store_const',
                          const=min, default=0,
                          help='smallest integer (default: 0)')
    return parser

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-09-15T12:55:45.397

我或多或少有相同的要求：能够设置全局参数并能够链接命令并按**command line 的顺序执行它们**。

我最终得到了以下代码。我确实使用了这个线程和其他线程的部分代码。

```
# argtest.py
import sys
import argparse

def init_args():

    def parse_args_into_namespaces(parser, commands):
        '''
        Split all command arguments (without prefix, like --) in
        own namespaces. Each command accepts extra options for
        configuration.
        Example: `add 2 mul 5 --repeat 3` could be used to a sequencial
                 addition of 2, then multiply with 5 repeated 3 times.
        '''
        class OrderNamespace(argparse.Namespace):
            '''
            Add `command_order` attribute - a list of command
            in order on the command line. This allows sequencial
            processing of arguments.
            '''
            globals = None
            def __init__(self, **kwargs):
                self.command_order = []
                super(OrderNamespace, self).__init__(**kwargs)

            def __setattr__(self, attr, value):
                attr = attr.replace('-', '_')
                if value and attr not in self.command_order:
                    self.command_order.append(attr)
                super(OrderNamespace, self).__setattr__(attr, value)

        # Divide argv by commands
        split_argv = [[]]
        for c in sys.argv[1:]:
            if c in commands.choices:
                split_argv.append([c])
            else:
                split_argv[-1].append(c)

        # Globals arguments without commands
        args = OrderNamespace()
        cmd, args_raw = 'globals', split_argv.pop(0)
        args_parsed = parser.parse_args(args_raw, namespace=OrderNamespace())
        setattr(args, cmd, args_parsed)

        # Split all commands to separate namespace
        pos = 0
        while len(split_argv):
            pos += 1
            cmd, *args_raw = split_argv.pop(0)
            assert cmd[0].isalpha(), 'Command must start with a letter.'
            args_parsed = commands.choices[cmd].parse_args(args_raw, namespace=OrderNamespace())
            setattr(args, f'{cmd}~{pos}', args_parsed)

        return args

    #
    # Supported commands and options
    #
    parser = argparse.ArgumentParser(formatter_class=argparse.ArgumentDefaultsHelpFormatter)

    parser.add_argument('--print', action='store_true')

    commands = parser.add_subparsers(title='Operation chain')

    cmd1_parser = commands.add_parser('add', formatter_class=argparse.ArgumentDefaultsHelpFormatter)
    cmd1_parser.add_argument('add', help='Add this number.', type=float)
    cmd1_parser.add_argument('-r', '--repeat', help='Repeat this operation N times.',
                                               default=1, type=int)

    cmd2_parser = commands.add_parser('mult', formatter_class=argparse.ArgumentDefaultsHelpFormatter)
    cmd2_parser.add_argument('mult', help='Multiply with this number.', type=float)
    cmd2_parser.add_argument('-r', '--repeat', help='Repeat this operation N times.',
                                               default=1, type=int)

    args = parse_args_into_namespaces(parser, commands)
    return args

#
# DEMO
#

args = init_args()

# print('Parsed arguments:')
# for cmd in args.command_order:
#     namespace = getattr(args, cmd)
#     for option_name in namespace.command_order:
#         option_value = getattr(namespace, option_name)
#         print((cmd, option_name, option_value))

print('Execution:')
result = 0
for cmd in args.command_order:
    namespace = getattr(args, cmd)
    cmd_name, cmd_position = cmd.split('~') if cmd.find('~') > -1 else (cmd, 0)
    if cmd_name == 'globals':
        pass
    elif cmd_name == 'add':
        for r in range(namespace.repeat):
            if args.globals.print:
                print(f'+ {namespace.add}')
            result = result + namespace.add
    elif cmd_name == 'mult':
        for r in range(namespace.repeat):
            if args.globals.print:
                print(f'* {namespace.mult}')
            result = result * namespace.mult
    else:
        raise NotImplementedError(f'Namespace `{cmd}` is not implemented.')
print(10*'-')
print(result) 
```

下面是一个例子：

```
$ python argstest.py --print add 1 -r 2 mult 5 add 3 mult -r 5 5

Execution:
+ 1.0
+ 1.0
* 5.0
+ 3.0
* 5.0
* 5.0
* 5.0
* 5.0
* 5.0
----------
40625.0 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-11-28T12:21:52.190

另一个支持并行解析器的包是“declarative_parser”。

```
import argparse
from declarative_parser import Parser, Argument

supported_formats = ['png', 'jpeg', 'gif']

class InputParser(Parser):
    path = Argument(type=argparse.FileType('rb'), optional=False)
    format = Argument(default='png', choices=supported_formats)

class OutputParser(Parser):
    format = Argument(default='jpeg', choices=supported_formats)

class ImageConverter(Parser):
    description = 'This app converts images'

    verbose = Argument(action='store_true')
    input = InputParser()
    output = OutputParser()

parser = ImageConverter()

commands = '--verbose input image.jpeg --format jpeg output --format gif'.split()

namespace = parser.parse_args(commands) 
```

命名空间变为：

```
Namespace(
    input=Namespace(format='jpeg', path=<_io.BufferedReader name='image.jpeg'>),
    output=Namespace(format='gif'),
    verbose=True
) 
```

免责声明：我是作者。需要 Python 3.6。要安装使用：

```
pip3 install declarative_parser 
```

这是[文档](http://declarative-parser.readthedocs.io/en/latest/)，这里是[GitHub 上的 repo](https://github.com/krassowski/declarative-parser)。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-01-10T11:42:20.350

为了解析子命令，我使用了以下（引用自 argparse.py 代码）。它解析子解析器参数并保留两者的帮助。没有额外的东西通过那里。

```
args, _ = parser.parse_known_args() 
```

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2012-05-04T13:23:09.743

你可以使用包 optparse

```
import optparse
parser = optparse.OptionParser()
parser.add_option("-f", dest="filename", help="corpus filename")
parser.add_option("--alpha", dest="alpha", type="float", help="parameter alpha", default=0.5)
(options, args) = parser.parse_args()
fname = options.filename
alpha = options.alpha 
```

# php - 从存储过程中获取输出参数

> ID：10448203
> 
> 赞同：1
> 
> 时间：2012-05-04T11:44:10.480
> 
> 标签：php, sql-server, stored-procedures

我试图让存储过程触发并返回输出参数以及结果集。目前我只是得到一个带有输出参数应该是 balnk 变量的结果集数组。

```
//initiate function
    $proc = mssql_init('usp_Web_Return_Installer_Details', $msdb); 

    $enrolledScopes = '';

    mssql_bind($proc, '@InstallerID', $_SESSION['user']['Installer_ID'], SQLINT4, false, false, 10);

    mssql_bind($proc, '@EnrolledScopes', &$enrolledScopes, SQLVARCHAR, true, true, 5000); 

    //Execute Procedure 
    $result = mssql_execute($proc); 

    do {
    while ($row = mssql_fetch_assoc($result)){
        $results[] = $row;    
        }
    } while (mssql_next_result($result));

    //Free Memory 
    mssql_free_statement($proc); 

    print_r($result); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:52:33.673

您需要`mssql_bind`从存储过程中添加输出参数

```
mssql_bind($stmt, "@outParam", &$outParam, true) 
```

所以，`$outParam`是你的结果。

# hadoop - 如何根据用于提高性能的实例数增加 hadoop 中的映射器和缩减器？

> ID：10448204
> 
> 赞同：0
> 
> 时间：2012-05-04T11:44:12.557
> 
> 标签：hadoop, mapper, reducers

如果我增加映射器的数量并减少减速器的数量，那么执行时任何作业的性能（增加/减少）是否有任何差异？

另外我想问一下如何设置映射器和减速器的数量？我从来没有玩过这个设置，这就是为什么我不知道这个。我知道 hadoop，但我有代码，因为我经常使用 Hive。

此外，如果我想增加映射器和化简器的数量，那么如何设置它以及设置它的值是多少。它是否取决于实例的数量（比如说 10 个）？

请回复我我想试试这个并检查性能。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-16T22:29:21.643

您可以根据块大小和拆分大小增加映射器的数量。最简单的方法之一是减小拆分大小，如下所示：

```
Configuration conf= new Cofiguration();
//set the value that increases your number of splits.
conf.set("mapred.max.split.size", "1020");
Job job = new Job(conf, "My job name"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-06T07:53:55.083

更改映射器的数量 - 是纯粹的优化，不应该影响结果。您应该设置 number 以充分利用您的集群（如果它是专用的）。尝试每个节点的映射器数量等于核心数量。查看 CPU 利用率，并增加数量，直到 CPU 利用率几乎达到满，或者系统开始交换。如果您没有足够的内存，您可能需要更少的映射器然后内核。
减速器的数量会影响结果，因此，如果您需要特定数量的减速器（如 1）- 设置它
如果您可以处理任意数量的减速器的结果 - 进行与 Mappers 相同的优化。
从理论上讲，您可以在此调整过程中成为 IO 绑定 - 在调整任务数量时也要注意这一点。尽管映射器/减速器数量增加，但您可以通过低 CPU 利用率来识别它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T22:27:11.047

我通过修改尝试了@Animesh Raj Jha 的建议，`mapred.max.split.size`并获得了显着的性能提升。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-29T10:24:37.807

我正在使用 hadoop 2.2，并且不知道如何设置最大输入拆分大小我想减小这个值，以便创建更多映射器我尝试更新 yarn-site.xml，但它不起作用

确实，hadoop 2.2 /yarn 不采用以下设置

```
<property>
<name>mapreduce.input.fileinputformat.split.minsize</name>
<value>1</value>
</property>
<property>
<name>mapreduce.input.fileinputformat.split.maxsiz e</name>
<value>16777216</value>
</property>

<property>
<name>mapred.min.split.size</name>
<value>1</value>
</property>
<property>
<name>mapred.max.split.size</name>
<value>16777216</value>
</property> 
```

最好的

# php - PHP循环多维数组

> ID：10448208
> 
> 赞同：2
> 
> 时间：2012-05-04T11:44:40.460
> 
> 标签：php, arrays, loops, multidimensional-array

不完全确定如何适当地命名这个问题，但它需要遍历嵌套在数组中的任何数组，其中也可能是任何其他数组的元素 - 等等。最初，我认为需要标记哪些数组尚未循环，哪些数组已经循环，以完全循环“基本”数组（尽管了解到这不是必需的，而且 PHP 以某种方式任意执行此操作） . 这个问题似乎有点奇怪——如果省略了用于测试该值是否未找到的条件子句，则该函数将在任何地方找到嵌套在数组中的值，反之亦然。无论如何，功能如下：

```
function loop($arr, $find) {
  for($i=0;$i<count($arr);$i++) {
    if($arr[$i] == $find) {
      print "Found $find";
      return true;
    } else {
      if(is_array($arr[$i])) {
         $this->loop($arr[$i], $find);
      } else {
         print "Couldn't find $find";
         return false;
      }
    }
   }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:54:43.283

也许您应该将代码更改为：

```
var $found = false;
function loop($arr, $find) {
  foreach($arr as $k=>$v){
    if($find==$v){
      $this->found = true;
    }elseif(is_array($v)){
      $this->loop($v, $find);
    }
  }
  return $this->found;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:49:04.693

试试这个：[PHP foreach 循环遍历多维数组](https://stackoverflow.com/questions/842956/php-foreach-loop-through-multidimensional-array)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:51:26.463

这已经为我工作了一段时间。

```
function array_search_key( $needle_key, $array ) {
  foreach($array AS $key=>$value){
    if($key == $needle_key) return $value;
    if(is_array($value)){
      if( ($result = array_search_key($needle_key,$value)) !== false)
        return $result;
    }
  }
  return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T11:54:49.710

好的，稍微修改一下怎么样：

```
function loop($arr, $find) {
    for($i=0;$i<count($arr);$i++) {
        if(is_array($arr[$i])) {
            $this->loop($arr[$i], $find);
        } else {
            if($arr[$i] == $find) {
                print "Found $find";
                return true;
            }
        }
    }
    return false;
} 
```

唔？

# iphone - iPhone中两次之间的时差

> ID：10448211
> 
> 赞同：1
> 
> 时间：2012-05-04T11:44:58.057
> 
> 标签：iphone, ipad, sqlite, date

我有两次：

10:23:51
10:31:54

这两个值都作为字符串存储在 SQLite 数据库中。

我想以 hh:mm 格式找到这两次之间的区别。
我怎样才能做到这一点？

我已经搜索了很多。但找不到合适的解决方案。帮帮我。谢谢。

**编辑：** 基本上看我有两个数组：
`InTimeArray`和`OuttimeArray`. 现在在`viewDidload`方法中，我正在获取数组`intime`中的所有条目`IntimeArray`和`Outtime`条目。`outtime`

现在我像第一行一样在 tableview 中一个一个地传递值

```
 IntimeArray[0]
 OuyTimeArray[0] 
```

第二行：

```
 IntimeArray[1]
 OuyTimeArray[1] 
```

现在我想计算第一行`intime`和`outtime`HH:MM 格式之间的差异。
我真的很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:01:01.207

你可以看看：

```
-(NSDate *)dateFromString:(NSString *)string
{
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
[dateFormat setLocale:locale];
[dateFormat setDateFormat:@"HH:mm:ss"];

NSDate *date1 = [dateFormat dateFromString:string];  
if(!date1) date1= [NSDate date];
[dateFormat release];
[locale release];

return date1;
} 
```

这会将 NSDate 转给您，当您将它们都更改为 NSDate 时，您可以通过查看来了解[差异](https://stackoverflow.com/questions/5562594/difference-between-two-nsdate-objects-result-also-a-nsdate)。

我希望这能帮到您..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:06:54.680

您必须首先使用此方法将两个字符串更改为日期格式：-

```
- (NSDate *)dateFromString:(NSString *)string; 
```

之后你只需要计算两个日期之间的秒数。就是这样。

**或者**还有另一种简单的方法可以做到这一点。IE

首先从两个数组中获取日期，如下所示：-

```
NSDate *eventStartDate = [IntimeArray objectAtIndex:indexpath.row];

NSDate *eventEndDate = [OuyTimeArray objectAtIndex:indexpath.row]; 
```

然后像这样计算两个日期之间的差异：-

```
NSTimeInterval startTimeInterval = [eventStartDate timeIntervalSinceDate:currentDate]; 
```

希望对您有所帮助谢谢:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:59:06.727

尝试这个：

```
NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
[formatter setDateFormat:@"HH:mm:ss"];

NSDate *d1 = [formatter dateFromString:IntimeArray[0]];
NSDate *d2 = [formatter dateFromString:OuyTimeArray[0]];

NSTimeInterval ti = [d2 timeIntervalSinceDate:d1];
float hours = floor(ti / 3600);
float minutes = floor((ti - hours*3600) / 60);

NSString *s = [NSString stringWithFormat:@"%02.0f:%02.0f",hours,minutes]; 
```

对于您给定的示例，`NSLog(@"Time passed: %@",s);`将打印`00:08`.

# reporting-services - 表格中的报告结构

> ID：10448212
> 
> 赞同：0
> 
> 时间：2012-05-04T11:44:58.967
> 
> 标签：reporting-services, ssrs-2008

我有一个有很多报告的大型项目，但是报告中的项目非常标准，可以通过参数重复使用。所以我做了子报告，没关系。现在我通过手动向它们添加子报表以及手动设置参数来组装报表。

我认为这不够灵活，我想要一个定义报表结构的表：就像每个子报表一行，指定名称及其参数值。然后，通过按名称调用和插入子报表，报表将在运行时以列表或类似的方式组合在一起。

有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T20:48:44.690

我想不出一种方法来动态组装这样的报告，而无需编写会生成所需 RDL 的代码，将其上传到报告服务器然后执行报告。

另一种选择可能是创建一个主报告，其中包含所有可能的子报告。然后，您可以使用表格来控制每个子报表的可见性，以模拟生成不同的报表。显然，您不想对隐藏的子报表执行长时间运行的查询，因此您必须向所有子报表添加一个参数，以便如果子报表被隐藏，则数据集不返回任何数据，例如

```
WHERE
(....) OR (@SubReportHidden = 'Hidden' AND 1=0) 
```

# html - 具有可变间距的基于 UL 的液体水平菜单

> ID：10448215
> 
> 赞同：1
> 
> 时间：2012-05-04T11:45:14.397
> 
> 标签：html, css, layout, spacing, alignment

前注：这不是重复的。我检查了几个问题，但我的细节有所不同。

我目前在网页上有这样的水平导航菜单： ![水平菜单](../Images/aebc5b884efd95a542d327a0adb2a629.png)

菜单是一个 ul 元素。问题是目前我必须明确指定边距以获取 li 之间的间距。我希望间距尽可能为 60px，但只要浏览器缩小并且不再允许如此大的菜单间距，就缩小。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:04:07.597

我认为您正在寻找超级圣洁的 Uber-Grail。我可能错了，但我认为单独使用 CSS 是不可能的。这是因为没有像 max-width 这样的 max-margin 。如果你使用 JS（例如 jQuery）你会有一种定位的跳跃，因为 JS 必须等到页面加载并准备好然后开始计算宽度值。

如果你愿意做一些不同的事情。我建议您定义与窗口大小相结合的整个导航的最大宽度，然后在现代浏览器中使用 CSS flex。如果您使用 modernizr.com，您可以在 IE8 的 CSS 中进行分支，并改用 display:table、table-row、table-cell。对于 IE7，您只需使用浮点数。

为什么不在现代浏览器中使用 display:table？我可能看起来一样，但元素之间的边距增益在 flex 和 table 中不同。虽然在 flex 中元素之间的间隙是绝对相同的（意味着像素方面），但它们在表格中是相对相同的（意味着更宽的表格单元格比窄的单元格获得更多的空间）

```
table
+--------------------------------+---------+
|      wide content in here      |  short  |
+--------------------------------+---------+
   6px                       6px  2px    2px

flex
+----------------------------+-------------+
|    wide content in here    |    short    |
+----------------------------+-------------+
  4px                     4px 4px       4px 
```

# jquery - 删除动态添加的元素

> ID：10448218
> 
> 赞同：0
> 
> 时间：2012-05-04T11:45:17.690
> 
> 标签：jquery

我有一些代码；

```
(function($) {

    $('nav.top ul li').hover(function() {

        $(this).addClass('active').append('<span class="rightImage"></span>').prepend('<span class="leftImage"></span>');

    });
})(jQuery); 
```

结合使用时效果很好；

```
 <nav class="top">
        <ul>
            <li>
                <a href="index.php">Home</a>
            </li>
            <li>
                <a href="events.php">Events</a>
            </li>
            <li>
                <a href="marketingguidance.php">Marketing</a>
            </li>
            <li>
                <a href="news.php">News</a>
            </li>
            <li>
                <a href="salestoolkit.php">Sales</a>
            </li>
        </ul>
    </nav> 
```

但是我遇到了一个问题，当我鼠标悬停时，我不确定删除或分离 .active 和两个 span 类的最佳方法是什么。

我试过添加`$(this).remove()`，但这是从 dom 中删除列表项。

我怎样才能删除在原始代码中添加的效果（ addClass()、append() 和 prepend() ）？

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:50:40.973

也许你可以使用`mouseover()`and`mouseout()`而不是`hover()`，并尝试这样的事情：

```
$('nav.top ul li').mouseover(function() {
    $(this).addClass('active').append('<span class="rightImage"></span>').prepend('<span class="leftImage"></span>');
});

$('nav.top ul li').mouseout(function() {
    $(this).removeClass('active').children("span").remove();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T11:47:43.957

试试，鼠标悬停

```
$(this).removeClass("active").children("span").remove(); 
```

[jsFiddle](http://jsfiddle.net/9zqsZ/13/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T11:53:26.000

如果标签中没有任何其他跨度，则可以通过添加 mouseleave 处理程序来简单地完成 .hover 参数，如下所示：

```
$('nav.top ul li').hover(
    function() {
        $(this).addClass('active')
               .append('<span class="rightImage"></span>')
               .prepend('<span class="leftImage"></span>');

    },
    function() {
        $(this).removeClass('active').children("span").remove();
    }
); 
```

有关参数的更多信息，请参阅[悬停](http://api.jquery.com/hover/)。

**编辑：** hover(fn1, fn2) 只是调用 .mouseenter(fn1).mouseleave(fn2) 的语法糖

# vb.net - 以 From 和 Aggregate 开头的 LINQ 表达式令人困惑

> ID：10448224
> 
> 赞同：0
> 
> 时间：2012-05-04T11:45:45.640
> 
> 标签：vb.net, linq

我有以下示例代码：

```
Class Parent
   Public Property Id As Integer
   Public Property Name As String
End Class
Class Child
   Public Property Id As Integer
   Public Property ParentId As Integer
   Public Property Name As String
End Class
Module Module1

   Sub Main()
      Dim parent1 As New Parent With {.Id = 1, .Name = "Alvin"}
      Dim parent2 As New Parent With {.Id = 2, .Name = "Ben"}
      Dim child1 As New Child With {.Id = 100, .ParentId = 1, .Name = "Chester"}
      Dim child2 As New Child With {.Id = 101, .ParentId = 1, .Name = "David"}
      Dim ParentList As New List(Of Parent)({parent1, parent2})
      Dim ChildList As New List(Of Child)({child1, child2})

      Dim result = _
         From p In ParentList _
         Aggregate c In ChildList Where c.ParentId = p.Id _
         Into FirstOrDefault() _
         Where FirstOrDefault Is Nothing OrElse FirstOrDefault
   End Sub

End Module 
```

进入“结果”的 LINQ 查询不完整，因为我对那里发生的事情感到困惑。我希望 FirstOrDefault 在表达式中引用单个子对象，但它引用子对象的集合。为什么？获取没有相关子女或有符合特定条件的孩子的父母名单的最佳方法是什么？（我的实际代码最多只有一个孩子，所以这个示例代码不具有代表性。）

我只是不明白 FirstOrDefault 的集合可能指的是什么。它应该始终只有 1 个值或什么都没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:06:06.783

*我对如何正确执行此操作有一个答案，但是当我不*这样做时，我仍然很难理解 FirstOrDefault 指的是什么：

```
 Dim result = _
     (From p In ParentList _
     Aggregate c In ChildList Where c.ParentId = p.Id _
     Into FirstOrDefault() _
     Select p, FirstOrDefault).Where( _
     Function(r) r.FirstOrDefault Is Nothing OrElse r.FirstOrDefault.Name < r.p.Name) 
```

**编辑：**看起来 Intellisense 中存在一个错误，表明 FirstOrDefault 是子对象的集合，而实际上它*只是*一个子对象，您*可以*这样使用它。我可以在原始查询中使用相同的表达式，并且一切正常。Intellisense 只是让我误入歧途。

# c# - 数据集是否与记录集相同

> ID：10448225
> 
> 赞同：3
> 
> 时间：2012-05-04T11:45:48.057
> 
> 标签：c#, vb.net, ado.net, dataset, recordset

我曾经在 VB.net 中工作，并且在使用 ADO 时一直使用**Dataset**，但现在我在 C# 中工作，研究向我展示了很多**Recordsets**。

它们是一样的吗？

如果没有，有什么区别？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T11:50:58.163

[数据集与记录集](http://www.geekinterview.com/question_details/15809)

本质上，它与它如何获取数据并允许您与之交互有关，记录集通常只允许您一次从一个表中获取数据（使用默认设置），而数据集可以检索整个数据集。该链接上有更多信息

> Dataset 是无连接的数据持有者，而 RecordSet 是面向连接的数据持有者。虽然 DataSet 一次可以引用多个表，但在 Recordset 的情况下，一次只能处理 1 个表。通过Dataset，您可以处理多于1条记录，但如果是recordset记录集，您必须遍历每条记录，然后才能进行处理。

直接引用支持我所说的话

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-14T05:57:20.877

ADO.NET 数据集和 ADO 记录集的区别？

ADO.NET 是一组面向对象的库，允许您与数据源进行交互。 [http://www.job4india.in/interview-questions/net-interview-questions](http://www.job4india.in/interview-questions/net-interview-questions)

阿多：-

1.它是一个基于COM的库。2.Classic ADO 需要主动连接数据存储。3.锁定功能可用。4.数据以二进制格式存储。5.XML 集成是不可能的。

ADO.NET：-

1.它是一个基于CLR的库。2.ADO.NET 架构在数据存储断开时工作。3.锁定功能不可用。4.数据存储在XML中。

阅读更多：- [http://www.job4india.in/net-interview-questions/what-difference-between-ado-and-adonet](http://www.job4india.in/net-interview-questions/what-difference-between-ado-and-adonet)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:50:05.030

不，`DataSet`类（`System.Data`命名空间）在 C# 中具有相同的名称。我不熟悉 ADO.NET 中称为记录集的任何东西（而我使用的是`DataSet`）。你能发布一些例子吗？

# javascript - javascript window.location 假回调

> ID：10448238
> 
> 赞同：2
> 
> 时间：2012-05-04T11:46:36.607
> 
> 标签：javascript, html, jquery-mobile

我需要打一个假`window.location = "testCall"`电话以生成一个事件来绕过移动设备上的参数。像本机一样工作，但是，我需要关闭一个 NotFound 异常或主要关闭一个假的 window.location 调用。可能的？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T13:06:14.250

```
Object.getOwnPropertyDescriptor(window, 'location').configurable === false 
```

在 Chrome 和 Safari 中（我假设在其他浏览器中）。因此，您似乎无法更改本机行为。

如果它表现得像一个普通的 EcmaScript 5 属性并且`configurable`被设置为`true`比你可以做这样的事情：

```
var descriptor = Object.getOwnPropertyDescriptor(window, 'location');
var setter = descriptor.set; // Doesn't exist although it should in spirit of ES5

descriptor.set = function (newLocation) {
    try {
        setter(newLocation);
    } catch (e) {
        console.log('Location error: ', newLocation, e);
    }
};

// The line below will throw exception in real browser :(
// TypeError: Cannot redefine property: location
Object.defineProperty(window, 'location', descriptor); 
```

我希望浏览器供应商将他们所有的*神奇*属性和对象迁移到标准的 EcmaScript 机制，但目前我们并不走运。

# java - 可以从 javascript 调用非静态 gwt java 方法

> ID：10448252
> 
> 赞同：2
> 
> 时间：2012-05-04T11:47:33.830
> 
> 标签：java, javascript, gwt, jsni, exporter

一般目标：从javascript调用一些非静态java方法

描述：在 Java Applet 代码中的 DOM 上找到 gwt 的小部件并调用它的 java 方法（非静态）

```
 JSObject win = JSObject.getWindow(this);
JSObject doc = (JSObject) win.getMember("document");
JSObject gwtWidget = (JSObject) doc.call("getElementsByName", widgetName);

//todo: have possibility to call `exported` java method over here, smth like:
//Object[] params = new Object[1];
//params[0] = widgetName;
//Object result = gwtWidget.call("exportedJavaMethod", params);

//todo: or just call global ($wnd) static JSNI bridge method:
//Object result = win.call("exportedJavaMethod", params);
// 
```

问题是：我可以通过小部件的 id 找到小部件，但它是 DivElement ，它没有任何导出的实例方法。

我的小部件类是可导出的（gwt-export）：

```
 @Export(value="somewidget")
public class SomeWidget extends SimplePanel implements ..., Exportable {
    private final String id = "id_some_widget_" + count++;
    private static int count = 0;

    public SomeWidget () {
        getElement().setAttribute("name", id);
        getElement().setId(id);
    }
    ...

    public static Element getInstanceById(String elementId) {
        Element someWidget= DOM.getElementById(elementId);
        return someWidget;
    }

    public String getSomeInstancedData() {
        return "useful_inner_data" + this.id;
    } 
```

因此，例如，我想找到添加到 DOM 的具体小部件并`getSomeInstancedData()`在 javascript 中调用非静态方法。有可能吗？

假设像：

```
 var someWidget = document.getElementById(widgetId);
alert(someWidget.getSomeInstancedData());

//or:
var someWidgetExported = com.mypackage.widgets.somewidget.getInstanceById(listenerId);
alert(someWidgetExported.getSomeInstancedData()); 
```

在基本模块中，我写道：

```
 ExporterUtil.exportAll(); 
```

有一个 View(ViewWithSomeWidget.ui.xml) 包含这个小部件：

```
...
基地：形式
base:SomeWidget ui:field="someWidget" ...
...
/base:SomeWidget
...

```

当 SomeWidget 没有实现 Exportable 时，项目运行良好，但我无法调用找到的小部件的 DIV 元素的非静态方法。

到那时，为了解决问题 SomeWidget 实现了 Exportable，但是由于 ClassCastException 使用延迟绑定，progect 没有很好地显示带有 SomeWidget 的 View：

```
 ClassCastException: com.mypackage.widgets.SomeWidgetExporterImpl cannot be cast to com.mypackage.widgets.SomeWidget 
```

那么，可能还有其他方法可以找到小部件的 javascript 对象并将其称为导出的 java 方法吗？无论如何，任何想法都非常受欢迎。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-03T15:04:36.713

您可以声明一个 javascript 函数，该函数将触发非静态方法。

例如：

```
package com.example;
public class Layout extends VLayout() {
    private String nonStaticVar = "nonStaticVar";
    public Layout() {
        declareMethod(this);
    }

    //Method which declares non-static method in javascript
    public native void declareMethod(Layout layout) /*-{
        var layout = layout;
        $wnd.doSomething = function(someString) {
            layout.@com.example.Layout::doSomething(Ljava/lang/String;)(someString);
        }
    }-*/;

    //Non static method which is being called
    public String doSomething(String someString) {
        //Do something, e.g. set var in this instantiated class, or output stuff
        this.nonStaticVar = someString;
        Window.alert(someString);
    }
} 
```

现在，调用 doSomething("bla"); from javascript 将调用您的非静态方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T07:29:12.997

您可以在 div 元素上定义一个自己的 jsmethod，它可以调用一个小部件方法

```
@Export(value="somewidget")
public class SomeWidget extends SimplePanel implements ..., Exportable {
    private final String id = "id_some_widget_" + count++;
    private static int count = 0;

    public SomeWidget () {
        getElement().setAttribute("name", id);
        getElement().setId(id);
        attachInstanceHook(getElement());
    }
    ...

    public String getSomeInstancedData() {
        return "useful_inner_data" + this.id;
    }

    private native void attachInstanceHook(Element element) /*-{
        var elem = element;
        var widget = this;
        elem.getWidgetData = function () {
            widget.@your.package.name.SomeWidget::getSomeInstancedData()();
        };

    }-*/; 
```

您的 js 代码应如下所示：

```
var someWidget = document.getElementById(widgetId);  //the id of the div element
alert(someWidget.getWidgetData()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T08:53:01.937

instead of trying to fetch the widget through its DOM element, inject its Java instance first to the global scope and refer to it:

```
public class SomeWidget extends SimplePanel implements ..., Exportable {

    //...

    public SomeWidget () {
        getElement().setAttribute("name", id);
        getElement().setId(id);

        attachToGlobalScope(id, this);
    }

    private native void attachToGlobalScope(String id, SomeWidget instance) /*-{
        $wnd.shared[id] = instance;
    }-*/;

    //...
} 
```

than later, update the corresponding fetch in the Applet API layer:

```
JSObject win = JSObject.getWindow(this);
JSObject shared = (JSObject) win.getMember("shared");
Widget widgetRef = (Widget) shared.getMember(widgetId); 
```

*disclaimer: this somewhat crooked solution relays on JavaScript global scope variables, which is considered bad practice in general, but here acts as the only common scope, thus abused for objects storage.*

# c - 如何将 gdb 与 LD_PRELOAD 一起使用

> ID：10448254
> 
> 赞同：67
> 
> 时间：2012-05-04T11:47:40.617
> 
> 标签：c, linux, gcc, gdb, x86-64

我运行一个带有 LD_PRELOADing 特定库的程序。像这样。

```
LD_PRELOAD=./my.so ./my_program 
```

我如何运行这个程序`gdb`？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-05-04T11:54:17.793

请执行下列操作。

```
gdb your_program

(gdb) set environment LD_PRELOAD ./yourso.so
(gdb) start 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-01-24T07:39:38.413

发帖是因为我们遇到了一个`set environment`不起作用的案例：

来自[GDB 文档](https://sourceware.org/gdb/onlinedocs/gdb/Starting.html)：

> ```
> set exec-wrapper wrapper
> show exec-wrapper
> unset exec-wrapper 
> ```
> 
> 当设置 'exec-wrapper' 时，指定的包装器用于启动程序进行调试。gdb 使用 exec wrapper program 形式的 shell 命令启动您的程序。引号会添加到程序及其参数中，但不会添加到包装器中，因此您应该在适合您的 shell 时添加引号。包装器一直运行，直到它执行您的程序，然后 gdb 获得控制权。
> 
> 您可以使用任何最终调用 execve 及其参数的程序作为包装器。几个标准的 Unix 实用程序可以做到这一点，例如 env 和 nohup。任何以 exec "$@" 结尾的 Unix shell 脚本也可以工作。
> 
> **例如，您可以使用 env 将环境变量传递给被调试的程序，而无需在 shell 的环境中设置该变量**：
> 
> ```
>  (gdb) set exec-wrapper env 'LD_PRELOAD=libtest.so'
>          (gdb) run 
> ```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-07-20T10:40:39.760

这是一种将所有内容（带有参数和环境）作为一个命令运行的方法：

例子：

```
gdb --args env LD_PRELOAD=/usr/local/lib/libstderred.so ls -l 
```

敏锐的观察者会注意到`env`这里用作 exec 包装器（如 Alexey Romanov 的回答）。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2017-11-14T13:18:43.330

您可以使用以下标志`env`在命令行上作为 exec-wrapper 提供：`-iex`

```
gdb -iex "set exec-wrapper env LD_PRELOAD=./my.so" ./my_program 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-27T07:28:05.387

我将 gdbserver 与 VS Code 一起使用，最简单的方法是启动包装在 shell 中的程序：

```
gdbserver :8888 sh -c 'LD_PRELOAD=/libtest.so your_prog' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-22T08:39:59.923

你基本上可以这样做，只需`gdb`在程序名称前添加：

```
LD_PRELOAD=./my.so gdb ./my.program 
```

您可以使用以下命令检查环境变量：

```
(gdb) show environment LD_PRELOAD 
```

在极少数情况下，您实际上需要在 gdb 中更改它，例如在调试 a 时`dlopen()`，您可以这样做：

```
(gdb) set environment LD_PRELOAD ./my.so 
```

哦，等等，gdb 7.6.2 对我不起作用！该库没有被加载，这意味着这里的答案都不完全正确，至少使用当前工具。

# android - 无法在 android 中安装 phonegap 应用程序 (installer_r18-windows.exe)

> ID：10448256
> 
> 赞同：0
> 
> 时间：2012-05-04T11:47:46.160
> 
> 标签：android, cordova

我已经从这个链接[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html.(installer_r18-windows)安装了 android sdk。 （installer_r18-windows .... android 应用程序工作正常。但我的 phonegap 应用程序没有运行。同样的 phonegap 应用程序是在installer_r12-windows.exe 中工作

错误信息

```
05-03 19:55:36.310: E/AndroidRuntime(743): FATAL EXCEPTION: main
05-03 19:55:36.310: E/AndroidRuntime(743): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.app.mobilyzer/com.app.mobilyzer.MobilyzerActivity}: java.lang.ClassNotFoundException: com.app.mobilyzer.MobilyzerActivity
05-03 19:55:36.310: E/AndroidRuntime(743):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
05-03 19:55:36.310: E/AndroidRuntime(743):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-03 19:55:36.310: E/AndroidRuntime(743):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-03 19:55:36.310: E/AndroidRuntime(743):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-03 19:55:36.310: E/AndroidRuntime(743):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-03 19:55:36.310: E/AndroidRuntime(743):  at android.os.Looper.loop(Looper.java:137)
05-03 19:55:36.310: E/AndroidRuntime(743):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-03 19:55:36.310: E/AndroidRuntime(743):  at java.lang.reflect.Method.invokeNative(Native Method)
05-03 19:55:36.310: E/AndroidRuntime(743):  at java.lang.reflect.Method.invoke(Method.java:511)
05-03 19:55:36.310: E/AndroidRuntime(743):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-03 19:55:36.310: E/AndroidRuntime(743):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-03 19:55:36.310: E/AndroidRuntime(743):  at dalvik.system.NativeStart.main(Native Method)
05-03 19:55:36.310: E/AndroidRuntime(743): Caused by: java.lang.ClassNotFoundException: com.app.mobilyzer.MobilyzerActivity
05-03 19:55:36.310: E/AndroidRuntime(743):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
05-03 19:55:36.310: E/AndroidRuntime(743):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
05-03 19:55:36.310: E/AndroidRuntime(743):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
05-03 19:55:36.310: E/AndroidRuntime(743):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
05-03 19:55:36.310: E/AndroidRuntime(743):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
05-03 19:55:36.310: E/AndroidRuntime(743):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:55:21.507

您已将 Jar 文件放在某个随机文件夹中，然后执行“添加到构建路径”。这将适用于早于 r17 的版本。但是现在您必须在项目文件夹中创建一个名为`libs`的文件夹，然后只需在其中添加 phonegap jar 文件，它就会自动添加到类路径中。你不会得到这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:52:14.123

在 Android Manifest 中声明活动？确保启动器活动具有正确的名称？两种可能的解决方案：D

# ruby - 如何测试 em-mongo + Goliath？

> ID：10448258
> 
> 赞同：0
> 
> 时间：2012-05-04T11:48:01.987
> 
> 标签：ruby, mongodb, asynchronous, eventmachine, goliath

这个下面的应用程序将一些数据保存到数据库中，我想测试它是否正确保存。

```
require 'goliath'

class App < Goliath::API
  def response(env)
     db = EM::Mongo::Connection.new('localhost').db('hello')
     db.collection('coll').insert({'identifier => 1'})

    [204, {}, {}]
  end
end

require 'goliath/test_helper'    
Goliath.env = :test

describe App do
  include Goliath::TestHelper

  it do
    with_api(described_class) do
      get_request do |req|
        db = EM::Mongo::Connection.new('localhost').db('hello')
        db.collection('coll').first.callback do |rec|
          rec['identifier'].should == 100
        end
      end
    end
  end
end 
```

上述规范通过，因为反应器在`callback`返回之前结束。我考虑过手动启动反应器，例如：

```
EM.run do
  db = EM::Mongo::Connection.new('localhost').db('hello')
  db.collection('coll').first.callback do |rec|
    rec['identifier'].should == 100

    EM.stop
  end
end 
```

虽然我不确定是否为每个规格启动反应器是一种好习惯。请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T06:32:33.810

问题是当设置 get_request 时，我们在请求上添加了一个回调来停止事件循环。因此，一旦您的块完成（甚至在创建连接之前），它将停止反应器。

我不确定最好的解决方案，但一个糟糕的解决方案是覆盖：

```
def hookup_request_callbacks(req, errback, &blk)
  req.callback &blk
  req.callback { stop }

  req.errback &errback if errback
  req.errback { stop }
end 
```

在包含 Goliath::TestHelper 之后的测试类中。然后，我认为，您应该能够编写自己的内容，例如：

```
def hookup_request_callbacks(req, errback, &blk)
  req.callback &blk

  req.errback &errback if errback
  req.errback { stop }
end 
```

您只需要确保在 Mongo 的回调中调用 stop。

我还没有实际测试过这个，所以如果有什么不起作用，请告诉我，我可以进一步挖掘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T21:35:59.940

@dj2 的解决方案效果很好，但我决定`mongo`在规范中使用 gem 而不是`em-mongo`. 由于`mongo`块，我不必担心 Goliath 在数据库返回结果之前停止反应器。

# intellij-idea - 从现有代码问题创建项目

> ID：10448260
> 
> 赞同：0
> 
> 时间：2012-05-04T11:48:04.927
> 
> 标签：intellij-idea, project

我正在尝试将现有项目打开到 Idea Community Edition（它是一个 netbeans 项目）。我尝试使用从现有代码创建项目。

其中一个模块以 .Lib 结尾（类似于 MyApp.Lib）。由于某种原因，Idea 没有导入该模块，即使我尝试仅使用该模块创建一个项目，它也不允许我（它甚至不会出现在目录浏览器中，即使它存在于我用 Windows 资源管理器检查）。

我猜它最后必须对 Lib 做一些事情，可能它认为它是一个库文件夹。有没有人碰巧知道解决这个问题的方法？

重命名模块不是一种选择，因为它受版本控制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:36:59.937

我找到了解决方案。需要从该部分中删除`Ignore files and folders`.lib `Settings>File Types`。

# osx-lion - 在 Mac OSX Lion 上安装 py2cairo 时遇到问题

> ID：10448268
> 
> 赞同：1
> 
> 时间：2012-05-04T11:48:48.360
> 
> 标签：osx-lion, pycairo

在过去的几个晚上，我一直在尝试使用 gcc-4.2 和 Python2.6 在 Mac OSX Lion 上安装 py2cairo，尝试了这些链接中提到的一些方法（以及许多其他方法；作为一个新用户，我只能发布两个链接):

[http://www.niconomicon.net/blog/2011/10/09/2120.wrestling.python.snow.leopard](http://www.niconomicon.net/blog/2011/10/09/2120.wrestling.python.snow.leopard)

[如何使用默认 python 在 Mac OSX 上安装 PyCairo 1.10](https://stackoverflow.com/questions/6886578/how-to-install-pycairo-1-10-on-mac-osx-with-default-python)

不幸的是，我仍然遇到了找不到错误头文件的问题。有关我的环境设置和 waf build 的错误输出，请参见下文。我将不胜感激任何指针。谢谢！

```
Steves-Mac-Pro:py2cairo-1.10.0 dr_steve_kramer$ env
MANPATH=/sw/share/man:/usr/share/man:/usr/local/share/man:/usr/X11/man:/usr/local/mysql/man:/sw/lib/perl5/5.12.3/man:/usr/X11R6/man
TERM_PROGRAM=Apple_Terminal
TERM=xterm-256color
SHELL=/bin/bash
TMPDIR=/var/folders/8r/2kt_yqyx2dg2g83m0dyhcy740000gn/T/
LIBRARY_PATH=/Developer/SDKs/MacOSX10.6.sdk/usr/lib
PERL5LIB=/sw/lib/perl5:/sw/lib/perl5/darwin
Apple_PubSub_Socket_Render=/tmp/launch-bnnjZo/Render
TERM_PROGRAM_VERSION=303
OLDPWD=/private/tmp
TERM_SESSION_ID=3A9C4E28-D669-4134-A333-A13920514ED7
USER=dr_steve_kramer
LD_LIBRARY_PATH=/Library/Frameworks/Python.framework/Versions/6.3/lib:/Library/Frameworks/Python.framework/Versions/6.3:
COMMAND_MODE=unix2003
SSH_AUTH_SOCK=/tmp/launch-c3CJUO/Listeners
__CF_USER_TEXT_ENCODING=0x1F5:0:0
Apple_Ubiquity_Message=/tmp/launch-pYg8fw/Apple_Ubiquity_Message
PATH=/Library/Frameworks/Python.framework/Versions/6.3/bin:/Library/Frameworks/Python.framework/Versions/Current/bin:/opt/local/bin:/opt/local/sbin:/sw/bin:/sw/sbin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/bin:/usr/local/mysql/bin:/usr/local/bin/f2j-0.7/bin:/usr/local/jaxws-ri:/usr/X11R6/bin
MKL_NUM_THREADS=1
C_INCLUDE_PATH=/Developer/SDKs/MacOSX10.6.sdk/usr/include
PWD=/private/tmp/py2cairo-1.10.0
LANG=en_US.UTF-8
JAXWS_HOME=/usr/local/jaxws-ri
CXX=g++-4.2
SHLVL=1
HOME=/Users/dr_steve_kramer
CFLAGS=-I/usr/include/gcc/darwin/4.2/
LINKFLAGS=-search_dylibs_first  -L /Library/Frameworks/Python.framework/Versions/6.3/lib/
PYTHONPATH=/Library/Frameworks/Python.framework/Versions/6.3/bin
LOGNAME=dr_steve_kramer
ACLOCAL_FLAGS=-I/usr/local/Cellar/pkg-config/0.25/share/aclocal
PKG_CONFIG_PATH=/sw/bin/pkg-config
ARCHFLAGS=-arch x86_64
INFOPATH=/sw/share/info:/sw/info:/usr/share/info
CC=/usr/bin/gcc-4.2
DISPLAY=/tmp/launch-CzK5Wg/org.x:0
_=/usr/bin/env
Steves-Mac-Pro:py2cairo-1.10.0 dr_steve_kramer$ python2.6 waf configure
  ./options()
Setting top to                           : /private/tmp/py2cairo-1.10.0 
Setting out to                           : /private/tmp/py2cairo-1.10.0/build_directory 
  ./configure()
Checking for 'gcc' (c compiler)          : ok 
Checking for program python              : /Library/Frameworks/Python.framework/Versions/6.3/bin/python 
python executable '/Library/Frameworks/Python.framework/Versions/6.3/bin/python' different from sys.executable '/Library/Frameworks/Python.framework/Versions/6.3/Resources/Python.app/Contents/MacOS/Python'
Checking for python version              : (2, 6, 6, 'final', 0) 
Checking for library python2.6           : yes 
Checking for program python2.6-config    : /Library/Frameworks/Python.framework/Versions/6.3/bin/python2.6-config 
Checking for header Python.h             : yes 
Checking for program pkg-config          : /sw/bin/pkg-config 
Checking for 'cairo' >= 1.10.0           : yes 
Configuration:
PREFIX                                   : /usr/local
LIBDIR                                   : /usr/local/lib
'configure' finished successfully (1.577s)
Steves-Mac-Pro:py2cairo-1.10.0 dr_steve_kramer$ python2.6 waf build
  ./options()
Waf: Entering directory `/private/tmp/py2cairo-1.10.0/build_directory'
  ./build()
  src/build()
[1/9] c: src/cairomodule.c -> build_directory/src/cairomodule.c.1.o
[2/9] c: src/context.c -> build_directory/src/context.c.1.o
[3/9] c: src/font.c -> build_directory/src/font.c.1.o
[4/9] c: src/path.c -> build_directory/src/path.c.1.o
[5/9] c: src/pattern.c -> build_directory/src/pattern.c.1.o
[6/9] c: src/matrix.c -> build_directory/src/matrix.c.1.o
[7/9] c: src/surface.c -> build_directory/src/surface.c.1.o
[8/9] subst: pycairo.pc.in -> pycairo.pc
In file included from /Library/Frameworks/Python.framework/Versions/6.3/include/python2.6/unicodeobject.h:4In file included from /Library/Frameworks/Python.framework/Versions/6.3/include/python2.6/unicodeobject.h:4In file included from /Library/Frameworks/Python.framework/Versions/6.3/include/python2.6/unicodeobject.h:4,
                 from /Library/Frameworks/Python.framework/Versions/6.3/include/python2.6/Python.h:85,
                 from /Library/Frameworks/Python.framework/Versions/6.3/include/python2.6/Python.h:85In file included from /Library/Frameworks/Python.framework/Versions/6.3/include/python2.6/unicodeobject.h:4,
                 from ../src/pattern.c:32,
                 from /Library/Frameworks/Python.framework/Versions/6.3/include/python2.6/Python.h:85In file included from /Library/Frameworks/Python.framework/Versions/6.3/include/python2.6/unicodeobject.h:4,
                 from ../src/surface.c:32,
                 from ../src/matrix.c:32In file included from /Library/Frameworks/Pyth:
:
/usr/include/gcc/darwin/4.2/stdarg.h:5:2:,
                 from /Library/Frameworks/Python.framework/Versions/6.3/include/python2.6/Python.h:85on.framework/Versions/6.3/include/python2.6/unicodeobject.h:4In file included from /Library/Frameworks/Python.framework/Versions/6.3/include/python2.6/unicodeobject.h:4,
                 from /Library/Frameworks/Python.framework/Versions/6.3/include/python2.6/Python.h:85/usr/include/gcc/darwin/4.2/stdarg.h:5:2: ,
                 from ../src/cairomodule.c:32:
error: :
,
                 from ../src/path.c:32 /usr/include/gcc/darwin/4.2/stdarg.h:5:2:,
                 from /Library/Frameworks/Python.framework/Versions/6.3/include/python2.6/Python.h:85#error ,
                 from /Library/Frameworks/Python.framework/Versions/6.3/include/python2.6/Python.h:85"This header only supports __MWERKS__." :
,
                 from ../src/context.c:32error: /usr/include/gcc/darwin/4.2/stdarg.h:5:2:,
                 from ../src/font.c:32error: 
#error /usr/include/gcc/darwin/4.2/stdarg.h:5:2::
:
"This header only supports __MWERKS__." #error /usr/include/gcc/darwin/4.2/stdarg.h:5:2:/usr/include/gcc/darwin/4.2/stdarg.h:5:2:
"This header only supports __MWERKS__."error:    #error 
error: "This header only supports __MWERKS__."#error error: error: 
"This header only supports __MWERKS__."#error #error 
"This header only supports __MWERKS__.""This header only supports __MWERKS__."

In file included from /Developer/SDKs/MacOSX10.6.sdk/usr/include/wchar.h:111,
                 from /Library/Frameworks/Python.framework/Versions/6.3/include/python2.6/unicodeobject.h:120,
                 from /Library/Frameworks/Python.framework/Versions/6.3/include/python2.6/Python.h:85,
                 from ../src/matrix.c:32:
/usr/include/gcc/darwin/4.2/stdarg.h:5:2: error: #error "This header only supports __MWERKS__." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-08T12:30:31.600

如果你还没有解决这个问题，试试 cairocffi：[http ://packages.python.org/cairocffi/](http://packages.python.org/cairocffi/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T20:22:02.083

万一有人仍然对 OSX 上的 py2cairo 有问题。我能够通过使用 install_name_tool 运行。配置/构建过程正在运行并找到正确版本的 python。然而，编译后的二进制文件与不正确的 python 版本相关联。这似乎是 waf 构建系统中的一个错误。

要解决问题...

```
$ cd /usr/local/lib/python2.7/site-packages/cairo
$ otool -L _cairo.so 
_cairo.so:
    /Users/charlie/Downloads/py2cairo/build_directory/src/_cairo.so (compatibility version 0.0.0, current version 0.0.0)
    /usr/local/lib/libcairo.2.dylib (compatibility version 11403.0.0, current version 11403.2.0)
    /System/Library/Frameworks/Python.framework/Versions/2.7/Python (compatibility version 2.7.0, current version 2.7.6)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1213.0.0)
$ sudo install_name_tool -change /System/Library/Frameworks/Python.framework/Versions/2.7/Python /Library/Frameworks/Python.framework/Versions/2.7/Python _cairo.so 
$ otool -L _cairo.so 
_cairo.so:
    /Users/charlie/Downloads/py2cairo/build_directory/src/_cairo.so (compatibility version 0.0.0, current version 0.0.0)
    /usr/local/lib/libcairo.2.dylib (compatibility version 11403.0.0, current version 11403.2.0)
    /Library/Frameworks/Python.framework/Versions/2.7/Python (compatibility version 2.7.0, current version 2.7.6)
    /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1213.0.0) 
```

然后，您可以在运行 waf 脚本的 python 版本中导入和使用 cairo。

# vb.net - 如何从 vb.net 中的数据集填充文本框，当执行以下代码时，我得到了 invalidCastException

> ID：10448269
> 
> 赞同：0
> 
> 时间：2012-05-04T11:48:49.043
> 
> 标签：vb.net, sql-server-2005, windows-mobile-6

```
Private Sub frmbranch_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles MyBase.Load   
  Try       str = "select * from EnquiryEntry Where EnquiryId=" & EnquiryId & ""
            ds = DAL.GetDataSetFromSQL(str)
            Me.cbocustomertype.Text = ds.Tables(0).Rows("CustomerType").ToString
            Me.cmbbranch.Text = ds.Tables(0).Rows("Branch").ToString
            Me.txtcustomerid.Text = ds.Tables(0).Rows("CustomerId").ToString
            Me.txtName.Text = ds.Tables(0).Rows("ClientName").ToString
            Me.txtAddress.Text = ds.Tables(0).Rows("clientAddr").ToString
            Me.txtMobileNo.Text = ds.Tables(0).Rows("Mobile").ToString

        Catch ex As Exception
            MsgBox(ex.Message.ToString, MsgBoxStyle.Exclamation, Me.Text)
        End Try
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T04:30:08.433

使用
ds.Tables(0)。**行（0）**（“移动”）.ToString（）；
.............
................
您缺少 Datatable
Cheers的 Index of Rows 集合

# java - 将 EhCache 磁盘存储内容加载到内存中

> ID：10448274
> 
> 赞同：8
> 
> 时间：2012-05-04T11:49:13.287
> 
> 标签：java, caching, ehcache, memorycache

正如[EhCache 文档](http://ehcache.org/documentation/get-started/storage-options)中所说：

> 在实践中，这意味着持久性**内存缓存将以其所有元素在磁盘上启动**。[...] 因此，Ehcache 设计不会在启动时将它们全部加载到内存中，而是根据需要延迟加载它们。

我希望内存缓存启动将其所有元素都存储在内存中，我该如何实现？

原因是我们的网站对缓存的访问量*很大*，所以我们第一次访问网站时响应时间很差。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T15:49:42.387

我假设所有缓存的元素都在 DiskStore 中，并且您希望它们在应用程序启动后立即在内存中。无论如何，使用 BootStrapCacheLoader 和 BootstrapCacheLoaderFactory 应该会有所帮助。

我只是想知道我们在应用程序启动后将 DiskStore 加载到内存中的位置

您可以实现 BootstrapCacheLoader 它将加载缓存元素，如下所示。***BootstrapCacheLoader.load(Ehcache cache)***方法的定义可以是

```
 //CustomBootstrapCacheLoader implements BootstrapCacheLoader

        List<?> keys = cache.getKeys();

        if ((keys == null) || keys.isEmpty())
        {
            return;
        }

        for (Object key : keys)
        {
           Element el = cache.getQuiet(key);
           cache.removeQuiet(key);
           cache.putQuiet(el);
        } 
```

上面的方法从 DiskCache 中读取元素，将其移除并放回原处，以便它留在内存中并移除磁盘版本。

实现 BootstrapCacheLoaderFactory 以便

```
public class CustomBootstrapCacheLoaderFactory extends BootstrapCacheLoaderFactor
{
.
.
@Override
public BootstrapCacheLoader createBootstrapCacheLoader(Properties properties)
{
    CustomBootstrapCacheLoader loader = new CustomBootstrapCacheLoader();
    loader.setAsynchronous(getAsyncFromProperty(properties));

    return loader;
}
.
.
} 
```

您可以使用 CustomBootstrapCacheLoaderFactory 如下定义缓存配置，如下所示

```
<cache
         name="DummyCacheEl"
         maxElementsInMemory="3500"
         eternal="true"
         overflowToDisk="false"
         diskPersistent="true"
         memoryStoreEvictionPolicy="LRU">
         <bootstrapCacheLoaderFactory class="CustomBootstrapCacheLoaderFactory"  properties="async=true"/>
</cache> 
```

# image - Symfony2 Assetic：如何显示上传的图像存储在数据库中的路径？

> ID：10448275
> 
> 赞同：2
> 
> 时间：2012-05-04T11:49:16.700
> 
> 标签：image, symfony, twig, assets

当我将图像存储在我的包目录结构中时，使用 Assetic 可以轻松显示图像，如文档所示：

```
{% image '@AcmeFooBundle/Resources/public/images/example.jpg'
    filter='jpegoptim' output='/images/example.jpg'
%}
<img src="{{ asset_url }}" alt="Example"/>
{% endimage %} 
```

但是我怎样才能为我上传的图片使用资产呢？在我的 getWebPath 下方返回相对于 web 目录的路径，例如：“/uploads/images/image.jpg”。也许这个解决方案没问题，不需要使用资产？我认为将它用于像上面 jpegoptim 这样的一些过滤可能很有用

```
<img src="{{app.request.basepath}}/{{ entity.getWebPath }}"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T13:44:49.913

```
<img src="{{ app.request.scheme ~ '://' ~ app.request.host ~ '/' ~ entity.getWebPath }}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-12T00:27:27.737

您可以使用 getUploadRootDir(),getAbsolutePath()... 将它们存储在自动生成的网络目录 'uploads/files/' 中，并使用
src="{{asset('uploads/files/'~entity.path) }调用它们}"

# iphone - iOS5 自定义标签栏

> ID：10448278
> 
> 赞同：0
> 
> 时间：2012-05-04T11:49:36.967
> 
> 标签：iphone, ios, mobile

我是 Iphone 新手，我已经启动了一个应用程序，我在其中添加了一个自定义标签栏，该标签栏只能加载到某些特定页面。标签栏按我的预期工作。现在的问题是，当我导航到其他页面时，标签栏继续显示，这给我带来了严重的问题......这是我的实现

在.h中：

```
#import <UIKit/UIKit.h>
@class MainMenuViewController;

@interface RoutineListViewController : UIViewController<UITabBarDelegate>{
    MainMenuViewController *homeBtn;

    UITabBar *mainTabBar;
    UIViewController *routineTabViewController;
    UIViewController *calendarTaViewController;
    UIViewController *editTabViewController;
}

@property (nonatomic, retain) IBOutlet UITabBar *mainTabBar;
@property (nonatomic, retain) IBOutlet UIViewController *routineTabViewController;
@property (nonatomic, retain) IBOutlet UIViewController *calendarTabViewController;
@property (nonatomic, retain) IBOutlet UIViewController *editTabViewController;

- (IBAction)goToHome:(id)sender;

@end 
```

在 .m 中，我将选项卡实现为：

```
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item {
    switch (item.tag) {
        case 1:
            if (routineTabViewController == nil) {
                self.routineTabViewController =[[RoutineListViewController alloc] initWithNibName:@"RoutineListViewController" bundle:nil];
                [self.view insertSubview:routineTabViewController.view belowSubview:mainTabBar];
                routineTabViewController = nil;
                [routineTabViewController release];
            }

            break;
        case 2:
            if (calendarTabViewController == nil) {
                self.calendarTabViewController =[[CalendarTabViewController alloc] initWithNibName:@"CalendarTabViewController" bundle:nil];
                [self.view insertSubview:calendarTabViewController.view belowSubview:mainTabBar];
                calendarTabViewController = nil;
                [calendarTabViewController release];
            }

            break;
        case 3:
            if (editTabViewController == nil) {
                self.editTabViewController =[[EditTabViewController alloc] initWithNibName:@"EditTabViewController" bundle:nil];
                [self.view insertSubview:editTabViewController.view belowSubview:mainTabBar];
                editTabViewController = nil;
                [editTabViewController release];
            }

            break;
        default:
            break;
    }
} 
```

当我实现一个按钮转到其他页面时，标签栏一直显示。这是 EditTabViewController.m 文件中的按钮实现。

```
- (IBAction)goToHome:(id)sender {
    homeBtn = [[MainMenuViewController alloc] initWithNibName:@"MainMenuViewController" bundle:nil];
    [self.view addSubview:homeBtn.view];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:02:06.900

根据 Apple 的规则，TabBarController*应该*是主容器。另外，如果您只是实现一个 custom `UITabBar`，您是否使用它来将用户推送到其他视图？如果是这样，如果`UITabBar`消失了，用户如何返回？

如果您只希望栏在特定页面可见时可见，为什么不实现 a `UINavigationController`（作为主容器）并让根`UIViewController`实现 a`UIToolbar`来执行相同的功能。然后，当您导航到另一个页面时（我在这里假设您的意思是一个新屏幕，而不是 a 中的不同页面`UIPageControl`或 a 中的网页`UIWebView`），您推入一个`UIViewController`不包含`UIToolbar`.

有点像这样：

```
--UINavigationController
   |
   -->UIViewController as RootViewController --> Contains UIToolbar
      |
      -->Pushes UIViewController --> Has no UIToolbar 
```

* * *

***编辑/更新***

我刚刚看到你的代码，我不确定我是否理解你想要实现的目标。我认为您可能正在尝试以某种方式实现类似于 a 的行为`UINavigationController`而无需实际使用。

* * *

***编辑/更新#2*** 我认为你想要可以像这样实现的行为：

```
UINavigationController (containing IconMenuViewController as RootViewController)
|
--> PageViewController (push into this from any icon touch in IconMenuViewController)
       --> Contains UIToolbar/UITabBar 
```

如果您使用上面的层次结构，`UINavigationController`则会自动为您提供`NavigationBar`屏幕顶部的 ，并为您提供一个后退按钮。只要您制作`UIToolbar`或`UITabBar`的一部分`PageViewController`，它应该在您推动和弹出它时与它的视图控制器一起出现和消失。那有意义吗？

# c - 在 C 编程中归档

> ID：10448281
> 
> 赞同：1
> 
> 时间：2012-05-04T11:49:39.310
> 
> 标签：c, file, scanf

我正在尝试制作简单的加密算法。我的目标是将 abc（可以是任何单词）翻译为 123。然后应用一些函数然后再次翻译为文本，这是我的算法。我有归档问题。我创建未加密。 txt 写在“hello world”中，然后调试程序它正在创建 encrypted.txt，但只是写了 worl d。为什么它不写 hello world。总是取最后一个单词和空格“worl d”，你能帮帮我吗？

**编辑 [https://www.dropbox.com/s/i3afkm439iv3d0v/last%20form.txt](https://www.dropbox.com/s/i3afkm439iv3d0v/last%20form.txt)这是我为加密添加 multply 2 和 mod 27 的最后一种形式。它工作得更好。但仍然有问题。里面有“hello world” txt file.its 加密 pjxxcpjxxcpjxxcpjxxcscixhpjxxcqscixhqpjxxc scixh 但它必须是 pjxxc scixh**

```
 #include <cstdlib>
    #include <iostream>
    #include<stdio.h>
    #include<string.h>
    #include <conio.h>

    int main()
    {   
        int g,p,sak,v,r,t,z,o,c,l,i,j,k,*D;

    char alfabe[27]={'a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z','\0'}; 
     FILE *fp1;
     FILE *mat;
       char word[20];

       fp1 = fopen("unencrypted.txt","r");
       do {
          g = fscanf(fp1,"%s",word); /* dosyadan bir kelime oku... */
          if (g != EOF) {
                mat=fopen("encrypted.txt","w") ;

        c=strlen(word);
        printf("has %d letters ", c);
        D = (int *) malloc( sizeof(int)*c ); 
        for(i=0;i<c;i++) {
            for(j=0;j<26;j++) {
                if(word[i]==alfabe[j]) {  
                     D[i]=(j+1);

                     break;
                }
            }
        }

         printf("\nlast form before translation ");
         for(l=0;l<c;l++) {
           printf("%d",D[l]);  /*it s just for control */

        }
        for(z=0;z<c;z++){

                          o=D[z];
                          word[z]=alfabe[o-1] ;  }   

        printf("\nnew form of word: ");
        for(k=0;k<c;k++) {

           fprintf(mat," %c",word[k]);

        }
    fclose(mat);
    }

    } while (g != EOF);          
       fclose(fp1);   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:55:47.747

> 为什么它不写你好世界？

每次在*do-while*循环中打开文件：

```
 mat=fopen("encrypted.txt","w") ; 
```

所以每次内容都会被覆盖。结果，您只会将最后一个单词写入其中。因此，“你好”消失了。

> 但只是写世界

因为，您在 fprintf 中使用了空格：

```
 fprintf(mat," %c",word[k]); 
```

**要解决这个问题：**

1.  只打开一次文件。
2.  从`fprintf`. fprintf(mat,"%c",word[k]);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:54:52.740

这样做是因为您以“w”写入模式打开文件，因此它会清除以前的内容。尝试以“a+”模式打开它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T11:56:00.037

您正在打开文件以在循环内写入：

```
do {
    ...
    mat=fopen("encrypted.txt","w") ;
    ...
    // writing to file
    ...
    } while(g != EOF); 
```

结果，循环的每次迭代都会清除旧文件内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T11:58:55.753

**您正在使用`fscanf(...,"%s",...);`**

现在这是错误的，原因很简单，无论缓冲区有多大，输入总是可以长一个字节。

由于您一次处理一个字符的输入，因此您应该一次读取一个字符。

**疯狂的循环**

我很确定你的意思是写`D[i] = word[i]-'a';`，另外你应该通过使用来测试字符是否是小字母字符`islower()`。

**`o=D[z]; word[z] = alfabe[o-1];`**

现在这没有多大意义。如果字符是`a`怎么办？您将访问`alfabe[-1]`.

# jquery - 正常图像和选定图像？需要 jQuery 还是 css？

> ID：10448291
> 
> 赞同：0
> 
> 时间：2012-05-04T11:50:13.097
> 
> 标签：jquery, html, css, select, onclick

抱歉，如果这已经发布，但我真的需要你的帮助。

我想要的是以下内容：

假设我将此图像作为可以单击的普通图像。 [http://i.imgur.com/SOd1W.png](http://i.imgur.com/SOd1W.png)

现在假设，当我单击该图像时，它会淡化该图像：http: [//i.imgur.com/QW15C.png](http://i.imgur.com/QW15C.png)

谁能告诉我如何在点击图像选择上编码？或者，如果它不能是 onclick，那还有什么办法呢？

编辑：我也忘了提。如果我有 2 个选择...并且如果我单击一个选择它会淡入，如果我选择选择 2，则选择 1 应该会淡出，而选择 2 会像它应该的那样淡入...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:00:57.980

一种方式（有几种）：

将两个图像作为标签（不是背景图像）包含在 div 中：

```
<div id="wrapper">
    <img src="http://i2.cdn.turner.com/cnn/dam/assets/120423012508-merkel-sarkozy-c1-main.jpg" id="img1" />
    <img src="http://d2o307dm5mqftz.cloudfront.net/1005866/1334968885891/Perfect%20Gift%20No%20Pink_300x250.jpg" id="img2" />
</div> 
```

CSS：

```
#wrapper{
    position:relative;
    height:242px;
    width:194px;
}      
#wrapper img{
    position:absolute;
    left:0px;
    top:0px;
    height:242px;
    width:194px;
} 
#img1{display:none;} 
```

jQuery：

```
$('#wrapper').on('click', function (event){
    $('#wrapper img').fadeToggle();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:03:18.937

```
$(document).ready(function() {
    var imagelist = ["http://i.imgur.com/SOd1W.png","http://i.imgur.com/QW15C.png"];

    $('.img1').click(function(e) {   
             var myimage = imagelist [Math.floor(Math.random()*imagelist .length)];
             $('.img1').attr('src', myimage );

    });
}); 
```

查看[演示](http://jsfiddle.net/mY5qc/8/)...[使用 jQuery 提供简单的图像随机化器，作者 Brian Cray](http://briancray.com/2009/12/28/simple-image-randomizer-jquery/)

或者，您也可以使用 CSS3。查看更多关于[使用 CSS3 的简单淡入淡出](http://bavotasan.com/2011/a-simple-fade-with-css3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T12:04:41.293

使用这个 Javascript

```
function Image(imageId)
{
    var obj = document.getElementById(imageId);
    if(obj.alt=='Fade'){
       obj.src="image1.jpg";     
       obj.alt = "Unfadde";
     }
    else
     {
       obj.src="image2.jpg";     
       obj.alt = "Fade";
      }  
 } 
```

和 HTML

```
<img src="image1.jpg" onclick=Image("image") id="image" name="image" alt="Fade" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T11:59:40.407

假设淡入淡出，您的意思是动画淡入淡出，您可以使用以下代码：

HTML：

```
<div id="something" class="theImage" style="height: 242px; width: 194px; background: url(http://i.imgur.com/QW15C.png);">
  <img src="http://i.imgur.com/SOd1W.png" />
</div>

<div id="somethingElse" class="theImage" style="height: 242px; width: 194px; background: url(http://i.imgur.com/QW15C.png);">
  <img src="http://i.imgur.com/SOd1W.png" />
</div> 
```

jQuery：

```
$(document).ready(function(){
    $('.theImage img').click(function(){
      var current = ($(this).parent().attr('id') == 'something') ? 'somethingElse' : 'something';console.log(current);
      $(this).fadeOut();
      $('#'+current + ' img').fadeIn();
    });
}); 
```

这将显示开始时的默认图像，然后在单击时淡出以显示其容器的背景图像。您可以根据自己的情况决定使用不同的 HTML 元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T11:53:32.473

看起来像是 jQuery [click()的工作](http://api.jquery.com/click/)

这是代码 [http://jsfiddle.net/ZzDJ8/](http://jsfiddle.net/ZzDJ8/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T11:56:36.617

这在 CSS 中很简单，你需要给图像一个活动的伪类：

.img {背景：网址（firstimg.png）；}

.img:active {背景：url(clickimg.png);}

这是一个例子：http: [//jsfiddle.net/J6kJh/](http://jsfiddle.net/J6kJh/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-04T11:58:06.230

```
<img src="a.png" id="MyImg" /> 
```

jQuery：

```
$("#MyImg").click(function() { $(this).attr("src","b.png") }); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-04T11:59:06.840

你在寻找这样的东西吗？

```
<img src="http://i.imgur.com/SOd1W.png" onclick="$(this).fadeOut().attr('src','http://i.imgur.com/QW15C.png').fadeIn();"> 
```

# javascript - node.js中for循环完成后的回调

> ID：10448295
> 
> 赞同：6
> 
> 时间：2012-05-04T11:50:19.340
> 
> 标签：javascript, node.js, callback

我需要一些关于 node.js 的异步特性的帮助。我有一个 for 循环，它从数据库中收集数据。“结果”是一个数组，然后应该将其返回给主函数。

```
user_collection.findOne({
            _id : uid
        }, function(error, user) {
            if(error)
                callback(error)
            else {
                for(var j = 0; j < user.contacts.length; j++) {
                    if(user.contacts[j].accepted == 'true') {
                        user_collection.findOne({
                            _id : user.contacts[j].contactId
                        }, function(error, user) {
                            result.push(user);
                        })
                    } 
                }
                callback(null, result);  // This callback executes before the for-loop ends, ofc
            }
        }); 
```

如何确保在循环完成后执行回调？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T12:06:42.327

您可能需要考虑使用辅助库，例如**async** [https://github.com/caolan/async](https://github.com/caolan/async)

它有助于保持代码更加一致..

在您的情况下，您可以查看[forEach()](http://caolan.github.io/async/docs.html#.eachOf)方法

```
forEach(arr, iterator, callback) 
```

使用列表中的项目和完成时的回调调用迭代器。

查看单元测试以获取示例

[https://github.com/caolan/async/blob/master/mocha_test/each.js](https://github.com/caolan/async/blob/master/mocha_test/each.js)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-02T15:34:49.227

使用 ES6 Promises（一个 Promise 库可用于旧版浏览器）：

处理所有保证同步执行的请求（例如 1 然后 2 然后 3）

```
function asyncFunction (item, cb) {
  setTimeout(() => {
    console.log('done with', item);
    cb();
  }, 100);
}

let requests = [1, 2, 3].reduce((promiseChain, item) => {
    return promiseChain.then(new Promise((resolve) => {
      asyncFunction(item, resolve);
    }));
}, Promise.resolve());

requests.then(() => console.log('done')) 
```

在没有“同步”执行的情况下处理所有异步请求（2 可能比 1 更快地完成）

```
let requests = [1,2,3].map((item) => {
    return new Promise((resolve) => {
      asyncFunction(item, resolve);
    });
})

Promise.all(requests).then(() => console.log('done')); 
```

我就是这样做的

```
Promise.all(body.schedules.map(function(scheduleId) {
        return new Promise(function(resolve, reject) {
            return scheduleSchema.findOneAndRemove({
                    _id: scheduleId
                })
                .then(function() {
                    logSchema.insert({
                        userId: req.user.id,
                        actId: constants.LOG_SCHEDULE_DELETE.id,
                        extData: scheduleId
                    });
                    resolve();
                })
                .catch(function(err) {
                    reject(err);
                });
        });
    })).then(function() {
        return res.json({
            code: constants.SUCCESS_CODE
        });
    }).catch(function(err) {
        return res.json(constants.DATABASE_ERROR);
    }); 
```

最后一个例子

```
function callback (result) { console.log('all done'); }

[1, 2, 3].forEach((item, index, array) => {
  asyncFunction(item, () => {
    if (index === array.length - 1) {
      callback();
    }
  });
}); 
```

这并不能保证回调将在处理完所有项目后执行。它只保证回调将在处理完最后一项后执行。

[更多信息](https://codedump.io/share/2dw91w0HFcjx/1/callback-after-all-asynchronous-foreach-callbacks-are-completed)

迈克尔。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-01T07:36:09.680

使用 Async.js v1.5.2，它是[每个](https://github.com/caolan/async#eacharr-iterator-callback).

```
each(arr, iterator, [callback]) 
```

**arr** - 要迭代的数组。
**iterator(item, callback)** - 应用于 arr 中每个项目的函数。
**回调（错误）** - 可选。当*所有迭代器函数完成或发生错误时*调用的回调。

# android - 在android中处理手机关机事件

> ID：10448304
> 
> 赞同：20
> 
> 时间：2012-05-04T11:51:03.177
> 
> 标签：android, events, shutdown

您能否发布一个简单的代码来处理关闭事件。我需要清单和接收器。

我需要以下内容：我有一项在后台运行的服务，我想检测手机正在关闭，以使其处于静音模式，这样糟糕的运营商音乐就不会播放。

重新启动手机后（我已经在启动接收器上）该服务将启用手机声音。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-04T11:55:31.583

您需要在接收器中侦听以下意图操作：

```
<action android:name="android.intent.action.ACTION_SHUTDOWN" /> 
```

要使其与某些提供快速关机功能的 HTC（或其他）设备兼容，您还需要在同一个意图过滤器中包含以下操作：

```
<action android:name="android.intent.action.QUICKBOOT_POWEROFF" /> 
```

有关更多信息，请阅读[此](https://stackoverflow.com/a/2190184/966550)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-04T12:01:27.227

```
<receiver android:name=".ShutdownReceiver">
    <intent-filter>
        <action android:name="android.intent.action.ACTION_SHUTDOWN" />
        <action android:name="android.intent.action.QUICKBOOT_POWEROFF" />
    </intent-filter>
</receiver> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T11:58:15.823

公共静态最终字符串 ACTION_SHUTDOWN

广播动作：设备正在关闭。这是在设备关闭时广播的（完全关闭，不是休眠）。广播完成后，将继续进行最终关机，所有未保存的数据都会丢失。应用程序通常不需要处理这个问题，因为前台活动也会暂停。

这是一个只能由系统发送的受保护意图。

常数值：“ `android.intent.action.ACTION_SHUTDOWN`”

并且此 ACTION_SHUTDOWN 可能因设备而异

像 HTC 它的`android.intent.action.QUICKBOOT_POWEROFF`

# python - 没有名为异常的模块-scrapy管道

> ID：10448305
> 
> 赞同：0
> 
> 时间：2012-05-04T11:51:06.220
> 
> 标签：python, scrapy

我正在尝试为 scrapy 编写 mysql 管道，但出现“导入错误”：

```
File "C:\Python27\lib\site-packages\scrapy-0.14.3-py2.7-win32.egg\scrapy\utils\misc.py", line 39,    
in load_object raise ImportError, "Error loading object '%s': %s" % (path, e)
ImportError: Error loading object 'tutorial.pipelines.MySQLStore': No module named exceptions 
```

管道的代码是：

```
from scrapy import log
from scrapy.core.exceptions import DropItem
from twisted.enterprise import adbapi

import time
import MySQLdb.cursors

class FilterWords(object):
    """A pipeline for filtering out items which contain certain words in their
    description"""

    # put all words in lowercase
   words_to_filter = ['politics', 'religion']

       def process_item(self, spider, item):
       print spider
       for word in self.words_to_filter:
           if word in unicode(item['description']).lower():
               raise DropItem("Contains forbidden word: %s" % word)
       else:
           return item

class MySQLStore(object):

    def __init__(self):
        # @@@ hardcoded db settings
        # TODO: make settings configurable through settings
        self.dbpool = adbapi.ConnectionPool('',
            db='',
            user='',
            passwd='',
            cursorclass=MySQLdb.cursors.DictCursor,
            charset='utf8',
            use_unicode=True
        )

    def process_item(self, spider, item):
        # run db query in thread pool
        query = self.dbpool.runInteraction(self._conditional_insert, item)
        query.addErrback(self.handle_error)

        return item

    def _conditional_insert(self, tx, item):
        # create record if doesn't exist. 
        # all this block run on it's own thread
        tx.execute("select * from scrapytest where link = %s", (item['link'][0], ))
        result = tx.fetchone()
        if result:
            log.msg("Item already stored in db: %s" % item, level=log.DEBUG)
        else:
            tx.execute(\
                "insert into scrapytest (title, link, desc) "
                "values (%s, %s, %s)",
                (item['title'][0],
                item['link'][0],
                item['desc'][0])
            )
           log.msg("Item stored in db: %s" % item, level=log.DEBUG)

    def handle_error(self, e):
        log.err(e) 
```

我曾尝试使用其他管道（如 Json）并且它们可以工作，但是这里有一些我不明白的导入问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:40:17.840

错误信息*非常*清楚！

```
ImportError: ... No module named exceptions 
```

您正在尝试 import `exceptions`，但没有这样的模块。查看导入该模块的代码：

```
from scrapy.core.exceptions import DropItem 
```

这应该是：

```
from scrapy.exceptions import DropItem 
```

没有`scrapy.core.exceptions`模块。

# asp.net-mvc-3 - 如何使用 MVC3 将图像保存在文件中并将图像名称保存到数据库？

> ID：10448310
> 
> 赞同：1
> 
> 时间：2012-05-04T11:51:25.810
> 
> 标签：asp.net-mvc-3, image

我需要将用户从文件上传控件中选择的图像保存到站点中的文件（如内容/图像）中，并使用 GUID 作为该图像的名称并将该 GUID 保存到数据库。我是 MVC 的新手，所以请帮助我了解详细信息。谢谢你们。这是我的控制器...

```
 [HttpPost]
    public ActionResult Create(Product product,HttpPostedFileBase file)
    {
        if (file!=null&&file.ContentLength>0)
        {
            var FileName = string.Format("{0}.{1}",Guid.NewGuid(),file.ContentType);
            var path = Path.Combine(Server.MapPath("~/Content/Images"), FileName);
            file.SaveAs(path);
        }
        if (ModelState.IsValid)
        {
            db.Products.AddObject(product);
            db.SaveChanges();
            return RedirectToAction("Index");
        }

        ViewBag.CategoryID = new SelectList(db.Categories, "CategoryID", "CategoryName", product.CategoryID);
        return View(product);
    } 
```

这是我的观点...

```
 @using (Html.BeginForm("Create", "Product", FormMethod.Post, new { enctype = "multipart/form-data" }))
        {
            <input type="file" name="Uploader" />
        } 
```

我根本不知道发生了什么……但是没有 HttpPostedFileBase 实例，所以 if 语句失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T04:27:23.173

尝试将 HttpPostedFileBase 参数从文件重命名为 Uploader 并再次测试

从 public ActionResult Create(Product product,HttpPostedFileBase file) 更改为 public ActionResult Create(Product product,HttpPostedFileBase Uploader)

我的意思是html标签的名称和参数名称是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:32:56.137

将您的操作更改为：

```
[HttpPost]
public ActionResult Create(Product product)
{
    var files = controllerContext.RequestContext.HttpContext.Request.Files;

    foreach (string inputName in files)
    {
        file = files[inputName];

        if (file != null && file.ContentLength > 0)
        {
            var FileName = string.Format("{0}.{1}", Guid.NewGuid(), file.ContentType);
            var path = Path.Combine(Server.MapPath("~/Content/Images"), FileName);
            file.SaveAs(path);
        }

    }

    ... do other stuff here ...

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T15:28:08.737

在您看来，`<input type="file" />`应该具有名称`"file"`，以便模型绑定器将其分配给`file`您操作中的参数。

所以基本上：

```
 @using (Html.BeginForm("Create", "Product", FormMethod.Post, new { enctype = "multipart/form-data" })) 
    { 
        <input type="file" name="file" /> 
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-13T04:30:35.500

为什么不在产品模型中添加“HttpPostedFileBase 文件”而不是单独发送，例如：模型：

```
 public HttpPostedFileBase File { get; set; } 
```

看法：

```
 @Html.TextBoxFor(m => m.File, new { type = "file" }) 
```

它对我来说就像一个魅力！

哦。顺便说一句。如果您使用的是数据库优先实体模型..您需要通过部分类添加该额外字段，即。

```
public partial class Product                    
    {
        public HttpPostedFileBase File { get; set; }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-09T13:54:47.000

像这样使用而不是比较所有图像类型：

```
 fileName = string.Format("{0}{1}", Guid.NewGuid(),
 Path.GetExtension(file.FileName)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-23T07:38:56.517

您需要一些如下所示的条件。 Contenttype 值类似于此 image/png、image/gif、image/jpeg，因此当您将其组合时，如下所示：

0f269598-0d66-4453-a3b5-a8f07254c531.image/png

代码在这里

```
string fileExt = "jpg";
if (Imagename.ContentType == "image/png") { fileExt = "png"; }
else if (Imagename.ContentType == "image/gif") { fileExt = "gif"; }
else if (Imagename.ContentType == "image/jpeg") { fileExt = "jpg"; } 
```

# jquery - jquery.parseJSON 不工作

> ID：10448313
> 
> 赞同：-1
> 
> 时间：2012-05-04T11:51:36.697
> 
> 标签：jquery

我的一个函数返回以下字符串：

```
{
   "data": [{
      "type": "facebook",
      "id": "639422616",
      "name": "Neal Cabage",
      "message": "Ruby on rails or Sinatra better for a restful app that speaks json, not html?"
   }, {
      "type": "facebook",
      "id": "100001604824773",
      "name": "Christolle Soragee",
      "message": "When you lose: "
      Who cares ? !It 's just a game!" When you win: "HAHAHA IN YOUR FACE LOSER!""},{"type":"facebook","id":"100000049925091","name":"Chris Cassanova Dunphy","message":"It'
      s sad when you already know you 're gonna get ripped off and you have to junkie proof your stash... Hahaha good thing I was on point! It'
      s funny how people with a problem will ruin a good thing just "}]} 
```

当我使用`jQuery.parseJSON(response)`时，在某些情况下，当消息在消息中包含双引号时，它会引发异常。

任何帮助或建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:02:59.380

根据[json.org](http://json.org/)：

> 字符串是零个或多个 Unicode 字符的序列，用双引号括起来，使用反斜杠转义。字符表示为单个字符串。字符串与 C 或 Java 字符串非常相似。

![细绳](../Images/720f268350813825ab23193ee2c63757.png)

因此，`"`字符串中的字符需要用 a 转义`\`，从而变成类似`"This is my string with a quote \" inside it"`.

# git - 如何在不进行任何更改的情况下使我的 git 存储库进入服务器下载状态

> ID：10448318
> 
> 赞同：2
> 
> 时间：2012-05-04T11:52:16.890
> 
> 标签：git

我对我的 android 源代码进行了一些更改，然后撤消了这些更改，这些更改都没有提交。然而，当我编译 android 源代码时，这些更改明确地出现在我的 logcat 消息中。这意味着我所做的更改没有提交，但是当编译器获取代码进行编译时，它包括这些更改。是/否？

我终于搞砸了代码，希望它回到远程回购状态。当我想到 git reset --hard HEAD 时，git 出错了。致命的，不是 git repo 等。

我读过它，这可能意味着这里没有 git repo。所以我这样做了。

```
 $ cd (project-directory)
 $ git init
 $ (add some files)
 $ git add .
 $ git commit -m 'Initial commit' 
```

然后

```
 git reset --hard HEAD 
```

HEAD 现在位于 73adaa6 初始提交

不知道我在做什么了。我的整个意图是让我的 Andoird 源状态清除我的更改，并恢复到与我下载此 repo 的远程服务器上相同的状态。

我知道一个简单的 git reset --hard HEAD 应该做到这一点，但是因为不是 git repo 错误，我不得不尝试所有这些。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:17:00.120

不是 git repo，我如何解决问题并将 repo 恢复到服务器状态，重置我的源..

```
make clobber 
repo forall -c git reset --hard 
repo sync -j8 
```

# wcf - 使用 IClientMessageInspector 编辑 WCF 服务的 SOAP

> ID：10448327
> 
> 赞同：16
> 
> 时间：2012-05-04T11:52:39.557
> 
> 标签：wcf, soap

在我的 WCF 服务中，我想在 IClientMessageInspector 的 BeforeSendRequest 和 AfterReceiveReply 中编辑 SOAP。

我创建了一个这样的自定义行为：

```
public class MyBehavior : BehaviorExtensionElement, IEndpointBehavior
{
} 
```

在 MyBehavior 类中，我实现了 IEndpointBehavior 方法，如下代码：

```
public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
{
    MyInspector inspector = new MyInspector();
    clientRuntime.MessageInspectors.Add(inspector);
} 
```

MyInspector 只不过是从 IClientMessageInspector 继承的类。

现在，我的问题是：IEndpointBehavior 的 ApplyClientBehavior 没有被解雇。但是在 wcf 客户端，当我添加一个存在 MyBehavior 类的项目的引用并在客户端编写以下代码时：

```
c.Endpoint.Behaviors.Add(new MyBehavior()); 
```

它工作正常。我的意思是 Apply Client Behavior 方法被解雇了。

我不想让我的客户手动添加此行为，我希望这会自动发生。我怎样才能做到这一点？

这是完整的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Xml;
using System.ServiceModel.Configuration;
using System.ServiceModel.Description;
using System.ServiceModel.Dispatcher;
using System.ServiceModel.Channels;
using System.IO;

namespace MethodChangeService
{
   public class MyInspector : IClientMessageInspector
    {
        public void AfterReceiveReply(ref System.ServiceModel.Channels.Message reply, object correlationState)
        {
            XmlDocument doc = new XmlDocument();
            MemoryStream ms = new MemoryStream();
            XmlWriter writer = XmlWriter.Create(ms);
            reply.WriteMessage(writer);
            writer.Flush();
            ms.Position = 0;
            doc.Load(ms);
            ChangeMessage(doc, false);
            ms.SetLength(0);
            writer = XmlWriter.Create(ms);
            doc.WriteTo(writer);
            writer.Flush();
            ms.Position = 0;
            XmlReader reader = XmlReader.Create(ms);
            reply = Message.CreateMessage(reader, int.MaxValue, reply.Version);

        }

        public object BeforeSendRequest(ref System.ServiceModel.Channels.Message request, System.ServiceModel.IClientChannel channel)
        {
            string action = request.Headers.GetHeader<string>("Action", request.Headers[0].Namespace);
            if (action.Contains("GetData"))
            {
                XmlDocument doc = new XmlDocument();
                MemoryStream ms = new MemoryStream();
                XmlWriter writer = XmlWriter.Create(ms);
                request.WriteMessage(writer);
                writer.Flush();
                ms.Position = 0;
                doc.Load(ms);
                ChangeMessage(doc, true);
                ms.SetLength(0);
                writer = XmlWriter.Create(ms);
                doc.WriteTo(writer);
                writer.Flush();
                ms.Position = 0;
                XmlReader reader = XmlReader.Create(ms);
                request = Message.CreateMessage(reader, int.MaxValue, request.Version);
            }
            request.Headers.Action += "1";
            return null;
        }

        void ChangeMessage(XmlDocument doc, bool flag)
        {
            XmlNamespaceManager nsManager = new XmlNamespaceManager(doc.NameTable);
            nsManager.AddNamespace("s", "http://schemas.xmlsoap.org/soap/envelope/");
            nsManager.AddNamespace("tempuri", "http://tempuri.org/");
            XmlNode node = doc.SelectSingleNode("//s:Body", nsManager);
            if (node != null)
            {
                if (flag)
                    node.InnerXml = node.InnerXml.Replace("GetData", "GetData1");
                else
                    node.InnerXml = node.InnerXml.Replace("GetData1Response", "GetDataResponse").Replace("GetData1Result", "GetDataResult");
            }
        }
    }

    public class MyBehavior : BehaviorExtensionElement, IEndpointBehavior
    {
        public void AddBindingParameters(ServiceEndpoint endpoint, BindingParameterCollection bindingParameters)
        {
            //endpoint.Behaviors.Add(new MyBehavior());
        }

        public void ApplyClientBehavior(ServiceEndpoint endpoint, ClientRuntime clientRuntime)
        {
            MyInspector inspector = new MyInspector();
            clientRuntime.MessageInspectors.Add(inspector);
        }

        public void ApplyDispatchBehavior(ServiceEndpoint endpoint, EndpointDispatcher endpointDispatcher)
        {
        }

        public void Validate(ServiceEndpoint endpoint)
        {
        }

        protected override object CreateBehavior()
        {
            return new MyBehavior();
        }

        public override Type BehaviorType
        {
            get
            {
                Type t = Type.GetType("MethodChangeService.MyBehavior");
                return t;
            }
        }
    }
} 
```

服务类是：

```
using System;
using System.Configuration;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Text;
using System.ServiceModel.Description;
using System.ServiceModel.Configuration;
using System.ServiceModel.Dispatcher;
using System.ServiceModel.Channels;
using System.IO;
using System.Xml;

namespace MethodChangeService
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in code, svc and config file together.
    public class HardcoadedService : IHardcoadedService
    {
        public string GetData(int i)
        {
            return string.Format("you entered {0}",i);
        }

        public string GetData1()
        {
            return string.Format("You got redirected to another method!!");
        }
    }

} 
```

这是客户端代码：

```
class Program
    {
        static void Main(string[] args)
        {
            HardcoadedServiceClient c = new HardcoadedServiceClient();
            c.Endpoint.Behaviors.Add(new MyBehavior());
            string s = c.GetData(3);
            Console.WriteLine(s);
            Console.ReadKey();
        }
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-23T21:25:03.233

您可以使用客户端文件中的`<behaviors>`和`<extensions>`部分来完成此操作。`app.config`

要注册您的自定义行为，请将以下内容添加到文件的`<system.serviceModel>`部分`app.config`：

```
<behaviors>
  <endpointBehaviors>
    <behavior name="MyBehavior">
      <myBehavior/>
    </behavior>
  </endpointBehaviors>
</behaviors>
<extensions>
  <behaviorExtensions>
    <add name="myBehavior" type="MethodChangeService.MyBehavior, MethodChangeService, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null" />
  </behaviorExtensions>
</extensions> 
```

然后在`<endpoint>`元素中，如果该`<client>`部分添加以下属性：

```
behaviorConfiguration="MyBehavior" 
```

有关这方面的更多信息，请查看：[使用行为配置和扩展运行时](https://docs.microsoft.com/en-us/dotnet/framework/wcf/extending/configuring-and-extending-the-runtime-with-behaviors)

# javascript - OpenLayers 通过 Popups 窃取点击事件

> ID：10448328
> 
> 赞同：3
> 
> 时间：2012-05-04T11:52:39.757
> 
> 标签：javascript, dom-events, openlayers

为什么 FramedCloud 弹出窗口会窃取弹出窗口内的点击事件？

```
current_popup = new OpenLayers.Popup.FramedCloud(
    "featurePopup",
    f.geometry.getBounds().getCenterLonLat(),
    new OpenLayers.Size(0,0),
    "<b>Наблюдения</b><br/>" + $.map(features, function(fe) { return fe.attributes.description; }).join('<br/>'),
    null, false, null);
    map.addPopup(current_popup, true);

$('#map').on('click', function() { console.log('test'); return false; }); 
```

始终捕获单击事件，除非我单击弹出窗口内的链接。弹出窗口和锚点是`#map`.

*   单击地图 => 触发回调
*   单击标记 => 触发回调，显示弹出窗口
*   在弹出窗口内单击（不在链接上）=> 未触发回调
*   单击弹出窗口中的链接=>以同样的方式，没有任何反应

OL 那部分的代码非常晦涩难懂。

为什么它会在弹出窗口内捕获点击？我该如何把它们带回来？

**编辑**：在 OL 中进行更深入的调试：此函数被触发：

```
bindAsEventListener: function(func, object) {
    return function(event) {
        return func.call(object, event || window.event);
    }; 
```

`event.target`是锚，正是我所期望的：

```
<a class="edit-card-link" href="/form/?id=806">...</a> 
```

`func`是：

```
handleBrowserEvent: function(evt) {
    var type = evt.type, listeners = this.listeners[type];
    if (!listeners || listeners.length == 0) {
        return;
    }
    var touches = evt.touches;
    if (touches && touches[0]) {
        var x = 0;
        var y = 0;
        var num = touches.length;
        var touch;
        for (var i = 0; i < num; ++i) {
            touch = touches[i];
            x += touch.clientX;
            y += touch.clientY;
        }
        evt.clientX = x / num;
        evt.clientY = y / num;
    }
    if (this.includeXY) {
        evt.xy = this.getMousePosition(evt);
    }
    this.triggerEvent(type, evt);
} 
```

`this`是 OpenLayers.Event 类实例，`evt.target`仍然是那个锚点，`listeners`包含 1 个侦听器：

```
function (evt){OpenLayers.Event.stop(evt,true);} 
```

这是原因吗？我怎么把它拿出来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T09:16:40.040

如果您想阻止弹出窗口窃取鼠标事件，那么`CSS`您可以[按照此处的建议](https://stackoverflow.com/a/10448248/613495)设置与`pointer-events: none;`创建时给出的弹出窗口 id 相对应的 id。因此，在您的情况下，它将是：

```
#featurePopup{
    pointer-events: none;
} 
```

当我想避免我显示的弹出窗口闪烁时，它对我来说就像一种魅力`mouseover`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T04:48:46.777

我用另一种方式做到了。我让 OpenLayers 捕获事件，但在此之前我触发了另一个事件。

```
 $('a', current_popup.contentDiv).on('click', function(evt) {
      var jtarget = $(evt.target);
      hide_popup();  // hides OpenLayers popup
      $(document).trigger('edit_link_clicked', {
           feature: features[jtarget.parent().find('a').index(jtarget)],
           cluster: f,
           url: jtarget.attr('href')
      });
      return false;
 }); 
```

# java - 使用 wsdl2java/Apache CXF 生成 Web 服务代理类

> ID：10448329
> 
> 赞同：8
> 
> 时间：2012-05-04T11:52:40.643
> 
> 标签：java, web-services, proxy, wsdl, cxf

我正在尝试使用 Apache CXF 附带的 wsdl2java 工具生成 Web 服务代理。生成本身似乎很好，但是生成的文件中有一些错误，调用了一个不存在的构造函数。

该文件提供了一个解决方案：

```
//This constructor requires JAX-WS API 2.2\. You will need to endorse the 2.2
//API jar or re-run wsdl2java with "-frontend jaxws21" to generate JAX-WS 2.1
//compliant code instead. 
```

所以我开始下载并安装 2.2 版的 JAX-WS Api。我找到了以下安装手册，解释了如何认可这些新文件：[http](http://dcx.sybase.com/1200/en/dbprogramming/httpserver-jaxws-lesson-two.html) ://dcx.sybase.com/1200/en/dbprogramming/httpserver-jaxws-lesson-two.html我按照本指南的每一步操作，删除了旧文件生成文件并生成新文件，但问题仍然存在。

任何提示和/或技巧？（当然，我现在使用 -frontend jaxws21 标志来生成代理，但仍然如此）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-08T13:43:05.480

```
<defaultOptions>
    <frontEnd>jaxws21</frontEnd>
</defaultOptions> 
```

这就是我使用 maven 解决问题的方法：

```
 <plugin>
            <groupId>org.apache.cxf</groupId>
            <artifactId>cxf-codegen-plugin</artifactId>
            <version>2.5.2</version>
            <executions>
                <execution>
                    <id>generate-sources2</id>
                    <configuration>
                        <sourceRoot>${basedir}/target/generated-sources/cxf</sourceRoot>
                        <defaultOptions>
                            <frontEnd>jaxws21</frontEnd>
                        </defaultOptions>
                        <wsdlOptions>
                            <wsdlOption>
                                <wsdl>...</wsdl>
                            </wsdlOption>
                        </wsdlOptions>
                    </configuration>
                    <goals>
                        <goal>wsdl2java</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

**编辑：**我找到了另一种使用 maven 和 cxf 版本 2.7.3 来解决这个问题的方法。在您的依赖项中添加这些库。您现在不必使用 jaxws21 选项：

```
 <dependency>
        <groupId>javax.xml.ws</groupId>
        <artifactId>jaxws-api</artifactId>
        <version>2.2.9</version>
    </dependency>
    <dependency>
        <groupId>javax.xml.bind</groupId>
        <artifactId>jaxb-api</artifactId>
        <version>2.2.7</version>
    </dependency> 
```

# kohana - kohana 框架是用来做什么的？

> ID：10448337
> 
> 赞同：0
> 
> 时间：2012-05-04T11:53:28.763
> 
> 标签：kohana, principles

我是第一次学习 kohana，需要了解有关 mcv 原理的一些基本事实。到目前为止，我只使用了 html 页面标题中引用的 Javascript 框架（ext、openlayers 等）。然后提取这些类并在应用程序中使用。我可以拥有任意多个引用一个 Ext.js 框架安装的独立应用程序。

Kohana，作为一个mvc框架，显然是不同的，但是它实现了哪个目的呢？它是否用于在 Kohana 安装中创建 Web 应用程序，即。一个 Web 应用程序...还是用于创建无穷无尽的应用程序？据我所知，一个人下载了 kohana 框架，并调整/扩展该框架以制作应用程序..例如 web cms。我在正确的路线上吗？

干杯，

抢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:09:24.867

Kohana 框架通常用于构建 Web 应用程序。您通常会使用一个 Kohana 安装并使用它来制作 Web 应用程序。

如果需要，您可以将 Kohana 集中安装在 /usr/share/Kohana 之类的地方，然后将应用程序文件夹移出并将 index.php 中的更新路径设置到正确的位置（有系统路径、模块路径和应用路径）。

MVC 允许是一种用于分离业务逻辑（模型）、控制器（使用模型获取数据并将其传递给视图）和视图通常是输出到浏览器（HTML）的设计模式。你可以在这里阅读更多

[http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:09:08.690

是的，通常每个 Web 应用程序都有自己的库副本。因此，一份 Kohana 的副本扩展到了一个 Web 应用程序。

MVC 是一种在 Web 框架中很常见的模式。它会导致更好的代码重用，并在应用程序的不同部分之间失去耦合。

# linux - Linux Bash Ftp 自动图像上传

> ID：10448341
> 
> 赞同：3
> 
> 时间：2012-05-04T11:53:41.413
> 
> 标签：linux, image, bash, ftp

我正在尝试将图像上传到 ftp 服务器。我可以上传，但上传的图片似乎不像我发送的那样。它在服务器端转换随机彩色图像。是什么原因？我将ftp模式更改为二进制。

```
#!/bin/sh 
HOST='192.168.10.31' 
USER='ozen.ozkaya'
PASSWD='Oo123456' 
FILE1='RefImg_192.168.10.33_1.jpg'
ftp -n -v $HOST <<END_OF_SESSION 
user $USER $PASSWD 
put $FILE1
bye 
END_OF_SESSION 
```

如何上传图片而不会损坏？

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T11:58:06.370

FTP 默认以 ASCII（7 位）模式发送；您需要以二进制模式发送。在 之前添加`type binary`命令`put`，您将全部设置好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:08:11.527

恐怕 FTP 协议不支持可靠传输和故障转移。您将需要编写脚本。

查看 Ernest 的响应，您确实忘记将模式切换为二进制。但是，如果您在传输过程中出现连接故障，请不要指望 FTP 会重新启动它。

所以回答你的问题：“我怎样才能上传图片而不会损坏？” 到目前为止，没有人提供有效的答案。

我也会推荐 WPUT [http://wput.sourceforge.net/](http://wput.sourceforge.net/)

一点 G 搜索，这里有一个项目可以尝试： http: [//lftp.yar.ru/](http://lftp.yar.ru/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T07:13:06.940

在当前情况下，我使用 sftp 和公钥身份验证。它解决了所有安全问题，并在匹配密钥后提供无密码登录。

# linux - 如何在不使用 crontab 的情况下在后台连续运行脚本

> ID：10448343
> 
> 赞同：1
> 
> 时间：2012-05-04T11:53:47.960
> 
> 标签：linux, unix, solaris

我有一个小脚本，可以连续检查某些条件，一旦满足该条件，程序就应该执行。这可以做到吗。我曾想过使用脚本每 5 分钟运行一次的 crontab，但现在我希望在没有 crontab 的情况下完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:07:03.727

您可能想先创建一个无限循环，然后在该循​​环中您可能想验证您的条件或稍等片刻。由于您没有提及您想使用哪种脚本语言，我将为示例编写伪代码。给我们更多关于脚本语言的信息，也许还有条件。

伪代码示例：

```
# Defining a timeout of 1 sec, so checking the condition every second
timeout = 1

# Running in background infinitely
while true do
  # Let's check the condition
  if condition then
    # I got work to do
    ...
  else
    # Let's wait a specified timeout, not to block the system
    sleep timeout
  endif
endwhile 
```

带有输入代码的 sh 示例

```
#!/bin/sh
PATH=/bin:/usr/bin:/sbin:/usr/sbin

# Defining a timeout of 1 hour
timeout=3600

while true
do
  case 'df /tmp' in
    " "[5-9]?%" ") rm -f /tmp/af.*
      ;;
    *)
      sleep $timeout
      ;;
  esac
done 
```

然后，您可以使用“nohup”从 shell 运行此脚本：

```
nohup yourscript & 
```

# javascript - 从javascript中的字符串获取数字

> ID：10448344
> 
> 赞同：0
> 
> 时间：2012-05-04T11:53:55.513
> 
> 标签：javascript, string, numbers

我有一个看起来像这样的字符串：

```
8=0,2=1,5=1,6=0,7=0 
```

我只想提取后面跟着的数字`=0`，在这种情况下：8、6 和 7

如何在 JavaScript 中做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:55:43.190

尝试：

```
'8=0,2=1,5=1,6=0,7=0'
   .match(/\d?=(0{1})/g)
   .join(',')
   .replace(/=0/g,'')
   .split(','); //=> [8,6,7] (strings) 
```

或者，如果您可以使用高级[`Array`迭代方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array#Methods_2)：

```
'8=0,2=1,5=1,6=0,7=0'.split(',')
     .filter( function(a){ return /=0/.test(a); } )
     .map( function(a){ return +(a.split('=')[0]); } ) //=> [8,6,7] (numbers) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T12:01:24.427

```
var nums = [];
'8=0,2=1,5=1,6=0,7=0'.replace(/(\d+)=0,?/g, function (m, n) {
    nums.push(+n);
}); 
```

请注意，这将返回一个数字数组，而不是字符串。

或者，这是一个更简洁但更慢的答案：

```
'8=0,2=1,5=1,6=0,7=0'.match(/\d+(?==0)/g); 
```

和相同的答案，但它返回数字而不是字符串：

```
'8=0,2=1,5=1,6=0,7=0'.match(/\d+(?==0)/g).map(parseFloat); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:07:32.853

尝试这个：

```
function parse(s)
{
  var a = s.split(",");
  var b = [];
  var j = 0;
  for(i in a)
  {
     if(a[i].indexOf("=0")==-1) continue;
     b[j++] = parseFloat(a[i].replace("=0",""));        
  }
  return b;
} 
```

希望能帮助到你！

# php - 使用 PHP $_SERVER['REQUEST_URI'] 获取 URL 和编码

> ID：10448348
> 
> 赞同：1
> 
> 时间：2012-05-04T11:54:08.257
> 
> 标签：php, encoding

我尝试打印当前 URL，但编码存在小问题。在我的 URL 中可以有 ä 和 ä 之类的字母，但是当我打印 URL 时，它们会显示为 %C3%B6。

知道问题出在哪里吗？PHP 设置、代码或..？:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T11:56:55.997

尝试`urldecode()`你的字符串。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-05-30T16:31:07.637

如果请求 URI 中有 UTF8 字符中断，请尝试以下操作：

```
rawurldecode($_SERVER['UNENCODED_URL']); 
```

# android - 为什么当我单击“发送电子邮件”菜单项时没有任何反应？

> ID：10448349
> 
> 赞同：0
> 
> 时间：2012-05-04T11:54:08.427
> 
> 标签：android, email, android-intent, menu, menuitem

我正在写一本食谱书，我遇到了一个问题 - 当我点击我的菜单项时，它应该发送电子邮件，并预先填写了电子邮件地址和主题，没有任何反应......

任何想法为什么？

```
public class recipedisplayscreen extends Activity {

TextView EmailAddress;

TextView EmailSubject;

     @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.recipedisplayscreen);

        TextView MethodDisplay = (TextView) findViewById(R.id.textView3);
        TextView IngredientsDisplay = (TextView) findViewById(R.id.textView5);

        Intent i = getIntent();
        String Ingredients = i.getStringExtra("textView1");
        String Method = i.getStringExtra("textView2");
        Log.e("recipedisplayscreen", Ingredients + "." + Method);

        MethodDisplay.setText(Method);
        IngredientsDisplay.setText(Ingredients);

        EmailAddress=(TextView) findViewById(R.id.textView2); 
        EmailSubject=(TextView) findViewById(R.id.textView4); 

        ActionBar actionBar = getActionBar();
        setTitle(R.string.title);
        actionBar.setDisplayHomeAsUpEnabled(true);
        setTitle(Method);}

        @Override
        public boolean onOptionsItemSelected(MenuItem item) {
            switch (item.getItemId()) {
                case android.R.id.home:
                    // App icon in action bar clicked; go home
                    Intent intent = new Intent(this, MainScreen.class);
                    intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(intent);
                    return true;
                default:
                    return super.onOptionsItemSelected(item);
            }
        }

        public boolean onOptionsItemSelected1(MenuItem recipe_suggest) {
            final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
            emailIntent.setType("plain/text"); 
            emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{ EmailAddress.getText().toString()}); 
            emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, EmailSubject.getText()); 

            startActivity(Intent.createChooser(emailIntent, "Send mail..."));
            return true;
        }

     @Override
        public boolean onCreateOptionsMenu(Menu menu) {
            MenuInflater inflater = getMenuInflater();
            inflater.inflate(R.menu.recipe_menu1, menu);
            return true;         
    }    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T11:58:40.440

我相信这就是你想要的：D 删除**onOptionsItemSelected1**并用这个替换*onOptionsItemSelected*，这是假设 recipe_suggest 是菜单项的 ID？

```
 @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
            case android.R.id.home:
                // App icon in action bar clicked; go home
                Intent intent = new Intent(this, MainScreen.class);
                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                startActivity(intent);
                return true;
            case R.id.recipe_suggest:
                //Other menu item I believe
                final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
                emailIntent.setType("plain/text"); 
                emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{                 EmailAddress.getText().toString()}); 
                emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, EmailSubject.getText()); 

                startActivity(Intent.createChooser(emailIntent, "Send mail..."));
                return true;
            default:
                return super.onOptionsItemSelected(item);
        }
    } 
```

开关所做的是将“开关”中的对象与案例相匹配，匹配“开关”的案例会被执行，因此如果菜单项 id (MenuItem item; item.getItemId()) 与 android 的 ID 匹配.R.id.home 或 R.id.recipe_suggest （我假设您正在使用操作栏，因为您指的是 Android R 文件？）这就是我所知道的最好的方法 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T11:59:16.023

因为你有两个 onOptionsItemSelected？好吧，一个叫做 onOptionsItemSelected* *1* * ，需要将它合并到真正的那个中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:00:53.137

您不能只创建一个名为的方法`onOptionsItemSelected1()`，并期望在您点击菜单条目发送邮件时 android 会调用它。

将此方法合并到原始方法`onOptionsItemSelected()`并将其放在正确的情况下，它应该可以工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T12:03:27.070

为什么你有一个名为 onOptionsItemSelected* *1* * 的单独方法？

所有对操作项做出反应的代码都应该在**onOptionsItemSelected**中：

```
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            // App icon in action bar clicked; go home
            Intent intent = new Intent(this, MainScreen.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            return true;

        case android.R.id.email_action_item:

            final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
            (...)
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

# linux - 生产者-消费者实现

> ID：10448353
> 
> 赞同：2
> 
> 时间：2012-05-04T11:54:34.497
> 
> 标签：linux, unix, semaphore

我需要在我的项目中实现生产者-消费者问题。将创建 N 个消费者和 M 个生产者。生产者将使用 publish(v) 调用将 v 数据发送给消费者。消费者将使用 get_data(v) 调用来获取数据 v 的副本。我真的不知道如何实现它。请帮我。

我将使用 C 来实现它。我将为消费者创建 n 个进程，为生产者创建 m 个进程。如果一个生产者发布了一个数据，其他生产者在所有消费者都得到它之前不能这样做。我将使用信号量和共享内存来交换数据。

我发现了一些做类似工作的东西。但它正在使用线程，但我需要进程。我该如何改变这一点。

```
#include <pthread.h>
#include <stdio.h>
#include <semaphore.h>

#define BUFF_SIZE 4
#define FULL 0
#define EMPTY 0
char buffer[BUFF_SIZE];
int nextIn = 0;
int nextOut = 0;

sem_t empty_sem_mutex; //producer semaphore
sem_t full_sem_mutex; //consumer semaphore

void Put(char item)
{
int value;
sem_wait(&empty_sem_mutex); //get the mutex to fill the buffer

buffer[nextIn] = item;
nextIn = (nextIn + 1) % BUFF_SIZE;
printf("Producing %c ...nextIn %d..Ascii=%d\n",item,nextIn,item);
if(nextIn==FULL)
{
  sem_post(&full_sem_mutex);
  sleep(1);
}
sem_post(&empty_sem_mutex);

}

 void * Producer()
{
  int i;
  for(i = 0; i < 10; i++)
{
  Put((char)('A'+ i % 26));
}
}

void Get()
{
int item;

sem_wait(&full_sem_mutex); // gain the mutex to consume from buffer

item = buffer[nextOut];
nextOut = (nextOut + 1) % BUFF_SIZE;
printf("\t...Consuming %c ...nextOut %d..Ascii=%d\n",item,nextOut,item);
if(nextOut==EMPTY) //its empty
{
  sleep(1);
}

sem_post(&full_sem_mutex);
}

void * Consumer()
{
int i;
for(i = 0; i < 10; i++)
{
  Get();
}
}

int main()
{
  pthread_t ptid,ctid;
  //initialize the semaphores

  sem_init(&empty_sem_mutex,0,1);
  sem_init(&full_sem_mutex,0,0);

  //creating producer and consumer threads

   if(pthread_create(&ptid, NULL,Producer, NULL))
   {
  printf("\n ERROR creating thread 1");
  exit(1);
    }

 if(pthread_create(&ctid, NULL,Consumer, NULL))
  {
  printf("\n ERROR creating thread 2");
  exit(1);
   }

 if(pthread_join(ptid, NULL)) /* wait for the producer to finish */
  {
  printf("\n ERROR joining thread");
  exit(1);
  }

  if(pthread_join(ctid, NULL)) /* wait for consumer to finish */
   {
  printf("\n ERROR joining thread");
  exit(1);
}

  sem_destroy(&empty_sem_mutex);
  sem_destroy(&full_sem_mutex);

  //exit the main thread

    pthread_exit(NULL);
  return 1;
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:27:52.693

我建议你制定一个计划并开始阅读。例如：

1.  阅读有关如何创建和管理线程的信息。提示：pthread。
2.  想想线程将如何通信——通常它们使用通用数据结构。提示：消息队列
3.  想想如何保护数据结构，让两个线程都可以安全地读写。提示：互斥体。
4.  实现消费者和生产者代码。

真的，如果您想了解更多信息，您必须做一些工作并提出更具体的问题。祝你好运！

# php - 引用 bbcode 脚本中的 php 引用（嵌套引用）

> ID：10448355
> 
> 赞同：2
> 
> 时间：2012-05-04T11:54:35.250
> 
> 标签：php, nested, quote

我正在制作一个网站，用户可以在其中输入一些 BBcode 和我的 owan BBcode

但是当引号内有引号时我遇到了问题

例如 ：

[quote] [quote] 正文一 [/quote] 正文二 [/quote]

预期结果：

```
----------------------------
| |
| ------------------------------------ |
| |文字一 | |
| ------------------------------------ |
| |
|文本二 |
----------------------------

```

真正的结果：

```
----------------------------
|[quote]正文一 |
----------------------------
正文二 [/quote]

```

我的代码：

```
function bbcode($replace)
{
$bbcode = array(
"'\[center\](.*?)\[/center\]'is" => "<center>\\1</center>",
"'\[left\](.*?)\[/left\]'is" => "<div style='text-align: left;'>\\1</div>",
"'\[right\](.*?)\[/right\]'is" => "<div style='text-align: right;'>\\1</div>",
"'\[pre\](.*?)\[/pre\]'is" => "<pre>\\1</pre>",
"'\[b\](.*?)\[/b\]'is" => "<b>\\1</b>",
"'\[quote\](.*?)\[/quote\]'is" => "<div class='qrap'><small>Quote:</small><div    class='quote'><br><br>\\1</div></div>",
"'\[i\](.*?)\[/i\]'is" => "<i>\\1</i>",
"'\[enter]'is" => "<br>",
"'\[u\](.*?)\[/u\]'is" => "<u>\\1</u>",
"'\[s\](.*?)\[/s\]'is" => "<del>\\1</del>",
"'\[move\](.*?)\[/move\]'is" => "<marquee>\\1</marquee>",
"'\[url\](.*?)\[/url\]'is" => "<a href='\\1' target='_BLANK'>\\1</a>",
"'\[url=(.*?)\](.*?)\[/url\]'is" => "<a href=\"\\1\" target=\"_BLANK\">\\2</a>",
"'\[img\](.*?)\[/img\]'is" => "<img border=\"0\" src=\"\\1\">",
"'\[img=(.*?)\]'" => "<img border=\"0\" src=\"\\1\">",
"'\[email\](.*?)\[/email\]'is" => "<a href='mailto: \\1'>\\1</a>",
"'\[size=(.*?)\](.*?)\[/size\]'is" => "<span style='font-size: \\1;'>\\2</span>",
"'\[font=(.*?)\](.*?)\[/font\]'is" => "<span style='font-family: \\1;'>\\2</span>",
"'\[color=(.*?)\](.*?)\[/color\]'is" => "<span style='color: \\1;'>\\2</span>",
"'\[youtube\](.*?)\[/youtube\]'is" => "<object height='350' width='425'><param name='movie' value='http://www.youtube.com/v/\\1'><embed src='http://www.youtube.com/v/\\1' type='application/x-shockwave-flash' wmode='transparent' height='350' width='425'></object>",
"'\[quote=(.*?)\](.*?)\[/quote\]'is" => "<div class='qrap'><small>Quote:</small><div class='quote'>Originally posted by: <b>\\1</b><br><br>\\2</div></div>",
"'\[spoiler\](.*?)\[/spoiler\]'is" => "<div class='srap'>
                <div><b>Spoiler</b>: <input type='button' onclick='spoiler(this)' value='SHOW' class='sbutton'></div>
                <div>
                    <div class='spoiler' style='display:none;'>\\1</div>
                </div>
            </div>",
"'\[spoiler=(.*?)\](.*?)\[/spoiler\]'is" => "<div class='srap'>
                <div><b>Spoiler</b> for <i>\\1</i>: <input type='button' onclick='spoiler(this)' value='SHOW' class='sbutton'></div>
                <div>
                    <div class='spoiler' style='display:none;'>\\2</div>
                </div>
            </div>",
"'\[quotepost=(.*?);(.*?)\](.*?)\[/quote\]'is" => "<div class='qrap'><small>Quote:</small><div class='quote'>Originally posted by: <b>\\1</b> (<a href=\"viewcomment.php?id=\\2\" target='_BLANK'>Go to Post</a>)<br><br>\\3</div></div>"
);
$replace = preg_replace(array_keys($bbcode), array_values($bbcode), $replace);
return $replace;
}
?> 
```

有人能帮我吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:17:17.053

你的引用正则表达式 ('[quote=(. *?)](.* ?)[/quote]') 总是会匹配它在开始标记之后找到的第一个 "[/quote]" 标记，因为你正在进行干预通配符匹配 (.*?) "un-greedy" 与 ? 修饰符。

要获得您正在寻找的行为，您可以贪婪地匹配标签之间的文本，然后递归地搜索该文本以查找与这些匹配的其他引号标签。或者，我认为更简单的解决方案是将打开引号匹配和关闭引号匹配分解为数组中的两个不同条目，并分别用打开的 div 和关闭的 div html 片段替换它们。

# javascript - Flash 上传按钮不适用于页面上的多个字段

> ID：10448356
> 
> 赞同：1
> 
> 时间：2012-05-04T11:54:38.613
> 
> 标签：javascript

我从[http://webdeveloperplus.com/jquery/multiple-file-upload-with-progress-bar-using-jquery/](http://webdeveloperplus.com/jquery/multiple-file-upload-with-progress-bar-using-jquery/)获取了一个代码，其中可以上传多个文件，我已将代码集成到我的项目中，但在这里我的问题是我的表单是由用户动态创建的，因此字段名称是动态的，在这种情况下，我的 js 函数的 id 为 #swfupload-control 和 button_placeholder ：$('#button)[0]，仅适用于单个输入类型按钮，其他按钮为空白，因为它们正在获取 id 但不工作

# java - 加载 torrent 后选择文件的 Java 的 BitTorrent 库

> ID：10448362
> 
> 赞同：0
> 
> 时间：2012-05-04T11:54:54.297
> 
> 标签：java, bittorrent

我正在寻找 Java 的 torrent 客户端库。我需要的是一个库，该库在加载 torrent 后支持“uTorrent”之类的选择器。

就像您下载 .torrent 文件并将其加载到 uTorrent 时一样，它会为您提供一个带有选择框的列表，以选择您要下载的文件。

找不到这么快，所以也许有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:04:16.477

在 Azureus 中是可能的，但将功能转换为库可能需要付出很多努力。

# asp.net-mvc - 在 MVC 控制器上调用了错误的构造函数

> ID：10448363
> 
> 赞同：0
> 
> 时间：2012-05-04T11:54:54.643
> 
> 标签：asp.net-mvc, structuremap, t4mvc

我有一个 MVC 控制器，它有一个构造函数，我使用结构映射作为我的 IoC 容器和 T4MVC 来消除对魔术字符串的需求。

一方面，我有以下观点：

```
@{ Html.RenderAction(MVC.Master.SideBar()); }
@{ Html.RenderAction(MVC.Master.Breadcrumb()); } 
```

第一次调用运行良好，然而，在第二次调用中构造了一个新的 MasterController 实例，而不是使用普通构造函数，而是调用由 T4MVC 生成的受保护构造函数。我的所有服务都为空，面包屑操作失败。

为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:39:43.193

如果其他人有同样的问题，我会回答这个问题。

事实证明，T4MVC 模板需要重新运行。再次运行它，控制器现在按预期运行。

# .net - 设计器生成的 DataSet 中的 NULL 值引发我不想要的异常

> ID：10448365
> 
> 赞同：2
> 
> 时间：2012-05-04T11:55:03.107
> 
> 标签：.net, sql-server, database, dataset

我的项目中有一个数据集设计器。

我生成的一个数据集有一列可以包含空值。数据库列本身可以包含空值。它通过另一列上的 a 附加到核心表，该`LEFT OUTER JOIN`列本身可以包含空值。

设计器生成的代码是这样的：

```
 <Global.System.Diagnostics.DebuggerNonUserCodeAttribute(),  _
     Global.System.CodeDom.Compiler.GeneratedCodeAttribute("System.Data.Design.TypedDataSetGenerator", "4.0.0.0")>  _
    Public Property DeptName() As String
        Get
            Try 
                Return CType(Me(Me.tableEmployee.DeptNameColumn),String)
            Catch e As Global.System.InvalidCastException
                Throw New Global.System.Data.StrongTypingException("The value for column 'DeptName' in table 'Employee' is DBNull.", e)
            End Try
        End Get
        Set
            Me(Me.tableEmployee.DeptNameColumn) = value
        End Set
    End Property 
```

当它看到一个空值时抛出一个 InvalidCastException 。这**太疯狂了**。当然会有空值*。*我期待着他们。我没想到*每次检查数据时都会*抛出异常。

有什么方法可以提示设计者创建`String?`列而不是`String`列？我的意思是，按照我的思维方式，该列确实应该可以为空。

我正在连接到 SQL Server 9.0.50000 安装，它可能相关也可能不相关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T19:56:04.010

列名 NullValue 上有一个属性，默认情况下它设置为抛出异常。如果设置为 NULL 它应该可以工作。![检查附件图像中的属性](../Images/ae745b028adb92f60cfd626630381fc5.png)

# zend-framework - ZF1 和 dijit 选项卡容器 Zend_Dojo_Form 不显示

> ID：10448366
> 
> 赞同：0
> 
> 时间：2012-05-04T11:55:05.687
> 
> 标签：zend-framework, tabs, dojo

我有一个 Zend_Dojo_Form 构建了一个想要在这个视图中的一个视图中显示它，它将显示在一个选项卡容器中，但是该表单从未显示，尽管它出现在代码视图中，我的 dijit 菜单也从页面中消失了。这只发生在我在标签容器中打印表单时，在表单中看不到任何奇怪的东西。

```
<script type="text/javascript">
    dojo.require("dijit.layout.TabContainer");
    dojo.require("dijit.layout.ContentPane");
</script>
<?php 
$this->form->setAttrib("Height", "450px")->setAttrib("WIDTH", "550px");
 ?>
<div dojoType="dijit.layout.TabContainer" style="width: 600px; height: 400px;"
tabPosition="left-h" tabStrip="true" doLayout="false">
    <div dojoType="dijit.layout.ContentPane" title="Grupo: <?php print $this->idacgroup ?>" selected="true">
        <span><?php print $this->form ?></span>
    </div>
    <div dojoType="dijit.layout.ContentPane" title="Anexar utilizador">
        Lorem ipsum and all around - second...
    </div>
    <div dojoType="dijit.layout.ContentPane" title="Remover Utilizador">
        Lorem ipsum and all around - last...
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T13:01:31.997

我通过使用 Zend_View 功能来构建布局和 tabContainer 解决了这个问题，这是我使用的代码。

```
<?php

$this->tabContainer()->captureStart('main-container',
                                    array('design' => 'headline'),
                                    array(
                                        "tabPosition" => 'left',
                                        'style'=>'height:400px;width:800px'
                                     ));

echo $this->contentPane(
 'form1',
 $this->form,
 array('region' => 'top','title'=>'Grupo:' . $this->idacgroup),
 array('style' => 'background-color: white;')
);

$join = $this->render("group/join.phtml");

echo  $this->contentPane(
     'usersadd',
     $join,
     array('region' => 'left', 'title'=>'Adicionar Utilizadores'),
     array('style' => 'width: 200px; background-color: white;')
    );

$this->nstore++;

$unjoin = $this->render("group/join.phtml");

echo $this->contentPane(
 'userdel',
 $unjoin,
 array('region' => 'center','title'=>'Remover Utilizadores'),
 array('style' => 'background-color: white;')
);

echo $this->tabContainer()->captureEnd('main-container'); 
```

这很好，我做了另一件事，在“join.phtml”代码中，我使用 div 作为数据存储，这导致了同样的问题并破坏了 HTML，所以我将 div 更改为数据存储的跨度.

# regex - 正则表达式：匹配除以Thanks/结尾的任何字符串

> ID：10448375
> 
> 赞同：1
> 
> 时间：2012-05-04T11:55:45.830
> 
> 标签：regex, google-analytics, negative-lookahead, goal-tracking

我正在尝试在 Google Analytics 中设置目标漏斗。它适用于我们要跟踪的在线报价请求系统。基本上所有包含报价请求表单的页面都具有独特的动态生成的相似 url。URL 的格式为：

> /quoterequest/categoryone/categorytwo/productname/

我有用于跟踪的正则表达式：

```
^/quoterequest/([A-Za-z0-9/-]+)? 
```

今天我们在用户提交表单后添加了一个感谢页面。URL 总是相同的：

> /引用请求/谢谢/

我想修改上面的正则表达式，使其继续匹配任何报价请求 URL，但不是那个谢谢 URL。我一直在尝试不同的变化，包括 t。他消极地展望未来，但不幸的是我对正则表达式不是很有经验，我认为我一直在做完全错误的事情。谁能给我一些关于这样做的正确方法的见解？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:00:03.483

您可以使用：

```
^\/quoterequest\/(?!thanks\/?$)(?:([A-Za-z0-9\-]+)\/?)*$ 
```

[**看见**](http://www.rubular.com/r/8uHA9Qpwry)

# iphone - iPhone 如何展示我的文档目录中的照片？

> ID：10448383
> 
> 赞同：1
> 
> 时间：2012-05-04T11:56:05.483
> 
> 标签：iphone, ios, cocoa-touch, uiimagepickercontroller, photolibrary

我一直在使用 UIImagePicker 控制器来拍照并将其保存到我的文档目录中。现在我希望能够将它们呈现给用户进行挑选。UIImagePicker 具有简洁的功能

```
imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary; 
```

当我设置此属性时，会显示库中的所有图像。有什么方法可以使用 UIImagePicker 从文档目录中展示我的照片吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:04:54.147

UIImagePicker 唯一支持的来源是库、相机或保存的相册。请参阅 UIImagePickerControllerSourceType @ [http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)

```
enum {
   UIImagePickerControllerSourceTypePhotoLibrary,
   UIImagePickerControllerSourceTypeCamera,
   UIImagePickerControllerSourceTypeSavedPhotosAlbum
};
typedef NSUInteger UIImagePickerControllerSourceType; 
```

# iphone - 使用 #define 访问 App Delegate 对象不起作用

> ID：10448385
> 
> 赞同：7
> 
> 时间：2012-05-04T11:56:07.867
> 
> 标签：iphone, objective-c

我在不同的类中使用 App Delegate 对象。我想在整个项目中访问它。我在 Prefix.pch 文件中将此对象定义为

```
#define Appdelegate (AppDelegate *)[[UIApplication sharedApplication] delegate] 
```

但问题是 Appdelegate 变量不访问 App 委托变量。它显示错误。

但如果我使用此代码工作正常

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
appDelegate.variablename; 
```

我这样做是正确的还是有办法做我所做的？

提前致谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T11:57:56.153

应该：

```
#define Appdelegate ((AppDelegate *)[[UIApplication sharedApplication] delegate])
//                  ^----------------------parenthesis--------------------------^ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-22T14:10:07.503

正如这个问题及其答案所表明的那样，依赖预处理器通常是一个坏主意。

1.  很容易出错。我们都对运算符优先级产生了良好的直觉，但预处理器却毫无头绪。为了防止意外的上下文问题，您通常需要将所有内容都包含在额外的括号和大括号中。

2.  当代码在做另一件事时，很容易说服自己你在做一件事。当事情中断时，编译器的错误消息和调试器都不太可能有太大帮助。

3.  最重要的是，预处理器可以让你接受一个坏主意并在程序中广泛传播。这里的坏主意是全局使用 App Delegate。

全局变量是一种代码味道。通过将全局变量填充到预编译头文件中来使全局变量更加全局化的努力是一种代码异味。如果框架认为你应该可以从任何地方访问 AppDelegate，你就不需要跳过这些（适度的）箍！

所以，当你想做这样的事情时，很高兴知道预处理器在那里并且 pch 头文件在那里，但请记住，你正在与框架作斗争，并且几乎肯定会犯设计错误。在您的上下文中这可能没问题，但这是需要知道的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-30T09:44:57.190

您需要在声明委托宏的位置导入 AppDelegate 文件：

```
#import "AppDelegate.h" 
```

然后定义

```
#define Appdelegate (((AppDelegate *)[[UIApplication sharedApplication] delegate])) 
```

# php - php zip文件到多个zip文件

> ID：10448389
> 
> 赞同：1
> 
> 时间：2012-05-04T11:56:15.533
> 
> 标签：php, zip

我正在使用 php 生成一个最大为 50MB 的文件。在脚本结束时，我需要将文件发送到给定的电子邮件地址。我想将文件分成多个块，这样我就可以发送每个附件都不太大的电子邮件。在我看来，显而易见的解决方案是将文件压缩成 zip 部分。但我似乎无法找到如何在 php 中使用 zip 拆分文件。

任何人都可以帮助我，或者指出我更好的解决方案吗？:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:52:23.863

easyzip 对当前版本的 php 有一个错误。替换此行：

```
define(FUNCTION_NOT_FOUND,'Error: gzcompress() function is not found');
define(FILE_NOT_FOUND,'Error: file is not found');
define(DIRECTORY_NOT_FOUND,'Error: directory is not found'); 
```

与以下：

```
define("FUNCTION_NOT_FOUND",'Error: gzcompress() function is not found');
define("FILE_NOT_FOUND",'Error: file is not found');
define("DIRECTORY_NOT_FOUND",'Error: directory is not found'); 
```

# c# - 如何使用 VisualStudio git 扩展通过密码访问来访问远程存储库？

> ID：10448392
> 
> 赞同：3
> 
> 时间：2012-05-04T11:56:18.790
> 
> 标签：c#, visual-studio, git, git-extensions

我有一个远程 git 服务器，它不支持为身份验证目的注册公钥，而是需要密码。通过命令行推送到此服务器时，我可以输入密码并且它工作正常。

当我尝试使用带有 git 扩展的 Visual Studio 推送到同一个远程存储库时，推送只是锁定，因为它被要求输入密码，但似乎无法处理。我无法弄清楚我在 git 扩展配置中指定密码的位置。

我错过了明显的吗？如果是这样，我如何配置密码？还是 git 扩展仅适用于私钥/公钥身份验证的情况？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:45:16.757

不幸的是，这是一个缺失的功能。Git 扩展只支持私钥/公钥认证。您必须使用命令行进行 https 和密码身份验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:54:04.577

根据您的密码和用户名，您可以使用 username:password url 格式通过 https 访问 repo：

```
https://username:password@domain.tld/repo-path 
```

例如，如果我使用适用于该格式的密码访问 github 存储库（即其中没有“：”或“@”；可能还有其他字符会破坏它，但那些显然会) 我通过 http(s) 获得对 repo 的读写访问权限。

当然，这是完全不安全的，但在紧要关头它应该可以工作。

# php - 提交到mysql后保持选择选项

> ID：10448396
> 
> 赞同：0
> 
> 时间：2012-05-04T11:56:34.463
> 
> 标签：php, option, selected

我有以下内容：

```
<td align="left">Gender</td>
<td align="left"><select name="gender" id="gender">
<option value="Male" <?php if($rows["gender"] == "male"){ echo 'selected="selected"'; } ?>>Male</option>
<option value="Female" <?php if($rows["gender"] == "female"){ echo 'selected="selected"'; } ?>>Female</option>
</select></td>

<td align="left">Status</td>
<td align="left"><select name="status" id="status">
<option value="active" <?php if($rows["status"] == "active"){ echo 'selected="selected"'; } ?>>Active</option>
<option value="inactive" <?php if($rows["status"] == "inactive"){ echo 'selected="selected"'; } ?>>Inactive</option>
</select></td> 
```

我遇到的问题是，当我想更新我选择的给定人时，例如：女性和非活动信息被重置，我必须再次选择所有内容。所以它不是预先选择的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:08:51.883

如果您在同一页面上提交表单，则将变量更改`$rows[]`为`$_POST[]`. 我希望你使用表单方法`POST`插入到你的数据库中。

如果您在不同的页面上提交，那么您将必须相应地从数据库表中检索更新的行，那么如果您使用相同的变量，您的代码应该可以工作。

但是我建议您在同一页面上提交，因为这样更容易实现您想要的内容，或者您​​可以使用 ajax 发布和更新数据库数据而不会导致表单重置。我希望这有帮助

# algorithm - 最小生成树和最短路径树的区别

> ID：10448397
> 
> 赞同：17
> 
> 时间：2012-05-04T11:56:35.540
> 
> 标签：algorithm, data-structures, graph, shortest-path, minimum-spanning-tree

这是一个练习：

> 要么证明以下内容，要么举一个反例：
> 
> (a) 无向图的最小生成树中的一对顶点之间的路径一定是最短（最小权重）路径吗？
> 
> (b) 假设图的最小生成树是唯一的。无向图的最小生成树中的一对顶点之间的路径是否一定是最短（最小权重）路径？

我的答案是

（一种）

不，例如对于图0、1、2，0-1是4，1-2是2，2-0是5，那么0-2的真实最短路径是5，但是mst是0-1-2 , 在 mst 中, 0-2 是 6

(二)

**我的问题来自这个（b）。**

我不明白如何`whether the MST is unique`影响最短路径。

首先，我的理解是，当边的权重不明显时，多个MST可能同时存在，对吧？

其次，即使MST是唯一的，上面（a）的答案仍然适用于（b），对吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-04T12:09:40.620

所以让我们看一个非常简单的图表：

```
(A)---2----(B)----2---(C)
 \                    /
  ---------3---------- 
```

该图的最小生成树由两条边`A-B`和组成`B-C`。没有其他边集形成最小生成树。

但当然，从`A`到的最短路径`C`是`A-C`，这在 MST 中是不存在的。

**编辑**

所以要回答 (b) 部分，答案是否定的，因为存在一条不在 MST 中的较短路径。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T12:16:31.797

关于（a），我同意。

关于（b），对于某些图，可能存在更多具有相同权重的最小生成树。考虑一个顶点为 a,b,c 的圆 C3；权重 a->b=1，b->c=2，a->c=2。该图有两个 MST，{abc} 和 {cab}。

尽管如此，你的反例仍然成立，因为 MST 在那里是独一无二的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-10T18:54:22.020

## 广告一）

一个非常简单的可视化将是：

## 图中的 MSP：

[![在此处输入图像描述](../Images/0840330fed86db6c31416d8cc0102a25.png)](https://i.stack.imgur.com/yHmpB.png)

## A 和 C 之间的最短路径：

[![在此处输入图像描述](../Images/46d2d5d1098de476c3202904c9b4ec64.png)](https://i.stack.imgur.com/95Inq.png)

## 广告 b)

我猜想 MSP 的唯一性意味着一个图中只有 1 个 MSP MSP。所以：首先）是的，如果边的权重不明显，则可能同时存在多个 MST。在我们的图表中，另一个可能的 MSP 将包括 arc DC 而不是 AB（作为示例）。第二）MST 的唯一性不影响 a）的答案。举个例子： [![在此处输入图像描述](../Images/0840330fed86db6c31416d8cc0102a25.png)](https://i.stack.imgur.com/yHmpB.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-03T18:32:08.427

MST不是和起始节点有关吗？！
然后他试图从 MST 起始节点获取最短路径。因此，是的，最短路径由 MST 给出，从`A`!

# javascript - 使用 Javascript 更改 Tumblr 音频播放器颜色

> ID：10448400
> 
> 赞同：0
> 
> 时间：2012-05-04T11:56:47.433
> 
> 标签：javascript, flash, tumblr

[由于这个问题](https://stackoverflow.com/questions/10421855/javascript-breaking-audio-players)，我被迫通过 JavaScript 在我的主题中加载 tumblr 音频播放器。加载发生如下：

```
$(window).load(function() {
    setTimeout(function() {                        
        $('.audio-player').each(function(){
            var audioID = $(this).parents(".audio").attr("id");
            var $audioPost = $(this);
            var color = "000000"; //new color
            $.ajax({
                url: '/api/read/json?id=' + audioID,
                dataType: 'jsonp',
                timeout: 50000,
                success: function(data){
                    if ($audioPost.html().indexOf("is required to") != -1) {
                        $audioPost.find('#audio_player_'+audioID).replaceWith('<div style=\"background-color:white;">' + data.posts[0]['audio-player'].replace("color=FFFFFF", "color=" + color) +'</div>'); //replace color here
                    }
                }
            });
        });
    }, 2000);
}); 
```

尽管使用了 {AudioPlayerBlack} 标签，插入代码的音频播放器是白色的，所以我想改变它。我添加了两行（在代码中注释），它有点工作：播放器变成黑色，但所有控件都是不可见的。而不是预期的

![普通黑人球员](../Images/8cd9c470c784901c16ef564739b5ee15.png)

我明白了

![JavaScript 加载黑色播放器](../Images/a24643eae71e915b908115dedc30f399.png)

您可以在此处查看实时示例：http: [//tmbeta.tumblr.com/](http://tmbeta.tumblr.com/)（顺便说一句，测试手机，因此您需要调整窗口大小以使其小于 480 像素宽）。这是[用于音频帖子的 tumblr api](http://www.tumblr.com/docs/en/api/v2#audio-posts)，以防万一。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T20:42:58.973

Tumblr 音频播放器的配色方案不受请求 URL 中传递的颜色代码的约束，正如您所假设的 - 它是`swf`(Flash) 文件本身的一部分。要获得黑色播放器，您需要请求`audio_player_black.swf`而不是默认的 (white) `audio_player.swf`。在您的代码中，将最里面的代码行更改为

```
$audioPost.find('#audio_player_'+audioID).replaceWith('<div style=\"background-color:white;">' + data.posts[0]['audio-player'].replace("audio_player.swf", "audio_player_black.swf") +'</div>'); 
```

你应该很高兴。当然，您也可以摆脱`color`定义:)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-11T20:43:11.560

我不知道这是否合适，但如果有人试图简单地更改标准 tumblr 音频播放器的背景颜色，我发现这个简单的代码可以工作。

（还没有到处检查，添加颜色而不是替换可能是错误的代码，但它似乎运行正常？）

```
$('iframe.tumblr_audio_player').each(function(){
    var audio = $(this).attr('src')
    $(this).attr('src', audio + '&color=e84d37'); // replace w/ hex of whatever color
}); 
```

# mvvm-light - 如何让 MVVM Light 与 Metro 中的分组项目页面很好地配合使用？

> ID：10448403
> 
> 赞同：5
> 
> 时间：2012-05-04T11:57:09.350
> 
> 标签：mvvm-light, windows-runtime, winrt-xaml

我正在尝试按照此博客文章中的示例使用 MVVM Light 框架来实现 Metro 风格的分组项目页面，但使用 ViewModelLocator 来提供可混合性：

[http://mikaelkoskinen.net/post/winrt-tutorial-mvvm-gridview-semanticzoom.aspx](http://mikaelkoskinen.net/post/winrt-tutorial-mvvm-gridview-semanticzoom.aspx)

我已经完成了这项工作，不幸的是网格本身没有出现在设计器中（这是我使用 MVVM Light 的重点）。我已经毫无问题地绑定了标题，所以我知道视图模型已正确绑定。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-10T14:39:23.980

我有同样的问题。问题是，如果您使用的是 CollectionViewSource，则需要明确说明，如下所示：

由于 MVVM Light 将设计时服务注入到视图模型中，您希望它能够获取您的服务并将设计时数据通过您的视图模型推送到 UI。但事实并非如此。

您需要为其提供一个明确的设计时实例才能使其工作：

有一篇关于[在设计模式下使用 CollectionViewSource](http://jack.ukleja.com/using-ddesignsource-for-design-time-datagrid-grouping-with-sample-data/)的有用文章可能会有所帮助。

# powershell - 可以在没有分配的情况下破坏 powershell 管道 monad 吗？

> ID：10448411
> 
> 赞同：0
> 
> 时间：2012-05-04T11:57:39.463
> 
> 标签：powershell

在我遇到的所有示例中，管道单子仅在进行分配时才被破坏。那是：

```
$result = ls | %{$_.FullName} | select -first 
```

在没有赋值的情况下，上述语句的输出是一个只有一个项目的管道（由于使用`select -first`），默认为写入`write-host`。

是否可以破坏管道 monad，以便结果是单个值*而不*将其分配给变量或等效项（例如，将结果作为参数传递给接受字符串的 Cmdlet）

（相当于我所追求的 LINQ 是，它通过返回第一个实际值`First()`来打破单子）`IEnumerable`

注意：我对这个问题的答案没有实际用途，它只是学术性的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:08:04.747

**编辑**Roman 是对的，不知道它对我来说是如何工作的。更新。

似乎最简单的方法是简单地访问第一项：

```
( @{Value = 1}, @{Value = 2} )[0].Value 
```

如果没有物品，它将优雅地面对：

```
@()[0].Value 
```

# java - 尝试执行 java.class 时获取 java.lang.NoClassDefFoundError

> ID：10448420
> 
> 赞同：0
> 
> 时间：2012-05-04T11:58:13.730
> 
> 标签：java

我在 MainJPrint.java 文件中创建了以下类

```
import com.XXXXX.pdfPrint.PDFPrint;

public class MainJPrint
{
   public static void main(String[] args) 
    { 
        //System.out.println("Hello World!"); 
        print(".....");
    }   
    public static String print (final String url)
    {
        Object rc = AccessController.doPrivileged(new java.security.PrivilegedAction() 
        {
            public Object run()
            {
                 ...
            }
         }
    }
} 
```

在同一个文件夹中，我有一个 jar 存档**jPrint.jar** 我使用以下命令编译该类

```
>javac -classpath jPrint.jar MainJPrint.java 
```

当我尝试执行生成的类文件时，出现此错误：

```
>java MainJPrint    

 java.lang.NoClassDefFoundError: com/XXXXX/pdfPrint/PDFPrint 
```

如果我取消注释 Hello World 行并注释下一行，程序运行良好。

我正在使用安装在`C:\j2sdk1.4.2`. 我也安装了其他 java 版本（在 C:\Program Files\Java: jre 1.6.0_01、jre 1.6.0_02、j2re1.4.2、jre6、jre7、jdk1.7.0_03）

PATH 变量包含`C:\j2sdk1.4.2\bin`路径，但是我认为 java.exe 是从较高版本加载的，但这没关系，我可以这样称呼它

```
>C:\j2sdk1.4.2\bin\java.exe MainJPrint 
```

jPrint.jar 是第三方存档，我需要创建一个公开方法的小程序，以便我可以使用 javascript 调用它。我不是Java开发人员，我遇到了一些小麻烦，而且我真的走到了尽头。

我尝试了其他选项，例如：

```
>java MainJPrint -cp .
>java MainJPrint -cp jPrint.jar 
```

那么如何执行使用位于单独存档中的类的类文件呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:16:10.310

要执行依赖于外部 JAR 的类，您需要在命令行上指定类路径的所有元素。

如果您不指定类路径，Java 会自动使用`.`（当前目录），这就是为什么如果 MainJPrint 不依赖于 jPrint.jar，您的调用`java MainJPrint`会起作用。

但是当你指定 时`-cp jPrint.jar`，Java 不会自动将当前目录添加到类路径中，这意味着它找不到 MainJPrint。您需要同时指定两者。在 Mac/*nix 上，以下调用应该有效：

```
java -cp jPrint.jar:. MainJPrint 
```

或在 Windows 上：

```
java -cp jPrint.jar;. MainJPrint 
```

# java - 控制器库直接访问 HttpServletRequest

> ID：10448421
> 
> 赞同：0
> 
> 时间：2012-05-04T11:58:13.813
> 
> 标签：java, spring-mvc

我的应用程序中有许多控制器，它们扩展了一个中央控制器类。目前，在每个控制器函数中，我必须将请求传递给此函数，以便我的函数获取当前用户名。这个控制器类是否可以在不需要它作为额外参数的情况下自行获取请求？

```
public class Controller {
    protected String environment;

    public Controller () {

    }

    public ModelAndView prepareModel (HttpServletRequest request, ModelAndView model) {
        contentDao.clearExpiredLocks();

        model.addObject("currentUser", contentDao.findUser(request.getRemoteUser()));

        //define current environment
        this.environment = (request.getRequestURL().indexOf("localhost") > 0) ? "dev" : "uat";
        model.addObject("environment", this.environment); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:25:46.837

你可以使用这样的东西：

```
public abstract class AbstractController {

    protected HttpServletRequest req

    protected AbstractController(HttpServletRequest req) {
        this.req  = req
    }
}

public class ConcreteController extends AbstractController {

    protected ConcreteController(String name) {
        super(name);
    }

    private void getUserName(){
        this.req.getRemoteUser();
    }    
} 
```

这只是一个快速提示，我相信有更多的可能性如何做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:47:13.777

`HttpServletRequest`您可以按如下方式获取电流：

```
HttpServletRequest request = (HttpServletRequest) RequestContextHolder
    .currentRequestAttributes()
    .resolveReference(RequestAttributes.REFERENCE_REQUEST); 
```

您可以在控制器的方法中使用此代码，或者使用它将请求公开为请求范围的 bean，并将相应的范围代理作为控制器的字段注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:39:03.173

就我而言，我所做的是：我得到用户 MainController.getLoginPerson() 并在所有控制器中使用所有用户的信息。所有控制器都扩展到 MainController。这是 MainController.getLoginPerson() 方法：

```
MainController.getLoginPerson() {
    // calls to authentication service method
    authenticationService.getLoginPerson();
}

authenticationService.getLoginPerson() {
            Authentication auth = SecurityContextHolder.getContext().getAuthentication();
        if (auth != null) {
            return (UserPrincipalImpl) auth.getPrincipal();
        } else {
            return null;
        }
} 
```

# xml - 处理基于 XML 的 DSL

> ID：10448424
> 
> 赞同：1
> 
> 时间：2012-05-04T11:58:25.803
> 
> 标签：xml, svg, swi-prolog

SWI-Prolog 作为一个通用的 XML 处理器提供了很多东西。

`library(sgml)`用于读/写 XML 结构化格式，`library(xpath)`用于导航等等...但是如果我尝试读取 SVG，它是有效的 XML，我会收到以下消息：

```
ERROR: SGML2PL(xml): ...my_file...svg:2: file "...myfile.path.../http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" does not exist 
```

错误的。

有人对此有提示吗？我还想重写最终修改的文件内容，当然保留独特的 DTD。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T21:52:16.267

我找到了一个解决方案，将我用 curl 获得的 DTD 文件保存在本地，我可以请求 SGML 库使用它。

```
...
    new_dtd(svg, DTD),
    path(Dir, 'svg11.dtd', DtdFile),
    load_dtd(DTD, DtdFile),

    path(Dir, 'html_labels.svg', SvgFile),
    load_structure(SvgFile, [Svg], svg:[dtd(DTD), dialect(xmlns), xml_no_ns(quiet)]),
... 
```

正如我所说，我是`svg11.dtd`这样的

```
$ curl http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd > svg11.dtd 
```

# django-celery - Celerybeat 启动后立即关闭

> ID：10448425
> 
> 赞同：6
> 
> 时间：2012-05-04T11:58:31.560
> 
> 标签：django-celery, celeryd, celerybeat

我有一个使用 celeryd 和 celerybeat 的 django 应用程序。两者都设置为作为守护程序运行。celerybeat 任务不会被执行，因为 celerybeat 没有正确启动。根据日志，它立即关闭：

```
[2012-05-04 13:02:49,055: WARNING/MainProcess] celerybeat v2.5.1 is starting.
[2012-05-04 13:02:49,122: INFO/MainProcess] process shutting down
[2012-05-04 13:02:49,122: DEBUG/MainProcess] running all "atexit" finalizers with priority >= 0
[2012-05-04 13:02:49,134: DEBUG/MainProcess] running the remaining "atexit" finalizers 
```

我从 /etc/int.d/celerybeat start 开始

这是 /etc/default/celerybeat 配置：

```
# Where the Django project is.
CELERYBEAT_CHDIR="/var/www/path_to_app/cms/"

# Python interpreter from environment.
ENV_PYTHON="$CELERYBEAT_CHDIR/bin/python"

# Name of the projects settings module.
export DJANGO_SETTINGS_MODULE="cms.settings"

# Path to celerybeat
CELERYBEAT="$ENV_PYTHON $CELERYBEAT_CHDIR/cms/manage.py celerybeat"

# Extra arguments to celerybeat
CELERYBEAT_LOG_LEVEL="DEBUG"
CELERYBEAT_USER="www-data"

CELERYBEAT_GROUP="www-data" 
```

任务计划在settings.py中设置：

```
CELERYBEAT_SCHEDULE = {
    # Executes every  morning at 7:00 A.M
    "every-morning": {
        "task": "cms.tasks.get_recent_posts_for_all_pages",
        "schedule": crontab(hour=7, minute=00)
    },
} 
```

当我使用 ./manage.py celerybeat 从 shell 运行 celerybeat 时，它似乎运行良好。

celeryd 配置中还有一个 celerybeat 部分，但我认为其中一个被忽略了。

问候西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-06T21:24:39.513

也许你错过了使用像rabbitmq这样的经纪人 [https://web.archive.org/web/20180703074815/http://celery.readthedocs.io/en/latest/getting-started/brokers/rabbitmq.html](https://web.archive.org/web/20180703074815/http://celery.readthedocs.io/en/latest/getting-started/brokers/rabbitmq.html)

# asp.net-mvc-3 - ASP.NET-MVC3：如何在控制器中获取操作的 url

> ID：10448427
> 
> 赞同：0
> 
> 时间：2012-05-04T11:58:37.930
> 
> 标签：asp.net-mvc-3, url, actionresult

在 ASP.NET MVC3 应用程序中

我有一个 Action 方法，它返回一个文件供用户下载。

在 HomeController 中：

```
[HttpGet]
public ActionResult DownloadFile()
{
    pathToReturn = FileManager.GetPathOfFile();
    return File(pathToReturn, Path.GetFileName(pathToReturn));
} 
```

当他单击视图中的按钮时，我调用它：

```
<input type="button" onclick="window.location.href='@Url.Action("DownloadFile", "Home")';" value="Download File"/> 
```

如何从地址栏访问此操作？（我想删除按钮）

该操作的网址是什么？（我应该在地址栏中输入什么才能下载文件？这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:35:16.293

> [http://yourserver/home/DownloadFile](http://yourserver/home/DownloadFile)

前提是您没有更改路由

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:30:16.697

假设这取决于您的路由规则......但假设您使用的是默认规则，您应该使用 url 访问您的操作：

```
http://yourserver/yourapplication/Home/DownloadFile 
```

# c# - CodeFirst C# 生成

> ID：10448430
> 
> 赞同：0
> 
> 时间：2012-05-04T11:58:42.383
> 
> 标签：c#, entity-framework, entity, code-first

我想使用一个工具来生成 C# CodeFirst 实体和映射。我使用过 Entity Framework Power Tools，正在寻找更好的解决方案。

以 Entity Framework Power Tools 为例。这允许使用为每个实体和映射生成的 C# 类对数据库中的所有表进行反向工程。问题是您必须全部生成它们并且不能只选择几个。

是否有这样的工具可以为您选择的表生成这些 C# 实体和映射？我不想手动编写这些 C# Code First 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:09:07.360

如果您有一个现有的数据库，您可能可以将模型优先方法与 DbContext 模板一起使用。看看这个演练[http://blogs.msdn.com/b/adonet/archive/2011/09/28/ef-4-2-model-amp-database-first-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2011/09/28/ef-4-2-model-amp-database-first-walkthrough.aspx)。您可以在从数据库创建模型后对其进行修改。此外，在执行此操作时，此博客文章也可能有用： http: [//blog.oneunicorn.com/2012/02/26/dont-use-code-first-by-mistake/](http://blog.oneunicorn.com/2012/02/26/dont-use-code-first-by-mistake/)

# regex - 如何在 git svn 中评估忽略路径？

> ID：10448431
> 
> 赞同：5
> 
> 时间：2012-05-04T11:58:43.467
> 
> 标签：regex, git, git-svn, ignore

我有一个简单的回购结构，如下所示：

```
trunk
    code
    othercode
    doc
    misc
branches
    b1
        code
        othercode
        doc
        misc
    b2
tags
    t1
    t2 
```

我正在尝试使用`git svn`它来克隆它，但想在主干+所有标签和分支上省略`doc`和。`misc`但是，该`ignore-paths`选项的行为并不像我期望的那样。

```
ignore-paths = (doc|misc) 
```

似乎有效，但我担心它也会排除`trunk/code/proj1/doc/`我想保留的路径。

```
ignore-paths = ^(doc|misc) 
```

不起作用 -`doc`并被`misc`初始`git svn fetch`命令拉入。我如何获得一个只与这样的根目录匹配的工作正则表达式？手册页没有说明是否`ignore-paths`与“相对”路径匹配，该路径最终将位于 git clone （`doc`等）的根目录或 SVN 远程（`branches/b1/doc`等）中看到的“完整”路径，或其他内容别的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-06T02:46:15.210

它似乎与 SVN 存储库中的完整路径匹配。这个包含SVN 路径的 // 部分的正则表达式起到了`trunk`作用`tags`：`branches`

```
ignore-paths = ^(trunk|tags/[^/]*|branches/[^/]*)/(doc|misc)/ 
```

换句话说：路径必须以以下之一开头：

*   `trunk`
*   `tags/`，可能后跟一个路径段（不包含`/`）
*   `branches/`，可能后跟一个路径段（不包含`/`）

...然后路径段命名为`doc`or `misc`。

# css - webkit 浏览器隐藏 LI A (display:block) 元素。有时

> ID：10448440
> 
> 赞同：1
> 
> 时间：2012-05-04T11:59:13.167
> 
> 标签：css, google-chrome, menu, safari, webkit

我正在构建（有点实验性）菜单，它建立在经典的“ul li”基础上，除了“a”元素设置为 display:block 以实现精确定位和调整大小。一些 transform:rotate 也会出现，但这不会影响以下行为：

[除了 webkit 之外的所有浏览器都](http://damuza.cz/tmp/01/index.html)以相同的方式（正确）显示所有菜单项。但是 webkit 隐藏了子项（'item 2a'、'item 2b'、'item 3a'、...）。当光标悬停在它们应该出现的区域上时，链接显然会随着光标的变化而出现，但它们是不可见的。奇怪的是，当我将这些不可见元素的大小设置为稍微重叠它们的指定空间（它们的父 LI 的高度）时，它们看起来是可见的（[这里](http://damuza.cz/tmp/02/index.html)）

你知道这里发生了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:22:33.270

我不喜欢你使用边距的方法，它很复杂。认为风格搭配定位会更好。子元素的绝对位置

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:23:20.120

就个人而言，我认为负边距和 css 旋转结合起来可能有点痛苦。

如果我是你我会

1.  将 a.rotate 链接设置为绝对定位，这样它们就不会扰乱流程。
2.  转储负边距
3.  玩一下

我在这里做了这个例子：http: [//jsfiddle.net/958qQ/](http://jsfiddle.net/958qQ/) 其余的应该很容易。

# c# - 如何通过 Massive 连接到数据库

> ID：10448443
> 
> 赞同：0
> 
> 时间：2012-05-04T11:59:19.300
> 
> 标签：c#, massive

如何通过 Massive 连接到数据库？

Massive 中有一种方法可以打开连接，但它接受连接字符串的名称。我想给它连接字符串。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:07:45.927

在 Open() 方法中的 Massive 代码中创建了 DynamicModel，在 DynamicModel 构造函数中我发现了这一行（[Massive.cs](https://github.com/robconery/massive/blob/master/Massive.cs) 127 行）：

```
ConnectionString = ConfigurationManager.ConnectionStrings[connectionStringName].ConnectionString; 
```

这意味着您需要将连接字符串存储在配置文件中，并将相应的连接字符串名称传递给 Open 方法。

您需要的是创建重载方法来接受连接字符串。这是一个例子：

```
public static DynamicModel Open(string connectionString, string providerName="System.Data.SqlClient") 
{
        dynamic dm = new DynamicModel(connectionString, providerName);
        return dm;
}

public DynamicModel(string connectionString, string providerName ="System.Data.SqlClient", string tableName = "", 
     string primaryKeyField = "", string descriptorField = "") 
{
        TableName = tableName == "" ? this.GetType().Name : tableName;
        PrimaryKeyField = string.IsNullOrEmpty(primaryKeyField) ? "ID" : primaryKeyField;
        DescriptorField = descriptorField;

        _factory = DbProviderFactories.GetFactory(providerName);
        ConnectionString = connectionString;
} 
```

# security - RS232 通信中是否可能进行欺骗攻击？

> ID：10448447
> 
> 赞同：-2
> 
> 时间：2012-05-04T11:59:42.310
> 
> 标签：security, serial-port, spoofing, serial-communication

我是网络安全领域的菜鸟。我很想知道是否有可能对像 RS232 这样的串行通信进行欺骗攻击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:59:03.473

为真正的串行端口欺骗数据的概念有点有趣，当您可以看到电缆的另一端时，很难欺骗任何东西。尽管如此，串行端口还是卷土重来，许多设备驱动程序模拟虚拟串行端口，以便用户模式代码与它们进行交互。包括蓝牙之类的驱动程序，那时很难看到电缆的另一端。

是的，如果您可以替换设备驱动程序，那么欺骗是微不足道的。幸运的是，更换设备驱动程序并非易事。一般而言，任何不安全到允许更换驱动程序的机器对于任何类型的攻击都是开放的，而不仅仅是通过串行端口。

# c# - 如何从资源文件创建超链接？

> ID：10448448
> 
> 赞同：0
> 
> 时间：2012-05-04T11:59:48.287
> 
> 标签：c#, asp.net, hyperlink

我有一些从资源文件加载的文本。通常，要获得动态内容，我会使用：

```
string.Format(GetLocalResourceObject("SomeText"), PhoneNumberAsString) 
```

我想对链接做同样的事情，只有链接需要是应用程序相关的，因为我有 URL`mysite.com/page.aspx`和`mysite.com/fr/page.aspx`.

我通常使用`<asp:HyperLink />`标签来创建链接，因为我可以在开始处放一个波浪线`NavigateUrl="~/page.aspx"`。但是，我不知道如何让动态超链接显示为字符串而不将其作为控件添加到某些东西。

简单地写`ToString()`输出`System.Web.UI.WebControls.HyperLink.`。

如何使用 ASP.NET Webforms 从资源文件中获取链接并使其成为超链接？

**更新**

在答案的一些帮助下，我现在在我的页面上有以下代码：

```
<p><%= string.Format(GetGlobalResourceObject("Resource", "MoreThan1000Users").ToString(), ResolveUrl("~/contact-us.aspx")) %></p> 
```

在我的资源文件中，我有：

```
If you would like more than 1000 users please <a href="{0}">call our sales team</a>. 
```

这似乎是一种很好的做法，还是有另一种方法可以实现我正在做的事情？我不知道我是否应该高兴资源文件中有 HTML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:26:07.857

由于您尚未发布代码，我猜您在某处有一个 HyperLink WebControl 对象，您正在点击 ToString() 。如果是这种情况，您可以使用其`myHyperLinkControl.NavigateUrl`属性访问与其关联的 URL。

如果您使用 squiggle/波浪号（这很好）将链接存储在您的资源中，那么您可以将 squiggle 替换为您的应用程序位置。如果您有一个控件/页面，那么您可以轻松调用它的 ResolveURL 方法（该方法采用波浪号并自动替换它）如果您的上下文没有控件/页面引用，则有一些现有的解决方案，然后有一些讨论在此处执行此操作：[没有 ASP.NET 页面的 ResolveUrl](https://stackoverflow.com/questions/4893380/resolveurl-without-an-asp-net-page)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:33:59.023

我想这就是你想要的：

```
Server.MapPath("~/page.aspx") 
```

这将在您的 aspx 和您的代码隐藏中工作。

# c# - 如何在 Linq Query 中比较字符串

> ID：10448451
> 
> 赞同：8
> 
> 时间：2012-05-04T12:00:02.293
> 
> 标签：c#, linq, argumentexception

CompareTo 不适合我。

我的 linq 查询是

```
var result = from c in customers 
             where c.CustomerID.CompareTo(txtSerchId.Text) >= 0 
             select` c; 
```

并且他们得到了一个例外

//////例外///////////

```
System.ArgumentException was caught
Message=Value does not fall within the expected range. 
```

我的代码是这样的

```
var result = 
    from c in customers 
    where c.CustomerID.CompareTo(txtSerchId.Text) >= 0 
    select c;

if (result != null)
{
    IEnumerator<Customer> resultEnum = result.GetEnumerator();
    while (resultEnum.MoveNext())
    {
        Customer c = (Customer)resultEnum.Current;
        addToDataSet(Guid.NewGuid().ToString(), c);
    }
    ShowResult();
}
else
{
    MessageBox.Show("No Customer found within criteria");
} 
```

例外在这一行

```
IEnumerator<Customer> resultEnum = result.GetEnumerator(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T12:07:26.783

尝试这个 ：

```
var query = from c in customers where c.CustomerID.Equals(txtSerchId.Text) select c; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-26T07:09:21.193

简单点：

1.  对于平等：

    `var result = from c in customers where c.CustomerID ==Convert.ToInt32(txtSerchId.Text) select c;`

2.  对于更大的：`where c.CustomerID >= Convert.ToInt32(txtSerchId.Text)`

3.  少 ： `where c.CustomerID <= Convert.ToInt32(txtSerchId.Text)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:15:46.597

引用您的评论“我正在将用户输入的值与我拥有的对象集合进行比较，以搜索 ID 小于或您可以说大于用户输入的客户。”

~~试试这个“大于”：~~

 ~~```
int customerId = int.Parse(txtSerchId.Text);
if (customerId > 0)
{
   var result = from c in customers where c.CustomerID > customerId select c;
} 
```~~  ~~随着评论中添加了更多信息而更新：

尝试这个：

```
customers.ToList().Where(c => c.CustomerID.CompareTo(txtSerchId.Text) >= 0); 
```

请注意，这是非常低效的，因为它首先从数据库中提取所有记录，然后根据您的字符串比较过滤它们。但老实说，我不知道更好的方法，所以这可能值得一试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-25T11:06:13.280

```
 var List = (from t in ObjCon.TableName
                            where t.GameDate.Value.CompareTo(GameDate) >= 0
                            join t1 in ObjCon.Teams on t.Home equals t1.TeamId
                            where t1.SportId == 3 
```

*这对我有用~~

# php - 如果存在两行并且值等于，则从数据库中获取值

> ID：10448462
> 
> 赞同：0
> 
> 时间：2012-05-04T12:00:54.723
> 
> 标签：php, mysql, database

我正在尝试检查数据库中是否存在行的值，如果存在则检查第二行的值，如果存在则检查第三行的值。（我认为编辑得很糟糕）。

名为“notes”['custom']、['createdtime'] 和 ['status'] 的表上的三行

我需要检查数据库中是否存在 ['custom'] 。

```
$notes = mysql_query("SELECT * FROM `notes` WHERE `custom` = '$custom'") 
```

然后，如果数据库中存在 $custom，我需要检查是否`['createdtime']`小于 3 天。`['createdtime']`具有类似“Ymd H:i:s”的值

如果可以（该值小于 3 天），我需要获取`['status']`

任何人都可以指出如何执行该检查或类似的适当示例。我喜欢学习不要复制和粘贴，因此非常感谢任何对合适示例的参考，也欢迎示例或解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:05:24.413

您可以使用一个查询来执行此操作，例如：

```
SELECT `status` FROM `notes` WHERE `custom` = '$custom' AND `createdTime` > (CURRENT_DATE - INTERVAL 3 DAY); 
```

完整语法：[http ://dev.mysql.com/doc/refman/5.5/en/select.html](http://dev.mysql.com/doc/refman/5.5/en/select.html)

# eclipse - Eclipse 插件默认对话框本地化

> ID：10448463
> 
> 赞同：0
> 
> 时间：2012-05-04T12:00:55.300
> 
> 标签：eclipse, localization, eclipse-plugin

我对我的自定义 Eclipse RCP 插件进行本地化，并希望看到翻译的默认搜索和导入/导出向导，但目前我无法将其切换为我的语言（俄语）。我已经将 Babel 包安装到我的 RCP 开发平台并在主机系统中获得了本地化的 UI，但插件仍未翻译。我该怎么做？我所有的自定义消息和 plugin.xml 都已经通过内部向导本地化了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T11:47:47.480

确保使用参数 -nl 运行您的应用程序 ru 您是否重新加载了目标平台？首选项->插件开发->目标平台，选择您的目标平台并单击“重新加载”按钮希望我能提供更多帮助。祝你好运

# qt - 如何使用委托在 QHeaderView 部分中绘制像素图？

> ID：10448469
> 
> 赞同：4
> 
> 时间：2012-05-04T12:01:21.340
> 
> 标签：qt, delegates, qt4, qheaderview

**问题**：我需要将小像素图绘制到`QHeaderView`如图所示的部分（像素图位于部分的右上角，用红色方块标记）：

![在此处输入图像描述](../Images/7d9522429971dbb13373140fac5a9372.png)

据我了解，有两种方法可以做到这一点：

1.  重新实现`QHeaderView`的`paintSection()`方法。

2.  `QStyledItemDelegate`从类创建一个委托并重新实现`paint()`方法。

如果我尝试使用以下代码的 (1) 变体，则根本不显示*过滤器像素图：*

```
void DecorativeHeaderView::paintSection( QPainter* painter, const QRect& rect, int logicalIndex ) const
{
     if( !rect.isValid() )
     {
          return;
     }

     // get the state of the section
     QStyleOptionHeader option;
     initStyleOption( &option );

     // setup the style options structure
     option.rect = rect;
     option.section = logicalIndex;
     option.iconAlignment = Qt::AlignVCenter | Qt::AlignHCenter;

     QVariant variant = model()->headerData( logicalIndex, orientation(), Qt::DecorationRole );
     option.icon = qvariant_cast< QIcon >( variant );
     if( option.icon.isNull() )
     {
          option.icon = qvariant_cast< QPixmap >( variant );
     }

     // draw the section
     if( !option.icon.isNull() )
     {
          style()->drawControl( QStyle::CE_Header, &option, painter, this );
     }
     else
     {
          QHeaderView::paintSection( painter, rect, logicalIndex );

// HERE is where I'm trying to draw my filter picture!!!

          if( logicalIndex == filteredLogicalIndex_ )
          {
               QPixmap pixmap( ":/spreadsheet/images/spreadsheet/filter_icon_table.png" );
               int x = rect.right() - pixmap.width();
               int y = rect.top() + ( rect.height() - pixmap.height() ) / 2;

               painter->drawPixmap( QPoint( x, y ), pixmap );
          }
     }
} 
```

(2) 变体是这样的：

```
class HeaderDelegate : public QStyledItemDelegate
{
     Q_OBJECT
     Q_DISABLE_COPY( HeaderDelegate )

public:
     HeaderDelegate( QObject* parent = 0 ) : QStyledItemDelegate( parent ) {}
     virtual ~HeaderDelegate() {}

     virtual void paint( QPainter* painter, const QStyleOptionViewItem& option, const QModelIndex& index ) const;

}; // HeaderDelegate

void HeaderDelegate::paint( QPainter* painter, const QStyleOptionViewItem& option, const QModelIndex& index ) const
{

// THIS method never starts!!!

     if( index.column() == 2 )
     {
          QPixmap pixmap( ":/spreadsheet/images/spreadsheet/filter_icon_table.png" );
          int x = option.rect.right() - pixmap.width();
          int y = option.rect.top() + ( option.rect.height() - pixmap.height() ) / 2;

          painter->save();
          painter->drawPixmap( QPoint( x, y ), pixmap );
          painter->restore();
     }

     QStyledItemDelegate::paint( painter, option, index );
}

DecorativeHeaderView::DecorativeHeaderView( Qt::Orientation orientation, QWidget* parent /* = 0 */ )
     : QHeaderView( orientation, parent )
     , filteredLogicalIndex_( -1 )
{
     setItemDelegate( new HeaderDelegate( this ) );
} 
```

委托已创建，但函数未启动该`paint()`方法！

有什么帮助吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-25T11:24:32.997

看来目前是不可能的了。

来自 Qt 文档：

注意：每个标头都为每个部分本身呈现数据，并且不依赖于委托。因此，调用标头的 setItemDelegate() 函数将不起作用。

[如何在 QHeaderView 项目中具有动态像素图](http://comments.gmane.org/gmane.comp.lib.qt.general/34668)

但是您可以覆盖 QHeaderView::paintSection 方法。 [子类化-QHeaderView](http://www.qtcentre.org/threads/2282-subclassing-QHeaderView)

```
class HeaderView : public QHeaderView {
    Q_OBJECT

public:
    HeaderView(Qt::Orientation orientation, QWidget * parent = 0)
        : QHeaderView(orientation, parent), p("333222.jpeg") {
    }

    int sectionSizeHint ( int /*logicalIndex*/ ) const { return p.width(); }

protected:
    void paintSection(QPainter * painter, const QRect & rect, int /*logicalIndex*/) const {
        painter->drawPixmap(rect, p);
    }

private:
    QPixmap p;
}; 
```

# jquery - Javascript - Jquery，使用“On”方法绑定动态选择器（不是字符串）

> ID：10448472
> 
> 赞同：3
> 
> 时间：2012-05-04T12:01:29.787
> 
> 标签：jquery, events, dynamic, selector

我想使用“开启”功能来附加一个事件，因为其他事件已被贬值（live、delegate、click...）。

但问题是：如果我们生成对象，我们需要在参数中使用选择器，而这个参数是一个字符串！！

示例：（上下文：动态表）

```
//Wrong way

$("#dataTable tbody tr").on("click", function(event){
    alert($(this).text());
});

//Good way

$("#dataTable tbody").on("click", "tr", function(event){
    alert($(this).text());
}); 
```

现在如果我想使用“查找”方法来避免这种情况，我该怎么做

```
 // ?? (find div)
    $("#dataTable tbody").on("click", "tr > ul > li > ul > li > div", function(event){
            alert($(this).text());
        });

   // What I would like to do
    $("#dataTable tbody").on("click", $(this).find("div"), function(event){
            alert($(this).text());
        });

   //and I don't want to do this :
    $("#dataTable tbody").find('div').on("click", function(event){
            alert($(this).text());
        }); 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:03:56.543

*工作*相当于：

```
// What I would like to do
$("#dataTable tbody").on("click", $(this).find("div"), function(event){
    alert($(this).text());
}); 
```

是...

```
// What I would like to do
$("#dataTable tbody").on("click", 'div', function(event){
    alert($(this).text());
}); 
```

如果您`div`在嵌套列表中定位 's，那么您*可能*能够逃脱：

```
// What I would like to do
$("#dataTable tbody").on("click", 'ul ul div', function(event){
    alert($(this).text());
}); 
```

...但这取决于您是否有*其他* ; 您只需要在选择器中足够具体，即可将其他元素从考虑中删除。很少需要像 一样具体，在这种情况下，最好将一个类应用于更接近（或自身）的元素，然后围绕它进行选择。 `ul``tbody``tr > ul > li > ul > li > div``div``div`

另请注意，它只是`live()`折旧的。在撰写本文时 (1.7.2)`delegate()`不是，尽管我相信它会在 1.8 中。

没有谈论贬值`click()`或它的捷径对应物。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:38:08.110

如果要选择嵌套列表中的 DIV 元素，那么这将是一种方法：

```
$( '#foo' ).on( 'click', 'ul ul div', function () { 
```

但是，我推荐课程。只需在您的 DIV 元素上设置一个类，然后：

```
$( '#foo' ).on( 'click', '.bar', function () { 
```

# php - 使用 Ajax 在 PHP 中进行搜索

> ID：10448473
> 
> 赞同：1
> 
> 时间：2012-05-04T12:01:34.030
> 
> 标签：php

我使用 ajax 在 php 中执行实时搜索。这是我执行任务 googleajax.php 的代码

```
<?php 

    $id=$_GET['id'];
    if(isset($_POST['submit']))
    {
        $temp=$_POST['name'];echo $temp;
    }
?>
<html>
<head>
<script language="javascript" type="text/javascript">
function getXMLHTTP() { //function to return the xml http object
        var xmlhttp=false;  
        try{
            xmlhttp=new XMLHttpRequest();
        }
        catch(e)    {       
            try{            
                xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch(e){
                try{
                xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                }
                catch(e){
                    xmlhttp=false;
                }
            }
        }

        return xmlhttp;
    }

    function getValue(id)
    {       

        var strURL="googledata.php?id="+id;
        var req = getXMLHTTP();

        if (req) {

            req.onreadystatechange = function() {
                if (req.readyState == 4) {
                    // only if "OK"
                    if (req.status == 200) {                        
                        document.getElementById('div1').innerHTML=req.responseText;                     
                    } else {
                        alert("There was a problem while using XMLHTTP:\n" + req.statusText);
                    }
                }               
            }           
            req.open("GET", strURL, true);
            req.send(null);

        }
    }

</script>
</head>
<body>
<form method="post">
        <?php
            /*$query="Select * from tblcountry where country_id='".$id."'";
            echo $
            $res=mysql_query($res);
            while($row=mysql_fetch_assoc($res))
            {
                extract($row);*/
            ?>
            <input type="text" id="name" name="name" onKeyUp="getValue(this.value)" value="<?php echo $id;?>" />
    <input type="submit" id="submit" name="submit" value="serch">

    <div id="div1" name="div1">

    </div>

                <?php
            /*<!--}-->*/

        ?>  
    </form>
</body>
</html> 
```

和 googledata.php

```
<?php
$con=mysql_connect("localhost","root","");
if(!$con)
{
    die("error in connection");
}
else
{
    mysql_select_db("hms2012",$con);
}
$id= $_GET['id'];
if($id=="")
{
}
else
{
    $result=mysql_query("select * from tblcountry where country_name like '$id%'");

    while($row=mysql_fetch_assoc($result))
    {
        extract($row);

        echo "<option value='$country_id'><a href='googleajax.php?id=$country_id'>".$country_name."</a><br></option>";

    }

}
?> 
```

执行此代码我无法选择按键的值。我可以选择值有什么用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:06:22.110

您的标签列表`<select></select>`周围没有。`<options>`

你应该看看使用 jQuery 来处理你的 Ajax 东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:27:28.120

什么是 $country_id 和 $country_name。我已经通过假设改变了它。请检查。

```
 echo '<select name="somename">';    
    while($row=mysql_fetch_assoc($result))
    {
        extract($row);

    echo "<option value='".$row['country_id']."'><a href='googleajax.php?id=".$row['country_id']."'>".$row['country_name']."</a><br></option>";

    }
   echo "</select>"; 
```

# asp.net-mvc-3 - DropDownList selected 属性是否会在 html 中更改？

> ID：10448480
> 
> 赞同：2
> 
> 时间：2012-05-04T12:02:12.470
> 
> 标签：asp.net-mvc-3, html.dropdownlistfor

我正在使用 mvc3 并有一个下拉列表（使用 DropDownListFor 助手）。我将所选值设置为我的默认值。当用户选择不同的项目时，该项目的 selected 属性不会被标记为这样，即默认值在呈现的 html 中仍然具有 selected 属性。这是正常行为吗？如果我使用 jquery 并获取 ddl val 属性，它会正确设置为最近选择的项目......这就是下拉列表的工作方式吗？我检查了 IE、FF、Chrome 和 IE 甚至在选项旁边都没有选中的属性...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:06:10.593

编辑：事实上，我刚刚用 firefox 9 + 对其进行了测试。它确实使用选定的更改位置更改了 html 源。

```
<option selected="selected" value="2">(0002)    </option>
<option value="3">(0003)     </option> 
```

确保您正在查看当前（正确）页面的来源，以及正确的选项列表。`Control + U`在 Firefox 或 Chrome 中。

当您更改下拉框时，在幕后选定的值将发生变化。正如你所观察到的。因此提交等将使用新的选定值。

所以无论如何它都没有什么可担心的:)

# ios - CFBasicAnimation 中带有自定义键的动画在导出视频时不起作用

> ID：10448482
> 
> 赞同：2
> 
> 时间：2012-05-04T12:02:23.140
> 
> 标签：ios, video, export

我有 FrameChangeAnimation 类，它需要多个精灵表和持续时间。所以假设我有 3 个 spritesheet，每个包含 16 个字符块，然后我给 '3' 秒作为持续时间。在将 FrameChangeAnimation 实例作为 CALayer 返回后，我将其附加到屏幕上，并且播放流畅 [16 帧/秒]

现在我想将此动画导出为视频。问题是，当我这次附加 CABasicAnimation 时，持续时间。“持续时间”参数不起作用，所有帧都在一秒钟内播放。

```
 GTAnimation *an = [[GTAnimation alloc] initWithFrame:CGRectMake(0, 0, videoSize.width, videoSize.height) withFileName:@"Host_Angry_" withSeconds:3.5];

    CALayer *animationLayer = [CALayer layer];
    animationLayer.bounds = CGRectMake(0, 0, videoSize.width, videoSize.height);
    [animationLayer addSublayer:an.animLayer];

    CABasicAnimation *fadeAnimation = [CABasicAnimation animationWithKeyPath:@"currentFrame"];
    fadeAnimation.fromValue = [NSNumber numberWithFloat:1.0];
    fadeAnimation.toValue = [NSNumber numberWithFloat:45.0];
    fadeAnimation.additive = NO;
    fadeAnimation.removedOnCompletion = NO;
    fadeAnimation.beginTime = 0.0;
    fadeAnimation.duration = 3.5;
    fadeAnimation.repeatCount = HUGE_VAL;
    fadeAnimation.fillMode = kCAFillModeBoth;
    [an.animLayer addAnimation:fadeAnimation forKey:@"currentFrame"];

    CALayer *parentLayer = [CALayer layer];
    CALayer *videoLayer = [CALayer layer];

    videoLayer.bounds = CGRectMake(0, 0, videoSize.width, videoSize.height);
    [parentLayer addSublayer:videoLayer];
    [parentLayer addSublayer:animationLayer];
    videoLayer.anchorPoint =  CGPointMake(0.5, 0.5);
    videoLayer.position = CGPointMake(CGRectGetMidX(parentLayer.bounds), CGRectGetMidY(parentLayer.bounds));
    animationLayer.anchorPoint =  CGPointMake(0.5, 0.5);
    animationLayer.position = CGPointMake(CGRectGetMidX(parentLayer.bounds), CGRectGetMidY(parentLayer.bounds));
    videoComposition.animationTool = [AVVideoCompositionCoreAnimationTool videoCompositionCoreAnimationToolWithPostProcessingAsVideoLayer:videoLayer inLayer:parentLayer]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-16T23:47:51.077

根据 AVVideoCompositionCoreAnimationTool 类的文档，

“任何动画都会在视频的时间线上进行解释，而不是实时的，所以你应该：

将动画的 beginTime 属性设置为 1e-100 而不是 0（CoreAnimation 用 CACurrentMediaTime 替换）；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-23T11:46:25.913

使用 AVCoreAnimationBeginTimeAtZero 而不是做 fadeAnimation.begintime = 0.0;

```
fadeAnimation = AVCoreAnimationBeginTimeAtZero; 
```

# python - 当`starmap`可能比`List Comprehension`更受欢迎

> ID：10448486
> 
> 赞同：8
> 
> 时间：2012-05-04T12:02:50.373
> 
> 标签：python, list-comprehension, itertools

在回答[增加一组数字之间差异的笨拙计算问题时，有没有更漂亮的方法？](https://stackoverflow.com/questions/10448122/clunky-calculation-of-differences-between-an-incrementing-set-of-numbers-is-the)，我想出了两种解决方案，一种使用 itertools.starmap `List Comprehension`，另一种使用[itertools.starmap](https://docs.python.org/3/library/itertools.html#itertools.starmap)。

对我来说，`list comprehension`语法看起来更清晰、更易读、更简洁、更 Pythonic。但是由于星图在[itertools](https://docs.python.org/3/library/itertools.html#itertools.starmap)中很好用，我想知道，这一定是有原因的。

我的问题是什么时候`starmap`可以优先考虑`List Comprehension`？

**注意**如果它是风格问题，那么它肯定是矛盾的`There should be one-- and preferably only one --obvious way to do it.`

**头对头比较**

*可读性很重要。*---`LC`

这又是一个感知问题，但对我`LC`来说比`starmap`. 要使用`starmap`，您需要导入`operator`、定义`lambda`或一些显式`multi-variable`函数，但需要额外导入 from `itertools`。

*性能* ---`LC`

```
>>> def using_star_map(nums):
    delta=starmap(sub,izip(nums[1:],nums))
    return sum(delta)/float(len(nums)-1)
>>> def using_LC(nums):
    delta=(x-y for x,y in izip(nums[1:],nums))
    return sum(delta)/float(len(nums)-1)
>>> nums=[random.randint(1,10) for _ in range(100000)]
>>> t1=Timer(stmt='using_star_map(nums)',setup='from __main__ import nums,using_star_map;from itertools import starmap,izip')
>>> t2=Timer(stmt='using_LC(nums)',setup='from __main__ import nums,using_LC;from itertools import izip')
>>> print "%.2f usec/pass" % (1000000 * t1.timeit(number=1000)/100000)
235.03 usec/pass
>>> print "%.2f usec/pass" % (1000000 * t2.timeit(number=1000)/100000)
181.87 usec/pass 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-04T12:12:36.927

我通常看到的区别是`map()`/`starmap()`最适合您实际上只是在列表中的每个项目上调用函数的情况。在这种情况下，它们更清晰一些：

```
(f(x) for x in y)
map(f, y) # itertools.imap(f, y) in 2.x

(f(*x) for x in y)
starmap(f, y) 
```

一旦您开始需要输入`lambda`或`filter`同时，您应该切换到列表 comp/generator 表达式，但在它是单个函数的情况下，对于列表理解的生成器表达式，语法感觉非常冗长。

它们*是*可互换的，如果有疑问，请坚持使用生成器表达式，因为它通常更具可读性，但在简单的情况下（`map(int, strings)`, `starmap(Vector, points)`）使用`map()`/`starmap()` 有时可以使事情更容易阅读。

# 例子：

`starmap()`我认为更具可读性的示例：

```
from collections import namedtuple
from itertools import starmap

points = [(10, 20), (20, 10), (0, 0), (20, 20)]

Vector = namedtuple("Vector", ["x", "y"])

for vector in (Vector(*point) for point in points):
    ...

for vector in starmap(Vector, points):
    ... 
```

对于`map()`：

```
values = ["10", "20", "0"]

for number in (int(x) for x in values):
    ...

for number in map(int, values):
    ... 
```

# 表现：

```
python -m timeit -s "from itertools import starmap" -s "from operator import sub" -s "numbers = zip(range(100000), range(100000))" "sum(starmap(sub, numbers))"                         
1000000 loops, best of 3: 0.258 usec per loop

python -m timeit -s "numbers = zip(range(100000), range(100000))" "sum(x-y for x, y in numbers)"                          
1000000 loops, best of 3: 0.446 usec per loop 
```

对于构造一个`namedtuple`：

```
python -m timeit -s "from itertools import starmap" -s "from collections import namedtuple" -s "numbers = zip(range(100000), reversed(range(100000)))" -s "Vector = namedtuple('Vector', ['x', 'y'])" "list(starmap(Vector, numbers))"
1000000 loops, best of 3: 0.98 usec per loop

python -m timeit -s "from collections import namedtuple" -s "numbers = zip(range(100000), reversed(range(100000)))" -s "Vector = namedtuple('Vector', ['x', 'y'])" "[Vector(*pos) for pos in numbers]"
1000000 loops, best of 3: 0.375 usec per loop 
```

在我的测试中，我们谈论的是使用简单函数 (no `lambda`)，`starmap()`它比等效的生成器表达式更快。自然，性能应该排在可读性之后，除非它是一个已证明的瓶颈。

如何`lambda`杀死任何性能增益的示例，与第一组中的示例相同，但使用`lambda`而不是`operator.sub()`：

```
python -m timeit -s "from itertools import starmap" -s "numbers = zip(range(100000), range(100000))" "sum(starmap(lambda x, y: x-y, numbers))" 
1000000 loops, best of 3: 0.546 usec per loop 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T12:05:57.957

这在很大程度上是一种风格。选择您认为更具可读性的那个。

关于“只有一种方法可以做到”，Sven Marnach 好心地提供了这个[Guido 报价](http://mail.python.org/pipermail/python-ideas/2011-October/012511.html)：

> “你可能认为这违反了 TOOWTDI，但正如我之前所说，这是一个善意的谎言（也是对 2000 年左右 Perl 口号的厚颜无耻的回应）。能够（向人类读者）表达意图通常需要在执行基本相同但对读者看起来不同的多种形式之间进行选择。”</p>

在性能热点中，您可能想要选择运行速度最快的解决方案（我猜在这种情况下将是`starmap`基于的解决方案）。

在性能方面 - 星图由于其解构而较慢；但是这里不需要星图：

```
from timeit import Timer
import random
from itertools import starmap, izip,imap
from operator import sub

def using_imap(nums):
    delta=imap(sub,nums[1:],nums[:-1])
    return sum(delta)/float(len(nums)-1)

def using_LC(nums):
    delta=(x-y for x,y in izip(nums[1:],nums))
    return sum(delta)/float(len(nums)-1)

nums=[random.randint(1,10) for _ in range(100000)]
t1=Timer(stmt='using_imap(nums)',setup='from __main__ import nums,using_imap')
t2=Timer(stmt='using_LC(nums)',setup='from __main__ import nums,using_LC') 
```

在我的电脑上：

```
>>> print "%.2f usec/pass" % (1000000 * t1.timeit(number=1000)/100000)
172.86 usec/pass
>>> print "%.2f usec/pass" % (1000000 * t2.timeit(number=1000)/100000)
178.62 usec/pass 
```

`imap`出来的速度有点快，可能是因为它避免了压缩/解构。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T12:59:55.297

**关于星图..** 假设你有`L = [(0,1,2),(3,4,5),(6,7,8),..]`。

生成器理解看起来像

```
(f(a,b,c) for a,b,c in L) 
```

或者

```
(f(*item) for item in L) 
```

星图看起来像

```
starmap(f, L) 
```

第三种变体更轻更短。但是第一个非常明显，它不会强迫我去思考它的作用。

好的。现在我想编写更复杂的内联代码..

```
some_result = starmap(f_res, [starmap(f1,L1), starmap(f2,L2), starmap(f3,L3)]) 
```

这条线并不明显，但仍然很容易理解。在生成器理解中，它看起来像：

```
some_result = (f_res(a,b,c) for a,b,c in [(f1(a,b,c) for a,b,c in L1), (f2(a,b,c) for a,b,c in L2), (f3(a,b,c) for a,b,c in L3)]) 
```

如您所见，它很长，很难理解并且不能放在一行中，因为它大于 79 个字符（PEP 8）。更短的变体也很糟糕：

```
some_result = (f_res(*item) for item [(f1(*item) for item in L1), (f(*item2) for item in L2), (f3(*item) for item in L3)]) 
```

太多的字符..太多的括号..太多的噪音。

**所以。Starmap 在某些情况下是一个非常有用的工具。有了它，您可以编写更少的代码，更易于理解。**

**编辑**添加了一些虚拟测试

```
from timeit import timeit
print timeit("from itertools import starmap\nL = [(0,1,2),(3,4,5),(6,7,8)]\nt=list((max(a,b,c)for a,b,c in L))")
print timeit("from itertools import starmap\nL = [(0,1,2),(3,4,5),(6,7,8)]\nt=list((max(*item)for item in L))")
print timeit("from itertools import starmap\nL = [(0,1,2),(3,4,5),(6,7,8)]\nt=list(starmap(max,L))") 
```

输出（python 2.7.2）

```
5.23479851154
5.35265309689
4.48601346328 
```

所以，星图在这里甚至快了 15%。

# c# - 当属性为空时，如何防止实体出错？

> ID：10448487
> 
> 赞同：1
> 
> 时间：2012-05-04T12:02:53.060
> 
> 标签：c#, entity-framework

假设我们有一个模型属性，它是一个集合并且为空。像这样。

```
public ICollection<Model> ChildrenById
{
    get
    {
        return Children
            .OrderBy(c => c.Id)
            .ToList();
    }
} 
```

实体同时出错并说它`Children`为空。我们可以通过使用`if`语句并`Children`首先检查是否为空来解决这个问题，但是有没有办法让实体返回一个空列表呢？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:07:22.640

我会让返回 Children 的属性永远不会返回 null。

*编辑

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:06:47.143

```
public ICollection<Model> ChildrenById
{
    get
    {
        return Children == null 
            ? new List<Model>() 
            : Children
               .OrderBy(c => c.Id)
               .ToList();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:17:35.337

您可以对列表本身进行排序，而不是使用属性；

```
Children.Sort((x, y) => x.Id.CompareTo(y.Id)); 
```

# java - 我可以更改java中编译器设置的默认超类吗？

> ID：10448492
> 
> 赞同：2
> 
> 时间：2012-05-04T12:03:25.163
> 
> 标签：java

每个java类都有根类是Object类。我可以更改我自己班级的班级和地点吗`class MyObject extends Object`？它有更多的功能。

这件事是可能的？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T12:05:19.903

不，这是不可能的。这甚至不是编译器问题。`java.lang.Object`作为继承层次的根是语言定义甚至VM规范的一个非常基本的事实。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T12:05:00.890

不，这是不可能的。Java 中的所有对象都必须派生自`java.lang.Object`.

如果您想为系统中的每个对象添加功能，那么我将只介绍您自己的`MyObject`类并确保您的所有类都派生自该类。如果您想将功能扩展到现有对象，那么我将使用静态辅助方法来执行此操作（在 C# 中您将使用扩展方法，但在 Java 中不存在这样的选项）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T12:08:29.610

我从来没有听说过这样的事情。你为什么想要？这将使您的代码无法被除您之外的任何人遵循。每个 Java 程序员都假设要么显式扩展一个类，要么扩展 Object。

在你的课程开始时投入“扩展 MyObject”真的有那么多工作吗？我很确定 Eclipse（和其他 IDE）可以配置为自动为您插入它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T12:40:04.383

Beside that this seems a questionable approach to me -
you can use [bytecode instrumentation](http://docs.oracle.com/javase/6/docs/platform/jvmti/jvmti.html#bci) to archive this (but this is not done at compile-time but at vminit/classload time - depending on the type of instrumentation used).

# ios - UIWebView 不会在 splitview detailController 中调整网页大小

> ID：10448495
> 
> 赞同：2
> 
> 时间：2012-05-04T12:03:36.137
> 
> 标签：ios, xcode, ipad, uiwebview, uisplitview

我正在为 iPhone 和 iPad 开发一个通用的 iOS 应用程序。我在 iPad 应用程序中的 splitview 遇到了一些问题。在 detailController 中有一个 UIWebView，我在其中加载了一个应该自动调整大小的网页（位于网页的 css 中）。在纵向模式下可以，但在横向模式下，网页根本不会调整大小。我还检查了“缩放页面以适合”按钮。但这也不起作用！有没有办法手动调整 safari 中的网页大小？以下是一些截图： iPad 肖像： ![iPad 肖像](../Images/49ab698b2a71a7dbe5bce98f0216552a.png)

![iPad横屏](../Images/831aa6029fe448a09fd4b9d58c7e9e69.png)

景观

# objective-c - 向下滚动并返回时 UITextField 进入 UITableViewCell 自动重置？

> ID：10448497
> 
> 赞同：0
> 
> 时间：2012-05-04T12:03:40.170
> 
> 标签：objective-c, uitableview, scroll, uitextfield

![在此处输入图像描述](../Images/b71ed036eb82cd487525c091cc0a8351.png)

![在此处输入图像描述](../Images/b762af0c0cd6ceacd366739f892d6dfc.png)

![在此处输入图像描述](../Images/26a4015d0e97a3ce64fbdbaab3335e72.png)

我有更多内容`UITextField`，`UITableViewCell`但是当我向下滚动并返回时，它`UITextField`是空的。有没有办法不自动重置？

这是代码：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cella"];

    if(cell==nil){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cella"];
    }

    cell.textLabel.text = [dati objectAtIndex:indexPath.row];

    UITextField *testo = [[UITextField alloc] initWithFrame:CGRectMake(0, 0, 150, 31)];
    testo.borderStyle = UITextBorderStyleRoundedRect;
    testo.contentVerticalAlignment = UIControlContentVerticalAlignmentCenter;
    testo.placeholder = @"Inserisci del testo..";
    testo.delegate = self;

    cell.accessoryView = testo;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:12:23.473

它每次都在重新创建单元格。这就是为什么每次创建新单元格并重新初始化包含的控件时，如果 UITextField 包含文本，您可能没有设置条件，它不应该清除其文本。

# asp.net-mvc - 如何在新添加的数据中没有任何其他唯一标识信息的情况下立即检索新添加的行的 ID？

> ID：10448499
> 
> 赞同：0
> 
> 时间：2012-05-04T12:03:52.180
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, notifications

我正在向数据库中的表 MyModel 添加一行，然后创建关于该新行的通知到另一个表。我需要新创建的 MyModel 行的 ID 才能正确创建通知。

这是我的控制器的代码：

```
MyModel newMyModel = new MyModel
{
    Title = appliedCourse.Title,
};
db.MyModel.Add();

// I need code here that finds the MyModel.ID - but I do not know how to search for this MyModel 
// because MyModel.Title is not necessarily unique - the only necessarily unique piece of data 
// would be the MyModel.ID
new MyModel MyModelWithId = db.MyModel.Find(MyModel) // <- that does not work

Notification newNotification = new Notification
{
    Time = DateTime.Now,
    Link = Url.Action("Details", "MyModel", newMyModelWithId.MyModelID),
    ViewableBy = "Admin",
    Complete = false
};
db.Notification.Add(newNotification);
db.SaveChanges(); 
```

有什么方法可以检索新创建的 MyModel 的 ID？

我可以想到可能搜索“最大的 ID 值”并返回它——但我不确定这是否是最有效的方法。

ID 是在我需要的时候创建的，还是我需要做一个 db.SaveChanges(); 在搜索之前打电话？

是否有必要向 MyModel 添加一个唯一值，以便我可以查询数据库以获取它的 ID？（尽管 ID 已经是我未来查询的唯一值）我在想一个 DateTimeCreated 值，我会像这样搜索它：

```
new MyModel MyModelWithId = db.MyModel.FirstOrDefault(
                o => o.TimeDateCreated == MyModel.TimeDateCreated); 
```

不确定 DateTime 方法是否也非常有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:19:19.690

在保存更改之前，您不会获得该行的 ID。

在您的示例中，您必须点击 SaveChanges 两次。一次保存 MyModel 并生成 ID，然后保存带有 URL.Action 的 newNotification。

```
MyModel newMyModel = new MyModel
{
    Title = appliedCourse.Title,
};
db.MyModel.Add();

// Save first, let the DB generate the ID.  
// The DB generated ID will automatically load into the object you just saved.
db.SaveChanges(); 

Notification newNotification = new Notification
{
    Time = DateTime.Now,
    Link = Url.Action("Details", "MyModel",new { id = newMyModel.ID }),
    ViewableBy = "Admin",
    Complete = false
};
db.Notification.Add(newNotification);
db.SaveChanges(); 
```

请注意，除非您有非常令人信服的理由，否则我可能会在显示新通知时生成 Url.Action，而不是作为模型本身的一部分。相反，您可以保存一个引用，这样只能保存一次。话虽如此，在不知道您的用例的情况下，这是一个粗略的猜测。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:31:37.387

如果 MyModel 具有`Notifications`属性或 Notification 具有`MyModel`属性（导航属性[EF4 代码优先：如何在不添加导航属性的情况下添加关系](https://stackoverflow.com/questions/5217441/ef4-code-first-how-to-add-a-relationship-without-adding-a-navigation-property)），您可以通过设置对象引用来装配它们之间的链接。然后，当您致电时`db.SaveChanges()`，它会为您设置 ID。在这种情况下，这似乎对您不起作用，因为您想以另一种方式使用 id。

# ios - 带有 CGColorSpaceCreateDeviceRGB 的代码无法编译

> ID：10448500
> 
> 赞同：1
> 
> 时间：2012-05-04T12:03:56.520
> 
> 标签：ios, core-graphics

我正在尝试继承 UIButton 并且需要在 drawRect: 方法中实现绘制渐变。但是调用任何 CGColorSpaceCreateDeviceRGB()、CGColorGetComponents()、CGGradientCreateWithColorComponents() 都会导致一堆链接器错误，说明：

> **Apple Mach-O 链接器 (Id) 错误**
> 
> 架构 i386 的未定义符号：“_CGColorSpaceCreateDeviceRGB”，引用自：-[GradientButton drawRect:] in GradientButton.o

似乎缺少一些标题，但通过 Quartz2D 和 CoreGraphics 参考搜索仍然没有结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:08:42.090

你`CoreGraphics.framework`在你的应用程序中链接了吗？

它应该看起来像这样：

![](../Images/3c9a0fc65111fa99cd77301186227792.png)

# c# - CopyFromScreen 不起作用

> ID：10448508
> 
> 赞同：3
> 
> 时间：2012-05-04T12:04:28.803
> 
> 标签：c#

这个有点混乱……

我正在使用 Adob​​e 的 PDF 查看器控件来查看 PDF，但我希望用户能够将图像拖到 PDF 上，然后当他们单击保存时，它将图像添加到该位置的 PDF 中。

实现 PDF 查看器非常困难，但我最终决定使用 Adob​​e 的控件，拍照，然后允许用户在 PDF 的图片上绘制图像。当他们单击保存时，一旦我确定了图像的位置，我将使用 PDFSharp 将图像放到 PDF 上，但我目前遇到的问题是我无法获得 PDF 的图片。

以下代码用于获取图片，但它所附加的面板仅显示为带有红色“X”和边框的白色背景......

```
using (Bitmap bitmap = new Bitmap(adobePDFViewer1.Width, adobePDFViewer1.Height))
                {
                    using (Graphics g = Graphics.FromImage(bitmap))
                    {
                        g.CopyFromScreen(new Point(adobePDFViewer1.Left, adobePDFViewer1.Top), Point.Empty, adobePDFViewer1.Size);
                    }
                    panelOverPdfViewer.BackgroundImage = bitmap;
                } 
```

我认为这不是最好的方法，但我无法解决其他任何问题。任何帮助，将不胜感激！

编辑：

以下是一个非常有用的答案，这是工作代码：

这是我使用的代码：

```
Bitmap printscreen = new Bitmap(adobePDFViewer1.Width, adobePDFViewer1.Height);
                Graphics graphics = Graphics.FromImage(printscreen as Image);
                int left = this.Left + 396;
                int top = this.Top + 30;
                graphics.CopyFromScreen(left, top, 0, 0, printscreen.Size);
                pictureBoxOverPDFView.Image = printscreen; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T12:08:35.517

看看这个这个[打印屏幕](http://www.codeproject.com/Articles/39197/Print-Screen-in-C)

并尝试使用 CopyFromScreen 的测试工作

```
private void PrintScreen()

{  

Bitmap printscreen = new Bitmap(Screen.PrimaryScreen.Bounds.Width, Screen.PrimaryScreen.Bounds.Height);

Graphics graphics = Graphics.FromImage(printscreen as Image);

graphics.CopyFromScreen(0, 0, 0, 0, printscreen.Size);

printscreen.Save(@"C:\Temp\printscreen.jpg", ImageFormat.Jpeg);

} 
```

# ruby - DataMapper 连接语句

> ID：10448510
> 
> 赞同：2
> 
> 时间：2012-05-04T12:04:29.147
> 
> 标签：ruby, join, datamapper

如何使用 ruby​​ DataMapper 生成带有连接语句的查询？

**IE。**

```
class Model1
    property id, Serial
    has n :Model2s, :parent_key => [ :id ], :child_key => [ :model1_id ]
end

class Model2
    property :id, Serial
    property :model1_id, Integer
    has n :Model3s, :parent_key => [ :id ], :child_key => [ :model2_id ]
end

class Model3
    property :id, Serial
    property :model2_id, Integer
end 
```

现在我希望 DataMapper 创建一个查询，如：

```
SELECT ... FROM model1 INNER JOIN model2 ON model1.id = model2.model1_id INNER JOIN model3 ON model2.id = model3.model2_id; 
```

目前它在访问它们时延迟加载所有关系与单个查询，这非常慢。

# hibernate - 左外部加入 Hibernate 中的多对一关系

> ID：10448515
> 
> 赞同：0
> 
> 时间：2012-05-04T12:04:51.713
> 
> 标签：hibernate

在我的 xx.hbm.xml 文件中，我写了这个：

```
<class name="com.xxx.model.PosDataBDEntryBean" table="BD_Trans">
    <id name="id" column="id">
        <generator class="native"></generator>
    </id>
    <many-to-one name="itemCode" class="com.xxx.model.BDMasterBean" fetch="join" lazy="false">
        <column name="item_code"/>
    </many-to-one>
    <property name="transDate" column="trans_date" />
     </class> 
```

我还有另一个表 bd_item 与 com.xxx.model.BDMasterBean 类和 itemcode 作为主键有关系。

在我的 DAO 课程中，我编写了以下代码行：

```
Criteria criteria = session.createCriteria(PosDataBDEntryBean.class);
         criteria.add(Restrictions.eq("transDate",cDate)).add(Restrictions.eq("location", "BD"));
        posBDEntryGridList = criteria.list(); 
```

我有两个表，bd_item 和 bd_trans。bd _item 的 item_codes 没有小数，bd_trans 的项目有小数和非小数。我怎样才能加入这两个表来获得匹配的行。我收到异常“不存在具有给定标识符的行：com.xxx.model.BDMasterBean#1189.0”。如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:21:43.467

恐怕，你最好在数据库中清理一下。您必须确保 ID 列中只允许整数值。（您还必须转换数据库中的现有值。如果您不知道如何正确执行此操作，那将是另一个问题）。

但是，我了解您可能无法修改数据库架构。在这种情况下，您必须手动转换 id 值并查询给定 item_code 的 BDMasterBean。

# jmeter - Apache JMeter - 监听器结果解释

> ID：10448516
> 
> 赞同：14
> 
> 时间：2012-05-04T12:04:51.793
> 
> 标签：jmeter

我使用 JMeter 测试我的 webapp 应用程序，我有一些分数值的聚合图，但我实际上不知道它们是什么意思......

聚合图显示例如：

*   平均
*   中位数
*   分钟
*   最大限度

我不知道什么是指该值。

什么参考90％线？
我也不知道每秒吞吐量的单位是什么（字节？）。
有人知道吗？
JMeter 文档仅显示有关报告和侦听器的一般信息。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T11:01:36.913

[此链接](https://web.archive.org/web/20140130063502/http://nico.vahlas.eu/2010/03/30/some-thoughts-on-stress-testing-web-applications-with-jmeter-part-2/)包含对 Jmeter 使用、结果、提示、注意事项和部署的有用说明。

祝你好运！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-08-08T10:06:58.650

**吞吐量**- 表示每秒钟的请求数。因此，如果两个用户同时打开您的网站，吞吐量将是 2/s - 一秒内 2 个请求。

它有什么用处：检查您的网站分析，您会看到每天的主机数量和点击量。吞吐量代表每天的点击次数。如果分析显示每天有 200 000 次点击，这意味着：200 000 / 86400（一天中的秒数）= 2.31 次点击/秒。

**平均值**- 响应时间的平均值。我想你知道什么是响应时间——它是发送请求和从服务器获得响应之间的时间。要获得平均响应时间，您应该将所有采样器响应时间相加并划分为采样器数量。Sampler的意思是用户、请求、命中，意思是一样的。

**Min** - 所有采样器的最短响应时间。不同的是，我们可以说最快的反应。

**Max** - 与 Min 相反，最慢的响应。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T21:06:09.117

在事物 Jmeter 中，吞吐量通常以请求/秒来衡量。

至于知道哪些请求在 90% 的行内，并不是真正使用此侦听器的方法。这是代表汇总信息，因此它只报告有关所有测试的信息，而不是具体结果。

有关从响应中获取有用信息的一些不同方法和想法，请查看 jmeter wiki on [log analysis](http://wiki.apache.org/jmeter/LogAnalysis)。

如果你还没有它，[jmeter 插件](http://code.google.com/p/jmeter-plugins/)有很多有用的控制器和监听器，它们也可以让你更容易理解结果。

# java - vert.x 的 Maven 坐标？

> ID：10448520
> 
> 赞同：2
> 
> 时间：2012-05-04T12:04:56.690
> 
> 标签：java, maven, vert.x

我正在尝试在 Maven 项目中添加 vert.x，但它似乎不在中央存储库中。我错了吗？

如果它可以从 Maven 获得，那么依赖坐标是什么？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T21:24:50.133

我们尚未将 vert.x 上传到 Maven Central，但它已接近 TODO 列表的顶部。

完成后我会更新这篇文章。

[更新]

下一个版本即将发布，其中包括基于 Gradle 的构建和 Mavenised 模块化组件。

Maven 坐标将是：“org.vert-x:vertx-%stuff%:%version%”。

（注意破折号：该项目目前不拥有 org.vertx 域，因此 Maven 不允许我们使用它。）

[更新2]

vert.x 1.2.1.final 已发布到 Maven Central，坐标如上。

以 Gradle 为例：

```
repositories {
  mavenCentral()
}

dependencies {
  compile "org.vert-x:vertx-core:1.2.1.final"
  compile "org.vert-x:vertx-platform:1.2.1.final"
} 
```

有关我们如何使用 Gradle 构建模块的示例，请参见[http://github.com/vert-x 。](http://github.com/vert-x)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T22:18:09.907

如果公共 Maven 存储库中没有 vert.x 工件，您可以使用本地（基于项目的）存储库将库与您的项目一起分发：

```
<repositories>
    <repository>
        <id>local-project-repo</id>
        <url>file:${basedir}/lib/repository</url>
        <releases>
            <enabled>true</enabled>
        </releases>
        <snapshots>
            <enabled>false</enabled>
        </snapshots>
    </repository>
</repositories> 
```

之后，您只需要在 /lib/repository 中重新创建一个 Maven repo 结构（groupId、artifactId、version）。

这种方法将避免您在要编译项目的每个环境中安装 vert.x 依赖项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T12:50:22.067

我在 vert.x 源代码代表中看不到“pom.xml”文件，也看不到 Maven Central 中的 Maven 工件，所以我认为你现在运气不好。

您总是可以下载 vert.x 源代码，进行本地构建，将最小的 POM 文件（带有您自己发明的组/ID/版本）拼凑在一起，然后将其安装到您的本地存储库中。这将使您度过难关，直到开发人员完成 Maven 化和发布。

# html - 如何识别清单文件中的错误

> ID：10448521
> 
> 赞同：0
> 
> 时间：2012-05-04T12:04:57.470
> 
> 标签：html

我正在为我的网页制作清单文件，但是当在 ipad 上打开内部和打开网页时它不起作用，它说连接到互联网。如何解决这个问题我已经在清单中给出了网页中使用的所有资源文件，但它仍然无法正常工作

以下是我的清单文件

```
CACHE MANIFEST
CACHE:
index.html
brd_icon.png
newstyle_tester.css
draxxin.pdf
exede.pdf
js/jquery-1.7.2.min.js
js/script.js
js/jquery.queryloader2.js

image/startbutton.png
image/mockup_splash_1.png
image/testing_file_3.png
image/overview.gif
image/strategy.gif
image/draxxin.gif
image/excede.gif
image/reference.gif
image/results.gif
image/seperator.png
image/overview_active.png
image/strategy_active.png
image/draxxin_active.png
image/excede_active.png
image/result_active.png
image/references_active.png
image/pageone_image.png
image/whiteslide.png
image/option.png
image/option_1.png
image/pagetwo_graph_one.png
image/pagetwo_graph_two_4.png
image/optiononeone.png
image/optiononetwo.png
image/optiontwofirst.png
image/optiontwosecond.png
image/backward.png
image/forward.png
image/button_7days.png
image/button_14days.png
image/close.png
image/popup_page_1.png
image/popup_1_page_2.png
image/popup_2_page_2.png
image/popup_page_3.png
image/popup_page_4.png
image/popup_1_page_5.png
image/popup_2_page_5.png
image/popup_3_page_5.png
image/popup_4_page_5.png
image/smallicon_1.png
image/smallicon_2.png
image/bg_img_lightbox.png
image/tag.png
image/result_graphic_1.png
image/result_graphic_2.png
image/result_graphic_3.png
image/graph1.png
image/graph2.png
image/graph3a.png
image/graph4.png
image/graph5.png
image/graph_one.png
image/graph_three.png
image/bottle_1.png
image/bottle_2.png
image/arrow_1.png 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T09:38:13.283

您的问题是您没有在服务器上正确配置内容类型标头。这是对 cache.manifest 的 HTTP 请求的响应：

```
HTTP/1.1 200 OK
Date: Tue, 08 May 2012 09:33:41 GMT
Server: Apache
Last-Modified: Tue, 08 May 2012 05:07:32 GMT
Etag: "733106-652-4bf7f5d3692a8"
Accept-Ranges: bytes
Content-Length: 1618
Keep-Alive: timeout=15, max=100
Connection: Keep-Alive
Content-Type: text/plain 
```

看到最后一行了吗？应该是`text/cache-manifest`。更改服务器配置中的内容类型。对于 Apache，您可以将此行添加到服务器配置或 .htaccess 文件中：

```
AddType text/cache-manifest            appcache manifest 
```

# php - 在保持单词完整的情况下将字符串分成 3 部分

> ID：10448532
> 
> 赞同：2
> 
> 时间：2012-05-04T12:05:42.243
> 
> 标签：php, regex, string, substr

想象一下，我有 150 个字符长的字符串。我想把它分成 3 个部分，每个部分最多 50 个字符。诀窍是在将字符串分成 3 部分时，我还必须保持单词完整。

我可以使用`substr`并检查它是否将单词切成两半。我想知道是否有任何其他优雅的方式来做到这一点。

我还必须记住，字符串可能少于 150 个字符。例如，如果它是 140 个字符，那么它应该是 50 + 50 + 40。

如果小于 100，则应为 50 + 50。如果为 50 个字符或更少，则不应分割字符串。

我很高兴听到你的想法/方法来解决这个问题。

提前感谢您的时间和关注。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T12:10:24.753

听起来你只想要 php 函数[`wordwrap()`](http://php.net/manual/en/function.wordwrap.php)

> 字符串自动换行（字符串 $str [, int $width = 75 [, string $break = "\n" [, bool $cut = false ]]] ）
> 
> 使用字符串分隔符将字符串包装成给定数量的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:16:04.657

我不认为这是性能方面的最佳解决方案，但它有点

```
$text = 'Lorem te...';
$strings = array(0=>'');
$string_size = 50;
$ci = 0;
$current_len = 0;
foreach( explode(' ', $text) as $word ) {
  $word_len = strlen($word) + 1;
  if( ($current_len + $word_len) > ($string_size - 1) )
    $strings[$ci] = rtrim( $strings[$ci] );
    $ci++;
    $current_len = 0;
    $strings[$ci] = '';
  }

  $strings[$ci] .= $word.' '; 
  $current_len = $current_len + $word_len;
} 
```

# mongodb - mongo mapreduce 后减少的记录数

> ID：10448536
> 
> 赞同：0
> 
> 时间：2012-05-04T12:05:57.300
> 
> 标签：mongodb, mapreduce, mongodb-query

这是我的 mapreduce 代码：

```
DBCollection mongoCollection = MongoDAO.getCollection();
String map = "function() {"
        + "for (index in this.positions.positionList) {"
        + "emit(this._id+'|'+this.headline+'|'+"
        + "this.location.name+'|'+this.location.country.code+'|'+this.publicProfileUrl+'|'+"
        + "this.positions.positionList[index].title+'|'+"
        + "this.positions.positionList[index].company.name+'|'+this.positions.positionList[index].company.industry+'|'+"
        + "this.positions.positionList[index].company.type+'|'+this.positions.positionList[index].company.size+'|'+"
        + "this.lastName+'|'+this.firstName+'|'+this.industry+'|'+this.updatedDate+'|' , {count: 1});"
        + "}}";
String reduce = "";
MapReduceCommand mapReduceCommand = new MapReduceCommand(
        mongoCollection, map, reduce.toString(), "final_result",
        MapReduceCommand.OutputType.REPLACE, null);

MapReduceOutput out = mongoCollection.mapReduce(mapReduceCommand); 
```

目前我正在处理 140,000 条记录。但是在执行 mapreduce 时，记录数减少到 90,000。数据集中没有重复记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T17:10:58.717

更改您的发出以发出 _id 作为键和以管道分隔的字符串作为值。举个例子：

```
emit(this._id, [this._id, this.a, this.b,...].join('|')) 
```

我认为正在发生的事情是您在键中制作了过长的字符串。_id 值的限制为 1KB（在 2.0 中，高于之前的 800B），这就是键的大小。

此外，您可能想要查看预打包的 mongodb-hadoop 连接器，而不是自己滚动：[https ://github.com/mongodb/mongo-hadoop](https://github.com/mongodb/mongo-hadoop)

# tridion - Tridion 2009 - 从组件模板发布另一个组件

> ID：10448539
> 
> 赞同：2
> 
> 时间：2012-05-04T12:06:03.243
> 
> 标签：tridion

一、总体说明：

有两个组件模板，NewsArticle 和 NewsList。NewsArticle 是 Dreamweaver 模板，用于显示新闻文章的内容。NewsList 是一个 xml 文件，其中包含有关所有新闻文章的聚合信息。

目前，内容作者必须发布新闻文章，然后重新发布新闻列表以重新生成 xml。

问题：

我的任务是让新闻文章的发布也重新生成和发布新闻列表。通过 C#，我能够检索新闻列表组件的内容，从新闻文章中生成更新的 xml，并将其合并到新闻列表中的 xml。我在发布新闻列表时遇到了麻烦。

我对文档的访问权限有限，但就我所拥有的而言，我相信使用静态 PublishEngine.Publish 方法可以让我做我需要做的事情。我相信第一个参数（项目）只是一个包含我更新的新闻列表的列表，第二个参数是一个新的 PublishInstruction，其中 RenderInstruction.RenderMode 设置为 Publish。我对 PublicationTargets 应该是什么有点迷茫。

我在正确的轨道上吗？如果是这样，对 Publish 方法调用的任何帮助表示赞赏，如果没有，有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T13:03:56.317

就像 Quirijn 建议的那样，代理查询是最干净的方法。

在代理不可用的情况下（即仅静态发布模型），我通常从将 XML 添加为二进制文件的 TBB 生成新闻列表 XML，而不是开始发布另一个组件或页面。您可以通过在 C# TBB 中调用此方法来执行此操作：

```
engine.PublishingContext.RenderedItem.AddBinary(
  Stream yourXmlContentConvertedToMemoryStream, 
  string filename, 
  StructureGroup location, 
  string variantId, 
  string mimeType) 
```

使您创建的新闻列表 XML 文件的 variantId 唯一，以便不同的组件可以覆盖/更新同一个文件。

更好的是，在页面模板而不是组件模板中执行此操作，以便每页生成一次新闻列表，而不是每个组件（如果每页有多篇文章）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T12:11:56.720

使用 engine.Publish() 方法，您在正确的轨道上：

```
PublishEngine.Publish(
    new IdentifiableObject[] { linkedComponent },
    engine.PublishingContext.PublishInstruction,
     new List() { engine.PublishingContext.PublicationTarget }); 
```

您可以从模板的当前上下文中重用 PublishInstruction 和 Target。此示例显示了一个组件，但它也应该在页面中工作。

需要记住的一件事是，这在 SDL Tridion 2011 SP1 中是不可能的，因为由于安全限制，不允许开箱即用的发布操作。我在这里有一篇关于此的文章[http://www.tridiondeveloper.com/the-story-of-sdl-tridion-2011-custom-resolver-and-the-allowwriteoperationsintemplates-attribute](http://www.tridiondeveloper.com/the-story-of-sdl-tridion-2011-custom-resolver-and-the-allowwriteoperationsintemplates-attribute)

# zend-framework - ZF 一个项目有两个不同的 application_env

> ID：10448544
> 
> 赞同：0
> 
> 时间：2012-05-04T12:06:32.743
> 
> 标签：zend-framework

我正在与 ZF 开发一个项目。该项目的一部分仍在开发中，另一部分已经在生产中。控制器 A 在开发中，控制器 B 在生产中。我已经在 htaccess 文件中设置了我的 application_env。我怎么解决这个问题？问候安德里亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:41:56.163

我看到您使用 apache 作为 Web 服务器。请注意，我无法进行任何测试来确认它的工作方式与 typed 完全一样，但我希望你能明白这一点，并且 E 标志是你的朋友。

```
RewriteRule ^/your-dev-path/.*$ index.php [NC,E=APPLICATION_ENV:development,L]
RewriteRule ^.*$ index.php [NC,E=APPLICATION_ENV:production,L] 
```

E 标志允许将 env 链接到特定规则，而 L 标志基本上使其成为最后一条规则。因此，一旦前一行匹配，最后一行（您的默认规则）不应适用。

这是文档[http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_e的链接](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_e)

# regex - 没有正则表达式的 Apache mod_rewrite Rewriterule？

> ID：10448553
> 
> 赞同：0
> 
> 时间：2012-05-04T12:07:07.897
> 
> 标签：regex, performance, apache, mod-rewrite

我一直在测试正则表达式并得出结论，这是有史以来最有效的性能杀手。

我的问题是我的网站需要更好的网址，唯一正确的方法似乎是 Apaches Rewriterule，但它需要与正则表达式一起使用，我想避免这种情况。

**任何人都知道是否可以避免使用正则表达式，如果可以，那么该怎么做？**

我现在在 .htaccess 中使用的是：

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?url=$1 [L,QSA] 
```

我如何摆脱正则表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T12:15:09.787

如果您事先知道要重定向哪些 URL，我应该使用 Redirect 而不是 Rewrite 规则。重定向没有正则表达式，但这意味着您需要指定要重写的每个 URL，例如

```
Redirect /BadUrl http://myhost.com/GoodUrl 
```

但是，如果您想要让 Apache 将无限数量的现在不存在的页面重定向到新的 URL 方案，恐怕您会被正则表达式所困扰。但是，我应该同意 Gerben 的观点，即 IO 更有可能降低服务器速度，而不是正则表达式本身——我正在使用每天有数百万个请求的系统，我们的主要表现不是重写规则问题...

如果基本重定向不起作用，并且您不想使用 mod_rewrite 函数，我建议将重定向逻辑完全从 Apache 中移出。由于您已经在使用 PHP，您可以简单地用 PHP 脚本替换普通的 404 文件，该脚本将 URL 重写为所需的 URL 方案。它还可以让您的用户有机会更新他们的书签。

# qt - Makefile 中缺少分隔符错误

> ID：10448555
> 
> 赞同：8
> 
> 时间：2012-05-04T12:07:16.180
> 
> 标签：qt, makefile, mingw32

我正在 Windows 上开发 Qt 4.7.2。我已经生成了 Makefile、Makefile.Debug 和 Makefile.Release。但是，当我尝试使用 mingw32-make 构建可执行文件时，出现以下错误：

```
mingw32-make -f Makefile.Debug all
mingw32-make[1]: Entering directory `C:/Qt/4.7.2/src/plugins/sqldrivers/mysql'
Makefile.Debug:61: *** missing separator.  Stop.
mingw32-make[1]: Leaving directory `C:/Qt/4.7.2/src/plugins/sqldrivers/mysql'
mingw32-make: *** [debug-all] Error 2 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-01T04:08:59.160

显然这个答案已经晚了，但我正在为后代回答......今天这让我感到震惊。

弗兰克·奥斯特菲尔德几乎可以肯定它是对的。不确定您是如何生成 makefile 的，但它们可能是 nmake makefile，而不是 mingw makefile。您可以通过查看 Makefile.Debug 的顶部来判断。如果您看到“CXX = cl”，而不是“CXX = g++”，那么这就是您的问题。

就我而言，我在尝试编译 Qt SDK 本身时遇到了这个错误。长话短说：我需要在配置命令行上指定“-platform win32-g++”（默认为 win32-msvc）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-04T12:21:59.507

“缺少分隔符”几乎总是意味着您有一行应该以制表符开头，而不是以空格开头。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T06:40:45.967

如果您实际上向我们展示了 Makefile.debug 文件第 61 行的内容，我们可以为您提供更好的答案。“缺少分隔符”是 make 版本的“语法错误”。这基本上意味着make在makefile中看到了它无法弄清楚的一行。

正如 William Pursell 所提到的，其中一个原因可能是您有空间介绍您的食谱系列，但还有很多其他原因。也许您忘记了目标和先决条件之间的“：”，或者变量赋值中的“=”。还有其他可能性。

# javascript - 在 chrome 扩展中添加多个外部域

> ID：10448557
> 
> 赞同：3
> 
> 时间：2012-05-04T12:07:20.340
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在构建一个使用多个 API 的 Chrome 扩展程序。目前我已经设置好了，这样我就可以使用其中一个 API，但是尝试在清单中添加第二个是行不通的。我尝试了几件事，导致扩展无法正常工作或清单文件无效。

```
"content_security_policy": "script-src 'self' https://domain-1.com; object-src 'self'",
"content_security_policy": "script-src 'self' https://domain-2.com; object-src 'self'" 
```

给出无效的清单错误

```
"content_security_policy": "script-src 'self' https://domain-1.com; https://domain-2.com; object-src 'self'", 
```

仅适用于第一个域

```
"content_security_policy": "script-src 'self' https://domain-1.com, https://domain-2.com; object-src 'self'", 
```

给出无效的清单错误

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T13:12:49.987

只能有一个`content_security_policy`条目。您可以指定多个域，但必须用空格而不是逗号分隔它们：

```
"content_security_policy": "script-src 'self' https://domain-1.com https://domain-2.com; object-src 'self'", 
```

有关详细信息，请参阅[CSP 规范](http://www.w3.org/TR/CSP/)，尤其是[示例部分](http://www.w3.org/TR/CSP/#examples)。

# c# - $.get 函数未在 IE 中调用

> ID：10448565
> 
> 赞同：0
> 
> 时间：2012-05-04T12:07:47.907
> 
> 标签：c#, javascript, jquery, asp.net

我设计了一个可以在除 IE 之外的所有浏览器中运行的应用程序，实际上我被击中的地方意味着我添加了 2 个选项卡，例如，

```
 public string GetTabs()
    {
         strResult = strResult + "<div class='amc-container'>";
                    strResult = strResult + "<div id='links-div' class='simple-round-div-right'>";
         strResult = strResult + "<div id='tab-link1' class='tab-button-enabled'><a href='javascript:void();' onclick=\"showTab('details-div','Code',this,'" + id + "'," + id.ToString() + "," + status + ");\">Products</a></div>";
         strResult = strResult + "<div id='tab-link2' class='tab-button-disabled'><a href='javascript:void();' onclick=\"showTab('details-div','Code',this,'" + code.Trim() + "'," + id.ToString() + "," + status + ");\">Spares</a></div> </div></div>";       
        return strResult;
    } 
```

//Javascript函数

```
function showTab(div, dom, obj, tcd, tid,status) {
    $("div.tab-button-enabled").removeClass('tab-button-enabled').addClass('tab-button-disabled');

    $(obj).parent().removeClass('tab-button-disabled').addClass('tab-button-enabled');
    $("#" + div).html('Loading...');

    $.get("/common/get_amcb.aspx", { dm: dom, acd: tcd, aid: tid, domain: obj.firstChild.nodeValue,status:status },
    function (data) {
        $("#" + div).html(data);
    });
} 
```

$.get() 函数加载页面 get_amcb.aspx 页面并通过 response.Write() 方法从 .aspx 页面获取数据并绑定到 div 中。

在**页面加载时，我正在调用此函数**(GetTabs()) 并分配给标签。 **如果我将使用IE（9.0 版本）**
，所有这些都适用于 chrome、Firefox 但不适用于 IE，如果我们想显示数据，添加的数据不会反映到选项卡中，这意味着我们需要关闭浏览器并重新打开浏览器，此时添加的数据是显示，为什么会发生，我不明白**后面发生了什么，**请帮助我。 谢谢

 ***** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:12:26.563

IE 喜欢缓存。清除缓存并查看。如果是这种情况，请随 URL 一起发送时间戳。所以它会被视为一个新的请求。

```
var tstmp = new Date();
var uniqueTimeStamp = tstmp.getTime()
$.get("/common/get_amcb.aspx?timestam="+uniqueTimeStamp , { dm: dom, acd: tcd, aid: tid, domain: obj.firstChild.nodeValue,status:status },
    function (data) {
        $("#" + div).html(data);
    }); 
```****

# exception-handling - 如何在 DAO 层引发的 struts1.3.8 中执行异常处理？

> ID：10448580
> 
> 赞同：1
> 
> 时间：2012-05-04T12:08:32.913
> 
> 标签：exception-handling, nullpointerexception, dao, struts-1

我正在使用 struts 1.3.8 和 Spring Jdbc。如何处理 DAO 层中引发的异常并将信息传递给表示层。我是否必须通过使用全局转发在 DAO 层或 Struts 中进行处理，我可以这样做吗？哪个最好？？？
提前致谢，
Laxman Chowdary

# java - 访问任何 URL 时处理响应

> ID：10448588
> 
> 赞同：0
> 
> 时间：2012-05-04T12:08:59.590
> 
> 标签：java

我正在尝试制作一个我想要的程序，当我点击任何网址或你可以说网站时，我正在阅读该网站的所有内容。我为此使用 URL 类。

这是我的代码..

```
 import java.net.*;
 import java.io.*;
 public class URLConnectionReader 
 {
 public static void main(String[] args) throws Exception 
{
     URL oracle = new URL("http://www.oracle.com/index.html");
     URLConnection yc = oracle.openConnection();

    BufferedReader in = new BufferedReader(new InputStreamReader(yc.getInputStream()));
    String inputLine;
    while ((inputLine = in.readLine()) != null)

    System.out.println(inputLine);

    in.close();
}
} 
```

但作为响应，它显示了查看页面源的内容，我只想要网页内容，而不是全部。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:10:27.070

[然后使用 HTML 解析器（如jsoup](http://jsoup.org)）解析您收到的 HTML

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:59:19.997

网页内容 == 页面来源。浏览器分析 html 并将其可视化以供人眼查看。如果你只想要正文，你可以使用 jsoup：

```
String text = Jsoup.parse(html).body().text(); 
```

但你也会得到一些不需要你想要的内容的广告、菜单和其他文本。

# iphone - 这个目标可能包括它自己的产品

> ID：10448589
> 
> 赞同：26
> 
> 时间：2012-05-04T12:09:06.113
> 
> 标签：iphone, xcode, ipad

> File .../FaceDeFace.app 依赖于自身。
> 这个目标可能包括它自己的产品。
> 
> File .../FaceDeFace.app 依赖于自身。
> 这个目标可能包括它自己的产品。

我已经在 os Snow leopard 中完成了我的项目，但现在我的 os 版本也发生了变化，现在是 10.7.3。这是安装在我的 Imac 机器上的。这个应用程序首先在 MacBook 中启动，但现在我想在 IMac 中开发它。但是显示了上述错误，所以我必须做什么。尽管我已经更改了所有证书和所有配置文件。请帮忙。谢谢我提前。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-05-04T12:42:11.323

在您的 Xcode 项目中选择目标，然后单击 Build Phases 选项卡。查看 Target Dependencies 列表；目标的产品*不*应该在那里列出，但听起来它可能已被错误地添加到该列表中。还要检查同一个选项卡中的其他区域——你不希望你的产品列在 Copy Bundle Resources 或 Link Binary With Libraries 中——你显然不能将你正在构建的东西用作资源或库首先构建产品。这就是 Xcode 似乎在抱怨的地方。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-17T22:11:17.053

在尝试构建静态库目标时，使用 Xcode 7（beta 1）遇到了这个问题。这是来自构建输出的错误消息：

> 无法运行命令“CopySwiftLibs libMyStaticLibraryName.a” - 此目标可能包含其自己的产品。

*（我`libMyStaticLibraryName.a`在上面替换了我的静态库的实际名称。）*

问题是这个静态库目标的**Embedded Content Contains Swift Code**构建设置 ( `EMBEDDED_CONTENT_CONTAINS_SWIFT`) 设置为 YES，而实际上没有与此目标关联的 Swift 代码。在 Xcode 中将此设置为 NO 可解决此问题。

静态库不能包含 Swift 代码，因此如果设置了此构建设置，则会导致错误，即使目标中没有实际的 Swift 代码也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-13T10:20:29.640

就我而言，很简单，请删除通用目标，然后添加新目标。就这样

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-08T11:58:53.250

在我的情况下，我的项目里面有**子模块**，所以命令 `git submodule add submoduleURL git submodule init git submodule update`

解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-12T14:46:58.277

`podspec`当文件不正确时，我遇到了同样的问题。`.h`我的错误是我没有`.m`为`source_files`. 因为那个`.xib`文件被添加了两次。这是一个正确的例子：

```
 s.source_files = 'YourTarget/Classes/**/*.{h,m}'

  s.resources = ['YourTarget/Classes/UIComponents/**/*.xib'] 
```

见[https://guides.cocoapods.org/syntax/podspec.html#source_files](https://guides.cocoapods.org/syntax/podspec.html#source_files)

# c# - C# MySQL LINQ 日期时间转换

> ID：10448591
> 
> 赞同：2
> 
> 时间：2012-05-04T12:09:18.813
> 
> 标签：c#, mysql, date

我正在尝试使用 LINQ 和 C# 从 mySQL DB 中检索记录。

c#代码中的日期是一个字符串：23-01-2010

我需要将其转换为 DateTime 格式为 2010-01-23（mySQL 默认 DateTime 格式），否则查询不返回任何记录，目前它错误说字符串无法与 DateTime 匹配（row.DateOfIssue）如果我将字符串转换为DateTime（C#），则不是yyyy-MM-dd的mySQL DateTime格式

```
String endDate = "23-01-2010"; 
var query = (from row in uow.UserPersonalLicenseDetails
                             where (endDate >= row.DateOfIssue && endDate <= row.DateOfExpiry)
                             select row) 
```

这是一个如此标准的查询，在 LINQ 中很难做到这一点似乎很疯狂。似乎将任何方法（如 CompareTo 等）放在 where 子句中会导致“搜索适用于这种情况的类”的错误

我现在想知道最好的攻击路线是否可能是在数据库中编写存储过程。然后可以将 C# 日期时间作为参数，将其转换为 mySQL 格式，然后运行所需的查询.....有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:13:26.117

使它成为 DateTime - 所以

```
var myDate = DateTime.Parse(endDate); 
```

然后

```
myDate.ToString("yyyy-MM-dd"); 
```

- - - - - 或这个：

```
 var myDate = DateTime.Parse(endDate); 
var query = (from row in uow.UserPersonalLicenseDetails 
where ((myDate.CompareTo(row.DateOfIssue)>=0 && (myDate.CompareTo(row.DateOfExpiry)<=0) 
select row 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:04:49.300

只需将您的日期字符串转换为`DateTime`，然后在 LINQ 中将字符串转换为`DateTime`返回的字符串以便进行比较。我之所以使用它`ParseExact`是因为我们需要确保我们正在解析为 MySQL 存储日期的确切格式，即`yyyy-MM-dd hh:mm`.

就像是：

```
var endDate = DateTime.Parse("23-10-2010").ToString("yyyy-MM-dd hh:mm");
var formattedEndDate = DateTime.Parse(endDate);
//you could cut that to one line by putting the date in said format in the first place

var query = (from row in uow.UserPersonalLicenseDetails
             where formattedEndDate >= row.DateOfIssue
                 && formattedEndDate <= row.DateOfExpiry
             select row) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-17T20:43:28.783

好的，问题是表的字段定义为 DATE 而不是 DATETIME，因此没有匹配。

使用 DateTime.Date 并且匹配成功。

# c - 随机坐标中“开放”槽中的数字放置

> ID：10448592
> 
> 赞同：0
> 
> 时间：2012-05-04T12:09:25.520
> 
> 标签：c, arrays, random, replace, placement

我正在尝试将 6x15 数组（地图）中的随机坐标设置为数字 3，但前提是该坐标的值仍为 0。（数组中的所有值最初设置为 0，ship num 是我要放置的值 3）

```
 25 int shipnum;
 26 int x;
 27 
 28 shipnum = 1;
 29 while(shipnum > 0)
 30 {
 31 if ((&x = map[rand_number(MAX_ROWS)][rand_number(MAX_COLS)]) == 0)
 32 {*x = 3;
 33 shipnum --;}
 34 } 
```

但是，在编译过程中，我得到了错误

```
testarray3.c:31:9: error: lvalue required as left operand of assignment
testarray3.c:32:2: error: invalid type argument of unary ‘*’ (have ‘int’) 
```

我不确定这些都在说什么......还是有更好的方法来做我想做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:18:13.850

如果`x`是一个 int 变量，`&x`它是地址，你不能改变它（第一个错误）。如果`x`是 int，`*x`则没有意义 - int 不是指针（第二个错误）。

你需要的是：

*   创建`x`一个指向 int ( `int *x;`)的指针
*   获取地址`map[rand][rand]`并将其存储在 x
*   检查存储在该地址的值 ( `*x`)
*   如果该值为 0，则更新该值。

您的代码将真正受益于不尝试将所有内容都塞进两行中。我实际上会避免整个 int 指针操作，它只会混淆您的代码。将随机坐标存储在两个变量中并使用正常的数组访问/分配。

# jquery - 隐藏/删除一段文字

> ID：10448596
> 
> 赞同：0
> 
> 时间：2012-05-04T12:09:45.167
> 
> 标签：jquery, html, cordova

我正在使用由 Jquery 解释并打印的 XML 文件。大多数物品只有一个`title`并且`intro text`没有任何奇怪的东西。

只有少数项目具有以某些 HTML 开头的 a`title`和a。`intro text`此 HTML 不被解释为 HTML，而是作为纯文本

介绍文本示例： `<img src="url" alt="" title="" class="class" /> Intro text` 将显示为`<img src="url" alt="" title="" class="class" /> Intro text`，这是错误的。我想要的是隐藏整个`<img />`标签。那可能吗？

如果您需要更多信息，请大喊大叫！谢谢。

**更多信息**：

XML 像这样提供它：
`&lt;img src=&quot;url&quot; alt=&quot;&quot; title=&quot;&quot; class=&quot;class&quot; /&gt; Intro Text`
所以输出是合乎逻辑的`<img src="url" alt="" title="" class="class" /> Intro text`

是否有可能隐藏从<到>的所有内容？（或从 < 到 >）

**更新 2**：

找到[这个](https://stackoverflow.com/questions/5580287/hide-a-character-in-text-with-jquery)解决方案来隐藏“名称：”中的：，如果有像小丑这样的东西，它也可能对我有用。 `var str = '<img *joker* />'; str = str.replace(/<img *joker* />/g,'');` 还是这完全疯了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:16:19.323

如果您有父标签，这很容易：

```
<p id="yourid">
    <img src="url" alt="" title="" class="class" /> Intro text
</p> 
```

javascript然后是：

```
$('#yourid').html($('#yourid').text()); 
```

（我只用文本内容替换 HTML 内容）。

# visual-studio - PyInstaller 找不到 VC90.DebugCRT

> ID：10448600
> 
> 赞同：0
> 
> 时间：2012-05-04T12:09:52.437
> 
> 标签：visual-studio, msvcrt, pyinstaller

在使用 PyInstaller 构建应用程序的过程中，我在输出中看到了这一点：

```
INFO: Hidden import 'encodings' has been found otherwise
INFO: Adding Microsoft.VC90.CRT to dependent assemblies of final executable
INFO: Searching for assembly x86_Microsoft.VC90.CRT_1fc8b3b9a1e18e3b_9.0.21022.8_none ...
INFO: Found manifest C:\windows\WinSxS\Manifests\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.21022.8_none_bcb86ed6ac711f91.manifest
INFO: Searching for file msvcr90.dll
INFO: Found file C:\windows\WinSxS\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.21022.8_none_bcb86ed6ac711f91\msvcr90.dll
INFO: Searching for file msvcp90.dll
INFO: Found file C:\windows\WinSxS\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.21022.8_none_bcb86ed6ac711f91\msvcp90.dll
INFO: Searching for file msvcm90.dll
INFO: Found file C:\windows\WinSxS\x86_microsoft.vc90.crt_1fc8b3b9a1e18e3b_9.0.21022.8_none_bcb86ed6ac711f91\msvcm90.dll
INFO: Adding Microsoft.Windows.Common-Controls to dependent assemblies of final executable
INFO: Adding Microsoft.VC90.DebugCRT to dependent assemblies of final executable
INFO: Searching for assembly x86_Microsoft.VC90.DebugCRT_1fc8b3b9a1e18e3b_9.0.21022.8_none ...
WARNING: Assembly not found
ERROR: Assembly x86_Microsoft.VC90.DebugCRT_1fc8b3b9a1e18e3b_9.0.21022.8_none not found 
```

我有 Visual C++ 2008 和 2010 速成版，虽然我不确定这些年，但还有 2005、2008 和 2010 年的可再发行版本。

如果不是我已经拥有的应用程序，什么提供 VC90.DebugCRT？如果我将 VC90.DebugCRT 打包在应用程序中，我是否会遵守 Microsoft 对分发的限制？

# css - 2 div布局问题

> ID：10448601
> 
> 赞同：0
> 
> 时间：2012-05-04T12:09:54.153
> 
> 标签：css, html

我有一个网页，其链接位于页面左侧，位于左侧浮动的 div 中。然后，我将内容放在右侧浮动的 div 中。我遇到的问题是，当页面调整大小时，内容会移动到链接下方。

我已经厌倦了将整个页面放在包装器 div 中，但是当我这样做时，链接停止工作，我也无法将内容定位在我需要的位置。

这是包装器 div 的 css

```
#wrapper {
    margin:0 auto 0 auto;
    min-width:960px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:16:32.020

我想出解决窗口调整大小问题的最佳方法是像 wordpress 一样，甚至这个网站也这样做：在页面周围放置 balnk 可调整大小的边距，并使所有内容的宽度固定。

“液体”样式（带有百分比等）很酷，但在大多数情况下看起来并不正确，所以最好的办法是让你的页面比整个窗口窄一点，让不同的浏览器只改变页边距大小。

为此，我实际上设置了非常 html 标签的样式，给它一个固定的宽度，比如 1000px 或其他任何东西，然后是 margin-left:auto; 边距右：自动；使其始终居中。

编辑：

把它放在你的CSS中

```
html {

width:66em;

margin-left:auto;

margin-right:auto;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:17:41.950

浮动元素将以这种方式运行，因为它们不在页面流中。

您可能正在寻找的是[流畅的两列布局](http://www.maxdesign.com.au/articles/css-layouts/two-liquid/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:18:40.843

主要问题是您为 div 提供了固定宽度，因此第一步是将 div 的宽度更改为 % 或 em。

从全屏开始，我什至会创建一个没有任何内容的空白页面，只需给 div 一个不同的背景颜色（u）r。这样做是因为您知道内容的宽度不会干扰。

我也会将两个 div 浮动到左侧，并可能在开始时将它们相对定位。

# ssis - SSIS 可以输出 SQL Server Compact 4.0 文件吗？

> ID：10448610
> 
> 赞同：2
> 
> 时间：2012-05-04T12:11:28.030
> 
> 标签：ssis, sql-server-ce, sql-server-ce-4

我正在使用 SSIS 2008 从我的数据库中读取数据。现在我希望它将数据保存在 SQL Server Compact 4.0 文件中（将由 ASP.net MVC 3 应用程序读取）

有没有其他人这样做过？

就像我说的，这是针对 SQL CE 4.0，而不是 3.5

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:02:41.067

您有一个专门用于执行此操作的组件：

![在此处输入图像描述](../Images/ef5bfcccc92d2a5a6c45795399be5751.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:23:29.420

在数据流中使用[SQL Server Compact 目标](http://msdn.microsoft.com/en-us/library/ms140269.aspx)组件。

# asp.net-mvc - 代码优先始终使用 SQL Server Express 或 SQL Server CE

> ID：10448620
> 
> 赞同：1
> 
> 时间：2012-05-04T12:12:12.577
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, entity-framework-4, ef-code-first

我正在构建一个 MVC 3 应用程序并首先使用 Entity Framework 4.3 代码。我的环境变得越来越复杂，所以我决定使用 SQL Server 2008 R2。然后我更改了我的连接字符串`web.config`。我检查并知道新的连接字符串是正确的，但 EF 仍在使用`.\SQLEXPRESS ...`来自 SQL Server CE 的默认连接字符串 ( )（我现在已经从 nuget 包中删除了 SQL Server CE）。

我的上下文名称是`CodeFirstContext`，我的连接字符串名称`CodeFirstContext`也是。但是`return context.Products;`总是失败和/因为`context`说中的连接字符串`SQLEXPRESS`（我`web.config`将连接字符串设置为`SQLSERVER`）。

这里发生了什么？我删除了项目中的所有默认连接字符串。当我运行该项目时，它仍然从 SQL Server Express 获取所有数据。

我一直在寻找大约两天。如果这么多人只需要更改连接字符串然后它就可以工作，为什么这会如此困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:20:07.130

您可能正在从您的根/机器配置中获取连接字符串，在您的 web.config 文件中添加一个清晰的元素，如下所示

```
<connectionStrings>
  <clear/>
  .. your connection strings here
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T09:38:13.023

我已经解决了这样的问题：

```
public class CodeFirstContext : DbContext
{
    public CodeFirstContext() : base("RandevuIzle")
    {
    }
    public DbSet<User> Users { get; set; }
}

<connectionStrings>
  <add name="RandevuIzle" connectionString="Data Source=111.222.333.444\MSSQLSERVER2008; Initial Catalog=RandevuIzle;User Id=MyUserName;Password=myPassword" providerName="System.Data.SqlClient" /> 
```

出了点问题，但我无法理解。在执行以下代码后，我重新启动了项目。然后就可以正常工作了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:27:27.730

当您实例化您的 DbContext 时，您是否提供了一个不是 CodeFirstContext 的名称？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T22:04:20.310

神圣的 SQL 烟雾，蝙蝠侠！这让我今天彻底崩溃了。在一个新项目上使用 VS2010 启动和运行 EF 5.0 比我想象的要困难得多。我遇到了同样的问题，发现了这首很棒的代码颂::

[http://odetocode.com/blogs/scott/archive/2012/08/15/a-troubleshooting-guide-for-entity-framework-connections-amp-migrations.aspx](http://odetocode.com/blogs/scott/archive/2012/08/15/a-troubleshooting-guide-for-entity-framework-connections-amp-migrations.aspx)

具体来说::

```
 public class DepartmentDb : DbContext 
 {
    public DepartmentDb()
        : base(@"data source=.; 
                 initial catalog=departments;
                 integrated security=true")
    { }

    public DbSet<Person> People { get; set; }
} 
```

得到了我需要的结果。我认为我必须像这样设置数据源并且它不会在 app.config 中找到明显的解决方案，这很酷吗？不，我没有。但是我今天正式花费了太多时间来尝试从 LINQ 到 SQL 再到 EF 的转换，并且我将继续完成一些应用程序，同时我仍然有兴趣这样做。

# php - 代替 标签与

> ID：10448627
> 
> 赞同：0
> 
> 时间：2012-05-04T12:12:34.417
> 
> 标签：php, html, parsing, simple-html-dom

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:21:37.650

Why not KISS (Keep It Simple, Stupid):

```
echo str_replace(
    array('<pre>', '</pre>'),
    array('<code>', '</code>'),
    $your_html_with_pre_tags
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T12:22:22.110

Look at the [manual](http://simplehtmldom.sourceforge.net/manual.htm). Changing `<pre>` tags to `<code>` should be as simple as:

```
$str = '<pre lang="php">
    echo "test";
</pre>
<pre lang="html4strict">
    <div id="test">Hello</div>
</pre>';
require_once("simplehtmldom/simple_html_dom.php");
$html = str_get_html($str);
foreach($html->find("pre") as $pre) {
    $pre->tag = "code";
    $pre->lang = null; // remove lang attribute?
}
echo $html->outertext;

// <code>
//     echo "test";
// </code>
// <code>
//     <div id="test">Hello</div>
// </code> 
```

PS: you should encode the `"`, `<` and `>` characters in your input.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:40:17.927

Just replacing `pre` tags with `code` tags changes the meaning and the rendering essentially and makes the markup invalid, if there are any block-level elements like `div` inside the element. So you need to revise your goal. Check out whether you can actually keep using `pre`. If not, use `<div class=pre>` instead, together with a style sheet that makes it behave like `pre` in rendering. When you just replace `pre` tags with `div` tags, you won’t create syntax errors (the content model of `div` allows anything that `pre` allows, and more).

Regarding the `lang` attribute, `lang="php"` is incorrect (by HTML specs, `lang` attribute specifies the *human* language of the content, using standard language codes), but the idea of coding information about computer language is good. It may help styling and scripting later. HTML5 drafts mention that such information can be coded using a class name that starts with `language-`, e.g. `class="language-php"' (or, when combined with another class name,`class="language-php pre"'.

# facebook - 添加到时间线和授权问题

> ID：10448644
> 
> 赞同：0
> 
> 时间：2012-05-04T12:13:53.073
> 
> 标签：facebook, facebook-graph-api, authorization, facebook-timeline

我创建了一个网站，用户可以在其时间轴上分享专辑后下载专辑。该网站可以在[skibsthekid](http://www.skibsthekid.com)（音乐部分）找到。该过程要求他们“添加到时间线”，然后在授权网站发布他们共享的内容后，单击“下载到共享”按钮，该按钮将发布一个打开的图形对象并开始下载。

这对我和其他开发人员来说非常有效。但是，当普通用户在单击“添加到时间线”按钮后尝试此操作时，弹出窗口只会将他们带到他们的 Facebook 主页。我的开放图表操作已获得 facebook 的批准。我是否需要通过另一个审批流程或出现一些错误。我试图找出故障并没有发现任何问题。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:22:59.593

听起来应用程序处于`Sandbox`模式。但是，当我尝试复制您在上面提供的步骤时，该操作对我有用。请参阅下面的屏幕截图以获取证据：

![工作示例](../Images/6d4714782e66930e1c3e5e128ca1af46.png)

# java - Java Calendar.add 给出不一致的结果

> ID：10448650
> 
> 赞同：0
> 
> 时间：2012-05-04T12:14:39.190
> 
> 标签：java

我有以下代码

```
 Calendar calendar = Calendar.getInstance();

    calendar.set(2011, 7, 29);      //case 1    
   // calendar.set(2011, 7, 30);      //case 2
   // calendar.set(2011, 7, 31);    //case 3

    System.out.println("===After seting the date== "+calendar.getTime());

    System.out.println("=================================================================");

    calendar.add(Calendar.MONTH, 6);

    System.out.println("===result after adding 6 months==  "+calendar.getTime()); 
```

对于案例 2 和案例 3，我也得到了相同的结果。它应该溢出到下个月并显示新日期。但它没有发生。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T12:20:56.980

目前尚不清楚您是在使用“应该”来表示“这就是我想要它做的事情”还是表示“这是我相信它被记录在案的事情”。该[文档](http://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html)实际上支持给定的行为：

> add(f, delta) 将 delta 添加到字段 f。这相当于调用 set(f, get(f) + delta) 并进行两次调整：
> 
> **添加规则 1**。调用之后的字段 f 的值减去调用之前的字段 f 的值是 delta，以字段 f 中发生的任何溢出为模。当字段值超出其范围时会发生溢出，因此，下一个较大的字段会递增或递减，并且字段值会调整回其范围内。
> 
> **添加规则 2**。如果期望较小的字段是不变的，但由于字段 f 改变后其最小值或最大值的变化或其他约束，例如时区偏移量变化，它不可能等于它的先前值，那么它的值调整为尽可能接近其预期值。较小的字段表示较小的时间单位。HOUR 是比 DAY_OF_MONTH 小的字段。不对预期不会保持不变的较小字段进行任何调整。日历系统确定哪些字段预计是不变的。
> 
> 此外，与 set() 不同，add() 强制立即重新计算日历的毫秒数和所有字段。
> 
> 示例：考虑一个 GregorianCalendar 最初设置为 1999 年 8 月 31 日。调用 add(Calendar.MONTH, 13) 将日历设置为 2000 年 9 月 30 日。添加规则 1 将 MONTH 字段设置为九月，因为在八月添加 13 个月会给出九月下一年。由于 DAY_OF_MONTH 在 GregorianCalendar 中不能为 9 月的 31，因此添加规则 2 将 DAY_OF_MONTH 设置为 30，这是最接近的可能值。虽然它是一个较小的字段，但 DAY_OF_WEEK 不会被规则 2 调整，因为它预计会随着 GregorianCalendar 中月份的变化而变化。

示例的第二部分正是您面临的情况： DAY_OF_MONTH 预计是不变的，但必须更改才能保持在正确的月份内，因此将其调整为最接近的可能值（在您的情况下为 29） .

所以看起来这种行为对我来说*是*一致的——你认为它以什么方式不一致？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T06:15:42.477

我发现以下是使用公历实现的最简单方法。将月份的日期设置为下个月的最后一天，以防止它成为下个月的第一天。

尝试跟随。

cal.set(Calendar.DAY_OF_MONTH, Math.min(Calendar.DAY_OF_MONTH, cal.getActualMaximum(Calendar.DAY_OF_MONTH)));

# android - Android，调用 API 14 方法，但应与 API 4 保持兼容

> ID：10448654
> 
> 赞同：0
> 
> 时间：2012-05-04T12:15:07.570
> 
> 标签：android, android-4.0-ice-cream-sandwich, statusbar

如果设备正在运行 ICS，我想隐藏状态栏：

```
getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE); 
```

但是**View.SYSTEM_UI_FLAG_LOW_PROFILE**参数是在 Android API 14 中定义的。

我的清单现在是：

```
<uses-sdk android:minSdkVersion="4" android:targetSdkVersion="14" /> 
```

和

```
android:theme="@android:style/Theme.Black.NoTitleBar.Fullscreen" > 
```

但随后它崩溃了：

```
java.lang.NoSuchMethodError: android.view.View.setSystemUiVisibility 
```

我该怎么做才能调用此方法并使其与 API 级别较低的 Android 设备兼容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:32:27.497

您可以通过使用获取版本

```
int SDK_INT = android.os.Build.VERSION.SDK_INT; 
```

你可以在设置参数之前检查版本

```
if(SDK_INT >= 11 && SDK_INT < 14) {
        getWindow().getDecorView().setSystemUiVisibility(View.STATUS_BAR_HIDDEN);
    }else if(SDK_INT >= 14){
        getWindow().getDecorView().setSystemUiVisibility(View.SYSTEM_UI_FLAG_LOW_PROFILE);
    } 
```

# regex - 为什么选择这个文件？

> ID：10448659
> 
> 赞同：0
> 
> 时间：2012-05-04T12:15:37.777
> 
> 标签：regex, linq

我有以下声明：

```
Directory.GetFiles(filePath, "A*.pdf")
.Where(file => Regex.IsMatch(Path.GetFileName(file), "[Aa][i-lI-L].*"))
.Skip((pageNum - 1) * pageSize)
.Take(pageSize)
.Select(path => new FileInfo(path))
.ToArray() 
```

我的问题是上述语句还找到了它不应该找到的文件“Adali.pdf” - 但我不知道为什么。

上面的语句应该只选择以 a 开头并且第二个字母在 il 范围内的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:23:48.310

因为它匹配`Adali`第 3 个和第 4 个字符 ( `al`)：

```
Adali
  -- 
```

尝试`^`在您的正则表达式中使用它允许查找字符串的开头（[正则表达式备忘](http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/)单）：

```
Regex.IsMatch(..., "^[Aa][i-lI-L].*") 
```

我也怀疑你根本不需要星号。

PS：作为旁注，让我注意到这个问题似乎写得不太好。您应该尝试自己调试此代码，特别是您应该尝试在没有 LINQ 的情况下检查您的正则表达式。我确定这里与 LINQ （您在问题中的标签）无关，但问题在于正则表达式（您根本没有在标签中提及）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:27:59.963

您没有锚定字符串。这使得正则表达式匹配`al`in `Adali.pdf`。

将正则表达式更改为`^[Aa][i-lI-L].*`You can do just if you can do just `^[Aa][i-lI-L]`if you don't need any 除了匹配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:28:44.313

你应该这样做

```
var f = Directory.GetFiles(tb_Path.Text, "A*.pdf").Where(file => Regex.IsMatch(Path.GetFileName(file), "[Aa][i-lI-L].pdf")).ToArray(); 
```

当您在正则表达式中调用“。*”时，Adali 接受

# c# - 在所有远程系统中编译本地 mof 文件

> ID：10448660
> 
> 赞同：1
> 
> 时间：2012-05-04T12:15:38.867
> 
> 标签：c#, wmi

我有一个 mof 文件，它将在 wmi 存储库中创建自定义类。我可以使用 mofcomp.exe 在本地系统中编译此文件。但我想要的是在所有远程机器上编译这个 mof 文件（而不是在每个系统中手动编译文件）。我怎样才能做到这一点。

# php - files_get_contents 给 twitter 错误

> ID：10448667
> 
> 赞同：-1
> 
> 时间：2012-05-04T12:16:07.037
> 
> 标签：php, twitter

谢谢 ！

在 php 中，我想知道是否存在 twitter 用户。为此，我尝试恢复 url 的内容：

```
$json = file_get_contents("http://api.twitter.com/1/statuses/user_timeline.json?screen_name=".$_GET['search']);
$jsonObject = json_decode($json); 
```

其中 $_GET['search'] = 是在 URL 中传递的用户名。

但问题是，如果有人给出一个不存在的用户名，我会得到一个错误。

在 php.net 上，他们说如果出现错误，file_get_contents 将返回 false。

我试图在一个条件下做：

```
if(file_get_contents("http://api.twitter.com/1/statuses/user_timeline.json?screen_name=".$_GET['search']) != false){
    // do my stuff 
}
else{
    // say that this username don't exists
} 
```

但是当我尝试这段代码时，我得到了一个橙色的大警告代码，上面写着：

```
Warning: file_get_contents(http://api.twitter.com/1/statuses/user_timeline.json?screen_name=A_Wrong_User_Name) [function.file-get-contents]: failed to open stream: HTTP request failed! HTTP 
```

所以我可以删除错误并检查 twitter 用户是否存在。如果他存在，我想用 file_get_contents 获取页面的内容，如果不存在，我想显示该用户不存在。

感谢帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:18:47.573

您应该使用 CURL 而不是`file_get_contents`：

```
<?php
 $username = "user";

 $url="http://api.twitter.com/1/users/show/".$username.".xml";

 $ch = curl_init();
 curl_setopt ($ch, CURLOPT_URL, $url);
 curl_setopt ($ch, CURLOPT_CONNECTTIMEOUT, 20);
 curl_setopt($ch, CURLOPT_NOBODY, 1);
 curl_setopt($ch, CURLOPT_HEADER, 1);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

 curl_exec($ch);
 $header = curl_getinfo($ch, CURLINFO_HTTP_CODE);
 curl_close($ch);

 if( $header == "404" )
 {
 //it does not exist
 }else{
 //it exists
 } 
```

# c# - ASP - 每个用户的 SQL 数据库的新实例？

> ID：10448671
> 
> 赞同：0
> 
> 时间：2012-05-04T12:16:30.187
> 
> 标签：c#, asp.net, sql, entity-framework

我已经为此苦苦挣扎了一段时间，似乎找不到任何信息。

我在 C# 中使用 SQL 数据库、EntityFramework、ASP 和 .Net4 创建了一个在线销售点系统。我以前的编程经验是使用 OpenGL 和 DirectX，所以这对我来说都是全新的。

来自单个公司的用户将使用单个帐户登录该站点。然后，他们可以使用在线收银台和后台。到目前为止，该软件是使用单个 SQL 数据库开发的。我想做的是让应用程序为每个帐户创建和使用不同的 SQL 数据库实例。

这听起来合理/可行，还是您希望为所有用户提供一个庞大的数据库？- 注意：可能存在大量用户，每个用户都存储大量信息，每个用户只需要访问自己的数据库。

任何建议将不胜感激

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:26:48.477

我认为这不是一个好方法，好像会有任何方案更改，您必须保持同步每个数据库实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:33:02.170

> 这听起来合理/可行，还是您希望为所有用户提供一个庞大的数据库？- 注意：可能存在大量用户，每个用户都存储大量信息，每个用户只需要访问自己的数据库。

这是可能的，但根本不明智。用户不访问数据库，应用程序可以。仅当您的应用程序为用户提供在应用程序中创建自己的数据结构的能力（例如托管服务提供商会这样做）时，为每个用户分离一个完整的数据库才有意义。如果它只是为了容纳每个用户的多个相同结构，那么您最好花时间规范化适当的关系结构（假设因为您提到您正在使用 SQL）并优化查询/存储过程以使数据检索/插入速度快。

RDBMS 完全有能力处理大量用户和大型数据子集，如果您对其进行规范化，有效地适当地键入每个结构（在大多数情况下通过 userkey）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:31:22.903

最好的方法是为所有用户提供一个庞大的数据库。

SQL Server 将仅支持每个实例 32,767 个数据库。

[http://msdn.microsoft.com/en-us/library/ms143432.aspx](http://msdn.microsoft.com/en-us/library/ms143432.aspx)

# postgresql - PostgreSQL中的计数问题

> ID：10448675
> 
> 赞同：0
> 
> 时间：2012-05-04T12:16:45.907
> 
> 标签：postgresql, count, group-by

我想要一列的计数，我在 FROM 子句中有 5 列，但它给出了错误的计数，因为我已经包含了 from 子句中的所有列。我不希望 GROUP BY 子句中的特定列。

如果我从 GROUP BY 子句中删除该列，则会引发以下错误：

> 错误：列“pt.name”必须出现在 GROUP BY 子句中或用于聚合函数第 1 行：SELECT distinct on (pu.id) pu.id, pt.name as package_name, c...

例如：

```
SELECT DISTINCT ON (a) a,b,c,count(d),e
FROM table GROUP BY a,b,c,d,e ORDER BY a 
```

从此我想从 GROUP BY 中删除 e。

如何从 GROUP BY 中删除该列以便获得正确的计数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:35:49.027

^(重读问题后更新。)
你正在混合`GROUP BY`和`DISTINCT ON`。你想要的（我是怎么理解的）可以通过一个[窗口函数](http://www.postgresql.org/docs/current/interactive/tutorial-window.html)和一个结合来完成`DISTINCT ON`：

```
SELECT DISTINCT ON (a)
       a, b, c
     , count(d) OVER (PARTITION BY a, b, c) AS d_ct
     , e
FROM   tbl
ORDER  BY a, d_ct DESC; 
```

窗口函数需要 PostgreSQL 8.4 或更高版本。

这里会发生什么？

1.  计算表中有`d_ct`多少个`(a,b,c)`具有非空值的相同集合`d`。
2.  每个 . 准确选择一行`a`。如果您不`ORDER BY`超过 just `a`，则会选择随机行。
3.  在我的示例`ORDER BY` `d_ct DESC`中，另外，将选择集合中最高的伪随机行`d_ct`。

* * *

对您可能需要的另一种略有不同的解释`GROUP BY`：

```
SELECT DISTINCT ON (a)
       a, b, c
     , count(d) AS d_ct
     , min(e)   AS min_e             -- aggregate e in some way
FROM   t
GROUP  BY a, b, c
ORDER  BY a, d_ct DESC; 
```

`GROUP BY`*之前* 应用了`DISTINCT ON`，所以结果和上面的非常相似，只是`e`/的值`min_e`不同。

# sharepoint - 无法在 sharepoint 2010 中从 CSV 导入术语集

> ID：10448678
> 
> 赞同：0
> 
> 时间：2012-05-04T12:17:05.790
> 
> 标签：sharepoint, csv, import, set, term

我无法在 SharePoint 2010 中使用 CSV 导入术语集。我收到以下错误： **尝试在提交文件的 [最后一行] 行导入术语集时遇到错误，并且某些数据可能尚未清理向上。请确保此文件是有效的 csv 文件，并遵循示例文件 ImportTermSet.csv 中的正确格式**

我尝试重新使用示例文件本身来创建我的术语集，在记事本中创建术语集（+确保它是 UTF-8 CSV），但都是徒劳的:(有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T20:46:44.103

作为记录：所有重复的术语实例必须具有完全相同的大小写。

例子

```
,,,TRUE,,Continent,Political Entity,,,,,
,,,TRUE,,continent,Political Entity,Country,,,,
,,,TRUE,,Continent,Political Entity,Country,Province or State,,, 
```

以上将失败，因为 1 级术语“大陆”在第二行有一个小写字母“c”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T13:43:18.983

注意嵌套级别是如何声明的。

这是一个正确的 CSV 文件的示例（注意嵌套级别的顺序）

```
"Term Set Name","Term Set Description","LCID","Available for Tagging","Term Description","Level 1 Term","Level 2 Term","Level 3 Term","Level 4 Term","Level 5 Term","Level 6 Term","Level 7 Term"
"My Term Set","Description of My Term Set",,"True",,,,,,,,
,,,"True",,"Italy",,,,,,
,,,"True",,"Italy","Venice",,,,,
,,,"True",,"France",,,,,,
,,,"True",,"France","Paris",,,,,
,,,"True",,"Germany","Berlin",,,,, 
```

这是一个不正确的 CSV 文件的示例：

```
"Term Set Name","Term Set Description","LCID","Available for Tagging","Term Description","Level 1 Term","Level 2 Term","Level 3 Term","Level 4 Term","Level 5 Term","Level 6 Term","Level 7 Term"
"My Term Set","Description of My Term Set",,"True",,,,,,,,
,,,"True",,"Italy",,,,,,
,,,"True",,"Italy","Rome",,,,,
,,,"True",,"France","Paris",,,,,
,,,"True",,"France",,,,,, 
```

由于“法国”已经存在，最后一行将给出导入错误！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-05T09:09:58.920

[http://blog.jussipalo.com/2011/04/sharepoint-importing-term-set-gives.html](http://blog.jussipalo.com/2011/04/sharepoint-importing-term-set-gives.html)

# c# - 我应该如何删除 DbSet 中的所有元素？

> ID：10448684
> 
> 赞同：87
> 
> 时间：2012-05-04T12:17:29.837
> 
> 标签：c#, .net, entity-framework-4

使用 Entity Framework 4.3 删除 System.Data.Entity.DbSet 中所有元素的最佳方法是什么？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-05-04T14:32:42.680

```
dbContext.Database.ExecuteSqlCommand("delete from MyTable"); 
```

（不开玩笑。）

问题是 EF 不支持任何批处理命令，并且不使用直接 DML 删除集合中所有实体的唯一方法是：

```
foreach (var entity in dbContext.MyEntities)
    dbContext.MyEntities.Remove(entity);
dbContext.SaveChanges(); 
```

或者为了避免加载完整的实体，可能会便宜一点：

```
foreach (var id in dbContext.MyEntities.Select(e => e.Id))
{
    var entity = new MyEntity { Id = id };
    dbContext.MyEntities.Attach(entity);
    dbContext.MyEntities.Remove(entity);
}
dbContext.SaveChanges(); 
```

但是在这两种情况下，您都必须加载**所有**实体或**所有**关键属性，并从集合中一个一个地删除实体。此外，当您调用`SaveChanges`EF 时，会将 n（=集合中的实体数）DELETE 语句发送到数据库，这些语句也会在数据库中一一执行（在单个事务中）。

因此，直接 SQL 显然更适合此目的，因为您只需要一个 DELETE 语句。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2018-05-16T07:53:26.893

旧帖子，但现在有一个 RemoveRange 方法：

```
 dbContext.MyEntities.RemoveRange(dbContext.MyEntities);
    dbContext.SaveChanges(); 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-10-01T17:10:19.397

这是您可以在代码中执行此操作的另一种方式。

```
public static class Extensions
{
    public static void DeleteAll<T>(this DbContext context)
        where T : class
    {
        foreach (var p in context.Set<T>())
        {
            context.Entry(p).State = EntityState.Deleted;
        }
    }
} 
```

要实际调用该方法并清除集合：

```
myDbContext.DeleteAll<MyPocoClassName>(); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-16T11:12:44.863

如果您想在**不编写任何 SQL**的情况下删除所有元素并且只执行**Single Db Call**

[实体框架扩展库](https://github.com/loresoft/EntityFramework.Extended)提供了**批量删除**方法。

```
context.Users.Delete(); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-30T11:40:55.857

由于接受的答案仅提及以下方法：

```
context.Database.ExecuteSqlCommand("delete from MyTable"); 
```

而是提供了替代方案，我设法编写了一个方法，您可以使用它来避免加载所有实体，然后遍历它们并改用*ExecuteSqlCommand*。

假设使用工作单元，其中上下文是 DbContext：

```
using System.Data.Entity.Core.Objects;
using System.Text.RegularExpressions;

public void DeleteAll()
{
    ObjectContext objectContext = ( (IObjectContextAdapter)context ).ObjectContext;
    string sql = objectContext.CreateObjectSet<T>().ToTraceString();
    Regex regex = new Regex( "FROM (?<table>.*) AS" );
    Match match = regex.Match( sql );
    string tableName = match.Groups[ "table" ].Value;

    context.Database.ExecuteSqlCommand( string.Format( "delete from {0}", tableName ) );
} 
```

**第一个代码块检索ExecuteSqlCommand**方法所需的表名。

## 用法：

```
using ( var context = new UnitOfWork() )
{
    context.MyRepository.DeleteAll();
} 
```

没有**必要**打电话

```
context.SaveChanges() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-22T00:30:46.223

如果您正在使用工作单元和通用存储库，您可能会发现以下有用

```
public virtual void DeleteWhere(Expression<Func<TEntity, bool>> filter = null,
            Func<IQueryable<TEntity>, IOrderedQueryable<TEntity>> orderBy = null,
            string includeProperties = "")
        {
            IQueryable<TEntity> query = dbSet;
            if (filter != null)
            {
                query = query.Where(filter);
            }
            foreach (var includeProperty in includeProperties.Split
                (new char[] { ',' }, StringSplitOptions.RemoveEmptyEntries))
            {
                query = query.Include(includeProperty);
            }

            foreach (var entity in query)
            {
                context.Entry(entity).State = EntityState.Deleted;
            }
        } 
```

用法：

```
uow.myRepositoryName.DeleteWhere(u => u.RoomId == roomId);
uow.Save(); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2021-05-03T20:35:32.873

使用存储库模式，您可以在其中为存储库提供模型的类型，它可以在任何模型类型上工作。

```
 public async Task<int> RemoveAllAsync()
    {
        Context.Set<T>().RemoveRange(await Context.Set<T>().ToListAsync());
        return await Context.SaveChangesAsync();
    } 
```

# .htaccess - 使用 YII 清除 .htaccess 中的 url 和 https 重定向冲突

> ID：10448693
> 
> 赞同：2
> 
> 时间：2012-05-04T12:18:17.617
> 
> 标签：.htaccess, apache2, yii

我的 .htaccess 中有以下内容 - 干净 url 的声明和 https 重定向都可以单独工作，但放在一起会导致持续重定向错误（此服务器正在以永远不会完成的方式重定向）。

这是我的.htacess：

```
RewriteEngine on
# if a directory or a file exists, use it directly 
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# otherwise forward it to index.php
RewriteRule . index.php
# force to use https
#RewriteCond %{HTTPS} !=on 
#RewriteRule ^ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301] 
```

知道我该如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:11:01.767

希望我没有迟到，因为我在一天前偶然发现了同样的问题并发现了冲突。

在您的文件中写入以下内容`.htaccess`：

```
RewriteEngine On

RewriteCond %{HTTPS} off
RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI} [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

第一条规则将自动将任何 HTTP 请求重定向到 HTTPS 并（通过关键`[L]`标记）停止其他会弄乱页面的替换（特别是，不会提供图像和 CSS 样式表）。

第二种是 Yii 建议的检查特定 URL 是否对应于真实文件或目录的方法，如果不是，则将请求转发到`index.php`（Web 应用程序的引导文件）。（那么应用程序配置文件中的规则应该完成其余的工作）。

# c# - 读取 PDF 文件并从 WCF 服务作为流返回？

> ID：10448694
> 
> 赞同：2
> 
> 时间：2012-05-04T12:18:22.627
> 
> 标签：c#, wcf, web-services, stream

我想创建一个 WCF 服务（像 Windows 服务一样工作）。该服务将从特定路径读取 PDF 文件、提取页面、创建新 PDF 文件并将其返回给调用者。

我怎样才能做到这一点 ？我使用 QuickPDF 处理 PDF 文件，我可以提取和创建新的 PDF 文件。如何在 WCF 服务中使用它？

等待您的帮助...

这只是示例代码：

```
public Stream ExtractPdf(string PathOfOriginalPdfFile, int StartPage,int PageCount)
{
        PDFLibrary qp = new PDFLibrary();
        Stream Stream_ = null;

        if (qp.UnlockKey(".................") == 0)
        {
            string fileName = @"..\..\Test Files\sample1.pdf";
            string OutputFile = @"..\..\Test Files\sample1_extracted.pdf";

            if (qp.Unlocked() == 1)
            {

                int docID = qp.LoadFromFile(fileName, "");

                int extractPageSuccess = qp.ExtractPages(StartPage, PageCount);

                if (extractPageSuccess == 0)
                {
                    // error
                }
                else
                {
                    qp.SaveToFile(OutputFile);
                }
            }
        }

        //
        // Codes here
        //
        return Stream_;
    } 
```

我编辑了它：

```
 public byte[] ExtractPdf(string PathOfOriginalPdfFile, int StartPage,int PageCount)
    {

        QuickPDFDLL0815.PDFLibrary qp = new QuickPDFDLL0815.PDFLibrary(@"C:\Program Files (x86)\Quick PDF Library\DLL\QuickPDFDLL0815.dll");

        string fileName = @"..\..\Test Files\sample1.pdf";
        byte[] binFile = null;

        if (qp.UnlockKey("...................") == 0)
        {

            if (qp.Unlocked() == 1)
            {

                int docID = qp.LoadFromFile(fileName, "");

                int extractPageSuccess = qp.ExtractPages(StartPage, PageCount);

                if (extractPageSuccess == 0)
                {
                    // error
                }
                else
                {
                   binFile = qp.SaveToString();
                }
            }
        }

        return binFile;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:33:37.587

您可以将文件作为 发送`Stream`，请参阅[How to: Enable Streaming](http://msdn.microsoft.com/en-us/library/ms789010.aspx)，然后在客户端上保存文件并让 shell 执行它。MSDN 文章包括一个示例`GetStream`方法以及关于`Writing a custom stream`.

如果您想要*更完整*的示例代码，论坛帖子[使用 WCF 进行流式文件传输](http://dotnetslackers.com/Community/forums/streamed-file-transfer-using-wcf/p/2736/29545.aspx)以一些开头，但是请注意，作者将其发布在那里是因为他们在运行它时遇到了问题。

至于 byte[] 或流，请参阅[Uploading Image Blobs–Stream vs Byte Array](http://brentdacodemonkey.wordpress.com/2011/07/28/uploading-image-blobsstream-vs-byte-array-year-of-azure-week-4/)和[Stream vs Raw Bytes](https://stackoverflow.com/questions/4295478/stream-vs-raw-bytes)。第二种状态

> 流对于大文件的性能会更好，因为并非所有文件都需要一次读入内存

# mysql - 如果表包含 10000 个条目，如何使用 MySQL 优化查询？

> ID：10448695
> 
> 赞同：1
> 
> 时间：2012-05-04T12:18:30.100
> 
> 标签：mysql, sql, optimization, query-optimization

当我像这样执行此查询时，它们会花费大量执行时间，因为 user_fans 表包含**10000**个用户条目。我该如何优化它？

询问

```
SELECT uf.`user_name`,uf.`user_id`,
@post                := (SELECT COUNT(*) FROM post WHERE user_id = uf.`user_id`) AS post,
@post_comment_likes  := (SELECT COUNT(*) FROM post_comment_likes WHERE user_id = uf.`user_id`) AS post_comment_likes,
@post_comments       := (SELECT COUNT(*) FROM post_comments WHERE user_id = uf.`user_id`) AS post_comments,
@post_likes          := (SELECT COUNT(*) FROM post_likes WHERE user_id = uf.`user_id`) AS post_likes,

(@post+@post_comments) AS `sum_post`,
(@post_likes+@post_comment_likes) AS `sum_like`, 
((@post+@post_comments)*10) AS `post_cal`,      
((@post_likes+@post_comment_likes)*5) AS `like_cal`,
((@post*10)+(@post_comments*10)+(@post_likes*5)+(@post_comment_likes*5)) AS `total`  
FROM  `user_fans` uf  ORDER BY `total` DESC lIMIT 20 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T13:22:39.837

我会尝试通过在您的其他表上放置触发器来完全简化这一点，并且只需在您的 User_Fans 表中添加几列......您尝试从 Posts、PostLikes、PostComments、发表评论喜欢。

将记录添加到任何表时，只需更新您的 user_fans 表以将 1 添加到计数...无论如何，这将基于用户的密钥 ID 几乎是即时的。至于“LIKES”...类似，只有在某些东西被触发为“Like”的情况下，加1..然后您的查询将是对单个记录的直接数学运算，而不依赖于任何连接来计算a “加权”总值。随着您的表变得更大，查询也将变得更长，因为它们有更多的数据要涌入和聚合。您正在浏览每个 user_fan 记录，它本质上是从所有其他表中查询每条记录。

话虽如此，保持表格不变，我将重组如下......

```
SELECT 
      uf.user_name,
      uf.user_id,
      @pc := coalesce( PostSummary.PostCount, 000000 ) as PostCount,
      @pl := coalesce( PostLikes.LikesCount, 000000 ) as PostLikes,
      @cc := coalesce( CommentSummary.CommentsCount, 000000 ) as PostComments,
      @cl := coalesce( CommentLikes.LikesCount, 000000 ) as CommentLikes,
      @pc + @cc AS sum_post,
      @pl + @cl AS sum_like, 
      @pCalc := (@pc + @cc) * 10 AS post_cal,
      @lCalc := (@pl + @cl) * 5 AS like_cal,
      @pCalc + @lCalc AS `total`
   FROM
      ( select @pc := 0,
               @pl := 0,
               @cc := 0,
               @cl := 0,
               @pCalc := 0
               @lCalc := 0 ) sqlvars,
      user_fans uf
        LEFT JOIN ( select user_id, COUNT(*) as PostCount
                       from post
                       group by user_id ) as PostSummary
           ON uf.user_id = PostSummary.User_ID

        LEFT JOIN ( select user_id, COUNT(*) as LikesCount
                       from post_likes
                       group by user_id ) as PostLikes
           ON uf.user_id = PostLikes.User_ID

        LEFT JOIN ( select user_id, COUNT(*) as CommentsCount
                       from post_comment
                       group by user_id ) as CommentSummary
           ON uf.user_id = CommentSummary.User_ID

        LEFT JOIN ( select user_id, COUNT(*) as LikesCount
                       from post_comment_likes
                       group by user_id ) as CommentLikes
           ON uf.user_id = CommentLikes.User_ID

   ORDER BY 
      `total` DESC 
   LIMIT 20

My variables are abbreviated as 
"@pc" = PostCount
"@pl" = PostLikes
"@cc" = CommentCount
"@cl" = CommentLike
"@pCalc" = weighted calc of post and comment count * 10 weighted value
"@lCalc" = weighted calc of post and comment likes * 5 weighted value 
```

对预查询的 LEFT JOIN 将这些查询运行一次，然后整个事物被连接，而不是作为每个记录的子查询被命中。通过使用 COALESCE()，如果 LEFT JOINed 表结果中没有这样的条目，您将不会被 NULL 值打乱计算，因此我将它们默认为 000000。

***澄清您的问题***

您可以将任何查询作为“AS AliasResult”。“As”也可用于简化任何长表名，以提高可读性。别名也可以使用同一个表但作为不同的别名来获取相似的内容，但目的不同。

```
select
      MyAlias.SomeField
   from
      MySuperLongTableNameInDatabase MyAlias ...

select
      c.LastName,
      o.OrderAmount
   from
      customers c
         join orders o
            on c.customerID = o.customerID  ...

select
      PQ.SomeKey
   from
      ( select ST.SomeKey
           from SomeTable ST
           where ST.SomeDate between X and Y ) as PQ
         JOIN SomeOtherTable SOT
            on PQ.SomeKey = SOT.SomeKey ... 
```

现在，上面的第三个查询不需要（完整查询导致别名“PQ”代表“PreQuery”）。如果您想预先限制一组特定的其他复杂条件，并且在对许多其他表进行额外连接以获得所有最终结果之前想要一个较小的集合，则可以这样做。

由于“FROM”不必是一个实际的表，但它本身可以是一个查询，查询中使用的任何其他地方，它必须知道如何引用这个预查询结果集。

此外，在查询字段时，它们也可以是“As FinalColumnName”，以将结果简化到它们将被使用的位置。

从 ... 中选择 CONCAT(User.Salutation, User.LastName) 作为 CourtesyName

从 ... 中选择 Order.NonTaxable + Order.Taxable + ( Order.Taxable * Order.SalesTaxRate ) 作为 OrderTotalWithTax

“As” columnName 不需要是聚合，但最常见的是这种方式。

现在，关于 MySQL 变量...如果您正在执行存储过程，许多人会在过程的其余部分之前预先声明它们设置默认值。您可以通过设置并为结果提供“别名”引用来在查询中内联执行它们。执行这些变量时，选择将模拟始终返回一个 SINGLE RECORD 值的值。它几乎就像查询中使用的可更新的单个记录。您不需要应用任何特定的“加入”条件，因为它可能对查询中的其余表没有任何影响......本质上，创建一个笛卡尔结果，但一个记录对任何其他表将永远不会创建无论如何都重复，所以下游没有损坏。

```
select 
       ...
   from 
      ( select @SomeVar := 0,
               @SomeDate := curdate(),
               @SomeString := "hello" ) as SQLVars 
```

现在，sqlvars 是如何工作的。想想一个线性程序......一个命令在查询运行时以确切的顺序执行。然后将该值重新存储回“SQLVars”记录中，以备下次使用。但是，您不会将其引用为 SQLVars.SomeVar 或 SQLVars.SomeDate... 只是 @SomeVar := someNewValue。现在，当在查询中使用@var 时，它也会作为“As ColumnName”存储在结果集中。有时，这可能只是准备下一条记录的占位符计算值。然后每个值可直接用于下一行。因此，给定以下示例...

```
select
      @SomeVar := SomeVar * 2 as FirstVal,
      @SomeVar := SomeVar * 2 as SecondVal,
      @SomeVar := SomeVar * 2 as ThirdVal
   from
      ( select @SomeVar := 1 ) sqlvars,
      AnotherTable
   limit 3

Will result in 3 records with the values of 

FirstVal    SecondVal   ThirdVal
2           4           8
16          32          64
128         256         512 
```

注意@SomeVar 的值是如何在每列使用它时使用的......所以即使在同一条记录上，更新的值也可以立即用于下一列......也就是说，现在看看尝试建立一个模拟记录计数/ 每个客户的排名...

```
select
      o.CustomerID,
      o.OrderID
      @SeqNo := if( @LastID = o.CustomerID, @SeqNo +1, 1 ) as CustomerSequence,
      @LastID := o.CustomerID as PlaceHolderToSaveForNextRecordCompare
   from
      orders o,
      ( select @SeqNo := 0, @LastID := 0 ) sqlvars
   order by
      o.CustomerID 
```

“Order By”子句强制首先按顺序返回结果。因此，这里将返回每个客户的记录。第一次通过，LastID 为 0，客户 ID 为...5。由于不同，它返回 1 作为@SeqNo，然后将该客户 ID 保存到下一条记录的 @LastID 字段中。现在，客户的下一条记录...最后一个 ID 是相同的，因此它采用 @SeqNo（现在 = 1），并将 1 加到 1 并成为同一客户的 #2... 继续前进.. .

至于如何更好地编写查询，请查看 MySQL 标签并查看一些重要的贡献者。研究问题和一些复杂的答案以及解决问题的工作原理。并不是说没有其他声誉得分较低的人刚刚起步并且完全胜任，但是您会发现谁给出了好的答案以及为什么。看看他们发布的答案历史。您阅读和遵循的越多，您就越能更好地处理编写更复杂的查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:23:02.763

1.  您可以将此查询转换为 Group By 子句，而不是对每列使用子查询。
2.  您可以在关系参数上创建索引（这将是优化查询响应的最有用的方法）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T12:24:57.383

1000 条用户记录根本算不上多少数据。

您可以对数据库本身进行一些工作：

1）您是否在外键上设置了相关索引（在每个表中的 user_id 上设置了索引）？尝试在查询[http://www.slideshare.net/phpcodemonkey/mysql-explain-explained之前运行 EXPLAIN](http://www.slideshare.net/phpcodemonkey/mysql-explain-explained)

2）您的数据类型是否正确？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-06T20:00:37.433

查看@me（*见图1*）和@DRapp（*见图2*）的区别查询执行时间并解释。当我阅读@Drapp 的答案时，我意识到我在这个查询中做错了什么以及为什么我的查询需要这么多时间基本上答案是如此简单我的查询依赖于子查询或@Drapp 使用派生（临时/文件排序）在的帮助下会话变量、别名和连接...

> 图 1 exe 时间 ( `00:02:56:321`)

![在此处输入图像描述](../Images/d1bb68e7d446d229178c84b63b7f1f01.png)

> 图 2 exe 时间 ( `00:00:32:860`)

![在此处输入图像描述](../Images/3be646995bd8269819a063e967954d06.png)

# c - 尝试运行简单的 RPC 程序时出错

> ID：10448696
> 
> 赞同：21
> 
> 时间：2012-05-04T12:18:31.467
> 
> 标签：c, ubuntu, rpc

我正在尝试运行一个使用 rpcgen 创建的简单 RPC 程序。它是一个简单的阶乘程序。这是我的第一个 RPC 程序。制作工作正常。还创建了可执行文件。但是在尝试运行可执行文件时，我收到此错误：

```
$sudo ./fact_server 
Cannot register service: RPC: Unable to receive; errno = Connection refused
unable to register (FACTPROGRAM, FACTVERSION, udp). 
```

我尝试在另一台具有相同操作系统（ubuntu）的电脑上运行相同的程序。它在那里运行完美。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-04T19:55:08.267

首先检查端口映射器是否工作，使用`rpcinfo`检查它。如果您收到任何错误，请安装`portmap`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-04T19:58:42.120

使用 . 检查服务是否正在运行`rpcinfo`。这就是我得到的。

```
$ rpcinfo 
   program version netid     address                service    owner
    100000    4    tcp6      ::.0.111               portmapper superuser
    100000    3    tcp6      ::.0.111               portmapper superuser
    100000    4    udp6      ::.0.111               portmapper superuser
    100000    3    udp6      ::.0.111               portmapper superuser
    100000    4    tcp       0.0.0.0.0.111          portmapper superuser
    100000    3    tcp       0.0.0.0.0.111          portmapper superuser
    100000    2    tcp       0.0.0.0.0.111          portmapper superuser
    100000    4    udp       0.0.0.0.0.111          portmapper superuser
    100000    3    udp       0.0.0.0.0.111          portmapper superuser
    100000    2    udp       0.0.0.0.0.111          portmapper superuser
    100000    4    local     /run/rpcbind.sock      portmapper superuser
    100000    3    local     /run/rpcbind.sock      portmapper superuser
        24    5    udp       0.0.0.0.3.99           -          superuser
        24    5    tcp       0.0.0.0.3.100          -          superuser 
```

如果服务未运行，您必须使用`rpcbind`. 在 Ubuntu 上，我需要 root 权限才能运行该服务。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-10-05T12:19:50.100

最近 Linux 版本的 rpcbind有一个*错误/功能*- 它现在在系统启动后不活动/运行，但应该根据 /usr/lib/systemd/system/ 中的 systemctl 配置 rpcbind.service 文件以某种方式“激活套接字” ：

```
[Install] 
Also=rpcbind.socket 
```

检查此线程上相同的错误/功能导致 Ubuntu 问题（[https://bugs.launchpad.net/ubuntu/+source/rpcbind/+bug/1558196](https://bugs.launchpad.net/ubuntu/+source/rpcbind/+bug/1558196)）。

**对您（我们）的 rpcbind 问题的简短回答是**- 为了运行 RPC 服务器代码，请对系统**的 systemctrl 配置进行以下修改**：

```
sudo systemctl add-wants multi-user.target rpcbind 
```

现在，设置 rpcbind 运行的预期方法是以某种方式访问​​ /var/run/rpcbind.sock，我要感谢一些 Unix/Linux 大师，他们可能会启发我了解 RPC 服务器应用程序代码应该做什么来实现这个 rpcbind “套接字激活”效果。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-18T02:07:21.000

问题的出现是由于无法使用类似`portmap`or的实用程序`rpcbind`。安装其中任何一个来解决问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-10-01T10:59:41.380

**如何安装rpcgen**

在终端上键入此命令。

```
sudo apt-get install rpcbind 
```

但有时上面的代码无法帮助您安装`rpcgen`.

![在此处输入图像描述](../Images/ebfe6860fbc4a2acad84c9552d35cd20.png)

那时您必须按照这些步骤操作。然后您可以轻松安装它。你应该按照这个一步一步来

```
sudo apt-get update  
sudo apt-get install rpcbind 
```

最后，您可以使用此命令进行检查`rpcinfo`

![在此处输入图像描述](../Images/745b610f7287c292be12a26c13905646.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-03-08T10:53:44.530

只需安装以下内容并尝试。

```
sudo apt install libc-dev-bin 
```

有关更多信息，请查看以下 GitHub。 [https://github.com/riyazathali/RPC-HelloWorld](https://github.com/riyazathali/RPC-HelloWorld)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-11-22T21:16:25.220

我也有错误使用`rpcinfo`。最后我不得不运行：

```
/etc/init.d/rpcbind start 
```

正如[这里](https://www.looklinux.com/error-cannot-register-service-rpc-unable-to-receive-errno-connection-refused/)建议的那样。

得到后：

```
[info] Already running: rcpbind. 
```

rpc 服务器二进制文件能够注册。

# javascript - 如何将背景图像定位到 html 元素的左上角和右下角？

> ID：10448697
> 
> 赞同：7
> 
> 时间：2012-05-04T12:18:39.023
> 
> 标签：javascript, html, css, background, background-image

我有一个段落，我希望有一个可见的“标记”来向用户显示段落的开头和结尾。

我在左上角显示背景图像没有问题，但我不知道如何将背景图像定位到右下端。这是我用于将图像定位到左上角的 css：

```
p[class] {
    background-image: url("../../image/my_image.gif");
    background-position: left top;
    background-repeat: no-repeat;
} 
```

我不是在寻找使用额外 html 元素的解决方案！！！它只需要使用 css 工作！由于该段落设置了伪前和伪后元素，我无法在此处使用它们。所以问题是：

**如何将背景图像定位到 html 元素的左上角和右下角，而不使用其他 html 元素，但仅使用 css（并且没有伪元素）？**

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T12:28:02.020

西里尔接近但错误。它需要是`background-position: right bottom;`

一般来说 - 它可以使用数值。所以`background-position: right bottom;`你也可以写`background-position: 100% 100%;`，并`background-position: left top;`会导致`background-position: 0 0;`

还请查看 W3C 规范：`http://www.w3.org/TR/css3-background/#the-background-position`

对上面的 sree 的评论：这是完全错误的，在使用或`left: 0px ; top:0px;`时确实指的是 HTML 元素本身的定位`position:relative``position:absolute`

编辑：如果你喜欢使用多个背景，你可以注意它如下：

```
p[class] {
    background-image: url("../../image/my_image.gif"), url("../../image/my_image.gif");
    background-position: left top, right bottom;
    background-repeat: no-repeat;
} 
```

查看[http://caniuse.com/#feat=multibackgrounds](http://caniuse.com/#feat=multibackgrounds)以获得跨浏览器支持

打招呼

汤姆

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T12:35:29.937

如果浏览器支持对您来说不是问题，您可以使用 CSS3 多背景：[http ://www.css3.info/preview/multiple-backgrounds/](http://www.css3.info/preview/multiple-backgrounds/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T12:20:32.330

尝试`background-position: bottom right`代替`left top`呢？

# javascript - 我该如何改进这段代码

> ID：10448702
> 
> 赞同：0
> 
> 时间：2012-05-04T12:19:11.030
> 
> 标签：javascript, ajax, browser-history

我已经实现了 javascript 代码来解决 ajax 历史问题 一切正常，没有问题，但我想改进这段代码

举个例子

当用户看到页面（URL：[http](http://www.example.com/pages/about) ://www.example.com/pages/about ）并且如果用户单击联系页面我将哈希码附加到这样的 url

```
window.location.hash="!"+hash; 
```

所以 URL 看起来像[http://www.example.com/pages/about#!contactus](http://www.example.com/pages/about#!contactus)

每当用户点击页面哈希码都会改变

如果用户按下后退按钮或无论如何返回，哈希将被更改，因为你们都知道

使用我网站的哈希更改内容

所以回到要点我想要做的是不想在地址栏附加哈希（就像Facebook做的{你可以在最新的浏览器中看到这个}）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:35:08.600

您应该查看HTML5 中新增的[History API 。](http://www.w3.org/TR/html5/history.html)“Dive into HTML5”一书中有一个有点长的[介绍](http://fortuito.us/diveintohtml5/history.html)，但我比[MDN 文章](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)更喜欢它。

还有一个很棒的库，叫做[History.JS](https://github.com/balupton/History.js)，它抽象出新 API 和旧的基于哈希的方法之间的差异。我还解决了[浏览器之间的许多不兼容问题](https://github.com/balupton/History.js#notes-on-compatibility)，这很棒！它适用于 jQuery、Prototype、MooTols 和 Zepto。

# jquery - ruby on rails 3，根据先前选择的选择填充选择列表，ruby 方式

> ID：10448705
> 
> 赞同：0
> 
> 时间：2012-05-04T12:19:34.093
> 
> 标签：jquery, ruby-on-rails-3, ruby-on-rails-3.1

我想根据之前的 collection_select 选择填充 collection_select 的选项。我有一个选择运动，我想用基于该运动的团队填充下一个选择。

问题是我发现的所有示例都是针对旧版本的 ROR，所以我决定在这里问。我知道我必须添加一些讨厌的东西，例如：

```
html_options = {:onchange=>'d=$("#player_sports_id").val();$.ajax({type: "GET", url: "/players/returnsel1.js?sports_id="+d, dataType: "script" });'}) 
```

调用 player#returnsel1 并获得返回的 returnsel1.js.erb。在returnsel1 我有变量

```
@teamstoreturn=Teams.where(:sport_id=params[:sport_id]) 
```

那么jquery的returnsel1.js.erb应该是什么样子的呢？谢谢你。多里扬

edit1：这是它的实际外观，但它不起作用：

```
html_options = {:onchange=>'d=$("#player_sports_id").val();$.ajax({type: "GET", url: "/players/returnsel1?sports_id="+d, dataType: "script",success: function(data){ $("#player_teams_id").html(data)} });'}) 
```

在控制器中是这样的：

```
 def returnsel1
    @teamstoreturn=Team.where(:sports_id=>params[:sports_id])
    render :inline => "<%= collection_select(:player, :teams_id, @teamstoreturn, :id, :naziv) %>"
  end 
```

如果我去 /players/returnsel1?sports_id=2 我得到正确的下拉菜单

我做错了什么？

edit2：应该有 dataType: "html" 而不是 dataType: "script" 现在它正在工作:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:50:12.847

您应该使用可以处理成功答案的函数扩展 .ajax 请求。没有这个，答案就是丢弃者。可能这个函数应该包含一个 jquery 代码，以更改其他选择内容。

```
html_options = {:onchange=>'d=$("#player_sports_id").val();$.ajax({type: "GET", url: "/players/returnsel1.js?sports_id="+d, dataType: "script", success: function(data){ $("#other_box_part").html(data)} });'}) 
```

这样你就改变了这个元素，所以你必须把它渲染成一个 html 片段，它必须被插入。所以答案中不需要javascript代码，只需要html。例如：

```
<%= select_tag ... %> 
```

# javascript - 无需输入或拖放即可打开本地文件

> ID：10448706
> 
> 赞同：0
> 
> 时间：2012-05-04T12:19:39.947
> 
> 标签：javascript, html, fileapi

是否可以在没有 XMLHttpRequest 的情况下打开本地文件（来自 PC 本身的 .html 文件）进行随机读取和写入，并且无需将所有内容加载到 RAM？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:31:23.967

不可能。`XMLHttpRequest`不用于读取本地文件，而是用于向网络服务器发送请求。

# asp.net-mvc-3 - 仅序列化视图模型类的一部分

> ID：10448707
> 
> 赞同：0
> 
> 时间：2012-05-04T12:19:41.123
> 
> 标签：asp.net-mvc-3, json.net

我正在使用 Asp.net MVC 3 和 Json.net 库。

我有一个名为 FranchiseInfo 的视图模型类，它有几个属性。

```
public class FranchiseInfo
    {
        public string FolderName { get; set; }
        public string FullName { get; set; }

        public List<string> TestDropDown { get; set; }

        public void Initialize()
        {
            TestDropDown = new List<string>
                               {
                                   "Test1",
                                   "Test2"
                               };
        }

        public void SetDefaultValues()
        {
            FolderName = "SomeData";
            FullName = "SomeOtherData";
        }
    } 
```

我有一个控制器 FranchiseData，它将视图模型数据序列化为 Json。

```
public ActionResult FranchiseData(string network)
        {
            JsonNetResult jsonNetResult = new JsonNetResult { Formatting = Formatting.Indented };

            FranchiseInfo franchiseInfo = new FranchiseInfo();

            franchiseInfo.Initialize();
            jsonNetResult.Data = franchiseInfo;

            return jsonNetResult;
        } 
```

控制器有一个称为网络的参数。当页面首次加载时，我希望将视图模型 FranchiseInfo 中的所有属性序列化并发送到视图。在这种情况下，网络值为空。到目前为止，一切都很好。

```
$.getJSON("Home/FranchiseData", function (data) {
  // get all FranchiseInfo properties
} 
```

当发生特定事件时，我正在向同一个 FranchiseData 控制器发出新请求，该控制器传递与控制器参数绑定的网络参数。

```
onTemplateChange = function (value) {
        var network = $("#networks :selected").val();
        $.getJSON("Home/FranchiseData", { network: network }, function (data) {
        // get only FolderName and  FullName properties
});
} 
```

现在我想调用 Franchise Info 视图模型类的 SetDefaultValues() 方法，该方法将默认值设置为我的一些属性并仅将这些属性发送回视图。

所以基本上我使用相同的控制器 FranchiseData 来序列化来自 FranchiseInfo 的视图模型数据。当参数network为null时，FranchiseInfo的所有属性都应该被序列化（FolderName、FullName和TestDropDown）。当我再次调用控制器并将值传递给网络参数时，我想调用 SetDefaultValues() 方法，设置一些属性并再次仅序列化这些属性并将它们发送到服务器（仅限 FolderName 和 FullName）。有没有办法做到这一点？任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:21:26.270

创建一个包含最少属性的基类并继承它。

当您想使用较少数量的属性时发回基类，否则发回子类。

# javascript - 在 web 视图中打开一个弹出窗口

> ID：10448708
> 
> 赞同：1
> 
> 时间：2012-05-04T12:19:42.567
> 
> 标签：javascript, android, html, webview, android-webview

我目前正在使用`webview`. 当有人点击热点时，我想`getdir.html`在同一页面上的某种弹出窗口中打开另一个名为的 html 页面。我猜我需要使用 JavaScript，但我对 JavaScript 完全陌生。我怎样才能做到这一点？

这是我的 webview 代码：

```
 webView = (WebView) findViewById(R.id.webView1);
    WebSettings webSettings = webView.getSettings();
    webSettings.setJavaScriptEnabled(true);
    webSettings.setBuiltInZoomControls(true);
    webView.requestFocusFromTouch();
    webView.requestFocus(View.FOCUS_DOWN);
    webView.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    webView.loadUrl("file:///android_asset/imagemap.html"); 
```

这是我的图像地图：

```
 <html>
        <body>

        <img src="bed_sa.png"
         border="0"

        usemap ="#imgmap2" />

<script>
function openPopup(url) {
    window.open(url, "popup_id", "width=100,height=200");
    return false;
}
</script>

        <map id="imgmap2" name="imgmap2">
<area shape="rect" alt="first place" title="" coords="139,310,167,342" href="getdir.html" onclick="return openPopup(this.href);" target="" />
<area shape="rect" alt="sec place" title="" coords="142,543,171,571" href="getdir.html" onclick="return openPopup(this.href);" target="_self" />
<area shape="rect" alt="thirrd palce" title="" coords="331,630,358,658" href="getdir.html" onclick="return openPopup(this.href);" target="_self" />
       </map>
         </body>
        </html> 
```

**编辑**：
我尝试在 JavaScript 中打开弹出窗口，当我单独单击 html 时，它在我的计算机上运行良好，但在设备上使用 webview 时却不行。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T18:07:12.500

试试这个javascript：

```
alert("your text here") 
```

# javascript - jQuery split() 不是.... 分裂？

> ID：10448710
> 
> 赞同：0
> 
> 时间：2012-05-04T12:19:50.033
> 
> 标签：javascript, jquery

我的代码中有一个错误，但看不到我做错了什么。

我所拥有的是通过 jQuery UI 自动完成填充的 facebook 用户 ID 的隐藏输入：

```
<input id="fbid" type="hidden" value="12345, 567890, "> 
```

然后我有一个 jQuery 函数，该函数在单击链接以发布到朋友的墙上时运行。

```
<div id="fb-root"></div>
<script>
window.fbAsyncInit = function() {
    FB.init({
        appId      : '12345678', // App ID
        channelUrl : '/channel.html', // Channel File
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        oauth      : true, // enable OAuth 2.0
        xfbml      : true  // parse XFBML
    });

    // Additional initialization code here

    FB.login(function(response)
    {
        if (response.authResponse)
        {                                               
            $("#send-voucher").click(function() {

                // Post message to friend's wall

                var opts = {
                    message : 'This is the message',
                    name : 'This is the name',
                    link : 'http://www.opticalexpress.co.uk',
                    description : 'This is the description',
                    picture : '/voucher_valid.png'
                };

                var referees = $("#fbid").val();

                // remove last comma and space from the end of the string
                referees = $.trim(referees);
                referees = referees.substring(0, referees.length - 1);

                var referee = referees.split(',');
                referee.each(function() {

                    FB.api('/'+ referee +'/feed', 'post', opts, function(response)
                    {
                        if (!response || response.error)
                        {
                            alert('Posting error occured');
                        }
                        else
                        {
                            alert('Success - Post ID: ' + response.id);
                            $("#send-voucher").hide();
                            $("#voucher-sent").fadeIn('slow');
                        }
                    });
                });
            });
        }
        else
        {
            alert('Not logged in');
        }
    }, { scope : 'publish_stream' });
}; 
```

当我点击发送凭证时，错误来自我`else`上面声明中的警报对话框：

`Posting error occured`

我添加了另一个警报，以了解为什么在循环打开后会发生这种情况：

```
$.each(referee, function() {
    referee = $.trim(referee);
    alert(referee); // new alert for debugging
    .... 
```

此警报输出的值让我感到惊讶，因为`referee`is `12345, 567890`（与隐藏输入相同，但删除了尾随空格和最后一个逗号）。

因此，jQuery 似乎没有正确拆分它，但它运行循环正确的次数，因为警报框弹出两次告诉我裁判，然后是错误。（两个警报框显示两次只是为了澄清）。如果这是一个巧合，我尝试在隐藏输入中添加更多 id，并且可以确认警报框显示的次数与 id 的数量相同。

所以我想知道我做错了什么，因为循环运行了正确的次数，但逗号分隔的 id 似乎根本没有被分割。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:23:35.583

`referee.each(function()`在名为 的数组上调用`referee`，而不是 jQuery 对象。

试试`$.each(referee, function()`吧。

[http://api.jquery.com/jQuery.each/](http://api.jquery.com/jQuery.each/)

**更新**

您也可以`.split`使用正则表达式查看 ing 以查看是否有任何不同：

```
var referee = referees.split(/\s*,\s*/); 
```

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/split)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:23:52.800

`referee`在您的程序中是拆分字符串的列表，在您的“每个循环”中，您使用列表而不是实例。尝试更换：

```
FB.api('/'+ referee +'/feed', 'post', opts, function(response) 
```

和

```
FB.api('/'+ $(this) +'/feed', 'post', opts, function(response) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T14:14:41.453

您的代码有几个问题。正如其他人所提到的，您正在使用不存在的方法循环数组`.each()`。您可以改用标准`for()`循环。此外，使用正则表达式去除空格和多余的逗号更有效。

这是一个简化的例子，也可以在[http://jsfiddle.net/hJQ6W/](http://jsfiddle.net/hJQ6W/)

```
<input id="fbid" type="hidden" value="12345, 567890, ">
<script>
  var referees = $("#fbid").val();
  // trim string and remove all commas from the end of it
  referees = referees.replace(/\s/g,'').replace(/,*$/,'');
  var referee = referees.split(',');
  for(i=0; i<referee.length; i++) {
    alert('"'+referee[i]+'"');
  }
</script> 
```

# haskell - 是否有适用于 Haskell 的简单颜色启用记录器？

> ID：10448711
> 
> 赞同：6
> 
> 时间：2012-05-04T12:19:58.957
> 
> 标签：haskell, logging, yesod

我想根据日志级别、主题等更改输出到终端的日志消息的颜色。

[我发现](http://xmonad.org/xmonad-docs/xmonad-contrib/XMonad-Util-Loggers.html)在 Haskell 中执行此操作的唯一记录器是 xmonad-contrib 包的一部分，但我不想依赖它，因为它相当大。

我知道 Yesod 日志是彩色的，但对我来说如何使其记录器在 Yesod Web 应用程序之外工作并不明显。

我查看了[hslogger](http://hackage.haskell.org/package/hslogger)，它似乎与[System.Log.Logger](http://hackage.haskell.org/packages/archive/hslogger/latest/doc/html/System-Log-Logger.html)非常相似，但似乎都没有开箱即用的颜色支持。

hslogger 可以通过 custom 进行扩展`LogHandlers`，所以可能有人实现了一个支持颜色的？

到目前为止我忽略了登录 Haskell 的替代方法吗？

**编辑：**

按照 Don Stewart 的建议，我实现了一个[自定义日志处理程序](https://github.com/thlorenz/log-colorhandler)，该处理程序与 hslogger 和 ansi-c 一起使用，以便允许以颜色登录到终端。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T17:23:10.747

截至 2012 年 5 月，Haskell 可用的日志库有：

*   [hslogger - RWH](http://hackage.haskell.org/package/hslogger)[中描述](http://book.realworldhaskell.org/read/sockets-and-syslog.html)的古老的日志框架。
*   [SessionLogger](http://hackage.haskell.org/package/SessionLogger) - 一个简单的日志框架

还有一些更专业的：

*   [greg-client](http://hackage.haskell.org/package/greg-client) - greg 分布式日志系统的客户端
*   [fast-logger](http://hackage.haskell.org/package/fast-logger) - 为快速 IO 优化的日志系统

无支持 ansi 终端着色输出。有几个用于 ansi 着色的库，因此添加起来应该不会太难。例如

*   [ansi 终端](http://hackage.haskell.org/package/ansi-terminal)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T03:02:41.410

如果您想查看另一个颜色记录器示例，请查看 wai-extra 包中的 Network.Wai.Middleware.RequestLogger (logStdoutDev)。这会根据请求更改颜色，但它应该是一个很好的例子。

# java - android解析负数字符串

> ID：10448712
> 
> 赞同：3
> 
> 时间：2012-05-04T12:20:14.447
> 
> 标签：java, string, parsing, negative-number

如何解析负数字符串？

字符串可以是以下形式：

```
-123.23  
(123.23)  
123.23- 
```

是否有一个类可以将上述任何字符串转换为数字？

如果没有，最好的方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T12:31:09.643

基于 WarrenFaiths 的回答，您可以添加以下内容：

```
Double newNumber = 0;
if(number.charAt(i).isDigit()){
     //parse numeber here using WarrenFaiths method and place the int or float or double 
     newNumber = Double.valueOf(number);
}else{
    Boolean negative = false;

    if(number.startsWith("-") || number.endsWith("-")){
         number = number.replace("-", "");
         negative = true;
    }
    if(number.startsWith("(") || number.endsWith(")"){
        number = number.replace("(", "");
        number = number.replace(")", "");
    }

    //parse numeber here using WarrenFaiths method and place the float or double 
    newNumber = Double.valueOf(number);

    if(negative){
      newNumber = newNumber * -1;
    }
} 
```

如果替换方法有误，我很抱歉，请纠正我。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T12:23:55.357

`"-123.23"`可以用`Float.valueOf("-123.23");`or解析`Double.valueOf("-123.23");`

`"(123.23)"`并且`"123.23-"`无效，需要自己改进/解析。您可以逐步检查字符串并检查它是否是数字，如果是，则将其添加到新字符串中。如果您在开头或结尾找到 - ，请将其设为负数...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-19T03:05:30.903

这是hack，请评论改进等，是时候自己学习更多了:)

```
private Double RegNumber(String sIn) {
        Double result = 0E0;
        Pattern p = Pattern.compile("^\\-?([0-9]{0,3}(\\,?[0-9]{3})*(\\.?[0-9]*))");   // -1,123.11
        Matcher m = p.matcher(sIn);
        if (m.matches()) {
            result = Double.valueOf(sIn);
        } else {
            Pattern p1 = Pattern.compile("^\\(?([0-9]{0,3}(\\,?[0-9]{3})*(\\.?[0-9]*))\\)?$");  // (1,123.22)
            Matcher m1 = p1.matcher(sIn);
            if (m1.matches()) {
                String x[] = sIn.split("(\\({1})|(\\){1})"); // extract number
                result = Double.valueOf("-" + x[1]);
            } else {
                Pattern p2 = Pattern.compile("([0-9]{0,3}(\\,?[0-9]{3})*(\\.?[0-9]*))\\-$");  // 1,123.22-
                Matcher m2 = p2.matcher(sIn);
                if (m2.matches()) {
                    String x[] = sIn.split("(\\-{1})"); // extract number
                    result = Double.valueOf("-" + x[0]);
                } else {
                    result = 99999999E99;  // error, big value
                }
            }
        }
        return result;
    } 
```

# c++ - 包含 1 个指针的结构的大小

> ID：10448714
> 
> 赞同：5
> 
> 时间：2012-05-04T12:20:36.607
> 
> 标签：c++, visual-c++, g++

假设我有以下类模板：

```
template<typename T>
struct Wrapper {
  T* t_;
  static void check() {
    static_assert(sizeof(Wrapper<T> == sizeof(T*), "Illegal assumption");
  }
}; 
```

我查看了 C99 标准和 C++03 标准，但无法为我在`static_assert`. 我使用几个编译器选项在 Visual C++ 2008 和 2010（32 位）和 linux（64 位）上的 gcc 上进行了尝试，发现我的假设得到了证实。

我的问题是：

*   我的假设对于 Visual C++ 2008/2010/11 (windows) 是否合理？
*   对于 gcc 4.* (linux)？
*   对于编译器标志的任何组合？
*   你知道这个假设不成立的任何编译器/平台吗？

我猜编译器可能会为结构添加一些填充，例如用于调试目的。但是有没有真正做到这一点的编译器？

**编辑：**所以正如你在这里问的是我想要实现的：
我有具有以下签名的成员函数：

```
Someclass* OtherClass::fn(); 
```

我想像这样更改签名：

```
Wrapper<Someclass> OtherClass::fn(); 
```

这个包装器就像一些智能指针一样，即它关心指针的生命周期，因此当它超出范围时它会释放它。由于跨 dll 边界调用该函数，我想确保返回的值（现在是一个具体类型，而不仅仅是一个哑指针）在所有情况下（即编译器设置等）与指针大小相同将会。计划/希望是支持调试/发布应用程序/dll 构建的所有组合。
您可能会问：不，我不能使用 boost::shared_ptr<>、std::shared_ptr<>、std::unique_ptr<> 等，因为我们不想将 boost 暴露给 dll 用户，我们还不支持 C++11。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:25:09.727

如果你想假设它并且你有一个编译时检查，那么继续。大概你会从这样做中获得一些好处。

您无法保证有关填充的任何内容，但通常使用填充来获得对齐，以便该类型的数组使数组的每个成员（以及结构的每个成员）正确对齐。本机指针通常已经是要对齐的正确大小，因此不需要填充，但不能保证这一点。

这不是你可以用 gcc 检查的——它取决于目标架构，而不仅仅是编译器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:43:54.333

Looking into the standard I found two interesting bits in **§ 9.2 [class.mem]**:

> **17/** Two standard-layout struct (Clause 9) types are layout-compatible if they have the same number of non-static data members and corresponding non-static data members (in declaration order) have layout-compatible types (3.9).

So, two `struct` with only a pointer in them would be layout compatible (thus if your assertion holds for this type, it holds for all types).

> **20/** A pointer to a standard-layout struct object, suitably converted using a reinterpret_cast, points to its initial member (or if that member is a bit-field, then to the unit in which it resides) and vice versa. [ Note: There might therefore be unnamed padding within a standard-layout struct object, but not at its beginning, as necessary to achieve appropriate alignment. —end note ]

In the note we learn that there cannot be padding at the beginning of a structure.

* * *

Depending on your goal, **20/** might be sufficient. It means that this works:

```
void check(T* t) {
    Wrapper<T>* w = reinterpret_cast<Wrapper<T>*>(t);
    assert(w->t_ == t);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T12:44:56.517

我想说您的假设对于大多数编译器和标志都是合理的。

对于任何 T，编译器都能够创建 T 的数组，这些数组需要是连续的，因此它必须能够在没有填充的情况下创建它。因此，它放入结构中的任何填充都是纯可选的，而不是可能需要的。

另一方面，我有理由确定 C 或 C++ 标准都不能保证您的要求。*最接近*它的保证是因为在 C++ 中它是一个*标准布局*结构，它限制 C++ 编译器像 C 编译器一样布置字段，因此成员必须按升序排列，开头没有填充-- 但是成员之间和/或最后一个成员之后的填充仍然是允许的。

底线：如果您有指向第一个成员的指针，则可以安全地转换为指向结构的指针（反之亦然）。如果你做一些事情，比如创建一个数组并索引到它，就好像它是另一个数组一样，你就靠自己了——它工作的机会非常好，但我很确定标准不会保证。

# android - Webview中的Android文本选择

> ID：10448717
> 
> 赞同：27
> 
> 时间：2012-05-04T12:21:02.837
> 
> 标签：android, webview, clipboard

我正在使用 webview 在 Android Honeycomb(3.x) 中显示内容。我为剪切、复制和粘贴创建了自定义操作菜单。如何使用我的自定义操作菜单复制 Webview 中的选定文本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-02T11:51:39.907

May It Will Help...

```
public void selectAndCopyText() {
try {
    Method m = WebView.class.getMethod("emulateShiftHeld", null);
    m.invoke(this, null);
} catch (Exception e) {
    e.printStackTrace();
    // fallback
    KeyEvent shiftPressEvent = new KeyEvent(0,0,
         KeyEvent.ACTION_DOWN,KeyEvent.KEYCODE_SHIFT_LEFT,0,0);
    shiftPressEvent.dispatch(this);
} 
```

}

Got from [https://stackoverflow.com/a/1113204/638987](https://stackoverflow.com/a/1113204/638987)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-09-27T12:55:40.520

试试下面的代码...

```
private void emulateShiftHeld(WebView view)
{
    try
    {
        KeyEvent shiftPressEvent = new KeyEvent(0, 0, KeyEvent.ACTION_DOWN,
                                                KeyEvent.KEYCODE_SHIFT_LEFT, 0, 0);
        shiftPressEvent.dispatch(view);
        Toast.makeText(this, "select_text_now", Toast.LENGTH_SHORT).show();
    }
    catch (Exception e)
    {
        Log.e("dd", "Exception in emulateShiftHeld()", e);
    }
} 
```

并在任何你想要的地方调用上述方法......

```
emulateShiftHeld(mWebView); 
```

有关更多详细信息，请参阅... [Android：如何从 webview 中选择文本](https://stackoverflow.com/questions/6058843/android-how-to-select-texts-from-webview)

# javascript - 向 DOM 添加新元素时出现问题？

> ID：10448718
> 
> 赞同：0
> 
> 时间：2012-05-04T12:21:12.430
> 
> 标签：javascript, dom

尝试向 DOM 添加新元素，但根据我尝试执行的操作，我会遇到各种错误。

[http://jsfiddle.net/pRVAd/](http://jsfiddle.net/pRVAd/)

```
<html>
<head>
    <script>
        var newElement = document.createElement("pre");
        var newText = document.createTextNode("Contents of the element");
        newElement.appendChild(newText);
        document.getElementsByTag("body").appendChild(newElement);
    </script>
</head>
<body>
    <p>Welcome</p>
</body>

</html>​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:23:33.207

该脚本在其中`<head>`，您的代码会立即运行（它不是延迟的函数调用）。当`<body>`您尝试运行它时，它不存在。

**将脚本移动到之前`</body>`**或将其移动到函数中并调用它`onload`。

`getElementsByTag`不是`document`对象上的方法。您可能的意思是`getElementsByTagName`，但这会返回一个 NodeList，而不是 HTMLElementNode。这就像一个数组。你需要把第一个项目拉下来，或者更好：

**利用`document.body`**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:33:03.573

```
<html>
<head>
  <script>
    // This function will be executed once that the DOM tree is finalized
    // (the page has finished loading)
    window.onload = function() {
      var newElement = document.createElement("pre");
      var newText = document.createTextNode("Contents of the element");
      newElement.appendChild(newText);
      // You have to use document.body instead of document.getElementsByTag("body")
      document.body.appendChild(newElement);  
    }
  </script>
</head>
<body>
  <p>Welcome</p>
</body>
</html>​ 
```

[`window.onload`](https://developer.mozilla.org/en/DOM/window.onload)以及[如何](https://stackoverflow.com/questions/559150/best-practice-for-using-window-onload) [正确使用它](http://roberthahn.ca/articles/2007/02/02/how-to-use-window-onload-the-right-way/)。

[`document.body`](https://developer.mozilla.org/en/DOM/document.body)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:26:36.103

这是你想要的：

```
 <html>
    <head>
        <script>
            var newElement = document.createElement("pre");
            var newText = document.createTextNode("Contents of the element");
            newElement.appendChild(newText);
            document.body.appendChild(newElement);
        </script>
    </head>
    <body>
        <p>Welcome</p>
    </body> 
```

这是[JSFiddle 演示](http://jsfiddle.net/KdxMt/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T12:28:25.573

试试这个新的小提琴：http: [//jsfiddle.net/pRVAd/1/](http://jsfiddle.net/pRVAd/1/)

```
<html>
<head>
    <script>
        function doTheThing() {
            var newElement = document.createElement("pre");
            var newText = document.createTextNode("Contents of the element");
            newElement.appendChild(newText);
            document.getElementsByTagName("body")[0].appendChild(newElement);
        }
    </script>
</head>
<body>
    <input type="button" value="Do The Thing" onclick="doTheThing()">    
    <p>Welcome</p>
</body>

<html>​ 
```

正确的语法是：`document.getElementsByTagName("TagName")[index]`

# python - 如何使用pycurl很好地处理KeyboardInterrupt（Ctrl-c）？

> ID：10448721
> 
> 赞同：7
> 
> 时间：2012-05-04T12:21:38.113
> 
> 标签：python, curl, pycurl, twitter-streaming-api

我正在编写一个 Python 脚本[`pycurl`](http://pycurl.sourceforge.net/)来使用[Twitter 的 Sreaming API](https://dev.twitter.com/docs/streaming-api/methods)。这是一个简短的片段，正是这样做的（只需输入您的 Twitter 登录名/密码来测试它）：

```
import pycurl

user = 'USER'
password = 'PWD'

def handleData(data):
    print(data)

conn = pycurl.Curl()  
conn.setopt(pycurl.USERPWD, "%s:%s" % (user, password))  
conn.setopt(pycurl.URL, 'https://stream.twitter.com/1/statuses/sample.json')  
conn.setopt(pycurl.WRITEFUNCTION, handleData)
conn.perform() 
```

问题是因为脚本消耗了一个流，所以`conn.perform()`永远不会返回（或很少）。因此，有时我需要中断脚本，并且`KeyboardInterrupt`被`perform()`方法捕获。

但是，它不能很好地处理它，打印一个丑陋的错误，并引发一个不同的异常。

```
^CTraceback (most recent call last):
  File "test.py", line 6, in handleData
    def handleData(data):
KeyboardInterrupt
Traceback (most recent call last):
  File "test.py", line 12, in <module>
    conn.perform()
pycurl.error: (23, 'Failed writing body (0 != 2203)') 
```

[cURL FAQ](http://curl.haxx.se/docs/faq.html#How_do_I_stop_an_ongoing_transfe)说要中断正在进行的传输，回调函数之一（在我的例子中）`handleData`应该返回一个特殊值。这很好，但`KeyboardInterrupt`没有被任何回调函数捕获！

我怎样才能巧妙地做到这一点？

编辑：我知道你可以捕获异常，但 pycurl 仍然会做一些有趣的事情：

如果我做：

```
try:
    conn.perform()
except BaseException as e:
    print('We caught the exception')
    print(type(e)) 
```

我得到：

```
^CTraceback (most recent call last):
  File "test.py", line 6, in handleData
    def handleData(data):
KeyboardInterrupt
We caught the exception
<class 'pycurl.error'> 
```

这意味着在内部，`pycurl`会进行某种捕获，打印出丑陋的错误消息，然后引发`pycurl.error`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-30T21:24:51.823

您需要捕获 CTRL+C 并处理该信号
原始：[示例 1](https://stackoverflow.com/questions/1112343/how-do-i-capture-sigint-in-python)
原始：[示例 2](http://docs.python.org/2/library/signal.html#example)

* * *

**示例 1**

```
#!/usr/bin/env python
import signal
import sys
def signal_handler(signal, frame):
        print 'You pressed Ctrl+C!'
        sys.exit(0)
signal.signal(signal.SIGINT, signal_handler)
print 'Press Ctrl+C'
signal.pause() 
```

* * *

**示例 2**

```
import signal, os

def handler(signum, frame):
    print 'Signal handler called with signal', signum
    raise IOError("Couldn't open device!")

# Set the signal handler and a 5-second alarm
signal.signal(signal.SIGALRM, handler)
signal.alarm(5)

# This open() may hang indefinitely
fd = os.open('/dev/ttyS0', os.O_RDWR)

signal.alarm(0)          # Disable the alarm 
```

* * *

至少该推特链接上有些东西不起作用，请参见[此处](https://dev.twitter.com/node/10390/backlinks)

*   不要忘记将**conn.close()放在****conn.perform()**之后

 **并且在测试时启用调试模式很有帮助。

```
import pycurl

username = 'your_user_name'
password = 'your_password'

def body(buf):
    for item in buf.strip().split('\n'):
        if item.strip():
            print item

def test(debug_type, debug_msg):
    if len(debug_msg) < 300:
        print "debug(%d): %s" % (debug_type, debug_msg.strip())

conn = pycurl.Curl()  
conn.setopt(pycurl.USERNAME, username)
conn.setopt(pycurl.PASSWORD, password)
#conn.setopt(pycurl.SSL_VERIFYPEER, False)
conn.setopt(pycurl.FOLLOWLOCATION, True)
conn.setopt(pycurl.VERBOSE, True)
conn.setopt(pycurl.URL, 'https://stream.twitter.com/1.1/statuses/sample.json')  
conn.setopt(pycurl.DEBUGFUNCTION, test)
conn.setopt(pycurl.WRITEFUNCTION, body)
conn.perform()
conn.close() 
```

* * *

**只需复制/粘贴工作测试示例**

```
➜  ~  hcat twitter.py 
import pycurl
import signal
import sys
from time import sleep

username = 'bubudee'
password = 'deebubu'

def body(buf):
    for item in buf.strip().split('\n'):
        if item.strip():
            print item

def test(debug_type, debug_msg):
    if len(debug_msg) < 300:
        print "debug(%d): %s" % (debug_type, debug_msg.strip())

def handle_ctrl_c(signal, frame):
    print "Got ctrl+c, going down!"
    sys.exit(0)
signal.signal(signal.SIGINT, handle_ctrl_c)

conn = pycurl.Curl()  
conn.setopt(pycurl.USERNAME, username)
conn.setopt(pycurl.PASSWORD, password)
#conn.setopt(pycurl.SSL_VERIFYPEER, False)
conn.setopt(pycurl.FOLLOWLOCATION, True)
conn.setopt(pycurl.VERBOSE, True)
conn.setopt(pycurl.URL, 'https://stream.twitter.com/1.1/statuses/sample.json')  
conn.setopt(pycurl.DEBUGFUNCTION, test)
conn.setopt(pycurl.WRITEFUNCTION, body)

conn.perform()

print "Who let the dogs out?:p"
sleep(10)

conn.close()

➜  ~  python twitter.py 
debug(0): About to connect() to stream.twitter.com port 443 (#0)
debug(0): Trying 199.16.156.110...
debug(0): Connected to stream.twitter.com (199.16.156.110) port 443 (#0)
debug(0): Initializing NSS with certpath: sql:/etc/pki/nssdb
debug(0): CAfile: /etc/pki/tls/certs/ca-bundle.crt
  CApath: none
debug(0): SSL connection using SSL_RSA_WITH_RC4_128_SHA
debug(0): Server certificate:
debug(0): subject: CN=stream.twitter.com,OU=Twitter Security,O="Twitter, Inc.",L=San Francisco,ST=California,C=US
debug(0): start date: Oct 09 00:00:00 2013 GMT
debug(0): expire date: Dec 30 23:59:59 2016 GMT
debug(0): common name: stream.twitter.com
debug(0): issuer: CN=VeriSign Class 3 Secure Server CA - G3,OU=Terms of use at https://www.verisign.com/rpa (c)10,OU=VeriSign Trust Network,O="VeriSign, Inc.",C=US
debug(0): Server auth using Basic with user 'bubudee'
debug(2): GET /1.1/statuses/sample.json HTTP/1.1
Authorization: Basic YnVidWRlZTpkZWVidWJ1
User-Agent: PycURL/7.29.0
Host: stream.twitter.com
Accept: */*
debug(1): HTTP/1.1 401 Unauthorized
debug(0): Authentication problem. Ignoring this.
debug(1): WWW-Authenticate: Basic realm="Firehose"
debug(1): Content-Type: text/html
debug(1): Cache-Control: must-revalidate,no-cache,no-store
debug(1): Content-Length: 1243
debug(1): Connection: close
debug(1): 
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>Error 401 Unauthorized</title>
</head>
<body>
<h2>HTTP ERROR: 401</h2>
<p>Problem accessing '/1.1/statuses/sample.json'. Reason:
<pre>    Unauthorized</pre>
</body>
</html>
debug(0): Closing connection 0
Who let the dogs out?:p
^CGot ctrl+c, going down! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T21:05:09.907

您可以通过捕获 pycurl.error 类型来做到这一点。前任：

```
try:
    conn.perform()
except pycurl.error, e:
    errorCode, errorText = e.args
    print 'We got an error. Code: %s, Text:%s'%(errorCode, errorText) 
```**

# ruby-on-rails - 如何检测已选择文件/图像以便执行操作？

> ID：10448726
> 
> 赞同：1
> 
> 时间：2012-05-04T12:21:57.320
> 
> 标签：ruby-on-rails, jquery, ruby-on-rails-3.2

我有一个带有相机图像的文本区域，单击该图像时，用户可以选择要上传的图像。

我想要做的是能够知道何时选择了一个文件，这样我就可以在文本区域上使用 jquery 执行一些操作，例如展开它并在下面显示带有空格的照片以用于微贴文本。

我以前从未这样做过，也不太清楚如何去做。如果可能的话，我会很感激一些想法/解决方案。

谢谢亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:45:54.837

选择文件后，文件的输入将被更改，因此您可以使用 .change() 方法注册更改并执行操作。[http://api.jquery.com/change/](http://api.jquery.com/change/)

# php - 如何使用 sql 查询获取包括当前周在内的最后四个星期

> ID：10448742
> 
> 赞同：1
> 
> 时间：2012-05-04T12:23:34.380
> 
> 标签：php, mysql

我想获取包括本周在内的最近 4 周的结果。所以假设我有一个统计表，其中包含上个月 4 月的统计数据，现在是 5 月 4 日......当我写这个查询时：我想获取唯一访问者：

```
 SELECT COUNT(distinct ip ) AS uni, (
date_added
) AS wday, FROM_UNIXTIME( date_added ) AS cusotms
FROM  `site_stats` 
WHERE FROM_UNIXTIME( date_added ) >= DATE_SUB( SYSDATE( ) , INTERVAL 4 WEEK ) 
GROUP BY WEEK( FROM_UNIXTIME( date_added ) ) 
```

它发现了以下结果：

```
uni     wday        cusotms
2   1333819740  2012-04-07 22:29:00
6   1333906140  2012-04-08 22:29:00
7   1334510940  2012-04-15 22:29:00
7   1335115740  2012-04-22 22:29:00
5   1336089600  2012-05-04 05:00:00 
```

但我想要最后 4 周，包括本周。我不知道为什么这显示了 5 月 4 日、4 月 22 日、4 月 15 日和 4 月 8 日和 7 日的记录。我在想像下面这样的事情

这是过去 4 周按周分组的正确结果吗？我在想应该是5月4日，

```
4 may
4-7 = 28 april
4-14days = 21 april
and then 14 april
and last 7 april
?? 
```

我需要将此输出放在图表中以显示上周的统计数据...任何帮助将不胜感激。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:29:13.823

您获取确切的日期，似乎您想要获取星期：

```
SELECT COUNT(distinct ip ) AS uni, (
date_added
) AS wday, WEEK( FROM_UNIXTIME( date_added ) ) AS cusotms 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T16:11:49.480

这是解决方案：

```
SELECT COUNT( DISTINCT ip ) AS uni, ( 
    date_added
    ) AS wday, FROM_UNIXTIME( date_added ) AS cusotms
    FROM `site_stats` 
    WHERE FROM_UNIXTIME( date_added ) >= CURDATE( ) - INTERVAL DAYOFWEEK( CURDATE( ) ) -3WEEK
    GROUP BY WEEK( FROM_UNIXTIME( date_added ) ) 
    LIMIT 0 , 30 
```

希望能帮助到你 ：）

# c# - C# 在窗体上刷新图像时更改图像文件

> ID：10448745
> 
> 赞同：1
> 
> 时间：2012-05-04T12:23:43.030
> 
> 标签：c#, image, refresh

我的表单上有一个 PictureBox，显示特定文件夹中的*img.jpg*文件。每秒钟我都会通过查看文件夹中的*img.jpg文件来刷新表单上的图像。*当我尝试将具有相同名称的新文件放入此文件夹时，Windows 给我一个错误，指出该文件正在使用中，并希望我关闭程序以复制和重写图像。我怎样才能摆脱这个错误？我可以通过软件禁用图像的使用吗？我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:29:12.097

如果您使用**Image.FromFile("path_to_image")**方法，则此行为（将文件锁定在磁盘上）是设计使然。

[请查看Microsoft 支持](http://support.microsoft.com/kb/309482/i)上的这篇文章
而不是[在 StackOverflow 上查看此处以](https://stackoverflow.com/questions/4803935/free-file-locked-by-new-bitmapfilepath)获取在不锁定的情况下加载图像的替代方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:29:36.093

将文件保存到表单上的局部变量中并将其设置为图片框，然后不要每秒刷新图像文件，而是定期检查文件上的日期是否已更改或类似的东西。并且仅在实际更改时刷新图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:33:07.540

或者，如果您想保存已实施的行为，只需创建图像的临时副本并使用它。当您更新原始图像时，请创建一个新的临时图像。

# java - 使用 ajax 和 Java servlet 读取输入

> ID：10448746
> 
> 赞同：1
> 
> 时间：2012-05-04T12:23:45.007
> 
> 标签：java, ajax, servlets

我是 java、ajax 和 servlet 的新手。我编写了一个程序，它可以读取用户的输入，并在一些教程的帮助下将字典的含义打印到网页上。

当我在 servlet 的 doPost 方法中从网页读取输入时，它无法读取并返回 null。也许它正在尝试在提交按钮之前读取输入。我将如何解决这个问题？这是我的jsp文件的相关代码：

```
function ajaxFunction() {
  if(xmlhttp) {
  var inword = document.getElementById("inputWord");
    xmlhttp.onreadystatechange  = handleServerResponse;
    xmlhttp.open("GET","gettime?inputWord="+ inword.value , true ); //gettime will be the servlet name
    xmlhttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
    xmlhttp.send(null);
  }
} 
```

...

```
<form name="myForm">
Enter the word: <input type="text" name="inputWord" />
<br />
Meaning:<input type="text" name="time" />
<br />
<input type="button" onClick="javascript:ajaxFunction();" value="Click to get the Meaning on Textbox"/>
<br />
</form> 
```

这是我试图在我的 servlet 中获取输入的代码部分：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

        String inWord = request.getParameter("inputWord"); // word to search in the dictionary
        PrintWriter out = response.getWriter();
... 
```

每次我尝试运行项目`request.getParameter("inputWord");`时都会返回 null。

`xmlhttp.open("GET","gettime?inputWord="+ inword.value , true );`我在这里尝试了一些代码组合，`xmlhttp.open("GET","gettime", true );`但没有奏效。

我还调用`doPost(request,response);`了我的 doGet 方法。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:35:16.663

由于您使用的是 document.getElementById()，请尝试在 HTML 中的 inputWord 控件上设置一个 id 属性：

```
<form name="myForm">
Enter the word: <input type="text" name="inputWord" id="inputWord" />
<br />
Meaning:<input type="text" name="time" />
<br />
<input type="button" onClick="javascript:ajaxFunction();" value="Click to get the Meaning on Textbox"/>
<br />
</form> 
```

有关 document.getElementById() 的更多信息：

[http://www.tizag.com/javascriptT/javascript-getelementbyid.php](http://www.tizag.com/javascriptT/javascript-getelementbyid.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:26:41.270

我发现对于 AJAX 问题，有时能够查看实际发送到服务器的内容很有用，这样您就可以验证它是否符合您的期望。

我通常使用[Firefox](http://www.mozilla.org)和一个名为[Firebug](http://getfirebug.com/)的有用插件（没有它我不会进行任何 Web 开发）。它允许您在发出 Ajax 请求时查看它们，以便您可以检查您发送的信息是否正确以及结构是否正确。

在这种情况下，您可能已经注意到您没有正确发送“inputWord”，因为您没有输入 ID：

```
<input type="text" name="inputWord" id="inputWord" /> 
```

# actionscript-3 - 移动端的纯 AS3 组件性能测试：MinimalComps 与 MadComponents

> ID：10448753
> 
> 赞同：1
> 
> 时间：2012-05-04T12:24:28.353
> 
> 标签：actionscript-3, flash, mobile

我想知道是否有人对这两个库进行过任何性能测试。我将开始一个新的移动应用程序，在我的情况下，flex 将是不行的。很高兴知道是否有任何关于此的信息！任何人？

任何帮助都超过赞赏！布鲁诺

# c++ - Qt：如何创建文件（其路径所需的目录）？

> ID：10448758
> 
> 赞同：0
> 
> 时间：2012-05-04T12:25:21.127
> 
> 标签：c++, file, qt

Qt：如何创建具有路径所需目录的文件？如果它不存在，说创建“./gg/ggg./fff/ff/file.dd”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:34:17.067

您可以将路径设置为

```
QDir directory("gg/ggg./fff/ff/file"); 
```

然后你可以创建一个文件夹，如

```
QDir().mkdir("MyFolder");

bool QDir::mkdir ( const QString & dirName ) const
Creates a sub-directory called dirName.

Returns true on success; otherwise returns false.

See also rmdir(). 
```

参考[http://doc.qt.io/qt-5/qdir.html#mkdir](http://doc.qt.io/qt-5/qdir.html#mkdir)

```
bool QDir::mkpath ( const QString & dirPath ) const
Creates the directory path dirPath.

The function will create all parent directories necessary to create the directory.

Returns true if successful; otherwise returns false. 
```

参考[http://doc.qt.io/qt-5/qdir.html#mkpath](http://doc.qt.io/qt-5/qdir.html#mkpath)

```
bool QFile::open ( OpenMode mode )   [virtual]
Reimplemented from QIODevice::open().

Opens the file using OpenMode mode, returning true if successful; otherwise false.
In WriteOnly or ReadWrite mode, if the relevant file does not already exist, this function will try to create a new file before opening it. 
```

参考[http://doc.qt.io/qt-5/qfile.html#open](http://doc.qt.io/qt-5/qfile.html#open)

# asp.net-mvc-3 - 在 MVC3 主应用程序上加载外部 Web 应用程序 - Intranet

> ID：10448760
> 
> 赞同：0
> 
> 时间：2012-05-04T12:25:27.290
> 
> 标签：asp.net-mvc-3, architecture

我有一个 Web 应用程序 (MVC3)，它是一个 Intranet 主应用程序。该解决方案称为 Intranet，它有不同的项目。该网站有两个区域：一个主 div（工作区）和一个用于加载其他 Web 应用程序的菜单。

我想在 Intranet 项目之外创建其他应用程序，它们可能很大而且非常不同，带有菜单、视图……我想从主应用程序（Intranet）的菜单中“调用”这些 Web 应用程序，我想要将这些加载到主应用程序的主 div 中。

我有两个问题： - 使用这种架构，我如何在主应用程序上加载应用程序。- 这是一个好的架构吗？其他选项：区域、iframe、...

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:58:13.593

如果您正在谈论在具有不同 UI 的不同应用程序之间共享相同的数据，我将创建一个服务，该服务返回数据并将从我想要的客户端应用程序访问，然后以相关的 UI 格式显示。

如果您想显示来自不同网络应用程序的页面，您可以执行以下任何一项操作

1) 使用 iframe 显示外部页面的内容

2）使用javascript window.open打开一个新窗口并在那里加载外部页面

# wpf - DataTrigger 只是第一次评估

> ID：10448764
> 
> 赞同：0
> 
> 时间：2012-05-04T12:25:54.317
> 
> 标签：wpf

我有以下 XAML 代码，我试图根据转换器和 DataTrigger 在 Toolkit DataGrid 中设置每一行的前景。

转换器检查接收到的对象，该对象包含其他对象的集合，实现 IDataErrorInfo 接口。如果集合中的项目有错误，则颜色设置为橙色，否则设置为蓝色。如果集合不包含非空项，则颜色设置为黑色。

现在，当我从 UI 修改集合时，第一次一切正常，颜色设置正确。但随后似乎不再评估 DataTrigger，因为转换器不会在调试模式下停止。

我无法理解我错过了什么。

我的 XAML：

```
<tk:DataGrid.RowHeaderStyle >
<Style BasedOn="{StaticResource ResourceKey={x:Type tk:DataGridRowHeader}}" TargetType="tk:DataGridRowHeader">
    <Style.Triggers>
        <DataTrigger Binding="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type tk:DataGridRow}}, Path=DataContext.Payload.TimeEventFunctions[0].IsEmpty}" Value="False">
            <Setter Property="Foreground" Value="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type tk:DataGridRow}}, Path=DataContext.Payload, Converter={inf:DataGridRowHeaderForegroundConverter}}" />
            <!--<Setter Property="Foreground" Value="DodgerBlue" />-->
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

和转换器：

```
Public Class DataGridRowHeaderForegroundConverterExtension
Inherits Markup.MarkupExtension
Implements IValueConverter

Public Overrides Function ProvideValue(serviceProvider As System.IServiceProvider) As Object
    Return Me
End Function

Public Function Convert(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.Convert
    Dim ret As New SolidColorBrush(Colors.Black)
    If TypeOf value Is ISampleTableEntry Then
        Dim ste As ISampleTableEntry = DirectCast(value, ISampleTableEntry)
        Dim tevs As TrulyObservableCollection(Of ITimeEvFunc) = ste.TimeEventFunctions
        If tevs.Count > 0 AndAlso Not tevs(0).IsEmpty Then
            Dim query = From t In tevs Where t.HasErrors Select t
            If query IsNot Nothing Then
                Dim ErrorsPresent As Boolean = query.Count > 0
                ret = New SolidColorBrush(Color.FromArgb(255, 255, 200, 0))
            Else
                ret = New SolidColorBrush(Colors.DodgerBlue)
            End If
        End If
    End If
    Return ret
End Function

Public Function ConvertBack(value As Object, targetType As System.Type, parameter As Object, culture As System.Globalization.CultureInfo) As Object Implements System.Windows.Data.IValueConverter.ConvertBack
    Throw New NotSupportedException
End Function

End Class 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:27:01.327

我认为值得检查视图模型中的“IsEmpty”属性设置器..您必须从该“IsEmpty”属性设置器中引发属性更改事件..

并确保通过设置器将默认值设置为“前景”。不要为标签的前景设置默认值。

# javascript - 将我的网站内容设置到正确的位置

> ID：10448766
> 
> 赞同：0
> 
> 时间：2012-05-04T12:26:09.137
> 
> 标签：javascript, jquery, html, css

我有一个用 Jquery 和 html 设计的单页网站。我有一个名为#site-content 的div，它包含所有“页面”，宽度为4400px。第 1 页从左侧开始：0px;，左侧第二个：-1100px，左侧第三个：-2200px，左侧第四个：-3300px;，在第三页上，例如我得到这个：

```
<div id="site-content" style="left: -2200px;"> 
```

刷新页面后，又从左边开始：0px;。

有没有一种方法可以确保它从左侧重新开始：-2200px;??

代码示例真的很受欢迎，

提前致谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:39:25.513

尝试使用锚导航。

如果 url 看起来像：[http](http://site.com/#1) ://site.com/#1或类似的东西，这段代码应该可以工作。

```
$(document).ready(function(){
  var anchor = window.location.hash; // not sure about correct getting anchor
  $("#site-content").animate({ left:(1100*anchor)+"px" }, 500);
}); 
```

# android - 将图像添加到电子邮件正文

> ID：10448769
> 
> 赞同：1
> 
> 时间：2012-05-04T12:26:18.397
> 
> 标签：android, gmail, html-email

我想在 Android 的电子邮件正文中添加图像。

我使用 INTENT.EXTRA_STREAM 附加了一张图片，但这不是我想要的。我想要它在电子邮件正文中。
我尝试了以下代码，但它不起作用，谁能给我另一种方法来完成任务？

```
 String html="<p>This is a html-formatted string with <b>bold</b> and <i>italic</i> text</p><img src=\"screenshot.jpg\"";
                i.putExtra(Intent.EXTRA_TEXT,Html.fromHtml(html,
                        new ImageGetter() {

                    public Drawable getDrawable(String source) {
                        // TODO Auto-generated method stub
                         String base = Environment.getExternalStorageDirectory().getAbsolutePath().toString();

                         String imagePath = "/sdcard/screenshot.jpg";//"file://"+ base+"/"+ source;
                            Drawable bmp = Drawable.createFromPath(imagePath);
                           // bmp.setBounds(0, 0, bmp.getIntrinsicWidth(), bmp.getIntrinsicHeight());

                            return bmp;
                    }
                },null)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:40:39.903

You can do that using [JavaMail Api](http://www.oracle.com/technetwork/java/index-138643.html)

[Here](http://java.sun.com/developer/onlineTraining/JavaMail/contents.html#IncludingImagesWithHTML) is sample code to do that,

# ruby-on-rails - Psych::SyntaxError 无法解析 YAML

> ID：10448770
> 
> 赞同：10
> 
> 时间：2012-05-04T12:26:22.390
> 
> 标签：ruby-on-rails, yaml, fedora

我在 fedora 16 Rails version 2.3.5 和 Ruby 1.9.2.p320 上运行的 rails 应用程序遇到问题。该应用程序在 Ubuntu 11.10 上运行良好。当我运行 rails 服务器并点击任何控制器时，会出现以下错误。

Psych::SyntaxError in controllername#actionname

无法解析 YAML

我已经尝试过应用以下技巧，但它对我不起作用。

我在 config/boot.rb 中添加了以下行

```
require 'yaml'

YAML::ENGINE.yamler = 'syck' 
```

错误跟踪是

```
.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/psych.rb:148:in `parse'
.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/psych.rb:148:in `parse_stream'
.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/psych.rb:119:in `parse'
.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/psych.rb:106:in `load'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/activesupport-2.3.5/lib/active_support/vendor/i18n-0.1.3/lib/i18n/backend/simple.rb:189:in `load_yml'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/activesupport-2.3.5/lib/active_support/vendor/i18n-0.1.3/lib/i18n/backend/simple.rb:176:in `load_file'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/activesupport-.3.5/lib/active_support/vendor/i18n-0.1.3/lib/i18n/backend/simple.rb:13:in `block in load_translations'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/activesupport-2.3.5/lib/active_support/vendor/i18n-0.1.3/lib/i18n/backend/simple.rb:13:in `each'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/activesupport-2.3.5/lib/active_support/vendor/i18n-0.1.3/lib/i18n/backend/simple.rb:13:in `load_translations'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/activesupport-2.3.5/lib/active_support/vendor/i18n-0.1.3/lib/i18n/backend/simple.rb:85:in `init_translations'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/activesupport-2.3.5/lib/active_support/vendor/i18n-0.1.3/lib/i18n/backend/simple.rb:74:in `available_locales'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/activesupport-2.3.5/lib/active_support/vendor/i18n-0.1.3/lib/i18n.rb:50:in `available_locales'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_view/template.rb:226:in `valid_locale?'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_view/template.rb:243:in `parse_extensions'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_view/template.rb:233:in `split'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_view/template.rb:118:in `initialize'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_view/reloadable_template.rb:81:in `initialize'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_view/reloadable_template.rb:38:in `new'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_view/reloadable_template.rb:38:in `register_template_from_file'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_view/reloadable_template.rb:62:in `block in load_all_templates_from_dir'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_view/reloadable_template.rb:62:in `each'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_view/reloadable_template.rb:62:in `load_all_templates_from_dir'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_view/reloadable_template.rb:29:in `[]'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_view/paths.rb:48:in `block in find_template'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_view/paths.rb:47:in `each'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_view/paths.rb:47:in `find_template'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_controller/base.rb:1389:in `default_template'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_controller/base.rb:905:in `render'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:51:in `block in render_with_benchmark'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `block in ms'
.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/benchmark.rb:310:in `realtime'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `ms'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:51:in `render_with_benchmark'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_controller/base.rb:1326:in `default_render'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_controller/base.rb:1332:in `perform_action'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_controller/filters.rb:617:in `call_filters'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_controller/filters.rb:610:in `perform_action_with_filters'
/.rvm/gems/ruby-1.9.2-p320@sunago/gems/actionpack-2.3.5/lib/action_controller/benchmarking.rb:68:in `block in perform_action_with_benchmark'
.rvm/gems/ruby-1.9.2-p320@sunago/gems/activesupport-2.3.5/lib/active_support/core_ext/benchmark.rb:17:in `block in ms'
.rvm/rubies/ruby-1.9.2-p320/lib/ruby/1.9.1/benchmark.rb:310:in `realtime 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T12:39:22.840

旧的 YAML 解析器不喜欢有制表符，而只有空格。您可能需要检查您的 YAML 文件以查看它在第 18 行是否有任何选项卡。如果是这种情况，您可能需要修复您的 YAML 文件或升级解析器。

# java - java中空间填充希尔伯特曲线的递归算法

> ID：10448771
> 
> 赞同：4
> 
> 时间：2012-05-04T12:26:23.990
> 
> 标签：java, recursion

我正在学习用 Java 编写代码，并且已经了解了 Java 编程的递归部分。我了解递归方法的基础知识，并且正在尝试编写填充希尔伯特曲线（和 Levy C 曲线）的空间，到目前为止，在实际递归部分之前，一切都很顺利。我在想出递归方法时遇到了麻烦，想知道是否有人可以帮助我。我也知道它需要在 DrawHilbert 方法中。

```
public class HilbertCurve extends JPanel {
int N;

/**
 * Constructor for Hilbert Curve
 */
public HilbertCurve () 
{
    Scanner myKeyboard = new Scanner(System.in);
    System.out.println("Enter an integer number to indicate the level of recursive depth: ");
    N = myKeyboard.nextInt();
    // Create a JFrame - a window that will appear on your screen
    JFrame f = new JFrame();

    // Tells the program to quit if you close the window
    f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    // Puts your drawing into the window (the JFrame)
    f.add(new JScrollPane(this));
    // Changes the size of the window on the screen
    f.setSize(600, 600);
    // Changes where the window will appear on your screen
    f.setLocation(200, 200);
    // Makes the window appear
    f.setVisible(true);
}
public void setupHilbert (Turtle turtle) 
{
    turtle.penup();
    turtle.setXY(0,0);

    // draw a simple rectangle that is 100x50 pixels
    turtle.pendown();

    drawHilbert(turtle, N); 
}

public void drawHilbert(Turtle turtle, int n) {

    if (n == 0) return;
    turtle.changeColor(Color.GREEN);
    turtle.changeWidth(2);
    turtle.left(-90);
    turtle.forward(100);
    turtle.left(90);
    turtle.forward(100);
    turtle.left(90);
    turtle.forward(100);
    turtle.left(-90);
    turtle.penup();
}

protected void paintComponent(Graphics g)
{
    Turtle turtle = new Turtle((Graphics2D) g, getBounds());

    turtle.setHeadingMode(Turtle.DEGREE);
    setupHilbert(turtle);

}

// plot a Hilbert curve of order N
public static void main(String[] args) 
{
    Scanner myKeyboard = new Scanner(System.in);
    HilbertCurve test = new HilbertCurve();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:30:36.967

递归的标志是一个函数调用自身。我希望`drawHilbert()`在某个地方看到对内部自身的调用，但我没有。

请密切注意您的停止条件，否则您最终会遇到 OutOfMemoryError，因为您的递归调用将永远添加到堆栈中。

我不熟悉您的问题，但这会是您所缺少的吗？

```
public void drawHilbert(Turtle turtle, int n) {

    if (n == 0) return;
    turtle.changeColor(Color.GREEN);
    turtle.changeWidth(2);
    turtle.left(-90);
    turtle.forward(100);
    turtle.left(90);
    turtle.forward(100);
    turtle.left(90);
    turtle.forward(100);
    turtle.left(-90);
    turtle.penup();
    drawHilbert(turtle, --n);  // is this where your recursion should go?
} 
```

更新：这个网站看起来很相关。

[http://people.cs.aau.dk/~normark/prog3-03/html/notes/fu-intr-2_themes-hilbert-sec.html](http://people.cs.aau.dk/~normark/prog3-03/html/notes/fu-intr-2_themes-hilbert-sec.html)

# jaxb2 - Jaxb Unmarshaller 以不同方式处理 Long 和 Integer

> ID：10448772
> 
> 赞同：2
> 
> 时间：2012-05-04T12:26:25.767
> 
> 标签：jaxb2, unmarshalling

我有一个带有单个 Long 变量的类，我希望我的输入 xml 被解组到。当我运行 unmarshal（附加单元测试）时，我在 ValidationEventHandler 中抛出以下错误

```
[severity=ERROR,message=For input string: "",locator=node=null,object=null,url=null,line=1,col=96,offset=-1]]
LinkedException: java.lang.NumberFormatException: For input string: "" 
```

类和单元测试如下所示 -

```
@XmlRootElement
    public class Annotation {

    private Long creatorNo;

    public Long getCreatorNo() {
        return creatorNo;
    }

    public void setCreatorNo(Long creator) {
        creatorNo = creator;
    }
} 
```

单元测试 -

```
public class AnnotationTest {

    @Test
    public void testUnmarshall() throws Exception {
        final String inputXML = "<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?><annotation><creatorNo></creatorNo></annotation>";
        final JAXBContext jaxbContext = JAXBContext.newInstance(Annotation.class);
        final Unmarshaller unmarshaller = jaxbContext.createUnmarshaller();
        unmarshaller.setEventHandler(new UnmarshallerValidationEventHandler());
        final Annotation annotationObject = (Annotation)unmarshaller.unmarshal(new StringReader(inputXML));
    }
} 
```

从外观上看，Jaxb 不喜欢将空元素传递给 Long 类型。但是现在，如果我在“注释”类中将“creatorNo”的类型更改为整数而不是 Long，则不会引发异常，Jaxb 只会创建将“creatorNo”设置为 0 的类。那么为什么会有这种不同的行为?

我所追求的真正行为是我希望 Jaxb 将“creatorNo”视为可选并将其设置为 NULL 并为空 XML 元素。这可能吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:34:29.567

**注意：** 我是[**EclipseLink JAXB (MOXy)**](http://www.eclipse.org/eclipselink/moxy.php)负责人，也是[**JAXB 2 (JSR-222)**](http://jcp.org/en/jsr/detail?id=222)专家组的成员。

您看到将空元素转换为 a`Long`的问题是 JAXB RI 问题，而不是 JAXB 问题，因为 MOXy 等其他实现可以正确处理此用例。您可以在以下位置记录针对 JAXB RI 的错误：

*   [http://java.net/jira/browse/JAXB/](http://java.net/jira/browse/JAXB/)

**解决方法**

1.  使用 JAXB (JSR-222) 的另一个实现没有这个问题，这个选项是编码到标准 API 的一大好处。
2.  如果您使用默认值，`ValidationEventHandler`则此转换异常将被忽略，您的文档将按预期解组。
3.  使用 an在 a和你自己`XmlAdapter`之间进行转换。您可以利用 JAXB来简化此操作。`String``Long``DatatypeConverter`
4.  更改您的实现`UnmarshallerValidationEventHandler`以更容忍转换错误。

**UnmarshallerValidationEventHandler**

```
import javax.xml.bind.ValidationEvent;
import javax.xml.bind.ValidationEventHandler;

public class UnmarshallerValidationEventHandler implements ValidationEventHandler {

    @Override
    public boolean handleEvent(ValidationEvent event) {
        return event.getSeverity() < ValidationEvent.FATAL_ERROR;
    }

} 
```

# javascript - 如何使用 setInterval() 作为事件监听器

> ID：10448774
> 
> 赞同：2
> 
> 时间：2012-05-04T12:26:29.490
> 
> 标签：javascript, jquery

我从未使用过`setInterval()`，我需要一些建议，因为我无法理解这一点。我想创建某种事件监听器。

例如，我想检查选择菜单中选项的长度，但是第三方脚本通过 Ajax 请求填充选择菜单的内容。不幸的是，我不允许触摸第三方脚本，所以我想有一个功能来等待和监听要添加的内容，然后可以执行它的任务。

假设我的网页上有以下内容：

```
<select size="7" id="cat"> </select> 
```

onload 这充满了这样的选项：

```
<option value="Category 1">Category 1</option>
<option value="Category 2">Category 2</option>
<option value="Category 3">Category 3</option>
<option value="Category 4">Category 4</option> 
```

我打算添加一个函数，该函数还加载 onLoad （或 $(document).ready() 准确地说），它将监听选项的长度，如果大于零，我们希望做一些事情（在这个例子中是一个警报)

```
function checkLen(){

    if($('#cat option').size() > 0){
        return true;
       }else{
        return false;
       }

}

function takeDefault(){

    var ourInterval = setInterval("checkLen();", 1000);

       if(ourInterval == true){
           alert("Okay I will do something now");
           clearInterval(ourInterval);

       }

        // Now I will perform some other tasks
}

$(document).ready(function() {
   takeDefault();
}); 
```

现在这不起作用，因为我不太明白。if(checkLen == True) 条件只执行一次，我需要每秒执行一次，直到填充选择菜单。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T12:32:35.140

为简单起见，我使用了不同的元素，但想法仍然相同：

```
var listen = setInterval(function () {
    if ($('input').val().length > 0) {
        console.log('has changed, should call callback');
        clearInterval(listen);
    }
}, 1000);​ 
```

[http://jsfiddle.net/suKCp/](http://jsfiddle.net/suKCp/)

对于您的情况，这应该类似于（未经测试）：

```
function takeDefault(){
  var ourInterval = setInterval(function () {
    if ($('#cat option').size() > 0) {
      alert("Okay I will do something now");
      clearInterval(ourInterval);
    }
  }, 1000);

  // Now I will perform some other tasks
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:28:17.200

`ourInterval`不是由 执行的函数的返回值`setInterval`。这是您可以用来取消间隔的值。

其次，与其间隔检查，不如直接在输入上注册一个监听器，并在它发生变化时做点什么？

就像是

[http://jsfiddle.net/BskPK/](http://jsfiddle.net/BskPK/)

# android - 如何选择多个联系人并将它们传递给android中的另一个Intent

> ID：10448777
> 
> 赞同：0
> 
> 时间：2012-05-04T12:26:43.440
> 
> 标签：android, listview, multipleselection

我有一个项目列表，在活动中的每个项目之前都有一个复选框。use 可以选择多个项目，然后将这些项目传递给另一个意图。谁能告诉我如何根据复选框选择来识别选择的项目。

我为列表中的每个项目使用以下布局

```
<?xml version="1.0" encoding="UTF-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:padding="6dip" android:layout_height="?android:attr/listPreferredItemHeight">
<CheckBox
    android:id="@+id/result_icon"        
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_alignParentBottom="true"
    android:layout_marginRight="6dip"        
    android:src="@drawable/ic_launcher"/>
<TextView
    android:id="@+id/result_name"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"        
    android:layout_toRightOf="@id/result_icon"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"        
    android:layout_alignWithParentIfMissing="true"                
    android:gravity="center_vertical"
    android:text="Title" />
<TextView  
    android:id="@+id/result_second_line"
    android:layout_width="fill_parent"
    android:layout_height="26dip"      
    android:layout_toRightOf="@id/result_icon"
    android:layout_below="@id/result_name"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"        
    android:singleLine="true"
    android:ellipsize="marquee"
    android:text="Second line" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:33:48.860

在这种情况下，我假设您为复选框维护了一个 ArrayList，这意味着选中了哪个复选框或未选中哪个复选框。通过这种方式，您将获得要发送到另一个活动的联系人。

现在要将联系人值从一个活动传递到另一个活动，您可以使用`Bundle`.

```
Bundle mBundle=new Bundle();
        mBundle.putStringArrayList("KeyValue", ArrayList Contact name);
        mIntent.putExtras(mBundle); 
```

您可以在下一个活动中获得 Bundle，如下面的代码。

```
Bundle mBundle=getIntent().getBundleExtra("KeyValue"); 
```

# c# - 如何以编程方式查找 DateTimePicker 控件的背景色

> ID：10448780
> 
> 赞同：1
> 
> 时间：2012-05-04T12:27:03.280
> 
> 标签：c#, vb.net, winforms, datetimepicker

默认`DateTimePicker`控件的背景色似乎是`Color.White`，但是可以根据用户主题颜色进行更改吗？如何找出当前设置的内容？

（没有背景色属性和`DateTimePicker.DefaultBackColor`返回`SystemColors.Control`实际上不正确）

我想如果有人可以确认这不能改变，那么我可以安全地对其进行硬编码吗？

编辑：

这个问题的基础实际上并不是一个错字，而是我控制的智能感知`BackColor`中没有出现的事实。`DateTimePicker`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:31:14.143

你是对的，没有`BackColour`财产。但是有一个`BackColor`属性。;)

[http://msdn.microsoft.com/en-us/library/0625h0ta.aspx](http://msdn.microsoft.com/en-us/library/0625h0ta.aspx)

但是，`BackColor`可能不是您想要的。

> 设置 BackColor 对 DateTimePicker 的外观没有影响。要为 DateTimePicker 的下拉日历设置背景颜色，请参阅 CalendarMonthBackground 属性。

# scala - 为什么 javaBigDecimal2bigDecimal 隐式不适用？

> ID：10448781
> 
> 赞同：4
> 
> 时间：2012-05-04T12:27:11.207
> 
> 标签：scala, implicit-conversion

使用 scala 2.9.2 此代码：

```
BigDecimal(1) + 新 java.math.BigDecimal("1")
新的 java.math.BigDecimal("1") + BigDecimal(1)

```

无法编译，因为在第二种情况下未应用 scala.math.BigDecimal$#javaBigDecimal2bigDecimal

但是，如果我在它之前定义相同的隐式，代码编译：

```
BigDecimal(1) + 新 java.math.BigDecimal("1")
隐式定义 javaBigDecimal2bigDecimal(x: java.math.BigDecimal): BigDecimal = BigDecimal(x)
新的 java.math.BigDecimal("1") + BigDecimal(1)

```

为什么这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T14:38:50.143

在第一个表达式`BigDecimal(1) + new java.math.BigDecimal("1")`工作规则中：

> 编译器将查找在它正在查找的类型的隐式范围的任何对象内定义的隐式。

所以，有一种方法`+(BigDecimal): BigDecimal`。`scala.math.BigDecimal`编译器看到错误的参数类型 ( `java.math.BigDecimal`) 并开始寻找到类型的转换`BigDecimal`。它在范围内找不到一个，然后在`BigDecimal`object 中查找并找到`javaBigDecimal2bigDecimal`.

如果由于没有方法而`javaBigDecimal2bigDecimal`在范围内进行转换，则第二个示例将起作用，并且编译器将寻找转换为正确类型（具有方法）`java.math.BigDecimal``+``+(BigDecimal)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T14:15:54.117

你有`import math.BigDecimal._`吗？对我来说它工作得很好：

```
Welcome to Scala version 2.9.1.final (Java HotSpot(TM) 64-Bit Server VM, Java 1.7.0_04).
Type in expressions to have them evaluated.
Type :help for more information.

scala> import math.BigDecimal._
import math.BigDecimal._

scala> import math.BigDecimal
import math.BigDecimal

scala> BigDecimal(1) + new java.math.BigDecimal(1)
res0: scala.math.BigDecimal = 2 
```

编辑：

忘了提，这也有效：

```
scala> new java.math.BigDecimal("1") + BigDecimal(1)
res0: scala.math.BigDecimal = 2 
```

# playframework - Play Framework - 我在哪里可以找到发行说明或“新增功能”文档？

> ID：10448785
> 
> 赞同：3
> 
> 时间：2012-05-04T12:27:25.590
> 
> 标签：playframework, playframework-2.0, playframework-1.x

纵观整个网络，我找不到任何有关 Play 2.0.1 的此类文档的参考资料，也找不到任何路线图。如果有人知道，请指出来给我...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T12:30:59.663

来自谷歌集团公告：

## 发行说明：

问题：[https ://play.lighthouseapp.com/projects/82401-play-20/milestones/current](https://play.lighthouseapp.com/projects/82401-play-20/milestones/current)

对应代码改动：[https ://github.com/playframework/Play20/commits/2.0.1](https://github.com/playframework/Play20/commits/2.0.1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-01T10:55:38.270

您可以在 Play Framework 更改日志页面上找到发行说明：[http ://www.playframework.com/changelog](http://www.playframework.com/changelog)

当前的 Play 2.x 路线图在这里：[https ://docs.google.com/document/d/11sVi1-REAIDFVHvwBrfRt1uXkBzROHQYgmcZNGJtDnA/pub](https://docs.google.com/document/d/11sVi1-REAIDFVHvwBrfRt1uXkBzROHQYgmcZNGJtDnA/pub)

# mercurial - 合并两个不同的存储库

> ID：10448788
> 
> 赞同：31
> 
> 时间：2012-05-04T12:27:43.937
> 
> 标签：mercurial, merge

我有 3 个 repos，A、B 和 C，都与同一个项目相关。A 是该项目的最旧版本，B 是一个没有真正去任何地方的实验，C 是最新的工作版本。所有这些存储库都有不同的文件——它们是同一产品的不同实现。

我想将这 3 个存储库合并为一个，以保留它们的历史记录——这很重要。我想我想将 B 堆叠在 A 之上，将 C 堆叠在 B 之上，但是当我签出项目时，我只想获得与 repo C 相关的更改。

我的想法是在 A 上标记或创建一个命名分支，hg rm *，提交，然后将 B 堆在上面。对 B 重复相同的操作，这样我就可以堆 C，然后像往常一样继续项目。

你怎么看？另外，我想做的一些灵感：[1](https://web.archive.org/web/20180605095036/https://hgtip.com/tips/advanced/2009-11-17-combining-repositories/) , [2](https://stackoverflow.com/questions/5859263/join-two-mercurial-repositories-into-one-line-of-revisions)。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-04T14:14:04.810

您只需将变更集拉入一个大存储库即可。从 A 回购开始：

```
$ hg init combined
$ cd combined
$ hg pull ../A
$ hg update 
```

然后强行拉入 B 并虚拟合并两个头，以便保留 B 中的文件：

```
$ hg pull ../B --force
$ hg merge --tool internal:other
$ hg revert --all --rev tip
$ hg commit -m "Merge A and B, kept B" 
```

然后对 C 重复：

```
$ hg pull ../C --force
$ hg merge --tool internal:other
$ hg revert --all --rev tip
$ hg commit -m "Merge B and C, kept C" 
```

这为您提供了三行历史记录和一个合并点，您首先丢弃 A，然后是 B，最后是 C。

或者，您可以使用带有*拼接图的*[转换扩展](https://www.mercurial-scm.org/wiki/ConvertExtension)将三个历史拼接在一起。首先将所有变更集强制拉入单个存储库。然后进行 Mercurial 到 Mercurial 的转换，在其中将 A 的尖端添加为 B 的根的第一个父项。对于 B 和 C 也是如此。这给了你一个很长的历史，当你从 A 转到时会有一个非常突然的变化B 和从 B 到 C。

 *我会选择第一个选项：它是最明确的，并且最好地展示了在不伪造（转换）历史的情况下会发生什么。*

# ruby-on-rails-3 - Rails 3 响应 mimetype 和 content-type

> ID：10448789
> 
> 赞同：0
> 
> 时间：2012-05-04T12:27:50.027
> 
> 标签：ruby-on-rails-3, mime-types

这是诀窍。我有一个名为 Pages 的模型，其中有一个名为“page_type”的字段，可以说是 3 个变体之一：“html”、“image”、“vcard”和一个名为“content”的字段。所以现在我需要应用程序根据请求的页面类型来响应不同的 mimetypes。

如果 page_type 设置为“html” - 使用适当的视图和 html_safe 将内容呈现为 html，这很容易。

如果 page_type 设置为“image” - 使用路径获取图像，存储在内容中并将其发送回用户，就像他请求图像一样。

“电子名片”也一样。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T16:51:38.830

如果您正在生成 URL 以访问您的应用程序中的资源（页面），您可以指定资源位置 RESTful，例如 /pages/2.jpg、/pages/3.vcard、/pages/4（默认为 html ) 使用内置的 Rails 视图助手，例如 page_url(@page, :format => 'jpg')。然后只需在 Rails 中使用 repond_to 来传递资源：

```
respond_to do |format|
  format.html { # default rendering in show.erb.html }
  format.jpg { # perhaps send_file or send_data call }
  format.vcard { # send attachment }
end 
```

查看[Rails 路由指南](http://guides.rubyonrails.org/layouts_and_rendering.html)了解更多信息。您需要配置 Rails 来处理对 .vcard 的请求。请参阅[此要点](https://gist.github.com/1333501)。

如果您不控制链接生成（对您的资源的外部引用）并期望获得像 /pages/2 （这是一个 jpeg）这样的请求，那么您将不得不回退到使用您的 page_type 列有条件地使用 send_file 呈现、send_data 或其他 Rails 渲染方法。您可能会考虑重新使用您在上面的 respond_to 中为每个块创建的逻辑（方法），以便您的控制器具有 'respond_to_html'、'respond_to_jpg'、'respond_to_vcard' 方法。

# php - 如何编写只要服务器启动就运行的脚本？

> ID：10448791
> 
> 赞同：0
> 
> 时间：2012-05-04T12:28:00.040
> 
> 标签：php, mysql, wamp, wampserver

我正在使用 WAMP 服务器。

只要 WAMP 服务器打开，是否可以运行脚本？如果是这样，怎么做？如果做不到，XAMPP 或任何其他开发服务器可以做吗？

**编辑：** 我想运行一个 PHP 脚本，然后在特定日期在数据库中插入数据，我使用的是 Windows 7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:31:26.340

根据评论：

你看错了问题。编写一个脚本并为其使用 Cron 作业。如果您在 Windows 机器上，计划任务也可以工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T12:32:44.073

> 我想运行一个 PHP 脚本，然后在特定日期在数据库中插入数据。

使用定时任务。大多数控制面板都提供它们，否则`crontab`在 linux 或 Windows 中的任务调度程序上使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T16:49:48.133

使用 Window 的任务计划程序/管理器（运行 taskschd.msc）来执行此操作...

它就像 cron 但适用于 Windows。

您可以给它一个经常点击的 URL（通过执行 cURL、wget、powershell、VBS、IE/Firefox/Chrome），或者使用它通过 php.exe 直接执行 PHP 脚本。

例如，如果我想运行一个 PHP 文件（通过我的 Wamp-Developer），我只需添加一个任务来执行这个......

```
C:\WampDeveloper\Components\Php\php.exe -f "C:\my_php_file.php" 
```

您可以指定它也使用/或不使用 php.ini 文件（检查 php --help）。

或者..

```
C:\WampDeveloper\Tools\curl\curl.exe http://localhost/my_php_file.php 
```

您可以使用 cURL 进行 HEAD、POST、登录等... [http://curl.haxx.se/docs/manual.html](http://curl.haxx.se/docs/manual.html)

由于您使用的是 WampServer，您只需更新上面的 Wamp-Developer 路径，它应该可以工作（我不知道 WampServer 或 Xampp 将 php 或 curl 放在哪里）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T12:35:46.193

看来您正在描述一个守护进程。如果您的脚本中断，您需要该功能，以便它可以处理错误并自行恢复。 [将 php 脚本作为守护进程运行](https://stackoverflow.com/questions/2036654/run-php-script-as-daemon-process)

在 PHP 中创建一个守护进程似乎是一种消耗，但它提供了您想要的功能。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T12:30:15.977

尝试编写这种脚本：

```
<?php

while (true) {
    // Do something
} 
```

然后使用 PHP CLI（命令行）启动它：

```
php your_script.php 
```

# javascript - 如何在 jQuery 弹出窗口中显示下拉选择列表并检索所选值

> ID：10448792
> 
> 赞同：2
> 
> 时间：2012-05-04T12:28:01.070
> 
> 标签：javascript, jquery, html, jquery-ui

我想在 jQuery 弹出/对话框中显示一个选择下拉列表。你能告诉我如何做到这一点，以及如何检索选定的值吗？

下面的示例代码：

```
<div id='selectPopup'>
    <form name='test'>
        <select  id='inptPAN' name='inptPAN'>
            <option value='1'>item 1</option>
            <option value='2'>item 2</option>
            <option value='3'>item 3</option>
            <option value='4'>item 4</option>
            <option value='5'>item 5</option>
            <option value='6'>item 6</option>
        </select>
    </form>
</div> 
```

请参阅此[jsFiddle](http://jsfiddle.net/doonot/pQJf8/9/)获取一些代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:48:12.787

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <link href="../../../Scripts/css/ui-lightness/jquery-ui-1.8.16.custom.css" rel="stylesheet"
        type="text/css" />
    <script src="../../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script src="../../../Scripts/jquery-ui-1.8.16.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            // this function is triggered as soon as something changes in the form
            $("select[name='inptPAN']").change(function () {
                //console.log('found change');
              selectDialog('Pan','You had selected, Text: '+ $(':selected',this).text()+' And Value : '+$(this).val());
            });

            function selectDialog(title, text) {
                return $('<div></div>').append(text)
            .dialog({
                resizable: true,
                modal: true,
                buttons: {
                    "OK": function () {
                        $(this).dialog("close");
                    }
                }
            });
            }
        });
    </script>
</head>
<body>
    <div id='selectPopup'>
        <form name='test'>
        <select id='inptPAN' name='inptPAN'>
            <option value='1'>item 1</option>
            <option value='2'>item 2</option>
            <option value='3'>item 3</option>
            <option value='4'>item 4</option>
            <option value='5'>item 5</option>
            <option value='6'>item 6</option>
        </select>
        </form>
    </div>
</body>
</html> 
```

[演示](http://jsfiddle.net/nanoquantumtech/DmFXZ/)_

# javascript - 应用程序重新启动后附加到文件-Phonegap

> ID：10448794
> 
> 赞同：0
> 
> 时间：2012-05-04T12:28:10.883
> 
> 标签：javascript, file-io, cordova

在 phonegap 中，有一种方法可以在应用程序启动并创建编写器时获取文件的长度，以便您可以将 writer.seek() 写入该位置并附加到文件中。它目前在应用程序运行时追加，但每次应用程序重新启动时都会覆盖文件。下面是我给作者的代码。作家是在全球范围内创建的。

我正在使用在 Android 2.3.3 上运行的 phonegap 1.2.0

```
var writer = new FileWriter("mnt/sdcard/mydocs/text.txt");

function appendFile(text) {
  try{
    writer.onwrite = appendSuccess;
    writer.onerror = appendFail;
    writer.seek(writer.length);
    writer.write(text);
    }catch(e){
      alert(e);
      }
}

function appendSuccess() {
    alert("Write successful");
  }

  function appendFail(evt) {
    alert("Failed to write to file");
    }
  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:29:11.043

是的，这是一个错误。在最新版本的 PhoneGap 中，它是固定的。但是，我们不再支持：

```
new FileWriter(pathToFile); 
```

现在你需要做：

```
window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, function(FS) {
    FS.root.getFile("empty.txt", {"create":true, "exclusive":false}, 
        function(fileEntry) {
            fileEntry.createWriter(
                 function(writer) {
                    console.log("Length = " + writer.length);
                    console.log("Position = " + writer.position);
                    writer.seek(writer.length);
                    console.log("Position = " + writer.position);
                 }, fail);
        }, fail);
}, fail); 
```

很抱歉第一个答案不正确。显然，您不能将[FileEntry](http://docs.phonegap.com/en/1.7.0/cordova_file_file.md.html#FileEntry)传递给[FileWriter](http://docs.phonegap.com/en/1.7.0/cordova_file_file.md.html#FileWriter)构造函数，您需要传递通过调用[FileEntry.file()](http://docs.phonegap.com/en/1.7.0/cordova_file_file.md.html#FileEntry_file)方法获得的[File 。](http://docs.phonegap.com/en/1.7.0/cordova_file_file.md.html#File)

一定会喜欢这个令人费解的 W3C 规范。

# java - GlassFish JAX-RS Jackson 自定义 JSON 序列化

> ID：10448799
> 
> 赞同：5
> 
> 时间：2012-05-04T12:28:30.127
> 
> 标签：java, glassfish, jersey, jax-rs, jackson

我有一个 JAX-RS 资源，我想使用自定义 JSON 序列化程序来`java.util.Calendar`使用`@JsonSerialize(using=MySerializer.class)`.

```
import java.util.Calendar;
import org.codehaus.jackson.map.annotate.JsonSerialize;

public class FooBar {

    @JsonSerialize(using=MySerializer.class)
    private Calendar calendar;

    public FooBar() {
        calendar = Calendar.getInstance();
    }

    public Calendar getCalendar() {
        return calendar;
    }
} 
```

MySerializer.java：

```
import java.io.IOException;
import java.util.Calendar;

import org.codehaus.jackson.JsonGenerator;
import org.codehaus.jackson.JsonProcessingException;
import org.codehaus.jackson.map.JsonSerializer;
import org.codehaus.jackson.map.SerializerProvider;

public class MySerializer
    extends JsonSerializer<Calendar>
{

    @Override
    public void serialize(Calendar c, JsonGenerator jg, SerializerProvider sp)
        throws IOException, JsonProcessingException
    {            
        jg.writeString("fooBar Calendar time: " + c.getTime());
    }

} 
```

我在 NetBeans 7.1 中做了一个简单的项目，它运行良好。

当我在具有不同部署的其他项目中使用它（EAR 具有多个 WAR 和 EJB JAR）时，我会收到

```
javax.ws.rs.WebApplicationException: com.sun.jersey.api.MessageException: A message body writer for Java class
com.example.FooBar and MIME media type application/json was not found 
```

但是，如果我将 init-parameter 放入 web.xml

```
<init-param>
   <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
   <param-value>true</param-value>
</init-param> 
```

json 序列化有效，但`@JsonSerialize`注解不起作用。

另一方面，Netbeans 项目不需要`POJOMappingFeature`.

这两个应用程序之间可能有什么区别？

在一个应用程序需要而另一个应用程序不需要的情况下，有什么区别`POJOMappingFeature`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-07T10:10:55.260

关于`@JsonSerialize`失败：如果你有一个字段的getter，你需要用`@JsonSerialize`而不是字段本身来注释getter方法！似乎 getter 方法优先于序列化领域。所以工作代码是：

```
import java.util.Calendar;
import org.codehaus.jackson.map.annotate.JsonSerialize;

public class FooBar {

    private Calendar calendar;

    public FooBar() {
        calendar = Calendar.getInstance();
    }

    @JsonSerialize(using=MySerializer.class)
    public Calendar getCalendar() {
        return calendar;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-07T10:04:13.327

最后我发现了不同之处。

如果我放入`jackson-jaxrs.jar`WAR的WEB-INF/lib中，那么`POJOMappingFeature`web.xml中不需要，它可以自动序列化POJO。

如果您没有这个 jar，那么您需要在 web.xml 中添加以下条目：

```
<servlet>
    <servlet-name>ServletAdaptor</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>    
    <init-param>
      <param-name>com.sun.jersey.api.json.POJOMappingFeature</param-name>
      <param-value>true</param-value>
    </init-param>
    ...
</servlet> 
```

# telerik - ASP.Net - Telerik 与母版页兼容（ 我在我的网站上使用了一些 Telerik 控件。（框架2）现在我需要将元行更改为：  代替：  代替：  对于 css 兼容性（用于边界半径和其他内容），当我更改此行时，某些页面中的 Telerik 控件看起来不太好。 有人有什么主意吗？ 过去我一直在这条路上，我们所做的是创建一个站点表，然后是站点拥有的对象，我们将外键关系添加回站点表。 在我们的例子中，我们只有三个或四个站点拥有的对象，所以我们只需要修改 4 个表。然后从那里开始的关系仍然有效，不需要修改。 我不会走每个站点一个数据库的路线，如果您将来必须进行数据库更改或者如果您想在整个系统中提取报告，这将成为维护的噩梦 telerik 4 1 回答 1 This answer is useful 1 因为从 Telerik.Web.Resource.axd 处理程序流出的样式表没有正确设置 mime 类型，并且 IE9 会忽略没有正确设置 mimetype 的样式表。 除了添加 IE7 兼容性元标记外，我不知道任何解决方案。 解决方案： 创建一个新的代码文件，并使用如下汇编代码添加嵌入的样式表。 [assembly: WebResource("Assets.Skins.Calendar.Custom.css", "text/css")] 于 2012-09-19T01:17:13.150 回答 Related 2 c++ - 如何在 C++ 中将 char* 缓冲区包装在 WinRT IBuffer 中 4 c# - 我应该同时实现客户端和服务器端验证吗？ 2 java - 在 C++ 中是否有像 Java 初始化块这样的结构？ 5 c - C中strlen的未处理异常 1 jquery - 证实使用 jQuery Tools Validator 插件 我正在使用这个插件：http://jquerytools.org/documentation/validator/index.html 有谁知道如何使用它来验证选择元素？我添加了 required="required" 但未完成验证。我认为这可能是因为选择中总是有一个可用的选项值。文档说这个属性也适用于复选框和 <select> 字段在谈论使用 required 属性时，我假设它应该可以工作。有任何想法吗？我成功地将 2 entity-framework - EF 可以选择多个转换后的集合吗？ 1 xml - 这是什么编码以及如何解码？ 1 scala - Scala Play 2.0 框架中的搜索表单提交和分页 3 xcode - 没有 iPhone，如何使用 XCode 截屏？ 3 jquery - 如何将 DOM 转储到变量中并将其从文档中分离（jQuery） Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 ID：10448801 赞同：0 时间： 标签：telerik 我在我的网站上使用了一些 Telerik 控件。（框架2）现在我需要将元行更改为： <meta http-equiv="X-UA-Compatible" content="IE=9"> 代替： <meta http-equiv="X-UA-Compatible" content="IE=7"> 对于 css 兼容性（用于边界半径和其他内容），当我更改此行时，某些页面中的 Telerik 控件看起来不太好。 有人有什么主意吗？ 回答 #1 赞同：1 时间：2012-09-19T01:17:13.150 因为从 Telerik.Web.Resource.axd 处理程序流出的样式表没有正确设置 mime 类型，并且 IE9 会忽略没有正确设置 mimetype 的样式表。 除了添加 IE7 兼容性元标记外，我不知道任何解决方案。 解决方案： 创建一个新的代码文件，并使用如下汇编代码添加嵌入的样式表。 [assembly: WebResource("Assets.Skins.Calendar.Custom.css", "text/css")]</select>

# python - 使用 python 通过以太网发送单个 int

> ID：10448805
> 
> 赞同：0
> 
> 时间：2012-05-04T12:28:59.940
> 
> 标签：python, ethernet, socketserver

我需要制作一个使用 tcp 接收和发送单个整数的服务器。如果我尝试这样做，Socketserver 会给我一个 TypeError。有替代方案还是我需要从头开始编写服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:14:58.333

[`struct`](http://docs.python.org/library/struct.html)

# postgresql - 如何计算每个学生的平均分

> ID：10448806
> 
> 赞同：3
> 
> 时间：2012-05-04T12:29:02.990
> 
> 标签：postgresql, select, union, average

我有一张桌子`"Register"`

与列：

```
 class_id bigint NOT NULL,
  disciple text,
  datelesson date NOT NULL,
  student_id integer NOT NULL,
  note character varying(2) 
```

现在我想计算每个 student_id 的平均分数和缺勤人数

```
Select * from "Register" as m

Join

(SELECT AVG(average), COUNT(abs) FROM (SELECT
  CASE
      WHEN "note" ~ '[0-9]' THEN CAST("note" AS decimal) 
  END AS average,
  CASE
      WHEN "note" ='a' THEN "note"
  END AS abs
FROM "Register" ) AS average)n 
on class_id=0001 
And datelesson between '01.01.2012' And  '06.06.2012' 
And discipline='music' order by student_id 
```

结果是这样的：

```
0001;"music";"2012-05-02";101;"6";7.6666666666666667;1
0001;"music";"2012-05-03";101;"a";7.6666666666666667;1
0001;"music";"2012-05-01";101;"10";7.6666666666666667;1
0001;"music";"2012-05-02";102;"7";7.6666666666666667;1
0001;"music";"2012-05-03";102;"";7.6666666666666667;1
0001;"music";"2012-05-01";102;"";7.6666666666666667;1 
```

我收到的结果是针对整个列的，但是我如何计算每个学生的平均分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:21:02.860

可能看起来像这样：

```
SELECT student_id
     , AVG(CASE WHEN note ~ '^[0-9]*$' THEN note::numeric
                                       ELSE NULL END) AS average
     , COUNT(CASE WHEN note = 'a' THEN 1 ELSE NULL END) AS absent
FROM   "Register"
WHERE  class_id = 1 
AND    datelesson BETWEEN '2012-01-01' AND  '2012-06-06' 
AND    discipline = 'music'
GROUP  BY student_id
ORDER  BY student_id; 
```

我添加了一些改进。

*   您不需要双引号小写标识符。
*   如果您想确保 中*只有*数字`note`，您的正则表达式必须类似于`note ~ '^[0-9]*$'`. 您所拥有的仅检查字符串中是否有*任何*数字。
*   最好使用 ISO 格式的日期，它适用于任何语言环境：`YYYY-MM-DD`.
*   `count`for 缺勤有效，因为值`NULL`不计算在内。Ypu 也可以`sum`用于此。
*   由于 class_id 是数字类型，`bigint`准确地说，前导零只是噪音。
    使用`class_id = 1`而不是`class_id = 0001`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T12:43:31.950

Looks to me like you are missing a "group by" clause. I am not familiar with postgress but I suspect the idea applies just the same.

here is an example in transact-sql:

```
--create table  register
--(
--class_id bigint NOT NULL,
--  disciple text,
--  datelesson date NOT NULL,
--  student_id integer NOT NULL,
--  grade_report integer not null,
--  )

--drop table register

delete from register
go

insert into register 
    values( 1, 'math', '1/1/2011', 1, 1)
insert into register 
    values( 1, 'reading', '1/1/2011', 1, 2)
insert into register 
    values( 1, 'writing', '1/1/2011', 1, 5)

insert into register 
    values( 1, 'math', '1/1/2011', 2, 8)
insert into register 
    values( 1, 'reading', '1/1/2011', 2, 9)

SELECT student_id, AVG(grade_report) as 'Average',  COUNT(*) as 'NumClasses'
from register
WHERE  class_id=1
group by student_id
order by student_id 
```

cheers

# mvvm - KnockoutJS - ViewModel 抽象

> ID：10448807
> 
> 赞同：2
> 
> 时间：2012-05-04T12:29:03.207
> 
> 标签：mvvm, knockout.js, viewmodel, abstraction

***更新***（见下文）

我了解 KnockoutJS 的基础知识。创建表视图模型时，可以使用`<tr data-bind="foreach: rows">`

现在我正在尝试抽象表视图模型，以便我可以创建具有相同行为（排序、编辑、分页等）的多个表。所以我的目标是这样的：

*HTML*

```
<div class="table a" data-bind="myTableBinding: aTableViewModel"></div>
<div class="table b" data-bind="myTableBinding: anotherTableViewmodel"></div> 
```

*主视图模型*

```
var MainViewModel = function () {
  this.aTableViewModel = new AbstractTableViewModel({
      columns: [...]
      initialSort: [...]
  });
  this.anotherTableViewModel = new AbstractTableViewModel({
      columns: [...]
      initialSort: [...]
  });
}; 
```

我的第一次尝试是模仿KnockoutJS 文档用于[Paged grid] 示例的示例 [simpleGrid] 插件 (@ [http://knockoutjs.com/examples/resources/knockout.simpleGrid.1.3.js )。](http://knockoutjs.com/examples/resources/knockout.simpleGrid.1.3.js)

我不太确定，但我认为抽象的基本概念在这个插件中没有得到很好的体现。当我尝试将 css 类包含到这样的`<th>`元素中时：`<th class="col col-id">`,`<th class="col col-name">`等，我发现使用`data-bind`属性并不容易（不可能？）。

这些`data-bind`属性可能不应该用于这些东西，因为这些类不会改变——它们是更高抽象级别的一部分：我们实际上应该使用 jQuery.tmpl 或 Underscore 的模板系统插入这些类。但是后来我收到一条错误消息，说[此模板系统不支持使用`foreach`绑定]（或类似的东西）。

因此，我的第二次尝试是实现抽象，因为它应该被实现：表属性（列等）在另一个“抽象级别”而不是表数据：

1.  在实例化新的特定表视图模型时创建基本`<tr data-bind="foreach: rows">`html，使用“抽象”模板——我只是使用 Underscore 的 _.template 完成的。
2.  让这个特定的视图模型像往常一样使用上面的 html。

在 CoffeeScript 中：

```
do ->
  ko.dataTable =
    ViewModel: (config) ->
      @id = config.id
      @columns = config.columns
      @pageSize = config.pageSize ? 9999
      @sortColumn = ko.observable (config.sortColumn ? @columns[0].col)
      @sortOrder = ko.observable (config.sortOrder ? "asc")
      @data = ko.observableArray (config.data ? [])
      null

  ko.bindingHandlers.dataTable =
    init: (el, acc) ->
      viewModel = acc()
      $(el).find("div:first").html dataTableTemplateMaker viewModel
      # ??? [A] ko.applyBindings viewModel, $(el).find("table")[0]
      # ??? [B] controlsDescendantBindings: yes
      null
    update: (el, acc) ->
      viewModel = acc()
      # ??? [C]
      null 
```

接着：

```
<div data-bind="dataTable: groupTable"> 
```

和：

```
class ViewModel
  constructor: ->
    @groupTable = new ko.dataTable.ViewModel
      id: "grouptable"
      columns: [
        { col: "num",     title: "Groep", editable: yes }
        { col: "subject", title: "Vak" }
        { col: "year",    title: "Jaar" }
        { col: "level",   title: "Niveau" }
        { col: "day",     title: "Dag" }
        { col: "hour",    title: "Uur" }
        { col: "place",   title: "Lokaal", editable: yes }
      ]
      pageSize: 10
      sortColumn: "num"
      sortOrder: "asc"
      data: [] # [D] 
```

...其中`???`标记了我的困惑所在的位置。

假设我不插入行`[A]`和`[B]`. 然后当然 KnockoutJS 告诉我绑定在我的特定视图模型的 html中都搞砸了（插入到`<div>`.回应。`[A]``[B]``[D]`

总而言之：我对抽象视图模型这样简单的事情感到很困惑。在 KnockoutJS 中没有标准的解决方案吗？（我用谷歌搜索但找不到任何东西......）还是我自己搞砸了（很可能）？;)

***更新***

我解决了这个问题（但也许它根本不是最好的/很好 - 你的意见是什么？），为了完整起见：（一个浓缩版本 - 当然你可能还想单独观察行等。 .)

*HTML*（是的，这是故意传递给绑定处理程序的字符串）

```
<div data-bind="myTableBinding: 'viewModelPropertyHoldingTableViewModel'"></div> 
```

*咖啡脚本*

```
class MainViewModel
  constructor: ->
    @viewModelPropertyHoldingTableViewModel = new TableViewModel <options>
    null

class TableViewModel
  constructor: (options) ->
    @columns = options.columns
    @rows = ko.observableArray (options.rows ? [])
    [...]
    null

tableTemplateMaker = _.template '
  <table>
    <thead>
      <tr>
        [% _.map(tableViewModel.columns, function (column) { %]
        <th>[%= column.title %]</th>
        [% } %]
      </tr>
    </thead>
    <tbody data-bind="foreach: rows">
      <tr>
        [% _.map(tableViewModel.columns, function (column) { %]
        <td data-bind="text: [%= column.id %]"></td>
        [% } %]
      </tr>
    </tbody>
  </table>
'

ko.bindingHandlers.myTableBinding =
  init: (element, viewModelPropertyNameAccessor, _, mainViewModel) ->
    tableViewModelProperty = viewModelPropertyNameAccessor()
    tableViewModel = mainViewModel[tableViewModelProperty]
    $(element).html tableTemplateMaker
      tableViewModelProperty: tableViewModelProperty
      tableViewModel: tableViewModel
    null

m = new MainViewModel
ko.applyBindings m

m.viewModelPropertyHoldingTableViewModel.data.push [...] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:21:17.970

为什么要重新发明轮子？:P

[https://github.com/CogShift/Knockout.Extensions](https://github.com/CogShift/Knockout.Extensions)

# xpath - 在文本字符串中使用括号会使 xpath 失败

> ID：10448817
> 
> 赞同：3
> 
> 时间：2012-05-04T12:29:33.327
> 
> 标签：xpath, selenium

我的问题是：是否可以编写一个 xpath，其中括号被解释为字符串的一部分？

只要我在`contains`函数中使用括号，我的 selenium 脚本就会一直失败。

例如：

```
//li/div/span[contains(text(),"Komkommer (BONUS)")] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-09T07:27:08.010

我也有同样的问题。它与编码有关。您的括号字符串可能具有与比较基数不同的编码。

# performance - 大型电子商务网站有多快？

> ID：10448819
> 
> 赞同：12
> 
> 时间：2012-05-04T12:29:40.813
> 
> 标签：performance, architecture, e-commerce, scalability

我一直在研究基于 NopCommerce 的 asp.net mvc3 电子商务应用程序。

最近，我们一直致力于提高网站的性能。该网站有超过200000个产品和1200个类别和大号。的品牌。这种努力导致了 20 到 200 倍的性能提升，但是当与亚马逊、flipkart、jabong、letsbuy、ebay、shopping.indiatimes.com 等电子商务巨头进行基准测试时，它仍然较慢。

现在看看亚马逊、Flipkart 和 Jabong 等少数网站……他们的页面以几乎零等待时间开始加载，图像和其他资源几乎是瞬间加载的。

同样对于搜索，Nop Commerce 的染色速度很慢，只要看看 FlipKart & Jabong 或亚马逊，它们的速度非常快。不知道怎么做？他们在做什么？他们是否在 db 或其他东西中执行搜索？

我的问题是他们做了什么才能有这种出色的表现？我知道他们有负载平衡服务器，内存被缓存，比如实现缓存的内存实现可能是整个站点。

但是，创建如此大型可扩展网站的最佳实践是什么？他们是怎么做到的？他们中是否有人使用任何开源电子商务平台，如 nop commerce 或 magento 作为他们的基础？还是他们都喜欢定制？

想了解如何使用最佳实践来扩展像他们这样的 Web 应用程序。（请注意，这是一个一般性问题，而不是与 nop-commerce 相关的问题，它是我们迄今为止使用的最好的电子商务应用程序之一。）

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-09T20:31:58.190

数据库层通常总是一个瓶颈，而且往往是一个重要的瓶颈。这意味着您必须有一个缓存层来最小化数据库访问并将其从关键路径中删除。当键值存储足够时，Memcached 可能是一个不错的选择。

然而，许多现实世界的场景都涉及复杂的领域模型。在这些情况下，最好使用与域对象一起工作并且可以处理嵌入式对象关系的内存数据网格。

如果您需要高可用性、弹性扩展、最大性能，并且可能希望创建事件驱动架构或在数据到达数据库之前对其进行预处理，那么内存数据网格也非常有用。这是一个很好的视频，描述了一些最大的玩家是如何做到的：http: [//youtu.be/1AR2WWaP8CE](http://youtu.be/1AR2WWaP8CE)

另一个主要优化是减少下载内容的时间，因此您还需要使用内容交付网络。从这 2 个优化开始，您可能会发现性能不再是问题。

[规范](https://stackoverflow.com/users/1385604/norm-leitman)

# jquery - Telerik RadGrid 客户端访问 FormTemplate

> ID：10448820
> 
> 赞同：0
> 
> 时间：2012-05-04T12:29:48.787
> 
> 标签：jquery, asp.net, telerik-grid

这是问题的人

我正在使用 Telerik RadGrid。内部是一个带有一些字段和复选框的 FormTemplate ......这就是它变得棘手的地方。其中一些复选框实际上会影响表单上的字段。例如：

取消选中复选框 A 将禁用下面的字段并将其清除。检查它将再次启用该字段。

我一直在网上寻找这个，当然也尝试过，但它占用了太多时间。所以我的目标是拥有一个名为 onclick 的复选框（当然可以），然后影响 RadTextBox 的可用性。

我试过使用普通的 JQuery，它确实找到了控件（基于我放在它上面的类），但这没有考虑到 Telik 为格式化等而呈现的子控件。我也尝试过通过 TableView 的编辑项......没有运气。所有脚本代码都包含在 RadCodeBlock 中，正如 Telerik 人在指南中要求您执行的那样 :) 此处的任何帮助将不胜感激，因为这个小问题让我感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:07:32.917

> 我试过使用普通的 JQuery，它确实找到了控件（基于我放在它上面的类），但这没有考虑到 Telik 为格式化等而呈现的子控件。

这就是 Telerik 控件的问题，一个 HTML 元素被呈现为三个或四个元素，以便它们可以应用它们的样式等。看看组合框是如何呈现的，你就会明白我在说什么。

如果 Telerik 没有为您提供客户端 API 来访问表单中的元素并隐藏/显示它们，您将不得不做您使用 jQuery 所做的事情，但也只需隐藏/显示为控件呈现的额外垃圾问题。

幸运的是，很容易知道那些额外的元素是什么。使用 Firebug 检查 HTML 源代码将向您准确显示它们是谁以及您需要使用哪些选择器来使用 jQuery 隐藏它们。

# google-app-engine - datanucleus-appengine 2.0 中的@Unowned orm 注释

> ID：10448822
> 
> 赞同：0
> 
> 时间：2012-05-04T12:29:56.030
> 
> 标签：google-app-engine, orm, jdo, datanucleus

@Unowned 注解的 .jdo xml 等价物是什么？如果我在域类中留下@Unowned 注释，该类的 mysql orm 会受到任何影响吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:03:59.367

放在package-gae.orm中，有一个单独的package-mysql.orm供MySQL使用

```
<extension vendor-name="datanucleus" key="gae.unowned" value="true"/> 
```

# php - PHP 正则表达式获取大写名称

> ID：10448829
> 
> 赞同：0
> 
> 时间：2012-05-04T12:30:38.087
> 
> 标签：php, regex, unicode, uppercase

我有这些名字：

```
John Stuart AGNEW
Magdi Cristiano ALLAM
Josefa AÉNDRÉS BARÉA 
Josefa ANDRES BAREA
Laima Liucija ANDRIKIENĖ 
```

我想得到所有大写字符的名字

例如，因为`John Stuart AGNEW`我想获得**AGNEW**

我遇到了问题`Josefa AÉNDRÉS BARÉA`。我想要**AÉNDRÉS BARÉA**

我使用了这个正则表达式：`(.*) (.[A-Z]{2,100} .[A-Z]{2,100})`

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T12:34:36.680

根据[这](http://www.regular-expressions.info/unicode.html) `\p{Lu}`应该匹配任何大写字母。因此，将您的正则表达式替换为如下内容：`(.*) (.\p{Lu}{2,100} .\p{Lu}{2,100})`应该可以。

我做了一些修改，这应该使您的正则表达式更加宽容。`(\p{Lu}{2,100}( \p{Lu}{2,100})?)`. 然而，我没有使用 PHP 的经验，所以我无法正确测试它。

但是，我已经在 J​​ava 环境中对其进行了测试，并且对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:39:52.933

我会使用：

```
([A-ZÁÉÍÓÚÜ]{2,}) 
```

然后使用以下方法连接匹配项：

```
$result = implode(" ", $matches); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:05:38.690

我试过这个，它可能是你需要的

```
<?php

$s = 'John Stuart AGNEW
Magdi Cristiano ALLAM
Josefa AÉNDRÉS BARÉA
Josefa ANDRES BAREA
Laima Liucija ANDRIKIENE
Ronald McDONALD
';

$pat = "/\p{Lu}{2,}.*/";
preg_match_all( $pat, $s, $ms);

foreach( $ms[0] as $m){
    echo $m . "<br />\n";
}

?> 
```

注意，像 McDONALD 这样的一些名字是混合大小写的，你也支持这些吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T13:08:12.403

你的第一个`(.*)`应该是非贪婪的，像这样：`(.*?)`，这样它就不会开始接受来自名称大写部分的字母。

然后正如其他人提到的，您可以将范围扩展`[A-Z]`到`[A-ZÁÉÍÓÚÜ]`

# java - 如何启用 使用基于 java 的注解

> ID：10448830
> 
> 赞同：39
> 
> 时间：2012-05-04T12:30:44.993
> 
> 标签：java, spring, spring-aop

我正在尝试设置没有任何 XML 的 Spring AOP。我想`<aop:aspectj-autoproxy>`在一个用`@Configuration`.

这是在 XML 文件中定义的方式：

```
<aop:aspectj-autoproxy>
<aop:include name="msgHandlingAspect" />
</aop:aspectj-autoproxy> 
```

我试图用注释我的类，`@Configuration`但`@EnableAspectJAutoProxy` 什么也没发生。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-04T13:23:36.487

您是否在同一个`@Configuration`类中创建了一个方面 bean？这是[文档的](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/context/annotation/EnableAspectJAutoProxy.html "EnableAspectJAutoProxy javadoc")建议：

```
 @Configuration
 @EnableAspectJAutoProxy
 public class AppConfig {
     @Bean
     public FooService fooService() {
         return new FooService();
     }

     @Bean // the Aspect itself must also be a Bean
     public MyAspect myAspect() {
         return new MyAspect();
     }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-06-05T10:15:06.653

我使用了公认的答案解决方案，但遇到了意想不到的问题，直到将此参数添加到配置中才明白。

**@EnableAspectJAutoProxy(proxyTargetClass = true)**

如果您在 @Controller 中使用注释，则需要以这种方式进行配置

请记住，如果您有 java 8，则需要使用大于 1.8.X 的 AspectJ 版本

```
@Configuration
@EnableAspectJAutoProxy(proxyTargetClass = true)
public class AppConfig {

    @Bean
    public AccessLoggerAspect accessLoggerAspect() {
        return new AccessLoggerAspect();
    }

} 
```

# java - 如何使用 weblogic 中定义的 Tibco JMS 模块并使用 Spring 向其发布消息

> ID：10448835
> 
> 赞同：0
> 
> 时间：2012-05-04T12:30:57.200
> 
> 标签：java, spring, weblogic, message-queue, tibco-ems

我对春天很陌生......我有一个改变，我们需要在 Tibco 队列上添加一条消息。队列在 weblogic 中的 JMS 模块下定义为外部服务器（使用连接工厂和目标设置）。

我想通过使用 SPRING 将消息从我的 java 应用程序发布到队列。

我的 spring applicationContext.xml 文件中的接线应该如何？以及如何从代码中使用它？

我看了看，没有找到表明这一点的适当教程。

有人可以指点我一个方向吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T07:26:08.293

使用以下 Spring 配置：

```
<bean id="jmsDestination" class="com.tibco.tibjms.TibjmsQueue">
    <constructor-arg value="queue.sample" />
</bean>
<bean id="jmsConnectionFactory" class="org.springframework.jms.connection.UserCredentialsConnectionFactoryAdapter">
    <property name="targetConnectionFactory" ref="tibcoConnectionFactory"/>
    <property name="username" value="admin"/>
    <property name="password" value=""/>
</bean>
<bean id="tibcoConnectionFactory" class="com.tibco.tibjms.TibjmsConnectionFactory">
    <property name="serverUrl" value="tcp://hostname:7222"/>
    <property name="userName" value="admin"/>
    <property name="userPassword" value=""/>
</bean>
<bean id="jmsProducerTemplate" class="org.springframework.jms.core.JmsTemplate">
    <property name="connectionFactory" ref="jmsConnectionFactory"/>
    <property name="defaultDestination" ref="jmsDestination"/>
</bean> 
```

然后在代码中，发布这样的消息：

```
jmsProducerTemplate.send(new MessageCreator() {
    public Message createMessage(Session session) throws JMSException {
        return session.createTextMessage(dataString);
    }
}); 
```

这将直接发布到 Tibco 队列，以使用 WebLogic 的 JNDI，请参阅这篇文章：[使用 Spring 配置 tibco jms](https://stackoverflow.com/questions/2848659/configuration-of-tibco-jms-with-spring)

# java - 使用 Java 进行 JPG 编码

> ID：10448840
> 
> 赞同：1
> 
> 时间：2012-05-04T12:31:01.937
> 
> 标签：java, image-processing, jpeg, javax.imageio

我今天偶然发现了这个问题，让我解释一下这个问题：

我有这个处理大量图像文件的 Java Web 应用程序。它只允许 JPGs 文件（我猜是公司政策......）。文件存储在某个固定位置，上传过程和缩略图生成进展顺利。图片是使用 Java 类显示的，因为公司不想显示路径。

问题是显示的一些图片是暗的；不是全黑，只是比原来上传的文件暗一点。我检查了上传的文件和缩略图，它们看起来不错，根本没有变暗。

这就是事情变得奇怪的地方：我在本地主机上测试，图片显示正确，当我在服务器上测试时，它们看起来很暗。两者之间的唯一区别是在 localhost 我在 Windows 上工作，而测试服务器是 Linux。两者都使用 JBOSS 4.2.0。

这是解决问题的方法：

```
protected ModelAndView handleRequestInternal(HttpServletRequest request, HttpServletResponse response)
        throws Exception {              

    String ruta = rutaBase + File.separator;
    String fileName=(String)request.getParameter("fileName");

    if (fileName==null) 
        fileName="";
    if (!fileName.equals("")) {
        RemoteFileClient oRemoteFileClient = new RemoteFileClient();
        ServletOutputStream output = response.getOutputStream();
        if (oRemoteFileClient.isAlive()) {
            String file2download=ruta+fileName;
            byte[] contenido=oRemoteFileClient.downloadFile(file2download);                 
            if (contenido!=null) {
                String myContentType="";
                boolean isImage=false;
                String nombreFichero = fileName.toLowerCase();
                String extension = nombreFichero.substring(nombreFichero.lastIndexOf(".")+1);
                if (extension.equals("jpg") ||
                    extension.equals("jpeg") ||
                    extension.equals("JPG") ||
                    extension.equals("JPEG")) {
                    myContentType="image/jpeg";
                    isImage=true;
                } 
                else if (extension.equals("gif") || extension.equals("GIF")) {
                    myContentType="image/gif";
                    isImage=true;
                } 
                else if (extension.equals("png") || extension.equals("PNG")) {
                    myContentType="image/png";
                    isImage=true;
                } 
                else if (extension.equals("doc") || extension.equals("DOC") || 
                            extension.equals("rtf") || extension.equals("RTF")) {
                    myContentType="application/msword";
                } 
                else if (extension.equals("bin") || 
                           extension.equals("exe")) {
                    myContentType="application/octet-stream";
                } 
                else if (extension.equals("zip")) {
                    myContentType="application/x-zip";
                } 
                else if (extension.equals("pdf")) {
                    myContentType="application/pdf";
                } 
                else if (extension.equals("txt")) {
                    myContentType="text/plain";
                } 
                else if (extension.equals("xls")) {
                    myContentType="application/ms-excel";
                } 
                else if (extension.equals("ppt")) {
                    myContentType="application/ms-powerpoint";
                }
                response.setContentType(myContentType);
                if (isImage) {
                    BufferedImage im = ImageIO.read(new ByteArrayInputStream(contenido));                           
                    JPEGImageEncoder encoder = JPEGCodec.createJPEGEncoder(output);
                    //JPEGEncodeParam param = encoder.getDefaultJPEGEncodeParam(im);
                    //param.setQuality(1.0f,true);
                    //encoder.encode(im, param);
                    encoder.encode(im);
                } else {
                    output.write(contenido);
                }
                output.flush();
                output.close();
            }
        } 
        else{
            output.println("No se puede conectar con el servidor de archivos<br>");
        }
    }

    return null;
} 
```

然后，在我需要显示图片的 JSP 上，我只是这样做：

```
<img class="pic" alt="Foto destacada" src="descargarFichero.do?fileName=<c:out value="${foto.nombre}"/>/thumb_<c:out value="${foto.nombre}"/>"/> 
```

动作“descargarFichero.do”调用我发布的方法。

我的疯狂猜测是 JPG 编码存在一些问题，但我对这些事情知之甚少，所以我很高兴听到（阅读）您的建议。

请记住，只有一些图片显示为暗，而不是全部，我正在查看有问题的文件，但还没有发现任何可疑的东西。

非常感谢

PS您可能需要的另一种方法

```
public byte[] downloadFile(String filename) {
    byte downloadfile[] = null;
    try {
        byte buffer[];
        File file = new File(filename);
        if(file.exists() || (!file.isDirectory())) {
            buffer = new byte[(int)file.length()];
            BufferedInputStream input = new BufferedInputStream(new FileInputStream(filename));
            input.read(buffer, 0, buffer.length);
            input.close();
            downloadfile = buffer;
        } else {
            //break MISSING_BLOCK_LABEL_65;
            return null;
        }
    } catch(Exception exception) {
        //System.out.println("FileImpl: " + e.getMessage());
        exception.printStackTrace();
        return null;
    }
    return downloadfile;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T10:22:01.883

遵循@EJP 和@GuillaumePolet 的建议，我这样做了：

```
...
response.setContentType(myContentType);
BufferedImage im = ImageIO.read(new ByteArrayInputStream(contenido));                           
output.write(contenido);
output.flush();
output.close();
... 
```

我跳过了 JPG 重新编码部分，它工作得很好。还使用其他评论的建议更正了一些丑陋的代码（我不在这里发布，因为它与我面临的问题实际上无关）。

非常感谢您的贡献！

# chm - 使用演示风格 vs2010 在沙堡 chm 中获得指导

> ID：10448841
> 
> 赞同：3
> 
> 时间：2012-05-04T12:31:06.870
> 
> 标签：chm, sandcastle

我使用 Sandcastle 为我的 dll 生成 chm 文件，但我想使用 VS2010 演示风格。

当我使用 VS2005 演示风格构建 chm 文件时，方法的“使用说明”如下所示：

```
Usage Note
In Visual Basic and C#, you can call this method as an instance method on any 
object of type Object. When you use instance method syntax to call this method, 
omit the first parameter. For more information, see 
Extension Methods (Visual Basic) or Extension Methods (C# Programming Guide). 
```

其中文本“扩展方法（Visual Basic）”和“扩展方法（C# 编程指南）”都是指向 MSDN 站点的链接。

但是当我使用 VS2010 演示风格（这是我更改的唯一属性）时，我得到了这个：

```
Usage Note
In Visual Basic and C#, you can call this method as an instance method on any
object of type Object. When you use instance method syntax to call this method,
omit the first parameter. For more information, see
[b8020aae-374d-46a9-bcb7-8cc2390b93b6] or [175ce3ff-9bbf-4e64-8421-faeb81a0bb51]. 
```

所以没有链接，但指南。问题是如何获得 VS2010 风格的链接，就像 VS2005 风格一样。

# objective-c - Mac 鼠标/触控板速度以编程方式

> ID：10448843
> 
> 赞同：3
> 
> 时间：2012-05-04T12:31:10.343
> 
> 标签：objective-c, macos, cocoa, iokit

我正在尝试更改我正在处理的应用程序的鼠标跟踪速度（注意：不是加速）。我到处寻找一种方法来做到这一点，但找不到任何东西。我怀疑这与我在 IOKit/hidsystem 框架上的这个函数中给出的值有关：

```
IOHIDSetAccelerationWithKey(handle, CFSTR(kIOHIDMouseAccelerationType), mouseAcceleration); 
```

作为 mouseAcceleration 值，我怀疑有一个定义加速度和速度的十六进制值。

有没有人遇到过这个问题并可以帮助我？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-09-17T11:39:01.960

快速工作示例：

```
func getAcceleration() -> Double {
    var speed:Double = 0
    IOHIDGetAccelerationWithKey(NXOpenEventStatus(), kIOHIDTrackpadAccelerationType, &speed)
    return speed
}

func setAcceleration(_ speed: Double) {
    IOHIDSetAccelerationWithKey(NXOpenEventStatus(), kIOHIDTrackpadAccelerationType, speed)
} 
```

资料来源： http: [//lists.apple.com/archives/usb/2004/Aug/msg00056.html](http://lists.apple.com/archives/usb/2004/Aug/msg00056.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-01T12:10:07.353

您可以尝试制作[NSTrackingArea](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSTrackingArea_class/Reference/Reference.html)并在获得新的鼠标位置后更改鼠标位置。

# database - 以下程序的数据存储

> ID：10448850
> 
> 赞同：0
> 
> 时间：2012-05-04T12:31:24.260
> 
> 标签：database, dictionary, key

我有一个问题，我需要根据模糊逻辑评估显示最佳解决方案。它说“如果解决方案 x 具有低资源浪费和低功耗，那么 x 是一个很好的解决方案”

我得到了所有这些 x 解决方案的资源浪费和功耗的所有值。我想将这些资源浪费和功耗存储到数据存储中，其中 x 可以说是该存储的关键，并比较 x 解决方案的所有值......无论哪个解决方案资源浪费和低功耗都将显示“x”或键 x 作为最佳解决方案。

我尝试查看字典和哈希表，但它们使用形式 ("key", "value"); 但我想要的可能是（“key”、“value_resource”、“value_power”）。我可以为此使用哪种数据存储，或者我该如何实现？

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:39:40.083

您的要求有点不清楚，但是键值存储将允许您存储键，并且该对象同时具有 value_resource 和 value_power 的值对象，因此可以对存储中的对象进行查询以基于返回结果价值。

您可以使用 sql 解决方案或 no-sql 解决方案来执行此操作。

# perl - XML::Compile::SOAP 和错误调用

> ID：10448851
> 
> 赞同：1
> 
> 时间：2012-05-04T12:31:25.433
> 
> 标签：perl, soap, fault

我在尝试处理 SOAP 故障时遇到问题，我无法确定它是在我的一端还是另一端。

我正在使用 WSDL 文件，并且我有以下代码：

```
use XML::Compile::WSDL11;
use XML::Compile::SOAP11;
use XML::Compile::Transport::SOAPHTTP;
my $wsdlXml = XML::LibXML->new->parse_file("pathtowsdl");
my $wsdl = XML::Compile::WSDL11->new($wsdlXml);
my $call = $wsdl->compileClient('Add');
my %param = ('param1'   =>  'xxx',
             'param2'   =>  'xxxx',
             'param3'   =>  'xxxx',
             'Name'     =>  {
                'first' =>  'xxx',
                'last'  =>  'xxx',
              });
my ($response, $trace) = $call->(\%param); 
```

如果我使用正确的参数调用它，那么一切都会按照您的想法进行，如果哈希引用具有我正在寻找的结果，则 $response。

但是，如果我造成了错误，那么我将一无所获。$response 中没有任何内容（根据 Data::Dumper）。

问题是，$trace 里面确实有肥皂信封。肥皂信封在成功和失败/错误的 $trace 中都有，但只有在成功时，$response 中才有东西，在失败时，信封中的“faultType”和“faultData”应该在 $response .

难道我做错了什么？从我读过的所有内容来看，听起来我不应该做任何不同的事情，在出现故障的情况下，我们应该有类似 $response->{'fault'} 的东西，但就像我说的，$response 是空的。

关于我应该寻找什么的任何想法？

蒂亚！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T14:26:04.860

可能不是您问题的真正答案，但我还不能发表评论，所以这里有一个想法：尝试使用[soapUI](http://www.soapui.org/)（他们也有一个免费版本，足以满足您的目标）或类似软件并测试您的 SOAP 服务以确保问题出在您的代码中，而不是在 SOAP 服务端。

# c# - 网格视图中的行更新问题

> ID：10448853
> 
> 赞同：1
> 
> 时间：2012-05-04T12:31:32.157
> 
> 标签：c#, .net, gridview

我正在使用带有自动生成列 =true 的网格视图；当我更新网格时

```
 protected void UpdateRecord(object sender, GridViewUpdateEventArgs e)
    { 
     TextBox tPropertyId  = (TextBox)row.FindControl("PropertyId");
    } 
```

正在被调用。问题是那个，`tPropertyId`正在获取空值，当我这样做时 `tPropertyId.Text`，我得到空引用异常。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:42:29.847

Please try this

```
protected void UpdateRecord(object sender, GridViewUpdateEventArgs e)
{ 
    if (e.Row.RowType != DataControlRowType.Footer) return;
    TextBox textBox = new TextBox();
    e.Row.Cells[0].Controls.Add(textBox);
} 
```

# javascript - 有什么方法可以使用 javascript (jquery) 使元素的行为**完全**就像被点击一样（一种独特的情况）

> ID：10448857
> 
> 赞同：3
> 
> 时间：2012-05-04T12:31:47.087
> 
> 标签：javascript, jquery, html

当我点击一个完全不同的分隔线时，我想让 ' `select`' 元素表现得好像它被点击了一样。是否有可能让它表现得好像它没有被点击一样？

这是我的代码 [http://jsfiddle.net/fiddlerOnDaRoof/B4JUK/](http://jsfiddle.net/fiddlerOnDaRoof/B4JUK/)

```
$(document).ready(function () {
    $("#arrow").click(function () {
        $("#selectCar").click() // I also tried trigger("click");
    });
}); 
```

到目前为止，它既不适用`.click();` 也不适用`.trigger("click");`

**更新：**

据我目前的理解，答案是否定的，你不能。尽管单击复制了该功能，但它不适用于像这样的某些示例。如果有人知道这是为什么，请在下面发布答案，我会接受它作为最佳答案。最好包括它不能正常工作的例子。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T12:32:44.077

您可以使用触发器（事件）功能，如 `("selector").trigger("click")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T12:32:58.400

您可以[`click`](http://api.jquery.com/click/)不带参数调用该函数，这会触发人为点击。例如：

```
$("selector for the element").click(); 
```

这也会触发 jQuery 处理程序和（我相信）DOM0 处理程序。~~我不认为它会触发~~它不会触发通过 DOM2 样式`addEventListener`/`attachEvent`调用添加的处理程序，正如您在此处看到的那样：[Live example](http://jsbin.com/uyujev) | [资源](http://jsbin.com/uyujev/edit)

```
jQuery(function($) {

  $("#target").click(function() {
    display("<code>click</code> received by jQuery handler");
  });
  document.getElementById("target").onclick = function() {
    display("<code>click</code> received by DOM0 handler");
  };
  document.getElementById("target").addEventListener(
    'click', 
    function() {
      display("<code>click</code> received by DOM2 handler");
    },
    false
  );

  display("Triggering click");
  $("#target").click();

  function display(msg) {
    $("<p>").html(msg).appendTo(document.body);
  }
}); 
```

这是一个使用DOM0 处理程序的属性机制[的版本](http://jsbin.com/uyujev/2)（[source](http://jsbin.com/uyujev/2/edit)） ；`onclick="..."`它也会以这种方式触发。

另请注意，它可能不会执行默认操作；例如[这个例子](http://jsbin.com/uyujev/3)（[source](http://jsbin.com/uyujev/3/edit)）使用一个链接，这个链接没有被关注。

* * *

如果您可以控制附加到元素的处理程序，这通常不是一个很好的设计选择；相反，理想情况下，您应该执行您想要执行的操作，然后在单击元素时以及在您想要执行该操作的任何其他时间*调用该函数。*但是，如果您尝试触发其他代码附加的处理程序，您可以尝试模拟点击。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T12:33:14.777

是的。

```
$('#yourElementID').click(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T12:53:47.137

看到你jsfiddle，先学会使用这个工具。

您选择了 MooTools 而不是 jQuery。（[在这里](http://jsfiddle.net/B4JUK/1/)更新）

现在，在选择上触发“点击”事件不会有太大作用。我猜您希望第二个选择与第一个选择同时展开。

据我所知，这是不可能的。

如果没有，请尝试选择时的“更改”事件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T12:33:34.243

如果您使用 jquery 添加了事件侦听器，则可以使用 .trigger();

$('#my_element').trigger('click');

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T12:33:47.573

当然，您可以使用以下方法触发对某物的点击：

```
$('#elementID').trigger('click'); 
```

看看这里的文档：http: [//api.jquery.com/trigger/](http://api.jquery.com/trigger/)

# android - 在活动之间设置和获取用户名

> ID：10448861
> 
> 赞同：0
> 
> 时间：2012-05-04T12:31:55.183
> 
> 标签：android

这是场景。我有：

登录活动

一个会话，我有方法 getUsername() 和 setUsername()

应该获取用户名的 GET 活动。

在登录活动中成功登录后，我有这行代码

```
public class MainActivity extends Activity {
Session obj = new Session(); 
```

然后在另一个名为 tryLogin() 的方法中，我有这个

```
obj.setUsername(mUsername); 
```

在会话活动中，我有以下代码：

```
public class Session extends Application {
String username;
int userid;

@Override
public void onCreate() {
    // TODO Auto-generated method stub
    super.onCreate();
}

public void setUsername(String user)
{
    this.username = user;
}
public String getUsername()
{
    return this.username;
} 
```

在获得用户名的活动中，我有这一行。

```
 Session obj = new Session();
    username =  obj.getUsername(); 
```

这不能正常工作。但是，如果我在 SESSION 活动中手动将“用户名”设置为某个字符串，如下所示：

```
public class Session extends Application {
    String username = "manually set the string"; 
```

然后 GET Activity 获取用户名就好了。因此，我认为将问题范围缩小到登录活动中的 setUsername 是安全的。

那么我在这里做错了什么？

非常感谢。// 安卓初学者

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:35:14.663

尝试：

```
public class Session extends Application {
     public static String username; 
```

在您的会话活动中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:38:23.623

我认为你应该在 Session 类中设置方法的值，它将 Application 扩展为

```
((Session) yourActivityName.getApplication()).setUserName("user Nmae"); 
```

并以

```
((Session) yourActivityName.getApplication()).getUserName(); 
```

# lastinsertid - 如何从 YII 的 db 行中查找最新插入的行？

> ID：10448865
> 
> 赞同：1
> 
> 时间：2012-05-04T12:32:31.037
> 
> 标签：lastinsertid, yii

我有一个表“backup_history”，它在我的数据库中存储站点备份详细信息，其中包含以下字段：

```
id
site_id
backup_file_name
file_size
by (cron/manual)
datetime 
```

对于下一次备份，我需要找出站点最近的最后一次备份日期 n 时间，并与设置（每日备份）进行比较，并通过 cron 运行下一次备份。

但是我无法找到最后插入的行，其中
**site_id = $id AND by = 'cron' AND datetime = 'this will be recent date-time'**

```
$lastbackup = BackupHistory::model()->findByAttributes(array('site_id' => $single_site->id, 'by' => 'cron')); 
```

此代码提供一行，但不提供最近的日期 n 时间。
可能会出错，所以请提出一些解决方案。谢谢 ！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T12:57:57.627

你需要[`order by`](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#order-detail)你的结果。所以试试这个：

```
$lastbackup = BackupHistory::model()->findByAttributes(array('site_id' => $single_site->id, 'by' => 'cron'),array('order'=>'datetime')); 
```

# c - 没有使用 Curl C API 恢复下载

> ID：10448874
> 
> 赞同：0
> 
> 时间：2012-05-04T12:32:57.660
> 
> 标签：c, curl, interface, libcurl

1.  我正在尝试恢复由于 Internet 故障而失败的下载。我用来检查 curl 下载是否成功的函数是：

    ```
    curl_multi_info_read 
    ```

    `CURLE_COULDNT_CONNECT`当 Internet 丢失时第一次调用此函数时，它会返回正确的错误代码 ( )。如果我再次尝试调用它，它会返回 NULL 指针，这意味着没有消息。实际上，我正在使用返回错误代码来检查是否存在互联网连接。这让我很困扰，因为如果没有互联网，它在第二次调用时不会返回任何错误代码。谁能告诉我如何使用此功能检查返回码，因为此错误码（`CURLE_COULDNT_CONNECT`）对我检查互联网状态非常重要，因此在我恢复连接时从停止的地方恢复下载。 ...

2.  为了恢复下载，我正在使用

    ```
    curl_easy_setopt (curl, CURLOPT_RESUME_FROM, InternalOffset); 
    ```

    每次我失去互联网连接时，我都会调用此函数来设置选项，以便在互联网连接恢复时可以恢复下载......

* * *

[丹尼尔斯坦伯格](https://stackoverflow.com/users/93747/daniel-stenberg)的注释：

以下是有关平台和 libcurl 版本的一些详细信息：

*   curl 版本 - libcurl 7.21.6
*   平台 - Linux (Ubuntu)

注释：

1.  是的。你的看法是对的。我从堆栈中删除了简单句柄，通过设置新选项 ( `curl_easy_setopt(curl, CURLOPT_RESUME_FROM, InternalOffset)`) 再次添加到多句柄，最后我做了多执行。如果他们没有互联网连接，它会返回正确的错误。我的问题是：每次我失去互联网连接时是否需要重复上述步骤才能得到正确的错误？如果我不执行这些步骤，**curl_multi_info_read**函数将始终返回 NULL。

2.  我所做的另一项观察是，当互联网连接恢复时，下载开始恢复。它从之前停止的位置开始下载。这对我来说是一个惊喜。curl 是否在内部负责在重新连接到 Internet 时恢复下载。如果这是对的吗？我真的需要小心恢复下载或在正确处理它时离开卷曲吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T01:16:40.947

您没有明确说明您使用的是`multi interface`还是`easy interface`可能值得一提的是您正在使用什么平台以及`libcurl`您正在使用什么等。

下面是*最小*卷曲`easy`和`multi`针对`libcurl/7.21.6`.

我很高兴地拔掉了网线，停止了 http 服务器等等~它似乎可以应付。

这些可能会帮助您：

```
curl_easy_setopt(curl, CURLOPT_LOW_SPEED_LIMIT, dl_lowspeed_bytes); //bytes/sec
curl_easy_setopt(curl, CURLOPT_LOW_SPEED_TIME, dl_lowspeed_time); //seconds
curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L); 
```

**注意：**当连接断开时，您必须非常努力地*摔倒* `curl`。这是设计使然，但令一些人感到惊讶。

## 编辑

我怀疑你会想要使用`CURLOPT_TIMEOUT`. 这将使传输超时。如果您的下载量很大，那么几乎肯定会花费比您准备等待找出网络连接是否有问题的时间更长的时间 - 超时会受到影响。相比之下，`CURLOPT_LOW_SPEED_TIME`即使经过数小时的传输时间，超时也可能永远不会受到影响。

curltest_easy.c：

```
/*----------------------------------------------------
curltest_easy.c 
WARNING: for test purposes only ~ 
*/
#include <stdio.h>
#include <unistd.h>
#include <curl/curl.h>
#include <curl/types.h>
#include <curl/easy.h>
#include <sys/stat.h>

static int dl_progress(void *clientp,double dltotal,double dlnow,double ultotal,double ulnow)
{
    if (dlnow && dltotal)
        printf("dl:%3.0f%%\r",100*dlnow/dltotal); //shenzi prog-mon 
    fflush(stdout);    
    return 0;
}

static size_t dl_write(void *buffer, size_t size, size_t nmemb, void *stream)
{    
    return fwrite(buffer, size, nmemb, (FILE*)stream); 
}

int do_dl(void) 
{
    CURL *curl;
    FILE *fp;
    CURLcode curl_retval;
    long http_response;
    double dl_size;
    int retval=0;
    long dl_lowspeed_bytes=1000; //1K
    long dl_lowspeed_time=10; //sec        
    /*put something biG here, preferably on a server that you can switch off at will ;) */
    char url[] = {"http://fc00.deviantart.net/fs26/f/2008/134/1/a/Dragon_VII_by_NegativeFeedback.swf"};
    char filename[]={"blah.dl"};

    struct stat st={0};    
    if (!stat(filename, &st));    
    printf("st.st_size:[%ld]\n", st.st_size);  

    if(!(fp=fopen(filename, "ab"))) /*append binary*/
      return 1; 

    curl_global_init(CURL_GLOBAL_DEFAULT);   
    curl = curl_easy_init();

    if (curl) 
    {   
        //http://linux.die.net/man/3/curl_easy_setopt
        curl_easy_setopt(curl, CURLOPT_URL, url);

        /*callbacks*/
        curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, dl_write);
        curl_easy_setopt(curl, CURLOPT_PROGRESSFUNCTION, dl_progress);
        curl_easy_setopt(curl, CURLOPT_NOPROGRESS, 0);

        /*curl will keep running -so you have the freedom to recover 
        from network disconnects etc in your own way without
        distrubing the curl task in hand. ** this is by design :p ** */ 
        //curl_easy_setopt(curl, CURLOPT_TIMEOUT, 60);          
        //curl_easy_setopt(curl, CURLOPT_CONNECTTIMEOUT, 30);
        /*set up min download speed threshold & time endured before aborting*/
        curl_easy_setopt(curl, CURLOPT_LOW_SPEED_LIMIT, dl_lowspeed_bytes); //bytes/sec
        curl_easy_setopt(curl, CURLOPT_LOW_SPEED_TIME, dl_lowspeed_time); //seconds while below low spped limit before aborting

        curl_easy_setopt(curl, CURLOPT_WRITEDATA, fp);
        curl_easy_setopt(curl, CURLOPT_RESUME_FROM,st.st_size);

        /*uncomment this to get curl to tell you what its up to*/
        //curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);

        if(CURLE_OK != (curl_retval=curl_easy_perform(curl)))
        {                      
            printf("curl_retval:[%d]\n", curl_retval);
            switch(curl_retval) 
            {
                //Transferred a partial file
                case CURLE_WRITE_ERROR: //can be due to a dropped connection
                break;

                //all defined in curl/curl.h 

                default: //suggest quitting on unhandled error
                retval=0;
            };    

            curl_easy_getinfo(curl, CURLINFO_CONTENT_LENGTH_DOWNLOAD, &dl_size);
            printf("CURLINFO_CONTENT_LENGTH_DOWNLOAD:%f\n", dl_size);

            curl_retval=curl_easy_getinfo(curl, CURLINFO_RESPONSE_CODE, &http_response);

            //see: http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html
            printf("CURLINFO_RESPONSE_CODE:%ld\n", http_response);

            switch(http_response)
            {
            case 0: //eg connection down  from kick-off ~suggest retrying till some max limit
            break;

            case 200: //yay we at least got to our url
            break;

            case 206:
            case 416: //http://www.checkupdown.com/status/E416.html
            printf("ouch! you might want to handle this & others\n"); 

            default: //suggest quitting on an unhandled error
            retval=0;
            };            
        }
        else
        {
            printf("our work here is done ;)\n");
            retval=2;
        }

        if (fp)
            fclose(fp);

        if (curl)
            curl_easy_cleanup(curl);
    }

    printf("retval [%d]\n", retval);
    return retval;
}

int main(void) 
{
    while (!do_dl())
    {
        usleep(5000);
    }

    return 0;
}

/* notes ----

$sudo apt-get install libcurl4-gnutls-dev
$ curl-config --libs
-L/usr/lib/i386-linux-gnu -lcurl -Wl,-Bsymbolic-functions

#oook. lets do it:
$ gcc -o curltest_easy curltest_easy.c -L/usr/lib/i386-linux-gnu -lcurl -Wl,-Bsymbolic-functions
$ ./curltest
*/ 
```

curltest_multi.c：

```
/*----------------------------------------------------
curltest_mult1.c
WARNING: for test purposes only ~
*/
#include <stdio.h>
#include <unistd.h>
#include <curl/curl.h>
#include <curl/types.h>
#include <curl/easy.h>
#include <sys/stat.h>

typedef struct S_dl_byte_data
{
    double new_bytes_received;  //from the latest request
    double existing_filesize;
} dl_byte_data, *pdl_byte_data;

static int dl_progress(pdl_byte_data pdata,double dltotal,double dlnow,double ultotal,double ulnow)
{
    /*dltotal := hacky way of getting the Content-Length ~ less hacky would be to first
    do a HEAD request & then curl_easy_getinfo with CURLINFO_CONTENT_LENGTH_DOWNLOAD*/
    if (dltotal && dlnow)
    {
        pdata->new_bytes_received=dlnow;
        dltotal+=pdata->existing_filesize;
        dlnow+=pdata->existing_filesize;
        printf(" dl:%3.0f%% total:%.0f received:%.0f\r",100*dlnow/dltotal, dltotal, dlnow); //shenzi prog-mon
        fflush(stdout);
    }
    return 0;
}

static size_t dl_write(void *buffer, size_t size, size_t nmemb, void *stream)
{
    return fwrite(buffer, size, nmemb, (FILE*)stream);
}

////////////////////////
int do_dl(void)
{
    CURLM *multi_handle;
    CURL *curl;
    FILE *fp;
    CURLcode curl_retval;
    int retval=0;
    int handle_count=0;
    double dl_bytes_remaining, dl_bytes_received;
    dl_byte_data st_dldata={0};
    char curl_error_buf[CURL_ERROR_SIZE]={"meh"};
    long dl_lowspeed_bytes=1000, dl_lowspeed_time=10; /* 1KBs for 10 secs*/

    /*put something biG here, preferably on a server that you can switch off at will ;) */
    char url[] = {"http://fc00.deviantart.net/fs26/f/2008/134/1/a/Dragon_VII_by_NegativeFeedback.swf"};

    char outfilename[]={"blah.swf"}, filename[]={"blah.dl"};
    struct stat st={0};

    if (!(fp=fopen(filename, "ab")) || -1==fstat(fileno(fp), &st)) //append binary
      return -1;

    if (curl_global_init(CURL_GLOBAL_DEFAULT))
      return -2;

    if (!(multi_handle = curl_multi_init()))
      return -3;

    if (!(curl = curl_easy_init()))
      return -4;

    st_dldata.new_bytes_received=st_dldata.existing_filesize=st.st_size;

    //http://curl.haxx.se/libcurl/c/curl_easy_setopt.html
    curl_easy_setopt(curl, CURLOPT_URL, url);

    /*callbacks*/
    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, dl_write);
    curl_easy_setopt(curl, CURLOPT_PROGRESSFUNCTION, dl_progress);
    curl_easy_setopt(curl, CURLOPT_PROGRESSDATA, &st_dldata);
    curl_easy_setopt(curl, CURLOPT_NOPROGRESS, 0);

    /*curl will keep running -so you have the freedom to recover from network disconnects etc
    in your own way without distrubing the curl task in hand. ** this is by design :p **
    The follwoing sets up min download speed threshold & time endured before aborting*/
    curl_easy_setopt(curl, CURLOPT_LOW_SPEED_LIMIT, dl_lowspeed_bytes); //bytes/sec
    curl_easy_setopt(curl, CURLOPT_LOW_SPEED_TIME, dl_lowspeed_time); //seconds while below low spped limit before aborting
    //alternatively these are available in libcurl 7.25
    //curl_easy_setopt(curl, CURLOPT_TCP_KEEPALIVE,1L);
    //curl_easy_setopt(curl, CURLOPT_TCP_KEEPIDLE,10);
    //curl_easy_setopt(curl, CURLOPT_TCP_KEEPINTVL,10);

    curl_easy_setopt(curl, CURLOPT_WRITEDATA, fp);

    /*uncomment this to get curl to tell you what its up to*/
    //curl_easy_setopt(curl, CURLOPT_VERBOSE, 1L);

    curl_easy_setopt(curl, CURLOPT_ERRORBUFFER, curl_error_buf);

    do
    {
        if (st_dldata.new_bytes_received) //set the new range for the partial transfer if we have previously received some bytes 
        {
            printf("resuming d/l..\n");
            fflush(fp);
            //get the new filesize & sanity check for file; on error quit outer do-loop & return to main
            if (-1==(retval=fstat(fileno(fp), &st)) || !(st_dldata.existing_filesize=st.st_size)) break; 
            //see also: CURLOPT_RANGE for passing a string with our own X-Y range
            curl_easy_setopt(curl, CURLOPT_RESUME_FROM, st.st_size);
            st_dldata.new_bytes_received=0;
        }
        printf("\n\nbytes already received:[%.0f]\n", st_dldata.existing_filesize);

        //re-use the curl handle again & again & again & again... lol
        curl_multi_add_handle(multi_handle, curl);

        do //curl_multi_perform event-loop
        {
            CURLMsg *pMsg;
            int msgs_in_queue;

            while (CURLM_CALL_MULTI_PERFORM == curl_multi_perform(multi_handle, &handle_count));

            //check for any mesages regardless of handle count
            while(pMsg=curl_multi_info_read(multi_handle, &msgs_in_queue))
            {
                long http_response;

                printf("\nmsgs_in_queue:[%d]\n",msgs_in_queue);
                if (CURLMSG_DONE != pMsg->msg)
                {
                    fprintf(stderr,"CURLMSG_DONE != pMsg->msg:[%d]\n", pMsg->msg);
                }
                else
                {
                    printf("pMsg->data.result:[%d] meaning:[%s]\n",pMsg->data.result,curl_easy_strerror(pMsg->data.result));
                    if (CURLE_OK != pMsg->data.result) printf("curl_error_buf:[%s]\n", curl_error_buf);
                    switch(pMsg->data.result)
                    {
                    case CURLE_OK: ///////////////////////////////////////////////////////////////////////////////////////
                    printf("CURLE_OK: ");
                    curl_easy_getinfo(pMsg->easy_handle, CURLINFO_CONTENT_LENGTH_DOWNLOAD, &dl_bytes_remaining);
                    curl_easy_getinfo(pMsg->easy_handle, CURLINFO_SIZE_DOWNLOAD, &dl_bytes_received);
                    if (dl_bytes_remaining == dl_bytes_received)
                    {
                        printf("our work here is done ;)\n");
                        rename(filename, outfilename);
                        retval=1;
                    }
                    else
                    {
                        printf("ouch! st_dldata.new_bytes_received[%f]\n",st_dldata.new_bytes_received);
                        printf("ouch! dl_bytes_received[%f] dl_bytes_remaining[%f]\n",dl_bytes_received,dl_bytes_remaining);
                        retval=dl_bytes_received < dl_bytes_remaining ? 0 : -5;
                    }
                    break; /////////////////////////////////////////////////////////////////////////////////////////////////

                    case CURLE_COULDNT_CONNECT:      //no network connectivity ?
                    case CURLE_OPERATION_TIMEDOUT:   //cos of CURLOPT_LOW_SPEED_TIME
                    case CURLE_COULDNT_RESOLVE_HOST: //host/DNS down ?
                    printf("CURMESSAGE switch handle_count:[%d]\n",handle_count);
                    break; //we'll keep trying

                    default://see: http://curl.haxx.se/libcurl/c/libcurl-errors.html
                    handle_count=0;
                    retval=-5;
                    };

                    //see: http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html
                    curl_retval=curl_easy_getinfo(pMsg->easy_handle, CURLINFO_RESPONSE_CODE, &http_response);
                    printf("CURLINFO_RESPONSE_CODE HTTP:[%ld]\n", http_response);
                    switch(http_response)
                    {
                    case 0:   //eg connection down  from kick-off ~suggest retrying till some max limit
                    case 200: //yay we at least got to our url
                    case 206: //Partial Content
                    break;

                    case 416:
                    //cannot d/l range ~ either cos no server support
                    //or cos we're asking for an invalid range ~ie: we already d/ld the file
                    printf("HTTP416: either the d/l is already complete or the http server cannot d/l a range\n");
                    retval=2;

                    default: //suggest quitting on an unhandled error
                    handle_count=0;
                    retval=-6;
                    };
                }
            }

            if (handle_count) //select on any active handles
            {
                fd_set fd_read={0}, fd_write={0}, fd_excep={0};
                struct timeval timeout={5,0};
                int select_retval;
                int fd_max;

                curl_multi_fdset(multi_handle, &fd_read, &fd_write, &fd_excep, &fd_max);
                if (-1 == (select_retval=select(fd_max+1, &fd_read, &fd_write, &fd_excep, &timeout)))
                {
                    //errno shall be set to indicate the error
                    fprintf(stderr, "yikes! select error :(\n");
                    handle_count=0;
                    retval=-7;
                    break;
                }
                else{/*check whatever*/}
            }

        } while (handle_count);

        curl_multi_remove_handle(multi_handle,curl);
        printf("continue from here?");
        getchar();        
    }
    while(retval==0);

    curl_multi_cleanup(multi_handle);
    curl_easy_cleanup(curl);
    curl_global_cleanup();
    if (fp) fclose(fp);

    return retval;
}

////////////////////////
int main(void)
{
    int retval;
    printf("\n\ncurl_multi d/l test ~curl version:[%s]\n", curl_version());
    while (1!=(retval=do_dl()))
    {
        printf("retval [%d] continue?\n\n", retval);
        printf("continue?");
        getchar();
    }
    printf("\nend of test!\n\n", retval);
    return retval;
}

/* notes ----

$sudo apt-get install libcurl4-gnutls-dev
$curl-config --libs
-L/usr/lib/i386-linux-gnu -lcurl -Wl,-Bsymbolic-functions

#oook. lets do it:
$gcc -o curltest_multi curltest_multi.c -L/usr/lib/i386-linux-gnu -lcurl -Wl,-Bsymbolic-functions
$./curltest_multi

*/ 
```

您可能要记住`blah.dl`在开始全新测试之前删除该文件。该程序故意不这样做，因此您可以预先截断现有文件以进行测试；）

**注意：**对于这样的事情，您可能不应该*只是依赖`CURLE_COULDNT_CONNECT`〜您的代码应该主要是错误处理（如果您的程序严格供个人使用，则可能更少）

## 编辑

我更新了 curtest_multi.c 来演示`easy_handle`重用。

***请*注意**[文档](http://curl.haxx.se/libcurl/c/libcurl-multi.html)中的以下引用**：**

> 单次传输完成后，简单句柄仍会添加到多堆栈中。您需要先使用 curl_multi_remove_handle(3) 删除简单句柄，然后使用 curl_easy_cleanup(3) 将其关闭，或者可能为其设置新选项并使用 curl_multi_add_handle(3) 再次添加以开始另一次传输。

# c# - 是否可以通过工具箱自定义控件正确生成代码？

> ID：10448875
> 
> 赞同：2
> 
> 时间：2012-05-04T12:32:57.957
> 
> 标签：c#, asp.net, webforms, code-generation, toolbox

好的，长话短说，我正在开发一个 .NET WEBFORMS 项目，该项目能够通过 ASPX 表单创建 ASPX 页面，该表单基本上是一个拖放控件页面，我们可以说，这似乎是一个基本但功能可接受的页面/向导/aspx-creator。

好吧，现在我的上级认为这种方法不是一个有价值的解决方案，我不知道为什么，他们开始思考，可以通过添加到工具箱的自定义控件来实现，而不是这个 ASPX 创建者表单。

所以，我的疑问是……这可能吗？或者更好，这是一个合理的解决方案吗？我的意思是，我已经发现的第一个缺点是事实似乎无法通过拖放方法生成 CodeBehind 代码。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:54:09.243

[自定义控件](http://msdn.microsoft.com/en-us/library/yhzc935f.aspx)

这个 MDSN 演练教你如何为 asp 制作自定义 web 控件。这些将能够出现在您的工具箱中，并且可以拖到相应的位置，这是您要找的东西吗？

编辑：重新阅读它看起来您希望能够拖入一些代码并提示某些区域进行编辑，这可以使用片段来完成。如果您键入 propg 或 propfull 并两次制表符，它会构造该代码并告诉您要编辑哪些位？你可以制作自己的片段！ [创建自定义片段](http://msdn.microsoft.com/en-us/library/ms165393%28v=vs.80%29.aspx) 失败的 msdn 教程再次进行救援！

# php - cURL STDERR 不工作

> ID：10448877
> 
> 赞同：1
> 
> 时间：2012-05-04T12:32:59.617
> 
> 标签：php, curl, stderr

我目前正在编写一个 PHP 类，它接收由 firefox 插件 tamperdata 导出的 XML 文件，并让您在代码中尽可能多地控制它们。这基本上是一个 cURL 包装器，完整的源代码可以在这里找到：[https ://github.com/tstrijdhorst/TamperCurl](https://github.com/tstrijdhorst/TamperCurl)

我的问题是我一辈子都无法将 STDERR 输出到文件中。我在其他代码中使用 cURL 做了很多次，我似乎从来没有遇到任何问题，但现在它根本没有向文件写入任何内容。

这是我初始化它的地方：

```
 if($this->stderrLocation != null)
    {           
        $handle = fopen($this->stderrLocation,'a+');
        curl_setopt($this->curlSession, CURLOPT_STDERR, $handle);
        curl_setopt($this->curlSession, CURLOPT_VERBOSE, 2); //Verbosity 2 to actually log something to STDERR...
    } 
```

实例变量 stderrLocation 由该函数设置（是的，我用调试器检查过，它具有我希望它具有的值）：

```
public function setOptions($options)
{
        foreach($options as $option => $value)
        {
            switch(strtolower($option))
            {
                case('cookiejarlocation'):
                    $this->setCookieJarLocation($value);
                    break;
                case('stderr'):
                    $this->setSTDERR($value);
                    break;
            }
        }
} 
```

该值在构造函数中传递，如下所示：

```
 $tamperCurl = new TamperCurl('headers.xml',array('stderr' => '/home/shokora/stderr.txt', 'cookieJarLocation' => $this->cookieLocation)); 
```

当我使用调试器查看时，它不会跳过代码，它实际上会进入函数调用。该文件也存在，甚至是 chmod 777 所以写入该文件应该没有问题：

shokora@shokora ~ $ ls -la | grep stderr.txt

-rwxrwxrwx 1 shokora shokora 0 2012-05-04 13:22 stderr.txt

有人知道这里有什么魔法吗？这真的让我很烦，因为我真的需要 STDERR 输出：r

# tkinter - 如何将初始窗口大小设置为 tkinter 中的最小窗口大小？

> ID：10448882
> 
> 赞同：30
> 
> 时间：2012-05-04T12:33:14.810
> 
> 标签：tkinter

我的理解是，在`__init__`方法中初始化所有框架和小部件后，tkinter 窗口会调整大小以适应所有这些组件。

我想将窗口的初始化大小设置为其最小大小。我希望能够最大化和缩放窗口更大，但我不希望窗口小到足以开始隐藏小部件。

我该如何做到这一点？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-05-04T15:49:47.133

你也可以在不进入主循环的情况下立即强制更新，使用如下：

```
root = Tk()
# set up widgets here, do your grid/pack/place
# root.geometry() will return '1x1+0+0' here
root.update()
# now root.geometry() returns valid size/placement
root.minsize(root.winfo_width(), root.winfo_height()) 
```

effbot tkinterbook上[update()的描述：](http://effbot.org/tkinterbook/widget.htm#Tkinter.Widget.update-method)

> 处理所有挂起的事件，调用事件回调，完成任何挂起的几何管理，根据需要重绘小部件，并调用所有挂起的空闲任务。这个方法应该小心使用，因为如果从错误的地方调用它可能会导致非常糟糕的竞争条件（例如，从事件回调中，或者从可以以任何方式从事件回调中调用的函数等） .)。如有疑问，请改用 update_idletasks。

在尝试弄清楚如何在跳入主循环之前获取小部件的大小/位置之类的事情时，我已经使用了很多。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-10-21T22:08:16.507

我知道这个问题很老，但这是另一种方式：

```
root = Tk()
root.minsize(foo, bar) 
```

**root.minsize()**将窗口的最小尺寸设置为*foo*和*bar*，其中*foo*和*bar*分别是窗口的宽度和高度。

但是，您必须在 mainloop 完成运行之前运行此代码。只有调用该命令后才会生效。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T14:11:48.320

我想到了：

```
def __init__(self, master):
    ...
    self.master.update_idletasks()
    self.master.after_idle(lambda: self.master.minsize(self.master.winfo_width(), self.master.winfo_height())) 
```

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2014-08-25T12:06:38.767

```
root = Tk() 
```

由于创建了根窗口。根窗口是我们程序中的主应用程序窗口。它有一个标题栏和边框。这些由窗口管理器提供。它必须在任何其他小部件之前创建。

```
root.geometry("250x150+300+300") 
```

**geometry()**方法设置窗口的大小并将其定位在屏幕上。前两个参数是窗口的宽度和高度。最后两个参数是x，y屏幕坐标。

```
app = Example(root) 
```

这里我们创建应用程序类的实例。

```
root.mainloop() 
```

最后，我们进入主循环。事件处理从这一点开始。主循环从窗口系统接收事件并将它们分派给应用程序小部件。当我们单击标题栏的关闭按钮或调用 quit() 方法时，它会终止。

![在此处输入图像描述](../Images/1abe7238d3b4b6ae74a1639ad2a581ca.png)

我希望你觉得这很有用。

# php - 如何确定我的机器上是否安装了 Zend Framework、Zend Server？

> ID：10448884
> 
> 赞同：0
> 
> 时间：2012-05-04T12:33:23.540
> 
> 标签：php, zend-framework, zend-studio

我正在阅读[参考指南::创建您的项目](http://framework.zend.com/manual/en/learning.quickstart.create-project.html)。它写在那里：

> 为了创建您的项目，您必须首先下载并解压 Zend Framework。
> 
> 安装 Zend Server 后，可以在 Windows 上的**C:\Program Files\Zend\ZendServer\share\ZendFramework下找到框架文件。**include_path 已经配置为包含 Zend Framework。

我没有下载 Zend Framework 或安装 Zend Server（我已经`XAMPP`安装`Apache`并拥有`localhost`并且可以在浏览器中加载 php 文件。我认为我不再需要任何服务器）。我刚刚下载并安装了 Zend Studio 9，安装后我这样做了：

```
File --> New --> Example... 
```

并选择`Zend Framework Example Project`并命名了我的项目`"zend_project_example"`。

然后写了正在安装的东西，花了很长时间。然后我在`PHP Explore`文件夹中找到了这棵树。我什至从**Zend 框架库中打开了****控制器代码**：

 **![http://www.ljplus.ru/img4/a/_/a_ya_vishe/pic.jpg](../Images/efa3bac95a72ca9ca5d192fb2b64e8f2.png)

所以看起来我有 ZF，但我没有任何东西：

`C:\Program Files\Zend\ZendServer\share\ZendFramework.`

事实上，我只有**Zend Studio 9**文件夹 threre：`C:\Program Files\Zend\Zend Studio 9.0.2.`

没有任何`\ZendServer\share\ZendFramework`

在参考文献中写道：

> 打开一个终端（在 Windows 中，开始 -> 运行，然后使用 cmd）。导航到要在其中启动项目的目录。然后，使用相应脚本的路径，并执行以下操作之一：
> 
> **% zf 创建项目快速入门**

我不为我工作。我无法在[参考指南](http://framework.zend.com/manual/en/learning.quickstart.create-project.html)中进一步执行任何步骤。我应该解决什么问题以及接下来我应该做什么才能遵循正确的参考方式？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:44:59.800

Zend Studio 只是一个 IDE - 一个应该让开发人员的生活更轻松的环境。您需要一台服务器来在 localhost 上运行您的项目。你引用了

> 安装 Zend Server 后，

你写了

> 我没有下载 Zend Framework 或安装 Zend Server，

如果你不按照它所说的去做，你就不能指望 tutprail 会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:56:50.810

[http://www.zend.com/en/downloads/](http://www.zend.com/en/downloads/)

这是 zend 服务器的下载链接，您希望选择哪个，然后手动保存并双击安装文件，以便在您的系统上安装**

# php - 使用 PHP 获取部分 URL

> ID：10448887
> 
> 赞同：1
> 
> 时间：2012-05-04T12:33:33.013
> 
> 标签：php, url

我有一个站点，我需要使用 PHP 获取一个页面 URL。URL 可能是某物`www.mydomain.com/thestringineed/`，也可能是`www.mydomain.com/thestringineed?data=1`，也可能是`www.mydomain.com/ss/thestringineed`

所以它总是最后一个字符串，但我不想在之后得到任何东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T12:38:40.220

`parse_url`应该可以帮助你。

```
<?php
   $url = "http://www.mydomain.com/thestringineed/";
   $parts = parse_url($url);

   print_r($parts);
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T12:41:31.907

您将使用 parse_url 函数，然后查看返回的路径部分。像这样：

```
$url='www.mydomain.com/thestringineed?data=1';
$components=parse_url($url);

//$mystring= end(explode('/',$components['path']));

// I realized after this answer had sat here for about 3 years that there was 
//a mistake in the above line
// It would only give the last directory, so if there were extra directories in the path, it would fail. Here's the solution:
$mystring=str_replace( reset(explode('/',$components['path'])),'',$components['path']); //This is to remove the domain from the beginning of the path.

// In my testing, I found that if the scheme (http://, https://, ...) is present, the path does not include 
//the domain. (it's available on it's own as ['host']) In that case it's just  
// $mystring=$components['path']); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:41:15.233

[`parse_url()`](http://php.net/manual/en/function.parse-url.php)是您正在寻找的功能。您想要的确切部分，可以通过`PHP_URL_PATH`

```
$url = 'http://php.net/manual/en/function.parse-url.php';
echo parse_url($url, PHP_URL_PATH); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T12:42:18.500

使用`$_SERVER['REQUEST_URI']`它将返回完整的当前页面 url，您可以使用 '/' 拆分它并使用最后一个数组索引。这将是最后一个字符串

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T12:45:17.607

您可以使用：

```
$strings = explode("/", $urlstring); 
```

这将删除 url 中的所有 '/' 并返回一个包含所有单词的数组。

```
$strings[count($strings)-1] 
```

现在有了您需要的字符串的值，但它可能包含 '?data=1' 所以我们需要删除它：

```
$strings2 = explode("?", $strings[count($strings)-1]);

$strings2[0] 
```

有你想要的 url 中的字符串。

希望这可以帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T12:53:33.390

```
<?php
$url = 'http://username:password@hostname/path?arg=value#anchor';

print_r(parse_url($url));

echo parse_url($url, PHP_URL_PATH);
?> 
```

你的输出是

```
Array
(
    [scheme] => http
    [host] => hostname
    [user] => username
    [pass] => password
    [path] => /path
    [query] => arg=value
    [fragment] => anchor
)
/path 
```

# asp.net - Windows Workflow Foundation 4 的状态机或流程图？

> ID：10448893
> 
> 赞同：6
> 
> 时间：2012-05-04T12:33:44.250
> 
> 标签：asp.net, workflow-foundation-4, workflow-foundation

我们目前有一个处理翻译工作的系统。

1.  客户创建订单
2.  项目经理将其交给一名或多名翻译
3.  然后交给校对员
4.  语言经理检查质量，如果质量不好，工作会返回给翻译
5.  项目经理将其交付给客户

目前，所有状态都可以手动分配和/或覆盖。这意味着可以跳过或退回任何步骤。

该应用程序是 ASP.NET WebForms / MVC 组合。

现在我想用 Windows Workflow Foundation 重新实现它。状态机会比流程图更有意义吗？我并没有真正获得状态机的优势......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T15:31:02.147

鉴于您描述工作的方式，您实际上是在状态之间切换。因此，使用状态机听起来是合乎逻辑的方法。但是，使用流程图完全有可能做到这一点，而且这肯定更容易向业务用户解释。

现在的好处是您可以根据需要/想要混合和匹配状态机和流程图。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T23:19:14.457

对于大多数这样的场景，我更喜欢 StateMachine。绝对有可能做你想做的事。你应该花一些时间来探索它。您可能想从[介绍状态机动手实验室开始](http://code.msdn.microsoft.com/Windows-Workflow-b4b808a8)

# c# - 为 iexpress 创建批处理文件

> ID：10448897
> 
> 赞同：5
> 
> 时间：2012-05-04T12:34:14.460
> 
> 标签：c#, installation, exe, silent, iexpress

我试图用来`iexpress`运行我的批处理文件，它将为我执行 2 个 exe 和 1 个 msi 文件。当我尝试手动执行时，它可以工作。

以下是我的批处理文件中的代码。

```
Start /wait %CD%\1.exe /q
Start /wait %CD%\2.exe /q
msiexec.exe /i "%CD%\3.msi" 
```

但是当我从 iexpress 创建一个 exe 文件时，这似乎不起作用。 ![在此处输入图像描述](../Images/1ffec8c9d5d254ad958bc24e1ca14323.png)

[参考](http://www.itscodingtime.com/post/Combine-Setup-MSI-and-EXE-into-a-single-package-with-IExpress.aspx)

上面提到的文章有一些代码（将文件复制到临时文件夹）&但我无法理解语法。

```
MKDIR %Tmp%\<UNIQUE PRODUCT NAME>
XCOPY . %Tmp%\<UNIQUE PRODUCT NAME> /S /E /Y
%Tmp%\<UNIQUE PRODUCT NAME>\setup.exe 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:42:47.657

这是它的意思：

**1)**在存储在环境变量中的路径中创建一个`MKDIR`名为“UNIQUE PRODUCT NAME”的目录（），该路径`%TMP%`通常指向：C:\DOCUME~1\yourusername\LOCALS~1\Temp

```
MKDIR %Tmp%\<UNIQUE PRODUCT NAME> 
```

**2）**然后递归地将当前文件夹中的所有安装文件复制到之前创建的新文件夹中。XCOPY 参数：

`/S` 复制目录和子目录，除了空目录。

`/E` 复制目录和子目录，包括空目录。与 相同`/S /E`。可以用来修改`/T`。

`/Y` 禁止提示确认您要覆盖现有的目标文件。

```
XCOPY . %Tmp%\<UNIQUE PRODUCT NAME> /S /E /Y 
```

**3)**最后从新位置 %Tmp%\\setup.exe 执行应用程序

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-04T21:48:30.670

问题是，正如您从屏幕截图中看到的那样，批处理文件是由 执行的`command.com`，而不是`cmd.exe`. （如果您不指定解释器，IExpress 使用`command.com`. 哎哟。）所以没有像`%cd%`or之类的变量`%~dp0`。

无论如何，您可能都不需要它们。但是您确实需要在 IExpress 中显式执行批处理文件，例如：

```
cmd.exe /c file.bat 
```

以便它使用现代命令解释器。

您问题中的第二段代码通过将文件保存`xcopy`到不同的目录来使文件持久化（即在 IExpress 存档终止后它们不会被删除）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:40:52.690

尝试替换`%CD%`为`%~dp0`

假设 1.exe 与批处理脚本位于同一文件夹中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T12:43:13.713

您的 %CD% 不工作。请确保已启用 CMD 扩展（键入 CMD /x 以启用和 CMD /y 以禁用）然后使用此代码扩展 %CD%

```
SET CURDIR=%CD%
Start /wait "%CURDIR%\1.exe" /q 
Start /wait "%CURDIR%\2.exe" /q 
msiexec.exe /i "%CURDIR%\3.msi" 
```

出于安全原因，我不确定您是否可以从该位置 (APPDATA) 启动 exe。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-25T10:39:59.237

非常感谢这个论坛的讨论。最后我可以在一个 .exe 文件中编译所有 msi 文件和可执行文件。

完成过程如下创建一个批处理文件

> `echo on`
> 
> `SET CURDIR=%CD%`
> 
> `msiexec.exe /i "%CURDIR%\1.msi"`
> 
> `"%CURDIR%\3.EXE"`
> 
> `"%CURDIR%\setup.exe"`
> 
> `echo off`

您可以根据需要排列任意数量的 exe 文件或 msi 文件，并将批处理文件保存为 yourfile.bat。现在棘手的部分是在您继续使用 Iexpress 之前，使用 [http://www.f2ko.de/programs.php?pid=b2e提供的软件将批处理文件转换为 exe](http://www.f2ko.de/programs.php?pid=b2e)

现在，当您运行程序时，请选中“不可见的应用程序”以隐藏命令提示符。您还可以使用密码加密您的 exe。*'Delete at Exit'*是可选的，因为当文件执行完成时临时文件夹将被自动删除。成功编译批处理文件后，执行创建的 .exe 文件。答对了！！您将看不到命令​​提示符窗口，并且您的应用程序开始按顺序执行。

启动您的 Iexpress 工具并添加批处理文件中存在的所有文件（批处理文件除外）。在“要启动的安装程序”屏幕上，将安装后命令**留空**，并在“安装程序”下拉列表中找到以下内容：' **demo.exe** '然后继续创建完整的单个包。干杯！！

# openshift - 特定时间的每日 cron

> ID：10448900
> 
> 赞同：9
> 
> 时间：2012-05-04T12:34:22.783
> 
> 标签：openshift

我想在 OpenShift Express PaaS 上做一份日常工作。我知道如何在我的应用程序上激活 cron 墨盒，以及如何将脚本添加到正确的 cron 文件夹中。

但我有一个特殊需要指定，在一天中的哪个时间执行作业。例如“每天晚上 10:30”

OpenShift cron 盒式磁带可以做到这一点吗？如何配置具有特定时间的日常工作？

问候，拉斯

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-03T23:33:40.887

您可以使用“每分钟”的 cron 作业，并且仅在当前时间为晚上 10:30 时运行您的脚本。

像这样 ：

```
#!/bin/bash

if [ `date +%H:%M` == "22:30" ]
then
    bash scriptToRunAt10h30pm.sh
fi 
```

# python - 为什么 pip 在我的虚拟环境之外安装一个包？

> ID：10448901
> 
> 赞同：13
> 
> 时间：2012-05-04T12:34:23.950
> 
> 标签：python, virtualenv, pip

在做了虚拟环境的来源后，我尝试

```
pip install -U --no-deps django-social-auth 
```

它返回：

```
OSError: [Errno 13] Permission denied: '/usr/local/lib/python2.6/dist-packages/django_social_auth-0.6.9-py2.6.egg-info/dependency_links.txt' 
```

为什么它试图在 virtualenv 之外写？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-13T16:21:37.020

当我重命名包含我的虚拟环境的目录时遇到了这个问题。pip 使用的硬路径不再正确。

更新 pip 脚本中的 shebang 以指向您的虚拟环境的 python 可执行文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T12:54:48.473

在我看来，要么你正在执行一个不属于 virtualenv 的 pip，要么你正在执行，但是被执行的 python 解释器不是 virtualenv 的一部分。检查您正在执行的 pip 是否是正确的`which pip`，并通过使用强制 python 从 virtualenv 中`your_envdir/bin/python pip <arguments>`，而不是仅仅调用普通 pip。

这很奇怪，因为如果你用 bin/activate 正确激活了环境，你应该得到正确的 pip。你确定你激活了`. bin/activate`，而不是`sh bin/activate`？他们是两个不同的东西。提示改变了吗？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T12:45:15.347

您可能应该确保您是虚拟环境中的点子，等等。像

```
./env/bin/pip install -U --no-deps django-social-auth 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-13T13:02:07.013

`PYTHONPATH`当我错误地设置错误时，我遇到了这个问题`~/.bashrc`。如果`echo $PYTHONPATH`返回您预期环境之外的任何内容，请使用删除它`export PYTHONPATH=''`并检查您`~/.bashrc`的`PYTHONPATH`.

# android - Android：带有 OpenGL ES2 的虚拟操纵杆小部件？

> ID：10448909
> 
> 赞同：0
> 
> 时间：2012-05-04T12:35:05.340
> 
> 标签：android, android-layout, opengl-es, opengl-es-2.0

我是 Android 开发新手，正在编写一个小型 OpenGL ES2 应用程序。

我在这里找到了一个适用于 android 的操纵杆小部件： [http ://code.google.com/p/mobile-anarchy-widgets/wiki/JoystickView](http://code.google.com/p/mobile-anarchy-widgets/wiki/JoystickView)

但我想知道，如何将它集成到我的 OpenGL ES2 应用程序中？是否可以在 GLSurfaceView 中添加其他视图？

# sql - 无法从带有选择语句中的 where 子句的 Excel 工作表中读取数据

> ID：10448913
> 
> 赞同：0
> 
> 时间：2012-05-04T12:35:15.390
> 
> 标签：sql, vb.net, excel

我正在尝试从 Excel 工作表中读取数据，但有一个例外情况，即没有为我不理解的一个或多个必需参数提供值。这是我的代码，直到错误指向的位置：

```
Dim MyConnection As System.Data.OleDb.OleDbConnection
Dim DtSet As System.Data.DataSet
Dim MyCommand As System.Data.OleDb.OleDbDataAdapter
MyConnection = New System.Data.OleDb.OleDbConnection _
    ("Provider=Microsoft.ACE.OLEDB.12.0; Data Source=" & Application.StartupPath & "\Staff Contracts.xlsx; Extended Properties=""Excel 12.0;HDR=NO""")
MyCommand = New System.Data.OleDb.OleDbDataAdapter _
    ("select * from [Staff Contracts$A4:K14] where I=176", MyConnection)
MyCommand.TableMappings.Add("Table", "TestTable")
DtSet = New System.Data.DataSet
MyCommand.Fill(DtSet) 
```

异常指向最后一行`MyCommand.Fill(DtSet)`，这表明我的 select 语句存在问题。以前，我的代码读取数据并`where`在 select 中不带子句的情况下显示它，但是当我添加`where`语句以便它只能从列`I`的值等于 176 的行中读取数据时，它会给出一个异常，表明一些需要参数缺少值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:52:03.643

在 HDR = NO 的情况下，I 列将变为 F9，因为 oledb 将列命名为 F1.. Fn 作为内部参考。

```
MyCommand = new System.Data.OleDb.OleDbDataAdapter("select * from [Staff Contracts$A4:K14] where F9=176", MyConnection); 
```

在这种情况下，OLEDB 驱动程序将为选择中的每一列（F1 到 Fn）创建列名。因此，如果您将范围“A4:K14”更改为“B4:K14”，则 F9 列将为 F8。

# c# - 创建的动态按钮单击事件 OnPreRender 不会触发

> ID：10448918
> 
> 赞同：3
> 
> 时间：2012-05-04T12:35:31.093
> 
> 标签：c#, asp.net, dynamic, webforms, prerender

我在这样的`PreRender`事件中动态创建一个按钮：

```
Button myButton = new Button();
myButton.Text = "Test";
myButton.Click += new EventHandler(myButton_Click);
myDiv.Controls.Add(myButton); 
```

此按钮在浏览器中呈现，但是当我单击该按钮时，单击事件不会触发。我试图在`PageLoad`事件中创建一个相同的按钮并且它工作得很好，但是我必须在`PreRender`事件中创建这个按钮，因为创建这个动态按钮是否取决于我只在这个事件中获得的值。当我单击在 中创建的动态按钮时`PreRender`，单击事件会触发，我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:09:16.677

您应该在页面的 OnInit 事件中将您的按钮添加到页面，并在 OnLoad 期间或之前连接它的点击事件，然后您可以启用/禁用您的按钮或使用您在 PreRender 事件期间拥有的变量使您的按钮可见/不可见. 有关更多详细信息，请参阅 Joel Coehoorn[对此问题](https://stackoverflow.com/questions/877339/asp-net-add-control-on-postback)的回答。否则，请尝试使用 PlaceHolder 控件，尽管这可能会更棘手。

```
protected override void OnInit (EventArgs e)
{
  Button myButton = new Button();
  myButton.Text = "Test";
  myButton.Click += new EventHandler(myButton_Click);
  myDiv.Controls.Add(myButton);

  base.OnInit(e);
}

protected override void OnPreRender(EventArgs e)
{
  myButton.Visible = myConditional;

  base.OnPreRender(e);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:40:20.967

In PreRender you can create some var, which will tell you, that you need create button. And on Render create that button by hand with need JavaScript or with sending form. But you can't use such simple syntax as +=EventHandler, more code need.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:42:12.417

According to this link from MSDN, you must add button and event related to it if needed durign the `OnInit()` as explained here : [MSDN Lifecycle](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

*"Raised after all controls have been initialized and any skin settings have been applied. The Init event of individual controls occurs before the Init event of the page. Use this event to read or initialize control properties."*

To do so, try something like that :

```
protected override void OnInit(EventArgs e)
{
   // Do some stuff here
   base.OnInit(e);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T12:42:37.420

You should move control creation earlier in the page lifecycle. Control events are fired after Load and before PreRender so OnLoad or anything earlier should do.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T12:37:22.567

您应该在 preinit 阶段添加按钮，否则它不会触发

[Asp 网络生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

> 将此事件用于以下 (PREINIT)：
> 
> *   创建或重新创建动态控件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T12:37:33.797

也许在中创建按钮并在中`PreRender`绑定点击事件`PageLoad`？

# fluent-nhibernate - 类别/子类别树的流利 NHibernate 映射

> ID：10448923
> 
> 赞同：3
> 
> 时间：2012-05-04T12:36:01.140
> 
> 标签：fluent-nhibernate, mapping, nhibernate-mapping

我的“**类别**”对象有以下模型类：

```
public virtual int Id { get; set; }
public virtual string Name { get; set; }
public virtual Category ParentCategory { get; set; }

public virtual IList<Category> SubCategories { get; set; } 
```

这是我的“**类别**”流利的 nhibernate 映射类：

```
Id(x => x.Id).GeneratedBy.Native();

Map(x => x.Name);
References(x => x.ParentCategory).Column("ParentCategoryId");

// ** THE BELOW MAPPING IS WHAT I'M UNSURE ABOUT **
HasMany(x => x.SubCategories).Where(x => x.Id == x.ParentCategory.Id); 
```

与此相关的我的数据库由许多“类别”组成，其中一些位于根级别（并且 ParentCategoryId = NULL），而所有其他都是子类别，可能只有 1 级深，也可能是 3 ,4,5 级深（递归父级备份到根/父级 CategoryId。

行/记录之间的关系示例：

```
Cars (Id = 1 - ParentCategoryId = NULL)
Cars (Id = 1) > Hatchback (Id = 2 - ParentCategoryId = 1)
Cars (Id = 1) > Hatchback (Id = 2) > Ford (Id = 3 - ParentCategoryId = 2)

Motorcycles (Id = 4 - ParentCategoryId = NULL)
Motorcycles (Id = 4) > Scooters (Id = 5 - ParentCategoryId = 4) 
```

我的 Category 类中的“ **SubCategories** ”属性需要检索所有具有当前 Category(Id) 的“ **ParentCategoryId** ”的类别，但我不确定如何进行映射。我已经尝试了上面示例中显示的 HasMany 映射，但失败了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:59:23.913

我相信我刚刚通过将 HasMany 映射更改为以下内容来实现了一个可行的解决方案：

```
HasMany(x => x.SubCategories)
.Cascade.AllDeleteOrphan()
.KeyColumn("ParentCategoryId")
.Where(x => x.ParentCategory.Id == x.Id) 
```

# objective-c - 当用户回到导航控制器（iOS）时，我想做一些事情

> ID：10448929
> 
> 赞同：5
> 
> 时间：2012-05-04T12:36:29.737
> 
> 标签：objective-c, ios

我在这里有一个表格视图，并且想要在用户点击导航控制器中的“后退”按钮时更新 UI。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T12:47:38.777

有很多途径可以完成这样的事情。

*   实现 viewWillDisappear
*   实现 viewWillAppear
*   为您的导航设置委托并响应更改
*   制作您自己的后退按钮，链接到您自己的功能
*   向后移动时使用 NSNotification

以上任何一个都是一个很好的起点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T12:41:41.813

为您的问题提供代码将有助于我们为您提供帮助！

你有没有尝试过这样的事情？

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [[self tableView] reloadData];
} 
```

# ruby-on-rails - 寻求澄清 Active Record 查询接口 3.0 的影响

> ID：10448933
> 
> 赞同：0
> 
> 时间：2012-05-04T12:37:01.530
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我正在研究从不推荐使用（在 Rails 3.1 中）使用 find 到 Active Record Query Interface 3.0 的更新。

我从 [总是优秀的] RailsCasts [Episode #202](http://railscasts.com/episodes/202-active-record-queries-in-rails-3)中了解到 find 调用需要重写。

但是，我不清楚是否仍然可以使用该构造，

```
Products.find_all_by_available(true)   # find specified via method used

# ^ not sure what the name for that convention is 
```

...在 Rails 3.2 下，或者这段代码是否也需要以新格式重写？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:44:32.173

它工作正常，但有些人建议为此创建命名范围，这样做的一个原因是延迟加载，find 和所有方法都不使用。

你会有类似的东西

```
scope :availables, lambda { |available| where(available: name)} 
```

# java - HQL 错误：连接的预期路径

> ID：10448935
> 
> 赞同：112
> 
> 时间：2012-05-04T12:37:08.957
> 
> 标签：java, spring-mvc

我一直在尝试这个查询的变体，但似乎无法做到这一点。我还参考了这篇文章：[加入的预期路径！Nhibernate 错误](https://stackoverflow.com/questions/5759707/path-expected-for-join-nhibernate-error)，似乎无法将相同的逻辑应用于我的查询。我的`User`对象有一个`UserGroup`集合。

我知道查询需要引用对象内的实体，但从我所看到的我...

```
@NamedQuery(
  name = "User.findByGroupId",
  query =
    "SELECT u FROM UserGroup ug " +
    "INNER JOIN User u WHERE ug.group_id = :groupId ORDER BY u.lastname"
) 
```

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-05-04T12:40:28.573

```
select u from UserGroup ug inner join ug.user u 
where ug.group_id = :groupId 
order by u.lastname 
```

作为命名查询：

```
@NamedQuery(
  name = "User.findByGroupId",
  query =
    "SELECT u FROM UserGroup ug " +
    "INNER JOIN ug.user u WHERE ug.group_id = :groupId ORDER BY u.lastname"
) 
```

在 HQL 语句中使用从一个实体到另一个实体的路径。有关详细信息，请参阅[有关 HQL 和连接的 Hibernate 文档](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#queryhql-joins)。

* * *

## 回答 #2

> 赞同：76
> 
> 时间：2012-05-04T12:39:06.850

您需要命名持有与用户关联的实体。例如，

```
... INNER JOIN ug.user u ... 
```

这就是错误消息所抱怨的“路径”——从用户组到用户实体的路径。

Hibernate 依赖于声明性 JOIN，其连接条件在映射元数据中声明。这就是为什么没有路径就无法构造原生 SQL 查询的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-17T20:13:47.430

最好使用 where 子句。Hibernate 不接受实体之间不存在 PK/FK 关系的表的内部连接

做

```
SELECT s.first_name, s.surname, sd.telephone_number FROM Student s, StudentDetails sd WHERE s.id = sd.student_id 
```

代替

```
SELECT s.first_name, s.surname, sd.telephone_number FROM Student s INNER JOIN StudentDetails sd on s.id = sd.student_id 
```

后者仅在学生的 id (s.id) 在 StudentDetails (sd.student_id)) 表设计/erd 上被引用为 FK 时才有效

# gwt - CellList 小部件编号不能超过 25

> ID：10448944
> 
> 赞同：4
> 
> 时间：2012-05-04T12:37:43.920
> 
> 标签：gwt

我已经在 CellList 上工作了几个星期，我觉得它很糟糕。

那些日子我希望打印一个包含 70 多个元素的列表，但我注意到我的 CellList 不附加超过 25：从 0 到 24。为了确保问题与我的项目没有关系，我决定测试新项目和部落项目中的代码，但结果相同。

这是我的代码：

```
CustomCell bodyCell = new CustomCell();
CellList<String> coreCellList = new CellList<String>(bodyCell);
List<String> list = new ArrayList<String>();
for (int i=0; i<74; i++) {
    list.add("hello_"+i);
}
coreCellList.setRowData(0, list);
coreCellList.setRowCount(list.size(), true);

RootPanel.get().add(coreCellList); 
```

和自定义单元：

```
public class CustomCell extends AbstractCell<String> {
interface Templates extends SafeHtmlTemplates {

        String style = "cell";

        @SafeHtmlTemplates.Template("<div class=\"" + style
                + "\" style = 'height : 15%'>{0}<br/></div>")
        SafeHtml cell(SafeHtml value);
    }

    private static Templates templates = GWT.create(Templates.class);

    @Override
    public void render(com.google.gwt.cell.client.Cell.Context context,
            String value, SafeHtmlBuilder sb) {
        SafeHtml safeValue = SafeHtmlUtils.fromString(value);

        SafeHtml rendered = templates.cell(safeValue);

        sb.append(rendered);
    }
} 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-11T19:10:58.643

当我不想分页时，我总是使用下面的代码传递我的 CellTables 和 CellLists。

```
public static void setupOnePageList(final AbstractHasData<?> cellTable) {
    cellTable.addRowCountChangeHandler(new RowCountChangeEvent.Handler() {
        @Override
        public void onRowCountChange(RowCountChangeEvent event) {
            cellTable.setVisibleRange(new Range(0, event.getNewRowCount()));
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:36:24.517

CellList 默认使用分页，页面大小为 25。如果在页面中添加 SimplePager，则可以控制要显示哪些数据。

我建议不要通过将页面大小设置为数据列表的大小来禁用分页，因为旧浏览器（尤其是 IE8 和更早版本）会遇到严重的性能问题，具体取决于演示文稿的复杂性和大小列表。

要添加寻呼机，请参阅[DevGuide](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCellWidgets#paging "开发指南")：

```
// Create a SimplePager.
SimplePager pager = new SimplePager();

// Set the cellList as the display.
pager.setDisplay(cellList); 
```

# ruby-on-rails - 使用嵌套路由与 accept_nested_attributes_for 有什么区别？

> ID：10448945
> 
> 赞同：5
> 
> 时间：2012-05-04T12:38:01.563
> 
> 标签：ruby-on-rails, forms, associations, nested-attributes

我可能完全混淆了这两者，但我看到表单可以使用基于嵌套路由的数组参数来促进关联，例如：

```
<%= form_for [@project, @task]... 
```

或者`fields_for`如果父类`accepts_nested_nested_attributes_for`是孩子，则使用帮助器。

这些方法之间有什么区别/权衡？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-08T02:09:00.430

我没有发现给出的答案像我希望的那样清楚，所以在做了更多的研究后，我发现了一个让我满意的答案，所以我想我会与其他人分享。

**嵌套路由方法**

基本上，当您将子模型的表单呈现为单独的表单时，嵌套路由方法很有用。换句话说，如果您的博客具有 Post 模型和 Comment 模型作为它的孩子，您可以使用嵌套路由为孩子呈现表单，这样提交该表单将使 Rails 在关联孩子方面发挥魔力与父母。

**嵌套属性方法**

另一方面，accepts_nested_attributes_for 方法更适合用于呈现一个表单，该表单虽然具有单个表单的外观，但实际上是多个表单与单个提交按钮合并在一起。

总而言之，**嵌套路由方法**以单一形式处理一个模型（尽管与父模型相关联），而**嵌套属性方法**以单一形式处理多个模型。

这种差异对新手来说可能很微妙，但足以理解。

希望这可以帮助其他对此有疑问的人。干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:50:13.570

这是子模型形式：

```
<%= form_for [@project, @task] ... %> 
```

您`Task`提交的现有`Project`.

在这里`@project = Project.find(params[:project_id])`并`@task = Task.new`根据[文档](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for)，或者`@task = Task.find(params[:id])`如果您正在更新现有任务。

这在父模型表单中使用：

```
<%= form_for @project do |f| %>
  <%= f.fields_for :task do |builder| %>
    <% # ... %>
  <% end %>
<% end %> 
```

您可以在其中一次创建或更新两个对象。如果您要更新对象`Task`，属性将在`params[:project][:task_attributes]`with 任务中传递。`id`

# graphics - System.Drawing.Graphics.Transform 在 Ubuntu 下的 Mono 中没有效果

> ID：10448947
> 
> 赞同：0
> 
> 时间：2012-05-04T12:38:06.100
> 
> 标签：graphics, mono, system.drawing

我有一个非常简单的代码在位图上绘制图像，图像必须绘制在右下角。我使用 TranslateTransform 来移动图像。这在 Windows 下运行时可以正常工作，但是在 Linux 下的 Mono 中运行时 TranslateTransform 无效。

```
byte[] imageBytes = File.ReadAllBytes(@"/home/alexey/Downloads/test.png");
using (Bitmap bmp = new Bitmap(500, 500))
{
    using (Graphics gr = Graphics.FromImage(bmp))
    {
        ImageAttributes attr = null;

        using (Image image = Image.FromStream(new MemoryStream(imageBytes)))
        {
            GraphicsUnit srcGU = GraphicsUnit.Pixel;
            RectangleF srcRect = image.GetBounds(ref srcGU);
            RectangleF bounds = new RectangleF(0, 0, 100, 100);

            // Destination points specify the bounding parallelogram.
            PointF[] dstPoints = new PointF[]
                { bounds.Location,
                  new PointF(bounds.X + bounds.Width, bounds.Y),
                  new PointF(bounds.X, bounds.Y + bounds.Height) };

            // Image must be in the in the lower right corner and it is if run the code under Windows.
            // But is run code under linux, the image is in the upper left corner.
            gr.TranslateTransform(400,400);

            gr.DrawImage(image, dstPoints, srcRect, srcGU, attr);
        }
    }
    bmp.Save(@"/home/alexey/Downloads/out.png", ImageFormat.Png);
} 
```

当然，代码是真实代码的简化版本，必须在 Windows 和 Linux 环境中都可以工作。缩小代码范围，发现linux下出现问题是因为Graphics.Transform在linux下的Mono没有效果。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T22:19:08.927

我认为最简单的解决方案是简单地将 400 添加到 dstPoints 的 X 和 Y 分量。

# javascript - 填充动态 div 的字体大小

> ID：10448948
> 
> 赞同：0
> 
> 时间：2012-05-04T12:38:14.850
> 
> 标签：javascript, html, css, dynamic, font-size

我正在尝试调整字体大小以填充容器。仅这一点显然不是问题。但是，容器也不是静态大小，它的大小设置为浏览器窗口的百分比，我希望字体大小与容器一起在浏览器调整大小时动态更新。

我一直在使用我发现的修改后的脚本，该脚本将字体大小调整为浏览器高度和宽度的百分比。

```
$( document ).ready( function() {
    var $body = $('body'); //Cache this for performance

    var setBodyScale = function() {
        var scaleFactor = 0.0001,
            scaleSource = $(window).height(),
            scaleSource2 = $(window).width(),
            maxScale = 200,
            minScale = 10;

        var fontSize = (scaleSource * scaleSource2) * scaleFactor; //Multiply the width of the body by the scaling factor:

        if (fontSize > maxScale) fontSize = maxScale;
        if (fontSize < minScale) fontSize = minScale; //Enforce the minimum and maximums

        $('body').css('font-size', fontSize + '%');
    }

    $(window).resize(function(){
        setBodyScale();
    });

    //Fire it when the page first loads:
    setBodyScale();
}); 
```

我没有得到想要的结果，所以尝试改变它，使比例源是容器而不是窗口。这有点工作，但它没有动态更新，它需要刷新页面。

简而言之，我找不到调整字体大小的方法，以填充大小由浏览器窗口的百分比决定的容器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:37:06.840

为什么要发明已经存在的东西？已经有一个很棒的 jQuery 工具：http: [//fittextjs.com/](http://fittextjs.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:41:24.710

这还不是一个真实的答案，但是视口相关的字体大小即将出现：

[http://css-tricks.com/viewport-sized-typography/](http://css-tricks.com/viewport-sized-typography/)

目前它仅在 Chrome Canary 中受支持，但很高兴知道它即将推出。

# c# - 从主窗体打开现有窗体

> ID：10448951
> 
> 赞同：3
> 
> 时间：2012-05-04T12:38:25.683
> 
> 标签：c#, winforms

我设计了两种形式：`Form1`和`Form2`. `Form1`是主要形式。中有一个按钮`Form1`，如果我单击该按钮，`Form2`则会弹出。我想做点什么`Form2`。

```
// click button in Form1.
private void button1_Click(object sender, EventArgs e)
    {
        Form form2= new Form();
        form2.ShowDialog();
    } 
```

但是`Form2`是一种新形式而不是现有形式。

这是错误的。

如何？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T12:41:18.647

您正在创建 Form 类的实例，而不是您在项目中拥有的 Form2。创建您之前创建的 Form2 实例，然后在其中调用 ShowDialog。

您可能已经注意到 program.cs 中的 Application.Run(new Form1()); 这里我们创建 Form1 的实例并传递给 Run 方法。

通过创建 Form2 的实例并调用 ShowDialog() 方法来显示它

```
Form2 form2= new Form2();
form2.ShowDialog(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:40:23.540

宣布

```
Form2 form2= new Form2(); 
```

喜欢你的班级成员并像这样使用它：

```
private void button1_Click(object sender, EventArgs e)
{

        form2.ShowDialog(); //blocking call 

       //or form2.Show() //non blocking call
} 
```

**编辑**

根据正确的评论，使这项工作而不是执行`Close()`将导致`Dispose()`您需要使用的功能`form2.Hide()`使 make 根本*不可见*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:43:16.037

您创建空白表格

```
Form Form2= new Form(); 
```

你应该使用

```
Form2 form2= new Form2(); 
```

完整代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        Form2 form2= new Form2();
        form2.ShowDialog();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-09T15:15:35.727

```
 private void button1_Click(object sender, EventArgs e)
        {
            InputForm form1 = new InputForm();
            form1.Show();
        } 
```

这里 InputForm 表示您要打开哪个表单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-29T02:27:11.053

问题是“从主表单打开现有表单”

好的，让我们稍微改变一下，**从主窗体打开一个现有的窗体实例。**

当您**显示表格时**

```
new Form2().Show(); 
```

假设您使用**隐藏**它

```
Form2.Hide(); 
```

你们*可以*用这个

```
var Form2_instance = Application.OpenForms.OfType<Form2>().Single();
Form2_instance.Show(); 
```

# objective-c - 如何在我的 Objective-C 代码中的空行上获得警告？

> ID：10448953
> 
> 赞同：0
> 
> 时间：2012-05-04T12:38:27.957
> 
> 标签：objective-c, xcode

因为我无法摆脱一些警告，虽然我的代码似乎没问题，但我将 Joe Conways（Conway/Hillegass：Objective-C Programming，第 3 版）代码复制到我的项目中，并在空行中得到了一些有趣的警告。代码工作正常（就像在复制之前一样）。有什么建议么？

![xcode 错误](../Images/ac6947aba38e82dc63c7938d31024554.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:41:21.937

It's nothing special, probably XCode didn't update the line numbers of the warnings. Re-build it and it should be fine.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-29T03:43:39.530

尝试“项目->清理”然后重建。应该摆脱他们。

# facebook - 如何使用访问令牌进行离线访问？

> ID：10448955
> 
> 赞同：1
> 
> 时间：2012-05-04T12:38:34.120
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

在我的简单网站上，人们可以分享所有内容（**即使从 Facebook 注销后**）。

所以，**我已经存储了令牌**并且我得到了长期存在的令牌。所以我得到了这个回应：

```
access_token=AAACZBLSe4fcoBAEmBMbHZAtTZB6uWxdnPbFrn0GU8OZByZCAzk3zNsgCZApxRBwgef‌​kbqQQjrNYP5lpQ6ZCdG15sJ1mpIigh9G3HZBAf6z9bIQZDZD&expires=5178262 . 
```

您可以注意到“**过期**”参数（在上一个链接中）包含 60x24x60x60 秒（60 天）。但是当我从 facebook 注销时，我得到了错误：

```
{
   "error": {
      "message": "Error invalidating access token: The session is invalid because the user logged out.",
      "type": "OAuthException",
      "code": 190,
      "error_subcode": 467
   }
} 
```

我怎样才能获得离线访问？.

Ps 我正在使用**JS SDK**，但我认为这没关系。

# wpf - 将自定义扩展作为静态资源分配给 Color 属性

> ID：10448960
> 
> 赞同：2
> 
> 时间：2012-05-04T12:38:45.500
> 
> 标签：wpf, xaml

我创建了一个扩展，它采用颜色值并按指定量修改 HSL 值。这是扩展的相关部分。

```
[MarkupExtensionReturnType(typeof(Color))]
internal class RelativeColor : MarkupExtension
{
    public Color BaseColor { get; set; }
    public float H { get; set; }
    public float S { get; set; }
    public float L { get; set; }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        ColorHSL c = RGBtoHSL(BaseColor);
        c.H *= H == 0f ? 1f : H;
        c.L *= L == 0f ? 1f : L;
        c.S *= S == 0f ? 1f : S;
        return HSLtoRGB(c);         //Returns Color object
    }

    // Additional methods that converts between HSL and RGB
} 
```

这是我放入 App.xaml 的 XAML

```
<Style.Resources>
    <Extensions:RelativeColor x:Key="ButtonBackgroundColor" BaseColor="{StaticResource WorkspaceBackground}" L="1.18"/>
    <SolidColorBrush x:Key="ButtonBackground" Color="{StaticResource ButtonBackgroundColor}"/>
    <SolidColorBrush x:Key="ButtonBorder" Color="{StaticResource ButtonBackgroundColor}" />
    <SolidColorBrush x:Key="ButtonHoverBorder" Color="#B2B2B2" />
 </Style.Resources> 
```

现在，在运行时一切都很好，没有错误。但是，在设计期间，XAML 编辑器会引发此错误：

```
Error   1   An object of the type "X.Extensions.RelativeColor" cannot be applied to a property that expects the type "System.Windows.Media.Color".  c:\...\app.xaml 18  62 
```

这指向 xaml 中的前两个 SolidColorBrush 行。关于如何解决这个问题并让设计师正确更新预览的任何想法？

# r - 带有ggplot的多面热图，用于X的选定部分，上面有额外的文本标签

> ID：10448962
> 
> 赞同：6
> 
> 时间：2012-05-04T12:38:47.380
> 
> 标签：r, ggplot2, heatmap

我有以下数据：

```
Id = paste ("ID-", 1:5, sep = "")
position <- rep(seq (1, 100,10), each = 5)
group = rep (rep(rep (1:5, each = length (Id)), each = length(position)))
yvar <- rnorm (length(position), 0.5, 0.1)
ycat <- c(sample (c("A", "B"), length(yvar), replace = TRUE))
namevar <- rep(Id, length(group)/length(Id))
mydf <- data.frame (namevar, group, position, yvar, ycat) 
```

`group`是一个刻面变量，`position`是一个连续的 x 变量。`yvar`用于填充瓷砖的颜色。`ycat`是每个图块的文本标签。我想为所有值创建一个空白空间，除了我选择用填充颜色和标签绘制的某些图块。

这是我到目前为止所拥有的：

```
 ggplot(mydf,aes(y=Id,x=position)) +
      facet_wrap(~group) +     
      geom_tile(aes(fill = yvar),colour = "black") +
      geom_text(aes(label = ycat)) +
      labs(x = NULL,y = NULL) 
```

![在此处输入图像描述](../Images/3baaa315155781289528afd28c98fab0.png)

我希望情节看起来像这样，除了到处都有空格，例如，30-50 之间的第 1 组和 20-60 之间的第 5 组，有点像这样：

![在此处输入图像描述](../Images/e8fed736dae85108f98758e725e4d8c4.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:54:11.453

这将生成您的最后一个图，但仅对选定区域进行着色：

```
ggplot(mydf,aes(y=Id,x=position)) +
  facet_wrap(~group) + 
  geom_blank() +    
  geom_tile(data = subset(mydf,(group == 1 & position >= 30 & position <= 50) | 
                                (group == 5 & position >= 20 & position <= 60)),aes(fill = yvar),colour = "black") +
  geom_text(data = subset(mydf,(group == 1 & position >= 30 & position <= 50) | 
                                (group == 5 & position >= 20 & position <= 60)),aes(label = ycat),size = 3) +
  labs(x = NULL,y = NULL) 
```

# java - MySQL+Java 事务

> ID：10448966
> 
> 赞同：2
> 
> 时间：2012-05-04T12:39:11.537
> 
> 标签：java, mysql

我正在开发一个将在 LAN 上运行的 java 应用程序，我今天测试我遇到了一个问题，当插入新数据时，即使在 COMMIT 之后其他客户端也看不到记录。

我正在使用事务，MySQL INNODB 引擎，所以我所做的就是在结束事务时将自动提交模式设置为 true，然后它就可以工作了。

但是为什么 commit 没有将 autoCommit 模式恢复到原来的状态呢？这很奇怪，因为教程说当回滚或提交时 autoCommitMode 将自动设置为 true。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:34:28.123

一旦建立连接，所有自动提交模式的更改总是明确地进行。提交/回滚事务不影响自动提交标志。

如果其他客户端重新连接后看到记录，则表示他身边有问题。

# regex - 将列表中的每个项目与之前的所有项目进行比较，仅打印唯一项目

> ID：10448978
> 
> 赞同：1
> 
> 时间：2012-05-04T12:39:40.910
> 
> 标签：regex, python-3.x, comparison

我正在使用以下正则表达式来匹配所有出现的特殊数字：

```
^([0-57-9]|E)[12][0-9]{3}[A-Z]?[A-Z]([0-9]{3}|[0-9]{4}) 
```

让我们假设这个正则表达式匹配以下五个数字：

```
31971R0974
11957E075
31971R0974-A01P2
31971R0974-A05
51992PC0405 
```

然后使用以下代码打印这些匹配项。这将打印列表中的每个项目，如果该项目包含破折号，则破折号之后的所有内容都将被丢弃。

```
def number_function():

    for x in range(0, 10):

    print("Number", number_variable[x].split('-', 1)[0]) 
```

但是，这将打印五行，其中第 1、3 和 4 行相同。

我需要您的帮助来编写一个脚本，将每个项目与所有以前的项目进行比较，并且仅在该项目不存在时才打印该项目。

因此，所需的输出将是以下三行：

```
31971R0974
11957E075
51992PC0405 
```

编辑2：

我解决了！我只需要四处走动。这是成品：

```
def instrument_function():
    desired = set()

    for x in range(0, 50):
        try:
            instruments_celex[x]
        except IndexError:
            pass
        else:
            before_dash = instruments_celex[x].split('-', 1)[0]
            desired.add(before_dash)        

    for x in desired:
        print("Cited instrument", x) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:49:35.437

到目前为止，我几乎没有做过 python，但这可能会做你所追求的

```
def number_function():
    desired = set()
    for x in range(0, 10):
        before_hyphen = number_variable[x].split('-', 1)[0]
        desired.add(before_hyphen)
    for x in desired:
        print("Number", x) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T06:46:36.273

这是您的“完成”功能的一个版本，它更可靠。

```
# Don't use instruments_celex as a global variable, that's terrible. 
# Pass it in to the function instead:
def instrument_function(instruments_celex): 
    unique = set()
    # In Python you don't need an integer loop variable. This is not Java.
    # Just loop over the list:
    for entry in instruments_celex:
       unique.add(entry.split('-', 1)[0])

    for entry in unique:
        print("Cited instrument", entry) 
```

您还可以使用生成器表达式来缩短它：

```
def instrument_function(instruments_celex): 
    unique = set(entry.split('-', 1)[0] for entry in instruments_celex)
    for entry in set:
       print("Cited instrument", entry) 
```

就是这样。事实上它是如此简单，除非我在程序中至少执行两次，否则我不会单独创建它的功能。

# java - lucene只能排序和搜索吗？

> ID：10448979
> 
> 赞同：1
> 
> 时间：2012-05-04T12:39:49.040
> 
> 标签：java, search-engine, lucene.net, lucene

我想按`id`DESC列出最新的 10 行顺序

```
Sort sort = new Sort(new SortField[]{new SortField("id",SortField.INT,true)});
TopDocs topDocs=indexSearch.search(null,null,10,sort);//no need Query,only sort
... 
```

我收到 500 异常，因为 Query 参数为空

我怎样才能以最好的方式实施它？

顺便说一句：`id`字段是一个 NumericField，使用以下方式编写：

```
new NumericField("id",Integer.MAX_VALUE,Field.Store.YES,true) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:41:06.783

你应该使用`MatchAllDocsQuery`它。

Lucene Query 是一个特殊的对象，它不仅是查询语义的规范，而且是对每个特定查询类型最有效的执行策略的实现。这就是为什么即使对于这个“无操作”也必须有一个特殊的查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:48:07.093

顺便说一句：如果您想搜索最新的 X 行，最好添加一个新的日期字段，其中包含此文档添加到存储库的时间，而不是依赖计数器（您的案例中的 ID）。试着想想如果你更新一个现有的文档或者你达到 Integer.MAX_VALUE 会发生什么

# .net - Dispatcher.CurrentDispatcher 与 Application.Current.Dispatcher

> ID：10448987
> 
> 赞同：85
> 
> 时间：2012-05-04T12:40:06.820
> 
> 标签：.net, wpf, dispatcher

`Dispatcher.CurrentDispatcher`(in `System.Windows.Threading`) 和`Application.Current.Dispatcher`(in )有什么区别`System.Windows`？

我的直觉告诉我，它`Application.Current.Dispatcher`永远不会改变，并且对当前应用程序中的所有线程都是全局的，同时可能会根据调用它的线程`Dispatcher.CurrentDispatcher`创建一个新实例。`Dispatcher`

那是对的吗？

如果是，`Dispatcher.CurrentDispatcher`主要是为了多线程UI的目的吗？

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-05-04T13:02:09.727

> 我的直觉告诉我 Application.Current.Dispatcher 永远不会改变并且对当前应用程序中的所有线程都是全局的，而 Dispatcher.CurrentDispatcher 可能会根据调用它的线程创建一个新的 Dispatcher 实例。

那是对的。

`Dispatcher.CurrentDispatcher`此外，从非 UI 线程访问没有任何意义。除非您调用它，否则它将什么也不做[`Dispatcher.Run`](http://msdn.microsoft.com/en-us/library/system.windows.threading.dispatcher.run.aspx)，并且进入无限消息循环不是您想要从工作线程中执行的操作。

所以：

*   **在最常见的情况下**，您的应用程序只有一个 UI 线程，`Application.Current.Dispatcher`并且`Dispatcher.CurrentDispatcher`从 UI 线程内部将返回相同的实例。您使用哪一个只是偏好问题。

*   如果您的应用程序有多个 UI 线程，那么每个线程都[`DispatcherObject`](http://msdn.microsoft.com/en-us/library/System.Windows.Threading.DispatcherObject.aspx)将与在构建时创建的 UI 线程的调度程序永久关联。在这种情况下，`Application.Current.Dispatcher`将指派生您的应用程序的线程的调度程序；您将无法使用它向其他 UI 线程拥有的控件发布消息。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2014-04-30T12:11:29.847

简而言之...

`Dispatcher.CurrentDispatcher`*获取当前线程*的调度程序。因此，如果您正在从后台进程中寻找 UI 线程的 Dispatcher，请不要使用它。

`Application.Current.Dispatcher`将始终为您提供 UI 线程的调度程序，因为这是启动唯一应用程序实例的线程。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-04T12:50:25.267

> 我的直觉告诉我 Application.Current.Dispatcher 永远不会改变并且对当前应用程序中的所有线程都是全局的，而 Dispatcher.CurrentDispatcher 可能会根据调用它的线程创建一个新的 Dispatcher 实例。

没错，`Application.Current.Dispatcher`它是应用程序的实例属性，在构造时分配为当前线程的调度程序。正如文件`Dispatcher.CurrentDispatcher`指出的那样：

> 获取当前正在执行的线程的 Dispatcher，如果尚未与线程关联，则创建一个新的 Dispatcher。

* * *

> 如果是，Dispatcher.CurrentDispatcher 的目的是否主要用于多线程 UI？

可能，我在获取后台线程的调度程序方面没有遇到任何用处，因为您通常没有属于您可能想要调度操作的 UI 元素。